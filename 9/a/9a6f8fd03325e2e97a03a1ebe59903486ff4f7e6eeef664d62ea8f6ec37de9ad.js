//@ui5-bundle sap/sf/common-1.js
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("jquery.sap.global",["sap/base/util/now","sap/base/util/Version","sap/base/assert","sap/base/Log","sap/ui/dom/getComputedStyleFix","sap/ui/dom/includeScript","sap/ui/dom/includeStylesheet","sap/ui/core/support/Hotkeys","sap/ui/test/RecorderHotkeyListener","sap/ui/security/FrameOptions","sap/ui/performance/Measurement","sap/ui/performance/trace/Interaction","sap/ui/base/syncXHRFix","sap/base/util/LoaderExtensions","sap/ui/Device","sap/ui/core/Configuration","sap/base/config","sap/ui/thirdparty/jquery","sap/ui/thirdparty/jqueryui/jquery-ui-position","ui5loader-autoconfig","jquery.sap.stubs","sap/ui/thirdparty/URI","sap/ui/events/PasteEventFix"],function(now,Version,assert,Log,getComputedStyleFix,includeScript,includeStylesheet,SupportHotkeys,TestRecorderHotkeyListener,FrameOptions,Measurement,Interaction,syncXHRFix,LoaderExtensions,Device,Configuration,BaseConfig,jQuery){"use strict";if(!jQuery){throw new Error("Loading of jQuery failed")}var ui5loader=sap.ui.loader;if(!ui5loader||!ui5loader._){throw new Error("The UI5 compatilbility module requires a UI5 specific AMD implementation")}var _ui5loader=ui5loader._;var oJQVersion=Version(jQuery.fn.jquery);(function(){jQuery.support=jQuery.support||{};jQuery.support.retina=Device.support.retina;jQuery.support.touch=Device.support.touch;jQuery.support.cssTransforms=true;jQuery.support.cssTransforms3d=true;jQuery.support.cssTransitions=true;jQuery.support.cssAnimations=true;jQuery.support.cssGradients=true;jQuery.support.flexBoxPrefixed=false;jQuery.support.flexBoxLayout=false;jQuery.support.newFlexBoxLayout=true;jQuery.support.hasFlexBoxSupport=true})();if(Device.browser.firefox){getComputedStyleFix()}if(Device.browser.firefox&&window.Proxy){syncXHRFix()}var oCfg=window["sap-ui-config"];for(var sKey in oCfg){var vValue=oCfg[sKey];var sLowerCaseKey=sKey.toLowerCase();if(!oCfg.hasOwnProperty(sLowerCaseKey)){oCfg[sLowerCaseKey]=vValue;delete oCfg[sKey]}}if(BaseConfig.get({name:"sapUiNoConflict",type:BaseConfig.Type.Boolean,freeze:true})){jQuery.noConflict()}jQuery.sap=jQuery.sap||{};jQuery.sap.Version=Version;jQuery.sap.now=now;var fnMakeLocalStorageAccessor=function(e,r,o){return function(t){try{if(t!=null||r==="string"){if(t){localStorage.setItem(e,r==="boolean"?"X":t)}else{localStorage.removeItem(e)}o(t)}t=localStorage.getItem(e);return r==="boolean"?t==="X":t}catch(r){Log.warning("Could not access localStorage while accessing '"+e+"' (value: '"+t+"', are cookies disabled?): "+r.message)}}};jQuery.sap.debug=fnMakeLocalStorageAccessor.call(this,"sap-ui-debug","",function(e){alert("Usage of debug sources is "+(e?"on":"off")+" now.\nFor the change to take effect, you need to reload the page.")});jQuery.sap.setReboot=fnMakeLocalStorageAccessor.call(this,"sap-ui-reboot-URL","string",function(e){if(e){alert("Next time this app is launched (only once), it will load UI5 from:\n"+e+".\nPlease reload the application page now.")}});jQuery.sap.statistics=fnMakeLocalStorageAccessor.call(this,"sap-ui-statistics","boolean",function(e){alert("Usage of Gateway statistics "+(e?"on":"off")+" now.\nFor the change to take effect, you need to reload the page.")});jQuery.sap.log=Object.assign(Log.getLogger(),{Level:Log.Level,getLogger:Log.getLogger,getLogEntries:Log.getLogEntries,addLogListener:Log.addLogListener,removeLogListener:Log.removeLogListener,logSupportInfo:Log.logSupportInfo,LogLevel:Log.Level,getLog:Log.getLogEntries});var sWindowName=typeof window==="undefined"||window.top==window?"":"["+window.location.pathname.split("/").slice(-1)[0]+"] ";jQuery.sap.assert=function(e,r){if(!e){var o=typeof r==="function"?r():r;assert(e,sWindowName+o)}};jQuery.sap.factory=function e(r){jQuery.sap.assert(typeof r=="object","oPrototype must be an object (incl. null)");function o(){}o.prototype=r;return o};jQuery.sap.newObject=function e(r){jQuery.sap.assert(typeof r=="object","oPrototype must be an object (incl. null)");return Object.create(r||null)};jQuery.sap.getter=jQuery.sap.getObject=function(e,r,o){var t=o||window,s=(e||"").split("."),a=s.length,n=isNaN(r)?0:a-r,i;if(Configuration.getSyncCallBehavior()&&o===window){Log.error("[nosync] getObject called to retrieve global name '"+e+"'")}for(i=0;t&&i<a;i++){if(!t[s[i]]&&i<n){t[s[i]]={}}t=t[s[i]]}return t};jQuery.sap.setObject=function(e,r,o){var t=o||window,s=(e||"").split("."),a=s.length,n;if(a>0){for(n=0;t&&n<a-1;n++){if(!t[s[n]]){t[s[n]]={}}t=t[s[n]]}t[s[a-1]]=r}};jQuery.sap.measure=Measurement;jQuery.sap.measure.clearInteractionMeasurements=Interaction.clear;jQuery.sap.measure.startInteraction=Interaction.start;jQuery.sap.measure.endInteraction=Interaction.end;jQuery.sap.measure.getPendingInteractionMeasurement=Interaction.getPending;jQuery.sap.measure.filterInteractionMeasurements=Interaction.filter;jQuery.sap.measure.getAllInteractionMeasurements=Interaction.getAll;jQuery.sap.measure.getRequestTimings=function(){if(window.performance.getEntriesByType){return window.performance.getEntriesByType("resource")}return[]};jQuery.sap.measure.clearRequestTimings=jQuery.sap.measure.setRequestBufferSize=var getModuleSystemInfo=function(){var e=_ui5loader.logger=Log.getLogger("sap.ui.ModuleSystem",BaseConfig.get({name:"sapUiXxDebugModuleLoading",type:BaseConfig.Type.Boolean,external:true,freeze:true})?Log.Level.DEBUG:Math.min(Log.getLevel(),Log.Level.INFO)),r=LoaderExtensions.getKnownSubtypes(),o;(function(){var t="";for(var s in r){t=(t?t+"|":"")+"(?:(?:"+r[s].join("\\.|")+"\\.)?"+s+")"}t="\\.(?:"+t+"|[^./]+)$";e.debug("constructed regexp for file sub-types :"+t);o=new RegExp(t)})();function t(e){if(/^jquery\.sap\./.test(e)){return e}return e.replace(/\./g,"/")}jQuery.sap.getModulePath=jQuery.sap.getResourcePath=function(e,r){if(arguments.length===1&&e!=""){var t=e.split(/\//);var s=o.exec(t[t.length-1]);if(s){r=s[0];t[t.length-1]=t[t.length-1].slice(0,s.index);e=t.join("/")}else{r=""}}return _ui5loader.getResourcePath(e,r)};jQuery.sap.registerModulePath=function e(r,o){jQuery.sap.assert(!/\//.test(r),"module name must not contain a slash.");r=r.replace(/\./g,"/");o=o||".";LoaderExtensions.registerResourcePath(r,o)};jQuery.sap.registerResourcePath=LoaderExtensions.registerResourcePath;jQuery.sap.registerModuleShims=function(e){jQuery.sap.assert(typeof e==="object","mShims must be an object");ui5loader.config({shim:e})};jQuery.sap.isDeclared=function e(r,o){var s=_ui5loader.getModuleState(t(r)+".js");return s&&(o||s>0)};jQuery.sap.isResourceLoaded=jQuery.sap.getAllDeclaredModules=LoaderExtensions.getAllRequiredModules;var s=_ui5loader.getUrlPrefixes();e.info("URL prefixes set to:");for(var a in s){e.info("  "+(a?"'"+a+"'":"(default)")+" : "+s[a])}jQuery.sap.declare=function(e,r){var o=e;if(typeof e==="object"){o=e.modName;e=t(e.modName)+(e.type?"."+e.type:"")+".js"}else{e=t(e)+".js"}_ui5loader.declareModule(e);if(r!==false){jQuery.sap.getObject(o,1)}};jQuery.sap.require=function(e){if(arguments.length>1){for(var o=0;o<arguments.length;o++){jQuery.sap.require(arguments[o])}return this}if(typeof e==="object"){jQuery.sap.assert(!e.type||r.js.indexOf(e.type)>=0,"type must be empty or one of "+r.js.join(", "));e=t(e.modName)+(e.type?"."+e.type:"")}else{e=t(e)}sap.ui.requireSync(e)};Object.defineProperty(jQuery.sap.require,"_hook",{get:set:function(e){jQuery.sap.assert(false,"jquery.sap.global: legacy hook for code transformation should no longer be used");_ui5loader.translate=e}});jQuery.sap.preloadModules=jQuery.sap.registerPreloadedModules=function(e){var r=e.modules;if(Version(e.version||"1.0").compareTo("2.0")<0){r={};for(var o in e.modules){r[t(o)+".js"]=e.modules[o]}}sap.ui.require.preload(r,e.name,e.url)};jQuery.sap.unloadResources=_ui5loader.unloadResources;jQuery.sap.getResourceName=function(e,r){return t(e)+(r==null?".js":r)};jQuery.sap.loadResource=LoaderExtensions.loadResource;jQuery.sap._loadJSResourceAsync=_ui5loader.loadJSResourceAsync;return ();jQuery.sap.includeScript=includeScript;jQuery.sap.includeStyleSheet=includeStylesheet;if(!BaseConfig.get({name:"sapUiProductive",type:BaseConfig.Type.Boolean,freeze:true})){SupportHotkeys.init(getModuleSystemInfo);TestRecorderHotkeyListener.init(getModuleSystemInfo)}if(oJQVersion.compareTo("3.6.0")!=0){Log.warning("SAPUI5's default jQuery version is 3.6.0; current version is "+jQuery.fn.jquery+". Please note that we only support version 3.6.0.")}jQuery.sap.FrameOptions=FrameOptions;jQuery.sap.globalEval=(function(){var e=Device.browser;var r=e.name;if(!jQuery.browser){jQuery.browser=function(e){var r=/(webkit)[ \/]([\w.]+)/,o=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(mozilla)(?:.*? rv:([\w.]+))?/,e=e.toLowerCase(),s=r.exec(e)||o.exec(e)||e.indexOf("compatible")<0&&t.exec(e)||[],a={};if(s[1]){a[s[1]]=true;a.version=s[2]||"0";if(a.webkit){a.safari=true}}return a}(window.navigator.userAgent)}if(r===e.BROWSER.CHROME){jQuery.browser.safari=false;jQuery.browser.chrome=true}else if(r===e.BROWSER.SAFARI){jQuery.browser.safari=true;jQuery.browser.chrome=false}if(r){jQuery.browser.fVersion=e.version;jQuery.browser.mobile=e.mobile}})();return jQuery});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("jquery.sap.keycodes",["jquery.sap.global","sap/ui/events/KeyCodes"],function(e,s){"use strict";e.sap.KeyCodes=s;return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("jquery.sap.mobile",["jquery.sap.global","sap/ui/util/Mobile","sap/ui/Device"],function(e,s,t){"use strict";function o(e,s){var t=Object.getOwnPropertyDescriptor(e,s);return t&&t.value}(function(){e.os=e.extend({os:t.os.name,version:t.os.versionStr,fVersion:t.os.version},o(e,"os"));e.os[t.os.name]=true;e.device=e.extend({},o(e,"device"));e.device.is=e.extend({standalone:window.navigator.standalone,landscape:t.orientation.landscape,portrait:t.orientation.portrait,iphone:t.os.ios&&t.system.phone,ipad:t.os.ios&&t.system.tablet,android_phone:t.system.phone&&t.os.android,android_tablet:t.system.tablet&&t.os.android,tablet:t.system.tablet,phone:t.system.phone,desktop:t.system.desktop},e.device.is)})();e.sap.initMobile=s.init;e.sap.setIcons=s.setIcons;e.sap.setMobileWebAppCapable=s.setWebAppCapable;return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("jquery.sap.resources",["sap/base/i18n/ResourceBundle","jquery.sap.global"],function(e,s){"use strict";s.sap.resources=s.sap.resources.isBundle=s.sap.resources._getFallbackLocales=e._getFallbackLocales;return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/base/security/encodeURLParameters",["./encodeURL"],function(e){"use strict";var n=function(n){if(!n){return""}var r=[];Object.keys(n).forEach(function(t){var i=n[t];if(i instanceof String||typeof i==="string"){i=e(i)}r.push(e(t)+"="+i)});return r.join("&")};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/base/strings/escapeRegExp",[],function(){"use strict";var e=/[[\]{}()*+?.\\^$|]/g;var r=return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/base/strings/hyphenate",[],function(){"use strict";var e=/([A-Z])/g;var r=function(r){return r.replace(e,};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ActionSheet",["./Dialog","./Popover","./library","sap/ui/core/Control","sap/ui/core/delegate/ItemNavigation","sap/ui/core/InvisibleText","sap/ui/Device","./ActionSheetRenderer","./Button","sap/ui/thirdparty/jquery","sap/ui/core/Configuration"],function(t,e,n,i,o,s,a,r,p,l,c){"use strict";var h=n.ButtonType;var u=n.DialogType;var f=n.PlacementType;var d=i.extend("sap.m.ActionSheet",{metadata:{library:"sap.m",properties:{placement:{type:"sap.m.PlacementType",group:"Appearance",defaultValue:f.Bottom},showCancelButton:{type:"boolean",group:"Appearance",defaultValue:true},cancelButtonText:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null}},aggregations:{buttons:{type:"sap.m.Button",multiple:true,singularName:"button"},_cancelButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_invisibleAriaTexts:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"}},defaultAggregation:"buttons",events:{cancelButtonTap:{deprecated:true},beforeOpen:{},afterOpen:{},beforeClose:{parameters:{origin:{type:"sap.m.Button"}}},afterClose:{parameters:{origin:{type:"sap.m.Button"}}},cancelButtonPress:{}},designtime:"sap/m/designtime/ActionSheet.designtime"},renderer:r});d.prototype.init=function(){this._fnOrientationChange=this._orientationChange.bind(this);this._actionSelected=null};d.prototype.exit=function(){a.resize.detachHandler(this._fnOrientationChange);if(this._parent){this._parent.destroy();this._parent=null}if(this._oCancelButton){this._oCancelButton.destroy();this._oCancelButton=null}this._clearItemNavigation()};d.prototype._clearItemNavigation=function(){if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();delete this._oItemNavigation}};d.prototype._setItemNavigation=function(){var t=this._getAllButtons(),e=[],n=this.getDomRef();if(n){this._oItemNavigation.setRootDomRef(n);for(var i=0;i<t.length;i++){if(t[i].getEnabled()&&t[i].getVisible()){e.push(t[i].getFocusDomRef())}}if(this._oCancelButton){e.push(this._oCancelButton.getFocusDomRef())}this._oItemNavigation.setItemDomRefs(e);this._oItemNavigation.setSelectedIndex(0);this._oItemNavigation.setPageSize(5);this._oItemNavigation.setDisabledModifiers({sapnext:["alt","meta"],sapprevious:["alt","meta"]})}};d.prototype.onmousedown=function(t){if(t.srcControl.isA("sap.m.Button")&&this.getButtons().indexOf(t.srcControl)!==-1){this._actionSelected=t.srcControl}};d.prototype.onBeforeRendering=function(){var t,e;this._clearItemNavigation();t=this.getTitle();if(this._parent&&!this.isPropertyInitial("title")&&this._parent.getTitle()!==t){if(a.system.phone){this._parent.setTitle(t);this._parent.setShowHeader(!!t)}if(t){this._parent.addStyleClass("sapMActionSheetDialogWithTitle")}else{this._parent.removeStyleClass("sapMActionSheetDialogWithTitle")}}e=this.getPlacement();if(this._parent&&!a.system.phone&&!this.isPropertyInitial("placement")&&this._parent.setPlacement()!==e){this._parent.setPlacement(e)}};d.prototype.onAfterRendering=function(){this._oItemNavigation=new o;this._oItemNavigation.setCycling(false);this.addDelegate(this._oItemNavigation);this._setItemNavigation()};d.prototype.sapfocusleave=function(){this.close()};d.prototype.openBy=function(n){var i=this;if(!this._parent){var o=this.getParent();if(o){this.setParent(null)}if(!a.system.phone){this._parent=new e({placement:this.getPlacement(),showHeader:false,content:[this],beforeOpen:function(){i.fireBeforeOpen()},afterOpen:function(){i.focus();i.fireAfterOpen()},beforeClose:function(){i.fireBeforeClose()},afterClose:function(){if(i.getShowCancelButton()){i.fireCancelButtonTap();i.fireCancelButtonPress()}i._onAfterClose(i._actionSelected);i._actionSelected=null},ariaLabelledBy:this.getPopupHiddenLabelId()||undefined}).addStyleClass("sapMActionSheetPopover");this._parent._setAriaRoleApplication(true)}else{this._parent=new t({title:this.getTitle(),type:u.Standard,content:[this],beforeOpen:function(){i.fireBeforeOpen()},afterOpen:beforeClose:afterClose:function(t){i._actionSelected=t.getParameter("origin");i._onAfterClose(i._actionSelected);i._actionSelected=null;a.resize.detachHandler(i._fnOrientationChange)}}).addStyleClass("sapMActionSheetDialog");if(this.getTitle()){this._parent.addStyleClass("sapMActionSheetDialogWithTitle")}else{this._parent.addAriaLabelledBy(this.getPopupHiddenLabelId()||undefined)}if(!a.system.phone){this._parent.setBeginButton(this._getCancelButton())}if(a.system.phone){this._parent.oPopup.setModal(true);this._parent._setDimensions=function(){t.prototype._setDimensions.apply(this);this.$("cont").css("max-height","")};this._parent._adjustScrollingPane=function(){var t=this.$().height();this.$("cont").css("max-height",t);if(this._oScroller){this._oScroller.refresh()}}}}if(o){o.addDependent(this._parent)}}if(!a.system.phone){this._parent.openBy(n)}else{this._parent.open();a.resize.attachHandler(this._fnOrientationChange)}};d.prototype.close=function(){if(this._parent){this._parent.close()}};d.prototype.isOpen=function(){return!!this._parent&&this._parent.isOpen()};d.prototype._createCancelButton=function(){if(!this._oCancelButton){var t=this.getCancelButtonText()?this.getCancelButtonText():sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("ACTIONSHEET_CANCELBUTTON_TEXT"),e=this;this._oCancelButton=new p(this.getId()+"-cancelBtn",{text:t,type:h.Reject,press:function(){if(a.system.phone&&e._parent){e._parent._oCloseTrigger=this}e.close();e.fireCancelButtonTap();e.fireCancelButtonPress()}}).addStyleClass("sapMActionSheetButton sapMActionSheetCancelButton sapMBtnTransparent sapMBtnInverted");if(a.system.phone){this.setAggregation("_cancelButton",this._oCancelButton,true)}}return this};d.prototype._getCancelButton=function(){if(a.system.phone&&this.getShowCancelButton()){this._createCancelButton();return this._oCancelButton}return null};d.prototype.setCancelButtonText=function(t){this.setProperty("cancelButtonText",t,true);if(this._oCancelButton){this._oCancelButton.setText(t)}return this};d.prototype._preProcessActionButton=function(t){var e=t.getType();if(e!==h.Accept&&e!==h.Reject){t.setType(h.Transparent)}t.addStyleClass("sapMBtnInverted");if(!t.getIcon()){t.addStyleClass("sapMActionSheetButtonNoIcon")}t.addStyleClass("sapMActionSheetButton");this._parent&&this._parent.invalidate();return this};d.prototype._buttonSelected=function(){if(a.system.phone&&this._parent){this._parent._oCloseTrigger=this}this.close()};d.prototype._orientationChange=d.prototype._addAriaHiddenTexts=function(t){var e=t.getId(),n;if(c.getAccessibility()){n=new s(e+"-actionSheetHiddenText");this.addAggregation("_invisibleAriaTexts",n,false);t.addAriaDescribedBy(n.getId())}};d.prototype._removeAriaHiddenTexts=function(t){t.getAriaDescribedBy().forEach(function(e){var n=sap.ui.getCore().byId(e);if(n instanceof s&&e.indexOf("actionSheetHiddenText")>-1){this.removeAggregation("_invisibleAriaTexts",n,false);t.removeAriaDescribedBy(n);n.destroy()}},this)};d.prototype.addButton=function(t){this.addAggregation("buttons",t,false);this._addAriaHiddenTexts(t);this._preProcessActionButton(t);t.attachPress(this._buttonSelected,this);return this};d.prototype.insertButton=function(t,e){this.insertAggregation("buttons",t,e,false);this._addAriaHiddenTexts(t);this._preProcessActionButton(t);t.attachPress(this._buttonSelected,this);return this};d.prototype.removeButton=function(t){var e=this.removeAggregation("buttons",t,false);if(e){e.detachPress(this._buttonSelected,this);this._removeAriaHiddenTexts(e)}return e};d.prototype.removeAllButtons=function(){var t=this.removeAllAggregation("buttons",false),e=this;l.each(t,function(t,n){n.detachPress(e._buttonSelected,e);e._removeAriaHiddenTexts(n)});return t};d.prototype.clone=function(){var t=this.getButtons();for(var e=0;e<t.length;e++){t[e].detachPress(this._buttonSelected,this)}var n=i.prototype.clone.apply(this,arguments);for(var o=0;o<t.length;o++){t[o].attachPress(this._buttonSelected,this)}return n};d.prototype._getAllButtons=function(){return this.getButtons()};d.prototype.getPopupHiddenLabelId=d.prototype._applyContextualSettings=function(){i.prototype._applyContextualSettings.call(this)};d.prototype._onAfterClose=return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/App",["./NavContainer","./library","./AppRenderer","sap/ui/util/Mobile","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,a,o,n,r){"use strict";var i=e.extend("sap.m.App",{metadata:{library:"sap.m",properties:{homeIcon:{type:"any",group:"Misc",defaultValue:null},backgroundColor:{type:"string",group:"Appearance",defaultValue:null},backgroundImage:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},backgroundRepeat:{type:"boolean",group:"Appearance",defaultValue:false},backgroundOpacity:{type:"float",group:"Appearance",defaultValue:1},mobileWebAppCapable:{type:"boolean",group:"Appearance",defaultValue:true},isTopLevel:{type:"boolean",group:"Behavior",defaultValue:true}},events:{orientationChange:{deprecated:true,parameters:{landscape:{type:"boolean"}}}}},renderer:a});i.prototype.init=function(){e.prototype.init.apply(this,arguments);this.addStyleClass("sapMApp");o.init({viewport:!this._debugZoomAndScroll,statusBar:"default",hideBrowser:true,preventScroll:!this._debugZoomAndScroll,rootId:this.getId()});r(window).on("resize",r.proxy(this._handleOrientationChange,this))};i.prototype.onBeforeRendering=function(){if(e.prototype.onBeforeRendering){e.prototype.onBeforeRendering.apply(this,arguments)}o.init({homeIcon:this.getHomeIcon(),mobileWebAppCapable:this.getMobileWebAppCapable()})};i.prototype.onAfterRendering=function(){if(e.prototype.onAfterRendering){e.prototype.onAfterRendering.apply(this,arguments)}if(this.getIsTopLevel()){this._adjustParentsHeight()}};i.prototype._adjustParentsHeight=function(){if(!this.getDomRef()){return}var e=this.getDomRef().parentNode;while(e&&e!==document.documentElement){var t=r(e);if(t.attr("data-sap-ui-root-content")){break}if(!e.style.height){e.style.height="100%"}e=e.parentNode}};i.prototype.exit=function(){r(window).off("resize",this._handleOrientationChange);if(this._sInitTimer){clearTimeout(this._sInitTimer)}};i.prototype._handleOrientationChange=function(){var e=r(window);var t=e.width()>e.height();if(this._oldIsLandscape!==t){this.fireOrientationChange({landscape:t});this._oldIsLandscape=t}};i.prototype.setBackgroundOpacity=function(e){if(e>1||e<0){n.warning("Invalid value "+e+" for App.setBackgroundOpacity() ignored. Valid values are: floats between 0 and 1.");return this}this.$("BG").css("opacity",e);return this.setProperty("backgroundOpacity",e,true)};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/AssociativeOverflowToolbar",["sap/base/Log","./OverflowToolbar","./OverflowToolbarRenderer","sap/ui/Device"],function(t,e,o,n){"use strict";var r=e.extend("sap.m.AssociativeOverflowToolbar",{metadata:{associations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}}},renderer:o});r.prototype.getContent=function(){var t=this.getAssociation("content")||[];var e=[];t.forEach(function(t){var o=sap.ui.getCore().byId(t);if(o){e.push(o)}});return e};r.prototype.insertContent=function(e,o){var n=e.getId(),r=this.getAssociation("content").filter(;var i;if(o<0){i=0}else if(o>r.length){i=r.length}else{i=o}if(i!==o){t.warning("AssociativeOverflowToolbar.insertContent: index '"+o+"' out of range [0,"+r.length+"], forced to "+i)}r.splice(i,0,n);this.removeAllAssociation("content");r.forEach(this);return this};r.prototype.exit=function(){e.prototype.exit.apply(this,arguments);return this._callToolbarMethod("destroyContent",[true])};r.prototype.indexOfContent=function(t){var e=this.getAssociation("content")||[];return e.indexOf(t.getId())};r.prototype._handleResize=function(){if(n.system.phone){this._resetAndInvalidateToolbar()}else{this._bControlsInfoCached=false;e.prototype._handleResize.apply(this,arguments)}};r.prototype._callToolbarMethod=function(t,o){switch(t){case"addContent":return this.addAssociation("content",o[0]);case"getContent":return this.getContent();case"insertContent":return this.insertContent(o[0],o[1]);case"removeContent":return sap.ui.getCore().byId(this.removeAssociation("content",o[0],o[1],o[2]))||null;case"destroyContent":this.removeAllAssociation("content",o[0]);return this;case"removeAllContent":return this.removeAllAssociation("content",o[0]).map(;default:return e.prototype._callToolbarMethod.call(this,t,o)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Bar",["./BarInPageEnabler","./library","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ui/Device","./BarRenderer","sap/ui/thirdparty/jquery","sap/ui/core/Configuration"],function(t,e,i,r,s,o,a,n){"use strict";var l=e.BarDesign;var p=e.TitleAlignment;var d=i.extend("sap.m.Bar",{metadata:{interfaces:["sap.m.IBar"],library:"sap.m",properties:{enableFlexBox:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},translucent:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},design:{type:"sap.m.BarDesign",group:"Appearance",defaultValue:l.Auto},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:p.None}},aggregations:{contentLeft:{type:"sap.ui.core.Control",multiple:true,singularName:"contentLeft"},contentMiddle:{type:"sap.ui.core.Control",multiple:true,singularName:"contentMiddle"},contentRight:{type:"sap.ui.core.Control",multiple:true,singularName:"contentRight"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/m/designtime/Bar.designtime",dnd:{draggable:false,droppable:true}},renderer:o});d.prototype.onBeforeRendering=function(){var t=this.getTitleAlignment(),e;this._removeAllListeners();for(e in p){if(e!==t){this.removeStyleClass("sapMBarTitleAlign"+e)}else{this.addStyleClass("sapMBarTitleAlign"+e)}}};d.prototype.onAfterRendering=function(){this._handleResize()};d.prototype.init=function(){this.data("sap-ui-fastnavgroup","true",true);this._sPrevTitleAlignmentClass=""};d.prototype.exit=function(){this._removeAllListeners();if(this._oflexBox){this._oflexBox.destroy();this._oflexBox=null}this._$MidBarPlaceHolder=null;this._$RightBar=null;this._$LeftBar=null};d._aResizeHandlers=["_sResizeListenerId","_sResizeListenerIdMid","_sResizeListenerIdRight","_sResizeListenerIdLeft"];d.prototype._removeAllListeners=d.prototype._removeListenerFailsave=d.prototype._handleResize=function(){this._removeAllListeners();var t=!!this.getContentLeft().length,e=!!this.getContentMiddle().length||this._oflexBox&&!!this._oflexBox.getItems().length,i=!!this.getContentRight().length;if(!this.getVisible()){return}if(!t&&!e&&!i){return}this._$LeftBar=this.$("BarLeft");this._$RightBar=this.$("BarRight");this._$MidBarPlaceHolder=this.$("BarPH");this._sResizeListenerId=r.register(this.getDomRef(),a.proxy(this._handleResize,this));if(!this.getEnableFlexBox()){if(t){this._sResizeListenerIdLeft=r.register(this._$LeftBar[0],a.proxy(this._handleResize,this))}else{this._$LeftBar.addClass("sapMBarEmpty")}if(e){this._sResizeListenerIdMid=r.register(this._$MidBarPlaceHolder[0],a.proxy(this._handleResize,this))}else{this._$MidBarPlaceHolder.addClass("sapMBarEmpty")}if(i){this._sResizeListenerIdRight=r.register(this._$RightBar[0],a.proxy(this._handleResize,this))}else{this._$RightBar.addClass("sapMBarEmpty")}}this._updatePosition(t,e,i)};d.prototype._updatePosition=function(t,e,i){if(!t&&e&&!i){return}if(t&&!e&&!i){return}if(!t&&!e&&i){return}var r=this.$().outerWidth(true);this._$RightBar.css({width:""});this._$LeftBar.css({width:""});this._$MidBarPlaceHolder.css({position:"",width:"",visibility:"hidden"});var s=this._$RightBar.outerWidth(true);if(s>r){if(t){this._$LeftBar.css({width:"0px"})}if(e){this._$MidBarPlaceHolder.css({width:"0px"})}this._$RightBar.css({width:r+"px"});return}var o=this._getBarContainerWidth(this._$LeftBar);if(r<o+s){o=r-s;this._$LeftBar.css({width:o+"px"});this._$MidBarPlaceHolder.css({width:"0px"});return}this._$MidBarPlaceHolder.css(this._getMidBarCss(s,r,o))};d.prototype._getMidBarCss=function(t,e,i){var r=this._$MidBarPlaceHolder.outerWidth(true),s=n.getRTL(),o=s?"right":"left",a={visibility:""};if(this.getEnableFlexBox()){r=e-i-t-parseInt(this._$MidBarPlaceHolder.css("margin-left"))-parseInt(this._$MidBarPlaceHolder.css("margin-right"));a.position="absolute";a.width=r+"px";a[o]=i;return a}var l=e-i-t,d=e/2-r/2,h=i>d,g=e/2+r/2,u=e-t<g,f=this.getTitleAlignment();if(f!==p.None&&f!==p.Center||l>0&&(h||u)){a.position="absolute";a.width=l+"px";a.left=s?t:i}return a};d.prototype._getBarContainerWidth=function(t){var e,i=0,r=t.children(),o=0;if(s.browser.webkit||s.browser.firefox){for(e=0;e<r.length;e++){o+=a(r[e]).outerWidth(true)}i=t.outerWidth(true)}else{var n;for(e=0;e<r.length;e++){n=window.getComputedStyle(r[e]);if(n.width=="auto"){o+=a(r[e]).width()+1}else{o+=parseFloat(n.width)}o+=parseFloat(n.marginLeft);o+=parseFloat(n.marginRight);o+=parseFloat(n.paddingLeft);o+=parseFloat(n.paddingRight)}var l=window.getComputedStyle(t[0]);i+=parseFloat(l.width);i+=parseFloat(l.marginLeft);i+=parseFloat(l.marginRight);i+=parseFloat(l.paddingLeft);i+=parseFloat(l.paddingRight)}if(i<o){i=o}return i};var h=t.extend("sap.m.BarInAnyContentEnabler",{});h.mContexts={dialogFooter:{contextClass:"sapMFooter-CTX",tag:"Footer"}};h.prototype.getContext=function(){var e=t.prototype.getContext.call();for(var i in h.mContexts){e[i]=h.mContexts[i]}return e};d.prototype.getContext=h.prototype.getContext;d.prototype.isContextSensitive=h.prototype.isContextSensitive;d.prototype.setHTMLTag=h.prototype.setHTMLTag;d.prototype.getHTMLTag=h.prototype.getHTMLTag;d.prototype.applyTagAndContextClassFor=h.prototype.applyTagAndContextClassFor;d.prototype._applyContextClassFor=h.prototype._applyContextClassFor;d.prototype._applyTag=h.prototype._applyTag;d.prototype._getContextOptions=h.prototype._getContextOptions;d.prototype._setRootAccessibilityRole=h.prototype._setRootAccessibilityRole;d.prototype._getRootAccessibilityRole=h.prototype._getRootAccessibilityRole;d.prototype._setRootAriaLevel=h.prototype._setRootAriaLevel;d.prototype._getRootAriaLevel=h.prototype._getRootAriaLevel;return d});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Breadcrumbs",["sap/ui/core/Control","sap/ui/util/openWindow","sap/m/Text","sap/m/Link","sap/m/Select","sap/ui/core/Item","sap/ui/core/delegate/ItemNavigation","sap/ui/core/ResizeHandler","sap/ui/core/IconPool","sap/ui/Device","sap/m/library","./BreadcrumbsRenderer","sap/ui/base/ManagedObject","sap/ui/core/InvisibleText"],function(t,e,i,r,o,n,s,a,l,h,u,c,g,p){"use strict";var d=u.SelectType,_=u.BreadcrumbsSeparatorStyle,f=sap.ui.getCore().getLibraryResourceBundle("sap.m");var b=t.extend("sap.m.Breadcrumbs",{metadata:{library:"sap.m",interfaces:["sap.m.IBreadcrumbs","sap.m.IOverflowToolbarContent","sap.m.IToolbarInteractiveControl","sap.ui.core.IShrinkable"],designtime:"sap/m/designtime/Breadcrumbs.designtime",properties:{currentLocationText:{type:"string",group:"Behavior",defaultValue:null},separatorStyle:{type:"sap.m.BreadcrumbsSeparatorStyle",group:"Appearance",defaultValue:_.Slash}},aggregations:{links:{type:"sap.m.Link",multiple:true,singularName:"link"},_currentLocation:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_select:{type:"sap.m.Select",multiple:false,visibility:"hidden"}},defaultAggregation:"links",associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}},renderer:c});b.STYLE_MAPPER={Slash:"/",BackSlash:"\\",DoubleSlash:"//",DoubleBackSlash:"\\\\",GreaterThan:">",DoubleGreaterThan:">>"};b._getResourceBundleText=function(t,e){return f.getText(t,e)};b.prototype.init=function(){this._sSeparatorSymbol=b.STYLE_MAPPER[this.getSeparatorStyle()];this._aCachedInvisibleTexts=[];this._getInvisibleText()};b.prototype.onBeforeRendering=function(){this.bRenderingPhase=true;if(this._sResizeListenerId){a.deregister(this._sResizeListenerId);this._sResizeListenerId=null}if(this._bControlsInfoCached){this._updateSelect(true)}this._destroyInvisibleTexts();this._aCachedInvisibleTexts=this._buildInvisibleTexts()};b.prototype.onAfterRendering=function(){if(!this._sResizeListenerId){this._sResizeListenerId=a.register(this,this._handleScreenResize.bind(this))}if(!this._bControlsInfoCached){this._updateSelect(true);return}this._configureKeyboardHandling();this.bRenderingPhase=false};b.prototype.onThemeChanged=function(){this._resetControl()};b.prototype.exit=function(){this._resetControl();this._destroyItemNavigation();this._destroyInvisibleTexts();if(this._oInvisibleText){this._oInvisibleText.destroy();this._oInvisibleText=null}};b.PAGEUP_AND_PAGEDOWN_JUMP_SIZE=5;b.prototype._getAugmentedId=b.prototype._getInvisibleText=function(){var t=b._getResourceBundleText("BREADCRUMB_LABEL");if(!this._oInvisibleText){this._oInvisibleText=new p({id:this.getId()+"-InvisibleText"});this._oInvisibleText.setText(t).toStatic()}return this._oInvisibleText};b.prototype._getSelect=function(){if(!this.getAggregation("_select")){this.setAggregation("_select",this._decorateSelect(new o({id:this._getAugmentedId("select"),change:this._selectChangeHandler.bind(this),forceSelection:false,autoAdjustWidth:true,icon:l.getIconURI("slim-arrow-down"),type:d.IconOnly,tooltip:b._getResourceBundleText("BREADCRUMB_SELECT_TOOLTIP")})),true)}return this.getAggregation("_select")};b.prototype._getCurrentLocation=function(){if(!this.getAggregation("_currentLocation")){var t=new i({id:this._getAugmentedId("currentText"),text:this.getCurrentLocationText(),wrapping:false}).addStyleClass("sapMBreadcrumbsCurrentLocation");t.addEventDelegate({onAfterRendering:bind(this)});this.setAggregation("_currentLocation",t).addStyleClass("sapMBreadcrumbsCurrentLocation")}return this.getAggregation("_currentLocation")};b.prototype._setCurrentLocationAccInfo=function(t){var e=this._getControlsForBreadcrumbTrail(),i=b._getResourceBundleText("BREADCRUMB_ITEM_POS",[e.length,e.length]);t.$().attr("aria-current","page");t.$().attr("tabindex",0);t.$().attr("role","link");t.$().attr("aria-label",this.getCurrentLocationText()+" "+i)};function m(t,e){var i=Array.prototype.slice.apply(e);i.unshift(t);return i}b.prototype.insertLink=function(t,e){var i=this.insertAggregation.apply(this,m("links",arguments));this._registerControlListener(t);this._resetControl();return i};b.prototype.addLink=function(t){var e=this.addAggregation.apply(this,m("links",arguments));this._registerControlListener(t);this._resetControl();return e};b.prototype.removeLink=function(t){var e=this.removeAggregation.apply(this,m("links",arguments));this._deregisterControlListener(e);this._resetControl();return e};b.prototype.removeAllLinks=function(){var t=this.getAggregation("links",[]);var e=this.removeAllAggregation.apply(this,m("links",arguments));t.forEach(this._deregisterControlListener,this);this._resetControl();return e};b.prototype.destroyLinks=function(){var t=this.getAggregation("links",[]);var e=this.destroyAggregation.apply(this,m("links",arguments));t.forEach(this._deregisterControlListener,this);this._resetControl();return e};b.prototype._destroyInvisibleTexts=function(){var t;this._aCachedInvisibleTexts.forEach(function(e){t=sap.ui.getCore().byId(e.controlId);if(t&&t.removeAriaLabelledBy){t.removeAriaLabelledBy(e.invisibleText.getId())}e.invisibleText.destroy()});this._aCachedInvisibleTexts=[]};b.prototype._decorateSelect=function(t){t.getPicker().attachAfterOpen(this._removeItemNavigation,this).attachBeforeClose(this._restoreItemNavigation,this);t._onBeforeOpenDialog=this._onSelectBeforeOpenDialog.bind(this);t._onBeforeOpenPopover=this._onSelectBeforeOpenPopover.bind(this);t.onsapescape=this._onSelectEscPress.bind(this);return t};b.prototype._removeItemNavigation=function(){this.removeDelegate(this._getItemNavigation())};b.prototype._onSelectBeforeOpenDialog=function(){var t=this._getSelect();if(this.getCurrentLocationText()&&h.system.phone){t.setSelectedIndex(0)}else{t.setSelectedItem(null)}o.prototype._onBeforeOpenDialog.call(t);this._removeItemNavigation()};b.prototype._onSelectBeforeOpenPopover=function(){this._getSelect().setSelectedItem(null);this._removeItemNavigation()};b.prototype._restoreItemNavigation=function(){this.addDelegate(this._getItemNavigation())};b.prototype._onSelectEscPress=b.prototype._createSelectItem=function(t){return new n({key:t.getId(),text:g.escapeSettingsValue(t.getText())})};b.prototype._selectChangeHandler=function(t){var i,o,n,s=t.getParameter("selectedItem");if(!s){return}if(!this._getSelect().isOpen()){return}i=sap.ui.getCore().byId(s.getKey());if(!(i instanceof r)){return}o=i.getHref();n=i.getTarget();i.firePress();if(o){if(n){e(o,n)}else{window.location.href=o}}};b.prototype._getItemsForMobile=function(){var t=this.getLinks().filter(function(t){return t.getVisible()});if(this.getCurrentLocationText()){t.push(this._getCurrentLocation())}return t};b.prototype._updateSelect=function(t){var e=this._getSelect(),i,r=this._getControlDistribution();if(!this._bControlDistributionCached||t){e.destroyItems();i=h.system.phone?this._getItemsForMobile():r.aControlsForSelect;i.map(this._createSelectItem).reverse().forEach(e.insertItem,e);this._bControlDistributionCached=true;this.invalidate(this)}e.setVisible(!!r.aControlsForSelect.length);if(!this._sResizeListenerId&&!this.bRenderingPhase){this._sResizeListenerId=a.register(this,this._handleScreenResize.bind(this))}};b.prototype._getControlsForBreadcrumbTrail=function(){var t;if(this._bControlDistributionCached&&this._oDistributedControls){return this._oDistributedControls.aControlsForBreadcrumbTrail}t=this.getLinks().filter(function(t){return t.getVisible()});if(this.getCurrentLocationText()){return t.concat([this._getCurrentLocation()])}return t};b.prototype._getControlInfo=function(t){return{id:t.getId(),control:t,width:C(t.$().parent()),bCanOverflow:t instanceof r}};b.prototype._buildInvisibleTexts=function(){var t=this._getControlsForBreadcrumbTrail(),e=t.length,i,r=[];t.forEach(function(t,o){if(!t.isA("sap.m.Link")){return}i=new p({text:b._getResourceBundleText("BREADCRUMB_ITEM_POS",[o+1,e])}).toStatic();if(t.getAriaLabelledBy().indexOf(t.getId())===-1){t.addAriaLabelledBy(t.getId())}t.addAriaLabelledBy(i.getId());r.push({controlId:t.getId(),invisibleText:i})});return r};b.prototype._getControlDistribution=function(t){t=t||this._iContainerSize;this._iContainerSize=t;this._oDistributedControls=this._determineControlDistribution(t);return this._oDistributedControls};b.prototype._getSelectWidth=function(){return this._getSelect().getVisible()&&this._iSelectWidth||0};b.prototype._determineControlDistribution=function(t){var e,i,r=this._getControlsInfo().aControlInfo,o=this._getSelectWidth(),n=[],s=[],a=o;for(e=r.length-1;e>=0;e--){i=r[e];a+=i.width;if(r.length-1===e){s.push(i.control);continue}if(e===0){a-=o}if(a>t&&i.bCanOverflow){n.unshift(i.control)}else{s.unshift(i.control)}}return{aControlsForBreadcrumbTrail:s,aControlsForSelect:n}};b.prototype._getControlsInfo=function(){if(!this._bControlsInfoCached){this._iSelectWidth=C(this._getSelect().$().parent())||0;this._aControlInfo=this._getControlsForBreadcrumbTrail().map(this._getControlInfo);this._iContainerSize=Math.ceil(C(this.$()));this._bControlsInfoCached=true}return{aControlInfo:this._aControlInfo,iSelectWidth:this._iSelectWidth,iContentSize:this._iContainerSize}};b.prototype._handleScreenResize=function(t){var e,i,r;if(t.size.width===t.oldSize.width||t.size.width===0){return this}e=this._oDistributedControls.aControlsForBreadcrumbTrail.length;i=this._getControlDistribution(Math.ceil(C(this.$())));r=i.aControlsForBreadcrumbTrail.length;if(e!==r){this._updateSelect(true)}return this};b.prototype._getItemsToNavigate=function(){var t=this._getControlsForBreadcrumbTrail().slice(),e=this._getSelect();if(e.getVisible()){t.unshift(e)}return t};b.prototype._getItemNavigation=b.prototype._destroyItemNavigation=function(){if(this._itemNavigation){this.removeEventDelegate(this._itemNavigation);this._itemNavigation.destroy();this._itemNavigation=null}};b.prototype._configureKeyboardHandling=function(){var t=this._getItemNavigation(),e=-1,i=this._getItemsToNavigate(),r=[];if(i.length===0){return}i.forEach(function(t,e){if(e===0){t.$().attr("tabindex","0")}t.$().attr("tabindex","-1");r.push(t.getFocusDomRef())});this.addDelegate(t);t.setDisabledModifiers({sapnext:["alt","meta"],sapprevious:["alt","meta"],saphome:["alt"],sapend:["alt"]});t.setCycling(false);t.setPageSize(b.PAGEUP_AND_PAGEDOWN_JUMP_SIZE);t.setRootDomRef(this.getDomRef());t.setItemDomRefs(r);t.setSelectedIndex(e);return this};b.prototype._registerControlListener=function(t){if(t){t.attachEvent("_change",this._resetControl,this)}};b.prototype._deregisterControlListener=function(t){if(t){t.detachEvent("_change",this._resetControl,this)}};b.prototype.setCurrentLocationText=function(t){var e=this._getCurrentLocation(),i=this.setProperty("currentLocationText",t,true);if(e.getText()!==t){e.setText(t);this._resetControl()}return i};b.prototype.setSeparatorStyle=function(t){this.setProperty("separatorStyle",t);var e=b.STYLE_MAPPER[this.getSeparatorStyle()];if(e){this._sSeparatorSymbol=e}return this};b.prototype._resetControl=function(){this._aControlInfo=null;this._iContainerSize=null;this._bControlsInfoCached=null;this._bControlDistributionCached=null;this._oDistributedControls=null;if(this._sResizeListenerId){a.deregister(this._sResizeListenerId);this._sResizeListenerId=null}this.removeDelegate(this._getItemNavigation());this.invalidate(this);return this};b.prototype.getOverflowToolbarConfig=function(){var t={canOverflow:true,getCustomImportance:function(){return"Medium"}};return t};b.prototype._getToolbarInteractive=function(){return true};function C(t){var e;if(t.length){e=t.outerWidth(true)-t.outerWidth();return t.get(0).getBoundingClientRect().width+e}}return b});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/BusyDialog",["./library","sap/ui/core/Control","sap/m/Dialog","sap/m/BusyIndicator","sap/m/Label","sap/m/Button","sap/base/Log","sap/ui/core/Core","sap/ui/core/InvisibleText"],function(t,e,o,i,s,n,a,l,r){"use strict";var u=t.TitleAlignment;var c=e.extend("sap.m.BusyDialog",{metadata:{library:"sap.m",properties:{text:{type:"string",group:"Appearance",defaultValue:""},title:{type:"string",group:"Appearance",defaultValue:""},customIcon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:""},customIconRotationSpeed:{type:"int",group:"Appearance",defaultValue:1e3},customIconDensityAware:{type:"boolean",defaultValue:true},customIconWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"44px"},customIconHeight:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"44px"},cancelButtonText:{type:"string",group:"Misc",defaultValue:""},showCancelButton:{type:"boolean",group:"Appearance",defaultValue:false},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:u.Auto}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{close:{parameters:{cancelPressed:{type:"boolean"}}}},designtime:"sap/m/designtime/BusyDialog.designtime"},renderer:{apiVersion:2,render:});c.prototype.init=function(){this._busyIndicator=new i(this.getId()+"-busyInd",{visible:true});this._oDialog=new o(this.getId()+"-Dialog",{content:this._busyIndicator,titleAlignment:this.getTitleAlignment(),showHeader:false,afterClose:this._fnCloseHandler.bind(this),initialFocus:this._busyIndicator.getId()+"-busyIndicator"}).addStyleClass("sapMBusyDialog");this._oDialog.close=function(){};this._oDialog.addEventDelegate({onBeforeRendering:function(){var t=this.getText(),e=this.getTitle(),o=this.getShowCancelButton()||this.getCancelButtonText();if(!t&&!e&&!o){this._oDialog.addStyleClass("sapMBusyDialog-Light")}else{this._oDialog.removeStyleClass("sapMBusyDialog-Light")}}},this);this._oDialog.oPopup.onsapescape=bind(this)};c.prototype.exit=function(){if(this._iOpenTimer){clearTimeout(this._iOpenTimer);this._iOpenTimer=null}this._busyIndicator.destroy();this._busyIndicator=null;if(this._cancelButton){this._cancelButton.destroy();this._cancelButton=null}if(this._oLabel){this._oLabel.destroy();this._oLabel=null}if(this._oDialog){this._oDialog.destroy();this._oDialog=null}};c.prototype.open=function(){var t=this.getAriaLabelledBy();a.debug("sap.m.BusyDialog.open called at "+Date.now());if(t&&t.length){if(!this._oDialog._$dialog){var e=this;t.forEach(}}else if(!this._oDialog.getShowHeader()){this._oDialog.addAriaLabelledBy(r.getStaticId("sap.m","BUSYDIALOG_TITLE"))}else{this._oDialog.removeAriaLabelledBy(r.getStaticId("sap.m","BUSYDIALOG_TITLE"))}if(!document.body||!l.isInitialized()){this._iOpenTimer=setTimeout(function(){this.open()}.bind(this),50)}else{this._oDialog.open()}return this};c.prototype.close=function(t){this._isClosedFromUserInteraction=t;if(this._iOpenTimer){clearTimeout(this._iOpenTimer);this._iOpenTimer=null}o.prototype.close.call(this._oDialog);return this};c.prototype._fnCloseHandler=function(){this.fireClose({cancelPressed:this._isClosedFromUserInteraction||false})};c.prototype.setTitle=function(t){this.setProperty("title",t,true);this._oDialog.setTitle(t).setShowHeader(!!t);return this};c.prototype.setTitleAlignment=function(t){this.setProperty("titleAlignment",t,true);if(this._oDialog){this._oDialog.setTitleAlignment(t)}return this};c.prototype.setTooltip=c.prototype.getTooltip=function(){return this._oDialog.getTooltip()};c.prototype.setText=function(t){this.setProperty("text",t,true);if(!this._oLabel){if(t){this._oLabel=new s(this.getId()+"-TextLabel",{text:t}).addStyleClass("sapMBusyDialogLabel");this._oDialog.insertAggregation("content",this._oLabel,0);if(this._oDialog.getShowHeader()){this._oDialog.addAriaLabelledBy(this._oLabel.getId())}}}else{if(t){this._oLabel.setText(t).setVisible(true)}else{this._oLabel.setVisible(false)}}return this};c.prototype.setCustomIcon=function(t){this.setProperty("customIcon",t,true);this._busyIndicator.setCustomIcon(t);return this};c.prototype.setCustomIconRotationSpeed=function(t){this.setProperty("customIconRotationSpeed",t,true);this._busyIndicator.setCustomIconRotationSpeed(t);return this};c.prototype.setCustomIconDensityAware=function(t){this.setProperty("customIconDensityAware",t,true);this._busyIndicator.setCustomIconDensityAware(t);return this};c.prototype.setCustomIconWidth=function(t){this.setProperty("customIconWidth",t,true);this._busyIndicator.setCustomIconWidth(t);return this};c.prototype.setCustomIconHeight=function(t){this.setProperty("customIconHeight",t,true);this._busyIndicator.setCustomIconHeight(t);return this};c.prototype.setShowCancelButton=function(t){this.setProperty("showCancelButton",t,false);if(t){this._oDialog.setEndButton(this._getCancelButton())}else{this._destroyTheCancelButton()}return this};c.prototype.setCancelButtonText=function(t){this.setProperty("cancelButtonText",t,false);if(t){this._getCancelButton().setText(t);this._oDialog.setEndButton(this._getCancelButton())}else{this._destroyTheCancelButton()}return this};c.prototype.getDomRef=["addStyleClass","removeStyleClass","toggleStyleClass","hasStyleClass"].forEach(function(t){c.prototype[t]=function(){if(this._oDialog&&this._oDialog[t]){this._oDialog[t].apply(this._oDialog,arguments);return this}}});c.prototype._destroyTheCancelButton=c.prototype._getCancelButton=function(){var t=this.getCancelButtonText();t=t?t:l.getLibraryResourceBundle("sap.m").getText("BUSYDIALOG_CANCELBUTTON_TEXT");return this._cancelButton?this._cancelButton:this._cancelButton=new n(this.getId()+"busyCancelBtn",{text:t,press:bind(this)})};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Dialog",["./Bar","./InstanceManager","./AssociativeOverflowToolbar","./ToolbarSpacer","./Title","./library","sap/m/Image","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/IconPool","sap/ui/core/Popup","sap/ui/core/delegate/ScrollEnablement","sap/ui/core/RenderManager","sap/ui/core/InvisibleText","sap/ui/core/ResizeHandler","sap/ui/core/theming/Parameters","sap/ui/core/util/ResponsivePaddingsEnablement","sap/ui/Device","sap/ui/core/library","sap/ui/events/KeyCodes","./TitlePropagationSupport","./DialogRenderer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ui/core/Configuration","sap/ui/dom/units/Rem","sap/ui/dom/jquery/Focusable"],function(t,e,i,o,s,n,a,r,l,h,u,p,g,c,d,f,_,y,b,m,S,v,T,R,D,A,I){"use strict";var C=b.OpenState;var B=n.ButtonType;var M=n.DialogType;var P=n.DialogRoleType;var H=b.ValueState;var w=b.TitleLevel;var O=n.TitleAlignment;var x=D.getConfiguration().getAnimationMode();var z=x!==A.AnimationMode.none&&x!==A.AnimationMode.minimal;var E=z?300:10;var L=17;var F=I.toPx(1);var V=5;var W=3;var $=r.extend("sap.m.Dialog",{metadata:{interfaces:["sap.ui.core.PopupInterface"],library:"sap.m",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},title:{type:"string",group:"Appearance",defaultValue:null},showHeader:{type:"boolean",group:"Appearance",defaultValue:true},type:{type:"sap.m.DialogType",group:"Appearance",defaultValue:M.Standard},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:H.None},stretchOnPhone:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},stretch:{type:"boolean",group:"Appearance",defaultValue:false},contentWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},contentHeight:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},horizontalScrolling:{type:"boolean",group:"Behavior",defaultValue:true},verticalScrolling:{type:"boolean",group:"Behavior",defaultValue:true},resizable:{type:"boolean",group:"Behavior",defaultValue:false},draggable:{type:"boolean",group:"Behavior",defaultValue:false},escapeHandler:{type:"function",group:"Behavior",defaultValue:null},role:{type:"sap.m.DialogRoleType",group:"Data",defaultValue:P.Dialog,visibility:"hidden"},closeOnNavigation:{type:"boolean",group:"Behavior",defaultValue:true},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:O.Auto}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},subHeader:{type:"sap.m.IBar",multiple:false},customHeader:{type:"sap.m.IBar",multiple:false},beginButton:{type:"sap.m.Button",multiple:false},endButton:{type:"sap.m.Button",multiple:false},buttons:{type:"sap.m.Button",multiple:true,singularName:"button"},footer:{type:"sap.m.Toolbar",multiple:false},_header:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_icon:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_toolbar:{type:"sap.m.OverflowToolbar",multiple:false,visibility:"hidden"},_valueState:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}},associations:{leftButton:{type:"sap.m.Button",multiple:false,deprecated:true},rightButton:{type:"sap.m.Button",multiple:false,deprecated:true},initialFocus:{type:"sap.ui.core.Control",multiple:false},ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{beforeOpen:{},afterOpen:{},beforeClose:{parameters:{origin:{type:"sap.m.Button"}}},afterClose:{parameters:{origin:{type:"sap.m.Button"}}}},designtime:"sap/m/designtime/Dialog.designtime"},renderer:v});_.call($.prototype,{header:{suffix:"header"},subHeader:{selector:".sapMDialogSubHeader .sapMIBar"},content:{selector:".sapMDialogScrollCont"},footer:{selector:".sapMDialogFooter .sapMIBar"}});S.call($.prototype,"content",;$._bPaddingByDefault=D.getConfiguration().getCompatibilityVersion("sapMDialogWithPadding").compareTo("1.16")<0;$._initIcons=function(){if($._mIcons){return}$._mIcons={};$._mIcons[H.Success]=h.getIconURI("sys-enter-2");$._mIcons[H.Warning]=h.getIconURI("alert");$._mIcons[H.Error]=h.getIconURI("error");$._mIcons[H.Information]=h.getIconURI("information")};$._getHeaderToolbarAriaLabelledByText=function(){if(!$._oHeaderToolbarInvisibleText){$._oHeaderToolbarInvisibleText=new c("__headerActionsToolbar-invisibleText",{text:D.getLibraryResourceBundle("sap.m").getText("ARIA_LABEL_TOOLBAR_HEADER_ACTIONS")}).toStatic()}return $._oHeaderToolbarInvisibleText};$._getFooterToolbarAriaLabelledByText=function(){if(!$._oFooterToolbarInvisibleText){$._oFooterToolbarInvisibleText=new c("__footerActionsToolbar-invisibleText",{text:D.getLibraryResourceBundle("sap.m").getText("ARIA_LABEL_TOOLBAR_FOOTER_ACTIONS")}).toStatic()}return $._oFooterToolbarInvisibleText};$.prototype.init=function(){var t=this;this._oManuallySetSize=null;this._oManuallySetPosition=null;this._bRTL=D.getConfiguration().getRTL();this._scrollContentList=["sap.m.NavContainer","sap.m.Page","sap.m.ScrollContainer","sap.m.SplitContainer","sap.m.MultiInput","sap.m.SimpleFixFlex"];this.oPopup=new u;this.oPopup.setShadow(true);this.oPopup.setNavigationMode("SCOPE");this.oPopup.setModal(true);this.oPopup.setAnimations(R.proxy(this._openAnimation,this),R.proxy(this._closeAnimation,this));this.oPopup._applyPosition=function(e,i){t._setDimensions();t._adjustScrollingPane();if(t._oManuallySetPosition){e.at={left:t._oManuallySetPosition.x,top:t._oManuallySetPosition.y}}else{e.at=t._calcPosition()}t._deregisterContentResizeHandler();u.prototype._applyPosition.call(this,e);t._registerContentResizeHandler()};if($._bPaddingByDefault){this.addStyleClass("sapUiPopupWithPadding")}this._initTitlePropagationSupport();this._initResponsivePaddingsEnablement();this._oAriaDescribedbyText=new c({id:this.getId()+"-ariaDescribedbyText"})};$.prototype.onBeforeRendering=function(){this._loadVerticalMargin();var t=this._getAnyHeader();if(!$._bPaddingByDefault&&this.hasStyleClass("sapUiPopupWithPadding")){T.warning("Usage of CSS class 'sapUiPopupWithPadding' is deprecated. Use 'sapUiContentPadding' instead",null,"sap.m.Dialog")}if(this._hasSingleScrollableContent()){this.setVerticalScrolling(false);this.setHorizontalScrolling(false);T.info("VerticalScrolling and horizontalScrolling in sap.m.Dialog with ID "+this.getId()+" has been disabled because there's scrollable content inside")}else if(!this._oScroller){this._oScroller=new p(this,this.getId()+"-scroll",{horizontal:this.getHorizontalScrolling(),vertical:this.getVerticalScrolling()})}if(this._oScroller){this._oScroller.setVertical(this.getVerticalScrolling());this._oScroller.setHorizontal(this.getHorizontalScrolling())}this._createToolbarButtons();if(D.getConfiguration().getAccessibility()&&this.getState()!=H.None){if(!this._oValueState){this._oValueState=new c;this.setAggregation("_valueState",this._oValueState);this.addAriaLabelledBy(this._oValueState.getId())}this._oValueState.setText(this.getValueStateString(this.getState()))}if(t&&t.setTitleAlignment){t.setTitleAlignment(this.getTitleAlignment())}if(t&&this._getTitles(t).length===0){t._setRootAccessibilityRole("heading");t._setRootAriaLevel("2")}this._oAriaDescribedbyText.setText(this._getAriaDescribedByText())};$.prototype.onAfterRendering=function(){this._$scrollPane=this.$("scroll");this._$content=this.$("cont");this._$dialog=this.$();if(this.isOpen()){this._setInitialFocus()}};$.prototype.exit=function(){e.removeDialogInstance(this);this._deregisterContentResizeHandler();this._deregisterResizeHandler();if(this.oPopup){this.oPopup.detachOpened(this._handleOpened,this);this.oPopup.detachClosed(this._handleClosed,this);this.oPopup.destroy();this.oPopup=null}if(this._oScroller){this._oScroller.destroy();this._oScroller=null}if(this._header){this._header.destroy();this._header=null}if(this._headerTitle){this._headerTitle.destroy();this._headerTitle=null}if(this._iconImage){this._iconImage.destroy();this._iconImage=null}if(this._toolbarSpacer){this._toolbarSpacer.destroy();this._toolbarSpacer=null}if(this._oAriaDescribedbyText){this._oAriaDescribedbyText.destroy();this._oAriaDescribedbyText=null}};$.prototype.open=function(){var t=this.oPopup;t.setInitialFocusId(this.getId());var i=t.getOpenState();switch(i){case C.OPEN:case C.OPENING:return this;case C.CLOSING:this._bOpenAfterClose=true;break;default:}this._oCloseTrigger=null;this.fireBeforeOpen();t.attachOpened(this._handleOpened,this);this._iLastWidthAndHeightWithScroll=null;t.setContent(this);t.open();this._registerResizeHandler();e.addDialogInstance(this);return this};$.prototype.close=function(){this._bOpenAfterClose=false;this.$().removeClass("sapDialogDisableTransition");this._deregisterResizeHandler();var t=this.oPopup;var e=this.oPopup.getOpenState();if(!(e===C.CLOSED||e===C.CLOSING)){n.closeKeyboard();this.fireBeforeClose({origin:this._oCloseTrigger});t.attachClosed(this._handleClosed,this);this._bDisableRepositioning=false;this._oManuallySetPosition=null;this._oManuallySetSize=null;t.close();this._deregisterContentResizeHandler()}return this};$.prototype.isOpen=$.prototype.setIcon=function(t){this._bHasCustomIcon=true;return this.setProperty("icon",t)};$.prototype.setState=function(t){var e;this.setProperty("state",t);if(this._bHasCustomIcon){return this}if(t===H.None){e=""}else{$._initIcons();e=$._mIcons[t]}this.setProperty("icon",e);return this};$.prototype._handleOpened=function(){this.oPopup.detachOpened(this._handleOpened,this);this._setInitialFocus();this.fireAfterOpen()};$.prototype._handleClosed=function(){if(!this.oPopup){return}this.oPopup.detachClosed(this._handleClosed,this);if(this.getDomRef()){g.preserveContent(this.getDomRef());this.$().remove()}e.removeDialogInstance(this);this.fireAfterClose({origin:this._oCloseTrigger});if(this._bOpenAfterClose){this._bOpenAfterClose=false;this.open()}};$.prototype.onfocusin=function(t){var e=t.target;if(e.id===this.getId()+"-firstfe"){var i=this.$("footer").lastFocusableDomRef()||this.$("cont").lastFocusableDomRef()||this.getSubHeader()&&this.getSubHeader().$().firstFocusableDomRef()||this._getAnyHeader()&&this._getAnyHeader().$().lastFocusableDomRef();if(i){i.focus()}}else if(e.id===this.getId()+"-lastfe"){var o=this._getFocusableHeader()||this._getAnyHeader()&&this._getAnyHeader().$().firstFocusableDomRef()||this.getSubHeader()&&this.getSubHeader().$().firstFocusableDomRef()||this.$("cont").firstFocusableDomRef()||this.$("footer").firstFocusableDomRef();if(o){o.focus()}}};$.prototype._getPromiseWrapper=function(){var t=this;return{reject:function(){t.currentPromise.reject()},resolve:};$.prototype.onsapescape=function(t){var e=this.getEscapeHandler(),i={},o=this;if(this._isSpaceOrEnterPressed){return}if(t.originalEvent&&t.originalEvent._sapui_handledByControl){return}this._oCloseTrigger=null;if(typeof e==="function"){new Promise(function(t,s){i.resolve=t;i.reject=s;o.currentPromise=i;e(o._getPromiseWrapper())}).then(function(t){o.close()}).catch(}else{this.close()}t.stopPropagation()};$.prototype.onkeyup=function(t){if(this._isSpaceOrEnter(t)){this._isSpaceOrEnterPressed=false}};$.prototype.onkeydown=function(t){if(this._isSpaceOrEnter(t)){this._isSpaceOrEnterPressed=true}var e=t.which||t.keyCode;if((t.ctrlKey||t.metaKey)&&e===m.ENTER){var i=this._findFirstPositiveButton();if(i){i.firePress();t.stopPropagation();t.preventDefault();return}}this._handleKeyboardDragResize(t)};$.prototype._findFirstPositiveButton=function(){var t;if(this.getFooter()){t=this.getFooter().getContent().filter(function(t){return t.isA("sap.m.Button")})}else{t=this.getButtons()}for(var e=0;e<t.length;e++){var i=t[e];if(i.getType()===B.Accept||i.getType()===B.Emphasized){return i}}};$.prototype._handleKeyboardDragResize=function(t){if(t.target!==this._getFocusableHeader()||[m.ARROW_LEFT,m.ARROW_RIGHT,m.ARROW_UP,m.ARROW_DOWN].indexOf(t.keyCode)===-1){return}if(!this.getResizable()&&t.shiftKey||!this.getDraggable()&&!t.shiftKey){return}var e=this._$dialog,i=this.getDomRef().getBoundingClientRect(),o={left:i.x,top:i.y},s=this._getAreaDimensions(),n=e.width(),a=e.height(),r=e.outerHeight(true),l=t.shiftKey,h,u;this._bDisableRepositioning=true;e.addClass("sapDialogDisableTransition");if(l){this._oManuallySetSize=true;this.$("cont").height("").width("")}switch(t.keyCode){case m.ARROW_LEFT:if(l){n-=F}else{o.left-=F}break;case m.ARROW_RIGHT:if(l){n+=F}else{o.left+=F}break;case m.ARROW_UP:if(l){a-=F}else{o.top-=F}break;case m.ARROW_DOWN:if(l){a+=F}else{o.top+=F}break}if(l){u=s.bottom-o.top-r+a;if(t.keyCode===m.ARROW_DOWN){u-=F}h={width:Math.min(n,s.right-o.left),height:Math.min(a,u)}}else{h={left:Math.min(Math.max(s.left,o.left),s.right-n),top:Math.min(Math.max(s.top,o.top),s.bottom-r)}}e.css(h)};$.prototype._isSpaceOrEnter=function(t){var e=t.which||t.keyCode;return e==m.SPACE||e==m.ENTER};$.prototype._openAnimation=function(t,e,i){t.addClass("sapMDialogOpen");setTimeout(i,E)};$.prototype._closeAnimation=function(t,e,i){t.removeClass("sapMDialogOpen");setTimeout(i,E)};$.prototype._setDimensions=function(){var t=this.$(),e=this.getStretch(),i=this.getStretchOnPhone()&&y.system.phone,o=this.getType()===M.Message,s={};if(!e){if(!this._oManuallySetSize){s.width=this.getContentWidth()||undefined;s.height=this.getContentHeight()||undefined}else{s.width=this._oManuallySetSize.width;s.height=this._oManuallySetSize.height}}if(s.width=="auto"){s.width=undefined}if(s.height=="auto"){s.height=undefined}if(e&&!o||i){this.$().addClass("sapMDialogStretched")}t.css(s);t.css(this._calcMaxSizes());if(!this._oManuallySetSize&&!this._bDisableRepositioning){t.css(this._calcPosition())}if(window.navigator.userAgent.toLowerCase().indexOf("chrome")!==-1&&this.getStretch()){t.find("> footer").css({bottom:"0.001px"})}};$.prototype._adjustScrollingPane=$.prototype._onResize=function(){var t=this.$(),e=this.$("cont"),i=this.getContentWidth(),o=this._calcMaxSizes().maxWidth;if(this._oManuallySetSize){e.css({width:"auto"});return}if(y.system.desktop&&!y.browser.chrome){var s=e.width()+"x"+e.height(),n=t.css("min-width")!==t.css("width");if(s!==this._iLastWidthAndHeightWithScroll&&n){if(this._hasVerticalScrollbar()&&(!i||i=="auto")&&!this.getStretch()&&e.width()<o){t.addClass("sapMDialogVerticalScrollIncluded");e.css({"padding-right":L});this._iLastWidthAndHeightWithScroll=s}else{t.removeClass("sapMDialogVerticalScrollIncluded");e.css({"padding-right":""});this._iLastWidthAndHeightWithScroll=null}}else if(!this._hasVerticalScrollbar()||!n){t.removeClass("sapMDialogVerticalScrollIncluded");e.css({"padding-right":""});this._iLastWidthAndHeightWithScroll=null}}if(!this._oManuallySetSize&&!this._bDisableRepositioning){this._positionDialog()}};$.prototype._hasVerticalScrollbar=function(){var t=this.$("cont");return t[0].clientHeight<t[0].scrollHeight};$.prototype._positionDialog=function(){var t=this.$();t.css(this._calcMaxSizes());t.css(this._calcPosition())};$.prototype._calcPosition=function(){var t=this._getAreaDimensions(),e=this.$(),i,o,s;if(y.system.phone&&this.getStretch()){i=0;o=0}else if(this.getStretch()){i=this._percentOfSize(t.width,V);o=this._percentOfSize(t.height,W)}else{i=(t.width-e.outerWidth())/2;o=(t.height-e.outerHeight())/2}s={top:Math.round(t.top+o)};if(this._bRTL){s.right=Math.round(window.innerWidth-t.right+i)}else{s.left=Math.round(t.left+i)}return s};$.prototype._calcMaxSizes=function(){var t=this._getAreaDimensions(),e=this.$(),i=e.find(".sapMDialogTitleGroup").height()||0,o=e.find(".sapMDialogSubHeader").height()||0,s=e.find("> footer").height()||0,n=i+o+s,a,r;if(y.system.phone&&this.getStretch()){r=t.width;a=t.height-n}else{r=this._percentOfSize(t.width,100-2*V);a=this._percentOfSize(t.height,100-2*W)-n}return{maxWidth:Math.floor(r),maxHeight:Math.floor(a)}};$.prototype._getAreaDimensions=function(){var t=u.getWithinAreaDomRef(),e;if(t===window){e={left:0,top:0,width:t.innerWidth,height:t.innerHeight}}else{var i=t.getBoundingClientRect(),o=R(t);e={left:i.left+parseFloat(o.css("border-left-width")),top:i.top+parseFloat(o.css("border-top-width")),width:t.clientWidth,height:t.clientHeight}}e.right=e.left+e.width;e.bottom=e.top+e.height;return e};$.prototype._percentOfSize=$.prototype._createHeader=function(){if(!this._header){this._header=new t(this.getId()+"-header",{titleAlignment:this.getTitleAlignment(),ariaLabelledBy:$._getHeaderToolbarAriaLabelledByText()});this.setAggregation("_header",this._header)}};$.prototype._applyTitleToHeader=function(){var t=this.getProperty("title");if(this._headerTitle){this._headerTitle.setText(t)}else{this._headerTitle=new s(this.getId()+"-title",{text:t,level:w.H1}).addStyleClass("sapMDialogTitle");this._header.addContentMiddle(this._headerTitle)}};$.prototype._hasSingleScrollableContent=function(){var t=this.getContent();while(t.length===1&&t[0]instanceof r&&t[0].isA("sap.ui.core.mvc.View")){t=t[0].getContent()}if(t.length===1&&t[0]instanceof r&&t[0].isA(this._scrollContentList)){return true}return false};$.prototype._getFocusDomRef=function(){var t=this.getInitialFocus();if(t){return document.getElementById(t)}return this._getFocusableHeader()||this._getFirstFocusableContentSubHeader()||this._getFirstFocusableContentElement()||this._getFirstVisibleButtonDomRef()||this.getDomRef()};$.prototype._getFirstVisibleButtonDomRef=function(){var t=this.getBeginButton(),e=this.getEndButton(),i=this.getButtons(),o;if(t&&t.getVisible()){o=t.getDomRef()}else if(e&&e.getVisible()){o=e.getDomRef()}else if(i&&i.length>0){for(var s=0;s<i.length;s++){if(i[s].getVisible()){o=i[s].getDomRef();break}}}return o};$.prototype._getFocusableHeader=function(){if(!this._isDraggableOrResizable()){return null}return this.$().find("header .sapMDialogTitleGroup")[0]};$.prototype._getFirstFocusableContentSubHeader=function(){var t=this.$().find(".sapMDialogSubHeader");return t.firstFocusableDomRef()};$.prototype._getFirstFocusableContentElement=function(){var t=this.$("cont");return t.firstFocusableDomRef()};$.prototype._setInitialFocus=function(){var t=this._getFocusDomRef(),e;if(t&&t.id){e=D.byId(t.id)}if(e){if(e.getVisible&&!e.getVisible()){this.focus();return}t=e.getFocusDomRef()}if(!t){this.setInitialFocus("");t=this._getFocusDomRef()}if(!this.getInitialFocus()){this.setAssociation("initialFocus",t?t.id:this.getId(),true)}if(y.system.desktop||t&&!/input|textarea|select/i.test(t.tagName)){if(t){t.focus()}}else{this.focus()}};$.prototype.getScrollDelegate=function(){return this._oScroller};$.prototype._isToolbarEmpty=function(){var t=this._oToolbar.getContent().filter(function(t){return t.getMetadata().getName()!=="sap.m.ToolbarSpacer"});return t.length===0};$.prototype._getAnyHeader=function(){var t=this.getCustomHeader();if(t){return t}else{var e=this.getShowHeader();if(!e){return null}this._createHeader();this._applyTitleToHeader();this._applyIconToHeader();return this._header}};$.prototype._deregisterResizeHandler=function(){var t=u.getWithinAreaDomRef();if(t===window){y.resize.detachHandler(this._onResize,this)}else{d.deregister(this._withinResizeListenerId);this._withinResizeListenerId=null}};$.prototype._registerResizeHandler=function(){var t=u.getWithinAreaDomRef();if(t===window){y.resize.attachHandler(this._onResize,this)}else{this._withinResizeListenerId=d.register(t,this._onResize.bind(this))}this._onResize()};$.prototype._deregisterContentResizeHandler=$.prototype._registerContentResizeHandler=function(){if(!this._sContentResizeListenerId){this._sContentResizeListenerId=d.register(this.getDomRef("scrollCont"),R.proxy(this._onResize,this))}this._onResize()};$.prototype._attachHandler=function(t){var e=this;if(!this._oButtonDelegate){this._oButtonDelegate={ontap:function(){e._oCloseTrigger=this},onkeyup:function(){e._oCloseTrigger=this},onkeydown:}if(t){t.addDelegate(this._oButtonDelegate,true,t)}};$.prototype._createToolbarButtons=function(){if(this.getFooter()){return}var t=this._getToolbar();var e=this.getButtons();var i=this.getBeginButton();var s=this.getEndButton(),n=this,a=[i,s];a.forEach(;t.removeAllContent();if(!("_toolbarSpacer"in this)){this._toolbarSpacer=new o}t.addContent(this._toolbarSpacer);a.forEach(function(t){n._attachHandler(t)});if(e&&e.length){e.forEach(function(e){t.addContent(e)})}else{if(i){t.addContent(i)}if(s){t.addContent(s)}}};$.prototype._getToolbar=function(){if(!this._oToolbar){this._oToolbar=new i(this.getId()+"-footer",{ariaLabelledBy:$._getFooterToolbarAriaLabelledByText()}).addStyleClass("sapMTBNoBorders");this._oToolbar.addDelegate({onAfterRendering:function(){if(this.getType()===M.Message){this.$("footer").removeClass("sapContrast sapContrastPlus")}}},false,this);this.setAggregation("_toolbar",this._oToolbar)}return this._oToolbar};$.prototype.getValueStateString=function(t){var e=D.getLibraryResourceBundle("sap.m");switch(t){case H.Success:return e.getText("LIST_ITEM_STATE_SUCCESS");case H.Warning:return e.getText("LIST_ITEM_STATE_WARNING");case H.Error:return e.getText("LIST_ITEM_STATE_ERROR");case H.Information:return e.getText("LIST_ITEM_STATE_INFORMATION");default:return""}};$.prototype._isDraggableOrResizable=$.prototype._getAriaDescribedByText=function(){var t=D.getLibraryResourceBundle("sap.m");if(this.getResizable()&&this.getDraggable()){return t.getText("DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE_RESIZABLE")}if(this.getDraggable()){return t.getText("DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE")}if(this.getResizable()){return t.getText("DIALOG_HEADER_ARIA_DESCRIBEDBY_RESIZABLE")}return""};$.prototype._loadVerticalMargin=function(){W=f.get({name:"_sap_m_Dialog_VerticalMargin",callback:);if(W){W=parseFloat(W)}else{W=3}};$.prototype.setSubHeader=function(t){this.setAggregation("subHeader",t);if(t){t.setVisible=function(e){t.setProperty("visible",e);this.invalidate()}.bind(this)}return this};$.prototype.setLeftButton=function(t){if(typeof t==="string"){t=D.byId(t)}this.setBeginButton(t);return this.setAssociation("leftButton",t)};$.prototype.setRightButton=function(t){if(typeof t==="string"){t=D.byId(t)}this.setEndButton(t);return this.setAssociation("rightButton",t)};$.prototype.getLeftButton=function(){var t=this.getBeginButton();return t?t.getId():null};$.prototype.getRightButton=$.prototype.setBeginButton=function(t){if(t&&t.isA("sap.m.Button")){t.addStyleClass("sapMDialogBeginButton")}return this.setAggregation("beginButton",t)};$.prototype.setEndButton=function(t){if(t&&t.isA("sap.m.Button")){t.addStyleClass("sapMDialogEndButton")}return this.setAggregation("endButton",t)};$.prototype.getAggregation=function(t,e,i){var o=r.prototype.getAggregation.apply(this,Array.prototype.slice.call(arguments,0,2));if(t==="buttons"&&o&&o.length===0){this.getBeginButton()&&o.push(this.getBeginButton());this.getEndButton()&&o.push(this.getEndButton())}return o};$.prototype.getAriaLabelledBy=function(){var t=this._getAnyHeader(),e=this.getAssociation("ariaLabelledBy",[]).slice();var i=this.getSubHeader();if(i){var o=this._getTitles(i);if(o.length){e=o.map(function(t){return t.getId()}).concat(e)}}if(t){var s=this._getTitles(t);if(s.length){e=s.map(function(t){return t.getId()}).concat(e)}else{e.unshift(t.getId())}}return e};$.prototype._applyIconToHeader=function(){var t=this.getIcon();if(!t){if(this._iconImage){this._iconImage.destroy();this._iconImage=null}return}if(!this._iconImage){this._iconImage=h.createControlByURI({id:this.getId()+"-icon",src:t,useIconTooltip:false},a).addStyleClass("sapMDialogIcon");this._header.insertAggregation("contentMiddle",this._iconImage,0)}this._iconImage.setSrc(t)};$.prototype.setInitialFocus=$.prototype.invalidate=function(t){if(this.isOpen()){r.prototype.invalidate.call(this,t)}};function N(t){var e=R(t);var i=l.closestTo(t);if(e.parents(".sapMDialogSection").length){return false}if(!i||i.isA("sap.m.IBar")){return true}return e.hasClass("sapMDialogTitleGroup")}if(y.system.desktop){$.prototype.ondblclick=function(t){if(N(t.target)){var e=this.$("cont");this._bDisableRepositioning=false;this._oManuallySetPosition=null;this._oManuallySetSize=null;this.oPopup&&this.oPopup._applyPosition(this.oPopup._oLastPosition,true);e.css({height:"100%"})}};$.prototype.onmousedown=function(t){if(t.which===3){return}if(!this._isDraggableOrResizable()){return}var e;var i=this;var o=R(document);var s=R(t.target);var n=s.hasClass("sapMDialogResizeHandler")&&this.getResizable();var a=function(t){e=e?clearTimeout(e):setTimeout(0)};var r=this._getAreaDimensions();var l=this.getDomRef().getBoundingClientRect();var h={x:t.clientX,y:t.clientY,width:i._$dialog.width(),height:i._$dialog.height(),outerHeight:i._$dialog.outerHeight(),position:{x:l.x,y:l.y}};var u;function p(){var t=i.$(),e=i.$("cont"),s,a;o.off("mouseup",p);o.off("mousemove",u);if(n){i._$dialog.removeClass("sapMDialogResizing");s=parseInt(t.height());a=parseInt(t.css("border-top-width"))+parseInt(t.css("border-bottom-width"));e.height(s+a)}}if(N(t.target)&&this.getDraggable()||n){i._bDisableRepositioning=true;i._$dialog.addClass("sapDialogDisableTransition")}if(N(t.target)&&this.getDraggable()){u=function(e){e.preventDefault();if(e.buttons===0){p();return}a(function(){i._bDisableRepositioning=true;i._oManuallySetPosition={x:Math.max(r.left,Math.min(e.clientX-t.clientX+h.position.x,r.right-h.width)),y:Math.max(r.top,Math.min(e.clientY-t.clientY+h.position.y,r.bottom-h.outerHeight))};i._$dialog.css({top:i._oManuallySetPosition.y,left:i._oManuallySetPosition.x,right:i._bRTL?"":undefined})})}}else if(n){i._$dialog.addClass("sapMDialogResizing");var g={};var c=parseInt(i._$dialog.css("min-width"));var d=h.x+h.width-c;var f=s.width()-t.offsetX;var _=s.height()-t.offsetY;u=function(t){a(function(){i._bDisableRepositioning=true;i.$("cont").height("").width("");if(t.clientY+_>r.bottom){t.clientY=r.bottom-_}if(t.clientX+f>r.right){t.clientX=r.right-f}i._oManuallySetSize={width:h.width+t.clientX-h.x,height:h.height+t.clientY-h.y};if(i._bRTL){g.left=Math.min(Math.max(t.clientX,0),d);i._oManuallySetSize.width=h.width+h.x-Math.max(t.clientX,0)}g.width=i._oManuallySetSize.width;g.height=i._oManuallySetSize.height;i._$dialog.css(g)})}}else{return}o.on("mousemove",u);o.on("mouseup",p);t.stopPropagation()}}$.prototype._applyContextualSettings=$.prototype._getTitles=function(t){return t.findAggregatedObjects(true,};return $});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Input",["./InputBase","sap/ui/core/Item","sap/ui/core/Core","sap/ui/core/LabelEnablement","sap/ui/core/AccessKeysEnablement","./ColumnListItem","./GroupHeaderListItem","sap/ui/core/SeparatorItem","./Table","./library","sap/ui/core/IconPool","sap/ui/Device","./SuggestionsPopover","./Toolbar","./ToolbarSpacer","./Button","sap/ui/core/ResizeHandler","sap/ui/dom/containsOrEquals","sap/base/assert","sap/base/util/deepEqual","sap/m/inputUtils/wordStartsWithValue","sap/m/inputUtils/inputsDefaultFilter","sap/m/inputUtils/highlightDOMElements","sap/m/inputUtils/typeAhead","sap/ui/events/KeyCodes","sap/m/inputUtils/filterItems","sap/m/inputUtils/ListHelpers","sap/m/inputUtils/calculateSelectionStart","sap/m/inputUtils/selectionRange","./InputRenderer","sap/ui/base/ManagedObject","sap/ui/base/ManagedObjectObserver","sap/ui/dom/jquery/selectText"],function(e,t,s,i,o,n,u,r,a,g,l,p,h,c,f,d,S,_,y,m,v,I,b,T,P,V,w,R,C,A,F,L){"use strict";var M=g.ListType;var D=g.InputTextFormatMode;var H=g.InputType;var O=g.ListMode;var x=g.ListSeparators;var B=e.extend("sap.m.Input",{metadata:{interfaces:["sap.ui.core.IAccessKeySupport","sap.m.IToolbarInteractiveControl"],library:"sap.m",properties:{type:{type:"sap.m.InputType",group:"Data",defaultValue:H.Text},maxLength:{type:"int",group:"Behavior",defaultValue:0},dateFormat:{type:"string",group:"Misc",defaultValue:"YYYY-MM-dd",deprecated:true},showValueHelp:{type:"boolean",group:"Behavior",defaultValue:false},valueHelpIconSrc:{type:"sap.ui.core.URI",group:"Behavior",defaultValue:"sap-icon://value-help"},showSuggestion:{type:"boolean",group:"Behavior",defaultValue:false},valueHelpOnly:{type:"boolean",group:"Behavior",defaultValue:false},filterSuggests:{type:"boolean",group:"Behavior",defaultValue:true},maxSuggestionWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},startSuggestion:{type:"int",group:"Behavior",defaultValue:1},showTableSuggestionValueHelp:{type:"boolean",group:"Behavior",defaultValue:true},description:{type:"string",group:"Misc",defaultValue:null},fieldWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"50%"},valueLiveUpdate:{type:"boolean",group:"Behavior",defaultValue:false},selectedKey:{type:"string",group:"Data",defaultValue:""},textFormatMode:{type:"sap.m.InputTextFormatMode",group:"Misc",defaultValue:D.Value},textFormatter:{type:"function",group:"Misc",defaultValue:null},suggestionRowValidator:{type:"function",group:"Misc",defaultValue:null},enableSuggestionsHighlighting:{type:"boolean",group:"Behavior",defaultValue:true},enableTableAutoPopinMode:{type:"boolean",group:"Behavior",defaultValue:false},autocomplete:{type:"boolean",group:"Behavior",defaultValue:true},showClearIcon:{type:"boolean",defaultValue:false},effectiveShowClearIcon:{type:"boolean",defaultValue:false,visibility:"hidden"},separateSuggestions:{type:"boolean",defaultValue:true,visibility:"hidden"},highlightAccKeysRef:{type:"boolean",defaultValue:false,visibility:"hidden"},accesskey:{type:"string",defaultValue:"",visibility:"hidden"}},defaultAggregation:"suggestionItems",aggregations:{suggestionItems:{type:"sap.ui.core.Item",multiple:true,singularName:"suggestionItem"},suggestionColumns:{type:"sap.m.Column",multiple:true,singularName:"suggestionColumn",bindable:"bindable",forwarding:{getter:"_getSuggestionsTable",aggregation:"columns"}},suggestionRows:{type:"sap.m.ColumnListItem",altTypes:["sap.m.GroupHeaderListItem"],multiple:true,singularName:"suggestionRow",bindable:"bindable",forwarding:{getter:"_getSuggestionsTable",aggregation:"items"}},_suggestionPopup:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_valueHelpIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"}},associations:{selectedItem:{type:"sap.ui.core.Item",multiple:false},selectedRow:{type:"sap.m.ColumnListItem",multiple:false}},events:{liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},valueHelpRequest:{parameters:{fromSuggestions:{type:"boolean"}}},suggest:{parameters:{suggestValue:{type:"string"},suggestionColumns:{type:"sap.m.ListBase"}}},suggestionItemSelected:{parameters:{selectedItem:{type:"sap.ui.core.Item"},selectedRow:{type:"sap.m.ColumnListItem"}}},submit:{parameters:{value:{type:"string"}}}},designtime:"sap/m/designtime/Input.designtime"},renderer:A});l.insertFontFaceStyle();B._DEFAULTFILTER_TABULAR=function(e,t){var s=t.getCells(),i=0;for(;i<s.length;i++){if(s[i].getText){if(v(s[i].getText(),e)){return true}}}return false};B._DEFAULTRESULT_TABULAR=function(e){if(!e||e.isA("sap.m.GroupHeaderListItem")){return""}var t=e.getCells(),s=0;for(;s<t.length;s++){if(t[s].getText){return t[s].getText()}}return""};B.prototype.init=function(){e.prototype.init.call(this);this._iSetCount=0;this._sProposedItemText=null;this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(this.getId().indexOf("popup-input")===-1){this._createSuggestionsPopover()}this._setTypedInValue("");this._bClearButtonPressed=false;this._bAfterOpenFinisihed=false;o.registerControl(this)};var E=function(e){var t=i.getReferencingLabels(this);t.forEach(this)};B.prototype.getAccessKeysFocusTarget=function(){return this.getFocusDomRef()};B.prototype.onAccKeysHighlightStart=function(){E.call(this,true)};B.prototype.onAccKeysHighlightEnd=B.prototype.exit=function(){e.prototype.exit.call(this);this._deregisterEvents();this.cancelPendingSuggest();if(this._iRefreshListTimeout){clearTimeout(this._iRefreshListTimeout);this._iRefreshListTimeout=null}this._destroySuggestionsTable();if(this._getSuggestionsPopover()){this._oSuggestionPopup=null;this._oSuggPopover.destroy();this._oSuggPopover=null}this.$().off("click")};B.prototype.onBeforeRendering=function(){var t=this.getSelectedKey(),s=this.getShowValueHelp()&&this.getEnabled()&&this.getEditable(),i=this.getProperty("effectiveShowClearIcon")&&this.getEnabled()&&this.getEditable(),o=this._oValueHelpIcon,n=this._getSuggestionsPopover(),u=n&&this._isSuggestionsPopoverOpen(),r=n&&n.getInput(),a=u?n._getValueStateHeader().getText():null,g=u?n._getValueStateHeader().getValueState():"";e.prototype.onBeforeRendering.call(this);if(this.getShowClearIcon()){this._getClearIcon().setProperty("visible",i)}else if(this._oClearButton){this._getClearIcon().setProperty("visible",false)}this._deregisterEvents();if(t&&!this.getSelectedItem()&&this.getSuggestionItemByKey(t)){this.setSelectedKey(t)}if(this.getShowSuggestion()){if(this.getShowTableSuggestionValueHelp()){this._addShowMoreButton()}else{this._removeShowMoreButton()}if(r){r.setType(this.getType())}}if(s){o=this._getValueHelpIcon();o.setVisible(true)}else if(o){o.setVisible(false)}if(!this.getWidth()){this.setWidth("100%")}if(this._hasTabularSuggestions()){this._getSuggestionsTable().setAutoPopinMode(this.getEnableTableAutoPopinMode());this._getSuggestionsTable().setContextualWidth(this.getEnableTableAutoPopinMode()?"Auto":"Inherit")}if(u&&(this.getValueStateText()&&a!==this.getValueStateText()||this.getValueState()!==g||this.getFormattedValueStateText())){this._updateSuggestionsPopoverValueState()}};B.prototype._getDisplayText=function(e){var t=this.getTextFormatter();if(t){return t(e)}var s=e.getText(),i=e.getKey(),o=this.getTextFormatMode();switch(o){case D.Key:return i;case D.ValueKey:return s+" ("+i+")";case D.KeyValue:return"("+i+") "+s;default:return s}};B.prototype._onValueUpdated=function(e){if(this._bSelectingItem||e===this._sSelectedValue){return}var t=this.getSelectedKey(),s,i=this._getSuggestionsPopover(),o=i&&i.getItemsContainer();if(!this._hasTabularSuggestions()&&t===""){return}if(this._hasTabularSuggestions()){s=this._getSuggestionsTable()&&!!this._getSuggestionsTable().getSelectedItem()}else{s=o&&!!o.getSelectedItem()}if(s){return}this.setProperty("selectedKey","",true);this.setAssociation("selectedRow",null,true);this.setAssociation("selectedItem",null,true)};B.prototype.setSelectionItem=function(e,t){this._bSelectingItem=true;if(!e){this.setAssociation("selectedItem",null,true);this.setValue("");return}var s=this._iSetCount,i;this.setAssociation("selectedItem",e,true);this.setProperty("selectedKey",e.getKey(),true);if(t){this.fireSuggestionItemSelected({selectedItem:e})}if(s!==this._iSetCount){i=this.getValue()}else{i=this._getDisplayText(e)}this._sSelectedValue=i;this.setSelectionUpdatedFromList(false);this.updateInputField(i);if(this.bIsDestroyed){return}if(!(this.isMobileDevice()&&this.isA("sap.m.MultiInput"))){this._closeSuggestionPopup()}this._bSelectingItem=false;this._resetTypeAhead()};B.prototype.addSuggestionRowGroup=function(e,t,s){t=t||new u({title:F.escapeSettingsValue(e.text)||F.escapeSettingsValue(e.key)});this._createSuggestionPopupContent(true);this.addAggregation("suggestionRows",t,s);return t};B.prototype.addSuggestionItemGroup=function(e,t,s){t=t||new r({text:F.escapeSettingsValue(e.text)||F.escapeSettingsValue(e.key)});this._createSuggestionPopupContent(false);this.addAggregation("suggestionItems",t,s);return t};B.prototype.setSelectedItem=function(e){if(typeof e==="string"){e=sap.ui.getCore().byId(e)}if(e!==null&&!(e instanceof t)){return this}this.setSelectionItem(e);return this};B.prototype.setSelectedKey=function(e){e=this.validateProperty("selectedKey",e);this.setProperty("selectedKey",e,true);if(this._hasTabularSuggestions()){return this}if(!e){this.setSelectionItem();return this}var t=this.getSuggestionItemByKey(e);this.setSelectionItem(t);return this};B.prototype.getSuggestionItemByKey=function(e){var t=this.getSuggestionItems()||[],s,i;for(i=0;i<t.length;i++){s=t[i];if(s.getKey()===e){return s}}};B.prototype._getFormattedValueStateText=function(){var t=this._isSuggestionsPopoverOpen(),s=t?this._getSuggestionsPopover()._getValueStateHeader().getFormattedText():null;if(t&&s){return s}else{return e.prototype.getFormattedValueStateText.call(this)}};B.prototype.setSelectionRow=function(e,s){if(!e){this.setAssociation("selectedRow",null,true);return}this._bSelectingItem=true;var i,o=this.getSuggestionRowValidator();if(o){i=o(e);if(!(i instanceof t)){i=null}}var n=this._iSetCount,u="",r;this.setAssociation("selectedRow",e,true);if(i){u=i.getKey()}this.setProperty("selectedKey",u,true);if(s){this.fireSuggestionItemSelected({selectedRow:e})}if(n!==this._iSetCount){r=this.getValue()}else{if(i){r=this._getDisplayText(i)}else{r=this._getRowResultFunction()(e)}}this._sSelectedValue=r;this.setSelectionUpdatedFromList(false);this.updateInputField(r);if(this.bIsDestroyed){return}if(!(this.isMobileDevice()&&this.isA("sap.m.MultiInput")&&this._isMultiLineMode)){this._closeSuggestionPopup()}this._bSelectingItem=false;this._resetTypeAhead()};B.prototype.setSelectedRow=function(e){if(typeof e==="string"){e=sap.ui.getCore().byId(e)}if(e!==null&&!(e instanceof n)){return this}this.setSelectionRow(e);return this};B.prototype._getValueHelpIcon=function(){var e=this,t=this.getValueHelpIconSrc();if(!this._oValueHelpIcon){this._oValueHelpIcon=this.addEndIcon({id:this.getId()+"-vhi",src:t,useIconTooltip:false,alt:this._oRb.getText("INPUT_VALUEHELP_BUTTON"),decorative:false,noTabStop:true,press:function(t){if(!e.getValueHelpOnly()){var s=this.getParent(),i;if(p.support.touch){i=s.$("inner");i.attr("readonly","readonly");s.focus();i.removeAttr("readonly")}else{s.focus()}e.bValueHelpRequested=true;e._fireValueHelpRequest(false)}}})}else if(this._oValueHelpIcon.getSrc()!==t){this._oValueHelpIcon.setSrc(t)}return this._oValueHelpIcon};B.prototype._getClearIcon=function(){var e=this;if(this._oClearButton){return this._oClearButton}this._oClearButton=this.addEndIcon({src:l.getIconURI("decline"),noTabStop:true,visible:false,alt:this._oRb.getText("INPUT_CLEAR_ICON_ALT"),useIconTooltip:false,decorative:false,press:function(){if(e.getValue()!==""){e.fireChange({value:""});e.fireLiveChange({value:""});e.setValue("");e._bClearButtonPressed=true;setTimeout(function(){if(p.system.desktop){e.focus();e._closeSuggestionPopup()}},0)}}},0);return this._oClearButton};B.prototype._fireValueHelpRequest=function(e){var t="";if(this.getShowSuggestion()&&!this.isMobileDevice()){t=this._getTypedInValue()||""}else{t=this.getDOMValue()}this.fireValueHelpRequest({fromSuggestions:e,_userInputValue:t})};B.prototype._fireValueHelpRequestForValueHelpOnly=function(){if(this.getEnabled()&&this.getEditable()&&this.getShowValueHelp()&&this.getValueHelpOnly()){if(p.system.phone){this.focus()}this._fireValueHelpRequest(false)}};B.prototype.ontap=function(t){e.prototype.ontap.call(this,t);if(this.isValueHelpOnlyOpener(t.target)){this._fireValueHelpRequestForValueHelpOnly()}if(this.shouldSuggetionsPopoverOpenOnMobile(t)){this._openSuggestionsPopover()}this._bClearButtonPressed=false};B.prototype.shouldSuggetionsPopoverOpenOnMobile=function(e){return this.isMobileDevice()&&this.getEditable()&&this.getEnabled()&&this.getShowSuggestion()&&!this._bClearButtonPressed&&e.target.id!==this.getId()+"-vhi"};B.prototype.setFilterFunction=function(e){if(e===null||e===undefined){this._fnFilter=I;return this}y(typeof e==="function","Input.setFilterFunction: first argument fnFilter must be a function on "+this);this._fnFilter=e;return this};B.prototype._getFilterFunction=function(e){if(typeof this._fnFilter==="function"&&!e){return this._fnFilter}return!this._hasTabularSuggestions()?I:B._DEFAULTFILTER_TABULAR};B.prototype.setRowResultFunction=function(e){var t;if(e===null||e===undefined){this._fnRowResultFilter=B._DEFAULTRESULT_TABULAR;return this}y(typeof e==="function","Input.setRowResultFunction: first argument fnFilter must be a function on "+this);this._fnRowResultFilter=e;t=this.getSelectedRow();if(t){this.setSelectedRow(t)}return this};B.prototype._getRowResultFunction=function(e){if(typeof this._fnRowResultFilter==="function"&&!e){return this._fnRowResultFilter}return B._DEFAULTRESULT_TABULAR};B.prototype.closeSuggestions=function(){this._closeSuggestionPopup()};B.prototype._doSelect=function(e,t){var s=this._$input[0];if(s){var i=this._$input;s.focus();i.selectText(e?e:0,t?t:i.val().length)}return this};B.prototype._isIncrementalType=function(){var e=this.getType();if(e==="Number"||e==="Date"||e==="Datetime"||e==="Month"||e==="Time"||e==="Week"){return true}return false};B.prototype.onsapescape=function(t){if(this._isSuggestionsPopoverOpen()){t.originalEvent._sapui_handledByControl=true;this._revertPopupSelection();if(this._getTypedInValue()!==this.getValue()){this.setValue(this._getTypedInValue())}return}if(this.getValueLiveUpdate()){this.setProperty("value",this.getLastValue(),true)}if(e.prototype.onsapescape){e.prototype.onsapescape.apply(this,arguments)}};B.prototype.onsapenter=function(t){var s=this._isSuggestionsPopoverOpen(),i=!this.hasStyleClass("sapMFocus")&&s,o=this._hasTabularSuggestions()?this.getSuggestionRows():this.getSuggestionItems(),n,u;this.cancelPendingSuggest();i&&this.setSelectionUpdatedFromList(true);if(this.getShowSuggestion()&&this._bDoTypeAhead&&s){u=this._getSuggestionsPopover().getItemsContainer().getSelectedItem();if(this._hasTabularSuggestions()){u&&this.setSelectionRow(u,true)}else{u&&this.setSelectionItem(w.getItemByListItem(o,u),true)}}if(s&&!this.isComposingCharacter()){this._closeSuggestionPopup();n=this.getDOMValue()?this.getDOMValue().length:null;this.selectText(n,n)}!i&&e.prototype.onsapenter.apply(this,arguments);if(this.getEnabled()&&this.getEditable()&&!(this.getValueHelpOnly()&&this.getShowValueHelp())){this.fireSubmit({value:this.getValue()})}if(!this.isMobileDevice()){this._resetTypeAhead()}};B.prototype.onsapfocusleave=function(t){var s=this._getSuggestionsPopover(),i=s&&s.getPopover(),o=i&&i.isA("sap.m.Popover"),n=t.relatedControlId&&sap.ui.getCore().byId(t.relatedControlId),u=n&&n.getFocusDomRef(),r=i&&u&&_(i.getDomRef(),u);if(o){if(r&&!s.getValueStateActiveState()){this._bPopupHasFocus=true;if(p.system.desktop&&m(i.getFocusDomRef(),u)||n.isA("sap.m.GroupHeaderListItem")){this.focus()}}else{if(this.getDOMValue()===this._sSelectedSuggViaKeyboard){this._sSelectedSuggViaKeyboard=null}}}if(!r){e.prototype.onsapfocusleave.apply(this,arguments)}this.bValueHelpRequested=false;if(!this._getProposedItemText()||this.isMobileDevice()){return}if(this.getShowSuggestion()&&this._bAfterOpenFinisihed){this.setSelectionUpdatedFromList(true)}else{var a=this.getSuggestionItems().filter(bind(this))[0];if(a){this.setSelectionItem(a,true);this.selectText(0,0)}}};B.prototype.onmousedown=function(e){if(this._isSuggestionsPopoverOpen()){e.stopPropagation()}};["onsapup","onsapdown","onsappageup","onsappagedown","onsaphome","onsapend"].forEach(function(e){B.prototype[e]=function(t){if((e==="onsapup"||e==="onsapdown")&&this.isComposingCharacter()){return}if(this.getShowSuggestion()){this._getSuggestionsPopover().handleListNavigation(this,t);if(this._isIncrementalType()){t.setMarked()}this.setSelectionUpdatedFromList(true)}}});B.prototype.setSelectionUpdatedFromList=function(e){this._bSelectionUpdatedFromList=e};B.prototype.getSelectionUpdatedFromList=function(){return this._bSelectionUpdatedFromList};B.prototype.updateSelectionFromList=function(e){if(this._hasTabularSuggestions()&&this.getSelectedRow()!==e){this.setSelectionRow(e,true)}else{var t=w.getItemByListItem(this.getSuggestionItems(),e);t&&this.getSelectedItem()!==t.getId()&&this.setSelectionItem(t,true)}this.setSelectionUpdatedFromList(false)};B.prototype._deregisterEvents=function(){this._deregisterPopupResize();if(this.isMobileDevice()&&this._getSuggestionsPopover()&&this._getSuggestionsPopover().getPopover()){this.$().off("click")}};B.prototype.updateSuggestionItems=function(){this._bSuspendInvalidate=true;this.updateAggregation("suggestionItems");this._synchronizeSuggestions();this._bSuspendInvalidate=false;return this};B.prototype.invalidate=function(){if(!this._bSuspendInvalidate){e.prototype.invalidate.apply(this,arguments)}};B.prototype.cancelPendingSuggest=B.prototype._triggerSuggest=function(e){var t=this._getSuggestionsPopover().getItemsContainer();this.cancelPendingSuggest();this._bShouldRefreshListItems=true;if(!e){e=""}if(e.length>=this.getStartSuggestion()){this._iSuggestDelay=setTimeout(function(){if(this._sPrevSuggValue!==e){this._bBindingUpdated=false;this.fireSuggest({suggestValue:e});if(!this._bBindingUpdated){this._refreshItemsDelayed()}this._sPrevSuggValue=e}}.bind(this),300)}else if(this.isMobileDevice()){if(t instanceof a){t.addStyleClass("sapMInputSuggestionTableHidden")}else if(t&&t.destroyItems){t.destroyItems()}}else if(this._isSuggestionsPopoverOpen()){setTimeout(function(){var e=this.getDOMValue()||"";if(e.length<this.getStartSuggestion()){this._closeSuggestionPopup()}}.bind(this),0)}};B.prototype._shouldTriggerSuggest=function(){return!this._bPopupHasFocus&&!this.getStartSuggestion()&&!this.getValue()&&this.getShowSuggestion()};B.prototype.onchange=function(e){if(this.getShowValueHelp()||this.getShowSuggestion()||this.getProperty("effectiveShowClearIcon")){return}this.onChange(e)};B.prototype.oninput=function(t){e.prototype.oninput.call(this,t);if(t.isMarked("invalid")){return}var s=this.getDOMValue(),i,o,n;if(this.getValueLiveUpdate()){this.setProperty("value",s,true)}this.fireLiveChange({value:s,newValue:s});this.addStyleClass("sapMFocus");if(this.getShowSuggestion()&&!this.isMobileDevice()){i=this._getSuggestionsPopover();o=i.getItemsContainer();this._triggerSuggest(s);if(o&&!i.getValueStateActiveState()){n=o&&o.getSelectedItem();o.removeStyleClass("sapMListFocus");n&&n.removeStyleClass("sapMLIBFocused")}else if(i.getValueStateActiveState()&&document.activeElement.tagName!=="A"){i._getValueStateHeader().removeStyleClass("sapMPseudoFocus")}}this._handleTypeAhead(this)};B.prototype.onkeydown=function(e){this._bDoTypeAhead=!p.os.android&&this.getAutocomplete()&&e.which!==P.BACKSPACE&&e.which!==P.DELETE};B.prototype.onkeyup=function(e){var t=this.getValue();var s=this.getLastValue();var i=e.which===P.ARROW_DOWN||e.which===P.ARROW_UP;var o,n,u;if(!this._bDoTypeAhead&&!t){this.getShowSuggestion()&&this.setSelectedKey(null);s!==t&&this.setLastValue(s)}else if(!this._bDoTypeAhead&&!i&&t){o=this.getShowSuggestion()&&this._getSuggestionsPopover();n=o&&o.getItemsContainer();u=n&&n.getSelectedItem();this._setProposedItemText(null);if(u){u.setSelected(false)}}this.getShowClearIcon()&&this.setProperty("effectiveShowClearIcon",!!t)};B.prototype.getValue=function(){return this.getDomRef("inner")&&this._$input?this.getDOMValue():this.getProperty("value")};B.prototype._refreshItemsDelayed=B.prototype._clearSuggestionPopupItems=function(){var e=this._getSuggestionsPopover().getItemsContainer();if(!e){return}if(e instanceof a){e.removeSelections(true)}else{e.destroyItems()}};B.prototype._hideSuggestionPopup=function(){var e=this._getSuggestionsPopover(),t=e.getPopover(),s=e.getItemsContainer();if(!this.isMobileDevice()){if(this._isSuggestionsPopoverOpen()){this._sCloseTimer=setTimeout(function(){this.cancelPendingSuggest();if(this._getTypedInValue()){this.setDOMValue(this._getTypedInValue())}t.close()}.bind(this),0)}}else if(this._hasTabularSuggestions()&&s){s.addStyleClass("sapMInputSuggestionTableHidden")}this.$("SuggDescr").text("");this.$("inner").removeAttr("aria-activedescendant")};B.prototype._openSuggestionPopup=function(e){if(!this.isMobileDevice()){if(this._sCloseTimer){clearTimeout(this._sCloseTimer);this._sCloseTimer=null}if(!this._isSuggestionsPopoverOpen()&&!this._sOpenTimer&&e!==false&&this.getShowSuggestion()){this._sOpenTimer=setTimeout(function(){this._sOpenTimer=null;this._getSuggestionsPopover()&&this._openSuggestionsPopover()}.bind(this),0)}}};B.prototype._applySuggestionAcc=function(e){var t="",s=this._oRb;setTimeout(function(){if(!this.getSuggestionItems().length&&!this._hasTabularSuggestions()){return this.$("SuggDescr").text("")}if(e===1){t=s.getText("INPUT_SUGGESTIONS_ONE_HIT")}else if(e>1){t=s.getText("INPUT_SUGGESTIONS_MORE_HITS",e)}else{t=s.getText("INPUT_SUGGESTIONS_NO_HIT")}this.$("SuggDescr").text(t)}.bind(this),0)};B.prototype._refreshListItems=function(){var e=this.getShowSuggestion(),t=this._bDoTypeAhead?this._getTypedInValue():this.getDOMValue()||"",s,i;if(!e||!this._bShouldRefreshListItems||!this.getDomRef()||!this.isMobileDevice()&&!this.$().hasClass("sapMInputFocused")){return null}this._clearSuggestionPopupItems();if(t.length<this.getStartSuggestion()){this._hideSuggestionPopup();return false}s=this._getFilteredSuggestionItems(t);i=s.items.length;if(i>0&&!this.getValueHelpOnly()){this._openSuggestionPopup(this.getValue().length>=this.getStartSuggestion())}else{this._hideSuggestionPopup()}this._applySuggestionAcc(i)};B.prototype.addSuggestionItem=function(e){this.addAggregation("suggestionItems",e,true);this._synchronizeSuggestions();this._createSuggestionPopupContent();return this};B.prototype.insertSuggestionItem=function(e,t){this.insertAggregation("suggestionItems",t,e,true);this._synchronizeSuggestions();this._createSuggestionPopupContent();return this};B.prototype.removeSuggestionItem=function(e){var t=this.removeAggregation("suggestionItems",e,true);this._synchronizeSuggestions();return t};B.prototype.removeAllSuggestionItems=function(){var e=this.removeAllAggregation("suggestionItems",true);this._synchronizeSuggestions();return e};B.prototype.destroySuggestionItems=function(){this.destroyAggregation("suggestionItems",true);this._synchronizeSuggestions();return this};B.prototype.bindAggregation=function(){if(arguments[0]==="suggestionRows"||arguments[0]==="suggestionColumns"||arguments[0]==="suggestionItems"){this._createSuggestionPopupContent(arguments[0]==="suggestionRows"||arguments[0]==="suggestionColumns");this._bBindingUpdated=true}return e.prototype.bindAggregation.apply(this,arguments)};B.prototype._closeSuggestionPopup=function(){this._bShouldRefreshListItems=false;this.cancelPendingSuggest();this._isSuggestionsPopoverOpen()&&this._getSuggestionsPopover().getPopover().close();if(!this.isMobileDevice()&&this.$().hasClass("sapMInputFocused")){this.openValueStateMessage()}this.$("SuggDescr").text("");this.$("inner").removeAttr("aria-activedescendant");this._sPrevSuggValue=null};B.prototype._synchronizeSuggestions=function(){var e=this._getSuggestionsPopover(),t=e&&e.getInput(),s=t&&t.getFocusDomRef();if(document.activeElement===this.getFocusDomRef()||document.activeElement===s){this._bShouldRefreshListItems=true;this._refreshItemsDelayed()}if(!this.getDomRef()||this._isSuggestionsPopoverOpen()){return}this._synchronizeSelection()};B.prototype._synchronizeSelection=function(){var e=this.getSelectedKey();if(!e){return}if(this.getValue()&&!this.getSelectedItem()&&!this.getSelectedRow()){return}this.setSelectedKey(e)};B.prototype.onfocusin=function(t){e.prototype.onfocusin.apply(this,arguments);this.addStyleClass("sapMInputFocused");if(!this.isMobileDevice()&&this._isSuggestionsPopoverOpen()){this.closeValueStateMessage()}if(this._shouldTriggerSuggest()){this._triggerSuggest(this.getValue())}this._bPopupHasFocus=undefined;this._sPrevSuggValue=null};B.prototype.oncompositionend=function(t){e.prototype.oncompositionend.apply(this,arguments);if(!p.browser.firefox){this._handleTypeAhead(this)}};B.prototype._handleTypeAhead=function(e){var t=this.getValue();var s={value:"",selectedItem:null};var i;var o=e._getSuggestionsPopover()&&e._getSuggestionsPopover().getItemsContainer();if((e&&e.getValue().toLowerCase())===(this._getProposedItemText()&&this._getProposedItemText().toLowerCase())){return}this._setTypedInValue(t);e._setProposedItemText(null);if(!this._bDoTypeAhead||t===""||t.length<this.getStartSuggestion()||document.activeElement!==this.getFocusDomRef()){return}var n=e._hasTabularSuggestions(),u=n?e.getSuggestionRows():e.getSuggestionItems(),r=function(t){if(!t){return""}return n?e._getRowResultFunction()(t):t.getText()};if(this.isMobileDevice()&&o&&!u.length){i={onBeforeRendering:function(){if(o.getItems().length){this._handleTypeAhead(e)}},onAfterRendering:function(){if(o.getItems().length){o.removeDelegate(i)}}};o.addDelegate(i,this);return}var a=T(t,this,u,bind(this));s.value=r(a[0]);s.selectedItem=a[0];e._setProposedItemText(s.value);return s};B.prototype._resetTypeAhead=function(e){e=e||this;e._setProposedItemText(null);this._setTypedInValue("")};B.prototype.onsapright=function(){var e=this.getValue();if(!this.getAutocomplete()){return}if(this._getTypedInValue()!==e){this._setTypedInValue(e);this.fireLiveChange({value:e,newValue:e})}};B.prototype._formatTypedAheadValue=function(e){var t=this._getTypedInValue();if(e.toLowerCase().indexOf(t.toLowerCase())===0){return t.concat(e.substring(t.length,e.length))}else{return e}};B.prototype.onsapshow=function(e){if(!this.getEnabled()||!this.getEditable()||!this.getShowValueHelp()){return}this.bValueHelpRequested=true;this._fireValueHelpRequest(false);e.preventDefault();e.stopPropagation()};B.prototype.onsaphide=B.prototype.onsapshow;B.prototype.onsapselect=B.prototype.onfocusout=function(t){e.prototype.onfocusout.apply(this,arguments);this.removeStyleClass("sapMInputFocused");this.$("SuggDescr").text("")};B.prototype._hasTabularSuggestions=function(){return!!(this.getAggregation("suggestionColumns")&&this.getAggregation("suggestionColumns").length)};B.prototype._getSuggestionsTable=function(){if(this._bIsBeingDestroyed){return null}if(!this._oSuggestionsTable){this._oSuggestionsTable=this._createSuggestionsTable()}return this._oSuggestionsTable};B.prototype._destroySuggestionsTable=B.prototype._createSuggestionsTable=function(){var e;var t=new a(this.getId()+"-popup-table",{mode:O.SingleSelectMaster,showNoData:false,showSeparators:this.getProperty("separateSuggestions")?x.Inner:x.None,width:"100%",enableBusyIndicator:false,rememberSelections:false,itemPress:function(e){if(p.system.desktop){this.focus()}var t=e.getParameter("listItem");this.setSelectionRow(t,true)}.bind(this),sticky:[g.Sticky.ColumnHeaders]});t.addEventDelegate({onAfterRendering:function(){var e;if(!this.getEnableSuggestionsHighlighting()){return}e=t.$().find("tbody .sapMLabel");b(e,this._getTypedInValue())}},this);if(this.isMobileDevice()){t.addStyleClass("sapMInputSuggestionTableHidden")}t.updateItems=function(){a.prototype.updateItems.apply(this,arguments);this._refreshItemsDelayed();return this};e=new L(function(e){var t=e.mutation;var s=e.child;var i=e.name==="items";switch(t){case"insert":if(i){s.setType(M.Active);this._createSuggestionPopupContent(true);this._synchronizeSuggestions()}break;case"remove":if(i){this._synchronizeSuggestions()}break;default:break}}.bind(this));e.observe(t,{aggregations:["items","columns"]});return t};B.prototype.clone=function(){var t=e.prototype.clone.apply(this,arguments);t.setRowResultFunction(this._fnRowResultFilter);t.setValue(this.getValue());return t};B.prototype.setValue=function(t){this._iSetCount++;e.prototype.setValue.call(this,t);this._onValueUpdated(t);this._setTypedInValue("");this.setProperty("effectiveShowClearIcon",!!t);return this};B.prototype.setDOMValue=B.prototype.getDOMValue=B.prototype._getInputValue=function(){var t=e.prototype._getInputValue.apply(this,arguments);return t};B.prototype.updateInputField=function(e){if(this._isSuggestionsPopoverOpen()&&this.isMobileDevice()){this._getSuggestionsPopover().getInput().setValue(e)._doSelect()}else{e=this._getInputValue(e);this.setDOMValue(e);this.onChange(null,null,e)}};B.prototype.getAccessibilityInfo=function(){var t=e.prototype.getAccessibilityInfo.apply(this,arguments);t.description=((t.description||"")+" "+this.getDescription()).trim();return t};B.prototype.preventChangeOnFocusLeave=B.prototype._getShowMoreButton=B.prototype._getShowMoreButtonPress=function(){var e,t=this._getTypedInValue();if(this.getShowTableSuggestionValueHelp()){if(t){e=t;this.updateDomValue(e);this._resetTypeAhead();this._setTypedInValue(e)}this._fireValueHelpRequest(true);this._closeSuggestionPopup()}};B.prototype._addShowMoreButton=function(){var e=this._getSuggestionsPopover();var t=e&&e.getPopover();if(!t||!this._hasTabularSuggestions()||this._getShowMoreButton()){return}var s=new d({text:this._oRb.getText("INPUT_SUGGESTIONS_SHOW_ALL"),press:this._getShowMoreButtonPress.bind(this)});if(t.isA("sap.m.Dialog")){e.setShowMoreButton(s)}else{e.setShowMoreButton(new c({content:[new f,s]}))}};B.prototype._removeShowMoreButton=function(){var e=this._getSuggestionsPopover();var t=e&&e.getPopover();if(t&&this._hasTabularSuggestions()&&this._getShowMoreButton()){e.removeShowMoreButton()}};B.prototype._hasShowSelectedButton=function(){return false};B.prototype._createSuggestionPopupContent=function(e){var t=this._getSuggestionsPopover();var s=t.getItemsContainer();if(s&&(s.isA("sap.m.Table")&&!e||s.isA("sap.m.List")&&e)){s.destroy();s=null;this._destroySuggestionsTable()}if(this._bIsBeingDestroyed||!t||s){return}t.initContent(this.getId(),e?this._getSuggestionsTable():null);if(!this._hasTabularSuggestions()&&!e){this._decorateSuggestionsPopoverList(t.getItemsContainer())}else{this._decorateSuggestionsPopoverTable()}};B.prototype._decorateSuggestionsPopoverList=function(e){if(!e||!e.isA("sap.m.List")){return}e.addEventDelegate({onAfterRendering:function(){var t,s;if(!this.getEnableSuggestionsHighlighting()){return}t=e.$().find(".sapMSLIInfo [id$=-infoText], .sapMSLITitleOnly [id$=-titleText]");s=this._bDoTypeAhead?this._getTypedInValue():this.getValue();s=(s||"").toLowerCase();b(t,s)}},this);e.attachItemPress(function(e){if(p.system.desktop){this.focus()}var t=e.getParameter("listItem");if(!t.isA("sap.m.GroupHeaderListItem")){this.setSelectionItem(w.getItemByListItem(this.getSuggestionItems(),t),true)}},this)};B.prototype._decorateSuggestionsPopoverTable=B.prototype._decoratePopupInput=function(e){if(!e){return}e.setValueLiveUpdate(true);e.setValueState(this.getValueState());e.setShowValueHelp(this.getShowValueHelp());e.attachValueHelpRequest(function(){this.fireValueHelpRequest({fromSuggestions:true});this._getSuggestionsPopover().iPopupListSelectedIndex=-1;this._closeSuggestionPopup()}.bind(this));e.attachLiveChange(function(e){var t=e.getParameter("newValue");this.setDOMValue(this._getInputValue(this._getSuggestionsPopover().getInput().getValue()));this._triggerSuggest(t);this.fireLiveChange({value:t,newValue:t})}.bind(this));e._handleTypeAhead=function(){B.prototype._handleTypeAhead.call(e,this)}.bind(this);e._resetTypeAhead=function(){B.prototype._resetTypeAhead.call(e,this)}.bind(this);e.addEventDelegate({onsapenter:,this);return e};B.prototype.forwardEventHandlersToSuggPopover=function(e){e.setOkPressHandler(this._closeSuggestionPopup.bind(this));e.setCancelPressHandler(this._revertPopupSelection.bind(this))};B.prototype._revertPopupSelection=function(){var e=this._getSuggestionsPopover(),t=e&&e.getInput();this._setProposedItemText(null);this.setSelectionUpdatedFromList(false);if(this.isMobileDevice()){t&&t.setDOMValue(this.getLastValue())}this._closeSuggestionPopup()};B.prototype._getSuggestionsPopover=function(){return this._oSuggPopover};B.prototype._createSuggestionsPopover=function(){var e=this._oSuggPopover=new h(this);e.decorateParent(this);e.setInputLabels(this.getLabels.bind(this));this._createSuggestionsPopoverPopup();this.forwardEventHandlersToSuggPopover(e);e.attachEvent(h.M_EVENTS.SELECTION_CHANGE,function(e){var t=e.getParameter("newItem"),s=this.calculateNewValue(t),i=t&&t.isA("sap.m.GroupHeaderListItem"),o=this.getFocusDomRef(),n=o&&o.value.substring(0,o.selectionStart),u=e.getParameter("previousItem"),r=u&&u.isA("sap.m.GroupHeaderListItem"),a=R(C(o,r),s,n,r);if(!t||i){this.setDOMValue(n)}else{this.setDOMValue(s);a=a===0&&s.indexOf(n)===0?n.length:a;this._doSelect(a)}this._sSelectedSuggViaKeyboard=s},this);if(this.getShowTableSuggestionValueHelp()){this._addShowMoreButton()}return this._oSuggPopover};B.prototype.calculateNewValue=function(e){if(!e||e&&e.isA("sap.m.GroupHeaderListItem")){return""}if(e.isA("sap.m.ColumnListItem")){return this._getInputValue(this._getRowResultFunction()(e))}if(e.isA("sap.m.StandardListItem")){return this._getInputValue(e.getTitle())}};B.prototype._createSuggestionsPopoverPopup=function(){var e=this._getSuggestionsPopover();var t;e.createSuggestionPopup(this,{showSelectedButton:this._hasShowSelectedButton()},B);this._decoratePopupInput(e.getInput());t=e.getPopover();t.attachBeforeOpen(function(){this._updateSuggestionsPopoverValueState()},this);t.attachBeforeClose(this);t.attachAfterOpen(function(){var e;var t=this.getShowSuggestion()&&this._getSuggestionsPopover();var s=t&&t.getItemsContainer();var i;e=this._handleTypeAhead(this);if(!(this._getProposedItemText()&&s&&!s.getSelectedItem()&&e&&e.selectedItem)){return}i=this._hasTabularSuggestions()?e.selectedItem:w.getListItem(e.selectedItem);i.setSelected(true);this.setSelectionUpdatedFromList(true)},this);if(this.isMobileDevice()){t.attachBeforeClose(function(){this.setDOMValue(this._getInputValue(e.getInput().getValue()));this.onChange()},this).attachAfterClose(function(){var t=e.getItemsContainer();if(!t){return}var s=t&&t.getSelectedItem();if(this._getProposedItemText()&&s){this.setSelectionUpdatedFromList(true)}if(this.getSelectionUpdatedFromList()){this.updateSelectionFromList(s)}if(a&&!(t instanceof a)){t.destroyItems()}else{t.removeSelections(true)}},this).attachAfterOpen(this).attachBeforeOpen(function(){var t=e.getInput();["placeholder","maxLength","value","showClearIcon","effectiveShowClearIcon"].forEach(this)},this)}else{t.attachAfterClose(function(){var t=e.getItemsContainer();var s=t&&t.getSelectedItem();var i=this.getDomRef();if(this.getSelectionUpdatedFromList()){this.updateSelectionFromList(s)}if(!t){return}this._bAfterOpenFinisihed=false;if(t instanceof a){s&&s.removeStyleClass("sapMLIBFocused");t.removeSelections(true)}else{t.destroyItems()}this._deregisterPopupResize();if(i&&i.contains(document.activeElement)){this.addStyleClass("sapMFocus")}},this).attachBeforeOpen(function(){e._sPopoverContentWidth=this.getMaxSuggestionWidth();e.resizePopup(this);this._registerPopupResize();this._bAfterOpenFinisihed=false},this);t.addEventDelegate({onAfterRendering:function(){var t=this.getDomRef().getBoundingClientRect().width;var s=getComputedStyle(this.getDomRef()).getPropertyValue("--sPopoverMaxWidth");this._bAfterOpenFinisihed=true;if(this.getMaxSuggestionWidth()){return}if(t<=parseInt(s)&&!p.system.phone){e.getPopover().getDomRef().style.setProperty("max-width","40rem")}else{e.getPopover().getDomRef().style.setProperty("max-width",t+"px")}e.getPopover().getDomRef().style.setProperty("min-width",t+"px")}},this)}this.setAggregation("_suggestionPopup",t);this._oSuggestionPopup=t};B.prototype._registerPopupResize=function(){var e=this._getSuggestionsPopover();this._sPopupResizeHandler=S.register(this,e.resizePopup.bind(e,this))};B.prototype._deregisterPopupResize=function(){if(this._sPopupResizeHandler){this._sPopupResizeHandler=S.deregister(this._sPopupResizeHandler)}};B.prototype.showItems=function(e){var t,s,i=this._getFilterFunction();if(!this.getEnabled()||!this.getEditable()||this.getValueHelpOnly()){return}this.setFilterFunction(e||function(){return true});this._clearSuggestionPopupItems();t=this._getFilteredSuggestionItems(this.getDOMValue());s=t.items.length;if(s>0){this._openSuggestionPopup()}else{this._hideSuggestionPopup()}this._applySuggestionAcc(s);this.setFilterFunction(i)};B.prototype.shouldValueStateMessageBeOpened=function(){var t=e.prototype.shouldValueStateMessageBeOpened.apply(this,arguments);if(!t||this._isSuggestionsPopoverOpen()){return false}return true};B.prototype._isSuggestionsPopoverOpen=B.prototype.isMobileDevice=B.prototype._openSuggestionsPopover=function(){this.closeValueStateMessage();this._updateSuggestionsPopoverValueState();this._getSuggestionsPopover().getPopover().open()};B.prototype._updateSuggestionsPopoverValueState=function(){var e=this._getSuggestionsPopover(),t=this.getValueState(),s=this.getValueState()!==e._getValueStateHeader().getValueState(),i=this.getFormattedValueStateText(),o=this.getValueStateText();if(!e){return}if(this._isSuggestionsPopoverOpen()&&!i&&!s){this.setFormattedValueStateText(e._getValueStateHeader().getFormattedText())}e.updateValueState(t,i||o,this.getShowValueStateMessage());if(this.isMobileDevice()){e.getInput().setValueState(t)}};B.prototype.setShowValueHelp=function(e){var t=this._getSuggestionsPopover()&&this._getSuggestionsPopover().getInput();this.setProperty("showValueHelp",e);if(t){t.setShowValueHelp(e)}return this};B.prototype.isValueHelpOnlyOpener=B.prototype._getFilteredSuggestionItems=function(e){var t,s=this._getSuggestionsPopover().getItemsContainer();if(this._hasTabularSuggestions()){if(this.isMobileDevice()&&s){s.removeStyleClass("sapMInputSuggestionTableHidden")}t=this.filterTabularItems(this.getSuggestionRows(),e)}else{t=V(this,this.getSuggestionItems(),e,this.getFilterSuggests(),true,this._getFilterFunction());this._mapItems(t)}return t};B.prototype.filterTabularItems=function(e,t){var s,i=this.getFilterSuggests(),o=[],n=[],u=false,r=this._getFilterFunction();e.forEach(function(e){if(e.isA("sap.m.GroupHeaderListItem")){n.push({header:e,visible:false})}else{s=!i||r(t,e);e.setVisible(s);s&&o.push(e);if(!u&&s&&this._getProposedItemText()===this._getRowResultFunction()(e)){e.setSelected(true);u=true}if(n.length&&s){n[n.length-1].visible=true}}},this);n.forEach(;this._getSuggestionsTable().invalidate();return{items:o,groups:n}};B.prototype._mapItems=function(e){var t=this.getSuggestionItems(),s=e.items,i=e.groups,o=i.map(,n=false,u=this._getSuggestionsPopover().getItemsContainer(),r,a;t.filter(.map(function(e){r=w.createListItemFromCoreItem(e,true);u.addItem(r);if(!n&&this._getProposedItemText()===e.getText()){r.setSelected(true);n=true}return e},this).filter(.forEach(function(e){a=o.indexOf(e);if(a>-1){r=w.getListItem(e);r&&r.setVisible(i[a].visible)}})};B.prototype._setTypedInValue=function(e){this._sTypedInValue=e;return this};B.prototype._getTypedInValue=function(){return this._sTypedInValue};B.prototype._setSeparateSuggestions=function(e){var t=this._getSuggestionsTable();this.setProperty("separateSuggestions",e);if(t){t.setShowSeparators(e?x.Inner:x.None)}return this};B.prototype._setProposedItemText=B.prototype._getProposedItemText=B.prototype._getToolbarInteractive=return B});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MultiComboBox",["./InputBase","./ComboBoxBase","./Tokenizer","./Token","./Popover","./CheckBox","./Toolbar","./library","sap/ui/core/Element","sap/ui/core/EnabledPropagator","sap/ui/core/IconPool","sap/ui/core/library","sap/ui/Device","sap/ui/core/Item","sap/ui/core/ResizeHandler","./MultiComboBoxRenderer","sap/ui/dom/containsOrEquals","sap/m/inputUtils/completeTextSelected","sap/m/inputUtils/inputsDefaultFilter","sap/m/inputUtils/typeAhead","sap/m/inputUtils/ListHelpers","sap/m/inputUtils/filterItems","sap/m/inputUtils/itemsVisibilityHandler","sap/m/inputUtils/forwardItemPropertiesToToken","sap/m/inputUtils/getTokenByItem","sap/ui/events/KeyCodes","sap/base/util/deepEqual","sap/base/assert","sap/base/Log","sap/ui/core/Core","sap/ui/core/InvisibleText","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/cursorPos"],function(e,t,i,s,o,n,r,a,l,h,u,c,g,p,d,f,m,I,y,v,S,_,k,T,b,C,E,A,P,V,O,D){"use strict";var x=a.ListMode;var F=c.ValueState;var L=c.OpenState;var R=a.TokenizerRenderMode;var B=t.extend("sap.m.MultiComboBox",{metadata:{library:"sap.m",designtime:"sap/m/designtime/MultiComboBox.designtime",properties:{selectedKeys:{type:"string[]",group:"Data",defaultValue:[]},hasSelection:{type:"boolean",visibility:"hidden",defaultValue:false},showSelectAll:{type:"boolean",defaultValue:false}},associations:{selectedItems:{type:"sap.ui.core.Item",multiple:true,singularName:"selectedItem"}},aggregations:{tokenizer:{type:"sap.m.Tokenizer",multiple:false,visibility:"hidden"}},events:{selectionChange:{parameters:{changedItem:{type:"sap.ui.core.Item"},changedItems:{type:"sap.ui.core.Item[]"},selected:{type:"boolean"},selectAll:{type:"boolean"}}},selectionFinish:{parameters:{selectedItems:{type:"sap.ui.core.Item[]"}}}},dnd:{draggable:false,droppable:true}},renderer:f});u.insertFontFaceStyle();h.apply(B.prototype,[true]);B.prototype.clone=function(e){var i=t.prototype.clone.apply(this,arguments),s=this._getList();if(s){i.syncPickerContent()}return i};B.prototype.open=function(){if(!this.isOpen()){this._bPickerIsOpening=true}this.syncPickerContent();return t.prototype.open.apply(this,arguments)};B.prototype.onsapend=function(e){if(e.isMarked("forwardFocusToParent")){this.focus()}};B.prototype.onsaphome=function(e){if(!this.getFocusDomRef().selectionStart&&this._hasTokens()){i.prototype.onsaphome.apply(this.getAggregation("tokenizer"),arguments)}e.setMarked()};B.prototype.onsapdown=function(e){if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();e.preventDefault();this.syncPickerContent();if(!this.isOpen()){this._oTraversalItem=this._getNextTraversalItem();if(this._oTraversalItem&&!this.isFocusInTokenizer()&&!this.isComposingCharacter()){this.updateDomValue(this._oTraversalItem.getText());this.selectText(0,this.getValue().length)}return}setTimeout(this.handleDownEvent.bind(this,e),0)};B.prototype.onsapup=function(e){if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();e.preventDefault();this.syncPickerContent();if(this.isFocusInTokenizer()||this.isOpen()){return}this._oTraversalItem=this._getPreviousTraversalItem();if(this._oTraversalItem){this.updateDomValue(this._oTraversalItem.getText());this.selectText(0,this.getValue().length)}};B.prototype.handleDownEvent=function(e){if(!this.isOpen()){return}var t=e.srcControl,i=t&&t.getDomRef(),s=m(this.getDomRef(),i),o=this.getPicker().getCustomHeader(),n=o&&o.getDomRef();e.setMarked();e.preventDefault();if(s&&this.getValueState()!=F.None){this._handleFormattedTextNav();return}if((s||m(n,i))&&this.getShowSelectAll()){this.focusSelectAll();return}this.focusFirstItemInList()};B.prototype.handleEndEvent=function(e){e.setMarked();e.preventDefault();var t=S.getVisibleItems(this.getItems()),i=t.length&&S.getListItem(t[t.length-1]);i&&i.focus()};B.prototype.handleHomeEvent=function(e){e.setMarked();e.preventDefault();if(this.getValueState()!==F.None){this._handleFormattedTextNav();e.stopPropagation(true);return}if(this.getShowSelectAll()){this.focusSelectAll();e.stopPropagation(true);return}this.focusFirstItemInList()};B.prototype.focusFirstItemInList=function(){var e=S.getVisibleItems(this.getItems()),t=e.length&&S.getListItem(e[0]);t&&t.focus()};B.prototype.isFocusInTokenizer=function(){return D.contains(this.getAggregation("tokenizer").getFocusDomRef(),document.activeElement)};B.prototype.onsapshow=function(e){e.preventDefault();this._handleItemToFocus();t.prototype.onsapshow.apply(this,arguments)};B.prototype._handlePopupOpenAndItemsLoad=B.prototype._valueStateNavDelegate=function(e,t){return{onsapdown:this.handleDownEvent,onsapup:this.focus,onsapend:this.handleEndEvent,onfocusout:function(i){e.removeStyleClass("sapMFocusable");if(!e.getDomRef().contains(i.relatedTarget)){t.forEach(}},onsapshow:this.close,onsaphide:this.close}};B.prototype._closePickerDelegate={onsaptabnext:function(){this.close();setTimeout(function(){this.closeValueStateMessage()}.bind(this),0)}};B.prototype._formattedTextLinksNav={onsapup:this.focus,onsapdown:this.handleDownEvent};B.prototype._handleFormattedTextNav=function(){var e=this.getPicker().getCustomHeader(),t=this.getValueStateLinks(),i=t?t[t.length-1]:null,s=t?t[0]:null;if(!e.getDomRef()||e.getDomRef()===document.activeElement){return}if(!this.oValueStateNavDelegate){this.oValueStateNavDelegate=this._valueStateNavDelegate(e,t);e.addEventDelegate(this.oValueStateNavDelegate,this)}e.getDomRef().setAttribute("tabindex","-1");e.addStyleClass("sapMFocusable");e.focus();t.forEach(function(e){e.getDomRef().setAttribute("tabindex","0");e.addEventDelegate(this._formattedTextLinksNav,this)},this);this.oMoveFocusBackToVSHeader=!this.oMoveFocusBackToVSHeader?{onsaptabprevious::this.oMoveFocusBackToVSHeader;i&&i.addEventDelegate(this._closePickerDelegate,this);s&&s.addEventDelegate(this.oMoveFocusBackToVSHeader,this)};B.prototype.onsaphide=function(e){this.onsapshow(e)};B.prototype._selectItemByKey=function(e){var t,i,s,o,n,r;if(!this.getEnabled()||!this.getEditable()){return}if(e){e.setMarked()}t=this._getUnselectedItems();for(o=0;o<t.length;o++){r=!(t[o].getKey()===undefined||t[o].getKey()===null)&&!t[o].isA("sap.ui.core.SeparatorItem");if(t[o].getText().toUpperCase()===this.getValue().toUpperCase()&&r){s=t[o];n=true;break}}if(n){i={item:s,id:s.getId(),key:s.getKey(),fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true,listItemUpdated:false};this._bPreventValueRemove=false;if(this.getValue()===""||typeof this.getValue()==="string"&&s.getText().toLowerCase().startsWith(this.getValue().toLowerCase())){if(S.getListItem(s).isSelected()){this.setValue("")}else{this.setSelection(i)}}}else{this._bPreventValueRemove=true}if(e){this.close()}};B.prototype.onsapenter=function(t){var i=this.getAggregation("tokenizer");e.prototype.onsapenter.apply(this,arguments);this._showAlreadySelectedVisualEffect();if(this.getValue()){this._selectItemByKey(t)}if(!this.getEditable()&&i.getHiddenTokensCount()&&t.target===this.getFocusDomRef()){i._togglePopup(i.getTokensPopup())}};B.prototype.onsaptabnext=function(e){var t=this.getValue();if(t){var i=this._getUnselectedItemsStartingText(t);if(i.length){this._selectItemByKey(e)}else{this._showWrongValueVisualEffect()}}};B.prototype.onsaptabprevious=B.prototype.onsaptabnext;B.prototype.onsapfocusleave=function(e){var t=this.isPlatformTablet(),i=V.byId(e.relatedControlId),s=i&&i.getFocusDomRef(),o=this.getValue(),n=this.getPicker(),r=this.getAggregation("tokenizer");if(!this._bPickerIsOpening&&(!n||!n.getFocusDomRef()||!s||!D.contains(n.getFocusDomRef(),s))){this.setValue(null);if(o){this.fireChangeEvent("",{value:o})}if(!D.contains(this.getDomRef(),document.activeElement)){r.setRenderMode(R.Narrow)}}if(n&&s){if(E(n.getFocusDomRef(),s)&&!t&&!this.isPickerDialog()){this.focus()}}};B.prototype.onfocusin=function(e){var t=this.getPicker();var i=false;var s=t&&t.getFocusDomRef();var o=t&&t.oPopup.getOpenState()||L.CLOSED;var n=o===L.CLOSING||o===L.CLOSED;var r=this.getPickerType()==="Dropdown";var a=this.getAggregation("tokenizer");if(r){i=s&&D.contains(s,e.relatedTarget)}if(this.getEditable()&&e.target===this.getDomRef("inner")){a.setRenderMode(R.Loose)}if(e.target===this.getFocusDomRef()){a.hasOneTruncatedToken()&&a.setFirstTokenTruncated(false);this.getEnabled()&&this.addStyleClass("sapMFocus");!n&&i&&this.handleInputValidation(e,false)}if(e.target===this.getOpenArea()&&r&&!this.isPlatformTablet()){this.focus()}if(!this.isOpen()&&this.shouldValueStateMessageBeOpened()){this.openValueStateMessage()}};B.prototype._handleItemTap=function(e){var t=l.closestTo(e.target);if(!t.isA("sap.m.CheckBox")&&!t.isA("sap.m.GroupHeaderListItem")){this._bCheckBoxClicked=false}};B.prototype._handleItemPress=function(e){if(this.isOpen()&&this._isListInSuggestMode()&&this.getPicker().oPopup.getOpenState()!==L.CLOSING){this.clearFilter();var t=this._getLastSelectedItem();if(t){S.getListItem(t).focus()}}};B.prototype._handleSelectionLiveChange=function(e){if(e.getParameter("selectAll")){return}var t=e.getParameter("listItem");var i=e.getParameter("listItems");var s=i&&i[i.length-1]||t;var o=this.isPickerDialog()?this.getPickerTextField():this;var n=this._getIsClick()&&!!s;var r=e.getParameter("selected");var a=S.getItemByListItem(this.getItems(),t);var l;if(i&&i.length){l=[];i.forEach(function(e){if(e.getType()==="Active"){l.push(S.getItemByListItem(this.getItems(),e))}},this)}if(t.getType()==="Inactive"){return}A(a,"The corresponding mapped item was not found on "+this);if(!a){return}var h={item:a,items:l,id:a.getId(),key:a.getKey(),selectAll:false,fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:true};if(r){this.fireChangeEvent(a.getText());this.setSelection(h)}else{this.fireChangeEvent(a.getText());this.removeSelection(h)}if(this._bCheckBoxClicked){o.setValue(this._sOldInput);if(n&&this.isOpen()&&this.getPicker().oPopup.getOpenState()!==L.CLOSING){s.focus();this._setIsClick(false)}}else{this._bCheckBoxClicked=true;this.setValue("");this.close()}};B.prototype.onkeydown=function(e){var i=this.getEditable(),s=this.getAggregation("tokenizer"),o=s.getTokens().length;t.prototype.onkeydown.apply(this,arguments);if(!this.getEnabled()){return}if((e.ctrlKey||e.metaKey)&&e.which===C.I&&o){e.preventDefault();if(i){this._togglePopover()}else{this._handleIndicatorPress()}return}this._bIsPasteEvent=(e.ctrlKey||e.metaKey)&&e.which===C.V;if(this.getValue().length===0&&(e.ctrlKey||e.metaKey)&&e.which===C.A&&this._hasTokens()){s.focus();s.selectAllTokens(true);e.preventDefault()}if(this.isPickerDialog()){this._sOldValue=this.getPickerTextField().getValue();this._iOldCursorPos=D(this.getFocusDomRef()).cursorPos()}this._bDoTypeAhead=!g.os.android&&e.which!==C.BACKSPACE&&e.which!==C.DELETE};B.prototype.oninput=function(e){t.prototype.oninput.apply(this,arguments);var i=e.srcControl,s=this.isPickerDialog(),o=s?this.getPickerTextField():this,n=o.getValueState();if(n===F.Error&&this._bAlreadySelected){o.setValueState(this._sInitialValueState);o.setValueStateText(this._sInitialValueStateText);this._bAlreadySelected=false}if(!this.getEnabled()||!this.getEditable()){return}this.syncPickerContent();this.handleInputValidation(e,this.isComposingCharacter());if(this._bIsPasteEvent){i.updateDomValue(this._sOldValue||e.target.value||"");return}if(this.isOpen()){setTimeout(this.highlightList.bind(this,this._sOldInput))}if(this._getItemsShownWithFilter()){this.toggleIconPressedStyle(true)}};B.prototype.filterItems=function(e){return _(this,e.items,e.value,true,false,this.fnFilter||y)};B.prototype.onkeyup=function(e){t.prototype.onkeyup.apply(this,arguments);if(!this.getEnabled()||!this.getEditable()){return}this._sOldValue=this.getValue();this._iOldCursorPos=D(this.getFocusDomRef()).cursorPos()};B.prototype._showWrongValueVisualEffect=function(){var e=this._getSuggestionsPopover();var t=this._sInitialValueStateText;var i=this._sInitialValueState;var s=t||this._oRbC.getText("VALUE_STATE_ERROR");var o=this;if(i===F.Error){return}if(e){e.updateValueState(F.Error,s,true);setTimeout(e.updateValueState.bind(e,o.getValueState(),s,true),1e3)}if(!this.isPickerDialog()){this.setValueState(F.Error);this.setValueStateText(this.getValueStateText()||s);setTimeout(this["setValueState"].bind(this,i||F.Error),1e3)}this._syncInputWidth(this.getAggregation("tokenizer"))};B.prototype._showAlreadySelectedVisualEffect=function(){var e=this._oRb.getText("VALUE_STATE_ERROR_ALREADY_SELECTED");if(!this.getValue()){return}var t=!!this.getSelectedItems().filter(function(e){return e.getText().toLowerCase()===this.getValue().toLowerCase()},this).length;var i=this.getItems().filter(function(e){return e.getText().toLowerCase()===this.getValue().toLowerCase()},this).length;if(t){if(!this._bAlreadySelected){this._sInitialValueState=this.getValueState();this._sInitialValueStateText=this.getValueStateText()}this._bAlreadySelected=true;this.setValueStateText(e);this.setValueState("Error");return}else if(i){return}else{this._showWrongValueVisualEffect()}};B.prototype._hasShowSelectedButton=function(){return true};B.prototype.forwardEventHandlersToSuggPopover=function(e){t.prototype.forwardEventHandlersToSuggPopover.apply(this,arguments);e.setShowSelectedPressHandler(this._filterSelectedItems.bind(this))};B.prototype.configPicker=function(e){var t=this.getRenderer(),i=t.CSS_CLASS_MULTICOMBOBOX;e.setHorizontalScrolling(false).addStyleClass(t.CSS_CLASS_COMBOBOXBASE+"Picker").addStyleClass(i+"Picker").addStyleClass(i+"Picker-CTX").attachBeforeOpen(this.onBeforeOpen,this).attachAfterOpen(this.onAfterOpen,this).attachBeforeClose(this.onBeforeClose,this).attachAfterClose(this.onAfterClose,this).addEventDelegate({onBeforeRendering:this.onBeforeRenderingPicker,onAfterRendering:this.onAfterRenderingPicker},this)};B.prototype._configureList=function(e){var t=10;if(!e){return}e.applyAriaRole("listbox");e.setMode(x.MultiSelect);e.setIncludeItemInSelection(true);e.setGrowingThreshold(t);e.attachBrowserEvent("tap",this._handleItemTap,this).attachSelectionChange(this._handleSelectionLiveChange,this).attachItemPress(this._handleItemPress,this);e.addEventDelegate({onAfterRendering:this.onAfterRenderingList,onfocusin:this.onFocusinList},this);this.getShowSelectAll()&&this.createSelectAllHeaderToolbar(e)};B.prototype._decoratePopupInput=function(e){t.prototype._decoratePopupInput.apply(this,arguments);if(!e||!e.isA(["sap.m.InputBase"])){return}e.attachSubmit(function(t){var i=e.getValue();if(i){this.setValue(i);this._selectItemByKey();this.setValue(this._sOldInput);this.close()}}.bind(this));e.addEventDelegate({onfocusout:this._handleInputFocusOut},this);e.attachChange(this._handleInnerInputChange.bind(this));return e};B.prototype._handleOkPress=function(){t.prototype._handleOkPress.apply(this,arguments);if(this.getValue()){this._selectItemByKey()}};B.prototype._handleInnerInputChange=function(e){if(e.getParameter("value")===""){this._sOldInput="";this.clearFilter()}};B.prototype.onBeforeRendering=function(){var e=this.getEditable();var i=this.getAggregation("tokenizer");var s=this.getItems();t.prototype.onBeforeRendering.apply(this,arguments);this._bInitialSelectedKeysSettersCompleted=true;i.setEnabled(this.getEnabled());i.setEditable(e);this._updatePopoverBasedOnEditMode(e);if(!s.length){this._clearTokenizer()}if(this._getList()){this.syncPickerContent(true)}this.toggleSelectAllVisibility(this.getShowSelectAll());if(this._sOldInput&&s.length&&this.isOpen()){k(this.getItems(),this.filterItems({value:this._sOldInput,items:s}));setTimeout(this.highlightList.bind(this,this._sOldInput))}this._deregisterResizeHandler();this._synchronizeSelectedItemAndKey();this.setProperty("hasSelection",!!this.getSelectedItems().length);if(!this._bAlreadySelected){this._sInitialValueStateText=this.getValueStateText()}if(this.getValueState()!==F.Error){this._sInitialValueState=this.getValueState()}if(this.getShowClearIcon()){this._getClearIcon().setVisible(this.shouldShowClearIcon())}else if(this._oClearIcon){this._getClearIcon().setVisible(false)}};B.prototype.syncPickerContent=function(e){var t,i;var s=this.getPicker();var o=this.getAggregation("tokenizer");if(!s){s=this.createPicker(this.getPickerType());this._updateSuggestionsPopoverValueState();e=true}if(e){i=this._getList();t=this.getEditable()?this.getItems():this.getSelectedItems();this._synchronizeSelectedItemAndKey();var n=o.getTokens();var r=n.findIndex(;i.destroyItems();this._clearTokenizer();this._fillList(t);this.bShouldRestoreTokenizerFocus=r>-1;this.iFocusedIndex=r;if(i.getItemNavigation()){this._iFocusedIndex=i.getItemNavigation().getFocusedIndex()}}return s};B.prototype._registerResizeHandler=function(){A(!this._iResizeHandlerId,"Resize handler already registered");this._iResizeHandlerId=d.register(this,this._onResize.bind(this))};B.prototype._deregisterResizeHandler=function(){if(this._iResizeHandlerId){d.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null}};B.prototype._onResize=function(){var e=this.getAggregation("tokenizer");e.setMaxWidth(this._calculateSpaceForTokenizer());this._syncInputWidth(e);this._handleNMoreAccessibility()};B.prototype.onAfterRenderingPicker=function(){var e=this["_onAfterRendering"+this.getPickerType()];var t=this.getDomRef().getBoundingClientRect().width;var i=getComputedStyle(this.getDomRef()).getPropertyValue("--sPopoverMaxWidth");if(e){e.call(this)}if(t<=parseInt(i)&&!g.system.phone){this.getPicker().getDomRef().style.setProperty("max-width","40rem")}else{this.getPicker().getDomRef().style.setProperty("max-width",t+"px")}};B.prototype.onBeforeOpen=function(){t.prototype.onBeforeOpen.apply(this,arguments);var e=this._getSuggestionsPopover();var i=this["_onBeforeOpen"+this.getPickerType()],s=this.getFocusDomRef();if(s){s.setAttribute("aria-controls",this.getPicker().getId())}this.addContent();this._aInitiallySelectedItems=this.getSelectedItems();this._synchronizeSelectedItemAndKey();if(i){i.call(this)}e.resizePopup(this)};B.prototype.onAfterOpen=function(){var e=this.getFocusDomRef(),t=this.getValueStateLinks();e&&this.getFocusDomRef().setAttribute("aria-expanded","true");this._bPickerIsOpening=false;if(!this.isPlatformTablet()){this.getPicker().setInitialFocus(this)}t.forEach(function(e){e.addDelegate({onAfterRendering:function(){if(this.getFocusDomRef()){this.getFocusDomRef().setAttribute("tabindex","-1")}}},e)});this.closeValueStateMessage()};B.prototype.onBeforeClose=function(){t.prototype.onBeforeClose.apply(this,arguments)};B.prototype.onAfterClose=function(){var e=!D.contains(this.getDomRef(),document.activeElement)||this.isPickerDialog(),t=this.getFocusDomRef();t&&this.getFocusDomRef().setAttribute("aria-expanded","false");this.toggleIconPressedStyle(false);this.clearFilter();!this.isComposingCharacter()&&!this._bPreventValueRemove&&this.setValue("");this._sOldValue="";this._sOldInput="";this._getSuggestionsPopover()._sTypedInValue="";if(this.isPickerDialog()){this.getPickerTextField().setValue("");this.getFilterSelectedButton()&&this.getFilterSelectedButton().setPressed(false)}this.fireSelectionFinish({selectedItems:this.getSelectedItems()});this.getAggregation("tokenizer").setRenderMode(e?R.Narrow:R.Loose);if(this.getValueState()==F.Error&&document.activeElement===this.getFocusDomRef()){this.selectText(0,this.getValue().length)}};B.prototype._onBeforeOpenDialog=function(){};B.prototype._onBeforeOpenDropdown=function(){var e=this.getPicker(),t=this.getDomRef(),i;if(t&&e){i=t.offsetWidth/parseFloat(a.BaseFontSize)+"rem";e.setContentMinWidth(i)}};B.prototype.getFilterSelectedButton=function(){return this._getSuggestionsPopover().getFilterSelectedButton()};B.prototype._filterSelectedItems=function(e,t){var i=e.oSource,s,o,n=this.getPickerTextField()?this.getPickerTextField().getValue():"",r=i&&i.getPressed&&i.getPressed()||t,a=S.getVisibleItems(this.getItems()),l=this.getItems(),h=this.getSelectedItems(),u=null;if(r){a.forEach(function(e){o=h.indexOf(e)>-1?true:false;s=S.getListItem(e);if(!s){return}if(s.isA("sap.m.GroupHeaderListItem")){s.setVisible(false);u=s}else{s.setVisible(o);if(o&&u){u.setVisible(true)}}},this)}else{k(this.getItems(),this.filterItems({value:n,items:l}))}this.manageSelectAllCheckBoxState()};B.prototype.revertSelection=B.prototype.setSelection=function(e){var t=this._getList(),i;if(e.item&&this.isItemSelected(e.item)){return}if(!e.item){return}if(!e.items||!e.items.length||e.selectAll){i=[e.item]}else{i=e.items}i.forEach(function(i){if(!e.listItemUpdated&&S.getListItem(i)&&t){t.setSelectedItem(S.getListItem(i),true)}var o=new s({key:i.getKey()});o.setText(i.getText());i.data(S.CSS_CLASS+"Token",o);this.getAggregation("tokenizer").addToken(o);this.addAssociation("selectedItems",i,e.suppressInvalidate);var n=this.getSelectedKeys();var r=this.getKeys([i])[0];if(r===""||n.indexOf(r)===-1){n.push(r);this.setProperty("selectedKeys",n,e.suppressInvalidate)}if(e.fireChangeEvent){this.fireSelectionChange({changedItem:e.item,changedItems:e.items,selectAll:e.selectAll,selected:true})}},this);if(!this.getProperty("hasSelection")&&this.getSelectedItems().length){this.setProperty("hasSelection",true)}this.setValue("");if(e.fireFinishEvent){if(!this.isOpen()){this.fireSelectionFinish({selectedItems:this.getSelectedItems()})}}};B.prototype.removeSelection=function(e){var t,i,s;if(e.item&&!this.isItemSelected(e.item)){return}if(!e.item){return}if(!e.items||!e.items.length||e.selectAll){t=[e.item]}else{t=e.items}t.forEach(function(t){this.removeAssociation("selectedItems",t,e.suppressInvalidate);i=this.getSelectedKeys();s=i.indexOf(t.getKey());i.splice(s,1);this.setProperty("selectedKeys",i,e.suppressInvalidate);if(!e.listItemUpdated&&S.getListItem(t)){var o=S.getListItem(t);this._getList().setSelectedItem(o,false)}if(!e.tokenUpdated){var n=b(t);t.data(S.CSS_CLASS+"Token",null);this.getAggregation("tokenizer").removeToken(n)}if(e.fireChangeEvent){this.fireSelectionChange({changedItem:e.item,changedItems:e.items,selectAll:e.selectAll,selected:false})}},this);if(this.getProperty("hasSelection")&&!this.getSelectedItems().length){this.setProperty("hasSelection",false)}if(e.fireFinishEvent){if(!this.isOpen()){this.fireSelectionFinish({selectedItems:this.getSelectedItems()})}}};B.prototype._synchronizeSelectedItemAndKey=function(){var e=this.getSelectedKeys();var t=this.getKeys(this.getSelectedItems());if(!e.length){P.info("Info: _synchronizeSelectedItemAndKey() the MultiComboBox control does not contain any item on ",this);return}for(var i=0,s=null,o=null,n=e.length;i<n;i++){s=e[i];if(t.indexOf(s)>-1){continue}o=this.getItemByKey(""+s);if(o){this.setSelection({item:o,id:o.getId(),key:o.getKey(),fireChangeEvent:false,suppressInvalidate:true,listItemUpdated:false})}}};B.prototype.updateItems=function(e){var i=s,o=this.getSelectedItems().map(i),n=this.getSelectedKeys();var r=t.prototype.updateItems.apply(this,arguments);o=this.getSelectedItems().map(i).filter(function(e){return o.indexOf(e)>-1});s=n.concat(o);this.setSelectedKeys(s);return r};B.prototype._getSelectedItemsOf=function(e){for(var t=0,i=e.length,s=[];t<i;t++){if(S.getListItem(e[t]).isSelected()){s.push(e[t])}}return s};B.prototype._getLastSelectedItem=function(){var e=this.getAggregation("tokenizer").getTokens();var t=e.length?e[e.length-1]:null;if(!t){return null}return this._getItemByToken(t)};B.prototype._getFocusedListItem=function(){if(!document.activeElement){return null}var e=V.byId(document.activeElement.id);if(this._getList()&&m(this._getList().getFocusDomRef(),e.getFocusDomRef())){return e}return null};B.prototype._getFocusedItem=B.prototype._hasTokens=function(){return this.getAggregation("tokenizer").getTokens().length>0};B.prototype._decorateListItem=function(e){e.addDelegate({onkeydown:function(e){if((e.ctrlKey||e.metaKey)&&e.which==C.A){e.setMarked();e.preventDefault();var t=S.getSelectableItems(this.getItems());var i=this._getSelectedItemsOf(t);if(i.length!==t.length){t.forEach(function(e){this.setSelection({item:e,items:t,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}else{t.forEach(function(e){this.removeSelection({item:e,items:t,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}}},onmousedown:function(e){this._setIsClick(true)},onkeyup:function(e){var t=null;if(e.which==C.SPACE&&this.isOpen()&&this._isListInSuggestMode()){this.open();t=this._getLastSelectedItem();if(t){S.getListItem(t).focus()}return}}},true,this);e.addEventDelegate({onsapbackspace:function(e){e.preventDefault()},onsapshow:function(e){e.setMarked();this.close()},onsaphide:function(e){this.onsapshow(e)},onsapenter:onsaphome:this.handleHomeEvent.bind(this),onsapend:this.handleEndEvent.bind(this),onsapup:function(e){e.setMarked();e.preventDefault();var t=S.getVisibleItems(this.getItems());var i=t[0];var s=l.closestTo(document.activeElement);if(s!==S.getListItem(i)){return}if(this.getShowSelectAll()){this.focusSelectAll()}else if(this.getValueState()!==F.None){this._handleFormattedTextNav()}else{this.focus()}e.stopPropagation(true)},onfocusin:function(e){this.addStyleClass(this.getRenderer().CSS_CLASS_MULTICOMBOBOX+"Focused")},onfocusout:function(e){this.removeStyleClass(this.getRenderer().CSS_CLASS_MULTICOMBOBOX+"Focused")},onsapfocusleave:function(e){var t=this.getAggregation("picker");var i=V.byId(e.relatedControlId);if(t&&i&&E(t.getFocusDomRef(),i.getFocusDomRef())){if(e.srcControl){e.srcControl.focus()}}},onsaptabnext:function(){this.getPicker().close()},onsaptabprevious:function(){this.getPicker().close()}},this);if(g.support.touch){e.addEventDelegate({ontouchstart:)}};B.prototype._handleInputFocusOut=function(e){var t=this.isPickerDialog(),i=t?this.getPickerTextField():this,s=this._sOldInput||this._sOldValue||"",o=t&&e&&e.relatedTarget&&e.relatedTarget.id.includes("-popup-closeButton");if(!o){i.updateDomValue(s)}this._bIsPasteEvent=null};B.prototype.onItemChange=function(e){var i=t.prototype.onItemChange.call(this,e,this.getShowSecondaryValues());var s=e.getParameters();T({item:e.getSource(),propName:s.name,propValue:s.newValue});return i};B.prototype._handleIndicatorPress=function(){var e,t=this.getAggregation("tokenizer");if(this.getEditable()){this.syncPickerContent();this._filterSelectedItems({},true);this.focus();e=this.getPicker();e.open()}else{t._togglePopup(t.getTokensPopup())}if(this.isPickerDialog()){this.getFilterSelectedButton().setPressed(true);this.bOpenedByKeyboardOrButton=true}};B.prototype._togglePopover=function(){var e=this.getPicker();if(!e){e=this.syncPickerContent(true)}if(e.isOpen()){e.close()}else{e.open()}};B.prototype._createTokenizer=function(){var e=new i({renderMode:R.Narrow}).attachTokenDelete(this._handleTokenDelete,this);e.getTokensPopup().attachAfterOpen(.attachAfterClose(function(){var t=e.getTokens();if(t.length===1&&!t[0].getTruncated()){e.setFirstTokenTruncated(true)}});e.addEventDelegate({onAfterRendering:this._onAfterRenderingTokenizer},this);e.setShouldRenderTabIndex(false);return e};B.prototype._onAfterRenderingTokenizer=function(){var e=this.getAggregation("tokenizer");if(this.getEditable()){e.addStyleClass("sapMTokenizerIndicatorDisabled")}else{e.removeStyleClass("sapMTokenizerIndicatorDisabled")}setTimeout(this._syncInputWidth.bind(this,e),0);setTimeout(this._handleNMoreAccessibility.bind(this),0);setTimeout(e["scrollToEnd"].bind(e),0)};B.prototype._handleTokenDelete=function(e){var t=e.getParameter("tokens");var i=this.getSelectedItems();this._removeSelection(t);if(i.length!==S.getSelectableItems(this.getItems())){!this.isPickerDialog()&&!this.isFocusInTokenizer()&&this.focus();this.fireChangeEvent("")}};B.prototype._removeSelection=function(e){var t=this.getAggregation("tokenizer");e.forEach(function(e){var i=e&&this._getItemByToken(e);if(!this.getEditable()||!this.getEnabled()||!i||!this.isItemSelected(i)||!i.getEnabled()||!e.getEditable()){return}this.removeSelection({item:i,id:i.getId(),key:i.getKey(),tokenUpdated:true,fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true});e.destroy();if(this.getSelectedItems().length>0){var s=t.getTokens();s[s.length-1].focus()}else{this.focus()}},this)};B.prototype.onAfterRenderingList=function(){var e=document.activeElement===this.getFocusDomRef();var t=l.closestTo(document.activeElement);var i=t&&t.isA("sap.m.Token");var s=this._getList();var o=s?s.getVisibleItems():[];if(this.getEditable()&&!e&&!i&&o[this._iFocusedIndex]){o[this._iFocusedIndex].focus();this._iFocusedIndex=null}this.manageSelectAllCheckBoxState()};B.prototype.onFocusinList=function(){var e=this._getList();if(this._bListItemNavigationInvalidated&&this._getList().getItemNavigation()){e.getItemNavigation().setSelectedIndex(this._iInitialItemFocus);this._bListItemNavigationInvalidated=false}this._getSuggestionsPopover().updateListDataAttributes(e)};B.prototype.onAfterRendering=function(){var e=this.getAggregation("tokenizer");var i;t.prototype.onAfterRendering.apply(this,arguments);this._registerResizeHandler();setTimeout(bind(this),0);if(this.bShouldRestoreTokenizerFocus){i=e.getTokens()[this.iFocusedIndex];if(i){i.focus()}this.bShouldRestoreTokenizerFocus=false}};B.prototype.onfocusout=function(e){this.isOpen()&&this._handleInputFocusOut();this.removeStyleClass("sapMFocus");if(this.getValueState()===F.Error&&this.getValueStateText()===this._oRb.getText("VALUE_STATE_ERROR_ALREADY_SELECTED")){this.setValueState(this._sInitialValueState);this.setValueStateText(this._sInitialValueStateText)}t.prototype.onfocusout.apply(this,arguments)};B.prototype.onpaste=function(e){var t;var i=false;var s=this.getSelectedItems();t=e.originalEvent.clipboardData.getData("text/plain");if(t.length&&t.endsWith("\r\n")){t=t.substring(0,t.lastIndexOf("\r\n"))}var o=t.split(/\r\n|\r|\n|\t/g);if(o&&o.length>1){S.getSelectableItems(this.getItems()).filter(function(e){return s.indexOf(e)===-1}).forEach(function(e){if(o.indexOf(e.getText())>-1){i=true;this.setSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true,listItemUpdated:false})}},this)}if(i){e.stopPropagation();e.preventDefault()}};B.prototype.onsapbackspace=function(e){var t=this.getAggregation("tokenizer");var i=t.getTokens();var s=i.filter(function(e){return e.getSelected()});if(!this.getEnabled()||!this.getEditable()){e.preventDefault();return}if(this.getCursorPosition()>0||this.getValue().length>0){return}if(s.length>0){this._removeAllTokens();return}if(document.activeElement===this.getFocusDomRef()){i[i.length-1]&&i[i.length-1].focus()}e.preventDefault()};B.prototype._removeAllTokens=function(){var e=this.getAggregation("tokenizer");var t=e.getTokens().filter(function(e){return e.getSelected()});if(!t.length){return}this._removeSelection(t);this.fireChangeEvent("");this.invalidate()};B.prototype.onsapdelete=B.prototype.onsapbackspace;B.prototype.onsapnext=function(e){var t=this.getAggregation("tokenizer");if(e.isMarked()){return}var i=l.closestTo(document.activeElement);if(!i){return}if(i===t||t.$().find(i.$()).length>0&&this.getEditable()){t.scrollToEnd();this.focus()}};B.prototype.onsapprevious=function(e){if(this.getCursorPosition()===0&&!I(this.getFocusDomRef())){if(e.srcControl===this){i.prototype.onsapprevious.apply(this.getAggregation("tokenizer"),arguments)}}};B.prototype.onclick=function(e){var t=this.getEditable(),i=this.getEnabled(),s=e.target.className.indexOf("sapMTokenizerIndicator")>-1;if(t&&i&&s){e.preventDefault();this._handleIndicatorPress()}};B.prototype.ontap=function(e){t.prototype.ontap.apply(this,arguments);var i=this.getOpenArea();if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();if(this.isPickerDialog()&&i.contains(e.target)){this.open()}};B.prototype.getOpenArea=function(){if(this.isPickerDialog()){return this.getDomRef()}else{return t.prototype.getOpenArea.apply(this,arguments)}};B.prototype._getItemsStartingWithPerTerm=function(e,t){var i=[],s=t?S.getEnabledItems(this.getItems()):S.getSelectableItems(this.getItems()),o=this.fnFilter?this.fnFilter:y;s.forEach(function(t){if(o(e,t)){i.push(t)}},this);return i};B.prototype._getItemsStartingWith=function(e,t){var i=[],s=t?S.getEnabledItems(this.getItems()):S.getSelectableItems(this.getItems());s.forEach(function(t){if(typeof e==="string"&&e!==""&&t.getText().toLowerCase().startsWith(e.toLowerCase())){i.push(t)}},this);return i};B.prototype._getUnselectedItemsStartingText=function(e){var t=[];this._getUnselectedItems().forEach(function(i){if(typeof e==="string"&&e!==""&&i.getText().toLowerCase().startsWith(e.toLowerCase())){t.push(i)}},this);return t};B.prototype.getCursorPosition=function(){return this._$input.cursorPos()};B.prototype._selectPreviousItemsOf=function(e){var t;do{t=true;var i=this._getPreviousVisibleItemOf(e);if(i){var s=S.getListItem(i);if(s){t=S.getListItem(i).getSelected()}}this.setSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true});e=i}while(!t)};B.prototype._getNextVisibleItemOf=function(e){var t=S.getSelectableItems(this.getItems());var i=t.indexOf(e)+1;if(i<=0||i>t.length-1){return null}return t[i]};B.prototype._getPreviousVisibleItemOf=function(e){var t=S.getSelectableItems(this.getItems());var i=t.indexOf(e)-1;if(i<0){return null}return t[i]};B.prototype._getNextUnselectedItemOf=function(e){var t=this._getUnselectedItems();var i=t.indexOf(e)+1;if(i<=0||i>t.length-1){return null}return t[i]};B.prototype._getPreviousUnselectedItemOf=function(e){var t=this._getUnselectedItems();var i=t.indexOf(e)-1;if(i<0){return null}return t[i]};B.prototype._getNextTraversalItem=function(){var e=this.getValue();var t=this._getUnselectedItemsPerTerm(e);if(t.indexOf(this._oTraversalItem)>-1&&this._oTraversalItem.getText()===this.getValue()){return this._getNextUnselectedItemOf(this._oTraversalItem)}return t[0]};B.prototype._getPreviousTraversalItem=function(){var e=this.getValue();var t=this._getUnselectedItemsPerTerm(e);if(t.indexOf(this._oTraversalItem)>-1&&this._oTraversalItem.getText()===this.getValue()){return this._getPreviousUnselectedItemOf(this._oTraversalItem)}return t[t.length-1]};B.prototype.setSelectedItems=function(e){this.removeAllSelectedItems();if(!e||!e.length){return this}if(!Array.isArray(e)){P.warning("Warning: setSelectedItems() has to be an array of sap.ui.core.Item instances or of valid sap.ui.core.Item IDs",this);return this}e.forEach(function(e){if(!(e instanceof p)&&typeof e!=="string"){P.warning("Warning: setSelectedItems() has to be an array of sap.ui.core.Item instances or of valid sap.ui.core.Item IDs",this);return}if(typeof e==="string"){e=V.byId(e)}this.setSelection({item:e?e:null,id:e?e.getId():"",key:e?e.getKey():"",suppressInvalidate:true})},this);return this};B.prototype.addSelectedItem=function(e){if(!e){return this}if(typeof e==="string"){e=V.byId(e)}this.setSelection({item:e?e:null,id:e?e.getId():"",key:e?e.getKey():"",fireChangeEvent:false,suppressInvalidate:true});return this};B.prototype.removeSelectedItem=function(e){if(!e){return null}if(typeof e==="string"){e=V.byId(e)}if(!this.isItemSelected(e)){return null}this.removeSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:false,suppressInvalidate:true});return e};B.prototype.removeAllSelectedItems=function(){var e=[];var t=this.getAssociation("selectedItems",[]);t.forEach(function(t){var i=this.removeSelectedItem(t);if(i){e.push(i.getId())}},this);return e};B.prototype.removeSelectedKeys=function(e){var t,i=[];if(!e||!e.length||!Array.isArray(e)){return i}e.forEach(function(e){t=this.getItemByKey(e);if(t){this.removeSelection({item:t?t:null,id:t?t.getId():"",key:t?t.getKey():"",fireChangeEvent:false,suppressInvalidate:true});i.push(t)}},this);return i};B.prototype.setSelectedKeys=function(e){if(this._bInitialSelectedKeysSettersCompleted){this.setProperty("selectedKeys",[],true);this.removeAllSelectedItems()}this.addSelectedKeys(e);this._bInitialSelectedKeysSettersCompleted=true;return this};B.prototype.addSelectedKeys=function(e){var t,i=[];e=this.validateProperty("selectedKeys",e);e.forEach(function(e){var t=this.getItemByKey(e);if(t){this.addSelectedItem(t)}else if(e!=null){i.push(e)}},this);if(i.length>0){t=this.getProperty("selectedKeys").filter(function(e){return i.indexOf(e)===-1});i=t.concat(i);this.setProperty("selectedKeys",i,true)}return this};B.prototype._getUnselectedItems=function(){var e=D(S.getSelectableItems(this.getItems())).not(this.getSelectedItems()).get();if(!this.isOpen()){return e.filter(function(e){return!e.isA("sap.ui.core.SeparatorItem")})}return e};B.prototype._getUnselectedItemsPerTerm=function(e){var t=D(S.getSelectableItems(this.getItems())).not(this.getSelectedItems()).get();var i=[];var s=this.fnFilter?this.fnFilter:y;if(!this.isOpen()){t=t.filter(function(e){return!e.isA("sap.ui.core.SeparatorItem")})}t.forEach(function(t){if(s(e,t)){i.push(t)}},this);return i};B.prototype.getSelectedItems=function(){var e=[],t=this.getAssociation("selectedItems")||[];t.forEach(this);return e};B.prototype.getWidth=B.prototype._updatePopoverBasedOnEditMode=function(e){var t=this._getList(),i=this._getSuggestionsPopover();if(t&&e!==this._bPrevEditable&&e){i.addContent(t)}this._bPrevEditable=e};B.prototype._mapItemToListItem=function(e){var t,i,s,o=this.getRenderer();if(!e){return null}t=S.createListItemFromCoreItem(e,this.getShowSecondaryValues());this._decorateListItem(t);if(e.isA("sap.ui.core.SeparatorItem")){return t}i=o.CSS_CLASS_MULTICOMBOBOX+"Item";s=this.isItemSelected(e)?i+"Selected":"";t.addStyleClass(i+" "+s);this.setSelectable(e,e.getEnabled());return t};B.prototype.setSelectable=function(e,i){t.prototype.setSelectable.call(this,e,i);var s=b(e);if(s){s.setVisible(i)}};B.prototype._fillList=function(){var e;var t;var i;var o=this._getList();var n=this.getEditable()?this.getItems():this.getSelectedItems();if(!o){return}o.destroyItems();for(var r=0,a,l=n.length;r<l;r++){a=this._mapItemToListItem(n[r]);if(a.isA("sap.m.GroupHeaderListItem")){this._getList().addItemGroup(null,a)}else{this._getList().addItem(a)}if(this.isItemSelected(n[r])){this._getList().setSelectedItem(a,true)}}e=this.getAggregation("tokenizer");t=this.getSelectedItems();for(var h=0;h<t.length;h++){i=t[h];var u=new s({key:i.getKey(),text:i.getText()});i.data(S.CSS_CLASS+"Token",u);e.addToken(u,true)}};B.prototype.handleInputValidation=function(e,t){var i=e.target.value,s=this.isValueValid(i),o,n,r;var a=e.srcControl;if(!s&&i!==""&&!t){this._handleFieldValidationState(a);return}r=this._getItemsStartingWith(i,true);if(!t||this._bIsPasteEvent){this._handleTypeAhead(i,r,a)}o=this.getItems();if(this.isPickerDialog()){n=this.getFilterSelectedButton();if(n!=null&&n.getPressed()){n.setPressed(false)}}k(this.getItems(),this.filterItems({value:i,items:o}));this.manageSelectAllCheckBoxState();this._sOldInput=i;if((!this.getValue()||!s)&&!this.bOpenedByKeyboardOrButton&&!this.isPickerDialog()){this.close()}else{this.open()}};B.prototype.isValueValid=function(e){var t=this._getItemsStartingWith(e,true);var i=this._getItemsStartingWithPerTerm(e,true);return t.length||i.length};B.prototype._handleTypeAhead=function(e,t,i){var s,o;if(!this._bDoTypeAhead){return}s=this.getSelectedItems();o=t.filter(function(e){return s.indexOf(e)===-1});v(e,i,o)};B.prototype._handleFieldValidationState=function(e){if(this._sOldInput&&this.isValueValid(this._sOldInput)){e.updateDomValue(this._sOldInput)}else if(this._sOldValue&&this.isValueValid(this._sOldValue)){e.updateDomValue(this._sOldValue)}else{e.updateDomValue("");e.setProperty("effectiveShowClearIcon",false)}if(this._iOldCursorPos){D(e.getFocusDomRef()).cursorPos(this._iOldCursorPos)}this._showWrongValueVisualEffect()};B.prototype.init=function(){t.prototype.init.apply(this,arguments);this._bInitialSelectedKeysSettersCompleted=false;this._bListItemNavigationInvalidated=false;this._iInitialItemFocus=-1;this._bCheckBoxClicked=true;this._bPreventValueRemove=false;this._oTokenizer=this._createTokenizer();this.setAggregation("tokenizer",this._oTokenizer);this._aInitiallySelectedItems=[];this._oRbC=V.getLibraryResourceBundle("sap.ui.core");this._fillList()};B.prototype.handleItemRemoval=function(e){this.removeSelection({item:e,id:e?e.getId():"",key:e?e.getKey():"",fireChangeEvent:false,suppressInvalidate:true,listItemUpdated:true})};B.prototype.isItemSelected=B.prototype._clearTokenizer=B.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._deregisterResizeHandler();if(this._oTokenizer){this._oTokenizer.destroy();this._oTokenizer=null}this._oRbC=null;this.oValueStateNavDelegate=null;this._sInitialValueState=null};B.prototype.destroyItems=function(){this.setProperty("selectedKeys",[]);this._clearTokenizer();return this.destroyAggregation("items")};B.prototype._getItemByToken=function(e){return S.getItemBy(this.getItems(),e,"Token")};B.prototype._getItemByValue=function(e){var t=S.getSelectableItems(this.getItems());for(var i=0;i<t.length;i++){if(t[i].getText().toLowerCase()===e.toLowerCase()){return t[i]}}};B.prototype._handleItemToFocus=function(){if(this.isOpen()){return}this.syncPickerContent();var e,t,i=V.byId(document.activeElement.id),s=this.getSelectedItems(),o=S.getSelectableItems(this.getItems()),n=this._getList(),r=n&&n.getItemNavigation(),a=this.getValue(),l=this.getPicker();if(i&&i.isA("sap.m.Token")){t=this._getItemByToken(i)}else if(a){t=this._getItemByValue(a)}if(!t){t=s.length?S.getItemByListItem(this.getItems(),this._getList().getSelectedItems()[0]):o[0]}e=S.getVisibleItems(this.getItems()).indexOf(t);if(r){r.setSelectedIndex(e)}else{this._bListItemNavigationInvalidated=true;this._iInitialItemFocus=e}if(!t){l.setInitialFocus(this)}else{l.setInitialFocus(n)}};B.prototype.getAccessibilityInfo=function(){var e=this.getSelectedItems().map(function(e){return e.getText()}).join(" ");var i=t.prototype.getAccessibilityInfo.apply(this,arguments);i.type=V.getLibraryResourceBundle("sap.m").getText("ACC_CTR_TYPE_MULTICOMBO");i.description=(this.getValueDescriptionInfo()+" "+e).trim();return i};B.prototype.getValueDescriptionInfo=function(){if(this.getValue()){return this.getValue()}return this._hasTokens()?"":sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("INPUTBASE_VALUE_EMPTY")};B.prototype._setIsClick=function(e){this._bIsClick=e};B.prototype._getIsClick=function(){return this._bIsClick};B.prototype._calculateSpaceForTokenizer=function(){if(this.getDomRef()){var e,t=this.getDomRef().getBoundingClientRect().width,i=this._calculateIconsSpace(),s=this.$().find(".sapMInputBaseInner"),o=["min-width","padding-right","padding-left"],n=o.reduce(function(e,t){return e+(parseInt(s.css(t))||0)},0);e=t-(i+n);e=e<0?0:e;return e+"px"}else{return null}};B.prototype._syncInputWidth=function(e){var t=this.getDomRef("inner"),i,s;if(!t||e&&!e.getDomRef()){return}s=parseFloat(e.getDomRef().getBoundingClientRect().width.toFixed(2));i=this._calculateIconsSpace();t.style.width="calc(100% - "+parseFloat(i+s)+"px)"};B.prototype._handleNMoreAccessibility=function(){var e=O.getStaticId("sap.m","MULTICOMBOBOX_OPEN_NMORE_POPOVER"),t=this.getAggregation("tokenizer"),i=this.getFocusDomRef(),s=i&&i.getAttribute("aria-describedby"),o=s?s.split(" "):[],n=o.indexOf(e),r=this.getEnabled(),a=!this.getEditable()&&t&&t.getHiddenTokensCount();if(a&&n===-1){o.push(e);r&&this.getFocusDomRef().setAttribute("aria-keyshortcuts","Enter")}else if(n!==-1&&!a){o.splice(n,1);this.getFocusDomRef().removeAttribute("aria-keyshortcuts")}if(i&&o.length){i.setAttribute("aria-describedby",o.join(" ").trim())}};B.prototype.applyShowItemsFilters=function(){this.syncPickerContent();k(this.getItems(),this.filterItems({value:this.getValue()||"_",items:this.getItems()}));this.manageSelectAllCheckBoxState()};B.prototype.showItems=function(e){var i=true,s=this.fnFilter;if(typeof e==="function"){this.syncPickerContent();this.setFilterFunction(e||function(){return true});i=this.filterItems({value:this.getValue()||"_",items:this.getItems()}).items.length>0;this.setFilterFunction(s)}if(i){t.prototype.showItems.apply(this,arguments)}};B.prototype.createSelectAllHeaderToolbar=function(e){e=e||this._getList();if(!e||e.getHeaderToolbar()){return}var t=new n({select:function(e){var t=e.getSource(),i=S.getSelectableItems(this.getItems()),s=this._getSelectedItemsOf(i);if(e.getParameter("selected")){var o=i.filter(;o.forEach(function(e){this.setSelection({item:e,items:o,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}else{s.forEach(function(e){this.removeSelection({item:e,items:s,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}t.focus()}.bind(this)});t.addEventDelegate(this._selectAllDelegate(),this);e.setHeaderToolbar(new r({content:t}).addStyleClass("sapMMultiComboBoxSelectAll")).setSticky(["HeaderToolbar"]);this.attachSelectionChange(this.manageSelectAllCheckBoxState.bind(this))};B.prototype.manageSelectAllCheckBoxState=function(){var e=this.getSelectAllCheckbox();if(!e){return}var t=this.getItems(),i=this.getSelectedItems(),s=S.getSelectableItems(t).filter(function(e){return i.indexOf(e)>-1}).length===S.getSelectableItems(t).length;e.setText(this._oRb.getText("MULTICOMBOBOX_SELECT_ALL_CHECKBOX",[i.length,S.getAllSelectableItems(t).length])).setSelected(s)};B.prototype.getSelectAllToolbar=function(){var e=this._getList();return e&&e.getHeaderToolbar()};B.prototype.getSelectAllCheckbox=function(){var e=this.getSelectAllToolbar();return e&&e.getContent()[0]};B.prototype._selectAllDelegate=function(){return{onsapdown:this.handleDownEvent,onsapup:function(e){e.preventDefault();if(this.getValueState()!==F.None){this._handleFormattedTextNav();return}this.getFocusDomRef().focus()},onsaphome:this.handleHomeEvent,onsapend:this.handleEndEvent,onfocusin:function(){var e=this.getRenderer(),t=this.getSelectAllToolbar();t&&t.addStyleClass(e.CSS_CLASS_MULTICOMBOBOX+"SelectAllFocused")},onfocusout:function(){var e=this.getRenderer(),t=this.getSelectAllToolbar();t&&t.removeStyleClass(e.CSS_CLASS_MULTICOMBOBOX+"SelectAllFocused")},onsapshow:this.close,onsaphide:this.close}};B.prototype.focusSelectAll=B.prototype.toggleSelectAllVisibility=function(e){var t=this.getSelectAllToolbar();if(t){t.setVisible(e);return}e&&this.createSelectAllHeaderToolbar()};B.prototype.handleClearIconPress=function(){if(!(this.getEnabled()&&this.getEditable())){return}if(this.getValue()!==""){this.setValue("");this._sOldInput="";this.bOpenedByKeyboardOrButton?this.clearFilter():this.close();this.setProperty("effectiveShowClearIcon",false)}};return B});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/NavContainer",["./library","sap/ui/core/Configuration","sap/ui/core/Control","sap/ui/core/RenderManager","./NavContainerRenderer","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/dom/jquery/Focusable"],function(e,t,i,a,n,o,s){"use strict";var r=i.extend("sap.m.NavContainer",{metadata:{interfaces:["sap.ui.core.IPlaceholderSupport"],library:"sap.m",properties:{autoFocus:{type:"boolean",group:"Behavior",defaultValue:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},visible:{type:"boolean",group:"Appearance",defaultValue:true},defaultTransitionName:{type:"string",group:"Appearance",defaultValue:"slide"}},defaultAggregation:"pages",aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"page"}},associations:{initialPage:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},navigationFinished:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}}}},renderer:n});var l={onAfterRendering:;var d=function(e){var i=t.getAnimationMode(),a=i!==t.AnimationMode.none&&i!==t.AnimationMode.minimal;return a?e:0},p=function(e){return!!(e&&e.getParent())},g=function(e,t){if(p(e)){e.$().css({"-webkit-animation-direction":t,"animation-direction":t})}};r.TransitionDirection={BACK:"back",TO:"to"};r.prototype.init=function(){this._pageStack=[];this._aQueue=[];this._mVisitedPages={};this._mFocusObject={};this._iTransitionsCompleted=0;this._bNeverRendered=true;this._bNavigating=false;this._bRenderingInProgress=false};r.prototype.exit=r.prototype.onBeforeRendering=function(){var e=this.getCurrentPage();if(this._bNeverRendered&&e){var t=e.getId();if(!this._mVisitedPages[t]){this._mVisitedPages[t]=true;var i={from:null,fromId:null,to:e,toId:t,firstTime:true,isTo:false,isBack:false,isBackToPage:false,isBackToTop:false,direction:"initial"};var a=o.Event("BeforeFirstShow",i);a.srcControl=this;a.data=this._oToDataBeforeRendering||{};a.backData={};e._handleEvent(a);a=o.Event("BeforeShow",i);a.srcControl=this;a.data=this._oToDataBeforeRendering||{};a.backData={};e._handleEvent(a)}}};r.prototype.onAfterRendering=function(){var e=this.getCurrentPage(),t,i,a,n;if(this._bNeverRendered&&e){this._bNeverRendered=false;delete this._bNeverRendered;a=e.getId();if(!this._isInsideAPopup()&&this.getAutoFocus()){t=r._applyAutoFocusTo(a);if(t){this._mFocusObject[a]=t}}i={from:null,fromId:null,to:e,toId:a,firstTime:true,isTo:false,isBack:false,isBackToTop:false,isBackToPage:false,direction:"initial"};n=o.Event("AfterShow",i);n.srcControl=this;n.data=this._oToDataBeforeRendering||{};n.backData={};e._handleEvent(n)}};r.prototype._getActualInitialPage=function(){var e=this.getInitialPage();if(e){var t=sap.ui.getCore().byId(e);if(t){return t}else{s.error("NavContainer: control with ID '"+e+"' was set as 'initialPage' but was not found as a DIRECT child of this NavContainer (number of current children: "+this.getPages().length+").")}}var i=this.getPages();return i.length>0?i[0]:null};r.prototype.getPage=function(e){var t=this.getPages();for(var i=0;i<t.length;i++){if(t[i]&&t[i].getId()==e){return t[i]}}return null};r.prototype._ensurePageStackInitialized=function(e){if(this._pageStack.length===0){var t=this._getActualInitialPage();if(t){this._pageStack.push({id:t.getId(),isInitial:true,data:e||{}})}}return this._pageStack};r.prototype.getCurrentPage=function(){var e=this._ensurePageStackInitialized();if(e.length>=1){return this.getPage(e[e.length-1].id)}else{s.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display");return undefined}};r.prototype.getPreviousPage=function(){var e=this._ensurePageStackInitialized();if(e.length>1){return this.getPage(e[e.length-2].id)}else if(e.length==1){return undefined}else{s.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display")}};r.prototype.currentPageIsTopPage=r.prototype.insertPreviousPage=function(e,t,i){var a=this._ensurePageStackInitialized();if(this._pageStack.length>0){var n=a.length-1;var o={id:e,transition:t,data:i};if(n===0){o.isInitial=true;delete a[a.length-1].isInitial}a.splice(n,0,o)}else{s.warning(this+": insertPreviousPage called with empty page stack; ignoring")}return this};r._applyAutoFocusTo=function(e){var t=o(document.getElementById(e)).firstFocusableDomRef();if(t){t.focus()}return t};r.prototype._applyAutoFocus=function(e){var t=e.toId,i,a=e.isBack||e.isBackToPage||e.isBackToTop;if(!e.bFocusInsideFromPage){return}if(a){i=this._mFocusObject!=null?this._mFocusObject[t]:null;if(i){i.focus()}else{r._applyAutoFocusTo(t)}}else if(e.isTo){r._applyAutoFocusTo(t)}};r.prototype._afterNavigation=function(e,t,i){var a=o.Event("AfterShow",e);a.data=t||{};a.backData=i||{};a.srcControl=this;e.to._handleEvent(a);a=o.Event("AfterHide",e);a.srcControl=this;e.from._handleEvent(a);if(this.getAutoFocus()){this._applyAutoFocus(e)}this.fireNavigationFinished(e);this.fireAfterNavigate(e);this._dequeueNavigation()};r.prototype._afterTransitionCallback=function(e,t,i){this._iTransitionsCompleted++;this._bNavigating=false;this._afterNavigation(e,t,i);s.info(this+": _afterTransitionCallback called, to: "+e.toId);if(e.to.hasStyleClass("sapMNavItemHidden")){s.warning(this.toString()+": target page '"+e.toId+"' still has CSS class 'sapMNavItemHidden' after transition. This should not be the case, please check the preceding log statements.");e.to.removeStyleClass("sapMNavItemHidden")}};r.prototype._dequeueNavigation=function(){var e=this._aQueue.shift();if(typeof e==="function"){e()}};r.prototype._isInPageStack=r.prototype._safeBackToPage=function(e,t,i,a){var n;if(!this.getPage(e)){return this}n=this.getCurrentPage();if(n&&n.getId()===e){return this}if(this._isInPageStack(e)){return this.backToPage(e,i,a)}else{i=i||{};i.safeBackToPage=true;return this.to(e,t,i,a)}};r.prototype._isFocusInControl=function(e){return o(document.activeElement).closest(e.$()).length>0};r.prototype.to=function(t,n,l,p,g){if(t instanceof i){t=t.getId()}if(typeof n!=="string"){p=l;l=n}n=n||this.getDefaultTransitionName();p=p||{};l=l||{};var u={id:t,transition:n,data:l};this._ensurePageStackInitialized(l);if(this._bNavigating){s.info(this.toString()+": Cannot navigate to page "+t+" because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(o.proxy(function(){this.to(t,n,l,p,true)},this));return this}if(this._bNeverRendered){this._oToDataBeforeRendering=l}var f=this.getCurrentPage();if(f&&f.getId()===t){s.warning(this.toString()+": Cannot navigate to page "+t+" because this is the current page.");if(g){this._dequeueNavigation()}if(this._pageStack.length===1){this._pageStack[0].transition=u.transition}return this}var h=this.getPage(t);if(h){if(!f){s.warning("Navigation triggered to page with ID '"+t+"', but the current page is not known/aggregated by "+this);return this}var c={from:f,fromId:f.getId(),to:h,toId:t,firstTime:!this._mVisitedPages[t],isTo:true,isBack:false,isBackToTop:false,isBackToPage:false,direction:"to",bFocusInsideFromPage:this._isFocusInControl(f)};if(c.bFocusInsideFromPage){this._mFocusObject[f.getId()]=document.activeElement}var v=this.fireNavigate(c);if(v){e.closeKeyboard();var m=o.Event("BeforeHide",c);m.srcControl=this;f._handleEvent(m);if(!this._mVisitedPages[t]){m=o.Event("BeforeFirstShow",c);m.srcControl=this;m.data=l||{};m.backData={};h._handleEvent(m)}m=o.Event("BeforeShow",c);m.srcControl=this;m.data=l||{};m.backData={};h._handleEvent(m);this._pageStack.push(u);s.info(this.toString()+": navigating to page '"+t+"': "+h.toString());this._mVisitedPages[t]=true;if(!this.getDomRef()){s.info("'Hidden' 'to' navigation in not-rendered NavContainer "+this.toString());this.fireNavigationFinished(c);if(this._bRenderingInProgress){setTimeout(this.invalidate.bind(this),0)}return this}var y;if(!(y=h.getDomRef())||y.parentNode!=this.getDomRef()||a.isPreservedContent(y)){h.addStyleClass("sapMNavItemRendering");s.debug("Rendering 'to' page '"+h.toString()+"' for 'to' navigation");var C=sap.ui.getCore().createRenderManager();C.render(h,this.getDomRef());C.destroy();h.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}var b=r.transitions[n]||r.transitions["slide"];var I=this._iTransitionsCompleted;var S=this;window.setTimeout(function(){if(S&&S._iTransitionsCompleted<I+1){s.warning("Transition '"+n+"' 'to' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},d(5e3));this._bNavigating=true;var _=l.safeBackToPage||p.safeBackToPage?"back":"to";this._cacheTransitionInfo(n,_);b[_].call(this,f,h,o.proxy(this),p)}else{s.info("Navigation to page with ID '"+t+"' has been aborted by the application")}}else{s.warning("Navigation triggered to page with ID '"+t+"', but this page is not known/aggregated by "+this)}return this};r.prototype.back=function(e,t){this._backTo("back",e,t);return this};r.prototype.backToPage=function(e,t,i){this._backTo("backToPage",t,i,e);return this};r.prototype.backToTop=function(e,t){this._backTo("backToTop",e,t);return this};r.prototype._backTo=function(t,n,l,p){if(this._bNavigating){s.warning(this.toString()+": Cannot navigate back because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(o.proxy(this));return this}if(this._pageStack.length<=1){if(this._pageStack.length===1&&!this._pageStack[0].isInitial){throw new Error("Initial page not found on the stack. How did this happen?")}this._aQueue=[];return this}else{if(p instanceof i){p=p.getId()}var g=this._pageStack[this._pageStack.length-1];var u=g.transition;var f=this.getPage(g.id);var h;var c;if(t==="backToTop"){h=this._getActualInitialPage();c=null}else if(t==="backToPage"){var v=this._findClosestPreviousPageInfo(p);if(!v){s.error(this.toString()+": Cannot navigate backToPage('"+p+"') because target page was not found among the previous pages.");return this}h=sap.ui.getCore().byId(v.id);if(!h){s.error(this.toString()+": Cannot navigate backToPage('"+p+"') because target page does not exist anymore.");return this}c=v.data}else{h=this.getPreviousPage();c=this._pageStack[this._pageStack.length-2].data}if(!h){s.error("NavContainer back navigation: target page is not defined or not aggregated by this NavContainer. Aborting navigation.");return}var m=h.getId();n=n||{};l=l||{};var y={from:f,fromId:f.getId(),to:h,toId:m,firstTime:!this._mVisitedPages[m],isTo:false,isBack:t==="back",isBackToPage:t==="backToPage",isBackToTop:t==="backToTop",direction:t,bFocusInsideFromPage:this._isFocusInControl(f)};var C=this.fireNavigate(y);if(C){e.closeKeyboard();var b=o.Event("BeforeHide",y);b.srcControl=this;f._handleEvent(b);if(!this._mVisitedPages[m]){b=o.Event("BeforeFirstShow",y);b.srcControl=this;b.backData=n||{};b.data={};h._handleEvent(b)}b=o.Event("BeforeShow",y);b.srcControl=this;b.backData=n||{};b.data=c||{};h._handleEvent(b);this._pageStack.pop();s.info(this.toString()+": navigating back to page "+h.toString());this._mVisitedPages[m]=true;if(t==="backToTop"){this._pageStack=[];s.info(this.toString()+": navigating back to top");this.getCurrentPage()}else if(t==="backToPage"){var I=[],S;while(this._pageStack[this._pageStack.length-1].id!==p){S=this._pageStack.pop();I.push(S.id)}s.info(this.toString()+": navigating back to specific page "+h.toString()+" across the pages: "+I.join(", "))}if(!this.getDomRef()){s.info("'Hidden' back navigation in not-rendered NavContainer "+this.toString());this._afterNavigation(y,c,n);return this}var _=r.transitions[u]||r.transitions["slide"];var T=this._iTransitionsCompleted;var k=this;window.setTimeout(function(){if(k&&k._iTransitionsCompleted<T+1){s.warning("Transition '"+u+"' 'back' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},d(5e3));this._bNavigating=true;var N;if(!(N=h.getDomRef())||N.parentNode!=this.getDomRef()||a.isPreservedContent(N)){h.addStyleClass("sapMNavItemRendering");s.debug("Rendering 'to' page '"+h.toString()+"' for back navigation");var P=sap.ui.getCore().createRenderManager();var w=this.$().children().index(f.getDomRef());P.renderControl(h);P.flush(this.getDomRef(),false,w);P.destroy();h.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}if(f.getId()===h.getId()){s.info("Transition is skipped when navigating back to the same page instance"+h.toString());this._afterTransitionCallback(y,c,n);return this}this._cacheTransitionInfo(u,r.TransitionDirection.BACK);_.back.call(this,f,h,o.proxy(this),l)}}return this};r.prototype._findClosestPreviousPageInfo=function(e){for(var t=this._pageStack.length-2;t>=0;t--){var i=this._pageStack[t];if(i.id===e){return i}}return null};r.prototype._cacheTransitionInfo=r.prototype._fadeTransition=r.prototype._fadeOutAnimation=function(){var e=this,t=this.oFromPage,i=this.oToPage;i.addStyleClass("sapMNavItemTransparent");if(this._sTransitionName==="slide"){if(this._sTransitionDirection===r.TransitionDirection.TO){i.addStyleClass("sapMNavItemSlideLeft");t.addStyleClass("sapMNavItemSlideRight")}else{i.addStyleClass("sapMNavItemSlideRight");t.addStyleClass("sapMNavItemSlideLeft")}}i.removeStyleClass("sapMNavItemHidden");t.addStyleClass("sapMNavItemOpaque");window.setTimeout(function(){t.$().on("webkitTransitionEnd transitionend",e._fadeOutAnimationEnd.bind(e));e.bTransition1EndPending=true;t.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque").addStyleClass("sapMNavItemTransparent");window.setTimeout(function(){if(e.bTransition1EndPending){e._fadeOutAnimationEnd()}},d(150))},d(10))};r.prototype._fadeOutAnimationEnd=function(e){var t=this.oFromPage;if(e&&e.originalEvent&&e.originalEvent.propertyName!=="opacity"){return}this.bTransition1EndPending=false;o(t.$()).off("webkitTransitionEnd transitionend");t.removeStyleClass("sapMNavItemSlideLeft").removeStyleClass("sapMNavItemSlideRight");this._fadeInAnimation()};r.prototype._fadeInAnimation=function(){var e=this,t=this.oToPage;window.setTimeout(function(){t.$().on("webkitTransitionEnd transitionend",e._fadeInAnimationEnd.bind(e));e.bTransition2EndPending=true;t.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemTransparent").addStyleClass("sapMNavItemOpaque");window.setTimeout(d(150))},d(10))};r.prototype._fadeInAnimationEnd=function(e){var t=this.oToPage,i=this.oFromPage;if(e&&e.originalEvent&&e.originalEvent.propertyName!=="opacity"){return}this.bTransition2EndPending=false;if(p(i)){i.addStyleClass("sapMNavItemHidden");i.removeStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemTransparent")}o(t.$()).off("webkitTransitionEnd transitionend");if(p(t)){t.removeStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque").removeStyleClass("sapMNavItemSlideLeft").removeStyleClass("sapMNavItemSlideRight")}this.fCallback()};r.prototype._baseSlideAnimation=function(e,t,i){var a=false,n=true,s=this._sTransitionDirection===r.TransitionDirection.BACK,l=s?"reverse":"normal",u=s?"sapMNavItemSlideCenterToLeft":"sapMNavItemSlideRightToCenter",f=!s?"sapMNavItemSlideCenterToLeft":"sapMNavItemSlideRightToCenter",h=function(){o(this).off("webkitAnimationEnd animationend");if(!a){a=true;return a}n=false;g(t,"");g(e,"");if(p(t)){t.removeStyleClass(u)}if(p(e)){e.removeStyleClass(f).addStyleClass("sapMNavItemHidden")}i()};e.$().on("webkitAnimationEnd animationend",h);t.$().on("webkitAnimationEnd animationend",h);g(t,l);g(e,l);e.addStyleClass(f);t.addStyleClass(u).removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){if(n){a=true;h.apply(e.$().add(t.$()))}},d(400))};r.transitions=r.transitions||{};r.transitions["show"]={to:function(e,t,i){t.removeStyleClass("sapMNavItemHidden");e&&e.addStyleClass("sapMNavItemHidden");i()},back:function(e,t,i){t.removeStyleClass("sapMNavItemHidden");e&&e.addStyleClass("sapMNavItemHidden");i()}};r.transitions["baseSlide"]={to:r.prototype._baseSlideAnimation,back:r.prototype._baseSlideAnimation};r.transitions["slide"]={to:r.prototype._fadeTransition,back:r.prototype._fadeTransition};r.transitions["fade"]={to:r.prototype._fadeTransition,back:r.prototype._fadeTransition};r.transitions["flip"]={to:function(e,t,i){var a=this;window.setTimeout(function(){a.$().addClass("sapMNavFlip");t.addStyleClass("sapMNavItemFlipNext");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var s=true;var r=null;r=function(){o(this).off("webkitTransitionEnd transitionend");if(!n){n=true}else{s=false;if(p(t)){t.removeStyleClass("sapMNavItemFlipping")}if(p(e)){e.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipPrevious")}a.$().removeClass("sapMNavFlip");i()}};e.$().on("webkitTransitionEnd transitionend",r);t.$().on("webkitTransitionEnd transitionend",r);t.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipNext");e.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipPrevious");window.setTimeout(function(){if(s){n=true;r.apply(e.$().add(t.$()))}},d(600))},d(60))},0)},back:function(e,t,i){var a=this;a.$().addClass("sapMNavFlip");t.addStyleClass("sapMNavItemFlipPrevious");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var s=true;var r=null;r=function(){o(this).off("webkitTransitionEnd transitionend");if(!n){n=true}else{s=false;if(p(t)){t.removeStyleClass("sapMNavItemFlipping")}if(p(e)){e.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipNext")}a.$().removeClass("sapMNavFlip");i()}};e.$().on("webkitTransitionEnd transitionend",r);t.$().on("webkitTransitionEnd transitionend",r);t.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipPrevious");e.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipNext");window.setTimeout(function(){if(s){n=true;r.apply(e.$().add(t.$()))}},d(600))},d(60))}};r.transitions["door"]={to:function(e,t,i){var a=this;window.setTimeout(function(){a.$().addClass("sapMNavDoor");t.addStyleClass("sapMNavItemDoorInNext");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var s=true;var r=null;r=function(){o(this).off("webkitAnimationEnd animationend");if(!n){n=true}else{s=false;if(p(t)){t.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorInNext")}if(p(e)){e.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorInPrevious")}a.$().removeClass("sapMNavDoor");i()}};e.$().on("webkitAnimationEnd animationend",r);t.$().on("webkitAnimationEnd animationend",r);t.addStyleClass("sapMNavItemDooring");e.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorInPrevious");window.setTimeout(function(){if(s){n=true;r.apply(e.$().add(t.$()))}},d(1e3))},d(60))},0)},back:function(e,t,i){var a=this;a.$().addClass("sapMNavDoor");t.addStyleClass("sapMNavItemDoorOutNext");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var s=true;var r=null;r=function(){o(this).off("webkitAnimationEnd animationend");if(!n){n=true}else{s=false;if(p(t)){t.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorOutNext")}if(p(e)){e.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorOutPrevious")}a.$().removeClass("sapMNavDoor");i()}};e.$().on("webkitAnimationEnd animationend",r);t.$().on("webkitAnimationEnd animationend",r);t.addStyleClass("sapMNavItemDooring");e.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorOutPrevious");window.setTimeout(function(){if(s){n=true;r.apply(e.$().add(t.$()))}},d(1e3))},d(60))}};r.prototype.addCustomTransition=function(e,t,i){if(r.transitions[e]){s.warning("Transition with name "+e+" already exists in "+this+". It is now being replaced by custom transition.")}r.transitions[e]={to:t,back:i};return this};r.addCustomTransition=r.prototype.addCustomTransition;r.prototype.invalidate=function(e){if(e==this){}else if(e instanceof i){var t=false,a=this.getPages(),n=a.length;for(var o=0;o<n;o++){if(a[o]===e){t=true;break}}if((!t||e===this.getCurrentPage())&&!this._isInsideAPopup()){i.prototype.invalidate.call(this,e)}}else{i.prototype.invalidate.call(this,e)}};r.prototype._isInsideAPopup=function(){var e;e=function(t){if(!t){return false}if(t.getMetadata().isInstanceOf("sap.ui.core.PopupInterface")){return true}return e(t.getParent())};return e(this)};r.prototype.removePage=function(e){var t;if(typeof e=="number"){t=this.getPages()[e]}else if(typeof e=="string"){t=sap.ui.getCore().byId(e)}else{t=e}t=this.removeAggregation("pages",t,t!==this.getCurrentPage());this._onPageRemoved(t);return t};r.prototype._onPageRemoved=function(e){if(!e){return}e.$().remove();e.removeStyleClass("sapMNavItemHidden");e.removeStyleClass("sapMNavItem");var t=this._ensurePageStackInitialized();this._pageStack=t.filter(};r.prototype.removeAllPages=function(){var e=this.removeAllAggregation("pages");for(var t=0;t<e.length;t++){this._onPageRemoved(e[t])}return e};r.prototype.addPage=function(e){var t=this.getPages();if(t.indexOf(e)>-1){return this}this.addAggregation("pages",e,true);e.addStyleClass("sapMNavItem");var i=t.length;if(i===0&&this.getPages().length===1){this._fireAdaptableContentChange(e);if(this.getDomRef()){this._ensurePageStackInitialized();this.rerender()}}return this};r.prototype.insertPage=function(e,t){var i=this.getPages().length;this.insertAggregation("pages",e,t,true);e.addStyleClass("sapMNavItem");if(i===0&&this.getPages().length===1){this._fireAdaptableContentChange(e);if(this.getDomRef()){this._ensurePageStackInitialized();this.rerender()}}return this};r.prototype.showPlaceholder=function(e){var i;if(!t.getPlaceholder()){return}if(this._placeholder){this.hidePlaceholder()}if(e&&e.placeholder){this._placeholder=e.placeholder;i=this._placeholder._load()}else{i=Promise.resolve()}if(this.getDomRef()&&this._placeholder){this._placeholder.show(this)}this.addEventDelegate(l,this);return i};r.prototype.hidePlaceholder=function(){if(this._placeholder){this._placeholder.hide();this.removeEventDelegate(l)}};r.prototype.needPlaceholder=function(e,t){return!t||this.getCurrentPage()!==t};r.prototype._getAdaptableContent=function(){return this.getCurrentPage()};r.prototype._fireAdaptableContentChange=function(e){if(e&&this.mEventRegistry["_adaptableContentChange"]){this.fireEvent("_adaptableContentChange",{parent:this,adaptableContent:e})}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Select",["./Dialog","./Popover","./SelectList","./library","sap/ui/core/Core","sap/ui/core/Control","sap/ui/core/EnabledPropagator","sap/ui/core/LabelEnablement","sap/ui/core/Icon","sap/ui/core/IconPool","./Button","./Bar","./Title","./delegate/ValueStateMessage","sap/ui/core/message/MessageMixin","sap/ui/core/library","sap/ui/core/Item","sap/ui/Device","sap/ui/core/InvisibleText","./SelectRenderer","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes","./Text","sap/m/SimpleFixFlex","sap/base/Log","sap/ui/core/ValueStateSupport","sap/ui/core/InvisibleMessage"],function(e,t,i,s,n,o,r,a,l,u,c,p,h,g,d,f,y,S,m,I,v,_,b,C,T,x,A){"use strict";var V=s.SelectListKeyboardNavigationMode;var P=s.PlacementType;var L=f.ValueState;var k=f.TextDirection;var R=f.TextAlign;var O=f.OpenState;var E=s.SelectType;var F=f.InvisibleMessageMode;var D=f.TitleLevel;var M=o.extend("sap.m.Select",{metadata:{interfaces:["sap.ui.core.IFormContent","sap.m.IOverflowToolbarContent","sap.m.IToolbarInteractiveControl","sap.f.IShellBar","sap.ui.core.ISemanticFormContent"],library:"sap.m",properties:{name:{type:"string",group:"Misc",defaultValue:""},enabled:{type:"boolean",group:"Behavior",defaultValue:true},editable:{type:"boolean",group:"Behavior",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"auto"},maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},selectedKey:{type:"string",group:"Data",defaultValue:""},selectedItemId:{type:"string",group:"Misc",defaultValue:""},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:""},type:{type:"sap.m.SelectType",group:"Appearance",defaultValue:E.Default},autoAdjustWidth:{type:"boolean",group:"Appearance",defaultValue:false},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:R.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:k.Inherit},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:L.None},valueStateText:{type:"string",group:"Misc",defaultValue:""},showSecondaryValues:{type:"boolean",group:"Misc",defaultValue:false},resetOnMissingKey:{type:"boolean",group:"Behavior",defaultValue:false},forceSelection:{type:"boolean",group:"Behavior",defaultValue:true},wrapItemsText:{type:"boolean",group:"Behavior",defaultValue:false},columnRatio:{type:"sap.m.SelectColumnRatio",group:"Appearance",defaultValue:"3:2"},required:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.core.Item",multiple:true,singularName:"item",bindable:"bindable",forwarding:{getter:"getList",aggregation:"items"}},picker:{type:"sap.ui.core.PopupInterface",multiple:false,visibility:"hidden"},_valueIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_pickerHeader:{type:"sap.m.Bar",multiple:false,visibility:"hidden"},_pickerValueStateContent:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},associations:{selectedItem:{type:"sap.ui.core.Item",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{change:{parameters:{selectedItem:{type:"sap.ui.core.Item"},previousSelectedItem:{type:"sap.ui.core.Item"}}},liveChange:{parameters:{selectedItem:{type:"sap.ui.core.Item"}}}},designtime:"sap/m/designtime/Select.designtime"},renderer:I});u.insertFontFaceStyle();r.apply(M.prototype,[true]);d.call(M.prototype);function B(e){if(this._isIconOnly()&&!this.isOpen()){return}if(e){if(this.getSelectedItemId()!==e.getId()){this.fireEvent("liveChange",{selectedItem:e})}this.setSelection(e);this.setValue(e.getText());this.scrollToItem(e)}}M.prototype._attachHiddenSelectHandlers=function(){var e=this._getHiddenSelect(),t=this._getHiddenInput();e.on("focus",this._addFocusClass.bind(this));e.on("blur",this._removeFocusClass.bind(this));t.on("focus",this.focus.bind(this))};M.prototype.focus=function(){this._getHiddenSelect().trigger("focus");o.prototype.focus.call(this,arguments)};M.prototype._addFocusClass=function(){this.$().addClass("sapMSltFocused")};M.prototype._removeFocusClass=M.prototype._detachHiddenSelectHandlers=function(){var e=this._getHiddenSelect(),t=this._getHiddenInput();if(e){e.off("focus");e.off("blur")}if(t){t.off("focus")}};M.prototype._getHiddenSelect=function(){return this.$("hiddenSelect")};M.prototype._getHiddenInput=function(){return this.$("hiddenInput")};M.prototype._announceValueStateText=function(){var e=this._getValueStateText();if(this._oInvisibleMessage){this._oInvisibleMessage.announce(e,F.Polite)}};M.prototype._getValueStateText=function(){var e=this.getValueState(),t,i;if(e===L.None){return""}t=n.getLibraryResourceBundle("sap.m").getText("INPUTBASE_VALUE_STATE_"+e.toUpperCase());i=t+" "+(this.getValueStateText()||x.getAdditionalText(this));return i};M.prototype._isFocused=function(){return this.getFocusDomRef()===document.activeElement};M.prototype._isIconOnly=M.prototype._handleFocusout=function(e){this._bFocusoutDueRendering=this.bRenderingPhase;if(this._bFocusoutDueRendering){this._bProcessChange=false;return}if(this._bProcessChange){if(!this.isOpen()||e.target===this.getAggregation("picker")){this._checkSelectionChange()}else{this._revertSelection()}this._bProcessChange=false}else{this._bProcessChange=true}};M.prototype._checkSelectionChange=function(){var e=this.getSelectedItem();if(this._oSelectionOnFocus!==e){this.fireChange({selectedItem:e,previousSelectedItem:this._oSelectionOnFocus})}};M.prototype._revertSelection=function(){var e=this.getSelectedItem();if(this._oSelectionOnFocus!==e){this.fireEvent("liveChange",{selectedItem:this._oSelectionOnFocus});this.setSelection(this._oSelectionOnFocus);this.setValue(this._getSelectedItemText())}};M.prototype._getSelectedItemText=function(e){e=e||this.getSelectedItem();if(!e){e=this.getDefaultSelectedItem()}if(e){return e.getText()}return""};M.prototype.getOverflowToolbarConfig=function(){var e=["enabled","selectedKey"];if(!this.getAutoAdjustWidth()||this._bIsInOverflow){e.push("selectedItemId")}var t={canOverflow:true,autoCloseEvents:["change"],invalidationEvents:["_itemTextChange"],propsUnrelatedToSize:e};t.onBeforeEnterOverflow=function(e){var t=e.getParent();if(!t.isA("sap.m.OverflowToolbar")){return}e._prevSelectType=e.getType();e._bIsInOverflow=true;if(e.getType()!==E.Default){e.setProperty("type",E.Default,true)}};t.onAfterExitOverflow=function(e){var t=e.getParent();if(!t.isA("sap.m.OverflowToolbar")){return}e._bIsInOverflow=false;if(e.getType()!==e._prevSelectType){e.setProperty("type",e._prevSelectType,true)}};return t};M.prototype.getList=M.prototype.findFirstEnabledItem=function(e){var t=this.getList();return t?t.findFirstEnabledItem(e):null};M.prototype.findLastEnabledItem=function(e){var t=this.getList();return t?t.findLastEnabledItem(e):null};M.prototype.setSelectedIndex=function(e,t){var i;t=t||this.getItems();e=e>t.length-1?t.length-1:Math.max(0,e);i=t[e];if(i){this.setSelection(i)}};M.prototype.scrollToItem=function(e){var t=this.getPicker().getDomRef(),i=e&&e.getDomRef();if(!t||!i){return}var s=t.querySelector(".sapUiSimpleFixFlexFlexContent"),n=t.querySelector(".sapMSltPickerValueState"),o=n?n.clientHeight:0,r=s.scrollTop,a=i.offsetTop-o,l=s.clientHeight,u=i.offsetHeight;if(r>a){s.scrollTop=a}else if(a+u>r+l){s.scrollTop=Math.ceil(a+u-l)}};M.prototype.setValue=function(e){var t=this.getDomRef(),i=t&&t.querySelector(".sapMSelectListItemText"),s=!this.isOpen()&&this._isFocused()&&this._oInvisibleMessage;if(i){i.textContent=e}this._setHiddenSelectValue();this._getValueIcon();if(s){this._oInvisibleMessage.announce(e,F.Assertive)}};M.prototype._setHiddenSelectValue=function(){var e=this._getHiddenSelect(),t=this._getHiddenInput(),i=this.getSelectedKey(),s=this._getSelectedItemText();t.attr("value",i||"");if(!this._isIconOnly()){e.text(s)}};M.prototype._getValueIcon=function(){if(this._bIsBeingDestroyed){return null}var e=this.getAggregation("_valueIcon"),t=this.getSelectedItem(),i=!!(t&&t.getIcon&&t.getIcon()),s=i?t.getIcon():"sap-icon://pull-down";if(!e){e=new l(this.getId()+"-labelIcon",{src:s,visible:false});this.setAggregation("_valueIcon",e,true)}if(e.getVisible()!==i){e.setVisible(i);e.toggleStyleClass("sapMSelectListItemIcon",i)}if(i&&t.getIcon()!==e.getSrc()){e.setSrc(s)}return e};M.prototype._isShadowListRequired=function(){if(this.getAutoAdjustWidth()){return false}else if(this.getWidth()==="auto"){return true}return false};M.prototype._handleAriaActiveDescendant=function(e){var t=this.getFocusDomRef(),i=e&&e.getDomRef(),s="aria-activedescendant";if(!t){return}if(i&&this.isOpen()){t.setAttribute(s,e.getId())}else{t.removeAttribute(s)}};M.prototype.updateItems=function(e){i.prototype.updateItems.apply(this,arguments);this._oSelectionOnFocus=this.getSelectedItem()};M.prototype.refreshItems=function(){i.prototype.refreshItems.apply(this,arguments)};M.prototype.onBeforeOpen=function(e){var t=this["_onBeforeOpen"+this.getPickerType()],i=this.getRenderer().CSS_CLASS;this.addStyleClass(i+"Pressed");this.addStyleClass(i+"Expanded");this.closeValueStateMessage();this.addContent();this.addContentToFlex();t&&t.call(this)};M.prototype.onAfterOpen=function(e){var t=this.getFocusDomRef(),i=null;if(!t){return}i=this.getSelectedItem();t.setAttribute("aria-expanded","true");t.setAttribute("aria-controls",this.getList().getId());if(i){t.setAttribute("aria-activedescendant",i.getId());this.scrollToItem(i)}};M.prototype.onBeforeClose=function(e){var t=this.getFocusDomRef(),i=this.getRenderer().CSS_CLASS;if(t){t.removeAttribute("aria-controls");t.removeAttribute("aria-activedescendant");if(this.shouldValueStateMessageBeOpened()&&document.activeElement===t){this.openValueStateMessage()}}this.removeStyleClass(i+"Expanded")};M.prototype.onAfterClose=function(e){var t=this.getFocusDomRef(),i=this.getRenderer().CSS_CLASS,s=i+"Pressed";if(t){t.setAttribute("aria-expanded","false");t.removeAttribute("aria-activedescendant")}this.removeStyleClass(s)};M.prototype.getPicker=function(){if(this._bIsBeingDestroyed){return null}return this.createPicker(this.getPickerType())};M.prototype.getValueStateTextInvisibleText=function(){if(this._bIsBeingDestroyed){return null}if(!this._oValueStateTextInvisibleText){this._oValueStateTextInvisibleText=new m({id:this.getId()+"-valueStateText-InvisibleText"});this._oValueStateTextInvisibleText.toStatic()}return this._oValueStateTextInvisibleText};M.prototype.getSimpleFixFlex=function(){if(this._bIsBeingDestroyed){return null}else if(this.oSimpleFixFlex){return this.oSimpleFixFlex}this.oSimpleFixFlex=new C({id:this.getPickerValueStateContentId(),fixContent:this._getPickerValueStateContent().addStyleClass(this.getRenderer().CSS_CLASS+"PickerValueState"),flexContent:this.createList()});return this.oSimpleFixFlex};M.prototype.setPickerType=function(e){this._sPickerType=e};M.prototype.getPickerType=function(){return this._sPickerType};M.prototype._getPickerValueStateContent=function(){if(!this.getAggregation("_pickerValueStateContent")){this.setAggregation("_pickerValueStateContent",new b({wrapping:true,text:this._getTextForPickerValueStateContent()}))}return this.getAggregation("_pickerValueStateContent")};M.prototype._updatePickerValueStateContentText=function(){var e=this.getPicker(),t=e&&e.getContent()[0].getFixContent(),i;if(t){i=this._getTextForPickerValueStateContent();t.setText(i)}};M.prototype._getTextForPickerValueStateContent=function(){var e=this.getValueStateText(),t;if(e){t=e}else{t=this._getDefaultTextForPickerValueStateContent()}return t};M.prototype._getDefaultTextForPickerValueStateContent=function(){var e=this.getValueState(),t,i;if(e===L.None){i=""}else{t=n.getLibraryResourceBundle("sap.ui.core");i=t.getText("VALUE_STATE_"+e.toUpperCase())}return i};M.prototype._updatePickerValueStateContentStyles=function(){var e=this.getValueState(),t=L,i=this.getRenderer().CSS_CLASS,s=i+"Picker",n=s+e+"State",o=s+"WithSubHeader",r=this.getPicker(),a=r&&r.getContent()[0].getFixContent();if(a){this._removeValueStateClassesForPickerValueStateContent(r);a.addStyleClass(n);if(e!==t.None){r.addStyleClass(o)}else{r.removeStyleClass(o)}}};M.prototype._removeValueStateClassesForPickerValueStateContent=function(e){var t=L,i=this.getRenderer().CSS_CLASS,s=i+"Picker",n=e.getContent()[0].getFixContent();Object.keys(t).forEach(function(e){var t=s+e+"State";n.removeStyleClass(t)})};M.prototype._createPopover=function(){var e=this;var i=new t({showArrow:false,showHeader:false,placement:P.VerticalPreferredBottom,offsetX:0,offsetY:0,initialFocus:this,ariaLabelledBy:this._getPickerHiddenLabelId()});i.addEventDelegate({ontouchstart:function(t){var i=this.getDomRef("cont");if(t.target===i||t.srcControl instanceof y){e._bProcessChange=false}}},i);this._decoratePopover(i);return i};M.prototype._decoratePopover=function(e){var t=this;e.open=;M.prototype._onBeforeRenderingPopover=function(){var e=this.getPicker(),t=this.$().outerWidth()+"px";if(e){e.setContentMinWidth(t)}};M.prototype._createDialog=function(){var t=this,i=this._getPickerHeader(),s=new e({stretch:true,ariaLabelledBy:this._getPickerHiddenLabelId(),customHeader:i,beforeOpen:function(){t.updatePickerHeaderTitle()}});return s};M.prototype._getPickerTitle=function(){var e=this.getPicker(),t=e&&e.getCustomHeader();if(t){return t.getContentMiddle()[0]}return null};M.prototype._getPickerHeader=function(){var e=u.getIconURI("decline"),t;if(!this.getAggregation("_pickerHeader")){t=n.getLibraryResourceBundle("sap.m");this.setAggregation("_pickerHeader",new p({titleAlignment:s.TitleAlignment.Auto,contentMiddle:new h({text:t.getText("SELECT_PICKER_TITLE_TEXT"),level:D.H1}),contentRight:new c({icon:e,press:this.close.bind(this)})}))}return this.getAggregation("_pickerHeader")};M.prototype._getPickerHiddenLabelId=function(){return m.getStaticId("sap.m","INPUT_AVALIABLE_VALUES")};M.prototype.getPickerValueStateContentId=function(){return this.getId()+"-valueStateText"};M.prototype.updatePickerHeaderTitle=function(){var e=this.getPicker();if(!e){return}var t=this.getLabels();if(t.length){var i=t[0],s=this._getPickerTitle();if(i&&typeof i.getText==="function"){s&&s.setText(i.getText())}}};M.prototype._onBeforeOpenDialog=function(){};M.prototype.init=function(){this.setPickerType(S.system.phone?"Dialog":"Popover");this.createPicker(this.getPickerType());this._oSelectionOnFocus=null;this.bRenderingPhase=false;this._bFocusoutDueRendering=false;this._bProcessChange=false;this.sTypedChars="";this.iTypingTimeoutID=-1;this._oValueStateMessage=new g(this);this._bValueStateMessageOpened=false;this._sAriaRoleDescription=n.getLibraryResourceBundle("sap.m").getText("SELECT_ROLE_DESCRIPTION");this._oInvisibleMessage=null;this._referencingLabelsHandlers=[]};M.prototype.onBeforeRendering=function(){if(!this._oInvisibleMessage){this._oInvisibleMessage=A.getInstance()}this.bRenderingPhase=true;this.synchronizeSelection({forceSelection:this.getForceSelection()});this._updatePickerValueStateContentText();this._updatePickerValueStateContentStyles();this._detachHiddenSelectHandlers();if(this._isIconOnly()){this.setAutoAdjustWidth(true)}};M.prototype.onAfterRendering=function(){this.bRenderingPhase=false;this._setHiddenSelectValue();this._attachHiddenSelectHandlers();this._clearReferencingLabelsHandlers();this._handleReferencingLabels()};M.prototype.exit=function(){var e=this.getValueStateMessage(),t=this._getValueIcon();this._oSelectionOnFocus=null;if(this._oValueStateTextInvisibleText){this._oValueStateTextInvisibleText.destroy();this._oValueStateTextInvisibleText=null}if(e){this.closeValueStateMessage();e.destroy()}if(t){t.destroy()}this._oValueStateMessage=null;this._bValueStateMessageOpened=false};M.prototype.ontouchstart=function(e){e.setMarked();if(this.getEnabled()&&this.getEditable()){this.addStyleClass(this.getRenderer().CSS_CLASS+"Pressed");this.focus()}};M.prototype.ontouchend=function(e){e.setMarked();if(this.getEnabled()&&this.getEditable()&&!this.isOpen()&&this.isOpenArea(e.target)){this.removeStyleClass(this.getRenderer().CSS_CLASS+"Pressed")}};M.prototype.ontap=function(e){var t=this.getRenderer().CSS_CLASS;e.setMarked();if(!this.getEnabled()||!this.getEditable()){return}if(this.isOpenArea(e.target)){if(this.isOpen()){this.close();this.removeStyleClass(t+"Pressed");return}if(S.system.phone){this.focus()}this.open()}if(this.isOpen()){this.addStyleClass(t+"Pressed")}};M.prototype.onSelectionChange=function(e){var t=e.getParameter("selectedItem"),i=this.getSelectedItem();this.close();this.setSelection(t);this.fireChange({selectedItem:t,previousSelectedItem:i});this.setValue(this._getSelectedItemText())};M.prototype.onkeypress=function(e){if(!this.getEditable()){return}e.setMarked();var t=String.fromCharCode(e.which),i;this.sTypedChars+=t;i=/^(.)\1+$/i.test(this.sTypedChars)?t:this.sTypedChars;clearTimeout(this.iTypingTimeoutID);this.iTypingTimeoutID=setTimeout(bind(this),1e3);B.call(this,this.searchNextItemByText(i))};M.prototype.onsapshow=function(e){if(!this.getEditable()){return}e.setMarked();if(e.which===_.F4){e.preventDefault()}this.toggleOpenState()};M.prototype.onsaphide=M.prototype.onsapshow;M.prototype.onmousedown=function(e){e.preventDefault();this._getHiddenSelect().trigger("focus")};M.prototype.onsapescape=function(e){if(!this.getEditable()||this._bSpaceDown){return}if(this.isOpen()){e.setMarked();this.close();this._revertSelection()}};M.prototype.onsapenter=function(e){e.preventDefault();if(!this.getEditable()){return}if(this.isOpen()){e.setMarked()}this.close();this._checkSelectionChange()};M.prototype.onkeydown=function(e){if(e.which===_.SPACE){this._bSpaceDown=true}if([_.ARROW_DOWN,_.ARROW_UP,_.SPACE].indexOf(e.which)>-1){e.preventDefault()}if(e.which===_.SHIFT||e.which===_.ESCAPE){this._bSupressNextAction=this._bSpaceDown}};M.prototype.onkeyup=function(e){if(!this.getEditable()){return}if(e.which===_.SPACE){if(!e.shiftKey&&!this._bSupressNextAction){e.setMarked();if(this.isOpen()){this._checkSelectionChange()}this.toggleOpenState()}this._bSpaceDown=false;this._bSupressNextAction=false}};M.prototype.onsapdown=function(e){if(!this.getEditable()){return}e.setMarked();e.preventDefault();var t,i=this.getSelectableItems();t=i[i.indexOf(this.getSelectedItem())+1];B.call(this,t)};M.prototype.onsapup=function(e){if(!this.getEditable()){return}e.setMarked();e.preventDefault();var t,i=this.getSelectableItems();t=i[i.indexOf(this.getSelectedItem())-1];B.call(this,t)};M.prototype.onsaphome=function(e){if(!this.getEditable()){return}e.setMarked();e.preventDefault();var t=this.getSelectableItems()[0];B.call(this,t)};M.prototype.onsapend=function(e){if(!this.getEditable()){return}e.setMarked();e.preventDefault();var t=this.findLastEnabledItem(this.getSelectableItems());B.call(this,t)};M.prototype.onsappagedown=function(e){if(!this.getEditable()){return}e.setMarked();e.preventDefault();var t=this.getSelectableItems(),i=this.getSelectedItem();this.setSelectedIndex(t.indexOf(i)+10,t);i=this.getSelectedItem();if(i){this.setValue(i.getText())}this.scrollToItem(i)};M.prototype.onsappageup=function(e){if(!this.getEditable()){return}e.setMarked();e.preventDefault();var t=this.getSelectableItems(),i=this.getSelectedItem();this.setSelectedIndex(t.indexOf(i)-10,t);i=this.getSelectedItem();if(i){this.setValue(i.getText())}this.scrollToItem(i)};M.prototype.onsaptabnext=M.prototype.onsaptabprevious=M.prototype.onsaptabnext;M.prototype.onfocusin=function(e){if(!this._bFocusoutDueRendering&&!this._bProcessChange){this._oSelectionOnFocus=this.getSelectedItem()}this._bProcessChange=true;setTimeout(function(){if(!this.isOpen()&&this.shouldValueStateMessageBeOpened()&&document.activeElement===this.getFocusDomRef()){this.openValueStateMessage()}}.bind(this),100)};M.prototype.onfocusout=function(e){this._handleFocusout(e);if(this.bRenderingPhase){return}this.closeValueStateMessage()};M.prototype.onsapfocusleave=function(e){var t=this.getAggregation("picker");if(!e.relatedControlId||!t){return}var i=n.byId(e.relatedControlId),s=i&&i.getFocusDomRef();if(S.system.desktop&&v(t.getFocusDomRef(),s)){this.focus()}};M.prototype.getFocusDomRef=M.prototype.getPopupAnchorDomRef=function(){return this.getDomRef()};M.prototype.setSelection=function(e){var t=this.getList(),i;if(t){t.setSelection(e)}this.setAssociation("selectedItem",e,true);this.setProperty("selectedItemId",e instanceof y?e.getId():e,true);if(typeof e==="string"){e=n.byId(e)}i=e?e.getKey():"";this.setProperty("selectedKey",i,true);this._handleAriaActiveDescendant(e)};M.prototype.setColumnRatio=function(e){var t=this.getList();this.setProperty("columnRatio",e,true);if(t&&this.getShowSecondaryValues()){t.setProperty("_columnRatio",this.getColumnRatio())}return this};M.prototype.isSelectionSynchronized=M.prototype.synchronizeSelection=M.prototype.addContent=M.prototype.addContentToFlex=function(){};M.prototype.createPicker=function(e){var t=this.getAggregation("picker"),i=this.getRenderer().CSS_CLASS;if(t){return t}t=this["_create"+e]();this.setAggregation("picker",t,true);t.setHorizontalScrolling(false).setVerticalScrolling(false).addStyleClass(i+"Picker").addStyleClass(i+"Picker-CTX").addStyleClass("sapUiNoContentPadding").attachBeforeOpen(this.onBeforeOpen,this).attachAfterOpen(this.onAfterOpen,this).attachBeforeClose(this.onBeforeClose,this).attachAfterClose(this.onAfterClose,this).addEventDelegate({onBeforeRendering:this.onBeforeRenderingPicker,onAfterRendering:this.onAfterRenderingPicker},this).addContent(this.getSimpleFixFlex());return t};M.prototype.searchNextItemByText=function(e){var t=this.getSelectedItem(),i,s,n,o;if(!(typeof e==="string"&&e!=="")){return null}if(e.length>1&&t.getText().toLowerCase().startsWith(e.toLowerCase())){return t}i=this.getItems();s=this.getSelectedIndex();n=i.splice(s+1,i.length-s);o=i.splice(0,i.length-1);i=n.concat(o);for(var r=0,a;r<i.length;r++){a=i[r];if(a.getEnabled()&&!a.isA("sap.ui.core.SeparatorItem")&&a.getText().toLowerCase().startsWith(e.toLowerCase())){return a}}return null};M.prototype.createList=function(){var e=V,t=S.system.phone?e.Delimited:e.None;this._oList=new i({width:"100%",keyboardNavigationMode:t,hideDisabledItems:true}).addStyleClass(this.getRenderer().CSS_CLASS+"List-CTX").addEventDelegate({ontap:function(e){var t=e.srcControl;if(t.getEnabled()){this._checkSelectionChange();this.close()}}},this).addEventDelegate({onAfterRendering:this.onAfterRenderingList},this).attachSelectionChange(this.onSelectionChange,this);this._oList.setProperty("_tabIndex","-1");this._oList.toggleStyleClass("sapMSelectListWrappedItems",this.getWrapItemsText());return this._oList};M.prototype.setWrapItemsText=function(e){var t=this.getPicker();if(this._oList){this._oList.toggleStyleClass("sapMSelectListWrappedItems",e)}if(t&&this.getPickerType()==="Popover"){t.toggleStyleClass("sapMPickerWrappedItems",e)}return this.setProperty("wrapItemsText",e,true)};M.prototype.hasContent=M.prototype.onBeforeRenderingPicker=function(){var e=this["_onBeforeRendering"+this.getPickerType()];e&&e.call(this)};M.prototype.onAfterRenderingPicker=function(){var e=this["_onAfterRendering"+this.getPickerType()];e&&e.call(this)};M.prototype.onAfterRenderingList=function(){};M.prototype.open=function(){var e=this.getPicker();this.focus();if(e){e.open()}return this};M.prototype.toggleOpenState=function(){if(this.isOpen()){this.close()}else{this.open()}return this};M.prototype.getVisibleItems=function(){var e=this.getList();return e?e.getVisibleItems():[]};M.prototype.isItemSelected=function(e){return e&&e.getId()===this.getAssociation("selectedItem")};M.prototype.getSelectedIndex=function(){var e=this.getSelectedItem();return e?this.indexOfItem(this.getSelectedItem()):-1};M.prototype.getDefaultSelectedItem=M.prototype.getSelectableItems=function(){var e=this.getList();if(!e){return[]}return e.getSelectableItems()};M.prototype.getOpenArea=function(){return this.getDomRef()};M.prototype.isOpenArea=M.prototype.getFormFormattedValue=function(){var e=this.getSelectedItem();return e?e.getText():""};M.prototype.getFormValueProperty=function(){return"selectedKey"};M.prototype.findItem=function(e,t){var i=this.getList();return i?i.findItem(e,t):null};M.prototype.clearSelection=function(){this.setSelection(null)};M.prototype.onItemChange=function(e){var t=this.getAssociation("selectedItem"),i=e.getParameter("id"),s=e.getParameter("name"),n=e.getParameter("newValue"),o,r,a,l;if(s==="key"&&!this.isBound("selectedKey")){r=this.getSelectedKey();a=this.getItemByKey(n);if(n===r&&t!==i&&a&&i===a.getId()){this.setSelection(a);return}o=e.getParameter("oldValue");if(t===i&&r===o&&!this.getItemByKey(o)){this.setSelectedKey(n);return}l=this.getItemByKey(r);if(t===i&&n!==r&&l){this.setSelection(l);return}}if(s==="text"&&t===i){this.fireEvent("_itemTextChange");this.setValue(n)}};M.prototype.fireChange=function(e){this._oSelectionOnFocus=e.selectedItem;return this.fireEvent("change",e)};M.prototype.addAggregation=function(e,t,i){if(e==="items"&&!i&&!this.isInvalidateSuppressed()){this.invalidate(t)}return o.prototype.addAggregation.apply(this,arguments)};M.prototype.destroyAggregation=function(e,t){if(e==="items"&&!t&&!this.isInvalidateSuppressed()){this.invalidate()}return o.prototype.destroyAggregation.apply(this,arguments)};M.prototype.setAssociation=function(e,t,s){var n=this.getList();if(n&&e==="selectedItem"){i.prototype.setAssociation.apply(n,arguments)}return o.prototype.setAssociation.apply(this,arguments)};M.prototype.setProperty=function(e,t,s){var n=this.getList();if(e==="selectedKey"||e==="selectedItemId"){n&&i.prototype.setProperty.apply(n,arguments)}try{o.prototype.setProperty.apply(this,arguments)}catch(e){T.warning("Update failed due to exception. Loggable in support mode log",null,null,}return this};M.prototype.removeAllAssociation=function(e,t){var s=this.getList();if(s&&e==="selectedItem"){i.prototype.removeAllAssociation.apply(s,arguments)}return o.prototype.removeAllAssociation.apply(this,arguments)};M.prototype.clone=function(){var e=o.prototype.clone.apply(this,arguments),t=this.getSelectedItem(),i=this.getSelectedKey();if(!this.isBound("selectedKey")&&!e.isSelectionSynchronized()){if(t&&i===""){e.setSelectedIndex(this.indexOfItem(t))}else{e.setSelectedKey(i)}}return e};M.prototype._updatePickerAriaLabelledBy=function(e){var t=this.getPicker(),i;if(!t){return}i=this.getValueStateTextInvisibleText().getId();if(e===L.None){t.removeAriaLabelledBy(i)}else{t.addAriaLabelledBy(i)}};M.prototype._handleReferencingLabels=function(){var e=this.getLabels(),t,i=this;e.forEach(function(e){if(!e){return}t={ontap:function(){i.focus()}};i._referencingLabelsHandlers.push({oDelegate:t,sLabelId:e.getId()});e.addEventDelegate(t)})};M.prototype._clearReferencingLabelsHandlers=function(){var e;this._referencingLabelsHandlers.forEach(function(t){e=n.byId(t.sLabelId);if(e){e.removeEventDelegate(t.oDelegate)}});this._referencingLabelsHandlers=[]};M.prototype.getLabels=function(){var e=this.getAriaLabelledBy().concat(a.getReferencingLabels(this));e=e.filter(.map(function(e){return n.byId(e)}).filter(Boolean);return e};M.prototype.getDomRefForValueStateMessage=function(){return this.getFocusDomRef()};M.prototype.getValueStateMessageId=function(){return this.getId()+"-message"};M.prototype.getValueStateMessage=function(){return this._oValueStateMessage};M.prototype.openValueStateMessage=function(){var e=this.getValueStateMessage();if(e&&!this._bValueStateMessageOpened){this._bValueStateMessageOpened=true;e.open()}};M.prototype.closeValueStateMessage=function(){var e=this.getValueStateMessage();if(e&&this._bValueStateMessageOpened){this._bValueStateMessageOpened=false;e.close()}};M.prototype.shouldValueStateMessageBeOpened=function(){return!this._isIconOnly()&&this.getValueState()!==L.None&&this.getEnabled()&&this.getEditable()&&!this._bValueStateMessageOpened};M.prototype.setShowSecondaryValues=function(e){var t=!this._isShadowListRequired();this.setProperty("showSecondaryValues",e,t);var i=this.getList(),s=e?this.getColumnRatio():null;if(i){i.setShowSecondaryValues(e);i.setProperty("_columnRatio",s)}return this};M.prototype.addItem=function(e){this.addAggregation("items",e);if(e){e.attachEvent("_change",this.onItemChange,this)}return this};M.prototype.insertItem=function(e,t){this.insertAggregation("items",e,t);if(e){e.attachEvent("_change",this.onItemChange,this)}return this};M.prototype.findAggregatedObjects=function(){var e=this.getList();if(e){return i.prototype.findAggregatedObjects.apply(e,arguments)}return[]};M.prototype.getItems=M.prototype.setSelectedItem=function(e){if(typeof e==="string"){this.setAssociation("selectedItem",e,true);e=n.byId(e)}if(!(e instanceof y)&&e!==null){return this}if(!e){e=this.getDefaultSelectedItem()}this.setSelection(e);this.setValue(this._getSelectedItemText(e));this._oSelectionOnFocus=e;return this};M.prototype.setSelectedItemId=function(e){e=this.validateProperty("selectedItemId",e);if(!e){e=this.getDefaultSelectedItem()}this.setSelection(e);this.setValue(this._getSelectedItemText());this._oSelectionOnFocus=this.getSelectedItem();return this};M.prototype._isKeyAvailable=function(e){var t=this._oList.getItems().map(function(e){return e.getKey()});return t.indexOf(e)>-1};M.prototype.setSelectedKey=function(e){e=this.validateProperty("selectedKey",e);var t=e==="";if(!t&&!this._isKeyAvailable(e)&&this.getResetOnMissingKey()){t=true}if(!this.getForceSelection()&&t){this.setSelection(null);this.setValue("");return this.setProperty("selectedKey",e)}var i=this.getItemByKey(e);if(i||t){if(!i&&t){i=this.getDefaultSelectedItem()}this.setSelection(i);this.setValue(this._getSelectedItemText(i));this._oSelectionOnFocus=i;return this}return this.setProperty("selectedKey",e)};M.prototype.setValueState=function(e){var t=this.getValueState(),i,s;if(e===t){return this}s=this.getPicker();if(s&&s.isA("sap.m.Popover")&&s.isOpen()&&s.oPopup.getOpenState()===O.CLOSING){s.attachEventOnce("afterClose",function(t){this._updatePickerAriaLabelledBy(e)},this)}else{this._updatePickerAriaLabelledBy(e)}this.setProperty("valueState",e);if(this._isFocused()){this._announceValueStateText()}i=this.getDomRefForValueState();if(!i){return this}if(!this.isOpen()&&this.shouldValueStateMessageBeOpened()&&document.activeElement===i){this.openValueStateMessage()}else{this.closeValueStateMessage()}this._updatePickerValueStateContentText();this._updatePickerValueStateContentStyles();return this};M.prototype.setValueStateText=function(e){var t=this.getValueStateTextInvisibleText();this.setProperty("valueStateText",e);if(t){t.setText(e)}if(this.getDomRefForValueState()){this._updatePickerValueStateContentText();this._updatePickerValueStateContentStyles()}if(this._isFocused()){this._announceValueStateText()}return this};M.prototype.getItemAt=function(e){return this.getItems()[+e]||null};M.prototype.getSelectedItem=function(){var e=this.getAssociation("selectedItem");return e===null?null:n.byId(e)||null};M.prototype.getFirstItem=M.prototype.getLastItem=M.prototype.getEnabledItems=function(e){var t=this.getList();return t?t.getEnabledItems(e):[]};M.prototype.getItemByKey=M.prototype.removeItem=function(e){var t;e=this.removeAggregation("items",e);if(this.getItems().length===0){this.clearSelection()}else if(this.isItemSelected(e)){t=this.findFirstEnabledItem();if(t){this.setSelection(t)}}this.setValue(this._getSelectedItemText());if(e){e.detachEvent("_change",this.onItemChange,this)}return e};M.prototype.removeAllItems=function(){var e=this.removeAllAggregation("items");this.setValue("");if(this._isShadowListRequired()){this.$().find(".sapMSelectListItemBase").remove()}for(var t=0;t<e.length;t++){e[t].detachEvent("_change",this.onItemChange,this)}return e};M.prototype.destroyItems=function(){this.destroyAggregation("items");this.setValue("");if(this._isShadowListRequired()){this.$().find(".sapMSelectListItemBase").remove()}return this};M.prototype.isOpen=function(){var e=this.getAggregation("picker");return!!(e&&e.isOpen())};M.prototype.close=function(){var e=this.getAggregation("picker");if(e){e.close()}return this};M.prototype.getDomRefForValueState=function(){return this.getFocusDomRef()};M.prototype._isRequired=function(){return this.getRequired()||a.isRequired(this)};M.prototype.getAccessibilityInfo=function(){var e=[],t="",i=n.getLibraryResourceBundle("sap.m"),s=this._isIconOnly(),o={role:this.getRenderer().getAriaRole(this),focusable:this.getEnabled(),enabled:this.getEnabled(),readonly:s?undefined:this.getEnabled()&&!this.getEditable()};if(s){var r=this.getTooltip_AsString();if(!r){var a=u.getIconInfo(this.getIcon());r=a&&a.text?a.text:""}o.type=i.getText("ACC_CTR_TYPE_BUTTON");e.push(r)}else if(this.getType()==="Default"){o.type=i.getText("SELECT_ROLE_DESCRIPTION");e.push(this._getSelectedItemText())}if(this._isRequired()){e.push(i.getText("SELECT_REQUIRED"))}t=e.join(" ").trim();if(t){o.description=t}return o};M.prototype._getToolbarInteractive=function(){return true};M.prototype.getIdForLabel=return M});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/SplitContainer",["./library","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ui/Device","sap/m/NavContainer","sap/m/Popover","sap/m/Button","./SplitContainerRenderer","sap/ui/dom/containsOrEquals","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Configuration"],function(e,t,a,i,o,s,r,n,p,l,h,g,u){"use strict";var f=e.ButtonType;var d=e.PlacementType;var _=e.SplitAppMode;var M=t.extend("sap.m.SplitContainer",{metadata:{library:"sap.m",interfaces:["sap.ui.core.IPlaceholderSupport"],properties:{defaultTransitionNameDetail:{type:"string",group:"Appearance",defaultValue:"slide"},defaultTransitionNameMaster:{type:"string",group:"Appearance",defaultValue:"slide"},mode:{type:"sap.m.SplitAppMode",group:"Appearance",defaultValue:_.ShowHideMode},masterButtonText:{type:"string",group:"Appearance",defaultValue:null},masterButtonTooltip:{type:"string",group:"Appearance",defaultValue:null},backgroundColor:{type:"string",group:"Appearance",defaultValue:null},backgroundImage:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},backgroundRepeat:{type:"boolean",group:"Appearance",defaultValue:false},backgroundOpacity:{type:"float",group:"Appearance",defaultValue:1}},aggregations:{masterPages:{type:"sap.ui.core.Control",multiple:true,singularName:"masterPage"},detailPages:{type:"sap.ui.core.Control",multiple:true,singularName:"detailPage"},_navMaster:{type:"sap.m.NavContainer",multiple:false,visibility:"hidden"},_navDetail:{type:"sap.m.NavContainer",multiple:false,visibility:"hidden"},_navPopover:{type:"sap.m.Popover",multiple:false,visibility:"hidden"}},associations:{initialDetail:{type:"sap.ui.core.Control",multiple:false},initialMaster:{type:"sap.ui.core.Control",multiple:false}},events:{masterNavigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},afterMasterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},masterButton:{},beforeMasterOpen:{},afterMasterOpen:{},beforeMasterClose:{},afterMasterClose:{},detailNavigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},afterDetailNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}}},designtime:"sap/m/designtime/SplitContainer.designtime"},renderer:p});M.prototype.init=function(){var e=this;if(u.getAccessibility()&&!M._sAriaPopupLabelId){M._sAriaPopupLabelId=new i({text:""}).toStatic().getId()}this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._aMasterPages=[];this._aDetailPages=[];if(!o.system.phone){this._oMasterNav=new s(this.getId()+"-Master",{width:"",navigate:function(t){e._handleNavigationEvent(t,false,true)},afterNavigate:);this._oDetailNav=new s(this.getId()+"-Detail",{width:"",navigate:function(t){e._handleNavigationEvent(t,false,false)},afterNavigate:function(t){e._handleNavigationEvent(t,true,false)}});this.setAggregation("_navMaster",this._oMasterNav,true);this.setAggregation("_navDetail",this._oDetailNav,true);this._createShowMasterButton();this._oPopOver=new r(this.getId()+"-Popover",{placement:d.Bottom,showHeader:false,contentWidth:"320px",contentHeight:"600px",beforeOpen:function(){e.fireBeforeMasterOpen()},beforeClose:function(){e.fireBeforeMasterClose()},afterOpen:afterClose:function(){e._afterHideMasterAnimation()}}).addStyleClass("sapMSplitContainerPopover");if(M._sAriaPopupLabelId){this._oPopOver.addAriaLabelledBy(M._sAriaPopupLabelId)}this.setAggregation("_navPopover",this._oPopOver,true)}else{this._oMasterNav=this._oDetailNav=new s({width:"",navigate:function(t){e._handleNavigationEvent(t,false,true)},afterNavigate:);this.setAggregation("_navMaster",this._oMasterNav,true)}this._oldIsLandscape=o.orientation.landscape;this._bMasterisOpen=false;var e=this;var t=function(t,a,i){return function(o,s,r){t.apply(e[a],arguments);if(s==="pages"&&e[i]&&e[i].indexOf(o)!==-1){e._removePageFromArray(e[i],o)}}};var a=this._oMasterNav._removeChild;this._oMasterNav._removeChild=t(a,"_oMasterNav","_aMasterPages");if(this._oDetailNav){var n=this._oDetailNav._removeChild;this._oDetailNav._removeChild=t(n,"_oDetailNav","_aDetailPages")}if(o.support.touch){this._fnWindowScroll=this._onWindowScroll.bind(this);window.addEventListener("scroll",this._fnWindowScroll,true)}};M.prototype.onBeforeRendering=function(){if(this._fnResize){o.resize.detachHandler(this._fnResize)}if(this._bMasterisOpen&&(this._portraitHide()||this._hideMode())){this._oShowMasterBtn.removeStyleClass("sapMSplitContainerMasterBtnHidden");this._bMasterisOpen=false}this._oMasterNav.setInitialPage(sap.ui.getCore().byId(this.getInitialMaster()));this._oMasterNav.setDefaultTransitionName(this.getDefaultTransitionNameMaster());this._updateMasterButtonTooltip();if(!o.system.phone){this._oDetailNav.setInitialPage(sap.ui.getCore().byId(this.getInitialDetail()));this._updateMasterButtonText()}this._oDetailNav.setDefaultTransitionName(this.getDefaultTransitionNameDetail())};M.prototype.exit=function(){if(this._fnResize){o.resize.detachHandler(this._fnResize)}delete this._aMasterPages;delete this._aDetailPages;if(this._oShowMasterBtn){this._oShowMasterBtn.destroy();this._oShowMasterBtn=null}if(o.support.touch){window.removeEventListener("scroll",this._fnWindowScroll)}};M.prototype.onAfterRendering=function(){if(!o.system.phone&&this._oPopOver&&this._oPopOver.isOpen()){this._oPopOver.close()}if(!this._fnResize){this._fnResize=g.proxy(this._handleResize,this)}o.resize.attachHandler(this._fnResize);setTimeout(bind(this),0)};M.prototype.applySettings=function(e,a){t.prototype.applySettings.call(this,e,a);this._updateMasterInitialPage()};M.prototype.ontouchstart=function(e){if(!o.system.phone){this._bIgnoreSwipe=e.originalEvent&&e.originalEvent._sapui_handledByControl}};M.prototype.ontouchend=function(e){if(!this._bIgnoreSwipe){this._bIgnoreSwipe=this._oScrolledElement&&l(this._oScrolledElement,e.target)}this._oScrolledElement=null};M.prototype._onWindowScroll=M.prototype.onswiperight=function(e){if(o.support.touch===false){return}if((o.system.tablet||o.os.windows&&o.os.version>=8)&&(this._portraitHide()||this._hideMode())&&!this._bIgnoreSwipe&&!this._bDetailNavButton){this.showMaster()}};M.prototype.ontap=function(e){if(o.system.phone){return}var t=true,a=g(e.target).closest(".sapMSplitContainerDetail, .sapMSplitContainerMaster"),i=e.srcControl,s=i.getParent(),r=s&&s.isA("sap.m.Button")?s.getMetadata():i.getMetadata();if(a.length>0&&a.hasClass("sapMSplitContainerDetail")){t=false}if((!this._oldIsLandscape&&this.getMode()=="ShowHideMode"||this.getMode()=="HideMode")&&!t&&!l(this._oShowMasterBtn.getDomRef(),e.target)&&(!r.getEvent("tap")||!r.getEvent("press"))){this.hideMaster()}};M.prototype.onswipeleft=function(e){if((o.system.tablet||o.os.windows&&o.os.version>=8)&&(this._portraitHide()||this._hideMode())&&!this._bIgnoreSwipe){this.hideMaster()}};M.prototype._onMasterButtonTap=function(e){if(o.system.phone){return}if(!this._oldIsLandscape){if(this.getMode()=="PopoverMode"){if(!this._oPopOver.isOpen()){this._oPopOver.openBy(this._oShowMasterBtn,true)}else{this._oPopOver.close()}}else{this.showMaster()}}else{if(this.getMode()==="HideMode"){this.showMaster()}}};M.prototype.to=function(e,t,a,i){if(this._oMasterNav.getPage(e)){this._oMasterNav.to(e,t,a,i)}else{this._oDetailNav.to(e,t,a,i)}};M.prototype.backToPage=function(e,t,a){if(this._oMasterNav.getPage(e)){this._oMasterNav.backToPage(e,t,a)}else{this._oDetailNav.backToPage(e,t,a)}};M.prototype._safeBackToPage=function(e,t,a,i){if(this._oMasterNav.getPage(e)){this._oMasterNav._safeBackToPage(e,t,a,i)}else{this._oDetailNav._safeBackToPage(e,t,a,i)}};M.prototype.insertPreviousPage=function(e,t,a){if(this._oMasterNav.getPage(e)){this._oMasterNav.insertPreviousPage(e,t,a)}else{this._oDetailNav.insertPreviousPage(e,t,a)}return this};M.prototype.toMaster=function(e,t,a,i){this._oMasterNav.to(e,t,a,i)};M.prototype.backMaster=function(e,t){this._oMasterNav.back(e,t)};M.prototype.backMasterToPage=function(e,t,a){this._oMasterNav.backToPage(e,t,a)};M.prototype.toDetail=M.prototype.backDetail=function(e,t){this._oDetailNav.back(e,t)};M.prototype.backDetailToPage=M.prototype.backToTopMaster=function(e,t){this._oMasterNav.backToTop(e,t)};M.prototype.backToTopDetail=M.prototype.addMasterPage=function(e){if(this._hasPageInArray(this._aMasterPages,e)){return}if(this._oMasterNav===this._oDetailNav&&this._oDetailNav.getPages()&&this._oDetailNav.getPages().indexOf(e)!==-1){this._removePageFromArray(this._aDetailPages,e)}this._oMasterNav.insertPage(e,this._aMasterPages.length);this._aMasterPages.push(e);return this};M.prototype.addDetailPage=function(e){var t=this,a=this._getRealPage(e);if(this._hasPageInArray(this._aDetailPages,e)){return}e.addDelegate({onBeforeShow:function(){if(a){if(!o.system.phone){if(t._needShowMasterButton()){t._setMasterButton(a)}}}}});if(a){a.addDelegate({onBeforeRendering:function(){if(!o.system.phone&&t._oDetailNav.getCurrentPage()===a){if(!a.getShowNavButton()&&t._needShowMasterButton()){t._setMasterButton(a,true)}else{t._removeMasterButton(a)}}}});if(!o.system.phone){if(!a._setCustomHeaderInSC){a._setCustomHeaderInSC=a.setCustomHeader}a.setCustomHeader=function(e){this._setCustomHeaderInSC.apply(this,arguments);if(e&&t._needShowMasterButton()){t._setMasterButton(a)}return this};if(!a._setShowNavButtonInSC){a._setShowNavButtonInSC=a.setShowNavButton}a.setShowNavButton=function(e){this._setShowNavButtonInSC.apply(this,arguments);if(!e&&t._needShowMasterButton()){t._setMasterButton(a)}else{t._removeMasterButton(a,true)}return this}}}if(this._oMasterNav===this._oDetailNav&&this._oMasterNav.getPages()&&this._oMasterNav.getPages().indexOf(e)!==-1){this._removePageFromArray(this._aMasterPages,e)}this._oDetailNav.addPage(e);this._aDetailPages.push(e);return this};M.prototype.getMasterPages=function(){return this._aMasterPages.slice()};M.prototype.getDetailPages=function(){return this._aDetailPages.slice()};M.prototype.indexOfMasterPage=function(e){return this._indexOfMasterPage(e)};M.prototype.indexOfDetailPage=M.prototype.insertMasterPage=function(e,t,a){return this._insertPage(this._aMasterPages,"masterPages",e,t,a)};M.prototype.removeMasterPage=function(e,t){return this._removePage(this._aMasterPages,"masterPages",e,t)};M.prototype.removeAllMasterPages=function(e){this._aMasterPages=[];return this.removeAllAggregation("masterPages",e)};M.prototype.insertDetailPage=function(e,t,a){return this._insertPage(this._aDetailPages,"detailPages",e,t,a)};M.prototype._restoreMethodsInPage=function(e){if(o.system.phone){return}var t=this._getRealPage(e);if(t){if(t._setCustomHeaderInSC){t.setCustomHeader=t._setCustomHeaderInSC;delete t._setCustomHeaderInSC}if(t._setShowNavButtonInSC){t.setShowNavButton=t._setShowNavButtonInSC;delete t._setShowNavButtonInSC}}};M.prototype.removeDetailPage=function(e,t){this._restoreMethodsInPage(e);return this._removePage(this._aDetailPages,"detailPages",e,t)};M.prototype.removeAllDetailPages=function(e){var t=this.getDetailPages();for(var a=0;a<t.length;a++){this._restoreMethodsInPage(t[a])}this._aDetailPages=[];return this.removeAllAggregation("detailPages",e)};M.prototype.addPage=function(e,t){if(t){return this.addMasterPage(e)}else{return this.addDetailPage(e)}};M.prototype.showMaster=function(){var e=this._getRealPage(this._oDetailNav.getCurrentPage());function t(){this._oPopOver.detachAfterOpen(t,this);this._bMasterOpening=false;this._bMasterisOpen=true;this.fireAfterMasterOpen()}if(this._portraitPopover()){if(!this._oPopOver.isOpen()){this._oPopOver.attachAfterOpen(t,this);this.fireBeforeMasterOpen();this._oPopOver.openBy(this._oShowMasterBtn,true);this._bMasterOpening=true}}else if((this._portraitHide()||this._hideMode())&&(!this._bMasterisOpen||this._bMasterClosing)){this._oMasterNav.$().on("webkitTransitionEnd transitionend",this._afterShowMasterAnimation.bind(this));this.fireBeforeMasterOpen();this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterVisible",true);this._oMasterNav.getDomRef()&&this._oMasterNav.getDomRef().offsetHeight;this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterHidden",false);this._bMasterOpening=true;this._removeMasterButton(e);if(o.browser.webkit){var a=this._oMasterNav;window.setTimeout(function(){a.$().css("box-shadow","none");window.setTimeout(50)},0)}}return this};M.prototype.hideMaster=function(){if(this._portraitPopover()){if(this._oPopOver.isOpen()){this._oPopOver.close();this._bMasterClosing=true}}else if((this._portraitHide()||this._hideMode())&&(this._bMasterisOpen||this._oMasterNav.$().hasClass("sapMSplitContainerMasterVisible"))){this._oMasterNav.$().on("webkitTransitionEnd transitionend",this._afterHideMasterAnimation.bind(this));this.fireBeforeMasterClose();this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterVisible",false);this._oMasterNav.getDomRef()&&this._oMasterNav.getDomRef().offsetHeight;this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterHidden",true);this._bMasterClosing=true}return this};M.prototype._afterShowMasterAnimation=function(){this._oMasterNav.$().off("webkitTransitionEnd transitionend");if(this._portraitHide()||this._hideMode()){this._bMasterOpening=false;this._bMasterisOpen=true;this.fireAfterMasterOpen()}};M.prototype._afterHideMasterAnimation=function(){this._oMasterNav.$().off("webkitTransitionEnd transitionend");var e=this._getRealPage(this._oDetailNav.getCurrentPage());this._setMasterButton(e);this._bMasterClosing=false;this._bMasterisOpen=false;if(l(this._oMasterNav.getDomRef(),document.activeElement)){document.activeElement.blur()}this.fireAfterMasterClose()};M.prototype.getCurrentMasterPage=function(){return this._oMasterNav.getCurrentPage()};M.prototype.getCurrentDetailPage=function(){return this._oDetailNav.getCurrentPage()};M.prototype.getCurrentPage=function(e){if(e){return this.getCurrentMasterPage()}else{return this.getCurrentDetailPage()}};M.prototype.getPreviousPage=function(e){if(e){return this._oMasterNav.getPreviousPage()}else{return this._oDetailNav.getPreviousPage()}};M.prototype.getMasterPage=function(e){return this._oMasterNav.getPage(e)};M.prototype.getDetailPage=function(e){return this._oDetailNav.getPage(e)};M.prototype.getPage=function(e,t){if(t){return this.getMasterPage(e)}else{return this.getDetailPage(e)}};M.prototype.isMasterShown=function(){if(o.system.phone){var e=this._oMasterNav.getCurrentPage();return this._indexOfMasterPage(e)!==-1}else{var t=this.getMode();switch(t){case _.StretchCompressMode:return true;case _.HideMode:return this._bMasterisOpen;case _.PopoverMode:case _.ShowHideMode:return o.orientation.landscape||this._bMasterisOpen;default:return false}}};M.prototype.setBackgroundOpacity=function(e){if(e>1||e<0){h.warning("Invalid value "+e+" for SplitContainer.setBackgroundOpacity() ignored. Valid values are: floats between 0 and 1.");return this}return this.setProperty("backgroundOpacity",e)};M.prototype.setMode=function(e){var t=this.getMode();if(t===e){return this}this.setProperty("mode",e,true);if(o.system.phone||!this.getDomRef()){return this}if(t==="HideMode"&&this._oldIsLandscape){this._removeMasterButton(this._oDetailNav.getCurrentPage())}var a=this.getDomRef();if(e!=="PopoverMode"&&this._oPopOver.getContent().length>0){this._updateMasterPosition("landscape")}else if(e=="PopoverMode"){if(!this._oldIsLandscape){if(this._oPopOver.getContent().length===0){this._updateMasterPosition("popover")}this._setMasterButton(this._oDetailNav.getCurrentPage())}a.classList.remove("sapMSplitContainerShowHide");a.classList.remove("sapMSplitContainerStretchCompress");a.classList.remove("sapMSplitContainerHideMode");a.classList.add("sapMSplitContainerPopover")}if(e=="StretchCompressMode"){a.classList.remove("sapMSplitContainerShowHide");a.classList.remove("sapMSplitContainerPopover");a.classList.remove("sapMSplitContainerHideMode");a.classList.add("sapMSplitContainerStretchCompress");this._removeMasterButton(this._oDetailNav.getCurrentPage())}if(e=="ShowHideMode"){a.classList.remove("sapMSplitContainerPopover");a.classList.remove("sapMSplitContainerStretchCompress");a.classList.remove("sapMSplitContainerHideMode");a.classList.add("sapMSplitContainerShowHide");if(!o.orientation.landscape){this._setMasterButton(this._oDetailNav.getCurrentPage())}}if(e==="HideMode"){a.classList.remove("sapMSplitContainerPopover");a.classList.remove("sapMSplitContainerStretchCompress");a.classList.remove("sapMSplitContainerShowHide");a.classList.add("sapMSplitContainerHideMode");this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterVisible",false);this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterHidden",true);this._bMasterisOpen=false;this._setMasterButton(this._oDetailNav.getCurrentPage())}return this};M.prototype._updateMasterInitialPage=function(){if(this.getMode()==="HideMode"&&o.system.phone&&this._aDetailPages){this._oMasterNav.setInitialPage(this.getInitialDetail()?this.getInitialDetail():this.getInitialMaster()||this._aDetailPages[0])}};M.prototype._indexOfMasterPage=function(e){return this._aMasterPages.indexOf(e)};M.prototype._indexOfDetailPage=function(e){return this._aDetailPages.indexOf(e)};M.prototype._insertPage=function(e,t,a,i,o){this.insertAggregation(t,a,i,o);var s;if(i<0){s=0}else if(i>e.length){s=e.length}else{s=i}var r=e?Array.prototype.indexOf.call(e,a):-1;e.splice(s,0,a);if(r!=-1){this._removePageFromArray(e,a)}return this};M.prototype._removePage=function(e,t,a,i){var o=this.removeAggregation(t,a,i);if(o){this._removePageFromArray(e,o)}return o};M.prototype._removePageFromArray=function(e,t){var a=e?Array.prototype.indexOf.call(e,t):-1;if(a!=-1){e.splice(a,1);if(e===this._aDetailPages){this._restoreMethodsInPage(t)}}};M.prototype._handleNavigationEvent=function(e,t,a){var i=(t?"After":"")+(a?"Master":"Detail")+"Navigate",o;i=i.charAt(0).toLowerCase()+i.slice(1);o=this.fireEvent(i,e.mParameters,true);if(!o){e.preventDefault()}};M.prototype._handleResize=function(){var e=o.orientation.landscape,t=this._oDetailNav.getCurrentPage(),a=this.getMode();if(this._oldIsLandscape!==e){this._oldIsLandscape=e;if(!o.system.phone){this.$().toggleClass("sapMSplitContainerPortrait",!e);if(a==="HideMode"){return}if(a==="ShowHideMode"){if(e){this.fireBeforeMasterOpen()}else{this.fireBeforeMasterClose()}}if(a==="ShowHideMode"||a==="PopoverMode"){this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterVisible",e);this._oMasterNav.toggleStyleClass("sapMSplitContainerMasterHidden",!e)}if(a==="ShowHideMode"){if(e){this._bMasterisOpen=true;this.fireAfterMasterOpen()}else{this._bMasterisOpen=false;this.fireAfterMasterClose()}}if(a=="PopoverMode"){if(this._oPopOver.isOpen()){this._oPopOver.attachAfterClose(this._handlePopClose,this);this._oPopOver.close()}else{this._handlePopClose()}}t=this._getRealPage(t);if(!this._oldIsLandscape&&a!="StretchCompressMode"){this._setMasterButton(t)}else{this._removeMasterButton(t)}}if(this._onOrientationChange){this._onOrientationChange()}}};M.prototype._handlePopClose=function(e){this._oPopOver.detachAfterClose(this._handlePopClose,this);if(this._oldIsLandscape){this._updateMasterPosition("landscape")}else{this._updateMasterPosition("popover")}};M.prototype._getRealPage=function(e){var a=e,i;while(a){if(a instanceof t&&a.isA(["sap.m.Page","sap.m.MessagePage","sap.m.semantic.SemanticPage"])){return a}if(a instanceof t&&a.isA("sap.ui.core.mvc.View")){i=a.getContent();if(i.length===1){a=i[0];continue}}else if(a instanceof s){a=a.getCurrentPage();continue}a=null}return a};M.prototype._updateMasterPosition=function(e){var t=this;if(e=="popover"){this.removeAggregation("_navMaster",this._oMasterNav,true);this._oMasterNav.$().remove();this._oPopOver.addContent(this._oMasterNav);this._bMasterisOpen=false}if(e=="landscape"){var a=function(){t._oPopOver.removeAggregation("content",t._oMasterNav,false);t.setAggregation("_navMaster",t._oMasterNav,true);var e=t.$();if(e[0]){var a=sap.ui.getCore().createRenderManager();a.renderControl(t._oMasterNav.addStyleClass("sapMSplitContainerMaster"));a.flush(e[0],false,t.$("BG")[0]?1:0);a.destroy()}};if(this._oPopOver.isOpen()){var i=function(){this._oPopOver.detachAfterClose(i,this);this._bMasterisOpen=false;a()};this._oPopOver.attachAfterClose(i,this);this._oPopOver.close()}else{a()}}};M.prototype._portraitHide=function(){if(!this._oldIsLandscape&&!o.system.phone&&this.getMode()==="ShowHideMode"){return true}else{return false}};M.prototype._portraitPopover=function(){if(!this._oldIsLandscape&&!o.system.phone&&this.getMode()==="PopoverMode"){return true}else{return false}};M.prototype._hideMode=function(){return this.getMode()==="HideMode"&&!o.system.phone};M.prototype._needShowMasterButton=function(){return(this._portraitHide()||this._hideMode()||this._portraitPopover())&&(!this._bMasterisOpen||this._bMasterClosing)};M.prototype._updateMasterButtonTooltip=function(){if(!this._oShowMasterBtn){return}var e=this.getMasterButtonTooltip();if(e){this._oShowMasterBtn.setTooltip(e);return}var t=this._oMasterNav.getCurrentPage();if(t&&t.getTitle){var a=t.getTitle();if(a){a=a.replace(/[_0-9]+$/,"");e=this._rb.getText("SPLITCONTAINER_NAVBUTTON_TOOLTIP",a)}}if(!e){e=this._rb.getText("SPLITCONTAINER_NAVBUTTON_DEFAULT_TOOLTIP")}this._oShowMasterBtn.setTooltip(e)};M.prototype._updateMasterButtonText=function(){this._oShowMasterBtn.setText(this.getMasterButtonText()||this._rb.getText("SPLITCONTAINER_NAVBUTTON_TEXT"))};M.prototype._createShowMasterButton=function(){if(this._oShowMasterBtn&&!this._oShowMasterBtn.bIsDestroyed){return}this._oShowMasterBtn=new n(this.getId()+"-MasterBtn",{icon:a.getIconURI("menu2"),tooltip:this.getMasterButtonTooltip(),type:f.Default,press:g.proxy(this._onMasterButtonTap,this)}).addStyleClass("sapMSplitContainerMasterBtn")};M.prototype._setMasterButton=function(e,t,a){if(!e){return}if(typeof t==="boolean"){a=t;t=undefined}e=this._getRealPage(e);if(!e){return}var i=M._getHeaderButtonAggregation(e),o=i.sAggregationName,s=i.aAggregationContent;for(var r=0;r<s.length;r++){if(s[r]instanceof n&&s[r].getVisible()&&(s[r].getType()==f.Back||s[r].getType()==f.Up&&s[r]!==this._oShowMasterBtn)){this._bDetailNavButton=true;return}}this._bDetailNavButton=false;var p=e._getAnyHeader();var l=false;for(var r=0;r<s.length;r++){if(s[r]===this._oShowMasterBtn){l=true}}if(!l){this._createShowMasterButton();this._updateMasterButtonTooltip();this._updateMasterButtonText();this._oShowMasterBtn.removeStyleClass("sapMSplitContainerMasterBtnHidden");if(p){p.insertAggregation(o,this._oShowMasterBtn,0,a)}}else{this._oShowMasterBtn.$().parent().toggleClass("sapMSplitContainerMasterBtnHide",false);this._oShowMasterBtn.removeStyleClass("sapMSplitContainerMasterBtnHidden");this._oShowMasterBtn.$().parent().toggleClass("sapMSplitContainerMasterBtnShow",true)}if(t){t(e)}this.fireMasterButton({show:true})};M._getHeaderButtonAggregation=function(e){var t=e._getAnyHeader(),a,i;if(!t){return}if(t.getContentLeft){a=t.getContentLeft();i="contentLeft"}if(t.getContent){a=t.getContent();i="content"}return{aAggregationContent:a,sAggregationName:i}};M.prototype._removeMasterButton=function(e,t,a){if(!e){return}var i=this,o=this._oShowMasterBtn.$().is(":hidden"),s;if(typeof t==="boolean"){a=t;t=undefined}if(!o&&!a){e=this._getRealPage(e);if(!e){return}s=e._getAnyHeader();if(s){var r=M._getHeaderButtonAggregation(e).aAggregationContent;for(var n=0;n<r.length;n++){if(r[n]===this._oShowMasterBtn){this._oShowMasterBtn.destroy();this._oShowMasterBtn.$().parent().on("webkitAnimationEnd animationend",function(){g(this).off("webkitAnimationEnd animationend");i._oShowMasterBtn.addStyleClass("sapMSplitContainerMasterBtnHidden");if(t){t(e)}});break}}}this.fireMasterButton({show:false})}else{this._oShowMasterBtn.addStyleClass("sapMSplitContainerMasterBtnHidden");if(t){t(e)}if(!o){this.fireMasterButton({show:false})}}};M.prototype._callSuperMethod=function(e,a){var i=Array.prototype.slice.call(arguments);if(a==="masterPages"){if(e==="indexOfAggregation"){return this._indexOfMasterPage.apply(this,i.slice(2))}else{return this._callNavContainerMethod(e,this._oMasterNav,i)}}else if(a==="detailPages"){if(e==="indexOfAggregation"){return this._indexOfDetailPage.apply(this,i.slice(2))}else{return this._callNavContainerMethod(e,this._oDetailNav,i)}}else{return t.prototype[e].apply(this,i.slice(1))}};M.prototype._callNavContainerMethod=function(e,t,a){a[1]="pages";a=a.slice(1);var i=M._mFunctionMapping[e];if(i){a.shift();e=i}return t[e].apply(t,a)};M.prototype._hasPageInArray=function(e,t){return e.some(};M.prototype.showPlaceholder=function(e){if(!u.getPlaceholder()){return}switch(e&&e.aggregation){case"masterPages":return this.getAggregation("_navMaster").showPlaceholder(e);default:return this.getAggregation("_navDetail").showPlaceholder(e)}};M.prototype.hidePlaceholder=function(e){switch(e.aggregation){case"masterPages":this.getAggregation("_navMaster").hidePlaceholder(e);break;default:this.getAggregation("_navDetail").hidePlaceholder(e)}};M.prototype.needPlaceholder=function(e,t){var a;switch(e){case"masterPages":a=this.getAggregation("_navMaster");break;default:a=this.getAggregation("_navDetail")}return!t||a.getCurrentPage()!==t};M.prototype.validateAggregation=function(e,t,a){return this._callSuperMethod("validateAggregation",e,t,a)};M.prototype.setAggregation=function(e,t,a){this._callSuperMethod("setAggregation",e,t,a);return this};M.prototype.getAggregation=function(e,t){return this._callSuperMethod("getAggregation",e,t)};M.prototype.indexOfAggregation=function(e,t){return this._callSuperMethod("indexOfAggregation",e,t)};M.prototype.insertAggregation=function(e,t,a,i){this._callSuperMethod("insertAggregation",e,t,a,i);return this};M.prototype.addAggregation=function(e,t,a){this._callSuperMethod("addAggregation",e,t,a);return this};M.prototype.removeAggregation=M.prototype.removeAllAggregation=function(e,t){return this._callSuperMethod("removeAllAggregation",e,t)};M.prototype.destroyAggregation=function(e,t){this._callSuperMethod("destroyAggregation",e,t);return this};M._mFunctionMapping={getAggregation:"getPage",addAggregation:"addPage",insertAggregation:"insertPage",removeAggregation:"removePage",removeAllAggregation:"removeAllPages"};return M});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/library",["sap/ui/Device","sap/ui/base/DataType","sap/ui/base/EventProvider","sap/ui/core/Control","sap/base/util/ObjectPath","sap/ui/util/openWindow","sap/ui/core/library","sap/base/strings/capitalize","sap/ui/thirdparty/jquery","sap/base/assert","sap/base/Log","sap/base/util/defineLazyProperty","sap/base/security/encodeCSS","./AvatarShape","./AvatarSize","./AvatarType","./AvatarColor","./AvatarImageFitType","./IllustratedMessageSize","./IllustratedMessageType","./upload/UploaderHttpRequestMethod","sap/ui/core/theming/Parameters","sap/ui/core/LocaleData","sap/ui/core/Configuration","./Support"],function(e,t,a,n,i,o,r,s,l,p,m,u,c,d,g,T,S,f,A,y,I,C,h,b){"use strict";var v=sap.ui.getCore().initLibrary({name:"sap.m",version:"1.114.3",dependencies:["sap.ui.core"],designtime:"sap/m/designtime/library.designtime",types:["sap.m.AvatarImageFitType","sap.m.AvatarShape","sap.m.AvatarSize","sap.m.AvatarType","sap.m.AvatarColor","sap.m.BackgroundDesign","sap.m.BadgeState","sap.m.BadgeAnimationType","sap.m.BarDesign","sap.m.BreadcrumbsSeparatorStyle","sap.m.ButtonAccessibleRole","sap.m.ButtonType","sap.m.CarouselArrowsPlacement","sap.m.DateTimeInputType","sap.m.DeviationIndicator","sap.m.DialogRoleType","sap.m.DialogType","sap.m.DraftIndicatorState","sap.m.FacetFilterListDataType","sap.m.FacetFilterType","sap.m.FlexAlignContent","sap.m.FlexAlignItems","sap.m.FlexAlignSelf","sap.m.FlexDirection","sap.m.FlexJustifyContent","sap.m.FlexRendertype","sap.m.FlexWrap","sap.m.FrameType","sap.m.GenericTagDesign","sap.m.GenericTagValueState","sap.m.GenericTileMode","sap.m.Priority","sap.m.GenericTileScope","sap.m.HeaderLevel","sap.m.IBarHTMLTag","sap.m.IconTabDensityMode","sap.m.IconTabFilterDesign","sap.m.IconTabHeaderMode","sap.m.IllustratedMessageSize","sap.m.IllustratedMessageType","sap.m.ImageMode","sap.m.InputTextFormatMode","sap.m.InputType","sap.m.LabelDesign","sap.m.LightBoxLoadingStates","sap.m.LinkConversion","sap.m.LinkAccessibleRole","sap.m.ListGrowingDirection","sap.m.ListHeaderDesign","sap.m.ListKeyboardMode","sap.m.ListMode","sap.m.ListSeparators","sap.m.ListType","sap.m.LoadState","sap.m.MenuButtonMode","sap.m.MultiSelectMode","sap.m.ObjectHeaderPictureShape","sap.m.ObjectMarkerType","sap.m.ObjectMarkerVisibility","sap.m.OverflowToolbarPriority","sap.m.P13nPanelType","sap.m.P13nConditionOperation","sap.m.PageBackgroundDesign","sap.m.PanelAccessibleRole","sap.m.PDFViewerDisplayType","sap.m.PlacementType","sap.m.PlanningCalendarBuiltInView","sap.m.PlanningCalendarStickyMode","sap.m.PopinDisplay","sap.m.PopinLayout","sap.m.QuickViewGroupElementType","sap.m.RatingIndicatorVisualMode","sap.m.ScreenSize","sap.m.SelectColumnRatio","sap.m.SelectionDetailsActionLevel","sap.m.SelectListKeyboardNavigationMode","sap.m.SelectType","sap.m.Size","sap.m.SplitAppMode","sap.m.StandardDynamicDateRangeKeys","sap.m.StandardTileType","sap.m.StepInputStepModeType","sap.m.StepInputValidationMode","sap.m.Sticky","sap.m.StringFilterOperator","sap.m.SwipeDirection","sap.m.SwitchType","sap.m.TabsOverflowMode","sap.m.TileSizeBehavior","sap.m.TimePickerMaskMode","sap.m.TitleAlignment","sap.m.TokenizerRenderMode","sap.m.ToolbarDesign","sap.m.ToolbarStyle","sap.m.UploadState","sap.m.ValueColor","sap.m.ValueCSSColor","sap.m.VerticalPlacementType","sap.m.WrappingType","sap.m.WizardRenderMode","sap.m.semantic.SemanticRuleSetType","sap.m.table.columnmenu.Category","sap.m.upload.UploaderHttpRequestMethod"],interfaces:["sap.m.IBar","sap.m.IBadge","sap.m.IBreadcrumbs","sap.m.p13n.IContent","sap.m.IconTab","sap.m.IScale","sap.m.semantic.IGroup","sap.m.semantic.IFilter","sap.m.semantic.ISort","sap.m.ObjectHeaderContainer","sap.m.IOverflowToolbarContent","sap.m.IOverflowToolbarFlexibleContent","sap.m.IToolbarInteractiveControl","sap.m.IHyphenation"],controls:["sap.m.ActionListItem","sap.m.ActionSelect","sap.m.ActionSheet","sap.m.ActionTile","sap.m.ActionTileContent","sap.m.App","sap.m.Avatar","sap.m.Bar","sap.m.BusyDialog","sap.m.BusyIndicator","sap.m.Button","sap.m.Breadcrumbs","sap.m.Carousel","sap.m.CheckBox","sap.m.ColumnHeaderPopover","sap.m.ColumnListItem","sap.m.ColorPalette","sap.m.ColorPalettePopover","sap.m.ComboBox","sap.m.ComboBoxTextField","sap.m.ComboBoxBase","sap.m.CustomAttribute","sap.m.CustomListItem","sap.m.CustomTile","sap.m.CustomTreeItem","sap.m.DatePicker","sap.m.DateRangeSelection","sap.m.DateTimeField","sap.m.DateTimeInput","sap.m.DateTimePicker","sap.m.Dialog","sap.m.DisplayListItem","sap.m.DraftIndicator","sap.m.DynamicDateRange","sap.m.ExpandableText","sap.m.AdditionalTextButton","sap.m.FacetFilter","sap.m.FacetFilterItem","sap.m.FacetFilterList","sap.m.FeedContent","sap.m.FeedInput","sap.m.FeedListItem","sap.m.FlexBox","sap.m.FormattedText","sap.m.GenericTag","sap.m.GenericTile","sap.m.GroupHeaderListItem","sap.m.GrowingList","sap.m.HBox","sap.m.HeaderContainer","sap.m.IconTabBar","sap.m.IconTabBarSelectList","sap.m.IconTabFilterExpandButtonBadge","sap.m.IconTabHeader","sap.m.IllustratedMessage","sap.m.Image","sap.m.ImageContent","sap.m.Input","sap.m.InputBase","sap.m.InputListItem","sap.m.Label","sap.m.LightBox","sap.m.Link","sap.m.List","sap.m.ListBase","sap.m.ListItemBase","sap.m.MaskInput","sap.m.Menu","sap.m.MenuButton","sap.m.MessagePage","sap.m.MessagePopover","sap.m.MessageView","sap.m.MessageStrip","sap.m.MultiComboBox","sap.m.MultiEditField","sap.m.MultiInput","sap.m.NavContainer","sap.m.NewsContent","sap.m.NumericContent","sap.m.NotificationList","sap.m.NotificationListBase","sap.m.NotificationListItem","sap.m.NotificationListGroup","sap.m.PagingButton","sap.m.PlanningCalendarLegend","sap.m.ObjectAttribute","sap.m.ObjectHeader","sap.m.ObjectIdentifier","sap.m.ObjectListItem","sap.m.ObjectMarker","sap.m.ObjectNumber","sap.m.ObjectStatus","sap.m.OverflowToolbar","sap.m.OverflowToolbarButton","sap.m.OverflowToolbarToggleButton","sap.m.OverflowToolbarMenuButton","sap.m.P13nColumnsPanel","sap.m.P13nGroupPanel","sap.m.P13nSelectionPanel","sap.m.P13nDimMeasurePanel","sap.m.P13nConditionPanel","sap.m.P13nDialog","sap.m.P13nFilterPanel","sap.m.P13nPanel","sap.m.P13nSortPanel","sap.m.Page","sap.m.Panel","sap.m.PDFViewer","sap.m.PlanningCalendar","sap.m.PlanningCalendarHeader","sap.m.Popover","sap.m.ProgressIndicator","sap.m.PullToRefresh","sap.m.QuickView","sap.m.QuickViewBase","sap.m.QuickViewCard","sap.m.QuickViewPage","sap.m.RadioButton","sap.m.RadioButtonGroup","sap.m.RangeSlider","sap.m.RatingIndicator","sap.m.ResponsivePopover","sap.m.ScrollContainer","sap.m.SearchField","sap.m.SegmentedButton","sap.m.Select","sap.m.SelectDialog","sap.m.SelectDialogBase","sap.m.SelectList","sap.m.SelectionDetails","sap.m.Shell","sap.m.SimpleFixFlex","sap.m.SinglePlanningCalendar","sap.m.SinglePlanningCalendarGrid","sap.m.SinglePlanningCalendarMonthGrid","sap.m.Slider","sap.m.SliderTooltip","sap.m.SliderTooltipBase","sap.m.SliderTooltipContainer","sap.m.SlideTile","sap.m.StepInput","sap.m.SplitApp","sap.m.SplitContainer","sap.m.StandardListItem","sap.m.StandardTreeItem","sap.m.StandardTile","sap.m.Switch","sap.m.Table","sap.m.TableSelectDialog","sap.m.TabContainer","sap.m.TabStrip","sap.m.Text","sap.m.TextArea","sap.m.Tile","sap.m.TileContainer","sap.m.TileContent","sap.m.TimePicker","sap.m.TimePickerInputs","sap.m.TimePickerClock","sap.m.TimePickerClocks","sap.m.TimePickerSliders","sap.m.Title","sap.m.ToggleButton","sap.m.Token","sap.m.Tokenizer","sap.m.Toolbar","sap.m.ToolbarSpacer","sap.m.ToolbarSeparator","sap.m.Tree","sap.m.TreeItemBase","sap.m.UploadCollection","sap.m.UploadCollectionToolbarPlaceholder","sap.m.upload.UploadSet","sap.m.upload.UploadSetToolbarPlaceholder","sap.m.VariantManagement","sap.m.VBox","sap.m.ViewSettingsDialog","sap.m.WheelSlider","sap.m.WheelSliderContainer","sap.m.Wizard","sap.m.WizardStep","sap.m.semantic.DetailPage","sap.m.semantic.SemanticPage","sap.m.semantic.ShareMenuPage","sap.m.semantic.FullscreenPage","sap.m.semantic.MasterPage","sap.m.p13n.AbstractContainer","sap.m.p13n.BasePanel","sap.m.p13n.Container","sap.m.p13n.GroupPanel","sap.m.p13n.QueryPanel","sap.m.p13n.SelectionPanel","sap.m.p13n.SortPanel","sap.m.p13n.Popup","sap.m.table.columnmenu.Menu"],elements:["sap.m.BadgeCustomData","sap.m.Column","sap.m.ColumnPopoverActionItem","sap.m.ColumnPopoverCustomItem","sap.m.ColumnPopoverItem","sap.m.ColumnPopoverSortItem","sap.m.DynamicDateOption","sap.m.DynamicDateValueHelpUIType","sap.m.FlexItemData","sap.m.FeedListItemAction","sap.m.IconTabFilter","sap.m.IconTabSeparator","sap.m.LightBoxItem","sap.m.OverflowToolbarLayoutData","sap.m.MaskInputRule","sap.m.MenuItem","sap.m.MessageItem","sap.m.MessagePopoverItem","sap.m.PageAccessibleLandmarkInfo","sap.m.P13nFilterItem","sap.m.P13nItem","sap.m.PlanningCalendarRow","sap.m.PlanningCalendarView","sap.m.P13nColumnsItem","sap.m.P13nDimMeasureItem","sap.m.P13nGroupItem","sap.m.P13nSortItem","sap.m.QuickViewGroup","sap.m.QuickViewGroupElement","sap.m.ResponsiveScale","sap.m.SegmentedButtonItem","sap.m.SelectionDetailsItem","sap.m.SelectionDetailsItemLine","sap.m.SinglePlanningCalendarDayView","sap.m.SinglePlanningCalendarMonthView","sap.m.SinglePlanningCalendarWeekView","sap.m.SinglePlanningCalendarWorkWeekView","sap.m.SinglePlanningCalendarView","sap.m.StandardDynamicDateOption","sap.m.SuggestionItem","sap.m.TabContainerItem","sap.m.TabStripItem","sap.m.ToolbarLayoutData","sap.m.UploadCollectionItem","sap.m.UploadCollectionParameter","sap.m.upload.Uploader","sap.m.upload.UploadSetItem","sap.m.VariantItem","sap.m.ViewSettingsCustomItem","sap.m.ViewSettingsCustomTab","sap.m.ViewSettingsFilterItem","sap.m.ViewSettingsItem","sap.m.plugins.CellSelector","sap.m.plugins.ColumnResizer","sap.m.plugins.CopyProvider","sap.m.plugins.DataStateIndicator","sap.m.plugins.PasteProvider","sap.m.plugins.PluginBase","sap.m.p13n.AbstractContainerItem","sap.m.semantic.AddAction","sap.m.semantic.CancelAction","sap.m.semantic.DeleteAction","sap.m.semantic.DiscussInJamAction","sap.m.semantic.EditAction","sap.m.semantic.FavoriteAction","sap.m.semantic.FilterAction","sap.m.semantic.FilterSelect","sap.m.semantic.FlagAction","sap.m.semantic.ForwardAction","sap.m.semantic.GroupAction","sap.m.semantic.GroupSelect","sap.m.semantic.MainAction","sap.m.semantic.MessagesIndicator","sap.m.semantic.MultiSelectAction","sap.m.semantic.NegativeAction","sap.m.semantic.OpenInAction","sap.m.semantic.PositiveAction","sap.m.semantic.PrintAction","sap.m.semantic.SaveAction","sap.m.semantic.SemanticButton","sap.m.semantic.SemanticControl","sap.m.semantic.SemanticSelect","sap.m.semantic.SemanticToggleButton","sap.m.semantic.SendEmailAction","sap.m.semantic.SendMessageAction","sap.m.semantic.ShareInJamAction","sap.m.semantic.SortAction","sap.m.semantic.SortSelect","sap.m.table.columnmenu.Entry","sap.m.table.columnmenu.ActionItem","sap.m.table.columnmenu.Item","sap.m.table.columnmenu.ItemBase","sap.m.table.columnmenu.QuickAction","sap.m.table.columnmenu.QuickActionBase"],extensions:{flChangeHandlers:{"sap.m.ActionSheet":{moveControls:"default"},"sap.m.Avatar":"sap/m/flexibility/Avatar","sap.m.Bar":"sap/m/flexibility/Bar","sap.m.Button":"sap/m/flexibility/Button","sap.m.CheckBox":"sap/m/flexibility/CheckBox","sap.m.ColumnListItem":{hideControl:"default",unhideControl:"default"},"sap.m.CustomListItem":{hideControl:"default",unhideControl:"default",moveControls:"default"},"sap.m.DatePicker":{hideControl:"default",unhideControl:"default"},"sap.m.Dialog":"sap/m/flexibility/Dialog","sap.m.ExpandableText":"sap/m/flexibility/ExpandableText","sap.m.FlexBox":{hideControl:"default",unhideControl:"default",moveControls:"default"},"sap.m.HBox":{hideControl:"default",unhideControl:"default",moveControls:"default"},"sap.m.IconTabBar":"sap/m/flexibility/IconTabBar","sap.m.IconTabFilter":"sap/m/flexibility/IconTabFilter","sap.m.Image":{hideControl:"default",unhideControl:"default"},"sap.m.Input":{hideControl:"default",unhideControl:"default"},"sap.m.InputBase":{hideControl:"default",unhideControl:"default"},"sap.m.InputListItem":"sap/m/flexibility/InputListItem","sap.m.Label":"sap/m/flexibility/Label","sap.m.MultiInput":{hideControl:"default",unhideControl:"default"},"sap.m.ListItemBase":{hideControl:"default",unhideControl:"default"},"sap.m.Link":"sap/m/flexibility/Link","sap.m.List":{hideControl:"default",unhideControl:"default",moveControls:"default"},"sap.m.ListBase":{hideControl:"default",unhideControl:"default",moveControls:"default"},"sap.m.MaskInput":{hideControl:"default",unhideControl:"default"},"sap.m.MenuButton":"sap/m/flexibility/MenuButton","sap.m.OverflowToolbar":"sap/m/flexibility/OverflowToolbar","sap.m.OverflowToolbarButton":"sap/m/flexibility/OverflowToolbarButton","sap.m.Page":"sap/m/flexibility/Page","sap.m.Panel":"sap/m/flexibility/Panel","sap.m.Popover":"sap/m/flexibility/Popover","sap.m.RadioButton":"sap/m/flexibility/RadioButton","sap.m.RatingIndicator":{hideControl:"default",unhideControl:"default"},"sap.m.RangeSlider":{hideControl:"default",unhideControl:"default"},"sap.m.ScrollContainer":{hideControl:"default",moveControls:"default",unhideControl:"default"},"sap.m.Slider":{hideControl:"default",unhideControl:"default"},"sap.m.StandardListItem":"sap/m/flexibility/StandardListItem","sap.m.Table":"sap/m/flexibility/Table","sap.m.Column":{hideControl:"default",unhideControl:"default"},"sap.m.Text":"sap/m/flexibility/Text","sap.m.Title":"sap/m/flexibility/Title","sap.m.Toolbar":"sap/m/flexibility/Toolbar","sap.m.VBox":{hideControl:"default",unhideControl:"default",moveControls:"default"}},"sap.ui.support":{publicRules:true,internalRules:true}}});v.upload=v.upload||{};v.upload.UploaderHttpRequestMethod=I;v.BackgroundDesign={Solid:"Solid",Transparent:"Transparent",Translucent:"Translucent"};v.BadgeState={Updated:"Updated",Appear:"Appear",Disappear:"Disappear"};v.BadgeAnimationType={Full:"Full",Update:"Update",None:"None"};v.EmptyIndicatorMode={On:"On",Off:"Off",Auto:"Auto"};v.BadgeStyle={Default:"Default",Attention:"Attention"};v.BarDesign={Auto:"Auto",Header:"Header",SubHeader:"SubHeader",Footer:"Footer"};v.BreadcrumbsSeparatorStyle={Slash:"Slash",BackSlash:"BackSlash",DoubleSlash:"DoubleSlash",DoubleBackSlash:"DoubleBackSlash",GreaterThan:"GreaterThan",DoubleGreaterThan:"DoubleGreaterThan"};v.ButtonType={Default:"Default",Back:"Back",Accept:"Accept",Reject:"Reject",Transparent:"Transparent",Ghost:"Ghost",Up:"Up",Unstyled:"Unstyled",Emphasized:"Emphasized",Critical:"Critical",Negative:"Negative",Success:"Success",Neutral:"Neutral",Attention:"Attention"};v.ButtonAccessibilityType={Default:"Default",Labelled:"Labelled",Described:"Described",Combined:"Combined"};v.CarouselArrowsPlacement={Content:"Content",PageIndicator:"PageIndicator"};v.PlanningCalendarBuiltInView={Hour:"Hour",Day:"Day",Month:"Month",Week:"Week",OneMonth:"One Month"};v.DateTimeInputType={Date:"Date",DateTime:"DateTime",Time:"Time"};v.DialogType={Standard:"Standard",Message:"Message"};v.DialogRoleType={Dialog:"dialog",AlertDialog:"alertdialog"};v.DeviationIndicator={Up:"Up",Down:"Down",None:"None"};v.DraftIndicatorState={Clear:"Clear",Saving:"Saving",Saved:"Saved"};v.FacetFilterListDataType={Date:"Date",DateTime:"DateTime",Time:"Time",Integer:"Integer",Float:"Float",String:"String",Boolean:"Boolean"};v.FacetFilterType={Simple:"Simple",Light:"Light"};v.FlexAlignItems={Start:"Start",End:"End",Center:"Center",Baseline:"Baseline",Stretch:"Stretch",Inherit:"Inherit"};v.FlexAlignSelf={Auto:"Auto",Start:"Start",End:"End",Center:"Center",Baseline:"Baseline",Stretch:"Stretch",Inherit:"Inherit"};v.FlexDirection={Row:"Row",Column:"Column",RowReverse:"RowReverse",ColumnReverse:"ColumnReverse",Inherit:"Inherit"};v.FlexJustifyContent={Start:"Start",End:"End",Center:"Center",SpaceBetween:"SpaceBetween",SpaceAround:"SpaceAround",Inherit:"Inherit"};v.FlexWrap={NoWrap:"NoWrap",Wrap:"Wrap",WrapReverse:"WrapReverse"};v.FlexAlignContent={Start:"Start",End:"End",Center:"Center",SpaceBetween:"SpaceBetween",SpaceAround:"SpaceAround",Stretch:"Stretch",Inherit:"Inherit"};v.FlexRendertype={Div:"Div",List:"List",Bare:"Bare"};v.FrameType={OneByOne:"OneByOne",TwoByOne:"TwoByOne",TwoThirds:"TwoThirds",Auto:"Auto",TwoByHalf:"TwoByHalf",OneByHalf:"OneByHalf",Stretch:"Stretch"};v.LinkConversion={None:"None",ProtocolOnly:"ProtocolOnly",All:"All"};v.LinkAccessibleRole={Default:"Default",Button:"Button"};v.ButtonAccessibleRole={Default:"Default",Link:"Link"};v.InputTextFormatMode={Value:"Value",Key:"Key",ValueKey:"ValueKey",KeyValue:"KeyValue"};v.GenericTagDesign={Full:"Full",StatusIconHidden:"StatusIconHidden"};v.GenericTagValueState={None:"None",Error:"Error"};v.GenericTileMode={ContentMode:"ContentMode",HeaderMode:"HeaderMode",ActionMode:"ActionMode",ArticleMode:"ArticleMode",LineMode:"LineMode",IconMode:"IconMode"};v.Priority={VeryHigh:"VeryHigh",High:"High",Medium:"Medium",Low:"Low",None:"None"};v.GenericTileScope={Display:"Display",Actions:"Actions",ActionMore:"ActionMore",ActionRemove:"ActionRemove"};v.TabsOverflowMode={End:"End",StartAndEnd:"StartAndEnd"};v.TileSizeBehavior={Responsive:"Responsive",Small:"Small"};v.HeaderLevel={H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6"};v.IBarHTMLTag={Div:"Div",Header:"Header",Footer:"Footer"};v.IconTabHeaderMode={Standard:"Standard",Inline:"Inline"};v.IconTabDensityMode={Inherit:"Inherit",Compact:"Compact",Cozy:"Cozy"};v.IconTabFilterDesign={Horizontal:"Horizontal",Vertical:"Vertical"};v.ImageMode={Image:"Image",Background:"Background",InlineSvg:"InlineSvg"};v.Size={XS:"XS",S:"S",M:"M",L:"L",Auto:"Auto",Responsive:"Responsive"};v.ValueColor={Neutral:"Neutral",Good:"Good",Critical:"Critical",Error:"Error",None:"None"};v.ValueCSSColor=t.createType("sap.m.ValueCSSColor",{isValid:function(e){var t=v.ValueColor.hasOwnProperty(e);if(t){return t}else{t=r.CSSColor.isValid(e);if(t){return t}else{return r.CSSColor.isValid(C.get(e))}}}},t.getType("string"));v.SelectColumnRatio=t.createType("sap.m.SelectColumnRatio",{isValid:function(e){return/^([0-9]+:[0-9]+)$/.test(e)}},t.getType("string"));v.InputType={Text:"Text",Date:"Date",Datetime:"Datetime",DatetimeLocale:"DatetimeLocale",Email:"Email",Month:"Month",Number:"Number",Tel:"Tel",Time:"Time",Url:"Url",Week:"Week",Password:"Password"};v.LabelDesign={Bold:"Bold",Standard:"Standard"};v.ListHeaderDesign={Standard:"Standard",Plain:"Plain"};v.ListMode={None:"None",SingleSelect:"SingleSelect",SingleSelectLeft:"SingleSelectLeft",SingleSelectMaster:"SingleSelectMaster",MultiSelect:"MultiSelect",Delete:"Delete"};v.ListKeyboardMode={Navigation:"Navigation",Edit:"Edit"};v.ListGrowingDirection={Downwards:"Downwards",Upwards:"Upwards"};v.ListSeparators={All:"All",Inner:"Inner",None:"None"};v.ListType={Inactive:"Inactive",Detail:"Detail",Navigation:"Navigation",Active:"Active",DetailAndActive:"DetailAndActive"};v.SelectListKeyboardNavigationMode={None:"None",Delimited:"Delimited"};v.LoadState={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};v.MenuButtonMode={Regular:"Regular",Split:"Split"};v.OverflowToolbarPriority={NeverOverflow:"NeverOverflow",Never:"Never",High:"High",Low:"Low",Disappear:"Disappear",AlwaysOverflow:"AlwaysOverflow",Always:"Always"};v.ObjectHeaderPictureShape={Circle:"Circle",Square:"Square"};v.P13nPanelType={sort:"sort",filter:"filter",group:"group",columns:"columns",dimeasure:"dimeasure",selection:"selection"};v.P13nPopupMode={Dialog:"Dialog",ResponsivePopover:"ResponsivePopover"};v.P13nConditionOperation={BT:"BT",EQ:"EQ",Contains:"Contains",StartsWith:"StartsWith",EndsWith:"EndsWith",LT:"LT",LE:"LE",GT:"GT",GE:"GE",Initial:"Initial",Empty:"Empty",NotBT:"NotBT",NotEQ:"NotEQ",NotContains:"NotContains",NotStartsWith:"NotStartsWith",NotEndsWith:"NotEndsWith",NotLT:"NotLT",NotLE:"NotLE",NotGT:"NotGT",NotGE:"NotGE",NotInitial:"NotInitial",NotEmpty:"NotEmpty",Ascending:"Ascending",Descending:"Descending",GroupAscending:"GroupAscending",GroupDescending:"GroupDescending",Total:"Total",Average:"Average",Minimum:"Minimum",Maximum:"Maximum"};v.P13nConditionOperationType={Include:"Include",Exclude:"Exclude"};v.PageBackgroundDesign={Standard:"Standard",List:"List",Solid:"Solid",Transparent:"Transparent"};v.PanelAccessibleRole={Complementary:"Complementary",Form:"Form",Region:"Region"};v.PDFViewerDisplayType={Auto:"Auto",Embedded:"Embedded",Link:"Link"};v.PlacementType={Left:"Left",Right:"Right",Top:"Top",Bottom:"Bottom",Vertical:"Vertical",VerticalPreferedTop:"VerticalPreferedTop",VerticalPreferredTop:"VerticalPreferredTop",VerticalPreferedBottom:"VerticalPreferedBottom",VerticalPreferredBottom:"VerticalPreferredBottom",Horizontal:"Horizontal",HorizontalPreferedRight:"HorizontalPreferedRight",HorizontalPreferredRight:"HorizontalPreferredRight",HorizontalPreferedLeft:"HorizontalPreferedLeft",HorizontalPreferredLeft:"HorizontalPreferredLeft",PreferredLeftOrFlip:"PreferredLeftOrFlip",PreferredRightOrFlip:"PreferredRightOrFlip",PreferredTopOrFlip:"PreferredTopOrFlip",PreferredBottomOrFlip:"PreferredBottomOrFlip",Auto:"Auto"};v.StandardDynamicDateRangeKeys={DATE:"DATE",DATETIME:"DATETIME",TODAY:"TODAY",YESTERDAY:"YESTERDAY",TOMORROW:"TOMORROW",FIRSTDAYWEEK:"FIRSTDAYWEEK",LASTDAYWEEK:"LASTDAYWEEK",FIRSTDAYMONTH:"FIRSTDAYMONTH",LASTDAYMONTH:"LASTDAYMONTH",FIRSTDAYQUARTER:"FIRSTDAYQUARTER",LASTDAYQUARTER:"LASTDAYQUARTER",FIRSTDAYYEAR:"FIRSTDAYYEAR",LASTDAYYEAR:"LASTDAYYEAR",DATERANGE:"DATERANGE",DATETIMERANGE:"DATETIMERANGE",FROM:"FROM",TO:"TO",FROMDATETIME:"FROMDATETIME",TODATETIME:"TODATETIME",YEARTODATE:"YEARTODATE",DATETOYEAR:"DATETOYEAR",LASTMINUTES:"LASTMINUTES",LASTHOURS:"LASTHOURS",LASTDAYS:"LASTDAYS",LASTWEEKS:"LASTWEEKS",LASTMONTHS:"LASTMONTHS",LASTQUARTERS:"LASTQUARTERS",LASTYEARS:"LASTYEARS",NEXTMINUTES:"NEXTMINUTES",NEXTHOURS:"NEXTHOURS",NEXTDAYS:"NEXTDAYS",NEXTWEEKS:"NEXTWEEKS",NEXTMONTHS:"NEXTMONTHS",NEXTQUARTERS:"NEXTQUARTERS",NEXTYEARS:"NEXTYEARS",TODAYFROMTO:"TODAYFROMTO",THISWEEK:"THISWEEK",LASTWEEK:"LASTWEEK",NEXTWEEK:"NEXTWEEK",SPECIFICMONTH:"SPECIFICMONTH",SPECIFICMONTHINYEAR:"SPECIFICMONTHINYEAR",THISMONTH:"THISMONTH",LASTMONTH:"LASTMONTH",NEXTMONTH:"NEXTMONTH",THISQUARTER:"THISQUARTER",LASTQUARTER:"LASTQUARTER",NEXTQUARTER:"NEXTQUARTER",QUARTER1:"QUARTER1",QUARTER2:"QUARTER2",QUARTER3:"QUARTER3",QUARTER4:"QUARTER4",THISYEAR:"THISYEAR",LASTYEAR:"LASTYEAR",NEXTYEAR:"NEXTYEAR"};v.QuickViewGroupElementType={phone:"phone",mobile:"mobile",email:"email",link:"link",text:"text",pageLink:"pageLink"};v.VerticalPlacementType={Top:"Top",Bottom:"Bottom",Vertical:"Vertical"};v.PopinDisplay={Block:"Block",Inline:"Inline",WithoutHeader:"WithoutHeader"};v.PopinLayout={Block:"Block",GridSmall:"GridSmall",GridLarge:"GridLarge"};v.Sticky={ColumnHeaders:"ColumnHeaders",HeaderToolbar:"HeaderToolbar",InfoToolbar:"InfoToolbar"};v.RatingIndicatorVisualMode={Full:"Full",Half:"Half"};v.ScreenSize={Phone:"Phone",Tablet:"Tablet",Desktop:"Desktop",XXSmall:"XXSmall",XSmall:"XSmall",Small:"Small",Medium:"Medium",Large:"Large",XLarge:"XLarge",XXLarge:"XXLarge"};v.SelectionDetailsActionLevel={Item:"Item",List:"List",Group:"Group"};v.SelectType={Default:"Default",IconOnly:"IconOnly"};v.SplitAppMode={ShowHideMode:"ShowHideMode",StretchCompressMode:"StretchCompressMode",PopoverMode:"PopoverMode",HideMode:"HideMode"};v.StandardTileType={Create:"Create",Monitor:"Monitor",None:"None"};v.semantic=v.semantic||{};v.semantic.SemanticRuleSetType={Classic:"Classic",Optimized:"Optimized"};v.table=v.table||{};v.table.columnmenu=v.table.columnmenu||{};v.table.columnmenu.Category={Sort:"Sort",Filter:"Filter",Group:"Group",Aggregate:"Aggregate",Generic:"Generic"};v.ObjectMarkerType={Flagged:"Flagged",Favorite:"Favorite",Draft:"Draft",Locked:"Locked",Unsaved:"Unsaved",LockedBy:"LockedBy",UnsavedBy:"UnsavedBy"};v.ObjectMarkerVisibility={IconOnly:"IconOnly",TextOnly:"TextOnly",IconAndText:"IconAndText"};v.SwipeDirection={LeftToRight:"LeftToRight",RightToLeft:"RightToLeft",BeginToEnd:"BeginToEnd",EndToBegin:"EndToBegin",Both:"Both"};v.SwitchType={Default:"Default",AcceptReject:"AcceptReject"};v.TokenizerRenderMode={Loose:"Loose",Narrow:"Narrow"};v.ToolbarDesign={Auto:"Auto",Transparent:"Transparent",Info:"Info",Solid:"Solid"};v.ToolbarStyle={Standard:"Standard",Clear:"Clear"};v.TimePickerMaskMode={On:"On",Off:"Off"};v.StringFilterOperator={Equals:"Equals",Contains:"Contains",StartsWith:"StartsWith",AnyWordStartsWith:"AnyWordStartsWith"};v.LightBoxLoadingStates={Loading:"LOADING",Loaded:"LOADED",TimeOutError:"TIME_OUT_ERROR",Error:"ERROR"};v.StepInputValidationMode={FocusOut:"FocusOut",LiveChange:"LiveChange"};v.StepInputStepModeType={AdditionAndSubtraction:"AdditionAndSubtraction",Multiple:"Multiple"};v.UploadState={Complete:"Complete",Error:"Error",Ready:"Ready",Uploading:"Uploading"};v.WrappingType={Normal:"Normal",Hyphenated:"Hyphenated"};v.SinglePlanningCalendarSelectionMode={SingleSelect:"SingleSelect",MultiSelect:"MultiSelect"};v.PlanningCalendarStickyMode={None:"None",All:"All",NavBarAndColHeaders:"NavBarAndColHeaders"};v.TitleAlignment={None:"None",Auto:"Auto",Start:"Start",Center:"Center"};v.ExpandableTextOverflowMode={InPlace:"InPlace",Popover:"Popover"};v.AvatarShape=d;v.AvatarSize=g;v.AvatarType=T;v.AvatarColor=S;v.AvatarImageFitType=f;v.IllustratedMessageSize=A;v.IllustratedMessageType=y;v.WizardRenderMode={Scroll:"Scroll",Page:"Page"};v.ResetAllMode={Default:"Default",ServiceDefault:"ServiceDefault",ServiceReset:"ServiceReset"};v.MultiSelectMode={Default:"Default",ClearAll:"ClearAll",SelectAll:"SelectAll"};(function(){sap.ui.lazyRequire("sap.m.DynamicDate");sap.ui.lazyRequire("sap.m.MessageToast","show");sap.ui.lazyRequire("sap.m.routing.RouteMatchedHandler");sap.ui.lazyRequire("sap.m.routing.Router");sap.ui.lazyRequire("sap.m.routing.Target");sap.ui.lazyRequire("sap.m.routing.TargetHandler");sap.ui.lazyRequire("sap.m.routing.Targets")})();if(/sap-ui-xx-formfactor=compact/.test(location.search)){l("html").addClass("sapUiSizeCompact");v._bSizeCompact=true}if(/sap-ui-xx-formfactor=condensed/.test(location.search)){l("html").addClass("sapUiSizeCondensed");v._bSizeCondensed=true}v.getInvalidDate=function(){return null};v.getLocale=function(){var e=b.getFormatSettings().getFormatLocale();v.getLocale=function(){return e};return e};v.getLocaleData=function(){var e=h.getInstance(v.getLocale());v.getLocaleData=function(){return e};return e};v.isDate=function(e){return e&&Object.prototype.toString.call(e)=="[object Date]"&&!isNaN(e)};v.getIScroll=function(e){if(typeof window.iScroll!="function"||!(e instanceof n)){return}var t,a;for(t=e;t=t.oParent;){a=t.getScrollDelegate?t.getScrollDelegate()._scroller:null;if(a&&a instanceof window.iScroll){return a}}};v.getScrollDelegate=function(e,t){if(!(e instanceof n)){return}var a=sap.ui.require("sap/ui/core/UIComponent");function i(e){if(!e){return}return t&&a&&e instanceof a?e.oContainer:e.oParent}for(var o=e;o=i(o);){if(o&&typeof o.getScrollDelegate=="function"){return o.getScrollDelegate(e)}}};v.ScreenSizes={phone:240,tablet:600,desktop:1024,xxsmall:240,xsmall:320,small:480,medium:560,large:768,xlarge:960,xxlarge:1120};u(v,"BaseFontSize",function(){v.BaseFontSize=l(document.documentElement).css("font-size")||"16px";return v.BaseFontSize});v.closeKeyboard=function(){var t=document.activeElement;if(!e.system.desktop&&t&&/(INPUT|TEXTAREA)/i.test(t.tagName)){t.blur()}};v.touch=v.touch||{};v.touch.find=function(e,t){var a,n;if(!e){return}if(t&&typeof t.identifier!=="undefined"){t=t.identifier}else if(typeof t!=="number"){p(false,"sap.m.touch.find(): oTouch must be a touch object or a number");return}n=e.length;for(a=0;a<n;a++){if(e[a].identifier===t){return e[a]}}};v.touch.countContained=function(e,t){var a,n=0,i,o,r;if(!e){return 0}if(t instanceof Element){t=l(t)}else if(typeof t==="string"){t=l(document.getElementById(t))}else if(!(t instanceof l)){p(false,"sap.m.touch.countContained(): vElement must be a jQuery object or Element reference or a string");return 0}o=t.children().length;i=e.length;for(a=0;a<i;a++){r=l(e[a].target);if(o===0&&r.is(t)||t[0].contains(r[0])){n++}}return n};v.URLHelper=function(){function e(e){return e&&Object.prototype.toString.call(e)=="[object String]"}function t(t){if(!e(t)){return""}return t.replace(/[^0-9\+\*#]/g,"")}function n(t){if(!e(t)){return""}t=t.split(/\r\n|\r|\n/g).join("\r\n");return encodeURIComponent(t)}return l.extend(new a,{normalizeTel:function(e){return"tel:"+t(e)},normalizeSms:normalizeEmail:function(t,a,i,o,r){var s=[],l="mailto:",p=encodeURIComponent;e(t)&&(l+=p(t.trim()));e(a)&&s.push("subject="+p(a));e(i)&&s.push("body="+n(i));e(r)&&s.push("bcc="+p(r.trim()));e(o)&&s.push("cc="+p(o.trim()));if(s.length){l+="?"+s.join("&")}return l},redirect:function(t,a){p(e(t),this+"#redirect: URL must be a string");this.fireEvent("redirect",t);if(!a){window.location.href=t}else{o(t,"_blank")}},attachRedirect:function(e,t){return this.attachEvent("redirect",e,t)},detachRedirect:triggerTel:function(e){this.redirect(this.normalizeTel(e))},triggerSms:triggerEmail:function(e,t,a,n,i,o){o=o||false;this.redirect(this.normalizeEmail.apply(0,[e,t,a,n,i]),o)},toString:function(){return"sap.m.URLHelper"}})}();v.BackgroundHelper={addBackgroundColorStyles:function(e,a,n,i){e.class(i||"sapUiGlobalBackgroundColor");if(a&&!t.getType("sap.ui.core.CSSColor").isValid(a)){m.warning(a+" is not a valid sap.ui.core.CSSColor type");a=""}if(a||n){e.style("background-image","none");e.style("filter","none")}if(a){e.style("background-color",a)}},renderBackgroundImageTag:function(e,t,a,n,i,o){e.openStart("div",t.getId()+"-BG");if(Array.isArray(a)){for(var r=0;r<a.length;r++){e.class(a[r])}}else{e.class(a)}e.class("sapUiGlobalBackgroundImage");if(n){e.style("display","block");e.style("background-image","url("+c(n)+")");e.style("background-repeat",i?"repeat":"no-repeat");if(!i){e.style("background-size","cover");e.style("background-position","center")}else{e.style("background-position","left top")}}if(o!==1){if(o>1){o=1}e.style("opacity",o)}e.openEnd();e.close("div")}};v.PopupHelper={calcPercentageSize:function(e,t){if(typeof e!=="string"){m.warning("sap.m.PopupHelper: calcPercentageSize, the first parameter"+e+"isn't with type string");return null}if(e.indexOf("%")<=0){m.warning("sap.m.PopupHelper: calcPercentageSize, the first parameter"+e+"is not a percentage string (for example '25%')");return null}var a=parseFloat(e)/100,n=parseFloat(t);return Math.floor(a*n)+"px"}};v.InputODataSuggestProvider=function(){var e=function(e){var t=e.getSource();var a=t.data(t.getId()+"-#valueListAnnotation");var n=t.getModel();var i=t.getBinding("value");var o=n.resolve(i.getPath(),i.getContext());if(!a){return}var r=e.getParameter("selectedRow");l.each(r.getCells(),function(e,t){var r=t.getBinding("text");l.each(a.outParameters,function(e,t){if(!t.displayOnly&&t.value==r.getPath()){var a=r.getValue();var s=n.resolve(e,i.getContext());if(a&&s!==o){n.setProperty(s,a)}}})});return true};var t=function(t,a){var n=t.getModel();var i=n.oMetadata;var o=n.resolve(t.getBindingPath("value"),t.getBindingContext());var r={};r.searchSupported=false;r.collectionPath="";r.outParameters={};r.inParameters={};r.selection=[];var s=n.getProperty(o+"/#com.sap.vocabularies.Common.v1.ValueList");if(!s){return false}var p=o.substr(o.lastIndexOf("/")+1);r.inProperty=p;l.each(s.record,function(e,t){l.each(t,function(e,t){if(t.property==="SearchSupported"&&t.bool){r.searchSupported=true}if(t.property==="CollectionPath"){r.collectionPath=t.string}if(t.property==="Parameters"){l.each(t.collection.record,function(e,t){if(t.type==="com.sap.vocabularies.Common.v1.ValueListParameterIn"){var a;l.each(t.propertyValue,function(e,t){if(t.property==="LocalDataProperty"){a=t.propertyPath}});l.each(t.propertyValue,function(e,t){if(t.property==="ValueListProperty"){r.inParameters[a]={value:t.string}}})}else if(t.type==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"){var a;l.each(t.propertyValue,function(e,t){if(t.property==="LocalDataProperty"){a=t.propertyPath}});l.each(t.propertyValue,function(e,t){if(t.property==="ValueListProperty"){r.outParameters[a]={value:t.string};r.inParameters[a]={value:t.string}}})}else if(t.type==="com.sap.vocabularies.Common.v1.ValueListParameterOut"){var a;l.each(t.propertyValue,function(e,t){if(t.property==="LocalDataProperty"){a=t.propertyPath}});l.each(t.propertyValue,function(e,t){if(t.property==="ValueListProperty"){r.outParameters[a]={value:t.string}}})}else if(t.type==="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"){var a;l.each(t.propertyValue,function(e,t){if(t.property==="ValueListProperty"){r.outParameters[t.string]={value:t.string,displayOnly:true}}})}})}})});r.resultEntity=i._getEntityTypeByPath("/"+r.collectionPath);r.listItem=new sap.m.ColumnListItem;l.each(r.outParameters,function(e,a){r.listItem.addCell(new sap.m.Text({text:"{"+a.value+"}",wrapping:false}));t.addSuggestionColumn(new sap.m.Column({header:new sap.m.Text({text:"{/#"+r.resultEntity.name+"/"+a.value+"/@sap:label}",wrapping:false})}));r.selection.push(a.value)});t.data(t.getId()+"-#valueListAnnotation",r);if(a){t.attachSuggestionItemSelected(e)}};var a={suggest:function(e,a,n,i){var o,r=e.getSource();a=a===undefined?true:a;n=n===undefined?true:n;if(!r.data(r.getId()+"-#valueListAnnotation")){t(r,n)}o=r.data(r.getId()+"-#valueListAnnotation");if(!o){return}var s=function(e){var t=this.getLength();if(t&&t<=i){r.setShowTableSuggestionValueHelp(false)}else{r.setShowTableSuggestionValueHelp(true)}};if(o.searchSupported){var m=[];var u,c={};if(a){l.each(o.inParameters,function(e,t){if(e==o.inProperty){u=t.value}else if(a){var n=r.getModel().getProperty(e,r.getBinding("value").getContext());if(n){m.push(new sap.ui.model.Filter(t.value,sap.ui.model.FilterOperator.StartsWith,n))}}})}c.search=e.getParameter("suggestValue");if(o.inParameters.length){if(u){c["search-focus"]=u}else{p(false,"no search-focus defined")}}r.bindAggregation("suggestionRows",{path:"/"+o.collectionPath,length:i,filters:m,parameters:{select:o.selection.join(","),custom:c},events:{dataReceived:s},template:o.listItem})}else{var m=[];l.each(o.inParameters,function(t,n){if(t==o.inProperty){m.push(new sap.ui.model.Filter(n.value,sap.ui.model.FilterOperator.StartsWith,e.getParameter("suggestValue")))}else if(a){var i=r.getModel().getProperty(t,r.getBinding("value").getContext());if(i){m.push(new sap.ui.model.Filter(n.value,sap.ui.model.FilterOperator.StartsWith,i))}}});r.bindAggregation("suggestionRows",{path:"/"+o.collectionPath,filters:m,template:o.listItem,length:i,parameters:{select:o.selection.join(",")},events:{dataReceived:s}})}}};return a}();i.set("sap.ui.layout.form.FormHelper",{createLabel:function(e,t){return new sap.m.Label(t,{text:e})},createButton:function(e,t,a){var n=new sap.m.Button(e,{type:v.ButtonType.Transparent});n.attachEvent("press",t,this);a.call(this,n)},setButtonContent:function(e,t,a,n,i){e.setText(t);e.setTooltip(a);e.setIcon(n);e.setActiveIcon(i)},addFormClass:function(){return"sapUiFormM"},setToolbar:function(e){var t=this.getToolbar();if(t&&t.setDesign){t.setDesign(t.getDesign(),true)}if(e&&e.setDesign){e.setDesign(sap.m.ToolbarDesign.Transparent,true)}return e},getToolbarTitle:function(e){if(e){var t=e.getContent();for(var a=0;a<t.length;a++){var n=t[a];if(n.isA("sap.m.Title")){return n.getId()}}return e.getId()}},createDelimiter:function(e,t){return new sap.m.Text(t,{text:e,textAlign:r.TextAlign.Center})},createSemanticDisplayControl:function(e,t){return new sap.m.Text(t,{text:e})},updateDelimiter:function(e,t){e.setText(t)},updateSemanticDisplayControl:function(e,t){e.setText(t)},bArrowKeySupport:false,bFinal:true});i.set("sap.ui.unified.FileUploaderHelper",{createTextField:function(e){var t=new sap.m.Input(e);return t},setTextFieldContent:function(e,t){e.setWidth(t)},createButton:function(e){var t=new sap.m.Button(e);return t},addFormClass:function(){return"sapUiFUM"},bFinal:true});i.set("sap.ui.unified.ColorPickerHelper",{isResponsive:function(){return true},factory:{createLabel:function(e){return new sap.m.Label(e)},createInput:function(e,t){return new sap.m.InputBase(e,t)},createSlider:function(e,t){return new sap.m.Slider(e,t)},createRadioButtonGroup:function(e){return new sap.m.RadioButtonGroup(e)},createRadioButtonItem:function(e){return new sap.m.RadioButton(e)},createButton:,bFinal:true});i.set("sap.ui.table.TableHelper",{createLabel:function(e){return new sap.m.Label(e)},createTextView:addTableClass:function(){return"sapUiTableM"},bFinal:true});i.set("sap.ui.layout.GridHelper",{getLibrarySpecificClass:function(){return""},bFinal:true});if(e.os.android){l(window).on("resize",function(){var e=document.activeElement;var t=e?e.tagName:"";if(t=="INPUT"||t=="TEXTAREA"){setTimeout(0)}})}if(!Number.MAX_SAFE_INTEGER){Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1}return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/base/SyncPromise",[],function(){"use strict";var t=new i(;function n(t,n,e){var i;function r(t){if(!i){i=true;e(t)}}ry{t(u,r)}catch(t){r(t)}}function e(t){return t&&(typeof t==="function"||typeof t==="object")&&"then"in t}function i(t){var r=false,u,f,o,c,s=this;function h(t){c=t;u=-1;if(!r&&i.listener){i.listener(s,false)}if(f){f(t);f=o=null}}function l(t){var r;if(t===s){h(new TypeError("A promise cannot be resolved with itself."));return}if(t instanceof i){if(t.isFulfilled()){l(t.getResult());return}else if(t.isRejected()){t.caught();h(t.getResult());return}else{t.caught();t=t.getResult()}}u=0;c=t;if(e(c)){try{r=c.then}catch(t){h(t);return}if(typeof r==="function"){n(r.bind(c),l,h);return}}u=1;if(o){o(c);f=o=null}}this.caught=function(){if(!r){r=true;if(i.listener&&this.isRejected()){i.listener(this,true)}}};this.getResult=function(){return c};this.isFulfilled=this.isPending=this.isRejected=function(){return u===-1};n(t,l,h);if(u===undefined){c=new Promise(;c.catch(function(){})}}i.prototype.catch=i.prototype.finally=function(t){if(typeof t==="function"){return this.then(function(n){return i.resolve(t()).then(.unwrap()},function(n){return i.resolve(t()).then(.unwrap()})}return this.then(t,t)};i.prototype.then=function(t,n){var e=this.isFulfilled()?t:n,r=typeof e==="function",u=this.isPending(),f=this;if(u||r){this.caught()}if(!u){return r?new i(function(t,n){t(e(f.getResult()))}):this}return i.resolve(this.getResult().then(t,n))};i.prototype.toString=function(){if(this.isPending()){return"SyncPromise: pending"}return String(this.getResult())};i.prototype.unwrap=function(){this.caught();if(this.isRejected()){throw this.getResult()}return this.getResult()};i.all=function(t){return new i(function(n,i){var r=false,u=0;function f(){if(r&&u===0){n(t)}}t=Array.prototype.slice.call(t);t.forEach(function(n,r){if(n!==t[r+1]&&e(n)){u+=1;n.then(function(e){do{t[r]=e;r-=1}while(r>=0&&n===t[r]);u-=1;f()},}});r=true;f()})};i.isThenable=function(t){try{return!!e(t)&&typeof t.then==="function"}catch(t){return false}};i.reject=i.resolve=function(n){if(n===undefined){return t}if(n instanceof i){return n}return new i(};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/commons/layout/HorizontalLayout",["sap/ui/commons/library","sap/ui/layout/HorizontalLayout","./HorizontalLayoutRenderer"],function(a,o,t){"use strict";var r=o.extend("sap.ui.commons.layout.HorizontalLayout",{metadata:{deprecated:true,library:"sap.ui.commons"}});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/commons/layout/VerticalLayout",["sap/ui/commons/library","sap/ui/layout/VerticalLayout","./VerticalLayoutRenderer"],function(a,t,e){"use strict";var r=t.extend("sap.ui.commons.layout.VerticalLayout",{metadata:{deprecated:true,library:"sap.ui.commons"}});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/commons/library",["sap/ui/base/DataType","sap/base/util/ObjectPath","sap/ui/core/library","sap/ui/layout/library","sap/ui/unified/library"],function(o,e){"use strict";var a=sap.ui.getCore().initLibrary({name:"sap.ui.commons",version:"1.114.3",dependencies:["sap.ui.core","sap.ui.layout","sap.ui.unified"],types:["sap.ui.commons.ButtonStyle","sap.ui.commons.HorizontalDividerHeight","sap.ui.commons.HorizontalDividerType","sap.ui.commons.LabelDesign","sap.ui.commons.MenuBarDesign","sap.ui.commons.MessageType","sap.ui.commons.PaginatorEvent","sap.ui.commons.RatingIndicatorVisualMode","sap.ui.commons.RowRepeaterDesign","sap.ui.commons.SplitterSize","sap.ui.commons.TextViewColor","sap.ui.commons.TextViewDesign","sap.ui.commons.TitleLevel","sap.ui.commons.ToolbarDesign","sap.ui.commons.ToolbarSeparatorDesign","sap.ui.commons.TreeSelectionMode","sap.ui.commons.TriStateCheckBoxState","sap.ui.commons.enums.AreaDesign","sap.ui.commons.enums.BorderDesign","sap.ui.commons.enums.Orientation","sap.ui.commons.form.GridElementCells","sap.ui.commons.form.SimpleFormLayout","sap.ui.commons.layout.BackgroundDesign","sap.ui.commons.layout.BorderLayoutAreaTypes","sap.ui.commons.layout.HAlign","sap.ui.commons.layout.Padding","sap.ui.commons.layout.Separation","sap.ui.commons.layout.VAlign","sap.ui.commons.ColorPickerMode"],interfaces:["sap.ui.commons.FormattedTextViewControl","sap.ui.commons.ToolbarItem"],controls:["sap.ui.commons.Accordion","sap.ui.commons.ApplicationHeader","sap.ui.commons.AutoComplete","sap.ui.commons.Button","sap.ui.commons.Callout","sap.ui.commons.CalloutBase","sap.ui.commons.Carousel","sap.ui.commons.CheckBox","sap.ui.commons.ColorPicker","sap.ui.commons.ComboBox","sap.ui.commons.DatePicker","sap.ui.commons.Dialog","sap.ui.commons.DropdownBox","sap.ui.commons.FileUploader","sap.ui.commons.FormattedTextView","sap.ui.commons.HorizontalDivider","sap.ui.commons.Image","sap.ui.commons.ImageMap","sap.ui.commons.InPlaceEdit","sap.ui.commons.Label","sap.ui.commons.Link","sap.ui.commons.ListBox","sap.ui.commons.Menu","sap.ui.commons.MenuBar","sap.ui.commons.MenuButton","sap.ui.commons.Message","sap.ui.commons.MessageBar","sap.ui.commons.MessageList","sap.ui.commons.MessageToast","sap.ui.commons.Paginator","sap.ui.commons.Panel","sap.ui.commons.PasswordField","sap.ui.commons.ProgressIndicator","sap.ui.commons.RadioButton","sap.ui.commons.RadioButtonGroup","sap.ui.commons.RangeSlider","sap.ui.commons.RatingIndicator","sap.ui.commons.ResponsiveContainer","sap.ui.commons.RichTooltip","sap.ui.commons.RoadMap","sap.ui.commons.RowRepeater","sap.ui.commons.SearchField","sap.ui.commons.SegmentedButton","sap.ui.commons.Slider","sap.ui.commons.Splitter","sap.ui.commons.Tab","sap.ui.commons.TabStrip","sap.ui.commons.TextArea","sap.ui.commons.TextField","sap.ui.commons.TextView","sap.ui.commons.ToggleButton","sap.ui.commons.Toolbar","sap.ui.commons.Tree","sap.ui.commons.TriStateCheckBox","sap.ui.commons.ValueHelpField","sap.ui.commons.form.Form","sap.ui.commons.form.FormLayout","sap.ui.commons.form.GridLayout","sap.ui.commons.form.ResponsiveLayout","sap.ui.commons.form.SimpleForm","sap.ui.commons.layout.AbsoluteLayout","sap.ui.commons.layout.BorderLayout","sap.ui.commons.layout.HorizontalLayout","sap.ui.commons.layout.MatrixLayout","sap.ui.commons.layout.ResponsiveFlowLayout","sap.ui.commons.layout.VerticalLayout"],elements:["sap.ui.commons.AccordionSection","sap.ui.commons.Area","sap.ui.commons.FileUploaderParameter","sap.ui.commons.MenuItem","sap.ui.commons.MenuItemBase","sap.ui.commons.MenuTextFieldItem","sap.ui.commons.ResponsiveContainerRange","sap.ui.commons.RoadMapStep","sap.ui.commons.RowRepeaterFilter","sap.ui.commons.RowRepeaterSorter","sap.ui.commons.SearchProvider","sap.ui.commons.Title","sap.ui.commons.ToolbarSeparator","sap.ui.commons.TreeNode","sap.ui.commons.form.FormContainer","sap.ui.commons.form.FormElement","sap.ui.commons.form.GridContainerData","sap.ui.commons.form.GridElementData","sap.ui.commons.layout.BorderLayoutArea","sap.ui.commons.layout.MatrixLayoutCell","sap.ui.commons.layout.MatrixLayoutRow","sap.ui.commons.layout.PositionContainer","sap.ui.commons.layout.ResponsiveFlowLayoutData"]});a.ButtonStyle={Emph:"Emph",Accept:"Accept",Reject:"Reject",Default:"Default"};a.ColorPickerMode=sap.ui.unified.ColorPickerMode;a.HorizontalDividerHeight={Ruleheight:"Ruleheight",Small:"Small",Medium:"Medium",Large:"Large"};a.HorizontalDividerType={Area:"Area",Page:"Page"};a.LabelDesign={Bold:"Bold",Standard:"Standard"};a.MenuBarDesign={Standard:"Standard",Header:"Header"};a.MessageType={Error:"Error",Warning:"Warning",Success:"Success"};a.PaginatorEvent={First:"First",Previous:"Previous",Goto:"Goto",Next:"Next",Last:"Last"};a.RatingIndicatorVisualMode={Full:"Full",Half:"Half",Continuous:"Continuous"};a.RowRepeaterDesign={Standard:"Standard",Transparent:"Transparent",BareShell:"BareShell"};a.SplitterSize=o.createType("sap.ui.commons.SplitterSize",{isValid:function(o){return/^((0*|([0-9]+|[0-9]*\.[0-9]+)([pP][xX]|%)))$/.test(o)}},o.getType("string"));a.TextViewColor={Default:"Default",Positive:"Positive",Negative:"Negative",Critical:"Critical"};a.TextViewDesign={Standard:"Standard",Bold:"Bold",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",Italic:"Italic",Small:"Small",Monospace:"Monospace",Underline:"Underline"};a.TitleLevel=sap.ui.core.TitleLevel;a.ToolbarDesign={Standard:"Standard",Transparent:"Transparent",Flat:"Flat"};a.ToolbarSeparatorDesign={Standard:"Standard",FullHeight:"FullHeight"};a.TreeSelectionMode={Multi:"Multi",Single:"Single",None:"None",Legacy:"Legacy"};a.TriStateCheckBoxState={Unchecked:"Unchecked",Mixed:"Mixed",Checked:"Checked"};a.enums=a.enums||{};a.enums.AreaDesign={Plain:"Plain",Fill:"Fill",Transparent:"Transparent"};a.enums.BorderDesign={Box:"Box",None:"None"};a.enums.Orientation={horizontal:"horizontal",vertical:"vertical"};a.form=a.form||{};a.form.GridElementCells=sap.ui.layout.form.GridElementCells;a.form.SimpleFormLayout=sap.ui.layout.form.SimpleFormLayout;a.layout=a.layout||{};a.layout.BackgroundDesign={Border:"Border",Fill1:"Fill1",Fill2:"Fill2",Fill3:"Fill3",Header:"Header",Plain:"Plain",Transparent:"Transparent"};a.layout.BorderLayoutAreaTypes={top:"top",begin:"begin",center:"center",end:"end",bottom:"bottom"};a.layout.HAlign={Begin:"Begin",Center:"Center",End:"End",Left:"Left",Right:"Right"};a.layout.Padding={None:"None",Begin:"Begin",End:"End",Both:"Both",Neither:"Neither"};a.layout.Separation={None:"None",Small:"Small",SmallWithLine:"SmallWithLine",Medium:"Medium",MediumWithLine:"MediumWithLine",Large:"Large",LargeWithLine:"LargeWithLine"};a.layout.VAlign={Bottom:"Bottom",Middle:"Middle",Top:"Top"};sap.ui.lazyRequire("sap.ui.commons.MessageBox","alert confirm show");sap.ui.lazyRequire("sap.ui.commons.MenuItemBase","new extend getMetadata");a.Orientation={Vertical:sap.ui.core.Orientation.Vertical,Horizontal:sap.ui.core.Orientation.Horizontal,vertical:sap.ui.core.Orientation.Vertical,horizontal:sap.ui.core.Orientation.Horizontal};if(!sap.ui.unified.ColorPickerHelper||!sap.ui.unified.ColorPickerHelper.bFinal){sap.ui.unified.ColorPickerHelper={isResponsive:function(){return false},factory:{createLabel:function(o){return new sap.ui.commons.Label(o)},createInput:createSlider:function(o,e){if(e&&e.step){e.smallStepWidth=e.step;delete e.step}return new sap.ui.commons.Slider(o,e)},createRadioButtonGroup:function(o){if(o&&o.buttons){o.items=o.buttons;delete o.buttons}return new sap.ui.commons.RadioButtonGroup(o)},createRadioButtonItem:,bFinal:false}}if(!sap.ui.layout.form.FormHelper||!sap.ui.layout.form.FormHelper.bFinal){sap.ui.layout.form.FormHelper={createLabel:function(o,e){return new sap.ui.commons.Label(e,{text:o})},createButton:function(o,e,a){var i=this;var n=function(n){var s=new n(o,{lite:true});s.attachEvent("press",e,i);a.call(i,s)};var s=sap.ui.require("sap/ui/commons/Button");if(s){n(s)}else{sap.ui.require(["sap/ui/commons/Button"],n)}},setButtonContent:function(o,e,a,i,n){o.setText(e);o.setTooltip(a);o.setIcon(i);o.setIconHovered(n)},addFormClass:function(){return null},setToolbar:function(o){return o},getToolbarTitle:function(o){return o&&o.getId()},bArrowKeySupport:true,bFinal:false}}if(!sap.ui.unified.FileUploaderHelper||!sap.ui.unified.FileUploaderHelper.bFinal){sap.ui.unified.FileUploaderHelper={createTextField:function(o){var e=new sap.ui.commons.TextField(o);return e},setTextFieldContent:function(o,e){o.setWidth(e)},createButton:function(o){var e=new sap.ui.commons.Button(o);return e},addFormClass:function(){return"sapUiCFUM"},bFinal:false}}var i=e.get("sap.ui.table.TableHelper");if(!i||!i.bFinal){e.set("sap.ui.table.TableHelper",{createLabel:function(o){return new sap.ui.commons.Label(o)},createTextView:function(o){if(o&&!o.wrapping){o.wrapping=false}return new sap.ui.commons.TextView(o)},addTableClass:function(){return"sapUiTableCommons"},bFinal:false})}if(!sap.ui.layout.GridHelper||!sap.ui.layout.GridHelper.bFinal){sap.ui.layout.GridHelper={getLibrarySpecificClass:function(){return"sapUiRespGridOverflowHidden"},bFinal:false}}return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/CalendarType",[],true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/ComponentContainer",["sap/ui/base/ManagedObject","./Control","./Component","./library","./ComponentContainerRenderer","sap/base/Log","sap/ui/core/Configuration"],function(e,t,n,o,i,a,r){"use strict";var s=o.ComponentLifecycle;var p=t.extend("sap.ui.core.ComponentContainer",{metadata:{interfaces:["sap.ui.core.IPlaceholderSupport"],library:"sap.ui.core",properties:{name:{type:"string",defaultValue:null},url:{type:"sap.ui.core.URI",defaultValue:null},async:{type:"boolean",defaultValue:false},handleValidation:{type:"boolean",defaultValue:false},settings:{type:"object",defaultValue:null},propagateModel:{type:"boolean",defaultValue:false},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},lifecycle:{type:"sap.ui.core.ComponentLifecycle",defaultValue:s.Legacy},autoPrefixId:{type:"boolean",defaultValue:false},usage:{type:"string",defaultValue:null},manifest:{type:"any",defaultValue:null}},associations:{component:{type:"sap.ui.core.UIComponent",multiple:false}},events:{componentCreated:{parameters:{component:{type:"sap.ui.core.UIComponent"}}},componentFailed:{allowPreventDefault:true,parameters:{reason:{type:"object"}}}},designtime:"sap/ui/core/designtime/ComponentContainer.designtime"},renderer:i});function l(t,o,i,a){var r=typeof o==="string"?n.get(o):o;var s=t.getComponentInstance();if(s!==r){if(s){s.setContainer(undefined);if(a){s.destroy()}else{t._propagateProperties(true,s,e._oEmptyPropagatedProperties,true)}}t.setAssociation("component",r,i);r=t.getComponentInstance();if(r){r.setContainer(t);t.propagateProperties(true)}}}p.prototype.getComponentInstance=function(){var e=this.getComponent();return e&&n.get(e)};var f={onAfterRendering:function(){if(this._placeholder){this._placeholder.show(this)}}};p.prototype.showPlaceholder=function(e){var t;if(!r.getPlaceholder()){return}if(this._placeholder){this.hidePlaceholder()}if(e.placeholder){this._placeholder=e.placeholder;t=this._placeholder._load()}else{t=Promise.resolve()}if(this.getDomRef()&&this._placeholder){this._placeholder.show(this)}this.addEventDelegate(f,this);return t};p.prototype.hidePlaceholder=function(){if(this._placeholder){this._placeholder.hide();this.removeEventDelegate(f);this._placeholder=undefined}};p.prototype.setComponent=function(e,t){l(this,e,t,this.getLifecycle()===s.Container||typeof this.getUsage()==="string"&&this.getUsage()&&this.getLifecycle()===s.Legacy);return this};p.prototype.applySettings=function(e,n){if(e){if(e.manifest==="true"||e.manifest==="false"){e.manifest=e.manifest==="true"}if(e.manifest&&e.async===undefined){e.async=true}}t.prototype.applySettings.apply(this,arguments)};function u(e){var t=e.getName();var n=e.getManifest();var o=e.getUrl();var i=e.getSettings();var a={name:t?t:undefined,manifest:n!==null?n:false,async:e.getAsync(),url:o?o:undefined,handleValidation:e.getHandleValidation(),settings:i!==null?i:undefined};return a}p.prototype._createComponent=function(){var e=n.getOwnerComponentFor(this),t=this.getUsage(),o=u(this);if(t){if(e){o=e._enhanceWithUsageConfig(t,o)}else{a.error('ComponentContainer "'+this.getId()+'" does have a "usage", but no owner component!')}}if(this.getAutoPrefixId()){if(o.id){o.id=this.getId()+"-"+o.id}if(o.settings&&o.settings.id){o.settings.id=this.getId()+"-"+o.settings.id}}return n._createComponent(o,e)};p.prototype.onBeforeRendering=function(){var e=this.getComponentInstance(),t=this.getUsage(),n=this.getName(),o=this.getManifest();if(!this._oComponentPromise&&!e&&(t||n||o)){e=this._createComponent();if(e instanceof Promise){this._oComponentPromise=e;e.then(function(e){delete this._oComponentPromise;this.setComponent(e);this.fireComponentCreated({component:e})}.bind(this),function(e){delete this._oComponentPromise;if(this.fireComponentFailed({reason:e})){a.error("Failed to load component for container "+this.getId(),e)}}.bind(this))}else if(e){this.setComponent(e,true);this.fireComponentCreated({component:e})}else{this.fireComponentFailed({reason:new Error("The component could not be created.")})}}if(e&&e.onBeforeRendering){e.onBeforeRendering()}};p.prototype.onAfterRendering=function(){var e=this.getComponentInstance();if(e&&e.onAfterRendering){e.onAfterRendering()}};p.prototype.exit=function(){l(this,undefined,true,this.getLifecycle()!==s.Application)};p.prototype.propagateProperties=function(e){var n=this.getComponentInstance();if(n&&this.getPropagateModel()){this._propagateProperties(e,n)}t.prototype.propagateProperties.apply(this,arguments)};p.prototype._propagateContextualSettings=function(){var e=this.getComponentInstance();if(e){e._applyContextualSettings(this._getContextualSettings())}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/Core",["jquery.sap.global","sap/ui/Device","sap/ui/base/EventProvider","sap/ui/base/Interface","sap/ui/base/Object","sap/ui/base/ManagedObject","./Component","./Configuration","./Element","./ElementMetadata","./Lib","./Rendering","./RenderManager","./UIArea","./message/MessageManager","sap/base/Log","sap/ui/performance/Measurement","sap/ui/security/FrameOptions","sap/base/assert","sap/base/util/ObjectPath","sap/ui/performance/trace/initTraces","sap/base/util/isEmptyObject","sap/base/util/each","sap/ui/VersionInfo","sap/base/config","sap/ui/events/jquery/EventSimulation"],function(e,t,n,o,i,r,a,s,u,c,p,d,l,f,h,g,y,m,v,E,b,C,T,M){"use strict";if(sap.ui.getCore&&sap.ui.getCore()){return sap.ui.getCore()}var S;var I;b();var _;var L=function(e,t){var n=[],o=0,i=0;this.startTask=function(e){var t=n.length;n[t]={name:e,finished:false};o++;return t};this.finishTask=function(t,a){if(!n[t]||n[t].finished){throw new Error("trying to finish non existing or already finished task")}n[t].finished=true;o--;if(a===false){i++}if(o===0){g.info("Sync point '"+e+"' finished (tasks:"+n.length+", open:"+o+", failures:"+i+")");r()}};function r(){if(t){t(o,i)}t=null}g.info("Sync point '"+e+"' created")};var P=i.extend("sap.ui.core.Core",{constructor:function(){var e=this,t="sap.ui.core.Core";if(sap.ui.getCore&&sap.ui.getCore()){g.error("Only the framework must create an instance of sap/ui/core/Core."+" To get access to its functionality, use sap.ui.getCore().");return sap.ui.getCore()}i.call(this);_=new n;["attachEvent","detachEvent","getEventingParent"].forEach(;this.bBooted=false;this.bInitialized=false;this.aPlugins=[];this.oModels={};this.oEventBus=null;Object.defineProperty(this,"mElements",{get:configurable:false});this.mObjects={template:{}};this.oRootComponent=null;this.aInitListeners=[];this.bInitLegacyLib=false;g.info("Creating Core",null,t);y.start("coreComplete","Core.js - complete");y.start("coreBoot","Core.js - boot");y.start("coreInit","Core.js - init");var o=sap.ui.require("sap/base/config/GlobalConfigurationProvider");o.freeze();s.setCore(this);var r=s.getValue("frameOptionsConfig")||{};r.mode=s.getFrameOptions();r.allowlistService=s.getAllowlistService();this.oFrameOptions=new m(r);this._grantFriendAccess();var a=this.aModules=s.getValue("modules");if(s.getDebug()){a.unshift("sap.ui.debug.DebugEnv")}var c=a.indexOf("sap.ui.core.library");if(c!=0){if(c>0){a.splice(c,1)}a.unshift("sap.ui.core.library")}if(s.getValue("xx-lesssupport")&&a.indexOf("sap.ui.core.plugin.LessSupport")==-1){g.info("Including LessSupport into declared modules");a.push("sap.ui.core.plugin.LessSupport")}var d=s.getPreload();var l=d==="async"||sap.ui.loader.config().async;document.documentElement.classList.add("sapUiTheme-"+s.getTheme());g.info("Declared theme "+s.getTheme(),null,t);g.info("Declared modules: "+a,t);this._setupContentDirection();this._setupBrowser();this._setupOS();this._setupLang();this._setupAnimation();sap.ui.getCore=function(){return e.getInterface()};var f=new L("UI5 Document Ready",function(t,n){e.init()});var h=f.startTask("document.ready");var v=f.startTask("preload and boot");var E=function(){g.trace("document is ready");f.finishTask(h);document.removeEventListener("DOMContentLoaded",E)};if(document.readyState!=="loading"){E()}else{document.addEventListener("DOMContentLoaded",E)}var b=new L("UI5 Core Preloads and Bootstrap Script",function(t,n){g.trace("Core loaded: open="+t+", failures="+n);e._boot(l,});var C=b.startTask("create sp2 tasks task");if(s.getValue("versionedLibCss")){var T=b.startTask("load version info");var S=function(e){if(e){g.trace('Loaded "sap-ui-version.json".')}else{g.error('Could not load "sap-ui-version.json".')}b.finishTask(T)};if(l){M.load().then(S,}else{S(sap.ui.getVersionInfo({async:l,failOnError:false}))}}this._polyfillFlexbox();var I=b.startTask("bootstrap script");this.boot=function(){if(this.bBooted){return}this.bBooted=true;A.call(this);b.finishTask(I)};function A(){var t=s.getValue("xx-bootTask");if(t){var n=b.startTask("custom boot task");t(function(e){b.finishTask(n,typeof e==="undefined"||e===true)})}if(d==="sync"||d==="async"){var o=e.aModules.reduce(function(e,t){var n=t.search(/\.library$/);if(n>=0){e.push(t.slice(0,n))}return e},[]);var i=p._load(o,{sync:!l,preloadOnly:true});if(l){var r=b.startTask("preload bootstrap libraries");i.then(function(){b.finishTask(r)},}}var a=s.getAppCacheBuster();if(a&&a.length>0){if(l){var u=b.startTask("require AppCachebuster");sap.ui.require(["sap/ui/core/AppCacheBuster"],}else{var c=sap.ui.requireSync("sap/ui/core/AppCacheBuster");c.boot(b)}}if(s.getSupportMode()!==null){var f=b.startTask("support info script");var h=function(e,t){e.initializeSupportMode(s.getSupportMode(),l);t.initSupportRules(s.getSupportMode());b.finishTask(f)};if(l){sap.ui.require(["sap/ui/core/support/Support","sap/ui/support/Bootstrap"],h,function(e){g.error("Could not load support mode modules:",e)})}else{g.warning("Synchronous loading of Support mode. Set preload configuration to 'async' or switch to asynchronous bootstrap to prevent these synchronous request.","SyncXHR",null,function(){return{type:"SyncXHR",name:"support-mode"}});h(sap.ui.requireSync("sap/ui/core/support/Support"),sap.ui.requireSync("sap/ui/support/Bootstrap"))}}if(s.getTestRecorderMode()!==null){var y=b.startTask("test recorder script");var m=function(e){e.init(s.getTestRecorderMode());b.finishTask(y)};if(l){sap.ui.require(["sap/ui/testrecorder/Bootstrap"],m,}else{g.warning("Synchronous loading of Test recorder mode. Set preload configuration to 'async' or switch to asynchronous bootstrap to prevent these synchronous request.","SyncXHR",null,function(){return{type:"SyncXHR",name:"test-recorder-mode"}});m(sap.ui.requireSync("sap/ui/testrecorder/Bootstrap"))}}b.finishTask(C)}},metadata:{publicMethods:["isInitialized","attachInit","getConfiguration","lock","unlock","isLocked","createUIArea","getUIArea","getUIDirty","applyChanges","getStaticAreaRef","createRenderManager","applyTheme","setThemeRoot","attachThemeChanged","detachThemeChanged","isThemeApplied","notifyContentDensityChanged","getCurrentFocusedControlId","isMobile","getEventBus","byId","byFieldGroupId","getLoadedLibraries","loadLibrary","initLibrary","getLibraryResourceBundle","setModel","getModel","hasModel","getMessageManager","attachEvent","detachEvent","attachControlEvent","detachControlEvent","attachParseError","detachParseError","attachValidationError","detachValidationError","attachFormatError","detachFormatError","attachValidationSuccess","detachValidationSuccess","attachLocalizationChanged","detachLocalizationChanged","isStaticAreaRef","fireFormatError","fireValidationSuccess","fireValidationError","fireParseError","boot","addPrerenderingTask","setMessageManager","attachLibraryChanged","detachLibraryChanged","loadLibraries","attachThemeScopingChanged","detachThemeScopingChanged","fireThemeScopingChanged","includeLibraryTheme","attachInitEvent","registerPlugin","unregisterPlugin","setRoot","getRootComponent","getApplication","getControl","getComponent","getTemplate","createComponent","attachIntervalTimer","detachIntervalTimer","getElementById","getRenderManager"]}});P.M_EVENTS={ControlEvent:"ControlEvent",UIUpdated:"UIUpdated",ThemeChanged:"ThemeChanged",ThemeScopingChanged:"themeScopingChanged",LocalizationChanged:"localizationChanged",LibraryChanged:"libraryChanged",ValidationError:"validationError",ParseError:"parseError",FormatError:"formatError",ValidationSuccess:"validationSuccess"};P.prototype._grantFriendAccess=function(){c.prototype.register=function(e){p._registerElement(e)}};P.prototype._setupContentDirection=function(){var e="sap.ui.core.Core",t=s.getRTL()?"rtl":"ltr";document.documentElement.setAttribute("dir",t);g.info("Content direction set to '"+t+"'",null,e)};P.prototype._setupBrowser=function(){var e="sap.ui.core.Core";var n=document.documentElement;var o=t.browser;var i=o.name;if(i){if(i===o.BROWSER.SAFARI&&o.mobile){i="m"+i}i=i+(o.version===-1?"":Math.floor(o.version));n.dataset.sapUiBrowser=i;g.debug("Browser-Id: "+i,null,e)}};P.prototype._setupOS=function(){var e=document.documentElement;e.dataset.sapUiOs=t.os.name+t.os.versionStr;var n=null;switch(t.os.name){case t.os.OS.IOS:n="sap-ios";break;case t.os.OS.ANDROID:n="sap-android";break}if(n){e.classList.add(n)}};P.prototype._setupLang=function(){var e=document.documentElement;var t=function(){var t=s.getLocale();t?e.setAttribute("lang",t.toString()):e.removeAttribute("lang")};t.call(this);this.attachLocalizationChanged(t,this)};P.prototype._setupAnimation=function(){var t=document.documentElement;var n=s.getAnimationMode();t.dataset.sapUiAnimationMode=n;var o=n!==s.AnimationMode.minimal&&n!==s.AnimationMode.none;t.dataset.sapUiAnimation=o?"on":"off";if(typeof e!=="undefined"){e.fx.off=!o}};P.prototype._polyfillFlexbox=P.prototype._boot=function(e,t){this.aModules.push("sap/ui/core/date/"+s.getCalendarType());if(e){return this._requireModulesAsync().then(function(){t()})}g.warning("Modules and libraries declared via bootstrap-configuration are loaded synchronously. Set preload configuration to"+" 'async' or switch to asynchronous bootstrap to prevent these requests.","SyncXHR",null,function(){return{type:"SyncXHR",name:"legacy-module"}});this.aModules.forEach(function(e){var t=e.match(/^(.*)\.library$/);if(t){p._load(t[1],{sync:true})}else{sap.ui.requireSync(/^jquery\.sap\./.test(e)?e:e.replace(/\./g,"/"))}});t()};P.prototype._requireModulesAsync=function(){var e=[],t=[];this.aModules.forEach(function(n){var o=n.match(/^(.*)\.library$/);if(o){e.push(o[1])}else{t.push(/^jquery\.sap\./.test(n)?n:n.replace(/\./g,"/"))}});return Promise.all([p._load(e),new Promise(function(e){sap.ui.require(t,})])};P.prototype.applyTheme=function(e,t){v(typeof e==="string","sThemeName must be a string");v(typeof t==="string"||typeof t==="undefined","sThemeBaseUrl must be a string or undefined");e=s.normalizeTheme(e,t);if(e&&s.getTheme()!=e){s.setTheme(e);this._getThemeManager().then(}};P.prototype.setThemeRoot=function(e,t,n,o){this._getThemeManager().then(function(i){i.setThemeRoot(e,t,n,o)});return this};P.prototype.init=function(){if(this.bInitialized){return}f.setCore(this);var e="sap.ui.core.Core.init()";g.info("Initializing",null,e);y.end("coreInit");this._setBodyAccessibilityRole();var t=s.getValue("xx-waitForTheme");if(this.isThemeApplied()||!t){this._executeInitialization()}else{d.suspend();var n=function(e){this._getThemeManager().then(}.bind(this);if(t==="rendering"){d.notifyInteractionStep();this._executeInitialization();d.getLogger().debug("delay initial rendering until theme has been loaded");n(function(){d.resume("after theme has been loaded")})}else if(t==="init"){d.getLogger().debug("delay init event and initial rendering until theme has been loaded");d.notifyInteractionStep();n(bind(this))}}};P.prototype._executeOnInit=function(){var e=s.getValue("onInit");if(e){if(typeof e==="function"){e()}else if(typeof e==="string"){var t=/^module\:((?:[_$.\-a-zA-Z0-9]+\/)*[_$.\-a-zA-Z0-9]+)$/.exec(e);if(t&&t[1]){setTimeout(sap.ui.require.bind(sap.ui,[t[1]]),0)}else{var n=E.get(e);if(typeof n==="function"){n()}else{g.warning("[Deprecated] Do not use inline JavaScript code with the oninit attribute."+" Use the module:... syntax or the name of a global function");window.eval(e)}}}}};P.prototype._setupRootComponent=function(){var e="sap.ui.core.Core.init()";var t=s.getRootComponent();if(t){g.info("Loading Root Component: "+t,null,e);var n=sap.ui.component({name:t});this.oRootComponent=n;var o=s.getValue("xx-rootComponentNode");if(o&&n.isA("sap.ui.core.UIComponent")){var r=document.getElementById(o);if(r){g.info("Creating ComponentContainer for Root Component: "+t,null,e);var a=sap.ui.requireSync("sap/ui/core/ComponentContainer"),u=new a({component:n,propagateModel:true});u.placeAt(r)}}}else{var c=s.getApplication();if(c){g.warning("The configuration 'application' is deprecated. Please use the configuration 'component' instead! "+"Please migrate from sap.ui.app.Application to sap.ui.core.Component.","SyncXHR",null,function(){return{type:"Deprecation",name:"sap.ui.core"}});g.info("Loading Application: "+c,null,e);sap.ui.requireSync(c.replace(/\./g,"/"));var p=E.get(c);v(p!==undefined,'The specified application "'+c+'" could not be found!');var d=new p;v(i.isA(d,"sap.ui.app.Application"),'The specified application "'+c+'" must be an instance of sap.ui.app.Application!')}}};P.prototype._setBodyAccessibilityRole=function(){var e=document.body;if(s.getAccessibility()&&s.getAutoAriaBodyRole()&&!e.getAttribute("role")){e.setAttribute("role","application")}};P.prototype._executeInitListeners=function(){var e="sap.ui.core.Core.init()";var t=this.aInitListeners;this.aInitListeners=undefined;if(t&&t.length>0){g.info("Fire Loaded Event",null,e);t.forEach(}};P.prototype._executeInitialization=function(){var e="sap.ui.core.Core.init()";if(this.bInitialized){return}this.bInitialized=true;g.info("Initialized",null,e);g.info("Starting Plugins",null,e);this.startPlugins();g.info("Plugins started",null,e);this._executeOnInit();this._setupRootComponent();this._executeInitListeners()};P.prototype.isInitialized=function(){return this.bInitialized};P.prototype.isThemeApplied=function(){I=I||sap.ui.require("sap/ui/core/theming/ThemeManager");return I?I.themeLoaded:false};P.prototype._getThemeManager=function(e){I=I||sap.ui.require("sap/ui/core/theming/ThemeManager");if(!this.pThemeManager){if(!I){this.pThemeManager=new Promise(function(e,t){sap.ui.require(["sap/ui/core/theming/ThemeManager"],function(t){e(t)},t)})}else{this.pThemeManager=Promise.resolve(I)}this.pThemeManager=this.pThemeManager.then(function(e){e.attachEvent("ThemeChanged",bind(this));return e}.bind(this))}if(I&&e){I.reset()}return this.pThemeManager};P.prototype.attachInitEvent=function(e){v(typeof e==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(e)}};P.prototype.attachInit=function(e){v(typeof e==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(e)}else{e()}};P.prototype.lock=function(){this.bLocked=true};P.prototype.unlock=function(){this.bLocked=false};P.prototype.isLocked=function(){return this.bLocked};P.prototype.getConfiguration=function(){return s};P.prototype.getRenderManager=function(){return this.createRenderManager()};P.prototype.createRenderManager=function(){v(this.isInitialized(),"A RenderManager should be created only after the Core has been initialized");var e=new l;return e.getInterface()};P.prototype.getCurrentFocusedControlId=function(){if(!this.isInitialized()){throw new Error("Core must be initialized")}S=S||sap.ui.require("sap/ui/core/FocusHandler");return S?S.getCurrentFocusedControlId():null};P.prototype.loadLibrary=function(e,t){var n={name:e};var o={sync:true};if(typeof t==="boolean"){o.sync=!t}else if(typeof t==="string"){n.url=t}else if(typeof t==="object"){o.sync=!t.async;n.url=t.url}var i=p._load(n,o);if(!o.sync){return i.then(}else{return i[0]}};P.prototype.loadLibraries=function(e,t){t=Object.assign({async:true},t);t.sync=!t.async;var n=p._load(e,t);if(!t.sync){return n}else{return undefined}};P.prototype.createComponent=function(e,t,n,o){if(typeof e==="string"){e={name:e,url:t};if(typeof n==="object"){e.settings=n}else{e.id=n;e.settings=o}}if(e.async&&(e.manifest!==undefined||e.manifestFirst===undefined&&e.manifestUrl===undefined)){if(e.manifest===undefined){e.manifest=false}return a.create(e)}return sap.ui.component(e)};P.prototype.getRootComponent=function(){return this.oRootComponent};P.prototype.initLibrary=function(e){v(typeof e==="string"||typeof e==="object","oLibInfo must be a string or object");var t=typeof e==="string";if(t){e={name:e}}var n=e.name,o="sap.ui.core.Core.initLibrary()";if(t){g.error("[Deprecated] library "+n+" uses old fashioned initLibrary() call (rebuild with newest generator)")}if(!n){g.error("A library name must be provided.",null,o);return}var i=p.get(n);if(i&&i.isSettingsEnhanced()){return E.get(n)}return p.init(e)};P.prototype.includeLibraryTheme=function(e,t,n){var o=p._get(e,true);o._includeTheme(t,n)};P.prototype.getLoadedLibraries=function(){return p.all()};P.prototype.getLibraryResourceBundle=function(e,t,n){if(typeof e==="boolean"){n=e;e=undefined;t=undefined}if(typeof t==="boolean"){n=t;t=undefined}v(e===undefined&&t===undefined||typeof e==="string","sLibraryName must be a string or there is no argument given at all");v(t===undefined||typeof t==="string","sLocale must be a string or omitted");e=e||"sap.ui.core";var o=p._get(e||"sap.ui.core",true);return o._loadResourceBundle(t,!n)};function A(e,t){v(typeof e==="string"||typeof e==="object","oDomRef must be a string or object");v(t instanceof o||i.isA(t,"sap.ui.core.Control"),"oControl must be a Control or Interface");if(t){t.placeAt(e,"only")}}P.prototype.setRoot=A;P.prototype.createUIArea=function(e){return f.create(e)};P.prototype.getUIArea=function(e){v(typeof e==="string"||typeof e==="object","o must be a string or object");var t="";if(typeof e=="string"){t=e}else{t=e.id}if(t){return f.registry.get(t)}return null};P.prototype.getUIDirty=function(){return d.getUIDirty()};P.prototype.attachUIUpdated=function(e,t){_.attachEvent(P.M_EVENTS.UIUpdated,e,t)};P.prototype.detachUIUpdated=function(e,t){_.detachEvent(P.M_EVENTS.UIUpdated,e,t)};d.attachUIUpdated(function(e){_.fireEvent(P.M_EVENTS.UIUpdated,e.getParameters())});P.prototype.notifyContentDensityChanged=P.prototype.attachThemeChanged=function(e,t){this._getThemeManager();_.attachEvent(P.M_EVENTS.ThemeChanged,e,t)};P.prototype.detachThemeChanged=function(e,t){_.detachEvent(P.M_EVENTS.ThemeChanged,e,t)};P.prototype.fireThemeChanged=P.prototype.attachThemeScopingChanged=function(e,t){_.attachEvent(P.M_EVENTS.ThemeScopingChanged,e,t)};P.prototype.detachThemeScopingChanged=function(e,t){_.detachEvent(P.M_EVENTS.ThemeScopingChanged,e,t)};P.prototype.fireThemeScopingChanged=function(e){_.fireEvent(P.M_EVENTS.ThemeScopingChanged,e)};P.prototype.attachLocalizationChanged=function(e,t){_.attachEvent(P.M_EVENTS.LocalizationChanged,e,t)};P.prototype.detachLocalizationChanged=function(e,t){_.detachEvent(P.M_EVENTS.LocalizationChanged,e,t)};P.prototype.fireLocalizationChanged=function(t){var n=P.M_EVENTS.LocalizationChanged,o=e.Event(n,{changes:t}),i=r._handleLocalizationChange;g.info("localization settings changed: "+Object.keys(t).join(","),null,"sap.ui.core.Core");T(this.oModels,function(e,t){if(t&&t._handleLocalizationChange){t._handleLocalizationChange()}});function c(e){f.registry.forEach(function(t){i.call(t,e)});a.registry.forEach(function(t){i.call(t,e)});u.registry.forEach(}c.call(this,1);c.call(this,2);if(t.rtl!=undefined){document.documentElement.setAttribute("dir",t.rtl?"rtl":"ltr");this._getThemeManager().then(;f.registry.forEach(function(e){e.invalidate()});g.info("RTL mode "+t.rtl?"activated":"deactivated")}u.registry.forEach(function(e){e._handleEvent(o)});_.fireEvent(n,{changes:t})};P.prototype.attachLibraryChanged=function(e,t){_.attachEvent(P.M_EVENTS.LibraryChanged,e,t)};P.prototype.detachLibraryChanged=function(e,t){_.detachEvent(P.M_EVENTS.LibraryChanged,e,t)};p.attachLibraryChanged(;P.prototype.applyChanges=function(){d.renderPendingUIUpdates("forced by applyChanges")};P.prototype.registerObject=function(e){var t=e.getId(),n=e.getMetadata().getStereotype(),o=this.getObject(n,t);if(o&&o!==e){g.error('adding object "'+n+"\" with duplicate id '"+t+"'");throw new Error('Error: adding object "'+n+"\" with duplicate id '"+t+"'")}this.mObjects[n][t]=e};P.prototype.deregisterObject=function(e){var t=e.getId(),n=e.getMetadata().getStereotype();delete this.mObjects[n][t]};P.prototype.byId=u.registry.get;P.prototype.getControl=u.registry.get;P.prototype.getElementById=u.registry.get;P.prototype.getObject=function(e,t){v(t==null||typeof t==="string","sId must be a string when defined");v(this.mObjects[e]!==undefined,"sType must be a supported stereotype");return t==null?undefined:this.mObjects[e]&&this.mObjects[e][t]};P.prototype.getComponent=a.registry.get;P.prototype.getTemplate=function(e){g.warning("Synchronous loading of 'sap/ui/core/tmpl/Template'. Use 'sap/ui/core/tmpl/Template' module and"+" call Template.byId instead","SyncXHR",null,function(){return{type:"SyncXHR",name:"Core.prototype.getTemplate"}});var t=sap.ui.requireSync("sap/ui/core/tmpl/Template");return t.byId(e)};P.prototype.getStaticAreaRef=function(){return f.getStaticAreaRef()};P.prototype.isStaticAreaRef=function(e){return f.isStaticAreaRef(e)};var V;P.prototype.attachIntervalTimer=function(e,t){g.warning("Usage of sap.ui.getCore().attachIntervalTimer() is deprecated. "+"Please use 'IntervalTrigger.addListener()' from 'sap/ui/core/IntervalTrigger' module instead.","Deprecation",null,function(){return{type:"sap.ui.core.Core",name:"Core"}});if(!V){V=sap.ui.require("sap/ui/core/IntervalTrigger")||sap.ui.requireSync("sap/ui/core/IntervalTrigger")}V.addListener(e,t)};P.prototype.detachIntervalTimer=P.prototype.attachControlEvent=function(e,t){_.attachEvent(P.M_EVENTS.ControlEvent,e,t)};P.prototype.detachControlEvent=P.prototype.fireControlEvent=P.prototype._handleControlEvent=function(t,n){var o=e.Event(t.type);Object.assign(o,t);o.originalEvent=undefined;this.fireControlEvent({browserEvent:o,uiArea:n})};P.prototype.getApplication=P.prototype.registerPlugin=function(e){v(typeof e==="object","oPlugin must be an object");if(!e){return}for(var t=0,n=this.aPlugins.length;t<n;t++){if(this.aPlugins[t]===e){return}}this.aPlugins.push(e);if(this.bInitialized&&e&&e.startPlugin){e.startPlugin(this)}};P.prototype.unregisterPlugin=function(e){v(typeof e==="object","oPlugin must be an object");if(!e){return}var t=-1;for(var n=this.aPlugins.length;n--;n>=0){if(this.aPlugins[n]===e){t=n;break}}if(t==-1){return}if(this.bInitialized&&e&&e.stopPlugin){e.stopPlugin(this)}this.aPlugins.splice(t,1)};P.prototype.startPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var n=this.aPlugins[e];if(n&&n.startPlugin){n.startPlugin(this,true)}}};P.prototype.stopPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var n=this.aPlugins[e];if(n&&n.stopPlugin){n.stopPlugin(this)}}};P.prototype.setModel=function(e,t){v(e==null||i.isA(e,"sap.ui.model.Model"),"oModel must be an instance of sap.ui.model.Model, null or undefined");v(t===undefined||typeof t==="string"&&!/^(undefined|null)?$/.test(t),"sName must be a string or omitted");var n=this,o;if(!e&&this.oModels[t]){delete this.oModels[t];if(C(n.oModels)&&C(n.oBindingContexts)){o=r._oEmptyPropagatedProperties}else{o={oModels:Object.assign({},n.oModels),oBindingContexts:{},aPropagationListeners:[]}}f.registry.forEach(function(n){if(e!=n.getModel(t)){n._propagateProperties(t,n,o,false,t)}})}else if(e&&e!==this.oModels[t]){this.oModels[t]=e;f.registry.forEach(function(n){if(e!=n.getModel(t)){var o={oModels:Object.assign({},this.oModels),oBindingContexts:{},aPropagationListeners:[]};n._propagateProperties(t,n,o,false,t)}}.bind(this))}return this};P.prototype.setMessageManager=function(e){this.oMessageManager=e};P.prototype.getMessageManager=function(){if(!this.oMessageManager){this.oMessageManager=new h}return this.oMessageManager};P.prototype.byFieldGroupId=function(e){return u.registry.filter(};P.prototype.getModel=function(e){v(e===undefined||typeof e==="string"&&!/^(undefined|null)?$/.test(e),"sName must be a string or omitted");return this.oModels[e]};P.prototype.hasModel=P.prototype.getEventBus=function(){if(!this.oEventBus){var e=sap.ui.require("sap/ui/core/EventBus");if(!e){g.warning("Synchronous loading of EventBus. Ensure that 'sap/ui/core/EventBus' module is loaded"+" before this function is called.","SyncXHR",null,;e=sap.ui.requireSync("sap/ui/core/EventBus")}var t=this.oEventBus=new e;this._preserveHandler=l.attachPreserveContent(this._preserveHandler)}return this.oEventBus};P.prototype.attachValidationError=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}_.attachEvent(P.M_EVENTS.ValidationError,e,t,n);return this};P.prototype.detachValidationError=function(e,t){_.detachEvent(P.M_EVENTS.ValidationError,e,t);return this};P.prototype.attachParseError=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}_.attachEvent(P.M_EVENTS.ParseError,e,t,n);return this};P.prototype.detachParseError=function(e,t){_.detachEvent(P.M_EVENTS.ParseError,e,t);return this};P.prototype.attachFormatError=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}_.attachEvent(P.M_EVENTS.FormatError,e,t,n);return this};P.prototype.detachFormatError=function(e,t){_.detachEvent(P.M_EVENTS.FormatError,e,t);return this};P.prototype.attachValidationSuccess=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}_.attachEvent(P.M_EVENTS.ValidationSuccess,e,t,n);return this};P.prototype.detachValidationSuccess=function(e,t){_.detachEvent(P.M_EVENTS.ValidationSuccess,e,t);return this};P.prototype.fireParseError=function(e){_.fireEvent(P.M_EVENTS.ParseError,e);return this};P.prototype.fireValidationError=function(e){_.fireEvent(P.M_EVENTS.ValidationError,e);return this};P.prototype.fireFormatError=function(e){_.fireEvent(P.M_EVENTS.FormatError,e);return this};P.prototype.fireValidationSuccess=function(e){_.fireEvent(P.M_EVENTS.ValidationSuccess,e);return this};P.prototype.isMobile=function(){return t.browser.mobile};P.prototype._getEventProvider=function(){return _};P.prototype.addPrerenderingTask=P.prototype.destroy=function(){l.detachPreserveContent(this._preserveHandler);_.destroy();i.prototype.destroy.call(this)};sap.ui.setRoot=A;return(new P).getInterface()});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/LocaleData",["./CalendarType","./Locale","sap/base/assert","sap/base/util/extend","sap/base/util/LoaderExtensions","sap/ui/base/Object","sap/ui/core/Configuration","sap/ui/core/date/CalendarWeekNumbering"],function(e,t,r,n,i,a,o,s){"use strict";var u=/c/i,l=/e/i,c={"acceleration-meter-per-second-squared":"acceleration-meter-per-square-second","concentr-milligram-per-deciliter":"concentr-milligram-ofglucose-per-deciliter","concentr-part-per-million":"concentr-permillion","consumption-liter-per-100kilometers":"consumption-liter-per-100-kilometer","pressure-millimeter-of-mercury":"pressure-millimeter-ofhg","pressure-pound-per-square-inch":"pressure-pound-force-per-square-inch","pressure-inch-hg":"pressure-inch-ofhg","torque-pound-foot":"torque-pound-force-foot"},f=/^([+-]?)((\d+)(?:\.(\d+))?)[eE]([+-]?\d+)$/,g=/0+$/;var m=a.extend("sap.ui.core.LocaleData",{constructor:function(e){this.oLocale=e;a.apply(this);var t=w(e);this.mData=t.mData;this.sCLDRLocaleId=t.sCLDRLocaleId},_get:_getMerged:function(){return this._get.apply(this,arguments)},_getDeep:function(e,t){var r=e;for(var n=0;n<t.length;n++){r=r[t[n]];if(r===undefined){break}}return r},getOrientation:function(){return this._get("orientation")},getCurrentLanguageName:function(){var e=this.getLanguages();var t;var r=this.oLocale.getModernLanguage();var n=this.oLocale.getScript();if(r==="sr"&&n==="Latn"){r="sh";n=null}if(this.oLocale.getRegion()){t=e[r+"_"+this.oLocale.getRegion()]}if(!t&&n){t=e[r+"_"+n]}if(!t){t=e[r]}return t},getLanguages:function(){return this._get("languages")},getScripts:function(){return this._get("scripts")},getTerritories:function(){return this._get("territories")},getMonths:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide","sWidth must be narrow, abbreviated or wide");return this._get(_(t),"months","format",e)},getMonthsStandAlone:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide","sWidth must be narrow, abbreviated or wide");return this._get(_(t),"months","stand-alone",e)},getDays:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide"||e=="short","sWidth must be narrow, abbreviate, wide or short");return this._get(_(t),"days","format",e)},getDaysStandAlone:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide"||e=="short","sWidth must be narrow, abbreviated, wide or short");return this._get(_(t),"days","stand-alone",e)},getQuarters:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide","sWidth must be narrow, abbreviated or wide");return this._get(_(t),"quarters","format",e)},getQuartersStandAlone:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide","sWidth must be narrow, abbreviated or wide");return this._get(_(t),"quarters","stand-alone",e)},getDayPeriods:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide","sWidth must be narrow, abbreviated or wide");return this._get(_(t),"dayPeriods","format",e)},getDayPeriodsStandAlone:function(e,t){r(e=="narrow"||e=="abbreviated"||e=="wide","sWidth must be narrow, abbreviated or wide");return this._get(_(t),"dayPeriods","stand-alone",e)},getDatePattern:function(e,t){r(e=="short"||e=="medium"||e=="long"||e=="full","sStyle must be short, medium, long or full");return this._get(_(t),"dateFormats",e)},getFlexibleDayPeriods:function(e,t){return this._get(_(t),"flexibleDayPeriods","format",e)},getFlexibleDayPeriodsStandAlone:function(e,t){return this._get(_(t),"flexibleDayPeriods","stand-alone",e)},getFlexibleDayPeriodOfTime:function(e,t){var r,n,i;r=(e*60+t)%1440;n=this._get("dayPeriodRules");function a(e){var t=e.split(":"),r=t[0],n=t[1];return parseInt(r)*60+parseInt(n)}i=Object.keys(n).find(function(e){var t=n[e];return t["_at"]&&a(t["_at"])===r});if(i){return i}return Object.keys(n).find(function(e){var t,i,o,s=n[e];if(s["_at"]){return false}o=a(s["_from"]);t=a(s["_before"]);if(o>t){i=[{start:o,end:1440},{start:0,end:t}]}else{i=[{start:o,end:t}]}return i.some(})},getTimePattern:function(e,t){r(e=="short"||e=="medium"||e=="long"||e=="full","sStyle must be short, medium, long or full");return this._get(_(t),"timeFormats",e)},getDateTimePattern:function(e,t){r(e=="short"||e=="medium"||e=="long"||e=="full","sStyle must be short, medium, long or full");return this._get(_(t),"dateTimeFormats",e)},getCombinedDateTimePattern:function(e,t,n){r(e=="short"||e=="medium"||e=="long"||e=="full","sStyle must be short, medium, long or full");r(t=="short"||t=="medium"||t=="long"||t=="full","sStyle must be short, medium, long or full");var i=this.getDateTimePattern(e,n),a=this.getDatePattern(e,n),o=this.getTimePattern(t,n);return i.replace("{0}",o).replace("{1}",a)},getCombinedDateTimeWithTimezonePattern:applyTimezonePattern:function(e){var t=[e];var r=[{group:"Timezone",length:2,field:"zone",symbol:"V"}];this._appendItems(t,r);return t[0]},getTimezoneTranslations:function(){this.mTimezoneTranslations=this.mTimezoneTranslations||b(this._get("timezoneNames"));return Object.assign({},this.mTimezoneTranslations)},getCustomDateTimePattern:function(e,t){var r=this._get(_(t),"dateTimeFormats","availableFormats");return this._getFormatPattern(e,r,t)},getIntervalPattern:function(e,t){var r=this._get(_(t),"dateTimeFormats","intervalFormats"),n,i,a,o,s;if(e){n=e.split("-");i=n[0];a=n[1];o=r[i];if(o){s=o[a];if(s){return s}}}return r.intervalFormatFallback},getCombinedIntervalPattern:function(e,t){var r=this._get(_(t),"dateTimeFormats","intervalFormats"),n=r.intervalFormatFallback;return n.replace(/\{(0|1)\}/g,e)},getCustomIntervalPattern:function(e,t,r){var n=this._get(_(r),"dateTimeFormats","intervalFormats");return this._getFormatPattern(e,n,r,t)},_getFormatPattern:function(e,t,r,n){var i,a,o;if(!n){i=t[e]}else if(typeof n==="string"){if(n=="j"||n=="J"){n=this.getPreferredHourSymbol()}o=t[e];i=o&&o[n]}if(i){if(typeof i==="object"){a=Object.keys(i).map(function(e){return i[e]})}else{return i}}if(!a){a=this._createFormatPattern(e,t,r,n)}if(a&&a.length===1){return a[0]}return a},_createFormatPattern:function(e,t,r,n){var i=this._parseSkeletonFormat(e),a,o=this._findBestMatch(i,e,t),s,u,l,c,f,g,m,p,y=/^([GyYqQMLwWEecdD]+)([hHkKjJmszZvVOXx]+)$/,v,b;if(n){if(typeof n==="string"){p=d[n]?d[n].group:"";if(p){v=h[p].index>i[i.length-1].index}m=n}else{v=true;if(i[0].symbol==="y"&&o&&o.pattern.G){l=d["G"];c=h[l.group];i.splice(0,0,{symbol:"G",group:l.group,match:l.match,index:c.index,field:c.field,length:1})}for(b=i.length-1;b>=0;b--){s=i[b];if(n[s.group]){v=false;break}}for(b=0;b<i.length;b++){s=i[b];if(n[s.group]){m=s.symbol;break}}if((m=="h"||m=="K")&&n.DayPeriod){m="a"}}if(v){return[this.getCustomDateTimePattern(e,r)]}if(o&&o.missingTokens.length===0){f=o.pattern[m];if(f&&o.distance>0){f=this._expandFields(f,o.patternTokens,i)}}if(!f){u=this._get(_(r),"dateTimeFormats","availableFormats");if(y.test(e)&&"ahHkKjJms".indexOf(m)>=0){f=this._getMixedFormatPattern(e,u,r,n)}else{g=this._getFormatPattern(e,u,r);f=this.getCombinedIntervalPattern(g,r)}}a=[f]}else if(!o){f=e;a=[f]}else{if(typeof o.pattern==="string"){a=[o.pattern]}else if(typeof o.pattern==="object"){a=[];for(var w in o.pattern){f=o.pattern[w];a.push(f)}}if(o.distance>0){if(o.missingTokens.length>0){if(y.test(e)){a=[this._getMixedFormatPattern(e,t,r)]}else{a=this._expandFields(a,o.patternTokens,i);a=this._appendItems(a,o.missingTokens,r)}}else{a=this._expandFields(a,o.patternTokens,i)}}}if(e.indexOf("J")>=0){a.forEach(}return a},_parseSkeletonFormat:function(e){var t=[],r={index:-1},n,i,a;for(var o=0;o<e.length;o++){n=e.charAt(o);if(n=="j"||n=="J"){n=this.getPreferredHourSymbol()}if(n==r.symbol){r.length++;continue}i=d[n];a=h[i.group];if(i.group=="Other"||a.diffOnly){throw new Error("Symbol '"+n+"' is not allowed in skeleton format '"+e+"'")}if(a.index<=r.index){throw new Error("Symbol '"+n+"' at wrong position or duplicate in skeleton format '"+e+"'")}r={symbol:n,group:i.group,match:i.match,index:a.index,field:a.field,length:1};t.push(r)}return t},_findBestMatch:function(e,t,r){var n,i,a,o,s,u,l,c,f,g,m={distance:1e4,firstDiffPos:-1};for(var h in r){if(h==="intervalFormatFallback"||h.indexOf("B")>-1){continue}n=this._parseSkeletonFormat(h);u=0;i=[];l=true;if(e.length<n.length){continue}s=0;c=e.length;for(var p=0;p<e.length;p++){a=e[p];o=n[s];if(c===e.length){c=p}if(o){f=d[a.symbol];g=d[o.symbol];if(a.symbol===o.symbol){if(a.length===o.length){if(c===p){c=e.length}}else{if(a.length<f.numericCeiling?o.length<g.numericCeiling:o.length>=g.numericCeiling){u+=Math.abs(a.length-o.length)}else{u+=5}}s++;continue}else{if(a.match==o.match){u+=Math.abs(a.length-o.length)+10;s++;continue}}}i.push(a);u+=50-p}if(s<n.length){l=false}if(l&&(u<m.distance||u===m.distance&&c>m.firstDiffPos)){m.distance=u;m.firstDiffPos=c;m.missingTokens=i;m.pattern=r[h];m.patternTokens=n}}if(m.pattern){return m}},_expandFields:function(e,t,r){var n=typeof e==="string";var i;if(n){i=[e]}else{i=e}var a=i.map(function(e){var n={},i={},a="",o=false,s=0,u,l,c,f,g,m,h,p;r.forEach(function(e){n[e.group]=e});t.forEach(function(e){i[e.group]=e});while(s<e.length){p=e.charAt(s);if(o){a+=p;if(p=="'"){o=false}}else{h=d[p];if(h&&n[h.group]&&i[h.group]){g=n[h.group];m=i[h.group];u=g.length;c=m.length;l=1;while(e.charAt(s+1)==p){s++;l++}if(u===c||(u<h.numericCeiling?l>=h.numericCeiling:l<h.numericCeiling)){f=l}else{f=Math.max(l,u)}for(var y=0;y<f;y++){a+=p}}else{a+=p;if(p=="'"){o=true}}}s++}return a});return n?a[0]:a},_appendItems:function(e,t,r){var n=this._get(_(r),"dateTimeFormats","appendItems");e.forEach(function(r,i){var a,o,s;t.forEach(function(t){o=n[t.group];a="'"+this.getDisplayName(t.field)+"'";s="";for(var u=0;u<t.length;u++){s+=t.symbol}e[i]=o.replace(/\{0\}/,r).replace(/\{1\}/,s).replace(/\{2\}/,a)}.bind(this))}.bind(this));return e},_getMixedFormatPattern:function(e,t,r,n){var i=/^([GyYqQMLwWEecdD]+)([hHkKjJmszZvVOXx]+)$/,a=/MMMM|LLLL/,o=/MMM|LLL/,s=/E|e|c/,u,l,c,f,g,m,h,d;u=i.exec(e);l=u[1];c=u[2];g=this._getFormatPattern(l,t,r);if(n){m=this.getCustomIntervalPattern(c,n,r)}else{m=this._getFormatPattern(c,t,r)}if(a.test(l)){f=s.test(l)?"full":"long"}else if(o.test(l)){f="medium"}else{f="short"}h=this.getDateTimePattern(f,r);d=h.replace(/\{1\}/,g).replace(/\{0\}/,m);return d},getNumberSymbol:function(e){r(e=="decimal"||e=="group"||e=="plusSign"||e=="minusSign"||e=="percentSign","sType must be decimal, group, plusSign, minusSign or percentSign");return this._get("symbols-latn-"+e)},getLenientNumberSymbols:function(e){r(e=="plusSign"||e=="minusSign","sType must be plusSign or minusSign");return this._get("lenient-scope-number")[e]},getDecimalPattern:function(){return this._get("decimalFormat").standard},getCurrencyPattern:function(e){return this._get("currencyFormat")[e]||this._get("currencyFormat").standard},getCurrencySpacing:function(e){return this._get("currencyFormat","currencySpacing",e==="after"?"afterCurrency":"beforeCurrency")},getPercentPattern:getMiscPattern:function(e){r(e=="approximately"||e=="atLeast"||e=="atMost"||e=="range","sName must be approximately, atLeast, atMost or range");return this._get("miscPattern")[e]},getMinimalDaysInFirstWeek:function(){return this._get("weekData-minDays")},getFirstDayOfWeek:function(){return this._get("weekData-firstDay")},getWeekendStart:function(){return this._get("weekData-weekendStart")},getWeekendEnd:getCustomCurrencyCodes:function(){var e=this._get("currency")||{},t={};Object.keys(e).forEach(function(e){t[e]=e});return t},getCurrencyDigits:function(e){var t=this._get("currency");if(t){if(t[e]&&t[e].hasOwnProperty("digits")){return t[e].digits}else if(t["DEFAULT"]&&t["DEFAULT"].hasOwnProperty("digits")){return t["DEFAULT"].digits}}var r=this._get("currencyDigits",e);if(r==null){r=this._get("currencyDigits","DEFAULT");if(r==null){r=2}}return r},getCurrencySymbol:function(e){var t=this.getCurrencySymbols();return t&&t[e]||e},getCurrencyCodeBySymbol:function(e){var t=this._get("currencySymbols"),r;for(r in t){if(t[r]===e){return r}}return e},getCurrencySymbols:function(){var e=this._get("currency"),t={},r;for(var n in e){r=e[n].isoCode;if(e[n].symbol){t[n]=e[n].symbol}else if(r){t[n]=this._get("currencySymbols")[r]}}return Object.assign({},this._get("currencySymbols"),t)},getUnitDisplayName:function(e){var t=this.getUnitFormat(e);return t&&t["displayName"]||""},getRelativePatterns:function(e,t){if(t===undefined){t="wide"}r(t==="wide"||t==="short"||t==="narrow","sStyle is only allowed to be set with 'wide', 'short' or 'narrow'");var n=[],i=this.getPluralCategories(),a,o,s,u;if(!e){e=["year","month","week","day","hour","minute","second"]}e.forEach(function(e){a=this._get("dateFields",e+"-"+t);for(var r in a){if(r.indexOf("relative-type-")===0){s=parseInt(r.substr(14));n.push({scale:e,value:s,pattern:a[r]})}else if(r.indexOf("relativeTime-type-")==0){o=a[r];u=r.substr(18)==="past"?-1:1;i.forEach(function(t){var r=o["relativeTimePattern-count-"+t];if(r){n.push({scale:e,sign:u,pattern:r})}})}}}.bind(this));return n},getRelativePattern:function(e,t,n,i){var a,o,s,u;if(typeof n==="string"){i=n;n=undefined}if(n===undefined){n=t>0}if(i===undefined){i="wide"}r(i==="wide"||i==="short"||i==="narrow","sStyle is only allowed to be set with 'wide', 'short' or 'narrow'");s=e+"-"+i;if(t===0||t===-2||t===2){a=this._get("dateFields",s,"relative-type-"+t)}if(!a){o=this._get("dateFields",s,"relativeTime-type-"+(n?"future":"past"));u=this.getPluralCategory(Math.abs(t).toString());a=o["relativeTimePattern-count-"+u]}return a},getRelativeSecond:function(e,t){return this.getRelativePattern("second",e,t)},getRelativeMinute:function(e,t){if(e==0){return null}return this.getRelativePattern("minute",e,t)},getRelativeHour:function(e,t){if(e==0){return null}return this.getRelativePattern("hour",e,t)},getRelativeDay:function(e,t){return this.getRelativePattern("day",e,t)},getRelativeWeek:function(e,t){return this.getRelativePattern("week",e,t)},getRelativeMonth:function(e,t){return this.getRelativePattern("month",e,t)},getDisplayName:function(e,t){r(e=="second"||e=="minute"||e=="hour"||e=="zone"||e=="day"||e=="weekday"||e=="week"||e=="month"||e=="quarter"||e=="year"||e=="era","sType must be second, minute, hour, zone, day, weekday, week, month, quarter, year, era");if(t===undefined){t="wide"}r(t==="wide"||t==="short"||t==="narrow","sStyle is only allowed to be set with 'wide', 'short' or 'narrow'");var n=["era","weekday","zone"],i=n.indexOf(e)===-1?e+"-"+t:e;return this._get("dateFields",i,"displayName")},getRelativeYear:function(e,t){return this.getRelativePattern("year",e,t)},getDecimalFormat:function(e,t,r){var n;var i;switch(e){case"long":i=this._get("decimalFormat-long");break;default:i=this._get("decimalFormat-short");break}if(i){var a=t+"-"+r;n=i[a];if(!n){a=t+"-other";n=i[a]}}return n},getCurrencyFormat:function(e,t,r){var n;var i=this._get("currencyFormat-"+e);if(!i){if(e==="sap-short"){throw new Error('Failed to get CLDR data for property "currencyFormat-sap-short"')}i=this._get("currencyFormat-short")}if(i){var a=t+"-"+r;n=i[a];if(!n){a=t+"-other";n=i[a]}}return n},getListFormat:function(e,t){var r=this._get("listPattern-"+(e||"standard")+"-"+(t||"wide"));if(r){return r}return{}},getResolvedUnitFormat:function(e){e=this.getUnitFromMapping(e)||e;return this.getUnitFormat(e)},getUnitFormat:function(e){var t=this._get("units","short",e);if(!t&&c[e]){t=this._get("units","short",c[e])}return t},getUnitFormats:function(){return this._getMerged("units","short")},getUnitFromMapping:getEras:function(e,t){r(e=="wide"||e=="abbreviated"||e=="narrow","sWidth must be wide, abbreviate or narrow");var n=this._get(_(t),"era-"+e),i=[];for(var a in n){i[parseInt(a)]=n[a]}return i},getEraDates:function(e){var t=this._get("eras-"+e.toLowerCase()),r=[];for(var n in t){r[parseInt(n)]=t[n]}return r},getCalendarWeek:function(e,t){r(e=="wide"||e=="narrow","sStyle must be wide or narrow");var n=sap.ui.getCore().getLibraryResourceBundle("sap.ui.core",this.oLocale.toString()),i="date.week.calendarweek."+e;return n.getText(i,t)},firstDayStartsFirstWeek:function(){return this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="US"},getPreferredCalendarType:function(){var t,r,n,i=this._get("calendarPreference")||[];for(n=0;n<i.length;n++){t=i[n].split("-")[0];for(r in e){if(t===r.toLowerCase()){return r}}}return e.Gregorian},getPreferredHourSymbol:getPluralCategories:function(){var e=this._get("plurals"),t=Object.keys(e);t.push("other");return t},getPluralCategory:function(e){var t=typeof e==="number"?e.toString():e,r=this._get("plurals");if(!this._pluralTest){this._pluralTest={}}for(var n in r){var i=this._pluralTest[n];if(!i){i=this._parsePluralRule(r[n]);this._pluralTest[n]=i}if(i(t).bMatch){return n}}return"other"},_parsePluralRule:function(e){var t="or",r="and",n="%",i="=",a="!=",o="n",s="i",c="f",f="t",h="v",d="w",p="c",y="e",v="..",b=",";var _=0,w;w=e.split(" ");function D(e){if(w[_]===e){_++;return true}return false}function C(){var e=w[_];_++;return e}function k(){var e,r;e=F();if(D(t)){r=k();return return e}function F(){var e,t;e=P();if(D(r)){t=F();return return e}function P(){var e,t,r;e=T();if(D(i)){r=true}else if(D(a)){r=false}else{throw new Error("Expected '=' or '!='")}t=x();if(r){return function(r){return t(r).indexOf(e(r))>=0}}else{return function(r){return t(r).indexOf(e(r))===-1}}}function T(){var e;e=S();if(D(n)){var t=parseInt(C());return function(r){return e(r)%t}}return e}function S(){if(D(o)){return function(e){return e.n}}else if(D(s)){return function(e){return e.i}}else if(D(c)){return function(e){return e.f}}else if(D(f)){return function(e){return e.t}}else if(D(h)){return function(e){return e.v}}else if(D(d)){return function(e){return e.w}}else if(D(p)){return function(e){return e.c}}else if(D(y)){return function(e){return e.c}}else{throw new Error("Unknown operand: "+C())}}function x(){var e=[],t=C(),r=t.split(b),n,i,a;r.forEach(function(t){n=t.split(v);if(n.length===1){e.push(parseInt(t))}else{i=parseInt(n[0]);a=parseInt(n[1]);for(var r=i;r<=a;r++){e.push(r)}}});return function(t){return e}}var L=k();if(_!=w.length){throw new Error("Not completely parsed")}return function(e){var t,r,n,i,a,o,s;e=e.replace(u,"e");n=e.search(l);r=n<0?0:parseInt(e.slice(n+1));e=m.convertToDecimal(e);t=e.indexOf(".");if(t===-1){o=e;i="";a=""}else{o=e.slice(0,t);i=e.slice(t+1);a=i.replace(g,"")}s={n:parseFloat(e),i:parseInt(o),v:i.length,w:a.length,f:i===""?0:parseInt(i),t:a===""?0:parseInt(a),c:r};return{bMatch:L(s),oOperands:s}}}});m.convertToDecimal=function(e){var t,r,n,i,a,o,s=String(e);if(!s.includes("e")&&!s.includes("E")){return s}o=s.match(f);i=o[1]==="-";s=o[2].replace(".","");t=o[3]?o[3].length:0;n=o[4]?o[4].length:0;r=parseInt(o[5]);a=t+r;if(r>0){s=r<n?s.slice(0,a)+"."+s.slice(a):s=s.padEnd(a,"0")}else{s=-r<t?s=s.slice(0,a)+"."+s.slice(a):s="0."+s.padStart(n-r,"0")}if(i){s="-"+s}return s};var h={Era:{field:"era",index:0},Year:{field:"year",index:1},Quarter:{field:"quarter",index:2},Month:{field:"month",index:3},Week:{field:"week",index:4},"Day-Of-Week":{field:"weekday",index:5},Day:{field:"day",index:6},DayPeriod:{field:"hour",index:7,diffOnly:true},Hour:{field:"hour",index:8},Minute:{field:"minute",index:9},Second:{field:"second",index:10},Timezone:{field:"zone",index:11}};var d={G:{group:"Era",match:"Era",numericCeiling:1},y:{group:"Year",match:"Year",numericCeiling:100},Y:{group:"Year",match:"Year",numericCeiling:100},Q:{group:"Quarter",match:"Quarter",numericCeiling:3},q:{group:"Quarter",match:"Quarter",numericCeiling:3},M:{group:"Month",match:"Month",numericCeiling:3},L:{group:"Month",match:"Month",numericCeiling:3},w:{group:"Week",match:"Week",numericCeiling:100},W:{group:"Week",match:"Week",numericCeiling:100},d:{group:"Day",match:"Day",numericCeiling:100},D:{group:"Day",match:"Day",numericCeiling:100},E:{group:"Day-Of-Week",match:"Day-Of-Week",numericCeiling:1},e:{group:"Day-Of-Week",match:"Day-Of-Week",numericCeiling:3},c:{group:"Day-Of-Week",match:"Day-Of-Week",numericCeiling:2},h:{group:"Hour",match:"Hour12",numericCeiling:100},H:{group:"Hour",match:"Hour24",numericCeiling:100},k:{group:"Hour",match:"Hour24",numericCeiling:100},K:{group:"Hour",match:"Hour12",numericCeiling:100},m:{group:"Minute",match:"Minute",numericCeiling:100},s:{group:"Second",match:"Second",numericCeiling:100},z:{group:"Timezone",match:"Timezone",numericCeiling:1},Z:{group:"Timezone",match:"Timezone",numericCeiling:1},O:{group:"Timezone",match:"Timezone",numericCeiling:1},v:{group:"Timezone",match:"Timezone",numericCeiling:1},V:{group:"Timezone",match:"Timezone",numericCeiling:1},X:{group:"Timezone",match:"Timezone",numericCeiling:1},x:{group:"Timezone",match:"Timezone",numericCeiling:1},S:{group:"Other",numericCeiling:100},u:{group:"Other",numericCeiling:100},U:{group:"Other",numericCeiling:1},r:{group:"Other",numericCeiling:100},F:{group:"Other",numericCeiling:100},g:{group:"Other",numericCeiling:100},a:{group:"DayPeriod",numericCeiling:1},b:{group:"Other",numericCeiling:1},B:{group:"Other",numericCeiling:1},A:{group:"Other",numericCeiling:100}};var p={iw:"he",ji:"yi"};var y=function(){var e=t._cldrLocales,r={},n;if(e){for(n=0;n<e.length;n++){r[e[n]]=true}}return r}();var v={};function b(e,t,r,n){n=n?n.slice():[];r=r||{};t=t||"";Object.keys(e).forEach(function(i){var a=e[i];if(typeof a==="object"){var o=n.slice();var s=a["_parent"];if(s){o.push(s)}b(a,t+i+"/",r,o)}else if(typeof a==="string"&&i!=="_parent"){var u=n.length?n.join(", ")+", ":"";r[t+i]=u+a}});return r}function _(e){if(!e){e=o.getCalendarType()}return"ca-"+e.toLowerCase()}function w(e){var t=e.getLanguage()||"",r=e.getScript()||"",n=e.getRegion()||"",a;function o(e,t){var r,n,i;if(!t){return}for(r in t){if(t.hasOwnProperty(r)){n=e[r];i=t[r];if(n===undefined){e[r]=i}else if(n===null){delete e[r]}else if(typeof n==="object"&&typeof i==="object"&&!Array.isArray(n)){o(n,i)}}}}function s(e){if(!v[e]&&(!y||y[e]===true)){var t=v[e]=i.loadResource("sap/ui/core/cldr/"+e+".json",{dataType:"json",failOnError:false});if(t&&t.__fallbackLocale){o(t,s(t.__fallbackLocale));delete t.__fallbackLocale}}return v[e]}t=t&&p[t]||t;if(t==="no"){t="nb"}if(t==="zh"&&!n){if(r==="Hans"){n="CN"}else if(r==="Hant"){n="TW"}}if(t==="sh"||t==="sr"&&r==="Latn"){t="sr_Latn"}var u=t+"_"+n;var l=u;if(t&&n){a=s(u)}if(!a&&t){a=s(t);l=t}if(!a){a=s("en");l="en"}v[u]=a;l=l.replace(/_/g,"-");return{mData:a,sCLDRLocaleId:l}}var D=m.extend("sap.ui.core.CustomLocaleData",{constructor:function(e){m.apply(this,arguments);this.mCustomData=o.getFormatSettings().getCustomLocaleData()},_get:function(){var e=Array.prototype.slice.call(arguments),t,r;if(e[0].indexOf("ca-")==0){t=e[0];if(t==_()){e=e.slice(1)}}r=e.join("-");var n=this.mCustomData[r];if(n==null){n=this._getDeep(this.mCustomData,arguments);if(n==null){n=this._getDeep(this.mData,arguments)}}return n},_getMerged:function(){var e=this._getDeep(this.mData,arguments);var t=this._getDeep(this.mCustomData,arguments);return n({},e,t)},getFirstDayOfWeek:function(){var e=o.getCalendarWeekNumbering();if(e===s.Default){return m.prototype.getFirstDayOfWeek.call(this)}return s.getWeekConfigurationValues(e).firstDayOfWeek},getMinimalDaysInFirstWeek:function(){var e=o.getCalendarWeekNumbering();if(e===s.Default){return m.prototype.getMinimalDaysInFirstWeek.call(this)}return s.getWeekConfigurationValues(e).minimalDaysInFirstWeek}});m.getInstance=function(e){return e.hasPrivateUseSubtag("sapufmt")?new D(e):new m(e)};return m});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/format/NumberFormat",["sap/ui/base/Object","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/base/Log","sap/base/assert","sap/base/util/extend","sap/ui/core/Configuration"],function(e,r,t,i,n,a,o){"use strict";var s=e.extend("sap.ui.core.format.NumberFormat",{constructor:);var u=/\s/g,c=/\d/,l=/^(-?)0+(\d)/,g=/[^\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6\u0020\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,f=/0+(\.0+)?/,m=/^0+$/;var p=function(e,r,t){var i=R(e);return new RegExp("^\\d+"+"(?:"+i+"?"+"\\d{"+r+"}"+")*"+""+i+"?"+"\\d{"+t+"}"+"$")};var d={INTEGER:"integer",FLOAT:"float",CURRENCY:"currency",UNIT:"unit",PERCENT:"percent"};var h={FLOOR:"FLOOR",CEILING:"CEILING",TOWARDS_ZERO:"TOWARDS_ZERO",AWAY_FROM_ZERO:"AWAY_FROM_ZERO",HALF_FLOOR:"HALF_FLOOR",HALF_CEILING:"HALF_CEILING",HALF_TOWARDS_ZERO:"HALF_TOWARDS_ZERO",HALF_AWAY_FROM_ZERO:"HALF_AWAY_FROM_ZERO"};var C={};C[h.FLOOR]=Math.floor;C[h.CEILING]=Math.ceil;C[h.TOWARDS_ZERO]=function(e){return e>0?Math.floor(e):Math.ceil(e)};C[h.AWAY_FROM_ZERO]=C[h.HALF_TOWARDS_ZERO]=function(e){return e>0?Math.ceil(e-.5):Math.floor(e+.5)};C[h.HALF_AWAY_FROM_ZERO]=function(e){return e>0?Math.floor(e+.5):Math.ceil(e-.5)};C[h.HALF_FLOOR]=C[h.HALF_CEILING]=Math.round;s.RoundingMode=h;s.oDefaultIntegerFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:0,strictGroupingValidation:false,groupingEnabled:false,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:true,type:d.INTEGER,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:s.RoundingMode.TOWARDS_ZERO,emptyString:NaN,showScale:true};s.oDefaultFloatFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:d.FLOAT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:s.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};s.oDefaultPercentFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",percentSign:"%",isInteger:false,type:d.PERCENT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:s.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};s.oDefaultCurrencyFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:d.CURRENCY,showMeasure:true,currencyCode:true,currencyContext:"standard",style:"standard",showNumber:true,customCurrencies:undefined,parseAsString:false,preserveDecimals:false,roundingMode:s.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true,ignorePrecision:true};s.oDefaultUnitFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:d.UNIT,showMeasure:true,style:"standard",showNumber:true,customUnits:undefined,allowedUnits:undefined,parseAsString:false,preserveDecimals:false,roundingMode:s.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};s.getInstance=s.getFloatInstance=function(e,r){var t=this.createInstance(e,r),i=this.getLocaleFormatOptions(t.oLocaleData,d.FLOAT);t.oFormatOptions=a({},this.oDefaultFloatFormat,i,t.oOriginalFormatOptions);return t};s.getIntegerInstance=function(e,r){var t=this.createInstance(e,r),i=this.getLocaleFormatOptions(t.oLocaleData,d.INTEGER);t.oFormatOptions=a({},this.oDefaultIntegerFormat,i,t.oOriginalFormatOptions);return t};s.getCurrencyInstance=function(e,r){var t=this.createInstance(e,r);var i=t.oOriginalFormatOptions&&t.oOriginalFormatOptions.currencyContext;var n=D(t.oOriginalFormatOptions);if(n){i=i||this.oDefaultCurrencyFormat.style;i="sap-"+i}var o=this.getLocaleFormatOptions(t.oLocaleData,d.CURRENCY,i);t.oFormatOptions=a({},this.oDefaultCurrencyFormat,o,t.oOriginalFormatOptions);t.oFormatOptions.trailingCurrencyCode=n;t._defineCustomCurrencySymbols();return t};s.getUnitInstance=function(e,r){var t=this.createInstance(e,r),i=this.getLocaleFormatOptions(t.oLocaleData,d.UNIT);t.oFormatOptions=a({},this.oDefaultUnitFormat,i,t.oOriginalFormatOptions);return t};s.getPercentInstance=function(e,r){var t=this.createInstance(e,r),i=this.getLocaleFormatOptions(t.oLocaleData,d.PERCENT);t.oFormatOptions=a({},this.oDefaultPercentFormat,i,t.oOriginalFormatOptions);return t};s.createInstance=function(e,i){var a=Object.create(this.prototype),s;if(e instanceof r){i=e;e=undefined}if(!i){i=o.getFormatSettings().getFormatLocale()}a.oLocale=i;a.oLocaleData=t.getInstance(i);a.oOriginalFormatOptions=e;if(e){if(e.pattern){s=this.parseNumberPattern(e.pattern);Object.keys(s).forEach(}if(e.emptyString!==undefined){n(e.emptyString===""||e.emptyString===0||e.emptyString===null||e.emptyString!==e.emptyString,"The format option 'emptyString' must be either '', 0, null, or NaN")}}return a};s.getDefaultUnitPattern=s.getLocaleFormatOptions=function(e,r,t){var i,n;switch(r){case d.PERCENT:n=e.getPercentPattern();break;case d.CURRENCY:n=e.getCurrencyPattern(t);break;case d.UNIT:n=e.getDecimalPattern();break;default:n=e.getDecimalPattern()}i=this.parseNumberPattern(n);i.plusSign=e.getNumberSymbol("plusSign");i.minusSign=e.getNumberSymbol("minusSign");i.decimalSeparator=e.getNumberSymbol("decimal");i.groupingSeparator=e.getNumberSymbol("group");i.percentSign=e.getNumberSymbol("percentSign");i.pattern=n;switch(r){case d.UNIT:case d.FLOAT:case d.PERCENT:i.minFractionDigits=0;i.maxFractionDigits=99;break;case d.INTEGER:i.minFractionDigits=0;i.maxFractionDigits=0;i.groupingEnabled=false;break;case d.CURRENCY:i.minFractionDigits=undefined;i.maxFractionDigits=undefined;break}return i};s.parseNumberPattern=function(e){var r=0,t=0,i=0,n=false,a=0,o=0,s=e.indexOf(";"),u={Integer:0,Fraction:1},c=u.Integer;if(s!==-1){e=e.substring(0,s)}for(var l=0;l<e.length;l++){var g=e[l];switch(g){case",":if(n){a=o;o=0}n=true;break;case".":c=u.Fraction;break;case"0":if(c===u.Integer){r++;if(n){o++}}else{t++;i++}break;case"#":if(c===u.Integer){if(n){o++}}else{i++}break}}if(!a){a=o;o=0}return{minIntegerDigits:r,minFractionDigits:t,maxFractionDigits:i,groupingEnabled:n,groupingSize:a,groupingBaseSize:o}};s.prototype._defineCustomCurrencySymbols=function(){var e=this.oFormatOptions;var r=this.oLocaleData.getCurrencySymbols();var t=function(e,r){var t=[];var n;for(var a in e){n=e[a];if(t.indexOf(n)===-1){t.push(n)}else if(n!==undefined){r[n]=true;i.error("Symbol '"+n+"' is defined multiple times in custom currencies.",undefined,"NumberFormat")}}};if(e.customCurrencies&&typeof e.customCurrencies==="object"){this.mKnownCurrencySymbols={};this.mKnownCurrencyCodes={};Object.keys(e.customCurrencies).forEach(function(t){if(e.customCurrencies[t].symbol){this.mKnownCurrencySymbols[t]=e.customCurrencies[t].symbol}else{var i=e.customCurrencies[t].isoCode;if(i){this.mKnownCurrencySymbols[t]=r[i]}}this.mKnownCurrencyCodes[t]=t}.bind(this))}else{this.mKnownCurrencySymbols=r;this.mKnownCurrencyCodes=this.oLocaleData.getCustomCurrencyCodes()}this.mDuplicatedSymbols={};t(this.mKnownCurrencySymbols,this.mDuplicatedSymbols)};function y(e,r){if(e.indexOf(".")>=0&&!L(e)&&e.endsWith("0")){var t=e.length-e.lastIndexOf(".")-1;var i=t-r;if(i>0){while(e.endsWith("0")&&i-- >0){e=e.substring(0,e.length-1)}if(e.endsWith(".")){e=e.substring(0,e.length-1)}}}return e}function S(e,r){var t=r.groupingSize,i=r.groupingBaseSize||t,n=e.length,a=Math.max(n-i,0)%t||t,o=e.slice(0,a);while(n-a>=i){o+=r.groupingSeparator;o+=e.slice(a,a+t);a+=t}o+=e.slice(a,n);return o}s.prototype.format=function(e,r){if(Array.isArray(e)){r=e[1];e=e[0]}var n="",a="",o="",u="",c="",l="",g=e<0,f=-1,m=Object.assign({},this.oFormatOptions),p=this.oOriginalFormatOptions,h=m.type===d.CURRENCY&&r==="INR"&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",C,F,D,L,v,R,I=e===undefined||e===null;if(m.groupingEnabled&&m.groupingSize<=0){i.error("Grouping requires the 'groupingSize' format option to be a positive number, but it is '"+m.groupingSize+"' instead.");return""}if(m.showNumber&&(e===m.emptyString||isNaN(e)&&isNaN(m.emptyString))){return""}if(r!==undefined&&r!==null&&typeof r!=="string"&&!(r instanceof String)){return""}if(!m.showNumber&&!r){return""}if(I&&(!r||!m.showMeasure||m.showNumber)){return""}if(r&&m.customCurrencies&&!m.customCurrencies[r]){i.error("Currency '"+r+"' is unknown.");return""}if(!m.showNumber&&!m.showMeasure){return""}if(r&&m.type===d.UNIT){if(m.customUnits&&typeof m.customUnits==="object"){v=m.customUnits[r]}else{R=this.oLocaleData.getUnitFromMapping(r)||r;v=this.oLocaleData.getUnitFormat(R)}if(m.showMeasure){var A=!m.allowedUnits||m.allowedUnits.indexOf(r)>=0;if(!A){return""}}if(!v&&!m.showNumber){return this._addOriginInfo(r)}m.decimals=v&&(typeof v.decimals==="number"&&v.decimals>=0)?v.decimals:m.decimals;m.precision=v&&(typeof v.precision==="number"&&v.precision>=0)?v.precision:m.precision}if(m.type==d.CURRENCY){if(r&&m.trailingCurrencyCode){if(!this.mKnownCurrencyCodes[r]&&!/(^[A-Z]{3}$)/.test(r)){m.trailingCurrencyCode=false;m.pattern=this.oLocaleData.getCurrencyPattern(m.currencyContext)}}if(!m.showNumber){if(!m.currencyCode){var w;if(m.customCurrencies&&typeof m.customCurrencies==="object"){w=this.mKnownCurrencySymbols[r]}else{w=this.oLocaleData.getCurrencySymbol(r)}if(w&&w!==r){r=w}}return r}if(m.customCurrencies&&m.customCurrencies[r]){m.decimals=m.customCurrencies[r].decimals!==undefined?m.customCurrencies[r].decimals:m.decimals}}if(m.decimals!==undefined){m.minFractionDigits=m.decimals;m.maxFractionDigits=m.decimals}if(m.shortLimit===undefined||Math.abs(e)>=m.shortLimit){D=m.shortRefNumber===undefined?e:m.shortRefNumber;F=b(D,m,this.oLocaleData,h);if(F&&F.formatString!="0"){e=e/F.magnitude;if(m.shortDecimals!==undefined){m.minFractionDigits=m.shortDecimals;m.maxFractionDigits=m.shortDecimals}else{if(p.minFractionDigits===undefined&&p.maxFractionDigits===undefined&&p.decimals===undefined&&p.precision===undefined&&p.pattern===undefined){m.precision=2;m.minFractionDigits=0;m.maxFractionDigits=99}if(p.maxFractionDigits===undefined&&p.decimals===undefined){m.maxFractionDigits=99}}m.roundingMode=s.RoundingMode.HALF_AWAY_FROM_ZERO}}if((F||!m.ignorePrecision)&&m.precision!==undefined){m.maxFractionDigits=Math.min(m.maxFractionDigits,E(e,m.precision));m.minFractionDigits=Math.min(m.minFractionDigits,m.maxFractionDigits)}if(m.type==d.PERCENT){e=s._shiftDecimalPoint(e,2)}if(m.type==d.CURRENCY){var _=this.oLocaleData.getCurrencyDigits(r);if(m.customCurrencies&&m.customCurrencies[r]&&m.customCurrencies[r].decimals!==undefined){_=m.customCurrencies[r].decimals}if(m.maxFractionDigits===undefined){m.maxFractionDigits=_}if(m.minFractionDigits===undefined){m.minFractionDigits=_}}if(typeof e==="number"&&!m.preserveDecimals){e=N(e,m.maxFractionDigits,m.roundingMode)}if(e==0){g=false}if(m.preserveDecimals&&(typeof e==="string"||e instanceof String)){e=y(e,m.maxFractionDigits)}if(!I){c=t.convertToDecimal(e)}if(c=="NaN"){return c}if(g){c=c.substr(1)}f=c.indexOf(".");if(f>-1){n=c.substr(0,f);a=c.substr(f+1)}else{n=c}if(n.length<m.minIntegerDigits){n=n.padStart(m.minIntegerDigits,"0")}else if(n.length>m.maxIntegerDigits){n="".padStart(m.maxIntegerDigits,"?")}if(a.length<m.minFractionDigits){a=a.padEnd(m.minFractionDigits,"0")}else if(a.length>m.maxFractionDigits&&!m.preserveDecimals){a=a.substr(0,m.maxFractionDigits)}if(m.type===d.UNIT&&!m.showNumber){if(v){L=this._getPluralCategory(n,a,F);l=v["unitPattern-count-"+L];if(!l){l=v["unitPattern-count-other"]}if(!l){return this._addOriginInfo(r)}if(L!=="other"&&l.indexOf("{0}")===-1){l=v["unitPattern-count-other"];if(!l){return this._addOriginInfo(r)}}if(l.indexOf("{0}")===-1){i.warning("Cannot separate the number from the unit because unitPattern-count-other '"+l+"' does not include the number placeholder '{0}' for unit '"+r+"'")}else{return this._addOriginInfo(l.replace("{0}","").trim())}}}if(m.groupingEnabled){o=S(n,m)}else{o=n}if(g){u=m.minusSign}u+=o;if(a){u+=m.decimalSeparator+a}if(F&&F.formatString&&m.showScale&&m.type!==d.CURRENCY){L=this._getPluralCategory(n,a);F.formatString=this.oLocaleData.getDecimalFormat(m.style,F.key,L);u=F.formatString.replace(F.valueSubString,u);u=u.replace(/'.'/g,".")}if(m.type===d.CURRENCY){l=m.pattern;if(F&&F.formatString&&m.showScale){var M;if(m.trailingCurrencyCode){M="sap-short"}else{M="short"}L=this._getPluralCategory(n,a);if(h){l=O(M,F.key,L)}else{l=this.oLocaleData.getCurrencyFormat(M,F.key,L)}l=l.replace(/'.'/g,".")}C=l.split(";");if(C.length===2){l=g?C[1]:C[0];if(g){u=u.substring(m.minusSign.length)}}if(!m.currencyCode){var w;if(m.customCurrencies&&typeof m.customCurrencies==="object"){w=this.mKnownCurrencySymbols[r]}else{w=this.oLocaleData.getCurrencySymbol(r)}if(w&&w!==r){r=w}}u=this._composeCurrencyResult(l,u,r,{showMeasure:m.showMeasure,negative:g,minusSign:m.minusSign})}if(m.type===d.PERCENT){l=m.pattern;u=l.replace(/[0#.,]+/,u);u=u.replace(/%/,m.percentSign)}if(m.showMeasure&&r&&m.type===d.UNIT){L=this._getPluralCategory(n,a,F);if(v){l=v["unitPattern-count-"+L];if(!l){l=v["unitPattern-count-other"]}if(!l){l=s.getDefaultUnitPattern(r)}}else{l=s.getDefaultUnitPattern(r)}u=l.replace("{0}",u)}return this._addOriginInfo(u)};s.prototype._getPluralCategory=function(e,r,t){var i=e;if(r){i+="."+r}if(t){i+="c"+t.magnitude.toExponential().slice(2)}return this.oLocaleData.getPluralCategory(i)};s.prototype._addOriginInfo=function(e){if(o.getOriginInfo()){e=new String(e);e.originInfo={source:"Common Locale Data Repository",locale:this.oLocale.toString()}}return e};s.prototype._composeCurrencyResult=function(e,r,t,i){var n=i.minusSign;e=e.replace(/[0#.,]+/,r);if(i.showMeasure&&t){var a="¤",o={"[:digit:]":c,"[[:^S:]&[:^Z:]]":g},s=e.indexOf(a),u=s<e.length/2?"after":"before",l=this.oLocaleData.getCurrencySpacing(u),f=u==="after"?t.charAt(t.length-1):t.charAt(0),m,p=o[l.currencyMatch],d=o[l.surroundingMatch],h;e=e.replace(a,t);m=u==="after"?e.charAt(s+t.length):e.charAt(s-1);if(p&&p.test(f)&&d&&d.test(m)){if(u==="after"){h=s+t.length}else{h=s}e=e.slice(0,h)+l.insertBetween+e.slice(h)}else if(i.negative&&u==="after"){n="\ufeff"+i.minusSign}}else{e=e.replace(/\s*\u00a4\s*/,"")}if(i.negative){e=e.replace(/-/,n)}return e};s.prototype.parse=function(e){var r=this.oFormatOptions,t=r.plusSign+this.oLocaleData.getLenientNumberSymbols("plusSign"),a=r.minusSign+this.oLocaleData.getLenientNumberSymbols("minusSign"),o=R(t+a),c=R(r.groupingSeparator),l=R(r.decimalSeparator),g="^\\s*(["+o+"]?(?:[0-9"+c+"]+|[0-9"+c+"]*"+l+"[0-9]*)(?:[eE][+-][0-9]+)?)\\s*$",f="^\\s*(["+o+"]?[0-9"+c+"]+)\\s*$",m=new RegExp(c,"g"),p=new RegExp(l,"g"),h=this.oLocaleData.getNumberSymbol("percentSign"),C=r.type===d.CURRENCY&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",y,S,b,D,O=0,N,E;if(e===""){if(!r.showNumber){return null}E=r.emptyString;if(r.parseAsString&&(r.emptyString===0||isNaN(r.emptyString))){E=r.emptyString+""}if(r.type===d.CURRENCY||r.type===d.UNIT){return[E,undefined]}else{return E}}if(typeof e!=="string"&&!(e instanceof String)){return null}if(r.groupingSeparator===r.decimalSeparator){i.error("The grouping and decimal separator both have the same value '"+r.groupingSeparator+"'. "+"They must be different from each other such that values can be parsed correctly.")}D=r.type===d.PERCENT?r.pattern:this.oLocaleData.getPercentPattern();if(D.charAt(0)==="%"){g=g.slice(0,1)+"%?"+g.slice(1)}else if(D.charAt(D.length-1)==="%"){g=g.slice(0,g.length-1)+"%?"+g.slice(g.length-1)}var A;if(r.type===d.UNIT&&r.showMeasure){var _;if(r.customUnits&&typeof r.customUnits==="object"){_=r.customUnits}else{_=this.oLocaleData.getUnitFormats()}n(_,"Unit patterns cannot be loaded");if(r.allowedUnits){var M={};for(var x=0;x<r.allowedUnits.length;x++){var U=r.allowedUnits[x];M[U]=_[U]}_=M}var P=I(_,e,r.showNumber,this.oLocaleData.sCLDRLocaleId);var T=false;A=P.cldrCode;if(A.length===1){b=A[0];if(!r.showNumber){return[undefined,b]}}else if(A.length===0){if(r.unitOptional){P.numberValue=e}else{return null}}else{n(A.length===1,"Ambiguous unit ["+A.join(", ")+"] for input: '"+e+"'");b=undefined;T=true}if(r.strictParsing){if(T){return null}}e=P.numberValue||e}var k;if(r.type===d.CURRENCY&&r.showMeasure){k=w({value:e,currencySymbols:this.mKnownCurrencySymbols,customCurrencyCodes:this.mKnownCurrencyCodes,duplicatedSymbols:this.mDuplicatedSymbols,customCurrenciesAvailable:!!r.customCurrencies});if(!k){return null}if(r.strictParsing){if(!k.currencyCode||k.duplicatedSymbolFound){return null}}e=k.numberValue;b=k.currencyCode;if(r.customCurrencies&&b===null){return null}if(!r.showNumber){if(e){return null}return[undefined,b]}}e=e.replace(/[\u202a\u200e\u202c\u202b\u200f]/g,"");e=e.replace(u,"");N=F(e,this.oLocaleData,C);if(N){e=N.number}var W=L(e);if(r.isInteger&&!N&&!W){y=new RegExp(f)}else{y=new RegExp(g)}if(!y.test(e)){return r.type===d.CURRENCY||r.type===d.UNIT?null:NaN}var Y=e.length;for(var z=0;z<Y;z++){var Z=e[z];if(t.includes(Z)){e=e.replace(Z,"+");break}else if(a.includes(Z)){e=e.replace(Z,"-");break}}e=e.replace(/^\+/,"");if(!r.isInteger&&e.indexOf(h)!==-1){S=true;e=e.replace(h,"")}var G=e;e=e.replace(m,"");if(N){e=e.replace(p,".");e=s._shiftDecimalPoint(e,Math.round(Math.log(N.factor)/Math.LN10))}if(r.isInteger){var H;if(W){e=e.replace(p,".");H=v(e);if(H===undefined){return NaN}}else{H=parseInt(e)}O=r.parseAsString?e:H}else{e=e.replace(p,".");O=r.parseAsString?e:parseFloat(e);if(S){O=s._shiftDecimalPoint(O,-2)}}var V=this._checkGrouping(G,r,W);if(!V){return r.type===d.CURRENCY||r.type===d.UNIT?null:NaN}if(r.parseAsString&&!S){O=s._shiftDecimalPoint(e,0)}if(r.type===d.CURRENCY||r.type===d.UNIT){return[O,b]}return O};s.prototype.getScale=function(){if(this.oFormatOptions.style!=="short"&&this.oFormatOptions.style!=="long"||this.oFormatOptions.shortRefNumber===undefined){return}var e=b(this.oFormatOptions.shortRefNumber,this.oFormatOptions,this.oLocaleData),r;if(e&&e.formatString){r=e.formatString.replace(f,"").replace(/'.'/g,".").trim();if(r){return r}}};s._shiftDecimalPoint=function(e,r){if(typeof r!=="number"){return NaN}var t="";var i=e.toString().toLowerCase().split("e");if(typeof e==="number"){r=i[1]?+i[1]+r:r;return+(i[0]+"e"+r)}else if(typeof e==="string"){if(parseFloat(e)===0&&r>=0){return e.replace(l,"$1$2")}var n=i[0].charAt(0);t=n==="-"?n:"";if(t){i[0]=i[0].slice(1)}e=i[0];var a=e.indexOf("."),o,s,u;if(a===-1){e=e+".";a=e.length-1}if(i[1]){a+=+i[1]}o=a+r;if(o<=0){e=e.padStart(e.length-o+1,"0");o=1}else if(o>=e.length-1){e=e.padEnd(o+1,"0");o=e.length-1}e=e.replace(".","");s=e.substring(0,o);u=e.substring(o);s=s.replace(l,"$1$2");return t+s+(u?"."+u:"")}else{return null}};function b(e,r,t,i){var n,a,o,s,u=r.style,c=r.precision!==undefined?r.precision:2;if(u!="short"&&u!="long"){return undefined}for(var l=0;l<15;l++){a=Math.pow(10,l);if(N(Math.abs(e)/a,c-1)<10){break}}o=a.toString();if(r.type===d.CURRENCY){if(r.trailingCurrencyCode){u="sap-short"}if(i){s=O(u,o,"other",true)}else{s=t.getCurrencyFormat(u,o,"other")}}else{s=t.getDecimalFormat(u,o,"other")}if(!s||s=="0"){return undefined}else{n={};n.key=o;n.formatString=s;var g=s.match(f);if(g){n.valueSubString=g[0];var m=n.valueSubString.indexOf(".");if(m==-1){n.decimals=0;n.magnitude=a*Math.pow(10,1-n.valueSubString.length)}else{n.decimals=n.valueSubString.length-m-1;n.magnitude=a*Math.pow(10,1-m)}}else{return undefined}}return n}function F(e,r,t){var i,n=1,a=10,o=r.getPluralCategories(),s,u={number:undefined,factor:n},c=function(t,a,o,c){if(c){s=O(o,a.toString(),t,true)}else{s=r.getDecimalFormat(o,a.toString(),t)}if(s){s=s.replace(/[\s\u00a0\u200F]/g,"");s=s.replace(/'.'/g,".");var l=s.match(f);if(l){var g=l[0];var m=s.replace(g,"");if(!m){return}var p=e.indexOf(m);if(p>=0){i=e.replace(m,"");i=i.replace(/\u200F/g,"");n=a;n*=Math.pow(10,1-g.length);if(u.number===undefined||i.length<u.number.length){u.number=i;u.factor=n}}}}};["long","short"].forEach(function(e){a=10;while(a<1e15){for(var r=0;r<o.length;r++){var t=o[r];c(t,a,e)}a=a*10}});if(t&&!i){a=10;while(a<1e15){for(var l=0;l<o.length;l++){var g=o[l];c(g,a,"short",true)}a=a*10}}if(!i){return}return u}function D(e){var r=o.getFormatSettings().getTrailingCurrencyCode();if(e){if(e.trailingCurrencyCode!==undefined){r=e.trailingCurrencyCode}if(e.pattern){r=false}if(e.currencyCode===false){r=false}}return r}function O(e,r,t,i){var n,a={short:{"1000-one":"¤0000","1000-other":"¤0000","10000-one":"¤00000","10000-other":"¤00000","100000-one":"¤0 Lk","100000-other":"¤0 Lk","1000000-one":"¤00 Lk","1000000-other":"¤00 Lk","10000000-one":"¤0 Cr","10000000-other":"¤0 Cr","100000000-one":"¤00 Cr","100000000-other":"¤00 Cr","1000000000-one":"¤000 Cr","1000000000-other":"¤000 Cr","10000000000-one":"¤0000 Cr","10000000000-other":"¤0000 Cr","100000000000-one":"¤00000 Cr","100000000000-other":"¤00000 Cr","1000000000000-one":"¤0 Lk Cr","1000000000000-other":"¤0 Lk Cr","10000000000000-one":"¤00 Lk Cr","10000000000000-other":"¤00 Lk Cr","100000000000000-one":"¤0 Cr Cr","100000000000000-other":"¤0 Cr Cr"},"sap-short":{"1000-one":"0000 ¤","1000-other":"0000 ¤","10000-one":"00000 ¤","10000-other":"00000 ¤","100000-one":"0 Lk ¤","100000-other":"0 Lk ¤","1000000-one":"00 Lk ¤","1000000-other":"00 Lk ¤","10000000-one":"0 Cr ¤","10000000-other":"0 Cr ¤","100000000-one":"00 Cr ¤","100000000-other":"00 Cr ¤","1000000000-one":"000 Cr ¤","1000000000-other":"000 Cr ¤","10000000000-one":"0000 Cr ¤","10000000000-other":"0000 Cr ¤","100000000000-one":"00000 Cr ¤","100000000000-other":"00000 Cr ¤","1000000000000-one":"0 Lk Cr ¤","1000000000000-other":"0 Lk Cr ¤","10000000000000-one":"00 Lk Cr ¤","10000000000000-other":"00 Lk Cr ¤","100000000000000-one":"0 Cr Cr ¤","100000000000000-other":"0 Cr Cr ¤"}},o={short:{"1000-one":"0000","1000-other":"0000","10000-one":"00000","10000-other":"00000","100000-one":"0 Lk","100000-other":"0 Lk","1000000-one":"00 Lk","1000000-other":"00 Lk","10000000-one":"0 Cr","10000000-other":"0 Cr","100000000-one":"00 Cr","100000000-other":"00 Cr","1000000000-one":"000 Cr","1000000000-other":"000 Cr","10000000000-one":"0000 Cr","10000000000-other":"0000 Cr","100000000000-one":"00000 Cr","100000000000-other":"00000 Cr","1000000000000-one":"0 Lk Cr","1000000000000-other":"0 Lk Cr","10000000000000-one":"00 Lk Cr","10000000000000-other":"00 Lk Cr","100000000000000-one":"0 Cr Cr","100000000000000-other":"0 Cr Cr"}};o["sap-short"]=o["short"];var s=i?o:a;var u=s[e];if(!u){u=s["short"]}if(t!=="one"){t="other"}n=u[r+"-"+t];return n}s.prototype._checkGrouping=function(e,r,t){if(r.groupingSeparator&&e.includes(r.groupingSeparator)){e=e.replace(/^-/,"");e=e.replace(/^0+(\d)/,"$1");if(e.startsWith("0")||e.startsWith(r.groupingSeparator)){return false}if(t){e=e.replace(/[eE].*/,"")}var i=e.includes(r.decimalSeparator);if(r.decimalSeparator===r.groupingSeparator){i=false}else if(i){e=e.split(r.decimalSeparator)[0]}var n=e.split(r.groupingSeparator).length===2;if(n&&!i){var a=e.length-e.lastIndexOf(r.groupingSeparator);var o=r.groupingBaseSize||r.groupingSize;if(a!==o+r.groupingSeparator.length){return false}}if(r.strictGroupingValidation){if(!this._rGrouping){this._rGrouping=p(r.groupingSeparator,r.groupingSize,r.groupingBaseSize||r.groupingSize)}if(!this._rGrouping.test(e)){return false}}}return true};function L(e){return e.indexOf("e")>0||e.indexOf("E")>0}function v(e){var r=s._shiftDecimalPoint(e,0);if(r.indexOf(".")>0&&!m.test(r.split(".")[1])){return undefined}var t=parseFloat(r);var i=""+t;if(L(i)){i=s._shiftDecimalPoint(i,0)}var n=parseInt(i);if(n!==t){return undefined}return n}function N(e,r,t){if(typeof e!=="number"){return NaN}t=t||s.RoundingMode.HALF_AWAY_FROM_ZERO;r=parseInt(r);var i=""+e;if(!L(i)){var n=i.indexOf(".");if(n<0){return e}if(i.substring(n+1).length<=r){return e}}if(typeof t==="function"){e=t(e,r)}else{if(t.match(/^[a-z_]+$/)){t=t.toUpperCase()}if(!r){return C[teturn e}function R(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function E(e,r){var t=Math.floor(Math.log(Math.abs(e))/Math.LN10);return Math.max(0,r-t-1)}function I(e,r,t,i){var n,a,o,s,u,c,l,g,f,m,p,d={numberValue:undefined,cldrCode:[]},h=[],C=true,y=true,S=Number.POSITIVE_INFINITY,b=true,F=r.toLocaleLowerCase(i);for(f in e){for(a in e[f]){if(!a.startsWith("unitPattern")){continue}m=e[f][a];s=m.indexOf("{0}");n=s>-1;if(n&&!t){m=m.replace("{0}","").trim();n=false}o=undefined;C=true;if(n){l=m.substring(0,s);g=l.toLocaleLowerCase(i);u=m.substring(s+"{0}".length);c=u.toLocaleLowerCase(i);if(r.startsWith(l)&&r.endsWith(u)){o=r.substring(l.length,r.length-u.length)}else if(F.startsWith(g)&&F.endsWith(c)){C=false;o=r.substring(g.length,F.length-c.length)}if(o){if(o.length<S){S=o.length;b=C;d.numberValue=o;d.cldrCode=[f]}else if(o.length===S&&d.cldrCode.indexOf(f)===-1){if(C&&!b){d.numberValue=o;d.cldrCode=[f];b=true}else if(C||!b){d.cldrCode.push(f)}}}}else{p=m.toLocaleLowerCase(i);if(m===r||p===F){if(t){if(a.endsWith("-zero")){o="0"}else if(a.endsWith("-one")){o="1"}else if(a.endsWith("-two")){o="2"}if(m===r){d.numberValue=o;d.cldrCode=[f];return d}else if(!d.cldrCode.includes(f)){y=false;d.numberValue=o;d.cldrCode.push(f)}}else if(d.cldrCode.indexOf(f)===-1){if(m===r){d.cldrCode.push(f)}else if(!h.includes(f)){h.push(f)}}}}}}if((!b||!y)&&d.cldrCode.length>1){d.numberValue=undefined}if(!t&&!d.cldrCode.length){d.cldrCode=h}return d}function A(e,r,t){var i,n,a,s,c,l,g,f,m=false,p=false,d="";for(n in r){a=r[n];if(!a){continue}a=a.replace(u," ");if(e.indexOf(a)>=0&&d.length<=a.length){i=n;m=false;p=true;d=a;g=a}else if(t){l=o.getLanguageTag();s=a.toLocaleUpperCase(l);c=e.toLocaleUpperCase(l).indexOf(s);if(c>=0){if(d.length===a.length&&!p){m=true}else if(d.length<a.length){f=e.substring(c,c+a.length);if(f.toLocaleUpperCase(l)===s){i=n;m=false;p=false;d=a;g=f}}}}}if(m||!i){return{}}return{code:i,recognizedCurrency:g,symbol:d}}function w(e){var r,t=e.value.replace(u," ");var n=A(t,e.currencySymbols);if(!n.code){n=A(t,e.customCurrencyCodes,true);if(!n.code&&!e.customCurrenciesAvailable){r=t.match(/(^[A-Z]{3}|[A-Z]{3}$)/i);n.code=r&&r[0].toLocaleUpperCase(o.getLanguageTag());n.recognizedCurrency=r&&r[0]}}if(n.code){var a=n.recognizedCurrency.length-1;var s=n.recognizedCurrency.charAt(a);var c;var l=/[\-\s]+/;if(/\d$/.test(s)){if(t.startsWith(n.recognizedCurrency)){c=a+1;if(!l.test(t.charAt(c))){return undefined}}}else if(/^\d/.test(n.recognizedCurrency)){if(t.endsWith(n.recognizedCurrency)){c=t.indexOf(n.recognizedCurrency)-1;if(!l.test(t.charAt(c))){return undefined}}}t=t.replace(n.recognizedCurrency,"")}var g=false;if(e.duplicatedSymbols&&e.duplicatedSymbols[n.symbol]){n.code=undefined;g=true;i.error("The parsed currency symbol '"+n.symbol+"' is defined multiple "+"times in custom currencies.Therefore the result is not distinct.")}return{numberValue:t,currencyCode:n.code||undefined,duplicatedSymbolFound:g}}return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/core/routing/Router",["sap/ui/core/library","sap/ui/base/EventProvider","./HashChanger","./Route","./Views","./Targets","./History","sap/ui/thirdparty/crossroads","sap/base/util/UriParameters","sap/base/util/each","sap/base/util/deepEqual","sap/base/util/isEmptyObject","sap/base/Log","sap/ui/thirdparty/jquery","./RouterHashChanger","sap/ui/core/Component"],function(t,e,i,s,n,a,r,h,o,u,d,f,c,g,_,l){"use strict";var p={};var C=e.extend("sap.ui.core.routing.Router",{constructor:function(t,s,a,r,d){e.apply(this);this._oConfig=s||{};this._oRouter=h.create();this._oRouter.ignoreState=true;this._oRoutes={};this._oOwner=a;function f(){if(o.fromQuery(window.location.search).get("sap-ui-xx-asyncRouting")==="true"){c.warning("Activation of async view loading in routing via url parameter is only temporarily supported and may be removed soon","Router");return true}return false}this._oConfig._async=this._oConfig.async;if(this._oConfig._async===undefined){this._oConfig._async=f()}this._oViews=new n({component:a,async:this._oConfig._async});if(r){this._oTargets=this._createTargets(this._oConfig,r);this._oTargets._setRouter(this);this._oTargets.attachDisplay(function(t){var e=t.getParameter("routeRelevant");if(this.isInitialized()&&!this._bMatchingProcessStarted){var i=this.getHashChanger();if(i instanceof _&&!e){i.resetHash(this)}}},this)}var g=this,l;if(!t){t={}}if(Array.isArray(t)){l=t;t={};l.forEach(function(e){t[e.name]=e})}u(t,function(t,e){if(e.name===undefined){e.name=t}g.addRoute(e)});this._oRouter.bypassed.add(this._onBypassed.bind(this));if(!d){d=i.getInstance().createRouterHashChanger()}this.setHashChanger(d);var p=this._getParentRouter();if(p){this.attachTitleChanged(function(t){if(this._oOwner&&!this._oOwner._bRoutingPropagateTitle){return}var e=t.getParameters(),i,s;if(p._fnTitleChangedFiredOnChild){p._fnTitleChangedFiredOnChild(e)}else{i=e.nestedHistory.slice();i.unshift({ownerComponentId:p._oOwner.getId(),history:p.getTitleHistory()});s={propagated:true,title:e.title,history:e.history,nestedHistory:i};p.fireTitleChanged(s)}})}},addRoute:function(t,e){if(!t.name){c.error("A name has to be specified for every route",this)}if(this._oRoutes[t.name]){c.error("Route with name "+t.name+" already exists",this)}this._oRoutes[t.name]=this._createRoute(this,t,e)},parse:function(t){if(this._oRouter){this._oRouter.parse(t)}else{c.warning("This router has been destroyed while the hash changed. No routing events where fired by the destroyed instance.",this)}},initialize:function(t){var e=this,i;if(this._bIsInitialized){c.warning("Router is already initialized.",this);return this}this._bIsInitialized=true;this._bLastHashReplaced=false;this._bHashChangedAfterTitleChange=false;this.fnHashChanged=function(t){e.parse(t.getParameter("newHash"));e._bHashChangedAfterTitleChange=true};if(!this.oHashChanger){c.error("navTo of the router is called before the router is initialized. If you want to replace the current hash before you initialize the router you may use getUrl and use replaceHash of the Hashchanger.",this);return this}if(this._oTargets){var s=this._oRoutes[this._oConfig.homeRoute];this._oTargets.attachTitleChanged(this._forwardTitleChanged,this);this._aHistory=[];var n=s&&y(this._oOwner,s);if(n){this._aHistory.push(n)}}if(this.oHashChanger instanceof _){this.oHashChanger._setActiveRouter(this)}this.oHashChanger.init();i=this.oHashChanger.getHash();this.oHashChanger.attachEvent("hashChanged",this.fnHashChanged);if(t){if(this._oMatchedRoute){this._oMatchedRoute._resume()}}else if(i!==_.InvalidHash){this.parse(i)}return this},_forwardTitleChanged:function(t){var e=t.getParameters();var i={title:e.title};var s=this._oRoutes[this._oConfig.homeRoute];if(s&&R(e.name,s._oConfig.name)){i.isHome=true}this.fireTitleChanged(i)},stop:function(){if(!this._bIsInitialized){c.warning("Router is not initialized. But it got stopped",this)}if(this.fnHashChanged){this.oHashChanger.detachEvent("hashChanged",this.fnHashChanged)}if(this.fnHashReplaced){this.oHashChanger.detachEvent("hashReplaced",this.fnHashReplaced)}if(this._oTargets){this._oTargets.detachTitleChanged(this._forwardTitleChanged,this);this._oTargets._oLastTitleTarget={}}if(this._oMatchedRoute){this._oMatchedRoute._routeSwitched()}this._bIsInitialized=false;delete this._oPreviousTitleChangedRoute;return this}ed===false},isInitialized:function(){return this._bIsInitialized===true},getHashChanger:function(){return this.oHashChanger},setHashChanger:function(t){if(this.oHashChanger){c.warning("The Router already has a HashChanger set and this call is ignored")}else{this.oHashChanger=t}return this},destroy:function(){if(this.bIsDestroyed){return this}e.prototype.destroy.apply(this);if(this._oViews){this._oViews.destroy();this._oViews=null}if(!this._bIsInitialized){c.info("Router is not initialized, but got destroyed.",this)}if(this.fnHashChanged){this.oHashChanger.detachEvent("hashChanged",this.fnHashChanged)}if(this.fnHashReplaced){this.oHashChanger.detachEvent("hashReplaced",this.fnHashReplllRoutes();this._oRouter=null;u(this._oRoutes,function(t,e){e.destroy()});this._oRoutes=null;this._oConfig=null;if(this._oTargets){this._oTargets.destroy();this._oTargets=null}delete this._bIsInitialized;this.bIsDestroyed=true;return this},getURL:function(t,e){var i=this.getRoute(t);if(i){return i.getURL(e)}else{c.warning("Route with name "+t+" does nott.keys(this._oRoutes).some(function(e){return this._oRoutes[e].match(t)}.bind(this))},getRouteByHash:function(t){for(var e in this._oRoutes){if(this._oRoutes.hasOwnProperty(e)){var i=this.getRoute(e);if(i.match(t)){return i}}}},getRouteInfoByHash:function(t){var e=this.getRouteByHash(t);if(!e){return undefined}re.getPatternArguments(t)}},getRoute:function(t){return this._oRoutes[t]},getViews:function(){return this._oViews},_createTargets:function(,config:t,targets:e})},_createRoute:function(t,e,i){return new s(t,e,i)},getView:function(t,e,i){c.warning("Deprecated API Router#getView called - use Router#getViews instead.",this);var s=this._oViews._getViewWithGlobalId({viewName:t,type:e,id:i},);return s},setView:function(t,e){this._oViews.setView(t,e);return this},_getParentRouter:function(){var t=this._oOwner&&l.getOwnerComponentFor(this._oOwner);return t&&t.getRouter()},navTo:function(t,e,i,s){var n=this,a=this._getLastMatchedRouteName()!==t,r=this.getRoute(t),h,o;if(this.isStopped()){c.info("The router instance "+this._sId+" is stopped. No navigation can be performed.");return this}if(!r){c.warning("Route with name "+t+" does not exist",this);return this}if(typeof i==="boolean"){s=i}if(e===undefined){e={}}if(i&&!f(i)){if(!this._oConfig._async){c.error("navTo with component target info is only supported with async router",this);return this}h=r._changeHashWithComponentTargets(i,a)}o=r.getURL(e);if(s){n._bLastHashReplaced=true;n.oHashChanger.replaceHash(o,h,!a)}eunction(){return this._oMatchedRoute&&this._oMatchedRoute._oConfig.name},getTargets:function(){return this._oTargets},getTarget:function(t){return this._oTargets.getTarget(t)},attachRouteMatched:function(t,e,i){this.attachEvent("routeMatched",t,e,i);return this},detachRouteMatched:function(t,e){this.detachEvent("routeMatched",t,e);return this},fireRouteMatched:function(t){this.fireEvent("routeMatched",t);if(C._interceptRouteMatched){C._interceptRouteMatched(this._oConfig.controlId,this)}return this},attachBeforeRouteMatched:function(t,e,i){this.attachEvent("beforeRouteMatched",t,e,i);return this},detachBeforeRouteMatched:function(t,e){this.detachEvent("beforeRouteMatched",t,e);return this},fireBeforeRouteMatched:function(t){this.fireEvent("beforeRouteMatched",t);return this},attachViewCreated:function(t,e,i){this.attachEvent("viewCreated",t,e,i);return this},detachViewCreated:function(t,e){this.detachEvent("viewCreated",t,e);return this},fireViewCreated:function(t){this.fireEvent("viewCreated",t);return this},attachRoutePatternMatched:function(t,e,i){this.attachEvent("routePatternMatched",t,e,i);return this},detachRoutePatternMatched:function(t,e){this.detMatched:functiossed:function(t,e,i){return this.attachEvent(C.M_EVENTS.BYPASSED,t,e,i)},detachBypassed:func},fireBypassed:function(t){return this.fireEvent(C.M_EVENTS.BYPASSED,t)},attachTitleChanged:function(t,e,i){this.attged:function(t,e){return this.detachEvent(C.M_EVENTS.TITLE_CHANGED,t,e)},fireTitleChanged:function(e){if(this.isStopped()){return this}var i=!this._pWaitForTitleChangedOnChild;if(!e.propagated){e.propagated=false;var s=r.getInstance().getDirection(),n=this.getHashChanger().getHash(),a=t.routing.HistoryDirection,h=this._aHistory[this._aHistory.length-1],o;if(s===a.Backwards&&h&&!h.isHome){if(h&&h.title!==e.title){this._aHistory.pop()}}else if(h&&h.hash==n){h.title=e.title;this._aHistory.some(function(t,e,i){if(e<i.length-1&&d(t,h)){return i.splice(e,1)}})}else{if(this._bLastHashReplaced){this._aHistory.pop()}o={hash:n,title:e.title};this._aHistory.some(function(t,e,i){if(d(t,o)){return i.splice(e,1)}});this._aHistory.push(o)}e.history=this._aHistory.slice(0,-1);e.nestedHistory=[{history:this.getTitleHistory(),ownerComponentId:this._oOwner&&this._oOwner.getId()}];this._bLastHashReplaced=false;this._oPreviousTitleChangedRoute=this._oMatchedRoute;this._bFireTitleChanged=false;if(this._pWaitForTitleChangedOnChild){this._pWaitForTitleChangedOnChild.then(function(t){e.title=t.title;e.propagated=true;Array.prototype.push.apply(e.nestedHistory,t.nestedHistory);this._stopWaitingTitleChangedFromChild();this.fireEvent(C.M_EVENTS.TITLE_CHANGED,e)}.bind(this))}}if(i){if(this._bMatcce("routeMatched",function(){this.fireEvent(C.M_EVENTS.TITLE_CHANGED,e)},this)}else{D,e)}}return this},getTitleHistory:function(){return this._aHistory||[]},_waitForTitleChangedOn:function(t){if(this._bFireTitleChanged){this._pWaitForTitleChangedOnChild=new Promise(function(t){this._fnTitis._pWaitForTitleChangedOnChild;delete this._fnTitleChangedFiredOnChild},rs},_onBypassed:function(t){var e=function(){this.fireBypassed({hash:t})}.bind(this);if(this._oConfig.bypassed){var i=this._oTargets.display(this._oConfig.bypassed.t{i.then(e);return}}e()},_isAsync:function(){return this._oConfig._async},metadata:{publicMethods:["initialize","getURL","register","getRoute"]}});function R(t,e){return e&&e.indexOf(t)>-1}function y(t,e){var i=e.getPattern(),s=t&&t.getManifestEntry("sap.app/title");if(i===""||i!==undefined&&!/({.*})+/.test(i)){return{hash:i,isHome:true,title:s}}else{c.error("Routes with dynamic parts cannot be resolved as home route.")}}C.M_EVENTS={BEFORE_ROUTE_MATCHED:"beforeRouteMatched",ROUTE_MATCHED:"routeMatched",ROUTE_PATTERN_MATCHED:"routePatternMatched",VIEW_CREATED:"viewCreated",BYPASSED:"bypassed",TITLE_CHANGED:"titleChanged"};C._interceptRouteMatched=undefined;C.getRouter=function(t){return p[t]};return C});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/Grid",["sap/ui/core/Control","./library","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ui/base/ManagedObjectObserver","./GridRenderer","sap/ui/thirdparty/jquery"],function(e,t,i,s,a,n,o){"use strict";var r=e.extend("sap.ui.layout.Grid",{metadata:{library:"sap.ui.layout",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},vSpacing:{type:"float",group:"Dimension",defaultValue:1},hSpacing:{type:"float",group:"Dimension",defaultValue:1},position:{type:"sap.ui.layout.GridPosition",group:"Dimension",defaultValue:"Left"},defaultSpan:{type:"sap.ui.layout.GridSpan",group:"Behavior",defaultValue:"XL3 L3 M6 S12"},defaultIndent:{type:"sap.ui.layout.GridIndent",group:"Behavior",defaultValue:"XL0 L0 M0 S0"},containerQuery:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/Grid.designtime"},renderer:n});(function(){r.prototype.init=function(){var e=t.GridHelper.getLibrarySpecificClass();if(e){this.addStyleClass(e)}this._iBreakPointTablet=i.media._predefinedRangeSets[i.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0];this._iBreakPointDesktop=i.media._predefinedRangeSets[i.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1];this._iBreakPointLargeDesktop=i.media._predefinedRangeSets[i.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2];this._indentXLChanged=false;this._spanXLChanged=false;this._oObserver=new a(r.prototype._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["content"]})};r.prototype.onAfterRendering=function(){if(this.getContainerQuery()){this._sContainerResizeListener=s.register(this,o.proxy(this._onParentResize,this));this._onParentResize()}else{this._attachMediaContainerWidthChange(this._handleMediaChange,this,i.media.RANGESETS.SAP_STANDARD_EXTENDED)}};r.prototype.onBeforeRendering=function(){this._cleanup()};r.prototype.exit=function(){this._cleanup();if(this._oObserver){this._oObserver.disconnect();this._oObserver=null}};r.prototype._cleanup=function(){if(this._sContainerResizeListener){s.deregister(this._sContainerResizeListener);this._sContainerResizeListener=null}this._detachMediaContainerWidthChange(this._handleMediaChange,this,i.media.RANGESETS.SAP_STANDARD_EXTENDED)};r.prototype._observeVisibility=function(e){this._oObserver.observe(e,{properties:["visible"]})};r.prototype._unobserveVisibility=function(e){this._oObserver.unobserve(e,{properties:["visible"]})};r.prototype._observeChanges=function(e){var t=e.object,i=e.name,s=e.mutation,a=e.child;if(t===this){if(s==="insert"){this._observeVisibility(a)}else if(s==="remove"){this._unobserveVisibility(a)}}else if(i==="visible"){var n=this.getContent().indexOf(t);o(this.$().children()[n]).toggleClass("}};r.prototype._handleMediaChange=function(e){this._toggleClass(e.name)};r.prototype._setBreakPointTablet=function(e){this._iBreakPointTablet=e};r.prototype._setBreakPointDesktop=function(e){this._iBreakPointDesktop=e};r.prototype._setBreakPointLargeDesktop=function(e){this._iBreakPointLargeDesktop=e};r.prototype.setDefaultIndent=function(e){if(/XL/gi.test(e)){this._setIndentXLChanged(true)}return this.setProperty("defaultIndent",e)};r.prototype._setIndentXLChanged=function(e){this._indentXLChanged=e};r.prototype._getIndentXLChanged=function(){return this._indentXLChanged};r.prototype.setDefaultSpan=function(e){if(/XL/gi.test(e)){this._setSpanXLChanged(true)}return this.setProperty("defaultSpan",e)};r.prototype._setSpanXLChanged=function(e){this._spanXLChanged=e};r.prototype._getSpanXLChanged=function(){return this._spanXLChanged};r.prototype._onParentResize=function(){var e=this.getDomRef();if(!e){this._cleanup();return}if(!o(e).is(":visible")){return}var t=e.clientWidth;if(t<=this._iBreakPointTablet){this._toggleClass("Phone")}else if(t>this._iBreakPointTablet&&t<=this._iBreakPointDesktop){this._toggleClass("Tablet")}else if(t>this._iBreakPointDesktop&&t<=this._iBreakPointLargeDesktop){this._toggleClass("Desktop")}else{this._toggleClass("LargeDesktop")}};r.prototype._toggleClass=function(e){var t=this.$();if(!t){return}if(t.hasClass("sapUiRespGridMedia-Std-"+e)){return}t.toggleClass("sapUiRespGridMedia-Std-"+e,true);if(e==="Phone"){t.toggleClass("sapUiRespGridMedia-Std-Desktop",false).toggleClass("sapUiRespGridMedia-Std-Tablet",false).toggleClass("sapUiRespGridMedia-Std-LargeDesktop",false)}else if(e==="Tablet"){t.toggleClass("sapUiRespGridMedia-Std-Desktop",false).toggleClass("sapUiRespGridMedia-Std-Phone",false).toggleClass("sapUiRespGridMedia-Std-LargeDesktop",false)}else if(e==="LargeDesktop"){t.toggleClass("sapUiRespGridMedia-Std-Desktop",false).toggleClass("sapUiRespGridMedia-Std-Phone",false).toggleClass("sapUiRespGridMedia-Std-Tablet",false)}else{t.toggleClass("sapUiRespGridMedia-Std-Phone",false).toggleClass("sapUiRespGridMedia-Std-Tablet",false).toggleClass("sapUiRespGridMedia-Std-LargeDesktop",false)}this.fireEvent("mediaChanged",{media:e})};r.prototype._getLayoutDataForControl=function(e){var t=e.getLayoutData();if(!t){return undefined}else if(t.isA("sap.ui.layout.GridData")){return t}else if(t.isA("sap.ui.core.VariantLayoutData")){var i=t.getMultipleLayoutData();for(var s=0;s<i.length;s++){var a=i[s];if(a&&a.is.onLayoutDataChange=function(e){if(this.getDomRef()){this.invalidate()}};r.prototype._getAccessibleRole=function(){return null};r.prototype.ildren:this.getContent().filter(function(e){return e.$().is(":visible")})}}})();return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/GridData",["sap/ui/core/LayoutData","./library","sap/base/Log"],function(e,t,n){"use strict";var a=e.extend("sap.ui.layout.GridData",{metadata:{library:"sap.ui.layout",properties:{span:{type:"sap.ui.layout.GridSpan",group:"Behavior",defaultValue:null},spanXL:{type:"int",group:"Behavior",defaultValue:null},spanL:{type:"int",group:"Behavior",defaultValue:null},spanM:{type:"int",group:"Behavior",defaultValue:null},spanS:{type:"int",group:"Behavior",defaultValue:null},indent:{type:"sap.ui.layout.GridIndent",group:"Behavior",defaultValue:null},indentXL:{type:"int",group:"Behavior",defaultValue:null},indentL:{type:"int",group:"Behavior",defaultValue:null},indentM:{type:"int",group:"Behavior",defaultValue:null},indentS:{type:"int",group:"Behavior",defaultValue:null},visibleXL:{type:"boolean",group:"Behavior",defaultValue:true},visibleL:{type:"boolean",group:"Behavior",defaultValue:true},visibleM:{type:"boolean",group:"Behavior",defaultValue:true},visibleS:{type:"boolean",group:"Behavior",defaultValue:true},moveBackwards:{type:"sap.ui.layout.GridIndent",group:"Misc",defaultValue:null},moveForward:{type:"sap.ui.layout.GridIndent",group:"Misc",defaultValue:null},linebreak:{type:"boolean",group:"Misc",defaultValue:false},linebreakXL:{type:"boolean",group:"Misc",defaultValue:false},linebreakL:{type:"boolean",group:"Misc",defaultValue:false},linebreakM:{type:"boolean",group:"Misc",defaultValue:false},linebreakS:{type:"boolean",group:"Misc",defaultValue:false},spanLarge:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},spanMedium:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},spanSmall:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},indentLarge:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},indentMedium:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},indentSmall:{type:"int",group:"Behavior",defaultValue:null,deprecated:true},visibleOnLarge:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},visibleOnMedium:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},visibleOnSmall:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true}}}});(function(){a.prototype._setStylesInternal=function(e){if(e&&e.length>0){this._sStylesInternal=e}else{this._sStylesInternal=undefined}};a.prototype._getEffectiveSpanXLarge=function(){var e=this.getSpanXL();if(e&&e>0&&e<13){return e}var t=/XL([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,2)==="XL"){return parseInt(a.substr(2))}}}return undefined};a.prototype._getEffectiveSpanLarge=function(){var e=this.getSpanL();if(e&&e>0&&e<13){return e}var t=/\bL([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,1)==="L"){return parseInt(a.substr(1))}}}return undefined};a.prototype._getEffectiveSpanMedium=function(){var e=this.getSpanM();if(e&&e>0&&e<13){return e}var t=/M([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,1)==="M"){return parseInt(a.substr(1))}}}return undefined};a.prototype._getEffectiveSpanSmall=function(){var e=this.getSpanS();if(e&&e>0&&e<13){return e}var t=/S([1-9]|1[0-2])(?:\s|$)/i;var n=t.exec(this.getSpan());if(n){var a=n[0];if(a){a=a.toUpperCase();if(a.substr(0,1)= undefined};a.prototype.init=function(){this._bLinebreakXLChanged=false};a.prototype.setLinebreakXL=function(e){this.setProperty("linebreakXL",e);this._bLinebreakXLChanged=true;return this};a.prototype._getLinebreakXLChanged=function(){return this._bLinebreakXLChanged};a.prototype.setSpanLarge=function(e){this.setSpanL(e);n.warning("Deprecated property spanLarge is used, please use spanL instead.");return this};a.prototype.setSpanMedium=function(e){n.warning("Deprecated property spanMedium is used, please use spanM instead.");return this.setSpanM(e)};a.prototype.setSpanSmall=function(e){n.warning("Deprecated property spanSmall is used, please use spanS instead.");return this.setSpanS(e)};a.prototype.setIndentLarge=function(e){n.warning("Deprecated property indentLarge is used, please use indentL instead.");return this.setIndentL(e)};a.prototype.setIndentMedium=function(e){n.warning("Deprecated property indentMedium is used, please use indentM instead.");return this.setIndentM(e)};a.prototype.setIndentSmall=function(e){n.warning("Deprecated property indentSmall is used, please use indentS instead.");return this.setIndentS(e)};a.prototype.setVisibleOnLarge=function(e){n.warning("Deprecated property visibleOnLarge is used, please use visibleL instead.");return this.setVisibleL(e)};a.prototype.setVisibleOnMedium=function(e){n.warning("Deprecated property visibleOnMedium is used, please use visibmall is used, please use visibleS instead.");return this.setVisibleS(e)};a.prototype.getSpanLarge=function(){n.warning("Deprecated property spanLarge is used, please use spanL instead.");return this.getSpanL()};a.prototype.getSpanMedium=function(){n.warning("Deprecated property spanMedium is used, please use spanM instead.");return this.getSpanM()};a.prototype.getSpanSmall=function(){n.warning("Deprecated property spanSmall is used, please use spanS instead.");return this.getSpanS()};a.prototype.getIndentLarge=function(){n.warning("Deprecated property indentLarge is used, please use indentL instead.");return this.getIndentL()};a.prototype.getIndentMedium=function(){n.warning("Deprecated property indentMedium is used, please use indentM instead.");return this.getIndentM()};a.prototype.getIndentSmall=function(){n.warning("Deprecated property indentSmall is used, please use indentS instead.");return this.getIndentS()};a.prototype.getVisibleOnLarge=function(){n.warning("Deprecated property visibleOnLarge is used, please use visibleL instead.");return this.getVisibleL()};a.prototype.getVisibleOnMedium=function(){n.warning("Deprecated property visibleOnMedium is used, please use visiSmall is used, please use visibleS instead.");return this.getVisibleS()}})();return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/HorizontalLayout",["sap/ui/core/Control","./library","./HorizontalLayoutRenderer"],function(e,t,a){"use strict";var o=e.extend("sap.ui.layout.HorizontalLayout",{metadata:{library:"sap.ui.layout",properties:{allowWrapping:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},designtime:"sap/ui/layout/designtime/HorizontalLayout.designtime",dnd:{draggable:false,droppable:true}},renderer:a});o.prototype.getAccessibilityInfo=function(){return{children:this.getContent()}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/ResponsiveFlowLayout",["sap/ui/core/Configuration","sap/ui/core/Control","sap/ui/core/ResizeHandler","./library","./ResponsiveFlowLayoutData","./ResponsiveFlowLayoutRenderer","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/rect"],function(t,e,i,r,n,o,a){"use strict";var s=e.extend("sap.ui.layout.ResponsiveFlowLayout",{metadata:{library:"sap.ui.layout",properties:{responsive:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}},renderer:o});(function(){s.prototype.init=function(){this._rows=[];this._bIsRegistered=false;this._proxyComputeWidths=d.bind(this);this._iRowCounter=0};s.prototype.exit=function(){delete this._rows;if(this._IntervalCall){clearTimeout(this._IntervalCall);this._IntervalCall=undefined}if(this._resizeHandlerComputeWidthsID){i.deregister(this._resizeHandlerComputeWidthsID)}delete this._resizeHandlerComputeWidthsID;delete this._proxyComputeWidths;if(this.oRm){this.oRm.destroy();delete this.oRm}delete this._$DomRef;delete this._oDomRef;delete this._iRowCounter};var r=function(t){var e=t.getContent();var i=[];var r=-1;var o={},a={};var s="";var h;var l=0,d=0,p=0;var f=false,g=false,c=false;for(var v=0;v<e.length;v++){l=n.MIN_WIDTH;d=n.WEIGHT;f=n.LINEBREAK;g=n.MARGIN;c=n.LINEBREAKABLE;h=u(e[v]);if(h instanceof n){f=h.getLinebreak();l=h.getMinWidth();d=h.getWeight();g=h.getMargin();c=h.getLinebreakable()}if(r<0||f){r++;i.push({height:-1,cont:[]})}p=i[r].cont.length;s=e[v].getId()+"-cont"+r+"_"+p;o={minWidth:l,weight:d,linebreakable:c,padding:g,control:e[v],id:s,breakWith:[]};var m=false;if(!c){for(var C=p;C>0;C--){a=i[r].cont[C-1];if(a.linebreakable){a.breakWith.push(o);m=true;break}}}if(!m){i[r].cont.push(o)}}t._rows=i};var o=function(e,i,r){var n=[];var o=1e7;var s=-1;var h=function(t){var i=a(document.getElementById(e.cont[t].id));if(i.length>0){var r=i[0].offsetLeft;if(o>=r){n.push({cont:[]});s++}o=r;n[s].cont.push(e.cont[t])}};if(t.getRTL()){for(var l=e.cont.length-1;l>=0;l--){h(l)}}else{for(var l=0;l<e.cont.length;l++){h(l)}}return n};var h=function(t,e){var i=[];var r=-1;var n=0;var o=0;var a=0;var s=0,h=0;var l=0,d=0;for(l=0;l<t.cont.length;l++){n=0;o=0;for(d=a;d<=l;d++){o=o+t.cont[d].weight}for(d=a;d<=l;d++){s=e/o*t.cont[d].weight;s=Math.floor(s);h=t.cont[d].minWidth;n+=Math.max(s,h)}if(r==-1||n>e){i.push({cont:[]});if(r!==-1){a=l}r++}i[r].cont.push(t.cont[l])}return i};var l=function(t,e){if(t.length!=e.length){return true}for(var i=0;i<t.length;i++){if(t[i].cont.length!=e[i].cont.length){return true}}return false};s.prototype.renderContent=function(t,e){var i=t,r=0,n=[],o=0,a=0,s=0,h=0,l=0,d=0,u,p=0,f=0,g=[],c=[],v=this.getId(),m="",C=this._getRenderManager();for(o=0;o<i.length;o++){d=0;n.length=0;r=100;c.length=0;c.push("sapUiRFLRow");if(i[o].cont.length<=1){c.push("sapUiRFLCompleteRow")}var _=v+"-row"+this._iRowCounter;var R={};C.writeHeader(_,R,c);l=0;for(a=0;a<i[o].cont.length;a++){l+=i[o].cont[a].weight}for(s=0;s<i[o].cont.length;s++){u=i[o].cont[s];p=0;f=0;if(u.breakWith.length>0){p=u.weight;f=u.minWidth;for(var y=0;y<u.breakWith.length;y++){p+=u.breakWith[y].weight;f+=u.breakWith[y].minWidth}}m=i[o].cont[s].id;c.length=0;R={"min-width":u.breakWith.length>0?f:u.minWidth};d=100/l*u.weight;var w=R["min-width"]/e*100;var W=Math.ceil(w);var b=Math.floor(d);if(b!==100&&W>b){d=W}else{d=b}d=r<d?r:d;r-=d;n.push(d);if(r>0&&s===i[o].cont.length-1){d+=r}c.push("sapUiRFLContainer");R["width"]=d+"%";R["min-width"]=R["min-width"]+"px";C.writeHeader(m,R,c);c.length=0;c.push("sapUiRFLContainerContent");if(u.breakWith.length>0){c.push("sapUiRFLMultiContainerContent")}if(u.padding){c.push("sapUiRFLPaddingClass")}var I=this._addContentClass(u.control,s);if(I){c.push(I)}R={};C.writeHeader("",R,c);if(u.breakWith.length>0){m=i[o].cont[s].id+"-multi0";c.length=0;R={"min-width":f+"px"};var D=100/p*u.weight;D=Math.floor(D);g.push(D);c.push("sapUiRFLMultiContent");R["width"]=D+"%";if(i[o].cont[s].padding){c.push("sapUiRFLPaddingClass")}C.writeHeader(m,R,c);var L=D;C.renderControl(u.control);C.close("div");for(h=0;h<u.breakWith.length;h++){m=u.breakWith[h].id+"-multi"+(h+1);c.length=0;R={"min-width":u.breakWith[h].minWidth+"px"};D=100/p*u.breakWith[h].weight;D=Math.floor(D);g.push(D);L+=D;if(L<100&&h===u.breakWith.length-1){D+=100-L}c.push("sapUiRFLMultiContent");R["width"]=D+"%";if(u.breakWith[h].padding){c.push("sapUiRFLPaddingClass")}C.writeHeader(m,R,c);C.renderControl(u.breakWith[h].control);C.close("div")}}else{C.renderControl(u.control)}C.close("div");C.close("div")}C.close("div");this._iRowCounter++}};var d=function(){this._iRowCounter=0;this._oDomRef=this.getDomRef();if(this._oDomRef){var t=this.getId();var e=a(this._oDomRef).width();var i=false;if(this._rows){for(var r=0;r<this._rows.length;r++){var n=a(document.getElementById(t+"-row"+r));var s=h(this._rows[r],e);var d=o(this._rows[r],n,this);i=l(d,s);var u=this._getElementRect(n);var p=this._rows[r].oRect;if(u&&p){i=i||u.width!==p.width&&u.height!==p.height}if(this._bLayoutDataChanged||i){this._oDomRef.innerHTML="";this._bLayoutDataChanged=false;this.renderContent(s,e)}}if(this._oDomRef.innerHTML===""){this._getRenderManager().flush(this._oDomRef);for(var r=0;r<this._rows.length;r++){var f=this._getElementRect(a(document.getElementByI._rows[r].oRect=f}}}}};s.prototype.onBeforeRendering=function(){r(this)};s.prototype.onAfterRendering=function(){this._oDomRef=this.getDomRef();this._$DomRef=a(this._oDomRef);this._proxyComputeWidths();if(this.getResponsive()){if(!this._resizeHandlerComputeWidthsID){this._resizeHandlerComputeWidthsID=i.register(this,s.prototype.rerender.bind(this))}}};s.prototype.onThemeChanged=function(t){if(t.type==="LayoutDataChange"){this._bLayoutDataChanged=true}if(this.getResponsive()&&!this._resizeHandlerComputeWidthsID){this._resizeHandlerComputeWidthsID=i.register(this,s.prototype.rerender.bind(this))}r(this);this._proxyComputeWidths()};s.prototype.setResponsive=function(t){e.prototype.setProperty.call(this,"responsive",t);if(t&&!this._resizeHandlerComputeWidthsID){this._resizeHandlerComputeWidthsID=i.register(this,s.prototype.rerender.bind(this))}else if(this._resizeHandlerComputeWidthsID){if(this._resizeHandlerComputeWidthsID){i.deregister(this._resizeHandlerComputeWidthsID);delete this._resizeHandlerComputeWidthsID}}return this};s.prototype.onLayoutDataChange=s.prototype.onThemeChanged;var u=function(t){var e=t.getLayoutData();if(!e){return undefined}else if(e instanceof n){return e}else if(e.getMetadata().getName()=="sap.ui.core.VariantLayoutData"){var i=e.getMultipleLayoutData();for(var r=0;r<i.length;r++){var o=i[r];if(o instanceof n){return o}}}};s.prototype.addContent=function(t){if(t&&this._IntervalCall){clearTimeout(this._IntervalCall);this._IntervalCall=undefined}this.addAggregation("content",t);return this};s.prototype.insertContent=function(t,e){if(t&&this._IntervalCall){clearTimeout(this._IntervalCall);this._IntervalCall=undefined}this.insertAggregation("content",t,e);return this};s.prototype.removeContent=function(t){if(t&&this._IntervalCall){clearTimeout(this._IntervalCall);this._IntervalCall=undefined}this.removeAggregation("content",t)};s.prototypen(){return null};s.prototype._addContentClass=function(t,e){return null};s.prototype._getElementRect=function(t){var e=t&&t.rect();if(e){e.height=e.height.toFixed(1);e.width=e.width.toFixed(1)}return e};s.prototype._getRenderManager=function(){if(!this.oRm){this.oRm=sap.ui.getCore().createRenderManager();this.oRm.writeHeader=function(t,e,i){this.openStart("div",t);if(e){for(var r in e){if(r==="width"&&e[r]==="100%"){this.class("sapUiRFLFullLength")}this.style(r,e[r])}}for(var n=0;n<i.length;n++){this.class(i[n])}this.openEnd()}}return this.oRm}})();return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/ResponsiveFlowLayoutData",["sap/ui/core/LayoutData","./library","sap/base/Log"],function(e,t,a){"use strict";var i=e.extend("sap.ui.layout.ResponsiveFlowLayoutData",{metadata:{library:"sap.ui.layout",properties:{minWidth:{type:"int",group:"Misc",defaultValue:100},weight:{type:"int",group:"Misc",defaultValue:1},linebreak:{type:"boolean",group:"Misc",defaultValue:false},margin:{type:"boolean",group:"Misc",defaultValue:true},linebreakable:{type:"boolean",group:"Misc",defaultValue:true}}}});i.MIN_WIDTH=100;i.WEIGHT=1;i.LINEBREAK=false;i.MARGIN=true;i.LINEBREAKABLE=true;i.prototype.setWeight=function(e){if(e>=1){this.setProperty("weight",e)}else{a.warning("Values smaller than 1 are invalid. Default value '1' is used instead",this);this.setProperty("weight",i.WEIGHT)}return this};i.prototype.setLinebreak=function(e){if(this.getLinebreakable()==false&&e){a.warning("Setting 'linebreak' AND 'linebreakable' doesn't make any sense. Please set either 'linebreak' or 'linebreakable'",this)}else{this.setProperty("linebreak",e)}return this};i.prototype.setLinebreakable=function(e){if(this.getLinebreak()===true&&e===false){a.warning("Setting 'linebreak' AND 'linebreakable' doesn't make any sense. Please set either 'linebreak' or 'linebreakable'",this)}else{this.setProperty("linebreakable",e)}return this};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/VerticalLayout",["sap/ui/core/Control","sap/ui/core/EnabledPropagator","./library","./VerticalLayoutRenderer"],function(e,t,a,r){"use strict";var i=e.extend("sap.ui.layout.VerticalLayout",{metadata:{library:"sap.ui.layout",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},enabled:{type:"boolean",group:"Behavior",defaultValue:true}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},dnd:{draggable:false,droppable:true},designtime:"sap/ui/layout/designtime/Vtype.getAccessibilityInfo=function(){return{children:this.getContent()}};t.call(i.prototype);return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/Form",["sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","sap/ui/layout/library","./FormRenderer"],function(e,t,o,i){"use strict";var r=e.extend("sap.ui.layout.form.Form",{metadata:{library:"sap.ui.layout",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"formContainers",aggregations:{formContainers:{type:"sap.ui.layout.form.FormContainer",multiple:true,singularName:"formContainer"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false},layout:{type:"sap.ui.layout.form.FormLayout",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/Form.designtime"},renderer:i});r.prototype.init=function(){this._oObserver=new t(n.bind(this));this._oObserver.observe(this,{properties:["editable"],aggregations:["formContainers"]})};r.prototype.exit=function(){this._oObserver.dis=function(e){var t=this.getLayout();if(t){t.toggleContainerExpanded(e)}};r.prototype.contentOnAfterRendering=function(e,t){var o=this.getLayout();if(o&&o.contentOnAfterRendering){o.contentOnAfterRendering(e,t)}};r.prototype.onLayoutDataChange=function(e){var t=this.getLayout();if(t&&t.onLayoutDataChange){t.onLayoutDataChange(e)}};r.prototype.onBeforeFastNavigationFocus=function(e){var t=this.getLayout();if(t&&t.onBeforeFastNavigationFocus){t.onBeforeFastNavigationFocus(e)}};r.prototype.setEditable=function(e){this.setProperty("editable",e,true);return this};function a(e,t){if(e!=t&&this.getDomRef()){if(e){this.$().addClass("sapUiFormEdit").addClass("sapUiFormEdit-CTX");this.$().removeAttr("aria-readonly")}else{this.$().removeClass("sapUiFormEdit").removeClass("sapUiFormEdit-CTX");this.$().attr("aria-readonly","true")}}var o=this.getFormContainers();for(var i=0;i<o.length;i++){var r=o[i];r._setEditable(e)}}r.prototype.setToolbar=function(e){e=o.form.FormHelper.setToolbar.call(this{if(!this._bNoInvalidate){e.prototype.invalidate.apply(this,arguments)}};r.prototype.getContainerRenderedDomRef=function(e){var t=this.getLayout();if(t&&t.getContainerRenderedDomRef){return t.getContainerRenderedDomRef(e)}else{return null}};r.prototype.getElementRenderedDomRef=function(e){var t=this.getLayout();if(t&&t.getElementRenderedDomRef){return t.getElementRenderedDomRef(e)}else{return null}};r.prototype.getVisibleFormContainers=function(){var e=this.getFormContainers();var t=[];for(var o=0;o<e.length;o++){var i=e[o];if(i.isVisible()){t.push(i)}}return t};r.prototype._suggestTitleId=function(e){this._sSuggestedTitleId=e;if(this.getDomRef()){this.invalidate()}return this};function n(e){if(e.name==="editable"){a.call(this,e.current,e.old)}else if(e.name==="formContainers"){s.call(this,e.mutation,e.child)}}function s(e,t){if(e==="insert"){t._setEditable(this.getEditable())}}return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormContainer",["sap/ui/core/Element","sap/ui/base/ManagedObjectObserver","sap/ui/core/theming/Parameters","sap/ui/layout/library","sap/base/Log"],function(e,t,i,n,o){"use strict";var r=e.extend("sap.ui.layout.form.FormContainer",{metadata:{library:"sap.ui.layout",properties:{expanded:{type:"boolean",group:"Misc",defaultValue:true},expandable:{type:"boolean",group:"Misc",defaultValue:false},visible:{type:"boolean",group:"Misc",defaultValue:true},_editable:{type:"boolean",group:"Misc",defaultValue:false,visibility:"hidden"}},defaultAggregation:"formElements",aggregations:{formElements:{type:"sap.ui.layout.form.FormElement",multiple:true,singularName:"formElement"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false},_expandButton:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/FormContainer.designtime"}});r.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.layout");this._oObserver=new t(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["expanded","expandable"],aggregations:["formElements"]})};r.prototype.exit=function(){if(this._oExpandButton){delete this._oExpandButton}this._rb=undefined;this._oObserver.disconnect();this._oObserver=undefined};function a(e){if(e){if(!this._oExpandButton){if(!this._bExpandButtonRequired){this._bExpandButtonRequired=true;n.form.FormHelper.createButton.call(this,this.getId()+"--Exp",p,s)}}else{u.call(this)}}}function s(e){if(!this._bIsBeingDestroyed){this._oExpandButton=e;this.setAggregation("_expandButton",this._oExpandButton);u.call(this)}}function l(e){u.call(this);var t=this.getParent();if(t&&t.toggleContainerExpanded){t.toggleContainerExpanded(this)}}r.prototype.setToolbar=function(e){e=n.form.FormHelper.setToolbar.call(this,e);this.setAggregation("toolbar",e);return this};r.prototype.contentOnAfterRendering=function(e,t){var i=this.getParent();if(i&&i.contentOnAfterRendering){i.contentOnAfterRendering(e,t)}};r.prototype.onLayoutDataChange=function(e){var t=this.getParent();if(t&&t.onLayoutDataChange){t.onLayoutDataChange(e)}};r.prototype._checkProperties=function(){var e=0;if(this.getExpandable()&&(!this.getTitle()||this.getToolbar())){o.warning("Expander only displayed if title is set",this.getId(),"FormContainer");e=1}return e};r.prototype.getRenderedDomRef=function(){var e=this;var t=this.getParent();if(t&&t.getContainerRenderedDomRef){return t.getContainerRenderedDomRef(e)}else{return null}};r.prototype.getElementRenderedDomRef=function(e){var t=this.getParent();if(t&&t.getElementRenderedDomRef){return t.getElementRenderedDomRef(e)}else{return null}};r.prototype.getVisibleFormElements=function(){var e=this.getFormElements();var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n.isVisible()){t.push(n)}}return t};r.prototype._setEditable=function(e){var t=this.getProperty("_editable");this.setProperty("_editable",e,true);if(e!==t){var i=this.getFormElements();for(var n=0;n<i.length;n++){var o=i[n];o._setEditable(e)}}};r.prototype.isVisible=function(){return this.getVisible()};function u(){if(!this._oExpandButton){return}var e,t,o,r;if(this.getExpanded()){e=i._getThemeImage("_sap_ui_layout_Form_FormContainerColImageURL");t=i._getThemeImage("_sap_ui_layout_Form_FormContainerColImageDownURL");o="-";r=this._rb.getText("FORM_COLLAPSE")}else{e=i._getThemeImage("_sap_ui_layout_Form_FormContainerExpImageURL");t=i._getThemeImage("_sap_ui_layout_Form_FormContainerExpImageDownURL");o="+";r=this._rb.getText("FORM_EXPAND")}if(e){o=""}n.form.FormHelper.setButtonContent(this._oExpandButton,o,r,e,t)}function p(e){this.setExpanded(!this.getExpanded())}r.prototype._observeChanges=function(e){if(e.name=="formElements"){d.call(this,e.mutation,e.child)}else if(e.name=="expanded"){l.call(this,e.current)}else if(e.name=="expandable"){a.call(this,e.current)}};function d(e,t){if(e==="insert"){var i=this.getProperty("_editable");t._setEditable(i)}}return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormElement",["sap/ui/core/Element","sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","sap/ui/layout/library","sap/base/Log"],function(e,t,i,s,a){"use strict";var r=e.extend("sap.ui.layout.form.FormElement",{metadata:{library:"sap.ui.layout",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},_editable:{type:"boolean",group:"Misc",defaultValue:false,visibility:"hidden"}},defaultAggregation:"fields",aggregations:{label:{type:"sap.ui.core.Label",altTypes:["string"],multiple:false},_label:{type:"sap.ui.core.Label",multiple:false,visibility:"hidden"},fields:{type:"sap.ui.core.Control",multiple:true,singularName:"field"}},designtime:"sap/ui/layout/designtime/form/FormElement.designtime"}});r.prototype.init=function(){this._oFieldDelegate={oElement:this,onAfterRendering:f};this._oObserver=new i(this._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["fields"]})};r.prototype.exit=function(){if(this._oLabel){delete this._oLabel}this._oFieldDelegate=undefined;this._oObserver.disconnect();this._oObserver=undefined};r.prototype.setLabel=function(e){if(!this._oLabel){var t=this.getLabel();if(t){if(t.setAlternativeLabelFor){t.setAlternativeLabelFor(null)}if(t.isRequired){t.isRequired=t._sapuiIsRequired;t._sapuiIsRequired=undefined;t.disableRequiredChangeCheck(false)}if(t.isDisplayOnly){t.isDisplayOnly=t._sapuiIsDisplayOnly;t._sapuiIsDisplayOnly=undefined}if(t.isWrapping){t.isWrapping=t._sapuiIsWrapping;t._sapuiIsWrapping=undefined}}}this.setAggregation("label",e);var i=e;if(typeof i==="string"){this._setInternalLabel(i)}else{if(this._oLabel){this._oLabel.destroy();delete this._oLabel}if(i&&i.isRequired){i._sapuiIsRequired=i.isRequired;i.isRequired=o;i.disableRequiredChangeCheck(true)}if(i&&i.isDisplayOnly){i._sapuiIsDisplayOnly=i.isDisplayOnly;i.isDisplayOnly=u}if(i&&i.isWrapping){i._sapuiIsWrapping=i.isWrapping;i.isWrapping=p}d.call(this)}return this};r.prototype._setInternalLabel=function(e){if(!this._oLabel){this._oLabel=s.form.FormHelper.createLabel(e,this.getId()+"-label");this.setAggregation("_label",this._oLabel,true);this._oLabel.disableRequiredChangeCheck(true);if(this._oLabel.isRequired){this._oLabel.isRequired=o}if(this._oLabel.isDisplayOnly){this._oLabel.isDisplayOnly=u}if(this._oLabel.setWrapping){this._oLabel.setWrapping(true)}}else{this._oLabel.setText(e)}d.call(this)};r.prototype.destroyLabel=function(){this.destroyAggregation("label");if(this._oLabel){this._oLabel.destroy();delete this._oLabel}return this};r.prototype.getLabelControl=function(){if(this._oLabel){return this._oLabel}else{return this.getLabel()}};r.prototype.updateFields=function(){var e=this.getFields();var t;var i=0;for(i=0;i<e.length;i++){t=e[i];h.call(this,t)}this.updateAggregation("fields");e=this.getFields();for(i=0;i<e.length;i++){t=e[i];g.call(this,t)}d.call(this);return this};r.prototype.enhanceAccessibilityState=function(e,t){var i=this.getLabelControl();if(i&&i!=e&&e.getMetadata().getAllAssociations().ariaLabelledBy){var s=t["labelledby"];if(!s){s=i.getId()}else{var a=s.split(" ");if(a.indexOf(i.getId())<0){a.splice(0,0,i.getId());s=a.join(" ")}}t["labelledby"]=s}};r.prototype.onLayoutDataChange=function(e){var t=this.getParent();if(t&&t.onLayoutDataChange){t.onLayoutDataChange(e)}};r.prototype.getRenderedDomRef=function(){var e=this;var t=this.getParent();if(t&&t.getElementRenderedDomRef){return t.getElementRenderedDomRef(e)}else{return null}};r.prototype._setEditable=function(e){var t=this.getProperty("_editable");this.setProperty("_editable",e,true);if(e!==t){this.invalidateLabel()}};r.prototype.invalidateLabel=function(){var e=this.getLabelControl();if(e&&e.getDomRef()){e.invalidate()}};r.prototype.isVisible=function(){return this.getVisible()};r.prototype.getFieldsForRendering=function(){return this.getFields()};r.prototype._observeChanges=function(e){if(e.object==this){if(e.name=="fields"){l.call(this,e.child,e.mutation)}}else{n.call(this,e)}};function l(e,t){if(t=="insert"){if(!e.isA("sap.ui.core.IFormContent")){a.warning(e+" is not valid Form content",this)}g.call(this,e)}else{h.call(this,e)}d.call(this)}function n(e){if(e.name=="required"||e.name=="editable"){this.invalidateLabel()}}function o(){if(this.getRequired&&this.getRequired()){return true}var e=this.getParent();var t=e.getFields();for(var i=0;i<t.length;i++){var s=t[i];if(s.getRequired&&s.getRequired()===true&&(!s.getEditable||s.getEditable())){return true}}return false}function u(){if(this.getDisplayOnly){if(!this.isPropertyInitial("displayOnly")){return this.getDisplayOnly()}var e=this.getParent();return!e.getProperty("_editable")}return false}function p(){if(this.getWrapping&&!this.isPropertyInitial("wrapping")){return this.getWrapping()}return true}function d(){var e=this.getFields();var i=e.length>0?e[0]:null;var s=this._oLabel;if(s){s.setLabelFor(i)}else{s=this.getLabel();if(s instanceof t){s.setAlternativeLabelFor(i)}}}function g(e){e.addDelegate(this._oFieldDelegate);if(!this._bNoObserverChange){if(e.getMetadata().getProperty("required")){this._oObserver.observe(e,{properties:["required"]})}if(e.getMetadata().getProperty("editable")){this._oObserver.observe(e,{properties:["editable"]})}}}function h(e){e.removeDelegate(this._oFieldDelegate);if(!this._bNoObserverChange){this._oObserver.unobserve(e)}}function f(e){var t=this.oElement.getParent();if(t&&t.contentOnAfterRendering){t.contentOnAfterRendering(this.oElement,e.srcControl)}}return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/FormLayout",["sap/ui/core/Control","sap/ui/core/Element","sap/ui/layout/library","./FormLayoutRenderer","sap/ui/core/theming/Parameters","sap/ui/thirdparty/jquery","sap/ui/core/Configuration","sap/ui/dom/jquery/Selectors"],function(e,t,r,i,n,o,a){"use strict";var f=r.BackgroundDesign;var l=e.extend("sap.ui.layout.form.FormLayout",{metadata:{library:"sap.ui.layout",properties:{backgroundDesign:{type:"sap.ui.layout.BackgroundDesign",group:.init=function(){this._sFormTitleSize="H4";this._sFormSubTitleSize="H5"};l.prototype.onBeforeRendering=function(e){this.loadTitleSizes()};l.prototype.contentOnAfterRendering=function(e,t){if(r.form.FormHelper.bArrowKeySupport){o(t.getFocusDomRef()).data("sap.InNavArea",true)}if(t.getWidth&&(!t.getWidth()||t.getWidth()=="auto")&&(!t.getFormDoNotAdjustWidth||!t.getFormDoNotAdjustWidth())){t.$().css("width","100%")}};l.prototype.toggleContainerExpanded=function(e){var t=e.getExpanded();if(this.getDomRef()){if(t){e.$("content").css("display","")}else{e.$("content").css("display","none")}}};l.prototype.getLayoutDataForElement=function(e,t){var r=e.getLayoutData();if(!r){return undefined}else if(r.isA(t)){return r}else if(r.isA("sap.ui.core.VariantLayoutData")){var i=r.getMultipleLayoutData();for(var n=0;n<i.length;n++){var o=i[n];if(o.isA(t)){return o}}}};l.prototype.onsapright=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=a.getRTL();if(!t){this.navigateForward(e)}else{this.navigateBack(e)}}};l.prototype.onsapleft=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=a.getRTL();if(!t){this.navigateBack(e)}else{this.navigateForward(e)}}};l.prototype.onsapdown=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=e.srcControl;var i;var n=this.findElement(t);var o=n.element;t=n.rootControl;if(o&&o.isA("sap.ui.layout.form.FormElement")){i=this.findFieldBelow(t,o)}else if(o&&o.isA("sap.ui.layout.form.FormContainer")){i=this.findFirstFieldOfNextElement(o,0)}if(i){i.focus();e.preventDefault()}}};l.prototype.onsapup=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=e.srcControl;var i=0;var n;var o=this.findElement(t);var a=o.element;t=o.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){n=this.findFieldAbove(t,a)}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){var f=a.getParent();i=f.indexOfFormContainer(a);n=this.findLastFieldOfLastElementInPrevContainer(f,i-1)}if(n){n.focus();e.preventDefault()}}};l.prototype.onsaphome=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=e.srcControl;var i=0;var n;var o=this.findElement(t);var a=o.element;var f=a.getParent();var l=f.getParent();i=l.indexOfFormContainer(f);n=this.findFirstFieldOfFirstElementInNextContainer(l,i);if(n){n.focus();e.preventDefault()}}};l.prototype.onsaptop=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=e.srcControl;var i=this.findElement(t);var n=i.element;var o;var a;if(n&&n.isA("sap.ui.layout.form.FormElement")){a=n.getParent()}else if(n&&n.isA("sap.ui.layout.form.FormContainer")){a=n}var f=a.getParent();o=this.findFirstFieldOfForm(f);if(o){o.focus();e.preventDefault()}}};l.prototype.onsapend=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=e.srcControl;var i=0;var n;var o=this.findElement(t);var a=o.element;var f=a.getParent();var l=f.getParent();i=l.indexOfFormContainer(f);n=this.findLastFieldOfLastElementInPrevContainer(l,i);if(n){n.focus();e.preventDefault()}}};l.prototype.onsapbottom=function(e){if(r.form.FormHelper.bArrowKeySupport){var t=e.srcControl;var i=this.findElement(t);var n=i.element;var o;var a;if(n&&n.isA("sap.ui.layout.form.FormElement")){a=n.getParent()}else if(n&&n.isA("sap.ui.layout.form.FormContainer")){a=n}var f=a.getParent();var l=f.getFormContainers();var s=l.length;o=this.findLastFieldOfLastElementInPrevContainer(f,s-1);if(o){o.focus();e.preventDefault()}}};l.prototype.onsapexpand=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;var n;if(i.isA("sap.ui.layout.form.FormContainer")){n=i}else{n=i.getParent()}if(n.getExpandable()&&t===n._oExpandButton){n.setExpanded(true)}};l.prototype.onsapcollapse=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;var n;if(i.isA("sap.ui.layout.form.FormContainer")){n=i}else{n=i.getParent()}if(n.getExpandable()&&t===n._oExpandButton){n.setExpanded(false)}};l.prototype.onsapskipforward=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;t=r.rootControl;var n;var o;if(i&&i.isA("sap.ui.layout.form.FormElement")){o=i.getParent()}else if(i&&i.isA("sap.ui.layout.form.FormContainer")){o=i}var a=o.getParent();var f=a.indexOfFormContainer(o);n=this.findFirstFieldOfFirstElementInNextContainer(a,f+1);if(n){n.focus();e.preventDefault()}};l.prototype.onsapskipback=function(e){var t=e.srcControl;var r=this.findElement(t);var i=r.element;t=r.rootControl;var n;var o;if(i&&i.isA("sap.ui.layout.form.FormElement")){o=i.getParent()}else if(i&&i.isA("sap.ui.layout.form.FormContainer")){o=i}var a=o.getParent();var f=a.getFormContainers();var l=a.indexOfFormContainer(o);while(!n&&l>0){var s=f[l-1];if(!s.getExpandable()||s.getExpanded()){n=this.findFirstFieldOfFirstElementInPrevContainer(a,l-1)}l=l-1}if(n&&n!==t.getFocusDomRef()){n.focus();e.preventDefault()}};l.prototype.onBeforeFastNavigationFocus=function(e){if(o.contains(this.getDomRef(),e.source)){e.srcControl=t.closestTo(e.source);if(e.forward){this.onsapskipforward(e)}else{this.onsapskipback(e)}}else{var r=e.forward?this.findFirstFieldOfForm(this.getParent()):this.findFirstFieldOfLastContainerOfForm(this.getParent());if(r){r.focus();e.preventDefault()}}};l.prototype.findElement=function(e){var t=e.getParent();var r=e;while(t&&!t.isA("sap.ui.layout.form.FormElement")&&!t.isA("sap.ui.layout.form.FormContainer")&&!t.isA("sap.ui.layout.form.Form")){r=t;t=t.getParent()}return{rootControl:r,element:t}};l.prototype.navigateForward=function(e){var t=e.srcControl;var r=0;var i;var n=this.findElement(t);var o=n.element;t=n.rootControl;if(o&&o.isA("sap.ui.layout.form.FormElement")){if(t==o.getLabelControl()){r=-1}else{r=o.indexOfField(t)}i=this.findNextFieldOfElement(o,r+1);if(!i){var a=o.getParent();r=a.indexOfFormElement(o);i=this.findFirstFieldOfNextElement(a,r+1);if(!i){var f=a.getParent();r=f.indexOfFormContainer(a);i=this.findFirstFieldOfFirstElementInNextContainer(f,r+1)}}}else if(o&&o.isA("sap.ui.layout.form.FormContainer")){i=this.findFirstFieldOfNextElement(o,0)}if(i){i.focus();e.preventDefault()}};l.prototype.tabForward=function(e){var t;var r=e.srcControl;var i=0;var n;var o=this.findElement(r);var a=o.element;r=o.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){if(r==a.getLabelControl()){i=-1}else{i=a.indexOfField(r)}n=this.findNextFieldOfElement(a,i+1,true);if(!n){var f=a.getParent();i=f.indexOfFormElement(a);n=this.findFirstFieldOfNextElement(f,i+1,true);if(!n){t=f.getParent();i=t.indexOfFormContainer(f);n=this.findFirstFieldOfFirstElementInNextContainer(t,i+1,true)}}}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){n=this.findFirstFieldOfNextElement(a,0,true);if(!n){t=a.getParent();i=t.indexOfFormContainer(a);n=this.findFirstFieldOfFirstElementInNextContainer(t,i+1,true)}}if(n){n.focus();e.preventDefault()}};l.prototype.findNextFieldOfElement=function(e,t,r){var i=e.getFieldsForRendering();var n=i.length;var o;for(var a=t;a<n;a++){var f=i[a];var l=this._getDomRef(f);if(r==true){if((!f.getEditable||f.getEditable())&&(!f.getEnabled||f.getEnabled())&&l){o=l;break}}else{if((!f.getEnabled||f.getEnabled())&&l){o=l;break}}}return o};l.prototype.findFirstFieldOfNextElement=function(e,t,r){var i=e.getFormElements();var n=i.length;var o;var a=t;while(!o&&a<n){var f=i[a];if(r==true){o=this.findNextFieldOfElement(f,0,true)}else{o=this.findNextFieldOfElement(f,0)}a++}return o};l.prototype.findFirstFieldOfForm=function(e){var t=this.findFirstFieldOfFirstElementInNextContainer(e,0);return t};l.prototype.findFirstFieldOfLastContainerOfForm=function(e){var t;var r=e.getFormContainers();var i=r.length;while(!t&&i>0){var n=r[i-1];if(!n.getExpandable()||n.getExpanded()){t=this.findFirstFieldOfFirstElementInPrevContainer(e,i-1)}i=i-1}return t};l.prototype.findFirstFieldOfFirstElementInNextContainer=function(e,t,r){var i=e.getFormContainers();var n=i.length;var o;var a=t;while(!o&&a<n){var f=i[a];if(f.getExpandable()&&r){o=f._oExpandButton.getFocusDomRef();if(o){break}}if(!f.getExpandable()||f.getExpanded()){if(r==true){o=this.findFirstFieldOfNextElement(f,0,true)}else{o=this.findFirstFieldOfNextElement(f,0)}}a++}return o};l.prototype.findFirstFieldOfFirstElementInPrevContainer=function(e,t){var r=e.getFormContainers();var i=r.length;var n;var o=t;while(!n&&o<i&&o>=0){var a=r[o];if(!a.getExpandable()||a.getExpanded()){n=this.findFirstFieldOfNextElement(a,0)}o++}return n};l.prototype.navigateBack=function(e){var t;var r=e.srcControl;var i=0;var n;var o=this.findElement(r);var a=o.element;r=o.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){if(r==a.getLabelControl()){i=0}else{i=a.indexOfField(r)}n=this.findPrevFieldOfElement(a,i-1);if(!n){var f=a.getParent();i=f.indexOfFormElement(a);n=this.findLastFieldOfPrevElement(f,i-1);if(!n){t=f.getParent();i=t.indexOfFormContainer(f);n=this.findLastFieldOfLastElementInPrevContainer(t,i-1)}}}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){t=a.getParent();i=t.indexOfFormContainer(a);n=this.findLastFieldOfLastElementInPrevContainer(t,i-1)}if(n){n.focus();e.preventDefault()}};l.prototype.tabBack=function(e){var t;var r=e.srcControl;var i=0;var n;var o=this.findElement(r);var a=o.element;r=o.rootControl;if(a&&a.isA("sap.ui.layout.form.FormElement")){if(r==a.getLabelControl()){i=0}else{i=a.indexOfField(r)}n=this.findPrevFieldOfElement(a,i-1,true);if(!n){var f=a.getParent();i=f.indexOfFormElement(a);n=this.findLastFieldOfPrevElement(f,i-1,true);if(!n){t=f.getParent();i=t.indexOfFormContainer(f);if(f.getExpandable()){n=f._oExpandButton.getFocusDomRef()}if(!n){n=this.findLastFieldOfLastElementInPrevContainer(t,i-1,true)}}}}else if(a&&a.isA("sap.ui.layout.form.FormContainer")){t=a.getParent();i=t.indexOfFormContainer(a);n=this.findLastFieldOfLastElementInPrevContainer(t,i-1,true)}if(n){n.focus();e.preventDefault()}};l.prototype.findPrevFieldOfElement=function(e,t,r){var i=e.getFieldsForRendering();var n;for(var o=t;o>=0;o--){var a=i[o];var f=this._getDomRef(a);if(r==true){if((!a.getEditable||a.getEditable())&&(!a.getEnabled||a.getEnabled())&&f){n=f;break}}else{if((!a.getEnabled||a.getEnabled())&&f){n=f;break}}}return n};l.prototype.findLastFieldOfPrevElement=function(e,t,r){var i=e.getFormElements();var n;var o=t;while(!n&&o>=0){var a=i[o];var f=a.getFieldsForRendering().length;if(r==true){n=this.findPrevFieldOfElement(a,f-1,true)}else{n=this.findPrevFieldOfElement(a,f-1)}o--}return n};l.prototype.findLastFieldOfLastElementInPrevContainer=function(e,t,r){var i=e.getFormContainers();var n;var o=t;while(!n&&o>=0){var a=i[o];if(a.getExpandable()&&!a.getExpanded()&&r){n=a._oExpandButton.getFocusDomRef();if(n){break}}if(!a.getExpandable()||a.getExpanded()){var f=a.getFormElements().length;if(r==true){n=this.findLastFieldOfPrevElement(a,f-1,true)}else{n=this.findLastFieldOfPrevElement(a,f-1,0)}}o--}return n};l.prototype.findFieldBelow=function(e,t){var r=t.getParent();var i=r.indexOfFormElement(t);var n=this.findFirstFieldOfNextElement(r,i+1);if(!n){var o=r.getParent();i=o.indexOfFormContainer(r);n=this.findFirstFieldOfFirstElementInNextContainer(o,i+1)}return n};l.prototype.findFieldAbove=function(e,t){var r=t.getParent();var i=r.indexOfFormElement(t);var n=r.getFormElements();var o;var a=i-1;while(!o&&a>=0){var f=n[a];o=this.findPrevFieldOfElement(f,0);a--}if(!o){var l=r.getParent();i=l.indexOfFormContainer(r);o=this.findLastFieldOfLastElementInPrevContainer(l,i-1)}return o};l.prototype._getDomRef=function(e){var t=e.getFocusDomRef();if(!o(t).is(":sapFocusable")){t=undefined}return t};l.prototype.getContainerRenderedDomRef=function(e){if(this.getDomRef()){return e.getDomRef()}else{return null}};l.prototype.getElementRenderedDomRef=function(e){if(this.getDomRef()){return e.getDomRef()}else{return null}};l.prototype.getLayoufunction(){};l.prototype.getLayoutDataForSemanticField=function(e,t,r){};l.prototype.loadTitleSizes=function(){var e=n.get({name:["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize","sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormSubTitleSize"],callback:this.applyTitleSizes.bind(this)});if(e&&e.hasOwnProperty("sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize")){this.applyTitleSizes(e,true)}};l.prototype.applyTitleSizes=function(e,t){if(e&&(this._sFormTitleSize!==e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize"]||this._sFormSubTitleSize!==e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormSubTitleSize"])){this._sFormTitleSize=e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize"];this._sFormSubTitleSize=e["sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormSubTitleSize"];if(!t){this.invalidate()}}};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/ResponsiveGridLayout",["sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ui/layout/library","sap/ui/layout/Grid","sap/ui/layout/GridData","./Form","./FormContainer","./FormElement","./FormLayout","./ResponsiveGridLayoutRenderer","sap/ui/thirdparty/jquery"],function(e,t,a,i,n,r,s,o,l,u,f){"use strict";var p=l.extend("sap.ui.layout.form.ResponsiveGridLayout",{metadata:{library:"sap.ui.layout",properties:{labelSpanXL:{type:"int",group:"Misc",defaultValue:-1},labelSpanL:{type:"int",group:"Misc",defaultValue:4},labelSpanM:{type:"int",group:"Misc",defaultValue:2},labelSpanS:{type:"int",group:"Misc",defaultValue:12},adjustLabelSpan:{type:"boolean",group:"Misc",defaultValue:true},emptySpanXL:{type:"int",group:"Misc",defaultValue:-1},emptySpanL:{type:"int",group:"Misc",defaultValue:0},emptySpanM:{type:"int",group:"Misc",defaultValue:0},emptySpanS:{type:"int",group:"Misc",defaultValue:0},columnsXL:{type:"int",group:"Misc",defaultValue:-1},columnsL:{type:"int",group:"Misc",defaultValue:2},columnsM:{type:"int",group:"Misc",defaultValue:1},singleContainerFullSize:{type:"boolean",group:"Misc",defaultValue:true},breakpointXL:{type:"int",group:"Misc",defaultValue:1440},breakpointL:{type:"int",group:"Misc",defaultValue:1024},breakpointM:{type:"int",group:"Misc",defaultValue:600}}},renderer:u});var d=e.extend("sap.ui.layout.form.ResponsiveGridLayoutPanel",{metadata:{library:"sap.ui.layout",aggregations:{content:{type:"sap.ui.layout.Grid",multiple:false}},associations:{container:{type:"sap.ui.layout.form.FormContainer",multiple:false},layout:{type:"sap.ui.layout.form.ResponsiveGridLayout",multiple:false}}},getLayoutData:function(){var e=sap.ui.getCore().byId(this.getContainer());var t=sap.ui.getCore().byId(this.getLayout());var a;if(t&&e){a=t.getLayoutDataForElement(e,"sap.ui.layout.GridData")}if(a){return a}else{return this.getAggregation("layoutData")}},getCustomData:function(){var e=sap.ui.getCore().byId(this.getContainer());if(e){return e.getCustomData()}},refreshExpanded:function(){var e=sap.ui.getCore().byId(this.getContainer());if(e){if(e.getExpanded()){this.$().removeClass("sapUiRGLContainerColl")}else{this.$().addClass("sapUiRGLContainerColl")}}},renderer:{apiVersion:2,render:function(e,t){var a=sap.ui.getCore().byId(t.getContainer());var i=sap.ui.getCore().byId(t.getLayout());var n=t.getContent();var r=a.getExpandable();var s=a.getTooltip_AsString();var o=a.getToolbar();var l=a.getTitle();e.openStart("div",t);e.class("sapUiRGLContainer");if(r&&!a.getExpanded()){e.class("sapUiRGLContainerColl")}if(o){e.class("sapUiFormContainerToolbar")}else if(l){e.class("sapUiFormContainerTitle")}if(s){e.attr("title",s)}i.getRenderer().writeAccessibilityStateContainer(e,a);e.openEnd();i.getRenderer().renderHeader(e,o,l,a._oExpandButton,r,i._sFormSubTitleSize,a.getId());if(n){e.openStart("div");e.class("sapUiRGLContainerCont");e.openEnd();e.renderControl(n);e.close("div")}e.close("div")}}});p.prototype.init=function(){l.prototype.init.apply(this,arguments);this.mContainers={};this.oDummyLayoutData=new n(this.getId()+"--Dummy")};p.prototype.exit=function(){for(var e in this.mContainers){_.call(this,e,true)}if(this._mainGrid){this._mainGrid.destroy();delete this._mainGrid}this.oDummyLayoutData.destroy();this.oDummyLayoutData=undefined};p.prototype.onBeforeRendering=function(e){l.prototype.onBeforeRendering.apply(this,arguments);var t=this.getParent();if(!t||!(t instanceof r)){return}t._bNoInvalidate=true;g.call(this,t);c.call(this,t);t._bNoInvalidate=false};p.prototype.onAfterRendering=function(e){if(this._mainGrid&&this._mainGrid.__bIsUsed){for(var a in this.mContainers){if(this.mContainers[a][1]._sContainerResizeListener){t.deregister(this.mContainers[a][1]._sContainerResizeListener);this.mContainers[a][1]._sContainerResizeListener=null}}}};p.prototype.toggleContainerExpanded=function(e){var t=e.getId();if(this.mContainers[t]&&this.mContainers[t][0]){var a=this.mContainers[t][0];a.refreshExpanded()}};p.prototype.onLayoutDataChange=function(e){var t=e.srcControl;if(t instanceof s){if(this._mainGrid){this._mainGrid.onLayoutDataChange(e);this.invalidate()}}else if(!(t instanceof o)){var a=t.getParent();if(a instanceof o){var i=a.getParent();var n=i.getId();if(this.mContainers[n]&&this.mContainers[n][1]){this.mContainers[n][1].onLayoutDataChange(e)}}}};p.prototype.onsapup=function(e){this.onsapleft(e)};p.prototype.onsapdown=function(e){this.onsapright(e)};p.prototype.getContainerRenderedDomRef=function(e){if(this.getDomRef()){var t=e.getId();if(this.mContainers[t]){if(this.mContainers[t][0]){var a=this.mContainers[t][0];return a.getDomRef()}else if(this.mContainers[t][1]){var i=this.mContainers[t][1];return i.getDomRef()}}}return null};p.prototype.getElementRenderedDomRef=function(e){return null};function g(e){var t=e.getVisibleFormContainers();var a=t.length;var i=0;var n;var r;var s;var o;var l=0;for(l=0;l<a;l++){s=t[l];s._checkProperties();if(s.isVisible()){i++;o=s.getId();n=undefined;r=undefined;var u=t[l+1];if(this.mContainers[o]&&this.mContainers[o][1]){r=this.mContainers[o][1]}else{r=h.call(this,s)}var f=s.getTitle();var p=s.getToolbar();if(p||f||s.getExpandable()){if(this.mContainers[o]&&this.mContainers[o][0]){n=this.mContainers[o][0]}else{n=m.call(this,s,r);v(r,true)}C(n,s,i,u,a)}else{if(this.mContainers[o]&&this.mContainers[o][0]){y(this.mContainers[o][0])}v(r,false);C(r,s,i,u,a)}this.mContainers[o]=[n,r]}}var d=Object.keys(this.mContainers).length;if(a<d){for(o in this.mContainers){var g=false;for(l=0;l<a;l++){s=t[l];if(o==s.getId()){g=true;break}}if(!g){_.call(this,o)}}}}function m(e,t){var a=e.getId();var i=new d(a+"---Panel",{container:e,layout:this,content:t});return i}function y(e,t){e.setLayout(null);e.setContainer(null);if(!t||!e.getParent()){e.setContent(null);e.destroy()}}function h(e){var t=e.getId()+"--Grid";var a=new i(t,{vSpacing:0,hSpacing:0,containerQuery:true});a.__myParentLayout=this;a.__myParentContainerId=e.getId();a.addStyleClass("sapUiFormResGridCont").addStyleClass("sapUiRespGridOverflowHidden");a.getContent=function(){var e=sap.ui.getCore().byId(this.__myParentContainerId);if(e){var t=[];var a=e.getVisibleFormElements();var i;var n;for(var r=0;r<a.length;r++){var s=a[r];n=s.getLabelControl();if(n){t.push(n)}i=s.getFieldsForRendering();for(var o=0;o<i.length;o++){t.push(i[o])}}return t}else{return false}};a.getAriaLabelledBy=function(){var e=sap.ui.getCore().byId(this.__myParentContainerId);if(e&&!e.getToolbar()&&!e.getTitle()&&!e.getExpandable()){return e.getAriaLabelledBy()}return[]};var n={labelSpan:0,span:0,firstField:false,defaultFields:0,row:0,myRow:false,freeFields:0,finished:false};var r={id:"XL",getEffectiveSpan:function(e){var t=e._getEffectiveSpanXLarge();if(!t){t=e._getEffectiveSpanLarge()}return t},getEmptySpan:function(e){var t=e.getEmptySpanXL();if(t<0){t=e.getEmptySpanL()}return t},getLabelSpan:function(e){return e.getLabelSpanXL()},setIndent:function(e,t){e.setIndentXL(t)},setLinebreak:function(e,t){e.setLinebreakXL(t)}};f.extend(r,n);var s={id:"L",getEffectiveSpan:function(e){return e._getEffectiveSpanLarge()},getEmptySpan:function(e){return e.getEmptySpanL()},getLabelSpan:function(e){return e.getLabelSpanL()},setIndent:function(e,t){e.setIndentL(t)},setLinebreak:function(e,t){e.setLinebreakL(t)}};f.extend(s,n);var o={id:"M",getEffectiveSpan:function(e){return e._getEffectiveSpanMedium()},getEmptySpan:function(e){return e.getEmptySpanM()},getLabelSpan:function(e){return e.getLabelSpanM()},setIndent:function(e,t){e.setIndentM(t)},setLinebreak:function(e,t){e.setLinebreakM(t)}};f.extend(o,n);var l={id:"S",getEffectiveSpan:function(e){return e._getEffectiveSpanSmall()},getEmptySpan:function(e){return e.getEmptySpanS()},getLabelSpan:function(e){return ion(e,t){e.setIndentS(t)},setLinebreak:function(e,t){e.setLinebreakS(t)}};f.extend(l,n);var u=[r,s,o,l];a._getLayoutDataForControl=function(e){var t=this.__myParentLayout;var a=t.getLayoutDataForElement(e,"sap.ui.layout.GridData");var i=e.getParent();var p=i.getLabelControl();if(a){if(p==e){a._setStylesInternal("sapUiFormElementLbl")}return a}else{var d=sap.ui.getCore().byId(this.__myParentContainerId);var g=t.getLayoutDataForElement(d,"sap.ui.layout.GridData");var m=d.getParent();var y;var h=0;for(h=0;h<u.length;h++){y=u[h];f.extend(y,n);y.labelSpan=y.getLabelSpan(t)}if(t.getAdjustLabelSpan()){if(m.getVisibleFormContainers().length>=1&&t.getColumnsM()>1){o.labelSpan=t.getLabelSpanL()}if(g){if(g._getEffectiveSpanLarge()==12){s.labelSpan=t.getLabelSpanM();o.labelSpan=t.getLabelSpanM()}}if(m.getVisibleFormContainers().length==1||t.getColumnsL()==1){s.labelSpan=t.getLabelSpanM();o.labelSpan=t.getLabelSpanM()}}if(r.labelSpan<0){r.labelSpan=s.labelSpan}if(p==e){t.oDummyLayoutData.setSpan("XL"+r.labelSpan+" L"+s.labelSpan+" M"+o.labelSpan+" S"+l.labelSpan);t.oDummyLayoutData.setLinebreak(true);t.oDummyLayoutData.setIndentXL(0).setIndentL(0).setIndentM(0).setIndentS(0);t.oDummyLayoutData._setStylesInternal("sapUiFormElementLbl");return t.oDummyLayoutData}else{var L;if(p){L=t.getLayoutDataForElement(p,"sap.ui.layout.GridData")}var v=i.getFieldsForRendering();var C=v.length;var _;var c;var b=1;var S=false;var D;var F=0;for(h=0;h<u.length;h++){y=u[h];y.span=12-y.getEmptySpan(t);if(p){if(L){D=y.getEffectiveSpan(L);if(D){y.labelSpan=D}}if(y.labelSpan<12){y.span=y.span-y.labelSpan}}y.spanFields=y.span}for(F=0;F<C;F++){_=v[F];if(_!=e){c=t.getLayoutDataForElement(_,"sap.ui.layout.GridData");if(c){for(h=0;h<u.length;h++){y=u[h];D=y.getEffectiveSpan(c);if(D&&D<y.span){y.span=y.span-D}}}else{b++}}else{if(b==1){S=true}}}var G=[];for(h=0;h<u.length;h++){y=u[h];y.firstField=S;y.defaultFields=b;if(y.span<b){y.defaultFields=0;y.row=0;y.myRow=false;y.freeFields=y.spanFields;y.span=y.spanFields;y.finished=false;G.push(y)}}if(G.length>0){for(F=0;F<C;F++){_=v[F];c=undefined;if(_!=e){c=t.getLayoutDataForElement(_,"sap.ui.layout.GridData")}for(h=0;h<G.length;h++){y=G[h];if(y.finished){continue}if(c){D=y.getEffectiveSpan(c);y.span=y.span-D}else{D=1}if(y.freeFields>=D){y.freeFields=y.freeFields-D;if(!c){y.defaultFields++}}else{if(y.myRow){y.finished=true}else{y.freeFields=y.spanFields-D;y.row++;if(c){y.defaultFields=0;y.span=y.spanFields-D}else{y.defaultFields=1;y.span=y.spanFields}if(_==e){y.firstField=true}}}if(_==e){y.myRow=true}}}}var I=0;var R="";var M;for(h=0;h<u.length;h++){y=u[h];if(y.id!="S"||y.labelSpan<12){if(y.firstField){I=y.span-Math.floor(y.span/y.defaultFields)*y.defaultFields;M=Math.floor(y.span/y.defaultFields)+I}else{M=Math.floor(y.span/y.defaultFields)}}else{M=12}if(R){R=R+" "}R=R+y.id+M;y.setLinebreak(t.oDummyLayoutData,y.firstField&&y.row>0);y.setIndent(t.oDummyLayoutData,y.firstField&&y.row>0?y.labelSpan:0)}t.oDummyLayoutData.setSpan(R);t.oDummyLayoutData.setLinebreak(S&&!p);t.oDummyLayoutData._setStylesInternal(undefined);return t.oDummyLayoutData}}};a._onParentResizeOrig=a._onParentResize;a._onParentResize=function(){if(!this.getDomRef()){this._cleanup();return}if(!f(this.getDomRef()).is(":visible")){return}var e=this.__myParentLayout;if(!e._mainGrid||!e._mainGrid.__bIsUsed){var t=e.getParent().getVisibleFormContainers()[0];if(!t||!e.mContainers[t.getId()]||t.getId()!=this.__myParentContainerId){return}if(e.mContainers[this.__myParentContainerId][0]){var a=e.mContainers[this.__myParentContainerId][0].getDomRef();var i=a.clientWidth;if(i<=e.getBreakpointM()){this._toggleClass("Phone")}else if(i>e.getBreakpointM()&&i<=e.getBreakpointL()){this._toggleClass("Tablet")}else if(i>e.getBreakpointL()&&i<=e.getBreakpointXL()){this._toggleClass("Desktop")}else{this._toggleClass("LargeDesktop")}}else{this._setBreakPointTablet(e.getBreakpointM());this._setBreakPointDesktop(e.getBreakpointL());this._setBreakPointLargeDesktop(e.getBreakpointXL());this._onParentResizeOrig()}}else{var n=e._mainGrid.$();if(n.hasClass("sapUiRespGridMedia-Std-Phone")){this._toggleClass("Phone")}else if(n.hasClass("sapUiRespGridMedia-Std-Tablet")){this._toggleClass("Tablet")}else if(n.hasClass("sapUiRespGridMedia-Std-Desktop")){this._toggleClass("Desktop")}else{this._toggleClass("LargeDesktop")}}};a._getAccessibleRole=function(){var e=sap.ui.getCore().byId(this.__myParentContainerId);var t=this.__myParentLayout;if(t._mainGrid&&t._mainGrid.__bIsUsed&&!e.getToolbar()&&!e.getTitle()&&!e.getExpandable()&&e.getAriaLabelledBy().length>0){return"form"}};a.getUIArea=function(){var e=this.__myParentLayout;if(e){return e.getUIArea()}else{return null}};return a}function L(e,t){if(e.__myParentContainerId){e.__myParentContainerId=undefined}e.__myParentLayout=undefined;if(!t||!e.getParent()){e.destroy()}}function v(e,t){if(t){if(e.__originalGetLayoutData){e.getLayoutData=e.__originalGetLayoutData;delete e.__originalGetLayoutData}}else if(!e.__originalGetLayoutData){e.__originalGetLayoutData=e.getLayoutData;e.getLayoutData=function(){var e=this.__myParentLayout;var t=sap.ui.getCore().byId(this.__myParentContainerId);var a;if(t){a=e.getLayoutDataForElement(t,"sap.ui.layout.GridData")}if(a){return a}else{return this.getAggregation("layoutData")}}}}function C(e,t,a,i,r){var s;if(e instanceof d){s=sap.ui.getCore().byId(e.getLayout())}else{s=e.__myParentLayout}var o=s.getLayoutDataForElement(t,"sap.ui.layout.GridData");if(!o){var l=s.getColumnsM();var u=s.getColumnsL();var f=s.getColumnsXL();var p=a%u==1;var g=a%u==0;var m=a>u*(Math.ceil(r/u)-1);var y=a<=u;var h=a%l==1;var L=a%l==0;var v=a>l*(Math.ceil(r/l)-1);var C=a<=l;var _=false;var c=g;var b=m;var S=y;if(f>0){_=a%f==1;c=a%f==0;b=a>f*(Math.ceil(r/f)-1);S=a<=f}if(i){var D=s.getLayoutDataForElement(i,"sap.ui.layout.GridData");if(D&&(D.getLinebreak()||D.getLinebreakXL())){c=true;b=false}if(D&&(D.getLinebreak()||D.getLinebreakL())){g=true;m=false}if(D&&(D.getLinebreak()||D.getLinebreakM())){L=true;v=false}}var F="";if(c){F="sapUiFormResGridLastContXL"}if(g){if(F){F=F+" "}F=F+"sapUiFormResGridLastContL"}if(L){if(F){F=F+" "}F=F+"sapUiFormResGridLastContM"}if(b){if(F){F=F+" "}F=F+"sapUiFormResGridLastRowXL"}if(m){if(F){F=F+" "}F=F+"sapUiFormResGridLastRowL"}if(v){if(F){F=F+" "}F=F+"sapUiFormResGridLastRowM"}if(S){if(F){F=F+" "}F=F+"sapUiFormResGridFirstRowXL"}if(y){if(F){F=F+" "}F=F+"sapUiFormResGridFirstRowL"}if(C){if(F){F=F+" "}F=F+"sapUiFormResGridFirstRowM"}o=e.getLayoutData();if(!o){o=new n(e.getId()+"--LD",{linebreakL:p,linebreakM:h});e.setLayoutData(o)}else{o.setLinebreakL(p);o.setLinebreakM(h)}if(f>0){o.setLinebreakXL(_)}o._setStylesInternal(F)}}function _(e,t){var a=this.mContainers[e];var i=a[1];if(i){L(i,t)}var n=a[0];if(n){y(n,t)}delete this.mContainers[e]}function c(e){var t=e.getVisibleFormContainers();var a;var n;var r=t.length;var s=0;var o=0;var l=0;if(r>1||!this.getSingleContainerFullSize()){var u=Math.floor(12/this.getColumnsM());var f=Math.floor(12/this.getColumnsL());var p;var d="";var g=this.getColumnsXL();if(g>=0){p=Math.floor(12/g);d=d+"XL"+p+" "}d=d+"L"+f+" M"+u+" S12";if(!this._mainGrid){this._mainGrid=new i(e.getId()+"--Grid",{defaultSpan:d,hSpacing:0,vSpacing:0,containerQuery:true}).setParent(this);this._mainGrid.addStyleClass("sapUiFormResGridMain").addStyleClass("sapUiRespGridOverflowHidden");this._mainGrid._onParentResizeOrig=this._mainGrid._onParentResize;this._mainGrid._onParentResize=function(){this._onParentResizeOrig();var e=this.getParent();for(var t in e.mContainers){e.mContainers[t][1]._onParentResize()}}}else{this._mainGrid.setDefaultSpan(d);var m=this._mainGrid.getContent();s=m.length;var y=false;for(o=0;o<s;o++){var h=m[o];a=undefined;if(h.getContainer){a=sap.ui.getCore().byId(h.getContainer())}else{a=sap.ui.getCore().byId(h.__myParentContainerId)}if(a&&a.isVisible()){var L=t[l];if(a!=L){y=true;break}var v=this.mContainers[a.getId()];if(v[0]&&v[0]!=h){y=true;break}if(!v[0]&&v[1]&&v[1]!=h){y=true;break}l++}else{this._mainGrid.removeContent(h)}}if(y){this._mainGrid.removeAllContent();s=0}}this._mainGrid._setBreakPointTablet(this.getBreakpointM());this._mainGrid._setBreakPointDesktop(this.getBreakpointL());this._mainGrid._setBreakPointLargeDesktop(this.getBreakpointXL());this._mainGrid.__bIsUsed=true;if(s<r){var C=0;if(s>0){C=s--}for(o=C;o<r;o++){a=t[o];n=a.getId();if(this.mContainers[n]){if(this.mContainers[n][0]){this._mainGrid.addContent(this.mContainers[n][0])}else if(this.mContainers[n][1]){this._mainGrid.addContent(this.mContainers[n][1])}}}}}else{if(this._mainGrid){this._mainGrid.__bIsUsed=false}for(o=0;o<r;o++){a=t[o];n=a.getId();if(this.mContainers[n]){if(this.mContainers[n][0]){if(this.mContainers[n][0].getParent()!==this){this.addDependent(this.mContainers[n][0])}}else if(this.mContainers[n][1]){if(this.mContainers[n][1].getParent()!==this){this.addDependent(this.mContainers[n][1])}}}}}}p.prototype.getLayoutDataForDelimiter=function(){return new n({spanS:1,spanM:1,spanL:1,spanXL:1})};p.prototype.getLayoutDataForSemanticField=function(e,t,a){var i=8-(e-1);i=Math.floor(i/e);if(e===t){i=i+8-(e-1+e*i)}if(a){if(a.isA("sap.ui.layout.GridData")){a.setSpanS(11).setSpanM(i).setSpanL(i).setSpanXL(i);return a}else{a.destroy()}}return new n({spanS:11,spanM:i,spanL:i,spanXL:i})};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/ResponsiveLayout",["sap/ui/core/Control","sap/ui/layout/library","sap/ui/layout/ResponsiveFlowLayout","sap/ui/layout/ResponsiveFlowLayoutData","./Form","./FormContainer","./FormElement","./FormLayout","./ResponsiveLayoutRenderer"],function(t,e,a,n,i,r,o,s,l){"use strict";var u=s.extend("sap.ui.layout.form.ResponsiveLayout",{metadata:{library:"sap.ui.layout"},renderer:l});var f=t.extend("sap.ui.layout.form.ResponsiveLayoutPanel",{metadata:{library:"sap.ui.layout",aggregations:{content:{type:"sap.ui.layout.ResponsiveFlowLayout",multiple:false}},associations:{container:{type:"sap.ui.layout.form.FormContainer",multiple:false},layout:{type:"sap.ui.layout.form.ResponsiveLayout",multiple:false}}},getLayoutData:function(){var t=sap.ui.getCore().byId(this.getContainer());var e=sap.ui.getCore().byId(this.getLayout());var a;if(e&&t){a=e.getLayoutDataForElement(t,"sap.ui.layout.ResponsiveFlowLayoutData")}return a},getCustomData:function(){var t=sap.ui.getCore().byId(this.getContainer());if(t){return t.getCustomData()}},refreshExpanded:function(){var t=sap.ui.getCore().byId(this.getContainer());if(t){if(t.getExpanded()){this.$().removeClass("sapUiRLContainerColl")}else{this.$().addClass("sapUiRLContainerColl")}}},renderer:{apiVersion:2,render:function(t,e){var a=sap.ui.getCore().byId(e.getContainer());var n=sap.ui.getCore().byId(e.getLayout());var i=e.getContent();if(!a||!n){return}var r=a.getExpandable();var o=a.getTooltip_AsString();var s=a.getToolbar();var l=a.getTitle();t.openStart("div",e);t.class("sapUiRLContainer");if(r&&!a.getExpanded()){t.class("sapUiRLContainerColl")}if(s){t.class("sapUiFormContainerToolbar")}else if(l){t.class("sapUiFormContainerTitle")}if(o){t.attr("title",o)}n.getRenderer().writeAccessibilityStateContainer(t,a);t.openEnd();n.getRenderer().renderHeader(t,s,l,a._oExpandButton,r,n._sFormSubTitleSize,a.getId());if(i){t.openStart("div");t.class("sapUiRLContainerCont");t.openEnd();t.renderControl(i);t.close("div")}t.close("div")}}});u.prototype.init=function(){s.prototype.init.apply(this,arguments);this.mContainers={};this._defaultLayoutData=new n({margin:false})};u.prototype.exit=function(){for(var t in this.mContainers){L.call(this,t)}if(this._mainRFLayout){this._mainRFLayout.destroy();delete this._mainRFLayout}this._defaultLayoutData.destroy();delete this._defaultLayoutData};u.prototype.onBeforeRendering=function(t){s.prototype.onBeforeRendering.apply(this,arguments);var e=this.getParent();if(!e||!(e instanceof i)){return}e._bNoInvalidate=true;d.call(this,e);c.call(this,e);e._bNoInvalidate=false};u.prototype.toggleContainerExpanded=function(t){var e=t.getId();if(this.mContainers[e]&&this.mContainers[e][0]){var a=this.mContainers[e][0];a.refreshExpanded()}};u.prototype.onLayoutDataChange=function(t){var e=t.srcControl;var a;var n;var i;if(e instanceof r){if(this._mainRFLayout){this._mainRFLayout.onLayoutDataChange(t)}}else if(e instanceof o){n=e.getParent().getId();if(this.mContainers[n]&&this.mContainers[n][1]){this.mContainers[n][1].onLayoutDataChange(t)}}else{var s=e.getParent();if(s instanceof o){a=s.getParent();n=a.getId();i=s.getId();if(this.mContainers[n]&&this.mContainers[n][2]&&this.mContainers[n][2][i]){if(this.mContainers[n][2][i][1]){var l=s.getFieldsForRendering();h.call(this,this.mContainers[n][2][i][1],l)}this.mContainers[n][2][i][0].onLayoutDataChange(t)}}}};this.onsapleft(t)};u.prototype.onsapdown=function(t){this.onsapright(t)};u.prototype.getContainerRenderedDomRef=function(t){if(this.getDomRef()){var e=t.getId();if(this.mContainers[e]){if(this.mContainers[e][0]){var a=this.mContainers[e][0];return a.getDomRef()}else if(this.mContainers[e][1]){var n=this.mContainers[e][1];return n.getDomRef()}}}return null};u.prototype.getElementRenderedDomRef=function(t){if(this.getDomRef()){var e=t.getParent();var a=t.getId();var n=e.getId();if(this.mContainers[n]){if(this.mContainers[n][2]){var i=this.mContainers[n][2];if(i[a]){var r=i[a][0];return r.getDomRef()}}}}return null};function d(t){var e=t.getVisibleFormContainers();var a=e.length;var n;var i;var r;var o;var s=0;for(s=0;s<a;s++){n=e[s];n._checkProperties();i=n.getId();r=undefined;o=undefined;if(this.mContainers[i]&&this.mContainers[i][1]){o=this.mContainers[i][1]}else{o=C.call(this,n,undefined)}var l=n.getTitle();var u=n.getToolbar();if(u||l||n.getExpandable()){if(this.mContainers[i]&&this.mContainers[i][0]){r=this.mContainers[i][0]}else{r=y.call(this,n,o);v(o,true)}o.removeStyleClass("sapUiRLContainer")}else{if(this.mContainers[i]&&this.mContainers[i][0]){g(this.mContainers[i][0]);v(o,false)}o.addStyleClass("sapUiRLContainer")}var f=m.call(this,n,o);this.mContainers[i]=[r,o,f]}var d=Object.keys(this.mContainers).length;if(a<d){for(i in this.mContainers){var h=false;for(s=0;s<a;s++){n=e[s];if(i==n.getId()){h=true;break}}if(!h){L.call(this,i)}}}}function y(t,e){var a=t.getId();var n=new f(a+"--Panel",{container:t,layout:this,content:e});return n}function g(t){t.setContent(null);t.setLayout(null);t.setContainer(null);t.destroy()}function m(t,e){var a=t.getId();var n=t.getVisibleFormElements();var i=n.length;var r={};if(this.mContainers[a]&&this.mContainers[a][2]){r=this.mContainers[a][2]}var o;var s;var l=-1;var u;var f;var d=0;for(d=0;d<i;d++){u=n[d];f=u.getId();_.call(this,t,u,r,e,d);if(r[f]){o=r[f][0];l=e.indexOfContent(o);if(l!=i){e.removeContent(o);e.insertContent(o,i);l=i}}else{o=C.call(this,t,u);o.addStyleClass("sapUiRLElement");if(u.getLabel()){o.addStyleClass("sapUiRLElementWithLabel")}r[f]=[o,undefined];l++;e.insertContent(o,l)}var y=u.getFieldsForRendering();if(u.getLabel()&&y.length>1){if(r[f][1]){s=r[f][1]}else{s=C.call(this,t,u,true);s.addStyleClass("sapUiRLElementFields");r[f][1]=s}h.call(this,s,y)}else{if(r[f][1]){s=r[f][1];p(s);r[f][1]=undefined}}}var g=Object.keys(r).length;if(i<g){for(f in r){var m=false;for(d=0;d<i;d++){u=n[d];if(f==u.getId()){m=true;break}}if(!m){if(r[f][1]){s=r[f][1];p(s)}o=r[f][0];e.removeContent(o);p(o);delete r[f]}}}return r}function C(t,e,i){var r;if(e&&!i){r=e.getId()+"--RFLayout"}else if(e&&i){r=e.getId()+"--content--RFLayout"}else if(t){r=t.getId()+"--RFLayout"}else{return false}var o=new a(r);o.__myParentLayout=this;o.__myParentContainerId=t.getId();if(e){o.__myParentElementId=e.getId();if(!i){o.getContent=function(){var t=sap.ui.getCore().byId(this.__myParentElementId);if(t){var e=[];var a=t.getLabelControl();var n=t.getFieldsForRendering();if(!a||n.length<=1){e=n;if(a){e.unshift(a)}}else{var i=this.__myParentLayout;var r=this.__myParentContainerId;var o=t.getId();if(a){e.push(a)}if(i.mContainers[r]&&i.mContainers[r][2]&&i.mContainers[r][2][o]&&i.mContainers[r][2][o][1]){e.push(i.mContainers[r][2][o][1])}}return e}else{return false}};o._addContentClass=function(t,e){if(e==0){var a=sap.ui.getCore().byId(this.__myParentElementId);if(a){var n=a.getLabelControl();if(t==n){return"sapUiFormElementLbl"}}}return null}}else{o.getContent=function(){var t=sap.ui.getCore().byId(this.__myParentElementId);if(t){return t.getFieldsForRendering()}else{return false}}}}else if(t){o._getAccessibleRole=function(){var t=sap.ui.getCore().byId(this.__myParentContainerId);var e=this.__myParentLayout;if(e._mainRFLayout&&!t.getToolbar()&&!t.getTitle()&&!t.getExpandable()&&t.getAriaLabelledBy().length>0){return"form"}};o.getAriaLabelledBy=function(){var t=sap.ui.getCore().byId(this.__myParentContainerId);if(t&&!t.getToolbar()&&!t.getTitle()&&!t.getExpandable()){return t.getAriaLabelledBy()}return[]}}if(e&&!i||!e&&!t.getToolbar()&&!t.getTitle()&&!t.getExpandable()){v(o,false)}else{o.setLayoutData(new n({margin:false}))}return o}function v(t,e){if(e){if(t.__originalGetLayoutData){t.getLayoutData=t.__originalGetLayoutData;delete t.__originalGetLayoutData}}else if(!t.__originalGetLayoutData){t.__originalGetLayoutData=t.getLayoutData;t.getLayoutData=function(){var t=this.__myParentLayout;var e=sap.ui.getCore().byId(this.__myParentContainerId);var a=sap.ui.getCore().byId(this.__myParentElementId);var n;if(a){n=t.getLayoutDataForElement(a,"sap.ui.layout.ResponsiveFlowLayoutData")}else if(e){n=t.getLayoutDataForElement(e,"sap.ui.layout.ResponsiveFlowLayoutData")}if(n){return n}else if(a){return t._defaultLayoutData}}}}function h(t,e){var a;var i=0;for(var r=0;r<e.length;r++){var o=e[r];a=this.getLayoutDataForElement(o,"sap.ui.layout.ResponsiveFlowLayoutData");if(a){i=i+a.getWeight()}else{i++}}a=t.getLayoutData();if(a){a.setWeight(i)}else{t.setLayoutData(new n({weight:i}))}}function p(t){if(t.__myParentContainerId){t.__myParentContainerId=undefined}if(t.__myParentElementId){t.__myParentElementId=undefined}t.__myParentLayout=undefined;t.destroy()}function L(t){var e=this.mContainers[t];var a;var n=e[2];if(n){for(var i in n){if(n[i][1]){p(n[i][1])}a=n[i][0];p(a);delete n[i]}}a=e[1];if(a){a.removeAllContent();p(a)}var r=e[0];if(r){g(r)}delete this.mContainers[t]}function _(t,e,a,n,i){var r=e.getId();var o=r+"--RFLayout";var s=sap.ui.getCore().byId(o);if(!a[r]&&s){var l=s.__myParentContainerId;a[r]=this.mContainers[l][2][r];n.insertContent(s,i);s.__myParentContainerId=t.getId();if(a[r][1]){a[r][1].__myParentContainerId=t.getId()}delete this.mContainers[l][2][r]}}function c(t){var e=t.getVisibleFormContainers();var n;var i=e.length;var r=0;var o=0;var s=0;if(i>1){if(!this._mainRFLayout){this._mainRFLayout=new a(t.getId()+"--RFLayout").setParent(this)}else{var l=this._mainRFLayout.getContent();r=l.length;var u=false;for(o=0;o<r;o++){var f=l[o];n=undefined;if(f.getContainer){n=sap.ui.getCore().byId(f.getContainer())}else{n=sap.ui.getCore().byId(f.__myParentContainerId)}if(n&&n.isVisible()){var d=e[s];if(n!=d){u=true;break}var y=this.mContainers[n.getId()];if(y[0]&&y[0]!=f){u=true;break}if(!y[0]&&y[1]&&y[1]!=f){u=true;break}s++}else{this._mainRFLayout.removeContent(f)}}if(u){this._mainRFLayout.removeAllContent();r=0}}if(r<i){var g=0;if(r>0){g=r--}for(o=g;o<i;o++){n=e[o];var m=n.getId();if(this.mContainers[m]){if(this.mContainers[m][0]){this._mainRFLayout.addContent(this.mContainers[m][0])}else if(this.mContainers[m][1]){this._mainRFLayout.addContent(this.mContainers[m][1])}}}}}}return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/form/SimpleForm",["sap/ui/core/Control","sap/ui/base/ManagedObjectObserver","sap/ui/core/ResizeHandler","sap/ui/layout/library","./Form","./FormContainer","./FormElement","./FormLayout","./SimpleFormRenderer","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,a,i,s,r,n,o,l,u,h){"use strict";var g=i.BackgroundDesign;var f=i.form.SimpleFormLayout;var d;var y;var p;var m;var v;var c;var L;var b=e.extend("sap.ui.layout.form.SimpleForm",{metadata:{library:"sap.ui.layout",properties:{maxContainerCols:{type:"int",group:"Appearance",defaultValue:2},minWidth:{type:"int",group:"Appearance",defaultValue:-1},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:null},labelMinWidth:{type:"int",group:"Misc",defaultValue:192},layout:{type:"sap.ui.layout.form.SimpleFormLayout",group:"Misc",defaultValue:f.ResponsiveLayout},labelSpanXL:{type:"int",group:"Misc",defaultValue:-1},labelSpanL:{type:"int",group:"Misc",defaultValue:4},labelSpanM:{type:"int",group:"Misc",defaultValue:2},labelSpanS:{type:"int",group:"Misc",defaultValue:12},adjustLabelSpan:{type:"boolean",group:"Misc",defaultValue:true},emptySpanXL:{type:"int",group:"Misc",defaultValue:-1},emptySpanL:{type:"int",group:"Misc",defaultValue:0},emptySpanM:{type:"int",group:"Misc",defaultValue:0},emptySpanS:{type:"int",group:"Misc",defaultValue:0},columnsXL:{type:"int",group:"Misc",defaultValue:-1},columnsL:{type:"int",group:"Misc",defaultValue:2},columnsM:{type:"int",group:"Misc",defaultValue:1},singleContainerFullSize:{type:"boolean",group:"Misc",defaultValue:true},breakpointXL:{type:"int",group:"Misc",defaultValue:1440},breakpointL:{type:"int",group:"Misc",defaultValue:1024},breakpointM:{type:"int",group:"Misc",defaultValue:600},backgroundDesign:{type:"sap.ui.layout.BackgroundDesign",group:"Appearance",defaultValue:g.Translucent}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Element",multiple:true,singularName:"content"},form:{type:"sap.ui.layout.form.Form",multiple:false,visibility:"hidden"},title:{type:"sap.ui.core.Title",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},designtime:"sap/ui/layout/designtime/form/SimpleForm.designtime"},renderer:l});b.prototype.init=function(){this._iMaxWeight=8;this._iLabelWeight=3;this._iCurrentWidth=0;var e=new s(this.getId()+"--Form");e.getTitle=function(){return this.getParent().getTitle()};e._origInvalidate=e.invalidate;e.invalidate=function(e){if(this.bOutput){this._origInvalidate(e)}if(this._bIsBeingDestroyed){return}var t=this.getParent();if(t){t._formInvalidated(e)}};e.getAriaLabelledBy=function(){var e=this.getParent();if(e){return e.getAriaLabelledBy()}else{return null}};e._origOnLayoutDataChange=e.onLayoutDataChange;e.onLayoutDataChange=function(e){this._origOnLayoutDataChange(e);var t=this.getParent();if(t){t._onLayoutDataChange(e)}};this.setAggregation("form",e);this._aElements=null;this._aLayouts=[];this._changedFormContainers=[];this._changedFormElements=[];this._oObserver=new t(N.bind(this))};b.prototype.exit=function(){var e=this.getAggregation("form");e.invalidate=e._origInvalidate;j.call(this);for(var t=0;t<this._aLayouts.length;t++){var a=sap.ui.getCore().byId(this._aLayouts[t]);if(a&&a.destroy){a.destroy()}}this._aLayouts=[];this._aElements=null;this._changedFormContainers=[];this._changedFormElements=[];this._oObserver.disconnect();this._oObserver=undefined};b.prototype.onBeforeRendering=function(){j.call(this);var e=this.getAggregation("form");var t=this.getLayout();if(!this._bResponsiveLayoutRequested&&t===f.ResponsiveLayout||!this._bGridLayoutRequested&&t===f.GridLayout||!this._bResponsiveGridLayoutRequested&&t===f.ResponsiveGridLayout||!this._bColumnLayoutRequested&&t===f.ColumnLayout){var a=true;if(!e.getLayout()){a=_.call(this)}if(a){A.call(this)}}};b.prototype.onAfterRendering=function(){if(this.getLayout()==f.ResponsiveLayout){this._bChangedByMe=true;this.$().css("visibility","hidden");this._applyLinebreaks();this._sResizeListenerId=a.register(this.getDomRef(),h.proxy(this._resize,this));this._bChangedByMe=false}};b.prototype.setEditable=function(e){this._bChangedByMe=true;this.setProperty("editable",e,true);var t=this.getAggregation("form");t.setEditable(e);this._bChangedByMe=false;return this};b.prototype.setToolbar=function(e){this._bChangedByMe=true;var t=this.getAggregation("form");t.setToolbar(e);this._bChangedByMe=false;return this};b.prototype.getToolbar=function(){var e=this.getAggregation("form");return e.getToolbar()};b.prototype.destroyToolbar=function(){this._bChangedByMe=true;var e=this.getAggregation("form");e.destroyToolbar();this._bChangedByMe=false;return this};b.prototype.setLabelMinWidth=function(e){this.setProperty("labelMinWidth",e,true);if(this.getLayout()==f.ResponsiveLayout){this._bLayoutDataChangedByMe=true;var t=this.getContent();for(var a=0;a<t.length;a++){var i=t[a];if(i.isA("sap.ui.core.Label")){var s=T.call(this,i);if(s&&s.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&S.call(this,s)){s.setMinWidth(e)}}}this._bLayoutDataChangedByMe=false}return this};b.prototype.indexOfContent=function(e){var t=this._aElements;if(t){for(var a=0;a<t.length;a++){if(t[a]==e){return a}}}return-1};b.prototype.addContent=function(e){e=this.validateAggregation("content",e,true);if(this.indexOfContent(e)>=0){u.warning("SimpleForm.addContent: Content element '"+e+"' already assigned. Please remove before adding!",this);this.removeContent(e)}if(!this._aElements){this._aElements=[]}this._bChangedByMe=true;var t=this._aElements.length;var a;var i=this.getAggregation("form");var s;var o;var l;var h;var g=this.getLayout();if(e.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){s=W.call(this,e);i.addFormContainer(s);this._changedFormContainers.push(s)}else if(e.isA("sap.ui.core.Label")){if(t>0){a=this._aElements[t-1];l=a.getParent();if(l instanceof n){s=l.getParent()}else if(l instanceof r){s=l}}if(!s){s=W.call(this);i.addFormContainer(s);this._changedFormContainers.push(s)}o=O.call(this,s,e)}else{if(t>0){a=this._aElements[t-1];l=a.getParent();if(l instanceof n){s=l.getParent();o=l;h=T.call(this,e);if(h&&h.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&g===f.ResponsiveLayout&&!S.call(this,h)&&h.getLinebreak()){o=O.call(this,s)}}else if(l instanceof r){s=l;o=O.call(this,s)}}else{s=W.call(this);i.addFormContainer(s);this._changedFormContainers.push(s);o=O.call(this,s)}G.call(this,e,5,false,true);o.addField(e);H(this._changedFormElements,o)}this._aElements.push(e);this._oObserver.observe(e,{properties:["visible"]});this.invalidate();this._bChangedByMe=false;return this};b.prototype.insertContent=function(e,t){e=this.validateAggregation("content",e,true);if(this.indexOfContent(e)>=0){u.warning("SimpleForm.insertContent: Content element '"+e+"' already assigned. Please remove before insert!",this);this.removeContent(e)}if(!this._aElements){this._aElements=[]}var a=this._aElements.length;var i;if(t<0){i=0}else if(t>a){i=a}else{i=t}if(i!==t){u.warning("SimpleForm.insertContent: index '"+t+"' out of range [0,"+a+"], forced to "+i)}if(i==a){this.addContent(e);return this}this._bChangedByMe=true;var s=this._aElements[i];var r=this.getAggregation("form");var n;var o;var l;var h;var g;var d=0;var y;var p;var m;var v;var c=0;var L;var b;var _=this.getLayout();if(e.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){n=W.call(this,e);if(t==0&&!s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent().getParent();m=l.getFormElements();for(c=0;c<m.length;c++){n.addFormElement(m[c])}l.destroy();g=0}else if(s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent();g=r.indexOfFormContainer(l)}else{h=s.getParent();l=h.getParent();g=r.indexOfFormContainer(l)+1;d=l.indexOfFormElement(h);if(!s.isA("sap.ui.core.Label")){y=h.indexOfField(s);if(y>0||h.getLabel()){o=O.call(this,n);this._changedFormElements.push(o);H(this._changedFormElements,h);p=h.getFields();for(c=y;c<p.length;c++){L=p[c];o.addField(L)}d++}}m=l.getFormElements();for(c=d;c<m.length;c++){n.addFormElement(m[c])}}r.insertFormContainer(n,g);this._changedFormContainers.push(n)}else if(e.isA("sap.ui.core.Label")){if(s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent();g=r.indexOfFormContainer(l);v=r.getFormContainers();if(g==0){n=W.call(this);r.insertFormContainer(n,g);this._changedFormContainers.push(n)}else{n=v[g-1]}o=O.call(this,n,e)}else if(s.isA("sap.ui.core.Label")){l=s.getParent().getParent();d=l.indexOfFormElement(s.getParent());o=x.call(this,l,e,d)}else{h=s.getParent();l=h.getParent();d=l.indexOfFormElement(h)+1;y=h.indexOfField(s);p=h.getFields();o=x.call(this,l,e,d);for(c=y;c<p.length;c++){L=p[c];o.addField(L)}if(y==0&&!h.getLabel()){h.destroy()}else{H(this._changedFormElements,h)}}this._changedFormElements.push(o)}else{b=T.call(this,e);if(s.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){l=s.getParent();g=r.indexOfFormContainer(l);if(g==0){n=W.call(this);r.insertFormContainer(n,g);this._changedFormContainers.push(n)}else{v=r.getFormContainers();n=v[g-1]}m=n.getFormElements();if(m.length==0){o=O.call(this,n)}else if(b&&b.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&_===f.ResponsiveLayout&&!S.call(this,b)&&b.getLinebreak()){o=O.call(this,n)}else{o=m[m.length-1]}o.addField(e)}else if(s.isA("sap.ui.core.Label")){h=s.getParent();n=h.getParent();d=n.indexOfFormElement(h);if(d==0){o=x.call(this,n,null,0)}else if(b&&b.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&_===f.ResponsiveLayout&&!S.call(this,b)&&b.getLinebreak()){o=x.call(this,n,null,d)}else{m=n.getFormElements();o=m[d-1]}o.addField(e)}else{o=s.getParent();y=o.indexOfField(s);if(b&&b.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&_===f.ResponsiveLayout&&!S.call(this,b)&&b.getLinebreak()&&y>0){n=o.getParent();d=n.indexOfFormElement(o);H(this._changedFormElements,o);p=o.getFields();o=x.call(this,n,undefined,d+1);o.addField(e);for(c=y;c<p.length;c++){L=p[c];o.addField(L)}}else{o.insertField(e,y)}}H(this._changedFormElements,o);G.call(this,e,5,false,true)}this._aElements.splice(i,0,e);this._oObserver.observe(e,{properties:["visible"]});this.invalidate();this._bChangedByMe=false;return this};b.prototype.removeContent=function(e){var t=null;var a=-1;var i=0;if(this._aElements){if(typeof e=="string"){e=sap.ui.getCore().byId(e)}if(typeof e=="object"){for(i=0;i<this._aElements.length;i++){if(this._aElements[i]==e){e=i;break}}}if(typeof e=="number"){if(e<0||e>=this._aElements.length){u.warning("Element.removeAggregation called with invalid index: Items, "+e)}else{a=e;t=this._aElements[a]}}}if(t){this._bChangedByMe=true;var s=this.getAggregation("form");var r;var n;var o;var l;if(t.isA(["sap.ui.core.Title","sap.ui.core.Toolbar"])){r=t.getParent();r.setTitle(null);r.setToolbar(null);o=r.getFormElements();if(a>0||o.length>0){var h=s.indexOfFormContainer(r);var g;if(a===0){g=W.call(this);s.insertFormContainer(g,h)}else{g=s.getFormContainers()[h-1];if(o.length>0&&!o[0].getLabel()){var f=g.getFormElements();var d=f[f.length-1];l=o[0].getFields();for(i=0;i<l.length;i++){d.addField(l[i])}H(this._changedFormElements,d);r.removeFormElement(o[0]);o[0].destroy();o.splice(0,1)}}for(i=0;i<o.length;i++){g.addFormElement(o[i])}H(this._changedFormContainers,g);s.removeFormContainer(r);r.destroy()}else{s.removeFormContainer(r);r.destroy()}}else if(t.isA("sap.ui.core.Label")){n=t.getParent();r=n.getParent();n.setLabel(null);l=n.getFields();var y=r.indexOfFormElement(n);var p;if(y===0){if(l.length===0){r.removeFormElement(n);n.destroy();if(r.getFormElements().length==0&&!r.getTitle()&&!r.getToolbar()){s.removeFormContainer(r);r.destroy()}}else{p=x.call(this,r,null,0)}}else{o=r.getFormElements();p=o[y-1];H(this._changedFormElements,p)}for(i=0;i<l.length;i++){p.addField(l[i])}r.removeFormElement(n);n.destroy()}else{n=t.getParent();n.removeField(t);if(n.getFields().length==0&&!n.getLabel()){r=n.getParent();r.removeFormElement(n);n.destroy();if(r.getFormElements().length==0&&!r.getTitle()&&!r.getToolbar()){s.removeFormContainer(r);r.destroy()}}else{H(this._changedFormElements,n)}}this._aElements.splice(a,1);t.setParent(null);this._oObserver.unobserve(t);q.call(this,t);this.invalidate();this._bChangedByMe=false;return t}return null};b.prototype.removeAllContent=function(){var e=0;if(this._aElements){this._bChangedByMe=true;var t=this.getAggregation("form");var a=t.getFormContainers();for(e=0;e<a.length;e++){var i=a[e];i.setTitle(null);i.setToolbar(null);var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];n.setLabel(null);n.removeAllFields()}i.destroyFormElements()}t.destroyFormContainers();for(e=0;e<this._aElements.length;e++){var o=this._aElements[e];q.call(this,o);this._oObserver.unobserve(o)}var l=this._aElements;this._aElements=null;this.invalidate();this._bChangedByMe=false;return l}else{return[]}};b.prototype.destroyContent=function(){var e=this.removeAllContent();if(e){this._bChangedByMe=true;for(var t=0;t<e.length;t++){e[t].destroy()}this.invalidate();this._bChangedByMe=false}return this};b.prototype.getContent=function(){if(!this._aElements){this._aElements=this.getAggregation("content",[])}return this._aElements.slice()};b.prototype.setLayout=function(e){var t=this.getLayout();if(e!=t){D.call(this)}this.setProperty("layout",e);if(e!=t){var a=_.call(this);if(a){B.call(this)}}return this};b.prototype.clone=function(t){this._bChangedByMe=true;var a=e.prototype.clone.apply(this,arguments);var i=this.getContent();for(var s=0;s<i.length;s++){var r=i[s];var n=r.getLayoutData();this._oObserver.unobserve(r);var o=r.clone(t);this._oObserver.observe(r,{properties:["visible"]});if(n){if(n.isA("sap.ui.core.VariantLayoutData")){var l=n.getMultipleLayoutData();for(var u=0;u<l.length;u++){if(S.call(this,l[u])){a._aLayouts.push(o.getLayoutData().getMultipleLayoutData()[u].getId())}}}else if(S.call(this,n)){a._aLayouts.push(o.getLayoutData().getId())}}a.addContent(o)}this._bChangedByMe=false;return a};function _(){var e=this.getAggregation("form");if(e.getLayout()){this._bChangedByMe=true;e.destroyLayout();j.call(this);this._bChangedByMe=false}var t;switch(this.getLayout()){case f.ResponsiveLayout:if((!d||!y)&&!this._bResponsiveLayoutRequested){d=sap.ui.require("sap/ui/layout/form/ResponsiveLayout");y=sap.ui.require("sap/ui/layout/ResponsiveFlowLayoutData");if(!d||!y){sap.ui.require(["sap/ui/layout/form/ResponsiveLayout","sap/ui/layout/ResponsiveFlowLayoutData"],C.bind(this));this._bResponsiveLayoutRequested=true}}if(d&&y){t=new d(this.getId()+"--Layout")}break;case f.GridLayout:if((!m||!v||!c)&&!this._bGridLayoutRequested){m=sap.ui.require("sap/ui/layout/form/GridLayout");v=sap.ui.require("sap/ui/layout/form/GridContainerData");c=sap.ui.require("sap/ui/layout/form/GridElementData");if(!m||!v||!c){sap.ui.require(["sap/ui/layout/form/GridLayout","sap/ui/layout/form/GridContainerData","sap/ui/layout/form/GridElementData"],F.bind(this));this._bGridLayoutRequested=true}}if(m&&v&&c){t=new m(this.getId()+"--Layout")}break;case f.ResponsiveGridLayout:if(!p&&!this._bResponsiveGridLayoutRequested){p=sap.ui.require("sap/ui/layout/form/ResponsiveGridLayout");if(!p){sap.ui.require(["sap/ui/layout/form/ResponsiveGridLayout"],E.bind(this));this._bResponsiveGridLayoutRequested=true}}if(p){t=new p(this.getId()+"--Layout")}break;case f.ColumnLayout:if(!L&&!this._bColumnLayoutRequested){L=sap.ui.require("sap/ui/layout/form/ColumnLayout");if(!L){sap.ui.require(["sap/ui/layout/form/ColumnLayout"],M.bind(this));this._bColumnLayoutRequested=true}}if(L){t=new L(this.getId()+"--Layout")}break}if(t){this._bChangedByMe=true;e.setLayout(t);this._bChangedByMe=false;return true}return false}function C(e,t){d=e;y=t;this._bResponsiveLayoutRequested=false;if(this.getLayout()==f.ResponsiveLayout){R.call(this)}}function F(e,t,a){m=e;v=t;c=a;this._bGridLayoutRequested=false;if(this.getLayout()==f.GridLayout){R.call(this)}}function E(e){p=e;this._bResponsiveGridLayoutRequested=false;if(this.getLayout()==f.ResponsiveGridLayout){R.call(this)}}function M(e){L=e;this._bColumnLayoutRequested=false;if(this.getLayout()==f.ColumnLayout){R.call(this)}}function R(){if(!this._bIsBeingDestroyed){_.call(this);B.call(this);if(this.getDomRef()){A.call(this)}}}function D(){this._bChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();for(var a=0;a<t.length;a++){var i=t[a];H(this._changedFormContainers,i);if(i.getLayoutData()){i.destroyLayoutData()}var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];H(this._changedFormElements,n);if(n.getLayoutData()){n.destroyLayoutData()}var o=n.getLabel();if(o){q.call(this,o)}var l=n.getFields();for(var u=0;u<l.length;u++){var h=l[u];q.call(this,h)}}}this._bChangedByMe=false}function B(){this._bChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();for(var a=0;a<t.length;a++){var i=t[a];H(this._changedFormContainers,i);I.call(this,i);var s=i.getFormElements();for(var r=0;r<s.length;r++){var n=s[r];H(this._changedFormElements,n);P.call(this,n);var o=n.getLabel();if(o){G.call(this,o,this._iLabelWeight,false,true,this.getLabelMinWidth())}var l=n.getFields();for(var u=0;u<l.length;u++){var h=l[u];G.call(this,h,5,false,true)}}}this._bChangedByMe=false}function A(){this._bChangedByMe=true;this._changedFormContainers=[];var e=this.getLayout();var t=this.getAggregation("form").getLayout();t.setBackgroundDesign(this.getBackgroundDesign());switch(e){case f.ResponsiveLayout:this._applyLinebreaks();for(var a=0;a<this._changedFormElements.length;a++){var i=this._changedFormElements[a];X.call(this,i)}break;case f.GridLayout:z.call(this);break;case f.ResponsiveGridLayout:t.setLabelSpanXL(this.getLabelSpanXL());t.setLabelSpanL(this.getLabelSpanL());t.setLabelSpanM(this.getLabelSpanM());t.setLabelSpanS(this.getLabelSpanS());t.setAdjustLabelSpan(this.getAdjustLabelSpan());t.setEmptySpanXL(this.getEmptySpanXL());t.setEmptySpanL(this.getEmptySpanL());t.setEmptySpanM(this.getEmptySpanM());t.setEmptySpanS(this.getEmptySpanS());t.setColumnsXL(this.getColumnsXL());t.setColumnsL(this.getColumnsL());t.setColumnsM(this.getColumnsM());t.setSingleContainerFullSize(this.getSingleContainerFullSize());t.setBreakpointXL(this.getBreakpointXL());t.setBreakpointL(this.getBreakpointL());t.setBreakpointM(this.getBreakpointM());break;case f.ColumnLayout:t.setColumnsXL(this.getColumnsXL()>0?this.getColumnsXL():this.getColumnsL());t.setColumnsL(this.getColumnsL());t.setColumnsM(this.getColumnsM());t.setLabelCellsLarge(this.getLabelSpanL());t.setEmptyCellsLarge(this.getEmptySpanL());break}this._changedFormElements=[];this._bChangedByMe=false}function S(e){var t=e.getId(),a=" "+this._aLayouts.join(" ")+" ";return a.indexOf(" "+t+" ")>-1}function k(e,t,a,i){var s=new y({weight:e,linebreak:t===true,linebreakable:a===true});if(i){s.setMinWidth(i)}this._aLayouts.push(s.getId());return s}function T(e){var t;switch(this.getLayout()){case f.ResponsiveLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.ResponsiveFlowLayoutData");break;case f.GridLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.form.GridElementData");break;case f.ResponsiveGridLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.GridData");break;case f.ColumnLayout:t=o.prototype.getLayoutDataForElement(e,"sap.ui.layout.form.ColumnElementData");break}return t}function w(){var e=this.getLayout();if(e===f.ResponsiveLayout&&this._bResponsiveLayoutRequested||e===f.GridLayout&&this._bGridLayoutRequested||e===f.ResponsiveGridLayout&&this._bResponsiveGridLayoutRequested||e===f.ColumnLayout&&this._bColumnLayoutRequested){return false}if(!this.getAggregation("form").getLayout()){var t=this._bChangedByMe;var a=_.call(this);this._bChangedByMe=t;if(!a){return false}}return true}function G(e,t,a,i,s){if(this.getLayout()!=f.ResponsiveLayout){return}if(!w.call(this)){return}this._bLayoutDataChangedByMe=true;var r=T.call(this,e);if(!r||!S.call(this,r)){r=e.getLayoutData();if(r&&r.isA("sap.ui.core.VariantLayoutData")){r.addMultipleLayoutData(k.call(this,t,a,i,s))}else if(!r){e.setLayoutData(k.call(this,t,a,i,s))}else{u.warning("ResponsiveFlowLayoutData can not be set on Field "+e.getId(),"_createFieldLayoutData","SimpleForm")}}this._bLayoutDataChangedByMe=false}function P(e){if(this.getLayout()!=f.ResponsiveLayout){return}if(!w.call(this)){return}this._bLayoutDataChangedByMe=true;e.setLayoutData(new y({linebreak:true,margin:false}));this._bLayoutDataChangedByMe=false}function I(e){var t=this.getLayout();if(t!=f.ResponsiveLayout&&t!=f.GridLayout){return}if(!w.call(this)){return}this._bLayoutDataChangedByMe=true;switch(t){case f.ResponsiveLayout:e.setLayoutData(new y({minWidth:280}));break;case f.GridLayout:if(this.getMaxContainerCols()>1){e.setLayoutData(new v({halfGrid:true}))}else{e.setLayoutData(new v({halfGrid:false}))}break}this._bLayoutDataChangedByMe=false}function q(e){this._bLayoutDataChangedByMe=true;var t=T.call(this,e);if(t){var a=t.getId();for(var i=0;i<this._aLayouts.length;i++){var s=this._aLayouts[i];if(a==s){t.destroy();this._aLayouts.splice(i,1);break}}}this._bLayoutDataChangedByMe=false}function O(e,t){var a=V.call(this,t,e);e.addFormElement(a);return a}function x(e,t,a){var i=V.call(this,t,e);e.insertFormElement(i,a);return i}function V(e,t){var a;var i={};if(e){a=this.getId()+"--"+e.getId()+"--FE";e.addStyleClass("sapUiFormLabel-CTX");if(!T.call(this,e)){G.call(this,e,this._iLabelWeight,false,true,this.getLabelMinWidth())}i["label"]=e}else{a=t.getId()+"--FE-NoLabel";if(sap.ui.getCore().byId(a)){a=undefined}}var s=new n(a,i);P.call(this,s);s.isVisible=function(){var e=this.getFields();var t=false;for(var a=0;a<e.length;a++){var i=e[a];if(i.getVisible()){t=true;break}}return t};return s}function W(e){var t;var a={};if(e){t=this.getId()+"--"+e.getId()+"--FC";if(e.isA("sap.ui.core.Title")){a["title"]=e}else if(e.isA("sap.ui.core.Toolbar")){a["toolbar"]=e}}else{t=this.getId()+"--FC-NoHead"}var i=new r(t,a);I.call(this,i);i.getAriaLabelledBy=function(){var e=this.getToolbar();if(e){return e.getAriaLabelledBy()}else{return[]}};return i}function X(e){var t=this._iMaxWeight;var a=e.getFields();var i;var s=a.length;var r=e.getLabel();var n;var o=0;this._bLayoutDataChangedByMe=true;if(r&&T.call(this,r)){t=t-T.call(this,r).getWeight()}for(o=0;o<a.length;o++){i=a[o];n=T.call(this,i);if(n&&n.isA("sap.ui.layout.ResponsiveFlowLayoutData")&&!S.call(this,n)){t=t-n.getWeight();s--}}var l=Math.floor(t/s);var u=t%s;for(o=0;o<a.length;o++){i=a[o];n=T.call(this,i);var h=l;if(!n){G.call(this,i,h,false,o==0)}else if(S.call(this,n)&&n.isA("sap.ui.layout.ResponsiveFlowLayoutData")){if(u>0){h++;u--}n.setWeight(h)}}this._bLayoutDataChangedByMe=false}b.prototype._applyLinebreaks=function(){if(!d||this._bResponsiveLayoutRequested){return}this._bLayoutDataChangedByMe=true;var e=this.getAggregation("form"),t=e.getFormContainers();var a=this.getDomRef();var i=this.$();for(var s=1;s<t.length;s++){var r=t[s],n=r.getLayoutData();if(!a||i.outerWidth(true)>this.getMinWidth()){if(s%this.getMaxContainerCols()==0){n.setLinebreak(true)}else{n.setLinebreak(false)}}else{n.setLinebreak(true)}}if(a&&i.css("visibility")=="hidden"){var o=this;setTimeout(function(){if(o.getDomRef()){o.$().css("visibility","")}},10)}this._bLayoutDataChangedByMe=false};function z(){this._bLayoutDataChangedByMe=true;var e=this.getAggregation("form");var t=e.getFormContainers();var a=t.length;for(var i=0;i<a;i++){var s=t[i];if(this.getMaxContainerCols()<=1||i==a-1&&a%2>0){s.getLayoutData().setHalfGrid(false)}else if(!s.getLayoutData().getHalfGrid()){s.getLayoutData().setHalfGrid(true)}}this._bLayoutDataChangedByMe=false}b.prototype._resize=function(e){this._bChangedByMe=true;if(this._iCurrentWidth==e.size.width){return}this._iCurId){a.deregister(this._sResizeListenerId);this._sResizeListenerId=null}}function H(e,t){var a=false;for(var i=0;i<e.length;i++){var s=e[i];if(s==t){a=true;break}}if(!a){e.push(t)}}function N(e){if(e.name=="visible"){var t=e.object.getParent();t.invalidate()}}function $(e){var t=[];var a=e.getFormContainers();for(var i=0;i<a.length;i++){var s=a[i];var r=s.getTitle();if(r){t.push(r)}else{var n=s.getToolbar();if(n){t.push(n)}}var o=s.getFormElements();for(var l=0;l<o.length;l++){var u=o[l];var h=u.getLabel();if(h){t.push(h)}var g=u.getFields();for(var f=0;f<g.length;f++){var d=g[f];t.push(d)}}}return t}b.prototype._formInvalidated=function(e){if(!this._bChangedByMe){var t=$(this.getAggregation("form"));var a=0;var i=0;var s=false;if(!this._aElements||t.length<this._aElements.length){s=true}else{for(a=0;a<t.length;a++){var r=t[a];var n=this._aElements[i];if(r===n){i++}else{var o=t[a+1];if(o===n){this.insertContent(r,a);break}o=this._aElements[i+1];if(o===r){s=true;break}break}}}if(s){this.removeAllContent();for(a=0;a<t.length;a++){var l=t[a];this.addContent(l)}}}};b.prototype._onLayoutDataChange=function(e){if(!this._bLayoutDataChangedByMe&&!this._bIsBeingDestroyed){switch(this.getLayout()){case f.ResponsiveLayout:var t=e.srcControl;var a=t.getParent();if(a instanceof n){var i=this.indexOfContent(t);this.removeContent(t);this.insertContent(t,i)}break}}};b.prototype._suggestTitleId=function(e){var t=this.getAggregation("form");t._suggestTitleId(e);return this};return b});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/layout/library",["sap/ui/base/DataType","sap/ui/core/library"],function(o,t){"use strict";var e=sap.ui.getCore().initLibrary({name:"sap.ui.layout",version:"1.114.3",dependencies:["sap.ui.core"],designtime:"sap/ui/layout/designtime/library.designtime",types:["sap.ui.layout.BackgroundDesign","sap.ui.layout.BlockBackgroundType","sap.ui.layout.BlockLayoutCellColorSet","sap.ui.layout.BlockLayoutCellColorShade","sap.ui.layout.BlockRowColorSets","sap.ui.layout.BoxesPerRowConfig","sap.ui.layout.GridIndent","sap.ui.layout.GridPosition","sap.ui.layout.GridSpan","sap.ui.layout.SideContentFallDown","sap.ui.layout.SideContentPosition","sap.ui.layout.SideContentVisibility","sap.ui.layout.form.ColumnsXL","sap.ui.layout.form.ColumnsL","sap.ui.layout.form.ColumnsM","sap.ui.layout.form.ColumnCells","sap.ui.layout.form.EmptyCells","sap.ui.layout.form.GridElementCells","sap.ui.layout.form.SimpleFormLayout","sap.ui.layout.cssgrid.CSSGridAutoFlow","sap.ui.layout.cssgrid.CSSGridTrack","sap.ui.layout.cssgrid.CSSGridLine","sap.ui.layout.cssgrid.CSSGridGapShortHand"],interfaces:["sap.ui.layout.cssgrid.IGridConfigurable","sap.ui.layout.cssgrid.IGridItemLayoutData"],controls:["sap.ui.layout.AlignedFlowLayout","sap.ui.layout.DynamicSideContent","sap.ui.layout.FixFlex","sap.ui.layout.Grid","sap.ui.layout.HorizontalLayout","sap.ui.layout.ResponsiveFlowLayout","sap.ui.layout.ResponsiveSplitter","sap.ui.layout.ResponsiveSplitterPage","sap.ui.layout.Splitter","sap.ui.layout.VerticalLayout","sap.ui.layout.BlockLayoutCell","sap.ui.layout.BlockLayoutRow","sap.ui.layout.BlockLayout","sap.ui.layout.form.Form","sap.ui.layout.form.FormLayout","sap.ui.layout.form.GridLayout","sap.ui.layout.form.ColumnLayout","sap.ui.layout.form.ResponsiveGridLayout","sap.ui.layout.form.ResponsiveLayout","sap.ui.layout.form.SimpleForm","sap.ui.layout.cssgrid.CSSGrid"],elements:["sap.ui.layout.BlockLayoutCellData","sap.ui.layout.GridData","sap.ui.layout.ResponsiveFlowLayoutData","sap.ui.layout.SplitterLayoutData","sap.ui.layout.form.FormContainer","sap.ui.layout.form.FormElement","sap.ui.layout.form.GridContainerData","sap.ui.layout.PaneContainer","sap.ui.layout.SplitPane","sap.ui.layout.form.GridElementData","sap.ui.layout.form.ColumnElementData","sap.ui.layout.form.ColumnContainerData","sap.ui.layout.cssgrid.GridItemLayoutData"],extensions:{flChangeHandlers:{"sap.ui.layout.BlockLayout":{moveControls:"default"},"sap.ui.layout.BlockLayoutRow":{moveControls:"default",hideControl:"default",unhideControl:"default"},"sap.ui.layout.BlockLayoutCell":"sap/ui/layout/flexibility/BlockLayoutCell","sap.ui.layout.DynamicSideContent":{moveControls:"default",hideControl:"default",unhideControl:"default"},"sap.ui.layout.form.SimpleForm":"sap/ui/layout/flexibility/SimpleForm","sap.ui.layout.Grid":{moveControls:"default",hideControl:"default",unhideControl:"default"},"sap.ui.layout.FixFlex":{moveControls:"default",hideControl:"default",unhideControl:"default"},"sap.ui.layout.form.Form":"sap/ui/layout/flexibility/Form","sap.ui.layout.form.FormContainer":"sap/ui/layout/flexibility/FormContainer","sap.ui.layout.form.FormElement":"sap/ui/layout/flexibility/FormElement","sap.ui.layout.HorizontalLayout":{moveControls:"default",hideControl:"default",unhideControl:"default"},"sap.ui.layout.Splitter":{moveControls:"default",hideControl:"default",unhideControl:"default"},"sap.ui.layout.VerticalLayout":{moveControls:"default",hideControl:"default",unhideControl:"default"}},"sap.ui.support":{publicRules:true,internalRules:true}}});e.BackgroundDesign={Solid:"Solid",Transparent:"Transparent",Translucent:"Translucent"};e.GridIndent=o.createType("sap.ui.layout.GridIndent",{isValid:function(o){return/^(([Xx][Ll](?:[0-9]|1[0-1]))? ?([Ll](?:[0-9]|1[0-1]))? ?([Mm](?:[0-9]|1[0-1]))? ?([Ss](?:[0-9]|1[0-1]))?)$/.test(o)}},o.getType("string"));e.GridPosition={Left:"Left",Right:"Right",Center:"Center"};e.GridSpan=o.createType("sap.ui.layout.GridSpan",{isValid:function(o){return/^(([Xx][Ll](?:[1-9]|1[0-2]))? ?([Ll](?:[1-9]|1[0-2]))? ?([Mm](?:[1-9]|1[0-2]))? ?([Ss](?:[1-9]|1[0-2]))?)$/.test(o)}},o.getType("string"));e.BlockBackgroundType={Default:"Default",Light:"Light",Mixed:"Mixed",Accent:"Accent",Dashboard:"Dashboard"};e.BlockRowColorSets={ColorSet1:"ColorSet1",ColorSet2:"ColorSet2",ColorSet3:"ColorSet3",ColorSet4:"ColorSet4"};e.BlockLayoutCellColorSet={ColorSet1:"ColorSet1",ColorSet2:"ColorSet2",ColorSet3:"ColorSet3",ColorSet4:"ColorSet4",ColorSet5:"ColorSet5",ColorSet6:"ColorSet6",ColorSet7:"ColorSet7",ColorSet8:"ColorSet8",ColorSet9:"ColorSet9",ColorSet10:"ColorSet10",ColorSet11:"ColorSet11"};e.BlockLayoutCellColorShade={ShadeA:"ShadeA",ShadeB:"ShadeB",ShadeC:"ShadeC",ShadeD:"ShadeD",ShadeE:"ShadeE",ShadeF:"ShadeF"};e.form=e.form||{};e.form.GridElementCells=o.createType("sap.ui.layout.form.GridElementCells",{isValid:function(o){return/^(auto|full|([1-9]|1[0-6]))$/.test(o)}},o.getType("string"));e.form.SimpleFormLayout={ResponsiveLayout:"ResponsiveLayout",GridLayout:"GridLayout",ResponsiveGridLayout:"ResponsiveGridLayout",ColumnLayout:"ColumnLayout"};e.SideContentVisibility={AlwaysShow:"AlwaysShow",ShowAboveL:"ShowAboveL",ShowAboveM:"ShowAboveM",ShowAboveS:"ShowAboveS",NeverShow:"NeverShow"};e.SideContentFallDown={BelowXL:"BelowXL",BelowL:"BelowL",BelowM:"BelowM",OnMinimumWidth:"OnMinimumWidth"};e.SideContentPosition={End:"End",Begin:"Begin"};e.form.ColumnsXL=o.createType("sap.ui.layout.form.ColumnsXL",{isValid:function(o){if(o>0&&o<=6){return true}else{return false}}},o.getType("int"));e.form.ColumnsL=o.createType("sap.ui.layout.form.ColumnsL",{isValid:function(o){if(o>0&&o<=3){return true}else{return false}}},o.getType("int"));e.form.ColumnsM=o.createType("sap.ui.layout.form.ColumnsM",{isValid:function(o){if(o>0&&o<=2){return true}else{return false}}},o.getType("int"));e.form.ColumnCells=o.createType("sap.ui.layout.form.ColumnCells",{isValid:function(o){if(o===-1){return true}else if(o>0&&o<=12){return true}else{return false}}},o.getType("int"));e.form.EmptyCells=o.createType("sap.ui.layout.form.EmptyCells",{isValid:function(o){if(o>=0&&o<12){return true}else{return false}}},o.getType("int"));if(!e.form.FormHelper){e.form.FormHelper={createLabel:eButton:function(ent:function(o,t,e,a,i){throw new Error("no Button control available!")},addFormClass:r:function(o){return o},getToolbarTitle:function(o){return o&&o.getId()},createDelimiter:function(o,t){throw new Error("no delimiter control available!")},createSemanticDisplayControl:function(o,t){throw new Error("no display control available!")},updateDelimiter:function(o,t){throw neyControl:function(o,t){throw new Error("no display control available!")},bArrowKeySupport:true,bFinal:false}}if(!e.GridHelper){e.GridHelper={getLibrarySpecificClass:function(){return""},bFinal:false}}e.cssgrid=e.cssgrid||{};e.cssgrid.CSSGridTrack=o.createType("sap.ui.layout.cssgrid.CSSGridTrack",{isValid:function(o){var t=/(auto|inherit|(([0-9]+|[0-9]*\.[0-9]+)([rR][eE][mM]|[eE][mM]|[eE][xX]|[pP][xX]|[cC][mM]|[mM][mM]|[iI][nN]|[pP][tT]|[pP][cC]|[vV][wW]|[vV][hH]|[vV][mM][iI][nN]|[vV][mM][aA][xX]|%))|calc\(\s*(\(\s*)*[-+]?(([0-9]+|[0-9]*\.[0-9]+)([rR][eE][mM]|[eE][mM]|[eE][xX]|[pP][xX]|[cC][mM]|[mM][mM]|[iI][nN]|[pP][tT]|[pP][cC]|[vV][wW]|[vV][hH]|[vV][mM][iI][nN]|[vV][mM][aA][xX]|%)?)(\s*(\)\s*)*(\s[-+]\s|[*\/])\s*(\(\s*)*([-+]?(([0-9]+|[0-9]*\.[0-9]+)([rR][eE][mM]|[eE][mM]|[eE][xX]|[pP][xX]|[cC][mM]|[mM][mM]|[iI][nN]|[pP][tT]|[pP][cC]|[vV][wW]|[vV][hH]|[vV][mM][iI][nN]|[vV][mM][aA][xX]|%)?)))*\s*(\)\s*)*\))/g;o=o.replace(/(minmax|repeat|fit-content|max-content|min-content|auto-fill|auto-fit|fr|min|max)/g,"");o=o.replace(t,"");o=o.replace(/\(|\)|\+|\-|\*|\/|calc|\%|\,/g,"");o=o.replace(/[0-9]/g,"");o=o.replace(/\s/g,"");return o.length===0},parseValue:function(o){return o.trim().split(/\s+/).join(" ")}},o.getType("string"));e.cssgrid.CSSGridGapShortHand=o.createType("sap.ui.layout.cssgrid.CSSGrido.split(/\s+/);a.forEareturn e},parseValue:function(o){return o.trim().split(/\s+/).join(" ")}},o.getType("string"));e.cssgrid.CSSGridLine=o.createType("sap.ui.layout.cssgrid.CSSGridLine",{isValid:function(o){return/^(auto|inherit|((span)?(\s)?-?[0-9]+(\s\/\s(span)?(\s)?-?[0-9]*)?)?)$/.test(o)}},o.getType("string"));e.cssgrid.CSSGridAutoFlow={Row:"Row",Column:"Column",RowDense:"RowDense",ColumnDense:"ColumnDense"};e.B|1[0-2]))? ?([Mm](?:[1-9]|1[0-2]))? ?([Ss](?:[1-9]|1[0-2]))?)$/.test(o)}},o.getType("string"));return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataMessageParser",["sap/ui/model/odata/ODataMetadata","sap/ui/model/odata/ODataUtils","sap/ui/core/library","sap/ui/thirdparty/URI","sap/ui/core/message/MessageParser","sap/ui/core/message/Message","sap/base/Log"],function(e,r,t,s,a,i,n){"use strict";var o="sap.ui.model.odata.ODataMessageParser",u=/^\/+|\/$/g,d=t.MessageType,c={error:d.Error,info:d.Information,success:d.Success,warning:d.Warning};var l=a.extend("sap.ui.model.odata.ODataMessageParser",{metadata:{publicMethods:["parse","setProcessor","getHeaderField","setHeaderField"]},constructor:function(e,r,t){a.apply(this);this._serviceUrl=f(this._parseUrl(e).url);this._metadata=r;this._headerField="sap-message";this._lastMessages=[];this._bPersistTechnicalMessages=t}});l.prototype.getHeaderField=function(){return this._headerField};l.prototype.setHeaderField=function(e){this._headerField=e;return this};l.prototype.parse=function(e,r,t,s,a){var i,u,d=String(e.statusCode);if(r.method==="GET"&&d==="204"){return}u={request:r,response:e,url:r.requestUri};if(e.statusCode>=200&&e.statusCode<300){i=this._parseHeader(e,u)}else if(e.statusCode>=400&&e.statusCode<600){try{i=this._parseBody(e,u)}catch(e){i=this._createGenericError(u);n.debug("Failed to parse error messages from the response body",e,o)}finally{this._logErrorMessages(i,r,d)}}else{i=this._createGenericError(u);n.error("Request failed with unsupported status code "+d+": "+r.method+" "+r.requestUri,undefined,o)}if(r.method==="GET"&&d==="424"){return}this._propagateMessages(i,u,t,s,!a)};l.prototype._getAffectedTargets=function(e,r,t,s){var a=Object.assign({"":true},t,s),i,n=this._parseUrl(r.url).url;if(r.request.key&&r.request.created){a[r.request.key]=true}if(n.startsWith(this._serviceUrl)){n=n.slice(this._serviceUrl.length+1)}i=this._metadata._getEntitySetByPath(n);if(i){a[i.name]=true}e.forEach(function(e){e.getTargets().forEach(function(e){var r,t,s;if(!e){return}s=e.replace(u,"");a[s]=true;t=s.lastIndexOf("/");if(t>0){r=s.slice(0,t);a[r]=true}})});return a};l.prototype._propagateMessages=function(r,t,s,a,i){var d,c=t.request.deepPath,l=[],h,p=c&&t.request.updateAggregatedMessages,f=t.request.headers&&t.request.headers["sap-messages"]==="transientOnly",g=[],y=e._returnsCollection(t.request.functionMetadata),_,m,v;function M(e,r){return r.some(function(e){return d[e]})||p&&e.aFullTargets.some(function(e){if(y){return h.some(function(r){var t=r.slice(r.indexOf("("));return e.startsWith(c+t)})}elssages;_=r.some(function(e){return!e.getPersistent()&&!e.getTechnical()});if(_){n.error("Unexpected non-persistent message in response, but requested only "+"transition messages",undefined,o)}}else{d=this._getAffectedTargets(r,t,s,a);h=Object.keys(s);m=t.response.statusCode;v=m>=200&&m<300;this._lastMessages.forEach(function(e){var r=e.getTargets().map(function(e){e=e.replace(u,"");var r=e.lastIndexOf(")/");if(r>0){e=e.substr(0,r+1)}return e});if(v||i){if(!e.getPersistent()&&M(e,r)){g.push(e)}else{l.push(e)}}else if(!e.getPersistent()&&e.getTechnical()&&M(e,r)){g.push(e)}else{l.push(e)}})}this.getProcessor().fireMessageChange({oldMessages:g,newMessages:r});this._lastMessages=l.concat(r)};l.prototype._createMessage=function(e,r,t){var s=e.target&&e.target.indexOf("/#TRANSIENT#")===0||e.transient||e.transition||t&&this._bPersistTechnicalMessages,a,n=typeof e.message==="object"?e.message.value:e.message,o=e["@sap.severity"]||e.severity;e.transition=!!s;a=this._createTargets(e,r,t);return new i({code:e.code||"",description:e.description,descriptionUrl:e.longtext_url||"",fullTarget:a.aDeepPaths,message:n,persistent:!!s,processor:this._processor,target:a.aTargets,technical:t,technicalDetails:{headers:r.response.headers,statusCode:r.response.statusCode},type:c[o]||o})};l._isResponseForCreate=function(e){var r=e.request,t=e.response;if(r.method==="POST"&&t.statusCode==201&&t.headers["location"]){return true}if(r.key&&r.created&&t.statusCode>=400){return false}return undefined};l.prototype._createTarget=function(e,t,s,a){var i,n,o,u,d,c,h,p,f,g=t.request,y=t.response;if(e===undefined&&(!s&&g.headers["sap-message-scope"]==="BusinessObject"||s&&a)){return{deepPath:"",target:""}}e=e||"";e=e.startsWith("/#TRANSIENT#")?e.slice(12):e;if(e[0]!=="/"){n=l._isResponseForCreate(t);o=g.deepPath||"";if(n===true){f=y.headers["location"]}else if(n===false){f=g.key}else{f=t.url}p=this._parseUrl(f);h=p.url;u=h.indexOf(this._serviceUrl);if(u>-1){c=h.slice(u+this._serviceUrl.length)}else{c="/"+h}if(!n&&g.functionMetadata){c=g.functionTarget}if(c.slice(c.lastIndexOf("/")).indexOf("(")>-1||!this._metadata._isCollection(c)){o=e?o+"/"+e:o;e=e?c+"/"+e:c}else{o=o+e;e=c+e}}i=this._processor.resolve(e,undefined,true);while(i&&i.lastIndexOf("/")>0&&i!==d){d=i;i=this._processor.resolve(i,undefined,true)||d}e=i||e;return{deepPath:this._metadata._getReducedPath(o||e),target:r._normalizeKey(e)}};l.prototype._createTargets=function(e,r,t){var s=[],a=Array.isArray(e.additionalTargets)?[e.target].concat(e.additionalTargets):[e.target],i,u=[],d=this;if(e.propertyref!==undefined&&a[0]!==undefined){n.warning("Used the message's 'target' property for target calculation; the property"+" 'propertyref' is deprecated and must not be used together with 'target'",r.url,o)}else if(a[0]===undefined){a[0]=e.propertyref}a.forEach(function(a){i=d._createTarget(a,r,t,e.transition);s.push(i.deepPath);u.push(i.target)});return{aDeepPaths:s,aTargets:u}};l.prototype._parseHeader=function(e,r){var t,s,a,i,o=this.getHeaderField(),u=[];if(!e.headers){return u}for(s in e.headers){if(s.toLowerCase()===o.toLowerCase()){o=s}}if(!e.headers[o]){return u}a=e.headers[o];try{i=JSON.parse(a);u.push(this._createMessage(i,r));if(Array.isArray(i.details)){for(t=0;t<i.details.length;t+=1){u.push(this._createMessage(i.details[t],r))}}}catch(e){n.error("The message string returned by the back-end could not be parsed: '"+e.message+"'");return u}return u};l.prototype._parseBody=function(e,r){var t=h(e);return t&&t.indexOf("xml")>-1?this._parseBodyXML(e,r,t):this._parseBodyJSON(e,r)};l.prototype._createGenericError=function(e){return[this._createMessage({description:e.response.body,message:sap.ui.getCore().getLibraryResourceBundle().getText("CommunicationError"),severity:d.Error,transition:true},e,true)]};l.prototype._getBodyMessages=function(e,r,t){var s=t.request.headers["Content-ID"],a=[],i=this._createMessage(e,t,true),n=this;r.forEach(function(e){var r=n._createMessage(e,t,true);if(i&&i.getCode()===r.getCode()&&i.getMessage()===r.getMessage()){i=undefined}if(!s||!e.ContentID||s===e.ContentID){a.push(r)}});if(i){a.unshift(i)}return a};l.prototy),persistent:e.getPersistent(),targets:e.getTargets(),type:e.getType()}})):"Another request in the same change set failed";n.error("Request failed with status code "+t+": "+r.method+" "+r.requestUri,s,o)};l.prototype._parseBodyXML=function(e,r,t){var s,a,i,n,o,u,c,l=(new DOMParser).parseFromString(e.body,t),h=g(l,["error","errordetail"]),p=[];if(!h.length){return this._createGenericError(r)}for(n=0;n<h.length;n+=1){c=h[n];i={};i.severity=d.Error;for(u=0;u<c.childNodes.length;u+=1){s=c.childNodes[u];a=s.nodeName;if(a==="errordetails"||a==="details"||a==="innererror"||a==="#text"){continue}if(a==="message"&&s.hasChildNodes()&&s.firstChild.nodeType!==window.Node.TEXT_NODE){for(o=0;o<s.childNodes.length;o+=1){if(s.childNodes[o].nodeName==="value"){i.message=s.childNodes[o].text||s.childNodes[o].textContent}}}else{i[s.nodeName]=s.text||s.textContent}}p.push(i)}return this._getBodyMessages(p[0],p.slice(1),r)};l.prototype._parseBodyJSON=function(e,r){var t,s,a=JSON.parse(e.body);if(a.error){s=a.error}else{s=a["odata.error"]}if(!s){n.error("Error message returned by server did not contain error-field");return this._createGenericError(r)}s.severity=d.Error;if(Array.isArray(s.details)){t=s.details}else if(s.innererror&&Array.isArray(s.innererror.errordetails)){t=s.innererror.errordetails}else{t=[]}return this._getBodyMessages(s,t,r)};l.prototype._parseUrl=function(e){var r={url:e,parameters:{},hash:""};var t=-1;t=e.indexOf("#");if(t>-1){r.hash=r.url.substr(t+1);r.url=r.url.substr(0,t)}t=e.indexOf("?");if(t>-1){var a=r.url.substr(t+1);r.parameters=s.parseQuery(a);r.url=r.url.substr(0,t)}return r};l.prototype._setPersistTechnicalMessages=function(e){this._bPersistTechnicalMessages=e};function h(e){if(e&&e.headers){for(var r in e.headers){if(r.toLowerCase()==="content-type"){return e.headers[r].replace(/([^;]*);.*/,"$1")}}}return false}var p=document.createElement("a");function f(e){p.href=e;return s.parse(p.href).path}function g(e,r){var t=[];var s={};for(var a=0;a<r.length;a+=1){s[r[a]]=true}var i=e;while(i){if(s[i.tagName]){t.push(i)}if(i.hasChildNodes()){i=i.firstChild}else{while(!i.nextSibling){i=i.parentNode;if(!i||i===e){i=null;break}}if(i){i=i.nextSibling}}}return t}return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataMetaModel",["./_ODataMetaModelUtils","sap/base/Log","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/ui/base/BindingParser","sap/ui/base/ManagedObject","sap/ui/base/SyncPromise","sap/ui/model/_Helper","sap/ui/model/BindingMode","sap/ui/model/ClientContextBinding","sap/ui/model/Context","sap/ui/model/FilterProcessor","sap/ui/model/MetaModel","sap/ui/model/json/JSONListBinding","sap/ui/model/json/JSONModel","sap/ui/model/json/JSONPropertyBinding","sap/ui/model/json/JSONTreeBinding","sap/ui/performance/Measurement"],function(e,t,o,n,i,r,a,s,d,l,u,c,p,h,f,y,g,m,C){"use strict";var O=new Map,M="sap.ui.model.odata.ODataMetaModel",v=[M],b=M+"/load",S=/^((\/dataServices\/schema\/\d+)\/(?:complexType|entityType)\/\d+)\/property\/\d+$/;var D=f.extend("sap.ui.model.odata.ODataMetaListBinding"),P=a.extend("sap.ui.model.odata._resolver",{metadata:{properties:{any:"any"}}});D.prototype.applyFilter=function(){var e=this,t=p.combineFilters(this.aFilters,this.aApplicationFilters);this.aIndices=p.apply(this.aIndices,t,function(t,o){return o==="@sapui.name"?t:e.oModel.getProperty(o,e.oList[t])},this.mNormalizeCache);this.iLength=this.aIndices.length};var w=h.extend("sap.ui.model.odata.ODataMetaModel",{constructor:function(t,o,n){var i=n.annotationsLoaded(),r=this;function a(){var i;if(r.bDestroyed){throw new Error("Meta model already destroyed")}C.average(b,"",v);i=JSON.parse(JSON.stringify(t.getServiceMetadata()));r.oModel=new y(i);r.oModel.setDefaultBindingMode(r.sDefaultBindingMode);e.merge(o?o.getData():{},i,r,n.bIgnoreAnnotationsFromMetadata);C.end(b)}h.apply(this);this.oModel=null;this.mContext2Promise={};this.sOneTime;this.oLoadedPromise=i?i.then(a):new Promise(function(e){a();e()});this.oLoadedPromiseSync=s.resolve(this.oLoadedPromise);this.oMetadata=t;this.oDataModel=n;this.mQueryCache={};this.mQName2PendingRequest={};this.oResolver=undefined;this.mSupportedBindingModes={OneTime:true}}});w.prototype._getObject=function(e,o){var n=o,i,a,s,d,l,u,p,h=e||"",f;if(!o||o instanceof c){h=this.resolve(e||"",o);if(!h){t.error("Invalid relative path w/o context",e,M);return null}}if(h.charAt(0)==="/"){n=this.oModel._getObject("/");h=h.slice(1)}p="/";l=n;while(h){u=undefined;i=undefined;if(h.charAt(0)==="["){try{f=r.parseExpression(h,1);d=f.at;if(h.length===d+1||h.charAt(d+1)==="/"){i=f.result;u=h.slice(0,d+1);h=h.slice(d+2)}}catch(e){if(!(e instanceof SyntaxError)){throw e}}}if(u===undefined){d=h.indexOf("/");if(d<0){u=h;h=""}else{u=h.slice(0,d);h=h.slice(d+1)}}if(!l){if(t.isLoggable(t.Level.WARNING,M)){t.warning("Invalid part: "+u,"path: "+e+", context: "+(o instanceof c?o.getPath():o),M)}break}if(i){if(n===o){t.error("A query is not allowed when an object context has been given",e,M);return null}if(!Array.isArray(l)){t.error("Invalid query: '"+p+"' does not point to an array",e,M);return null}a=p+u;u=this.mQueryCache[a];if(u===undefined){this.oResolver=this.oResolver||new P({models:this.oModel});for(s=0;s<l.length;s+=1){this.oResolver.bindObject(p+s);this.oResolver.bindProperty("any",i);try{if(this.oResolver.getAny()){this.mQueryCache[a]=u=s;break}}finally{this.oResolver.unbindProperty("any");this.oResolver.unbindObject()}}}}l=l[u];p=p+u+"/"}return l};w.prototype._getOrCreateSharedModelCache=function(){var e=this.oDataModel;if(!this.oSharedModelCache){this.oSharedModelCache={bFirstCodeListRequested:false,oModel:new e.constructor(e.getCodeListModelParameters())}}return this.oSharedModelCache};w.prototype._mergeMetadata=function(t){var o=this.getODataEntityContainer(),n=e.getChildAnnotations(t.annotations,o.namespace+"."+o.name,true),i=o.entitySet.length,r=this.oModel.getObject("/dataServices/schema"),a=this;t.entitySets.forEach(function(n){var i,s,d=n.entityType,l=d.slice(0,d.lastIndexOf("."));if(!a.getODataEntitySet(n.name)){o.entitySet.push(JSON.parse(JSON.stringify(n)));if(!a.getODataEntityType(d)){i=a.oMetadata._getEntityTypeByName(d);s=e.getSchema(r,l);s.entityType.push(JSON.parse(JSON.stringify(i)));e.visitParents(s,t.annotations,"entityType",e.visitEntityType,s.entityType.length-1)}}});e.visitChildren(o.entitySet,n,"EntitySet",r,null,i)};w.prototype._sendBundledRequest=function(){var e=this.mQName2PendingRequest,t=Object.keys(e),o=thisequest={};t=t.sort();t.forEach(function(e,o){t[o]=encodeURIComponent(e)});this.oDataModel.addAnnotationUrl("$metadata?sap-value-list="+t.join(",")).then(function(t){var n;o._mergeMetadata(t);for(n in e){try{e[n].resolve(t)}catch(t){e[n].reject(t)}}},function(t){var o;for(o in e){e[o].reject(t)}})};w.prototype.bi};w.prototype.bindList=fun,i)};w.prototype.bint,o)};w.prototype.bindTree=function(e,t,o,n){return new m(this,e,t,o,n)};w.prototype.destroy=function(){h.prototype.destroy.apply(this,arguments);if(this.oSharedModelCache){this.oSharedModelCache.oModel.destroy();delete this.oSharedModelCache}return this.oModel&&this.oModel.destroy.apply(this.oModel,arguments)};w.prototype.fetchCodeList=function(e){var o=this;return this.oLoadedPromiseSync.then(function(){var n,r,a,d,l,u,c,p,h,f="com.sap.vocabularies.CodeList.v1."+e,y=o.getODataEntityContainer()[f];if(!y||!y.Url.String){return null}if(y.Url.String!=="./$metadata"){throw new Error(f+"/Url/String has to be './$metadata' for the service "+o.oDataModel.getCodeListModelParameters().serviceUrl)}l=y.CollectionPath.String;c=o.oDataModel.getMetadataUrl();n=c+"#"+l;p=O.get(n);if(p){return p}r=n+"#"+o.getId();p=O.get(r);if(p){return p}d=o._getOrCreateSharedModelCache();a=d.oModel;h=new s(function(e,t){var o=i.fromURL(c),n=o.get("sap-client"),r=o.get("sap-language"),s={$skip:0,$top:5e3};if(n){s["sap-client"]=n}if(r){s["sap-e,t){try{e(o._getPropertyNamesForCodeListCustomizing(l))}catch(e){t(e)}});p=s.all([h,u]).then(function(e){var i=e[0].results,a=e[1];O.set(n,p);O.delete(r);return i.reduce(function(e,n){var i=n[a.code],r={Text:n[a.text],UnitSpecificScale:n[a.unitSpecificScale]};if(a.standardCode){r.StandardCode=n[a.standardCode]}if(r.UnitSpecificScale===null){t.error("Ignoring customizing w/o unit-specific scale for code "+i+" from "+l,o.oDataModel.getCodeListModelParameters().serviceUrl,M)}else{e[i]=r}return e},{})}).catch(function(e){if(a.bDestroyed){O.delete(n);O.delete(r)}else{t.error("Couldn't load code list: "+l+" for "+o.oDataModel.getCodeListModelParameters().serviceUrl,e,M)}throw e}).finally(function(){if(d.bFirstCodeListRequested){if(!a.bDestroyed){a.destroy()}delete o.oSharedModelCache}else{d.bFirstCodeListRequested=true}});O.set(r,p);return p})};w.prototype.getMetaContext=function(e){var t,o,n,i,r,a,s,d,l;function u(e){var t=e.indexOf("(");return t>=0?e.slice(0,t):e}if(!e){return null}d=e.split("/");if(d[0]!==""){throw new Error("Not an absolute path: "+e)}d.shift();s=u(d[0]);o=this.getODataEntitySet(s);if(o){l=o.entityType}else{i=this.getODataFunctionImport(s);if(i){if(d.length===1){r=this.getODataFunctionImport(s,true)}l=i.returnType;if(l.lastIndexOf("Collection(",0)===0){l=l.slice(11,-1)}}else{throw new Error("Entity set or function import not found: "+s)}}d.shift();while(d.length){n=this.getODataEntityType(l);if(n){a=u(d[0]);t=this.getODataAssociationEnd(n,a)}else{n=this.getODataComplexType(l)}if(t){l=t.type;if(t.multiplicity==="1"&&a!==d[0]){throw new Error("Multiplicity is 1: "+d[0])}d.shift()}else{r=this.getODataProperty(n,d,true);if(d.length){throw new Error("Property not found: "+d.join("/"))}break}}r=r||this.getODataEntityType(l,true);return this.createBindingContext(r)};w.prototype.getODataAssociationEnd=function(t,o){var n=t?e.findObject(t.navigationProperty,o):null,i=n?e.getObject(this.oModel,"association",n.relationship):null,r=i?e.findObject(i.end,n.toRole,"role"):null;return r};w.prototype.getODataAssociationSetEnd=function(t,o){var n,i=null,r=this.getODataEntityContainer(),a=t?e.findObject(t.navigationProperty,o):null;if(r&&a){n=e.findObject(r.associationSet,a.relationship,"association");i=n?e.findObject(n.end,a.toRole,"role"):null}return i};w.prototype.getODataComplexType=function(t,o){return e.getObject(this.oModel,"complexType",t,o)};w.prototype.getODataEntityContainer=function(t){var o=t?undefined:null,n=this.oModel.getObject("/dataServices/schema");if(n){n.forEach(function(n,i){var r=e.findIndex(n.entityContainer,"true","isDefaultEntityContainer");if(r>=0){o=t?"/dataServices/schema/"+i+"/entityContainer/"+r:n.entityContainer[r]}});if(!o&&n.length===1&&n[0].entityContainer&&n[0].entityContainer.length===1){o=t?"/dataServices/schema/0/entityContainer/0":n[0].entityContainer[0]}}return o};w.prototype.getODataEntitySet=function(t,o){return e.getFromContainer(this.getODataEntityContainer(),"entitySet",t,o)};w.prototype.getODataEntityType=function(t,o){return e.getObject(this.oModel,"entityType",t,o)};w.prototype.getODataFunctionImport=function(t,o){var n=t&&t.indexOf("/")>=0?t.split("/"):undefined,i=n?e.getObject(this.oModel,"entityContainer",n[0]):this.getODataEntityContainer();return e.getFromContainer(i,"functionImport",n?n[1]:t,o)};w.prototype.getODataProperty=function(t,o,n){var i,r=Array.isArray(o)?o:[o],a=null,s;while(t&&r.length){i=e.findIndex(t.property,r[0]);if(i<0){break}r.shift();a=t.property[i];s=t.$path+"/property/"+i;if(r.length){t=this.getODataComplexType(a.type)}}return n?s:a};w.prototype.getODataValueLists=function(t){var i=false,r,a=t.getPath(),s=this.mContext2Promise[a],d=this;if(s){return s}r=S.exec(a);if(!r){throw new Error("Unsupported property context with path "+a)}s=new Promise(function(s,l){var u=t.getObject(),c,p=e.getValueLists(u);if(!(""in p)&&u["sap:value-list"]){i=true;c=d.oModel.getObject(r[2]).namespace+"."+d.oModel.getObject(r[1]).name;d.mQName2PendingRequest[c+"/"+u.name]={resolve:function(t){o(u,(t.annotations.propertyAnnotations[c]||{})[u.name]);p=e.getValueLists(u);if(n(p)){l(new Error("No value lists returned for "+a))}else{delete d.mContext2Promise[a];s(p)}},reject:l};setTimeout(d._sendBundledRequest.bind(d),0)}else{s(ype.getProperty=funsList=function(){return this.oModel.isList.apply(this.oModel,arguments)};w.prototype.loaded=function(){return this.oLoadedPromise};w.prototype.refresh=function(){throw new Error("Unsupported operation: ODataMetaModel#refresh")};w.prototype.requestCurrencyCodes=function(){return Promise.resolve(this.fetchCodeList("CurrencyCodes")).then(function(e){return e?d.merge({},e):e})};w.prototype.requestUnitsOfMeasure=function(){return Promise.resolve(this.fetchCodeList("UnitsOfMeasure")).then(function(e){return e?d.merge({},e):e})};w.prototype.setLegacySyntax=function(e){if(e){throw new Error("L(){throw new Error("Unsupported operation: ODataMetaModel#setProperty")};w.prototype._getPropertyNamesForCodeListCustomizing=function(e){var t="/"+e+"/##",o=this.oDataModel.getObject(t),n=o["Org.OData.Core.V1.AlternateKeys"],i=w._getKeyPath(o,t),r=this.oDataModel.getObject("/"+e+"/"+i+"/##");if(n){if(n.length!==1){throw new Error("Single alternative expected: "+t+"Org.OData.Core.V1.AlternateKeys")}else if(n[0].Key.length!==1){throw new Error("Single key expected: "+t+"Org.OData.Core.V1.AlternateKeys/0/Key")}i=n[0].Key[0].Name.Path}return{code:i,standardCode:r["com.sap.vocabularies.CodeList.v1.StandardCode"]&&r["com.sap.vocabularies.CodeList.v1.StandardCode"].Path,text:r["com.sap.vocabularies.Common.v1.Text"].Path,unitSpecificScale:r["com.sap.vocabularies.Common.v1.UnitSpecificScale"].Path}};w._getKeyPath=function(e,t){var o=e.key.propertyRef;if(o&&o.length===1){return o[0].name}throw new Error("Single key expected: "+t)};w.getCodeListTerm=function(e){if(e==="/##@@requestCurrencyCodes"){return"CurrencyCodes"}else if(e==="/##@@requestUnitsOfMeasure"){return"UnitsOfMeasure"}return undefined};return w});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/ODataMetadata",["./_ODataMetaModelUtils","sap/base/assert","sap/base/Log","sap/base/util/each","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/uid","sap/ui/base/EventProvider","sap/ui/core/Configuration","sap/ui/core/cache/CacheManager","sap/ui/thirdparty/datajs"],function(t,e,n,i,a,r,s,o,p,f,u){"use strict";var y="sap.ui.model.odata.ODataMetadata",d="http://www.sap.com/Protocols/SAPData";var h=o.extend("sap.ui.model.odata.ODataMetadata",{constructor:function(t,e){o.apply(this,arguments);this.bLoaded=false;this.bFailed=false;this.mEntityTypes={};this.mRequestHandles={};this.sUrl=t;this.bAsync=e.async;this.sUser=e.user;this.bWithCredentials=e.withCredentials;this.sPassword=e.password;this.mHeaders=e.headers;this.sCacheKey=e.cacheKey;this.oLoadEvent=null;this.oFailedEvent=null;this.oMetadata=null;this.bMessageScopeSupported=false;this.mNamespaces=e.namespaces||{sap:"http://www.sap.com/Protocols/SAPData",m:"http://schemas.microsoft.com/ado/2007/08/dataservices/metadata","":"http://schemas.micros.pLoadedWithReject=new Promise(function(t,e){i.fnResolve=t;i.fnReject=e});Reject.catch(function(t){return new Promise(function(t,e){i.fnResolve=t})});function a(t){f.set(i.sCacheKey,JSON.stringify({metadata:i.oMetadata,params:t}))}function r(t){n.error("[ODataMetadata] initial loading of metadata failed");if(t&&t.message){n.error("Error: "+t.message)}}if(this.sCacheKey){f.get(this.sCacheKey).then(function(t){if(t){var e=JSON.parse(t);this.oMetadata=e.metadata;this._handleLoaded(this.oMetadata,e.params,false)}else{this._loadMetadata().then(a).catch(r)}}.bind(this)).catch(r)}else{this._loadMetadata().catch(r)}},metadata:{publicMethods:["getServiceMetadata","attachFailed","detachFailed","attachLoaded","detachLoaded","refresh"]}});h._returnsCollection=function(t){if(t&&t.returnType&&t.returnType.startsWreturn false};h.prototype._setNamespaces=function(t){this.mNamespaces=t};h.prototype._handleLoaded=function(t,e,n){var i=[];this.oMetadata=this.oMetadata?this.merge(this.oMetadata,t,i):t;this.oRequestHandle=null;e.entitySets=i;this.fnResolve(e);if(this.bAsync&&!n){this.fireLoaded(this)}else if(!this.bAsync&&!n){this.bLoaded=true;this.bFailed=false;this.oLoadEvent=setTimeout(this.fireLoaded.bind(this,e),0)}};h.prototype._loadMetadata=function(t,e){var n=this;t=t||this.sUrl;var i=this._createRequest(t);return new Promise(function(t,a){var r;function o(a,r){if(!a||!a.dataServices){var s={message:"Invalid metadata document",request:i,response:r};p(s);return}n.sMetadataBody=r.body;n.oRequestHandle=null;var o={metadataString:n.sMetadataBody};var f=r.headers["Last-Modified"];if(f){o.lastModified=f}var u=r.headers["eTag"];if(u){o.eTag=u}n._handleLoaded(a,o,e);t(o)}function p(t){var i={message:t.message,request:t.request,response:t.response};if(t.response){i.statusCode=t.response.statusCode;i.statusText=t.response.statusText;i.responseText=t.response.body}if(r&&r.bSuppressErrorHandlerCall){return}if(n.bAsync){delete n.mRequestHandles[r.id]}a(i);n.fnReject(i);if(n.bAsync&&!e){n.fireFailed(i)}else if(!n.bAsync&&!e){n.bFailed=true;n.oFailedEvent=setTimeout(n.fireFailed.bind(n,i),0)}}r=u.request(i,o,p,u.metadataHandler)[r.id]=r}})};h.prototype.refresh=function(){return this._loadMetadata()};h.prototype.getServiceMetadata=function(){return this.oMetadata}ototype.loaded=function(t){return t?this.pLoadedWithReject:this.pLoaded};h.prototype.isFailed=function(){return this.bFailed};h.prototype.fireLoaded=function(t){this.bLoaded=true;this.bFailed=false;this.fireEvent("loaded",t);n.debug(this+" - loaded was fired");return this};h.prototype.attachLoaded=function(t,e,n){this.attachEvent("loaded",t,e,n);return this};h.prototype.detachLoaded=function(t,e){this.detachEvent("loaded",t,e);return this};h.prototype.fireFailed=function(t){this.bFailtachFailed=function(t,e,ne.detachFailed=function(t,e){this.detachEvent("failed",t,e);return this};h.prototype._getEntityAssociationEnd=function(e,n){var i;if(!this._checkMetadataLoaded()){return null}this._mGetEntityAssociationEndCache=this._mGetEntityAssociationEndCache||{};i=e.namespace+"."+e.name+"/"+n;if(this._mGetEntityAssociationEndCache[i]===undefined){var a=e?t.findObject(e.navigationProperty,n):null,r=a?t.getObject(this.oMetadata.dataServices.schema,"association",a.relationship):null,s=r?t.findObject(r.end,a.toRole,"role"):null;this._mGetEntityAssociationEndCache[i]=s}return this._mGetEntityAssociationEndCache[i]};function c(t){var e={};for(var n=0;n<t.length;n++){var i=t[n];if(i.entityContainer){for(var a=0;a<i.entityContainer.length;a++){var r=i.entityContainer[a];if(r.entitySet){for(var s=0;s<r.entitySet.length;s++){if(r.entitySet[s].name!=null){e[r.entitySet[s].name]=r.entitySet[s]}}}}}}return e}h.prototype._findEntitySetByName=function(t){if(!this.mEntitySets){this.mEntitySets=c(this.oMetadata.dataServices.schema)}return this.mEntitySets[t]};h.prototype._getEntityTypeByPath=function(t){if(!t){e(undefined,"sPath not defined!");return null}if(this.mEntityTypes[t]){return this.mEntityTypes[t]}if(!this._checkMetadataLoaded()){return null}var n=t.replace(/^\/|\/$/g,""),i=n.split("/"),a=i.length,r,s,o,p,f=this;if(i[0].indexOf("(")!=-1){i[0]=i[0].substring(0,i[0].indexOf("("))}if(a>1){r=f._getEntityTypeByPath(i[0]);for(var u=1;u<i.length;u++){if(r){if(i[u].indexOf("(")!=-1){i[u]=i[u].substring(0,i[u].indexOf("("))}p=f._getEntityTypeByNavProperty(r,i[u]);if(p){r=p}o=r}}}else{s=this._splitName(this._getEntityTypeName(i[0]));o=this._getObjectMetadata("entityType",s.name,s.namespace);if(o){o.entityType=this._getEntityTypeName(i[0])}}if(!o){var y=i[i.length-1];var d=this._getFunctionImportMetadata(y,"GET");if(!d){d=this._getFunctionImportMetadata(y,"POST")}if(d&&d.entitySet){o=Object.assign({},this._getEntityTypeByPath(d.entitySet));if(o){o.entityType=this._getEntityTypeName(d.entitySet);o.isFunction=true}}}if(o){this.mEntityTypes[t]=o}return o};h.prototype._getEntityTypeByName=function(t){var n,a=this,r,s,o;if(!t){e(undefined,"sName not defined!");return null}o=this._splitName(t);s=o.namespace;r=o.name;if(!this._checkMetadataLoaded()){return null}if(this.mEntityTypes[t]){n=this.mEntityTypes[t]}else{i(this.oMetadata.dataServices.schema,function(e,o){if(o.entityType&&(!s||o.namespace===s)){i(o.entityType,function(e,i){if(i.name===r){n=i;a.mEntityTypes[t]=n;n.namespace=o.namespace;return false}return true})}})}return n};h.prototype._checkMetadataLoaded=function(){if(!this.oMetadata||r(this.oMetadata)){e(undefined,"No metadata loaded!");return false}return true};h.prototype._getAnnotation=function(t){var n,i,a,r,s,o,p;i=t.split("/#");r=i[1].split("/");if(!i[0]){s=this._getEntityTypeByName(r[0]);e(s,r[0]+" is not a valid EntityType");if(!s){return undefined}o=i[1].substr(i[1].indexOf("/")+1);p=this._getPropertyMetadata(s,o);e(p,o+" is not a valid property path");if(!p){return undefined}a=o.substr(o.indexOf(p.name));a=a.substr(a.indexOf("/")+1)}else{s=this._getEntityTypeByPath(i[0]);e(s,i[0]+" is not a valid path");if(!s){return undefined}t=i[0].replace(/^\/|\/$/g,"");o=t;while(!p&&o.indexOf("/")>0){o=o.substr(o.indexOf("/")+1);p=this._getPropertyMetadata(s,o)}e(p,o+" is not a valid property path");if(!p){return undefined}a=r.join("/")}n=this._getAnnotationObject(s,p,a);return n};h.prototype._getAnnotationObject=function(t,e,n){var i,a,r,s,o,p,f;if(!e){return undefined}p=e;f=n.split("/");if(f[0].indexOf(".")>-1){return this._getV4AnnotationObject(t,e,f)}else if(f.length>1){p=p[f[0]];if(!p&&e.extensions){for(o=0;o<e.extensions.length;o++){s=e.extensions[o];if(s.name==f[0]){p=s;break}}}n=f.splice(0,1);i=this._getAnnotationObject(t,p,f.join("/"))}else if(f[0].indexOf("@")>-1){a=f[0].substr(1);r=a.split(":");i=p[r[0]];if(!i&&p.extensions){for(o=0;o<p.extensions.length;o++){s=p.extensions[o];if(s.name===r[1]&&s.namespace===this.mNamespaces[r[0]]){i=s.value;break}}}}else{r=f[0].split(":");i=p[r[0]];i=p[f[0]];if(!i&&p.extensions){for(o=0;o<p.extensions.length;o++){s=p.extensions[o];if(s.name===r[1]&&s.namespace===this.mNamespaces[r[0]]){i=s;break}}}}return i};h.prototype._getV4AnnotationObject=function(t,n,a){var r,s=[];if(a.length>1){e(a.length==1,"'"+a.join("/")+"' is not a valid annotation path");return undefined}var o=t.namespace?t.namespace+".":"";o+=t.name+"/"+n.name;i(this.oMetadata.dataServices.schema,function(t,e){if(e.annotations){i(e.annotations,function(t,e){if(e.target===o&&!e.qualifier){s.push(e.annotation);return false}return true})}});if(s){i(s,function(t,e){i(e,function(t,e){if(e.term===a[0]){r=e}})})}return r};h.prototype._splitName=function(t){var e={};if(t){var n=t.lastIndexOf(".");e.name=t.substr(n+1);e.namespace=t.substr(0,n)}return e};h.prototype._getEntityTypeName=function(t){var e,n;if(t){n=this._findEntitySetByName(t);if(n){e=n.entityType}}return e};h.prototype._getObjectMetadata=function(t,e,n){var a;if(e&&n){i(this.oMetadata.dataServices.schema,function(r,s){if(s[t]&&s.namespace===n){i(s[t],function(t,n){if(n.name===e){a=n;a.namespace=s.namespace;return false}return true});return!a}return true})}return a};h.prototype.getUseBatch=function(){var t=false;i(this.oMetadata.dataServices.schema,function(e,n){if(n.entityContainer){i(n.entityContainer,function(e,n){if(n.extensions){i(n.extensions,function(e,n){if(n.name==="use-batch"&&n.namespace==="http://www.sap.com/Protocols/SAPData"){t=typeof n.value==="string"?n.value.toLowerCase()==="true":!!n.value;return false}return true})}})}});return t};h.prototype._getFunctionImportMetadataIterate=function(t,e){var n=[];i(this.oMetadata.dataServices.schema,function(a,r){if(r["entityContainer"]){i(r["entityContainer"],function(a,r){if(r["functionImport"]){i(r["functionImport"],function(i,a){if(t(a)){n.push(a);if(e){return false}}return true})}return!(e&&n.length===1)})}return!(e&&n.length===1)});return n};h.prototype._getFirstMatchingFunctionImportMetadata=function(t){var e=this._getFunctionImportMetadataIterate(t,true);return e.length===1?e[0]:null};h.prototype._getFunctionImportMetadataByName=function(t){if(t.indexOf("/")>-1){t=t.substr(t.indexOf("/")+1)}return this._getFunctionImportMetadataIterate(function(e){return e.name===t})};h.prototype._getFunctionImportMetadata=function(t,e){if(t.indexOf("/")>-1){t=t.subsgFunctionImportMetadata(function(n){return n.name===t&&n.httpMethod===e})};h.prototype._getEntityTypeByNavProperty=function(t,e){if(!t.navigationProperty){return undefined}for(var n=0;n<t.navigationProperty.length;++n){var i=t.navigationProperty[n];if(i.name===e){return this._getEntityTypeByNavPropertyObject(i)}}return undefined};h.prototype._getEntityTypeByNavPropertyObject=function(t){var e;var n=this._splitName(t.relationship);var i=this._getObjectMetadata("association",n.name,n.namespace);if(i){var a=i.end[0];if(a.role!==t.toRole){a=i.end[1]}var r=this._splitName(a.type);e=this._getObjectMetadata("entityType",r.name,r.namespace);if(e){e.entityType=a.type}}return e};h.prototype._getNavigationPropertyNanavigationProperty){i(t.navigationProperty,function(t,n){e.push(n.name)})}return e};h.prototype._getNavPropertyRefInfo=function(t,e){var n,a,r,s,o,p,f,u,y,d,h,c=this;i(t.navigationProperty,function(i,l){r=c._splitName(l.relationship);a=c._getObjectMetadata("association",r.name,r.namespace);if(!a||!a.refereialConstraint.dependent;y=a.end.find(function(t){return t.role===p.role});if(y.type!==t.namespace+"."+t.name){return}f=p.propertyRef.some(function(t){return t.name===e});if(!f){return}o=a.referentialConstraint.principal;uyAssociation(l.relationship);y=s.end.find(function(t){return t.role===u});d=y.entitySet;h=o.propertyRef.map(function(t){return t.name});n={name:l.name,entitySet:d,keys:h}});return n};h.prototype._getPropertyMetadata=function(t,e){var n,a=this;if(!t){return undefined}e=e.replace(/^\/|\/$/g,"");var r=e.split("/");i(t.property,function(t,e){if(e.name===r[0]){n=e;return false}return true});if(r.length>1){if(!n){while(t&&r.length>1){t=this._getEntityTypeByNavProperty(t,r[0]);r.shift()}if(t){n=a._getPropertyMetadata(t,r[0])}}else if(!n.type.toLowerCase().startsWith("edm.")){var s=this._splitName(n.type);n=this._getPropertyMetadata(this._getObjectMetadata("complexType",s.name,s.namespace),r[1])}}return n};h.prototype.destroy=function(){delete this.oMetadata;var t=this;i(this.mRequestHandles,function(e,n){n.bSuppressErrorHandlerCall=true;n.abort();delete t.mRequestHandles[e]});if(this.oLoadEvent){clearTimeout(this.oLoadEvent)}if(this.oFailedEvent){clearTimeout(this.oFailedEvent)}o.prototype.destroy.apply(this,arguments)};h.prototype._fillElementCaches=function(){var t=this;if(this._entitySetMap||!this._checkMetadataLoaded()){return}this._entitySetMap={};this.oMetadata.dataServices.schema.forEach(function(e){(e.entityContainer||[]).forEach(function(e){(e.entitySet||[]).forEach(function(e){var n=t._getEntityTypeByName(e.entitProperty||[]).forEach(function(t){n.__navigationPropertiesMap[t.name]=t});e.__entityType=n;t._entitySetMap[e.entityType]=e})})})};h.prototype._createRequest=function(t){var e={"sap-cancel-on-close":true},n={"Accept-Language":p.getLanguageTag()};a(e,this.mHeaders,n);var i={headers:e,requestUri:t,method:"GET",user:this.sUser,password:this.sPassword,async:this.bAsync};if(this.bAsync){i.withCredentials=this.bWithCredentials}return i};h.prototype._getEntitySetByPath=function(t){var e;this._fillElementCaches();e=this._getEntityTypeByPath(t);return e&&this._entitySetMap[e.entityType]};h.p;return Promise.all(e.map(function(t){return this._loadMetadata(t,true)},this))};h.prototype.merge=function(t,e,n){var a=this;if(this.mEntitySets){delete this.mEntitySets}i(t.dataServices.schema,function(t,r){i(e.dataServices.schema,function(t,e){if(e.namespace===r.namespace){if(e.entityType){if(!a.mEntityTypeNames){a.mEntityTypeNames={};r.entityType.map(function(t){a.mEntityTypeNames[t.name]=true})}r.entityType=!r.entityType?[]:r.entityType;for(var s=0;s<e.entityType.length;s++){if(!(e.entityType[s].name in a.mEntityTypeNames)){r.entityType.push(e.entityType[s]);a.mEntityTypeNames[e.entityType[s].name]=true}}}if(r.entityContainer&&e.entityContainer){i(r.entityContainer,function(t,r){i(e.entityContainer,function(t,e){if(e.entitySet){if(e.naySetNames={};r.entitySet.map(function(t){a.mEntitySetNames[t.name]=true})}r.entitySet=!r.entitySet?[]:r.entitySet;for(var i=0;i<e.entitySet.length;i++){if(!(e.entitySet[i].name in a.mEntitySetNames)){r.entitySet.push(e.entityes[e.entitySet[i].name]=true}}e.entitySet.forEach(function(t){n.push(t)})}}})})}if(e.annotations){r.annotations=!r.annotations?[]:r.annotations;r.annotations=r.annotations.concat(e.annotations)}}})});return t};h.prototype._getEntitySetByType=function(t){var e=t.namespace+"."+t.name;var n=this.oMetadata.dataServices.schema;for(var i=0;i<n.length;++i){var a=n[i].entityContainer;if(a){for(var r=0;r<a.length;++r){var s=a[r].entitySet;if(s){for(var o=0;o<s.length;++o){if(s[o].entityType===e){return s[o]}}}}}}return null};h.prototype._calculateCanonicalPath=function(t){var e,n,i,a;if(t){n=t.lastIndexOf(")");if(n!==-1){a=t.substr(0,n+1);var r=this._getEntitySetByPath(a);if(r){if(r.__entityType.isFunction){e=t}else{i=t.split("/");if(a==="/"+i[1]){if(!(i[2]in r.__entityType.__navigationPropertiesMap)){e=t}}else{i=a.split("/");a="/"+r.name+i[i.length-1].substr(i[i.length-1].indexOf("("))+t.substr(n+1);if(a!==t){e=a}}}}}}return e};h.prototype._getAssociationSetByAssociation=function(t){var e=this.oMetadata.dataServices.schema;for(var n=0;n<e.length;++n){var i=e[n].entityContainer;if(i){for(var a=0;a<i.length;++a){var r=i[a].associationSet;if(r){for(var s=0;s<r.length;++s){if(r[s].association===t){return r[s]}}}}}}return null};h.prototype._isMessageScopeSupported=function(){var t=this.oMetadata.dataServices.schema,e,n;if(!this.bMessageScopeSupported&&t){for(var i=0;i<t.length;++i){n=t[i].entityContainer;if(n){for(var a=0;a<n.length;++a){e=n[a];if(e.extensions&&Array.isArray(e.extensions)){for(var r=0;r<e.extensions.length;++r){if(e.extensions[r].name==="message-scope-supported"&&e.extensions[r].namespace===this.mNamespaces.sap){if(e.extensions[r].value==="true"){this.bMessageScopeSupported=true;break}}}}}}}}return this.bMessageScopeSupported};h.prototype._isCollection=function(t){var e=false;var n=t.lastIndexOf("/");if(n>0){var i=t.substring(0,n);var a=this._getEntityTypeByPath(i);if(a){var r=this._getEntityAssociationEnd(a,t.substring(n+1));if(r&&r.multiplicity==="*"){e=true}}}else{e=true}return e};h.prototype._getReducedPath=function(t){var e,n,i,a,r,s,o,p=t.split("/"),f;if(p.length<4){return t}this._fillElementCaches();for(n=1;n<p.length-2;n+=1){f=this._getEntityTypeByPath(p.slice(0,n+1).join("/"));r=f&&f.__navigationPropertiesMap[p[n+1].split("(")[0]];if(!r){continue}o=p[n+2].split("(")[0];a=this._getEntityTypeByNavPropertyObject(r);s=a&&a.__navigationPropertiesMap[o];if(!s||r.relationship!==s.relationship){continue}i=p[n+2].slice(o.length);e=this._getEntityAssociationEnd(a,o);if(e.multiplicity!=="*"||i&&p[n].endsWith(i)){p.splice(n+1,2);return this._getReducedPath(p.join("/"))}}return p.join("/")};h.prototype.getKeyPropertyNamesByPath=function(t){var e,n,i=t.lastIndexOf("/");if(i>0){n=this._getEntityTypeByPath(t.slice(0,i));if(n){e=this._getEntityAssociationEnd(n,t.slice(i+1).split("(")[0]);n=e?this._getEntityTypeByName(e.type):undefined}}else{n=this._getEntityTypeByPath(t)}return n&&n.key.propertyRef.map(function(t){return t.name})};h.prototype._getCanonicalPathOfFunctionImport=function(t,e){var i,a,r,s,o,p,f,u=t.extensions,d=t.returnType,c="",l=false;if(u){for(s=0;s<u.length;s+=1){if(u[s].name==="action-for"){i=u[s].value;break}}}if(h._returnsCollection(t)){l=true;d=d.slice(11,-1)}if(i){r=this._getEntityTypeByName(i)}else if(t.entitySet){r=this._getEntityTypeByPath(t.entitySet)}else if(d){r=this._getEntityTypeByName(d)}if(r){a=this._getEntitySetByType(r);if(a&&r.key&&r.key.propertyRef){if(l){return"/"+a.name}f=r.key.propertyRef;if(f.length===1){p=f[0].name;if(e[p]){c=encodeURIComponent(e[p])}}else{o=[];for(s=0;s<f.length;s+=1){p=f[s].name;if(e[p]){o.push(p+"="+encodeURIComponent(e[p]))}}c=o.join(",")}return"/"+a.name+"("+c+")"}else if(!a){n.error("Cannot determine path of the entity set for the function import '"+t.name+"'",this,y)}else{n.error("Cannot determine keys of the entity type '"+r.entityType+"' for the function import '"+t.name+"'",this,y)}}return""};h.prototype._splitByLastNavigationProperty=function(t){var e,n,i,a,r,s=t.split("/"),o="/"+s[1],p=s.length;this._fillElementCaches();e=this._getEntityTypeByPath(o);for(n=2;n<p;n+=1){r=s[n];i=r.indexOf("(");if(i!==-1){r=r.slice(0,i)}if(e&&e.__navigationPropertiesMap[r]){a=n;e=this._getEntityTypeByNavProperty(e,r)}else{break}}if(a===undefined){return{pathBeforeLastNavigationProperty:t,lastNavigationProperty:"",addressable:true,pathAfterLastNavigationProperty:""}}return{pathBeforeLastNavigationProperty:s.slice(0,a).join("/"),lastNavigationProperty:"/"+s[a],addressable:this._isAddressable(e),pathAfterLastNavigationProperty:a+1>=p?"":"/"+s.slice(a+1).join("/")}};h.prototype._isAddressable=function(t){var e;if(!t){return true}e=this._entitySetMap[t.entityType];if(!e||!e.extensions){return true}return!e.extensions.some(function(t){return t.name==="addressable"&&t.namespace===d&&t.value==="false"})};return h});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/_AnnotationHelperExpression",["./_AnnotationHelperBasics","sap/base/Log","sap/ui/base/BindingParser","sap/ui/base/ManagedObject","sap/ui/core/CalendarType","sap/ui/core/format/DateFormat","sap/ui/model/odata/ODataUtils","sap/ui/performance/Measurement"],function(e,t,r,a,n,i,s,o){"use strict";var u="sap.ui.model.odata.AnnotationHelper",l,p,d="\\d{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12]\\d|3[01])",c="[-+]?\\d+(?:\\.\\d+)?",m="9007199254740991",f="-"+m,g=[u],y=u+"/getExpression",E,v="(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(\\.\\d{1,12})?)?",T={Bool:/^true$|^false$/i,Float:new RegExp("^"+c+"(?:[eE][-+]?\\d+)?$|^NaN$|^-INF$|^INF$"),Date:new RegExp("^"+d+"$"),DateTimeOffset:new RegExp("^"+d+"T"+v+"(?:Z|[-+](?:0\\d|1[0-3]):[0-5]\\d|[-+]14:00)$","i"),Decimal:new RegExp("^"+c+"$"),Guid:/^[A-F0-9]{8}-(?:[A-F0-9]{4}-){3}[A-F0-9]{12}$/i,Int:/^[-+]?\d{1,19}$/,TimeOfDay:new RegExp("^"+v+"$")},D,x=/^\{@i18n>[^\\\{\}:]+\}$/,S=/^\d+$/,h={And:"&&",Eq:"===",Ge:">=",Gt:">",Le:"<=",Lt:"<",Ne:"!==",Not:"!",Or:"||"},O=/^(\/dataServices\/schema\/\d+)(?:\/|$)/,b={"Edm.Boolean":"boolean","Edm.Byte":"number","Edm.Date":"date","Edm.DateTime":"datetime","Edm.DateTimeOffset":"datetime","Edm.Decimal":"decimal","Edm.Double":"number","Edm.Float":"number","Edm.Guid":"string","Edm.Int16":"number","Edm.Int32":"number","Edm.Int64":"decimal","Edm.SByte":"number","Edm.Single":"number","Edm.String":"string","Edm.Time":"time","Edm.TimeOfDay":"time"},P={Bool:"Edm.Boolean",Float:"Edm.Double",Date:"Edm.Date",DateTimeOffset:"Edm.DateTimeOffset",Decimal:"Edm.Decimal",Guid:"Edm.Guid",Int:"Edm.Int64",String:"Edm.String",TimeOfDay:"Edm.TimeOfDay"},w={boolean:false,date:true,datetime:true,decimal:true,number:false,string:false,time:true};D={_setDateTimeFormatter:function(){l=i.getDateInstance({calendarType:n.Gregorian,pattern:"yyyy-MM-dd",strictParsing:true,UTC:true});p=i.getDateTimeInstance({calendarType:n.Gregorian,pattern:"yyyy-MM-dd'T'HH:mm:ss.SSSXXX",strictParsing:true});E=i.getTimeInstance({calendarType:n.Gregorian,pattern:"HH:mm:ss.SSS",strictParsing:true,UTC:true})},adjustOperands:function(e,t){if(e.result!=="constant"&&e.category==="number"&&t.result==="constant"&&t.type==="Edm.Int64"){t.category="number"}if(e.result!=="constant"&&e.category==="decimal"&&t.result==="constant"&&t.type==="Edm.Int32"){t.category="decimal";t.type=e.type}if(e.result==="constant"&&e.category==="date"&&t.result!=="constant"&&t.category==="datetime"){t.category="date"}},apply:function(t,r){var a=e.descend(r,"Name","string"),n=e.descend(r,"Parameters");switch(a.value){case"odata.concat":return D.concat(t,n);case"odata.fillUriTemplate":return D.fillUriTemplate(t,n);case"odata.uriEncode":return D.uriEncode(t,n);default:e.error(a,"unknown function: "+a.value);return undefined}},concat:function(t,r){var a=r.asExpression,n=[],i,s=[];e.expectType(r,"array");r.value.forEach(function(e,n){i=D.parameter(t,r,n);a=a||i.result==="expression";s.push(i)});s.forEach(function(t){if(a){D.wrapExpression(t)}if(t.type!=="edm:Null"){n.push(e.resultToString(t,a,r.withType))}});i=a?{result:"expression",value:n.join("+")}:{result:"composite",value:n.join("")};i.type="Edm.String";return i},conditional:function(t,r){var a=D.parameter(t,r,0,"Edm.Boolean"),n=D.parameter(t,r,1),i=D.parameter(t,r,2),s=n.type,o=r.withType;if(n.type==="edm:Null"){s=i.type}else if(i.type!=="edm:Null"&&n.type!==i.type){e.error(r,"Expected same type for second and third parameter, types are '"+n.type+"' and '"+i.type+"'")}return{result:"expression",type:s,value:e.resultToString(D.wrapExpression(a),true,false)+"?"+e.resultToString(D.wrapExpression(n),true,o)+":"+e.resultToString(D.wrapExpression(i),true,o)}},constant:function(t,r,a){var n=r.value;e.expectType(r,"string");if(a==="String"){if(x.test(n)){return{ignoreTypeInPath:true,result:"binding",type:"Edm.String",value:n.slice(1,-1)}}else if(t.getSetting&&t.getSetting("bindTexts")){return{result:"binding",type:"Edm.String",ignoreTypeInPath:true,value:"/##"+D.replaceIndexes(t.getModel(),r.path)}}a="Edm.String"}else if(!T[a].test(n)){e.error(r,"Expected "+a+" value but instead saw '"+n+"'")}else{a=P[a];if(a==="Edm.Int64"&&s.compare(n,f,true)>=0&&s.compare(n,m,true)<=0){a="Edm.Int32"}}return{result:"constant",type:a,value:n}},expression:function(t,r){var a=r.value,n,i;e.expectType(r,"object");if(a.hasOwnProperty("Type")){i=e.property(r,"Type","string");n=e.descend(r,"Value")}else{["And","Apply","Bool","Date","DateTimeOffset","Decimal","Float","Eq","Ge","Gt","Guid","If","Int","Le","Lt","Ne","Not","Null","Or","Path","PropertyPath","String","TimeOfDay"].forEach(function(t){if(a.hasOwnProperty(t)){i=t;n=e.descend(r,t)}})}switch(i){case"Apply":return D.apply(t,n);case"If":return D.conditional(t,n);case"Path":case"PropertyPath":return D.path(t,n);case"Bool":case"Date":case"DateTimeOffset":case"Decimal":case"Float":case"Guid":case"Int":case"String":case"TimeOfDay":return D.constant(t,n,i);case"And":case"Eq":case"Ge":case"Gt":case"Le":case"Lt":case"Ne":case"Or":return D.operator(t,n,i);case"Not":return D.not(t,n);case"Null":return{result:"constant",value:"null",type:"edm:Null"};default:e.error(r,"Unsupported OData expression");return undefined}},formatOperand:function(t,r,a,n){var i;if(a.result==="constant"){switch(a.category){case"boolean":case"number":return a.value;case"date":i=D.parseDate(a.value);if(!i){e.error(e.descend(t,r),"Invalid Date "+a.value)}return String(i.getTime());case"datetime":i=D.parseDateTimeOffset(a.value);if(!i){e.error(e.descend(t,r),"Invalid DateTime "+a.value)}return String(i.getTime());case"time":return String(D.parseTimeOfDay(a.value).getTime())}}if(n){D.wrapExpression(a)}return e.resultToString(a,true)},getExpression:function(n,i,s){var l;if(i===undefined){return undefined}o.average(y,"",g);if(!D.simpleParserWarningLogged&&a.bindingParser===r.simpleParser){t.warning("Complex binding syntax not active",null,u);D.simpleParserWarningLogged=true}try{l=D.expression(n,{asExpression:false,path:n.getPath(),value:i,withType:s});o.end(y);return e.resultToString(l,false,s)}catch(t){o.end(y);if(t instanceof SyntaxError){return"Unsupported: "+r.complexParser.escape(e.toErrorString(i))}throw t}},fillUriTemplate:function(t,r){var a,n,i=[],s="",o,u=r.value,l,p=D.parameter(t,r,0,"Edm.String");i.push("odata.fillUriTemplate(",e.resultToString(p,true),",{");for(a=1;a<u.length;a+=1){o=e.descend(r,a,"object");n=e.property(o,"Name","string");l=D.expression(t,e.descend(o,"Value"),true);i.push(s,e.toJSON(n),":",e.resultToString(l,true));s=","}i.push("})");return{result:"expression",value:i.join(""),type:"Edm.String"}},not:function(t,r){var a;r.asExpression=true;a=D.expression(t,r);return{result:"expression",value:"!"+e.resultToString(D.wrapExpression(a),true),type:"Edm.Boolean"}},operator:function(t,r,a){var n=a==="And"||a==="Or"?"Edm.Boolean":undefined,i=D.parameter(t,r,0,n),s=D.parameter(t,r,1,n),o,u,l,p;if(i.type!=="edm:Null"&&s.type!=="edm:Null"){i.category=b[i.type];s.category=b[s.type];D.adjustOperands(i,s);D.adjustOperands(s,i);if(i.category!==s.category){e.error(r,"Expected two comparable parameters but instead saw "+i.type+" and "+s.type)}o=i.category==="decimal"?",true":"";u=w[i.category]}l=D.formatOperand(r,0,i,!u);p=D.formatOperand(r,1,s,!u);return{result:"expression",value:u?"odata.compare("+l+","+p+o+")"+h[a]+"0":l+h[a]+p,type:"Edm.Boolean"}},parameter:function(t,r,a,n){var i=e.descend(r,a),s;i.asExpression=true;s=D.expression(t,i);if(n&&n!==s.type){e.error(i,"Expected "+n+" but instead saw "+s.type)}return s},parseDate:function(e){return l.parse(e)},parseDateTimeOffset:function(e){var t=T.DateTimeOffset.exec(e);if(t&&t[1]&&t[1].length>4){e=e.replace(t[1],t[1].slice(0,4))}return p.parse(e.toUpperCase())},parseTimeOfDay:function(e){if(e.length>12){e=e.slice(0,12)}return E.parse(e)},path:function(r,a){var n=a.value,i={},s,o,l,p=r.getModel(),d={getModel:function(){return p},getPath:function(){return a.path}},c,m={result:"binding",value:n},f;e.expectType(a,"string");f=e.followPath(d,{Path:n});if(f&&f.resolvedPath){c=p.getProperty(f.resolvedPath);m.type=c.type;switch(c.type){case"Edm.DateTime":i.displayFormat=c["sap:display-format"];break;case"Edm.Decimal":if(c.precision){i.precision=c.precision}if(c.scale){i.scale=c.scale}l=c["Org.OData.Validation.V1.Minimum"];if(l&&(l.Decimal||l.String)){i.minimum=l.Decimal||l.String;s=l["Org.OData.Validation.V1.Exclusive"];if(s){i.minimumExclusive=s.Bool||"true"}}l=c["Org.OData.Validation.V1.Maximum"];if(l&&(l.Decimal||l.String)){i.maximum=l.Decimal||l.String;s=l["Org.OData.Validation.V1.Exclusive"];if(s){i.maximumExclusive=s.Bool||"true"}}break;case"Edm.String":i.maxLength=c.maxLength;o=c["com.sap.vocabularies.Common.v1.IsDigitSequence"];if(o){i.isDigitSequence=o.Bool||"true"}break}if(c.nullable==="false"){i.nullable="false"}m.constraints=i}else{t.warning("Could not find property '"+n+"' starting from '"+a.path+"'",null,u)}return m},replaceIndexes:function(t,r){var a,n=r.split("/"),i,s;function o(r,a){var s=t.getProperty(i+"/"+r);if(typeof s==="string"){n[a]="[${"+r+"}==="+e.toJSON(s)+"]";return true}return false}a=O.exec(r);if(!a){return r}i=a[1];if(!o("namespace",3)){return r}for(var u=4;u<n.length;u+=1){i=i+"/"+n[u];if(S.test(n[u])&&!o("name",u)){s=t.getProperty(i+"/RecordType");if(s){if(s==="com.sap.vocabularies.UI.v1.DataFieldForAction"){o("Action/String",u)}else if(s==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){o("Target/AnnotationPath",u)}else if(s.indexOf("com.sap.vocabularies.UI.v1.DataField")===0){o("Value/Path",u)}}}}return n.join("/")},simpleParserWarningLogged:false,uriEncode:function(t,r){var a=D.parameter(t,r,0);if(a.result==="constant"){if(a.type==="Edm.Date"){a.type="Edm.DateTime";a.value=a.value+"T00:00:00Z"}else if(a.type==="Edm.TimeOfDay"){a.type="Edm.Time";a.value="PT"+a.value.slice(0,2)+"H"+a.value.slice(3,5)+"M"+a.value.slice(6,8)+"S"}}return{result:"expression",value:"odata.uriEncode("+e.resultToString(a,true)+","+e.toJSON(a.type)+")",type:"Edm.String"}},wrapExpression:function(e){if(e.result==="expression"){e.value="("+e.value+")"}return e}};D._setDateTimeFormatter();return D});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v2/ODataListBinding",["sap/base/assert","sap/base/Log","sap/base/util/deepEqual","sap/base/util/each","sap/base/util/isEmptyObject","sap/base/util/uid","sap/ui/model/ChangeReason","sap/ui/model/Context","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/model/FilterType","sap/ui/model/ListBinding","sap/ui/model/Sorter","sap/ui/model/SorterProcessor","sap/ui/model/odata/CountMode","sap/ui/model/odata/Filter","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/OperationMode"],function(t,e,s,i,a,n,r,o,h,l,d,u,f,p,c,g,C,y,m){"use strict";var b=["changeSetId","error","expand","groupId","inactive","success"];var P=f.extend("sap.ui.model.odata.v2.ODataListBinding",{constructor:function(t,e,s,i,a,n){f.apply(this,arguments);this.sFilterParams=null;this.sSortParams=null;this.sRangeParams=null;this.sCustomParams=this.oModel.createCustomParams(this.mParameters);this.mCustomParams=n&&n.custom;this.iStartIndex=0;this.iLength=0;this.bPendingChange=false;this.aAllKeys=null;this.aKeys=[];this.sCountMode=n&&n.countMode||this.oModel.sDefaultCountMode;this.sOperationMode=n&&n.operationMode||this.oModel.sDefaultOperationMode;this.bUsePreliminaryContext=n&&n.usePreliminaryContext||t.bPreliminaryContext;if(!this.bUsePreliminaryContext&&s&&s.isPreliminary&&s.isPreliminary()){this.oContext=s=undefined}this.bRefresh=false;this.bNeedsUpdate=false;this.bDataAvailable=false;this.bIgnoreSuspend=false;this.bPendingRefresh=false;this.sGroupId=undefined;this.sRefreshGroupId=undefined;this.bLengthRequested=false;this.bUseExtendedChangeDetection=false;this.bFaultTolerant=n&&n.faultTolerant;this.bLengthFinal=false;this.iLastEndIndex=0;this.aLastContexts=null;this.aLastContextData=null;this.bInitial=true;this.mRequestHandles={};this.oCountHandle=null;this.bSkipDataEvents=false;this.bUseExpandedList=false;this.oCombinedFilter=null;this.sDeepPath=t.resolveDeep(e,s);this.bCanonicalRequest=n&&n.bCanonicalRequest;this.mNormalizeCache={};this.bTransitionMessagesOnly=!!(n&&n.transitionMessagesOnly);this.sCreatedEntitiesKey=n&&n.createdEntitiesKey||"";this.oCreatedPersistedToRemove=new Set;this.bRemovePersistedCreatedAfterRefresh=false;this.oModel.checkFilterOperation(this.aApplicationFilters);if(n&&(n.batchGroupId||n.groupId)){this.sGroupId=n.groupId||n.batchGroupId}this.iThreshold=n&&n.threshold||0;this.bThresholdRejected=false;if(this.sCountMode==g.None){this.bThresholdRejected=true}if(!this.checkExpandedList()){this._removePersistedCreatedContexts();this.resetData()}this._reassignCreateActivate()},metadata:{publicMethods:["getLength"]}});P.prototype.attachCreateActivate=function(t,e){tachCreateActivate=function(t,e){this.detachEvent("createActivate",t,e)};P.prototype._updateLastStartAndLength=function(t,e,s,i){if(i){this._checkKeepCurrentSupported(s)}else{this.iLastStartIndex=t;this.iLastLength=e;this.iLastMaximumPrefetchSize=s}};P.prototype.getAllCurrentContexts=function(){var t=this._getCreatedContexts(),e=this;this.aKeys.forEach(function(s){t.push(e.oModel.getContext("/"+s))});return t};P.prototype.getContexts=function(t,e,s,i){var a,n,o;if(this.bInitial){return[]}if(!this.bLengthFinal&&this.sOperationMode==m.Auto&&(this.sCountMode==g.Request||this.sCountMode==g.Both)){if(!this.bLengthRequested){this._getLength();this.bLengthRequested=true}return[]}if(!this.bLengthFinal&&!this.bPendingRequest&&!this.bLengthRequested){this._getLength();this.bLengthRequested=true}this._updateLastStartAndLength(t,e,s,i);if(!t){t=0}if(!e){e=this._getMaximumLength()}if(!s){s=0}if(this.sOperationMode==m.Auto){if(this.iThreshold>=0){s=Math.max(this.iThreshold,s)}}a=this._getContexts(t,e);if(this._hasTransientParentContext()){}else if(this.useClientMode()){if(!this.aAllKeys&&!this.bPendingRequest&&this.oModel.getServiceMetadata()){this.loadData();a.dataRequested=true}}else{o=this._getSkipAndTop(t,e,s);if(this.oModel.getServiceMetadata()){if(!this.bPendingRequest&&o){this.loadData(o.skip,o.top);a.dataRequested=true}}}if(this.isFirstCreateAtEnd()&&this.bPendingRequest&&a.length&&a[0].isTransient()!==undefined){a.length=0}if(this.bRefresh){this.bRefresh=false;if(!a.dataRequested&&a.length>0){this._fireChange({reason:r.Change})}}else if(!i){n=[];for(var h=0;h<a.length;h++){n.push(this.getContextData(a[h]))}if(this.bUseExtendedChangeDetection){if(this.aLastContexts&&t<this.iLastEndIndex){a.diff=this.diffData(this.aLastContextData,n)}}this.iLastEndIndex=t+e;this.aLastContexts=a.slice(0);this.aLastContextData=n}return a};P.prototype.getCurrentContexts=function(){return this.aLastContexts||[]};P.prototryData=function(t){return JSON.stringify(t.getObject(this.mParameters))};P.prototype._getContexts=function(t,e){var s,i,a,n,r=this.isFirstCreateAtEnd(),o=[],h=this._getCreatedContexts(),l=h.length,d=this.oModel.resolveDeep(this.sPath,this.oContext);if(!t){t=0}if(!e){e=this._getMaximumLength()}a=t+e;for(i=t;i<a;i+=1){if(!r&&i<l){s=h[i]}else if(r&&i>=this.iLength){if(i-this.iLength>=l){break}s=h[i-this.iLength]}else{n=this.aKeys[r?i:i-l];if(!n){break}s=this.oModel.getContext("/"+n,d+n.substr(n.indexOf("(")))}o.push(s)}return o};P.prototype.setContext=function(t){var s,i,a=t&&t.isRefreshForced(),n=t&&t.isPreliminary(),h=t&&t.isUpdated();if(this.bInitial||!this.isRelative()){return}if(n&&!this.bUsePreliminaryContext){return}if(h&&this.bUsePreliminaryContext&&this.oContext===t){this._fireChange({reason:r.Context});return}if(o.hasChanged(this.oContext,t)){s=this.isResolved()&&!this._hasTransientParentWithoutSubContexts();this.oContext=t;i=this.getResolvedPath();this.sDeepPath=this.oModel.resolveDeep(this.sPath,this.oContext);if(!this._checkPathType()){e.error("List Binding is not bound against a list for "+i)}this.checkDataState();if(!i||this._hasTransientParentWithoutSubContexts()){this.aAllKeys=null;this.aKeys=[];this.iLength=0;this.bLengthFinal=true;this.abortPendingRequest();if(s){this._fireChange({reason:r.Context})}return}this._initSortersFilters();if(this.checkExpandedList()&&!a){this.abortPendingRequest();this._fireChange({reason:r.Context})}else{this._removePersistedCreatedContexts();this._refresh()}}};P.prototype._cleanupCreatedPersisted=function(){var t=false,e=this.oModel._getObject(this.sPath,this.oContext),s=this;function i(e){s.oModel._discardEntityChanges(e,true);t=true}if(this.oCreatedPersistedToRemove.size&&!this.bSuspended){this.oCreatedPersistedToRemove.forEach(i);this.oCreatedPersistedToRemove.clear()}if(e&&e.sideEffects){this._getCreatedPersistedContexts().forEach(function(t){var a=s.oModel.getKey(t);if(!e.includes(a)){if(s.bSuspended){s.oCreatedPersistedToRemove.add(a)}else{i(a)}}})}return t};P.prototype.checkExpandedList=function(t){var e,s=this.oModel._getObject(this.sPath,this.oContext),i=this.bUseExpandedList,a=this;if(!this.isResolved()||s===undefined||!this._isExpandedListUsable()){this.bUseExpandedList=false;this.aExpandRefs=undefined;return false}else{this.bUseExpandedList=true;if(Array.isArray(s)){if(!t&&(this.oModel._isReloadNeeded("/"+s[0],this.mParameters)||this.oModel._isReloadNeeded("/"+s[s.length-1],this.mParameters))){this.bUseExpandedList=false;this.aExpandRefs=undefined;return false}this.aExpandRefs=s;if(s.sideEffects){e=this._getCreatedPersistedContexel.getKey(t)});if(e.length){s=s.filter(function(t){return!e.includes(t)})}}this.aAllKeys=s;this.iLength=s.length;this.bLengthFinal=true;this.bDataAvailable=true;this._initSortersFilters();this.applyFilter();this.applySort();if(this.aExpandRefs.sideEffects&&!i){this.aExpandRefs=undefined;this.bUseExpandedList=false;return this.bUseExpandedList}}else{this.aExpandRefs=undefined;this.aAllKeys=null;this.aKeys=[];this.iLength=0;this.bLengthFinal=true;this.bDataAvailable=true}return true}};P.prototype.updateExpandedList=function(t){if(this.aExpandRefs){for(var e=0;e<t.length;e++){this.aExpandRefs[e]=t[e]}this.aExpandRefs.length=t.length}};P.prototype.useClientMode=function(){return this.sOperationMode===m.Client||this.sOperationMode===m.Auto&&!this.bThresholdRejected||this.sOperationMode!==m.Server&&this.bUseExpandedList};P.prototype._addFilterQueryOption=function(t,e){var s=this._getCreatedPersistedExcludeFilter();if(this.sFilterParams&&e){if(s){t.push("$filter=("+this.sFilterParams.slice(8)+")%20and%20"+s)}else{t.push(this.sFilterParams)}}else if(s){t.push("$filter="+s)}};P.prototype._getCreatedPersistedContexts=function(){return this._getCreatedContexts().filter(function(t){return!t.isTransient()})};P.prototype._getCreatedPersistedExcludeFilter=function(){var t,e,s=this._getCreatedPersistedContexts(),i=this;if(s.length>0){e=s.map(function(t){var e=t.getPath();return i._getFilterForPredicate(e.slice(e.indexOf("(")))});t="not("+y._createFilterParams(e.length===1?e[0]:new h({filters:e}),this.oModel.oMetadata,this.oEntityType)+")"}return t};P.prototype.loadData=function(t,e){var s,a=n(),o=false,h=[],l=this.sPath,d=this.bRemovePersistedCreatedAfterRefresh,u=this;if(t||e){this.sRangeParams="$skip="+t+"&$top="+e;this.iStartIndex=t}else{t=this.iStartIndex}if(this.sRangeParams&&!this.useClientMode()){h.push(this.sRangeParams)}if(this.sSortParams){h.push(this.sSortParams)}this._addFilterQueryOption(h,!this.useClientMode());if(this.sCustomParams){h.push(this.sCustomParams)}if(this.sCountMode==g.InlineRepeat||!this.bLengthFinal&&(this.sCountMode===g.Inline||this.sCountMode===g.Both)){h.push("$inlinecount=allpages");o=true}function f(s){if(o&&s.__count!==undefined){u.iLength=parseInt(s.__count);u.bLengthFinal=true;if(u.sOperationMode==m.Auto){if(u.iLength<=u.mParameters.threshold){u.bThresholdRejected=false}else{u.bThresholdRejected=true;delete u.mRequestHandles[a];u.bPendingRequest=false;u()){u.aKeys=[];i(s.results,function(t,e){u.aKeys[t]=u.oModel._getKey(e)});u.updateExpandedList(u.aKeys);u.aAllKeys=u.aKeys.slice();u.iLength=u.aKeys.length;u.bLengthFinal=true;u.applyFilter();u.applySort()}else if(s.results.length>0){i(s.results,function(e,s){u.aKeys[t+e]=u.oModel._getKey(s)});if(u.iLength<t+s.results.length){u.iLength=t+s.results.length;u.bLengthFinal=false}if(!s.__next&&(s.results.length<e||e===undefined)){u.iLength=t+s.results.length;u.bLengthFinal=true}}else{if(u.bFaultTolerant&&s.__next){u.iLength=t;u.bLengthFinal=true}if(t===0){u.iLength=0;u.aKeys=[];u.bLengthFinal=true}if(t===u.iLength){u.bLengthFinal=true}}delete u.mRequestHandles[a];u.bPendingRequest=false;u.bNeedsUpdate=true;u.bIgnoreSuspend=true;if(d){u._removePersistedCreatedContexts()}u.oModel.callAfterUpdate(function(){u.fireDataReceived({data:s})})}function p(t){var e=t.statusCode==0;delete u.mRequestHandles[a];u.bPendingRequest=false;if(u.bFaultTolerant){u.iLength=u.aKeys.length;u.bLengthFinal=true;u.bDataAvailable=true}else if(!e){u.aKeys=[];u.aAllKeys=[];u.iLength=0;u.bLengthFinal=true;u.bDataAvailable=true;u._fireChange({reason:r.Change})}if(!u.bSkipDataEvents){u.fireDataReceived()}}if(this.isRelative()){l=this.getResolvedPath()}if(l){this.bPendingRequest=true;if(!this.bSkipDataEvents){this.fireDataRequested()}this.bSkipDataEvents=false;s=this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId;this.mRequestHandles[a]=this.oModel.read(this.sPath,{headers:this.bTransitionMessagesOnly?{"sap-messages":"transientOnly"}:undefined,context:this.oContext,groupId:s,urlParameters:h,success:f,error:p,canonicalRequest:this.bCanonicalRequest,updateAggregatedMessages:this.bRefresh})}};P.prototype.isLengthFinal=function(){return this.bLengthFinal};P.prototype.getLength=function(){var t=this.iLength+this._getCreatedContexts().length;if(this.bLengthFinal||this.iLength===0){return t}return t+(this.iLastMaximumPrefetchSize||this.iLastLength||10)};P.prototype._getLength=function(){var t,s,a=[],n=this;if(this.sCountMode!==g.Request&&this.sCountMode!==g.Both){return}this._addFilterQueryOption(a,this.sOperationMode!==m.Auto);if(this.mParametevar o={custom:{}};i(this.mParameters.custom,function(t,e){o.custom[t]=e});a.push(this.oModel.createCustomParams(o))}function h(t){n.iLength=parseInt(t);n.bLengthFinal=true;n.bLengthRequested=true;n.oCountHandle=null;if(n.sOperationMode==m.Auto){if(n.iLength<=n.mParameters.threshold){n.bThresholdRejected=false}else{n.bThresholdRejected=true}n._fireChange({reason:r.Change})}}function l(t){delete n.mRequestHandles[s];var i="Request for $count failed: "+t.message;if(t.response){i+=", "+t.response.statusCode+", "+t.response.statusText+", "+t.response.body}e.warning(i)}s=this.getResolvedPath();if(s){t=this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId;this.oCountHandle=this.oModel.read(this.sPath+"/$count",{context:this.oContext,withCredentials:this.oModel.bWithCredentials,groupId:t,urlParameters:a,success:h,error:l,canonicalRequest:this.bCanonicalRequest})}};P.prototype._getMaximumLength=function(){var t=this.oModel.iSizeLimit;if(this.bLengthFinal){t=Math.min(t,this.iLength+this._getCreatedContexts().length)}return t};P.prototype.refresh=function(t,e){if(typeof t==="string"){e=t;t=false}this._removePersistedCreatedContexts();this.sRefreshGroupId=e;this.bRemovePersistedCreatedAfterRefresh=true;this._refresh(t);this.sRefreshGroupId=undefined;this.bRemovePersistedCreatedAfterRefresh=false};P.prototype._refresh=function(t,e,s){var a,n,o=false;if(this._hasTransientParentWithoutSubContexts()){return}if(!t){if(s){n=this.getResolvedPath();if(n){a=this.oModel.oMetadata._getEntityTypeByPath(n);if(a&&a.entityType in s){o=true}}}if(e&&!o){i(this.aKeys,function(t,s){if(s in e){o=true;return false}return true})}if(!e&&!s){o=true}}if(t||o){if(this.bSuspended&&!this.bIgnoreSuspend&&!t){this.bPendingRefresh=true;return}this.bPendingRefresh=false;this.abortPendingRequest(true);this.resetData();this._fireRefresh({reason:r.Refresh})}};P.prototype._fireRefresh=function(t){if(this.getResolvedPath()){this.bRefresh=true;this.fireEvent("refresh",t)}};P.prototype._checkPathType=function(){var t=this.getResolvedPath();if(t){if(!this._mPathType||!this._mPathType[t]){this._mPathType={};var e=t.lastIndexOf("/");var s,i;if(e>1){i=this.oModel.oMetadata._getEntityTypeByPath(t.substring(0,e));if(i){s=this.oModel.oMetadata._getEntityAssociationEnd(i,t.substring(e+1));if(s&&s.multiplicity==="*"){this._mPathType[t]=true}}}else if(e===0){var a,n=t.substring(1);a=this.oModel.oMetadata._findEntitySetByName(n);if(a){this._mPathType[t]=true}else{var r=this.oModel.oMetadata._getFunctionImportMetadataByName(n);for(var o=0;o<r.length;o++){var h=r[o];if(h.entitySet){a=this.oModel.oMetadata._findEntitySetByName(h.entitySet);if(a){this._mPathType[t]=true}}}}}}return!!this._mPathType[t]}return true};P.prototype.initialize=function(){if(this.oModel.oMetadata&&this.oModel.oMetadata.isLoaded()&&this.bInitial&&!this._hasTransientParentWithoutSubContexts()){if(!this._checkPathType()){e.error("List Binding is not bound against a list for "+this.getResolvedPath())}this.bInitial=false;this._initSortersFilters();if(!this.bSuspended){if(this.bDataAvailable){this._fireChange({reason:r.Change})}else{this.resetData();this._fireRefresh({reason:r.Refresh})}}this.checkDataState()}return this};P.prototype.checkUpdate=function(t,e){var a,n,o,h,l,d=false,u=this.sChangeReason?this.sChangeReason:r.Change,f=this._cleanupCreatedPersisted(),p=this;if(this.bSuspended&&!this.bIgnoreSuspend&&!t||this.bPendingRequest){return}if(this.bInitial){if(this.oContext&&this.oContext.isUpdated()){this.initialize()}return}this.bIgnoreSuspend=false;if(!t&&!this.bNeedsUpdate){l=this.aExpandRefs;h=this.aKeys.slice();o=this.checkExpandedList(true);if(!o&&this.useClientMode()){this.applyFilter();this.applySort()}if(!s(l,this.aExpandRefs)){d=true}else if(e){if(this.aKeys.length!==h.length){d=true}else{for(var c in e){if(this.aKeys.indexOf(c)>-1||h.indexOf(c)>-1){d=true;break}}}}else{d=true}if(d&&this.aLastContexts){d=false;a=this._getContexts(this.iLastStartIndex,this.iLastLength);if(this.aLastContexts.length!==a.length){d=true}else{i(this.aLastContextData,function(t,e){n=p.getContextData(a[t]);if(e!==n){d=true;return false}return true})}}}if(t||d||this.bNeedsUpdate||f){this.bNeedsUpdate=false;this._fireChange({reason:u})}this.sChangeReason=undefined};P.prototype.resetData=function(){this.aKeys=[];this.aAllKeys=null;this.iLength=0;this.bLengthFinal=this._hasTransientParentContext()||!this.isResolved();this.sChangeReason=undefined;this.bDataAvailable=false;this.bLengthRequested=false;this.bThresholdRejected=false;if(this.sCountMode==g.None){this.bThresholdRejected=true}};P.prototype.abortPendingRequest=function(t){if(!a(this.mRequestHandles)){this.bSkipDataEvents=true;i(this.mRequestHandles,function(t,e){e.abort()});if(t&&this.oCountHandle){this.oCountHandle.abort()}this.mRequestHandles={};this.bPendingRequest=false}};P.prototype.getDownloadUrl=function(t){var e=[],s;if(t){e.push("$format="+encodeURIComponent(t))}if(this.sSortParams){e.push(this.sSortParams)}else if(this.aSorters.length&&this.useClientMode()){e.push(y.createSortParams(this.aSorters))}if(this.sFilterParams){e.push(this.sFilterParams)}else if(this.oCombinedFilter&&this.useClientMode()){e.push(y.createFilterParams(this.oCombinedFilter,this.oModel.oMetadata,this.oEntityType))}if(this.sCustomParams){e.push(this.sCustomParams)}s=this.getResolvedPath();return s&&this.oModel._createRequestUrl(s,null,e)};P.prototype._moveCreatedPersistedToAllKeys=function(){var t=this,e=this._getCreatedPersistedContexts().map(function(e){return t.oModel.getKey(e)});if(e.length){this.aAllKeys=this.aAllKeys.concat(e);this._removePersistedCreatedContexts();return true}return false};P.prototype.sort=function(t,e){var s=false;this.bIgnoreSuspend=true;if(!t){t=[]}if(t instanceof p){t=[t]}this.aSorters=t;if(!this.useClientMode()){this.createSortParams(t)}if(!this.bInitial){this.addComparators(t,true);if(this.useClientMode()){if(this.aAllKeys){if(this._moveCreatedPersistedToAllKeys()||!t.length){this.applyFilter()}this.applySort();this._fireChange({reason:r.Sort})}else{this.sChangeReason=r.Sort}}else{this.iLength+=this._removePersistedCreatedContexts().length;this.aKeys=[];this.abortPendingRequest(false);this.sChangeReason=r.Sort;this._fireRefresh({reason:this.sChangeReason})}this._fireSort({sorter:t});s=true}if(e){return s}else{return this}};P.prototype.addComparators=function(s,i){var a,n,r=this.oEntityType,o;if(!r){e.warning("Cannot determine sort/filter comparators, as entitytype of the collection is unknown!");return}s.forEach(function(e){if(e.aFilters){this.addComparators(e.aFilters)}else if(!e.fnCompare){a=this.oModel.oMetadata._getPropertyMetadata(r,e.sPath);n=a&&a.type;t(a,"PropertyType for property "+e.sPath+" of EntityType "+r.name+" not found!");o=y.getComparator(n);if(i){e.fnCompare=x(o)}else{e.fnCompare=o;R(n,e)}}}.bind(this))};function x(t){return function(e,s){if(e===s){return 0}if(e===null){return-1}if(s===null){return 1}return t(e,s)}}function R(t,e){switch(t){case"Edm.Decimal":case"Edm.Int64":if(typeof e.oValue1=="number"){e.oValue1=e.oValue1.toString()}if(typeof e.oValue2=="number"){e.oValue2=e.oValue2.toString()}break;case"Edm.Byte":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":if(typeof e.oValue1=="string"){e.oValue1=parseInt(e.oValue1)}if(typeof e.oValue2=="string"){e.oValue2=parseInt(e.oValue2)}break;case"Edm.Float":case"Edm.Single":case"Edm.Double":if(typeof e.oValue1=="string"){e.oValue1=parseFloat(e.oValue1)}if(typeof e.oValue2=="string"){e.oValue2=parseFloat(e.oValue2)}break;default:}}P.prototype.applySort=function(){var t=this,e;this.aKeys=c.apply(this.aKeys,this.aSorters,function(s,i){e=t.oModel.getContextype.createSortParams=function(t){this.sSortParams=y.createSortParams(t)};P.prototype.filter=function(t,e,s){var i=false;this.bIgnoreSuspend=true;if(!t){t=[]}if(t instanceof h){t=[t]}this.oModel.checkFilterOperation(t);if(e===u.Application){this.aApplicationFilters=t}else{this.aFilters=t}if(!this.aFilters||!Array.isArray(this.aFilters)){this.aFilters=[]}if(!this.aApplicationFilters||!Array.isArray(this.aApplicationFilters)){this.aApplicationFilters=[]}this.convertFilters();this.oCombinedFilter=d.combineFilters(this.aFilters,this.aApplicationFilters);if(!this.useClientMode()){this.createFilterParams(this.oCombinedFilter)}if(!this.bInitial){this.addComparators(this.aFilters);this.addComparators(this.aApplicationFilters);if(this.useClientMode()){if(this.aAllKeys){this._moveCreatedPersistedToAllKeys();this.applyFilter();this.applySort();this._fireChange({reason:r.Filter})}else{this.sChangeReason=r.Filter}}else{this._removePersistedCreatedContexts();this.resetData();this.abortPendingRequest(true);this.sChangeReason=r.Filter;this._fireRefresh({reason:this.sChangeReason})}if(e===u.Application){this._fireFilter({filters:this.aApplicationFilters})}else{this._fireFilter({filters:this.aFilters})}i=true}if(s){return i}else{return this}};P.prototype.convertFilters=function(){this.aFilters=this.aFilters.map(function(t){return t instanceofaApplicationFilters.map(function(t){return t instanceof C?t.convert():t})};P.prototype.applyFilter=function(){var t=this,e;this.oCombinedFilter=d.combineFilters(this.aFilters,this.aApplicationFilters);this.aKeys=d.apply(this.aAllKeys,this.oCombinedFilter,function(s,i){e=t.oModel.getContext("/"+s);return t.oModel.getProperty(i,e)},this.mNormalizeCache);this.iLength=this.aKeys.length};P.prototype.createFilterParams=function(t){this.sFilterParams=y.createFilterParams(t,this.oModel.oMetadata,this.oEntityType)};P.prototype._initSortersFilters=function(){var t=this.getResolvedPath();if(!t){return}this.oEntityType=this._getEntityType();this.addComparators(this.aSorters,true);this.addComparators(this.aFilters);this.addComparators(this.aApplicationFilters);this.convertFilters();this.oCombinedFilter=d.combineFilters(this.aFilters,this.aApplicationFilters);if(!this.useClientMode()){this.createSortParams(this.aSorters);this.createFilterParams(this.oCombinedFilter)}};P.prototype._getEntityType=function(){var e=this.getResolvedPath();if(e){var s=this.oModel.oMetadata._getEntityTypeByPath(e);t(s,"EntityType for path "+e+" could not be found!");return s}return undefined};P.prototype.resume=function(){this.bIgnoreSuspend=false;this.bSuspended=false;if(this.bPendingRefresh){this._refresh()}else{this.checkUpdate()}};P.prototype.suspend=function(){if(this.bInitial){this.bPendingRefresh=true}f.prototype.suspend.apply(this,arguments)};P.prototype._checkDataStateMessages=function(t,e){if(e){t.setModelMessages(this.oModel.getMessagesByPath(this.sDeepPath,true))}};P.prototype._getFilterForPredicate=function(t){var e=[],s=t.slice(1,-1).split(","),i=this;s.forEach(function(t){var s=t.split("="),a=s[0],n=s[1];if(s.length===1){n=a;a=i.oModel.oMetadata.getKeyPropertyNamesByPath(i.sDeepPath)[0]}e.push(new h(a,l.EQ,y.parseValue(decodeURIComponent(n))))});if(e.length===1){return e[0]}return new h({and:true,filters:e})};P.prototype.create=function(t,e,s){var i,a,n,o={context:this.oContext,properties:t},h=this.isFirstCreateAtEnd(),l=this;e=!!e;if(h===undefined){h=e}if(h&&!this.bLengthFinal){throw new Error("Must know the final length to create at the end")}Object.keys(s||{}).forEach(function(t){if(!b.includes(t)){throw new Error("Parameter '"+t+"' is not supported")}});if(this.bUseExpandedList){throw new Error("The collection has been read via $expand while reading the parent"+" entity")}if(!this.oModel.oMetadata.isLoaded()){throw new Error("Metadata is not loaded")}n=this.getResolvedPath();a=this.oModel._getCreatedContextsCache();Object.assign(o,s);if(!this._hasTransientParentContext()){o.refreshAfterChange=false;if(!("expand"in o)&&this.mParameters){o.expand=this.mParameters.expand}}i=this.oModel.createEntry(this.sPath,o);a.addContext(i,n,this.sCreatedEntitiesKey,e);if(o.inactive){i.fetchActivationStarted().then(l.fireCreateActivate.bind(l,i))}this._fireChange({reason:r.Add});return i};P.prototype.requestFilterForMessages=function(t){var e=this.sDeepPath,s=null,i=[],a=new Set,n=this.getResolvedPath(),r=this;if(!n){return Promise.resolve(null)}this.oModel.getMessagesByPath(e,true).forEach(function(s){var i;if(!t||t(s)){s.aFullTargets.forEach(function(t){if(t.startsWiadd(i)}}})}});a.forEach(function(t){i.push(r._getFilterForPredicate(t))});if(i.length===1){s=i[0]}else if(i.length>1){s=new h({filters:i})}return Promise.resolve(s)};P.prototype.isFirstCreateAtEnd=function(){return this.oModel._getCreatedContextsCache().isAtEnd(this.getResolvedPath(),this.sCreatedEntitiesKey)};P.prototype._getCreatedContexts=function(){return this.oModel._getCreatedContextsCache().getContexts(this.getResolvedPath(),this.sCreatedEntitiesKey)};P.prototype._getSkipAndTop=function(t,e,s){var i,a,n=this._getCreatedContexts(),r=this.isFirstCreateAtEnd()===false,o=r&&this.aKeys.length?n.concat(this.aKeys):this.aKeys;a=y._getReadIntervals(o,t,e,s,this.bLengthFinal?this.iLength:undefined);i=y._mergeIntervals(a);if(i&&r&&this.aKeys.length){i.start-=n.length;i.end-=n.length}return i&&{skip:i.start,top:i.end-i.start}};P.prototype._removePersistedCreatedContexts=function(){return this.oModel._getCreatedContextsCache().removePersistedContexts(this.getResolvedPath(),this.sCreatedEntitiesKey)};P.prototype.getCount=function(){if(!this.isLengthFinal()){return undefined}return this.getLength()-this._getCreatedContexts().filter(function(t){return t.isInactive()}).length};P.prototype._hasTransientParentContext=function(){return this.isRelative()&&!!(this.oContext&&this.oContext.isTransient&&this.oContext.isTransient())};P.prototype._hasTransientParentWithoutSubContexts=function(){return this._hasTransientParentContext()&&!this._getCreatedContexts().length};P.prototype._isExpandedListUsable=function(){if(this.mCustomParams||this.sOperationMode===m.Server&&(this.aApplicationFilters.length>0||this.aFilters.length>0||this.aSorters.length>0)){return false}return true};P.prototype._refreshForSideEffects=function(t,e){if(!this._isExpandedListUsable()&&t.has(this.oEntityType)){this.sRefreshGroupId=e;this._refresh();this.sRefreshGroupId=undefined}};P.prototype._reassignCreateActivate=function(){var t=this;this._getCreatedContexts().forEach(function(e){if(e.isInactive()){e.fetchActivationStarted().then(t.fireCreateActivate.bind(t,e))}})};P.prototype.fireCreateActivate=function(t){if(this.fireEvent("createActivate",{context:t},true)){t.finishActivation();this._fireChange({reason:r.Change})}else{t.cancelActivation();t.fetchActivationStarted().then(this.fireCreateActivate.bind(this,t))}};return P});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v2/ODataTreeBinding",["sap/base/assert","sap/base/Log","sap/base/util/deepExtend","sap/base/util/each","sap/base/util/isEmptyObject","sap/ui/model/ChangeReason","sap/ui/model/Context","sap/ui/model/Filter","sap/ui/model/FilterProcessor","sap/ui/model/FilterType","sap/ui/model/Sorter","sap/ui/model/SorterProcessor","sap/ui/model/TreeBinding","sap/ui/model/TreeBindingUtils","sap/ui/model/odata/CountMode","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/OperationMode"],function(e,t,i,s,r,o,a,n,h,l,d,f,u,p,g,c,y){"use strict";var v=u.extend("sap.ui.model.odata.v2.ODataTreeBinding",{constructor:function(e,i,s,r,o,a){u.apply(this,arguments);this.mParameters=this.mParameters||o||{};this.sGroupId=undefined;this.sRefreshGroupId=undefined;this.oFinalLengths={};this.oLengths={};this.oKeys={};this.bNeedsUpdate=false;this._bRootMissing=false;this.bSkipDataEvents=false;if(a instanceof d){a=[a]}this.aSorters=a||[];this.sFilterParams="";this.mNormalizeCache={};r=r||[];if(r instanceof n){r=[r]}if(r.length>1){r=[h.groupFilters(r)]}this.aApplicationFilters=r;this.oModel.checkFilterOperation(this.aApplicationFilters);this.mRequestHandles={};this.oRootContext=null;this.iNumberOfExpandedLevels=o&&o.numberOfExpandedLevels||0;this.iRootLevel=o&&o.rootLevel||0;this.sCountMode=o&&o.countMode||this.oModel.sDefaultCountMode;if(this.sCountMode==g.None){t.fatal("To use an ODataTreeBinding at least one CountMode must be supported by the service!")}if(o){this.sGroupId=o.groupId||o.batchGroupId}this.bInitial=true;this._mLoadedSections={};this._iPageSize=0;this.sOperationMode=o&&o.operationMode||this.oModel.sDefaultOperationMode;if(this.sOperationMode===y.Default){this.sOperationMode=y.Server}this.bClientOperation=this.sOperationMode===y.Client;this.iThreshold=o&&o.threshold||0;this.bThresholdRejected=false;this.iTotalCollectionCount=null;this.bUseServersideApplicationFilters=o&&o.useServersideApplicationFilters||false;this.bUsePreliminaryContext=this.mParameters.usePreliminaryContext||e.bPreliminaryContext;this.oAllKeys=null;this.oAllLengths=null;this.oAllFinalLengths=null;this.bRefresh=false}});v.DRILLSTATES={Collapsed:"collapsed",Expanded:"expanded",Leaf:"leaf"};v.prototype._getNodeFilterParams=function(e){var t=e.isRoot?this.oTreeProperties["hierarchy-node-for"]:this.oTreeProperties["hierarchy-parent-node-for"];var i=this._getEntityType();return c._createFilterParams(new n(t,"EQ",e.id),this.oModel.oMetadata,i)};v.prototype._getLevelFilterParams=function(e,t){var i=this._getEntityType();return c._createFilterParams(new n(this.oTreeProperties["hierarchy-level-for"],e,t),this.oModel.oMetadata,i)};v.prototype._loadSingleRootNodeByNavigationProperties=function(e,t){var i=this,s;if(this.mRequestHandles[t]){this.mRequestHandles[t].abort()}s=this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId;var r=this.getResolvedPath();if(r){this.mRequestHandles[t]=this.oModel.read(r,{groupId:s,success:function(s){var r=i._getNavPath(i.getPath());if(s){var o=s;var a=i.oModel._getKey(o);var n=i.oModel.getContext("/"+a);i.oRootContext=n;i._processODataObject(n.getObject(),e,r)}else{i._bRootMissing=true}i.bNeedsUpdate=true;delete i.mRequestHandles[t];i.oModel.callAfterUpdate(function(){i.fireDataReceived({data:s})})},error:function(e){if(e&&e.statusCode!=0&&e.statusText!="abort"){i.bNeedsUpdate=true;i._bRootMissing=true;delete i.mRequestHandles[t];i.fireDataReceived()}}})}};v.prototype.getRootContexts=function(e,t,i){var s=null,r={numberOfExpandedLevels:this.iNumberOfExpandedLevels},o=[];if(this.isInitial()){return o}e=e||0;t=t||this.oModel.sizeLimit;i=i||0;var a=""+s+"-"+e+"-"+this._iPageSize+"-"+i;if(this.bHasTreeAnnotations){this.bDisplayRootNode=true;o=this._getContextsForNodeId(null,e,t,i)}else{s=this.getResolvedPath();var n=this.oModel.isList(this.sPath,this.getContext());if(n){this.bDisplayRootNode=true}if(this.bDisplayRootNode&&!n){if(this.oRootContext){return[this.oRootContext]}else if(this._bRootMissing){return[]}else{this._loadSingleRootNodeByNavigationProperties(s,a)}}else{r.navPath=this._getNavPath(this.getPath());if(!this.bDisplayRootNode){s+="/"+r.navPath}o=this._getContextsForNodeId(s,e,t,i,r)}}return o};v.prototype.getNodeContexts=function(e,t,i,s){var r,o={};if(this.isInitial()){return[]}if(this.bHasTreeAnnotations){r=this.oModel.getKey(e);o.level=parseInt(e.getProperty(this.oTreeProperties["hierarchy-level-for"]))+1}else{var a=this._getNavPath(e.getPath());if(!a){return[]}r=this.oModel.resolve(a,e);o.navPath=this.oNavigationPaths[a]}return this._getContextsForNodeId(r,t,i,s,o)};v.prototype.hasChildren=function(e){var i;if(this.bHasTreeAnnotations){if(!e){return false}var s=e.getProperty(this.oTreeProperties["hierarchy-drill-state-for"]);var r=this.oModel.getKey(e);i=this.oLengths[r];if(i===0&&this.oFinalLengths[r]){return false}if(s==="expanded"||s==="collapsed"){return true}else if(s==="leaf"){return false}else{t.warning("The entity '"+e.getPath()+"' has not specified Drilldown State property value.");if(s===undefined||s===""){return true}return false}}else{if(!e){return this.oLengths[this.getPath()]>0}i=this.oLengths[e.getPath()+"/"+this._getNavPath(e.getPath())];return i!==0}};v.prototype.getChildCount=function(e){if(this.bHasTreeAnnotations){var t;if(!e){t=null}else{t=this.oModel.getKey(e)}return this.oLengths[t]}else{if(!e){if(!this.bDisplayRootNode){return this.oLengths[this.getPath()+"/"+this._getNavPath(this.getPath())]}else{return this.oLengths[this.getPath()]}}return this.oLengths[e.getPath()+"/"+this._getNavPath(e.getPath())]}};v.prototype._getContextsForNodeId=function(e,t,i,s,r){var o=[],a;if(this.sOperationMode==y.Auto){if(this.iTotalCollectionCount==null){if(!this.bCollectionCountRequested){this._getCountForCollection();this.bCollectionCountRequested=true}return[]}}t=t||0;i=i||this.oModel.iSizeLimit;s=s||0;if(this.sOperationMode==y.Auto){if(this.iThreshold>=0){s=Math.max(this.iThreshold,s)}}if(!this._mLoadedSections[e]){this._mLoadedSections[e]=[]}if(this.oFinalLengths[e]&&this.oLengths[e]<t+i){i=Math.max(this.oLengths[e]-t,0)}var n=this;var h=function(t){for(var i=0;i<n._mLoadedSections[e].length;i++){var s=n._mLoadedSections[e][i];if(t>=s.startIndex&&t<s.startIndex+s.length){return true}}return false};var l=[];var d=Math.max(t-s-this._iPageSize,0);if(this.oKeys[e]){var f=t+i+s;if(this.oLengths[e]){f=Math.min(f,this.oLengths[e])}for(d;d<f;d++){a=this.oKeys[e][d];if(!a){if(!this.bClientOperation&&!h(d)){l=p.mergeSections(l,{startIndex:d,length:1})}}if(d>=t&&d<t+i){if(a){o.push(this.oModel.getContext("/"+a))}else{o.push(undefined)}}}var u=Math.max(t-s-this._iPageSize,0);var g=t+i+s;var c=l[0]&&l[0].startIndex===u&&l[0].startIndex+l[0].length===g;if(l.length>0&&!c){d=Math.max(l[0].startIndex-s-this._iPageSize,0);var m=l[0].startIndex;for(d;d<m;d++){a=this.oKeys[e][d];if(!a){if(!h(d)){l=p.mergeSections(l,{startIndex:d,length:1})}}}d=l[l.length-1].startIndex+l[l.length-1].length;var P=d+s+this._iPageSize;if(this.oLengths[e]){P=Math.min(P,this.oLengths[e])}for(d;d<P;d++){a=this.oKeys[e][d];if(!a){if(!h(d)){l=p.mergeSections(l,{startIndex:d,length:1})}}}}}else if(!h(t)){var C=t-d;l=p.mergeSections(l,{startIndex:d,length:i+C+s})}if(this.oModel.getServiceMetadata()){if(l.length>0){var _=[];var R="";if(this.bHasTreeAnnotations){if(this.sOperationMode=="Server"||this.bUseServersideApplicationFilters){R=this.getFilterParams()}if(e){R=R?"%20and%20"+R:"";var b=this.oModel.getContext("/"+e);var T=b.getProperty(this.oTreeProperties["hierarchy-node-for"]);var L=this._getNodeFilterParams({id:T});_.push("$filter="+L+R)}else if(e==null){var M="";if(!this.bClientOperation||this.iRootLevel>0){var F=this.bClientOperation?"GE":"EQ";M=this._getLevelFilterParams(F,this.iRootLevel)}if(M||R){if(R&&M){R="%20and%20"+R}_.push("$filter="+M+R)}}}else{R=this.getFilterParams();if(R){_.push("$filter="+R)}}if(this.sCustomParams){_.push(this.sCustomParams)}if(!this.bClientOperation){for(d=0;d<l.length;d++){var x=l[d];this._mLoadedSections[e]=p.mergeSections(this._mLoadedSections[e],{startIndex:x.startIndex,length:x.length});this._loadSubNodes(e,x.startIndex,x.length,0,_,r,x)}}else if(!this.oAllKeys&&!this.mRequestHandles[v.REQUEST_KEY_CLIENT]){this._loadCompleteTreeWithAnnotations(_)}}}return o};v.prototype._getCountForCollection=function(){if(!this.bHasTreeAnnotations||this.sOperationMode!=y.Auto){t.error("The Count for the collection can only be retrieved with Hierarchy Annotations and in OperationMode.Auto.");return}var e=[];function i(e){var t=e.__count?parseInt(e.__count):parseInt(e);this.iTotalCollectionCount=t;if(this.sOperationMode==y.Auto){if(this.iTotalCollectionCount<=this.iThreshold){this.bClientOperation=true;this.bThresholdRejected=false}else{this.bClientOperation=false;this.bThresholdRejected=true}this._fireChange({reason:o.Change})}}function s(e){if(e&&e.statusCode===0&&e.statusText==="abort"){return}var i="Request for $count failed: "+e.message;if(e.response){i+=", "+e.response.statusCode+", "+e.response.statusText+", "+e.response.body}t.warning(i)}var r=this.getResolvedPath();var a="";if(this.iRootLevel>0){a=this._getLevelFilterParams("GE",this.getRootLevel())}var n="";if(this.bUseServersideApplicationFilters){n=this.getFilterParams()}if(a||n){if(n&&a){n="%20and%20"+n}e.push("$filter="+a+n)}var h="";if(this.sCountMode==g.Request||this.sCountMode==g.Both){h="/$count"}else if(this.sCountMode==g.Inline||this.sCountMode==g.InlineRepeat){e.push("$top=0");e.push("$inlinecount=allpages")}if(r){this.oModel.read(r+h,{urlParameters:e,success:i.bind(this),error:s.bind(this),groupId:this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId})}};v.prototype._getCountForNodeId=function(e){var i=this,s;var r=[];function o(t){i.oFinalLengths[e]=true;i.oLengths[e]=parseInt(t)}function a(e){if(e&&e.statusCode===0&&e.statusText==="abort"){return}var i="Request for $count failed: "+e.message;if(e.response){i+=", "+e.response.statusCode+", "+e.response.statusText+", "+e.response.body}t.warning(i)}var n;var h=this.getFilterParams()||"";var l="";if(this.bHasTreeAnnotations){var d=this.oModel.getContext("/"+e);var f=d.getProperty(this.oTreeProperties["hierarchy-node-for"]);n=this.getResolvedPath();if(e!=null){l=this._getNodeFilterParams({id:f})}else{l=this._getLevelFilterParams("EQ",this.getRootLevel())}}else{n=e}if(l||h){var u="";if(l&&h){u="%20and%20"}h="$filter="+h+u+l;r.push(h)}if(n){s=this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId;this.oModel.read(n+"/$count",{urlParameters:r,success:o,error:a,sorters:this.aSorters,groupId:s})}};v.prototype._getParentMap=function(e){var i={};for(var s=0;s<e.length;s++){var r=e[s][this.oTreeProperties["hierarchy-node-for"]];if(i[r]){t.warning("ODataTreeBinding: Duplicate key: "+r+"!")}i[r]=this.oModel._getKey(e[s])}return i};v.prototype._createKeyMap=function(e,t){if(e&&e.length>0){var i=this._getParentMap(e),s={};for(var r=t?1:0;r<e.length;r++){var o=e[r][this.oTreeProperties["hierarchy-parent-node-for"]],a=i[o];if(parseInt(e[r][this.oTreeProperties["hierarchy-level-for"]])===this.iRootLevel){a="null"}if(!s[a]){s[a]=[]}s[a].push(this.oModel._getKey(e[r]))}return s}return undefined};v.prototype._importCompleteKeysHierarchy=function(e){var t,i;for(i in e){t=e[i].length||0;this.oKeys[i]=e[i];this.oLengths[i]=t;this.oFinalLengths[i]=true;this._mLoadedSections[i]=[{startIndex:0,length:t}]}};v.prototype._updateNodeKey=function(e,t){var i=this.oModel.getKey(e.context),s,r;if(parseInt(e.context.getProperty(this.oTreeProperties["hierarchy-level-for"]))===this.iRootLevel){s="null"}else{s=this.oModel.getKey(e.parent.context)}r=this.oKeys[s].indexOf(i);if(r!==-1){this.oKeys[s][r]=t}else{this.oKeys[s].push(t)}};v.prototype._loadSubTree=function(e,t){return new Promise(function(i,s){var r,o,a;if(!this.bHasTreeAnnotations){s(new Error("_loadSubTree: doesn't support hierarchies without tree annotations"));return}r="loadSubTree-"+t.join("-");if(this.mRequestHandles[r]){this.mRequestHandles[r].abort()}var n=function(t){if(t.results.length>0){var s=this.oModel.getKey(t.results[0]);this._updateNodeKey(e,s);var o=this._createKeyMap(t.results);this._importCompleteKeysHierarchy(o)}delete this.mRequestHandles[r];this.bNeedsUpdate=true;this.oModel.callAfterUpdate(function(){this.fireDataReceived({data:t})}.bind(this));i(t)}.bind(this);var h=function(e){delete this.mRequestHandles[r];if(e&&e.statusCode===0&&e.statusText==="abort"){return}this.fireDataReceived();s()}.bind(this);if(!this.bSkipDataEvents){this.fireDataRequested()}this.bSkipDataEvents=false;a=this.getResolvedPath();if(a){o=this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId;this.mRequestHandles[r]=this.oModel.read(a,{urlParameters:t,success:n,error:h,sorters:this.aSorters,groupId:o})}}.bind(this))};v.prototype._loadSubNodes=function(e,t,i,s,r,o,a){var n=this,h,l=false;if((t||i)&&!this.bClientOperation){r.push("$skip="+t+"&$top="+(i+s))}if(!this.oFinalLengths[e]||this.sCountMode==g.InlineRepeat){if(this.sCountMode==g.Inline||this.sCountMode==g.InlineRepeat||this.sCountMode==g.Both){r.push("$inlinecount=allpages");l=true}else if(this.sCountMode==g.Request){n._getCountForNodeId(e)}}var d=""+e+"-"+t+"-"+this._iPageSize+"-"+s;function f(i){var s,r;if(i){n.oKeys[e]=n.oKeys[e]||[];if(l&&i.__count>=0){n.oLengths[e]=parseInt(i.__count);n.oFinalLengths[e]=true}}if(Array.isArray(i.results)&&i.results.length>0){if(n.bHasTreeAnnotations){var a={};for(r=0;r<i.results.length;r++){s=i.results[r];if(r==0){a[e]=t}else if(a[e]==undefined){a[e]=0}n.oKeys[e][a[e]]=n.oModel._getKey(s);a[e]++}}else{for(r=0;r<i.results.length;r++){s=i.results[r];var h=n.oModel._getKey(s);n._processODataObject(s,"/"+h,o.navPath);n.oKeys[e][r+t]=h}}}else if(i&&!Array.isArray(i.results)){n.oKeys[null]=n.oModel._getKey(i);if(!n.bHasTreeAnnotations){n._processODataObject(i,e,o.navPath)}}delete n.mRequestHandles[d];n.bNeedsUpdate=true;n.oModel.callAfterUpdate(function(){n.fireDataReceived({data:i})})}function u(t){if(t&&t.statusCode===0&&t.statusText==="abort"){return}n.fireDataReceived();delete n.mRequestHandles[d];if(a){var i=[];for(var s=0;s<n._mLoadedSections[e].length;s++){var r=n._mLoadedSections[e][s];if(a.startIndex>=r.startIndex&&a.startIndex+a.length<=r.startIndex+r.length){if(a.startIndex!==r.startIndex&&a.length!==r.length){i=p.mergeSections(i,{startIndex:r.startIndex,length:a.startIndex-r.startIndex});i=p.mergeSections(i,{startIndex:a.startIndex+a.length,length:r.startIndex+r.length-(a.startIndex+a.length)})}}else{i.push(r)}}n._mLoadedSections[e]=i}}if(e!==undefined){if(!this.bSkipDataEvents){this.fireDataRequested()}this.bSkipDataEvents=false;var c;if(this.bHasTreeAnnotations){c=this.getResolvedPath()}else{c=e}if(this.mRequestHandles[d]){this.mRequestHandles[d].abort()}if(c){h=this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId;this.mRequestHandles[d]=this.oModel.read(c,{urlParameters:r,success:f,error:u,sorters:this.aSorters,groupId:h})}}};v.REQUEST_KEY_CLIENT="_OPERATIONMODE_CLIENT_TREE_LOADING";v.prototype._loadCompleteTreeWithAnnotations=function(e){var s=this;var r=v.REQUEST_KEY_CLIENT;var a=function(e){if(e.results&&e.results.length>0){var o={};var a;for(var n=0;n<e.results.length;n++){a=e.results[n];var h=a[s.oTreeProperties["hierarchy-node-for"]];if(o[h]){t.warning("ODataTreeBinding - Duplicate data entry for key: "+h+"!")}o[h]=s.oModel._getKey(a)}for(var l=0;l<e.results.length;l++){a=e.results[l];var d=a[s.oTreeProperties["hierarchy-parent-node-for"]];var f=o[d];if(parseInt(a[s.oTreeProperties["hierarchy-level-for"]])===s.iRootLevel){f="null"}s.oKeys[f]=s.oKeys[f]||[];var u=s.oModel._getKey(a);s.oKeys[f].push(u);s.oLengths[f]=s.oLengths[f]||0;s.oLengths[f]++;s.oFinalLengths[f]=true;s._mLoadedSections[f]=s._mLoadedSections[f]||[];s._mLoadedSections[f][0]=s._mLoadedSections[f][0]||{startIndex:0,length:0};s._mLoadedSections[f][0].length++}}else{s.oKeys["null"]=[];s.oLengths["null"]=0;s.oFinalLengths["null"]=true}s.oAllKeys=i({},s.oKeys);s.oAllLengths=i({},s.oLengths);s.oAllFinalLengths=i({},s.oFinalLengths);delete s.mRequestHandles[r];s.bNeedsUpdate=true;if(s.aApplicationFilters&&s.aApplicationFilters.length>0||s.aFilters&&s.aFilters.length>0){s._applyFilter()}if(Sort()}s.oModel.callAfterUpdate(function(){s.fireDataReceived({data:e})})};var n=function(e){delete s.mRequestHandles[r];var t=e.statusCode==0;if(!t){s.oKeys={};s.oLengths={};s.oFinalLengths={};s.oAllKeys={};s.oAllLengths={};s.oAllFinalLengths={};s._fireChange({reason:o.Change});s.fireDataReceived()}};if(!this.bSkipDataEvents){this.fireDataRequested()}this.bSkipDataEvents=false;if(this.mRequestHandles[r]){this.mRequestHandles[r].abort()}var h=this.getResolvedPath();if(h){if(this.iTotalCollectionCount){e.push("$top="+this.iTotalCollectionCount)}this.mRequestHandles[r]=this.oModel.read(h,{urlParameters:e,success:a,error:n,sorters:this.aSorters,groupId:this.sRefreshGroupId?this.sRefreshGroupId:this.sGroupId})}};v.prototype.resetData=function(e){var t,i=false;if(typeof e==="boolean"){i=e}else{t=e}if(t){var s=t.getPath();delete this.oKeys[s];delete this.oLengths[s];delete this.oFinalLengths[s];delete this._mLoadedSections[s]}else{this.oKeys={};this.bClientOperation=this.sOperationMode===y.Client;this.bThresholdRejected=false;this.iTotalCollectionCount=null;this.bCollectionCountRequested=false;this.oAllKeys=null;this.oAllLengths=null;this.oAllFinalLengths=null;this.oLengths={};this.oFinalLengths={};this.oRootContext=null;this._bRootMissing=false;if(!i){this._abortPendingRequest()}this._mLoadedSections={};this._iPageSize=0;this.sFilterParams=""}};v.prototype.refresh=function(e,t){if(typeof e==="string"){t=e}this.sRefreshGroupId=t;this._refresh(e);this.sRefreshGroupId=undefined};v.prototype._refresh=function(e,t,i){var s=false;if(!e){if(i){var r=this.getResolvedPath();if(r){if(r.indexOf("?")!==-1){r=r.split("?")[0]}var a=this.oModel.oMetadata._getEntityTypeByPath(r);if(a&&a.entityType in i){s=true}}}if(t&&!s){s=this._isRefreshAfterChangeAllowed()&&this._hasChangedEntity(t)}if(!t&&!i){s=true}}if(e||s){this.resetData();this.bNeedsUpdate=false;this.bRefresh=true;this._fireRefresh({reason:o.Refresh})}};v.prototype._isRefreshAfterChangeAllowed=function(){return true};v.prototype._hasChangedEntity=function(e){var t,i;for(i in this.oKeys){for(t in e){if(this.oKeys[i].includes(t)){return true}}}return false};v.prototype.filter=function(e,s,r){var a=false;s=s||l.Control;this.oModel.checkFilterOperation(e);if(s==l.Control&&(!this.bClientOperation||this.sOperationMode==y.Server)){t.warning("Filtering with ControlFilters is ONLY possible if the ODataTreeBinding is running in OperationMode.Client or "+"OperationMode.Auto, in case the given threshold is lower than the total number of tree nodes.");return this}if(!e){e=[]}if(e instanceof n){e=[e]}if(s===l.Control){this.aFilters=e}else{if(e.length>1){e=[h.groupFilters(e)]}this.aApplicationFilters=e}if(!this.bInitial){if(this.bClientOperation&&(s===l.Control||s===l.Application&&!this.bUseServersideApplicationFilters)){if(this.oAllKeys){this.oKeys=i({},this.oAllKeys);this.oLengths=i({},this.oAllLengths);this.oFinalLengths=i({},this.oAllFinalLengths);this._applyFilter();this._applySort();this._fireChange({reason:o.Filter})}else{this.sChangeReason=o.Filter}}else{this.resetData();this.sChangeReason=o.Filter;this._fireRefresh({reason:this.sChangeReason})}a=true}if(r){return a}else{return this}};v.prototype._applyFilter=function(){var e=this;var i;if(this.bUseServersideApplicationFilters){i=h.groupFilters(this.aFilters)}else{i=h.combineFilters(this.aFilters,this.aApplicationFilters)}var s=function(t){var s=h.apply([t],i,function(t,i){var s=e.oModel.getContext("/"+t);return e.oModel.getProperty(i,s)},e.mNormalizeCache);return s.length>0};var r={};this._filterRecursive({id:"null"},r,s);this.oKeys=r;if(!this.oKeys["null"]){t.warning("Clientside filter did not match on any node!")}else{this.oLengths["null"]=this.oKeys["null"].length;this.oFinalLengths["null"]=true}};v.prototype._filterRecursive=function(e,t,i){var s=this.oKeys[e.id];if(s){e.children=e.children||[];for(var r=0;r<s.length;r++){var o=this._filterRecursive({id:s[r]},t,i);if(o.isFiltered){t[e.id]=t[e.id]||[];t[e.id].push(o.id);e.children.push(o)}}if(e.children.length>0){e.isFiltered=true}else{e.isFiltered=i(e.id)}if(e.isFiltered){this.oLengths[e.id]=e.children.length;this.oFinalLengths[e.id]=true}return e}else{e.isFiltered=i(e.id);return e}};v.prototype.sort=function(e,t){var i=false;if(e instanceof d){e=[e]}this.aSorters=e||[];if(!this.bInitial){this._abortPendingRequest();if(this.bClientOperation){this.addSortComparators(e,this.oEntityType);if(this.oAllKeys){this._applySort();this._fireChange({reason:o.Sort})}else{this.sChangeReason=o.Sort}}else{this.resetData(undefined,{reason:o.Sort});this.sChangeReason=o.Sort;this._fireRefresh({reason:this.sChangeReason})}i=true}if(t){return i}else{return this}};v.prototype.addSortComparators=function(i,r){var o,a;if(!r){t.warning("Cannot determine sort comparators, as entitytype of the collection is unknown!");return}s(i,function(t,i){if(!i.fnCompare){o=this.oModel.oMetadata._getPropertyMetadata(r,i.sPath);a=o&&o.type;e(o,"PropertyType for property "+i.sPath+" of EntityType "+r.name+" not found!");i.fnCompare=c.getComparator(a)}}.bind(this))};v.prototype._applySort=function(){var e=this,t;var i=function(i,s){t=e.oModel.getContext("/"+i);return e.oModel.getProperty(s,t)};for(var s in this.oKeys){f.apply(this.oKeys[s],this.aSorters,i)}};v.prototype.checkUpdate=function(e,t){var i=this.sChangeReason?this.sChangeReason:o.Change;var r=false;if(!e){if(this.bNeedsUpdate||!t){r=true}else{s(this.oKeys,function(e,i){s(i,function(e,i){if(i in t){r=true;return false}return true});if(r){return false}return true})}}if(e||r){this.bNeedsUpdate=false;this._fireChange({reason:i})}this.sChangeReason=undefined};v.prototype._getNavPath=function(e){var t=this.oModel.resolve(e,this.getContext());if(!t){return undefined}var i=t.split("/"),s=i[i.length-1],r;var o=s.split("(")[0];if(o&&this.oNavigationPaths[o]){r=this.oNavigationPaths[o]}return r};v.prototype._processODataObject=function(e,t,i){var s=[],r=this;if(i&&i.indexOf("/")>-1){s=i.split("/");i=s[0];s.splice(0,1)}var o=this.oModel._getObject(t);if(Array.isArray(o)){this.oKeys[t]=o;this.oLengths[t]=o.length;this.oFinalLengths[t]=true}else if(o){this.oLengths[t]=1;this.oFinalLengths[t]=true}if(i&&e[i]){if(Array.isArray(o)){o.forEach(function(e){var t=r.getModel().getData("/"+e);r._processODataObject(t,"/"+e+"/"+i,s.join("/"))})}else if(typeof o==="object"){r._processODataObject(e,t+"/"+i,s.join("/"))}}};v.prototype._hasTreeAnnotations=function(){var e=this.oModel.oMetadata,i=this.getResolvedPath(),r,o=e.mNamespaces["sap"],a=this;this.oTreeProperties={"hierarchy-level-for":false,"hierarchy-parent-node-for":false,"hierarchy-node-for":false,"hierarchy-drill-state-for":false};var n=function(){var e=0;var i=0;s(a.oTreeProperties,function(t,s){i++;if(s){e+=1}});if(e===i){return true}else if(e>0&&e<i){t.warning("Incomplete hierarchy tree annotations. Please check your service metadata definition!")}return false};if(this.mParameters&&this.mParameters.treeAnnotationProperties){this.oTreeProperties["hierarchy-level-for"]=this.mParameters.treeAnnotationProperties.hierarchyLevelFor;this.oTreeProperties["hierarchy-parent-node-for"]=this.mParameters.treeAnnotationProperties.hierarchyParentNodeFor;this.oTreeProperties["hierarchy-node-for"]=this.mParameters.treeAnnotationProperties.hierarchyNodeFor;this.oTreeProperties["hierarchy-drill-state-for"]=this.mParameters.treeAnnotationProperties.hierarchyDrillStateFor;return n()}if(i.indexOf("?")!==-1){i=i.split("?")[0]}r=e._getEntityTypeByPath(i);if(!r){t.fatal("EntityType for path "+i+" could not be found.");return false}s(r.property,function(e,t){if(!t.extensions){return true}s(t.extensions,function(e,i){var s=i.name;if(i.namespace===o&&s in a.oTreeProperties&&!a.oTreeProperties[s]){a.oTreeProperties[s]=t.name}});return true});return n()};v.prototype.initialize=function(){if(this.oModel.oMetadata&&this.oModel.oMetadata.isLoaded()&&this.bInitial){if(this.isResolved()){this._initialize(this._fireRefresh.bind(this,{reason:o.Refresh}))}else{this._fireRefresh({reason:o.Refresh})}}return this};v.prototype._initialize=function(e){this.bInitial=false;this.bHasTreeAnnotations=this._hasTreeAnnotations();this.oEntityType=this._getEntityType();this._processSelectParameters();this._applyAdapter(e);return this};v.prototype.setContext=function(e){if(e&&e.isPreliminary()&&!this.bUsePreliminaryContext){return}if(e&&e.isUpdated()&&this.bUsePreliminaryContext&&this.oContext===e){this._fireChange({reason:o.Context});return}if(a.hasChanged(this.oContext,e)){this.oContext=e;if(!this.isRelative()){return}if(this.getResolvedPath()){this.resetData();this._initialize(this._fireChange.bind(this,{reason:o.Context}))}else if(!r(this.oAllKeys)||!r(this.oKeys)||!r(this._aNodes)){this.resetData();this._fireChange({reason:o.Context})}}};v.prototype.applyAdapterInterface=function(){this.getCont||function(){return[]};this.getNodes=this.getNodes||function(){return[]};this.getLength=this.getLength||function(){return 0};this.isLengthFinal=this.isLengthFinal|false};this.getContextByIndex=this.getContextByIndex||function(){return};this.attachSelectionChanged=this.attachSelectionChanged||function(e,t,i){this.attachEvent("selectionChanged",e,t,i);return this};this.detachSelectionChanged=this.detachSelectionChanged||function(e,t){this.detachEvent("selectionChanged",e,t);return this};this.fireSelectionChanged=this.fireSelectionChanged||function(e){this.fireEvent("selectionChanged",e);return this};return this};v.prototype._applyAdapter=function(e){var i,r,o,a,n,h,l="sap/ui/model/odata/ODataTreeBindingAdapter",d="hierarchy-node-descendant-count-for",f="hierarchy-preorder-rank-for",u="hierarchy-sibling-rank-for",p=this;if(!this.bHasTreeAnnotations&&!this.oNavigationPaths){t.error("Neither hierarchy annotations, "+"nor navigation properties are specified to build the tree.",this);return}if(this.bHasTreeAnnotations){i=this.getResolvedPath();if(i.indexOf("?")!==-1){i=i.split("?")[0]}r=this.oModel.oMetadata._getEntityTypeByPath(i);s(r.property,function(e,t){if(!t.extensions){return true}s(t.extensions,function(e,i){h=i.name;if(i.namespace===p.oModel.oMetadata.mNamespaces["sap"]&&(h==d||h==u||h==f)){p.oTreeProperties[h]=t.name}});return true});this.oTreeProperties[d]=this.oTreeProperties[d]||this.mParameters.treeAnnotationProperties&&this.mParameters.treeAnnotationProperties.hierarchyNodeDescendantCountFor;if(this.oTreeProperties[d]&&this.sOperationMode==y.Server){this.oTreeProperties[u]=this.oTreeProperties[u]||this.mParameters.treeAnnotationProperties&&this.mParameters.treeAnnotationProperties.hierarchySiblingRankFor;this.oTreeProperties[f]=this.oTreeProperties[f]||this.mParameters.treeAnnotationProperties&&this.mParameters.treeAnnotationProperties.hierarchyPreorderRankFor;if(this.mParameters.restoreTreeStateAfterChange){if(this.oTreeProperties[u]&&this.oTreeProperties[f]){this._bRestoreTreeStateAfterChange=true;this._aTreeKeyProperties=[];for(o=r.key.propertyRef.length-1;o>=0;o--){this._aTreeKeyProperties.push(r.key.propertyRef[o].name)}}else{t.warning("Tree state restoration not possible: Missing annotation "+'"hierarchy-sibling-rank-for" and/or '+'"hierarchy-preorder-rank-for"');this._bRestoreTreeStateAfterChange=false}}else{this._bRestoreTreeStateAfterChange=false}if(this.mParameters&&this.mParameters.select){if(this.mParameters.select.indexOf(this.oTreeProperties[d])===-1){this.mParameters.select+=","+this.oTreeProperties[d]}if(this._bRestoreTreeStateAfterChange){for(a=this._aTreeKeyProperties.length-1;a>=0;a--){n=this._aTreeKeyProperties[a];if(this.mParameters.select.indexOf(n)===-1){this.mParameters.select+=","+n}}}this.sCustomParams=this.oModel.createCustomParams(this.mParta/ODataTreeBindingFlat"}}sap.ui.require([l],function(t){t.apply(p);e()})};v.prototype._processSelectParameters=function(){if(this.mParameters){this.oNavigationPaths=this.mParameters.navigation;if(this.mParameters.select){var e=this.mParameters.select.split(",");var i=[];if(this.oNavigationPaths){s(this.oNavigationPaths,function(e,t){if(i.indexOf(t)==-1){i.push(t)}})}s(i,function(t,i){if(e.indexOf(i)==-1){e.push(i)}});if(this.bHasTreeAnnotations){s(this.oTreeProperties,function(t,i){if(i){if(e.indexOf(i)==-1){e.push(i)}}})}this.mParameters.select=e.join(",")}this.sCustomParams=this.oModel.createCustomParams(this.mParameters)}if(!this.bHasTreeAnnotations&&!this.oNavigationPaths){t.error("Neither navigation paths parameters, nor (complete/valid) tree hierarchy annotations where provided to theon(e){return this.bHasTreeAnnotations?this.oTreeProperties[e]:undefined};v.prototype.getDownloadUrl=function(e){var t=[],i;if(e){t.push("$format="+encodeURIComponent(e))}if(this.aSorters&&this.aSorters.length>0){t.push(c.createSortParams(this.aSorters))}if(this.getFilterParams()){t.push("$filter="+this.getFilterParams())}if(this.sCustomParams){t.push(this.sCustomParams)}i=this.getResolvedPath();return i&&this.oModel._createRequestUrl(i,null,t)};v.prototype.setNumberOfExpandedLevels=function(e){e=e||0;if(e<0){t.warning("ODataTreeBinding: numberOfExpandedLevels was set to 0. Negative values are prohibited.");e=0}this.iNumberOfExpandedLevels=e;this._fireChange()};v.prototype.getNumberOfExpandedLevels=function(){return this.iNumberOfExpandedLevels};v.prototype.setRootLevel=function(e){e=parseInt(e||0);if(e<0){t.warning("ODataTreeBinding: rootLevels was set to 0. Negative values are proh)};v.prototype.getRootLevel=function(){return parseInt(this.iRootLevel)};v.prototype._getEntityType=function(){var t=this.getResolvedPath();if(t){var i=this.oModel.oMetadata._getEntityTypeByPath(t);e(i,"EntityType for path "+t+" could not be found!");return i}return undefined};v.prototype.getFilterParams=function(){var e;if(this.aApplicationFilters){this.aApplicationFilters=Array.isArray(this.aApplicationFilters)?this.aApplicationFilters:[this.aApplicationFilters];if(this.aApplicationFilters.length>0&&!this.sFilterParams){e=h.groupFilters(this.aApplicationFilters);this.sFilterParams=c._createFilterParams(e,this.oModel.oMetadata,this.oEntityType);this.sFilterParams=this.sFilterParams?"("+this.sFilterParams+")":""}}else{this.sFilterParams=""}return this.sFilterParams};v.prototype._abortPendingRequest=function(){if(!ripDataEvents=true;s(this.mRequestHandles,function(e,t){if(t){t.abort()}});this.mRequestHandles={}}};return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/Context",["./lib/_Helper","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/Context"],function(e,t,i,n){"use strict";var o="sap.ui.model.odata.v4.Context",r=0,s,h=-9007199254740991,a=n.extend("sap.ui.model.odata.v4.Context",{constructor:d});function d(e,t,i,o,r,s,h){if(i[0]!=="/"){throw new Error("Not an absolute path: "+i)}if(i.endsWith("/")){throw new Error("Unsupported trailing slash: "+i)}n.call(this,e,i);this.oBinding=t;this.oCreatedPromise=r&&Promise.resolve(r).then(function(){});this.oSyncCreatePromise=r;this.oDeletePromise=null;this.iGeneration=s||0;this.bInactive=h||undefined;this.iIndex=o;this.bKeepAlive=false;this.bSelected=false;this.fnOnBeforeDestroy=undefined}a.prototype.adjustPredicate=function(e,t,i){var n=this.sPath;this.sPath=n.replace(e,t);if(i){i(n,this.sPath)}this.oModel.getDependentBindings(thioModel.getDependentBindings(this).forEach(function(e){e.checkUpdate()})};a.prototype.checkUpdateInternal=function(){return i.all(this.oModel.getDependentBindings(this).map(function(e){return e.checkUpdateInternal()}))};a.prototype.collapse=function(){switch(this.getProperty("@$ui5.node.level")===0?undefined:this.isExpanded()){case true:this.oBinding.collapse(this);break;case false:throw new Error("Already collapsed: "+this);default:throw new Error("Not expandable: "+this)}};a.prototype.created=function(){return this.oCreatedPromise};a.prototype.delete=function(t,n){var o,r=null,s=this;if(this.isDeleted()){throw new Error("Must not delete twice: "+this)}if(this.oBinding.mParameters.$$aggregation){throw new Error("Cannot delete "+this+" when using data aggregation")}this.oBinding.checkSuspended();if(this.isTransient()){t=null}else if(t===null){if(!(this.isKeepAlive()&&this.iIndex===undefined)){throw new Error("Cannot delete "+this)}}if(t===null){o=i.resolve();n=true}else{e.checkGroupId(t);o=this.fetchCanonicalPath().then(function(e){return e.slice(1)});r=this.oBinding.lockGroup(t,true,true)}return Promise.resolve(o.then(function(e){return s.oBinding.delete(r,e,s,null,n,function(){s.oDeletePromise=null})}).catch(function(e){if(r){r.unlock(true)}throw e}))};a.prototype.destroy=function(){var e=this.fnOnBeforeDestroy;if(e){this.fnOnBeforeDestroy=undefined;e()}this.oModel.getDependentBindings(this).forEach(function(e){e.setContext(undefined)});this.oBinding=undefined;this.oCreatedPromise=undefined;this.oSyncCreatePromise=undefined;this.bInactive=undefined;this.bKeepAlive=undefined;this.bSelected=false;this.oModel=undefined;n.prototype.destroy.call(this)};a.prototype.doDelete=function(e,t,i,n,r,s){var h=this.oModel,a=this;this.oDeletePromise=r.deleteFromCache(e,t,.getAllBindings().forEach(function(t){t.removeCachesAndMessages(e,true)})}).catch(function(e){h.reportError("Failed to delete "+a.getPath(),o,e);a.checkUpdate();throw e});if(e&&this.oModel.isApiGroup(e.getGroupId())){h.getDependentBindings(this).forEach(function(e){e.setContext(undefined)})}return this.oDeletePromise};a.prototype.doSetProperty=function(t,n,r,s,h){var a=this.oModel,d=a.getMetaModel(),u,c,l=this;if(this.isDeleted()){if(r){r.unlock()}throw new Error("Must not modify a deleted entity: "+this)}if(r&&this.isTransient()&&!this.isInactive()){c=this.getValue();u=c&&e.getPrivateAnnotation(c,"transient");if(u instanceof Promise){r.unlock();r=r.getUnlockedCopy();this.doSetProperty(t,n,null,true,true).catch(this.oModel.getReporreturn e&&l.created()}).then(function(){return l.doSetProperty(t,n,r,s)})}}if(this.oModel.bAutoExpandSelect){t=d.getReducedPath(this.oModel.resolve(t,this),this.oBinding.getBaseForPathReduction())}return this.withCache(function(i,u,c){return c.doSetProperty(u,n,r)||d.fetchUpdateData(t,l,!r).then(function(u){var f=e.getRelativePath(u.entityPath,c.oReturnValueContext?c.oReturnValueContext.getPath():c.getResolvedPath()),p=false;function g(e){a.reportError("Failed to update path "+a.resolve{c.firePatchCompleted(e);p=false}}function v(){p=true;c.firePatchSent()}if(!r){return i.setProperty(u.propertyPath,n,f,h)}if(l.isInactive()){i.setProperty(u.propertyPath,n,f,h).catch(l.oModel.getReporter());if(c.fireCreateActivate(l)){l.bInactive=false}else{l.bInactive=1}}return i.update(r,u.propertyPath,n,s?undefined:g,u.editUrl,f,d.getUnitOrCurrencyPath(l.oModel.resolve(t,l)),c.isPatchWithoutSideEffects(),v,l.isKeepAlive.bind(l),l.isInactive()).then(function(){P(true)},function(e){P(false);throw e})})},t,false,true)};a.prototype.expand=function(){switch(this.isExpanded()){case false:this.oBinding.expand(this).catch(this.oModel.getReporter());break;case true:throw new Error("Already expanded: "+this);default:th=function(){return this.oModel.getMetaModel().fetchCanonicalPath(this)};a.prototype.fetchPrimitiveValue=function(e,t,n){var o,r=[this.fetchValue(e,null,n)],s=this.oModel.resolve(e,this);if(t){r.push(this.oModel.getMetaModel().fetchUI5Type(s))}return i.all(r).then(function(e){var i=e[1],n=e[0];if(n&&typeof n==="object"){o=new Error("Accessed value is not primitive: "+s);o.isNotPrimitive=true;throw o}return t?i.formatValue(n,"string"):n})};a.prototype.fetchValue=function(e,t,n){var o=this.oBinding;if(this.iIndex===h){return i.resolve()}if(o.getHeaderContext&&o.getHeaderContext()===this){if(e&&e.startsWith(this.sPath)){e=e.sln o.fetchValue(this.sPath,t,n).then(function(e){return{$count:e.$count}})}else if(e!=="$count"){throw new Error("Invalid header path: "+e)}}if(!e){e=this.sPath}else if(e[0]!=="/"){e=this.oModel.resolve(e,this);if(this.oModel.bAutoExpandSelect){e=this.oModel.getMetaModel().getReducedPath(e,this.oBinding.getBaseForPathReduction())}}return this.oBinding.fetchValueon(e){return this.withCache(function(e,t){return e.getAndRemoveValue(t)},e,true).getResult()};a.prototype.getBinding=function(){return this.oBinding};a.prototype.getCanonicalPath=e.createGetMethod("fetchCanonicalPath",true);a.prototype.getGeneration=function(e){if(this.iGeneration||e){return this.iGeneration}return this.oBinding.getGeneration()};a.prototype.getGroupId=function(){return this.oBinding.getGroupId()};a.prototype.getIndex=function(){if(this.iIndex===undefined){return undefined}if(this.oBinding.isFirstCreateAtEnd()){if(this.iIndex<0){return this.oBinding.bLengthFinal?this.oBinding.iMaxLength-this.iIndex-1:-this.iIndex-1}return this.iIndex}return this.getModelIndex()};a.prototype.getModelIndex=function(){if(this.iIndex!==undefined&&this.oBinding.iCreatedContexts){return this.iIndex+.prototype.getObject=function(t){return e.publicClone(this.getValue(t))};a.prototype.getProperty=function(e,i){var n,r;this.oBinding.checkSuspended();r=this.fetchPrimitiveValue(e,i,true);if(r.isRejected()){r.caught();n=r.getResult();if(n.isNotPrimitive){throw n}else if(!n.$cached){t.warning(n.message,e,o)}}return r.isFulfilled()?r.getResult():undefined};a.prototype.getQueryOptionsForPath=function(e){return this.oBinding.getQueryOptionsForPath(e)};a.prototype.getUpdateGroupId=function(){return this.oBinding.getUpdateGroupId()};a.prototype.getValue=function(e){var t,i=this;this.oBinding.checkSuspended();t=this.fetchValue(e,null,true).catch(function(e){if(!e.$cached){i.oModel.reportError("Unexpected error",o,e)}});if(t.isFulfilled()){return t.getResult()}};a.prototype.hasPendingChanges=function(){var e=this;return this.isTransient()&&this.isInactive()!==true||this.oDeletePromise&&this.oDeletePromise.isPending()||this.oBinding.hasPendingChangesForPath(this.sPath)||this.oModel.getDependentBindings(this).some(function(t){return t.oCache?t._hasPendingChanges(false,e.sPath):t.hasPendingChangesInDependents(false,e.sPath)})||this.oModel.withUnresolvedBindingsslice(1))};a.prototype.isDeleted=function(){return!!this.oDeletePromise};a.prototype.isExpanded=function(){return this.getProperty("@$ui5.node.isExpanded")};a.prototype.isInactive=function(){return this.bInactive};a.prototype.isKeepAlive=function(){return this.bKeepAlive};a.prototype.isSelected=function(){return this.bSelected};a.prototype.isTransient=function(){return this.oSyncCreatePromise&&this.oSyncCreatePromise.isPending()};a.prototype.patch=function(e){return this.withCache(function(t,i){t.patch(i,e)},"")};a.prototype.refresh=function(e,t){this.requestRefresh.apply(this,arguments).catch(this.oModel.getReporter())};a.prototype.refreshDependentBindings=function(e,t,n,o){return i.all(this.oModel.getDependentBindings(this).map(function(i){return i.refreshInternal(e,t,n,o)}))};a.prototype.replaceWith=function(t){var i;this.oBinding.checkSuspended();if(this.isTransient()||this.isDeleted()){throw new Error("Cannot replace "+this)}if(t.oBinding!==this.oBinding||t.iIndex!==undefined||t.isDeleted()||!t.isKeepAlive()){throw new Error("Cannot replace with "+t)}i=t.getValue();this.oBinding.doReplaceWith(this,i,e.getPrivateAnnotation(i,"predicate"))};a.prototype.requestCanonicalPath=e.createRequestMethod("fetchCanonicalPath");a.prototype.requestObject=function(t){this.oBinding.checkSuspended();return Promise.resolve(this.fetchValue(t)).then(e.publicClone)};a.prototype.requestProperty=function(e,i){var n=Array.isArray(e)?e:[e],r=this;this.oBinding.checkSuspended();return Promise.all(n.map(function(e){return r.oBinding.fetchIfChildCanUseCache(r,e,undefined,true).then(function(n){if(n){return r.fetchPrimitiveV: "+e,undefined,o)})})).then(function(t){return Array.isArray(e)?t:t[0]})};a.prototype.requestRefresh=function(t,i){var n;e.checkGroupId(t);if(this.oBinding.mParameters.$$aggregation){throw new Error("Cannot refresh "+this+" when using data aggregation")}this.oBinding.checkSuspended();if(this.hasPendingChanges()){throw new Error("Cannot refresh entity due to pending changes: "+this)}if(this.oBinding.refreshSingle){n=this.oBinding.refreshSingle(this,this.oBinding.lockGroup(t,true),i)}else{if(arguments.length>1){throw new Error("Unsupported parameter bAllowRemoval: "+i)}n=this.oBinding.refreshReturnValueContext(this,t)||this.oBinding.requestRefresh(t)}this.oModel.withUnresolvedBindings("removeCachesAndMessages",this.sPath.slice(1));return Promise.resolve(n).then(function(){})};a.prototype.requestSideEffects=function(t,n){var o,r=this.oModel.getMetaModel(),s=[],h=[],a,d,u=this;function c(e){if(!e){return false}if(e==="*"){return true}if(e.endsWith("/*")){e=e.slice(0,-2)}return!e.includes("*")}this.oBinding.checkSuspended();e.checkGroupId(n);if(this.isTransient()||this.isDeleted()){throw new Error("Unsupported context: "+this)}if(!t||!t.length){throw new Error("Missing edm:(Navigation)PropertyPath expressions")}if(!this.oBinding.isResolved()){throw new Error("Cannot request side effects of unresolved binding's context: "+this)}o=r.getObject("/$EntityContainer");if(!o){throw new Error("Missing metadata")}o="/"+o+"/";t.map(function(e){if(e&&typeof e==="object"){if(c(e.$PropertyPath)){return e.$PropertyPath}if(typeof e.$NavigationPropertyPath==="string"&&!e.$NavigationPropertyPath.includes("*")){return e.$NavigationPropertyPath}}else if(typeof e==="string"&&(!e||c(e))){return e}throw new Error("Not an edm:(Navigation)PropertyPath expression: "+JSON.stringify(e))}).forEach(function(e){if(e[0]==="/"){if(!e.startsWith(o)){throw new Error("Path must start with '"+o+"': "+e)}h.push(e.slice(o.length-1))}else{s.push(e)}});a=this.oBinding.getRootBinding();d=a.getResolvedPath();s=s.reduce(function(t,i){return t.concat(r.getAllPathReductions(e.buildPath(u.getPath(),i),d))},[]);s=e.filterPaths(h,s);n=n||this.getUpdateGroupId();return Promise.resolve(i.resolve(this.oModel.isAutoGroup(n)&&this.oModel.oRequestor.waitForRunningChangeRequests(n).then(function(){u.oModel.oRequestor.relocateAll("$parked."+n,n)})).then(function(){return i.all([u.oModel.requestSideEffects(n,h),u.requestSideEffectsInternal(s,n)])})).then(function(){})};a.prototype.requestSideEffectsInternal=function(t,n){var o=this,r,s=o,h,a=[],d,u=[],c,l=[];if(!t.length){return undefined}for(;;){r=s.oBinding;c=r.getPath();d=r.getContext();if(r.oCache&&(!h||r.oCache.hasChangeListeners())){h=s}if(h&&c){break}if(!r.getBoundContext){throw new Error("Not a context binding: "+r)}s=d}r=h.oBinding;t.forEach(function(t){var i=e.getRelativePath(t,h.getPath());if(i===undefined){u.push(t)}else{a.push(i)}});if(u.length){l.push(r.getContext().requestSideEffectsInternal(u,n))}if(a.length&&r.oCache!==undefined){l.push(r.requestSideEffects(n,a,h))}return i.all(l)};a.prototype.resetChanges=function(){var e=this.oDeletePromise?[this.oDeletePromise.catch(function(){})]:[],t=this;if(this.iIndex===h||this.isTransient()&&!this.isInactive()||this.oBinding.getHeaderContext&&this===this.oBinding.getHeaderContext()||this.oBinding.getParameterContext&&this===this.oBinding.getParameterContext()){throw new Error("Cannot reset: "+this)}this.oBinding.checkSuspended();this.oBinding.resetChangesForPath(this.sPath,e);if(this.bInactive===1){this.bInactive=true}this.oModel.getDependentBindings(this).forEach(function(i){if(i.oCache){e.push(i._resetChanges(t.sPath))}else{i.resetChangesInDependents(e,t.sPath);i.resetInvalidDataState()}});return Promise.all(e).then(function(){})};a.prototype.resetKeepAlive=function(){this.bKeepAlive=false};a.prototype.setInactive=function(){if(!this.bInactive){throw new Error("Not inactive: "+this.bInactive)}this.bInactive=true};a.prototype.setKeepAlive=function(t,i,n){var o=this;if(this.isTransient()||t&&this.isDeleted()){throw new Error("Unsupported context "+this)}e.getPredicateIndex(this.sPath);this.oBinding.checkKeepAlive(this,t);if(t&&n){if(!this.oModel.bAutoExpandSelect){throw new Error("Missing parameter autoExpandSelect at model")}this.bKeepAlive=t;this.oModel.getMetaModel().fetchObject(e.getMetaPath(this.sPath)+"/@com.sap.vocabularies.Common.v1.Messages/$Path").then(function(e){if(!e){throw new Error("Missing @com.sap.vocabularies.Common.v1.Messages")}return o.oBinding.fetchIfChildCanUseCache(o,e,undefined,true)}).then(function(e){return o.fetchValue(e)}).catch(this.oModel.getReporter())}this.bKeepAlive=t;this.fnOnBeforeDestroy=t?i:undefined;this.oBinding.onKeepAliveChanged(this)};a.prototype.setNewGeneration=function(){r+=1;this.iGeneration=r};a.prototype.setProperty=function(t,i,n,r){var s=null,h=this.oModel,a=this;this.oBinding.checkSuspended();if(typeof i==="function"||i&&typeof i==="object"){throw new Error("Not a primitive value")}if(n!==null){e.checkGroupId(n);s=this.oBinding.lockGroup(n,true,true)}return Promise.resolve(this.doSetProperty(t,i,s,!r)).catch(function(e){if(s){s.unlock(true)}h.reportError("Failed to update path "+h.resolve(t,a),o,e);throw e})};a.prototype.setSelected=function(e){if(!this.oBinding.getHeaderContext){throw new Error("Unsupported context: "+this)}if(e&&this.isDeleted()){throw new Error("Must not select a deleted entity: "+this)}this.bSelected=e;this.oBinding.onKeepAliveChanged(this)};a.prototype.toString=function(){var e="";if(!this.oModel){e=";destroyed"}else if(this.isDeleted()){e=";deleted"}if(this.iIndex!==undefined){if(!e){switch(this.isTransient()){case false:e=";createdPersisted";break;case true:e=this.isInactive()?";inactive":";transient";break}}if(this.bSelected){e+=";selected"}e="["+this.iIndex+e+"]"}return this.sPath+e};a.prototype.updateAfterCreate=function(e,t){i.all(this.oModel.getDependentBindings(this).map(function(i){return i.updateAfterCreate(e,t)})).catch(this.oModel.getReporter())};a.prototype.withCache=function(e,t,n,o){if(this.iIndex===h){return i.resolve()}return this.oBinding.withCache(e,this.oModel.resolve(t,this),n,o)};s={create:function(e,t,i,n,o,r){return new a(e,t,i,n,o,0,r)},createNewContext:function(e,t,i){r+=1;return new a(e,t,i,undefined,undefined,r)}};Object.defineProperty(s,"VIRTUAL",{value:h});return s},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataBinding",["./lib/_Helper","sap/ui/base/SyncPromise","sap/ui/model/ChangeReason","sap/ui/model/odata/OperationMode","sap/ui/model/odata/v4/Context"],function(e,t,n,i,r){"use strictter],s=/\/\d|\(\$uid=/;function a(e,t){return o.indexOf(e)>o.indexOf(t)}function h(){this.mCacheByResourcePath=undefined;this.oCache=null;this.oCachePromise=t.resolve(null);this.mCacheQueryOptions=undefined;this.oFetchCacheCallToken=undefined;this.mLateQueryOptions=undefined;this.sReducedPath=undefined;this.sResumeChangeReason=undefined}h.prototype._hasPendingChanges=function(e,t){return this.isResolved()&&(this.hasPendingChangesForPath("",e)||this.hasPendingChangesInDependents(e,t))};h.prototype._resetChanges=function(e){var t=[];this.checkSuspended();this.resetChangesForPath("",t);this.resetChangesInDependents(t,e);this.resetInvalidDataStateredicate=function(e,t){this.sReducedPath=this.sReducedPath.replace(e,t)};h.prototype.assertSameCache=function(e){var t;if(this.oCache!==e){t=new Error(this+" is ignoring response from inactive cache: "+e);t.canceled=true;throw t}};h.prototype.checkBindingParameters=function(t,n){var r=this;Object.keys(t).forEach(function(o){var s=t[o];if(!o.startsWith("$$")){return}if(!n.includes(o)){throw new Error("Unsupported binding parameter: "+o)}switch(o){case"$$aggregation":break;case"$$groupId":case"$$updateGroupId":e.checkGroupId(s,false,"Unsupported value for binding parameter '"+o+"': ");break;case"$$ignoreMessages":case"$$sharedRequest":if(s!==true&&s!==false){throw new Error("Unsupported value for binding parameter '"+o+"': "+s)}break;case"$$inheritExpandSelect":if(s!==true&&s!==false){throw new Error("Unsupported value for binding parameter "+"'$$inheritExpandSelect': "+s)}if(!r.oOperation){throw new Error("Unsupported binding parameter $$inheritExpandSelect: "+"binding is not an operation binding")}if(t.$expand){throw new Error("Must not set parameter $$inheritExpandSelect on a binding "+"which has a $expand binding parameter")}break;case"$$operationMode":if(s!==i.Server){throw new Error("Unsupported operation mode: "+s)}break;case"$$getKeepAliveContext":if(r.isRelative()&&!t.$$ownRequest){throw new Error("$$getKeepAliveContext requires $$ownRequest in a relative binding")}["$$aggregation","$$canonicalPath","$$sharedRequest"].forEach(function(n,i){if(n in t&&(i>0||e.isDataAggregation(t))){throw new Error("Cannot combine $$getKeepAliveContext and "+n)}});case"$$canonicalPath":case"$$noPatch":case"$$ownRequest":case"$$patchWithoutSideEffects":if(s!==true){throw new Error("Unsupported value for binding parameter '"+o+"': "+s)}break;default:throw new Error("Unknown binding-specific parameter: "+o)}})};h.prototype.checkSuspended=function(e){var t=this.getRootBinding();if(t&&t.isSuspended()&&(!e||this.isRoot()||this.getResumeChangeReason())){throw new Error("Must not call method when the binding's root binding is suspended: "+this)}};h.prototype.checkTransient=function(){if(this.isTransient()){throw new Error("Must not call method when the binding is part of a deep create: "+this)}};h.prototype.checkUpdate=function(e){if(arguments.length>1){throw new Error("Only the parameter bForceUpdate is supported")}this.checkUpdateInternal(e).catch(this.oModel.getReporter())};h.prototype.createAndSetCache=function(e,t,n,i,r){var o,s,a;this.mCacheQueryOptions=Object.assign({},this.oModel.mUriParameters,e);if(this.bRelative){if(n.isTransient&&n.isTransient()&&n.getProperty("@$ui5.context.isTransient")){this.oCache=null;return null}o=this.mCacheByResourcePath&&this.mCacheByResourcePath[t];a=n.getGeneration&&n.getGeneration()||0;if(o&&o.$generation>=a){o.setActive(true)}else{s=this.oModel.resolve(this.sPath,n).slice(1);o=this.doCreateCache(t,this.mCacheQueryOptions,n,s,i,r);if(!(this.mParameters&&this.mParameters.$$sharedRequest)){this.mCacheByResourcePath=this.mCacheByResourcePath||{};this.mCacheByResourcePath[t]=o}o.$deepResourcePath=s;o.$generation=a}}else{o=this.doCreateCache(t,this.mCacheQueryOptions,undefined,undefined,i,r)}if(r&&r!==o){r.deregisterChangeListener("",this);r.setActive(false)}if(this.mLateQueryOptions){o.setLateQueryOptions(this.mLateQueryOptions)}this.oCache=o;return o};h.prototype.destroy=function(){var e=this;this.mCacheByResourcePath=undefined;this.oCachePromise.then(function(t){if(t){t.deregisterChangeListener("",e);t.setActive(false)}},function(){});this.oCache=null;this.oCachePromise=t.resolve(null);this.mCacheQueryOptions=undefined;this.oContext=undefined;thiunction(e,t){if(this.oCache){this.oCache.deregisterChangeListener(e,t)}};h.prototype.getEventingParent=function(){return this.oModel};h.prototype.fetchCache=function(e,n,i,o){var s=this.oCache,a={oOldCache:s===undefined?this.oFetchCacheCallToken.oOldCache:s},h,u=this;if(!this.bRelative){e=undefined}if(!s&&i){if(s===undefined){throw new Error("Unsupported bKeepQueryOptions while oCachePromise is pending")}return}this.oCache=undefined;this.oFetchCacheCallToken=a;if(i){this.oCachePromise=t.resolve(Promise.resolve()).then(function(){return u.createAndSetCache(u.mCacheQueryOptions,s.getResourcePath(),e,o,s)});return}h=[this.fetchOrGetQueryOptionsForOwnCache(e,n),this.oModel.oRequestor.ready()];this.mCacheQueryOptions=undefined;this.oCachePromise=t.all(h).then(function(t){var n=t[0].mQueryOptions,i=u.prepareDeepCreate(e,n);if(t[0].sReducedPath){u.sReducedPath=t[0].sReducedPath}if(n&&!i&&!(e&&e.iIndex===r.VIRTUAL)){return u.fetchResourcePath(e).then(function(t){var i;if(u.oFetchCacheCallToken!==a){i=new Error("Cache discarded as a new cache has been created");i.canceled=true;throw i}return u.createAndSetCache(n,t,e,o,a.oOldCache)})}if(s){s.setActive(false)}u.oCache=null;return null});this.oCachePromise.catch(this.oModel.getReporter())};h.prototype.fetchOrGetQueryOptionsForOwnCache=function(n,i){var r,o,s=this.oModel.resolve(this.sPath,n),a=this;function h(t,n,i){if(n&&t&&e.isEmptyObject(t)){t=undefined}return{mQueryOptions:t,sReducedPath:i||nceof t){if(!o.isFulfilled()){return o.then(function(t){return h(t,e,n)})}o=o.getResult()}return h(o,e,n)}if(this.oOperation||this.bRelative&&!n||this.isMeta()){return h()}o=this.doFetchOrGetQueryOptions(n);if(this.oModel.bAutoExpandSelect&&this.aChildCanUseCachePromises&&!ise.resolve().then(function(){return t.all(a.aChildCanUseCachePromises)})]).then(function(e){a.aChildCanUseCachePromises=[];a.updateAggregatedQueryOptions(e[0]);return a.mAggregatedQueryOptions})}if(i||!this.bRelative||!n.fetchValue){return u()}if(this.oModel.bAutoExpandSelect){r=this.mParameters&&Object.keys(a.mParameters).some(function(e){return e[0]!=="$"||e[1]==="$"});if(r){return u()}return n.getBinding().fetchIfChildCanUseCache(n,a.sPath,o,!this.mParameters).then(function(e){if(e){o=undefined}return u(false,e)})}if(this.mParameters&&!e.isEmptyObject(this.mParameters)){return u()}return u(true)};h.prototype.fetchResourcePath=function(n){var i,r,o,a=this;if(!this.bRelative){return t.resolve(this.sPath.slice(1))}n=n||this.oContext;if(!n){return t.resolve()}r=n.getPath();i=n.fetchCanonicalPath&&(this.mParameters&&this.mParameters.$$canonicalPath||!this.isTranslve(r);return o.then(function(t){return e.buildPath(t,a.sPath).slice(1)})};h.prototype.fireDataReceived=function(e,t){this.fireEvent("dataReceived",e,false,!t)};h.prototype.fireDataRequested=function(e){this.fireEvent("dataRequested",undefined,false,!e)};h.prototype.getGroupId=function(){return this.sGroupId||this.bRelative&&this.oContext&&this.oContext.getGroupId&&this.oContext.getGroupId()||this.oModel.getGroupId()};h.prototype.getRelativePath=function(t){var n;if(t[0]==="/"){n=e.getRelativePath(t,this.getResolvedPath());if(n===undefined&&this.oReturnValueContext){n=e.getRelativePath(t,this.oReturnValueContext.getPath())}return n}return t};h.prototype.getResumeChangeReason=function(){var e=this.sResumeChangeReason;this.getDependentBindings().forEach(function(t){var n=t.getResumeChangeReason();if(n&&a(n,e)){e=n}});return e};h.prototype.getRootBinding=function(){if(this.bRelative){if(!this.oContext){return undefined}if(this.oContext.getBinding){return this.oContext.getBinding().getRootBinding()}}return this};h.prototype.getRootBindingResumePromise=function(){var e=this.getRootBinding();return e&&e.getResumePromise()||t.resolve()};h.prototype.getUpdateGroupId=function(){return this.sUpdateGroupId||this.bRelative&&this.oContext&&this.oContext.getUpdateGroupId&&this.oContext.getUpdateGroupId()||this.oModel.getUpdateGroupId()};h.prototype.hasPendingChanges=function(e){return this._hasPendingChanges(e)};h.prototype.hasPendingChangesForPath=function(e,t){return this.withCache(function(e,n,i){return e.hasPendingChangesForPath(n,t,t&&(i.isRoot()||i.mParameters.$$ownRequest))},e,true).unwrap()};h.prototype.hasPendingChangesInCaches=function(e){var t=this;if(!this.mCacheByResourcePath){return false}return Object.keys(this.mCacheByResourcePath).some(function(n){var i=t.mCacheByResourcePath[n];return i.$deepResourcePath.startsWith(e)&&i.hasPendingChangesForPath("")})};h.prototype.isTransient=function(){return this.bRelative&&this.oContext&&this.oContext.isTransient&&this.oContext.isTransient()};h.prototype.isInitial=function(){throw new Error("Unsupported operation: isInitial")};h.prototype.isRoot=function(){return!this.bRelative||thispended=function(){var e=this.getRootBinding();return e&&e.isSuspended()};h.prototype.lockGroup=function(e,t,n,i){e=e||(n?this.getUpdateGroupId():this.getGroupId());return this.oModel.lockGroup(e,this,t,n,i)};h.prototype.prepareDeepCreate=function(e,t){return false};h.prototype.refresh=function(e){if(typeof e==="boolean"){throw new Error("Unsupported parameter bForceUpdate")}this.requestRefresh(e).catch(this.oModel.getReporter())};h.prototype.refreshSuspended=function(e){if(e&&e!==this.getGroupId()){throw new Error(this+": Cannot refresh a suspended binding with group ID '"+e+"' (own group ID is '"+this.getGroupId()+"')")}this.setResumeChangeReason(n.Refresh)};h.prototype.removeCachesAndMessages=function(t,n){var i=this;if(!n&&this.oCache){this.oCache.removeMessages()}if(this.mCacheByResourcePath){Object.keys(this.mCacheByResourcePath).forEach(function(r){var o=i.mCacheByResourcePath[r],s=o.$deepResourcePath;if(e.hasPathPrefix(s,t)){if(!n){o.removeMessages()}delete i.mCacheByResourcePath[r]}})}};h.prototype.requestAbsoluteSideEffects=function(t,n){var i=[],r=e.getMetaPath(this.getResolvedPath());n.some(function(t){var n=e.getRelativePath(t,r);if(n!==undefined){i.push(n)}else if(e.hasPathPrefix(r,t)){i=[""];return true}});if(i.length){if(this.requestSideEffects){return this.requestSideEffects(t,i)}return this.refreshInternal("",t,true,true)}};h.prototype.requestRefresh=function(t){if(!this.isRoot()){throw new Error("Refresh on this binding is not supported")}if(this.hasPendingChanges(true)){throw new Error("Cannot refresh due to pending changes")}e.checkGroupId(t);return Promise.resolve(this.setChanges=function(){this.checkTransient();return this._resetChanges()};h.prototype.resetChangesForPath=function(e,t){t.push(this.withCache(function(e,t){e.resetChangesForPath(t)},e).unwrap())};h.prototype.resetInvalidDataState=function(){};h.prototype.setResumeChangeReason=function(e){if(a(e,this.sResumeChangeReason)){this.sResumeChangeReason=e}};h.prototype.toString=function(){return this.getMetadata().getName()+": "+(this.bRelative?this.oContext+"|":"")+this.sPath};h.prototype.withCache=function(n,i,r,o){var s=r?t.resolve(this.oCache):this.oCachePromise,a,h=this;i=i||"";return s.then(function(t){if(t){a=h.getRelativePath(i);if(a!==undefined){return n(t,a,h)}}else if(t===undefined){return undefined}else if(h.oOperation){return o?n(null,h.getRelativePath(i),h):undefined}if(h.bRelative&&h.oContext&&h.oContext.withCache){return h.oContext.withCache(n,i[0]==="/"?i:e.buildPath(h.sPath,i),r,o)}return undefined})};function u(e){if(this){h.apply(this,arguments)}else{Object.assign(e,h.prototype)}}["adjustPredicate","dndingChangesForPath"].forEach(function(e){u.prototype[e]=h.prototype[e]});return u},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataContextBinding",["./Context","./ODataParentBinding","./lib/_Cache","./lib/_GroupLock","./lib/_Helper","sap/ui/base/SyncPromise","sap/ui/model/Binding","sap/ui/model/ChangeReason","sap/ui/model/ContextBinding"],function(e,t,n,i,o,r,a,s,h){"use strict";var u="sap.ui.model.odata.v4.ODataContextBinding",d={AggregatedDataStateChange:true,change:true,dataReceived:true,dataRequested:true,DataStateChange:true,patchCompleted:true,patchSent:true},c=h.extend("sap.ui.model.odata.v4.ODataContextBinding",{constructor:l});function l(n,i,r,a){var s=i.indexOf("(...)"),u=this;h.call(this,n,i);t.call(this);if(i.endsWith("/")){throw new Error("Invalid path: "+i)}this.bHasFetchedExpandSelectProperties=false;this.oOperation=undefined;this.oParameterContext=null;this.oReturnValueContext=null;if(s>=0){if(s!==this.sPath.length-5){throw new Error("The path must not continue after a deferred operation: "+this.sPath)}this.oOperation={bAction:undefined,mChangeListeners:{},mParameters:{},sResourcePath:undefined};if(!this.bRelative){this.oParameterContext=e.create(this.oModel,this,this.sPath+"/$Parameter")}}a=o.clone(a)||{};this.checkBindingParameters(a,["$$canonicalPath","$$groupId","$$inheritExpandSelect","$$ownRequest","$$patchWithoutSideEffects","$$updateGroupId"]);this.sGroupId=a.$$groupId;this.bInheritExpandSelect=a.$$inheritExpandSelect;this.sUpdateGroupId=a.$$updateGroupId;this.applyParameters(a);this.oElementContext=this.bRelative?null:e.createNewContext(this.oModel,this,i);if(!this.oOperation&&(!this.bRelative||r&&!r.fetchValue)){this.createReadGroupLock(this.getGroupId(bindingCreated(this);Promise.resolve().then(function(){u.bInitial=false})}t(c.prototype);c.prototype._execute=function(t,n,i,a,h){var d=this.oModel.getMetaModel(),c,l,p=this.getResolvedPathWithReplacedTransientPredicates(),f=o.getMetaPath(p),g=this;function C(){g._fireChange({reason:s.Change});return g.refreshDependentBindings("",t.getGroupId(),true)}l=d.fetchObject(f+"/@$ui5.overload").then(function(e){var o,r,s;if(!e){c=d.getObject(f);if(!c||c.$kind!=="NavigationProperty"||!h){throw new Error("Unknown operation: "+p)}}else if(e.length!==1){throw new Error("Expected a single overload, but found "+e.length+" for "+p)}else{c=e[0]}if(g.bRelative&&g.oContext.getBinding){r=g.sPath.lastIndexOf("/");s=r>=0?g.sPath.slice(0,r):"";o=g.oContext.getValue.bind(g.oContext,s)}return g.createCacheAndRequest(t,p,c,n,o,i,a)}).then(function(t){return C().then(function(){var n,i,a,s,u;if(g.isReturnValueLikeBindingParameter(c)){i=g.oContext.getValue();n=i&&o.getPrivateAnnotation(i,"predicate");a=o.getPrivateAnnotation(t,"predicate");if(a){if(n===a){g.oContext.patch(t)}if(g.hasReturnValueContext()){if(h){g.oCache=null;g.oCachePromise=r.resolve(null);u=g.oContext.getBinding().doReplaceWith(g.oContext,t,a);u.setNewGeneration();return u}s=o.getReturnValueContextPath(p,a);g.oReturnValueContext=e.createNewContext(g.oModel,g,s);g.oCache.setResourcePath(g.oReturnValueContext.getPath().slice(1));return g.oReturnValueContext}}}if(h){throw new Error("Cannot replace w/o return value context")}})},function(e){o.adjustTargetsInError(e,c,g.oParameterContext.getPath(),g.bRelative?g.oContext.getPath():undefined);return C().then(function(){throw e})}).catch(function(e){t.unlock(true);g.oModel.reportError("Failed to execute "+p,u,e);throw e});return Promise.resolve(l)};c.prototype.adjustPredicate=function(e,n){t.prototype.adjustPredicate.apply(this,arguments);if(this.mCacheQueryOptions){this.fetchCache(this.oContext,true)}if(this.oElementContext){this.oElementContext.adjustPredicate(e,n)}};c.prototype.applyParameters=function(e,t){this.mQueryOptions=this.oModel.buildQueryOptions(e,true);this.mParameters=e;if(this.isRootBindingSuspended()){if(!this.oOperation){this.sResumeChangeReason=s.Change}}else if(!this.oOperation){this.fetchCache(this.oContext);if(t){this.refreshInternal("",undefined,true).catch(this.oModel.getReporter())}}else if(this.oOperation.bAction===false){this.execute().catch(this.oModel.getReporter())}};c.prototype.attachEvent=function(e,t,n,i){if(!(e in d)){throw new Error("Unsupported event '"+e+"': v4.ODataContextBinding#attachEvent")}return h.prototype.attachEvent.apply(this,arguments)};c.prototype.computeOperationQueryOptions=function(){return Object.assign({},this.oModel.mUriParameters,this.getQueryOptionsFromParameters())};c.prototype.checkKeepAlive=function(){throw new Error("Unsupported "+this)};c.prototype.createCacheAndRequest=function(e,t,i,a,s,h,u){var d=i.$kind==="Action",c,l=s,p=this.oModel,f=o.getMetaPath(t),g=t.slice(1),C=p.oRequestor,m=this;function x(e){if(m.isReturnValueLikeBindingParameter(i)){if(m.hasReturnValueContext()){return o.getReturnValueContextPath(g,o.getPrivateAnnotation(e,"predicate"))}if(o.getPrivateAnnotation(l,"predicate")===o.getPrivateAnnotation(e,"predicate")){return g.slice(0,g.lastIndexOf("/"))}}return g}function P(e){var t;o.adjustTargetsInError(e,i,m.oParameterContext.getPath(),m.bRelative?m.oContext.getPat.extractMessages(e).map(function(e){return m.oModel.createUI5Message(e)}));if(!(t instanceof Promise)){throw new Error("Not a promise: "+t)}return t}if(u&&i.$kind!=="Action"){throw new Error("Not an action: "+t)}if(!d&&i.$kind!=="Function"&&i.$kind!=="NavigationProperty"){throw new Error("Not an operation: "+t)}if(d&&s){l=s()}if(h&&!(d&&i.$IsBound&&l)){throw new Error("Not a bound action: "+t)}if(this.bInheritExpandSelect&&!this.isReturnValueLikeBindingParameter(i)){throw new Error("Must not set parameter $$inheritExpandSelect on this binding")}if(i.$kind!=="NavigationProperty"){f+="/@$ui5.overload/0/$ReturnType";if(i.$ReturnType&&!i.$ReturnType.$Type.startsWith("Edm.")){f+="/$Type"}}else if(!o.isEmptyObject(a)){throw new Error("Unsupported parameters for navigation property")}if(m.oReturnValueContext){m.oReturnValueContext.destroy();m.oReturnValueContext=null}this.oOperation.bAction=d;this.oOperation.mRefreshParameters=a;a=Object.assign({},a);this.mCacheQueryOptions=this.computeOperationQueryOptions();t=C.getPathAndAddQueryOptions(t,i,a,this.mCacheQueryOptions,l);c=n.createSingle(C,t,this.mCacheQueryOptions,p.bAutoExpandSelect,p.bSharedRequests,undefined,d,f);this.oCache=c;this.oCachePromise=r.resolve(c);return d?c.post(e,a,l,h,u&&P,x):c.fetchValue(e,"",undefined,undefined,false,x)};c.prototype.delete=function(e,t,n,i,o,r){var a=this._findEmptyPathParentContext(this.oElementContext),h=a.getBinding(),u=h.getContext(),d=h.oReturnValueContext,c=this;function l(){r();a.oDeletePromise=null}if(!h.execute){n.oDeletePromise=h.delete(e,t,a,n.getValue(),o,l);return n.oDeletePromise}h.oElementContext=null;if(d){h.oReturnValueContext=null}this._fireChange({reason:s.Remove});n.oDeltion(e,t){if(t>0){l()}}).then(function(){a.destroy();if(d){d.destroy()}},function(e){l();if(!h.isRelative()||u===h.getContext()){h.oElementContext=a;if(d){h.oReturnValueContext=d}c._fireChange({reason:s.Add})}throw e});return n.oDeletePromise};c.prototype.destroy=function(){if(this.oElementContext){this.oElementContext.destroy();this.oElementContext=undefined}if(this.oParameterContext){this.oParameterContext.destroy();this.oParameterContext=undefined}if(this.oReturnValueContext){this.oReturnValueContext.destroy();this.oReturnValueContext=undefined}this.oModel.bindingDestroyed(this);this.oOperation=undefined;this.mParameters=undefined;this.mQueryOptions=undefined;t.prototype.destroy.call(this);h.prototype.destroy.call(this)};c.prototype.doCreateCache=function(e,t,i,o){return n.createSingle(this.oModel.oRequestor,e,t,this.oModel.bAutoExpandSelect,this.oModel.bSharedRequests,o)};c.prototype.doDeregisterChangeListener=function(e,n){if(this.oOperation&&(e==="$Parameter"||e.startsWith("$Parameter/"))){o.removeByPath(this.oOperation.mChangeListeners,e.slice(11),n);return}t.prototype.doDeregisterChangeListener.apply(this,arguments)};c.prototype.doFetchOrGetQueryOptions=function(e){return this.fetchResolvedQueryOptions(e)};c.prototype.doSetProperty=function(e,t,i){if(this.oOperation&&(e==="$Parameter"||e.startsWith("$Parameter/"))){o.updateAll(this.oOperation.mChangeListeners,"",this.oOperation.mParameters,n.makeUpdateData(e.split("/").slice(1),t));this.oOperation.bAction=undefined;if(i){i.unlock()}return r.resolve()}};c.prototype.doSuspend=function(){if(this.bInitial&&!this.oOperation){this.sResumeChangeReason=s.Change}};c.prototype.execute=function(e,t,n,i){var r=this.getResolvedPath();this.checkSuspended();o.checkGroupId(e);if(!this.oOperation){throw new Error("The binding must be deferred: "+this.sPath)}if(this.bRelative){if(!r){throw new Error("Unresolved binding: "+this.sPath)}if(this.oContext.isTransient&&this.oContext.isTransient()){throw new Error("Execute for transient context not allowed: "+r)}if(this.oContext.getPath().includes("(...)")){throw new Error("Nested deferred operation bindings not supported: "+r)}if(i){if(!this.oContext.getBinding){throw new Error("Cannot replace this parent context: "+this.oContext)}this.oContext.getBinding().checkKeepAlive(this.oContext,true)}}else if(i){throw new Error("Cannot replace when operation is not relative")}return this._execute(this.lockGroup(e,true),o.publicClone(this.oOperation.mParameters,true),t,n,i)};c.prototype.doFetchExpandSelectProperties=function(){var e,t=this;if(this.bHasFetchedExpandSelectProperties||!this.oModel.bAutoExpandSelect||!this.mParameters.$expand&&!this.mParameters.$select){return}e=this.getResolvedPath();o.convertExpandSelectToPaths(this.oModel.buildQueryOptions(this.mParameters,true)).forEach(function(n){t.oContext.fetchValue(o.buildPath(e,n)).catch(t.oModel.getReporter())});this.bHasFetchedExpandSelectProperties=true};c.prototype.fetchValue=function(e,t,n){var a=n&&this.oCache!==undefined?r.resolve(this.oCache):this.oCachePromise,s,h=this.getRootBinding(),d=this;if(h&&h.isSuspended()){s=new Error("Suspended binding provides no value");s.canceled="noDebugLog";throw s}return a.then(function(r){var a,s=false,h,c=d.getResolvedPath(),l=r||d.oOperation?d.getRelativePath(e):undefined,p,f;if(d.oOperation){if(l===undefined){return d.oContext.fetchValue(e,t,n)}p=l.split("/");if(p[0]==="$Parameter"){if(p.length===1){return undefined}o.addByPath(d.oOperation.mChangeListeners,l.slice(11),t);f=o.drillDown(d.oOperation.mParameters,p.slice(1));return f===undefined?null:f}}if(r&&l!==undefined){if(n){h=i.$cached}else{h=d.oReadGroupLock||d.lockGroup();d.oReadGroupLock=undefined}a=d.isRefreshWithoutBubbling();return d.resolveRefreshPromise(r.fetchValue(h,l,function(){s=true;d.fireDataRequested(a)},t)).then(function(e){d.assertSameCache(r);return e}).then(function(e){if(s){d.fireDataReceived({data:{}},a)}return e},function(e){h.unlock(true);if(s){d.oModel.reportError("Failed to read path "+c,u,e);d.fireDataReceived(e.canceled?{data:{}}:{error:e},a)}throw e})}if(!d.oOperation&&d.oContext){if(!n){d.doFetchExpandSelectProperties()}return d.oContext.fetchValue(e,t,n)}})};c.prototype.findContextForCanonicalPath=function(e){var t=this.oOperation?this.oReturnValueContext:this.oElementContext,n,i;if(t){n=t.getValue();if(n&&o.hasPrivateAnnotation(n,"predicate")){i=t.fetchCanonicalPath();i.caugendentBindings=function(){return this.oModel.getDependentBindings(this)};c.prototype.getParameterContext=function(){if(!this.oOperation){throw new Error("Not a deferred operation binding: "+this)}return this.oParameterContext};c.prototype.getQueryOptionsFromParameters=function(){var e,t=this.mQueryOptions;if(this.bInheritExpandSelect){e=this.oContext.getBinding().getInheritableQueryOptions();t=Object.assign({},t);if("$select"in e){t.$select=t.$select&&t.$select.slice();o.addToSelect(t,e.$select)}if("$expand"in e){t.$expand=e.$expand}}return t};c.prototype.getResolvedPathWithReplacedTransientPredicates=function(){var e="",t=this.getResolvedPath(),n,i=this;if(t&&t.includes("($uid=")){n=t.slice(1).split("/");t="";n.forEach(function(n){var r,a,s;e+="/"+n;s=n.indexOf("($uid=");if(s>=0){r=i.oContext.getValue(e);a=r&&o.getPrivateAnnotation(r,"predicate");if(!a){throw new Error("No key predicate known at "+e)}t+="/"+n.slice(0,s)+a}else{t+="/"+n}})}return t};c.prototype.hasReturnValueContext=function(){var e=o.getMetaPath(this.getResolvedPath()).split("/");return e.length===3&&this.oModel.getMetaModel().getObject("/"+e[1]).$kind==="EntitySet"};c.prototype.initialize=function(){this.bInitial=false;if(this.isResolved()&&!this.getRootBinding().isSuspended()){this._fireChange({reason:s.Change})}};c.prototype.isReturnValueLikeBindingParameter=function(e){var t,n;if(!(this.bRelative&&this.oContext&&this.oContext.getBinding)){return false}if(e.$kind==="NavigationProperty"){if(e.$isCollection||this.sPath.includes("/")){return false}n=o.getMetaPath(this.oContext.getPath());if(n.lastIndexOf("/")>0){return false}t=this.oModel.getMetaModel().getObject(n);return t.$kind==="EntitySet"&&t.$Type===e.$Type&&t.$NavigationPropertyBinding&&t.$NavigationPropertyBinding[this.sPath.slice(0,-5)]===n.slice(1)}return e.$IsBound&&e.$ReturnType&&!e.$ReturnType.$isCollection&&e.$EntitySetPath&&!e.$EntitySetPath.includes("/")};c.prototype.refreshDependenetDependentBindings().map(function(o){return o.refreshInternal(e,t,n,i)}))};c.prototype.refreshInternal=function(t,n,i,o){var a=this;if(this.oOperation&&this.oOperation.bAction!==false){return r.resolve()}this.bHasFetchedExpandSelectProperties=false;if(this.isRootBindingSuspended()){this.refreshSuspended(n);return this.refreshDependentBindings(t,n,i,o)}this.createReadGroupLock(n,this.isRoot());return this.oCachePromise.then(function(h){var u,d=a.oRefreshPromise,c=a.oReadGroupLock;if(!a.oElementContext){a.oElementContext=e.create(a.oModel,a,a.getResolvedPath());if(!h){a._fireChange({reason:s.Refresh})}}if(a.oOperation){a.oReadGroupLock=undefined;return a._execute(c,a.oOperation.mRefreshParameters)}if(h&&!d){u=h.hasChangeListeners();a.removeCachesAndMessages(t);a.fetchCache(a.oContext,false,false,o?n:undefined);d=u?a.createRefreshPromise(o):undefined;if(o&&d){d=d.catch(function(e){return a.fetchResourcePath(a.oContext).then(function(e){if(!a.bRelative||h.getResourcePath()===e){a.oCache=h;a.oCachePromise=r.resolve(h);h.setActive(true);return a.checkUpdateInternal()}}).then(function(){throw e})})}if(!i){a.fetchValue("").catch(a.oModel.getReporter())}}return r.all([d,a.refreshDependentBindings(t,n,i,o)])})};c.prototype.refreshReturnValueContext=function(e,t,i){var a=this.oCache,s=this.mCacheQueryOptions,h=this.oModel,u,d=this;if(this.oReturnValueContext!==e){return null}this.mCacheQueryOptions=this.computeOperationQueryOptions();if(this.mLateQueryOptions){o.aggregateExpandSelect(this.mCacheQueryOptions,this.mLateQueryOptions)}this.oCache=n.createSingle(h.oRequestor,e.getPath().slice(1),this.mCacheQueryOptions,true,h.bSharedRequests);this.oCachePromise=r.resolve(this.oCache);this.createReadGroupLock(t,true);u=e.refreshDependentBindings("",t,true,i);if(i){u=u.catch(function(t){d.oCache=a;d.oCachePromise=r.resolve(a);d.mCacheQueryOptions=s;a.setActive(true);return e.checkUpdateInternal().then(function(){throw t})})}return u};c.prototype.requestSideEffects=function(e,t,n){var i=this.oModel,o=[],a=this;function s(e){return e.catch(function(e){i.reportError("Failed to request side effects",u,e);if(!e.canceled){throw e}})}if(t.indexOf("")<0){try{o.push(this.oCache.requestSideEffects(this.lockGroup(e),t,n&&n.getPath().slice(1)));this.visitSideEffects(e,t,n,o);return r.all(o.map(s)).then(function(){return a.refreshDependentListBindingsWithoutCache()})}catch(e){if(!e.message.startsWith("Unsupported collection-valued navigation property ")){throw e}}}return n&&this.refreshReturnValueContext(n,oElementContext?this.oElementContext.requestObject(e):Promise.resolve()};c.prototype.resumeInternal=function(e,t){var n=this.(){i.getDependentBindings().forEach(function(t){t.resumeInternal(e,!!n)})}this.sResumeChangeReason=undefined;if(this.oOperation){o();return}if(t||n){this.mAggregatedQueryOptions={};this.bAggregatedQueryOptionsInitial=true;this.mCanUseCachePromiseByChildPath={};this.removeCachesAndMessages("");this.fetchCache(this.oContext)}o();if(n){this._fireChange({reason:n})}};c.prototype.setContext=function(t){if(this.oContext!==t){if(this.bRelative&&(this.oContext||t)){this.checkSuspended(true);if(this.oElementContext){this.oElementContext.destroy();this.oElementContext=null}if(this.oReturnValueContext){this.oReturnValueContext.destroy();this.oReturnValueContext=null}if(this.oParameterContext){this.oParameterContext.destroy();this.oParameterContext=null}this.fetchCache(t);if(t){this.oElementContext=e.create(this.oModel,this,this.oModel.resolve(this.sPath,t));if(this.oOperation){this.oParameterContext=e.create(this.oModel,this,this.oModel.resolve(this.sPath+"/$Parameter",t))}}this.bHasFetchedExpandSelectProperties=false;a.prototype.setContext.call(this,t)}else{this.oContext=t}}};c.prototype.setParameter=function(e,t){var n;if(!this.oOperation){throw new Error("The binding must be deferred: "+this.sPath)}if(!e){throw new Error("Missing parameter name")}if(t===undefined){throw new Error("Missing value for parameter: "+e)}n=this.oOperation.mParameters[e];this.oOperation.mParameters[e]=t;o.informAll(this.oOperation.mChangeListeners,e,n,t);this.oOperation.bAction=undefined;return this};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataListBinding",["./Context","./ODataParentBinding","./lib/_AggregationCache","./lib/_AggregationHelper","./lib/_Cache","./lib/_GroupLock","./lib/_Helper","./lib/_Parser","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/Binding","sap/ui/model/ChangeReason","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterProcessor","sap/ui/model/FilterType","sap/ui/model/ListBinding","sap/ui/model/Sorter","sap/ui/model/odata/OperationMode"],function(e,t,i,n,r,s,o,a,h,u,d,f,c,l,p,g,C,x,v){"use strict";var P="sap.ui.model.odata.v4.ODataListBinding",m={AggregatedDataStateChange:true,change:true,createActivate:true,createCompleted:true,createSent:true,dataReceived:true,dataRequested:true,DataStateChange:true,patchCompleted:true,patchSent:true,refresh:true},y=C.extend("sap.ui.model.odata.v4.ODataListBinding",{constructor:A});function A(i,n,r,s,a,h){C.call(this,i,n);t.call(this);if(n.endsWith("/")){throw new Error("Invalid path: "+n)}h=o.clone(h)||{};this.checkBindingParameters(h,["$$aggregation","$$canonicalPath","$$getKeepAliveContext","$$groupId","$$operationMode","$$ownRequest","$$patchWithoutSideEffects","$$sharedRequest","$$updateGroupId"]);this.iActiveContexts=0;this.aApplicationFilters=o.toArray(a);this.sChangeReason=i.bAutoExpandSelect&&!o.isDataAggregation(h)?"AddVirtualContext":undefined;this.iCreatedContexts=0;this.bDeepCreate=false;this.iDeletedContexts=0;this.oDiff=undefined;this.aFilters=[];this.sGroupId=h.$$groupId;this.bHasAnalyticalInfo=false;this.oHeaderContext=this.bRelative?null:e.createNewContext(i,this,n);this.sOperationMode=h.$$operationMode||i.sOperationMode;this.mPreviousContextsByPath={};this.aPreviousData=[];this.bRefreshKeptElements=false;this.sResumeAction=undefined;this.bSharedRequest="$$sharedRequest"in h?h.$$sharedRequest:i.bSharedRequests;this.aSorters=o.toArray(s);this.sUpdateGroupId=h.$$updateGroupId;if(!this.sOperationMode&&(this.aSorters.length||this.aApplicationFilters.length)){throw new Error("Unsupported operation mode: "+this.sOperationMode)}this.applyParameters(h);if(!this.bRelative||r&&!r.fetchValue){this.createReadGroupLock(this.getGroupId(),true)}this.setContext(r);i.bindingCreated(this)}t(y.prototype);y.prototype.attachCreateActivate=function(e,t){return this.attachEvent("createActivate",e,t)};y.prototype.detachCreateActivate=function(e,t){return this.detachEvent("createActivate",e,t)};y.prototype.attachCreateCompleted=function(e,t){return this.attachEvent("createCompleted",e,t)};y.prototype.detachCreateCompleted=function(e,t){return this.detachEvent("createCompleted",e,t)};y.prototype.attachCreateSent=function(e,t){return this.attachEvent("createSent",e,t)};y.prototype.detachCreateSent=function(e,t){return this.detachEvent("createSent",e,t)};y.prototype.adjustPredicate=function(e,i,n){var r,s=this;function o(e,t){var i=s.aPreviousData.indexOf(e);if(i>=0){s.aPreviousData[i]=t}}if(n){n.adjustPredicate(e,i,o)}else{t.prototype.adjustPredicate.apply(this,arguments);if(this.mCacheQueryOptions){r=this.oContext.getAndRemoveValue(this.sPath);this.fetchCache(this.oContext,true);if(r.length){this.oCachePromise.then(function(e){e.setPersistedCollectidicate(e,i);this.aContexts.forEach(function(t){t.adjustPredicate(e,i,o)})}};y.prototype.applyParameters=function(e,t){var i,r=this.mParameters&&this.mParameters.$$aggregation,s=this.mQueryOptions&&this.mQueryOptions.$apply;if("$$getKeepAliveContext"in e&&"$apply"in e){throw new Error("Cannot combine $$getKeepAliveContext and $apply")}if("$$aggregation"in e){if("$apply"in e){throw new Error("Cannot combine $$aggregation and $apply")}if(!t){n.validateAggregationAndSetPath(e.$$aggregation,this.oModel.bAutoExpandSelect,this.oModel.oInterface.fetchMetadata,this.getResolvedPath())}i=n.buildApply(e.$$aggregation).$apply}this.mQueryOptions=this.oModel.buildQueryOptions(e,true);this.oQueryOptionsPromise=undefined;this.mParameters=e;if(i){this.mQueryOptions.$apply=i}if(t===""){if(this.mQueryOptions.$apply===s&&(!this.mParameters.$$aggregation||!r||o.deepEqual(this.mParameters.$$aggregation,r))){return}t=this.bHasAnalyticalInfo?f.Change:f.Filter}if(this.isRootBindingSuspended()){this.setResumeChangeReason(t);return}this.removeCachesAndMessages("");this.fetchCache(this.oContext);this.reset(t);if(this.oHeaderContext){this.oHeaderContext.setSelected(false);this.oHeaderContext.checkUpdate()}};y.prototype.attachEvent=function(e,t,i,n){if(!(e in m)){throw new Error("Unsupported event '"+e+"': v4.ODataListBinding#attachEvent")}return C.prototype.attachEvent.apply(this,arguments)};y.prototype._checkDataStateMessages=function(e,t){if(t){e.setModelMessages(this.oModel.getMessagesByPath(t,true))}};y.prototype.checkKeepAlive=function(e,t){if(this.isRelative()&&!this.mParameters.$$ownRequest){throw new Error("Missing $$ownRequest at "+this)}if(e===this.oHeaderContext){throw new Error("Unsupported header context "+e)}if(o.isDataAggregation(this.mParameters)){throw new Error("Unsupported $$aggregation at "+this)}if(this.bSharedRequest){throw new Error("Unsupported $$sharedRequest at "+this)}if(!t&&e&&e.getIndex()===undefined&&e.isKeepAlive()&&!e.isDeleted()&&e.hasPendingChanges()){throw new Error("Not allowed due to pending changes: "+e)}};y.prototype.collapse=function(e){var t=this.aContexts,i=this.oCache.collapse(o.getRelativePath(e.getPath(),this.oHeaderContext.ice(n+1,i).forEach(function(e){s.mPreviousContextsByPath[e.getPath()]=e});for(r=n+1;r<t.length;r+=1){if(t[r]){t[r].iIndex=r}}this.iMaxLength-=i;this._fireChange({reason:f.Change})}};y.prototype.create=function(t,i,n,r){var s,a=this.fetchResourcePath(),h,u=this.getUpdateGroupId(),d,c=this.getResolvedPath(),l="($uid="+o.uid()+")",p=c+l,g,C=this;if(!c){throw new Error("Binding is unresolved: "+this)}this.checkSuspended();if(this.mParameters.$$aggregation){throw new Error("Cannot create in "+this+" when using data aggregation")}n=!!n;if(n&&!(this.bLengthFinal||this.mParameters.$count)){throw new Error("Must know the final length to create at the end. Consider setting $count")}if(this.bFirstCreateAtEnd&&!n){throw new Error("Cannot create at the start after creation at end")}if(r){if(this.isTransient()){throw new Error("Must not create an inactive context in a deep create: "+this)}if(this.isRelative()&&!this.mParameters.$$ownRequest){throw new Error("Missing $$ownRequest at "+this)}u="$inactive."+u}else{this.iActiveContexts+=1}if(this.bFirstCreateAtEnd===undefined){this.bFirstCreateAtEnd=n}d=this.lockGroup(u,true,true,function(){if(!C.aContexts.includes(s)){C.mPreviousContextsByPath[s.getPath()]=s;C.destroyPreviousContextsLater([s.getPath()]);return}C.removeCreated(s);return Promise.resolve().then(function(){C._fireChange({reason:f.Remove})})});h=this.createInCache(d,a,c,l,t,this.bFirstCreateAtEnd!==n,function(e){C.oModel.reportError("POST on '"+a+"' failed; will be repeated automext:s,success:false})},function(){C.fireEvent("createSent",{context:s})}).then(function(e){var n,r,a;if(C.isTransient()){return}if(!(t&&t["@$ui5.keepTransientPath"])){a=o.getPrivateAnnotation(e,"predicate");if(a){C.adjustPredicate(l,a,s);C.oModel.checkMessages()}}C.fireEvent("createCompleted",{context:s,success:true});n=o.getPrivateAnnotation(e,"deepCreate");o.deletePrivateAnnotation(e,"deepCreate");r=C.getGroupId();if(C.oModel.isApiGroup(r)){r="$auto"}return i||n?s.updateAfterCreate(i,r):C.refreshSingle(s,C.lockGroup(r))},function(e){d.unlock(true);throw e});this.iCreatedContexts+=1;s=e.create(this.oModel,this,p,-this.iCreatedContexts,h,r);s.fetchValue().then(function(e){if(e){o.setPrivateAnnotation(e,"context",s);o.setPrivateAnnotation(e,"firstCreateAtEnd",C.bFirstCreateAtEnd)}});if(this.bFirstCreateAtEnd!==n){this.aContexts.splice(this.iCreatedContexts-1,0,s);for(g=this.iCreatedContexts-1;g>=0;g-=1){this.aContexts[g].iIndex=g-this.iCreatedContexts}}else{this.aContexts.unshift(s)}this._fireChange({reason:f.Add});return s};y.prototype.createContexts=function(t,i){var n=false,r,s,a=i.$count,h,u=this.bLengthFinal,d=this.oModel,f=this.getResolvedPath(),c,l=t>this.aContexts.length,p,g=this;function C(){var e=g.iMaxLength+g.iCreatedContexts,t;if(e>=g.aContexts.length){return}for(t=e;t<g.aContexts.length;t+=1){if(g.aContexts[t]){g.aContexts[t].destroy()}}while(e>0&&!g.aContexts[e-1]){e-=1}g.aContexts.length=e;n=true}for(p=0;p<i.length;p+=1){if(this.aContexts[t+p]===undefined&&i[p]){n=true;h=t+p-this.iCreatedContexts;c=o.getPrivateAnnotation(i[p],"predicate");s=f+(c||"/"+h);r=this.mPreviousContextsByPath[s];if(r&&(!r.created()||r.isKeepAlive())){delete this.mPreviousContextsByPath[s];r.iIndex=h;r.checkUpdate()}else{r=e.create(d,this,s,h)}this.aContexts[t+p]=r}}this.destroyPreviousContextsLater(Object.keys(this.mPreviousContextsByPath));if(a!==undefined){this.bLengthFinal=true;this.iMaxLength=a-this.iActiveContexts;C()}else{if(!i.length){this.iMaxLength=t-this.iCreatedContexts;C()}else if(this.aContexts.length>this.iMaxLength+this.iCreatedContexts){this.iMaxLength=Infinity}if(!(l&&i.length===0)){this.bLengthFinal=this.aContexts.length===this.iMaxLength+this.iCreatedContexts}}if(this.bLengthFinal!==u){n=true}return n};y.prototype.delete=function(t,i,n,r,s,a){var h=n.iIndex<0,u=n.iIndex===undefined?o.getRelativePath(n.getPath(),this.oHeaderContext.getPath()):String(n.iIndex),d=false,c=this;if(n.isDeleted()){return n.oDeletePromise}this.iDeletedContexts+=1;return n.doDelete(t,i,u,r,this,function(e,i){if(e!==undefined){if(i>0){delete c.mPreviousContextsByPath[n.getPath()];c.aContexts.splice(e,0,n);a()}else{c.mPreviousContextsByPath[n.getPatined;Promise.resolve().then(function(){c._fireChange({reason:f.Remove})})}if(h){c.iCreatedCngth+=i}c.aContexts.forEach(function(e,t){e.iIndex=t-c.iCreatedContexts})}else if(i>0){d=true;a()}else if(c.bLengthFinal&&!s){c.oCache.requestCount(t&&!c.oModel.isApiGroup(t.getGroupId())?t.getUnlockedCopy():c.lockGroup("$auto")).then(function(e){var t=c.iMaxLength;c.iMaxLength=e-c.iActiveContexts;if(t!==c.iMaxLength){c._fireChange({reason:f.Remove})}})}}).then(function(){c.iDeletedContexts-=1;if(!c.iDeletedContexts&&!c.iCreatedContexts){c.bFirstCreateAtEnd=undefined}n.resetKeepAlive();n.iIndex=e.VIRTUAL;c.destroyPreviousContextsLater([n.getPath()])},function(e){c.iDeletedContexts-=1;a();if(d){c.oCache.reset(c.getKeepAlivePredicates());c.reset(f.Change)}else{c._fireChange({reason:f.Add})}throw e})};y.prototype.destroy=function(){if(this.bHasAexts===undefined){return}this.aContexts.forEach(function(e){e.destroy()});this.destroyPreviousContexts();if(this.oHeaderContext){this.oHeaderContext.destroy()}this.oModel.bindingDestroyed(this);this.aApplicationFilters=undefined;this.aContexts=undefined;this.oDiff=undefined;this.aFilters=undefined;this.oHeaderContext=undefined;this.mPreviousContextsByPath=undefined;this.aPreviousData=undefined;this.mQueryOptions=undefined;this.oQueryOptionsPromise=undefined;this.aSorters=undefined;t.prototype.destroy.call(this);C.prototype.destroy.call(this)};y.prototype.destroyLater=function(e){if(this.iCurrentEnd){this.mPreviousContextsByPath[e.getPath()]=e}else{e.destroy()}};y.prototype.destroyPreviousContexts=function(e){var t=this.mPreviousContextsByPath,i=this;if(t){(e||Object.keys(t)).forEach(function(n){var r=t[n];if(r){if(e&&(r.isKeepAlive()||r.oDeletePromise&&r.oDeletePromise.isPending())){r.iIndex=undefined}else{if(!r.isTransient()){r.destroy();if(r.iIndex===undefined&&i.oCache){i.oCache.removeKeptElement(o.getRelativePath(n,i.oHeaderContext.getPath()))}}delete t[n]}}})}};y.prototype.destroyPreviousContextsLater=function(e){if(e.length){this.oModel.addPrerenderingTask(this.destroyPreviousContexts.bind(this,e))}};y.prototype.doCreateCache=function(e,t,n,r,s,o){var a,h,u;if(o&&o.getResourcePath()===e&&o.$deepResourcePath===r){h=this.getKeepAlivePredicates();if(this.iCreatedContexts||this.iDeletedContexts||h.length){o.reset(h,s,t,this.mParameters.$$aggregation,this.isGrouped());return o}}t=this.inheritQueryOptions(t,n);a=this.getCacheAndMoveKeepAliveContexts(e,t);if(a&&this.m=this.getKeepAlivePredicates();h.forEach(function(e){u[e]=a.getValue(e)});a.setActive(false);a=undefined}a=a||i.create(this.oModel.oRequestor,e,r,t,this.mParameters.$$aggregation,this.oModelst,this.isGrouped());if(u){h.forEach(function(e){a.addKeptElement(u[e])})}else if(this.bSharedRequest){a.registerChangeListener("",this)}return a};y.prototype.doFetchOrGetQueryOptions=function(e){var t=e&&o.getMetaPath(e.getPath()),i=this;if(!(this.oQueryOptionsPromise&&this.oQueryOptionsPromise.$metaPath===t)){this.oQueryOptionsPromise=this.fetchResolvedQueryOptions(e).then(function(t){return i.fetchFilter(e,t.$filter).then(function(e){return o.mergeQueryOptions(t,i.getOrderby(t.$orderby),e)})});this.oQueryOptionsPromise.$metaPath=t}return this.oQueryOptionsPromise};y.prototype.doReplaceWith=function(t,i,n){var r=t.getModelIndex(),s,o=t.fnOnBeforeDestroy,a,h=this.oHeaderContext.getPath()+n,u=this.mPreviousContextsByPath[h];if(u){if(u===t){return u}if(u.iIndex!==undefined){throw new Error("Unexpected index: "+u)}u.iIndex=t.iIndex;delete this.mPreviousContextsByPath[h]}else{u=e.create(this.oModel,this,h,t.iIndex);s=true}if(r===undefined){this.mPreviousContextsByPath[h]=u;this.oCache.addKeptElement(i)}else{t.iIndex=undefined;this.aContexts[r]=u;this.oCache.doReplaceWith(r,i)}if(t.isKeepAlive()){this.mPreviousContextsByPath[t.getPath()]=t;if(s){if(o){a=(o.$original||o).bind(null,u);a.$original=o}u.setKeepAlive(true,a)}}else{this.destroyLater(t)ange({reason:f.Change});return u};y.prototype.doSetProperty=function(){};y.prototype.expand=function(e){var t=false,i=this;this.checkSuspended();return this.oCache.expand(this.,this.oHeaderContext.getPath()),function(){t=true;i.fireDataRequested()}).then(function(n){var r=i.aContexts,s,o,a;if(n>0){s=e.getModelIndex();for(a=r.length-1;a>s;a-=1){o=r[a];if(o){o.iIndex+=n;r[a+n]=o;delete r[a]}}i.iMaxLength+=n;i._fireChange({reason:f.Change})}if(t){i.fireDataReceived({})}},function(e){if(t){i.fireDataReceived({error:e})}throw e})};y.prototype.fetchContexts=function(e,t,i,n,r,s){var o,a=this;if(this.bFirstCreateAtEnd){e+=this.iCreatedContexts}n=n||this.lockGroup();o=this.fetchData(e,t,i,n,s);if(r){o=Promise.resolve(o)}return o.then(function(t){var i;if(!a.aContexts){i=new Error("Binding already deturn t&&a.createContexts(e,t.value)},function(e){n.unlock(true);throw e})};y.prototype.fetchData=function(e,t,i,n,r){var s=this.oContext,o=this;return this.oCachePromise.then(function(a){if(o.bRelatireturn a.read(e,t,i,n,r).then(function(e){o.assertSameCache(a);return e})}n.unlock();return s.fetchValue(o.sReducedPath).then(function(i){var n;i=i||[];n=i.$count;i=i.slice(e,e+t);i.$count=n;return{value:i}})})};y.prototype.fetchDownloadUrl=function(){var e=this.oModel.mUriParameters;this.checkTransient();if(!this.isRelved")}return this.withCache(function(t,i){return t.getDownloadUrl(i,e)})};y.prototype.fetchFilter=function(e,t){var i,r,s,a;function h(e,t,i){var n,r,s,a;function h(e){return s?"tolower("+e+")":e}s=t==="Edm.String"&&e.bCaseSensitive===false;r=h(decodeURIComponent(e.sPath));a=h(o.formatLiteral(e.oValue1,t));switch(e.sOperator){case l.BT:n=r+" ge "+a+" and "+r+" le "+h(o.formatLiteral(e.oValue2,t));break;case l.NB:n=c(r+" lt "+a+" or "+r+" gt "+h(o.formatLiteral(e.oValue2,t)),i);break;case l.EQ:case l.GE:case l.GT:case l.LE:case l.LT:case l.NE:n=r+" "+e.sOperator.toLowerCase()+" "+a;break;case l.Contains:case l.EndsWith:case l.NotContains:case l.NotEndsWith:case l.NotStartsWith:case l.StartsWith:n=e.sOperator.toLowerCase().replace("not","not ")+"("+r+","+a+")";break;default:throw new Error("Unsupported operator: "+e.sOperator)}return n}function d(e,t,i){va.aFilters){return u.all(e.aFilters.map(function(i){return d(i,t,e.bAnd)})).then(function(t){return c(t.join(e.bAnd?" and ":" or "),i&&!e.bAnd)})}n=s.resolve(f(e.sPath,t),a);return s.fetchObject(n).then(function(r){var s,o,a;if(!r){throw new Error("Type cannot be determined, no metadata for path: "+n)}a=e.sOperator;if(a===l.All||a===l.Any){s=e.oCondition;o=e.sVariable;if(a===l.Any&&!s){return e.sPath+"/any()"}t=Object.create(t);t[o]=f(e.sPath,t);return d(s,t).then(function(t){return e.sPath+"/"+e.sOperator.toLowerCase()+"("+o+":"+t+")"})}return h(e,r.$Type,i)})}f=t[i[0]];return i[0]?i.join("/"):e}function c(e,t){return t?"("+e+")":e}i=p.combineFilters(this.aFilters,this.aApplicationFilters);if(!i){return u.resolve([t])}r=n.splitFilter(i,this.mParameters.$$aggregation);s=this.oModel.getMetaModel();a=s.getMetaContext(this.oModel.resolve(this.sPath,e));return u.all([d(r[0],{},t).then(function(e){return e&&t?e+" and ("+t+")":e||t}),d(r[1],{})])};y.prototype.fetchValue=function(e,t,i){var n=i&&this.oCache!==undefined?u.resolve(this.oCache):this.oCachePromise,r=this;return n.then(function(n){var o,a;if(n){o=i?s.$cached:r.lockGroup();a=r.getRelativePath(e);if(a!==undefined){return n.fetchValue(o,a,undefined,t)}}if(r.oContext){return r.oContext.fetchValue(e,t,i)}})};y.prototype.findContextForCanonicalPath=function(e){var t=Object.values(this.mPreviousContextsByPath).filter(function(e){return e.isKeepAlive()});function i(t){return t.find(function(t){var i;if(t){i=t.fetchCanonicalPath();i.caught();return i.getResult()===e}})}return i(t)||i(this.aContexts)};y.prototype.filter=function(e,t){var i=o.toArray(e);this.checkTransient();if(this.sOperationMode!==v.Server){throw new Error("Operation mode has to be sap.ui.model.odata.OperationMode.Server")}if(t===g.Control?o.deepEqual(i,this.aFilters):o.deepEqual(i,this.aApplicationFilters)){return this}if(this.hasPendingChanges(true)){throw new Error("Cannot filter due to pending changes")}if(t===g.Control){this.aFilters=i}else{this.aApplicationFilters=i}this.oQueryOptionsPromise=undefined;if(this.isRootBindingSuspended()){this.setResumeChangeReason(f.Filter);return this}this.createReadGroupLock(this.getGroupId(),true);this.removeCachesAndMessages("");this.fetchCache(this.oContext);this.reset(f.Filter);if(this.oHeaderContext){this.oHeaderContext.setSelected(false);this.oHeaderContext.checkUpdate()}return this};y.prototype.fireCreateActivate=function(e){if(this.fireEvent("createActivate",{context:e},true)){this.iActiveContexts+=1;return true}return false};y.prototype.getAggregation=function(e){return o.clone(this.mParameters.$$aggregation,function(t,i){return t[0]==="$"&&!(e&&["$DistanceFromRootProperty","$NodeProperty"].includes(t))?undefined:i=function(){var e=[];this.withCache(function(t,i){e=t.getAllElements(i)},"",true);if(this.createContextge({reason:f.Change})}return this.aContexts.filter(function(e){return e}).concat(Object.values(this.mPreviousContextsByPath).filter(function(e){return e.isKeepAlive()}))};y.prototype.getCacheAndMoveKeepAliveContexts=function(e,t){var i,n,r=this;if(!this.mParameters.$$getKeepAliveContext){return undefined}i=this.oModel.releaseKeepAliveBinding("/"+e);if(!i){return undefined}Object.keys(i.mParameters).concat(Object.keys(this.mParameters)).forEach(function(e){if((e[0]!=="$"||e==="$$patchWithoutSideEffects"||e==="$$updateGroupId")&&r.mParameters[e]!==i.mParameters[e]){throw new Error(r+": parameter does not match getKeepAliveContext: "+e)}});this.mLateQueryOptions=o.clone(t);o.aggregateExpandSelect(this.mLateQueryOptions,i.mLateQueryOptions);this.mPreviousContextsByPath=i.mPrt.values(this.mPreviousContextsByPath).forEach(function(e){e.oBinding=r});n=i.oCache;n.setQueryOptions(t);i.oCache=null;i.oCachePromise=u.resolve(null);i.mPreviousContextsByPath={};i.destroy();return n};y.prototype.getContexts=function(t,i,n,r){var s,o,a=false,u=false,d,c,l,p=!!this.sChangeReason,g=this.getResolvedPath(),C,x=this;h.debug(this+"#getContexts("+t+", "+i+", "+n+")",undefined,P);this.checkSuspended();t=t||0;if(t!==0&&this.bUseExtendedChangeDetection){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" iStart must be 0 if extended change detection is enabled, but is "+t)}if(this.bUseExtendedChangeDetection){if(n!==undefined){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" iMaximumPrefetchSize must not be set if extended change detection is"+" enabled")}if(r){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" must not use bKeepCurrent if extended change detection is enabled")}}if(n&&r){throw new Error("Unsupported operation: v4.ODataListBinding#getContexts,"+" must not use both iMaximumPrefetchSize and bKeepCurrent")}if(!this.isResolved()){this.aPreviousData=[];return[]}s=this.sChangeReason||f.Change;this.sChangeReason=undefined;if(s==="AddVirtualContext"){this.oModel.addPrerenderingTask(function(){var e=x.bUseExtendedChangeDetection;if(x.aContexts===undefined){C.destroy();return}if(!x.isRootBindingSuspended()){x.bUseExtendedChangeDetection=false;x.getContexts(t,i,n);x.bUseExtendedChangeDetection=e}x.oModel.addPrerenderingTask(function(){if(x.aContexts&&!x.isRootBindingSuspended()){x.sChangeReason="RemoveVirtualContext";x._fireChange({detailedReason:"RemoveVirtualContext",reason:f.Change});x.reset(f.Refresh)}C.destroy()})},true);C=e.create(this.oModel,this,g+"/"+e.VIRTUAL,e.VIRTUAL);return[C]}if(s==="RemoveVirtualContext"||this.oContext&&this.oContext.iIndex===e.VIRTUAL){return[]}i=i||this.oModel.iSizeLimit;if(!n||n<0){n=0}d=this.oReadGroupLock;this.oReadGroupLock=undefined;if(!thisl=this.fetchContexts(t,i,n,d,p,function(){a=true;x.fireDataRequested(c)});this.resolveRefreshPromise(l).then(function(e){if(x.bUseExtendedChangeDetection){x.oDiff={aDiff:x.getDiff(i),iLength:i}}if(u){if(e||x.oDiff&&x.oDiff.aDiff.length){x._fireChange({reason:s})}else{x.oDiff=undefined}}if(a){x.fireDataReceived({data:{}},c)}},function(e){if(a){x.fireDataReceived(e.canceled?{data:{}}:{error:e},c)}throw e}).catch(function(e){x.oModel.reportError("Failed to get contexts for "+x.oModel.sServiceUrl+g.slice(1)+" with start index "+t+" and length "+i,P,e)});u=true}else if(d){if(d.isLocked()){throw new Error("Unexpected: "+d)}h.error("Unexpected",d,P)}if(!r){this.iCurrentBegin=t;this.iCurrentEnd=t+i}o=this.getContextsInViewOrder(t,i);if(this.bUseExtendedChangeDetection){if(this.oDiff&&i!==this.oDiff.iLength){throw new Error("Extended change detection protocol violation: Expected "+"getContexts(0,"+this.oDiff.iLength+"), but got getContexts(0,"+i+")")}o.dataRequested=!this.oDiff;o.diff=this.oDiff?this.oDiff.aDiff:[]}this.oDiff=undefined;return o};y.prototype.getContextsInViewOrder=function(e,t){var i,n,r;if(this.bFirstCreateAtEnd){i=[];n=Math.min(t,this.getLength()-e);for(r=0;r<n;r+=1){i[r]=this.aContexts[this.getModelIndex(e+r)]}}else{i=this.aContexts.slice(e,e+t)}return i};y.prototype.getCount=function(){var e=this.getHeaderContext();return e?e.getProperty("$count"):undefined};y.prototype.getCurrentContexts=function(){var e,t=Math.min(this.iCurrentEnd,this.iMaxLength+this.iCreatedContexts)-this.iCurrentBegin;e=this.getContextsInViewOrder(this.iCurrentBegin,t);if(t<Infinity){while(e.length<t){e.push(undefined)}}return e};y.prototype.getDependentBindings=function(){var e=this;return this.oModel.getDependentBindings(this).filter(function(t){return t.oContext.isKeepAlive()||!(t.oContext.getPath()in e.mPreviousContextsByPath)})};y.prototype.getDiff=function(e){var t=this.aPre.getContextsInViewOrder(0,e).map(function(e){return i.getContextData(e)});rw Error("Unsupported operation: v4.ODataListBinding#getDistinctValues")};y.prototype.getDownloa.getEntryData=function(e){return o.publicClone(e.getValue(),false,true)};y.prototype.getEntryKey=function(e){return e.getPath()};y.prototype.getFilterInfo=function(e){var t=p.combineFilters(this.aFilters,this.aApplicationFilters),i=null,n;if(t){i=t.getAST(e)}if(this.mQueryOptions.$filter){n={expression:this.mQueryOptions.$filter,syntax:"OData "+this.oModel.getODataVersion(),type:"Custom"};if(i){i={left:i,op:"&&",right:n,type:"Logical"}}else{i=n}}return i};y.prototype.getGeneration=function(){return this.oHeaderContext.getGeneration(tderContext=function(){return this.isResolved()?this.oHeaderContext:null};y.prototype.getModelIndex=function(e){if(!this.bFirstCreateAtEnd){return e}if(!this.bLengthFinal){return this.aContexts.length-e-1}return e<this.getLength()-this.iCreatedContexts?e+this.iCreatedContexts:this.getLength()-e-1};y.prototype.getKeepAliveContext=function(t,i,n){var r=this.mPreviousContextsByPath[t]||this.aContexts.find(function(e){return e&&e.getPath()===t}),s=o.getPredicateIndex(t),a=this.getResolvedPath();this.checkKeepAlive();this.checkSuspended();this.checkTransient();o.checkGroupId(n);if(!r){if(!a){throw new Error("Binding is unresolved: "+this)}if(t.slice(0,s)!==a){throw new Error(this+": Not a valid context path: "+t)}r=e.create(this.oModel,this,t);this.mPreviousContextsByPath[t]=r;this.oCachePromise.then(function(e){var i={};o.setPrivateAnnotation(i,"predicate",t.slice(s));e.addKeptElement(i);if(n){o.setPrivateAnnotation(i,"groupId",n)}});this.oModel.getMetaModel().requestObject(o.getMetaPath(a)+"/").then(function(e){return r.requestProperty(e.$Key.map(function(e){return typeof e==="object"?Object.values(e)[0]:e}))}).catch(this.oModel.getReporter())}r.setKeepAlive(true,r.fnOnBeforeDestroy,i);return r};y.prototype.getKeepAlivePredicates=function(){var e;if(!this.getHeaderContext()){return[]}e=this.getHeaderContext().getPath();return OyPathisKeepAlive()}).map(function(t){return o.getRelativePath(t.getPath(),e)})};y.prototype.getLength=function(){if(this.bLengthFinal){return this.iMaxLength+this.iCreatedContexts}return this.aContexts.length?this.aContexts.length+10:0};y.prototype.getOrderby=function(e){var t=[],i=this;this.aSorters.forEach(function(e){if(e instanceof x){t.push(e.sPath+(e.bDescending?" desc":""))}else{throw new Error("Unsupported sorter: "+e+" - "+i)}});if(e){t.push(e)}return t.join(",")};y.prototype.getQueryOptions=function(e){var t={},i=this;if(e){throw new Error("Unsupported parameter value: bWithSystemQueryOptions: "+e)}Object.keys(this.mQueryOptions).forEach(function(e){if(e[0]!=="$"){t[e]=o.clone(i.mQueryOptions[e])}});return t};y.prototype.getQueryOptionsFromParameters=function(){return this.mQueryOptions};y.prototype.hasPendingChangesForPath=function(e){if(this.oCache===undefined){return this.iActiveContexts>0}return t.prototype.hasPendingChangesForPath.apply(this,arguments)};y.prototype.inheritQueryOptions=function(e,t){var i;if(o.isEmptyObject(this.mParameters)){i=this.getQueryOptionsForPath("",t);if(e.$orderby&&i.$orderby){e.$orderby+=","+i.$orderby}if(e.$filter&&i.$filter){e.$filter="("+e.$filter+") and ("+i.$filter+")"}e=Object.assign({},i,e);o.aggregateExpandSelect(e,i)}return e};y.prototype.initialize=function(){if(this.isResolved()){if(this.getRootBinding().isSuspended()){this.sResumeChangeReason=this.sChangeReason==="AddVirtualContext"?f.Change:f.Refresh}else if(this.sChangeReason==="AddVirtualContext"){this._fireChange({detailedReason:"AddVirtualContext",reason:f.Change})}else{this.sChangeReason=f.Refresh;this._fireRefresh({reason:f.Refresh})}}};y.prototype.isFirstCreateAtEnd=function(){return this.bFirstCreateAtEnd};y.prototype.isKeepAliveBindingFor=function(e){return this.mParameters.$$getKeepAliveContext&&this.getResolvedPath()===e&&(!this.isRootBindingSuspended()||this.aContexts.length||!o.isEmptyObject(this.mPreviousContextsByPath))};y.prototype.isLengthFinal=function(){return this.bLengthFinal};y.prototype.keepOnlyVisibleContexs).filter(function(e){return!e.getPropertrentContexts().filter(function(e){return e&&e.isTransient()===undefined})),t=this;Object.keys(this.mPreviousContextsByPath).forEach(function(i){var n=t.mPreviousContextsByPath[i];if(n.isKeepAlive()){e.push(n)}});this.aContexts.slice(this.iCreatedContexts,this.iCurrentBegin).forEach(function(e,i){delete t.aContexts[t.iCreatedContexts+i];t.destroyLater(e)});if(this.iCurrentEnd>=this.iCreatedContexts){this.aContexts.slice(this.iCurrentEnd).forEach(t.destroyLater.bind(t));if(this.aContexts.length>this.iCurrentEnd){this.aContexts.length=this.iCurrentEnd}}return e};y.prototype.onChange=function(){var e,t=this;if(!this.oRefreshPromise){if(this.isRootBindingSuspended()){this.sResumeAction="onChange"}else{e=this.getDependentBindings();this.reset(f.Refresh);u.all(e.map(function(e){return e.refreshInternal("")})).then(function(){return t.oHeaderContext.checkUpdateInternal()}).catch(this.oModel.getReporter())}}};y.prototype.onKeepAliveChanged=function(e){if(!e.isDeleted()&&e.getPath()in this.mPreviousContextsByPath&&!e.isKeepAlive()){this.destroyPreviousContextsLater([e.getPath()])}};y.prototype.prepareDeepCreate=function(t,i){var n=this;if(!(t&&t.isTransient&&t.isTransient())||this.bDeepCreate){this.bDeepCreate=false;return false}this.bDeepCreate=true;this.mCacheQueryOptions=i;t.withCache(function(e,t){return e.addTransientCollection(t,i&&i.$select)},this.sPath).then(function(t){var i=n.getResolvedPath();n.aContexts=t.map(function(r,s){var a,h=o.getPrivateAnnotation(r,"transientPredicate"),u=o.getPrivateAnnotation(r,"promise");a=e.create(n.oModel,n,i+h,s-t.length,u,false,true);a.created().catch(function(){});o.setPrivateAnnotation(r,"context",a);o.setPrivateAnnotation(r,"firstCreateAtEnd",false);o.deletePrivateAnnotation(r,"promise");return a});n.iCreatedContexts=n.iActiveContexts=n.aContexts.length;n.bFirstCreateAtEnd=false});return true};y.prototype.refreshInternal=function(e,t,i,n){var r=this;function s(i){return i.map(function(i){if(i.bIsBeingDestroyed||i.getContext().isKeepAlive()&&i.hasPendingChanges()){return}return i.refreshInternal(e,t,false,n)})}if(this.isRootBindingSuspended()){if(this.bSharedRequest){this.sResumeAction="resetCache"}else{this.refreshSuspended(t);this.bRefreshKeptElements=true}return u.all(s(r.getDependentBindings()))}this.createReadGroupLock(t,this.isRoot());return this.oCachePromise.then(function(i){var o=r.iActiveContexts,a=r.iCreatedContexts,h=r.aContexts.slice(0,a),d,c,l=r.oRefreshPromise;if(i&&!l){r.removeCachesAndMessages(e);if(r.bSharedRequest){l=r.createRefreshPromise();i.reset([])}else{r.fetchCache(r.oContext,false,true,n?t:undefined);c=r.refreshKeptElements(t);if(r.iCurrentEnd>0){l=r.createRefreshPromise(n).catch(function(e){if(!n||e.canceled){throw e}return r.fetchResourcePath(r.oContext).then(function(t){var n;if(!r.bRelative||i.getResourcePath()===t){if(r.oCache===i){i.restore(true)}else{i.setActive(true);r.oCache=i;r.oCachePromise=u.resolve(i)}r.iActiveContexts=o;r.iCreatedContexts=a;for(n=0;n<a;n+=1){h[n].iIndex=n-a;delete r.mPreviousContextsByPath[h[n].getPaChange})}throw e})}).finally(function(){if(i.restore){i.restore(false)}})}}}d=r.getDependentBindings();r.reset(cat(l,c)).then(function(){return r.oHeaderContext.checkUpdateInternal()})})};y.prototype.refreshKeptElements=function(e){var t=this;return this.oCachePromise.then(function(i){return i.refreshKeptElements(t.lockGroup(e),function e(i,n){if(n===undefined){t.mPreviousContextsByPath[t.getResolvedPath()+i].resetKeepAlive()}else{t.removeCreated(t.aContexts[n])}})}).catch(function(e){t.oModel.reportError("Failed to refresh kept-alive elements",P,e);throw e})};y.prototype.refreshSingle=function(e,t,i,n,r){var s=e.getPath(),a=s.slice(1),h=this;if(e===this.oHeaderContext){throw new Error("Unsupported header context: "+e)}if(i&&r){throw new Error("Unsupported: bAllowRemoval && bWithMessages")}return this.withCache(function(d,c,l){var p=false,g=false,C=e.isKeepAlive(),x=eaderContext.getPath()),m=[];function y(e){if(p){h.fireDataReceived(e)}}function A(){p=true;h.fireDataRequested()}function E(t){var i=e.getModelIndex(),n;if(e.iIndex<0){h.removeCreated(e);g=true}else{if(i===undefined){delete h.mPreviousContextsByPath[s]}else{h.aContexts.splice(i,1);h.iMaxLength-=1;for(n=i;n<h.aContexts.length;n+=1){if(h.aContexts[n]){h.aContexts[n].iIndex-=1}}if(t){h.mPreviousContextsByPath[s]=e}}if(!t){g=true;e.destroy()}}if(i!==undefined){h._fireChange({reason:f.Remove})}}if(x<0){throw new Error("Cannot refresh. Hint: Side-effects refresh in parallel? "+e)}m.push((i?d.refreshSingleWithRemove(t,c,x,v,C,A,E):d.refreshSingle(t,c,x,v,C,r,A)).then(function(){var r=[];y({data:{}});l.assertSameCache(d);if(!g){r.push(e.checkUpdateInternal());if(i){r.push(e.refreshDependentBindings(a,t.getGroupId(),false,n))}}return u.all(r)},function(e){y({error:e});throw e}).catch(function(i){t.unlock(true);h.oModel.reportError("Failed to refresh entity: "+e,P,i);if(!i.canceled){throw i}}));if(!i){m.push(e.refreshDependentBindings(a,t.getGroupId(),false,n))}return u.all(m)})};y.prototype.removeCreated=function(e){var t=e.getModelIndex(),i;this.iCreatedContexts-=1;if(!e.isInactive()){this.iActiveContexts-=1}for(i=0;i<t;i+=1){this.aContexts[i].iIndex+=1}if(!this.iCreatedContexts){this.bFirstCreateAtEnd=undefined}this.aContexts.splice(t,1);if(!e.isKeepAlive()){this.destroyLater(e)}};y.prototype.requestContexts=function(e,t,i){var n=this;if(!this.isResolved()){throw new Error("Unresolved binding: "+this.sPath)}this.checkSuspended();o.checkGroupId(i);e=e||0;t=t||this.oModel.iSizeLimit;return Promise.resolve(this.fetchContexts(e,t,0,this.lockGroup(i,true))).then(function(i){if(i){n._fireChange({reason:f.Change})}return n.getContextsInViewOrder(e,t)},function(i){n.oModel.reportError("Failed to get contexts for "+n.oModel.sServiceUrl+n.getResolvedPath().slice(1)+" with start index "+e+" and length "+t,P,i);throw i})};y.prototype.requestDownloadUrl=o.createRequestMethod("fetchDownloadUrl");y.prototype.requestFilterForMessages=function(e){var t=this.oModel.getMetaModel(),i,n=this.oHeaderContext&&this.oHeaderContext.getPath(),r=this;this.checkTransient();if(!n){return Promise.resolve(null)}i=o.getMetaPath(n);return t.requestObject(i+"/{};r.oModel.getMessagesByPath(n,true).filter(function(t){return!e||e(t)}).forEach(function(e){e.getTargets().forEach(function(e){var t=e.slice(n.length).split("/")[0];if(t&&!t.startsWith("($uid=")){a[t]=true}})});o=Object.keys(a).map(function(e){return y.getFilterForPredicate(e,s,t,i)});if(o.length===0){return null}return o.length===1?o[0]:new c({filters:o})})};y.prototype.requestSideEffects=function(e,t,i){var r=this.oModel,s,a,h=i&&i!==this.oHeaderContext,d=this;function f(e){return e.catch(function(e){r.reportError("Failed to request side effects",P,e);if(!e.canceled){throw e}})}if(this.mParameters.$$aggregation&&!this.mParameters.$$aggregation.hierarchyQualifier){if(h){throw new Error("Must not request side effects for a context of a binding with $$aggregation")}if(n.isAffected(this.mParameters.$$aggregation,this.aFilters.concat(this.aApplicationFilters),t)){return this.refreshInternal("",e,false,true)}return u.resolve()}if(!h&&this.oCache&&this.oCache.isDeletingInOtherGroup(e)){throw new Error("Must not request side effects when there is a pending delete in a"+" different batch group")}if(this.oCache&&this.oCache.getPendingRequestsPromise()){return u.resolve(this.oCache.getPendingRequestsPromise()).then(function(){return d.requestSideEffects(e,t,i)})}if(t.indexOf("")<0){s=o.getPredicates(h?[i]:this.keepOnlyVisibleContexts());if(s){a=this.oCache?[this.oCache.requestSideEffects(this.lockGroup(e),t,s,h,h)]:[];this.visitSideEffects(e,t,h?i:undefined,a);return u.all(a.map(f)).then(function(){return d.refreshDependentListBindingsWithoutCache()})}}if(h){return this.refreshSingle(i,this.lockGroup(e),false,true,true)}if(this.iCurrentEnd===0){return u.resolve()}return this.refreshInternal("",e,false,true)};y.prototype.reset=function(e,t,i){var n,r=0,s=this.iCurrentEnd===0,o=i&&i!==this.getUpdateGroupId(),a,h=this;if(t===true){this.iActiveContexts=0;this.iCreatedContexts=0}if(this.aContexts){this.aContexts.slice(this.iCreatedContexts).forEach(function(e){h.mPreviousContextsByPath[e.getPath()]=e});for(a=0;a<this.iCreatedContexts;a+=1){n=this.aContexts[a];if(t===false?o&&n.isTransient()||n.isInactive()!==undefined:n.isTransient()){this.aContexts[r]=n;r+=1}else{this.iActiveContexts-=1;this.mPreviousContextsByPath[n.getPath()]=n}}for(a=0;a<r;a+=1){this.aContexts[a].iIndex=a-r}this.aContexts.length=this.iCreatedContexts=r}else{this.aContexts=[]}if(!this.iCreatedContexts){this.bFirstCreateAtEnd=undefined}this.iCurrentBegin=this.iCurrentEnd=0;this.iMaxLength=Infinity;this.bLengthFinal=false;if(e&&!(s&&e===f.Change)){this.sChangeReason=e;this._fireRefresh({reason:e})}};y.prototype.resetKeepAlive=function(){var e=this.mPreviousContextsByPath;funcAlive()){e.resetKeepAlive()}}Object.keys(e).forEach(function(i){t(e[i])});this.aContexts.forEach(t)};y.prototype.restoreCreated=function(){var e=this;this.withCache(function(t,i){if(e.aContexts.length){return}t.getCreatedElements(i).forEach(function(t,i){e.aContexts[i]=o.getPrivateAnnotation(t,"context");e.bFirstCreateAtEnd=o.getPrivateAnnotation(t,"firstCreateAtEnd");e.iCreatedContexts+=1;if(!t["@$ui5.context.isInactive"]){e.iActiveContexts+=1}})}).catch(this.oModel.getReporter())};y.prototype.resumeInternal=function(e,t){var i=this.sResumeAction,n=this.sResumeChangeReason,r=t||i||n,s=this;this.sResumeAction=undefined;this.sResumeChangeReason=undefined;if(r){this.removeCachesAndMessages("");if(i==="onChange"){this.onChange();return}if(i==="resetCache"){this.oCache.reset([]);return}this.reset();this.fetchCache(this.oContext,!t);if(this.bRefreshKeptElements){this.bRefreshKeptElements=false;s.refreshKeptElements(s.getGroupId())}}this.getDependentBindings().forEach(function(e){e.resumeInternal(!r,!!n&&!e.oContext.isKeepAlive())});if(this.sChangeReason==="AddVirtualContext"){this._fireChange({detailedReason:"AddVirtualContext",reason:n})}else if(n){this._fireRefresh({reason:n})}else{this.removeReadGroupLock()}this.oHgation=function(e){var t;function i(e){return e&&!!e.hierarchyQualifier}this.checkTransient();if(this.hasPendingChanges()){throw new Error("Cannot set $$aggregation due to pending changes")}if(i(this.mParameters.$$aggregation)!==i(e)&&this.getKeepAlivePredicates().length){throw new Error("Cannot set $$aggregation due to a kept-alive context")}t=Object.assign({},this.mParameters);if(e===undefined){delete t.$$aggregation}else{t.$$aggregation=o.clone(e)}this.applyParameters(t,"")};y.prototype.setContext=function(t){var i;if(this.oContext!==t){if(this.bRelative){this.checkSuspended(true);this.reset(undefined,true);this.resetKeepAlive();this.fetchCache(t);if(t){this.restoreCreated();i=this.oModel.resolve(this.sPath,t);if(this.oHeaderContext&&this.oHeaderContext.getPath()!==i){this.mPreviousContextsByPath[this.oHeaderContext.getPath()]=this.oHeaderContext;this.oHeaderContext=null}if(!this.oHeaderContext){this.oHeaderContext=e.create(this.oModel,this,i)}if(this.mParameters.$$aggregation){n.setPath(this.mParameters.$$aggregation,i)}else if(this.bHasPathReductionToParent&&this.oModel.bAutoExpandSelect){this.mCanUseCachePromiseByChildPath={};this.sChangeReason="AddVirtualContext"}if(t.getBinding&&t.getBinding().getRootBinding().isSuspended()){this.oContext=t;this.setResumeChangeReason(f.Context);return}}d.prototype.setContext.call(this,t,{detailedReason:this.sChangeReason})}else{this.oContext=t}}};y.prototype.sort=function(e){var t=o.toArray(e);this.checkTransient();if(this.sOperationMode!==v.Server){throw new Error("Operation mode has to be sap.ui.model.odata.OperationMode.Server")}if(o.deepEqual(t,this.aSorters)){return this}if(this.hasPendingChanges(true)){throw new Error("Cannot sort due to pending changes")}this.aSorters=t;this.oQueryOptionsPromise=undefined;if(this.isRootBindingSuspended()){this.setResumeChangeReason(f.Sort);return this}this.createReadGroupLock(this.getGroupId(),true);this.removeCachesAndMessages("");this.fetchCache(this.oContext);this.reset(f.Sort);if(this.oHeaderContext){this.oHeaderContext.checkUpdate()}return this};y.prototype.updateAfterCreate=function(e,i){var n,r,a=this;if(this.iCreatedContexts){if(e){this.reset(f.Change,true)}else{this.reset(undefined,true);r=this.fetchContexts(0,Infinity,0,s.$cached).then(function(){a.iCurrentEnd=a.aContexts.length;return a.requestSideEffects(i,o.getMissingPropertyPaths(a.fetchValue("",null,true).getResult(),a.mAggregatedQueryOptions))}).then(function(){a._fireChange({reason:f.Change})})}n=u.all([r,t.prototype.updateAfterCreate.apply(this,arguments)])}else{n=this.refreshInternal("",i)}return n};y.prototype.updateAnalyticalInfo=function(e){var t={aggregate:{},group:{},search:this.mParameters.$$aggregation&&this.mParameters.$$aggregation.search},i=false,n=this;e.forEach(function(e){var n={};if("total"in e){if("grouped"in e){throw new Error("Both dimension and measure: "+e.name)}if(e.as){n.name=e.name;t.aggregate[e.as]=n}else{t.aggregate[e.name]=n}if(e.min){n.min=true;i=true}if(e.max){n.max=true;i=true}if(e.with){n.with=e.with}}else if(!("grouped"in e)||e.inResult||e.visible){t.group[e.name]=n}});this.bHasAnalyticalInfo=true;this.setAggregation(t);if(i){return{measureRangePromise:Promise.resolve(this.getRootBindingResumePromise().then(function(){return n.oCachePromise}).then(function(e){return e.getMeasureRangePromise()}))}}};y.getFilterForPredicate=function(e,t,i,n){var r,s=a.parseKeyPredicate(e);if(""in s){s[t.$Key[0]]=s[""];delete s[""]}r=t.$Key.map(function(e){var t,r;if(typeof e==="string"){r=t=e}else{t=Object.keys(e)[0];r=e[t]}return new c(r,l.EQ,o.parseLiteral(decodeURIComponent(s[t]),i.getObject(n+"/"+r+"/$Type"),r))});return r.length===1?r[0]:new c({and:true,filters:r})};return y});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataMetaModel",["./AnnotationHelper","./ValueListType","./lib/_Helper","sap/base/assert","sap/base/Log","sap/base/util/JSTokenizer","sap/base/util/ObjectPath","sap/ui/base/ManagedObject","sap/ui/base/SyncPromise","sap/ui/model/BindingMode","sap/ui/model/ChangeReason","sap/ui/model/ClientListBinding","sap/ui/model/Context","sap/ui/model/ContextBinding","sap/ui/model/MetaModel","sap/ui/model/PropertyBinding","sap/ui/model/odata/OperationMode","sap/ui/model/odata/type/Boolean","sap/ui/model/odata/type/Byte","sap/ui/model/odata/type/Date","sap/ui/model/odata/type/DateTimeOffset","sap/ui/model/odata/type/Decimal","sap/ui/model/odata/type/Double","sap/ui/model/odata/type/Guid","sap/ui/model/odata/type/Int16","sap/ui/model/odata/type/Int32","sap/ui/model/odata/type/Int64","sap/ui/model/odata/type/Raw","sap/ui/model/odata/type/SByte","sap/ui/model/odata/type/Single","sap/ui/model/odata/type/Stream","sap/ui/model/odata/type/String","sap/ui/model/odata/type/TimeOfDay","sap/ui/thirdparty/URI"],function(e,t,n,i,r,o,a,s,u,f,l,c,d,p,h,g,y,m,v,$,b,C,O,M,P,E,w,x,U,T,S,A,j,L){"use strict";var R=s.extend("sap.ui.model.odata.v4._any",{metadata:{properties:{any:"any"}}}),D,I=new Map,V=r.Level.DEBUG,q=/\$\(/g,N=/^-?\d+$/,k="sap.ui.model.odata.v4.ODataMetaModel",B=/\(.*\)$/,W=new x,F=/\$\)/g,_=new Map,G={messageChange:true},K={"Edm.Boolean":{Type:m},"Edm.Byte":{Type:v},"Edm.Date":{Type:$},"Edm.DateTimeOffset":{constraints:{$Precision:"precision"},Type:b},"Edm.Decimal":{constraints:{"@Org.OData.Validation.V1.Minimum/$Decimal":"minimum","@Org.OData.Validation.V1.Minimum@Org.OData.Validation.V1.Exclusive":"minimumExclusive","@Org.OData.Validation.V1.Maximum/$Decimal":"maximum","@Org.OData.Validation.V1.Maximum@Org.OData.Validation.V1.Exclusive":"maximumExclusive",$Precision:"precision",$Scale:"scale"},Type:C},"Edm.Double":{Type:O},"Edm.Guid":{Type:M},"Edm.Int16":{Type:P},"Edm.Int32":{Type:E},"Edm.Int64":{Type:w},"Edm.SByte":{Type:U},"Edm.Single":{Type:T},"Edm.Stream":{Type:S},"Edm.String":{constraints:{"@com.sap.vocabularies.Common.v1.IsDigitSequence":"isDigitSequence",$MaxLength:"maxLength"},Type:A},"Edm.TimeOfDay":{constraints:{$Precision:"precision"},Type:j}},z={},H="@com.sap.vocabularies.Common.v1.ValueList",Q="@com.sap.vocabularies.Common.v1.ValueListMapping",J="@com.sap.vocabularies.Common.v1.ValueListReferences",X="@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers",Y="@com.sap.vocabularies.Common.v1.ValueListWithFixedValues",Z=r.Level.WARNING,ee,te=h.extend("sap.ui.model.odata.v4.ODataMetaModel",{constructor:de}),ne,ie;function re(e,t,n,i){var r,o=e.mSchema2MetadataUrl[t];if(!o){o=e.mSchema2MetadataUrl[t]={};o[n]=false}else if(!(n in o)){r=Object.keys(o)[0];if(o[r]){le(e,"A schema cannot span more than one document: "+t+" - expected reference URI "+r+" but instead saw "+n,i)}o[n]=false}}function oe(e,t,n,i){var r,o,a,s;function f(e){var r,a;if(!(n in e)){i(Z,o," does not contain ",n);return}i(V,"Including ",n," from ",o);for(a in e){if(a[0]!=="$"&&ce(a)===n){r=e[a];t[a]=r;fe(r,t.$Annotations)}}}if(n in t){return t[n]}s=e.mSchema2MetadataUrl[n];if(s){a=Object.keys(s);if(a.length>1){le(e,"A schema cannot span more than one document: "+"schema is referenced by following URLs: "+a.join(", "),n)}o=a[0];s[o]=true;i(V,"Namespace ",n," found in $Include of ",o);r=e.mMetadataUrl2Promise[o];if(!r){i(V,"Reading ",o);r=e.mMetadataUrl2Promise[o]=u.resolve(e.oRequestor.read(o)).then(e.validate.bind(e,o))}r=r.then(f);if(n in t){return t[n]}t[n]=r;return r}}function ae(e,t){if(e===t){return""}if(e.startsWith(t)&&e[t.length]==="#"&&!e.includes("@",t.length)){return e.slice(t.length+1)}}function se(e){var t=ae(e,Q);return t!==undefined?t:ae(e,H)}function ue(e,t){return t.some(function(t){return e==="$ReturnType"?t.$ReturnType:t.$Parameter&&t.$Parameter.some(function(t){return t.$Name===e})})}function fe(e,t,n){var i;function r(e,t){var i;for(i in t){if(n||!(i in e)){e[i]=t[i]}}}for(i in e.$Annotations){if(!(i in t)){t[i]={}}r(t[i],e.$Annotations[i])}delete e.$Annotations}functionor(t,k,i);throw i}function ce(e){return e.slice(0,e.lastIndexOf(".")+1)}ee=p.extend("sap.ui.model.odata.v4.ODataMetaContextBinding",{constructor:function(e,t,n){i(!n||n.getModel()===e,"oContext must belong to this model");p.call(this,e,t,n)},initialize:function(){var e=this.oModel.createBindingContext(this.sPath,this.oContext);this.bInitial=false;if(e!==this.oElementContext){this.oElementContext=e;this._fireChange()}},setContext:function(e){i(!e||e.getModel()===this.oModel,"oContext must belong to this model");if(e!==this.oContext){this.oContext=e;if(!this.bInitial){this.initialize()}}}4.ODataMetaListBinding",{constructor:function(){c.apply(this,arguments)},_fireFilter:function(){},_fireSort:function(){},checkUpdate:function(e){var t=this.oList.length;this.update();if(e||this.oList.length!==t){this._fireChange({reason:l.Change})}},fetchContexts:function(){var e,t=this.getResolvedPath(),n=this;if(!t){return u.resolve([])}e=t.endsWith("@");if(!e&&!t.endsWith("/")){t+="/"}return this.oModel.fetchObject(t).then(function(i){if(!i){return[]}if(e){t=t.slice(0,-1)}return Object.keys(i).filter(function(t){return t[0]!=="$"&&e!==(t[0]!=="@")}).map(function(e){return new d(n.oModel,t+e)})})},getContexts:function(e,t){this.iCurrentStart=e||0;this.iCurrentLength=Math.min(t||Infinity,this.iLength-this.iCurrentStart);return this.getCurrentContexts()},getCurrentContexts:function(){var e=[],t,n=this.iCurrentStart+this.iCurrentLength;for(t=this.iCurrentStart;t<n;t+=1){e.push(this.oList[this.aIndices[t]])}if(this.oList.dataRequested){e.dataRequested=true}return e},setContexts:function(e){this.oList=e;this.updateIndices();this.applyFilter();this.applySort();this.iLength=this._getLength()},update:function(){var e=[],t=this.fetchContexts(),n=this;if(t.isFulfilled()){e=t.getResult()}else{t.then(function(e){n.setContexts(e);n._fireChange({reason:l.Change})});e.dataRequested=true}this.setContexts(e)}});ie=g.extend("sap.ui.model.odata.v4.ODataMetaPropertyBinding",{constructor:function(){g.apply(this,arguments);this.vValue=undefined},checkUpdate:function(e,t){var n,i=this;function r(n){if(e||n!==i.vValue){i.vValue=n;i._fireChange({reason:t||l.Change})}return n}n=this.oModel.fetchObject(this.sPath,this.oContext,this.mParameters).then(r);if(this.mParameters&&this.mParameters.$$valueAsPromise&&n.isPending()){r(n.unwrap())}else if(n.isRejected()){n.unwrap()}},getValue:function(){return this.vValue},setContext:function(e){if(this.oContext!==e){this.oContext=e;if(this.bRelative){this.checkUpdate(false,l.Context)}}},setValue:function(){throw new Error("Unsupported operation: ODataMetaPropertyBinding#setValue")}});function de(e,t,n,i,r,o){h.call(this);this.aAnnotationUris=n&&!Array.isArray(n)?[n]:n;this.sDefaultBindingMode=f.OneTime;this.mETags={};this.sLanguage=o;this.oLastModified=new Date(0);this.oMetadataPromise=null;this.oModel=i;this.mMetadataUrl2Promise={};this.oRequestor=e;this.mSchema2MetadataUrl={};this.mSupportedBindingModes={OneTime:true,OneWay:true};this.bSupportReferences=r!==false;this.mUnsupportedFilterOperators={All:true,Any:true};this.sUrl=t}te.prototype.$$valueAsPromise=true;te.prototype._mergeAnnotations=function(e,t){var n=this;this.validate(this.sUrl,e);e.$Annotations={};Object.keys(e).forEach(function(t){if(e[t].$kind==="Schema"){re(n,t,n.sUrl);fe(e[t],e.$Annotations)}});t.forEach(function(t,i){var r,o;n.validate(n.aAnnotationUris[i],t);for(o in t){if(o[0]!=="$"){if(o in e){le(n,"A schema cannot span more than one document: "+o,n.aAnnotationUris[i])}r=t[o];e[o]=r;if(r.$kind==="Schema"){re(n,o,n.aAnnotationUris[i]);fe(r,e.$Annotations,true)}}}})};te.prototype.attachEvent=function(e,t,n,i){if(!(e in G)){throw new Error("Unsupported event '"+e+"': v4.ODataMetaModel#attachEvent")}returnuments)};te.prototype.bindContext=function(e,t){return new ee(this,e,t)};te.prototype.bindList=function(e,t,n,i){return new ne(this,e,t,n,i)};te.prototype.bindProperty=function(e,t,n){return new ie(this,e,t,n)};te.prototype.bindTree=function(e,t,n,i,r){throw new Error("Unsupported operation: v4.ODataMetaModel#bindTree")};te.prototype.fetchCanonicalPath=function(e){return this.fetchUpdateData("",e).then(function(t){if(!t.editUrl){throw new Error(e.getPath()+": No canonical path for transient entity")}if(t.propertyPath){throw new Error("Context "+e.getPath()+" does not point to an entity. It should be "+t.entityPath)}return"/"+t.editUrl})};tEntityContainer().then(function(e){return JSON.parse(JSON.stringify(e))})};te.prototype.fetchEntityContainer=function(e){var t,n=this;if(!this.oMetadataPromise){t=[u.resolve(this.oRequestor.read(this.sUrl,false,e))];if(this.aAnnotationUris){this.aAnnotationUris.forEach(function(i){t.push(u.resolve(n.oRequestor.read(i,true,e)))})}if(!e){this.oMetadataPromise=u.all(t).then(function(e){var t=e[0];n._mergeAnnotations(t,e.slice(1));return t})}}return this.oMetadataPromise};te.prototype.fetchObject=function(e,t,n){var i=this.resolve(e,t),s=this;if(!i){r.error("Invalid relative path w/o context",e,k);return u.resolve(null)}return this.fetchEntityContainer().then(function(f){var l,c,p,h,g,y,m,v,$,b;function C(e,t,n){var i,r,o,a,s="";if(t){r=t.indexOf("@@");if(r>0){t=t.slice(0,r)}}else{t=e}n=n||"";if(l){m=a=b.filter(P);if(a.length!==1){return E(Z,"Expected a single overload, but found "+a.length)}if(l!==z){s=a[0].$Parameter[0].$isCollection?"Collection("+l+")":l}o=$+"("+s+")"+n;if(f.$Annotations[o]){if(t==="@"){b=f.$Annotations[o];i=f.$Annotations[$+n];if(i){b=Object.assign({},i,b)}return false}if(t in f.$Annotations[o]){$=o;b=f;return true}}}$+=n;b=f;return true}function O(e,t){var i,r,u,f=e.indexOf("@",2);if(f>-1){return E(Z,"Unsupported path after ",e.slice(0,f))}e=e.slice(2);u=e.indexOf("(");if(u>0){if(!e.endsWith(")")){return E(Z,"Expected ')' instead of '",e.slice(-1),"'")}try{r=o.parseJS("["+e.slice(u+1,-1).replace(q,"{").replace(F,"}")+"]")}catch(e){return E(Z,e.message,": ",e.text.slice(1,e.at),"<--",e.text.slice(e.at,-1))}e=e.slice(0,u)}i=e[0]==="."?a.get(e.slice(1),n.scope):n&&a.get(e,n.scope)||(e==="requestCurrencyCodes"||e==="requestUnitsOfMeasure"?s[e].bind(s):a.get(e));if(typeof i!=="function"){return E(Z,e," is not a function but: "+i)}try{b=i(b,{$$valueAsPromise:n&&n.$$valueAsPromise,arguments:r,context:new d(s,t),schemaChildName:v,overload:m.length===1?m[0]:undefined})}catch(t){E(Z,"Error calling ",e,": ",t)}return true}function M(e,t){var n;if(e==="$ReturnType"){if(t.$ReturnType){b=t.$ReturnType;return true}}else if(e&&t.$Parameter){n=t.$Parameter.filter(function(t){return t.$Name===e});if(n.length){b=n[0];return true}}return false}function P(e){return!e.$IsBound&&l===z||e.$IsBound&&l===e.$Parameter[0].$Type}function E(e){var t;if(r.isLoggable(e,k)){t=Array.isArray(h)?h.join("/"):h;r[e===V?"debug":"warning"](Array.prototype.slice.call(arguments,1).join("")+(t?" at /"+t:""),i,k)}if(e===Z){b=undefined}return false}function w(e,t){var n;function i(){h=h||$&&t&&$+"/"+t;return E.apply(this,arguments)}l=b&&b.$Type||l;if(s.bSupportReferences&&!(e in f)){n=ce(e);b=oe(s,f,n,i)}if(e in f){$=g=v=e;b=m=f[v];if(!u.isThenable(b)){return true}}if(u.isThenable(b)&&b.isPending()){return i(V,"Waiting for ",n)}return i(Z,"Unknown qualified name ",e)}function x(e,t,n){var i,r,o;if(e==="$Annotations"){return E(Z,"Invalid segment: $Annotations")}e=e.replaceAll("%2F","/");if(t&&typeof b==="object"&&e in b){if(e[0]==="$"||N.test(e)){y=false}}else{i=e.indexOf("@@");if(i<0){if(e.endsWith("@sapui.name")){i=e.length-11}else{i=e.indexOf("@")}}if(i>0){if(!x(e.slice(0,i),t,n)){return false}e=e.slice(i);o=true;if(b&&(b.$kind==="EntitySet"||b.$kind==="Singleton")){c=b}}if(typeof b==="string"&&!(o&&(e==="@sapui.name"||e[1]==="@"))&&!(y&&m&&m.$kind==="EnumType")&&!U(b,n.slice(0,t))){return false}if(y){if(e[0]==="$"&&e!=="$Parameter"&&e!=="$ReturnType"||N.test(e)){y=false}else{r=typeof b==="object";if(o){}else if(e[0]!=="@"&&e.includes(".",1)){return w(e)}else if(r&&"$Type"in b){if(!w(b.$Type,"$Type")){return false}}else if(r&&"$Action"in b){if(!w(b.$Action,"$Action")){return false}l=z}else if(r&&"$Function"in b){if(!w(b.$Function,"$Function")){return false}l=z}else if(!t){$=g=v=v||f.$EntityContainer;b=m=m||f[v];if(Array.isArray(b)){if(l){b=b.filter(P)}if(M(e,b[0])){return true}}if(e&&e[0]!=="@"&&!(e in m)){return E(Z,"Unknown child ",e," of ",v)}}if(Array.isArray(b)){if(e==="$Parameter"){return true}if(e.startsWith("@$ui5.overload@")){e=e.slice(14);o=true}if(o){if(e[1]!=="@"&&!C(e)){return false}}else{if(e!==n[t]&&n[t][e.length+1]!=="@"&&ue(e,b)){g=e;return C(e,n[t].slice(e.length),"/"+g)}if(l){b=b.filter(P)}if(e==="@$ui5.overload"){return true}if(b.length!==1){return E(Z,"Expected a single overload, but found "+b.length)}if(M(e,b[0])){return true}b=b[0].$ReturnType;$+="/0/$ReturnType";if(b){if(e==="value"&&!(f[b.$Type]&&f[b.$Type].value)){g=undefined;return true}if(!w(b.$Type,"$Type")){return false}}if(!e){return true}}}}}if(!e){return t+1>=n.length||E(Z,"Invalid empty segment")}if(e[0]==="@"){if(e==="@sapui.name"){b=g;if(b===undefined){E(Z,"Unsupported path before @sapui.name")}else if(t+1<n.length){E(Z,"Unsupported path after @sapui.name")}return false}if(e[1]==="@"){if(t+1<n.length){return E(Z,"Unsupported path after ",e)}return O(e,[""].concat(n.slice(0,t),n[t].slice(0,i)).join("/"))}}if(y&&e[0]==="@"){l=b&&b.$Type||l;b=f.$Annotations[$]||{};y=false}else if(e==="$"&&t+1<n.length){return E(Z,"Unsupported path after $")}else if(!b||typeof b!=="object"){b=undefined;return!p&&E(V,"Invalid segment: ",e)}}if(e!=="@"&&e!=="$"){if(e[0]==="@"){p=true}g=y||e[0]==="@"?e:undefined;$=y?$+"/"+e:undefined;b=b[e]}return true}function U(e,t){var n;if(h){return E(Z,"Invalid recursion")}h=t;p=false;y=true;b=f;if(c){if(!e){b=c;c=h=undefined;return true}v=c.$Type;c=m=undefined}n=e.split("/").every(x);h=undefined;return n}if(!U(i.slice(1))&&u.isThenable(b)){b=b.then(function(){return s.fetchObject(e,t,n)})}return b})};te.prototype.fetchUI5Type=function(e,t){var i=this.getMetaContext(e),o=this;if(e.endsWith("/$count")){D=D||new w;return u.resolve(D)}return this.fetchObject(undefined,i).catch(this.oModel.getReporter()).then(function(a){var s=W,u;if(!a){r.warning("No metadata for path '"+e+"', using "+s.getName(),undefined,k);return s}if(t){if(n.isEmptyObject(t)){t=undefined}else if("parseKeepsEmptyString"in t&&a.$Type!=="Edm.String"){if(Object.keys(t).length===1){t=undefined}else{t=Object.assign({},t);delete t.parseKeepsEmptyString}}}if(!t&&a["$ui5.type"]){return a["$ui5.type"]}if(a.$isCollection){r.warning("Unsupported collection type, using "+s.getName(),e,k)}else{u=K[a.$Type];if(u){s=new u.Type(t,o.getConstraints(a,i.getPath()))}else{r.warning("Unsupported type '"+a.$Type+"', using "+s.getName(),e,k)}}if(!t){a["$ui5.type"]=s}return s})};te.prototype.fetchUpdateData=function(e,t,i){var r=t.getModel(),o=r.resolve(e,t),a=this;function s(e){var t=new Error(o+": "+e);r.reportError(e,k,t);throw t}return this.fetchObject(n.getMetaPath(o)).then(function(){return a.fetchEntityContainer()}se,g,y,m,v;function $(e){var t=e.indexOf("(");return t>=0?e.slice(t):""}function b(e){a.push({path:g,prefix:e,type:v})}function C(e){var t=e.indexOf("(");return t>=0?e.slice(0,t):e}function O(e){if(e.includes("($uid=")){b(C(e))}else{a.push(e)}}m=o.slice(1).split("/");p=m.shift();g="/"+p;l=g;d=decodeURIComponent(C(p));c=f[d];if(!c){s("Not an entity set: "+d)}v=r[c.$Type];e="";y="";a=[];O(p);m.forEach(function(t){var i,o;g+="/"+t;if(N.test(t)){b(a.pop());l+="/"+t}else{o=decodeURIComponent(C(t));y=n.buildPath(y,o);i=h?{}:v[o];if(!i){if(o.includes("@")){if(o.includes("@$ui5.")){s("Read-only path must not be updated")}h=true;i={}}else{s("Not a (navigation) property: "+o)}}v=r[i.$Type];if(i.$kind==="NavigationProperty"){if(c.$NavigationPropertyBinding&&y in c.$NavigationPropertyBinding){d=c.$NavigationPropertyBinding[y];c=f[d];y="";a=[encodeURIComponent(d)+$(t)];if(!i.$isCollection){b(a.pop())}}else{O(t)}l=g;e=""}else{e=n.buildPath(e,t)}}});if(i){return u.resolve({editUrl:undefined,entityPath:l,propertyPath:e})}return u.all(a.map(function(e){if(typeof e==="string"){return e}return t.fetchValue(e.path).then(function(t){var r;if(!t){s("No instance to calculate key predicate at "+e.path)}if(t["@$ui5.context.isTransient"]){i=true;return undefined}r=n.getPrivateAnnotation(t,"pred at "+e.path)}return e.prefix+r},function(t){s(t.message+" at "+e.path)})})).then(function(t){return{editUrl:i?undefined:t.join("/"),entityPath:l,propertyPath:e}})})};te.prototype.fetchValueListMappings=function(e,t,i,r){var o=this,a=e.getMetaModel();function s(){var e=r[0],n="";if(r.length!==1){throw new Error("Expected a single overload, but found "+r.length)}if(e.$IsBound){n=e.$Parameter[0].$isCollection?"Collection("+e.$Parameter[0].$Type+")":e.$Parameter[0].$Type}return t+"("+n+")"}return a.fetchEntityContainer().then(function(r){var u,f=r.$Annotations,l,c=n.namespace(t),d={},p=o===a,h,g;if(i.$Name){l=s()+"/"+i.$Name;g=t+"/"+i.$Name}h=Object.keys(f).filter(function(t){if(n.namespace(t)===c){if(l?t===l||t===g:o.getObject("/"+t)===i){return true}if(p||g&&n.getMetaPath(t)===g){return false}throw new Error("Unexpected annotation target '"+t+"' with namespace of data service in "+e.sServiceUrl)}return false});if(!h.length){throw new Error("No annotation '"+H.slice(1)+"' in "+e.sServiceUrl)}if(h.length===1){u=f[h[0]]}else{u=Object.assign({},f[g],f[l])}Object.keys(u).forEach(function(t){var n=se(t);if(n!==undefined){d[n]=u[t];["CollectionRoot","SearchSupported"].forEach(function(n){if(n in u[t]){throw new Error("Property '"+n+"' is not allowed in annotation '"+t.slice(1)+"' for target '"+h[0]+"' in "+e.sServiceUrl)}})}else if(!p){throw new Error("Unexpected annotation '"+t.slice(1)+"' for target '"+h[0]+"' with namespace of data service in "+e.sServiceUrl)}});return d})};te.prototype.fetchValueListType=function(e){var n=this.getMetaContext(e),i=this;return this.fetchObject(undefined,n).then(function(r){var o,a;if(!r){throw new Error("No metadata for "+e)}o=i.getObject("@",n);if(o[Y]){return t.Fixed}for(a in o){if(ae(a,J)!==undefined||ae(a,Q)!==undefined){return t.Standard}if(ae(a,H)!==undefined){return o[a].SearchSupported===false?t.Fixed:t.Standard}}return t.None})};te.prototype.getAbsoluteServiceUrl=function(e){var t=new L(this.sUrl).absoluteTo(document.baseURI).pathname().toString();return new L(e).absoluteTo(t).filename("").toString()};te.prototype.getAllPathReductions=function(e,t,i,r){var o=t.split("/").length,a,s={},u=e.split("/"),f=this;function l(e,t,a,u){var c,d,p;function h(n){if(!i){l(e,t,p-1,true)}if(u){t=t.slice();e=e.slice()}t.splice(p,n);e.splice(p,n);if(!i){s[e.join("/")]=true}}for(p=a;p>=o;p-=1){c=N.test(e[p+1])?p+2:p+1;if(c<e.length&&t[p].$Partner===e[c]&&!t[c].$isCollection&&t[c].$Partner===e[p].replace(B,"")){h(c-p+1)}else if(Array.isArray(t[p])&&e[p+1]==="$Parameter"){d=f.getObject(n.getMetaPath(e.slice(0,p+1).join("/")+"/@$ui5.overload"));if(d.length===1&&d[0].$Parameter[0].$Name===e[p+2]){h(3)}}else if(r&&t[p].$isCollection){break}}}a=u.map(function(e,t){return t<o||e[0]==="#"||e[0]==="@"||N.test(e)||e==="$Parameter"?{}:f.getObject(n.getMetaPath(u.slice(0,t+1).join("/")))||{}});s[e]=true;if(!(r&&a[u.length-1].$isCollection)){l(u,a,u.length-2)}return i?u.join("/"):Object.keys(s)};te.prototype.getConstraints=function(e,t){var n,i,r,o=K[e.$Type];function a(e,t){if(t!==undefined){i=i||{};i[e]=t}}if(o){r=o.constraints;for(n in r){a(r[n],n[0]==="@"?this.getObject(t+n):e[n])}if(e.$Nullable===false){a("nullable",false)}if(e.$Type==="Edm.DateTimeOffset"){a("V4",true)}}return i};te.prototype.getData=n.createGetMethod("fetchData");te.prototype.getETags=function(){return this.mETags};te.prototype.getLastMorototype.getMetaContext=function(e){return new d(this,n.getMetaPath(e))};te.prototype.getMetaPath=function(e){return n.getMetaPath(e)};te.prototype.getObject=n.createGetMethod("fetchObject");te.prototype.getOrCreateSharedModel=function(e,t,n){var i,r;e=this.getAbsoluteServiceUrl(e);i=!!n+e;r=_.get(i);if(!r){r=new this.oModel.constructor({autoExpandSelect:n,groupId:t,httpHeaders:this.oModel.getHttpHeaders(),metadataUrlParams:this.sLanguage&&{"sap-language":this.sLanguage},operationMode:y.Server,serviceUrl:e,sharedRequests:true});_.set(i,r)}return r};te.prototype.getOriginalProperty=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#getOriginalProperty")};te.ducedPath=function(e,t){return this.getAllPathReductions(e,t,true,true)};te.prototype.getUI5Type=n.createGetMethod("fetchUI5Type",true);te.prototype.getUnitOrCurrencyPath=function(e){var t=this.getObject("@",this.getMetaContext(e)),n=t&&(t["@Org.OData.Measures.V1.Unit"]||t["@Org.OData.Measures.V1.ISOCurrency"]);return n&&n.$Path};te.prototype.getValueListType=n.createGetMethod("fetchValueListType",true);te.prototype.isList=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#isList")};te.prototype.refresh=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#refresh")};te.prototype.requestCodeList=function(e,t,i){var o=this.fetchEntityContainer().getResult(),a=o[o.$EntityContainer],s=this;if(i&&i.context){if(i.context.getModel()!==this||i.context.getPath()!=="/"){throw new Error("Unsupported context: "+i.context)}}if(t!==undefined&&t!==a){throw new Error("Unsupported raw value: "+t)}return this.requestObject("/@com.sap.vocabularies.CodeList.v1."+e).then(function(e){var t,i,o,a,u,f;if(!e){return null}f=n.setLanguage(e.Url,s.sLanguage);t=s.getAbsoluteServiceUrl(f)+"#"+e.CollectionPath;a=I.get(t);if(a){return a}o=s.getOrCreateSharedModel(f,"$direct");i=o.getMetaModel();u="/"+e.CollectionPath+"/";a=i.requestObject(u).then(function(t){var n=u+"@Org.OData.Core.V1.AlternateKeys",a=i.getObject(n),s,f=m(t.$Key),l=u+f+"@com.sap.vocabularies.Common.v1.",c,d,p=u+f+"@com.sap.vocabularies.CodeList.v1.StandardCode/$Path",h,g;function y(t,n){var i=n.getProperty(f),o={Text:n.getProperty(g),UnitSpecificScale:n.getProperty(d)};if(h){o.StandardCode=n.getProperty(h)}if(o.UnitSpecificScale===null){r.error("Ignoring customizing w/o unit-specific scale for code "+i+" from "+e.CollectionPath,e.Url,k)}else{t[i]=o}return t}function m(e){var t;if(e&&e.length===1){t=e[0]}else{throw new Error("Single key expected: "+u)}return typeof t==="string"?t:t[Object.keys(t)[0]]}if(a){if(a.length!==1){throw new Error("Single alternative expected: "+n)}else if(a[0].Key.length!==1){throw new Error("Single key expected: "+n+"/0/Key")}f=a[0].Key[0].Name.$PropertyPath}d=i.getObject(l+"UnitSpecificScale/$Path");g=i.getObject(l+"Text/$Path");c=[f,d,g];h=i.getObject(p);if(h){c.push(h)}s=o.bindList("/"+e.CollectionPath,null,null,null,{$select:c});return s.requestContexts(0,Infinity).then(function(t){if(!t.length){r.error("Customizing empty for ",o.sServiceUrl+e.CollectionPath,k)}return t.reduce(y,{})}).finally(function(){s.destroy()})});I.set(t,a);return a})};te.prototype.requestCurrencyCodes=function(e,t){return this.requestCodeList("CurrencyCodes",e,t)};te.prototype.requestData=n.createRequestMethod("fetchData");te.prototype.requestObject=n.createRequestMethod("fetchObject");te.prototype.requestUI5Type=n.createRequestMethod("fetchUI5Type");te.prototype.requestUnitsOfMeasure=function(e,t){return this.requestCodeList("UnitsOfMeasure",e,t)};te.prototype.requestValue4Annotation=function(t,n,i){var r=new R({any:e.value(t,{context:this.createBindingContext(n)}),bindingContexts:i,models:i.getModel()}),o=r.getBinding("any"),a;if(o){if(o.getBindings){a=Promise.all(o.getBindings().map(function(e){return e.requestValue()}))}else{a=o.requestValue()}}else{a=Promise.resolve()}return a.then(function(){return r.getAny()})};te.prototype.requestValueListInfo=function(e,t,i){var r=n.getMetaPath(e),o=r.slice(0,r.lastIndexOf("/")).replace("/$Parameter",""),a=o.slice(o.lastIndexOf("/")+1),s=this;if(!a.includes(".")){a=undefined}return Promise.all([a||this.requestObject(o+"/@sapui.name"),this.requestObject(r),this.requestObject(r+"@"),this.requestObject(r+Y),this.requestObject(o+"/@$ui5.overload")]).then(function(o){var a=o[2],u=o[3],f={},l=o[1],c={};function d(i,r,o,a){if("CollectionRoot"in i){a=s.getOrCreateSharedModel(i.CollectionRoot,undefined,t);if(c[r]&&c[r].$model===a){f[r]=undefined}}if(f[r]){throw new Error("Annotations '"+H.slice(1)+"' with identical qualifier '"+r+"' for property "+e+" in "+f[r]+" and "+o)}f[r]=o;i=n.clone(i);i.$model=a;delete i.CollectionRoot;delete i.SearchSupported;c[r]=i}if(!l){throw romise.all(Object.keys(a).filter(function(e){return ae(e,J)!==undefined}).map(function(e){var n=a[e];return Promise.all(n.map(function(e){var n=s.getOrCreateSharedl,o[4]).then(function(e){return{valueListMappingByQualifier:e,$model:n}})})).then(function(e){n.forEach(function(t,n){var i=e[n].valueListMappingByQualifier;Object.keys(i).forEach(function(r){d(i[r],r,){var t=a[X];Object.keys(a).filter(function(e){return se(e)!==undefined}).forEach(function(e){d(a[e],se(e),s.sUrl,s.oModel)});if(n.isEmptyObject(c)){throw new Error("No annotation '"+J.slice(1)+"' for "+e)}return t&&i&&i.getBinding?s.filterValueListRelevantQualifiers(c,t,r+X,i):c}).then(function(t){var n,i;if(u){n=Object.keys(t);if(n.length!==1){throw new Error("Annotation '"+Y.slice(1)+"' but not exactly one '"+H.slice(1)+"' for property "+e)}i=t[n[0]];i.$qualifier=n[0];return{"":i}}return t})})};te.prototype.filterValueListRelevantQualifiers=function(e,t,n,i){return).then(function(t){var n={};t.forEach(function(t){if(t in e){n[t]=e[t]}});return n})};te.prototype.requestValueListType=n.createRequestMethod("fetchValueListType");te.prototype.resolve=function(e,t){var n,i;if(!e){return t?t.getPath():undefined}i=e[0];if(i==="/"){return e}if(!t){return undefined}if(i==="."){if(e[1]!=="/"){throw new Error("Unsupported relative path: "+e)}e=e.slice(2)}n=t.getPath();return i==="@"||n.endsWith("/")?n+e:n+"/"+e};te.prototype.setLegacySyntax=function(){throw new Error("Unsupported operation: v4.ODataMetaModel#setLegacySyntax")};te.prototype.toString=function(){return k+": "+this.sUrl};te.prototype.validate=function(e,t){var n,i,r,o,a,s;if(!this.bSupportReferences){return t}for(a in t.$Reference){o=t.$Reference[a];a=new L(a).absoluteTo(this.sUrl).toString();if("$IncludeAnnotations"in o){le(this,"Unsupported IncludeAnnotations",e)}for(s in o.$Include){r=o.$Include[s];if(r in t){le(this,"A schema cannot span more than one document: "+r+" - is both included and defined",e)}re(this,r,a,e)}}i=t.$LastModified?new Date(t.$LastModified):null;this.mETags[e]=t.$ETag?t.$ETag:i;n=t.$Date?new Date(t.$Date):new Date;i=i||n;if(this.oLastModified<i){this.oLastModified=i}delete t.$Date;delete t.$ETag;delete t.$LastModified;return t};return te});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataModel",["./ODataContextBinding","./ODataListBinding","./ODataMetaModel","./ODataPropertyBinding","./SubmitMode","./lib/_GroupLock","./lib/_Helper","./lib/_MetadataRequestor","./lib/_Parser","./lib/_Requestor","sap/base/assert","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/core/cache/CacheManager","sap/ui/core/Configuration","sap/ui/core/library","sap/ui/core/message/Message","sap/ui/model/BindingMode","sap/ui/model/Context","sap/ui/model/Model","sap/ui/model/odata/OperationMode","sap/ui/thirdparty/URI"],function(e,t,r,i,o,n,s,a,u,p,d,h,c,f,l,g,y,m,v,w,E,b){"use strict";var M="sap.ui.model.odata.v4.ODataModel",P=["$count","$expand","$filter","$levels","$orderby","$search","$select"],R=["$$groupId","$$patchWithoutSideEffects","$$updateGroupId"],B=g.MessageType,C=[undefined,B.Success,B.Information,B.Warning,B.Error],q={dataReceived:true,dataRequested:true,messageChange:true,propertyChange:true,sessionTimeout:true},D={annotationURI:true,autoExpandSelect:true,earlyRequests:true,groupId:true,groupProperties:true,httpHeaders:true,ignoreAnnotationsFromMetadata:true,metadataUrlParams:true,odataVersion:true,operationMode:true,serviceUrl:true,sharedRequests:true,supportReferences:true,synchronizationMode:true,updateGroupId:true},I=["$apply","$count","$expand","$filter","$orderby","$search","$select"],$=/^[ -~]+$/,O=w.extend("sap.ui.model.odata.v4.ODataModel",{constructor:G});function G(e){var t,i,n=l.getLanguageTag(),u,d,h,c,f,g,y=this;w.call(this);e=e||{};if("synchronizationMode"in e&&e.synchronizationMode!=="None"){throw new Error("Synchronization mode must be 'None'")}u=e.odataVersion||"4.0";this.sODataVersion=u;if(u!=="4.0"&&u!=="2.0"){throw new Error("Unsupported value for parameter odataVersion: "+u)}for(d in e){if(!(d in D)){throw new Error("Unsupported parameter: "+d)}}c=e.serviceUrl;if(!c){throw new Error("Missing service root URL")}f=new b(c);if(f.path()[f.path().length-1]!=="/"){throw new Error("Service root URL must end with '/'")}if(e.operationMode&&e.operationMode!==E.Server){throw new Error("Unsupported operation mode: "+e.operationMode)}this.sOperationMode=e.operationMode;g=this.buildQueryOptions(f.query(true),false,true);this.mUriParameters=g;if(l.getStatisticsEnabled()){g=Object.assign({"sap-statistics":true},g)}this.sServiceUrl=f.query("").toString();this.sGroupId=e.groupId;if(this.sGroupId===undefined){this.sGroupId="$auto"}if(this.sGroupId!=="$auto"&&this.sGroupId!=="$direct"){throw new Error("Group ID must be '$auto' or '$direct'")}s.checkGroupId(e.updateGroupId,false,"Invalid update group ID: ");this.sUpdateGroupId=e.updateGroupId||this.getGroupId();this.mGroupProperties={};for(t in e.groupProperties){s.checkGroupId(t,true);i=e.groupProperties[t];if(typeof i!=="object"||Object.keys(i).length!==1||!(i.submit in o)){throw new Error("Group '"+t+"' has invalid properties: '"+i+"'")}}this.mGroupProperties=s.clone(e.groupProperties)||{};this.mGroupProperties.$auto={submit:o.Auto};this.mGroupProperties.$direct={submit:o.Direct};if(e.autoExpandSelect!==undefined&&typeof e.autoExpandSelect!=="boolean"){throw new Error("Value for autoExpandSelect must be true or false")}this.bAutoExpandSelect=e.autoExpandSelect===true;if("sharedRequests"in e&&e.sharedRequests!==true){throw new Error("Value for sharedRequests must be true")}this.bSharedRequests=e.sharedRequests===true;this.bIgnoreETag=false;if("ignoreAnnotationsFromMetadata"in e&&e.ignoreAnnotationsFromMetadata!==true){throw new Error("Value for ignoreAnnotationsFromMetadata must be true")}this.mHeaders={"Accept-Language":n};this.mMetadataHeaders={"Accept-Language":n};h=Object.assign({},g,e.metadataUrlParams);this.oMetaModel=new r(a.create(this.mMetadataHeaders,u,e.ignoreAnnotationsFromMetadata,h),this.sServiceUrl+"$metadata",e.annotationURI,this,e.supportReferences,h["sap-language"]);this.oInterface={fetchEntityContainer:this.oMetaModel.fetchEntityContainer.bind(this.oMetaModel),fetchMetadata:this.oMetaModel.fetchObject.bind(this.oMetaModel),fireMessageChange:this.fireMessageChange.bind(this),fireDataReceived:this.fireDataReceived.bind(this),fireDataRequested:this.fireDataRequested.bind(this),fireSessionTimeout:function(){y.fireEvent("sessionTimeout")},getGroupProperty:this.getGroupProperty.bind(this),getMessagesByPath:this.getMessagesByPath.bind(this),getOptimisticBatchEnabler:this.getOptimisticBatchEnabler.bind(this),getReporter:this.getReporter.bind(this),isIgnoreETag:function(){return y.bIgnoreETag},onCreateGroup:function(e){if(y.isAutoGroup(e)){y.addPrerenderingTask(y._submitBatch.bind(y,e,true))}},reportStateMessages:this.reportStateMessages.bind(this),reportTransitionMessages:this.reportTransitionMessages.bind(this)};this.oRequestor=p.create(this.sServiceUrl,this.oInterface,this.mHeaders,g,u);this.changeHttpHeaders(e.httpHeaders);this.bEarlyRequests=e.earlyRequests;if(this.bEarlyRequests){this.oMetaModel.fetchEntityContainer(true);this.initializeSecurityToken();this.oRequestor.sendOptimisticBatch()}this.aAllBindings=[];this.mKeepAliveBindingsByPath={};this.mSupportedBindingModes={OneTime:true,OneWay:true};if(e.sharedRequests){this.sDefaultBindingMode=m.OneWay}else{this.sDefaultBindingMode=m.TwoWay;this.mSupportedBindingModes.TwoWay=true}this.aPrerenderingTasks=null;this.fnOptimisticBatchEnabler=null;this.mPath2DataReceivedError={};this.mPath2DataRequestedCount={}}O.prototype._submitBatch=function(e,t){var r=this;return this.oRequestor.submitBatch(e).catch(function(e){r.reportError("$batch failed",M,e);if(!t){throw e}})};O.prototype.addPrerenderingTask=function(e,t){var r,i,o=this;function n(e){clearTimeout(i);while(e.length){e.shift()()}if(o.aPrerenderingTasks===e){o.aPrerenderingTasks=null}}if(!this.aPrerenderingTasks){this.aPrerenderingTasks=[];r=n.bind(null,this.Core().addPrerenderingTask(r);i=setTimeout(function(){i=setTimeout(r,0)},0)}if(t){this.aPrerenderingTasks.unshift(e)}else{this.aPrerenderingTasks.push(e)}};O.prototype.attachDataReceived=function(e,t){return this.attachEvent("dataReceived",e,t)};O.prototype.attachDataRequested=function(e,t){return this.attachEvent("dataRequested",e,t)};O.prototype.attachEvent=function(e,t,r,i){if(!(e in q)){throw new Error("Unsupported event '"+e+"': v4.ODataModel#attachEvent")}return w.prototype.attachEvent.apply(this,arguments)};O.prototype.attachSessionTimeout=function(e,t){return this.attachEvent("sessionTimeout",e,t)};O.prototype.bindContext=function(t,r,i){return new e(this,t,r,i)};O.prototype.bindingCreated=function(e){this.aAllBindings.push(e)};O.prototype.bindingDestroyed=function(e){var t=this.aAllBindings.indexOf(e);if(t<0){throw new Error("Unknown "+e)}this.aAllBindings.splice(t,1)};O.prototype.bindList=function(e,r,i,o,n){return new t(this,e,r,i,o,n)};O.prototype.bindProperty=function(e,t,r){return new i(this,e,t,r)};O.prototype.bindTree=function(e,t,r,i,o){throw new Error("Unsupported operation: v4.ODataModel#bindTree")};O.prototype.buildQueryOptions=function(e,t,r){var i,o=Object.assign({},e);function n(e,r,i){var o,a,p,d=e[r];if(!t||!i.includes(r)){throw new Error("System query option "+r+" is not supported")}if((r==="$expand"||r==="$select")&&typeof d==="string"){d=u.parseSystemQueryOption(r+"="+d)[r];e[r]=d}if(r==="$expand"){d=e[r]=s.clone(d);for(p in d){a=d[p];if(a===null||typeof a!=="object"){a=d[p]={}}for(o in a){n(a,o,P)}}}else if(r==="$count"){if(typeof d==="boolean"){if(!d){delete e.$count}}else{switch(typeof d==="string"&&d.toLowerCase()){case"false":delete e.$count;break;case"true":e.$count=true;break;default:throw new Error("Invalid value for $count: "+d)}}}}if(e){for(i in e){if(i.startsWith("$$")){delete o[i]}else if(i[0]==="@"){throw new Error("Parameter "+i+" is not supported")}else if(i[0]==="$"){n(o,i,I)}else if(!r&&i.startsWith("sap-")&&!i.startsWith("sap-valid-")){throw new Error("Custom query option "+i+" is not supported")}}}return o};O.prototype.changeHttpHeaders=function(e){var t,r,i={},o,n;this.oRequestor.checkHeaderNames(e);for(n in e){r=n.toLowerCase();o=e[n];if(i[r]){throw new Error("Duplicate header "+n)}else if(!(typeof o==="string"&&$.test(o)||o===undefined)){throw new Error("Unsupported value for header '"+n+"': "+o)}else{if(r==="x-csrf-token"){n="X-CSRF-Token"}i[r]={key:n,value:o}}}this.oRequestor.checkForOpenRequests();for(n in this.mHeaders){r=n.toLowerCase();t=i[r];if(t){delete this.mHeaders[n];delete this.mMetadataHeaders[n];if(t.value!==undefined){this.mHeaders[t.key]=t.value;this.mMetadataHeaders[t.key]=t.value}delete i[r]}}for(n in i){t=i[n];if(t.value!==undefined){this.mHeaders[t.key]=t.value;if(n!=="x-csrf-token"){this.mMetadataHeaders[t.key]=t.value}}}};O.prototype.checkBatchGroupId=function(e){s.checkGroupId(e);if(this.isDirectGroup(e)){throw new Error("Group ID does not use batch requests: "+e)}};O.prototype.clearSessionContext=function(){this.oRequestor.clearSessionContext()};O.prototype.createBindingContext=function(e,t){var r,i,o,n,s;function a(e){var t=e.indexOf("."),r=e.indexOf("/");return t>0&&(r<0||t<r)}if(arguments.length>2){throw new Error("Only the parameters sPath and oContext are supported")}if(t&&t.getBinding){throw new Error("Unsupported type: oContext must be of type sap.ui.model.Context, "+"but was sap.ui.model.odata.v4.Context")}n=this.resolve(e,t);if(n===undefined){throw new Error("Cannot create binding context from relative path '"+e+"' without context")}s=n.indexOf("#");if(s>=0){r=n.slice(0,s);o=n.slice(s+1);if(o[0]==="#"){o=o.slice(1)}else if(r.length>1&&o[0]!=="@"&&a(o)){return new v(this,n)}if(o[0]==="/"){o="."+o}i=this.oMetaModel.getMetaContext(r);return this.oMetaModel.createBindingContext(o,i)}return new v(this,n)};O.prototype.createUI5Message=function(e,t,r){var i=typeof e.target==="string",o=e.longtextUrl,n,a=this;function u(e){return a.normalizeMessageTarget(e[0]==="/"?e:s.buildPath("/"+t,r,e))}if(i){t=t&&t.split("?"additionalTargets){e.additionalTargets.forEach(function(e){n.push(u(e))})}}if(o&&t){o=s.makeAbsolute(o,this.sServiceUrl+t)}return new y({code:e.code,descriptionUrl:o||undefined,message:e.message,persistent:!i||e.transition,processor:this,target:i?n:"",technical:e.technical,technicalDetails:s.createTechnicalDetails(e),type:C[e.numericSeverity]||B.None})};O.prototype.delete=function(e,t,r){var i=this;if(e[0]!=="/"){throw new Error("Invalid path: "+e)}s.checkGroupId(t);t=t||this.getUpdateGroupId();if(this.isApiGroup(t)){throw new Error("Illegal update group ID: "+t)}return this.oRequestor.request("DELETE",e.slice(1)+s.buildQuery(this.mUriParameters),this.lockGroup(t,this,true,true),{"If-Match":"*"})e}}).then(function(){i.aAllBindings.forEach(function(t){t.onDelete(e)})})};O.prototype.destroy=function(){this.oMetaModel.destroy();this.oRequestor.destroy();this.mHeaders=undefined;this.mMetadataHeaders=undefined;return w.prototype.destroy.apply(this,arguments)};O.prototype.destroyBindingContext=function(){throw new Error("Unsupported operation: v4.ODataModel#destroyBindingContext")};O.prototype.detachDataReceived=function(e,t){return this.detachEvent("dataReceived",e,t)};O.prototype.detachDataRequested=function(e,t){return this.detachEvent("dataRequested",e,t)};O.prototype.detachSessionTimeout=function(e,t){return this.detachEvent("sessionTimeout",e,t)};O.prototype.fetchKeyPreequestor.fetchType(r,e).then(function(){return s.getKeyPredicate(t,e,r)})};O.prototype.filterMatchingMessages=function(e,t){return s.hasPathPrefix(e,t)?this.mMessages[e]:[]};O.prototype.fireDataReceived=function(e,t){if(!(t in this.mPath2DataRequestedCount)){throw new Error("Received more data than requested")}this.mPath2DataRequestedCount[t]-=1;this.mPath2DataReceivedError[t]=this.mPath2DataReceivedError[t]||e;if(this.mPath2DataRequestedCount[t]===0){this.fireEvent("dataReceived",this.mPath2DataReceivedError[t]?{error:this.mPath2DataReceivedError[t],path:t}:{data:{},path:t});delete this.mPath2DataReceivedError[t];delete this.mPath2DataRequestedCount[t]}};O.prototype.fireDataRequested=function(e){if(e in this.mPath2DataRequestedCount){this.mPath2DataRequestedCount[e]+=1}else{this.mPath2DataRequestedCount[e]=1;this.fireEvent("dataRequested",{path:e})}};O.prototype.getAllBindings=function(){return this.aAllBindings.slice()};O.prototype.getContext=function(){throw new Error("Unsupported operation: v4.ODataModel#getContext")};O.prototype.getDependentBindings=function(e){return this.aAllBindings.filter(function(t){var r=t.getContext();return t.isRelative()&&(r===e||r&&r.getBinding&&r.getBinding()===e)})};O.prototype.getGroupId=function(){return this.sGroupId};O.prototype.getGroupProperty=function(e,t){switch(t){case"submit":if(e.startsWith("$auto.")){return o.Auto}return this.mGroupProperties[e]?this.mGroupProperties[e].submit:o.API;default:throw new Error("Unsupported group property: '"+t+"'")}};O.prototype.getHttpHeaders=function(e){var t=Object.assign({},this.mHeaders);if(!e){delete t["SAP-ContextId"]}if(t["X-CSRF-Token"]===null){delete t["X-CSRF-Token"]}return t};O.prototype.getKeyPredicate=s.createGetMethod("fetchKeyPredicate",true);O.prototype.getMessages=function(e){return this.getMessagesByPath(e.getPath(),true).sort(y.compare)};O.prototype.getMetaModel=function(){return this.oMetaModel};O.prototype.getObject=function(){throw new Error("Unsupported operation: v4.ODataModel#getObject")};O.prototype.getODataVersion=function(){return this.sODataVersion};O.prototype.getOriginalProperty=function(){throw new Error("Unsupported operation: v4.ODataModel#getOriginalProperty")};O.prototype.getProperty=function(){throw new Error("Unsupported operation: v4.ODataModel#getProperty")};O.prototype.getKeepAliveContext=function(e,t,r){var i,o,n;if(!this.bAutoExpandSelect){throw new Error("Missing parameter autoExpandSelect")}if(e[0]!=="/"){throw new Error("Not a list context path to an entity: "+e)}r=r||{};Object.keys(r).forEach(function(e){if(e.startsWith("sap-")&&!e.startsWith("sap-valid-")||e[0]==="$"&&!R.includes(e)){throw new Error("Invalid parameter: "+e)}});n=e.slice(0,s.getPredicateIndex(e));i=this.mKeepAliveBindingsByPath[n];if(!i){o=this.aAllBindings.filter(function(e){if(e.mParameters&&e.mParameters.$$getKeepAliveContext){e.removeCachesAndMessages(n.slice(1),true)}return e.isKeepAliveBindingFor&&e.isKeepAliveBindingFor(n)});if(o.length>1){throw new Error("Multiple bindings with $$getKeepAliveContext for: "+e)}i=o[0];if(!i){i=this.bindList(n,undefined,undefined,undefined,r);this.mKeepAliveBindingsByPath[n]=i}}return i.getKeepAliveContext(e,t,r.$$groupId)};O.prototype.getUpdateGroupId=function(){return this.sUpdateGroupId};O.prototype.getReporter=function(){var e=this;return function(t){if(!t.$reported){e.reportError(t.message,M,t)}}};O.prototype.getServiceUrl=function(){return this.sServiceUrl};O.prototype.hasPendingChanges=function(e){if(e!==undefined){this.checkBatchGroupId(e);if(this.isAutoGroup(e)&&this.oRequestor.hasPendingChanges("$parked."+e)){return true}}return this.oRequestor.hasPendingChanges(e)};O.prototype.initializeSecurityToken=function(){this.oRequestor.refreshSecurityToken().catch(function(){})};O.prototype.isApiGroup=function(e){return this.getGroupProperty(e,"submit")===o.API};O.prototype.isAutoGroup=function(e){return this.getGroupProperty(e,"submit")===o.Auto};O.prototype.isDirectGroup=function(e){return this.getGroupProperty(e,"submit")===o.Direct};O.prototype.isList=function(){throw new ErrckGroup=function(e,t,r,i,o){return this.oRequestor.lockGroup(e,t,r,i,o)};O.prototype.refresh=function(e){if(typeof e==="boolean"){throw new Error("Unsupported parameter bForceUpdate")}s.checkGroupId(e);this.getBindings().forEach(function(t){if(t.isRoot()){t.refresh(t.isSuspended()?undefined:e)}})};O.prototype.releaseKeepAliveBinding=function(e){var t=this.mKeepAliveBindingsByPath[e];if(t){delete this.mKeepAliveBindingsByPath[e];return t}};O.prototype.reportError=function(e,t,r){var i;if(r.canceled==="noDebugLog"){return}i=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack;if(r.canceled){h.debug(e,i,t);return}h.error(e,i,t);if(r.$reported){return}r.$reported=true;this.reportTransitionMessages(s.extractMessages(r),r.resourcePath)};O.prototype.reportStateMessages=function(e,t,r){var (function(r){t[r].forEach(function(t){o.push(a.createUI5Message(t,e,r))})});(r||[""]).forEach(function(e){var t=s.buildPath(i,e);Object.keys(a.mMessages).forEach(function(e){if(e===t||e.+"(")){n=n.concat(a.mMessages[e].filter(function(e){return!e.persistent}))}})});if(o.length||n.length){this.fireMessageChange({newMessages:o,oldMessages:n})}};O.prototype.reportTransitionMessages=function(e,t){var r=this;if(e&&e.length){this.fireMessageChange({newMessages:e.map(function(e){e.transition=true;return r.createUI5Message(e,t)})})}};O.prototype.normalizeMessageTarget=function(e){var t,r,i="",o=this;if(e.includes("$uid=")){return e}t=e.split("/").map(function(e){var t,n=e.indexOf("("),a,p,d;function h(e){if(e in p){return encodeURIComponent(decodeURIComponent(p[e]))}r=true}if(n<0){i=s.buildPath(i,e);return e}t=e.slice(0,n);i=s.buildPath(i,t);p=u.parseKeyPredicate(e.slice(n));if(""in p){return t+"("+h("")+")"}d=o.oMetaModel.getObject("/"+i+"/");if(!(d&&d.$Key)){r=true;return e}a=d.$Key.map(function(e){var t=h(e);return d.$Key.length>1?e+"="+t:t});return t+"("+a.join(",")+")"}).join("/");return r?e:t};O.prototype.requestCanonicalPath=function(e){d(e.getModel()===this,"oEntityContext must belong to this model");return e.requestCanonicalPath()};O.prototype.requestKeyPredicate=s.createRequestMethod("fetchKeyPredicate");O.prototype.requestSideEffects=function(e,t){if(!t.length){return undefined}rn e.isRoot()}).map(function(r){return r.requestAbsoluteSideEffects(e,t)}))};O.prototype.resetChanges=function(e){e=e||this.sUpdateGroupId;this.checkBatchGroupId(e);if(this.isAutoGroup(e)){this.oRequestor.cancelChanges("$parked."+e);this.oRequestor.cancelChanges("$inactive."+e,true)}this.oRequestor.cancelChanges(e);this.aAllBindings.forEach(function(t){if(e===t.getUpdateGroupId()){t.resetInvalidDataState()}})};O.prototype.resolve=function(e,t){var r;if(e&&e[0]==="/"){r=e}else if(t){r=t.getPath();if(e){if(!r.endsWith("/")){r+="/"}r+=e}}if(r&&r!=="/"&&r[r.length-1]==="/"&&!r.includes("#")){r=r.slice(0,r.length-1)}return r};O.prototype.setIgnoreETag=function(e){this.bIgnoreETag=e};O.prototype.setLegacySyntax=function(){throw new Error("Unsupported operation: v4.ODataModel#setLegacySyntax")};O.prototype.getOptimisticBatchEnabler=function(){return this.fnOptimisticBatchEnabler};O.prototype.setOptimisticBatchEnabler=function(e){if(!this.bEarlyRequests){throw new Error("The earlyRequests model parameter is not set")}if(this.oRequestor.isBatchSent()){throw new Error("The setter is called after a non-optimistic batch is sent")}if(typeof e!=="function"){throw new Error("The given fnOptimisticBatchEnabler parameter is not a function")}if(this.fnOptimisticBatchEnabler){throw new Error("The setter is called more than once")}this.fnOptimisticBatchEnabler=e};O.prototype.submitBatch=function(e){var t=this;this.checkBatchGroupId(e);if(this.isAutoGroup(e)){this.oRequestor.relocateAll("$parked."+e,e)}else{this.oRequesomise(function(r){t.addPre))})})};O.prototype.toString=function(){return M+": "+this.sServiceUrl};O.protot(e,t){return this.aAllBindings.filter(function(e){return!e.ishFilters({olderThan:e,prefix:"sap.ui.model.odata.v4.optimisticBatch:"})};return O});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataParentBinding",["./Context","./ODataBinding","./lib/_Helper","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/ChangeReason"],function(e,t,n,r,i,o){"use strict";function s(){t.call(this);this.mAggregatedQueryOptions={};this.bAggregatedQueryOptionsInitial=true;this.mCanUseCachePromiseByChildPath={};this.aChildCanUseCachePromises=[];this.bHasPathReductionToParent=false;this.iPatchCounter=0;this.bPatchSuccess=true;this.oReadGroupLock=undefined;this.oRefreshPromise=null;this.oResumePromise=undefined}t(s.prototype);var a="sap.ui.model.odata.v4.ODataParentBinding";s.prototype.attachPatchCompleted=function(e,t){return this.attachEvent("patchCompleted",e,t)};s.prototype.detachPatchCompleted=function(e,t){return this.detachEvent("patchCompleted",e,t)};s.prototype.doSuspend=function(){};s.prototype.firePatchCompleted=function(e){if(this.iPatchCounter===0){throw new Error("Completed more PATCH requests than sent")}this.iPatchCounter-=1;this.bPatchSuccess=this.bPatchSuccess&&e;if(this.iPatchCounter===0){this.fireEvent("patchCompleted",{success:this.bPatchSuccess});this.bPatchSuccess=true}};s.prototype.attachPatchSent=function(e,t){return this.attachEvent("patchSent",e,t)};s.prototype.detachPatchSent=function(e,t){return this.detachEvent("patchSent",e,t)};s.prototype.firePatchSent=function(){this.iPatchCounter+=1;if(this.iPatchCounter===1){this.fireEvent("patchSent")}};s.prototype._findEmptyPathParentContext=function(e){if(this.sPath===""&&this.oContext.getBinding){return this.oContext.getBinding()._findEmptyPathParentContext(this.oContext)}return e};s.prototype.aggregateQueryOptions=function(e,t,r,i){var o=n.merge({},r&&this.mLateQueryOptions||this.mAggregatedQueryOptions),s=this;function a(e,t,n,o,h){function u(i){var o=!e.$expand[i],h=n+"/"+i;if(o){e.$expand[i]={};if(r&&s.oModel.getMetaModel().fetchObject(h).getResult().$isCollection){return false}}return a(e.$expand[i],t.$expand[i],h,true,o)}function c(t){if(!e.$select.includes(t)){e.$select.push(t)}return true}return(i||!o||Object.keys(e).every(function(e){return e in t||e==="$count"||e==="$expand"||e==="$select"}))&&Object.keys(t).every(function(n){switch(n){case"$count":if(t.$count){e.$count=true}return true;case"$expand":e.$expand=e.$expand||{};return Object.keys(t.$expand).every(u);case"$select":e.$select=e.$select||[];return t.$select.every(c);default:if(h){e[n]=t[n];return true}return t[n]===e[n]}})}if(a(o,e,t)){if(r){this.mLateQueryOptions=o}else{this.mAggregatedQueryOptions=o;if(this.mLateQueryOptions){a(this.mLateQueryOptions,e)}}return true}return false};s.prototype.changeParameters=function(e){var t=Object.assign({},this.mParameters),r,i,s=this;function a(n){if(s.oModel.bAutoExpandSelect&&(n==="$expand"||n==="$select")){throw new Error("Cannot change "+n+" parameter in auto-$expand/$select mode: "+JSON.stringify(e[n])+" !== "+JSON.stringify(t[n]))}if(n==="$filter"||n==="$search"){r=o.Filter}else if(n==="$orderby"&&r!==o.Filter){r=o.Sort}else if(!r){r=o.Change}}this.checkTransient();if(!e){throw new Error("Missing map of binding parameters")}for(i in e){if(i.startsWith("$$")){if(e[i]===t[i]){continue}throw new Error("Unsupported parameter: "+i)}if(e[i]===undefined&&t[i]!==undefined){a(i);delete t[i]}else if(t[i]!==e[i]){a(i);if(typeof e[i]==="object"){t[i]=n.clone(e[i])}else{t[i]=e[i]}}}if(r){if(this.hasPendingChanges(true)){throw new Error("Cannot change parameters due to pending changes")}this.applyParameters(t,r)}};s.prototype.checkUpdateInternal=function(e){var t=this;function n(){return i.all(t.getDependentBindings().map(function(e){return e.checkUpdateInternal()}))}if(e!==undefined){throw new Error("Unsupported operation: "+a+"#checkUpdateInternal must not"+" be called with parameters")}return this.oCachePromise.then(function(e){if(e&&t.bRelative){return t.fetchResourcePath(t.oContext).then(function(r){if(e.getResourcePath()===r){return n()}return t.refreshInternal("")})}return n()})};s.prototype.createInCache=function(e,t,r,i,o,s,a,h){var u=this;return this.oCachePromise.then(function(c){var d;if(c){d=n.getRelativePath(r,u.getResolvedPath());return c.create(e,t,d,i,o,s,a,h).then(function(e){if(u.mCacheByResourcePath){delete u.mCacheByResourcePath[c.getResourcePath()]}return e})}return u.oContext.getBinding().createInCache(e,t,r,i,o,s,a,h)})};s.prototype.createReadGroupLock=function(e,t,n){var i,o=this;function s(){o.oModel.addPrerenderingTask(function(){n-=1;if(n>0){Promise.resolve().then(s)}else if(o.oReadGroupLock===i){r.debug("Timeout: unlocked "+i,null,a);o.removeReadGroupLock()}})}this.removeReadGroupLock();this.oReadGroupLock=i=this.lockGroup(e,t);if(t){n=2+(n||0);s()}};s.prototype.createRefreshPromise=function(e){var t,n;t=new Promise(function(e){n=e});t.$preventBubbling=e;t.$resolve=n;this.oRefreshPromise=t;return ,n,r,i){return this.withCache(function(n,o){return n._delete(e,t,o,r,i)},n,true)};s.prototype.destroy=function(){this.aChildCanUseCachePromises=[];this.removeReadGroupLock();this.oResumePromise=undefined;t.prototype.destroy.call(this)};s.prototype.fetchIfChildCanUseCache=function(t,o,s,h){var u=this.getBaseForPathReduction(),c,d,p,f=t.getPath().includes("(...)"),l=t.getIndex(),g=o[0]==="#",P=this.oModel.getMetaModel(),m,y=this.oModel.resolve(o,t),C=this;function v(){if(g){return P.fetchObject(c+"/")}return n.fetchPropertyAndType(C.oModel.oInterface.fetchMetadata,R(y))}function R(e){var t;e=n.getMetaPath(e);t=e.indexOf("@");return t>0?e.slice(0,t):e}if(f&&!y.includes("/$Parameter/")||this.getRootBinding().isSuspended()||n.isDataAggregation(this.mParameters)){return i.resolve(y)}p=this.mCanUseCachePromiseByChildPath[o];if(p&&h){return p.then(function(e){if(!e){return undefined}if(!o.includes("/")||n.getMetaPath(e)===n.getMetaPath(y)){return y}return P.getReducedPath(y,u)})}d=this.oCachePromise.isRejected()||l!==undefined&&l!==e.VIRTUAL||t.isKeepAlive()||this.oCache===null||this.oCache&&this.oCache.hasSentRequest();c=n.getMetaPath(t.getPath());m=[this.doFetchOrGetQueryOptions(this.oContext),v(),s];p=i.all(m).then(function(e){var t=e[2]||{},i,o=e[0],s=e[1],p,l;if(Array.isArray(s)){return undefined}l=P.getReducedPath(y,u);p=n.getRelativePath(R(l),c);if(p===undefined){C.bHasPathReductionToParent=true;return C.oContext.getBinding().fetchIfChildCanUseCache(C.oContext,n.getRelativePath(y,C.oContext.getPath()),t,h)}if(f||p==="$count"||p.endsWith("/$count")){return l}if(C.bAggregatedQueryOptionsInitial){C.selectKeyProperties(o,c);C.mAggregatedQueryOptions=n.clone(o);C.bAggregatedQueryOptionsInitial=false}if(g){i={$select:[p.slice(1)]};return C.aggregateQueryOptions(i,c,d,h)?l:undefined}if(p===""||s&&(s.$kind==="Property"||s.$kind==="NavigationProperty")){i=n.wrapChildQueryOptions(c,p,t,C.oModel.oInterface.fetchMetadata);if(i){return C.aggregateQueryOptions(i,c,d,h)?l:undefined}return undefined}if(p==="value"){return C.aggregateQueryOptions(t,c,d,h)?l:undefined}r.error("Failed to enhance query options for auto-$expand/$select as the path '"+y+"' does not point to a property",JSON.stringify(s),a);return undefined}).then(function(e){if(C.mLateQueryOptions){if(C.oCache){C.oCache.setLateQueryOptions(C.mLateQueryOptions)}else if(C.oCache===null){return C.oContext.getBindinhe(C.oContext,C.sPath,C.mLateQueryOptions).then(function(t){return t&&e})}}return e});if(h&&!t.getPath().includes("($uid=")){this.mCanUseCachePromiseByChildPath[o]=p}this.aChildCanUseCachePromises.push(p);this.oCachePromise=i.all([this.oCachePromise,p]).then(function(e){var r=e[0];if(!d&&r&&!r.hasSentRequest()&&!C.oOperation){if(C.bSharedRequest){r.setActive(false);r=C.createAndSetCache(C.mAggregatedQueryOptions,r.getResourcePath(),t)}else{r.setQueryOptions(n.merge({},C.oModel.mUriParameters,C.mAggregatedQueryOptions))}}return r});this.oCachePromise.catch(function(e){C.oModel.reportError(C+": Failed to enhance query options for "+"auto-$expand/$select for child "+o,a,e)});return p};s.prototype.fetchResolvedQueryOptions=function(e){var t,r,o,s=this.oModel,a=this.getQueryOptionsFromParameters();if(!(s.bAutoExpandSelect&&a.$select)){return i.resolve(a)}t=s.oInterface.fetchMetadata;o=n.getMetaPath(s.resolve(this.sPath,e));r=Object.assign({},a,{$select:[]});return i.all(a.$select.map(function(e){var i=o+"/"+e;if(i.endsWith(".*")){i=i.slice(0,-1)}return n.fetchPropertyAndType(t,i).then(function(){var i=n.wrapChildQueryOptions(o,e,{},t);if(i){n.aggregateExpandSelect(r,i)}else{n.addToSelect(r,[e])}})})).then(function(){return r})};s.prototype.getBaseForPathReduction=function(){var e,t;if(!this.isRoot()){e=this.oContext.getBinding();t=e.getUpdateGroupId();if(t===this.getUpdateGroupId()||!this.oModel.isApiGroup(t)){return e.getBaseForPathReduction()}}return this.getResolvedPath()};s.prototype.getInheritableQueryOptions=function(){if(this.mLateQueryOptions){return n.merge({},this.mCacheQueryOptions,this.mLateQueryOptions)}return this.mCacheQueryOptions||n.getQueryOptionsForPath(this.oContext.getBindiRelative&&this.oContext.getGeneration&&this.oContext.getGeneration()||0};s.prototype.getQueryOptionsForPath=function(e,t){if(!n.isEmptyObject(this.mParameters)){return n.getQueryOptionsForPath(this.getQueryOptionsFromParameters(),e)}t=t||this.oContext;if(!this.bRelative||!t.getQueryOptionsForPath){return{}}return t.getQueryOptionsForPath(n.buildPath(this.sPath,e))};s.prototype.getResumePromise=function(){return this.oResumePromise};s.prototype.hasPendingChangesInDependents=function(e,t){return this.getDependentBindings().some(function(n){var r=n.oCache,i,o=e;if(o){if(n.oContext.isKeepAlive()){return false}if(n.oContext.getIndex()!==undefined){o=false}}if(r!==undefined){if(r&&r.hasPendingChangesForPath("",false,o&&n.mParameters&&n.mParameters.$$ownRequest)){return true}}else if(n.hasPendingChangesForPath("")){return true}if(n.mCacheByResourcePath){i=Object.keys(n.mCacheByResourcePath).some(function(e){var i=n.mCacheByResourcePath[e];return(!t||e.startsWith(t.slice(1)))&&i!==r&&i.hasPendingChangesForPath("")});if(i){return true}}return n.hasPendingChangesInDependents(o,t)})||this.oModel.withUnresolvedBindings("hasPendingChangesInCaches",this.getResolvedPath().slice(1))};s.prototype.isPatchWithoutSideEffects=function(){return this.mParameters.$$patchWithoutSideEffects||!this.isRoot()&&this.oContext&&this.oContext.getBinding().isPatchWithoutSideEffects()};s.prototon(){return this.oRefreshPromise&&this.oRefreshPromise.$preventBubbling};s.prototype.onDelete=function(e){var t=this.findContextForCanonicalPath(e);if(t){this.resetChangesForPath(this.getRelativePath(t.getPath()),[]);this.oModel.getDependentBindings(t).forEach(function(e){e.resetChanges()});this.delete(null,e.slice(1),t)}};s.prototype.refreshDependentListBindingsWithoutCache=function(){return i.all(this.getDependentBindings().map(function(e){if(e.filter&&e.oCache===null){return e.refreshInternal("")}if(e.refreshDependentListBindingsWithoutCache){return e.refreshDependentListBindingsWithoutCache()}}))};s.prototype.removeReadGroupLock=function(){if(this.oReadGroupLock){this.oReadGroupLock.unlock(true);this.oReadGroupLock=undefined}};s.prototype.resetChangesInDependents=function(e,t){this.getDependentBindings().forEach(function(n){e.push(n.oCachePromise.then(function(e){if(e){e.resetChangesForPath("")}n.resetInvalidDataState()}).unwrap());if(n.mCacheByResourcePath){Object.keys(n.mCacheByResourcePath).forEach(function(e){if(!t||e.startsWith(t.slice(1))){n.mCacheByResourcePath[e].resetChangesForPath("")}})}n.resetChangesInDependents(e,t)})};s.prototype.resolveRefreshPromise=function(e){if(this.oRefreshPromise){this.oRefreshPromise.$resolve(e.catch(function(e){if(!e.canceled){throw e}}));this.oRefreshPromise=null}return e};s.prototype._resume=function(e){var t=this;function n(){t.bSuspended=false;if(t.oResumePromise){t.resumeInternal(true);t.oResumePromise.$resolve();t.oResumePromise=undefined}}if(this.oOperation){throw new Error("Cannot resume an operation binding: "+this)}if(!this.isRoot()){throw new Error("Cannot resume a relative binding: "+this)}if(!this.bSuspended){throw new Error("Cannot resume a not suspended binding: "+this)}if(e){this.createReadGroupLock(this.getGroupId(),true,1);this.oModel.addPrerenderingTask(n)}else{this.createReadGroupLock(this.getGroupId(),true);n()}};s.prototype.resume=function(){this._resume(false)};s.prototype.resumeAsync=function(){this._resume(true);return Promise.resolve(this.oResumePromise)};s.prototype.selectKeyProperties=function(e,t){n.selectKeyProperties(e,this.oModel.getMetaModel().getObject(t+"/"))};s.prototype.suspend=function(){var e;if(this.oOperation){throw new Error("Cannot suspend an operation binding: "+this)}if(!this.isRoot()){throw new Error("Cannot suspend a relative binding: "+this)}if(this.bSuspended){throw new Error("Cannot suspend a suspended binding: "+this)}if(this.hasPendingChanges(true)){throw new Error("Cannot suspend a binding with pending changes: "+this)}this.bSuspended=true;this.oResumePromise=new i(function(t){e=t});this.oResumePromise.$resolve=e;this.removeReadGroupLock();this.doSuspend()};s.prototype.updateAfterCreate=function(e,t){return i.all(this.getDependentBindings().map(function(n){return n.updateAfterCreate(e,t)}))};s.prototype.updateAggregatedQueryOptions=function(e){var t=this.mAggregatedQueryOptions,n=Object.keys(e),r=this;if(t){n=n.concat(Object.keys(t));n.forEach(function(n){if(r.bAggregatedQueryOptionsInitial||n!=="$select"&&n!=="$expand"){if(e[n]===undefined){delete t[n]}else{t[n]=e[n]}}});if(t.$select&&!t.$select.length){t.$select=[Object.keys(t.$expand)[0]]}}};s.prototype.visitSideEffects=function(e,t,r,i,o){var s=r?this.oModel.getDependentBindings(r):this.getDependentBindings();s.forEach(function(r){var s=n.buildPath(o,n.getMetaPath(r.getPath())),a;if(r.oCache){a=n.stripPathPrefix(s,t);if(a.length){i.push(r.requestSideEffects(e,a))}}else{r.visitSideEffects(e,t,null,i,s)}})};function h(e){if(this){s.apply(this,arguments)}else{Object.assign(e,s.prototype)}}["adjustPredicate","destroy","doDeregisterChangeListener","getGeneration","hasPendingChangesForPath","updateAfterCreate"].forEach(function(e){h.prototype[e]=s.prototype[e]});return h},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/ODataPropertyBinding",["./ODataBinding","./lib/_Cache","./lib/_Helper","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/model/BindingMode","sap/ui/model/ChangeReason","sap/ui/model/odata/v4/Context","sap/ui/model/PropertyBinding"],function(e,t,n,i,o,r,s,a,h){"use strict";var u="sap.ui.model.odata.v4.ODataPropertyBinding",d=Object.freeze([]),p={AggregatedDataStateChange:true,change:true,dataReceived:true,dataRequested:true,DataStateChange:true},l="/"+a.VIRTUAL,c=h.extend("sap.ui.model.odata.v4.ODataPropertyBinding",{constructor:f});function f(t,i,o,r){h.call(this,t,i);e.call(this);if(i.endsWith("/")){throw new Error("Invalid path: "+i)}if(r){this.checkBindingParameters(r,["$$groupId","$$ignoreMessages","$$noPatch"]);this.sGroupId=r.$$groupId;this.bNoPatch=r.$$noPatch;this.setIgnoreMessages(r.$$ignoreMessages)}else{this.sGroupId=undefined;this.bNoPatch=false}this.oCheckUpdateCallToken=undefined;this.oContext=o;this.bHasDeclaredType=undefined;this.bInitial=true;this.mQueryOptions=this.oModel.buildQueryOptions(n.clone(r),i.endsWith("$count"));this.vValue=undefined;this.fetchCache(o);t.bindingCreated(this)}e(c.prototype);c.prototype.attachEvent=function(e,t,n,i){if(!(e in p)){throw new Error("Unsupported event '"+e+"': v4.ODataPropertyBinding#attachEvent")}return h.prototype.attachEvent.apply(this,arguments)};c.prototype.checkUpdateInternal=function(e,t,a,h,d){var p=false,c=this.sPath.indexOf("##"),f=c>=0,g=this.oModel.getMetaModel(),y={data:{}},C=this.getResolvedPath(),v={forceUpdate:C&&(e||e===undefined&&this.getDataState().getControlMessages().length>0||this.oCheckUpdateCallToken&&this.oCheckUpdateCallToken.forceUpdate)},P=this.oType,R=this;this.oCheckUpdateCallToken=v;if(!P&&C&&this.sInternalType!=="any"&&!f&&!C.includes(l)){P=g.fetchUI5Type(this.sReducedPath||C)}if(d===undefined){d=this.oCachePromise.then(function(e){var t,n;if(e){return e.fetchValue(R.lockGroup(a||R.getGroupId()),undefined,function(){p=true;R.fireDataRequested(h)},R).then(function(t){R.assertSameCache(e);return t})}if(!R.isResolved()){return undefined}if(C.includes(l)){v.forceUpdate=false}if(!f){return R.oContext.fetchValue(R.sReducedPath,R)}t=R.sPath.slice(0,c);n=R.sPath.slice(c+2);if(n[0]==="/"){n="."+n}return g.fetchObject(n,g.getMetaContext(R.oModel.resolve(t,R.oContext)))}).then(function(e){if(!e||typeof e!=="object"){return e}if(R.sInternalType==="any"&&(R.getBindingMode()===r.OneTime||R.sPath[R.sPath.lastIndexOf("/")+1]==="#"&&!f)){if(f){return e}else if(R.bRelative){return n.publicClone(e)}}i.error("Accessed value is not primitive",C,u)},function(e){R.oModel.reportError("Failed to read path "+C,u,e);if(e.canceled){v.forceUpdate=false;return R.vValue}y={error:e}});if(e&&d.isFulfilled()){if(P&&P.isFulfilled&&P.isFulfilled()){this.oType=P.getResult()}this.vValue=d.getResult()}d=Promise.resolve(d)}return o.all([d,P]).then(function(e){var n=e[1],i=e[0];if(v===R.oCheckUpdateCallToken){R.oCheckUpdateCallToken=undefined;R.oType=n;if(v.forceUpdate||R.vValue!==i){R.bInitial=false;R.vValue=i;R._fireChange({reason:t||s.Change})}R.checkDataState()}if(p){R.fireDataReceived(y,h)}if(y.error){throw y.error}})};ce=this;this.withCache(function(t,n,i){i.doDeregisterChangeListener(n,e)},"",false,true).catch(this.oModel.getReporter())};c.prototype.destroy=function(){this.deregisterChangeListener();this.oModel.bindingDestroyed(this);this.oCheckUpdateCallToken=undefined;this.mQueryOptions=undefined;this.vValue=undefined;e.prototype.destroy.call(thCache=function(e,n){return t.createPreryOptions=function(){return this.isRoot()?this.mQueryOptions:undefined};c.prototype.getDependentBindings=function(){return d};c.prototype.getResumePromise=function(){};c.prototype.getValue=function(){return this.vValue};c.prototype.getValueListType=function(){var e=this.getResolvedPath();if(!e){throw new Error(this+" is unresolved")}return this.getModel().getMetaModel().getValueListType(e)};c.prototype.hasPendingChangesInDependents=function(){return false};c.prototype.initialize=function(){if(this.isResolved()){if(this.getRootBinding().isSuspended()){this.sResumtrue)}}};c.prototype.isMeta=function(){return this.sPath.includes("##")};c.prototype.onChange=function(e,t){this.checkUpdateInternal(t,undefined,undefined,false,e).catch(this.oModel.getReporter())};c.prototype.onDelete=function(){};c.prototype.refreshInternal=function(e,t,n,i){var r=this;if(this.isRootBindingSuspended()){this.refreshSuspended(t);return o.resolve()}return this.oCachePromise.then(function(){if(r.oCache&&r.oCache.reset){r.oCache.reset()}else{r.fetchCache(r.oContext,false,true,i)}if(n){return r.checkUpdateInternal(undefined,s.Refresh,t,i)}})};c.prototype.requestValue=function(){var e=this;return Promise.resolve(this.checkUpdateInternal(false).then(function(){return e.getValue()}))};c.prototype.requestValueListInfo=function(e){var t=this.getResolvedPath();if(!t){throw new Error(this+" is unresolved")}return this.getModel().getMetaModel().requestValueListInfo(t,e,this.oContext)};c.prototype.requestValueListType=function(){var e=this.getResolvedPath();if(!e){throw new Error(this+" is unresolved")}return this.getModel().getMetaModel().requestValueListType(e)};c.prototype.resetChangesInDependents=function(){};c.prototype.resetInvalidDataState=function(){if(this.getDataState().isControlDirty()){this._fireChange({reason:s.Change})}};c.prototype.resume=function(){throw new Error("Unsupported operation: resume")};c.prototype.resumeInternal=function(e,t){var n=this.sResumeChangeReason;this.sResumeChangeReason=undefined;this.fetchCache(this.oContext);if(e){this.checkUpdateInternal(t?undefined:false,n).catch(this.oModel.getReporter())}};c.prototype.setContext=function(e){if(this.oContext!==e){if(this.bRelative){this.checkSuspended(true);this.deregisterChangeListener();if(e){if(this.oType&&!this.bHasDeclaredType&&n.getMetaPath(this.oModel.resolve(this.sPath,e))!==n.getMetaPath(this.sReducedPath)){this.oType=undefined}this.sReducedPath=undefined}}this.oContext=e;this.sResumeChangeReason=undefined;if(this.bRelative){this.fetchCache(this.oContext);this.checkUpdateInternal(this.bInitial||undefined,s.Context).catch(this.oModel.getReporter())}}};c.prototype.setType=function(e,t){var n=this.oType;this.bHasDeclaredType=!!e;if(e&&e.getName()==="sap.ui.model.odata.type.DateTimeOffset"){e.setV4()}h.prototype.setType.apply(this,arguments);if(!this.bInitial&&n!==e){this._fireChange({reason:s.Change})}};c.prototype.setValue=function(e,t){var i,o,r=this.getResolvedPath(),a=this;function h(e){a.oModel.reportError("Failed to update path "+r,u,e);return e}this.checkSuspended();if(this.bNoPatch&&t){throw h(new Error("Must not specify a group ID ("+t+") with $$noPatch"))}n.checkGroupId(t);if(typeof e==="function"||e&&typeof e==="object"){throw h(new Error("Not a primitive value"))}if(!this.bNoPatch&&this.vValue===undefined){throw h(new Error("Must not change a property before it has been read"))}if(this.vValue!==e){if(this.oCache){h(new Error("Cannot set value on this binding as it is not relative"+" to a sap.ui.model.odata.v4.Context"));return}i=this.bNoPatch?null:this.lockGroup(t,true,true);o=this.oContext.doSetProperty(this.sPath,e,i);o.catch(function(e){if(i){i.unlock(true)}h(e)});if(!o.isRejected()&&a.oModel.hasListeners("propertyChange")){a.oModel.firePropertyChange({context:a.oContext,path:a.sPath,promise:o.isPending()?o.getResult():undefined,reason:s.Binding,resolvedPath:r,value:e})}}};c.prototype.supportsIgnoreMessages=function(){return true};c.prototype.suspend=function(){throw new Error("Unsupported operation: suspend")};c.prototype.updateAfterCreate=function(){return this.checkUpdateInternal()};c.prototype.visitSideEffects=function(){};return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/_AnnotationHelperExpression",["../_AnnotationHelperBasics","sap/base/Log","sap/ui/base/BindingParser","sap/ui/base/ManagedObject","sap/ui/base/SyncPromise","sap/ui/performance/Measurement"],function(e,t,n,r,a,i){"use strict";var s="sap.ui.model.odata.v4.AnnotationHelper",o=[s],u=s+"/getExpression",l=/^{@i18n>[^\\{}:]+}$/,p={And:"&&",Eq:"===",Ge:">=",Gt:">",Le:"<=",Lt:"<",Ne:"!==",Not:"!",Or:"||"},c=false,m={"Edm.Boolean":"boolean","Edm.Byte":"number","Edm.Date":"Date","Edm.DateTimeOffset":"DateTimeOffset","Edm.Decimal":"Decimal","Edm.Double":"number","Edm.Guid":"string","Edm.Int16":"number","Edm.Int32":"number","Edm.Int64":"Decimal","Edm.SByte":"number","Edm.Single":"number","Edm.String":"string","Edm.TimeOfDay":"TimeOfDay"},f={Bool:"Edm.Boolean",Float:"Edm.Double",Date:"Edm.Date",DateTimeOffset:"Edm.DateTimeOffset",Decimal:"Edm.Decimal",Guid:"Edm.Guid",Int:"Edm.Int64",Int32:"Edm.Int32",String:"Edm.String",TimeOfDay:"Edm.TimeOfDay"},d={boolean:false,Date:false,DateTimeOffset:true,Decimal:true,number:falsefurn a.resolve().then(function(){h(e,t)})}function h(t,n){e.error(t,n,s)}y={adjustOperands:function(e,t){if(e.result!=="constant"&&e.category==="number"&&t.result==="constant"&&t.type==="Edm.Int64"){t.category="number"}if(e.result!=="constant"&&e.category==="Decimal"&&t.result==="constant"&&t.type==="Edm.Int32"){t.category="Decimal";t.type=e.type}},apply:function(t,n){var r=e.descend(t,"$Function","string");switch(r.value){case"odata.concat":return y.concat(n);case"odata.fillUriTemplate":return y.fillUriTemplate(n);case"odata.uriEncode":return y.uriEncode(n);default:return g(r,"unknown function: "+r.value)}},collection:function(t){var n;e.expectType(t,"array");n=t.value.map(function(n,r){return y.expressction(t){t=t.map(function(t){return e.resultToString(t,true,false,true)});return{result:"expression",value:"odata.collection(["+t.join(",")+"])"}})},concat:function(t){var n;e.expectType(t,"array");n=t.value.map(function(e,n){return y.parameter(t,a,i;r=t.asExsult==="expression"});a=n.filter(function(e){return e.type!=="edm:Null"}).map(function(n){if(r){y.wrapExpression(n)}return e.resultToString(n,r,t.complexBinding)});i=r?{result:"expression",value:a.join("+")}:{result:"composite",value:a.join("")};i.type="Edm.String";return i})},conditional:function(t,n){var r=t.complexBinding,i=r?Object.assign({},t,{complexBinding:false}):t;function s(t,n,r){return e.resultToString(y.wrapExpression(t),true,n,r)}return a.all([y.parameter(i,0,"Edm.Boolean"),y.parameter(t,1),n&&t.value.length===2?{result:"constant",type:"edm:Null",value:undefined}:y.parameter(t,2)]).then(function(e){var n=e[0],a=e[1],i=e[2],o=a.type;if(a.type==="edm:Null"){o=i.type}else if(i.type!=="edm:Null"&&a.type!==i.type){h(t,"Expected same type for second and third parameter, types are '"+a.type+"' and '"+i.type+"'")}return{result:"expression",type:o,value:s(n,false,true)+"?"+s(a,r)+":"+s(i,r)}})},constant:function(e,t){var n=e.value;if(t==="String"){if(l.test(n)){return{ignoreTypeInPath:true,result:"binding",type:"Edm.String",value:n.slice(1,-1)}}}return{result:"constant",type:f[t],value:n}},expression:function(t,n){var r=t.value,i=t,s;if(r===null){s="Null"}else if(typeof r==="boolean"){s="Bool"}else if(typeof r==="number"){s=isFinite(r)&&Math.floor(r)===r?"Int32":"Float"}else if(typeof r==="string"){s="String"}else if(Array.isArray(r)){return y.collection(t)}else{e.expectType(t,"object");if(r.$kind==="Property"){t.value=t.model.getObject(t.path+"@sapui.name");return y.path(t)}["$And","$Apply","$Date","$DateTimeOffset","$Decimal","$Float","$Eq","$Ge","$Gt","$Guid","$If","$Int","$Le","$Lt","$Name","$Ne","$Not","$Null","$Or","$Path","$PropertyPath","$TimeOfDay","$LabeledElement"].forEach(function(n){if(r.hasOwnProperty(n)){s=n.slice(1);i=e.descend(t,n)}})}switch(s){case"Apply":return y.apply(t,i);case"If":return y.conditional(i,n);case"Name":case"Path":case"PropertyPath":return y.path(i);case"Date":case"DateTimeOffset":case"Decimal":case"Guid":case"Int":case"String":case"TimeOfDay":e.expectType(i,"string");case"Bool":case"Float":case"Int32":return a.resolve(y.constant(i,s));case"And":case"Eq":case"Ge":case"Gt":case"Le":case"Lt":case"Ne":case"Or":return y.operator(i,s);case"Not":return y.not(i);case"Null":return a.resolve({result:"constant",type:"edm:Null",value:null});default:return g(t,"Unsupported OData expression")}},fetchCurrencyOrUnit:function(t,n,r,a){var i="sap.ui.model.odata.type.Unit",s="@@requestUnitsOfMeasure",o=t.model,u=t.path+"@Org.OData.Measures.V1.Unit/$Path",l=o.getObject(u);function p(n,r,a){return e.resultToString(y.pathResult(t,r,a,n),false,true)}if(!l){i="sap.ui.model.odata.type.Currency";s="@@requestCurrencyCodes";u=t.path+"@Org.OData.Measures.V1.ISOCurrency/$Path";l=o.getObject(u)}if(!l){return undefined}return o.fetchObject(u+"/$").then(function(e){var c=o.getObject(t.path+"@com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasureQuantity")?",constraints:{'skipDecimalsValidation':true}":"";return{result:"composite",type:i,value:(m[r]==="number"?"{formatOptions:{parseAsString:false},":"{")+"mode:'TwoWay',parts:["+p(a,r,n)+","+p(o.getConstraints(e,u),e.$Type,l)+",{mode:'OneTime',path:'/##"+s+"',targetType:'any'}"+"],type:'"+i+"'"+c+"}"}})},fetchDateTimeWithTimezone:function(t,n,r){var a=t.model,i=t.path+"@com.sap.vocabularies.Common.v1.Timezone/$Path",s=a.getObject(i);function o(n,r,a){return e.resultToString(y.pathResult(t,r,a,n),false,true)}if(!s){return undefined}return a.fetchObject(i+"/$").then(function(e){return{result:"composite",type:"sap.ui.model.odata.type.DateTimeWithTimezone",value:"{mode:'TwoWay',parts:["+o(r,"Edm.DateTimeOffset",n)+","+o(a.getConstraints(e,i),e.$Type,s)+"],type:'sap.ui.model.odata.type.DateTimeWithTimezone'}"}})},fillUriTemplate:function(t){var n=[],r,i;t.complexBinding=false;r=[y.parameter(t,0,"Edm.String")];for(i=1;i<t.value.length;i+=1){n[i]=e.descend(t,i,"object");r.push(y.expression(e.descend(n[i],"$LabeledElement",true)))}return a.all(r).then(function(r){var a,s=[],o="";s.push("odata.fillUriTemplate(",e.resultToString(r[0],true,false,true),",{");for(i=1;i<t.value.length;i+=1){a=e.property(n[i],"$Name","string");s.push(o,e.toJSON(a),":",e.resultToString(r[i],true,false,true));o=","}s.push("})");return{result:"expression",type:"Edm.String",value:s.join("")}})},formatOperand:function(t,n){if(t.result==="constant"){switch(t.category){case"boolean":case"number":return String(t.value)}}if(n){y.wrapExpression(t)}return e.resultToString(t,true,false,true)},getExpression:function(a){if(a.value===undefined){return undefined}i.average(u,"",o);if(!c&&r.bindingParser===n.simpleParser){t.warning("Compln(a).then(function(t){return e.resultToString(t,false,a.complexBinding)},function(t){if(t instanceof SyntaxError){return"Unsupport.escape(e.toErrorString(a.value))}throw t}).finally(function(){i.end(u)}).unwrap()},not:function(t){t.asExpression=true;t.complexBinding=false;return y.expression(t).then(function(t){return{result:"expression",type:"Edm.Boolean",value:"!"+e.resultToString(y.wrapExpression(t),true,false,true)}})},operator:function(e,t){var n=t==="And"||t==="Or"?"Edm.Boolean":undefined;e.complexBinding=false;return a.all([y.parameter(e,0,n),y.parameter(e,1,n)]).then(function(n){var r,a=n[0],i=n[1],s="",o,u;if(a.type!=="edm:Null"&&i.type!=="edm:Null"){a.category=m[a.type];i.category=m[i.type];y.adjustOperands(a,i);y.adjustOperands(i,a);if(a.category!==i.category){h(e,"Expected two comparable parameters but instead saw "+a.type+" and "+i.type)}switch(a.category){case"Decimal":s=",'Decimal'";break;case"DateTimeOffset":s=",'DateTime'";break}r=d[a.category]}o=y.formatOperand(a,!r);u=y.formatOperand(i,!r);return{result:"expression",type:"Edm.Boolean",value:r?"odata.compare("+o+","+u+s+")"+p[t]+"0":o+p[t]+u}})},parameter:function(t,n,r){var a=e.descend(t,n,true);return y.expression(a).then(function(e){if(r&&r!==e.type){h(a,"Expected "+r+" but instead saw "+e.type)}return e})},path:function(t){var n=t.ignoreAsPrefix,r=t.model,i,s=t.value;if(n&&s.startsWith(n)){s=s.slice(n.length)}e.expectType(t,"string");i=r.fetchObject(t.path+"/$");if(i.isPending()&&!t.$$valueAsPromise){i.caught();i=a.resolve()}return i.then(function(e){var n,a,i=e&&e.$Type;if(e&&t.complexBinding){a=r.getConstraints(e,t.path);n=i==="Edm.DateTimeOffset"?y.fetchDateTimeWithTimezone(t,s,a):y.fetchCurrencyOrUnit(t,s,i,a)}return n||y.pathResult(t,i,s,a)})},pathResult:function(e,t,n,r){return{constraints:r,formatOptions:t==="Edm.String"?Object.assign({parseKeepsEmptyString:true},e.formatOptions):e.formatOptions,parameters:e.parameters,result:"binding",type:t,value:e.prefix+n}},uriEncode:function(t){return y.parameter(t,0).then(function(t){return{result:"expression",type:"Edm.String",value:t.type==="Edm.String"?"odata.uriEncode("+e.resultToString(t,true,false,true)+","+e.toJSON(t.type)+")":"String("+e.resultToString(t,true,false,true)+")"}})},wrapExpression:function(e){if(e.result==="expression"){e.value="("+e.value+")"}return e}};return y},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_AggregationCache",["./_AggregationHelper","./_Cache","./_ConcatHelper","./_GroupLock","./_Helper","./_MinMaxHelper","sap/base/Log","sap/ui/base/SyncPromise"],function(e,t,n,r,i,o,a,s){"use strict";function l(r,o,a,l,u){var d=function(){},c=null,h,f=this;t.call(this,r,o,l,true);this.oAggregation=a;this.sDownloadUrl=t.prototype.getDownloadUrl.call(this,"");this.aElements=[];this.aElements.$byPredicate={};this.aElements.$count=undefined;this.aElements.$created=0;this.oCountPromise=undefined;if(l.$count){if(a.hierarchyQualifier){this.oCountPromise=new s(function(e){h=e});this.oCountPromise.$resolve=h}else if(a.grCountPromise=new s(function(e){c=function(t){e(parseInt(t.UI5__leaves))}})}}this.oFirstLevel=this.createGroupLevelCache(null,u||!!c);this.addKeptElement=this.oFirstLevel.addKeptElement;this.removeKeptElement=this.oFirstLevel.removeKeptElement;this.requestSideEffects=this.oFirstLevel.requestSideEffects;this.oGrandTotalPromise=undefined;if(u){this.oGrandTotalPromise=new s(function(t){n.enhanceCache(f.oFirstLevel,a,[c,function(n){var r;if(a["grandTotal like 1.84"]){e.removeUI5grand__(n)}e.setAnnotations(n,true,true,0,e.getAllProperties(a));if(a.grandTotalAtBottomOnly===false){r=Object.assign({},n,{"@$ui5.node.isExpanded":undefined});i.setPrivateAnnotation(n,"copy",r);i.setPrivateAnnotation(r,"predicate","($isTotal=true)")}i.setPrivateAnnotation(n,"predicate","()");t(n)},d])})}else if(c){n.enhanceCache(f.oFirstLevel,a,[c,d])}}l.prototype=Object.create(t.prototype);l.prototype.addElements=function(t,n,r,o){var a=this.aElements,l=this.oAggregation.hierarchyQualifier,u=this.oAggregation.$NodeProperty,d=this;function c(t,c){var h=a[n+c],f,p=i.getPrivateAnnotation(t,"predicate");if(h){if(h===t){return}e.beforeOverwritePlaceholder(h,t,r,o+c,u)}else if(n+c>=a.length){throw new Error("Array index out of bounds: "+(n+c))}f=a.$byPredicate[p];if(f&&f!==t&&!(f instanceof s)){if(!l){throw new Error("Duplicate predicate: "+p)}if(!f["@odata.etag"]||t["@odata.etag"]===f["@odata.etag"]){i.updateNonExisting(t,f)}else if(d.hasPendingChangesForPath(p)){throw new Error("Modified on client and on server: "+d.sResourcePath+p)}}a.$byPredicate[p]=a[n+c]=t;if(r){i.setPrivateAnnotation(t,"index",o+c);i.setPrivateAnnotation(t,"parent",r)}}if(n<0){throw new Error("Illegal offset: "+n)}if(Array.isArray(t)){t.forEach(c)}else{c(t,0)}};l.prototype.beforeRequestSideEffects=function(e){if(!this.oAggregation.hierarchyQualifier){throw new Error("Missing recursive hierarchy")}delete e.$apply;if(!e.$select.includes(this.oAggregation.$NodeProperty)){e.$select.push(this.oAggregation.$NodeProperty)}};l.prototype.beforeUpdateSelected=function(t,n){e.checkNodeProperty(this.aElements.$byPredicate[t],n,this.oAggregation.$NodeProperty,true)};l.prototype.collapse=function(t){var n,o=0,a,s=this.aElements,l=this.fetchValue(r.$cached,t).getResult(),u=l["@$ui5.node.level"],d=s.indexOf(l),c=d+1;function h(e){delete s.$byPredicate[i.getPrivateAnnotation(s[e],"predicate")];o+=1}n=e.getCollapsedObject(l);i.updateAll(this.mChangeListeners,t,l,n);a=i.getPrivateAnnotation(l,"descendants");if(a){u=this.oAggregation.expandTo}while(c<s.length){if(s[c]["@$ui5.node.level"]<=u){if(!a){break}a-=1;if(s[c]["@$ui5.node.isExpanded"]===false){a-=i.getPrivateAnnotation(s[c],"descendants")||0}}h(c);c+=1}if(this.oAggregation.subtotalsAtBottomOnly!==undefined&&Object.keys(n).length>1){h(c)}i.setPrivateAnnotation(l,"spliced",s.splice(d+1,o));s.$count-=o;return o};l.prototype.createGroupLevelCache=function(n,r){var o=this.oAggregation,a=n?n["@$ui5.node.level"]+1:1,s,u,d,c,h,f;if(o.hierarchyQualifier){h=Object.assign({},this.mQueryOptions)}else{s=e.getAllProperties(o);c=a>o.groupLevels.length;d=c?o.groupLevels.concat(Object.keys(o.group).sort()):o.groupLevels.slice(0,a);h=e.fject.keys(o.aggregate).some(function(e){return o.aggregate[e].subtotals})}if(n){h.$$filterBeforeAggregate=i.getPrivateAnnotation(n,"filter")+(h.$$filterBeforeAggregate?" and ("+h.$$filterBeforeAggregate+")":"")}if(!r){delete h.$count;h=e.buildApply(o,h,a)}h.$count=true;u=t.create(this.oRequestor,this.sResourcePath,h,true);u.calculateKeyPredicate=o.hierarchyQualifier?l.calculateKeyPredicateRH.bind(null,n,o):l.calculateKeyPredicate.bind(null,n,d,s,c,f);return u};l.prototype.expand=function(t,n,o){var a,l,u=this.aElements,d=typeof n==="string"?this.fetchValue(r.$cached,n).getResult():n,c,h=i.getPrivateAnnotation(d,"spliced"),f,p=this;if(n!==d){i.updateAll(this.mChangeListeners,n,d,e.getOrCreateExpandedObject(this.oAggregation,d))}if(h){i.deletePrivateAnnotation(d,"spliced");f=h.$stale;c=u.indexOf(d)+1;this.aElements=u.concat(h,u.splice(c));this.aElements.$byPredicate=u.$byPredicate;l=h.length;this.aElements.$count=u.$count+l;h.forEach(function(e){var t=i.getPrivateAnnotation(e,"predicate");if(!i.hasPrivateAnnotation(e,"placeholder")){if(f){p.turnIntoPlaceholder(e,t)}else{p.aElements.$byPredicate[t]=e;if(i.hasPrivateAnnotation(e,"expanding")){i.deletePrivateAnnotation(e,"expanding");l+=p.expand(r.$cached,e).getResult()}}}});return s.resolve(l)}a=i.getPrivateAnnotation(d,"cache");if(!a){a=this.createGroupLevelCache(d);i.setPrivateAnnotation(d,"cache",a)}return a.read(0,this.iReadLength,0,t,o).then(function(t){var r=p.aElements.indexOf(d)+1,o=d["@$ui5.node.level"],s=e.getCollapsedObject(d),u=p.oAggregation.subtotalsAtBottomOnly!==undefined&&Object.keys(s).length>1,c;if(!d["@$ui5.node.isExpanded"]){i.deletePrivateAnnotation(d,"spliced");return 0}if(!r){i.setPrivateAnnotation(d,"expanding",true);return 0}l=t.value.$count;if(i.hasPrivateAnnotation(d,"groupLevelCount")&&i.getPrivateAnnotation(d,"groupLevelCount")!==l){throw new Error("Unexpected structural change: groupLevelCount")}i.setPrivateAnnotation(d,"groupLevelCount",l);i.updateAll(p.mChangeListeners,n,d,{"@$ui5.node.groupLevelCount":l});if(u){l+=1}if(r===p.aElements.length){p.aElements.length+=l}else{for(c=p.aElements.length-1;c>=r;c-=1){p.aElements[c+l]=p.aElements[c];delete p.aElements[c]}}p.addElements(t.value,r,a,0);for(c=r+t.value.length;c<r+t.value.$count;c+=1){p.aElements[c]=e.createPlaceholder(o+1,c-r,a)}if(u){s=Object.assign({},s);e.setAnnotations(s,undefined,true,o,e.getAllProperties(p.oAggregation));i.setPrivateAnnotation(s,"predicate",i.getPrivateAnnotation(d,"predicate").slice(0,-1)+",$isTotal=true)");p.addElements(s,r+l-1)}p.aElements.$count+=l;return l},function(t){i.updateAll(p.mChangeListeners,n,d,e.getCollapsedObject(d));throw t})};l.prototype.fetchValue=function(e,t,n,r){var i=this;if(t==="$count"){if(this.oCountPromise){return this.oCountPromise}if(this.oAggregation.hierarchyQualifier||this.oAggregation.groupLevels.length){a.error("Failed to drill-down into $count, invalid segment: $count",this.toString(),"sap.ui.model.odata.v4.lib._Cache");return s.resolve()}return this.oFirstLevel.fetchValue(e,t,n,r)}return s.resolve(this.aElements.$byPredicate[t.split("/")[0]]).then(function(){i.registerChangeListener(t,r);return i.drillDown(i.aElements,t,e)})};l.prototype.getAllElements=function(e){var t;if(e){throw new Error("Unsupported path: "+e)}t=this.aElements.map(function(e){return i.hasPrivateAnnotation(e,"placeholder")?undefined:e})ts.$count;return t};l.prototype.getCreatedElements=function(e){return[]};l.prototype.getDownloadQueryOptions=function(t){if(this.oAggregation.hierarchyQualifier){if("$count"in t){t=Object.assign({},t);delete t.$count}}else{t=e.filterOrderby(t,this.oAggregation)}retrue)};l.prototype.getDownloadUrl=function(e,t){return this.sDownloadUrl};l.prototype.getValue=function(e){var t;t=this.fetchValue(r.$cached,e);if(t.isFulfilled()){return t.getResult()}t.caught()};l.prototype.isDeletingInOtherGroup=function(e){return false}venElements=function(t){var n={},r=this;t.forEach(function(e){n[e]=true});return this.aElements.filter(function(t){var o=i.getPrivateAnnotation(t,"predicate");if(n[o]){e.markSplicedStale(t);return true}r.turnIntoPlaceholder(t,o)})};l.prototype.read=function(e,t,n,r,o){var a,l,u=e,d=t,c,h,f=this.oGrandTotalPromise&&this.oAggregation.grandTotalAtBottomOnly!==true,p=[],g,v,m=this;function P(e,t){p.push(m.readGap(c,e,t,r.getUnlockedCopy(),o))}if(f&&!e&&t===1){if(n!==0){throw new Error("Unsupporock();return this.oGrandTotalPromise.then(function(e){return{value:[e]}})}if(this.aElements.$count===undefined){this.iReadLength=t+n;if(f){if(u){u-=1}else{d-=1}}p.push(this.readCount(r),this.readFirst(u,d,n,r,o))}else{for(g=e,v=Math.min(e+t,this.aElements.length);g<v;g+=1){l=this.aElements[g];a=i.hasPrivateAnnotation(l,"placeholder")?i.getPrivateAnnotation(l,"parent"):undefined;if(a!==c){if(h!==undefined){P(h,g);c=h=undefined}if(a){h=g;c=a}}else if(h!==undefined&&i.getPrivateAnnotation(l,"index")!==i.getPrivateAnnotation(this.aElements[g-1],"index")+1){P(h,g);h=g}}if(h!==undefined){P(h,g)}r.unlock()}return s.all(p).then(function(){var n=m.aElements.slice(e,e+t).map(function(e){return i.hasPrivateAnnotation(e,"placeholder")?undefined:e});n.$count=m.aElements.$count;return{value:n}})};l.prototype.readCount=function(e){var t,n=this.oCountPromise&&this.oCountPromise.$resolve,r;if(n){delete this.oCountPromise.$resolve;t=Object.assign({},this.mQueryOptions);delete t.$apply;delete t.$count;delete t.$expand;delete t.$orderby;if(this.oAggregation.search){t.$search=this.oAggregation.search}delete t.$select;r=this.sResourcePath+"/$count"+this.oRequestor.buildQueryString(null,t);return this.oRequestor.request("GET",r,e.getUnlockedCopy()).then(n)}};l.prototype.readFirst=function(t,n,r,o,a){var s=this;return this.oFirstLevel.read(t,n,r,o,a).then(function(n){var r,o,a=0,l;s.aElements.length=s.aElements.$count=n.value.$count;if(s.oGrandTotalPromise){s.aElements.$count+=1;s.aElements.length+=1;r=s.oGrandTotalPromise.getResult();switch(s.oAggregation.grandTotalAtBottomOnly){case false:a=1;s.aElements.$count+=1;s.aElements.length+=1;s.addElements(r,0);o=i.getPrivateAnnotation(r,"copy");s.addElements(o,s.aElements.length-1);break;case true:s.addElements(r,s.aElements.length-1);break;default:a=1;s.addElements(r,0)}}s.addElements(n.value,t+a,s.oFirstLevel,t);for(l=0;l<s.aElements.$count;l+=1){if(!s.aElements[l]){s.aElements[l]=e.createPlaceholder(s.oAggregation.expandTo>1?0:1,l-a,s.oFirstLevel)}}})};l.prototype.readGap=function(e,t,n,r,o){var a,s,l=e.getQueryOptions(),u=i.getPrivateAnnotation(this.aElements[t],"index"),d=this.aElements[t],c,h=this;if(l.$count){delete l.$count;e.setQueryOptions(l,true)}s=e.read(u,n-t,0,r,o).then(function(n){var r=false,i;if(d!==h.aElements[t]&&n.value[0]!==h.aElements[t]){r=true;t=h.aElements.indexOf(d);if(t<0){t=h.aElements.indexOf(n.value[0]);if(t<0){i=new Error("Collapse before read has finished");i.canceled=true;throw i}}}h.addElements(n.value,t,e,u);if(r){i=new Error("Collapse or expand before read has finished");i.canceled=true;throw i}});if(s.isPending()){for(c=t;c<n;c+=1){a=i.getPrivateAnnotation(this.aElements[c],"predicate");if(a){this.aElements.$byPredicate[a]=s}}}return s};l.prototype.refreshKeptElements=function(e,t){return this.oFirstLevel.refreshKeptElements.call(this,e,t,true)};l.prototype.reset=function(e,n,r,o,a){var l,u=this;if(a){throw new Error("Unsupported grouping via sorter")}e.forEach(function(e){var t=u.aElements.$byPredicate[e];if(i.hasPrivateAnnotation(t,"placeholder")){throw new Error("Unexpected placeholder")}delete t["@$ui5.node.isExpanded"];delete t["@$ui5.node.level"];delete t["@$ui5._"];i.setPrivateAnnotation(t,"predicate",e)});this.oAggregation=o;this.sDownloadUrl=t.prototype.getDownloadUrl.call(this,"");this.oFirstLevel.reset.call(this,e,n,r);if(n){this.oBackup.oCountPromise=this.oCountPromise;this.oBackup.oFirstLevel=this.oFirstLevel}this.oCountPromise=undefined;if(r.$count){this.oCountPromise=new s(function(e){l=e});this.oCountPromise.$resolve=l}this.oFirstLevel=this.createGroupLevelCache()};l.prototype.restore=function(e){if(e){this.oCountPromise=this.oBackup.oCountPromise;this.oFirstLevel=this.oBackup.oFirstLevel}this.oFirstLevel.restore.call(this,e)};l.prototype.toString=function(){return this.sDownloadUrl};l.prototype.turnIntoPlaceholder=function(t,n){if(i.hasPrivateAnnotation(t,"placeholder")){return}i.setPrivateAnnotation(t,"placeholder",1);e.markSplicedStale(t);delete this.aElements.$byPredicate[n];i.getPrivateAnnotation(t,"parent").drop(i.getPrivateAnnotation(t,"index"),n)};l.calculateKeyPredicate=function(t,n,r,o,a,s,l,u){var d;if(!(u in l)){return undefined}if(t){r.forEach(function(e){if(Array.isArray(e)){i.inheritPathValue(e,t,s)}else if(!(e in s)){s[e]=t[e]}})}d=o&&i.getKeyPredicate(s,u,l)||i.getKeyPredicate(s,u,l,n,true);i.setPrivateAnnotation(s,"predicate",d);if(!o){i.setPrivateAnnotation(s,"filter",i.getKeyFilter(s,u,l,n))}e.setAnnotations(s,o?undefined:false,a,t?t["@$ui5.node.level"]+1:1,t?null:r);return d};l.calculateKeyPredicateRH=function(t,n,r,o,a){var s,l,u=1,d,c;if(!(a in o)){return undefined}c=i.getKeyPredicate(r,a,o);i.setPrivateAnnotation(r,"predicate",c);if(a!==n.$metaPath){return c}switch(i.drillDown(r,n.$DrillStateProperty)){case"expanded":l=true;break;case"collapsed":l=false;i.setPrivateAnnotation(r,"filter",i.getKeyFilter(r,a,o));break;default:}i.deleteProperty(r,n.$DrillStateProperty);if(t){u=t["@$ui5.node.level"]+1}else{s=i.drillDown(r,n.$DistanceFromRootProperty);if(s){i.deleteProperty(r,n.$DistanceFromRootProperty);u=parseInt(s)+1}}e.setAnnotations(r,l,undefined,u);if(n.$LimitedDescendantCountProperty){d=i.drillDown(r,n.$LimitedDescendantCountProperty);if(d){i.deleteProperty(r,n.$LimitedDescendantCountProperty);if(d!=="0"){i.setPrivateAnnotation(r,"descendants",parseInt(d))}}}return c};l.create=function(n,r,i,a,s,u,d,c){var h,f;function p(){if("$expand"in a){throw new Error("Unsupported system query option: $expand")}if("$select"in a){throw new Error("Unsupported system query option: $select")}}if(s){h=e.hasGrandTotal(s.aggregate);f=s.groupLevels&&!!s.groupLevels.length;if(e.hasMinOrMax(s.aggregate)){if(h){throw new Error("Unsupported grand totals together with min/max")}if(f){throw new Error("Unsupported group levels together with min/max")}if(s.hierarchyQualifier){throw new Error("Unsupported recursive hierarchy together with min/max")}if(d){throw new Error("Unsupported $$sharedRequest together with min/max")}p();return o.createCache(n,r,s,a)}if(a.$filter&&(h&&!s["grandTotal like 1.84"]||f)){throw new Error("Unsupported system query option: $filter")}if(h||f||s.hierarchyQualifier){if(a.$search){throw new Error("Unsupported system query option: $search")}if(!s.hierarchyQualifier){p()}if(c){throw new Error("Unsupported grouping via sorter")}if(d){throw new Error("Unsupported $$sharedRequest")}return new l(n,r,s,a,h)}}if(a.$$filterBeforeAggregate){a.$apply="filter("+a.$$filterBeforeAggregate+")/"+a.$apply;delete a.$$filterBeforeAggregate}return t.create(n,r,a,u,i,d)};return l},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_Helper",["sap/base/Log","sap/base/util/deepEqual","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/uid","sap/ui/base/SyncPromise","sap/ui/thirdparty/URI"],function(e,t,n,r,i,a,u){"use strict";var o=/&/g,s=/^\w+$/,f="sap.ui.model.odata.v4.lib._Helper",c=/\=/g,l=/%29/g,d=/%28/g,p=/%27/g,g=/^(\$auto(\.\w+)?|\$direct|\w+)$/,h=/#/g,y=/\([^/]*|\/-?\d+/g,$=/\+/g,v=/'/g,m=/''/g,P=/\s+/g,b;b={addByPath:function(e,t,n){if(n){if(!e[t]){e[t]=[n]}else if(!e[t].includes(n)){e[t].push(n)}}},addChildrenWithAncestor:function(e,t,n){if(t.length){e.forEach(function(e){var r;if(t.includes(e)){n[e]=true;return}r=e.split("/");r.pop();while(r.length){if(t.indexOf(r.join("/"))>=0){n[e]=true;break}r.pop()}})}},addDeepCreatePromise:function(e){return new a(function(t,n){b.setPrivateAnnotation(e,"resolve",t);b.setPrivateAnnotation(e,"r|[];t.forEach(function(t){if(!e.$select.includes(t)){e.$select.push(t)}})},adjustTargets:function(e,t,n,r){var i=b.getAnnotationKey(e,".additionalTargets"),a;a=[e.target].concat(e[i]).map(function(e){return e&&b.getAdjustedTarget(e,t,n,r)}).filter(function(e){return e});e.target=a[0];if(i){e[i]=a.slice(1)}},adjustTargetsInError:function(e,t,n,r){if(!e.error){return}b.r.details){e.error.details.forEach(function(e){b.adjustTargets(e,t,n,r)})}},aggregateExpandSelect:function(e,t){if(t.$select){b.addToSelect(e,t.$select)}if(t.$expand){e.$expand=e.$expand||{};Object.keys(t.$expand).forEach(function(n){if(e.$expand[n]){b.aggregateExpandSelect(e.$expand[n],t.$expand[n])}else{e.$expand[n]=t.$expand[n]}})}},buildPath:function(){var e="",t,n;for(n=0;n<arguments.length;n+=1){t=arguments[n];if(t||t===0){if(e&&e!=="/"&&t[0]!=="("){e+="/"}e+=t}}return e},buildQuery:function(e){var t,n;if(!e){return""}t=Object.keys(e);if(t.length===0){return""}n=[];t.forEach(function(t){var r=e[t];if(Array.isArray(r)){r.forEach(function(e){n.push(b.encodePair(t,e))})}else{n.push(b.encodePair(t,r))}});return"?"+n.join("&")},buildSelect:function(e){var t={};if(!e||e.includes("*")){return true}e.forEach(function(e){var n=e.split("/"),r=n.length-1,i=t;n.some(function(e,t){if(t===r||n[t+1]==="*"){i[e]=true;return true}if(i[e]===true){return true}i=i[e]=i[e]||{}})});return t},checkGroupId:function(e,t,n){if(!t&&e===undefined||typeof e==="string"&&(t?s:g).test(e)){return}throw new Error((n||"Invalid group ID: ")+e)},clone:function e(t,n,r){var i;if(t===undefined||t===Infinity||t===-Infinity||Number.isNaN(t)){return t}i=JSON.stringify(t,n);return r?i:JSON.parse(i)},convertExpandSelectToPar){if(e.$select){e.$select.forEach(function(e){t.push(b.buildPath(r,e))})}if(e.$expand){Object.keys(e.$expand).forEach(function(t){n(e.$expand[t],b.buildPath(r,t))})}}n(e,"");return t},copyPrivateAnnotation:function(e,t,n){if(b.hasPrivateAnnotation(e,t)){if(b.hasPrivateAnnotation(n,t)){throw new Error("Must not overwrite: "+t)}b.setPrivateAnnotation(n,t,b.getPrivateAnnotation(e,t))}},createError:function(t,n,r,i){var a=t.responseText,u=t.getResponseHeader("Content-Type"),o,s=new Error(n+": "+t.status+" "+t.statusText),c=t.getResponseHeader("Retry-After"),l;s.status=t.status;s.statusText=t.statusText;s.requestUrl=r;s.resourcePath=i;if(t.status===0){s.message="Network error";return s}if(u){u=u.split(";")[0]}if(t.status===412){o=t.getResponseHeader("Preference-Applied");if(o&&o.replace(P,"")==="handling=strict"){s.strictHandlingFailed=true}else{s.isConcurrentModification=true}}if(c){l=parseInt(c);s.retryAfter=new Date(Number.isNaN(l)?c:Date.now()+l*1e3)}if(u==="application/json"){try{s.error=JSON.parse(a).error;s.message=s.error.message;if(typeof s.message==="object"){s.message=s.error.message.value}}catch(t){e.warning(t.toString(),a,f)}}else if(u==="text/plain"){s.message=a}return s},createGetMethod:function(e,t){return function(){var n=this[e].apply(this,arguments);if(n.isFulfilled()){return n.getResult()}else if(t){if(n.isRejected()){n.caught();throw n.getResult()}else{throw new Error("Result pending")}}}},createMissing:function(e,t){t.reduce(function(e,n,r){if(!(n in e)){e[n]=r+1<t.length?{}:null}return e[n]},e)},createRequestMethod:function(e){return function(){return Promise.resolve(this[e].apply(this,arguments))}},createTechnicalDetails:function(e){var t,n=e["@$ui5.error"],r=e["@$ui5.originalMessage"]||e,i={};if(n&&(n.status||n.cause)){n=n.cause||n;i.httpStatus=n.status;if(n.isConcurrentModification){i.isConcurrentModification=true}if(n.retryAfter){i.retryAfter=n.retryAfter}}if(!(r instanceof Error)){Object.defineProperty(i,"originalMessage",{enumerable:true,get:function(){if(!t){t=b.publicClone(r)}return t}})}return i},decomposeError:function(e,t,n){var r=e.error.details&&e.error.details.map(function(e){return b.getContentID(e)}),i=b.getContentID(e.error);return t.map(function(t,a){var u=new Error(e.message);function o(e,n){if(a===0&&!n){if(e.target){e.message=e.target+": "+e.message}delete e.target;return true}return n===t.$ContentID}u.error=b.clone(e.error);u.requestUrl=n+t.url;u.resourcePath=t.$resourcePath;u.status=e.status;u.statusText=e.statusText;if(!o(u.error,i)){u.error.$ignoreTopLevel=true}else{u.strictHandlingFailed=e.strictH){u.error.details=u.error.details.filter(function(e,t){return o(e,r[t])})}return u})},deepEqual:t,deletePrivateAnnotation:function(e,t){var n=e["@$ui5._"];if(n){delete n[t]}},deleteProperty:function(e,t){var n;if(t.includes("/")){n=t.split("/");t=n.pop();e=b.drillDown(e,n)}delete e[t]},deleteUpdating:function(e,t){var n=t;e.split("/").some(function(e){var t=n[e];if(t===null||Array.isArray(t)){return true}if(typeof t==="object"){n=t;return false}delete n[e+"@$ui5.updating"]})},drillDown:function(e,t){if(typeof t==="string"){t=t.split("/")}return t.reduce(function(e,t){return e&&t in e?e[t]:undefined},e)},encode:function(e,t){var n=encodeURI(e).replace(o,"%26").replace(h,encodePair:function(e,t){return b.encode(e,true)+"="+b.encode(t,false)},extractMessages:function(e){var t=[];function n(n,r,i){var a={additionalTargets:b.getAdditionalTargets(n),code:n.code,message:n.message,numericSeverity:r,technical:i||n.technical,"@$ui5.error":e,"@$ui5.originalMessage":n};Object.keys(n).forEach(function(t){if(t[0]==="@"){if(t.endsWith(".numericSeverity")){a.numericSeverity=n[t]}else if(t.endsWith(".longtextUrl")&&e.requestUrl&&n[t]){a.longtextUrl=b.makeAbsolute(n[t],e.requestUrl)}}});if(typeof n.target==="string"){if(n.target[0]==="$"||!e.resourcePath){a.message=n.target+": "+n.message}else{a.target=n.target}}a.transition=true;t.push(a)}if(e.error){if(!e.error.$ignoreTopLevel){n(e.error,4,true)}if(e.error.details){e.error.details.forEach(function(e){n(e)})}}else{n(e,4,true)}return t},extractMergeableQueryOptions:function(e){var t={};if("$expand"in e){t.$expand=e.$expand;e.$expand="~"}if("$select"in e){t.$select=e.$select;e.$select="~"}return t},fetchPropertyAndType:function(e,t){return e(t).then(function(n){if(n&&n.$kind==="NavigationProperty"){return e(t+"/").then(function(){return n})}return n})},filterPaths:functiob.getMetaPath(t);return e.every(function(e){return!b.hasPathPrefix(n,e)})})},fireChange:function(e,t,n,r){var i=e[t],a;if(i){for(a=0;a<i.length;a+=1){i[a].onChange(n,r)}}},fireChanges:function(e,t,n,r){Object.keys(n).forEach(function(i){var a=b.buildPath(t,i),u=n[i];if(u&&typeof u==="object"){b.fireChanges(e,a,u,r)}else{b.fireChange(e,a,r?undefined:u)}});b.fireChange(e,t,r?undefined:n)},formatLiteral:function(e,t){if(e===undefined){throw new Error("Illegal value: undefined")}if(e===null){return"null"}switch(t){case"Edm.Binary":return"binary'"+e+"'";case"Edm.Boolean":case"Edm.Byte":case"Edm.Double":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":case"Edm.Single":return String(e);case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return e;case"Edm.Duration":return"duration'"+e+"'";case"Edm.String":return"'"+String(e).replace(v,"''")+"'";default:throw new Error("Unsupported type: "+t)}},getAdditionalTargets:function(e){return b.getAnnotation(e,".additionalTargets")},getAdjustedTarget:function(e,t,n,r){var i,a,u;u=e.split("/");a=u.shift();if(a==="$Parameter"){e=u.join("/");a=u.shift()}if(t.$IsBound&&a===t.$Param.join("/"));return e}i=t.$Parameter.some(function(e){return a===e.$Name});if(i){e=n+"/"+e;return e}},getAnnotation:function(e,t){var n=b.getAnnotationKey(e,t);return n&&e[n]},getAnnotationKey:function(t,n,r){var i,a,u=(r||"")+"@";Object.keys(t).forEach(function(t){if(t.startsWith(u)&&t.endsWith(n)){if(i){e.warning("Cannot distinguish "+i+" from "+t,undefined,f);a=true}i=t}});return a?undefined:i},getContentID:function(e){return b.getAnnotation(e,".ContentID")},getKeyFilter:function(e,t,n,r){var i=[],a,u=b.getKeyProperties(e,t,n,r);if(!u){return undefined}for(a in u){i.push(a+" eq "+u[a])}return i.join(" and ")},getKeyPredicate:function(e,t,n,r,i){var a=b.getKeyProperties(e,t,n,r,true);if(!a){return undefined}r=Object.keys(a).map(function(e,t,n){var r=encodeURIComponent(a[e]);return i||n.length>1?encodeURIComponent(e)+"="+r:r});return"("+r.join(",")+")"},getKeyProperties:function(e,t,n,r,i){var a,u={};r=r||n[t].$Key;a=r.some(function(r){var a,o,s,f,c,l,d;if(typeof r==="string"){a=o=r}else{a=Object.keys(r)[0];o=r[a];if(!i){a=o}}c=o.split("/");f=c.pop();s=b.drillDown(e,c);d=s[f];if(d===undefined||f+"@odata.type"in s){return true}l=n[b.buildPath(t,c.join("/"))];d=b.formatLiteral(d,l[f].$Type);u[a]=d});return a?undefined:u},getMetaPath:function(e){if(e[0]==="/"){return e.replace(y,"")}if(e[0]!=="("){e="/"+e}return e.replace(y,"").slice(1)},getMissingPropertyPaths:function(e,t){return(t.$select||[]).concat(Object.keys(t.$expand||{})).filter(function(t){return b.isMissingProperty(e,t)})},getPredicates:function(e){var t,n=e.map(r);function r(e){var n=b.getPrivateAnnotation(e.getValue(),"predicate");if(!n){t=true}return n}return t?null:n},getPredicateIndex:function(e){var t=e?e.indexOf("(",e.lastIndexOf("/")):-1;if(t<0||!e.endsWith(")")){throw new Error("Not a list context path to an entity: "+e)}return t},getPrivateAnnotation:function(e,t){var n=e["@$ui5._"];return n&&n[t]},getQueryOptionsForPath:function(e,t){t=b.getMetaPath(t);if(t){t.split("/").some(function(t){e=e&&e.$expand&&e.$expand[t];if(!e||e===true){e={};return true}})}return e||{}},getRelativePath:function(e,t){if(t.length){if(!e.startsWith(t)){return undefined}e=e.slice(t.length);if(e){if(e[0]==="/"){return e.slice(1)}if(e[0]!=="("){return undefined}}}return e},getReturnValueContextPath:function(e,t){var n=e.slice(0,e.lastIn},hasPathPrefix:function(e,t){return b.getRelativePath(e,t)!==undefined},hasPrivateAnnotation:function(e,t){var n=e["@$ui5._"];return n?t in n:false},informAll:function(e,t,n,r,i){if(r===n){return}if(r&&typeof r==="object"){Object.keys(r).forEach(function(a){b.informAll(e,b.buildPath(t,a),n&&n[a],r[a],i)})}else{b.fireChange(e,t,!i&&r===undefined?null:r);r={}}if(n&&typeof n==="object"){Object.keys(n).forEach(function(a){if(!r.hasOwnProperty(a)){b.informAll(e,b.buildPath(t,a),n[a],undefined,i)}})}},inheritPathValue:function(e,t,n){e.forEach(function(r,i){var a=!(r in n);if(i+1<e.length){if(a){n[r]={}}t=t[r];n=n[r]}else if(a){n[r]=t[r]}})},intersectQueryOptions:function(e,t,r,i,a,u){var o=[],s={},f=u&&r(i+"/@com.sap.vocabularies.Common.v1.Messages/$Path").getResult(),c,l,d,p={};function g(e,t){var n=t.split("/");return n.every(function(t,a){return a===0&&e||t==="$count"||r(i+"/"+n.slice(0,a+1).join("/")).getResult().$kind==="Property"})}if(t.indexOf("")>=0){throw new Error("Unsupported empty navigation property path")}if(t.indexOf("*")>=0){d=(e&&e.$select||[]).slice();if(f&&!d.includes(f)){d.push(f)}}else if(e&&e.$select&&e.$select.indexOf("*")<0){b.addChildrenWithAncestor(t,e.$select,p);b.addChildrenWithAncestor(e.$select,t,p);if(f&&t.includes(f)){p[f]=true}d=Object.keys(p).filter(g.bind(null,true))}else{d=t.filter(g.bind(null,false))}if(e&&e.$expand){o=Object.keys(e.$expand);o.forEach(function(u){var o,f=i+"/"+u,c=b.buildPath(a,u),l={},d;b.addChildrenWithAncestor([u],t,l);if(!n(l)){s[u]=e.$expand[u];return}d=b.stripPathPrefix(u,t);if(d.length){if(r(f).getResult().$isCollection){throw new Error("Unsupported collection-valued navigation property "+f)}o=b.intersectQueryOptions(e.$expand[u]||{},d,r,f,c);if(o){s[u]=o}}})}if(!d.length&&n(s)){return null}c=Object.assign({},e,{$select:d});l=r(i).getResult();if(l.$kind==="NavigationProperty"&&!l.$isCollection){b.selectKeyProperties(c,r(i+"/").getResult()ction(e){return e&&e.$$aggregation&&!e.$$aggregation.hierarchyQualifier},isEmptyObject:n,isMissingProperty:function(e,t){vare,t){var i;if(Array.isArray(e)){return e.some(function(e){return r(e,t)})}i=e[n[t]];if(i&&typeof i==="object"&&t+1<n.length){return r(i,t+1)}return i===undefined}if(t.includes("*")){throw new Error("Unsupported property path "+t)}return r(e,0)},isSafeInteger:function(e){if(typeof e!=="number"||!isFinite(e)){return false}e=Math.abs(e);return e<=9007199254740991&&Math.floor(e)===e},isSelected:function(e,t){var n,r;if(!t){return false}if(t.$expand){for(n in t.$expand){r=b.getRelativePath(e,n);if(r){return b.isSelected(r,t.$expand[n])}}}return!t.$select||t.$select.includes("*")||t.$select.some(function(t){return b.hasPathPrefix(e,t)})},makeAbsolute:function(e,t){return new u(e).absoluteTo(t).toString().replace(p,"'").replace(d,"(").replace(l,")")},merge:r,mergeQueryOptions:function(e,t,n){var r;function i(t,n){if(n&&(!e||e[t]!==n)){if(!r){r=e?b.clone(e):{}}r[t]=n}}i("$orderby",t);if(n){i("$filter",n[0]);i("$$filterBeforeAggregate",n[1])}return r||e},namespace:function(e){var t;e=e.split("/")[0].split("(")[0];t=e.lastIndexOf(".");return t<0?"":e.slice(0,t)},parseLiteral:function(e,t,n){function r(r){if(!isFinite(r)){throw new Error(n+": Not a valid "+t+" literal: "+e)}return r}if(e==="null"){return null}switch(t){case"Edm.Boolean":return e==="true";case"Edm.Byte":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":return r(parseInt(e));case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return e;case"Edm.Double":case"Edm.Single":return e==="INF"||e==="-INF"||e==="NaN"?e:r(parseFloat(e));case"Edm.String":return e.slice(1,-1).replace(m,"'");default:throw new Error(n+": Unsupported type: "+t)}},publicClone:function(e,t,n){return b.clone(e,function(e,n){if(t?!e.startsWith("@$ui5."):e!=="@$ui5._"){return n}},n)},removeByPath:function(e,t,n){var r=e[t],i;if(r){i=r.indexOf(n);if(i>=0){if(r.length===1){delete e[t]}else{r.splice(i,1)}}}},resetInactiveEntity:function(e,t,n){var r=b.getPrivateAnnotation(n,"initialData"),i=b.getPrivateAnnotation(n,"postBody"),a=Object.assign({},i);Object.keys(i).forEach(function(e){if(e in r){n[e]=i[e]=b.clone(r[e])}else{delete i[e];delete n[e]}});b.informAll(e,t,a,i,true);b.updateAll(e,t,n,{"@$ui5.context.isInactive":true});b.getPrivateAnnotation(n,"context").setInactive()},resolveIfMatchHeader:function(e,t){var n=e&&e["If-Match"];if(n&&typeof n==="object"){n=n["@odata.etag"];e=Object.assign({},e);if(n===undefined){delete e["If-Match"]}else{e["If-Match"]=t?"*":n}}return e},restoreUpdatingProperties:function(e,t){var n=t||{};Object.keys(e||{}).forEach(function(r){if(r.startsWith("@")){return}if(Array.isArray(e[r])){return}if(typeof e[r]==="object"){n[r]=b.restoreUpdatingProperties(e[r],n[r])}if(e[r+"@$ui5.updating"]){n[r]=e[r];n[r+"@$ui5.updating"]=e[r+"@$ui5.updating"];t=n}});return t},selectKeyProperties:function(e,t){if(t&&t.$Key){b.addToSelect(e,t.$Key.map(function(e){if(typeof e==="object"){return e[Object.keys(e)[0]]}return e}))}},setAnnotation:function(e,t,n){if(n!==undefined){e[t]=n}else{delete e[t]}},setLanguage:function(e,t){if(t&&!e.includes("?sap-language=")&&!e.includes("&sap-language=")){e+=(e.includes("?")?"&":"?")+"sap-language="+b.encode(t)}return e},setPrivateAnnotation:function(e,t,n){var r=e["@$ui5._"];if(!r){r=e["@$ui5._"]={}}r[t]=n},strip=""){eturn t===e||t.startsWith(n)}).map(function(e){return e.slice(n.length)})},toArray:function(e){if(e===undefined||e===null){return[]}if(Array.isArray(e)){return e.slice()}return[e]},uid:i,updateAll:function(e,t,n,r){Object.keys(r).forEach(function(i){var a=b.buildPath(t,i),u=r[i],o=n[i];if(i==="@$ui5._"){b.setPrivateAnnotation(n,"predicate",b.getPrivateAnnotation(r,"predicate"))}else if(Array.isArray(u)){n[i]=u}else if(u&&typeof u==="object"){n[i]=b.updateAll(e,a,o||{},u)}else if(o!==u){n[i]=u;if(o&&typeof o==="object"){b.fireChanges(e,a,o,true)}else{b.fireChange(e,a,u)}}});return n},updateExisting:function(e,t,n,r){if(!r){return}Object.keys(n).forEach(function(i){var a=b.buildPath(t,i),u=n[i],o=r[i];if(i in r||i[0]==="#"){if(Array.isArray(o)){n[i]=o}else if(o&&typeof o==="object"){if(u){b.updateExisting(e,a,u,o)}else{n[i]=o;b.fireChanges(e,a,o,false)}}else if(u!==o){n[i]=o;if(u&&typeof u==="object"){b.fireChange(lter(function(e){return e[0]==="#"}).filter(function(e){return!(e in n)}).forEach(function(i){var a=r[i],u=b.buildPath(t,i);n[i]=a;b.fireChanges(e,u,a,false)})},updateNonExisting:function(e,t){Object.keys(t).forEach(function(n){var r=t[n],i;if(n in e){i=e[n];if(r&&i&&typeof r==="object"&&!Array.isArray(r)){b.updateNonExisting(i,r)}}else{e[n]=r}})},updateSelected:function(e,t,n,r,i,a,u){function o(e,t){var n;if(e===true){return true}if(e[t]){return e[t]}n=t.indexOf("@");if(n===0||n>0&&e[t.slice(0,n)]){return true}}function s(t,n,r,i){Object.keys(r).forEach(function(a){if(!(a in i)&&a.includes("@")&&!a.startsWith("@$ui5.")&&o(n,a)&&!a.endsWith("@$ui5.updating")){delete r[a];b.fireChange(e,b.buildPath(t,a),undefined)}});Object.keys(i).forEach(function(u){var f=b.buildPath(t,u),c=o(n,u),l,d=i[u],p,g=r[u];if(!c){return}if(u==="@$ui5._"){l=b.getPrivateAnnotation(i,"predicate");if(a&&a(t)){p=b.getPrivateAnnotation(r,"predicate");if(l!==p){throw new Error("Key predicate of '"+t+"' changed from "+p+" to "+l)}}else{b.setPrivateAnnotation(r,"predicate",l)}}else if(Array.isArray(d)){if(!(g&&g.$postBodyCollection)){r[u]=d}}else if(d&&typeof d==="object"&&!u.includes("@")){r[u]=s(f,c,g||{},d)}else if(g!==d&&!r[u+"@$ui5.updating"]){r[u]=d;if(g&&typeof g==="object"){b.fireChanges(e,f,g,true)}else if(c===true){b.fireChange(e,f,d)}}});if(u){return r}Object.keys(n).forEach(function(n){if(!(n in r)&&n!=="*"){r[n+"@$ui5.noData"]=true;b.fireChange(e,b.buildPath(t,n),undefined,true)}});return r}s(t,b.buildSelect(i),n,r)},updateTransientPaths:function(e,t,n){var r;for(r in e){if(r.includes(t)){e[r.replace(t,n)]=e[r];delete e[r]}}},wrapChildQueryOptions:function(t,r,i,a){var u="",o=r.split("/"),s,c=t,l={},d=l,p;if(r===""){return i}for(p=0;p<o.length;p+=1){c=b.buildPath(c,o[p]);u=b.buildPath(u,o[p]);if(o[p].endsWith("*")){s=null;continue}s=a(c).getResult();if(s.$kind==="NavigationProperty"){d.$expand={};d=d.$expand[u]=p===o.length-1?i:{};b.selectKeyProperties(d,a(c+"/").getResult());u=""}else if(s.$kind!=="Property"){return undefined}}if(!s||s.$kind==="Property"){if(!n(i)){e.error("Failed to enhance query options for auto-$expand/$select as the"+" child binding has query options, but its path '"+r+"' points to a structural property",JSON.stringify(i),f);return undefined}b.addToSelect(d,[u])}if("$apply"in i){e.debug("Cannot wrap $apply into $expand: "+r,JSON.stringify(i),f);return undefined}return l}};return b},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_Parser",[],function(){"use strict";var e="[=(),; \t\"']|%(09|20|22|27|28|29|2c|2C|3b|3B)",t="\\$\\w+",n="[a-zA-Z_\\u0080-\\uFFFF][\\w\\u0080-\\uFFFF]*",r="(?:[ \\t]|%09|%20)",i=new RegExp(r+"+","g"),a=new RegExp("^not"+r+"+"),s="("+r+"+)(and|eq|ge|gt|le|lt|ne|or)"+r+"+",o="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}",u="(?:\\*|%2[aA])",c=n+"(?:[./]"+n+")*"+"(?:[./]"+u+"|/\\$ref|/\\$count)?",p=u+"(?:/\\$ref)?",f=c+"|"+p,h='(?:[-+:./\\w"]|%2[bB])+',d=new RegExp("^(?:"+s+"|"+e+"|("+o+")|("+f+")|("+h+")|("+t+"))"),l=/^[0-9a-f]{2}$/i,v={ceiling:{ambiguousParameters:true},concat:{type:"Edm.String"},contains:{type:"Edm.Boolean"},day:{type:"Edm.Int32",ambiguousParameters:true},endswith:{type:"Edm.Boolean"},floor:{ambiguousParameters:true},hour:{type:"Edm.Int32",ambiguousParameters:true},indexof:{type:"Edm.Int32"},length:{type:"Edm.Int32"},minute:{type:"Edm.Int32",ambiguousParameters:true},month:{type:"Edm.Int32",ambiguousParameters:true},round:{ambiguousParameters:true},second:{type:"Edm.Int32",ambiguousParameters:true},startswith:{type:"Edm.Boolean"},substring:{type:"Edm.String"},tolower:{type:"Edm.String"},toupper:{type:"Edm.String"},trim:{type:"Edm.String"},year:{type:"Edm.Int32",ambiguousParameters:true}},y={"(":{lbp:9,led:function(e,t){var n,r;if(t.id!=="PATH"){this.error("Unexpected ",e)}n=v[t.value];if(!n){this.error("Unknown function ",t)}t.id="FUNCTION";if(n.type){t.type=n.type}t.parameters=[];do{this.advanceBws();r=this.expression(0);if(n.ambiguousParameters){r.ambiguous=true}t.parameters.push(r);this.advanceBws()}while(this.advanceIf(","));this.advanceBws();this.advance(")");return t},nud:function(){var e;this.advanceBws();e=this.expression(0);this.advanceBws();this.advance(")");return e}},not:{lbp:7,nud:function(e){e.precedence=7;e.right=this.expression(7);e.type="Edm.Boolean";return e}}};function m(e,t){y[e]={lbp:t,led:function(e,n){e.type="Edm.Boolean";e.precedence=t;e.le e}}}function g(e){y[e]={lbp:0,nud:function(e){e.precedence=99;return e}}}m("and",2);m("eq",3);m("ge",4);m("gt",4);m("le",4);m("lt",4);m("ne",3);m("or",1);g("PATH");g("VALUE");function w(){}w.prototype.advance=function(e){var t=this.current();if(e&&(!t||t.id!==e)){if(e==="OPTION"){e="system query option"}else if(e.length===1){e="'"+e+"'"}this.expected(e,t)}this.iCurrentToken+=1;return t};w.prototype.advanceIf=function(e){var t=this.current();if(t&&t.id=;w.prototype.current=function(){return this.aTokens[this.iCurrentToken]};w.prototype.error=function(e,t){var n;if(t){n=t.value;e+="'"+(n===" "?n:n.replace(i,""))+"' at "+t.at}else{e+="end .expected=function(e,t){this.error("Expected "+e+" but instead saw ",t)};w.prototype.finish=function(){if(this.iCurrentToken<this.aTokens.length){this.expected("end of input",this.aTokens[this.iCurrentToken])}};w.prototype.init=function(e){this.sText=e;this.aTokens=P(e);this.iCurrentToken=0};function E(){}E.prototype=Object.create(w.prototype);E.prototype.advanceBws=function(){var e;for(;;){e=this.current();if(!e||e.id!==" "&&e.id!=="\t"){return}this.advance()}};E.prototype.expression=function(e){var t,n,r;r=this.advance();if(!r){this.expected("expression")}t=this.getSymbolValue(r,"nud");if(!t){this.expected("expression",r)}n=t.call(this,r);r=this.current();while(r&&this.getSymbolValue(r,"lbp",0)>e){n=this.getSymbolValue(r,"led").call(this,this.advance(),n);r=this.current()}return n};E.prototype.getSymbolValue=function(e,t,n){var r=y[e.id];return r&&t in r?r[t]:n};E.prototype.parse=function(e){var t;this.init(e);t=this.expression(0);this.finish();return t};function x(){}x.prototype=Object.create(w.prototype);x.prototype.parse=function(e){var t,n={},r;this.init(e);this.advance("(");if(this.current().id==="VALUE"){n[""]=this.advance().value}else{do{t=this.advance("PATH").value;this.advance("=");r=this.advance("VALUE").value;n[t]=r}while(this.advanceIf(","))}this.advance(")");this.finish();return n};function b(){}b.prototype=Object.create(w.prototype);b.prototype.parse=function(e){var t;this.init(e);t=this.parseSystemQueryOption();this.finish();return t};b.prototype.parseAnythingWithBrackets=function(e){var t="",n={},r,i=this;function a(){for(;;){r=i.advance();if(!r||r.id===";"){i.expected("')'",r)}t+=r.value;if(r.id===")"){return}if(r.id==="("){a()}}}this.advance("=");for(;;){r=this.current();if(!r||r.id===")"||r.id===";"){break}t+=this.advance().value;if(r.id==="("){a()}}if(!t){this.expected("an option value",r)}n[e.value]=t;return n};b.prototype.parseExpand=function(){var e={},t,n,r,i;this.advance("=");do{i=null;t=this.advance("PATH").value.replace(/%2a/i,"*");if(this.advanceIf("(")){i={};do{n=this.parseSystemQueryOption();r=Object.keys(n)[0];i[r]=n[r]}while(this.advanceIf(";"));this.advance(")")}e[t]=i}while(this.advanceIf(","));return{$expand:e}};b.prototype.parseSelect=function(){var e,t,n=[],r;this.advance("=");do{r=this.advance("PATH");e=r.value.replace(/%2a/i,"*");if(this.advanceIf("(")){t="(";do{e+=t+this.advance("PATH").value;t=","}while(this.advanceIf(","));e+=this.advance(")").value}n.push(e)}while(this.advanceIf(","));return{$select:n}};b.prototype.parseSystemQueryOption=function(){var e=this.advance("OPTION");switch(e.value){case"$expand":return this.parseExpand();case"$select":retuhBrackets(e)}};function A(e){return String.fromCharCode(parseInt(e,16))}function I(e,t,n){var r;function i(t){var n=e[r];if(n==="%"&&e[r+1]==="2"&&e[r+2]==="7"){n="'";if(t){r+=2}}if(t){r+=1}return n}for(r=1;r<e.length;){if(i(true)==="'"){if(i(false)!=="'"){return e.slice(0,r)}i(true)}}throw new SyntaxError("Unterminated string at "+n+": "+t)}function T(e,t,n){var r,i,a=false,s;for(s=1;s<e.length;s+=1){if(a){a=false}else{r=e[s];if(r==="%"){i=e.slice(s+1,s+3);if(l.test(i)){r=A(i);s+=2}}if(r==='"'){return e.slice(0,s+1)}a=r==="\\"}}throw new SyntaxError("Unterminated string at "+n+": "+t)}function P(e){var t=1,n,r,i=e,s,o,u=[],c;while(i.length){r=d.exec(i);s=0;if(r){c=r[0];if(r[7]){n="OPTION"}else if(r[6]||r[4]){n="VALUE"}else if(r[5]){n="PATH";if(c==="false"||c==="true"||c==="null"){n="VALUE"}else if(c==="not"){r=a.exec(i);if(r){n="not";c=r[0]}}}else if(r[3]){n=A(r[3])}else if(r[2]){n=r[2];s=r[1].length}else{n=r[0]}if(n==='"'){n="VALUE";c=T(i,e,t)}else if(n==="'"){n="VALUE";c=I(i,e,t)}o={at:t+s,id:n,value:c}}else{throw new SyntaxError("Unknown character '"+i[0]+"' at "+t+": "+e)}i=i.slice(c.length);t+=c.length;u.push(o)}return u}return{buildFilterString:function(e){f{return""}if(e.parameters){r=e.parameters.map(function(e){return t(e,0)}).join(",");return e.value+"("+r+")"}r=t(e.left,e.precedence)+e.value+t(e.right,e.precedence);if(e.precedence<n){r="("+r+")"}return r}return t(e,0)},parseFilter:function(e){return(new E).parse(e)},pars x).parse(e)},parseSystemQueryOption:function(e){return(new b).parse(e)},sODataIdentifier:n,sWhitespace:r}},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_Requestor",["./_Batch","./_GroupLock","./_Helper","./_V2Requestor","sap/base/Log","sap/ui/base/SyncPromise","sap/ui/core/cache/CacheManager","sap/ui/core/Configuration","sap/ui/thirdparty/jquery"],function(e,t,r,n,o,i,s,a,u){"use strict";var c={Accept:"multipart/mixed"},h="sap.ui.model.odata.v4.optimisticBatch:",f="sap.ui.model.odata.v4.lib._Requestor",p="@com.sap.vocabularies.Common.v1.Messages",d=/(\$\w+)=~/g,l=/^\d+$/;function m(e){var t=Object.assign({},e);delete t["X-CSRF-Token"];return t}function y(e){var t;e=e.toLowerCase();for(t in this.headers){if(t.toLowerCase()===e){return this.headers[t]}}}function g(e,t,n,o){this.mBatchQueue={};this.bBatchSent=false;this.mHeaders=t||{};this.aLockedGroupLocks=[];this.oModelInterface=o;this.oOptimisticBatch=null;this.sQueryParams=r.buildQuery(n);this.mRunningChangeRequests={};this.iSessionTimer=0;this.iSerialNumber=0;this.sServiceUrl=e;this.vStatistics=n&&n["sap-statistics"];this.processSecurityTokenHandlers()}g.prototype.mFinalHeaders={"Content-Type":"application/json;charset=UTF-8;IEEE754Compatible=true"};g.prototype.mPredefinedPartHeaders={Accept:"application/json;odata.metadata=minimal;IEEE754Compatible=true"};g.prototype.mPredefinedRequestHeaders={Accept:"application/json;odata.metadata=minimal;IEEE754Compatible=true","OData-MaxVersion":"4.0","OData-Version":"4.0","X-CSRF-Token":"Fetch"};g.prototype.mReservedHeaders={accept:true,"accept-charset":true,"content-encoding":true,"content-id":true,"content-language":true,"content-length":true,"content-transfer-encoding":true,"content-type":true,"if-match":true,"if-none-match":true,isolation:true,"odata-isolation":true,"odata-maxversion":true,"odata-version":true,prefer:true,"sap-contextid":true};g.prototype.addChangeSet=function(e){var t=[],r=this.getOrCreateBatchQueue(e);t.iSerialNumber=this.getSerialNumber();r.iChangeSet+=1;r.splice(r.iChangeSet,0,t)};g.prototype.addChangeToGroup=function(e,t){var r;if(this.getGroupSubmitMode(t)==="Direct"){e.$resolve(this.request(e.method,e.url,this.lockGroup(t,this,true,true),e.headers,e.body,e.$submit,e.$cancel))}else{r=this.getOrCreateBatchQueue(t);r[r.iChangeSet].push(e)}};g.prototype.addQueryString=function(e,t,n){var o;n=this.convertQueryOptions(t,n,false,true);e=e.replace(d,function(e,t){var o=n[t];delete n[t];return r.encodePair(t,o)});o=r.buildQuery(n);if(!o){return e}return e+(e.includes("?")?"&"+o.slice(1):o)};g.prototype.batchRequestSent=function(e,t,r){var n,o;if(r){if(!(e inngeRequests)){this.mRunningChangeRequests[e]=[]}n=new i(function(e){o=e});n.$resolve=o;n.$requests=t;this.mRunningChangeRequests[e].push(n)}};g.prototype.batchResponseReceived=function(e,t,r){var n;if(r){n=this.mRunningChangeRequests[e].filter(function(e){if(e.$requests===t){e.$resolve();return false}return true});if(n.length){this.mRunningChangeRequests[e]=n}elunction(e,t,n,o){return r.buildQuery(this.convertQueryOptions(e,t,n,o))};g.prototype.cancelChanges=function(e,t){if(this.mRunningChangeRequests[e]){throw new Error("Cannot cancel the changes for group '"+e+"', the batch request is running")}this.cancelChangesByFilter(function(){return true},e,t);this.cancelGroupLocks(e)};g.prototype.cancelChangesByFilter=function(e,t,r){var n=false,o=this;function i(t){var i=o.mBatchQueue[t],s,a,u,c,h;for(h=i.length-1;h>=0;h-=1){if(Array.isArray(i[h])){a=i[h];for(c=a.length-1;c>=0;c-=1){s=a[c];if(s.$cancel&&e(s)){if(!s.$cancel(r)){u=new Error("Request canceled: "+s.method+" "+s.url+"; group: "+t);u.canceled=true;s.$reject(u);a.splice(c,1);n=true}}}}}}if(t){if(this.mBatchQueue[t]){i(t)}}else{for(t in this.mBatchQueue){i(t)}}return n};g.prototype.cancelGroupLocks=function(e){this.aLockedGroupLocks.forEach(function(t){if((!e||e===t.getGroupId())&&t.isModifying()&&t.isLocked()){t&&e.some(o)}function o(e){return e.headers.Prefer==="handling=strict"}if(o(e)&&t.slice(0,t.iChangeSet+1).some(n)){throw new Error("All requests with strict handling must belong to the same change set")}};g.prototype.checkForOpenRequests=function(){var e=this;if(!r.isEmptyObject(this.mRunningChangeRequests)||Obje.mBatchQueue[t].some(function(e){return Array.isArray(e)?e.length:true})})||this.aLockedGroupLocks.some(function(e){return e.isLocked()})){throw new Error("Unexpected open requests")}};g.prototype.checkHeaderNames=function(e){var t;for(t in e){if(this.mReservedHeaders[t.toLowerCase()]){throw new Error("Unsupported header: "+t)}}};g.prototype.cleanUpChangeSets=function(e){var t,n=false,o;function i(e){if(!s(e)){if(e.method==="DELEt.find(function(t){return t.headers["If-Match"]===e.headers["If-Match"]})){e.headers["If-Match"]={"@odata.etag":"*"}}t.push(e)}}function s(e){if(e.method!=="PATCH"){return false}return t.some(function(t){if(t.method==="PATCH"&&t.headers["If-Match"]===e.headers["If-Match"]){r.merge(t.body,e.body);e.$resolve(t.$promise);t.$mergeRequests(e.$mergeRequests());return true}})}for(o=e.iChangeSet;o>=0;o-=1){t=[];e[o].forEach(i);if(t.length===0){e.splice(o,1)}else if(t.length===1&&this.isChangeSetOptional()){e[o]=t[0]}else{e[o]=t}n=n||t.length>0}return n};g.prototype.clearSessionContext=function(e){if(e){this.oModelInterface.fireSessionTimeout()}delete this.mHeaders["SAP-ContextId"];if(this.iSessionTimer){clearInterval(this.iSessionTimer);this.iSessionTimer=0}};g.prototype.convertExpand=function(e,t){var r,n=[],o=this;if(!e||typeof e!=="object"){throw new Error("$expand must be a valid object")}r=Object.keys(e);if(t){r=r.sort()}r.forEach(function(r){var i=e[r];if(i&&typeof i==="object"){n.push(o.convertExpandOptions(r,i,t))}else{n.push(r)}});return n.join(",")};g.prototype.convertExpandOptios.doConvertSystemQueryOptions(undefined,t,function(e,t){n.push(e+"="+t)},undefined,r);return n.length?e+"("+n.join(";")+")":e};g.prototype.convertQueryOptions=function(e,t,r,n){var o={};if(!t){return undefined}this.doConvertSystemQueryOptions(e,t,function(e,t){o[e]=t},r,n);return o};g.prototype.convertResourcePath=function(e){return e};g.prototype.destroy=function(){this.clearSessionContext()};g.prototype.doCheckVersionHeader=function(e,t,r){var n=e("OData-Version"),o=!n&&e("DataServiceVersion");if(o){throw new Error("Expected 'OData-Version' header with value '4.0' but received"+" 'DataServiceVersion' header with value '"+o+"' in response for "+this.sServiceUrl+t)}if(n==="4.0"||!n&&r){return}throw new Error("Expected 'OData-Version' header with value '4.0' but received value '"+nis.sServiceUrl+t)};g.prototype.doConvertResponse=function(e,t){return e};g.prototype.doConvertSystemQueryOptions=function(e,t,r,n,o){var i=this;Object.keys(t).forEach(function(e){var s=t[e];if(n&&e[0]==="$"){return}switch(e){case"$expand":if(s!=="~"){s=i.convertExpand(s,o)}break;case"$select":if(Array.isArray(s)){s=o?s.slice().sort().join(","):s.join(",")}break;default:}r(e,s)})};g.prototype.fetchType=function(e,t){var r=this;if(t in e){return i.resolve(e[t])}return this.fetchTypeForPath(t).then(function(n){var o,s=[];if(n){o=r.getModelInterface().fetchMetadata(t+"/"+p).getResult();if(o){n=Object.create(n);n[p]=o}e[t]=n;(n.$Key||[]).forEach(function(n){if(typeof n==="object"){n=n[Object.keys(n)[0]];s.push(r.fetchType(e,t+"/"+n.slice(0,n.lastIndexOf("/"))))}});retypeForPath=function(e){return this.oformatPropertyAsLiteral=functiode=function(e){return this.oModelInterface.getGroupProperty(e,"submit")};g.prototype.getModelInterface=function(){return this.oModelInterface};g.prototype.getOrCreateBatchQueue=function(e){var t,r=this.mBatchQueue[e];if(!r){t=[];t.iSerialNumber=0;r=this.mBatchQueue[e]=[t];r.iChangeSet=0;this.oModelInterface.onCreateGroup(e)}return r};g.prototype.getPathAndAddQueryOptions=function(e,t,r){var n=ce(1,-5);if(t.$Parameter){t.$Parameter.forEach(function(e){i[e.$Name]=e})}if(t.$kind==="Function"){for(o in r){s=i[o];if(s){if(s.$isCollection){throw new Error("Unsupported collection-valued parameter: "+o)}n.push(encodeURIComponent(o)+"="+encodeURIComponent(a.formatPropertyAsLiteral(r[o],s)))}}e+="("+n.join(",")+")"}else{for(o in r){if(!(o in i)){delete r[o]}}}return e};g.prototype.getSerialNumber=function(){this.iSerialNumber+=1;return this.iSerialNumber};g.prototype.getServiceUrl=function(){return this.sServiceUrl};g.prototype.getUnlockedAutoCopy=function(e){if(this.getGroupSubmitMode(e.getGroupId())!=="API"){return e.getUnlockedCopy()}return this.lockGroup("$auto",e.getOwner())};g.prototype.hasOnlyPatchesWithoutSideEffects=function(e){return this.getGroupSubmitMode(e)==="Auto"&&!!this.mBatchQueue[e]ction(e){return e.method==="PATCH"&&e.headers.Prefer==="return=minimal"})})};g.prototype.hasChanges=function(e,t){var r=this.mBatchn Array.isArray(e)&&e.some(function(e){return e.headers["If-Match"]===t})})}return false};g.prototype.hasPendingChanges=function(e){var t=this;function r(t){if(!e){return Object.keys(t)}return e in t?[e]:[]}return r(this.mRunningChangeRequests).length>0||this.aLockedGroupLocks.some(function(t){var r=t.getGroupId();return(e===undefined||r===e)&&t.isModifying()&&t.isLocked()&&!r.startsWith("$inactive.")})||r(this.mBatchQueue).sction(e){return Array.isArray(e)&&e.some(function(e){return e.$cancel})})})};g.prototype.isActionBodyOptional=function(){return false};g.prototype.isBatchSent=function(){return this.bBatchSent};g.prototype.isChangeSetOptional=function(){return true};g.prototype.mergeGetRequests=function(e){var t=[],n=this;function o(e){return e.$queryOptions&&t.some(function(t){if(t.$queryOptions&&e.url===t.url&&e.$owner===t.$owner){r.aggregateExpandSelect(t.$queryOptions,e.$queryOptions);e.$resolve(t.$promise);if(t.$mergeRequests&&e.$mergeRequests){t.$mergeRequests(e.$mergeRequests())}return true}return false})}e.forEach(function(e){if(!o(e)){t.push(e)}});t.forEach(function(e){var t=e.$queryOptions;if(t){if(t.$expand&&!t.$select.length){t.$select=Object.keys(t.$expand).sort().slice(0,1)}e.url=n.addQueryString(e.url,e.$metaPath,t)}});t.iChangeSet=e.iChangeSet;return t};g.prototype.processBatch=function(e){var t,n=this.mBatchQueue[e]||[],o=this;function i(e){if(Array.isArray(e)){e.forEach(i)}else if(e.$submit){e.$submit()}}function s(e,t){if(Array.isArray(t)){t.forEach(s.bind(null,e))}else{t.$reject(e)}}function a(e,t){var n;e.forEach(function(e,i){var s,u,c,h=t[i];if(Array.isArray(h)){a(e,h)}else if(!h){s=new Error("HTTP request was not processed because the previous request failed");s.cause=n;s.$reported=true;e.$reject(s)}else if(h.status>=400){h.getResponseHeader=y;n=r.createError(h,"Communication error",e.url?o.sServiceUrl+e.url:undefined,e.$resourdecomposeError(n,e,o.sServiceUrl).forEach(function(t,r){e[r].$reject(t)})}else{e.$reject(n)}}else{if(h.responseText){try{o.doCheckVersionHeader(y.bind(h),e.url,true);c=o.doConvertResponse(JSON.parse(h.responseText),e.$metaPath)}catch(t){e.$reject(t);return}}else{c=e.method==="GET"?null:{}}o.reportHeaderMessages(e.url,y.call(h,"sap-messages"));u=y.call(h,"ETag");if(u){c["@odata.etag"]=u}e.$resolve(c)}})}delete this.mBatchQueue[e];i(n);t=this.cleanUpChangeSets(n);if(n.length===0){return Promise.resolve()}this.bBatchSent=true;n=this.mergeGetRequests(n);this.batchRequestSent(e,n,t);return this.sendBatch(n,e).then(function(e){a(n,e)}).catch(function(e){var t=new Error("HTTP request was se=e;s(t,n);throw e}ponseReceived(e,n,t)})};g.prototype.ready=function(){return i.resolve()};g.prototype.lockGroup=function(e,r,n,o,i){var s;s=new t(e,r,n,o,this.getSerialNumber(),i);if(n){this.aLockedGroupLocks.push(s)}return s};g.prototype.processOptimisticBatch=function(e,t){var r,n,i=this.oOptimisticBatch,a,u=this;if(!i){return}n=i.key;this.oOptimisticBatch=null;if(i.result){if(g.matchesOptimisticBatch(e,t,i.firstBatch.requests,i.firstBatch.groupId)){o.info("optimistic batch: success, response consumed",n,f);return i.result}s.del(h+n).catch(this.oModelInterface.getReporter());o.warning("optimistic batch: mismatch, response skipped",n,f)}a=this.oModelInterface.getOptimisticBatchEnabler();if(a){r=e.some(function(e){return Array.isArray(e)||e.method!=="GET"});if(r){o.warning("optimistic batch: modifying batch not supported",n,f);return}Promise.resolve(a(n)).then(function(r){if(r){return s.set(h+n,{groupId:t,requests:e.map(function(){o.info("optimistic batch: enabled, batch payload saved",n,f)})}o.info("optimistic batch: disabled",n,f)}).catch(u.oModelInterface.getReporter())}};g.prototype.processSecurityTokenHandlers=function(){var e=this;this.oSecurityTokenPromise=null;a.getSecurityTokenHandlers().some(function(t){var r=t(e.sServiceUrl);if(r!==undefined){e.oSecurityTokenPromise=r.then(function(t){e.checkHeaderNames(t);Object.assign(e.mHeaders,{"X-CSRF-Token":undefined},t);e.oSecurityTokenPromise=null}).catch(function(e){o.error("An error occurred within security token handler: "+t,e,f);throw e});return true}})};g.prototype.refreshSecurityToken=function(e){var t=this;if(!this.oSecurityTokenPromise){if(e!==this.mHeaders["X-CSRF-Token"]){return Promise.resolve()}this.oSecurityTokenPromise=new Promise(function(e,n){u.ajax(t.sServiceUrl+t.sQueryParams,{method:"HEAD",headers:Object.assign({},t.mHeaders,{"X-CSRF-Token":"Fetch"})}).then(function(r,n,o){var i=o.getResponseHeader("X-CSRF-Token");if(i){t.mHeaders["X-CSRF-Token"]=i}else{delete t.mHeaders["X-CSRF-Token"]}t.oSecurityTokenPromise=null;e()},function(e){t.oSecurityTokenPromise=null;n(r.createError(e,"Could not refresh security token"))})})}return this.oSecurityTokenPromise};g.prototype.relocate=function(e,t,r){var n=this.mBatchQueue[e],o=this,i=n&&n[0].some(function(e,i){if(e.body===t){o.addChangeToGroup(e,r);n[0].splice(i,1);return true}});if(!i){throw new Error("Request not found in group '"+e+"'")}};g.prototype.relocateAll=function(e,t,r){var n=0,o=this.mBatchQueue[e],i=this;if(o){o[0].slice().forEach(function(e){if(!r||e.headers["If-Match"]===r){i.addChangeToGroup(e,t);o[0].splice(n,1)}else{n+=1}})}};g.prototype.removeChangeRequest=function(e){var t=this.cancelChangesByFilter(function(t){return t.$promise===e});if(!t){throw new Error("Cannot reset the changes, the batch request is running")}};g.prototype.removePost=function(e,t){var n=r.getPrivateAnnotation(t,"postBody"),o=this.cancelChangesByFilter(function(e){return e.body===n},e);if(!o){throw new Error("Cannot reset the changes, the batch request is running")}};g.prototype.reportHeaderMessages=function(e,t){if(t){this.oModelInterface.reportTransitionMessages(JSON.parse(t),e)}};g.prototype.request=function(e,t,r,n,o,i,s,a,u,c,h,f,p){var d,l,m=r&&r.getGroupId()||"$direct",y,g=Infinity,v,S=this;if(m==="$cached"){l=new Error("Unexpected request: "+e+" "+t);l.$cached=true;throw l}if(r&&r.isCanceled()){if(s){s()}l=new Error("Request already canceled");l.canceled=true;return Promise.reject(l)}if(r){r.unlock();g=r.getSerialNumber()}t=this.convertResourcePath(t);u=u||t;if(this.getGroupSubmitMode(m)!=="Direct"){y=new Promise(function(r,l){var y=S.getOrCreateBatchQueue(m);v={method:e,url:t,headers:Object.assign({},S.mPredefinedPartHeaders,S.mHeaders,n,S.mFinalHeaders),body:o,$cancel:s,$mergeRequests:p,$metaPath:a,$owner:f,$queryOptions:h,$reject:l,$resolve:r,$resourcePath:u,$submit:i};if(e==="GET"){y.push(v)}else if(c){y[0].unshift(v)}else{d=y.iChangeSet;while(y[d].iSerialNumber>g){d-=1}S.checkConflictingStrictRequest(v,y,d);y[d].push(v)}});v.$promise=y;return y}if(this.vStatistics!==undefined){h=Object.assign({"sap-statistics":this.vStatistics},h)}if(h){t=S.addQueryString(t,a,h)}if(i){i()}return this.sendRequest(e,t,Object.assign({},n,this.mFinalHeaders),JSON.stringify(o),u).then(function(e){S.reportHeaderMessages(e.resourcePath,e.messages);return S.doConvertResponse(typeof e.body==="string"?JSON.parse(e.body):e.body,a)})};g.prototype.sendBatch=function(t,r){var n=e.serializeBatchRequest(t,this.getGroupSubmitMode(r)==="Auto"?"Group ID: "+r:"Group ID (API): "+r,this.oModelInterface.isIgnoreETag());return this.processOptimisticBatch(t,r)||this.sendRequest("POST","$batch"+this.sQueryParams,Object.assign(n.headers,c),n.body).then(function(t){if(t.messages!==null){throw new Error("Unexpected 'sap-messages' response header for batch request")}return e.deserializeBatchResponse(t.contentType,t.body)})};g.prototype.sendOptimisticBatch=function(){var e=window.location.href,t=this;s.get(h+e).then(function(r){var n={key:e};if(r){if(t.isBatchSent()){o.error("optimistic batch: #sendBatch called before optimistic batch "+"payload could be read",undefined,f);return}n.firstBatch=r;n.result=t.sendBatch(r.requests,r.groupId);o.info("optimistic batch: sent ",e,f)}t.oOptimisticBatch=n}).catch(this.oModelInterface.getReporter())};g.prototype.sendRequest=function(e,t,n,i,s){var a=this.sServiceUrl+t,c=this;return new Promise(function(h,p){function d(l){var m=c.mHeaders["X-CSRF-Token"];return u.ajax(a,{contentType:n&&n["Content-Type"],data:i,headers:Object.assign({},c.mPredefinedRequestHeaders,c.mHeaders,r.resolveIfMatchHeader(n,c.oModelInterface.isIgnoreETag())),method:e}).then(function(r,n,o){var i=o.getResponseHeader("ETag"),s=o.getResponseHeader("X-CSRF-Token");try{c.doCheckVersionHeader(o.getResponseHeader,t,!r)}catch(e){p(e);return}if(s){c.mHeaders["X-CSRF-Token"]=s}c.setSessionContext(o.getResponseHeader("SAP-ContextId"),o.getResponseHeader("SAP-Http-Session-Timeout"));if(!r){r=e==="GET"?null:{}}if(i&&typeof r==="object"){r["@odata.etag"]=i}h({body:r,contentType:o.getResponseHeader("Content-Type"),messages:o.getResponseHeader("sap-messages"),resourcePath:t})},function(e){var t=e.getResponseHeader("SAP-ContextId"),n=e.getResponseHeader("X-CSRF-Token"),i;if(!l&&e.staturCase()==="required"){c.refreshSecurityToken(m).then(function(){d(true)},p)}else{i="Communication error";if(t){c.setSessionContext(t,e.getResponseHeader("SAP-Http-Session-Timeout"))}else if(c.mHeaders["SAP-ContextId"]){i="Session not found on server";o.error(i,undefined,f);c.clearSessionContext(true)}p(r.createError(e,i,a,s))}})}if(c.oSecurityTokenPromise&&e!=="GET"){c.oSecurityTokenPromise.then(d)}else{d()}})};g.prototype.setSessionContext=function(e,t){var r=l.test(t)?parseInt(t):0,n=Date.now()+30*60*1e3,i=this;this.clearSessionContext();if(e){i.mHeaders["SAP-ContextId"]=e;if(r>=60){this.iSessionTimer=setInterval(function(){if(Date.now()>=n){i.clearSessionContext(true)}else{u.ajax(i.sServiceUrl+i.sQueryParams,{method:"HEAD",headers:{"SAP-ContextId":i.mHeaders["SAP-ContextId"]}}).fail(function(e){if(e.getResponseHeader("SAP-Err-Id")==="ICMENOSESSION"){o.error("Session not found on server",undefined,f);i.clearSessionContext(true)}})}},(r-5)*1e3)}else if(t!==null){o.warning("Unsupported SAP-Http-Session-Timeout header",t,f)}}};g.prototype.submitBatch=function(e){var t,r,n=this;r=i.all(this.aLockedGroupLocks.map(function(t){return t.waitFor(e)}));t=r.isPending();if(t){o.info("submitBatch('"+e+"') is waiting for locks",null,f)}return r.then(function(){if(n.hasOnlyPatchesWithoutSideEffects(e)){t=true;o.info("submitBatch('"+e+"') is",null,f);return new Promise(function(e){setTimeout(function(){e()},0)})}}).then(function(){if(t){o.info("submitBatch('"+e+"') continues",null,f)}n.aLockedGroupLocks=n.aLockedGroupLocks.filter(function(e){return e.isLocked()});return n.processBatch(e)})};g.prototype.waitForBatchResponseReceived=function(e){return i.resolve(this.mBatchQueue[e][0][0].$promise)};g.prototype.waitForRunningChangeRequests=function(e){var t=this.mRunningChangeRequests[e];if(t){return t.length>1?i.all(t):t[0]}return i.resolve()};g.matchesOptimisticBatch=function(e,t,n,o){return t===o&&e.length===n.length&&e.every(function(e,t){return e.url===n[t].url&&r.deepEqual(m(e.headers),n[t].headers)})};g.create=function(e,t,r,o,i){var s=new g(e,r,o,t);if(i==="2.0"){n(s)}return s};return g},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_V2MetadataConverter",["./_Helper","./_MetadataConverter","sap/base/Log"],function(t,e,a){"use strict";var o="sap.ui.model.odata.v4.lib._V2MetadataConverter",n=/^(?:DELETE|GET|MERGE|PATCH|POST|PUT)$/,i="http://schemas.microsoft.com/ado/2007/06/edmx",r="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata",s="http://www.sap.com/Protocols/SAPData",p={creatable:{property:"Insertable",term:"@Org.OData.Capabilities.V1.InsertRestrictions"},deletable:{property:"Deletable",term:"@Org.OData.Capabilities.V1.DeleteRestrictions"},"deletable-path":{property:"Deletable",term:"@Org.OData.Capabilities.V1.DeleteRestrictions"},"field-control":{term:"@com.sap.vocabularies.Common.v1.FieldControl"},heading:{term:"@com.sap.vocabularies.Common.v1.Heading"},label:{term:"@com.sap.vocabularies.Common.v1.Label"},precision:{term:"@Org.OData.Measures.V1.Scale"},quickinfo:{term:"@com.sap.vocabularies.Common.v1.QuickInfo"},"requires-filter":{property:"RequiresFilter",term:"@Org.OData.Capabilities.V1.FilterRestrictions"},searchable:{property:"Searchable",term:"@Org.OData.Capabilities.V1.SearchRestrictions"},text:{term:"@com.sap.vocabularies.Common.v1.Text"},topable:{term:"@Org.OData.Capabilities.V1.TopSupported"},updatable:{property:"Updatable",term:"@Org.OData.Capabilities.V1.UpdateRestrictions"},"updatable-path":{property:"Updatable",term:"@Org.OData.Capabilities.V1.UpdateRestrictions"}},c={bday:{TermName:"Contact"},city:{Path:"adr",TermName:"Contact",V4Attribute:"locality"},country:{Path:"adr",TermName:"Contact"},email:{Path:"address",TermName:"Contact",V4Attribute:"uri",typeMapping:{home:"home",pref:"preferred",work:"work"},v4EnumType:"com.sap.vocabularies.Communication.v1.ContactInformationType",v4PropertyAnnotation:"@com.sap.vocabularies.Communication.v1.IsEmailAddress"},familyname:{Path:"n",TermName:"Contact",V4Attribute:"surname"},givenname:{Path:"n",TermName:"Contact",V4Attribute:"given"},honorific:{Path:"n",TermName:"Contact",V4Attribute:"prefix"},middlename:{Path:"n",TermName:"Contact",V4Attribute:"additional"},name:{TermName:"Contact",V4Attribute:"fn"},nickname:{TermName:"Contact"},note:{TermName:"Contact"},org:{TermName:"Contact"},"org-role":{TermName:"Contact",V4Attribute:"role"},"org-unit":{TermName:"Contact",V4Attribute:"orgunit"},photo:{TermName:"Contact"},pobox:{Path:"adr",TermName:"Contact"},region:{Path:"adr",TermName:"Contact"},street:{Path:"adr",TermName:"Contact"},suffix:{Path:"n",TermName:"Contact"},tel:{Path:"tel",TermName:"Contact",V4Attribute:"uri",typeMapping:{cell:"cell",fax:"fax",home:"home",pref:"preferred",video:"video",voice:"voice",work:"work"},v4EnumType:"com.sap.vocabularies.Communication.v1.PhoneType",v4PropertyAnnotation:"@com.sap.vocabularies.Communication.v1.IsPhoneNumber"},title:{TermName:"Contact"},zip:{Path:"adr",TermName:"Contact",V4Attribute:"code"},class:{TermName:"Event"},dtend:{TermName:"Event"},dtstart:{TermName:"Event"},duration:{TermName:"Event"},fbtype:{TermName:"Event"},location:{TermName:"Event"},status:{TermName:"Event"},transp:{TermName:"Event"},wholeday:{TermName:"Event"},body:{TermName:"Message"},from:{TermName:"Message"},received:{TermName:"Message"},sender:{TermName:"Message"},subject:{TermName:"Message"},completed:{TermName:"Task"},due:{TermName:"Task"},"percent-complete":{TermName:"Task",V4Attribute:"percentcomplete"},priority:{TermName:"Task"}},l={fiscalyear:"@com.sap.vocabularies.Common.v1.IsFiscalYear",fiscalyearperiod:"@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod",year:"@com.sap.vocabularies.Common.v1.IsCalendarYear",yearmonth:"@com.sap.vocabularies.Common.v1.IsCalendarYearMonth",yearmonthday:"@com.sap.vocabularies.Common.v1.IsCalendarDate",yearquarter:"@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter",yearweek:"@com.sap.vocabularies.Common.v1.IsCalendarYearWeek",url:"@Org.OData.Core.V1.IsURL"};function m(e,a){var o=e.oAnnotatable;if(o){a=t.buildPath(o.sPath,a)}this.oConverter=e;this.sPath=a;this.oParent=o;this.mSapAttributForTarget=null}m.protype.consume=function(t){return this.oConverter.consumeSapAnnotation(t)};m.prototype.convert=function(t,e){var a,o;if(e===undefined||e===""){return}o=p[t];if(o.property){a=this.getOrCreateAnnotationRecord(o.term);a[o.property]=unction(t){return this.oConverter.getOrCreateObject(this.getTarget(),t)};m.prototype.getTarget=function(){if(!this.mAnnotationsForTarget){this.mAnnotationsForTarget=this.oConverter.convertedV2Annota;m.prototype.peek=function(t){return this.oConverter.mSapAnnotations[t]};function u(){this.association=null;this.associations={};this.associationSet=null;this.associationSets=[];this.aBoundOperations=[];this.constraintRole=null;this.convertedV2Annotations={};this.defaultEntityContainer=null;this.mEntityContainersOfSchema={};this.mEntityType2EntitySetAnnotation={};this.mProperty2Semantics={};this.sPropertyName=null;this.navigationProperties=[];this.mSapAnnotations={};this.sTypeName=null;this.mProperty2Unit={};e.call(this)}u.prototype=Object.create(e.prototype);u.prototype.collectSapAnnotations=function(t){var e,a=t.attributes,o,n;this.mSapAnnotations={};for(o=0,n=a.length;o<n;o+=1){e=a.item(o);if(e.namespaceURI===s&&e.localName!=="content-version"){this.){var e=this.mSapAnnotations[t];delete this.mSapAnnotations[t];return e};u.prototype.convertEntitySetAnnotation=function(t,e){var n,i;switch(e){case"creatable":case"deletable":case"updatable":if(t.peek(e)==="false"){t.convert(e,false)}break;case"deletable-path":case"updatable-path":n=e.slice(0,9);i=t.consume(e);if(t.peek(n)){t.convert(e,false);a.warning("Inconsistent metadata in '"+this.url+"'","Use either 'sap:"+n+"' or 'sap:"+n+"-path'"+" at entity set '"+t.sPath+"'",o)}else{t.convert(e,{$Path:i})}break;case"label":this.convertLabel(t);break;case"pageable":i=t.consume(e);if(i==="false"){t.annotate("@Org.OData.Capabilities.V1.SkipSupported",false);t.annotate("@Org.OData.Capabilities.V1.TopSupported",false)}break;case"requires-filter":i=t.consume(e);if(i==="true"){t.convert(e,true)}break;case"topable":i=t.consume(e);if(irototype.convertLabel=function(t){t.convert("label",t.consume("label"))};u.prototype.convertPropertyAnnotation=function(t,e){var a;switch(e){case"heading":case"label":case"quickinfo":t.convert(e,t.consume(e));break;case"field-control":case"precision":case"text":t.convert(e,{$Path:t.consume(e)});break;case"aggregation-role":a=t.consume(e);if(a==="dimension"){t.annotate("@com.sap.vocabularies.Analytics.v1.Dimension",true)}else if(a==="measure"){t.annotate("@com.sap.vocabularies.Analytics.v1.Measure",true)}break;case"display-format":a=t.consume(e);if(a==="NonNegative"){t.annotate("@com.sap.vocabularies.Common.v1.IsDigitSequence",true)}else if(a==="UpperCase"){t.annotate("@com.sap.vocabularies.Common.v1.IsUpperCase",true)}break;case"semantics":this.convertPropertySemanticsAnnotation(t);break;case"unit":this.mProperty2Unit[t.sPath]=t.consume("unit");break;case"visible":a=t.consume(e);if(a==="false"){t.annotate("@com.sap.vocabularies.UI.v1.Hidden",true);t.annotate("@com.sap.vocabularies.Common.v1.FieldControl",{$EnumMember:"com.sap.vocabularies.Common.v1.FieldControlType/Hidden"})}break;default:}};u.prototype.convertPropertySemanticsAnnotation=function(t){var e,n,i,r,s,p=t.peek("semantics").split(";"),m=p[0],u=c[m];if(m==="unit-of-measure"||m==="currency-code"){this.mProperty2Semantics[t.sPath]=t.consume("semantics")}else if(l[m]){t.annotate(l[m],true);t.consume("semantics")}else if(u){i={$Path:this.sPropertyName};e=t.oParent.getOrCreateAnnotationRecord("@com.sap.vocabularies.Communication.v1."+u.TermName);if(u.Path){s=this.getOrCreateObject(e,u.Path);s[u.V4Attribute||m]=i;if(u.v4PropertyAnnotation){t.annotate(u.v4PropertyAnnotation,true);if(p[1]){r=[];n=p[1].split("=")[1];n.split(",").forEach(function(t){var e=u.typeMapping[t];if(e){r.push(u.v4EnumType+"/"+e)}else{a.warning("Unsupported semantic type: "+t,undefined,o)}});if(r.length){s.type={EnumMember:r.join(" ")}}}e[u.Path]=[s]}else{e[u.Path]=s}}else{e[u.V4Attribute||m]=i}t.consume("semantics")}};u.prototype.finalize=function(){this.result.$Version="4.0";this.setDefaultEntityContainer();this.updateNavigationPropertiesAndCreateBindings();this.processBoundOperations();this.processUnitConversion()};u.prototype.mergeAnnotations=function(t,e){var a;for(a in t){if(a in e){e[a]=Object.assign(t[a],e[a])}else{e[a]=t[a]}}};u.prototype.postProcessSchema=function(e,a){var o,n,i,r,s,p;for(i in this.mEntityContainersOfSchema){n=this.mEntityContainersOfSchema[i];for(s in n){r=n[s];if(r.$kind!=="EntitySet"){continue}p=i+"/"+s;o=t.merge(this.convertedV2Annotations[p]||{},this.mEntityType2EntitySetAnnotation[r.$Type]);if(!t.isEmptyObject(o)){this.convertedV2Annotations[p]=o}}}if(this.bIgnoreAnnotations){if(!t.isEmptyObject(this.convertedV2Annotations)){this.schema.$Annotations={}}}else if(this.schema.$Annotations){this.mergeAnnotations(this.convertedV2Annotations,this.schema.$Annotations)}else if(!t.isEmptyObject(this.convertedV2Annotations)){this.schema.$Annotations=this.convertedV2Annotations}this.convertedV2Annotations={};this.mEntityContainersOfSchema={}};u.prototype.processAssociation=function(t){var e=this.namespace+t.getAttribute("Name");this.associations[e]=this.association={referentialConstraint:null,roles:{}}};u.prototype.processAssociationEnd=function(t){var e=t.getAttribute("Role");this.association.roles[e]={multiplicity:t.getAttribute("Multiplicity"),propertyName:undefined,typeName:this.resolveAlias(t.getAttribute("Type"))}};u.prototype.processAssociationSet=function(t){var e={associationName:this.resolveAlias(t.getAttribute("Association")),ends:[],entityContainer:this.entityContainer};this.associationSet=e;this.associationSets.push(e);this.consumeSapAnnotation("creatable");this.consumeSapAnnotation("deletable");this.consumeSapAnnotation("updatable")};u.prototype.processAssociationSetEnd=function(t){this.associationSet.ends.push({entitySetName:t.getAttribute("EntitySet"),roleName:t.getAttribute("Role")})};u.prototype.processComplexType=function(t){this.processType(t,{$kind:"ComplexType"})};u.prototype.processDataServices=function(t){if(t.getAttributeNS(r,"DataServiceVersion")!=="2.0"){throw new Error(this.url+': expected DataServiceVersion="2.0": '+h(t))}};u.prototype.processDependent=function(t){var e=this.association.referentialConstraint;this.constraintRole=e.dependent={roleName:t.getAttribute("Role")}};u.prototype.processElement=function(t,e){this.collectSapAnnotations(t);if(e){e.call(this,t)}this.warnUnsupportedSapAnnotations(t)};u.prototype.processEntityContainer=function(t){var e=this.namespace+t.getAttribute("Name");this.mEntityContainersOfSchema[e]=this.entityContainer={$kind:"EntityContainer"};this.addToResult(e,this.entityContainer);if(t.getAttributeNS(r,"IsDefaultEntityContainer")==="true"){this.defaultEntityContainer=e}this.v2annotatable(e)};u.prototype.processEntitySet=function(t){var e,a=t.getAttribute("Name");this.entityContainer[a]=this.entitySet={$kind:"EntitySet",$Type:this.resolveAlias(t.getAttribute("EntityType"))};e=this.v2annotatable(a,this.convertEntitySetAnnotation);e.consume("creatable");e.consume("deletable");e.consume("updatable");if(e.consume("searchable")!=="true"){e.convert("searchable",false)}};u.prototype.processEntityType=function(t){var e={$kind:"EntityType"},a=this;this.processType(t,e);this.processAttributes(t,e,{Abstract:this.setIfTrue,BaseType:function(t){return t?a.resolveAlias(t):undefined}});this.convertLabel(this.oAnnotatable)};u.prototype.processEntityTypeKeyPropertyRef=function(t){var e=t.getAttribute("Name");this.getOrCreateArray(this.type,"$Key").push(e)};u.prototype.processFacetAttributes=function(t,e){var a=this;this.processAttributes(t,e,{DefaultValue:this.setValue,MaxLength:function(t){return t==="Max"?undefined:a.setNumber(t)},Nullable:this.setIfFalse,Precision:this.setNumber,Scale:this.setNumber,Unicode:this.setIfFalse});if(t.getAttribute("FixedLength")==="false"){e.$Scale="variable"}};u.prototype.processFunctionImport=function(t){var e,i=t.getAttributeNS(r,"HttpMethod"),s=i!=="GET"?"Action":"Function",c,l=t.getAttribute("Name"),m={$kind:s},u={$kind:s+"Import"},h=this.namespace+l,y=t.getAttribute("ReturnType"),f;u["$"+s]=h;this.processAttributes(t,u,{EntitySet:this.setValue});if(y){m.$ReturnType=f={};this.processTypedCollection(y,f)}if(!n.test(i)){a.warning("Unsupported HttpMethod at FunctionImport '"+l+"', removing this FunctionImport",undefined,o);this.consumeSapAnnotation("action-for");this.consumeSapAnnotation("applicable-path")}else{if(i!=="GET"&&i!=="POST"){m.$v2HttpMethod=i}this.addToResult(h,[m]);e=this.consumeSapAnnotation("action-for");if(e){m.$IsBound=true;m.$Parameter=[{$Name:null,$Nullable:false,$Type:this.resolveAlias(e)}];this.aBoundOperations.push(m);this.consumeSapAnnotation("applicable-path");c=this.consumeSapAnnotation("label");if(c){m[p["label"].term]=c}}else{this.entityContainer[l]=u;this.v2annotatable(l);this.convertLabel(this.oAnnotatable)}}this.oOperation=m};u.prototype.processParameter=function(t){var e,a=this.oOperation,o={$Name:t.getAttribute("Name")};this.processFacetAttributes(t,o);this.processTypedCollection(t.getAttribute("Type"),o);this.getOrCreateArray(a,"$Parameter").push(o);e=this.consumeSapAnnotation("label");if(e){o[p["label"].term]=e}};u.prototype.processPrincipal=function(t){var e=this.association.referentialConstraint;this.constraintRole=e.principal={rorentialConstraint=function(t){this.association.referyRef=function(t){this.constraintRole.propertyRef=t.getAttribute("Name")};u.prototype.processSchema=function(t){var e=this.consumeSapAnnotation("schema-version");this.namespace=t.getAttribute("Namespace")+".";this.schema={$kind:"Schema"};this.addToResult(this.namespace,this.schema);if(e){this.schema["@Org.Odata.Core.V1.SchemaVersion"]=e}};u.prototype.processType=function(t,e){var a=this.namespace+t.getAttribute("Name");this.sTypeName=a;this.type=e;this.addToResult(a,e);this.v2annotatable(a)};u.prototype.processTypedCollection=function(t,e){var a=this.rCollection.exec(t);if(a){e.$isCollection=true;t=a[1]}if(!t.includes(".")){t="Edm."+t}switch(t){case"Edm.DateTime":e.$v2Type=t;if(this.mSapAnnotations["display-format"]==="Date"){t="Edm.Date";delete e.$Precision}else{t="Edm.DateTimeOffset"}break;case"Edm.Float":e.$v2Type=t;t="Edm.Single";break;case"Edm.Time":e.$v2Type=t;t="Edm.TimeOfDay";break;default:t=this.resolveAlias(t)}e.$Type=t};u.prototype.processTypeNavigationProperty=function(t){var e=this.consumeSapAnnotation("creatable"),n=this.consumeSapAnnotation("creatable-path"),i=this.consumeSapAnnotation("filterable"),r,s,p=t.getAttribute("Name"),c,l={$kind:"NavigationProperty"},m=this;function u(t,e,a){s=m.getOrCreateObject(m.mEntityType2EntitySetAnnotation,m.sTypeName);s=m.getOrCreateObject(s,t);s=m.getOrCreateArray(s,e);s.push(a)}this.type[p]=l;this.navigationProperties.push({associationName:this.resolveAlias(t.getAttribute("Relationship")),fromRoleName:t.getAttribute("FromRole"),property:l,propertyName:p,toRoleName:t.getAttribute("ToRole")});this.v2annotatable(p);if(e){c={$NavigationPropertyPath:p};if(n){a.warning("Inconsistent metadata in '"+this.url+"'","Use either 'sap:creatable' or 'sap:creatable-path' at navigation property '"+this.oAnnotatable.sPath+"'",o)}else if(e==="true"){c=null}}else if(n){c={$If:[{$Not:{$Path:n}},{$NavigationPropertyPath:p}]}}if(c){u("@Org.OData.Capabilities.V1.InsertRestrictions","NonInsertableNavigationProperties",c)}if(i==="false"){r={NavigationProperty:{$NavigationPropertyPath:p},FilterRestrictions:{Filterable:false}};u("@Org.OData.Capabilities.V1.NavigationRestrictions","RestrictedProperties",r)}};u.prototype.processTypeProperty=function(t){var e,n,i,r,s=t.getAttribute("Name"),p={$kind:"Property"},c=this;function l(t,n,i){if(c.type.$kind==="EntityType"){r=c.getOrCreateObject(c.mEntityType2EntitySetAnnotation,c.sTypeName);r=c.getOrCreateObject(r,t);r=c.getOrCreateArray(r,n);r.push({$PropertyPath:s})}else{a.warning("Unsupported SAP annotation at a complex type in '"+c.url+"'","sap:"+i+" at property '"+e.sPath+"'",o)}}this.sPropertyName=s;this.type[s]=p;this.processFacetAttributes(t,p);this.processTypedCollection(t.getAttribute("Type"),p);e=this.v2annotatable(s,this.convertPropertyAnnotation);if(e.consume("updatable")==="false"){if(e.consume("creatable")==="false"){e.annotate("@Org.OData.Core.V1.Computed",true)}else{e.annotate("@Org.OData.Core.V1.Immutable",true)}}if(e.consume("filterable")==="false"){l("@Org.OData.Capabilities.V1.FilterRestrictions","NonFilterableProperties","filterable")}i=e.consume("filter-restriction");if(i){switch(i){case"interval":n="SingleInterval";break;case"multi-value":n="MultiValue";break;case"single-value":n="SingleValue";break;default:a.warning("Inconsistent metadata in '"+this.url+"'",'Unsupported sap:filter-restriction="'+i+"\" at property '"+e.sPath+"'",o)}if(n){if(this.type.$kind==="EntityType"){r=this.getOrCreateObject(this.mEntityType2EntitySetAnnotation,this.sTypeName);r=this.getOrCreateArray(r,"@com.sap.vocabularies.Common.v1.FilterExpressionRestrictions");r.push({AllowedExpressions:{EnumMember:"com.sap.vocabularies.Common.v1.FilterExpressionType/"+n},Property:{$PropertyPath:s}})}else{a.warning("Unsupported SAP annotation at a complex type in '"+this.url+"'","sap:filter-restriction at property '"+e.sPath+"'",o)}}}if(e.consume("required-in-filter")==="true"){l("@Org.OData.Capabilities.V1.FilterRestrictions","RequiredProperties","required-in-filter")}if(e.consume("sortable")==="false"){l("@Org.OData.Capabilities.V1.SortRestrictions","NonSortableProperties","sortable")}};u.prototype.processBoundOperations=function(){var t=this;this.aBoundOperations.forEach(function(e){var a=t.result[e.$Parameter[0].$Type];a.$Key.forEach(function(t){e.$Parameter.some(function(a,o){if(a.$Name===t){e.$Parameter.splice(o,1);return true}})})})};u.prototype.processUnitConversion=function(){var e=this;Object.keys(this.mProperty2Unit).forEach(function(n){var i,r,s=n.split("/")[0],p,c=e.mProperty2Unit[n],l=c.split("/"),m,u,h,y=l.length;for(h=0;h<y;h+=1){r=e.result[s];m=r[l[h]];if(!m){a.warning("Path '"+c+"' for sap:unit cannot be resolved",n,o);return}if(h<y-1){s=m.$Type}}u=e.mProperty2Semantics[s+"/"+l[y-1]];if(!u){a.warning("Unsupported sap:semantics at sap:unit='"+c+"'; expected 'currency-code' or 'unit-of-measure'",n,o);return}p=u==="currency-code"?"ISOCurrency":"Unit";p="@Org.OData.Measures.V1."+p;i=e.getOrCreateObject(e.result[t.namespace(n)+"."],"$Annotations");if(e.bIgnoreAnnotations){return}i=e.getOrCreateObject(i,n);if(!(p in i)){i[p]={$Path:c}}})};function h(t){var e,a=t.attributes,o="<"+t.nodeName,n,i;for(n=0,i=a.length;n<i;n+=1){e=a.item(n);o+=" "+e.name+'="'+e.value+'"'}return o+(t.childNodes.length?">":"/>")}u.prototype.setDefaultEntityContainer=function(){var t=this.defaultEntityContainerObject.keys(a).filter(function(t){return a[t].$kind==="EntityContainer"});if(e.length===1){a.$EntityContainer=e[0]}}};u.prototype.updateNavigationPropertiesAndCreateBindings=function(){var t=this;this.navigationProperties.forEach(function(e){var a=t.associations[e.associationName],o=a.referentialConstraint,n=e.property,i=a.roles[e.toRoleName];n.$Type=i.typeName;i.propertyName=e.propertyName;if(i.multiplicity==="1"){n.$Nullable=false}if(i.multiplicity==="*"){n.$isCollection=true}if(o&&o.principal.roleName===e.toRoleName){n.$ReferentialConstraint={};n.$ReferentialConstraint[o.dependent.propertyRef]=o.principal.propertyRef}});this.associationSets.forEach(function(e){var a=t.associations[e.associationName],o=e.entityContainer;function n(t,e){var n=o[t.entitySetName],i=a.roles[e.roleName];if(i.propertyName){n.$NavigationPropertyBinding=n.$NavigationPropertyBinding||{};n.$NavigationPropertyBinding[i.propertyName]=e.entitySetName}}n(e.ends[0],e.ends[1]);n(e.ends[1],e.ends[0])})};u.prototype.v2annotatable=function(t,e){var a=new m(this,t);this.oAnnobind(this);Object.keys(this.mSapAnnotations).forEach(function(t){e(a,t)})}return a};u.prototype.warnUnsupportedSapAnnotations=function(t){Object.keys(this.mSapAnnotations).forEach(function(e){a.warning("Unsupported annotation 'sap:"+e+"'",h(t),o)})};(function(t){var a;t.sRootNamespace=i;t.oAliasConfig={Reference:{__xmlns:e.sEdmxNamespace,Include:{__processor:t.processAlias}},DataServices:{Schema:{__processor:t.processAlias}}};a={NavigationProperty:{__processor:t.processTypeNavigationProperty},Property:{__processor:t.processTypeProperty}};t.oFullConfig={__include:[t.oReferenceInclude],DataServices:{__processor:t.processDataServices,Schema:{__postProcessor:t.postProcessSchema,__processor:t.processSchema,__include:[t.oAnnotationsConfig],Association:{__processor:t.processAssociation,End:{__processor:t.processAssociationEnd},ReferentialConstraint:{__processor:t.processReferentialConstraint,Dependent:{__processor:t.processDependent,PropertyRef:{__processor:t.processReferentialConstraintPropertyRef}},Principal:{__processor:t.processPrincipal,PropertyRef:{__processor:t.processReferentialConstraintPropertyRef}}}},ComplexType:{__processor:t.processComplexType,__include:[a]},EntityContainer:{__processor:t.processEntityContainer,AssociationSet:{__processor:t.processAssociationSet,End:{__processor:t.processAssociationSetEnd}},EntitySet:{__processor:t.processEntitySet},FunctionImport:{__processor:t.processFunctionImport,Parameter:{__processor:t.processParameter}}},EntityType:{__processor:t.processEntityType,__include:[a],Key:{PropertyRef:{__processor:t.processEntityTypeKeyPropertyRef}}}}}}})(u.prototype);return u},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/model/odata/v4/lib/_V4MetadataConverter",["./_Helper","./_MetadataConverter"],function(t,e){"use strict";function o(){this.enumType=null;this.enumTypeMemberCounter=0;this.navigationProperty=null;e.call(this)}o.prototype=Object.create(e.prototype);o.prototype.finalize=function(){if(this.result.$Version!=="4.0"){throw new Error(this.url+": Unsupported OData version "+this.result.$Version)}};o.prototype.processActionOrFunction=function(t){var e=t.localName,o={$kind:e},s,i,n=this.namespace+t.getAttribute("Name"),r="",a=this;function p(t){var e={};a.processTypedCollection(t.getAttribute("Type"),e);return e.$isCollection?"Collection("+e.$Type+")":e.$Type}this.processAttributes(t,o,{IsBound:this.setIfTrue,EntitySetPath:this.setValue,IsComposable:this.setIfTrue});s=this.getOrCreateArray(this.result,n);if(!Array.isArray(s)){s=[];this.addToResult(n,s)}s.push(o);this.oOperation=o;if(o.$IsBound){i=t.getElementsByTagName("Parameter");r=t.localName==="Action"?p(i[0]):Array.prototype.map.call(i,p).join(",")}this.annotatable(n+"("+r+")")};o.prototype.processComplexType=function(t){this.processType(t,{$kind:"ComplexType"})};o.prototype.processEdmx=function(t){this.processAttributes(t,this.result,{Version:this.setValue})};o.prototype.processElement=function(t,e){if(e){e.call(this,t)}};o.prototype.processEntityContainer=function(t){var e=this.namespace+t.getAttribute("Name");this.entityContainer={$kind:"EntityContainer"};this.addToResult(e,this.entityContainer);this.addToResult("$EntityContainer",e);this.annotatable(e)};o.prototype.processEntitySet=function(t){var e=t.getAttribute("Name");this.entityContainer[e]=this.entitySet={$kind:"EntitySet",$Type:this.resolveAlias(t.getAttribute("EntityType"))};this.processAttributes(t,this.entitySet,{IncludeInServiceDocum.processEntityType=function(t){this.processType(t,{$kind:"EntityType"})};o.prototype.processEntityTypeKeyPropertyRef=function(t){var e=t.getAttribute("Alias"),o,s=t.getAttribute("Name");if(e){o={};o[e]=s}else{o=s}this.getOrCreateArray(this.type,"$Key").push(o)};o.prototype.processEnumType=function(t){var e=this.namespace+t.getAttribute("Name"),o={$kind:"EnumType"};this.processAttributes(t,o,{IsFlags:this.setIfTrue,UnderlyingType:function(t){return t!=="Edm.Int32"?t:undefined}});this.enumType=o;this.addToResult(e,o);this.enumTypeMemberCounter=0;this.annotatable(e)};o.prototype.processEnumTypeMember=function(e){var o=e.getAttribute("Name"),s=e.getAttribute("Value"),i;if(s){i=parseInt(s);if(!t.isSafeInteger(i)){i=s}}else{i=this.enumTypeMemberCounter;this.enumTypeMemberCounter+=1}this.enumType[o]=i;this.annotatable(o)};o.prototype.processFacetAttributes=function(t,e){var o=this;this.processAttributes(t,e,{MaxLength:function(t){rthis.setNumber,Scale:function(t){return t==="variable"?t:o.setNumber(t)},SRID:this.setValue,Unicode:this.setIfFalse})};o.prototype.processImport=function(t){var e=t.localName,o={$kind:e},s=t.getAttribute("Name"),i=this;e=e.replace("Import","");o["$"+e]=this.resolveAlias(t.getAttribute(e));this.processAttributes(t,o,{EntitySet:function(t){return i.resolveTargetPath(t)},IncludeInServiceDocument:this.setIfTrue});this.entityContainer[s]=o;this.annotatable(s)};o.prototype.processNavigationPropertyBinding=function(t){var e=this.getOrCreateObject(this.entitySet,"$NavigationPropertyBinding");e[t.getAttribute("Path")]=this.resolveTargetPath(t.getAttribute("Target"))};o.prototype.processParameter=function(t){var e=this.oOperation,o={};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Name:this.setValue,Nullable:this.setIfFalse});this.processFacetAttributes(t,o);this.getOrCreateArray(e,"$Parameter").push(o);this.annotatable(o.$Name)};o.prototype.processReturnType=function(t){var e=this.oOperation,o={};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse});this.processFacetAttributes(t,o);e.$ReturnType=o;this.annotatable("$ReturnType")};o.prototype.processSchema=function(t){this.namespace=t.getAttribute("Namespace")+".";this.schema={$kind:"Schema"};this.addToResult(this.namespace,this.schema);this.annotatable(this.schema)};o.prototype.processSingleton=function(t){var e=t.getAttribute("Name");this.entityContainer[e]=this.entitySet={$kind:"Singleton",$Type:this.resolveAlias(t.getAttribute("Type"))};this.annotatable(e)};o.prototype.processTerm=function(t){var e=this.namespace+t.getAttribute("Name"),o={$kind:"Term"},s=this;this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse,BaseTerm:function(t){return t?s.resolveAlias(t):undefined}});this.processFacetAttributes(t,o);this.addToResult(e,o);this.annotatable(e)};o.prototype.processType=function(t,e){var o=this.namespace+t.getAttribute("Name"),s=this;this.processAttributes(t,e,{t:s.setIfTrue,BaseType:function(t){return t?s.resolveAlias(t):undefined}});this.type=e;this.addToResult(o,e);this.annotatable(o)};o.prototype.processTypedCollection=function(t,e){var o=this.rCollection.exec(t);if(o){e.$isCollection=true;t=o[1]}e.$Type=this.resolveAlias(t)};o.prototype.processTypeDefinition=function(t){var e=this.namespace+t.getAttribute("Name"),o={$kind:"TypeDefinition",$UnderlyingType:t.getAttribute("UnderlyingType")};this.addToResult(e,o);this.processFacetAttributes(t,o);this.annotatable(e)};o.prototype.processTypeNavigationProperty=function(t){var e=t.getAttribute("Name"),o={$kind:"NavigationProperty"};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse,Partner:this.setValue,ContainsTarget:this.setIfTrue});this.type[e]=this.navigationProperty=o;this.annotatable(e)};o.prototype.processTypeNavigationPropertyOnDelete=function(t){this.navigationProperty.$OnDelete=t.getAttribute("Action");this.annotatable(this.navigationProperty,"$OnDelete")};o.prototype.processTypeNavigationPropertyReferentialConstraint=function(t){var e=t.getAttribute("Property"),o=this.getOrCreateObject(this.navigationProperty,"$ReferentialConstraint");o[e]=t.getAttribute("ReferencedProperty");this.annotatable(o,e)};o.prototype.processTypeProperty=function(t){var e=t.getAttribute("Name"),o={$kind:"Property"};this.processTypedCollection(t.getAttribute("Type"),o);this.processAttributes(t,o,{Nullable:this.setIfFalse,DefaultValue:this.setValue});this.processFacetAttributes(t,o);this.type[e]=o;this.annotatable(e)};o.prototype.resolveTargetPath=function(t){var e;if(!t){return t}t=this.resolveAliasInPath(t);e=t.indexOf("/");if(e>=0&&!t.includes("/",e+1)){if(t.slice(0,e)===this.result.$EntityContainer){return t.slice(e+1)}}return t};(function(t){var e,o,s;t.sRootNamespace=t.sEdmxNamespace;t.oAliasConfig={__xmlns:t.sEdmxNamespace,Reference:{Include:{__processor:t.processAlias}},DataServices:{Schema:{__xmlns:t.sEdmNamespace,__processor:t.processAlias}}};s={Property:{__processor:t.processTypeProperty,__include:[t.oAnnotationConfig]},NavigationProperty:{__processor:t.processTypeNavigationProperty,__include:[t.oAnnotationConfig],OnDelete:{__processor:t.processTypeNavigationPropertyOnDelete,__include:[t.oAnnotationConfig]},ReferentialConstraint:{__processor:t.processTypeNavigationPropertyReferentialConstraint,__include:[t.oAnnotationConfig]}}};o={NavigationPropertyBinding:{__processor:t.processNavigationPropertyBinding}};e={Parameter:{__processor:t.processParameter,__include:[t.oAnnotationConfig]},ReturnType:{__processor:t.processReturnType,__include:[t.oAnnotationConfig]}};t.oFullConfig={__xmlns:t.sEdmxNamespace,__processor:t.processEdmx,__include:[t.oReferenceInclude],DataServices:{Schema:{__xmlns:t.sEdmNamespace,__processor:t.processSchema,__include:[t.oAnnotationsConfig,t.oAnnotationConfig],Action:{__processor:t.processActionOrFunction,__include:[e,t.oAnnotationConfig]},Function:{__processor:t.processActionOrFunction,__include:[e,t.oAnnotationConfig]},EntityType:{__processor:t.processEntityType,__include:[s,t.oAnnotationConfig],Key:{PropertyRef:{__processor:t.processEntityTypeKeyPropertyRef}}},ComplexType:{__processor:t.processComplexType,__include:[s,t.oAnnotationConfig]},EntityContainer:{__processor:t.processEntityContainer,__include:[t.oAnnotationConfig],ActionImport:{__processor:t.processImport,__include:[t.oAnnotationConfig]},EntitySet:{__processor:t.processEntitySet,__include:[o,t.oAnnotationConfig]},FunctionImport:{__processor:t.processImport,__include:[t.oAnnotationConfig]},Singleton:{__processor:t.processSingleton,__include:[o,t.oAnnotationConfig]}},EnumType:{__processor:t.processEnumType,__include:[t.oAnnotationConfig],Member:{__processor:t.processEnumTypeMember,__include:[t.oAnnotationConfig]}},Term:{__processor:t.processTerm,__include:[t.oAnnotationConfig]},TypeDefinition:{__processor:t.processTypeDefinition,__include:[t.oAnnotationConfig]}}}}})(o.prototype);return o},false);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/performance/Measurement",["sap/base/Log","sap/ui/thirdparty/URI","sap/base/util/now"],function(e,t,r){"use strict";var t=window.URI;function n(){function n(e,t,r,n,i){this.id=e;this.info=t;this.start=r;this.end=n;this.pause=0;this.resume=0;this.duration=0;this.time=0;this.categories=i;this.average=false;this.count=0;this.completeDuration=0}function i(e){if(!o){return true}if(!e){return o===null}for(var t=0;t<o.length;t++){if(e.indexOf(o[t])>-1){return true}}return false}function s(e){if(!e){e=["javascript"]}e=typeof e==="string"?e.split(","):e;if(!i(e)){return null}return e}function u(e,t){for(var r=0;r<t.length;r++){if(e.categories.indexOf(t[r])>-1){return true}}return t.length===0}var a=false,f=XMLHttpRequest,o=null,l=[],d=[],c={},h={};this.getActive=function(){return a};this.setActive=function(e,r){var n,i;if(!r){r=null}else if(typeof r==="string"){r=r.split(",")}o=r;if(a===e){return}a=e;if(a){for(var s in c){this[s]=c[s].bind(this)}c={};n=this.end;i=this.start;XMLHttpRequest=function(){var e=new f,r=e.open,s;e.open=function(){s=new t(arguments[1],new t(document.baseURI).search("")).href();i(s,"Request for "+s,"xmlhttprequest");e.addEventListener("loadend",n.bind(null,s));r.apply(this,arguments)};return e}}else{XMLHttpRequest=f}return a};c["start"]=function(t,i,u){if(!a){return}u=s(u);if(!u){return}var f=r(),o=new n(t,i,f,0,u);if(e.getLevel("sap.ui.Performance")>=4&&window.console&&console.time){console.time(i+" - "+t)}e.info("Performance measurement start: "+t+" on "+f);if(o){h[t]=o;return this.getMeasurement(o.id)}else{return false}};c["pause"]=function(t){if(!a){return}var n=r();var i=h[t];if(i&&i.end>0){return false}if(i&&i.pause==0){i.pause=n;if(i.pause>=i.resume&&i.resume>0){i.duration=i.duration+i.pause-i.resume;i.resume=0}else if(i.pause>=i.start){i.duration=i.pause-i.start}}if(i){e.info("Performance measurement pause: "+t+" on "+n+" duration: "+i.duration);return this.getMeasurement(i.id)}else{return false}};c["resume"]=function(t){if(!a){return}var n=r();var i=h[t];if(i&&i.pause>0){i.pause=0;i.resume=n}if(i){e.info("Performance measurement resume: "+t+" on "+n+" duration: "+i.duration);return this.getMeasurement(i.id)}else{return false}};c["end"]=function(t){if(!a){return}var n=r();var i=h[t];if(i&&!i.end){e.info("Performance measurement end: "+t+" on "+n);i.end=n;if(i.end>=i.resume&&i.resume>0){i.duration=i.duration+i.end-i.resume;i.resume=0}else if(i.pause>0){i.pause=0}else if(i.end>=i.start){if(i.average){i.completeDuration+=i.end-i.start;i.count++;i.duration=i.completeDuration/i.count;i.start=n}else{i.duration=i.end-i.start}}if(i.end>=i.start){i.time=i.end-i.start}}if(i){if(e.getLevel("sap.ui.Performance")>=4&&window.console&&console.timeEnd){console.timeEnd(i.inn this.getMefalse}};c["clear"]=function(){h={}};c["remove"]=function(e){delete h[e]};c["add"]=function(e,t,r,i,u,f,o){if(!a){return}o=s(o);if(!o){return false}var l=new n(e,t,r,i,o);l.time=u;l.duration=f;if(l){h[e]=l;return this.getMeasurement(l.id)}else{return false}};c["average"]=function(e,t,n){if(!a){return}n=s(n);if(!n){return}var i=h[e],u=r();if(!i||!i.average){this.start(e,t,n);i=h[e];i.average=true}else{if(!i.end){i.completeDuration+=u-i.start;i.count++}i.start=u;i.end=0}return this.getMeasurement(i.id)};this.getMeasurement=function(e){var t=h[e];if(t){var r={};for(vants=function(e){return this.filterMeasurements(function(e){return e},e)};this.filterMeasurements=function(){var e,t,r=0,n=[],i=typeof arguments[r]==="function"?arguments[r++]:undefined,s=typeof arguments[r]==="boolean"?arguments[r++]:undefined,a=Array.isArray(arguments[r])?arguments[r]:[];for(var f in h){e=this.getMeasurement(f);t=s===false&&e.end===0||s!==false&&(!s||e.end);if(t&&u(e,a)&&(!i||i(e))){n.push(e)}}return n};this.registerMethod=function(t,r,n,i){var s=r[n];if(s&&typeof s==="function"){var u=l.indexOf(s)>-1;if(!u){d.push({func:s,obj:r,method:n,id:t});var a=this;r[n]=function(){a.average(t,t+" method average",i);var e=s.apply(this,arguments);a.end(t);return e};l.push(r[n]);return true}}else{e.debug(n+" in not a function. Measurement.register failed")}return false};this.unregisterMethod=function(e,t,r){var n=t[r],i=l.indexOf(n);if(n&&i>-1){t[r]=d[i].func;l.splice(i,1);d.splice(i,1);return true}return false};this.unregisterAllMethods=function(){while(d.length>0){var e=d[0];this.unregisterMethod(e.id,e.obj,e.method)}};var m=location.search.match(/sap-ui-measure=([^\&]*)/);if(m&&m[1]){if(m[1]==="true"||m[1]==="x"||m[1]==="X"){this.setActive(true)}else{this.setActive(true,m[1])}}else{var p=function(){return null};for(var v in c){this[v]=p}}}return new n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/unified/library",["sap/ui/core/Core","sap/ui/base/Object","./ColorPickerDisplayMode","./FileUploaderHttpRequestMethod","sap/ui/core/library"],function(e,i,n,a){"use strict";var t=sap.ui.getCore().initLibrary({name:"sap.ui.unified",version:"1.114.3",dependencies:["sap.ui.core"],designtime:"sap/ui/unified/designtime/library.designtime",types:["sap.ui.unified.CalendarAppointmentVisualization","sap.ui.unified.CalendarDayType","sap.ui.unified.CalendarIntervalType","sap.ui.unifief.CalendarAppointmentHeight","sap.ui.unifief.CalendarAppointmentRoundWidth","sap.ui.unified.ColorPickerDisplayMode","sap.ui.unified.ColorPickerMode","sap.ui.unified.ContentSwitcherAnimation","sap.ui.unified.GroupAppointmentsMode","sap.ui.unified.FileUploaderHttpRequestMethod","sap.ui.unified.StandardCalendarLegendItem"],interfaces:["sap.ui.unified.IProcessableBlobs"],controls:["sap.ui.unified.calendar.DatesRow","sap.ui.unified.calendar.Header","sap.ui.unified.calendar.Month","sap.ui.unified.calendar.MonthPicker","sap.ui.unified.calendar.MonthsRow","sap.ui.unified.calendar.TimesRow","sap.ui.unified.calendar.YearPicker","sap.ui.unified.calendar.YearRangePicker","sap.ui.unified.Calendar","sap.ui.unified.CalendarDateInterval","sap.ui.unified.CalendarWeekInterval","sap.ui.unified.CalendarMonthInterval","sap.ui.unified.CalendarTimeInterval","sap.ui.unified.CalendarLegend","sap.ui.unified.CalendarRow","sap.ui.unified.ContentSwitcher","sap.ui.unified.ColorPicker","sap.ui.unified.ColorPickerPopover","sap.ui.unified.Currency","sap.ui.unified.FileUploader","sap.ui.unified.Menu","sap.ui.unified.Shell","sap.ui.unified.ShellLayout","sap.ui.unified.ShellOverlay","sap.ui.unified.SplitContainer"],elements:["sap.ui.unified.CalendarAppointment","sap.ui.unified.CalendarLegendItem","sap.ui.unified.DateRange","sap.ui.unified.DateTypeRange","sap.ui.unified.FileUploaderParameter","sap.ui.unified.FileUploaderXHRSettings","sap.ui.unified.MenuItem","sap.ui.unified.MenuItemBase","sap.ui.unified.MenuTextFieldItem","sap.ui.unified.ShellHeadItem","sap.ui.unified.ShellHeadUserItem"],extensions:{"sap.ui.support":{publicRules:true}}});t.CalendarDayType={None:"None",NonWorking:"NonWorking",Type01:"Type01",Type02:"Type02",Type03:"Type03",Type04:"Type04",Type05:"Type05",Type06:"Type06",Type07:"Type07",Type08:"Type08",Type09:"Type09",Type10:"Type10",Type11:"Type11",Type12:"Type12",Type13:"Type13",Type14:"Type14",Type15:"Type15",Type16:"Type16",Type17:"Type17",Type18:"Type18",Type19:"Type19",Type20:"Type20"};t.StandardCalendarLegendItem={Today:"Today",WorkingDay:"WorkingDay",NonWorkingDay:"NonWorkingDay",Selected:"Selected"};t.CalendarIntervalType={Hour:"Hour",Day:"Day",Month:"Month",Week:"Week",OneMonth:"One Month"};t.CalendarAppointmentHeight={HalfSize:"HalfSize",Regular:"Regular",Large:"Large",Automatic:"Automatic"};t.CalendarAppointmentRoundWidth={HalfColumn:"HalfColumn",None:"None"};t.GroupAppointmentsMode={Collapsed:"Collapsed",Expanded:"Expanded"};t.FileUploaderHttpRequestMethod=a;t.CalendarAppointmentVisualization={Standard:"Standard",Filled:"Filled"};t.ContentSwitcherAnimation={None:"None",Fade:"Fade",ZoomIn:"ZoomIn",ZoomOut:"ZoomOut",Rotate:"Rotate",SlideRight:"SlideRight",SlideOver:"SlideOver"};t.ColorPickerMode={HSV:"HSV",HSL:"HSL"};t.ColorPickerDisplayMode=n;t._ContentRenderer=i.extend("sap.ui.unified._ContentRenderer",{constructor:function(e,n,a,t){i.apply(this);this._id=n;this._cntnt=a;this._ctrl=e;this._rm=sap.ui.getCore().createRenderManager();this._cb=t||function(){}},destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){clearTimeout(this._rerenderTimer);delete this._rerenderTimer}i.prototype.destroy.apply(this,arguments)},render:function(){if(!this._rm){return}if(this._rerenderTimer){clearTimeout(this._rerenderTimer)}this._rerenderTimer=setTimeout(function(){var e=document.getElementById(this._id);if(e){if(typeof this._cntnt==="string"){var i=this._ctrl.getAggregation(this._cntnt,[]);for(var n=0;n<i.length;n++){this._rm.renderControl(i[n])}}else{this._cntnt(this._rm)}this._rm.flush(e)}this._cb(!!e)}.bind(this),0)}});t._iNumberOfOpenedShellOverlays=0;if(!t.ColorPickerHelper){t.ColorPickerHelper={isResponsive:function(){return false},factory:{createLabel:function(){throw new Error("no Label control available")},createInput:function(){throw new Error("no Input control available")},createSlider:function(){throw new Error("no Slider control available")},createRadioButtonGroup:function(){throw new Error("no RadioButtonGroup control available")},createRadioButtonItem:function(){throw new Error("no RadioButtonItem control available")}},bFinal:false}}if(!t.FileUploaderHelper){t.FileUploaderHelper={createTextField:function(e){throw new Error("no TextField control available!")},setTextFieldContent:function(e,i){throw new Error("no TextField control available!")},createButton:function(e){throw new Error("no Button control available!")},addFormClass:function(){return null},bFinal:false}}t.calendar=t.calendar||{};return t});
sap.ui.require.preload({
	"sap/ui/thirdparty/jquery-mobile-custom.js":function(){/*
* jQuery Mobile v1.3.1
* http://jquerymobile.com
*
* Copyright 2010, 2013 jQuery Foundation, Inc. and other contribu["jquery"],function(i){n(i,e,t);return i.mobile})}else{n(e.jQuery,e,t)}})(this,document,function(e,t,n,i){
// About: License
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
(function(e,t,i){var o="hashchanction c(e){e=e||location.href;return"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}e.fn[o]=function(e){return e?this.on(o,e):this.trigger(o)};e.fn[o].delay=50;s[o]turn false}e(a.start)},teardown:function(){if(l){return false}e(a.stop)} n={},ron.href=location.href.replace(/#.*/,"")+i}r=setTimeout(f,e.fn[o].delay)}return n}()})(e,this);(function(t){t.mobile={};e.mobile.orientationChangeEnabled=true})(e);(function(e,t,i){var o={};e.mobile=e.extend(e.mobile,{version:"1.3.1",ns:"",subPageUrlKey:"ui-page",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:true,hashListeningEnabled:true,linkBindingEnabled:true,defaultPageTransition:"fade",maxTransitionWidth:false,minScrollBack:250,touchOverflowEnabled:false,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"e",phonegapNavigationEnabled:false,autoInitializePage:true,pushStateEnabled:true,ignoreContentEnabled:false,orientationChangeEnabled:true,buttonMarkup:{hoverDelay:200},window:e(t),document:e(n),keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},behaviors:{},silentScroll:function(n){if(typeof n!=="number"){n=e.mobile.defaultHomeScroll}e.event.special.scrollstart.enabled=false;setTimeout(function(){t.scrollTo(n})},20);setTimeout(function(){e.eveunction(t){if(!t){return}return o[t]||(o[t]=e.camelCase(e.mobile.ns+t))},getInheritedTheme:function(e,t){var n=e[0],i="",o=/ui-(bar|body|overlay)-([a-z])\b/,r,a;while(n){r=n.className||"";if(r&&(a=o.ext(':jqmData(role="page"), :jqmData(role="dialog")').data("mobile-page")},enhanceable:function(e){return this.haveParents(e,"enhance")},hijackable:function(e){return this.haveParents(e,"ajax")},haveParents:function(t,n){if(!e.mobile.ignoreContentEnabled){return t}var i=t.length,o=e(),r,a,s;for(var u=0;u<i;u++){a=t.eq(u);s=false;r=t[u];while(r){var l=r.getAttribute?r.getAttribute("data-"+e.mobile.ns+n):"";if(l==="false"){tScreenHeight:function(){return t.innerHeight||e.mobile.window.height()}},e.mobile);e.fn.jqmData=function(t,n){var o;if(typeof t!=="undefined"){if(t){t=e.mobile.nsNormalize(t)}if(arguments.length<2||n===i){o=this.data(t)}else{o=this.data(t,n)}}return o};e.jqmData=function(t,n,i){var o;if(typeof n!=="undefined"mRemoveData=funcRemoveData=function(t,n){r(n))};e.fn.removeWithDenction(t){var n=e(t);n.remove()};e.e(t).jqmData("dependetEncodedText=function(){return e("<div/>").text(e(this).text()).html()};e.fn.jqmEnhae(this)};e.fn.jqmHijackable=function(){returnreplace(a,"[data-"+(e.mobile.ns||"")+"$1]");return r.call(this,t,n,i,o)};e.extend(e.find,r)})(e,this);(function(e,i){
/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Ie(r,o);n=a.offsetWmedia:e}}}(n);e.mobile.media=function(e){return t.matchMedia(e).matches}})(e);(function(e,i){var o={touch:"ontouchend"in n};if(t.sap&&sap.ui&&sap.ui.Device&&sap.ui.Device.support&&!(sap.ui.Device.browser.msie||sap.ui.Device.browser.edge)){o.touch=sap.ui.Device.support.touch}e.mobile.support=e.mobd(e.support,{orientjoin(t+" ")+t).split(" ");for(var o in n){if(a[n[o]]!==i){return true}}}var r=e("<body>").prependTo("html"),a=r[0].style,s=["Webkit","Moz","O"],u="palmGetResource"in t,l=t.opera,c=t.operamini&&{}.toString.call(t.operamini)==="[object OperaMini]",f=t.blackberry&&ement("div"),r=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},a=function(e){if(e===""){return""}else{return"-"+e.charAt(0).toLowerCase()+e.substr(1)+"-"}},u=function(n){var i=a(n)+e+": "+t+";",s=r(n),u=s+(s===""?e:r(e));o.style=i;if(!!o.style[u]){c=true}},l=i?i:s,c;for(var f=0;f<l.length;f++){u(l[f])}return!!c}function h(){var o="transform-3d",a=e.mobile.media("(-"+s.join("-"+o+"),(-")+"-"+o+"),("+o+")");if(a){return!!a}var u=n.createElement("div"),l={MozTransform:"-moz-transform",transform:"transform"};r.append(u);for(var c in l){if(u.style[c]!==i){u.style[c]="translate3d( 100px, 1px, 1px )";a=t.getComputedStyle(u).getPropertyValue(l[c])}}return!!a&&a!=="none"}function p(){var e=n.createElement("x"),i=n.documentElement,o=t.getComputedStyle,r=o&&o(e,""),a;if(!("pointerEvents"in e.style)){return false}e.style.pointerEvents="auto";e.style.pointerEvents="x";i.appendChild(e);a=r&&r.pointerEvents==="auto";i.removeChild(e);return!!a}function v(){var e=n.createElement("div");return typeof e.getBoundingClientR!--[if gt IE "+ ++e+"]><br><![endif]--\x3e"}while(i[0]);return e>4?e:!e}();function m(){var e=t,n=navigator.userAgent,i=navigator.platform,o=n.match(/AppleWebKit\/([0-9]+)/),r=!!o&&o[1],a=n.match(/Fennec\/([0-9]+)/),s=!!a&&a[1],u=n.match(/Opera Mobi\/([0-9]+)/),l=!!u&&u[1];if((i.indexOf("iPhone")>-1||i.indexOf("iPad")>-1||i.indexOf("iPod")>-1)&&r&&r<534||e.operamini&&{}.toString.call(e.operamini)==="[object OperaMini]"||u&&l<7458||n.indexOf("Android")>-1&&r&&r<533||s&&s<6||"palmGetResource"in t&&r&&r<534||n.indexOf("MeeGo")>-1&&n.indexOf("NokiaBrowser/8.5.0")>-1){return false}return true}e.extend(e.support,{cssTransitions:"WebKitTransitionEvent"in t||d("transition","height 100ms linear",["Webkit","Moz",""])&&!e.mobile.browser.oldIE&&!l,pushState:"pushState"in history&&"replaceState"in history&&!(t.navigator.userAgent.indexOf("Firefox")>=0&&t.top!==t)&&t.navigator.userAgent.search(/CriOS/)===-1,mediaquery:e.mobile.media("only all"),cssPseudoElement:!!o("content"),touchOverflow:!!o("overflowScrolling"),cssTransform3d:h(),boxShadow:!!o("boxShadow")&&!f,fixedPosition:m(),scrollTop:("pageXOffset"in t||"scrollTop"in n.documentElement||"scrollTop"in r[0])&&!u&&!c,dynandexOf("AppleWebKit")>-1&&e.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}();e.mobile.gradeA=function(){return(e.support.mediaquery||e.mobile.browser.oldIE&&e.mobile.browser.oldIE>=7)&&(e.support.boundingRect||e.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/)!==lesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")})}if(!e.support.boxShadow){e("html").addClass("ui-mobile-nosupport-boxshadow")}})(e);(function(e,t){var n=e.mobile.window,i,o;e.event.special.navigate=i={bound:false,pushStateEnabled:true,originalEventName:t,isPushStateEnabled:function(){return e.support.pushState&&e.mobile.ashChangeEnabled:function(){return e.mobile.hashListeningEnabled===true},popstate:function(t){var i=new e.Event("navigate"),o=new e.Event("beforenavigate"),r=t.originalEvent.state||{},a=location.href;n.trigger(o);if(o.isDefaultPrevented()){return}ifryState)}i.originalEvent=t;setTimeout(function(){n.trigger(i,{state:r})},0)},hashchange:function(t,i){var o=new e.Event("navigate"),r=new e.Event("beforenavigate");n.trigger(r);if(r.isDefaultPrevented()){return}o.originalEvent=t;n.trigger(o,{state:t.hashchangeState||{}})},setup:function(e,t){if(i.bound){return}i.bound=true;if(i.isPushStateEnabled()){i.originalEventName="popstate";n.on("popstate.navigate",i.popstate)}else if(i.isHashChangeEnabled()){i.originaltledresize")}else{if(o){clearTimeout(o)}o=setTimeout(n,t-a)}},i=0,o,r,a})(e);(function(e,t){var i=e(t),o="orientationchange",r,a,s,u,l,c={0:true,180:true};if(e.support.orientation){var f=t.innerWidth||i.width(),d=t.innerHeight||i.height(),h=50;u=f>d&&f-d>h;l=c[t.orientation];if(u&&l||!u&&!l){c={"-90":true,90:true}}}e.event.speciarientatioial.e.(this,arguments)}}});function p(){var e=a();if(e{i=o&&o.clientWidth/o.clientHeight<1.1}return i?"portrait":"landscape"};e.fn[o]=function(e){return e?this.on(o,e):this.trigger(o)};if(e.attrFn){e.attrFn[o]=true}})(e,this);(function(e,t,n,i){var o="virtualMouseBindings",r="virtualTouchID",a="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),s="clientX clientY pageX pageY screenX screenY".split(" "),u=e.event.mouseHooks?e.event.mouseHooks.props:[],l=("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),c=l.concat(u),f={},d=0,h=0,p=0,v=false,m=[],g=false,b=false,E="addEventListener"in n,w=e(n),D=1,T=0,y;e.vmouse={movile(e&&typeof e.originalEvent!=="undefined"){e=e.originalEvent}return e}function M(t,n){var o=t.type,r,a,u,f,d,h,p,v,m;t=e.Event(t);t.type=n;r=t.originalEvent;a=l;if(o.search(/^(mouse|click)/)>-1){a=c}if(r){for(p=a.length,f;p;){f=a[--p];t[f]=r[f]}}if(o.search(/mouse(down|up)|click/)>-1&&!t.which){t.which=1}if(o.search(/^touch/)!==-1){u=x(r);o=u.touches;d=u.changedTouches;h=o&&o.length?o[0]:d&&d.lent){i=e.data(t,o);if-p)>o);if(v&&!i){j("vmousecancel",t,r)}j("vmousemove",t,r);O()}function H(n){if(b){return}N();var i=S(n.target),o;j("vmouseup",n,i);if(!v){j("vclick",n,i);if(e.support.touch){o=x(n).changedTouches[0];m.push({touchID:T,x:o.clientX,y:o.cl,i;if(n){for(i in n){if(n[i]){return true}}}return false}function B(){}function R(t){var n=t.substr(1);return{setup:function(i,r){if(!W(this)){e.data(this,o,{})}var a=e.data(this,o);a[t]=true;f[t]=(f[t]||0)+1;if(f[t]===1){w.on(n,L)}e(this).on(n,B);if(E){f["touchstart"]=(f["touchstart"]||0)+1;if(f["touchstart"]=.data(this,o);if(s){s[t]=false}a.off(n,B);if(!W(this)){a.removeData(o)}}}}for(var U=0;U<a.length;U++){e.event.special[a[U]]=R(a[U])}if(E){function Y(n){var i=m.length,o=n.target,a,s,u,l,c,f;if(i){a=n.clientX;s=n.clientY+t.scrollY;y=e.vmouse.clickDistanceThreshold;u=o;while(u){for(l=0;l<i;l++){c=m[l];f=0;if(u===o&&Math.abs(c.x-a)<y&&Math.abs(c.y-s)<y||e.data(u,r)===c.touchID){if(!n.isSynthetic){n._sapui_delayedMouseEvent=true}if(o!==c.target){n.preventDefault();n.stopPropagation()}if(n.type==="click"){m.length=0}return}}u=u.parentNode}}}n.addEventListener("mousedown",Y,true);n.addEventListener("mouseup",Y,true);n.addEventListener("mouseover",Y,true);n.addEventListener("click",Y,true)}})(e,t,n);(function(e,t,i){var o=e(n);e.each(("touchstart touchmove touchend "+"tap taph){return e?this.on(n,e):this.trigger(n)};if(e.attrFn){e.attrFn[n]=true}});var r=e.mobile.support.touch,a="touchmove scroll",s=r?"touchstart":"mousedown",u=tion c(t,n,i){var o=i.type;i.type=n;e.event.dis!i){r(t,true)}clearTimeout(o);o=setTimeout(function(){r(t,false)},50)})}};e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,n=e(t),i,r,a;function s(e){var t=e.target;var n=sap.ui.Device.browser;return n.edge&&n.version>=14&&(t.tagName.toLowerCase()==="bue.toLowerCase()==="button"&&i.contains(t))}function u(){clearTimeout(a)}function l(){u();n.removeData("__tap_event_in_progress");n.off("vclick",d).off("vmouseup",u);o.off("vmousecancel",l).off("dragstart",l).off("vmouseup",f)}function f(t){if(t.target!==i&&!e.contains(i,t.target)&&!s(t)){l()}}function d(e){l();if(i===e.target||s(e)){c(t,"tap",e)}}n.on("vmousedown",function(s){if(s.which&&s.which!==1){return}i=s.target;r=s.originalEvent;if(n.data("__tap_event_in_progress")){l()}n.data("__tap_event_in_progress","X");n.on("vmouseup",u).on("vclick",d);o.on("vmousecancel",l).on("dragstart",l).on("vmouseup",f);a=setTimeout(function(){var n=e.event.fix(r);n.type="taphold";c(t,"taphold",n)},e.event.special.tap.tapholdThreshold)})}};e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(t){var n=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:e(t.target)}},stop:function(e){var t=e.originalEvent&&e.originalEvent.touches?e.originalEvent.touches[0]:eger("swipe").trigger(t.coords[0]>n.coords[0]?"swipeleft":"swiperight")}},setup:function(){var n=this,o=e(n);o.on(s,function(n){if(n.isMarked("swipestartHandled")){return}n.setMarked("swipestartHandled");var r=e.event.special.swipe.start(n),a;function s(n){if(!r){return}a=e.event.special.swipe.stop(n);if(n.cancelable&&!t.getSelection().toString()&&Math.abs(r.coords[0]-a.coords[0])>e.event.special.swipe.scrollSupressionThreshold){n.preventDefault()}}function c(t){o.off(l,s).off(u,c);if(r&&a){e.event.special.swipe.handleSwipe(r,a)}r=a=i}o.on(l,s).on(u,c)})}};e.each({scronction(t,n){e.event.special[t]={setup:function(){e(this).on(n,e.noop)}}})})(e,this)});
}
});
