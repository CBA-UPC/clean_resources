"use strict";(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[1258],{54111:(e,t,r)=>{r.r(t),r.d(t,{Events:()=>ie,default:()=>ne});var l=r(61310),a=r(66480),i=r(46255);const o=(0,i.Z)("div",{target:"e1a1kbrw0"})({name:"1p3bocf",styles:"line-height:1rem;font-size:2.2rem;font-weight:bold;margin-bottom:1.5rem;text-align:center"}),n=(0,i.Z)("div",{target:"e12drtsq0"})((({theme:e})=>({color:e.colors.gray.medium,fontSize:e.fonts.size.small,lineHeight:"2rem",paddingBottom:"2rem",textAlign:"center",a:{color:e.colors.gray.medium}})),"");var s=r(95928);const c=(0,i.Z)("form",{target:"e4uxhdu0"})((({theme:e})=>({lineHeight:0,maxWidth:"34rem",[(0,s.Z)(e.mediaQueries.max.width[768])]:{maxWidth:"none"}})),"");var d=r(61711),u=r(87805),m=r(34853),p={name:"12e2rkk",styles:"padding:3rem"};const y=function({cancel:e,keepDuplicate:t}){return(0,m.BX)(c,{css:p,method:"GET",children:[(0,m.tZ)(o,{children:"Duplicate Song"}),(0,m.tZ)(n,{children:"This song is already in your playlist."}),(0,m.tZ)(u.Z,{isBlock:!0,onClick:t=>{t.preventDefault(),e()},tabIndex:1,children:"Cancel"}),(0,m.tZ)(d.Z,{isBlock:!0,marginTop:"1rem",onClick:styleType:"cta",tabIndex:2,children:"Add Again"})]})};var g=r(75559),h=r(43083);const b=(0,i.Z)("section",{target:"e1ss85uu0"})({name:"1r2g1yj",styles:"display:inline-block;height:60px;width:60px"});var k=r(10881);const v=function({hoverOverlay:e,imgUrl:t,alt:r,width:l}){return(0,m.BX)(b,{children:[(0,m.tZ)(k.Z,{alt:r,src:t,width:l}),e||null]})};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},f.apply(this,arguments)}const Z=(0,i.Z)("span",{target:"e1wq5z2j0"})((({theme:e})=>f({},e.mixins.ellipsis,{paddingLeft:"1.5rem",textAlign:"left",width:"28rem",[(0,s.Z)(e.mediaQueries.max.width[400])]:{width:"17rem"}})),""),C=(0,i.Z)("li",{target:"e1bqxl2y0"})((({disabled:e=!1,theme:t})=>({alignItems:"center",display:"flex",height:"7rem",justifyContent:"space-between",opacity:e?"0.5":1,padding:".5rem 3rem","&:hover":{cursor:"pointer",backgroundColor:t.colors.gray[100]}})),""),S=function({children:e,disabled:t,onClick:r}){return(0,m.tZ)(C,{"data-test":"playlist-modal-row",disabled:t,onClick:r,children:e})},w=(0,i.Z)("ul",{target:"e19onexc0"})((({theme:e})=>({borderBottom:`1px solid ${e.colors.gray[300]}`,borderTop:`1px solid ${e.colors.gray[300]}`,height:"25rem",listStyle:"none",margin:"0",overflowY:"scroll",padding:".5rem 0",width:"100%"})),"");onst O=function(e){const{rowElements:t,onScroll:r}=e,l=function(e){return e.map((e=>{const{disabled:t,onClick:r=P,elements:l,key:a}=e;return(0,m.tZ)(S,{"data-test":"playlist-modal-row-list",disabled:t,onClick:r,children:l||e},a)}))}(t);return(0,m.tZ)(w,{onScroll:r,children:l})},I=(0,i.Z)("div",{target:"e1f79dev0"})((,""),A=(0,i.Z)("h2",{target:"ew22fth0"})({name:"sou3l3",styles:"font-weight:bold;margin:3rem 0;text-align:center"});var T=r(29714),U=r(12024),x=r(75628),D=r(89781),L=r(67464),N=r(54067),E=r(96832),_=r(71130),B={name:"bjn8wh",styles:"position:relative"},j={name:"acgbiv",styles:"padding:1rem 3rem 1.5rem 3rem;width:100%"};const M=({cancel:e,createPlaylist:t,playlists:r,selectPlaylist:l})=>{const a=(0,_.useSelector)(D.fE),i=(0,_.useSelector)(x.$2),o=(0,_.useSelector)(x.C3),{canCreateFreePlaylist:n}=(0,T.Z)(),s=a===L.I$.PREMIUM,c=(0,E.useCallback)((()=>{const e=s||n,r=e?t:()=>{};return{disabled:!e,elements:[(0,m.tZ)("span",{children:"Create New Playlist"},"create-text"),(0,m.tZ)("div",{"data-test":"addtoplaylist-plus-button",onClick:r,children:(0,m.tZ)(h.Z,{})},"create-button")],key:"create-row",onClick:r}}),[t,n,s]),d=(0,E.useCallback)((e=>{const{id:t,playlistId:r,writeable:a,urls:n,tracks:s=[],name:c}=e,d=s.length&&null!=n&&n.image?(0,U.p9)({mediaServerUrl:o,siteUrl:i},{},n.image):(0,U.WP)({mediaServerUrl:o,siteUrl:i},{}),u=s.filter(().length;return{disabled:!a,elements:[(0,m.tZ)(v,{alt:c,imgUrl:u?d:"",width:N.M3},`art-${t}`),(0,m.BX)(Z,{"data-test":"playlist-modal-row-name",children:[(0,m.tZ)("div",{children:c}),(0,m.BX)(I,{"data-test":"playlist-modal-row-count",children:[u," ",u>1?"Songs":"Song"]})]},`description-${t}`)],key:(t||r).toString(),onClick:a?()=>l(e):}),[o,l,i]),p=(0,E.useMemo)((()=>[c(),...r.map(d)]),[c,d,r]);return(0,m.BX)(m.HY,{children:[(0,m.tZ)("div",{children:(0,m.tZ)(A,{children:"Add to Playlist"})}),(0,m.tZ)("div",{css:B,children:(0,m.tZ)(O,{rowElements:p})}),(0,m.tZ)("div",{css:j,children:(0,m.tZ)(u.Z,{isBlock:!0,onClick:e,children:"Cancel"})})]})};var V=r(65580),$=r(6086),z=r(61993),R=r(40039),Y=r(11129),H=r(1805),X=r(23653);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},F.apply(this,arguments)}var K=r(90758),W=r(31401),G=r(29929),J=r(66834),q=r(67088),Q=r(10003),ee=r(55017),te=r(6378),re=r(96092),le=r(24586),ae=r(14186);const ie=g.Z;var oe={name:"glls5o",styles:"padding:unset;width:unset"};const ne=({close:e,context:{component:t,trackIds:r,type:i,view:o},modal:n})=>{const s=(0,K.Z)(),c=(0,_.useDispatch)(),d=(0,_.useSelector)(J.MA),u=(0,_.useSelector)(te.KJ),p=(0,_.useSelector)(D.Kh),g=(0,_.useSelector)(D.jc),h=(0,_.useSelector)(D.fE),b=(0,_.useSelector)(Q.II),[k,v]=(0,E.useState)(!1),[f,Z]=(0,E.useState)(null),[C,S]=(0,E.useState)(!1),[w,P]=(0,E.useState)({});(0,z.Z)((()=>{null!=d&&d.length||c((0,ee.z4)()),c((0,ae.Jf)(r))})),(0,R.Z)({pageName:H.JH.AddToPlaylist}),((e,t=!1)=>{const r=(0,_.useSelector)(Y.v4);(0,E.useEffect)((()=>{if(t){const{action:t,component:l,playlist:i,type:o,track:n,view:s}=e;let c=s,d=o;if(!s)if(Object.keys(i).length)switch(i.type){case"default":c=H.Ns.MyPlaylistProfile,d=X.bV.MY_PLAYLIST;break;case"new4u":c=H.Ns.NewForYouPlaylistProfile,d=X.bV.COLLECTION;break;default:d=X.bV.COLLECTION,c=i.curated?o===X.bV.COLLECTION?H.Ns.CuratedPlaylistProfile:H.Ns.PlaylistRadioProfile:H.Ns.UserPlaylistProfile}else c="album"===o?H.Ns.AlbumProfile:H.Ns.ArtistProfile;const{playlistId:u,curated:m,name:p,type:y,userId:g}=null!=i?i:{},h={action:t,id:u,location:`${c}|${l}|${t}`,name:p};switch(d){case X.bV.ALBUM:a.Z.trackSaveDelete(F({},h,n,{id:null==n?void 0:n.albumId,name:null==n?void 0:n.albumName,type:"album"}));break;case X.bV.ARTIST:a.Z.trackSaveDelete(F({},h,n,{id:null==n?void 0:n.artistId,name:null==n?void 0:n.artistName,trackArtistId:null==n?void 0:n.artistId,trackArtistName:null==n?void 0:n.artistName,trackId:null==n?void 0:n.trackId,trackName:String(null==n?void 0:n.trackTitle),type:"artist"}));break;case X.bV.COLLECTION:a.Z.trackSaveDelete(F({},h,{collection:{curated:m,id:u,type:y,userId:g},profileId:r,type:"collection"}));break;case X.bV.PLAYLIST_RADIO:a.Z.trackSaveDelete(F({},h,{collection:{curated:m,id:u,type:y,userId:g},type:"playlistradio"}));break;case X.bV.MY_PLAYLIST:a.Z.trackSaveDelete(F({},h,{collection:{curated:m,id:u,type:y,userId:g},type:"my_playlist"}))}}}),[t])})({action:H.JH.AddToPlaylist,component:t,playlist:(0,_.useSelector)(q.zi),track:w,type:i,view:o},C),(0,E.useEffect)((()=>{!k||p||b?k&&!p&&b&&c((0,le.j_)({title:s("Cannot add duplicate tracks to a playlist")})):(V.Z.track(ie.UpsellOpen,{type:"DUPLICATE_SONG_WEB",isTrialEligible:g,subscriptionType:h}),null!=a.Z&&a.Z.trackUpsellOpen&&a.Z.trackUpsellOpen({destination:l.PB,promotionSubscriptionTier:h,upsellFrom:$.Z.FREE_PLAYLIST_DUPLICATE_TRACK.id,upsellType:l.P,vendor:"Braze"}),e())}),[c,s,k,b,p,g,h,e]);const O=async(t,l=!1)=>{r.length&&t&&(await c((0,W.VX)({id:t.id,tracks:r,type:i,userId:t.userId,withAnalytics:!0})),((e,t=!1)=>{if(t)return;const l=i?s("Added {contentType} to {playlistName}",{contentType:i,playlistName:e}):s(["Added song to {playlistName}","Added songs to {playlistName}","numSongs"],{numSongs:r.length,playlistName:e});c((0,le.j_)({title:l,icon:re.G.CheckCircle})),P(u[r[0]]),S(!0)})(t.name,l)),e()};return(0,m.tZ)(n,{children:(0,m.tZ)(n.Container,{children:(0,m.BX)(n.Content,{css:oe,"data-test":"addToPlaylist-modal",children:[k&&f&&p&&(0,m.tZ)(y,{cancel:keepDuplicate:),!k&&!f&&(0,m.tZ)(M,{cancel:e,createPlaylist:()=>{var e;c((e={component:t,contentType:i,isAddToPlaylist:!0,name:"",showGrowl:!0,tracks:r,view:o},(0,le.h7)({id:G.eO.CreatePlaylist,context:e})))},"data-test":"playlist-modal-rows",playlists:d,selectPlaylist:(e,t)=>{(e=>{if(r.length>1)return!1;const[t]=r;return e.tracks.reduce(((e,r)=>e||t===r.trackId&&!0!==r.removed),!1)})(e)?(v(!0),Z(e)):O(e,t)}}),(0,m.tZ)(n.Close,{})]})})})}},10881:(e,t,r)=>{r.d(t,{Z:()=>u});var l=r(43012),a=r(12024),i=r(34853);const o=["width","blurSigma","src","mediaServerUrl","siteUrl"];ar s=r(71130),c=r(32034),d=r(75628);const u=(0,s.connect)((0,c.zB)({mediaServerUrl:d.C3,siteUrl:d.$2}))((function(e){let{width:t=200,blurSigma:r,src:s,mediaServerUrl:c,siteUrl:d}=e,u=e,o);const m=(0,a.p9)({mediaServerUrl:c,siteUrl:d},{blurSigma:r,width:t},s),p=(0,a.WP)({mediaServerUrl:c,siteUrl:d},{blurSigma:r,width:t});return(0,i.tZ)(l.Z,n({defaultSrc:p,src:m},u))}))},29714:(e,t,r)=>{r.d(t,{Z:()=>n});var l=r(50890),a=r(11129),i=r(96832),o=r(71130);const n=()=>{const e=(0,l.Z)("freeUserMyPlaylist"),t=(0,l.Z)("freeUserPlaylistCreation"),r=(0,l.Z)("internationalPlaylistRadio"),n=(0,o.useSelector)(a._o);return(0,i.useMemo)((()=>({freeUserPlaylistCreation:t,freeUserMyPlaylist:e,canCreateFreePlaylist:!n&&(t||r),canAddToMyPlaylist:!n&&(e||r)})),[t,e,r,n])}},40039:(e,t,r)=>{r.d(t,{Z:()=>n});var l=r(66480),a=r(65580),i=r(61993),o=r(96832);const n=function(e,{trackOnDidUpdate:t=!1,trackOnDidMount:r=!0}={}){const n=(0,o.useRef)(!1),s=(0,o.useCallback)((e=>!!("function"==typeof e?e():e)),[]),c=(0,o.useCallback)((()=>{null==l.Z.trackPageView||l.Z.trackPageView(e),a.Z.track(l.z.PageView,e)}),[e]);return(0,i.Z)((()=>{s(r)&&c(),n.current=!0})),(0,o.useEffect)((()=>{n.current&&s(t)&&c()}),[c]),c}},87805:(e,t,r)=>{r.d(t,{Z:);var l=r(46255),a=r(51588),i=r(15001),o=r(34737),n=r(28744);const s=(0,l.Z)(n.Z,{target:"e688iol0"})((({center:e=!1,customStyles:t={},floatRight:r=!1,marginLeft:l="0",marginRight:n="0",marginTop:s="0",isBlock:c=!1,styleType:d="dark",theme:u})=>{const m={dark:{backgroundColorDisabled:u.colors.gray[200],borderColor:u.colors.gray[500],hoverColor:u.colors.black.dark,hoverOpacity:.15,textColor:u.colors.gray[500],textColorDisabled:u.colors.gray[500]},light:{backgroundColorDisabled:u.colors.gray[300],borderColor:u.colors.white.primary,hoverColor:u.colors.white.primary,hoverOpacity:.3,textColor:u.colors.white.primary,textColorDisabled:u.colors.gray[500]}},p=(0,a.Z)({},m[d],t),y=(0,o.Z)(p.hoverColor,p.hoverOpacity);return{backgroundColor:u.colors.transparent.primary,border:`1px solid ${p.borderColor}`,float:r?"right":"none",margin:e?"auto":0,marginLeft:l,marginRight:n,marginTop:s,color:p.textColor,width:c?"100%":"auto","i, svg":{marginRight:"0.5rem"},"&:not(:disabled):hover":{[i.Z.toString()]:{backgroundImage:`radial-gradient(circle, ${u.colors.transparent.primary} 1%, ${y} 1%)`,backgroundColor:y,backgroundPosition:"center",backgroundSize:"15000%"}},"&:not(:disabled):active":{[i.Z.toString()]:{backgroundColor:"transparent",backgroundSize:"100%",transition:"background 0s"}},"&:disabled":{backgroundColor:p.backgroundColorDisabled,border:"none",color:p.textColorDisabled}}}),"")}}]);
//# sourceMappingURL=AddToPlaylistModal.www.js.map