"use strict";function(window){function argSlice(e,t){for(var n=[],o=t=t||0;o<e.length;o++)n.push(e[o]);return n}var loadScript=function(o,i){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return new Promise(function(t,n){try{var e;"js"==i?((e=document.createElement("script")).type="text/javascript",e.async=r,e.src=o):"css"==i&&((e=document.createElement("link")).setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",o)),e.addEventListener("load",,e.addEventListener("error",function(e){n({status:!1,message:"Failed to load the script ".concat(o)})}),document.head.appendChild(e)}catch(e){n(e)}})};function plugin_setDmpId(){var e=getCookie(GRX_COL_UUID_COOKIE_NAME);grx("set","dmpId",e)}function plugin_setDeviceCategory(){var e="desktop",t=navigator.userAgent;-1<t.indexOf("iPad")||-1<t.indexOf("Android")&&-1===t.indexOf("Mobi")?e="tablet":(-1<t.indexOf("Phone")||-1<t.indexOf("Mobi"))&&(e="mobile"),grx("set","deviceCategory",e)}function plugin_showNotificationWelcomeMessage(e,o){grx("addListener","notification_permission_allowed",function(){var t,n=o||{title:"Thank You",content:"for subscribing to notification"};try{t=new Notification(n.title,{body:n.content,icon:n.icon,image:n.image,badge:n.badge,data:{url:n.url,flag:"grx"}})}catch(e){sw_registration&&(t=sw_registration.showNotification(n.title,{body:n.content,icon:n.icon,image:n.image,badge:n.badge,data:{url:n.url,flag:"grx"}}))}t&&(t.onclick=function(e){e=e.target.data;t.close(),e&&e.url&&window.open(e.url)})})}function plugin_trackUtm(e){var t,n,o=window.location.search;-1<o.indexOf("utm_")&&(void 0===e.projectCode?log("Call grx.init() with projectCode before sending trackevent"):(t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],n={},(((e="?"===o[0]?o.substr(1):o)?e.split("&"):[])||[]).map(function(e){!e||(e=e.split("="))[0]&&0<e[0].length&&e[1]&&0<e[1].length&&0<=t.indexOf(e[0])&&(n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||""))}),grx("track","attribution",n)))}function plugin_AMPPush(e,t){try{var n=o=function(e,t){var n;e&&(n="invisible",t?e.classList.remove(n):e.classList.add(n))},i=function(){return!!window.opener&&window.opener!==window},r=document.querySelector("#preload"),a=document.querySelector("#postload"),c="invisible";r.classList.add(c),a.classList.remove(c),n();for(var s=window.document.querySelectorAll("[permission]"),l=0;l<s.length;l++){var p=s[l];o(p,!1)}(p=window.document.querySelector("[permission="+CSS.escape(window.Notification.permission)+"]"))&&o(p,!0),grx("init",t.projectCode,{service_worker:t.serviceWorker,url:t.url}),grx("config","askPermission",!0),t.applicationServerKey&&grx("config","applicationServerKey",t.applicationServerKey),grx("enablePush"),document.addEventListener("push_subscribed_event",function(e){n(),i()?window.close():console.log("not pop up")})}catch(e){console.error(e)}}var liveSegmentHelperfn={checkName:function(e,t){return void 0!==e.find(function(e){return"grx_name"===e.field&&(e.value===t||"*"===e.value)})},checkProperties:function(e,o,i){var r=!0,e=e.map(function(e,t){var n;return"property"===e.identifier?((n=liveSegmentHelperfn.checkEachCriteria(e,t,o,i))||(r=!1),n):"CountCriterion"!==e._ct||liveSegmentHelperfn.checkEachCriteria(e,t,o,i)});return r&&this.incrCampaignEventCount(i),log("["+i.campaignId+"] Checked props",e),-1===e.indexOf(!1)},getCriteriaForCampaign:function(e){try{return e.liveSegment.BEHAVIOR.andQueries[0].orQueries[0].criteria}catch(e){return[]}},checkCampaign:function(e,t,n){var o=this.getCriteriaForCampaign(e);if(!o)return log("["+e.campaignId+"] No campaign criteria found"),!1;log("["+e.campaignId+"] Checking campaign with criteria ",o);t=this.checkName(o,t);if(log("["+e.campaignId+"] Criteria name match",t),!t)return!1;t=this.checkProperties(o,n,e);return log("["+e.campaignId+"] Criteria props match",t),!!t},checkEachCriteria:function(e,t,n,o){var i=n[e.field];switch(e._ct){case"MatchCriterion":if(!i)return!1;switch(log("["+o.campaignId+"] Checking criteria ",t,":",e._ct,e.matchingType,e.field,"=",e.value," for ",i),e.matchingType){case"EQUALS":return i===e.value;case"LIKE":return-1<e.value.indexOf(i);case"NOTLIKE":return-1===e.value.indexOf(i);case"MATCH":return Boolean(i.match(e.value));case"NOTMATCH":return!Boolean(i.match(e.value));case"STARTS_WITH":return 0===e.value.indexOf(i);case"ENDS_WITH":return e.value.indexOf(i)===e.value.length-i.length;case"CONTAINS":return-1<e.value.indexOf(i);case"EQUALS_IGNORE_CASE":return i.toLowerCase()===e.value.toLowerCase();case"NOTCONTAINS":return-1===e.value.indexOf(i);case"ISNULL":return null===i;case"NOTNULL":return null!==i}break;case"CountCriterion":var r=this.getCampaignEventCount(o);switch(log("["+o.campaignId+"] Checking criteria ",t,":",e._ct,e.type,e.value,",stored val:",r),e.type){case"ATLEAST":return r>=e.value;case"LESS_THAN":return r<e.value;case"EXACTLY":return r===e.value}break;case"NumberCriterion":switch(e.matchingType){case"LESS_THAN":return i<e.value;case"GREATER_THAN":return i>e.value;case"LESS_THAN_EQUAL_TO":return i<=e.value;case"GREATER_THAN_EQUAL_TO":return i>=e.value;case"EXACTLY":return i===e.value}break;case"boolCriterion":switch(e.matchingType){case"true":return i;case"false":return!1===i}break;case"BetweenCriterion":case"InRangeTimeCriterion":var a=new Date(e.to).getTime(),c=new Date(e.from).getTime(),s=new Date(i).getTime();return c<=s&&s<=a;case"InLastTimeCriterion":return i===e.time;default:return!1}return!1},getCountKey:function(e){var t="",t="custom-popup"===e.campaignId?"liveSegment-count":"campaign-count";return"grx-"+config.projectCode+"-"+t},getCampaignCounts:function(e){var t=this.getCountKey(e),t=getValue(t),n={};return t?n=JSON.parse(t):n[e.campaignId]={},n[e.campaignId]||(n[e.campaignId]={}),n},getCampaignEventCount:function(e){var t=this.getCampaignCounts(e),n=this.getRetentionKey(e),o=(this.cleanRetentionKeys(e,t[e.campaignId],n),t[e.campaignId][n]);return void 0===o&&(o=this.incrCampaignEventCount(e)),t[e.campaignId][n]=o},incrCampaignEventCount:function(e,t){var n=this.getCountKey(e),o=this.getCampaignCounts(e),i=this.getRetentionKey(e),r=(this.cleanRetentionKeys(e,o[e.campaignId],i),o[e.campaignId][i]);return log("["+e.campaignId+"] Incr campaign event count [",n,"] from ",r=void 0===r?0:r," to ",r+1),o[e.campaignId][i]=++r,setValue(n,JSON.stringify(o),30),r},cleanRetentionKeys:function(t,n,o){Object.keys(n).forEach(function(e){0!==e.indexOf("DAY-")&&0!==e.indexOf("SESSION-")||e===o?log("["+t.campaignId+"] NOT DELETING",e):(log("["+t.campaignId+"] DELETING",e),delete n[e])})},getRetentionKey:function(e,t,n){switch(t||e.retention){case"day":return"DAY-"+getYYYYMMDD(n);case"session":return"SESSION-"+getSessionId();case"campaign_lifetime":return"LIFETIME";default:return"default"}},getCappingKey:function(e){var t="",t="custom-popup"===e.campaignId?"liveSegment-capping":"campaign-capping";return"grx-"+config.projectCode+"-"+t},cleanCappingKeys:function(t,n,o){Object.keys(n).forEach(function(e){-1===o.indexOf(e)?(log("["+t.campaignId+"] DELETING CAPPING",e),delete n[e]):log("["+t.campaignId+"] NOT DELETING CAPPING",e)})},getDayRetentionKeys:function(e,t){for(var n=[],o=(new Date).getTime(),i=0;i<t;i++){var r=new Date(o-864e5*i),r=this.getRetentionKey(e,"day",r);n.push(r)}return n},isCapped:function(n){log("["+n.campaignId+"] Checking capping for campaign",n.campaignId);var e=this.getCappingKey(n),o=this.getCappingCount(n),t=this.getRetentionKey(n,"session"),i=this.getDayRetentionKeys(n,30);return i.push(t),i.push("LIFETIME"),this.cleanCappingKeys(n,o[n.campaignId],i),setValue(e,JSON.stringify(o),30),!!(n.capping&&0<n.capping.length)&&(t=n.capping.map(,log("["+n.campaignId+"] Capping response",t),-1<t.indexOf(!0))},checkEachCapping:function(t,e,n,o){switch(log("["+t.campaignId+"] Checking capping ",o,e),e._ct){case"DayCapping":var i=1;return this.getDayRetentionKeys(t,e.duration).map(function(e){i+=n[t.campaignId]&&n[t.campaignId][e]?n[t.campaignId][e]:0}),i&&i>e.count?!0:!1;case"DNDCapping":var r=(new Date).getDay();if(e.day==["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"][r]){if(!e.startTime||!e.endTime)return!0;var r=parseInt(getHHMM(),10),a=parseInt(e.endTime,10);if(parseInt(e.startTime,10)<=r&&r<=a)return!0}return!1;case"SessionCapping":r=this.getRetentionKey(t),a=n[t.campaignId]?n[t.campaignId][r]:0;return a>e.count-1?(log("["+t.campaignId+"] Session capped for campaign",t.campaignId," at ",e.count,", stored value:",a),!0):!1;default:return!1}},getCappingCount:function(e){var t=this.getCappingKey(e),t=getValue(t),n={};return(n=t?JSON.parse(t):n)[e.campaignId]||(n[e.campaignId]={}),n},incrCapping:function(e,t){var n=this.getCappingKey(e),o=this.getCappingCount(e),i=this.getRetentionKey(e,"day"),i=(o[e.campaignId][i]||(o[e.campaignId][i]=0),o[e.campaignId][i]=o[e.campaignId][i]+1,this.getRetentionKey(e,"session")),i=(o[e.campaignId][i]||(o[e.campaignId][i]=0),o[e.campaignId][i]=o[e.campaignId][i]+1,this.getRetentionKey(e,"campaign_lifetime"));o[e.campaignId][i]||(o[e.campaignId][i]=0),o[e.campaignId][i]=o[e.campaignId][i]+1,setValue(n,JSON.stringify(o),30)}};function plugin_inApp(c){var n=[],o=!0,s=nlog("inApp");function t(e,t){s("checkAndRunInAppAlerts",e,t),o?(s("holding Event",e,t),n.push({event_name:e,properties:t})):r(e,t)}function i(){0===n.length?(o=!1,s("NO HeldRules")):(s("running HeldRules"),n.forEach(,o=!1)}function r(i,r){if(!i||0!==i.indexOf("NOTI_"))if(s("runRule",i,r),t=getValue("grx-"+c.projectCode+"-campaigns",!0))try{var a=[],t=JSON.parse(t);s("Got Stored campaigns",t),t.forEach(function(e){liveSegmentHelperfn.checkCampaign(e,i,r)&&a.push(e.campaignId)}),a&&0<a.length?(s("valid campaigns",a),t.forEach(function(e){if(-1<a.indexOf(e.campaignId))if(liveSegmentHelperfn.isCapped(e))s("["+e.campaignId+"] Campaign capped: ",e.campaignId);else{var t=e,n=t.behaviourSegmentId;if(s("["+t.campaignId+"] Campaign checkSegments"),n){s("["+t.campaignId+"] Found behaviour segment, checking with server",n);try{var o=getUrl().replace("/track","/user/project-"+c.projectCode+"/platform-web/user-segment?segmentId="+n+"&gid="+_grx.getGID());fetch(o,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){s("["+t.campaignId+"] Server response for",n,e.exists),e.exists&&l(t)})}catch(e){sendException(e)}}else l(t)}else s("No valid campaign for this event",i,r)})):s("No valid campaign for this event",i,r)}catch(e){s(e),s("ERROR in parsing campaign",t)}else s("No Stored Campaign",t)}function l(e){var t;a(e.campaignType)?(t=function(e){if(1===e.campaignType.length)return{campaignType:e.campaignType[0].type,properties:e.properties[0],campaignId:e.campaignId};for(var t=Math.floor(99*Math.random())+1,n=0,o=0,i=0;i<e.campaignType.length;i++)if(n+=Number(e.campaignType[i].allocation),t<n){o=i;break}return{campaignType:e.campaignType[o].type,properties:e.properties[o],campaignId:e.campaignId+"__"+e.campaignType[o].name}}(e),e.campaignType=t.campaignType,e.properties=t.properties,e.campaignId=t.campaignId):a(e.properties)&&(e.properties=e.properties[0]),p(e)}unction p(i){_grx.track("NOTI_SENT_SUCCESS",{grx_notificationId:i.campaignId,grx_notificationType:"INAPP",grx_workflowId:i.campaignId.split("__")[0]}),i.delay&&0<i.delay&&s("["+i.campaignId+"] Adding delay of ",i.delay,"seconds"),setTimeout(function(){var t=i;try{var e=new Date(getValue("grx-"+c.projectCode+"-lastInAppDateTime",new Date)),n=((new Date).getTime()-e.getTime())/1e3,o=n-t.dwell_time;s("["+t.campaignId+"] Checking dwellTime(",t.dwell_time,"secs): last trigger time",e,", ",timeConvert(n/60),"ago. has dwell:",o),!o||0<o?u(t):(_grx.track("NOTI_CRITERION_FAILED",{grx_notificationId:t.campaignId,grx_notificationFailReason:"Dwell time limit: "+-1*o+" seconds remaining",grx_notificationType:"INAPP",grx_workflowId:t.campaignId.split("__")[0]}),s("["+t.campaignId+"] Dwell time limit for ",t.campaignId,",remaining dwell time:",Math.floor(-1*o),"seconds"))}catch(e){u(t)}},1e3*(i.delay||0))}function u(e){liveSegmentHelperfn.incrCapping(e),_grx.track("NOTI_DELIVERED",{grx_notificationId:e.campaignId,grx_notificationType:"INAPP",grx_workflowId:e.campaignId.split("__")[0]}),setValue("grx-"+c.projectCode+"-lastInAppDateTime",new Date),s("["+e.campaignId+"] dispatch 'in_app_notification' event",e),"custom"==e.campaignType||"silent"==e.campaignType?_grx.dispatch("in_app_notification",e):_grx.showCampaign(e.campaignType,e.properties)}s("Registered plugin: inApp");var e=getValue("grx-"+c.projectCode+"-campaigns-fetched-at"),g=new Date(e);if((g=new Date-(e?g:0))>c.campaignInterval){s("Fetching campaign for project:",c.projectCode);var d=getUrl().replace("/track","/user/project-"+c.projectCode+"/platform-web/campaigns/list");try{s("Fetching campaign url:",d),fetch(d,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){e.forEach(function(t){try{t.campaignType=JSON.parse(t.campaignType)}catch(e){t.campaignType=t.campaignType}}),setValue("grx-"+c.projectCode+"-campaigns-fetched-at",new Date),s("Got campaign",e),setValue("grx-"+c.projectCode+"-campaigns",JSON.stringify(e),30),s("Stored campaigns"),i()})}catch(e){sendException(e)}}else s("NOT fetching campaign for project:",c.projectCode,"\r\n          Last fetched",timeConvert(g/1e3/60)," ago at :",e),i();return _grx.addListener("after_event",function(e){s("after_event",e.detail),t(e.detail.name,e.detail.properties)}),{runInAppAlerts:t}}!function(e){"undefined"!=typeof exports&&_typeof(exports),e()}(function(){ar t=setTimeout;pe.catch=r.prototype.then=r.prototype.finally=e,r.all=function(t){return new r(function(i,r){if(!s(t))return r(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return i([]);var c=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"===_typeof(e)||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,r)}a[n]=e,0==--c&&i(a)}catch(e){r(e)}}(e,a[e])})},r.resolve=r.reject=r.race=r._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:r._unhandledRejectionFn=var n=function(){if("undefined"!=typeof self)return self;if(void 0!==window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in n?n.Promise.prototype.finally||(n.Promise.prototype.finally=e):n.Promise=r}),window.console&&window.console.log||(window.console={log:function(){}});try{var version=function(e){for(var t=e.split("."),n="1",o=0;o<t.length;o++)n+=prefix(t[o],3,0);return parseInt(n)},prefix=function(e,t,n){var o=(e+"").length;if(0<t-o){for(var i=e,r=0;r<t-o;r++)i=n+""+i;return i}return e+""},checkLiveSegmentExistsInStorage=function(){return!!getValue("grx_custompopup_liveSegment",!0)},getCustomPopUpDetails=function(e,t,n,o){log("get CustomPopUp Details"),checkLiveSegmentExistsInStorage()&&!o?(config.customPopUpPayload={},config.customPopUpPayload.campaignId="custom-popup",config.customPopUpPayload.retention="session",config.customPopUpPayload.capping=[{_ct:"SessionCapping",type:"day",duration:null,count:0,startTime:null,endTime:null,day:null}],config.customPopUpPayload.liveSegment=JSON.parse(getValue("grx_custompopup_liveSegment")),custompopupLiveSegment(config)):fetch(e,{method:"get",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(.then(.then(function(e){log("Request succeeded with JSON response",e),t&&e&&0<Object.keys(e).length?(e.campaignId="custom-popup",e.retention="session",e.capping=[{_ct:"SessionCapping",type:"day",duration:null,count:1,startTime:null,endTime:null,day:null}],"IMMEDIATE"===(config.customPopUpPayload=e).popupSelected.text?(setValue("grx_custompopup_liveSegment",null),t()):"USER_SPEND_TIME"===e.popupSelected.text&&0<e.popupSelected.value?(setValue("grx_custompopup_liveSegment",null),setTimeout(function(){t()},1e3*e.popupSelected.value)):"LIVE_SEGMENT"===e.popupSelected.text&&(n?(setValue("grx_custompopup_liveSegment",JSON.stringify(e.liveSegment),1/6),custompopupLiveSegment(config)):t())):localStorage.setItem("noCustomPopUpSession",(new Date).getTime()+18e5)}).catch(function(e){log("Request failed",e)})},custompopupLiveSegment=function(r){var a=nlog("custompopupLiveSegment");function t(e,t){a("checkAndRunCustomPopEventAlerts",e,t);if(!e||0!==e.indexOf("NOTI_")){a("runRule",e,t);var n,o=r.customPopUpPayload,i=o&&o.liveSegment;if(i)try{a("Got Stored liveSegment",i),liveSegmentHelperfn.checkCampaign(o,e,t)&&!liveSegmentHelperfn.isCapped(o)?(n=liveSegmentHelperfn.getCountKey(o),setValue(n,null),liveSegmentHelperfn.incrCapping(o),getCustomPopUpDetails(r.custom_popup_base_url+"project-".concat(r.projectCode,"/popup?type=").concat(isMobileUI()?"mobile":"desktop"),showCustomPopUp,!1,!0)):a("No valid campaign for this event",e,t)}catch(e){a(e),a("No live segment catch block found")}else a("No live segment found")}}a("Registered plugin: custompopupLiveSegment"),_grx.addListener("after_event_custompopup",function(e){a("after_event_custompopup",e.detail),t(e.detail.name,e.detail.properties)})},getDocHeight=getmeasurements=function(){winheight=window.innerHeight||(document.documentElement||document.body).clientHeight,docheight=getDocHeight(),trackLength=docheight-winheight},amountscrolled=function(){var e=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;return Math.floor(e/trackLength*100)},isMobileUI=checkCriteriaForPopUp=function(){var e=localStorage.getItem("laterBtnClicked"),t=localStorage.getItem("backDropClicked"),n=localStorage.getItem("noCustomPopUpSession"),o=(new Date).getTime();return!(n&&o<n||e&&o<e||t&&o<t)},customPopUpBtnHandler=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=config.customPopUpPayload,e=(new DOMParser).parseFromString(e,"text/html"),i=e.getElementById("grx_cp_container"),r=e.getElementById("grx_cp_allowBtn"),a=e.getElementById("grx_cp_laterBtn"),c=e.getElementById("grx_cp_main");return i&&i.addEventListener("click",function(){var e=document.getElementById("grx_cp_container");e&&(n&&_grx.track("CUSTOM_CLOSE"),document.body.removeChild(e),0<o.promptRepeat.value&&(localStorage.setItem("backDropClicked",(new Date).getTime()+1e3*o.promptRepeat.value),localStorage.removeItem("laterBtnClicked")))}),c&&c.addEventListener("click",function(e){e.stopPropagation()}),r&&n&&(t||(r.style.backgroundColor=o.allowBtn.bgCode,r.style.color=o.allowBtn.value,r.innerText=o.allowBtn.text),r.addEventListener("click",function(){var e=document.getElementById("grx_cp_container");e&&(_grx.track("CUSTOM_ALLOW"),grx("enablePush"),document.body.removeChild(e),localStorage.removeItem("laterBtnClicked"),localStorage.removeItem("backDropClicked"))})),a&&(t||(a.style.backgroundColor=o.laterBtn.bgCode,a.style.color=o.laterBtn.value,a.innerText=o.laterBtn.text),a.addEventListener("click",function(){var e=document.getElementById("grx_cp_container");e&&(n&&_grx.track("CUSTOM_LATER"),document.body.removeChild(e),0<o.laterPromptRepeat.value&&(localStorage.setItem("laterBtnClicked",(new Date).getTime()+1e3*o.laterPromptRepeat.value),localStorage.removeItem("backDropClicked")))})),{dom:e,backdrop:i}},showCustomPopUp=function(){var n,e,t;checkCriteriaForPopUp()&&("denied"===Notification.permission?(t=config.customPopUpPayload.blockCustomHTML)&&(_grx.track("CUSTOM_BLOCK"),e=(t=customPopUpBtnHandler(t,!0,!1)).dom,t=t.backdrop,0<e.getElementsByTagName("style").length&&document.head.appendChild(e.getElementsByTagName("style")[0]),document.body.appendChild(t)):"default"!==Notification.permission&&isSubscribed()||(_grx.track("CUSTOM_SHOW"),"CUSTOMHTML"===(n=config.customPopUpPayload).template?(e=n.htmlContent,e=(t=customPopUpBtnHandler(e,!0)).dom,t=t.backdrop,0<e.getElementsByTagName("style").length&&document.head.appendChild(e.getElementsByTagName("style")[0]),document.body.appendChild(t)):Promise.all([loadScript("".concat(config.custom_popup_template_url,"custompopupTemplate.js"),"js"),loadScript("".concat(config.custom_popup_template_url,"custompopupTemplate.css"),"css")]).then(function(e){var t=getCustomPopUpTemplate(n),t=customPopUpBtnHandler(t,!1).backdrop;document.body.appendChild(t)}).catch())},askPermission=function(e){return"granted"===Notification.permission?(log("Notification Permission ",Notification.permission),new Promise(function(e,t){e(Notification.permission)})):"denied"===Notification.permission?(log("Notification Permission ",Notification.permission),new Promise(function(e,t){e(Notification.permission)})):e?(log("Notification Permission is default, asking"),isSubscribed()&&setUnSubscribed(),new Promise(.then(function(e){return"granted"===e?(log("Notification permission granted.",e),_grx.track("NATIVE_ALLOW"),_grx.dispatch("notification_permission_allowed")):"denied"===e?(log("Notification permission denied.",e),_grx.track("NATIVE_BLOCK"),_grx.dispatch("notification_permission_blocked")):(log("Notification permission default.",e),_grx.track("NATIVE_CLOSE"),_grx.dispatch("notification_permission_closed")),e})):(log("Not asking Notification Permission ",Notification.permission),new Promise()},registerServiceWorker=function(e){return config.service_worker?(log("Registering service worker: "+config.service_worker,"with permission: ",e),navigator.serviceWorker.register(config.service_worker).then(function(e){return(sw_registration=e).update(),log("Service worker successfully registered."),send_message_to_sw(config),e}).catch(function(e){log("Unable to register service worker.",e)})):(log("Not Registering service worker: value is ",config.service_worker),!1)},isSubscribed=setSubscribed=function(e){setValue("subscribe_push",JSON.stringify(e),10)},setUnSubscribed=getSubscription=getSubscriptionStr=function(t){return getSubscription(t).then(function(e){return e?(log("Retrieved PushSubscription: "+JSON.stringify(e)),log("with applicationServerKey: "+getApplicationServerKey(e)),validateApplicationServerKey(e,t)):(log("Could not get Subscription: "+e),null)}).catch(function(e){log("Error in get subscription",e)})},resubscribe=function(e,o){return new Promise(function(t,n){o.unsubscribe().then(function(){subscribe(e).then(function(e){log("subscribed: ",e),(e?t:n)(e)}).catch(n)}).catch(n)})},subscribe=function(n){var e={userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array(config.applicationServerKey)};return getSubscription(n).then(function(t){return t?JSON.parse(JSON.stringify(t)):n.pushManager.subscribe(e).then(function(e){return log("Subscribed PushSubscription: "+JSON.stringify(e)),log("with applicationServerKey: "+getApplicationServerKey(e)),JSON.parse(JSON.stringify(e))}).catch(}).catch(function(e){log("Error in getSubscription",e)})},subscribeUserToPush=function(o){if(o){if("granted"===Notification.permission){if(!config.applicationServerKey)return log("applicationServerKey is "+config.applicationServerKey),!1;var e=isSubscribed();return new Promise(function(t,n){return e&&"{"===e[0]?(log("Already subscribed to push"),getSubscriptionStr(o).then(t).catch(n)):(setUnSubscribed(),log("Getting current subscription"),getSubscription(o).then(function(e){return log("Got PushSubscription: "+JSON.stringify(e)),log("with applicationServerKey: "+getApplicationServerKey(e)),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({payload:"amp-web-push-subscribe"}),(e?validateApplicationServerKey(e,o):subscribe(o)).then(t).catch(n)}).catch(function(e){return log("No existing subscription",e),subscribe(o).then(t).catch(n)}))})}log("Cannot subscribe to push, notification permission not granted"),"denied"===Notification.permission&&(navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({payload:"amp-web-push-subscription-state"}),_grx.dispatch("push_subscribed_event"))}else log("Cannot subscribe to push, service worker not registered")},validateApplicationServerKey=function(o,i){return new Promise(function(e,t){var n=getApplicationServerKey(o);n&&n!==config.applicationServerKey?(log("applicationServerKey Mismatch. \nExisting: "+n,"\nNew     : "+config.applicationServerKey),log("Unsubscribing existing subscription"),resubscribe(i,o).then(e).then(t)):o&&e(JSON.parse(JSON.stringify(o)))})},getApplicationServerKey=function(e){return e&&e.options&&e.options.applicationServerKey&&Uint8ArrayTourlBase64(e.options.applicationServerKey)},sendToServer=function(o,i){var e,t=isSubscribed();if(t&&0<t.length&&!o&&"granted"!==Notification.permission)return log("Sending push_unsubscribed to server"),setUnSubscribed(),t=null,new Promise(;{if(o)return t=JSON.stringify(o)!==t,e=window.localStorage&&(!localStorage.getItem("last_push_refresh_time")||(new Date).getTime()-new Date(localStorage.getItem("last_push_refresh_time")).getTime()>config.default_push_refresh_time),t||e?(log("Sending subscription to server"),setSubscribed(o),new Promise(function(e,t){window.localStorage&&localStorage.setItem("last_push_refresh_time",new Date);var n={endpoint:o.endpoint,expirationTime:o.expirationTime,keys_p256dh:o.keys.p256dh,keys_auth:o.keys.auth,uninstalled:!1};_grx.dispatch("push_subscribed_event"),i?_grx.profile("push_refresh",n):_grx.profile("push_subscription",n),e()})):void log("Already sent to server");log("Cannot send to server, no push subscription")}},Uint8ArrayTourlBase64=urlBase64ToUint8Array=send_message_to_sw=function(o){return new Promise(function(t,n){var e=new MessageChannel;e.port1.onmessage=function(e){e.data.error?n(e.data.error):(window.grx.apply(_grx,e.data),t(e.data))},navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage(o,[e.port2])})},getNetworkBandwidth=function(){var e,t,n="";return window.navigator&&window.navigator.connection?(e=navigator.connection.downlink,t=navigator.connection.rtt,Number(e)&&(Number(t)||0===t)&&(e<=.28&&800<t?n="2G":.28<e&&e<=.4&&t<=800&&400<t?n="SLOW-3G":.4<e&&e<=1.6&&t<=400&&150<t?n="3G":1.6<e&&t<=150?n="FAST-3G":e<=.28?n="2G":.28<e&&e<=.4?n="SLOW-3G":.4<e&&e<=1.6?n="3G":1.6<e&&(n="FAST-3G"))):log("This browser does not support navigator.connection"),n},getEventObject=function(e,t,n,o,i,r){n=n||{};n=Object.assign({},config.page_properties,n,{subDomain:config.subDomain,networkBandwidth:getNetworkBandwidth(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,grx_3pc:config.grx_3pc}),r={projectCode:r||config.projectCode,gid:config.anonymous_id,name:e,type:t,properties:n,platform:config.platform,sdkVersion:config.sdkVersion,sdkBuild:config.sdkBuild,createdAt:(new Date).getTime(),sessionId:getSessionId(),insertId:generateUUID(),nonInteraction:o,userId:config.userId};return i&&(r.operations=i),r},_grx=(Function.prototype.bind||(Function.prototype.bind=function(){var t=this,n=arguments[0],o=argSlice(arguments,1);if("function"!=typeof t)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return function(){var e=o.concat(argSlice(arguments));return t.apply(n,e)}}),!),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:configurable:!0,writable:!0}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var o=Object(o),i=Object.keys(Object(o)),r=0,a=i.length;r<a;r++){var c=i[r],s=Object.getOwnPropertyDescriptor(o,c);void 0!==s&&s.enumerable&&(t[c]=o[c])}}return t}}),window.fetch||(window.fetch=function(i,r){return new Promise(function(e,t){var n=null;if(window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),null!==n){for(var o in n.open(r.method,i),n.timeout=3e4,r.headers)n.setRequestHeader(o,r.headers[o]);n.onerror=function(e){t(e)},n.ontimeout=n.onreadystatechange=function(){4===n.readyState&&(202<n.status?(n.status,n.responseText,t(new Error(n.responseText))):e({body:n.responseText,json:))},n.send(r.body)}})}),{}),preLoadEvents=window.grx&&window.grx.q?window.grx.q:[],eventListArr=[],VERSION=(window.grx=function(){var e=arguments[0],t=argSlice(arguments,1);if(_grx[e]&&"function"==typeof _grx[e])return _grx[e].apply(_grx,t)},"8.0.2"),GRX_COOKIE_NAME="_grx",GRX_SESSION_COOKIE_NAME="_grxs",GRX_COL_UUID_COOKIE_NAME="_col_uuid",plugins={setDmpId:plugin_setDmpId,setDeviceCategory:plugin_setDeviceCategory,showNotificationWelcomeMessage:plugin_showNotificationWelcomeMessage,trackUtm:plugin_trackUtm,inApp:plugin_inApp,ampPush:plugin_AMPPush},plugin_fn={},DEFAULT_SERVICE_WORKER="/sw.js",config={key:"config",sdk:"growthrx",url:"https://api.growthrx.in/v2/track",attribution_tracking:!1,platform:"web",sdkVersion:VERSION,sdkBuild:version(VERSION),timeInterval:1,campaignInterval:216e5,defaultInterval:1,sessionTime:30,eventFireTimer:5,timeout:5,service_worker:DEFAULT_SERVICE_WORKER,askPermission:!0,applicationServerKey:"BJbc9ibd8jputjGDrpcWO32Ky80HfmSo7eo87NqZnE4DUlOsWLBvlE2ODc-2CkOMMgxlORpeLercmKcnP9rGccA",page_properties:{},trackCb:null,default_push_refresh_time:1728e5,custom_popup_base_url:"https://api.growthrx.in/v2/user/",custom_popup_template_url:"https://static.growthrx.in/js/v2/",showPopUp:!0,customPopUpPayload:null,grx_3pc:""},sw_registration;try{"cookieDeprecationLabel"in navigator&&navigator.cookieDeprecationLabel.getValue().then(function(e){config.grx_3pc=e})}catch(e){}var generateUUID=post=function(e,t,n,o){log("sending data ",t),fetch(e,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",sentAt:(new Date).getTime()},timeout:1e3*config.timeout,body:JSON.stringify(t),keepalive:!o}).then(.then(function(e){config.timeInterval=config.defaultInterval,log("Request succeeded with JSON response",e),n&&n(null,e)}).catch(},exists=function(e){return void 0!==e&&""!==e&&null!=e},setCookie=function(e,t,n,o,i){var r=new Date,n=(r.setTime(r.getTime()+24*n*60*60*1e3),"expires="+r.toUTCString());i=i||"/",o=o||location.hostname,document.cookie=e+"="+t+";"+n+";domain="+o+";path="+i+"; Secure; SameSite=Strict"},getCookie=function(e){var t=e+"=",e=decodeURIComponent(document.cookie);if(e)for(var n=e.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},getValue=function(e,t){var n,o=null;return window.localStorage&&((o=localStorage.getItem(e))&&-1<o.indexOf("~~")?(n=o.split("~~"),parseInt(n[1])<(new Date).getTime()?(o=null,t&&localStorage.removeItem(e)):o=n[0]):o&&-1<o.indexOf("[]")&&(n=o.split("[]"),parseInt(n[1])<(new Date).getTime()?(o=null,t&&localStorage.removeItem(e)):o=n[0])),null!==o?o:getCookie(e)},setValue=function(t,n,o){var e=24*(o=o||30)*60*60*1e3,e=(new Date).getTime()+e;if(window.localStorage)if(null==n)localStorage.removeItem(t);else try{localStorage.setItem(t,n+"~~"+e)}catch(e){setCookie(t,n,o)}else setCookie(t,n,null==n?0:o)},clog="true"===getValue("grx_log")?Function.prototype.bind.call(window.console.log,window.console):function(){},log=function(){void 0!==window.console&&"true"===getValue("grx_log")&&Array.from&&clog.apply(clog,["GRX_LOG: "].concat(Array.from(arguments)))},nlog=function(e){return function(){log.apply(log,[e+": "].concat(Array.from(arguments)))}},getAnonymousId=(log("GrowthRx SDK: v"+config.sdkVersion),function(){var e=getCookie(GRX_COOKIE_NAME);return exists(e)?(setAnonymousId(e),setValue("coke_uuid",null)):(e=getValue("coke_uuid"),exists(e)?(setAnonymousId(e),setValue("coke_uuid",null)):(e=generateUUID(),setAnonymousId(e))),e}),setAnonymousId=function(e){var t=getRootDomain();setCookie(GRX_COOKIE_NAME,e,730,t,"/")},getSessionId=function(){var e=getCookie(GRX_SESSION_COOKIE_NAME);return exists(e)?(setSessionId(e),setValue("GRXsdkSessionId",null)):(e=getValue("GRXsdkSessionId"),exists(e)?(e=e.split("|")[0],setSessionId(e),setValue("GRXsdkSessionId",null)):(e=generateUUID(),setSessionId(e))),e},setSessionId=function(e){var t=getRootDomain(),n=1/24/60*config.sessionTime;setCookie("_grxs",e,n,t,"/")},getRootDomain=function(){var e=location.host.split(":")[0].split(".").reverse().slice(0,2).reverse().join(".");return"localhost"===e?e:"."+e},getUrl=padDate=getDateTime=getYear=getMonth=function(e){return padDate(getDateTime(e).getMonth()+1)},getDate=function(e){return padDate(getDateTime(e).getDate())},getHours=function(e){return padDate(getDateTime(e).getHours())},getMinutes=getYYYYMMDD=getHHMM=function(e){return getHours(e).toString()+getMinutes(e).toString()},winheight,docheight,trackLength,throttlescroll,timeConvert=(getmeasurements(),window.addEventListener("resize",!1),window.addEventListener("scroll",function(){var e;config.customPopUpPayload&&"SCROLL"===(null==(e=config.customPopUpPayload)||null==(e=e.popupSelected)?void 0:e.text)&&(clearTimeout(throttlescroll),throttlescroll=setTimeout(function(){30<amountscrolled()&&config.customPopUpPayload&&config.showPopUp&&(config.showPopUp=!1,showCustomPopUp())},50))},!1),function(e){var e=e/60,t=Math.floor(e);return t+" hour(s) and "+Math.round(60*(e-t))+" minute(s)"}),pushEvents=(_grx.log=_grx.enable_log=function(){if(window.localStorage)return localStorage.setItem("grx_log","true"),clog=Function.prototype.bind.call(window.console.log,window.console),"Log Enabled"},_grx.disable_log=function(){if(window.localStorage)return clog=localStorage.removeItem("grx_log"),"Log Disabled"},_grx.registerTrackCallback=function(e){config.trackCb=e},_grx.init=function(e,t,n){config=Object.assign({},config,{projectCode:e,startTimestamp:(new Date).getTime(),anonymous_id:getAnonymousId(),subDomain:n},t),_grx.registerPlugin("setDmpId"),_grx.registerPlugin("setDeviceCategory"),config.service_worker!==DEFAULT_SERVICE_WORKER&&_grx.enablePush(Object.assign({},config,{askPermission:!1,inline:!0})),!0===config.attribution_tracking&&(window.console&&window.console.warn&&console.warn("grx('init',{attribution_tracking:true}); is deprecated, use grx('registerPlugin','trackUtm')"),_grx.registerPlugin("trackUtm")),setTimeout(1)},_grx.set=function(e,t){"applicationServerKey"===e?(config[e]=t,window.console&&window.console.warn&&console.warn("grx('set', 'applicationServerKey' ,'<value>') is deprecated, use grx('config','applicationServerKey', '<value>')")):"userId"===e?(config[e]=t,window.console&&window.console.warn&&console.warn("grx('set', 'userId' ,'<value>') is deprecated, use grx('userId', '<value>')")):config.page_properties[e]=t},_grx.config=function(e,t){"service_worker"===e&&t!==DEFAULT_SERVICE_WORKER&&_grx.enablePush(Object.assign({},config,{askPermission:!1,inline:!0})),config[e]=t},_grx.userId=_grx.registerPlugin=function(e,t){var n=plugins[e];return n&&"function"==typeof n&&!plugin_fn[e]?(plugin_fn[e]=n(config,t)||!0,"Registered Plugin: "+e):plugin_fn[e]?(log("Already Registered Plugin: "+e),"Already Registered Plugin: "+e):(log("Not Found Plugin: "+e),"Not Found Plugin: "+e)},function(e){try{var n;eventListArr&&0<eventListArr.length&&(n=eventListArr,eventListArr=[],post(getUrl(),n,function(e,t){config.trackCb&&config.trackCb(n,t,e),e&&t&&log("Event failed:",t)},e))}catch(e){sendException(e)}}),operaAgent=-1<navigator.userAgent.indexOf("OP"),checkAndSendEvent=(window.document.addEventListener("visibilitychange",pushEvents.bind(this,operaAgent),!1),function e(){try{var t=(new Date).getTime()-config.startTimestamp;eventListArr.length&&(config.eventCount<=eventListArr.length||t/1e3>=config.eventFireTimer)&&(config.startTimestamp=(new Date).getTime(),pushEvents(!0)),setTimeout(e,1e3*config.timeInterval)}catch(e){sendException(e)}});setTimeout(checkAndSendEvent,1e3*config.timeInterval),_grx.__track=function(e,t,n,o,i,r){log('track "'+t+'" to queue',e,n);try{var a;void 0===config.projectCode||0===config.projectCode.length?log("Call grx.init() with projectCode before sending track event"):(a=getEventObject(e,t,n=n||{},o,i,r),log('adding "'+t+'" to queue',e,n),eventListArr.push(a),_grx.dispatch("after_event",a),_grx.dispatch("after_event_custompopup",a))}catch(e){sendException(e)}},_grx.track=function(e,t,n,o){_grx.__track(e,"event",t,n,null,o)},_grx.profile=function(e,t,n,o){_grx.__track(e,"profile",t,n,null,o)},_grx.operations=function(e,t,n,o){_grx.__track(e,"profile",null,n,t,o)},_grx.showCampaign=function(type,payload){var grx_banner=document.getElementById("grx_banner"),grx_popup=(grx_banner&&document.body.removeChild(grx_banner),document.getElementById("grx_popup")),grx_box=(grx_popup&&document.body.removeChild(grx_popup),document.getElementById("grx_box")),grx_html=(grx_box&&document.body.removeChild(grx_box),document.getElementById("grx_html")),isSmallScreen=(grx_html&&document.body.removeChild(grx_html),window.innerWidth<600),container,img,main,titleElem,msgElem,closeIcon,button,backdrop,container,body,img,main,titleElem,msgElem,closeIcon,button,container,img,main,titleElem,msgElem,closeIcon,html;"banner"==type&&(container=document.createElement("div"),container.style.cssText="z-index:100000;position: fixed;width: calc(100% - 50px);left: 0px;background: rgb(4, 24, 106);display: flex;justify-content: space-around;align-items: center;padding: 10px 25px;font-family:Helvetica,Calibri,Arial,sans-serif;;line-height: 1.5;font-size: 14px;box-sizing: content-box;",isSmallScreen&&(container.style.cssText="z-index: 100000;position: fixed;width: calc(100% - 20px);left: 0px;background: rgb(4, 24, 106);display: flex;justify-content: space-around;align-items: center;padding: 10px;font-family:Helvetica,Calibri,Arial,sans-serif;line-height: 1.5;font-size: 14px;box-sizing: content-box;border-radius: 10px;flex-wrap: wrap;"),container.style.backgroundColor=payload.backgroundColor,container.id="grx_banner","Top"==payload.position?container.style.top=0:container.style.bottom=0,payload.roundedCorners&&(container.style.borderRadius="10px"),payload.imageUrl&&(img=document.createElement("img"),img.src=payload.imageUrl,img.style.cssText="width: 90px;height: 90px;object-fit: cover;position: absolute;left: 10px;",isSmallScreen&&(img.style.cssText="width: 25px;height: 25px;object-fit: cover;position: absolute;top:12px;left: 10px;"),container.appendChild(img)),main=document.createElement("div"),payload.imageUrl&&(main.style.cssText="width: 70%;margin-left:100px"),isSmallScreen&&(main.style.cssText="width: 100%;"),titleElem=document.createElement("h3"),titleElem.style.cssText="margin-top: 10px;",isSmallScreen&&(titleElem.style.cssText="margin-top: 0px;margin-bottom: 10px;font-size: 13px;font-weight: 400;",payload.imageUrl&&(titleElem.style.marginLeft="30px"),payload.showCloseIcon&&(titleElem.style.marginRight="30px")),titleElem.style.color=payload.textColor,titleElem.innerText=payload.title||"",main.appendChild(titleElem),msgElem=document.createElement("h4"),msgElem.style.cssText="font-weight: 200;",isSmallScreen&&(msgElem.style.cssText="padding: 0px;font-size: 11px;margin: 2px;font-weight: 200;"),msgElem.style.color=payload.textColor,msgElem.innerText=payload.message||"",main.appendChild(msgElem),container.appendChild(main),payload.showCloseIcon&&(closeIcon=document.createElement("div"),closeIcon.style.cssText="position: absolute;right: 5px;font-size: 40px;transform: rotate(45deg);cursor: pointer;",isSmallScreen&&(closeIcon.style.cssText="position: absolute;top:0px;right: 10px;font-size: 30px;transform: rotate(45deg);cursor: pointer;"),closeIcon.innerText="+",closeIcon.style.color=payload.textColor,closeIcon.addEventListener("click",function(){document.body.removeChild(container)}),container.appendChild(closeIcon)),payload.buttonText&&(button=document.createElement("button"),button.style.cssText="cursor: pointer;border: none;padding: 11px 32px;font-size: 16px;border-radius: 3px;",isSmallScreen&&(button.style.cssText="cursor: pointer;border: none;font-size: 12px;border-radius: 3px;padding: 5px 10px;"),button.style.backgroundColor=payload.buttonColor,button.style.color=payload.buttonTextColor,button.innerText=payload.buttonText,button.addEventListener("click",function(){"openLink"==payload.onClickEvent&&(document.body.removeChild(container),window.open(payload.link,"_blank")),"invokeFunction"==payload.onClickEvent&&(document.body.removeChild(container),eval(payload.func))}),container.appendChild(button)),document.body.appendChild(container)),"popup"==type&&(backdrop=document.createElement("div"),backdrop.style.cssText="z-index:100000;display: flex;justify-content: center;align-items: center;position: fixed;top: 0;left: 0;bottom: 0;right: 0;background-color: rgba(0, 0, 0, 0.65);font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';line-height: 1.5;font-size: 14px;",backdrop.id="grx_popup",backdrop.addEventListener("click",function(){document.body.removeChild(backdrop)}),container=document.createElement("div"),container.style.cssText="width: 60%;padding:40px;display: flex;justify-content: space-around;align-items: center;position: relative;flex-flow: column;",isSmallScreen&&(container.style.cssText="width: 90%;padding:10px;display: flex;justify-content: space-around;align-items: center;position: relative;flex-flow: column;"),container.style.backgroundColor=payload.backgroundColor,container.addEventListener("click",,payload.roundedCorners&&(container.style.borderRadius="10px"),body=document.createElement("div"),body.style.cssText="display: flex;justify-content: space-around;width: 100%;",payload.imageUrl&&(img=document.createElement("img"),img.src=payload.imageUrl,img.style.cssText="max-width:150px;max-height:150px;object-fit: cover",isSmallScreen&&(img.style.cssText="position: absolute;max-width: 40px;max-height: 40px;object-fit: cover;top: 10px;left: 10px;"),body.appendChild(img)),main=document.createElement("div"),main.style.cssText="margin: 0px 15px;display: flex;flex-flow: column;justify-content: space-around;",!isSmallScreen&&payload.imageUrl&&(main.style.width="calc(100% - 180px)"),isSmallScreen&&(main.style.cssText="display: flex;flex-flow: column;justify-content: space-around;"),titleElem=document.createElement("h3"),titleElem.style.cssText="margin:5px 0px;font-weight: bold;",isSmallScreen&&(titleElem.style.cssText="margin-top: 0px;margin-bottom: 10px; font-weight: bold;line-height: 1.1;",payload.imageUrl&&(titleElem.style.marginLeft="43px"),payload.showCloseIcon&&(titleElem.style.marginRight="43px")),titleElem.style.color=payload.textColor,titleElem.innerText=payload.title||"",main.appendChild(titleElem),msgElem=document.createElement("h4"),msgElem.style.cssText="font-weight: 500;margin-top: 5px;",isSmallScreen&&(msgElem.style.cssText="font-weight: 500;line-height: 1.1;margin-top: 5px;"),msgElem.style.color=payload.textColor,msgElem.innerText=payload.message||"",main.appendChild(msgElem),body.appendChild(main),container.appendChild(body),payload.showCloseIcon&&(closeIcon=document.createElement("div"),closeIcon.style.cssText="position: absolute;top: -10px;right: 8px;font-size: 40px;transform: rotate(45deg);cursor: pointer;",closeIcon.innerText="+",closeIcon.style.color=payload.textColor,closeIcon.addEventListener("click",function(){document.body.removeChild(backdrop)}),container.appendChild(closeIcon)),payload.buttonText&&(button=document.createElement("button"),button.style.cssText="cursor: pointer;border: none;padding: 11px 32px;font-size: 16px;border-radius: 3px;",button.style.backgroundColor=payload.buttonColor,button.style.color=payload.buttonTextColor,button.innerText=payload.buttonText,button.addEventListener("click",function(){"openLink"==payload.onClickEvent&&(document.body.removeChild(backdrop),window.open(payload.link,"_blank")),"invokeFunction"==payload.onClickEvent&&(document.body.removeChild(backdrop),eval(payload.func))}),container.appendChild(button)),backdrop.appendChild(container),document.body.appendChild(backdrop)),"box"==type&&(container=document.createElement("div"),container.style.cssText="z-index: 100000;position: fixed;width: 300px;background: rgb(4, 24, 106);display: flex;justify-content: space-around;align-items: center;padding: 10px;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';line-height: 1.5;font-size: 14px;",container.style.backgroundColor=payload.backgroundColor,container.id="grx_box","TopLeft"==payload.position?(container.style.top="10px",container.style.left="10px"):"TopRight"==payload.position?(container.style.top="10px",container.style.right="10px"):"BottomLeft"==payload.position?(container.style.bottom="10px",container.style.left="10px"):("BottomRight"==payload.position?container.style.bottom="10px":container.style.top="10px",container.style.right="10px"),payload.roundedCorners&&(container.style.borderRadius="10px"),payload.imageUrl&&(img=document.createElement("img"),img.src=payload.imageUrl,img.style.cssText="width: 40px;height: 40px;object-fit: cover;position: absolute;top: 10px;left: 10px;",container.appendChild(img)),main=document.createElement("div"),main.style.cssText="margin-left: 5px;margin-right: 10px;",titleElem=document.createElement("h3"),titleElem.style.cssText="margin-top: 0px;margin-bottom: 10px; line-height: 1.1;font-size: 14px;font-weight: bold;",payload.imageUrl&&(titleElem.style.marginLeft="40px"),payload.showCloseIcon&&(titleElem.style.marginRight="40px"),titleElem.style.color=payload.textColor,titleElem.innerText=payload.title||"",main.appendChild(titleElem),msgElem=document.createElement("h5"),msgElem.style.cssText="font-weight: 500",msgElem.style.color=payload.textColor,msgElem.innerText=payload.message||"",main.appendChild(msgElem),container.appendChild(main),payload.showCloseIcon&&(closeIcon=document.createElement("div"),closeIcon.style.cssText="position: absolute;right: 10px;top:0px;font-size: 35px;transform: rotate(45deg);cursor: pointer;",closeIcon.innerText="+",closeIcon.style.color=payload.textColor,closeIcon.addEventListener("click",,container.appendChild(closeIcon)),document.body.appendChild(container)),"html"==type&&(html=payload.html.replace(">",' id="grx_html" >'),document.body.insertAdjacentHTML("beforeend",html))},_grx.getGID=function(){return getAnonymousId()},_grx.getSessionID=_grx.disablePush=function(e){setUnSubscribed(),navigator.serviceWorker.getRegistration().then(function(e){getSubscription(e).then(})},_grx.enablePush=function(e){var t,n;"serviceWorker"in navigator?"PushManager"in window?(e&&void 0!==e.service_worker&&(window.console&&window.console.warn&&!0!==e.inline&&console.warn("Declaration of service worker in grx('enablePush',{service_worker:'"+e.service_worker+"'}) is deprecated, use grx('config','service_worker','"+e.service_worker+"');grx('enablePush');"),config.service_worker=e.service_worker),t=config.askPermission,e&&void 0!==e.askPermission&&(window.console&&window.console.warn&&!0!==e.inline&&console.warn("Declaration of askPermission in grx('enablePush',{askPermission:"+e.askPermission+"}) is deprecated, use grx('config','askPermission',"+e.askPermission+");grx('enablePush')"),t=e.askPermission,!0!==e.inline&&(config.askPermission=e.askPermission)),n=!1,n=window.localStorage?localStorage.getItem("subscribe_push"):getCookie("subscribe_push"),askPermission(t).then(registerServiceWorker).then(subscribeUserToPush).then(.catch():log("Push isn't supported on this browser"):log("Service Worker isn't supported on this browser")},_grx.checkCustompopupVisibility=function(){return"Notification"in window?"granted"!==Notification.permission&&!!checkCriteriaForPopUp():(log("This browser cp does not support desktop notification"),!1)},_grx.enableCustompopup=function(){"serviceWorker"in navigator?"PushManager"in window?"Notification"in window?"granted"===Notification.permission?(grx("enablePush"),localStorage.removeItem("laterBtnClicked"),localStorage.removeItem("backDropClicked")):checkCriteriaForPopUp()&&(localStorage.removeItem("noCustomPopUpSession"),"denied"===Notification.permission?(sendToServer(!1,null),getCustomPopUpDetails(config.custom_popup_base_url+"project-".concat(config.projectCode,"/popup?type=").concat(isMobileUI()?"mobile":"desktop"),showCustomPopUp,!0,!1)):"default"===Notification.permission&&getCustomPopUpDetails(config.custom_popup_base_url+"project-".concat(config.projectCode,"/popup?type=").concat(isMobileUI()?"mobile":"desktop"),showCustomPopUp,!0,!1)):log("This browser cp does not support desktop notification"):log("Push cp isn't supported on this browser"):log("Service Worker cp isn't supported on this browser")},_grx.addListener=function(e,t){document.addEventListener(e,t,!1)},_grx.removeListener=_grx.dispatch=function(e,t){e=new CustomEvent(e,{detail:t});document.dispatchEvent?document.dispatchEvent(e):document.fireEvent&&document.fireEvent(e)},preLoadEvents.forEach(}catch(e){sendException(e)}function sendException(e){if(log(e),-1<location.host.indexOf("speakingtree")&&window.ga&&e)try{ga("send","event","grx_exc",e.message,e.stack?e.stack.split("\n")[1]:"none")}catch(e){ga("send","event","grx_exc","invalid"+e.message,"could not parse")}}}(window);