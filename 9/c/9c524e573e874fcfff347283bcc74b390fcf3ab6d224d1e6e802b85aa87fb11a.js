!{"./service_worker/browser_push.js":function(e,t,n){var r=n("./service_worker/logging.js");t.handleReceivePush=function(e){var t=e.data.json(),n=t.title,i=t.message,s={body:i,data:{payload:t}},a=self.registration.showNotification(n,s).then(r.log("browser_push",{action:"receive"}));e.waitUntil(a)},t.handleBrowserNotifClick=function(e){var t=e.notification,n=t.data.payload.notif_url;t.close();var i=clients.openWindow(n).then(r.log("browser_push",{action:"click"}));e.waitUntil(i)}},"./service_worker/cache_helpers.js":function(e,t){var n=t.getCacheKey=t.openCache=t.deleteCache=function(e){return caches["delete"](n(e))}},"./service_worker/cache_storage.js":function(e,t,n){var r=n("./service_worker/utils.js"),i=n("./service_worker/cache_helpers.js");t.deleteStaleCaches=function(e){var t=e.map(function(e){return i.getCacheKey(e)});return caches.keys().then(function(e){return e.filter(function(e){return-1===t.indexOf(e)})}).then(function(e){return Promise.all(e.map(function(e){return caches["delete"](e)}))})},t.deleteStaleCachedAssets=function(e){return i.openCache(e).then(function(e){return e.keys().then(function(t){var n=t.map(r.getRequestPath),i=r.getAssetList(),s=n.filter(function(e){return-1===i.indexOf(e)});return Promise.all(s.map()})})},t.cacheAssets=function(e){return i.openCache(e).then(function(e){return e.keys().then(function(t){var n=t.map(r.getRequestPath),i=r.getAssetList().filter(;return e.addAll(i)})})},t.cachePageShell=function(e){return i.openCache(e).then(function(e){return e.add(new Request("/ans_frontend/shell",{cache:"reload",mode:"same-origin",credentials:"include",headers:r.getFetchRequestHeaders()}))})},t.deletePageShell=t.cacheAsPartiallyUpdated=function(e){if(self.SW_ID)return i.openCache(e).then(function(e){e.put(self.SW_ID,new Response(new Blob,{status:200,statusText:"true"}))})}},"./service_worker/logging.js":function(e,t){var n="/service_worker/log_3RD_PARTY_POST",r=2e3,i=[],s=null;t.log=function(e,t){i.push({category:e,data:t}),a()};var a=c=o=function(){if(c(),0!=i.length){var e=i;i=[],fetch(n,{method:"POST",credentials:"include",body:JSON.stringify({logs:e,metadata:{version:self.VERSION,enableRouting:self.CONFIG.enableRouting}}),headers:new Headers({"Content-Type":"application/json; charset=UTF-8"})})}}},"./service_worker/main.js":function(e,t,n){var r=n("./service_worker/utils.js"),i=n("./service_worker/logging.js"),s=n("./service_worker/cache_storage.js"),a=n("./service_worker/browser_push.js"),c="static-assets",o="page-shell",l="partial-update",u=2592e5,f=864e5,h=[c,o],d=self.location.origin+"/ans_frontend/shell",g=self.location.origin+"/ans_frontend/uncached",p=function(e){if(e.endsWith("/")&&(e=e.slice(0,-1)),e.startsWith(d))return!1;if(e.startsWith(g))return!1;var t=new URL(e);if(t.origin!==self.location.origin)return!1;if(t.search&&t.searchParams&&(t.searchParams.has("bypass_sw")||t.searchParams.has("clear_sw")))return!1;if(self.CONFIG.pageShellRoutes&&self.CONFIG.pageShellRoutes[t.pathname])return!0;if(self.CONFIG.pageShellDynamicRoutes){var n,i=self.CONFIG.pageShellDynamicRoutes;for(n in i)if(i[n]&&r.isMatchingPath(n,t.pathname,self.CONFIG.wildcardReservedTokens))return!0}return!1},v=function(e){var t=new URL(e);return!!(t.search&&t.searchParams&&t.searchParams.has("clear_sw"))||!!("login/desktop_logout_POST"==t.pathname||"login/logout_POST"==t.pathname||t.search&&-1!==t.search.indexOf("_m=logout"))},_=function(e){var t=function(){var t=e.request;return fetch(t,{mode:"same-origin",credentials:"include",headers:r.getFetchRequestHeaders(t)})};return e.preloadResponse?new Promise(function(n,r){e.preloadResponse.then(function(e){e?n(e):t().then(})}):t()},w=function(e){var t=e.request;if("GET"===t.method){var n=!1,i=t.url,a=new URL(i);if(a.origin!==self.location.origin&&"https://qsbr.fs.quoracdn.net"!==a.origin&&"https://qsf.fs.quoracdn.net"!==a.origin&&"https://qph.fs.quoracdn.net"!==a.origin&&"https://qsc.fs.quoracdn.net"!==a.origin)return!1;if("https:"!==a.protocol)return!1;"https://qsbr.fs.quoracdn.net"!==a.origin&&"https://qsf.fs.quoracdn.net"!==a.origin&&"https://qph.fs.quoracdn.net"!==a.origin&&"https://qsc.fs.quoracdn.net"!==a.origin||(n=!0);var l=r.getAssetList();if(l.length){var f=l.map(r.regexEscapeString).filter(.join("|");if(new RegExp("("+f+")$").test(i))return void e.respondWith(r.cacheFirstStaticAsset(c,t))}return v(i)?(e.waitUntil(s.deletePageShell(o)),void e.respondWith(_(e))):p(i)?void e.respondWith(r.cacheOnly(o,"/ans_frontend/shell",u,{ignoreSearch:!0})["catch"](function(){return _(e)})):n&&l.length?void e.respondWith(r.cacheOnly(c,t)["catch"]():void e.respondWith(_(e))}},m=function(){return new Promise(function(e,t){r.cacheOnly(o,"/ans_frontend/shell",f,{ignoreSearch:!0}).then(function(){Promise.all([s.cacheAssets(c),s.cacheAsPartiallyUpdated(l)]).then(function(){i.log("cache_change",{step:"partial_update",success:!0}),e()})["catch"](function(e){i.log("cache_change",{step:"partial_update",success:!1}),t("There was a problem with partially updating the cache: "+e)})})["catch"](function(){Promise.all([s.cacheAssets(c),s.cachePageShell(o)]).then(function(){i.log("cache_change",{step:"full_update",success:!0}),e()})["catch"](function(e){i.log("cache_change",{step:"full_update",success:!1,error:e}),t("There was a problem with updating the cache: "+e)})})})},P=function(){return new Promise(function(e,t){r.cacheOnly(l,self.SW_ID).then(["catch"](function(){Promise.all([s.deleteStaleCachedAssets(c),s.deleteStaleCaches(h)]).then(function(){i.log("cache_change",{step:"stale_deleted",success:!0}),e()})["catch"](function(e){i.log("cache_change",{step:"stale_deleted",success:!1,error:e}),t("There was a problem deleting the stale caches: "+e)})})})},y=function(e){self.skipWaiting(),e.waitUntil(m().then(function(){i.log("lifecycle",{step:"install",success:!0})})["catch"](function(e){i.log("lifecycle",{step:"install",success:!1,error:e})}))},O=function(e){e.waitUntil(P().then(.then(function(){i.log("lifecycle",{step:"activate",success:!0})})["catch"](function(e){i.log("lifecycle",{step:"activate",success:!1,error:e})}))},S=function(e){self.registration.navigationPreload&&self.CONFIG.useNavigationPreloading&&self.CONFIG.enableRouting?e.waitUntil(self.registration.navigationPreload.enable()):e.waitUntil(self.registration.navigationPreload.disable())};self.CONFIG.enableRouting?(self.addEventListener("fetch",w),self.addEventListener("install",y)):self.addEventListener("install",,self.addEventListener("activate",O),self.addEventListener("activate",S),self.addEventListener("push",a.handleReceivePush),self.addEventListener("notificationclick",a.handleBrowserNotifClick)},"./service_worker/utils.js":function(e,t,n){var r=n("./service_worker/cache_helpers.js");t.regexEscapeString=t.getRequestPath=t.getFetchRequestHeaders=function(e){var t={};if(self.CONFIG.userAgent&&(t["Quora-User-Agent"]=self.CONFIG.userAgent),e){var n=e.referrer;(n||""===n)&&(t["Quora-Referer"]=n),Object.assign(t,e.headers)}return t};var i=function(e,t,n){return fetch(t,{mode:"cors",credentials:"omit"}).then(function(i){return i&&("opaque"===i.type||i.ok)?r.openCache(e).then(function(e){return e.put(n||t,i.clone()).then(}):i})},s=t.cacheOnly=function(e,t,n,i){var s=Date.now();return r.openCache(e).then(function(e){return e.match(t,i).then(function(e){if(e&&n){var t,r=e.headers.get("date");if(r){var i=new Date(r);t=s-i}}return e&&e.ok&&(!n||n&&t&&t<n)?e:Promise.reject()})})};t.cacheFirstStaticAsset=function(e,t,n,r){return s(e,t,n,r)["catch"](},t.getAssetList=function(){return self.ASSETS.map(},t.isMatchingPath=function(e,t,n){var r=e.split("/"),i=t.split("/");if(r.length!==i.length)return!1;var s;for(s=0;s<r.length;s++){if(r[s].startsWith("*")){if(n&&i[s]in n)return!1;if("*"==r[s])continue;if(r[s].startsWith("*:")){var a=parseInt(r[s].slice(2));if(!isNaN(a)){if(i[s].length<a)return!1;continue}}}if(r[s]!==i[s])return!1}return!0}}});