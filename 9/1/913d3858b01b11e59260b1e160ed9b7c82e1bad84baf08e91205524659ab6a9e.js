![function(e,t){e.exports=tcom.libs.react},function(e,t){e.exports=tcom.libs.lodash},function(e,t){e.exports=tcom.libs.axios},function(e,t,n){"use strict";var r,o=Object.create,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=d=h={};((h,{AccessTokenEvents:()=>M,CheckSessionIFrame:()=>j,ErrorResponse:()=>A,ErrorTimeout:()=>I,InMemoryWebStorage:()=>P,Log:()=>w,Logger:()=>S,MetadataService:()=>R,OidcClient:()=>$,OidcClientSettingsStore:()=>D,SessionMonitor:()=>J,SigninResponse:()=>F,SigninState:()=>B,SignoutResponse:()=>z,State:()=>H,User:()=>G,UserManager:()=>ie,UserManagerSettingsStore:()=>te,Version:()=>ae,WebStorageStateStore:),e.exports=(r=h,u(i({},"__esModule",{value:!0}),r));var f,p,g,m=d(n(7)),v=d(n(20)),_=d(n(21)),y=d(n(22)),b={debug:()=>{},info:()=>{},warn:()=>{},error:,w=((w||{});(g=w||(w={})).reset=g.setLevel=g.setLogger=function(e){p=e};var S=class{ebug(...e){f>=4&&p.debug(S._format(this._name,this._method),...e)}info(...e){f>=3&&p.info(S._format(this._name,this._method),...e)}warn(...e){f>=2&&p.warn(S._format(this._name,this._method),...e)}error(...e){f>=1&&p.error(S._format(this._name,this._method),...e)}reate(e){const t=Object.create(this);return t._method=e,t.debug("begin"),t}static createStatic(e,t){const n=new S(`${e}.${t}`);return n.debug("begin"),n}static _formattatic debug(e,...t){f>=4&&p.debug(S._format(e),...t)}static info(e,...t){f>=3&&p.info(S._format(e),...t)}static warn(e,...t){f>=2&&p.warn(S._format(e),...t)}static error(e,...t){f>=1&&p.error(S._format(e),...t)}};w.reset();var E=class{static _randomWord(){return m.default.lib.WordArray.random(1).words[0]}static generateUUIDv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^E._randomWord()&15>>+e/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return E.generateUUIDv4()+E.generateUUIDv4()+E.generateUUIDv4()}static generateCodeChallenge(e){try{const t=(0,v.default)(e);return _.default.stringify(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(e){throw S.error("CryptoUtils.generateCodeChallenge",e),e}}static generateBasicAuth(e,t){const n=y.default.parse([e,t].join(":"));return _.default.stringify(n)}},k=class{constructor(e){this._name=e,this._logger=new S(`Event('${this._name}')`),this._callbacks=[]}ise(...e){this._logger.debug("raise:",...e);for(const t of this._callbacks)t(...e)}},x=d(n(23)),L=class{static decode(e){try{return(0,x.default)(e)}catch(e){throw S.error("JwtUtils.decode",e),e}}},T=class{static center({...e}){var t;return null==e.width&&(e.width=null!=(t=[800,720,600,480].find(e=>e<=window.outerWidth/1.618))?t:360),null!=e.left||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),null!=e.height&&(null!=e.top||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(.map(([e,t])=>`${e}=${"boolean"!=typeof t?t:t?"yes":"no"}`).join(",")}},O=class extends k{constructor(){super(...arguments),this._logger=new S(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const e=this._expiration-O.getEpochTime();this._logger.debug("timer completes in",e),this._expiration<=O.getEpochTime()&&(this.cancel(),super.raise())}}nit(e){const t=this._logger.create("init");e=Math.max(Math.floor(e),1);const n=O.getEpochTime()+e;if(this.expiration===n&&this._timerHandle)return void t.debug("skipping since already initialized for expiration at",this.expiration);this.cancel(),t.debug("using duration",e),this._expiration=n;const r=Math.min(e,5);this._timerHandle=setInterval(this._callback,1e3*r)}get expiration(){return this._expiration}cancel,C=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");const n=new URL(e,"http://127.0.0.1")["fragment"===t?"hash":"search"];return new URLSearchParams(n.slice(1))}},A=class extends Error{constructor(e,t){var n,r,o;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw S.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=null!=(n=e.error_description)?n:null,this.error_uri=null!=(r=e.error_uri)?r:null,this.state=e.userState,this.session_state=null!=(o=e.session_state)?o:null}},I=M=class{constructor(e){this._logger=new S("AccessTokenEvents"),this._expiringTimer=new O("Access token expiring"),this._expiredTimer=new O("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){const t=this._logger.create("load");if(e.access_token&&void 0!==e.expires_in){const n=e.expires_in;if(t.debug("access token present, remaining duration:",n),n>0){let e=n-this._expiringNotificationTimeInSeconds;e<=0&&(e=1),t.debug("registering expiring timer, raising in",e,"seconds"),this._expiringTimer.init(e)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const r=n+1;t.debug("registering expired timer, raising in",r,"seconds"),this._expiredTimer.init(r)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}ddAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},j=class{constructor(e,t,n,r,o){this._callback=e,this._client_id=t,this._intervalInSeconds=r,this._stopOnError=o,this._logger=new S("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=e=>{e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(e.data+" message from check session op iframe"))};const i=new URL(n);this._frame_origin=i.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=i.href}load(){return new Promise(e=>{this._frame.onload=window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;const t=()=>{this._frame.contentWindow&&this._session_state&&this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,1e3*this._intervalInSeconds)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},P=class{constructor(){this._logger=new S("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}q=class{constructor(e=[],t=null,n={}){this._jwtHandler=t,this._extraHeaders=n,this._logger=new S("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){const{timeoutInSeconds:n,...r}=t;if(!n)return await fetch(e,r);const o=new AbortController,i=setTimeout(1e3*n);try{return await fetch(e,{...t,signal:o.signal})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)throw new I("Network timed out");throw e}finally{clearTimeout(i)}}async getJson(e,{token:t,credentials:n}={}){const r=this._logger.create("getJson"),o={Accept:this._contentTypes.join(", ")};let i;t&&(r.debug("token passed, setting Authorization header"),o.Authorization="Bearer "+t),this.appendExtraHeaders(o);try{r.debug("url:",e),i=await this.fetchWithTimeout(e,{method:"GET",headers:o,credentials:n})}catch(e){throw r.error("Network Error"),e}r.debug("HTTP response received, status",i.status);const a=i.headers.get("Content-Type");if(a&&!this._contentTypes.find(e=>a.startsWith(e))&&r.throw(new Error(`Invalid response Content-Type: ${null!=a?a:"undefined"}, from URL: ${e}`)),i.ok&&this._jwtHandler&&(null==a?void 0:a.startsWith("application/jwt")))return await this._jwtHandler(await i.text());let s;try{s=await i.json()}catch(e){if(r.error("Error parsing JSON response",e),i.ok)throw e;throw new Error(`${i.statusText} (${i.status})`)}if(!i.ok){if(r.error("Error from server:",s),s.error)throw new A(s);throw new Error(`${i.statusText} (${i.status}): ${JSON.stringify(s)}`)}return s}async postForm(e,{body:t,basicAuth:n,timeoutInSeconds:r,initCredentials:o}){const i=this._logger.create("postForm"),a={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};let s;void 0!==n&&(a.Authorization="Basic "+n),this.appendExtraHeaders(a);try{i.debug("url:",e),s=await this.fetchWithTimeout(e,{method:"POST",headers:a,body:t,timeoutInSeconds:r,credentials:o})}catch(e){throw i.error("Network error"),e}i.debug("HTTP response received, status",s.status);const c=s.headers.get("Content-Type");if(c&&!this._contentTypes.find(e=>c.startsWith(e)))throw new Error(`Invalid response Content-Type: ${null!=c?c:"undefined"}, from URL: ${e}`);const l=await s.text();let u={};if(l)try{u=JSON.parse(l)}catch(e){if(i.error("Error parsing JSON response",e),s.ok)throw e;throw new Error(`${s.statusText} (${s.status})`)}if(!s.ok){if(i.error("Error from server:",u),u.error)throw new A(u,t);throw new Error(`${s.statusText} (${s.status}): ${JSON.stringify(u)}`)}return u}appendExtraHeaders(e){const t=this._logger.create("appendExtraHeaders"),n=Object.keys(this._extraHeaders),r=["authorization","accept","content-type"];0!==n.length&&n.forEach(n=>{if(r.includes(n.toLocaleLowerCase()))return void t.warn("Protected header could not be overridden",n,r);const o="function"==typeof this._extraHeaders[n]?this._extraHeaders[n]():this._extraHeaders[n];o&&""!==o&&(e[n]=o)})}},R=class{constructor(e){this._settings=e,this._logger=new S("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new q(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}sync getMetadata(){const e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);const t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}etTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}etRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}sync _getMetadataProperty(e,t=!1){const n=this._logger.create(`_getMetadataProperty('${e}')`),r=await this.getMetadata();if(n.debug("resolved"),void 0===r[e]){if(!0===t)return void n.warn("Metadata does not contain optional property");n.throw(new Error("Metadata does not contain property "+e))}return r[e]}async getSigningKeys(){const e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;const t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);const n=await this._jsonService.getJson(t);if(e.debug("got key set",n),!Array.isArray(n.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=n.keys,this._signingKeys}},N=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new S("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){this._logger.create(`get('${e}')`),e=this._prefix+e;return await this._store.getItem(e)}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;const t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");const e=await this._store.length,t=[];for(let n=0;n<e;n++){const e=await this._store.key(n);e&&0===e.indexOf(this._prefix)&&t.push(e.substr(this._prefix.length))}return t}},D=class{constructor({authority:e,metadataUrl:t,metadata:n,signingKeys:r,metadataSeed:o,client_id:i,client_secret:a,response_type:s="code",scope:c="openid",redirect_uri:l,post_logout_redirect_uri:u,client_authentication:d="client_secret_post",prompt:h,display:f,max_age:p,ui_locales:g,acr_values:m,resource:v,response_mode:_="query",filterProtocolClaims:y=!0,loadUserInfo:b=!1,staleStateAgeInSeconds:w=900,clockSkewInSeconds:S=300,userInfoJwtIssuer:E="OP",mergeClaims:k=!1,disablePKCE:x=!1,stateStore:L,refreshTokenCredentials:T,revokeTokenAdditionalContentTypes:O,fetchRequestCredentials:C,refreshTokenAllowedScope:A,extraQueryParams:I={},extraTokenParams:M={},extraHeaders:j={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=n,this.metadataSeed=o,this.signingKeys=r,this.client_id=i,this.client_secret=a,this.response_type=s,this.scope=c,this.redirect_uri=l,this.post_logout_redirect_uri=u,this.client_authentication=d,this.prompt=h,this.display=f,this.max_age=p,this.ui_locales=g,this.acr_values=m,this.resource=v,this.response_mode=_,this.filterProtocolClaims=null==y||y,this.loadUserInfo=!!b,this.staleStateAgeInSeconds=w,this.clockSkewInSeconds=S,this.userInfoJwtIssuer=E,this.mergeClaims=!!k,this.disablePKCE=!!x,this.revokeTokenAdditionalContentTypes=O,C&&T&&console.warn("Both fetchRequestCredentials and refreshTokenCredentials is set. Only fetchRequestCredentials will be used."),this.fetchRequestCredentials=C||(T||"same-origin"),L)this.stateStore=L;else{const e="undefined"!=typeof window?window.localStorage:new P;this.stateStore=new N({store:e})}this.refreshTokenAllowedScope=A,this.extraQueryParams=I,this.extraTokenParams=M,this.extraHeaders=j}},U=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new S("TokenClient"),this._jsonService=new q(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:n=this._settings.client_id,client_secret:r=this._settings.client_secret,...o}){const i=this._logger.create("exchangeCode");n||i.throw(new Error("A client_id is required")),t||i.throw(new Error("A redirect_uri is required")),o.code||i.throw(new Error("A code is required"));const a=new URLSearchParams({grant_type:e,redirect_uri:t});for(const[e,t]of Object.entries(o))null!=t&&a.set(e,t);let s;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw i.throw(new Error("A client_secret is required")),null;s=E.generateBasicAuth(n,r);break;case"client_secret_post":a.append("client_id",n),r&&a.append("client_secret",r)}const c=await this._metadataService.getTokenEndpoint(!1);i.debug("got token endpoint");const l=await this._jsonService.postForm(c,{body:a,basicAuth:s,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),l}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:n=this._settings.client_secret,scope:r=this._settings.scope,...o}){const i=this._logger.create("exchangeCredentials");t||i.throw(new Error("A client_id is required"));const a=new URLSearchParams({grant_type:e,scope:r});for(const[e,t]of Object.entries(o))null!=t&&a.set(e,t);let s;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw i.throw(new Error("A client_secret is required")),null;s=E.generateBasicAuth(t,n);break;case"client_secret_post":a.append("client_id",t),n&&a.append("client_secret",n)}const c=await this._metadataService.getTokenEndpoint(!1);i.debug("got token endpoint");const l=await this._jsonService.postForm(c,{body:a,basicAuth:s,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),l}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:n=this._settings.client_secret,timeoutInSeconds:r,...o}){const i=this._logger.create("exchangeRefreshToken");t||i.throw(new Error("A client_id is required")),o.refresh_token||i.throw(new Error("A refresh_token is required"));const a=new URLSearchParams({grant_type:e});for(const[e,t]of Object.entries(o))Array.isArray(t)?t.forEach(:null!=t&&a.set(e,t);let s;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw i.throw(new Error("A client_secret is required")),null;s=E.generateBasicAuth(t,n);break;case"client_secret_post":a.append("client_id",t),n&&a.append("client_secret",n)}const c=await this._metadataService.getTokenEndpoint(!1);i.debug("got token endpoint");const l=await this._jsonService.postForm(c,{body:a,basicAuth:s,timeoutInSeconds:r,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),l}async revoke(e){var t;const n=this._logger.create("revoke");e.token||n.throw(new Error("A token is required"));const r=await this._metadataService.getRevocationEndpoint(!1);n.debug("got revocation endpoint, revoking "+(null!=(t=e.token_type_hint)?t:"default token type"));const o=new URLSearchParams;for(const[t,n]of Object.entries(e))null!=n&&o.set(t,n);o.set("client_id",this._settings.client_id),this._settings.client_secret&&o.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(r,{body:o}),n.debug("got response")}},H=class{constructor(e){this.id=e.id||E.generateUUIDv4(),this.data=e.data,e.created&&e.created>0?this.created=e.created:this.created=O.getEpochTime(),this.request_type=e.request_type}toStorageString(){return new S("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})}static fromStorageString(e){return S.createStatic("State","fromStorageString"),new H(JSON.parse(e))}static async clearStaleState(e,t){const n=S.createStatic("State","clearStaleState"),r=O.getEpochTime()-t,o=await e.getAllKeys();n.debug("got keys",o);for(let t=0;t<o.length;t++){const i=o[t],a=await e.get(i);let s=!1;if(a)try{const e=H.fromStorageString(a);n.debug("got item from key:",i,e.created),e.created<=r&&(s=!0)}catch(e){n.error("Error parsing state for key:",i,e),s=!0}else n.debug("no item in storage for key:",i),s=!0;s&&(n.debug("removed item for key:",i),e.remove(i))}}},B=class extends H{constructor(e){super(e),!0===e.code_verifier?this.code_verifier=E.generateCodeVerifier():e.code_verifier&&(this.code_verifier=e.code_verifier),this.code_verifier&&(this.code_challenge=E.generateCodeChallenge(this.code_verifier)),this.authority=e.authority,this.client_id=e.client_id,this.redirect_uri=e.redirect_uri,this.scope=e.scope,this.client_secret=e.client_secret,this.extraTokenParams=e.extraTokenParams,this.response_mode=e.response_mode,this.skipUserInfo=e.skipUserInfo}toStorageString(){return new S("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(e){S.createStatic("SigninState","fromStorageString");const t=JSON.parse(e);return new B(t)}},F=class{constructor(e){this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-O.getEpochTime()}set expires_in(e){"string"==typeof e&&(e=Number(e)),void 0!==e&&e>=0&&(this.expires_at=Math.floor(e)+O.getEpochTime())}get isOpenId(){var e;return(null==(e=this.scope)?void 0:e.split(" ").includes("openid"))||!!this.id_token}},z=class{constructor,W=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],V=["sub","iss","aud","exp","iat"],$=class{constructor(e,t){this._logger=new S("OidcClient"),this.settings=e instanceof D?e:new D(e),this.metadataService=null!=t?t:new R(this.settings),this._claimsService=new class{constructor(e){this._settings=e,this._logger=new S("ClaimsService")}filterProtocolClaims(e){const t={...e};if(this._settings.filterProtocolClaims){let e;e=Array.isArray(this._settings.filterProtocolClaims)?this._settings.filterProtocolClaims:W;for(const n of e)V.includes(n)||delete t[n]}return t}mergeClaims(e,t){const n={...e};for(const[e,r]of Object.entries(t))for(const t of Array.isArray(r)?r:[r]){const r=n[e];r?Array.isArray(r)?r.includes(t)||r.push(t):n[e]!==t&&("object"==typeof t&&this._settings.mergeClaims?n[e]=this.mergeClaims(r,t):n[e]=[r,t]):n[e]=t}return n}}(this.settings),this._validator=new class{constructor(e,t,n){this._settings=e,this._metadataService=t,this._claimsService=n,this._logger=new S("ResponseValidator"),this._userInfoService=new class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new S("UserInfoService"),this._getClaimsFromJwt=async e=>{const t=this._logger.create("_getClaimsFromJwt");try{const n=L.decode(e);return t.debug("JWT decoding successful"),n}catch(e){throw t.error("Error parsing JWT response"),e}},this._jsonService=new q(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){const t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));const n=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",n);const r=await this._jsonService.getJson(n,{token:e,credentials:this._settings.fetchRequestCredentials});return t.debug("got claims",r),r}}(this._settings,this._metadataService),this._tokenClient=new U(this._settings,this._metadataService)}async validateSigninResponse(e,t){const n=this._logger.create("validateSigninResponse");this._processSigninState(e,t),n.debug("state processed"),await this._processCode(e,t),n.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),n.debug("tokens validated"),await this._processClaims(e,null==t?void 0:t.skipUserInfo,e.isOpenId),n.debug("claims processed")}async validateCredentialsResponse(e,t){const n=this._logger.create("validateCredentialsResponse");e.isOpenId&&this._validateIdTokenAttributes(e),n.debug("tokens validated"),await this._processClaims(e,t,e.isOpenId),n.debug("claims processed")}async validateRefreshResponse(e,t){const n=this._logger.create("validateRefreshResponse");e.userState=t.data,null!=e.session_state||(e.session_state=t.session_state),null!=e.scope||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),n.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);const r=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,r),n.debug("claims processed")}validateSignoutResponse(e,t){const n=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&n.throw(new Error("State does not match")),n.debug("state validated"),e.userState=t.data,e.error)throw n.warn("Response was error",e.error),new A(e)}_processSigninState(e,t){const n=this._logger.create("_processSigninState");if(t.id!==e.state&&n.throw(new Error("State does not match")),t.client_id||n.throw(new Error("No client_id on state")),t.authority||n.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&n.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&n.throw(new Error("client_id mismatch on settings vs. signin state")),n.debug("state validated"),e.userState=t.data,null!=e.scope||(e.scope=t.scope),e.error)throw n.warn("Response was error",e.error),new A(e);t.code_verifier&&!e.code&&n.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,n=!0){const r=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token)return void r.debug("not loading user info");r.debug("loading user info");const o=await this._userInfoService.getClaims(e.access_token);r.debug("user info claims received from user info endpoint"),n&&o.sub!==e.profile.sub&&r.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(o)),r.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t){const n=this._logger.create("_processCode");if(e.code){n.debug("Validating code");const r=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,r)}else n.debug("No code to process")}_validateIdTokenAttributes(e,t){var n;const r=this._logger.create("_validateIdTokenAttributes");r.debug("decoding ID Token JWT");const o=L.decode(null!=(n=e.id_token)?n:"");if(o.sub||r.throw(new Error("ID Token is missing a subject claim")),t){const e=L.decode(t);o.sub!==e.sub&&r.throw(new Error("sub in id_token does not match current sub")),o.auth_time&&o.auth_time!==e.auth_time&&r.throw(new Error("auth_time in id_token does not match original auth_time")),o.azp&&o.azp!==e.azp&&r.throw(new Error("azp in id_token does not match original azp")),!o.azp&&e.azp&&r.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=o}}(this.settings,this.metadataService,this._claimsService),this._tokenClient=new U(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:n,request_type:r,id_token_hint:o,login_hint:i,skipUserInfo:a,nonce:s,response_type:c=this.settings.response_type,scope:l=this.settings.scope,redirect_uri:u=this.settings.redirect_uri,prompt:d=this.settings.prompt,display:h=this.settings.display,max_age:f=this.settings.max_age,ui_locales:p=this.settings.ui_locales,acr_values:g=this.settings.acr_values,resource:m=this.settings.resource,response_mode:v=this.settings.response_mode,extraQueryParams:_=this.settings.extraQueryParams,extraTokenParams:y=this.settings.extraTokenParams}){const b=this._logger.create("createSigninRequest");if("code"!==c)throw new Error("Only the Authorization Code flow (with PKCE) is supported");const w=await this.metadataService.getAuthorizationEndpoint();b.debug("Received authorization endpoint",w);const E=new class{constructor({url:e,authority:t,client_id:n,redirect_uri:r,response_type:o,scope:i,state_data:a,response_mode:s,request_type:c,client_secret:l,nonce:u,resource:d,skipUserInfo:h,extraQueryParams:f,extraTokenParams:p,disablePKCE:g,...m}){if(this._logger=new S("SigninRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");if(!n)throw this._logger.error("ctor: No client_id passed"),new Error("client_id");if(!r)throw this._logger.error("ctor: No redirect_uri passed"),new Error("redirect_uri");if(!o)throw this._logger.error("ctor: No response_type passed"),new Error("response_type");if(!i)throw this._logger.error("ctor: No scope passed"),new Error("scope");if(!t)throw this._logger.error("ctor: No authority passed"),new Error("authority");this.state=new B({data:a,request_type:c,code_verifier:!g,client_id:n,authority:t,redirect_uri:r,response_mode:s,client_secret:l,scope:i,extraTokenParams:p,skipUserInfo:h});const v=new URL(e);if(v.searchParams.append("client_id",n),v.searchParams.append("redirect_uri",r),v.searchParams.append("response_type",o),v.searchParams.append("scope",i),u&&v.searchParams.append("nonce",u),v.searchParams.append("state",this.state.id),this.state.code_challenge&&(v.searchParams.append("code_challenge",this.state.code_challenge),v.searchParams.append("code_challenge_method","S256")),d){(Array.isArray(d)?d:[d]).forEach(}for(const[e,t]of Object.entries({response_mode:s,...m,...f}))null!=t&&v.searchParams.append(e,t.toString());this.url=v.href}}({url:w,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:u,response_type:c,scope:l,state_data:e,prompt:d,display:h,max_age:f,ui_locales:p,id_token_hint:o,login_hint:i,acr_values:g,resource:m,request:t,request_uri:n,extraQueryParams:_,extraTokenParams:y,request_type:r,response_mode:v,client_secret:this.settings.client_secret,skipUserInfo:a,nonce:s,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();const k=E.state;return await this.settings.stateStore.set(k.id,k.toStorageString()),E}async readSigninResponseState(e,t=!1){const n=this._logger.create("readSigninResponseState"),r=new F(C.readParams(e,this.settings.response_mode));if(!r.state)throw n.throw(new Error("No state in response")),null;const o=await this.settings.stateStore[t?"remove":"get"](r.state);if(!o)throw n.throw(new Error("No matching state found in storage")),null;return{state:B.fromStorageString(o),response:r}}async processSigninResponse(e){const t=this._logger.create("processSigninResponse"),{state:n,response:r}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(r,n),r}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:n=!1,extraTokenParams:r={}}){const o=await this._tokenClient.exchangeCredentials({username:e,password:t,...r}),i=new F(new URLSearchParams);return Object.assign(i,o),await this._validator.validateCredentialsResponse(i,n),i}async useRefreshToken({state:e,timeoutInSeconds:t}){var n;const r=this._logger.create("useRefreshToken");let o;if(void 0===this.settings.refreshTokenAllowedScope)o=e.scope;else{const t=this.settings.refreshTokenAllowedScope.split(" ");o=((null==(n=e.scope)?void 0:n.split(" "))||[]).filter(.join(" ")}const i=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,resource:e.resource,scope:o,timeoutInSeconds:t}),a=new F(new URLSearchParams);return Object.assign(a,i),r.debug("validating response",a),await this._validator.validateRefreshResponse(a,{...e,scope:o}),a}async createSignoutRequest({state:e,id_token_hint:t,client_id:n,request_type:r,post_logout_redirect_uri:o=this.settings.post_logout_redirect_uri,extraQueryParams:i=this.settings.extraQueryParams}={}){const a=this._logger.create("createSignoutRequest"),s=await this.metadataService.getEndSessionEndpoint();if(!s)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",s),n||!o||t||(n=this.settings.client_id);const c=new class{constructor({url:e,state_data:t,id_token_hint:n,post_logout_redirect_uri:r,extraQueryParams:o,request_type:i,client_id:a}){if(this._logger=new S("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");const s=new URL(e);n&&s.searchParams.append("id_token_hint",n),a&&s.searchParams.append("client_id",a),r&&(s.searchParams.append("post_logout_redirect_uri",r),t&&(this.state=new H({data:t,request_type:i}),s.searchParams.append("state",this.state.id)));for(const[e,t]of Object.entries({...o}))null!=t&&s.searchParams.append(e,t.toString());this.url=s.href}}({url:s,id_token_hint:t,client_id:n,post_logout_redirect_uri:o,state_data:e,extraQueryParams:i,request_type:r});await this.clearStaleState();const l=c.state;return l&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(l.id,l.toStorageString())),c}async readSignoutResponseState(e,t=!1){const n=this._logger.create("readSignoutResponseState"),r=new z(C.readParams(e,this.settings.response_mode));if(!r.state){if(n.debug("No state in response"),r.error)throw n.warn("Response was error:",r.error),new A(r);return{state:void 0,response:r}}const o=await this.settings.stateStore[t?"remove":"get"](r.state);if(!o)throw n.throw(new Error("No matching state found in storage")),null;return{state:H.fromStorageString(o),response:r}}async processSignoutResponse(e){const t=this._logger.create("processSignoutResponse"),{state:n,response:r}=await this.readSignoutResponseState(e,!0);return n?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(r,n)):t.debug("No state from storage; skipping response validation"),r}clearStaleState(){return this._logger.create("clearStaleState"),H.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},J=class{constructor(e){this._userManager=e,this._logger=new S("SessionMonitor"),this._start=async e=>{const t=e.session_state;if(!t)return;const n=this._logger.create("_start");if(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,n.debug("session_state",t,", sub",this._sub)):(this._sub=void 0,this._sid=void 0,n.debug("session_state",t,", anonymous user")),this._checkSessionIFrame)this._checkSessionIFrame.start(t);else try{const e=await this._userManager.metadataService.getCheckSessionIframe();if(e){n.debug("initializing check session iframe");const r=this._userManager.settings.client_id,o=this._userManager.settings.checkSessionIntervalInSeconds,i=this._userManager.settings.stopCheckSessionOnError,a=new j(this._callback,r,e,o,i);await a.load(),this._checkSessionIFrame=a,a.start(t)}else n.warn("no check session iframe found in the metadata")}catch(e){n.error("Error from getCheckSessionIframe:",e instanceof Error?e.message:e)}},this._stop=()=>{const e=this._logger.create("_stop");if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const t=setInterval(async()=>{clearInterval(t);try{const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub&&e.sid?{sub:e.sub,sid:e.sid}:null};this._start(t)}}catch(t){e.error("error from querySessionStatus",t instanceof Error?t.message:t)}},1e3)}},this._callback=async()=>{const e=this._logger.create("_callback");try{const t=await this._userManager.querySessionStatus();let n=!0;t&&this._checkSessionIFrame?t.sub===this._sub?(n=!1,this._checkSessionIFrame.start(t.session_state),t.sid===this._sid?e.debug("same sub still logged in at OP, restarting check session iframe; session_state",t.session_state):(e.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",t.session_state),this._userManager.events._raiseUserSessionChanged())):e.debug("different subject signed into OP",t.sub):e.debug("subject no longer signed into OP"),n?this._sub?this._userManager.events._raiseUserSignedOut():this._userManager.events._raiseUserSignedIn():e.debug("no change in session detected, no event to raise")}catch(t){this._sub&&(e.debug("Error calling queryCurrentSigninSession; raising signed out event",t),this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(}async _init(){this._logger.create("_init");const e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){const e=await this._userManager.querySessionStatus();if(e){const t={session_state:e.session_state,profile:e.sub&&e.sid?{sub:e.sub,sid:e.sid}:null};this._start(t)}}}},G=class{constructor(e){var t;this.id_token=e.id_token,this.session_state=null!=(t=e.session_state)?t:null,this.access_token=e.access_token,this.refresh_token=e.refresh_token,this.token_type=e.token_type,this.scope=e.scope,this.profile=e.profile,this.expires_at=e.expires_at,this.state=e.userState}get expires_in(){if(void 0!==this.expires_at)return this.expires_at-O.getEpochTime()}set expires_in(e){void 0!==e&&(this.expires_at=Math.floor(e)+O.getEpochTime())}et scopes(){var e,t;return null!=(t=null==(e=this.scope)?void 0:e.split(" "))?t:[]}toStorageString(){return new S("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(e){return S.createStatic("User","fromStorageString"),new G(JSON.parse(e))}},K=class{constructor(){this._abort=new k("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){const t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);const{url:n,keepOpen:r}=await new Promise((n,r)=>{const o=o=>{var i;const a=o.data,s=null!=(i=e.scriptOrigin)?i:window.location.origin;if(o.origin===s&&"oidc-client"===(null==a?void 0:a.source)){try{const n=C.readParams(a.url,e.response_mode).get("state");if(n||t.warn("no state found in response url"),o.source!==this._window&&n!==e.state)return}catch(e){this._dispose(),r(new Error("Invalid response from window"))}n(a)}};window.addEventListener("message",o,!1),this._disposeHandlers.add(,this._disposeHandlers.add(this._abort.addHandler()});return t.debug("got response from window"),this._dispose(),r||this.close(),{url:n}}_dispose(){this._logger.create("_dispose");for(const e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,n=!1,r=window.location.origin){e.postMessage({source:"oidc-client",url:t,keepOpen:n},r)}},Y={location:!1,toolbar:!1,height:640},Q="_blank",Z=60,X=2,ee=10,te=class extends D{constructor(e){const{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:n=e.post_logout_redirect_uri,popupWindowFeatures:r=Y,popupWindowTarget:o=Q,redirectMethod:i="assign",redirectTarget:a="self",iframeNotifyParentOrigin:s=e.iframeNotifyParentOrigin,iframeScriptOrigin:c=e.iframeScriptOrigin,silent_redirect_uri:l=e.redirect_uri,silentRequestTimeoutInSeconds:u=ee,automaticSilentRenew:d=!0,validateSubOnSilentRenew:h=!0,includeIdTokenInSilentRenew:f=!1,monitorSession:p=!1,monitorAnonymousSession:g=!1,checkSessionIntervalInSeconds:m=X,query_status_response_type:v="code",stopCheckSessionOnError:_=!0,revokeTokenTypes:y=["access_token","refresh_token"],revokeTokensOnSignout:b=!1,includeIdTokenInSilentSignout:w=!1,accessTokenExpiringNotificationTimeInSeconds:S=Z,userStore:E}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=n,this.popupWindowFeatures=r,this.popupWindowTarget=o,this.redirectMethod=i,this.redirectTarget=a,this.iframeNotifyParentOrigin=s,this.iframeScriptOrigin=c,this.silent_redirect_uri=l,this.silentRequestTimeoutInSeconds=u,this.automaticSilentRenew=d,this.validateSubOnSilentRenew=h,this.includeIdTokenInSilentRenew=f,this.monitorSession=p,this.monitorAnonymousSession=g,this.checkSessionIntervalInSeconds=m,this.stopCheckSessionOnError=_,this.query_status_response_type=v,this.revokeTokenTypes=y,this.revokeTokensOnSignout=b,this.includeIdTokenInSilentSignout=w,this.accessTokenExpiringNotificationTimeInSeconds=S,E)this.userStore=E;else{const e="undefined"!=typeof window?window.sessionStorage:new P;this.userStore=new N({store:e})}}},ne=class extends K{constructor({silentRequestTimeoutInSeconds:e=ee}){super(),this._logger=new S("IFrameWindow"),this._timeoutInSeconds=e,this._frame=ne.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const e=window.document.createElement("iframe");return e.style.visibility="hidden",e.style.position="fixed",e.style.left="-1000px",e.style.top="0",e.width="0",e.height="0",window.document.body.appendChild(e),e}async navigate(e){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const t=setTimeout(()=>this._abort.raise(new I("IFrame timed out without a response")),1e3*this._timeoutInSeconds);return this._disposeHandlers.add(()=>clearTimeout(t)),await super.navigate(e)}close(){var e;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",e=>{var t;const n=e.target;null==(t=n.parentNode)||t.removeChild(n),this._abort.raise(new Error("IFrame removed from DOM"))},!0),null==(e=this._frame.contentWindow)||e.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(e,t){return super._notifyParent(window.parent,e,!1,t)}},re=class extends K{constructor({popupWindowTarget:e=Q,popupWindowFeatures:t={}}){super(),this._logger=new S("PopupWindow");const n=T.center({...Y,...t});this._window=window.open(void 0,e,T.serialize(n))}async navigate(e){var t;null==(t=this._window)||t.focus();const n=setInterval(()=>{this._window&&!this._window.closed||this._abort.raise(new Error("Popup closed by user"))},500);return this._disposeHandlers.add(,await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}},oe=class extends M{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new S("UserManagerEvents"),this._userLoaded=new k("User loaded"),this._userUnloaded=new k("User unloaded"),this._silentRenewError=new k("Silent renew error"),this._userSignedIn=new k("User signed in"),this._userSignedOut=new k("User signed out"),this._userSessionChanged=new k("User session changed")}load(e,t=!0){super.load(e),t&&this._userLoaded.raise(e)}ddUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}_raiseSilentRenewError(e){this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}_raiseUserSignedIn(){this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}_raiseUserSignedOut(){this._userSignedOut.raise()}aiseUserSessionChanged(){this._userSessionChanged.raise()}},ie=class{constructor(e){this._logger=new S("UserManager"),this.settings=new te(e),this._client=new $(e),this._redirectNavigator=new class{constructor(e){this._settings=e,this._logger=new S("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var n;this._logger.create("prepare");let r=window.self;"top"===t&&(r=null!=(n=window.top)?n:window.self);const o=r.location[e].bind(r.location);let i;return{navigate:async e=>{this._logger.create("navigate");const t=new Promise(;return o(e.url),await t},close:()=>{this._logger.create("close"),null==i||i(new Error("Redirect aborted")),r.stop()}}}}(this.settings),this._popupNavigator=new class{constructor(e){this._settings=e,this._logger=new S("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new re({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,t=!1){this._logger.create("callback"),re.notifyOpener(e,t)}}(this.settings),this._iframeNavigator=new class{sync prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new ne({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),ne.notifyParent(e,this._settings.iframeNotifyParentOrigin)}}(this.settings),this._events=new oe(this.settings),this._silentRenewService=new class{constructor(e){this._userManager=e,this._logger=new S("SilentRenewService"),this._isStarted=!1,this._retryTimer=new O("Retry Silent Renew"),this._tokenExpiring=async()=>{const e=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),e.debug("silent token renewal successful")}catch(t){if(t instanceof I)return e.warn("ErrorTimeout from signinSilent:",t,"retry in 5s"),void this._retryTimer.init(5);e.error("Error from signinSilent:",t),this._userManager.events._raiseSilentRenewError(t)}}}async start(){const e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}}(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new J(this))}ync getUser(){const e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){const e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");const{redirectMethod:t,...n}=e,r=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...n},r)}async signinRedirectCallback(e=window.location.href){const t=this._logger.create("signinRedirectCallback"),n=await this._signinEnd(e);return n.profile&&n.profile.sub?t.info("success, signed in subject",n.profile.sub):t.info("no subject"),n}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:n=!1}){const r=this._logger.create("signinResourceOwnerCredential"),o=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:n,extraTokenParams:this.settings.extraTokenParams});r.debug("got signin response");const i=await this._buildUser(o);return i.profile&&i.profile.sub?r.info("success, signed in subject",i.profile.sub):r.info("no subject"),i}async signinPopup(e={}){const t=this._logger.create("signinPopup"),{popupWindowFeatures:n,popupWindowTarget:r,...o}=e,i=this.settings.popup_redirect_uri;i||t.throw(new Error("No popup_redirect_uri configured"));const a=await this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:r}),s=await this._signin({request_type:"si:p",redirect_uri:i,display:"popup",...o},a);return s&&(s.profile&&s.profile.sub?t.info("success, signed in subject",s.profile.sub):t.info("no subject")),s}async signinPopupCallback(e=window.location.href,t=!1){const n=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,t),n.info("success")}async signinSilent(e={}){var t;const n=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:r,resource:o,...i}=e;let a=await this._loadUser();if(null==a?void 0:a.refresh_token){n.debug("using refresh token");const e=new class{constructor(e,t){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.resource=t,this.data=e.state}}(a,o);return await this._useRefreshToken(e)}const s=this.settings.silent_redirect_uri;let c;s||n.throw(new Error("No silent_redirect_uri configured")),a&&this.settings.validateSubOnSilentRenew&&(n.debug("subject prior to silent renew:",a.profile.sub),c=a.profile.sub);const l=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r});return a=await this._signin({request_type:"si:s",redirect_uri:s,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==a?void 0:a.id_token:void 0,...i},l,c),a&&((null==(t=a.profile)?void 0:t.sub)?n.info("success, signed in subject",a.profile.sub):n.info("no subject")),a}async _useRefreshToken(e){const t=await this._client.useRefreshToken({state:e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),n=new G({...e,...t});return await this.storeUser(n),this._events.load(n),n}async signinSilentCallback(e=window.location.href){const t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){const{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){const{state:n}=await this._client.readSignoutResponseState(e);if(n)switch(n.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){const t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:n,...r}=e,o=this.settings.silent_redirect_uri;o||t.throw(new Error("No silent_redirect_uri configured"));const i=await this._loadUser(),a=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n}),s=await this._signinStart({request_type:"si:s",redirect_uri:o,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?null==i?void 0:i.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...r},a);try{const e=await this._client.processSigninResponse(s.url);return t.debug("got signin response"),e.session_state&&e.profile.sub?(t.info("success for subject",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid}):(t.info("success, user not authenticated"),null)}catch(e){if(this.settings.monitorAnonymousSession&&e instanceof A)switch(e.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:e.session_state}}throw e}}async _signin(e,t,n){const r=await this._signinStart(e,t);return await this._signinEnd(r.url,n)}async _signinStart(e,t){const n=this._logger.create("_signinStart");try{const r=await this._client.createSigninRequest(e);return n.debug("got signin request"),await t.navigate({url:r.url,state:r.state.id,response_mode:r.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(e){throw n.debug("error after preparing navigator, closing navigator window"),t.close(),e}}async _signinEnd(e,t){const n=this._logger.create("_signinEnd"),r=await this._client.processSigninResponse(e);n.debug("got signin response");return await this._buildUser(r,t)}async _buildUser(e,t){const n=this._logger.create("_buildUser"),r=new G(e);if(t){if(t!==r.profile.sub)throw n.debug("current user does not match user returned from signin. sub from signin:",r.profile.sub),new A({...e,error:"login_required"});n.debug("current user matches user returned from signin")}return await this.storeUser(r),n.debug("user stored"),this._events.load(r),r}async signoutRedirect(e={}){const t=this._logger.create("signoutRedirect"),{redirectMethod:n,...r}=e,o=await this._redirectNavigator.prepare({redirectMethod:n});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...r},o),t.info("success")}async signoutRedirectCallback(e=window.location.href){const t=this._logger.create("signoutRedirectCallback"),n=await this._signoutEnd(e);return t.info("success"),n}async signoutPopup(e={}){const t=this._logger.create("signoutPopup"),{popupWindowFeatures:n,popupWindowTarget:r,...o}=e,i=this.settings.popup_post_logout_redirect_uri,a=await this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:r});await this._signout({request_type:"so:p",post_logout_redirect_uri:i,state:null==i?void 0:{},...o},a),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){const n=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,t),n.info("success")}async _signout(e,t){const n=await this._signoutStart(e,t);return await this._signoutEnd(n.url)}async _signoutStart(e={},t){var n;const r=this._logger.create("_signoutStart");try{const o=await this._loadUser();r.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(o);const i=e.id_token_hint||o&&o.id_token;i&&(r.debug("setting id_token_hint in signout request"),e.id_token_hint=i),await this.removeUser(),r.debug("user removed, creating signout request");const a=await this._client.createSignoutRequest(e);return r.debug("got signout request"),await t.navigate({url:a.url,state:null==(n=a.state)?void 0:n.id})}catch(e){throw r.debug("error after preparing navigator, closing navigator window"),t.close(),e}}async _signoutEnd(e){const t=this._logger.create("_signoutEnd"),n=await this._client.processSignoutResponse(e);return t.debug("got signout response"),n}async signoutSilent(e={}){var t;const n=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:r,...o}=e,i=this.settings.includeIdTokenInSilentSignout?null==(t=await this._loadUser())?void 0:t.id_token:void 0,a=this.settings.popup_post_logout_redirect_uri,s=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r});await this._signout({request_type:"so:s",post_logout_redirect_uri:a,id_token_hint:i,...o},s),n.info("success")}async signoutSilentCallback(e=window.location.href){const t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){const t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){const n=this._logger.create("_revokeInternal");if(!e)return;const r=t.filter(;if(r.length){for(const t of r)await this._client.revokeToken(e[t],t),n.info(t+" revoked successfully"),"access_token"!==t&&(e[t]=null);await this.storeUser(e),n.debug("user stored"),this._events.load(e)}else n.debug("no need to revoke due to no token(s)")}nc _loadUser(){const e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),G.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){const t=this._logger.create("storeUser");if(e){t.debug("storing user");const n=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,n)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)},ae="2.2.5"},function(e,t,n){"use strict";e.exports=0},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(11),a=n.n(i);var s=var c=var l=u=Array.prototype.splice;var d=var h=var f=var p=function g(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}g.prototype.clear=s,g.prototype.delete=d,g.prototype.get=h,g.prototype.has=f,g.prototype.set=p;var m=g;var v=var _=var y=function(e){return this.__data__.get(e)};var b=function(e){return this.__data__.has(e)},w=n(2),S=w.a.Symbol,E=Object.prototype,k=E.hasOwnProperty,x=E.toString,L=S?S.toStringTag:void 0;var T=O=Object.prototype.toString;var C=function(e){return O.call(e)},A=S?S.toStringTag:void 0;var I=var M=var j,P=q=w.a["__core-js_shared__"],R=(j=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"";var N=D=Function.prototype.toString;var U=H=/^\[object .+?Constructor\]$/,B=Function.prototype,F=Object.prototype,z=B.toString,W=F.hasOwnProperty,V=RegExp("^"+z.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var $=var J=var G=K=G(w.a,"Map"),Y=G(Object,"create");var Q=var Z=X=Object.prototype.hasOwnProperty;var ee=te=Object.prototype.hasOwnProperty;var ne=var re=function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oe.prototype.clear=Q,oe.prototype.delete=Z,oe.prototype.get=ee,oe.prototype.has=ne,oe.prototype.set=re;var ie=oe;var ae=var se=var ce=var le=var ue=function(e){return ce(this,e).get(e)};var de=var he=e.prototype.clear=ae,fe.prototype.delete=le,fe.prototype.get=ue,fe.prototype.has=de,fe.prototype.set=he;var pe=fe;var ge=e.prototype.clear=v,me.prototype.delete=_,me.prototype.get=y,me.prototype.has=b,me.prototype.set=ge;var ve=me;var _e=var ye=e.prototype.add=be.prototype.push=_e,be.prototype.has=ye;var we=be;var Se=var Ee=var ke=xe=w.a.Uint8Array;var Le=var Te=Oe=S?S.prototype:void 0,Ce=Oe?Oe.valueOf:void 0;var Ae=var Ie=Me=Array.isArray;var je=var Pe=var qe=Re=Object.prototype.propertyIsEnumerable,Ne=Object.getOwnPropertySymbols,De=Ne?qe;var Ue=var He=var Be=Fe=Object.prototype,ze=Fe.hasOwnProperty,We=Fe.propertyIsEnumerable,Ve=Be(function(){return arguments}())?Be:$e=n(6),Je=/^(?:0|[1-9]\d*)$/;var Ge=var Ke=Ye={};Ye["[object Float32Array]"]=Ye["[object Float64Array]"]=Ye["[object Int8Array]"]=Ye["[object Int16Array]"]=Ye["[object Int32Array]"]=Ye["[object Uint8Array]"]=Ye["[object Uint8ClampedArray]"]=Ye["[object Uint16Array]"]=Ye["[object Uint32Array]"]=!0,Ye["[object Arguments]"]=Ye["[object Array]"]=Ye["[object ArrayBuffer]"]=Ye["[object Boolean]"]=Ye["[object DataView]"]=Ye["[object Date]"]=Ye["[object Error]"]=Ye["[object Function]"]=Ye["[object Map]"]=Ye["[object Number]"]=Ye["[object Object]"]=Ye["[object RegExp]"]=Ye["[object Set]"]=Ye["[object String]"]=Ye["[object WeakMap]"]=!1;var Qe=var Ze=Xe=n(12),et=Xe.a&&Xe.a.isTypedArray,tt=et?Ze(et):Qe,nt=Object.prototype.hasOwnProperty;var rt=ot=Object.prototype;var it=var at=Object.keys,Object),st=Object.prototype.hasOwnProperty;var ct=var lt=var ut=var dt=ht=Object.prototype.hasOwnProperty;var ft=pt=G(w.a,"DataView"),gt=G(w.a,"Promise"),mt=G(w.a,"Set"),vt=G(w.a,"WeakMap"),_t=U(pt),yt=U(K),bt=U(gt),wt=U(mt),St=U(vt),Et=I;(pt&&"[object DataView]"!=Et(new pt(new ArrayBuffer(1)))||K&&"[object Map]"!=Et(new K)||gt&&"[object Promise]"!=Et(gt.resolve())||mt&&"[object Set]"!=Et(new mt)||vt&&"[object WeakMap]"!=Et(new vt))&&(Et=;var kt=Et,xt=Object.prototype.hasOwnProperty;var Lt=var Tt=var Ot=var Ct=var At=var It=var Mt=var jt=Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/;var Rt=t.Cache=pe;var Dt=Nt;var Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/\\(\\)?/g,Bt=();var Ft=zt=S?S.prototype:void 0,Wt=zt?zt.toString:void 0;var Vt=var $t=var Jt=var Gt=var Kt=var Yt=var Qt=var Zt=var Xt=var en=var tn=var nn=var rn=var on=var an=var sn=var cn=ln=/\s/;var un=dn=/^\s+/;var hn=fn=/^[-+]0x[0-9a-f]+$/i,pn=/^0b[01]+$/i,gn=/^0o[0-7]+$/i,mn=parseInt;var vn=var _n=var yn=bn=Math.max;var wn=sn((),Sn=n(1),En=n.n(Sn),kn=xn=Math.max,Ln=Math.min;var Tn=var On,Cn,An,In,Mn=jn=function(){return On||(On=document.querySelector("[data-tcom-global-header]")),On},Pn=qn=function(){var e=document.querySelector(".tcom-global-header--megamenu-v2");if(e){var t=new Event("DOMTcomModalClosed");document.dispatchEvent(t);var n=Pn();n.classList.remove(Hn()?"tcom-lego-mega__global__page--show":"hide-element-important"),n.querySelectorAll("[data-tcom-lego-mega-menu-focusables]").forEach(()}An=An||document.querySelectorAll("body > *"),Array.prototype.forEach.call(An,(function(t){if(e){if(t===Cn||t.classList.contains("page")||t.classList.remove("hide-element-important"),Hn())document.body.classList.remove("tcom-lego-search__global__body--show");else{var n=document.querySelector("[data-tcom-login-modal]");n&&(n.classList.remove("tcom-global-header-modal--show"),n.removeAttribute("data-global-header-modal-active"))}On.removeEventListener("click",Dn),document.addEventListener("keyup",Rn),Pn().removeEventListener("click",Nn)}else t!==Cn&&t.classList.remove("hide-element-important")}))},Rn=Nn=Dn=function(e){var t=e.target;if(t){var n=t.closest("[data-header-right-menu-option]");t.closest(".tcom-global-navigation__right-menu")&&!n&&(qn(),t.click())}},Un=function(e){var t=null;try{t=new Event(e)}catch(n){(t=document.createEvent("Event")).initEvent(e,!1,!1)}return t},Hn=Bn=function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);for(var n=e;n!==document.body;){if(n.matches(t))return n;n.parentNode&&(n=n.parentNode)}return null};function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vn(r.key),r)}}function Wn(e,t,n){return(t=Vn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e){var t=function(e,t){if("object"!==Fn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fn(t)?t:String(t)}var $n=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wn(this,"notificationBarElement",void 0),Wn(this,"visibleNotification",!1),Wn(this,"modalOpened",!1),Wn(this,"initialHeight",void 0),Wn(this,"browserRefresh",!1),Wn(this,"returnPostSevenDays",!1),Wn(this,"globalHeaderNotificationBar",!1),Wn(this,"ieSunsetBarExists",document.querySelector(".sunset-notification-bar")),Wn(this,"showNotification",(function(){n.notificationBarElement&&(n.globalHeaderNotificationBar="true"===n.notificationBarElement.dataset.statusBar,n.showNotificationNew(),n.returnPostSevenDays=n.getTimeSinceDismissal(),n.ieSunsetBarExists&&n.browserRefresh&&n.returnPostSevenDays&&localStorage.removeItem("tcomIE11SunsetTime"),n.globalHeaderNotificationBar||n.returnPostSevenDays||!localStorage.getItem("tcomIE11SunsetTime")||n.hideNotification())})),Wn(this,"showNotificationNew",(function(){if(n.showNotificationText()){n.notificationBarElement.style.display="flex",n.notificationBarElement.style.height="".concat(n.initialHeight,"px"),n.visibleNotification=!0,n.toggleElements(!0);var e=jn();e.classList.add("tcom-global-header--notification-visible"),e.classList.remove("tcom-global-header--notification-hidden"),window.location.href.indexOf("small-business")>-1?localStorage.removeItem("tcomNotificationTextBusiness"):window.location.href.indexOf("business-enterprise")>-1?localStorage.removeItem("tcomNotificationTextEnterprise"):localStorage.removeItem("tcomNotificationTextPersonal")}else n.hideNotification(),document.body.style.marginTop=null})),Wn(this,"hideNotification",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.notificationBarElement){n.notificationBarElement.style.height="0",e&&window.setTimeout((,200),n.visibleNotification=!1,n.toggleElements(!1);var t=jn();t.classList.add("tcom-global-header--notification-hidden"),t.classList.remove("tcom-global-header--notification-visible")}})),Wn(this,"storeDateOnDismissal",(function(){var e={timeStamp:Date.now()};localStorage.setItem("tcomIE11SunsetTime",JSON.stringify(e))})),Wn(this,"getTimeSinceDismissal",(function(){var e=localStorage.getItem("tcomIE11SunsetTime");if(!e)return!1;try{var t=JSON.parse(e).timeStamp;if(t)if((Date.now()-t)/864e5>7)return!0;return!1}catch(e){return!1}})),Wn(this,"storeNotificationOnDismissal",(function(){var e=n.notificationBarElement.innerText,t={timeStamp:Date.now(),value:e};window.location.href.indexOf("small-business")>-1?localStorage.setItem("tcomNotificationTextBusiness",JSON.stringify(t)):window.location.href.indexOf("business-enterprise")>-1?localStorage.setItem("tcomNotificationTextEnterprise",JSON.stringify(t)):localStorage.setItem("tcomNotificationTextPersonal",JSON.stringify(t))})),Wn(this,"showNotificationText",(function(){var e;if(!(e=window.location.href.indexOf("small-business")>-1?localStorage.getItem("tcomNotificationTextBusiness"):window.location.href.indexOf("business-enterprise")>-1?localStorage.getItem("tcomNotificationTextEnterprise"):localStorage.getItem("tcomNotificationTextPersonal")))return!0;try{var t=n.notificationBarElement.innerText,r=JSON.parse(e),o=r.timeStamp,i=r.value;return!(!n.notificationTextDiff(t,i)&&!n.isTimePast7Days(o))}catch(e){return!0}})),Wn(this,"notificationTextDiff",(),Wn(this,"generateStringHash",(function(e){return e.split("").reduce((,0)})),Wn(this,"isTimePast7Days",(function(e){return(Date.now()-e)/864e5>Number(n.notificationBarElement.dataset.daysLimit)})),this.notificationBarElement=t,this.initialHeight=t.offsetHeight,e.currentNotificationBar=this,this.ieSunsetBarExists&&(this.browserRefresh=!0)}var t,n,r;return t=e,(n=[{key:"toggleElements",value:function(e){var t=this.notificationBarElement.querySelector("[data-tcom-notification-bar-close-button]"),n=this.notificationBarElement.querySelector("[data-tcom-notification-bar-link]");if(!e)return t&&t.setAttribute("tabindex","-1"),void(n&&n.setAttribute("tabindex","-1"));t&&t.removeAttribute("tabindex"),n&&n.removeAttribute("tabindex")}},{key:"init",value:function(){var e=this,t=window.innerWidth,n=function(){if(!e.modalOpened){var t=e.initialHeight;window.pageYOffset>t?e.hideNotification():e.showNotification()}},r=Mn(n,100),o=Mn((function(){if(t!==window.innerWidth){t=window.innerWidth,e.notificationBarElement.classList.remove("tcom-notification-bar--transition"),e.notificationBarElement.style.display="flex",e.notificationBarElement.style.height="auto",e.initialHeight=e.notificationBarElement.clientHeight,e.notificationBarElement.style.height="".concat(e.initialHeight,"px");var r=jn().offsetHeight;document.body.style.marginTop="".concat(r,"px"),n(),e.notificationBarElement.classList.add("tcom-notification-bar--transition")}}),100);window.addEventListener("resize",o),window.addEventListener("scroll",r),function(){e.notificationBarElement.style.display="flex",e.notificationBarElement.style.height="auto",e.initialHeight=e.notificationBarElement.clientHeight,e.notificationBarElement.style.height="".concat(e.initialHeight,"px");var t=jn().offsetHeight;document.body.style.marginTop="".concat(t,"px"),n(),e.notificationBarElement.classList.add("tcom-notification-bar--transition")}();var i=document.addEventListener("DOMTcomModalOpened",(function(){i(!0)})),document.addEventListener("DOMTcomModalClosed",();var a=this.notificationBarElement.querySelector("[data-tcom-notification-bar-close-button]"),s=document.querySelector("[data-telstra-logo-link]");a&&s&&(a.addEventListener("keydown",(function(t){"Enter"!==t.key&&" "!==t.key||(e.hideNotification(!0),e.ieSunsetBarExists&&e.storeDateOnDismissal(),e.storeNotificationOnDismissal(),window.removeEventListener("resize",o),window.removeEventListener("scroll",r),document.body.style.marginTop=null,s.focus())})),a.addEventListener("click",(function(t){t.preventDefault(),e.hideNotification(!0),e.ieSunsetBarExists&&e.storeDateOnDismissal(),e.storeNotificationOnDismissal(),window.removeEventListener("resize",o),window.removeEventListener("scroll",r),document.body.style.marginTop=null,s.focus()})))}}])&&zn(t.prototype,n),r&&zn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Wn($n,"currentNotificationBar",void 0);var Jn=768,Gn=1024,Kn=1360,Yn=function(){return window.innerWidth>=Kn?"xl":window.innerWidth>=Gn?"lg":window.innerWidth>=Jn?"md":"sm"},Qn=function(e){var t=e.currentTarget;t.classList.add("hide-outline"),t.addEventListener("blur",(function e(t){var n=t.currentTarget;n.classList.remove("hide-outline"),n.removeEventListener("blur",e,!1)}))},Zn=function(e){e&&(e instanceof NodeList?Array.prototype.forEach.call(e,():e.addEventListener("mousedown",Qn))};function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nr(r.key),r)}}function tr(e,t,n){return(t=nr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(e){var t=function(e,t){if("object"!==Xn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xn(t)?t:String(t)}document.addEventListener("DOMContentLoaded",(function(){!function(){var e=document.querySelectorAll(".small-cta");Zn(e);var t=document.querySelectorAll(".medium-cta");Zn(t);var n=document.querySelectorAll(".large-cta");Zn(n)}()}));var rr=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tr(this,"modalElement",void 0),tr(this,"scrollBlocked",void 0),tr(this,"currentScrollTop",0),tr(this,"previousViewport",void 0),tr(this,"isV11Version",!1),tr(this,"show",(function(){if(e.currentModal&&e.currentModal.close(),$n.currentNotificationBar&&Hn()){var t=$n.currentNotificationBar;if(t.visibleNotification){var r=t.initialHeight;n.modalElement.style.marginTop="".concat(r,"px")}}n.modalElement.classList.add("tcom-global-header-modal--show"),n.modalElement.setAttribute("data-global-header-modal-active",""),e.currentModal=n,document.addEventListener("keydown",n.keydownEvent),n.blockScroll();var o=Un("DOMTcomModalOpened");document.dispatchEvent(o),document.body.classList.add("body-tcom-global-header-modal-opened"),e.closeOverlayv11(),e.openOverlayv11()})),tr(this,"close",(function(){$n.currentNotificationBar&&Hn()&&(n.modalElement.style.marginTop=null),n.modalElement.classList.remove("tcom-global-header-modal--show"),n.modalElement.removeAttribute("data-global-header-modal-active"),e.currentModal=void 0,document.removeEventListener("keydown",n.keydownEvent,!1);var t=Un("DOMTcomModalClosed");if(document.dispatchEvent(t),document.body.classList.remove("body-tcom-global-header-modal-opened"),n.enableScroll(),e.closeOverlayv11(),n.isV11Version)try{var r=document.querySelectorAll(".slick-slider");Array.prototype.forEach.call(r,()}catch(e){console.log(e)}})),tr(this,"keydownEvent",(function(t){switch(t.keyCode){case 27:e.currentModal&&e.currentModal.close()}})),!t)throw new Error("Megamenu element not found");this.modalElement=t,this.scrollBlocked=!1,this.previousViewport=Yn(),this.keydownEvent.bind(this),this.addEvenToCloseButton(),this.close.bind(this),this.show.bind(this),this.handleWindowResizing(),this.isV11Version=document.body.classList.contains("nav-v12")}var t,n,r;return t=e,r=[{key:"openOverlayv11",value:function(){var e=jn().parentNode,t=document.querySelector(".tcom-global-header-overlay");t||((t=document.createElement("div")).classList.add("tcom-global-header-overlay"),e.insertBefore(t,e.firstChild)),t.classList.add("tcom-global-header-overlay--show")}},{key:"closeOverlayv11",value:],(n=[{key:"addEvenToCloseButton",value:function(){var e=this,t=this.modalElement.querySelector("[data-tcom-mega-menu-close-button]"),n=document.querySelector("[data-tcom-mega-menu-close-button-mobile]");t&&(t.addEventListener("click",this.close),t.addEventListener("keypress",(function(t){t.preventDefault(),e.close()}))),n&&(n.addEventListener("click",this.close),n.addEventListener("keypress",())}},{key:"enableScroll",value:function(){this.scrollBlocked&&(this.scrollBlocked=!1,qn(),window.scrollTo(0,this.currentScrollTop))}},{key:"blockScroll",value:function(){this.scrollBlocked||(this.currentScrollTop=window.pageYOffset,function(){var e=document.querySelector(".tcom-global-header--megamenu-v2");if(e){var t=new Event("DOMTcomModalOpened");document.dispatchEvent(t);var n=Pn();n.classList.add(Hn()?"tcom-lego-mega__global__page--show":"hide-element-important"),n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]:not([data-filters-segment])').forEach((function(e){"-1"!==e.getAttribute("tabindex")&&(e.setAttribute("data-tcom-lego-mega-menu-focusables","true"),e.setAttribute("tabindex","-1"))}))}An=An||document.querySelectorAll("body > *"),Array.prototype.forEach.call(An,(function(t){Cn||t.querySelector("[data-tcom-global-header]")&&(Cn=t),e?(t===Cn||t.classList.contains("page")||t.classList.add("hide-element-important"),Hn()&&(document.body.classList.add("tcom-lego-search__global__body--show"),On.addEventListener("click",Dn)),document.addEventListener("keydown",Rn),Pn().addEventListener("click",Nn)):t!==Cn&&t.classList.add("hide-element-important")}))}(),this.scrollBlocked=!0)}},{key:"handleWindowResizing",value:function(){var e=this,t=this,n=Mn((function(){var n=Yn();t.previousViewport!==n&&(t.previousViewport=n,e.close())}),100);window.addEventListener("resize",n)}}])&&er(t.prototype,n),r&&er(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cr(r.key),r)}}unction sr(e,t,n){return(t=cr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cr(e){var t=function(e,t){if("object"!==or(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===or(t)?t:String(t)}tr(rr,"currentModal",void 0);var lr=ar((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sr(this,"getDigitalData",(),sr(this,"sendToEventInfo",(function(e,n){var r=t.getDigitalData();r.event=r.event||[];var o={eventAction:"click",eventType:"clickHeader",eventCategory:e,eventName:n};r.event.push({eventInfo:o})})),sr(this,"pushTechnicalErrorEventInfo",(function(e,n){var r=t.getDigitalData();r.event=r.event||[];var o={eventAction:"error",eventType:"Technical",eventCategory:e,eventName:n};r.event.push({eventInfo:o})})),sr(this,"pushUserProfileInfo",(function(e){var n=t.getDigitalData(),r={profileInfo:{userContactUUID:e}},o=[];o.push(r),n.user=n.user||[],n.user.push({profile:o})})),sr(this,"pushAgentInfo",(function(e){var n=t.getDigitalData(),r={profileInfo:{userType:e}},o=[];o.push(r),n.user=n.user||[],n.user.push({profile:o})}))}));function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}ction pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r} _r=function(){function e(t,n,r){if(this,e),mr(this,"megaMenuElement",void 0),mr(this,"megaMenuOptions",void 0),mr(this,"megaMenuModal",void 0),mr(this,"opened",void 0),mr(this,"active",!1),mr(this,"triggerElement",void 0),mr(this,"firstLevelElementsList",void 0),mr(this,"secondLevelElementsList",void 0),mr(this,"digitalData",void 0),mr(this,"megamenuVersion2",!1),mr(this,"findClosestParent",(function(e){for(;e.parentElement;){if((e=e.parentElement).getAttribute("data-header-option-type"))return e.querySelector("[data-header-option-anchor]")||null}return null})),!t||!n)throw new Error("Megamenu element not found");this.active=r,this.triggerElement=n,this.opened=!1,this.megaMenuElement=t,this.megaMenuModal=new rr(this.megaMenuElement),this.megaMenuOptions=t.querySelectorAll("[data-tcom-mega-menu-option-container]"),this.digitalData=new lr,this.initialiseMegaMenu();var o=document.querySelector(".tcom-global-header--megamenu-v2");this.megamenuVersion2=!!o}var t,n,r;return t=e,r=[{key:"setHeighToAccordionElement",value:function(e){var t=e;t.style.display="block";var n="".concat(e.scrollHeight,"px");return t.style.height=n,t.style.display="",n}}],(n=[{key:"initialiseMegaMenu",value:function(){var t=this;this.firstLevelElementsList=[],this.secondLevelElementsList=[];var n=function(n,r,o){if(Hn())Array.prototype.forEach.call(t.megaMenuOptions,(function(e){e.classList.remove("tcom-mega-menu__option--expanded"),e.querySelector("[data-tcom-mega-menu-option]").setAttribute("aria-expanded","false")}));else{if("true"===r.getAttribute("aria-expanded"))return n.classList.remove("tcom-mega-menu__option--expanded"),r.setAttribute("aria-expanded","false"),void(o&&(o.style.height="".concat(o.scrollHeight,"px"),setTimeout((function(){o.style.height="0px"}),20),setTimeout((function(){o.classList.add("tcom-mega-menu__hidden-mobile")}),300)));o&&(o.classList.remove("tcom-mega-menu__hidden-mobile"),e.setHeighToAccordionElement(o),setTimeout((,300))}n.classList.add("tcom-mega-menu__option--expanded"),r.setAttribute("aria-expanded","true"),t.handleHeight()};Array.prototype.forEach.call(this.megaMenuOptions,(function(e){var r=e.querySelector("[data-tcom-mega-menu-option]");if(r){var o=e.querySelector("[data-tcom-mega-menu-list-container]");o&&(o.querySelector("[data-popular-actions]")&&o.classList.add("tcom-mega-menu-list-container--pupular-actions"),r.addEventListener("keypress",(function(i){i.preventDefault(),n(e,r,o);var a=t.findClosestParent(r);t.digitalData.sendToEventInfo(a?a.innerText.toLowerCase().trim():"",r.innerText.toLowerCase().trim()||"")})),r.addEventListener("click",(function(i){i.preventDefault(),n(e,r,o);var a=t.findClosestParent(r);t.digitalData.sendToEventInfo(a?a.innerText.toLowerCase().trim():"",r.innerText.toLowerCase().trim()||"")})),t.firstLevelElementsList.push({content:o,trigger:r}),t.handleLastLevelMenuMobile(e))}}))}},{key:"handleHeight",value:function(){var e=this;if(Hn()&&this.megamenuVersion2){var t=hr(this.megaMenuOptions).filter((function(e){return function(e){return!(!e.parentElement||e.parentElement.hasAttribute("data-tcom-megamenu-additional"))}(e)}));t.forEach((function(n){if(n.classList.contains("tcom-mega-menu__option--expanded")){var r=n.querySelector("[data-tcom-mega-menu-list-container]"),o=document.querySelector("[data-global-header-modal-active]"),i=e.megaMenuElement.querySelector(".tcom-global-header-modal__content"),a=i.querySelector(".tcom-mega-menu__home")?80*t.length+80:80*t.length,s=o?o.clientHeight:.7*window.innerHeight,c=r.querySelector("[data-popular-actions]");if(window.innerHeight<r.clientHeight)return void(i&&(i.style.overflowY="scroll",i.style.height="".concat(window.innerHeight,"px")));if(window.innerHeight<s)return void(i&&(i.style.overflowY="scroll",i.style.height="".concat(s,"px")));if(80*t.length>r.clientHeight&&80*t.length>600||a>r.clientHeight&&a>600)return i.style.overflowY="scroll",void e.handleBackgroundAndGreyLine(e.megaMenuElement,r);if(r.clientHeight>s||(c?c.clientHeight:0)>s)return i&&(i.style.overflowY="scroll"),void e.handleBackgroundAndGreyLine(e.megaMenuElement,r);r.clientHeight<600&&(c?c.clientHeight:0)<600?i&&(i.scroll(0,0),i.style.height="",i.style.overflowY="hidden"):(e.megaMenuElement.style.height="".concat(r.clientHeight+24,"px"),i&&(i.style.overflowY="hidden"))}}))}}},{key:"handleBackgroundAndGreyLine",value:function(e,t){if(this.megamenuVersion2){var n=e.querySelector(".tcom-mega-menu__option:last-child .tcom-mega-menu__option__title"),r=this.megaMenuElement.querySelector(".tcom-mega-menu-list--grey-background-element");if(n&&r){if(!Hn())return void(n.style.height="unset");80*this.megaMenuOptions.length>t.clientHeight?(n.style.height="130px",r.style.maxHeight="".concat(80*this.megaMenuOptions.length+130,"px")):(n.style.height="".concat(t.clientHeight-80*this.megaMenuOptions.length+50,"px"),r.style.maxHeight="".concat(t.clientHeight+80,"px"))}}}},{key:"handleLastLevelMenuMobile",value:function(t){var n=this,r=t.querySelectorAll("[data-mega-menu-list-item-childrens]"),o=function(t,n){if(!Hn()){if("true"===t.getAttribute("aria-expanded"))return t.setAttribute("aria-expanded","false"),t.classList.remove("tcom-mega-menu-list__title--expanded"),void(n&&(n.style.height="0px",setTimeout((,300)));n&&(n.classList.remove("tcom-mega-menu__hidden-mobile"),e.setHeighToAccordionElement(n)),t.classList.add("tcom-mega-menu-list__title--expanded"),t.setAttribute("aria-expanded","true")}};Array.prototype.forEach.call(r,(function(e){var r=e.querySelector("[data-tcom-mega-menu-list-item-anchor]"),i=e.querySelector("[data-tcom-mega-menu-list-item-content]");n.secondLevelElementsList.push({content:i,trigger:r});var a,s,c,l,u=t.querySelector("[data-tcom-mega-menu-option]"),d=n.findClosestParent(r);d&&(a=r,s=u,c=d,l=i.querySelectorAll(".tcom-mega-menu-list__option__anchor"),Array.prototype.forEach.call(l,(function(e){e.addEventListener("keypress",(function(){n.digitalData.sendToEventInfo("".concat(c.innerText.toLowerCase().trim(),":").concat(s.innerText.toLowerCase().trim(),":").concat(a.innerText.toLowerCase().trim()),e.innerText.toLowerCase().trim())})),e.addEventListener("click",(function(){n.digitalData.sendToEventInfo("".concat(c.innerText.toLowerCase().trim(),":").concat(s.innerText.toLowerCase().trim(),":").concat(a.innerText.toLowerCase().trim()),e.innerText.toLowerCase().trim())}))}))),r.addEventListener("keypress",(function(e){n.digitalData.sendToEventInfo(u&&d?"".concat(d.innerText.toLowerCase().trim(),":").concat(u.innerText.toLowerCase().trim()):"",r.innerText.toLowerCase().trim()||""),Hn()?r.removeAttribute("aria-expanded"):(e.preventDefault(),o(r,i))})),r.addEventListener("click",(function(e){n.digitalData.sendToEventInfo(u&&d?"".concat(d.innerText.toLowerCase().trim(),":").concat(u.innerText.toLowerCase().trim()):"",r.innerText.toLowerCase().trim()||""),Hn()?r.removeAttribute("aria-expanded"):(e.preventDefault(),o(r,i))}))}))}},{key:"resetSubMenus",value:function(){var e=this;if(this.opened&&(Array.prototype.forEach.call(this.megaMenuOptions,(function(t){if(t.classList.remove("tcom-mega-menu__option--expanded"),t.querySelector("[data-tcom-mega-menu-option]").setAttribute("aria-expanded","false"),e.megamenuVersion2){var n=e.megaMenuElement.querySelector(".tcom-mega-menu__option:last-child .tcom-mega-menu__option__title");n&&!Hn()&&(n.style.height="unset")}})),this.firstLevelElementsList&&this.firstLevelElementsList.forEach((function(e){e.trigger.setAttribute("aria-expanded","false"),e.content&&(e.content.style.height="",e.content.classList.add("tcom-mega-menu__hidden-mobile"))})),this.secondLevelElementsList&&this.secondLevelElementsList.forEach((function(e){Hn()?e.trigger.removeAttribute("aria-expanded"):e.trigger.setAttribute("aria-expanded","false"),e.content&&(e.content.style.height="",e.trigger.classList.remove("tcom-mega-menu-list__title--expanded"),e.content.classList.add("tcom-mega-menu__hidden-mobile"))})),this.megamenuVersion2)){var t=document.querySelector("body > .page");t&&t.classList.remove("tcom-lego-mega__global__page--show")}}},{key:"toggle",value:function(){var t=this;return e.currentMegamenu!==this&&e.currentMegamenu&&e.currentMegamenu.toggle(),this.opened?(this.megaMenuModal.close(),this.opened=!1,e.currentMegamenu=void 0,this.resetSubMenus(),this.opened):(this.megaMenuModal.show(),this.opened=!0,e.currentMegamenu=this,document.addEventListener("DOMTcomModalClosed",(function e(){document.removeEventListener("DOMTcomModalClosed",e),t.resetSubMenus(),t.opened=!1})),this.opened)}},{key:"megaMenuOptionsCleanSlate",value:function(){Array.prototype.forEach.call(this.megaMenuOptions,()}},{key:"toogleFirstElement",value:function(){if(!(window.innerWidth<1024)){this.megaMenuOptionsCleanSlate();var e=dr(this.megaMenuOptions,1)[0];e.querySelector("[data-tcom-mega-menu-option]").setAttribute("aria-expanded","true"),e.classList.add("tcom-mega-menu__option--expanded"),this.handleHeight()}}},{key:"toogleHelpMenuHeaderElement",value:function(e,t){if(!(window.innerWidth<1024)&&this.megamenuVersion2){if(this.megaMenuOptionsCleanSlate(),t.parentElement){var n=t.parentElement.querySelectorAll("[data-tcom-mega-menu-option]"),r=!1;n.forEach((function(t){var n=t.querySelector("span");n&&n.innerText===e&&(t.setAttribute("aria-expanded","true"),t.closest(".tcom-mega-menu__option")&&(t.parentElement.parentElement.classList.add("tcom-mega-menu__option--expanded"),r=!0))})),r||this.toogleFirstElement()}else this.toogleFirstElement();this.handleHeight()}}}])&&gr(t.prototype,n),r&&gr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();mr(_r,"currentMegamenu",void 0);var yr=n(15),br=n.n(yr);r Er=function(e){var t=0;if(e&&e.length){for(var n=0;n<e.length;n+=1)t+=e[n].quantity?parseInt(e[n].quantity,10):0;var r=jn(),o=r.querySelector("[data-tcom-cart-notification]"),i=r.querySelector("[data-cart-link]");o&&i&&(t>0?(o.classList.remove("d-none"),i.ariaLabel="Shopping Cart Link - ".concat(t," items in cart")):(o.classList.add("d-none"),i.ariaLabel="Shopping cart link - cart is empty"))}};function kr(e){var t=jn().querySelector("[data-tcom-cart-wrapper-items-dropdown]"),n=t.dataset,r=n.shoppingCartFullHeading,o=n.shoppingCartFullCta,i=n.shoppingCartEmptyHeading,a=n.shoppingCartEmptyBodyCopy,s=n.shoppingCartFullUrl,c=n.shoppingCartBackorderCopy;if(r&&o&&i&&a&&s&&c){if(!e){var l=Tr(a,!0);return t.insertAdjacentHTML("afterbegin",l),void t.insertAdjacentHTML("afterbegin",'<h2 class="tcom-global-navigation__cart-title">'.concat(i,"</h2>"))}var u=t.querySelector("[data-tcom-cart-action-list]");u&&u.classList.add("d-none");var d,h=0,f=e.cartData,p=document.createElement("ul");p.classList.add("tcom-global-navigation__cart__wrapper-cartItems");var g,m=En.a.filter(e.cartItems,"productOffering");if(m.length){var v={};m.forEach((function(e){e.productOffering.characteristics.forEach((function(t){if(t.name&&"ATTR_CO_PR_SET_ID"===t.name&&t.value){var n=t.value;v[n]?v[n].push(e):v[n]=[e]}}))})),Object.entries(v).forEach((function(e){var t=wr(e,2),n=(t[0],xr(t[1],c,!0));n&&(h+=1,p.insertAdjacentHTML("beforeend",n))}))}else if(f||f.length)for(var _=0;_<f.length;_+=1){f[_].inStock&&"true"!==f[_].inStock&&(d=f[_].inStock);var y=(g=f[_],void 0,'\n  <li class="tcom-global-navigation__cart__cartItems-container">\n    <div class="tcom-global-navigation__cart__container-image">\n    <img class="tcom-global-navigation__cart__container-image--holder" src="/content/dam/tcom/renos/assets/cartmodal/'.concat(Lr(g),'">\n\n    </div>\n    <div class="tcom-global-navigation__cart__container-details">\n    <div class="tcom-global-navigation__cart__details-name tcom-able__text-label">').concat(g.name,"</div>\n    ").concat(g.subType.includes("electricity")||g.subType.includes("gas")||g.subType.includes("deviceassurance")?"":'<div class="tcom-global-navigation__cart__details-plan tcom-able__text-body-short">'.concat(g.dataAllowance?g.dataAllowance:"".concat(g.colour,", ").concat(g.size),"</div>"),"\n    </div>\n  </li>\n  "));h+=1,p.insertAdjacentHTML("beforeend",y)}t.insertAdjacentElement("beforeend",p),d&&t.insertAdjacentHTML("beforeend",'\n      <div class="tcom-global-navigation__cart__backorder__wrapper">\n        <svg aria-hidden="true" class="tcom-icon-24 explore-promo-icon">\n          <use href="/content/dam/tcom/able/able-sprites.svg#Shop"></use>\n        </svg>\n        <div tcom-global-navigation__cart__backorder-copy>'.concat(c.replace("[backorder]",d||"back-order"),"</div>\n      </div>")),setTimeout((function(){var e=t.querySelector(".tcom-global-navigation__cart__cartItems-container");e&&m.length&&e.classList.add("tcom-global-navigation__cart__cartItems-container--noborder")}),50),t.insertAdjacentHTML("afterbegin",Tr("".concat(h," item").concat(h>1?"s":""))),t.insertAdjacentHTML("afterbegin",'<h2 class="tcom-global-navigation__cart-title">'.concat(r,"</h2>")),t.insertAdjacentHTML("beforeend",'<a href="'.concat(s,'" class="tcom-able__button-high-emphasis tcom-global-navigation__cart-CTA">').concat(o,"</a>"))}}function xr(e,t,n){var r=En.a.sortBy(e,["productOffering.productName"]),o=En.a.intersectionBy(r,[{"productOffering.productFamily":"General"},{"productOffering.productFamily":"Mobiles"},{"productOffering.productFamily":"BusinessAppsAndServices"}],"productOffering.productFamily");if(!o.length)return null;var i=o[0];if(!i)return null;var a=En.a.find(i.itemAttributes,{name:"exploreImageURL"}),s=En.a.find(i.itemAttributes,{name:"deviceColor"});if(!s){var c=En.a.find(i.productOffering.characteristics,{name:"ATTR_CLR"});c&&(s=c)}var l=En.a.find(i.itemAttributes,{name:"deviceName"})||i.productOffering.productName,u=En.a.find(i.itemAttributes,{name:"deviceStorage"}),d={subType:i.productOffering.productSubType};if(!i.productOffering.productSubType){var h=En.a.find(i.productOffering.characteristics,{name:"ATTR_CO_PR_SUB_TYP"});h&&(d.subType=h.value)}var f=En.a.find(i.itemAttributes,{name:"stockStatus"}),p=En.a.without(e,i),g="";if(0===p.length){var m=En.a.find(i.productOffering.characteristics,{name:"ATT_OFCH_INCLUDED_DATA"}),v=En.a.find(i.productOffering.characteristics,{name:"ATT_OFCH_INCLUDED_SPEED"});g+="\n      ".concat(m&&m.value?'\n        <div class="tcom-global-navigation__cart__details-plan tcom-able__text-fine-print">'.concat(m.value).concat(v&&"enhanced"===v.value.toLowerCase()?", 5G network access":"","</div>\n        </div>\n        "):"","\n    ")}else p.forEach((function(e){var t=e.productOffering.productName,n=En.a.find(e.productOffering.characteristics,{name:"ATT_OFCH_INCLUDED_DATA"}),r=En.a.find(e.productOffering.characteristics,{name:"ATT_OFCH_INCLUDED_SPEED"});t&&(g+='\n        <div class="tcom-global-navigation__cart__details-name tcom-able__text-label">\n          '.concat(t,"\n        </div>\n        ").concat(n&&n.value?'\n          <div class="tcom-global-navigation__cart__details-plan tcom-able__text-fine-print">'.concat(n.value).concat(r&&"enhanced"===r.value.toLowerCase()?", 5G network access":"","</div>\n          </div>\n          "):"","\n      "))}));return'\n  <li class="tcom-global-navigation__cart__cartItems-container tcom-global-navigation__cart__cartItems-container--multicart '.concat(n?"tcom-global-navigation__cart__cartItems-container--multicart--new":"",'">\n    <div class="tcom-global-navigation__cart__container-image">\n    <img class="tcom-global-navigation__cart__container-image--holder" src="').concat(a&&a.value?a.value:"/content/dam/tcom/renos/assets/cartmodal/".concat(d?Lr(d):Lr()),'">\n    </div>\n    <div class="tcom-global-navigation__cart__cartItems-container tcom-global-navigation__cart__cartItems-container--multicart-set">\n      <div class="tcom-global-navigation__cart__container-details">\n      <div class="tcom-global-navigation__cart__details-name tcom-able__text-label">\n        ').concat(l&&l.value?l.value:l,'\n      </div>\n      <div class="tcom-global-navigation__cart__details-plan tcom-able__text-fine-print">\n        ').concat(s&&s.value?"".concat(s.value):"").concat(u&&u.value?", ".concat(u.value):"","\n      </div>\n      ").concat(g,"\n      ").concat(f&&"inStock"!==f.value?'<div class="tcom-global-navigation__cart__backorder__wrapper tcom-global-navigation__cart__backorder__wrapper--multicart">\n            <svg aria-hidden="true" class="tcom-icon-24 explore-promo-icon">\n              <use href="/content/dam/tcom/able/able-sprites.svg#Shop"></use>\n            </svg>\n            <div tcom-global-navigation__cart__backorder-copy>'.concat(t.replace("[backorder]",f.value)||"back-order"),"</div>\n          </div>"):"","\n      </div>\n\n    </div>\n  </li>\n  ")}function Lr(e){if(!e||!e.subType)return"cart-plan-thumbnail.png";switch(e.subType.toLowerCase()){case"fixed":case"bundle":return"cart-home-internet-thumbnail.png";case"electricity":return"cart-elec-thumbnail.png";case"gas":return"cart-gas-thumbnail.png";case"handset":return"cart-mobile-thumbnail.png";case"data":case"voicedata":return"cart-plan-thumbnail.png";case"modem":return"cart-mobile-broadband-thumbnail.png";case"tablet":return"cart-mobile-thumbnail.png";default:return"cart-accessories-thumbnail.png"}}function Tr(e,t){return'<div class="tcom-global-navigation__cart__wrapper-cartItems--nomargin">\n    <div class="tcom-global-navigation__cart__cartItems-container '.concat(t?"tcom-global-navigation__cart__cartItems-container--noborder":"",'">\n      <div class="tcom-global-navigation__cart__details-plan tcom-able__text-base">\n        ').concat(e,"\n      </div>\n    </div>\n  </div>\n  ")}var Or=);var Cr=Ar=Object.prototype.hasOwnProperty;var Ir=var Mr=var jr=Pr=n(10);var qr=);var Rr=var Nr=var Dr=Ur={},Hr=function(e){Dr(e,(),Ur.timestamp=(new Date).getTime();var t=JSON.stringify(Ur);localStorage.setItem("userOIDCTelstraComAu",t)},Br=Fr=function(){try{var e=localStorage.getItem("userOIDCTelstraComAu"),t=JSON.parse(e),n=new Date(t.timestamp);return(new Date-n)/6e4>=15?(Br(),null):t}catch(e){return null}},zr=function(){var e=Yt(window,"global.ssoUrl")||"https://myid.telstra.com",t=window.location.href;return{authority:"".concat(e,"/identity/as/authorization.oauth2"),client_id:"b2c-telstracomau",redirect_uri:t,response_type:"code",scope:"openid app.telstracomau",post_logout_redirect_uri:"".concat(e,"/identity/idp/startSLO.ping?TargetResource=").concat(t),post_timeout_redirect_uri:"".concat(e,"/identity/idp/startSLO.ping?TargetResource=").concat("/"===t[t.length-1]?t.slice(0,-1):t).concat(t.includes("?")?"&":"?","timedout=true"),silent_redirect_uri:Yt(window,"global.silentSsoUrl")||"https://www.telstra.com.au/etc/designs/comp-nav/sso/silent-sso.htm",automaticSilentRenew:!1,metadata:{issuer:"".concat(e,"/identity"),jwks_uri:"".concat(e,"/identity/pf/JWKS"),authorization_endpoint:"".concat(e,"/identity/as/authorization.oauth2"),userinfo_endpoint:"".concat(e,"/identity/idp/userinfo.openid"),end_session_endpoint:"".concat(e,"/identity/idp/startSLO.ping"),introspection_endpoint:"".concat(e,"/identity/as/introspect.oauth2"),token_endpoint:"".concat(e,"/identity/as/token.oauth2")}}};nction $r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Jr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){$r(i,r,o,a,s,"next",e)}function s(e){$r(i,r,o,a,s,"throw",e)}a(void 0)}))}}Pr.Log.setLevel(Pr.Log.NONE);var Gr=function(){var e=window!==window.parent,t=window.location.href;return e||t.includes("explore.inside.telstra.com.au")},Kr=!1,Yr=zr(),Qr=Gr()?void 0:new Pr.UserManager(Yr),Zr=null;function Xr(e){Br();window.sessionStorage.removeItem("tcom.authenticated.user.points.balance"),window.sessionStorage.removeItem("tcom.authenticated.user.account.id"),window.location.href=e?Yr.post_timeout_redirect_uri:Yr.post_logout_redirect_uri}function eo(){Qr&&Qr.signinSilent().then((function(e){return Zr=e,Kr=!0,Hr(e),document.dispatchEvent(Un("TcomAuthenticationSuccess")),Zr})).catch(().finally(()}function to(){return Qr.signinRedirectCallback().then(()}ar ro=function(){window.authCaiman=window.authCaiman||{},window.authCaiman.isLoggedIn=no,window.authCaiman.getUser=Fr};function oo(){return(oo=Jr(Vr().mark((function e(){var t,n,r,o,i,a;return Vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=jn()){e.next=3;break}return e.abrupt("return");case 3:if(!Gr()&&Qr){e.next=5;break}return e.abrupt("return");case 5:if(jr(window,"tcom.form.utils.showid",(),n=t.querySelectorAll("[data-sso-auth-link]"),r=t.querySelectorAll("[data-signin-container]"),n.length&&n.forEach((function(e){e.addEventListener("click",(function(){Qr.signinRedirect()})),e.addEventListener("keyup",()})),ro(),window.authCaiman.silentSSOLogin=!0,window.ssoAuthTelstraConfig=Yr,o=function(){r.length&&Array.prototype.forEach.call(r,(function(e){var t=e.querySelectorAll("[data-signin-user-unauthenticated]"),n=e.querySelectorAll("[data-signin-user-authenticated]");Array.prototype.forEach.call(t,(function(e){no()?e.classList.add("d-none"):e.classList.remove("d-none")})),Array.prototype.forEach.call(n,(function(e){no()?e.classList.remove("d-none"):e.classList.add("d-none")}))}))},Fr()&&(Kr=!0),Qr.events.addAccessTokenExpired((function(){Kr=!1,Zr=null,o()})),i=window.location.search.substring(1).indexOf("code=")>=0,a=window.location.search.substring(1).indexOf("slg=")>=0,!i){e.next=25;break}if(window.self===window.top){e.next=22;break}return Qr.signinSilentCallback(window.location.href),e.abrupt("return");case 22:to().then((function(e){var n=t.querySelector("[data-tcom-timeout-message]");n&&n.classList.add("d-none"),Hr(e),window.history.replaceState({},"",window.location.pathname+(window.location.hash?window.location.hash:"")),Kr=!0,o(),document.dispatchEvent(Un("TcomCaimanAuthenticated")),document.dispatchEvent(Un("TcomCaimanLoggedIn"))})).catch((function(){window.history.replaceState({},"",window.location.pathname+(window.location.hash?window.location.hash:""))})),e.next=26;break;case 25:a&&!no()?navigator.vendor.toLowerCase().includes("apple")?Qr.signinRedirect():(eo(),o()):!Kr&&window.authCaiman.silentSSOLogin?(eo(),o()):Kr&&eo();case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var io=n(5),ao=n.n(io);function so(e){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */co=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),s=new x(o||[]);return r(a,"_invoke",{value:w(e,n,s)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var g={};c(g,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==t&&n.call(v,i)&&(g=v);var _=p.prototype=h.prototype=Object.create(g);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var o;r(this,"_invoke",{value:function(r,i){function a(){return new t((function(o,a){!function r(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==so(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(r,i,o,a)}))}return o=o?o.then(a,a):a()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(_,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(_),c(_,s,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function lo(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function uo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){lo(i,r,o,a,s,"next",e)}function s(e){lo(i,r,o,a,s,"throw",e)}a(void 0)}))}}var ho=function(e){switch(e){case"non-prod":return"https://slot2.org002.t-dev.telstra.net/presentation/v1/tcom/loyalty/points";case"staging":return"https://staging-tapi.telstra.com/presentation/v1/tcom/loyalty/points";default:return"https://tapi.telstra.com/presentation/v1/tcom/loyalty/points"}},fo=function(){var e=uo(co().mark((function e(t,n){var r,o;return co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},o=ho(n),e.abrupt("return",new Promise((function(e,t){ao.a.get(o,{headers:r}).then((function(n){n.data.data&&200===n.data.status?e(n.data.data):t(n.data)})).catch(()})));case 3:case"end":return e.stop()}}),e)})));return ();function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */go=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),s=new x(o||[]);return r(a,"_invoke",{value:w(e,n,s)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var g={};c(g,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(L([])));v&&v!==t&&n.call(v,i)&&(g=v);var _=p.prototype=h.prototype=Object.create(g);prototype=p,r(_,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=e.mark=e.awrap=y(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=y(_),c(_,s,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(),e.keys=e.values=L,x.prototype={constructor:x,reset:stop:dispatchException:abrupt:complete:finish:catch:delegateYield:,e}nction _o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bo(r.key),r)}}function yo(e,t,n){return(t=bo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bo(e){var t=function(e,t){if("object"!==po(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===po(t)?t:String(t)}var wo=function(){ar t,n,r,o,i,a;return t=e,n=null,r=[{key:"init",value:function(){if(e.instance=new e,e.globalHeaderContainer=jn(),e.globalHeaderContainer){var t=document.querySelector(".tcom-global-header--megamenu-v2");this.megamenuVersion2=!!t,this.digitalData=new lr,e.state={notificationBarPresent:!1,condensed:!1,modalOpened:!1},e.globalHeaderContainer.querySelector("[data-tcom-quickExit]")&&e.handleQuickExitbutton(),e.megaMenuItems=[],e.attachEvents(),e.handleRightMegamenuDropdown(),e.initGlobalHeaderElement(),e.initGlobalHeaderLogo(),e.handleSearch(),e.handleNotificationBar(),e.handleSkipLinks(),e.handleLogin(),e.handleCountry(),e.handleShoppingCart(),e.hideOutlines(),e.handleSkipButton(),e.initTimeoutMessage()}}},{key:"initGlobalHeaderElement",value:function(){var t=e.globalHeaderContainer.querySelector("[data-mobile-modal-menu-open]"),n=wn(e.megaMenuItems,();if(n){var r=function e(){t.setAttribute("aria-expanded","false"),document.removeEventListener("DOMTcomModalClosed",e),t.focus()},o=function(o){o.preventDefault(),e.openMegaMenuMobile(n),e.state.modalOpened&&t.setAttribute("aria-expanded","true"),document.addEventListener("DOMTcomModalClosed",r)};t&&(t.addEventListener("click",o),t.addEventListener("keypress",o))}}},{key:"initGlobalHeaderLogo",value:function(){var t=this,n=e.globalHeaderContainer.querySelector('[data-telstra-logo-link] > [class*="__logo"]'),r=(new Date).getTimezoneOffset()/60,o="tcom-global-header__logo";n.classList.contains("tcom-global-header__logo--infraco")?o="tcom-global-header__logo--infraco":Intl&&Intl.DateTimeFormat()&&Intl.DateTimeFormat().resolvedOptions()&&Intl.DateTimeFormat().resolvedOptions().timeZone?Intl.DateTimeFormat().resolvedOptions().timeZone.indexOf("Australia")<0&&(o="tcom-global-header__logo--international"):(r>-8||r<-11)&&(o="tcom-global-header__logo--international"),n.className=o,n.addEventListener("click",()}},{key:"openMegaMenuMobile",value:function(t,n){var r=e.globalHeaderContainer;r.querySelectorAll("[data-tcom-mega-menu-list-item-anchor]").forEach(();var o=function n(){e.state.modalOpened=!1,e.globalHeaderContainer.classList.remove("tcom-global-header--menu-opened"),document.body.classList.remove("body-tcom-global-header-mobile-modal-opened"),t.triggerElement.setAttribute("aria-expanded","false"),t.triggerElement.classList.remove("tcom-global-navigation__menu-option--selected"),t.triggerElement.focus(),document.removeEventListener("DOMTcomModalClosed",n)};t.opened||(n&&Array.prototype.forEach.call(n,(function(e){var t=e.querySelector("[data-header-option-anchor]");t&&(t.classList.remove("tcom-global-navigation__menu-option--selected"),t.setAttribute("aria-expanded","false"))})),e.state.modalOpened=t.toggle(),e.state.modalOpened?(r.classList.add("tcom-global-header--menu-opened"),document.body.classList.add("body-tcom-global-header-mobile-modal-opened"),document.addEventListener("DOMTcomModalClosed",o),t.triggerElement.setAttribute("aria-expanded","true"),t.triggerElement.classList.add("tcom-global-navigation__menu-option--selected"),setTimeout((function(){window.scrollTo(0,0)})),t.triggerElement.focus()):(r.classList.remove("tcom-global-header--menu-opened"),document.removeEventListener("DOMTcomModalClosed",o),t.triggerElement.setAttribute("aria-expanded","false"),t.triggerElement.classList.remove("tcom-global-navigation__menu-option--selected"),t.triggerElement.focus()))}},{key:"openMegaMenuDesktop",value:function(t,n){var r=e.globalHeaderContainer;Array.prototype.forEach.call(n,(),r.querySelectorAll("[data-tcom-mega-menu-list-item-anchor]").forEach(();var o=function n(){e.state.modalOpened=!1,t.triggerElement.classList.remove("tcom-global-navigation__menu-option--selected"),r.classList.remove("tcom-global-header--menu-opened"),t.triggerElement.setAttribute("aria-expanded","false"),document.removeEventListener("DOMTcomModalClosed",n),rr.currentModal&&rr.currentModal.close()};if(e.state.modalOpened=t.toggle(),e.state.modalOpened){if(r.classList.add("tcom-global-header--menu-opened"),t.triggerElement.classList.add("tcom-global-navigation__menu-option--selected"),this.megamenuVersion2){var i=document.querySelector('[data-active-mega-menu-option="active"] span'),a=t.triggerElement.closest("[data-header-right-menu-option]");i&&a?t.toogleHelpMenuHeaderElement(i.innerText,t.triggerElement):t.toogleFirstElement()}else t.toogleFirstElement();document.addEventListener("DOMTcomModalClosed",o),t.triggerElement.setAttribute("aria-expanded","true")}else r.classList.remove("tcom-global-header--menu-opened"),t.triggerElement.classList.remove("tcom-global-navigation__menu-option--selected"),document.removeEventListener("DOMTcomModalClosed",o),t.triggerElement.setAttribute("aria-expanded","false")}},{key:"getInstance",value:,{key:"handleDavinciShoppingCart",value:(a=vo(go().mark((function e(){var t,n,r,o,i;return go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(window.tcom&&window.tcom.webadaptor&&window.location.href.includes("explore.inside.telstra.com.au"))){e.next=13;break}return e.prev=1,e.next=4,window.tcom.webadaptor.getSession();case 4:n=e.sent,t=Yt(n,"sessionCache.exploreMulticart",void 0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t=window.localStorage.getItem("exploreMulticart")||window.localStorage.getItem("vlocityExploreCart");case 11:e.next=14;break;case 13:t=window.localStorage.getItem("exploreMulticart")||window.localStorage.getItem("vlocityExploreCart");case 14:if(t){e.next=19;break}return(r=document.querySelector(".tcom-global-navigation__cart-chevron"))&&r.classList.add("d-none"),this.megamenuVersion2&&kr(),e.abrupt("return");case 19:if(e.prev=19,o=En.a.isString(t)?JSON.parse(t):t,i=(new Date).getTime(),!(o.expiry&&o.expiry<i)){e.next=26;break}return this.megamenuVersion2&&kr(),setTimeout(vo(go().mark((function e(){return go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.globalLib.ShoppingMultiCart.removeData();case 2:return e.next=4,window.globalLib.ShoppingCart.removeData();case 4:case"end":return e.stop()}}),e)}))),1e3),e.abrupt("return");case 26:o.cartItems?(Er(o.cartItems),this.megamenuVersion2&&kr(o)):this.megamenuVersion2&&kr(),e.next=33;break;case 29:e.prev=29,e.t1=e.catch(19),console.log(e.t1),this.megamenuVersion2&&kr();case 33:case"end":return e.stop()}}),e,this,[[1,8],[19,29]])}))),function(){return a.apply(this,arguments)})},{key:"handleShoppingCart",value:function(){var t=this,n=e.globalHeaderContainer.querySelector("[data-shopping-cart]");if(n&&("true"===n.dataset.exploreCart?this.handleDavinciShoppingCart():(window.tcom||(window.tcom={}),window.tcom.businessShoppingCart=function(e){var t=new RegExp("".concat(e,"=([^;]+)")).exec(document.cookie);if(null!==t)try{return JSON.parse(window.decodeURI(t[1]))}catch(e){console.error(e)}return[]}("telstra-neto-cart"),Er(window.tcom.businessShoppingCart)),this.megamenuVersion2)){var r=n.querySelector("[data-tcom-cart-dropdown]"),o=n.querySelector("[data-shopping-cart-anchor]");if(r&&o){var i=function(e){var t=new Event(e?"DOMTcomModalOpened":"DOMTcomModalClosed");document.dispatchEvent(t)},a=function(e){var t=new Event(e?"tcom-global-shopping-cart-opened":"tcom-global-shopping-cart-closed");document.dispatchEvent(t)},s=function(e){var t=document.querySelector("[data-tcom-global-header]");if(Hn())e?t.classList.add("tcom-global-header--menu-opened"):t.classList.remove("tcom-global-header--menu-opened");else{var n=document.querySelector("body > .page");e?(t.classList.add("tcom-global-header--hide-menu"),document.body.classList.add("body-tcom-global-header-mobile-modal-opened"),n.classList.add("tcom-lego-search__global__page--show"),n.classList.add("tcom-global-header--page-preserve-position"),n.setAttribute("aria-hidden","true"),n.style.pointerEvents="none",n.style.userSelect="none",t.classList.add("tcom-global-header--menu-opened"),t.classList.add("tcom-global-header--menu-opened-preserve-position")):(t.classList.remove("tcom-global-header--hide-menu"),document.body.classList.remove("body-tcom-global-header-mobile-modal-opened"),n.classList.remove("tcom-lego-search__global__page--show"),n.classList.remove("tcom-global-header--page-preserve-position"),n.setAttribute("aria-hidden","false"),n.style.pointerEvents="",n.style.userSelect="",t.classList.remove("tcom-global-header--menu-opened"),t.classList.remove("tcom-global-header--menu-opened-preserve-position"))}},c=function(e){e.target instanceof HTMLElement&&Bn(e.target,"[data-tcom-cart-dropdown]")!==r&&d()},l=function(e){"Escape"===e.key&&"true"===o.getAttribute("aria-expanded")&&d()},u=function(e){var t=document.querySelector("body > .page"),n=document.querySelector(".skipToMain"),r=document.querySelector(".globalFooter");if(e){var o=t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]:not([data-filters-segment])'),i=n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]:not([data-filters-segment])');[r.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]:not([data-filters-segment])'),o,i].forEach((function(e){e.forEach((function(e){"-1"!==e.getAttribute("tabindex")&&(e.setAttribute("data-tcom-lego-cart-focusables","true"),e.setAttribute("tabindex","-1"))}))}))}else document.querySelectorAll("[data-tcom-lego-cart-focusables]").forEach((function(e){e.removeAttribute("data-tcom-lego-cart-focusables"),e.removeAttribute("tabindex")}))},d=function e(){r.classList.add("d-none"),o.setAttribute("aria-expanded","false"),o.classList.remove("tcom-global-navigation__cart-chevron--active"),document.removeEventListener("click",c),document.removeEventListener("DOMTcomModalClosed",e),document.removeEventListener("DOMTcomModalOpened",e),document.removeEventListener("focusin",p),document.removeEventListener("keypress",l),s(!1),u(!1),!n.contains(document.activeElement)&&Hn()||o.focus(),a(!1)},h=function(){if("true"===o.getAttribute("aria-expanded"))d();else{if(r.classList.remove("d-none"),o.setAttribute("aria-expanded","true"),o.classList.add("tcom-global-navigation__cart-chevron--active"),rr.currentModal&&rr.currentModal.close(),!Hn()){u(!0);var e=r.querySelector("h1,h2,h3,h4,h5,h6");e&&(e.setAttribute("tabindex","-1"),e.focus())}i(!1),document.body.classList.add("body-tcom-global-header-modal-opened"),s(!0),i(!0),a(!0),document.addEventListener("click",c),document.addEventListener("keyup",l),document.addEventListener("DOMTcomModalOpened",d),document.addEventListener("DOMTcomModalClosed",d),document.addEventListener("focusin",p)}};n.querySelector("[data-tcom-cart-dropdown-close]").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),h()}));var f=function(){var e=document.querySelector("[data-tcom-cart-wrapper-items-dropdown]");e&&(e.innerHTML="",t.handleDavinciShoppingCart())};document.addEventListener("explore-multicart-added",(function(e){f(),e.detail&&setTimeout((function(){!function(e){var t=jn().querySelector("[data-tcom-cart-wrapper-items-dropdown]"),n=t.dataset,r=n.shoppingCartFullHeading,o=n.shoppingCartFullCta,i=n.shoppingCartEmptyHeading,a=n.shoppingCartEmptyBodyCopy,s=n.shoppingCartFullUrl,c=n.shoppingCartBackorderCopy,l=n.shoppingCartSecondaryCtaLabel,u=n.shoppingCartSecondaryCtaLink;if(r&&o&&i&&a&&s&&c){var d=t.querySelector("[data-tcom-cart-action-list]");d&&d.classList.add("d-none");var h=t.querySelector("ul.tcom-global-navigation__cart__wrapper-cartItems");h&&h.parentElement.removeChild(h);var f=document.createElement("ul");f.classList.add("tcom-global-navigation__cart__wrapper-cartItems");var p=En.a.filter(e.cartItems,{itemStatus:"new"});if(p.length){var g={};p.forEach((function(e){e.productOffering.characteristics.forEach((function(t){if(t.name&&"ATTR_CO_PR_SET_ID"===t.name&&t.value){var n=t.value;g[n]?g[n].push(e):g[n]=[e]}}))})),Object.entries(g).forEach((function(e){var t=wr(e,2),n=(t[0],xr(t[1],c,!0));n&&f.insertAdjacentHTML("beforeend",n)}))}t.querySelector(".tcom-global-navigation__cart-CTA")||t.insertAdjacentHTML("beforeend",'<a href="'.concat(s,'" class="tcom-able__button-high-emphasis tcom-global-navigation__cart-CTA">').concat(o,"</a>"));var m=t.querySelector(".tcom-global-navigation__cart-CTA");t.insertBefore(f,m||d);var v=t.querySelector(".tcom-global-navigation__cart__cartItems-container");if(v){v.classList.add("tcom-global-navigation__cart__cartItems-container--noborder");var _=t.querySelector(".tcom-global-navigation__cart__details-plan");_&&_.parentElement.removeChild(_)}var y=t.querySelector(".tcom-global-navigation__cart-title");y&&(y.innerHTML="Added to Cart"),l&&u&&t.insertAdjacentHTML("beforeend",'<a href="'.concat(u,'" class="tcom-able__button-medium-emphasis tcom-global-navigation__cart-CTA">').concat(l,"</a>"))}}(e.detail)}),50);var t=n.querySelector(".tcom-global-navigation__cart-chevron");t&&t.classList.remove("d-none");var o=document.querySelector("[data-tcom-cart-notification]");o&&o.classList.remove("d-none"),setTimeout((function(){h();var e=r.querySelector("h1,h2,h3,h4,h5,h6");e&&(e.setAttribute("tabindex","-1"),e.focus())}),50),document.addEventListener("tcom-global-shopping-cart-closed",(function(){f()}),{once:!0})})),n.addEventListener("click",(function(e){e.target.closest("[data-tcom-cart-dropdown]")||(e.preventDefault(),e.stopPropagation(),h())})),n.addEventListener("keypress",(function(e){e.preventDefault(),h()}))}}function p(e){if(Hn()){if(n.contains(e.target))return;d()}}}},{key:"handleLogin",value:(i=vo(go().mark((function t(){var n,r,o,i,a,s,c,l,u,d,h,f,p,g,m,v,_,y,b,w,S,E,k,x,L,T,O,C,A,I,M,j,P,q=this;return go().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.globalHeaderContainer,r=n.querySelector("[data-tcom-login-option]"),o=n.querySelector("[data-tcom-login-dropdown]"),i=n.querySelector("[data-tcom-login-modal]"),r&&o&&i){t.next=6;break}return t.abrupt("return");case 6:a=n.querySelectorAll("[data-tcom-login-dropdown-lastlink]"),s=n.querySelectorAll("[data-tcom-login-dropdown-utility-text]"),c=n.querySelectorAll("[data-signin-user-authenticated]"),l=n.querySelectorAll("[data-signin-user-unauthenticated]"),u=n.querySelectorAll("[data-signin-user-name]"),d=n.querySelectorAll("[data-signin-user-points-balance]"),h=n.querySelectorAll("[data-signin-user-has-points]"),f=!1,p=new rr(i),g=r.dataset.loyaltyBodyCopy||"Telstra Plus points",m=function(){var e=function e(){o.classList.remove("tcom-log-in__dropdown--active"),r.setAttribute("aria-expanded","false"),r.classList.remove("tcom-global-navigation__menu-option--selected"),r.classList.remove("tcom-global-navigation__menu-option--login-selected"),document.removeEventListener("DOMTcomModalClosed",e),document.removeEventListener("DOMTcomModalOpened",e),document.removeEventListener("click",n),o.removeEventListener("focusout",t),document.removeEventListener("keyup",b)};function t(t){o.contains(t.relatedTarget)||e()}function n(t){t.target instanceof HTMLElement&&Bn(t.target,"[data-tcom-login-dropdown]")!==o&&e()}if(o.addEventListener("focusout",t),"true"===r.getAttribute("aria-expanded")){o.classList.remove("tcom-log-in__dropdown--active"),r.setAttribute("aria-expanded","false"),r.classList.remove("tcom-global-navigation__menu-option--selected"),r.classList.remove("tcom-global-navigation__menu-option--login-selected"),document.removeEventListener("click",n);var i=new Event("DOMTcomModalClosed");document.dispatchEvent(i)}else{o.classList.add("tcom-log-in__dropdown--active"),r.setAttribute("aria-expanded","true"),r.classList.add("tcom-global-navigation__menu-option--selected"),r.classList.add("tcom-global-navigation__menu-option--login-selected");var a=new Event("DOMTcomModalClosed");document.dispatchEvent(a),document.addEventListener("keyup",b),rr.currentModal&&rr.currentModal.close(),document.addEventListener("DOMTcomModalClosed",e),document.addEventListener("DOMTcomModalOpened",e),document.addEventListener("click",n)}},v=function t(){e.state.modalOpened=!1,e.globalHeaderContainer.classList.remove("tcom-global-header--menu-opened"),document.body.classList.remove("body-tcom-global-header-mobile-modal-opened"),n.classList.remove("tcom-global-header--menu-opened"),n.classList.remove("tcom-global-header--hide-menu"),r.setAttribute("aria-expanded","false"),document.removeEventListener("DOMTcomModalClosed",t),r.focus()},_=function(){p.show(),n.classList.add("tcom-global-header--menu-opened"),n.classList.add("tcom-global-header--hide-menu"),document.body.classList.add("body-tcom-global-header-mobile-modal-opened"),r.setAttribute("aria-expanded","true"),document.addEventListener("DOMTcomModalClosed",v),setTimeout((function(){window.scrollTo(0,0)}));var e=i.querySelectorAll("[data-signin-user-authenticated]:not(.d-none), [data-signin-user-unauthenticated]:not(.d-none)");e.length&&e[0].focus()},y=b=function(e){"Escape"===e.key&&"true"===r.getAttribute("aria-expanded")&&(y(),r.focus())},w=function(){return window.authCaiman&&"function"==typeof window.authCaiman.isLoggedIn&&window.authCaiman.isLoggedIn()||!1},S=function(){var e=null;return w()&&window.authCaiman&&"function"==typeof window.authCaiman.getUser&&(e=window.authCaiman.getUser().access_token),e},E=function(){var e=null;return w()&&window.authCaiman&&"function"==typeof window.authCaiman.getUser&&window.authCaiman.getUser().profile&&window.authCaiman.getUser().profile.given_name&&(e=window.authCaiman.getUser().profile.given_name,e="".concat("Hi",", ").concat(En.a.truncate(e,{length:15}))),e},k=x=function(){u.length&&Array.prototype.forEach.call(u,()},L=function(){d.length&&Array.prototype.forEach.call(d,(function(e){e.innerHTML="",f=!1}))},T=function(){x(),L(),window.sessionStorage.removeItem("tcom.authenticated.user.points.balance"),window.sessionStorage.removeItem("tcom.authenticated.user.account.id"),window.sessionStorage.removeItem("tcom.authenticated.user.account.cac"),window.sessionStorage.removeItem("tcom.authenticated.user.account.enrollmentstatus")},O=function(){E()&&u.length?Array.prototype.forEach.call(u,(function(e){e.innerText=E()||""})):x()},C=function(){if(r.dataset.loyaltyEnableApi)if(S()){var e=window.sessionStorage.getItem("tcom.authenticated.user.points.balance");if(e&&!Number.isNaN(En.a.parseInt(e)))Array.prototype.forEach.call(d,(function(t){t.innerText="".concat(k(En.a.parseInt(e))," ").concat(g),f=!0}));else{var t=r.dataset.loyaltyApiVersion||"non-prod";fo(S(),t).then((function(e){e.loyaltyPoints&&d.length&&(Array.prototype.forEach.call(d,(function(t){t.innerText="".concat(k(e.loyaltyPoints)," ").concat(g),f=!0,I()})),window.sessionStorage.setItem("tcom.authenticated.user.points.balance","".concat(e.loyaltyPoints))),e.accountId&&(window.sessionStorage.setItem("tcom.authenticated.user.account.id","".concat(e.accountId)),q.digitalData.pushUserProfileInfo("".concat(e.accountId))),e.cac&&window.sessionStorage.setItem("tcom.authenticated.user.account.cac","".concat(e.cac)),e.accountLoyaltyStatus&&window.sessionStorage.setItem("tcom.authenticated.user.account.enrollmentstatus","".concat(e.accountLoyaltyStatus))})).catch((function(e){e.status&&e.statusMessage?q.digitalData.pushTechnicalErrorEventInfo(e.status,e.statusMessage):e.status&&e.statusText&&q.digitalData.pushTechnicalErrorEventInfo(e.status,e.statusText),L(),console.error("Internal error while fetching user loyalty data")}))}var n=window.sessionStorage.getItem("tcom.authenticated.user.account.id");n&&q.digitalData.pushUserProfileInfo(n)}else L(),console.error("User access token not available")},A=I=function(){Array.prototype.forEach.call(l,(function(e){e.classList.add("d-none")})),Array.prototype.forEach.call(c,(function(e){e.classList.remove("d-none"),Array.prototype.forEach.call(h,(function(e){var t=window.sessionStorage.getItem("tcom.authenticated.user.points.balance");f||t&&!Number.isNaN(En.a.parseInt(t))?e.classList.remove("d-none"):e.classList.add("d-none")}))}))},M=function(){I(),a[0].classList.remove("d-none"),s[0].innerText="Sign out",a[0].addEventListener("click",A),a[0].addEventListener("keypress",A),a[1].classList.remove("d-none"),s[1].innerText="Sign out",a[1].addEventListener("click",A),a[1].addEventListener("keypress",A)},P=function e(t){t>0&&(w()?(O(),C(),M()):setTimeout((,500))},(j=function(){Array.prototype.forEach.call(l,(function(e){e.classList.remove("d-none")})),Array.prototype.forEach.call(c,(),a[0].classList.add("d-none"),a[1].classList.add("d-none"),s[0].classList.remove("tcom-log-in__dropdown__utility-link-dead"),s[1].classList.remove("tcom-log-in__dropdown__utility-link-dead")})(),P(12),r.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),y()})),r.addEventListener("keypress",(function(e){e.preventDefault(),y()}));case 44:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"handleCountry",value:(o=vo(go().mark((function t(){var n,r,o,i,a,s,c,l,u,d;return go().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.globalHeaderContainer,r=n.querySelector("[data-tcom-country-option]"),o=n.querySelector("[data-tcom-country-dropdown]"),i=n.querySelector("[data-tcom-country-modal]"),r&&o&&i){t.next=6;break}return t.abrupt("return");case 6:a=new rr(i),s=function(){var e=function e(){o.classList.remove("tcom-log-in__dropdown--active"),r.setAttribute("aria-expanded","false"),r.classList.remove("tcom-global-navigation__menu-option--selected"),r.classList.remove("tcom-global-navigation__menu-option--login-selected"),document.removeEventListener("DOMTcomModalClosed",e),document.removeEventListener("DOMTcomModalOpened",e),document.removeEventListener("click",n),o.removeEventListener("focusout",t),document.removeEventListener("keyup",d)};unction n(t){t.target instanceof HTMLElement&&Bn(t.target,"[data-tcom-country-dropdown]")!==o&&e()}if(o.addEventListener("focusout",t),"true"===r.getAttribute("aria-expanded")){o.classList.remove("tcom-log-in__dropdown--active"),r.setAttribute("aria-expanded","false"),r.classList.remove("tcom-global-navigation__menu-option--selected"),r.classList.remove("tcom-global-navigation__menu-option--login-selected"),document.removeEventListener("click",n);var i=new Event("DOMTcomModalClosed");document.dispatchEvent(i)}else{o.classList.add("tcom-log-in__dropdown--active"),r.setAttribute("aria-expanded","true"),r.classList.add("tcom-global-navigation__menu-option--selected"),r.classList.add("tcom-global-navigation__menu-option--login-selected");var a=new Event("DOMTcomModalClosed");document.dispatchEvent(a),document.addEventListener("keyup",d),rr.currentModal&&rr.currentModal.close(),document.addEventListener("DOMTcomModalClosed",e),document.addEventListener("DOMTcomModalOpened",e),document.addEventListener("click",n)}},c=function t(){e.state.modalOpened=!1,e.globalHeaderContainer.classList.remove("tcom-global-header--menu-opened"),document.body.classList.remove("body-tcom-global-header-mobile-modal-opened"),n.classList.remove("tcom-global-header--menu-opened"),n.classList.remove("tcom-global-header--hide-menu"),r.setAttribute("aria-expanded","false"),document.removeEventListener("DOMTcomModalClosed",t),r.focus()},l=function(){a.show(),n.classList.add("tcom-global-header--menu-opened"),n.classList.add("tcom-global-header--hide-menu"),document.body.classList.add("body-tcom-global-header-mobile-modal-opened"),r.setAttribute("aria-expanded","true"),document.addEventListener("DOMTcomModalClosed",c),setTimeout(();var e=i.querySelector(".tcom-country__heading");e&&e.focus()},u=d=function(e){"Escape"===e.key&&"true"===r.getAttribute("aria-expanded")&&(u(),r.focus())},r.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),u()})),r.addEventListener("keypress",();case 14:case"end":return t.stop()}}),t)}))),},{key:"handleNotificationBar",value:function(){var t=e.globalHeaderContainer.querySelector("[data-tcom-notification-bar]");t&&new $n(t).init()}},{key:"handleSkipLinks",value:function(){var e=this,t=document.querySelector(".skip-link"),n=document.querySelector("h1");t&&n&&t.addEventListener("click",(function(t){t.preventDefault(),n.getAttribute("tabindex")||n.setAttribute("tabindex","-1"),e.megamenuVersion2&&qn(),n.focus()}))}},{key:"handleSearch",value:function(){var t=this,n=e.globalHeaderContainer,r=n.querySelector("[data-tcom-global-header-search]");if(r){var o=r.querySelector("[data-tcom-search-modal]"),i=n.querySelector("[data-tcom-global-header-search-anchor]");if(o&&i){var a=e.globalHeaderContainer.querySelectorAll("[data-mega-menu-search-popup]"),s=new rr(o),c=function t(){e.globalHeaderContainer.classList.remove("tcom-global-header--menu-opened"),document.body.classList.remove("body-tcom-global-header-mobile-modal-opened"),n.classList.remove("tcom-global-header--menu-opened"),n.classList.remove("tcom-global-header--hide-menu"),i.setAttribute("aria-expanded","false"),e.state.modalOpened=!1,document.removeEventListener("DOMTcomModalClosed",t)},l=function(){"true"===i.getAttribute("aria-expanded")?s.close():(s.show(),e.state.modalOpened=!0,n.classList.add("tcom-global-header--menu-opened"),n.classList.add("tcom-global-header--hide-menu"),document.body.classList.add("body-tcom-global-header-mobile-modal-opened"),i.setAttribute("aria-expanded","true"),document.addEventListener("DOMTcomModalClosed",c))};i.addEventListener("click",(function(e){e.preventDefault(),l(),o.querySelector('form[role="search"] input[type="search"]').focus(),t.digitalData.sendToEventInfo("",i.innerText.toLowerCase().trim()||"")})),i.addEventListener("keypress",(function(e){e.preventDefault(),27!==e.keyCode&&l()})),Array.prototype.forEach.call(a,(function(e){e.classList.remove("tcom-mega-menu__hidden-mobile"),e.addEventListener("click",(function(t){t.preventDefault(),e.setAttribute("aria-expanded","true"),l()})),e.addEventListener("keypress",(function(t){t.preventDefault(),e.setAttribute("aria-expanded","true"),l()}))}))}}}},{key:"attachEvents",value:,{key:"handleCondensedMenuEvent",value:function(){var t=Mn((function(){if(e.globalHeaderContainer){var t=e.globalHeaderContainer.offsetTop;e.state.modalOpened||(window.pageYOffset>t?(e.globalHeaderContainer.classList.add("tcom-global-header--condensed"),e.state.condensed=!0):(e.globalHeaderContainer.classList.remove("tcom-global-header--condensed"),e.state.condensed=!1))}}),100);window.addEventListener("scroll",t)}},{key:"handleMegamenuDropdown",value:function(){var t=this,n=e.globalHeaderContainer.querySelectorAll('[data-header-option-type="dropwdown"]');Array.prototype.forEach.call(n,(function(r){var o=r.querySelector("[data-tcom-mega-menu]"),i=r.querySelector("[data-header-option-anchor]");if(i){i.setAttribute("aria-expanded","false");var a="active"===r.dataset.activeMegaMenuOption,s="tcom-global-header-".concat(i.getAttribute("data-header-option-anchor-text").replace(/ /g,"+"),"-menu");i.setAttribute("aria-controls",s),o.id=s;var c=new _r(o,i,a);e.megaMenuItems.push(c),i.addEventListener("click",(function(r){r.preventDefault(),Hn()?e.openMegaMenuDesktop(c,n):e.openMegaMenuMobile(c,n),t.digitalData.sendToEventInfo("",i.innerText.toLowerCase().trim()||"")})),i.addEventListener("keypress",(function(r){r.preventDefault(),27!==r.keyCode&&(Hn()?(e.openMegaMenuDesktop(c,n),i.focus()):e.openMegaMenuMobile(c,n),t.digitalData.sendToEventInfo("",i.innerText.toLowerCase().trim()||""))}))}}))}},{key:"handleRightMegamenuDropdown",value:function(){var t=this,n=e.globalHeaderContainer,r=n.querySelectorAll("[data-header-right-menu-option]"),o=n.querySelector('[data-active-mega-menu-option="active"]');if(o){var i=n.querySelector(".tcom-global-navigation__menu-option__anchor--custom-link");i&&i.addEventListener("click",(function(){t.digitalData.sendToEventInfo("",i.innerText.toLowerCase().trim()||"")}));var a=n.querySelector(".tcom-global-navigation__menu-option__anchor--login");if(a){["click","keypress"].forEach((function(e){a.addEventListener(e,(function(){var e="";if(window.authCaiman&&"function"==typeof window.authCaiman.isLoggedIn&&window.authCaiman.isLoggedIn()){var n=a.innerText.toLowerCase().trim().split(" ");n.length>0&&""!==n[0]&&(e="".concat(n[0]," ***"))}else e=a.innerText.toLowerCase().trim()||"";t.digitalData.sendToEventInfo("",e)}))}));var s=n.querySelectorAll(".tcom-log-in__dropdown__list__item");Array.prototype.forEach.call(s,(function(e){e.addEventListener("keypress",(function(){t.digitalData.sendToEventInfo(a.innerText.toLowerCase().trim(),e.innerText.toLowerCase().trim())})),e.addEventListener("click",(function(){t.digitalData.sendToEventInfo(a.innerText.toLowerCase().trim(),e.innerText.toLowerCase().trim())}))}))}var c=this.megamenuVersion2?document.querySelectorAll("[data-tcom-mega-menu-right-clone]"):o.querySelectorAll("[data-tcom-mega-menu-right-clone]");if(c.length){for(var l=[],u=0;u<c.length;u+=1){var d=c[u];try{var h=d.getAttribute("data-desktop");if(!h)continue;var f=JSON.parse(h).title;l.push({title:f,element:d.cloneNode(!0)})}catch(e){console.log(e)}}for(var p=function(){var e=r[g],t=e.querySelector("[data-right-menu-title]");if(!t)return"continue";var n=t.dataset.rightMenuTitle,o=e.querySelector("[data-tcom-right-menu-placeholder]");if(!o)return"continue";l.forEach((function(e){e.title.trim()===n.trim()&&(function(e){var t=function(e){var t=e,n=br()(),r="".concat(e.id).concat(n);if(t.id=r,t.dataset.analyticsComponent)try{var o=t.dataset.analyticsComponent,i=JSON.parse(o);i.componentInfo.componentId=r;var a=JSON.stringify(i);t.setAttribute("data-analytics-component",a),t.dataset.analyticsComponent=a}catch(e){console.log(e)}};t(e);var n=e.querySelectorAll("[data-tcom-mega-menu-unique-id]");Array.prototype.forEach.call(n,(function(e){t(e)}))}(e.element),o.appendChild(e.element))}))},g=0;g<r.length;g+=1)p();Array.prototype.forEach.call(r,(function(n){var o=n.querySelector("[data-tcom-mega-menu-right]"),i=n.querySelector("[data-header-option-anchor]");if(i){i.setAttribute("aria-expanded","false");var a=new _r(o,i,!1);e.megaMenuItems.push(a),i.addEventListener("click",(function(n){n.preventDefault(),Hn()?e.openMegaMenuDesktop(a,r):e.openMegaMenuMobile(a),t.digitalData.sendToEventInfo("",i.innerText.toLowerCase().trim()||"")})),i.addEventListener("keypress",(function(n){n.preventDefault(),27!==n.keyCode&&(Hn()?(e.openMegaMenuDesktop(a,r),i.focus()):e.openMegaMenuMobile(a),t.digitalData.sendToEventInfo("",i.innerText.toLowerCase().trim()||""))}))}}))}}}},{key:"hideOutlines",value:function(){var t=e.globalHeaderContainer.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Array.prototype.forEach.call(t,()}},{key:"handleQuickExitbutton",value:function(){var t=e.globalHeaderContainer.querySelector("[data-tcom-quickExit-button]");t&&(document.querySelector("body").classList.add("tcom-quickExit__body-margin"),t.addEventListener("click",(function(){var e=t.getAttribute("data-tcom-quickExit-ctaUrl");document.body.innerHTML="",window.location.replace(e)})))}},{key:"handleSkipButton",value:function(){var e=document.querySelector(".skip-link"),t=document.querySelector("#main-content");e&&(e.addEventListener("click",(),e.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||(t.setAttribute("tabindex","-1"),t.focus())})))}},{key:"initTimeoutMessage",value:function(){var e=jn();if(e){var t=e.querySelectorAll(".tcom-global-navigation__menu-option__anchor"),n=e.querySelector("[data-tcom-timeout-message]"),r=e.querySelector("[data-tcom-timeout-content]"),o=e.querySelector("[data-tcom-timeout-postmortem-content]"),i=e.querySelector("[data-tcom-timeout-message-close-button]"),a=e.querySelector("[data-tcom-timeout-message-stay-connected]"),s=e.querySelector("[data-tcom-timeout-message-signout]"),c=e.querySelector("[data-tcom-Timeout-message-countdown]");if(n&&r&&o&&i&&a&&s&&c&&t){var l,u=function(){var e;return window.authCaiman&&"function"==typeof window.authCaiman.getUser&&(e=window.authCaiman.getUser()||!1),e&&e.expires_at?e.expires_at:null},d=function(){n.classList.add("d-none")},h=function(){Xr(!0)},f=a.addEventListener("click",f),s.addEventListener("click",(function(){Xr()})),i.addEventListener("click",d),a.addEventListener("keypress",f),s.addEventListener("keypress",(function(){Xr()})),i.addEventListener("keypress",d);var p=new URLSearchParams(window.location.search);"true"!==p.get("timedout")||p.has("code")||(r.classList.add("d-none"),o.classList.remove("d-none"),n.classList.remove("d-none"),p.delete("timedout"),window.history.replaceState(null,"","".concat(window.location.pathname,"?").concat(p.toString()))),Array.prototype.forEach.call(t,(),document.addEventListener("TcomAuthenticationSuccess",(function e(){var t=u();t&&setTimeout((function(){(t=u())&&(t-Date.now()/1e3<=300?function(){r.classList.remove("d-none"),o.classList.add("d-none");var e=u();c&&e&&(l=setInterval((function(){var t=e-Date.now()/1e3,n=Math.floor(t/60),r=Math.floor(t%60);n<0&&(n=0),r<0&&(r=0),c.innerHTML="".concat(n," minutes and ").concat(r<10?"0":"").concat(r," seconds."),t<0&&(clearInterval(l),h())}),1e3),n.classList.remove("d-none"))}():e())}),1e3*(t-300-Date.now()/1e3))}))}}}}],n&&_o(t.prototype,n),r&&_o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();yo(wo,"instance",void 0),yo(wo,"globalHeaderContainer",void 0),yo(wo,"state",void 0),yo(wo,"megaMenuItems",void 0),yo(wo,"digitalData",void 0),yo(wo,"megamenuVersion2",!1);var So=n(3),Eo=n.n(So),ko=n(4),xo=n.n(ko);n(32),n(34);function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}unction Oo(e,t){return(Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mo(e);if(t){var o=Mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ao(this,n)}}function Ao(e,t){if(t&&("object"===Lo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Io(e)}function Io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mo(e){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oo(e,t)}(a,e);var t,n,r,i=Co(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).state={inputValue:""},e.handleChange=e.handleChange.bind(Io(e)),e.handleKeyUp=e.handleKeyUp.bind(Io(e)),e.clearInput=e.clearInput.bind(Io(e)),e.searchInput=o.a.createRef(),e}return t=a,r=[{key:"onFocusInput",value:function(e){var t=e.currentTarget,n=document.addEventListener("touchstart",n),t.addEventListener("blur",()}}],(n=[{key:"handleChange",value:,{key:"handleKeyUp",value:function(e){var t=this.state.inputValue,n=this.props.updateValue;27!==e.which?9!==e.which&&n(t):this.clearInput()}},{key:"clearInput",value:function(){this.setState({inputValue:""}),(0,this.props.updateValue)(""),this.searchInput.current.focus()}},{key:"render",value:function(){var e=this.state.inputValue,t=this.props,n=t.searchPlaceholder,r=t.designPath,i=t.formAriaLabelId,s=xo.a.generate();return o.a.createElement("div",{className:"input-container d-flex flex-nowrap"},o.a.createElement("div",{className:"input-group order-2"},o.a.createElement("input",{type:"search",role:"searchbox","aria-describedby":"auto-suggest-description",id:s,value:e,onChange:this.handleChange,onKeyUp:this.handleKeyUp,onFocus:a.onFocusInput,ref:this.searchInput}),o.a.createElement("label",{id:i,htmlFor:s},n),""!==e&&o.a.createElement("button",{type:"button",className:"clear-input-button","aria-label":"Clear text",onClick:this.clearInput},o.a.createElement("svg",{className:"clear-input tcom-icon-24 able-icon"},o.a.createElement("use",{xlinkHref:"".concat(r,"/able-sprites.svg#Close")})))),o.a.createElement("span",{id:"auto-suggest-description",className:"sr-only"},"Suggestion will appear below the field as you type"),o.a.createElement("button",{className:"search-input-submit-button order-1","aria-label":"Submit Search",disabled:""===e},o.a.createElement("svg",{className:"search-input-icon tcom-icon-24 able-icon","aria-hidden":"true",tabIndex:"-1",focusable:"false"},o.a.createElement("use",{xlinkHref:"".concat(r,"/able-sprites.svg#Search")}))))}}])&&To(t.prototype,n),r&&To(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component);function Po(e){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}nction No(e,t,n){return(t=Uo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uo(r.key),r)}}function Uo(e){var t=function(e,t){if("object"!==Po(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Po(t)?t:String(t)}opTypes={searchPlaceholder:Eo.a.string.isRequired,updateValue:Eo.a.func.isRequired,designPath:Eo.a.string.isRequired,formAriaLabelId:Eo.a.string.isRequired};var Vo=function(e){!a,e);var t,n,r,i=Bo(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n="All"===e.requestSiteId?"personal":e.requestSiteId,r=e;return r.requestSiteId=n,(t=i.call(this,r)).state={value:"",showDefault:!0,suggestionResult:[],recommendationResult:[],resultAriaText:""},t.getSearchResult=t.getSearchResult.bind(zo(t)),t.getRecommendations=t.getRecommendations.bind(zo(t)),t.handleUpdateValue=t.handleUpdateValue.bind(zo(t)),t.setQueryValue=Tn(t.getSearchResult,300),t}return t=a,r=[{key:"formatSearchResults",value:function(e){var t=[];return e.forEach((function(e,n){n<=5&&t.push({name:e.keyword.raw,type:"suggest"})})),t}},{key:"addElipses",value:function(e){var t=e.replace(/\uFFFD/g,"");return t.length>160&&(t="".concat(t.substr(0,160),"...")),t.trim()}},{key:"formatSuggestions",value:function(e){var t=this,n=[];return e.forEach((function(e,r){r<=5&&1===e._score&&n.push({name:e.title,type:"uar",content:t.addElipses(e.description?e.description:e.body),moreDetailsUrl:e.url})}),this),n}},{key:"escapeRegExp",value:],(n=[{key:"getSearchResult",value:function(){var e=this,t=this.state.value;if(t.trim().length){var n=this.props.baseUrlv1;ao.a.create({headers:{Authorization:"Bearer search-32ikjhtrrs99ozdkobxw4qxa","Content-Type":"application/json"}}).get("".concat(n,"/searchsuggestions/keywords-digital/search"),{params:{query:t}}).then((function(t){var n=a.formatSearchResults(t.data.results);e.setState({showDefault:!1,suggestionResult:n})})),this.getRecommendations()}else this.setState({showDefault:!0,suggestionResult:[],recommendationResult:[]})}},{key:"getRecommendations",value:function(){var e=this,t=this.state.value,n={engine_key:"Wd2_mfUzHEKVdgHbajAx",q:t,per_page:5,filters:{page:{}}};switch(window.tcom.siteSection){case"smallbusiness":n.filters.page.consumer_type="small-business";break;case"businessenterprise":n.filters.page.consumer_type="business-enterprise";break;default:n.filters.page.consumer_type="personal"}var r=this.props.baseUrl;ao.a.create({headers:{"Content-Type":"application/json"}}).get("".concat(r,"/searchresults"),{params:Ro({q:t},n)}).then((function(t){var n=e.state.suggestionResult,r=a.formatSuggestions(t.data.records.page),o=r.length+n.length;e.setState({resultAriaText:""}),e.setState({recommendationResult:r,resultAriaText:o>0?"Results updated. ".concat(o," results available. Use tab to navigate search results list, or ENTER to submit"):"No results found."})}))}},{key:"handleUpdateValue",value:,{key:"searchSubmit",value:function(e){var t=this.state.value;if(e.preventDefault(),"submit"===e.type){var n=this.constructUrl(t);window.location=n}}},{key:"highlightSelection",value:function(e){var t=this.state.value,n=new RegExp(a.escapeRegExp(t),"gi");return e.replace(n,"<b>".concat(t.toLowerCase(),"</b>"))}},{key:"constructUrl",value:function(e){var t=this.props.requestSiteId;return"http://www.telstra.com.au/search?query=".concat(e,"&area=").concat(t,"&searchFormSubmited=Yes")}},{key:"render",value:function(){var e=this,t=xo.a.generate(),n=this.state,r=n.suggestionResult,i=n.recommendationResult,a=n.resultAriaText,s=this.props,c=s.designPath,l=s.popularSearchTitle,u=s.keywordsTitle,d=s.suggestionTitle,h=s.searchPlaceholder,f=s.popularSearchItems,p=this.state.showDefault||!this.state.value;return o.a.createElement("form",{noValidate:!0,role:"search",onSubmit:,o.a.createElement("div",{className:"search-telstra"},o.a.createElement(jo,{updateValue:this.handleUpdateValue,searchPlaceholder:h,designPath:c,formAriaLabelId:t}),o.a.createElement("div",{"aria-live":"polite",role:"region","aria-atomic":"true"},o.a.createElement("div",{className:"sr-only"},a)),o.a.createElement("div",{className:"search-item-container"},o.a.createElement("div",{className:"search-results search-links ".concat(p?"quick-links":"")},o.a.createElement("h3",{className:"heading"},p?l:u),p&&o.a.createElement("ul",{"aria-label":p?l:u},f.map((function(e){return o.a.createElement("li",{key:xo.a.generate()},o.a.createElement("a",{href:e.linkUrl},e.linkText))}))),!p&&!(r.length+i.length)&&o.a.createElement("div",{className:"no-result"},"No results found."),!p&&r.length>0&&o.a.createElement("ul",{"aria-label":p?l:u},r.map((function(t){return o.a.createElement("li",{key:xo.a.generate()},o.a.createElement("a",{href:e.constructUrl(t.name),"aria-label":t.name,dangerouslySetInnerHTML:{__html:e.highlightSelection(t.name)}}))})))),!p&&i.length>0&&o.a.createElement("div",{className:"search-results suggestions"},o.a.createElement("h3",{className:"heading"},d),o.a.createElement("dl",null,i.map((function(e){return o.a.createElement(o.a.Fragment,{key:xo.a.generate()},o.a.createElement("dt",null,o.a.createElement("a",{className:"suggestion-title",href:e.moreDetailsUrl},e.name)),o.a.createElement("dd",null,e.content))})))))))}}])&&Do(t.prototype,n),r&&Do(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component);Vo.propTypes={baseUrl:Eo.a.string,baseUrlv1:Eo.a.string,designPath:Eo.a.string,searchPlaceholder:Eo.a.string,popularSearchItems:Eo.a.arrayOf(Eo.a.shape),popularSearchTitle:Eo.a.string,suggestionTitle:Eo.a.string,keywordsTitle:Eo.a.string,requestSiteId:Eo.a.string},Vo.defaultProps={baseUrl:"",baseUrlv1:"",designPath:"",searchPlaceholder:"Search Telstra",popularSearchItems:[],popularSearchTitle:"Quick links:",suggestionTitle:"Our suggestions:",keywordsTitle:"Popular keywords:",requestSiteId:"personal"};n(38);var $o=function(e){var t=e.designPath,n=e.cartData;return o.a.createElement("div",{className:"cart-view"},o.a.createElement("ul",{className:"cart-list-container"},n.map((function(e){return o.a.createElement("li",{className:"cart-list-item",key:xo.a.generate()},o.a.createElement("img",{className:"item-img",src:e.imageurl,alt:e.name}),o.a.createElement("div",{className:"item-details"},o.a.createElement("div",{className:"item-name"},e.name),o.a.createElement("div",{className:"item-info"},o.a.createElement("span",{className:"item-plan-size"},e.size),o.a.createElement("span",{className:"item-plan-data"},e.data))))}))),o.a.createElement("div",{className:"view-cart-btn"},o.a.createElement("a",{href:"https://smallbusiness.telstra.com.au/_mycart",className:"primary-cta-18"},"View Cart",o.a.createElement("svg",{tabIndex:"-1",focusable:"false"},o.a.createElement("use",{xlinkHref:"".concat(t,"/able-sprites.svg#ArrowRight")})))))};$o.propTypes={cartData:Eo.a.arrayOf(Eo.a.shape),designPath:Eo.a.string},$o.defaultProps={cartData:[],designPath:""};var Jo=$o,Go=(n(40),document.querySelector(".tcom-global-footer")),Ko=document.querySelector(".footer-dock"),Yo=document.querySelector(".footer-dock-button.back-to-top"),Qo=document.body.getBoundingClientRect().top,Zo=function(){Yo.classList.remove("fade-in"),Yo.classList.add("fade-out")},Xo=ei=function(){Yo.addEventListener("click",(function(e){var t,n,r;e.preventDefault(),window.requestAnimationFrame?(t=1e3,n=window.scrollY||document.documentElement.scrollTop,r=null,window.requestAnimationFrame((function e(o){r||(r=o);var i,a=o-r,s=Math.max((i=a,n+-n*((i/=t)*i*i)),0);window.scrollTo(0,s),a<t&&window.requestAnimationFrame(e)}))):window.scrollTo(0,0),setTimeout((function(){Zo(),document.querySelectorAll('a[href]:not([tabindex="-1"]):not(.skip-link)')[0].focus()}),1100)}))},ti=function(){var e=0;Ko.classList.contains("docked")&&(e=Go.querySelector(".footer-container").offsetLeft+25);Ko.style.right="".concat(e,"px")},ni=function(){var e=window.innerHeight;if(Go.getBoundingClientRect().top<=e-40&&Go.getBoundingClientRect().top>0)Ko.classList.remove("docked"),Go.style.marginTop="0",Xo();else{Ko.classList.add("docked"),Go.style.marginTop="".concat(Ko.offsetHeight-24,"px");var t=document.body.getBoundingClientRect().top,n=document.querySelector("[data-tcom-global-header]");if(!n)return;var r=n.offsetHeight;(t>Qo?t-Qo:Qo-t)>.25*e?t>Qo&&t<r?Xo():Zo():t>Qo&&t>r&&Zo()}Qo=document.body.getBoundingClientRect().top,ti()},ri=function(e,t){e.setAttribute("id",t);var n=e.querySelector(".tab-content"),r=e.querySelector(".heading-text");if(n&&r){var o=n.setAttribute("id","".concat(t,"-panel-",0)),n.setAttribute("aria-labelledby","".concat(t,"-tab-",0)),r.setAttribute("id","".concat(t,"-tab-",0)),r.setAttribute("aria-controls","".concat(t,"-panel-",0)),r.addEventListener("click",o),r.addEventListener("keydown",(function(e){switch(e.which){case 13:case 32:e.preventDefault(),e.stopPropagation(),o(e)}}));var i=function(e){var t="true"===e.getAttribute("aria-expanded"),n=e);t?(n.setAttribute("hidden",""),e.setAttribute("aria-expanded","false")):(n.removeAttribute("hidden"),e.setAttribute("aria-expanded","true"))}}},oi=function(){var e,t,n,r=(t=Yt(navigator,"userAgent"),n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE ".concat(e[1]||"")):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))),o=document.querySelector("[data-iesunset-phase]");if(o){var i,a=document.querySelector("[data-tcom-notification-bar]"),s=o.dataset.sunsetNotificationText||"",c=o.dataset.sunsetNotificationLink||"",l=o.dataset.sunsetModalid||null,u=o.dataset.iesunsetPhase,d=o.dataset.iesunsetAbleIcon,h=o.querySelector(".sunset-notification-url");if(h&&(i=h.getAttribute("href")),"PhaseOne"===u&&"IE 11"===r&&s&&i&&c)if(a){var f=a.querySelector(".tcom-notification-bar__wrapper");if(!f)return;localStorage.getItem("tcomIE11SunsetTime")||(f.innerHTML=d?'\n        <svg class="sunset-info-icon sunset-able-icon" tabindex="-1" focusable="false" aria-hidden="true">\n        <use xlink:href="/content/dam/tcom/able/able-sprites.svg#'.concat(d,'"></use>\n      </svg>\n      <div class="tcom-notification-bar__text">').concat(s,'\n      <a class="tcom-notification-bar__link" data-tcom-notification-bar-link href="').concat(i,'">\n        ').concat(c,"\n      </a>\n  </div>"):'\n        <svg class="sunset-info-icon" tabindex="-1" focusable="false" aria-hidden="true">\n        <use xlink:href="/content/dam/tcom/able/able-sprites.svg#Info"></use>\n      </svg>\n      <div class="tcom-notification-bar__text">'.concat(s,'\n      <a class="tcom-notification-bar__link" data-tcom-notification-bar-link href="').concat(i,'">\n        ').concat(c,"\n      </a>\n  </div>"))}else{var p=document.querySelector("[data-tcom-ie-sunset]");!1,p.innerHTML=d?'<section class="tcom-notification-bar" aria-label="Telstra Notification" data-tcom-notification-bar data-status-bar="'.concat(!1,'">\n      <div class="tcom-notification-bar__wrapper">\n      <svg class="sunset-info-icon sunset-able-icon" tabindex="-1" focusable="false" aria-hidden="true">\n      <use xlink:href="/content/dam/tcom/able/able-sprites.svg#').concat(d,'"></use>\n      </svg>\n        <div class="tcom-notification-bar__text">').concat(s,'\n            <a class="tcom-notification-bar__link" data-tcom-notification-bar-link href="').concat(i,'">\n              ').concat(c,'\n            </a>\n        </div>\n      </div>\n      <button class="tcom-notification-bar__close-button" data-tcom-notification-bar-close-button aria-label="Close notification bar">\n        <svg class="tcom-icon-24 able-icon" tabindex="-1" focusable="false" aria-hidden="true">\n          <use href="/content/dam/tcom/able/able-sprites.svg#Close"></use>\n        </svg>\n      </button>\n    </section>'):'<section class="tcom-notification-bar" aria-label="Telstra Notification" data-tcom-notification-bar data-status-bar="'.concat(!1,'">\n      <div class="tcom-notification-bar__wrapper">\n      <svg class="sunset-info-icon" tabindex="-1" focusable="false" aria-hidden="true">\n      <use xlink:href="/content/dam/tcom/able/able-sprites.svg#Info"></use>\n      </svg>\n        <div class="tcom-notification-bar__text">').concat(s,'\n            <a class="tcom-notification-bar__link" data-tcom-notification-bar-link href="').concat(i,'">\n              ').concat(c,'\n            </a>\n        </div>\n      </div>\n      <button class="tcom-notification-bar__close-button" data-tcom-notification-bar-close-button aria-label="Close notification bar">\n        <svg class="tcom-icon-24 able-icon" tabindex="-1" focusable="false" aria-hidden="true">\n          <use href="/content/dam/tcom/able/able-sprites.svg#Close"></use>\n        </svg>\n      </button>\n    </section>');var g=document.querySelector("[data-tcom-notification-bar]");if(g){var m=new $n(g);m&&m.init()}}else"IE 11"===r&&"PhaseTwo"===u&&l&&window.addEventListener("load",(function(){window.tcom.core.utils.showModal&&window.tcom.core.utils.showModal(l)}))}},ii=function(){var e;e=document.querySelectorAll('[data-react-component-name="search"]'),Array.prototype.forEach.call(e,(function(e){var t=e.dataset,n=t.designPath,r=t.searchPlaceholder,i=t.popularSearchTitle,s=t.suggestionTitle,c=t.keywordsTitle,l=t.searchClient,u=t.searchSite,d=t.requestSiteId,h=t.voiceSearch,f=e.dataset.popularSearchItems,p={baseUrl:"https://tapi.telstra.com/application/public-search-saas/v2",baseUrlv1:"https://tapi.telstra.com/application/public-search-saas/v1",designPath:n,popularSearchItems:f?JSON.parse(f):[],searchPlaceholder:r,popularSearchTitle:i,suggestionTitle:s,keywordsTitle:c,searchClient:l,searchSite:u,requestSiteId:d,voiceSearch:h};a.a.render(o.a.createElement(Vo,p),e)})),wo.init(),function(){if(Ko){var e=Ko.querySelector(".footer-dock-button-container").childElementCount;if(e>1){var t="has-".concat(e,"-btns");Ko.classList.add(t)}ti(),ei(),window.addEventListener("resize",ti);var n=Mn(ni,100);window.addEventListener("scroll",n)}}(),function(){var e=document.querySelectorAll('[data-react-component-name="shoppingCart"]');Array.prototype.forEach.call(e,(function(e){var t={designPath:e.dataset.designPath,cartData:window.tcom.businessShoppingCart};a.a.render(o.a.createElement(Jo,t),e)}))}(),),function(){for(var e=document.getElementsByClassName("accordion-tab"),t=0;t<e.length;t+=1){if(!e[t])return;ri(e[t],"accordion--".concat(t))}}(),function(){var e=jn();if(e){var t=e.querySelectorAll("a");Array.prototype.forEach.call(t,(function(e){e.href===window.location.href&&e.setAttribute("aria-current","page")}))}}(),oi()};n(41);document.addEventListener("DOMContentLoaded",()}]);