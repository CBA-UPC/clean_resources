(window.webpackJsonp=window.webpackJsonp||[]).push([[43,3,5,11,17],{1339:function(e,t,n){},1340:function(e,t,n){(function(n){var r,a,o;a=[],void 0===(o="function"===typeof(r=function(){"use strict"; o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(}}:;o.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,a):r)||(e.exports=o)}).call(this,n(21))},1341:function(e,t,n){},1342:function(e,t,n){},1343:function(e,t,n){},1429:function(e,t,n){},1430:function(e,t,n){},1431:function(e,t,n){},150:151:152:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(166);function i(e){return function(){var t,n,i,s=r(e);if()){var u=r(this).constructor;t=Reflect.construct(s,arguments,u)}else t=s.apply(this,arguments);return n=this,!(i=t)||"object"!==a(i)&&"function"!==typeof i?Object(o.a)(n):i}}n.d(t,"a",function(){return i})},153:155:function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"h",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"n",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"m",function(){return u}),n.d(t,"i",function(){return c}),n.d(t,"o",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"k",function(){return h}),n.d(t,"b",function(){return p}),n.d(t,"g",function(){return m}),n.d(t,"l",function(){return v}),n.d(t,"c",function(){return g});var r="panos",a="images",o="icons",i="videos",s="audio",u="text",c="logo",l="videos360",d="https://s3-us-west-2.amazonaws.com/images-mb01-resized/SJvNC13nz/index.html",f=20,h={manageTours:"manageTours",manageUsers:"manageUsers",deleteAccount:"deleteAccount",publishTours:"publishTours"},p="https://res.cloudinary.com/concept3d/video/upload/vc_auto/audio_files/",m="us-west-2:8d221ae4-c54f-4155-9f62-af5b0015bc0a",v="xplorertourmedia",g="https://res.cloudinary.com/concept3d"},1552:function(e,t,n){"use strict";n.r(t);var r=n(36),a=n(30),o=n(2),i=n.n(o),s=n(3),u=n(4),c=n(150),l=n(151),d=n(153),f=n(152),h=n(0),p=n.n(h),m=n(300),v=n.n(m),g=(n(1429),n(652)),y=n(35),b=n(261),w=n(53),_=n(5),O=(n(1430),Object(_.a)(),S=function(e){var t=e.tourStops,n=e.selectedStop,r=e.handleGalleryToggle,a=t&&t.indexOf(n)+1,o=t&&t.length>0,i=!o,s=o&&n;return p.a.createElement("div",{className:"form-display-settings__stop-selector-container"},p.a.createElement("div",{className:"form-display-settings__stop-selector-container__stop-selector"},i&&p.a.createElement("p",{className:"form-display-settings__stop-selector-container__stop-selector__no-stops"},"Create a tour stop before configuring your form."),s&&p.a.createElement(h.Fragment,null,p.a.createElement(O,{mediaId:n.panoId,thumbClass:"form-display-settings__stop-selector-container__stop-selector__media-thumbnail",mediaType:n.mainMediaType,height:90,alt:"",view:!0}),p.a.createElement("div",{className:"form-display-settings__stop-selector-container__stop-selector__stop-info"},p.a.createElement("h4",null,"Stop ".concat(a)),p.a.createElement("p",null,n.name)))),o&&p.a.createElement(y.a,{onClick:r,className:"form-display-settings__selector-button text-btn"},p.a.createElement("i",{className:"material-icons"},"apps"),"Select from tour stops"))},E=(n(1431),n(338)),x=function(e){var t=e.formDisplayed,n=e.handleGalleryToggle,r=e.handleSelectedStop,a=e.handleToggleOptions,o=e.repeatFormDisplay,i=e.selectedStop,s=e.tourStops;return p.a.createElement("div",{className:"form-display-settings"},p.a.createElement("h3",{className:"form-display-settings__title"},"Form Display Settings"),p.a.createElement("div",{className:"form-display-settings__columns"},p.a.createElement("div",{className:"form-display-settings__columns__left"},p.a.createElement("div",{className:"form-display-settings__columns__toggle-container"},p.a.createElement("h4",{className:"form-display-settings__columns__subtitles"},"Display Form"),p.a.createElement(E.a,{checked:t,toggle:function(){return a("formDisplayed")}})),p.a.createElement("span",null,"Enable or disable the display of this form on your tour."),p.a.createElement("div",{className:"form-display-settings__columns__toggle-container"},p.a.createElement("h4",{className:"form-display-settings__columns__subtitles form-display-settings__columns__repeat-form-display"},"Repeat Form Display"),p.a.createElement(E.a,{checked:o,toggle:function(){return a("repeatFormDisplay")}})),p.a.createElement("span",null,"Pop up and display the form again if a user returns to the specified tour stop during the same session.")),p.a.createElement("div",{className:"form-display-settings__columns__right"},p.a.createElement("div",{className:"form-display-settings__columns__right__tour-stop-container"},p.a.createElement("h4",{className:"form-display-settings__columns__subtitles form-display-settings__columns__timing"},"Timing"),p.a.createElement("p",null,"Select the tour stop on which you would like your form to display."),p.a.createElement(S,{selectedStop:i,handleSelectedStop:r,tourStops:s,handleGalleryToggle:n})))))},k=n(491),j=n(165),C=n(205),R=n(305),T=n(502),P=n(524),I=n(312),D=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).handleFormDisplayToggle=function(){r.setState(function(e){return{shouldDisplayForm:!e.shouldDisplayForm}})},r.setAllStatesFromMountOrUpdate=function(e,t,n,a,o,i,s){r.setState({descriptionTextArea:e,embedTextArea:t,formId:n,formDisplayed:a,nameInput:o,repeatFormDisplay:i,displayOnStopId:s})},r.handleToggleOptions=function(e){r.setState(function(t){var n;return n={},Object(u.a)(n,e,!t[e]),Object(u.a)(n,"hasEdits",!0),n})},r.handleInput=function(e){var t,n,a=e.target,o=a.name,i=a.value;"embedTextArea"===o?r.setState((t={},Object(u.a)(t,o,i),Object(u.a)(t,"allFieldsVerified",!1),Object(u.a)(t,"embedCodeError",!1),Object(u.a)(t,"embedCodeErrorText",""),Object(u.a)(t,"hasEdits",Boolean(i.trim())),t)):r.setState((n={},Object(u.a)(n,o,i),Object(u.a)(n,"embedCodeError",!1),Object(u.a)(n,"embedCodeErrorText",""),Object(u.a)(n,"hasEdits",!0),n))},r.iFramePreview=r.submitForm=Object(s.a)(i.a.mark(function e(){var t,n,a,o,s,u,c,l,d,f,h,p,m,v,g,y,b,w;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.formDisplayed,a=t.formId,o=t.nameInput,s=t.repeatFormDisplay,u=t.embedTextArea,c=t.selectedStop,l=t.descriptionTextArea,d=t.displayOnStopId,f=r.props,h=f.accountId,p=f.createNewTourForm,m=f.tourId,v=f.updateTourForm,g=o?o.trim():"",y=l?l.trim():"",!0===(b=r.validateiFrameEmbedSrc())){e.next=7;break}return e.abrupt("return",!1);case 7:if(!b){e.next=18;break}if(r.setState({loading:!0}),w={aid:h,displayOnStopId:c&&c.id||d,formDescription:y,formDisplayed:n,formEmbedCode:u,formName:g,repeatFormDisplay:s,tourId:m},!a){e.next=16;break}return w.formId=a,e.next=14,v(w).then(;case 14:e.next=18;break;case 16:return e.next=18,p(w).then(function(e){e?r.setState({formId:e,hasEdits:!1,loading:!1}):r.setState({loading:!1})});case 18:case"end":return e.stop()}},e)})),r.handleModal=function(e){r.setState(function(t){return Object(u.a)({},e,!t[e])})},r.handleFormDeletion=Object(s.a)(i.a.mark(function e(){var t,n,a,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.accountId,a=t.deleteForm,o=t.tourId,s=r.state.formId,u={aid:n,tourId:o,formId:s},e.next=5,a(u).then(function(e){e&&r.setState({allFieldsVerified:!1,descriptionTextArea:"",displayConfirmationModal:!1,embedTextArea:"",formId:null,hasEdits:!1,loading:!1,nameInput:"",selectedStop:null,shouldDisplayForm:!1,formDisplayed:!1})});case 5:case"end":return e.stop()}},e)})),r.setInputErrorState=function(e,t,n){var a;r.setState((a={},Object(u.a)(a,e,!0),Object(u.a)(a,t,n),Object(u.a)(a,"hasEdits",!1),a))},r.validateiFrameEmbedSrc=function(){var e,t=r.state.embedTextArea.trim(),n=t&&t.length&&t.length>0,a=0===t.search("<iframe "),o=" />"===t.substring(t.length-3,t.length)||"</iframe>"===t.substring(t.length-9,t.length),i=-1===encodeURIComponent(t).indexOf("%3D%E2%80%9C");return n?a?o?(e=!0,e=!!i||"Please ensure that any double quotes are converted to single quotes. ex.) width=\"1000\" becomes width='1000'"):e="Please ensure that your Form Embed Code has a closing tag (e.g. `/>` or `</iframe>`).":e="Please ensure that your Form Embed Code begins with an opening iframe tag (e.g. `<iframe>`).":e="Please input a value for the Form Embed Code field.",!0!==e&&r.setInputErrorState("embedCodeError","embedCodeErrorText",e),e},r.renderIframe=r.handleSelectedStop=function(e){var t=r.props.tourStops[e];r.setState({selectedStop:t,hasEdits:!0})},r.setYPosition=function(e){if(!isNaN(e))return r.setState({yPosition:e}),null;var t=r.state.yPosition<=window.innerHeight/2?window.innerHeight:0;r.setState({yPosition:t})},r.renderModalButtons=function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(y.a,{className:"media-delete text-btn",handleClick:r.handleFormDeletion},p.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},"delete"),"\xa0Delete"),p.a.createElement(y.a,{className:"delete-cancel text-btn",handleClick:function(){return r.handleModal("displayConfirmationModal")}},p.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},"cancel"),"\xa0Cancel"))},r.setRestPosition=function(e){r.setState({restPosition:e})},r.state={displayConfirmationModal:!1,displayLearnMoreModal:!1,formId:null,hasEdits:!1,loading:!1,descriptionTextArea:"",embedCodeError:!1,embedCodeErrorText:"",embedTextArea:"",shouldDisplayForm:!1,formDisplayed:!1,nameInput:"",repeatFormDisplay:!1,restPosition:!1,selectedStop:null,yPosition:window.innerHeight,shouldDisplayPreview:!1,formHasError:!1},r}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.formsError,a=n.currentTour,o=e.currentTour.forms;if(!v()(o,a.forms)){var i=Object.keys(a.forms);if(1===i.length){var s=i[0],u=a.forms[s],c=u.formDescription,l=u.formEmbedCode,d=u.formDisplayed,f=u.formName,h=u.repeatFormDisplay,p=u.displayOnStopId;this.setAllStatesFromMountOrUpdate(c,l,s,d,f,h,p)}else this.setAllStatesFromMountOrUpdate("","",null,!1,"",!1,"")}e.formsError!==r&&"error"===r&&this.setState({formHasError:!0}),e.formsError!==r&&"ok"===!r&&this.setState({formHasError:!1})}},{key:"componentDidMount",value:function(){var e=this.state.formId,t=this.props.currentTour;if(t&&t.forms&&Object.keys(t.forms).length>0){var n=Object.keys(t.forms)[0];if(n!==e){var r=t.forms[n],a=r.formDescription,o=r.formEmbedCode,i=r.formDisplayed,s=r.formName,u=r.repeatFormDisplay,c=r.displayOnStopId;this.setAllStatesFromMountOrUpdate(a,o,n,i,s,u,c)}}}},{key:"render",value:function(){var e=this,t=this.state,n=t.descriptionTextArea,r=t.displayConfirmationModal,a=t.displayLearnMoreModal,o=t.embedCodeError,i=t.embedCodeErrorText,s=t.embedTextArea,u=t.shouldDisplayForm,c=t.allFieldsVerified,l=t.formDisplayed,d=t.formId,f=t.hasEdits,m=t.loading,v=t.nameInput,_=t.repeatFormDisplay,O=t.restPosition,S=t.selectedStop,E=t.yPosition,D=t.shouldDisplayPreview,M=t.displayOnStopId,N=t.formHasError,A=this.props,F=A.handleDisabledClick,Y=A.permissions,H=A.tier,L=A.tourStops,B=A.accountId,W="enterprise"!==H||!Y.tourforms,G=M&&L.filter(function(e){return e.id===M})[0];return p.a.createElement(h.Fragment,null,p.a.createElement(P.a,{yPosition:E,setYPosition:this.setYPosition,tourStops:L,activeStop:S,starter:"",setRestPosition:this.setRestPosition,restPosition:O},p.a.createElement(T.a,{tourName:"Tour Stops",tourDescription:"Select the tour stop to automatically display your form.",tourStops:L,activeStop:L.indexOf(S),yPosition:E,restPosition:O,setYPosition:this.setYPosition,getIndex:this.handleSelectedStop,aid:B})),p.a.createElement("div",{className:"tour-editor-forms-container"},p.a.createElement(C.a,{featureDisabled:W,handleDisabledClick:forms:!0},p.a.createElement("div",{className:"tour-editor-forms-container__left"},p.a.createElement(R.a,{handleClick:this.submitForm,handleDelete:function(){return e.handleModal("displayConfirmationModal")},hasEdits:f&&s,headerTitle:"Forms",saving:m,showDeleteBtn:d}),p.a.createElement("span",{className:"tour-editor-forms-container__left__subcopy"},"Add a form to your tour, give it a name, and specify when it will display to users."),p.a.createElement("h3",{className:"tour-editor-forms-container__left__subtitle"},"Form Info"),p.a.createElement(j.a,{classNames:"tour-editor-forms-container__left__input",handleInput:this.handleInput,id:"form-name",inputValue:v,label:"Form Name",labelAbove:!0,name:"nameInput"}),p.a.createElement(k.a,{classNames:"tour-editor-forms-container__left__textarea",handleInput:this.handleInput,id:"form-description",inputValue:n,label:"Form Description",labelAbove:!0,name:"descriptionTextArea"}),p.a.createElement(k.a,{classNames:"tour-editor-forms-container__left__textarea tour-editor-forms-container__left__textarea-form-embed",displayError:o,errorText:i,handleInput:this.handleInput,id:"form-embed",inputValue:s,label:"Form Embed Code",labelAbove:!0,name:"embedTextArea",toolTipText:"Learn more about Form Embed Code",toolTipClickHandler:function(){return e.handleModal("displayLearnMoreModal")}}),p.a.createElement(y.a,{className:"tour-editor-forms-container__left__preview-btn",handleClick:this.iFramePreview},p.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},"visibility"),"Preview"),p.a.createElement(x,{handleFormDisplayToggle:this.handleFormDisplayToggle,handleFormRepeatToggle:this.handleFormRepeatToggle,tourStops:L,handleSelectedStop:this.handleSelectedStop,handleGalleryToggle:this.setYPosition,shouldDisplayForm:u,formDisplayed:l,handleToggleOptions:this.handleToggleOptions,repeatFormDisplay:_,selectedStop:S||G})),p.a.createElement("div",{className:"tour-editor-forms-container__right"},(D||d)&&p.a.createElement(g.a,{name:v,description:n,showDefault:c,renderIframe:this.renderIframe,defaultMsg:"Once you have filled out the information to the left, click Preview and your form will appear here."})))),p.a.createElement(b.a,{isOpen:r,copy:"Are you sure that you want to remove this form from your tour?",renderButtons:this.renderModalButtons}),p.a.createElement(w.a,{isOpen:a,closeModal:function(){return e.handleModal("displayLearnMoreModal")},shouldCloseOnOverlayClick:!0,id:"learn-more-forms-modal"},p.a.createElement("div",{className:"modal learn-more-forms-modal"},p.a.createElement("h1",{className:"learn-more-forms-modal__title"},"Form Overview"),p.a.createElement("p",{className:"learn-more-forms-modal__text-row"},"Form for Tour Builder is a tool for you to integrate a lead generation form into your 360\xb0 Tour. This form can be configured to display on a particular tour stop and can redisplay to your users if they return to the tour stop."),p.a.createElement("p",{className:"learn-more-forms-modal__text-row"},"Form for Tour Builder accepts any form wrapped in an"," ",p.a.createElement("code",null,"iframe"),". It is important that you wrap your forms attributes (like ",p.a.createElement("code",null,"src")," or ",p.a.createElement("code",null,"width"),") in single quotes. For example:"),p.a.createElement("div",{className:"learn-more-forms-modal__code-wrapper"},p.a.createElement("code",{className:"learn-more-forms-modal__code"},"<iframe src='https://tour.concept3d.com/share/TOURID/stop/1' width='64px' height='1006px' border='0' scroll='no'> Your browser does not support iFrames </iframe>")),p.a.createElement("p",{className:"learn-more-forms-modal__text-row"},"If your form provider does not provide the iframe embed code for your form, you will have to manually wrap the form code in an iframe and input that code snippet into the Form Embed Code text area."),p.a.createElement("p",{className:"learn-more-forms-modal__text-row"},"If you have any lingering questions regarding Form for Tour Builder, please contact support@concept3d.com."))),p.a.createElement(I.a,{isOpen:N,errorToDisplay:"Failed to save the form. Please try again. If the problem persists, please contact support@concept3d.com.",closeModal:function(){return e.setState({formHasError:!1})}}))}}]),n}(h.Component),M=n(1),N=n(7),A=n(6),F=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.aid,r=t.formId,a=t.tourId,o=Object(N.a)(),e.abrupt("return",fetch("".concat(A.a.tourAPI,"/v2/").concat(n,"/tours/").concat(a,"/forms/").concat(r),{method:"DELETE",headers:o,credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log("ERROR DELETING TOUR FORM",e)}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.aid,r=t.tourId,a=Object(N.a)(),e.abrupt("return",fetch("".concat(A.a.tourAPI,"/v2/").concat(n,"/tours/").concat(r,"/forms"),{method:"POST",headers:a,body:JSON.stringify(t),credentials:"include"}).then(function(e){return e.text()}).catch(function(e){return console.log("ERROR SUBMITTING TOUR FORM DATA",e)}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,r,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.aid,r=t.formId,a=t.tourId,o=Object(N.a)(),e.abrupt("return",fetch("".concat(A.a.tourAPI,"/v2/").concat(n,"/tours/").concat(a,"/forms/").concat(r),{method:"PUT",headers:o,body:JSON.stringify(t),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.log("ERROR UPDATING TOUR FORM DATA",e)}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=n(158),B=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(U()),t.prev=1,t.next=4,Y(e);case 4:return a=t.sent,Object(r.b)(function(){n(Z()),n(Object(L.h)({id:e.tourId,uptoDate:!1,forms:Object(u.a)({},e.formId,Object(M.a)({},e))}))}),t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(1),n(q(t.t0));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(V()),t.prev=1,t.next=4,F(e);case 4:return r=t.sent,n(Z()),n(Object(L.b)({id:e.tourId,uptoDate:!1,forms:{}})),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),n(q(t.t0));case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(z()),t.prev=1,t.next=4,H(e);case 4:return a=t.sent,Object(r.b)(function(){n(Z()),n(Object(L.m)({id:e.tourId,uptoDate:!1,forms:Object(u.a)({},e.formId,Object(M.a)({},e))}))}),t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(1),n(q(t.t0));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},U=function(){return{type:"SUBMIT_TOUR_FORM"}},V=function(){return{type:"DELETE_TOUR_FORM"}},z=function(){return{type:"UPDATE_TOUR_FORM"}},q=function(e){return{type:"ERROR_TOUR_FORM_OPERATION",error:e}},Z=function(){return{type:"SUCCESS_TOUR_FORM_OPERATION"}};t.default=Object(r.c)(function(e){return{accountId:e.account.tourAccountId,hasEdits:e.config.hasEdits,permissions:e.account.permissions,tourData:e.tourData,tier:e.account.tier,userEmail:e.userCredentials.email,formsError:e.forms.state}},function(e){return Object(a.b)({createNewTourForm:B,deleteForm:W,updateTourForm:G},e)})(D)},1554:function(e,t,n){"use strict";n.r(t);var r=n(36),a=n(30),o=n(197),i=n(0),s=n.n(i),u=n(709),c=n(2),l=n.n(c),d=n(3),f=n(11),h=n(547),p=n(1),m=n(422),v=n(35),g=(n(1339),function(e){var t,n,a=e.tourId,o=e.canPublish,u=void 0!==o&&o,c=e.refreshTable,l=Object(r.e)(function(e){return e.userCredentials}).permissions,d=Object(r.e)(function(e){return e.tours}).tours,h=void 0===d?{}:d,g=void 0===(null===(t=h[a])||void 0===t?void 0:t.revertCompleted)||(null===(n=h[a])||void 0===n?void 0:n.revertCompleted),y=l.publishTours,b=void 0!==y&&y,w=Object(i.useState)({open:!1,isPublish:!0}),_=Object(f.a)(w,2),O=_[0],S=_[1],E=u&&b||b&&!g;return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,Object.assign({},e,{isOpen:O.open,closeModal:function(){S(Object(p.a)(Object(p.a)({},O),{},{open:!1}))},onComplete:function(){S(Object(p.a)(Object(p.a)({},O),{},{open:!1})),c()},isPublish:O.isPublish,revertCompleted:g})),s.a.createElement(v.a,{className:"btn-update tour-publish","data-cy":"tour-publish-modal-button",handleClick:function(){return S({open:!0,isPublish:!0})},disabled:!b||!u||!g},s.a.createElement("i",{className:"material-icons publish-upload"},"file_upload"),"\xa0 Publish Now"),E&&s.a.createElement(v.a,{className:"btn-update tour-publish-revert",handleClick:"data-cy":"tour-revert-modal-btn"},s.a.createElement("i",{className:"material-icons"},"close"),"\xa0 Revert Changes"))}),y=n(420),b=n(169),w=n(343),_=n(1340),O=n(264),S=n.n(O),E=(n(1341),function(e){var t=e.tourId,n=e.tableData,a=e.loadingData,o=Object(r.e)(function(e){return e.account}),u=o.tourAccountId,c=o.permissions.revisions,h=void 0!==c&&c,p=Object(i.useState)(!1),m=Object(f.a)(p,2),v=m[0],g=m[1],O=Object(i.useState)(!1),E=Object(f.a)(O,2),x=E[0],k=E[1],j=function(){var e=Object(d.a)(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!1),g(!0),e.next=5,Object(w.a)(u,t);case 5:n=e.sent,C(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),k(!0);case 13:return e.prev=13,g(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[0,9,13,16]])}));return function(){return e.apply(this,arguments)}}(),C=function(e){return fetch(e,{method:"GET"}).then(function(e){return e.blob()}).then(function(e){return Object(_.saveAs)(e,"Revisions_".concat(S()().format("MM-DD-YYYY"),".csv"))}).catch(};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"revision-header"},s.a.createElement("h2",{className:"recent-changes"},"Recent Changes"),h&&s.a.createElement("div",{className:"revision-download-container"},s.a.createElement(b.a,{className:"btn-download-csv",handleClick:j,disabled:v,saving:v,savingText:"Downloading",changedText:"Download CSV",doneText:"Download CSV"},"Download CSV"),x&&s.a.createElement("p",{className:"revision-download-error"},"Something went wrong, please contact"," ",s.a.createElement("a",{href:"mailto:support@concept3d.com"},"support@concept3d.com"),"."))),s.a.createElement("p",null,"The following revisions were recently made on your tour."," ",h&&"To see a complete list of changes in greater detail, download the changes CSV."),s.a.createElement(y.a,{data:n,loadingData:a}))}),x=(n(1342),function(e){var t=e.tourId,n=e.currentTour.stopIds,a=e.uptoDate,o=e.history,u=Object(r.e)(function(e){return e.account}).tourAccountId,c=Object(i.useState)([]),p=Object(f.a)(c,2),m=p[0],y=p[1],b=Object(i.useState)(!0),_=Object(f.a)(b,2),O=_[0],S=_[1],x=Object(i.useCallback)(Object(d.a)(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,Object(w.b)(u,t,10);case 4:n=e.sent,y(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,S(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[0,8,11,14]])})),[u,t]);return Object(i.useEffect)(function(){u&&x()},[x,u]),s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Publish"),s.a.createElement("p",null,a?"Your tour is currently up to date. When you make changes, publish them here to make them live.":"You've made changes to your tour that are not live yet. Publish your changes when you're ready to update your tour."),s.a.createElement(g,Object.assign({},e,{canPublish:!a||!Boolean(null===n||void 0===n?void 0:n.length),refreshTable:x})),!Boolean(null===n||void 0===n?void 0:n.length)&&s.a.createElement(h.a,null,s.a.createElement("p",null,"Tours without tour stops can not be published, add a stop to the"," ","tour to continue"),s.a.createElement(v.a,{className:"tour-publish",onClick:,s.a.createElement("i",{className:"material-icons"},"add_circle"),"\xa0 Create new tour stop")),s.a.createElement(E,{tourId:t,tableData:m,loadingData:O}))}),k=n(158),j=(n(1343),function(e){var t=e.tourId,n=e.tourName,a=e.currentTour,o=e.shareUrl,c=e.published,l=e.uptoDate,d=e.history,f=Object(r.d)(),h=a.revertCompleted,p=void 0===h||h;return Object(i.useEffect)(function(){var e;return p||(e=d.block(function(e){var n=e.pathname.includes(t);return n&&f(Object(k.j)("There was an error reverting your changes. Try to revert again. \n              If you continue to get this error, please contact support@concept3d.com")),!n})),,[a,t,d,f,p]),s.a.createElement("section",{id:"share-publish-wrapper"},s.a.createElement("aside",null,s.a.createElement(u.a,{tourId:t,tourName:n,shareUrl:o,published:c,uptoDate:l,embed:!0,tourEditor:!0})),a&&s.a.createElement("aside",{className:"tour-publish-wrapper"},s.a.createElement(x,e)))});t.default=Object(r.c)((j)},157:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u});var r,a=n(232),o=n(6),i=function(e,t,n){r?a.a.event({category:e,action:t,label:n},["client"]):a.a.event({category:e,action:t,label:n})},s=function(e){r?a.a.pageview(e,["client"]):a.a.pageview(e)},u=function(e,t,n){e?(r=e,a.a.initialize([{trackingId:o.a.defaultGaAccount,gaOptions:{cookieFlags:"secure;samesite=none"},titleCase:!1},{trackingId:r,gaOptions:{name:"client",cookieFlags:"secure;samesite=none"},titleCase:!1}])):a.a.initialize([{trackingId:o.a.defaultGaAccount,gaOptions:{cookieFlags:"secure;samesite=none"},titleCase:!1}]),a.a.set({dimension1:t,dimension2:n}),s(window.location.pathname),a.a.set({anonymizeIp:!0})}},158:function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(3),i=n(6),s=n(7),u=n(25),c=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.aid,r=void 0===n?localStorage.getItem("aid"):n,o=Object(s.a)(),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/tours"),{headers:o,credentials:"include"});case 5:return c=e.sent,e.next=8,Object(u.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),r=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/tours/").concat(t),{headers:n,credentials:"include"});case 5:return o=e.sent,e.next=8,Object(u.a)(o);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),r=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/tours"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"});case 5:return o=e.sent,e.next=8,Object(u.a)(o);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),r=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/tours/").concat(t.id),{method:"PUT",headers:n,body:JSON.stringify(t),credentials:"include"});case 5:return o=e.sent,e.next=8,Object(u.a)(o);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),r=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/tours/").concat(t),{method:"DELETE",headers:n,credentials:"include"});case 5:return o=e.sent,e.next=8,Object(u.a)(o);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.a)(),o=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(o,"/tours/").concat(t,"/stops"),{method:"DELETE",headers:r,body:JSON.stringify(n),credentials:"include"});case 5:return c=e.sent,e.next=8,Object(u.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("aid"),r=Object(s.a)(),e.next=4,fetch("".concat(i.a.tourAPI,"/v2/").concat(n,"/tours/").concat(t,"/unpublish"),{method:"POST",headers:r,credentials:"include"});case 4:return o=e.sent,e.next=7,Object(u.a)(o);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),v=n(36),g=n(174);n.d(t,"e",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"f",function(){return w}),n.d(t,"m",function(){return _}),n.d(t,"b",function(){return O}),n.d(t,"c",function(){return S}),n.d(t,"g",function(){return E}),n.d(t,"l",function(){return x}),n.d(t,"h",function(){return j}),n.d(t,"k",function(){return R}),n.d(t,"i",function(){return T}),n.d(t,"j",function(){return P}),n.d(t,"a",function(){return I});var y=function(e,t){return function(){var n=Object(o.a)(a.a.mark(function n(r,o){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(R()),n.prev=1,t&&r(k()),n.next=5,c({aid:e});case 5:n.sent.forEach(function(e){return r(j(e))}),r(T()),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),r(P(n.t0.message||"Something went wrong fetching tours."));case 13:case"end":return n.stop()}},n,null,[[1,10]])}));return function(e,t){return n.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n,r){var o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(R()),t.prev=1,t.next=4,l(e);case 4:o=t.sent,n(j(o)),n(T()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(P(t.t0.message||"Something went wrong fetching the tour."));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},w=function(e,t){return function(){var n=Object(o.a)(a.a.mark(function n(r,o){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(R()),n.prev=1,n.next=4,d(e);case 4:i=n.sent,Object(v.b)(function(){r(j(i)),r(T())}),"function"===typeof t&&t(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),r(P(n.t0.message||"Something went wrong saving the tour."));case 12:case"end":return n.stop()}},n,null,[[1,9]])}));return function(e,t){return n.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n,r){var o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(R()),t.prev=1,t.next=4,f(e);case 4:o=t.sent,Object(v.b)(function(){n(j(o)),n(T())}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),n(P(t.t0.message||"Something went wrong saving the tour."));case 12:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(R()),t.prev=1,t.next=4,h(e);case 4:n(C(e)),n(T()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(P(t.t0.message||"Something went wrong deleting the tour."));case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}()},S=function(e,t){return function(){var n=Object(o.a)(a.a.mark(function n(r,o){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(R()),n.prev=1,n.next=4,p(e,t);case 4:i=n.sent,Object(v.b)(function(){r(j(i)),r(T())}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(P(n.t0.message||"Something went wrong deleting stops."));case 11:case"end":return n.stop()}},n,null,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()},E=function(e,t){return function(){var n=Object(o.a)(a.a.mark(function n(r,o){var i,s,u,c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m(e);case 3:i=n.sent,s=i.tour,u=i.stops,c=void 0===u?[]:u,r(j(s)),c.forEach(,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0),r(P(n.t0.message||"Something went wrong reverting the tour."));case 15:return n.prev=15,"function"===typeof t&&t(),n.finish(15);case 18:case"end":return n.stop()}},n,null,[[0,11,15,18]])}));return function(e,t){return n.apply(this,arguments)}}()},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ,k=function(){return{type:"CLEAR_TOURS"}},j=function(e){return{type:"SAVE_TOUR",tour:e}},C=function(e){return{type:"DELETE_TOUR",tourId:e}},R=function(){return{type:"TOURS_STATUS",status:"saving",errorMessage:""}},T=function(){return{type:"TOURS_STATUS",status:"ok",errorMessage:""}},P=function(e){return{type:"TOURS_STATUS",status:"error",errorMessage:e}},I=function(e,t){return{type:"ADD_STOP_TO_TOUR",tourId:e,stopId:t}}},161:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(150),i=n(151),s=n(153),u=n(152),c=n(24),l=n.n(c),d=n(167),f=n.n(d),h=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).thumbClickEvent=function(){var t=e.props,n=t.id,r=t.handleClick;"function"===typeof r&&r(n)},e.state={loaded:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.loaded,n=this.props,r=n.id,o=n.classes,i=n.height,s=n.src,u=n.alt,c=n.thumbBtns,d=n.overlayMediaName,h=n.name,p=n.dragHandle,m=n.dragHandleProps,v=n.tabIndex,g=Math.round(i/2),y="#fff url(".concat(f.a,") center / ").concat(g,"px no-repeat");return a.a.createElement("div",{tabIndex:v||-1,className:"".concat(o," thumb-wrapper"),key:r,"aria-hidden":"true",style:{background:y},onClick:this.thumbClickEvent,onKeyPress:this.thumbClickEvent},a.a.createElement("img",{style:{display:"block",height:i,minHeight:i,margin:"auto"},className:l()({loaded:t}),src:s,alt:u,onLoad:function(){return e.setState({loaded:!0})}}),d&&a.a.createElement("span",{className:"stop-name overlay"},h),"function"===typeof c&&a.a.createElement("div",{className:"thumb-btn-wrapper"},c(r),"function"===typeof p&&p(m)))}}]),n}(r.Component),p=n(11),m=n(238),v=n(186),g=n.n(v),y=n(155),b=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={loaded:!1},e.thumbClickEvent=e.buildThumb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.split("."),r=Object(p.a)(n,2),a=r[0],o=r[1];return e===y.o&&(t=a),{assetId:e!==y.a?"".concat(e,"/").concat(t):"images/audio-thumb-placeholder.jpg",format:o}},e.setLoaded=function(){e.setState({loaded:!0})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.loaded,t=this.props,n=t.alt,r=t.classes,o=t.deleted,i=t.dragHandle,s=t.dragHandleProps,u=t.height,c=t.id,d=t.logo,h=t.mediaType,p=t.name,v=t.overlayMediaName,y=t.pad,b=t.publicId,w=t.selectedMedia,_=t.tabIndex,O=t.thumbBtns,S=t.view,E=l()({"thumb-image":!0,loaded:e,hidden:o&&!w,"hidden-width":o&&c===w}),x=Math.round(u/2),k=S?g.a:f.a,j=!d&&"".concat(S?"#000":"#fff"," url(").concat(k,") center / ").concat(x,"px no-repeat"),C=this.buildThumb(h,c).assetId,R=d?"limit":y?"pad":"lfill",T=d?"":"black",P="videos360"===h;return c?a.a.createElement("div",{className:"".concat(r," thumb-wrapper"),key:c,style:{background:j},onClick:this.thumbClickEvent,onKeyPress:this.thumbClickEvent,"aria-hidden":0!==_,tabIndex:_>-1?_:-1,"data-cy":"cloudinary-thumb-".concat(c)},!P&&a.a.createElement(m.a,{alt:n,background:T,className:E,cloudName:"concept3d",crop:R,fetchFormat:"auto",gravity:"center",height:u,onLoad:this.setLoaded,publicId:b||C,quality:"auto",responsive:!0}),P&&a.a.createElement(m.a,{alt:n,className:E,cloudName:"concept3d",fetchFormat:"jpg",height:u||1,onLoad:this.setLoaded,publicId:C,quality:"auto",resourceType:"video"}),"function"===typeof O&&a.a.createElement("div",{className:"thumb-btn-wrapper"},O(c),"function"===typeof i&&i(s)),v&&a.a.createElement("span",{className:"stop-name overlay"},p)):null}}]),n}(r.PureComponent);n(187),t.default=function(e){var t=e.alt,n=e.deleted,r=e.dragHandle,o=e.dragHandleProps,i=e.handleClick,s=e.height,u=e.logo,c=e.mediaId,l=e.mediaType,d=e.name,f=e.overlayMediaName,p=e.pad,m=e.publicId,v=e.selectedMedia,g=e.tabIndex,w=e.thumbBtns,_=e.thumbClass,O=e.thumbSrc,S=e.view,E=e.width;return l===y.n?a.a.createElement(h,{alt:t,classes:_,dragHandle:r,dragHandleProps:o,handleClick:i,height:s,id:c,key:c,name:d,overlayMediaName:f,src:O,tabIndex:g,thumbBtns:w}):a.a.createElement(b,{alt:t,publicId:m,classes:_,deleted:n,dragHandle:r,dragHandleProps:o,handleClick:i,height:s,id:c,key:c,logo:u,mediaType:l,name:d,overlayMediaName:f,pad:p,selectedMedia:v,tabIndex:g,thumbBtns:w,view:S,width:E})}},162:function(e,t,n){"use strict";var r=n(1),a=n(37),o=n(2),i=n.n(o),s=n(3),u=n(198),c=n.n(u),l=n(36);var d=function(e){if(e.type.indexOf("audio/")>=0)return".mp3";var t=e.type.lastIndexOf("/")+1;return".".concat(e.type.substr(t))},f=n(155),h=n(181),p=n(170),m=n(6),v=n(266),g=n(256);v.config.region="us-west-2",v.config.credentials=new v.CognitoIdentityCredentials({IdentityPoolId:f.g});var y=function(e){var t=e.id,n=void 0===t?"":t,r=e.file,a=void 0===r?{}:r,o=e.mediaType,i=void 0===o?"":o,s=e.useEnv,u=void 0!==s&&s,c=e._bucket,l=void 0===c?"":c,d=localStorage.getItem("aid"),h=l||f.l,p=u?"".concat("360tours","/").concat(m.a.apiENV,"/").concat(d,"/").concat(i):i;return{Bucket:"".concat(h,"/").concat(p),Key:"".concat(n),Body:a,ContentType:"".concat(a.type)}},b=function(){var e=Object(s.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new g,e.abrupt("return",new Promise(function(e,r){n.upload(t,}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=n(158);n.d(t,"b",function(){return _}),n.d(t,"f",function(){return S}),n.d(t,"g",function(){return E}),n.d(t,"a",function(){return x}),n.d(t,"h",function(){return k}),n.d(t,"i",function(){return R}),n.d(t,"j",function(){return T}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return Z}),n.d(t,"e",function(){return J});var _=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n,r){var a,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(P()),t.prev=1,a=localStorage.getItem("aid"),t.next=5,Object(h.b)(a,e);case 5:o=t.sent,Object(l.b)(function(){n(A(o)),n(D())}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(I(t.t0));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.c)(e);case 3:r=t.sent,Object(l.b)(function(){n(M(e.type,r[e.type])),n(V())}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),n(z(t.t0));case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.g)(e);case 3:r=t.sent,n(N(e.type,r[e.type][e.id])),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(z(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.h)(e);case 3:r=t.sent,n(Y(r[e.id])),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(z(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},x=function(e,t){return function(){var n=Object(s.a)(i.a.mark(function n(r){var a,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Object(l.b)(,n.prev=1,a=localStorage.getItem("aid"),o={aid:a,id:e,type:t},n.next=6,Object(h.a)(o);case 6:Object(l.b)(function(){r(U()),r(_(!0))}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),r(q(n.t0));case 12:case"end":return n.stop()}},n,null,[[1,9]])}));return function(e){return n.apply(this,arguments)}}()},k=function(e){var t=e.file,n=e.mediaType,r=e.name,a=e.description,o=e.alt,u=e.transcript,h=e.componentCB,p=e.permissions;return function(){var e=Object(s.a)(i.a.mark(function e(s){var m,v,g,w,_,S,E;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(H()),m=c()()+d(t),n===f.j&&(g=window.URL||window.webkitURL,(w=new Image).onload=function(){v=this.width/this.height},w.src=g.createObjectURL(t)),s(L()),_=y({id:m,file:t,mediaType:n,useEnv:n===f.f}),e.next=7,b(_);case 7:S=e.sent,E={permissions:p,aid:localStorage.getItem("aid"),id:m,name:r,description:a,alt:o,transcript:u,ratio:v,type:n,url:n===f.j?S.Location:t.name},t&&(s(B()),n===f.j?j(E,s,h):(Object(l.b)(function(){s(W()),s(O(E))}),"function"===typeof h&&h(m)));case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},j=function(e,t,n){Object(h.f)(e).then(function(r){if(r.Error)t(z({message:"ERROR DURING UPLOAD"})),console.error(r.Error,"ERROR DURING UPLOAD");else{var a=JSON.parse(r.Payload),o={aid:e.aid,id:e.id,ratio:e.ratio,src:decodeURIComponent(e.url),url:a+"index.html",name:e.name||null,description:e.description||null,alt:e.alt||null};Object(l.b)(function(){var e;t(W()),t((e=o,function(){var t=Object(s.a)(i.a.mark(function t(n){var r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.d)(e);case 3:r=t.sent,a=r.Attributes,Object(l.b)(function(){n(F(a.panos)),n(V())}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(z(t.t0));case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()))}),"function"===typeof n&&n(e.id)}})},C=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(w.k)()),t.next=3,Object(p.d)(e).then(function(e){var t=e.tourId,r=e.tourStyles;Object(l.b)(function(){n(Object(w.h)({id:t,styles:r,uptoDate:!1})),n(V()),n(Object(w.i)())})}).catch(function(e){return console.error(e)});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},R=function(e){var t=e.tourId,n=e.primaryColor,o=e.logoId,u=e.logoURL,f=e.logoToUpload,h=e.faviconId,p=e.faviconToUpload,m=e.hotspotIcons,v=e.hotspotIconsToUpload,g=e.buttonStyles,_=e.uptoDate,O=e.permissions,S=e.componentCB;return function(){var e=Object(s.a)(i.a.mark(function e(E){var x,k,j,R,T,P,I;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E(Object(w.k)()),!(f||p||v.length>0)){e.next=13;break}return x=[f,p].concat(Object(a.a)(v)).filter(,k={aid:localStorage.getItem("aid"),id:t,uptoDate:_,permissions:O},j={logoURL:u,primaryColor:n,buttonStyles:g},E(H()),R=o,T=h,P=Object(r.a)({},m),e.next=11,Promise.all(x.map(function(){var e=Object(s.a)(i.a.mark(function e(t){var n,a,o,s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c()()+d(t),E(L()),a="icons"===t.fileType,o=y({id:n,file:t,mediaType:a?"icons":"images",useEnv:a}),e.next=6,b(o);case 6:s=e.sent,R="logo"===t.fileType?n:R,T="favicon"===t.fileType?n:T,u=Object(r.a)(Object(r.a)({},"logo"===t.fileType?{logoId:n}:{logoId:R}),"favicon"===t.fileType?{faviconId:n}:{faviconId:T}),a&&(P[t.hotspotType]={id:n,path:s.key}),j=Object(r.a)(Object(r.a)(Object(r.a)({},j),u),{},{hotspotIcons:P}),"function"===typeof S&&S(n,t.fileType,t.hotspotType);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(){Object(l.b)(function(){E(B()),E(W()),E(C(Object(r.a)(Object(r.a)({},k),{styles:j})))})});case 11:e.next=15;break;case 13:I={aid:localStorage.getItem("aid"),id:t,styles:{primaryColor:n,logoId:o,logoURL:u,faviconId:h,buttonStyles:g},uptoDate:_,permissions:O,hotspotIcons:m},E(C(I));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},T=function(e){var t=e.id,n=void 0===t?c()():t,r=e.mediaType,a=void 0===r?"videos":r,o=e.url,i=e.name,s=e.description;return function(e,t){var r=t().account;e(H());var u={aid:localStorage.getItem("aid"),id:n,name:i,description:s,type:a,url:o,permissions:r.permissions};Object(l.b)(function(){e(B()),e(W()),e(O(u))})}},P=function(){return{type:"MEDIA_FETCHING"}},I=function(e){return{type:"MEDIA_FETCH_ERROR",error:e}},D=function(){return{type:"MEDIA_FETCH_SUCCESS"}},M=function(e,t){return{type:"SAVE_ACCOUNT_MEDIA",mediaType:e,media:t}},N=A=F=function(e){return{type:"SAVE_ACCOUNT_PANO",panos:e}},Y=function(e){return{type:"UPDATE_ACCOUNT_PANO",pano:e}},H=function(){return{type:"START_MEDIA_UPLOAD"}},L=function(){return{type:"START_RAW_UPLOAD"}},B=function(){return{type:"START_MEDIA_BUILD"}},W=function(){return{type:"START_MEDIA_SAVE"}},G=function(){return{type:"MEDIA_DELETING"}},U=function(){return{type:"MEDIA_DELETED"}},V=function(){return{type:"MEDIA_UPLOAD_COMPLETE"}},z=function(e){return{type:"MEDIA_UPLOAD_FAILED",error:e}},q=function(){return{type:"MEDIA_DELETE_FAILED"}},Z=J=function(e){return{type:"TOGGLE_MAIN_MEDIA_STATUS",isMainMediaPlaying:e}}},165:function(e,t,n){"use strict";var r=n(12),a=n(0),o=n.n(a),i=n(24),s=n.n(i),u=n(171),c=["charCount","classNames","displayError","displayWarning","editIcon","errorText","handleInput","handleKeyPress","handleKeyUp","hideErrorText","iconName","id","inputOptional","inputValue","label","labelAbove","maxCount","name","showCount","type"],l=Object(a.memo)(function(e){var t=e.charCount,n=e.classNames,a=e.displayError,i=e.displayWarning,l=e.editIcon,d=e.errorText,f=e.handleInput,h=e.handleKeyPress,p=e.handleKeyUp,m=e.hideErrorText,v=e.iconName,g=e.id,y=e.inputOptional,b=e.inputValue,w=e.label,_=e.labelAbove,O=e.maxCount,S=e.name,E=e.showCount,x=void 0===E||E,k=e.type,j=Object(r.a)(e,c);return o.a.createElement(u.a,{charCount:t,classNames:n,displayWarning:i,displayError:a,editIcon:l,errorText:d,hideErrorText:m,iconName:v,id:g,inputOptional:y,label:w,labelAbove:_,maxCount:O,showCount:x},o.a.createElement("input",Object.assign({id:g,type:k||"text",value:b||"",onChange:f,onKeyPress:h,onKeyUp:p,maxLength:O,className:s()({error:a,warning:i}),name:S,"data-testid":g},j)))});t.a=l},166:167:function(e,t,n){e.exports=n.p+"static/media/placeholder-dark-logo.d501ab4e.png"},169:function(e,t,n){"use strict";var r=n(11),a=n(12),o=n(0),i=n.n(o),s=n(155),u=n(27),c=n(54),l=(n(84),["saving","changed","savingText","changedText","changedIcon","doneText","doneIcon","className","style","handleClick","name","disabled","permission","type"]);t.a=function(e){var t=e.saving,n=e.changed,o=e.savingText,d=e.changedText,f=e.changedIcon,h=void 0===f?"sync":f,p=e.doneText,m=e.doneIcon,v=e.className,g=e.style,y=e.handleClick,b=e.name,w=e.disabled,_=e.permission,O=void 0===_?"":_,S=e.type,E=void 0===S?"button":S,x=Object(a.a)(e,l),k=Object(u.a)(O),j=Object(r.a)(k,1)[0],C=!s.k[O]||j;return i.a.createElement("button",Object.assign({className:"btn-update ".concat(v),name:b,style:g,onClick:y,disabled:w||!C,type:E},x),t?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.ClipLoader,{key:"loader",color:"none",size:10}),o):n?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"material-icons"},C?h:"lock"),d):i.a.createElement(i.a.Fragment,null,m&&i.a.createElement("i",{className:"material-icons"},m),p))}},170:function(e,t,n){"use strict";n.d(t,"e",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"b",function(){return p}),n.d(t,"f",function(){return m});var r=n(2),a=n.n(r),o=n(3),i=n(4),s=n(6),u=n(7),c=n(25),l=function(e){var t=Object(u.a)();return fetch("".concat(s.a.tourAPI,"/tours"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},d=function(e){var t=Object(u.a)();return fetch("".concat(s.a.tourAPI,"/tours"),{method:"DELETE",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},f=function(e){var t=Object(u.a)();return fetch("".concat(s.a.tourAPI,"/tourstyles"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},h=function(e){var t={aid:e.aid,id:e.id,tourData:Object(i.a)({},e.id,e.tourData),published:e.published,uptoDate:e.uptoDate,tier:e.tier,gaId:e.gaId,mapboxToken:e.mapboxToken},n=Object(u.a)();return fetch("".concat(s.a.tourAPI,"/publishtour"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},p=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(),e.next=3,fetch("".concat(s.a.tourAPI,"/publishtour/").concat(t),{headers:n});case 3:return r=e.sent,Object(c.b)(r),e.abrupt("return",Object(c.a)(r));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t,tier:n},o=Object(u.a)(),e.abrupt("return",fetch("".concat(s.a.tourAPI,"/publishtour/newTier/"),{method:"POST",headers:o,body:JSON.stringify(r),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}));case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},171:function(e,t,n){"use strict";var r=n(150),a=n(151),o=n(153),i=n(152),s=n(0),u=n.n(s),c=n(1),l=(n(177),function(e){var t=e.inputId,n=e.label,r=e.displayError,a=e.displayWarning,o=e.inputOptional,i=e.editIcon,s=e.ariaHidden;return u.a.createElement("label",{style:Object(c.a)(Object(c.a)({},r&&{color:"#a23f3f"}),a&&{color:"#b18830"}),htmlFor:t,"aria-hidden":s||!1},n,o&&u.a.createElement("span",null,"(Optional)"),i&&u.a.createElement("i",{className:"material-icons"},"edit"))}),d=n(24),f=n.n(d),h=function(e){var t=e.id,n=e.hideErrorText,r=e.errorText,a=e.label,o=e.displayWarning;return u.a.createElement(u.a.Fragment,null,!n&&u.a.createElement("div",{"data-testid":"".concat(t,"-input-error"),className:f()("input-error",{warning:o})},r||"".concat(a," is a required field")))},p=function(e){var t=e.iconName,n=e.iconClasses;return u.a.createElement("div",{className:"input-icon ".concat(n)},u.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},t))},m=function(e){var t=e.max,n=e.count;return e.inputDisabled?null:u.a.createElement("div",{className:"char-count"},t-n)},v=(n(178),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).enableInput=e.state={inputDisabled:!0},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.state.inputDisabled,t=this.props,n=t.charCount,r=t.children,a=t.classNames,o=t.displayError,i=t.displayWarning,s=t.editIcon,c=t.errorText,d=t.hideErrorText,f=t.iconClasses,v=t.iconName,g=t.id,y=t.inputOptional,b=t.label,w=t.labelAbove,_=t.maxCount,O=t.name,S=t.showCount,E=t.toolTipClickHandler,x=t.toolTipText;return u.a.createElement("div",{className:a},w&&u.a.createElement(l,{ariaHidden:!0,inputId:g,label:b,htmlFor:O,inputOptional:y,editIcon:s,displayError:o,displayWarning:i}),x&&u.a.createElement("span",{className:"form-interactive-tooltip",onClick:E},x),r,!w&&u.a.createElement(l,{ariaHidden:!0,inputId:g,label:b,htmlFor:O,inputOptional:y,editIcon:s,displayError:o,displayWarning:i}),S&&_&&u.a.createElement(m,{inputDisabled:e,max:_,count:n}),v&&u.a.createElement(p,{iconClasses:f,iconName:v}),(o||i)&&u.a.createElement(h,{id:g,displayWarning:i,hideErrorText:d,errorText:c,label:b}))}}]),n}(s.PureComponent));t.a=v},172:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={panos:"Panorama",images:"Image",videos:"Video",audio:"Audio",videos360:"360\xba Video",logo:"Logo"}[e];return t?n.toLowerCase():n}},174:function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(3),i=n(6),s=n(7),u=n(25),c=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),r=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/tours/").concat(t,"/stops"),{headers:n,credentials:"include"});case 5:return o=e.sent,e.next=8,Object(u.a)(o);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),r=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/stops/").concat(t),{headers:n,credentials:"include"});case 5:return o=e.sent,e.next=8,Object(u.a)(o);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),r=localStorage.getItem("aid"),e.prev=2,e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/stops"),{method:"POST",headers:n,body:JSON.stringify(t),credentials:"include"});case 5:return o=e.sent,e.next=8,Object(u.a)(o);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r,o,c,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.a)(),o=localStorage.getItem("aid"),c=n?"?tourId=".concat(n):"",e.prev=3,e.next=6,fetch("".concat(i.a.tourAPI,"/v2/").concat(o,"/stops/").concat(t.id).concat(c),{method:"PUT",headers:r,body:JSON.stringify(t),credentials:"include"});case 6:return l=e.sent,e.next=9,Object(u.a)(l);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(3),e.t0;case 15:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t,n){return e.apply(this,arguments)}}(),h=n(36),p=n(158);n.d(t,"b",function(){return m}),n.d(t,"a",function(){return v}),n.d(t,"c",function(){return g}),n.d(t,"f",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"e",function(){return _});var m=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(w()),t.prev=1,t.next=4,c(e);case 4:t.sent.forEach(,n(_()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(O(t.t0.message||"Something went wrong fetching stops."));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n,r){var o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(w()),t.prev=1,t.next=4,l(e);case 4:o=t.sent,Object(h.b)(,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(O(t.t0.message||"Something went wrong fetching the stop."));case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var n=Object(o.a)(a.a.mark(function n(r,o){var i,s,u;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(w()),n.prev=1,n.next=4,d(e);case 4:i=n.sent,s=i.stop,u=i.tourId,Object(h.b)(function(){r(b(s)),r(Object(p.a)(u,s.id)),r(Object(p.l)(u,!1)),r(_())}),"function"===typeof t&&t(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),r(O(n.t0.message||"Something went wrong saving the stop."));case 14:case"end":return n.stop()}},n,null,[[1,11]])}));return function(e,t){return n.apply(this,arguments)}}()},y=function(e,t){return function(){var n=Object(o.a)(a.a.mark(function n(r,o){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(w()),n.prev=1,n.next=4,f(e,t);case 4:i=n.sent,Object(h.b)(function(){r(b(i)),r(Object(p.l)(t),!1),r(_())}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r(O(n.t0.message||"Something went wrong saving the stop."));case 11:case"end":return n.stop()}},n,null,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()},b=w=function(){return{type:"STOPS_STATUS",status:"saving",errorMessage:""}},_=O=,175:function(e,t,n){"use strict";var r=n(150),a=n(151),o=n(153),i=n(152),s=n(0),u=n.n(s),c=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).onMouseEnter=function(){e.setState({hovering:!0})},e.onMouseLeave=function(){e.setState({hovering:!1})},e.state={hovering:!1},e}return Object(a.a)(n,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,this.props.render({onEnter:this.onMouseEnter,onLeave:this.onMouseLeave,hovering:this.state.hovering}))}}]),n}(s.Component);t.a=c},177:function(e,t,n){},178:function(e,t,n){},181:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"e",function(){return h});var r=n(6),a=n(7),o=n(172),i=function(e,t){var n=Object(a.a)(),o=t?"?tour_data=true":"";return fetch("".concat(r.a.tourAPI,"/media/").concat(e).concat(o),{method:"GET",headers:n,credentials:"include"}).then(function(e){if(200!==e.status)throw{message:"Error Fetching Media Data"};return e.json()}).then(function(e){return e})},s=function(e){var t=Object(a.a)(),n=Object(o.a)(e.type);return fetch("".concat(r.a.tourAPI,"/media"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){if(200!==e.status)throw{message:"".concat(n," failed to upload. ").concat("Video"===n?"Check that the URL is correct and try again.":"Please try again."),status:e.status};return e.json()}).then(function(e){return e})},u=function(e){var t=Object(a.a)();return fetch("".concat(r.a.tourAPI,"/media"),{method:"PATCH",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},c=function(e){var t=Object(a.a)();return fetch("".concat(r.a.tourAPI,"/panos"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},l=function(e){var t=Object(a.a)();return fetch("".concat(r.a.accountsAPI,"/buildpano"),{method:"POST",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},d=function(e){var t=Object(a.a)();return fetch("".concat(r.a.tourAPI,"/panos"),{method:"PATCH",headers:t,body:JSON.stringify(e),credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e})},f=function(e){var t=e.aid,n=e.id,o=e.type,i=Object(a.a)();return fetch("".concat(r.a.tourAPI,"/media/").concat(t,"/assets/").concat(n),{method:"DELETE",headers:i,body:JSON.stringify({type:o}),credentials:"include"}).then(function(e){return e}).then(function(e){return e.status}).catch(function(e){return console.log("ERROR DELETING MEDIA",e)})},h=function(e,t,n){var o=Object(a.a)();return fetch("".concat(r.a.tourAPI,"/media/").concat(e,"?type=").concat(t,"&search=").concat(n,"&tour_data=true"),{method:"GET",headers:o,credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}).catch(}},186:187:function(e,t,n){},197:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return f});var r=n(2),a=n.n(r),o=n(3),i=n(36),s=n(170),u=n(162),c=n(158),l=function(e,t){return function(n){Object(s.c)(e).then(function(e){var r=e.tour;Object(i.b)(function(){n(Object(c.h)(r)),n(Object(u.b)(!0))}),"function"===typeof t&&t()})}},d=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.b)(e);case 2:r=t.sent,n(h(r));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(t,n){var r=Object.values(n().tourData.tours).filter(function(e){return e.published}).map(;Promise.all(r.map(function(){var t=Object(o.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.f)(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()))}},h=function(e){return{type:"SAVE_PUBLIC_TOUR",aid:e.aid,id:e.id,panos:e.panos,images:e.images,videos:e.videos,audio:e.audio,stops:e.stops,tours:e.tourData,tier:e.tier,active:e.active,gaId:e.gaId,mapboxToken:e.mapboxToken}}},202:function(e,t,n){"use strict";var r=n(11),a=n(12),o=n(0),i=n.n(o),s=n(231),u=["hovering","active","onEnter","onLeave","color","backgroundColor","handleClick","myRef","children","tooltip","isMobile","tooltipClass"];t.a=function(e){var t=e.hovering,n=e.active,c=e.onEnter,l=e.onLeave,d=e.color,f=e.backgroundColor,h=e.handleClick,p=e.myRef,m=e.children,v=e.tooltip,g=e.isMobile,y=e.tooltipClass,b=Object(a.a)(e,u),w=Object(o.useState)(!1),_=Object(r.a)(w,2),O=_[0],S=_[1],E=!g&&t||n?{color:f,backgroundColor:d}:{color:d,backgroundColor:f},x=k=Object(o.useEffect)(function(){return v&&document.addEventListener("keydown",k,!1),function(){return v&&document.removeEventListener("keydown",k,!1)}},[v]);var j=!g&&(t||O);return i.a.createElement("div",null,i.a.createElement("button",Object.assign({style:E,onMouseEnter:c,onMouseLeave:l,onClick:h,onFocus:function(){return x(!0)},onBlur:function(){return x(!1)},ref:p,"data-testid":"button-hover-primary"},b),m),v&&i.a.createElement(s.a,Object.assign({style:{color:f,backgroundColor:d},show:j,tooltipClass:y},v)))}},204:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.children;return a.a.createElement("i",{className:"material-icons","aria-hidden":"true"},t)}},205:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(24),i=n.n(o);n(219);t.a=function(e){var t=e.featureDisabled,n=e.handleDisabledClick,r=e.children,o=e.forms;return t?a.a.createElement("main",{id:"tiered-item","data-cy":"tiered-feature",className:i()({disabled:t,forms:o}),onClick:n},r):r}},219:function(e,t,n){},231:function(e,t,n){"use strict";var r=n(1),a=n(150),o=n(151),i=n(153),s=n(152),u=n(0),c=n.n(u),l=(n(301),function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).setStyle=function(e){var t=o.state,n=t.defStyles,a=t.parentCoords,i=a.x,s=a.bottom,u=a.top,c=a.height,l=a.width,d=t.tooltipWidth,f=t.tooltipHeight,h=Math.abs(c-d),p=Math.abs(c-f);switch(e){case"top":return Object(r.a)(Object(r.a)({},n),{},{transform:"translate3d(".concat(i-h/2,"px, ").concat(u-f-10,"px, 0)")});case"bottom":return Object(r.a)(Object(r.a)({},n),{},{transform:"translate3d(".concat(i-h/2,"px, ").concat(s+10,"px, 0)")});case"left":return Object(r.a)(Object(r.a)({},n),{},{transform:"translate3d(".concat(i-d-10,"px, ").concat(u+p/2,"px, 0)")});case"right":return Object(r.a)(Object(r.a)({},n),{},{transform:"translate3d(".concat(i+l+10,"px, ").concat(u+p/2,"px, 0)")})}},o.state={defStyles:Object(r.a)(Object(r.a)({},e.style),{},{position:"absolute",top:"0",padding:"2px 4px",borderRadius:"2px",fontSize:"10px",fontWeight:600,willChange:"transform",textTransform:"uppercase",zIndex:"10000",width:"auto"}),parentCoords:{},tooltipWidth:null,tooltipHeight:null},o.parent=null,o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.parent=document.querySelector("".concat(this.props.node)),this.parent&&this.setState(Object(r.a)(Object(r.a)({},this.state),{},{parentCoords:this.parent.getBoundingClientRect()}))}},{key:"componentDidUpdate",value:function(e,t){if(!e.show&&this.props.show){var n=document.querySelector(".tooltip").getBoundingClientRect(),a=n.width,o=n.height;this.setState(Object(r.a)(Object(r.a)({},this.state),{},{tooltipWidth:a,tooltipHeight:o}))}}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.show,r=e.position,a=e.style,o=e.tooltipClass,i=n?this.setStyle(r):{};return n?c.a.createElement("span",{className:"tooltip ".concat(o&&o),style:i,role:"tooltip","data-testid":"tooltip"},c.a.createElement("span",{className:"arrow ".concat(r),style:{backgroundColor:a.backgroundColor}}),t):null}}]),n}(u.PureComponent));t.a=l},233:260:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return m});var r=n(0),a=n.n(r);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s="touchmove",u="touchend",c="mousemove",l="mouseup",d={touch:!0,mouse:!0,passive:{passive:!0},onAction:void 0,onDown:void 0,onUp:void 0,onMove:void 0},f={event:void 0,args:void 0,temp:void 0,target:void 0,time:void 0,xy:[0,0],delta:[0,0],initial:[0,0],previous:[0,0],direction:[0,0],local:[0,0],lastLocal:[0,0],velocity:0,distance:0,down:!1,first:!0,shiftKey:!1};function h(e,t,n){void 0===t&&(t={});var r=function(n,r){e(function(e){var a=o({},e,{down:!1,first:!1}),i=t.onAction&&t.onAction(a);return t.onUp&&t.onUp(a),o({},a,{event:n,shiftKey:r,lastLocal:e.local,temp:i||a.temp})})},a=function(n){var r=n.touches?n.touches[0]:n,a=r.pageX,i=r.pageY,s=r.shiftKey;e(function(e){var r=Date.now(),u=a-e.xy[0],c=i-e.xy[1],l=a-e.initial[0],d=i-e.initial[1],f=Math.sqrt(l*l+d*d),h=Math.sqrt(u*u+c*c),p=1/(h||1),m=o({},e,{event:n,time:r,shiftKey:s,xy:[a,i],delta:[l,d],local:[e.lastLocal[0]+a-e.initial[0],e.lastLocal[1]+i-e.initial[1]],velocity:h/(r-e.time),distance:f,direction:[u*p,c*p],previous:e.xy,first:!1}),v=t.onAction&&t.onAction(m);return t.onMove&&t.onMove(m),o({},m,{temp:v||m.temp})})},i=function(i){t.mouse&&(window.addEventListener(c,a,t.passive),window.addEventListener(l,h,t.passive)),t.touch&&(window.addEventListener(s,a,t.passive),window.addEventListener(u,h,t.passive)),function(a){var i=a.touches?a.touches[0]:a,s=i.target,u=i.pageX,c=i.pageY,l=i.shiftKey;e(function(e){var i=e.lastLocal||f.lastLocal,h=o({},f,{event:a,target:s,args:n,lastLocal:i,shiftKey:l,local:i,xy:[u,c],initial:[u,c],previous:[u,c],down:!0,time:Date.now(),cancel:function(){d(),requestAnimationFrame(function(){return r(a)})}}),p=t.onAction&&t.onAction(h);return t.onDown&&t.onDown(h),o({},h,{temp:p})})}(i)},d=function(){t.mouse&&(window.removeEventListener(c,a,t.passive),window.removeEventListener(l,h,t.passive)),t.touch&&(window.removeEventListener(s,a,t.passive),window.removeEventListener(u,h,t.passive))},h=function(e){var t=e.shiftKey;d(),r(e,t)},p={},m=t.passive.capture?"Capture":"";return t.mouse&&(p["onMouseDown"+m]=i),t.touch&&(p["onTouchStart"+m]=i),p}var p=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).state=f;var r=n.setState.bind(i(i(n)));return t.onAction&&(n._state=f,r=function(e){return n._state=e(n._state)}),n.handlers=h(r,t),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.style,n=e.children,r=e.className;return a.a.createElement("div",o({},this.handlers,{style:o({display:"contents"},t),className:r}),n(this.state))},r}(a.a.Component);p.defaultProps=d;function m(e){var t=a.a.useState(f),n=t[0],r=t[1],i=a.a.useRef(f);"function"===typeof e&&(e={onAction:e}),e=o({},d,e);var s=a.a.useState(function(){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return h(e.onAction?r,e,n)}})[0];return e.onAction?s:[s,n]}},261:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(53);n(304);t.a=function(e){var t=e.closeModal,n=e.copy,r=e.isOpen,i=e.renderButtons;return a.a.createElement(o.a,{isOpen:r,closeModal:t,className:"delete-confirm-modal"},a.a.createElement("div",{className:"delete-confirm-modal__wrapper"},a.a.createElement("p",{className:"delete-confirm-modal__copy"},n),a.a.createElement("span",{className:"delete-confirm-modal__btn-wrapper"},"function"===typeof i&&i())))}},264:function(e,t,n){(function(e){e.exports=function(){"use strict";var t,n;unction a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}otype.some?Array.prototype.some:var g=r.momentProperties=[],y=!1;,x={};pressDeprecationWarnings=!1,r.deprecationHandler=null,E=Object.keys?Object.keys:var P=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,D={},M={}; Y={}; W={};=/\d/,X=/\d\d/,Q=/\d{3}/,ee=/\d{4}/,te=/[+-]?\d{6}/,ne=/\d\d?/,re=/\d\d\d\d?/,ae=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,ie=/\d{1,4}/,se=/[+-]?\d{1,6}/,ue=/\d+/,ce=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,de=/Z|[+-]\d\d(?::?\d\d)?/gi,fe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;};var ve={}; we,_e=0,Oe=1,Se=2,Ee=3,xe=4,ke=5,je=6,Ce=7,Re=8;e=Array.prototype.indexOf?Array.prototype.indexOf:N("M",["MM",2],"Mo",,N("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),N("MMMM",0,0,function(e){return this.localeData().months(this,e)}),H("month","M"),G("month",8),he("M",ne),he("MM",ne,X),he("MMM",function(e,t){return t.monthsShortRegex(e)}),he("MMMM",function(e,t){return t.monthsRegex(e)}),ge(["M","MM"],,ge(["MMM","MMMM"],function(e,t,n,r){var a=n._locale.monthsParse(e,r,n._strict);null!=a?t[Oe]=a:p(n).invalidMonth=e});var Pe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ie="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),De=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Me=fe,Ne=fe;",0,0,,N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),H("year","y"),G("year",1),he("Y",ce),he("YY",ne,X),he("YYYY",ie,ee),he("YYYYY",se,te),he("YYYYYY",se,te),ge(["YYYYY","YYYYYY"],_e),ge("YYYY",,ge("YY",,ge("Y",,r.parseTwoDigitYear=var Le=q("FullYear",!0);["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),H("week","w"),H("isoWeek","W"),G("week",5),G("isoWeek",5),he("w",ne),he("ww",ne,X),he("W",ne),he("WW",ne,X),ye(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=z(e)}),N("d",0,"do","day"),N("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),N("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),N("dddd",0,0,,N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),H("day","d"),H("weekday","e"),H("isoWeekday","E"),G("day",11),G("weekday",11),G("isoWeekday",11),he("d",ne),he("e",ne),he("E",ne),he("dd",function(e,t){return t.weekdaysMinRegex(e)}),he("ddd",function(e,t){return t.weekdaysShortRegex(e)}),he("dddd",function(e,t){return t.weekdaysRegex(e)}),ye(["dd","ddd","dddd"],,ye(["d","e","E"],;var qe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Je="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$e=fe,Ke=fe,Xe=fe;",["HH",2],0,"hour"),N("h",["hh",2],0,et),N("k",["kk",2],0,,N("hmm",0,0,,N("hmmss",0,0,,N("Hmm",0,0,,N("Hmmss",0,0,,tt("a",!0),tt("A",!1),H("hour","h"),G("hour",13),he("a",nt),he("A",nt),he("H",ne),he("h",ne),he("k",ne),he("HH",ne,X),he("hh",ne,X),he("kk",ne,X),he("hmm",re),he("hmmss",ae),he("Hmm",re),he("Hmmss",ae),ge(["H","HH"],Ee),ge(["k","kk"],,ge(["a","A"],,ge(["h","hh"],,ge("hmm",,ge("hmmss",,ge("Hmm",,ge("Hmmss",;var rt,at=q("Hours",!0),ot={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pe,monthsShort:Ie,week:{dow:0,doy:6},weekdays:qe,weekdaysMin:Je,weekdaysShort:Ze,meridiemParse:/[ap]\.?m?\.?/i},it={},st={};/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],bt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((-?\d+)/i,_t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ot={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};romInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",,r.ISO_8601=function(){},r.RFC_2822=function(){};var It=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",,Dt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",;ar Nt=["year","quarter","month","week","day","hour","minute","second","millisecond"];Z",":"),Ht("ZZ",""),he("Z",de),he("ZZ",de),ge(["Z","ZZ"],;var Lt=/([\+\-]|\d\d)/gi;dateOffset=var Vt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;=At.prototype,qt.invalid=function(){return qt(NaN)};var Xt=$t(1,"add"),Qt=$t(-1,"subtract");efaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var rn=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",;ar on=1e3,sn=60*on,un=60*sn,cn=3506328*un;,0,"eraAbbr"),N("NN",0,0,"eraAbbr"),N("NNN",0,0,"eraAbbr"),N("NNNN",0,0,"eraName"),N("NNNNN",0,0,"eraNarrow"),N("y",["y",1],"yo","eraYear"),N("y",["yy",2],0,"eraYear"),N("y",["yyy",3],0,"eraYear"),N("y",["yyyy",4],0,"eraYear"),he("N",hn),he("NN",hn),he("NNN",hn),he("NNNN",function(e,t){return t.erasNameRegex(e)}),he("NNNNN",,ge(["N","NN","NNN","NNNN","NNNNN"],,he("y",ue),he("yy",ue),he("yyy",ue),he("yyyy",ue),he("yo",,ge(["y","yy","yyy","yyyy"],_e),ge(["yo"],,N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,,mn("gggg","weekYear"),mn("ggggg","weekYear"),mn("GGGG","isoWeekYear"),mn("GGGGG","isoWeekYear"),H("weekYear","gg"),H("isoWeekYear","GG"),G("weekYear",1),G("isoWeekYear",1),he("G",ce),he("g",ce),he("GG",ne,X),he("gg",ne,X),he("GGGG",ie,ee),he("gggg",ie,ee),he("GGGGG",se,te),he("ggggg",se,te),ye(["gggg","ggggg","GGGG","GGGGG"],,ye(["gg","GG"],,N("Q",0,"Qo","quarter"),H("quarter","Q"),G("quarter",7),he("Q",K),ge("Q",,N("D",["DD",2],"Do","date"),H("date","D"),G("date",9),he("D",ne),he("DD",ne,X),he("Do",,ge(["D","DD"],Se),ge("Do",;var gn=q("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),H("dayOfYear","DDD"),G("dayOfYear",4),he("DDD",oe),he("DDDD",Q),ge(["DDD","DDDD"],,N("m",["mm",2],0,"minute"),H("minute","m"),G("minute",14),he("m",ne),he("mm",ne,X),ge(["m","mm"],xe);var yn=q("Minutes",!1);N("s",["ss",2],0,"second"),H("second","s"),G("second",15),he("s",ne),he("ss",ne,X),ge(["s","ss"],ke);var bn,wn,_n=q("Seconds",!1);for(N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,,N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,function(){return 10*this.millisecond()}),N(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),N(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),N(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),N(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),N(0,["SSSSSSSSS",9],0,,H("millisecond","ms"),G("millisecond",16),he("S",oe,K),he("SS",oe,X),he("SSS",oe,Q),bn="SSSS";bn.length<=9;bn+="S")he(bn,ue);or(bn="S";bn.length<=9;bn+="S")ge(bn,On);wn=q("Milliseconds",!1),N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var Sn=w.prototype;n.add=Xt,Sn.calendar=function(e,t){var n;1===arguments.length&&(arguments[0]?_(n=arguments[0])||l(n)||en(n)||c(n)||n)||n)||null===n||void 0===n?(e=arguments[0],t=void 0):arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var u=e||Pt(),d=Wt(u,this).startOf("day"),f=r.calendarFormat(this,d)||"sameElse",h=t&&(j(t[f])?t[f].call(this,u):t[f]);return this.format(h||this.localeData().calendar(f,this,Pt(u)))},Sn.clone=Sn.diff=Sn.endOf=Sn.format=Sn.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||Pt(e).isValid())?qt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Sn.fromNow=function(e){return this.from(Pt(),e)},Sn.to=Sn.toNow=Sn.get=Sn.invalidAt=Sn.isAfter=Sn.isBefore=Sn.isBetween=Sn.isSame=Sn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Sn.isSameOrBefore=Sn.isValid=function(){return m(this)},Sn.lang=rn,Sn.locale=nn,Sn.localeData=an,Sn.max=Dt,Sn.min=It,Sn.parsingFlags=Sn.set=Sn.startOf=Sn.subtract=Qt,Sn.toArray=Sn.toObject=Sn.toDate=Sn.toISOString=Sn.inspect="undefined"!==typeof Symbol&&null!=Symbol.for&&(Sn[Symbol.for("nodejs.util.inspect.custom")]=,Sn.toJSON=Sn.toString=Sn.unix=Sn.valueOf=Sn.creationData=Sn.eraName=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""},Sn.eraNarrow=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""},Sn.eraAbbr=Sn.eraYear=Sn.year=Le,Sn.isLeapYear=Sn.weekYear=Sn.isoWeekYear=Sn.quarter=Sn.quarters=Sn.month=Fe,Sn.daysInMonth=Sn.week=Sn.weeks=Sn.isoWeek=Sn.isoWeeks=Sn.weeksInYear=function(){var e=this.localeData()._week;return Ve(this.year(),e.dow,e.doy)},Sn.weeksInWeekYear=Sn.isoWeeksInYear=function(){return Ve(this.year(),1,4)},Sn.isoWeeksInISOWeekYear=Sn.date=gn,Sn.day=Sn.days=Sn.weekday=Sn.isoWeekday=Sn.dayOfYear=Sn.hour=Sn.hours=at,Sn.minute=Sn.minutes=yn,Sn.second=Sn.seconds=_n,Sn.millisecond=Sn.milliseconds=wn,Sn.utcOffset=Sn.utc=Sn.local=Sn.parseZone=Sn.hasAlignedHourOffset=Sn.isDST=Sn.isLocal=Sn.isUtcOffset=Sn.isUtc=Ut,Sn.isUTC=Ut,Sn.zoneAbbr=function(){return this._isUTC?"UTC":""},Sn.zoneName=Sn.dates=S("dates accessor is deprecated. Use date instead.",gn),Sn.months=S("months accessor is deprecated. Use month instead",Fe),Sn.years=S("years accessor is deprecated. Use year instead",Le),Sn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",,Sn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",;var xn=R.prototype;calendar=xn.longDateFormat=xn.invalidDate=function(){return this._invalidDate},xn.ordinal=xn.preparse=En,xn.postformat=En,xn.relativeTime=xn.pastFuture=xn.set=xn.eras=xn.erasParse=xn.erasConvertYear=xn.erasAbbrRegex=function(e){return i(this,"_erasAbbrRegex")||pn.call(this),e?this._erasAbbrRegex:this._erasRegex},xn.erasNameRegex=function(e){return i(this,"_erasNameRegex")||pn.call(this),e?this._erasNameRegex:this._erasRegex},xn.erasNarrowRegex=xn.months=xn.monthsShort=xn.monthsParse=xn.monthsRegex=function(e){return this._monthsParseExact?(i(this,"_monthsRegex")||Ye.call(this),e?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=Ne),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},xn.monthsShortRegex=function(e){return this._monthsParseExact?(i(this,"_monthsRegex")||Ye.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=Me),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},xn.week=xn.firstDayOfYear=function(){return this._week.doy},xn.firstDayOfWeek=xn.weekdays=xn.weekdaysMin=function(e){return!0===e?ze(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},xn.weekdaysShort=xn.weekdaysParse=xn.weekdaysRegex=function(e){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=$e),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},xn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ke),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},xn.weekdaysMinRegex=xn.isPM=xn.meridiem=dt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",dt),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ht);var Rn=Math.abs;nction In(e){return 4800*e/146097}r Nn=Mn("ms"),An=Mn("s"),Fn=Mn("m"),Yn=Mn("h"),Hn=Mn("d"),Ln=Mn("w"),Bn=Mn("M"),Wn=Mn("Q"),Gn=Mn("y");ar Vn=Un("milliseconds"),zn=Un("seconds"),qn=Un("minutes"),Zn=Un("hours"),Jn=Un("days"),$n=Un("months"),Kn=Un("years"),Xn=Math.round,Qn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},er=Math.abs;r rr=At.prototype;return rr.isValid=rr.abs=rr.add=rr.subtract=rr.as=rr.asMilliseconds=Nn,rr.asSeconds=An,rr.asMinutes=Fn,rr.asHours=Yn,rr.asDays=Hn,rr.asWeeks=Ln,rr.asMonths=Bn,rr.asQuarters=Wn,rr.asYears=Gn,rr.valueOf=rr._bubble=rr.clone=rr.get=rr.milliseconds=Vn,rr.seconds=zn,rr.minutes=qn,rr.hours=Zn,rr.days=Jn,rr.weeks=rr.months=$n,rr.years=Kn,rr.humanize=rr.toISOString=nr,rr.toString=nr,rr.toJSON=nr,rr.locale=nn,rr.localeData=an,rr.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nr),rr.lang=rn,N("X",0,0,"unix"),N("x",0,0,"valueOf"),he("x",ce),he("X",/[+-]?\d+(\.\d{1,3})?/),ge("X",,ge("x",,r.version="2.29.1",t=Pt,r.fn=Sn,r.min=function(){return Mt("isBefore",[].slice.call(arguments,0))},r.max=r.now=r.utc=h,r.unix=r.months=function(e,t){return jn(e,t,"months")},r.isDate=l,r.locale=dt,r.invalid=v,r.duration=qt,r.isMoment=_,r.weekdays=function(e,t,n){return Cn(e,t,n,"weekdays")},r.parseZone=r.localeData=ht,r.isDuration=Ft,r.monthsShort=r.weekdaysMin=function(e,t,n){return Cn(e,t,n,"weekdaysMin")},r.defineLocale=ft,r.updateLocale=r.locales=function(){return E(it)},r.weekdaysShort=r.normalizeUnits=L,r.relativeTimeRounding=r.relativeTimeThreshold=r.calendarFormat=r.prototype=Sn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(196)(e))},300:function(e,t,n){(function(e,n){var r=200,a="__lodash_hash_undefined__",o=1,i=2,s=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",m="[object GeneratorFunction]",v="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",w="[object Proxy]",_="[object RegExp]",O="[object Set]",S="[object String]",E="[object Symbol]",x="[object Undefined]",k="[object ArrayBuffer]",j="[object DataView]",C=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[u]=T[c]=T[k]=T[d]=T[j]=T[f]=T[h]=T[p]=T[v]=T[g]=T[b]=T[_]=T[O]=T[S]=T["[object WeakMap]"]=!1;var P="object"==typeof e&&e&&e.Object===Object&&e,I="object"==typeof self&&self&&self.Object===Object&&self,D=P||I||Function("return this")(),M=t&&!t.nodeType&&t,N=M&&"object"==typeof n&&n&&!n.nodeType&&n,A=N&&N.exports===M,F=A&&P.process,Y=),H=Y&&Y.isTypedArray; G,U,V=Array.prototype,z=Function.prototype,q=Object.prototype,Z=D["__core-js_shared__"],J=z.toString,$=q.hasOwnProperty,K=),X=q.toString,Q=RegExp("^"+J.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=A?D.Buffer:void 0,te=D.Symbol,ne=D.Uint8Array,re=q.propertyIsEnumerable,ae=V.splice,oe=te?te.toStringTag:void 0,ie=Object.getOwnPropertySymbols,se=ee?ee.isBuffer:void 0,ue=(G=Object.keys,U=Object,,ce=Fe(D,"DataView"),le=Fe(D,"Map"),de=Fe(D,"Promise"),fe=Fe(D,"Set"),he=Fe(D,"WeakMap"),pe=Fe(Object,"create"),me=Be(ce),ve=Be(le),ge=Be(de),ye=Be(fe),be=Be(he),we=te?te.prototype:void 0,_e=we?we.valueOf:void 0;function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}n Pe(e,t,n,r,a){return e===t||(null==e||null==t||!Je(e)&&!Je(t)?e!==e&&t!==t:e,t,n,r,Pe,a))}totype.clear=Oe.prototype.delete=Oe.prototype.get=Oe.prototype.has=Oe.prototype.set=Se.prototype.clear=Se.prototype.delete=Se.prototype.get=Se.prototype.has=Se.prototype.set=Ee.prototype.clear=Ee.prototype.delete=Ee.prototype.get=function(e){return Ae(this,e).get(e)},Ee.prototype.has=Ee.prototype.set=xe.prototype.add=xe.prototype.push=xe.prototype.has=function(e){return this.__data__.has(e)},ke.prototype.clear=ke.prototype.delete=ke.prototype.get=function(e){return this.__data__.get(e)},ke.prototype.has=ke.prototype.set=var Ye=ie?He=Re;&&He(new ce(new ArrayBuffer(1)))!=j||le&&He(new le)!=v||de&&"[object Promise]"!=He(de.resolve())||fe&&He(new fe)!=O||he&&"[object WeakMap]"!=He(new he))&&(He=;var Ge=Te(function(){return arguments}())?Te:Ue=Array.isArray;var Ve=se||$e=H?H):.exports=).call(this,n(21),n(196)(e))},301:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(24),i=n.n(o),s=n(35),u=n(169),c=(n(306),n(155));t.a=function(e){var t=e.children,n=e.handleClick,r=e.handleDelete,o=e.hasEdits,l=e.headerText,d=e.headerTitle,f=e.hideSaveBtn,h=e.newTour,p=e.saving,m=e.showDeleteBtn;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"tour-editor-sidebar-header"},a.a.createElement("div",{className:"title-wrapper"},a.a.createElement("h2",null,d),m&&a.a.createElement(s.a,{className:"tour-editor-sidebar-header__delete-btn delete-btn text-btn",handleClick:function(){return r()}},a.a.createElement("i",{"aria-hidden":"true",className:"material-icons form-delete"},"delete"),"DELETE"),f?null:a.a.createElement(u.a,{disabled:!o||p,changed:o,saving:p,className:i()("update-tour",{edits:o&&!p}),handleClick:n,changedText:h?"Save":"Update",savingText:h?"Saving":"Updating",doneText:h?"\u2713 Saved":"\u2713 Updated",permission:c.k.manageTours,"data-cy":"tour-update-btn"},a.a.createElement("i",{className:"material-icons"},"save"),"\xa0 Update")),t,l&&a.a.createElement("p",null,l)))}},306:function(e,t,n){},312:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(24),i=n.n(o),s=n(53),u=n(35);n(351);t.a=function(e){var t=e.closeModal,n=e.errorToDisplay,r=e.backgroundHidden,o=e.hotspotsError,c=e.isOpen,l=i()({"error-modal__hotspots-positioning":o,"background-hidden":r});return a.a.createElement(s.a,{className:"error-modal ".concat(l),closeModal:t,isOpen:c},a.a.createElement("div",{className:"error-modal__wrapper"},a.a.createElement("p",{className:"error-modal__message"},n),a.a.createElement(u.a,{className:"text-btn cancel",onClick:t},a.a.createElement("i",{className:"material-icons"}," close "))))}},338:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(394),i=n.n(o);n(504);t.a=function(e){var t=e.checked,n=void 0!==t&&t,r=e.className,o=e.id,s=e.name,u=e.offColor,c=e.onColor,l=e.title,d=e.toggle,f=e.children,h=e.renderBefore,p=e.renderAfter,m=return a.a.createElement("label",{className:"toggle-wrapper ".concat(r),htmlFor:o},l&&a.a.createElement("span",null,l),"function"===typeof h&&h(),a.a.createElement(i.a,{checked:n,height:20,id:o,offColor:u||"#cccccc",onChange:m,onColor:c||"#62789d",onKeyPress:m,width:40,name:s}),"function"===typeof p&&p(),f)}},342:function(e,t,n){"use strict";var r=n(150),a=n(151),o=n(153),i=n(152),s=n(0),u=n.n(s),c=n(24),l=n.n(c),d=n(35),f=n(169),h=(n(421),n(155)),p=n(204),m=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).openTourPublish=function(){var t=e.props,n=t.tourId,r=t.history;(0,t.toggleHeaderDropdowns)({publishQueueOpen:!1}),r.push("/home/".concat(n,"/edit/publish"))},e.openTourPreview=function(){var t=e.props,n=t.tourId;t.history.push("/home/view/".concat(n,"/stop/1"))},e.publishTour=function(){var t=e.props,n=t.currentTour,r=t.savePublicTour,a=t.tourId,o=t.tier,i=t.gaId,s=t.mapboxToken,u=Object.assign({},n,{published:!0}),c={aid:localStorage.getItem("aid"),id:a,tourData:u,published:!0,uptoDate:!0,tier:o,gaId:i,mapboxToken:s};e.startPublishing(),r(c,e.finishPublishing)},e.startPublishing=e.finishPublishing=function(){setTimeout(function(){var t=e.props.onPublishComplete;e.setState({publishing:!1,published:!0}),"function"===typeof t&&t()},[1e3])},e.state={publishing:!1,published:!1},e}return Object(a.a)(n,[{key:"componentDidUpdate",value:function(e,t){this.state.published&&t.published&&this.setState({published:!1})}},{key:"render",value:function(){var e=this.state,t=e.publishing,n=e.published,r=this.props,a=r.currentTour,o=a.name,i=void 0===o?"":o,s=a.stopIds,c=void 0===s?[]:s,m=r.queueItem,v=r.uptoDate,g=r.disabled,y=r.tourId,b=r.togglePublishModal,w=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return u.a.createElement(f.a,{disabled:v||!Boolean(c.length)||g,changed:!v,saving:t,className:"tour-publish",handleClick:e,changedIcon:"file_upload",changedText:"Publish Now",savingText:"Publishing",doneText:"\u2713 Published",permission:h.k.publishTours,"data-cy":"tour-publish-btn".concat(n)},u.a.createElement("i",{className:"material-icons publish-upload"},"file_upload"),"\xa0 Publish Now")};return u.a.createElement(u.a.Fragment,null,m?u.a.createElement("article",{className:"tour-publish-card","data-cy":"publish-queue-card-".concat(y)},u.a.createElement(u.a.Fragment,null,u.a.createElement("h5",{className:l()("tour-publish-card__title",{published:n})},"Tour - ",i),u.a.createElement("div",{className:"tour-publish-card__btn-wrapper"},w("-".concat(y)),u.a.createElement(d.a,{className:"primary-btn",handleClick:this.openTourPublish,"data-cy":"publish-queue-publish-page-btn"},u.a.createElement(p.a,null,"arrow_forward"),"Publish Page"),u.a.createElement(d.a,{className:"primary-btn",handleClick:this.openTourPreview,"data-cy":"publish-queue-preview-btn"},u.a.createElement(p.a,null,"visibility"),"Preview Tour")))):u.a.createElement(u.a.Fragment,null,w(this.publishTour.bind(this))))}}]),n}(s.Component);t.a=m},343:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",;var r=n(2),a=n.n(r),o=n(3),i=n(6),s=n(155),u=n(7),c=n(25),l=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o,s,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.jobId,r=t.accId,o=t.tourId,s=Object(u.a)(),e.next=4,fetch("".concat(i.a.tourAPI,"/v2/").concat(r,"/tours/").concat(o,"/revisions/csv/").concat(n),{headers:s});case 4:return l=e.sent,e.next=7,Object(c.a)(l);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,i,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.jobId,r=t.accId,i=t.tourId,u=s.e,e.abrupt("return",new Promise(function(e,t){var s=setInterval(Object(o.a)(a.a.mark(function o(){var c;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u<=0&&(clearInterval(s),t({status:408,message:"Request Timeout, process took too long"})),a.next=3,l({jobId:n,accId:r,tourId:i});case 3:if("error"!==(c=a.sent).status&&"complete"!==c.status){a.next=8;break}return clearInterval(s),"complete"===c.status?e(c.url):t(c),a.abrupt("return");case 8:--u;case 9:case"end":return a.stop()}},o)})),3e3)}));case 3:case"end":return e.stop()}},e)}));return (),f=function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.a)(),e.prev=1,e.next=4,fetch("".concat(i.a.tourAPI,"/v2/").concat(t,"/tours/").concat(n,"/revisions/csv"),{headers:r,method:"POST"});case 4:return o=e.sent,e.next=7,Object(c.a)(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t,n);case 3:return r=e.sent,e.next=6,d({jobId:r,accId:t,tourId:n});case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return (),p=function(){var e=Object(o.a)(a.a.mark(function e(t,n,r){var o,s,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(u.a)(),e.prev=1,s=r?"?limit=".concat(r):"",e.next=5,fetch("".concat(i.a.tourAPI,"/v2/").concat(t,"/tours/").concat(n,"/revisions").concat(s),{headers:o});case 5:return l=e.sent,e.next=8,Object(c.a)(l);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return ()},351:function(e,t,n){},394:395:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);ar o=r.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},r.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),i=r.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},r.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));r c=function(e){eturn e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.componentDidUpdate=t.prototype.k=t.prototype.x=t.prototype.S=function(e){var t=this.state,n=t.s,r=t.R,a=t.m,o=this.props.checked,i=(this.i+this.o)/2,s=Date.now()-a;!r||s<250?this.T(e):o?i<n?this.setState({s:this.i}):this.T(e):n<i?this.setState({s:this.o}):this.T(e),this.setState({R:!1,M:!1}),this.n=Date.now()},t.prototype.h=t.prototype.r=t.prototype.a=t.prototype.c=t.prototype.l=t.prototype.u=t.prototype.p=function(e){50<Date.now()-this.n&&(this.T(e),50<Date.now()-this.e&&this.setState({M:!1}))},t.prototype.b=t.prototype.g=function(){this.setState({M:!0})},t.prototype.v=t.prototype.w=t.prototype.f=function(e){e.preventDefault(),this.y.focus(),this.T(e),this.setState({M:!1})},t.prototype.T=t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.className,o=e.offColor,i=e.onColor,s=e.offHandleColor,c=e.onHandleColor,l=e.checkedIcon,d=e.uncheckedIcon,f=e.boxShadow,h=e.activeBoxShadow,p=e.height,m=e.width,v=e,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),g=this.state,y=g.s,b=g.R,w=g.M,_={position:"relative",display:"inline-block",textAlign:"left",opacity:t?.5:1,direction:"ltr",borderRadius:p/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},O={height:p,width:m,margin:Math.max(0,(this.t-p)/2),position:"relative",background:u(y,this.i,this.o,o,i),borderRadius:p/2,cursor:t?"default":"pointer",WebkitTransition:b?null:"background 0.25s",MozTransition:b?null:"background 0.25s",transition:b?null:"background 0.25s"},S={height:p,width:Math.min(1.5*p,m-(this.t+p)/2+1),position:"relative",opacity:(y-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:b?null:"opacity 0.25s",MozTransition:b?null:"opacity 0.25s",transition:b?null:"opacity 0.25s"},E={height:p,width:Math.min(1.5*p,m-(this.t+p)/2+1),position:"absolute",opacity:1-(y-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:b?null:"opacity 0.25s",MozTransition:b?null:"opacity 0.25s",transition:b?null:"opacity 0.25s"},x={height:this.t,width:this.t,background:u(y,this.i,this.o,s,c),display:"inline-block",cursor:t?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+y+"px)",top:Math.max(0,(p-this.t)/2),outline:0,boxShadow:w?h:f,border:0,WebkitTransition:b?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:b?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:b?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return r.createElement("div",{className:n,style:_},r.createElement("div",{className:"react-switch-bg",style:O,onClick:t?null:this.f,onMouseDown:function(e){return e.preventDefault()}},l&&r.createElement("div",{style:S},l),d&&r.createElement("div",{style:E},d)),r.createElement("div",{className:"react-switch-handle",style:x,onClick:onMouseDown:t?null:this.h,onTouchStart:t?null:this.c,onTouchMove:t?null:this.l,onTouchEnd:t?null:this.u,onTouchCancel:t?null:this.v}),r.createElement("input",a({},{type:"checkbox",role:"switch",disabled:t,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},v,{ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})))},t}(r.Component);c.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:o,checkedIcon:i,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},t.default=c},420:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n(528),s=n(24),u=n.n(s),c=n(54),l=(n(423),function(e){var t=e.columns,n=void 0===t?[]:t,s=e.data,l=void 0===s?[]:s,d=e.paginated,f=e.fetchData,h=e.controlledPageCount,p=e.loading,m=e.emptyMessage,v=Object(i.useTable)(Object(o.a)({columns:n,data:l,initialState:{pageIndex:0,pageSize:5},manualPagination:"function"===typeof f},"function"===typeof f&&{pageCount:h}),d&&i.usePagination),g=v.getTableProps,y=v.getTableBodyProps,b=v.headerGroups,w=v.prepareRow,_=v.page,O=v.rows,S=v.canPreviousPage,E=v.canNextPage,x=v.pageOptions,k=v.pageCount,j=v.gotoPage,C=v.nextPage,R=v.previousPage,T=v.setPageSize,P=v.state,I=P.pageIndex,D=P.pageSize,M=d?_:O;return Object(r.useEffect)(function(){"function"===typeof f&&f({pageIndex:I,pageSize:D})},[f,I,D]),a.a.createElement(a.a.Fragment,null,a.a.createElement("table",Object.assign({className:u()("tb-data-table",{paginated:d})},g()),a.a.createElement("thead",null,b.map(function(e){return a.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map(function(e){return a.a.createElement("th",e.getHeaderProps({style:Object(o.a)({},e.styles)}),e.render("Header"))}))})),a.a.createElement("tbody",y(),p&&a.a.createElement("tr",{className:"loading-spinner"},a.a.createElement("td",{colSpan:n.length},a.a.createElement(c.ClipLoader,{key:"loader",color:"none",size:50}))),!p&&0===M.length&&a.a.createElement("tr",{className:"empty-table"},a.a.createElement("td",{colSpan:n.length},m||"No Data to Display")),M.map(function(e,t){return w(e),a.a.createElement("tr",e.getRowProps(),e.cells.map(function(e){return a.a.createElement("td",e.getCellProps({style:Object(o.a)({},e.column.styles)}),e.render("Cell"))}))}))),d&&a.a.createElement("div",{className:"pagination"},a.a.createElement("button",{onClick:disabled:!S},"<<"),a.a.createElement("button",{onClick:function(){return R()},disabled:!S},"<"),a.a.createElement("button",{onClick:disabled:!E},">"),a.a.createElement("button",{onClick:disabled:!E},">>"),a.a.createElement("span",null,"Page"," ",a.a.createElement("strong",null,I+1," of ",x.length)," "),a.a.createElement("select",{value:D,onChange:,[5,10,20,30].map(function(e){return a.a.createElement("option",{key:e,value:e},"Show ",e)}))))}),d=n(11),f=function(e){var t=e.fieldChanges,n=Object(r.useState)(!1),i=Object(d.a)(n,2),s=i[0],u=i[1],c=Object(r.useState)(null),l=Object(d.a)(c,2),f=l[0],h=l[1],p=Object(r.useState)(0),m=Object(d.a)(p,2),v=m[0],g=m[1],y=Object(r.useState)(null),b=Object(d.a)(y,2),w=b[0],_=b[1],O=Object(r.useRef)();Object(r.useEffect)(function(){if(O.current&&w){var e,t,n,r=null===(e=w.target.parentElement)||void 0===e?void 0:null===(t=e.parentElement)||void 0===t?void 0:null===(n=t.parentElement)||void 0===n?void 0:n.parentElement,a=null===r||void 0===r?void 0:r.getBoundingClientRect();a&&(w.clientY-a.top+O.current.clientHeight>r.clientHeight?(h(0),g(null)):(h(null),g(0)))}},[w,O]);var S=t.map(;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onMouseOver:onMouseLeave:className:"field-changes-button"},t.length," changes"),s&&a.a.createElement("ul",{className:"field-changes-list",style:Object(o.a)(Object(o.a)({position:"absolute",marginTop:"20px",marginBottom:"20px",zIndex:100,width:"100%"},null!==v&&{top:v}),null!==f&&{bottom:f}),ref:O},S))},h=n(264),p=n.n(h);n(424),t.a=function(e){var t=e.data,n=e.paginated,o=e.loadingData,i=Object(r.useMemo)(function(){return[{Header:"Date",accessor:"created_dt",styles:{minWidth:"100px",width:"100px",textAlign:"center",whiteSpace:"pre"},Cell:function(e){var t=e.cell,n=p()(t.value).format("MMM D, YYYY[\n]h:mm A");return n||""}},{Header:"Status",accessor:"status",styles:{minWidth:"75px",width:"75px",textAlign:"center"},Cell:function(e){var t=e.cell,n="#214C6C";return"Committed"===t.value?n="#009b65":"Reverted"===t.value&&(n="#a23f3f"),a.a.createElement("p",{style:{color:n}},t.value)}},{Header:"Event",accessor:"type",styles:{minWidth:"100px",width:"100px",textAlign:"center"}},{Header:"Item",accessor:"item",styles:{minWidth:"50px",width:"50px",textAlign:"center"}},{Header:"Author",accessor:"revisionBy",styles:{minWidth:"250px",width:"250px",textAlign:"center"}},{Header:"Field Changes",accessor:"fields",styles:{minWidth:"125px",width:"125px",textAlign:"center",background:"inherit"},Cell:function(e){var t,n=e.cell,r=null===(t=n.value)||void 0===t?void 0:t.split(",");return(null===r||void 0===r?void 0:r.length)>1?a.a.createElement("div",{style:{position:"relative",background:"inherit"}},a.a.createElement(f,{fieldChanges:r})):n.value||null}}]},[]);return a.a.createElement("div",{className:"publish-data-table-container"},a.a.createElement(l,{columns:i,data:t,paginated:n,loading:o,emptyMessage:"No Revisions Found"}))}},421:function(e,t,n){},422:function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(3),i=n(11),s=n(0),u=n.n(s),c=n(36),l=n(53),d=n(420),f=n(169),h=n(342),p=n(343),m=n(158);n(425);t.a=function(e){var t=e.isPublish,n=void 0===t||t,r=e.revertCompleted,v=void 0===r||r,g=e.closeModal,y=e.onComplete,b=e.isOpen,w=e.currentTour,_=e.savePublicTour,O=e.userEmail,S=e.uptoDate,E=e.tourId,x=e.tier,k=e.gaId,j=e.mapboxToken,C=Object(c.d)(),R=Object(c.e)(,T=R.account.tourAccountId,P=R.tours.tours,I=Object(s.useState)(!1),D=Object(i.a)(I,2),M=D[0],N=D[1],A=Object(s.useState)([]),F=Object(i.a)(A,2),Y=F[0],H=F[1],L=Object(s.useState)(""),B=Object(i.a)(L,2),W=B[0],G=B[1],U=Object(s.useState)(!1),V=Object(i.a)(U,2),z=V[0],q=V[1];Object(s.useEffect)(function(){b&&function(){var e=Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),H([]),e.next=5,Object(p.b)(T,E);case 5:t=e.sent,H(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:return e.prev=12,N(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])}));return function(){return e.apply(this,arguments)}}()()},[b,T,E]),Object(s.useEffect)(function(){var e;P&&E&&G(null===(e=P[E])||void 0===e?void 0:e.name)},[P,E]);var Z=function(){setTimeout([1e3])},J=function(){var e=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q(!0),C(Object(m.g)(E,Z));case 2:case"end":return e.stop()}},e)}));return ();return u.a.createElement(l.a,{className:"publish-modal",closeModal:g,isOpen:b,shouldCloseOnOverlayClick:!0},u.a.createElement("div",{className:"publish-modal__wrapper"},u.a.createElement("h3",null,n?"Publish Confirmation / ".concat(W):"PROCEED WITH CAUTION"),u.a.createElement("p",{className:"publish-modal__message"},n?"You are about to publish the following ".concat(Y.length," changes. This action cannot \n              be undone, select Publish Now to continue."):"Reverting changes will remove all unpublished items and update your \n              preview and editor mode with all data on your live tour. Any\n              unpublished changes you have below will be lost."),u.a.createElement(d.a,{data:Y,paginated:!0,loadingData:M}),!n&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h4",null,"You cannot undo this action."),u.a.createElement("p",{className:"revert-modal__message"},"Are you sure you want to revert these changes?")),n?u.a.createElement(h.a,{userEmail:O,tourId:E,currentTour:w,uptoDate:S,savePublicTour:_,tier:x,gaId:k,mapboxToken:j,onPublishComplete:y,disabled:M}):u.a.createElement(f.a,{className:"btn-revert",disabled:M,saving:z,changed:!S||!v,handleClick:J,changedText:"Revert",savingText:"Reverting",doneText:"\u2713 Reverted","data-cy":"tour-revert-btn"})))}},423:function(e,t,n){},424:function(e,t,n){},425:function(e,t,n){},491:function(e,t,n){"use strict";var r=n(12),a=n(0),o=n.n(a),i=n(171),s=(n(492),["classNames","id","label","inputOptional","editIcon","inputValue","handleInput","handleKeyPress","errorText","displayError","hideErrorText","labelAbove","toolTipClickHandler","toolTipText"]),u=Object(a.forwardRef)(function(e,t){var n=e.classNames,a=e.id,u=e.label,c=e.inputOptional,l=e.editIcon,d=e.inputValue,f=e.handleInput,h=(e.handleKeyPress,e.errorText),p=e.displayError,m=e.hideErrorText,v=e.labelAbove,g=e.toolTipClickHandler,y=e.toolTipText,b=Object(r.a)(e,s);return o.a.createElement(i.a,{classNames:n,id:a,label:u,inputOptional:c,editIcon:l,displayError:p,hideErrorText:m,errorText:h,labelAbove:v,toolTipClickHandler:g,toolTipText:y},o.a.createElement("textarea",Object.assign({id:a,ref:t,value:d||"",onChange:f},b)))});t.a=u},492:495:function(e,t,n){"use strict";var r=n(150),a=n(151),o=n(153),i=n(152),s=n(0),u=n.n(s),c=n(496),l=n.n(c),d=n(35),f=n(157),h=(n(500),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).handleCopy=function(){var t=e.props,n=t.tourId,r=t.tourName,a=t.type;e.setState({copied:!0},function(){Object(f.a)("".concat(n,"-").concat(r),"copy",a),setTimeout(5e3)})},e.state={copied:!1},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.state.copied,n=this.props,r=n.shareUrl,a="share"===n.type;return u.a.createElement(u.a.Fragment,null,u.a.createElement(l.a,{key:"copy",text:r,onCopy:,u.a.createElement(d.a,{className:"copy-btn","data-cy":a?"copy-url-btn":"copy-embed-btn","aria-label":"copy ".concat(a?"share url":"iframe embed")},u.a.createElement("i",{"arai-hidden":"true",className:"material-icons"},"content_copy"),"\xa0Copy")),t&&u.a.createElement("p",{key:"copy-success",className:"copy-success"},"Copied to clipboard"))}}]),n}(s.Component));t.a=h},496:497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var r=o(n(0)),a=o(n(498));ction(e){function t(){var e,n,o,s;!this,t);for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return o=this,s=(e=l(t)).call.apply(e,[this].concat(c)),n=!s||"object"!==i(s)&&"function"!==typeof s?d(o):s,h(d(n),"onClick",,n}var n,o,p;return t,r["default"].PureComponent),n=t,(o=[{key:"render",value:])&&c(n.prototype,o),p&&c(n,p),t}();t.CopyToClipboard=p,h(p,"defaultProps",{onCopy:void 0,options:void 0})},498:function(e,t,n){"use strict";var r=n(499),a={"text/plain":"Text","text/html":"Url",default:"Text"},o="Copy to clipboard: #{key}, Enter";e.exports=function(e,t){var n,i,s,u,c,l,d=!1;t||(t={}),n=t.debug||!1;try{if(s=r(),u=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",,document.body.appendChild(l),u.selectNodeContents(l),c.addRange(u),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(f){n&&console.error("unable to copy using execCommand: ",f),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(f){n&&console.error("unable to copy using clipboardData: ",f),n&&console.error("falling back to prompt"),i="message"in t?t.message:o),window.prompt(i,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(u):c.removeAllRanges()),l&&document.body.removeChild(l),s()}return d}},499:500:function(e,t,n){},501:function(e,t,n){},502:function(e,t,n){"use strict";var r=n(150),a=n(151),o=n(153),i=n(152),s=n(0),u=n.n(s),c=n(161),l=n(155),d=n(175),f=n(202),h=(n(503),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).setInnerHeight=function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px")),0!==e.props.yPosition&&e.props.setYPosition(window.innerHeight)},e.closeDrawer=e}return Object(a.a)(n,[{key:"componentDidMount",value:,{key:"componentDidUpdate",value:function(e){var t=this.props.restPosition;e.restPosition!==t&&0===t&&this.focusRef&&this.focusRef.focus()}},{key:"componentWillUnmount",value:,{key:"render",value:function(){var e=this,t=this.props,n=t.tourStops,r=t.activeStop,a=t.gaEvent,o=t.setYPosition,i=t.tourName,s=t.tourDescription,h=t.yPosition,p=window.innerWidth<1025,m=0===h?0:-1;return u.a.createElement("div",{className:"stop-gallery","data-cy":"stop-gallery"},!p&&u.a.createElement(d.a,{render:function(t){var n=t.onEnter,r=t.onLeave,a=t.hovering;return u.a.createElement(f.a,{tabIndex:m,onEnter:n,onLeave:r,hovering:a,className:"stop-gallery__close-btn",handleClick:function(){return o()},"aria-label":"close gallery",isMobile:p,myRef:"data-cy":"stop-gallery__close-btn"},u.a.createElement("i",{"aria-hidden":"true",className:"material-icons prev"},"close"),"\xa0 Close")}}),u.a.createElement("div",{className:"stop-gallery__info"},u.a.createElement("h2",{"data-cy":"stop-gallery-heading-2",className:"stop-gallery__heading-2",tabIndex:m},i+" Tour Stop Gallery"),u.a.createElement("div",{tabIndex:m,"data-cy":"stop-gallery-description",className:"stop-gallery__description",dangerouslySetInnerHTML:{__html:s}})),u.a.createElement("span",{className:"stop-gallery__line"}),u.a.createElement("div",{className:"stop-gallery__grid-wrapper"},u.a.createElement("ol",{tabIndex:0,"aria-label":"Tour stops",className:"stop-gallery__grid-wrapper__thumbnail-grid","data-cy":"stop-gallery-list"},n.map(function(t,n){if(!t)return null;var o=t.panoId,i=t.id,s=t.mainMediaType,d=t.thumbnail,f=t.order,h=t.name,p=t.defaultPos,m=r===f?"active":"";return u.a.createElement("li",{key:o+n||i+n,className:"stop-thumbnail-list-item",onClick:function(){var t=e.props,r=t.getIndex,o=t.getId;"function"===typeof o&&o(i),"function"===typeof r&&r(n),"function"===typeof a&&a({defaultPos:p,stopNum:f||n,stopName:h,origin:"Gallery"}),e.closeDrawer()},onKeyPress:function(t){var r=e.props,o=r.getIndex,s=r.getId;"function"===typeof o&&o(n),"function"===typeof s&&s(i),"function"===typeof a&&a({defaultPos:p,stopNum:f||n,stopName:h,origin:"Gallery"}),"Enter"===t.key&&e.closeDrawer()},tabIndex:0,"aria-label":h,"data-cy":"stop-thumbnail-list-item"},u.a.createElement(c.default,{mediaId:o||i,mediaType:s||l.j,thumbSrc:d,thumbClass:"stop-thumbnail ".concat(m),name:h,height:180,alt:"",view:!0,overlayMediaName:!0}))}))))}}]),n}(u.a.Component));t.a=h},503:function(e,t,n){},504:function(e,t,n){},524:function(e,t,n){"use strict";var r=n(11),a=n(0),o=n.n(a),i=n(37),s=n(39);ar c=n(166),l=n(153),d=n(152),f=n(150),h=n(151),p=n(4),m=n(10),v=n(16),g={arr:Array.isArray,obj:fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:und:function(e){return void 0===e},nul:set:function(e){return e instanceof Set},map:equ:;tion O(e){var t=e);if(g.und(t))return Object(m.a)({to:t},e);var n=Object.keys(e).reduce(function(n,r){return g.und(t[r])?Object(m.a)({},n,Object(p.a)({},r,e[r])):n},{});return Object(m.a)({to:t},n)}var S,E,x=function(){eturn Object(h.a)(e,[{key:"getAnimatedValue",value:function(){return this.getValue()}},{key:"getPayload",value:,{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"getChildren",value:function(){return this.children}},{key:"addChild",value:,{key:"removeChild",value:]),e}(),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).payload=[],e.attach=function(){return e.payload.forEach(function(t){return t instanceof x&&t.addChild(Object(c.a)(e))})},e.detach=function(){return e.payload.forEach(function(t){return t instanceof x&&t.removeChild(Object(c.a)(e))})},e}return n}(x),j=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).payload={},e.attach=function(){return Object.values(e.payload).forEach(function(t){return t instanceof x&&t.addChild(Object(c.a)(e))})},e.detach=function(){return Object.values(e.payload).forEach(function(t){return t instanceof x&&t.removeChild(Object(c.a)(e))})},e}return Object(h.a)(n,[{key:"getValue",value:,{key:"getAnimatedValue",value:]),n}(x);unction R(e){E=e}var T,P=function(e){return"undefined"!==typeof window?window.requestAnimationFrame(e):-1};function I(e){T=e}var D=function(){return Date.now()};ar N,A,F=function(e){return e.current};ar H=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;return Object(f.a)(this,n),(a=t.call(this)).update=void 0,a.payload=e.style?Object(m.a)({},e,{style:N(e.style)}):e,a.update=r,a.attach(),a}return n}(j),L=!1,B=new Set,W=function e(){if(!L)return!1;var t,n=D(),r=u(B);try{for(r.s();!(t=r.n()).done;){for(var a=t.value,o=!1,i=0;i<a.configs.length;i++){for(var s=a.configs[i],c=void 0,l=void 0,d=0;d<s.animatedValues.length;d++){var f=s.animatedValues[d];if(!f.done){var h=s.fromValues[d],p=s.toValues[d],m=f.lastPosition,v=p instanceof x,g=Array.isArray(s.initialVelocity)?s.initialVelocity[d]:s.initialVelocity;if(v&&(p=p.getValue()),s.immediate)f.setValue(p),f.done=!0;else if("string"!==typeof h&&"string"!==typeof p){if(void 0!==s.duration)m=h+s.easing((n-f.startTime)/s.duration)*(p-h),c=n>=f.startTime+s.duration;else if(s.decay)m=h+g/(1-.998)*(1-Math.exp(-(1-.998)*(n-f.startTime))),(c=Math.abs(f.lastPosition-m)<.1)&&(p=m);else{l=void 0!==f.lastTime?f.lastTime:n,g=void 0!==f.lastVelocity?f.lastVelocity:s.initialVelocity,n>l+64&&(l=n);for(var y=Math.floor(n-l),b=0;b<y;++b){m+=1*(g+=1*((-s.tension*(m-p)+-s.friction*g)/s.mass)/1e3)/1e3}var w=!(!s.clamp||0===s.tension)&&(h<p?m>p:m<p),_=Math.abs(g)<=s.precision,O=0===s.tension||Math.abs(p-m)<=s.precision;c=w||_&&O,f.lastVelocity=g,f.lastTime=n}v&&!s.toValues[d].done&&(c=!1),c?(f.value!==p&&(m=p),f.done=!0):o=!0,f.setValue(m),f.lastPosition=m}else f.setValue(p),f.done=!0}}a.props.onFrame&&(a.values[s.name]=s.interpolation.getValue())}a.props.onFrame&&a.props.onFrame(a.values),o||(B.delete(a),a.stop(!0))}}catch(S){r.e(S)}finally{r.f()}return B.size?A?A():P(e):L=!1,L};function G(e,t,n){if("function"===typeof e)return e;if(Array.isArray(e))return G({range:e,output:t,extrapolate:n});if(T&&"string"===typeof e.output[0])return T(e);var r=e,a=r.output,o=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||function(e){return e};return var U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,r,a,o){var i;return Object(f.a)(this,n),(i=t.call(this)).calc=void 0,i.payload=e instanceof k&&!(e instanceof n)?e.getPayload():Array.isArray(e)?e:[e],i.calc=G(r,a,o),i}return Object(h.a)(n,[{key:"getValue",value:function(){return this.calc.apply(this,Object(i.a)(this.payload.map(function(e){return e.getValue()})))}},{key:"updateConfig",value:,{key:"interpolate",value:function(e,t,r){return new n(this,e,t,r)}}]),n}(k);var V=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r,a;return Object(f.a)(this,n),r=t.call(this),a=Object(c.a)(r),r.animatedStyles=new Set,r.value=void 0,r.startPosition=void 0,r.lastPosition=void 0,r.lastVelocity=void 0,r.startTime=void 0,r.lastTime=void 0,r.done=!1,r.setValue=r.value=e,r.startPosition=e,r.lastPosition=e,r}return Object(h.a)(n,[{key:"flush",value:,{key:"clearStyles",value:,{key:"getValue",value:function(){return this.value}},{key:"interpolate",value:]),n}(x),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this)).payload=e.map(function(e){return new V(e)}),r}return Object(h.a)(n,[{key:"setValue",value:,{key:"getValue",value:,{key:"interpolate",value:]),n}(k),q=0,Z=function(){function e(){var t=this;Object(f.a)(this,e),this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=function(){return t.interpolations},this.id=q++}return Object(h.a)(e,[{key:"update",value:function(e){if(!e)return this;var t=O(e),n=t.delay,r=void 0===n?0:n,a=t.to,o=Object(v.a)(t,["delay","to"]);if(g.arr(a)||g.fun(a))this.queue.push(Object(m.a)({},o,{delay:r,to:a}));else if(a){var i={};Object.entries(a).forEach(function(e){var t=e[0],n=e[1],a=Object(m.a)({to:Object(p.a)({},t,n),delay:_(r,t)},o),s=i[a.delay]&&i[a.delay].to;i[a.delay]=Object(m.a)({},i[a.delay],a,{to:Object(m.a)({},s,a.to)})}),this.queue=Object.values(i)}return this.queue=this.queue.sort(function(e,t){return e.delay-t.delay}),this.diff(o),this}},{key:"start",value:function(e){var t,n=this;if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(;var r=this.local=++this.guid,a=this.localQueue=this.queue;this.queue=[],a.forEach(}else g.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),t=this,B.has(t)||B.add(t),L||(L=!0,P(A||W));return this}},{key:"stop",value:,{key:"pause",value:,{key:"runAsync",value:function(e,t){var n=this,r=this,a=(e.delay,Object(v.a)(e,["delay"])),o=this.local,i=Promise.resolve(void 0);if(g.arr(a.to))for(var s=function(e){var t=e,r=Object(m.a)({},a,O(a.to[t]));g.arr(r.config)&&(r.config=r.config[t]),i=i.then(},u=0;u<a.to.length;u++)s(u);else if(g.fun(a.to)){var c,l=0;i=i.then(}i.then(t)}},{key:"diff",value:function(e){var t=this;this.props=Object(m.a)({},this.props,e);var n=this.props,r=n.from,a=void 0===r?{}:r,o=n.to,i=void 0===o?{}:o,s=n.config,u=void 0===s?{}:s,c=n.reverse,l=n.attach,d=n.reset,f=n.immediate;if(c){var h=[i,a];a=h[0],i=h[1]}this.merged=Object(m.a)({},a,this.merged,i),this.hasChanged=!1;var v=l&&l(this);if(this.animations=Object.entries(this.merged).reduce(function(e,n){var r=n[0],o=n[1],i=e[r]||{},s=g.num(o),c=g.str(o)&&!o.startsWith("#")&&!/\d/.test(o)&&!E[o],l=g.arr(o),h=!s&&!l&&!c,y=g.und(a[r])?o:a[r],O=s||l?o:c?o:1,S=_(u,r);v&&(O=v.animations[r].parent);var x,k=i.parent,j=i.interpolation,C=w(v?O.getPayload():O),R=o;h&&(R=T({range:[0,1],output:[o,o]})(1));var P=j&&j.getValue(),I=!g.und(k)&&i.animatedValues.some(function(e){return!e.done}),M=!g.equ(R,P),N=!g.equ(R,i.previous),A=!g.equ(S,i.config);if(d||N&&M||A){if(s||c)k=j=i.parent||new V(y);else if(l)k=j=i.parent||new z(y);else if(h){var F=i.interpolation&&i.interpolation.calc(i.parent.value);F=void 0===F||d?y:F,i.parent?(k=i.parent).setValue(0,!1):k=new V(0);var Y={output:[F,o]};i.interpolation?(j=i.interpolation,i.interpolation.updateConfig(Y)):j=k.interpolate(Y)}return C=w(v?O.getPayload():O),x=w(k.getPayload()),d&&!h&&k.setValue(y,!1),t.hasChanged=!0,x.forEach(,_(f,r)&&k.setValue(h?O:o,!1),Object(m.a)({},e,Object(p.a)({},r,Object(m.a)({},i,{name:r,parent:k,interpolation:j,animatedValues:x,toValues:C,previous:R,config:S,fromValues:w(k.getValue()),immediate:_(f,r),initialVelocity:b(S.velocity,0),clamp:b(S.clamp,!1),precision:b(S.precision,.01),tension:b(S.tension,170),friction:b(S.friction,26),mass:b(S.mass,1),duration:S.duration,easing:b(S.easing,function(e){return e}),decay:S.decay})))}return M?e:(h&&(k.setValue(1,!1),j.updateConfig({output:[R,R]})),k.done=!0,t.hasChanged=!0,Object(m.a)({},e,Object(p.a)({},r,Object(m.a)({},e[r],{previous:R}))))},this.animations),this.hasChanged)for(var y in this.configs=Object.values(this.animations),this.values={},this.interpolations={},this.animations)this.interpolations[y]=this.animations[y].interpolation,this.values[y]=this.animations[y].interpolation.getValue();return this}},{key:"destroy",value:]),e}(),J=function(e,t){var n=Object(a.useRef)(!1),r=Object(a.useRef)(),o=g.fun(t),i=Object(a.useMemo)([e]),s=i[0],u=i[1];r.current=s;Object(a.useImperativeHandle)(u,;var c=Object(a.useMemo)([e]);Object(a.useEffect)(,Object(a.useEffect)([]);var l=r.current.map(function(e){return e.getValues()});return o?[l,c,:l};var $=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(f.a)(this,n),void 0===e&&(e={}),r=t.call(this),!e.transform||e.transform instanceof x||(e=S.transform(e)),r.payload=e,r}return n}(j),K={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},X="[-+]?\\d*\\.?\\d+",Q=X+"%";ar te=new RegExp("rgb"+ee(X,X,X)),ne=new RegExp("rgba"+ee(X,X,X,X)),re=new RegExp("hsl"+ee(X,Q,Q)),ae=new RegExp("hsla"+ee(X,Q,Q,X)),oe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,se=/^#([0-9a-fA-F]{6})$/,ue=/^#([0-9a-fA-F]{8})$/;on me(e){var t=e);if(null===t)return e;var n=(16711680&(t=t||0))>>>16,r=(65280&t)>>>8,a=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(n,", ").concat(r,", ").concat(a,")")}var ve=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ge=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ye=new RegExp("(".concat(Object.keys(K).join("|"),")"),"g"),be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","Ms","Moz","O"];e=Object.keys(be).reduce(be);var Oe={};Y(,M("div"),I(function(e){var t=e.output.map(function(e){return e.replace(ge,me)}).map(function(e){return e.replace(ye,me)}),n=t[0].match(ve).map(function(){return[]});t.forEach(;var r=t[0].match(ve).map(function(t,r){return G(Object(m.a)({},e,{output:n[r]}))});return ),R(K),C(function(e,t){if(!e.nodeType||void 0===e.setAttribute)return!1;var n=t.style,r=t.children,a=t.scrollTop,o=t.scrollLeft,i=Object(v.a)(t,["style","children","scrollTop","scrollLeft"]),s="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName;for(var u in void 0!==a&&(e.scrollTop=a),void 0!==o&&(e.scrollLeft=o),void 0!==r&&(e.textContent=r),n)if(n.hasOwnProperty(u)){var c=0===u.indexOf("--"),l=_e(u,n[u],c);"float"===u&&(u="cssFloat"),c?e.style.setProperty(u,l):e.style[u]=l}for(var d in i){var f=s?d:Oe[d]||(Oe[d]=d.replace(/([A-Z])/g,);"undefined"!==typeof e.getAttribute(f)&&e.setAttribute(f,i[d])}},function(e){return e});var Se,Ee,xe=(Se=function(e){return Object(a.forwardRef)(function(t,n){var r=y(),i=Object(a.useRef)(!0),s=Object(a.useRef)(null),u=Object(a.useRef)(null),c=Object(a.useCallback)([]);Object(a.useEffect)([]),Object(a.useImperativeHandle)(n,,c(t);var l,d=s.current.getValue(),f=(d.scrollTop,d.scrollLeft,Object(v.a)(d,["scrollTop","scrollLeft"])),h=(l=e,!g.fun(l)||l.prototype instanceof o.a.Component?void 0);return o.a.createElement(e,Object(m.a)({},f,{ref:h}))})},void 0===(Ee=!1)&&(Ee=!0),(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),ke=n(260);n(501),t.a=function(e){var t=e.setYPosition,n=e.yPosition,i=e.children,s=e.setRestPosition,u=e.restPosition,c=Object(ke.b)(),l=Object(r.a)(c,2),d=l[0],f=l[1],h=f.delta,p=f.down,m=f.velocity,v=f.distance,y=f.direction,b={down:p,velocity:m,direction:y}),w=Object(a.useState)("none"),_=Object(r.a)(w,2),O=_[0],S=_[1],E={y:p&&h[1]>0?h[1]:n,immediate:onRest:).y;Object(a.useEffect)(function(){b&&b.down&&!p&&b.direction[1]>0&&b.velocity>1.2&&n!==window.innerHeight&&t(window.innerHeight),b&&b.down&&!p&&v>=.7*window.innerHeight&&n!==window.innerHeight&&t(window.innerHeight),u===window.innerHeight&&(S("none"),n!==window.innerHeight&&S("inherit"))},[p,h,m,v,y,b,u,n,t]);var x,k,j,C=window.innerWidth<=1024;return o.a.createElement(xe.div,{className:"drawer-content",style:{transform:(x=[E],k=x&&new U(x,k,j)),display:O}},C&&o.a.createElement(xe.div,Object.assign({className:"gesture-button-wrapper"},d()),o.a.createElement("div",{className:"gesture-button",onClick:t,"data-cy":"stop-gallery__mobile-close-btn",role:"button","aria-label":"close gallery"},o.a.createElement("div",{className:"bar"}))),i)}},528:function(e,t,n){e.exports=n(565)},547:function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(650);t.a=,565:function(e,t,n){var r=n(2);!function(e,t){"use strict";nction o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var u={init:"init"},c=l=d={Cell:c,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};ar h=p=m= b="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;new Map;ull,N=/\[/g,A=/\]/g,F=function(e){return o({role:"table"},e)},Y=H=L=B=W=G=U=.resetHiddenColumns="resetHiddenColumns",u.toggleHideColumn="toggleHideColumn",u.setHiddenColumns="setHiddenColumns",u.toggleHideAllColumns="toggleHideAllColumns";var z=z.pluginName="useColumnVisibility";var q=Z= X={},Q={},ee=te=ne=re=function(e){return e};resetExpanded="resetExpanded",u.toggleRowExpanded="toggleRowExpanded",u.toggleAllRowsExpanded="toggleAllRowsExpanded";var ie=ie.pluginName="useExpanded";var se=ue= fe=fe.autoRemove=function(e){return!e};var he=he.autoRemove=function(e){return!e};var pe=pe.autoRemove=var me=me.autoRemove=function(e){return!e||!e.length};var ve=function(e,t,n){return e.filter(function(e){return t.some(function(t){var r=e.values[t];return r&&r.length&&n.every(function(e){return r.includes(e)})})})};ve.autoRemove=function(e){return!e||!e.length};var ge=ge.autoRemove=function(e){return!e||!e.length};var ye=ye.autoRemove=var be=be.autoRemove=var we=we.autoRemove=var _e=_e.autoRemove=var Oe=Object.freeze({__proto__:null,text:fe,exactText:he,exactTextCase:pe,includes:me,includesAll:ve,includesSome:ge,includesValue:ye,exact:be,equals:we,between:_e});u.resetFilters="resetFilters",u.setFilter="setFilter",u.setAllFilters="setAllFilters";var Se=.pluginName="useFilters",u.resetGlobalFilter="resetGlobalFilter",u.setGlobalFilter="setGlobalFilter";var ke=function(e){e.stateReducers.push(je),e.useInstance.push(Ce)};pluginName="useGlobalFilter";var Te=Object.freeze({__proto__:null,sum:Re,min:function(e){var t=e[0]||0;return e.forEach(function(e){"number"==typeof e&&(t=Math.min(t,e))}),t},max:minMax:average:median:unique:uniqueCount:count:function(e){return e.length}}),Pe=[],Ie={};u.resetGroupBy="resetGroupBy",u.setGroupBy="setGroupBy",u.toggleGroupBy="toggleGroupBy";var De=De.pluginName="useGroupBy";var Me=function(e,t){var n=t.header;return[e,{onClick:n.canGroupBy?function(e){e.persist(),n.toggleGroupBy()}:void 0,style:{cursor:n.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};r Fe={}; Be=/([0-9]+)/gm; Ve=Object.freeze({__proto__:null,alphanumeric:datetime:basic:string:number:);u.resetSortBy="resetSortBy",u.setSortBy="setSortBy",u.toggleSortBy="toggleSortBy",u.clearSortBy="clearSortBy",d.sortType="alphanumeric",d.sortDescFirst=!1;var ze=ze.pluginName="useSortBy";var qe=esetPage="resetPage",u.gotoPage="gotoPage",u.setPageSize="setPageSize";var Ke=function(e){e.stateReducers.push(Xe),e.useInstance.push(Qe)};.pluginName="usePagination",u.resetPivot="resetPivot",u.togglePivot="togglePivot";var et=et.pluginName="usePivotColumns";var tt=[],nt=ectedRows="resetSelectedRows",u.toggleAllRowsSelected="toggleAllRowsSelected",u.toggleRowSelected="toggleRowSelected",u.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var ht=ht.pluginName="useRowSelect";var pt=mt=vt= wt=function(e){return{}},_t=u.setRowState="setRowState",u.setCellState="setCellState",u.resetRowState="resetRowState";var Ot=pluginName="useRowState",u.resetColumnOrder="resetColumnOrder",u.setColumnOrder="setColumnOrder";var kt=pluginName="useColumnOrder",d.canResize=!0,u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize";var Tt=Pt=t.pluginName="useResizeColumns";var Dt=ar Nt={position:"absolute",top:0},At=At.pluginName="useAbsoluteLayout";var Ft=function(e,t){return[e,{style:{position:"relative",width:t.instance.totalColumnsWidth+"px"}}]},Yt={display:"inline-block",boxSizing:"border-box"},Ht=Lt=t.pluginName="useBlockLayout",Bt.pluginName="useFlexLayout";var Wt=Gt=Ut=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]},Vt=zt=t.pluginName="useGridLayout";var Zt=Jt=._UNSTABLE_usePivotColumns=et,e.actions=u,e.defaultColumn=d,e.defaultGroupByFn=Le,e.defaultOrderByFn=$e,e.defaultRenderer=c,e.emptyRenderer=l,e.ensurePluginOrder=v,e.flexRender=O,e.functionalUpdate=g,e.loopHooks=m,e.makePropGetter=h,e.makeRenderer=_,e.reduceHooks=p,e.safeUseLayoutEffect=b,e.useAbsoluteLayout=At,e.useAsyncDebounce=e.useBlockLayout=Lt,e.useColumnOrder=kt,e.useExpanded=ie,e.useFilters=Se,e.useFlexLayout=Bt,e.useGetLatest=y,e.useGlobalFilter=ke,e.useGridLayout=qt,e.useGroupBy=De,e.useMountedLayoutEffect=w,e.usePagination=Ke,e.useResizeColumns=Tt,e.useRowSelect=ht,e.useRowState=Ot,e.useSortBy=ze,e.useTable=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e=ae(e),r=[z].concat(r);var i=t.useRef({}),s=y(i.current);Object.assign(s(),o({},e,{plugins:r,hooks:V()})),r.filter(Boolean).forEach(;var c=y(s().hooks);s().getHooks=c,delete s().hooks,Object.assign(s(),p(c().useOptions,ae(e)));var l=s(),d=l.data,f=l.columns,v=l.initialState,g=l.defaultColumn,b=l.getSubRows,w=l.getRowId,O=l.stateReducer,k=l.useControlledState,j=y(O),C=t.useCallback([c,j,s]),R=t.useReducer(C,void 0,,T=R[0],P=R[1],I=p([].concat(c().useControlledState,[k]),T,{instance:s()});Object.assign(s(),{state:I,dispatch:P});var D=t.useMemo([c,s,f].concat(p(c().columnsDeps,[],{instance:s()})));s().columns=D;var M=t.useMemo([D,c,s].concat(p(c().allColumnsDeps,[],{instance:s()})));s().allColumns=M;var N=t.useMemo([M,d,w,b,c,s]),A=N[0],F=N[1],Y=N[2];Object.assign(s(),{rows:A,initialRows:[].concat(A),flatRows:F,rowsById:Y}),m(c().useInstanceAfterData,s());var H=t.useMemo([c,M,s,g].concat(p(c().visibleColumnsDeps,[],{instance:s()})));M=t.useMemo([M,H]),s().allColumns=M;var L=t.useMemo([c,H,g,s].concat(p(c().headerGroupsDeps,[],{instance:s()})));s().headerGroups=L;var B=t.useMemo([L]);s().headers=B,s().flatHeaders=L.reduce([]),m(c().useInstanceBeforeDimensions,s());var W=H.filter(function(e){return e.isVisible}).map(function(e){return e.id}).sort().join("_");H=t.useMemo([H,W]),s().visibleColumns=H;var G=B),U=G[0],q=G[1],Z=G[2];return s().totalColumnsMinWidth=U,s().totalColumnsWidth=q,s().totalColumnsMaxWidth=Z,m(c().useInstance,s()),[].concat(s().flatHeaders,s().allColumns).forEach(,s().headerGroups=t.useMemo([L,s,c]),s().footerGroups=[].concat(s().headerGroups).reverse(),s().prepareRow=t.useCallback([c,s,M,H]),s().getTableProps=h(c().getTableProps,{instance:s()}),s().getTableBodyProps=h(c().getTableBodyProps,{instance:s()}),m(c().useFinalInstance,s()),s()},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(0))},650:function(e,t,n){},651:function(e,t,n){},652:function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(653);t.a=function(e){var t=e.name,n=e.description,o=e.defaultMsg,i=e.showDefault,s=e.renderIframe,u=(e.publicTour,e.classes);return a.a.createElement("div",{id:"form-display-container",className:u},i?a.a.createElement("p",null,o):a.a.createElement(r.Fragment,null,a.a.createElement("h1",{className:"tour-editor-forms-container__right__name"},t),a.a.createElement("span",{className:"tour-editor-forms-container__right__description"},n),a.a.createElement("div",{id:"iframe-container",dangerouslySetInnerHTML:s()})))}},653:function(e,t,n){},709:function(e,t,n){"use strict";var r=n(150),a=n(151),o=n(153),i=n(152),s=n(0),u=n.n(s),c=n(24),l=n.n(c),d=n(495),f=n(35),h=n(157),p=function(e){return u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 71.7 71.8",className:"facebook-logo",style:{fill:e.fill}},u.a.createElement("path",{className:"a",d:"M67.7,0H4A4.012,4.012,0,0,0,0,4V67.8a4.012,4.012,0,0,0,4,4H38.3V43.9H29V33.1h9.3v-8c0-9.3,5.7-14.3,13.9-14.3,4,0,7.4.3,8.3.4v9.7H54.8c-4.5,0-5.4,2.1-5.4,5.3v6.9H60.1L58.7,43.9H49.4V71.7H67.7a4.012,4.012,0,0,0,4-4V4A4.012,4.012,0,0,0,67.7,0Z"}))},m=function(e){return u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72.1 72",className:"twitter-logo",style:{fill:e.fill}},u.a.createElement("path",{className:"a",d:"M67.6,0H4.4A4.439,4.439,0,0,0,0,4.4V67.7A4.42,4.42,0,0,0,4.4,72H67.7a4.439,4.439,0,0,0,4.4-4.4V4.4A4.6,4.6,0,0,0,67.6,0ZM52,27.8v1.1c0,10.9-8.3,23.5-23.5,23.5a23.9,23.9,0,0,1-12.7-3.7,12.75,12.75,0,0,0,2,.1,16.85,16.85,0,0,0,10.3-3.5,8.33,8.33,0,0,1-7.7-5.7,8.083,8.083,0,0,0,1.6.1,7.8,7.8,0,0,0,2.2-.3,8.257,8.257,0,0,1-6.6-8.1v-.1a7.873,7.873,0,0,0,3.7,1,8.343,8.343,0,0,1-3.7-6.9,8.769,8.769,0,0,1,1.1-4.2,23.365,23.365,0,0,0,17,8.6,11.076,11.076,0,0,1-.2-1.9,8.28,8.28,0,0,1,8.3-8.3,8.145,8.145,0,0,1,6,2.6,18.748,18.748,0,0,0,5.3-2,8.27,8.27,0,0,1-3.6,4.6,15.51,15.51,0,0,0,4.8-1.3A18.011,18.011,0,0,1,52,27.8Z"}))},v=function(e){return u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 71.903 72",className:"linkedin-logo",style:{fill:e.fill}},u.a.createElement("path",{className:"a",d:"M67.5,0H4.5A4.481,4.481,0,0,0,0,4.5V67.4A4.5,4.5,0,0,0,4.5,72H67.4a4.481,4.481,0,0,0,4.5-4.5V4.5A4.337,4.337,0,0,0,67.5,0ZM24.7,56H16.3V29.1h8.4ZM20.5,25.4a4.8,4.8,0,1,1,4.8-4.8A4.679,4.679,0,0,1,20.5,25.4ZM56,56H47.6V42.9c0-3.1-.1-7.1-4.3-7.1-4.3,0-5,3.4-5,6.9V56H30V29.1h8v3.7h.1A8.709,8.709,0,0,1,46,28.5c8.5,0,10,5.6,10,12.8Z"}))},g=function(e){var t=e.type,n=e.href,r=e.tourId,a=e.tourName;return u.a.createElement(f.a,{handleClick:function(){return window.open(n,"targetWindow","toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250"),Object(h.a)("".concat(r,"-").concat(a),"Share Tour",t),!1},className:"socialshare-button","aria-label":"click to share on ".concat(t)},function(){switch(t){case"facebook":return u.a.createElement(p,{fill:"#999"});case"twitter":return u.a.createElement(m,{fill:"#999"});case"linkedin":return u.a.createElement(v,{fill:"#999"});default:return null}}())};var y=function(e){e.config,e.data;var t=e.buttonTypesArray,n=e.shareUrl,r=e.tourId,a=e.tourName;return u.a.createElement(u.a.Fragment,null,u.a.createElement("h6",{className:"share-title",tabIndex:0,"aria-label":"Share on social media icons"},"Share link on:"),u.a.createElement("div",{className:"social-media-buttons"},t.map(function(e){var t=function(e,t){switch(e){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u=".concat(t);case"twitter":return"https://twitter.com/intent/tweet?url=".concat(t,"%2F");case"linkedin":return"https://www.linkedin.com/shareArticle?mini=true&&url=".concat(t);default:return null}}(e,n);return u.a.createElement(g,{key:e,type:e,href:t,tourId:r,tourName:a})})))},b=n(547),w=(n(651),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).setShareView=e.handlePublishNow=function(){var t=e.props,n=t.tourId,r=t.history,a=t.closeModal;"function"===typeof a()&&a(),r.push("/home/".concat(n,"/edit/publish"))},e.renderPublishBtn=function(){return u.a.createElement(f.a,{className:"publish-now text-btn",handleClick:e.handlePublishNow},u.a.createElement("i",{className:"material-icons"},"open_in_new"),"\xa0Go Publish")},e.renderSocialShareBtns=function(t){var n=e.props,r=n.tourId,a=n.tourName,o=n.aid;return u.a.createElement(y,{buttonTypesArray:["facebook","twitter","linkedin"],shareUrl:t,tourId:r,tourName:a,aid:o})},e.state={shareView:"pano"},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.state.shareView,n=this.props,r=n.aid,a=n.tourId,o=n.tourName,i=n.published,s=n.uptoDate,c=n.embed,h=n.tourEditor,p=n.showPublishButton,m=this.props.shareUrl;"map"===t&&(m=m.concat("?mv"));var v='\n      <iframe src="'.concat(m,'" width="100%" height="100%" border="0" scroll="no" allowfullscreen>\n        Your browser does not support Iframes\n      </iframe>\n    ');return u.a.createElement("section",{className:"share-wrapper"},u.a.createElement("h2",{tabIndex:0},"Share Tour"),h&&u.a.createElement("p",{className:"tour-editer-note"},"Generate share and embed URLs of your tour when are ready to show them to the world. Changes that have not been published will not be visible on public share URLs and embeds."),i?u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",{tabIndex:0},"Tour View"),u.a.createElement("p",{tabIndex:0},"Set the share link and embed code to initially show the tour media or map."),u.a.createElement("div",{className:"share-view-buttons"},u.a.createElement(f.a,{className:l()("share-view-button",{active:"pano"===t}),handleClick:function(){return e.setShareView("pano")},"aria-pressed":"pano"===t,"data-cy":"share-view-btn-pano"},"Media View"),u.a.createElement(f.a,{className:l()("share-view-button",{active:"map"===t}),handleClick:"aria-pressed":"map"===t,"data-cy":"share-view-btn-map"},"Map View")),u.a.createElement("span",{className:"share-url"},u.a.createElement("span",{className:"share-label"},u.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},"link"),"\xa0",u.a.createElement("h4",{className:"share-heading-4",tabIndex:0},"Share Link")),u.a.createElement("span",{className:"share-url-contents","data-cy":"share-url",tabIndex:0},m),u.a.createElement(d.a,{shareUrl:m,tourId:a,tourName:o,type:"share",aid:r})),this.renderSocialShareBtns(m),c&&u.a.createElement("span",{"data-cy":"embed-url",className:"embed-url"},u.a.createElement("span",{className:"share-label"},u.a.createElement("i",{"aria-hidden":"true",className:"material-icons"},"code"),"\xa0",u.a.createElement("h4",{tabIndex:0},"Embed iframe")),u.a.createElement("span",{tabIndex:0},v),u.a.createElement(d.a,{shareUrl:v,tourId:a,tourName:o,type:"embed"})),!s&&u.a.createElement(b.a,null,u.a.createElement("p",null,"There are unpublished changes that are not visible using public share urls."),p&&this.renderPublishBtn())):u.a.createElement(b.a,null,u.a.createElement("p",null,"This tour is unpublished. Please publish your tour to produce a share url")))}}]),n}(s.Component));t.a=w}}]);