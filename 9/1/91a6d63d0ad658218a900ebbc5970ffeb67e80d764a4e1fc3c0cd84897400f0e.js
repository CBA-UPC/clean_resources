(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1266:function(e,t,o){"use strict";o.r(t);var s=o(5),a=o(510),n=o(538),l=o(519),r=o(517),i=o(524),c=Object(s.defineComponent)({__name:"push-notifications-permission-modal",setup:e=>({__sfc:!0,BaseButton:a.a,BaseModal:n.a,ModalHead:l.a,ModalBody:r.a,ModalFooter:i.a})}),u=o(44),d=Object(u.a)(c,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(o.BaseModal,e._g(e._b({scopedSlots:e._u([{key:"default",fn:function({close:s}){return[t(o.ModalHead,[e._v(e._s("¡No te pierdas los mejores chollos!"))]),t(o.ModalBody,{staticClass:"flex flex--toW2-dir-col boxAlign-ai--toW2-c"},[t("img",{attrs:{src:"/assets/img/support-images/nerd_d9815.svg",height:"100",alt:""}}),t("div",{staticClass:"flex flex--dir-col space--mt-3 space--fromW2-mt-0 space--fromW2-ml-3"},[t("p",{staticClass:"size--all-m"},[e._v(e._s("Mantente al día de las mejores ofertas desde tu navegador."))])])]),t(o.ModalFooter,{staticClass:"boxAlign-jc--all-fe"},[t(o.BaseButton,{attrs:{variant:"secondary",mode:"default"},on:{click:function(t){return e.$emit("reject")}}},[e._v(" "+e._s("No")+" ")]),t(o.BaseButton,{staticClass:"space--ml-2",attrs:{variant:"primary",mode:"brand"},on:{click:s}},[e._v(" "+e._s("Obtener ofertas")+" ")])],1)]}}])},"BaseModal",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null).exports,p=o(555),f=Object(s.defineComponent)({__name:"push-notifications",setup(e){const t=Object(s.ref)(!1),{showPermissionModal:o,setPermissionModalSeen:a,manageVisitorPushSubscription:n,subscribeVisitorToPush:l}=Object(p.a)();return Object(s.onMounted)((()=>{try{if(o.value)return void(t.value=!0);n()}catch(e){}})),{__sfc:!0,isActive:t,showPermissionModal:o,setPermissionModalSeen:a,manageVisitorPushSubscription:n,subscribeVisitorToPush:l,handleSubscribeVisitorToPush:function(){a(),l()},handleReject:function(){a(),t.value=!1},PushNotificationsPermissionModal:d}}}),b=Object(u.a)(f,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return o.isActive?t(o.PushNotificationsPermissionModal,{attrs:{"active-sync":o.isActive,width:"780"},on:{close:o.handleSubscribeVisitorToPush,reject:o.handleReject}}):e._e()}),[],!1,null,null,null);t.default=b.exports},538:function(e,t,o){"use strict";var s=o(5),a=o(522),n=o(550);const l={center:n.e,bottomSheet:n.b,bottomCenter:n.c,bottomRight:n.d,fullscreen:n.f,absolute:n.a},r=Object(s.defineComponent)({name:"BaseModal"});var i=Object(s.defineComponent)(Object.assign({},r,{props:{layout:{type:[String,Object],default:"center",validator:e=>"string"!=typeof e||e in l},backdrop:{type:Boolean,default:!0},mobileSheet:{type:Boolean,default:!0},contentRepos:{type:Boolean,default:!1},scrollRepos:{type:Boolean,default:!1}},setup(e,t){let{expose:o}=t;const n=e,r=Object(s.computed)((()=>{const e="string"==typeof n.layout?l[n.layout]:n.layout;return[Object.assign({},e,{backdrop:n.backdrop})]})),i=Object(s.ref)(),c=()=>i.value.close();return Object(s.onMounted)((()=>i.value.activate(r))),Object(s.watch)(r,(()=>i.value.updateLayouts(r))),o({close:c}),{__sfc:!0,layoutPresets:l,props:n,popoverLayouts:r,popover:i,close:c,BasePopover:a.a}}})),c=o(44),u=Object(c.a)(i,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(o.BasePopover,e._g(e._b({ref:"popover",attrs:{"scroll-repos":e.scrollRepos,"content-repos":e.contentRepos,"mobile-sheet":e.mobileSheet&&"fullscreen"!==e.layout},scopedSlots:e._u([{key:"default",fn:function({}){return[e._t("default",null,{close:o.close})]}}],null,!0)},"BasePopover",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=u.exports}}]);e=>(new DOMParser).parseFromString(e,"text/html").body.textContent},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var s=n(16);function a(e,t){window.hj?window.hj(e,t):i.push([e,t])}function r(e){Object(s.e)(e,(e=>{e&&function(e){let{hotJar:t,features:n}=e;if(window.hj||!n.hotJar||!n.cookiePolicy.allowTracking)return;s=window,a=document,r="https://static.hotjar.com/c/hotjar-",o=".js?sv=",s.hj=function(){(s.hj.q=s.hj.q||i).push(arguments)},s._hjSettings={hjid:t.id,hjsv:6},l=a.getElementsByTagName("head")[0],(c=a.createElement("script")).async=!0,c.src=r+s._hjSettings.hjid+o+s._hjSettings.hjsv,l.appendChild(c);var s,a,r,o,l,c}(e)}))}const i=[]},1247:function(e,t,n){"use strict";n.r(t);var s=n(5),a=n(540),r=n(737),i=n(962),o=n(900),l=n(963),c=n(778),u=n(820),d=n(510),p=n(565),h=n(735),m=n(17),f=n(849),g=n(670),v=n(727),b=n(850),y=n(896),_=n(851),w=n(816),k=n(878),x=n(826);const C={titleLabel:"Title",titlePlaceholder:"A short and descriptive title of the offer...",descriptionLabel:"Description",descriptionPlaceholder:"You can provide the terms of the offer as well as any other relevant information required to use it here."};var O={components:{FormRow:d.o,FormTitle:d.v,FormSubtitle:d.q,FormLabel:d.k,FormInfo:d.d,FormContent:d.c,FormMessageList:d.m,ThreadForm:r.a,ControlLink:i.a,VoucherCodeControl:o.a,DiscountTypeControl:l.a,PriceControl:c.a,DateSelectorControl:u.a,BaseAnchor:f.a,MerchantSearch:g.a,FormTipLabel:v.a,CheckBlockedLinks:b.a,CheckLinkDuplicates:y.a,GetLinkMerchantSuggestion:_.a,ControlLinkErrors:w.a,ControlLoader:k.a,ThreadDuplicates:x.a,FormInputLabeled:d.i,FormInputIcon:d.h},mixins:[h.a],inheritAttrs:!1,computed:{translations(){return Object.assign({},C,this.i18n,{formTitle:this.hasThread?"Edit merchant-only offer":"Submit a new merchant-only offer",submitButtonText:this.hasThread?"Edit offer":"Publish offer"})},discountType:()=>({price:m.d,percentage:m.c,freeShipping:m.b}),dealType:()=>m.a,validations(){const e={merchant:[Object(p.j)()]};return this.features.discount&&(this.thread.discountType===m.d&&(e.price=[Object(p.j)(),Object(p.c)()]),this.thread.discountType===m.c&&(e.percentage=[Object(p.j)(),Object(p.c)()])),this.features.voucherCode&&(e.voucherCode=[Object(p.o)("voucherCode")]),this.features.link&&(e.link=[Object(p.n)(!0)],e.foundImage=[]),this.features.cpcLink&&(e.cpcLink=[Object(p.o)("cpcLink")]),e},remaining(){return 190-this.thread.description.length}},created(){this.features.discount&&this.$once("hook:beforeDestroy",this.$watch("thread.discountType",(e=>{this.thread.price=e===this.discountType.price?"":null,this.thread.percentage=e===this.discountType.percentage?"":null,this.thread.freeShipping=e===this.discountType.freeShipping||null,this.thread.shippingPrice=null})))},methods:{setMerchant(e,t){this.$store.commit("threadForm/UPDATE_FIELD",{path:"thread.merchant",value:e}),t.validate("merchant",e)}}},j=n(45),S=Object(j.a)(O,(function(){var e=this,t=e._self._c;return t("ThreadForm",e._g(e._b({ref:"form",attrs:{i18n:e.translations,wysiwyg:e.wysiwyg,"group-options":e.groupOptions,validations:e.validations,features:e.features,messages:e.messages},scopedSlots:e._u([{key:"title",fn:function(){return[t("FormRow",[t("FormContent",[t("FormTitle",[e._v(e._s(e.translations.formTitle))])],1)],1)]},proxy:!0},{key:"prepend",fn:function({v:n}){return[t("FormRow",[t("FormContent",[t("FormSubtitle",{staticClass:"space--mt-2 page-divider"},[e._v(" "+e._s("Offer link")+" ")])],1)],1),e.features.link?t("FormRow",{attrs:{error:n.error.link}},[t("FormContent",[t("ControlLink",{attrs:{placeholder:"https://www.site.com/greatdeal..."},scopedSlots:e._u([{key:"default",fn:function({link:n,resetLink:s}){return[n?t("CheckBlockedLinks",{attrs:{link:n},scopedSlots:e._u([{key:"default",fn:function({isLoading:a,hasErrors:r,errors:i}){return[r?t("ControlLinkErrors",{attrs:{"error-messages":i},on:{cancel:s}}):t("CheckLinkDuplicates",{attrs:{link:n,filter:{threadId:{ne:e.thread.threadId}}},scopedSlots:e._u([{key:"default",fn:function({isLoading:r,hasDuplicates:i,duplicates:o,reset:l}){return[t("div",[a||r?t("ControlLoader"):i?t("ThreadDuplicates",{attrs:{type:e.dealType,threads:o},on:{cancel:s,continue:l}}):e._e(),t("GetLinkMerchantSuggestion",{attrs:{link:n}})],1)]}}],null,!0)})]}}],null,!0)}):e._e()]}}],null,!0),model:{value:e.thread.link,callback:function(t){e.$set(e.thread,"link","string"==typeof t?t.trim():t)},expression:"thread.link"}})],1)],1):e._e(),t("FormRow",[t("FormContent",[t("BaseAnchor",{attrs:{id:"thread-details"}},[t("FormSubtitle",{staticClass:"space--mt-2 page-divider"},[e._v(" "+e._s("The essentials")+" ")])],1)],1)],1)]}},{key:"default",fn:function({v:n}){return[t("FormRow",[t("FormContent",[t("FormSubtitle",{staticClass:"space--mt-2 page-divider"},[e._v(" "+e._s("Offer details")+" ")])],1)],1),e.features.discount?t("FormRow",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"discountType"},expression:"{ name: 'discountType' }",arg:"formField"}]},[t("FormLabel",{attrs:{optional:""}},[e._v(" "+e._s("Offer type")+" ")]),t("FormContent",[t("DiscountTypeControl",{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.click",arg:"submissionFieldSelected",modifiers:{click:!0}}],staticClass:"width--all-12",attrs:{"selected-value":e.thread.discountType},on:{"update:selectedValue":function(t){return e.$set(e.thread,"discountType",t)},"update:selected-value":function(t){return e.$set(e.thread,"discountType",t)}}}),e.thread.discountType===e.discountType.freeShipping?t("FormInfo",{staticClass:"hide--fromW2"},[e._v(" "+e._s("Free shipping")+" ")]):e._e()],1)],1):e._e(),e.features.discount&&e.thread.discountType===e.discountType.price?t("FormRow",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"price"},expression:"{ name: 'price' }",arg:"formField"}],attrs:{error:n.error.price}},[t("FormLabel",{attrs:{optional:""}},[e._v(" "+e._s("Discount")+" ")]),t("FormContent",[t("PriceControl",{staticClass:"width--all-6",attrs:{name:"price"},on:{update:function(t){return n.validate("price",e.thread.price)}},model:{value:e.thread.price,callback:function(t){e.$set(e.thread,"price",t)},expression:"thread.price"}}),n.messages.price&&n.messages.price.length?t("FormMessageList",{attrs:{messages:n.messages.price}}):e._e()],1)],1):e._e(),e.features.discount&&e.thread.discountType===e.discountType.percentage?t("FormRow",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"percentage"},expression:"{ name: 'percentage' }",arg:"formField"}],attrs:{error:n.error.percentage}},[t("FormLabel",{attrs:{optional:""}},[e._v(" "+e._s("Discount")+" ")]),t("FormContent",[t("div",{staticClass:"tGrid tGrid--auto width--all-6"},[t("PriceControl",{staticClass:"width--all-12",attrs:{name:"percentage",symbol:"%"},on:{update:function(t){return n.validate("percentage",e.thread.percentage)}},model:{value:e.thread.percentage,callback:function(t){e.$set(e.thread,"percentage",t)},expression:"thread.percentage"}})],1),n.messages.percentage&&n.messages.percentage.length?t("FormMessageList",{attrs:{messages:n.messages.percentage}}):e._e()],1)],1):e._e(),e.features.voucherCode?t("FormRow",{attrs:{error:n.error.voucherCode}},[t("FormLabel",{attrs:{optional:""}},[e._v(" "+e._s("Voucher Code")+" ")]),t("FormContent",[t("VoucherCodeControl",{attrs:{filter:{threadId:{ne:e.thread.threadId}},thread:e.thread},model:{value:e.thread.voucherCode,callback:function(t){e.$set(e.thread,"voucherCode",t)},expression:"thread.voucherCode"}})],1)],1):e._e(),t("FormRow",[t("FormContent",[t("FormSubtitle",{staticClass:"space--mt-2 page-divider"},[e._v(" "+e._s("Offer details")+" ")])],1)],1),t("FormRow",{attrs:{error:n.error.merchant}},[t("FormLabel",[e._v(e._s("Merchant"))]),t("FormContent",[t("MerchantSearch",{attrs:{value:e.thread.merchant},on:{update:function(t){return e.setMerchant(arguments[0],n)}}}),t("FormMessageList",{attrs:{messages:n.messages.merchant}})],1)],1),e.features.startDate?t("FormRow",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"startDate"},expression:"{ name: 'startDate' }",arg:"formField"}],attrs:{error:n.error.startDate}},[t("FormLabel",[e._v(e._s("Offer starts on"))]),t("FormContent",[t("DateSelectorControl",{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],staticClass:"width--all-12",attrs:{"date-class":"","hour-class":"","minute-class":"",name:"startDate",hours:"",minutes:""},on:{update:function(t){return n.validate("startDate",e.thread.startDate)}},model:{value:e.thread.startDate,callback:function(t){e.$set(e.thread,"startDate",t)},expression:"thread.startDate"}}),t("FormMessageList",{attrs:{messages:n.messages.startDate}})],1)],1):e._e(),e.features.endDate?t("FormRow",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"endDate"},expression:"{ name: 'endDate' }",arg:"formField"}],attrs:{error:n.error.endDate}},[t("FormLabel",[e._v(e._s("Offer expires on"))]),t("FormContent",[t("DateSelectorControl",{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],staticClass:"width--all-12",attrs:{name:"endDate","date-class":"","hour-class":"","minute-class":"",hours:"",minutes:""},on:{update:function(t){return n.validate("endDate",e.thread.endDate)}},model:{value:e.thread.endDate,callback:function(t){e.$set(e.thread,"endDate",t)},expression:"thread.endDate"}}),t("FormMessageList",{attrs:{messages:n.messages.endDate}})],1)],1):e._e(),e.isShowAdminSection?t("FormRow",[t("FormContent",[t("FormSubtitle",{staticClass:"space--mt-2 page-divider"},[e._v(" "+e._s("Staff Only")+" ")])],1)],1):e._e(),e.features.cpcLink?t("FormRow",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"cpcLink"},expression:"{ name: 'cpcLink' }",arg:"formField"}],attrs:{error:n.error.cpcLink}},[t("FormLabel",{attrs:{optional:""}},[e._v(" "+e._s("CPC Link")+" ")]),t("FormContent",[t("FormInputLabeled",{attrs:{name:"cpcLink",placeholder:"Enter a CPC link for the affliation.","input-class":""},on:{change:function(t){return n.validate("cpcLink",e.thread.cpcLink)}},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:"link"}})]},proxy:!0}],null,!0),model:{value:e.thread.cpcLink,callback:function(t){e.$set(e.thread,"cpcLink",t)},expression:"thread.cpcLink"}}),t("FormInfo",[t("span",{domProps:{innerHTML:e._s('Add variable "{CUSTOM_ID}" to your link if you want to pass click id to partner. <a target="_blank" href="https://6minutes.atlassian.net/wiki/spaces/PEP/pages/480706622/Tracking+via+CPC+link">Read more.</a>')}})]),t("FormMessageList",{attrs:{messages:n.messages.cpcLink}})],1)],1):e._e()]}},{key:"descTip",fn:function(){return[t("FormTipLabel",{attrs:{title:"Only use plain text for the offer description",descr:e.$t("1 character remaining|:count characters remaining",{replaces:{remaining:e.remaining},count:e.remaining})}})]},proxy:!0}]),model:{value:e.thread,callback:function(t){e.thread=t},expression:"thread"}},"ThreadForm",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null),L=S.exports,I=n(817);var T={components:{MerchantGenericOfferForm:L},mixins:[Object(I.a)({i18n:{layout:{}}})],computed:{type:()=>m.g}},A=Object(j.a)(T,(function(){var e=this,t=e._self._c;return t("ThreadSubmissionLayout",{directives:[{name:"track",rawName:"v-track:threadSubmission",value:{type:e.type},expression:"{ type }",arg:"threadSubmission"}],attrs:{i18n:e.translations.layout,preview:!1},scopedSlots:e._u([{key:"messages",fn:function(){return[t("PageMessages")]},proxy:!0},{key:"form",fn:function(){return[t("MerchantGenericOfferForm",{ref:"form",attrs:{id:"merchantGenericOfferSubmit",features:e.formFeatures,wysiwyg:e.formOptions.wysiwyg,messages:e.validationMessages},on:{"form-submit":e.submitForm},model:{value:e.thread,callback:function(t){e.thread=t},expression:"thread"}})]},proxy:!0},{key:"loader",fn:function(){return[t("ThreadSubmissionLoader")]},proxy:!0}])})}),[],!1,null,null,null).exports,P=n(529),F=n(77),B=n(149),E=n(812);const D=Object(B.a)("threadForm",(e=>{let{thread:t,features:n}=e;return Object(E.a)({formId:"merchantGenericOfferSubmit",threadType:m.g,thread:t||void 0,features:n||{}})}));var $=n(860),M=n(6),N=n(1);const R=e=>{let{beforeEnter:t}=e;return t((e=>e?e.features.merchantGenericOfferForm:Object(M.c)({queries:[N.R],merge:!0})({}).then((e=>e.request)).then((e=>e.features.merchantGenericOfferForm))),[])},U=e=>({baseLayout:Object(P.b)(e),features:R(e),thread:Object($.g)(e)}),q={routeData:U};var V=Object(s.defineComponent)(Object.assign({},q,{__name:"thread-submission-merchant-generic-offers",setup(e){const{baseLayout:t,thread:n,features:s}=Object(F.c)();return D((()=>({thread:n.data.value,features:s.data.value}))),{__sfc:!0,routeData:U,baseLayout:t,thread:n,features:s,TwigPortal:a.a,MerchantGenericOfferSubmission:A,BaseLayout:P.a}}})),z=Object(j.a)(V,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.BaseLayout,{attrs:{twig:"","route-data":t.baseLayout}},[e(t.TwigPortal,{attrs:{to:"#threadSubmissionFormPortal"}},[e(t.MerchantGenericOfferSubmission)],1)],1)}),[],!1,null,null,null);t.default=z.exports},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(5),a=n(4);const r=()=>({currentUser:Object(s.computed)((()=>a.a.getters["auth/me"])),isLoggedIn:Object(s.computed)((()=>a.a.getters["auth/loggedIn"]))})},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n(5),a=n(16),r=n(4);const i=(e,t)=>{let n=0;const i=Object(s.ref)(!1);return function(l){if(++n>1)return;let c;return Object(s.onUnmounted)((()=>{var t;--n>0||!i.value||(o("".concat(e,"/tearDown")),null===(t=c)||void 0===t||t(),r.a.unregisterModule(e))})),Object(a.e)(l,(s=>{if(s&&0!==n){if(i.value)return o("".concat(e,"/replace"),s);r.a.registerModule(e,t(s,(e=>c=e))),i.value=!0}})),i}};function o(e,t){e in r.a._actions&&r.a.dispatch(e,t)}},150:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var s=n(4),a=n(6),r=n(1);const i=Object(a.c)({queries:[r.T],merge:!0});var o=n(26),l=n(28);const c=Object(l.a)(),u=async function(){var e;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])return c.promise;const t=await i({}).then((e=>e.request)).then((e=>{let{settings:t,features:n}=e;return{settings:t,features:n}})),{faye:{token:n}}=t.settings,a=t.features.faye,r="live/hotukdeals".replace("/","-"),o=null===(e=s.a.getters["auth/me"])||void 0===e?void 0:e.userId,l=s.a.getters["auth/loggedIn"];return d({token:n,url:"https://faye.prod-eks.pepper.com/faye",waitToConnect:l?2e3:1e4,userId:o,env:r,isEnabled:a}),c.promise},d=async e=>{let{userId:t,env:s,token:a,url:r,isEnabled:i,waitToConnect:u}=e;const d=!Object(o.b)(navigator.userAgent);Boolean(d&&s&&i&&a&&r)&&(await Object(l.d)(u),n.e(166).then(n.t.bind(null,1224,7)).then((e=>{const n=new e.Client(r);n.env=s,t&&(n.userId=t,n.addExtension({outgoing:(e,n)=>{"/meta/subscribe"===e.channel&&(e.ext=e.ext||{},e.ext.token=a,e.ext.userId=t),n(e)}})),c.resolve({client:n})})))},p=(e,t)=>({channel:e,keepAlive:t,handle:void 0,userId:void 0,timeout:void 0,async open(e){if(this.isOpen())return;const{client:t}=await c.promise;this.handle=e,this.userId=t.userId,t.subscribe("/".concat(this.channel,"/").concat(t.env),this.handle),this.keepAlive&&(this.timeout=setTimeout(this.close.bind(this),this.keepAlive))},async close(){if(!this.isOpen())return;const{client:e}=await c.promise;this.userId=void 0,this.handle=void 0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),e.unsubscribe("/".concat(this.channel,"/").concat(e.env),this.handle)},isOpen(){return void 0!==this.handle}})},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var s=n(4),a=n(42),r=n(150),i=n(154),o=n(92);const l=()=>{s.a.dispatch("auth/tearDown"),sessionStorage.removeItem(a.a)},c=async()=>{try{await Object(a.c)(),l(),location.href="/",localStorage.removeItem(i.a),Object(o.a)()}catch(e){}},u=async()=>{const{client:e}=await Object(r.b)();e.userId&&e.subscribe("/private/user/".concat(e.env,"/").concat(e.userId,"/updates"),(e=>{switch(e.notificationType){case"unseenConversationCount":s.a.commit("auth/UPDATE_CONVERSATION_COUNTS",{unseen:e.unseenConversationCount});break;case"newActivitiesCount":s.a.commit("auth/UPDATE_NOTIFICATION_COUNTS",{new:e.newActivitiesCount})}}))}},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var s=n(5),a=n(24),r=n(149);function i(e){return{allowFunctionalityCookies:null==e?void 0:e.allowFunctionalityCookies,cookieMessage:null==e?void 0:e.cookieMessage,allowTracking:null==e?void 0:e.allowTracking,allowPersonalization:null==e?void 0:e.allowPersonalization,gaCookiesAsAnalytical:null==e?void 0:e.gaCookiesAsAnalytical}}const o={settings:e=>{let{allowFunctionalityCookies:t,allowTracking:n,allowPersonalization:s}=e;return{allowFunctionalityCookies:t,allowTracking:n,allowPersonalization:s}},isAllAccepted:e=>{let{allowFunctionalityCookies:t,allowTracking:n,allowPersonalization:s}=e;return t&&n&&s},cookieMessage:e=>{let{cookieMessage:t}=e;return t}},l={setAll(e,t){let{commit:n,getters:s}=e;const a=s.settings;return n("MERGE",Object.fromEntries(Object.keys(a).map((e=>[e,t]))))},set(e,t){let{commit:n}=e;return n("MERGE",t)},replace(e,t){let{commit:n}=e;return n("REPLACE",t)}},c={MERGE(e,t){Object.assign(e,t)},REPLACE(e,t){Object.assign(e,i(t))}};const u=Object(r.a)("cookiePolicy",(e=>({namespaced:!0,state:i(e),mutations:c,actions:l,getters:o})));function d(e){const{cookieMessage:t}=e.value,n=Object(s.computed)((()=>t&&!a.b));return u(e),{showCookiesMessage:n}}},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var s=n(5),a=n(148);const r="hide_latest_news_widget",i=e=>{const{isLoggedIn:t}=Object(a.a)(),n=Object(s.computed)((()=>{var t,n;return null===(t=e.value)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.displayedForGuests})),r=Object(s.computed)((()=>{var t;return(null==e||null===(t=e.value)||void 0===t?void 0:t.items.map(((e,t)=>Object.assign({index:t+1},e))))||[]}));return{showWidget:Object(s.computed)((()=>{var e;return!(null===(e=r.value)||void 0===e||!e.length)&&(!n.value||!t.value)})),news:r}}},242:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return l}));const s=e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()},a=(e,t,n)=>{new IntersectionObserver(((e,n)=>{e.forEach((e=>{e.isIntersecting&&(n.unobserve(e.target),t(e.target))}))}),n).observe(e)},r=(e,t,n)=>(e.addEventListener(t,n),()=>e.removeEventListener(t,n));let i=0;function o(e){i+=e?1:-1,1===i&&document.body.classList.add("overflow--hidden"),0===i&&document.body.classList.remove("overflow--hidden")}function l(e,t){const n=document.createElement(t);for(const t of e.attributes)n.setAttributeNS(null,t.name,t.value);for(;e.firstChild;)n.appendChild(e.firstChild);return e.replaceWith(n),n}},308:function(e,t,n){var s=n(310),a=n(86),r=n(180),i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):i.test(e)?NaN:+e}},309:function(e,t,n){var s=n(78);e.exports=function(){return s.Date.now()}},310:function(e,t,n){var s=n(311),a=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(a,""):e}},311:function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},313:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var s=n(0),a=n.n(s),r=(n(317),n(318),n(12)),i=n(2),o=n(34),l=n(46),c=n(3),u=n(104),d=n(52),p=n(7),h=n(19);const m="wysiwyg",f="."+("js-"+m),g=m+"-prepared",v=m+"-promise",b=".redactor",y={},_=[],w={get:e=>_[e]()};y.defaultParams=a.a.extend({emojiTpl:'<i class="emoji emoji--type-{{name}}" title="{{text}}" contenteditable="false"><br></i>',emojiClass:"emoji",placeholderClass:"userHtml-placeholder seal",imageTargetUrl:"ul/.js-imagePopover-url",imageTargetFile:"ul/.js-imagePopover-file",rootElementInactiveClass:"redactor--inactive",lazy:!1,focus:!1,events:"click focus",spinnerClass:"spinner--size-big",imagePlaceholderClass:"userHtml-placeholder",getButton:function(e){return c.a.findTargets(this.$element,o.a.render(this.opts.buttonTarget,{key:e}))}},r.a.config("directives/wysiwyg")),y.prepareRedactors=()=>{a()(f).each((function(){const e=a()(this);if(!e.data(g)){const t=a.a.extend({},y.defaultParams,i.a.params(m,e));t.lazy?y.getEditor(e).one(t.events,y.initRedactor.bind(null,e)):y.initRedactor(e),e.data(g,!0)}}))},y.initRedactor=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(e=e.data?e:a()(e)).data(v);if(!s){const r=a.a.Deferred(),o=y.getEditor(e);t=a.a.extend({},y.defaultParams,i.a.params(m,e),t);const c=l.a.init(o,{spinnerClass:t.spinnerClass});n.e(136).then(n.bind(null,506)).then((n=>{let{emojiConfig:s,mentions:i}=n;t=a.a.extend({},{emojiMappings:s},t);const l=h.a.rafThrottle((function(){a()(this.$editor).trigger("layer-height-dimensions")}));t.changeCallback=l,t.mentions&&(t.initCallback=i(e,t)),e.redactor(t);let u=e.data("redactor");_[t.instanceKey]=()=>e.data("redactor"),e[0].dispatchEvent(new Event("redactor-init",{bubbles:!0})),u.observe.addButton("a","link"),u.link.show=()=>null,(t.lazy||t.focus)&&(u.$editor.blur(),u.$editor.focus()),c(),o.closest(b).removeClass(t.rootElementInactiveClass),r.resolve(u)})),s=r.promise(),e.data(v,s)}return s},y.getTextarea=e=>e.closest(b).find(f),y.getEditor=e=>e.closest(b).find(".redactor-editor"),y.preserveSelection=function(e){e&&!e.isSelectionStored&&(e.selection.save(),e.isSelectionStored=!0,e.$editor.one("focusin",(function(){e.selection.restore(),e.isSelectionStored=!1})))};const k=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return n.e(137).then(n.bind(null,505)).then((n=>{let{default:i}=n;if(e||(e=w.get(r)),s.file){let n;i.insertCursorFix(e,a()(i.createPlaceholder(e))),n=e.replacer.getNewPlaceholders(e.imagify.replaceConfig.id)[0][0].prop("id"),p.a.process(d.a.sendJson({image:s.file,return_urls:[e.opts.imageFormat],attributes:{section:e.opts.imageType}},e.opts.imageUploadEndpoint).always(i.replacePlaceholder.bind(null,e,n,t)),s.trigger)}else i.insertImage(e,s.url,t)}))};i.a.add("wysiwyg-button","click",(function(e,t){var n=c.a.findTargets(e,t.target).data("redactor");n&&n[t.module][t.fn].apply(n[t.module],t.args)}),{target:".redactor/textarea",args:[]}),i.a.add("wysiwyg-popover","click",(function(e,t){y.preserveSelection(c.a.findTargets(e,t.target).data("redactor"))}),{target:".redactor/textarea"}),i.a.add("wysiwyg-link-popover","click",(function(e,t,n){var s,r=c.a.findTargets(e,t.target).data("redactor");if(r){if(r.selection.getNodes().find((e=>e.hasAttribute("data-animated-gif"))))return void n.stopImmediatePropagation();const t=u.a.escapeHtml(r.selection.getText()),i=r.utils.isCurrentOrParent("A"),o="object"==typeof r.selection.getNodes().find((e=>"IMG"===e.nodeName))||a()(r.selection.getCurrent()).find("img").length;y.preserveSelection(r),e.data("popover",a.a.extend(!0,e.data("popover"),{tplData:i?{href:(s=i.href,s.replace(location.href.replace(/#.*$/,""),"")),content:u.a.escapeHtml(i.textContent||i.innerText),showContent:!o}:{href:"",content:t,showContent:!o}}))}}),{target:".redactor/textarea"}),i.a.add("wysiwyg-link-update","submit",(function(e,t){var n,s=c.a.findTargets(e,t.target).data("redactor"),r=e.prop("href").value,i=e.prop("content"),o=!!i&&i.value;s&&r&&(e.trigger("layer-destroy"),s.$editor.focus(),o||(o=s.selection.getHtml()||s.selection.getCurrent().innerHTML||r),n=s.utils.isCurrentOrParent("A"),e.prop("unlink")?n&&(s.buffer.set(),a()(n).replaceWith(a()(n).contents())):(s.buffer.set(),n||(n=s.insert.node(document.createElement("a"))),n&&(n.href=/^https?:\/\//.test(r)?r:"https://"+r,n.innerHTML=o,n.target="_blank")),s.code.sync())}),{target:".redactor/textarea"}),i.a.add("wysiwyg-code","click",(function(e,t){var n=c.a.findTargets(e,t.target).data("redactor"),s=c.a.findTargets(e,t.textarea).val();n&&s&&(e.trigger("layer-destroy"),n.insert.htmlWithoutClean(s))}),{target:".redactor/textarea"}),i.a.add("wysiwyg-image","click change",(function(e,t){const n=c.a.findTargets(e,t.target).data("redactor"),s=c.a.findTargets(e,n.opts.imageTargetUrl).val(),r=c.a.findTargets(e,t.file)[0].files[0];if(n&&(r||s)){let i={};if(t.dataControlTargets){let n;t.dataControlTargets.forEach((function(t){n=c.a.findTargets(e,t)[0],n.checked&&(i[n.name]=n.value)}))}e.trigger("layer-destroy"),k(n,i,Object.assign({},t,{file:r,url:s,trigger:{$trigger:t.trigger?a()(t.trigger):e}}))}}),{target:".redactor/textarea",events:["click"]}),y.prepareRedactors(),i.a.add("wysiwyg","init",y.prepareRedactors),a()(document).on("wysiwyg-update",(function(){setTimeout(y.prepareRedactors,0)})),t.b=y},317:function(e,t,n){var s,a,r;r=this,s=[n(0)],void 0===(a=function(e){return r.returnExportsGlobal=function(e){"use strict";var t,n,s,a,r,i,o,l;t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(e){var t,n,s,a;return(a=o.getSelection())&&(s=0,n=!1,(t=function(e,r){var o,l,c,u,d,p;for(p=[],c=0,u=(d=r.childNodes).length;c<u&&(o=d[c],!n);c++)if(3===o.nodeType){if(s+o.length>=e){n=!0,(l=i.createRange()).setStart(o,e-s),a.removeAllRanges(),a.addRange(l);break}p.push(s+=o.length)}else p.push(t(e,o));return p})(e,this.domInputor)),this.domInputor},t.prototype.getIEPosition=function(){return this.getPosition()},t.prototype.getPosition=function(){var e,t;return t=this.getOffset(),e=this.$inputor.offset(),t.left-=e.left,t.top-=e.top,t},t.prototype.getOldIEPos=function(){var e,t;return t=i.selection.createRange(),(e=i.body.createTextRange()).moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length},t.prototype.getPos=function(){var e,t,n;return(n=this.range())?((e=n.cloneRange()).selectNodeContents(this.domInputor),e.setEnd(n.endContainer,n.endOffset),t=e.toString().length,e.detach(),t):i.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return(e=i.selection.createRange().duplicate()).moveStart("character",-1),{height:(t=e.getBoundingClientRect()).bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(t){var n,s,a,r,l;return o.getSelection&&(a=this.range())?(a.endOffset-1>0&&a.endContainer!==this.domInputor&&((n=a.cloneRange()).setStart(a.endContainer,a.endOffset-1),n.setEnd(a.endContainer,a.endOffset),s={height:(r=n.getBoundingClientRect()).height,left:r.left+r.width,top:r.top},n.detach()),s&&0!==(null!=s?s.height:void 0)||(n=a.cloneRange(),l=e(i.createTextNode("|")),n.insertNode(l[0]),n.selectNode(l[0]),s={height:(r=n.getBoundingClientRect()).height,left:r.left,top:r.top},l.remove(),n.detach())):i.selection&&(s=this.getOldIEOffset()),s&&(s.top+=e(o).scrollTop(),s.left+=e(o).scrollLeft()),s},t.prototype.range=function(){var e;if(o.getSelection)return(e=o.getSelection()).rangeCount>0?e.getRangeAt(0):null},t}(),n=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,n,s,a,r;return t=this.domInputor,s=0,(a=i.selection.createRange())&&a.parentElement()===t&&(n=t.value.replace(/\r\n/g,"\n").length,(r=t.createTextRange()).moveToBookmark(a.getBookmark()),(e=t.createTextRange()).collapse(!1),s=r.compareEndPoints("StartToEnd",e)>-1?n:-r.moveStart("character",-n)),s},t.prototype.getPos=function(){return i.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,i.selection?((n=t.createTextRange()).move("character",e),n.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t;return t=this.domInputor.createTextRange(),e||(e=this.getPos()),t.move("character",e),{left:t.boundingLeft,top:t.boundingTop,height:t.boundingHeight}},t.prototype.getOffset=function(t){var n,s,a;return n=this.$inputor,i.selection?((s=this.getIEOffset(t)).top+=e(o).scrollTop()+n.scrollTop(),s.left+=e(o).scrollLeft()+n.scrollLeft(),s):(s=n.offset(),a=this.getPosition(t),{left:s.left+a.left-n.scrollLeft(),top:s.top+a.top-n.scrollTop(),height:a.height})},t.prototype.getPosition=function(e){var t,n,a,r,i;return t=this.$inputor,a=function(e){return e=e.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(e=e.replace(/\s/g,"&nbsp;")),e},void 0===e&&(e=this.getPos()),i=t.val().slice(0,e),n=t.val().slice(e),r="<span style='position: relative; display: inline;'>"+a(i)+"</span>",r+="<span id='caret' style='position: relative; display: inline;'>|</span>",r+="<span style='position: relative; display: inline;'>"+a(n)+"</span>",new s(t).create(r).rect()},t.prototype.getIEPosition=function(e){var t,n;return n=this.getIEOffset(e),t=this.$inputor.offset(),{left:n.left-t.left,top:n.top-t.top,height:n.height}},t}(),s=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),e.each(this.css_attr,(function(e,s){return t[s]=n.$inputor.css(s)})),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return n={left:(t=(e=this.$mirror.find("#caret")).position()).left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),a={contentEditable:function(e){return!(!e[0].contentEditable||"true"!==e[0].contentEditable)}},r={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return i.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(e){return this.getOffset(e)}},i=null,o=null,l=function(e){var t;return(t=null!=e?e.iframe:void 0)?(o=t.contentWindow,i=t.contentDocument||o.document):(o=window,i=document)},e.fn.caret=function(s,i,o){var c;return r[s]?(e.isPlainObject(i)?(l(i),i=void 0):l(o),c=a.contentEditable(this)?new t(this):new n(this),r[s].apply(c,[i])):e.error("Method "+s+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=n,e.fn.caret.Utils=a,e.fn.caret.apis=r}(e)}.apply(t,s))||(e.exports=a)},318:function(e,t,n){var s,a;s=[n(0)],a=function(e){return u=[].slice,d={}.hasOwnProperty,p=function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=$(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){return this.$el=this.$inputor.parents(".redactor-box").find(".atwho-container")},e.prototype.setupRootElement=function(e,t){if(null==t&&(t=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(e){throw this.iframe=null,new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.")}}return this.createContainer((this.iframeAsRoot=t)?this.document:document)},e.prototype.controller=function(e){var t,n,s,a;if(this.aliasMaps[e])n=this.controllers[this.aliasMaps[e]];else for(s in a=this.controllers)if(t=a[s],s===e){n=t;break}return n||this.controllers[this.currentFlag]},e.prototype.setContextFor=function(e){return this.currentFlag=e,this},e.prototype.reg=function(e,t){var n,s;return n=(s=this.controllers)[e]||(s[e]=this.$inputor.is("[contentEditable]")?new r(this,e):new l(this,e)),t.alias&&(this.aliasMaps[t.alias]=e),n.init(t),this},e.prototype.listen=function(){return this.$inputor.on("compositionstart",(e=this,function(t){var n;return null!=(n=e.controller())&&n.view.hide(),e.isComposing=!0})).on("compositionend",function(e){return function(t){return e.isComposing=!1}}(this)).on("keyup.atwhoInner",function(e){return function(t){return e.onKeyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.onKeydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this)).on("blur.atwhoInner",function(e){return function(t){var n;if(n=e.controller())return n.view.hide(t,n.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(e){return function(t){return e.dispatch(t)}}(this));var e},e.prototype.shutdown=function(){var e,t;for(e in t=this.controllers)t[e].destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner"),this.$el.remove()},e.prototype.dispatch=function(e){return $.map(this.controllers,(t=this,function(n){var s;return(s=n.getOpt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout((function(){if(n.lookUp(e))return t.setContextFor(n.at)}),s)):n.lookUp(e)?t.setContextFor(n.at):void 0}));var t},e.prototype.onKeyup=function(e){var t;switch(e.keyCode){case i.ESC:e.preventDefault(),null!=(t=this.controller())&&t.view.hide();break;case i.DOWN:case i.UP:case i.CTRL:$.noop();break;case i.P:case i.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var t,n;if((t=null!=(n=this.controller())?n.view:void 0)&&t.visible())switch(e.keyCode){case i.ESC:e.preventDefault(),t.hide(e);break;case i.UP:e.preventDefault(),t.prev();break;case i.DOWN:e.preventDefault(),t.next();break;case i.P:if(!e.ctrlKey)return;e.preventDefault(),t.prev();break;case i.N:if(!e.ctrlKey)return;e.preventDefault(),t.next();break;case i.TAB:case i.ENTER:case i.SPACE:if(!t.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&e.keyCode===i.SPACE)return;e.preventDefault(),t.choose(e);break;default:$.noop()}},e}(),s=function(){function e(e,t){this.app=e,this.at=t,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=$("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=$("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new o(this),this.view=new c(this)}return e.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},e.prototype.init=function(e){return this.setting=$.extend({},this.setting||$.fn.atwho.default,e),this.view.init(),this.model.reload(this.setting.data)},e.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},e.prototype.callDefault=function(){var e,t,n;n=arguments[0],e=2<=arguments.length?u.call(arguments,1):[];try{return a[n].apply(this,e)}catch(e){return t=e,$.error(t+" Or maybe At.js doesn't have function "+n)}},e.prototype.trigger=function(e,t){var n,s;return null==t&&(t=[]),t.push(this),s=(n=this.getOpt("alias"))?e+"-"+n+".atwho":e+".atwho",this.$inputor.trigger(s,t)},e.prototype.callbacks=function(e){return this.getOpt("callbacks")[e]||a[e]},e.prototype.getOpt=function(e,t){try{return this.setting[e]}catch(e){return null}},e.prototype.insertContentFor=function(e){var t,n;return n=this.getOpt("insertTpl"),t=$.extend({},e.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,n,t)},e.prototype.renderView=function(e){var t;return t=this.getOpt("searchKey"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.getOpt("limit")))},e.arrayToDefaultHash=function(e){var t,n,s,a;if(!$.isArray(e))return e;for(a=[],n=0,s=e.length;n<s;n++)t=e[n],$.isPlainObject(t)?a.push(t):a.push({name:t});return a},e.prototype.lookUp=function(e){var t,n;if(t=this.catchQuery(e))return n=function(e){return e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide()},this.model.query(t.text,$.proxy(n,this)),t},e}(),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.catchQuery=function(){var e,t,n,s,a,r;return t=this.$inputor.val(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),r=t.slice(0,e),"string"==typeof(s=this.callbacks("matcher").call(this,this.at,r,this.getOpt("startWithSpace")))&&s.length<=this.getOpt("maxLen",20)?(n=(a=e-s.length)+s.length,this.pos=a,s={text:s,headPos:a,endPos:n},this.trigger("matched",[this.at,s.text])):(s=null,this.view.hide()),this.query=s},t.prototype.insert=function(e,t){var n,s,a,r,i;return i=""+(a=(s=(n=this.$inputor).val()).slice(0,Math.max(this.query.headPos-this.at.length,0)))+(e+=r=""===(r=this.getOpt("suffix"))?r:r||" ")+s.slice(this.query.endPos||0),n.val(i),n.caret("pos",a.length+e.length,{iframe:this.app.iframe}),n.is(":focus")||n.focus(),n.change()},t}(s),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype._getRange=function(){var e;if((e=this.app.window.getSelection()).rangeCount>0)return e.getRangeAt(0)},t.prototype._setRange=function(e,t,n){if(null==n&&(n=this._getRange()),n)return t=$(t)[0],"after"===e?(n.setEndAfter(t),n.setStartAfter(t)):(n.setEndBefore(t),n.setStartBefore(t)),n.collapse(!1),this._clearRange(n)},t.prototype._clearRange=function(e){var t;return null==e&&(e=this._getRange()),(t=this.app.window.getSelection()).removeAllRanges(),t.addRange(e)},t.prototype._movingEvent=function(e){var t;return"click"===e.type||(t=e.which)===i.RIGHT||t===i.LEFT||t===i.UP||t===i.DOWN},t.prototype._unwrap=function(e){var t;return(t=(e=$(e).unwrap().get(0)).nextSibling)&&t.nodeValue&&(e.nodeValue+=t.nodeValue,$(t).remove()),e},t.prototype.catchQuery=function(e){var t,n,s,a,r,o,l,c,u,d;if(!this.app.isComposing&&(u=this._getRange())&&u.commonAncestorContainer.nodeType===Node.TEXT_NODE){if(e.which===i.ENTER)return(n=$(u.startContainer).closest(".atwho-query")).contents().unwrap(),n.is(":empty")&&n.remove(),(n=$(".atwho-query",this.app.document)).text(n.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if($(u.startContainer).is(this.$inputor))return void this._clearRange();e.which===i.BACKSPACE&&u.startContainer.nodeType===document.ELEMENT_NODE&&(l=u.startOffset-1)>=0?((d=u.cloneRange()).setStart(u.startContainer,l),$(d.cloneContents()).contents().last().is(".atwho-inserted")&&(a=$(u.startContainer).contents().get(l),this._setRange("after",$(a).contents().last()))):e.which===i.LEFT&&u.startContainer.nodeType===document.TEXT_NODE&&(t=$(u.startContainer.previousSibling)).is(".atwho-inserted")&&0===u.startOffset&&this._setRange("after",t.contents().last())}return $(u.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(n=$(".atwho-query",this.app.document)).length>0&&n.is(":empty")&&0===n.text().length&&n.remove(),this._movingEvent(e)||n.removeClass("atwho-inserted"),(d=u.cloneRange()).setStart(u.startContainer,0),o=this.callbacks("matcher").call(this,this.at,d.toString(),this.getOpt("startWithSpace")),0===n.length&&"string"==typeof o&&(s=u.startOffset-this.at.length-o.length)>=0&&(u.setStart(u.startContainer,s),n=$("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),u.surroundContents(n.get(0)),r=n.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(u.setStart(r,r.length),u.setEnd(r,r.length),this._clearRange(u)):this._setRange("after",r,u)),"string"==typeof o&&o.length<=this.getOpt("maxLen",20)?(c={text:o,el:n},this.trigger("matched",[this.at,c.text]),this.query=c):(this.view.hide(),this.query={el:n},n.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&n.hasClass("atwho-inserted")?n.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,n)&&this._setRange("after",this._unwrap(n.text(n.text()).contents().first()))),null)}},t.prototype.insert=function(e,t){var n,s,a;return s=(s=this.getOpt("suffix"))?s:s||" ",this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(e),(n=this._getRange())&&(n.setEndAfter(this.query.el[0]),n.collapse(!1),n.insertNode(a=this.app.document.createTextNode(s)),this._setRange("after",a,n)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()},t}(s),o=function(){function e(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(e,t){var n,s,a;return n=this.fetch(),s=this.context.getOpt("searchKey"),n=this.context.callbacks("filter").call(this.context,e,n,s)||[],a=this.context.callbacks("remoteFilter"),n.length>0||!a&&0===n.length?t(n):a.call(this.context,e,t)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,e||[]))},e.prototype.load=function(e){if(!this.saved()&&e)return this._load(e)},e.prototype.reload=function(e){return this._load(e)},e.prototype._load=function(e){return"string"==typeof e?$.ajax(e,{dataType:"json"}).done((t=this,function(e){return t.save(e)})):this.save(e);var t},e}(),c=function(){function e(e){this.context=e,this.$el=$(this.context.$el).parents(".atwho-container").find(".atwho-view"),this.timeoutID=null,this.bindEvent()}return e.prototype.init=function(){var e;return e=this.context.getOpt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,t;return(e=this.$el).on("mouseenter.atwho-view","li",(function(t){return e.find(".cur").removeClass("cur"),$(t.currentTarget).addClass("cur")})).on("click.atwho-view","li",(t=this,function(n){return e.find(".cur").removeClass("cur"),$(n.currentTarget).addClass("cur"),t.choose(n),n.preventDefault()}))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(e){var t,n;if((t=this.$el.find(".cur")).length&&(n=this.context.insertContentFor(t),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,n,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0},e.prototype.next=function(){var e;return(e=this.$el.find(".cur").removeClass("cur").next()).length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var e;return(e=this.$el.find(".cur").removeClass("cur").prev()).length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){if(!this.stopShowing)return this.visible()?void 0:(this.$el.show(),this.$el.parent(".atwho-container").show(),this.context.trigger("shown"));this.stopShowing=!1},e.prototype.hide=function(e,t){var n,s;if(this.visible())return isNaN(t)?(this.$el.parent(".atwho-container").hide(),this.$el.hide(),this.context.trigger("hidden",[e])):(s=this,n=function(){return s.hide()},clearTimeout(this.timeoutID),this.timeoutID=setTimeout(n,t))},e.prototype.render=function(e){var t,n,s,a,r,i,o;if($.isArray(e)&&e.length>0){for(this.$el.empty(),n=this.$el,r=this.context.getOpt("displayTpl"),i=0,o=e.length;i<o;i++)s=e[i],s=$.extend({},s,{"atwho-at":this.context.at}),a=this.context.callbacks("tplEval").call(this.context,r,s),(t=$(this.context.callbacks("highlighter").call(this.context,a,this.context.query.text))).data("item-data",s),n.append(t);return this.show(),this.context.getOpt("highlightFirst")?n.find("li:first").addClass("cur"):void 0}this.hide()},e}(),i={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},a={beforeSave:function(e){return s.arrayToDefaultHash(e)},matcher:function(e,t,n){var s,a,r;return s="A-Za-z0-9_."+(a="\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f")+"가-하|@+-",e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),(r=new RegExp(e+"(["+s+"]*)$|"+e+"([^"+a+"]*)$","gi").exec(t))?r[2]||r[1]:null},filter:function(e,t,n){var s,a,r,i;for(i=[],a=0,r=t.length;a<r;a++)s=t[a],~new String(s[n]).toLowerCase().indexOf(e.toLowerCase())&&i.push(s);return i},remoteFilter:null,sorter:function(e,t,n){var s,a,r,i;if(!e)return t;for(i=[],a=0,r=t.length;a<r;a++)(s=t[a]).atwho_order=new String(s[n]).toLowerCase().indexOf(e.toLowerCase()),s.atwho_order>-1&&i.push(s);return i.sort((function(e,t){return e.atwho_order-t.atwho_order}))},tplEval:function(e,t){var n;n=e;try{return"string"!=typeof e&&(n=e(t)),n.replace(/\$\{([^\}]*)\}/g,(function(e,n,s){return t[n]}))}catch(e){return""}},highlighter:function(e,t){var n,s;return n="A-Za-z0-9_.\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f가-하",t?(s=new RegExp(">\\s*(["+n+"]*?)("+t.replace("+","\\+")+")(["+n+"]*?)\\s*<","ig"),e.replace(s,(function(e,t,n,s){return"> "+t+"<strong>"+n+"</strong>"+s+" <"}))):e},beforeInsert:function(e,t){return e},beforeReposition:function(e){return e},afterMatchFailed:function(e,t){}},t={load:function(e,t){var n;if(n=this.controller(e))return n.model.load(t)},isSelecting:function(){var e;return null!=(e=this.controller())?e.view.visible():void 0},hide:function(){var e;return null!=(e=this.controller())?e.view.hide():void 0},setIframe:function(e,t){return this.setupRootElement(e,t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},$.fn.atwho=function(e){var s,a;return a=arguments,s=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each((function(){var r,i;return(i=(r=$(this)).data("atwho"))||r.data("atwho",i=new n(this)),"object"!=typeof e&&e?t[e]&&i?s=t[e].apply(i,Array.prototype.slice.call(a,1)):$.error("Method "+e+" does not exist on jQuery.caret"):i.reg(e.at,e)})),s||this},void($.fn.atwho.default={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:a,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,displayTimeout:300,delay:null,spaceSelectsMatch:!1,editableAtwhoQueryAttrs:{}});var t,n,s,a,r,i,o,l,c,u,d,p}.apply(t,s),void 0===a||(e.exports=a)},508:function(e,t,n){"use strict";n.d(t,"a",(function(){return s.a})),n.d(t,"b",(function(){return u}));var s=n(511),a=n(5),r=n(512),i={__name:"notification-button",props:{count:{type:Number,default:0},square:Boolean,selected:Boolean,countTop:Boolean},setup(e){const t=e,n=Object(a.computed)((()=>({"button--square":t.square,"button--selected":t.selected})));return{__sfc:!0,props:t,buttonClasses:n,CircleLabel:r.a,BaseButton:s.a}}},o=n(45);Object(o.a)(i,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BaseButton,e._g({staticClass:"overflow--visible",class:n.buttonClasses,attrs:{variant:"secondary",mode:"default"}},e.$listeners),[e._t("default"),e.count&&e.countTop||e.count&&e.square?t(n.CircleLabel,{staticClass:"text--b button--square space--h-0 aGrid-item aGrid-item--r-n7 aGrid-item--t-n7",attrs:{size:"xs",mode:"primary"}},[e._v(" "+e._s(e.count)+" ")]):e.count?t(n.CircleLabel,{staticClass:"text--b button--square space--h-0 space--ml-2",attrs:{size:"m",mode:"primary"}},[e._v(" "+e._s(e.count)+" ")]):e._e()],2)}),[],!1,null,null,null).exports;const l={brand:"button--mode-brand",white:"button--mode-white"};var c={__name:"segmented-button",props:{mode:{type:String,default:"brand",validate:e=>e in l},name:{type:String,required:!1},selectedValue:{type:String,required:!1},mandatory:Boolean},emits:["update:selectedValue"],setup(e,t){let{emit:n}=t;const s=e,r=Object(a.computed)((()=>l[s.mode])),i=Object(a.computed)((()=>s.name===s.selectedValue));return{__sfc:!0,modes:l,emit:n,props:s,mode:r,selected:i,toggle:function(){n("update:selectedValue",i.value&&!s.mandatory?null:s.name)}}}},u=Object(o.a)(c,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("button",{staticClass:"button button--type-segmented",class:[n.mode,{"button--selected zIndex--atopNormal":n.selected}],attrs:{type:"button"},on:{click:n.toggle}},[e._t("default")],2)}),[],!1,null,null,null).exports},511:function(e,t,n){"use strict";var s=n(32),a=n.n(s),r=n(5),i=n(542),o=n(516);const l=["tag"];var c=Object(r.defineComponent)({__name:"base-button",props:{variant:{default:"none"},mode:{default:"none"},size:{default:"none"},loading:{type:Boolean},selected:{type:Boolean},square:{type:Boolean},seal:{type:Boolean},disabled:{type:Boolean},ellipsis:{type:Boolean},wrap:{type:Boolean}},emits:["click","mousedown"],setup(e,t){let{emit:n}=t;const s=e,c=Object(r.ref)(null),u=Object(r.useAttrs)(),d=Object(i.a)(u),p=Object(r.computed)((()=>{const e=d.value;return a()(e,l)})),h=Object(r.computed)((()=>i.d[s.variant])),m=Object(r.computed)((()=>Object(i.b)(s.variant,s.mode)[s.mode])),f=Object(r.computed)((()=>i.c[s.size])),g=Object(r.computed)((()=>({"button--disabled":s.disabled,"button--sealed":s.seal||s.loading,"button--square":s.square,"button--selected":s.selected,"seal--cover aGrid":s.loading&&"none"===s.variant})));return{__sfc:!0,emit:n,props:s,buttonRef:c,attrs:u,config:d,computedConfig:p,variantClasses:h,modeClasses:m,sizeClasses:f,buttonClasses:g,handleClick:function(e){s.disabled||n("click",e)},BaseSpinner:o.a}}}),u=n(45),d=Object(u.a)(c,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.config.tag,e._b({ref:"buttonRef",tag:"Component",class:[n.variantClasses,n.modeClasses,n.sizeClasses,n.buttonClasses],attrs:{disabled:e.disabled},on:{click:n.handleClick,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.handleClick.apply(null,arguments)},mousedown:function(t){return e.$emit("mousedown",t)}}},"Component",n.computedConfig,!1),[e.loading?t(n.BaseSpinner,{staticClass:"spinner--centered"}):e._e(),t("span",{staticClass:"flex--inline boxAlign-ai--all-c",class:{"mute--opacity-0":e.loading,"flex--width-calc-fix":e.ellipsis,"flex--wrap":e.wrap}},[e.ellipsis?t("span",{staticClass:"overflow--ellipsis"},[e._t("default")],2):e._t("default")],2),e._t("postfix")],2)}),[],!1,null,null,null);t.a=d.exports},512:function(e,t,n){"use strict";var s={props:{size:{type:String,required:!1,default:"m"},mode:{type:String,required:!1,default:"primary"}},computed:{sizeClasses(){return this.$options.classes.sizes[this.size]},modeClasses(){return this.$options.classes.modes[this.mode]}},classes:{sizes:{xs:"circle--xs",s:"circle--s",m:"circle--m",l:"circle--l"},modes:{alert:"bg--color-red",primary:"bg--color-brandPrimary","primary-inverted":"bg--color-white text--color-brandPrimary"}}},a=n(45),r=Object(a.a)(s,(function(){var e=this;return(0,e._self._c)("span",{class:[e.sizeClasses,e.modeClasses]},[e._t("default")],2)}),[],!1,null,null,null);t.a=r.exports},513:function(e,t,n){"use strict";var s=n(5),a=n(508),r=Object(s.defineComponent)({__name:"popover-close",setup:e=>({__sfc:!0,popover:Object(s.inject)("popover"),BaseButton:a.a})}),i=n(45),o=Object(i.a)(r,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.BaseButton,{attrs:{variant:"tertiary",mode:"default",size:"s",square:""},on:{click:t.popover.close}},[e("BaseIcon",{attrs:{name:"cross"}})],1)}),[],!1,null,null,null);t.a=o.exports},515:function(e,t,n){"use strict";var s=n(587),a=n.n(s),r=n(5),i=n(148),o=n(514);var l=n(542);var c=Object(r.defineComponent)(Object.assign({},{inheritAttrs:!1},{__name:"cloak-link",props:{to:null,target:{default:""},buttonTag:{default:"button"},cloak:{type:Boolean,default:!0},variant:{default:"none"},mode:{default:"none"}},emits:["click","mousedown"],setup(e,t){let{emit:n}=t;const s=e,c=Object(r.ref)(null),u=Object(r.useAttrs)(),d=Object(o.b)(),{isLoggedIn:p}=Object(i.a)(),{isUncloaked:h,tempTarget:m,uncloak:f,simulateClick:g}=function(e){const t=Object(r.ref)(!1),n=Object(r.ref)(!1),s=Object(r.ref)(!1),a=Object(r.ref)(""),i=()=>{n.value=!0};return Object(r.onMounted)((()=>{Object(r.watch)(e,(()=>{var t,n;(null!==(t=null===(n=e.value)||void 0===n?void 0:n.$el)&&void 0!==t?t:e.value).addEventListener("contextmenu",i)}))})),Object(r.onUnmounted)((()=>{var t,n;const s=null!==(t=null===(n=e.value)||void 0===n?void 0:n.$el)&&void 0!==t?t:e.value;s&&s.removeEventListener("contextmenu",i)})),{tempTarget:a,isUncloaked:t,uncloak:e=>{(1===e.button||e.metaKey||e.ctrlKey||e.shiftKey)&&(a.value="_blank"),t.value=!0},simulateClick:(e,t,i)=>{n.value||s.value||2===t.button||Object(r.nextTick)((()=>{e.click(),s.value=!0})),a.value=i}}}(c),v=Object(r.computed)((()=>"object"==typeof s.to)),b=Object(r.computed)((()=>s.cloak&&!p.value&&!h.value)),y=Object(r.computed)((()=>b.value?s.buttonTag:"a")),_=Object(r.computed)((()=>{const e=Object.assign({},(a()(u),u));return b.value&&"button"!==s.buttonTag&&(e.role="button"),e})),w=Object(r.computed)((()=>l.d[s.variant])),k=Object(r.computed)((()=>Object(l.b)(s.variant,s.mode)[s.mode]));return{__sfc:!0,props:s,emit:n,button:c,attrs:u,router:d,isLoggedIn:p,isUncloaked:h,tempTarget:m,uncloak:f,simulateClick:g,isRouterLink:v,isCloaked:b,component:y,buttonAttrs:_,variantClasses:w,modeClasses:k,getAttributes:function(e){return b.value?_.value:Object.assign({},_.value,{href:e,target:m.value||s.target||void 0})},handleClick:function(e,t){n("click",e),v.value&&d.push(t)},handleMousedown:e=>{n("mousedown",e),f(e)}}}})),u=n(45),d=Object(u.a)(c,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.isRouterLink?t("RouterLink",{attrs:{to:e.to,custom:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t(n.component,e._b({key:n.isUncloaked,ref:"button",tag:"Component",class:[n.variantClasses,n.modeClasses],on:{click:n.handleClick,"~mouseup":function(t){return t.preventDefault(),n.simulateClick(n.button,t,e.target)},"~mousedown":function(e){return e.preventDefault(),n.handleMousedown(e)}}},"Component",n.getAttributes(s.href),!1),[e._t("default",null,null,n.props)],2)]}}],null,!0)}):t(n.component,e._b({key:n.isUncloaked,ref:"button",tag:"Component",class:[n.variantClasses,n.modeClasses],on:{click:n.handleClick,"~mouseup":function(t){return t.preventDefault(),n.simulateClick(n.button,t,e.target)},"~mousedown":function(e){return e.preventDefault(),n.handleMousedown(e)},"~contextmenu":function(e){return n.uncloak.apply(null,arguments)}}},"Component",n.getAttributes(e.to),!1),[e._t("default")],2)}),[],!1,null,null,null);t.a=d.exports},516:function(e,t,n){"use strict";var s=n(45),a=Object(s.a)({},(function(e,t){return e("svg",{staticClass:"spinner",class:t.data.staticClass,attrs:{viewBox:"0 0 66 66"}},[e("circle",{staticClass:"spinner-background",attrs:{cx:"33",cy:"33",r:"30"}}),e("circle",{staticClass:"spinner-bar",attrs:{cx:"33",cy:"33",r:"30"}})])}),[],!0,null,null,null);t.a=a.exports},517:function(e,t,n){"use strict";var s=n(526),a=n(523),r=n(520),i=n(518),o=n(513),l=n(521);t.a={name:"popoverMixin",components:{BasePopover:a.a,PopoverHead:r.a,PopoverBody:i.a,PopoverClose:o.a,PopoverAsync:l.a},directives:{popover:s.a}}},518:function(e,t,n){"use strict";var s=n(5),a=Object(s.defineComponent)({__name:"popover-body",props:{space:{type:Boolean,default:!0}},setup:e=>({__sfc:!0})}),r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"overflow--scrollY overscroll--containY",class:{"popover-space":e.space}},[e._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},519:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));const s={model:{event:"update"},props:{name:{type:String,default:""},value:{type:[String,Number,Object],default:null},placeholder:{type:String,default:""},options:{type:Array,default:()=>[]},mode:{type:String,default:""},valueKey:{type:String,default:"value"},textKey:{type:String,default:"text"},retainValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{selectedValue:{get(){return this.value},set(e){e!==this.value&&this.$emit("update",e)}},selectedOption(){return this.options.find((e=>e[this.valueKey]===this.value))}}},a={mixins:[s],props:{value:{type:Array,default:()=>[]},separator:{type:String,default:","},open:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{expanded:this.open,filterValue:""}},computed:{filteredOptions(){return this.options.filter((e=>e[this.textKey].toLowerCase().includes(this.filterValue.toLowerCase())))}},methods:{toggleLayer(){this.disabled||(this.expanded=!this.expanded)},expandLayer(){this.expanded=!1},setFilterValue(e){this.filterValue=e}}};t.a=s},52:function(e,t,n){"use strict";var s=n(0),a=n.n(s),r={};r.legacyUpload=!(window.File&&window.FileList&&window.Blob&&window.FormData),r.inputToJson=function(e,t,n){var s,a,i=e.match(/^(\w+|\[(\w*)])(.*$)/),o=n;return i?(s=void 0===i[2]?i[1]:i[2],a=i[3],s?(o||(o={}),o[s]?r.inputToJson(a,t,o[s]):o[s]=r.inputToJson(a,t)):(o||(o=[]),o.push(r.inputToJson(a,t)))):o=t,o},r.toJson=function(e,t){var n={};return e.serializeArray().forEach((function(e){r.inputToJson(e.name,e.value,n)})),t&&(r.legacyUpload&&new Error("browser does not support file api or FormData"),e.find("input[type=file][name]").each((function(e,t){r.getFiles(a()(t)).forEach((function(e){r.inputToJson(t.name,e,n)}))}))),n},r.jsonToInputs=function(e,t,n){return t||(t=[]),a.a.each(e,(function(e,s){var i=n?n+"["+e+"]":e;s&&"object"==typeof s?r.jsonToInputs(s,t,i):t.push(a()('<input type="hidden"/>').prop("name",i).prop("value",s))})),t},r.formData=function(e){var t;return window.FormData||new Error("browser does not support FormData"),t=new window.FormData,function e(n,s){var r;return a.a.each(n,(function(n,a){r=s?s+"["+n+"]":n,!a||"object"!=typeof a||a instanceof window.File||a instanceof window.Blob?t.append(r,a):e(a,r)})),t}(e)},r.sendJson=function(e,t,n){const s=a.a.Deferred(),i=a.a.ajax(t,{type:n||"POST",xhr:function(){const e=a.a.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",(function(e){e.lengthComputable&&s.notify(e.loaded,e.total)})),e},data:"string"==typeof e?e:r.formData(e),success:s.resolve,error:s.reject,cache:!1,contentType:!1,processData:!1}),o=s.promise();return o.abort=function(){i.abort()},o},r.send=function(e,t){return"multipart/form-data"===e.attr("enctype")?r.legacyUpload?function(e){return e.submit(),a.a.Deferred().promise()}(e):r.sendJson(r.toJson(e,!0),e.attr("action"),e.attr("method")):a.a.ajax(e.attr("action"),{type:e.attr("method"),data:t?e.serialize().concat("&",a.a.param(t)):e.serialize(),beforeSend:(e,t)=>{e.requestUrl=t.url}})},r.resetFile=function(e){try{e.val(""),e.val()&&e.prop("type","text").prop("type","file")}catch(e){}return e.data("imageControlExcludes",[])},r.excludeFile=function(e,t){var n=e.data("imageControlExcludes")||[];return-1===n.indexOf(t)&&n.push(t),e.data("imageControlExcludes",n)},r.unExcludeFile=function(e,t){var n=e.data("imageControlExcludes")||[],s=n.indexOf(t);return-1!==s&&n.splice(s,1),e.data("imageControlExcludes",n)},r.getFiles=function(e){const t=e.data("imageControlExcludes"),n=[];for(let t=0;t<e[0].files.length;t+=1)n.push(e[0].files[t]);return n.filter((function(e,n){return!t||-1===t.indexOf(n)}))},r.postStatic=function(e,t){a()("<form/>").attr("method","post").attr("action",t).append(r.jsonToInputs(e)).appendTo(document.body).submit()},t.a=r},520:function(e,t,n){"use strict";var s=n(5),a=n(513),r=Object(s.defineComponent)({__name:"popover-head",props:{centerTitle:{type:Boolean,default:!1},icon:String,showClose:{type:Boolean,default:!1}},setup:e=>({__sfc:!0,popover:Object(s.inject)("popover"),PopoverClose:a.a})}),i=n(45),o=Object(i.a)(r,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("header",{staticClass:"popover-space flex boxAlign-ai--all-c"},[t("div",{staticClass:"flex boxAlign-ai--all-c",class:{"space--ml-a":e.centerTitle}},[e.icon?t("span",{staticClass:"lbox--v-1 space--r-1"},[t("BaseIcon",{attrs:{name:e.icon}})],1):e._e(),t("strong",{staticClass:"size--all-l text--b",class:{"space--mr-2":!e.centerTitle}},[e._t("default")],2)]),!n.popover.trap||e.showClose?t(n.PopoverClose,{staticClass:"space--ml-a"}):e._e()],1)}),[],!1,null,null,null);t.a=o.exports},521:function(e,t,n){"use strict";var s=n(5);const a="fallback",r="default",i="error";var o={name:"BaseSuspense",data:()=>({slot:a}),async created(){try{await this.$slots.default[0].asyncFactory(),this.slot=r,this.$emit("loaded")}catch(e){this.slot=i,this.$emit("error",e)}},render(){return this.$slots[this.slot]}},l=n(45),c=Object(l.a)(o,undefined,undefined,!1,null,null,null).exports,u=n(516),d=Object(s.defineComponent)({__name:"popover-async",props:{height:{type:String,default:"100px"}},setup:e=>({__sfc:!0,popover:Object(s.inject)("popover"),BaseSuspense:c,BaseSpinner:u.a})}),p=Object(l.a)(d,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BaseSuspense,{on:{error:function(e){return n.popover.close()}},scopedSlots:e._u([{key:"fallback",fn:function(){return[t("div",{staticClass:"flex boxAlign-center",style:{minHeight:e.height}},[e._t("fallback",(function(){return[t(n.BaseSpinner,{staticClass:"spinner--size-big"})]}))],2)]},proxy:!0}],null,!0)},[e._t("default")],2)}),[],!1,null,null,null);t.a=p.exports},522:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var s=n(10),a=n.n(s),r=n(11),i=n.n(r);let o=function(e){return e.CROP="cp",e.RESIZE="re",e.BLUR="bl",e.FIT="fi",e.FIT_BY_SIZE="fs",e.QUALITY="qt",e.FILE_TYPE="ft",e}({}),l=function(e){return e.ANIMATED_SOURCE="as",e}({});const c={[o.CROP]:"crop",[o.RESIZE]:"resize",[o.BLUR]:"blur",[o.FIT]:"fit",[o.FIT_BY_SIZE]:"fitBySize",[o.QUALITY]:"quality",[o.FILE_TYPE]:"fileType"};let u=function(){function e(t,n){if(a()(this,e),t){if("object"==typeof t){const{path:e,name:s}=t;if(!e||!s)throw Error("Invalid picsy image object");const a=t.animated?"".concat(l.ANIMATED_SOURCE,"/"):"",{name:r=s,ext:i="jpg"}=n||{},o=t.ext||i;this.path="".concat("https://images.hotukdeals.com","/").concat(e,"/").concat(s,"/").concat(a),this.file="".concat(r,".").concat(o)}else{if("string"!=typeof t)throw Error("Expected picsy image path, but received: ".concat(t));if("string"!=typeof n)throw Error("Expected picsy image file name, but received: ".concat(n));this.path=t,this.file=n}Object.freeze(this)}}return i()(e,[{key:"blur",value:function(e){return e>0&&e<=100?this.addOperation(o.BLUR,e):this}},{key:"quality",value:function(e){return e>=0&&e<=100?this.addOperation(o.QUALITY,e):this}},{key:"resize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(o.RESIZE,...t)}},{key:"fit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(o.FIT,...t)}},{key:"fitBySize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(o.FIT_BY_SIZE,...t)}},{key:"crop",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(o.CROP,...t)}},{key:"fileType",value:function(t){if(!t||!this.file)return this;const n="".concat(this.file.substr(0,this.file.lastIndexOf(".")),".").concat(t);return new e(this.path,n)}},{key:"toString",value:function(){return this.path?this.path+this.file:""}},{key:"apply",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{let[n,...s]=t;const a=c[n];return a?e[a](...s):e}),this)}},{key:"dimOperation",value:function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=Math.round(t)||"",r=Math.round(n)||"";return a||r?this.addOperation(e,"".concat(a).concat(r?"x"+r:"").concat(s?"w":"")):this}},{key:"addOperation",value:function(t,n){return this.path?new e("".concat(this.path).concat(t,"/").concat(n,"/"),this.file):this}}]),e}();const d=e=>{const t=[o.CROP,o.RESIZE,o.FIT,o.FIT_BY_SIZE];for(const[n,s,a]of e)if(t.includes(n))return{width:s,height:a};return{width:0,height:0}}},523:function(e,t,n){"use strict";var s=n(32),a=n.n(s),r=n(28),i=n(242),o=n(16),l=n(541),c=n.n(l),u=n(131),d=n.n(u),p=n(5);const h=new WeakMap;function m(e,t){let{value:n}=t;if(!n)return;const s=new MutationObserver(n);s.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),h.set(e,s)}function f(e){h.has(e)&&(h.get(e).disconnect(),h.delete(e))}p.default.directive("mutation",{inserted:m,update:function(e,t){t.value!==t.oldValue&&(f(e),m(e,t))},unbind:f});var g=n(133),v=n.n(g),b={name:"PortalProvide",props:{provide:{type:Object,required:!0}},beforeCreate(){this.$options.provide=v()(this.$options.propsData.provide,(e=>e&&e._self||e))},render(){return this.$slots.default}},y=n(45),_=Object(y.a)(b,undefined,undefined,!1,null,null,null).exports,w=n(62),k=n(0),x=n.n(k),C=n(3),O=n(551);const j=["preset"],S=Object.fromEntries(["beforeRender","initPosition","beforeEnter","enter","visible","leave"].map(((e,t)=>[e,t]))),L=e=>!e||/^\d+[a-z]*$/.test(e),I=(e,t)=>e&&/^-?\d+$/.test(e)?e+t:e;var T={name:"BasePopover",components:{PortalProvide:_},props:{preRender:{type:Boolean,default:!1},arrow:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object],default:null},contentRepos:{type:Boolean,default:!0},layerClass:{type:[String,Array,Object],default:"popover--default"},maxWidth:{type:String,validator:L,default:null},minHeight:{type:String,validator:L,default:null},minWidth:{type:String,validator:L,default:null},mobileSheet:{type:Boolean,default:!1},scrollRepos:{type:Boolean,default:!0},trap:{type:Boolean,default:!1},width:{type:String,validator:L,default:null}},data:()=>({stage:S.beforeRender,currentActivation:null,currentLayout:null,arrowPos:null}),computed:{portalKey:()=>c()("popover"),active(){return null!==this.currentActivation},layerStyles(){return this.cssLayout?null:this.currentLayout?Object.assign({position:this.currentLayout.fixed?"fixed":"absolute"},this.currentLayout.style):{position:"absolute",top:0,left:0}},contentStyles(){return{width:this.mobileSheetActive?null:I(this.width,"px"),minWidth:this.mobileSheetActive?null:I(this.minWidth,"px"),maxWidth:this.mobileSheetActive?null:I(this.maxWidth,"px"),minHeight:I(this.minHeight,"px")}},arrowStyles(){var e;return null!==(e=this.currentActivation)&&void 0!==e&&e.trigger.target&&this.arrow?this.arrowPos?{top:"".concat(this.arrowPos.top,"px"),left:"".concat(this.arrowPos.left,"px")}:{visibility:"hidden"}:null},layoutClasses(){if(!this.currentLayout)return null;const e=["popover--layout-".concat(this.currentLayout.name)];return this.currentLayout.classes&&e.push(...this.currentLayout.classes.trim().split(/ +/)),e},zIndexClass(){var e;if(this.currentLayout&&(null===(e=this.currentLayout.classes)||void 0===e||!e.includes("zIndex--")))return this.currentLayout.backdrop?"zIndex--modal":this._provided.popover?this._provided.popover.zIndexClass:this.currentLayout.fixed?"zIndex--fixed":"zIndex--popover"},visibilityClass(){return{"popover--visible":this.visible}},transition(){var e;return this.stage>S.beforeEnter&&(null===(e=this.currentLayout)||void 0===e?void 0:e.transition)||null},hiddenForTransition(){return this.stage===S.beforeEnter||this.stage===S.leave},visible(){return this.stage>S.initPosition},mobileSheetActive(){return this.mobileSheet&&this.$breakpoint.xsOnly},cssLayout(){if(!this.active)return null;const e=this.mobileSheetActive?Object.assign({},O.b,{backdrop:this.currentActivation.layouts[0].backdrop}):this.currentActivation.layouts[0];if("fixed"===e)return{name:e,backdrop:!0};if("fixed"===e.preset){const{preset:t}=e,n=a()(e,j);return n.name=t,!1!==n.backdrop&&(n.backdrop=!0),n}return null},pageScroll(){const{backdrop:e,fixed:t}=this.currentLayout||{};return!e||!this.cssLayout&&!t}},watch:{pageScroll(){Object(i.e)(!this.pageScroll)},cssLayout(e){e&&(this.currentLayout=e)}},mounted(){Object(o.d)(this)},beforeDestroy(){this.pageScroll||Object(i.e)(!1),this.close({withTransition:!1})},methods:{async activate(e){var t;let{target:n,type:s="click"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==(t=n)&&void 0!==t&&t._isVue&&(n=n.$el);const a=Object.freeze({target:n,type:s});if(this.active){if(!this.canChangeActivation(e,a))return;if(await this.close({withTransition:!1}),this.active)return}if(this.currentActivation={layouts:e,trigger:a},await Object(r.c)(),this.active&&(this.stage=S.initPosition,await this.position(),this.stage===S.initPosition)){if(this.currentLayout.transition){if(this.stage=S.beforeEnter,await this.$nextTick(),this.stage!==S.beforeEnter)return;this.stage=S.enter}else this.stage=S.visible;this.addListeners(),await this.$nextTick(),this.stage<S.enter||(this.$emit("update:active",!0),this.$emit("open"))}},beforeClose(){this.stage!==S.leave&&this.$emit("before-close")},async close(){let{withTransition:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.active&&(this.beforeClose(),e?this.stage=S.leave:(this.removeListeners(),this.currentActivation=null,this.currentLayout=null,this.arrowPos=null,await this.$nextTick(),this.active||(this.stage=S.beforeRender,this.$emit("update:active",!1),this.$emit("close"))))},updateLayouts(e){this.active&&(this.currentActivation.layouts=e,this.position())},async position(){var e;if(this.stage!==S.initPosition&&this.stage!==S.visible)return;if(this.cssLayout)return this.arrowPos=null,this.currentLayout=this.cssLayout,void await this.$nextTick();const t=this.currentActivation.trigger.target;this.layoutClasses&&this.$refs.layer.classList.remove(...this.layoutClasses),this.$refs.content.classList.remove("popover-content--expand");const n=new w.a.SmartLayout(x()(this.$refs.layer),x()(this.$refs.content),x()(t),this.currentActivation.layouts).get();if(this.$refs.content.classList.add("popover-content--expand"),this.layoutClasses&&this.$refs.layer.classList.add(...this.layoutClasses),!n.rect.isValid())return this.close({withTransition:!1});const s={name:n.name,classes:n.classes,transition:n.transition,fixed:n.fixed,backdrop:n.backdrop,style:{}};if(C.a.applyRect(s,n.rect,s.fixed),this.contentRepos||delete s.style.height,d()(this.currentLayout,s))return;const a=s.name!==(null===(e=this.currentLayout)||void 0===e?void 0:e.name);this.currentLayout=s,a&&(this.arrowPos=null,await this.$nextTick(),!this.active)||t&&(this.arrowPos=w.a.arrowPos(n,C.a.rect(t),C.a.rect(this.$refs.arrow)))},onScroll(e){Object(o.b)(e.target,this.$refs.layer)||this.position()},canChangeActivation(e,t){let{target:n=null,type:s=null}=t;return!d()(e,this.currentActivation.layouts)||n!==this.currentActivation.trigger.target||"mouseenter"===this.currentActivation.trigger.type&&"mouseenter"!==s},afterEnterTransition(){this.stage===S.enter&&(this.stage=S.visible,this.position())},afterLeaveTransition(){this.stage===S.leave&&this.close({withTransition:!1})},addListeners(){if(window.addEventListener("resize",this.position),this.scrollRepos&&window.addEventListener("scroll",this.onScroll,!0),!this.trap){document.addEventListener("keyup",this.handleEsc);const e=A[this.currentActivation.trigger.type];e&&(this.stop=e(this))}x()(this.$refs.layer).on("layer-destroy",this.close)},removeListeners(){window.removeEventListener("resize",this.position),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("keyup",this.handleEsc),this.stop&&(this.stop(),this.stop=null),x()(this.$refs.layer).off("layer-destroy",this.close)},handleEsc(e){27===e.keyCode&&this.close()}}};const A={click:e=>Object(i.a)(document,"click",(t=>{var n,s;if(!t.target.isConnected)return;const a=null===(n=(s=t.target).closest)||void 0===n?void 0:n.call(s,".popover-portal>*");if(a){var r,i;if(a!==(null===(r=(i=e.$el).closest)||void 0===r?void 0:r.call(i,".popover-portal>*")))return}e.close()})),mouseenter:e=>Object(i.a)(e.currentActivation.trigger.target,"mouseleave",(()=>{e.close()})),focus:e=>Object(i.a)(e.currentActivation.trigger.target,"blur",(()=>{e.close()}))};var P=T,F=Object(y.a)(P,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"popover-origin"},[e.preRender||e.active?t("Portal",{attrs:{to:"popover",slim:"",disabled:!e.active}},[t("div",{key:e.portalKey},[t("Transition",{attrs:{"enter-active-class":"animation--fadeIn","leave-active-class":"animation--fadeOut",appear:""}},[e.currentLayout&&e.currentLayout.backdrop&&!e.hiddenForTransition?t("div",{staticClass:"popover-cover",class:e.zIndexClass,on:{click:function(t){!e.trap&&e.close()}}}):e._e()]),t("Transition",e._b({on:{"after-enter":e.afterEnterTransition,"after-leave":e.afterLeaveTransition}},"Transition",e.transition,!1),[t("section",{directives:[{name:"show",rawName:"v-show",value:!e.hiddenForTransition,expression:"!hiddenForTransition"}],ref:"layer",staticClass:"popover",class:[e.layerClass,e.zIndexClass,e.layoutClasses,e.visibilityClass],style:e.layerStyles,attrs:{role:"dialog"}},[t("div",{ref:"content",staticClass:"popover-content flex--inline",class:e.contentClass,style:e.contentStyles},[t("PortalProvide",{attrs:{provide:{popover:this}}},[t("div",{directives:[{name:"mutation",rawName:"v-mutation",value:e.contentRepos?e.position:null,expression:"contentRepos ? position : null"}],staticClass:"flex flex--dir-col height--min-100 width--all-12"},[e._t("default",null,null,this)],2)])],1),e.arrowStyles?t("span",{ref:"arrow",staticClass:"popover-arrow",style:e.arrowStyles}):e._e()])])],1)]):e._e()],1)}),[],!1,null,null,null);t.a=F.exports},524:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var s=n(4),a=n(64);const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a,r=0;return{beforeCreate(){++r>1||(s.a.registerModule(e,t.create.call(this,n.get())),t.update&&n.sub(t.update))},destroyed(){if(--r>0)return;t.update&&n.unsub(t.update),t.destroy&&t.destroy();const a="".concat(e,"/tearDown");a in s.a._actions&&s.a.dispatch(a),s.a.unregisterModule(e)}}},i=(e,t)=>r(e,{create:n=>{if(!(e in n))throw Error("Missing initial state for: ".concat(e));return t(n[e])},update:t=>{const n="".concat(e,"/replace");e in t&&n in s.a._actions&&s.a.dispatch(n,t[e])}})},525:function(e,t,n){"use strict";var s=n(45),a=Object(s.a)({},(function(e,t){return e("footer",{staticClass:"popover-space flex boxAlign-ai--all-c",class:[t.data.staticClass,t.data.class]},[t._t("default")],2)}),[],!0,null,null,null);t.a=a.exports},526:function(e,t,n){"use strict";var s=n(32),a=n.n(s),r=n(242),i=n(534);const o=["focus","hover","click","fixed"],l=!0;function c(e,t,n){const{arg:s,modifiers:{focus:i,hover:c,click:p=!i&&!c,fixed:h},value:m}=t,f=a()(t.modifiers,o),g=!Array.isArray(m),v=t=>{if(g&&null!=m&&m.disabled)return;const a=(g?null==m?void 0:m.layouts:m)||Object.keys(f).map((e=>({preset:e,fixed:h})));if(!(l||null!=a&&a.length))throw Error("Missing layout for v-popover");return u(e,n.context,s).activate(a,{type:t.type,target:t.currentTarget})},b=[];if(p&&b.push(Object(r.a)(e,"click",v)),i&&b.push(Object(r.a)(e,"focus",v)),c&&b.push(Object(r.a)(e,"mouseenter",v)),!l&&p&&i)throw Error("Invalid v-popover event modifiers: there should be no reason to combine click & focus");d.set(e,b)}const u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===n){const t=e.querySelector(".popover-origin");if(!l&&!t&&!s)throw Error("Couldn't find nested popover inside v-popover trigger");return null==t?void 0:t.__vue__}let a=t.$refs[n];if(Array.isArray(a)&&(a=a[0]),!l&&!a&&!s)throw Error("Invalid v-popover name: ".concat(n,", please verify ref"));for(;a&&a.$options.name!==i.a.name;)a=a.$children[0];if(!l&&!a&&!s)throw Error("Component linked via v-popover is not a popover: ".concat(n));return a},d=new WeakMap;t.a={bind:c,update:function(e,t,n){const{arg:s,value:a,oldValue:r}=t,i=Array.isArray(a)?a:null==a?void 0:a.layouts;if(i===(Array.isArray(r)?r:null==r?void 0:r.layouts))return;d.get(e).forEach((e=>e())),c(e,t,n);const o=u(e,n.context,s);o.active&&o.currentActivation.trigger.target===e&&o.updateLayouts(i)},unbind:function(e,t,n){let{arg:s}=t;d.get(e).forEach((e=>e()));const a=u(e,n.context,s,!0);a&&a.active&&a.currentActivation.trigger.target===e&&a.close()}}},527:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(634),a=n.n(s),r=n(637),i=n.n(r),o=n(41);const l=["uuid","userId"],c={set(e){return Object.assign(this.payload,e),this},record(e,t){if(this.enabled){const n=this.sanitizePayload(Object.assign({},this.payload,e));this.track(this.validPayload(n),t)}},validPayload(e){return i()(e,this.whiteList)},sanitizePayload:e=>Object(o.b)()?e:a()(e,l)},u=Object.assign(Object.create(c),{enabled:!0,whiteList:["category","action","label","value"],track(e,t){const n=t&&t.nonInteraction;window.gtag&&e.category&&e.action&&window.gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value,non_interaction:n?1:0})}}),d=()=>Object.assign(Object.create(u),{payload:{}})},529:function(e,t,n){"use strict";n.d(t,"a",(function(){return Kt})),n.d(t,"b",(function(){return pn}));var s=n(5),a=n(4),r=n(16);var i=n(119),o=n(514),l=n(21),c=n(569),u=n(100);function d(e){Object(u.f)(null==e?void 0:e.name)||Object(c.a)()}var p=n(150),h=n(152),m=n(41),f=n(118);const g=e=>{Object(r.e)(e,(e=>{if(null==e||!e.enabled||!Object(m.b)())return;const t=Object(m.d)(),n=e.token,s="nps-pepper-com-js";if(document.getElementById(s)||!n||!t)return;let r="?account_token=".concat(n,"&uuid=").concat(t,"&v=2");const i=a.a.getters["auth/me"];if(i)localStorage.setItem("nps_a_u","yes"),r+="&user_id=".concat(i.userId,"&user_email=").concat((e=>{const t=Object(f.c)(2).charAt(0);return btoa("".concat(t).concat(btoa(e)))})(i.email),"&created_at=").concat(i.createdAt);else{if("yes"===localStorage.getItem("nps_a_u"))return;const e=localStorage.getItem("nps_f_v");if(e)r+="&first_visit=".concat(e);else{const e=Date.now().toString();localStorage.setItem("nps_f_v",e),r+="&first_visit=".concat(e)}}const o=document.getElementsByTagName("script")[0],l=document.createElement("script");l.id=s,l.defer=!0,l.src=encodeURI("https://nps.pepper.com/nps.js".concat(r)),o.parentNode.insertBefore(l,o)}))};var v=n(540),b=n(588),y=n(563),_=n(32),w=n.n(_),k=n(6),x=n(1);const C=["suggestions"],O=async e=>{const{suggestions:t}=await Object(k.a)({req:x.Tc,params:{query:e,suggestionsLimit:5,vouchersLimit:3,dealsLimit:3,usersLimit:3}});return(e=>{let{suggestions:t}=e,n=w()(e,C);const s=t.map((e=>"event"in e?e.event:e));return Object.assign({suggestions:s},n)})(t)};var j=n(604),S=n(562),L=n(535),I=n(547),T=Object(s.defineComponent)({__name:"site-search-history",props:{history:null},setup:e=>({__sfc:!0,getHistoryItemComponent:L.c,SearchHistoryTrigger:I.a})}),A=n(45),P=Object(A.a)(T,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return e.history.length?t("div",[t("div",{staticClass:"flex width--all-12"},[t("h3",{staticClass:"space--t-3 size--all-s space--b-2 space--l-3 text--color-charcoalTint text--b"},[e._v(" "+e._s("Recent searches")+" ")])]),t("ul",e._l(e.history,(function(e){return t("li",{key:e.id},[t(n.SearchHistoryTrigger,{attrs:{item:e}},[t(n.getHistoryItemComponent(e),{tag:"Component",attrs:{item:e}})],1)],1)})),0)]):e._e()}),[],!1,null,null,null).exports,F=n(536),B=n(92),E=Object(s.defineComponent)({__name:"site-search",setup(e){const{SEARCH_BLOCKS:t,getComponentByType:n,getType:a,getTitleByType:r,updateSeeMoreLinks:i,seeMoreLinks:o}=Object(F.b)(),l=Object(s.ref)(null),c=Object(s.ref)(!1),u=Object(s.computed)((()=>Boolean(B.d.value.length))),d=Object(s.ref)(!1),p=Object(s.ref)(!1),h=Object(s.ref)(!1),m=Object(s.computed)((()=>h.value||p.value)),f=Object(s.computed)((()=>c.value?u.value:d.value?!d.value:void 0)),g=async e=>{if(!e||e.length<2)return c.value=!0,{[t.POPULAR_SEARCH]:l.value};const{deals:n,vouchers:s,users:a,suggestions:r,destinations:o}=await O(e);return i(o),c.value=!1,d.value=Boolean(r.length&&a.length&&!n.length&&!s.length),{[t.SUGGESTIONS]:r,[t.TOP_VOUCHERS]:s,[t.TOP_DEALS]:n,[t.USERS]:a}},v=e=>t=>({keyword:t,type:e}),b=e=>{const t=Object.entries(e).filter((e=>e[1].length));return[].concat(...t.map((e=>{let[t,n]=e;return n.map(v(t))})))};return{__sfc:!0,SEARCH_BLOCKS:t,getComponentByType:n,getType:a,getTitleByType:r,updateSeeMoreLinks:i,seeMoreLinks:o,defaultSuggestions:l,showHistory:c,historyNotEmpty:u,hasOnlySuggestionsAndUsers:d,isDropdownOpened:p,isFocused:h,isSearchActive:m,showDivider:f,fetchSuggestions:g,addKeywordType:v,mergeKeywordTypes:b,getSuggestions:async e=>{try{l.value||(l.value=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const{groups:t}=await Object(k.a)({req:x.Rc,params:{mostSearchable:!0,limit:e},options:{queryCache:60}});return t}());const t=await g(e);return b(t)}catch(e){return[]}},handleSearch:e=>{const t=new FormData(e.target).get("q");Object(B.c)({route:{name:"search",query:{q:t}},title:t,label:L.b.ALL_RESULTS})},AutoSuggestGroupResult:j.a,AutoSuggest:S.a,SearchHistory:P,SearchHistoryTrigger:I.a,searchHistory:B.d}}}),D=E,$=Object(A.a)(D,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("form",{directives:[{name:"track",rawName:"v-track:siteSearch",arg:"siteSearch"}],staticClass:"search aGrid box--all-i vAlign--all-m width--all-12 hAlign--all-l",class:{"search--active":n.isSearchActive&&e.$breakpoint.mdAndUp},attrs:{action:e.$router.resolve({name:"search"}).href,method:"get"},on:{submit:n.handleSearch}},[t(n.AutoSuggest,e._g(e._b({attrs:{placeholder:"Search brands, products etc.",items:n.getSuggestions,"item-value":"keyword",height:"90vh","no-filter":"",clearable:"",name:"q","load-suggestions-on-focus":"","input-classes":"input--search"},on:{focus:function(e){n.isFocused=!0},blur:function(e){n.isFocused=!1},"show-results":function(e){n.isDropdownOpened=e}},scopedSlots:e._u([{key:"suggestions",fn:function({suggestions:s,highlighted:a,select:r}){return[n.showHistory&&n.historyNotEmpty?t(n.SearchHistory,{attrs:{history:n.searchHistory}}):e._e(),t(n.AutoSuggestGroupResult,{attrs:{"get-group":n.getType,"get-title":n.getTitleByType,suggestions:s,highlighted:a,highlight:()=>{},select:r,"show-divider":n.showDivider},scopedSlots:e._u([{key:"search-results-group-see-more-btn",fn:function({groupKey:s}){return[n.seeMoreLinks[s]?t(n.SearchHistoryTrigger,{attrs:{item:n.seeMoreLinks[s]}},[t("RouterLink",{attrs:{to:n.seeMoreLinks[s].route}},[e._v(" "+e._s("See more")+" ")])],1):e._e()]}},{key:"default",fn:function({suggestion:s,isHighlighted:a}){return[n.getComponentByType(s.original.type)?t(n.getComponentByType(s.original.type),{tag:"Component",attrs:{suggestion:s,"is-highlighted":a}}):e._e()]}}],null,!0)})]}}])},"AutoSuggest",e.$attrs,!1),e.$listeners))],1)}),[],!1,null,null,null).exports,M=Object(s.defineComponent)({__name:"site-navigation-menu-home-link",props:{homeLink:String},setup:e=>({__sfc:!0})}),N=Object(A.a)(M,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("RouterLink",{directives:[{name:"track",rawName:"v-track:homeLink.click",arg:"homeLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 lbox--v-4",attrs:{"active-class":"navMenu-link--selected button--selected",rel:"home",to:e.homeLink}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:"home"}})],1),e._v(" "+e._s("All")+" / "),t("span",{staticClass:"navMenu-link--lighter"},[e._v(e._s("All deals"))])])}),[],!1,null,null,null).exports,R={props:{isNew:{type:Boolean},icon:{type:String},url:{type:String,required:!0},label:{type:String,required:!0}}},U=Object(A.a)(R,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"flex flex--dir-column"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:mainLink.click",value:{label:e.label,url:e.url},expression:"{ label, url }",arg:"mainLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 space--mt-1",attrs:{"active-class":"navMenu-link--selected button--selected",to:e.url}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:e.icon}})],1),e._v(" "+e._s(e.label)+" "),e.isNew?t("span",{staticClass:"space--ml-2 textBadge textBadge--primary"},[e._v(e._s("New"))]):e._e()])],1)}),[],!1,null,null,null).exports,q=n(515),V=Object(s.defineComponent)({__name:"site-navigation-menu-item-external",props:{url:null,label:null,icon:null,isNew:{type:Boolean,default:!1},showExternalIcon:{type:Boolean,default:!0},cloak:{type:Boolean,default:!1}},setup:e=>({__sfc:!0,CloakLink:q.a})}),z=Object(A.a)(V,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"flex flex--dir-column"},[t(e._self._setupProxy.CloakLink,{directives:[{name:"track",rawName:"v-track:mainLink.click",value:{label:e.label,url:e.url},expression:"{ label, url }",arg:"mainLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 space--mt-1",attrs:{rel:"nofollow noopener",to:e.url,cloak:e.cloak,target:"_blank"}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:e.icon}})],1),e._v(" "+e._s(e.label)+" "),e.isNew?t("span",{staticClass:"space--ml-2 textBadge textBadge--primary"},[e._v(e._s("New"))]):e._e(),e.showExternalIcon?t("BaseIcon",{staticClass:"space--ml-1",attrs:{name:"external"}}):e._e()],1)],1)}),[],!1,null,null,null).exports,H=n(51);const G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{url:n,key:s}=e,a=t.find((e=>e.page===n));return null!=a&&a.sorting?"custom::home"===s?"/"===n?n+a.sorting:n:"".concat(n,"-").concat(a.sorting):n};function W(e){return{["/".concat(H.l)]:!0}[null==e?void 0:e.url]}function K(e){return{["/".concat(H.h)]:!0}[null==e?void 0:e.url]}function Q(e){return e.url==="/".concat(H.l)}function Y(e){return"custom::home"===(null==e?void 0:e.key)}function J(){const e={merchants:{name:"merchant.list",label:"All merchants"},vouchers:{name:"vouchers",label:"Vouchers"},groups:{name:"groups.overview",label:"All categories"},guides:{name:"guides.listing",label:"Buyer’s guides"},discussions:{name:"discussions",label:"Discussions"},magazine:{name:"magazine",label:"Magazine"}};return e.vouchers={name:"vouchers",label:"Voucher Codes"},e}var Z=Object(s.defineComponent)({__name:"site-navigation-menu-groups",props:{groups:null,userPreferences:null},setup(e){const t=e,n=Object(o.b)();return{__sfc:!0,props:t,router:n,goToGroup:function(e){const{href:s}=n.resolve({name:"threads.index.group",params:{slug:e}});return G({url:s},t.userPreferences)}}}}),X=Object(A.a)(Z,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("ul",{staticClass:"navMenu-list size--all-m"},e._l(e.groups,(function(s){return t("li",{key:s.threadGroupId,staticClass:"iGrid-item width--all-6"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:groupLink.click",value:{id:s.threadGroupId},expression:"{ id: group.threadGroupId }",arg:"groupLink",modifiers:{click:!0}}],staticClass:"button button--type-text button--mode-white space--v-2 boxAlign-jc--all-fs width--all-12 space--r-1",attrs:{"active-class":"button--selected",to:n.goToGroup(s.threadGroupUrlName)}},[t("span",{staticClass:"overflow--ellipsis"},[e._v(e._s(s.threadGroupName))])])],1)})),0)}),[],!1,null,null,null).exports,ee=n(508),te=n(600),ne=Object(s.defineComponent)({__name:"site-navigation-menu-content",props:{mainLinks:{default:()=>[]},eventLinks:{default:()=>[]},merchantLinks:{default:()=>[]},threadGroups:{default:()=>[]},isMascotcardsExplanationEnabled:{type:Boolean},enableSnow:{type:Boolean},hideVoucherCodesSection:{type:Boolean},userPreferences:null},setup(e){const t=e,a=Object(s.defineAsyncComponent)((()=>n.e(145).then(n.bind(null,1357)))),r=Object(o.a)(),i=Object(o.b)(),{isMagazineEnabled:c,magazineUrl:u}=Object(te.a)(),d=!0,p="https://surveys.hotukdeals.com/",h=J(),m=Object(s.computed)((()=>t.mainLinks.filter((e=>!K(e)&&!W(e)&&!Q(e))))),f=Object(s.computed)((()=>t.mainLinks.filter((e=>K(e))))),g=Object(s.computed)((()=>m.value.length>0||c||!1)),v=Object(s.computed)((()=>!t.hideVoucherCodesSection&&t.merchantLinks.length>0)),b=Object(s.computed)((()=>t.eventLinks.length>0||t.isMascotcardsExplanationEnabled)),y=Object(s.computed)((()=>f.value.length>0||t.enableSnow||!0)),_=Object(s.computed)((()=>r.path===w.value?"navMenu-link--selected":"")),w=Object(s.computed)((()=>i.resolve({name:"mascotcards.index"}).href)),k=Object(s.computed)((()=>t.threadGroups.filter((e=>![30].includes(parseInt(e.threadGroupId)))))),x=Object(s.computed)((()=>Object.assign({},h.vouchers,{icon:"scissors"})));return{__sfc:!0,FunLetItSnowButton:a,props:t,route:r,router:i,isMagazineEnabled:c,magazineUrl:u,isWhiteLabelEnabled:d,isHomeLinkVisible:!0,surveysUrl:p,staticMainLinks:h,visibleMainLinks:m,bottomSectionLinks:f,shouldShowMainLinksSection:g,shouldShowMerchantsSection:v,shouldShowEventsSection:b,shouldShowBottomSection:y,mascotcardsLinkClass:_,mascotcardsPath:w,visibleThreadGroups:k,merchantsMainLinkConfig:x,isEventRoute:function(e){const{href:t}=i.resolve({name:"event.index",params:{pathMatch:e}});return Object(l.b)(r,t)},SiteNavigationMenuHome:N,SiteNavigationMenuItem:U,SiteNavigationMenuItemExternal:z,MenuGroups:X,BaseButton:ee.a,isHomeLink:Y}}}),se=Object(A.a)(ne,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"space--t-2 space--b-3"},[t("nav",{directives:[{name:"track",rawName:"v-track:mainMenu",arg:"mainMenu"}]},[e._l(n.visibleMainLinks,(function(s){return t("span",{key:s.key},[n.isHomeLink(s)&&n.isHomeLinkVisible?t(n.SiteNavigationMenuHome,{attrs:{"home-link":s.url}}):s.isExternal?t(n.SiteNavigationMenuItemExternal,{attrs:{"is-new":s.isNew,url:s.url,label:s.label,icon:s.icon}}):n.isHomeLink(s)?e._e():t(n.SiteNavigationMenuItem,{attrs:{"is-new":s.isNew,url:s.url,label:s.label,icon:s.icon}})],1)})),t(n.SiteNavigationMenuItem,{attrs:{label:"Magazine",url:n.magazineUrl,"is-new":!0,icon:"magazine"}}),t("Portal",{attrs:{to:"surveysPortalTarget",disabled:n.surveysUrl&&!n.isWhiteLabelEnabled}},[n.surveysUrl?t(n.SiteNavigationMenuItemExternal,{attrs:{label:"Surveys",url:n.surveysUrl,"show-external-icon":!1,icon:"survey",cloak:""}}):e._e()],1),t("Portal",{attrs:{to:"eventsPortalTarget",disabled:!n.isWhiteLabelEnabled}},[n.shouldShowEventsSection?[t("strong",{staticClass:"navMenu-label",class:{"navMenu-div":n.shouldShowMainLinksSection||n.isWhiteLabelEnabled}},[t("span",{staticClass:"lbox--v-4 space--l-2"},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:"star-empty"}})],1),e._v(" "+e._s("Events")+" ")])]),t("ul",{staticClass:"navMenu-list size--all-m"},[e._l(e.eventLinks,(function(s){return t("li",{key:s.eventId},[t(n.BaseButton,{directives:[{name:"track",rawName:"v-track:eventLink.click",arg:"eventLink",modifiers:{click:!0}}],staticClass:"boxAlign-jc--all-fs width--all-12",attrs:{variant:"text",mode:"white",to:{name:"event.index",params:{pathMatch:s.urlName}},selected:n.isEventRoute(s.urlName)}},[e._v(" "+e._s(s.name)+" ")])],1)})),e.isMascotcardsExplanationEnabled?t("li",[t(n.BaseButton,{directives:[{name:"track",rawName:"v-track:promoLink.click",arg:"promoLink",modifiers:{click:!0}}],staticClass:"boxAlign-jc--all-fs width--all-12",class:n.mascotcardsLinkClass,attrs:{variant:"text",mode:"white",to:n.mascotcardsPath}},[e._v(" "+e._s("The Great Flamedeer Hunt")+" ")])],1):e._e()],2)]:e._e()],2),n.visibleThreadGroups&&n.visibleThreadGroups.length>0?[t("div",{staticClass:"navMenu-label navMenu-div"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:groupLink.click",arg:"groupLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 lbox--v-4",attrs:{to:{name:n.staticMainLinks.groups.name}}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:"group"}})],1),e._v(" "+e._s(n.staticMainLinks.groups.label)+" ")])],1),t(n.MenuGroups,{attrs:{groups:n.visibleThreadGroups,"user-preferences":e.userPreferences}})]:e._e(),n.shouldShowMerchantsSection?[t("div",{staticClass:"navMenu-label navMenu-div"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:merchantLink.click",arg:"merchantLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 lbox--v-4",attrs:{to:{name:n.merchantsMainLinkConfig.name}}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:n.merchantsMainLinkConfig.icon}})],1),e._v(" "+e._s(n.merchantsMainLinkConfig.label)+" ")])],1),t("ul",{staticClass:"navMenu-list size--all-m"},e._l(e.merchantLinks,(function(n){return t("li",{key:n.merchantId,staticClass:"iGrid-item width--all-6"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:merchantLink.click",value:{id:n.merchantId},expression:"{ id: merchant.merchantId }",arg:"merchantLink",modifiers:{click:!0}}],staticClass:"button button--type-text button--mode-white space--v-2 boxAlign-jc--all-fs width--all-12 space--r-1",attrs:{to:{name:"merchants.show",params:{merchantUrlName:n.merchantUrlName}},"active-class":"button--selected"}},[e._v(" "+e._s(n.merchantName)+" ")])],1)})),0)]:e._e(),t("PortalTarget",{attrs:{name:"eventsPortalTarget"}}),n.shouldShowBottomSection?t("div",{staticClass:"navMenu-div"},[e._l(n.bottomSectionLinks,(function(e){return t("span",{key:e.label},[e.isExternal?t(n.SiteNavigationMenuItemExternal,{attrs:{"is-new":e.isNew,url:e.url,label:e.label,icon:e.icon}}):t(n.SiteNavigationMenuItem,{attrs:{"is-new":e.isNew,url:e.url,label:e.label,icon:e.icon}})],1)})),t("PortalTarget",{attrs:{name:"surveysPortalTarget"}}),e.enableSnow?t(n.FunLetItSnowButton):e._e()],2):e._e()],2)])}),[],!1,null,null,null).exports,ae=n(91),re=n(151),ie=n(101),oe={components:{BaseButton:ee.a},mixins:[ie.a],props:{text:{type:String,default:"Register / Log in"}},created(){this.guarded.config={login:{}}},methods:{all:()=>null}},le=Object(A.a)(oe,(function(){var e=this,t=e._self._c;return t("BaseButton",{staticClass:"button--toW5-square",attrs:{variant:"primary",mode:"white"},on:{click:function(t){return t.preventDefault(),e.guard(e.all)}}},[t("BaseIcon",{attrs:{name:"person"}}),t("span",{staticClass:"hide--toW5 space--ml-2"},[e._v(e._s(e.text))])],1)}),[],!1,null,null,null).exports,ce=n(512),ue=n(26),de={components:{BaseButton:ee.a,CircleLabel:ce.a},inheritAttrs:!1,props:{icon:{type:String,default:""},count:{type:Number,default:0},active:{type:Boolean,default:!1},classes:{type:Object,default:()=>({})}},computed:{label(){return Object(ue.e)(this.count)},labelClasses(){return{[this.classes.label]:!!this.classes.label}}}},pe=Object(A.a)(de,(function(){var e=this,t=e._self._c;return t("BaseButton",e._g(e._b({staticClass:"navDropDown-trigger overflow--visible",attrs:{variant:"primary",mode:"white",square:"",selected:e.active}},"BaseButton",e.$attrs,!1),e.$listeners),[e.icon?t("BaseIcon",{attrs:{name:e.icon}}):e._e(),e.count?t("CircleLabel",{staticClass:"textBadge--notifications notification-count--fixed",class:e.labelClasses,attrs:{mode:"alert",size:"s"}},[e._v(" "+e._s(e.label)+" ")]):e._e(),e._t("default")],2)}),[],!1,null,null,null).exports,he={components:{BaseButton:ee.a},props:{icon:{type:String,default:""},title:{type:String,default:""},closeButton:{type:Boolean,default:!0}}},me=Object(A.a)(he,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-head"},[e._t("default",(function(){return[t("span",{staticClass:"lbox--v-2"},[e.icon?t("BaseIcon",{staticClass:"space--mr-2",attrs:{name:e.icon}}):e._e(),e._v(" "+e._s(e.title)+" "),e._t("counter")],2)]})),e.closeButton?e._t("close",(function(){return[t("BaseButton",{attrs:{variant:"tertiary",mode:"white",size:"s",square:""},on:{click:function(t){return e.$emit("close")}}},[t("BaseIcon",{attrs:{name:"cross"}})],1)]})):e._e()],2)}),[],!1,null,null,null).exports;var fe={components:{BaseButton:ee.a},computed:Object.assign({},Object(ae.e)("auth",{count:e=>e.conversationCounts.unread})),methods:{markAllAsRead:async()=>{a.a.commit("auth/UPDATE_CONVERSATION_COUNTS",{unread:0,unseen:0}),a.a.dispatch("recentConversations/markAllAsRead");const{markConversationsAsRead:e}=await Object(k.a)({req:x.pc,params:{all:!0}});return a.a.commit("auth/UPDATE_CONVERSATION_COUNTS",e),e}}},ge=Object(A.a)(fe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-footer flex--dir-row-reverse"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:allMsgsLink.click-ga",arg:"allMsgsLink",modifiers:{"click-ga":!0}}],attrs:{variant:"tertiary",mode:"default",square:"",to:{name:"user.conversation.index"}}},[t("BaseIcon",{attrs:{name:"mail"}})],1),e.count?t("button",{directives:[{name:"track",rawName:"v-track:markAllRead.click-ga",arg:"markAllRead",modifiers:{"click-ga":!0}}],staticClass:"clickable text--b text--color-navDropDownPrimary",attrs:{type:"button"},on:{click:e.markAllAsRead}},[t("span",{staticClass:"lbox--v-4 size--all-s"},[t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"tick"}}),e._v(" "+e._s("Mark all as read")+" ")],1)]):e._e()],1)}),[],!1,null,null,null).exports,ve=n(531),be=n(530),ye=Object(s.defineComponent)({__name:"user-conversation",props:{value:{type:Object,required:!0},selected:{type:Boolean,default:!1},source:{type:String,default:""}},setup(e){const t=e,n=Object(s.inject)("popover"),r=Object(s.computed)((()=>a.a.getters["auth/me"])),i=Object(s.computed)((()=>t.value.messages.items[0])),o=Object(s.computed)((()=>{var e;return i.value.fromUser.userId===(null===(e=r.value)||void 0===e?void 0:e.userId)})),l=Object(s.computed)((()=>o.value?i.value.toUser:i.value.fromUser)),c=Object(s.computed)((()=>"conversation-".concat(t.value.conversationId))),u=Object(s.computed)((()=>"read"===i.value.status||o.value)),d=Object(s.computed)((()=>i.value.message)),p=Object(s.computed)((()=>({"conversationList-msg--read":t.selected||u.value,"conversationList-msg--active":t.selected}))),h=Object(s.computed)((()=>i.value.timeAgo));return{__sfc:!0,popover:n,props:t,currentUser:r,mostRecentMessage:i,fromCurrentUser:o,withUser:l,id:c,showAsRead:u,messageContent:d,itemClasses:p,timeAgo:h,UserAvatarLegacy:ve.a,UserPersona:be.a}}}),_e=Object(A.a)(ye,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("li",{staticClass:"boxSec-div space--h-2 space--v-2 conversationList-msg",class:n.itemClasses,attrs:{id:n.id}},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:msg.click-ga",arg:"msg",modifiers:{"click-ga":!0}}],staticClass:"flex boxAlign-ai--all-c",attrs:{to:{name:"user.conversation.show",params:{username:n.withUser.username},query:{source:e.source}}},nativeOn:{click:function(e){return n.popover.close()}}},[t(n.UserAvatarLegacy,{staticClass:"flex--shrink-0",attrs:{size:"m",user:n.withUser,lazy:!1}}),t("div",{staticClass:"space--l-2 overflow--ellipsis size--all-s"},[t("div",{staticClass:"lbox--v-1 space--mb-n1"},[t("span",{staticClass:"user conversationList-senderLine text--b space--mr-1"},[e._v(" "+e._s(n.withUser.username)+" ")]),n.withUser.persona?t(n.UserPersona,{attrs:{user:n.withUser}}):e._e()],1),n.mostRecentMessage.subject?[t("span",{staticClass:"conversationList-subjectLine box--all-b overflow--ellipsis"},[e._v(e._s(n.mostRecentMessage.subject))])]:e._e(),t("span",{staticClass:"conversationList-msgPreview box--all-b overflow--ellipsis",domProps:{innerHTML:e._s(n.messageContent)}}),t("div",{staticClass:"mute--text"},[e._v(e._s(n.timeAgo))])],2)],1)],1)}),[],!1,null,null,null).exports,we=n(75),ke={data:()=>({asset:we.a.itemTypeA})},xe=Object(A.a)(ke,(function(){var e=this._self._c;return e("div",{staticClass:"space--h-2 space--v-2 width--all-12",style:{height:"70px"}},[e("span",{staticClass:"skeleton"},[e("img",{staticClass:"height--all-full",attrs:{src:this.asset.src}})])])}),[],!1,null,null,null).exports,Ce={computed:Object.assign({},Object(ae.e)("auth",{conversationsEnabled:(e,t)=>{var n;return!(null===(n=t.me)||void 0===n||!n.isConversationsEnabled)}}),{msg(){return this.conversationsEnabled?{title:"No Messages",body:"Looks like you have no messages yet.",footer:"Once you start a chat with another member your new messages will appear here."}:{title:"No Messages",body:"Sorry, you can't currently send private messages to other members.",footer:"Your PMs will be unlocked once you've been a little more active on hotukdeals"}}})},Oe=Object(A.a)(Ce,(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"notifications-content overscroll--containY"},[t("li",{staticClass:"flex flex--dir-col boxAlign-ai--all-c hAlign--all-c space--h-2 space--v-2 size--all-m"},[t("BaseIcon",{staticClass:"space--mt-3 space--mb-3",style:{width:"65px",height:"52px"},attrs:{name:"mail",color:"grey"}}),t("h3",{staticClass:"size--all-xxl text--b"},[e._v(e._s(e.msg.title))]),t("p",{staticClass:"size--all-s space--v-2"},[e._v(e._s(e.msg.body))]),t("p",{staticClass:"size--all-s mute--text space--b-3"},[e._v(e._s(e.msg.footer))])],1)])}),[],!1,null,null,null).exports;const je={N:"n",E:"e",S:"s",W:"w",X:"x",Y:"y"},Se=[je.E,je.X,je.W],Le=[je.S,je.Y,je.N],Ie={before:[je.N,je.Y,je.X,je.W],after:[je.S,je.Y,je.X,je.E]},Te="BEFORE",Ae="AFTER",Pe="INIT",Fe="IDLE",Be="BUSY";var Ee={inheritAttrs:!1,props:{as:{type:String,default:"div"},sentinelAs:{type:String,default:"span"},root:{type:String,default:""},direction:{type:String,default:je.S},loading:{type:Boolean,default:!1},threshold:{type:Number,default:0},margin:{type:String,default:"0px"}},data:()=>({state:Pe,observers:[]}),computed:{isIdle(){return this.state===Fe},beforeRegistered(){return this.observers.indexOf(Te)>-1},afterRegistered(){return this.observers.indexOf(Ae)>-1},directionUsesBefore(){return Ie.before.indexOf(this.direction)>-1},directionUsesAfter(){return Ie.after.indexOf(this.direction)>-1},startBefore(){return this.isIdle&&!this.beforeRegistered&&this.directionUsesBefore},startAfter(){return this.isIdle&&!this.afterRegistered&&this.directionUsesAfter},stopBefore(){return this.beforeRegistered&&!this.directionUsesBefore},stopAfter(){return this.afterRegistered&&!this.directionUsesAfter},spacingLeft(){return[je.X,je.W].indexOf(this.direction)>-1?this.margin:"0px"},spacingRight(){return[je.X,je.E].indexOf(this.direction)>-1?this.margin:"0px"},spacingTop(){return[je.N,je.Y].indexOf(this.direction)>-1?this.margin:"0px"},spacingBottom(){return[je.S,je.Y].indexOf(this.direction)>-1?this.margin:"0px"},rootMargin(){return"".concat(this.spacingTop," ").concat(this.spacingRight," ").concat(this.spacingBottom," ").concat(this.spacingLeft)},configChanged(){return!!(this.root||this.direction||this.threshold||this.rootMargin)},sentinelContainerClasses(){return{"flex flex--dir-col":Le.indexOf(this.direction)>-1,"flex--inline":Se.indexOf(this.direction)>-1}},containerClasses(){return{"flex--dir-col":Le.indexOf(this.direction)>-1}}},watch:{startBefore:"observeBefore",startAfter:"observeAfter",stopBefore:"unobserveBefore",stopAfter:"unobserveAfter",configChanged:"resetObserver",loading:function(e){e?this.setBusy():this.setIdle()}},created(){this.updateEntries=this.updateEntries.bind(this)},mounted(){this.mountObserver()},beforeDestroy(){this.unmountObserver()},methods:{setInit(){this.state!==Pe&&(this.state=Pe)},setIdle(){this.state!==Fe&&(this.state=Fe)},setBusy(){this.state!==Be&&(this.state=Be)},observeBefore(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!this.beforeRegistered&&(this.observer.observe(this.$refs.before),this.observers.push(Te))},unobserveBefore(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.beforeRegistered&&(this.observer.unobserve(this.$refs.before),this.observers.splice(this.observers.indexOf(Te),1))},observeAfter(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!this.afterRegistered&&(this.observer.observe(this.$refs.after),this.observers.push(Ae))},unobserveAfter(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.afterRegistered&&(this.observer.unobserve(this.$refs.after),this.observers.splice(this.observers.indexOf(Ae),1))},resetObserver(){this.setInit(),this.unmountObserver(),this.mountObserver()},mountObserver(){this.observer=new IntersectionObserver(this.updateEntries,{root:"window"===this.root?null:this.$el,threshold:this.threshold,rootMargin:this.rootMargin}),this.setIdle()},unmountObserver(){this.unobserveBefore(!0),this.unobserveAfter(!0),this.observer&&(this.observer.disconnect(),this.observer=null)},updateIntersecting(e){switch(e.target){case this.$refs.after:this.updateAfter();break;case this.$refs.before:this.updateBefore()}},updateAfter(){this.isIdle&&this.afterRegistered&&(this.setBusy(),this.$emit("after"))},updateBefore(){this.isIdle&&this.beforeRegistered&&(this.setBusy(),this.$emit("before"))},updateEntries(e){this.isIdle&&e.forEach((e=>{e.isIntersecting&&this.updateIntersecting(e)}))}}},De=Ee,$e=Object(A.a)(De,(function(){var e=this,t=e._self._c;return t(e.as,e._b({tag:"Component",staticClass:"flex",class:e.containerClasses},"Component",e.$attrs,!1),[e.directionUsesBefore?t(e.sentinelAs,{key:"infinite-before",tag:"Component",class:e.sentinelContainerClasses},[t("span",{ref:"before"}),e._t("before")],2):e._e(),e._t("default"),e.directionUsesAfter?t(e.sentinelAs,{key:"infinite-after",tag:"Component",class:e.sentinelContainerClasses},[e._t("after"),t("span",{ref:"after"})],2):e._e()],2)}),[],!1,null,null,null).exports,Me=n(102),Ne=e=>{let{api:t,loadingKey:n,entitiesKey:s}=e;return{components:{InfiniteScroll:$e},beforeCreate(){this.api=t()},created(){this.fetchInitial()},beforeDestroy(){this.api=null},methods:{updateCursorDirection(e){this.$store.dispatch("".concat(s,"/updateCursorDirection"),{direction:e})},updateCursor(e){this.$store.dispatch("".concat(s,"/updateCursor"),e)},shouldRefetch(){return this.$store.getters["".concat(s,"/shouldRefetch")]()},reset(){this.$store.dispatch("".concat(s,"/reset"))},isStale(){return this.$store.getters["".concat(s,"/isStale")]()},fetchBefore(){this.fetch("before")},fetchAfter(){this.fetch("after")},fetchInitial(){this.isStale()&&(this.reset(),this.fetchAfter())},async fetch(e){if(this.shouldRefetch()){this.itemsLoader.reset(),this.updateCursorDirection(e);try{const{pagination:e,items:t}=await this.itemsLoader.add(this.api(this.currentParams));t.length?this.updateCursor(e):this.updateCursor({hasMore:!1})}catch(e){}}}},computed:{itemsLoader:()=>Me.b.create(n),itemsLoading(){return this.itemsLoader.isLoading()},loadingDirection(){return this.$store.getters["".concat(s,"/direction")]},items(){return this.$store.getters["".concat(s,"/items")]},currentParams(){return this.$store.getters["".concat(s,"/currentParams")]},hasFetched(){return this.$store.getters["".concat(s,"/hasFetched")]},hasMoreBefore(){return this.$store.getters["".concat(s,"/hasMoreBefore")]},hasMoreAfter(){return this.$store.getters["".concat(s,"/hasMoreAfter")]},emptyResults(){return this.hasFetched&&this.items.length<1}}}},Re={components:{UserConversation:_e,UserConversationSkeleton:xe,UserConversationListEmpty:Oe},mixins:[Ne({api:()=>{let e;return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.cancel(),e=Object(k.b)({req:x.Gc,params:t||{}});const{conversations:n}=await e.request,[s]=a.a.getters["recentConversations/items"],[r]=n.items;return a.a.dispatch("auth/transitionToUnreadConversations",n.items),a.a.dispatch("recentConversations/markFetched"),s&&r&&s.conversationId===r.conversationId?a.a.dispatch("recentConversations/replace",n.items):a.a.dispatch("recentConversations/push",n.items),n}},loadingKey:"conversations",entitiesKey:"recentConversations"})],computed:{source(){return this.$breakpoint.mdAndUp?"menu":"tabbedMenu"}}},Ue=Re,qe=Object(A.a)(Ue,(function(){var e=this,t=e._self._c;return e.emptyResults?t("UserConversationListEmpty"):t("InfiniteScroll",{staticClass:"notifications-content overscroll--containY",attrs:{as:"ul","sentinel-as":"li",margin:"200%",loading:e.itemsLoading},on:{after:e.fetchAfter},scopedSlots:e._u([{key:"after",fn:function(){return[e.hasMoreAfter?t("UserConversationSkeleton"):e._e()]},proxy:!0}])},e._l(e.items,(function(n){return t("UserConversation",{key:n.conversationId,attrs:{value:n,source:e.source}})})),1)}),[],!1,null,null,null).exports,Ve=n(524),ze=n(532),He=n(61);var Ge=function(){return{namespaced:arguments.length>0&&void 0!==arguments[0]&&arguments[0],state:{pagination:{direction:"after",start:null,end:null,hasMoreAfter:!0,hasMoreBefore:!0},previousPagination:null},getters:{pagination:e=>e.pagination,paginationChanged:e=>e.previousPagination!==e.pagination,hasMoreBefore:e=>e.pagination.hasMoreBefore,hasMoreAfter:e=>e.pagination.hasMoreAfter,direction:e=>e.pagination.direction},actions:{updateCursorDirection(e){let{commit:t}=e,{direction:n="after"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t({type:"UPDATE_PREVIOUS_CURSOR"}),t({type:"UPDATE_CURSOR_DIRECTION",direction:n})},updateCursor(e){let{commit:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t({type:"UPDATE_PREVIOUS_CURSOR"}),t({type:"UPDATE_CURSOR",cursor:n})},resetCursor(e){let{commit:t}=e;t({type:"RESET_CURSOR"})}},mutations:{UPDATE_CURSOR_DIRECTION(e,t){let{direction:n}=t;e.pagination.direction=n},UPDATE_CURSOR(e,t){let{cursor:n={}}=t;"after"===e.pagination.direction&&void 0!==n.end&&(e.pagination.end=n.end||null),"before"===e.pagination.direction&&void 0!==n.start&&(e.pagination.start=n.start||null),"after"===e.pagination.direction&&(e.pagination.hasMoreAfter=!!n.hasMore),"before"===e.pagination.direction&&(e.pagination.hasMoreBefore=!!n.hasMore)},UPDATE_PREVIOUS_CURSOR(e){e.previousPagination=e.pagination},RESET_CURSOR(e){Object.assign(e,{pagination:{direction:"after",start:null,end:null,hasMoreAfter:!0,hasMoreBefore:!0},previousPagination:null})}}}},We=n(18);const Ke=new We.b("conversations","conversationId");const Qe=Object(Ve.b)("recentConversations",{create:()=>(e=>{const t=Object(ze.a)(Ke,e,!1);return t.actions.markAllAsRead=e=>{let{state:t,dispatch:n}=e;n("replace",t.items.map((e=>Object.assign({},e,{messages:Object.assign({},e.messages,{items:[Object.assign({},e.messages.items[0],{status:"read"}),...e.messages.items.slice(1)]})}))))},{namespaced:!0,state:{},actions:{reset(e){let{dispatch:t}=e;t("replace",[]),t("resetApi"),t("resetCursor")}},modules:{conversations:t,api:Object(He.a)({userImageSlot:"default",userImageVariations:["user_small_avatar"]},5),cursor:Ge()}}})([])});var Ye=n(517),Je={components:{CircleLabel:ce.a,UserDropdownButton:pe,UserDropdownHeader:me,UserConversationFooter:ge,UserConversationList:qe},mixins:[Ye.a,Qe],data:()=>({dropdownActive:!1}),computed:Object.assign({},Object(ae.e)("auth",{counts:e=>e.conversationCounts}),{counterCeptClass:()=>""}),methods:{closePopover(){var e;null===(e=this.$refs.popover)||void 0===e||e.close()}}},Ze=Object(A.a)(Je,(function(){var e=this,t=e._self._c;return e.$breakpoint.mdAndUp?t("div",{staticClass:"navDropDown"},[t("UserDropdownButton",{directives:[{name:"popover",rawName:"v-popover.s.fixed",modifiers:{s:!0,fixed:!0}},{name:"track",rawName:"v-track:msgDropdown.click-ga",arg:"msgDropdown",modifiers:{"click-ga":!0}}],attrs:{icon:"mail",count:e.counts.unseen,classes:{label:e.counterCeptClass},active:e.dropdownActive}},[t("BasePopover",{ref:"popover",attrs:{"layer-class":"popover--menu popover--border-navDropDownPrimary popover--arrow-navDropDownPrimary","content-class":"",width:"290",active:e.dropdownActive},on:{"update:active":function(t){e.dropdownActive=t}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("UserDropdownHeader",{attrs:{icon:"mail",title:"Messages"},on:{close:n},scopedSlots:e._u([e.counts.unread?{key:"counter",fn:function(){return[t("CircleLabel",{staticClass:"text--b space--ml-2 js-notifications-counter",attrs:{size:"s",mode:"primary-inverted"}},[e._v(" "+e._s(e.counts.unread)+" ")])]},proxy:!0}:null],null,!0)}),t("UserConversationList"),t("UserConversationFooter")]}}],null,!1,3757367711)})],1)],1):e._e()}),[],!1,null,null,null).exports;var Xe={components:{BaseButton:ee.a},computed:Object.assign({},Object(ae.e)("auth",{username:(e,t)=>{var n;return null===(n=t.me)||void 0===n?void 0:n.username},count:e=>e.notificationCounts.unread})),methods:{markAllAsRead:async()=>{a.a.commit("auth/UPDATE_NOTIFICATION_COUNTS",{unread:0,new:0}),a.a.dispatch("recentNotifications/markAllAsRead");const{markNotificationsAsRead:e}=await Object(k.a)({req:x.qc,params:{all:!0}});return a.a.commit("auth/UPDATE_NOTIFICATION_COUNTS",e),e}}},et=Object(A.a)(Xe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-footer flex--dir-row-reverse"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:profileSettingsLink.click-ga",arg:"profileSettingsLink",modifiers:{"click-ga":!0}}],attrs:{variant:"tertiary",mode:"default",square:"",to:{name:"user.profile.settings",params:{username:e.username},hash:"#notifications"}}},[t("BaseIcon",{attrs:{name:"gear"}})],1),e.count?t("button",{directives:[{name:"track",rawName:"v-track:markAllRead.click-ga",arg:"markAllRead",modifiers:{"click-ga":!0}}],staticClass:"clickable text--b text--color-navDropDownPrimary",attrs:{type:"button"},on:{click:e.markAllAsRead}},[t("span",{staticClass:"lbox--v-4 size--all-s"},[t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"tick"}}),e._v(" "+e._s("Mark all as read")+" ")],1)]):e._e()],1)}),[],!1,null,null,null).exports;const tt=Object.entries({thread:[7,9,15,36,18,23,25,35,34,38,39],user:[8,6,10,12,13,14,16,19,20,21,22,26,33,24,28,30,29,31,32,40,41],keyword:[11],badges:[17]}),nt={6:{iconName:"i:comment",type:"comment_on_subscribed_deal"},7:{iconName:"i:plus",type:"thread_voted_on"},8:{iconName:"i:comment",type:"comment_on_my_deal"},9:{iconName:"i:flame",type:"thread_went_hot"},10:{iconName:"i:thumb-up",type:"comment_liked"},11:{iconName:"i:search",type:"keyword_alert"},12:{iconName:"i:person",type:"mentioned_in_comment"},13:{iconName:"i:plus",type:"info_added_to_my_deal"},14:{iconName:"i:plus",type:"info_added_to_subscribed_deal"},15:{iconName:"i:hourglass",type:"thread_reported_as_expired"},16:{iconName:"i:comment",type:"comment_quoted"},17:{iconName:"i:plus",type:"badge_earned"},18:{iconName:"i:tag",type:"new_thread_notify_follower"},21:{iconName:"i:thumb-up",type:"additional_info_liked"},23:{iconName:"i:hourglass",type:"thread_auto_expired"},24:{iconName:"i:tag",type:"thread_is_now_live"},25:{iconName:"i:hourglass",type:"thread_has_been_expired"},26:{iconName:"i:comment",type:"comment_is_now_live"},28:{iconName:"i:trade",type:"mascotcard_request_sent"},29:{iconName:"i:cross",type:"mascotcard_request_canceled"},30:{iconName:"i:tick",type:"mascotcard_request_accepted"},31:{iconName:"i:cross",type:"mascotcard_request_declined"},32:{iconName:"i:tag",type:"additional_info_approved"},33:{iconName:"i:tag",type:"thread_merged"},34:{iconName:"i:flag",type:"thread_manually_moderated"},35:{iconName:"i:hourglass",type:"thread_has_been_expired"},36:{iconName:"i:hourglass",type:"thread_reported_as_unexpired"},38:{iconName:"i:flame",type:"thread_went_superhot"},39:{iconName:"i:hourglass",type:"thread_expiry_reminder"}},st=[24,26,32,33];var at={inject:["popover"],props:{value:{type:Object,required:!0}},computed:{activityConfig(){return nt[this.value.userActivityTypeId]||{iconName:"comment",type:"unknown"}},activitySubject(){const e=+this.value.userActivityTypeId,[t]=tt.find((t=>{let[n,s]=t;return s.some((t=>t===e))}))||["comment"];return t},activityLink(){if("new"===this.value.status||"unread"===this.value.status){const e=new URL(this.value.link,document.baseURI);return e.searchParams.set("pprmrkntfctnsrd",this.value.userActivityId),e.searchParams.set("UATypeId",this.value.userActivityTypeId),e.href}return this.value.link},activityIcon(){return this.activityConfig.iconName.replace("i:","")},activityImage(){if(this.value.imageUrl)return this.value.imageUrl;switch(this.activitySubject){case"thread":case"keyword":return"/assets/img/default-deal_d0fc9.svg";case"user":return"/assets/img/profile-placeholder_09382.png";default:return st.some((e=>e===this.value.userActivityTypeId))?"/assets/img/support-images/nerd_d9815.svg":""}},itemClasses(){return{["".concat("","-").concat(this.value.userActivityId)]:!1,["".concat("")]:!1,"notification-item--read":"read"===this.value.status||"hidden"===this.value.status}},textClasses(){return{"text--color-greyShade":"read"===this.value.status,"text--color-charcoalTint":"read"!==this.value.status}},imageFrameClasses(){return{"imgFrame bg--main":"user"!==this.activitySubject&&"comment"!==this.activitySubject}},imageClasses(){return{"avatar avatar--type-m":"user"===this.activitySubject||"comment"===this.activitySubject,"imgFrame-img":"user"!==this.activitySubject&&"comment"!==this.activitySubject,badgeImage:"badges"===this.activitySubject}}}},rt={data:()=>({asset:we.a.itemTypeA})},it={components:{UserNotification:Object(A.a)(at,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"notification-item boxSec-div",class:e.itemClasses},[t("a",{directives:[{name:"track",rawName:"v-track:notification.click-ga",value:{type:e.activityConfig.type},expression:"{ type: activityConfig.type }",arg:"notification",modifiers:{"click-ga":!0}}],staticClass:"flex width--all-12 space--h-2 space--v-2",attrs:{href:e.activityLink},on:{click:function(t){return e.popover.close()}}},[t("div",{staticClass:"notification-item-image flex--shrink-0 space--r-3"},[t("span",{class:e.imageFrameClasses},[t("img",{class:e.imageClasses,attrs:{src:e.activityImage}})])]),t("div",{staticClass:"notification-item-text size--all-s"},[t("span",{domProps:{innerHTML:e._s(e.value.text)}}),t("div",{staticClass:"flex boxAlign-ai--all-c space--mt-1",class:e.textClasses},[t("BaseIcon",{attrs:{name:e.activityIcon}}),t("span",{staticClass:"space--ml-2"},[e._v(e._s(e.value.timeAgo))])],1)])])])}),[],!1,null,null,null).exports,UserNotificationListEmpty:Object(A.a)({},(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"notifications-content overscroll--containY"},[t("li",{staticClass:"space--v-4"},[t("span",{staticClass:"hAlign--all-c notification-item-text mute--text space--t-2 box--all-b"},[e._m(0),t("div",{staticClass:"space--v-2 size--all-s"},[e._v(e._s("You have no notifications."))])])])])}),[function(){var e=this._self._c;return e("div",{staticClass:"width--all-2 box--all-i notification-supportImg"},[e("span",{staticClass:"supportImage supportImage--type-blank width--all-12"})])}],!1,null,null,null).exports,UserNotificationSkeleton:Object(A.a)(rt,(function(){var e=this._self._c;return e("div",{staticClass:"space--h-2 space--v-2 width--all-12",style:{height:"70px"}},[e("span",{staticClass:"skeleton"},[e("img",{staticClass:"height--all-full",attrs:{src:this.asset.src}})])])}),[],!1,null,null,null).exports},mixins:[Ne({api:()=>{let e;return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.cancel(),e=Object(k.b)({req:x.Hc,params:t||{}});const{notifications:n}=await e.request,[s]=a.a.getters["recentNotifications/items"],[r]=n.items;return a.a.dispatch("auth/transitionToUnreadNotifications",n),a.a.dispatch("recentNotifications/markFetched"),s&&r&&s.userActivityId===r.userActivityId?a.a.dispatch("recentNotifications/replace",n.items):a.a.dispatch("recentNotifications/push",n.items),n}},loadingKey:"notifications",entitiesKey:"recentNotifications"})],computed:{source(){return this.$breakpoint.mdAndUp?"menu":"tabbedMenu"}}},ot=it,lt=Object(A.a)(ot,(function(){var e=this,t=e._self._c;return e.emptyResults?t("UserNotificationListEmpty"):t("InfiniteScroll",{staticClass:"notifications-content overscroll--containY",attrs:{as:"ul","sentinel-as":"li",margin:"200%",loading:e.itemsLoading},on:{after:e.fetchAfter},scopedSlots:e._u([{key:"after",fn:function(){return[e.hasMoreAfter?t("UserNotificationSkeleton"):e._e()]},proxy:!0}])},e._l(e.items,(function(n){return t("UserNotification",{key:n.userActivityId,attrs:{value:n,source:e.source}})})),1)}),[],!1,null,null,null).exports;const ct=new We.b("notifications","userActivityId");const ut=Object(Ve.b)("recentNotifications",{create:()=>(e=>{const t=Object(ze.a)(ct,e,!1);return t.actions.markAllAsRead=e=>{let{state:t,dispatch:n}=e;n("replace",t.items.map((e=>Object.assign({},e,{status:"read"}))))},{namespaced:!0,state:{},actions:{reset(e){let{dispatch:t}=e;t("replace",[]),t("resetApi"),t("resetCursor")}},modules:{notifications:t,api:Object(He.a)({limit:15},5),cursor:Ge()}}})([])});var dt={components:{CircleLabel:ce.a,UserDropdownButton:pe,UserDropdownHeader:me,UserNotificationFooter:et,UserNotificationList:lt},mixins:[Ye.a,ut],data:()=>({dropdownActive:!1}),computed:Object.assign({},Object(ae.e)("auth",{counts:e=>e.notificationCounts}),{counterCeptClass:()=>""}),methods:{closePopover(){var e;null===(e=this.$refs.popover)||void 0===e||e.close()}}},pt=Object(A.a)(dt,(function(){var e=this,t=e._self._c;return e.$breakpoint.mdAndUp?t("div",{staticClass:"navDropDown"},[t("UserDropdownButton",{directives:[{name:"popover",rawName:"v-popover.s.fixed",modifiers:{s:!0,fixed:!0}},{name:"track",rawName:"v-track:notificationsDropdown.click-ga",arg:"notificationsDropdown",modifiers:{"click-ga":!0}}],attrs:{icon:"bell",count:e.counts.new,classes:{label:e.counterCeptClass},active:e.dropdownActive}},[t("BasePopover",{ref:"popover",attrs:{"layer-class":"popover--menu popover--border-navDropDownPrimary popover--arrow-navDropDownPrimary","content-class":"",width:"290",active:e.dropdownActive},on:{"update:active":function(t){e.dropdownActive=t}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("UserDropdownHeader",{attrs:{icon:"bell",title:"Notifications"},on:{close:n},scopedSlots:e._u([e.counts.unread?{key:"counter",fn:function(){return[t("CircleLabel",{staticClass:"text--b space--ml-2 js-notifications-counter",attrs:{size:"s",mode:"primary-inverted"}},[e._v(" "+e._s(e.counts.unread)+" ")])]},proxy:!0}:null],null,!0)}),t("UserNotificationList"),t("UserNotificationFooter")]}}],null,!1,2971904087)})],1)],1):e._e()}),[],!1,null,null,null).exports,ht={__name:"user-dropdown-tab",props:{icon:{type:String,default:""},count:{type:Number,default:0}},setup(e){const t=Object(s.useAttrs)(),n=Object(s.computed)((()=>(t.name,t["selected-value"],"")));return{__sfc:!0,attrs:t,ceptClass:n,CircleLabel:ce.a,SegmentedButton:ee.b}}},mt={components:{UserDropdownTab:Object(A.a)(ht,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.SegmentedButton,e._g(e._b({staticClass:"flex--1",class:n.ceptClass,attrs:{mode:"white",mandatory:""}},"SegmentedButton",e.$attrs,!1),e.$listeners),[e.icon?t("BaseIcon",{attrs:{name:e.icon}}):e._e(),e.count?t(n.CircleLabel,{staticClass:"button--notification-counter text--color-brandPrimary text--b vAlign--all-m space--ml-1",attrs:{mode:"manual",size:"s"}},[e._v(" "+e._s(e.count)+" ")]):e._e()],1)}),[],!1,null,null,null).exports},props:{tabs:{type:Array,default:()=>[]}}},ft=Object(A.a)(mt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex--1"},e._l(e.tabs,(function(n){return t("UserDropdownTab",e._g(e._b({key:n.id,class:n.class,attrs:{name:n.id,icon:n.icon,count:n.count}},"UserDropdownTab",e.$attrs,!1),e.$listeners))})),1)}),[],!1,null,null,null).exports,gt={inject:["popover"],props:{user:Object,required:!0},computed:Object.assign({},Object(ae.e)("features",{navigation:(e,t)=>t.get("navigation").profile||{}}),{links(){const e=[];return e.push({key:"activityOverview",to:this.profileRoute("overview"),text:"Activity overview",icon:"person",track:"overviewLink"}),this.navigation.badges&&e.push({key:"badges",to:this.profileRoute("overview",H.a),text:"My badges",icon:"star-empty",track:"badgesLink"}),e.push({key:"deals",to:this.profileRoute("show.deals",H.d),text:"Posted deals",icon:"tag",track:"dealsLink"}),this.navigation.discussion&&e.push({key:"discussions",to:this.profileRoute("show.discussions",H.f),text:"Posted discussions",icon:"comment",track:"discussionsLink"}),e.push({key:"savedThreads",to:this.profileRoute("show.saved",H.o),text:"Saved threads",icon:"bookmark",track:"savedThreadsLink"}),e.push({key:"keywordAlarms",to:this.profileRoute("keywords"),text:"Alerts",icon:"bell",track:"keywordAlertsLink"}),e.push({key:"settings",to:this.profileRoute("settings"),text:"Settings",icon:"gear",track:"settingsLink"}),e}}),methods:{profileRoute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show.deals",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Object.assign({username:this.user.username},t&&{term:t});return{name:"user.profile.".concat(e),params:n}}}},vt=gt,bt=Object(A.a)(vt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex--dir-col size--all-s"},e._l(e.links,(function(n){return t("RouterLink",{directives:[{name:"track",rawName:"v-track:[link.track].click-ga",arg:n.track,modifiers:{"click-ga":!0}}],key:n.key,staticClass:"navDropDown-link lbox--v-8 lbox--f text--b",attrs:{"exact-active-class":"navDropDown-link--selected",to:n.to},nativeOn:{click:function(t){return e.popover.close()}}},[t("span",{staticClass:"lbox--h-4"},[t("BaseIcon",{attrs:{name:n.icon}})],1),e._v(" "+e._s(n.text)+" ")])})),1)}),[],!1,null,null,null).exports,yt=n(537).a,_t=Object(A.a)(yt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-footer"},[t("button",{directives:[{name:"track",rawName:"v-track:logout.click-ga",arg:"logout",modifiers:{"click-ga":!0}}],staticClass:"clickable box--all-i width--all-12 text--b text--color-navDropDownPrimary hAlign--all-c size--all-s",attrs:{type:"button"},on:{click:e.logout}},[t("span",{staticClass:"lbox--v-8"},[t("BaseIcon",{attrs:{name:"logout"}}),t("span",{staticClass:"space--l-2"},[e._v(e._s(e.label))])],1)])])}),[],!1,null,null,null).exports;const wt="UserConversationList",kt="UserNotificationList",xt="UserProfileLinks",Ct={[wt]:"UserConversationFooter",[kt]:"UserNotificationFooter",[xt]:"UserProfileFooter"};var Ot={components:{CircleLabel:ce.a,UserAvatarLegacy:ve.a,UserDropdownHeader:me,UserDropdownTabs:ft,UserProfileLinks:bt,UserProfileFooter:_t,UserConversationList:qe,UserConversationFooter:ge,UserNotificationList:lt,UserNotificationFooter:et},mixins:[Ye.a,Qe,ut],data(){const e=[{id:wt,class:"",icon:"mail"},{id:kt,class:"",icon:"bell"},{id:xt,class:"",icon:"person"}];return{dropdownActive:!1,tabs:e,selected:e[e.length-1].id}},computed:Object.assign({},Object(ae.c)("auth",{currentUser:"me"}),Object(ae.e)("features",{canAccessAdmin:(e,t)=>t.get("adminTools.enabled")}),Object(ae.e)("auth",{conversationCounts:e=>e.conversationCounts,notificationCounts:e=>e.notificationCounts,unseenTotal:(e,t)=>t.unseenTotal}),{notificationTotal(){return Object(ue.e)(this.unseenTotal)},showNotificationTotal(){return this.$breakpoint.smAndDown&&this.notificationTotal},adminUrl:()=>"/admin",selectedContent(){return this.$breakpoint.mdAndUp?"UserProfileLinks":this.selected},selectedFooter(){return this.$breakpoint.mdAndUp?Ct.UserProfileLinks:Ct[this.selected]},priorityTabId(){return this.notificationCounts.new?kt:this.conversationCounts.unseen?wt:xt},tabsWithCounts(){const e={[wt]:this.conversationCounts.unread,[kt]:this.notificationCounts.unread,[xt]:0};return this.tabs.map((t=>Object.assign({},t,{count:e[t.id]})))}}),watch:{showNotificationTotal:{handler(){this.$breakpoint.mdAndUp||this.dropdownActive||this.selectTabId(this.priorityTabId)},immediate:!0}},methods:{selectTabId(e){this.selected=e},closePopover(){var e;null===(e=this.$refs.popover)||void 0===e||e.close()}}},jt=Object(A.a)(Ot,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown"},[t("button",{directives:[{name:"popover",rawName:"v-popover.s.fixed",modifiers:{s:!0,fixed:!0}},{name:"track",rawName:"v-track:userDropdown.click-ga",value:{tab:e.selectedContent},expression:"{ tab: selectedContent }",arg:"userDropdown",modifiers:{"click-ga":!0}}],staticClass:"navDropDown-trigger aGrid"},[t("UserAvatarLegacy",{staticClass:"js-avatar navDropDown-avatar",class:{"avatar--type-nav--selected js-navDropDown-avatar-selected":e.dropdownActive},attrs:{size:"nav",user:e.currentUser,lazy:!1}}),e.showNotificationTotal?t("CircleLabel",{staticClass:"js-notifications-counter textBadge--notifications notification-count--fixed",attrs:{mode:"alert",size:"s"}},[e._v(" "+e._s(e.notificationTotal)+" ")]):e._e(),t("BasePopover",{ref:"popover",attrs:{"layer-class":"popover--menu popover--border-navDropDownPrimary popover--arrow-navDropDownPrimary","content-class":"",width:"290",active:e.dropdownActive},on:{"update:active":function(t){e.dropdownActive=t}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("UserDropdownHeader",{attrs:{"close-button":e.$breakpoint.xsOnly},on:{close:n},scopedSlots:e._u([{key:"default",fn:function(){return[e.$breakpoint.mdAndUp?t("span",{staticClass:"flex flex--1 boxAlign-jc--all-c"},[e.canAccessAdmin?[t("a",{staticClass:"linkPlain",attrs:{href:e.adminUrl,target:"_blank"}},[e._v(" "+e._s(e.currentUser.username)+" ")])]:[e._v(" "+e._s(e.currentUser.username)+" ")]],2):[t("UserDropdownTabs",{staticClass:"space--mr-3",attrs:{tabs:e.tabsWithCounts,"selected-value":e.selected},on:{"update:selectedValue":function(t){e.selected=t},"update:selected-value":function(t){e.selected=t}}})]]},proxy:!0}],null,!0)}),t(e.selectedContent,{tag:"Component",attrs:{user:e.currentUser}}),e.selectedFooter?t(e.selectedFooter,{tag:"Component",attrs:{user:e.currentUser}}):e._e()]}}])})],1)])}),[],!1,null,null,null).exports,St={components:{GuardedLink:n(599).a,BaseButton:ee.a},computed:Object.assign({},Object(ae.e)("features",{navigation:e=>{var t,n;return(null===(t=e.flags)||void 0===t||null===(n=t.navigation)||void 0===n?void 0:n.submissions)||{}}}),{tag(){var e;return null!==(e=this.navigation)&&void 0!==e&&e.errorMessage?"button":"GuardedLink"}}),methods:{warnUnauthorizedAccess(e){var t,n,s;if(null===(t=this.navigation)||void 0===t||!t.errorMessage)return;e.preventDefault(),e.stopImmediatePropagation();const a={type:"error",title:null===(n=this.navigation)||void 0===n?void 0:n.errorMessage.title,message:null===(s=this.navigation)||void 0===s?void 0:s.errorMessage.body};this.$store.dispatch("pageMsgs/add",a)},guard:()=>({login:{source:"thread_add",trackAction:"goto_submission_add"}})}},Lt=Object(A.a)(St,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown nav-hideSearch"},[t(e.tag,{directives:[{name:"track",rawName:"v-track:addThreadDropdown.click.click-ga",arg:"addThreadDropdown",modifiers:{click:!0,"click-ga":!0}}],tag:"Component",staticClass:"button button--type-primary button--mode-brand button--shape-circle button--toW5-square space--ml-2",attrs:{to:{name:"threads.add"},title:"Submit",guard:e.guard()},on:{click:e.warnUnauthorizedAccess}},[t("BaseIcon",{attrs:{name:"plus"}}),t("span",{staticClass:"hide--toW5 space--ml-2"},[e._v(e._s("Submit"))])],1)],1)}),[],!1,null,null,null).exports,It=n(0),Tt=n.n(It),At={components:{UserConversationDropdown:Ze,UserNotificationDropdown:pt,UserProfileDropdown:jt,ThreadSubmissionDropdown:Lt,LoginButton:le,BaseButton:ee.a},computed:Object.assign({},Object(ae.e)("auth",{loggedIn:(e,t)=>t.loggedIn}),{submitRight(){return this.$breakpoint.mdAndUp}}),async created(){this.loggedIn?Object(re.c)():Object(re.a)()},setup(){const{openSearchOnMobile:e,closeSearchOnMobile:t}=Object(F.b)();return{openSearchOnMobile:e,closeSearchOnMobile:t}},methods:{closePopovers(){var e,t,n;null===(e=this.$refs.UND)||void 0===e||e.closePopover(),null===(t=this.$refs.UPD)||void 0===t||t.closePopover(),null===(n=this.$refs.UCD)||void 0===n||n.closePopover()},search(){this.openSearchOnMobile();document.querySelector(".nav").addEventListener("autoSuggestClosed",(()=>{this.closeSearchOnMobile()}),{once:!0}),Tt()(".popover--mainNav").trigger("layer-destroy")}}},Pt=Object(A.a)(At,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"lbox--v-9 vue-rendered"},[t("BaseButton",{staticClass:"nav-hideSearch hide--fromW3",attrs:{variant:"primary",mode:"white",square:"","aria-label":"Find"},on:{click:e.search}},[t("BaseIcon",{attrs:{name:"search"}})],1),e.loggedIn?[t("UserConversationDropdown",{ref:"UCD",staticClass:"space--ml-2"}),t("UserNotificationDropdown",{ref:"UND",staticClass:"space--ml-2"}),t("UserProfileDropdown",{ref:"UPD",staticClass:"space--ml-2"})]:t("LoginButton",{staticClass:"space--ml-2"}),e.submitRight?t("ThreadSubmissionDropdown"):e._e()],2)}),[],!1,null,null,null).exports,Ft=Object(s.defineComponent)({__name:"site-navigation-menu-voucher-codes-content",props:{merchantLinks:null},setup:e=>({__sfc:!0,staticMainLinks:J(),BaseButton:ee.a})}),Bt=Object(A.a)(Ft,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"space--t-2 space--b-3"},[e.merchantLinks&&e.merchantLinks.length>0?[t("ul",{staticClass:"navMenu-list size--all-m"},e._l(e.merchantLinks,(function(s){return t("li",{key:s.merchantId,staticClass:"iGrid-item width--all-6"},[t(n.BaseButton,{directives:[{name:"track",rawName:"v-track:merchantLink.click",value:{id:s.merchantId},expression:"{ id: merchant.merchantId }",arg:"merchantLink",modifiers:{click:!0}}],staticClass:"boxAlign-jc--all-fs width--all-12 space--r-1",attrs:{variant:"text",mode:"white",to:{name:"merchants.show",params:{merchantUrlName:s.merchantUrlName}}}},[e._v(" "+e._s(s.merchantName)+" ")])],1)})),0),t(n.BaseButton,{staticClass:"space--ml-3 space--mt-2",attrs:{variant:"secondary",mode:"white",to:{name:n.staticMainLinks.vouchers.name}}},[e._v(" "+e._s("See all voucher codes")+" ")])]:e._e()],2)}),[],!1,null,null,null).exports,Et=n(601),Dt=n(71),$t=n(534),Mt=n(24),Nt=Object(s.defineComponent)({__name:"site-navigation-menu",props:{routeData:null,params:{default:()=>({disableStickyHeader:!1})}},setup(e,t){let{expose:n}=t;const a=e,{closeSearchOnMobile:r}=Object(F.b)(),i=J(),o=Object(Dt.c)(),c=Object(s.ref)(!1),u=Object(s.ref)(!1),d=Object(s.ref)(null),p=Object(s.ref)(null),h=Object(s.ref)(null),m=Object(s.computed)((()=>a.routeData.siteNav.data.value)),f=Object(s.computed)((()=>a.routeData.siteNavMenus.data.value)),g=Object(s.computed)((()=>{const{userPreferences:e,main:{links:t}}=m.value;return t.map((t=>{const n=G(t,e);return Object.assign({},t,{url:n})}))})),v=Object(s.computed)((()=>g.value.slice(0,4))),b=Object(s.computed)((()=>o.lgAndUp?v.value:[])),y=Object(s.computed)((()=>b.value.some((e=>Q(e))))),_=Object(s.computed)((()=>g.value.slice(b.value.length))),w=Object(s.computed)((()=>{const e=4>=g.value.length;return"space--t-2 space--b-3 overflow--wrap-on height--all-full overflow--scrollY overscroll--containY ".concat(e?"space--fromW4-t-0":"")})),k=Object(s.computed)((()=>{var e;return(null===(e=f.value)||void 0===e?void 0:e.features.navigation.topMenu.mascotCardsExplanationLink)||!1})),x=Object(s.computed)((()=>{var e;return(null===(e=f.value)||void 0===e?void 0:e.features.snow)||!1})),C=Object(s.computed)((()=>{const{disableStickyHeader:e}=a.params;return"popover--mainNav ".concat(e?"":"zIndex--fixed")})),O=Object(s.computed)((()=>" ".concat(C.value))),j=Object(s.computed)((()=>" ".concat(C.value))),S=Object(s.computed)((()=>{const e=o.smAndDown?{offset:-8}:{};return[{preset:"menu",maxHeight:"100%",width:460,bottom:{offset:10},top:{target:".nav-content"},left:Object.assign({target:".navMenu"},e),maxWidth:"100%"}]})),L=Object(s.computed)((()=>[{preset:"menu",width:375,top:{target:".nav-content"},right:{target:".navMenu"},left:{target:".navMenu"}}])),I=Object(s.computed)((()=>({"":f.value}))),T=Object(s.computed)((()=>b.value.length?"More":"Menu"));function A(){var e,t,n;null===(e=d.value)||void 0===e||e.close(),null===(t=p.value)||void 0===t||t.close(),null===(n=h.value)||void 0===n||n.closePopovers()}return n({closePopovers:A}),Object(s.onUpdated)((()=>{x.value&&Object(Et.d)()})),{__sfc:!0,props:a,closeSearchOnMobile:r,isWhiteLabelEnabled:true,isHomeLinkVisible:!0,siteName:"hotukdeals",outsideLinkCount:4,staticMainLinks:i,breakpoint:o,isVisible:c,isVoucherCodesPopoverVisible:u,mainMenuPopover:d,voucherCodesPopover:p,userNavMenu:h,siteNav:m,siteNavMenus:f,mainLinks:g,outOfMenuStaticLinks:v,outOfMenuLinks:b,isVoucherCodesOutsideOfMenu:y,menuLinks:_,popoverContainerClasses:w,isMascotcardsExplanationEnabled:k,isSnowEnabled:x,popoverLayerClass:C,popoverLayerClassVoucherCodes:O,popoverLayerClassMainMenu:j,popoverLayout:S,popoverVoucherCodesLayout:L,siteNavigationCeptClass:I,menuLabel:T,closePopovers:A,SiteSearch:$,SiteNavigationMenuContent:se,UserNavigationMenu:Pt,ThreadSubmissionDropdown:Lt,SiteNavigationMenuVoucherCodesContent:Bt,BaseButton:ee.a,isPopover:W,isHomeLink:Y,isHomeRoute:l.e,vPopover:$t.e,BasePopover:$t.a,PopoverBody:$t.b,isBot:Mt.b}}}),Rt=(n(606),Object(A.a)(Nt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"nav",class:n.siteNavigationCeptClass},[t("div",{staticClass:"page-navigation page-center nav-content flex boxAlign-jc--all-sb"},[t("div",{staticClass:"navMenu lbox--v-9 space--fromW3-r-2"},[t("div",{directives:[{name:"show",rawName:"v-show",value:n.breakpoint.lgAndUp&&n.outOfMenuLinks.length,expression:"breakpoint.lgAndUp && outOfMenuLinks.length"}],staticClass:"flex"},[e._l(n.outOfMenuStaticLinks,(function(s,a){return[n.isHomeLink(s)&&n.isHomeLinkVisible?t(n.BaseButton,{directives:[{name:"track",rawName:"v-track:homeLink.click",arg:"homeLink",modifiers:{click:!0}}],key:s.key,staticClass:"space--h-2",attrs:{variant:"text",mode:"white",rel:"home",selected:n.isHomeRoute(),to:s.url}},[e._v(" "+e._s("All")+" ")]):n.isPopover(s)?t(n.BaseButton,{directives:[{name:"track",rawName:"v-track:toggleVoucherCodes.click",arg:"toggleVoucherCodes",modifiers:{click:!0}},{name:"popover",rawName:"v-popover:voucherCodesPopover",value:n.popoverVoucherCodesLayout,expression:"popoverVoucherCodesLayout",arg:"voucherCodesPopover"}],key:s.key,staticClass:"navMenu-trigger space--h-2",attrs:{type:"button",selected:n.isVoucherCodesPopoverVisible,variant:"tertiary",mode:"white"}},[t("span",{staticClass:"navMenu-page nav-link-text vAlign--all-m"},[e._v(" "+e._s(s.label)+" ")]),t("BaseIcon",{staticClass:"button--dropdown-icon space--ml-2",attrs:{name:"dropdown"}})],1):n.isHomeLink(s)?e._e():t("RouterLink",{directives:[{name:"track",rawName:"v-track:[link.trackName].click",arg:s.trackName,modifiers:{click:!0}}],key:s.key,staticClass:"button button--type-text button--mode-white space--h-2",class:{"space--r-3":a===n.outOfMenuLinks.length-1},attrs:{"active-class":"button--selected",to:s.url}},[e._v(" "+e._s(s.label)+" ")])]}))],2),t(n.BaseButton,{directives:[{name:"track",rawName:"v-track:toggleMainMenu.click",arg:"toggleMainMenu",modifiers:{click:!0}},{name:"popover",rawName:"v-popover:mainMenuPopover",value:n.popoverLayout,expression:"popoverLayout",arg:"mainMenuPopover"}],staticClass:"navMenu-trigger button--toW3-square space--fromW3-ml-0",class:{"button--selected":n.isVisible},attrs:{type:"button",variant:"tertiary",mode:"white",circle:""}},[e.$breakpoint.smAndDown?[t("BaseIcon",{staticClass:"navMenu-hamburger",attrs:{name:"menu"}}),t("BaseIcon",{staticClass:"navMenu-close aGrid-item",attrs:{name:"cross"}})]:e._e(),e.$breakpoint.mdAndUp?[t("span",{staticClass:"navMenu-page nav-link-text vAlign--all-m"},[e._v(" "+e._s(n.menuLabel)+" ")]),t("BaseIcon",{staticClass:"button--dropdown-icon space--ml-2",attrs:{name:"dropdown"}})]:e._e()],2),t(n.BasePopover,{ref:"mainMenuPopover",attrs:{active:n.isVisible,"layer-class":n.popoverLayerClassMainMenu,classes:{container:n.popoverContainerClasses},"pre-render":""},on:{"update:active":function(e){n.isVisible=e}},scopedSlots:e._u([{key:"default",fn:function({}){return[t(n.PopoverBody,{attrs:{space:!1}},[n.siteNavMenus?t(n.SiteNavigationMenuContent,{attrs:{"main-links":n.menuLinks,"event-links":n.siteNavMenus.events,"merchant-links":n.siteNavMenus.merchants,"thread-groups":n.siteNavMenus.groups,"is-mascotcards-explanation-enabled":n.isMascotcardsExplanationEnabled,"enable-snow":n.isSnowEnabled,"hide-voucher-codes-section":n.isVoucherCodesOutsideOfMenu,"user-preferences":n.siteNav.userPreferences}}):e._e()],1)]}}])}),n.isWhiteLabelEnabled?t(n.BasePopover,{ref:"voucherCodesPopover",attrs:{active:n.isVoucherCodesPopoverVisible,"layer-class":n.popoverLayerClassVoucherCodes,classes:{container:n.popoverContainerClasses},"pre-render":""},on:{"update:active":function(e){n.isVoucherCodesPopoverVisible=e}},scopedSlots:e._u([{key:"default",fn:function({}){return[t(n.PopoverBody,{attrs:{space:!1}},[n.siteNavMenus?t(n.SiteNavigationMenuVoucherCodesContent,{attrs:{"merchant-links":n.siteNavMenus.merchants}}):e._e()],1)]}}],null,!1,1787238530)}):e._e(),e.$breakpoint.smAndDown?t(n.ThreadSubmissionDropdown):e._e(),n.isBot&&n.siteNavMenus?t("span",{staticClass:"hide"},[n.isWhiteLabelEnabled?e._e():t("RouterLink",{attrs:{to:{name:n.staticMainLinks.merchants.name}}},[e._v(" "+e._s(n.staticMainLinks.merchants.label)+" ")])],1):e._e()],1),e._t("logo",(function(){return[t("RouterLink",{directives:[{name:"track",rawName:"v-track:homeLink.click",arg:"homeLink",modifiers:{click:!0}}],staticClass:"nav-logo nav-hideSearch flex flex--shrink-0 boxAlign-as--all-c text--h space--mr-2",attrs:{rel:"home",to:{name:"index"}}},[e._v(" "+e._s(n.siteName)+" ")])]})),t("div",{staticClass:"nav-search flex--fromW3 boxAlign-ai--all-c boxAlign-jc--all-fe space--h-2 space--fromW3-h-2 width--all-12 zIndex--popover space--l-2"},[t(n.SiteSearch,{staticClass:"nav-searchContainer width--all-12"}),e.$breakpoint.smAndDown?t(n.BaseButton,{staticClass:"nav-searchCloseBtn",attrs:{variant:"primary",mode:"white",square:"",size:"m"},on:{click:n.closeSearchOnMobile}},[t("BaseIcon",{attrs:{name:"cross"}})],1):e._e()],1),t(n.UserNavigationMenu,{ref:"userNavMenu",staticClass:"nav-search--navigation nav-hideSearch"})],2)])}),[],!1,null,null,null).exports),Ut=n(577),qt=Object(s.defineComponent)({__name:"the-header",props:{routeData:null,disableStickyHeader:{type:Boolean,default:!1}},setup(e){const t=e,n=Object(s.ref)(),a=()=>{n.value.closePopovers()},r=Object(s.computed)((()=>[h.value?"":"mute--opacity-0 pointerEvents--none",t.disableStickyHeader?"aGrid zIndex--popover":"aGrid--sticky width--all-12 forceLayer zIndex--fixed"])),{speed:i,top:o,direction:l}=Object(Ut.a)(),c=Object(s.computed)((()=>o.value<=56)),u=Object(s.computed)((()=>o.value>71)),d=Object(s.computed)((()=>i.value>1e3));function p(){return!!c.value||(!("up"!==l.value||!d.value)||("down"!==l.value||!u.value)&&null)}const h=Object(s.ref)(!0);return Object(s.watch)([d,l,u,c],(()=>{const e=p();null!==e&&(h.value=e,h.value||a())})),{__sfc:!0,props:t,siteNav:n,closeInnerPopovers:a,wrapperClass:r,speed:i,top:o,direction:l,inVisibleArea:c,HIDE_OFFSET_PX:15,isAwayFromVisibleArea:u,isSpeedy:d,getNewVisibility:p,isVisible:h,SiteNavigationMenu:Rt}}}),Vt=(n(607),Object(A.a)(qt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("header",{directives:[{name:"track",rawName:"v-track:nav",arg:"nav"}],staticClass:"header aGrid-item--t-0",class:n.wrapperClass,attrs:{role:"banner"}},[t(n.SiteNavigationMenu,{ref:"siteNav",attrs:{"route-data":e.routeData,"disable-sticky-header":e.disableStickyHeader}})],1)}),[],!1,null,null,null).exports),zt=n(556),Ht=n(602);function Gt(e){e&&function(e,t){if(window._atatusConfig||!e||!t)return;window._atatusConfig={apikey:e};const n=document.createElement("script");n.async=!0,n.src="https://dmc1acwvwny3.cloudfront.net/atatus.js",n.addEventListener("load",(()=>{var e;null===(e=window.atatus)||void 0===e||e.setUser(t.userId,t.email,t.username)}),!1),document.head.appendChild(n)}(e.apiKey,a.a.getters["auth/me"])}var Wt=Object(s.defineComponent)({__name:"base-layout",props:{routeData:null,twig:{type:Boolean},disableStickyHeader:{type:Boolean},hideFooter:{type:Boolean}},setup(e){const t=e,c=Object(s.computed)((()=>t.routeData.survey.data.value)),u=Object(s.computed)((()=>t.routeData.csatSurvey.data.value)),m=Object(s.computed)((()=>t.routeData.pushNotifications.data.value)),f=Object(s.computed)((()=>t.routeData.cookiePolicy.data.value)),{showCookiesMessage:_}=Object(h.b)(f);Object(Ht.a)(),Gt(t.routeData.atatus.data.value),Object(zt.b)(m);const{pushSupported:w}=Object(zt.a)();var k,x;(Object(i.b)((()=>t.routeData.hotJar.data.value)),Object(p.b)(!1),function(){d(Object(o.a)());const e=Object(l.h)((e=>{d(e)}));Object(s.onUnmounted)(e)}(),g((()=>t.routeData.npsData.data.value)),t.twig)||(null===(k=document.getElementById("app-skeleton"))||void 0===k||k.remove(),x=()=>t.routeData.latestSiteMessage.data.value,Object(r.e)(x,(e=>{e&&a.a.dispatch("pageMsgs/add",Object.assign({context:":admin"},e))})));return{__sfc:!0,CsatSurvey:()=>n.e(41).then(n.bind(null,1256)),BaseSurvey:()=>n.e(147).then(n.bind(null,1338)),CookiesMessage:()=>n.e(40).then(n.bind(null,1274)),TheFooter:()=>n.e(148).then(n.bind(null,691)),PushNotifications:()=>n.e(42).then(n.bind(null,1275)),props:t,survey:c,csat:u,pushNotifications:m,cookiePolicy:f,showCookiesMessage:_,pushSupported:w,TwigPortal:v.a,PageMessages:b.a,IntersectionBoundary:y.a,TheHeader:Vt}}}),Kt=Object(A.a)(Wt,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"box--contents"},[t(n.IntersectionBoundary,{attrs:{viewport:"",name:"viewport"}}),e.twig?[t(n.TwigPortal,{attrs:{to:"#pageMsgPortal"}},[t(n.PageMessages)],1),t(n.TwigPortal,{attrs:{to:"#header-portal",disabled:""}},[t(n.TheHeader,{attrs:{"disable-sticky-header":e.disableStickyHeader,"route-data":e.routeData.header}})],1),e._t("default"),e.hideFooter?e._e():t(n.TwigPortal,{attrs:{to:"#footer-portal",lazy:""}},[t(n.TheFooter)],1)]:[t(n.PageMessages),t(n.TheHeader,{attrs:{"disable-sticky-header":e.disableStickyHeader,"route-data":e.routeData.header}}),t("div",{staticClass:"flex--expand-v"},[e._t("default")],2),t("div",{attrs:{id:"footer-container"}},[t(n.TheFooter)],1)],n.showCookiesMessage?t(n.CookiesMessage,{attrs:{settings:n.cookiePolicy}}):e._e(),n.survey?t(n.BaseSurvey,{attrs:{survey:n.survey}}):e._e(),n.csat?t(n.CsatSurvey,{attrs:{survey:n.csat}}):e._e(),n.pushNotifications&&n.pushSupported()?t(n.PushNotifications):e._e()],2)}),[],!1,null,null,null).exports,Qt=n(597),Yt=n(28);const Jt=Object(k.c)({queries:[x.H,x.p],merge:!0}),Zt=Object(k.c)({queries:[x.eb],merge:!0}),Xt=["THREAD_SUBMISSION"],en=e=>/ABANDONED/.test(e),tn={},nn=async(e,t)=>{if(Xt.every(en))return null;const{name:n,title:s}=await((e,t)=>Zt({id:e,CSATSurveyTypes:t}).then((e=>e.request)).then((e=>{let{showCSAT:t}=e;return t})))(e,t);return tn[n]&&await Object(Yt.d)(tn[n]),n?{name:n,title:s}:null},sn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;const n=(()=>{const e=localStorage.getItem("formAbandoned");if(Xt.some(en)&&e){const t=Number(localStorage.getItem("formAbandonedTimer"));localStorage.removeItem("formAbandoned"),localStorage.removeItem("formAbandonedTimer");const n=localStorage.getItem("surveyShownTime"),s=n?new Date(n).getTime():0,a=Date.now();if(a-s>864e5&&a-t<6e5)return localStorage.setItem("surveyShownTime",String(a)),{name:e,title:"You've cancelled your deal or voucher submission. Overall, how satisfied were you with the submission form?"}}return null})()||await nn(e,t);return n?{name:n.name,title:n.title,threadId:e}:null};var an=n(596);const rn=Object(k.c)({queries:[x.V],merge:!0}),on=()=>rn({}).then((e=>e.request)).then((e=>{var t;let{features:n,settings:s}=e;return{enabled:null==n?void 0:n.nps,token:null==s||null===(t=s.nps)||void 0===t?void 0:t.token}})),ln=Object(k.c)({queries:[x.gb],merge:!0}),cn=Object(k.c)({queries:[x.hb],merge:!0}),un=e=>{let{beforeEnter:t,afterEnter:n,path:s}=e;return{siteNav:t(((e,t)=>t?t.navigation:function(){return ln(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:!0}).then((e=>e.request)).then((e=>e.navigation))}()),[s]),siteNavMenus:n((()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:!0};const t=await cn(e),{navigation:n,groups:s,features:a}=await t.request;return Object.assign({},n,{groups:s,features:a})}()),[s])}};var dn=n(554);const pn=function(e){let{CsatSurveyTypes:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{beforeEnter:n,afterEnter:s,path:a,param:r}=e;return{latestSiteMessage:n(((e,t)=>t?t.latestSiteMessage:Object(Qt.b)()),[a]),cookiePolicy:n(((e,t)=>t?t.features.cookiePolicy:Object(an.a)()),[a]),atatus:n(((e,t)=>t?t.atatus:Object(k.c)({queries:[x.d],merge:!0})({}).then((e=>e.request)).then((e=>{let{features:t}=e;return t.atatus}))),[a]),survey:s((e=>async function(e){const t=Object(k.c)({queries:[x.ib],merge:!0}),n=await t({path:e}).then((e=>e.request)).then((e=>e.survey));return null!=n&&n.delay&&await Object(Yt.d)(1e3*n.delay),n}(e)),[a]),hotJar:s((()=>Jt({}).then((e=>e.request)).then((e=>{let{settings:t,features:n}=e;return{hotJar:t.hotJar,features:n}}))),[a]),csatSurvey:s(((e,n)=>{let{cookiePolicy:s}=n;return s.data.value.allowTracking?sn(r("threadId").value,t):null}),[a]),npsData:s(on,[a]),header:un(e),pushNotifications:s((()=>Object(dn.a)()),[a])}}},530:function(e,t,n){"use strict";var s=n(5),a=Object(s.defineComponent)({__name:"user-persona",props:{user:null,iconOnly:{type:Boolean,default:!0},invert:{type:Boolean,default:!1},isBadge:{type:Boolean,default:!1}},setup(e){const t=e,n={suspended:"lock",banned:"ban",deleted:"circlex",pending_deletion:"circlex",verified:"verified",merchant:"merchant-rounded",editor_assistant:"editor-assistant",super_poster:"super"},a=["editor_assistant","super_poster"],r=Object(s.computed)((()=>t.user.persona&&t.user.persona.type in n)),i=["banned","suspended","pending_deletion","deleted"],o=Object(s.computed)((()=>"super_poster"===t.user.title)),l=Object(s.computed)((()=>t.user.persona.type.includes("merchant"))),c=Object(s.computed)((()=>a.includes(t.user.title)?t.user.title:t.user.persona.type)),u=Object(s.computed)((()=>n[c.value])),d=Object(s.computed)((()=>i.indexOf(t.user.persona.type)>-1)),p=Object(s.computed)((()=>t.invert||!d.value)),h=Object(s.computed)((()=>o.value?"super_poster":d.value?"warning":l.value?"merchant":"default")),m={warning:["text--color-greyShade","text--color-brandPrimary"],default:["text--color-greyShade","text--color-brandPrimary"],merchant:["text--color-greyShade","text--color-partnerLabelPrimary"]},f=Object(s.computed)((()=>{var e,t;return null!==(e=(null!==(t=m[h.value])&&void 0!==t?t:[])[p.value?1:0])&&void 0!==e?e:""})),g={super_poster:"user-persona--super size--all-s text--truncate",default:"size--all-xs"},v=Object(s.computed)((()=>"super_poster"===h.value?g[h.value]:g.default));return{__sfc:!0,props:t,iconMap:n,rolesWithBadgeOverride:a,enabled:r,warningPersonas:i,isSuperPoster:o,isMerchant:l,iconNameKey:c,iconName:u,warning:d,shouldInvert:p,mode:h,buttonClassesMap:m,buttonClasses:f,textClassesMap:g,textClasses:v}}}),r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.enabled?t("span",{staticClass:"lbox",class:{"textBadge textBadge--icon bg--em":!n.isSuperPoster&&e.isBadge}},[t("span",{staticClass:"lbox--h-small flex cursor-default",class:n.buttonClasses},[t("BaseIcon",{class:{"text--color-purple":n.isSuperPoster},attrs:{name:n.iconName,small:!n.isSuperPoster}})],1),e.iconOnly?e._e():t("span",{staticClass:"space--ml-1 text--b text--color-charcoalTint",class:n.textClasses},[e._v(" "+e._s(e.user.persona.text)+" ")])]):e._e()}),[],!1,null,null,null);t.a=i.exports},531:function(e,t,n){"use strict";var s=n(538),a=n(103),r={props:{user:{type:Object,default:null},size:{type:String,default:"m"},lazy:{type:Boolean,default:!0}},computed:{username(){var e;return(null===(e=this.user)||void 0===e?void 0:e.username)||""},src(){if(Object(s.a)(this.user))return Object(s.d)(this.size);switch(this.size){case"m":case"xl":case"nav":return Object(a.b)(this.user.imageUrls,"default","user_small_avatar",Object(s.d)(this.size));default:return Object(a.b)(this.user.imageUrls,"default","user_small_listing_avatar",Object(s.d)(this.size))}},classObject(){return{"avatar--type-s":"s"===this.size,"avatar--type-m":"m"===this.size,"avatar--type-xl":"xl"===this.size,"avatar--type-nav":"nav"===this.size}}}},i=n(45),o=Object(i.a)(r,(function(){var e=this;return(0,e._self._c)("img",{staticClass:"avatar",class:e.classObject,attrs:{src:e.src,loading:e.lazy?"lazy":"eager",alt:e.$t(":username's avatar",{replaces:{username:e.username}})}})}),[],!1,null,null,null);t.a=o.exports},532:function(e,t,n){"use strict";var s=n(15);t.a=(e,t,n)=>({namespaced:n,state:{items:s.a.normalize([e],t)},getters:{get:()=>t=>s.a.getEntity(e,t),items:e=>e.items},actions:{replace(e,t){let{commit:n}=e;n({type:"REPLACE",items:t})},push(e,t){let{commit:n,state:s}=e;n({type:"REPLACE",items:[...s.items,...t]})},remove(e,t){let{commit:n,state:s}=e;n({type:"REPLACE",items:s.items.filter((e=>!t.includes(e)))})},tearDown(t){let{state:n}=t;s.a.remove([e],n.items)}},mutations:{REPLACE(t,n){t.items=s.a.update([e],n.items,t.items)}}})},534:function(e,t,n){"use strict";var s=n(526);n.d(t,"e",(function(){return s.a}));var a=n(523);n.d(t,"a",(function(){return a.a}));var r=n(520);n.d(t,"d",(function(){return r.a}));var i=n(518);n.d(t,"b",(function(){return i.a}));n(525);var o=n(513);n.d(t,"c",(function(){return o.a}));n(521)},535:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v}));var s=n(5),a=n(530),r=n(92),i=n(511),o=Object(s.defineComponent)({__name:"site-search-history-item",props:{item:null},setup:e=>({__sfc:!0,removeFromSearchHistory:r.b,BaseButton:i.a})}),l=n(45),c=Object(l.a)(o,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("RouterLink",{staticClass:"flex boxAlign-ai--all-c space--v-2 space--h-3 autoSuggest-suggestion autoSuggest-suggestion--hoverHighlight",attrs:{to:e.item.route}},[t("BaseIcon",{staticClass:"space--mv-1 space--mh-1",attrs:{name:"history",left:"",size:"m",color:"greyShade"}}),e._t("default"),t(n.BaseButton,{attrs:{variant:"text",mode:"secondary",square:"",size:"s"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),n.removeFromSearchHistory(e.item)}}},[t("BaseIcon",{attrs:{name:"cross",width:"14",height:"14"}})],1)],2)}),[],!1,null,null,null).exports,u=Object(s.defineComponent)({__name:"site-search-history-item-user",props:{item:null},setup:e=>({__sfc:!0,UserPersona:a.a,SiteSearchHistoryItem:c})}),d=Object(l.a)(u,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.SiteSearchHistoryItem,{attrs:{item:e.item}},[t("span",{staticClass:"width--all-12 flex boxAlign-ai--all-bl overflow--hidden"},[t("span",{staticClass:"space--mr-1 size--all-s text--b text--color-charcoalTint"},[e._v(e._s(e.item.title))]),t(n.UserPersona,{staticClass:"space--mr-1 boxAlign-as--all-c",attrs:{user:e.item.payload.user}}),t("span",{staticClass:"size--all-xs text--color-greyShade"},[e._v(e._s(e.item.label))])],1)])}),[],!1,null,null,null).exports,p=Object(s.defineComponent)({__name:"site-search-history-item-default",props:{item:null},setup:e=>({__sfc:!0,SiteSearchHistoryItem:c})}),h=Object(l.a)(p,(function(){var e=this,t=e._self._c;return t(e._self._setupProxy.SiteSearchHistoryItem,{attrs:{item:e.item}},[t("span",{staticClass:"width--all-12 overflow--hidden overflow--ellipsis"},[t("span",{staticClass:"space--mr-1 size--all-s text--b text--color-charcoalTint"},[e._v(e._s(e.item.title))]),t("span",{staticClass:"size--all-xs text--color-greyShade"},[e._v(e._s(e.item.label))])])])}),[],!1,null,null,null).exports;let m=function(e){return e.USER="user",e.DEFAULT="default",e}({});const f={GROUP:"Category",DEAL:"Deal",VOUCHER:"Voucher",STORE_DEALS:"Store / Deals",STORE_VOUCHERS:"Store / Vouchers",STORE:"Store",USER:"Member",EVENT:"Event",ALL_RESULTS:"All results"},g={[m.USER]:d,[m.DEFAULT]:h},v=e=>(null==g?void 0:g[null==e?void 0:e.type])||g[m.DEFAULT]},536:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return g}));var s=n(5),a=n(1),r=n(573),i=n(535),o=function(e){return e.POPULAR_SEARCH="popular",e.SUGGESTIONS="suggestions",e.TOP_VOUCHERS="top_vouchers",e.TOP_DEALS="top_deals",e.USERS="users",e}(o||{});const l={STORE:"Store",GROUP:"Category",USER:"Member",EVENT:"Event"},c={[o.POPULAR_SEARCH]:{title:"Most searched categories",seeMoreLink:{name:"groups.overview"},seeMoreHistoryLabel:i.b.ALL_RESULTS,component:()=>n.e(201).then(n.bind(null,712))},[o.SUGGESTIONS]:{title:"Suggestions",component:()=>n.e(230).then(n.bind(null,710))},[o.TOP_VOUCHERS]:{title:"Vouchers",component:()=>n.e(35).then(n.bind(null,603))},[o.TOP_DEALS]:{title:"Deals",component:()=>n.e(35).then(n.bind(null,603))},[o.USERS]:{component:()=>n.e(206).then(n.bind(null,711))}},u=e=>({name:"threads.index.group",params:{slug:e.urlName}}),d=e=>{let{q:t}=e;return{name:"search",query:{q:t}}},p=(e,t)=>{if(!e)return;const{name:n,q:s,type:o}=e,l={Group:i.b.GROUP,Merchant:t?i.b.STORE_VOUCHERS:i.b.STORE_DEALS,Search:i.b.ALL_RESULTS},c={Group:n,Merchant:n,Search:s},p={Group:u,Merchant:e=>((e,t)=>{let{objectId:n,urlName:s}=e;return Object(r.a)({merchantId:n,merchantUrlName:s},t?a.Ab.Voucher:a.Ab.Deal)})(e,t),Search:d};return{route:p[o](e),label:l[o],title:c[o]}},h=e=>{var t;return null===(t=c[e])||void 0===t?void 0:t.component},m=e=>{var t;return null===(t=c[e])||void 0===t?void 0:t.title},f=e=>{var t;return null==e||null===(t=e.original)||void 0===t?void 0:t.type},g=()=>{const e=Object(s.ref)({}),t=Object(s.computed)((()=>Object.entries(c).reduce(((e,t)=>{let[n,s]=t;return s.seeMoreLink?(e[n]={title:s.title,route:s.seeMoreLink,label:s.seeMoreHistoryLabel},e):e}),{}))),n=Object(s.computed)((()=>Object.assign({},t.value,e.value)));return{SEARCH_BLOCKS:o,getComponentByType:h,getTitleByType:m,getType:f,openSearchOnMobile:()=>{document.querySelector(".nav").classList.add("nav--search")},closeSearchOnMobile:()=>{document.querySelector(".nav").classList.add("nav--search-hide"),setTimeout((()=>{document.querySelector(".nav").classList.remove("nav--search","nav--search-hide")}),500)},seeMoreLinks:n,updateSeeMoreLinks:t=>{let{dealsViewAll:n,vouchersViewAll:s}=t;e.value={[o.TOP_DEALS]:p(n),[o.TOP_VOUCHERS]:p(s,!0)}}}}},537:function(e,t,n){"use strict";(function(e){var s=n(151);t.a={props:{user:Object,required:!0},computed:{label(){return e("Logout",{replaces:{user:this.user.username}})}},methods:{logout:s.b}}}).call(this,n(70).translation)},538:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return p}));var s=n(105),a=n(4),r=n(1);const i=e=>!e||!e.imageUrls||!0===e.isDeletedOrPendingDeletion,o=e=>a.a.getters["auth/me"]&&e.userId===a.a.getters["auth/me"].userId,l={s:"/assets/img/profile-listing-placeholder_fecff.png",m:"/assets/img/profile-comment-placeholder_1b5d6.png",l:"/assets/img/profile-placeholder_09382.png",fallback:"/assets/img/profile-placeholder_09382.png"},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"s";return e in l?l[e]:l.fallback},u=e=>Object(s.d)(e.images),d=e=>e.status===r.Gb.Unauthenticated,p=e=>o(e)||!(null!=e&&e.isUserProfileHidden||null!=e&&e.isDeletedOrPendingDeletion)?e.username:"Anonymous User"},539:function(e,t,n){"use strict";var s=n(5),a=n(523),r=n(551);const i={center:r.e,bottomSheet:r.b,bottomCenter:r.c,bottomRight:r.d,fullscreen:r.f,absolute:r.a},o=Object(s.defineComponent)({name:"BaseModal"});var l=Object(s.defineComponent)(Object.assign({},o,{props:{layout:{type:[String,Object],default:"center",validator:e=>"string"!=typeof e||e in i},backdrop:{type:Boolean,default:!0},mobileSheet:{type:Boolean,default:!0},contentRepos:{type:Boolean,default:!1},scrollRepos:{type:Boolean,default:!1}},setup(e,t){let{expose:n}=t;const r=e,o=Object(s.computed)((()=>{const e="string"==typeof r.layout?i[r.layout]:r.layout;return[Object.assign({},e,{backdrop:r.backdrop})]})),l=Object(s.ref)(),c=()=>l.value.close();return Object(s.onMounted)((()=>l.value.activate(o))),Object(s.watch)(o,(()=>l.value.updateLayouts(o))),n({close:c}),{__sfc:!0,layoutPresets:i,props:r,popoverLayouts:o,popover:l,close:c,BasePopover:a.a}}})),c=n(45),u=Object(c.a)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BasePopover,e._g(e._b({ref:"popover",attrs:{"scroll-repos":e.scrollRepos,"content-repos":e.contentRepos,"mobile-sheet":e.mobileSheet&&"fullscreen"!==e.layout},scopedSlots:e._u([{key:"default",fn:function({}){return[e._t("default",null,{close:n.close})]}}],null,!0)},"BasePopover",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=u.exports},540:function(e,t,n){"use strict";var s=n(5),a=n(28),r=n(242),i={__name:"twig-portal",props:{to:{type:String,required:!0},lazy:{type:Boolean}},setup(e){const t=e,n=Object(s.ref)(!t.lazy),i=document.querySelector(t.to);if(!i)throw Error("missing twig-portal target: ".concat(t.to));t.lazy&&(Object(a.b)().then((()=>n.value=!0)),Object(r.d)(i,(()=>n.value=!0),{rootMargin:"100px 0px 0px"}));const o=()=>{!i.hasAttribute("track-pass-by")&&n.value&&(i.setAttribute("track-pass-by",""),i.innerHTML="")};return Object(s.onBeforeMount)(o),Object(s.onBeforeUpdate)(o),{__sfc:!0,props:t,active:n,portalTarget:i,initPortalTarget:o}}},o=n(45),l=Object(o.a)(i,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return n.active?t("MountingPortal",{attrs:{"mount-to":n.props.to,append:"","target-slim":""}},[e._t("default")],2):e._e()}),[],!1,null,null,null);t.a=l.exports},542:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var s=n(5);const a={none:"",s:"button--size-s",m:"button--size-m",l:"button--size-l"},r={none:"",primary:"button button--shape-circle button--type-primary",secondary:"button button--shape-circle button--type-secondary",tertiary:"button button--shape-circle button--type-tertiary",text:"button button--type-text",tag:"button button--type-tag"},i={base:{brand:"button--mode-brand",success:"button--mode-success",danger:"button--mode-danger",info:"button--mode-info",warning:"button--mode-warning",white:"button--mode-white"},primary:{dark:"button--mode-dark",expired:"button--mode-expired"},secondary:{default:"button--mode-default"},tertiary:{default:"button--mode-default"},text:{primary:"button--mode-primary",secondary:"button--mode-secondary",white:"button--mode-white"},tag:{dark:"button--mode-dark",light:"button--mode-light"}};function o(e){const t=function(e){return"primary"===e||"secondary"===e||"tertiary"===e?i.base:{}}(e);return Object.assign({},t,i[e])}function l(e){return e.href?function(e){return Object(s.computed)((()=>({tag:"a",href:e.disabled?null:e.href})))}(e):e.to?function(e){return Object(s.computed)((()=>({tag:"router-link",to:e.to})))}(e):function(e){return Object(s.computed)((()=>({tag:"button",type:e.type||"button"})))}(e)}function c(e,t){return o(e)}},545:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(5);const a=()=>{const e=Object(s.ref)(!1);return{isLoading:e,setLoader:()=>(e.value=!0,()=>{e.value=!1})}}},547:function(e,t,n){"use strict";var s=n(5),a=n(92),r=Object(s.defineComponent)({__name:"search-history-trigger",props:{item:null},setup(e){const t=e;return{__sfc:!0,props:t,saveToHistory:()=>{Object(a.c)(t.item)}}}}),i=n(45),o=Object(i.a)(r,(function(){var e=this;return(0,e._self._c)("div",{on:{click:e._self._setupProxy.saveToHistory}},[e._t("default")],2)}),[],!1,null,null,null);t.a=o.exports},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return p}));var s=n(4),a=n(24),r=n(21);const i="hotukdeals.com";async function o(e){if(window.dataLayer&&window.gtag)return;window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),function(){const{allowTracking:e,gaCookiesAsAnalytical:t,allowPersonalization:n}=s.a.getters["features/get"]("cookiePolicy");l("consent","default",{ad_storage:n?"granted":"denied",analytics_storage:t&&!e?"denied":"granted"})}();const t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),t.async=!0,document.head.appendChild(t)}function l(){if(window.gtag&&!a.b&&!Object(r.g)()){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window.gtag.apply(null,t)}}function c(e,t){l("consent","update",{[e]:t?"granted":"denied"})}function u(e){c("ad_storage",e)}function d(e){s.a.getters["features/get"]("cookiePolicy.gaCookiesAsAnalytical")&&c("analytics_storage",e)}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l("config",e,Object.assign({cookie_domain:i||"auto",send_page_view:!1,transport_type:"beacon"},t))}},550:function(e,t,n){"use strict";var s={mixins:[n(519).a]},a=n(45),r=Object(a.a)(s,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"plainSelect lbox--v-1"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],staticClass:"plainSelect-ctrl clickable",attrs:{name:e.name,disabled:"disabled"===e.mode,required:"required"===e.mode},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedValue=t.target.multiple?n:n[0]}}},[e.placeholder?t("option",{attrs:{value:""}},[e._v(e._s(e.placeholder))]):e._e(),e._l(e.options,(function(n,s){return t("option",{key:s,attrs:{disabled:n.disabled},domProps:{value:n[e.valueKey],selected:s===e.selectedValue}},[e._v(" "+e._s(n[e.textKey])+" ")])}))],2),t("span",{staticClass:"plainSelect-fake box--all-b overflow--ellipsis space--r-1 hide--js-off",class:[{"mute--text":!e.selectedOption}],attrs:{"aria-hidden":"true"}},[e._v(" "+e._s(e.selectedOption?e.selectedOption[e.textKey]:e.placeholder)+" ")]),t("BaseIcon",{staticClass:"select-ico",attrs:{name:"dropdown"}})],1)}),[],!1,null,null,null);t.a=r.exports},551:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return c}));const s={enterActiveClass:"animation--modalFromBottom",leaveActiveClass:"animation--modalToBottom"},a={preset:"fixed",transition:s},r={preset:"fixed",classes:"popover--layout-fixed-fullscreen",transition:s},i={preset:"fixed",classes:"popover--layout-fixed-bottomSheet",transition:s},o={preset:"fixed",classes:"popover--layout-fixed-bottom",transition:s},l={preset:"fixed",classes:"popover--layout-fixed-bottomRight",transition:s},c={preset:"modal"}},553:function(e,t,n){"use strict";var s={props:{suggestions:{type:Array,required:!0},highlighted:{type:Object,default:null},icon:{type:String,default:null},modifier:{type:String,default:"lBox--v-3"}},methods:{isHighlighted(e){return!!this.highlighted&&this.highlighted.value===e.value}}},a=n(45),r=Object(a.a)(s,(function(){var e=this,t=e._self._c;return t("ol",{},e._l(e.suggestions,(function(n,s){return t("li",{key:s,on:{mouseover:function(t){return e.$emit("highlight",n)},mousedown:function(t){return e.$emit("select",t,n)}}},[e._t("default",(function(){return[t("div",{staticClass:"autoSuggest-suggestion flex boxSec-div space--h-2 width--all-12 clickable overflow--hidden size--all-s",class:[{"autoSuggest-suggestion--selected":e.isHighlighted(n)},e.modifier],attrs:{title:n.text}},[e.icon?t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:e.icon}}):e._e(),t("div",{staticClass:"text--lh-1-2 overflow--ellipsis overflow--hidden"},[e._v(" "+e._s(n.text)+" ")])],1)]}),{suggestion:n,isHighlighted:e.isHighlighted(n)})],2)})),0)}),[],!1,null,null,null);t.a=r.exports},554:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return _})),n.d(t,"f",(function(){return k})),n.d(t,"b",(function(){return x}));var s=n(4);const a="BDiiGd/UZXY/cMF1LcT5cdMbWqvN4u3anz/PrvkG4kC1ZnSZh40cfbsejX1+11grfgrDZLNwGeMhE8+unyJapoI=",r="/bpn/getRequestPermissionParams",i="/bpn/subscribe-vapid-endpoint";var o=n(93),l=n(148),c=n(556),u=n(8),d=n.n(u),p=n(1),h=n(6);const m=async()=>{const{eligibleForBrowserPushNotifications:e}=await Object(h.c)({queries:[p.Ib],merge:!0})({}).then((e=>e.request)).then((e=>e.visitor));return e};var f=function(e){return e.GUEST="guest",e.FORCED="bpn_forced",e.USER="user",e}(f||{});const g={[f.GUEST]:"guestBpnModalSeen",[f.USER]:"userBpnModalSeen",[f.FORCED]:"forcedBpnModalSeen"},v=()=>"serviceWorker"in navigator&&"PushManager"in window,b=()=>{const{pushType:e}=Object(c.a)();localStorage.setItem(g[e.value],"true")},y=()=>{const{pushType:e}=Object(c.a)();return localStorage.getItem(g[e.value])},_=async()=>{const{isLoggedIn:e}=Object(l.a)(),{state:t}=await navigator.permissions.query({name:"notifications"});if(e.value){return{pushType:await m()?f.USER:null,pushPermission:t}}{const{pushType:e}=await d.a.post(r).then((e=>e.data.data));return{pushType:e,pushPermission:t}}},w=async e=>{const t=await O()?C(e):[j];await Promise.all(t.map((e=>e())))},k=async()=>{try{const{pushType:e}=await _();await w(e),await s.a.dispatch("pushNotifications/updatePushType",e)}catch(e){}},x=async()=>{try{const{pushType:e,pushPermission:t}=Object(c.a)();e.value&&"granted"===t.value&&await w(e.value)}catch(e){console.error("Error subscribing to push notifications:",e)}},C=e=>({[f.FORCED]:[S,j],[f.USER]:[S,j]}[e]||[]),O=async()=>(await navigator.serviceWorker.ready).pushManager.getSubscription(),j=async()=>{const e=await navigator.serviceWorker.ready;await L();return(e=>d.a.post(i,e.toJSON()))(await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Object(o.c)(a)}))},S=async()=>{const e=await O();if(e)return e.unsubscribe()},L=async()=>new Promise(((e,t)=>{navigator.permissions.query({name:"notifications"}).then((n=>{let{state:a}=n;return"denied"===a?t(a):"granted"===a?e(a):void Notification.requestPermission().then((n=>{const a="default"===n?"prompt":n;return s.a.dispatch("pushNotifications/updatePushPermission",a),"granted"===a?e(a):t(a)}))}))}))},555:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l.a})),n.d(t,"c",(function(){return c.a})),n.d(t,"b",(function(){return m}));var s=n(519),a=n(510),r={components:{FormInputAdditionBox:a.f,FormInputIcon:a.h},mixins:[s.a],inheritAttrs:!1,props:{inputClass:{type:[String,Array,Object],default:""},multiple:{type:Boolean,default:!1}},computed:{selectedText(){if(this.options.length<1||this.options.multiple)return"";if(!this.selectedOption)return this.placeholder;const e=this.selectedValue,t=this.options.find((t=>e===t[this.valueKey]));return t?t[this.textKey]:this.placeholder}},methods:{selected(){this.$refs.select.blur()}}},i=n(45),o=Object(i.a)(r,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"select width--all-12"},[t("select",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],ref:"select",staticClass:"select-ctrl input clickable",class:[{[`input--mode-${e.mode}`]:e.mode},e.inputClass],attrs:{disabled:"disabled"===e.mode,required:"required"===e.mode,name:e.name},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedValue=t.target.multiple?n:n[0]},e.selected]}},"select",e.$attrs,!1),e.$listeners),[!e.multiple&&e.placeholder?t("option",{attrs:{value:""}},[e._v(e._s(e.placeholder))]):e._e(),e._l(e.options,(function(n){return t("option",{key:n[e.textKey],attrs:{disabled:n.disabled},domProps:{value:n[e.valueKey],selected:e.value===n[e.valueKey]}},[e._v(" "+e._s(n[e.textKey])+" ")])}))],2),t("span",{staticClass:"select-fake flex flex--col width--all-12"},[t("span",{staticClass:"select-txt input clickable width--all-12"},[t("span",{staticClass:"box--all-b overflow--wrap-off overflow--hidden",class:{"mute--text":!e.selectedOption&&e.placeholder}},[e._v(" "+e._s(e.selectedText)+" ")])]),t("FormInputAdditionBox",{attrs:{right:""}},[t("FormInputIcon",{attrs:{name:"down","icon-class":"select-arrow"}})],1)],1)])}),[],!1,null,null,null).exports,l=n(576),c=n(550),u={mixins:[s.a],props:{values:{type:Array,required:!0},index:{type:Number,default:0}},data(){return{vals:this.values}},computed:{selectedOption:function(){const e=this.vals[this.index];return this.options.find((t=>t.value===e))}},methods:{isDisabled:function(e){return e.disabled||this.vals[this.index]!==e.value&&-1!==this.vals.indexOf(e.value)},update:function(e){this.vals[this.index]=e.target.value}}},d={components:{BoundSelect:Object(i.a)(u,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.vals[e.index],expression:"vals[index]"}],staticClass:"select-ctrl input",class:e.mode?"input--mode-"+e.mode:"",attrs:{id:e.controlId,name:e.name,disabled:"disabled"===e.mode,required:"required"===e.mode},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.vals,e.index,t.target.multiple?n:n[0])},function(t){return e.update(t)}]}},[e.placeholder?t("option",{attrs:{value:""}},[e._v(e._s(e.placeholder))]):e._e(),e._l(e.options,(function(n,s){return t("option",{key:s,attrs:{disabled:e.isDisabled(n)},domProps:{value:n[e.valueKey]}},[e._v(" "+e._s(n[e.textKey])+" ")])}))],2),t("span",{staticClass:"select-fake tGrid tGrid--auto width--all-12"},[t("span",{staticClass:"select-txt tGrid-cell bRad--r-r input width--all-12",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"box--all-b height--ctrl overflow--wrap-break overflow--hidden"},[e._v(e._s(e.selectedOption?e.selectedOption[e.textKey]:e.placeholder))])]),t("span",{staticClass:"tGrid-cell"},[t("span",{staticClass:"select-arrow btn bRad--l-r"},[t("BaseIcon",{staticClass:"select-ico",attrs:{name:"dropdown"}})],1)])])])}),[],!1,null,null,null).exports},mixins:[s.a],props:{value:{type:Array,required:!0},skip:{type:Number,default:0},max:{type:Number,default:1/0}},data(){return{vals:this.values}},computed:{remaining:function(){return this.options.reduce(((e,t)=>t.disabled||!t.value?e:e+1),0)-this.vals.length},nextValue:function(){return this.placeholder?"":this.options.find((e=>!e.disabled&&-1===this.vals.indexOf(e.value))).value}}},p=(Object(i.a)(d,(function(){var e=this,t=e._self._c;return t("div",[e._l(e.vals.length-e.skip,(function(n,s){return t("div",{key:s,staticClass:"tGrid tGrid--auto width--all-12",class:{"space--t-3":n}},[t("BoundSelect",{staticClass:"width--all-12",attrs:{values:e.vals,index:n-1+e.skip,options:e.options,name:e.name,"value-key":e.valueKey,"text-key":e.textKey,placeholder:e.placeholder,mode:e.mode}}),t("div",{staticClass:"tGrid-cell tGrid-cell--shrink"},[t("button",{staticClass:"space--ml-1",class:{"hide--visibility":e.vals.length<2},attrs:{disabled:"disabled"===e.mode,type:"button"},on:{click:function(t){return e.vals.splice(n-1+e.skip,1)}}},[t("span",{staticClass:"btn btn--mode-white text--color-grey"},[t("BaseIcon",{attrs:{name:"cross"}})],1)])])],1)})),e.remaining>0&&e.vals.length<e.max?t("button",{staticClass:"btn space--mt-3",attrs:{disabled:!e.vals[e.vals.length-1]||"disabled"===e.mode,type:"button"},on:{click:function(t){return e.vals.push(e.nextValue)}}},[e._t("addButton")],2):e._e()],2)}),[],!1,null,null,null).exports,{components:{FormCheckbox:a.b,FormInputAdditionBox:a.f,FormInputIcon:a.h},mixins:[s.b],props:{allLabel:{type:String,default:""},highlight:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},disabledCheckboxId:{type:String,default:null}},computed:{displayLabel(){if(this.allLabel&&this.allSelected)return this.allLabel;const e=this.selectedValue;return e.length?e.map((e=>e[this.textKey])).join("".concat(this.separator," ")):this.placeholder},filterDisplayLabel(){return this.displayLabel!==this.placeholder?this.displayLabel:""},allSelected(){return this.selected.length===this.options.length},items(){const e=this.selectedValue,t=this.valueKey;return(this.searchable?this.filteredOptions:this.options).map((n=>Object.assign({},n,{checked:e.map(this.mapValue).indexOf(n[t])>-1})))},inputClasses(){const e=this.selectedValue;return{"mute--text":!e.length||e.length===this.options.length&&this.allLabel,"text--color-brandPrimary":this.highlight&&(e.length<this.options.length||!this.allLabel)}}},created(){this.mapValue=this.mapValue.bind(this),this.mapItem=this.mapItem.bind(this)},methods:{handleFilterClick(){this.toggleLayer(),this.setFilterValue("")},mapValue(e){return e[this.valueKey]},mapItem(e){return this.retainValue?e:this.mapValue(e)},selectAll(){this.selectedValue=this.options.map(this.mapItem)},toggleItem(e,t){let n=[...this.selectedValue];e.checked=t,t?n.push(this.mapItem(e)):n.splice(n.findIndex((t=>this.mapValue(t)===this.mapValue(e))),1),this.selectedValue=n}}}),h=Object(i.a)(p,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.expandLayer,expression:"expandLayer"}],staticClass:"multiSelect aGrid width--all-12"},[t("div",{staticClass:"input-wrapper dropdown flex aGrid",class:{"input-wrapper--focus":e.expanded}},[e.searchable||e.disabled?t("div",{staticClass:"width--all-12"},[e.expanded?t("input",{staticClass:"input",attrs:{type:"text",autocomplete:"off",disabled:e.disabled,placeholder:e.filterDisplayLabel},domProps:{value:e.filterValue},on:{input:function(t){return e.setFilterValue(t.target.value)}}}):t("input",{staticClass:"input",attrs:{type:"text",autocomplete:"off",disabled:e.disabled,placeholder:e.placeholder},domProps:{value:e.filterDisplayLabel},on:{click:function(t){return t.stopPropagation(),e.handleFilterClick.apply(null,arguments)}}})]):[e.showIcon?t("FormInputAdditionBox",{staticClass:"pointerEvents--none",attrs:{left:""}},[t("FormInputIcon",{attrs:{name:"star-empty"}})],1):e._e(),t("FormInputAdditionBox",{staticClass:"pointerEvents--none",attrs:{right:""}},[t("FormInputIcon",{attrs:{name:"down",color:"charcoalTint","icon-class":"input-icon--active"}})],1),t("div",{staticClass:"input tGrid tGrid--auto width--all-12 clickable",class:{"input-with-icon--l input-with-icon--r":e.showIcon},on:{click:function(t){return t.stopPropagation(),e.toggleLayer()}}},[t("span",{staticClass:"tGrid-cell tGrid-cell--preventOverflow",class:e.inputClasses},[t("span",{staticClass:"input-label box--all-b",class:{"input-label--ellipsed overflow--ellipsis":e.ellipsis}},[e._v(" "+e._s(e.displayLabel)+" ")])])])]],2),e.expanded?t("div",{staticClass:"dropdown-content zIndex--popover overflow--scrollY aGrid-item",attrs:{"data-handler":"scrollable"}},[e.allLabel?t("FormCheckbox",{staticClass:"multiSelect-item width--all-12 space--v-2 space--h-3 boxSec-div",attrs:{checked:e.allSelected},on:{click:e.selectAll},scopedSlots:e._u([{key:"inline-label",fn:function(){return[e._v(" "+e._s(e.allLabel)+" ")]},proxy:!0}],null,!1,1138682325)}):e._e(),e._l(e.items,(function(n,s){return t("FormCheckbox",{key:n[e.valueKey],staticClass:"multiSelect-item width--all-12 space--v-3 space--h-3 boxSec-div",class:"",attrs:{checked:n.checked,disabled:e.disabledCheckboxId===n[e.valueKey]},on:{update:function(t){return e.toggleItem(n,t)}},scopedSlots:e._u([{key:"inline-label",fn:function(){return[e._t("option-label",(function(){return[e._v(" "+e._s(n[e.textKey])+" ")]}),{item:n})]},proxy:!0}],null,!0)})}))],2):e._e()])}),[],!1,null,null,null),m=h.exports},556:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var s=n(5),a=n(4),r=n(149);const i=e=>({pushPermission:null==e?void 0:e.pushPermission,pushType:null==e?void 0:e.pushType}),o={updatePushType(e,t){let{commit:n}=e;n("UPDATE_PUSH_TYPE",t)},updatePushPermission(e,t){let{commit:n}=e;n("UPDATE_PUSH_PERMISSION",t)}},l={UPDATE_PUSH_TYPE(e,t){e.pushType=t},UPDATE_PUSH_PERMISSION(e,t){e.pushPermission=t}};var c=n(554);const u=()=>{const e=Object(s.computed)((()=>{var e;return null===(e=a.a.state.pushNotifications)||void 0===e?void 0:e.pushPermission})),t=Object(s.computed)((()=>{var e;return null===(e=a.a.state.pushNotifications)||void 0===e?void 0:e.pushType})),n=Object(s.computed)((()=>null!==t.value&&!Object(c.c)()&&"prompt"===e.value));return{pushSupported:c.d,pushPermission:e,showPermissionModal:n,setPermissionModalSeen:c.e,pushType:t,manageVisitorPushSubscription:c.b,subscribeVisitorToPush:c.f}},d=Object(r.a)("pushNotifications",(e=>({namespaced:!0,state:i(e),mutations:l,actions:o})))},557:function(e,t,n){},558:function(e,t,n){},562:function(e,t,n){"use strict";var s=n(3),a=n(84),r=n.n(a),i=n(586),o=n(553),l=(n(570),n(510));const c=(e,t)=>"function"==typeof t?t(e):"string"==typeof e?e:e?e[t]:null;var u={components:{AutoSuggestListResult:o.a,FormInputLabeled:l.i,FormInputIcon:l.h,FormInputButton:l.g},mixins:[i.a],provide:()=>({$showError:()=>!1}),props:{items:{type:[Array,Function],required:!1},itemValue:{type:[String,Function],default:"value"},itemText:{type:[String,Function],default:"text"},loose:{type:Boolean,default:!1},name:{type:String,default:null},disabled:{type:Boolean,default:!1},clearQuery:{type:Boolean,default:!1},noFilter:{type:Boolean,default:!1},loadSuggestionsOnFocus:{type:Boolean,default:!1},closeOnClear:{type:Boolean,default:!1},placeholder:{type:String,default:null},queryPlaceholder:{type:String,default:null},queryValue:{type:String,default:null},clearable:{type:Boolean,default:!1},manualClean:{type:Boolean,default:!1},inputIcon:{type:String,default:"search"},isIconRight:{type:Boolean,default:!1},listIcon:{type:String,default:null},height:{type:String,default:null},inputClasses:{type:String,default:""},tabindex:{type:Number},keepQueryInSearch:{type:Boolean,default:!1}},data(){return{suggestions:Array.isArray(this.items)?this.items:[],query:null,highlighted:null,loading:!1,isFocused:!1,hideResults:!0}},computed:{iconPosition(){return this.isIconRight?"right":"left"},loadSuggestionsDebounced(){return r()(this.loadSuggestions,500)},isInputMode(){return null!==this.query&&this.isFocused},equalisedSuggestions(){return this.isInputMode?this.suggestions.map(this.equalise):[]},filteredSuggestions(){return this.noFilter?this.equalisedSuggestions:this.equalisedSuggestions.filter((e=>e.text.toLowerCase().includes(this.query.toLowerCase())))},equalisedValue(){return this.selectedValue?this.equalise(this.selectedValue):this.query?this.equalise(this.query):{value:"",text:""}},inputModel:{get(){return this.isInputMode?this.query:this.equalisedValue.text},set(e){this.manualClean&&0===e.length&&this.clear(),this.query=e}},showResults(){return this.filteredSuggestions.length&&!this.hideResults},isShowSpinner(){return this.isInputMode&&this.loading||"spinner"===this.inputIcon},searchResultsPageQuery:()=>new URL(document.location).searchParams.get("q")},watch:{showResults(e){this.$emit("show-results",e)},filteredSuggestions(){this.highlighted=null},async query(e){(this.query&&!Array.isArray(this.items)||!this.closeOnClear)&&this.loadSuggestionsDebounced(e)},items(){this.suggestions=Array.isArray(this.items)?this.items:[]}},created(){this.query=this.queryValue||this.searchResultsPageQuery},methods:{equalise(e){return{value:c(e,this.itemValue),text:c(e,this.itemText),original:e}},onBlur(){this.$emit("blur")},onFocus(e){this.$refs.suggestions.addEventListener("touchstart",(()=>e.target.blur()),{passive:!0}),this.loadSuggestionsOnFocus&&this.loadSuggestions(this.query),this.$emit("focus"),this.startInput(),this.hideResults=!1,this.isFocused=!0},startInput(){this.query=this.clearQuery?"":this.equalisedValue.text},endInput(e){this.hideSuggestions(),e.target.blur()},hideSuggestions(e){this.$refs.suggestions.removeEventListener("touchstart",(()=>e.target.blur())),this.hideResults=!0,this.isFocused=!1},clear(){this.query="",this.selectedValue=null,this.closeOnClear&&this.$emit("close-search")},highlight(e){this.highlighted=e},moveHighlight(e){const t=null===this.highlighted?-1:this.filteredSuggestions.indexOf(this.highlighted);if(-1===e&&null===this.highlighted)return;const n=Math.max(0,Math.min(this.filteredSuggestions.length-1,t+e));this.highlight(this.filteredSuggestions[n]),this.scrollToFocus()},isIncluded(e){return this.filteredSuggestions.some((t=>t.value===e.value))},select(e,t){if(!this.loose&&!this.isIncluded(t))return;this.selectedValue=t?t.original:null;const n=this.$refs.suggestions.querySelector("a"),s=this.$refs.suggestions.querySelector("a.autoSuggest-suggestion--selected");if(this.keepQueryInSearch)return this.query=t.original.name,this.hideResults=!0,void this.$refs.input.blur();n||(this.query=null,this.$refs.input.blur()),s&&e instanceof KeyboardEvent&&(e.preventDefault(),s.click())},scrollToFocus(){s.a.scrollTo(this.$refs.suggestions.querySelector(".autoSuggest-suggestion--selected"),this.$refs.suggestions)},async loadSuggestions(e){this.loading=!0;try{this.suggestions=await this.items(e)||[]}catch(e){if(e instanceof Error)throw e}finally{this.loading=!1}}}},d=n(45),p=Object(d.a)(u,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSuggestions,expression:"hideSuggestions"}],ref:"autoSuggest",staticClass:"autoSuggest dropdown"},[t("FormInputLabeled",{directives:[{name:"track",rawName:"v-track:input.focus",arg:"input",modifiers:{focus:!0}}],ref:"input",attrs:{placeholder:e.isInputMode&&e.queryPlaceholder||e.placeholder,disabled:e.disabled,name:e.name,tabindex:e.tabindex,autocomplete:"off",spellcheck:"false","input-class":`${e.inputClasses} `},on:{keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.select(t,e.highlighted||e.equalise(e.query))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.moveHighlight(1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.moveHighlight(-1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.endInput.apply(null,arguments)}],focus:e.onFocus,blur:e.onBlur},scopedSlots:e._u(["left"===e.iconPosition?{key:"prependIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:e.inputIcon,spinner:e.isShowSpinner}})]},proxy:!0}:null,"right"===e.iconPosition?{key:"appendIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:e.inputIcon,spinner:e.isShowSpinner}})]},proxy:!0}:null,{key:"appendButton",fn:function(){return[e.clearable&&e.inputModel&&!e.disabled?t("FormInputButton",{staticClass:"search-clear-button",on:{click:e.clear}}):e._e()]},proxy:!0}],null,!0),model:{value:e.inputModel,callback:function(t){e.inputModel=t},expression:"inputModel"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showResults,expression:"showResults"},{name:"track",rawName:"v-track:autoSuggest",arg:"autoSuggest"}],ref:"suggestions",staticClass:"dropdown-content autoSuggest-suggestionsBox--withShadow autoSuggest-suggestionsBox--open boxSec width--all-12 aGrid-item zIndex--popover",style:{"max-height":e.height}},[e._t("suggestions",(function(){return[t("AutoSuggestListResult",{attrs:{suggestions:e.filteredSuggestions,highlighted:e.highlighted,icon:e.listIcon,modifier:"lBox--v-0 space--v-3 space--h-3"},on:{highlight:e.highlight,select:e.select}})]}),{suggestions:e.filteredSuggestions,highlighted:e.highlighted,icon:e.listIcon,highlight:e.highlight,select:e.select})],2)],1)}),[],!1,null,null,null);t.a=p.exports},563:function(e,t,n){"use strict";var s=n(541),a=n.n(s),r=n(572),i={name:"IntersectionBoundary",provide(){return{intersectionBoundaryKey:this.boundaryName}},props:{viewport:{type:Boolean,default:!1},name:{type:[String,null],default:null},rootMargin:{type:String,default:"0px"},threshold:{type:[Number,Array],default:0}},created(){this.boundaryName=this.name||a()("boundary"),this.observer=null,this.deferredTargetRegistrations=[],r.a.add(this.boundaryName,{register:this.register,remove:this.remove})},destroyed(){r.a.remove(this.boundaryName)},mounted(){const e={root:this.viewport?null:this.$slots.default[0].elm,rootMargin:this.rootMargin,threshold:this.threshold};this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.target.__observer[e.isIntersecting?"on":"off"]()}))}),e),this.deferredTargetRegistrations.forEach((e=>e()))},methods:{register(e){const t=this.cmpntElm(e);t.__observer={on:e.on,off:e.off},this.registerTarget((()=>this.observer.observe(t)))},registerTarget(e){return this.observer?e():this.deferredTargetRegistrations.push(e)},remove(e){this.observer.unobserve(this.cmpntElm(e))},cmpntElm:e=>e.$slots.default[0].elm},render(){return this.$slots.default?this.$slots.default[0]:null}},o=n(45),l=Object(o.a)(i,undefined,undefined,!1,null,null,null);t.a=l.exports},565:function(e,t,n){"use strict";n.d(t,"o",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return g})),n.d(t,"i",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return _})),n.d(t,"n",(function(){return w})),n.d(t,"l",(function(){return k})),n.d(t,"m",(function(){return x})),n.d(t,"h",(function(){return C})),n.d(t,"e",(function(){return O}));var s=n(643),a=n(1),r=n(6);const i={startWithProtocol:["^","(?:(?:(?:https?):)?\\/\\/)"],makeProtocolOptional:["?"],continue:["(?:\\S+(?::\\S*)?@)?","(?:","(?!(?:10|127)(?:\\.\\d{1,3}){3})","(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})","(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})","(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])","(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}","(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))","|","(?:","(?:","[a-z0-9\\p{L}]","[a-z0-9\\p{L}-]{0,62}",")?","[a-z0-9\\p{L}]\\.",")+","(?:[a-z\\p{L}]{2,}\\.?)",")","(?::\\d{2,5})?","(?:[/?#]\\S*)?","$"]};var o=n(5),l=n(580);const c=function(e,t,n,a){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"value";return s.b.withParams({type:t,validationData:{},field:e},(async t=>{if(i&&Object(s.d)(t))return!0;const l={remote:!0,messages:[],valid:!0};try{var c;l._data=await Object(r.b)({req:n,params:{field:e,[o]:t,validations:a}}).request,l.messages=null!==(c=l._data.validation)&&void 0!==c?c:[],l.valid=0===l.messages.length}catch(e){l.messages=e.validation,l.valid=!1}return l}))},u=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return c(e,"validRemoteField",a.md,n,t)},d=e=>s.b.withParams({type:"validRemoteFields",validationData:{},fields:e},(async()=>{const t={remote:!0,multiple:!0,messages:[],valid:!0};try{var n;t._data=await Object(r.b)({req:a.nd,params:{fields:e}}).request,t.messages=null!==(n=t._data.validation)&&void 0!==n?n:[],t.valid=0===t.messages.length}catch(e){t.messages=e.validation,t.valid=!1}return t})),p=(e,t,n)=>s.b.withParams({type:"betweenNumeric",validationData:Object.assign({min:e,max:t},n)},(n=>Object(s.a)(n)||n>=e&&n<=t)),h=(e,t,n)=>s.b.withParams({type:"betweenString",validationData:Object.assign({min:e,max:t},n)},(n=>Object(s.d)(n)||"string"==typeof n&&n.length>=e&&n.length<=t)),m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return s.b.withParams({type:"maxArray",validationData:Object.assign({max:e},t)},(t=>{const a=n?t.filter(n):t;return Object(s.c)(a)||Array.isArray(a)&&a.length<=e}))},f=(e,t)=>s.b.withParams({type:"maxString",validationData:Object.assign({max:e},t)},(t=>Object(s.d)(t)||"string"==typeof t&&t.length<=e)),g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return s.b.withParams({type:"minArray",validationData:Object.assign({min:e},t)},(t=>{const a=n?t.filter(n):t;return Object(s.c)(a)||Array.isArray(a)&&a.length>=e}))},v=(e,t)=>s.b.withParams({type:"minNumeric",validationData:Object.assign({min:e},t)},(t=>Object(s.a)(t)||"number"==typeof t&&t>=Object(o.unref)(e))),b=e=>s.b.withParams({type:"localNumeric",validationData:Object.assign({},e)},(e=>Object(s.a)(e)||/^[0-9,. ]+$/.test(e))),y=e=>s.b.withParams({type:"required",validationData:Object.assign({},e)},s.b.req),_=(e,t)=>s.b.withParams({type:"required",validationData:Object.assign({},t)},(t=>{let n=!1;if("function"==typeof e)n=e.call(void 0,t);else{const t=Object(o.unref)(e);n=t&&0!==t}return!n||s.b.req(t)})),w=(e,t)=>s.b.withParams({type:"url",validationData:Object.assign({},t)},(t=>Object(s.d)(t)||"string"==typeof t&&function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new RegExp(i.startWithProtocol.concat(e?i.makeProtocolOptional:[]).concat(i.continue).join(""),"iu")}(e).test(t))),k=e=>s.b.withParams({type:"sameOriginUrl",validationData:Object.assign({},e)},(e=>Object(s.d)(e)||"string"==typeof e&&new URL(e).origin===window.location.origin)),x=(e,t)=>s.b.withParams({type:"treeSelectRequiredWith",validationData:Object.assign({},t)},(t=>{const n=Object(l.a)(t);return!Object(o.unref)(e)||n.length>0})),C=(e,t)=>s.b.withParams({type:"minDatetime",validationData:Object.assign({minDate:e},t)},(t=>{var n;const a=null===(n=Object(o.unref)(e))||void 0===n?void 0:n.timestamp;return Object(s.a)(t.timestamp)||Object(s.a)(a)||t.timestamp>=a})),O=(e,t)=>s.b.withParams({type:"maxDatetime",validationData:Object.assign({maxDate:e},t)},(t=>{var n;const a=null===(n=Object(o.unref)(e))||void 0===n?void 0:n.timestamp;return Object(s.a)(t.timestamp)||t.timestamp<=a}))},567:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l}));var s=n(681),a=n.n(s);const r=e=>e.files&&e.files.length?a()(e.files):null,i=6144,o=e=>e.size>6291456,l=e=>{const t=new Image;return new Promise(((n,s)=>{t.addEventListener("load",(()=>{n({width:t.naturalWidth,height:t.naturalHeight})})),t.addEventListener("error",s),t.src=e}))}},568:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"j",(function(){return L})),n.d(t,"m",(function(){return O})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"l",(function(){return b})),n.d(t,"c",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return w})),n.d(t,"i",(function(){return I})),n.d(t,"k",(function(){return T}));var s=n(32),a=n.n(s),r=n(5),i=n(85),o=n(4),l=n(102),c=n(617),u=n(6),d=n(612),p=n(514),h=n(1),m=n(21),f=n(654);const g=["wysiwyg"];function v(){const e=L(),t=Object(p.b)(),n=Object(r.ref)(!!e.value.threadId||function(e){return e.type===h.Ab.Deal&&Boolean(e.link||e.title||e.price||e.scheduledReleaseDate.date||e.endDate.date)}(e.value));return Object(m.j)(["thread_created_location"]),{isFullForm:n,showFullForm:function(){n.value=!0,t.replace({query:Object.assign({},t.currentRoute.query),hash:"#thread-details"})}}}const b=()=>{const e=L(),t=Object(r.ref)(null);Object(r.onUnmounted)((()=>{y().value.destroy()}));const{submitForm:n,validationMessages:s}=_({form:t,route:Object(p.a)()});return{form:t,thread:e,formOptions:C(),submitForm:n,validationMessages:s}},y=()=>Object(r.computed)((()=>l.b.create("threadSubmit"))),_=e=>{let{form:t,route:n}=e;const s=Object(r.ref)([]);return{submitForm:async function(){const e=y();if(e.value.isLoading())return;let a=null;try{var i;await Object(d.a)(),e.value.reset(),e.value.add(new Promise((e=>{a=e}))),t&&t.value.updateShortcodes();const l=C(),p=(e=>{const t={threadCreatedLocation:{name:"thread_created_location",data:e.query.thread_created_location}};return Object(r.ref)(t)})(n),h=L();h.value.isLocal&&(h.value.dispatchedFrom=null);const m="thread-desc-".concat(null!==(i=h.value.threadId)&&void 0!==i?i:"new"),g=Object(u.b)({req:c.e,params:{threadData:h.value,mentions:l.wysiwyg.plugins.mentions,morph:"threads.switch"===n.name,token:o.a.state.threadForm.token,ocular:p.value.threadCreatedLocation.data?p.value:null}}),v=await e.value.add(g.request),{thread:b,validation:y,responseMessages:_=[]}=w(v);if(s.value=y,!b)return a(),{responseMessages:_};Object(f.a)(m),window.onbeforeunload=()=>null,window.onunload=()=>null,window.location.href=null==b?void 0:b.url}catch(t){var l;console.error(t),null===(l=a)||void 0===l||l();const{validation:n,responseMessages:r}=w(t);return s.value=n,e.value.reset(),{responseMessages:r}}},validationMessages:s}};function w(e){if(e.errors&&e.errors.length)return{thread:null,validation:[],responseMessages:[]};const{messages:t}=e,{thread:n,validation:s}=e.persistThread||{};if(s&&s.length)return{thread:null,validation:s,responseMessages:[]};return(null!=t?t:[]).some((e=>"error"===e.type))?{thread:null,validation:[],responseMessages:t}:{thread:n,validation:[],responseMessages:t}}const k=async(e,t)=>{var n;const{submitForm:s,validationMessages:a}=_({route:e}),{responseMessages:r}=null!==(n=await s())&&void 0!==n?n:{};o.a.dispatch("pageMsgs/set",r),Object(c.d)(t,a.value)},x=()=>{const e=new URLSearchParams(window.location.search).get("imageurl");e&&o.a.dispatch("threadForm/addGalleryImages",[{remoteUrl:e}])},C=()=>{const e=Object(i.d)({countries:{namespace:"threadForm",path:"countries"},groups:{namespace:"threadForm",path:"groups"},locations:{namespace:"threadForm",path:"locations"},events:{namespace:"threadForm",path:"events"}});return e.wysiwyg={plugins:O()},e},O=()=>{const e=Object(i.d)({mentions:{namespace:"threadForm",path:"mentions"},shortcodes:{namespace:"threadForm",path:"thread.shortcodes"}});return e.link={href:"",content:""},e.emoji=!0,e},j=()=>{const e=C(),t=L();return Object(r.computed)((()=>{var n;const s=o.a.state.threadForm.features||{},{wysiwyg:r={}}=s,i=a()(s,g),l=r.html&&(!t.value.threadId||(null===(n=t.value.user)||void 0===n?void 0:n.userId)===o.a.getters["auth/me"].userId);return Object.assign({},i,{wysiwyg:Object.assign({},r,{html:l}),dispatchedFrom:i.dispatchedFrom&&e.countries.length,locations:i.locations&&!!e.locations.id,events:i.events&&e.events.length,groups:i.groups&&e.groups.length})}))},S=e=>{const t=C();return Object(r.computed)((()=>({groups:t.groups,max:e})))},L=()=>{const{thread:e}=Object(i.d)({thread:{namespace:"threadForm",path:"thread",deep:!0}});return Object(r.ref)(e)},I=e=>{const t=L(),n=Object(r.watch)(t,(s=>{s&&(window.onbeforeunload=()=>"You have unsaved changes!",((e,t)=>{const n=t?"MultiStep":"SinglePage",s=["THREAD_SUBMISSION"],a=[h.Ab.Deal].includes(e.value.type)?"".concat(n).concat(e.value.type,"Abandoned"):null;window.onunload=()=>{a&&s.includes(h.q[a])&&e.value.link&&!e.value.threadId&&(localStorage.setItem("formAbandoned",h.q[a]),localStorage.setItem("formAbandonedTimer",String(Date.now())))}})(t,e),n())}),{deep:!0})},T=()=>{const t=L(),n=Object(r.computed)((()=>t.value.locations.checked));return Object(r.computed)((()=>{if(!t.value.isLocal)return null;if(n.value)return"National";if(!t.value.locations||!t.value.locations.items)return null;const s=t.value.locations.items.filter((e=>e.checked)),a=t.value.locations.items.reduce(((e,t)=>(t.items&&!t.checked&&e.push(...t.items.filter((e=>e.checked))),e)),[]);return[s.length?e("{1} :count Region|{2} :count Regions|[3,*] :count Regions",{count:s.length}):"",a.length?e("{1} :count Location|{2} :count Locations|[3,*] :count Locations",{count:a.length}):""].filter((e=>e)).join(" / ")}))}}).call(this,n(70).translation)},569:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(55);function a(){Object(s.b)("event","page_view")}},570:function(e,t,n){"use strict";var s=n(5),a=n(16);s.default.directive("click-outside",{bind(e,t,n){const s=n.context,{handler:r,isActive:i}=function(e){const t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,isActive:!(!1===e.isActive)}}(t.value);i&&(e.clickOutsideEvent=function(t){Object(a.b)(e,t.target)&&r.call(s,t)},document.body.addEventListener("mousedown",e.clickOutsideEvent))},unbind(e){document.body.removeEventListener("mousedown",e.clickOutsideEvent)}})},572:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const s={data:{},add(e,t){this.data[e]||(this.data[e]=Object.assign({},t,{connections:0})),this.data[e].connections++},remove(e){this.data[e].connections--,0===this.data[e].connections&&delete this.data[e]},get(e){return this.data[e]}},a=Object.assign({},s)},573:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(17);const a=(e,t)=>({name:"search",params:t?{type:s.n[t]}:void 0,query:{"merchant-id":e.merchantId}})},576:function(e,t,n){"use strict";var s=n(85),a={name:"TreeSelectItem",inheritAttrs:!1,model:{event:"update"},props:{value:{type:Object,default:()=>({})},path:{type:String,default:""},depth:{type:Number,default:0},checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},classList:{type:Object,default:()=>({})},updateTree:{type:Function,required:!0},filteredTree:{type:Object,default:()=>({})}},computed:{treeItem(){return this.filteredTree},checkboxLabel(){return"".concat(this.treeItem.name," ").concat(this.treeItem.localRegionId?"(".concat(this.treeItem.localRegionId,")"):"")},depthClass(){return this.depth>2?"iGrid-item--push-l".concat(this.depth-2):""}},methods:{toggleCheckbox(){this.updateTree(this.path,Object.assign({},this.value,{checked:!this.value.checked}))},getChildPath(e){if(""===this.path){const t=this.value.items.findIndex((t=>t.id===e));return"items.".concat(t)}const t=this.path.replace(/\.\d+$/,""),n=Object(s.c)(this.value)(t).findIndex((t=>t.id===e));return"".concat(this.path,".items.").concat(n)},getChildValue(e){return this.value.items.find((t=>t.id===e))}}},r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c;return t("div",{class:{"boxSec-div space--mb-2":1===e.depth,"space--l-10p":2===e.depth}},[t("label",{staticClass:"checkbox checkbox--display-block width--all-12 space--h-3 aGrid",class:[e.depthClass,e.classList.modifier,{"space--v-3":0===e.depth,"space--t-3 space--b-2":1===e.depth,"space--v-2":2===e.depth}]},[t("input",e._g(e._b({staticClass:"input checkbox-input",attrs:{disabled:e.disabled,type:"checkbox"},domProps:{value:e.treeItem.id,checked:e.checked||e.treeItem.checked},on:{click:e.toggleCheckbox}},"input",e.$attrs,!1),e.$listeners)),t("span",{staticClass:"tGrid-cell tGrid-cell--shrink"},[t("span",{staticClass:"checkbox-box flex--inline boxAlign-jc--all-c boxAlign-ai--all-c"},[t("BaseIcon",{staticClass:"checkbox-tick",attrs:{name:"tick",color:"brandPrimary"}})],1)]),t("span",{staticClass:"checkbox-text tGrid-cell space--l-2"},[e._v(e._s(e.checkboxLabel))])]),e.treeItem.items?e._l(e.treeItem.items,(function(n,s){return t("TreeSelectItem",{key:n.id,attrs:{value:e.getChildValue(n.id),"update-tree":e.updateTree,path:e.getChildPath(n.id),checked:e.checked||e.treeItem.checked,disabled:e.disabled||e.treeItem.checked,depth:e.depth+1,"class-list":e.classList,"filtered-tree":e.filteredTree.items[s]}})})):e._e()],2)}),[],!1,null,null,null).exports,o=n(519),l=n(510),c=n(580),u=n(84),d=n.n(u),p={components:{TreeSelectItem:i,FormInputAdditionBox:l.f,FormInputButton:l.g,FormInputLabeled:l.i},mixins:[o.b],props:{value:{type:Object,default:()=>({})},name:{type:String,default:""},nodes:{type:Array,default:()=>[]},separator:{type:String,default:"\\"},classList:{type:Object,default:()=>({})},hasError:{type:Boolean,default:!1},hasFilter:{type:Boolean,default:!1}},data:()=>({selectedIds:[],treeData:{},filteredTree:{},query:""}),computed:{displayLabel(){const e=this.updateLabels(this.value);return e.labels.length?e.labels.sort(((e,t)=>e[1]-t[1])).map((t=>{let[n,s]=t;const a=e.selected[s];return"".concat(a?a+" ":"").concat(n)})).join(" ".concat(this.separator," ")):this.placeholder},isDefaultLabel(){return this.placeholder===this.displayLabel},treeValues(){return this.hasFilter?this.filteredTree:this.value}},watch:{value:{handler(e){this.treeData=Object.assign({},e),this.selectedIds=Object(c.a)(e),this.hasFilter&&this.filterTree()},deep:!0,immediate:!0},expanded:{handler(e){e||(this.query="")}},query:d()((function(){this.toggleFirstNode(),this.filterTree()}),300)},created(){this.normalizeInitialValues(),this.hasFilter&&(this.filteredTree=this.value)},methods:{updateParent(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\.\d+$/,"");let t=e.replace(/\.items$/,"");const n=Object(s.c)(this.treeData)(e);if(!n.some((e=>!e.checked))){n.map((e=>e.checked=!1)),Object(s.b)(this.treeData,{path:e,value:n});const a=Object(s.c)(this.treeData)(t);t===e?this.treeData=Object.assign({},this.treeData,{items:a,checked:!0}):(Object(s.b)(this.treeData,{path:t,value:Object.assign({},a,{checked:!0})}),this.updateParent(t))}},updateTree(e,t){let n=t;if(t.checked&&(n=this.clearNode(t,!1)),e)return Object(s.b)(this.treeData,{path:e,value:n}),this.updateParent(e),void this.$emit("update",this.treeData);this.$emit("update",n)},updateLabels(e){let{labels:t=[],depth:n=0,selected:s={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=this.nodes[n];return 0===n&&e.checked?{labels:[[a,n]],depth:n,selected:s}:e.checked?(s[n]=(s[n]||0)+1,t.findIndex((e=>{let[t,s]=e;return t===a&&s===n}))<0&&t.push([a,n]),{labels:t,depth:n,selected:s}):(e.items&&e.items.map((e=>this.updateLabels(e,{labels:t,depth:n+1,selected:s}))),{labels:t,depth:n,selected:s})},filterTree(){this.filteredTree=this.filterNode(this.value),this.$emit("search",!this.filteredTree)},filterNode(e){var t;const n=e.items?e.items.map(this.filterNode).filter(Boolean):null,s=this.query.toLowerCase();return e.name.toLowerCase().includes(s)||null!==(t=e.localRegionId)&&void 0!==t&&t.includes(s)||n&&n.length?Object.assign({},e,{items:n}):null},clearSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=null===e;e=e||this.value;const n=Object.assign({},e,{checked:!1,items:e.items?e.items.map((e=>this.clearSelection(e))):null});return t&&this.updateTree("",n),n},toggleFirstNode(){this.query&&this.value.checked?this.changeFirstNode(!1):this.query||this.isAnyNodeChecked(this.value)||this.changeFirstNode(!0)},changeFirstNode(e){this.updateTree("",Object.assign({},this.value,{checked:e}))},isAnyNodeChecked(e){return e.checked||e.items&&e.items.some(this.isAnyNodeChecked)},normalizeInitialValues(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateTree("",this.normalizeNode(this.value,e))},normalizeNode(e,t){var n,s;const a=null===(n=e.items)||void 0===n?void 0:n.every((e=>e.checked));return Object.assign({},e,{checked:!t&&e.checked,items:null===(s=e.items)||void 0===s?void 0:s.map((e=>this.normalizeNode(e,a)))})},clearNode(e,t){var n;return Object.assign({},e,{checked:!t&&e.checked,items:null===(n=e.items)||void 0===n?void 0:n.map((e=>this.clearNode(e,!0)))})},isSelected(e){var t;return!!e.checked||(null===(t=e.items)||void 0===t?void 0:t.some((e=>{var t;return!!e.checked||(null!==(t=e.items)&&void 0!==t&&t.length?this.isSelected(e):void 0)})))},openTree(){this.toggleLayer(),this.hasFilter&&this.$nextTick((()=>{this.$refs.searchInput.focus()}))}}},h=p,m=Object(r.a)(h,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.expandLayer,expression:"expandLayer"}],staticClass:"multiSelect dropdown aGrid width--all-12"},[t("span",{staticClass:"input-wrapper flex aGrid"},[e.name?t("input",{attrs:{type:"hidden",name:e.name},domProps:{value:e.selectedIds}}):e._e(),e.hasFilter&&e.expanded?t("FormInputLabeled",{ref:"searchInput",staticClass:"width--all-12",attrs:{autocomplete:"off",spellcheck:"false"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}):[t("FormInputAdditionBox",{attrs:{right:""}},[e.isSelected(e.value)?t("FormInputButton",{attrs:{icon:"cross"},on:{click:e.clearSelection}}):e._e()],1),t("span",{staticClass:"input clickable width--all-12",class:{"input--focus":e.expanded,"input--mode-error":e.hasError},on:{click:e.openTree}},[t("span",{staticClass:"boxAlign-jc--all-sb flex boxAlign-ai--all-c height--all-full"},[t("span",{staticClass:"input-label size--all-s",class:{"mute--text":e.isDefaultLabel}},[e._v(" "+e._s(e.displayLabel)+" ")])])])]],2),t("div",{staticClass:"dropdown-content zIndex--popover overflow--scrollY",class:{hide:!e.expanded}},[e.treeValues?t("TreeSelectItem",{attrs:{value:e.value,"update-tree":e.updateTree,"class-list":e.classList,"filtered-tree":e.treeValues}}):e._e()],1)])}),[],!1,null,null,null);t.a=m.exports},577:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(5);const a=function(){let{eventListenerOptions:e={passive:!0},element:t=document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Date.now(),a=0;const r=Object(s.ref)(0),i=Object(s.ref)("down"),o=Object(s.ref)(0);return((e,t,n,a)=>{Object(s.onMounted)((()=>e.addEventListener(t,n,a))),Object(s.onBeforeUnmount)((()=>e.removeEventListener(t,n,a)))})(t,"scroll",(function(){const e=Date.now(),s=e-n;o.value=(t===document?document.documentElement:t).scrollTop;const l=o.value-a;r.value=1e3*Math.abs(l/s),i.value=o.value>a?"down":"up",a=o.value,n=e}),e),{speed:r,top:o,direction:i}}},578:function(e,t,n){"use strict";n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"h",(function(){return b})),n.d(t,"b",(function(){return y}));var s,a=n(132),r=n.n(a),i=n(8),o=n.n(i),l=n(20),c=n(6),u=n(1);const d={getSuggestions:"/search/users",getProfile:(e,t)=>Object(l.b)(s||(s=r()(["/profile/","/","?"])),e,t),profileRedirect:"/profile/prg",postSocialTerms:e=>"user/social/provider/".concat(e,"/terms")},p=(e,t,n)=>o.a.post(d.postSocialTerms(e),{username:n,termsConditionsAndPrivacy:t?"on":"off"}),h=e=>Object(c.a)({req:u.kd,params:{id:e}}).then((e=>{let{user:t}=e;return(null==t?void 0:t.lastAddress)||null})),m=()=>Object(c.a)({req:u.oc}).then((e=>e.infractions)),f=(e,t)=>Object(c.a)({req:u.nc,params:{typeId:e,placeholder:t}}).then((e=>e.infraction)),g=e=>Object(c.a)({req:u.jd,params:{id:e}}).then((e=>e.user.infractions.points.active)),v=e=>Object(c.a)({req:u.mc,params:{infraction:e}}),b=()=>Object(c.a)({req:u.Oc}).then((e=>e.resentEmailConfirmationToCurrentUser.result)),y=(e,t)=>Object(c.a)({req:u.fc,params:{userId:e,follow:t}}).then((e=>{let{followUser:t}=e;return t.follow}))},580:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=e=>{const t=[];return function e(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!n)return;if(n.checked)return void t.push(n.id);if(!n.items)return;n.items.map(e)}(e),t}},586:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={model:{event:"update"},props:["value"],computed:{selectedValue:{get(){return this.value},set(e){this.$emit("update",e)}}}}},587:function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure "+e)},e.exports.__esModule=!0,e.exports.default=e.exports},588:function(e,t,n){"use strict";var s=n(677),a=n.n(s);const r={default:()=>n.e(203).then(n.bind(null,1277)),soft:()=>n.e(208).then(n.bind(null,1278)),admin:()=>n.e(202).then(n.bind(null,1276))};var i={components:r,inheritAttrs:!1,model:{event:"update"},props:{value:{type:Array,default:()=>[]},target:{type:String,default:""}},computed:{groupedNotifications(){return a()(this.notifications,(e=>e.context||"default"))},notificatonsByContext(){return e=this.groupedNotifications,Object.keys(e).map((t=>({context:t,messages:e[t]})));var e},notifications:{get(){return this.value},set(e){this.$emit("update",e)}}},methods:{contextComponent:e=>(e=e.replace(":",""))in r?e:"default",updateNotifications(e,t){var n;this.groupedNotifications[e]=t,this.notifications=(n=this.groupedNotifications,[].concat(...Object.values(n)))}}},o=n(45),l={components:{NotificationMessages:Object(o.a)(i,(function(){var e=this,t=e._self._c;return t("div",e._l(e.notificatonsByContext,(function(n){return t(e.contextComponent(n.context),{key:n.context,tag:"Component",attrs:{messages:n.messages},on:{"update-messages":function(t){return e.updateNotifications(n.context,t)}}})})),1)}),[],!1,null,null,null).exports},computed:{notifications:{get(){return this.$store.state.pageMsgs.messages},set(e){return this.$store.dispatch("pageMsgs/set",e)}}}},c=Object(o.a)(l,(function(){var e=this;return(0,e._self._c)("NotificationMessages",{model:{value:e.notifications,callback:function(t){e.notifications=t},expression:"notifications"}})}),[],!1,null,null,null);t.a=c.exports},589:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var s=n(17);const a=(e,t,n,a)=>e?"inactive":t?"inert":a?s.i[a]:n<0?"cold":n>0?"warm":"inert",r=e=>{if("number"!=typeof e)return"—";const t=e<0?Math.ceil(e):Math.floor(e);return"".concat(t,"°")}},590:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return _}));var s=n(32),a=n.n(s),r=n(10),i=n.n(r),o=n(11),l=n.n(o),c=n(5);n(668);const u=(e,t)=>{const n=Object.assign({},t.validationData,{attribute:t.attribute});return e.replace(/:(\w+)/gi,(e=>n[e.substring(1)]||""))},d=(e,t)=>{const{translation:n}=t.validationData;return u(n||h[e]||m[e],t)},p="The date and time are required or the format is incorrect.",h={},m={accepted:"The :attribute must be accepted.",alpha:"The :attribute may only contain letters.",alphaDash:"The :attribute may only contain letters, numbers, and dashes.",alphaNum:"The :attribute may only contain letters and numbers.",array:"The :attribute must be an array.",betweenArray:"The :attribute must have between :min - :max items.",betweenNumeric:"The :attribute must be between :min - :max.",betweenString:"The :attribute must be between :min - :max characters.",different:"The :attribute and :other must be different.",digits:"The :attribute must be :digits digits.",digitsBetween:"The :attribute must be between :min and :max digits.",email:"Please enter a valid email address.",inArray:"The selected :attribute is invalid.",integer:"The :attribute must be an integer.",maxArray:"The :attribute may not have more than :max items.",maxNumeric:"The :attribute may not be greater than :max.",maxString:"The :attribute may not be greater than :max characters.",maxFile:"The :attribute may not be greater than :max kilobytes.",minArray:"The :attribute must have at least :min items.",minNumeric:"The :attribute must be at least :min.",minString:"The :attribute must be at least :min characters.",notInArray:"The selected :attribute is invalid.",numeric:"The :attribute must be a number.",localNumeric:"This field should only contain digits, commas and fullstops.",regex:"The :attribute format is invalid.",required:"This field is required.",same:"The :attribute and :other must match.",sizeArray:"The :attribute must contain :size items.",sizeNumeric:"The :attribute must be :size.",sizeString:"The :attribute must be :size characters.",url:"The :attribute format is invalid.",sameOriginUrl:"The link you provide needs to be from hotukdeals.",minDatetime:p,maxDatetime:p},f=["valid","remote","multiple","messages"],g=e=>e.reduce(((e,t)=>[...e,...t.translations.map((e=>{let{body:t}=e;return{text:t}}))]),[]),v=(e,t)=>t.reduce(((e,t)=>{const n=e[t.path]||[];return e[t.path]=[...n,...t.translations.map((e=>{let{body:t}=e;return{text:t}}))],e}),e);let b=function(){function e(t){i()(this,e),this._validators={},this.error={},this.anyError=!1,this.messages={},this.check=this.check.bind(this),this.clear=this.clear.bind(this),this.invalid=this.invalid.bind(this),this.validate=this.validate.bind(this),this.resolve={},this.setup(t)}return l()(e,[{key:"setup",value:function(e){Object.keys(this._validators).forEach((t=>{t in e||(delete this._validators[t],delete this.error[t],delete this.messages[t])}));for(const[t,n]of Object.entries(e))this.set(t,n),t in this.messages||this.clear(t);this.check()}},{key:"destroy",value:function(){this.resolve={}}},{key:"errors",value:function(e){return this.messages[e]||[]}},{key:"invalid",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.error[e]:Object.keys(this.messages).some(this.invalid)}},{key:"clear",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)return c.default.set(this.error,e,!1),void c.default.set(this.messages,e,[]);Object.keys(this.messages).map(this.clear)}},{key:"add",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._validators[e]=t.reduce(((t,n)=>(t.indexOf(n)<0&&(t.push(n),this.clear(e)),t)),this._validators[e]||[])}},{key:"set",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._validators[e]=t}},{key:"check",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.error[e]=!!this.errors(e).length:this.anyError=!!Object.keys(this.messages).filter(this.check).length}},{key:"resolvePending",value:function(e){var t,n;null===(t=(n=this.resolve)[e])||void 0===t||t.call(n),delete this.resolve[e]}},{key:"hasValidator",value:function(e){return e in this._validators}},{key:"setMessages",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.hasValidator(e)&&(this.messages[e].splice(0,this.messages[e].length,...t),this.check())}},{key:"validate",value:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var s=arguments.length,r=new Array(s>3?s-3:0),i=3;i<s;i++)r[i-3]=arguments[i];this.clear(e),this.hasValidator(e)&&(this.resolvePending(e),await new Promise((async s=>{this.resolve[e]=s;for(const s of this._validators[e]){let i=await s(t,...r),{valid:o,remote:l,multiple:c,messages:p}=i,h=a()(i,f);if(!o){if(Array.isArray(p))l&&c?this.messages=v(this.messages,p):(p=l?g(p):p.map((e=>({text:e}))),this.messages[e].push(...p));else{const t=Object.assign({attribute:e},h);this.messages[e].push({text:n?u(n,t):d(h.type,t)})}break}}this.resolvePending(e)})),this.check(e))}}]),e}();const y={data(){return this.$options.validations&&c.default.util.defineReactive(this,"_validate",null),{}},beforeCreate(){const e=this.$options,t=e.validations;t&&(e.computed||(e.computed={}),e.computed.$validators||(e.computed.$validators="function"==typeof t?t:function(){return t},e.computed.$v||(e.computed.$v=function(){return null===this._validate&&(this._validate=new b("function"==typeof t?t.call(this):t),this.$once("hook:beforeDestroy",this.$watch("$validators",(e=>{this._validate.setup(e)})))),this._validate?this._validate:null})))},beforeDestroy(){this._validate&&(this._validate.destroy(),this._validate=null)},provide(){return{$v:this.$v}}},_=e=>{if(!e)return;const t=Object(c.ref)(new b(e));return Object(c.provide)("$v",t.value),Object(c.onBeforeUnmount)((()=>{t.value.destroy(),t.value=null})),t}},591:function(e,t,n){"use strict";var s=n(522),a=n(103),r=n(17),i=n(589),o=n(610);t.a={props:{imageVariant:{type:Array,default:()=>[["re",100,100],["ft","jpg"],["qt",60]]},merchantAvatarVariant:{type:Object,default:()=>({slot:"avatar",variant:"avatar_app_square_32_2x"})}},computed:{defaultSrc(){return Object(o.a)(this.thread.threadTypeId)},threadPicsyImg(){return new s.a(this.thread.mainImage)},threadImgSrc(){let e=this.threadPicsyImg.apply(this.imageVariant).toString();return!e&&Object(r.y)(this.thread.threadTypeId)&&(e=this.threadMerchantLogoSrc),e||this.defaultSrc},threadMerchantLogoSrc(){return this.thread.merchant?Object(a.b)(this.thread.merchant.imageUrls,this.merchantAvatarVariant.slot,this.merchantAvatarVariant.variant):null},temperatureLabel(){return Object(i.a)(this.thread.temperature)},temperatureClass(){return"vote-temp--".concat(Object(i.b)(!1,!1,this.thread.temperature,this.thread.temperatureLevel))}}}},596:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(6),a=n(1);function r(){return Object(s.c)({queries:[a.p],merge:!0})({}).then((e=>e.request)).then((e=>e.features.cookiePolicy))}},597:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var s=n(6),a=n(1);const r=Object(s.c)({queries:[a.P],merge:!0}),i=()=>r({}).then((e=>e.request)).then((e=>e.latestSiteMessage));function o(e){return Object(s.a)({req:a.ac,params:{siteMessageId:e}}).then((()=>null))}},598:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return{params:Object.keys(e).reduce(((n,s)=>(t.push(s),n[s]=JSON.stringify(e[s]),n)),{}),handlers:t.join(" ")}};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{computed:{$d(){return s(Object.assign({},e,this.$directives||{}))}}}}},599:function(e,t,n){"use strict";var s=n(101),a={inheritAttrs:!1,props:{guard:{type:Object,default:null}},computed:{showLink(){return!this.guard||this.$store.getters["auth/loggedIn"]}},methods:{prompt(){Object(s.b)(this.guard).catch((()=>null))}}},r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c;return e.showLink?t("RouterLink",e._g(e._b({},"RouterLink",e.$attrs,!1),e.$listeners),[e._t("default")],2):t("button",{attrs:{type:"button"},on:{click:e.prompt}},[e._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},600:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(514);const a=()=>({isMagazineEnabled:true,magazineUrl:Object(s.b)().resolve({name:"magazine"}).href})},601:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return f}));var s=n(5),a=n(14);const r="enabled",i="disabled",o="enabling",l="disabling",c="letItSnow-layer--visible",u=Object(s.ref)(i),d="snow",p=()=>{if(u.value===r)return;const e=new a.a(d),{value:t}=e.get();u.value=null!=t?t:i,u.value===r&&m(o)},h=e=>{if(![i,r].includes(e))return;u.value=e;new a.a(d).set({value:u.value})},m=async e=>{const{default:t}=await n.e(170).then(n.bind(null,707));if(u.value=e,e===o)return t.setSnowImage("/assets/img/seasonal/snowflake-blur_e25bb.png"),t.letItSnow("letItSnow-layer"),t.container.classList.add(c),void h(r);t.container.classList.remove(c),setTimeout((()=>{t.stopTheSnow(),h(i)}),3e3)},f=()=>{u.value===r&&m(l),u.value===i&&m(o)}},602:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var s=n(41),a=n(21);const{enabled:r,library:i,endpoint:o,platformId:l}={enabled:!0,platformId:"8d39f3711d254b85a39f445ab14f0069",endpoint:"https://mega.hotukdeals.com/megatron-mgt/h",library:"https://mega.hotukdeals.com/megatron.js"};let c=null;function u(){d(),Object(a.h)(d)}function d(){var e;!function(){if(!p())return;e=window,t=document,n="script",a=i,r="mt",u=o,e.megatronObj={name:r},e[r]=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];(e[r].q=e[r].q||[]).push(n)},e[r].d=u,d=t.createElement(n),h=t.getElementsByTagName(n)[0],d.async=!0,d.src=a,h.parentNode.insertBefore(d,h),c=e[r],c("set","platformID",l),c("set","businessModel","Communities"),c("set","isCookieEnabled",!1),c("set","customerHash",Object(s.d)());var e,t,n,a,r,u,d,h}(),null===(e=c)||void 0===e||e("send","pageview")}const p=()=>r&&!c&&Object(s.b)()&&Object(s.d)()},604:function(e,t,n){"use strict";var s={components:{AutoSuggestListResult:n(553).a},props:{showDivider:{type:Boolean,required:!1},getGroup:{type:Function,required:!0},getTitle:{type:Function,required:!0},suggestions:{type:Array,required:!0},highlighted:{type:Object,default:null},highlight:{type:Function,required:!0},select:{type:Function,required:!0}},computed:{groups(){return this.suggestions.reduce(((e,t)=>{const n=this.getGroup(t);return n in e?e[n].suggestions.push(t):e[n]={suggestions:[t],title:this.getTitle(n)},e}),{})}},methods:{checkIsDividerShown(e){return void 0!==this.showDivider?this.showDivider:0!==e}}},a=n(45),r=Object(a.a)(s,(function(){var e=this,t=e._self._c;return t("div",e._l(e.groups,(function(n,s,a){return t("div",{key:s,staticClass:"size--all-s",class:{"boxSec-div":e.checkIsDividerShown(a)}},[t("div",{staticClass:"flex width--all-12"},[n.title?t("h3",{staticClass:"space--t-3 space--b-2 space--l-3 text--color-charcoalTint text--b"},[e._t("search-results-group-title",(function(){return[e._v(" "+e._s(n.title)+" ")]}))],2):e._e(),t("span",{staticClass:"space--t-3 space--b-2 space--l-2 space--r-3 space--ml-a text--color-brandPrimary text--b hide--empty"},[e._t("search-results-group-see-more-btn",null,{groupKey:s})],2)]),t("AutoSuggestListResult",{attrs:{suggestions:n.suggestions,highlighted:e.highlighted},on:{highlight:e.highlight,select:e.select},scopedSlots:e._u([{key:"default",fn:function({suggestion:n,isHighlighted:a}){return[e._t("default",(function(){return[t("div",{staticClass:"autoSuggest-suggestion space--v-2 space--h-3 clickable text--b",class:{"autoSuggest-suggestion--selected":a}},[t("span",{staticClass:"lbox--v-2"},["query"===s?t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"search"}}):e._e(),e._v(" "+e._s(n.text)+" ")],1)])]}),{suggestion:n,isHighlighted:a,type:"groupKey"})]}}],null,!0)})],1)})),0)}),[],!1,null,null,null);t.a=r.exports},606:function(e,t,n){"use strict";n(557)},607:function(e,t,n){"use strict";n(558)},610:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(17);const a=e=>Object(s.y)(e)?"/assets/img/default-voucher_b97b9.svg":"/assets/img/default-deal_d0fc9.svg"},611:function(e,t,n){"use strict";t.a=window.RedactorPlugins||(window.RedactorPlugins={})},612:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var s=n(4),a=n(1),r=n(683),i=n(60),o=n(17),l=n(325);const c=e=>e.groups.some((e=>e.source===i.b)),u=n.n(l)()((async e=>await Object(a.Nb)({filter:e})),(e=>{var t,n;return"".concat(e.terms.join("_"),"_").concat(null!==(t=null===(n=e.price)||void 0===n?void 0:n.eq)&&void 0!==t?t:"")})),d=async()=>{if(!s.a.getters["threadForm/canAutoAssignGroups"])return;const e=s.a.state.threadForm.thread;if(![o.f,o.g].includes(e.type))try{var t;const n=s.a.state.threadForm.groups,a=null!==(t=s.a.state.threadForm.fetchedFromUrl.title)&&void 0!==t?t:"",l={threadId:{eq:e.threadId},threadUrl:{eq:e.link},threadTypeName:{eq:e.type},terms:[e.title,a]};null!==e.price&&void 0!==e.price&&""!==e.price&&(l.price={eq:e.price});const{data:{groups:d}}=await u(l),p=e.type===o.e;if(d.length<1)return s.a.commit("threadForm/UPDATE_FIELD",{path:"thread.groups",value:e.groups.filter((e=>!e.assignedBySystem))}),void s.a.commit("threadForm/UPDATE_FIELD",{path:"groups",value:n.filter((e=>Object(r.g)(e,p)!==i.a||!e.assignedBySystem)).map((e=>Object.assign({},e,{matchesAutoAssignment:!1})))});if(c(e)&&!p||c(e)&&(e=>e.groups.some((e=>e.source===i.c)))(e))return;const h=d.map((e=>Object.assign({},e,{assignedBySystem:!0}))),m=h.reduce(((e,t)=>(e.primary||Object(r.g)(t,p)!==i.b||(e.groups.push(t),e.primary=!0),e.secondary||Object(r.g)(t,p)!==i.c||(e.groups.push(t),e.secondary=!0),Object(r.g)(t)===i.a&&e.groups.push(t),e)),{primary:!1,secondary:!1,groups:[]}),f=[...n.filter((e=>!h.some((t=>t.threadGroupId===e.threadGroupId)))).map((e=>Object.assign({},e,{matchesAutoAssignment:!1}))),...h.filter((e=>Object(r.g)(e,p)!==i.a)).map((e=>Object.assign({},e,{matchesAutoAssignment:!0})))],g=[...e.groups.filter((e=>!e.assignedBySystem)),...m.groups];s.a.commit("threadForm/UPDATE_FIELD",{path:"groups",value:f}),s.a.commit("threadForm/UPDATE_FIELD",{path:"thread.groups",value:g})}catch(e){}},p=e=>{const{cpcLink:t,claimCodeCampaignId:n,isExclusive:a,nsfw:r,scheduledReleaseDate:i,events:l,disclaimers:c,uploadImage:u}=s.a.state.threadForm.features,d=t||n||a||r||i||l||c;return e.type===o.e?d||u:d}},617:function(e,t,n){"use strict";n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return x}));var s=n(32),a=n.n(s),r=n(1),i=n(643),o=n(754);var l=n(105),c=n(6),u=n(118),d=n(725),p=n(17);const h=["merchant","morphsTo","user","shippingPrice","freeShipping","events","groups","images","imageSuggestions","mainImage","galleryImages","disclaimers","titleSlug","threadTypeId","preparedHtmlDescription"],m=["isSelected","source","matchesAutoAssignment"],f=["checked"],g=(e,t)=>{let{mentions:n,morph:s}=t;const{merchant:{merchantId:r,merchantName:c}={},shippingPrice:u,freeShipping:d,events:g,groups:v,galleryImages:b,disclaimers:y}=e,_=a()(e,h);switch(_.mentions=n,s&&(_.morph=_.type),r&&(_.merchant={merchantId:r,merchantName:c}),_.groups=v.map((e=>a()(e,m))),_.events=g.map((e=>a()(e,f))),_.locations.id||delete _.locations,_.startDate.timestamp||(_.startDate=null),_.endDate.timestamp||(_.endDate=null),_.scheduledReleaseDate.timestamp||(_.scheduledReleaseDate=null),Object(i.a)(d)&&Object(i.a)(u)||(_.shipping={isFree:!!d,price:u||0}),[p.o,p.a,p.g].includes(_.type)?((_.type===p.a&&!_.price&&!Object(o.b)(_.price)||[p.o,p.g].includes(_.type)&&Object(o.a)(_.price))&&(_.price=""),_.percentage||(_.percentage=0)):(delete _.price,delete _.percentage,delete _.isLocal),_.discountType){case p.c:delete _.price;break;case p.d:delete _.percentage;break;case p.b:delete _.price,delete _.percentage}return _.type===p.a?_.nextBestPrice||(_.nextBestPrice=0):_.nextBestPrice||delete _.nextBestPrice,_.disclaimers=y.map((e=>{let{threadDisclaimerId:t}=e;return{threadDisclaimerId:t}})),Object.assign({},_,"locations"in _&&{locations:(w=_.locations,"1"===w.id&&w.checked&&delete w.items,w)},{galleryImages:{bucket:"threads",slots:b.map((e=>{const t={remoteUrl:e.remoteUrl||"",slotData:null};return e.remoteUrl||(t.slotData=Object(l.d)(e)?Object.assign({},e.slots[0]):Object.assign({},e)),t}))}});var w},v=function(){let{threadData:e,mentions:t="",morph:n=!1,token:s=null,ocular:a=null,descriptionEditOnly:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.Ac)({payload:{thread:g(e,{mentions:t,morph:n}),token:s,ocular:a,descriptionEditOnly:i}})},b=e=>{const t=[];return Object.entries(e).forEach((e=>{let[n,s]=e;if(Array.isArray(s)&&s.length){const e=s[0].translations[0];t.push({title:e.title,text:e.body,type:n})}})),t},y=async function(e){const t=await Object(d.f)(e);return{request:t.request.then(b),cancel:t.cancel}},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object(c.d)(Object(d.a)(e,t),11e3);return{request:n.request.then((e=>{var t;let{duplicates:n}=e;return null!=n&&null!==(t=n.threads)&&void 0!==t&&t.length?n:null})),cancel:n.cancel}},w=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Object(c.d)(Object(d.b)(e,t,n),5e3);return{request:s.request.then((e=>{let{duplicates:t}=e;return null!=t&&t.length?t:[]})),cancel:s.cancel}},k=()=>Object(u.c)(),x=(e,t)=>{t.map((t=>{let n=t.path;return"threadLocationSelected"===n&&(n="locations"),e.setMessages(n,t.translations.map((e=>({text:e.body}))))}))}},629:function(e,t,n){},632:function(e,t,n){"use strict";var s=n(598),a=n(71),r={name:"WysiwygButton",components:{BaseButton:n(508).a},mixins:[Object(s.a)(),Object(a.a)({button:{any:!0,smAndDown:!0,mdAndDown:!0,lgAndDown:!0},text:{any:!0,smAndDown:!0,mdAndDown:!0,lgAndDown:!0}})],props:{action:{type:Object,default:()=>({})},target:{type:String,required:!0}},computed:{$directives(){return{"wysiwyg-button":Object.assign({},this.action,{target:this.target}),"popover-close":null}}}},i=n(45),o=Object(i.a)(r,(function(){var e=this,t=e._self._c;return t("BaseButton",{class:["space--mr-1",`button--${e.action.key}`],attrs:{variant:"tag",mode:"light",square:"",title:e.action.title,"data-handler":e.$d.handlers,"data-wysiwyg-button":e.$d.params["wysiwyg-button"]}},[t("BaseIcon",{attrs:{name:e.action.icon}})],1)}),[],!1,null,null,null);t.a=o.exports},638:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return v}));var s=n(750),a=n.n(s),r=n(105),i=n(1),o=n(522),l=n(567),c=n(4);const u=(e,t)=>{let{variation:n}=t;try{if(!e)return"";if(a()(e))return e;if(Object(r.d)(e))return Object(r.e)(e,e.slots[0].name,n);const t=[["re",300,300],["ft","jpg"],["qt",60]];return new o.a(e).apply(t).toString()}catch(e){}return null},d=e=>{try{return!(!e||a()(e))&&(Object(r.d)(e)?!!Object(r.f)(e,e.slots[0].name,{}).isPoorQuality:e.isPoorQuality)}catch(e){}return!1},p=async e=>{let{bucket:t,value:n,fileName:s}=e;return"string"==typeof n?await Object(i.hd)({url:n,bucket:t}):await Object(i.gd)({file:n,bucket:t,fileName:s})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["image/jpg","image/jpeg","image/png","image/gif","image/webp"];return(null==e?void 0:e.type)&&t.includes(e.type)};function m(e){c.a.dispatch("pageMsgs/set",[Object.assign({type:"error",priority:"low"},e)])}function f(){m({body:e("The :attribute may not be greater than :max kilobytes.",{replaces:{attribute:"image",max:l.d}})})}function g(t){m({body:e("{1} Allowed number of images is :max_allowed|{2} Allowed number of images is :max_allowed|[3,*] Allowed number of images is :max_allowed",{replaces:{max_allowed:t},count:t})})}function v(e){m({title:"paste-local-file"===e?"Pasting local images (from clipboard) is not possible.":"Dragging local images is not possible.",body:"Please use the upload button instead."})}}).call(this,n(70).translation)},643:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i}));n(316);const s={req:e=>{if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"==typeof e){for(let t in e)return!0;return!1}return!!String(e).length},withParams:(e,t)=>async function(){const n=await t(...arguments);return"object"==typeof n?e=Object.assign({},e,n):e.valid=n,e}},a=e=>null==e||""===e,r=e=>a(e)||""===e,i=e=>a(e)||Array.isArray(e)&&0===e.length},644:function(e,t,n){"use strict";(function(e){var s=n(5);t.a=Object(s.defineComponent)({__name:"character-counter",props:{value:null,maxCharacters:{default:140}},setup(t){const n=t,a=Object(s.computed)((()=>n.value.length>n.maxCharacters?"text--color-red":"")),r=Object(s.computed)((()=>n.maxCharacters-n.value.length)),i=Object(s.computed)((()=>e("1 character remaining|:count characters remaining",{replaces:{remaining:r.value},count:r.value})));return{__sfc:!0,props:n,textColor:a,remaining:r,remainingLabel:i}}})}).call(this,n(70).translation)},654:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(14);t.b={created(){this.markForRestore=this.markForRestore.bind(this),this.undoRestore=this.undoRestore.bind(this),this.clearRestore=this.clearRestore.bind(this),this.restoreStorage=new s.a("redactor-restore")},data:()=>({restoredContent:"",initialContent:"",restoreId:""}),watch:{restoredContent(e){this.$emit("canRestore",Boolean(e))}},methods:{restoreConfig(){return{markForRestore:this.markForRestore}},markForRestore(e){let{restoreId:t,restoredContent:n,initialContent:s}=e;this.restoreId=t,this.restoredContent=n||"",this.initialContent=s||""},undoRestore(){this.$editor.code.set(this.initialContent,!0),this.clearRestore()},clearRestore(){this.restoreStorage.del(this.restoreId),this.restoredContent=""}}};const a=e=>{new s.a("redactor-restore").del(e)}},655:function(e,t,n){"use strict";t.a=(e,t)=>(e[t]=!0,()=>{e[t]=!1})},667:function(e,t,n){"use strict";var s=n(539),a=n(520),r=n(518),i=n(525),o=n(513),l=n(521);t.a={components:{BaseModal:s.a,ModalHead:a.a,ModalBody:r.a,ModalFooter:i.a,ModalClose:o.a,ModalAsync:l.a}}},670:function(e,t,n){"use strict";var s=n(562),a=n(6),r=n(1);var i={components:{AutoSuggest:s.a},inheritAttrs:!1,model:{event:"update"},props:{listIcon:{type:String,default:"plus"},manualClean:{type:Boolean,default:!1}},methods:{searchMerchants:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return Object(a.a)({req:r.tc,params:{term:e,limit:t}}).then((e=>e.merchants))}}},o=i,l=n(45),c=Object(l.a)(o,(function(){var e=this;return(0,e._self._c)("AutoSuggest",e._g(e._b({attrs:{items:e.searchMerchants,"item-text":"merchantName","item-value":"merchantId","input-icon":"merchant","list-icon":e.listIcon,"manual-clean":e.manualClean,"no-filter":"",clearable:"","close-on-clear":""}},"AutoSuggest",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=c.exports},674:function(e,t,n){"use strict";var s=n(678),a=n.n(s);const r={angel:"Angel",annoyed:"Annoyed",blank:"Blank",cheeky:"Cheeky",confused:"Confused",cool:"Cool",creep:"",cry:"Cry",devil:"Devil",embarrassed:"Embarrassed",excited:"Excited",fierce:"Fierce",flirt:"Flirt",football:"Football",happy:"Happy",highfive:"Highfive",horror:"Horror",kitty:"Kitty",laugh:"Laugh",lipstick:"Lipstick",lol:"lol",love:"Love",lucha:"Lucha (es)",mad:"Mad",nerd:"Nerd",ninja:"Ninja",nutella:"Nutella (de,pl)",onion:"Onion (pl)",party:"Party",pirate:"Pirate",police:"Police (es)",poo:"Poo",popcorn:"Popcorn",rainbow:"Rainbow",relieved:"Relieved",sad:"Sad",shock:"Shock",sir:"Sir",skeptical:"Skeptical",smiley:"Smiley",strong:"Strong",superfunny:"Superfunny",thumb:"Thumb",tongue:"Tongue",unicorn:"Unicorn",wink:"Wink",woot:"Woot",worldcup:"World Cup",worried:"Worried",zombie:"Zombie"};t.a=Object.freeze(Object.keys(a.a).map((e=>Object.assign({name:e,label:r[e]},a.a[e]))))},678:function(e,t,n){e.exports=n(679)},679:function(e,t,n){const s=n(680);e.exports=Object.assign(s,{excited:{text:"(excited)",availableIn:["emoticon-popover"],order:15},flirt:{text:"(flirt)",availableIn:["emoticon-popover"],order:27},football:{text:"(football)",availableIn:[],order:47},lipstick:{text:"(lipstick)",availableIn:["emoticon-popover"],order:45},strong:{text:"(strong)",availableIn:["emoticon-popover"],order:44},unicorn:{text:"(unicorn)",availableIn:["emoticon-popover"],order:25},worldcup:{text:"(worldcup)",availableIn:[],order:46}})},680:function(e,t){e.exports={angel:{text:"(angel)",availableIn:["emoticon-popover"],order:10},annoyed:{text:"(annoyed)",availableIn:["emoticon-popover"],order:31},blank:{text:":|",availableIn:["emoticon-popover"],order:28},cheeky:{text:"(cheeky)",availableIn:["emoticon-popover"],order:12},confused:{text:"(confused)",availableIn:["emoticon-popover"],order:29},cool:{text:"8)",availableIn:["emoticon-popover"],order:19},cry:{text:";(",availableIn:["emoticon-popover"],order:38},devil:{text:"(devil)",availableIn:["emoticon-popover"],order:42},embarrassed:{text:"(embarrassed)",availableIn:["emoticon-popover"],order:13},fierce:{text:"(fierce)",availableIn:["emoticon-popover"],order:34},happy:{text:":D",availableIn:["emoticon-popover"],order:3},highfive:{text:"(highfive)",availableIn:["emoticon-popover"],order:18},horror:{text:"(horror)",availableIn:["emoticon-popover"],order:36},kitty:{text:":3",availableIn:["emoticon-popover"],order:43},laugh:{text:"XD",availableIn:["emoticon-popover"],order:5},lol:{text:"(lol)",availableIn:["emoticon-popover"],order:6},love:{text:"<3",availableIn:["emoticon-popover"],order:14},mad:{text:"(mad)",availableIn:["emoticon-popover"],order:33},nerd:{text:"(nerd)",availableIn:["emoticon-popover"],order:21},ninja:{text:"(ninja)",availableIn:["emoticon-popover"],order:22},party:{text:"(party)",availableIn:["emoticon-popover"],order:16},pirate:{text:"(pirate)",availableIn:["emoticon-popover"],order:24},poo:{text:"(poo)",availableIn:["emoticon-popover"],order:41},popcorn:{text:"(popcorn)",availableIn:["emoticon-popover"],order:7},relieved:{text:"(:I",availableIn:["emoticon-popover"],order:9},sad:{text:":(",availableIn:["emoticon-popover"],order:32},shock:{text:"(shock)",availableIn:["emoticon-popover"],order:35},sir:{text:":{",availableIn:["emoticon-popover"],order:20},skeptical:{text:"(skeptical)",availableIn:["emoticon-popover"],order:30},smiley:{text:":)",availableIn:["emoticon-popover"],order:1},thumb:{text:"(y)",availableIn:["emoticon-popover"],order:2},tongue:{text:":p",availableIn:["emoticon-popover"],order:17},wink:{text:";)",availableIn:["emoticon-popover"],order:11},woot:{text:":o",availableIn:["emoticon-popover"],order:39},worried:{text:":S",availableIn:["emoticon-popover"],order:37},zombie:{text:"(zombie)",availableIn:["emoticon-popover"],order:47}}},681:function(e,t,n){e.exports=n(682)},682:function(e,t){e.exports=function(e){return e&&e.length?e[0]:void 0}},683:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return m}));var s=n(60),a=n(17),r=n(565);const i=function(e){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.isDefault&&e.isDiscussion:e.isDefault&&!e.isDiscussion)},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.source?e.source:i(e,t)?"primary":e.isDefault&&t?"secondary":e.isDefault?"tertiary":"other"},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((e=>Object.assign({},e,{source:o(e,t)})))},c=e=>!!e.isSelected,u=e=>!(!e.assignedBySystem||!e.matchesAutoAssignment),d=(e,t)=>{const n=[...t],s=n.findIndex((t=>t.threadGroupId===e.threadGroupId));return s>-1&&n.splice(s,1),c(e)&&n.push(e),n},p=(e,t,n)=>{const a=((e,t)=>{const n=e.find((e=>e.threadGroupId===t.id));return n?(n.isSelected=t.isSelected,n.source=n.source||s.a,n):null})(t,n);return a?d(a,e):null},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n={threadGroups:[],systemAssignedGroups:[]},s=e===a.e,o=s?"discussionThreadGroups":"threadGroups",l=e=>i(e,s);return s&&(n.discussionThreadGroups=[]),n[o].push(Object(r.j)({translation:"Please pick the most relevant category"}),Object(r.g)(1,{},l)),t&&n[o].push(Object(r.d)(t,{},l)),n};function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"groups";const n=Object.assign({},e);return Object.keys(n).forEach((e=>{n[e]={fieldName:t,rules:n[e]}})),n}},699:function(e,t,n){"use strict";n(629)},700:function(e,t,n){"use strict";t.a={methods:{preserveSelection(){const e=this.$editor;e&&!e.isSelectionStored&&(e.selection.save(),e.isSelectionStored=!0,e.$editor.one("focusin",(()=>{e.selection.restore(),e.isSelectionStored=!1})))}}}},701:function(e,t,n){"use strict";var s=n(0),a=n.n(s),r=n(104);t.a={created(){this.registerHandler("link","handleLink"),this.registerWriter("updateLink","updateLink"),this.registerWriter("removeLink","removeLink")},methods:{captureLinkSelection(){if(!this.$editor)return{href:"",content:""};const e=this.$editor.utils.isCurrentOrParent("A"),t=e?e.href:"",n=e?e.innerHTML:this.$editor.selection.getHtml()||this.$editor.selection.getCurrent().innerHTML;return{href:t,content:n?Object(r.c)(n):""}},handleLink(e){if(!this.pluginEnabled("link"))return;const{href:t,content:n}=e;void 0!==t&&(this.plugins.link.href=t),void 0!==n&&(this.plugins.link.content=n)},updateLink(e){let{href:t,content:n}=e;if(!this.$editor)return;this.$editor.$editor.focus(),n||(n=this.$editor.selection.getHtml()||this.$editor.selection.getCurrent().innerHTML||t);let s=this.$editor.utils.isCurrentOrParent("A");this.$editor.buffer.set(),s||(s=this.$editor.insert.node(document.createElement("a"))),s&&(s.href=/^https?:\/\//.test(t)?t:"https://"+t,s.innerHTML=n,s.target="_blank"),this.$editor.code.sync()},updateLinkSelection(){"link"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)&&this.handleLink(this.captureLinkSelection())},removeLink(){if(!this.$editor)return;this.$editor.$editor.focus();const e=this.$editor.utils.isCurrentOrParent("A");e&&(this.$editor.buffer.set(),a()(e).replaceWith(a()(e).contents()),this.$editor.code.sync())}}}},702:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e.vue)return e.vue(t)}},703:function(e,t,n){"use strict";var s=n(10),a=n.n(s),r=n(11),i=n.n(r),o=n(0),l=n.n(o),c=n(611),u=n(104),d=n(52);const p={};c.a.shortcode=function(){return{instance:null,init:function(){this.shortcode.instance=new p.Shortcode(this)}}},p.Shortcode=function(){function e(t){a()(this,e);const n=this;let s;n.redactor=t,n.namespace=t.opts.shortcodeNamespace,"function"==typeof t.opts.markForShortcodes?t.opts.markForShortcodes(n.updateForm.bind(n)):(n.$form=l()(t.$element[0].form),n.$form.on("submit",n.updateForm.bind(n))),s=n.readForm(),n.types={},t.replacer.add({regexp:/\[shortcode id="([^"]+)"\/]/g,replacer:function(e,t,a,r){return n.html(s[r])}}),t.code.syncTransformers.push((function(e){return e.find("[data-embed]").each((function(){const e=l()(this);e.replaceWith(n.marker(e.data("embed")))})),e})),t.$editor.on("click","[data-embed]",(function(){const e=l()(this),s=n.data(e),a=n.getType(s);a.onClick&&a.onClick(s,e,t)}))}return i()(e,[{key:"readForm",value:function(){return this.redactor.opts.formatShortcodes?this.redactor.opts.formatShortcodes():this.$form.find('input[name^="'+this.namespace+'["]').get().reduce((function(e,t){return d.a.inputToJson(t.name,t.value,e)}),{})[this.namespace]||{}}},{key:"updateForm",value:function(){const e=this.embeds().get().map((function(e){return this.data(l()(e))}),this);if(this.redactor.opts.vue)return e;this.$form.find('input[name^="'+this.namespace+'["]').remove(),e.length&&this.$form.append(e.reduce(function(e,t){return e.concat(d.a.jsonToInputs(t,[],this.namespace+"["+t.id+"]"))}.bind(this),[]))}},{key:"registerType",value:function(e){this.types[e.name]=e}},{key:"getType",value:function(e){return e&&this.types[e.type]||null}},{key:"add",value:function(e){return e.id="new".concat(Date.now()),l()(this.redactor.insert.node(l()(this.html(e))))}},{key:"set",value:function(e){this.embed(e.id).replaceWith(this.html(e)),this.redactor.replacer.format("shortcode"),this.redactor.code.sync()}},{key:"del",value:function(e){this.embed(e).remove(),this.redactor.code.sync()}},{key:"marker",value:function(e){return'[shortcode id="'+e+'"/]'}},{key:"html",value:function(e){const t=this.getType(e);return t?t.html(this.redactor,l.a.extend({attr:' data-embed="'+e.id+'" data-embed-obj="'+u.a.escapeHtml(JSON.stringify(e))+'" contenteditable="false"'},e)):""}},{key:"embed",value:function(e){return this.redactor.$editor.find('[data-embed="'+e+'"]')}},{key:"embeds",value:function(){return this.redactor.$editor.find("[data-embed]")}},{key:"data",value:function(e){return e.data("embed-obj")}}]),e}(),p.find=function(e){const t=l()('[data-embed="'+e+'"]').closest(".redactor").find("textarea").data("redactor");return t?t.shortcode.instance:null},p.isChild=function(e){return Boolean(l()(e).closest("[data-embed]").length)},t.a=p},705:function(e,t,n){"use strict";var s=n(674),a={props:{filter:{type:String,default:"emoticon-popover"},mode:{type:String,default:"default"}},data:()=>({emojis:s.a,selected:null}),computed:{availableEmojis(){return this.emojis.filter((e=>e.availableIn.includes(this.filter))).sort(((e,t)=>e.order-t.order))}},methods:{emojiType:e=>"emoji--type-".concat(e.name),preview(e){this.selected=e,this.$emit("preview",{emoji:"&nbsp;".concat(e.text,"&nbsp;")})},insert(e,t){t.stopImmediatePropagation(),t.preventDefault(),this.$emit("insert",{emoji:"&nbsp;".concat(e.text,"&nbsp;"),event:t})}}},r=(n(699),n(45)),i=Object(r.a)(a,(function(){var e=this,t=e._self._c;return t("div",[t("ul",{staticClass:"emojiSelector-list cGrid boxAlign-jc--all-sb"},e._l(e.availableEmojis,(function(n){return t("li",{key:n.name,staticClass:"box--all-i hAlign--all-c"},[t("button",{staticClass:"button button--emoji button--shape-circle button--square space--h-1 space--v-1",class:{"button--selected":n===e.selected},attrs:{type:"button",title:n.text},on:{mouseenter:function(t){return e.preview(n)},touchstart:function(t){return e.insert(n,t)},click:function(t){return e.insert(n,t)}}},[t("span",{class:["emoji",e.emojiType(n)]})])])})),0)])}),[],!1,null,null,null);t.a=i.exports},706:function(e,t,n){"use strict";var s=n(565),a=n(510),r=n(590),i={components:{BaseButton:n(508).a,FormList:a.l,FormRow:a.o,FormLabel:a.k,FormMessageList:a.m,FormContent:a.c,FormInput:a.e},mixins:[r.b],model:{event:"update",prop:"link"},props:{id:{type:String,default:"insertLink"},link:{type:Object,default:()=>({href:"",content:""})},i18n:{type:Object,default:()=>({insertButtonText:"Insert",updateButtonText:"Update",unlinkButtonText:"Remove",urlLabel:"URL",contentLabel:"Text"})},mode:{type:String,default:"default"}},data(){return{linkUrl:this.link.href,formName:this.id,updating:!!this.link.href}},computed:{buttonDisabled(){return!this.linkUrl.length}},watch:{"$v.$invalid"(e){this.$emit("invalid",e)}},validations:{href:[Object(s.j)(),Object(s.n)()]},methods:{setLinkUrl(e){this.linkUrl=e},remove(e){this.$emit("remove",{event:e})},insert(e){this.$v.$invalid||this.$emit("insert",{link:this.link,event:e})}}},o=n(45),l=Object(o.a)(i,(function(){var e=this,t=e._self._c;return t("div",{},[e.$v.error[e.id]?t("FormMessageList",{staticClass:"text--b space--b-2",attrs:{messages:e.$v.messages[e.id]}}):e._e(),t("FormList",[t("FormRow",{attrs:{error:e.$v.error.href}},[t("FormLabel",[e._v(e._s(e.i18n.urlLabel))]),t("FormContent",[t("FormInput",{attrs:{name:"href"},on:{change:function(t){return e.$v.validate("href",e.link.href)},update:function(t){return e.setLinkUrl(e.link.href)}},model:{value:e.link.href,callback:function(t){e.$set(e.link,"href",t)},expression:"link.href"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.href}})],1)],1),t("FormRow",{attrs:{error:e.$v.error.content}},[t("FormLabel",[e._v(e._s(e.i18n.contentLabel))]),t("FormContent",[t("FormInput",{attrs:{name:"content"},model:{value:e.link.content,callback:function(t){e.$set(e.link,"content",t)},expression:"link.content"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.content}})],1)],1),t("FormRow",[t("FormContent",{staticClass:"flex",class:{"boxAlign-jc--all-sb":e.updating}},[e.updating?t("BaseButton",{staticClass:"flex--shrink-0 space--mr-2",attrs:{variant:"tertiary",mode:"default"},on:{click:e.remove}},[e._v(" "+e._s(e.i18n.unlinkButtonText)+" ")]):e._e(),t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:e.buttonDisabled},on:{click:e.insert}},[e._v(" "+e._s(e.updating?e.i18n.updateButtonText:e.i18n.insertButtonText)+" ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=l.exports},708:function(e,t,n){"use strict";var s=n(517),a=n(632),r=n(705),i=n(706),o=n(565),l=n(510),c=n(590),u=n(508),d={components:{BaseButton:u.a,FormList:l.l,FormRow:l.o,FormMessageList:l.m,FormContent:l.c,FormTextarea:l.s},mixins:[c.b],model:{event:"update"},props:{id:{type:String,default:"insertCode"},i18n:{type:Object,default:()=>({buttonText:"Insert"})},mode:{type:String,default:"default",validators:e=>-1!==["primary","default"].indexOf(e)}},validations:{code:[Object(o.j)()]},data(){return{formName:this.id,code:""}}},p=n(45),h=Object(p.a)(d,(function(){var e=this,t=e._self._c;return t("FormList",[t("FormRow",{attrs:{error:e.$v.error.code}},[t("FormContent",[t("FormTextarea",{staticClass:"space--mt-1",attrs:{id:"codePopover-code",rows:"5",placeholder:"HTML code",name:"code"},on:{change:function(t){return e.$v.validate("code",e.code)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.code}})],1)],1),t("FormRow",[t("FormContent",[t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:!e.code},on:{click:function(t){return e.$emit("insert",e.code)}}},[e._v(" "+e._s(e.i18n.buttonText)+" ")])],1)],1)],1)}),[],!1,null,null,null).exports,m=n(71),f=n(598),g={components:{InsertLink:i.a,InsertCode:h,EmojiSelector:r.a,WysiwygButton:a.a,BaseButton:u.a},mixins:[s.a,Object(m.a)({button:{any:!0,smAndDown:!0},buttonText:{any:!0,smAndDown:!0,mdAndDown:!0},primaryButton:{any:!0,smAndDown:!0},primaryButtonText:{any:!0,smAndDown:!0},toolbarActions:{xsOnly:!0,smAndDown:!0},toolbarCompactButton:{smAndUp:!0}})],props:{target:{type:String,required:!0},directives:{type:Object,default:()=>({})},expanded:{type:Boolean,default:!1},plugins:{type:Object,default:()=>({})}},data:()=>({actionsPopoverActive:!1,emojiPopoverActive:!1,linkPopoverActive:!1,imageUploadPopoverActive:!1,htmlPopoverActive:!1}),computed:{popoverLayouts(){const e={preset:"s",right:{target:".redactor"},left:{target:".redactor"},classes:"zIndex--modal"};return[e,Object.assign({},e,{preset:"n"})]},imageUploadAvailable(){return(!!this.$slots["image-upload"]||!!this.$scopedSlots["image-upload"])&&this.plugins.image},toggleExpandedText(){return this.expanded?"Contract":"Expand"},$d(){return Object.assign({expandEditor:Object(f.b)({toggle:{toggles:[{target:".redactor",className:"aGrid redactor--height-full bg--main"}]}})},this.directives)}},methods:{updatePlugin(e,t){this.$emit("plugin-update",{key:e,value:t})},toggleExpandEditor(){this.$emit("editor-expand",!this.expanded)},captureFocus(e){this.$emit("editor-capture",e)}}},v={components:{WysiwygToolbarBase:Object(p.a)(g,(function(){var e=this,t=e._self._c;return t("div",e._g(e._b({staticClass:"toolbar space--h-2 width--all-12"},"div",e.$attrs,!1),e.$listeners),[e._t("before"),e.$scopedSlots.actions?t("div",[t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",class:[e.toolbarCompactButtonResponsive],attrs:{variant:"tag",mode:"light",selected:e.actionsPopoverActive,title:"Text"}},[t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"format-text"}}),t("BaseIcon",{staticClass:"button-dropdown-icon",attrs:{name:"dropdown"}}),t("BasePopover",{attrs:{active:e.actionsPopoverActive},on:{"update:active":function(t){e.actionsPopoverActive=t},open:function(t){return e.captureFocus("formatText")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"format-text"}},[e._v(e._s("Text"))]),t("PopoverBody",[e._t("actions",null,{close:n})],2)]}}],null,!0)})],1),t("span",{class:e.toolbarActionsResponsive},[e._t("actions",null,{close:()=>null})],2)],1):e._e(),e.plugins&&e.plugins.line?t("WysiwygButton",{attrs:{action:e.plugins.line,target:e.target,breakpoints:e.plugins.line.breakpoints}}):e._e(),e.plugins.emoji?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Emoji",selected:e.emojiPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"smiley"}}),t("BasePopover",{attrs:{active:e.emojiPopoverActive,width:"300","mobile-sheet":""},on:{"update:active":function(t){e.emojiPopoverActive=t},open:function(t){return e.captureFocus("emoji")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"smiley"}},[e._v(e._s("Emoticons"))]),t("PopoverBody",[t("EmojiSelector",{on:{insert:function(t){e.$emit("editor-insert",{content:t.emoji}),n()}}})],1)]}}],null,!1,1470812403)})],1):e._e(),e.plugins.link?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Link",selected:e.linkPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"link"}}),t("BasePopover",{attrs:{active:e.linkPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.linkPopoverActive=t},open:function(t){return e.captureFocus("link")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"link"}},[e._v(e._s("Link"))]),t("PopoverBody",[t("InsertLink",{attrs:{link:{...e.plugins.link}},on:{remove:function(t){e.$emit("editor-insert",{method:"removeLink"}),n()},insert:function(t){e.$emit("editor-insert",{content:t.link,method:"updateLink"}),n()},update:function(t){return e.updatePlugin("link",t)}}})],1)]}}],null,!1,541552780)})],1):e._e(),e.imageUploadAvailable?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Image",selected:e.imageUploadPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"image"}}),t("BasePopover",{attrs:{active:e.imageUploadPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.imageUploadPopoverActive=t},open:function(t){return e.captureFocus("image")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"image"}},[e._v(e._s("Insert image"))]),t("PopoverBody",[e._t("image-upload",null,{close:n})],2)]}}],null,!0)})],1):e._e(),e.plugins.html?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"HTML code",selected:e.htmlPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"code"}}),t("BasePopover",{attrs:{active:e.htmlPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.htmlPopoverActive=t},open:function(t){return e.captureFocus("html")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"code"}},[e._v(e._s("Insert HTML code"))]),t("PopoverBody",[t("InsertCode",{on:{insert:function(t){e.$emit("editor-insert",{content:t}),n()}}})],1)]}}],null,!1,896037972)})],1):e._e(),e.plugins.expand?t("BaseButton",{class:{"button-expand--selected":e.expanded},attrs:{variant:"tag",mode:"light",square:"","data-handler":e.$d.expandEditor.handlers,"data-toggle":e.$d.expandEditor.params.toggle,title:e.toggleExpandedText},on:{click:e.toggleExpandEditor}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:e.expanded?"contract":"expand"}})],1):e._e(),e._t("after")],2)}),[],!1,null,null,null).exports,WysiwygButton:a.a},props:{target:{type:String,required:!0},plugins:{type:Object,default:()=>({})},breakpoints:{type:Object,default:()=>({toolbarActions:{xsOnly:"hide"},toolbarCompactButton:{smAndUp:"hide"}})}},computed:{hasActions(){return this.plugins.bold||this.plugins.strike||this.plugins.italic||this.plugins.list}}},b=Object(p.a)(v,(function(){var e=this,t=e._self._c;return t("WysiwygToolbarBase",e._g(e._b({attrs:{target:e.target,plugins:e.plugins,breakpoints:e.breakpoints},scopedSlots:e._u([{key:"before",fn:function(){return[e._t("before")]},proxy:!0},e.hasActions?{key:"actions",fn:function({close:n}){return[t("span",{staticClass:"flex"},[e.plugins.bold?t("WysiwygButton",{attrs:{action:e.plugins.bold,target:e.target,breakpoints:e.plugins.bold.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e(),e.plugins.strike?t("WysiwygButton",{attrs:{action:e.plugins.strike,target:e.target,breakpoints:e.plugins.strike.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e(),e.plugins.italic?t("WysiwygButton",{attrs:{action:e.plugins.italic,target:e.target,breakpoints:e.plugins.italic.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e(),e.plugins.list?t("WysiwygButton",{attrs:{action:e.plugins.list,target:e.target,breakpoints:e.plugins.list.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e()],1)]}}:null,{key:"image-upload",fn:function({close:t}){return[e._t("image-upload",null,{close:t})]}},{key:"after",fn:function(){return[e._t("after")]},proxy:!0}],null,!0)},"WysiwygToolbarBase",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=b.exports},709:function(e,t,n){"use strict";var s={components:{ImageUploadForm:n(726).a},props:{bucket:{type:String},variation:{type:String,default:"content"},mode:{type:String,default:"default"}},methods:{async handleSubmit(e){this.$emit("upload",e)}}},a=n(45),r=Object(a.a)(s,(function(){var e=this;return(0,e._self._c)("ImageUploadForm",{attrs:{mode:e.mode,"has-alignment-selector":"","has-url-input":"","show-file-name":"","is-loading":!1},on:{submit:e.handleSubmit}})}),[],!1,null,null,null);t.a=r.exports},716:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=function(e){e&&"function"==typeof e.cancel&&e.cancel()}},717:function(e,t,n){"use strict";var s=n(313),a=n(598),r=n(708),i=n(709),o=n(700);let l=null;var c,u,d={created(){this.$on("focus",(()=>{l=this.name}))}},p={methods:{textConfig(e){let{breakpoints:t={button:{any:"btn--square"},text:{any:"hide"}}}=e;return{bold:{module:"inline",fn:"format",args:["strong"],title:"Bold",key:"bold",icon:"bold",breakpoints:t},strike:{module:"inline",fn:"format",args:["del"],title:"Deleted",key:"deleted",icon:"strike",breakpoints:t},italic:{module:"inline",fn:"format",args:["em"],title:"Italic",key:"italic",icon:"italic",breakpoints:t},list:{module:"list",fn:"toggle",args:["unorderedlist"],title:"List",key:"unorderedlist",icon:"bullet-list",breakpoints:t},blockquote:{breakpoints:t},line:{module:"line",fn:"insert",title:"Line",key:"line",icon:"line",breakpoints:t,showOnExpand:!0}}}}},h=n(701),m=n(32),f=n.n(m),g=n(132),v=n.n(g),b=(n(8),n(20));const y=e=>Object(b.b)(c||(c=v()(["/image/upload/","?"])),e),_=e=>Object(b.b)(u||(u=v()(["/image/upload-from-uri/","?"])),e),w=["type","value"];var k={created(){this.registerWriter("insertImage","insertImage")},computed:{imageUploadAvailable(){return(!!this.$slots["image-upload"]||!!this.$scopedSlots["image-upload"])&&this.pluginConfig.plugins.image}},methods:{insertImage(e){this.$editor.$editor.focus();const{type:t,value:n}=e,a=f()(e,w);Object(s.a)(this.$editor,a,{[t.toLowerCase()]:n})},imageConfig(e){return{image:Object.assign({bucket:e.imageBucket,variation:e.imageVariation},this.plugins.image||{})}},imageUploadConfig(e){let{imageVariation:t="content",imageBucket:n="threads"}=e;return{imageFormat:t,imageType:t,imageUploadEndpoint:y(n),imageLinkEndpoint:_(n),imageVariation:t,imageBucket:n}}}},x={methods:{htmlConfig:()=>({html:!0})}},C={inheritAttrs:!1},O=n(45),j=Object(O.a)(C,(function(){var e=this,t=e._self._c;return t("div",[t("input",e._g(e._b({staticClass:"mentionList",attrs:{name:"mentionsList",type:"hidden"}},"input",e.$attrs,!1),e.$listeners)),e._m(0)])}),[function(){var e=this._self._c;return e("div",{staticClass:"mentions atwho-container space--t-2 space--h-2"},[e("span",{staticClass:"atwho-at mute--text lbox--v-2"},[this._v("@")]),e("ul",{staticClass:"atwho-view fGrid"})])}],!1,null,null,null).exports,S=n(578);var L={components:{Mentions:j},data:()=>({currentMentions:""}),created(){this.handleMentions=this.handleMentions.bind(this),this.updateMentions=this.updateMentions.bind(this),this.registerHandler("mentions","handleMentions")},methods:{handleMentions(e){this.plugins.mentions=e,this.currentMentions=e},updateMentions(){return this.currentMentions},mentionsConfig:()=>({searchUrl:S.i.getSuggestions,mentionInputSelector:".mentionList",profileUrl:"".concat("https://www.hotukdeals.com").concat(S.i.getProfile("==NameReplace==")),replacementKey:"==NameReplace=="})}};const I=["id","type"],T=["shortcode"],A=["shortcode","shortcode_id"];var P={created(){this.markForShortcodes=this.markForShortcodes.bind(this),this.updateShortcodes=this.updateShortcodes.bind(this),this.formatShortcodes=this.formatShortcodes.bind(this)},methods:{shortcodeConfig(){return{markForShortcodes:this.markForShortcodes,formatShortcodes:this.formatShortcodes}},markForShortcodes(e){this.redactorShortcode=e},updateShortcodes(){const e=this.plugins.shortcodes;return this.plugins.shortcodes=this.redactorShortcode().map((t=>{const{id:n,type:s}=t,a=f()(t,I),r=e.find((e=>e.shortcode_id===n))||{},{shortcode:i={}}=r,o=f()(r,T);return Object.assign({},o,{shortcode_id:n,type:s,shortcode:Object.assign({},i,a)})})),this.plugins.shortcodes},formatShortcodes(){var e;return null===(e=this.plugins.shortcodes)||void 0===e?void 0:e.reduce(((e,t)=>{let{shortcode:n,shortcode_id:s}=t,a=f()(t,A);return e[s]=Object.assign({id:s},a,n),e}),{})}}},F=n(654),B={methods:{expandEditor(e){this.expanded=e},expandConfig:()=>({expand:!0})}},E=n(5),D=n(0),$=n.n(D),M=n(2),N=n(7),R=n(46),U=n(3),q=n(104);const V={history:[],max:100};$()(document).on("focusin",(e=>{V.history.unshift(e)>V.max&&(V.history.length=V.max)}));var z=e=>{var t=null;return V.history.some((n=>{var s;return!(!$.a.contains(document,n.target)||!(s=$()(n.target)).is(e))&&(t=s,!0)})),t},H=n(611),G=n(702),W=n(44),K=n(23),Q=n(703);function Y(e,t,n){t=$()(t),N.a.process($.a.get(n.endpoint),{$trigger:t}).always(R.a.init(t,n.seal)).always(U.a.tmpClass(t,n.className)).done((function(t){const n=t.data.shortcode,s=e.shortcode.instance.add(n);e.$editor.scrollTop(s.position().top),e.caret.setAfter($()("<br><br>").insertAfter(s)[1])}))}function J(e,t){e=$()(e);const n=Q.a.find(t.id),s=n.data(n.embed(t.id));if(s){const a=void 0!==t.content?t.content:U.a.findTargets(e,t.textarea).val();s.content=q.a.escapeHtml(a),n.set(s)}e.trigger("layer-destroy")}function Z(e,t){e=$()(e);const n=Q.a.find(t.id);n&&n.del(t.id),e.trigger("layer-destroy")}H.a.quote=function(){return{init:function(){const e=this.opts,t={name:"quote",html:function(e,t){return t.content=q.a.escapeHtml(t.content),(e=>{let{attr:t,content:n,original_comment_username:s,original_comment_created_at_formatted:a}=e;return'\n\t<blockquote class="userHtml-quote" '.concat(t,'>\n\t\t<span class="userHtml-quote-author">').concat(s,'</span>\n\t\t<span class="userHtml-quote-time">').concat(a,'</span>\n\t\t<p class="userHtml-quote-content">').concat(n,"</p>\n\t</blockquote>\n")})(t)},onClick:function(t,n){Object(G.a)(e,{key:"editQuote",value:t}),W.a.clickHandler(n,$.a.extend({},U.a.$win.height()<600?K.a.defaults:{layout:[{preset:"n",x:0},{preset:"s",x:0}],close:!1,reTrigger:"ignore"},{target:"#template-quotePopover",tplData:t}))}};this.shortcode.instance.registerType(t),this.shortcode.instance.registerType($.a.extend({},t,{name:"legacy_quote"}))}}},M.a.add("quote-add","click",(function(e,t){const n=z(".redactor-editor")||$()(".redactor-editor"),a=s.b.getTextarea(n);s.b.initRedactor(a).then((n=>{Y(n,e,t)}))}),{className:"",seal:{cover:!1}}),M.a.add("quote-update","click",J),M.a.add("quote-del","click",Z);const X=new E.default({data:()=>({shortcodeId:null}),methods:{triggerQuote(e,t){this.$emit("triggerQuote",{event:e,entityId:t})},addQuote(e,t){this.$emit("addQuote",{event:e,entityId:t})},editQuote(e){this.shortcodeId=e},updateQuote(e,t){this.$emit("updateQuote",{event:e,content:t,shortcodeId:this.shortcodeId}),this.shortcodeId=null},deleteQuote(e,t){this.$emit("deleteQuote",{event:e,shortcodeId:t})}}});var ee={created(){this.registerHandler("editQuote","editQuote"),this.addQuote=this.addQuote.bind(this),this.editQuote=this.editQuote.bind(this),this.updateQuote=this.updateQuote.bind(this),this.deleteQuote=this.deleteQuote.bind(this),X.$on("addQuote",this.addQuote),X.$on("updateQuote",this.updateQuote),X.$on("deleteQuote",this.deleteQuote),this.$once("hook:beforeDestroy",(()=>{X.$off("addQuote",this.addQuote),X.$off("updateQuote",this.updateQuote),X.$off("deleteQuote",this.deleteQuote)}))},methods:{addQuote(e){let{event:t,entityKey:n="comment_id",entityId:s}=e;this.name===l&&Y(this.$editor,t.target,{endpoint:"/shortcodes/template/quote?".concat(n,"=").concat(s),seal:{cover:!1},className:""})},updateQuote(e){let{event:t,shortcodeId:n,content:s}=e;this.name===l&&J(t.target,{id:n,content:s})},deleteQuote(e){let{event:t,shortcodeId:n}=e;this.name===l&&Z(t.target,{id:n})},editQuote(e){X.editQuote(e)}}},te=n(638),ne=n(567),se=n(118),ae=(n(570),n(720));const re={allowedTags:["ul","li","a","strong","em","del","br","span","div","img","iframe","hr","blockquote"],plugins:["emoji","imagify","shortcode","video","linkify","restore","quote"],buttonActiveClass:"button--selected",buttonTarget:".redactor/.button{% if key %}--{{key}}{% endif %}",forceReplaceDivsOnPaste:!0,linebreaks:!0,imageEditable:!1,imageUrl:"url",replaceDivs:!1,staticDom:!0,maxImages:null};var ie={components:{SlideUpDown:ae.a,WysiwygToolbar:r.a,EditorImageUpload:i.a},mixins:[Object(a.a)(),d,o.a,B,x,F.b,p,h.a,k,L,P,ee],inheritAttrs:!1,model:{event:"update"},props:{name:{type:String,required:!0},value:{type:String,default:""},disabled:{type:Boolean,default:!1},directives:{type:Object,default:()=>({})},features:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},plugins:{type:Object,default:()=>({})},mode:{type:String,default:"default",validators:e=>-1!==["brand","default"].indexOf(e)},hasError:{type:Boolean,default:!1}},data(){return{wysiwygConfig:Object.assign({},re,{mentions:this.mentionsConfig&&this.mentionsConfig()},this.restoreConfig?this.restoreConfig():{},this.imageUploadConfig?this.imageUploadConfig(this.config):{},this.shortcodeConfig?this.shortcodeConfig():{},this.config),isTipVisible:!1,expanded:!1}},computed:{redactorStyles(){return this.config.minHeight?{"min-height":this.config.minHeight}:null},pluginConfig(){const e=this.mapPlugins();return{target:"#".concat(this.name),plugins:e}},redactorValue:{get(){return this.value},set(e){this.syncFromEditor(Object(se.d)(e))}},$directives(){return Object.assign({"focus-toggle":{toggles:[{className:"redactor--focus",target:".redactor"}]}},this.directives)},editorClassList(){return{"redactor-editor--small":this.config.small,"redactor-editor--admin":this.config.admin}}},async mounted(){this.$editor=await s.b.initRedactor(this.$refs.input,Object.assign({},this.wysiwygConfig,{vue:this.updatePlugin.bind(this)}));const e=e=>this.$emit("change",e),t=e=>this.$emit("focus",e),n=e=>{if(e.data){const e=this.$refs.editor.innerHTML;this.syncFromEditor(e)}};this.$refs.editor.addEventListener("blur",e),this.$refs.editor.addEventListener("focus",t),this.$refs.editor.addEventListener("input",n),this.$once("hook:beforeDestroy",(()=>{this.$refs.editor.removeEventListener("blur",e),this.$refs.editor.removeEventListener("focus",t),this.$refs.editor.removeEventListener("input",n)})),setTimeout((()=>this.$emit("ready")))},destroyed(){this.handlers={},this.writers={},this.$editor=null},methods:{mapPlugins(){const e={},t=this.wysiwygConfig,n=Object.assign({},this.textConfig?this.textConfig(t):{},this.imageConfig?this.imageConfig(t):{},this.expandConfig?this.expandConfig(t):{},this.htmlConfig?this.htmlConfig(t):{},this.plugins);for(const[t,s]of Object.entries(n))(t in this.features&&this.features[t]||void 0===this.features[t])&&(e[t]=s);return e},registerHandler(e,t){this.handlers=this.handlers||{value:"syncToEditor"},this.handlers[e]=t},registerWriter(e,t){this.writers=this.writers||{},this.writers[e]=t},pluginEnabled(e){return!1!==this.plugins[e]},updatePlugin(e){let{key:t,value:n}=e;if(t in this.handlers)return this[this.handlers[t]](n)},syncFromEditor(e){this.$emit("update",e)},syncToEditor(e){this.redactorValue!==e&&(this.redactorValue=e)},async syncRedactor(){await this.$nextTick(),this.$refs.editor.innerHTML=this.redactorValue},captureEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.preserveSelection(),this.updateLinkSelection&&this.updateLinkSelection(e)},insertEditor(e){let{content:t,method:n="htmlWithoutClean"}=e;n in this.writers?this[this.writers[n]](t):this.$editor.insert[n](t)},showTip(){this.$scopedSlots.tip&&(this.isTipVisible=!0)},hideTip(){this.isTipVisible=!1},dropLocalImages(e){const{maxImages:t,dragImageUpload:n}=this.wysiwygConfig,s=Array.from((null==e?void 0:e.detail.files)||[]),a=this.getNumberOfImgToUpload();if(!n)return void Object(te.f)(e.type);if(0===s.length)return;let r=s.filter((e=>Object(te.a)(e))).filter((e=>{const t=!Object(ne.a)(e);return t||Object(te.d)(),t}));t&&r.length>a&&(Object(te.e)(t),r=r.slice(0,a)),r.forEach((e=>{this.insertEditor({content:{alignment:"left",type:"FILE",value:e},method:"insertImage"})}))},insertLocalImage(e){const{maxImages:t}=this.wysiwygConfig;0!==this.getNumberOfImgToUpload()?this.insertEditor({content:e,method:"insertImage"}):Object(te.e)(t)},getNumberOfImgToUpload(){const e=(this.$refs.editor.innerHTML.match(/<img/g)||[]).length,{maxImages:t}=this.wysiwygConfig;return t?t-e:t}}},oe=ie,le=Object(O.a)(oe,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{isActive:e.$slots.tip,handler:e.hideTip},expression:"{ isActive: $slots.tip, handler: hideTip }"}],staticClass:"redactor redactor-box aGrid",class:{"redactor--hasError":e.hasError},attrs:{disabled:e.disabled},on:{click:e.showTip}},[t("div",{ref:"editor",staticClass:"redactor-editor redactor-placeholder size--all-m border--b-r width--all-12 overflow--scrollX-raw overflow--scrollY-raw userHtml userHtml--wysiwyg overflow--wrap-break hide--js-off",class:e.editorClassList,style:e.redactorStyles,attrs:{"data-handler":e.$d.handlers,"data-focus-toggle":e.$d.params["focus-toggle"],"data-field-name":e.name,tabindex:"0"}}),t("div",{staticClass:"redactor-tips",class:{"space--h-2 space--v-2":e.$slots.tip}},[t("SlideUpDown",[e.isTipVisible?t("div",[e._t("tip")],2):e._e()])],1),t("textarea",e._g(e._b({ref:"input",staticClass:"width--all-12 hide--js-on",attrs:{id:e.name,name:e.name},domProps:{value:e.redactorValue},on:{"paste-local-file":e.dropLocalImages,"drop-local-file":e.dropLocalImages}},"textarea",e.$attrs,!1),e.$listeners)),e.pluginEnabled("mentions")?t("Mentions",{attrs:{value:e.plugins.mentions}}):e._e(),e._t("default",(function(){return[t("WysiwygToolbar",e._b({attrs:{expanded:e.expanded},on:{"plugin-update":e.updatePlugin,"editor-insert":e.insertEditor,"editor-capture":e.captureEditor,"editor-expand":e.expandEditor},scopedSlots:e._u([e.pluginEnabled("image")?{key:"image-upload",fn:function({close:n}){return[t("EditorImageUpload",e._b({attrs:{mode:"brand"},on:{upload:function(t){e.insertLocalImage(t),n()}}},"EditorImageUpload",e.pluginConfig.plugins.image,!1))]}}:null],null,!0)},"WysiwygToolbar",e.pluginConfig,!1))]}),{pluginConfig:e.pluginConfig,pluginEnabled:e.pluginEnabled,updatePlugin:e.updatePlugin,insertEditor:e.insertEditor,captureEditor:e.captureEditor,expandEditor:e.expandEditor})],2)}),[],!1,null,null,null);t.a=le.exports},725:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u}));var s=n(1),a=n(6);const r=async e=>{const t=[s.h,s.g,s.Hb,s.f,s.e],n={url:e,field:"link",value:e},r=await Object(a.c)({queries:t});return await r(n)},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.b)({req:s.bc,params:{url:e,filter:t},options:n})},o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(a.b)({req:s.cc,params:{url:e,voucherCode:t,filter:n},options:r})},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.b)({req:s.Yc,params:e,options:t})},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.b)({req:s.Xc,params:e,options:t})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.b)({req:s.uc,params:{url:e},options:t})}},726:function(e,t,n){"use strict";var s=n(527),a=n(510),r=n(567),i={components:{FormInput:a.e},props:{showFileName:{required:!0,type:Boolean,default:!1},disableControl:{type:Boolean,default:!1},value:{required:!1},mode:{type:String,default:"default"}},computed:{selectedFileName(){return this.value?this.value.name:"None selected"},labelMode(){return"brand"===this.mode?"button--mode-brand":"button--mode-default"}},methods:{selectFile(){this.$emit("input",Object(r.b)(this.$refs.file.$el))}}},o=n(45),l=Object(o.a)(i,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"tGrid tGrid--auto width--all-12 hide--js-off"},[t("span",{staticClass:"tGrid-cell tGrid-cell--shrink"},[t("label",{staticClass:"button button--type-secondary button--shape-circle width--all-12",class:[e.labelMode,{"button--disabled":e.disableControl}]},[e._v(" "+e._s("Choose")+" "),t("FormInput",{ref:"file",staticClass:"hide",attrs:{disabled:e.disableControl,type:"file",accept:".jpg, .jpeg, .png, .gif, .webp",name:"file"},on:{change:e.selectFile}})],1)]),e.showFileName?t("span",{staticClass:"tGrid-cell vAlign--all-m space--l-2"},[t("span",{staticClass:"mute--text size--all-m box--all-b overflow--ellipsis-tableFix"},[e._v(e._s(e.selectedFileName))])]):e._e()])}),[],!1,null,null,null).exports,c=n(508),u={__name:"alignment-selector-control",setup:e=>({__sfc:!0,alignments:[{name:"left",icon:"align-left",label:"Left"},{name:"center",icon:"align-center",label:"Center"}],SegmentedButton:c.b})},d=Object(o.a)(u,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"flex"},e._l(n.alignments,(function(s){return t(n.SegmentedButton,e._g(e._b({key:s.name,staticClass:"width--all-6",attrs:{name:s.name,mandatory:""}},"SegmentedButton",e.$attrs,!1),e.$listeners),[t("BaseIcon",{attrs:{name:s.icon,left:""}}),e._v(" "+e._s(s.label)+" ")],1)})),1)}),[],!1,null,null,null).exports,p=n(638);const h=Object(s.a)().set({label:"engagement"});var m={components:{BaseButton:c.a,FormList:a.l,FormRow:a.o,FormLabel:a.k,FormContent:a.c,FormInput:a.e,FileUploadControl:l,AlignmentSelectorControl:d},inheritAttrs:!1,props:{isLoading:{type:Boolean,required:!0},hasAlignmentSelector:{type:Boolean,default:!1},hasUrlInput:{type:Boolean,default:!1},immediateUpload:{type:Boolean,default:!1},showFileName:{type:Boolean,default:!1},mode:{type:String,default:"default"}},data:()=>({file:null,url:null,alignment:"left"}),computed:{noSelectionMade(){return!this.file&&!this.url},shouldDisableFileControl(){return!(!this.isLoading&&!this.url)},shouldDisableURLControl(){return!(!this.isLoading&&!this.file)},shouldDisableSubmitControl(){return!(!this.isLoading&&!this.noSelectionMade)}},methods:{submit(){const e=this.file?"FILE":"URL",t=this.file?this.file:this.url;if("FILE"===e&&Object(r.a)(t))return void Object(p.d)();let n={type:e,value:t};this.hasAlignmentSelector&&(n=Object.assign(n,{alignment:this.alignment})),this.$emit("submit",n)},handleURL(){h.record({action:"add_image_url"})},handleFile(){h.record({action:"add_image"}),this.immediateUpload&&this.submit()}}},f=Object(o.a)(m,(function(){var e=this,t=e._self._c;return t("FormList",[e._t("above"),t("FormRow",{attrs:{disabled:e.shouldDisableFileControl}},[t("FormLabel",[e._v(e._s("Upload image"))]),t("FormContent",[t("FileUploadControl",{attrs:{mode:e.mode,"disable-control":e.shouldDisableFileControl,"show-file-name":e.showFileName},on:{input:e.handleFile},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),e.hasUrlInput?t("FormRow",{attrs:{disabled:e.shouldDisableURLControl}},[t("FormLabel",[e._v(e._s("Image from URL"))]),t("FormContent",[t("FormInput",{attrs:{name:"url",placeholder:"Image URL",disabled:e.shouldDisableURLControl},on:{input:e.handleURL},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)],1):e._e(),e.hasAlignmentSelector?t("FormRow",[t("FormLabel",[e._v(e._s("Alignment"))]),t("FormContent",[t("AlignmentSelectorControl",{attrs:{"selected-value":e.alignment},on:{"update:selectedValue":function(t){e.alignment=t},"update:selected-value":function(t){e.alignment=t}}})],1)],1):e._e(),t("FormRow",[t("FormContent",[t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:e.shouldDisableSubmitControl},on:{click:function(t){return e.submit()}}},[e._v(" "+e._s("Add image")+" ")])],1)],1),e._t("default")],2)}),[],!1,null,null,null);t.a=f.exports},729:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={images:"getImageSuggestions",price:"getPriceSuggestion",shippingPrice:"getShippingPriceSuggestion",specification:"getSpecificationSuggestion",title:"getTitleSuggestion"}},735:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(105),a=n(612);const r={model:{event:"update"},props:{value:{type:Object,default:()=>({})},i18n:{type:Object,default:()=>({})},features:{type:Object,default:()=>({})},wysiwyg:{type:Object,default:()=>({})},messages:{type:Array,default:()=>[]},groupOptions:{type:Object,default:()=>({groups:[],max:1})}},methods:{autoAssignGroups:a.a,clearRestore(){return this.$refs.form.clearRestore()},updateShortcodes(){return this.$refs.form.updateShortcodes()}},computed:{wysiwygConfig(){return Object.assign({restoreId:"thread-desc-".concat(this.hasThread?this.thread.threadId:"new")},this.wysiwyg.config)},thread:{get(){return this.value},set(e){this.$emit("update",e)}},hasThread(){return this.thread&&this.thread.threadId},hasImage(){return this.thread&&Object(s.d)(this.thread.images)&&Object(s.c)(this.thread.images,"default")},hasMerchant(){return!(!this.thread||!this.thread.merchant)},hasMerchantImage(){return!(!this.hasMerchant||!Object(s.b)(this.thread.merchant))},merchantImageUrl(){return this.hasMerchantImage?Object(s.e)(this.thread.merchant.images,"avatar","10241X","/assets/img/default-merchant_d651c.png"):""},isShowAdminSection(){return Object(a.b)(this.thread)}},watch:{"thread.link":{handler(e){this.features.preSelectIsLocal&&null===this.thread.threadId&&(this.thread.isLocal=!(e&&e.trim()))},immediate:!0}}}},737:function(e,t,n){"use strict";var s=n(107),a=n(565),r=n(510),i=n(735),o=n(590),l=n(755),c=n(779),u=n(617),d=n(508),p=n(5),h=n(17),m=Object(p.defineComponent)({__name:"form-thread-morph-link",props:{morph:null,threadId:null},setup(e){const t=e,n={[h.a]:"",[h.o]:"",[h.e]:"",[h.f]:""},s=Object(p.computed)((()=>Object.keys(h.n).find((e=>h.n[e]===t.morph.type)))),a=Object(p.computed)((()=>"threads.switch.to.".concat(s.value.toLocaleLowerCase())));return{__sfc:!0,props:t,ceptClass:n,threadType:s,routeName:a}}}),f=n(45),g=Object(f.a)(m,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("RouterLink",{staticClass:"thread-link linkPlain mute--text space--ml-3",class:n.ceptClass[n.threadType],attrs:{to:{name:n.routeName,params:{threadId:e.threadId}}}},[e._v(" "+e._s(e.morph.translation)+" ")])}),[],!1,null,null,null).exports;const v={titleLabel:"",titlePlaceholder:"",descriptionLabel:"",descriptionPlaceholder:"",groupsLabel:"",groupsSublabel:"Please select at least one of the categories below:",submitButtonText:"Post deal"};var b={components:{BaseButton:d.a,FormList:r.l,FormMessageList:r.m,Portal:s.Portal,FormRowTitle:l.a,FormRowDescription:c.a,FormThreadMorphLink:g},mixins:[o.b,i.a],inheritAttrs:!1,props:{id:{type:String,default:"threadForm"},validations:{type:Object,default:()=>({})},portalGroups:{type:String,default:""},validateOnSubmit:{type:String,default:""}},data(){return{formName:this.id,translations:Object.assign({},v,this.i18n)}},watch:{messages(e){Object(u.d)(this.$v,e)}},validations(){return Object.assign({title:[Object(a.j)(),Object(a.b)(4,140)],description:[Object(a.j)(),Object(a.f)(65535)]},this.validations)},methods:{async submitForm(e){e.preventDefault(),this.validateOnSubmit&&await this.$v.validate(this.validateOnSubmit),await this.$v.check(),this.$v.anyError||this.$emit("form-submit",e)},clearRestore(){return this.$refs.wysiwygField.$refs.wysiwygComponent.markForRestore({restoreId:this.wysiwygConfig.restoreId}),this.$refs.wysiwygField.$refs.wysiwygComponent.clearRestore()},updateShortcodes(){return this.$refs.wysiwygField.$refs.wysiwygComponent.updateShortcodes()}}},y=Object(f.a)(b,(function(){var e=this,t=e._self._c;return t("form",e._g(e._b({staticClass:"width--all-12",attrs:{id:e.id,name:e.id},on:{submit:e.submitForm}},"form",e.$attrs,!1),e.$listeners),[e.$v.error[e.id]?t("FormMessageList",{staticClass:"text--b space--b-2",attrs:{messages:e.$v.messages[e.id]}}):e._e(),t("FormList",{attrs:{wide:""}},[e._t("title"),e.hasThread&&e.features.morphThread?t("p",{staticClass:"bg--em bRad--a space--h-3 space--v-3 space--mt-2"},e._l(e.thread.morphsTo,(function(n){return t("FormThreadMorphLink",{key:n.type,attrs:{morph:n,"thread-id":e.thread.threadId}})})),1):e._e(),e._t("prepend",null,{v:e.$v}),e.features.title?t("FormRowTitle",{attrs:{placeholder:e.translations.titlePlaceholder,"tips-feature":e.features.tips,"only-number":!1},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.translations.titleLabel))]},proxy:!0}],null,!1,1023730630),model:{value:e.thread.title,callback:function(t){e.$set(e.thread,"title",t)},expression:"thread.title"}}):e._e(),t("FormRowDescription",{ref:"wysiwygField",attrs:{"tips-feature":e.features.tips,"wysiwyg-features":e.features.wysiwyg,"wysiwyg-config":e.wysiwyg.config,"entity-id":e.thread.threadId,placeholder:e.translations.descriptionPlaceholder},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s("Description"))]},proxy:!0}]),model:{value:e.thread.description,callback:function(t){e.$set(e.thread,"description",t)},expression:"thread.description"}}),e._t("default",null,{v:e.$v}),e._t("actions",(function(){return[t("Portal",{attrs:{to:"submit"}},[t("BaseButton",{staticClass:"width--all-12 width--fromW2-auto",attrs:{form:e.id,type:"submit",variant:"primary",mode:"brand"},on:{click:e.submitForm}},[e._v(" "+e._s(e.translations.submitButtonText)+" ")])],1)]}),{submitButtonText:e.translations.submitButtonText})],2)],1)}),[],!1,null,null,null);t.a=y.exports},751:function(e,t,n){"use strict";var s={components:{BaseSpinner:n(516).a},props:{title:{type:String,default:""},progress:{type:Number,default:0},error:{type:[Boolean,String],default:!1},size:{type:String,default:"xxl"},i18n:{type:Object,default:()=>({})},hasBar:{type:Boolean,default:!0}},computed:{progressClassList(){return{"vote-temp--burn":!!this.error,"vote-temp--cold":!this.error}},progressStyleList(){return{width:"".concat(this.progress,"%")}},textClassList(){return{"size--all-m":"sm"===this.size,"size--all-xxl":"sm"!==this.size}},contentClassList(){return{"vote-temp--burn":!!this.error,"progress--title":!this.error}}},methods:{retry(){this.$emit("retry")},cancel(){this.$emit("cancel")}}},a=n(45),r=Object(a.a)(s,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"js-progress--cover progress--cover progress--cover-fullscreen"},[t("span",{staticClass:"progress--content-align"},[t("span",{staticClass:"progress--content"},[t("div",{staticClass:"text--b vAlign--all-m space--b-1",class:e.contentClassList},[e.error?e._e():t("BaseSpinner",{staticClass:"vAlign--all-m"}),t("span",{staticClass:"space--l-1 vAlign--all-m",class:e.textClassList},[e._v(" "+e._s(e.title)+" ")])],1),e.hasBar?t("div",{staticClass:"progress--bar"},[t("div",{staticClass:"js-progress--indicator progress--indicator",class:e.progressClassList,style:e.progressStyleList})]):e._e(),t("div",[e.error?t("button",{staticClass:"js-progress--retry progress--retry text--b link link--type-default space--t-1",attrs:{type:"button"}},[t("span",{staticClass:"flex boxAlign-ai--all-c space--b-1"},[t("BaseIcon",{attrs:{name:"refresh"}}),t("span",{staticClass:"space--l-2 vAlign--all-m",class:e.textClassList,on:{click:e.retry}},[e._v(" "+e._s(e.i18n.retry)+" ")])],1)]):e._e(),t("button",{staticClass:"js-progress--cancel progress--cancel text--b mute--text space--t-1",attrs:{type:"button"},on:{click:e.cancel}},[e._v(" "+e._s(e.i18n.cancel)+" ")])])])])])}),[],!1,null,null,null).exports,i=n(102),o=n(568),l={__name:"thread-submission-loader",props:{hasBar:{type:Boolean}},setup:e=>({__sfc:!0,loader:Object(o.h)(),ProgressOverlay:r,BaseLoader:i.a})},c=Object(a.a)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BaseLoader,e._g(e._b({staticClass:"width--all-12",attrs:{mode:"hidden","linked-to":n.loader},scopedSlots:e._u([{key:"default",fn:function({loading:s,error:a}){return[e._t("default"),s||a?t(n.ProgressOverlay,{attrs:{error:a,"has-bar":e.hasBar}}):e._e()]}}],null,!0)},"BaseLoader",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=c.exports},754:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var s=n(549);const a=e=>("string"==typeof e?""!==e.trim():null!=e)&&0===Number(Object(s.b)(e)),r=e=>!Number(Object(s.b)(e))},755:function(e,t,n){"use strict";var s=n(5),a=n(510),r=n(644).a,i=n(45),o=Object(i.a)(r,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("p",{staticClass:"formList-info",class:n.textColor},[e._t("default",(function(){return[e._v(" "+e._s(n.remainingLabel)+" ")]}),{remaining:n.remaining})],2)}),[],!1,null,null,null).exports,l=n(612),c={__name:"form-row-title",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},fieldName:{type:String,default:"title"},tipsFeature:{type:Boolean,default:!1},required:{type:Boolean,default:!1},onlyNumber:{type:Boolean,default:!0}},emits:["input"],setup(e,t){let{emit:n}=t;const r=e,i=Object(s.inject)("$v"),c=Object(s.computed)({get:()=>r.value,set(e){n("input",e)}}),u=e=>{i.validate(r.fieldName,e)};return{__sfc:!0,$v:i,props:r,emit:n,localValue:c,validate:u,changeTitle:async()=>{await u(c.value),i.error.title||Object(l.a)()},FormRow:a.o,FormLabel:a.k,FormInput:a.e,FormContent:a.c,FormMessageList:a.m,FormTip:a.t,CharacterCounter:o}}},u=Object(i.a)(c,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.FormRow,{directives:[{name:"track",rawName:"v-track:formField",value:{name:e.fieldName},expression:"{ name: fieldName }",arg:"formField"}],attrs:{error:n.$v.error.title}},[t("div",{staticClass:"flex boxAlign-jc--all-sb"},[t(n.FormLabel,{attrs:{required:e.required}},[e._t("label")],2),t(n.CharacterCounter,{attrs:{value:n.localValue},scopedSlots:e._u([e.onlyNumber?{key:"default",fn:function({remaining:t}){return[e._v(" "+e._s(t)+" ")]}}:null],null,!0)})],1),t(n.FormContent,[t(n.FormTip,{attrs:{available:e.tipsFeature,title:"Make your title stand out",descr:"Include the Brand, Product Type, Colour, and Model in your title (E.g. adidas UltraBoost Black…)"},scopedSlots:e._u([{key:"default",fn:function({toggleFormTip:s}){return[t(n.FormInput,{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],staticClass:"input--mode-primary width--all-12",attrs:{name:e.fieldName,placeholder:e.placeholder},on:{change:n.changeTitle,focus:s,blur:s},model:{value:n.localValue,callback:function(e){n.localValue=e},expression:"localValue"}})]}}])}),t(n.FormMessageList,{attrs:{messages:n.$v.messages.title}})],1)],1)}),[],!1,null,null,null);t.a=u.exports},778:function(e,t,n){"use strict";var s=n(665),a=n(510),r=n(780),i=n(723),o={components:{CurrencySymbol:r.a,FormInputAdditionBox:a.f,FormInputIcon:a.h,FormInputNumericBase:i.a},mixins:[s.a],inheritAttrs:!1,props:{name:{type:String,required:!0},value:{type:[String,Number],default:""},symbol:{type:String,default:"£"},placement:{type:String,default:"prefix"},placeholder:{type:String,default:"0.00"},isFetching:{type:Boolean,default:!1},animated:{type:Boolean,default:!1}},computed:{localValue:{get(){return this.value},set(e){this.$emit("update",e)}}}},l=n(45),c=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"input-wrapper flex aGrid boxAlign-ai--all-c space--h-0",class:{"input-wrapper--disabled":e.$attrs.disabled}},[t("FormInputAdditionBox",{attrs:{left:""}},[e.isFetching?t("FormInputIcon",{attrs:{spinner:e.isFetching}}):t("CurrencySymbol",{attrs:{symbol:e.symbol}})],1),t("FormInputNumericBase",e._g(e._b({directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],ref:"priceInput",staticClass:"input input-with-icon--l width--all-12",class:{"input--mode-error":e.showError},attrs:{placeholder:e.isFetching?"Fetching":e.placeholder,name:e.name,type:"text",inputmode:"decimal"},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}},"FormInputNumericBase",e.$attrs,!1),e.$listeners))],1)}),[],!1,null,null,null);t.a=c.exports},779:function(e,t,n){"use strict";var s=n(510),a=n(717),r=n(568),i=n(5),o={__name:"form-row-description",props:{value:{type:String,default:""},entityId:{type:[Number,String],default:"new"},fieldName:{type:String,default:"description"},wysiwygFeatures:{type:Object,default:()=>({})},wysiwygConfig:{type:Object,default:()=>({})},tipsFeature:{type:Boolean,default:!1},required:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["input","update:preparedHtmlDescription"],setup(e,t){let{emit:n}=t;const o=e,l=Object(r.m)(),c=Object(i.ref)(!1),u=Object(i.inject)("$v"),d=Object(i.ref)(null),p=Object(i.computed)({get:()=>o.value,set(e){n("input",e),u.validate(o.fieldName,e)}}),h=Object(i.computed)((()=>{var e;return Object.assign({restoreId:"thread-desc-".concat(null!==(e=o.entityId)&&void 0!==e?e:"new")},o.wysiwygConfig)})),m=Object(i.computed)((()=>u.messages[o.fieldName]&&u.messages[o.fieldName].length>0));return{__sfc:!0,wysiwygPlugins:l,canRestore:c,$v:u,emit:n,props:o,wysiwygComponent:d,localValue:p,wysiwygConfigOverridden:h,hasError:m,update:function(){n("update:preparedHtmlDescription",d.value.$editor.$editor.html()),d.value.updateShortcodes()},FormTipLabel:s.u,WysiwygEditor:a.a,FormRow:s.o,FormLabel:s.k,FormContent:s.c,FormMessageList:s.m}}},l=n(45),c=Object(l.a)(o,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.FormRow,{directives:[{name:"track",rawName:"v-track:formField",value:{name:e.fieldName},expression:"{ name: fieldName }",arg:"formField"}],attrs:{error:n.$v.error[e.fieldName]}},[t(n.FormLabel,{staticClass:"flex",attrs:{required:e.required},scopedSlots:e._u([{key:"end",fn:function(){return[n.canRestore?t("button",{staticClass:"link text--color-brandPrimary",attrs:{type:"button"},on:{click:e.$refs.wysiwygComponent.undoRestore}},[e._v(" "+e._s("Discard restored description")+" ")]):e._e()]},proxy:!0}])},[e._t("label")],2),t(n.FormContent,[t(n.WysiwygEditor,{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],ref:"wysiwygComponent",staticClass:"redactor--mode-primary width--all-12",attrs:{"has-error":n.hasError,name:e.fieldName,placeholder:e.placeholder,config:n.wysiwygConfigOverridden,plugins:n.wysiwygPlugins,features:e.wysiwygFeatures},on:{canRestore:e=>n.canRestore=e,update:n.update},scopedSlots:e._u([{key:"tip",fn:function(){return[e._t("descTip",(function(){return[e.tipsFeature?t(n.FormTipLabel,{attrs:{title:"Tell us about your deal.",descr:"Include details about the product, links to any relevant info/reviews, and why you think it’s a deal worth sharing"}}):e._e()]}))]},proxy:!0}],null,!0),model:{value:n.localValue,callback:function(e){n.localValue=e},expression:"localValue"}}),n.$v.messages[e.fieldName]&&n.$v.messages[e.fieldName].length?t(n.FormMessageList,{attrs:{messages:n.$v.messages[e.fieldName]}}):e._e()],1)],1)}),[],!1,null,null,null);t.a=c.exports},780:function(e,t,n){"use strict";var s=n(5),a=Object(s.defineComponent)({__name:"currency-symbol",props:{symbol:{default:"£"}},setup:e=>({__sfc:!0})}),r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"input-icon size--all-l text--b"},[e._v(e._s(e.symbol))])}),[],!1,null,null,null);t.a=i.exports},787:function(e,t,n){"use strict";var s=n(17);const a={[s.a]:"ThreadPreviewDeal",[s.o]:"ThreadPreviewVoucher",[s.e]:"ThreadPreviewDiscussion",[s.f]:"ThreadPreviewFeedback"};var r={components:{ThreadPreviewDeal:()=>Promise.all([n.e(13),n.e(36),n.e(234)]).then(n.bind(null,1280)),ThreadPreviewVoucher:()=>Promise.all([n.e(13),n.e(36),n.e(236)]).then(n.bind(null,1340)),ThreadPreviewDiscussion:()=>Promise.all([n.e(13),n.e(207)]).then(n.bind(null,1341)),ThreadPreviewFeedback:()=>Promise.all([n.e(13),n.e(213)]).then(n.bind(null,1342))},props:{thread:{type:Object,required:!0},imagePlaceholder:{type:String,default:""},layout:{type:String,default:"list"},i18n:{type:Object,default:()=>({})},features:{type:Object,default:()=>({})}},computed:{previewType(){return a[this.thread.type]},imageUrl(){return this.$store.getters["threadForm/getGalleryImageUrl"](0)}}},i=n(45),o=Object(i.a)(r,(function(){var e=this;return(0,e._self._c)(e.previewType,{tag:"Component",staticClass:"threadPreview",attrs:{layout:e.layout,thread:e.thread,image:e.imageUrl,i18n:e.i18n,features:e.features}})}),[],!1,null,null,null);t.a=o.exports},812:function(e,t,n){"use strict";var s=n(541),a=n.n(s),r=n(17),i=n(85),o=n(683),l=n(105),c=n(522),u=n(567),d=n(43),p=n(729),h=n(725),m=n(6),f=n(617);const g=function(e,t,n){var s,a,i,c;let u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const d=e.shipping||{isFree:null,price:null},p=d.isFree,h=d.price,m=null!=e&&null!==(s=e.startDate)&&void 0!==s&&s.timestamp?e.startDate:{},f=null!=e&&null!==(a=e.endDate)&&void 0!==a&&a.timestamp?e.endDate:{},g=null!=e&&null!==(i=e.scheduledReleaseDate)&&void 0!==i&&i.timestamp?e.scheduledReleaseDate:{},v=e.type||t||"";return{threadId:e.threadId||null,type:v,images:Object(l.d)(e.images)?e.images:{bucket:"threads",slots:[]},link:e.link||"",galleryImages:e.galleryImages||[],user:e.user||null,claimCodeCampaignId:e.claimCodeCampaignId||"",discountType:e.discountType||null,disclaimers:e.disclaimers||[],cpcLink:e.cpcLink||"",price:e.price||null,percentage:e.percentage||null,nextBestPrice:e.nextBestPrice||null,title:e.title||"",titleSlug:e.titleSlug||"",threadTypeId:e.threadTypeId||null,description:e.description||"",groups:e.groups?Object(o.d)(e.groups,v===r.e):[],freeShipping:p,shippingPrice:h,startDate:m,endDate:f,scheduledReleaseDate:g,voucherCode:e.voucherCode||"",isLocal:!!(e.isLocal||!e.threadId&&u.preSelectIsLocal),isExclusive:!!e.isExclusive,locations:e.locations||n,dispatchedFrom:e.dispatchedFrom||null,nsfw:!!e.nsfw,events:e.events||[],eventOnly:!!e.eventOnly,merchant:e.merchant||{},morphsTo:e.morphsTo||[],shortcodes:e.shortcodes||[],imageSuggestions:e.imageSuggestions||[],preparedHtmlDescription:(null===(c=e.threadDetails)||void 0===c?void 0:c.preparedHtmlDescription)||null}},v=function(){let{formId:e="threadForm",thread:t={},locations:n={id:null},countries:s=[],events:a=[],groups:r=[],mentions:i="",threadType:o="",features:l={},imageSuggestions:c=[],fetchedFromUrl:u={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d={formId:e,thread:g(t,o,n,l),locations:n,countries:s,events:a,groups:r,mentions:i,features:l,imageSuggestions:c,fetchedFromUrl:u};return Object.assign({},d,{token:Object(f.c)()})},b={getField:i.c,getGalleryImageUrl:e=>function(t){let{pixVariant:n="thread_medium",picsyVariant:s=[["re",300,300],["ft","jpg"],["qt",60]]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e.thread.galleryImages[t];return a?"remoteUrl"in a?a.remoteUrl:Object(l.d)(a)?Object(l.e)(a,a.slots[0].name,n):new c.a(a).apply(s).toString():""},isShowGalleryImageSizeWarning:e=>t=>{const n=e.thread.galleryImages[t];return!!n&&("remoteUrl"in n?n.isPoorQuality:Object(l.d)(n)?!!Object(l.f)(n,n.slots[0].name,{}).isPoorQuality:n.isPoorQuality)},isAnyGalleryImageSizeWarning:(e,t)=>e.thread.galleryImages.some(((e,n)=>t.isShowGalleryImageSizeWarning(n))),canAutoAssignGroups:e=>{if(0===e.groups.length)return!0;return!e.thread.groups.some((e=>!e.assignedBySystem))}},y={clearFormSuggestionsFromLink(e){let{commit:t}=e;t("UPDATE_FIELD",{path:"fetchedFromUrl",value:{}})},getFormSuggestionsFromLink(e,t){let{dispatch:n,commit:s,state:a}=e,{url:r}=t;if(!r)return;const i={},o=e=>{var t;return!(null===(t=i[e])||void 0===t||!t.isLoading())},{thread:l}=a,c={images:0===l.galleryImages.length,price:!l.price,shippingPrice:!0,title:!0};Object.keys(c).forEach((e=>c[e]&&(e=>{const t=d.b.create(p.a[e]);i[e]=t,t.startLoading()})(e)));const u=Object(m.d)(Object(h.c)(Object.assign({url:r},c)),11e3);return u.request.then((e=>{let{submissionSuggestion:t}=e;const{images:r,price:i,title:l}=t.external,{shippingCosts:c}=t.internal;var u,d;o("images")&&null!=r&&r.length&&n("addGalleryImages",r.slice(0,8).map((e=>({remoteUrl:e.url})))),u="price",d=i.value,o(u)&&d&&s("UPDATE_FIELD",{path:"thread.".concat(u),value:d}),s("UPDATE_FIELD",{path:"fetchedFromUrl",value:Object.assign({},a.fetchedFromUrl,{title:l,price:i.value,shippingCosts:null==c?void 0:c.map((e=>e.price))})})})).finally((()=>{Object.keys(i).forEach((e=>{i[e].stopLoading()}))})),u},addGalleryImages(e){let{state:t,commit:n,dispatch:s}=e;const i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((e=>Object.assign({},e,{id:a()("gallery_")})));n("UPDATE_FIELD",{path:"thread.galleryImages",value:t.thread.galleryImages.concat(i)}),i.forEach((e=>{e.remoteUrl&&Object(u.c)(e.remoteUrl).then((t=>{let{width:n,height:a}=t;s("updateGalleryImageById",{id:e.id,data:Object.assign({},e,{isPoorQuality:Object(r.x)(n,a)})})})).catch((()=>{}))}))},removeGalleryImage(e,t){let{state:n,commit:s}=e;const a=[...n.thread.galleryImages];a.splice(t,1),s("UPDATE_FIELD",{path:"thread.galleryImages",value:a})},removeAllGalleryImages(e){let{commit:t}=e;t("UPDATE_FIELD",{path:"thread.galleryImages",value:[]})},changeGalleryImagesOrder(e,t){let{state:n,commit:s}=e,{from:a,to:r}=t;const i=[...n.thread.galleryImages],o=i.splice(a,1)[0];i.splice(r,0,o),s("UPDATE_FIELD",{path:"thread.galleryImages",value:i})},updateGalleryImageById(e,t){let{state:n,commit:s}=e,{id:a,data:r}=t;const i=[...n.thread.galleryImages],o=i.findIndex((e=>e.id===a));o>=0&&(i[o]=r,s("UPDATE_FIELD",{path:"thread.galleryImages",value:i}))},getMerchantFromThreadLink(e,t){let{commit:n}=e;const s=Object(h.d)(t);return s.request.then((e=>{let{merchant:t}=e;return n("UPDATE_FIELD",{path:"thread.merchant",value:t||{}}),t})),s},getProductSpecificationFromLink(e,t){let{state:n,commit:s}=e;const{thread:a,features:r}=n;function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s("UPDATE_FIELD",{path:"fetchedFromUrl",value:Object.assign({},n.fetchedFromUrl,{specification:e})})}if(!(r.specification&&!a.title&&!a.description&&!a.threadId))return;i("");const o=d.b.create(p.a.specification);o.startLoading();const l=Object(h.e)(t);return l.request.then((e=>{let{submissionSuggestion:t}=e;const{specification:n}=t.external;i(n)})).finally((()=>{o.stopLoading()})),l}},_={UPDATE_FIELD:i.b,UPDATE_TOKEN(e){e.token=Object(f.c)()}};t.a=e=>({namespaced:!0,state:v(e),getters:b,actions:y,mutations:_})},816:function(e,t,n){"use strict";var s={components:{BaseButton:n(508).a},props:{message:{type:Object,require:!0}}},a=n(45),r={components:{LinkErrorMessage:Object(a.a)(s,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"track",rawName:"v-track:linkErrorMessage.view",value:{type:e.message.type},expression:"{ type: message.type }",arg:"linkErrorMessage",modifiers:{view:!0}}],staticClass:"inputBox height--all-auto inputBox--mode-error space--v-3 hAlign--all-c"},[e._t("supportImage",(function(){return[e._m(0)]})),t("h3",{staticClass:"text--b text--color-charcoalTint size--all-l space--mb-1"},[e._v(" "+e._s(e.message.title)+" ")]),t("p",{staticClass:"space--mb-4 text--color-greyShade overflow--wrap-break",domProps:{innerHTML:e._s(e.message.text)}}),t("p",{staticClass:"hAlign--all-c"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:cancel.click",arg:"cancel",modifiers:{click:!0}}],staticClass:"width--all-12 width--fromW2-auto space--mt-1 space--fromW2-mt-0",attrs:{variant:"primary",mode:"brand"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s("Cancel submission")+" ")])],1)],2)}),[function(){var e=this._self._c;return e("span",{staticClass:"box--all-i space--mb-3"},[e("span",{staticClass:"supportImage supportImage--type-oops"})])}],!1,null,null,null).exports,FormMessageList:n(510).m},props:{errorMessages:{type:Array,default:()=>[]}},computed:{restrictedLinkErrorMessage(){return this.errorMessages.find((e=>e.title))},inlineLinkErrorsMessages(){return this.errorMessages.filter((e=>!e.title))}}},i=Object(a.a)(r,(function(){var e=this,t=e._self._c;return t("div",[e.restrictedLinkErrorMessage?t("LinkErrorMessage",{attrs:{message:e.restrictedLinkErrorMessage},on:{cancel:function(t){return e.$emit("cancel")}}}):e._e(),e.inlineLinkErrorsMessages.length?t("FormMessageList",{attrs:{messages:e.inlineLinkErrorsMessages}}):e._e()],1)}),[],!1,null,null,null);t.a=i.exports},817:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var s=n(510),a=n(737),r=n(787),i=n(107),o=n(667),l={components:{BaseButton:n(508).a,PortalTarget:i.PortalTarget},mixins:[o.a],props:{i18n:{type:Object,default:()=>({})},preview:{type:Boolean,default:!0}},data(){return{isModalOpen:!1,translations:Object.assign({previewTitle:"Preview"},this.i18n)}}},c=n(45),u=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"page-center tGrid tGrid--auto height--all-full"},[e._t("messages"),t("div",{staticClass:"width--fromW4-8 box--fromW3-c vAlign--all-t"},[t("div",{staticClass:"page-content page-content--persistent page-space--v-l bg--main"},[e._t("form")],2),t("div",{staticClass:"page-content page-content--persistent page-space--v-l bg--color-greyPanel"},[t("div",{staticClass:"flex flex--wrap flex--dir-row-reverse boxAlign-jc--all-fs space--mb-n2"},[t("PortalTarget",{staticClass:"space--fromW2-ml-3 space--mb-2 width--all-12 width--fromW2-auto",attrs:{name:"submit"}}),e.preview?t("BaseButton",{directives:[{name:"track",rawName:"v-track:previewButton.click",arg:"previewButton",modifiers:{click:!0}}],staticClass:"space--mb-2 width--all-12 width--fromW2-auto",attrs:{variant:"secondary",mode:"default"},on:{click:function(t){e.isModalOpen=!0}}},[e._v(" "+e._s(e.translations.previewTitle)+" ")]):e._e()],1)])]),e.isModalOpen?t("BaseModal",{attrs:{active:e.isModalOpen,"max-width":"540","content-class":"space--h-3 space--v-3"},on:{"update:active":function(t){e.isModalOpen=t}}},[t("ModalClose",{staticClass:"aGrid-close space--mt-2 space--mr-2"}),e._t("preview")],2):e._e(),e._t("loader")],2)}),[],!1,null,null,null).exports,d=n(751),p=n(588),h=n(21),m=n(568);const f={formId:{type:String,default:"threadForm"},maxGroups:{type:Number,default:1},i18n:{type:Object,default:()=>({})}};t.a=function(){let{i18n:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{components:{FormRow:s.o,FormContent:s.c,PageMessages:p.a,ThreadForm:a.a,ThreadPreview:r.a,ThreadSubmissionLayout:u,ThreadSubmissionLoader:d.a},props:f,setup(t){const{thread:n,formOptions:s,submitForm:a,form:r,validationMessages:i}=Object(m.l)(),o=Object(m.g)(t.maxGroups),l=Object(m.e)(),c=Object.assign({},e,t.i18n||{},{form:Object.assign({},e.form,(t.i18n||{}).form)});return Object(h.j)(["thread_created_location"]),Object(m.b)(),Object(m.i)(!1),{thread:n,formOptions:s,formFeatures:l,groupOptions:o,submitForm:a,form:r,validationMessages:i,translations:c}}}}},820:function(e,t,n){"use strict";var s=n(890),a=n.n(s),r=n(118),i=n(510),o=n(555),l=n(106);const c=e=>{const t=Object(r.b)(e);return{text:t,value:t}},u="dd/MM/yyyy",d=[...Array(24)].map(((e,t)=>c(t))),p=[...Array(60)].map(((e,t)=>c(t))),h=new Date,m=new Date;m.setFullYear(h.getFullYear()+1);const f={previousMonth:"Previous month",nextMonth:"Next month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]};var g={components:{FormLabel:i.k,CustomSelect:o.a,FormInputLabeled:i.i,FormInputIcon:i.h},inheritAttrs:!1,model:{event:"update"},props:{twoColumnsLayout:{type:Boolean,default:!1},name:{type:String,required:!0},value:{type:Object,default:()=>({})},initialHours:{type:String,default:"00"},initialMinutes:{type:String,default:"01"},firstDay:{type:Number,default:1},rangeConstraint:{type:Array,default:()=>[h,m]},placeholder:{type:String,default:u}},data:()=>({options:{hours:d,minutes:p},savedDate:null}),computed:{selectedDate:{get(){return this.value.timestamp?Object(l.d)(this.value.timestamp,u):this.savedDate},set(e){if(e){const t=this.getSelectedTime(!0),n=Object(l.b)(e);this.savedDate=e,this.setDate(n,t.hour,t.minute)}else this.savedDate=null,this.$emit("update",{timestamp:null})}},selectedHour:{get(){const e=this.getSelectedTime(!1);return e?e.hour:""},set(e){this.setDate(this.correctSelectedDate,e,this.selectedMinute)}},selectedMinute:{get(){const e=this.getSelectedTime(!1);return e?e.minute:""},set(e){this.setDate(this.correctSelectedDate,this.selectedHour,e)}},showTimeLabel(){return this.twoColumnsLayout&&this.selectedDate},correctSelectedDate(){return Object(l.b)(this.selectedDate)}},destroyed(){this.datepicker&&this.datepicker.destroy()},methods:{initialize(e){if(this.datepicker)return;const[t,n]=this.rangeConstraint;this.datepicker=new a.a({i18n:f,format:"DD/MM/YYYY",field:e.target,minDate:t,maxDate:n,firstDay:this.firstDay,keyboardInput:!1,onSelect:()=>{this.selectedDate=this.datepicker.toString()}})},getSelectedTime(e){const t=this.value.timestamp?new Date(Object(l.e)(this.value.timestamp)):null;if(!t)return e?{hour:this.initialHours,minute:this.initialMinutes}:null;return{hour:t.getHours().toString().padStart(2,"0"),minute:t.getMinutes().toString().padStart(2,"0")}},setDate(e,t,n){const s="".concat(e,"T").concat(t,":").concat(n),a=e&&t&&n?Object(l.k)(new Date(s).getTime()):null;this.$emit("update",{timestamp:a})}}},v=n(45),b=Object(v.a)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex width--all-12",class:{"flex--wrap":e.twoColumnsLayout}},[t("div",{class:{"width--all-12 flex--grow-1":e.twoColumnsLayout,"width--all-6":!e.twoColumnsLayout}},[t("FormInputLabeled",e._b({ref:"date",attrs:{id:e.name,type:"text",autocomplete:"off",name:e.name,placeholder:e.placeholder,"input-class":" input"},on:{focus:function(t){return t.stopPropagation(),e.initialize.apply(null,arguments)}},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:"calendar"}})]},proxy:!0}]),model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}},"FormInputLabeled",e.$attrs,!1))],1),t("div",{staticClass:"flex--grow-1",class:{"space--mt-3":e.twoColumnsLayout}},[e.showTimeLabel?t("FormLabel",[e._v(" "+e._s("Time")+" ")]):e._e(),t("div",{staticClass:"flex"},[t("span",{staticClass:"flex--grow-1",class:{"space--ml-2":!e.twoColumnsLayout}},[e.selectedDate?t("CustomSelect",{staticClass:"width--all-12",attrs:{options:e.options.hours},model:{value:e.selectedHour,callback:function(t){e.selectedHour=t},expression:"selectedHour"}}):e._e()],1),t("span",{staticClass:"flex--grow-1"},[e.selectedDate?t("CustomSelect",{staticClass:"width--all-12 space--l-2",attrs:{options:e.options.minutes},model:{value:e.selectedMinute,callback:function(t){e.selectedMinute=t},expression:"selectedMinute"}}):e._e()],1)])],1)])}),[],!1,null,null,null);t.a=b.exports},826:function(e,t,n){"use strict";var s=n(508),a=n(841),r=n(834),i=n(842),o=n(837),l=n(838),c=n(843),u=n(844),d=n(17),p={components:{BaseButton:s.a,ThreadDuplicatesWrapper:a.a,ThreadDuplicatesItem:r.a,ThreadDuplicatesButtonsTranslations:i.a,DealDuplicatesTitle:o.a,DealDuplicatesDescription:l.a,VoucherDuplicatesTitle:c.a,VoucherDuplicatesDescription:u.a},props:{threads:{type:Array,required:!0},isSoftDuplicates:{type:Boolean,default:!1},type:{type:String,required:!0}},computed:{inputBoxMode(){return"inputBox--mode-".concat(this.isSoftDuplicates?"default":"error")},components(){return this.type===d.o?{title:c.a,description:u.a}:{title:o.a,description:l.a}}}},h=n(45),m=Object(h.a)(p,(function(){var e=this,t=e._self._c;return t("ThreadDuplicatesWrapper",{staticClass:"inputBox space--v-3",class:e.inputBoxMode},[t(e.components.title,{tag:"Component",staticClass:"text--color-charcoalTint size--all-l space--mb-1",attrs:{"is-soft-duplicates":e.isSoftDuplicates}}),t(e.components.description,{tag:"Component",staticClass:"text--color-greyShade",attrs:{"is-soft-duplicates":e.isSoftDuplicates}}),t("div",{staticClass:"space--mv-4"},e._l(e.threads,(function(n){return t("ThreadDuplicatesItem",{key:n.threadId,attrs:{thread:n},on:{click:function(t){return e.$emit("visit-duplicate")}}})})),1),t("ThreadDuplicatesButtonsTranslations",{attrs:{"is-soft-duplicates":e.isSoftDuplicates,type:e.type},scopedSlots:e._u([{key:"default",fn:function({continueLabel:n,cancelLabel:s}){return[t("div",{staticClass:"hAlign--all-r"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:continue.click.click-ga",arg:"continue",modifiers:{click:!0,"click-ga":!0}}],staticClass:"width--all-12 width--fromW2-auto space--mr-2",attrs:{variant:"tertiary",mode:"default",type:"button"},on:{click:function(t){return e.$emit("continue")}}},[e._v(" "+e._s(n)+" ")]),t("BaseButton",{directives:[{name:"track",rawName:"v-track:cancel.click.click-ga",arg:"cancel",modifiers:{click:!0,"click-ga":!0}}],staticClass:"width--all-12 width--fromW2-auto space--mt-1 space--fromW2-mt-0",attrs:{variant:"primary",mode:"brand",type:"button"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(s)+" ")])],1)]}}])})],1)}),[],!1,null,null,null);t.a=m.exports},834:function(e,t,n){"use strict";var s=n(17),a=n(591),r={props:{thread:{type:Object,required:!0}},computed:{isVoucher(){return Object(s.y)(this.thread.threadTypeId)},isVoucherFreeShipping(){return this.isVoucher&&this.thread.discountType===s.b},priceLabel(){return this.thread.price?this.thread.displayPrice:this.thread.nextBestPrice||this.isVoucherFreeShipping?"FREE":this.isVoucher?this.thread.displayPrice:null}}},i=n(45),o={components:{Price:Object(i.a)(r,(function(){var e=this,t=e._self._c;return e.priceLabel?t("span",{staticClass:"thread-price inlineDivider space--r-2"},[e.isVoucherFreeShipping?t("BaseIcon",{attrs:{name:"truck"}}):e._e(),e._v(" "+e._s(e.priceLabel)+" ")],1):e._e()}),[],!1,null,null,null).exports},mixins:[a.a],props:{thread:{type:Object,required:!0},merchantAvatarVariant:{type:Object,default:()=>({slot:"avatar",variant:"avatar_web_square_112"})}},computed:{threadStatus:()=>({activated:s.k,moderated:s.l})}},l=Object(i.a)(o,(function(){var e=this,t=e._self._c;return t("div",[e.thread.status===e.threadStatus.activated?t("a",{directives:[{name:"track",rawName:"v-track:threadDuplicatesItem.click.click-ga",arg:"threadDuplicatesItem",modifiers:{click:!0,"click-ga":!0}}],staticClass:"tGrid width--all-12 space--v-2",attrs:{href:e.thread.url,target:"_blank",rel:"noopener"},on:{click:function(t){return e.$emit("click")}}},[t("div",{staticClass:"tGrid-cell thread-smallList-image"},[t("span",{staticClass:"imgFrame border--trans"},[t("img",{staticClass:"imgFrame-img bRad--a",attrs:{src:e.threadImgSrc,alt:e.thread.title}})])]),t("div",{staticClass:"tGrid-cell space--l-2"},[t("p",{staticClass:"text--b"},[e._v(e._s(e.thread.title))]),t("Price",{attrs:{thread:e.thread}}),e.thread.merchant&&e.thread.merchant.merchantName?t("span",{staticClass:"text--color-brandPrimary inlineDivider space--r-2"},[e._v(" "+e._s(e.thread.merchant.merchantName)+" ")]):e._e(),t("time",{staticClass:"mute--text overflow--wrap-off"},[e._v(e._s(e.thread.publishedTimeAgo))])],1)]):e._e(),e.thread.status===e.threadStatus.moderated?t("div",{staticClass:"tGrid width--all-12 space--v-2"},[t("div",{staticClass:"tGrid-cell thread-smallList-image"},[t("span",{staticClass:"imgFrame"},[t("img",{staticClass:"imgFrame-img mute--opacity",attrs:{alt:e.thread.title,src:e.threadImgSrc}})])]),t("div",{staticClass:"tGrid-cell space--l-2"},[t("p",[t("span",{staticClass:"text--color-blueTint"},[e._v(e._s("In review"))]),t("span",{staticClass:"text--b text--color-greyShade space--l-1"},[e._v(e._s(e.thread.title))])]),t("Price",{staticClass:"text--color-greyShade",attrs:{thread:e.thread}}),e.thread.merchant&&e.thread.merchant.merchantName?t("span",{staticClass:"text--color-greyShade inlineDivider space--r-2"},[e._v(" "+e._s(e.thread.merchant.merchantName)+" ")]):e._e(),t("time",{staticClass:"mute--text text--color-greyShade size--all-s overflow--wrap-off"},[e._v(e._s(e.thread.publishedTimeAgo))])],1)]):e._e()])}),[],!1,null,null,null);t.a=l.exports},835:function(e,t,n){"use strict";var s=n(5),a=n(545),r=n(617),i=n(716);const o=()=>{let e=null;const t=Object(s.ref)([]),{isLoading:n,setLoader:o}=Object(a.a)(),l=()=>{t.value=[],n.value&&Object(i.a)(e)};return{duplicates:t,checkDuplicates:(n,s,a)=>{s&&(l(),(n=>{let{link:s,code:a,filter:i}=n;e=Object(r.b)(s,a,i),e.request.then((e=>{e&&(t.value=e)})).finally(o())})({link:n,code:s,filter:a}))},resetDuplicates:l,isLoading:n}};var l=Object(s.defineComponent)({__name:"check-voucher-code-duplicates",props:{link:null,code:null,filter:null},setup(e){const t=e,{duplicates:n,isLoading:a,checkDuplicates:r,resetDuplicates:i}=o(),l=Object(s.computed)((()=>!!n.value.length));return Object(s.watch)((()=>t.code),(()=>{t.code?r(t.link,t.code,t.filter):i()}),{immediate:!0}),Object(s.onBeforeUnmount)((()=>{i()})),{__sfc:!0,props:t,duplicates:n,isLoading:a,checkDuplicates:r,resetDuplicates:i,hasDuplicates:l}}}),c=n(45),u=Object(c.a)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[e._t("default",null,{isLoading:n.isLoading,duplicates:n.duplicates,hasDuplicates:n.hasDuplicates,reset:n.resetDuplicates})],2)}),[],!1,null,null,null);t.a=u.exports},837:function(e,t,n){"use strict";var s=n(5),a=Object(s.defineComponent)({__name:"deal-duplicates-title",props:{isSoftDuplicates:{type:Boolean}},setup(e){const t=e,n=Object(s.computed)((()=>t.isSoftDuplicates?"Is this deal already posted?":"Oops, this deal has already been posted "));return{__sfc:!0,props:t,title:n}}}),r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("h3",{staticClass:"text--b"},[e._v(" "+e._s(n.title)+" ")])}),[],!1,null,null,null);t.a=i.exports},838:function(e,t,n){"use strict";var s=n(5),a=Object(s.defineComponent)({__name:"deal-duplicates-description",props:{isSoftDuplicates:{type:Boolean}},setup(e){const t=e,n=Object(s.computed)((()=>t.isSoftDuplicates?"To help us ensure our community is filled with new and unique deals, please check whether your deal was already posted.":"It looks like this deal was already posted or is in review. Duplicate deals are usually merged."));return{__sfc:!0,props:t,description:n}}}),r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("p",[e._v(" "+e._s(n.description)+" ")])}),[],!1,null,null,null);t.a=i.exports},84:function(e,t,n){var s=n(86),a=n(309),r=n(308),i=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,u,d,p,h,m=0,f=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=l,s=c;return l=c=void 0,m=t,d=e.apply(s,n)}function y(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-m>=u}function _(){var e=a();if(y(e))return w(e);p=setTimeout(_,function(e){var n=t-(e-h);return g?o(n,u-(e-m)):n}(e))}function w(e){return p=void 0,v&&l?b(e):(l=c=void 0,d)}function k(){var e=a(),n=y(e);if(l=arguments,c=this,h=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(_,t),f?b(e):d}(h);if(g)return clearTimeout(p),p=setTimeout(_,t),b(h)}return void 0===p&&(p=setTimeout(_,t)),d}return t=r(t)||0,s(n)&&(f=!!n.leading,u=(g="maxWait"in n)?i(r(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),k.cancel=function(){void 0!==p&&clearTimeout(p),m=0,l=h=c=p=void 0},k.flush=function(){return void 0===p?d:w(a())},k}},841:function(e,t,n){"use strict";var s=n(45),a=Object(s.a)({},(function(){return(0,this._self._c)("div",{directives:[{name:"track",rawName:"v-track:threadDuplicates.view",arg:"threadDuplicates",modifiers:{view:!0}}],staticClass:"height--all-auto"},[this._t("default")],2)}),[],!1,null,null,null);t.a=a.exports},842:function(e,t,n){"use strict";var s=n(17),a={props:{type:{type:String,required:!0},isSoftDuplicates:{type:Boolean,default:!1}},computed:{translations(){return this.type===s.o?{continueLabel:"It's a new voucher",cancelLabel:"Cancel"}:(this.isSoftDuplicates,{continueLabel:"It's a new deal",cancelLabel:"Cancel submission"})}},render(){return this.$scopedSlots.default(this.translations)}},r=n(45),i=Object(r.a)(a,undefined,undefined,!1,null,null,null);t.a=i.exports},843:function(e,t,n){"use strict";var s=n(45),a=Object(s.a)({},(function(){var e=this;return(0,e._self._c)("h3",{staticClass:"text--b"},[e._v(" "+e._s("Oops, this voucher has already been posted ")+" ")])}),[],!1,null,null,null);t.a=a.exports},844:function(e,t,n){"use strict";var s=n(45),a=Object(s.a)({},(function(){var e=this;return(0,e._self._c)("p",[e._v(" "+e._s("It looks like this voucher was already posted or is in review. Duplicate vouchers are usually deleted.")+" ")])}),[],!1,null,null,null);t.a=a.exports},846:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h}));var s=n(6),a=n(1),r=n(17);const i=!0;function o(e){return Object(s.c)({queries:[a.xb],merge:!0})({threadTypeId:r.m[e]}).then((e=>e.request)).then((e=>e.groups))}function l(){return Object(s.c)({queries:[a.yb],merge:!0})({}).then((e=>e.request)).then((e=>e.locations))}function c(){return Object(s.c)({queries:[a.vb],merge:!0})({}).then((e=>e.request)).then((e=>e.events))}function u(){return Object(s.c)({queries:[a.ub],merge:!0})({}).then((e=>e.request)).then((e=>e.countries))}function d(e){return Object(s.c)({queries:[a.wb],merge:!0})({threadTypeId:r.m[e]}).then((e=>e.request)).then((e=>e.features))}function p(){return Object(s.c)({queries:[a.zb],merge:!0})({}).then((e=>e.request)).then((e=>e.settings.thread))}function h(e){if(!i)throw Error("FE query to fetch a Thread for edit form is not implemented yet: fetchFormThread(".concat(e,")"));return Promise.reject()}},849:function(e,t,n){"use strict";var s=n(28),a={name:"BaseAnchor",props:{enabled:{type:Boolean,default:!0}},computed:{hash(){return"#".concat(this.$attrs.id)},isTarget(){return this.enabled&&this.$route.hash===this.hash}},watch:{isTarget(e){e&&this.scrollTo()}},mounted(){this.scrollTo()},methods:{async scrollTo(){this.isTarget&&(await this.$nextTick(),await Object(s.d)(200),this.$el.scrollIntoView(),this.$emit("scrolled"))}},render(){return this.$scopedSlots.default({id:this.$attrs.id,isTarget:this.isTarget})}},r=n(45),i=Object(r.a)(a,undefined,undefined,!1,null,null,null);t.a=i.exports},850:function(e,t,n){"use strict";var s=n(617),a=n(655),r=n(716);let i=null;var o={props:{link:{type:String,default:""},keepAlive:{type:Boolean,default:!1}},data:()=>({errors:[],isLoading:!1}),computed:{hasErrors(){return!!this.errors.length}},watch:{link:{handler:"linkChange",immediate:!0},isLoading:"emitRequestEvent"},beforeDestroy(){this.keepAlive||this.cancelRequest()},methods:{linkChange(){this.reset(),this.link&&this.request()},async request(){i=await Object(s.f)(this.link),i.request.then((e=>{e.length&&(this.errors=e)})).catch((()=>{})).finally(Object(a.a)(this,"isLoading"))},cancelRequest(){this.isLoading&&Object(r.a)(i)},reset(){this.errors=[],this.cancelRequest()},emitRequestEvent(){this.$emit("request",{isLoading:this.isLoading,errors:this.errors,hasErrors:this.hasErrors})}},render(){return this.$scopedSlots.default?this.$scopedSlots.default({isLoading:this.isLoading,errors:this.errors,hasErrors:this.hasErrors}):null}},l=n(45),c=Object(l.a)(o,undefined,undefined,!1,null,null,null);t.a=c.exports},851:function(e,t,n){"use strict";var s=n(91),a=n(655),r=n(716);let i=null;var o={props:{link:{type:String,default:""},keepAlive:{type:Boolean,default:!1}},watch:{link:{handler:"linkChange",immediate:!0}},beforeDestroy(){this.keepAlive||this.cancelRequest()},methods:Object.assign({},Object(s.b)("threadForm",["getMerchantFromThreadLink"]),{linkChange(){this.reset(),this.link&&this.request()},async request(){i=await this.getMerchantFromThreadLink(this.link),i.request.catch((()=>{})).finally(Object(a.a)(this,"isLoading"))},cancelRequest(){this.isLoading&&Object(r.a)(i)},reset(){this.cancelRequest()}}),render(){return this.$scopedSlots.default?this.$scopedSlots.default({isLoading:this.isLoading}):null}},l=n(45),c=Object(l.a)(o,undefined,undefined,!1,null,null,null);t.a=c.exports},860:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u}));var s=n(846);const a=(e,t)=>{let{beforeEnter:n}=e;return n((e=>e?e.groups:Object(s.f)(t)),[])},r=e=>{let{beforeEnter:t}=e;return t((e=>e?e.locations:Object(s.g)()),[])},i=e=>{let{beforeEnter:t}=e;return t((e=>e?e.events:Object(s.b)()),[])},o=e=>{let{beforeEnter:t}=e;return t((e=>e?e.countries:Object(s.a)()),[])},l=(e,t)=>{let{beforeEnter:n}=e;return n((e=>e?e.features:Object(s.c)(t)),[])},c=e=>{let{beforeEnter:t}=e;return t((e=>e?e.settings.thread:Object(s.d)()),[])},u=e=>{let{beforeEnter:t,param:n}=e;return t(((e,t)=>t?t.thread:e?Object(s.e)(e):null),[n("threadId")])}},871:function(e,t,n){var s={"./en-au":757,"./en-au.js":757,"./en-ca":758,"./en-ca.js":758,"./en-gb":759,"./en-gb.js":759,"./en-ie":760,"./en-ie.js":760,"./en-il":761,"./en-il.js":761,"./en-in":762,"./en-in.js":762,"./en-nz":763,"./en-nz.js":763,"./en-sg":764,"./en-sg.js":764};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id=871},878:function(e,t,n){"use strict";var s={components:{BaseSpinner:n(516).a}},a=n(45),r=Object(a.a)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"inputBox inputBox--mode-info height--all-auto hAlign--all-c"},[t("BaseSpinner",{staticClass:"spinner--size-big"}),t("p",{staticClass:"text--color-brandPrimary text--b"},[e._t("default",(function(){return[e._v(" "+e._s("Loading…")+" ")]}))],2)],1)}),[],!1,null,null,null);t.a=r.exports},896:function(e,t,n){"use strict";var s=n(5),a=n(545),r=n(617),i=n(716);const o=()=>{let e=null;const t=Object(s.ref)([]),n=Object(s.ref)(!1),{isLoading:o,setLoader:l}=Object(a.a)(),c=()=>{t.value=[],n.value=!1,o.value&&Object(i.a)(e)};return{duplicates:t,checkDuplicates:(s,a)=>{s&&(c(),((s,a)=>{e=Object(r.a)(s,a),e.request.then((e=>{e&&(t.value=e.threads,n.value=e.isSoftDuplicates)})).finally(l())})(s,a))},resetDuplicates:c,isLoading:o,isSoftDuplicates:n}};var l=Object(s.defineComponent)({__name:"check-link-duplicates",props:{link:null,filter:null},setup(e){const t=e,{duplicates:n,isLoading:a,isSoftDuplicates:r,checkDuplicates:i,resetDuplicates:l}=o(),c=Object(s.computed)((()=>!!n.value.length));return Object(s.watch)((()=>t.link),(()=>{i(t.link,t.filter)}),{immediate:!0}),Object(s.onBeforeUnmount)((()=>{l()})),{__sfc:!0,props:t,duplicates:n,isLoading:a,isSoftDuplicates:r,checkDuplicates:i,resetDuplicates:l,hasDuplicates:c}}}),c=n(45),u=Object(c.a)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[e._t("default",null,{isLoading:n.isLoading,duplicates:n.duplicates,isSoftDuplicates:n.isSoftDuplicates,hasDuplicates:n.hasDuplicates,reset:n.resetDuplicates})],2)}),[],!1,null,null,null);t.a=u.exports},900:function(e,t,n){"use strict";var s=n(510),a=n(586),r=n(826),i=n(17),o=n(835),l={components:{FormMessageList:s.m,ThreadDuplicates:r.a,CheckVoucherCodeDuplicates:o.a,FormInputLabeled:s.i,FormInputIcon:s.h,FormTip:s.t},mixins:[a.a],inject:["$v"],props:{thread:{type:Object,required:!0},filter:{type:Object,default:()=>({})},tipsFeature:{type:Boolean},tipTitle:{type:String,default:""},tipDescription:{type:String,default:""}},data:()=>({voucherCode:""}),computed:{voucherType:()=>i.o},methods:{changeVoucherCode(){this.voucherCode=this.selectedValue,this.$v.validate("voucherCode",this.selectedValue)},resetCode(){this.selectedValue="",this.voucherCode=""}}},c=n(45),u=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"voucherCode"},expression:"{ name: 'voucherCode' }",arg:"formField"}]},[t("CheckVoucherCodeDuplicates",{attrs:{link:e.thread.link,code:e.voucherCode,filter:e.filter},scopedSlots:e._u([{key:"default",fn:function({hasDuplicates:n,duplicates:s,reset:a}){return[t("div",[t("FormTip",{attrs:{available:e.tipsFeature&&!n,title:e.tipTitle,descr:e.tipDescription},scopedSlots:e._u([{key:"default",fn:function({toggleFormTip:n}){return[t("FormInputLabeled",e._b({directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],attrs:{placeholder:"Enter the voucher code",name:"voucherCode",autocomplete:"off"},on:{change:e.changeVoucherCode,focus:n,blur:n},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:"scissors"}})]},proxy:!0}],null,!0),model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},"FormInputLabeled",e.$attrs,!1))]}}],null,!0)}),n?t("ThreadDuplicates",{attrs:{type:e.voucherType,threads:s},on:{cancel:e.resetCode,continue:a}}):e._e()],1)]}}])}),e.$v.messages.voucherCode&&e.$v.messages.voucherCode.length?t("FormMessageList",{attrs:{messages:e.$v.messages.voucherCode}}):e._e()],1)}),[],!1,null,null,null);t.a=u.exports},92:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var s=n(5),a=n(93),r=n(14);const i=new r.a("searchHistory"),o=Object(s.ref)(i.get().value||[]),l=e=>{i.set({value:e})},c=()=>{o.value=[],i.del()},u=e=>{const t=[...o.value],n=(e=>Object.assign({},e,{id:JSON.stringify(e.route).toLowerCase()}))(e),s=t.findIndex((e=>{let{id:t}=e;return t===n.id}));s>=0?l(Object(a.a)(t,s)):(t.unshift(n),l(Object(a.b)(t,5)))},d=e=>{const t="string"==typeof e?e:e.id,n=o.value,s=n.findIndex((e=>e.id===t));var r;s<0||(r=Object(a.b)(n,s),o.value=r,l(r))}},93:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));const s=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),s=new Uint8Array(n.length);for(let e=0;e<n.length;e+=1)s[e]=n.charCodeAt(e);return s},a=(e,t)=>{if(t<0||t>=e.length)return e;const n=[...e];return n.unshift(...n.splice(t,1)),n},r=(e,t)=>(t<0||t>=e.length||e.splice(t,1),e)},962:function(e,t,n){"use strict";var s=n(586),a=n(510),r={components:{ControlLinkErrors:n(816).a,FormInfo:a.d,FormInputLabeled:a.i,FormInputIcon:a.h,FormInputButton:a.g},mixins:[s.a],inject:["$v"],inheritAttrs:!1,props:{name:{type:String,default:"link"}},data:()=>({slotLink:""}),methods:{pasteLink(e){this.queryLink(e.clipboardData.getData("text/plain"))},changeLink(){this.queryLink(this.selectedValue)},async queryLink(e){const t="string"==typeof e?e:this.selectedValue;await this.$v.validate("link",t),this.$v.error.link||(this.slotLink=t)},resetLink(){this.slotLink="",this.selectedValue="",this.$v.clear("link")}}},i=n(45),o=Object(i.a)(r,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"link"},expression:"{ name: 'link' }",arg:"formField"}]},[t("span",{staticClass:"tGrid tGrid--auto width--all-12"},[t("FormInputLabeled",e._g(e._b({directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],ref:"input",attrs:{inputmode:"url",autocomplete:"off",name:e.name},on:{paste:e.pasteLink,change:e.changeLink,blur:function(t){return e.$forceUpdate()}},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t("FormInputIcon",{attrs:{name:"link"}})]},proxy:!0},{key:"appendButton",fn:function(){return[e.selectedValue?t("FormInputButton",{directives:[{name:"track",rawName:"v-track:resetLink.click-ga",arg:"resetLink",modifiers:{"click-ga":!0}}],on:{click:function(t){return e.resetLink()}}}):e._e()]},proxy:!0}]),model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},"FormInputLabeled",e.$attrs,!1),e.$listeners))],1),e._t("default",null,{link:e.slotLink,resetLink:e.resetLink}),t("ControlLinkErrors",{attrs:{"info-text":'"Paste the link to where other users can get more information or purchase the deal directly."',"error-messages":e.$v.messages.link},on:{cancel:e.resetLink}}),t("FormInfo",[t("span",{domProps:{innerHTML:e._s("Paste the link to where other users can get more information or purchase the deal directly.")}})])],2)}),[],!1,null,null,null);t.a=o.exports},963:function(e,t,n){"use strict";var s=n(17),a={components:{SegmentedButton:n(508).b},data:()=>({discountTypes:[{translation:"Percentage off (%)",shortTranslation:"%",testClass:"",icon:null,type:s.c},{translation:"Pound (£)",shortTranslation:"£",testClass:"",icon:null,type:s.d},{translation:"Free shipping",shortTranslation:null,testClass:"",icon:"truck",type:s.b}]})},r=n(45),i=Object(r.a)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex"},e._l(e.discountTypes,(function(n,s){return t("SegmentedButton",e._g(e._b({key:s,staticClass:"width--all-4",class:n.testClass,attrs:{name:n.type}},"SegmentedButton",e.$attrs,!1),e.$listeners),[n.translation?t("span",{staticClass:"hide--toW2"},[e._v(e._s(n.translation))]):e._e(),n.shortTranslation?t("span",{staticClass:"hide--fromW2"},[e._v(e._s(n.shortTranslation))]):e._e(),n.icon?t("BaseIcon",{staticClass:"hide--fromW2",attrs:{name:n.icon}}):e._e()],1)})),1)}),[],!1,null,null,null);t.a=i.exports}}]);