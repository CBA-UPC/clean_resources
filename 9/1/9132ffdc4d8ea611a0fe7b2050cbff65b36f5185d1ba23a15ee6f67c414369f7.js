!function(e,t){"use strict";!function(e){var t;e.ns_=e,(t=t||{}).indexOf=t.forEach=(t=t||{}).parseBoolean=t.parseInteger=t.parseLong=t.toString=(t=t||{}).filter=t.extend=(t=t||{}).cloneObject=function(e){if(null==e||"object"!=typeof e)return e;var t=function(){=[];return s.prototype={constructor:s,canCopy:function(){return!1},create:populate:function(e,t,s){}},n.prototype={constructor:n,maxDepth:256,cacheResult:getCachedResult:deepCopy:applyDeepCopier:,a.DeepCopier=s,a.deepCopiers=i,a.register=a.register({canCopy:function(){return!0},create:populate:),a.register({canCopy:function(e){return e instanceof Array},create:populate:),a.register({canCopy:create:),a.register({canCopy:function(e){return function(e){return"undefined"!=typeof window&&window&&window.Node?e instanceof Node:"undefined"!=typeof document&&e===document||"number"==typeof e.nodeType&&e.attributes&&e.childNodes&&e.cloneNode}(e)},create:populate:),{deepCopy:a}}();return t.deepCopy(e)},(t=t||{}).getNamespace=t.uid=),t.isEmpty=t.isNotEmpty=t.safeGet=t.isTrue=t.regionMatches=t.exists=),(t=t||{}).hasPageVisibilityAPISupport=function(){if("undefined"==typeof document)return!1;var e=!1;return void 0!==document.hidden?e=!0:void 0!==document.mozHidden?e=!0:void 0!==document.msHidden?e=!0:void 0!==document.webkitHidden&&(e=!0),function(){return e}}(),t.getPageVisibilityAPI=function(){if("undefined"==typeof document)return null;var e,t,s;void 0!==document.hidden?(e="hidden",t="visibilitychange",s="visibilityState"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange",s="mozVisibilityState"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange",s="msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange",s="webkitVisibilityState");var n={hidden:e,visibilityChange:t,state:s};return function(){return n}}(),t.isTabInBackground=),t.getBrowserName=t.getBrowserFullVersion=function(){if(!navigator)return"";var e,t,s,n=navigator.userAgent||"",a=navigator.appName||"",i=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(t=n.indexOf("Opera"))?(i=n.substring(t+6),-1!=(t=n.indexOf("Version"))&&(i=n.substring(t+8))):-1!=(t=n.indexOf("OPR/"))?i=n.substring(t+4):-1!=(t=n.indexOf("Android"))?i=n.substring(t+11):-1!=(t=n.indexOf("Chrome"))?i=n.substring(t+7):-1!=(t=n.indexOf("Safari"))?(i=n.substring(t+7),-1!=(t=n.indexOf("Version"))&&(i=n.substring(t+8))):-1!=(t=n.indexOf("Firefox"))?i=n.substring(t+8):"Microsoft Internet Explorer"==a?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(n)&&(i=parseFloat(RegExp.$1)):"Netscape"==a?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(n)&&(i=parseFloat(RegExp.$1)):i=n.lastIndexOf(" ")+1<(t=n.lastIndexOf("/"))?n.substring(t+1):"unknown",i=i.toString(),-1!=(s=i.indexOf(";"))&&(i=i.substring(0,s)),-1!=(s=i.indexOf(" "))&&(i=i.substring(0,s)),-1!=(s=i.indexOf(")"))&&(i=i.substring(0,s)),e=parseInt(""+i,10),isNaN(e)&&(i=""+parseFloat(navigator.appVersion)),i},t.browserAcceptsLargeURLs=t.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},t.isWebSecure=var s=function(){var e=1e4;return function(t,s){nction i(t){var n=g.length;(n>e||s&&s.max&&n>s.max)&&(g=g.slice(-Math.floor(s.max/2))).push("Previous logs: "+n),g.push(t)}var r=this,o="comScore",g=[];r.log=function(){var e=n(arguments);i(e),"undefined"!=typeof console&&"function"==typeof console.log&&a(e)&&console.log.apply(console,e)},r.warn=function(){var e=n(arguments);i(e),"undefined"!=typeof console&&"function"==typeof console.warn&&a(e)&&console.warn.apply(console,e)},r.error=r.apiCall=r.infoLog=r.deprecation=r.getLogHistory=function(){return g}}}();return e.StreamingAnalytics=e.StreamingAnalytics||function(){var e=),n=a=i={dir:function(){return null},append:function(e,t,s){},write:deleteFile:function(){return!1},read:function(){return null}},r={PLATFORM:"generic",httpGet:n,httpPost:a,Storage:e,IO:i,onDataFetch:getCrossPublisherId:function(){return null},getAppName:function(){return o.UNKNOWN_VALUE},getAppVersion:function(){return o.UNKNOWN_VALUE},getVisitorId:getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return o.UNKNOWN_VALUE},getPlatformVersion:function(){return o.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return o.UNKNOWN_VALUE},getRuntimeVersion:function(){return o.UNKNOWN_VALUE},getDisplayResolution:function(){return o.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return o.UNKNOWN_RESOLUTION},getLanguage:function(){return o.UNKNOWN_VALUE},getPackageName:isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:clearTimeout:getDeviceArchitecture:function(){return o.UNKNOWN_VALUE},getConnectionType:function(){return o.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return o.UNKNOWN_VALUE},isConnectionSecure:processMeasurementLabels:,o={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};t.jsonObjectToStringDictionary=t.getKeys=t.fixEventTime=t.isBrowser=t.addNewPlaybackInterval=function(e,s,n,a){var i,r={};if(!(n>=s))return t.cloneObject(e);if(r.start=s,r.end=n,0==e.length)return e.push(r),t.cloneObject(e);for(i=0;i<e.length;i++)if(r.start>=e[i].start&&r.end<=e[i].end)return t.cloneObject(e);var o,g=!1;for(o=0;o<e.length;o++)if(o+1===e.length&&r.start>=e[o].start||r.start>=e[o].start&&r.start<e[o+1].start){e.splice(o+1,0,r),g=!0;break}g||e.splice(0,0,r);var c=[e[0]];for(i=1;i<e.length;i++)c[c.length-1].end+a<e[i].start?c.push(e[i]):c[c.length-1].end<e[i].end&&(c[c.length-1].end=e[i].end);return t.cloneObject(c)},t.stateToString=var g=),c={IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12},l=),u={STREAMINGANALYTICS_VERSION:"6.1.0.170130",MODEL_VERSION:"5.8",LOG_NAMESPACE:"STA",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,SYSTEM_CLOCK_JUMP_DETECTION_DEFAULT_INTERVAL:1e3,SYSTEM_CLOCK_JUMP_DETECTION_MINIMUM_INTERVAL:500,DEFAULT_ASSET_PLAYBACK_RATE:100,STANDARD_METADATA_LABELS:["ns_st_st","ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","cs_impid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_st_ie","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]},S=function(){function e(){var e,s,n,a,i,r,g,c,l,S,_,P,f,b,p,y,k,A,d,m,E,T,L,v,I,N,C,D,B,h,R,U,O,F,G,w,K,M,Y,x,V,H,q,W,j,J,z,$,Q,X=this,Z=u.INTERVAL_MERGE_TOLERANCE;t.extend(this,{getHash:function(){return e},setHash:function(t){e=t},setPlaybackIntervalMergeTolerance:function(e){Z=e},getPlaybackIntervalMergeTolerance:function(){return Z},setInternalLabel:function(e,t){a[e]=t},getInternalLabel:function(e){return a[e]},hasInternalLabel:function(e){return null!=a[e]},setLabels:getLabels:function(){return i},setLabel:getLabel:function(e){return i[e]},hasLabel:getClipNumber:function(){return parseInt(X.getInternalLabel("ns_st_cn"))},setClipNumber:function(e){X.setInternalLabel("ns_st_cn",e+"")},getPartNumber:createLabels:function(e,s){var r=e||{},o=t.isEmpty(r.ns_st_pt)?X.getPlaybackTime():parseInt(r.ns_st_pt);r.ns_st_pt=o+(isNaN(c)?0:s-c)+"",r.ns_st_dpt=o+(isNaN(c)?0:s-c)-l+"",r.ns_st_ipt=o+(isNaN(c)?0:s-c)-S+"";var g=t.isEmpty(r.ns_st_et)?X.getElapsedTime():parseInt(r.ns_st_et);r.ns_st_et=g+(isNaN(f)?0:s-f)+"",r.ns_st_det=g+(isNaN(f)?0:s-f)-b+"";var u=t.isEmpty(r.ns_st_bt)?X.getBufferingTime():parseInt(r.ns_st_bt);r.ns_st_bt=u+"",r.ns_st_dbt=u+(isNaN(N)?0:s-N)-C+"";for(var _,P=parseInt(r.ns_st_po),p=t.addNewPlaybackInterval(t.cloneObject(X.getSegmentPlaybackIntervals()),Q<0?P:A,Q<0?A:P,Z),y=t.addNewPlaybackInterval(t.cloneObject(X.getAssetPlaybackIntervals()),Q<0?P:A,Q<0?A:P,Z),k=0,I=0,D=0;D<p.length;D++)_=Math.abs(p[D].end-p[D].start),k+=_,_>I&&(I=_);var h=0,R=0;for(D=0;D<y.length;D++)_=Math.abs(y[D].end-y[D].start),h+=_,_>R&&(R=_);r.ns_st_upc=k+"",r.ns_st_dupc=k-d+"",r.ns_st_iupc=k-m+"",r.ns_st_iupc=k>m?k-m+"":"0",r.ns_st_lpc=I+"",r.ns_st_dlpc=I-E+"",r.ns_st_upa=h+"",r.ns_st_dupa=h-T+"",r.ns_st_iupa=h>L?h-L+"":"0",r.ns_st_lpa=R+"",r.ns_st_dlpa=R-v+"";var U=t.isEmpty(r.ns_st_pc)?X.getPauses():parseInt(r.ns_st_pc);r.ns_st_pc=U+"",r.ns_st_dpc=U-x+"";var F=t.isEmpty(r.ns_st_skc)?X.getSeeks():parseInt(r.ns_st_skc);r.ns_st_skc=F+"",r.ns_st_dskc=F-H+"";var G=t.isEmpty(r.ns_st_bc)?X.getBuffers():parseInt(r.ns_st_bc);r.ns_st_bc=G+"",r.ns_st_dbc=G-B+"";var w=t.isEmpty(r.ns_st_skt)?X.getSeekingTime():parseInt(r.ns_st_skt);r.ns_st_skt=w+"",r.ns_st_dskt=w-O+"";var M=t.isEmpty(r.ns_st_ska)?X.getSeekingAmount():parseInt(r.ns_st_ska);return r.ns_st_ska=M+"",r.ns_st_dska=M-K+"",n&&(r.ns_st_spc=q+"",r.ns_st_apc=W+"",r.ns_st_sq=j+"",r.ns_st_asq=J+""),r.ns_st_sc=n||0!=z?z+"":"1",r.ns_st_rt=Q+"",t.extend(r,a,i),r},updateDeltaLabels:updateIndependentLabels:getVideoTrack:function(){return X.getInternalLabel("ns_st_vt")},setVideoTrack:function(e){X.setInternalLabel("ns_st_vt",e+"")},getAudioTrack:function(){return X.getInternalLabel("ns_st_at")},setAudioTrack:function(e){X.setInternalLabel("ns_st_at",e+"")},getSubtitleTrack:function(){return X.getInternalLabel("ns_st_tt")},setSubtitleTrack:function(e){X.setInternalLabel("ns_st_tt",e+"")},getCDN:setCDN:function(e){X.setInternalLabel("ns_st_cdn",e+"")},getSegmentPlaybackIntervals:function(){return y},setAssetPlaybackIntervals:function(e){y=e},getAssetPlaybackIntervals:function(){return k},incrementPauses:function(){Y++},incrementSeeks:function(){V++},incrementPlayCounter:function(){j++},getPlayCounter:function(){return j},getBufferingTime:function(){return I},setBufferingTime:function(e){I=e},addBufferingTime:function(e){if(!isNaN(N)){var t=X.getBufferingTime();t+=e-N,X.setBufferingTime(t),N=NaN}},setPlaybackStartPosition:getPlaybackStartPosition:function(){return A},addInterval:getElapsedTime:function(){return P},setElapsedTime:function(e){P=e},addElapsedTime:function(e){if(!isNaN(f)){var t=X.getElapsedTime();t+=e-f,X.setElapsedTime(t),f=NaN}},getElapsedTimestamp:function(){return f},setElapsedTimestamp:function(e){f=e},addPlaybackTime:function(e){if(!isNaN(c)){var t=X.getPlaybackTime();t+=e-c,X.setPlaybackTime(t),c=NaN}},getPlaybackTime:function(){return g},getExpectedPlaybackPosition:setPlaybackTimeOffset:function(e){_=e},getPlaybackTimeOffset:function(){return _},setPlaybackTime:function(e){g=e},getPlaybackTimestamp:function(){return c},setPlaybackTimestamp:function(e){c=e},setPreviousPlaybackTime:function(e){l=e},setPreviousPlaybackTimestamp:getBufferingTimestamp:function(){return N},setBufferingTimestamp:function(e){N=e},getPauses:function(){return Y},setPauses:function(e){Y=e},getSeeks:function(){return V},setSeeks:function(e){V=e},setSeeking:function(e){h=e},isSeeking:function(){return h},setCollectingSeekingTime:function(e){G=e},isCollectingSeekingTime:function(){return G},setAssetStarted:function(e){s=e},isAssetStarted:function(){return s},setPlaybackStarted:function(e){n=e},isPlaybackStarted:function(){return n},setSeekingTimestamp:function(e){R=e},getSeekingTimestamp:function(){return R},addSeekingTime:function(e){if(!isNaN(R)){var t=X.getSeekingTime();t+=e-R,X.setSeekingTime(t),R=NaN}},getSeekingTime:function(){return U},setSeekingTime:function(e){U=e},setSeekingTimeBeforeEnd:function(e){M=e},getSeekingTimeBeforeEnd:function(){return M},setSeekStartPosition:function(e){F=e},getSeekStartPosition:function(){return F},setSeekingAmount:function(e){w=e},getSeekingAmount:function(){return w},addSeekingAmount:getSeekingDirection:setSeekingDirection:resetAssetLifecycleLabels:incrementSegmentPlaybackCounter:function(){q++},incrementAssetLoadCounter:function(){z++},incrementAssetPlaybackCounter:function(){W++},getPreviousUniquePlaybackInterval:function(){return d},setPreviousUniquePlaybackInterval:function(e){d=e},getPreviousEventIndependentUniquePlaybackInterval:function(){return m},setPreviousEventIndependentUniquePlaybackInterval:function(e){m=e},setPreviousLongestPlaybackInterval:function(e){E=e},getPreviousLongestPlaybackInterval:function(){return E},resetAssetPlaybackIntervals:setSegmentPlaybackCounter:function(e){q=e},setAssetLoadCounter:function(e){z=e},setAssetPlaybackCounter:function(e){W=e},setLowestPartNumberPlayed:function(e){p=e},getSegmentPlaybackCounter:function(){return q},getAssetLoadCounter:function(){return z},getAssetPlaybackCounter:function(){return W},getLowestPartNumberPlayed:function(){return p},getBuffers:function(){return D},incrementBufferCount:function(){D++},getPreviousBufferingTime:function(){return C},setPlaySequenceCounter:function(e){J=e},incrementPlaySequenceCounter:function(){J++},getPlaySequenceCounter:function(){return J},isPlaybackSessionLooping:function(){return $},setPlaybackSessionLooping:function(e){$=e},enableAutoCalculatePositions:isAutoCalculatePositionsEnabled:function(){return r},getPlaybackRate:function(){return Q},setPlaybackRate:function(e){Q=e}}),(a={}).ns_st_cl="0",a.ns_st_pn="1",a.ns_st_tp="0",a.ns_st_cn="1",a.ns_st_skd="0",a.ns_st_ci="0",a.c3="*null",a.c4="*null",a.c6="*null",a.ns_st_st="*null",a.ns_st_pu="*null",a.ns_st_pr="*null",a.ns_st_ep="*null",a.ns_st_sn="*null",a.ns_st_en="*null",a.ns_st_ct="*null",i={},n=!1,s=!1,e=o.UNKNOWN_VALUE,r=!0,g=0,c=NaN,_=0,l=0,P=0,f=NaN,p=0,b=0,S=0,A=NaN,y=[],k=[],d=0,m=0,E=0,T=0,L=0,v=0,I=0,N=NaN,C=0,D=0,B=0,h=!1,R=NaN,G=!1,F=0,M=0,U=0,O=0,w=0,K=0,Y=0,x=0,V=0,H=0,q=0,W=0,j=0,J=0,z=0,$=!1,Q=u.DEFAULT_ASSET_PLAYBACK_RATE}return e.resetAsset=e}(),_=function(){function e(e){var s,n,a,i,r,o,l,_,P,f,b,p,y,k,A,d,m=this;t.extend(this,{resetAsset:hashExists:storeHash:removeHash:storeAssetPlaybackCounters:getStoredAssetRegisters:function(e){return _[e]},getClipNumber:getMaxClipNumber:function(){return P},storeClipNumber:setLabels:getLabels:function(){return o},setLabel:getLabel:getAsset:function(){return s},addInternalErrorFlag:createLabels:incrementPlayCounter:function(){k++},incrementPauses:function(){y++},addPlaybackTime:function(e){if(!isNaN(i)){var t=m.getPlaybackTime();t+=e-i,m.setPlaybackTime(t),i=NaN}},addBufferingTime:getBufferingTime:function(){return A},setBufferingTime:function(e){A=e},getPlaybackTime:function(){return a},setBufferingTimestamp:function(e){n=e},getBufferingTimestamp:function(){return n},setPlaybackTime:function(e){a=e},setPlaybackTimestamp:function(e){i=e},getPlaybackTimestamp:function(){return i},getPauses:function(){return y},setPauses:function(e){y=e},isPlaybackSessionStarted:function(){return l},setPlaybackSessionStarted:function(e){l=e},getPlaybackCounter:incrementPlaybackCounter:function(){b++},setFirstEventSent:function(e){f=e},setPlaySequenceCounter:incrementPlaySequenceCounter:getPlaybackSessionID:setAsset:function(s,n){e.getLogging().apiCall("setAsset",s,n),s=t.jsonObjectToStringDictionary(s);var a=e.getStateMachine().getCurrentState();if(a!=c.IDLE){e.getLogging().infoLog("Ending the current Clip. It was in state:",t.stateToString(a));var i={};e.getStaCore().newEvent(g.END,t.fixEventTime(i),i)}var r="",o=0;if(null!=s.ns_st_cn)r=s.ns_st_cn;else for(var l=0;l<u.STANDARD_METADATA_LABELS.length;l++)s[u.STANDARD_METADATA_LABELS[l]]&&(r+=u.STANDARD_METADATA_LABELS[l]+":"+s[u.STANDARD_METADATA_LABELS[l]]+";");var S=m,_=S.getAsset();_.isAssetStarted()?(S.hashExists(_.getHash())||(S.storeHash(_.getHash()),S.storeClipNumber(_.getHash(),_.getClipNumber())),S.storeAssetPlaybackCounters(),o=S.hashExists(r)?S.getClipNumber(r):t.exists(s.ns_st_cn)?parseInt(s.ns_st_cn):S.getMaxClipNumber()+1):o=S.hashExists(r)?S.getClipNumber(r):_.getClipNumber(),S.resetAsset(),(_=S.getAsset()).setHash(r),_.setClipNumber(o),_.setLabels(s);var P=S.getStoredAssetRegisters(r);P&&(_.setAssetStarted(!0),_.setSegmentPlaybackCounter(P.segmentPlaybackCounter),_.setAssetLoadCounter(P.assetLoadCounter),_.setAssetPlaybackCounter(P.assetPlaybackCounter),_.setLowestPartNumberPlayed(P.lowestPartNumberPlayed),_.setSeeking(P.seeking),_.setSeekingTimeBeforeEnd(P.seekingTimeBeforeEnd),_.setSeekStartPosition(P.seekingStartPosition),_.setAssetPlaybackIntervals(P.segmentPlaybackIntervals),P.videoTrack&&_.setVideoTrack(P.videoTrack),P.audioTrack&&_.setAudioTrack(P.audioTrack),P.subtitleTrack&&_.setSubtitleTrack(P.subtitleTrack),P.cdn&&_.setCDN(P.cdn),_.setPlaySequenceCounter(P.playSequenceCounter),_.setPreviousUniquePlaybackInterval(P.previousUniquePlaybackInterval),_.setPreviousEventIndependentUniquePlaybackInterval(P.previousEventIndependentUniquePlaybackInterval),_.setPreviousLongestPlaybackInterval(P.previousLongestPlaybackInterval)),_.incrementAssetLoadCounter(),_.isAssetStarted()&&n&&S.incrementPlayCounter(),n&&(S.setPlaySequenceCounter(0),_.setPlaybackSessionLooping(!0)),!t.exists(s.ns_st_tp)&&t.exists(s.ns_st_ad)&&t.isNotEmpty(s.ns_st_ad)&&"0"!==s.ns_st_ad&&_.setInternalLabel("ns_st_tp","1")}}),s=new S,(r={}).ns_st_id=+new Date+"",o={},n=NaN,a=0,i=NaN,_={},P=0,l=!1,f=!1,b=0,y=0,p=0,k=1,A=0,d=[]}return e.resetPlaybackSession=e}(),P=function(e){ar n,a,i=this,r=[];t.extend(this,{newEvent:addMeasurementListener:removeMeasurementListener:getEventCounter:function(){return n},incrementEventCounter:function(){n++},setEventCounter:function(e){n=e},getMeasurementSnapshot:function(){return a}}),n=1},f=function(e){unction n(){null!=a&&(e.getStaCore().getPlatformAPI().clearTimeout(a),a=null)}var a,i,r,o=this,c=u.DEFAULT_HEARTBEAT_INTERVAL;t.extend(this,{getCount:function(){return r},setIntervals:function(e){c=e},getInterval:getIntervals:function(){return c},resume:pause:),i=0,r=0},b=function(e){r a,i=this,r=u.DEFAULT_KEEP_ALIVE_INTERVAL;t.extend(i,{start:stop:n,setInterval:function(e){r=e},getInterval:function(){return r}})},p=y=function(e){t.extend(this,{onSeekStartWhenPausedOrBufferingDuringPause:onBufferWhenSeekingOrPaused:function(t,s){e.getPlaybackSession().setBufferingTimestamp(t),e.getPlaybackSession().getAsset().setBufferingTimestamp(t),e.getPlaybackSession().getAsset().addElapsedTime(t),e.getPlaybackSession().getAsset().setElapsedTimestamp(t)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(t,s){e.getPlaybackSession().addBufferingTime(t),e.getPlaybackSession().getAsset().addBufferingTime(t),e.getPlaybackSession().getAsset().addElapsedTime(t),e.getPlaybackSession().getAsset().setElapsedTimestamp(t)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(t,s){e.getPlaybackSession().getAsset().isSeeking()&&e.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(e.getPlaybackSession().getAsset().addSeekingTime(t),e.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),e.getPlaybackSession().getAsset().addElapsedTime(t),e.getPlaybackSession().getAsset().setElapsedTimestamp(t)},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(s,n){e.getStaCore().resetHeartbeat(),e.getKeepAlive().stop(),e.getPlaybackSession().getAsset().addElapsedTime(s);var a=e.getStaCore().createLabels(g.END,n,s);e.getPlaybackSession().getAsset().updateDeltaLabels(a.eventLabels),e.getPlaybackSession().getAsset().updateIndependentLabels(a.eventLabels),e.getEventManager().newEvent(a),e.getPlaybackSession().getAsset().isSeeking()&&e.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(e.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(s-e.getPlaybackSession().getAsset().getSeekingTimestamp()),e.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),e.getPlaybackSession().storeAssetPlaybackCounters(),e.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),e.getPlaybackSession().getAsset().setPlaybackStarted(!1),n.hasOwnProperty("ns_st_pe")&&t.parseBoolean(n.ns_st_pe,!1)&&e.getStaCore().resetPlaybackSession()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:onBufferStopOrOnPlayWhenBufferingDuringPlayback:)},k=function(e){t.extend(this,{onEndOrAdSkip:onBufferStop:function(t,s){e.getPlaybackSession().addBufferingTime(t),e.getPlaybackSession().getAsset().addBufferingTime(t),e.getPlaybackSession().getAsset().isSeeking()&&e.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(e.getPlaybackSession().getAsset().addSeekingTime(t),e.getPlaybackSession().getAsset().setCollectingSeekingTime(!1))},onSeekStart:onPause:onPlay:)},A=function(e){t.extend(this,{onEndAndSkip:onPause:function(t,s){e.getPlaybackSession().addBufferingTime(t),e.getPlaybackSession().getAsset().addBufferingTime(t),e.getPlaybackSession().getAsset().addElapsedTime(t),e.getPlaybackSession().getAsset().setElapsedTimestamp(t)},onPlay:function(t,s){var n=parseInt(s.ns_st_po);e.getPlaybackSession().incrementPlaySequenceCounter(),e.getPlaybackSession().getAsset().incrementPlaySequenceCounter(),e.getPlaybackSession().getAsset().incrementPlayCounter(),e.getPlaybackSession().addBufferingTime(t),e.getPlaybackSession().getAsset().addBufferingTime(t),e.getPlaybackSession().getAsset().isSeeking()&&(e.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(e.getPlaybackSession().getAsset().addSeekingTime(t),e.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),e.getPlaybackSession().getAsset().addSeekingAmount(n),e.getPlaybackSession().getAsset().setSeeking(!1)),e.getPlaybackSession().getAsset().addElapsedTime(t),e.getPlaybackSession().getAsset().setElapsedTimestamp(t),e.getPlaybackSession().setPlaybackTimestamp(t),e.getPlaybackSession().getAsset().setPlaybackTimestamp(t),e.getPlaybackSession().getAsset().setPlaybackStartPosition(n),e.getHeartbeat().resume(),e.getKeepAlive().start();var a=e.getStaCore().createLabels(g.PLAY,s,t);e.getPlaybackSession().getAsset().updateDeltaLabels(a.eventLabels),e.getPlaybackSession().getAsset().updateIndependentLabels(a.eventLabels),e.getEventManager().newEvent(a)}})},d=function(e){t.extend(this,{onPauseOnBuffering:function(t,s){parseInt(s.ns_st_po),e.getStaCore().stopPausedOnBufferingTimer(),e.getPlaybackSession().getAsset().addElapsedTime(t),e.getPlaybackSession().getAsset().setElapsedTimestamp(t),e.getPlaybackSession().addBufferingTime(t),e.getPlaybackSession().getAsset().addBufferingTime(t),e.getPlaybackSession().incrementPauses(),e.getPlaybackSession().getAsset().incrementPauses();var n=e.getStaCore().createLabels(g.PAUSE,s,t);e.getPlaybackSession().getAsset().updateDeltaLabels(n.eventLabels),e.getPlaybackSession().getAsset().updateIndependentLabels(n.eventLabels),e.getEventManager().newEvent(n),e.getPlaybackSession().setBufferingTimestamp(t),e.getPlaybackSession().getAsset().setBufferingTimestamp(t)},onEndOrAdSkip:function(s,n){parseInt(n.ns_st_po),e.getStaCore().stopPausedOnBufferingTimer(),e.getStaCore().resetHeartbeat(),e.getKeepAlive().stop(),e.getPlaybackSession().addBufferingTime(s),e.getPlaybackSession().getAsset().addBufferingTime(s),e.getPlaybackSession().getAsset().addElapsedTime(s);var a=e.getStaCore().createLabels(g.END,n,s);e.getPlaybackSession().getAsset().updateDeltaLabels(a.eventLabels),e.getPlaybackSession().getAsset().updateIndependentLabels(a.eventLabels),e.getEventManager().newEvent(a),e.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),e.getPlaybackSession().getAsset().setPlaybackStarted(!1),n.hasOwnProperty("ns_st_pe")&&t.parseBoolean(n.ns_st_pe,!1)&&e.getStaCore().resetPlaybackSession()},onSeekStart:onPause:function(t,s){parseInt(s.ns_st_po),e.getStaCore().stopPausedOnBufferingTimer(),e.getPlaybackSession().getAsset().addElapsedTime(t),e.getPlaybackSession().getAsset().setElapsedTimestamp(t),e.getPlaybackSession().addBufferingTime(t),e.getPlaybackSession().getAsset().addBufferingTime(t),e.getPlaybackSession().incrementPauses(),e.getPlaybackSession().getAsset().incrementPauses();var n=e.getStaCore().createLabels(g.PAUSE,s,t);e.getPlaybackSession().getAsset().updateDeltaLabels(n.eventLabels),e.getPlaybackSession().getAsset().updateIndependentLabels(n.eventLabels),e.getEventManager().newEvent(n)}})},m=function(e){t.extend(this,{onEndOrAdSkip:onPause:onPlay:)},E=function(e){t.extend(this,{onBuffer:onSeekStart:onPlay:)},T=function(e){t.extend(this,{onEndOrAdSkip:onPlay:)},L=function(e){t.extend(this,{onEndOrAdSkip:onBufferStop:onSeekStart:onPause:onPlay:)},v=function(e){t.extend(this,{onEndOrAdSkip:function(s,n){e.getPlaybackSession().getAsset().isSeeking()&&e.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(e.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(s-e.getPlaybackSession().getAsset().getSeekingTimestamp()),e.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),e.getPlaybackSession().storeAssetPlaybackCounters(),e.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),e.getPlaybackSession().getAsset().setPlaybackStarted(!1),n.hasOwnProperty("ns_st_pe")&&t.parseBoolean(n.ns_st_pe,!1)&&e.getStaCore().resetPlaybackSession()},onSeekStart:onPlay:onBuffer:)},I=function(e){t.extend(this,{onEndOrAdSkip:onBuffer:onSeekStart:onPause:)},N=function(e){t.extend(this,{onEndOrAdSkip:onPause:onPlay:)},C=function(e){t.extend(this,{onPause:)},D=function(e){t.extend(this,{onEndOrAdSkip:function(s,n){parseInt(n.ns_st_po),e.getStaCore().resetHeartbeat(),e.getKeepAlive().stop(),e.getPlaybackSession().getAsset().addElapsedTime(s);var a=e.getStaCore().createLabels(g.END,n,s);e.getPlaybackSession().getAsset().updateDeltaLabels(a.eventLabels),e.getPlaybackSession().getAsset().updateIndependentLabels(a.eventLabels),e.getEventManager().newEvent(a),e.getPlaybackSession().getAsset().isSeeking()&&e.getPlaybackSession().getAsset().isCollectingSeekingTime()&&(e.getPlaybackSession().getAsset().setSeekingTimeBeforeEnd(s-e.getPlaybackSession().getAsset().getSeekingTimestamp()),e.getPlaybackSession().getAsset().setCollectingSeekingTime(!1)),e.getPlaybackSession().storeAssetPlaybackCounters(),e.getPlaybackSession().getAsset().resetAssetLifecycleLabels(),e.getPlaybackSession().getAsset().setPlaybackStarted(!1),n.hasOwnProperty("ns_st_pe")&&t.parseBoolean(n.ns_st_pe,!1)&&e.getStaCore().resetPlaybackSession()},onPlay:)},B=function(e){r i,S,B,R,U,O,F,G,w,K,M,Y,x,V,H,q,W,j,J,z,$,Q,X,Z,ee,te,se,ne,ae=this,ie={},re=u.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,oe=u.THROTTLING_DELAY,ge={},ce=!1;t.extend(ae,{getConfiguration:enableSystemClockJumpsDetection:createLabels:newEvent:function(e,s,n,r){ae.stopDelayedTransitionTimer();var o=i.getStateMachine().getCurrentState(),l=i.getStateMachine().eventTypeToState(e);if(null!=l&&l!=o)if(!ae.isThrottlingEnabled()||o!=c.PLAYING&&o!=c.PAUSED||l!=c.PLAYING&&l!=c.PAUSED||r){var u=isNaN(j)?W:j;j=s;var S=!1;(s<u||ce)&&(S=!0,ce=!1,s<u?(i.getPlaybackSession().addInternalErrorFlag("1"),i.getLogging().infoLog("System clock jump detected","to the far past")):te?(i.getPlaybackSession().addInternalErrorFlag("3"),i.getLogging().infoLog("System clock jump detected","to the future")):(i.getPlaybackSession().addInternalErrorFlag("2"),i.getLogging().infoLog("System clock jump detected","to the near past")),s=u),n.ns_st_po||(i.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?i.getStateMachine().getCurrentState()==c.IDLE?n.ns_st_po="0":n.ns_st_po=i.getPlaybackSession().getAsset().getExpectedPlaybackPosition(s)+"":n.ns_st_po=ee+""),ee=parseInt(n.ns_st_po),i.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(n.ns_st_po)),a(e,s,n);var _=0;isNaN(i.getStateMachine().getLastStateChangeTimestamp())||(_=s-i.getStateMachine().getLastStateChangeTimestamp()),i.getStateMachine().newEvent(e,s),S&&(l!=c.IDLE&&l!=c.PLAYBACK_NOT_STARTED&&l!=c.SEEKING_BEFORE_PLAYBACK&&l!=c.BUFFERING_BEFORE_PLAYBACK&&i.getPlaybackSession().getAsset().setElapsedTimestamp(j),l!=c.BUFFERING_BEFORE_PLAYBACK&&l!=c.BUFFERING_DURING_PAUSE&&l!=c.BUFFERING_DURING_PLAYBACK&&l!=c.BUFFERING_DURING_SEEKING&&l!=c.PAUSED_DURING_BUFFERING||(i.getPlaybackSession().setBufferingTimestamp(j),i.getPlaybackSession().getAsset().setBufferingTimestamp(j)),l!=c.PLAYING&&l!=c.BUFFERING_DURING_PLAYBACK||(i.getPlaybackSession().setPlaybackTimestamp(j),i.getPlaybackSession().getAsset().setPlaybackTimestamp(j)),l!=c.SEEKING_BEFORE_PLAYBACK&&l!=c.SEEKING_DURING_BUFFERING&&l!=c.SEEKING_DURING_PAUSE&&l!=c.SEEKING_DURING_PLAYBACK&&l!=c.BUFFERING_DURING_SEEKING||i.getPlaybackSession().getAsset().setSeekingTimestamp(j)),i.getLogging().log("Transition from",t.stateToString(o),"to",t.stateToString(l),"due to event:",g.toString(e));for(var P=0,f=X.length;P<f;P++)X[P](o,l,n,_)}else{i.getLogging().infoLog("Throttled event:",g.toString(e),"during state",t.stateToString(o),n,ae.getThrottlingDelay(),"ms");var b=e,0,n);Q=i.getPlatformAPI().setTimeout(b,ae.getThrottlingDelay())}else i.getLogging().infoLog("Ignored event:",g.toString(e),"during state",t.stateToString(o),n)},newPseudoEvent:function(e,s,n){if(e!=g.LOAD&&e!=g.ENGAGE||i.getStateMachine().getCurrentState()==c.IDLE){e==g.ERROR&&null==n.ns_st_er&&(n.ns_st_er=o.UNKNOWN_VALUE),e==g.TRANSFER&&null==n.ns_st_rp&&(n.ns_st_rp=o.UNKNOWN_VALUE);var a,r,l,u,S=!0,_=!1;switch(e){case g.BIT_RATE:a="ns_st_br",r="ns_st_pbr";break;case g.PLAYBACK_RATE:a="ns_st_rt",r="ns_st_prt";break;case g.VOLUME:a="ns_st_vo",r="ns_st_pvo";break;case g.WINDOW_STATE:a="ns_st_ws",r="ns_st_pws";break;case g.AUDIO:a="ns_st_at",r="ns_st_pat";break;case g.VIDEO:a="ns_st_vt",r="ns_st_pvt";break;case g.SUBS:a="ns_st_tt",r="ns_st_ptt";break;case g.CDN:a="ns_st_cdn",r="ns_st_pcdn";break;default:S=!1}if(S&&a in n)switch(u=n[a],e){case g.BIT_RATE:case g.VOLUME:case g.WINDOW_STATE:a in ge&&(l=ge[a],n[r]=l,_=u==l+""),ge[a]=n[a];break;case g.AUDIO:case g.VIDEO:case g.SUBS:case g.CDN:i.getPlaybackSession().getAsset().hasInternalLabel(a)&&(l=i.getPlaybackSession().getAsset().getInternalLabel(a),n[r]=l,_=u==l+""),i.getPlaybackSession().getAsset().setInternalLabel(a,n[a]);break;case g.PLAYBACK_RATE:l=i.getPlaybackSession().getAsset().getPlaybackRate(),n[r]=l+""}if(S&&i.getStateMachine().getCurrentState()!=c.PLAYING&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_PLAYBACK||S&&_)return e==g.PLAYBACK_RATE&&i.getPlaybackSession().getAsset().setPlaybackRate(parseInt(n.ns_st_rt)),void i.getLogging().infoLog("No measurement send for the pseudo-event:",g.toString(e),"during state",t.stateToString(i.getStateMachine().getCurrentState()),n);var P=isNaN(j)?W:j;j=s;var f=!1;(s<P||ce)&&(f=!0,ce=!1,s<P?(i.getPlaybackSession().addInternalErrorFlag("1"),i.getLogging().infoLog("System clock jump detected","to the far past")):te?(i.getPlaybackSession().addInternalErrorFlag("3"),i.getLogging().infoLog("System clock jump detected","to the future")):(i.getPlaybackSession().addInternalErrorFlag("2"),i.getLogging().infoLog("System clock jump detected","to the near past")),s=P),n.ns_st_po||(i.getPlaybackSession().getAsset().isAutoCalculatePositionsEnabled()?n.ns_st_po=i.getPlaybackSession().getAsset().getExpectedPlaybackPosition(s)+"":n.ns_st_po=ee+""),ee=parseInt(n.ns_st_po),i.getPlaybackSession().getAsset().setPlaybackTimeOffset(parseInt(n.ns_st_po)),i.getStateMachine().getCurrentState()!=c.IDLE&&i.getStateMachine().getCurrentState()!=c.PLAYBACK_NOT_STARTED&&i.getStateMachine().getCurrentState()!=c.SEEKING_BEFORE_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.BUFFERING_BEFORE_PLAYBACK&&(i.getPlaybackSession().getAsset().addElapsedTime(s),i.getPlaybackSession().getAsset().setElapsedTimestamp(s)),i.getStateMachine().getCurrentState()!=c.PLAYING&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_PLAYBACK||(i.getPlaybackSession().addPlaybackTime(s),i.getPlaybackSession().setPlaybackTimestamp(s),i.getPlaybackSession().getAsset().addPlaybackTime(s),i.getPlaybackSession().getAsset().setPlaybackTimestamp(s),i.getPlaybackSession().getAsset().addInterval(parseInt(n.ns_st_po)),i.getPlaybackSession().getAsset().setPlaybackStartPosition(parseInt(n.ns_st_po))),i.getStateMachine().getCurrentState()!=c.BUFFERING_BEFORE_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_PAUSE&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_SEEKING||(i.getPlaybackSession().addBufferingTime(s),i.getPlaybackSession().setBufferingTimestamp(s),i.getPlaybackSession().getAsset().addBufferingTime(s),i.getPlaybackSession().getAsset().setBufferingTimestamp(s));var b=ae.createLabels(e,n,s);i.getPlaybackSession().getAsset().updateDeltaLabels(b.eventLabels),i.getPlaybackSession().getAsset().updateIndependentLabels(b.eventLabels),i.getEventManager().newEvent(b),e==g.PLAYBACK_RATE&&i.getPlaybackSession().getAsset().setPlaybackRate(parseInt(n.ns_st_rt)),f&&(i.getStateMachine().getCurrentState()!=c.PLAYING&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_PLAYBACK||(i.getPlaybackSession().setPlaybackTimestamp(j),i.getPlaybackSession().getAsset().setPlaybackTimestamp(j)),i.getStateMachine().getCurrentState()!=c.IDLE&&i.getStateMachine().getCurrentState()!=c.PLAYBACK_NOT_STARTED&&i.getStateMachine().getCurrentState()!=c.SEEKING_BEFORE_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.BUFFERING_BEFORE_PLAYBACK&&i.getPlaybackSession().getAsset().setElapsedTimestamp(j),i.getStateMachine().getCurrentState()!=c.BUFFERING_BEFORE_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_PAUSE&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_SEEKING&&i.getStateMachine().getCurrentState()!=c.PAUSED_DURING_BUFFERING||(i.getPlaybackSession().setBufferingTimestamp(j),i.getPlaybackSession().getAsset().setBufferingTimestamp(j)),i.getStateMachine().getCurrentState()!=c.SEEKING_BEFORE_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.SEEKING_DURING_BUFFERING&&i.getStateMachine().getCurrentState()!=c.SEEKING_DURING_PAUSE&&i.getStateMachine().getCurrentState()!=c.SEEKING_DURING_PLAYBACK&&i.getStateMachine().getCurrentState()!=c.BUFFERING_DURING_SEEKING||i.getPlaybackSession().getAsset().setSeekingTimestamp(j))}else i.getLogging().infoLog("Ignored pseudo-event:",g.toString(e),"during state",t.stateToString(i.getStateMachine().getCurrentState()),n)},getState:function(){return i.getStateMachine().getCurrentState()},addListener:function(e){X.push(e)},removeListener:getLabel:function(e){return ge[e]},getLabels:function(){return ge},setLabel:setLabels:getPlatformAPI:getExports:function(){return ie},isProperlyInitialized:setThrottlingDelay:function(e){oe=e},getThrottlingDelay:function(){return oe},isThrottlingEnabled:function(){return $},setThrottlingEnabled:function(e){$=e},isLoadingTimeSent:function(){return H},setLoadingTimeSent:function(e){H=e},getLoadTimeOffset:function(){return q},setLoadTimeOffset:function(e){q=e},getInitTimestamp:function(){return W},setPauseOnBufferingInterval:function(e){re=e},getPauseOnBufferingInterval:function(){return re},isPauseOnBufferingEnabled:function(){return J},setPauseOnBufferingEnabled:function(e){J=e},startPausedOnBufferingTimer:stopPausedOnBufferingTimer:stopDelayedTransitionTimer:setLiveEndpointURL:getLiveEndpointURL:getStaSM:function(){return i},resetPlaybackSession:resetHeartbeat:),t.isBrowser()?(se=window,ne=document):(se={},ne={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),t.extend(ae,{prepareUrl:function(e,s){for(var n,a=se.encodeURIComponent||escape,i=[],r=u.LABELS_ORDER,o=e.split("?"),g=o[0],c=o[1].split("&"),l=0,S=c.length;l<S;l++){var _=c[l].split("="),P=unescape(_[0]),f=unescape(_[1]);P&&(s[P]=f)}for(var b={},p=0,y=r.length;p<y;p++){var k=r[p];if(s.hasOwnProperty(k)){var A=s[k];void 0!==A&&null!=A&&(b[k]=!0,i.push(a(k)+"="+a(s[k])))}}for(var d in s)if(s.hasOwnProperty(d)){if(b[d])continue;var m=s[d];void 0!==m&&null!=m&&i.push(a(d)+"="+a(s[d]))}n=(n=g+"?"+i.join("&"))+(n.indexOf("&c8=")<0?"&c8="+a(ne.title):"")+(n.indexOf("&c7=")<0?"&c7="+a(ne.URL):"")+(n.indexOf("&c9=")<0?"&c9="+a(ne.referrer):"");var E=t.browserAcceptsLargeURLs()?u.URL_LENGTH_LIMIT:u.RESTRICTED_URL_LENGTH_LIMIT;if(n.length>E&&n.indexOf("&")>0){var T=n.substr(0,E-8).lastIndexOf("&");n=(n.substring(0,T)+"&ns_cut="+a(n.substring(T+1))).substr(0,E)}return n}}),function(){if(i=new h(ae),t.getNamespace().comScore?(ie=t.getNamespace().comScore.exports,i.setAppCore(ie.c())):i.setAppCore(null),e.publisherId){ae.setLabel("c2",e.publisherId);var n=e.secure;!n&&i.getAppCore()?n=i.getAppCore().isSecure():!n&&t.isBrowser()&&(n=t.isWebSecure());var a=(n?"https://sb":"http://b")+".scorecardresearch.com/p?c1=2";ae.setLiveEndpointURL(a)}e.liveEndpointURL&&ae.setLiveEndpointURL(e.liveEndpointURL),i.setKeepAlive(new b(i)),i.setHeartbeat(new f(i)),i.setEventManager(new P(i)),i.setStateMachine(new p),i.setLogging(new s(u.LOG_NAMESPACE,e.debug)),i.setPlaybackSession(new _(i)),S=new E(i),B=new T(i),R=new v(i),U=new I(i),O=new k(i),F=new d(i),G=new m(i),w=new A(i),K=new L(i),M=new N(i),Y=new C(i),x=new D(i),V=new y(i),H=!1,q=0,W=+new Date,J=!0,$=!1,X=[],e.systemClockJumpDetection&&ae.enableSystemClockJumpsDetection(parseInt(e.systemClockJumpDetectionInterval))}()},h=R=function(e){r a,i=this,r=!0;t.extend(this,{isProperlyInitialized:function(){return a.isProperlyInitialized()},reset:setPauseOnBufferingInterval:function(e){a.setPauseOnBufferingInterval(e)},getPauseOnBufferingInterval:function(){return a.getPauseOnBufferingInterval()},setKeepAliveInterval:function(e){a.getStaSM().getKeepAlive().setInterval(e)},getKeepAliveInterval:function(){return a.getStaSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(e){a.getStaSM().getHeartbeat().setIntervals(e)},notifyPlay:function(e,t){a.getStaSM().getLogging().apiCall("notifyPlay",e,t),s(g.PLAY,e,t)},notifyPause:function(e,t){a.getStaSM().getLogging().apiCall("notifyPause",e,t),s(g.PAUSE,e,t)},notifyEnd:function(e,t){a.getStaSM().getLogging().apiCall("notifyEnd",e,t),s(g.END,e,t)},notifyBufferStart:function(e,t){a.getStaSM().getLogging().apiCall("notifyBufferStart",e,t),s(g.BUFFER,e,t)},notifyBufferStop:function(e,t){a.getStaSM().getLogging().apiCall("notifyBufferStop",e,t),s(g.BUFFER_STOP,e,t)},notifyLoad:function(e,t){a.getStaSM().getLogging().apiCall("notifyLoad",e,t),s(g.LOAD,e,t)},notifyEngage:function(e,t){a.getStaSM().getLogging().apiCall("notifyEngage",e,t),s(g.ENGAGE,e,t)},notifySeekStart:function(e,t){a.getStaSM().getLogging().apiCall("notifySeekStart",e,t),s(g.SEEK_START,e,t)},notifySkipAd:function(e,t){a.getStaSM().getLogging().apiCall("notifySkipAd",e,t),s(g.AD_SKIP,e,t)},notifyCallToAction:function(e,t){a.getStaSM().getLogging().apiCall("notifyCallToAction",e,t),s(g.CTA,e,t)},notifyError:function(e,t){a.getStaSM().getLogging().apiCall("notifyError",e,t),s(g.ERROR,e,t)},notifyTransferPlayback:function(e,t){a.getStaSM().getLogging().apiCall("notifyTransferPlayback",e,t),s(g.TRANSFER,e,t)},notifyDrmFail:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmFail",e,t),s(g.DRM_FAILED,e,t)},notifyDrmApprove:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmApprove",e,t),s(g.DRM_APPROVED,e,t)},notifyDrmDeny:function(e,t){a.getStaSM().getLogging().apiCall("notifyDrmDeny",e,t),s(g.DRM_DENIED,e,t)},notifyChangeBitrate:function(e,t,n){if(a.getStaSM().getLogging().apiCall("notifyChangeBitrate",e,t,n),null!=e){var i=n||{};i.ns_st_br=e+"",s(g.BIT_RATE,i,t)}},notifyChangePlaybackRate:function(e,t,n){if(a.getStaSM().getLogging().apiCall("notifyChangePlaybackRate",e,t,n),null!=e){var i=n||{};i.ns_st_rt=e+"",s(g.PLAYBACK_RATE,i,t)}},notifyChangeVolume:function(e,t,n){if(a.getStaSM().getLogging().apiCall("notifyChangeVolume",e,t,n),null!=e){var i=n||{};i.ns_st_vo=e+"",s(g.VOLUME,i,t)}},notifyChangeWindowState:function(e,t,n){if(a.getStaSM().getLogging().apiCall("notifyChangeWindowState",e,t,n),null!=e){var i=n||{};i.ns_st_ws=e+"",s(g.WINDOW_STATE,i,t)}},notifyChangeAudioTrack:function(e,t,n){if(a.getStaSM().getLogging().apiCall("notifyChangeAudioTrack",e,t,n),null!=e){var i=n||{};i.ns_st_at=e+"",s(g.AUDIO,i,t)}},notifyChangeVideoTrack:function(e,t,n){if(a.getStaSM().getLogging().apiCall("notifyChangeVideoTrack",e,t,n),null!=e){var i=n||{};i.ns_st_vt=e+"",s(g.VIDEO,i,t)}},notifyChangeSubtitleTrack:function(e,t,n){if(a.getStaSM().getLogging().apiCall("notifyChangeSubtitleTrack",e,t,n),null!=e){var i=n||{};i.ns_st_tt=e+"",s(g.SUBS,i,t)}},notifyChangeCdn:notifyCustomEvent:getLabels:function(){return a.getLabels()},getState:function(){return a.getStaSM().getStateMachine().getCurrentState()},setLabels:function(e){a.setLabels(e)},getLabel:function(e){return a.getLabel(e)},setLabel:getLoadTimeOffset:function(){return a.getLoadTimeOffset()},setLoadTimeOffset:function(e){a.setLoadTimeOffset(e)},setLiveEndpointURL:getLiveEndpointURL:function(){return a.getLiveEndpointURL()},isPauseOnBufferingEnabled:function(){return a.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(e){a.setPauseOnBufferingEnabled(e)},isThrottlingEnabled:function(){return a.isThrottlingEnabled()},setThrottlingEnabled:function(e){a.setThrottlingEnabled(e)},setThrottlingDelay:function(e){a.setThrottlingDelay(e)},getThrottlingDelay:function(){return a.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:getPlaybackIntervalMergeTolerance:createPlaybackSession:getVersion:function(){return u.STREAMINGANALYTICS_VERSION},addListener:function(e){a.addListener(e)},removeListener:addMeasurementListener:function(e){a.getStaSM().getEventManager().addMeasurementListener(e)},removeMeasurementListener:getPlaybackSession:setExitEndEventEnabled:function(e){r=e},isExitEndEventEnabled:function(){return r},getPlatformAPI:_getLogHistory:),t.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",n),window.addEventListener("unload",n)):window.attachEvent&&(window.attachEvent("onbeforeunload",n),window.attachEvent("onunload",n))),e=t.extend({},e),(a=new B(e)).getStaSM().getLogging().log("New StreamingAnalytics instance with configuration",e)};return R.PlayerEvents=g,R.InternalStates=c,R.ImplementationType=l,R.Constants=u,R}(),e.ReducedRequirementsStreamingAnalytics=e.ReducedRequirementsStreamingAnalytics||(n={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},a={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},i=e.StreamingAnalytics,r=e.StreamingAnalytics.InternalStates||null,o=e.StreamingAnalytics.ImplementationType||null,g=null!=e.StreamingAnalytics.InternalStates&&null!=e.StreamingAnalytics.ImplementationType,c=e.StreamingAnalytics.Constants,l=function(e){nction S(e,t){y==p.None&&(y=t),f&&y==t&&function(e){for(var t in c.STANDARD_METADATA_LABELS)if(c.STANDARD_METADATA_LABELS.hasOwnProperty(t)&&!l(c.STANDARD_METADATA_LABELS[t],_,e))return!1;return!0}(e)?(b.getPlaybackSession().getAsset().setLabels(e),b.getState()!=r.PLAYING&&b.notifyPlay()):function(e){b.getPlaybackSession().setAsset(e),_=e,b.notifyPlay()}(e),f=!0,y=t}var _=null,P=0,f=!1,b=null,p={None:0,AudioContent:1,VideoContent:2},y=p.None,k=new s("TTSTA",(e||{}).debug);t.extend(this,{playVideoAdvertisement:function(e,s){if(b){k.apiCall("playVideoAdvertisement",e,s);var n={ns_st_ct:"va"};s?n.ns_st_ct="va"+s:k.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),s!=a.LinearLive&&s!=a.BrandedOnDemandLive||(n.ns_st_li="1"),e&&t.extend(n,e),u(n)}},playAudioAdvertisement:playVideoContentPart:function(e,s){if(b){k.apiCall("playVideoContentPart",e,s);var a={ns_st_ct:"vc"};s?a.ns_st_ct="vc"+s:k.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),s!=n.Live&&s!=n.UserGeneratedLive||(a.ns_st_li="1"),e&&t.extend(a,e),S(a,p.VideoContent)}},playAudioContentPart:stop:),g&&(t.exists(e)&&(e.customerC2||e.publisherId)||t.getNamespace().comScore?b=new i(e):k.error("Cannot instantiate StreamingAnalytics","The property publisherId was not provided (or incorrectly provided) in the StreamingAnalytics configuration."),b&&b.setLabel("ns_st_it",o.toString(o.REDUCED)))},l.ContentType=n,l.AdType=a,l),e;var n,a,i,r,o,g,c,l}(e.ns_=e.ns_||{})}(this);
