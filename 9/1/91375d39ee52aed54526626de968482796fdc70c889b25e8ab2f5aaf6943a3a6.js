(()=>{var t={5419:(t,e)=>{"use strict";e.M5=e.YE=e.cW=e.Sb=void 0,function(t){t[t.Web=0]="Web",t[t.Amp=1]="Amp",t[t.Standalone=5]="Standalone"}(e.Sb||(e.Sb={})),function(t){t[t.Disabled=0]="Disabled",t[t.Enabled=1]="Enabled"}(e.cW||(e.cW={})),function(t){t[t.Unknown=0]="Unknown",t[t.PanoIndiv=1]="PanoIndiv",t[t.PanoDevice=2]="PanoDevice"}(e.YE||(e.YE={})),function(t){t[t.NotCreated=0]="NotCreated",t[t.MissingSyncData=1]="MissingSyncData",t[t.FailedInit=3]="FailedInit",t[t.CompleteInit=4]="CompleteInit"}(e.M5||(e.M5={}))},4537:t=>{"use strict";t.exports=function(t,e){var i=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)i[s++]=arguments[n++];return new Promise((function(n,o){i[s]=function(t){if(r)if(r=!1,t)o(t);else{for(var e=new Array(arguments.length-1),i=0;i<e.length;)e[i++]=arguments[i];n.apply(null,e)}};try{t.apply(e||null,i)}catch(t){r&&(r=!1,o(t))}}))}},7419:(t,e)=>{"use strict";var i=e;i.length=function(t){var e=t.length;if(!e)return 0;for(var i=0;--e%4>1&&"="===t.charAt(e);)++i;return Math.ceil(3*t.length)/4-i};for(var s=new Array(64),n=new Array(123),r=0;r<64;)n[s[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;i.encode=function(t,e,i){for(var n,r=null,o=[],a=0,h=0;e<i;){var c=t[e++];switch(h){case 0:o[a++]=s[c>>2],n=(3&c)<<4,h=1;break;case 1:o[a++]=s[n|c>>4],n=(15&c)<<2,h=2;break;case 2:o[a++]=s[n|c>>6],o[a++]=s[63&c],h=0}a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),a=0)}return h&&(o[a++]=s[n],o[a++]=61,1===h&&(o[a++]=61)),r?(a&&r.push(String.fromCharCode.apply(String,o.slice(0,a))),r.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";i.decode=function(t,e,i){for(var s,r=i,a=0,h=0;h<t.length;){var c=t.charCodeAt(h++);if(61===c&&a>1)break;if(void 0===(c=n[c]))throw Error(o);switch(a){case 0:s=c,a=1;break;case 1:e[i++]=s<<2|(48&c)>>4,s=c,a=2;break;case 2:e[i++]=(15&s)<<4|(60&c)>>2,s=c,a=3;break;case 3:e[i++]=(3&s)<<6|c,a=0}}if(1===a)throw Error(o);return i-r},i.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},5124:t=>{"use strict";function e(t,i){"string"==typeof t&&(i=t,t=void 0);var s=[];function n(t){if("string"!=typeof t){var i=r();if(e.verbose&&console.log("codegen: "+i),i="return "+i,t){for(var o=Object.keys(t),a=new Array(o.length+1),h=new Array(o.length),c=0;c<o.length;)a[c]=o[c],h[c]=t[o[c++]];return a[c]=i,Function.apply(null,a).apply(null,h)}return Function(i)()}for(var d=new Array(arguments.length-1),l=0;l<d.length;)d[l]=arguments[++l];if(l=0,t=t.replace(/%([%dfijs])/g,(function(t,e){var i=d[l++];switch(e){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"})),l!==d.length)throw Error("parameter count mismatch");return s.push(t),n}function r(e){return"function "+(e||i||"")+"("+(t&&t.join(",")||"")+"){\n  "+s.join("\n  ")+"\n}"}return n.toString=r,n}t.exports=e,e.verbose=!1},9211:t=>{"use strict";function e(){this._={}}t.exports=e,e.prototype.on=function(t,e,i){return(this._[t]||(this._[t]=[])).push({fn:e,ctx:i||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._={};else if(void 0===e)this._[t]=[];else for(var i=this._[t],s=0;s<i.length;)i[s].fn===e?i.splice(s,1):++s;return this},e.prototype.emit=function(t){var e=this._[t];if(e){for(var i=[],s=1;s<arguments.length;)i.push(arguments[s++]);for(s=0;s<e.length;)e[s].fn.apply(e[s++].ctx,i)}return this}},9054:(t,e,i)=>{"use strict";t.exports=r;var s=i(4537),n=i(7199)("fs");function r(t,e,i){return"function"==typeof e?(i=e,e={}):e||(e={}),i?!e.xhr&&n&&n.readFile?n.readFile(t,(function(s,n){return s&&"undefined"!=typeof XMLHttpRequest?r.xhr(t,e,i):s?i(s):i(null,e.binary?n:n.toString("utf8"))})):r.xhr(t,e,i):s(r,this,t,e)}r.xhr=function(t,e,i){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(0!==s.status&&200!==s.status)return i(Error("status "+s.status));if(e.binary){var t=s.response;if(!t){t=[];for(var n=0;n<s.responseText.length;++n)t.push(255&s.responseText.charCodeAt(n))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return i(null,s.responseText)}},e.binary&&("overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.responseType="arraybuffer"),s.open("GET",t),s.send()}},945:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),i=new Uint8Array(e.buffer),s=128===i[3];function n(t,s,n){e[0]=t,s[n]=i[0],s[n+1]=i[1],s[n+2]=i[2],s[n+3]=i[3]}function r(t,s,n){e[0]=t,s[n]=i[3],s[n+1]=i[2],s[n+2]=i[1],s[n+3]=i[0]}function o(t,s){return i[0]=t[s],i[1]=t[s+1],i[2]=t[s+2],i[3]=t[s+3],e[0]}function a(t,s){return i[3]=t[s],i[2]=t[s+1],i[1]=t[s+2],i[0]=t[s+3],e[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?o:a,t.readFloatBE=s?a:o}():function(){function e(t,e,i,s){var n=e<0?1:0;if(n&&(e=-e),0===e)t(1/e>0?0:2147483648,i,s);else if(isNaN(e))t(2143289344,i,s);else if(e>34028234663852886e22)t((n<<31|2139095040)>>>0,i,s);else if(e<11754943508222875e-54)t((n<<31|Math.round(e/1401298464324817e-60))>>>0,i,s);else{var r=Math.floor(Math.log(e)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(e*Math.pow(2,-r)*8388608))>>>0,i,s)}}function o(t,e,i){var s=t(e,i),n=2*(s>>31)+1,r=s>>>23&255,o=8388607&s;return 255===r?o?NaN:n*(1/0):0===r?1401298464324817e-60*n*o:n*Math.pow(2,r-150)*(o+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,s),t.readFloatLE=o.bind(null,n),t.readFloatBE=o.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),i=new Uint8Array(e.buffer),s=128===i[7];function n(t,s,n){e[0]=t,s[n]=i[0],s[n+1]=i[1],s[n+2]=i[2],s[n+3]=i[3],s[n+4]=i[4],s[n+5]=i[5],s[n+6]=i[6],s[n+7]=i[7]}function r(t,s,n){e[0]=t,s[n]=i[7],s[n+1]=i[6],s[n+2]=i[5],s[n+3]=i[4],s[n+4]=i[3],s[n+5]=i[2],s[n+6]=i[1],s[n+7]=i[0]}function o(t,s){return i[0]=t[s],i[1]=t[s+1],i[2]=t[s+2],i[3]=t[s+3],i[4]=t[s+4],i[5]=t[s+5],i[6]=t[s+6],i[7]=t[s+7],e[0]}function a(t,s){return i[7]=t[s],i[6]=t[s+1],i[5]=t[s+2],i[4]=t[s+3],i[3]=t[s+4],i[2]=t[s+5],i[1]=t[s+6],i[0]=t[s+7],e[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?o:a,t.readDoubleBE=s?a:o}():function(){function e(t,e,i,s,n,r){var o=s<0?1:0;if(o&&(s=-s),0===s)t(0,n,r+e),t(1/s>0?0:2147483648,n,r+i);else if(isNaN(s))t(0,n,r+e),t(2146959360,n,r+i);else if(s>17976931348623157e292)t(0,n,r+e),t((o<<31|2146435072)>>>0,n,r+i);else{var a;if(s<22250738585072014e-324)t((a=s/5e-324)>>>0,n,r+e),t((o<<31|a/4294967296)>>>0,n,r+i);else{var h=Math.floor(Math.log(s)/Math.LN2);1024===h&&(h=1023),t(4503599627370496*(a=s*Math.pow(2,-h))>>>0,n,r+e),t((o<<31|h+1023<<20|1048576*a&1048575)>>>0,n,r+i)}}}function o(t,e,i,s,n){var r=t(s,n+e),o=t(s,n+i),a=2*(o>>31)+1,h=o>>>20&2047,c=4294967296*(1048575&o)+r;return 2047===h?c?NaN:a*(1/0):0===h?5e-324*a*c:a*Math.pow(2,h-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,s,4,0),t.readDoubleLE=o.bind(null,n,0,4),t.readDoubleBE=o.bind(null,r,4,0)}(),t}function i(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}function s(t,e,i){e[i]=t>>>24,e[i+1]=t>>>16&255,e[i+2]=t>>>8&255,e[i+3]=255&t}function n(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function r(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:t=>{"use strict";function e(t){try{var e=eval("quire".replace(/^/,"re"))(t);if(e&&(e.length||Object.keys(e).length))return e}catch(t){}return null}t.exports=e},8626:(t,e)=>{"use strict";var i=e,s=i.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=i.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=s(t),n="";i&&(n=e.shift()+"/");for(var r=0;r<e.length;)".."===e[r]?r>0&&".."!==e[r-1]?e.splice(--r,2):i?e.splice(r,1):++r:"."===e[r]?e.splice(r,1):++r;return n+e.join("/")};i.resolve=function(t,e,i){return i||(e=n(e)),s(e)?e:(i||(t=n(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+e):e)}},6662:t=>{"use strict";t.exports=function(t,e,i){var s=i||8192,n=s>>>1,r=null,o=s;return function(i){if(i<1||i>n)return t(i);o+i>s&&(r=t(s),o=0);var a=e.call(r,o,o+=i);return 7&o&&(o=1+(7|o)),a}}},4997:(t,e)=>{"use strict";var i=e;i.length=function(t){for(var e=0,i=0,s=0;s<t.length;++s)(i=t.charCodeAt(s))<128?e+=1:i<2048?e+=2:55296==(64512&i)&&56320==(64512&t.charCodeAt(s+1))?(++s,e+=4):e+=3;return e},i.read=function(t,e,i){if(i-e<1)return"";for(var s,n=null,r=[],o=0;e<i;)(s=t[e++])<128?r[o++]=s:s>191&&s<224?r[o++]=(31&s)<<6|63&t[e++]:s>239&&s<365?(s=((7&s)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,r[o++]=55296+(s>>10),r[o++]=56320+(1023&s)):r[o++]=(15&s)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,r.slice(0,o))),n.join("")):String.fromCharCode.apply(String,r.slice(0,o))},i.write=function(t,e,i){for(var s,n,r=i,o=0;o<t.length;++o)(s=t.charCodeAt(o))<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(o+1)))?(s=65536+((1023&s)<<10)+(1023&n),++o,e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=63&s|128):(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=63&s|128);return i-r}},7501:function(t,e,i){var s;t=i.nmd(t),function(n){var r=e,o=(t&&t.exports,"object"==typeof i.g&&i.g);o.global!==o&&o.window;var a=function(t){this.message=t};(a.prototype=new Error).name="InvalidCharacterError";var h=function(t){throw new a(t)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&h("The string to be encoded contains characters outside of the Latin1 range.");for(var e,i,s,n,r=t.length%3,o="",a=-1,d=t.length-r;++a<d;)e=t.charCodeAt(a)<<16,i=t.charCodeAt(++a)<<8,s=t.charCodeAt(++a),o+=c.charAt((n=e+i+s)>>18&63)+c.charAt(n>>12&63)+c.charAt(n>>6&63)+c.charAt(63&n);return 2==r?(e=t.charCodeAt(a)<<8,i=t.charCodeAt(++a),o+=c.charAt((n=e+i)>>10)+c.charAt(n>>4&63)+c.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(a),o+=c.charAt(n>>2)+c.charAt(n<<4&63)+"=="),o},decode:function(t){var e=(t=String(t).replace(d,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&h("Invalid character: the string to be decoded is not correctly encoded.");for(var i,s,n=0,r="",o=-1;++o<e;)s=c.indexOf(t.charAt(o)),i=n%4?64*i+s:s,n++%4&&(r+=String.fromCharCode(255&i>>(-2*n&6)));return r},version:"0.1.0"};void 0===(s=function(){return l}.call(e,i,e,t))||(t.exports=s)}()},1836:(t,e,i)=>{"use strict";const{proto3:s}=i(1549),{Metadata:n}=i(5950),r=s.makeMessageType("contracts.core.amazon_tam.v1.AmazonTamRequest",(()=>[{no:1,name:"line_item_id",kind:"scalar",T:9},{no:2,name:"code",kind:"scalar",T:9},{no:3,name:"metadata",kind:"message",T:n}]));e.tt=r},8244:(t,e,i)=>{"use strict";const{proto3:s}=i(1549),n=s.makeMessageType("core.amazon_tam.v1.AmazonTamResponse",(()=>[{no:1,name:"error_message",kind:"scalar",T:9},{no:10,name:"encrypted_bid_price",kind:"scalar",T:9},{no:12,name:"obfuscated_price",kind:"scalar",T:1}]));e.I=n},5883:(t,e,i)=>{"use strict";Object.defineProperty(e,"et",{value:!0});const{proto3:s}=i(1549),n=s.makeEnum("contracts.core.v1.DeviceType",[{no:0,name:"DESKTOP"},{no:1,name:"SMARTPHONE"},{no:2,name:"TABLET"},{no:3,name:"GAME_CONSOLE"},{no:4,name:"SMARTTV"},{no:5,name:"WEARABLE_COMPUTER"},{no:6,name:"PDA"},{no:7,name:"UNRECOGNIZED"}]),r=s.makeMessageType("contracts.core.v1.Browser",(()=>[{no:1,name:"browser_version",kind:"scalar",T:9},{no:2,name:"browser_type",kind:"scalar",T:9},{no:3,name:"os_code",kind:"scalar",T:9},{no:4,name:"device_type",kind:"enum",T:s.getEnumType(n)}]));e.DeviceType=n,e.Browser=r},9846:(t,e,i)=>{"use strict";Object.defineProperty(e,"et",{value:!0});const{proto3:s}=i(1549),n=s.makeEnum("contracts.core.v1.ImplementationType",[{no:0,name:"WEB"},{no:1,name:"AMP"},{no:2,name:"BOTH"},{no:3,name:"IN_APP_WEB"},{no:4,name:"IN_APP_NATIVE"},{no:5,name:"STANDALONE"}]);e.ImplementationType=n},4265:(t,e,i)=>{"use strict";Object.defineProperty(e,"et",{value:!0});const{proto3:s}=i(1549),n=s.makeMessageType("contracts.core.v1.GeoLocation",(()=>[{no:1,name:"country_geo_id",kind:"scalar",T:5},{no:2,name:"city_id",kind:"scalar",T:5},{no:3,name:"subdivision_id",kind:"scalar",T:5},{no:4,name:"dma_id",kind:"scalar",T:5,opt:!0},{no:5,name:"ip",kind:"scalar",T:9},{no:6,name:"lat",kind:"scalar",T:1,opt:!0},{no:7,name:"lon",kind:"scalar",T:1,opt:!0},{no:8,name:"zip_code",kind:"scalar",T:9}]));e.GeoLocation=n},5950:(t,e,i)=>{"use strict";Object.defineProperty(e,"et",{value:!0});const{proto3:s}=i(1549),{Browser:n}=i(5883),{GeoLocation:r}=i(4265),{ImplementationType:o}=i(9846),a=s.makeMessageType("contracts.core.v1.Metadata",(()=>[{no:1,name:"version",kind:"scalar",T:5},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"player_id",kind:"scalar",T:9},{no:4,name:"user_id",kind:"scalar",T:9},{no:5,name:"browser",kind:"message",T:n},{no:6,name:"geo",kind:"message",T:r},{no:7,name:"client_ab0",kind:"scalar",T:5},{no:8,name:"client_ab1",kind:"scalar",T:5},{no:9,name:"server_ab0",kind:"scalar",T:5},{no:10,name:"server_ab1",kind:"scalar",T:5},{no:15,name:"page_url",kind:"scalar",T:9},{no:17,name:"bundle_id",kind:"scalar",T:9},{no:18,name:"implementation_type",kind:"enum",T:s.getEnumType(o)},{no:19,name:"should_track_all_requests",kind:"scalar",T:8},{no:20,name:"custom_param1",kind:"scalar",T:9},{no:21,name:"custom_param2",kind:"scalar",T:9},{no:22,name:"custom_param3",kind:"scalar",T:9},{no:24,name:"ab_test_id",kind:"scalar",T:9},{no:25,name:"is_page_in_focus",kind:"scalar",T:8},{no:26,name:"custom_param4",kind:"scalar",T:9},{no:27,name:"custom_param5",kind:"scalar",T:9},{no:28,name:"bundle_ab_id",kind:"scalar",T:9},{no:29,name:"bundle_ab_part",kind:"scalar",T:9},{no:31,name:"client_ab2",kind:"scalar",T:5},{no:32,name:"client_ab3",kind:"scalar",T:5},{no:33,name:"client_ab4",kind:"scalar",T:5},{no:34,name:"client_ab5",kind:"scalar",T:5},{no:35,name:"iiq_enabled_ab",kind:"scalar",T:5},{no:36,name:"iiq_group_ab",kind:"scalar",T:5},{no:37,name:"event_timestamp",kind:"scalar",T:3},{no:38,name:"is_identity_enhanced",kind:"scalar",T:8}]));e.Metadata=a},6658:(t,e,i)=>{"use strict";var s=i(3090),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var e=r(t),i=e.version,s=e.cmpId,o=e.vendorListVersion,a=e.purposeIdBitString,h=e.maxVendorId,c=e.created,d=e.lastUpdated,l=e.isRange,u=e.defaultConsent,p=e.vendorIdBitString,f=e.vendorRangeList,m=e.cmpVersion,g=e.consentScreen,v=e.consentLanguage,y={version:i,cmpId:s,vendorListVersion:o,allowedPurposeIds:n(a),maxVendorId:h,created:c,lastUpdated:d,cmpVersion:m,consentScreen:g,consentLanguage:v};if(l){var b=f.reduce((function(t,e){for(var i=e.isRange,s=e.startVendorId,n=e.endVendorId,r=i?n:s,o=s;o<=r;o+=1)t[o]=!0;return t}),{});y.allowedVendorIds=[];for(var I=1;I<=h;I+=1)(u&&!b[I]||!u&&b[I])&&-1===y.allowedVendorIds.indexOf(I)&&y.allowedVendorIds.push(I)}else y.allowedVendorIds=n(p);return y}}},8462:(t,e,i)=>{"use strict";var s=i(6658).decodeConsentString;t.exports={decodeConsentString:s}},3090:(t,e,i)=>{"use strict";var s=i(7501),n=i(3977),r=n.versionNumBits,o=n.vendorVersionMap;function a(t,e,i){return parseInt(t.substr(e,i),2)}function h(t,e,i){return new Date(100*a(t,e,i))}function c(t){var e=a(t);return String.fromCharCode(e+65).toLowerCase()}function d(t,e,i){var s=t.substr(e,i);return c(s.slice(0,i/2))+c(s.slice(i/2))}function l(t){var e=t.input,i=t.output,s=t.startPosition,n=t.field,r=n.type,o=n.numBits,c=n.decoder,l=n.validator,p=n.listCount;if("function"==typeof l&&!l(i))return{newPosition:s};if("function"==typeof c)return c(e,i,s);var f,m,g="function"==typeof o?o(i):o;switch(r){case"int":return{fieldValue:a(e,s,g)};case"bool":return{fieldValue:(f=e,m=s,1===parseInt(f.substr(m,1),2))};case"date":return{fieldValue:h(e,s,g)};case"bits":return{fieldValue:e.substr(s,g)};case"list":return function(t,e,i,s,n){var r=0;"function"==typeof n?r=n(e):"number"==typeof n&&(r=n);for(var o=i,a=[],h=0;h<r;h+=1){var c=u({input:t,fields:s.fields,startPosition:o});o=c.newPosition,a.push(c.decodedObject)}return{fieldValue:a,newPosition:o}}(e,i,s,n,p);case"language":return{fieldValue:d(e,s,g)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function u(t){var e=t.input,i=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:i.reduce((function(t,i){var s=i.name,r=i.numBits,o=l({input:e,output:t,startPosition:n,field:i}),a=o.fieldValue,h=o.newPosition;return void 0!==a&&(t[s]=a),void 0!==h?n=h:"number"==typeof r&&(n+=r),t}),{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce((function(t,e,i){return"1"===e&&-1===t.indexOf(i+1)&&t.push(i+1),t}),[])},decodeFromBase64:function(t,e){for(var i=t;i.length%4!=0;)i+="=";i=i.replace(/-/g,"+").replace(/_/g,"/");for(var n,h,c=s.decode(i),d="",l=0;l<c.length;l+=1){var p=c.charCodeAt(l).toString(2);d+=(n=p,h=8-p.length,function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",i="",s=0;s<t;s+=1)i+=e;return i}(Math.max(0,h))+n)}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,i=a(t,0,r);if("number"!=typeof i)throw new Error("ConsentString - Unknown version number in the string to decode");if(!o[i])throw new Error("ConsentString - Unsupported version "+i+" in the string to decode");return u({input:t,fields:e[i].fields}).decodedObject}(d,e)}}},3977:t=>{"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},8908:(t,e,i)=>{var s;s="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},t.exports=s},1682:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LineStream:()=>h,ParseStream:()=>u,Parser:()=>m});var s=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,s=0;s<i;++s)e[s].call(this,arguments[1]);else for(var n=Array.prototype.slice.call(arguments,1),r=e.length,o=0;o<r;++o)e[o].apply(this,n)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n.apply(this,arguments)}var r=i(8908),o=i.n(r);function a(t){for(var e,i=(e=t,o().atob?o().atob(e):Buffer.from(e,"base64").toString("binary")),s=new Uint8Array(i.length),n=0;n<i.length;n++)s[n]=i.charCodeAt(n);return s}class h extends s{constructor(){super(),this.buffer=""}push(t){let e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}const c=String.fromCharCode(9),d=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},l=function(t){const e={};if(!t)return e;const i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let s,n=i.length;for(;n--;)""!==i[n]&&(s=/([^=]*)=(.*)/.exec(i[n]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),e[s[0]]=s[1]);return e};class u extends s{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let e,i;if(0===(t=t.trim()).length)return;if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});this.tagMappers.reduce(((e,i)=>{const s=i(t);return s===t?e:e.concat([s])}),[t]).forEach((t=>{for(let e=0;e<this.customParsers.length;e++)if(this.customParsers[e].call(this,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t),e)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(t),e)return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void this.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-VERSION:([0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void this.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:(.*)?$/.exec(t),e)return i=n(d(e[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(t),e)return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-MAP:(.*)$/.exec(t),e){if(i={type:"tag",tagType:"map"},e[1]){const t=l(e[1]);t.URI&&(i.uri=t.URI),t.BYTERANGE&&(i.byterange=d(t.BYTERANGE))}this.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:(.*)$/.exec(t),e){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=l(e[1]),i.attributes.RESOLUTION){const t=i.attributes.RESOLUTION.split("x"),e={};t[0]&&(e.width=parseInt(t[0],10)),t[1]&&(e.height=parseInt(t[1],10)),i.attributes.RESOLUTION=e}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:(.*)$/.exec(t),e)return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=l(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t),e)this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t),e)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(t),e)return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-KEY:(.*)$/.exec(t),e)return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=l(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(e=/^#EXT-X-START:(.*)$/.exec(t),e)return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=l(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-IN:(.*)?$/.exec(t),e)return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-SKIP:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"skip"},i.attributes=l(e[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(c)),void this.trigger("data",i);if(e=/^#EXT-X-PART:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"part"},i.attributes=l(e[1]),["DURATION"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=d(i.attributes.BYTERANGE)),void this.trigger("data",i);if(e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"server-control"},i.attributes=l(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),void this.trigger("data",i);if(e=/^#EXT-X-PART-INF:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"part-inf"},i.attributes=l(e[1]),["PART-TARGET"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),void this.trigger("data",i);if(e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"preload-hint"},i.attributes=l(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(i.attributes.hasOwnProperty(t)){i.attributes[t]=parseInt(i.attributes[t],10);const e="BYTERANGE-LENGTH"===t?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[e]=i.attributes[t],delete i.attributes[t]}})),void this.trigger("data",i);if(e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t),e&&e[1])return i={type:"tag",tagType:"rendition-report"},i.attributes=l(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseInt(i.attributes[t],10))})),void this.trigger("data",i);if(e=/^#EXT-X-DATERANGE:(.*)$/.exec(t),e&&e[1]){i={type:"tag",tagType:"daterange"},i.attributes=l(e[1]),["ID","CLASS"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=String(i.attributes[t]))})),["START-DATE","END-DATE"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=new Date(i.attributes[t]))})),["DURATION","PLANNED-DURATION"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["END-ON-NEXT"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/i.test(i.attributes[t]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=i.attributes[t].toString(16))}));const t=/^X-([A-Z]+-)+[A-Z]+$/;for(const e in i.attributes){if(!t.test(e))continue;const s=/[0-9A-Fa-f]{6}/g.test(i.attributes[e]),n=/^\d+(\.\d+)?$/.test(i.attributes[e]);i.attributes[e]=s?i.attributes[e].toString(16):n?parseFloat(i.attributes[e]):String(i.attributes[e])}this.trigger("data",i)}else if(e=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(t),e)this.trigger("data",{type:"tag",tagType:"independent-segments"});else{if(e=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(t),e)return i={type:"tag",tagType:"content-steering"},i.attributes=l(e[1]),void this.trigger("data",i);this.trigger("data",{type:"tag",data:t.slice(4)})}}}}else this.trigger("data",{type:"comment",text:t.slice(1)})}))}addParser({expression:t,customType:e,dataParser:i,segment:s}){"function"!=typeof i&&(i=t=>t),this.customParsers.push((n=>{if(t.exec(n))return this.trigger("data",{type:"custom",data:i(n),customType:e,segment:s}),!0}))}addTagMapper({expression:t,map:e}){this.tagMappers.push((i=>t.test(i)?e(i):i))}}const p=function(t){const e={};return Object.keys(t).forEach((function(i){var s;e[(s=i,s.toLowerCase().replace(/-(\w)/g,(t=>t[1].toUpperCase())))]=t[i]})),e},f=function(t){const{serverControl:e,targetDuration:i,partTargetDuration:s}=t;if(!e)return;const n="#EXT-X-SERVER-CONTROL",r="holdBack",o="partHoldBack",a=i&&3*i,h=s&&2*s;i&&!e.hasOwnProperty(r)&&(e[r]=a,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${a}).`})),a&&e[r]<a&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${e[r]}) to targetDuration * 3 (${a})`}),e[r]=a),s&&!e.hasOwnProperty(o)&&(e[o]=3*s,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),s&&e[o]<h&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${h}).`}),e[o]=h)};class m extends s{constructor(){super(),this.lineStream=new h,this.parseStream=new u,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const t=this,e=[];let i,s,r={},o=!1;const c=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let l=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let m=0,g=0;const v={};this.on("end",(()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&i&&(r.map=i),!r.key&&s&&(r.key=s),r.timeline||"number"!=typeof l||(r.timeline=l),this.manifest.preloadSegment=r)})),this.parseStream.on("data",(function(h){let u,y;({tag(){({version(){h.version&&(this.manifest.version=h.version)},"allow-cache"(){this.manifest.allowCache=h.allowed,"allowed"in h||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const t={};"length"in h&&(r.byterange=t,t.length=h.length,"offset"in h||(h.offset=m)),"offset"in h&&(r.byterange=t,t.offset=h.offset),m=t.offset+t.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),h.title&&(r.title=h.title),h.duration>0&&(r.duration=h.duration),0===h.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=e},key(){if(h.attributes)if("NONE"!==h.attributes.METHOD)if(h.attributes.URI){if("com.apple.streamingkeydelivery"===h.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:h.attributes});if("com.microsoft.playready"===h.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:h.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===h.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(h.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===h.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==h.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):h.attributes.KEYID&&"0x"===h.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:h.attributes.KEYFORMAT,keyId:h.attributes.KEYID.substring(2)},pssh:a(h.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}h.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:h.attributes.METHOD||"AES-128",uri:h.attributes.URI},void 0!==h.attributes.IV&&(s.iv=h.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(h.number)?this.manifest.mediaSequence=h.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+h.number})},"discontinuity-sequence"(){isFinite(h.number)?(this.manifest.discontinuitySequence=h.number,l=h.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+h.number})},"playlist-type"(){/VOD|EVENT/.test(h.playlistType)?this.manifest.playlistType=h.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+h.playlist})},map(){i={},h.uri&&(i.uri=h.uri),h.byterange&&(i.byterange=h.byterange),s&&(i.key=s)},"stream-inf"(){this.manifest.playlists=e,this.manifest.mediaGroups=this.manifest.mediaGroups||d,h.attributes?(r.attributes||(r.attributes={}),n(r.attributes,h.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,!(h.attributes&&h.attributes.TYPE&&h.attributes["GROUP-ID"]&&h.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const t=this.manifest.mediaGroups[h.attributes.TYPE];t[h.attributes["GROUP-ID"]]=t[h.attributes["GROUP-ID"]]||{},u=t[h.attributes["GROUP-ID"]],y={default:/yes/i.test(h.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(h.attributes.AUTOSELECT),h.attributes.LANGUAGE&&(y.language=h.attributes.LANGUAGE),h.attributes.URI&&(y.uri=h.attributes.URI),h.attributes["INSTREAM-ID"]&&(y.instreamId=h.attributes["INSTREAM-ID"]),h.attributes.CHARACTERISTICS&&(y.characteristics=h.attributes.CHARACTERISTICS),h.attributes.FORCED&&(y.forced=/yes/i.test(h.attributes.FORCED)),u[h.attributes.NAME]=y},discontinuity(){l+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(e.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=h.dateTimeString,this.manifest.dateTimeObject=h.dateTimeObject),r.dateTimeString=h.dateTimeString,r.dateTimeObject=h.dateTimeObject;const{lastProgramDateTime:t}=this;this.lastProgramDateTime=new Date(h.dateTimeString).getTime(),null===t&&this.manifest.segments.reduceRight(((t,e)=>(e.programDateTime=t-1e3*e.duration,e.programDateTime)),this.lastProgramDateTime)},targetduration(){!isFinite(h.duration)||h.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+h.duration}):(this.manifest.targetDuration=h.duration,f.call(this,this.manifest))},start(){h.attributes&&!isNaN(h.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:h.attributes["TIME-OFFSET"],precise:h.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=h.data},"cue-out-cont"(){r.cueOutCont=h.data},"cue-in"(){r.cueIn=h.data},skip(){this.manifest.skip=p(h.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",h.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const t=this.manifest.segments.length,e=p(h.attributes);r.parts=r.parts||[],r.parts.push(e),e.byterange&&(e.byterange.hasOwnProperty("offset")||(e.byterange.offset=g),g=e.byterange.offset+e.byterange.length);const i=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${i} for segment #${t}`,h.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((t,e)=>{t.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${e} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const t=this.manifest.serverControl=p(h.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),f.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const t=this.manifest.segments.length,e=p(h.attributes),i=e.type&&"PART"===e.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(e),e.byterange&&(e.byterange.hasOwnProperty("offset")||(e.byterange.offset=i?g:0,i&&(g=e.byterange.offset+e.byterange.length)));const s=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${s} for segment #${t}`,h.attributes,["TYPE","URI"]),e.type)for(let i=0;i<r.preloadHints.length-1;i++){const n=r.preloadHints[i];n.type&&(n.type===e.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${s} for segment #${t} has the same TYPE ${e.type} as preload hint #${i}`}))}},"rendition-report"(){const t=p(h.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);const e=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];o&&i.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${e}`,h.attributes,i)},"part-inf"(){this.manifest.partInf=p(h.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",h.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),f.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(p(h.attributes));const t=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${t}`,h.attributes,["ID","START-DATE"]);const e=this.manifest.dateRanges[t];e.endDate&&e.startDate&&new Date(e.endDate)<new Date(e.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),e.duration&&e.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),e.plannedDuration&&e.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const i=!!e.endOnNext;if(i&&!e.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),i&&(e.duration||e.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),e.duration&&e.endDate){const i=e.startDate.getTime()+1e3*e.duration;this.manifest.dateRanges[t].endDate=new Date(i)}if(v[e.id]){for(const t in v[e.id])if(e[t]&&JSON.stringify(v[e.id][t])!==JSON.stringify(e[t])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const t=this.manifest.dateRanges.findIndex((t=>t.id===e.id));this.manifest.dateRanges[t]=n(this.manifest.dateRanges[t],e),v[e.id]=n(v[e.id],e),this.manifest.dateRanges.pop()}else v[e.id]=e},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=p(h.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",h.attributes,["SERVER-URI"])}}[h.tagType]||c).call(t)},uri(){r.uri=h.uri,e.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=l,i&&(r.map=i),g=0,null!==this.lastProgramDateTime&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*r.duration),r={}},comment(){},custom(){h.segment?(r.custom=r.custom||{},r.custom[h.customType]=h.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[h.customType]=h.data)}})[h.type].call(t)}))}warnOnMissingAttributes_(t,e,i){const s=[];i.forEach((function(t){e.hasOwnProperty(t)||s.push(t)})),s.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${s.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}},4492:(t,e,i)=>{"use strict";t.exports=i(8836)},3996:(t,e,i)=>{"use strict";var s=e,n=i(7025),r=i(9935);function o(t,e,i,s){var r=!1;if(e.resolvedType)if(e.resolvedType instanceof n){t("switch(d%s){",s);for(var o=e.resolvedType.values,a=Object.keys(o),h=0;h<a.length;++h)o[a[h]]!==e.typeDefault||r||(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',s,s,s),e.repeated||t("break"),r=!0),t("case%j:",a[h])("case %i:",o[a[h]])("m%s=%j",s,o[a[h]])("break");t("}")}else t('if(typeof d%s!=="object")',s)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",s,i,s);else{var c=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",s,s);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",s,s);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",s,s);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",s,s,c)('else if(typeof d%s==="string")',s)("m%s=parseInt(d%s,10)",s,s)('else if(typeof d%s==="number")',s)("m%s=d%s",s,s)('else if(typeof d%s==="object")',s)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",s,s,s,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',s)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",s,s,s)("else if(d%s.length >= 0)",s)("m%s=d%s",s,s);break;case"string":t("m%s=String(d%s)",s,s);break;case"bool":t("m%s=Boolean(d%s)",s,s)}}return t}function a(t,e,i,s){if(e.resolvedType)e.resolvedType instanceof n?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",s,i,s,s,i,s,s):t("d%s=types[%i].toObject(m%s,o)",s,i,s);else{var r=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",s,s,s,s);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',s)("d%s=o.longs===String?String(m%s):m%s",s,s,s)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",s,s,s,s,r?"true":"",s);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",s,s,s,s,s);break;default:t("d%s=m%s",s,s)}}return t}s.fromObject=function(t){var e=t.fieldsArray,i=r.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return i("return new this.ctor");i("var m=new this.ctor");for(var s=0;s<e.length;++s){var a=e[s].resolve(),h=r.safeProp(a.name);a.map?(i("if(d%s){",h)('if(typeof d%s!=="object")',h)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",h)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",h),o(i,a,s,h+"[ks[i]]")("}")("}")):a.repeated?(i("if(d%s){",h)("if(!Array.isArray(d%s))",h)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",h)("for(var i=0;i<d%s.length;++i){",h),o(i,a,s,h+"[i]")("}")("}")):(a.resolvedType instanceof n||i("if(d%s!=null){",h),o(i,a,s,h),a.resolvedType instanceof n||i("}"))}return i("return m")},s.toObject=function(t){var e=t.fieldsArray.slice().sort(r.compareFieldsById);if(!e.length)return r.codegen()("return {}");for(var i=r.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),s=[],o=[],h=[],c=0;c<e.length;++c)e[c].partOf||(e[c].resolve().repeated?s:e[c].map?o:h).push(e[c]);if(s.length){for(i("if(o.arrays||o.defaults){"),c=0;c<s.length;++c)i("d%s=[]",r.safeProp(s[c].name));i("}")}if(o.length){for(i("if(o.objects||o.defaults){"),c=0;c<o.length;++c)i("d%s={}",r.safeProp(o[c].name));i("}")}if(h.length){for(i("if(o.defaults){"),c=0;c<h.length;++c){var d=h[c],l=r.safeProp(d.name);if(d.resolvedType instanceof n)i("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var u="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else i("d%s=%j",l,d.typeDefault)}i("}")}var p=!1;for(c=0;c<e.length;++c){d=e[c];var f=t.it.indexOf(d);l=r.safeProp(d.name);d.map?(p||(p=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),a(i,d,f,l+"[ks2[j]]")("}")):d.repeated?(i("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),a(i,d,f,l+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),a(i,d,f,l),d.partOf&&i("if(o.oneofs)")("d%s=%j",r.safeProp(d.partOf.name),d.name)),i("}")}return i("return d")}},5305:(t,e,i)=>{"use strict";t.exports=function(t){var e=r.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break");e("switch(t>>>3){");for(var i=0;i<t.fieldsArray.length;++i){var a=t.it[i].resolve(),h=a.resolvedType instanceof s?"int32":a.type,c="m"+r.safeProp(a.name);e("case %i: {",a.id),a.map?(e("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[a.keyType]?e("k=%j",n.defaults[a.keyType]):e("k=null"),void 0!==n.defaults[h]?e("value=%j",n.defaults[h]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===n.basic[h]?e("value=types[%i].decode(r,r.uint32())",i):e("value=r.%s()",h),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[a.keyType]?e('%s[typeof k==="object"?util.longToHash(k):k]=value',c):e("%s[k]=value",c)):a.repeated?(e("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==n.packed[h]&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,h)("}else"),void 0===n.basic[h]?e(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,i):e("%s.push(r.%s())",c,h)):void 0===n.basic[h]?e(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,i):e("%s=r.%s()",c,h),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<t.it.length;++i){var d=t.it[i];d.required&&e("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return e("return m")};var s=i(7025),n=i(7063),r=i(9935);function o(t){return"missing required '"+t.name+"'"}},4928:(t,e,i)=>{"use strict";t.exports=function(t){for(var e,i=r.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),a=t.fieldsArray.slice().sort(r.compareFieldsById),h=0;h<a.length;++h){var c=a[h].resolve(),d=t.it.indexOf(c),l=c.resolvedType instanceof s?"int32":c.type,u=n.basic[l];e="m"+r.safeProp(c.name),c.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",e,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|n.mapKey[c.keyType],c.keyType),void 0===u?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,e):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,l,e),i("}")("}")):c.repeated?(i("if(%s!=null&&%s.length){",e,e),c.packed&&void 0!==n.packed[l]?i("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",l,e)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",e),void 0===u?o(i,c,d,e+"[i]"):i("w.uint32(%i).%s(%s[i])",(c.id<<3|u)>>>0,l,e)),i("}")):(c.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",e,c.name),void 0===u?o(i,c,d,e):i("w.uint32(%i).%s(%s)",(c.id<<3|u)>>>0,l,e))}return i("return w")};var s=i(7025),n=i(7063),r=i(9935);function o(t,e,i,s){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,s,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,s,(e.id<<3|2)>>>0)}},7025:(t,e,i)=>{"use strict";t.exports=o;var s=i(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="Enum";var n=i(9313),r=i(9935);function o(t,e,i,n,r,o){if(s.call(this,t,i),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=r||{},this.valuesOptions=o,this.reserved=void 0,e)for(var a=Object.keys(e),h=0;h<a.length;++h)"number"==typeof e[a[h]]&&(this.valuesById[this.values[a[h]]=e[a[h]]]=a[h])}o.fromJSON=function(t,e){var i=new o(t,e.values,e.options,e.comment,e.comments);return i.reserved=e.reserved,i},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},o.prototype.add=function(t,e,i,s){if(!r.isString(t))throw TypeError("name must be a string");if(!r.isInteger(e))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return s&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[t]=s||null),this.comments[t]=i||null,this},o.prototype.remove=function(t){if(!r.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this.valuesOptions&&delete this.valuesOptions[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},3548:(t,e,i)=>{"use strict";t.exports=c;var s=i(3243);((c.prototype=Object.create(s.prototype)).constructor=c).className="Field";var n,r=i(7025),o=i(7063),a=i(9935),h=/^required|optional|repeated$/;function c(t,e,i,n,r,c,d){if(a.isObject(n)?(d=r,c=n,n=r=void 0):a.isObject(r)&&(d=c,c=r,r=void 0),s.call(this,t,c),!a.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!a.isString(i))throw TypeError("type must be a string");if(void 0!==n&&!h.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==r&&!a.isString(r))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=i,this.id=e,this.extend=r||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.st=null,this.comment=d}c.fromJSON=function(t,e){return new c(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this.st&&(this.st=!1!==this.getOption("packed")),this.st}}),c.prototype.setOption=function(t,e,i){return"packed"===t&&(this.st=null),s.prototype.setOption.call(this,t,e,i)},c.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof r&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof r)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),s.prototype.resolve.call(this)},c.d=function(t,e,i,s){return"function"==typeof e?e=a.decorateType(e).name:e&&"object"==typeof e&&(e=a.decorateEnum(e).name),function(n,r){a.decorateType(n.constructor).add(new c(r,t,e,i,{default:s}))}},c.nt=function(t){n=t}},8836:(t,e,i)=>{"use strict";var s=t.exports=i(9482);s.build="light",s.load=function(t,e,i){return"function"==typeof e?(i=e,e=new s.Root):e||(e=new s.Root),e.load(t,i)},s.loadSync=function(t,e){return e||(e=new s.Root),e.loadSync(t)},s.encoder=i(4928),s.decoder=i(5305),s.verifier=i(4497),s.converter=i(3996),s.ReflectionObject=i(3243),s.Namespace=i(9313),s.Root=i(9424),s.Enum=i(7025),s.Type=i(7645),s.Field=i(3548),s.OneOf=i(7598),s.MapField=i(6039),s.Service=i(7513),s.Method=i(4429),s.Message=i(8368),s.wrappers=i(1667),s.types=i(7063),s.util=i(9935),s.ReflectionObject.nt(s.Root),s.Namespace.nt(s.Type,s.Service,s.Enum),s.Root.nt(s.Type),s.Field.nt(s.Type)},9482:(t,e,i)=>{"use strict";var s=e;function n(){s.util.nt(),s.Writer.nt(s.BufferWriter),s.Reader.nt(s.BufferReader)}s.build="minimal",s.Writer=i(1173),s.BufferWriter=i(3155),s.Reader=i(1408),s.BufferReader=i(593),s.util=i(9693),s.rpc=i(5994),s.roots=i(5054),s.configure=n,n()},6039:(t,e,i)=>{"use strict";t.exports=o;var s=i(3548);((o.prototype=Object.create(s.prototype)).constructor=o).className="MapField";var n=i(7063),r=i(9935);function o(t,e,i,n,o,a){if(s.call(this,t,e,n,void 0,void 0,o,a),!r.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,e){return new o(t,e.id,e.keyType,e.type,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return r.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},o.d=function(t,e,i){return"function"==typeof i?i=r.decorateType(i).name:i&&"object"==typeof i&&(i=r.decorateEnum(i).name),function(s,n){r.decorateType(s.constructor).add(new o(n,t,e,i))}}},8368:(t,e,i)=>{"use strict";t.exports=n;var s=i(9693);function n(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)this[e[i]]=t[e[i]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,e){return this.$type.encode(t,e)},n.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,e){return this.$type.toObject(t,e)},n.prototype.toJSON=function(){return this.$type.toObject(this,s.toJSONOptions)}},4429:(t,e,i)=>{"use strict";t.exports=r;var s=i(3243);((r.prototype=Object.create(s.prototype)).constructor=r).className="Method";var n=i(9935);function r(t,e,i,r,o,a,h,c,d){if(n.isObject(o)?(h=o,o=a=void 0):n.isObject(a)&&(h=a,a=void 0),void 0!==e&&!n.isString(e))throw TypeError("type must be a string");if(!n.isString(i))throw TypeError("requestType must be a string");if(!n.isString(r))throw TypeError("responseType must be a string");s.call(this,t,h),this.type=e||"rpc",this.requestType=i,this.requestStream=!!o||void 0,this.responseType=r,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=d}r.fromJSON=function(t,e){return new r(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)},r.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),s.prototype.resolve.call(this))}},9313:(t,e,i)=>{"use strict";t.exports=l;var s=i(3243);((l.prototype=Object.create(s.prototype)).constructor=l).className="Namespace";var n,r,o,a=i(3548),h=i(9935),c=i(7598);function d(t,e){if(t&&t.length){for(var i={},s=0;s<t.length;++s)i[t[s].name]=t[s].toJSON(e);return i}}function l(t,e){s.call(this,t,e),this.nested=void 0,this.rt=null}function u(t){return t.rt=null,t}l.fromJSON=function(t,e){return new l(t,e.options).addJSON(e.nested)},l.arrayToJSON=d,l.isReservedId=function(t,e){if(t)for(var i=0;i<t.length;++i)if("string"!=typeof t[i]&&t[i][0]<=e&&t[i][1]>e)return!0;return!1},l.isReservedName=function(t,e){if(t)for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this.rt||(this.rt=h.toArray(this.nested))}}),l.prototype.toJSON=function(t){return h.toObject(["options",this.options,"nested",d(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var e,i=Object.keys(t),s=0;s<i.length;++s)e=t[i[s]],this.add((void 0!==e.fields?n.fromJSON:void 0!==e.values?o.fromJSON:void 0!==e.methods?r.fromJSON:void 0!==e.id?a.fromJSON:l.fromJSON)(i[s],e));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof a&&void 0!==t.extend||t instanceof n||t instanceof c||t instanceof o||t instanceof r||t instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof l&&t instanceof l)||e instanceof n||e instanceof r)throw Error("duplicate name '"+t.name+"' in "+this);for(var i=e.nestedArray,s=0;s<i.length;++s)t.add(i[s]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),u(this)},l.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),u(this)},l.prototype.define=function(t,e){if(h.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var i=this;t.length>0;){var s=t.shift();if(i.nested&&i.nested[s]){if(!((i=i.nested[s])instanceof l))throw Error("path conflicts with non-namespace objects")}else i.add(i=new l(s))}return e&&i.addJSON(e),i},l.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof l?t[e++].resolveAll():t[e++].resolve();return this.resolve()},l.prototype.lookup=function(t,e,i){if("boolean"==typeof e?(i=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),h.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var s=this.get(t[0]);if(s){if(1===t.length){if(!e||e.indexOf(s.constructor)>-1)return s}else if(s instanceof l&&(s=s.lookup(t.slice(1),e,!0)))return s}else for(var n=0;n<this.nestedArray.length;++n)if(this.rt[n]instanceof l&&(s=this.rt[n].lookup(t,e,!0)))return s;return null===this.parent||i?null:this.parent.lookup(t,e)},l.prototype.lookupType=function(t){var e=this.lookup(t,[n]);if(!e)throw Error("no such type: "+t);return e},l.prototype.lookupEnum=function(t){var e=this.lookup(t,[o]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},l.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[n,o]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e},l.prototype.lookupService=function(t){var e=this.lookup(t,[r]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},l.nt=function(t,e,i){n=t,r=e,o=i}},3243:(t,e,i)=>{"use strict";t.exports=r,r.className="ReflectionObject";var s,n=i(9935);function r(t,e){if(!n.isString(t))throw TypeError("name must be a string");if(e&&!n.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(r.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),r.prototype.toJSON=function(){throw Error()},r.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof s&&e.ot(this)},r.prototype.onRemove=function(t){var e=t.root;e instanceof s&&e.ht(this),this.parent=null,this.resolved=!1},r.prototype.resolve=function(){return this.resolved||this.root instanceof s&&(this.resolved=!0),this},r.prototype.getOption=function(t){if(this.options)return this.options[t]},r.prototype.setOption=function(t,e,i){return i&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this},r.prototype.setParsedOption=function(t,e,i){this.parsedOptions||(this.parsedOptions=[]);var s=this.parsedOptions;if(i){var r=s.find((function(e){return Object.prototype.hasOwnProperty.call(e,t)}));if(r){var o=r[t];n.setProperty(o,i,e)}else(r={})[t]=n.setProperty({},i,e),s.push(r)}else{var a={};a[t]=e,s.push(a)}return this},r.prototype.setOptions=function(t,e){if(t)for(var i=Object.keys(t),s=0;s<i.length;++s)this.setOption(i[s],t[i[s]],e);return this},r.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},r.nt=function(t){s=t}},7598:(t,e,i)=>{"use strict";t.exports=o;var s=i(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="OneOf";var n=i(3548),r=i(9935);function o(t,e,i,n){if(Array.isArray(e)||(i=e,e=void 0),s.call(this,t,i),void 0!==e&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}function a(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}o.fromJSON=function(t,e){return new o(t,e.oneof,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,a(this),this},o.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this},o.prototype.onAdd=function(t){s.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var i=t.get(this.oneof[e]);i&&!i.partOf&&(i.partOf=this,this.fieldsArray.push(i))}a(this)},o.prototype.onRemove=function(t){for(var e,i=0;i<this.fieldsArray.length;++i)(e=this.fieldsArray[i]).parent&&e.parent.remove(e);s.prototype.onRemove.call(this,t)},o.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,i){r.decorateType(e.constructor).add(new o(i,t)),Object.defineProperty(e,i,{get:r.oneOfGetter(t),set:r.oneOfSetter(t)})}}},1408:(t,e,i)=>{"use strict";t.exports=h;var s,n=i(9693),r=n.LongBits,o=n.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function h(t){this.buf=t,this.pos=0,this.len=t.length}var c,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new h(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new h(t);throw Error("illegal buffer")},l=function(){return n.Buffer?function(t){return(h.create=function(t){return n.Buffer.isBuffer(t)?new s(t):d(t)})(t)}:d};function u(){var t=new r(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}h.create=l(),h.prototype.dt=n.Array.prototype.subarray||n.Array.prototype.slice,h.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},h.prototype.bool=function(){return 0!==this.uint32()},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},h.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},h.prototype.bytes=function(){var t=this.uint32(),e=this.pos,i=this.pos+t;if(i>this.len)throw a(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,i);if(e===i){var s=n.Buffer;return s?s.alloc(0):new this.buf.constructor(0)}return this.dt.call(this.buf,e,i)},h.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},h.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},h.nt=function(t){s=t,h.create=l(),s.nt();var e=n.Long?"toLong":"toNumber";n.merge(h.prototype,{int64:function(){return u.call(this)[e](!1)},uint64:function(){return u.call(this)[e](!0)},sint64:function(){return u.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},593:(t,e,i)=>{"use strict";t.exports=r;var s=i(1408);(r.prototype=Object.create(s.prototype)).constructor=r;var n=i(9693);function r(t){s.call(this,t)}r.nt=function(){n.Buffer&&(r.prototype.dt=n.Buffer.prototype.slice)},r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},r.nt()},9424:(t,e,i)=>{"use strict";t.exports=l;var s=i(9313);((l.prototype=Object.create(s.prototype)).constructor=l).className="Root";var n,r,o,a=i(3548),h=i(7025),c=i(7598),d=i(9935);function l(t){s.call(this,"",t),this.deferred=[],this.files=[]}function u(){}l.fromJSON=function(t,e){return e||(e=new l),t.options&&e.setOptions(t.options),e.addJSON(t.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function t(e,i,s){"function"==typeof i&&(s=i,i=void 0);var n=this;if(!s)return d.asPromise(t,n,e,i);var a=s===u;function h(t,e){if(s){var i=s;if(s=null,a)throw t;i(t,e)}}function c(t){var e=t.lastIndexOf("google/protobuf/");if(e>-1){var i=t.substring(e);if(i in o)return i}return null}function l(t,e){try{if(d.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),d.isString(e)){r.filename=t;var s,o=r(e,n,i),l=0;if(o.imports)for(;l<o.imports.length;++l)(s=c(o.imports[l])||n.resolvePath(t,o.imports[l]))&&p(s);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(s=c(o.weakImports[l])||n.resolvePath(t,o.weakImports[l]))&&p(s,!0)}else n.setOptions(e.options).addJSON(e.nested)}catch(t){h(t)}a||f||h(null,n)}function p(t,e){if(t=c(t)||t,!(n.files.indexOf(t)>-1))if(n.files.push(t),t in o)a?l(t,o[t]):(++f,setTimeout((function(){--f,l(t,o[t])})));else if(a){var i;try{i=d.fs.readFileSync(t).toString("utf8")}catch(t){return void(e||h(t))}l(t,i)}else++f,n.fetch(t,(function(i,r){--f,s&&(i?e?f||h(null,n):h(i):l(t,r))}))}var f=0;d.isString(e)&&(e=[e]);for(var m,g=0;g<e.length;++g)(m=n.resolvePath("",e[g]))&&p(m);if(a)return n;f||h(null,n)},l.prototype.loadSync=function(t,e){if(!d.isNode)throw Error("not supported");return this.load(t,e,u)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return s.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(t,e){var i=e.parent.lookup(e.extend);if(i){var s=new a(e.fullName,e.id,e.type,e.rule,void 0,e.options);return i.get(s.name)||(s.declaringField=e,e.extensionField=s,i.add(s)),!0}return!1}l.prototype.ot=function(t){if(t instanceof a)void 0===t.extend||t.extensionField||f(0,t)||this.deferred.push(t);else if(t instanceof h)p.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof c)){if(t instanceof n)for(var e=0;e<this.deferred.length;)f(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var i=0;i<t.nestedArray.length;++i)this.ot(t.rt[i]);p.test(t.name)&&(t.parent[t.name]=t)}},l.prototype.ht=function(t){if(t instanceof a){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1)}}else if(t instanceof h)p.test(t.name)&&delete t.parent[t.name];else if(t instanceof s){for(var i=0;i<t.nestedArray.length;++i)this.ht(t.rt[i]);p.test(t.name)&&delete t.parent[t.name]}},l.nt=function(t,e,i){n=t,r=e,o=i}},5054:t=>{"use strict";t.exports={}},5994:(t,e,i)=>{"use strict";e.Service=i(7948)},7948:(t,e,i)=>{"use strict";t.exports=n;var s=i(9693);function n(t,e,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(i)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,i,n,r,o){if(!r)throw TypeError("request must be specified");var a=this;if(!o)return s.asPromise(t,a,e,i,n,r);if(a.rpcImpl)try{return a.rpcImpl(e,i[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(t,i){if(t)return a.emit("error",t,e),o(t);if(null!==i){if(!(i instanceof n))try{i=n[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(t){return a.emit("error",t,e),o(t)}return a.emit("data",i,e),o(null,i)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:(t,e,i)=>{"use strict";t.exports=a;var s=i(9313);((a.prototype=Object.create(s.prototype)).constructor=a).className="Service";var n=i(4429),r=i(9935),o=i(5994);function a(t,e){s.call(this,t,e),this.methods={},this.lt=null}function h(t){return t.lt=null,t}a.fromJSON=function(t,e){var i=new a(t,e.options);if(e.methods)for(var s=Object.keys(e.methods),r=0;r<s.length;++r)i.add(n.fromJSON(s[r],e.methods[s[r]]));return e.nested&&i.addJSON(e.nested),i.comment=e.comment,i},a.prototype.toJSON=function(t){var e=s.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return r.toObject(["options",e&&e.options||void 0,"methods",s.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this.lt||(this.lt=r.toArray(this.methods))}}),a.prototype.get=function(t){return this.methods[t]||s.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return s.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?(this.methods[t.name]=t,t.parent=this,h(this)):s.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,h(this)}return s.prototype.remove.call(this,t)},a.prototype.create=function(t,e,i){for(var s,n=new o.Service(t,e,i),a=0;a<this.methodsArray.length;++a){var h=r.lcFirst((s=this.lt[a]).resolve().name).replace(/[^$\w_]/g,"");n[h]=r.codegen(["r","c"],r.isReserved(h)?h+"_":h)("return this.rpcCall(m,q,s,r,c)")({m:s,q:s.resolvedRequestType.ctor,s:s.resolvedResponseType.ctor})}return n}},7645:(t,e,i)=>{"use strict";t.exports=y;var s=i(9313);((y.prototype=Object.create(s.prototype)).constructor=y).className="Type";var n=i(7025),r=i(7598),o=i(3548),a=i(6039),h=i(7513),c=i(8368),d=i(1408),l=i(1173),u=i(9935),p=i(4928),f=i(5305),m=i(4497),g=i(3996),v=i(1667);function y(t,e){s.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.ft=null,this.it=null,this.gt=null,this.vt=null}function b(t){return t.ft=t.it=t.gt=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this.ft)return this.ft;this.ft={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var i=this.fields[t[e]],s=i.id;if(this.ft[s])throw Error("duplicate id "+s+" in "+this);this.ft[s]=i}return this.ft}},fieldsArray:{get:function(){return this.it||(this.it=u.toArray(this.fields))}},oneofsArray:{get:function(){return this.gt||(this.gt=u.toArray(this.oneofs))}},ctor:{get:function(){return this.vt||(this.ctor=y.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof c||((t.prototype=new c).constructor=t,u.merge(t.prototype,e)),t.$type=t.prototype.$type=this,u.merge(t,c,!0),this.vt=t;for(var i=0;i<this.fieldsArray.length;++i)this.it[i].resolve();var s={};for(i=0;i<this.oneofsArray.length;++i)s[this.gt[i].resolve().name]={get:u.oneOfGetter(this.gt[i].oneof),set:u.oneOfSetter(this.gt[i].oneof)};i&&Object.defineProperties(t.prototype,s)}}}),y.generateConstructor=function(t){for(var e,i=u.codegen(["p"],t.name),s=0;s<t.fieldsArray.length;++s)(e=t.it[s]).map?i("this%s={}",u.safeProp(e.name)):e.repeated&&i("this%s=[]",u.safeProp(e.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(t,e){var i=new y(t,e.options);i.extensions=e.extensions,i.reserved=e.reserved;for(var c=Object.keys(e.fields),d=0;d<c.length;++d)i.add((void 0!==e.fields[c[d]].keyType?a.fromJSON:o.fromJSON)(c[d],e.fields[c[d]]));if(e.oneofs)for(c=Object.keys(e.oneofs),d=0;d<c.length;++d)i.add(r.fromJSON(c[d],e.oneofs[c[d]]));if(e.nested)for(c=Object.keys(e.nested),d=0;d<c.length;++d){var l=e.nested[c[d]];i.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?y.fromJSON:void 0!==l.values?n.fromJSON:void 0!==l.methods?h.fromJSON:s.fromJSON)(c[d],l))}return e.extensions&&e.extensions.length&&(i.extensions=e.extensions),e.reserved&&e.reserved.length&&(i.reserved=e.reserved),e.group&&(i.group=!0),e.comment&&(i.comment=e.comment),i},y.prototype.toJSON=function(t){var e=s.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return u.toObject(["options",e&&e.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,t),"fields",s.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",i?this.comment:void 0])},y.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var i=this.oneofsArray;for(e=0;e<i.length;)i[e++].resolve();return s.prototype.resolveAll.call(this)},y.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},y.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&void 0===t.extend){if(this.ft?this.ft[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),b(this)}return t instanceof r?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),b(this)):s.prototype.add.call(this,t)},y.prototype.remove=function(t){if(t instanceof o&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),b(this)}if(t instanceof r){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),b(this)}return s.prototype.remove.call(this,t)},y.prototype.isReservedId=function(t){return s.isReservedId(this.reserved,t)},y.prototype.isReservedName=function(t){return s.isReservedName(this.reserved,t)},y.prototype.create=function(t){return new this.ctor(t)},y.prototype.setup=function(){for(var t=this.fullName,e=[],i=0;i<this.fieldsArray.length;++i)e.push(this.it[i].resolve().resolvedType);this.encode=p(this)({Writer:l,types:e,util:u}),this.decode=f(this)({Reader:d,types:e,util:u}),this.verify=m(this)({types:e,util:u}),this.fromObject=g.fromObject(this)({types:e,util:u}),this.toObject=g.toObject(this)({types:e,util:u});var s=v[t];if(s){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=s.fromObject.bind(n),n.toObject=this.toObject,this.toObject=s.toObject.bind(n)}return this},y.prototype.encode=function(t,e){return this.setup().encode(t,e)},y.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},y.prototype.decode=function(t,e){return this.setup().decode(t,e)},y.prototype.decodeDelimited=function(t){return t instanceof d||(t=d.create(t)),this.decode(t,t.uint32())},y.prototype.verify=function(t){return this.setup().verify(t)},y.prototype.fromObject=function(t){return this.setup().fromObject(t)},y.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},y.d=function(t){return function(e){u.decorateType(e,t)}}},7063:(t,e,i)=>{"use strict";var s=e,n=i(9935),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(t,e){var i=0,s={};for(e|=0;i<t.length;)s[r[i+e]]=t[i++];return s}s.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),s.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),s.long=o([0,0,0,1,1],7),s.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),s.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:(t,e,i)=>{"use strict";var s,n,r=t.exports=i(9693),o=i(5054);r.codegen=i(5124),r.fetch=i(9054),r.path=i(8626),r.fs=r.inquire("fs"),r.toArray=function(t){if(t){for(var e=Object.keys(t),i=new Array(e.length),s=0;s<e.length;)i[s]=t[e[s++]];return i}return[]},r.toObject=function(t){for(var e={},i=0;i<t.length;){var s=t[i++],n=t[i++];void 0!==n&&(e[s]=n)}return e};var a=/\\/g,h=/"/g;r.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},r.safeProp=function(t){return!/^[$\w_]+$/.test(t)||r.isReserved(t)?'["'+t.replace(a,"\\\\").replace(h,'\\"')+'"]':"."+t},r.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var c=/_([a-z])/g;r.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(c,(function(t,e){return e.toUpperCase()}))},r.compareFieldsById=function(t,e){return t.id-e.id},r.decorateType=function(t,e){if(t.$type)return e&&t.$type.name!==e&&(r.decorateRoot.remove(t.$type),t.$type.name=e,r.decorateRoot.add(t.$type)),t.$type;s||(s=i(7645));var n=new s(e||t.name);return r.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var d=0;r.decorateEnum=function(t){if(t.$type)return t.$type;n||(n=i(7025));var e=new n("Enum"+d++,t);return r.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e},r.setProperty=function(t,e,i){if("object"!=typeof t)throw TypeError("dst must be an object");if(!e)throw TypeError("path must be specified");return function t(e,i,s){var n=i.shift();if("__proto__"===n||"prototype"===n)return e;if(i.length>0)e[n]=t(e[n]||{},i,s);else{var r=e[n];r&&(s=[].concat(r).concat(s)),e[n]=s}return e}(t,e=e.split("."),i)},Object.defineProperty(r,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(i(9424)))}})},1945:(t,e,i)=>{"use strict";t.exports=n;var s=i(9693);function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var e=t<0;e&&(t=-t);var i=t>>>0,s=(t-i)/4294967296>>>0;return e&&(s=~s>>>0,i=~i>>>0,++i>4294967295&&(i=0,++s>4294967295&&(s=0))),new n(i,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,i=~this.hi>>>0;return e||(i=i+1>>>0),-(e+4294967296*i)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?r:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:i<128?9:10}},9693:function(t,e,i){"use strict";var s=e;function n(t,e,i){for(var s=Object.keys(e),n=0;n<s.length;++n)void 0!==t[s[n]]&&i||(t[s[n]]=e[s[n]]);return t}function r(t){function e(t,i){if(!(this instanceof e))return new e(t,i);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&n(this,i)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}s.asPromise=i(4537),s.base64=i(7419),s.EventEmitter=i(9211),s.float=i(945),s.inquire=i(7199),s.utf8=i(4997),s.pool=i(6662),s.LongBits=i(1945),s.isNode=Boolean(void 0!==i.g&&i.g&&i.g.process&&i.g.process.versions&&i.g.process.versions.node),s.global=s.isNode&&i.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,e){var i=t[e];return!(null==i||!t.hasOwnProperty(e))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.bt=null,s.It=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.It(t):new s.Array(t):s.Buffer?s.bt(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,e){var i=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(i.lo,i.hi,e):i.toNumber(Boolean(e))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var e={},i=0;i<t.length;++i)e[t[i]]=1;return function(){for(var t=Object.keys(this),i=t.length-1;i>-1;--i)if(1===e[t[i]]&&void 0!==this[t[i]]&&null!==this[t[i]])return t[i]}},s.oneOfSetter=function(t){return function(e){for(var i=0;i<t.length;++i)t[i]!==e&&delete this[t[i]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.nt=function(){var t=s.Buffer;t?(s.bt=t.from!==Uint8Array.from&&t.from||function(e,i){return new t(e,i)},s.It=t.allocUnsafe||function(e){return new t(e)}):s.bt=s.It=null}},4497:(t,e,i)=>{"use strict";t.exports=function(t){var e=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i=t.oneofsArray,s={};i.length&&e("var p={}");for(var h=0;h<t.fieldsArray.length;++h){var c=t.it[h].resolve(),d="m"+n.safeProp(c.name);if(c.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",d,c.name),c.map)e("if(!util.isObject(%s))",d)("return%j",r(c,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),a(e,c,"k[i]"),o(e,c,h,d+"[k[i]]")("}");else if(c.repeated)e("if(!Array.isArray(%s))",d)("return%j",r(c,"array"))("for(var i=0;i<%s.length;++i){",d),o(e,c,h,d+"[i]")("}");else{if(c.partOf){var l=n.safeProp(c.partOf.name);1===s[c.partOf.name]&&e("if(p%s===1)",l)("return%j",c.partOf.name+": multiple values"),s[c.partOf.name]=1,e("p%s=1",l)}o(e,c,h,d)}c.optional&&e("}")}return e("return null")};var s=i(7025),n=i(9935);function r(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function o(t,e,i,n){if(e.resolvedType)if(e.resolvedType instanceof s){t("switch(%s){",n)("default:")("return%j",r(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),a=0;a<o.length;++a)t("case %i:",e.resolvedType.values[o[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",i,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",r(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",r(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",r(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",r(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",r(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",r(e,"buffer"))}return t}function a(t,e,i){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",i)("return%j",r(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",i)("return%j",r(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",i)("return%j",r(e,"boolean key"))}return t}},1667:(t,e,i)=>{"use strict";var s=e,n=i(8368);s[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),i=this.lookup(e);if(i){var s="."===t["@type"].charAt(0)?t["@type"].slice(1):t["@type"];return-1===s.indexOf("/")&&(s="/"+s),this.create({type_url:s,value:i.encode(i.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var i="",s="";if(e&&e.json&&t.type_url&&t.value){s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),i=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var r=this.lookup(s);r&&(t=r.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var o=t.$type.toObject(t,e);return""===i&&(i="type.googleapis.com/"),s=i+("."===t.$type.fullName[0]?t.$type.fullName.slice(1):t.$type.fullName),o["@type"]=s,o}return this.toObject(t,e)}}},1173:(t,e,i)=>{"use strict";t.exports=l;var s,n=i(9693),r=n.LongBits,o=n.base64,a=n.utf8;function h(t,e,i){this.fn=t,this.len=e,this.next=void 0,this.val=i}function c(){}function d(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new h(c,0,0),this.tail=this.head,this.states=null}var u=function(){return n.Buffer?function(){return(l.create=function(){return new s})()}:function(){return new l}};function p(t,e,i){e[i]=255&t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,i){for(;t.hi;)e[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[i++]=127&t.lo|128,t.lo=t.lo>>>7;e[i++]=t.lo}function g(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}l.create=u(),l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype.wt=function(t,e,i){return this.tail=this.tail.next=new h(t,e,i),this.len+=e,this},f.prototype=Object.create(h.prototype),f.prototype.fn=function(t,e,i){for(;t>127;)e[i++]=127&t|128,t>>>=7;e[i]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.wt(m,10,r.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var e=r.from(t);return this.wt(m,e.length(),e)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var e=r.from(t).zzEncode();return this.wt(m,e.length(),e)},l.prototype.bool=function(t){return this.wt(p,1,t?1:0)},l.prototype.fixed32=function(t){return this.wt(g,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var e=r.from(t);return this.wt(g,4,e.lo).wt(g,4,e.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this.wt(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.wt(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,e,i){e.set(t,i)}:function(t,e,i){for(var s=0;s<t.length;++s)e[i+s]=t[s]};l.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this.wt(p,1,0);if(n.isString(t)){var i=l.alloc(e=o.length(t));o.decode(t,i,0),t=i}return this.uint32(e).wt(v,e,t)},l.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e).wt(a.write,e,t):this.wt(p,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new h(c,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new h(c,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,e=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=e,this.len+=i),this},l.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,e,i),i+=t.len,t=t.next;return e},l.nt=function(t){s=t,l.create=u(),s.nt()}},3155:(t,e,i)=>{"use strict";t.exports=r;var s=i(1173);(r.prototype=Object.create(s.prototype)).constructor=r;var n=i(9693);function r(){s.call(this)}function o(t,e,i){t.length<40?n.utf8.write(t,e,i):e.utf8Write?e.utf8Write(t,i):e.write(t,i)}r.nt=function(){r.alloc=n.It,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,e,i){e.set(t,i)}:function(t,e,i){if(t.copy)t.copy(e,i,0,t.length);else for(var s=0;s<t.length;)e[i++]=t[s++]}},r.prototype.bytes=function(t){n.isString(t)&&(t=n.bt(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this.wt(r.writeBytesBuffer,e,t),this},r.prototype.string=function(t){var e=n.Buffer.byteLength(t);return this.uint32(e),e&&this.wt(o,e,t),this},r.nt()},8660:(t,e,i)=>{var s;!function(t){!function(e){var s="object"==typeof i.g?i.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=r(t);function r(t,e){return function(i,s){"function"!=typeof t[i]&&Object.defineProperty(t,i,{configurable:!0,writable:!0,value:s}),e&&e(i,s)}}void 0===s.Reflect?s.Reflect=t:n=r(s.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,s=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",n=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,o={__proto__:[]}instanceof Array,a=!r&&!o,h={create:r?function(){return st(Object.create(null))}:o?function(){return st({__proto__:null})}:function(){return st({})},has:a?function(t,i){return e.call(t,i)}:function(t,e){return e in t},get:a?function(t,i){return e.call(t,i)?t[i]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),d="object"==typeof process&&{DEBUG_MODE:!1}&&"true"==={DEBUG_MODE:!1}.REFLECT_METADATA_USE_MAP_POLYFILL,l=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,u=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,p=new(d||"function"!=typeof WeakMap?it():WeakMap);function f(t,e,i,s){if(B(i)){if(!H(t))throw new TypeError;if(!G(e))throw new TypeError;return _(t,e)}if(!H(t))throw new TypeError;if(!F(e))throw new TypeError;if(!F(s)&&!B(s)&&!D(s))throw new TypeError;return D(s)&&(s=void 0),S(t,e,i=q(i),s)}function m(t,e){function i(i,s){if(!F(i))throw new TypeError;if(!B(s)&&!z(s))throw new TypeError;O(t,e,i,s)}return i}function g(t,e,i,s){if(!F(i))throw new TypeError;return B(s)||(s=q(s)),O(t,e,i,s)}function v(t,e,i){if(!F(e))throw new TypeError;return B(i)||(i=q(i)),x(t,e,i)}function y(t,e,i){if(!F(e))throw new TypeError;return B(i)||(i=q(i)),k(t,e,i)}function b(t,e,i){if(!F(e))throw new TypeError;return B(i)||(i=q(i)),E(t,e,i)}function I(t,e,i){if(!F(e))throw new TypeError;return B(i)||(i=q(i)),C(t,e,i)}function w(t,e){if(!F(t))throw new TypeError;return B(e)||(e=q(e)),L(t,e)}function P(t,e){if(!F(t))throw new TypeError;return B(e)||(e=q(e)),M(t,e)}function T(t,e,i){if(!F(e))throw new TypeError;B(i)||(i=q(i));var s=A(e,i,!1);if(B(s))return!1;if(!s.delete(t))return!1;if(s.size>0)return!0;var n=p.get(e);return n.delete(i),n.size>0||p.delete(e),!0}function _(t,e){for(var i=t.length-1;i>=0;--i){var s=(0,t[i])(e);if(!B(s)&&!D(s)){if(!G(s))throw new TypeError;e=s}}return e}function S(t,e,i,s){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e,i,s);if(!B(r)&&!D(r)){if(!F(r))throw new TypeError;s=r}}return s}function A(t,e,i){var s=p.get(t);if(B(s)){if(!i)return;s=new l,p.set(t,s)}var n=s.get(e);if(B(n)){if(!i)return;n=new l,s.set(e,n)}return n}function x(t,e,i){if(k(t,e,i))return!0;var s=Z(e);return!D(s)&&x(t,s,i)}function k(t,e,i){var s=A(e,i,!1);return!B(s)&&j(s.has(t))}function E(t,e,i){if(k(t,e,i))return C(t,e,i);var s=Z(e);return D(s)?void 0:E(t,s,i)}function C(t,e,i){var s=A(e,i,!1);if(!B(s))return s.get(t)}function O(t,e,i,s){A(i,s,!0).set(t,e)}function L(t,e){var i=M(t,e),s=Z(t);if(null===s)return i;var n=L(s,e);if(n.length<=0)return i;if(i.length<=0)return n;for(var r=new u,o=[],a=0,h=i;a<h.length;a++){var c=h[a];r.has(c)||(r.add(c),o.push(c))}for(var d=0,l=n;d<l.length;d++){c=l[d];r.has(c)||(r.add(c),o.push(c))}return o}function M(t,e){var i=[],s=A(t,e,!1);if(B(s))return i;for(var n=Y(s.keys()),r=0;;){var o=Q(n);if(!o)return i.length=r,i;var a=X(o);try{i[r]=a}catch(t){try{K(n)}finally{throw t}}r++}}function R(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function B(t){return void 0===t}function D(t){return null===t}function N(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function $(t,e){switch(R(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var i=3===e?"string":5===e?"number":"default",n=W(t,s);if(void 0!==n){var r=n.call(t,i);if(F(r))throw new TypeError;return r}return V(t,"default"===i?"number":i)}function V(t,e){if("string"===e){var i=t.toString;if(J(i))if(!F(n=i.call(t)))return n;if(J(s=t.valueOf))if(!F(n=s.call(t)))return n}else{var s;if(J(s=t.valueOf))if(!F(n=s.call(t)))return n;var n,r=t.toString;if(J(r))if(!F(n=r.call(t)))return n}throw new TypeError}function j(t){return!!t}function U(t){return""+t}function q(t){var e=$(t,3);return N(e)?e:U(e)}function H(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function J(t){return"function"==typeof t}function G(t){return"function"==typeof t}function z(t){switch(R(t)){case 3:case 4:return!0;default:return!1}}function W(t,e){var i=t[e];if(null!=i){if(!J(i))throw new TypeError;return i}}function Y(t){var e=W(t,n);if(!J(e))throw new TypeError;var i=e.call(t);if(!F(i))throw new TypeError;return i}function X(t){return t.value}function Q(t){var e=t.next();return!e.done&&e}function K(t){var e=t.return;e&&e.call(t)}function Z(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var i=t.prototype,s=i&&Object.getPrototypeOf(i);if(null==s||s===Object.prototype)return e;var n=s.constructor;return"function"!=typeof n||n===t?e:n}function tt(){var t={},e=[],i=function(){function t(t,e,i){this.Pt=0,this._t=t,this.Tt=e,this.St=i}return t.prototype["@@iterator"]=function(){return this},t.prototype[n]=function(){return this},t.prototype.next=function(){var t=this.Pt;if(t>=0&&t<this._t.length){var i=this.St(this._t[t],this.Tt[t]);return t+1>=this._t.length?(this.Pt=-1,this._t=e,this.Tt=e):this.Pt++,{value:i,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this.Pt>=0&&(this.Pt=-1,this._t=e,this.Tt=e),t},t.prototype.return=function(t){return this.Pt>=0&&(this.Pt=-1,this._t=e,this.Tt=e),{value:t,done:!0}},t}();return function(){function e(){this._t=[],this.Tt=[],this.At=t,this.kt=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._t.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this.Et(t,!1)>=0},e.prototype.get=function(t){var e=this.Et(t,!1);return e>=0?this.Tt[e]:void 0},e.prototype.set=function(t,e){var i=this.Et(t,!0);return this.Tt[i]=e,this},e.prototype.delete=function(e){var i=this.Et(e,!1);if(i>=0){for(var s=this._t.length,n=i+1;n<s;n++)this._t[n-1]=this._t[n],this.Tt[n-1]=this.Tt[n];return this._t.length--,this.Tt.length--,e===this.At&&(this.At=t,this.kt=-2),!0}return!1},e.prototype.clear=function(){this._t.length=0,this.Tt.length=0,this.At=t,this.kt=-2},e.prototype.keys=function(){return new i(this._t,this.Tt,s)},e.prototype.values=function(){return new i(this._t,this.Tt,r)},e.prototype.entries=function(){return new i(this._t,this.Tt,o)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[n]=function(){return this.entries()},e.prototype.Et=function(t,e){return this.At!==t&&(this.kt=this._t.indexOf(this.At=t)),this.kt<0&&e&&(this.kt=this._t.length,this._t.push(t),this.Tt.push(void 0)),this.kt},e}();function s(t,e){return t}function r(t,e){return e}function o(t,e){return[t,e]}}function et(){return function(){function t(){this.xt=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this.xt.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this.xt.has(t)},t.prototype.add=function(t){return this.xt.set(t,t),this},t.prototype.delete=function(t){return this.xt.delete(t)},t.prototype.clear=function(){this.xt.clear()},t.prototype.keys=function(){return this.xt.keys()},t.prototype.values=function(){return this.xt.values()},t.prototype.entries=function(){return this.xt.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[n]=function(){return this.keys()},t}()}function it(){var t=16,i=h.create(),s=n();return function(){function t(){this.Ct=n()}return t.prototype.has=function(t){var e=r(t,!1);return void 0!==e&&h.has(e,this.Ct)},t.prototype.get=function(t){var e=r(t,!1);return void 0!==e?h.get(e,this.Ct):void 0},t.prototype.set=function(t,e){return r(t,!0)[this.Ct]=e,this},t.prototype.delete=function(t){var e=r(t,!1);return void 0!==e&&delete e[this.Ct]},t.prototype.clear=function(){this.Ct=n()},t}();function n(){var t;do{t="@@WeakMap@@"+c()}while(h.has(i,t));return i[t]=!0,t}function r(t,i){if(!e.call(t,s)){if(!i)return;Object.defineProperty(t,s,{value:h.create()})}return t[s]}function o(t,e){for(var i=0;i<e;++i)t[i]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t)}function c(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var i="",s=0;s<t;++s){var n=e[s];4!==s&&6!==s&&8!==s||(i+="-"),n<16&&(i+="0"),i+=n.toString(16).toLowerCase()}return i}}function st(t){return t.Ot=void 0,delete t.Ot,t}t("decorate",f),t("metadata",m),t("defineMetadata",g),t("hasMetadata",v),t("hasOwnMetadata",y),t("getMetadata",b),t("getOwnMetadata",I),t("getMetadataKeys",w),t("getOwnMetadataKeys",P),t("deleteMetadata",T)}(n)}()}(s||(s={}))},6515:(t,e,i)=>{"use strict";i.d(e,{X:()=>n});var s=i(655),n=function(t){function e(e){var i=t.call(this)||this;return i.Mt=e,i}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype.Lt=function(e){var i=t.prototype.Lt.call(this,e);return!i.closed&&e.next(this.Mt),i},e.prototype.getValue=function(){var t=this,e=t.hasError,i=t.thrownError,s=t.Mt;if(e)throw i;return this.Bt(),s},e.prototype.next=function(e){t.prototype.next.call(this,this.Mt=e)},e}(i(6716).x)},1480:(t,e,i)=>{"use strict";i.d(e,{y:()=>l});var s=i(5642),n=i(5720),r=i(6766),o=i(278);function a(t){return 0===t.length?o.y:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var h=i(3912),c=i(8474),d=i(8846),l=function(){function t(t){t&&(this.Lt=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var r,o=this,a=(r=t)&&r instanceof s.Lv||function(t){return t&&(0,c.m)(t.next)&&(0,c.m)(t.error)&&(0,c.m)(t.complete)}(r)&&(0,n.Nn)(r)?t:new s.Hp(t,e,i);return(0,d.x)((function(){var t=o,e=t.operator,i=t.source;a.add(e?e.call(a,i):i?o.Lt(a):o.Rt(a))})),a},t.prototype.Rt=function(t){try{return this.Lt(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=u(e))((function(e,n){var r=new s.Hp({next:function(e){try{t(e)}catch(t){n(t),r.unsubscribe()}},error:n,complete:e});i.subscribe(r)}))},t.prototype.Lt=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[r.L]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=u(t))((function(t,i){var s;e.subscribe((function(t){return s=t}),(function(t){return i(t)}),(function(){return t(s)}))}))},t.create=function(e){return new t(e)},t}();function u(t){var e;return null!==(e=null!=t?t:h.v.Promise)&&void 0!==e?e:Promise}},3:(t,e,i)=>{"use strict";i.d(e,{t:()=>o});var s=i(655),n=i(6716),r=i(4318),o=function(t){function e(e,i,s){void 0===e&&(e=1/0),void 0===i&&(i=1/0),void 0===s&&(s=r.l);var n=t.call(this)||this;return n.Dt=e,n.Nt=i,n.jt=s,n.Ut=[],n.$t=!0,n.$t=i===1/0,n.Dt=Math.max(1,e),n.Nt=Math.max(1,i),n}return(0,s.ZT)(e,t),e.prototype.next=function(e){var i=this,s=i.isStopped,n=i.Ut,r=i.$t,o=i.jt,a=i.Nt;s||(n.push(e),!r&&n.push(o.now()+a)),this.Jt(),t.prototype.next.call(this,e)},e.prototype.Lt=function(t){this.Bt(),this.Jt();for(var e=this.Gt(t),i=this.$t,s=this.Ut.slice(),n=0;n<s.length&&!t.closed;n+=i?1:2)t.next(s[n]);return this.Wt(t),e},e.prototype.Jt=function(){var t=this,e=t.Dt,i=t.jt,s=t.Ut,n=t.$t,r=(n?1:2)*e;if(e<1/0&&r<s.length&&s.splice(0,s.length-r),!n){for(var o=i.now(),a=0,h=1;h<s.length&&s[h]<=o;h+=2)a=h;a&&s.splice(0,a+1)}},e}(n.x)},6716:(t,e,i)=>{"use strict";i.d(e,{x:()=>c});var s=i(655),n=i(1480),r=i(5720),o=(0,i(1819).d)((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),a=i(3699),h=i(8846),c=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return(0,s.ZT)(e,t),e.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},e.prototype.Bt=function(){if(this.closed)throw new o},e.prototype.next=function(t){var e=this;(0,h.x)((function(){var i,n;if(e.Bt(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var r=(0,s.XA)(e.currentObservers),o=r.next();!o.done;o=r.next()){o.value.next(t)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}}}))},e.prototype.error=function(t){var e=this;(0,h.x)((function(){if(e.Bt(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var i=e.observers;i.length;)i.shift().error(t)}}))},e.prototype.complete=function(){var t=this;(0,h.x)((function(){if(t.Bt(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype.Rt=function(e){return this.Bt(),t.prototype.Rt.call(this,e)},e.prototype.Lt=function(t){return this.Bt(),this.Wt(t),this.Gt(t)},e.prototype.Gt=function(t){var e=this,i=this,s=i.hasError,n=i.isStopped,o=i.observers;return s||n?r.Lc:(this.currentObservers=null,o.push(t),new r.w0((function(){e.currentObservers=null,(0,a.P)(o,t)})))},e.prototype.Wt=function(t){var e=this,i=e.hasError,s=e.thrownError,n=e.isStopped;i?t.error(s):n&&t.complete()},e.prototype.asObservable=function(){var t=new n.y;return t.source=this,t},e.create=function(t,e){return new d(t,e)},e}(n.y),d=function(t){function e(e,i){var s=t.call(this)||this;return s.destination=e,s.source=i,s}return(0,s.ZT)(e,t),e.prototype.next=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)},e.prototype.error=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype.Lt=function(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:r.Lc},e}(c)},5642:(t,e,i)=>{"use strict";i.d(e,{Hp:()=>v,Lv:()=>p});var s=i(655),n=i(8474),r=i(5720),o=i(3912),a=i(5);function h(){}var c=d("C",void 0,void 0);function d(t,e,i){return{kind:t,value:e,error:i}}var l=i(8380),u=i(8846),p=function(t){function e(e){var i=t.call(this)||this;return i.isStopped=!1,e?(i.destination=e,(0,r.Nn)(e)&&e.add(i)):i.destination=I,i}return(0,s.ZT)(e,t),e.create=function(t,e,i){return new v(t,e,i)},e.prototype.next=function(t){this.isStopped?b(function(t){return d("N",t,void 0)}(t),this):this.Yt(t)},e.prototype.error=function(t){this.isStopped?b(d("E",void 0,t),this):(this.isStopped=!0,this.Xt(t))},e.prototype.complete=function(){this.isStopped?b(c,this):(this.isStopped=!0,this.Qt())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype.Yt=function(t){this.destination.next(t)},e.prototype.Xt=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype.Qt=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(r.w0),f=Function.prototype.bind;function m(t,e){return f.call(t,e)}var g=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){y(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){y(t)}else y(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){y(t)}},t}(),v=function(t){function e(e,i,s){var r,a,h=t.call(this)||this;(0,n.m)(e)||!e?r={next:null!=e?e:void 0,error:null!=i?i:void 0,complete:null!=s?s:void 0}:h&&o.v.useDeprecatedNextContext?((a=Object.create(e)).unsubscribe=function(){return h.unsubscribe()},r={next:e.next&&m(e.next,a),error:e.error&&m(e.error,a),complete:e.complete&&m(e.complete,a)}):r=e;return h.destination=new g(r),h}return(0,s.ZT)(e,t),e}(p);function y(t){o.v.useDeprecatedSynchronousErrorHandling?(0,u.O)(t):(0,a.h)(t)}function b(t,e){var i=o.v.onStoppedNotification;i&&l.z.setTimeout((function(){return i(t,e)}))}var I={closed:!0,next:h,error:function(t){throw t},complete:h}},5720:(t,e,i)=>{"use strict";i.d(e,{Lc:()=>h,w0:()=>a,Nn:()=>c});var s=i(655),n=i(8474),r=(0,i(1819).d)((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}})),o=i(3699),a=function(){function t(t){this.initialTeardown=t,this.closed=!1,this.Kt=null,this.Zt=null}var e;return t.prototype.unsubscribe=function(){var t,e,i,o,a;if(!this.closed){this.closed=!0;var h=this.Kt;if(h)if(this.Kt=null,Array.isArray(h))try{for(var c=(0,s.XA)(h),l=c.next();!l.done;l=c.next()){l.value.remove(this)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}else h.remove(this);var u=this.initialTeardown;if((0,n.m)(u))try{u()}catch(t){a=t instanceof r?t.errors:[t]}var p=this.Zt;if(p){this.Zt=null;try{for(var f=(0,s.XA)(p),m=f.next();!m.done;m=f.next()){var g=m.value;try{d(g)}catch(t){a=null!=a?a:[],t instanceof r?a=(0,s.ev)((0,s.ev)([],(0,s.CR)(a)),(0,s.CR)(t.errors)):a.push(t)}}}catch(t){i={error:t}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}if(a)throw new r(a)}},t.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)d(e);else{if(e instanceof t){if(e.closed||e.te(this))return;e.ie(this)}(this.Zt=null!==(i=this.Zt)&&void 0!==i?i:[]).push(e)}},t.prototype.te=function(t){var e=this.Kt;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype.ie=function(t){var e=this.Kt;this.Kt=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype.ne=function(t){var e=this.Kt;e===t?this.Kt=null:Array.isArray(e)&&(0,o.P)(e,t)},t.prototype.remove=function(e){var i=this.Zt;i&&(0,o.P)(i,e),e instanceof t&&e.ne(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),h=a.EMPTY;function c(t){return t instanceof a||t&&"closed"in t&&(0,n.m)(t.remove)&&(0,n.m)(t.add)&&(0,n.m)(t.unsubscribe)}function d(t){(0,n.m)(t)?t():t.unsubscribe()}},3912:(t,e,i)=>{"use strict";i.d(e,{v:()=>s});var s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1545:(t,e,i)=>{"use strict";i.d(e,{E:()=>s});var s=new(i(1480).y)((function(t){return t.complete()}))},7878:(t,e,i)=>{"use strict";i.d(e,{Xf:()=>m});var s=i(655),n=i(5685),r=i(3841),o=i(1480),a=i(1764),h=i(8430),c=i(8729),d=i(1837),l=i(8671),u=i(8474),p=i(5),f=i(6766);function m(t){if(t instanceof o.y)return t;if(null!=t){if((0,a.c)(t))return y=t,new o.y((function(t){var e=y[f.L]();if((0,u.m)(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,n.z)(t))return v=t,new o.y((function(t){for(var e=0;e<v.length&&!t.closed;e++)t.next(v[e]);t.complete()}));if((0,r.t)(t))return m=t,new o.y((function(t){m.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,p.h)}));if((0,h.D)(t))return g(t);if((0,d.T)(t))return i=t,new o.y((function(t){var e,n;try{for(var r=(0,s.XA)(i),o=r.next();!o.done;o=r.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.complete()}));if((0,l.L)(t))return e=t,g((0,l.Q)(e))}var e,i,m,v,y;throw(0,c.z)(t)}function g(t){return new o.y((function(e){(function(t,e){var i,n,r,o;return(0,s.mG)(this,void 0,void 0,(function(){var a,h;return(0,s.Jh)(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),i=(0,s.KL)(t),c.label=1;case 1:return[4,i.next()];case 2:if((n=c.sent()).done)return[3,4];if(a=n.value,e.next(a),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return h=c.sent(),r={error:h},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(o=i.return)?[4,o.call(i)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}},6196:(t,e,i)=>{"use strict";i.d(e,{H:()=>o});var s=i(1480),n=i(8843),r=i(4865);function o(t,e,i){void 0===t&&(t=0),void 0===i&&(i=n.P);var o=-1;return null!=e&&((0,r.K)(e)?i=e:o=e),new s.y((function(e){var s,n=(s=t)instanceof Date&&!isNaN(s)?+t-i.now():t;n<0&&(n=0);var r=0;return i.schedule((function(){e.closed||(e.next(r++),0<=o?this.schedule(void 0,o):e.complete())}),n)}))}},2566:(t,e,i)=>{"use strict";i.d(e,{x:()=>n});var s=i(655);function n(t,e,i,s,n){return new r(t,e,i,s,n)}var r=function(t){function e(e,i,s,n,r,o){var a=t.call(this,e)||this;return a.onFinalize=r,a.shouldUnsubscribe=o,a.Yt=i?function(t){try{i(t)}catch(t){e.error(t)}}:t.prototype.Yt,a.Xt=n?function(t){try{n(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype.Xt,a.Qt=s?function(){try{s()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype.Qt,a}return(0,s.ZT)(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(i(5642).Lv)},4975:(t,e,i)=>{"use strict";i.d(e,{h:()=>r});var s=i(6798),n=i(2566);function r(t,e){return(0,s.e)((function(i,s){var r=0;i.subscribe((0,n.x)(s,(function(i){return t.call(e,i,r++)&&s.next(i)})))}))}},5196:(t,e,i)=>{"use strict";i.d(e,{P:()=>d});var s=(0,i(1819).d)((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}})),n=i(4975),r=i(4727),o=i(6798),a=i(2566);function h(){return new s}var c=i(278);function d(t,e){var i=arguments.length>=2;return function(d){return d.pipe(t?(0,n.h)((function(e,i){return t(e,i,d)})):c.y,(0,r.q)(1),i?function(t){return(0,o.e)((function(e,i){var s=!1;e.subscribe((0,a.x)(i,(function(t){s=!0,i.next(t)}),(function(){s||i.next(t),i.complete()})))}))}(e):(void 0===(l=function(){return new s})&&(l=h),(0,o.e)((function(t,e){var i=!1;t.subscribe((0,a.x)(e,(function(t){i=!0,e.next(t)}),(function(){return i?e.complete():e.error(l())})))}))));var l}}},9127:(t,e,i)=>{"use strict";i.d(e,{U:()=>r});var s=i(6798),n=i(2566);function r(t,e){return(0,s.e)((function(i,s){var r=0;i.subscribe((0,n.x)(s,(function(i){s.next(t.call(e,i,r++))})))}))}},4978:(t,e,i)=>{"use strict";i.d(e,{w:()=>o});var s=i(7878),n=i(6798),r=i(2566);function o(t,e){return(0,n.e)((function(i,n){var o=null,a=0,h=!1,c=function(){return h&&!o&&n.complete()};i.subscribe((0,r.x)(n,(function(i){null==o||o.unsubscribe();var h=0,d=a++;(0,s.Xf)(t(i,d)).subscribe(o=(0,r.x)(n,(function(t){return n.next(e?e(i,t,d,h++):t)}),(function(){o=null,c()})))}),(function(){h=!0,c()})))}))}},4727:(t,e,i)=>{"use strict";i.d(e,{q:()=>o});var s=i(1545),n=i(6798),r=i(2566);function o(t){return t<=0?function(){return s.E}:(0,n.e)((function(e,i){var s=0;e.subscribe((0,r.x)(i,(function(e){++s<=t&&(i.next(e),t<=s&&i.complete())})))}))}},8843:(t,e,i)=>{"use strict";i.d(e,{P:()=>l,z:()=>d});var s=i(655),n=function(t){function e(e,i){return t.call(this)||this}return(0,s.ZT)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i(5720).w0),r={setInterval:function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o=r.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,(0,s.ev)([t,e],(0,s.CR)(i))):setInterval.apply(void 0,(0,s.ev)([t,e],(0,s.CR)(i)))},clearInterval:function(t){var e=r.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},o=i(3699),a=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.scheduler=e,s.work=i,s.pending=!1,s}return(0,s.ZT)(e,t),e.prototype.schedule=function(t,e){var i;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var s=this.id,n=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(n,s,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),r.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&r.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this.re(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype.re=function(t,e){var i,s=!1;try{this.work(t)}catch(t){s=!0,i=t||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,i=this.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.P)(s,this),null!=e&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(n),h=i(4318),c=function(){function t(e,i){void 0===i&&(i=t.now),this.schedulerActionCtor=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(i,e)},t.now=h.l.now,t}(),d=new(function(t){function e(e,i){void 0===i&&(i=c.now);var s=t.call(this,e,i)||this;return s.actions=[],s.oe=!1,s}return(0,s.ZT)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.oe)e.push(t);else{var i;this.oe=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.oe=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(c))(a),l=d},4318:(t,e,i)=>{"use strict";i.d(e,{l:()=>s});var s={now:function(){return(s.delegate||Date).now()},delegate:void 0}},8380:(t,e,i)=>{"use strict";i.d(e,{z:()=>n});var s=i(655),n={setTimeout:function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=n.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,s.ev)([t,e],(0,s.CR)(i))):setTimeout.apply(void 0,(0,s.ev)([t,e],(0,s.CR)(i)))},clearTimeout:function(t){var e=n.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0}},9768:(t,e,i)=>{"use strict";i.d(e,{h:()=>s});var s="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6766:(t,e,i)=>{"use strict";i.d(e,{L:()=>s});var s="function"==typeof Symbol&&Symbol.observable||"@@observable"},2457:(t,e,i)=>{"use strict";i.d(e,{ae:()=>h,jO:()=>o,yG:()=>a});var s=i(8474),n=i(4865);function r(t){return t[t.length-1]}function o(t){return(0,s.m)(r(t))?t.pop():void 0}function a(t){return(0,n.K)(r(t))?t.pop():void 0}function h(t,e){return"number"==typeof r(t)?t.pop():e}},3699:(t,e,i)=>{"use strict";function s(t,e){if(t){var i=t.indexOf(e);0<=i&&t.splice(i,1)}}i.d(e,{P:()=>s})},1819:(t,e,i)=>{"use strict";function s(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}i.d(e,{d:()=>s})},8846:(t,e,i)=>{"use strict";i.d(e,{O:()=>o,x:()=>r});var s=i(3912),n=null;function r(t){if(s.v.useDeprecatedSynchronousErrorHandling){var e=!n;if(e&&(n={errorThrown:!1,error:null}),t(),e){var i=n,r=i.errorThrown,o=i.error;if(n=null,r)throw o}}else t()}function o(t){s.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=t)}},7845:(t,e,i)=>{"use strict";function s(t,e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=!1);var r=e.schedule((function(){i(),n?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(r),!n)return r}i.d(e,{f:()=>s})},278:(t,e,i)=>{"use strict";function s(t){return t}i.d(e,{y:()=>s})},5685:(t,e,i)=>{"use strict";i.d(e,{z:()=>s});var s=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},8430:(t,e,i)=>{"use strict";i.d(e,{D:()=>n});var s=i(8474);function n(t){return Symbol.asyncIterator&&(0,s.m)(null==t?void 0:t[Symbol.asyncIterator])}},8474:(t,e,i)=>{"use strict";function s(t){return"function"==typeof t}i.d(e,{m:()=>s})},1764:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var s=i(6766),n=i(8474);function r(t){return(0,n.m)(t[s.L])}},1837:(t,e,i)=>{"use strict";i.d(e,{T:()=>r});var s=i(9768),n=i(8474);function r(t){return(0,n.m)(null==t?void 0:t[s.h])}},3841:(t,e,i)=>{"use strict";i.d(e,{t:()=>n});var s=i(8474);function n(t){return(0,s.m)(null==t?void 0:t.then)}},8671:(t,e,i)=>{"use strict";i.d(e,{L:()=>o,Q:()=>r});var s=i(655),n=i(8474);function r(t){return(0,s.FC)(this,arguments,(function(){var e,i,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:e=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,(0,s.qq)(e.read())];case 3:return i=r.sent(),n=i.value,i.done?[4,(0,s.qq)(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,(0,s.qq)(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function o(t){return(0,n.m)(null==t?void 0:t.getReader)}},4865:(t,e,i)=>{"use strict";i.d(e,{K:()=>n});var s=i(8474);function n(t){return t&&(0,s.m)(t.schedule)}},6798:(t,e,i)=>{"use strict";i.d(e,{e:()=>n});var s=i(8474);function n(t){return function(e){if(function(t){return(0,s.m)(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}},5:(t,e,i)=>{"use strict";i.d(e,{h:()=>r});var s=i(3912),n=i(8380);function r(t){n.z.setTimeout((function(){var e=s.v.onUnhandledError;if(!e)throw t;e(t)}))}},8729:(t,e,i)=>{"use strict";function s(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}i.d(e,{z:()=>s})},5139:(t,e,i)=>{"use strict";var s,n;i.d(e,{O:()=>s,c:()=>n}),function(t){t.PARALLEL_CALLS_DEFAULT=5,t.PARALLEL_WINS_DEFAULT=10,t.MAX_WINS_DEFAULT=-1,t.DEFAULT_DESIRED_BITRATE=1,t.REMOVE_BIDS_DEFAULT=!1,t.MID_SESSION_PREFETCH_MINIMUM_TIME=1e4,t.NON_LINEAR_MAX_HEIGHT_PERCENT=20,t.NON_LINEAR_MAX_WIDTH_PERCENT=80,t.DEFAULT_MAX_AD_DURATION=180,t.DEFAULT_MAX_AD_DURATION_PER_VIDEO=240,t.MIN_AD_DURATION=5,t.DEFAULT_CLIENT_SIDE_PACING=6,t.DEFAULT_AGGREGATOR_PACING=10}(s||(s={})),function(t){t.BANNED_IMA_ADS_ID=["9026814","9053547"],t.KEYWORDS_FOR_BANNED_VAST=["octob.azureedge.net/oc.js","lzi.azureedge.net/lz.js","tinlc.azureedge.net/pt.js","bm-rb.azureedge.net/rb.js","foluo.azureedge.net/fo.js","vpv-ger.azureedge.net/VpaidVideoAd1.js"],t.BANNED_DOMAINS=["fakeurl.com"]}(n||(n={}))},6210:(t,e,i)=>{"use strict";i.d(e,{tt:()=>n,h:()=>s});const s="nonLinearCloseClick",n=["ddb2f21f-97a6-4efe-b8d3-29187a109f26","6faf989f-40de-4754-ac8e-359574e4b357","a28964ae-afa3-45d3-9f00-fa228cf89d74","5ee7c0e2-db41-417d-a2f2-4d91037b85bd","885d6a6e-3989-4b92-b39d-f27bf95585f6","fb24d42c-879a-4d98-8bc6-037f99e971ed","17db3dde-36f2-4c05-9e37-0c6d6cd2d2b8","3ebdd57e-b5b8-4fd8-8887-6ae94a978a12","4b724681-b6ed-4206-af76-91558dd7ae97","6aef9fe6-a3f3-48a0-ae28-b068a96f45e1","90857b8e-560f-42c0-b0d1-5c4527da610c","14f5a754-5e79-42ff-a5a3-0cbe2300f428","8b29f95e-7663-4825-97c5-85e4b427df2a","3de724ff-efea-4f24-b1a4-5520a0530ee1","fe9242a7-7f5a-40f0-84ad-0d1cb921dbbe","b51de0ac-a3f1-4618-89dc-89111ff5ec62","11d8c7dd-ba90-4bae-9148-e32a7b2fecef","a35dcb98-5f9a-472e-98bf-8fe48d66c86d","5863ca7a-9fea-40e4-a207-0f1e82d07ed7","c8916590-a8b2-4c1c-9616-e251f70bb88b","0ab96a0d-2794-4727-81e7-ca9b1935de68","1bc398f8-c04c-4d33-89c8-af4932b4365c","de0d3790-6d2f-4de3-a99f-c57e4ff48315","fa930c65-1cfa-492a-b774-c32f657d05c3","be8b2598-a065-4d14-8865-4e077b92c65c","98abb9bd-c4dd-413a-bfaf-f79615250a5a","9a4005b0-473d-40be-81d0-ff5d4739b27c","41524015-c77a-4aad-88c8-327e8a55118d","07b3f552-8cd1-4af6-845c-bbc9956d1565","8cd4291c-d6fb-407f-adee-22547cf3d545","66ef0899-eaf6-4bd7-8993-e4d17d730dad","e8ee883f-4058-454c-b198-ebe07884fd42","08d77337-01a3-6602-77df-0366fd684428","dea7fe60-f902-42d0-9aca-9732e064e44e","442ef13a-dec7-4c67-858e-8ae8112c2818","e25ff406-83a4-480f-9632-d687a8f060b9","24a0faa2-a178-41f9-a37b-22c8f01cb26b","75b73df5-e303-47f8-8383-4093b1aef937","0acc1292-75a0-4578-8110-a5de236c4676","ca99043c-edc0-4451-adf3-a6803de76c8e","79669999-34e8-4b9e-aa03-320a318ebf31","a475e8a0-9824-4027-b35f-3d039902afe5","cd68b41e-cee7-4d57-89ef-fcf1b862274e","3c80aa77-c355-4523-8731-0e9092a73bf3"]},9069:(t,e,i)=>{"use strict";var s,n,r,o,a,h;i.d(e,{Y4:()=>s,wy:()=>n,ZJ:()=>r,RG:()=>o,zc:()=>a,fI:()=>h}),function(t){t.AdPlayingInView="AdPlayingInView",t.AdPlayerOutOfView="AdPlayerOutOfView",t.AdPlayerInView="AdPlayerInView"}(s||(s={})),function(t){t[t.IDLE=0]="IDLE",t[t.LOADING=1]="LOADING",t[t.CONSUMED_LOADING=2]="CONSUMED_LOADING",t[t.LOADED=3]="LOADED",t[t.STARTING=4]="STARTING",t[t.IMPRESSION=5]="IMPRESSION",t[t.CONSUMED_LOADED=6]="CONSUMED_LOADED",t[t.INVALIDATED=7]="INVALIDATED"}(n||(n={})),function(t){t.Html="text/html",t.Javascript="application/javascript"}(r||(r={})),function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.ImaLoadInitError="imaLoadInitError",t.ImaCreateWrapperError="imaCreateWrapperError",t.ImaInitWrapperError="imaInitWrapperError",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.VastNonLinearImageLoadFailure="nonLinearVastImageLoadFailure",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError",t.NonLinearZeroDimensions="nonLinearzeroDimensions",t.NonLinearImageToLarge="nonLinearImageToLarge",t.NonLinearUnsupportedMedia="nonLinearUnsupportedMedia",t.ExternalSdkError="ExternalSdkError"}(o||(o={})),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(a||(a={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClick="AdClick",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(h||(h={}))},6841:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ElementsAdHandler:()=>s.P9,OutstreamAdHandler:()=>s.LO,PlayspaceAdHandler:()=>s.a});var s=i(9021)},4336:(t,e,i)=>{"use strict";i.d(e,{oW:()=>p,qW:()=>m,pe:()=>et,Hp:()=>rt,fs:()=>$,EM:()=>ct,f1:()=>ut,oO:()=>Ht,Kz:()=>Tt,pr:()=>xt,SI:()=>qt});var s=i(289),n=i(5139);class r{constructor(){this.requestNumber=0}}var o=i(5919),a=i(1006),h=i(4782),c=i(2641),d=i(5650),l=i(5715),u=i(4798);class p{constructor(t,e,i){this.he=t,this.ce=e,this.de=i,this.yoScore=0,this.historicalMetrics=new r,this.bidsInFetch=new Set,this.aggregators=new Set,this.hasAggregator=this.le(t.creativeType),this.ue=this.fe(),this.resetPrice()}get timeBetweenRequests(){if(!this.hasAggregator)return n.O.DEFAULT_CLIENT_SIDE_PACING;if(this.he.creativeType===s.ProtoCreativeTypeEnum.Rtb){const t=this.de.getThrottledLineItemPacing(this.he.advertiserLineItemId);return(0,u.hj)(t)?t:this.he.timeBetweenRequests||n.O.DEFAULT_AGGREGATOR_PACING}return n.O.DEFAULT_AGGREGATOR_PACING}get protoLineItem(){return this.he}get adxFloorPrice(){return this.me}get adxFloorPrices(){return this.ue}get timeBetweenRequestsIdentifier(){return(0,u.$K)(this.me)?this.me.id:this.he.advertiserLineItemId}updateMetadata(t){const e=(0,c.pi)(t,this.he);this.he=(0,l.R)(this.he,e)}updatePriceStatus(t,e){const i=this.getAdxFloorPriceObjectsByPrice(t);(0,d.BZ)(i)&&(i.forEach((t=>{t.priceOutcome=e})),this.resetPrice())}resetAllAdxPricesStatus(){this.ue&&this.ue.forEach((t=>{t.priceOutcome=h.f.Unused}))}resetPrice(){this.yoScore=this.ve()}getAdxFloorPriceObjectsByPrice(t){var e;return(null===(e=this.ue)||void 0===e?void 0:e.filter((e=>e.price===t)))||[]}le(t){return(0,u.$K)(o.T[t])}ye(){const{floorPrice:t,customCpm:e}=this.he;if((0,u.r)(t))return t;if((0,u.r)(e))return e;if((0,u.$K)(this.ue)){const t=(0,a.n)(this.ue);if(t)return this.me=this.ue[t.index],t.price}return 0}ve(){const t=this.ye(),{advertiserLineItemId:e,grossNetPercentageDifference:i,lineItemPriority:s}=this.he;return this.ce.calculateLineItemYoScore(e,{cpm:t,priority:s,grossNetPercentageDifference:i},this.hasAggregator)}fe(){if(this.protoLineItem.adxFloorPricePredictionList&&(0,d.BZ)(this.protoLineItem.adxFloorPricePredictionList)&&!this.protoLineItem.isAdxLookup)return this.protoLineItem.adxFloorPricePredictionList.slice(-9).map(((t,e)=>({price:(0,c.RC)(t.floorPriceObfuscated),priceOutcome:h.f.Unused,adxData:t,id:`${this.protoLineItem.advertiserLineItemId}${t.floorPriceObfuscated}`,index:e}))).sort(((t,e)=>e.price-t.price))}}var f=i(9791);class m{get id(){return this.be}get timestamp(){return this.Ie}set timestamp(t){this.Ie=t}constructor(){this.be=(0,f.qs)()}}var g=i(9069),v=i(6716);class y{constructor(){this.Pe=new v.x}get onVpaidEvent(){return this.Pe.asObservable()}handshakeVersion(t="2.0"){return"2.0"}}var b;!function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(b||(b={}));class I{constructor(t){this._e=t,this.Te=new Map,(0,u.$K)(this._e.settings.bidLifecycle)||(this._e.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this.Te.set(t,Date.now()),t){case b.AdLoaded:this.Se();break;case b.AdImpression:this.ke()}}Se(){this._e.settings.bidLifecycle.winToAdLoadedTime=this.Ee}ke(){this._e.settings.bidLifecycle.startAdToImpressionTime=this.xe}get xe(){return this.Te.get(b.AdImpression)&&this.Te.get(b.AdStarted)?this.Te.get(b.AdImpression)-this.Te.get(b.AdStarted):0}get Ee(){return this.Te.get(b.AdLoaded)&&this.Te.get(b.Win)?this.Te.get(b.AdLoaded)-this.Te.get(b.Win):0}}var w=i(1599),P=i(9022),T=i(9223),_=i(1828),S=i(3020);const A=`\n            <div class=${w.p0.CloseButton} role='button' aria-label='Close ad' tabindex='0'>\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73 18"><path d="M32.266 8.293c-.105.902-.439 1.6-1.002 2.092s-1.303.732-2.233.732c-1.008 0-1.816-.361-2.426-1.084s-.908-1.689-.908-2.9v-.82c0-.793.141-1.49.422-2.092s.688-1.062 1.207-1.383 1.121-.486 1.805-.486c.906 0 1.633.254 2.18.762s.865 1.203.955 2.098h-1.131c-.098-.68-.311-1.172-.639-1.477s-.779-.457-1.365-.457c-.719 0-1.283.266-1.693.797s-.609 1.287-.609 2.268v.826c0 .926.193 1.662.58 2.209s.928.82 1.623.82c.625 0 1.104-.141 1.436-.422s.559-.779.668-1.482h1.131zM34.815 11h-1.084V2h1.084v9zm1.453-3.229c0-.621.121-1.18.363-1.676s.586-.879 1.02-1.148a2.79 2.79 0 0 1 1.494-.404c.863 0 1.561.299 2.092.897s.803 1.393.803 2.385V7.9c0 .617-.119 1.172-.357 1.664a2.67 2.67 0 0 1-1.014 1.143c-.437.273-.941.41-1.512.41-.859 0-1.557-.299-2.092-.896s-.797-1.389-.797-2.373v-.076zm1.09.129c0 .703.162 1.268.486 1.693a1.57 1.57 0 0 0 1.312.639c.551 0 .988-.215 1.313-.645s.486-1.039.486-1.816c0-.695-.166-1.258-.498-1.687a1.56 1.56 0 0 0-1.312-.65c-.535 0-.967.213-1.295.639s-.492 1.035-.492 1.828zm9.732 1.418c0-.293-.111-.52-.334-.68s-.604-.305-1.154-.422-.982-.258-1.307-.422-.559-.359-.715-.586-.229-.496-.229-.809c0-.52.219-.959.656-1.318s1.004-.539 1.688-.539c.719 0 1.301.186 1.746.557s.674.846.674 1.424h-1.09c0-.297-.127-.553-.381-.768s-.566-.322-.949-.322c-.395 0-.703.086-.926.258a.81.81 0 0 0-.334.674c0 .262.104.459.311.592s.58.26 1.119.381.983.266 1.318.434.584.371.744.609a1.5 1.5 0 0 1 .246.861 1.63 1.63 0 0 1-.68 1.365c-.453.34-1.041.51-1.764.51-.508 0-.957-.09-1.348-.27s-.697-.43-.92-.75a1.84 1.84 0 0 1-.328-1.049h1.084c.02.363.164.652.433.867s.633.316 1.078.316c.41 0 .738-.082.984-.246a.77.77 0 0 0 .375-.668zm5.127 1.799c-.859 0-1.559-.281-2.098-.844s-.809-1.322-.809-2.267v-.199c0-.629.119-1.189.358-1.682s.578-.883 1.008-1.16a2.56 2.56 0 0 1 1.406-.422c.824 0 1.465.271 1.922.814s.686 1.32.686 2.332v.451h-4.295c.016.625.197 1.131.545 1.518s.797.574 1.336.574c.383 0 .707-.078.973-.234a2.44 2.44 0 0 0 .697-.621l.662.516c-.531.816-1.328 1.225-2.391 1.225zm-.135-5.684a1.44 1.44 0 0 0-1.102.481c-.297.316-.48.762-.551 1.336h3.176v-.082c-.031-.551-.18-.977-.445-1.277s-.625-.457-1.078-.457zM62.84 11c-.062-.125-.113-.348-.152-.668-.504.523-1.105.785-1.805.785-.625 0-1.139-.176-1.541-.527a1.71 1.71 0 0 1-.598-1.348c0-.66.25-1.172.75-1.535s1.211-.551 2.121-.551h1.055v-.498c0-.379-.113-.68-.34-.902s-.561-.34-1.002-.34c-.387 0-.711.098-.973.293s-.393.432-.393.709h-1.09c0-.316.111-.621.334-.914s.531-.531.914-.703.811-.258 1.272-.258c.73 0 1.303.184 1.717.551s.629.865.645 1.506v2.918c0 .582.074 1.045.223 1.389V11H62.84zm-1.799-.826c.34 0 .662-.088.967-.264s.525-.404.662-.686v-1.3h-.85c-1.328 0-1.992.389-1.992 1.166 0 .34.113.605.34.797s.517.287.873.287zm4.148-2.396c0-.973.23-1.754.691-2.344a2.18 2.18 0 0 1 1.811-.891c.742 0 1.33.254 1.764.762V2h1.084v9h-.996l-.053-.68c-.434.531-1.037.797-1.811.797a2.17 2.17 0 0 1-1.799-.902c-.461-.601-.691-1.387-.691-2.355v-.082zm1.084.123c0 .719.148 1.281.445 1.687s.707.609 1.23.609c.688 0 1.189-.309 1.506-.926V6.359a1.59 1.59 0 0 0-1.494-.896c-.531 0-.945.205-1.242.615s-.445 1.018-.445 1.822zM16 1.41L14.59 0 9 5.59 3.41 0 2 1.41 7.59 7 2 12.59 3.41 14 9 8.41 14.59 14 16 12.59 10.41 7 16 1.41z"/></svg>\n            </div>`.trim();class x{constructor(t,e,i,s,n,r,o,a){this.Ce=t,this.Oe=e,this.Me=i,this.Le=s,this.Re=n,this.De=r,this.Ne=o,this.Fe=a,this.je="div-cnx-display",this.Ue=new v.x,this.$e=new v.x,this.He=new v.x,this.Je=new v.x,this.Ge=new v.x,this.ze=t=>{this.$e.next()},this.We=t=>{this.Je.next()},this.Ye=()=>{(0,S.dA)(this.Xe)?this.Ge.next():this.Je.next()}}get onDisplayAd(){return this.Ue.asObservable()}get onError(){return this.He.asObservable()}get onClickClose(){return this.$e.asObservable()}get onClickAd(){return this.Je.asObservable()}get onClickThruAd(){return this.Ge.asObservable()}createBanner(t){this.Qe=new _.o(this.Re,this.De),this.Ke=t?this.Ze(this.Le,t):this.Le;let e="";this.Me===g.ZJ.Html&&(e=this.Oe);let i="",n="";switch(this.Ce){case s.ProtoAdType.Overlay:i=`#${this.je}{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}`,n=`#${this.je}{border:3px solid white}`;break;case s.ProtoAdType.Nonlinear:i=`#${this.je}{width: 100%; height: 100%}`}const r="<style>html, body {position:relative;width:100%;height:100%}"+i+n+"#"+this.je+" iframe{display:block}</style>";this.Qe.loadIframe({customHead:r,customHtml:'<div id="'+this.je+'">'+e+"</div>",container:this.Ke,customReportingLog:{heavyAdBlockTypeEnum:s.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.Ne},iframePosition:this.Ce===s.ProtoAdType.Nonlinear?T.ei.relative:T.ei.absolute,iframeCustomDimensions:this.Fe?this.Fe:void 0,iframePointerEvents:T.PE.all,title:P.$b}).then((t=>{this.ii=t.iframe;const e=this.ii.contentWindow;if(this.si=e.document.getElementById(this.je),this.Me===g.ZJ.Javascript&&(0,S.ML)(this.si,e,this.Oe),""===this.ii.contentWindow.document.head.innerHTML){const t=r;this.ni(t)}this.Ce===s.ProtoAdType.Nonlinear&&this.oi(),this.Ce===s.ProtoAdType.Overlay&&this.ai(),this.Ue.next()})).catch((t=>{this.He.next()}))}getAdMediaDimensions(){return{width:this.si.clientWidth||this.ii.contentWindow.document.body.clientWidth,height:this.si.clientHeight||this.ii.contentWindow.document.body.clientHeight}}destroy(){var t,e;null===(t=this.si)||void 0===t||t.removeEventListener("click",this.We),this.ci&&(this.ci.removeEventListener("click",this.ze),this.Ke.removeChild(this.ci)),this.ii&&this.Le&&(0,S.bX)(this.ii),this.Qe&&(this.Qe.destroy(),this.Qe=null),this.Ce===s.ProtoAdType.Overlay&&(null===(e=this.Xe)||void 0===e||e.removeEventListener("click",this.Ye))}oi(){var t;this.ci=this.Re.createElementByString(A),this.Ke.appendChild(this.ci),this.ci.addEventListener("click",this.ze),null===(t=this.si)||void 0===t||t.addEventListener("click",this.We)}ai(){this.Xe=(0,S.sc)(this.si),this.Xe.addEventListener("click",this.Ye,!0)}ni(t){const e=this.ii.contentWindow.document.createElement("style"),i=this.ii.contentWindow.document.createTextNode(t);e.appendChild(i),this.ii.contentWindow.document.head.appendChild(e)}Ze(t,e){if(!e.width||!e.height)return t;let i,n;if(this.Ce===s.ProtoAdType.Nonlinear)i=n="100%";else i=e.width+"px",n=e.height+"px";const r=this.Re.createElementByString(`<div class="cnx-iframe-container" style="width: ${i}; height: ${n}"></div>`);return t.appendChild(r),r}}var k,E=i(7689),C=i(8872),O=(i(7129),i(4261)),L=i(9600);!function(t){t.IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT"}(k||(k={}));const M=[g.fI.AdImpression,g.fI.AdSkipped,g.fI.AdStopped,g.fI.AdError,g.fI.AdVideoFirstQuartile,g.fI.AdVideoMidpoint,g.fI.AdVideoThirdQuartile,g.fI.AdVideoComplete],R="cnx-ad-bid-slot-selected",B="Connatix Ad";class D extends y{constructor(t,e){super(),this.di=t,this.settings=e,this.bidStatusHistory=[],this.ui=!1,this.Le=null,this.mi=null,this.gi=null,this.vi=null,this.yi=void 0,this.bi=!1,this.Ii=!1,this.wi=!1,this.Pi=!1,this._i=!1,this.Si=!1,this.Ai=!1,this.ki=[],this.Ei=null,this.xi=new v.x,this.Ci=new v.x,this.Oi=new v.x,this.Mi=[],this.Li=!1,this.Bi=()=>{this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.Timeout,errorCode:C.Oq.ImpressionTimeout}}),this.ki.length&&(0,O.nF)({message:"BidAdaptor_ImpressionTimeout",exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:JSON.stringify(this.ki),level:O.D_.WARN,sessionId:this.settings.sessionId}),this.Di()},this.Ni=()=>{this.Fi(),this.Vi(k.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.Le,this.ji)},this.ji=t=>{const e=this.Vi(k.VIEWABLE_IMPRESSION_TIMEOUT);this.Oi.next(t),t?e.timeoutHandle.timeoutId||e.setTimeout():e.clearTimeout()},this.Ui=()=>{this.Ri({type:g.fI.AdSkipped}),this.Di()},this.$i=()=>{this.Ri({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!0}}),this.Di()},this.qi=()=>{const t=C.Oq.MediaFileUriTimeout;this.Hi=t,this.Ri({type:g.fI.AdError,payload:{errorCode:t,errorMessage:g.RG.TimeoutLoaded}}),this.Di()},this.Vi=t=>{const e=this.Gi[t];return{timeoutHandle:e,setTimeout:()=>{e.timeoutId=this.di.setTimeout((()=>{e.callback()}),e.timeout)},clearTimeout:()=>{null!==e.timeoutId&&(this.di.clearTimeout(e.timeoutId),e.timeoutId=null)}}},this.status=g.wy.IDLE,this.price=this.settings.price,this.yoScore=this.settings.yoScore,this.zi=Date.now(),this.creativeId=this.settings.externalCreativeId,this.Wi=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.Yi=`cnx-ad-slot-${this.settings.bidId}`;const{adType:i}=this.settings.adManagerLineItem.protoLineItem;this.Gi={[k.IMPRESSION_TIMEOUT]:{callback:this.Bi,timeout:25e3,timeoutId:null},[k.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.Ni,timeout:P.xs[i],timeoutId:null},[k.SKIP_AD_TIMEOUT]:{callback:this.Ui,timeout:500,timeoutId:null},[k.STOP_AD_TIMEOUT]:{callback:this.$i,timeout:500,timeoutId:null},[k.AD_LOADED_TIMEOUT]:{callback:this.qi,timeout:25e3,timeoutId:null}},this.Xi=e.urlSuffixerService}set status(t){this.Qi=t,this.bidStatusHistory.push(g.wy[t]),this.xi.next(t),t===g.wy.INVALIDATED&&this.Ki()}get status(){return this.Qi}get onStatusChanged(){return this.xi.asObservable()}get createdTimestamp(){return this.zi}get loadingTimeMs(){return this.Zi}get startingTimeMs(){return this.ts}get started(){return this.wi}get errorReason(){return this.es}get vastErrorCode(){return this.Hi}get shouldTrackPostbid(){return this.Li}get onAdSlotViewabilityChanged(){return this.Oi.asObservable()}get wasAdReplaced(){return this.ui}invalidate(){this.wi||(this.status=g.wy.INVALIDATED)}skipAd(){this.Vi(k.SKIP_AD_TIMEOUT).setTimeout()}stopAd(t){this.Vi(k.STOP_AD_TIMEOUT).setTimeout()}startAd(){const{adManagerLineItem:t,bidId:e,requestMetadata:i}=this.settings;this.ss=Date.now(),this.wi=!0,this.status=g.wy.STARTING,this.Si&&(0,O.nF)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.Yi}`,level:O.D_.CRITICAL,sessionId:this.settings.sessionId}),this.Si=!0,this.Vi(k.IMPRESSION_TIMEOUT).setTimeout()}initAd(t,e,i,s,n,r,o){this.ns=Date.now(),this.status=g.wy.LOADING,this._i&&(0,O.nF)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.Yi}`,level:O.D_.CRITICAL,sessionId:this.settings.sessionId}),this._i=!0,this.Vi(k.AD_LOADED_TIMEOUT).setTimeout(),this.rs(o),this.hs=new I(this),this.hs.onTrackingLifecycleEvent(b.Win)}setAdVolume(t){this.mi.volume=t,(0,S.Q1)(this.mi,t),t<=0?this.settings.adEnforcer.start(E.cs.Mute):this.settings.adEnforcer.stop(E.cs.Mute)}markAdAsReplaced(){this.ui=!0}getTrackerSlot(){return this.gi}get impressionStarted(){return this.bi}get creativeId(){return this.yi}set creativeId(t){(0,u.QM)(this.creativeId)||(this.yi=t)}get onAdViewableImpression(){return this.Ci.asObservable()}ds(t){let e;(0,u.hj)(t.payload.skipOffset)&&(e=t.payload.skipOffset);const i={type:g.fI.AdLoaded,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adLoadedData:{skipOffset:e},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,vastVerifications:t.payload.verificationScriptResources,containers:t.payload.containers}};return this.settings.adLoadedPayload=i,i}ls(){if(this.gi){const t=this.gi.getAttribute("aria-hidden");this.gi.setAttribute("aria-hidden","true"===t?"false":"true")}}us(t){return{type:g.fI.AdImpression,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:B,skipOffset:this.skipOffset},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}get skipOffset(){var t,e,i;return null===(i=null===(e=null===(t=this.settings.adLoadedPayload)||void 0===t?void 0:t.payload)||void 0===e?void 0:e.adLoadedData)||void 0===i?void 0:i.skipOffset}ps(t){return{type:g.fI.AdVideoStart,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:B},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId},logInMobiInfo:t.payload.logInMobiInfo}}}Ri(t){if(t.payload||(t.payload={}),this.gs(t.type),t.payload.adType=this.settings.adManagerLineItem.protoLineItem.adType,!this.vs(t))return void this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.InvalidVpaidEvent,errorCode:C.Oq.GeneralError}});const{adManagerLineItem:e,bidId:i,requestMetadata:s}=this.settings,{cnxBidId:n}=s.data;switch(t.type){case g.fI.AdLoaded:0,this.hs.onTrackingLifecycleEvent(b.AdLoaded),this.Vi(k.AD_LOADED_TIMEOUT).clearTimeout(),this.Pe.next(this.ds(t)),this.Ii=!0,this.Zi=(0,u.hj)(this.ns)?Date.now()-this.ns:0,this.status=g.wy.LOADED;break;case g.fI.AdImpression:this.ts=(0,u.hj)(this.ss)?Date.now()-this.ss:0,this.hs.onTrackingLifecycleEvent(b.AdImpression),this.Vi(k.IMPRESSION_TIMEOUT).clearTimeout(),this.ys(),(0,S.cn)(this.gi,R),this.ls(),this.Pe.next(this.us(t)),this.bi=!0,this.status=g.wy.IMPRESSION;break;case g.fI.AdVideoStart:this.hs.onTrackingLifecycleEvent(b.AdStarted),this.Pe.next(this.ps(t));break;case g.fI.AdStopped:case g.fI.AdSkipped:case g.fI.AdError:this.bs(t);break;default:this.Pe.next(t)}}bs(t){var e;this.Pi?(0,O.nF)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:O.D_.WARN,sessionId:this.settings.sessionId}):((0,u.hj)(this.Zi)||((0,u.hj)(this.ns)?this.Zi=Date.now()-this.ns:this.Zi=0),(0,u.hj)(this.ts)||((0,u.hj)(this.ss)?this.ts=Date.now()-this.ss:this.ts=0),g.fI.AdError===t.type&&(this.es=t.payload.errorMessage,this.Li=!0),g.fI.AdStopped===t.type&&(this.es=g.RG.AdStopped,this.Li=!!(null===(e=t.payload)||void 0===e?void 0:e.shouldTrackPostBid)),g.fI.AdSkipped===t.type&&(this.es=g.RG.AdStopped,this.Li=!1),this.Ki(),this.Pe.next(t),this.Qi!==g.wy.INVALIDATED&&(this.Ii?this.status=g.wy.CONSUMED_LOADED:(this.Qi!==g.wy.LOADING&&(0,O.nF)({message:"Bid_idle_consumed",level:O.D_.WARN,sessionId:this.settings.sessionId},{throttle:1,shouldSendMaxLog:!1}),this.status=g.wy.CONSUMED_LOADING)))}rs(t){this.vi=this.Is(),this.gi=this.vi.slotsContainer,(0,S.cn)(this.gi,this.Wi),this.Le=this.vi.adSlot,this.Le.id=this.Yi,this.gi.id=this.settings.bidSlotId,this.mi=this.vi.videoSlot,this.mi.volume=t,(0,S.Q1)(this.mi,t),this.settings.adEnforcer.registerContainer(this.gi,this.Yi),this.Mi.push(this.settings.adEnforcer.onEnforcerEvent.subscribe((t=>{this.ws(t)}))),this.settings.adEnforcer.start(E.cs.All)}Is(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}Ki(){try{this.Pi=!0,this.gi&&((0,S.IV)(this.gi,R),(0,S.IV)(this.gi,this.Wi),this.gi.removeAttribute("id")),this.Le&&this.Le.removeAttribute("id"),this.ls(),(0,L.i)(this.Mi),this.Di(),this.settings.adEnforcer.deregisterContainer(this.gi),this.settings.viewabilityService.off(this.Le,this.ji),null!==this.Ei&&this.di.clearTimeout(this.Ei),this.Ps()}catch(t){this._s("ABaseBidAdaptor","_destroy",(0,f.W$)(t))}}Ps(){this.Ei=this.di.setTimeout((()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.vi)}),500)}Fi(){const{advertiserLineItemId:t,publisherLineItemId:e}=this.settings.adManagerLineItem.protoLineItem;this.Ci.next({advertiserLineItemId:t,publisherLineItemId:e,rtbSeatId:this.settings.requestMetadata.data.rtbSeatId,dspId:this.settings.requestMetadata.data.dspId,rtbAdomain:this.settings.requestMetadata.data.rtbAdomain})}ys(){const t=P.fJ,e=this.Le;this.settings.viewabilityService.on(e,this.ji,{threshold:t}),this.ji(this.settings.viewabilityService.check({threshold:t,element:e}))}Di(){Object.keys(this.Gi).forEach((t=>{this.Vi(t).clearTimeout()}))}vs(t){return!(!this.bi&&(t.type===g.fI.AdStopped||t.type===g.fI.AdSkipped))}ws(t){if(t.detectedContainer!==this.gi)return;let e;switch(t.type){case E.lU.BADURI_DETECTED:e="AdManager_enforcer_BadUri";break;case E.lU.MALWARE_DETECTED:e="AdManager_enforcer_malware",this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.EnforcementMalware,errorCode:C.Oq.GeneralError}});break;case E.lU.VOLUME_DETECTED:e="AdManager_enforcer_soundBlock",this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.EnforcementVolume,errorCode:C.Oq.GeneralError}})}(0,O.nF)({message:e,exception:t.message,level:O.D_.WARN,sessionId:this.settings.sessionId,callStack:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_publisherLineItemId:${this.settings.adManagerLineItem.protoLineItem.publisherLineItemId}_creativeId:${this.settings.externalCreativeId}_html:${this.settings.htmlToLog}`})}gs(t){if(!this._i&&(M.includes(t)||t===g.fI.AdLoaded)){if(this.ki.push(t),this.Ai)return;this.Ai=!0,(0,O.nF)({message:`${this.adMediaType?this.adMediaType:""}BidAdaptor_AdIdle_${t}BeforeInitAd`,exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:"PostBidInitAd",level:O.D_.WARN,sessionId:this.settings.sessionId})}if(this.Ii&&!this.Si&&M.includes(t)){if(this.ki.push(t),this.Ai)return;this.Ai=!0,(0,O.nF)({message:`${this.adMediaType?this.adMediaType:""}BidAdaptor_AdLoaded_${t}WithoutStartAd`,exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:"PostBidStartAd",level:O.D_.WARN,sessionId:this.settings.sessionId})}}_s(t,e,i){const s=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,n=this.creativeId;(0,O.nF)({message:`AdManager_${t}_${e}`,exception:`advertiserLineItemId:${s}_creativeId:${n}_errorMessage:${null==i?void 0:i.message}`,callStack:null==i?void 0:i.stack,level:O.D_.WARN,sessionId:this.settings.sessionId},{throttle:10})}}var N=i(8659);var F=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let $=class{constructor(){this.Ts=null}fetchGoogleTag(){if(null!==this.Ts)return this.Ts;const t=(0,f.pE)(window).topFrame;return this.Ts=(0,f.Up)((()=>new Promise(((e,i)=>{(0,S.dZ)({src:"//securepubads.g.doubleclick.net/tag/js/gpt.js"},t.document.head,t,(()=>e(t.googletag)),(()=>i(new Error("GptLoader_failed_gpt_script"))))})))),this.Ts}};$=F([(0,N.ri)()],$);var V=i(655),j=i(1480),U=i(7878),q=Array.isArray;var H=i(1545),J=i(2566),G=i(2457);function z(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,G.jO)(t),s=function(t){return 1===t.length&&q(t[0])?t[0]:t}(t);return s.length?new j.y((function(t){var e=s.map((function(){return[]})),n=s.map((function(){return!1}));t.add((function(){e=n=null}));for(var r=function(r){(0,U.Xf)(s[r]).subscribe((0,J.x)(t,(function(s){if(e[r].push(s),e.every((function(t){return t.length}))){var o=e.map((function(t){return t.shift()}));t.next(i?i.apply(void 0,(0,V.ev)([],(0,V.CR)(o))):o),e.some((function(t,e){return!t.length&&n[e]}))&&t.complete()}}),(function(){n[r]=!0,!e[r].length&&t.complete()})))},o=0;!t.closed&&o<s.length;o++)r(o);return function(){e=n=null}})):H.E}var W=i(9127);const Y=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]];class X{constructor(t,e,i){this.Ss=t,this.As=e,this.ks=i,this.je=`div-gpt-ad-1589549806211-${(0,f.qs)()}`,this.Es=new v.x,this.Cs=new v.x,this.Ue=new v.x,this.He=new v.x,this.Je=new v.x,this.Ge=new v.x,this.Os=new v.x,this.Ye=()=>{(0,S.dA)(this.Ls)?this.Ge.next():this.Je.next()}}get onCreativeReceived(){return this.Os.asObservable()}get onDisplayAd(){return this.Ue.asObservable()}get onError(){return this.He.asObservable()}get onClickAd(){return this.Je.asObservable()}get onClickThruAd(){return this.Ge.asObservable()}getAdMediaHeight(){return this.Bs?this.Bs.clientHeight:0}getAdMediaWidth(){return this.Bs?this.Bs.clientWidth:0}initializeAd(t,e){try{this.Rs=t,this.rs(t);const i=this.Ds(e.width,e.height);this.Ss.cmd.push((()=>{this.Ns=this.Ss.defineSlot(this.ks,i,this.je).addService(this.Ss.pubads()).setTargeting("domains",this.As),this.Ss.enableServices(),this.Vs(),this.Ss.pubads().isInitialLoadDisabled()&&this.Ss.pubads().refresh([this.Ns]),this.Ss.display(this.je)}))}catch(t){this.He.next(g.RG.WrapperInitAdError)}}destroy(){var t;this.Ss.cmd.push((()=>{this.Ss.destroySlots&&this.Ns&&this.Ss.destroySlots([this.Ns])})),null===(t=this.Ls)||void 0===t||t.removeEventListener("click",this.Ye)}Vs(){this.Ss.pubads().addEventListener("slotOnload",(t=>{t.slot===this.Ns&&this.Cs.next(t)})),this.Ss.pubads().addEventListener("slotRenderEnded",(t=>{t.slot===this.Ns&&(this.Es.next(t),t.isEmpty&&this.Cs.next(null))})),z([this.Es,this.Cs]).pipe((0,W.U)((([t,e])=>({slotRenderEndedEvent:t,slotOnloadEvent:e})))).subscribe((t=>{var e;const{slotRenderEndedEvent:i}=t;if(i.isEmpty)return void this.He.next(g.RG.AdxOverlayNoFill);this.Bs=null===(e=this.Rs)||void 0===e?void 0:e.getElementsByTagName("iframe")[0];const s=i.creativeId;s&&this.Os.next(s.toString()),this.ai(),this.Ue.next()}))}rs(t){t.id=this.je}Ds(t,e){return Y.filter((i=>!Array.isArray(i)||!(0,d.fn)(i)||(0,d.BZ)(i)&&i[0]<=t&&i[1]<=e))}ai(){this.Ls=(0,S.sc)(this.Rs),this.Ls.addEventListener("click",this.Ye,!0)}}var Q=i(1509),K=i(9357),Z=i(4065),tt=i(9906);class et extends D{constructor(t,e){super(t,e),this.di=t,this.settings=e,this.adMediaType="displayAdx",this.adSourceType=s.ProtoAdsourceTypeEnum.Unknown,this.js="adx",this.Us={[Q.n.FirstQuartile]:g.fI.AdVideoFirstQuartile,[Q.n.SecondQuartile]:g.fI.AdVideoMidpoint,[Q.n.ThirdQuartile]:g.fI.AdVideoThirdQuartile,[Q.n.FourthQuartile]:g.fI.AdVideoComplete},this.$s=[];const i=this.settings.adManagerLineItem.protoLineItem.overlayTime*K.s_;this.Js=new Z.B(this.di,i,500),this.$s.push(this.Js.onTimeUpdate.subscribe((()=>{this.Ri({type:g.fI.AdRemainingTimeChange})})),this.Js.onTimeElapsed.subscribe((()=>{this.stopAd("adxTimerElapsed")})),this.Js.onQuartile.subscribe((t=>{this.Ri({type:this.Us[t],payload:{}})})))}initAd(t,e,i,s,n,r,o){try{super.initAd(t,e,i,s,n,r,o),this.Gs={width:t,height:e},this.zs().then((t=>{this.Ws=new X(t,this.settings.domain,this.settings.adxAdUnitPath),this.$s.push(this.Ws.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.Ri({type:g.fI.AdLoaded,payload:{skipOffset:0}})})).catch((t=>{this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdxOverlayGptScriptLoad+`_${t.message}`,errorCode:C.Oq.GeneralError}})}))}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorInitAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}startAd(){try{super.startAd(),this.$s.push(this.Ws.onDisplayAd.subscribe((()=>{this.Ri({type:g.fI.AdStarted}),this.Ri({type:g.fI.AdVideoStart}),this.Ri({type:g.fI.AdImpression,payload:{}}),this.Js.start()})),this.Ws.onError.subscribe((t=>{this.Ri({type:g.fI.AdError,payload:{errorMessage:t,errorCode:C.Oq.GeneralError}}),this.Js.stop()})),this.Ws.onClickAd.subscribe((()=>{this.Ri({type:g.fI.AdClick})})),this.Ws.onClickThruAd.subscribe((()=>{this.Ri({type:g.fI.AdClickThru,payload:{}})}))),this.Ws.initializeAd(this.Le,this.Gs)}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorStartAdError+`_${t.exception}`,errorCode:C.Oq.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.Js.stop(),this.Ri({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this._s("AdxBidAdaptor","stopAd",t)}}resizeAd(t,e,i){this.Gs&&(this.Gs.width=t,this.Gs.height=e)}pauseAd(){try{this.Js.stop(),this.Ri({type:g.fI.AdPaused})}catch(t){this._s("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Js.start(),this.Ri({type:g.fI.AdPlaying})}catch(t){this._s("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.Ri({type:g.fI.AdSkipped})}catch(t){this._s("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.Js.timeRemaining/K.s_}getAdDuration(){return this.Js.timerDuration/K.s_}getAdVolume(){return 0}getAdMediaSize(){return{width:this.Ws.getAdMediaWidth(),height:this.Ws.getAdMediaHeight()}}setAdVolume(t){}get adVideoUrl(){return this.js}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}zs(){const t=(0,f.pE)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);t.googletag=window.googletag||{cmd:[]};return tt.h.getGlobalContainer().resolve($).fetchGoogleTag()}Ki(){var t;try{super.Ki(),this.Js.stop(),(0,L.i)(this.$s),null===(t=this.Ws)||void 0===t||t.destroy()}catch(t){this._s("AdxBidAdaptor","_destroy",t)}}}var it=i(6706),st=i(3326);class nt extends y{constructor(t,e){super(),this.Qs=t,this.Ks=e,this.Os=new v.x,this.Zs=new v.x,this.tn="",this.en=0,this.sn=0,this.nn=0,this.an=0,this.hn()}get onCreativeReceived(){return this.Os.asObservable()}get onNonCriticalError(){return this.Zs.asObservable()}initAd(t,e,i){this.Ks.emitSdkEvent(it.tB.INIT_AD,{width:t,height:e,viewMode:i})}startAd(){this.Ks.emitSdkEvent(it.tB.START_AD)}stopAd(){this.Ks.emitSdkEvent(it.tB.STOP_AD)}resizeAd(t,e,i){this.Ks.emitSdkEvent(it.tB.RESIZE_AD,{width:t,height:e,viewMode:i})}pauseAd(){this.Ks.emitSdkEvent(it.tB.PAUSE_AD)}resumeAd(){this.Ks.emitSdkEvent(it.tB.RESUME_AD)}expandAd(){this.Ks.emitSdkEvent(it.tB.EXPAND_AD)}collapseAd(){this.Ks.emitSdkEvent(it.tB.COLLAPSE_AD)}skipAd(){this.Ks.emitSdkEvent(it.tB.SKIP_AD)}getAdRemainingTime(){return 0}getAdDuration(){return this.en||this.Qs.adManagerLineItem.protoLineItem.duration||0}getAdVolume(){return this.an}setAdVolume(t){this.Ks.emitSdkEvent(it.tB.SET_AD_VOLUME,{volume:t})}getAdMediaWidth(){return this.sn}getAdMediaHeight(){return this.nn}getMediaFile(){return this.tn}destroy(){this.Ks.destroy()}hn(){Object.keys(it.gb).forEach((t=>{const e=it.gb[t];e===it.gb.AD_ERROR&&this.Ks.subscribeToSdkEvent(e,(t=>this.dn(t))),e===it.gb.LOADED&&this.Ks.subscribeToSdkEvent(e,(t=>this.ln(t))),e===it.gb.IMPRESSION&&this.Ks.subscribeToSdkEvent(e,(t=>this.un(t))),e===it.gb.VOLUME_CHANGED?this.Ks.subscribeToSdkEvent(e,(t=>this.pn(t))):this.Ks.subscribeToSdkEvent(e,(()=>this.gn(e)))}))}ln(t){const{creativeId:e,skipOffset:i,clickThroughUrl:s,mediaUrl:n,adDuration:r,mediaWidth:o,mediaHeight:a}=t;this.Os.next(e),this.tn=n,this.en=r,this.sn=o,this.nn=a;const h=this.Qs.adManagerLineItem.protoLineItem.publisherLineItemId||"";(0,st.A)(h,s).then((t=>{t?this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.DomainBlocked,errorCode:C.Oq.GeneralError}}):this.Pe.next({type:g.fI.AdLoaded,payload:{skipOffset:i}})})).catch((()=>{}))}un(t){this.en=t.adDuration,this.Pe.next({type:g.fI.AdVideoStart}),this.Pe.next({type:g.fI.AdImpression,payload:{}})}pn(t){this.an=t.volume,this.Pe.next({type:g.fI.AdVolumeChange})}gn(t){switch(t){case it.gb.CLICK:this.Pe.next({type:g.fI.AdClickThru,payload:{}});break;case it.gb.STARTED:this.Pe.next({type:g.fI.AdStarted});break;case it.gb.FIRST_QUARTILE:this.Pe.next({type:g.fI.AdVideoFirstQuartile});break;case it.gb.MIDPOINT:this.Pe.next({type:g.fI.AdVideoMidpoint});break;case it.gb.THIRD_QUARTILE:this.Pe.next({type:g.fI.AdVideoThirdQuartile});break;case it.gb.COMPLETE:this.Pe.next({type:g.fI.AdVideoComplete});break;case it.gb.DURATION_CHANGE:this.Pe.next({type:g.fI.AdDurationChange});break;case it.gb.PAUSED:this.Pe.next({type:g.fI.AdPaused});break;case it.gb.RESUMED:this.Pe.next({type:g.fI.AdPlaying});break;case it.gb.STOPPED:this.Pe.next({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!0}});break;case it.gb.LINEAR_CHANGED:this.Pe.next({type:g.fI.AdLinearChange});break;case it.gb.SKIPPABLE_STATE_CHANGED:this.Pe.next({type:g.fI.AdSkippableStateChange});break;case it.gb.SKIPPED:this.Pe.next({type:g.fI.AdSkipped});break;case it.gb.USER_CLOSE:this.Pe.next({type:g.fI.AdUserClose});break;case it.gb.LOG:this.Pe.next({type:g.fI.AdLog})}}dn(t){t.nonCriticalError?this.Zs.next(t.nonCriticalError):this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.ExternalSdkError,errorCode:t.errorCode}})}}class rt extends D{constructor(t,e,i){super(t,e),this.Ks=i,this.adMediaType="external",this.adSourceType=s.ProtoAdsourceTypeEnum.Unknown,this.vn=[],this.yn=new nt(e,i)}get adVideoUrl(){return this.yn.getMediaFile()}get declaredDurationInSeconds(){return this.yn.getAdDuration()}initAd(t,e,i,s,n,r,o){try{super.initAd(t,e,i,s,n,r,o),this.vn.push(this.yn.onVpaidEvent.subscribe((t=>{this.Ri(t)})),this.yn.onCreativeReceived.subscribe((t=>{this.creativeId=t})),this.yn.onNonCriticalError.subscribe((t=>{this._s("ExternalBidAdaptor",t.event,t.error)}))),this.yn.initAd(t,e,i)}catch(t){t instanceof Error&&(this.Ks.emitSdkEvent(it.tB.DESTROY_AD),this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorInitAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}}))}}startAd(){try{super.startAd(),this.yn.startAd()}catch(t){t instanceof Error&&(this.Ks.emitSdkEvent(it.tB.DESTROY_AD),this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorStartAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}}))}}stopAd(t){try{super.stopAd(t),this.yn.stopAd()}catch(t){t instanceof Error&&this._s("ExternalBidAdaptor","stopAd",t)}}resizeAd(t,e,i){this.yn.resizeAd(t,e,i)}pauseAd(){this.yn.pauseAd()}resumeAd(){this.yn.resumeAd()}expandAd(){this.yn.expandAd()}collapseAd(){this.yn.collapseAd()}skipAd(){this.yn.skipAd()}getAdRemainingTime(){return this.yn.getAdRemainingTime()}getAdDuration(){return this.yn.getAdDuration()}getAdVolume(){return this.yn.getAdVolume()}getAdMediaSize(){return{width:this.yn.getAdMediaWidth(),height:this.yn.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.yn.setAdVolume(t)}catch(t){t instanceof Error&&this._s("ExternalBidAdaptor","setAdVolume",t)}}Ki(){try{super.Ki(),this.yn.destroy()}catch(t){t instanceof Error&&this._s("ExternalBidAdaptor","_destroy",t)}}}var ot=i(6210);class at{constructor(t,e,i,s,n,r,o){this.bn=t,this.In=e,this.Ne=i,this.Re=s,this.De=n,this.Ce=r,this.wn=o,this.Ue=new v.x,this.$e=new v.x,this.He=new v.x,this.Je=new v.x,this.Ge=new v.x,this.Mi=[]}get onDisplayAd(){return this.Ue.asObservable()}get onError(){return this.He.asObservable()}get onClickClose(){return this.$e.asObservable()}get onClickAd(){return this.Je.asObservable()}get onClickThruAd(){return this.Ge.asObservable()}initializeAd(t,e){try{let i;if(this.Ce===s.ProtoAdType.Nonlinear){const{width:t,height:e}=this.wn;i={width:t,height:e}}this.Pn=new x(this.Ce,this.In,this.bn,t,this.Re,this.De,this.Ne,i),this.Mi.push(this.Pn.onDisplayAd.subscribe((()=>{this.Ue.next()})),this.Pn.onError.subscribe((()=>{this.He.next(g.RG.DisplayIntegratorIframeLoad)})),this.Pn.onClickClose.subscribe((()=>{this.$e.next()})),this.Pn.onClickAd.subscribe((()=>{this.Je.next()})),this.Pn.onClickThruAd.subscribe((()=>{this.Ge.next()}))),this.Pn.createBanner(e)}catch(t){this.He.next(g.RG.WrapperInitAdError)}}getAdMediaDimensions(){var t;return null===(t=this.Pn)||void 0===t?void 0:t.getAdMediaDimensions()}destroy(){var t;(0,L.i)(this.Mi),null===(t=this.Pn)||void 0===t||t.destroy()}}const ht={[Q.n.FirstQuartile]:g.fI.AdVideoFirstQuartile,[Q.n.SecondQuartile]:g.fI.AdVideoMidpoint,[Q.n.ThirdQuartile]:g.fI.AdVideoThirdQuartile,[Q.n.FourthQuartile]:g.fI.AdVideoComplete};class ct extends D{constructor(t,e){var i;let n;super(t,e),this.di=t,this.settings=e,this.adSourceType=s.ProtoAdsourceTypeEnum.Unknown,this._n=500,this.Tn=[],this.settings.adManagerLineItem.protoLineItem.adType===s.ProtoAdType.Nonlinear?(this.adMediaType="displayHtmlNonLinear",this.js="htmlNonLinear",n=null===(i=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===i?void 0:i.nonLinearAdTimeSeconds):(this.adMediaType="displayHtml",this.js="html",n=this.settings.adManagerLineItem.protoLineItem.overlayTime);const r=n*K.s_;this.Js=new Z.B(this.di,r,this._n),this.Tn.push(this.Js.onTimeUpdate.subscribe((()=>{this.Ri({type:g.fI.AdRemainingTimeChange})})),this.Js.onTimeElapsed.subscribe((()=>{this.stopAd("htmlTimerElapsed")})),this.Js.onQuartile.subscribe((t=>{this.Ri({type:ht[t],payload:{}})})))}get adVideoUrl(){return this.js}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,e,i,s,n,r,o){try{super.initAd(t,e,i,s,n,r,o),this.Sn=t,this.An=e,this.Ri({type:g.fI.AdLoaded,payload:{}})}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorInitAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}startAd(){try{super.startAd(),this.Js.start(),this.kn=new at(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.sessionId,this.settings.adManagerLineItem.protoLineItem.adType,this.settings.dimensions),this.Tn.push(this.kn.onDisplayAd.subscribe((()=>{this.Ri({type:g.fI.AdStarted}),this.Ri({type:g.fI.AdVideoStart}),this.Ri({type:g.fI.AdImpression,payload:{}})})),this.kn.onError.subscribe((t=>{this.Ri({type:g.fI.AdError,payload:{errorMessage:t,errorCode:C.Oq.GeneralError}}),this.Js.stop()})),this.kn.onClickClose.subscribe((()=>{this.Ri({type:g.fI.AdUserClose,payload:{}}),this.stopAd(ot.h)})),this.kn.onClickAd.subscribe((()=>{this.Ri({type:g.fI.AdClick})})),this.kn.onClickThruAd.subscribe((()=>{this.Ri({type:g.fI.AdClickThru,payload:{}})}))),this.kn.initializeAd(this.Le,{width:this.Sn,height:this.An})}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorStartAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.Js.stop(),this.Ri({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this._s("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.Ri({type:g.fI.AdSkipped})}catch(t){this._s("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.Js.stop(),this.Ri({type:g.fI.AdPaused})}catch(t){this._s("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Js.start(),this.Ri({type:g.fI.AdPlaying})}catch(t){this._s("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.Js.timerDuration/K.s_}getAdRemainingTime(){return this.Js.timeRemaining/K.s_}getAdVolume(){return 0}getAdMediaSize(){var t;return null===(t=this.kn)||void 0===t?void 0:t.getAdMediaDimensions()}setAdVolume(t){}resizeAd(t,e,i){this.Sn=t,this.An=e}Ki(){var t;try{super.Ki(),this.Js.stop(),(0,L.i)(this.Tn),null===(t=this.kn)||void 0===t||t.destroy()}catch(t){this._s("HtmlBidAdaptor","_destroy",t)}}}var dt=i(8211);class lt extends y{constructor(t,e,i,s,n,r,o){super(),this.En=t,this.xn=e,this.Cn=i,this.Ln=s,this.Bn=n,this.Rn=r,this.Dn=o,this.Os=new v.x,this.Fn=t=>{if(!this.Vn(t))return;let e="";try{e=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.ImaError+"_"+e,errorCode:C.Oq.GeneralError}})},this.gn=t=>{const e=this.En.AdEvent.Type;switch(t.type){case e.CLICK:this.Pe.next({type:g.fI.AdClickThru,payload:{}});break;case e.LOADED:this.ln(t);break;case e.IMPRESSION:{const t={adsManager:this.Bn,adContainer:this.jn,viewMode:this.Un(this.$n),adTag:this.Ln};this.Pe.next({type:g.fI.AdVideoStart}),this.Pe.next({type:g.fI.AdImpression,payload:{imaMetadata:t}});break}case e.STARTED:this.Pe.next({type:g.fI.AdStarted});break;case e.FIRST_QUARTILE:this.Pe.next({type:g.fI.AdVideoFirstQuartile});break;case e.MIDPOINT:this.Pe.next({type:g.fI.AdVideoMidpoint});break;case e.THIRD_QUARTILE:this.Pe.next({type:g.fI.AdVideoThirdQuartile});break;case e.COMPLETE:this.Pe.next({type:g.fI.AdVideoComplete}),this.Pe.next({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!0}});break;case e.ALL_ADS_COMPLETED:break;case e.DURATION_CHANGE:this.Pe.next({type:g.fI.AdDurationChange});break;case e.PAUSED:this.Pe.next({type:g.fI.AdPaused});break;case e.RESUMED:this.Pe.next({type:g.fI.AdPlaying});break;case e.LINEAR_CHANGED:this.Pe.next({type:g.fI.AdLinearChange});break;case e.SKIPPABLE_STATE_CHANGED:this.Pe.next({type:g.fI.AdSkippableStateChange});break;case e.SKIPPED:this.Pe.next({type:g.fI.AdSkipped});break;case e.VOLUME_CHANGED:this.Pe.next({type:g.fI.AdVolumeChange});break;case e.USER_CLOSE:this.Pe.next({type:g.fI.AdUserClose});break;case e.LOG:this.Pe.next({type:g.fI.AdLog})}},this.hn()}get onCreativeReceived(){return this.Os.asObservable()}initAd(t,e,i,s,n,r){this.jn=r.slot,this.qn=r.videoSlot,this.$n=i||g.zc.Normal;try{this.Bn.setVolume(0),this.Bn.init(t,e,this.Un(this.$n))}catch(t){this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.ImaManagerInit,errorCode:C.Oq.GeneralError}})}}startAd(){try{this.Bn.start()}catch(t){this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.WrapperStartAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}stopAd(t){this.Bn.stop(),this.Pe.next({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,e,i){this.Bn.resize(t,e,this.Un(i))}pauseAd(){this.Bn.pause()}resumeAd(){this.Bn.resume(),this.xn===dt.M.Ios&&(0,S.UR)(this.qn)}expandAd(){this.Bn.expand()}collapseAd(){this.Bn.collapse()}skipAd(){this.Bn.skip()}getAdRemainingTime(){return this.Bn.getRemainingTime()||0}getAdDuration(){return this.Hn?this.Hn.getDuration():0}getAdVolume(){return this.Bn.getVolume()}getAdMediaWidth(){return this.Hn?this.Hn.getVastMediaWidth():0}getAdMediaHeight(){return this.Hn?this.Hn.getVastMediaHeight():0}setAdVolume(t){this.Bn.setVolume(t)}getMediaFile(){return this.Hn?this.Hn.getMediaUrl():void 0}hn(){this.Cn.addEventListener(this.En.AdErrorEvent.Type.AD_ERROR,this.Fn),this.Bn.addEventListener(this.En.AdErrorEvent.Type.AD_ERROR,this.Fn),Object.keys(this.En.AdEvent.Type).forEach((t=>{this.Bn.addEventListener(this.En.AdEvent.Type[t],this.gn,!1)}))}Jn(){this.Cn.removeEventListener(this.En.AdErrorEvent.Type.AD_ERROR,this.Fn),this.Bn.removeEventListener(this.En.AdErrorEvent.Type.AD_ERROR,this.Fn),Object.keys(this.En.AdEvent.Type).forEach((t=>{this.Bn.removeEventListener(this.En.AdEvent.Type[t],this.gn,!1)}))}Un(t){return t===g.zc.Fullscreen?this.En.ViewMode.FULLSCREEN:this.En.ViewMode.NORMAL}Gn(t){return n.c.BANNED_IMA_ADS_ID.some((e=>e===t))}Vn(t){const e=t.getUserRequestContext();return!e||e.id===this.Rn.id}ln(t){if(this.Hn=t.getAd(),this.Gn(this.Hn.getAdId()))return void this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.VpaidInvalid,errorCode:C.Oq.GeneralError}});this.Os.next(this.Hn.getCreativeId());let e=-1,i="";try{e=this.Hn.getSkipTimeOffset();const s=t.getAdData().clickThroughUrl;i=(0,u.QM)(s)?s:void 0}catch(t){}(0,st.A)(this.Dn,i).then((t=>{t?this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.DomainBlocked,errorCode:C.Oq.GeneralError}}):this.Pe.next({type:g.fI.AdLoaded,payload:{skipOffset:e}})}))}destroy(){try{this.Jn(),setTimeout((()=>{this.Bn.destroy()}))}catch(t){}}}class ut extends D{constructor(t,e){super(t,e),this.di=t,this.settings=e,this.vi=null,this.adMediaType="ima",this.adSourceType=s.ProtoAdsourceTypeEnum.Ima,this.zn=[],this.vi=this.settings.imaAdSlotContainer,this.Wn=new lt(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(t,e,i,s,n,r,o){try{super.initAd(t,e,i,s,n,r,o),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.Xn(),this.zn.push(this.Wn.onVpaidEvent.subscribe((t=>{this.Ri(t)})),this.Wn.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.Wn.initAd(t,e,i,s,n,{slot:this.Le,videoSlot:this.mi})}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorInitAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}startAd(){try{super.startAd(),this.Wn.startAd()}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorStartAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.Wn.stopAd(t)}catch(t){this._s("ImaBidAdaptor","stopAd",t)}}resizeAd(t,e,i){try{this.Wn.resizeAd(t,e,i)}catch(t){this._s("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Wn.pauseAd()}catch(t){this._s("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Wn.resumeAd()}catch(t){this._s("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Wn.expandAd()}catch(t){this._s("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Wn.collapseAd()}catch(t){this._s("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Wn.skipAd()}catch(t){this._s("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Wn.getAdRemainingTime()}catch(t){return this._s("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Wn&&this.Wn.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this._s("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Wn.getAdVolume()}catch(t){return this._s("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.Wn.getAdMediaWidth(),height:this.Wn.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.Wn.setAdVolume(t)}catch(t){this._s("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Wn.getMediaFile()}get declaredDurationInSeconds(){return this.Wn.getAdDuration()}us(t){const e=super.us(t);return e.payload.adSourceData.imaMetadata=t.payload.imaMetadata,e}Is(){return this.vi}Ps(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.vi)}Xn(){it.X3.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1,this.settings.sessionId)}Ki(){try{super.Ki(),(0,L.i)(this.zn),this.Wn.destroy()}catch(t){this._s("ImaBidAdaptor","_destroy",t)}}}var pt=i(2857);class ft{constructor(t,e,i,s){this.Qn=t,this.Kn=e,this.Zn=i,this.tr=s,this.ir=[],this.sr=(t,e)=>{if(e.fatal)switch(e.type){case this.Qn.ErrorTypes.NETWORK_ERROR:if(e.details===this.Qn.ErrorDetails.MANIFEST_PARSING_ERROR||e.details===this.Qn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.nr();this.rr.startLoad();break;case this.Qn.ErrorTypes.MEDIA_ERROR:this.rr.recoverMediaError();break;default:this.nr()}},this.ar=()=>{this.rr.off(this.Qn.Events.MEDIA_ATTACHED,this.ar),this.rr.loadSource(this.Kn),this.rr.once(this.Qn.Events.MANIFEST_PARSED,this.hr)},this.hr=()=>{this.rr.off(this.Qn.Events.MANIFEST_PARSED,this.hr),this.cr(),this.tr.forceMaxLevel&&this.dr(),this.tr.forceResolutionHeight&&this.lr(this.tr.forceResolutionHeight),this.ur()},(this.tr.forceMaxLevel||this.tr.forceResolutionHeight)&&(pt.yt.capLevelToPlayerSize=!1)}start(t,e){this.ur=t,this.nr=e,this.Qn&&(0,pt.fh)()?(this.rr=new this.Qn(Object.assign({},pt.yt)),this.gr()):this.nr()}destroy(t){try{this.rr&&(this.rr.destroy(),this.rr=null)}catch(e){const{message:i,stack:s}=(0,f.W$)(e);(0,O.nF)({sessionId:t,level:O.D_.WARN,message:"AdManager_HlsAdSourceHandler_destroy",exception:i,callStack:s})}}gr(){this.rr.on(this.Qn.Events.ERROR,this.sr),this.rr.attachMedia(this.Zn),this.rr.once(this.Qn.Events.MEDIA_ATTACHED,this.ar)}dr(){const t=this.rr.levels.length-1;this.vr(t)}lr(t){const e=this.ir.find((e=>e.height===t));e&&this.vr(e.level)}vr(t){this.rr.currentLevel=t,this.rr.startLevel=t,this.rr.nextLevel=t}cr(){this.rr.levels.forEach(((t,e)=>{this.ir.push({level:e,height:t.height})}))}}var mt=i(9490),gt=i(5292),vt=i(7332);const yt="huffpost",bt=540,It=["d426a992-f367-434b-827b-d3561b6af50c","e3bcb71c-7486-4955-a5fe-c94bade4948d"];class wt extends y{constructor(t,e,i,s,n,r,o,a,h,c,d,l=!1,u){super(),this.Re=t,this.yr=e,this.qn=i,this.xn=s,this.Ne=n,this.Ir=r,this.wr=o,this.De=a,this.Pr=h,this._r=c,this.Qn=d,this.Tr=l,this.Sr=u,this.Ar=!1,this.pageFocus=new gt.v(this.Re),this.kr=Object.values(mt.wB),this.Er=!1,this.Cr=!1,this.Or=!0,this.Mr=!1,this.Lr=[{event:g.fI.AdVideoStart,position:0},{event:g.fI.AdVideoFirstQuartile,position:25},{event:g.fI.AdVideoMidpoint,position:50},{event:g.fI.AdVideoThirdQuartile,position:75},{event:g.fI.AdVideoComplete,position:100}],this.Br=this.Lr[0],this.Rr=t=>{try{switch(t.type){case mt.wB.Pause:if(this.wr&&!this.Or)return this.Or=!0,void this.Dr("pause_event_loopAd");this.Cr=!1;break;case mt.wB.Play:!this.Cr&&this.Tr&&this.qn.pause();break;case mt.wB.Canplay:case mt.wB.Durationchange:this.Nr();break;case mt.wB.Timeupdate:this.Fr();break;case mt.wB.Error:{const t=this.qn.networkState===HTMLMediaElement.NETWORK_NO_SOURCE?C.Oq.MediaFileNotFound:C.Oq.GeneralLinearError;this.Pe.next({type:g.fI.AdError,payload:{errorCode:t,errorMessage:g.RG.VastVideoTagEventError}});break}case"click":this.Pe.next({type:g.fI.AdClickThru,payload:{}})}}catch(t){(0,O.nF)({level:O.D_.CRITICAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message,sessionId:this.De},{throttle:10,shouldSendMaxLog:!1})}}}initAd(t,e,i,s,n,r){try{this.qn=r.videoSlot,this.width=t,this.height=e,this.Vr(this.Ir,this.qn.parentElement),this.resizeAd(t,e,i),this.addVideoEvents(this.qn),this._r&&(0,pt.fh)()?this.jr(this.Qn):(this.qn.setAttribute("src",this.yr),this.qn.setAttribute("preload","metadata"),this.qn.load()),this.pageFocus.isDocumentVisible()||this.Nr()}catch(t){this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.WrapperInitAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}Ur(t){if(this.Er){const e=t?"INMOBI_IMPRESSION_EVENT_DOCUMENT_VISIBLE":"INMOBI_IMPRESSION_EVENT_DOCUMENT_NOT_VISIBLE";(0,O.nF)({level:O.D_.INFO,exception:`advLineItemId: ${this.Ne}`,message:e,sessionId:this.De},{throttle:1e3})}}startAd(){try{(0,S.cn)(this.qn,"cnx-ad-video-slot"),this.Cr=!0,this.Ne&&It.includes(this.Ne)&&(this.Er=!0),this.pageFocus.isDocumentVisible()?this.qn.play().then((()=>{this.Pe.next({type:g.fI.AdStarted}),this.$r(),this.Ur(!0)})).catch((t=>{this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.VastPlayPromiseReject,errorCode:C.Oq.GeneralError}}),this.Er&&(0,O.nF)({level:O.D_.INFO,message:"INMOBI_DOCUMENT_VISIBLE_REJECTED_PLAY_EVENT",exception:`advLineItemId: ${this.Ne}, promiseError: ${t.message}`,callStack:t.stack,sessionId:this.De},{throttle:1e3})})):(this.Pe.next({type:g.fI.AdStarted}),this.$r(),this.Ur(!1),this.qn.play().then((()=>{this.qr(),this.Er&&(0,O.nF)({level:O.D_.INFO,message:"INMOBI_DOCUMENT_NOT_VISIBLE_RESOLVED_PLAY_EVENT",exception:`advLineItemId: ${this.Ne}`,sessionId:this.De},{throttle:1e3})})).catch((t=>{this.Er&&(0,O.nF)({level:O.D_.INFO,message:"INMOBI_DOCUMENT_NOT_VISIBLE_REJECTED_PLAY_EVENT",exception:`advLineItemId: ${this.Ne}, promiseError: ${t.message}`,callStack:t.stack,sessionId:this.De},{throttle:1e3})})))}catch(t){this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.WrapperStartAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}stopAd(t){this.Tr&&this.qn.pause(),"videoComplete"===t&&this.wr?this.Pe.next({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!1}}):this.Pe.next({type:g.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,e,i){(0,S.T7)(this.qn,{width:`${t}px`,height:`${e}px`}),this.Pe.next({type:g.fI.AdSizeChange})}pauseAd(){this.Cr=!1,this.Pr&&void 0===this.Br&&(this.Br=this.Lr[0]),this.qn.pause(),this.Pe.next({type:g.fI.AdPaused})}resumeAd(){this.wr&&void 0===this.Br&&(this.Br=this.Lr[0]),this.Cr=!0,this.Dr("resumeAd"),this.qr(),this.Pe.next({type:g.fI.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.Pe.next({type:g.fI.AdSkipped})}getAdRemainingTime(){return this.qn.duration-this.qn.currentTime}getAdDuration(){return this.qn.duration?this.qn.duration:0}getAdVolume(){return this.qn.volume}setAdVolume(t){this.qn.volume=t}getAdMediaWidth(){return this.qn.videoWidth}getAdMediaHeight(){return this.qn.videoHeight}destroy(){if(!this.Pr&&!this.wr)try{(0,S.IV)(this.qn,"cnx-ad-video-slot"),this.Hr(this.qn),this.qn.removeAttribute("src"),this.Jr&&(this.Jr.destroy(this.De),this.Jr=null)}catch(t){const{message:e,stack:i}=(0,f.W$)(t);(0,O.nF)({level:O.D_.WARN,message:"AdManager_VastIntegrator_destroyAd",exception:e,callStack:i,sessionId:this.De})}}qr(){this.xn===dt.M.Ios&&(0,S.UR)(this.qn)}jr(t){let e={forceMaxLevel:!0};this.Sr&&this.Sr.includes(yt)&&(e={forceMaxLevel:!1,forceResolutionHeight:bt}),this.Jr=new ft(t,this.yr,this.qn,e),this.Jr.start((()=>{this.Nr()}),(()=>{this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.CnxMediaSrcNotSupported,errorCode:C.Oq.MediaFileNotSupported}})}))}Vr(t,e){this.Gr=this.Re.createElement("a"),t&&(this.Gr.href=t,this.Gr.target="_blank"),(0,S.cn)(this.Gr,"cnx-ad-slot"),this.Gr.setAttribute("title","Advertisement link"),this.Gr.setAttribute("role","link"),this.Gr.setAttribute("tabindex","-1"),this.Gr.setAttribute("aria-disabled","true"),e.appendChild(this.Gr),this.Gr.addEventListener("click",this.Rr)}addVideoEvents(t){this.kr.forEach((e=>{t.addEventListener(e,this.Rr)})),this.Gr&&this.Gr.addEventListener("click",this.Rr)}Hr(t){this.kr.forEach((e=>{t.removeEventListener(e,this.Rr)})),this.Gr&&this.Gr.removeEventListener("click",this.Rr)}Nr(){this.Ar||(this.Ar=!0,this.Pe.next({type:g.fI.AdLoaded,payload:{}}))}Fr(){this.Pe.next({type:g.fI.AdRemainingTimeChange});const t=(0,vt.dQ)(0,this.qn.duration,0,100,this.qn.currentTime);if(this.Br&&t>=this.Br.position){this.Br.event===g.fI.AdVideoStart&&this.Er&&(0,O.nF)({level:O.D_.INFO,message:"INMOBI_AD_VIDEO_START_EVENT_FIRED",exception:`advLineItemId: ${this.Ne}`,sessionId:this.De},{throttle:1e3}),this.Mr||(this.Br.event===g.fI.AdVideoStart&&this.Er?this.Pe.next({type:g.fI.AdVideoStart,payload:{logInMobiInfo:this.Er}}):this.Pe.next({type:this.Br.event}));const t=this.Br;this.Br=this.Lr[this.Lr.indexOf(this.Br)+1],t.event===g.fI.AdVideoComplete&&(this.wr&&(this.qn.currentTime=.01),this.Or=!1,this.stopAd("videoComplete"),this.Mr=!0)}}Dr(t){try{this.qn.play().catch((e=>(0,O.nF)({level:O.D_.WARN,message:`AdManager_VastIntegrator_play_${t}`,exception:`playError: ${e.message}`,callStack:e.stack,sessionId:this.De})))}catch(e){(0,O.nF)({level:O.D_.WARN,message:`AdManager_VastIntegrator__play_${t}`,exception:`promiseError: ${e.message}`,callStack:e.stack})}}$r(){this.Gr&&(this.Gr.removeAttribute("tabindex"),this.Gr.removeAttribute("aria-disabled")),this.Pe.next({type:g.fI.AdImpression,payload:{}})}}var Pt=i(6153);class Tt extends D{constructor(t,e){super(t,e),this.di=t,this.settings=e,this.adMediaType="cnxMedia",this.adSourceType=s.ProtoAdsourceTypeEnum.CnxMedia,this.zr=[]}initAd(t,e,i,s,n,r,o){try{let a;super.initAd(t,e,i,s,n,r,o);let h=!1;if((0,u.QM)(this.settings.externalMediaFile))a=this.Wr(this.settings.externalMediaFile);else if((0,u.QM)(this.settings.externalHlsFile))a=this.Wr(this.settings.externalHlsFile),h=!0;else{if(!(0,d.BZ)(this.settings.renditions))return void this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.CnxMediaNoRenditions,errorCode:C.Oq.MediaFileNotFound}});a=this.Yr(this.settings.renditions,e,this.settings.mediaId)}this.Xr=a,this.Qr=new wt(this.settings.globalDomUtilsService,this.Xr,this.mi,this.settings.os,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.clickUrl,this.settings.shouldLoopAdWhenFinished,this.settings.sessionId,this.settings.shouldPauseAdWhenFinished,h,this.settings.hlsModule,this.settings.isInApp,this.settings.pageDomain),this.zr.push(this.Qr.onVpaidEvent.subscribe((t=>{this.Ri(t)}))),this.Qr.initAd(t,e,i,s,n,{slot:this.Le,videoSlot:this.mi})}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorInitAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}startAd(){try{super.startAd(),this.Qr.startAd()}catch(t){this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorStartAdError+`_${t.message}`,errorCode:C.Oq.GeneralError}})}}stopAd(t){super.stopAd(t),this.Qr?this.Qr.stopAd(t):(0,O.nF)({message:"stopAd",exception:t,level:O.D_.WARN,sessionId:this.settings.sessionId})}resizeAd(t,e,i){try{this.Qr.resizeAd(t,e,i)}catch(t){this._s("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Qr.pauseAd()}catch(t){this._s("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Qr.resumeAd()}catch(t){this._s("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Qr.expandAd()}catch(t){this._s("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Qr.collapseAd()}catch(t){this._s("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Qr.skipAd()}catch(t){this._s("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Qr.getAdRemainingTime()}catch(t){return this._s("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Qr?this.Qr.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this._s("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Qr.getAdVolume()}catch(t){return this._s("CnxMediaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.Qr.getAdMediaWidth(),height:this.Qr.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.Qr.setAdVolume(t)}catch(t){this._s("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Xr}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Ki(){var t;if(!this.settings.shouldPauseAdWhenFinished&&!this.settings.shouldLoopAdWhenFinished)try{super.Ki(),(0,L.i)(this.zr),null===(t=this.Qr)||void 0===t||t.destroy()}catch(t){this._s("CnxMediaBidAdaptor","_destroy",t)}}Wr(t){return(null==t?void 0:t.includes(Pt.n.endPoints.base.video))?this.Xi.appendParamsToUrl(t):t}Yr(t,e,i){let s;s=t.filter((t=>t.codec===mt.L5.H264));const n=(0,vt.DE)(e,s.map((t=>t.height)));return s=s.filter((t=>t.height===n)),s.length>0?this.Xi.appendParamsToUrl(`${Pt.n.endPoints.base.video}${i}/${s[0].file}`):null}}class _t{constructor(t,e,i,s){this.imageUrl=t,this.Kr=e,this.De=i,this.Ne=s,this.Ue=new v.x,this.He=new v.x,this.Je=new v.x,this.$e=new v.x,this.Mi=[]}get onDisplayAd(){return this.Ue.asObservable()}get onError(){return this.He.asObservable()}get onClickAd(){return this.Je.asObservable()}get onClickClose(){return this.$e.asObservable()}destroy(){var t;null===(t=this.Pn)||void 0===t||t.destroy()}initializeAd(t,e,i,s){this.eo=t,this.io(s,e,i)}getAdMediaDimensions(){var t;return null===(t=this.Pn)||void 0===t?void 0:t.getAdMediaDimensions()}io(t,e,i){this.so=this.Kr.createElement("img"),this.so.onload=()=>{this.ro(t,e,i)},this.so.onerror=()=>{this.He.next(g.RG.VastNonLinearImageLoadFailure)},this.so.src=this.imageUrl}ro(t,e,i){const s=this.oo(t,e,i);this.ao(s,t,e)}oo(t,e,i){let s;return s=t?this.ho(e,i):`height:${e.height}px; width: ${e.width}px;`,`<img alt='' src="${this.imageUrl}" style="${s} display: block; pointer-events: all; cursor: pointer">`}ao(t,e,i){this.Pn=new x(s.ProtoAdType.Nonlinear,t,g.ZJ.Html,this.eo,this.Kr,this.De,this.Ne,{height:i.height,width:i.width,scalable:e?{maxHeightPercent:n.O.NON_LINEAR_MAX_HEIGHT_PERCENT,maxWidthPercent:n.O.NON_LINEAR_MAX_WIDTH_PERCENT}:null}),this.Mi.push(this.Pn.onDisplayAd.subscribe((()=>{this.Ue.next()})),this.Pn.onClickClose.subscribe((()=>{this.$e.next()})),this.Pn.onClickAd.subscribe((()=>{this.Je.next()})),this.Pn.onError.subscribe((()=>{this.He.next(g.RG.DisplayIntegratorIframeLoad)}))),this.Pn.createBanner(i)}ho(t,e){const i=(0,vt.Tc)(e.height,n.O.NON_LINEAR_MAX_HEIGHT_PERCENT),s=(0,vt.Tc)(e.width,n.O.NON_LINEAR_MAX_WIDTH_PERCENT),r=t.height/i;return t.width/s>r?"width: 100%;":"height: 100%;"}}var St=i(8576);const At={[Q.n.FirstQuartile]:g.fI.AdVideoFirstQuartile,[Q.n.SecondQuartile]:g.fI.AdVideoMidpoint,[Q.n.ThirdQuartile]:g.fI.AdVideoThirdQuartile,[Q.n.FourthQuartile]:g.fI.AdVideoComplete};class xt extends D{constructor(t,e){super(t,e),this.di=t,this.settings=e,this.adMediaType="nonLinearVast",this.adSourceType=s.ProtoAdsourceTypeEnum.VastMedia,this.co=[],this._n=500,this.uo=0,this.nonLinearOnClick=()=>{this.po.nonLinearClickTracking.uri&&this.settings.globalDomUtilsService.trackWithImages([this.po.nonLinearClickTracking.uri]),this.po.nonLinearClickThrough&&this.settings.globalDomUtilsService.open(this.po.nonLinearClickThrough,St.bS.Blank),this.Ri({type:g.fI.AdClickThru,payload:{}})}}initAd(t,e,i,s,n,r,o){try{if(super.initAd(t,e,i,s,n,r,o),!(0,d.BZ)(this.settings.vastResponse.nonLinearFiles))return this.Hi=C.Oq.NonlinearSupportedTypeNotFound,void this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.NonLinearUnsupportedMedia,errorCode:this.Hi}});if(this.po=this.fo(),!this.po)return this.Hi=C.Oq.NonlinearExpectingDifferentSize,void this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.NonLinearUnsupportedMedia,errorCode:this.Hi}});this.mo(),this.vo(),this.Ri({type:g.fI.AdLoaded,payload:{}})}catch(t){(0,u.$K)(this.Hi)||(this.Hi=C.Oq.NonlinearGeneralError),this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.AdaptorInitAdError+`_${t.message}`,errorCode:this.Hi}})}}startAd(){super.startAd(),this.Js.start(),this.co.push(this.yo.onDisplayAd.subscribe((()=>{this.Ri({type:g.fI.AdStarted}),this.Ri({type:g.fI.AdVideoStart}),this.Ri({type:g.fI.AdImpression,payload:{}})})),this.yo.onError.subscribe((t=>{this.Hi=C.Oq.NonlinearUnableToFetchResource,this.Ri({type:g.fI.AdError,payload:{errorMessage:t,errorCode:this.Hi}})})),this.yo.onClickAd.subscribe((()=>this.nonLinearOnClick())),this.yo.onClickClose.subscribe((()=>{this.Ri({type:g.fI.AdUserClose,payload:{}}),this.stopAd(ot.h)})));const t={height:this.po.height,width:this.po.width},e={height:this.mi.clientHeight,width:this.mi.clientWidth};this.yo.initializeAd(this.Le,t,e,this.po.scalable)}get adVideoUrl(){return this.js}get declaredDurationInSeconds(){return this.uo/K.s_}getAdMediaSize(){var t;return null===(t=this.yo)||void 0===t?void 0:t.getAdMediaDimensions()}resizeAd(t,e,i){}pauseAd(){try{this.Js.stop(),this.Ri({type:g.fI.AdPaused}),this.ls()}catch(t){this._s("NonLinearVastBidAdaptor","pauseAd",t)}}resumeAd(){this.Js.start(),this.ls()}expandAd(){}collapseAd(){}getAdRemainingTime(){return this.Js.timeRemaining}getAdDuration(){return this.uo/K.s_}getAdVolume(){return 0}mo(){this.po.staticResource&&(this.yo=new _t(this.po.staticResource.uri,this.settings.globalDomUtilsService,this.settings.sessionId,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),this.js=this.po.staticResource.creativeType,this.bo())}bo(){this.mi.style.visibility="hidden"}vo(){var t;this.uo=(null===(t=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===t?void 0:t.nonLinearAdTimeSeconds)*K.s_,this.Js=new Z.B(this.di,this.uo,this._n),this.co.push(this.Js.onTimeUpdate.subscribe((()=>{this.Ri({type:g.fI.AdRemainingTimeChange})})),this.Js.onTimeElapsed.subscribe((()=>{this.stopAd("nonLinearTimerElapsed")})),this.Js.onQuartile.subscribe((t=>{this.Ri({type:At[t],payload:{}})})))}Ki(){var t,e;try{super.Ki(),null===(t=this.Js)||void 0===t||t.stop(),(0,L.i)(this.co),null===(e=this.yo)||void 0===e||e.destroy()}catch(t){this._s("NonLinearBidAdaptor","_destroy",t)}}fo(){let t;if(t=this.settings.vastResponse.nonLinearFiles.find((t=>!0===t.scalable)),!t){const e=(0,vt.Tc)(this.mi.clientHeight,n.O.NON_LINEAR_MAX_HEIGHT_PERCENT);t=this.settings.vastResponse.nonLinearFiles.find((t=>t.height<=e&&t.width<=this.mi.clientWidth))}return t}}var kt,Et=i(5196);!function(t){t.VastIconsContainer="cnx-vast-icons",t.VastIcon="cnx-vast-icon"}(kt||(kt={}));class Ct{constructor(t,e,i){this.di=t,this.Pe=e,this.Qs=i,this.Io=[],this.wo=[],this._n=500,this.wo.push(this.Pe.subscribe((t=>{t.type===g.fI.AdPaused&&this.Po(),t.type===g.fI.AdPlaying&&this._o()})))}init(){(0,u.$K)(this.Qs.offset)?this.To(this.Qs.offset,(()=>this.So())):this.So()}destroy(){var t;this.Ao(),this.ko.removeEventListener("click",this.Eo.bind(this)),null===(t=this.Js)||void 0===t||t.disable(),(0,L.i)(this.Io),(0,L.i)(this.wo),this.Io=[],this.wo=[]}So(){this.ko=this.xo(),this.ko.addEventListener("click",this.Eo.bind(this)),this.Qs.$container.appendChild(this.ko),(0,u.$K)(this.Qs.duration)&&this.To(this.Qs.duration,(()=>this.destroy())),(0,u.$K)(this.Qs.iconViewTracking)&&this.Qs.globalDomUtilsService.trackWithImages([this.Qs.iconViewTracking])}To(t,e){this.Js=new Z.B(this.di,t,this._n),this.Io.push(this.Js.onTimeElapsed.subscribe((()=>{e()}))),this.Js.start()}Ao(){this.ko.remove()}Po(){var t;null===(t=this.Js)||void 0===t||t.stop()}_o(){var t;null===(t=this.Js)||void 0===t||t.start()}xo(){return this.Qs.globalDomUtilsService.createElementByString(`\n            <cnx\n                class="${kt.VastIcon}"\n                style="\n                        position: absolute;\n                        ${this.Co(this.Qs.xPosition)}\n                        ${this.Oo(this.Qs.yPosition)}\n                        ${this.Mo(this.Qs.width)}\n                        ${this.Lo(this.Qs.height)}\n                    "\n                >\n                ${this.Bo()}\n            </cnx>\n        `)}Co(t){if(!(0,u.QM)(t)&&!(0,u.hj)(t))return"left: 0;";switch(t){case"left":return"left: 0;";case"right":return"right: 0;";default:return`left: ${t}px;`}}Oo(t){if(!(0,u.QM)(t)&&!(0,u.hj)(t))return"top: 0;";switch(t){case"top":return"top: 0;";case"bottom":return"bottom: 0;";default:return`top: ${t}px;`}}Mo(t){return(0,u.QM)(t)||(0,u.hj)(t)?"auto"===t?`width: ${t};`:`width: ${t}px;`:"width: auto;"}Lo(t){return(0,u.QM)(t)||(0,u.hj)(t)?"auto"===t?`height: ${t};`:`height: ${t}px;`:"height: auto;"}Eo(){if(!(0,u.$K)(this.Qs.iconClicks))return;const{iconClickTracking:t,iconClickThrough:e}=this.Qs.iconClicks;(0,d.BZ)(t)&&this.Qs.globalDomUtilsService.trackWithImages(t),(0,u.QM)(e)&&this.Qs.globalDomUtilsService.open(e,St.bS.Blank)}}class Ot extends Ct{Bo(){return this.Qs.resource}}class Lt extends Ct{Bo(){return`<iframe src="${this.Qs.resource}"/>`}}class Mt extends Ct{Bo(){return`<img src="${this.Qs.resource}"/>`}}const Rt=["AdChoices"];class Bt{constructor(t,e,i,s,n){this.Rs=t,this.Do=e,this.Kr=i,this.di=s,this.Pe=n,this.Fo=[]}initIcons(){if(!(0,d.BZ)(this.Do))return;const t=this.Vo(this.Do);(0,d.BZ)(t)&&(this.jo=this.Uo(),this.Rs.appendChild(this.jo),t.forEach((t=>{const e=this.$o(t);e.init(),this.Fo.push(e)})))}destroy(){for(;0!==this.Fo.length;){const t=this.Fo.length-1;this.Fo[t].destroy(),this.Fo.pop()}}Uo(){return this.Kr.createElementByString(`<cnx class="${kt.VastIconsContainer}"></cnx>`)}Vo(t){let e=[...t].filter((t=>Rt.includes(t.program))).filter((t=>(0,u.QM)(t.staticResource)||(0,u.QM)(t.htmlResource)||(0,u.QM)(t.iframeResource)));return e=(0,d.qy)("program",e.reverse()),e}$o(t){const{width:e,height:i,xPosition:s,yPosition:n,staticResource:r,htmlResource:o,iframeResource:a,iconViewTracking:h,iconClicks:c,duration:d,offset:l}=t,u={globalDomUtilsService:this.Kr,$container:this.jo,resource:r||o||a,iconClicks:c,width:e,height:i,xPosition:s,yPosition:n,iconViewTracking:h,duration:d,offset:l};switch(u.resource){case r:return new Mt(this.di,this.Pe,u);case o:return new Ot(this.di,this.Pe,u);case a:return new Lt(this.di,this.Pe,u)}}}class Dt{constructor(t,e,i,s,n,r){this.Jo=t,this.Re=e,this.De=i,this.Go=s,this.Ne=n,this.zo=r,this.Wo={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.Jo}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Go}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Go}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.Qe=new _.o(this.Re,this.De)}Yo(t){let e;return this.zo&&(e=[T.rU.AllowScripts,T.rU.AllowSameOrigin]),this.Qe.loadIframe({customHead:this.Wo.headTamplate,customHtml:this.Wo.bodyTamplate,container:t,customReportingLog:{heavyAdBlockTypeEnum:s.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.Ne},iframeClass:"omid-elem",title:P.$b,sandboxSettings:{isEnabled:this.zo,permissions:e}})}loadAdUnitIframe(t){return new Promise(((e,i)=>{this.Yo(t).then((t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),e(t)})).catch((t=>{i(t)}))}))}destroyAdUnit(){var t,e;try{const i=null===(e=null===(t=this.Qe.iframe)||void 0===t?void 0:t.contentWindow)||void 0===e?void 0:e.clearAll;i&&i()}catch(t){const{message:e,stack:i}=(0,f.W$)(t);(0,O.nF)({message:"AdManager_VPAIClient_destroyAdUnit",exception:e,callStack:i,level:O.D_.WARN,sessionId:this.De},{throttle:2,shouldSendMaxLog:!0})}this.Qe.destroy(),this.Qe=null}}var Nt;!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(Nt||(Nt={}));class Ft extends y{constructor(t,e,i,s,n,r,o,a){super(),this.yr=t,this.Re=e,this.De=i,this.Xo=s,this.Ne=n,this.yi=r,this.xn=o,this.zo=a,this.Qo=[],this.Zo=new Set,this.ta=new Set,this.ea=(t,e,i)=>{const s={url:t,playerHandles:i};this.ia(g.fI.AdClickThru,s)},this.ia=(t,e)=>{if(this.ta.add(t),!this.Zo.has(t))return t!==g.fI.AdImpression||this.ta.has(g.fI.AdLoaded)?void this.sa(t,e):((0,O.nF)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.Ne}_creativeId:${this.yi}_vpaidSrc:${this.yr}`,callStack:JSON.stringify((0,d.ee)(this.ta)),level:O.D_.WARN,sessionId:this.De},{throttle:1e3}),this.Zo.add(g.fI.AdLoaded),void this.sa(g.fI.AdLoaded,e))},this.sa=(t,e)=>{switch(t){case g.fI.AdError:this.Pe.next({type:g.fI.AdError,payload:{errorMessage:(0,u.HD)(e)?e:JSON.stringify(e),errorCode:C.Oq.GeneralVpaidError}});break;case g.fI.AdLoaded:this.Pe.next({type:g.fI.AdLoaded,payload:{skipOffset:(0,u.as)(e)?e.skipOffset:void 0}});break;case g.fI.AdImpression:this.Pe.next({type:g.fI.AdImpression,payload:{}});break;case g.fI.AdClickThru:this.Pe.next({type:g.fI.AdClickThru,payload:(0,u.as)(e)?e:{}});break;default:this.Pe.next({type:g.fI[t]})}}}initAd(t,e,i,s,n,r){try{this.Sn=t,this.An=e,this.$n=i,this.na=s,this.ra=n,this.oa=r,this.aa=new Dt(this.yr,this.Re,this.De,this.Xo,this.Ne,this.zo),this.ha=this.aa.loadAdUnitIframe(r.slot).then((t=>{this.ca(t)})).catch((t=>{this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.VpaidOnLoad,errorCode:C.Oq.GeneralVpaidError}})}))}catch(t){this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.VpaidOnLoad,errorCode:C.Oq.GeneralVpaidError}})}}startAd(){try{this.ta.has(g.fI.AdImpression)&&!this.Zo.has(g.fI.AdImpression)&&((0,O.nF)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.Ne}_creativeId:${this.yi}_vpaidSrc:${this.yr}`,callStack:JSON.stringify((0,d.ee)(this.ta)),level:O.D_.WARN,sessionId:this.De},{throttle:1e3}),this.Zo.add(g.fI.AdImpression),this.Pe.next({type:g.fI.AdImpression,payload:{}})),this.da.startAd()}catch(t){this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.WrapperStartAdError,errorCode:C.Oq.GeneralVpaidError}})}}stopAd(t){var e;null===(e=this.ha)||void 0===e||e.then((()=>{this.da?this.da.stopAd(t):(0,O.nF)({message:"stopAd",exception:t,level:O.D_.WARN,sessionId:this.De})}))}resizeAd(t,e,i){this.da.resizeAd(t,e,i)}pauseAd(){this.da.pauseAd()}resumeAd(){this.da.resumeAd(),this.xn===dt.M.Ios&&(0,S.UR)(this.oa.videoSlot)}expandAd(){this.da.expandAd()}collapseAd(){this.da.collapseAd()}skipAd(){this.da.skipAd()}getAdRemainingTime(){return this.da.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.da)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.da.getAdVolume()}setAdVolume(t){this.da.setAdVolume(t)}destroy(){var t;try{this.la(),this.Qo.length=0,this.da=null,null===(t=this.aa)||void 0===t||t.destroyAdUnit()}catch(t){const{message:e,stack:i}=(0,f.W$)(t);(0,O.nF)({level:O.D_.WARN,message:"AdManager_VpaidIntegrator_destroyAd",exception:e,callStack:i,sessionId:this.De})}}ca(t){const e=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof e){const i=e();this.da=i,this.pa(),this.fa(i)?i.initAd(this.Sn,this.An,this.$n,this.na,this.ra,{slot:t.adContainer,videoSlot:this.oa.videoSlot}):this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.VpaidInvalid,errorCode:C.Oq.GeneralVpaidError}})}else this.Pe.next({type:g.fI.AdError,payload:{errorMessage:g.RG.VpaidGetVpaidAdError,errorCode:C.Oq.MediaFileNotFound}})}pa(){Object.keys(g.fI).forEach((t=>{let e=this.ia.bind(this,g.fI[t]);g.fI[t]===g.fI.AdClickThru&&(e=this.ea),this.Qo.push({handler:e,event:t}),this.da.subscribe(e,t)}))}la(){this.Qo.forEach((t=>{this.da.unsubscribe(t.handler,t.event)}))}fa(t){return Object.keys((0,d.ti)(Nt)).every((e=>(0,u.mf)(t[Nt[e]])))}}var $t=i(3199),Vt=i(1280);const jt=["fb1bdb1d-9743-4237-94e3-35d254e13564","e9d12322-f412-4a4a-aacc-a0d36f91544c","cbee7f7d-b0ba-453b-a28f-a23bc304481e"],Ut=["omid"];class qt extends D{constructor(t,e,i){super(e,i),this.ma=t,this.di=e,this.settings=i,this.adSourceType=s.ProtoAdsourceTypeEnum.Unknown,this.wo=[],this.creativeId=i.vastResponse.creativeId,this.ga=tt.h.getSessionChildContainer(this.settings.sessionId).resolve(Vt.G)}initAd(t,e,i,n,r,o,a){try{super.initAd(t,e,i,n,r,o,a),(0,st.A)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.linearClickThrough).then((r=>{var o;if(r)return void this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.DomainBlocked,errorCode:C.Oq.GeneralError}});if(this.va=this.ya(t,this.mi),null===this.va)return void this.Ri({type:g.fI.AdError,payload:{errorMessage:g.RG.VastUnsupportedMedia,errorCode:C.Oq.MediaFileNotFound}});(null===(o=this.va.src)||void 0===o?void 0:o.includes(Pt.n.endPoints.base.video))&&(this.va.src=this.Xi.appendParamsToUrl(this.va.src)),this.adMediaType=this.va.type,this.va.getMediaFileType()===C.y$.Video?(this.ba=new wt(this.settings.globalDomUtilsService,this.va.src,this.mi,this.settings.os,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.vastResponse.linearClickThrough,this.settings.shouldLoopAdWhenFinished,this.settings.sessionId),this.adSourceType=s.ProtoAdsourceTypeEnum.VastMedia):(this.ba=new Ft(this.va.src,this.settings.globalDomUtilsService,this.settings.sessionId,this.Yi,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os,this.ma.shouldEmbedVpaidInSafeIframe),this.adSourceType=s.ProtoAdsourceTypeEnum.Vpaid),(0,d.BZ)(this.settings.vastResponse.icons)&&(this.Ia=new Bt(this.gi,this.settings.vastResponse.icons,this.settings.globalDomUtilsService,this.di,this.ba.onVpaidEvent)),this.wo.push(this.ba.onVpaidEvent.subscribe((t=>{var e;if(t.type===g.fI.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset,t.payload.containers={slot:this.Le,videoSlot:this.mi},t.payload.verificationScriptResources=this.settings.vastResponse.verifications.filter((t=>{var e;return(0,d.d3)(null===(e=t.javaScriptResource)||void 0===e?void 0:e.apiFramework,Ut)})).map((t=>({javaScriptResource:t.javaScriptResource.url,vendor:t.vendor,verificationParameters:t.verificationParameters,trackingEvents:t.trackingEvents})))),t.type===g.fI.AdClickThru){this.wa=t.payload.url;const e=t.payload.url||this.settings.vastResponse.linearClickThrough;e&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(e,St.bS.Blank)}t.type===g.fI.AdStarted&&(null===(e=this.Ia)||void 0===e||e.initIcons()),t.type===g.fI.AdError&&(this.Hi=t.payload.errorCode),this.Ri(t)})));const a={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.ba.initAd(t,e,i,n,a,{slot:this.Le,videoSlot:this.mi})})).catch((t=>{this.Pa(t)}))}catch(t){this.Pa(t)}}startAd(){try{super.startAd();const t=this.settings.adLoadedPayload.payload.vastVerifications;if(!(0,d.BZ)(t))return void this.ba.startAd();this.ga.isOmsdkFullSupport?this.wo.push(this.ga.omidResourcesReady.pipe((0,Et.P)((t=>t))).subscribe((()=>{this.ba.startAd()})),this.ga.verificationNotExecuted.subscribe((()=>{this._a()}))):(this._a(),this.ba.startAd())}catch(t){const e=this.Hi||C.Oq.GeneralLinearError;this.Hi=e,this.Ri({type:g.fI.AdError,payload:{errorCode:e,errorMessage:g.RG.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.ba?this.ba.stopAd(t):(0,O.nF)({message:"stopAd",exception:t,level:O.D_.WARN,sessionId:this.settings.sessionId})}resizeAd(t,e,i){try{this.ba.resizeAd(t,e,i)}catch(t){this._s("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.ba.pauseAd()}catch(t){this._s("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ba.resumeAd()}catch(t){this._s("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.ba.expandAd()}catch(t){this._s("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.ba.collapseAd()}catch(t){this._s("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.ba.skipAd()}catch(t){this._s("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.ba.getAdRemainingTime()}catch(t){return this._s("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.ba&&this.ba.getAdDuration()||Math.round(this.settings.vastResponse.duration/K.s_)}catch(t){return this._s("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.ba.getAdVolume()}catch(t){return this._s("VastBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){let t=0,e=0;return this.ba instanceof wt?(t=this.ba.getAdMediaWidth(),e=this.ba.getAdMediaHeight()):(t=this.va.width,e=this.va.height),{width:t,height:e}}setAdVolume(t){try{super.setAdVolume(t),this.ba.setAdVolume(t)}catch(t){this._s("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.va)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/K.s_}ps(t){const e=super.ps(t);return this.Ta(e)}us(t){const e=super.us(t);return this.Ta(e)}Ki(){var t,e;if(!this.settings.shouldLoopAdWhenFinished)try{super.Ki(),(0,L.i)(this.wo),null===(t=this.ba)||void 0===t||t.destroy(),null===(e=this.Ia)||void 0===e||e.destroy()}catch(t){this._s("VastBidAdaptor","_destroy",(0,f.W$)(t))}}Ta(t){var e;return t.payload.adSourceData.name=null===(e=this.settings.vastResponse)||void 0===e?void 0:e.adTitle,t.payload.clickThroughUrl=this.wa||this.settings.vastResponse.linearClickThrough,t}Sa(t,e){return t.filter((t=>t.getMediaFileType()===C.y$.Video))}ya(t,e){const i=this.Sa(this.settings.vastResponse.mediaFiles,e),s=i.filter((t=>"video/mp4"===t.type)),n=this.settings.vastResponse.mediaFiles.filter((t=>t.getMediaFileType()===C.y$.Javascript));return this.Aa()&&this.ka()&&n.length?(0,c.qD)(n,t):s.length?(0,c.qD)(s,t):i.length?(0,c.qD)(i,t):n.length?(0,c.qD)(n,t):null}ka(){const{advertiserLineItemId:t}=this.settings.adManagerLineItem.protoLineItem;return jt.includes(t)}Aa(){const t=this.settings.vastResponse.extensions.filter((t=>t.type===C.Uq.AdVerifications));return(0,d.BZ)(t)||(0,d.BZ)(this.settings.vastResponse.verifications)}Pa(t){const e=this.Hi||C.Oq.GeneralLinearError;this.Hi=e,this.Ri({type:g.fI.AdError,payload:{errorCode:e,errorMessage:g.RG.AdaptorInitAdError+`_${t.message}`}})}_a(){$t.Mz.trackError(this.settings.vastTracker.adError,this.settings.adMacroReplacer,this.settings.adManagerLineItem.protoLineItem,this.settings.callingState,this.settings.plcmt,C.Oq.VerificationUnitNotExecuted)}}class Ht{constructor(t){this.data=t,(0,u.QM)(this.data.cnxBidId)||(this.data.cnxBidId=(0,f.qs)())}}},7225:(t,e,i)=>{"use strict";var s;i.d(e,{t:()=>s}),function(t){t[t.Rtb=1]="Rtb",t[t.HeaderBidder=2]="HeaderBidder",t[t.Tam=3]="Tam"}(s||(s={}))},5919:(t,e,i)=>{"use strict";i.d(e,{T:()=>r});var s=i(289),n=i(7225);const r={[s.ProtoCreativeTypeEnum.Rtb]:n.t.Rtb,[s.ProtoCreativeTypeEnum.HeaderBidder]:n.t.HeaderBidder,[s.ProtoCreativeTypeEnum.Tam]:n.t.Tam,[s.ProtoCreativeTypeEnum.TamDeal]:n.t.Tam,[s.ProtoCreativeTypeEnum.TamPrivateAuction]:n.t.Tam}},9592:(t,e,i)=>{"use strict";var s;i.d(e,{f:()=>s}),function(t){t.HandlingSdkUrl="HandlingSdkUrl",t.NetworkRequestUrl="NetworkRequestUrl",t.InvalidCreativeType="InvalidCreativeType",t.XmlInvalidString="XmlInvalidString",t.XmlParseGeneral="XmlParseGeneral",t.XmlInvalidTree="XmlInvalidTree",t.XmlInvalidAd="XmlInvalidAd",t.XmlAdaptorWrapperLimit="XmlAdaptorWrapperLimit",t.VastVersionNotSupported="VastVersionNotSupported",t.VastMediaFilesNotSupported="VastMediaFilesNotSupported",t.HTMLUnknownMimeType="HTMLUnknownMimeType",t.HTMLNotEnoughData="HTMLNotEnoughData",t.ImaAdsManagerInit="ImaAdsManagerInit",t.ImaVastEmptyResponse="ImaVastEmptyResponse",t.ImaRequestException="ImaRequestException",t.ImaTimeout="ImaTimeout",t.ImaInvalidResponse="ImaInvalidResponse",t.InvalidCreativeUrl="InvalidCreativeUrl",t.BidIsNotTargetingAllowedEver="BidIsNotTargetingAllowedEver",t.ExternalSdkTimeout="ExternalSdkTimeout",t.ExternalSdkInvalidResponse="ExternalSdkInvalidResponse",t.VastContainsBannedUrls="VastContainsBannedUrls"}(s||(s={}))},7689:(t,e,i)=>{"use strict";i.d(e,{Jd:()=>y,lU:()=>s,cs:()=>n});var s,n,r=i(6716);!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(s||(s={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(n||(n={}));var o=i(5650),a=i(4798);const h=["octob.azureedge.net/oc.js","lzi.azureedge.net/lz.js","tinlc.azureedge.net/pt.js","bm-rb.azureedge.net/rb.js","foluo.azureedge.net/fo.js","vpv-ger.azureedge.net/VpaidVideoAd1.js"];class c{constructor(){this.Ea=["viralgains","serving-sys.com","commercialadsdistributor",...h],this.xa=["beachfrontmedia","commercialadsdistributor",...h],this.Ca=["commercialadsdistributor",...h],this.Oa=["pixel.clearstream.tv","pixel.clrstm.com",...h],this.Ma=new r.x,this.La=new r.x}get onMalwareDetected(){return this.Ma.asObservable()}get onBadUriDetected(){return this.La.asObservable()}enforce(t,e){if((0,a.cL)(t)){this.Ba=e;try{this.Ra(t),this.Da(t),this.Na(t),this.Fa(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}Va(t,e,i,s){t.every((t=>!i.includes(t)))&&!e.getAttribute("cnx")&&(e.setAttribute("cnx","true"),this.La.next({referenceId:this.Ba,enforcementMessage:`${s}-${e}`}))}Ra(t){const e=t.getAttribute("src");e&&(this.Ea.forEach((t=>{e.includes(t)&&this.Ma.next({referenceId:this.Ba,enforcementMessage:`malware-${t}`})})),this.Va(["//","about:blank","about:self","javascript:"],t,e,"iframe"))}Da(t){(0,o.Sz)(t.contentDocument.getElementsByTagName("script")).forEach((t=>{const e=t.getAttribute("src");e&&(this.xa.forEach((t=>{e.includes(t)&&this.Ma.next({referenceId:this.Ba,enforcementMessage:`malware-${t}`})})),this.Va(["//"],t,e,"script"))}))}Na(t){(0,o.Sz)(t.contentDocument.getElementsByTagName("a")).forEach((t=>{const e=t.getAttribute("href");e&&this.Ca.forEach((t=>{e.includes(t)&&this.Ma.next({referenceId:this.Ba,enforcementMessage:`malware-${t}`})}))}))}Fa(t){(0,o.Sz)(t.contentDocument.getElementsByTagName("img")).forEach((t=>{const e=t.getAttribute("src");e&&this.Oa.forEach((t=>{e.includes(t)&&this.Ma.next({referenceId:this.Ba,enforcementMessage:`malware-${t}`})}))}))}}var d=i(3020),l=i(4261);class u{constructor(t,e){this.ja=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.Ua=t;try{this.ja(this.Ua)||this.$a(this.Ua)}catch(t){(0,l.nF)({sessionId:e,message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:l.D_.CRITICAL})}}$a(t){(0,d.ML)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,e){if((0,a.cL)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:e}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:e})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const e=this.ja(this.Ua);e.eventListeners[t]&&(e.eventListeners[t].forEach((t=>{t.element.removeEventListener(t.type,t.handler,t.options)})),e.eventListeners[t]=[]),e.setInterval[t]&&(e.setInterval[t].forEach((t=>this.Ua.clearInterval(t))),e.setInterval[t]=[]),e.setTimeout[t]&&(e.setTimeout[t].forEach((t=>this.Ua.clearTimeout(t))),e.setTimeout[t]=[])}catch(t){}}}const p="cnxpl-vl",f="cnxpl-rf";class m{constructor(){this.qa=!0,this.Ha=new r.x,this.Ja=[],this.Ga=t=>{if(this.qa)return;const e=t.target;if(e.volume>0&&(e.volume=0,!e.paused)){const t=e.getAttribute(f);this.Ha.next(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this.Ha.asObservable()}enforce(t,e){let i=t;(0,a.cL)(t)&&(i=t.contentDocument||t.contentWindow.document),this.qa=!1;(0,o.Sz)(i.getElementsByTagName("video")).forEach((t=>{this.za(t,e)}))}stopEnforce(){this.qa=!0}clearEnforce(t){try{const e=[];this.Ja=this.Ja.filter((i=>i.getAttribute(f)!==t||(e.push(i),!1))),e.forEach((t=>{t.removeAttribute(p),t.removeAttribute(f),t.removeEventListener("volumechange",this.Ga)}))}catch(t){}}za(t,e){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(p,"true"),t.setAttribute(f,e),t.addEventListener("volumechange",this.Ga),this.Ja.push(t))}}class g{Wa(t){const e=function(){};t.Element.prototype.scrollIntoView=e,t.Element.prototype.scrollIntoViewIfNeeded=e,t.scroll=e,t.scrollTo=e,t.scrollBy=e}enforce(t){(0,a.cL)(t)&&this.Wa(t.contentWindow)}stopEnforce(){}clearEnforce(){}}var v=i(9600);class y{constructor(t,e,i,o){if(this.Ya=i,this.Xa=null,this.Qa=new Map,this.Ka=n.None,this.Za=300,this.Mi=[],this.th=new Map,this.ws=new r.x,this.Qa.set(n.MemoryLeak,new u(e,o)),i||this.Qa.set(n.ScrollHijack,new g),!t){const t=new m;this.Qa.set(n.Mute,t),this.Mi.push(t.onVolumeDetected.subscribe((t=>{this.eh(s.VOLUME_DETECTED,t,"")})))}const a=new c;this.Mi.push(a.onBadUriDetected.subscribe((t=>{this.eh(s.BADURI_DETECTED,t.referenceId,t.enforcementMessage)})),a.onMalwareDetected.subscribe((t=>{this.eh(s.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)}))),this.Qa.set(n.Malware,a)}get onEnforcerEvent(){return this.ws.asObservable()}registerContainer(t,e){this.th.get(t)||this.th.set(t,e)}deregisterContainer(t){this.th.get(t)&&(this.Qa.forEach((e=>{e.clearEnforce(this.th.get(t))})),this.th.delete(t),this.th.size||this.stop(n.All))}start(t){this.Ya&&(t^=n.ScrollHijack),this.Ka|=t,null===this.Xa&&(this.Xa=setInterval((()=>{try{this.th.forEach(((t,e)=>{this.sh(e,t)}))}catch(t){}}),this.Za))}stop(t){this.Ka&=~t,this.Ka===n.None&&(clearInterval(this.Xa),this.Xa=null),this.Qa.forEach(((e,i)=>{t&i&&e.stopEnforce()}))}destroy(){this.stop(n.All),(0,v.i)(this.Mi),this.th.forEach(((t,e)=>{this.deregisterContainer(e)}))}sh(t,e){(0,o.Sz)(t.getElementsByTagName("iframe")).forEach((t=>{try{this.sh(t,e)}catch(t){}})),this.Qa.forEach(((i,s)=>{this.Ka&s&&i.enforce(t,e)}))}eh(t,e,i){let s;this.th.forEach(((t,i)=>{t===e&&(s=i)})),this.ws.next({message:i,type:t,detectedContainer:s})}}},1714:(t,e,i)=>{"use strict";var s,n,r,o;i.d(e,{Ek:()=>s,lc:()=>n,gx:()=>r,aB:()=>o}),function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-text",t.AdDurationLabel="cnx-ad-duration",t.AdTitleLabel="cnx-ad-title",t.AdMarkerTitleContainer="cnx-ad-marker-title",t.AdMarkerTitleText="cnx-ad-title-text",t.CardImage="cnx-ad-card-image",t.CardTitle="cnx-ad-card-title",t.AdUiContent="cnx-ui-ad-content",t.InAd="cnx-ui-ad"}(s||(s={})),function(t){t.ShowLinearEvent="showLinearEvent",t.HideLinearEvent="hideLinearEvent",t.PauseLinearEvent="pauseLinearEvent",t.ResumeLinearEvent="resumeLinearEvent",t.SkipLinearEvent="skipLinearEvent"}(n||(n={})),function(t){t.ShowNonLinearEvent="showNonLinearEvent",t.HideNonLinearEvent="hideNonLinearEvent"}(r||(r={})),function(t){t.ForceStopAdSlot="forceStopAdSlot",t.ForceStopAdPod="forceStopAdPod",t.ChangeVideo="changeVideo"}(o||(o={}))},9021:(t,e,i)=>{"use strict";i.d(e,{lc:()=>s.lc,gx:()=>s.gx,aB:()=>s.aB,P9:()=>ln,LO:()=>mn,a:()=>yn});var s=i(1714),n=i(6716),r=i(289),o=i(9069),a=i(5204),h=i(7423),c=i(5106),d=i(9906),l=i(9600);class u{constructor(t,e,i,s,r,h,c,l,u,p,f){this.nh=t,this.rh=e,this.oh=i,this.ah=s,this.hh=r,this.dh=h,this.lh=c,this.ph=l,this._appSettings=u,this.Xi=p,this.mh=f,this.gh=o.zc.Normal,this.Mi=[],this.yh=new n.x,this.Pe=new n.x,this.bh=new n.x,this.wh=new n.x,this._h=new n.x,this.Th=new n.x,this.Sh=new n.x,this.Ah=new n.x,this.kh=new n.x,this.Eh=new n.x,this.xh=new n.x,this.Ch=new n.x,this.Oh=new n.x,this.Mh=this.Lh(),this.Bh();const m=d.h.getSessionChildContainer(this.ph.config.sessionId).resolve(a.k);this.Rh=this.Dh(m),this.Nh(),this.Fh=this.Vh(m),this.Fh&&this.jh(),this.rh&&this.disableAdvertising()}inFloatingChanged(t){this.nh=t,this.Mh.inFloatingChanged(t),this.Rh.updateFloatingState(t)}canPrefetchAds(t){this.Mh.canPrefetchAds(t)}hasAdsEligibleForFill(){return this.Mh.hasAdsEligibleForFill()}$h(t,e){const i=[{container:this.qh,width:t,height:e,type:r.ProtoAdType.Overlay},{container:this.qh,width:t,height:e,type:r.ProtoAdType.Video},{container:this.Gh,width:t,height:e,type:r.ProtoAdType.Nonlinear}];return this.Gh||i.pop(),i}Bh(){this.Mi.push(this.Mh.onAdsEnable.subscribe((t=>{this.yh.next(t)})),this.Mh.onPrefetchStart.subscribe((()=>{this.bh.next()})))}jh(){var t,e,i;this.Mi.push(null===(t=this.Fh)||void 0===t?void 0:t.onVpaidEvent.subscribe((t=>{this.Pe.next(t)})),null===(e=this.Fh)||void 0===e?void 0:e.onNonLinearEvent.subscribe((t=>{t.type===s.gx.ShowNonLinearEvent&&this.linearInImpression&&this.Fh.pause(),this.Eh.next(t)})),null===(i=this.Fh)||void 0===i?void 0:i.onExperienceEvent.subscribe((t=>{this.xh.next({type:t.type,payload:t.payload})})),this.Mh.onNonlinearImpressionPrice.subscribe((t=>{this.Ch.next(t)})),this.Mh.onNonlinearImpressionRevenue.subscribe((t=>{this.Oh.next(t)})))}Nh(){this.Mi.push(this.Rh.onVpaidEvent.subscribe((t=>{this.Pe.next(t)})),this.Rh.onUiComponentEvent.subscribe((t=>{this._h.next(t)})),this.Rh.onExperienceEvent.subscribe((t=>{this.Th.next({type:t.type,payload:t.payload})})),this.Rh.onLinearEvent.subscribe((t=>{var e;t.type===s.lc.ShowLinearEvent&&(null===(e=this.Fh)||void 0===e||e.pause()),this.wh.next(t)})),this.Mh.onLinearImpressionPrice.subscribe((t=>{this.Sh.next(t)})),this.Mh.onLinearImpressionRevenue.subscribe((t=>{this.Ah.next(t)})),this.Mh.onLinearNoFill.subscribe((()=>{this.kh.next()})))}zh(t,e,i){this.Mh.initAd(t,e,this.gh,1,i,this.$h(t,e),this.ph)}setLineItemMetadata(t,e){this.Mh.setLineItemMetadata(t,e)}startConnatixAuction(t){this.Mh.startConnatixAuction(t)}adStateChange(t,e){var i;this.Rh.adStateChange(t,e),null===(i=this.Fh)||void 0===i||i.adStateChange(t,e)}contentPlaybackStateChanged(t){var e;null===(e=this.Fh)||void 0===e||e.contentPlaybackStateChanged(t)}disableAds(t,e){this.Mh.disableAds(t,e)}enableAds(t){this.Mh.enableAds(t)}disableAdvertising(){this.Mh.disableAdvertising()}enableAdvertising(){this.Mh.enableAdvertising()}start(t,e,i,s,n=!1){n&&this.startNonLinear(),this.startLinear(i,s),this.zh(t,e,i)}stopAd(t){var e;this.Rh.stopAd(t),null===(e=this.Fh)||void 0===e||e.stopAd(t)}play(){this.Rh.play()}pause(){var t;this.Rh.pause(),null===(t=this.Fh)||void 0===t||t.pause()}togglePlay(t=!1){this.Rh.togglePlay(t)}resumeWithoutUserInteraction(t){var e;this.Rh.resumeWithoutUserInteraction(),null===(e=this.Fh)||void 0===e||e.resumeWithoutUserInteraction(t)}resizeAd(t,e,i,s){var n;this.setVastViewMode(i),this.Rh.resizeAd(t,e),null===(n=this.Fh)||void 0===n||n.resizeAd(t,e,s)}setPlayerOrientation(t){this.Mh.setPlayerOrientation(t)}updateJsQueryTargeting(t){this.Mh.updateJsQueryTargeting(t)}removeJsQueryTargeting(t){this.Mh.removeJsQueryTargeting(t)}setVastViewMode(t){this.gh=t,this.Mh.setVastViewMode(t)}contentChanged(){this.Mh.onContentChange()}newLinearAdOpportunity(t){this.Mh.newLinearAdOpportunity(t)}destroy(){var t,e,i;(0,l.i)(this.Mi),this.Rh.destroy(),null===(t=this.Fh)||void 0===t||t.destroy(),null===(e=this.Mh)||void 0===e||e.disableAds(h.k.LINEAR,{disableReason:c.m.Unknown}),null===(i=this.Mh)||void 0===i||i.disableAds(h.k.NONLINEAR,{disableReason:c.m.Unknown}),this.Mh.destroy(this.oh.sessionId)}get onAdsEnable(){return this.yh.asObservable()}get onVpaidEvent(){return this.Pe.asObservable()}get onPrefetchStart(){return this.bh.asObservable()}startNonLinear(){var t;null===(t=this.Fh)||void 0===t||t.start()}contentEnded(){var t;null===(t=this.Fh)||void 0===t||t.pause()}get onNonLinearEvent(){return this.Eh.asObservable()}get onNonLinearExperienceEvent(){return this.xh.asObservable()}get onNonLinearImpressionPrice(){return this.Ch.asObservable()}get onNonLinearImpressionRevenue(){return this.Oh.asObservable()}get nonLinearInImpression(){return!!this.Fh&&this.Fh.inImpression}get Gh(){var t;return null===(t=this.Fh)||void 0===t?void 0:t.adContainer}startLinear(t,e){this.Rh.start(t,e)}setMediaRestrictions(t){this.Mh.setMediaRestrictions(t)}getNewLinearAdOpportunity(){return this.Mh.getNewLinearAdOpportunity()}getLinearVolume(){return this.Rh.getVolume()}setLinearVolume(t){this.Rh.setVolume(t)}increaseVolume(t,e=!1){this.Rh.increaseVolume(t,e)}decreaseVolume(t,e=!1){this.Rh.decreaseVolume(t,e)}toggleMute(t=!1){this.Rh.toggleMute(t)}hideLinear(){this.Rh.hide()}showLinear(){this.Rh.show()}updateContinueReadingCard(){this.Rh.updateContinueReadingCard()}setContinueReadingCard(t){this.Rh.setContinueReadingCard(t)}hideContinueReadingCard(){this.Rh.hideContinueReadingCard()}setAdMarkerTitle(t){this.Rh.setAdMarkerTitle(t)}hideAdMarkerTitle(){this.Rh.hideAdMarkerTitle()}enterAdPodLoadingState(){this.Rh.enterAdPodLoadingState()}setAdLoadingBackgroundUrl(t){this.Rh.setAdLoadingBackgroundUrl(t)}setCustomMacros(t){this.Mh.setCustomMacros(t)}enablePrefetchForLinearity(t){this.Mh.enablePrefetchForLinearity(t)}get onLinearEvent(){return this.wh.asObservable()}get onLinearUiComponentEvent(){return this._h.asObservable()}get onLinearExperienceEvent(){return this.Th.asObservable()}get onLinearImpressionPrice(){return this.Sh.asObservable()}get onLinearImpressionRevenue(){return this.Ah.asObservable()}get onLinearNoFill(){return this.kh.asObservable()}get linearInImpression(){return this.Rh.inImpression}get qh(){return this.Rh.adContainer}get Wh(){return this.Rh.secondaryAdContainer}get linearAdUserInterface(){return this.Rh.adUserInterface}get onFullcreenChange(){return this.Rh.onFullcreenChange}get linearAdInWin(){return this.Rh.adInWin}get firstLinearAdShown(){return this.Rh.firstAdShown}get inAdPodLoadingState(){return this.Rh.inAdPodLoadingState}getLinearAdContainerWidth(){return this.Rh.getMainAdContainerWidth()}userInteraction(t){this.Mh.userInteraction(t)}get sessionId(){return this.oh.sessionId}}var p=i(9127),f=i(7878),m=i(6798),g=i(7845),v=i(2566);var y=i(8474);function b(t,e,i){return void 0===i&&(i=1/0),(0,y.m)(e)?b((function(i,s){return(0,p.U)((function(t,n){return e(i,t,s,n)}))((0,f.Xf)(t(i,s)))}),i):("number"==typeof e&&(i=e),(0,m.e)((function(e,s){return function(t,e,i,s,n,r,o,a){var h=[],c=0,d=0,l=!1,u=function(){!l||h.length||c||e.complete()},p=function(t){return c<s?m(t):h.push(t)},m=function(t){r&&e.next(t),c++;var a=!1;(0,f.Xf)(i(t,d++)).subscribe((0,v.x)(e,(function(t){null==n||n(t),r?p(t):e.next(t)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var t=function(){var t=h.shift();o?(0,g.f)(e,o,(function(){return m(t)})):m(t)};h.length&&c<s;)t();u()}catch(t){e.error(t)}})))};return t.subscribe((0,v.x)(e,p,(function(){l=!0,u()}))),function(){null==a||a()}}(e,s,t,i)})))}var I=i(278);var w=i(1545),P=i(2457);function T(t,e){return void 0===e&&(e=0),(0,m.e)((function(i,s){i.subscribe((0,v.x)(s,(function(i){return(0,g.f)(s,t,(function(){return s.next(i)}),e)}),(function(){return(0,g.f)(s,t,(function(){return s.complete()}),e)}),(function(i){return(0,g.f)(s,t,(function(){return s.error(i)}),e)})))}))}function _(t,e){return void 0===e&&(e=0),(0,m.e)((function(i,s){s.add(t.schedule((function(){return i.subscribe(s)}),e))}))}var S=i(1480);var A=i(9768);function x(t,e){if(!t)throw new Error("Iterable cannot be null");return new S.y((function(i){(0,g.f)(i,e,(function(){var s=t[Symbol.asyncIterator]();(0,g.f)(i,e,(function(){s.next().then((function(t){t.done?i.complete():i.next(t.value)}))}),0,!0)}))}))}var k=i(1764),E=i(3841),C=i(5685),O=i(1837),L=i(8430),M=i(8729),R=i(8671);function B(t,e){if(null!=t){if((0,k.c)(t))return function(t,e){return(0,f.Xf)(t).pipe(_(e),T(e))}(t,e);if((0,C.z)(t))return function(t,e){return new S.y((function(i){var s=0;return e.schedule((function(){s===t.length?i.complete():(i.next(t[s++]),i.closed||this.schedule())}))}))}(t,e);if((0,E.t)(t))return function(t,e){return(0,f.Xf)(t).pipe(_(e),T(e))}(t,e);if((0,L.D)(t))return x(t,e);if((0,O.T)(t))return function(t,e){return new S.y((function(i){var s;return(0,g.f)(i,e,(function(){s=t[A.h](),(0,g.f)(i,e,(function(){var t,e,n;try{e=(t=s.next()).value,n=t.done}catch(t){return void i.error(t)}n?i.complete():i.next(e)}),0,!0)})),function(){return(0,y.m)(null==s?void 0:s.return)&&s.return()}}))}(t,e);if((0,R.L)(t))return function(t,e){return x((0,R.Q)(t),e)}(t,e)}throw(0,M.z)(t)}function D(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(0,P.yG)(t),s=(0,P.ae)(t,1/0),n=t;return n.length?1===n.length?(0,f.Xf)(n[0]):function(t){return void 0===t&&(t=1/0),b(I.y,t)}(s)(function(t,e){return e?B(t,e):(0,f.Xf)(t)}(n,i)):w.E}var N,F;!function(t){t[t.InsidePlayer=0]="InsidePlayer",t[t.OutsidePlayer=1]="OutsidePlayer"}(N||(N={})),function(t){t.Above="above",t.Below="below"}(F||(F={}));var $=i(2300);var V=i(8576),j=i(1599),U=i(7263),q=i(3020),H=i(4798);class J extends U.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Qh=this.jo.getElementsByClassName(j.mr.BackgroundImg)[0],this.Kh=this.jo.getElementsByClassName(j.mr.Icon)[0],this.Kh.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"/></svg>',this.Zh=this.jo.getElementsByClassName(j.mr.ButtonContainer)[0];const t=this.jo.getElementsByClassName(j.mr.Button)[0];this.tc=this.Re.createElementByString(`<a class="${j.mr.Wrapper}" href="#">`),this.tc.target=V.bS.Blank,this.tc.appendChild(t),this.Zh.innerHTML="",this.Zh.appendChild(this.tc),this.ec=this.jo.getElementsByClassName(j.mr.InfoContainer)[0],this.ic=this.jo.getElementsByClassName(j.mr.FallbackContainer)[0],this.rc=this.jo.getElementsByClassName(j.mr.SlotCountText)[0]}setBackgroundImg(t){(0,H.QM)(t)?((0,q.IV)(this.Qh,j.Gj.DisplayNone),this.Qh.src=t):(0,q.cn)(this.Qh,j.Gj.DisplayNone)}setClickUrl(t){if(!(0,H.QM)(t))return(0,q.Ho)(this.ic),void(0,q.MV)(this.ec);(0,q.Ho)(this.ec),(0,q.MV)(this.ic),this.tc.href=t}setFallbackText(t,e){const i=t||1,s=e||1;this.rc.innerHTML=`Loading ad ${i}/${s}`}}var G=i(9762),z=i(7309);class W extends z.h{constructor(){super(...arguments),this.eventList=[G.C[G.C.SkipAd],...this.eventList],this.oc=-1,this.ac=-1}initComponent(){super.initComponent(),this.hideComponent(),this.hc=this.jo.getElementsByTagName("cnx-span")[0],this.hc.innerHTML="Ad",this.dc=this.jo.querySelectorAll(`.${j.Hs.Timer} svg`)[0],this.jo.setAttribute("aria-label","Skip Ad")}setSecondsUntilSkip(t){this.oc=Math.ceil(t),this.ac=-1,this.oc>0&&(0,q.T7)(this.dc,{"animation-duration":this.oc+"s"})}tickDown(t){const e=this.oc-Math.floor(t);if(e<0||0===this.ac)return;const i=(0,q.pv)(this.jo,j.Hs.InTimer);this.ac=e,0===this.ac?(i&&(0,q.IV)(this.jo,j.Hs.InTimer),this.hc.innerHTML="Ad"):(i||(0,q.cn)(this.jo,j.Hs.InTimer),this.hc.innerHTML=`in ${this.ac}s`)}get tooltip(){}onClickHandler(){0===this.ac&&this.mediator.publish(this,G.C[G.C.SkipAd])}}const Y=`<cnx class="cnx-ad-skip-button cnx-ui-btn" role="button" tabindex="0">\n    <cnx class="cnx-icon-button">\n        <cnx class="cnx-skip-ad-text">\n            Skip&nbsp;<cnx-span></cnx-span>\n        </cnx>\n        <cnx class="cnx-skip-ad-icon">\n            ${i(9040)}\n        </cnx>\n    </cnx>\n    <cnx class="cnx-timer-loader">\n        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"><circle class="cnx-svg-circle-stroke" cx="18" cy="18" r="17"/></svg>\n\n    </cnx>\n</cnx>`;var X=i(1277),Q=i(9391),K=i(3537);class Z extends K.A{constructor(t,e,i,s,n,r={}){super(t,e,i,n,r),this.fc=s,this.mc={[$.r.VolumeControls]:t=>new X.N(t,this.Re,Q.Z,this),[$.r.AdLoadingScreen]:t=>new J(t,this.Re,this.gc,'<cnx class="cnx-pod-loading-screen-container"><img alt="Loading Pods" class="cnx-pod-loading-background"><cnx class="cnx-pod-loading-info"><cnx class="cnx-pod-open-new-icon"></cnx><cnx class="cnx-pod-visit-website-text"><cnx-span>Visit Advertiser website</cnx-span></cnx><cnx class="cnx-pod-read-more-container"><cnx-span class="cnx-pod-read-more-btn">GO TO PAGE</cnx-span></cnx></cnx><cnx class="cnx-pod-loading-fallback"><cnx class="cnx-pod-loading-spinner"></cnx><cnx-span class="cnx-pod-slot-count-text"></cnx-span></cnx></cnx>'),[$.r.SkipAdButton]:t=>new W(t,this.Re,this.gc,Y,this.Qs.isMobile),[$.r.FloatingCloseButton]:t=>{var e;if(!(null===(e=this.Re.global.cnxAsyncChunks)||void 0===e?void 0:e.litUI))return;const{litFloatingCloseOldUIWrapper:i}=this.Re.global.cnxAsyncChunks.litUI;return new i(t,{floatingCloseButtonTooltipPosition:this.fc.floatingCloseButtonTooltipPosition||F.Above,tooltipTextColor:this.Qs.tooltipTextColor,tooltipBackgroundColor:this.Qs.tooltipBackgroundColor})}},this.vc=t=>e=>{var i,s;return null===(s=(i=this.mc)[t])||void 0===s?void 0:s.call(i,e)}}createComponent(t,e){return this.vc(t)(e)||super.createComponent(t,e)}}var tt=i(9490),et=i(4151),it=i(8395);var st=i(7405),nt=i(5356);class rt{constructor(t,e,i){this.wx=t,this.Re=e,this._x=[],this.Tx={top:12,bottom:24,margin:4},this.Sx=!1,i&&(this.Sx=!0)}kx(){this.Ex=this.Re.getElementCoordinates(this.wx.parentElement)}xx(t,e){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=e}Cx(t){if(!t||!t.tooltip||this.Sx)return;if(this._x.find((e=>e.component===t)))return;const e=this.Re.createElementByString('<cnx class="cnx-tooltip-holder cnx-color-tt-bg"><cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx></cnx>');this.xx(e,t.tooltip),this.kx();const i=t.getCoordinates();let s=!1;const{clientY:n,height:r}=i,{clientY:o,height:a}=this.Re.getElementCoordinates(this.wx);!(0,q.pv)(this.wx,j.s6.ShowControls)&&!(0,nt.mb)(this.wx)||n<=o+a/2-r?i.clientY+=this.Tx.top:(i.clientY-=this.Tx.bottom,s=!0),this.wx.appendChild(e),(0,st.p)(e,i,this.Ex,{alignMiddle:!0,alignTop:s,forceRight:!0,distanceFromMargin:this.Tx.margin}),(0,q.Tp)(e),(0,q.cn)(e,j.hQ.OpacityInTransition),this._x.push({component:t,domElement:e})}Lx(t){if(!t.tooltip)return;const e=this._x.find((e=>e.component===t));if(!e)return;const i=e.domElement;this.wx.removeChild(i),this._x=this._x.filter((e=>e.component!==t))}Bx(t){if(!t.tooltip)return;const e=this._x.find((t=>t.component===this.Rx));e&&this.xx(e.domElement,t.tooltip)}Nx(){this.Rx=null,this._x.forEach((t=>this.Lx(t.component)))}removeActiveTooltip(){this.Rx&&this.Lx(this.Rx)}setDistanceValues(t){this.Tx=Object.assign(Object.assign({},this.Tx),t)}hoverStart(t){this.removeActiveTooltip(),this.Rx=t,this.Cx(t)}hoverEnd(t){this.Rx=null,this.Lx(t)}stateChanged(t){this.Rx===t&&this.Bx(t)}disableTooltips(){this.Sx=!0,this.Nx()}enableTooltips(){this.Sx=!1,this.Cx(this.Rx)}}var ot=i(2823),at=i(7332);class ht extends ot.${constructor(t,e,i,s,n={},r){super(r,t,e,i,s),this.Ec=new rt(this.$uiContainer,e,n.isMobile)}Rc(t,e,i){let s=i;switch(e.payload&&e.payload.targetComponent&&(s=e.payload.targetComponent),t){case G.C[G.C.HoverStart]:this.Ec.hoverStart(s);break;case G.C[G.C.HoverEnd]:this.Ec.hoverEnd(s);break;case G.C[G.C.StateChanged]:this.Ec.stateChanged(s)}}updateDuration(t,e){const i=this.getComponent($.r.ProgressBar);if(null==i||i.updateWcagAttributes(t,e),!(0,q.pv)(this.$uiContainer,j.s6.ShowControls))return;const s=this.getComponent($.r.ElapsedTimeLabel),n=this.getComponent($.r.TotalDurationLabel);if(s&&s.setTime(t),n&&n.setTime(e),i){const s=0,n=e,r=0,o=100;i.setMaxRange(Math.round(e)),i.setProgress((0,at.dQ)(s,n,r,o,t))}}updateVolume(t){}expand(){this.getComponent($.r.ExpandButton).setState(et.q.Expand)}collapse(){this.getComponent($.r.ExpandButton).setState(et.q.Collapse)}}var ct=i(4291);class dt extends ct.d{initState(){super.initState()}exitState(){super.exitState()}}var lt=i(2246);class ut extends lt.tt{constructor(){super(...arguments),this.yc=100}bc(){if(this.elapsedTimeoutId||!this.Ic.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout((()=>{this.Ic.elapsedTime+=(Date.now()-t)/1e3;const e=this.Ic.getComponent($.r.ProgressBar);e&&e.setProgress((0,at.dQ)(0,this.Ic.duration,0,100,this.Ic.elapsedTime)),this.elapsedTimeoutId=null,this.bc()}),this.yc)}initState(){super.initState(),this.Ic.duration&&this.bc()}exitState(){super.exitState(),this.Ic.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}var pt=i(5650);class ft extends ht{constructor(t,e,i,r,o,a,h={}){super(r,t,o,new Z(t,i,r,a,h),h),this.wc=e,this.$container=r,this.settings=h,this.Pc=new n.x,this._c={[tt.Ez.PlayingState]:new ut(this),[tt.Ez.PausedState]:new dt(this)},this.Sc=0,this.Ac=null,this.kc=t=>{(0,q.og)(this.$uiContainer,j.s6.UiInView,t)},this.Ec.setDistanceValues({top:4,bottom:4}),this._c[tt.Ez.PausedState].enterState(),this.xc=this.$container.querySelector(`.${s.Ek.CardImage}`),this.Cc=this.$container.querySelector(`.${s.Ek.CardTitle}`),this.Mc=this.$container.querySelector(`.${s.Ek.AdMarkerTitleText}`),this.Bc=this.$container.querySelector(`.${s.Ek.AdUiContent}`),this.di=d.h.getGlobalContainer().resolve(it.f)}get onUiEvent(){return this.Pc.asObservable()}Rc(t,e,i){var s,n,r;switch(super.Rc(t,e,i),t){case G.C[G.C.Volume]:{const t=e.payload;this.Pc.next({type:G.C.Volume,payload:{volume:t}});break}case G.C[G.C.Seek]:{const t=e.payload;this.Pc.next({type:G.C.Seek,payload:{seek:t}});break}case G.C[G.C.Quality]:{const t=e.payload;this.Pc.next({type:G.C.Quality,payload:{quality:t}});break}case G.C[G.C.HoverStart]:{const t=null===(s=null==e?void 0:e.payload)||void 0===s?void 0:s.targetComponent;this.Pc.next({type:G.C.HoverStart,payload:t?{targetComponent:t}:void 0});break}case G.C[G.C.FocusStart]:this.Dc();break;case G.C[G.C.HoverEnd]:{const t=null===(n=null==e?void 0:e.payload)||void 0===n?void 0:n.targetComponent;this.Pc.next({type:G.C.HoverEnd,payload:t?{targetComponent:t}:void 0});break}case G.C[G.C.StateChanged]:{const t=null===(r=null==e?void 0:e.payload)||void 0===r?void 0:r.targetComponent;this.Pc.next({type:G.C.StateChanged,payload:t?{targetComponent:t}:void 0});break}case G.C[G.C.RebindComponent]:{const t=e.payload;this.Pc.next({type:G.C.RebindComponent,payload:{uiComponentEnum:t}});break}case $.r[$.r.CloseButton]:this.Pc.next({type:G.C.Close});break;default:this.Pc.next({type:G.C[t]})}}Dc(){this.di.clearTimeout(this.Nc),(0,q.cn)(this.$container,j.s6.PlayerFocused),this.Nc=this.di.setTimeout((()=>{(0,q.IV)(this.$container,j.s6.PlayerFocused),this.Ec.removeActiveTooltip()}),3e3)}updateDuration(t){const e=this.getComponent($.r.ProgressBar),i=this.getComponent($.r.TotalDurationLabel),s=this.getComponent($.r.SkipAdButton);if(!t&&s&&(s.setSecondsUntilSkip(0),s.tickDown(0)),!t&&e)return e.setProgress(100),void e.updateWcagAttributes(0,0);this.elapsedTime=0,this.duration=t,e&&e.setProgress((0,at.dQ)(0,t,0,100,0)),i&&i.setTime(t),this.Fc(this.Sc)}updateVolume(t){const e=this.getComponent($.r.VolumeControls),i=this.getComponent($.r.VolumeButton);e&&e.setVolume(t),i&&i.setVolume(t)}get elapsedTime(){return this.Sc}set elapsedTime(t){this.Sc=t,this.Fc(this.Sc)}showSkipAdButton(t){const e=this.getComponent($.r.SkipAdButton);e&&(e.showComponent(),e.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent($.r.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,e){(0,q.cn)(this.$uiContainer,s.Ek.InPod);(0,pt.Sz)(this.$uiContainer.getElementsByClassName(s.Ek.AdMarkerInPodTextContainer)).forEach((i=>{i.innerHTML=`${t+1}/${e}`}))}removeAddPodAdMarker(){(0,q.IV)(this.$uiContainer,s.Ek.InPod)}addDurationAdMarker(){(0,q.cn)(this.$uiContainer,s.Ek.AdDurationLabel)}removeDurationAdMarker(){(0,q.IV)(this.$uiContainer,s.Ek.AdDurationLabel)}Fc(t){const e=this.getComponent($.r.ElapsedTimeLabel);e&&e.setTime(t);const i=this.getComponent($.r.SkipAdButton);i&&i.tickDown(t);const s=this.getComponent($.r.ProgressBar);null==s||s.updateWcagAttributes(this.Sc,this.duration);const n=this.getComponent($.r.RemainingDurationLabel);if(n&&this.duration){const e=this.duration-t;e>=0&&n.setTime(e)}}hideAdLoadingScreen(){const t=this.getComponent($.r.AdLoadingScreen);t&&t.hideComponent(),(0,q.IV)(this.$container,j.s6.PodLoadingScreen)}showAdLoadingScreen(t,e,i,s){const n=this.getComponent($.r.AdLoadingScreen);n&&(n.showComponent(),n.setBackgroundImg(t),n.setClickUrl(e),n.setFallbackText(i,s),(0,q.cn)(this.$container,j.s6.PodLoadingScreen))}hideAdMarker(){const t=this.$container.querySelector(".cnx-ad-marker");(0,q.MV)(t)}hideProgressBar(){this.getComponent($.r.ProgressBar).hideComponent()}setContinueReadingCard(t){this.xc.style.backgroundImage=`url("${t.imageSrc}")`,this.Cc.innerText=t.title?t.title:""}addAdMarkerTitle(t){this.Mc.innerHTML=t}cardHasData(){return(0,H.QM)(this.xc.style.backgroundImage)&&(0,H.QM)(this.Cc.innerHTML)}showContinueReadingCard(t){(0,q.cn)(this.$container,j.s6.AdShowCard),null===this.Ac&&(this.Ac=this.globalDomUtilsService.requestAnimationFrameHelper((()=>{this.Ac=null,(0,q.T7)(t,{height:`${this.Bc.clientHeight}px`})})))}hideContinueReadingCard(t){(0,q.IV)(this.$container,j.s6.AdShowCard),(0,q.aQ)(t,"height")}showAdMarkerTitle(){(0,q.cn)(this.$uiContainer,s.Ek.AdTitleLabel)}hideAdMarkerTitle(){(0,q.IV)(this.$uiContainer,s.Ek.AdTitleLabel)}show(){super.show(),this.wc.on(this.$uiContainer,this.kc,{threshold:.5})}hide(){super.hide();(0,q.og)(this.$uiContainer,j.s6.UiInView,!1),this.wc.off(this.$uiContainer,this.kc)}expand(){this.getComponent($.r.ExpandButton).setState(et.q.Expand)}collapse(){this.getComponent($.r.ExpandButton).setState(et.q.Collapse)}getComponent(t){return super.getComponent(t)}}var mt=i(9528),gt=i(5227),vt=i(9022),yt=i(3360);class bt{constructor(t){this.adUiSettings=t}get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content ${this.adUiSettings.shouldShowExpandButton?"cnx-ad-fs":""}">\n                    <cnx class="cnx-ad-marker" aria-label="Ad" role="img">\n                        <cnx class="cnx-marker-cnt-first">\n                            <cnx class="cnx-marker-cnt-second">\n                                <cnx class="cnx-ad-marker-svg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"/><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"/></svg>\n</cnx>\n                                <cnx class="cnx-ad-marker-text">1/1</cnx>\n                            </cnx>\n                            <cnx class="cnx-ad-marker-duration">[[${$.r.RemainingDurationLabel}]]</cnx>\n                        </cnx>\n                        <cnx class="cnx-ad-marker-title"><cnx-span class="cnx-ad-title-text"></cnx-span></cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${$.r.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${$.r.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${$.r.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${$.r.SkipAdButton}]]\n                    ${this.Vc()}\n                    <cnx class="cnx-ad-close-button cnx-over-ad-close-button cnx-ui-btn">[[${$.r.CloseButton}]]</cnx>\n                    ${this.getExpandTemplate()}\n                    <cnx class="cnx-ad-progress-bar">[[${$.r.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${s.Ek.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${s.Ek.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${$.r.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}Vc(){return this.adUiSettings.closeButtonLocation===N.OutsidePlayer?`<cnx class="cnx-ad-close-button cnx-ad-floating-close-button cnx-ui-btn">[[${$.r.FloatingCloseButton}]]</cnx>`:""}getExpandTemplate(){return this.adUiSettings.shouldShowExpandButton?`<cnx class="cnx-ad-expand-button cnx-ui-btn cnx-hide-on-volume-hover cnx-d-sm-none">[[${$.r.ExpandButton}]]</cnx>`:""}}var It=i(51),wt=i(4261);class Pt{constructor(t,e,i,s,r,a,h,c,d){this.oh=t,this.hh=e,this.dh=i,this.lh=s,this.ph=r,this.Xi=a,this.mh=h,this.Mh=c,this.jc=d,this.Uc=[],this.$c=!1,this.qc=!1,this.Hc=!1,this.Jc=0,this.Gc=0,this.Wc=!0,this.Qc=!1,this.Kc=!1,this.Zc=!1,this.td=!1,this.Mi=[],this.wh=new n.x,this.Pe=new n.x,this.ed=new n.x,this.sd=new n.x,this.nd=new n.x,this.rd=new n.x,this.ji=t=>{const e=t?{type:o.Y4.AdPlayerInView}:{type:o.Y4.AdPlayerOutOfView};this.ed.next(e),t&&this.Hc&&this.Zc&&this.ed.next({type:o.Y4.AdPlayingInView})},this.od(),this.subscribeToViewabilityService()}hd(){this.Mi.push(this.dd(),this.ud())}subscribeToViewabilityService(){var t;null===(t=this.ph.services.ViewabilityService)||void 0===t||t.on(this.hh,(t=>this.ji(t)),{threshold:vt.fJ})}fd(t){switch(t.type){case o.fI.AdPaused:this.wh.next({type:s.lc.PauseLinearEvent});break;case o.fI.AdPlaying:this.wh.next({type:s.lc.ResumeLinearEvent});break;case o.fI.AdImpression:this.wh.next({type:s.lc.ShowLinearEvent,payload:t.payload});break;case o.fI.AdSkipped:this.wh.next({type:s.lc.SkipLinearEvent});break;case o.fI.AdStopped:this.wh.next({type:s.lc.HideLinearEvent});break;case o.fI.AdError:this.inImpression&&this.wh.next({type:s.lc.HideLinearEvent})}}gd(t){var e;this.vd(),this.updateContinueReadingCard(),t.payload.adDuration=null===(e=this.Mh.getCurrentAdMetadata(h.k.LINEAR))||void 0===e?void 0:e.duration,t.payload.adDuration||this.$c||this.show(),this.$c=!0,this.Hc=!0,this.Qc&&this.yd(),t.payload.adDuration?this.bd.addDurationAdMarker():this.bd.removeDurationAdMarker(),this.bd.updateDuration(t.payload.adDuration),this.bd.changeState(tt.Ez.PlayingState),this.wd=t.payload.clickThroughUrl,this.Pd(t.payload.selectedAdSlot),this.lh.getTotalNumberOfSlots()>1?this.bd.addPodAdMarker(this.lh.getCurrentSlotIndex(),this.lh.getTotalNumberOfSlots()):this.bd.removeAddPodAdMarker()}_d(t){const e=(i=this.oh,s=this.ph.config,{logoUrl:i.logoUrl,isMobile:s.isMobile,closeButtonMode:i.closeButtonMode,floatingCloseButtonMode:i.floatingSettings.floatingCloseButtonMode,isCloseButton:i.isCloseButton,sharingDestinations:i.sharingDestinations,tooltipBackgroundColor:"#0d192d",tooltipTextColor:"#fff"});var i,s;this.bd=new ft(this.ph.services.GlobalDomUtilsService,this.ph.services.ViewabilityService,this.ph.services.InteractionService,this.hh,new bt(t).template,t,e),this.ph.config.isMobile&&(0,q.cn)(this.hh,j.s6.Mobile),this.bd.hide()}Td(){this.Sd=this.xd(),this.Cd(this.Sd),this.Uc.push(this.Sd)}xd(t=""){return this.ph.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}Cd(t){this.hh.appendChild(t)}od(){}dd(){return this.Mh.onLinearVpaidEvent.subscribe((t=>{let e=!1;switch(t.type){case o.fI.AdLoaded:this.Qc=this.Od(t.payload),this.Qc&&(t.payload.payload.adLoadedData.skipOffset=this.oh.skipAdAfter);break;case o.fI.AdPaused:this.Zc=!1,this.bd.changeState(tt.Ez.PausedState);break;case o.fI.AdPlaying:this.Zc=!0,this.bd.changeState(tt.Ez.PlayingState);break;case o.fI.AdImpression:this.Zc=!0,this.gd(t.payload);break;case o.fI.AdSkipped:this.Bd(r.ProtoAdClickTypeEnum.AdSkipClick),this.Rd(),e=!0;break;case o.fI.AdStopped:case o.fI.AdError:if(this.Dd())return;this.Rd(),e=!0;break;case o.fI.AdClick:this.Bd(r.ProtoAdClickTypeEnum.AdClick);break;case o.fI.AdClickThru:this.Bd(r.ProtoAdClickTypeEnum.AdClickThrough)}this.Wc&&(this.Pe.next(t),this.fd(t)),this.Wc=!0,e&&(this.Hc=!1,this.Zc=!1,this.bd.changeState(tt.Ez.PausedState))}))}ud(){return this.bd.onUiEvent.subscribe((t=>{switch(t.type){case G.C.Volume:this.Nd(t.payload.volume),this.Bd(r.ProtoAdClickTypeEnum.VolumeClick);break;case G.C.Play:this.Bd(r.ProtoAdClickTypeEnum.PlayClick),this.play();break;case G.C.Pause:this.Bd(r.ProtoAdClickTypeEnum.PauseClick),this.pause();break;case G.C.Expand:this.Bd(r.ProtoAdClickTypeEnum.FullScreenClick),this.rd.next(G.C.Expand);break;case G.C.Collapse:this.Bd(r.ProtoAdClickTypeEnum.ExitFullScreenClick),this.rd.next(G.C.Collapse);break;case G.C.Close:{this.nd.next({type:gt.Uh.UserInteraction,payload:{playback:!1}});const t=this.td?r.ProtoAdClickTypeEnum.FloatingCloseClick:r.ProtoAdClickTypeEnum.EmbeddedCloseClick;this.Bd(t),this.sd.next({type:G.C.Close});break}case G.C.Mute:this.Nd(0),this.Bd(r.ProtoAdClickTypeEnum.MuteClick);break;case G.C.Unmute:this.Nd(1),this.Bd(r.ProtoAdClickTypeEnum.UnmuteClick);break;case G.C.SkipAd:this.Fd()}}))}yd(){this.bd.showSkipAdButton(this.oh.skipAdAfter)}Bd(t){var e;const i=null===(e=this.Mh)||void 0===e?void 0:e.getCurrentAdMetadata(h.k.LINEAR);if(!i)return;const{advertiserLineItemId:s,publisherLineItemId:n}=i,r=this.Mh.getCurrentAdBreakType();this.jc.adClick.next({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:mt.EN.fromProtoAdBreakType(r),type:mt.EN.fromProtoAdClickType(t)})}Od(t){var e;const i=null===(e=this.Mh)||void 0===e?void 0:e.getCurrentAdMetadata(h.k.LINEAR);if(!i)return!1;const{adSourceType:s}=i,{skipOffset:n}=t.payload.adLoadedData;return!(0,nt.AK)(s,n)&&(0,nt.Xj)(i.duration,this.oh)}Pd(t){this.Uc.filter((e=>e!==t)).forEach((t=>{(0,q.cn)(t,j.Gj.Invisible)}))}Rd(){this.Uc.forEach((t=>{(0,q.IV)(t,j.Gj.Invisible)}))}Vd(){this.Kc=!1,this.bd.hideAdLoadingScreen()}Nd(t){this.setVolume(t),this.nd.next({type:gt.Uh.UserInteraction,payload:{volume:!0}})}vd(){this.bd.hideSkipAdButton()}start(t,e){try{this._d(e),this.Td(),this.setVolume(t),this.hd()}catch(t){(0,wt.nF)({callStack:t.stack,level:wt.D_.CRITICAL,exception:t.message,message:"linearAdhandler_start",sessionId:this.oh.sessionId})}}updateFloatingState(t){this.td=t}getVolume(){return this.Jc}increaseVolume(t,e=!1){if(e&&this.Bd(r.ProtoAdClickTypeEnum.VolumeClick),this.Jc+t>1)return void this.setVolume(1);const i=this.Jc+t;this.setVolume(i)}decreaseVolume(t,e=!1){if(e&&this.Bd(r.ProtoAdClickTypeEnum.VolumeClick),this.getVolume()-t<0)return void this.setVolume(0);const i=this.getVolume()-t;this.setVolume(i)}toggleMute(t=!1){if(t&&this.Bd(0===this.Jc?r.ProtoAdClickTypeEnum.UnmuteClick:r.ProtoAdClickTypeEnum.MuteClick),0===this.Jc)return this.Gc=this.Gc>0?this.Gc:.2,void this.setVolume(this.Gc);this.Gc=this.Jc,this.setVolume(0)}hide(){(0,q.IV)(this.hh,j.s6.Ad,j.s6.AdOverlayType);const t=this.hh.parentElement;t&&(0,q.IV)(t,j.s6.AdContainer),this.bd.hide(),this.jc.adBreakEnd.next()}show(){var t,e;const i=[j.s6.Ad],s=null===(e=null===(t=this.Mh)||void 0===t?void 0:t.getCurrentAdMetadata(h.k.LINEAR))||void 0===e?void 0:e.adType;s===r.ProtoAdType.Overlay&&i.push(j.s6.AdOverlayType),this.jd=s,(0,q.cn)(this.hh,...i);const n=this.hh.parentElement;n&&(0,q.cn)(n,j.s6.AdContainer),this.bd.show(),this.bd.updateVolume(this.Jc),this.Vd(),this.jc.adBreakStart.next({adSkippableInSeconds:this.yd?this.oh.skipAdAfter:0,isLinear:!0})}setVolume(t){this.Jc=t,this.Mh.setAdVolume(h.k.LINEAR,t),this.bd&&this.bd.updateVolume(t),this.sd.next({type:G.C.Volume,payload:{volume:t}})}resizeAd(t,e){this.inImpression&&(this.updateContinueReadingCard(),this.updateShowAdMarkerTitle())}adStateChange(t,e){this.Mh.onAdStateChange(h.k.LINEAR,t,e)}getMainAdContainerWidth(){return this.Mh.getMainAdContainerWidth(h.k.LINEAR)}resumeWithoutUserInteraction(){this.inImpression&&this.Mh.resumeAd(h.k.LINEAR,!1)}play(){if(!this.inImpression)return;this.Mh.resumeAd(h.k.LINEAR,!0),this.nd.next({type:gt.Uh.UserInteraction,payload:{playback:!0}}),this.Zc=!0}Ud(t){if((0,It.Ph)("cnxShowAdCard",this.ph.config.pageUrl))return!0;let e=!1;if(t.adType===r.ProtoAdType.Video){const i=this.hh.clientWidth*(t.heightRatio/t.widthRatio);e=this.hh.clientHeight-i>=76}return t.adType===r.ProtoAdType.Overlay&&(e=this.hh.clientHeight-t.height>=76),e}updateContinueReadingCard(){const t=this.Mh.getCurrentAdMediaSize(h.k.LINEAR);(0,H.$K)(t)&&(this.Ud(t)?this.bd.showContinueReadingCard(this.Sd):this.bd.hideContinueReadingCard(this.Sd))}updateShowAdMarkerTitle(){this.qc&&this.hh.clientWidth>=320?this.bd.showAdMarkerTitle():this.bd.hideAdMarkerTitle()}setContinueReadingCard(t){this.bd.setContinueReadingCard({imageSrc:yt.Q.getSmartCroppedImageUrl(t.imageSrc,270,150,this.Xi),title:t.title})}hideContinueReadingCard(){this.bd.hideContinueReadingCard(this.Sd)}setAdMarkerTitle(t){this.bd.addAdMarkerTitle(t),this.qc=!0,this.hh.clientWidth>=320&&this.bd.showAdMarkerTitle()}hideAdMarkerTitle(){this.bd.hideAdMarkerTitle()}pause(){if(!this.inImpression)return;this.Mh.pauseAd(h.k.LINEAR,!0),this.nd.next({type:gt.Uh.UserInteraction,payload:{playback:!1}}),this.Zc=!1}togglePlay(t=!1){t&&this.Bd(this.Zc?r.ProtoAdClickTypeEnum.PauseClick:r.ProtoAdClickTypeEnum.PlayClick),this.Zc?this.pause():this.play()}stopAd(t){const e=()=>{this.Pe.next({type:o.fI.AdStopped,payload:{payload:{adType:r.ProtoAdType.Video}}});const e=t===s.aB.ForceStopAdSlot;this.wh.next({type:s.lc.HideLinearEvent,forced:e}),this.Wc=!1};this.Mh?(e(),this.Mh.stopAd(h.k.LINEAR,t)):this.inAdPodLoadingState&&e()}Fd(){this.Mh&&this.inImpression?this.Mh.skipAd(h.k.LINEAR):this.Kc&&(this.Pe.next({type:o.fI.AdSkipped}),this.Vd())}enterAdPodLoadingState(){this.Kc=!0;const{width:t,height:e}=this.Mh.getAdContainerSize(this.jd);this.bd.showAdLoadingScreen(yt.Q.getSmartCroppedImageUrl(this.Hd,t,e,this.Xi),this.wd,this.lh.getNextSlotIndex(),this.lh.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.Hd=t}destroy(){var t,e;(0,l.i)(this.Mi),null===(t=this.ph.services.ViewabilityService)||void 0===t||t.off(this.hh,this.ji),null===(e=this.bd)||void 0===e||e.destroy()}get onVpaidEvent(){return this.Pe.asObservable()}get onUiComponentEvent(){return this.sd.asObservable()}get onExperienceEvent(){return this.nd.asObservable()}get onLinearEvent(){return this.wh.asObservable()}get adUserInterface(){return this.bd}get adContainer(){return this.Sd}get secondaryAdContainer(){return this.Wh}get firstAdShown(){return this.$c}get inImpression(){return this.Hc}get adInWin(){return this.Mh.isAdInWin(h.k.LINEAR)}get inAdPodLoadingState(){return this.Kc}get onFullcreenChange(){return this.rd.asObservable()}}var Tt=i(6095);class _t extends Pt{gd(t){super.gd(t),this.oh.outstreamAdAsContent&&this.Gd()}Dd(){return this.oh.outstreamAdAsContent}od(){this.oh.isOutStreamType()||this.oh.isLiveType()||(this.zd=d.h.getSessionChildContainer(this.ph.config.sessionId).resolve(Tt.U),this.zd.startListeningToAdEvents(D(this.Pe,this.ed)))}Gd(){this.bd.hideProgressBar(),this.bd.hideAdMarker(),this.vd()}}var St=i(5139);class At{constructor(t,e,i,s,r,a,h,c,d){this.oh=t,this.hh=e,this.dh=i,this.lh=s,this.ph=r,this.Xi=a,this.mh=h,this.Mh=c,this.jc=d,this.Mi=[],this.Eh=new n.x,this.Pe=new n.x,this.nd=new n.x,this.Uc=[],this.Hc=!1,this.gh=o.zc.Normal,this.Wd=!1}hd(){this.Mi.push(this.Mh.onNonlinearVpaidEvent.subscribe((t=>{switch(t.type){case o.fI.AdImpression:this.gd(t.payload);break;case o.fI.AdUserClose:this.Bd(r.ProtoAdClickTypeEnum.AdUserClose);break;case o.fI.AdError:this.Rd();break;case o.fI.AdClickThru:this.Bd(r.ProtoAdClickTypeEnum.AdClickThrough)}this.Pe.next(t),this.Yd(t)})))}Yd(t){switch(t.type){case o.fI.AdImpression:this.show(),this.Eh.next({type:s.gx.ShowNonLinearEvent,payload:t.payload});break;case o.fI.AdUserClose:this.hide();break;case o.fI.AdStopped:this.hide(),this.Eh.next({type:s.gx.HideNonLinearEvent});break;case o.fI.AdError:this.inImpression&&this.Eh.next({type:s.gx.HideNonLinearEvent})}}gd(t){this.Hc=!0,this.Pd(t.payload.selectedAdSlot)}Td(){this.Sd=this.xd(),this.Cd(this.Sd),this.Uc.push(this.Sd)}xd(t=""){return this.ph.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-non-linear-ad-container cnx-full-height ${t}"></div>`)}Cd(t){this.hh.appendChild(t)}Bd(t){var e;const i=null===(e=this.Mh)||void 0===e?void 0:e.getCurrentAdMetadata(h.k.NONLINEAR);if(!i)return;const{advertiserLineItemId:s,publisherLineItemId:n}=i,r=this.Mh.getCurrentAdBreakType();this.jc.adClick.next({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:mt.EN.fromProtoAdBreakType(r),type:mt.EN.fromProtoAdClickType(t)})}Pd(t){this.Uc.filter((e=>e!==t)).forEach((t=>{(0,q.cn)(t,j.Gj.Hide)}))}Rd(){this.Uc.forEach((t=>{(0,q.IV)(t,j.Gj.Hide)}))}Xd(){var t;const e=null===(t=this.Mh.getCurrentAdMediaSize(h.k.NONLINEAR))||void 0===t?void 0:t.height;if(!(0,H.r)(e))return!0;const i=this.adContainer.clientHeight,s=(0,at.Tc)(i,St.O.NON_LINEAR_MAX_HEIGHT_PERCENT);return Math.ceil(s)<e}start(){try{this.Td(),this.hd()}catch(t){(0,wt.nF)({callStack:t.stack,level:wt.D_.CRITICAL,exception:t.message,message:"nonLinearAdhandler_start",sessionId:this.oh.sessionId})}}hide(){(0,q.IV)(this.hh,j.s6.AdNonLinear),this.jc.adBreakEnd.next()}show(){(0,q.cn)(this.hh,j.s6.AdNonLinear),this.jc.adBreakStart.next({adSkippableInSeconds:0,isLinear:!1})}adStateChange(t,e){this.inImpression&&(t===r.ProtoAdSlotsEnum.PreRoll||t===r.ProtoAdSlotsEnum.PostRoll?this.pause():this.resumeWithoutUserInteraction(t),this.Mh.onAdStateChange(h.k.NONLINEAR,t,e))}contentPlaybackStateChanged(t){this.Wd=t,this.Wd||this.pause()}resizeAd(t,e,i){this.inImpression&&this.Wd&&(this.Xd()?this.pause():this.resumeWithoutUserInteraction(i))}resumeWithoutUserInteraction(t){this.inImpression&&t!==r.ProtoAdSlotsEnum.PreRoll&&t!==r.ProtoAdSlotsEnum.PostRoll&&(this.Xd()||(this.show(),this.Mh.resumeAd(h.k.NONLINEAR,!1)))}pause(){if(!this.inImpression)return;this.hide();this.Mh.pauseAd(h.k.NONLINEAR,!0),this.nd.next({type:gt.Uh.UserInteraction,payload:{playback:!1}})}stopAd(t){if(!this.inImpression)return;const e=()=>{this.Pe.next({type:o.fI.AdStopped,payload:{payload:{adType:r.ProtoAdType.Nonlinear}}}),this.Eh.next({type:s.gx.HideNonLinearEvent})};this.Mh&&(e(),this.Mh.stopAd(h.k.NONLINEAR,t))}destroy(){(0,l.i)(this.Mi)}get onExperienceEvent(){return this.nd.asObservable()}get onNonLinearEvent(){return this.Eh.asObservable()}get onVpaidEvent(){return this.Pe.asObservable()}get adContainer(){return this.Sd}get inImpression(){return this.Hc}get adInWin(){return this.Mh.isAdInWin(h.k.NONLINEAR)}}class xt extends At{}var kt,Et,Ct,Ot,Lt,Mt,Rt,Bt,Dt,Nt,Ft,$t=i(4336),Vt=i(7225);!function(t){t.AppNexus="appnexus",t.IndexExchange="ix",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.SynacorMedia="synacormedia",t.Undertone="undertone",t.AmxRTB="amx",t.Smaato="smaato",t.SmartAdServer="smartadserver",t.TheMediaGrid="grid",t.Rise="rise",t.YahooAds="yahooAds",t.Unruly="unruly",t.Kargo="kargo",t.SmileWanted="smilewanted",t.TrustX="trustx",t.CadentApertureMx="cadent_aperture_mx",t.KrushMedia="krushmedia",t.Conversant="conversant",t.Criteo="criteo",t.TripleLift="triplelift",t.PulsePoint="pulsepoint",t.Adtelligent="adtelligent",t.Yieldmo="yieldmo",t.PgamMedia="pgammedia",t.NextMillennium="nextMillennium",t.AdYouLike="adyoulike",t.FreeWheelSSP="freewheel-ssp",t.ColossusSSP="colossusssp",t.ResetDigital="resetdigital",t.MediaFuse="mediafuse",t.Sharethrough="sharethrough",t.Insticator="insticator",t.Sonobi="sonobi",t.Ozone="ozone",t.ShowHeroes="showheroes-bs",t.SeedTag="seedtag",t.MinuteMedia="minutemedia"}(kt||(kt={}));class jt{static logMissingRequireParam(t,e,i){(0,wt.nF)({level:wt.D_.CRITICAL,message:`PrebidJS_${t}_adapter_missing_${e}_li_${i}`})}static logMissingRequireIntegrationsParams(t,e,i){const s=e.map((t=>t.join("_and_"))).join("_or_");(0,wt.nF)({level:wt.D_.CRITICAL,message:`PrebidJS_${t}_adapter_needs_${s}_li_${i}`})}get config(){return this.Qd}}!function(t){t[t.Unknown=0]="Unknown",t[t.AboveTheFold=1]="AboveTheFold",t[t.Deprecated=2]="Deprecated",t[t.BelowTheFold=3]="BelowTheFold",t[t.Header=4]="Header",t[t.Footer=5]="Footer",t[t.Sidebar=6]="Sidebar",t[t.Fullscreen=7]="Fullscreen"}(Et||(Et={})),function(t){t.Gross="gross",t.Net="net"}(Ct||(Ct={})),function(t){t.Instream="instream",t.Outstream="outstream"}(Ot||(Ot={})),function(t){t.InApp="mobile_app",t.MobileWeb="mobile_web",t.Web="web"}(Lt||(Lt={})),function(t){t.NATIVE="native",t.VIDEO="video",t.BANNER="banner"}(Mt||(Mt={})),function(t){t.Outstream="outstream",t.PreRoll="pre_roll",t.MidRoll="mid_roll",t.PostRoll="post_roll"}(Rt||(Rt={})),function(t){t[t.Instream=1]="Instream",t[t.InBanner=2]="InBanner",t[t.Outstream=3]="Outstream",t[t.InFeed=4]="InFeed",t[t.Floating=5]="Floating"}(Bt||(Bt={})),function(t){t[t.AutoplaySoundOn=1]="AutoplaySoundOn",t[t.AutoPlaySoundOff=2]="AutoPlaySoundOff",t[t.ClickToPlay=3]="ClickToPlay",t[t.MouseOver=4]="MouseOver",t[t.ScrollToPlaySoundOn=5]="ScrollToPlaySoundOn",t[t.ScrollToPlaySoundOff=6]="ScrollToPlaySoundOff"}(Dt||(Dt={})),function(t){t.AutoPlaySoundOn="auto_play_sound_on",t.AutoPlaySoundOff="auto_play_sound_off",t.AutoPlaySoundUnknown="auto_play_sound_unknown",t.ClickToPlay="click_to_play",t.MouseOver="mouse_over"}(Nt||(Nt={})),function(t){t[t.Instream=201]="Instream",t[t.Outstream=203]="Outstream"}(Ft||(Ft={}));var Ut=i(3003);class qt{constructor(t,e={}){this.Kd=t,this.Zd=e,this.tl="{{",this.el="}}",this.il=new RegExp(`${this.tl}(.*?)${this.el}`,"g")}replaceMacros(t,e){const i=(0,Ut.Ed)(t,this.il);if(!(0,pt.BZ)(i))return t;const s=this.sl(t,i,e);return this.replaceMacros(s,e)}setMacros(t){this.Zd=Object.assign(Object.assign({},this.Zd),t)}sl(t,e,i){const s=t;return e.reduce(((t,e)=>this.nl(t,e,i)),s)}nl(t,e,i){const s=this.rl(e);if(!this.ol(s,i))return t.replace(e,null);let n=null,r=!1;this.al(s,i)?n=this.Kd.getMacroValue(s,i):this.hl(s)&&(n=this.Zd[s],(0,H.HD)(n)||(r=!0));const o=this.cl(n);if(r){return t.replace(`"${e}"`,o).replace(e,o)}return t.replace(e,o)}ol(t,e){return this.al(t,e)||this.hl(t)}al(t,e){return this.Kd.hasMacroValue(t,e)}hl(t){return(0,H.$K)(this.Zd[t])}rl(t){return t.replace(this.tl,"").replace(this.el,"")}cl(t){return[null,void 0,NaN].includes(t)?null:Array.isArray(t)||(0,H.as)(t)?JSON.stringify(t):t.toString()}}const Ht=(t,e)=>({[r.ProtoPlayerPlaybackModeEnum.Autoplay]:e!==r.ProtoPlayerSoundMode.Mute?Dt.AutoplaySoundOn:Dt.AutoPlaySoundOff,[r.ProtoPlayerPlaybackModeEnum.ClickToPlay]:Dt.ClickToPlay,[r.ProtoPlayerPlaybackModeEnum.ScrollToPlay]:e!==r.ProtoPlayerSoundMode.Mute?Dt.ScrollToPlaySoundOn:Dt.ScrollToPlaySoundOff}[t]),Jt=t=>t===r.ProtoVideoPlacementEnum.InStream?Bt.Instream:Bt.Outstream,Gt=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],zt=[2,3,5,6],Wt={VPAID_1:1,VPAID_2:2},Yt=[Wt.VPAID_1,Wt.VPAID_2],Xt=[Wt.VPAID_1,Wt.VPAID_2],Qt=(t,e)=>{const{skip:i,skippable:s,skipmin:n,skipafter:r}=e,{width:o,height:a,isOutstreamContext:h,maxAdDuration:c,initialSoundMode:d,playbackMode:l,plcmt:u}=t,p=Jt(u),f=h?{}:void 0;return{video:Object.assign({w:Math.floor(o),h:Math.floor(a),playerSize:[Math.floor(o),Math.floor(a)],context:h?"outstream":"instream",mimes:Gt,protocols:zt,linearity:1,api:Yt,frameworks:Xt,maxduration:c,minduration:0,skip:i,skippable:s,skipmin:n,skipafter:r,placement:p,renderer:f,playbackmethod:[Ht(l,d)],pos:Et.Unknown},u?{plcmt:u}:null)}};var Kt=i(9791);const Zt=t=>({id:t.appId,name:t.appName,bundle:t.bundleID,domain:t.domainURL,storeurl:t.storeURL,cat:t.appCategories,ver:t.appVersion,privacypolicy:t.appPrivacyPolicy,paid:t.appIsPaid}),te="https://prebid.adnxs.com/pbc/v1/cache",ee=()=>({cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["permutive"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}),ie=()=>({cmpApi:"iab",timeout:2e3}),se=t=>{if(!(0,H.as)(t))return null;return`1.0,1!${(0,H.QM)(t.businessDomain)?encodeURI(t.businessDomain):""},${(0,H.QM)(t.supplyChainId)?encodeURI(t.supplyChainId):""},1`};var ne;!function(t){t.CACHE_ID="CACHE_ID"}(ne||(ne={}));const re=t=>({name:"identityLink",params:{pid:t,notUse3P:!1},storage:{name:"idl_env",type:"html5",expires:15,refreshInSeconds:1800}}),oe=t=>({name:"uid2",value:{uid2:{id:t}}});var ae;!function(t){t.Banner="banner",t.Video="video",t.All="all"}(ae||(ae={}));const he=(t,e,i,s,n,r,o,a)=>{const h=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({usePrebidCache:!0,enableTIDs:!0},((t,e)=>{const i={userSync:{syncEnabled:!0,iframeEnabled:!0,pixelEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}},syncsPerBidder:0,syncDelay:3e3,auctionDelay:0,aliasSyncEnabled:!0,userIds:[{name:"criteo"}]}};return(0,H.QM)(t)&&i.userSync.userIds.push(re(t)),(0,H.QM)(e)&&i.userSync.userIds.push(oe(e)),i})(s,n)),{ix:{timeout:900}}),{targetingControls:{addTargetingKeys:[ne.CACHE_ID]}}),{yahooAds:{mode:ae.Video}}),(t=>({realTimeData:{dataProviders:[{name:"permutive",params:(0,H.as)(t)?t:{}}]}}))(a));return h.floors={},(0,H.QM)(o)&&(h.pageUrl=o),h.usePrebidCache&&(h.cache={url:te}),r&&(h.schain=(t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:(0,H.QM)(t.supplyChainId)?t.supplyChainId:null}]}}))(r)),(t||e)&&(h.consentManagement=((t,e)=>t?{gdpr:ee()}:e?{usp:ie()}:{})(t,e)),i.isInApp&&(h.app=Zt(i),h.ortb2={app:Zt(i)}),h};var ce;!function(t){t.CnxSupplyType="CNX_SUPPLY_TYPE",t.CnxAdUnit="CNX_AD_UNIT",t.CnxVideoMimes="CNX_VIDEO_MIMES",t.CnxVideoApi="CNX_VIDEO_API",t.CnxVideoId="CNX_VIDEO_ID",t.CnxAtsEnvelope="CNX_ATS_ENVELOPE",t.CnxSupplyChain="CNX_SUPPLY_CHAIN",t.CnxIntegrationMode="CNX_INTEGRATION_MODE",t.CnxVideoFrameworks="CNX_VIDEO_FRAMEWORKS",t.CnxVideoSkippable="CNX_VIDEO_SKIPPABLE",t.CnxVideoSkipOffset="CNX_VIDEO_SKIP_OFFSET",t.CnxVideoMaxDuration="CNX_VIDEO_MAX_DURATION",t.CnxVideoStartDelay="CNX_VIDEO_START_DELAY",t.CnxVideoPlaybackMethodInteger="CNX_VIDEO_PLAYBACK_METHOD_INTEGER",t.CnxVideoPlaybackMethodsString="CNX_VIDEO_PLAYBACK_METHOD_STRING",t.CnxVideoProtocols="CNX_VIDEO_PROTOCOLS",t.CnxVideoLinearity="CNX_VIDEO_LINEARITY",t.CnxVideoPlacement="CNX_VIDEO_PLACEMENT",t.CnxVideoContext="CNX_VIDEO_CONTEXT",t.CnxVideoSizeId="CNX_VIDEO_SIZE_ID",t.CnxVideoLanguage="CNX_VIDEO_LANGUAGE",t.CnxVideoVolume="CNX_VIDEO_VOLUME",t.UserLanguage="USER_LANGUAGE",t.AppDeviceId="APP_DEVICE_ID",t.Width="WIDTH",t.Height="HEIGHT",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.DoNotTrack="DNT",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.PageUrl="PAGE_URL"}(ce||(ce={}));class de{constructor(t,e,i,s,n){this._appSettings=t,this.dl=e,this.ll=i,this.ul=s,this.pl=n,this.fl={[ce.PageUrl]:()=>this.dl.pageUrl,[ce.AppBundle]:()=>this._appSettings.bundleID,[ce.AppName]:()=>this._appSettings.appName,[ce.AppDeviceId]:t=>this.ml(t),[ce.CnxAdUnit]:()=>this.gl(),[ce.CnxSupplyType]:()=>this.vl(),[ce.CnxVideoContext]:t=>this.yl(t),[ce.CnxIntegrationMode]:()=>this.dl.isAmp?"AMP":void 0,[ce.Width]:t=>Math.floor(t.videoWidth),[ce.Height]:t=>Math.floor(t.videoHeight),[ce.CnxSupplyChain]:t=>t.supplyChain,[ce.CnxVideoApi]:()=>Object.values(Wt),[ce.CnxVideoFrameworks]:()=>Xt,[ce.CnxVideoMimes]:()=>Gt,[ce.CnxVideoProtocols]:()=>zt,[ce.CnxVideoLinearity]:()=>1,[ce.CnxVideoMaxDuration]:t=>t.videoMaxAdDuration,[ce.CnxVideoLanguage]:()=>"en",[ce.CnxVideoId]:t=>t.mediaId,[ce.CnxAtsEnvelope]:t=>t.liveRampEnvelope,[ce.CnxVideoSkippable]:t=>t.skippabilitySettings.skippable,[ce.CnxVideoSkipOffset]:t=>t.skippabilitySettings.skipafter,[ce.CnxVideoPlaybackMethodInteger]:()=>this.bl(),[ce.CnxVideoPlaybackMethodsString]:()=>this.Il(),[ce.CnxVideoPlacement]:t=>Jt(t.plcmt),[ce.CnxVideoSizeId]:()=>this._l(),[ce.CnxVideoStartDelay]:()=>this.pl,[ce.CnxVideoVolume]:t=>t.videoVolume,[ce.DoNotTrack]:()=>{},[ce.UserLanguage]:()=>this.Tl(),[ce.UserLat]:()=>this.dl.geoLocation.lat,[ce.UserLong]:()=>this.dl.geoLocation.lon}}getMacroValue(t,e){const i=this.fl[t];if(i)return i(e)}hasMacroValue(t,e){return(0,H.$K)(this.getMacroValue(t,e))}ml(t){const e=this.ll.isConsent(t.vendorId);return this.ll.isConsentConnatix()&&e?this.ll.getTrackableUser():void 0}gl(){return this.ul.isOutstream?Ot.Outstream:Ot.Instream}vl(){return this.dl.isInApp?Lt.InApp:this.dl.isMobile?Lt.MobileWeb:Lt.Web}yl(t){if(this.ul.isOutstream)return Rt.Outstream;return{[r.ProtoAdBreakTypeEnum.None]:Rt.PreRoll,[r.ProtoAdBreakTypeEnum.PreRoll]:Rt.PreRoll,[r.ProtoAdBreakTypeEnum.MidRoll]:Rt.MidRoll,[r.ProtoAdBreakTypeEnum.PostRoll]:Rt.PostRoll}[t.adBreakType]}bl(){return Ht(this.ul.playbackMode,this.ul.initialSoundMode)}Il(){const t=this.ul.playbackMode,e=this.ul.initialSoundMode;return t===r.ProtoPlayerPlaybackModeEnum.Autoplay?e===r.ProtoPlayerSoundMode.On?Nt.AutoPlaySoundOn:e===r.ProtoPlayerSoundMode.Mute?Nt.AutoPlaySoundOff:Nt.AutoPlaySoundUnknown:t===r.ProtoPlayerPlaybackModeEnum.ClickToPlay?Nt.ClickToPlay:void 0}_l(){return this.ul.isOutstream?Ft.Outstream:Ft.Instream}Tl(){const t=navigator.language;if((0,H.QM)(t))return t.split("-")[0].toUpperCase()}}var le,ue=i(8211);!function(t){t[t.Nonsecure=0]="Nonsecure",t[t.Secure=1]="Secure"}(le||(le={}));var pe=i(7531);const fe={[kt.AppNexus]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:32,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.hj)(i.placementId))return void jt.logMissingRequireParam("appnexus","placementId",e.lineItemId);const{floorPrice:s}=e;(0,H.r)(s)&&(i.reserve=s);const{deviceId:n,os:r}=e;if((0,H.QM)(n))switch(i.app=Object.assign({},i.app),r){case ue.M.Android:i.app.device_id={aaid:n};break;case ue.M.Ios:i.app.device_id={idfa:n}}return i.video=Object.assign(Object.assign({},i.video),{skippable:!!e.skippabilitySettings.skip,skipoffset:e.skippabilitySettings.skipafter}),i}},[kt.IndexExchange]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:10,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.siteId))return void jt.logMissingRequireParam("ix","siteId",e.lineItemId);const{floorPrice:s,isOutstream:n}=e;if((0,H.r)(s)&&(i.bidFloor=s,i.bidFloorCur="USD"),n){const{inFloating:t,hasFloatingCapability:s,playerWidth:n,playerHeight:r}=e;i.video.playerConfig={floatOnScroll:s,floatSize:t?[n,r]:void 0}}return i}},[kt.OpenX]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:69,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{lineItemId:s}=e;if(!(0,H.QM)(i.unit))return void jt.logMissingRequireParam("openx","unit",s);if(!(0,H.QM)(i.delDomain))return void jt.logMissingRequireParam("openx","delDomain",s);const{floorPrice:n}=e;return(0,H.r)(n)&&(i.customFloor=n),i}},[kt.Pubmatic]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:76,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.publisherId))return void jt.logMissingRequireParam("pubmatic","publisherId",e.lineItemId);const s=e.floorPrice;return(0,H.r)(s)&&(i.kadfloor=String(s)),e.isOutstream&&(i.outstreamAU=e.adUnitCode),i.kadpageurl=e.pageUrl,i}},[kt.RhythmOne]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:36,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,e){if((0,H.QM)(t.placementId))return t;jt.logMissingRequireParam("rhythmone","placementId",e.lineItemId)}},[kt.Rubicon]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:52,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{lineItemId:s}=e;if(!(0,H.hj)(i.accountId))return void jt.logMissingRequireParam("rubicon","accountId",s);if(!(0,H.hj)(i.siteId))return void jt.logMissingRequireParam("rubicon","siteId",s);if(!(0,H.hj)(i.zoneId))return void jt.logMissingRequireParam("rubicon","zoneId",s);const n=e.floorPrice;return(0,H.r)(n)&&(i.floor=n),i}},[kt.SpotX]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:165,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.channel_id))return void jt.logMissingRequireParam("spotx","channel_id",e.lineItemId);(0,H.QM)(i.ad_unit)||(i.ad_unit=e.isOutstream?Ot.Outstream:Ot.Instream);const{floorPrice:s,isOutstream:n,bidSlotId:r}=e;return(0,H.r)(s)&&(i.price_floor=s),n&&(i.outstream_options={slot:r}),i.page=e.pageUrl,i}},[kt.Telaria]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:52,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,e){const i=Object.assign({},t),{lineItemId:s,pageUrl:n}=e;if((0,H.QM)(t.adCode)){if((0,H.QM)(t.supplyCode))return i.srcPageUrl=n,t;jt.logMissingRequireParam("telaria","supplyCode",s)}else jt.logMissingRequireParam("telaria","adCode",s)}},[kt.MediaNet]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:142,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{lineItemId:s}=e;if(!(0,H.QM)(i.cid))return void jt.logMissingRequireParam("medianet","cid",s);if(!(0,H.QM)(i.crid))return void jt.logMissingRequireParam("medianet","crid",s);const{floorPrice:n}=e;return(0,H.r)(n)&&(i.bidFloor=n),i.site=Object.assign(Object.assign({},i.site||{}),{page:e.pageUrl}),i}},[kt.Adman]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:149,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.placementId))return void jt.logMissingRequireParam("adman","placementId",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidfloor=s),i.traffic=Mt.VIDEO,i}},[kt.SynacorMedia]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:void 0,gdprSupport:!1,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{lineItemId:s}=e;if(!(0,H.QM)(i.seatId))return void jt.logMissingRequireParam("synacormedia","seatId",s);if(!(0,H.QM)(i.tagId))return void jt.logMissingRequireParam("synacormedia","tagId",s);const{floorPrice:n}=e;return(0,H.r)(n)&&(i.bidfloor=n),i}},[kt.Undertone]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:677,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{lineItemId:s}=e;if((0,H.hj)(i.publisherId)){if((0,H.QM)(i.placementId))return i.video=Object.assign(Object.assign({},i.video||{}),{skippable:!!e.skippabilitySettings.skip}),i;jt.logMissingRequireParam("undertone","placementId",s)}else jt.logMissingRequireParam("undertone","publisherId",s)}},[kt.AmxRTB]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:737,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.tagId))return void jt.logMissingRequireParam("amx","tagId",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.floor=s),i}},[kt.Smaato]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:82,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const{lineItemId:i}=e;if((0,H.QM)(t.publisherId)){if((0,H.QM)(t.adspaceId))return t;jt.logMissingRequireParam("smaato","adspaceId",i)}else jt.logMissingRequireParam("smaato","publisherId",i)}},[kt.SmartAdServer]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:18,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{lineItemId:s}=e;if(!(0,H.hj)(i.siteId))return void jt.logMissingRequireParam("smartadserver","siteId",s);if(!(0,H.hj)(i.pageId))return void jt.logMissingRequireParam("smartadserver","pageId",s);if(!(0,H.hj)(i.formatId))return void jt.logMissingRequireParam("smartadserver","formatId",s);const{floorPrice:n}=e;return(0,H.r)(n)&&(i.bidfloor=n),i}},[kt.TheMediaGrid]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:686,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.r)(i.uid))return void jt.logMissingRequireParam("grid","uid",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidFloor=s),i}},[kt.Rise]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:1043,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.org))return void jt.logMissingRequireParam("rise","org",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.floorPrice=s),i}},[kt.YahooAds]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:25,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),s=(0,H.QM)(i.pos)&&(0,H.QM)(i.dcn),n=(0,H.QM)(i.pubId);if(!s&&!n)return void jt.logMissingRequireParam("yahooAds","required",e.lineItemId);const{floorPrice:r}=e;return(0,H.r)(r)&&(i.bidOverride={imp:{bidfloor:r}}),i}},[kt.Unruly]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:36,gdprSupport:!1,ccpaSupport:!1}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.hj)(i.siteId))return e.isOutstream&&(i.featureOverrides={canRunUnmissable:!0}),(0,H.r)(e.floorPrice)&&(i.floor=e.floorPrice),i;jt.logMissingRequireParam("unruly","siteId",e.lineItemId)}},[kt.Kargo]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:972,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){if((0,H.QM)(t.placementId))return t;jt.logMissingRequireParam("kargo","placementId",e.lineItemId)}},[kt.SmileWanted]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:639,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.zoneId))return void jt.logMissingRequireParam("smilewanted","zoneId",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidfloor=s),i}},[kt.TrustX]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.hj)(i.uid))return void jt.logMissingRequireParam("trustx","uid",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidFloor=s),i}},[kt.CadentApertureMx]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:183,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.tagid))return void jt.logMissingRequireParam("cadent_aperture_mx","tagid",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidfloor=s.toString()),i}},[kt.KrushMedia]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.key))return void jt.logMissingRequireParam("krushmedia","key",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidfloor=s),i.traffic=Mt.VIDEO,i}},[kt.Conversant]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:24,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.site_id))return void jt.logMissingRequireParam("conversant","site_id",e.lineItemId);i.secure=le.Secure;const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidfloor=s),i}},[kt.Criteo]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:91,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.hj)(i.networkId))return i;jt.logMissingRequireParam("criteo","networkId",e.lineItemId)}},[kt.TripleLift]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:28,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.inventoryCode))return void jt.logMissingRequireParam("triplelift","inventoryCode",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.floor=s),i}},[kt.PulsePoint]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:81,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.hj)(i.cp))return void jt.logMissingRequireParam("pulsepoint","cp",e.lineItemId);if(!(0,H.hj)(i.ct))return void jt.logMissingRequireParam("pulsepoint","ct",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidfloor=s),i}},[kt.Adtelligent]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:410,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.hj)(i.aid))return i;jt.logMissingRequireParam("adtelligent","aid",e.lineItemId)}},[kt.Yieldmo]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:173,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.placementId))return void jt.logMissingRequireParam("yieldmo","placementId",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.bidFloor=s),i}},[kt.PgamMedia]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.QM)(i.AV_PUBLISHERID)){if((0,H.QM)(i.AV_CHANNELID))return i;jt.logMissingRequireParam("pgammedia","AV_CHANNELID",e.lineItemId)}else jt.logMissingRequireParam("pgammedia","AV_PUBLISHERID",e.lineItemId)}},[kt.NextMillennium]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:1060,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.QM)(i.placement_id)||(0,H.QM)(i.group_id))return i;jt.logMissingRequireIntegrationsParams("nextMillennium",[["placement_id"],["group_id"]],e.lineItemId)}},[kt.AdYouLike]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:259,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.QM)(i.placement))return i;jt.logMissingRequireParam("adyoulike","placement",e.lineItemId)}},[kt.FreeWheelSSP]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:285,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.QM)(t.zoneId))return i;jt.logMissingRequireParam("freewheel-ssp","zoneId",e.lineItemId)}},[kt.ColossusSSP]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),s=(0,H.hj)(i.placement_id),n=(0,H.hj)(i.group_id);if(s||n)return i;jt.logMissingRequireIntegrationsParams("colossusssp",[["placement_id"],["group_id"]],e.lineItemId)}},[kt.ResetDigital]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:void 0,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,e){const i=Object.assign({},t),s=(0,H.QM)(i.pubId),n=(0,H.QM)(i.zoneId);if(s||n)return i;jt.logMissingRequireIntegrationsParams("resetdigital",[["pubId"],["zoneId"]],e.lineItemId)}},[kt.MediaFuse]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{placementId:s}=i;if(!(0,H.hj)(s))return void jt.logMissingRequireParam("mediafuse","placementId",e.lineItemId);const{floorPrice:n}=e;(0,H.r)(n)&&(i.reserve=n);const{deviceId:r,os:o}=e;if((0,H.QM)(r))switch(i.app=Object.assign({},i.app),o){case ue.M.Android:i.app.device_id={aaid:r};break;case ue.M.Ios:i.app.device_id={idfa:r}}return i.video=Object.assign(Object.assign({},i.video),{skippable:!!e.skippabilitySettings.skip,skipoffset:e.skippabilitySettings.skipafter}),i}},[kt.Sharethrough]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:80,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.pkey))return void jt.logMissingRequireParam("sharethrough","pkey",e.lineItemId);const{floorPrice:s}=e;return(0,H.r)(s)&&(i.floor=s),i}},[kt.Insticator]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:910,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,e){const i=Object.assign({},t);if((0,H.QM)(i.adUnitId))return i;jt.logMissingRequireParam("insticator","adUnitId",e.lineItemId)}},[kt.Sonobi]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:104,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t);if(!(0,H.QM)(i.placement_id)&&!(0,H.QM)(i.ad_unit))return void jt.logMissingRequireIntegrationsParams("sonobi",[["placement_id"],["ad_unit"]],e.lineItemId);const s=e.floorPrice;return(0,H.r)(s)&&(i.floor=s),i}},[kt.Ozone]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:524,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{siteId:s,placementId:n,publisherId:r}=i;if((0,H.QM)(s))if((0,H.QM)(n)){if((0,H.QM)(r))return i;jt.logMissingRequireParam("ozone",(0,pe.$0)({publisherId:r}),e.lineItemId)}else jt.logMissingRequireParam("ozone",(0,pe.$0)({placementId:n}),e.lineItemId);else jt.logMissingRequireParam("ozone",(0,pe.$0)({siteId:s}),e.lineItemId)}},[kt.ShowHeroes]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:111,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{unitId:s}=i;if((0,H.QM)(s))return i;jt.logMissingRequireParam("showHeroes",(0,pe.$0)({unitId:s}),e.lineItemId)}},[kt.SeedTag]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:157,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{adUnitId:s,publisherId:n}=i;if(!(0,H.QM)(s))return void jt.logMissingRequireParam("seedtag",(0,pe.$0)({adUnitId:s}),e.lineItemId);if(!(0,H.QM)(n))return void jt.logMissingRequireParam("seedtag",(0,pe.$0)({publisherId:n}),e.lineItemId);return i.placement="inStream",i}},[kt.MinuteMedia]:new class extends jt{constructor(){super(...arguments),this.Qd={vendorId:918,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,e){const i=Object.assign({},t),{org:s}=i;if(!(0,H.QM)(s))return void jt.logMissingRequireParam("minutemedia",(0,pe.$0)({org:s}),e.lineItemId);const{floorPrice:n}=e;return(0,H.r)(n)&&(i.floorPrice=n),i}}};var me=i(2918);class ge{constructor(t){this.ll=t}isAdapterCallable(t){const e=(t=>{const e=Object.keys(kt).find((e=>kt[e]===t));if(e)return kt[e]})(t);return!!e&&(this.ll.isGDPR()?this.Sl(e):!this.ll.isCcpaApplicable()||this.Al(e))}kl(t){return fe[t].config.gdprSupport}Sl(t){if(this.kl(t))return!0;const e=fe[t].config.vendorId,i=(0,H.hj)(e)?`${e}`:"";return this.ll.isConsent(i,me.Z)}Al(t){return!!fe[t].config.ccpaSupport||!!this.ll.isSellUserAllowed()}}class ve{constructor(t){this.El=t,this.Mi=[]}init(t){this.Cl(t)}destroy(){(0,l.i)(this.Mi)}Cl(t){this.Mi.push(this.El.onUserIdReceived.subscribe((e=>{this.Ol(t,e)})))}Ol(t,e){const i=oe(e);this.Ml(t,i)}Ml(t,e){const i={userSync:{userIds:[e]}};t.mergeConfig(i),t.refreshUserIds({submoduleNames:[e.name]})}}var ye=i(1828),be=i(6153);const Ie="pbjs";class we{constructor(t,e,i){this.Re=t,this.El=e,this.De=i,this.Ll=!0,this.Qe=new ye.o(this.Re,this.De),this.Dl=new ve(this.El)}loadPrebidJs(t){return new Promise(((e,i)=>{if(this.Nl)return e(this.Nl);this.insertPrebidJs().then((i=>{this.Nl=i,this.Nl.setConfig(t),this.Nl.setBidderConfig({bidders:[kt.TrustX,kt.TripleLift,kt.Conversant,kt.Criteo,kt.Kargo],config:{localStorageWriteAllowed:!0}},this.Ll),this.Dl.init(i),e(i)})).catch((t=>i(t)))}))}insertPrebidJs(){return new Promise(((t,e)=>{this.Qe.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-prebid-loader' type='text/javascript' src='${be.n.endPoints.assets.plugins.prebidScript}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-prebid-loader"}],container:this.Re.querySelector("head"),visible:!1}).then((i=>{if(i.iframe.contentWindow[Ie])return this.Fl(i.iframe),t(i.iframe.contentWindow[Ie]);e(new Error("pbjs could not be found on the iframe window"))})).catch((t=>{e(t)}))}))}destroy(){this.Dl.destroy()}Fl(t){const e=this.Re.global.permutive;(0,H.$K)(e)&&(t.contentWindow.permutive=e)}}var Pe=i(2641);class Te{constructor(t,e,i,s,n,r,o,a,h){this.Vl=t,this.jl=e,this.Re=i,this.Ul=s,this.ll=n,this.Qd=r,this.El=o,this.$l=a,this.ql=h,this.Hl=this.Qd.pageUrl,this.De=this.Qd.sessionId,this.xn=this.Qd.os.os,this.Jl=new we(this.Re,this.El,this.De)}requestHeaderBidder(t,e){return new Promise(((i,s)=>{this.Gl().then((s=>{const n=t.map((t=>this.zl(s,t,e).then((t=>t))));Promise.all(n).then((t=>{i(t)}))})).catch((t=>{s(r.ConnatixNoBidReasonEnum.NoBid)}))}))}setMacros(t){this.Vl.setMacros(t)}destroy(){this.Jl.destroy()}Wl(t,e){const i={lineItemSkippability:t,lineItemSkipMin:e,playerSkippability:this.Ul.skippability,playerSkipMin:this.Ul.skipMin,playerSkipAfter:this.Ul.skipAdAfter},s=(0,Pe.AA)(i),n=s.skippable?1:0;return Object.assign({skip:n},s)}zl(t,e,i){return new Promise((s=>{let n=[];if(e.availableRequests>0)if((0,H.$K)(e.lineItem.floorPricesNew)&&(0,pt.BZ)(e.lineItem.floorPricesNew.floorPrices)){const s=e.lineItem.floorPricesNew.floorPrices.map((t=>t.price));n=this.Yl(e.lineItem.floorPricesNew,e.availableRequests,e.maxBidPrice).map((n=>this.Ql(t,e.lineItem,e.bidderName,e.bidderParams,s,n,i)))}else{const s={requestedFloorPrice:e.lineItem.floorPrice,floorPriceInformation:{floorPrices:[],floorPriceIndexUsed:-1,floorPriceFactorBypassReason:r.FloorPriceBypassReasonEnum.FixedCpm}},o=this.Ql(t,e.lineItem,e.bidderName,e.bidderParams,[],s,i);n.push(o)}Promise.all(n).then((t=>{const i=[],n=[],r=e.lineItem.advertiserLineItemId;t.forEach((t=>{t.reason?n.push(t):i.push(t)}));s({bids:i,noBids:n,lineItemId:r})}))}))}Ql(t,e,i,s,n,r,o){return new Promise((a=>{this.Kl(t,e,i,s,n,r,o).then((t=>{a(t)})).catch((t=>{a(t)}))}))}Gl(){const t=he(this.ll.isGDPR(),this.ll.isCcpaApplicable(),this.Qd,this.$l,this.El.uid2Token,this.jl,this.Hl,this.ql);return new Promise(((e,i)=>{this.Jl.loadPrebidJs(t).then((t=>{e(t)})).catch((t=>{(0,wt.nF)({message:"AdManager_HeaderBidder_unable_to_load_prebidJs_script",exception:t.message,callStack:t.stack,level:wt.D_.CRITICAL,sessionId:this.De}),i(t)}))}))}Zl(t){const e=Object.keys(t),i=e.filter((e=>!(0,H.as)(t[e]))),s=e.filter((e=>(0,H.as)(t[e])));return i.forEach((e=>{null!==t[e]&&"null"!==t[e]||delete t[e]})),s.forEach((e=>{this.Zl(t[e])})),t}Kl(t,e,i,s,n,o,a){return new Promise(((h,c)=>{const d=this.Wl(e.skippability,e.skipMin),l=((t,e,i,s)=>{const n=(0,Kt.qs)(),o={code:(0,Kt.qs)(),transactionId:n,mediaTypes:Qt(t,i),ortb2Imp:{ext:{tid:n},source:{tid:n}},bids:[]};let a=0;if(!t.isOutstreamContext)switch(t.adBreakType){case r.ProtoAdBreakTypeEnum.PreRoll:a=0;break;case r.ProtoAdBreakTypeEnum.MidRoll:a=1;break;case r.ProtoAdBreakTypeEnum.PostRoll:a=-2;break;default:a=0}return o.mediaTypes.video.startdelay=a,(0,H.r)(e)&&(o.floors=(t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}))(e)),o})(a,o.requestedFloorPrice,d);try{const{width:t,height:i,maxAdDuration:n,videoVolume:r,inFloating:o,adBreakType:h,mediaLanguage:c,mediaId:u,liveRampEnvelope:p,plcmt:f}=a,m=this.Vl.replaceMacros(s,{videoWidth:t,videoHeight:i,videoMaxAdDuration:n,vendorId:e.vendorId,skippabilitySettings:d,videoVolume:r,inFloating:o,adBreakType:h,mediaLanguage:c,mediaId:u,supplyChain:se(this.jl),liveRampEnvelope:p,plcmt:f}),g=JSON.parse(m),v=this.Zl(g);l.bids=[v]}catch(t){(0,wt.nF)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:wt.D_.WARN,sessionId:this.De});const e=Object.assign({bidderName:i,reason:r.ConnatixNoBidReasonEnum.NoBid},o);return void c(e)}const u=(0,Pe.aW)();l.bids.forEach((t=>this.tu(t,o.requestedFloorPrice,e.advertiserLineItemId,u,d,a,l.code,this.ll.getDeviceId(),this.xn))),t.que.push((()=>{t.addAdUnits(l);const s={timeout:e.headerBidderTimeout,adUnits:[l],bidsBackHandler:()=>{var s;try{const a=t.getHighestCpmBids(l.code)[0];if(!a){const t=Object.assign({bidderName:i,reason:r.ConnatixNoBidReasonEnum.CsEmptyResponse},o);return void c(t)}let d,p;if(this.su(a))d=(t=>`${te}?uuid=${t.adserverTargeting.hb_cache_id}`)(a);else if(d=a.vastUrl,p=a.vastXml||a.ad,!d&&!p){(0,wt.nF)({level:wt.D_.WARN,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(a),sessionId:this.De});const t=Object.assign({bidderName:i,reason:r.ConnatixNoBidReasonEnum.CsEmptyResponse},o);return void c(t)}const f=a.cpm||a.adResponse.ad.cpm,{advertiserLineItemId:m}=e,g=Object.assign(Object.assign({},o),{bidderName:i,adTagUrl:d,adTagXml:p,lineItemId:m,cpm:f,slotId:u,bidId:l.code});(0,H.r)(o.requestedFloorPrice)&&f<o.requestedFloorPrice&&(0,wt.nF)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:wt.D_.WARN,exception:`floorPrices_${n}_floorPrice_${o.requestedFloorPrice}_index_${null===(s=o.floorPriceInformation)||void 0===s?void 0:s.floorPriceIndexUsed}_cpm_${f}_li_${e.advertiserLineItemId}`,callStack:i,sessionId:this.De},{shouldSendMaxLog:!1,throttle:5}),h(g)}catch(t){(0,wt.nF)({level:wt.D_.WARN,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack,sessionId:this.De});const e=Object.assign({bidderName:i,reason:r.ConnatixNoBidReasonEnum.NoBid},o);c(e)}}};t.requestBids(s)}))}))}tu(t,e,i,s,n,r,o,a,h){var c;const d=null===(c=fe[t.bidder])||void 0===c?void 0:c.getBidParams;if(!d)return;const{width:l,height:u,isOutstreamContext:p,maxAdDuration:f,adBreakType:m,inFloating:g,hasFloatingCapability:v}=r;t.params=d(t.params,{playerWidth:l,playerHeight:u,maxDuration:f,pageUrl:this.Hl,floorPrice:e,lineItemId:i,isOutstream:p,bidSlotId:s,skippabilitySettings:n,adBreakType:m,adUnitCode:o,inFloating:g,hasFloatingCapability:v,deviceId:a,os:h})}su(t){return t.adserverTargeting&&(0,H.QM)(t.adserverTargeting.hb_cache_id)}Yl(t,e,i){if(0===e)return[];const{floorPrices:s,recommended:n}=t,r=s.map(((e,i)=>{if(i<n)return{requestedFloorPrice:e.price,floorPriceInformation:{floorPrices:t.floorPrices.map((({price:t})=>t)),floorPriceIndexUsed:i,floorPriceFactorBypassReason:e.floorPriceBypassReason}}})).filter((t=>(0,H.$K)(t)));return this.nu(r,e,i)}nu(t,e,i){let s=e;const n=t.filter((({requestedFloorPrice:t})=>t>=i&&s>0&&(s--,!0)));if((0,pt.BZ)(n))return n;return[{requestedFloorPrice:i,floorPriceInformation:{floorPrices:t.map((({requestedFloorPrice:t})=>t)),floorPriceIndexUsed:-1,floorPriceFactorBypassReason:r.FloorPriceBypassReasonEnum.BidInHand}}]}}var _e=i(3199),Se=i(9741),Ae=i(6661);class xe{constructor(t,e,i,s,n){this.ul=t,this.jl=e,this.ph=i,this._appSettings=s,this.Ul=n,this.ru=new Map,this.ou=t=>t.replace(/\s/g,"").match(/"bidder":.+?(?=",)/).toString().split('bidder":"')[1];const r=new de(this._appSettings,this.ph.config,this.ph.services.UserManagerService,this.ul,null),o=this._appSettings.customJsTargetingObject,a=new qt(r,o),h=d.h.getSessionChildContainer(this.ph.config.sessionId).resolve(Ae.c.ExternalPrebidJSPermutiveConfig);this.au=new Te(a,this.jl,this.ph.services.GlobalDomUtilsService,this.Ul,this.ph.services.UserManagerService,this.ph.config,this.ph.services.UID2Service,this.ul.liveRampPubId,h),this.hu=new ge(this.ph.services.UserManagerService)}request(t){const{width:e,height:i}=t.callingState,s=this.cu(e,i);this.du(t.lineItemRequestDataList);const n=this.lu(t.lineItemRequestDataList);return(0,pt.BZ)(n)&&s?(t.lineItemRequestDataList=n,this.uu(t).then((e=>Promise.resolve(this.pu(e,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]})))):Promise.resolve({bids:[],noBids:[]})}setMacros(t){this.au.setMacros(t)}destroy(){this.au.destroy()}pu(t,e){const i={bids:[],noBids:[]};return t.forEach((t=>{const s=(0,Pe.ZN)(e.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=t.bidId,r=new _e.Mz,o=new $t.oO({requestedFloorPrice:t.requestedFloorPrice,prebidJsBidderName:t.bidderName,requestNumber:s.historicalMetrics.requestNumber,floorPriceInformation:t.floorPriceInformation});(0,_e.E3)(s.protoLineItem.trackers,r),((0,H.QM)(t.adTagUrl)||(0,H.QM)(t.adTagXml))&&i.bids.push({bidId:n,lineItem:s,requestMetadata:o,state:e.callingState,vastTracker:r,shouldRequestWithCredentials:!1,vastTag:t.adTagXml,url:t.adTagUrl,prebidjsCPM:t.cpm,slotId:t.slotId})})),t.noBids.forEach((t=>{const e=new $t.oO({requestedFloorPrice:t.requestedFloorPrice,requestNumber:s.historicalMetrics.requestNumber,prebidJsBidderName:t.bidderName,floorPriceInformation:t.floorPriceInformation});i.noBids.push({lineItem:s,requestMetadata:e,reason:t.reason})}))})),i}uu(t){const{width:e,height:i,media:s,soundVolume:n}=t.callingState,r={width:e,height:i,maxAdDuration:t.maxAdDuration,videoVolume:n,hasFloatingCapability:this.ul.hasFloatingCapability,inFloating:t.callingState.inFloating,adBreakType:t.callingState.adBreakState.adBreakType,mediaLanguage:s.mediaLanguage,mediaId:s.mediaId,isOutstreamContext:this.ul.isOutstream,initialSoundMode:this.ul.initialSoundMode,playbackMode:this.ul.playbackMode,liveRampEnvelope:this.ul.liveRampEnvelope,plcmt:this.ul.plcmt},o=t.lineItemRequestDataList.map((e=>this.fu(e,t.maxBidPrice)));return this.au.requestHeaderBidder(o,r)}fu(t,e){const i=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:i.protoLineItem,maxBidPrice:e,bidderName:this.ru.get(t.adManagerLineItem).bidderName,bidderParams:this.ru.get(t.adManagerLineItem).bidderParamsJSONStringWithMacros}}lu(t){return t.filter((t=>{var e;const i=(null===(e=this.ru.get(t.adManagerLineItem))||void 0===e?void 0:e.bidderName)||"";return this.mu(i)}))}du(t){t.map((t=>t.adManagerLineItem)).filter((t=>!this.ru.has(t))).forEach((t=>{try{const e=t.protoLineItem.prebidJsBidParamsJSONString,i=this.ou(e);this.ru.set(t,{bidderName:i,bidderParamsJSONStringWithMacros:e})}catch(e){this.gu(e,t.protoLineItem.advertiserLineItemId)}}))}gu(t,e){(0,wt.nF)({message:"PrebidJS_cannot_parse_bidderParams_"+e,level:wt.D_.WARN,exception:`${t}`,sessionId:this.ph.config.sessionId},{throttle:1,shouldSendMaxLog:!1})}cu(t,e){return 0!==t&&0!==e||((0,wt.nF)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${e}_destroyed:${Se.S.playerDestroyed}`,level:wt.D_.CRITICAL,sessionId:this.ph.config.sessionId},{throttle:5}),!1)}mu(t){return this.hu.isAdapterCallable(t)}}var ke,Ee=i(9357);class Ce{constructor(){this.vu=Date.now(),this.yu={advertiser:{}}}addPrebid(t){(0,H.$K)(this.yu.advertiser[t])||this.bu(t),this.yu.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,e){(0,H.$K)(this.yu.advertiser[t])||this.bu(t),this.yu.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:e})}addImpression(t,e){(0,H.$K)(this.yu.advertiser[t])||this.bu(t),this.yu.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:e})}shouldRequestLineItem(t){const e=Date.now();return!(this.Iu(e,3)&&this.wu(t,e,5)<-.5&&this.Pu(t,e,3)>=11.5&&this._u(t,e,10,.1)<.35)}Iu(t,e){return t-this.vu>=e*Ee.uD}wu(t,e,i){const s=this.yu.advertiser[t];if(!(0,H.$K)(s))return-1;const n=this.Tu(s.impressionRevenueList,e,i).map((t=>t.obfuscatedPrice));let r=0;return(0,pt.BZ)(n)&&(r=n.reduce(((t,e)=>t+(0,Pe.RC)(e)))),this.Su(r)}Pu(t,e,i){const s=this.yu.advertiser[t];if(!(0,H.$K)(s))return-1;const n=this.Tu(s.prebidData,e,i).length;return this.Su(n)}_u(t,e,i,s){const n=this.yu.advertiser[t];if(!(0,H.$K)(n))return-1;const r=this.Tu(n.impressionRevenueList,e,i).map((t=>t.floorPrice)),o=this.Au(r,s);return this.Su(o)}Tu(t,e,i){const s=e-Ee.s_,n=e-i*Ee.uD,r=[];for(let e=t.length-1;e>=0&&t[e].timestamp>=n;e--)t[e].timestamp<=s&&r.push(t[e]);return r}Su(t){return 0===t?-1:t}bu(t){this.yu.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}Au(t,e){if(0===t.length)return 0;if(e<=0)return t[0];if(e>=1)return t[t.length-1];const i=((t=t.sort(((t,e)=>t-e))).length-1)*e,s=Math.floor(i),n=s+1,r=i%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}!function(t){t[t.Index=17]="Index"}(ke||(ke={}));class Oe{}Oe.GLOBAL_DISPLAY_SIZES=[{w:300,h:250},{w:728,h:90},{w:320,h:50},{w:300,h:600},{w:160,h:600},{w:970,h:250},{w:300,h:50},{w:336,h:280},{w:320,h:100},{w:320,h:320},{w:300,h:300},{w:120,h:600},{w:970,h:90},{w:900,h:550},{w:320,h:480},{w:250,h:250},{w:200,h:200}],Oe.NONLINEAR_DISPLAY_SIZES=[{w:450,h:50}],Oe.NONLINEAR_AD_HEIGHT=50,Oe.CUSTOM_DISPLAY_FORMATS={[ke.Index]:[{w:300,h:250},{w:320,h:50},{w:728,h:90},{w:300,h:600},{w:160,h:600},{w:970,h:250},{w:300,h:50},{w:320,h:100},{w:336,h:280},{w:120,h:600},{w:970,h:90},{w:320,h:480},{w:800,h:250},{w:300,h:105},{w:300,h:100},{w:750,h:300},{w:750,h:200},{w:320,h:320},{w:250,h:250},{w:300,h:300}]};class Le{static parseAggregatorBidResponse(t,e,i,s=r.ProtoIdentityPartnerEnum.None){return{lineItem:e,vastTracker:this.ku(t,e),state:i,requestMetadata:new $t.oO({requestedFloorPrice:t.requestedFloorPrice,isUserSynced:t.syncedUser,requestNumber:e.historicalMetrics.requestNumber,encryptedPrice:t.encryptedPrice,dspId:t.dspId,rtbAdomain:t.adomain,rtbSeatId:t.seatId,rtbCampainId:t.campaignId,cnxBidId:t.cnxBidId,requestTrackingHandledByServer:!0,logAuctionInformation:t.logAuctionInformation,auctionBidId:t.auctionBidId,rtbRequestId:t.rtbRequestId,liveRampType:t.liveRampType,floorPriceInformation:t.floorPriceInformation,discount:t.discount,serverBillingNoticeUrls:t.serverBillingNoticeUrls,hasIIQLookup:t.hasIIQLookup,hasLexiconEnvelopeBeenUsed:t.hasLexiconEnvelopeBeenUsed,identityPartnerUsed:s}),creativeId:t.creativeId,dimensions:{width:t.width,height:t.height},html:t.vastTag,mime:t.mime,obfuscatedPrice:t.gtkpbp,successRate:t.successRate,vastTag:t.vastTag}}static ku(t,e){const i=new _e.Mz;(0,_e.E3)(e.protoLineItem.trackers,i);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter((t=>(0,H.QM)(t))).map((t=>(0,_e.U4)(t)));return i.adImpression.push(...s),(0,H.QM)(t.winNoticeUrl)&&i.adWin.push((0,_e.U4)(t.winNoticeUrl)),i}}var Me=i(1006),Re=i(4782),Be=i(8102),De=i(6029),Ne=i(942),Fe=i(7298),$e=i(5027),Ve=i(1280),je=i(7945),Ue=i(307),qe=i(2450),He=i(4411),Je=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Ge{constructor(t,e,i,s,n,r,o,a,h){this.Eu=t,this.xu=e,this.ph=i,this.ah=s,this.Cu=n,this.Ou=r,this.de=o,this.Mu=a,this.Lu=h,this.Bu=new Map,this.Ru=new Map,this.Du=!1,this.Nu=!1,this.ga=d.h.getSessionChildContainer(this.ph.config.sessionId).resolve(Ve.G),this.Du=this.ga.isOmsdkFullSupport}request(t){return Je(this,void 0,void 0,(function*(){const{width:e,height:i}=t.callingState,s=this.cu(e,i),n=yield this.Fu(t);return!s||Object.keys(n.lineItems).length<=0?{bids:[],noBids:[]}:(n.callAssertiveYield&&(0,Kt.Vm)([90,10])&&(0,wt.nF)({message:"RtbCallAggregator_request_callAssertiveYield",exception:this.ah.region,level:wt.D_.INFO},{pacing:1}),this.Vu(n).then((e=>((0,H.$K)(n.liveRampAtsEnvelope)&&qe.$.setEnvelopeStatus(e.liveRampEnvelopeStatus),this.Uu(e,t)))).catch((t=>((0,wt.nF)({message:"RtbCallAggregator",exception:t.message,level:wt.D_.CRITICAL,sessionId:this.ph.config.sessionId},{pacing:1}),{bids:[],noBids:[]}))))}))}Uu(t,e){const i={bids:[],noBids:[]};return e.lineItemRequestDataList.forEach((i=>{var s;(null===(s=t.lineItemResponses)||void 0===s?void 0:s.find((t=>t.id===i.adManagerLineItem.protoLineItem.advertiserLineItemId)))||this.Mu.registerUnfulfilledRequest(i.adManagerLineItem,e.callingState.adOpportunity.id)})),t.lineItemResponses.forEach((t=>{var s;const n=(0,Pe.ZN)(e.lineItemRequestDataList,t.id),r=(0,pt.BZ)(t.bids)||(0,H.r)(t.noBidsCount);if(this.qu(t),(0,H.$K)(t.cachedFloorPrice)&&!this.Bu.has(t.id)&&this.Ru.set(t.id,t.cachedFloorPrice),r||this.Mu.registerUnfulfilledRequest(n,e.callingState.adOpportunity.id),n.protoLineItem.shouldThrottlePacing&&r)try{this.de.updateLineItemResponse(n.protoLineItem,(null===(s=t.bids)||void 0===s?void 0:s.length)||0)}catch(t){(0,wt.nF)({level:wt.D_.WARN,message:"RtbCallAggregator_updateLineItemResponse",exception:`lineItemId:${n.protoLineItem.advertiserLineItemId}`},{throttle:1})}t.bids.forEach((s=>{const r=n.protoLineItem;if(s=Object.assign(Object.assign({},s),this.Hu(r)),this.Ju(r,s))return(0,wt.nF)({level:wt.D_.WARN,message:"RtbCallAggregator_nonLinear_banner_0_dimensions",exception:`lineItemId:${n.protoLineItem.advertiserLineItemId}`,sessionId:this.ph.config.sessionId},{throttle:5}),void i.noBids.push(this.Gu(n));const o=Le.parseAggregatorBidResponse(s,n,e.callingState,t.identityPartnerUsed);i.bids.push(o)}));const o=t.noBidsCount;for(let t=0;t<o;t++)i.noBids.push(this.Gu(n))})),(0,H.$K)(t.assertiveYieldPayload)&&!(0,H.Ft)(t.assertiveYieldPayload)&&this.Lu.saveAuctionPayload(t.assertiveYieldPayload,i),i}qu(t){var e;const i=this.Bu.get(t.id);if(!(0,pt.BZ)(i))return;const s=null===(e=t.cachedFloorPrice)||void 0===e?void 0:e.floorPrices[0],n=null==i?void 0:i.filter((t=>t.price===s)),r=t.bids.length>0;null==n||n.forEach((t=>{t.priceOutcome=r?Re.f.Success:Re.f.Fail}))}Hu(t){return{}}Ju(t,e){var i;return(0,Pe.lZ)(t.adType,null===(i=t.nonlinearLineItemSettings)||void 0===i?void 0:i.nonLinearRequestType)&&(!e.height||!e.width)}Gu(t){return{lineItem:t,requestMetadata:new $t.oO({requestNumber:t.historicalMetrics.requestNumber,partnerReason:r.PartnerNoBidReasonEnum.Unknown,requestTrackingHandledByServer:!0}),reason:r.ConnatixNoBidReasonEnum.NoBid}}zu(t,e){if(t.protoLineItem.adType!==r.ProtoAdType.Overlay)return null;const i=e.adContainerState.get(r.ProtoAdType.Video),s=e.adContainerState.get(r.ProtoAdType.Overlay);return i.height!==s.height||i.width!==s.width?{width:s.width,height:s.height}:void 0}Wu(t,e){const i={};return t.filter((t=>this.Yu(t))).forEach((t=>{const s=t.adManagerLineItem,n=this.zu(s,e),r=this.Xu(s);let o=null;try{o=this.Qu(s)}catch(t){throw(0,wt.nF)({message:"RtbCallAggregator_getFloorPrice_error",level:wt.D_.CRITICAL,exception:(0,Kt.W$)(t).message},{pacing:5,throttle:1}),(0,Kt.W$)(t)}i[s.protoLineItem.advertiserLineItemId]=Object.assign({availableRequests:t.maxAvailableRequests,gdprConsent:this.ph.services.UserManagerService.isConsent(s.protoLineItem.vendorId),cachedFloorPrice:o,publisherLineItemId:s.protoLineItem.publisherLineItemId,slotHeight:null==n?void 0:n.height,slotWidth:null==n?void 0:n.width,requestNumber:s.historicalMetrics.requestNumber},r)})),i}Qu(t){if(t.protoLineItem.floorPricesNew&&(0,pt.BZ)(t.protoLineItem.floorPricesNew.floorPrices)){if(!this.Nu)return{floorPrices:[t.protoLineItem.floorPricesNew.floorPrices[0].price],recommended:1};let e=[];this.Bu.has(t.protoLineItem.advertiserLineItemId)?e=this.Bu.get(t.protoLineItem.advertiserLineItemId)||[]:(e=t.protoLineItem.floorPricesNew.floorPrices.slice(0,4).sort(((t,e)=>e.price-t.price)).map((t=>({price:(0,Kt.ox)(t.price),priceOutcome:Re.f.Unused,floorPriceBypassReason:t.floorPriceBypassReason}))),this.Bu.set(t.protoLineItem.advertiserLineItemId,e));const i=(0,Me.n)(e);return(0,H.Ft)(i)?((0,wt.nF)({message:"RtbCallAggregator_getFloorPrice_nextBestFloorPrice_is_null",level:wt.D_.CRITICAL},{pacing:5,throttle:1}),null):{floorPrices:[i.price],recommended:1}}return this.Ru.get(t.protoLineItem.advertiserLineItemId)||null}Xu(t){const e=(0,Pe.AA)({playerSkippability:this.xu.skippability,playerSkipMin:this.xu.skipMin,playerSkipAfter:this.xu.skipAdAfter,lineItemSkippability:t.protoLineItem.skippability,lineItemSkipMin:t.protoLineItem.skipMin}),i=e.skippable?r.ProtoSkipEnabledEnum.Yes:r.ProtoSkipEnabledEnum.No;return Object.assign(Object.assign({},e),{skip:i})}Yu(t){if(t.adManagerLineItem.protoLineItem.forceCallingInEveryAO)return!0;const{adType:e,demandPartnerId:i,nonlinearLineItemSettings:s}=t.adManagerLineItem.protoLineItem,{width:n,height:r}=this.ah.playerDimensions;return this.Ku(e,n,r,i,null==s?void 0:s.nonLinearRequestType)?this.Cu.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId):((0,wt.nF)({message:"RtbCallAggregator_not_supported_banner_sizes",level:wt.D_.INFO},{pacing:1,throttle:100}),!1)}Zu(t){if(t===r.ProtoAdBreakTypeEnum.None||this.Eu)return r.ProtoAdRollTypeEnum.Outstream;const e=r.ProtoAdBreakTypeEnum[t];return r.ProtoAdRollTypeEnum[e]}Fu(t){var e,i,s,n,o;return Je(this,void 0,void 0,(function*(){const{width:a,height:h,viewability:c}=t.callingState,{width:l,height:u}=this.ah.playerDimensions,p=d.h.getGlobalContainer().resolve(De.H),f=d.h.getGlobalContainer().resolve(Ne.L),m=d.h.getGlobalContainer().resolve(Be.c),g=yield m.getLoadedCookieDeprecationLabel(),v={id:null===(e=this.ph.services.UserManagerService)||void 0===e?void 0:e.syncedPanoIndivId,type:r.ProtoPanoramaIdTypeEnum.PanoIndiv},y=p.getProtoData();let b=null===(i=this.ph.services.UID2Service)||void 0===i?void 0:i.uid2Token;return(0,H.QM)(b)||(null===(s=y.identityProviderEidsList)||void 0===s?void 0:s.some((t=>"uid2"===t.source)))||(b=d.h.getGlobalContainer().resolve(Fe.n).getItem("uid2"),(0,H.QM)(b)&&(0,wt.nF)({level:wt.D_.INFO,message:"RtbCallAggregator_UID2_found",callStack:this.ph.config.pageDomain},{throttle:1})),{metadata:this.ah.trackingRequestMeta,gdprCompliant:this.ph.services.UserManagerService.isGDPR(),gdprConsentData:this.ph.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:h,videoWidth:a,testMode:"true"===(0,It.Ph)("cnxRtbTest",this.ph.config.pageUrl),explorationMode:this.ph.config.explorationMode,viewability:c,outstream:this.Eu,domainURL:this.ph.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.ph.config.appVersion,deviceID:this.ph.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.ph.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.ph.services.UserManagerService.getUsPrivacyString(),gdprConsentMode:this.ph.services.UserManagerService.gdprConsentMode,customMacros:this.ph.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.Wu(t.lineItemRequestDataList,t.callingState),maxBidPrice:t.maxBidPrice,playerWidth:l,playerHeight:u,useNewSkippability:!0,liveRampAtsEnvelope:this.ph.services.UserManagerService.identityEnvelope,lineItemAbTestInformation:this.Ou,connectionType:$e.n.getConnectionType(this.ph.config.deviceType),OMSDKSupport:this.Du,OMSDKVersion:this.ga.omsdkVersion,identityProviderData:y,lexiconUids:f.getUids(),userIdentificationPending:null===(n=this.ph.services.UserManagerService)||void 0===n?void 0:n.userIdentificationPending,rollType:this.Zu(t.callingState.adBreakState.adBreakType),coreSyncTimestamp:null===(o=this.ph.services.UserManagerService)||void 0===o?void 0:o.coreSyncTimestamp,callAssertiveYield:"us-east-2"===this.ah.region,panorama:v,uid2Token:b,cookieDeprecationLabel:g}}))}Vu(t){return He.n.sendProtoRequest({endpoint:be.n.endPoints.api.rtb,protoRequest:r.ProtoRtbRequest,protoResponse:r.ProtoRtbResponse,requestData:t,queryParams:{[Ue.Fk]:je.g.version,[Ue.cc]:be.n.tier},shouldLogErrors:!1,shouldSetClientHintsHeaders:!0})}cu(t,e){return 0!==t&&0!==e||((0,wt.nF)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${e}_destroyed:${Se.S.playerDestroyed}`,level:wt.D_.CRITICAL,sessionId:this.ph.config.sessionId},{throttle:5}),!1)}Ku(t,e,i,s,n){let o=Oe.GLOBAL_DISPLAY_SIZES;return s===ke.Index&&(o=Oe.CUSTOM_DISPLAY_FORMATS[ke.Index]),t===r.ProtoAdType.Overlay?o.some((t=>e>=t.w&&i>=t.h)):!(0,Pe.lZ)(t,n)||(o=[...o,...Oe.NONLINEAR_DISPLAY_SIZES],o.some((t=>e>=t.w&&t.h<=Oe.NONLINEAR_AD_HEIGHT)))}}var ze;!function(t){t.SDK_NAME_ON_PUB_WINDOW="apstag",t.MEDIA_TYPE="video",t.VAST_TAG_BASE_URL="https://aax.amazon-adsystem.com/e/dtb/vast",t.APSTAG_URL="https://c.amazon-adsystem.com/aax2/apstag.js"}(ze||(ze={}));class We{static getTargetingFromBid(t){var e,i;return{amzniid:t.amzniid||(null===(e=t.targeting)||void 0===e?void 0:e.amzniid),amznbid:t.amznbid||(null===(i=t.targeting)||void 0===i?void 0:i.amznbid)}}static hasTargeting(t){const e=We.getTargetingFromBid(t);return(0,H.QM)(e.amzniid)&&(0,H.QM)(e.amznbid)}constructor(t){this.ep=t.amznbid,this.sp=t.amzniid}get amazonBidCode(){return this.ep}getVast(){return`${ze.VAST_TAG_BASE_URL}?b=${this.sp}&pp=${this.ep}&rnd=${(0,Kt.qs)()}`}}class Ye{static hasTargetings(t){const e=Ye.getTargetingsFromBid(t);return(0,pt.BZ)(e)}static getTargetingsFromBid(t){const e=Ye.getDeals(t);return(0,pt.BZ)(e)?e.map((e=>{const i=`${e}amzniid`;return{targetingDeal:e,targetingKey:i,targetingValue:t.targeting[i]}})).filter((t=>(0,H.QM)(t.targetingValue))):[]}static getDeals(t){var e;return t.amzndeals||(null===(e=t.targeting)||void 0===e?void 0:e.amzndeals)}constructor(t){this.np=t.targetingDeal,this.rp=t.targetingKey,this.op=t.targetingValue}get targetingDeal(){return this.np}get targetingKey(){return this.rp}get targetingValue(){return this.op}getVast(){return`${ze.VAST_TAG_BASE_URL}?b=${this.op}&rnd=${(0,Kt.qs)()}`}}class Xe{static getTargetingFromBid(t){var e,i;return{amzniid_sp:t.amzniid_sp||(null===(e=t.targeting)||void 0===e?void 0:e.amzniid_sp),amznbid_sp:t.amznbid_sp||(null===(i=t.targeting)||void 0===i?void 0:i.amznbid_sp)}}static hasTargeting(t){const e=Xe.getTargetingFromBid(t);return(0,H.QM)(e.amzniid_sp)&&(0,H.QM)(e.amznbid_sp)}constructor(t){this.ep=t.amznbid_sp,this.sp=t.amzniid_sp}get amazonBidCode(){return this.ep}getVast(){return`${ze.VAST_TAG_BASE_URL}?b=${this.sp}&rnd=${(0,Kt.qs)()}`}}class Qe{static createObjects(t,e){const i=[];switch(t.creativeType){case r.ProtoCreativeTypeEnum.Tam:if(We.hasTargeting(e)){const t=We.getTargetingFromBid(e);i.push(new We(t))}break;case r.ProtoCreativeTypeEnum.TamDeal:if(Ye.hasTargetings(e)){const s=Ye.getTargetingsFromBid(e).filter((e=>e.targetingDeal===t.amazonDealId)).map((t=>new Ye(t)));i.push(...s)}break;case r.ProtoCreativeTypeEnum.TamPrivateAuction:if(Xe.hasTargeting(e)){const t=Xe.getTargetingFromBid(e);i.push(new Xe(t))}}return i}}class Ke{constructor(t,e){this.ap=t,this.dp=[],e.forEach((t=>{const e=Qe.createObjects(this.ap,t);this.dp.push(...e)}))}get amazonBidList(){return this.dp}get lineItem(){return this.ap}get hasCoreTamDependency(){return this.dp.every((t=>(0,H.QM)(t.amazonBidCode)))}}var Ze=i(1836),ti=i(8244),ei=i(5883),ii=i(9846),si=i(4265),ni=i(5950);class ri{static metadataModelFromOldToNew(t){return new ni.Metadata({abTestId:t.abTestId,bundleAbId:t.bundleAbId,bundleId:t.bundleId,bundleAbPart:t.bundlePart,clientAb0:t.clientAb0,clientAb1:t.clientAb1,clientAb2:t.clientAb2,clientAb3:t.clientAb3,clientAb4:t.clientAb4,clientAb5:t.clientAb5,serverAb0:t.serverAb0,serverAb1:t.serverAb1,customParam1:t.customParam1,customParam2:t.customParam2,customParam3:t.customParam3,customParam4:t.customParam4,customParam5:t.customParam5,iiqEnabledAb:t.iiqEnabledAB,iiqGroupAb:t.iiqGroupAB,isIdentityEnhanced:t.isIdentityEnhanced,isPageInFocus:t.isPageInFocus,pageUrl:t.pageUrl,playerId:t.playerId,sessionId:t.sessionId,userId:t.userId,shouldTrackAllRequests:t.shouldTrackAllRequests,version:t.version,browser:t.browser?new ei.Browser({browserType:t.browser.browserType,browserVersion:t.browser.browserVersion,deviceType:this.lp[t.browser.device],osCode:t.browser.osCode}):void 0,geo:t.geo?new si.GeoLocation({cityId:t.geo.cityId,countryGeoId:t.geo.countryGeoId,zipCode:t.geo.zipcode,dmaId:t.geo.dmaId,ip:t.geo.ip,lat:t.geo.lat,lon:t.geo.lon,subdivisionId:t.geo.subdivisionId}):void 0,eventTimestamp:t.eventTimestamp,implementationType:ri.up[t.implementationType]})}}ri.up={[r.ProtoImplementationType.Amp]:ii.ImplementationType.AMP,[r.ProtoImplementationType.Standalone]:ii.ImplementationType.STANDALONE,[r.ProtoImplementationType.Web]:ii.ImplementationType.WEB},ri.lp={[r.ProtoDeviceType.Desktop]:ei.DeviceType.DESKTOP,[r.ProtoDeviceType.Smartphone]:ei.DeviceType.SMARTPHONE,[r.ProtoDeviceType.Tablet]:ei.DeviceType.TABLET,[r.ProtoDeviceType.GameConsole]:ei.DeviceType.GAME_CONSOLE,[r.ProtoDeviceType.PDA]:ei.DeviceType.PDA,[r.ProtoDeviceType.SmartTV]:ei.DeviceType.SMARTTV,[r.ProtoDeviceType.WearableComputer]:ei.DeviceType.WEARABLE_COMPUTER,[r.ProtoDeviceType.Unrecognized]:ei.DeviceType.UNRECOGNIZED};var oi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class ai{constructor(t){this.ah=t}callCoreTam(t){return oi(this,void 0,void 0,(function*(){const e=t.map((t=>{const e=new Ze.tt({code:t.coreTamCode,lineItemId:t.lineItemId,metadata:ri.metadataModelFromOldToNew(this.ah.trackingRequestMeta)});return this.pp(e)}));return Promise.all(e)}))}pp(t){return oi(this,void 0,void 0,(function*(){try{const e=yield He.n.sendProtoRequest({endpoint:be.n.endPoints.api.tam,protoRequest:Ze.tt,protoResponse:ti.I,requestData:t,queryParams:{[Ue.Fk]:je.g.version,[Ue.cc]:be.n.tier},shouldLogErrors:!0});return(0,H.QM)(e.errorMessage)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:r.ConnatixNoBidReasonEnum.RequestException}:(0,H.QM)(e.encryptedBidPrice)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:e,rejectReason:null}:{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:r.ConnatixNoBidReasonEnum.InvalidResponse}}catch(e){return{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:r.ConnatixNoBidReasonEnum.RequestException}}}))}}var hi=i(3341),ci=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class di{constructor(t,e,i,s,n,r,o){this.ph=t,this.fp=e,this.mp=i,this.Re=s,this.ll=n,this.De=r,this.ah=o;const a=this.ph.config.topWindow;this.gp=(0,Kt.pE)(a).topFrame}requestBids(t){return this.vp(t)}vp(t){return ci(this,void 0,void 0,(function*(){try{yield this.yp();const e=yield this.bp(),i=this.wp(t,e),s=yield this.Pp(i);return this._p(i,s)}catch(e){return this.Sp(t,e)}}))}Sp(t,e){return e.message?t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:r.ConnatixNoBidReasonEnum.CsRequestException}]}))):t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:e}]})))}_p(t,e){return t.map((t=>{const i=e.filter((e=>t.lineItem.advertiserLineItemId===e.lineItemId));return this.Ap(t,i)}))}Ap(t,e){return t.hasCoreTamDependency?this.kp(t,e):this.Ep(t)}Ep(t){const e=t.amazonBidList.map((e=>({encryptedPrice:null,vastTag:e.getVast(),ofskp:(0,Pe.pd)(t.lineItem.floorPrice),successRate:t.lineItem.successRate,slotId:(0,Pe.aW)()})));return(0,pt.BZ)(e)?{bids:e,lineItemId:t.lineItem.advertiserLineItemId,noBids:[]}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:r.ConnatixNoBidReasonEnum.NoBid}]}}kp(t,e){const i=e.map((e=>this.xp(t,e))).filter((t=>t.amazonBid&&!(0,H.Cz)(t.coreTamRequestOutput.rejectReason,r.ConnatixNoBidReasonEnum))).map((t=>({encryptedPrice:t.coreTamRequestOutput.coreTamBidResponse.encryptedBidPrice,vastTag:t.amazonBid.getVast(),ofskp:t.coreTamRequestOutput.coreTamBidResponse.obfuscatedPrice,slotId:(0,Pe.aW)()}))),s=e.filter((t=>t.rejectReason)).map((t=>({reason:t.rejectReason})));return(0,pt.BZ)(i)||(0,pt.BZ)(s)?{bids:i,noBids:s,lineItemId:t.lineItem.advertiserLineItemId}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:r.ConnatixNoBidReasonEnum.NoBid}]}}xp(t,e){return{coreTamRequestOutput:e,amazonBid:t.amazonBidList.find((t=>t.amazonBidCode===e.coreTamCode))}}Pp(t){return ci(this,void 0,void 0,(function*(){const e=t.reduce(this.Cp,[]);return this.Op(e)}))}Cp(t,e){return[...t,...e.amazonBidList.filter((t=>t.amazonBidCode)).map((t=>({lineItemId:e.lineItem.advertiserLineItemId,coreTamCode:t.amazonBidCode})))]}wp(t,e){return t.map((t=>new Ke(t,e)))}Op(t){return this.mp.callCoreTam(t)}bp(){return new Promise(((t,e)=>{(0,H.$K)(this.Mp)?this.Mp.fetchBids({slots:[{slotID:this.fp,mediaType:ze.MEDIA_TYPE}]},(i=>{(0,pt.BZ)(i)?t(i):e(r.ConnatixNoBidReasonEnum.EmptyResponse)})):e(r.ConnatixNoBidReasonEnum.NoLibInPage)}))}yp(){return ci(this,void 0,void 0,(function*(){if(!(0,H.$K)(this.Mp)){if((0,H.QM)(this.ah.amazonTamPubId)){const t=yield this.Lp();return this.Mp=t,void this.Mp.init({pubID:this.ah.amazonTamPubId,deals:!0})}this.Mp=this.gp[ze.SDK_NAME_ON_PUB_WINDOW]}}))}Dp(t){if(!this.ll.isConsentRequired())return;const e=this.ll.getConsentApiFromWindow();if((0,H.$K)(e)){const i=this.ll.getGdprConsentApiType();(0,q.O7)(t,hi.w[i].windowPropertyName,e)}else(0,wt.nF)({message:"TamRequester_Required__tcfapi_NotFound",level:wt.D_.INFO},{throttle:1,shouldSendMaxLog:!1})}Lp(){const t=new ye.o(this.Re,this.De);return new Promise(((e,i)=>{t.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-apstag-loader' type='text/javascript' src='${ze.APSTAG_URL}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-apstag-loader"}],container:this.Re.querySelector("head"),visible:!1,title:vt.$b}).then((t=>{if(this.Dp(t.iframe.contentWindow),t.iframe.contentWindow[ze.SDK_NAME_ON_PUB_WINDOW])return e(t.iframe.contentWindow[ze.SDK_NAME_ON_PUB_WINDOW]);i(new Error("Amazon TAM not found"))})).catch((t=>{i(t)}))}))}}class li{constructor(t,e,i){this.ph=t,this.Np=e,this.ah=i,this.Fp=new di(this.ph,this.Np,new ai(this.ah),this.ph.services.GlobalDomUtilsService,this.ph.services.UserManagerService,this.ph.config.sessionId,this.ah)}request(t){const{width:e,height:i}=t.callingState;return this.cu(e,i)?this.Vp(t).then((e=>Promise.resolve(this.jp(e,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}Vp(t){const e=t.lineItemRequestDataList.map((t=>t.adManagerLineItem.protoLineItem));return this.Fp.requestBids(e)}jp(t,e){const i={bids:[],noBids:[]};return t.forEach((t=>{const s=(0,Pe.ZN)(e.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=new _e.Mz,r=new $t.oO({encryptedPrice:t.encryptedPrice,requestNumber:s.historicalMetrics.requestNumber});(0,_e.E3)(s.protoLineItem.trackers,n),i.bids.push({requestMetadata:r,vastTracker:n,lineItem:s,url:t.vastTag,state:e.callingState,obfuscatedPrice:t.ofskp,shouldRequestWithCredentials:!1,slotId:t.slotId})})),t.noBids.forEach((t=>{i.noBids.push({lineItem:s,requestMetadata:new $t.oO({requestNumber:s.historicalMetrics.requestNumber}),reason:t.reason})}))})),i}cu(t,e){return 0!==t&&0!==e||((0,wt.nF)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${e}_destroyed:${Se.S.playerDestroyed}`,level:wt.D_.CRITICAL,sessionId:this.ph.config.sessionId},{throttle:5}),!1)}}var ui=i(5919),pi=i(9592);const fi={[pi.f.HandlingSdkUrl]:r.ConnatixNoBidReasonEnum.CsRequestException,[pi.f.NetworkRequestUrl]:r.ConnatixNoBidReasonEnum.CsRequestException,[pi.f.InvalidCreativeType]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.XmlInvalidString]:r.ConnatixNoBidReasonEnum.CsEmptyResponse,[pi.f.XmlParseGeneral]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.XmlInvalidTree]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.XmlInvalidAd]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.XmlAdaptorWrapperLimit]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.VastVersionNotSupported]:r.ConnatixNoBidReasonEnum.VastVersionNotSupported,[pi.f.HTMLUnknownMimeType]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.HTMLNotEnoughData]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.ImaAdsManagerInit]:r.ConnatixNoBidReasonEnum.CsRequestException,[pi.f.ImaVastEmptyResponse]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.ImaRequestException]:r.ConnatixNoBidReasonEnum.CsRequestException,[pi.f.ImaTimeout]:r.ConnatixNoBidReasonEnum.Timeout,[pi.f.ImaInvalidResponse]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.InvalidCreativeUrl]:r.ConnatixNoBidReasonEnum.CsRequestException,[pi.f.BidIsNotTargetingAllowedEver]:r.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver,[pi.f.VastMediaFilesNotSupported]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.ExternalSdkTimeout]:r.ConnatixNoBidReasonEnum.Timeout,[pi.f.ExternalSdkInvalidResponse]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[pi.f.VastContainsBannedUrls]:r.ConnatixNoBidReasonEnum.VastHasBannedUrls};class mi{static getSelectionScore(t){return t.yoScore}}class gi{static sortDescBySelectionScore(t){return[...t].sort(((t,e)=>mi.getSelectionScore(e)-mi.getSelectionScore(t)))}static getBestBySelectionScore(t){return gi.sortDescBySelectionScore(t)[0]}}var vi,yi=i(8659);!function(t){t[t.ON_BID=0]="ON_BID",t[t.ON_BID_LOADING=1]="ON_BID_LOADING",t[t.ON_BID_LOADING_CONSUMED=2]="ON_BID_LOADING_CONSUMED",t[t.ON_BID_LOADED=3]="ON_BID_LOADED",t[t.ON_BID_STARTING=4]="ON_BID_STARTING",t[t.ON_BID_IN_IMPRESSION=5]="ON_BID_IN_IMPRESSION",t[t.ON_BID_LOADED_CONSUMED=6]="ON_BID_LOADED_CONSUMED"}(vi||(vi={}));class bi{constructor(){this.$p=new n.x,this.qp=new n.x,this.Jp=new n.x,this.Gp=new n.x,this.zp=new n.x,this.Wp=new n.x,this.Yp=new n.x,this.Xp={[vi.ON_BID]:this.$p,[vi.ON_BID_LOADING]:this.qp,[vi.ON_BID_LOADING_CONSUMED]:this.Wp,[vi.ON_BID_LOADED]:this.Jp,[vi.ON_BID_STARTING]:this.Gp,[vi.ON_BID_IN_IMPRESSION]:this.zp,[vi.ON_BID_LOADED_CONSUMED]:this.Yp},this.Qp={[o.wy.IDLE]:t=>{this.$p.next(t)},[o.wy.LOADING]:t=>{this.qp.next(t)},[o.wy.LOADED]:t=>{this.Jp.next(t)},[o.wy.STARTING]:t=>{this.Gp.next(t)},[o.wy.IMPRESSION]:t=>{this.zp.next(t)},[o.wy.CONSUMED_LOADING]:t=>{this.Wp.next(t)},[o.wy.CONSUMED_LOADED]:t=>{this.Yp.next(t)},[o.wy.INVALIDATED]:t=>{[o.wy.IDLE,o.wy.LOADING].includes(t.status)?this.Wp.next(t):this.Yp.next(t)}}}bidStatusChanged(t,e){(0,this.Qp[e])(t)}getBidObservable(t){return this.Xp[t].asObservable()}}var Ii=i(7597),wi=i(1310),Pi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let Ti=class{constructor(){this.dp=[],this.Zp=new bi,this.tf=new Map}getEvents(t){return this.Zp.getBidObservable(t)}addBid(t){this.ef(t),this.dp.push(t),this.Zp.bidStatusChanged(t,o.wy.IDLE)}getAllBids(){return this.if(),this.dp}getAllBidsExceptAdxLookup(){return this.getAllBids().filter((t=>t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId!==Ii.Eg))}getBidsByLineItemId(t){return this.getAllBids().filter((e=>{const{advertiserLineItemId:i,publisherLineItemId:s}=e.settings.adManagerLineItem.protoLineItem;return[i,s].includes(t)}))}getBidsByStatus(t){return this.getAllBids().filter((e=>t.includes(e.status)))}sf(t,e){[o.wy.CONSUMED_LOADING,o.wy.CONSUMED_LOADED,o.wy.INVALIDATED].includes(e)&&this.nf(t),this.Zp.bidStatusChanged(t,e)}nf(t){this.rf(t),(0,pt.sj)(this.dp,t)}af(){return this.dp.filter((t=>{const e=t.createdTimestamp,i=t.settings.adManagerLineItem.protoLineItem.networkExpiryTimeSeconds;return(0,H.r)(i)&&(0,wi.H8)(e)>=i}))}if(){this.af().forEach((t=>t.invalidate()))}ef(t){const e=t.onStatusChanged.subscribe((e=>{this.sf(t,e)}));this.tf.set(t.settings.bidId,e)}rf(t){const{bidId:e}=t.settings,i=this.tf.get(e);null==i||i.unsubscribe(),this.tf.delete(e)}};Ti=Pi([(0,yi.b2)(),(0,yi.Yn)(yi.Fw.ContainerScoped)],Ti);var _i=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let Si=class{constructor(){this.bidInFetchList=[]}add(t){this.bidInFetchList.push(t)}remove(t){(0,pt.sj)(this.bidInFetchList,t)}getById(t){return this.bidInFetchList.find((e=>e.bidId===t))}};var Ai;Si=_i([(0,yi.b2)(),(0,yi.Yn)(yi.Fw.ContainerScoped)],Si),function(t){t[t.VERIFYING=-1]="VERIFYING"}(Ai||(Ai={}));var xi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let ki=class{constructor(){this.hf=[]}get lineItems(){return[...this.hf]}add(t){this.hf.push(...t)}remove(t){this.hf.indexOf(t)<0||(0,pt.sj)(this.hf,t)}getByAggregation(t){return this.lineItems.filter((e=>e.hasAggregator===t))}getByLineItemById(t){return this.lineItems.find((e=>e.protoLineItem.advertiserLineItemId===t))}getByPublisherLineItemId(t){return this.lineItems.find((e=>e.protoLineItem.publisherLineItemId===t))}hasAggregatorType(t){return this.lineItems.some((e=>{const i=e.protoLineItem.creativeType;return i&&ui.T[i]===t}))}};var Ei;ki=xi([(0,yi.b2)(),(0,yi.Yn)(yi.Fw.ContainerScoped)],ki),function(t){t[t.ON_STARTED=0]="ON_STARTED",t[t.ON_END=1]="ON_END"}(Ei||(Ei={}));class Ci{constructor(){this.cf=new n.x,this.df=new n.x,this.lf={[Ei.ON_STARTED]:this.cf,[Ei.ON_END]:this.df},this.uf={[Ei.ON_STARTED]:t=>this.cf.next(t),[Ei.ON_END]:t=>this.df.next(t)}}getCallingObservable(t){return this.lf[t].asObservable()}triggerEvent(t,e){(0,this.uf[t])(e)}}var Oi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let Li=class{constructor(){this.pf=new Ci,this.ff=[]}get lineItems(){return this.ff}add(t){this.ff=[...this.lineItems,...t],this.pf.triggerEvent(Ei.ON_STARTED,t)}remove(t){this.ff=this.lineItems.filter((e=>!(0,pt.d3)(e,t))),this.pf.triggerEvent(Ei.ON_END,t)}getEvents(t){return this.pf.getCallingObservable(t)}};Li=Oi([(0,yi.b2)(),(0,yi.Yn)(yi.Fw.ContainerScoped)],Li);class Mi{constructor(){this.gf=new Set}static getInstance(){return this.INSTANCE||(this.INSTANCE=new Mi),this.INSTANCE}static vf(t,e){const i=t.lineItems.find((t=>{const{advertiserLineItemId:i,publisherLineItemId:s}=t.protoLineItem;return[i,s].includes(e)}));(0,H.$K)(i)&&t.remove(i)}static yf(t,e){t.getBidsByLineItemId(e).forEach((t=>t.invalidate()))}add(t,e,i){t.filter((t=>!this.gf.has(t))).forEach((t=>{this.gf.add(t),Mi.vf(e,t),Mi.yf(i,t)}))}hasLineItemById(t,e){return this.gf.has(t)||this.gf.has(e)}clear(){this.gf.clear()}}var Ri=i(6706);class Bi{constructor(t,e,i,s){this.bf=t,this.If=e,this.wf=i,this.Qs=s,this.Pf=(t,e)=>{const i=[],s=[];for(const n of t){this.isBidTargetingAllowed(n,e)?i.push(n):s.push(n)}return{allowedBidList:i,notAllowedBidList:s}}}static isBidTargetingAllowedEverInSession(t,e){const{protoLineItem:i}=t.settings.adManagerLineItem,{advertiserLineItemId:s,publisherLineItemId:n}=i,{sessionMaxAdDuration:r}=e.adBreakState,o=t.getAdDuration();return Ri.rO.isAllowedRegardingDuration(o,r)&&!Mi.getInstance().hasLineItemById(s,n)}getBidEvents(t){return this.If.getEvents(t)}hasReachTheMaxNumberOfReadyBids(){const{maxNumberOfWins:t}=this.Qs;if(-1===t)return!1;return this.If.getBidsByStatus([o.wy.LOADING,o.wy.LOADED,o.wy.STARTING,o.wy.IMPRESSION]).length>=t}hasLoadingBids(){const t=this.If.getBidsByStatus([o.wy.LOADING]);return(0,pt.BZ)(t)}hasLoadedBids(){const t=this.If.getBidsByStatus([o.wy.LOADED]);return(0,pt.BZ)(t)}hasUnstartedBids(){return this.If.getBidsByStatus([o.wy.LOADED,o.wy.LOADING,o.wy.STARTING]).length>0}hasAdsEligibleForFill(t){const e=this.bf.bidInFetchList.filter((e=>this._f(e.adManagerLineItem,t))),i=this.If.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED]).filter((e=>this.isBidTargetingAllowed(e,t)));return(0,pt.BZ)(i)||(0,pt.BZ)(e)}getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t){return gi.sortDescBySelectionScore(this.bf.bidInFetchList.filter((e=>this.Tf(e.adManagerLineItem,t))))}getEligibleBidsInAuctionSortedBySelectionScore(t){return gi.sortDescBySelectionScore(this.If.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED]).filter((e=>this.isBidTargetingAllowed(e,t))))}isBestBidLoaded(t){const e=this.getBestLoadedBid();if(!e)return!1;const i=this.If.getBidsByStatus([o.wy.IDLE]),s=this.selectBestBid(i,t),n=[...this.If.getBidsByStatus([o.wy.LOADING])];s.selectedBid&&n.push(s.selectedBid);const r=gi.getBestBySelectionScore(n);return!r||e.yoScore>=r.yoScore}getBestLoadedBid(){const t=this.If.getBidsByStatus([o.wy.LOADED]);return gi.getBestBySelectionScore(t)}getAllLoadedBids(){return this.If.getBidsByStatus([o.wy.LOADED])}getAllBidPricesSortedDesc(){return this.If.getAllBids().map((t=>t.price)).sort(((t,e)=>e-t))}getBestAllowedBidPrice(t){return[...this.If.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED])].filter((e=>this.isBidTargetingAllowed(e,t))).sort(((t,e)=>e.price-t.price)).map((t=>t.price))[0]||0}getBestAllowedBidPricePubNET(t){return this.If.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED]).filter((e=>this.isBidTargetingAllowed(e,t))).map((t=>(0,Pe.OT)(t.price,t.settings.adManagerLineItem.protoLineItem.infrastructureFee,this.Qs.revSharePercentage))).sort(((t,e)=>e-t))[0]||0}getWinnableBidPricesSortedDesc(){return this.If.getBidsByStatus([o.wy.LOADING,o.wy.LOADED]).sort(((t,e)=>e.price-t.price)).map((t=>t.price))}getBestBidAllowedByStatus(t,e){const i=this.If.getBidsByStatus(t);return this.Sf(i,e)}getBestBidAllowed(t){const e=this.If.getAllBids();return this.Sf(e,t)}getBestBidPriceExceptAdxLookup(){const t=this.If.getAllBidsExceptAdxLookup();return 0===t.length?0:this.Af(t)}selectBestBid(t,e){const i=this.Pf(t,e),{allowedBidList:s,notAllowedBidList:n}=i,o=(0,pt.BZ)(s)&&gi.getBestBySelectionScore(s)||null,a=n.map((t=>({bid:t,lossReason:this.kf(t,e)}))),h=s.filter((t=>t!==o)).map((t=>({bid:t,lossReason:r.ProtoAuctionLossReasonEnum.CompetitorPriority})));return{state:e,selectedBid:o,unselectedBidList:[...a,...h]}}selectBestBidForWin(t,e){const i=this.Ef(e),s=this.xf(t,e);return this.Cf(i,s)}isBidTargetingAllowed(t,e){return this.wf.impressionCapsValidationService.canCall(t.settings.adManagerLineItem,e.adOpportunity.id)&&Ri.rO.isBidTargetingAllowed(t,e,this.wf.standaloneService,this.wf.userManagerService)}Af(t){return Math.max(...t.map((t=>t.price)))}Ef(t){const e=this.If.getBidsByStatus([o.wy.IDLE]);return this.selectBestBid(e,t)}xf(t,e){const i=[...t,...this.If.getBidsByStatus([o.wy.LOADED])];return this.selectBestBid(i,e)}Cf(t,e){const i=Object.assign({},t);return t.selectedBid&&e.selectedBid?(mi.getSelectionScore(e.selectedBid)>mi.getSelectionScore(t.selectedBid)&&(i.selectedBid=null,i.unselectedBidList.push({bid:t.selectedBid,lossReason:r.ProtoAuctionLossReasonEnum.CompetitorPriority})),i):i}kf(t,e){const i=t.getAdDuration(),s=e.adBreakState.remainingAdDuration;return Ri.rO.isAllowedRegardingDuration(i,s)?r.ProtoAuctionLossReasonEnum.AdOpportunityEnd:r.ProtoAuctionLossReasonEnum.TargetingMismatch}Tf(t,e){const i=[r.ProtoCreativeTypeEnum.ThirdParty,r.ProtoCreativeTypeEnum.External],s=t.protoLineItem.creativeType,n=i.includes(s),o=this._f(t,e);return!n&&o}_f(t,e){return this.wf.impressionCapsValidationService.canCall(t,e.adOpportunity.id)&&Ri.rO.isLineItemTargetingAllowed(t,e,this.wf.standaloneService,this.wf.userManagerService)}Sf(t,e){const i=t.filter((t=>this.isBidTargetingAllowed(t,e)));return gi.getBestBySelectionScore(i)}}class Di{constructor(t,e,i,s){this.Mf=t,this.Lf=e,this.If=i,this.wf=s}getRequestEvents(t){return this.Lf.getEvents(t)}hasAggregatorType(t){return this.Mf.hasAggregatorType(t)}getAll(){return this.Mf.lineItems}getAllByAggregator(t){return this.Mf.getByAggregation(t)}getById(t){return this.Mf.getByLineItemById(t)}getAllByRequest(t){return t?this.Lf.lineItems:(0,pt.V7)(this.Mf.lineItems,this.Lf.lineItems)}getAllCallable(t){return this.Mf.lineItems.filter((t=>!Mi.getInstance().hasLineItemById(t.protoLineItem.advertiserLineItemId,t.protoLineItem.publisherLineItemId))).filter((e=>this.Bf(e,t))).filter((e=>Ri.rO.isLineItemTargetingAllowed(e,t,this.wf.standaloneService,this.wf.userManagerService))).filter((e=>this.Rf(e,t)))}getBestCallable(t,e){if(!e)return;const i=this.Df(t);return i?{state:e,lineItemList:this.Nf(i,t)}:void 0}Rf(t,e){const{hasAggregator:i,protoLineItem:s}=t;return!(!i&&!s.forceCallingInEveryAO)||this.Ff(t,e)}Ff(t,e){const i=mi.getSelectionScore(t),s=this.getAllByRequest(!0),n=this.If.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED]).filter((t=>this.Vf(t,e))).some((t=>i<mi.getSelectionScore(t))),r=s.some((t=>i<mi.getSelectionScore(t)));return!n&&!r}Bf(t,e){if(t.aggregators.size>0)return!1;const{advertiserLineItemId:i,forceCallingInEveryAO:s}=t.protoLineItem,n=this.If.getBidsByLineItemId(i).filter((t=>t.status!==o.wy.IMPRESSION));return!(!t.hasAggregator&&(n.length>0||t.bidsInFetch.size>0)&&!s||t.protoLineItem.isAdxLookup||t.protoLineItem.isAdxPenskeLookup)&&this.wf.callingValidationAggregator.canCall(t,e.adOpportunity.id)}Df(t){let e=t;return t.some((t=>t.hasAggregator))&&(e=e.filter((t=>t.hasAggregator))),gi.getBestBySelectionScore(e)}Nf(t,e){if(t.hasAggregator){const{creativeType:i}=t.protoLineItem,s=e.filter((t=>i===t.protoLineItem.creativeType));return gi.sortDescBySelectionScore(s)}return[t]}Vf(t,e){return this.wf.impressionCapsValidationService.canCall(t.settings.adManagerLineItem,e.adOpportunity.id)&&Ri.rO.isBidTargetingAllowed(t,e,this.wf.standaloneService,this.wf.userManagerService)}}class Ni{constructor(t,e,i,s,n,r){this.Mf=t,this.Lf=e,this.bf=i,this.If=s,this.wf=n,this.Qs=r,this.jf=new Di(this.Mf,this.Lf,this.If,{callingValidationAggregator:this.wf.callingValidationAggregator,impressionCapsValidationService:this.wf.impressionCapService,standaloneService:this.wf.standaloneService,userManagerService:this.wf.userManagerService}),this.Uf=new Bi(this.bf,this.If,{impressionCapsValidationService:this.wf.impressionCapService,standaloneService:this.wf.standaloneService,userManagerService:this.wf.userManagerService},{maxNumberOfWins:this.Qs.maxNumberOfWins,revSharePercentage:this.Qs.revSharePercentage})}static isBidTargetingAllowedEverInSession(t,e){return Bi.isBidTargetingAllowedEverInSession(t,e)}isBidTargetingAllowed(t,e){return this.Uf.isBidTargetingAllowed(t,e)}geLineItemById(t){return this.jf.getById(t)}getLineItemRequestEvents(t){return this.jf.getRequestEvents(t)}getBidEvents(t){return this.Uf.getBidEvents(t)}hasAggregatorType(t){return this.jf.hasAggregatorType(t)}getAllLineItems(){return this.jf.getAll()}getLineItemsByAggregation(t){return this.jf.getAllByAggregator(t)}getLineItemsByRequest(t){return this.jf.getAllByRequest(t)}getAllCallableLineItems(t){return this.jf.getAllCallable(t)}getBestCallableLineItem(t,e){return this.jf.getBestCallable(t,e)}hasUnstartedBids(){return this.Uf.hasUnstartedBids()}hasLoadingBids(){return this.Uf.hasLoadingBids()}hasLoadedBids(){return this.Uf.hasLoadedBids()}isBestBidLoaded(t){return this.Uf.isBestBidLoaded(t)}getAllLoadedBids(){return this.Uf.getAllLoadedBids()}getBestLoadedBid(){return this.Uf.getBestLoadedBid()}getBestBidPriceExceptAdxLookup(){return this.Uf.getBestBidPriceExceptAdxLookup()}hasReachTheMaxNumberOfReadyBids(){return this.Uf.hasReachTheMaxNumberOfReadyBids()}hasAdsEligibleForFill(t){return this.Uf.hasAdsEligibleForFill(t)}getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t){return this.Uf.getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t)}getEligibleBidsInAuctionSortedDescBySelectionScore(t){return this.Uf.getEligibleBidsInAuctionSortedBySelectionScore(t)}getAllBidPricesSortedDesc(){return this.Uf.getAllBidPricesSortedDesc()}getBestAllowedBidPrice(t){return this.Uf.getBestAllowedBidPrice(t)}getBestAllowedBidPricePubNET(t){return this.Uf.getBestAllowedBidPricePubNET(t)}getWinnableBidPricesSortedDesc(){return this.Uf.getWinnableBidPricesSortedDesc()}getBestBidAllowedByStatus(t,e){return this.Uf.getBestBidAllowedByStatus(t,e)}getBestBidAllowed(t){return this.Uf.getBestBidAllowed(t)}selectBestBid(t,e){return this.Uf.selectBestBid(t,e)}selectBestBidForWin(t){const e=this.If.getBidsByStatus([o.wy.LOADING]);return this.Uf.selectBestBidForWin(e,t)}}class Fi{}Fi.SHOULD_CALL_WITH_CREDENTIALS_DEFAULT=!0,Fi.MIN_VAST_VERSION=2,Fi.DEFAULT_MAX_WRAPPER_LIMIT=10;class $i{}$i.AD_TAG_DUMMY_PREFIX="https://adx.connatix.com",$i.IMA_URL_PART=".g.doubleclick.net",$i.IMA_NATIVE_DEBUG_PARAM=["cnxima","native"];var Vi=i(6210),ji=i(8872),Ui=i(2857),qi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Hi{static getHlsModule(t,e,i){return qi(this,void 0,void 0,(function*(){let s=null;if((0,H.QM)(e)&&(s=yield(0,Ui.zJ)(t,i),!s))throw new Error(pi.f.NetworkRequestUrl);return s}))}static getAdUnitPath(t){return t.slice($i.AD_TAG_DUMMY_PREFIX.length)}static isImaLineItem(t){if(Vi.tt.includes(t.protoLineItem.advertiserLineItemId))return!0;const e=t.protoLineItem.adTag;return!(!(0,H.$K)(e)||(0,H.Ft)(e))&&Hi.isImaUrl(e)}static isImaUrl(t){return((0,It.ge)(t)||"").includes($i.IMA_URL_PART)}static getFinalUrl(t,e,i,s){let n=t;try{const t=e.callingState.adContainerState.get(e.adManagerLineItem.protoLineItem.adType);(0,H.$K)(t)&&(n=Hi.$f(n,i,t,e),n=s.appendParams(n,t))}catch(t){throw new Error(pi.f.InvalidCreativeUrl)}return n}static setVastInfo(t,e,i){(0,_e.Vx)(t,e.vastTracker,e.sessionId),i.push(t)}static isValidHtmlMimeType(t){return Object.values(o.ZJ).some((e=>e===t))}static isVideoAd(t){const{protoLineItem:e}=t.adManagerLineItem;return e.adType===r.ProtoAdType.Video}static isNonlinearVideoAd(t){var e;const{protoLineItem:i}=t.adManagerLineItem;return i.adType===r.ProtoAdType.Nonlinear&&(null===(e=i.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearRequestType)===r.ProtoNonlinearRequestType.Video}static haveExpectedAdType(t,e){const i=new ji.GU(t),{mediaFiles:s,nonLinearFiles:n}=i;return e===r.ProtoAdType.Video&&(0,pt.BZ)(s)||e===r.ProtoAdType.Nonlinear&&(0,pt.BZ)(n)}static notifyBidFetchStart(t,e){t.onBidFetchStart.next(e),e.adManagerLineItem.bidsInFetch.add(e.bidId)}static notifyBidFetchEnd(t,e){t.onBidFetchEnd.next(e),e.adManagerLineItem.bidsInFetch.delete(e.bidId)}static shouldUseExternalBidAdaptor(t,e,i){return!!t&&(e.protoLineItem.externallyManaged||e.protoLineItem.advertiserAccountId===Ii.Ro||i.includes(`${$i.IMA_NATIVE_DEBUG_PARAM[0]}=${$i.IMA_NATIVE_DEBUG_PARAM[1]}`))}static $f(t,e,i,s){const n={adHeight:i.height,adWidth:i.width,adPostion:s.callingState.adBreakState.adBreakType,mute:s.callingState.sound?0:1,plcmt:s.plcmt},r={mediaDescription:s.callingState.media.mediaDescription,mediaDuration:s.callingState.media.mediaDuration,mediaId:s.callingState.media.mediaId,mediaTitle:s.callingState.media.mediaTitle,mediaUrl:s.callingState.media.mediaUrl};return e.replace(t,s.adManagerLineItem.protoLineItem.vendorId,s.adManagerLineItem.protoLineItem.advertiserLineItemId,{adMacros:n,mediaMacros:r})}}var Ji=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Gi{constructor(t,e,i){this.qf=t,this.Ks=e,this.Hf=i}static Jf(){return Ji(this,void 0,void 0,(function*(){return new Promise((t=>{setTimeout((()=>{t(null)}),25e3)}))}))}loadAd(){return Ji(this,void 0,void 0,(function*(){if(!(yield Promise.race([this.Gf(),Gi.Jf()]).catch((t=>{throw this.Ks.destroy(),t}))))throw this.Ks.destroy(),new Error(pi.f.ExternalSdkTimeout)}))}Gf(){return new Promise(((t,e)=>{this.Ks.subscribeToSdkEvent(Ri.gb.REQUEST_SUCCESS,(()=>{t(!0)})),this.Ks.subscribeToSdkEvent(Ri.gb.AD_ERROR,(()=>{e(new Error(pi.f.ExternalSdkInvalidResponse))})),this.Ks.emitSdkEvent(Ri.tB.REQUEST_AD,{url:this.qf,lineitemId:this.Hf})}))}}class zi{}zi.FETCH_BID_TIMEOUT=25e3;class Wi{constructor(t,e,i,s,r,o,a,h,c,d=!1,l=null,u,p,f){this.En=t,this.Cn=e,this.Sn=i,this.An=s,this.Ln=r,this.qn=o,this.Hl=a,this.zf=h,this.Wf=c,this.Yf=d,this.Qf=l,this.Kf=u,this.Zf=p,this.De=f,this.tm=new n.x,this.He=new n.x,this.im={id:(0,Kt.qs)()},this.Bn=null,this.Fn=t=>{if(!this.Vn(t))return;const e=t.getError().getErrorCode();switch(this.Yf&&(0,wt.nF)({message:"Ima_Error_Code",exception:t.getError().getMessage(),level:wt.D_.INFO,sessionId:this.De},{throttle:5}),e){case this.En.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.nm(pi.f.ImaVastEmptyResponse);break;case this.En.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.En.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.nm(pi.f.ImaInvalidResponse);break;default:this.nm(pi.f.ImaRequestException)}},this.rm=t=>{this.Vn(t)&&(this.Bn=t.getAdsManager(this.qn,{loadVideoTimeout:25*Ee.s_}),this.om(),this.tm.next({imaAdsManager:this.Bn,requestAdsContext:this.im}))},this.Cn.addEventListener(this.En.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.rm),this.Cn.addEventListener(this.En.AdErrorEvent.Type.AD_ERROR,this.Fn)}get onSuccess(){return this.tm.asObservable()}get onError(){return this.He.asObservable()}loadAd(){const t=new this.En.AdsRequest;if(["3ebdd57e-b5b8-4fd8-8887-6ae94a978a12","fe9242a7-7f5a-40f0-84ad-0d1cb921dbbe","5ee7c0e2-db41-417d-a2f2-4d91037b85bd","a28964ae-afa3-45d3-9f00-fa228cf89d74"].includes(this.zf)&&(t.omidAccessModeRules={},t.omidAccessModeRules[google.ima.OmidVerificationVendor.OTHER]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.INTEGRAL_AD_SCIENCE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.MOAT]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.DOUBLEVERIFY]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.PIXELATE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.NIELSEN]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.COMSCORE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.MEETRICS]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.GOOGLE]=google.ima.OmidAccessMode.FULL),(0,H.QM)(this.Qf))t.adsResponse=this.Qf;else if((0,H.$K)(this.Kf)||this.Wf){const e=(0,It.Ph)("cust_params",this.Ln),i=new URL(this.Ln);let s=e;this.Wf?s=(0,Pe.QP)({adxLastLookIncrementPrice:Ii.P8,adxLastLookMaxPrice:Ii.zt,adxLastLookMinPrice:Ii.FH,adxLastLookParam:Ii.wF,adxUprParam:Ii.rU,adxMinPrice:this.Wf,adxUprMaxPrice:Ii.qx,adxUprMinPrice:Ii.$w,custParam:e}):(0,H.$K)(this.Kf)&&(s=this.am(e,this.Kf)),i.searchParams.set("cust_params",s),t.adTagUrl=i.href}else t.adTagUrl=this.Ln;this.Wf&&(0,wt.nF)({message:"Adx_lookup_finalUrl",level:wt.D_.INFO,callStack:`${t.adTagUrl}`,sessionId:this.De},{pacing:1}),t.linearAdSlotWidth=t.nonLinearAdSlotWidth=this.Sn,t.linearAdSlotHeight=t.nonLinearAdSlotHeight=this.An,t.pageUrl=this.Hl,(0,H.QM)(this.Zf)&&this.Cn.getSettings().setPpid(this.Zf),this.Cn.requestAds(t,this.im)}destroy(){var t;try{this.om(),null===(t=this.Bn)||void 0===t||t.destroy()}catch(t){}}am(t,e){const{uprQueryName:i,uprQueryValue:s}=e.adxData;return t?`${t}&${i}=${s}&dy=1`:`${i}=${s}&dy=1`}nm(t){this.He.next(t)}om(){this.Cn.removeEventListener(this.En.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.rm),this.Cn.removeEventListener(this.En.AdErrorEvent.Type.AD_ERROR,this.Fn)}Vn(t){const e=t.getUserRequestContext();return!e||e.id===this.im.id}}var Yi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Xi{constructor(t,e,i){this.imaAdSlot=t,this.imaDependencies=e,this.De=i,this.hm=null,this.dm=!1,this.lm=[]}static Jf(){return Yi(this,void 0,void 0,(function*(){return new Promise((t=>{setTimeout((()=>{t(null)}),zi.FETCH_BID_TIMEOUT)}))}))}getImaAdModule(){return Yi(this,void 0,void 0,(function*(){try{const t=yield Promise.race([this.um(),Xi.Jf()]);if(!t)throw new Error(pi.f.ImaTimeout);return this.dm=!0,this.hm&&(0,l.i)(this.lm),t}catch(t){throw this.dm=!0,this.hm&&((0,l.i)(this.lm),this.hm.destroy(),this.imaDependencies.adSlotContainerRecycler.recycleAdSlot(this.imaAdSlot)),(0,Kt.W$)(t)}}))}pm(){return this.imaDependencies.adContainerState.get(this.imaDependencies.adType)}um(){return Yi(this,void 0,void 0,(function*(){try{const t=yield this.imaAdSlot.fetchImaDependencies();return yield this.fm(t)}catch(t){throw(0,Kt.W$)(t)}}))}fm(t){if(this.dm)throw new Error(pi.f.ImaRequestException);return new Promise(((e,i)=>{const s=this.pm();if(!(0,H.$K)(s)||!(0,H.$K)(this.imaDependencies.url))throw new Error(pi.f.ImaRequestException);this.hm=new Wi(t.imaSdk,t.imaAdsLoader,s.width,s.height,this.imaDependencies.url,this.imaAdSlot.videoSlot,this.imaDependencies.pageUrl,this.imaDependencies.advertiserLineItemId,this.imaDependencies.adxMinPrice,!1,this.imaDependencies.xml,this.imaDependencies.adxFloorPrice,this.imaDependencies.ppid,this.De),this.lm.push(this.hm.onSuccess.subscribe((i=>{e(Object.assign(Object.assign({},i),t))})),this.hm.onError.subscribe((t=>{i(new Error(t))}))),this.hm.loadAd()}))}}var Qi,Ki=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Zi{constructor(t){this.gm=t}fetchBid(t){var e,i;return Ki(this,void 0,void 0,(function*(){const s=this.vm(t),{cnxBidId:n,encryptedPrice:o}=t.requestMetadata.data,a={bidPrice:s.price,bidId:s.bidId,yoScore:s.yoScore,isIma:s.isIma,adManagerLineItem:t.lineItem,encryptedPrice:o},h=null===(i=null===(e=this.gm.standaloneService.bestStandaloneAd)||void 0===e?void 0:e.bid)||void 0===i?void 0:i.cnxBidId;let c;t.lineItem.protoLineItem.creativeType===r.ProtoCreativeTypeEnum.Rtb&&(0,H.QM)(n)&&n===h&&(a.yoScore=Number.MAX_SAFE_INTEGER,s.yoScore=Number.MAX_SAFE_INTEGER);try{Hi.notifyBidFetchStart(this.gm.adEvents,a),c=yield this.bm(t,s)}catch(t){throw(0,Kt.W$)(t)}finally{Hi.notifyBidFetchEnd(this.gm.adEvents,a)}return c.shouldBeDiscarded=a.shouldBeDiscarded,c}))}bm(t,e){return Ki(this,void 0,void 0,(function*(){const i=t.url||e.adManagerLineItem.protoLineItem.adTag||"",s=t.vastTag;switch(t.lineItem.protoLineItem.creativeType){case r.ProtoCreativeTypeEnum.External:case r.ProtoCreativeTypeEnum.ThirdParty:return t.lineItem.protoLineItem.adType===r.ProtoAdType.Overlay?this.Im(e):Hi.shouldUseExternalBidAdaptor(this.gm.canUseExternalAdService,t.lineItem,i)?this.wm(e,i):this.Pm(i,e,t);case r.ProtoCreativeTypeEnum.MediaFile:return this._m(e);case r.ProtoCreativeTypeEnum.Rtb:return this.Tm(e,t);case r.ProtoCreativeTypeEnum.HeaderBidder:return(0,H.QM)(s)?this.Am(s,e,t):this.Pm(i,e,t);case r.ProtoCreativeTypeEnum.Tam:case r.ProtoCreativeTypeEnum.TamDeal:case r.ProtoCreativeTypeEnum.TamPrivateAuction:return this.Pm(i,e,t);default:throw new Error(pi.f.InvalidCreativeType)}}))}vm(t){const{lineItem:e,obfuscatedPrice:i,vastTracker:s,state:n,requestMetadata:r,prebidjsCPM:o,slotId:a,bidId:h,creativeId:c,adxMinPrice:d,plcmt:l}=t,{globalDomUtilsService:u,viewabilityService:p,adEnforcer:f,os:m,adSlotContainerRecycler:g,urlSuffixerService:v,sessionId:y}=this.gm,{creativeType:b,advertiserLineItemId:I,floorPrice:w,customCpm:P,adType:T,grossNetPercentageDifference:_,lineItemPriority:S}=e.protoLineItem;let A=Ri.sL.getBidPriceByCreative(b,{floorPrice:w,customCpm:P,obfuscatedPrice:i,prebidjsCPM:o,adxFloorPrice:r.data.requestedFloorPrice||0,adxLookupPrice:d});(0,H.r)(A)||((0,wt.nF)({message:"AdManager_BidFactory_no_cpm_on_bid",level:wt.D_.ERROR,sessionId:this.gm.sessionId},{throttle:1,shouldSendMaxLog:!1}),A=0);const x=this.gm.yoScoreCalculator.calculateBidYoScore(I,{priority:S,grossNetPercentageDifference:_,cpm:A}),k=this.gm.adContainerMap.get(T);if(!(0,H.$K)(k))throw new Error("AdManager_BidFactory_adContainer_is_undefined");return{adContainer:k,requestMetadata:r,globalDomUtilsService:u,viewabilityService:p,adEnforcer:f,os:m,adSlotContainerRecycler:g,urlSuffixerService:v,sessionId:y,yoScore:x,price:A,vastTracker:s,plcmt:l,cpm:o||w||P,adManagerLineItem:e,callingState:n,externalCreativeId:c,bidId:h||(0,Kt.qs)(),bidSlotId:a||(0,Pe.aW)(),isIma:Hi.isImaLineItem(e),adxFloorPrice:e.getAdxFloorPriceObjectsByPrice(r.data.requestedFloorPrice)[0]}}Em(t,e){const{mime:i,html:s,dimensions:n}=e;if(!(0,H.$K)(i)||!(0,H.$K)(s)||!(0,H.$K)(n))throw new Error(pi.f.HTMLNotEnoughData);if(!Hi.isValidHtmlMimeType(i))throw new Error(pi.f.HTMLUnknownMimeType);return t.htmlToLog=s,new $t.EM(this.gm.timerService,Object.assign(Object.assign({},t),{html:s,mime:i,dimensions:n}))}_m(t){return Ki(this,void 0,void 0,(function*(){return new $t.Kz(this.gm.timerService,Object.assign(Object.assign({},t),{hlsModule:yield Hi.getHlsModule(this.gm.globalDomUtilsService.global,t.adManagerLineItem.protoLineItem.externalHlsFile,this.gm.sessionId),mediaId:t.adManagerLineItem.protoLineItem.mediaCreativeId,renditions:t.adManagerLineItem.protoLineItem.renditions,clickUrl:t.adManagerLineItem.protoLineItem.mediaCreativeClickUrl,externalMediaFile:t.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:t.adManagerLineItem.protoLineItem.externalHlsFile,shouldPauseAdWhenFinished:this.gm.shouldPauseAdWhenFinished,shouldLoopAdWhenFinished:this.gm.shouldLoopAdWhenFinished,isInApp:this.gm.isInApp,pageDomain:this.gm.pageDomain}))}))}Im(t){return new $t.pe(this.gm.timerService,Object.assign(Object.assign({},t),{adxAdUnitPath:Hi.getAdUnitPath(t.adManagerLineItem.protoLineItem.adTag),domain:this.gm.pageDomain}))}Pm(t,e,i,s){var n;return Ki(this,void 0,void 0,(function*(){const o=Hi.getFinalUrl(t,e,this.gm.adMacroReplacer,this.gm.imaVastUrlBuilderService),a=Hi.isImaUrl(o);if(e.isIma||a){if(e.adManagerLineItem.protoLineItem.adType!==r.ProtoAdType.Nonlinear){const t=d.h.getGlobalContainer().resolve(De.H),s=null===(n=e.adManagerLineItem.protoLineItem.protoIntentiqResponseData)||void 0===n?void 0:n.vendorName,r=t.getAdxId(s);return this.xm(e,{url:o,adxMinPrice:i.adxMinPrice,ppid:r})}(0,wt.nF)({message:"AdManager_BidFactory_found_ima_in_nonLinear",level:wt.D_.INFO,sessionId:e.sessionId})}return this.Cm(o,e,i,s)}))}wm(t,e){return Ki(this,void 0,void 0,(function*(){const i=Hi.getFinalUrl(e,t,this.gm.adMacroReplacer,this.gm.imaVastUrlBuilderService),s=Object.assign(Object.assign({},t),{url:i}),n=t.bidId,r=d.h.getSessionChildContainer(t.sessionId).resolve(Ri.PQ),o=new Ri.wY(n,r),a=new Gi(i,o,t.adManagerLineItem.protoLineItem.advertiserLineItemId);try{yield a.loadAd()}catch(t){throw(0,Kt.W$)(t)}return new $t.Hp(this.gm.timerService,s,o)}))}xm(t,e){return Ki(this,void 0,void 0,(function*(){const i=(0,H.$K)(e.url)?e.url:"",s=(0,H.$K)(e.xml)?e.xml:"",n={url:i,xml:s,ppid:e.ppid,pageUrl:this.gm.pageUrl,adContainerState:t.callingState.adContainerState,advertiserLineItemId:t.adManagerLineItem.protoLineItem.advertiserLineItemId,adType:t.adManagerLineItem.protoLineItem.adType,adSlotContainerRecycler:t.adSlotContainerRecycler,adxFloorPrice:t.adxFloorPrice,adxMinPrice:e.adxMinPrice};let r;const o=this.gm.adSlotContainerRecycler.requestAdSlotIma(t.adContainer,!!e.adxMinPrice),a=new Xi(o,n,this.gm.sessionId);try{r=yield a.getImaAdModule()}catch(t){throw(0,Kt.W$)(t)}return new $t.f1(this.gm.timerService,Object.assign(Object.assign({},t),{imaSdk:r.imaSdk,imaAdsLoader:r.imaAdsLoader,imaAdsManager:r.imaAdsManager,requestAdsContext:r.requestAdsContext,pageUrl:this.gm.pageUrl,imaAdSlotContainer:o,url:i,vastAd:s||i}))}))}Cm(t,e,i,s){return Ki(this,void 0,void 0,(function*(){const n=(0,H.$K)(i.shouldRequestWithCredentials)?i.shouldRequestWithCredentials:Fi.SHOULD_CALL_WITH_CREDENTIALS_DEFAULT;let r="";try{r=yield He.n.fetchXMLRequest(t,n)}catch(t){if(!1===n)throw new ji.RA({hasError:!0,errorReason:pi.f.NetworkRequestUrl,vastErrorCode:ji.Oq.WrapperVastUriTimeout})}if(!(0,H.QM)(r)){try{r=yield He.n.fetchXMLRequest(t,!1)}catch(t){throw new ji.RA({hasError:!0,errorReason:pi.f.NetworkRequestUrl,vastErrorCode:ji.Oq.WrapperVastUriTimeout})}if(!(0,H.QM)(r))throw new ji.RA({hasError:!0,errorReason:pi.f.XmlInvalidString,vastErrorCode:ji.Oq.NoVastResponseAfterWrapper})}return this.Am(r,e,i,s)}))}Am(t,e,i,s){return Ki(this,void 0,void 0,(function*(){const n=new ji.H3(Fi.MIN_VAST_VERSION,e.sessionId).parseVastXml(t);if(!0===n.hasError){const{errorReason:t,vastErrorCode:e,errorUrlTrackers:i}=n;throw new ji.RA({hasError:!0,errorUrlTrackers:i,errorReason:t,vastErrorCode:e})}const o=(0,H.$K)(s)?s.vastAdsChain:[];if(Hi.setVastInfo(n.result,e,o),n.result.wrapper){const t=(0,H.$K)(s)?s.maxWrapperLimit:Fi.DEFAULT_MAX_WRAPPER_LIMIT;if(t<=0)throw new ji.RA({hasError:!0,errorReason:pi.f.XmlAdaptorWrapperLimit,vastErrorCode:ji.Oq.WrapperLimitReached});return this.Pm(n.result.wrapper.VASTAdTagURI,e,i,{vastAdsChain:o,maxWrapperLimit:t-1})}const{adType:a}=e.adManagerLineItem.protoLineItem;if(!Hi.haveExpectedAdType(o,a))throw new ji.RA({hasError:!0,errorReason:pi.f.InvalidCreativeType,vastErrorCode:ji.Oq.ExpectingDifferentLinearity});return a===r.ProtoAdType.Nonlinear?new $t.pr(this.gm.timerService,Object.assign(Object.assign({},e),{vastResponse:new ji.GU(o)})):new $t.SI(this.gm.featureFlags,this.gm.timerService,Object.assign(Object.assign({},e),{vastResponse:new ji.GU(o),shouldLoopAdWhenFinished:this.gm.shouldLoopAdWhenFinished,adMacroReplacer:this.gm.adMacroReplacer,vastAd:t}))}))}Tm(t,e){return Ki(this,void 0,void 0,(function*(){const i=Hi.isVideoAd(t),s=Hi.isNonlinearVideoAd(t),n=t.isIma;if(i||s){if(!(0,H.$K)(e.vastTag))throw new Error(pi.f.InvalidCreativeUrl);return n?this.xm(t,{xml:e.vastTag}):this.Am(e.vastTag,t,e)}return this.Em(t,e)}))}}!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(Qi||(Qi={}));class ts{constructor(t){this.Om=t,this.Mm=Qi.IDLE,this.Lm=Promise.resolve()}start(){(this.Mm===Qi.IDLE||this.Mm===Qi.STOPPING)&&(this.Mm=Qi.RUNNING,this.Bm())}stop(){this.Mm=Qi.STOPPING}setPromiseNotifier(t){return this.Rm=t,this}setIdleNotifier(t){return this.Dm=t,this}getState(){return this.Mm}Nm(){const t=this.Om();void 0!==t?this.Lm=t.then((t=>{this.Rm&&this.Rm(t)})).then((()=>{this.Mm===Qi.STOPPING&&(this.Mm=Qi.IDLE)})):this.Mm=Qi.IDLE}Bm(){this.Mm===Qi.IDLE?this.Dm&&this.Dm():this.Mm===Qi.RUNNING&&(this.Nm(),this.Lm.then((()=>{this.Bm()})))}}class es{constructor(t,e=1){this.Om=t,this.Fm=e,this.jm=[],this.Um(e)}start(){return this.jm.forEach((t=>{t.start()})),this}stop(){return this.jm.forEach((t=>{t.stop()})),this}setPromiseNotifier(t){return this.jm.forEach((e=>{e.setPromiseNotifier(t)})),this}setAllThreadsIdleNotifier(t){return this.$m=t,this.qm(),this}setNumberOfThreads(t){if(t<=0)return;this.Fm=t;const e=t-this.Fm;e>0?this.Um(e):e<0&&this.Hm(e)}getState(){return this.jm.reduce(((t,e)=>(t[e.getState()]++,t)),{[Qi.IDLE]:0,[Qi.RUNNING]:0,[Qi.STOPPING]:0})}Um(t){for(let e=0;e<t;e++){const t=new ts(this.Om).setPromiseNotifier(this.Rm);this.jm.push(t)}}Hm(t){t=Math.min(t,this.jm.length);for(let e=0;e<t;e++)this.jm.pop().stop()}qm(){const t=()=>{this.getState()[Qi.IDLE]===this.jm.length&&this.$m()};this.jm.forEach((e=>{e.setIdleNotifier(t)}))}}const is=[{numberOfRequestsThreshold:10,pacing:15},{numberOfRequestsThreshold:11,pacing:15},{numberOfRequestsThreshold:12,pacing:30},{numberOfRequestsThreshold:13,pacing:30},{numberOfRequestsThreshold:14,pacing:30},{numberOfRequestsThreshold:15,pacing:60}];var ss=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let ns=class{constructor(){this.Jm=new Map}getThrottledLineItemPacing(t){const e=this.Jm.get(t);if((0,H.$K)(e))return e.pacing}updateLineItemResponse(t,e){if(!(0,H.QM)(t.advertiserLineItemId))return;const i=this.Jm.get(t.advertiserLineItemId),s=(null==i?void 0:i.noBidsRequestCount)||0,n={protoLineItem:t,noBidsRequestCount:0===e?s+1:0,pacing:(null==i?void 0:i.originalPacing)||0,originalPacing:(null==i?void 0:i.originalPacing)||0};!(0,H.$K)(i)&&t.timeBetweenRequests&&(n.originalPacing=t.timeBetweenRequests),n.pacing=this.Gm(n),this.Jm.set(t.advertiserLineItemId,n)}Gm(t){const e=is,i=e[0].numberOfRequestsThreshold;if(t.noBidsRequestCount<i)return t.originalPacing;const s=e[e.length-1].numberOfRequestsThreshold;if(t.noBidsRequestCount>=s)return e[e.length-1].pacing;const n=e.find((e=>e.numberOfRequestsThreshold===t.noBidsRequestCount));return(null==n?void 0:n.pacing)||t.originalPacing}};ns=ss([(0,yi.b2)(),(0,yi.Yn)(yi.Fw.ContainerScoped)],ns);i(7129);var rs=i(5742),os=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class as{constructor(t,e){this.settings=t,this.jc=e,this.zm=new Map,this.Mi=[],this.Wm=!1,this.Ym=new n.x,this.Xm=new n.x,this.$p=new n.x,this.Qm=new n.x,this.Zm=!1,this.tg=()=>{const t=this.eg();if(t)return this.Ym.next(t.lineItemList),this.ig(t.lineItemList,t.state).then((()=>{this.Xm.next(t.lineItemList),this.sg()})).catch((()=>{this.Xm.next(t.lineItemList),this.sg()}));this.settings.auctionManager.onNothingToCall()},this.rg=d.h.getGlobalContainer().resolve(De.H),this.Mi.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe((()=>{this.ag()})),this.settings.adSelector.getBidEvents(vi.ON_BID_LOADING).subscribe((()=>{this.ag()})),this.settings.adSelector.getBidEvents(vi.ON_BID_LOADING_CONSUMED).subscribe((()=>{this.ag()})),this.settings.adSelector.getBidEvents(vi.ON_BID_LOADED_CONSUMED).subscribe((()=>{this.ag()})),this.settings.adxLastLookService.onForceCallAdxLastLook.subscribe((({adxLineItem:t,state:e})=>{this.hg(t,e).finally((()=>{this.Xm.next([t])}))}))),this.cg=new es(this.tg,5),this.dg=new Ri.H1(this.settings.generalRepository,this.settings.app.services.UserManagerService);const i=d.h.getGlobalContainer().resolve(it.f),s=d.h.getSessionChildContainer(this.settings.app.config.sessionId).resolve(ns),r=d.h.getSessionChildContainer(this.settings.app.config.sessionId).resolve(Ae.c.FeatureFlags);this.ug=new Zi({globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,timerService:i,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,yoScoreCalculator:this.settings.yoScoreCalculator,urlSuffixerService:this.settings.app.services.UrlSuffixerService,interactionService:this.settings.app.services.InteractionService,standaloneService:this.settings.app.services.StandaloneService,sessionId:this.settings.app.config.sessionId,pageUrl:this.settings.app.config.pageUrl,pageDomain:this.settings.app.config.pageDomain,adContainerMap:this.settings.adContainerMap,shouldPauseAdWhenFinished:this.settings.pauseAdWhenFinished,shouldLoopAdWhenFinished:this.settings.loopAdWhenFinished,isInApp:this.settings.app.config.isInApp,canUseExternalAdService:this.settings.app.config.canUseExternalAdService,adEvents:this.jc,adMacroReplacer:this.settings.adMacroReplacer,imaVastUrlBuilderService:this.dg,featureFlags:r}),this.settings.adSelector.hasAggregatorType(Vt.t.Rtb)&&this.zm.set(Vt.t.Rtb,{auctionPending:!1,caller:new Ge(this.settings.playerData.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.generalRepository,this.settings.adRequestGatekeeper,this.settings.lineItemAbTestInformation,s,this.settings.callingValidationAggregator,this.settings.assertiveYieldService)}),this.settings.adSelector.hasAggregatorType(Vt.t.HeaderBidder)&&this.zm.set(Vt.t.HeaderBidder,{auctionPending:!1,caller:new xe(this.settings.playerData,this.settings.schainSettings,this.settings.app,this.settings.appSettings,this.settings.skipAdSettings)}),this.settings.adSelector.hasAggregatorType(Vt.t.Tam)&&this.zm.set(Vt.t.Tam,{auctionPending:!1,caller:new li(this.settings.app,this.settings.amazonSlotId,this.settings.generalRepository)}),this.cg.setAllThreadsIdleNotifier((()=>{this.settings.lineItemServices.lineItemServicesTimer.start()}))}get onLineItemsRequestStart(){return this.Ym.asObservable()}get onLineItemsRequestEnd(){return this.Xm.asObservable()}get onBid(){return this.$p.asObservable()}get onFirstAggregatedBatchFinished(){return this.Qm.asObservable()}pg(){return os(this,void 0,void 0,(function*(){return this.settings.standaloneService.standaloneLineItemsWithBids.forEach((t=>{const{lineItem:e,bids:i}=t,s=this.settings.adSelector.geLineItemById(e.advertiserLineItemId);i.forEach((t=>os(this,void 0,void 0,(function*(){try{yield this.fg(t,s)}catch(t){(0,wt.nF)({message:"AdManager_AdCallerController_injectStandaloneBidsIfPossible",level:wt.D_.INFO},{throttle:3,shouldSendMaxLog:!1})}}))))})),Promise.resolve()}))}fg(t,e){return os(this,void 0,void 0,(function*(){const{currentState:i,predictedState:s}=this.gg.stateSettings,n=i||s,r=Le.parseAggregatorBidResponse(t,e,n),{lineItem:o,state:a}=r;return this.settings.callingValidationAggregator.registerRequestForLineItem(o,this.vg()),this.hg(o,a,r)}))}call(t){this.gg=t,this.cg.setNumberOfThreads(t.maxParallelCalls),this.Wm=!0,!this.Zm&&(0,pt.BZ)(this.settings.standaloneService.standaloneLineItemsWithBids)?(this.Zm=!0,this.pg().then((()=>{this.ag()}))):this.ag()}stop(){this.Wm=!1,this.cg.stop()}setMacros(t){const e=this.zm.get(Vt.t.HeaderBidder);e&&e.caller.setMacros(t)}destroy(){this.stop(),this.settings.callingValidationAggregator.destroy(),(0,l.i)(this.Mi),this.zm.forEach((t=>{var e,i;null===(i=(e=t.caller).destroy)||void 0===i||i.call(e)}))}sg(){let t=!0;this.zm.forEach((e=>{e.auctionPending&&(t=!1)})),t&&this.Qm.next()}ag(){this.Wm&&this.cg.start()}eg(){const t=this.gg.stateSettings.currentState||this.gg.stateSettings.predictedState;if(!t)return void(0,wt.nF)({message:"AdCallerController_no_state",level:wt.D_.INFO,sessionId:this.settings.sessionId},{throttle:10,shouldSendMaxLog:!1});const e=this.settings.adSelector.getAllCallableLineItems(t),i=this.settings.adSelector.getBestCallableLineItem(e,t);return i||void 0}ig(t,e){return t[0].hasAggregator?this.yg(t,e):this.hg(t[0],e)}bg(t,e,i,s){if((0,H.$K)(s))return s;const n=t.protoLineItem.isAdxLookup?this.settings.adxLastLookService.getAdxLastLookPrice():void 0,r=this.wg(t),o=new $t.oO(r),a=new _e.Mz,h={lineItem:t,vastTracker:a,requestMetadata:o,state:e,adxMinPrice:n,plcmt:i};return(0,_e.E3)(t.protoLineItem.trackers,a),h}hg(t,e,i){return os(this,void 0,void 0,(function*(){const s=Date.now(),n=this.bg(t,e,this.settings.playerData.plcmt,i);(0,H.$K)(i)||this.Pg(t,e),(0,Me.g)(t,n.requestMetadata,Re.f.Pending);let o=null;try{o=yield this.ug.fetchBid(n),this._g(o,s)}catch(i){const o=null==i?void 0:i.vastErrorCode,a=null==i?void 0:i.vastErrorTrackers,h=fi[i.message]?fi[i.message]:r.ConnatixNoBidReasonEnum.RequestException;this.Tg(e,t,h,n.requestMetadata,n.vastTracker,Date.now()-s,pi.f[i.message],o,a)}}))}wg(t){var e;const i=!!this.rg.getAdxId(null===(e=t.protoLineItem.protoIntentiqResponseData)||void 0===e?void 0:e.vendorName);let s={requestNumber:t.historicalMetrics.requestNumber,hasIIQLookup:i};return t.protoLineItem.advertiserAccountId===Ii.Ro&&!t.protoLineItem.isAdxLookup&&(s=t.adxFloorPrice?Object.assign(Object.assign({},s),{floorPriceInformation:{adxPredictedFloorPrice:(0,Pe.RC)(t.adxFloorPrice.adxData.predictedPriceObfuscated)},requestedFloorPrice:t.adxFloorPrice.price}):Object.assign(Object.assign({},s),{requestedFloorPrice:t.protoLineItem.floorPrice})),s}Pg(t,e){this.settings.callingValidationAggregator.registerRequestForLineItem(t,this.vg(e)),t.historicalMetrics.requestNumber++}_g(t,e){try{this.Sg(t,Date.now()-e)}catch(t){(0,wt.nF)({message:"AdManager_AdCallerController_handleBidFactoryRequestSuccess",exception:t.message,callStack:t.stack,level:wt.D_.CRITICAL,sessionId:this.settings.sessionId},{throttle:5})}}yg(t,e){const i=this.zm.get(ui.T[t[0].protoLineItem.creativeType]);t.forEach((t=>t.aggregators.add(i.caller))),i.auctionPending=!0;const{maxAdDuration:s,remainingAdDuration:n}=e.adBreakState,r={lineItemRequestDataList:t.map((t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t,this.vg())}))),callingState:e,maxAdDuration:(0,nt.S)(s,n),maxBidPrice:this.settings.adSelector.getBestAllowedBidPrice(e)};return this.Ag(i,r,t,e)}Ag(t,e,i,s){return t.caller.request(e).then((e=>{e.bids.length||e.noBids.length||i.forEach((t=>{this.Pg(t)})),i.forEach((e=>{e.aggregators.delete(t.caller),e.historicalMetrics.requestNumber++})),e.noBids.forEach((t=>{this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.vg()),this.Tg(s,t.lineItem,t.reason,t.requestMetadata)}));const n=e.bids.map((t=>(this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.vg()),this.hg(t.lineItem,t.state,t))));return Promise.all(n)})).finally((()=>{t.auctionPending=!1}))}Sg(t,e){if(t.shouldBeDiscarded)return;const i=t.settings.adManagerLineItem,s=t.settings.requestMetadata,n=t.settings.requestMetadata.data.floorPriceInformation,r=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup,t.settings.requestMetadata.data.identityPartnerUsed);let o={shouldTrackBid:!t.settings.requestMetadata.data.requestTrackingHandledByServer,advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,impressionTrackers:t.settings.vastTracker.adImpression,identityProviderTrackingData:r};o.shouldTrackBid&&(o=Object.assign(Object.assign({},o),{requestedFloorPrice:s.data.requestedFloorPrice,requestsCount:s.data.requestNumber,isUserSynced:s.data.isUserSynced,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpentMs:e,rtbDspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbADomain:s.data.rtbAdomain,rtbCreativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,floorPriceInformation:n?mt.wE.fromProtoFloorPriceInformation(n):void 0,hasLexiconEnvelopeBeenUsed:s.data.hasLexiconEnvelopeBeenUsed,dynamicElkFields:{1:`${$e.n.getConnectionType(this.settings.app.config.deviceType)}`,2:rs.f.getCidForElkTracking()}})),this.jc.adBid.next(o),this.settings.adRequestGatekeeper.addBid(i.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),Ni.isBidTargetingAllowedEverInSession(t,t.settings.callingState)?((0,Me.g)(i,s,Re.f.Success),this.$p.next(t)):this.settings.auctionInfoLogging.bidIsNotWinnableEverInSession(t)}Tg(t,e,i,s,n,r,o,a,h=[]){const c=[...(null==n?void 0:n.adError)||[],...h];(0,pt.BZ)(c)&&_e.Mz.trackError(c,this.settings.adMacroReplacer,e.protoLineItem,t,this.settings.playerData.plcmt,a);const d=this.rg.getTrackingData(e,s.data.hasIIQLookup,s.data.identityPartnerUsed);if((0,Me.g)(e,s,Re.f.Fail),!s.data.requestTrackingHandledByServer){const t=s.data.floorPriceInformation,n={advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:mt.EN.fromProtoPrebidPartnerReason(s.data.partnerReason),requestedFloorPrice:s.data.requestedFloorPrice,requestsCount:s.data.requestNumber,isUserSynced:s.data.isUserSynced,prebidJsBidderName:s.data.prebidJsBidderName,playerReason:mt.EN.fromProtoPrebidReason(i),timeSpentMs:r,floorPriceInformation:t?mt.wE.fromProtoFloorPriceInformation(t):void 0,hasLexiconEnvelopeBeenUsed:s.data.hasLexiconEnvelopeBeenUsed,dynamicElkFields:{1:`${$e.n.getConnectionType(this.settings.app.config.deviceType)}`,2:rs.f.getCidForElkTracking()},identityProviderTrackingData:d};this.jc.adPrebid.next(n)}this.settings.adRequestGatekeeper.addPrebid(e.protoLineItem.advertiserLineItemId)}vg(t){return(t||this.gg.stateSettings.currentState||this.gg.stateSettings.predictedState).adOpportunity.id}}class hs{constructor(){this.kg=[]}canCall(t,e){return this.kg.every((i=>i.canCall(t,e)))}registerRequestForLineItem(t,e){return this.kg.forEach((i=>{i.registerRequestForLineItem(t,e)})),this}registerImpressionForLineItem(t,e){return this.kg.forEach((i=>{i.registerImpressionForLineItem(t,e)})),this}registerUnfulfilledRequest(t,e){return this.kg.forEach((i=>{i.registerUnfulfilledRequest(t,e)})),this}registerCallingValidator(t){return this.kg.push(t),this}registerCallingValidators(t){return t.forEach((t=>{this.registerCallingValidator(t)})),this}destroy(){this.kg.forEach((t=>{t.destroy()}))}}const cs="uncategorized";class ds{resetCapsBasedOnExternalEvent(t){const e=this.xt.keys();for(const i of e)this.xg(i,t)&&this.Cg(i,cs)}resetCapsOnLineItemMetadataUpdate(t){this.Cg(t,cs)}xg(t,e){return t.protoLineItem.resetCapType===e}Og(t){return this.xg(t,r.ProtoResetCapTypeEnum.TimeCapping)&&this.Mg(t)>0}}class ls{constructor(t){this.Bg=t,this.Rg=new Map}setNumberOfImpressions({value:t,categoryId:e}){(0,H.$K)(e)&&this.Bg===r.ProtoResetCapTypeEnum.OpportunityCapping||(e=cs),this.Rg.set(e,t)}getNumberOfImpressions({categoryId:t}){return(0,H.$K)(t)&&this.Bg===r.ProtoResetCapTypeEnum.OpportunityCapping||(t=cs),this.Rg.get(t)||0}}class us extends ds{constructor(t=Date.now()){super(),this.Dg=t,this.xt=new Map}canCall(t,e){this.Fg(t);const i=this.xt.get(t);return void 0===i||(0===t.protoLineItem.impressionCap||i.getNumberOfImpressions({categoryId:e})<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t,e){let i=this.xt.get(t);return void 0===i&&(this.xt.set(t,new ls(t.protoLineItem.resetCapType)),i=this.xt.get(t),this.Og(t)&&(i.nextImpressionCapResetTimestamp=this.Vg(this.Mg(t)))),i.setNumberOfImpressions({value:i.getNumberOfImpressions({categoryId:e})+1,categoryId:e}),this}registerRequestForLineItem(t,e){return this}registerUnfulfilledRequest(t,e){return this}destroy(){this.xt.clear()}Cg(t,e){var i;null===(i=this.xt.get(t))||void 0===i||i.setNumberOfImpressions({value:0,categoryId:e})}Mg(t){return t.protoLineItem.resetImpressionsCapTime*Ee.s_}Fg(t,e=Date.now()){if(!this.Og(t))return;const i=this.xt.get(t);void 0!==i&&this.jg(t,e)&&(i.setNumberOfImpressions({value:0}),i.nextImpressionCapResetTimestamp=this.Vg(this.Mg(t),e))}jg(t,e){return e>=this.xt.get(t).nextImpressionCapResetTimestamp}Vg(t,e=Date.now()){const i=Math.ceil((e-this.Dg)/t)*t;return this.Dg+i}}class ps{constructor(t){this.Bg=t,this.Ug=new Map}setNumberOfRequests({value:t,categoryId:e}){(0,H.$K)(e)&&this.Bg===r.ProtoResetCapTypeEnum.OpportunityCapping||(e=cs),this.Ug.set(e,t)}getNumberOfRequests({categoryId:t}){return(0,H.$K)(t)&&this.Bg===r.ProtoResetCapTypeEnum.OpportunityCapping||(t=cs),this.Ug.get(t)||0}}class fs extends ds{constructor(t=Date.now()){super(),this.Dg=t,this.allowResetOnTime=!0,this.xt=new Map}canCall(t,e){this.Fg(t);const i=this.xt.get(t);return void 0===i||(0===t.protoLineItem.requestCap||i.getNumberOfRequests({categoryId:e})<t.protoLineItem.requestCap)}registerRequestForLineItem(t,e,i=Date.now()){let s=this.xt.get(t);return void 0===s&&(this.xt.set(t,new ps(t.protoLineItem.resetCapType)),s=this.xt.get(t),this.Og(t)&&(s.nextRequestCapResetTimestamp=this.Vg(this.Mg(t)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:e})+1,categoryId:e}),this}registerImpressionForLineItem(t){return this}registerUnfulfilledRequest(t,e){return this}getAvailableRequestsForLineItem(t,e){const i=this.xt.get(t);return void 0===i?t.protoLineItem.requestCap:t.protoLineItem.requestCap-i.getNumberOfRequests({categoryId:e})}restoreOneCapForLineItem(t,e){if(t.protoLineItem.ignoreFilledRequests){const i=this.xt.get(t);if(void 0===i)return;const s=i.getNumberOfRequests({categoryId:e});s>0&&i.setNumberOfRequests({value:s-1,categoryId:e})}}destroy(){this.xt.clear()}Cg(t,e){var i;null===(i=this.xt.get(t))||void 0===i||i.setNumberOfRequests({value:0,categoryId:e})}Mg(t){return t.protoLineItem.resetRequestsCapTime*Ee.s_}Fg(t,e=Date.now()){if(!this.Og(t))return;const i=this.xt.get(t);void 0!==i&&this.jg(t,e)&&(i.setNumberOfRequests({value:0}),i.nextRequestCapResetTimestamp=this.Vg(this.Mg(t),e))}jg(t,e){return e>=this.xt.get(t).nextRequestCapResetTimestamp&&this.allowResetOnTime}Vg(t,e=Date.now()){const i=Math.ceil((e-this.Dg)/t)*t;return this.Dg+i}}class ms{constructor(){this.xt=new Map}registerRequestForLineItem(t,e){return this.$g(t,e),this}registerImpressionForLineItem(t,e){return this}registerUnfulfilledRequest(t,e){return this.$g(t,e),this}canCall(t,e,i=Date.now()){const s=this.xt.get(t.timeBetweenRequestsIdentifier);if(void 0===s||void 0===s.lastRequestTimestamp)return!0;if(0===t.timeBetweenRequests)return!0;if(i>=s.lastRequestTimestamp+t.timeBetweenRequests*Ee.s_)return!0;return!(s.categoryId===e||t.protoLineItem.resetCapType!==r.ProtoResetCapTypeEnum.OpportunityCapping)}destroy(){this.xt.clear()}$g(t,e){let i=this.xt.get(t.timeBetweenRequestsIdentifier);void 0===i&&(i={},this.xt.set(t.timeBetweenRequestsIdentifier,i)),i.lastRequestTimestamp=Date.now(),i.categoryId=e}}class gs{constructor(t,e,i,s){this.qg=t,this.Hg=e,this.Jg=i,this.wc=s,this.zg=new n.x,this.Wg=new Map,this.Yg=[],this.forceTriggerUpdateState=()=>{this.Yg.forEach((t=>this.Xg(t)))},this.Xg=(t,e)=>{this.Wg.set(t,this.Kg(this.Hg.get(t),e))},this.Zg=t=>{this.tv([r.ProtoAdType.Video],t)},this.sv=t=>{this.tv([r.ProtoAdType.Overlay],t)},this.nv=t=>{this.tv([r.ProtoAdType.Nonlinear],t)},this.rv=()=>{this.tv(this.Yg)},this.tv=(t,e)=>{t.forEach((t=>this.Xg(t,e))),this.zg.next()},this.ov={[r.ProtoAdType.Video]:this.Zg,[r.ProtoAdType.Overlay]:this.sv,[r.ProtoAdType.Nonlinear]:this.nv},this.Yg=[...this.Hg.keys()],this.Yg.forEach((t=>this.Xg(t))),this.av()}get onContainerStateUpdate(){return this.zg.asObservable()}getContainerMap(){return this.Hg}getContainerStateMap(){return this.Wg}getMainContainer(){return this.Hg.get(this.qg)}getMainContainerState(){return this.getContainerStateMap().get(this.qg)}destroy(){this.Hg.forEach(((t,e)=>{this.Jg.off(t,this.rv),this.wc.off(t,this.ov[e])}))}av(){this.Hg.forEach(((t,e)=>{this.Jg.on(t,this.rv),this.wc.on(t,this.ov[e],{threshold:vt.fJ})}))}Kg(t,e){let i=e;return void 0===i&&(i=this.wc.check({element:t,threshold:vt.fJ})),{width:t.clientWidth,height:t.clientHeight,viewability:i}}}var vs=i(7689),ys=i(3141);class bs{constructor(t,e){this.Qs=t,this.jc=e,this.hv=!1,this.dv=void 0,this.lv=!1,this.uv=!1,this.fv=[],this.Mi=[],this.mv=!1,this.gv=new n.x,this.vv=new n.x,this.yv=-1,this.bv=1,this.Iv=0,this.rg=d.h.getGlobalContainer().resolve(De.H),this.Mi.push(this.Qs.adSelector.getBidEvents(vi.ON_BID_LOADED).subscribe((()=>{this.wv()})),this.Qs.adSelector.getBidEvents(vi.ON_BID_IN_IMPRESSION).subscribe((t=>{try{this.Pv(t)}catch(t){(0,wt.nF)({message:"AdImpressionerController_handleAdImpression_error",level:wt.D_.INFO,exception:(0,Kt.W$)(t).message,sessionId:this.Qs.sessionId},{pacing:5})}})),this.Qs.adSelector.getBidEvents(vi.ON_BID_LOADED_CONSUMED).subscribe((t=>{t.started&&t.status!==o.wy.INVALIDATED&&this._v(t)})),this.Qs.impressionCapsTimer.onTimer().subscribe((()=>{this.wv()})))}get onAdSelected(){return this.gv.asObservable()}get onAdFinished(){return this.vv.asObservable()}start(t){this.Tv=t,this.hv=!0,this.wv()}stop(){this.hv=!1}destroy(){this.stop(),(0,l.i)(this.Mi),this.dv&&this.Sv()}wv(){var t;if(!this.Av())return;const e=this.Qs.adSelector.getBestBidAllowedByStatus([o.wy.LOADED],this.Tv);e&&(this.dv&&this.kv(e)?(this.Iv++,this.dv.markAdAsReplaced(),null===(t=this.dv)||void 0===t||t.stopAd("removeStartedBid"),this.Sv(),this.Ev(e)):this.dv||this.Ev(e))}Ev(t){this.Qs.adxLastLookService.callAdxLookup({state:this.Tv,startingBid:t}),this.dv=t,this.Qs.internalAuctionSnapshot.takeSnapshot(this.dv,this.Tv,this.Tv.adOpportunity.timestamp),this.gv.next(t),this.xv(),this.Cv(t),t.startAd()}Sv(){this.dv&&(this.dv=void 0,(0,l.i)(this.fv),this.fv=[])}Av(){const t=this.Iv>=this.bv;return!(!this.uv||t)||!(!this.hv||this.lv)}kv(t){if(!this.Qs.removeBidIfHigherYoScore&&!this.uv)return!1;if(this.Iv>=this.bv)return!1;return!!(this.dv&&mi.getSelectionScore(this.dv)<mi.getSelectionScore(t))}xv(){const t=this.Tv.adOpportunity;if(this.Ov!==t)return this.Ov=t,void(this.yv=0);this.yv++}Pv(t){this.lv&&((0,wt.nF)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,level:wt.D_.CRITICAL,sessionId:this.Qs.sessionId},{throttle:1e3,extraLogsPercentage:5}),(0,wt.nF)({message:"StartedBidInImpression_bidStatusHistory",exception:`${t.adMediaType}_advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}_vastAd:${JSON.stringify(t.settings.vastAd)}`,callStack:`${JSON.stringify(t.bidStatusHistory)}`,level:wt.D_.INFO,sessionId:this.Qs.sessionId},{throttle:1e3})),this.lv=!0,this.uv=Boolean(t.settings.adManagerLineItem.protoLineItem.isPerformanceOverrideAd),this.mv=this.Mv(t.skipOffset,t.getAdDuration()),this.Qs.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.Qs.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem,this.Tv.adOpportunity.id),this.Qs.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem,this.Tv.adOpportunity.id);const e=this.Qs.auctionInfoLogging.onImpression(t);try{this.Bv(t,e)}catch(t){(0,wt.nF)({message:"AdImpressionerController_handleAdImpressionTracking_error",level:wt.D_.INFO,exception:(0,Kt.W$)(t).message,sessionId:this.Qs.sessionId},{pacing:5})}}Rv(t){if(!this.rg.isLineItemEligibleForReporting(t.settings.adManagerLineItem)||!this.rg.canUseWinUrl(t.settings.adManagerLineItem))return;const{protoIntentiqResponseData:e,infrastructureFee:i}=t.settings.adManagerLineItem.protoLineItem;let s;e&&(s=(null==e?void 0:e.vendorName)||"connatixAd");const n=i||0,r=t.price-n/100*t.price;this.rg.reportExternalWin({biddingPlatformId:ys.T.OpenRTB,partnerAuctionId:t.settings.callingState.adOpportunity.id,bidderCode:s,cpm:r,currency:"USD",placementId:t.settings.bidSlotId})}_v(t){this.Dv(t),t.wasAdReplaced||(this.Iv=0),this.Qs.loopAdWhenFinished?t.resumeAd():this.Qs.pauseAdWhenFinished?t.pauseAd():(this.vv.next(t),this.Sv(),this.wv())}Dv(t){if(this.lv)return this.lv=!1,void(this.uv=!1);if(!t.shouldTrackPostbid)return;const e=this.Qs.auctionInfoLogging.onPostBid(t);this.Nv(t,e)}Fv(){const t=this.Qs.internalAuctionSnapshot.lastSnapshot,e=null==t?void 0:t.firstLoser,i=null==t?void 0:t.allLoserStatusInfo;let s,n,r;return(0,H.$K)(e)&&(s=e.lineItem,r=e.isIma,n=e.status),{firstLoser:e,bidStatus:n,highestLosingBidLineItem:s,allLoserStatusInfo:i,firstLoserIsIma:r}}Bv(t,e){var i,s,n,r,o,a,h,c,d,l;const{adBreakState:u}=this.Tv,p=(0,H.hj)((0,at.oK)(t.getAdDuration(),2))?(0,at.oK)(t.getAdDuration(),2):0,f=(0,H.hj)((0,at.oK)(t.declaredDurationInSeconds,2))?(0,at.oK)(t.declaredDurationInSeconds,2):0,m=(0,wi.H8)(t.createdTimestamp),g=this.Tv.adContainerState.get(t.settings.adManagerLineItem.protoLineItem.adType).viewability,v=t.getAdMediaSize();let y;if((0,H.$K)(this.Qs.internalAuctionSnapshot.lastSnapshot)){const{winnerDemandType:t,firstLoser:e,firstOpenMarketLoser:i}=this.Qs.internalAuctionSnapshot.lastSnapshot;y={winnerDemandType:t,firstLoser:e,firstOpenMarketLoser:i}}else(0,wt.nF)({message:"AdImpressionerController: No internal auction snapshot found",level:wt.D_.WARN,sessionId:this.Qs.sessionId},{throttle:1,shouldSendMaxLog:!1});const{floorPriceInformation:b,requestedFloorPrice:I,discount:w,liveRampType:P,serverBillingNoticeUrls:T}=t.settings.requestMetadata.data,_=this.Fv(),S=(0,H.$K)(_.firstLoser)?100*(t.price-_.firstLoser.customClientPrice):null,A=_.allLoserStatusInfo;let x,k;(0,H.$K)(this.Qs.internalAuctionSnapshot.lastSnapshot)&&(x=this.Qs.internalAuctionSnapshot.lastSnapshot.auctionEndType,k=this.Qs.internalAuctionSnapshot.lastSnapshot.deltaTimestampAdStartAdOpportunity);let E=t.settings.cpm;t.settings.adManagerLineItem.adxFloorPrice&&(E=I),t.settings.adManagerLineItem.protoLineItem.isAdxLookup&&(E=t.price);const C=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup,t.settings.requestMetadata.data.identityPartnerUsed),O=this.Qs.assertiveYieldService.getAssertiveYieldOnImpression(t),L=this.Qs.assertiveYieldService.getAssertiveYieldProbability(t),M=null===(i=this.Qs.userManagerService)||void 0===i?void 0:i.lotamePanorama,R={adPodSlotPosition:u.adPodSlotIndex,adSourceType:mt.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:E,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,isUserSynced:t.settings.requestMetadata.data.isUserSynced,timeSpentMs:t.startingTimeMs,vastMediaType:t.adMediaType,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime,startAdToImpressionTimeMs:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.startAdToImpressionTime,impressionDurationSeconds:p,declaredDurationSeconds:f,isExplorationMode:this.Qs.explorationMode,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:b?mt.wE.fromProtoFloorPriceInformation(b):void 0,adMediaFileWidth:v.width,adMediaFileHeight:v.height,bidElapsedTimeSeconds:m,adBreakType:mt.EN.fromProtoAdBreakType(u.adBreakType),liveRampType:P?mt.EN.fromProtoLiveRamp(P):void 0,internalAuctionInformation:y?mt.W1.fromProtoInternalAuction(y):void 0,auctionInformation:e?mt.Ti.fromProtoAuctionInformation(e):void 0,hasLexiconEnvelopeBeenUsed:t.settings.requestMetadata.data.hasLexiconEnvelopeBeenUsed,dynamicElkFields:{1:t.settings.requestMetadata.data.rtbRequestId,2:t.settings.requestMetadata.data.auctionBidId,4:`${g}`,5:`${t.settings.adManagerLineItem.protoLineItem.viewability}`,6:`${(0,H.$K)(null===(r=_.highestLosingBidLineItem)||void 0===r?void 0:r.lineItemPriority)?null===(o=_.highestLosingBidLineItem)||void 0===o?void 0:o.lineItemPriority:0}`,7:`${(0,H.$K)(_.bidStatus)?_.bidStatus:null}`,8:`${(0,H.$K)(t.price)?t.price:0}`,9:`${(0,H.$K)(null===(a=_.firstLoser)||void 0===a?void 0:a.customClientPrice)?_.firstLoser.customClientPrice:0}`,11:`${x}`,10:`${(0,H.$K)(null===(h=_.firstLoser)||void 0===h?void 0:h.demandType)?null===(c=_.firstLoser)||void 0===c?void 0:c.demandType:0}`,12:(0,H.hj)(k)?`${k}`:"0",13:`${(0,H.$K)(A)?A.verifyingBidsInAuction:0}`,14:`${(0,H.$K)(A)?A.idleBidsInAuction:0}`,15:`${(0,H.$K)(A)?A.loadingBidsInAuction:0}`,16:`${(0,H.$K)(A)?A.loadedBidsInAuction:0}`,17:`${(0,H.$K)(this.Ov.id)?this.Ov.id:""}`,18:`${(0,H.$K)(null===(d=_.highestLosingBidLineItem)||void 0===d?void 0:d.creativeType)?null===(l=_.highestLosingBidLineItem)||void 0===l?void 0:l.creativeType:null}`,19:`${(0,H.$K)(_.firstLoserIsIma)?_.firstLoserIsIma:null}`,20:`${S}`,21:`${this.yv}`,22:`${$e.n.getConnectionType(this.Qs.deviceType)}`,23:rs.f.getCidForElkTracking(),27:`${(0,H.$K)(t.settings.adxFloorPrice)?t.settings.adxFloorPrice.index:-1}`},hasAdSkip:this.mv,discount:w?mt.dz.fromProtoDiscount(w):void 0,serverBillingNoticeUrls:T,identityProviderTrackingData:C,assertiveYieldResult:O,assertiveYieldProbability:L,panorama:M};this.jc.adImpression.next(R),this.Rv(t)}Nv(t,e){var i,s;const{adBreakState:n}=this.Tv,r=(0,wi.H8)(t.createdTimestamp),o=(0,H.$K)(e)?mt.EN.fromProtoAuctionPostbidReason(this.Qs.auctionInfoLogging.getGeneralPostbidReason(t.errorReason)):void 0,{discount:a,liveRampType:h}=t.settings.requestMetadata.data,c=t.settings.requestMetadata.data.floorPriceInformation;let d,l;(0,H.$K)(this.Qs.internalAuctionSnapshot.lastSnapshot)&&(d=this.Qs.internalAuctionSnapshot.lastSnapshot.auctionEndType,l=this.Qs.internalAuctionSnapshot.lastSnapshot.deltaTimestampAdStartAdOpportunity);const u=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup,t.settings.requestMetadata.data.identityPartnerUsed),p=this.Qs.assertiveYieldService.getAssertiveYieldProbability(t),f=null===(i=this.Qs.userManagerService)||void 0===i?void 0:i.lotamePanorama,m={adPodSlotPosition:n.adPodSlotIndex,adSourceType:mt.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,reason:t.errorReason,isBidLoaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,isUserSynced:t.settings.requestMetadata.data.isUserSynced,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,timeSpentMs:t.startingTimeMs,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:c?mt.wE.fromProtoFloorPriceInformation(c):void 0,liveRampType:h?mt.EN.fromProtoLiveRamp(h):void 0,bidElapsedTimeSeconds:r,adBreakType:mt.EN.fromProtoAdBreakType(n.adBreakType),auctionInformation:e?mt.Ti.fromProtoAuctionInformation(e):void 0,auctionReason:o,discount:a?mt.dz.fromProtoDiscount(a):void 0,hasLexiconEnvelopeBeenUsed:t.settings.requestMetadata.data.hasLexiconEnvelopeBeenUsed,identityProviderTrackingData:u,assertiveYieldProbability:p,dynamicElkFields:{1:`${d}`,2:(0,H.hj)(l)?`${l}`:"0",7:`${(0,H.$K)(this.Ov.id)?this.Ov.id:""}`,8:`${this.yv}`,9:`${$e.n.getConnectionType(this.Qs.deviceType)}`,10:rs.f.getCidForElkTracking()},panorama:f};this.jc.adPostbid.next(m)}Cv(t){this.fv.push(t.onVpaidEvent.subscribe((e=>{const i=(0,_e.Ko)(e.type,t.settings.vastTracker);!(0,pt.BZ)(i)&&e.type===o.fI.AdImpression&&(t.adSourceType===r.ProtoAdsourceTypeEnum.Vpaid||t.adSourceType===r.ProtoAdsourceTypeEnum.VastMedia)&&(0,wt.nF)({message:"AdManager_AdImpressionController_tracker_impression_not_found",exception:`creativeId: ${t.creativeId}, advertiserLineItemId: ${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}`,level:wt.D_.CRITICAL,sessionId:this.Qs.sessionId},{shouldSendMaxLog:!1});let s;e.type===o.fI.AdError&&(s=e.payload.errorCode||ji.Oq.GeneralError),_e.Mz.track(i,this.Qs.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,this.Qs.plcmt,t.getTrackerSlot(),s)}))),this.fv.push(t.onAdViewableImpression.subscribe((e=>{const{publisherLineItemId:i,advertiserLineItemId:s,rtbSeatId:n,dspId:r,rtbAdomain:o}=e,a=t.settings.requestMetadata.data.discount;this.jc.adInView.next({publisherLineItemId:i,advertiserLineItemId:s,rtbSeatId:n,rtbDspId:r,adBreakType:mt.EN.fromProtoAdBreakType(this.Tv.adBreakState.adBreakType),discount:a?mt.dz.fromProtoDiscount(a):void 0,hasSkipAd:this.mv,rtbADomain:o}),_e.Mz.track(t.settings.vastTracker.adViewableImpression,this.Qs.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,this.Qs.plcmt)})))}Mv(t,e){if((0,H.hj)(t)&&t>=0)return!0;return(0,nt.Xj)(e,this.Qs.skipAdSettings)}}var Is,ws=i(4065);class Ps{get onAdLifeEnding(){return this.Vv.asObservable()}constructor(t,e){this.Uv=t,this.$v=e,this.Vv=new n.x,this.Mi=[],this.qv=!1;const i=d.h.getGlobalContainer().resolve(it.f);this.Js=new ws.B(i),this.Hv(),this.pa(),this.Jv()}isDurationExpired(){return this.qv}destroy(){this.Js.disable(),this.Mi.forEach((t=>t.unsubscribe()))}Hv(){this.Mi.push(this.Js.onTimeElapsed.subscribe((()=>{this.Js.stop(),this.qv=!0,this.Vv.next()})))}pa(){this.Mi.push(this.Uv.subscribe((t=>{switch(t.type){case o.fI.AdImpression:this.Gv(t.payload.adSourceData.length);break;case o.fI.AdPlaying:this.Jv();break;case o.fI.AdPaused:this.zv();break;case o.fI.AdStopped:case o.fI.AdSkipped:case o.fI.AdError:this.Wv();break;case o.fI.AdVideoFirstQuartile:this.Yv()}})))}zv(){this.Js.stop()}Jv(){this.Js.start()}Gv(t){if(this.Xv=Date.now(),t){this.en=t*Ee.s_;const e=this.en-this.$v;this.Qv(e),this.Js.start()}}Wv(){this.Js.stop(),this.qv=!1}Yv(){if(this.en)return;const t=Date.now()-this.Xv;this.en=4*t;const e=this.en-t-this.$v;this.Qv(e)}Qv(t){const e=t<0?0:t;this.Js.reset(e)}}!function(t){t[t.NoPrefetch=0]="NoPrefetch",t[t.StartSessionPrefetch=1]="StartSessionPrefetch",t[t.MidSessionPrefetch=2]="MidSessionPrefetch"}(Is||(Is={}));var Ts=i(384);class _s{constructor(t,e,i,s){this.wc=t,this.Kr=e,this.wr=i,this.Kv=new n.x,this.bh=new n.x,this.Zv=Is.NoPrefetch,this.ty=s===r.ProtoAdPlaybackMode.ScrollToPlay}get prefetchType(){return this.Zv}get startSessionPrefetch(){return this.ty}set startSessionPrefetch(t){this.ty=t}get onMidSessionPrefetchReady(){return this.Kv.asObservable()}get onPrefetchStart(){return this.bh.asObservable()}enablePrefetch(t,e,i){this.ty=!1,this.Zv=t,this.bh.next(),null==i||i.enablePredict(e,t)}observeOutOfViewDistance(t,e,i,s){if(this.Kr.getIframeMode()===Ts.K.Safe)return void this.enablePrefetch(t,e,s);this.wc.observeOutOfViewDistance(i,_s.VIEWPORTS_THRESHOLD*this.Kr.getViewportHeight(),(()=>{this.wc.disconnectOutOfViewObserver(),this.enablePrefetch(t,e,s)}))}disablePrefetch(){this.Zv=Is.NoPrefetch}tryPreparingMidSessionPrefetch(t,e){if(!this.ey(t))return;const i=null==t?void 0:t.disableReason;i===c.m.TimeoutBetweenAds&&this.Kv.next(Is.MidSessionPrefetch),i===c.m.InImpression&&this.iy(t,e)&&this.Kv.next(Is.MidSessionPrefetch)}ey(t){return this.Zv===Is.NoPrefetch&&null!==t&&t.adBreakLength!==Number.POSITIVE_INFINITY}iy(t,e){return e&&t.adBreakLength<=St.O.MID_SESSION_PREFETCH_MINIMUM_TIME&&!this.wr}}_s.VIEWPORTS_THRESHOLD=1;class Ss{constructor(t,e,i,s){this.wc=t,this.Kr=e,this.Qs={[h.k.LINEAR]:{enable:!1,disablePayload:null,usePrefetch:!0},[h.k.NONLINEAR]:{enable:!1,disablePayload:null,usePrefetch:!1}},this.Kv=new n.x,this.bh=new n.x,this.Mi=[],this.sy(i,s)}get onMidSessionPrefetchReady(){return this.Kv.asObservable()}get onPrefetchStart(){return this.bh.asObservable()}getAllLinearityKeys(){return Object.keys(this.Qs)}enable(t){this.Qs[t].enable=!0,this.Qs[t].disablePayload=null}disable(t,e){this.Qs[t].enable=!1,this.Qs[t].disablePayload=e}getDisablePayload(t){return this.Qs[t].disablePayload}setAdManager(t,e){this.Qs[t].adManager=e,this.Qs[t].usePrefetch&&(this.Qs[t].adLifecycleObserver=new Ps(e.onVpaidEvent,St.O.MID_SESSION_PREFETCH_MINIMUM_TIME),this.Mi.push(this.Qs[t].adLifecycleObserver.onAdLifeEnding.subscribe((()=>{const e=this.getDisablePayload(t),i=this.Qs[t].adLifecycleObserver.isDurationExpired();this.Qs[t].adPrefetch.tryPreparingMidSessionPrefetch(e,i)}))))}isAdManagerEnable(t){return this.Qs[t].enable}getAllAdManagers(){return this.getAllLinearityKeys().map((t=>this.Qs[t].adManager))}getAllAvailableAdManagers(){return this.getAllAdManagers().filter((t=>(0,H.$K)(t)))}getAdManagerByLinearity(t){return this.Qs[t].adManager}usePrefetch(t){return this.Qs[t].usePrefetch}enablePrefetch(t,e,i,s){this.usePrefetch(t)&&this.Qs[t].adPrefetch.enablePrefetch(e,i,s)}observeOutOfViewDistance(t,e,i,s,n){this.usePrefetch(t)&&this.Qs[t].adPrefetch.observeOutOfViewDistance(e,i,s,n)}startSessionPrefetch(t,e){this.Qs[t].adPrefetch.startSessionPrefetch=e}disablePrefetch(t){this.usePrefetch(t)&&this.Qs[t].adPrefetch.disablePrefetch()}getPrefetchType(t){if(this.usePrefetch(t))return this.Qs[t].adPrefetch.prefetchType}hasStartSessionPrefetch(t){return!!this.usePrefetch(t)&&this.Qs[t].adPrefetch.startSessionPrefetch}tryPreparingMidSessionPrefetch(t,e){var i;if(!this.usePrefetch(t))return;const s=(null===(i=this.Qs[t].adLifecycleObserver)||void 0===i?void 0:i.isDurationExpired())||!1;this.Qs[t].adPrefetch.tryPreparingMidSessionPrefetch(e,s)}destroy(){(0,l.i)(this.Mi),this.getAllAvailableAdManagers().forEach((t=>t.destroy()))}sy(t,e){this.getAllLinearityKeys().forEach((i=>{this.Qs[i].usePrefetch&&(this.Qs[i].adPrefetch=new _s(this.wc,this.Kr,t,e),this.ny(i))}))}ny(t){const e=this.Qs[t].adPrefetch;this.Mi.push(e.onMidSessionPrefetchReady.subscribe((e=>{this.Kv.next({prefetchType:e,linearity:h.k[t]})})),e.onPrefetchStart.subscribe((()=>{this.bh.next()})))}}var As=i(6666);class xs{constructor(t,e){this.Sd=t,this.ah=e,this.oy=!1,this.hy=!1,this.ly=!1}get predictMode(){return this.oy}get adFetchingAllowed(){return this.hy}get impressionsAllowed(){return this.ly}get currentAdPlayerState(){return this.uy}get predictedAdPlayerState(){return this.py}partialStateUpdate(t){this.uy&&(this.uy=Object.assign(Object.assign({},this.uy),t)),this.py&&(this.py=Object.assign(Object.assign({},this.py),t))}getCurrentAdManagerState(t=!1){let e=this.uy;!this.currentAdPlayerState&&t&&(e=this.py);const i=this.Sd.getContainerStateMap();return this.getAdManagerState(e,i)}getPredictedAdManagerState(){const t=this.py,e=this.my();return this.getAdManagerState(t,e)}getAdManagerState(t,e){if(!t)return;const{width:i,height:s,viewability:n}=this.Sd.getMainContainerState(),{clickToPlay:r,mediaMetadata:o,sound:a,adBreakState:h,linearAdOpportunity:c,playerOrientation:d,inFloating:l,queryJsTargeting:u}=t;return{width:i,height:s,viewability:n,clickToPlay:r,media:o,sound:!!a,soundVolume:a,adContainerState:e,adBreakState:h,adOpportunity:c,playerOrientation:d,page:{insights:As.k.pageInsights},inFloating:l,auctionEndType:this.gy,isPageInFocus:this.ah.isPageInFocus,queryJsTargeting:u}}my(){var t;let e;return(null===(t=this.py)||void 0===t?void 0:t.prefetchStateType)===Is.StartSessionPrefetch?(e=new Map,this.Sd.getContainerStateMap().forEach(((t,i)=>{e.set(i,Object.assign(Object.assign({},t),{viewability:!0}))}))):e=this.Sd.getContainerStateMap(),e}getCallSettings(){return{maxParallelCalls:St.O.PARALLEL_CALLS_DEFAULT,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}getWinSettings(){return{desiredBitRate:St.O.DEFAULT_DESIRED_BITRATE,maxParallelWins:St.O.PARALLEL_WINS_DEFAULT,vastViewMode:this.currentAdPlayerState?this.currentAdPlayerState.vastViewMode:this.predictedAdPlayerState.vastViewMode,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}enableImpression(t){this.oy=!1,this.uy=t,this.py||(this.py=this.uy),this.hy=!0}disableImpression(){this.ly=!1,this.hy=!1}enablePredict(t,e){this.uy=null,this.oy=!0,this.py=t,this.py.prefetchStateType=e,this.hy=!0}auctionEnd(t){this.gy=t,this.ly=!0}auctionStopCalling(){this.predictMode&&(this.hy=!1)}}var ks=i(3775);const Es="cnx-ad-slot";class Cs{constructor(t,e,i){this.parentContainer=t,this.Kr=e,this.De=i,this.isImaSlot=!1,this.isAdxLookupSlot=!1,this.slotsContainer=this.Kr.createElementByString('<div class= "cnx-ad-bid-slot"></div>');const s=this.Kr.createElementByString(`<div class="${Es}"></div>`);this.adSlot=this.Kr.createElementByString(`<div class="${Es}"></div>`),this.videoSlot=this.Kr.createElementByString(`<video class="${Es} cnx-ad-video-slot"></video>`);const n=be.n.defaultVideoPosterURL;(0,H.QM)(n)&&this.videoSlot.setAttribute("poster",n),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.videoSlot.setAttribute("aria-label","Advertisement"),this.slotsContainer.setAttribute("aria-hidden","true"),s.appendChild(this.videoSlot),s.appendChild(this.adSlot),this.slotsContainer.appendChild(s),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}vy(){this.parentContainer.querySelectorAll(`[${ks.b.GarbageCollector}]`).forEach((t=>{(0,q.bX)(t)}))}sanitize(){this.vy()}}class Os extends Cs{constructor(){super(...arguments),this.isImaSlot=!0,this.isAdxLookupSlot=!1,this.yy=!1,this.by={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return Ri.X3.fetchImaSdk(window,!0,this.De).then((t=>this.Py(t)))}destroy(){this.by.imaAdsLoader&&this.by.imaAdsLoader.destroy(),this.by.imaAdDisplayContainer&&this.by.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.by.imaAdsLoader.contentComplete(),super.sanitize()}Py(t){if(this.yy)return this.by;t.settings.setDisableCustomPlaybackForIOS10Plus(!0);const e=this._y(t),i=this.Ty(t,e);return this.by={imaSdk:t,imaAdDisplayContainer:e,imaAdsLoader:i},this.yy=!0,this.by}_y(t){const e=new t.AdDisplayContainer(this.adSlot,this.videoSlot);return e.initialize(),e}Ty(t,e){const i=new t.AdsLoader(e);return i.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.INSECURE),i.getSettings().setAutoPlayAdBreaks(!1),i}}class Ls extends Os{constructor(){super(...arguments),this.isAdxLookupSlot=!0}}class Ms{constructor(t){this.settings=t,this.Sy=new Set,this.Ay=new Set}preloadImaSdkSlots(t){Ri.X3.preloadImaSdk(window);for(let e=1;e<=3;e++){const e=new Os(t,this.settings.globalDomUtilsService,this.settings.sessionId);e.fetchImaDependencies(),this.Sy.add(e)}}preloadImaSdkAdxLookupSlot(t){const e=new Ls(t,this.settings.globalDomUtilsService,this.settings.sessionId);e.fetchImaDependencies(),this.Sy.add(e)}requestAdSlot(t){const e=new Cs(t,this.settings.globalDomUtilsService,this.settings.sessionId);return this.ky(e),e}requestAdSlotIma(t,e=!1){let i=e?this.Ey():this.xy();return i||(i=e?new Ls(t,this.settings.globalDomUtilsService,this.settings.sessionId):new Os(t,this.settings.globalDomUtilsService,this.settings.sessionId)),this.ky(i),i}getNumberOfUsedImaSlots(){return[...this.Ay].map((t=>t.isImaSlot&&!t.isAdxLookupSlot)).length}destroyAdSlot(t){this.Ay.delete(t),t.destroy()}recycleAdSlot(t){if(this.Ay.delete(t),this.Cy(t)){[...this.Sy].map((t=>t.isImaSlot&&!t.isAdxLookupSlot)).length>=3&&!t.isAdxLookupSlot?this.destroyAdSlot(t):(t.sanitize(),this.Sy.add(t))}else this.destroyAdSlot(t)}Cy(t){return t.isImaSlot}Oy(t){return t.isAdxLookupSlot}Ey(){let t=null;return this.Sy.forEach((e=>{this.Oy(e)&&null===t&&(t=e)})),t}xy(){let t=null;return this.Sy.forEach((e=>{this.Cy(e)&&null===t&&(t=e)})),t}ky(t){this.Sy.delete(t),this.Ay.add(t)}}class Rs{constructor(t,e){this.Qs=t,this.My=e,this.Mi=[],this.Ly=!1,this.By=()=>{if(this.Qs.adSelector.hasReachTheMaxNumberOfReadyBids())return void this.Qs.auctionManager.onNothingToWin();const t=this.Ry(),{selectedBid:e,state:i}=t;if(!e)return;this.Qs.auctionInfoLogging.winBid(e);const{width:s,height:n}=i.adContainerState.get(e.settings.adManagerLineItem.protoLineItem.adType);e.initAd(s,n,this.Dy.vastViewMode,this.Qs.desiredBitRateForWins,void 0,void 0,i.soundVolume);const{vastTracker:r,adManagerLineItem:o}=e.settings;return _e.Mz.track(r.adWin,this.Qs.adMacroReplacer,o.protoLineItem,i,this.Qs.plcmt),Promise.resolve()},this.rg=d.h.getGlobalContainer().resolve(De.H),this.cg=new es(this.By,10),this.Mi.push(this.Qs.adSelector.getBidEvents(vi.ON_BID).subscribe((t=>{const e=this.Ry();this.Qs.auctionInfoLogging.newBidAdded(t,e),this.Ny()})),this.Qs.adSelector.getBidEvents(vi.ON_BID_STARTING).subscribe((()=>{this.Ny()})),this.Qs.adSelector.getBidEvents(vi.ON_BID_LOADED_CONSUMED).subscribe((t=>{if(!t.started&&t.status!==o.wy.INVALIDATED){const e=this.Qs.auctionInfoLogging.onPostBid(t),i=!0;this.Fy(t,e,i)}this.Ny()})),this.Qs.adSelector.getBidEvents(vi.ON_BID_LOADING_CONSUMED).subscribe((t=>{if(t.status!==o.wy.INVALIDATED){const e=this.Qs.auctionInfoLogging.onPostBid(t);this.Fy(t,e)}this.Ny()})),this.Qs.impressionCapsTimer.onTimer().subscribe((()=>{this.Ny()})))}win(t){this.Dy=t,this.cg.setNumberOfThreads(t.maxParallelWins),this.Ly=!0,this.Ny()}stop(){this.Ly=!1,this.cg.stop()}destroy(){this.stop(),(0,l.i)(this.Mi)}Ny(){this.Ly&&this.cg.start()}Ry(){const t=this.Dy.stateSettings.currentState||this.Dy.stateSettings.predictedState;return this.Qs.adSelector.selectBestBidForWin(t)}Fy(t,e,i=!1){var s,n,r,o,a,h;_e.Mz.trackError(t.settings.vastTracker.adError,this.Qs.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,this.Qs.plcmt,t.vastErrorCode);const c=(null===(n=null===(s=this.Dy.stateSettings)||void 0===s?void 0:s.currentState)||void 0===n?void 0:n.adBreakState)||(null===(o=null===(r=this.Dy.stateSettings)||void 0===r?void 0:r.predictedState)||void 0===o?void 0:o.adBreakState),d=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup),l=this.Qs.assertiveYieldService.getAssertiveYieldProbability(t),u=(0,wi.H8)(t.createdTimestamp),p=(0,H.$K)(e)?mt.EN.fromProtoAuctionPostbidReason(this.Qs.auctionInfoLogging.getGeneralPostbidReason(t.errorReason)):void 0,{discount:f,liveRampType:m}=t.settings.requestMetadata.data,g=t.settings.requestMetadata.data.floorPriceInformation,v=null===(a=this.Qs.userManagerService)||void 0===a?void 0:a.lotamePanorama,y={adPodSlotPosition:c.adPodSlotIndex,adSourceType:mt.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,reason:t.errorReason,isBidLoaded:i,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,isUserSynced:t.settings.requestMetadata.data.isUserSynced,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,timeSpentMs:t.loadingTimeMs,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(h=t.settings.bidLifecycle)||void 0===h?void 0:h.winToAdLoadedTime,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:g?mt.wE.fromProtoFloorPriceInformation(g):void 0,liveRampType:m?mt.EN.fromProtoLiveRamp(m):void 0,bidElapsedTimeSeconds:u,auctionInformation:e?mt.Ti.fromProtoAuctionInformation(e):void 0,auctionReason:p,discount:f?mt.dz.fromProtoDiscount(f):void 0,hasLexiconEnvelopeBeenUsed:t.settings.requestMetadata.data.hasLexiconEnvelopeBeenUsed,identityProviderTrackingData:d,assertiveYieldProbability:l,dynamicElkFields:{10:rs.f.getCidForElkTracking()},panorama:v};this.My.adPostbid.next(y)}}class Bs{constructor(t,e){this.Vy=t,this.jy=e,this.Uy=0,this.$y=new n.x,this.Mi=[],this.Hy=this.Jy(),this.Gy()}get onForceCallAdxLastLook(){return this.$y.asObservable()}forceCallAdxLookup(t,e){if(!t||!e)return;const i={adxLineItem:t,state:e};this.$y.next(i)}callAdxLookup(t){const{state:e,startingBid:i}=t;if(!this.Hy||!e)return;const s=this.jy.getBidsByLineItemId(this.Hy.protoLineItem.advertiserLineItemId),n=this.Vy.getBestBidPriceExceptAdxLookup(),r=s.every((t=>t.price<n)),o=!!(null==i?void 0:i.settings.adManagerLineItem.protoLineItem.isAdxLookup);if((r||o)&&this.Vy.hasUnstartedBids()&&n>0&&n<Ii.zt-Ii.P8){const t={adxLineItem:this.Hy,state:e};this.$y.next(t)}}destroy(){(0,l.i)(this.Mi)}getAdxLastLookPrice(){let t=this.Vy.getBestBidPriceExceptAdxLookup()+Ii.P8;return t&&t<Ii.FH&&(t=Ii.FH),t<this.Uy?this.Uy:t}Gy(){this.Mi.push(this.Vy.getBidEvents(vi.ON_BID_LOADED).subscribe((t=>{t.settings.adManagerLineItem.protoLineItem.isAdxLookup&&t.price>this.Uy&&(this.Uy=t.price)})))}Jy(){return this.Vy.getAllLineItems().find((t=>t.protoLineItem.isAdxLookup))}}class Ds{constructor(t,e,i){this.Vy=t,this.jc=e,this.De=i,this.zy=new Map}bidIsNotWinnableEverInSession(t){if(!this.Wy(t))return;const e=[...this.Vy.getAllBidPricesSortedDesc(),t.price].sort(((t,e)=>e-t)),i=this.Yy(e);this.Xy(t.settings.requestMetadata.data.cnxBidId,i,r.ProtoAuctionLossReasonEnum.TargetingMismatch)}newBidAdded(t,e){this.Wy(t)&&(e.selectedBid?e.selectedBid!==t?this.Qy(t,e):this.Ky(t):this.Qy(t,e))}winBid(t){if(!this.Wy(t))return;const e=this.Vy.getAllBidPricesSortedDesc(),i=this.Yy(e);this.zy.set(t,i)}onPostBid(t){return this.Zy(t)}onImpression(t){return this.Zy(t)}Wy(t){return t.settings.requestMetadata.data.logAuctionInformation}Ky(t){const{cnxBidId:e}=t.settings.requestMetadata.data,i=this.Vy.getAllBidPricesSortedDesc(),s=this.Yy(i);this.Xy(e,s,r.ProtoAuctionLossReasonEnum.CompetitorPriority)}Zy(t){const e=this.tb(t);return this.eb(t),e}Qy(t,e){var i,s,n,r;const o=this.ib(t,e);if(!(0,H.$K)(o))return void this.sb("AdManager_AuctionInfoLogging_lossReason_cannot_be_found",t.settings.requestMetadata.data.cnxBidId,null===(r=null===(n=null===(s=null===(i=e.selectedBid)||void 0===i?void 0:i.settings)||void 0===s?void 0:s.requestMetadata)||void 0===n?void 0:n.data)||void 0===r?void 0:r.cnxBidId);const{cnxBidId:a}=t.settings.requestMetadata.data,h=this.Vy.getAllBidPricesSortedDesc(),c=this.Yy(h);this.Xy(a,c,o)}tb(t){if(this.zy.has(t))return this.zy.get(t);this.Wy(t)&&this.sb("AdManager_AuctionInfoLogging_cannot_find_win_bid_snapshot",t.settings.requestMetadata.data.cnxBidId)}eb(t){this.zy.has(t)&&this.zy.delete(t)}ib(t,e){var i;return null===(i=e.unselectedBidList.find((e=>e.bid===t)))||void 0===i?void 0:i.lossReason}getGeneralPostbidReason(t){switch(t){case o.RG.ImaScriptFailure:case o.RG.ImaObjectNotFound:case o.RG.ImaManagerInit:case o.RG.ImaInitSdkError:case o.RG.AdxOverlayGptScriptLoad:case o.RG.DisplayIntegratorIframeLoad:return r.ProtoAuctionPostbidReasonEnum.SDKFailure;case o.RG.VastUnsupportedMedia:case o.RG.CnxMediaSrcNotSupported:return r.ProtoAuctionPostbidReasonEnum.UnsupportedMedia;case o.RG.DomainBlocked:case o.RG.AdaptorInitAdError:case o.RG.AdaptorStartAdError:case o.RG.WrapperInitAdError:case o.RG.WrapperStartAdError:return r.ProtoAuctionPostbidReasonEnum.TargetingMismatch;default:return r.ProtoAuctionPostbidReasonEnum.CreativeError}}Yy(t){const e=t[0]?(0,Pe.pd)(t[0]):void 0,i=t[1]?(0,Pe.pd)(t[1]):void 0;return e||this.sb("AdManager_AuctionInfoLogging_highestBidPrice_missing",`${e}`),{bidDensity:t.length,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:i}}Xy(t,e,i){this.jc.auctionInformation.next({cnxBidId:t,auctionInformation:e?mt.Ti.fromProtoAuctionInformation(e):void 0,auctionLossReason:mt.EN.fromProtoAuctionLossReason(i)})}sb(t,e="",i=""){(0,wt.nF)({message:t,level:wt.D_.CRITICAL,callStack:e,exception:i,sessionId:this.De},{throttle:5})}}class Ns{constructor(t){this.Qs=t,this.nb=new n.x,this.rb=[],this.ob=!1,this.ab=!1,this.Mi=[],this.hb=""}get onAuctionMechanismEnded(){return this.nb.asObservable()}startNewAuction(t){this.hb=t.auctionId,this.cb=t.callingState,this.ab=t.waitForNewReadyBid,this.lb(),this.ub(),this.Gy(),this.pb()}cancelAuction(){this.lb()}updateState(t){if(this.cb=t,0===this.rb.length)return;const e=this.cb.stateSettings.currentState||this.cb.stateSettings.predictedState;if(!e)return;const i=this.Qs.adSelector.getLineItemsByRequest(!0).map((t=>t.protoLineItem.advertiserLineItemId)),s=this.Qs.adSelector.getAllCallableLineItems(e).map((t=>t.protoLineItem.advertiserLineItemId));this.rb=this.rb.filter((t=>t.isAdCalled||(0,pt.d3)(t.lineItemId,s)||(0,pt.d3)(t.lineItemId,i))),this.pb()}onNothingToWin(){0!==this.rb.length&&this.rb.every((t=>!0===t.isAdCalled))&&this.pb()}onNothingToCall(){0!==this.rb.length&&(this.fb(),this.pb())}fb(){const t=this.Qs.adSelector.getLineItemsByRequest(!0).map((t=>t.protoLineItem.advertiserLineItemId));this.rb=this.rb.filter((e=>!0===e.isAdCalled||!1===e.isAdCalled&&(0,pt.d3)(e.lineItemId,t)))}vb(){this.lb(),this.nb.next(this.hb)}Gy(){this.Mi.push(this.Qs.adSelector.getLineItemRequestEvents(Ei.ON_END).subscribe((t=>{this.yb(t),this.pb()})),this.Qs.adSelector.getBidEvents(vi.ON_BID_LOADED).subscribe((t=>{this.ob=!0,this.pb()})),this.Qs.adSelector.getBidEvents(vi.ON_BID_LOADING_CONSUMED).subscribe((t=>{this.pb()})))}yb(t){this.rb.forEach((e=>{t.some((t=>t.protoLineItem.advertiserLineItemId===e.lineItemId))&&(e.isAdCalled=!0)}))}bb(){(0,l.i)(this.Mi)}pb(){const t=this.cb.stateSettings.currentState||this.cb.stateSettings.predictedState;0!==this.rb.length?this.ab&&!this.ob||this.rb.every((t=>!0===t.isAdCalled))&&this.Qs.adSelector.isBestBidLoaded(t)&&this.vb():this.vb()}lb(){this.rb=[],this.ob=!1,this.bb()}ub(){this.Ib(),this.wb(),this.Pb()}Pb(){this.Qs.adSelector.getLineItemsByRequest(!0).forEach((t=>{this._b(t)}))}wb(){const t=this.cb.stateSettings.currentState||this.cb.stateSettings.predictedState;if(!t)return void(0,wt.nF)({message:"ShortCircuitMechanism_registerClientSideLineItem_no_state",level:wt.D_.INFO,sessionId:this.Qs.sessionId},{throttle:10,shouldSendMaxLog:!1});const e=this.Qs.adSelector.getAllCallableLineItems(t).filter((t=>!t.hasAggregator)),i=e.filter((t=>t.protoLineItem.forceCallingInEveryAO)),s=this.Tb(e,t);if(!s)return void this.Ab(i);const n=this.Qs.adSelector.getBestLoadedBid();(n?mi.getSelectionScore(n):0)>mi.getSelectionScore(s)?this.Ab(i):(this._b(s),i.filter((t=>t!==s)).forEach((t=>{this._b(t)})))}Ib(){const t=this.cb.stateSettings.currentState||this.cb.stateSettings.predictedState;if(!t)return void(0,wt.nF)({message:"ShortCircuitMechanism_registerAggregatedLineItems_no_state",level:wt.D_.INFO,sessionId:this.Qs.sessionId},{throttle:1,shouldSendMaxLog:!1});this.Qs.adSelector.getAllCallableLineItems(t).filter((t=>t.hasAggregator)).forEach((t=>{this._b(t)}))}Tb(t,e){const i=this.Qs.adSelector.getBestCallableLineItem(t,e);if(i&&(0,pt.BZ)(i.lineItemList))return i.lineItemList[0]}_b(t,e=!1){return!this.rb.some((e=>e.lineItemId===t.protoLineItem.advertiserLineItemId))&&(this.rb.push({isAdCalled:e,lineItemId:t.protoLineItem.advertiserLineItemId}),!0)}Ab(t){t.forEach((t=>{this._b(t)}))}}var Fs;!function(t){t.ShortCircuitEnd="short",t.TimeoutEnd="timeout",t.Prefetch="prefetched"}(Fs||(Fs={}));class $s{constructor(t,e){this.di=t,this.Qs=e,this.kb=!1,this.Eb=null,this.xb=new n.x,this.nb=new n.x,this.Cb=[],this.Ob=null,this.Mb={inPrefetchMode:!1,startTime:0,prefetchEnded:!1},this.Lb={id:"",auctionEnded:!1},this.Bb=new Ns({adSelector:e.adSelector,sessionId:e.sessionId,adBidPool:e.adBidPool}),this.Rb()}get onAuctionStopCalling(){return this.nb.asObservable()}get onAuctionEnd(){return this.xb.asObservable()}updateState(t){this.Bb.updateState(t)}cancelAuction(){this.kb||(this.Mb.inPrefetchMode=!1,this.Bb.cancelAuction(),this.Db())}startPrefetch(t){this.kb=!1,this.Db(),this.Mb={inPrefetchMode:!0,startTime:Date.now(),prefetchEnded:!1},this.Bb.startNewAuction({callingState:t,waitForNewReadyBid:!0})}startAuction(t,e,i=3e3){if(this.kb=!1,this.Lb.id===e)return void(this.Lb.auctionEnded&&(0,H.$K)(this.Lb.auctionEndedType)&&this.vb(this.Lb.auctionEndedType));this.Eb=Date.now(),this.Lb={auctionEnded:!1,id:e},this.Db();let s=i;this.Mb.inPrefetchMode?(s-=Date.now()-this.Mb.startTime,s<0||this.Mb.prefetchEnded?this.vb(Fs.Prefetch):this.Fb(s)):(this.Bb.startNewAuction({callingState:t,waitForNewReadyBid:!1}),this.Fb(s)),this.Mb.inPrefetchMode=!1}startCustomAuction(t,e){this.kb=!0,this.Bb.startNewAuction({callingState:t,waitForNewReadyBid:!1,auctionId:e}),this.Fb(3e3,e)}onNothingToWin(){this.Bb.onNothingToWin()}onNothingToCall(){this.Bb.onNothingToCall()}destroy(){(0,l.i)(this.Cb)}Rb(){this.Cb.push(this.Bb.onAuctionMechanismEnded.subscribe((t=>{this.Vb(t)})))}Vb(t){this.Mb.prefetchEnded=!0,this.nb.next(),this.Mb.inPrefetchMode||this.vb(Fs.ShortCircuitEnd,t)}Fb(t,e){this.Ob=this.di.setTimeout((()=>{this.vb(Fs.TimeoutEnd,e)}),t)}vb(t,e){this.kb=!1,null!==this.Eb&&(0,H.$K)(t)&&(this.jb(t,Date.now()-this.Eb),this.Eb=null),this.Lb.auctionEnded=!0,this.Lb.auctionEndedType=t,this.cancelAuction();const i={type:t,auctionId:e};this.xb.next(i)}Db(){this.di.clearTimeout(this.Ob),this.Ob=null}jb(t,e){(0,Kt.Vm)([99,1])&&(0,wt.nF)({message:"AuctionManager_end_auction",exception:t,callStack:this.Ub(e),level:wt.D_.INFO,sessionId:this.Qs.sessionId},{shouldSendMaxLog:!1,throttle:1e4})}Ub(t,e=0){const i=[0,.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,4,5][e];return void 0===i?"over_5s":t<=1e3*i?`${i}`:this.Ub(t,e+1)}}const Vs=30*Ee.s_;class js{constructor(){this.qb=null}onAdRemoved(){this.qb=null,this.Hb()}pauseViaUserInteraction(){this.qb&&(this.qb.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.qb&&(this.qb.pausedWithUserInteraction=!1,this.Hb())}Jb(t){this.qb={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:Vs,lastAdPausedStartedTimestamp:void 0},this.Hb()}checkPauseAd(t,e){t&&(null===this.qb&&this.Jb(t),e?this.Gb(t):this.zb(t))}zb(t){this.Yb(t)&&(this.qb.isPaused=!0,this.qb.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.Hb(),this.Xb=setTimeout((()=>{t.stopAd("pauseOutOfView"),this.qb=null,this.Hb()}),this.qb.remainingTimeForAdToBePaused))}Gb(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.qb.isPaused&&!this.qb.pausedWithUserInteraction&&(this.Hb(),this.qb.isPaused=!1,this.qb.remainingTimeForAdToBePaused=this.qb.remainingTimeForAdToBePaused-(Date.now()-this.qb.lastAdPausedStartedTimestamp),t.resumeAd())}Hb(){clearTimeout(this.Xb),this.Xb=void 0}Yb(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.qb.isPaused&&!this.qb.pausedWithUserInteraction}}const Us=["11d44b9b-1330-432c-bcd7-4a095b47cdbd"];class qs{constructor(t,e){this.Qb=t,this.Kb=e,this.Zb=3e3,this.en=null,this.tI=!1,Us.includes(this.Qb.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)||this.eI()}eI(){this.iI=this.Qb.onVpaidEvent.subscribe((t=>{var e,i,s,n,r,a,h,c,d;switch(t.type){case o.fI.AdImpression:this.sI();break;case o.fI.AdVideoFirstQuartile:this.nI();break;case o.fI.AdVideoMidpoint:null===(e=this.oI)||void 0===e||e.reset();break;case o.fI.AdVideoThirdQuartile:null===(i=this.oI)||void 0===i||i.reset();break;case o.fI.AdVideoComplete:null===(s=this.oI)||void 0===s||s.stop();break;case o.fI.AdStopped:null===(n=this.oI)||void 0===n||n.stop();break;case o.fI.AdError:null===(r=this.oI)||void 0===r||r.stop();break;case o.fI.AdPaused:null===(a=this.oI)||void 0===a||a.stop();break;case o.fI.AdSkipped:null===(h=this.oI)||void 0===h||h.stop();break;case o.fI.AdPlaying:null===(c=this.oI)||void 0===c||c.start();break;case o.fI.AdUserClose:null===(d=this.oI)||void 0===d||d.stop();break;case o.fI.AdExpandedChange:case o.fI.AdClickThru:case o.fI.AdInteraction:case o.fI.AdUserAcceptInvitation:case o.fI.AdLinearChange:case o.fI.AdUserMinimize:this.destroy()}}))}sI(){const t=d.h.getGlobalContainer().resolve(it.f);let e=this.Qb.getAdDuration();(0,H.r)(e)?(e*=1e3,this.tI=!0):e=1e3*this.Kb,this.en=e;const i=this.aI();this.oI=new ws.B(t,i),this.oI.onTimeElapsed.subscribe((()=>{this.iI.unsubscribe(),this.iI=null,this.Qb.stopAd("adNotLoading")})),this.oI.start()}nI(){if(this.tI)this.oI.reset();else{this.en=4*this.oI.timeElapsed;const t=this.aI();this.oI.reset(t)}}aI(){return this.en/4+this.Zb}destroy(){var t;this.iI&&(this.iI.unsubscribe(),this.iI=null),null===(t=this.oI)||void 0===t||t.stop()}}class Hs{constructor(t,e,i,s,r){this.Qb=t,this.Sd=e,this.jc=i,this.hI=s,this.Qs=r,this.Hc=!1,this.mv=!1,this.cI=[],this.dI=new js,this.Pe=new n.x,this.eI(),this.uI=new qs(this.Qb,this.Qs.maxAdDuration),this.resizeAd()}get onVpaidEvent(){return this.Pe.asObservable()}get inImpression(){return this.Hc}setVastViewMode(t){this.Qs.adViewMode=t;const{width:e,height:i}=this.Sd.getContainerStateMap().get(this.Qb.settings.adManagerLineItem.protoLineItem.adType);this.Qb.resizeAd(e,i,this.Qs.adViewMode)}getAdVolume(){return this.Qb.getAdVolume()}setAdVolume(t,e){if(e){const{adMacroReplacer:i,adManagerState:s}=e;this.pI(t,s,i)}this.Qb.setAdVolume(t)}resizeAd(){const{width:t,height:e,viewability:i}=this.Sd.getContainerStateMap().get(this.Qb.settings.adManagerLineItem.protoLineItem.adType);this.dI.checkPauseAd(this.Qb,i),this.Qb.resizeAd(t,e,this.Qs.adViewMode)}skipAd(){this.Qb.setAdVolume(0),this.Qb.skipAd()}stopAd(t){this.Qb.stopAd(t)}pauseAd(t){this.Qb.pauseAd(),t&&this.dI.pauseViaUserInteraction()}resumeAd(t){this.Qb.resumeAd(),t&&this.dI.resumeViaUserInteraction()}getMediaSize(){const t=this.Qb.getAdMediaSize().width,e=this.Qb.getAdMediaSize().height,{widthRatio:i,heightRatio:s}=(0,at.dO)(t,e);return{width:t,height:e,widthRatio:i,heightRatio:s,adType:this.Qb.settings.adManagerLineItem.protoLineItem.adType}}getMetadata(){return{advertiserLineItemId:this.Qb.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.Qb.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.Qb.settings.adManagerLineItem.protoLineItem.adType,duration:this.Qb.getAdDuration(),adSkipMode:this.Qb.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.Qb.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,adSourceType:this.Qb.adSourceType}}destroy(){this.Hc=!1,this.dI.onAdRemoved(),this.iI.unsubscribe(),this.iI=null,this.uI.destroy()}eI(){this.iI=this.Qb.onVpaidEvent.subscribe((t=>{switch(t.type){case o.fI.AdImpression:this.mI();break;case o.fI.AdVideoFirstQuartile:this.gI(r.ProtoQuartilesEnum.First);break;case o.fI.AdVideoMidpoint:this.gI(r.ProtoQuartilesEnum.Second);break;case o.fI.AdVideoThirdQuartile:this.gI(r.ProtoQuartilesEnum.Third);break;case o.fI.AdVideoComplete:this.gI(r.ProtoQuartilesEnum.Fourth)}this.Pe.next(t)}))}mI(){this.mv=this.Mv(this.Qb.skipOffset,this.Qb.getAdDuration()),this.Hc=!0;const{viewability:t}=this.Sd.getContainerStateMap().get(this.Qb.settings.adManagerLineItem.protoLineItem.adType);this.dI.checkPauseAd(this.Qb,t)}gI(t){const e=this.cI.indexOf(t)>=0&&!(this.Qs.pauseAdWhenFinished||this.Qs.loopAdWhenFinished),i=this.hI.adBreakState,{adManagerLineItem:s}=this.Qb.settings;if(e)return void(1===(0,Kt.Vm)([99,1])&&(0,wt.nF)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:wt.D_.WARN,exception:s.protoLineItem.advertiserLineItemId,callStack:this.Qb.adMediaType,sessionId:this.Qs.sessionId}));this.cI.push(t);const{requestMetadata:n}=this.Qb.settings,{advertiserLineItemId:r,publisherLineItemId:o}=s.protoLineItem,{rtbSeatId:a,rtbAdomain:h,dspId:c}=n.data;this.jc.adQuartile.next({advertiserLineItemId:r,publisherLineItemId:o,rtbSeatId:a,dspId:c,rtbADomain:h,type:mt.EN.fromProtoGetQuartile(t),adBreakType:mt.EN.fromProtoAdBreakType(i.adBreakType),hasSkipAd:this.mv})}Mv(t,e){if((0,H.hj)(t)&&t>=0)return!0;return(0,nt.Xj)(e,this.Qs.skipAdSettings)}pI(t,e,i){const s=this.Qb.getAdVolume();let n=null;0===s&&t>0?n=this.Qb.settings.vastTracker.adUnmute:s>0&&0===t&&(n=this.Qb.settings.vastTracker.adMute);const{plcmt:r}=this.Qs,o=this.Qb.settings.adManagerLineItem.protoLineItem;n&&_e.Mz.track(n,i,o,e,r)}}class Js{constructor(t,e){this.Vy=t,this.vI=e}refreshImaSlots(t){if(this.vI.getNumberOfUsedImaSlots()<=5)return;const e=this.Vy.getAllLoadedBids().filter((t=>"ima"===t.adMediaType&&!t.settings.adManagerLineItem.protoLineItem.isAdxLookup));if(e.length<=5)return;e.sort(((e,i)=>(this.Vy.isBidTargetingAllowed(i,t)?1:0)-(this.Vy.isBidTargetingAllowed(e,t)?1:0)||i.yoScore-e.yoScore)).slice(5).forEach((t=>{t.invalidate()}))}}var Gs,zs,Ws;!function(t){t[t.TimeoutWithReadyBid=0]="TimeoutWithReadyBid",t[t.TimeoutWithoutReadyBid=1]="TimeoutWithoutReadyBid",t[t.Shorted=2]="Shorted",t[t.Prefetched=3]="Prefetched"}(Gs||(Gs={})),function(t){t[t.IsIma=-1]="IsIma",t[t.IsBidCall=-2]="IsBidCall"}(zs||(zs={})),function(t){t.BID="bid",t.BID_IN_FETCH="bid_in_fetch"}(Ws||(Ws={}));var Ys=i(6033);class Xs{constructor(t,e,i,s,n){this.Vy=t,this.dv=e,this.adManagerState=i,this.De=n,this.yI=[],this.bI=[],this.deltaTimestampAdStartAdOpportunity=Date.now()-s,this.yI=this.Vy.getEligibleBidsInAuctionSortedDescBySelectionScore(this.adManagerState).filter((t=>t!==this.dv)),this.bI=this.Vy.getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(this.adManagerState),this.winnerDemandType=this.II(),this.firstLoser=this.wI(),this.allLoserStatusInfo=this._I(),this.firstOpenMarketLoser=this.TI(),this.auctionEndType=this.adManagerState.auctionEndType}II(){return this.dv?Ys.r.getBidDemandType(this.dv):(this.AI("ImpressionAuctionSnapshot: No winner bid found"),r.ProtoDemandTypeEnum.None)}_I(){const t=this.bI.length;let e=0,i=0,s=0;return this.yI.forEach((t=>{switch(t.status){case o.wy.IDLE:e++;break;case o.wy.LOADING:i++;break;case o.wy.LOADED:s++}})),{verifyingBidsInAuction:t,idleBidsInAuction:e,loadingBidsInAuction:i,loadedBidsInAuction:s}}wI(){const t=this.yI[0],e=this.bI[0];if(!(0,H.$K)(t)&&!(0,H.$K)(e))return;let i=0;(0,H.$K)(t)&&(i=mi.getSelectionScore(t));let s,n,r,o,a,h,c,d,l,u=0;return(0,H.$K)(e)&&(u=mi.getSelectionScore(e)),i>u?(s=Ys.r.getBidDemandType(t),n=t.price,r=Ws.BID,o=t.settings.requestMetadata.data.encryptedPrice,a=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,h=t.settings.adManagerLineItem.protoLineItem,c=t.settings.isIma,d=t.status,l=t.settings.isIma?zs.IsIma:t.getAdDuration()):(s=(0,Pe.Bl)(e.adManagerLineItem),n=e.bidPrice,r=Ws.BID_IN_FETCH,o=e.encryptedPrice,a=e.adManagerLineItem.protoLineItem.advertiserLineItemId,h=e.adManagerLineItem.protoLineItem,c=e.isIma,d=Ai.VERIFYING,l=zs.IsBidCall),{loserType:r,demandType:s,encryptedPrice:o,customClientPrice:n,advertiserLineItemId:a,lineItem:h,isIma:c,status:d,adDuration:l}}TI(){const t=this.kI();if((0,H.$K)(t))return{demandType:r.ProtoDemandTypeEnum.OpenMarket,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,customClientPrice:t.settings.cpm,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}}kI(){return this.yI.find((t=>Ys.r.getBidDemandType(t)===r.ProtoDemandTypeEnum.OpenMarket))}AI(t){(0,wt.nF)({level:wt.D_.WARN,message:t,sessionId:this.De},{throttle:1,shouldSendMaxLog:!1})}}class Qs{constructor(t,e){this.Vy=t,this.De=e,this.EI=null}get lastSnapshot(){return this.EI}takeSnapshot(t,e,i){return this.EI=new Xs(this.Vy,t,e,i,this.De),this.EI}}class Ks{constructor(){this.xI=new Map}calculateLineItemYoScore(t){return this.CI(t)}calculateBidYoScore(t){return this.CI(t)}CI(t){const e=this.xI.get(t);if((0,H.$K)(e))return e;const i=Math.random();return this.xI.set(t,i),i}}class Zs{calculateLineItemYoScore(t,e,i){return i?Math.random():this.OI(e)}calculateBidYoScore(t,e){return this.OI(e)}OI(t){const{cpm:e,priority:i,grossNetPercentageDifference:s}=t;return e-s/100*e+200*i}}class tn{constructor(t){this.ce=t?new Ks:new Zs}calculateLineItemYoScore(t,e,i){return this.ce.calculateLineItemYoScore(t,e,i)}calculateBidYoScore(t,e){return this.ce.calculateBidYoScore(t,e)}}var en=i(7107);class sn{constructor(t,e,i){this.Qs=t,this.MI=e,this.jc=i,this.LI=!1,this.Pe=new n.x,this.BI=new n.x,this.RI=new n.x,this.Mi=[],this.DI=t=>{Mi.getInstance().add(t,this.Mf,this.jy)},this.NI=t=>{this.BI.next(t)},this.FI=(t,e)=>{const i=this.Mf.lineItems.find((e=>e.protoLineItem.advertiserLineItemId===t));i&&(i.protoLineItem.viewability=e)},this.zg=()=>{var t;null===(t=this.VI)||void 0===t||t.resizeAd(),this.UI()},this.ga=d.h.getSessionChildContainer(this.Qs.app.config.sessionId).resolve(Ve.G);const s=this.Qs.adContainerMap.get(this.$I());this.qI=(0,q.LT)(s),this.jc.startBidTracking.next(),this.HI(),this.JI(),this.GI(),this.zI(),this.WI()}get onVpaidEvent(){return this.Pe.asObservable()}get onImpressionRevenueEvent(){return this.BI.asObservable()}get onNoFill(){return this.RI.asObservable()}setAdVolume(t){var e;this.hI.partialStateUpdate({sound:t});const i={adManagerState:this.hI.getCurrentAdManagerState(!0),adMacroReplacer:this.YI};null===(e=this.VI)||void 0===e||e.setAdVolume(t,i)}setAdViewMode(t){var e;this.hI.partialStateUpdate({vastViewMode:t}),null===(e=this.VI)||void 0===e||e.setVastViewMode(t)}getCurrentAdMetadata(){var t;return null===(t=this.VI)||void 0===t?void 0:t.getMetadata()}getCurrentAdMediaSize(){var t;return null===(t=this.VI)||void 0===t?void 0:t.getMediaSize()}pauseAd(t){var e;null===(e=this.VI)||void 0===e||e.pauseAd(t)}resumeAd(t){var e;null===(e=this.VI)||void 0===e||e.resumeAd(t)}skipAd(){var t;null===(t=this.VI)||void 0===t||t.skipAd()}stopAd(t){var e;null===(e=this.VI)||void 0===e||e.stopAd(t)}setPlayerOrientation(t){this.hI.partialStateUpdate({playerOrientation:t}),this.UI()}setQueryJsTargeting(t){this.hI.partialStateUpdate({queryJsTargeting:t}),this.UI()}enableImpressions(t){this.hI.enableImpression(t),this.Sd.forceTriggerUpdateState(),this.XI.allowResetOnTime=!0,this.KI(t),this.ZI()}disableImpressions(t=!1){(this.hI.impressionsAllowed||t)&&(this.tw.stop(),this.ew.stop(),this.hI.disableImpression(),this.VI&&!this.VI.inImpression&&this.Qs.app.config.isInApp&&this.VI.stopAd("inApp_disable"))}enablePredict(t,e){if(this.Qs.disablePrefetch)return;if(e===Is.StartSessionPrefetch&&this.Qs.playerData.playbackMode===r.ProtoPlayerPlaybackModeEnum.ScrollToPlay)try{this.iw()}catch(t){return void(0,wt.nF)({message:"Prefetch_logOutOfViewDistance_error",level:wt.D_.INFO,exception:(0,Kt.W$)(t).message,sessionId:this.Qs.app.config.sessionId},{pacing:1,throttle:1})}switch(this.hI.enablePredict(t,e),e){case Is.StartSessionPrefetch:this.XI.allowResetOnTime=!1;break;case Is.MidSessionPrefetch:this.XI.allowResetOnTime=!0}this.ZI();const i=this.hI.getCallSettings();this.rw.startPrefetch(i)}iw(){const t=this.Sd.getMainContainer(),{topFrame:{innerHeight:e}}=(0,Kt.pE)(window);if(!t)return void(0,wt.nF)({message:"Prefetch_no_container",level:wt.D_.INFO,sessionId:this.Qs.app.config.sessionId},{pacing:1,throttle:1});const i=t.getBoundingClientRect(),s=i.top>e,n=i.bottom<0;if(s&&n)return void(0,wt.nF)({message:"Prefetch_impossible_coordinates",level:wt.D_.INFO,sessionId:this.Qs.app.config.sessionId},{pacing:1,throttle:1});let r=0;s&&(r=i.top-e),n&&(r=i.bottom);const o=Math.round(r/e*10)/10;if(0!==o){d.h.getSessionChildContainer(this.Qs.app.config.sessionId).resolve(en.B).prefetchDistance=o,(0,wt.nF)({message:`Prefetch_distance_${o}`,level:wt.D_.INFO,sessionId:this.Qs.app.config.sessionId},{pacing:5,throttle:1})}}isLoadingAds(){return!!this.VI||this.Vy.hasLoadingBids()}getMainContainerState(){return this.Sd.getMainContainerState()}getMainContainer(){return this.Sd.getMainContainer()}setCustomMacros(t){this.ew.setMacros(t)}destroy(){var t;this.disableImpressions(),(0,l.i)(this.Mi),this.ew.destroy(),this.ow.destroy(),this.tw.destroy(),this.aw.destroy(),this.hw.destroy(),this.cw(),null===(t=this.VI)||void 0===t||t.stopAd("adManagerDestroy"),this.dw()}HI(){const t=d.h.getGlobalContainer().resolve(it.f);this.aw=new Ri.IS(t),this.lw=new us,this.XI=new fs,this.uw=new ms,this.Mu=(new hs).registerCallingValidators([this.XI,this.lw,this.uw]),this.Cu=new Ce,this.YI=new Ri.Yh(this.Qs.app.services.MacrosService,this.Qs.app.services.UserManagerService,this.Qs.app.config,this.Qs.appSettings)}JI(){this.Mf=new ki,this.Lf=new Li,this.bf=new Si,this.jy=new Ti,this.Vy=new Ni(this.Mf,this.Lf,this.bf,this.jy,{callingValidationAggregator:this.Mu,impressionCapService:this.lw,standaloneService:this.Qs.standaloneService,userManagerService:this.Qs.app.services.UserManagerService},{maxNumberOfWins:St.O.MAX_WINS_DEFAULT,revSharePercentage:this.Qs.generalRepository.revSharePercentage}),this.ce=new tn(this.Qs.app.config.explorationMode);const t=d.h.getSessionChildContainer(this.Qs.app.config.sessionId).resolve(ns),e=this.Qs.lineItemList.map((e=>new $t.oW(e,this.ce,t)));this.Mf.add(e),this.Sd=new gs(this.$I(),this.Qs.adContainerMap,this.Qs.app.services.ResizeObserver,this.Qs.app.services.ViewabilityService),this.vI=new Ms({globalDomUtilsService:this.Qs.app.services.GlobalDomUtilsService,recycleAdSlots:!0,sessionId:this.Qs.app.config.sessionId}),this.hI=new xs(this.Sd,this.Qs.generalRepository);const i=d.h.getGlobalContainer().resolve(it.f);this.rw=new $s(i,{sessionId:this.Qs.app.config.sessionId,adSelector:this.Vy,adBidPool:this.jy});const s=d.h.getSessionChildContainer(this.Qs.app.config.sessionId).resolve(a.k),n=d.h.getSessionChildContainer(this.Qs.app.config.sessionId).resolve(Ri.E4),r=new Ds(this.Vy,s,this.Qs.app.config.sessionId);this.hw=new Bs(this.Vy,this.jy),this.ew=new as({yoScoreCalculator:this.ce,playerData:this.Qs.playerData,generalRepository:this.Qs.generalRepository,auctionInfoLogging:r,adSelector:this.Vy,adContainerMap:this.Qs.adContainerMap,amazonSlotId:this.Qs.amazonTamSlotId,app:this.Qs.app,appSettings:this.Qs.appSettings,schainSettings:this.Qs.pbjsSchainSettings,skipAdSettings:this.Qs.skipPlayerSettings,sessionId:this.Qs.app.config.sessionId,adMacroReplacer:this.YI,lineItemServices:{lineItemServicesTimer:this.aw,requestCapsService:this.XI},adRequestGatekeeper:this.Cu,standaloneService:this.Qs.standaloneService,adEnforcer:new vs.Jd(this.Qs.app.config.isMobile,this.qI,this.Qs.disableScrollHijackEnforcement,this.Qs.app.config.sessionId),pauseAdWhenFinished:this.Qs.pauseAdWhenFinished,loopAdWhenFinished:this.Qs.loopAdWhenFinished,os:this.Qs.app.config.os.os,adSlotContainerRecycler:this.vI,callingValidationAggregator:this.Mu,auctionManager:this.rw,lineItemAbTestInformation:this.Qs.lineItemAbTestInformation,adxLastLookService:this.hw,assertiveYieldService:n},s),this.ow=new Rs({desiredBitRateForWins:St.O.DEFAULT_DESIRED_BITRATE,playerId:this.Qs.app.config.playerId,sessionId:this.Qs.app.config.sessionId,adSelector:this.Vy,auctionManager:this.rw,auctionInfoLogging:r,impressionCapsTimer:this.aw,adMacroReplacer:this.YI,plcmt:this.Qs.playerData.plcmt,assertiveYieldService:n,userManagerService:this.Qs.app.services.UserManagerService},s),this.tw=new bs({adContainer:this.Sd,adSelector:this.Vy,auctionInfoLogging:r,internalAuctionSnapshot:new Qs(this.Vy,this.Qs.app.config.sessionId),impressionCapsService:this.lw,impressionCapsTimer:this.aw,requestCapsService:this.XI,removeBidIfHigherYoScore:St.O.REMOVE_BIDS_DEFAULT,adRequestGatekeeper:this.Cu,pauseAdWhenFinished:this.Qs.pauseAdWhenFinished,loopAdWhenFinished:this.Qs.loopAdWhenFinished,adMacroReplacer:this.YI,explorationMode:this.Qs.app.config.explorationMode,playerId:this.Qs.app.config.playerId,skipAdSettings:this.Qs.skipPlayerSettings,fullSessionLog:this.Qs.generalRepository.canTrackAllRequests,deviceType:this.Qs.app.config.deviceType,sessionId:this.Qs.app.config.sessionId,adxLastLookService:this.hw,plcmt:this.Qs.playerData.plcmt,userManagerService:this.Qs.app.services.UserManagerService,assertiveYieldService:n},s),this.pw=new Js(this.Vy,this.vI)}GI(){this.Mi.push(this.Vy.getBidEvents(vi.ON_BID_LOADED).subscribe((()=>{const t=this.hI.getCurrentAdManagerState()||this.hI.getPredictedAdManagerState();this.pw.refreshImaSlots(t)})))}zI(){this.Mi.push(this.MI.onLineItemPlatformCapped.subscribe((t=>{this.DI(t)})),this.MI.onImpressionRevenue.subscribe((t=>{this.NI(t)})),this.MI.onLineItemViewabilityChange.subscribe((([t,e])=>{this.FI(t,e)})))}fw(t){this.Lf.remove(t)}WI(){this.Mi.push(this.ew.onLineItemsRequestStart.subscribe((t=>{this.Lf.add(t)})),this.ew.onLineItemsRequestEnd.subscribe((t=>{this.fw(t)})),this.jc.onBidFetchStart.subscribe((t=>{this.bf.add(t)})),this.jc.onBidFetchEnd.subscribe((t=>{this.bf.remove(t)})),this.ew.onBid.subscribe((t=>{this.jy.addBid(t)})),this.rw.onAuctionEnd.subscribe((t=>{this.xb(t.type,t.auctionId)})),this.rw.onAuctionStopCalling.subscribe((()=>{this.mw()})),this.Sd.onContainerStateUpdate.subscribe((()=>{this.zg()})),this.tw.onAdSelected.subscribe((t=>{this.gv(t)})),this.tw.onAdFinished.subscribe((t=>{this.vv()})))}xb(t,e){this.hI.auctionEnd(this.yw(t)),this.hI.impressionsAllowed&&this.bw()}yw(t){switch(t){case Fs.Prefetch:return Gs.Prefetched;case Fs.ShortCircuitEnd:return Gs.Shorted;case Fs.TimeoutEnd:return this.Vy.hasLoadedBids()?Gs.TimeoutWithReadyBid:Gs.TimeoutWithoutReadyBid;default:return}}hasAdsEligibleForFill(t){const e=this.hI.getAdManagerState(t,this.Sd.getContainerStateMap());return this.Vy.hasAdsEligibleForFill(e)}hasUnstartedBids(){return this.Vy.hasUnstartedBids()}mw(){this.hI.predictMode&&this.ew.stop(),this.hI.auctionStopCalling()}gv(t){const{currentAdPlayerState:e,predictedAdPlayerState:i}=this.hI,s=(e||i).vastViewMode,n=this.hI.getCurrentAdManagerState()||this.hI.getPredictedAdManagerState(),r=n.adBreakState.maxAdDuration;this.VI=new Hs(t,this.Sd,this.jc,n,{adViewMode:s,maxAdDuration:r,skipAdSettings:this.Qs.skipPlayerSettings,loopAdWhenFinished:this.Qs.loopAdWhenFinished,pauseAdWhenFinished:this.Qs.pauseAdWhenFinished,sessionId:this.Qs.app.config.sessionId,plcmt:this.Qs.playerData.plcmt}),this.Iw();const o=e||i;this.VI.setAdVolume(o.sound);const a=t.settings.adLoadedPayload.payload.vastVerifications;(0,pt.BZ)(a)&&this.ga.isOmsdkFullSupport&&this.ga.addVerificationNode(a,t.settings.adLoadedPayload.payload.containers),this.ww(t)}ww(t){var e;this.Pe.next({type:o.fI.AdLoaded,payload:null===(e=t.settings.adLoadedPayload)||void 0===e?void 0:e.payload})}vv(){this.ga.clearPendingProcesses(),this.dw()}UI(){this.hI.adFetchingAllowed&&this.ZI(),this.hI.impressionsAllowed&&this.bw()}ZI(){this.LI||(this.LI=!0,this.Qs.app.services.UserManagerService.ccpaInfoLogging(this.Qs.app.config.playerId));const t=this.hI.getCallSettings();this.ew.call(t);const e=this.hI.getWinSettings();this.ow.win(e)}bw(){(this.hI.currentAdPlayerState||this.hI.predictedAdPlayerState)&&this.hI.currentAdPlayerState&&this.tw.start(this.hI.getCurrentAdManagerState())}Iw(){this.Pw=this.VI.onVpaidEvent.subscribe((t=>{var e;if(t.type===o.fI.AdImpression)try{const t=(null===(e=this.hI.getCurrentAdManagerState())||void 0===e?void 0:e.soundVolume)||0;this.VI.setAdVolume(t)}catch(t){(0,wt.nF)({level:wt.D_.WARN,message:"AdManager_current_sound",exception:t.message,callStack:t.stack,sessionId:this.Qs.app.config.sessionId})}this.Pe.next(t)}))}dw(){var t;null===(t=this.VI)||void 0===t||t.destroy(),this.VI=null,this.cw()}cw(){var t;null===(t=this.Pw)||void 0===t||t.unsubscribe(),this.Pw=null}KI(t){const e=[this.lw,this.XI];t.newContent&&e.forEach((t=>{t.resetCapsBasedOnExternalEvent(r.ProtoResetCapTypeEnum.ContentCapping)}))}}var nn,rn=i(6115);class on extends sn{constructor(t,e,i){super(t,e,i),this._w="",this.Tw=()=>{},this.Sw=()=>{},this.Aw=[],this.Ew="",this.xb=(t,e)=>{this.xw()||this.RI.next(),e!==this._w?super.xb(t):this.Tw({success:!0})};const s=this.Sd.getMainContainer();this.vI.preloadImaSdkSlots(s),t.lineItemList.some((t=>t.isAdxLookup))&&this.vI.preloadImaSdkAdxLookupSlot(s),this.Mi.push(this.jc.adBid.subscribe((t=>{this.Cw(t)})),this.jc.adPrebid.subscribe((t=>{this.Ow(t)})),this.Vy.getBidEvents(vi.ON_BID_LOADED_CONSUMED).subscribe((()=>{this.xw()||this.RI.next()})))}enableImpressions(t){super.enableImpressions(t);const e=this.hI.getCallSettings();this.rw.startAuction(e,t.linearAdOpportunity.id)}disableImpressions(t=!1){(this.hI.impressionsAllowed||t)&&(this.rw.cancelAuction(),super.disableImpressions(t))}setLineItemMetadata(t,e,i){const s=this.Mf.getByPublisherLineItemId(t.id),n=this.Mw(s,t,e);(0,H.mf)(i)&&(t.shouldCallAdWithUprKey?this.Lw(s,e,i):i(n))}startConnatixAuction(t,e){this.Tw=e,this.hI.enablePredict(t,Is.MidSessionPrefetch);const i=this.hI.getCallSettings();this._w=(0,Kt.qs)(),this.rw.startCustomAuction(i,this._w),this.ZI()}ZI(){const t=this.hI.getCallSettings();this.rw.updateState(t),super.ZI()}$I(){return r.ProtoAdType.Video}Lw(t,e,i){this.Sw=i;const s=this.hI.getAdManagerState(e,this.Sd.getContainerStateMap());s?this.hw.forceCallAdxLookup(t,s):this.Sw({success:!1,errorReason:rn.q.LineItemCantBeCalled})}Cw(t){t.advertiserLineItemId===this.Ew&&this.Aw.push(this.jy.getEvents(vi.ON_BID_LOADED).subscribe((t=>{t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId===this.Ew&&(this.Sw({success:!0}),(0,l.i)(this.Aw))})))}Ow(t){t.advertiserLineItemId===this.Ew&&this.Sw({success:!0})}Mw(t,e,i){try{if(!(0,H.$K)(t))return{success:!1,errorReason:rn.q.NoLineItem};if(t.protoLineItem.isAdxPenskeLookup=!1,!t.protoLineItem.isExternal)return{success:!1,errorReason:rn.q.NoSupportForCreativeType};if(!this.Bw(e,t))return{success:!1,errorReason:rn.q.MetadataInvalid};if(this.jy.getBidsByStatus([o.wy.STARTING,o.wy.IMPRESSION]).find((e=>e.settings.adManagerLineItem===t)))return{success:!1,errorReason:rn.q.AdAlreadyStarted};if(t.updateMetadata(e),this.Rw(e.id),this.Dw(t),this.Nw(t),e.shouldCallAdWithUprKey){t.protoLineItem.isAdxPenskeLookup=!0;const s=this.hI.getAdManagerState(i,this.Sd.getContainerStateMap()),n=s?this.Vy.getBestAllowedBidPricePubNET(s):0;t.protoLineItem.adTag=n?this.Vw(t.protoLineItem.adTag,n):this.jw(t.protoLineItem.adTag),this.Ew=e.id}return{success:!0}}catch(t){return{success:!1,errorReason:rn.q.Unknown}}}jw(t){const e=new URL(t),i=e.searchParams;let s=i.get("cust_params");if(s){let t=s.split("&");t=t.filter((t=>!t.startsWith(`${Ii.ut}=`))),s=t.join("&"),i.set("cust_params",s)}return e.href}Vw(t,e){const i=(0,It.Ph)("cust_params",t),s=new URL(t);let n=i;return n=(0,Pe.eu)(i,e),s.searchParams.set("cust_params",n),s.href}Nw(t){this.bf.bidInFetchList.filter((e=>e.adManagerLineItem===t)).forEach((t=>{t.shouldBeDiscarded=!0}))}Bw(t,e){const{adTag:i,resetCapType:s,requestCap:n,impressionCap:o,resetRequestsCapTime:a,resetImpressionsCapTime:h}=(0,Pe.pi)(t,e.protoLineItem);return!(!(0,H.QM)(i)||!(0,H.$K)(s))&&(!(s===r.ProtoResetCapTypeEnum.OpportunityCapping&&!(0,H.Xc)(n))&&(!(s!==r.ProtoResetCapTypeEnum.OpportunityCapping&&!(0,H.r)(n)&&!(0,H.r)(o))&&!!this.Uw(s,n,o,a,h)))}Uw(t,e,i,s,n){return t!==r.ProtoResetCapTypeEnum.TimeCapping||!((0,H.r)(e)&&!(0,H.Xc)(s))&&!((0,H.r)(i)&&!(0,H.Xc)(n))}Dw(t){[this.lw,this.XI].forEach((e=>{e.resetCapsOnLineItemMetadataUpdate(t)}))}Rw(t){this.jy.getBidsByLineItemId(t).forEach((t=>{t.invalidate()}))}xw(){const t=this.hI.getCurrentAdManagerState()||this.hI.getPredictedAdManagerState(),e=this.Vy.getBestBidAllowed(t);return(0,H.$K)(e)}}class an extends sn{$I(){return r.ProtoAdType.Nonlinear}enableImpressions(t){super.enableImpressions(t),this.xb()}}!function(t){t.adLoadedPayload=t=>({payload:{adType:t.payload.adType,adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}}),t.impressionPayload=(t,e,i)=>{const{adId:s,adVideoUrl:n,creativeId:r,name:o,length:a,imaMetadata:h,moatTrackingEnabled:c}=t.payload.adSourceData,{adType:d,adSkipMode:l,clickThroughUrl:u,customAdData:p,adSourceData:f}=t.payload;return{payload:{adType:d,adBreakType:i,adSkipMode:l,adSourceData:{moatTrackingEnabled:c,adId:s,length:a,imaMetadata:h,adVideoUrl:n,creativeId:r,name:o},clickThroughUrl:u,customAdData:{ADVERTISER:null==p?void 0:p.ADVERTISER,CAMPAIGN_ID:null==p?void 0:p.CAMPAIGN_ID,CREATIVE_ID:p.CREATIVE_ID},adDuration:f.length,selectedAdSlot:e}}},t.defaultPayload=t=>({payload:{adType:t.payload.adType}})}(nn||(nn={}));var hn=i(6286),cn=i(9154);class dn{constructor(t,e,i,s,r){this.oh=t,this.mh=e,this.lh=i,this.dh=s,this.hh=r,this.Mi=[],this.yh=new n.x,this.Hw=new n.x,this.Gw=new n.x,this.Ah=new n.x,this.zw=new n.x,this.Sh=new n.x,this.Ch=new n.x,this.kh=new n.x,this.bh=new n.x,this.Ww=new Map,this.Yw=!0,this.Xw=!0,this.Qw={[h.k.LINEAR]:(t,e)=>{const i=new on(t,t.trackingResponseService,e);this.Qs.setAdManager(h.k.LINEAR,i)},[h.k.NONLINEAR]:(t,e)=>{const i=new an(t,t.trackingResponseService,e);this.Qs.setAdManager(h.k.NONLINEAR,i)}},this.Kw={mediaMetadata:{},clickToPlay:!1,linearAdOpportunity:new $t.qW,newContent:!1,sound:0,vastViewMode:o.zc.Normal,adBreakState:this.lh.getAdBreakState(),playerOrientation:this.mh,inFloating:this.oh.playerData.inFloating,queryJsTargeting:this.oh.queryJsTargeting},this.Qs=new Ss(this.oh.viewabilityService,this.oh.globalDomUtilsService,this.oh.loopAdWhenFinished,this.oh.adPlaybackMode),this.Yw=this.oh.canPrefetchBeforePreroll}get onLinearNoFill(){return this.kh.asObservable()}get onAdsEnable(){return this.yh.asObservable()}get onLinearVpaidEvent(){return this.Hw.asObservable()}get onNonlinearVpaidEvent(){return this.Gw.asObservable()}get onLinearImpressionRevenue(){return this.Ah.asObservable()}get onNonlinearImpressionRevenue(){return this.zw.asObservable()}get onLinearImpressionPrice(){return this.Sh.asObservable()}get onNonlinearImpressionPrice(){return this.Ch.asObservable()}get onPrefetchStart(){return this.bh.asObservable()}hasAdsEligibleForFill(){var t;return Boolean(null===(t=this.Qs.getAdManagerByLinearity(h.k.LINEAR))||void 0===t?void 0:t.hasAdsEligibleForFill(this.Kw))}getCurrentAdBreakType(){return this.Kw.adBreakState.adBreakType}canPrefetchAds(t){const e=this.Qs.getAdManagerByLinearity(t);this.Zw(t,Is.StartSessionPrefetch,e)}initAd(t,e,i,s,n,r,o){this.tP(r),this.zh(o),this.Qs.getAllLinearityKeys().forEach((t=>{this.eP(h.k[t],{sound:n})})),this.Mi.push(this.lh.onAdBreakRemainingTimeUpdate.subscribe((()=>{this.eP(h.k.LINEAR,{adBreakState:this.lh.getAdBreakState()})})))}getNewLinearAdOpportunity(){return this.Qs.getPrefetchType(h.k.LINEAR)===Is.NoPrefetch?new $t.qW:this.Kw.linearAdOpportunity}getAdContainerSize(t){const e=this.Ww.get(t);return{height:(null==e?void 0:e.clientHeight)||0,width:(null==e?void 0:e.clientWidth)||0}}getMainAdContainerWidth(t){var e;return null===(e=this.Qs.getAdManagerByLinearity(t))||void 0===e?void 0:e.getMainContainerState().width}getCurrentAdMetadata(t){var e;return null===(e=this.Qs.getAdManagerByLinearity(t))||void 0===e?void 0:e.getCurrentAdMetadata()}getCurrentAdMediaSize(t){var e;return null===(e=this.Qs.getAdManagerByLinearity(t))||void 0===e?void 0:e.getCurrentAdMediaSize()}isAdInWin(t){const e=this.Qs.getAdManagerByLinearity(t);return(null==e?void 0:e.isLoadingAds())||!1}enableAds(t){this.Qs.enable(t),this.eP(t),this.yh.next(t)}disableAds(t,e){this.Qs.disable(t,e);const i=this.Qs.getAdManagerByLinearity(t);if(!i)return;const s=(null==e?void 0:e.disableReason)===c.m.ForceDisable;i.disableImpressions(s),(null==e?void 0:e.disableReason)!==c.m.ForceDisable&&this.Qs.usePrefetch(t)&&this.Qs.tryPreparingMidSessionPrefetch(t,e)}disableAdvertising(){this.Xw=!1}enableAdvertising(){this.Xw=!0,this.Qs.getAllLinearityKeys().forEach((t=>{const e=h.k[t];this.enablePrefetchForLinearity(e)}))}setAdVolume(t,e){var i;null===(i=this.Qs.getAdManagerByLinearity(t))||void 0===i||i.setAdVolume(e),this.eP(t,{sound:e})}pauseAd(t,e){var i;null===(i=this.Qs.getAdManagerByLinearity(t))||void 0===i||i.pauseAd(e)}resumeAd(t,e){var i;null===(i=this.Qs.getAdManagerByLinearity(t))||void 0===i||i.resumeAd(e)}skipAd(t){var e;null===(e=this.Qs.getAdManagerByLinearity(t))||void 0===e||e.skipAd()}stopAd(t,e){var i;null===(i=this.Qs.getAdManagerByLinearity(t))||void 0===i||i.stopAd(e)}onAdStateChange(t,e,i){const s=cn.H[e],n=cn.H[i];this.iP(t,s,n),s===r.ProtoAdBreakTypeEnum.PreRoll&&(this.Yw=!0)}onContentChange(){this.Qs.getAllLinearityKeys().forEach((t=>{this.eP(h.k[t],{newContent:!0})}))}setMediaRestrictions(t){const e=Object.assign(this.Kw.mediaMetadata,t);this.Qs.getAllLinearityKeys().forEach((t=>{const i=h.k[t];this.eP(i,{mediaMetadata:e}),this.enablePrefetchForLinearity(i)}))}userInteraction(t){this.Qs.getAllLinearityKeys().forEach((t=>{this.eP(h.k[t],{clickToPlay:!0})}))}setPlayerOrientation(t){this.Kw.playerOrientation=t,this.Qs.getAllAvailableAdManagers().forEach((e=>e.setPlayerOrientation(t)))}updateJsQueryTargeting(t){this.Kw.queryJsTargeting=(0,pe.S1)(this.Kw.queryJsTargeting,t),this.sP()}removeJsQueryTargeting(t){this.Kw.queryJsTargeting=(0,pe.G_)(this.Kw.queryJsTargeting,t),this.sP()}setVastViewMode(t){this.nP({vastViewMode:t})}newLinearAdOpportunity(t){const e=h.k.LINEAR;this.Qs.usePrefetch(e)&&(this.Kw.linearAdOpportunity=t,this.Kw.linearAdOpportunity.timestamp=Date.now(),this.eP(e,{linearAdOpportunity:this.Kw.linearAdOpportunity}),this.Qs.disablePrefetch(e))}inFloatingChanged(t){this.Kw.inFloating=t}setCustomMacros(t){this.Qs.getAllAvailableAdManagers().forEach((e=>e.setCustomMacros(t)))}setLineItemMetadata(t,e){var i;const s=this.Qs.getAdManagerByLinearity(h.k.LINEAR);(0,H.$K)(s)?null===(i=s.setLineItemMetadata)||void 0===i||i.call(s,t,this.Kw,e):e({success:!1,errorReason:rn.q.AdManagerNotInitialized})}startConnatixAuction(t){var e;const i=this.Qs.getAdManagerByLinearity(h.k.LINEAR);(0,H.$K)(i)?null===(e=i.startConnatixAuction)||void 0===e||e.call(i,this.Kw,t):t({success:!1})}destroy(t){try{(0,l.i)(this.Mi),this.Qs.destroy()}catch(e){(0,wt.nF)({message:"AdManagerBridge_destroy",level:wt.D_.WARN,exception:e.message,callStack:e.stack,sessionId:t})}}sP(){this.Qs.getAllAvailableAdManagers().forEach((t=>t.setQueryJsTargeting(this.Kw.queryJsTargeting)))}tP(t){t.forEach((t=>{this.Ww.set(t.type,t.container)}))}iP(t,e,i=r.ProtoAdBreakTypeEnum.None){const s=i===r.ProtoAdBreakTypeEnum.PreRoll&&e===r.ProtoAdBreakTypeEnum.MidRoll;this.eP(t,{adBreakState:this.lh.getAdBreakState()},s)}eP(t,e,i=!1){this.nP(e);const s=this.Qs.getAdManagerByLinearity(t),n=null==s?void 0:s.hasUnstartedBids();if(i&&!n&&this.Qs.disable(h.k.LINEAR,{disableReason:c.m.TimeoutBetweenAds}),s&&this.Qs.isAdManagerEnable(t)){if(this.Qs.usePrefetch(t)){const e=!1;this.Qs.startSessionPrefetch(t,e)}if(t===h.k.NONLINEAR){const t=Object.assign(Object.assign({},this.Kw.adBreakState),{remainingAdDuration:0});s.enableImpressions(Object.assign(Object.assign({},this.Kw),{adBreakState:t}))}else s.enableImpressions(this.Kw);this.rP()}}nP(t){Object.assign(this.Kw,t),this.Kw.adBreakState=this.lh.getAdBreakState()}rP(){this.nP({clickToPlay:!1,newContent:!1})}enablePrefetchForLinearity(t){if(this.Qs.usePrefetch(t)&&this.Qs.hasStartSessionPrefetch(t)){const e=this.Qs.getAdManagerByLinearity(t);this.Zw(t,Is.StartSessionPrefetch,e)}}Zw(t,e,i){if(!this.Yw||!this.Xw||!this.dh&&this.oh.disableAdsInBackground)return;this.Kw.linearAdOpportunity=new $t.qW;const s=this.oh.viewabilityService.check({element:this.hh,threshold:.1});e!==Is.StartSessionPrefetch||s?this.Qs.enablePrefetch(t,e,this.Kw,i):this.Qs.observeOutOfViewDistance(t,e,this.Kw,this.hh,i)}zh(t){const e=(0,Pe.mn)(this.oh.adSourceSettings.lineItems,h.k.NONLINEAR),i=(0,Pe.mn)(this.oh.adSourceSettings.lineItems,h.k.LINEAR);(0,pt.BZ)(e)&&this.oP(h.k.NONLINEAR,e,t),(0,pt.BZ)(i)&&this.oP(h.k.LINEAR,i,t),this.aP(),this.hP()}oP(t,e,i){const s=d.h.getSessionChildContainer(i.config.sessionId).resolve(hn.j),n=d.h.getSessionChildContainer(i.config.sessionId).resolve(a.k),r={playerData:this.oh.playerData,generalRepository:this.oh.generalRepository,standaloneService:this.oh.standaloneService,trackingResponseService:s,lineItemList:e,adBreakHelper:this.lh,adContainerMap:this.Ww,amazonTamSlotId:this.oh.amazonTamSlotId,pbjsSchainSettings:this.oh.prebidJsSupplyChain,skipPlayerSettings:this.oh.skipPlayerSettings,disableScrollHijackEnforcement:!this.oh.adSourceSettings.disableScrollHijackEnforcement,pauseAdWhenFinished:this.oh.pauseAdWhenFinished,loopAdWhenFinished:this.oh.loopAdWhenFinished,app:i,lineItemAbTestInformation:this.oh.lineItemAbTestInformation,appSettings:this.oh.appSettings,disablePrefetch:this.oh.disablePrefetch};(0,this.Qw[t])(r,n),this.Mi.push(this.Qs.onMidSessionPrefetchReady.subscribe((e=>{const{linearity:i,prefetchType:s}=e,n=this.Qs.getAdManagerByLinearity(i);this.Zw(t,s,n)})),this.Qs.onPrefetchStart.subscribe((()=>{this.bh.next()})))}aP(){const t={[h.k.LINEAR]:this.Hw,[h.k.NONLINEAR]:this.Gw};Object.keys(t).forEach((e=>{const i=h.k[e];this.cP(i,t[i])}))}cP(t,e){const i=this.Qs.getAdManagerByLinearity(t);i&&this.Mi.push(i.onVpaidEvent.subscribe((i=>{var s,n;switch(i.type){case o.fI.AdLoaded:e.next({type:o.fI.AdLoaded,payload:nn.adLoadedPayload(i)});break;case o.fI.AdImpression:{const r=null===(n=null===(s=this.Qs.getAdManagerByLinearity(t))||void 0===s?void 0:s.getCurrentAdMetadata())||void 0===n?void 0:n.adType,a=this.Ww.get(r),h=this.getCurrentAdBreakType();e.next({type:o.fI.AdImpression,payload:nn.impressionPayload(i,a,h)});break}case o.fI.AdVideoStart:case o.fI.AdError:e.next(i);break;default:e.next({type:i.type,payload:nn.defaultPayload(i)})}})))}hP(){const t=this.Qs.getAdManagerByLinearity(h.k.LINEAR),e=this.Qs.getAdManagerByLinearity(h.k.NONLINEAR);t&&this.Mi.push(t.onImpressionRevenueEvent.subscribe((t=>{this.Ah.next(t),this.Sh.next(t.impressionRevenue)})),t.onNoFill.subscribe((()=>{this.kh.next()}))),e&&this.Mi.push(e.onImpressionRevenueEvent.subscribe((t=>{this.zw.next(t),this.Ch.next(t.impressionRevenue)})))}}class ln extends u{Lh(){const t={isOutstream:this.oh.isOutStreamType(),playbackMode:this.oh.playbackMode,initialSoundMode:this.oh.soundMode,hasFloatingCapability:this.oh.floatingSettings.hasFloatingCapability,inFloating:this.nh,liveRampEnvelope:this.ph.services.UserManagerService.identityEnvelope,plcmt:this.oh.videoPlacement,liveRampPubId:this.ah.liveRampPubId};if(!(0,H.$K)(this.ph.services.ViewabilityService))throw new Error("ElementsAdHandler_viewabilityService_is_undefined");if(!(0,H.$K)(this.ph.services.GlobalDomUtilsService))throw new Error("ElementsAdHandler_globalDomUtilsService_is_undefined");const e={playerData:t,appSettings:this._appSettings,generalRepository:this.ah,viewabilityService:this.ph.services.ViewabilityService,globalDomUtilsService:this.ph.services.GlobalDomUtilsService,standaloneService:this.ph.services.StandaloneService,adSourceSettings:this.oh.lineItemSettings,pauseAdWhenFinished:this.oh.pauseAdWhenFinished,loopAdWhenFinished:this.oh.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.oh.skipAdAfter,skipMin:this.oh.skipMin,skippability:this.oh.skippability},adPlaybackMode:this.oh.adPlaybackMode,amazonTamSlotId:this.oh.amazonTamSlotId,prebidJsSupplyChain:this.oh.supplyChainSettings,lineItemAbTestInformation:this.oh.lineItemAbTestInformation,disablePrefetch:this.oh.disablePrefetch,disableAdsInBackground:this.oh.disableAdsInBackground,canPrefetchBeforePreroll:this.oh.prefetchOnPreroll,queryJsTargeting:this.oh.queryJsTargeting};return new dn(e,this.mh,this.lh,this.dh,this.hh)}Dh(t){return new _t(this.oh,this.hh,this.dh,this.lh,this.ph,this.Xi,this.mh,this.Mh,t)}Vh(t){return new xt(this.oh,this.hh,this.dh,this.lh,this.ph,this.Xi,this.mh,this.Mh,t)}}var un,pn=i(7994);!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(un||(un={}));class fn{constructor(t,e,i,s){if(this.Kr=t,this.xn=i,this.De=s,this.NT=!1,this.FT=1e3,this.VT=!0,this.jT=new n.x,this.UT=new n.x,this.$T=!1,this.qT=()=>{this.NT&&this.HT()},this.JT=t=>{this.NT?null!==this.fullscreenElement?this.HT():this.GT():this.jT.next(un.exit)},this.GT=()=>{this.$T=!1,this.zT.reject(),this.NT=!1,clearTimeout(this.WT)},this.YT=this.Kr.hasIosFullscreenBehaviour(i)?e.getElementsByTagName("video")[0]:e,!this.YT)throw new Error("element is missing");try{const t=this.XT();if(null==t)return void(this.VT=!1);this.QT=t.keys,this.KT=t.name,this.tS()}catch(t){this.VT=!1,(0,wt.nF)({message:"Fullscreen init failed",exception:t.message,callStack:t.stack,level:wt.D_.CRITICAL,sessionId:this.De})}}XT(){let t;return t=this.Kr.hasIosFullscreenBehaviour(this.xn)?this.Kr.getFullscreenKeys(this.YT):this.Kr.getFullscreenKeys(),t}get fullscreenElement(){return this.Kr.getDocumentProperty(this.QT.fullscreenElement)}get fullscreenEnabled(){return this.Kr.getDocumentProperty(this.QT.fullscreenEnabled)}enterFullScreen(){if(this.VT){this.zT=new pn.C,this.NT=!0,clearTimeout(this.WT),this.WT=setTimeout(this.GT,this.FT);try{this.YT[this.QT.requestFullscreen]()}catch(t){this.GT()}return this.zT.promise}}exitFullScreen(){try{this.Kr.exitFullscreen(this.QT.exitFullscreen,this.xn===ue.M.Ios?this.YT:void 0)}catch(t){(0,wt.nF)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:wt.D_.WARN,sessionId:this.De})}this.$T=!1}tS(){this.KT===V.do.Moz||this.KT===V.do.Ms?(this.Kr.addEventListenerOnGlobal(this.QT.fullscreenchange,this.JT),this.Kr.addEventListenerOnGlobal(this.QT.fullscreenerror,this.GT)):(this.YT.addEventListener(this.QT.fullscreenchange,this.JT),this.YT.addEventListener(this.QT.fullscreenerror,this.GT)),this.Kr.hasIosFullscreenBehaviour(this.xn)&&(this.YT.addEventListener("webkitbeginfullscreen",this.qT),this.YT.addEventListener("webkitendfullscreen",this.JT))}eS(){this.KT===V.do.Moz||this.KT===V.do.Ms?(this.Kr.removeEventListenerOnGlobal(this.QT.fullscreenchange,this.JT),this.Kr.removeEventListenerOnGlobal(this.QT.fullscreenerror,this.GT)):(this.YT.removeEventListener(this.QT.fullscreenchange,this.JT),this.YT.removeEventListener(this.QT.fullscreenerror,this.GT)),this.xn===ue.M.Ios&&(this.YT.removeEventListener("webkitbeginfullscreen",this.qT),this.YT.removeEventListener("webkitendfullscreen",this.JT))}HT(){this.$T=!0,this.UT.next(un.enter),this.zT.resolve(),this.NT=!1,clearTimeout(this.WT)}get isFullscreen(){return this.$T}get onFullScreenExit(){return this.jT.asObservable()}get onFullScreenEnter(){return this.UT.asObservable()}destroy(){this.isFullscreen&&this.exitFullScreen(),this.eS(),this.zT&&this.zT.isPending&&this.zT.reject()}}class mn extends ln{constructor(){super(...arguments),this.lP=[],this.enterFullScreen=()=>{this.uP.enterFullScreen().then().catch((t=>{(0,wt.nF)({level:wt.D_.WARN,message:"OutstreamAdHandler_enterFullscreen",sessionId:this.oh.sessionId})}))},this.exitFullscreen=()=>{this.uP.exitFullScreen()},this.fP=()=>{this.ph.services.InteractionService.enableScrollEvent(),this.ph.services.EventsStorageService.emitOnExitFullscreen(),this.linearAdUserInterface.collapse(),this.setVastViewMode(o.zc.Normal)},this.mP=()=>{this.ph.services.InteractionService.disableScrollEvent(),this.ph.services.EventsStorageService.emitOnEnterFullscreen(),this.linearAdUserInterface.expand(),this.setVastViewMode(o.zc.Fullscreen)}}initFullScreen(){this.uP=new fn(this.ph.services.GlobalDomUtilsService,this.qh.parentElement,this.ph.config.os.os),this.gP()}gP(){this.lP.push(this.onFullcreenChange.subscribe((t=>{t===G.C.Expand?this.enterFullScreen():this.exitFullscreen()}))),this.vP()}vP(){const t=this.uP.onFullScreenEnter.subscribe((()=>this.mP())),e=this.uP.onFullScreenExit.subscribe((()=>this.fP()));this.lP.push(e,t)}destroy(){super.destroy(),(0,l.i)(this.lP)}Ud(){return!1}}var gn=i(8021);class vn extends Pt{yP(){this.Wh=this.xd(gn.m$.VideoSizeSlot),this.Cd(this.Wh),this.Uc.push(this.Wh)}Td(){super.Td(),this.yP()}Pd(t){super.Pd(t),t===this.Wh&&(0,q.cn)(this.hh,j.s6.AdFullSize)}Fd(){super.Fd(),this.Mh.userInteraction(!0)}Dd(){return!1}updateContinueReadingCard(){const t=this.Mh.getCurrentAdMediaSize(h.k.LINEAR);(0,H.$K)(t)&&(this.Ud(t)?this.bd.showContinueReadingCard(this.Sd):this.bd.hideContinueReadingCard(this.Sd))}}class yn extends u{Lh(){const t={isOutstream:!1,playbackMode:this.oh.playbackMode,initialSoundMode:this.oh.soundMode,hasFloatingCapability:this.oh.floatingSettings.hasFloatingCapability,inFloating:this.nh,liveRampEnvelope:this.ph.services.UserManagerService.identityEnvelope,plcmt:this.oh.videoPlacement,liveRampPubId:this.ah.liveRampPubId};if(!(0,H.$K)(this.ph.services.ViewabilityService))throw new Error("PlayspaceAdHandler_viewabilityService_is_undefined");if(!(0,H.$K)(this.ph.services.GlobalDomUtilsService))throw new Error("PlayspaceAdHandler_globalDomUtilsService_is_undefined");const e={playerData:t,appSettings:this._appSettings,generalRepository:this.ah,viewabilityService:this.ph.services.ViewabilityService,globalDomUtilsService:this.ph.services.GlobalDomUtilsService,standaloneService:this.ph.services.StandaloneService,adSourceSettings:this.oh.lineItemSettings,pauseAdWhenFinished:this.oh.pauseAdWhenFinished,loopAdWhenFinished:this.oh.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.oh.skipAdAfter,skipMin:this.oh.skipMin,skippability:this.oh.skippability},adPlaybackMode:this.oh.adPlaybackMode,amazonTamSlotId:this.oh.amazonTamSlotId,prebidJsSupplyChain:this.oh.supplyChainSettings,lineItemAbTestInformation:this.oh.lineItemAbTestInformation,disablePrefetch:this.oh.disablePrefetch,disableAdsInBackground:this.oh.disableAdsInBackground,queryJsTargeting:this.oh.queryJsTargeting,canPrefetchBeforePreroll:!0};return new dn(e,this.mh,this.lh,this.dh,this.hh)}$h(t,e){return[{container:this.qh,width:this.qh.offsetWidth,height:this.qh.offsetHeight,type:r.ProtoAdType.Overlay},{container:this.Wh,width:this.Wh.offsetWidth,height:this.Wh.offsetHeight,type:r.ProtoAdType.Video}]}Dh(t){return new vn(this.oh,this.hh,this.dh,this.lh,this.ph,this.Xi,this.mh,this.Mh,t)}Vh(){}}},1006:(t,e,i)=>{"use strict";i.d(e,{g:()=>h,n:()=>a});var s=i(4782),n=i(5650),r=i(4798);function o(t){if(!t.adxFloorPrices)return;(t.adxFloorPrices.every((t=>t.priceOutcome!==s.f.Unused))||t.adxFloorPrices.some((t=>t.priceOutcome===s.f.Success)))&&(t.resetAllAdxPricesStatus(),t.resetPrice())}function a(t){if(!(0,n.BZ)(t))return null;const e=t.find((t=>t.priceOutcome===s.f.Unused));if((0,r.$K)(e))return{price:e.price,index:t.indexOf(e)};const i=t.length-1;return{price:t[i].price,index:i}}function h(t,e,i){!function(t,e,i){const s=e.data.requestedFloorPrice;t.adxFloorPrices&&t.adxFloorPrice&&s&&t.updatePriceStatus(s,i)}(t,e,i),i!==s.f.Success&&i!==s.f.Fail||o(t)}},4782:(t,e,i)=>{"use strict";var s;i.d(e,{f:()=>s}),function(t){t[t.Unused=0]="Unused",t[t.Pending=1]="Pending",t[t.Success=2]="Success",t[t.Fail=3]="Fail"}(s||(s={}))},6033:(t,e,i)=>{"use strict";i.d(e,{r:()=>r});var s=i(289),n=i(4798);class r{static getBidDemandType(t){const e=Object.keys(r.bidDemandTypeMap).filter((e=>(0,r.bidDemandTypeMap[e])(t.settings.adManagerLineItem.protoLineItem)))[0];if(!(0,n.$K)(e))return s.ProtoDemandTypeEnum.None;const i=Number.parseInt(e,10);return s.ProtoDemandTypeEnum[s.ProtoDemandTypeEnum[i]]}static isPrivateMarketplaceBid(t){return t.isPMP}static isOpenMarketBid(t){const{advertiserLineItemId:e,publisherLineItemId:i}=t;return!r.isPrivateMarketplaceBid(t)&&e!==i}static isSelfServedBid(t){const{advertiserLineItemId:e,publisherLineItemId:i}=t;return!r.isPrivateMarketplaceBid(t)&&e===i}}r.bidDemandTypeMap={[s.ProtoDemandTypeEnum.PMP]:t=>r.isPrivateMarketplaceBid(t),[s.ProtoDemandTypeEnum.OpenMarket]:t=>r.isOpenMarketBid(t),[s.ProtoDemandTypeEnum.SelfServed]:t=>r.isSelfServedBid(t)}},3199:(t,e,i)=>{"use strict";i.d(e,{Mz:()=>p,E3:()=>m,Vx:()=>f,U4:()=>g,Ko:()=>v});var s=i(289),n=i(9069);class r{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.viewable_impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}var o=i(4261);class a{constructor(t,e){this.De=e,this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new r,t.inLine?this.bP(t.inLine):this.IP(t.wrapper)}bP(t){this.wP(t.errors),this.PP(t.impressions),this._P(t.creatives)}IP(t){this.wP(t.errors),this.PP(t.impressions),this._P(t.creatives)}TP(t){this.SP(t.trackingEvents),this.AP(t.videoClicks)}AP(t){t&&(this.kP(t.clickTrackings),this.EP(t.customClicks))}kP(t){this.clickTrackings.push(...t)}EP(t){this.customClicks.push(...t)}SP(t){t.forEach((t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(e){(0,o.nF)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:e.stack,level:o.D_.INFO,sessionId:this.De})}}))}_P(t){t.forEach((t=>{t.linear?this.TP(t.linear):t.nonLinear&&this.SP(t.nonLinear.trackingEvents)}))}wP(t){this.errorUrls.push(...t)}PP(t){this.impressions.push(...t)}}var h=i(8872),c=i(3775),d=i(3020),l=i(9791);const u={[s.ProtoTrackerTriggerType.Impression]:"adImpression",[s.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[s.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[s.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[s.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[s.ProtoTrackerTriggerType.VideoClick]:"adClick",[s.ProtoTrackerTriggerType.Pause]:"adPause",[s.ProtoTrackerTriggerType.Resume]:"adResume",[s.ProtoTrackerTriggerType.Mute]:"adMute",[s.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class p{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adViewableImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static trackError(t,e,i,s,n,r=h.Oq.GeneralError,o=window.document.head){this.track(t,e,i,s,n,o,r)}static track(t,e,i,n,r,o=window.document.head,a){if(!Array.isArray(t))return;const{width:h,height:u}=n.adContainerState.get(i.adType),{adBreakType:p}=n.adBreakState,{mediaDescription:f,mediaDuration:m,mediaId:g,mediaUrl:v,mediaTitle:y}=n.media,b=n.sound?0:1;t.forEach((t=>{if(t.url)try{const n=e.replace(t.url,i.vendorId,i.advertiserLineItemId,{adMacros:{adWidth:h,adHeight:u,adPostion:p,errorCode:a,mute:b,plcmt:r},mediaMacros:{mediaDescription:f,mediaDuration:m,mediaId:g,mediaUrl:v,mediaTitle:y}});switch(t.type){case s.ProtoTrackerType.Image:(0,l.Hh)([n],window);break;case s.ProtoTrackerType.Javascript:(0,d.dZ)({src:n},window.document.head,window);break;case s.ProtoTrackerType.IAS:(0,d.dZ)({src:n,attributes:[{name:c.b.GarbageCollector,value:""}]},o,window)}}catch(t){}}))}}function f(t,e,i){const s=new a(t,i);e.adError.push(...y(s.errorUrls)),e.adImpression.push(...y(s.impressions)),e.adViewableImpression.push(...y(s.trackingEvents.viewable_impression)),e.adClick.push(...y(s.clickTrackings)),e.adMute.push(...y(s.trackingEvents.mute)),e.adPause.push(...y(s.trackingEvents.pause)),e.adQuartileFirst.push(...y(s.trackingEvents.firstQuartile)),e.adQuartileSecond.push(...y(s.trackingEvents.midpoint)),e.adQuartileThird.push(...y(s.trackingEvents.thirdQuartile)),e.adQuartileFourth.push(...y(s.trackingEvents.complete)),e.adResume.push(...y(s.trackingEvents.resume)),e.adSkip.push(...y(s.trackingEvents.skip)),e.adStarted.push(...y(s.trackingEvents.creativeView)),e.adVideoStart.push(...y([...s.trackingEvents.start])),e.adUnmute.push(...e.adUnmute,...y(s.trackingEvents.unmute)),e.adUserAcceptInvitation.push(...y([...s.trackingEvents.acceptInvitation,...s.trackingEvents.acceptInvitationLinear])),e.adUserClose.push(...y(s.trackingEvents.close)),e.adUserMinimize.push(...e.adUserMinimize,...y([...s.trackingEvents.collapse,...s.trackingEvents.playerCollapse,...s.trackingEvents.adCollapse]))}function m(t,e){t.forEach((t=>function(t,e){(function(t,e){return e[u[t]]})(t.trigger,e).push({type:t.type,url:t.url})}(t,e)))}function g(t){return{type:s.ProtoTrackerType.Image,url:t}}function v(t,e){switch(t){case n.fI.AdImpression:return e.adImpression;case n.fI.AdClickThru:return e.adClick;case n.fI.AdStarted:return e.adStarted;case n.fI.AdVideoStart:return e.adVideoStart;case n.fI.AdVideoFirstQuartile:return e.adQuartileFirst;case n.fI.AdVideoMidpoint:return e.adQuartileSecond;case n.fI.AdVideoThirdQuartile:return e.adQuartileThird;case n.fI.AdVideoComplete:return e.adQuartileFourth;case n.fI.AdPaused:return e.adPause;case n.fI.AdPlaying:return e.adResume;case n.fI.AdSkipped:return e.adSkip;case n.fI.AdUserClose:return e.adUserClose;case n.fI.AdUserAcceptInvitation:return e.adUserAcceptInvitation;case n.fI.AdUserMinimize:return e.adUserMinimize;case n.fI.AdError:return e.adError}}function y(t){return t.map((t=>g(t)))}},8872:(t,e,i)=>{"use strict";var s,n,r,o;i.d(e,{RA:()=>a,Oq:()=>n,Uq:()=>r,GU:()=>c,y$:()=>o,H3:()=>V}),function(t){t[t.Empty=0]="Empty",t[t.BadWrapper=1]="BadWrapper",t[t.MediaNotFound=2]="MediaNotFound"}(s||(s={})),function(t){t[t.XmlParsingError=100]="XmlParsingError",t[t.VastSchemaError=101]="VastSchemaError",t[t.InvalidVastVersionError=102]="InvalidVastVersionError",t[t.ExpectingDifferentLinearity=201]="ExpectingDifferentLinearity",t[t.GeneralLinearError=400]="GeneralLinearError",t[t.MediaFileNotFound=401]="MediaFileNotFound",t[t.MediaFileUriTimeout=402]="MediaFileUriTimeout",t[t.MediaFileNotSupported=403]="MediaFileNotSupported",t[t.VerificationUnitNotExecuted=410]="VerificationUnitNotExecuted",t[t.WrapperVastUriTimeout=301]="WrapperVastUriTimeout",t[t.WrapperLimitReached=302]="WrapperLimitReached",t[t.NoVastResponseAfterWrapper=303]="NoVastResponseAfterWrapper",t[t.ImpressionTimeout=304]="ImpressionTimeout",t[t.NonlinearGeneralError=500]="NonlinearGeneralError",t[t.NonlinearExpectingDifferentSize=501]="NonlinearExpectingDifferentSize",t[t.NonlinearUnableToFetchResource=502]="NonlinearUnableToFetchResource",t[t.NonlinearSupportedTypeNotFound=503]="NonlinearSupportedTypeNotFound",t[t.GeneralError=900]="GeneralError",t[t.GeneralVpaidError=901]="GeneralVpaidError"}(n||(n={})),function(t){t.AdVerifications="AdVerifications"}(r||(r={})),function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(o||(o={}));class a extends Error{constructor(t){super(t.errorReason),this.vastErrorTrackers=[],this.vastErrorCode=t.vastErrorCode||n.GeneralError,this.vastErrorTrackers=t.errorUrlTrackers||[]}}var h=i(5650);class c{constructor(t){this.mediaFiles=[],this.nonLinearFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.linearClickThrough=void 0,this.creativeId=void 0,this.extensions=[],this.verifications=[],this.icons=[],t.forEach((t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.extensions=t.inLine.extensions,this.xP(t.inLine.extensions),this.CP(t.inLine.adVerifications),this._P(t.inLine.creatives)):t.wrapper&&(this._P(t.wrapper.creatives),this.CP(t.wrapper.adVerifications),this.xP(t.wrapper.extensions))}))}xP(t){(0,h.BZ)(t)&&t.forEach((t=>{(0,h.BZ)(t.adVerifications)&&this.CP(t.adVerifications)}))}CP(t){this.verifications=[...this.verifications,...t]}TP(t){this.duration=t.duration,this.OP(t.mediaFiles),this.MP(t.skipoffset),this.LP(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.Vr(t.videoClicks.clickThrough),(0,h.BZ)(t.icons)&&this.BP(t.icons)}RP(t){this.DP(t.nonLinearAdList),this.LP(t.adParameters)}DP(t){this.nonLinearFiles=[...this.nonLinearFiles,...t]}BP(t){this.icons.push(...t)}LP(t){this.adParameters=t}MP(t){this.skipoffset=t}OP(t){this.mediaFiles=[...this.mediaFiles,...t]}Vr(t){this.linearClickThrough=t}_P(t){t.forEach((t=>{this.creativeId=t.id,t.linear&&this.TP(t.linear),t.nonLinear&&this.RP(t.nonLinear)}))}}var d,l=i(289),u=i(5139),p=i(9592),f=i(51),m=i(4798);!function(t){function e(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():(0,f.jv)(t)?t:isFinite(Number(t))?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(i){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),i.hasChildNodes()){for(let e,s,r,o=0;o<i.childNodes.length;o++)e=i.childNodes.item(o),(e.nodeType-1|1)===Node.TEXT_NODE?n+=e.nodeType===Node.TEXT_NODE?e.nodeValue.trim():e.nodeValue:1!==e.nodeType||e.prefix||(s=e.nodeName.toLowerCase(),r=new t(e),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?e(n):null}if(void 0===i.hasAttributes?i.attributes.length>0:i.hasAttributes()){let t;for(;s<i.attributes.length;s++)t=i.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=e(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},t.isValidXMLString=function(t){const e=(new DOMParser).parseFromString(t,"text/xml").documentElement.querySelector("parsererror");return(0,m.Ft)(e)},t.parseText=e}(d||(d={}));class g{constructor(t){this.iconClickTracking=[],this.iconClickThrough=d.getKeyValue(t.iconclickthrough),(0,m.$K)(t.iconclicktracking)&&(this.iconClickTracking=this.NP((0,h.qo)(t.iconclicktracking)))}NP(t){return(0,h.BZ)(t)?t.map((t=>d.getKeyValue(t))):[]}}var v=i(1310);class y{constructor(t){var e,i,s,n,r,o,a;this.program=null===(e=t.keyAttributes)||void 0===e?void 0:e.program,this.width=null===(i=t.keyAttributes)||void 0===i?void 0:i.width,this.height=null===(s=t.keyAttributes)||void 0===s?void 0:s.height,this.pxRatio=null===(n=t.keyAttributes)||void 0===n?void 0:n.pxratio,this.xPosition=null===(r=t.keyAttributes)||void 0===r?void 0:r.xposition,this.yPosition=null===(o=t.keyAttributes)||void 0===o?void 0:o.yposition,this.apiFramework=null===(a=t.keyAttributes)||void 0===a?void 0:a.apiframework,this.offset=(0,m.$K)(t.keyAttributes.offset)?(0,v.pP)(t.keyAttributes.offset):void 0,this.duration=(0,m.$K)(t.keyAttributes.duration)?(0,v.pP)(t.keyAttributes.duration):void 0,this.staticResource=d.getKeyValue(t.staticresource),this.iframeResource=d.getKeyValue(t.iframeresource),this.htmlResource=d.getKeyValue(t.htmlresource),this.iconViewTracking=d.getKeyValue(t.iconviewtracking),(0,m.$K)(t.iconclicks)&&(this.iconClicks=new g(t.iconclicks))}}var b=i(4261);class I{constructor(t,e){this.De=e,this.FP=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.VP="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.isSupported=!0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=d.getKeyValue(t),this.isSupported=this.jP()}getMediaFileType(){return this.apiFramework===this.VP||(0,h.d3)(this.type,this.FP)?o.Javascript:o.Video}jP(){if("VPAID"===this.apiFramework||(0,h.d3)(this.type,this.FP))return!0;if("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)return!1;if(!(0,m.QM)(this.type))return(0,b.nF)({message:"MediaFile_type_not_provided",level:b.D_.WARN,sessionId:this.De}),!0;const t=document.createElement("video").canPlayType(this.type);return!!(0,m.QM)(t)}}class w{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=d.getKeyValue(t.clickthrough),this.clickTrackings=this.UP((0,h.qo)(t.clicktracking)),this.customClicks=this.UP((0,h.qo)(t.customclick))}UP(t){const e=[];return void 0!==t[0]&&t.forEach((t=>{e.push(d.getKeyValue(t))})),e}}class P{constructor(t,e){this.name=t.keyAttributes.event,this.uri=d.getKeyValue(t),"progress"===this.name&&(this.offset=(0,v.QI)(t.keyAttributes.offset,e))}}function T(t){return A(t)}function _(t){return A(t)}function S(t,e){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(new P(t,e))})),i}function A(t){const e=[];return void 0!==t[0]&&t.forEach((t=>{e.push(d.getKeyValue(t))})),e}class x{constructor(t,e){this.De=e,this.duration=void 0,this.mediaFiles=[],this.icons=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=(0,v.pP)(d.getKeyValue(t.duration)),this.skipoffset=(0,v.QI)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.$P((0,h.qo)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=S((0,h.qo)(t.trackingevents.tracking),this.duration)),t.videoclicks&&(this.videoClicks=new w(t.videoclicks)),t.adparameters&&(this.adParameters=d.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=d.decodeXMLText(this.adParameters))),t.icons&&t.icons.icon&&(this.icons=this.qP((0,h.qo)(t.icons.icon)))}$P(t){const e=[];return void 0!==t[0]&&t.forEach((t=>{const i=new I(t,this.De);e.push(i)})),e}qP(t){return(0,h.BZ)(t)?t.map((t=>new y(t))):[]}isSupported(){return!0}}class k{constructor(t,e){var i;this.De=e,this.minSuggestedDuration=void 0,this.staticResource={},this.htmlResource={},this.iframeResource={},this.nonLinearClickTracking={},this.id=t.keyAttributes.id,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.expandedWidth=t.keyAttributes.expandedheight,this.expandedHeight=t.keyAttributes.expandedwidth,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.minSuggestedDuration=(0,v.pP)(t.keyAttributes.minsuggestedduration),this.nonLinearClickThrough=null===(i=t.nonlinearclickthrough)||void 0===i?void 0:i.keyValue,t.nonlinearclicktracking&&(this.nonLinearClickTracking.id=t.nonlinearclicktracking.keyAttributes.id,this.nonLinearClickTracking.uri=t.nonlinearclicktracking.keyValue),t.staticresource&&(this.staticResource.creativeType=t.staticresource.keyAttributes.creativetype,this.staticResource.uri=t.staticresource.keyValue),t.iframeresource&&(this.iframeResource.uri=t.iframeresource.keyValue),t.htmlresource&&(this.htmlResource.uri=t.htmlresource.keyValue)}isSupported(){return"VPAID"===this.apiFramework?((0,b.nF)({message:"AdManager_NonLinearAd_VPAID_found",level:b.D_.INFO,sessionId:this.De},{pacing:10,shouldSendMaxLog:!1}),!1):this.width&&this.height?!(!this.staticResource.creativeType||!this.staticResource.uri)||(this.htmlResource.uri&&(0,b.nF)({message:"AdManager_NonLinearAd_htmlResource_found",level:b.D_.INFO,sessionId:this.De},{pacing:10,shouldSendMaxLog:!1}),this.iframeResource.uri&&(0,b.nF)({message:"AdManager_NonLinearAd_iframeResource_found",level:b.D_.INFO,sessionId:this.De},{pacing:10,shouldSendMaxLog:!1}),!1):((0,b.nF)({message:"AdManager_NonLinearAd_no_dimensions",level:b.D_.INFO,sessionId:this.De},{pacing:10,shouldSendMaxLog:!1}),!1)}}class E{constructor(t,e){if(this.De=e,this.nonLinearAdList=[],this.trackingEvents=[],this.HP=!1,t.nonlinear){const e=(0,h.qo)(t.nonlinear);this.nonLinearAdList=this.JP(e),this.HP=(0,h.BZ)(e)&&0===this.nonLinearAdList.length}t.trackingevents&&(this.trackingEvents=S((0,h.qo)(t.trackingevents.tracking))),t.adparameters&&(this.adParameters=d.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=d.decodeXMLText(this.adParameters)))}isSupported(){return!0}get hasInvalidResource(){return this.HP}JP(t){return t.map((t=>new k(t,this.De))).filter((t=>t.isSupported()))}}class C{constructor(t,e){if(this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.nonLinear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear)try{this.linear=new x(t.linear,e)}catch(t){(0,b.nF)({sessionId:e,callStack:t.stack,level:b.D_.WARN,exception:t.message,message:"Creative_Linear"})}if(t.nonlinearads)try{this.nonLinear=new E(t.nonlinearads,e)}catch(t){(0,b.nF)({sessionId:e,callStack:t.stack,level:b.D_.WARN,exception:t.message,message:"Creative_NonLinear"})}}isSupported(){return!0}}function O(t,e){const i=[];return t.forEach((t=>{i.push(new C(t,e))})),i}class L{constructor(t){var e,i;this.url=t.keyValue,this.apiFramework=null===(e=t.keyAttributes)||void 0===e?void 0:e.apiframework,this.browserOptional=null===(i=t.keyAttributes)||void 0===i?void 0:i.browseroptional}}class M{constructor(t,e){var i,s;try{this.vendor=t.keyAttributes.vendor,t.javascriptresource&&(this.javaScriptResource=new L(t.javascriptresource)),this.verificationParameters=null===(i=t.verificationparameters)||void 0===i?void 0:i.keyValue,this.trackingEvents=(null===(s=t.trackingevents)||void 0===s?void 0:s.tracking)?S((0,h.qo)(null==t?void 0:t.trackingevents.tracking)):[]}catch(t){(0,b.nF)({sessionId:e,message:"OMID_Verification_parse_error",level:b.D_.WARN,callStack:t.stack,exception:t.message})}}}function R(t,e){return t.map((t=>new M(t,e)))}class B{constructor(t,e){var i;this.adVerifications=void 0,this.type=t.keyAttributes.type,this.adVerifications=(null===(i=null==t?void 0:t.adverifications)||void 0===i?void 0:i.verification)?R((0,h.qo)(t.adverifications.verification),e):[]}}function D(t,e){return t.map((t=>new B(t,e)))}class N{constructor(t,e){var i,s,n;this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adVerifications=void 0,this.adTitle=d.getKeyValue(t.adtitle),this.adSystem=d.getKeyValue(t.adsystem),this.impressions=T((0,h.qo)(t.impression)),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?O((0,h.qo)(t.creatives.creative),e):[],this.description=d.getKeyValue(t.description),this.advertiser=d.getKeyValue(t.advertiser),this.surveys=d.getKeyValue(t.survey),this.errors=_((0,h.qo)(t.error)),this.pricing=d.getKeyValue(t.pricing),this.extensions=(null===(s=t.extensions)||void 0===s?void 0:s.extension)?D((0,h.qo)(t.extensions.extension),e):[],this.adVerifications=(null===(n=t.adverifications)||void 0===n?void 0:n.verification)?R((0,h.qo)(t.adverifications.verification),e):[]}isSupported(){return!0}}class F{constructor(t,e){var i,s,n;this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adVerifications=void 0,this.extensions=void 0,this.adSystem=d.getKeyValue(t.adsystem),this.impressions=T((0,h.qo)(t.impression)),this.VASTAdTagURI=d.getKeyValue(t.vastadtaguri),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?O((0,h.qo)(t.creatives.creative),e):[],this.errors=_((0,h.qo)(t.error)),this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad,this.adVerifications=(null===(s=null==t?void 0:t.adverifications)||void 0===s?void 0:s.verification)?R((0,h.qo)(t.adverifications.verification),e):[],this.extensions=(null===(n=null==t?void 0:t.extensions)||void 0===n?void 0:n.extension)?D((0,h.qo)(t.extensions.extension),e):[]}}class ${constructor(t,e){this.De=e,Array.isArray(t)?this.GP(t):this.zP(t)}isSupported(){return!0}zP(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new N(t.inline,this.De):t.wrapper&&(this.wrapper=new F(t.wrapper,this.De))}GP(t){const e=t.filter((t=>{const e=this.WP(t).filter((t=>t.linear));return!!(0,h.BZ)(e)}));(0,h.BZ)(e)&&this.zP(e[0])}WP(t){return t.inline?(0,h.qo)(t.inline.creatives.creative):t.wrapper?(0,h.qo)(t.wrapper.creatives.creative):[]}}class V{constructor(t=2,e){this.YP=t,this.De=e}parseVastXml(t){var e,i;try{if(!d.isValidXMLString(t))return{hasError:!0,vastErrorCode:n.XmlParsingError,errorReason:p.f.XmlInvalidString};if(this.XP(t))return{hasError:!0,vastErrorCode:n.GeneralError,errorReason:p.f.XmlInvalidAd};if(this.KP(t))return{hasError:!0,vastErrorCode:n.GeneralError,errorReason:p.f.VastContainsBannedUrls};const r=(new DOMParser).parseFromString(t,"application/xml"),o=new d.JXONTree(r.documentElement);if(!this.ZP(o))return{hasError:!0,vastErrorCode:n.VastSchemaError,errorReason:p.f.XmlInvalidTree};if(!this.t_(o,this.YP))return{hasError:!0,vastErrorCode:n.InvalidVastVersionError,errorReason:p.f.VastVersionNotSupported};const a=new $(o.ad,this.De);let c=[],l=[];(0,h.BZ)(null===(e=null==a?void 0:a.inLine)||void 0===e?void 0:e.creatives)&&(c=a.inLine.creatives.filter((t=>{var e;return(0,h.BZ)(null===(e=null==t?void 0:t.linear)||void 0===e?void 0:e.mediaFiles)})),l=null===(i=null==a?void 0:a.inLine)||void 0===i?void 0:i.creatives.filter((t=>{var e;return(0,h.BZ)(null===(e=null==t?void 0:t.nonLinear)||void 0===e?void 0:e.nonLinearAdList)})));const u=this.e_(a,c,l);return u.isValid?this.i_(a,l)?{hasError:!1,result:a}:{hasError:!0,vastErrorCode:n.MediaFileNotSupported,errorReason:p.f.VastMediaFilesNotSupported,errorUrlTrackers:this.n_(a)}:u.reason===s.MediaNotFound&&this.r_(a)?{hasError:!0,vastErrorCode:n.NonlinearSupportedTypeNotFound,errorReason:p.f.XmlInvalidAd,errorUrlTrackers:this.n_(a)}:{hasError:!0,vastErrorCode:n.VastSchemaError,errorReason:p.f.XmlInvalidAd}}catch(t){return{hasError:!0,vastErrorCode:n.GeneralError,errorReason:p.f.XmlParseGeneral}}}n_(t){var e;const i=[];return null===(e=null==t?void 0:t.inLine)||void 0===e||e.errors.forEach((t=>{i.push({url:t,type:l.ProtoTrackerType.Image})})),i}r_(t){var e,i;return null===(i=null===(e=t.inLine)||void 0===e?void 0:e.creatives)||void 0===i?void 0:i.some((t=>{var e;return null===(e=t.nonLinear)||void 0===e?void 0:e.hasInvalidResource}))}i_(t,e){var i,s;if((0,m.$K)(t.wrapper))return!0;null===(i=null==t?void 0:t.inLine)||void 0===i||i.creatives.forEach((t=>{var e;(0,h.BZ)(null===(e=null==t?void 0:t.linear)||void 0===e?void 0:e.mediaFiles)&&(t.linear.mediaFiles=this.o_(t.linear.mediaFiles))}));const n=null===(s=null==t?void 0:t.inLine)||void 0===s?void 0:s.creatives.reduce(((t,e)=>{var i;return(0,h.BZ)(null===(i=null==e?void 0:e.linear)||void 0===i?void 0:i.mediaFiles)?[...t,...e.linear.mediaFiles]:t}),[]);return!(!(0,h.BZ)(n)&&!(0,h.BZ)(e))}o_(t){return t.filter((t=>t.isSupported))}XP(t){return u.c.KEYWORDS_FOR_BANNED_VAST.some((e=>t.includes(e)))}t_(t,e){const i=parseInt(t.keyAttributes.version,10);return!(i&&i<e)}ZP(t){return!!t.ad}e_(t,e,i){const n=t.wrapper;return t.inLine||n?n&&!n.VASTAdTagURI?{isValid:!1,reason:s.BadWrapper}:n||(0,h.BZ)(e)||(0,h.BZ)(i)?{isValid:!0}:{isValid:!1,reason:s.MediaNotFound}:{isValid:!1,reason:s.Empty}}KP(t){return u.c.BANNED_DOMAINS.some((e=>t.includes(e)))}}},6706:(t,e,i)=>{"use strict";i.d(e,{Yh:()=>r,E4:()=>c,sL:()=>u,gb:()=>f,PQ:()=>y,wY:()=>b,X3:()=>x,H1:()=>V,IS:()=>E,tB:()=>p,rO:()=>N});var s=i(289);const n={[s.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[s.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[s.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class r{constructor(t,e,i,s){this.a_=t,this.ll=e,this.dl=i,this._appSettings=s}replace(t,e,i,s){this.a_.setAdWidth(s.adMacros.adWidth),this.a_.setAdHeight(s.adMacros.adHeight),this.a_.setAdPosition(n[s.adMacros.adPostion]),this.a_.setErrorCode(s.adMacros.errorCode),this.a_.setMute(s.adMacros.mute),this.a_.setPlcmt(s.adMacros.plcmt),s.mediaMacros.mediaDescription&&this.a_.setVideoDescription(s.mediaMacros.mediaDescription),s.mediaMacros.mediaDuration&&this.a_.setVideoDuration(s.mediaMacros.mediaDuration),s.mediaMacros.mediaId&&this.a_.setVideoId(s.mediaMacros.mediaId),s.mediaMacros.mediaTitle&&this.a_.setVideoTitle(s.mediaMacros.mediaTitle),s.mediaMacros.mediaUrl&&this.a_.setVideoUrl(s.mediaMacros.mediaUrl);const r=this.ll.isConsent(e);this.a_.setGDPR(this.ll.isConsentRequired()?1:0),this.a_.setConsent(r?1:0),this.a_.setGDPRConsent(this.ll.getConsentPayload()),this.a_.setNPA(this.ll.isPersonalisedAdsAllowed()?0:1);const o=this.ll.getTrackableUser(),a=this.ll.isConsentConnatix()&&r?o:void 0;return this.a_.setUUID(a),this.a_.setNielsenSiteId(this._appSettings.bundleID),this.a_.setNielsenPlacementId(i),this.a_.setNielsenDeviceGrouping(this.dl.deviceType),this.a_.setNielsenOsGrouping(this.dl.os.os),this.a_.setNielsenUserId(a),this.a_.setNielsenPlatform(this.dl.isInApp),this.a_.setNielsenOsVersion(this.dl.os.osVersion),this.a_.setNielsenUOO(this.ll.isPersonalisedAdsAllowed()?0:1),this.a_.setNielsenTimestamp(),this.a_.setupMacros(t)}}var o=i(8659),a=i(4798),h=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let c=class{constructor(){this.c_=[],this.d_=new Map}saveAuctionPayload(t,e){const{requestId:i,demandPartnerId:s,placementId:n,userIds:r,bidCpms:o,costCpms:h,predictions:c}=t;this.c_.push({requestId:i,demandPartnerId:s,placementId:n,predictions:c,userIds:r,bidCpms:o,costCpms:h}),e.bids.forEach((e=>{const i=e.requestMetadata.data.cnxBidId;(0,a.QM)(i)&&(0,a.QM)(t.requestId)&&this.d_.set(i,t.requestId)}))}getAssertiveYieldOnImpression(t){const e=this.l_(t);if(!(0,a.$K)(e))return;const i=this.u_(e,t),s=e.bidCpms.map(((e,s)=>s===i?t.price:0));return this.d_.delete(t.settings.bidId),Object.assign(Object.assign({},e),{costCpms:s})}getAssertiveYieldProbability(t){const e=this.l_(t);if(!(0,a.$K)(e))return;const i=this.u_(e,t);return(0,a.$K)(e)&&e.predictions&&(0,a.$K)(i)?e.predictions[i]:void 0}l_(t){if(!(0,a.QM)(t.settings.requestMetadata.data.cnxBidId))return;const e=this.d_.get(t.settings.requestMetadata.data.cnxBidId);return this.c_.find((t=>t.requestId===e))}u_(t,e){var i;return null===(i=t.demandPartnerId)||void 0===i?void 0:i.indexOf(`${e.settings.adManagerLineItem.protoLineItem.demandPartnerId}`)}};c=h([(0,o.b2)(),(0,o.Yn)(o.Fw.ContainerScoped)],c);var d=i(2641);const l={[s.ProtoCreativeTypeEnum.External]:t=>t.floorPrice||t.customCpm,[s.ProtoCreativeTypeEnum.MediaFile]:t=>t.floorPrice||t.customCpm,[s.ProtoCreativeTypeEnum.ThirdParty]:t=>t.adxLookupPrice||t.floorPrice||t.customCpm||t.adxFloorPrice,[s.ProtoCreativeTypeEnum.HeaderBidder]:t=>t.prebidjsCPM,[s.ProtoCreativeTypeEnum.Rtb]:t=>(0,d.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.Tam]:t=>(0,d.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.TamDeal]:t=>(0,d.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.TamPrivateAuction]:t=>(0,d.RC)(t.obfuscatedPrice)};class u{static getBidPriceByCreative(t,e){return(0,l[t])(e)}}var p,f;!function(t){t.REQUEST_AD="requestAd",t.INIT_AD="initAd",t.START_AD="startAd",t.STOP_AD="stopAd",t.RESIZE_AD="resizeAd",t.PAUSE_AD="pauseAd",t.RESUME_AD="resumeAd",t.EXPAND_AD="expandAd",t.COLLAPSE_AD="collapseAd",t.SKIP_AD="skipAd",t.SET_AD_VOLUME="setAdVolume",t.DESTROY_AD="destroyAd"}(p||(p={})),function(t){t.REQUEST_SUCCESS="requestSuccess",t.AD_ERROR="adError",t.CLICK="click",t.LOADED="loaded",t.IMPRESSION="impression",t.STARTED="start",t.FIRST_QUARTILE="firstQuartile",t.MIDPOINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.ALL_ADS_COMPLETED="allAdsCompleted",t.DURATION_CHANGE="durationChange",t.PAUSED="pause",t.RESUMED="resume",t.STOPPED="stop",t.LINEAR_CHANGED="liniarChanged",t.SKIPPABLE_STATE_CHANGED="skippableStateChanged",t.SKIPPED="skip",t.VOLUME_CHANGED="volumeChange",t.USER_CLOSE="userclose",t.LOG="log"}(f||(f={}));var m=i(2859),g=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},v=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let y=class{constructor(){this.p_=!1,this.f_=[],this.m_=new m.Q}on(t,e){if(!this.p_&&t===p.REQUEST_AD){this.p_=!0;const t=1e3;this.f_.forEach((e=>{setTimeout((()=>{e()}),t)})),this.f_.length=0}this.m_.on(t,e)}publish(t,e){this.p_?this.m_.trigger(t,e):this.f_.push((()=>{this.publish(t,e)}))}remove(t,e){this.m_.remove(t,e)}removeAll(){this.m_.removeAll(),this.f_.length=0}};y=g([(0,o.b2)(),(0,o.Yn)(o.Fw.ContainerScoped),v("design:paramtypes",[])],y);class b{constructor(t,e){this.be=t,this.Ks=e,this.Mi=[]}subscribeToSdkEvent(t,e){const i=t=>{t.id===this.be&&e(t)};this.Mi.push((()=>{this.Ks.remove(t,i)})),this.Ks.on(t,i)}emitSdkEvent(t,e){this.Ks.publish(t,Object.assign(Object.assign({},e),{id:this.be}))}destroy(){this.Mi.forEach((t=>t())),this.Mi.length=0,this.emitSdkEvent(p.DESTROY_AD)}}var I=i(9069),w=i(3020);class P{static insertScript(t,e,i,s,n,r=!0,o){const a=this.g_.find((e=>e.src===t.src));if(a){const{onLoadCallbacks:t,onErrorCallbacks:e,wasOnLoadCalled:i}=a;if(t.push(s),e.push(s),!i)return;if(i)return void this.v_(a)}this.g_.push({src:t.src,wasOnLoadCalled:!1,onLoadCallbacks:[s],onErrorCallbacks:[n]}),(0,w.dZ)(t,e,i,(()=>this.y_(t)),(()=>this.He(t)),r,o)}static y_(t){const e=this.g_.find((e=>e.src===t.src));e.wasOnLoadCalled=!0,this.v_(e)}static He(t){const e=this.g_.find((e=>e.src===t.src)),i=this.g_.findIndex((e=>e.src===t.src));e.onErrorCallbacks.forEach((t=>{try{t()}catch(t){}})),this.g_.splice(i,1)}static v_(t){t.onLoadCallbacks.forEach((t=>{try{t()}catch(t){}})),t.onLoadCallbacks=[]}}P.g_=[];var T=i(9791),_=i(4261);const S={ImaObjectNotFound:I.RG.ImaObjectNotFound,ImaScriptFailure:I.RG.ImaScriptFailure},A="//imasdk.googleapis.com/js/sdkloader/ima3.js";class x{static preloadImaSdk(t){(0,w.b_)(A,t)}static fetchImaSdk(t,e,i){return new Promise(((s,n)=>{const r=x.I_(t);if(r)return void s(r);const o=e&&1===(0,T.Vm)([99,1]);P.insertScript({src:A},t.document.head,t,(()=>{const e=x.I_(t);e?s(e):(o&&(0,_.nF)({sessionId:i,message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:_.D_.CRITICAL},{throttle:2,shouldSendMaxLog:!1}),n(S.ImaObjectNotFound))}),(()=>{n(S.ImaScriptFailure)}),o,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")}))}static I_(t){return t.google&&t.google.ima}}var k=i(6716);class E{constructor(t){this.di=t,this.w_=null,this.P_=new k.x}start(){return this.__(),this}stop(){return this.S_(),this}onTimer(){return this.P_.asObservable()}destroy(){this.S_()}__(){null===this.w_&&(this.w_=this.di.setInterval((()=>{this.P_.next()}),500))}S_(){this.di.clearInterval(this.w_),this.w_=null}}var C=i(5139),O=i(5650);class L{static isLineItemAllowedByUserAudiences(t,e,i){const{advertiserAudienceTargetingCases:s,publisherAudienceTargetingCases:n,canUseConnatixDataGraph:r}=t.protoLineItem,o=this.A_(s,r,e,i),a=this.A_(n,r,e,i);return o&&a}static A_(t,e,i,s){return!(0,O.BZ)(t)||!(!e&&i)&&this.k_(t,s)}static k_(t,e){return t.some((t=>{const{audienceTargetingFilters:i}=t;return!!(0,O.BZ)(i)&&this.E_(i,e)}))}static E_(t,e=[]){return t.every((t=>{const i=t.audienceIdList;if(!(0,O.BZ)(i))return!1;const n=(0,O.tN)(i,e).length,r=i.length;switch(t.rule){case s.ProtoTargetingFilterEnum.IncludeAny:return n>0;case s.ProtoTargetingFilterEnum.IncludeAll:return n===r;case s.ProtoTargetingFilterEnum.ExcludeAny:return 0===n;case s.ProtoTargetingFilterEnum.ExcludeAll:return n!==r;default:return!1}}))}}var M,R,B=i(7916),D=i(7332);class N{static isLineItemTargetingAllowed(t,e,i,s){return N.isAllowedByViewability(t,e)&&N.isAllowedBySound(t,e)&&N.isAllowedByAdBreakType(t,e)&&N.isAllowedByMediaTargeting(t,e)&&N.isAllowedByPodTargeting(t,e)&&N.isAllowedByContextualTargeting(t,e,i)&&N.isAllowedByPlayerSizeTargeting(t,e)&&N.isAllowedByPlayerOrientationTargeting(t,e)&&N.isAllowedByJsQueryTargeting(t,e)&&N.isAllowedByAdTagInCaseOfExternal(t)&&N.isAllowedByUserAudiences(t,s)}static isBidTargetingAllowed(t,e,i,s){const n=t.getAdDuration(),{sessionMaxAdDuration:r,remainingAdDuration:o,maxAdDuration:a}=e.adBreakState,{adManagerLineItem:h,dimensions:c}=t.settings,{adType:d,nonlinearLineItemSettings:l}=h.protoLineItem;return N.isLineItemTargetingAllowed(h,e,i,s)&&N.isAllowedRegardingDuration(n,r)&&N.isAllowedRegardingDuration(n,o)&&N.isAllowedRegardingDuration(n,a)&&N.isDimensionsAllowedForNonLinearBanner(d,l,c,e)&&N.isAllowedByPageFocus(h,e)}static isAllowedByJsQueryTargeting(t,e){let i=!0;return t.protoLineItem.queryTargeting.filter((t=>t.rule===s.ProtoLineItemQueryTargetingRuleEnum.Only)).forEach((t=>{this.x_(t.keyValue,e.queryJsTargeting)||(i=!1)})),t.protoLineItem.queryTargeting.filter((t=>t.rule===s.ProtoLineItemQueryTargetingRuleEnum.Except)).forEach((t=>{this.x_(t.keyValue,e.queryJsTargeting)&&(i=!1)})),i}static x_(t,e){let i=!1;return Object.keys(e).forEach((s=>{e[s]===t[s]&&(i=!0)})),i}static isAllowedByAdTagInCaseOfExternal(t){return!t.protoLineItem.isExternal||((0,a.QM)(t.protoLineItem.adTag)||(0,a.QM)(t.protoLineItem.prebidJsBidParamsJSONString)||(0,a.QM)(t.protoLineItem.externalMediaFile)||(0,a.QM)(t.protoLineItem.externalHlsFile))}static isAllowedBySound(t,e){return!t.protoLineItem.sound||e.sound}static isAllowedByViewability(t,e){const i=e.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||i}static isAllowedByAdBreakType(t,e){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some((t=>{if(t.adRollType===e.adBreakState.adBreakType)return N.isAdBreakTypeAllowed(t.adBreakTypeEnum,e.adBreakState.isAdPodBreak)}))}static isAllowedByPageFocus(t,e){return!(t.protoLineItem.removeOutOfFocus&&!e.isPageInFocus)}static isAllowedByMediaTargeting(t,e){return!(t.protoLineItem.mediaIdTargeting&&!N.stringTargetingFiltering(e.media.mediaId,t.protoLineItem.mediaIdTargeting))&&(!(t.protoLineItem.mediaKeywordsTargeting&&!N.stringTargetingFiltering(e.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting))&&!(t.protoLineItem.mediaLanguageTargeting&&!N.stringTargetingFiltering(e.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting)))}static isAllowedByContextualTargeting(t,e,i){var s,n;const{advertiserContextualTargeting:r,publisherContextualTargeting:o}=t.protoLineItem,a=(null===(s=e.media.mediaInsights)||void 0===s?void 0:s.insights)||[],h=(null===(n=e.page.insights)||void 0===n?void 0:n.insights)||[];return!((0,O.BZ)(r)&&!N.isContextualTargetingValid(r,a,h))&&!((0,O.BZ)(o)&&!N.isContextualTargetingValid(o,a,h))}static isAllowedByPlayerSizeTargeting(t,e){const{playerSizeTargetings:i}=t.protoLineItem,{width:n}=e.adContainerState.get(t.protoLineItem.adType);return!(0,a.as)(i)||!(0,a.hj)(n)||(i.sizeChoiceCriteria===s.ProtoSizeChoiceCriteriaEnum.GreaterThan?!(0,a.hj)(i.minWidth)||n>=i.minWidth:i.sizeChoiceCriteria===s.ProtoSizeChoiceCriteriaEnum.SmallerThan?!(0,a.hj)(i.maxWidth)||n<=i.maxWidth:i.sizeChoiceCriteria!==s.ProtoSizeChoiceCriteriaEnum.Between||(!(0,a.hj)(i.maxWidth)||!(0,a.hj)(i.minWidth)||n>=i.minWidth&&n<=i.maxWidth))}static isAllowedByPlayerOrientationTargeting(t,e){const{playerOrientationTargeting:i}=t.protoLineItem;switch(i){case s.ProtoPlayerOrientationTargetingEnum.Landscape:if(e.playerOrientation===B.g.Portrait)return!1;break;case s.ProtoPlayerOrientationTargetingEnum.Portrait:if(e.playerOrientation===B.g.Landscape)return!1}return!0}static isAllowedByPodTargeting(t,e){var i;const n=null===(i=t.protoLineItem.adBreakSettings)||void 0===i?void 0:i.adPodTargeting;if(!n)return!0;if(!e.adBreakState.isAdPodBreak)return!0;const r=e.adBreakState.adPodSlotIndex;let o=!0;switch(n.adSlotTargetingType){case s.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(r<n.adSlotPositions[0]||r>n.adSlotPositions[1])&&(o=!1);break;case s.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===n.adSlotPositions.indexOf(r)&&(o=!1)}return n.targetingType===s.ProtoLineItemTargetingTypeEnum.Except&&(o=!o),o}static isAllowedByUserAudiences(t,e){return L.isLineItemAllowedByUserAudiences(t,e.isIdentityEnhanced,e.userAudienceIdList)}static isAllowedRegardingDuration(t,e){return!t||0===e||t<=e}static isDimensionsAllowedForNonLinearBanner(t,e,i,s){if(!(0,d.lZ)(t,null==e?void 0:e.nonLinearRequestType))return!0;const n=Math.ceil((0,D.Tc)(s.height,C.O.NON_LINEAR_MAX_HEIGHT_PERCENT));return!(!i||(null==i?void 0:i.width)>s.width||(null==i?void 0:i.height)>n)}static stringTargetingFiltering(t,e){if((0,O.BZ)(e.items)&&Array.isArray(t)){const i=(0,O.tN)(t,e.items).length;return e.choiceCriteria===s.ProtoChoiceCriteriaEnum.Only?i>0:0===i}const i=(0,O.d3)(t,e.items);return e.choiceCriteria===s.ProtoChoiceCriteriaEnum.Only?i:!i}static isAdBreakTypeAllowed(t,e){switch(t){case s.ProtoLineItemAdBreakTypeEnum.All:return!0;case s.ProtoLineItemAdBreakTypeEnum.AdPod:return e;case s.ProtoLineItemAdBreakTypeEnum.SingleAd:return!e}}static isContextualTargetingValid(t,e,i){return t.some((t=>N.isContextualTargetingCaseValid(t,e,i)))}static isContextualTargetingCaseValid(t,e,i){for(let n=0;n<t.filters.length;n++){const r=t.filters[n],o=r.hashedItemsIds,a=e.filter((t=>o.includes(t))).length,h=i.filter((t=>o.includes(t))).length,c=N.isContextualTargetingFilterValid(r.type,a,o),d=N.isContextualTargetingFilterValid(r.type,h,o);switch(r.level){case s.ProtoContextualTargetingLevelEnum.Media:if(!c)return!1;break;case s.ProtoContextualTargetingLevelEnum.Page:if(!d)return!1;break;case s.ProtoContextualTargetingLevelEnum.Both:if(!c||!d)return!1}}return!0}static isContextualTargetingFilterValid(t,e,i){switch(t){case s.ProtoTargetingFilterEnum.IncludeAny:if(0===e)return!1;break;case s.ProtoTargetingFilterEnum.IncludeAll:if(e!==i.length)return!1;break;case s.ProtoTargetingFilterEnum.ExcludeAny:if(e>0)return!1;break;case s.ProtoTargetingFilterEnum.ExcludeAll:if(e===i.length)return!1}return!0}}class F{}F.IMA_CORRELATOR_LENGTH=10,F.IMA_SCOR_LENGTH=10,function(t){t.DoesNotApply="0",t.Applies="1"}(M||(M={})),function(t){t.PersonalizedAds="0",t.NonPersonalizedAds="1"}(R||(R={}));var $=i(51);class V{constructor(t,e){this.ah=t,this.ll=e}static pm(t){return`${t.width}x${t.height}`}appendParams(t,e){if(!this.C_()||this.ah.isInApp)return t;const i=new URL(t);return i.searchParams.set("tfcd","0"),i.searchParams.set("gdfp_req","1"),i.searchParams.set("unviewed_position_start","1"),i.searchParams.set("env","vp"),i.searchParams.set("hl","en"),i.searchParams.set("sdk_apis","1,2"),i.searchParams.set("output","vast"),i.searchParams.set("correlator",String((0,T.Ae)(F.IMA_CORRELATOR_LENGTH))),i.searchParams.set("sid",(0,T.qs)()),i.searchParams.set("scor",String((0,T.Ae)(F.IMA_SCOR_LENGTH))),i.searchParams.set("url",this.O_()),i.searchParams.set("description_url",this.O_()),i.searchParams.set("sz",V.pm(e)),i.searchParams.set("gdpr",this.M_()),i.searchParams.set("npa",this.B_()),this.ll.isPersonalisedAdsAllowed()&&i.searchParams.set("gdpr_consent",this.R_()),i.href}C_(){return(0,a.QM)(this.ah.pageUrl)&&"true"===(0,$.Ph)("cnxImaTest",this.ah.pageUrl)}O_(){return(0,a.QM)(this.ah.pageUrl)?encodeURIComponent(this.ah.pageUrl):""}M_(){return this.ll.isConsentRequired()?M.Applies:M.DoesNotApply}R_(){return(0,a.QM)(this.ll.getConsentPayload())?this.ll.getConsentPayload():""}B_(){return this.ll.isPersonalisedAdsAllowed()?R.PersonalizedAds:R.NonPersonalizedAds}}},2641:(t,e,i)=>{"use strict";i.d(e,{RC:()=>T,pd:()=>_,aW:()=>r,qD:()=>n,mn:()=>m,ZN:()=>g,Bl:()=>I,AA:()=>v,OT:()=>c,lZ:()=>y,pi:()=>b,QP:()=>a,eu:()=>h});var s=i(9791);function n(t,e){t.sort(((t,e)=>t.width===e.width?t.bitrate-e.bitrate:t.width-e.width));for(let i=0;i<t.length;i++)if(t[i].width>=e)return t[i-1]||t[i];return t[t.length-1]}const r=()=>`cnx_bid_slot_${(0,s.qs)()}`;var o=i(7597);function a(t){const{adxLastLookParam:e,custParam:i,adxUprParam:n}=t,{adxFloorPrice:r,upr:o}=function(t){const{adxMinPrice:e,adxLastLookMinPrice:i,adxUprMinPrice:n,adxLastLookMaxPrice:r,adxUprMaxPrice:o,adxLastLookIncrementPrice:a}=t;if(e<=i)return{adxFloorPrice:i,upr:n};if(e>=r)return{adxFloorPrice:r,upr:o};if(e>=o)return{adxFloorPrice:Math.ceil(10*e)/10,upr:o};if(Number.isInteger(e))return{adxFloorPrice:e,upr:e};const h=(0,s.N_)(e);return{adxFloorPrice:h+a,upr:h}}(t);return i?`${i}&${e}=${r}&${n}=${o}`:`${e}=${r}&${n}=${o}`}function h(t,e){const i=(e>o.TW?o.TW:e).toFixed(2);return t?t.replace(o.o1,i):`${o.ut}=${i}`}function c(t,e,i){const s=e?t-t*e/100:t;return i?s*i/100:s}var d=i(289),l=i(6033),u=i(7423),p=i(4798);const f={[u.k.LINEAR]:[d.ProtoAdType.Video,d.ProtoAdType.Overlay],[u.k.NONLINEAR]:[d.ProtoAdType.Nonlinear]};function m(t,e){return t.filter((t=>f[e].includes(t.adType)))}function g(t,e){return t.find((t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===e)).adManagerLineItem}const v=({playerSkippability:t,playerSkipMin:e,playerSkipAfter:i,lineItemSkippability:s,lineItemSkipMin:n})=>{let r={skippable:!0,skipafter:i};switch(t){case d.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan:r=function({skippabitySettings:t,playerSkipMin:e,lineItemSkippability:i,lineItemSkipMin:s}){if(i===d.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan)s<e?t.skipmin=e:(t.skipmin=s,t.minDuration=s);else t.skipmin=e;return t}({skippabitySettings:r,playerSkipMin:e,lineItemSkippability:s,lineItemSkipMin:n});break;case d.ProtoPlayerSkippabilityType.RequireAdsToBeSkippable:s===d.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan&&(r.skipmin=n,r.minDuration=n)}return r};function y(t,e){return t===d.ProtoAdType.Nonlinear&&e===d.ProtoNonlinearRequestType.Banner}function b(t,e){return{adTag:(0,p.$K)(t.url)?t.url:e.adTag,requestCap:(0,p.$K)(t.contentRequestCap)?t.contentRequestCap:e.requestCap,impressionCap:(0,p.$K)(t.contentImpressionCap)?t.contentImpressionCap:e.impressionCap,resetRequestsCapTime:(0,p.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:e.resetRequestsCapTime,resetImpressionsCapTime:(0,p.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:e.resetImpressionsCapTime,resetCapType:(0,p.$K)(t.resetCapType)?t.resetCapType:e.resetCapType}}function I(t){const e=Object.keys(l.r.bidDemandTypeMap).filter((e=>(0,l.r.bidDemandTypeMap[e])(t.protoLineItem)))[0];if(!(0,p.$K)(e))return d.ProtoDemandTypeEnum.None;const i=Number.parseInt(e,10);return d.ProtoDemandTypeEnum[d.ProtoDemandTypeEnum[i]]}const w=2,P=41;function T(t){return(t+P)*w}function _(t){return t/w-P}},8532:(t,e,i)=>{"use strict";i.d(e,{Km:()=>r,Zr:()=>s,jJ:()=>n,n9:()=>o});const s={PlayerFloatChanged:"playerFloatChanged",FloatingEnterStart:"floatingEnterStart",FloatingEnterStop:"floatingEnterStop",FloatingExitStart:"floatingExitStart",FloatingExitStop:"floatingExitStop",CloseButtonClicked:"closeButtonClicked",CtaButtonClicked:"ctaButtonClicked",FullscreenButtonClicked:"fullscreenButtonClicked"},n={OmidViewabilityThreshold:"OmidViewabilityThreshold",OmidAdSessionStart:"omidAdSessionStart",OmidAdSessionFinish:"omidAdSessionFinish"},r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",ImpressionPrice:"impressionPrice",ImpressionRevenue:"impressionRevenue",SessionInView:"sessionInView",Bid:"bid",PrefetchStart:"prefetchStart"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),s),n),{AdOpportunity:"adOpportunity",AdLoaded:"adLoaded",AdStarted:"adStarted",AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdVolumeChange:"adVolumeChange",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"}),{Stopped:"stopped",Preroll:"preroll",Postroll:"postroll",Hidden:"hidden"});var o;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError",t.InvalidGUID="InvalidGUID"}(o||(o={}))},8576:(t,e,i)=>{"use strict";var s,n,r,o,a;i.d(e,{FX:()=>r,Ht:()=>h,Oc:()=>a,N_:()=>o,bS:()=>c,do:()=>n,lI:()=>s}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ETHERNET=1]="ETHERNET",t[t.WIFI=2]="WIFI",t[t.CELLULAR_UNKNOWN=3]="CELLULAR_UNKNOWN",t[t.CELLULAR_2G=4]="CELLULAR_2G",t[t.CELLULAR_3G=5]="CELLULAR_3G",t[t.CELLULAR_4G=6]="CELLULAR_4G",t[t.CELLULAR_5G=7]="CELLULAR_5G"}(r||(r={})),function(t){t.ETHERNET="ethernet",t.WIFI="wifi",t.CELLULAR="cellular"}(o||(o={})),function(t){t.CELLULAR_SLOW_2G="slow-2g",t.CELLULAR_2G="2g",t.CELLULAR_3G="3g",t.CELLULAR_4G="4g"}(a||(a={}));const h=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var c;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(c||(c={}))},1599:(t,e,i)=>{"use strict";var s;i.d(e,{Rp:()=>x,mr:()=>S,sN:()=>w,oV:()=>P,pT:()=>T,iu:()=>u,s6:()=>o,Gj:()=>r,Ig:()=>d,s_:()=>a,Ng:()=>l,QO:()=>f,ed:()=>p,jG:()=>v,F_:()=>g,p0:()=>A,vF:()=>c,Hs:()=>_,PK:()=>y,hQ:()=>b,Rq:()=>h}),function(t){t.XL="cnx-bp-xl-lit",t.LG="cnx-bp-lg-lit",t.MD="cnx-bp-md-lit",t.SM="cnx-bp-sm-lit",t.XS="cnx-bp-xs-lit"}(s||(s={}));const n=s;var r,o,a;!function(t){t.Invisible="cnx-mod-invisible",t.HovarableButton="cnx-ui-btn-hoverable",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.NoHeight="cnx-mod-no-height",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(r||(r={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdNonLinear="cnx-in-ad-non-linear",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.AdContainer="cnx-in-ad-container",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.PodLoadingScreen="cnx-in-pod-loading",t.AdShowCountdown="cnx-ad-show-countdown",t.CloseOn="cnx-close-on",t.CloseOff="cnx-close-off",t.CloseHover="cnx-close-hover",t.CloseFloatOn="cnx-close-float-on",t.CloseFloatOff="cnx-close-float-off",t.CloseFloatHover="cnx-close-float-hover",t.OutsidePlayerCloseButton="cnx-outside-close-button",t.UiInView="cnx-ui-in-view",t.ClickToPlayThumbnail="cnx-click-to-play-thumbnail",t.VideoWrapper="cnx-video-wrapper",t.PlayerFocused="cnx-focused",t.TabFocus="cnx-tab-focus",t.AdUserInteraction="cnx-ad-user-interaction",t.BottomButtonsContainer="cnx-ui-buttons",t.HeadButtonsContainer="cnx-ui-head-buttons",t.MuteWatermark="cnx-mute-watermark",t.HideOutsideContentFloatClose="cnx-content-floating-close-button-hidden"}(o||(o={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(a||(a={}));const h={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},c={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};n.XL,n.LG,n.MD,n.SM,n.XS;var d,l,u,p,f,m,g;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(d||(d={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(l||(l={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(u||(u={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(p||(p={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(f||(f={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(m||(m={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition",t.InstantTransitionClass="cnx-float-instant-transition",t.AlwaysFloating="cnx-always-floating",t.PinnedTopFloating="cnx-pinned-top-floating",t.PinnedFloating="cnx-pinned",t.PinnedBottomFloating="cnx-pinned-bottom-floating",t.PinnedWrapper="cnx-pinned-wrapper",t.ContentWrapper="cnx-content-wrapper",t.HidePinnedTitle="cnx-hide-pinned-title-in-ad",t.FloatingPositionLeft="cnx-float-position-left",t.FloatingPositionRight="cnx-float-position-right",t.FloatingPositionTop="cnx-float-position-top",t.FloatingPositionBottom="cnx-float-position-bottom"}(g||(g={}));const v={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var y,b,I;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(y||(y={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(b||(b={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(I||(I={}));const w={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},P="cnx-ratio",T="cnx-hide-video",_={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},S={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"},A={CloseButton:"cnx-ad-close-non-linear-button"},x={Wrapper:"cnx-a11y-status"}},3775:(t,e,i)=>{"use strict";var s;i.d(e,{b:()=>s}),function(t){t.GarbageCollector="data-cnx-gc",t.ContextMenuSettings="cnx-ui-cm-settings"}(s||(s={}))},7945:(t,e,i)=>{"use strict";i.d(e,{g:()=>s,x:()=>n});const s=JSON.parse('{"version":427132,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),n=!0},5227:(t,e,i)=>{"use strict";var s,n;i.d(e,{Uh:()=>n,Xh:()=>s,dP:()=>r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={})),function(t){t.UserInteraction="userInteraction",t.GeneralUserInteraction="generalUserInteraction",t.CanStart="canStart",t.Destroy="destroy"}(n||(n={}));const r={StateChanged:"stateChanged"}},9022:(t,e,i)=>{"use strict";i.d(e,{$b:()=>h,f3:()=>n,fJ:()=>o,kd:()=>a,xs:()=>r});var s=i(289);const n=31,r={[s.ProtoAdType.Video]:2e3,[s.ProtoAdType.Overlay]:1e3,[s.ProtoAdType.Nonlinear]:1e3},o=.5,a="connatix.com",h="Advertisement"},8211:(t,e,i)=>{"use strict";i.d(e,{M:()=>r,a:()=>n});var s=i(289);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux",t.IPadOS="ipados"}(r||(r={}))},307:(t,e,i)=>{"use strict";i.d(e,{Fk:()=>n,Kp:()=>o,a8:()=>a,br:()=>s,cc:()=>r,ym:()=>h});const s="https://info.connatix.com/",n="v",r="tier",o="pid",a="sid",h="cid"},1509:(t,e,i)=>{"use strict";var s;i.d(e,{n:()=>s}),function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(s||(s={}))},9357:(t,e,i)=>{"use strict";i.d(e,{T9:()=>s,Y0:()=>a,p7:()=>n,s_:()=>o,ti:()=>h,uD:()=>r});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,o=1e3,a=60,h=864e5},9490:(t,e,i)=>{"use strict";var s,n,r,o,a;i.d(e,{Ez:()=>r,L5:()=>o,Qg:()=>l,T$:()=>a,XQ:()=>h,ZH:()=>n,gQ:()=>d,se:()=>c,wB:()=>s}),function(t){t.Play="play",t.Playing="playing",t.Pause="pause",t.Mute="mute",t.Unmute="unmute",t.Canplay="canplay",t.Ended="ended",t.Timeupdate="timeupdate",t.Seeking="seeking",t.Seeked="seeked",t.Volumechange="volumechange",t.Durationchange="durationchange",t.Fullscreen="fullscreen",t.LoadedData="loadeddata",t.LoadedMetadata="loadedmetadata",t.Error="error",t.BufferProgress="progress"}(s||(s={})),function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(n||(n={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported",t[t.InCuePoint=12]="InCuePoint"}(r||(r={})),function(t){t.H264="h264",t.Hevc="hevc"}(o||(o={})),function(t){t.PlayError="playError",t.NewVideo="newVideo",t.Buffering="buffering",t.Buffered="buffered",t.LevelSwitching="levelSwitching",t.LevelSwitched="levelSwitched",t.EndOfStream="endOfStream",t.LiveStreamNotPlayable="liveNotPlayable",t.DurationUpdate="DurationUpdate"}(a||(a={}));const h={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};var c;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(c||(c={}));const d=720,l=5e3},4151:(t,e,i)=>{"use strict";var s;i.d(e,{q:()=>s}),function(t){t[t.Collapse=0]="Collapse",t[t.Expand=1]="Expand"}(s||(s={}))},7423:(t,e,i)=>{"use strict";var s;i.d(e,{k:()=>s}),function(t){t.LINEAR="LINEAR",t.NONLINEAR="NONLINEAR"}(s||(s={}))},6027:(t,e,i)=>{"use strict";i.d(e,{e:()=>a,j:()=>s});var s,n=i(9791);class r{}r.clientAb0=(0,n.Vm)([0,0,0,0,50,50]),r.clientAb1=(0,n.Vm)([0,50,50]),r.clientAb2=0,r.clientAb3=0,r.clientAb4=0,r.clientAb5=0;class o{}o.clientAb0=(0,n.Vm)([0,0,0,0,50,50]),o.clientAb1=(0,n.Vm)([0,50,50]),o.clientAb2=0,o.clientAb3=0,o.clientAb4=0,o.clientAb5=0,function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(s||(s={}));class a{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static get clientAb2(){return this.getABValueForKey("clientAb2")}static get clientAb3(){return this.getABValueForKey("clientAb3")}static get clientAb4(){return this.getABValueForKey("clientAb4")}static get clientAb5(){return this.getABValueForKey("clientAb5")}static getABValueForKey(t){return this.abServiceType===s.PlayspaceABService?o[t]:r[t]}static setClientAb0(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb0=t;else r.clientAb0=t}static setClientAb1(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb1=t;else r.clientAb1=t}static setClientAb2(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb2=t;else r.clientAb2=t}static setClientAb3(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb3=t;else r.clientAb3=t}static setClientAb4(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb4=t;else r.clientAb4=t}static setClientAb5(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb5=t;else r.clientAb5=t}}},2450:(t,e,i)=>{"use strict";i.d(e,{$:()=>h});var s=i(289);const n="ats-liveramp-envelope-request";var r=i(9791),o=i(4798),a=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class h{static getEnvelopeFromParentAts(t){var e;return a(this,void 0,void 0,(function*(){if(!(null===(e=h.envelope)||void 0===e?void 0:e.envelope))try{const e=yield this.V_(t);return(0,o.$K)(e)?void(h.envelope=JSON.parse(e)):void h.communicateViaPostMessage(t)}catch(t){}}))}static V_(t){return a(this,void 0,void 0,(function*(){if(t.ats){try{return t.ats.retrieveEnvelope().then((t=>t))}catch(t){}return this.retrieveEnvelopeWithCallback(t)}}))}static retrieveEnvelopeWithCallback(t){return a(this,void 0,void 0,(function*(){return new Promise((e=>{t.ats.retrieveEnvelope((t=>{e(t)}))}))}))}static communicateViaPostMessage(t){h.dispatchEnvelopeRequestEvent(t),h.addEnvelopeListener()}static dispatchEnvelopeRequestEvent(t){try{t.postMessage(n,"*")}catch(e){void 0!==t.contentWindow&&t.contentWindow.postMessage(n,"*")}}static receiveEnvelopeListener(t){t&&t.data&&"ats-liveramp-envelope-result"===t.data.message&&t.data.result&&(h.envelope=JSON.parse(t.data.result),window.removeEventListener("message",h.receiveEnvelopeListener))}static addEnvelopeListener(){window.addEventListener("message",h.receiveEnvelopeListener,!1)}static getEnvelopeWithConsent(t,e){return new Promise(((i,s)=>{e.isConsentConnatix()?h.getEnvelopeFromParentAts(t).then((()=>{var t;(null===(t=h.envelope)||void 0===t?void 0:t.envelope)?i(h.envelope.envelope):setTimeout((()=>s()),500)})):setTimeout((()=>s()),500)}))}static getEnvelope(t,e){return a(this,void 0,void 0,(function*(){yield(0,r.Up)((()=>h.getEnvelopeWithConsent(t,e))).catch((()=>{}))}))}static setEnvelopeStatus(t){h.envelopeStatus=t}static getValidEnvelope(){var t;return(null===(t=h.envelope)||void 0===t?void 0:t.envelope)&&h.envelopeStatus===s.LiveRampEnvelopeStatusEnum.Ok?h.envelope.envelope:null}static wasRequestEnhanced(t){var e;return(null===(e=h.envelope)||void 0===e?void 0:e.envelope)&&t===s.LiveRampEnvelopeStatusEnum.Ok}static destroy(){h.envelope=null}}h.envelope=null,h.envelopeStatus=s.LiveRampEnvelopeStatusEnum.Ok},9710:(t,e,i)=>{"use strict";i.d(e,{tt:()=>l});var s=i(3),n=i(4336);const r=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],o="cnxtestadblock";var a=i(9906),h=i(9791),c=i(4798),d=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class l{static get isBannerBlocked(){return this.j_}static onAdBlockerDetected(){return this.U_.asObservable()}static detectUsingCSS(t){try{let e=!1;t.document.body.insertAdjacentHTML("beforeend",this.q_(t));const i=t.document.getElementById(o);return 0!==i.getBoundingClientRect().height&&0!==i.getBoundingClientRect().width||(e=!0),t.document.body.removeChild(i),this.H_(e),e}catch(t){return this.H_(!1),!1}}static detectUsingScript(){return d(this,void 0,void 0,(function*(){return new Promise((t=>{const e=(0,h.pE)(window).topFrame,i=e=>{this.U_.next(e),this.U_.complete(),t(e)},s=()=>(0,c.QM)(e.googletag.getVersion())?i(!1):i(!0);e.googletag&&i(!1);a.h.getGlobalContainer().resolve(n.fs).fetchGoogleTag().then((()=>{var t;e.googletag?null===(t=e.googletag.cmd)||void 0===t||t.push(s):i(!0)})).catch((()=>{i(!0)}))}))}))}static H_(t){this.j_=t,this.j_&&(this.U_.next(!0),this.U_.complete())}static q_(t){const e=t.location.hostname.toLowerCase().indexOf("aljazeera.net")>-1;let i=[...r];e&&(i=i.filter((t=>"text-ads"!==t&&"text-ad-links"!==t)));const s=i.join(" ");return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${o}" class="${s}"></div>`}}l.j_=null,l.U_=new s.t(1)},7129:(t,e,i)=>{"use strict";var s;!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.viewableImpression="viewableImpression",t.postbid="postbid",t.initAd="initAd",t.request="request",t.startAd="startAd",t.adVerification="adVerification"}(s||(s={}))},9741:(t,e,i)=>{"use strict";i.d(e,{S:()=>s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.playerDestroyed=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,e)=>!!(s.logCount[t]&&s.logCount[t]>e),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},5742:(t,e,i)=>{"use strict";i.d(e,{f:()=>n});var s=i(307);class n{static getCidKeyValueObject(){return!!this.customerId&&{[s.ym]:this.customerId}}static getCidForElkTracking(){return this.customerId?this.customerId:""}}n.customerId=null},8395:(t,e,i)=>{"use strict";i.d(e,{f:()=>d});var s=i(8843),n=i(6196);var r,o=i(8659),a=i(4261),h=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},c=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let d=r=class{constructor(){var t,e;this.J_=new Map,this.z_=0,this.W_=(void 0===(t=r.TIME_BETWEEN_TICKS)&&(t=0),void 0===e&&(e=s.z),t<0&&(t=0),(0,n.H)(t,t,e)),this.W_.subscribe((()=>this.Y_()))}setTimeout(t,e=0){return this.X_(t,e,!0)}clearTimeout(t){this.J_.delete(t)}setInterval(t,e=0){return this.X_(t,e,!1)}clearInterval(t){this.J_.delete(t)}Q_(t){try{t.callback()}catch(t){(0,a.nF)({message:"TimerService_error",callStack:t.stack,exception:t.message,level:a.D_.INFO},{throttle:1})}}Y_(){const t=(new Date).getTime(),e=[];for(const[i,s]of this.J_)t-s.startTime<s.duration*(s.intervalTimesCalled+1)||(this.Q_(s),s.isTimeout?e.push(i):s.intervalTimesCalled++);for(const t of e)this.J_.delete(t)}X_(t,e,i){const s=++this.z_;return this.J_.set(s,{startTime:(new Date).getTime(),isTimeout:i,callback:t,duration:e,intervalTimesCalled:0}),s}};d.TIME_BETWEEN_TICKS=100,d=r=h([(0,o.ri)(),c("design:paramtypes",[])],d)},6115:(t,e,i)=>{"use strict";var s,n;i.d(e,{B:()=>n,q:()=>s}),function(t){t.NoLineItem="No line item",t.MetadataInvalid="Metadata invalid",t.AdAlreadyStarted="Ad already started",t.NoSupportForCreativeType="Only js api defined creatives can be updated",t.AdManagerNotInitialized="Ad manager not initialized",t.LineItemCantBeCalled="Ad can not be called do to no player state",t.Unknown="The line item could not be updated"}(s||(s={})),function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(n||(n={}))},7916:(t,e,i)=>{"use strict";var s;i.d(e,{g:()=>s}),function(t){t[t.None=0]="None",t[t.Portrait=1]="Portrait",t[t.Landscape=2]="Landscape"}(s||(s={}))},9223:(t,e,i)=>{"use strict";var s,n,r;i.d(e,{PE:()=>n,ei:()=>s,rU:()=>r}),function(t){t.absolute="absolute",t.relative="relative"}(s||(s={})),function(t){t.auto="auto",t.all="all"}(n||(n={})),function(t){t.AllowForms="allow-forms",t.AllowModals="allow-modals",t.AllowPointerLock="allow-pointer-lock",t.AllowPopups="allow-popups",t.AllowPopupsToEscapeSandbox="allow-popups-to-escape-sandbox",t.AllowSameOrigin="allow-same-origin",t.AllowScripts="allow-scripts",t.AllowTopNavigation="allow-top-navigation",t.AllowTopNavigationByUserActivation="allow-top-navigation-by-user-activation"}(r||(r={}))},5935:(t,e,i)=>{"use strict";i.d(e,{X:()=>d});var s=i(9528),n=i(8576),r=i(8211),o=i(9791),a=i(51),h=i(2728),c=i(4798);class d{constructor(t){this.Qs=t,this.K_=100,this.Z_=(0,o.pE)(window).topFrame,this.tT=r.a.indexOf(this.Qs.browser.device)>-1,this.Go=(0,o.dz)(),this.eT={browserType:this.iT(),browserVersion:this.Qs.browser.browserVersion},this.xn=this.nT(),this.rT=s.EN.fromProtoGetDeviceType(this.Qs.browser.device),this.oT=this.pageUrl.substr(0,this.K_),this.Sr=(0,a.ge)(this.oT),this.aT=(0,a.FM)(this.oT)}iT(){let t;return Object.keys(n.lI).forEach((e=>{this.Qs.browser.browserType.toLowerCase().includes(n.lI[e])&&(t=n.lI[e])})),t}nT(){let t,e=0;const i=this.Qs.browser.osCode.split("_"),s=i[0].toLowerCase();return Object.keys(r.M).forEach((e=>{s.includes(r.M[e])&&(t=r.M[e])})),t===r.M.IPadOS&&(t=r.M.Ios),i.length>1&&(e=parseFloat(`${i[1]||0}.${i[2]||0}`)),{os:t,osVersion:e}}get device(){return this.Qs.browser.device}get browser(){return this.eT}get os(){return this.xn}get deviceType(){return this.rT}get geoLocation(){return this.Qs.geoLocation}get pageUrl(){return this.Qs.pageUrl||""}get sessionId(){return this.Qs.sessionId}get pageUrlTrunc(){return this.oT}get pageDomain(){return this.Sr}get pageDomainFullPath(){return this.aT}get isMobile(){return this.tT}get isInApp(){return(0,c.QM)(this.Qs.bundleID)}get isAmp(){return this.Qs.isAmp}get playerId(){return this.Qs.playerId}get appId(){return this.Go}get bundleID(){return(0,c.QM)(this.Qs.iOSAppID)?this.Qs.iOSAppID:this.Qs.bundleID}get domainURL(){return this.Qs.domainURL}get storeURL(){return this.Qs.storeURL}get explorationMode(){return this.Qs.explorationMode}get appName(){return this.Qs.appName}get appCategories(){return this.Qs.appCategories}get appVersion(){return this.Qs.appVersion}get sdkVersion(){return this.Qs.sdkVersion}get appPrivacyPolicy(){return this.Qs.appPrivacyPolicy}get appIsPaid(){return this.Qs.appIsPaid}get topWindow(){return this.Z_}get appPageURL(){return this.Qs.appPageURL}get isOVPDomain(){return this.Qs.isOVPDomain}get canUseExternalAdService(){return this.Qs.canUseExternalAdService||h.$.canUseNativeImaSdk(this.Qs.sdkVersion)}}},7597:(t,e,i)=>{"use strict";i.d(e,{$w:()=>c,Eg:()=>n,FH:()=>o,P8:()=>r,Ro:()=>s,TW:()=>f,o1:()=>p,qx:()=>d,rU:()=>l,ut:()=>u,wF:()=>h,zt:()=>a});const s="1d73d9ef-fa29-4c16-bad5-82002c247b60",n="4692b5d8-dc46-4a86-a548-511a24809ca8",r=.1,o=1,a=39.9,h="last_look",c=1,d=39.5,l="upr",u="cnxbid",p="[CNX_BEST_BID]",f=50.99},5106:(t,e,i)=>{"use strict";var s;i.d(e,{m:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds",t[t.InImpression=2]="InImpression",t[t.LinearDemandMissing=3]="LinearDemandMissing",t[t.ForceDisable=4]="ForceDisable",t[t.AdContentDurationRatioElapsed=5]="AdContentDurationRatioElapsed",t[t.StayNextButtonsDisplayed=6]="StayNextButtonsDisplayed"}(s||(s={}))},7994:(t,e,i)=>{"use strict";i.d(e,{C:()=>s});class s{constructor(){this.kT=!1,this.promise=new Promise(((t,e)=>{this.ET=t,this.xT=e}))}CT(){this.kT||(this.kT=!0)}resolve(t){this.CT(),this.ET(t)}reject(t){this.CT(),this.xT(t)}get isPending(){return!this.kT}}},6299:(t,e,i)=>{"use strict";i.d(e,{P:()=>h});var s,n=i(289);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const r={[n.ProtoDeviceType.Desktop]:s.Desktop,[n.ProtoDeviceType.Smartphone]:s.Smartphone,[n.ProtoDeviceType.Tablet]:s.Tablet,[n.ProtoDeviceType.GameConsole]:s.GameConsole,[n.ProtoDeviceType.SmartTV]:s.SmartTV,[n.ProtoDeviceType.WearableComputer]:s.Unrecognized,[n.ProtoDeviceType.PDA]:s.Unrecognized,[n.ProtoDeviceType.Unrecognized]:s.Unrecognized},o="cnx_fraud_sensor";var a=i(4798);class h{constructor(t,e,i,s){this.MT=t,this.BT=e,this.RT=i,this.DT(s)}addFraudSensorScript(){if(this.BT.getElementById(o))return;const t={id:o,src:this.MT.setupMacros("https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[FS_DEVICE_IDENT]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]")};this.BT.insertScript(t,null,"FraudSensor_script_error")}DT(t){t=(0,a.QM)(t)?t:"00000000-0000-0000-0000-000000000000";const{lookupId:e,lookupResponseCode:i,deviceIdentifier:s}=this.RT,n=r[this.RT.deviceType];this.MT.setUserId(t),this.MT.setFraudSensorMacros({lookupId:e,lookupResponseCode:i,deviceType:n,mediaType:2,deviceIdentifier:s})}}},1828:(t,e,i)=>{"use strict";i.d(e,{o:()=>g});var s=i(5204),n=i(3020);const r="cnxProxyTask",o=`\n    window.${r} = function(task) {\n        setTimeout(function(){\n            task();\n        }, 0);\n    }\n`;class a{static executeAsync(t,e){this.iS(t)(e)}static sS(t){return!!t[r]}static iS(t){return this.sS(t)||this.nS(t),t[r]}static nS(t){const e=t.document.head;(0,n.ML)(e,t,o)}}var h,c=i(9223),d=i(862),l=i(9906),u=i(5650),p=i(9791),f=i(4261),m=i(4798);!function(t){t.errorIframe="Error creating iframe"}(h||(h={}));class g{constructor(t,e,i){this.Re=t,this.De=e,this.rS=i}oS(t,e,i){let s=!1;return n=>{n.contentWindow&&!s&&(s=!0,this.aS(n,this.hS(t,e),i))}}cS(t,e,i,s,n,r,o,a,h,c,d=!0,l="",u,p=""){return this.dS(t,this.oS(e,i,s),n,r,o,a,h,c,d,l,u,p)}dS(t,e,i=c.ei.absolute,s=c.PE.auto,r,o,a,h,d=!0,l="",p,f=""){const g=this.Re.createElement("iframe",a);let v="100%",y="100%";return(null==h?void 0:h.scalable)?(v=h.scalable.maxHeightPercent+"%",y=h.scalable.maxWidthPercent+"%"):(null==h?void 0:h.width)&&(null==h?void 0:h.height)&&(v=h.height+"px",y=h.width+"px"),(0,m.QM)(l)&&(0,n.cn)(g,l),r&&(g.title=r),f&&(g.id=f),g.allow="autoplay",g.src="javascript:false",g.srcdoc="",g.width=y,g.height=v,g.style.position=i,g.style.left="0",g.style.top="0",g.style.margin="0px",g.style.padding="0px",g.style.border="0px",g.style.width=y,g.style.height=v,g.style.pointerEvents=s,d||(g.style.display="none"),g.setAttribute("SCROLLING","NO"),null==o||o.forEach((t=>{g.setAttribute(t.key,t.value)})),g.onload=()=>{e(g)},p&&p.isEnabled&&((0,u.BZ)(p.permissions)?g.setAttribute("sandbox",p.permissions.join(" ")):g.setAttribute("sandbox",""),g.setAttribute("allow","autoplay")),t.appendChild(g),e(g),g}aS(t,e,i){const s=(0,n.LT)(t);a.executeAsync(s,(()=>{try{const i=t.contentWindow&&t.contentWindow.document;i.open(),i.write(e)}catch(e){this.lS(t,e),t=null}i(t)}))}hS(t,e){return Object.keys(e).forEach((function(i){const s="object"==typeof e[i]?JSON.stringify(e[i]):e[i];t=t.replace(new RegExp(`{{${i}}}`,"g"),s)})),t}loadIframe(t){const e='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',i="cnx-iframe_"+(0,p.qs)();return new Promise(((n,r)=>{const o=e=>{if(null===e)return void r(h.errorIframe);const o=t=>{let s;try{s=JSON.parse(t.data)}catch(t){return}s.id===i&&(e.contentWindow?(e.contentWindow.document.close(),e.contentWindow.removeEventListener("message",o),n({iframe:e})):r("The Iframe is no longer in the DOM"))};try{if(e.contentWindow.addEventListener("message",o),!t.customReportingLog)return;const{advertiserLineItemId:i,heavyAdBlockTypeEnum:n}=t.customReportingLog,r=l.h.getSessionChildContainer(this.De).resolve(s.k);this.uS=new d.Z(this.fS.contentWindow,{advertiserLineItemId:i,heavyAdBlockTypeEnum:n},r)}catch(t){this.lS(e,t),r("Iframe callback error")}};try{this.fS=this.cS(t.container,e,{iframeID:i},o,t.iframePosition,t.iframePointerEvents,t.title,t.customIframeAttributes,this.rS,t.iframeCustomDimensions,t.visible,t.iframeClass,t.sandboxSettings,t.iframeId)}catch(t){(0,f.nF)({message:"IframeLoader_error_creating_iframe",level:f.D_.WARN,exception:t.message,callStack:t.stack,sessionId:this.De})}}))}get iframe(){return this.fS}destroy(){var t;try{null===(t=this.uS)||void 0===t||t.destroy(this.De),this.fS=null}catch(t){const{message:e,stack:i}=(0,p.W$)(t);(0,f.nF)({level:f.D_.WARN,message:"IframeLoader_destroy",exception:e,callStack:i,sessionId:this.De})}}lS(t,e){this.Re.isDetachedFromDOM(t)?(0,f.nF)({message:"iframeLoader_(inDom_false)",exception:e.message,callStack:e.stack,level:f.D_.WARN,sessionId:this.De},{shouldSendMaxLog:!1,throttle:1}):(0,f.nF)({message:"iframeLoader_(inDom_true)",exception:e.message,callStack:e.stack,level:f.D_.WARN,sessionId:this.De},{shouldSendMaxLog:!1,throttle:1}),(0,n.bX)(t)}}},3360:(t,e,i)=>{"use strict";i.d(e,{Q:()=>o});var s=i(6153),n=i(7332),r=i(4798);class o{static getScaledImageUrl(t,e,i,s,a){if(t&&!(0,n.ON)({width:e,height:i}))return(0,r.r)(a)&&(e=(0,n.Tc)(e,a),i=(0,n.Tc)(i,a)),s.appendParamsToUrl(`${t}${o.getScaledImageQueryParams(e,i)}`.trim())}static getScaledImageQueryParams(t,e,i=!0){if((0,n.ON)({width:t,height:e}))return"";return`?width=${t}&height=${e}&fit=bounds${i?"&format=jpeg":""}`}static getSmartCroppedImageUrl(t,e,i,a){return(0,r.QM)(t)||(t=s.n.endPoints.base.image),(0,n.ON)({width:e,height:i})&&(e=140,i=80),a.appendParamsToUrl(`${t}${o.getSmartCroppedImageQueryParams(e,i)}`)}static getSmartCroppedImageQueryParams(t,e){const i=this.thumbnailQuality>=1&&this.thumbnailQuality<=100?this.thumbnailQuality:60;return(0,n.ON)({width:t,height:e})?"":`?crop=${t}:${e},smart&width=${t}&height=${e}&quality=${i}&fit=crop`}static getDefaultPoster(t){const e=`${s.n.endPoints.base.image}default_video_poster.svg`;return t.appendParamsToUrl(e)}}o.thumbnailQuality=60},8049:(t,e,i)=>{"use strict";i.d(e,{a:()=>pt});var s=i(4975),n=i(4727),r=i(5419),o=i(289),a=i.n(o),h=i(7953),c=i.n(h),d=i(5675),l=i(6375),u=i(6628),p=i(8041),f=i(5530),m=i(8102),g=i(6029),v=i(2979),y=i(942),b=i(7298),I=i(9005),w=i(9107),P=i(1968),T=i(8532),_=i(1599),S=i(7945),A=i(5227),x=i(307),k=i(6027),E=i(9710),C=i(9741),O=i(5935),L=i(6299),M=i(7745),R=i(5701),B=i(4701),D=i(604),N=i(3326),F=i(9906),$=i(6661),V=i(6153),j=i(384),U=i(5687),q=i(6666),H=i(1992),J=i(7187),G=i(4474),z=i(5292),W=i(5421),Y=i(1553),X=i(5445),Q=i(5650),K=i(2701),Z=i(3020),tt=i(9791),et=i(51),it=i(4261),st=i(9600),nt=i(3003),rt=i(4798),ot=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};const at="player_instance",ht=",",ct=3,dt="google_ads_iframe",lt=["googlesyndication.com","googleads.g.doubleclick"],ut=["partner.googleadservices","admanager.google"];class pt extends R.tt{constructor(t,e,i,s,n,r,o=null,a=Date.now()){super(),this.services=t,this.GLOBAL=e,this.mS=i,this.gS=s,this.vS=n,this.readyCallback=r,this.yS=o,this.wS=a,this.PS=!1,this._S=!1,this.TS={},this.SS="<cnx-placeholder></cnx-placeholder>",this.AS=100,this.kS=1e3,this.ES=700,this.xS=[],this.PLAYER_REQUEST_RETRIES_NUMBER=2,this.isServerlessMode=!1,this.CS=!1,this.OS=[],F.h.getGlobalContainer().resolve(m.c).loadCookieDeprecationLabel(e),E.tt.detectUsingCSS(this.GLOBAL),this.MS=(0,tt.YY)(this.LS(),this.ES),this.BS=(0,Z.sw)(this.GLOBAL)}initUrlSuffixer(t){const e=new Y.f;if(t.bandwidthLoggingState===o.ProtoBandwidthLoggingEnum.Disabled)return e;const i=this.RS(t);return e.setUrlParams({domain:V.n.bundleDomain,urlParams:[(0,nt.IS)(i,t.playerId)]}),e}DS(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(t.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(t.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}FS(){if(!(0,rt.QM)(this.queryParams.cnxFeatureFlags))return;const t=this.queryParams.cnxFeatureFlags.split(","),e={};return t.forEach((t=>e[t]=!0)),e}VS(t){const e=this.GLOBAL.frameElement;if(!(0,Z.GF)(e))return;let i=!0;e&&t&&(i=!1),i?(0,Z.MV)(e):(0,Z.Ho)(e)}jS(t,e){try{return this.$S(t,e)}catch(t){return null}}qS(t){let e;try{e=eval(t)}catch(i){e=t.replace(/\[(\d+)]/g,":nth-child($1)")}return e}HS(t,e){const i=this.jS(t,e);return null===i?new Promise((i=>{setTimeout((()=>{i(this.HS(t,e))}),this.AS)})):Promise.resolve(i)}JS(t,e){const i=this.qS(t);return Promise.resolve(this.HS(i,e))}$S(t,e){let i;return t.split(/(\.cnxEq\(\d+\))/).filter((t=>t)).forEach((t=>{i=t.includes("cnxEq")?this.GS(i,t):i?i.querySelectorAll(t):(0,Z.Wb)(t,e)})),i?(i.hasOwnProperty("length")&&(i=i.length>0?i[0]:null),i):null}GS(t,e){const i=/\d+/g.exec(e),s=parseInt(i[0],10);return s>t.length?(0,Q.Sz)(t)[t.length-1]:(0,Q.Sz)(t)[s]}zS(){return(0,Q.BZ)(this.services.StandaloneService.standaloneLineItemsWithBids)?o.ProtoImplementationType.Standalone:this.gS?o.ProtoImplementationType.Amp:o.ProtoImplementationType.Web}WS(){return ut.some((t=>{var e;return null===(e=this.pageUrl)||void 0===e?void 0:e.includes(t)}))}YS(){let t=window,e=!1,i=j.K.None;try{for(;t.parent.document!==t.document;){if(e=this.QS(t),e){i=j.K.Friendly;break}t=t.parent}}catch(s){e=this.KS(t),e&&(i=j.K.Safe)}return{isInGamIframe:e,gamIframeType:i}}ZS(){return this.PS?{isInGamIframe:!0,gamIframeType:j.K.Safe}:this.YS()}KS(t){return lt.some((e=>{var i;return null===(i=null==t?void 0:t.location)||void 0===i?void 0:i.href.includes(e)}))}QS(t){var e;return!!(null===(e=null==t?void 0:t.frameElement)||void 0===e?void 0:e.id.includes(dt))}tA(t,e){const i=(0,tt.pE)(this.GLOBAL);this.PS=this.WS();const{isInGamIframe:s}=this.ZS();let n;return this._S=s,n=(0,rt.$K)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:e.forceInsertPath,new Promise(((s,r)=>{let o=(0,Z.G$)(this.SS,this.GLOBAL);if(n||t.tag.parentNode===this.GLOBAL.document.head&&(!i.topChildFrame||e.renderInFrame)){let t,n,r;i.topChildFrame&&(0,Z.IV)(i.topChildFrame.frameElement,_.Gj.DisplayNone),t=(0,rt.QM)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:e.containerSelector,n=(0,rt.$K)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:e.insertPosition,r=(0,rt.$K)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:e.position,this.JS(t,i.topFrame).then((t=>{this.iA(t,o,n,r),s({insertContainer:o,insertWindow:i.topFrame})}))}else i.topChildFrame&&!e.renderInFrame?(o=(0,Z.G$)(this.SS,i.topFrame),i.topChildFrame.frameElement.parentNode.insertBefore(o,i.topChildFrame.frameElement),(0,Z.cn)(i.topChildFrame.frameElement,_.Gj.DisplayNone),s({insertContainer:o,insertWindow:i.topFrame})):(t.tag.parentNode.insertBefore(o,t.tag),s({insertContainer:o}))}))}sA(t,e,i){(0,Z.IS)(e,t,i)}nA(t,e,i){switch(i){case o.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(e,t);break;case o.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(e,t),(0,Z.bX)(t);break;case o.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(e,t),(0,Z.MV)(t);break;case o.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(e,t.nextElementSibling):t.parentElement.appendChild(e)}}iA(t,e,i,s){i===o.ProtoPlayerInsertMode.WithinContainer?this.sA(t,e,s):this.nA(t,e,i)}rA(t,e=[]){t.lineItems=[...t.lineItems,...e];const i=t.lineItems.length;t.lineItems=(0,Q.qy)("advertiserLineItemId",t.lineItems),i!==t.lineItems.length&&(0,it.nF)({level:it.D_.WARN,message:"Loader_duplicated_adsources",callStack:"_",extra:this.yS})}oA(t,e){var i,s,n,r,a;const h=t.players[e],{sessionId:c}=h,{playerModel:d,globalDomUtilsService:u,urlSuffixerService:p}=this.TS[e],{gamIframeType:f}=this.ZS();if(this.services.UserManagerService.setGeoLocation(t.geoLocation),C.S.sessionId=c,!d)return void this.registerApiError(T.n9.SetupError,"No playlist was provided!");const m=new O.X({iOSAppID:this.mS.isInApp&&!this.mS.isInAppSDK?t.iOSAppID:null,browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:d.playerId,explorationMode:t.explorationMode,isAmp:this.gS,bundleID:this.externalAttributes._appSettings.bundleID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,sdkVersion:this.externalAttributes._appSettings.sdkVersion,appPageURL:this.externalAttributes._appSettings.appPageURL,isOVPDomain:this.vS,canUseExternalAdService:this.externalAttributes.settings._connatixInternals.useExternalAdService,sessionId:c}),g=null===(s=null===(i=this.externalAttributes.settings)||void 0===i?void 0:i._connatixInternals)||void 0===s?void 0:s.serverAb0,v={browser:t.browser,geoLocation:t.geoLocation,playerId:d.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:t.players[e].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:t.players[e].abTestId,isExplorationMode:t.explorationMode,bundleAbId:t.bundleAbId,bundlePart:t.bundlePart,lineItemAbTestInformation:t.lineItemAbTestInformation,implementationType:this.zS(),iasSegmentCodes:t.IASSegmentCodes,amazonTamPubId:t.AmazonTamPubId,liveRampPubId:t.liveRampPubId,serverAb0:(0,rt.hj)(g)?g:void 0,bundleLoadTimestamp:this.wS,revSharePercentage:t.players[e].revSharePercentage},b={gamIframeType:f,sessionId:c,omidWindow:(0,tt.pE)(window).topFrame,isInAppSdk:this.mS.isInAppSDK,isInApp:this.mS.isInApp,isGam:this._S,sdkVersion:this.externalAttributes._appSettings.sdkVersion?this.externalAttributes._appSettings.sdkVersion:void 0,pageUrl:this.pageUrl},I={skipToNextVideoAfter:d.skipToNextVideoAfter,isMechanismEnabled:d.hasAdContentDurationRatio},{sessionEvents:_,generalRepository:S,wcagService:x,mediaEvents:k,trackingService:L,adEvents:R}=l.o.boostrapSessionContainer(h.sessionId,v,this.services.UserManagerService,this.services.StandaloneService,d.disableTracking,this.services.EventsStorageService,b,u,null===(r=null===(n=this.externalAttributes.settings)||void 0===n?void 0:n.advertising)||void 0===r?void 0:r.prebidPermutiveParamsConfig,d.featureFlags,I),B=new z.v(u),D=this.getViewabilityService(d,B,S),N=new P.tt;E.tt.detectUsingCSS(d.global);const $=new G.c(d,t.geoLocation,m.pageUrl,m.pageDomain,m.pageDomainFullPath,this.externalAttributes._appSettings,this.BS,t.publisherNetworkCode),V=null===(a=t.userInformation)||void 0===a?void 0:a.publisherAdsTxt;(0,rt.QM)(V)&&$.setPublisherId(V);const j={services:{GlobalDomUtilsService:u,ViewabilityService:D,ResizeObserver:new W.a(d.global,d.sessionId),UserManagerService:this.services.UserManagerService,MacrosService:$,EventsStorageService:this.services.EventsStorageService,PageFocusService:B,InteractionService:new J.k(d.global,m.isMobile),UrlSuffixerService:p,StandaloneService:this.services.StandaloneService,UID2Service:N},config:m};j.services.UserManagerService.setPageUrl(j.config.pageUrl),S.playerEnvironment=this.aA(),S.region=t.region,S.videoPlacement=d.videoPlacement,d.externalMacros&&j.services.MacrosService.addExtraMacros(d.externalMacros);const U=j.services.UserManagerService.getForcedTrackableUser(),q=j.services.UserManagerService.getForcedIDFV(),H=this.mS.isInApp?j.config.bundleID:j.config.pageDomain;this.rg=this.hA(c,t,H,U,q),j.services.UserManagerService.onEvent([X.k.CCPA_INFO_RECEIVED]).then((()=>{j.services.MacrosService.setUsPrivacyString(j.services.UserManagerService.getUsPrivacyString());F.h.getSessionChildContainer(c).resolve(y.L).initIfSupported(t,c),this.rg.initIdleProviders()})),j.services.UserManagerService.onEvent([X.k.CCPA_INFO_RECEIVED,X.k.USER_SETUP_COMPLETE]).then((()=>ot(this,void 0,void 0,(function*(){t.useIntentiqUserSyncing&&j.services.UserManagerService.onEvent([X.k.USER_INFO_RECEIVED]).then((()=>{(0,M.jE)(j.services.UserManagerService.getUserId()),(0,M.pS)(j.services.UserManagerService.getUserId())}))})))),j.services.UserManagerService.onEvent([X.k.CONSENT_DATA_UPDATE,X.k.USER_SETUP_COMPLETE]).then((()=>ot(this,void 0,void 0,(function*(){S.userId=j.services.UserManagerService.getTrackableUser(),S.isIdentityEnhanced=j.services.UserManagerService.isIdentityEnhanced,E.tt.isBannerBlocked&&_.sessionAdBlocked.next({adBlockDetectionType:w.ev.Banner})})))),j.services.UserManagerService.onEvent([X.k.CONSENT_DATA_UPDATE]).then((()=>{const t=j.services.UserManagerService.getConsentPayload();if(S.hasGdprConsentPayload=(0,rt.QM)(t),this.rg.initIdleProviders(),this.services.UserManagerService.gdprConsentMode===o.ProtoGdprConsentModeEnum.NoConsent||this.mS.isInApp){const t=d.lineItemSettings.lineItems.filter((t=>(0,rt.QM)(t.vendorId))).every((t=>this.services.UserManagerService.isConsent(t.vendorId)));this.services.UserManagerService.gdprConsentMode=t?o.ProtoGdprConsentModeEnum.AllGood:o.ProtoGdprConsentModeEnum.NotAllDemandConsent}})),this.renderer=this.getRendererInstance(d,j,this.externalAttributes._appSettings,_,R,k,S,x,L),this.subscribe(A.Xh.SessionRendered,this.renderer,(()=>{this.cA($,u,j.config)}));const Y=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let Q=h.customJsCode;try{Q=Q.trim(),Q="try\n            {   var trackerData;\n                var trackerDataWoodford;\n                const api2 = \"{{player_instance}}\";\n                api2.on('adImpression',function(data){\n                    if(data.adSourceData.adId === '56445225-357b-4728-847b-5ff007dddc2d' || data.adSourceData.adId === 'eff225cb-dc0b-40d0-82aa-c6343d2f513d'){\n                        trackerData.impressionTrackers.forEach(function(el){\n                            const img = new Image();\n                            img.src = el.url;\n                        });\n                    }\n                    if(data.adSourceData.adId === '25fa169b-d527-4939-97cb-91bac272368f' || data.adSourceData.adId === '72f84310-19a9-4d07-8377-93efafcbdaae' || data.adSourceData.adId ==='72f84310-19a9-4d07-8377-93efafcbdaae'){\n                        trackerDataWoodford.impressionTrackers.forEach(function(el){\n                            const img = new Image();\n                            img.src = el.url;\n                        });\n                    }\n                });\n                api2.on('bid',function(data){\n                    if(data.advertiserLineItemId === 'e021c805-a361-483c-b11c-5142342d87ef'){\n                        trackerData = data;\n                        api2.updateJsQueryTargeting({audiance:'enable'})\n                    }\n                    if(data.advertiserLineItemId === 'bbdf1792-fd92-4ab1-8452-763fd8603818'){ // woodford targeting\n                        trackerDataWoodford = data;\n                        api2.updateJsQueryTargeting({audiance_woodford:'enable'})\n                    }\n                });\n            } catch(e){}; "+Q}catch(t){}if(Q){const t=`${at}_${j.config.appId}`;this.GLOBAL[t]=Y,Q=Q.cnx_replaceAll(`"{{${at}}}"`,`window.${t}`)}this.renderer.init((()=>{this.lA(Q),this.xS.push(this.renderer.onDestroy().subscribe((t=>{t&&this.destroy()})))}))?this.registerApiSuccess(Y):this.registerApiError(T.n9.RenderError,"Player size under supported value")}hA(t,e,i,s,n){const r={sessionId:t,playerResponse:e,domainName:i,idfa:s,idfv:n,supportedIdentityPartners:e.supportedIdentityPartners};return F.h.getSessionChildContainer(t).register($.c.IdentityProviderSettings,{useValue:Object.assign({},r)}),F.h.getSessionChildContainer(t).resolve(g.H)}lA(t,e={useSafeMode:!0}){if(!t)return;const{global:i,useSafeMode:s}=e,n=i||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,(0,Z.ML)(n.document.head,n,r.trim())}uA(){return ot(this,void 0,void 0,(function*(){try{yield D.c.getInstance().load(this.vS)}catch(t){(0,it.nF)({message:"Loader_doPlayerIdCall_load_user_sync",level:it.D_.INFO})}const{playerId:t,parseDomain:e}=this.pA;return this.fA(t,e).catch((t=>{const e=new Error(t);throw(0,it.nF)({callStack:e.stack,level:it.D_.CRITICAL,exception:e.message,message:"Prerender_Loader_player_id_call_get_pls",extra:this.yS},{throttle:1e3}),this.registerApiError(T.n9.SetupError,"player data call error"),this.mA(),e}))}))}gA(t){t.players.forEach((({playerType:t})=>{t===h.ProtoElementsTypeEnum.OutStream&&this.vS&&(0,it.nF)({message:"PlayerType_outstream_on_ovp_domain",level:it.D_.CRITICAL,extra:this.yS})}))}vA(t){const e=t.usedAdxHttpClient,i=t.foundPredictionInV1;e?i?k.e.setClientAb5(2):k.e.setClientAb5(3):i?k.e.setClientAb5(4):k.e.setClientAb5(1)}bA(t){var e;return ot(this,void 0,void 0,(function*(){const{browser:i,userInformation:s}=t;if(this.vA(t),this.gA(t),this.services.UserManagerService.setBrowserInfo(i),this.services.UserManagerService.resolveBotEvent(Boolean(null===(e=t.userInformation)||void 0===e?void 0:e.ivt)),t.hashedPageUrl&&(yield q.k.loadPageInsights({insightsInputType:H.i.Page,id:t.hashedPageUrl})),s&&s.callFraudSensor){const{lookupId:t,lookupResponseCode:e}=s;this.RT={lookupId:t,lookupResponseCode:e,deviceType:i.device}}if((0,Q.BZ)(t.players)){if(t.players.length>1&&(this.DS(),this.CS=!0),p.q8===f.b.Omid&&!this.mS.isInAppHybrid){const t=(0,u.W)(p.oM);yield(0,tt.Up)((()=>ot(this,void 0,void 0,(function*(){return yield(0,d.Z)(`${t}omid.verification.client.1.4.9.js`)}))))}Object.keys(t.players).forEach((e=>{this.IA(t,this.pA,e)}))}else this.registerApiError(T.n9.NoPlayer,`No player available for given player id:${this.pA.playerId}`);this.mA()}))}mA(){this.wA(),this.PA()}PA(){this.renderer&&this.xS.push(this.renderer.onReady().pipe((0,s.h)((t=>!!t)),(0,n.q)(1)).subscribe((()=>{try{if(!this.CS){const t=this.OS[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this._A()}catch(t){(0,it.nF)({message:"Loader_JSApi_readyCallback",exception:t.message,callStack:`playerId: ${this.pA.playerId}`,level:it.D_.WARN},{pacing:1})}})))}_A(){this.OS.filter((t=>t.apiErrorObj)).forEach((()=>{this.services.EventsStorageService.emitRenderError()}))}IA(t,e,i){const s=t.players[i],{playerModel:n}=this.TS[i];this.VS(s.renderInFrame),this.oA(t,i),this.TA(n,this.renderer.playerContainer)}fA(t,e=!1){let i={parseDomain:e,referrer:this.BS,pageUrl:this.pageUrl,tokens:[t]};i.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(i.forceLineItemIds=this.queryParams.cnxLineItemId.split(ht).filter((t=>(0,rt.QM)(t)))),this.queryParams.cnxPlayerId?i.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(i.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(i.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return(0,rt.as)(s)&&Object.keys(s).length>0&&(i.queryJsTargeting=(0,tt.rM)(s)),i.customParam1=this.externalAttributes.customParam1,i.customParam2=this.externalAttributes.customParam2,i.customParam3=this.externalAttributes.customParam3,i.customParam4=this.externalAttributes.customParam4,i.customParam5=this.externalAttributes.customParam5,i.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,i.version=S.g.version,i.es6=S.x,i.userId=this.services.UserManagerService.getForcedTrackableUser(),i.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),i.isConsentLotame=this.services.UserManagerService.isConsentLotame(),i.clientAb0=k.e.clientAb0,i.clientAb1=k.e.clientAb1,i.iiqEnabledAB=v.s.IIQ_ENABLED_AB,i.iiqGroupAB=v.s.IIQ_GROUP_AB,i.implementationType=this.zS(),i.servingRuleId=this.externalAttributes.servingRuleId,i=Object.assign(Object.assign({},i),this.getSpecificRequestData()),this.pA.playerId?this.getPlayerResponse(i):new Promise(((t,e)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())}))}SA(){const t=(0,et.Ph)("cnxVideoPosition",this.pageUrl),e=parseInt((0,et.Ph)("cnxStoryPosition",this.pageUrl),10),i=(0,et.Ph)("cnxEnableNewUi",this.pageUrl),s=(0,et.Ph)("cnxStgStorage",this.pageUrl);return{cnxStoryId:(0,et.Ph)("cnxStoryId",this.pageUrl),cnxLineItemId:(0,et.Ph)("cnxLineItemId",this.pageUrl),cnxPlayerId:(0,et.Ph)("cnxPlayerId",this.pageUrl),cnxMediaId:(0,et.Ph)("cnxMediaId",this.pageUrl),cnxPlaylistId:(0,et.Ph)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===(0,et.Ph)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:(0,rt.r)(e)?e:null,cnxSkipAdsFlag:"true"===(0,et.Ph)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt((0,et.Ph)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===(0,et.Ph)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===(0,et.Ph)("cnxIsSeoTraffic",this.pageUrl),cnxDebug:"true"===(0,et.Ph)("cnxDebug",this.pageUrl),cnxEnableNewUi:(0,K.y)(i),cnxStgStorage:(0,K.y)(s),cnxDebugLogs:"true"===(0,et.Ph)("cnxDebugLogs",this.pageUrl),cnxFeatureFlags:(0,et.Ph)("cnxFeatureFlags",this.pageUrl)}}TA(t,e){const i=this.getDelegateHandler(),s=new B.N(this.GLOBAL,this.services.EventsStorageService,i,t,e);this.vS?E.tt.isBannerBlocked||this.xS.push(E.tt.onAdBlockerDetected().subscribe((t=>{t||s.start()}))):s.start()}cA(t,e,i){if(!this.RT)return;const s=this.services.UserManagerService.getTrackableUser();this.RT.deviceIdentifier=i.bundleID;const n=new L.P(t,e,this.RT,s);this.vS?this.xS.push(E.tt.onAdBlockerDetected().subscribe((t=>{t||n.addFraudSensorScript()}))):n.addFraudSensorScript()}kA(t){E.tt.isBannerBlocked||(this.vS?this.xS.push(E.tt.onAdBlockerDetected().subscribe((e=>{e||this.services.UserManagerService.setThirdPartySyncUrls(t)}))):this.services.UserManagerService.setThirdPartySyncUrls(t))}EA(t){const e=()=>new Promise(((e,i)=>{const s=this.xA();t.addCssStylesheetToHead(s,(()=>e()),(t=>i(t)))}));return(0,tt.Up)((()=>e())).catch((t=>{throw(0,it.nF)({message:"Loader_add_css_link",exception:t,level:it.D_.INFO,extra:this.yS}),new Error(t)}))}RS(t){return t.bandwidthLoggingState===o.ProtoBandwidthLoggingEnum.Enabled?x.Kp:t.bandwidthLoggingState===o.ProtoBandwidthLoggingEnum.SaaS?x.a8:void 0}aA(){if(this.mS.isInAppSDK)return this.mS.isInAppFlutter?I.Q.InAppFlutter:this.mS.isInAppReactNative?I.Q.InAppReactNative:I.Q.InAppSdk;if(this.mS.isInAppHybrid)return I.Q.InAppWebview;if(this.mS.isInApp)return I.Q.InAppGam;if(this.gS)return I.Q.WebAmp;const{gamIframeType:t}=this.ZS();switch(t){case j.K.Safe:return I.Q.WebGamSafeIframe;case j.K.Friendly:return I.Q.WebGamFreindlyIframe}return I.Q.Web}LS(){return(0,tt.Up)((()=>ot(this,void 0,void 0,(function*(){const t=F.h.getGlobalContainer().resolve(b.n),e=this.zS(),i=t.getUser(),s=(0,rt.Ft)(i)?yield this.services.UserManagerService.fetchUserIdentification(e,this.vS,r.cW.Enabled):i;this.services.UserManagerService.lotamePanorama=null==s?void 0:s.panorama,this.services.UserManagerService.userAudienceIdList=null==s?void 0:s.audienceIdList,this.CA(s),this.services.UserManagerService.onEvent([X.k.NON_BOT_DETECTED]).then((()=>{(0,rt.$K)(s)&&(0,rt.QM)(s.userId)&&(this.services.UserManagerService.setupLotameService(s),this.services.UserManagerService.setGeoLocation(s.geoLocation),this.services.UserManagerService.setUserId(s.userId,s.isIdentityEnhanced),s.isIdentityEnhanced&&t.cacheUser(s)),(0,rt.$K)(s)&&(0,rt.Xz)(s.cookieSyncUrls)&&(V.n.setTier(s.tier),this.kA(s.cookieSyncUrls)),this.services.UserManagerService.resolveUserSetupEvent()}))}))),ct).catch((t=>{(0,it.nF)({message:"Loader_getUserIdentification",exception:t.message,callStack:t.callStack,level:it.D_.WARN,extra:this.yS},{throttle:1,pacing:1})}))}CA(t){(0,it.nF)({message:"Loader_userIdentificationResult",exception:(0,rt.$K)(t)?"userIsSticky":"userNotSticky",level:it.D_.INFO,extra:this.yS},{throttle:1,pacing:1})}OA(){try{const t=window.frameElement;if(!(this.aA()===I.Q.Web)||null!==t&&"javascript:false"===t.src)return;(0,it.nF)({message:"Loader_iframe_missing",exception:this.pA.playerId,callStack:"",level:it.D_.INFO},{pacing:1,throttle:1,shouldSendMaxLog:!1})}catch(t){}}setInappPageUrl(t){(0,rt.QM)(t)&&(this.pageUrl=t)}updateQueryParams(){this.queryParams=this.SA()}loadScriptTag(t,e){if(this.externalAttributes=t,(0,rt.QM)(t.playerId)&&!(0,tt.er)(t.playerId))return(0,it.nF)({level:it.D_.WARN,message:"Invalid_Player_GUID",exception:t.playerId,extra:this.yS}),this.registerApiError(T.n9.InvalidGUID,"Invalid PlayerID was provided"),!1;let i;if(e&&(i=this.GLOBAL.document.getElementById(e)),!i)return(0,it.nF)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:it.D_.INFO,extra:this.yS},{pacing:5}),this.registerApiError(T.n9.SetupError,"Could not locate any script tag ids in the page"),!1;const s=(0,rt.as)(t.settings.plugins.adobeAnalyticsSettings);return this.pA={parseDomain:s,playerId:t.playerId,tag:i},this.OA(),!0}insertRenderer(){try{(0,M.d9)(this.queryParams.cnxReloadTime),this.VS();const t=()=>{try{this.uA().then((t=>{const e=[];e.push(this.MS),t.players.forEach(((i,s)=>{t.players[s].limitClientSideApiUse&&this.DS();const n=this.tA(this.pA,i).then((e=>{this.rA(i,t.lineItems);const n=this.initUrlSuffixer(i);k.e.serverAb0=t.serverAb0,k.e.serverAb1=t.serverAb1,this.services.UserManagerService.isCoreSyncResolved||(0,it.nF)({message:"Loader_coreSyncNotResolved_before_pls",level:it.D_.INFO},{pacing:1});const r=this.getPlayerModel(e,t,n,s.toString()),o=new U.m(r.global);return(0,N.u)(r.lineItemSettings.lineItems,this.yS),this.PS&&(r.disableAdvertising=!0,i.lineItems=[]),this.TS[s]={playerModel:r,globalDomUtilsService:o,urlSuffixerService:n},this.EA(o)})).catch((t=>{this.registerApiError(T.n9.SetupError,"rendering error"),(0,it.nF)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:it.D_.CRITICAL,extra:this.yS})}));e.push(n)})),Promise.all(e).then((()=>this.bA(t)))}))}catch(t){(0,it.nF)({message:"Prerender_Loader_do_player_call",callStack:t.stack,exception:t.message,level:it.D_.WARN,extra:this.yS},{throttle:1e3})}};this.wA=this.services.UserManagerService.registerPlsCall(t)}catch(t){(0,it.nF)({message:"Prerender_Loader_insert_renderer",exception:t.message,callStack:t.stack,level:it.D_.CRITICAL,extra:this.yS})}}findPageUrl(t,e,i=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=e||(0,tt.lU)((0,tt.pE)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return i||(0,it.nF)({message:"Prerender_Loader_find_page_url",level:it.D_.INFO,extra:this.yS},{throttle:1e3}),new Promise((i=>{setTimeout((()=>{this.findPageUrl(t,e,!0).then((()=>i()))}),this.kS)}));try{return this.pageUrl=(0,et.sH)(this.pageUrl),Promise.resolve()}catch(t){return(0,it.nF)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:it.D_.CRITICAL,extra:this.yS}),Promise.reject()}}registerApiError(t=T.n9.SetupError,e=""){this.OS.push({apiErrorObj:{type:t,message:e}})}registerApiSuccess(t){this.OS.push({apiConfigObj:t})}destroy(){this.renderer&&this.renderer.destroy(),(0,st.i)(this.xS)}}},7745:(t,e,i)=>{"use strict";i.d(e,{d9:()=>h,jE:()=>o,pS:()=>a});var s=i(9357),n=i(9791),r=i(4411);function o(t){const e=`https://sync.intentiq.com/profiles_engine/ProfilesEngineServlet?at=20&mi=10&dpi=372401555&pcid=${t}`;r.n.trackPixel(e)}function a(t){const e=`https://i.liadm.com/s/81549?bidder_id=246480&bidder_uuid=${t}`;r.n.trackPixel(e)}function h(t){const e=(0,n.pE)(window).topFrame;setTimeout((()=>{e.location.reload()}),t||s.ti)}},6224:(t,e,i)=>{"use strict";i.d(e,{t:()=>a});var s=i(9791),n=i(4261),r=i(4798),o=i(4411);class a{constructor(t,e){this.MA=t,this.LA=e,this.BA=(t,e)=>new Promise(((i,s)=>{o.n.sendProtoRequest({protoResponse:this.MA,endpoint:t,requestType:"GET",shouldLogErrors:!0,timeout:e}).then((t=>{i(t)})).catch((t=>{s(t)}))}))}fetchMetadata(t,e=5,i=!0,n){const o=t=>403===this.DA(t);return new Promise(((a,h)=>{(0,s.Up)((()=>this.BA(t,n)),e,o).then((e=>{if((0,r.as)(e))return a(e);const i=new Error("invalid metadata");return this.NA({url:t,metadata:e,e:i}),h(i)})).catch((e=>{i&&this.NA({url:t,e}),h(e)}))}))}NA(t){var e;const i=(0,r.QM)(null===(e=t.e)||void 0===e?void 0:e.message)?t.e.message:"";i.includes("XhrUtils_XMLHttpRequest_error")||(0,n.nF)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.LA}_${i}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:n.D_.CRITICAL})}DA(t){if(t&&t.message){const e=t.message.split("status:")[1];return e?parseInt(e.slice(0,3),10):null}return null}}},5701:(t,e,i)=>{"use strict";i.d(e,{tt:()=>n});var s=i(5650);class n{constructor(){this.FA={}}subscribe(t,e,i){this.FA[t]||(this.FA[t]=[]),this.FA[t].push({context:e,func:i})}unsubscribe(t,e,i){this.FA[t]&&(this.FA[t]=this.FA[t].filter((t=>!(t.context===e&&(t.func===i||!i)))))}unsubscribeAll(t){Object.keys(this.FA).forEach((e=>{this.FA[e]=this.FA[e].filter((e=>e.context!==t))}))}publish(t,e,i={payload:void 0}){Object.prototype.hasOwnProperty.call(this.FA,e)&&this.FA[e].forEach((e=>{e.context===t&&e.func(i)}))}relay(t,e,i,n){(0,s.qo)(t).forEach((t=>{this.subscribe(t,e,(e=>{n.publish(i,t,e)}))}))}relayBulk(t,e,i){t.forEach((t=>{this.relay(t.channel,t.source,e,i)}))}}},2859:(t,e,i)=>{"use strict";i.d(e,{Q:()=>n});var s=i(4798);class n{constructor(){this.Mi={}}on(t,e){if(this.Mi[t]=this.Mi[t]||[],!(0,s.mf)(e))throw new Error(`${t} event callback is not a function`);return this.Mi[t].push(e),()=>this.Mi[t]=this.Mi[t].filter((t=>t!==e))}once(t,e){const i=this.on(t,(t=>{try{e(t)}catch(t){}i()}))}remove(t,e){this.Mi[t]&&(this.Mi[t]=this.Mi[t].filter((t=>t!==e)))}removeAll(){this.Mi={}}trigger(t,e){this.Mi[t]&&this.Mi[t].forEach((t=>{try{t(e)}catch(t){}}))}}},4701:(t,e,i)=>{"use strict";i.d(e,{N:()=>p});var s,n=i(7945);!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));class r{constructor(t){this.VA=[],this.jA=t=>{this.VA.push(t)},this.UA=t.subscribe(this.jA)}get cachedEvents(){return this.VA}destroy(){this.VA=null,this.UA()}}var o=i(6153),a=i(5650),h=i(3020),c=i(9791),d=i(51),l=i(4261),u=i(4798);class p{constructor(t,e,i,s,r){this.$A=e,this.qA=i,this.oh=s,this.HA=r,this.JA=[],this.GA=t=>{try{this.zA(t);const e=this.JA.find((e=>e.name===t.type));let i;if(e&&!e.started){e.started=!0;const t=e.eventsCacheHandler;i=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:r,_debugLogging:o}=this.oh.apiConfig.settings.plugins,{secondLevelDomain:a,playerId:h}=this.oh,c={cachedEvents:i,adobeAnalyticsSettings:s,moatAnalyticsSettings:r,_debugLogging:o,secondLevelDomain:a,playerId:h,pageName:this.WA,pageUrl:this.Hl,version:n.g.version,delegateHandlers:this.qA,playerContainer:this.HA,playerWindow:window};t.getInstance().start(this.$A,c)}catch(t){(0,l.nF)({callStack:t.stack,exception:t.message,level:l.D_.CRITICAL,message:"PluginsHandler_initPlugin",sessionId:this.oh.sessionId})}};const o=(0,c.pE)(t);this.Ua=o.topFrame,this.Hl=(0,c.lU)(o,this.Ua),this.Hl=(0,d.sH)(this.Hl),this.WA=(0,d.ge)(this.Hl)}start(){this.YA(),this.QA(),this.Ua.cnxPlugins.pluginsHandlers.push(this.GA)}YA(){let t=[];Array.isArray(this.Ua.cnxPlugins)&&this.Ua.cnxPlugins.length>0&&(t=this.Ua.cnxPlugins,t.forEach((t=>this.GA(t)))),(0,u.as)(this.Ua.cnxPlugins)||this.KA(t)}QA(){const t=this.ZA();(0,a.BZ)(t)&&this.tk(t)}ek(t){const e=this.Ua.cnxPlugins.cachedPlugins;if((0,a.BZ)(e))return e.find((e=>e.type===t))}zA(t){this.ek(t.type)||this.Ua.cnxPlugins.cachedPlugins.push(t)}KA(t){this.Ua.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push(t){this.pluginsHandlers.forEach((e=>{e(t)}))}}}tk(t){t.forEach((t=>{this.ek(t)||this.JA.push({name:t,started:!1,eventsCacheHandler:new r(this.$A)})})),this.JA.forEach((({name:t})=>this.ik(t)))}sk(t){return Object.values(t).every((t=>(0,u.QM)(t)))}ZA(){const t=[];return this.oh.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.sk(this.oh.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.oh.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}ik(t){const e={id:`cnx-${t}`,src:""};switch(t){case s.AdobeAnalytics:e.src=o.n.endPoints.assets.plugins.adobeAnalytics;break;case s.MoatAnalytics:e.src=o.n.endPoints.assets.plugins.moatAnalytics}this.Ua.document.getElementById(e.id)||(0,h.dZ)(e,this.Ua.document.head,this.Ua,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},862:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s,n=i(9528);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(s||(s={}));var r=i(9791),o=i(4261);class a{constructor(t,e,i){this.Ua=t,this.nk=e,this.jc=i,this.rk=!1,this.ak=!1,this.hk=()=>{"hidden"===this.Ua.document.visibilityState&&this.ck()},this.ck=()=>{if(this.rk||!this.m_)return;const t=this.m_.takeRecords();this.dk(t),this.rk=!0},this.dk=t=>{t.filter((({body:t})=>"HeavyAdIntervention"===(null==t?void 0:t.id))).forEach((()=>{const{heavyAdBlockTypeEnum:t,advertiserLineItemId:e}=this.nk;this.jc.heavyAd.next({type:n.EN.fromProtoHeavyAdType(t),advertiserLineItemId:e})}))},this.lk()}destroy(t){var e,i,s,n;try{if(!this.ak)return;null===(i=null===(e=this.Ua)||void 0===e?void 0:e.removeEventListener)||void 0===i||i.call(e,"pagehide",this.ck),null===(n=null===(s=this.Ua)||void 0===s?void 0:s.removeEventListener)||void 0===n||n.call(s,"visibilitychange",this.hk)}catch(e){const{message:i,stack:s}=(0,r.W$)(e);(0,o.nF)({level:o.D_.WARN,message:"AdManager_VpaidIntegrator_destroyAd",exception:i,callStack:s,sessionId:t})}}uk(){return!!this.Ua.ReportingObserver}lk(){this.uk()&&(this.ak=!0,this.m_=new this.Ua.ReportingObserver((t=>{this.dk(t)}),{buffered:!0,types:[s.Intervention]}),this.m_.observe(),this.Ua.addEventListener("pagehide",this.ck),this.Ua.addEventListener("visibilitychange",this.hk))}}},4065:(t,e,i)=>{"use strict";i.d(e,{B:()=>a});var s=i(6716),n=i(1509),r=i(9357),o=i(7332);class a{constructor(t,e=0,i=1e3){this.di=t,this.timerDuration=e,this._n=i,this.pk=0,this.fk=null,this.mk=!1,this.gk=!1,this.vk=null,this.yk=new s.x,this.bk=new s.x,this.Ik=new s.x,this.wk=new s.x,this.Pk=[{event:n.n.FirstQuartile,quartile:1},{event:n.n.SecondQuartile,quartile:2},{event:n.n.ThirdQuartile,quartile:3},{event:n.n.FourthQuartile,quartile:4}],this._k=null,this.Tk=()=>{this.Sk(),this.yk.next(),this.Ak(this.pk,this.timerDuration),this.kk(),this.xk(),this.Ck=(new Date).getTime()},e||this.disable()}start(){this.gk=!0,null===this.fk&&this._o()}stop(){this.gk=!1,null!==this.fk&&(this.Sk(),this.Po())}reset(t){t&&(this.timerDuration=t),this.pk=0,this.mk=!1,this._k=null,(null!==this.fk||this.gk)&&(this.Po(),this._o())}setTimerDuration(t){t&&(this.timerDuration=t)}setTreshold(t){t&&(this.vk=t)}get timeElapsed(){return this.pk}get timeRemaining(){return this.mk?0:this.timerDuration-this.pk}disable(){this.mk=!0,this.Po()}get onTimeUpdate(){return this.yk.asObservable()}get onTimeElapsed(){return this.bk.asObservable()}get onTresholdReached(){return this.wk.asObservable()}get onQuartile(){return this.Ik.asObservable()}get startingTime(){return this.Ck}Sk(){this.pk+=(new Date).getTime()-this.Ck}_o(){this.mk||(this.kk(),this.Ck=(new Date).getTime(),this.fk=this.di.setInterval(this.Tk,this._n))}Po(){this.di.clearInterval(this.fk),this.fk=null}Mk(){this.disable(),this.bk.next(),this.pk=0}Lk(){this.vk=null,this.wk.next()}kk(){this.pk/r.s_>=this.timerDuration/r.s_&&this.Mk()}xk(){null!==this.vk&&this.timeRemaining<=this.vk&&this.Lk()}Ak(t,e){const i=Math.floor((0,o.dQ)(0,e,1,4,t));this._k<=i&&this.Pk.forEach((({event:t,quartile:e})=>{e===i&&e!==this._k&&(this.Ik.next(t),this._k=e)}))}}},2300:(t,e,i)=>{"use strict";var s;i.d(e,{r:()=>s}),function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.UpNextButton=9]="UpNextButton",t[t.UpNextBox=10]="UpNextBox",t[t.PreviousButton=11]="PreviousButton",t[t.LogoComponent=12]="LogoComponent",t[t.LogoOutstream=13]="LogoOutstream",t[t.MoreButton=14]="MoreButton",t[t.ElapsedTimeLabel=15]="ElapsedTimeLabel",t[t.TotalDurationLabel=16]="TotalDurationLabel",t[t.RemainingDurationLabel=17]="RemainingDurationLabel",t[t.ProgressBar=18]="ProgressBar",t[t.QualityMenu=19]="QualityMenu",t[t.QueStateOverlay=20]="QueStateOverlay",t[t.Loader=21]="Loader",t[t.ContextMenu=22]="ContextMenu",t[t.ElementsSettingsMenu=23]="ElementsSettingsMenu",t[t.CloseButton=24]="CloseButton",t[t.PinnedCloseButton=25]="PinnedCloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.NextProgressButton=28]="NextProgressButton",t[t.StayProgressButton=29]="StayProgressButton",t[t.CtaButton=30]="CtaButton",t[t.PlayspaceProgressBar=31]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=32]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=33]="ClickToPlayButton",t[t.OverlayComponent=34]="OverlayComponent",t[t.SlideTitle=35]="SlideTitle",t[t.TopTitle=36]="TopTitle",t[t.TopLogo=37]="TopLogo",t[t.TopSlideTitle=38]="TopSlideTitle",t[t.TopStoryTitle=39]="TopStoryTitle",t[t.TextLabel=40]="TextLabel",t[t.LivePoster=41]="LivePoster",t[t.LiveIcon=42]="LiveIcon",t[t.ElementsCaptionMenu=43]="ElementsCaptionMenu",t[t.PinnedTitle=44]="PinnedTitle",t[t.FloatingCloseButton=45]="FloatingCloseButton"}(s||(s={}))},9762:(t,e,i)=>{"use strict";var s;i.d(e,{C:()=>s}),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.DraggingStart=6]="DraggingStart",t[t.DraggingStopped=7]="DraggingStopped",t[t.Seek=8]="Seek",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.SettingsMenu=18]="SettingsMenu",t[t.CaptionOn=19]="CaptionOn",t[t.CaptionOff=20]="CaptionOff",t[t.CaptionUpdate=21]="CaptionUpdate",t[t.CaptionMenu=22]="CaptionMenu",t[t.VolumeHoverStart=23]="VolumeHoverStart",t[t.VolumeHoverStopped=24]="VolumeHoverStopped",t[t.UIHideStart=25]="UIHideStart",t[t.UIShowStart=26]="UIShowStart",t[t.UIEndShowHide=27]="UIEndShowHide",t[t.ContextMenuOpen=28]="ContextMenuOpen",t[t.ContextMenuClose=29]="ContextMenuClose",t[t.ContextClick=30]="ContextClick",t[t.AboutClick=31]="AboutClick",t[t.OverlayClick=32]="OverlayClick",t[t.LogoClicked=33]="LogoClicked",t[t.HoverStart=34]="HoverStart",t[t.HoverEnd=35]="HoverEnd",t[t.StateChanged=36]="StateChanged",t[t.RebindComponent=37]="RebindComponent",t[t.SkipAd=38]="SkipAd",t[t.FocusStart=39]="FocusStart",t[t.StayButton=40]="StayButton",t[t.NextButton=41]="NextButton",t[t.CtaClick=42]="CtaClick",t[t.ApiButton=43]="ApiButton"}(s||(s={}))},6203:(t,e,i)=>{"use strict";var s;i.d(e,{Z:()=>n}),function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={}));const n=s},7263:(t,e,i)=>{"use strict";i.d(e,{P:()=>o});var s=i(5701),n=i(7405),r=i(3020);class o extends s.tt{constructor(t,e,i,s,n){super(),this.mediator=t,this.Re=e,this.gc=i,this.tT=n,this.jo=this.Re.createElementByString(s)}getContainer(){return this.jo}getCoordinates(t){const e=this.Re.getElementCoordinates(this.jo);return this.tT&&t?((t&n.C.Top)===n.C.Top&&(e.clientY-=this.jo.clientHeight),(t&n.C.Right)===n.C.Right&&(e.clientX+=this.jo.clientWidth)):e.clientX+=e.width/2,e}showComponent(t=!1){if(!this.jo||!this.jo.parentElement)return;const e=(0,r.pv)(this.jo.parentElement,"cnx-ui-btn")?this.jo.parentElement:this.jo;t&&(0,r.GF)(e)?(0,r.Ji)(e):(0,r.Ho)(e)}hideComponent(t=!1){if(!this.jo||!this.jo.parentElement)return;const e=(0,r.pv)(this.jo.parentElement,"cnx-ui-btn")?this.jo.parentElement:this.jo;t&&!(0,r.GF)(e)?(0,r.U6)(e,(()=>(0,r.MV)(e))):(0,r.MV)(e)}destroy(){this.jo.innerHTML="",this.jo.style.display="none",this.gc.unregisterAll(this)}}},6019:(t,e,i)=>{"use strict";i.d(e,{Y:()=>r});var s=i(6203),n=i(7263);class r extends n.P{constructor(){super(...arguments),this.eventList=[s.Z[s.Z.Scroll],s.Z[s.Z.Click]],this.ak=!1,this.Bk=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){this.ak=!0;const t={interactionstart:this.onBeforeClick,interaction:this.Bk,click:this.onClick};this.gc.register(this.jo,this,this.gc,t),this.tT&&(this.subscribe(s.Z[s.Z.Click],this.gc,(()=>{this.onClickHandler()})),this.relay(s.Z[s.Z.Scroll],this.gc,this,this.mediator))}destroy(){this.unsubscribeAll(this.gc),super.destroy()}get isInitialized(){return this.ak}}},7309:(t,e,i)=>{"use strict";i.d(e,{h:()=>h});var s=i(1599),n=i(9762),r=i(6019),o=i(3020);class a extends r.Y{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){(0,o.cn)(this.jo,"cnx-boom"),(0,o.Tp)(this.jo),(0,o.cn)(this.jo,"cnx-boom-anim");const t=e=>{"transform"===e.propertyName&&((0,o.IV)(this.jo,"cnx-boom"),(0,o.IV)(this.jo,"cnx-boom-anim"),this.jo.removeEventListener("transitionend",t))};this.jo.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.jo.appendChild(this.Re.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class h extends a{constructor(){super(...arguments),this.eventList=[n.C[n.C.HoverStart],n.C[n.C.HoverEnd],n.C[n.C.FocusStart],...this.eventList],this.onStartHover=()=>{(0,o.cn)(this.jo,s.Gj.HoverStart),(0,o.cn)(this.jo,s.Gj.HoverEnd),this.tT&&this.jo.addEventListener("transitionend",(()=>this.onEndHoverClick())),this.mediator.publish(this,n.C[n.C.HoverStart])},this.onEndHover=()=>{(0,o.IV)(this.jo,s.Gj.HoverEnd),this.mediator.publish(this,n.C[n.C.HoverEnd])},this.Rk=()=>{this.mediator.publish(this,n.C[n.C.FocusStart]),this.onStartHover()},this.Dk=()=>{this.onEndHover()}}initComponent(){super.initComponent(),this.tT?(this.jo.addEventListener("touchstart",this.onStartHover,{passive:!0}),this.jo.addEventListener("touchend",this.onEndHover),this.jo.addEventListener("touchcancel",this.onEndHover)):(this.jo.addEventListener("mouseenter",this.onStartHover),(0,o.Iy)(this.jo)&&(this.jo.addEventListener("focusin",this.Rk),this.jo.addEventListener("focusout",this.Dk)),this.jo.addEventListener("mouseleave",this.onEndHover))}destroy(){this.tT?(this.jo.removeEventListener("touchstart",this.onStartHover),this.jo.removeEventListener("touchend",this.onEndHover),this.jo.removeEventListener("touchcancel",this.onEndHover)):(this.jo.removeEventListener("mouseenter",this.onStartHover),this.jo.removeEventListener("mouseleave",this.onEndHover),(0,o.Iy)(this.jo)&&(this.jo.removeEventListener("focusin",this.Rk),this.jo.removeEventListener("focusout",this.Dk))),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){(0,o.IV)(this.jo,s.Gj.HoverEnd),(0,o.IV)(this.jo,s.Gj.HoverStart),this.tT&&this.jo.removeEventListener("transitionend",(()=>this.onEndHoverClick()))}}},7617:(t,e,i)=>{"use strict";i.d(e,{E:()=>r});var s=i(6237),n=i(3020);class r extends s.s{constructor(t,e,i,s){super(e,i,s),this.mediator=t,this.jo=this.Hk.getRenderedDom()}getContainer(){return this.jo}initComponent(){this.Hk.initComponents()}showComponent(){(0,n.Ho)(this.jo)}hideComponent(){(0,n.MV)(this.jo)}}},9901:(t,e,i)=>{"use strict";i.d(e,{N:()=>a});var s=i(1599),n=i(7263),r=i(3020),o=i(7332);class a extends n.P{constructor(t,e,i,s,n=!1){super(t,e,i,s,n),this.lE=0,this.uE=null,this.fE=0,this.mE=0,this.gE=100,this.cacheDomElements()}cacheDomElements(){this.vE=this.jo.getElementsByClassName("cnx-progress-fill")[0],this.yE=this.jo.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.lE=this.fixedRailWidth?this.fixedRailWidth:this.yE.getBoundingClientRect().width,this.uE=this.yE.getBoundingClientRect().left}updateUi(t){const e=this.getComputedTranslation(t);this.fE=e,this.vE.style.transform=`translateX(${e}px)`}isValidTranslation(){return this.fE>=0&&this.fE<=this.lE}getComputedTranslation(t){return t<0?0:t>this.lE?this.lE:t}setProgress(t){this.cacheWidths();const e=this.getComputedTranslation((0,o.dQ)(0,100,0,this.lE,t));this.updateUi(e)}disableTransition(){(0,r.cn)(this.jo,s.Gj.NoTransition)}enableTransition(){(0,r.IV)(this.jo,s.Gj.NoTransition)}bE(t){this.disableTransition(),this.setProgress(t),(0,r.Tp)(this.vE),this.enableTransition()}forceStartState(){this.bE(this.mE)}forceEndState(){this.bE(this.gE)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}},4115:(t,e,i)=>{"use strict";i.d(e,{J:()=>o,L:()=>s});var s,n=i(9762),r=i(7309);!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(s||(s={}));class o extends r.h{constructor(t,e,i,r,o,a){super(t,e,i,r,o),this.isBig=a,this.Nk=!1,this.eventList=[n.C[n.C.Play],n.C[n.C.Pause],n.C[n.C.Replay],n.C[n.C.StateChanged],...this.eventList],this.Vk="Play (SPACE)",this.jk="Pause (SPACE)",this.setState(s.Pause)}onClickHandler(){this.Mm===s.Pause?this.mediator.publish(this,n.C[n.C.Pause]):this.Nk?this.mediator.publish(this,n.C[n.C.Replay]):this.mediator.publish(this,n.C[n.C.Play]),this.jo.setAttribute("aria-label",this.tooltip)}Uk(){this.Mm===s.Play?this.jo.setAttribute("aria-hidden","false"):this.isBig&&this.jo.setAttribute("aria-hidden","true")}toggleReplay(t){this.Nk=t}setState(t){this.Mm!==t&&(this.Mm=t,this.Uk(),this.jo.setAttribute("aria-label",this.tooltip),this.mediator.publish(this,n.C[n.C.StateChanged]))}get tooltip(){return this.Mm===s.Play?this.Vk:this.jk}}},1191:(t,e,i)=>{"use strict";i.d(e,{F:()=>a,u:()=>s});var s,n=i(9762),r=i(7309),o=i(3020);!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(s||(s={}));class a extends r.h{constructor(t,e,i,s,r,o){super(t,e,i,s,o),this.eventList=[n.C[n.C.Mute],n.C[n.C.Unmute],n.C[n.C.StateChanged],...this.eventList],this.$k="Mute (m)",this.qk="Unmute (m)",this.Mm=r,this.jo.setAttribute("aria-label",this.tooltip)}onClickHandler(){this.Mm===s.Mute?(this.mediator.publish(this,n.C[n.C.Unmute]),this.setState(s.Unmute)):(this.mediator.publish(this,n.C[n.C.Mute]),this.setState(s.Mute))}Uk(){this.Mm===s.Mute?(0,o.L_)(this.jo,"cnx-sound-on","cnx-sound-off"):(0,o.L_)(this.jo,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.Mm===s.Mute?this.qk:this.$k}initComponent(){super.initComponent(),this.Uk()}setState(t){this.Mm!==t&&(this.Mm=t,this.Uk(),this.jo.setAttribute("aria-label",this.tooltip),this.mediator.publish(this,n.C[n.C.StateChanged]))}setVolume(t){t>0?this.setState(s.Unmute):this.setState(s.Mute)}}},1277:(t,e,i)=>{"use strict";i.d(e,{N:()=>c});var s=i(1599),n=i(9762),r=i(2300),o=i(7617),a=i(1191),h=i(3020);class c extends o.E{constructor(t,e,i,o){super(t,e,i,o),this.Jk=null,this.eventList=[n.C[n.C.Volume],n.C[n.C.VolumeHoverStart],n.C[n.C.VolumeHoverStopped],n.C[n.C.DraggingStopped],n.C[n.C.DraggingStart],n.C[n.C.HoverStart],n.C[n.C.HoverEnd],n.C[n.C.StateChanged],n.C[n.C.FocusStart]],this.Gk=.2,this.zk=600,this.Wk=!1,this.Xk=t=>{clearTimeout(this.Jk),(0,h.cn)(this.jo,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.VolumeHoverStart])},this.Qk=()=>{this.Wk||(null!==this.Jk&&clearTimeout(this.Jk),this.Jk=setTimeout((()=>{(0,h.IV)(this.jo,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.VolumeHoverStopped])}),this.zk))},this.Rk=()=>{(0,h.cn)(this.jo,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.FocusStart]),this.mediator.publish(this,n.C[n.C.VolumeHoverStart])},this.Dk=()=>{(0,h.IV)(this.jo,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.VolumeHoverStopped])},this.Zk=this.Gk,this.tE=this.getComponent(r.r.VolumeButton),this.eE=this.getComponent(r.r.VolumeProgress),(0,h.IV)(this.tE.getContainer(),s.Gj.HovarableButton)}Rc(t,e,i){let s;switch(t){case n.C[n.C.Volume]:s=e.payload/100,this.iE(s),this.sE(e.payload);break;case n.C[n.C.Mute]:s=0,this.setVolumeProgress(0);break;case n.C[n.C.Unmute]:s=this.Zk,this.setVolumeProgress(100*this.Zk);break;case n.C[n.C.DraggingStopped]:this.Wk=!1,this.mediator.publish(this,n.C[n.C.DraggingStopped]),this.Qk();break;case n.C[n.C.DraggingStart]:this.Wk=!0,this.mediator.publish(this,n.C[n.C.DraggingStart]);break;case n.C[n.C.HoverStart]:this.mediator.publish(this,n.C[n.C.HoverStart],{payload:{targetComponent:i}});break;case n.C[n.C.HoverEnd]:this.mediator.publish(this,n.C[n.C.HoverEnd],{payload:{targetComponent:i}});break;case n.C[n.C.StateChanged]:this.mediator.publish(this,n.C[n.C.StateChanged],{payload:{targetComponent:i}})}void 0!==s&&this.nE(s)}iE(t){t<this.Gk?this.Zk=this.Gk:this.Zk=t}nE(t){this.mediator.publish(this,n.C[n.C.Volume],{payload:t})}sE(t){0===t?this.tE.setState(a.u.Mute):this.tE.setState(a.u.Unmute)}setVolumeProgress(t){this.eE.setProgress(t)}initComponent(){super.initComponent(),this.jo.addEventListener("mouseenter",this.Xk),this.jo.addEventListener("mouseleave",this.Qk),this.jo.addEventListener("focusin",this.Rk),this.jo.addEventListener("focusout",this.Dk)}setVolume(t){const e=100*t;this.sE(e),this.setVolumeProgress(e)}destroy(){super.destroy(),this.jo.removeEventListener("mouseenter",this.Xk),this.jo.removeEventListener("mouseleave",this.Qk),this.jo.removeEventListener("focusin",this.Rk),this.jo.removeEventListener("focusout",this.Dk)}}},9391:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var s=i(2300);const n=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${s.r.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${s.r.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim()},2823:(t,e,i)=>{"use strict";i.d(e,{$:()=>o});var s=i(1599),n=i(6237),r=i(3020);class o extends n.s{constructor(t,e,i,s,n){super(i,s,n),this.mediator=t,this.$container=e,this.$uiContainer=this.Hk.getRenderedDom(),e.appendChild(this.$uiContainer),this.Hk.initComponents()}changeState(t){const e=this._c[t];e!==this.currentState&&this.currentState.canTransitionToState(e)&&(this.currentState.exitState(e),e.enterState())}hide(){(0,r.cn)(this.$uiContainer,s.Gj.DisplayNone)}show(){(0,r.IV)(this.$uiContainer,s.Gj.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}},3537:(t,e,i)=>{"use strict";i.d(e,{A:()=>F});const s='<cnx class="cnx-ui-progress-label"><cnx-span role="timer"></cnx-span></cnx>';var n=i(2300),r=i(1599),o=i(4151),a=i(9762),h=i(7309);class c extends h.h{constructor(){super(...arguments),this.eventList=[a.C[a.C.Expand],a.C[a.C.Collapse],...this.eventList],this.rE="Full Screen (f)",this.oE="Exit Full Screen (f)"}initComponent(){super.initComponent(),this.jo&&this.jo.setAttribute("aria-label",this.tooltip)}onClickHandler(){switch(this.Mm){case o.q.Collapse:this.mediator.publish(this,a.C[a.C.Expand]);break;case o.q.Expand:this.mediator.publish(this,a.C[a.C.Collapse]);break;default:this.mediator.publish(this,a.C[a.C.Expand])}}Uk(){this.jo&&(this.jo.setAttribute("aria-label",this.tooltip),this.Mm===o.q.Expand?this.jo.classList.add(r.Gj.Active):this.jo.classList.remove(r.Gj.Active))}setState(t){this.Mm!==t&&(this.Mm=t,this.Uk())}get tooltip(){return this.Mm===o.q.Expand?this.oE:this.rE}}var d=i(9479);const l=`\n<cnx class="cnx-icon-button cnx-ui-btn-hoverable" role="button" tabindex="0">\n    <cnx class="cnx-btn-container">\n        <cnx class="cnx-expand-icon">\n            ${i(3409)}\n        </cnx>\n        <cnx class="cnx-collapse-icon">\n            ${d}\n        </cnx>\n    </cnx>\n</cnx>\n`,u='<svg viewBox = "0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"/></svg>\n';var p=i(9040),f=i(3775);function m(t,e,i,s=null,r=!0){if(r){const{expanded:r,hasPopup:o,label:a,controls:h}=s||{};return`\n        ${s?`<cnx aria-expanded=${r} aria-haspopup=${o} aria-controls=${h} aria-label="${a}" role="button" class="cnx-icon-button cnx-button-${n.r[t].toLowerCase()} cnx-ui-btn-hoverable" tabindex="0">`:`<cnx class="cnx-icon-button cnx-button-${n.r[t].toLowerCase()} cnx-ui-btn-hoverable" aria-label="${i}" role="button" tabindex="0">`}\n                <cnx class="cnx-btn-container">\n                    ${e}\n                </cnx>\n            </cnx>\n        `.trim()}return`<cnx class="cnx-button-${n.r[t].toLowerCase()}">${e}</cnx>`}const g="More",v="Close Player",y="Next (Shift + N)",b="Previous (Shift + P)",I={[n.r[n.r.MoreButton]]:{template:m(n.r.MoreButton,'<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></svg>\n',"",{hasPopup:!0,expanded:!1,label:g,controls:f.b.ContextMenuSettings}),tooltip:g,isHoverable:!0},[n.r[n.r.CloseButton]]:{template:m(n.r.CloseButton,u,v),tooltip:v,isHoverable:!0},[n.r[n.r.PinnedCloseButton]]:{template:m(n.r.CloseButton,u,v),tooltip:v,isHoverable:!0},[n.r[n.r.UpNextButton]]:{template:m(n.r.UpNextButton,p,y),tooltip:y,isHoverable:!0},[n.r[n.r.PreviousButton]]:{template:m(n.r.PreviousButton,p,b),tooltip:b,isHoverable:!0}};var w=i(6019);class P extends w.Y{constructor(t,e,i,s,r,o,a){super(t,e,i,s,r),this.tooltip=a,this.eventList=[],this.aE=n.r[o],this.eventList.push(this.aE)}onClickHandler(){this.mediator.publish(this,this.aE)}}class T extends h.h{constructor(t,e,i,s,r,o,a){super(t,e,i,s,r),this.tooltip=a,this.aE=n.r[o],this.eventList.push(this.aE)}onClickHandler(){this.mediator.publish(this,this.aE)}}class _{constructor(t,e,i,s){this.Re=t,this.gc=e,this.tT=i,this.hE=new Map,Object.keys(s).forEach((t=>this.cE(n.r[t],s[t])))}getButton(t,e){const{isHoverable:i,template:s,tooltip:n}=this.dE(t);return i?new T(e,this.Re,this.gc,s,this.tT,t,n):new P(e,this.Re,this.gc,s,this.tT,t,n)}isGeneralComponent(t){return this.hE.has(t)}dE(t){return this.hE.get(t)}cE(t,e){this.hE.set(t,e)}}var S=i(7263),A=i(3020);class x extends S.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){(0,A.Ho)(this.jo),(0,A.Tp)(this.jo),(0,A.cn)(this.jo,r.Gj.Active)}hide(){(0,A.IV)(this.jo,r.Gj.Active),(0,A.MV)(this.jo)}}var k=i(4115);var E=i(9901),C=i(7332);class O extends E.N{constructor(t,e,i,s,n=!1){super(t,e,i,s,n),this.IE=0,this.Ac=null,this._E=!1,this.eventList=[a.C[a.C.DraggingStart],a.C[a.C.DraggingStopped]],this.TE=t=>{this.cacheWidths(),this.SE(this.AE(t)),this.tT?this.jo.addEventListener(this.kE,this.EE):this.Re.addEventListenerOnGlobal(this.kE,this.EE),this.onDragStart()},this.EE=t=>{null===this.Ac&&(this._E||(this._E=!0,this.disableTransition()),this.Ac=this.Re.requestAnimationFrameHelper((()=>{const e=this.xE+(this.AE(t)-this.CE);this.isValidTranslation()&&this.OE(e),this.Ac=null})))},this.ME=t=>{t.stopPropagation(),this.tT?this.jo.removeEventListener(this.kE,this.EE):this.Re.removeEventListenerOnGlobal(this.kE,this.EE),this._E=!1,this.enableTransition(),this.onDragEnd()},this.LE=t=>{const e=100*t.target.value/this.BE.max;this.onProgressChange(e),this.onDragStart(),this.onDragEnd()},this.kE=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.RE=this.jo.getElementsByClassName("cnx-progress-handle")[0],this.BE=this.jo.querySelector('input[type="range"]')}cacheWidths(){super.cacheWidths(),this.IE=this.RE.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const e=this.getComputedTranslation(t);this.RE.style.transform=`translateX(${e-this.IE}px)`}onDragEnd(){this.mediator.publish(this,a.C[a.C.DraggingStopped])}onDragStart(){this.mediator.publish(this,a.C[a.C.DraggingStart])}AE(t){return this.tT?t.touches.item(0).clientX:t.clientX}SE(t){this.xE=t-this.uE,this.CE=t,this.OE(this.xE)}OE(t){if(this.isValidTranslation()){const e=this.getComputedTranslation(t),i=0,s=this.lE,n=0,r=100;this.updateUi(e),this.onProgressChange((0,C.dQ)(i,s,n,r,e))}}setProgress(t){if(super.setProgress(t),!this.BE)return;const e=Math.round(t/100*this.BE.max);this.BE.value=e}setMaxRange(t){this.BE.setAttribute("max",t.toString())}hideRangeInput(){this.BE&&(0,A.MV)(this.BE)}initComponent(){super.initComponent();const t={interactionstart:this.TE,interactionend:this.ME};this.gc.register(this.jo,this,this.gc,t),this.BE&&(this.BE.addEventListener("input",this.LE),this.BE.addEventListener("change",this.LE))}destroy(){super.destroy(),this.BE&&(this.BE.removeEventListener("input",this.LE),this.BE.removeEventListener("change",this.LE))}}var L=i(1310),M=i(4798);class R extends O{constructor(t,e,i,s,n=!1){super(t,e,i,s,n),this.NE=!1,this.FE=t=>{(0,A.cn)(this.jo,r.Gj.HoverEnd),this.NE=!0},this.UE=t=>{const e=this.getComputedTranslation(t.clientX-this.uE);this.$E.style.transform=`translateX(${e}px)`},this.qE=t=>{this.$E.style.transform="translateX(0)",this.NE=!1,this.HE()},this.eventList=this.eventList.concat([a.C[a.C.Seek],a.C[a.C.SeekingStart],a.C[a.C.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,a.C[a.C.Seek],{payload:t-.1})}updateWcagAttributes(t,e){if(!(0,M.hj)(t)||!(0,M.hj)(e))return;const i=(0,L.qt)(e),s=(0,L.qt)(t),n=this.BE;n&&(n.setAttribute("aria-label","Seek"),n.setAttribute("aria-valuemin","0"),n.setAttribute("aria-valuemax",`${Math.round(e)}`),n.setAttribute("aria-valuenow",`${Math.round(t)}`),n.setAttribute("aria-valuetext",`${s} of ${i}`))}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,a.C[a.C.SeekingStopped]),this.HE()}onDragStart(){super.onDragStart(),this.mediator.publish(this,a.C[a.C.SeekingStart])}HE(){this.NE||this._E||(0,A.IV)(this.jo,r.Gj.HoverEnd)}initComponent(){super.initComponent(),this.jo.addEventListener("mousemove",this.UE),this.jo.addEventListener("mouseenter",this.FE),this.jo.addEventListener("mouseleave",this.qE),this.$E=this.jo.getElementsByClassName("cnx-progress-follow")[0]}hide(){this.jo.style.opacity="0"}show(){this.jo.style.opacity="1"}destroy(){super.destroy(),this.jo.removeEventListener("mousemove",this.UE),this.jo.removeEventListener("mouseenter",this.FE),this.jo.removeEventListener("mouseleave",this.qE)}}class B extends S.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.JE=this.jo.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?(0,A.cn)(this.jo,r.Gj.Invisible):(this.JE.innerHTML=(0,L.to)(t),(0,A.IV)(this.jo,r.Gj.Invisible))}}var D=i(1191);class N extends O{constructor(t,e,i,s,n=!1){super(t,e,i,s,n),this.GE=80,this.fixedRailWidth=this.GE,this.eventList.push(a.C[a.C.Volume])}onProgressChange(t){this.mediator.publish(this,a.C[a.C.Volume],{payload:t})}setProgress(t){this.jo.setAttribute("aria-valuenow",t.toString()),super.setProgress(t)}initComponent(){this.jo.setAttribute("role","slider"),super.initComponent()}}class F{constructor(t,e,i,r={},o={}){this.Re=t,this.gc=e,this.jo=i,this.Qs=r,this.zE={[n.r.PlayButton]:t=>this.WE(!1,t),[n.r.BigPlayButton]:t=>this.WE(!0,t),[n.r.VolumeProgress]:t=>new N(t,this.Re,this.gc,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-icon"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-icon"></cnx></cnx>'),[n.r.ExpandButton]:t=>new c(t,this.Re,this.gc,l,this.Qs.isMobile),[n.r.Loader]:t=>new x(t,this.Re,this.gc,'<cnx class="cnx-ui-loader" role="presentation"><svg class="cnx-color-accent" version="1.1" viewBox="0 0 79 90" xmlns="http://www.w3.org/2000/svg"><polygon points="21 73.322 11 79 11 12 21 17.678" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="27 70 27 21 38 27.267 38 63.733" fill="transparent" stroke-linecap="round" stroke-linejoin="round"/><polygon points="44 61 44 31 54 36.769 54 55.231" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="60 51 60 40 70 45.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg></cnx>'),[n.r.ElapsedTimeLabel]:t=>new B(t,this.Re,this.gc,s),[n.r.TotalDurationLabel]:t=>new B(t,this.Re,this.gc,s),[n.r.RemainingDurationLabel]:t=>new B(t,this.Re,this.gc,s),[n.r.ProgressBar]:t=>new R(t,this.Re,this.gc,'<cnx class="cnx-progress-bar cnx-video-progress"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-accent"></cnx><cnx class="cnx-progress-hitarea"></cnx><cnx class="cnx-progress-input"><input type="range" step="5" role="slider" class="cnx-progress-range"></cnx></cnx>',this.Qs.isMobile),[n.r.VolumeButton]:t=>new D.F(t,this.Re,this.gc,'<cnx class="cnx-icon-button cnx-ui-btn-hoverable" role="button" tabindex="0">\n    <cnx class="cnx-btn-container">\n        <cnx class="cnx-unmute-icon">\n           <svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg>\n\n        </cnx>\n        <cnx class="cnx-mute-icon">\n           <svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg>\n\n        </cnx>\n    </cnx>\n</cnx>',D.u.Mute,this.Qs.isMobile)},this.WE=(t,e)=>new k.J(e,this.Re,this.gc,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}" role="button" tabindex="0">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon"><svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg>\n</cnx>\n            <cnx class="cnx-pause-icon"><svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"/></svg>\n</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.Qs.isMobile,t),this.QE=t=>e=>{const i=this.zE[t];if(i)return i(e)},this.KE=new _(this.Re,this.gc,this.Qs.isMobile,Object.assign(Object.assign({},I),o))}createComponent(t,e){const i=this.QE(t)(e);return i||(this.KE.isGeneralComponent(t)?this.KE.getButton(t,e):void 0)}}},6237:(t,e,i)=>{"use strict";i.d(e,{s:()=>o});var s=i(5701),n=i(9762);class r{constructor(t,e){this.ZE=t,this.Re=e,this.tx=/\[\[([0-9]+)]]/g,this.sx=[],this.nx=[],this.hx=this.Re.createElementByString(this.lx(this.ZE))}ux(t){return`<cnx class="pl_${t}"></cnx>`}lx(t){return t.replace(this.tx,((t,e)=>(this.sx.push(parseInt(e,10)),this.ux(e))))}mx(t,e){return this.nx.some((e=>e.slotName===t))||this.nx.some((t=>t.component===e))?null:this.hx.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.sx}getRenderedDom(){return this.hx}registerSlot(t,e){const i=this.mx(t,e);if(null!==i){const s=e.getContainer();return i.parentNode.replaceChild(s,i),this.nx.push({component:e,slotName:t}),!0}return!1}initComponents(){this.nx.forEach((t=>t.component.initComponent()))}}class o extends s.tt{constructor(t,e,i){super(),this.globalDomUtilsService=t,this.templateString=e,this.componentFactory=i,this.vx={},this.Hk=new r(e,t),this.addComponents()}addComponents(){this.Hk.getComponentList().forEach((t=>{const e=this.componentFactory.createComponent(t,this);this.registerComponent(t,e)}))}registerComponent(t,e){this.Hk.registerSlot(t,e),this.vx[t]=e,this.yx(e)}yx(t){t.eventList.forEach((e=>{this.subscribe(e,t,(i=>{e===n.C[n.C.RebindComponent]&&this.Ix(t),this.Rc(e,i,t)}))}))}Ix(t){t&&(this.unsubscribeAll(t),this.yx(t))}getComponent(t){return this.vx[t]}destroy(){Object.keys(this.vx).forEach((t=>{this.vx[t].destroy()}))}}},2925:(t,e,i)=>{"use strict";i.d(e,{w:()=>s});class s{constructor(t){this.Ic=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.Ic.currentState=this}}},4291:(t,e,i)=>{"use strict";i.d(e,{d:()=>a});var s=i(1599),n=i(2300),r=i(4115),o=i(2925);class a extends o.w{initState(){var t;this.Ic.$uiContainer.classList.add(s.s_.Paused);const e=this.Ic.getComponent(n.r.PlayButton);e&&e.setState(r.L.Play);const i=this.Ic.getComponent(n.r.BigPlayButton);i&&(null===(t=i.getContainer())||void 0===t||t.setAttribute("tabindex","0"),i.setState(r.L.Play))}exitState(){var t;const e=this.Ic.getComponent(n.r.BigPlayButton);null===(t=null==e?void 0:e.getContainer())||void 0===t||t.removeAttribute("tabindex"),this.Ic.$uiContainer.classList.remove(s.s_.Paused)}}},2246:(t,e,i)=>{"use strict";i.d(e,{tt:()=>a});var s=i(1599),n=i(2300),r=i(4115),o=i(2925);class a extends o.w{initState(){this.Ic.$uiContainer.classList.add(s.s_.Playing);const t=this.Ic.getComponent(n.r.PlayButton);t&&t.setState(r.L.Pause);const e=this.Ic.getComponent(n.r.BigPlayButton);e&&e.setState(r.L.Pause)}exitState(){this.Ic.$uiContainer.classList.remove(s.s_.Playing)}}},7405:(t,e,i)=>{"use strict";var s;function n(t,e,i,s){t.style.top=`${function(t,e,i,s,n){let r=e-s.clientY;const o=s.clientY+s.height-e;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&o<t.offsetHeight?r-=t.offsetHeight-o:(r+=i,r+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight));return r}(t,e.clientY,e.height,i,s)}px`,t.style.left=`${function(t,e,i,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(e)-Math.ceil(i.clientX),o=e,a=o+t.offsetWidth;const h=i.clientX+i.width;if(s.alignMiddle){const e=t.offsetWidth/2;r-=Math.ceil(e),o-=e,a-=e}if(s.alignMiddle||s.forceRight)return i.clientX>o?r=0+n:h<a&&(r-=Math.ceil(a)-Math.ceil(h)+n),r;a>h&&(r-=t.offsetWidth);return r}(t,e.clientX,i,s)}px`}i.d(e,{C:()=>s,p:()=>n}),function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(s||(s={}))},604:(t,e,i)=>{"use strict";i.d(e,{c:()=>a});var s=i(9791),n=i(51),r=i(4261),o=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class a{constructor(){this.Lm=null}static getInstance(){return a.Fx?a.Fx:(this.Fx=new a,this.Fx)}jx(t){t&&(window.cnxIsOvpDomain=t);const e=(0,s.pE)(window).topFrame;window.cnxEnvParam=(0,n.Ph)("cnxEnv",e.location.search)}load(t){return o(this,void 0,void 0,(function*(){return this.jx(t),(0,s.Up)((()=>(this.Lm||(this.Lm=i.e("webpack_container_remote_CookieSync_UserSync").then(i.t.bind(i,8117,23))),this.Lm))).then((t=>t)).catch((t=>{(0,r.nF)({message:"UserSyncLoader_failed_loading_CookieSync_script",level:r.D_.INFO,exception:`${t}`})}))}))}}},2857:(t,e,i)=>{"use strict";i.d(e,{T_:()=>m,VK:()=>g,fh:()=>p,vY:()=>f,yt:()=>l,zJ:()=>u});var s=i(5675),n=i(6628),r=i(8041),o=(i(3020),i(9791)),a=i(51),h=i(4261),c=i(4798),d=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};const l={enableWorker:!0,capLevelToPlayerSize:!0,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:90,backBufferLength:1/0,lowLatencyMode:!0,ignoreDevicePixelRatio:!0,debug:"true"===(0,a.Ph)("cnxHlsDebug",(0,o.pE)(window).topFrame.location.href)};function u(t,e){return d(this,void 0,void 0,(function*(){try{const e=yield(0,o.Up)((()=>d(this,void 0,void 0,(function*(){return yield function(t){var e,i;return d(this,void 0,void 0,(function*(){if(null===(e=t.cnxAsyncChunks)||void 0===e?void 0:e.Hls)return t.cnxAsyncChunks.Hls;const o=(0,n.W)(r.oM);if(yield(0,s.Z)(`${o}hls.1.3.5.js`,t),!(null===(i=t.cnxAsyncChunks)||void 0===i?void 0:i.Hls))throw new Error("hls bundle not found");return t.cnxAsyncChunks.Hls}))}(t)}))));if(!e)throw new Error("no_hls_module");return e}catch(t){return(0,h.nF)({sessionId:e,callStack:t.stack,exception:t.message,level:h.D_.WARN,message:"HLS_dynamicImport"}),null}}))}function p(){const t=self.MediaSource||self.WebKitMediaSource;if(!t)return!1;const e=self.SourceBuffer||self.WebKitSourceBuffer,i="function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!i&&!!s}const f=t=>(0,c.QM)(t.canPlayType("application/vnd.apple.mpegurl"));function m(t){const e=[];return t.forEach((t=>{e.some((e=>e.height===t.height))||e.push(t)})),e}function g(t,e){return t.reduce(((t,i)=>{if(!t)return i;const s=Math.abs(t.height-e);return Math.abs(i.height-e)<s?i:t}),void 0)}},1783:(t,e,i)=>{"use strict";i.d(e,{Ve:()=>h,Ux:()=>l,cv:()=>s,fi:()=>o,jI:()=>r,li:()=>u,qZ:()=>d,rF:()=>n,sm:()=>c,yA:()=>a});const s="Connatix",n="1.4.9";var r,o,a,h,c,d,l,u;!function(t){t.Generic="generic",t.Video="video"}(r||(r={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(o||(o={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(a||(a={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(h||(h={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(c||(c={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(d||(d={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(l||(l={})),function(t){t.notFound="notFound",t.hidden="hidden",t.viewport="viewport",t.backgrounded="backgrounded",t.obstructed="obstructed",t.clipped="clipped"}(u||(u={}))},4646:(t,e,i)=>{"use strict";var s,n;i.d(e,{$:()=>n}),function(t){t.Full="full"}(s||(s={})),function(t){const e=["1.4.9-iab4257","1.3.25-iab3167","1.3.13-iab2343"],i=["1.4.9-iab4257","1.3.25-iab3167","1.3.13-iab2343"];function n(t,e){if(!t)return;let i=null;for(let s=0;s<e.length&&(i=t[e[s]],!i);s++);return i}t.getSessionClient=function(t){if(t)return n(t.OmidSessionClient,e)},t.getVerificationClient=function(t){return n(t.OmidVerificationClient,i)},t.getVerificationScriptResources=function(t,e){return t.map((t=>{const{javaScriptResource:i,vendor:n,verificationParameters:r}=t;return new e.VerificationScriptResource(i,n,r,s.Full)}))}}(n||(n={}))},7175:()=>{String.prototype.cnx_replaceAll=function(t,e){return this.split(t).join(e)}},3326:(t,e,i)=>{"use strict";i.d(e,{A:()=>p,u:()=>u});var s=i(289),n=i(6224),r=i(6153),o=i(4261),a=i(4798);const h=new n.t(s.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),c=2;let d;const l=new Map;function u(t,e){d||(d=new Promise((i=>{const s=t.find((t=>t.blockedDomainsRevisionNumber));if(!s)return void i();const{publisherLineItemId:n,blockedDomainsRevisionNumber:a}=s,d=`${r.n.endPoints.base.lineItems}${n}/blockedDomains_${a}.bin`;h.fetchMetadata(d,c).then((t=>{l.set(n,t.domains),i()})).catch((()=>{(0,o.nF)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:o.D_.CRITICAL,extra:e},{throttle:2,shouldSendMaxLog:!1}),i()}))})))}function p(t,e){return new Promise((i=>{(0,a.QM)(e)?d.then((()=>{l.has(t)&&l.get(t).some((t=>e.includes(t)))?i(!0):i(!1)})):i(!1)}))}},9906:(t,e,i)=>{"use strict";i.d(e,{h:()=>n});var s=i(8659);class n{static getInstance(){return this.Fx||(this.Fx=new n),this.Fx}static getGlobalContainer(){return this.getInstance().globalContainer}static getSessionChildContainer(t){const e=n.$x.get(t);return e||n.Hx(t)}constructor(t=s.nC){this.Jx=t}get globalContainer(){return this.Jx}static Hx(t){const e=n.getGlobalContainer().createChildContainer();return n.$x.set(t,e),e}}n.$x=new Map},6661:(t,e,i)=>{"use strict";var s;i.d(e,{c:()=>s}),function(t){t.GeneralMetadata="GeneralMetadata",t.UserManagerService="UserManagerService",t.StandaloneService="StandaloneService",t.Temp="TempDataForSS",t.OmidSettings="OmidSettings",t.EventsStorageService="EventsStorageService",t.OmsdkImplementationType="OmsdkImplementationType",t.GlobalDomUtilsService="GlobalDomUtilsService",t.ExternalPrebidJSPermutiveConfig="ExternalPrebidJSPermutiveConfig",t.IdentityProviderSettings="IdentityProviderSettings",t.LiveIntentSettings="LiveIntentSettings",t.FeatureFlags="FeatureFlags",t.VideoAdsDurationServiceSettings="VideoAdsDurationServiceSettings"}(s||(s={}))},6153:(t,e,i)=>{"use strict";i.d(e,{n:()=>c});var s=i(7945);class n{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam",lookup:t.core+"core/lookup"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_view:t.tracking+"mv",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao",sessionAdBlocker:t.tracking+"sab",heavy_ad_intervention:t.tracking+"ha",auctionInformation:t.tracking+"aucinfo"},this.assets={css:{elements:`${this.Gx(t.assets)}player.css`,playspace:`${this.Gx(t.assets)}connatix.playspace.css`},plugins:{adobeAnalytics:`${t.plugins}p/plugins/adobe.plugin.js`,moatAnalytics:`${t.plugins}p/plugins/moat.plugin.js`,prebidScript:`${t.plugins}p/plugins/prebid8.20.0-5.js`,omsdkSessionClient:`${t.plugins}p/plugins/connatix.omsdk.session.client-1.4.9.js`,omsdkWebService:`${t.plugins}p/plugins/connatix.omsdk.service-web-1.4.9.js`,intentiq:`${t.plugins}p/plugins/connatix.intentiq.js`}}}Gx(t){return`${t}p/${s.g.version}/`}}var r=i(2701),o=i(9791),a=i(51),h=i(4798);class c{static set bundleDomain(t){this.zx=t}static get bundleDomain(){if(!(0,h.QM)(this.zx))throw new Error("bundleDomain missing");return this.zx}static get defaultVideoPosterURL(){return this.Wx}static set defaultVideoPosterURL(t){this.Wx=t}static get tier(){return null===this.Yx?c.DEFAULT_TIER:this.Yx}static setTier(t){this.Yx=t,c.Xx=c.Qx()}static Zx(t,e){const i=`capi{{env}}.${t}`;return{video:`${e?"//vid.stg.":"//vid."}${t}/`,image:`${e?"//img.stg.":"//img."}${t}/`,core:`https://${i}/`,tracking:`https://${i}/tr/`,metadata:`${e?"//vid.stg.":"//vid."}${t}/`,insights:`//ins.${t}/`,assets:`//cds{{env}}.${t}/`,plugins:`//cds.${t}/`,lineItems:`//lit.${t}/`}}static Qx(){const t=(0,a.Ph)("cnxEnv",(0,o.pE)(window).topFrame.location.href),e=(0,a.Ph)("cnxStgStorage",(0,o.pE)(window).topFrame.location.href),i=(0,r.y)(e)&&!!t;t&&(s.g.domainPrefix=`-${t}`);const h=this.Zx(this.bundleDomain,i);return Object.keys(h).forEach((t=>{h[t]=h[t].replace("{{env}}",s.g.domainPrefix)})),new n(h)}static get endPoints(){return null===c.Xx&&(c.Xx=c.Qx()),c.Xx}}c.DEFAULT_TIER=2,c.Yx=null,c.Wx="",c.Xx=null},1703:(t,e,i)=>{"use strict";i.d(e,{I:()=>s,V:()=>r});var s,n=i(289);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},4772:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const s=i(9069).fI,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"})},5687:(t,e,i)=>{"use strict";i.d(e,{m:()=>l});var s=i(8211),n=i(6153),r=i(384),o=i(5650),a=i(3020),h=i(9791),c=i(4261),d=i(4798);class l{constructor(t){this.createElement=(t,e=this.Ua)=>e.document.createElement(t),this.Ua=t,this.addPreconnect()}get global(){return this.Ua}addCssString(t,e=""){return(0,a.uc)(t,e,this.Ua)}addPreconnect(){(0,a.tp)(n.n.endPoints.base.video,this.Ua),(0,a.tp)(n.n.endPoints.base.core,this.Ua),(0,a.tp)(n.n.endPoints.base.image,this.Ua)}getLineHeightPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("line-height")}getFontSizePropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("font-weight")}getTransformPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return(0,a.Dx)(t,this.Ua).getPropertyValue("margin-right")}createElementByString(t,e=this.Ua){return(0,a.G$)(t,e)}createDocumentFragment(t=this.Ua){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return(0,a.eA)(this.Ua)}isURLSameDomainToTop(t){return(0,a.uh)(t,this.Ua)}isDetachedFromDOM(t){let e=t;for(;e.parentNode;)if(e=e.parentNode,e===this.Ua.document.body)return!1;return!0}hasIosFullscreenBehaviour(t){return t&&t===s.M.Ios||!this.getFullscreenKeys()}querySelector(t,e=this.Ua){let i;try{i=e.document.querySelector(t)}catch(t){}return i}addCssStylesheetToHead(t,e,i){const s=this.Ua.document,n=s.getElementById(t.id);n?(0,d.mf)(e)&&(this.isStyleSheetLoaded(t.id,s)?e():n.onload=()=>e()):(0,a.NS)(t,s.head,this.Ua,e,i)}isStyleSheetLoaded(t,e){var i;const s=e.styleSheets;for(let e=0;e<s.length;e++){const n=null===(i=s[e])||void 0===i?void 0:i.ownerNode;if((null==n?void 0:n.id)===t)return!0}return!1}getFullscreenKeys(t){return(0,a.S0)(t||this.Ua.document)}exitFullscreen(t,e){(e||this.Ua.document)[t]()}getDocumentProperty(t){return this.Ua.document[t]}addEventListenerOnGlobal(t,e,i,s=!1){(i?this.Ua.document:this.Ua).addEventListener(t,e,s)}removeEventListenerOnGlobal(t,e,i,s=!1){(i?this.Ua.document:this.Ua).removeEventListener(t,e,s)}trackWithImages(t,e){(0,h.Hh)(t,this.Ua,e)}getElementCoordinates(t){let{top:e,left:i}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect();return e+=this.Ua.pageYOffset,i+=this.Ua.pageXOffset,{clientX:i,clientY:e,width:s,height:n}}getElementDistanceToViewport(t){const{top:e,left:i}=t.getBoundingClientRect();return{top:e,left:i}}requestAnimationFrameHelper(t){return(0,a.PM)(this.Ua,t)}cancelRequestAnimationFrame(t){return(0,a.h_)(this.Ua,t)}getGlobalLocationProperties(){const t=this.Ua.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,e){this.Ua.open(t,e)}getComputedTranslateX(t){let e=0;const i=(0,a.Dx)(t,this.Ua).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return(0,o.BZ)(i)&&(e=parseFloat(i[1].split(", ")[4])),e}getBodyDimensions(){try{const t=(0,h.pE)(this.Ua).topFrame.document.body;let{offsetWidth:e,offsetHeight:i}=t;const s=(0,a.Dx)(t,this.Ua);return e+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),i+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),{width:e,height:i}}catch(t){return(0,c.nF)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:c.D_.CRITICAL}),{width:0,height:0}}}getViewportWidth(){return(0,h.pE)(this.Ua).topFrame.document.documentElement.clientWidth}getViewportHeight(){return(0,h.pE)(this.Ua).topFrame.innerHeight}getGlobalClosestTop(){return(0,h.pE)(this.Ua)}stripHtmlTags(t){return(0,a.ju)(t,this.Ua)}getComputedStyle(t,e){return(0,a.Dx)(t,this.Ua,e)}getElementById(t){return(0,a.rI)(t,this.Ua)}getElementsByClassName(t){return(0,a.Fs)(t,this.Ua)}insertScript(t,e,i){this.Ua.document.getElementById(t.id)?(0,d.mf)(e)&&e():(0,a.dZ)(t,this.Ua.document.head,this.Ua,e,null,!0,i)}getIframeMode(){let t=r.K.None;if(this.Ua.self!==this.Ua.top){const{err:e}=(0,h.pE)(this.Ua);t=e?r.K.Safe:r.K.Friendly}return t}destroy(){}}},384:(t,e,i)=>{"use strict";var s;i.d(e,{K:()=>s}),function(t){t[t.None=0]="None",t[t.Friendly=1]="Friendly",t[t.Safe=2]="Safe"}(s||(s={}))},6666:(t,e,i)=>{"use strict";i.d(e,{k:()=>u});var s=i(289),n=i(6224),r=i(6153),o=i(1992),a=i(9791),h=i(4261),c=i(4798),d=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};const l={insights:[],sentimentAnalysis:void 0};class u{static loadInsights(t){const{id:e}=t;let i=u.insightsPromiseStore.get(e);return i||(i=new Promise((e=>{const i=u.requestUrlBuilder(t);u.mediaMetadataHandler.fetchMetadata(i,2,false,1e4).then((t=>{const i=t.insights.map((t=>t.key));e({insights:i,sentimentAnalysis:t.sentimentAnalysis})})).catch((t=>{(0,a.Vm)([95,5])&&(0,h.nF)({message:"LoadInsightIndexesService_endpoint_unavailable",exception:i,callStack:`${t}`,level:h.D_.WARN},{shouldSendMaxLog:!1}),e(l)}))})),u.insightsPromiseStore.set(e,i)),i}static loadPageInsights(t){return d(this,void 0,void 0,(function*(){const e=yield u.loadInsights(t);return u.pageInsights={insights:e.insights},u.pageInsights}))}static requestUrlBuilder({insightsInputType:t,id:e,versionId:i}){return t===o.i.Page||(0,c.$K)(i)||(0,h.nF)({message:"LoadInsightIndexesService_requestUrlBuilder_noVersionIdProvided",exception:`Type: ${t}, id: ${e}`,level:h.D_.CRITICAL}),t===o.i.Page?`${r.n.endPoints.base.insights}${e}/insights.bin`:`${r.n.endPoints.base.insights}${e}/${i}/insights.bin`}static markAsUnavailable(t){u.insightsPromiseStore.get(t)||u.insightsPromiseStore.set(t,Promise.resolve(l))}}u.mediaMetadataHandler=new n.t(s.ProtoInsightsResponse,"InsightsLoaderService"),u.insightsPromiseStore=new Map},1992:(t,e,i)=>{"use strict";var s;i.d(e,{i:()=>s}),function(t){t[t.Video=0]="Video",t[t.Story=1]="Story",t[t.Page=2]="Page"}(s||(s={}))},8230:(t,e,i)=>{"use strict";var s,n,r,o;i.d(e,{Av:()=>o,HT:()=>n,WR:()=>r,qs:()=>s}),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(o||(o={}))},7187:(t,e,i)=>{"use strict";i.d(e,{k:()=>u});var s=i(1599),n=i(6203),r=i(8230),o=i(5650),a=i(3020);const h=0;function c(t){return t.button===h}var d=i(7332),l=i(4798);class u{constructor(t,e,i){this.rS=t,this.tT=e,this.mediator=null,this.tC=30,this.eC=250,this.iC=25,this.sC=[],this.rC={},this.aC=0,this.hC=0,this.cC=!0,this.dC=null,this.lC=!1,this.pC=!1,this.fC=!1,this.mC=!1,this.gC=0,this.vC=0,this.yC=null,this.Ac=null,this.bC=null,this.IC=!0,this.wC=!1,this.PC=t=>{this.tT?(t.element.addEventListener("touchstart",this._C,{passive:!0}),t.element.addEventListener("touchmove",this.TC,{passive:!0}),t.element.addEventListener("touchend",this.SC),t.element.addEventListener("touchcancel",this.AC),t.element.addEventListener("mouseup",this.kC)):(t.element.addEventListener("mousedown",this.xC),t.element.addEventListener("mouseup",this.kC))},this.CC=t=>{this.tT?(t.element.removeEventListener("touchstart",this._C),t.element.removeEventListener("touchmove",this.TC),t.element.removeEventListener("touchend",this.SC),t.element.removeEventListener("touchcancel",this.AC),t.element.removeEventListener("mouseup",this.kC)):(t.element.removeEventListener("mousedown",this.xC),t.element.removeEventListener("mouseup",this.kC))},this._C=t=>{t.stopPropagation();const e=this.OC(t);this.bC=e,this.pC=!1,this.MC(e,r.WR.Hold)&&this.LC(t);const i=this.BC(t);this.hC=i.eventX,this.aC=i.eventY,this.DC(t,e,r.HT.InteractionStart),this.cC=!0},this.TC=t=>{t.stopPropagation();const e=this.OC(t),i=this.BC(t);if(this.cC&&(Math.abs(i.deltaXFromStart)>this.iC||Math.abs(i.deltaYFromStart)>this.iC)&&(this.cC=!1),this.lC||this.MC(e,r.WR.Swipe)){if(null===this.yC&&this.NC(e,i),this.yC===r.qs.Y)return;null===this.Ac&&(this.Ac=(0,a.PM)(this.rS,(()=>{this.Ac=null,this.VC(i.deltaXFromStart),e.mediator.publish(e.context,n.Z[n.Z.SwipeMove],{payload:i.deltaXFromStart})})))}},this.SC=t=>{const e=this.OC(t);if(this.wC=!1,this.bC===e){const i=this.BC(t);t.cancelable&&this.MC(e,r.WR.Hold)&&Math.abs(i.deltaXFromStart)<this.iC&&Math.abs(i.deltaYFromStart)<this.iC&&t.preventDefault(),this.jC(t,e,i);this.UC(i)===r.qs.Y&&Math.abs(i.deltaYFromStart)>=this.iC?this.IC&&e.mediator.publish(e.context,n.Z[n.Z.Scroll]):!this.cC||this.fC||this.pC||(this.wC=!0)}this.bC=null},this.AC=t=>{const e=this.OC(t);this.jC(t,e),this.bC=null},this.xC=t=>{if(!c(t))return void this.$C(r.HT.InteractionStart,t);const e=this.OC(t);this.bC=e,t.stopPropagation(),t.preventDefault(),this.MC(e,r.WR.Hold)&&this.LC(t),this.DC(t,e,r.HT.InteractionStart)},this.kC=t=>{const e=this.OC(t);return this.wC?(e.mediator.publish(e.context,n.Z[n.Z.Click]),void(this.wC=!1)):c(t)&&this.bC?(t.stopPropagation(),t.preventDefault(),this.DC(t,this.bC,r.HT.Interaction),this.DC(t,this.bC,r.HT.InteractionEnd),(this.lC||this.MC(e,r.WR.Hold))&&this.qC(t),this.bC===e&&(this.DC(t,e,r.HT.Click),e.mediator.publish(e.context,n.Z[n.Z.Click])),void(this.bC=null)):(this.$C(r.HT.Interaction,t),void this.$C(r.HT.InteractionEnd,t))},this.HC=t=>{if(!c(t))return this.$C(r.HT.Interaction,t),void this.$C(r.HT.InteractionEnd,t);this.bC=null},this.JC=t=>{if(!c(t)||!this.bC)return this.$C(r.HT.Interaction,t),void this.$C(r.HT.InteractionEnd,t);this.DC(t,this.bC,r.HT.Interaction),this.DC(t,this.bC,r.HT.InteractionEnd),(this.lC||this.MC(this.bC,r.WR.Hold))&&this.qC(t),this.bC=null};const{leftTapSizeThreshold:s,holdTriggerDuration:o,scrollThreshold:h}=Object.assign({},i);this.tC=s||this.tC,this.eC=o||this.eC,this.iC=h||this.iC,this.rS.document.addEventListener("mousedown",this.HC),this.rS.document.addEventListener("mouseup",this.JC)}register(t,e,i,s={},n=[]){const r={element:t,mediator:e,context:i,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.sC.push(r),this.PC(r)}unregister(t){const e=this.sC.find((e=>e.element===t));e&&(this.sC=this.sC.filter((e=>e.element!==t)),this.CC(e))}unregisterAll(t){const e=this.sC.filter((e=>e.mediator===t));e.forEach(this.CC),this.sC=(0,o.V7)(this.sC,e)}addGlobalActions(t,e){Object.keys(Object.assign({},e)).forEach((i=>{this.rC[i]=this.rC[i]||[],this.rC[i].push({initiator:t,action:e[i]})}))}removeGlobalActions(t){Object.keys(this.rC).forEach((e=>{this.rC[e].some((e=>e.initiator===t))&&(this.rC[e]=this.rC[e].filter((e=>e.initiator!==t)))}))}disableSpecialInteractions(t){const e=this.GC(t);e&&(e.disabledSpecialInteractions=(0,o.gX)(e.allowedSpecialInteractions))}enableSpecialInteractions(t){const e=this.GC(t);e&&(e.disabledSpecialInteractions=[])}getNonInterruptibleInteractions(){return[n.Z.HoldStart,n.Z.HoldEnd,n.Z.SwipeMove,n.Z.SwipeEnd,n.Z.Scroll]}disableScrollEvent(){this.IC=!1}enableScrollEvent(){this.IC=!0}destroy(){clearTimeout(this.dC),this.sC.forEach(this.CC),this.rS.document.removeEventListener("mousedown",this.HC),this.rS.document.removeEventListener("mouseup",this.JC)}zC(t){const e=this.OC(t),i=e.element.getBoundingClientRect(),s=this.WC(t),n=i.width,r=(0,d.dQ)(0,n,0,100,s);this.XC(e,this.tC,r)}XC(t,e,i){i<e?t.mediator.publish(t.context,n.Z[n.Z.TapLeft]):t.mediator.publish(t.context,n.Z[n.Z.TapRight])}LC(t){clearTimeout(this.dC),this.lC=!1,this.fC=!1;const e=this.OC(t);(0,a.cn)(e.element,s.Gj.OnHold),this.dC=setTimeout((()=>{this.lC=!0,this.cC&&(this.fC=!0,e.mediator.publish(e.context,n.Z[n.Z.HoldStart]))}),this.eC)}qC(t){clearTimeout(this.dC);const e=this.OC(t);(0,a.IV)(e.element,s.Gj.OnHold),this.lC?(this.lC=!1,this.fC&&(this.fC=!1,e.mediator.publish(e.context,n.Z[n.Z.HoldEnd]))):(this.pC=!0,this.zC(t))}jC(t,e,i){i=i||this.BC(t),t.stopPropagation(),this.DC(t,e,r.HT.Interaction),this.DC(t,e,r.HT.InteractionEnd),(this.lC||this.mC||this.cC&&this.MC(e,r.WR.Hold))&&this.qC(t),(this.mC||this.MC(e,r.WR.Swipe))&&this.QC(e,i)}NC(t,e){this.yC=this.UC(e),this.yC===r.qs.X&&(this.mC=!0,this.lC||(clearTimeout(this.dC),this.dC=null,this.lC=!0,t.mediator.publish(t.context,n.Z[n.Z.HoldStart])))}QC(t,e){if(this.mC){const i=this.KC(e);t.mediator.publish(t.context,n.Z[n.Z.SwipeEnd],{payload:i})}(0,a.h_)(this.rS,this.Ac),this.Ac=null,this.mC=!1,this.hC=null,this.aC=null,this.yC=null,this.gC=0,this.vC=0}VC(t){this.vC<this.iC?this.vC++:(this.gC=t,this.vC=0)}UC(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?r.qs.X:r.qs.Y}KC(t){return t.deltaXFromStart-this.gC<0?r.Av.Left:r.Av.Right}BC(t){const e=t.changedTouches[0];return{deltaXFromStart:e.clientX-this.hC,deltaYFromStart:e.clientY-this.aC,eventX:e.clientX,eventY:e.clientY}}OC(t){return this.bC||this.GC(t.currentTarget)}GC(t){return this.sC.find((e=>e.element===t))}WC(t){const e=this.OC(t);if(this.tT){return t.changedTouches[0].clientX-e.element.getBoundingClientRect().left}return t.offsetX}MC(t,e){return t.allowedSpecialInteractions.includes(e)&&!t.disabledSpecialInteractions.includes(e)}DC(t,e,i){const s=e.callbacks[i];(0,l.mf)(s)&&s(t),this.$C(i,t)}$C(t,e){var i;null===(i=this.rC[t])||void 0===i||i.forEach((t=>{t.action(e)}))}}},4474:(t,e,i)=>{"use strict";i.d(e,{c:()=>m});var s,n=i(289),r=i(9107),o=i(9022);!function(t){t.Phone="PHN",t.Tablet="TAB",t.IPOD="PMP",t.Desktop="DSK",t.CTV="STV",t.Unknown="UNWN"}(s||(s={}));var a,h=i(8211);!function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Mute="MUTE",t.Plcmt="PLCMT",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.Npa="NPA",t.DoNotTrack="DNT",t.LotameClientId="LOTAME_CLIENT_ID",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.FraudSensorDeviceIdentifier="FS_DEVICE_IDENT",t.CnxSupplierId="CNX_SUPPLIER_ID",t.AdxPublisherNetworkCode="ADX_CPNC",t.ErrorCode="ERRORCODE",t.NielsenSideId="NIELSEN_SITE_ID",t.NielsenPlacementId="NIELSEN_PLACEMENT_ID",t.OsGrouping="OS_GROUPING",t.DeviceGrouping="DEVICE_GROUPING",t.UserId="USER_ID",t.Platform="PLATFORM",t.OsVersion="OS_VERSION",t.UOO="UOO",t.TimeStamp="timestamp"}(a||(a={}));var c,d=i(4798);!function(t){t.isStringWithMacros=function(t,e){if(!(0,d.QM)(t))return!1;const i=`\\${e[0]}.*?\\${e[1]}`,s=new RegExp(i,"g");return!!t.match(s)},t.splitByFirstEqual=function(t){if(!(0,d.QM)(t))return;const e=t.indexOf("=");return-1!==e?[t.slice(0,e),t.slice(e+1)]:void 0}}(c||(c={}));var l=i(5650),u=i(3020),p=i(9791),f=i(4261);class m{constructor(t,e,i,s,r,h,c,l){this.oh=t,this.ZC=new Map,this.eO="[",this.iO="]",this.ZC.set(a.Autoplay,t.playbackMode===n.ProtoPlayerPlaybackModeEnum.Autoplay),this.ZC.set(a.UserAgent,navigator.userAgent),this.ZC.set(a.UserLong,e.lon),this.ZC.set(a.UserLat,e.lat),this.ZC.set(a.Ip,e.ip),this.sO(h),this.nO(c),this.aO(i,s,r),this.hO(),this.ZC.set(a.Domain,s),this.ZC.set(a.CnxSupplierId,o.kd),this.ZC.set(a.SessionId,t.sessionId),(0,d.QM)(l)&&this.ZC.set(a.AdxPublisherNetworkCode,`,${l}`)}sO(t){this.ZC.set(a.AppBundle,t.bundleID),this.ZC.set(a.AppName,t.appName),this.ZC.set(a.AppUrl,t.storeURL)}nO(t){this.ZC.set(a.SourceReferrer,t)}hO(){const t=(0,u.w6)()?1:0;this.ZC.set(a.DoNotTrack,t)}aO(t,e,i){this.ZC.set(a.Url,t),this.ZC.set(a.PageUrl,i),this.ZC.set(a.Site,e),this.ZC.set(a.Publisher,t),this.ZC.set(a.DescriptionUrl,t)}cO(){const t=(0,p.qs)();this.ZC.set(a.CashBuster,t),this.ZC.set(a.Random,t),this.ZC.set(a.Ctd,t)}lO(t){return t.split("?")[0]}uO(t){return t.split("?").slice(1).join("?")}sl(t,e){const i=this.lO(t),s=this.pO(this.uO(t),e);return`${i}${s?`?${s}`:""}`}pO(t,e,i=!1){let s=t;const n=s.split("&"),r=[this.eO,this.iO];try{n.forEach((n=>{const o=c.splitByFirstEqual(n);if((0,l.BZ)(o)&&o[1])if(c.isStringWithMacros(o[1],r))s=s.replace(o[1],this.fO(o[1],e,i));else try{if(!o[1].includes(encodeURIComponent("="))||0===decodeURIComponent(o[1]).split("=").length)return;const t=this.pO(decodeURIComponent(o[1]),e,!0);s=s.replace(o[1],encodeURIComponent(t))}catch(e){(0,p.Vm)([95,5])&&(0,f.nF)({message:"ReplaceData_handleMacros",exception:`pair:${o}, ${e.message}`,callStack:t,level:f.D_.WARN,sessionId:this.oh.sessionId},{throttle:1})}}))}catch(e){throw(0,f.nF)({message:"MacrosService_handleMacros",exception:e.message,callStack:t,level:f.D_.CRITICAL,sessionId:this.oh.sessionId},{throttle:1}),e}return s=this.mO(s,e),this.gO(s)}gO(t){return t.includes(this.eO)&&(t=t.cnx_replaceAll(this.eO,encodeURIComponent(this.eO))),t.includes(this.iO)&&(t=t.cnx_replaceAll(this.iO,encodeURIComponent(this.iO))),t}fO(t,e,i){let s,n=t,r=t.toLowerCase();return e.forEach(((t,e)=>{const o=this.eO+e.toLowerCase()+this.iO;for(;r.includes(o);){const e=r.indexOf(o),a=e+o.length;s=i?t:encodeURIComponent(t),n=n.slice(0,e)+s+n.slice(a),r=n.toLowerCase()}})),n}mO(t,e){const i=`${this.eO}${a.AdxPublisherNetworkCode}${this.iO}`;return t.includes(i)?e.has(a.AdxPublisherNetworkCode)?t.cnx_replaceAll(i,e.get(a.AdxPublisherNetworkCode)):t.cnx_replaceAll(i,""):t}setAdWidth(t){this.ZC.set(a.Width,Math.floor(t))}setAdHeight(t){this.ZC.set(a.Height,Math.floor(t))}setSubId(t){this.ZC.set(a.SubId,t)}setGDPR(t){this.ZC.set(a.Gdpr,t)}setUUID(t){this.ZC.set(a.Uuid,t)}setGDPRConsent(t){this.ZC.set(a.GdprConsent,t)}setConsent(t){this.ZC.set(a.Consent,t)}setVideoId(t){this.ZC.set(a.VideoId,t)}setNPA(t){this.ZC.set(a.Npa,t)}setVideoTime(t){this.ZC.set(a.VideoTime,Math.floor(t))}setVideoUrl(t){this.ZC.set(a.VideoUrl,t)}setVideoDescription(t){this.ZC.set(a.VideoDescription,t)}setVideoDuration(t){this.ZC.set(a.VideoDuration,t),this.ZC.set(a.ContentLength,t)}setVideoTitle(t){let e;this.ZC.set(a.VideoTitle,t),this.ZC.set(a.MediaTitle,t),t&&(e=t.split(" ").join(",")),this.ZC.set(a.VideoKeywords,e)}setMute(t){this.ZC.set(a.Mute,t)}setPlcmt(t){this.ZC.set(a.Plcmt,t)}setAdPosition(t="midRoll"){this.ZC.set(a.AdPosition,t)}setupMacros(t){return this.cO(),this.sl(t,this.ZC)}addExtraMacros(t){const e=Object.values(a);Object.keys(t).filter((t=>!e.includes(t.toUpperCase()))).forEach((e=>{this.ZC.set(e,t[e])}))}getMacroValue(t){return this.ZC.get(t)}getExtraMacros(){const t=Object.values(a),e={};return this.ZC.forEach(((i,s)=>{t.includes(s)||null==i||(e[s]=(0,d.QM)(i)?i:JSON.stringify(i))})),e}setUsPrivacyString(t){const e=t||"";this.ZC.set(a.UsPrivacyString,e)}setUserId(t){this.ZC.set(a.FraudSensorUserId,t)}setPublisherId(t){this.ZC.set(a.PublisherId,t)}setFraudSensorMacros(t){this.ZC.set(a.FraudSensorDeviceType,t.deviceType),this.ZC.set(a.FraudSensorLookupId,t.lookupId),this.ZC.set(a.FraudSensorLookupResponseCode,t.lookupResponseCode),this.ZC.set(a.FraudSensorMediaType,t.mediaType),this.ZC.set(a.FraudSensorDeviceIdentifier,t.deviceIdentifier)}setErrorCode(t){this.ZC.set(a.ErrorCode,t)}setNielsenSiteId(t){this.ZC.set(a.NielsenSideId,t)}setNielsenPlacementId(t){this.ZC.set(a.NielsenPlacementId,t)}setNielsenOsGrouping(t){switch(t){case h.M.Android:this.ZC.set(a.OsGrouping,"ANDROID");break;case h.M.Ios:this.ZC.set(a.OsGrouping,"IOS");break;default:this.ZC.set(a.OsGrouping,void 0)}}setNielsenDeviceGrouping(t){switch(t){case r.VB.Smartphone:this.ZC.set(a.DeviceGrouping,s.Phone);break;case r.VB.Tablet:this.ZC.set(a.DeviceGrouping,s.Tablet);break;case r.VB.Desktop:this.ZC.set(a.DeviceGrouping,s.Desktop);break;case r.VB.SmartTV:this.ZC.set(a.DeviceGrouping,s.CTV);break;case r.VB.WearableComputer:this.ZC.set(a.DeviceGrouping,s.IPOD);break;default:this.ZC.set(a.DeviceGrouping,s.Unknown)}}setNielsenUserId(t){this.ZC.set(a.UserId,t)}setNielsenPlatform(t){this.ZC.set(a.Platform,t?"MBL":"DSK")}setNielsenOsVersion(t){this.ZC.set(a.OsVersion,t.toString())}setNielsenUOO(t){this.ZC.set(a.UOO,t)}setNielsenTimestamp(){this.ZC.set(a.TimeStamp,Date.now())}destroy(){}}},5292:(t,e,i)=>{"use strict";var s,n;i.d(e,{v:()=>r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.Re=t,this.vO=[],this.yO(),this.bO()}on(t){this.vO.push(t),t(this.isDocumentVisible())}off(t){this.vO=this.vO.filter((e=>e!==t))}yO(){void 0!==this.Re.getDocumentProperty(s.hidden)?(this.IO=s.hidden,this.wO=n.visibilitychange):void 0!==this.Re.getDocumentProperty(s.msHidden)?(this.IO=s.msHidden,this.wO=n.msvisibilitychange):void 0!==this.Re.getDocumentProperty(s.webkitHidden)&&(this.IO=s.webkitHidden,this.wO=n.webkitvisibilitychange)}bO(){this.Re.addEventListenerOnGlobal(this.wO,(()=>{this.vO.forEach((t=>{t(this.isDocumentVisible())}))}),!0,!1)}isDocumentVisible(){return!this.Re.getDocumentProperty(this.IO)}}},5421:(t,e,i)=>{"use strict";i.d(e,{a:()=>J});var s,n=[],r="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var o,a=function(t){return Object.freeze(t)},h=function(t,e){this.inlineSize=t,this.blockSize=e,a(this)},c=function(){function t(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,a(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),d=function(t){return t instanceof SVGElement&&"getBBox"in t},l=function(t){if(d(t)){var e=t.getBBox(),i=e.width,s=e.height;return!i&&!s}var n=t,r=n.offsetWidth,o=n.offsetHeight;return!(r||o||t.getClientRects().length)},u=function(t){var e;if(t instanceof Element)return!0;var i=null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(i&&t instanceof i.Element)},p="undefined"!=typeof window?window:{},f=new WeakMap,m=/auto|scroll/,g=/^tb|vertical/,v=/msie|trident/i.test(p.navigator&&p.navigator.userAgent),y=function(t){return parseFloat(t||"0")},b=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),new h((i?e:t)||0,(i?t:e)||0)},I=a({devicePixelContentBoxSize:b(),borderBoxSize:b(),contentBoxSize:b(),contentRect:new c(0,0,0,0)}),w=function(t,e){if(void 0===e&&(e=!1),f.has(t)&&!e)return f.get(t);if(l(t))return f.set(t,I),I;var i=getComputedStyle(t),s=d(t)&&t.ownerSVGElement&&t.getBBox(),n=!v&&"border-box"===i.boxSizing,r=g.test(i.writingMode||""),o=!s&&m.test(i.overflowY||""),h=!s&&m.test(i.overflowX||""),u=s?0:y(i.paddingTop),p=s?0:y(i.paddingRight),w=s?0:y(i.paddingBottom),P=s?0:y(i.paddingLeft),T=s?0:y(i.borderTopWidth),_=s?0:y(i.borderRightWidth),S=s?0:y(i.borderBottomWidth),A=P+p,x=u+w,k=(s?0:y(i.borderLeftWidth))+_,E=T+S,C=h?t.offsetHeight-E-t.clientHeight:0,O=o?t.offsetWidth-k-t.clientWidth:0,L=n?A+k:0,M=n?x+E:0,R=s?s.width:y(i.width)-L-O,B=s?s.height:y(i.height)-M-C,D=R+A+O+k,N=B+x+C+E,F=a({devicePixelContentBoxSize:b(Math.round(R*devicePixelRatio),Math.round(B*devicePixelRatio),r),borderBoxSize:b(D,N,r),contentBoxSize:b(R,B,r),contentRect:new c(P,u,R,B)});return f.set(t,F),F},P=function(t,e,i){var n=w(t,i),r=n.borderBoxSize,o=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(e){case s.DEVICE_PIXEL_CONTENT_BOX:return a;case s.BORDER_BOX:return r;default:return o}},T=function(t){var e=w(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=a([e.borderBoxSize]),this.contentBoxSize=a([e.contentBoxSize]),this.devicePixelContentBoxSize=a([e.devicePixelContentBoxSize])},_=function(t){if(l(t))return 1/0;for(var e=0,i=t.parentNode;i;)e+=1,i=i.parentNode;return e},S=function(){var t=1/0,e=[];n.forEach((function(i){if(0!==i.activeTargets.length){var s=[];i.activeTargets.forEach((function(e){var i=new T(e.target),n=_(e.target);s.push(i),e.lastReportedSize=P(e.target,e.observedBox),n<t&&(t=n)})),e.push((function(){i.callback.call(i.observer,s,i.observer)})),i.activeTargets.splice(0,i.activeTargets.length)}}));for(var i=0,s=e;i<s.length;i++){(0,s[i])()}return t},A=function(t){n.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(i){i.isActive()&&(_(i.target)>t?e.activeTargets.push(i):e.skippedTargets.push(i))}))}))},x=function(){var t,e=0;for(A(e);n.some((function(t){return t.activeTargets.length>0}));)e=S(),A(e);return n.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:r}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=r),window.dispatchEvent(t)),e>0},k=[],E=function(t){if(!o){var e=0,i=document.createTextNode("");new MutationObserver((function(){return k.splice(0).forEach((function(t){return t()}))})).observe(i,{characterData:!0}),o=function(){i.textContent="".concat(e?e--:e++)}}k.push(t),o()},C=0,O={attributes:!0,characterData:!0,childList:!0,subtree:!0},L=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],M=function(t){return void 0===t&&(t=0),Date.now()+t},R=!1,B=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!R){R=!0;var i,s=M(t);i=function(){var i=!1;try{i=x()}finally{if(R=!1,t=s-M(),!C)return;i?e.run(1e3):t>0?e.run(t):e.start()}},E((function(){requestAnimationFrame(i)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,O)};document.body?e():p.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),L.forEach((function(e){return p.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),L.forEach((function(e){return p.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),D=function(t){!C&&t>0&&B.start(),!(C+=t)&&B.stop()},N=function(){function t(t,e){this.target=t,this.observedBox=e||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=P(this.target,this.observedBox,!0);return t=this.target,d(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),F=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},$=new WeakMap,V=function(t,e){for(var i=0;i<t.length;i+=1)if(t[i].target===e)return i;return-1},j=function(){function t(){}return t.connect=function(t,e){var i=new F(t,e);$.set(t,i)},t.observe=function(t,e,i){var s=$.get(t),r=0===s.observationTargets.length;V(s.observationTargets,e)<0&&(r&&n.push(s),s.observationTargets.push(new N(e,i&&i.box)),D(1),B.schedule())},t.unobserve=function(t,e){var i=$.get(t),s=V(i.observationTargets,e),r=1===i.observationTargets.length;s>=0&&(r&&n.splice(n.indexOf(i),1),i.observationTargets.splice(s,1),D(-1))},t.disconnect=function(t){var e=this,i=$.get(t);i.observationTargets.slice().forEach((function(i){return e.unobserve(t,i.target)})),i.activeTargets.splice(0,i.activeTargets.length)},t}(),U=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");j.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");j.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");j.unobserve(this,t)},t.prototype.disconnect=function(){j.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),q=i(3020),H=i(4261);class J{constructor(t,e){this.PO=[],this.rv=(t,e)=>{t.forEach((t=>{this._O(t.target).forEach((t=>{t&&((0,q.Tp)(t.element),t.callback(t.element))}))}))};try{const e=t.ResizeObserver||U;this.TO=new e(this.rv)}catch(t){(0,H.nF)({sessionId:e,message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:H.D_.CRITICAL})}}on(t,e){this.SO(t,e)||(this.PO.push({element:t,callback:e}),this.TO.observe(t))}off(t,e){const i=this.SO(t,e);if(!i)return;this.TO.unobserve(i.element);const s=this.PO.indexOf(i);s>=0&&this.PO.splice(s,1)}destroy(){if(this.PO)for(;this.PO.length>0;)this.PO.pop();this.TO.disconnect()}_O(t){return this.PO.filter((e=>e.element===t))}SO(t,e){return this.PO.find((i=>i.element===t&&i.callback===e))}}},1553:(t,e,i)=>{"use strict";i.d(e,{f:()=>o});var s=i(5650),n=i(51),r=i(4798);class o{constructor(){this.AO={},this.kO={domain:"",urlParams:[]},this.ignoredDomains=[]}setQueryParams(t){this.AO=t}setUrlParams(t){this.kO=t}appendParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.EO(t)}appendQueryParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.xO(t,Object.keys(this.AO).map((t=>({paramName:t,paramValue:this.AO[t]}))))}EO(t){if(!(0,s.BZ)(Object.keys(this.kO))||!(0,s.BZ)(this.kO.urlParams)||!t.includes(this.kO.domain))return t;const e=this.kO.urlParams.reduce(((t,e)=>`${t}${e}`),"");return t.replace(this.kO.domain,this.kO.domain+"/"+e)}xO(t,e){if(!(0,s.BZ)(e))return t;t+=(0,n.CK)(t);let i="";return e.forEach((t=>{(0,r.QM)(t.paramName)&&(0,r.QM)(t.paramValue)&&(i+=`${i.length>0?"&":""}${t.paramName}=${t.paramValue}`)})),t+i}isIgnoredDomain(t){return this.ignoredDomains.some((e=>t.indexOf(e)>-1))}}},4015:(t,e,i)=>{"use strict";var s;i.d(e,{P:()=>s}),function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(s||(s={}))},5845:(t,e,i)=>{"use strict";var s;i.d(e,{Q:()=>s}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}))},2918:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var s=i(5845);const n=[s.Q.P1,s.Q.P2,s.Q.P4,s.Q.P7,s.Q.P8]},3341:(t,e,i)=>{"use strict";i.d(e,{w:()=>n});var s=i(4015);const n={[s.P.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[s.P.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}}},5445:(t,e,i)=>{"use strict";i.d(e,{k:()=>At,x:()=>Et});var s=i(6716),n=i(5419),r=i(289),o=i(7945),a=i(2450),h=i(7994),c=i(604),d=i(6153);const l={ccpaSubdivisions:[5332921,6254928,4831725,5417618],country:{US:6252001}};var u;!function(t){t.Connatix="143",t.DV360="755",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82",t.TheMediaGrid="686",t.Rise="1043",t._33Across="58",t.Lotame="999999"}(u||(u={}));const p=["1YNY","1YNN"],f="Y";var m,g=i(5650),v=i(9791),y=i(4261),b=i(1310);!function(t){t.CCPA_Error="CCPA Error",t.CCPA_Pending="CCPA Pending",t.CCPA_Success="CCPA Success",t.CCPA_Delayed_Success="CCPA Delayed Success",t.CCPA_Delayed_Failure="CCPA Delayed Failure"}(m||(m={}));class I{constructor(t,e){this.CO=t,this.OO=1,this.MO="__uspapi",this.BO="getUSPData",this.RO={isPending:!0,isRejected:!1,isDelayed:!1,promise:new Promise((()=>{}))},this.DO(e)}getUsPrivacyString(){if(this.CO.usPrivacyString||this.CO.isCcpaApplicable)return this.CO.usPrivacyString}isCcpaApplicable(){return this.CO.isCcpaApplicable}isSellUserAllowed(){return!this.CO.isCcpaApplicable||this.NO()}setGeoLocation(t){this.FO=t,(0,g.d3)(t.subdivisionId,l.ccpaSubdivisions)||(this.CO.isCcpaApplicable=!1)}getGeoLocation(){return this.FO}fetchUsPrivacyString(){return this.VO()&&this.UO(),this.isCcpaApplicable()?new Promise((t=>{this.getUsPrivacyString()?t():t(this.$O())})):Promise.resolve()}$O(){return this.RO.promise=new Promise(((t,e)=>{const i=this.CO.getScope()[this.MO];i?(this.qO=!0,i(this.BO,this.OO,((i,s)=>{s?(this.DO(i.uspString),t()):e()}))):e()})),this.makeQuerablePromise(this.RO),this.RO.promise}NO(){return!this.CO.usPrivacyString||(0,g.d3)(this.CO.usPrivacyString,p)}JO(t){this.CO.usPrivacyString=t}DO(t){let e=t;window.navigator.globalPrivacyControl&&(t?this.NO()&&(e=function(t,e){return(null==t?void 0:t.slice(0,2))+e+t.slice(3)}(t,f)):e="1-Y-"),this.JO(e)}VO(){if(!(0,v.Vm)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),e=new Date(2020,10,17,12,0,0).getTime();return(0,b.k$)(t,e)}UO(){const{countryGeoId:t,subdivisionId:e}=this.FO;t===l.country.US&&(0,y.nF)({message:"UserCcpaManager_logCCPA",level:y.D_.INFO,callStack:JSON.stringify(e),exception:this.CO.usPrivacyString})}ccpaInfoLogging(t){this.isCcpaApplicable()&&this.qO&&(this.RO.isPending?((0,y.nF)({message:m.CCPA_Pending,exception:"CCPA_Pending_At_Start_AdRequest",level:y.D_.INFO,callStack:t}),this.RO.isDelayed=!0,this.GO=t):this.RO.isRejected&&(0,y.nF)({message:m.CCPA_Error,exception:"CCPA_Error_At_Start_AdRequest",level:y.D_.INFO,callStack:t}))}makeQuerablePromise(t){t.promise.then((()=>{t.isPending=!1,t.isDelayed&&(0,y.nF)({message:m.CCPA_Delayed_Success,exception:"CCPA_Success_After_Delay",level:y.D_.INFO,callStack:this.GO})})).catch((e=>{throw t.isRejected=!0,t.isPending=!1,t.isDelayed&&(0,y.nF)({message:m.CCPA_Delayed_Failure,exception:"CCPA_Failed_After_Delay",level:y.D_.INFO,callStack:this.GO}),e}))}}var w=i(5845);const P={VENDOR_ID:"95",REQUIRED_PURPOSES:[w.Q.P1,w.Q.P3,w.Q.P5,w.Q.P7,w.Q.P8,w.Q.P9,w.Q.P10]};var T=i(4015);var _=i(2918),S=i(3341),A=i(4798);class x{constructor(t,e){this.zO=t,this.WO=e,this.apiType=T.P.CmpApi,this.YO={},this.XO=null,this.KO=t=>new Promise(((e,i)=>{try{const i="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof i&&i.ZO)if(i.ZO.callId===this.tM){const t=i.ZO.returnValue&&i.ZO.returnValue.vendorConsents;this.eM(t).then((()=>e(this.tM)))}else if(i.ZO.callId===this.iM){const t=i.ZO.returnValue&&i.ZO.returnValue.consentData;this.sM(t).then((()=>e(this.iM)))}}catch(t){i()}}))}isApiOnPage(){return null!==this.zO||null!==this.WO}bindToApi(){return null!==this.zO?new Promise(((t,e)=>{this.nM(this.zO).then((()=>t())).catch((t=>e(t)))})):null!==this.WO?this.aM(this.WO):Promise.reject()}isConsentForVendor(t){return!!this.YO[t]}getConsentPayload(){return this.XO}setInAppConsentData(t){this.eM(t),this.sM(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(u.Connatix)}isConsentForPurposes(t){return!0}getApiObjectFromWindow(){const t=S.w[T.P.CmpApi].windowPropertyName;return this.zO[t]}aM(t){this.iM=(0,v.qs)(),this.tM=(0,v.qs)();const e={};return new Promise((i=>{const s=t=>{this.KO(t).then((t=>{e[t]=!0,e[this.iM]&&e[this.tM]&&(window.removeEventListener("message",s,!1),i())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=S.w[T.P.CmpApi].getVendorConsentDataMethodName,r=S.w[T.P.CmpApi].getConsentDataMethodName;t.postMessage({hM:{command:n,parameter:null,callId:this.tM}},"*"),t.postMessage({hM:{command:r,parameter:null,callId:this.iM}},"*")}))}nM(t){const e=S.w[T.P.CmpApi].windowPropertyName,i=S.w[T.P.CmpApi].getVendorConsentDataMethodName,s=S.w[T.P.CmpApi].getConsentDataMethodName;if(t&&t[e]){const n=new Promise((s=>{t[e](i,null,((t,e)=>{if(e){const{vendorConsents:e}=t;this.eM(e).then((()=>s()))}}))})),r=new Promise((i=>{t[e](s,null,((t,e)=>{if(e){const{consentData:e}=t;this.sM(e).then((()=>i()))}}))}));return Promise.all([n,r])}return Promise.reject()}eM(t){return(0,A.as)(t)?(this.YO=t,Promise.resolve()):Promise.reject()}sM(t){return(0,A.HD)(t)?(this.XO=t,Promise.resolve()):Promise.reject()}}var k,E,C,O,L=i(8462);class M extends Error{constructor(t){super(t),this.name="EncodingError"}}class R extends Error{constructor(t){super(t),this.name="DecodingError"}}class B{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(t){if(!/^[0-1]+$/.test(t))throw new M("Invalid bitField");const e=t.length%this.LCM;t+=e?"0".repeat(this.LCM-e):"";let i="";for(let e=0;e<t.length;e+=this.BASIS)i+=this.DICT[parseInt(t.substr(e,this.BASIS),2)];return i}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new R("Invalidly encoded Base64URL string");let e="";for(let i=0;i<t.length;i++){const s=this.REVERSE_DICT.get(t[i]).toString(2);e+="0".repeat(this.BASIS-s.length)+s}return e}}class D{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(t){return D.langSet.has(t)}forEach(t){D.langSet.forEach(t)}get size(){return D.langSet.size}}class N{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardStacks="useNonStandardStacks";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class F{clone(){const t=new this.constructor;return Object.keys(this).forEach((e=>{const i=this.deepClone(this[e]);void 0!==i&&(t[e]=i)})),t}deepClone(t){const e=typeof t;if("number"===e||"string"===e||"boolean"===e)return t;if(null!==t&&"object"===e){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){const e=[];for(const i of t)e.push(this.deepClone(i));return t instanceof Array?e:new t.constructor(e)}{const e={};for(const i in t)t.hasOwnProperty(i)&&(e[i]=this.deepClone(t[i]));return e}}}}class $ extends Error{constructor(t,e,i=""){super(`invalid value ${e} passed for ${t} ${i}`),this.name="TCModelError"}}!function(t){t[t.NOT_ALLOWED=0]="NOT_ALLOWED",t[t.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",t[t.REQUIRE_LI=2]="REQUIRE_LI"}(k||(k={}));class V extends F{static hashSeparator="-";purposeId_;restrictionType;constructor(t,e){super(),void 0!==t&&(this.purposeId=t),void 0!==e&&(this.restrictionType=e)}static unHash(t){const e=t.split(this.hashSeparator),i=new V;if(2!==e.length)throw new $("hash",t);return i.purposeId=parseInt(e[0],10),i.restrictionType=parseInt(e[1],10),i}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${V.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(t){this.purposeId_=t}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===k.NOT_ALLOWED||this.restrictionType===k.REQUIRE_CONSENT||this.restrictionType===k.REQUIRE_LI)}isSameAs(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType}}class j extends F{root=null;getRoot(){return this.root}isEmpty(){return!this.root}add(t){const e={value:t,left:null,right:null};let i;if(this.isEmpty())this.root=e;else for(i=this.root;;)if(t<i.value){if(null===i.left){i.left=e;break}i=i.left}else{if(!(t>i.value))break;if(null===i.right){i.right=e;break}i=i.right}}get(){const t=[];let e=this.root;for(;e;)if(e.left){let i=e.left;for(;i.right&&i.right!=e;)i=i.right;i.right==e?(i.right=null,t.push(e.value),e=e.right):(i.right=e,e=e.left)}else t.push(e.value),e=e.right;return t}contains(t){let e=!1,i=this.root;for(;i;){if(i.value===t){e=!0;break}t>i.value?i=i.right:t<i.value&&(i=i.left)}return e}min(t=this.root){let e;for(;t;)t.left?t=t.left:(e=t.value,t=null);return e}max(t=this.root){let e;for(;t;)t.right?t=t.right:(e=t.value,t=null);return e}remove(t,e=this.root){let i=null,s="left";for(;e;)if(t<e.value)i=e,e=e.left,s="left";else if(t>e.value)i=e,e=e.right,s="right";else{if(e.left||e.right)if(e.left)if(e.right){const t=this.min(e.right);this.remove(t,e.right),e.value=t}else i?i[s]=e.left:this.root=e.left;else i?i[s]=e.right:this.root=e.right;else i?i[s]=null:this.root=null;e=null}}static build(t){if(t&&0!==t.length){if(1===t.length){const e=new j;return e.add(t[0]),e}{const e=t.length>>1,i=new j;i.add(t[e]);const s=i.getRoot();if(s){if(e+1<t.length){const i=j.build(t.slice(e+1));s.right=i?i.getRoot():null}if(e-1>0){const i=j.build(t.slice(0,e-1));s.left=i?i.getRoot():null}}return i}}return null}}class U extends F{bitLength=0;map=new Map;gvl_;has(t){return this.map.has(t)}isOkToHave(t,e,i){let s=!0;if(this.gvl?.vendors){const n=this.gvl.vendors[i];if(n)if(t===k.NOT_ALLOWED)s=n.legIntPurposes.includes(e)||n.purposes.includes(e);else if(n.flexiblePurposes.length)switch(t){case k.REQUIRE_CONSENT:s=n.flexiblePurposes.includes(e)&&n.legIntPurposes.includes(e);break;case k.REQUIRE_LI:s=n.flexiblePurposes.includes(e)&&n.purposes.includes(e)}else s=!1;else s=!1}return s}add(t,e){if(this.isOkToHave(e.restrictionType,e.purposeId,t)){const i=e.hash;this.has(i)||(this.map.set(i,new j),this.bitLength=0),this.map.get(i).add(t)}}restrictPurposeToLegalBasis(t){const e=this.gvl.vendorIds,i=t.hash,s=function(){let t;for(t of e);return t}(),n=[...Array(s).keys()].map((t=>t+1));for(let t=1;t<=s;t++)this.has(i)||(this.map.set(i,j.build(n)),this.bitLength=0),this.map.get(i).add(t)}getVendors(t){let e=[];if(t){const i=t.hash;this.has(i)&&(e=this.map.get(i).get())}else{const t=new Set;this.map.forEach((e=>{e.get().forEach((e=>{t.add(e)}))})),e=Array.from(t)}return e}getRestrictionType(t,e){let i;return this.getRestrictions(t).forEach((t=>{t.purposeId===e&&(void 0===i||i>t.restrictionType)&&(i=t.restrictionType)})),i}vendorHasRestriction(t,e){let i=!1;const s=this.getRestrictions(t);for(let t=0;t<s.length&&!i;t++)i=e.isSameAs(s[t]);return i}getMaxVendorId(){let t=0;return this.map.forEach((e=>{t=Math.max(e.max(),t)})),t}getRestrictions(t){const e=[];return this.map.forEach(((i,s)=>{t?i.contains(t)&&e.push(V.unHash(s)):e.push(V.unHash(s))})),e}getPurposes(){const t=new Set;return this.map.forEach(((e,i)=>{t.add(V.unHash(i).purposeId)})),Array.from(t)}remove(t,e){const i=e.hash,s=this.map.get(i);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(i),this.bitLength=0))}set gvl(t){this.gvl_||(this.gvl_=t,this.map.forEach(((t,e)=>{const i=V.unHash(e);t.get().forEach((e=>{this.isOkToHave(i.restrictionType,i.purposeId,e)||t.remove(e)}))})))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(t){t.COOKIE="cookie",t.WEB="web",t.APP="app"}(E||(E={})),function(t){t.CORE="core",t.VENDORS_DISCLOSED="vendorsDisclosed",t.VENDORS_ALLOWED="vendorsAllowed",t.PUBLISHER_TC="publisherTC"}(C||(C={}));class q{static ID_TO_KEY=[C.CORE,C.VENDORS_DISCLOSED,C.VENDORS_ALLOWED,C.PUBLISHER_TC];static KEY_TO_ID={[C.CORE]:0,[C.VENDORS_DISCLOSED]:1,[C.VENDORS_ALLOWED]:2,[C.PUBLISHER_TC]:3}}class H extends F{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let t=1;t<=this.maxId;t++)yield[t,this.has(t)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(t){return this.set_.has(t)}unset(t){Array.isArray(t)?t.forEach((t=>this.unset(t))):"object"==typeof t?this.unset(Object.keys(t).map((t=>Number(t)))):(this.set_.delete(Number(t)),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach((t=>{this.maxId_=Math.max(this.maxId,t)}))))}isIntMap(t){let e="object"==typeof t;return e=e&&Object.keys(t).every((e=>{let i=Number.isInteger(parseInt(e,10));return i=i&&this.isValidNumber(t[e].id),i=i&&void 0!==t[e].name,i})),e}isValidNumber(t){return parseInt(t,10)>0}isSet(t){let e=!1;return t instanceof Set&&(e=Array.from(t).every(this.isValidNumber)),e}set(t){if(Array.isArray(t))t.forEach((t=>this.set(t)));else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map((t=>Number(t))));else{if(!this.isValidNumber(t))throw new $("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}}empty(){this.set_=new Set}forEach(t){for(let e=1;e<=this.maxId;e++)t(this.has(e),e)}get size(){return this.set_.size}setAll(t){this.set(t)}}class J{static[N.cmpId]=12;static[N.cmpVersion]=12;static[N.consentLanguage]=12;static[N.consentScreen]=6;static[N.created]=36;static[N.isServiceSpecific]=1;static[N.lastUpdated]=36;static[N.policyVersion]=6;static[N.publisherCountryCode]=12;static[N.publisherLegitimateInterests]=24;static[N.publisherConsents]=24;static[N.purposeConsents]=24;static[N.purposeLegitimateInterests]=24;static[N.purposeOneTreatment]=1;static[N.specialFeatureOptins]=12;static[N.useNonStandardStacks]=1;static[N.vendorListVersion]=12;static[N.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class G{static encode(t){return String(Number(t))}static decode(t){return"1"===t}}class z{static encode(t,e){let i;if("string"==typeof t&&(t=parseInt(t,10)),i=t.toString(2),i.length>e||t<0)throw new M(`${t} too large to encode into ${e}`);return i.length<e&&(i="0".repeat(e-i.length)+i),i}static decode(t,e){if(e!==t.length)throw new R("invalid bit length");return parseInt(t,2)}}class W{static encode(t,e){return z.encode(Math.round(t.getTime()/100),e)}static decode(t,e){if(e!==t.length)throw new R("invalid bit length");const i=new Date;return i.setTime(100*z.decode(t,e)),i}}class Y{static encode(t,e){let i="";for(let s=1;s<=e;s++)i+=G.encode(t.has(s));return i}static decode(t,e){if(t.length!==e)throw new R("bitfield encoding length mismatch");const i=new H;for(let s=1;s<=e;s++)G.decode(t[s-1])&&i.set(s);return i.bitLength=t.length,i}}class X{static encode(t,e){const i=(t=t.toUpperCase()).charCodeAt(0)-65,s=t.charCodeAt(1)-65;if(i<0||i>25||s<0||s>25)throw new M(`invalid language code: ${t}`);if(e%2==1)throw new M(`numBits must be even, ${e} is not valid`);e/=2;return z.encode(i,e)+z.encode(s,e)}static decode(t,e){let i;if(e!==t.length||t.length%2)throw new R("invalid bit length for language");{const e=65,s=t.length/2,n=z.decode(t.slice(0,s),s)+e,r=z.decode(t.slice(s),s)+e;i=String.fromCharCode(n)+String.fromCharCode(r)}return i}}class Q{static encode(t){let e=z.encode(t.numRestrictions,J.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach((i=>{e+=z.encode(i.purposeId,J.purposeId),e+=z.encode(i.restrictionType,J.restrictionType);const s=t.getVendors(i),n=s.length;let r=0,o=0,a="";for(let e=0;e<n;e++){const i=s[e];0===o&&(r++,o=i);const h=s[n-1],c=t.gvl.vendorIds,d=t=>{for(;++t<=h&&!c.has(t););return t};if(e===n-1||s[e+1]>d(i)){const t=!(i===o);a+=G.encode(t),a+=z.encode(o,J.vendorId),t&&(a+=z.encode(i,J.vendorId)),o=0}}e+=z.encode(r,J.numEntries),e+=a})),e}static decode(t){let e=0;const i=new U,s=z.decode(t.substr(e,J.numRestrictions),J.numRestrictions);e+=J.numRestrictions;for(let n=0;n<s;n++){const s=z.decode(t.substr(e,J.purposeId),J.purposeId);e+=J.purposeId;const n=z.decode(t.substr(e,J.restrictionType),J.restrictionType);e+=J.restrictionType;const r=new V(s,n),o=z.decode(t.substr(e,J.numEntries),J.numEntries);e+=J.numEntries;for(let s=0;s<o;s++){const s=G.decode(t.substr(e,J.anyBoolean));e+=J.anyBoolean;const n=z.decode(t.substr(e,J.vendorId),J.vendorId);if(e+=J.vendorId,s){const s=z.decode(t.substr(e,J.vendorId),J.vendorId);if(e+=J.vendorId,s<n)throw new R(`Invalid RangeEntry: endVendorId ${s} is less than ${n}`);for(let t=n;t<=s;t++)i.add(t,r)}else i.add(n,r)}}return i.bitLength=e,i}}!function(t){t[t.FIELD=0]="FIELD",t[t.RANGE=1]="RANGE"}(O||(O={}));class K{static encode(t){const e=[];let i,s=[],n=z.encode(t.maxId,J.maxId),r="";const o=J.maxId+J.encodingType,a=o+t.maxId,h=2*J.vendorId+J.singleOrRange+J.numEntries;let c=o+J.numEntries;return t.forEach(((n,o)=>{if(r+=G.encode(n),i=t.maxId>h&&c<a,i&&n){t.has(o+1)?0===s.length&&(s.push(o),c+=J.singleOrRange,c+=J.vendorId):(s.push(o),c+=J.vendorId,e.push(s),s=[])}})),i?(n+=String(O.RANGE),n+=this.buildRangeEncoding(e)):(n+=String(O.FIELD),n+=r),n}static decode(t,e){let i,s=0;const n=z.decode(t.substr(s,J.maxId),J.maxId);s+=J.maxId;const r=z.decode(t.charAt(s),J.encodingType);if(s+=J.encodingType,r===O.RANGE){if(i=new H,1===e){if("1"===t.substr(s,1))throw new R("Unable to decode default consent=1");s++}const n=z.decode(t.substr(s,J.numEntries),J.numEntries);s+=J.numEntries;for(let e=0;e<n;e++){const e=G.decode(t.charAt(s));s+=J.singleOrRange;const n=z.decode(t.substr(s,J.vendorId),J.vendorId);if(s+=J.vendorId,e){const e=z.decode(t.substr(s,J.vendorId),J.vendorId);s+=J.vendorId;for(let t=n;t<=e;t++)i.set(t)}else i.set(n)}}else{const e=t.substr(s,n);s+=n,i=Y.decode(e,n)}return i.bitLength=s,i}static buildRangeEncoding(t){const e=t.length;let i=z.encode(e,J.numEntries);return t.forEach((t=>{const e=1===t.length;i+=G.encode(!e),i+=z.encode(t[0],J.vendorId),e||(i+=z.encode(t[1],J.vendorId))})),i}}function Z(){return{[N.version]:z,[N.created]:W,[N.lastUpdated]:W,[N.cmpId]:z,[N.cmpVersion]:z,[N.consentScreen]:z,[N.consentLanguage]:X,[N.vendorListVersion]:z,[N.policyVersion]:z,[N.isServiceSpecific]:G,[N.useNonStandardStacks]:G,[N.specialFeatureOptins]:Y,[N.purposeConsents]:Y,[N.purposeLegitimateInterests]:Y,[N.purposeOneTreatment]:G,[N.publisherCountryCode]:X,[N.vendorConsents]:K,[N.vendorLegitimateInterests]:K,[N.publisherRestrictions]:Q,segmentType:z,[N.vendorsDisclosed]:K,[N.vendorsAllowed]:K,[N.publisherConsents]:Y,[N.publisherLegitimateInterests]:Y,[N.numCustomPurposes]:z,[N.publisherCustomConsents]:Y,[N.publisherCustomLegitimateInterests]:Y}}class tt{1={[C.CORE]:[N.version,N.created,N.lastUpdated,N.cmpId,N.cmpVersion,N.consentScreen,N.consentLanguage,N.vendorListVersion,N.purposeConsents,N.vendorConsents]};2={[C.CORE]:[N.version,N.created,N.lastUpdated,N.cmpId,N.cmpVersion,N.consentScreen,N.consentLanguage,N.vendorListVersion,N.policyVersion,N.isServiceSpecific,N.useNonStandardStacks,N.specialFeatureOptins,N.purposeConsents,N.purposeLegitimateInterests,N.purposeOneTreatment,N.publisherCountryCode,N.vendorConsents,N.vendorLegitimateInterests,N.publisherRestrictions],[C.PUBLISHER_TC]:[N.publisherConsents,N.publisherLegitimateInterests,N.numCustomPurposes,N.publisherCustomConsents,N.publisherCustomLegitimateInterests],[C.VENDORS_ALLOWED]:[N.vendorsAllowed],[C.VENDORS_DISCLOSED]:[N.vendorsDisclosed]}}class et{1=[C.CORE];2=[C.CORE];constructor(t,e){if(2===t.version)if(t.isServiceSpecific)this[2].push(C.PUBLISHER_TC);else{const i=!(!e||!e.isForVendors);i&&!0!==t[N.supportOOB]||this[2].push(C.VENDORS_DISCLOSED),i&&(t[N.supportOOB]&&t[N.vendorsAllowed].size>0&&this[2].push(C.VENDORS_ALLOWED),this[2].push(C.PUBLISHER_TC))}}}class it{static fieldSequence=new tt;static encode(t,e){let i;try{i=this.fieldSequence[String(t.version)][e]}catch(i){throw new M(`Unable to encode version: ${t.version}, segment: ${e}`)}let s="";e!==C.CORE&&(s=z.encode(q.KEY_TO_ID[e],J.segmentType));const n=Z();return i.forEach((i=>{const r=t[i],o=n[i];let a=J[i];void 0===a&&this.isPublisherCustom(i)&&(a=Number(t[N.numCustomPurposes]));try{s+=o.encode(r,a)}catch(t){throw new M(`Error encoding ${e}->${i}: ${t.message}`)}})),B.encode(s)}static decode(t,e,i){const s=B.decode(t);let n=0;i===C.CORE&&(e.version=z.decode(s.substr(n,J[N.version]),J[N.version])),i!==C.CORE&&(n+=J.segmentType);const r=this.fieldSequence[String(e.version)][i],o=Z();return r.forEach((t=>{const i=o[t];let r=J[t];if(void 0===r&&this.isPublisherCustom(t)&&(r=Number(e[N.numCustomPurposes])),0!==r){const o=s.substr(n,r);if(e[t]=i===K?i.decode(o,e.version):i.decode(o,r),Number.isInteger(r))n+=r;else{if(!Number.isInteger(e[t].bitLength))throw new R(t);n+=e[t].bitLength}}})),e}static isPublisherCustom(t){return 0===t.indexOf("publisherCustom")}}class st{static processor=[t=>t,(t,e)=>{t.publisherRestrictions.gvl=e,t.purposeLegitimateInterests.unset(1);const i=new Map;return i.set("legIntPurposes",t.vendorLegitimateInterests),i.set("purposes",t.vendorConsents),i.forEach(((i,s)=>{i.forEach(((n,r)=>{if(n){const n=e.vendors[r];if(!n||n.deletedDate)i.unset(r);else if(0===n[s].length)if("legIntPurposes"===s&&0===n.purposes.length&&0===n.legIntPurposes.length&&n.specialPurposes.length>0);else if(t.isServiceSpecific)if(0===n.flexiblePurposes.length)i.unset(r);else{const e=t.publisherRestrictions.getRestrictions(r);let n=!1;for(let t=0,i=e.length;t<i&&!n;t++)n=e[t].restrictionType===k.REQUIRE_CONSENT&&"purposes"===s||e[t].restrictionType===k.REQUIRE_LI&&"legIntPurposes"===s;n||i.unset(r)}else i.unset(r)}}))})),t.vendorsDisclosed.set(e.vendors),t}];static process(t,e){const i=t.gvl;if(!i)throw new M("Unable to encode TCModel without a GVL");if(!i.isReady)throw new M("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=i.language.toUpperCase(),e?.version>0&&e?.version<=this.processor.length?t.version=e.version:t.version=this.processor.length;const s=t.version-1;if(!this.processor[s])throw new M(`Invalid version: ${t.version}`);return this.processor[s](t,i)}}class nt extends Error{constructor(t){super(t),this.name="GVLError"}}class rt{static absCall(t,e,i,s){return new Promise(((n,r)=>{const o=new XMLHttpRequest;o.withCredentials=i,o.addEventListener("load",(()=>{if(o.readyState==XMLHttpRequest.DONE)if(o.status>=200&&o.status<300){let t=o.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error(`HTTP Status: ${o.status} response type: ${o.responseType}`))})),o.addEventListener("error",(()=>{r(new Error("error"))})),o.addEventListener("abort",(()=>{r(new Error("aborted"))})),null===e?o.open("GET",t,!0):o.open("POST",t,!0),o.responseType="json",o.timeout=s,o.ontimeout=()=>{r(new Error("Timeout "+s+"ms "+t))},o.send(e)}))}static post(t,e,i=!1,s=0){return this.absCall(t,JSON.stringify(e),i,s)}static fetch(t,e=!1,i=0){return this.absCall(t,null,e,i)}}class ot extends F{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new D;static baseUrl_;static set baseUrl(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new nt("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;lang_;isLatest=!1;constructor(t){super();let e=ot.baseUrl;if(this.lang_=ot.DEFAULT_LANGUAGE,this.isVendorList(t))this.populate(t),this.readyPromise=Promise.resolve();else{if(!e)throw new nt("must specify GVL.baseUrl before loading GVL json");if(t>0){const i=t;ot.CACHE.has(i)?(this.populate(ot.CACHE.get(i)),this.readyPromise=Promise.resolve()):(e+=ot.versionedFilename.replace("[VERSION]",String(i)),this.readyPromise=this.fetchJson(e))}else ot.CACHE.has(ot.LATEST_CACHE_KEY)?(this.populate(ot.CACHE.get(ot.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(e+ot.latestFilename))}}static emptyLanguageCache(t){let e=!1;return void 0===t&&ot.LANGUAGE_CACHE.size>0?(ot.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(ot.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e}static emptyCache(t){let e=!1;return Number.isInteger(t)&&t>=0?(ot.CACHE.delete(t),e=!0):void 0===t&&(ot.CACHE=new Map,e=!0),e}cacheLanguage(){ot.LANGUAGE_CACHE.has(this.lang_)||ot.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(t){try{this.populate(await rt.fetch(t))}catch(t){throw new nt(t.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(t){const e=t.toUpperCase();if(!ot.consentLanguages.has(e))throw new nt(`unsupported language ${t}`);if(e!==this.lang_)if(this.lang_=e,ot.LANGUAGE_CACHE.has(e)){const t=ot.LANGUAGE_CACHE.get(e);for(const e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}else{const e=ot.baseUrl+ot.languageFilename.replace("[LANG]",t);try{await this.fetchJson(e),this.cacheLanguage()}catch(t){throw new nt("unable to load language: "+t.message)}}}get language(){return this.lang_}isVendorList(t){return void 0!==t&&void 0!==t.vendors}populate(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&ot.CACHE.set(ot.LATEST_CACHE_KEY,this.getJson()),ot.CACHE.has(this.vendorListVersion)||ot.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(t){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((t=>{this.bySpecialPurposeVendorMap[t]=new Set})),Object.keys(this.features).forEach((t=>{this.byFeatureVendorMap[t]=new Set})),Object.keys(this.specialFeatures).forEach((t=>{this.bySpecialFeatureVendorMap[t]=new Set})),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map((t=>+t))),this.vendorIds=new Set(t),this.vendors_=t.reduce(((t,e)=>{const i=this.vendors_[String(e)];return i&&void 0===i.deletedDate&&(i.purposes.forEach((t=>{this.byPurposeVendorMap[String(t)].consent.add(e)})),i.specialPurposes.forEach((t=>{this.bySpecialPurposeVendorMap[String(t)].add(e)})),i.legIntPurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].legInt.add(e)})),i.flexiblePurposes&&i.flexiblePurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].flexible.add(e)})),i.features.forEach((t=>{this.byFeatureVendorMap[String(t)].add(e)})),i.specialFeatures.forEach((t=>{this.bySpecialFeatureVendorMap[String(t)].add(e)})),t[e]=i),t}),{})}getFilteredVendors(t,e,i,s){const n=t.charAt(0).toUpperCase()+t.slice(1);let r;const o={};return r="purpose"===t&&i?this["by"+n+"VendorMap"][String(e)][i]:this["by"+(s?"Special":"")+n+"VendorMap"][String(e)],r.forEach((t=>{o[String(t)]=this.vendors[String(t)]})),o}getVendorsWithConsentPurpose(t){return this.getFilteredVendors("purpose",t,"consent")}getVendorsWithLegIntPurpose(t){return this.getFilteredVendors("purpose",t,"legInt")}getVendorsWithFlexiblePurpose(t){return this.getFilteredVendors("purpose",t,"flexible")}getVendorsWithSpecialPurpose(t){return this.getFilteredVendors("purpose",t,void 0,!0)}getVendorsWithFeature(t){return this.getFilteredVendors("feature",t)}getVendorsWithSpecialFeature(t){return this.getFilteredVendors("feature",t,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(t){this.mapVendors(t)}get isReady(){return this.isReady_}clone(){const t=new ot(this.getJson());return this.lang_!==ot.DEFAULT_LANGUAGE&&t.changeLanguage(this.lang_),t}static isInstanceOf(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo}}class at extends F{static consentLanguages=ot.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardStacks_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=2;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new H;purposeConsents=new H;purposeLegitimateInterests=new H;publisherConsents=new H;publisherLegitimateInterests=new H;publisherCustomConsents=new H;publisherCustomLegitimateInterests=new H;customPurposes;vendorConsents=new H;vendorLegitimateInterests=new H;vendorsDisclosed=new H;vendorsAllowed=new H;publisherRestrictions=new U;constructor(t){super(),t&&(this.gvl=t),this.updated()}set gvl(t){ot.isInstanceOf(t)||(t=new ot(t)),this.gvl_=t,this.publisherRestrictions.gvl=t}get gvl(){return this.gvl_}set cmpId(t){if(t=Number(t),!(Number.isInteger(t)&&t>1))throw new $("cmpId",t);this.cmpId_=t}get cmpId(){return this.cmpId_}set cmpVersion(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new $("cmpVersion",t);this.cmpVersion_=t}get cmpVersion(){return this.cmpVersion_}set consentScreen(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new $("consentScreen",t);this.consentScreen_=t}get consentScreen(){return this.consentScreen_}set consentLanguage(t){this.consentLanguage_=t}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(t){if(!/^([A-z]){2}$/.test(t))throw new $("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(t){if((t=Number(t)>>0)<0)throw new $("vendorListVersion",t);this.vendorListVersion_=t}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new $("policyVersion",t)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(t){this.version_=parseInt(t,10)}get version(){return this.version_}set isServiceSpecific(t){this.isServiceSpecific_=t}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardStacks(t){this.useNonStandardStacks_=t}get useNonStandardStacks(){return this.useNonStandardStacks_}set supportOOB(t){this.supportOOB_=t}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(t){this.purposeOneTreatment_=t}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const e=Object.keys(this.customPurposes).sort(((t,e)=>Number(t)-Number(e)));t=parseInt(e.pop(),10)}return t}set numCustomPurposes(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new $("numCustomPurposes",t)}updated(){const t=new Date,e=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));this.created=e,this.lastUpdated=e}}class ht{static encode(t,e){let i,s="";return t=st.process(t,e),i=Array.isArray(e?.segments)?e.segments:new et(t,e)[""+t.version],i.forEach(((e,n)=>{let r="";n<i.length-1&&(r="."),s+=it.encode(t,e)+r})),s}static decode(t,e){const i=t.split("."),s=i.length;e||(e=new at);for(let t=0;t<s;t++){const s=i[t],n=B.decode(s.charAt(0)).substr(0,J.segmentType),r=q.ID_TO_KEY[z.decode(n,J.segmentType).toString()];it.decode(s,e,r)}return e}}var ct=i(3020);const dt=(t,e)=>{const i=S.w[e].windowPropertyName;return(0,ct.uq)(t,i)},lt=(t,e)=>{const i=S.w[e].framePropertyName;return(0,ct.wl)(t,i)},ut=(t,e)=>null!==dt(t,e)||null!==lt(t,e),pt=t=>{const e=ht.decode(t),i={},s={};return e.vendorConsents.forEach(((t,e)=>i[e]=t)),e.purposeConsents.forEach(((t,e)=>s[e]=t)),{vendorConsents:i,purposeConsents:s,tcString:t}},ft=t=>{const e=L.decodeConsentString(t);let i="";const s=e.maxVendorId;for(let t=1;t<=s;t++)i+="0";const n=i.split("");e.allowedVendorIds.forEach((t=>{n[t-1]="1"}));return(t=>{const e={consentString:t};for(let i=0;i<t.length;i++)e[i+1]="1"===t[i];return e})(n.join(""))},mt=(t,e,i)=>{let s;try{s=e(t)}catch(t){}if((0,A.as)(s))return s;try{s=i(t)}catch(t){}return s},gt=t=>(0,A.QM)(null==t?void 0:t.tcString),vt=t=>(0,A.QM)(null==t?void 0:t.consentString),yt=({cmpEncodedString:t,tcfEncodedString:e})=>{if(!(0,A.QM)(t)&&!(0,A.QM)(e))return null;let i=null;return(0,A.QM)(e)&&(i=mt(e,pt,ft)),(0,A.as)(i)?i:(0,A.QM)(t)?(i=mt(t,ft,pt),(0,A.as)(i)?i:((0,y.nF)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:e}),level:y.D_.CRITICAL}),null)):((0,y.nF)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:e}),level:y.D_.CRITICAL}),null)};class bt{constructor(t,e){this.dM=t,this.lM=e,this.apiType=T.P.TcfApi,this.uM=t=>new Promise(((e,i)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.pM&&s.pM.callId===this.fM){const t=s.pM.returnValue.tcString;this.eM(t).then((()=>e(this.fM))).catch((t=>i()))}}catch(t){i()}}))}isApiOnPage(){return null!==this.dM||null!==this.lM}bindToApi(){return null!==this.dM?new Promise(((t,e)=>{this.nM(this.dM).then((()=>t())).catch((t=>e(t)))})):null!==this.lM?this.aM(this.lM):Promise.reject()}isConsentForVendor(t){var e,i;return!!(null===(e=this.mM)||void 0===e?void 0:e.vendorConsents)&&!!(null===(i=this.mM)||void 0===i?void 0:i.vendorConsents[t])}getConsentPayload(){var t;const e=null===(t=this.mM)||void 0===t?void 0:t.tcString;return(0,A.QM)(e)?e:null}setInAppConsentData(t){this.mM=Object.assign(Object.assign({},this.mM),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var e;return!!(null===(e=this.mM)||void 0===e?void 0:e.purposeConsents)&&t.every((t=>!!this.mM.purposeConsents[t]))}getApiObjectFromWindow(){const t=S.w[T.P.TcfApi].windowPropertyName;return this.dM[t]}aM(t){this.fM=(0,v.qs)();const e={};return new Promise((i=>{const s=t=>{this.uM(t).then((t=>{e[t]=!0,e[this.fM]&&(window.removeEventListener("message",s,!1),i())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=S.w[T.P.TcfApi].getVendorConsentDataMethodName;t.postMessage({gM:{command:n,parameter:null,callId:this.fM}},"*")}))}nM(t){const e=S.w[T.P.TcfApi].windowPropertyName,i=S.w[T.P.TcfApi].consentUpdateMethodName,s=S.w[T.P.TcfApi].removeUpdateListenerMethodName;return t&&t[e]?new Promise((t=>{this.dM[e](i,2,((i,n)=>{if(n&&("useractioncomplete"===i.eventStatus||"tcloaded"===i.eventStatus)){const n=i.tcString;this.eM(n).then((()=>t())),this.dM[e](s,2,(()=>{}),i.listenerId)}}))})):Promise.reject()}eM(t){const e=yt({tcfEncodedString:t});return gt(e)?(this.mM=e,Promise.resolve()):Promise.reject()}}class It{constructor(t,e,i={}){var s,n;this.vM=t,this.Ua=e,this.yM=null;const r=yt({cmpEncodedString:null===(s=i.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=i.tcf)||void 0===n?void 0:n.tcString}),o=this.bM(r);null!==o?(this.IM(o),(gt(r)||vt(r))&&this.wM.setInAppConsentData(r)):(0,y.nF)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:i}),level:y.D_.CRITICAL})}setPageUrl(t){this.Hl=t}setAmpUserConsent(t){var e,i;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(e=t.consentMetadata)||void 0===e?void 0:e.consentStringType,r=t.encodeConsentString||(null===(i=t.consentMetadata)||void 0===i?void 0:i.additionalConsent);let o;if(!(0,A.QM)(r))return void(0,y.nF)({level:y.D_.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.Hl});if(n===s)return void(0,y.nF)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:y.D_.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.Hl}`},{throttle:2,shouldSendMaxLog:!1});const a=yt({tcfEncodedString:r,cmpEncodedString:r});gt(a)?o=new bt(null,null):vt(a)&&(o=new x(null,null)),o?o?(this.wM=o,this.wM.setInAppConsentData(a)):(0,y.nF)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:y.D_.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Hl}`},{shouldSendMaxLog:!1,throttle:2}):(0,y.nF)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:y.D_.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Hl}`},{throttle:2,shouldSendMaxLog:!1})}isConsentRequired(){return this.vM}isConsent(t,e=[]){if(this.isConsentRequired()){return this.wM.isConsentForVendor(t)&&this.wM.isConsentForPurposes(e)}return!0}isConsentConnatix(){return this.isConsent(u.Connatix,_.Z)}isConsentForPersonalisedAds(){return this.getConsentApiType()!==T.P.CmpApi&&this.wM.isConsentForPurposes(_.Z)}getConsentDataPayload(){return this.wM.getConsentPayload()}bindToConsentApi(){return this.wM.isApiOnPage()?this.wM.bindToApi():new Promise((t=>{this.yM=setInterval((()=>{const{apiWindow:e,apiLocatorFrame:i}=this._M(this.wM.apiType);(e||i)&&(clearInterval(this.yM),this.IM(this.wM.apiType),t(this.wM.bindToApi()))}),1e3)}))}getConsentApiFromWindow(){return this.wM.getApiObjectFromWindow()}isConsentApiOnPage(){return this.wM.isApiOnPage()}hasIVTConsent(){return this.wM.hasIvtConsent()}getConsentApiType(){return this.wM.apiType}destroy(){clearInterval(this.yM)}IM(t){const{apiWindow:e,apiLocatorFrame:i}=this._M(t);t===T.P.TcfApi?this.wM=new bt(e,i):this.wM=new x(e,i)}_M(t){return{apiWindow:dt(this.Ua,t),apiLocatorFrame:lt(this.Ua,t)}}bM(t){if(gt(t))return T.P.TcfApi;if(vt(t))return T.P.CmpApi;if(ut(this.Ua,T.P.TcfApi))return T.P.TcfApi;return ut(this.Ua,T.P.CmpApi)?T.P.CmpApi:T.P.TcfApi}}var wt,Pt=i(307),Tt=i(4411);!function(t){t.USER_ID="cnx_userId"}(wt||(wt={}));class _t{constructor(t,e){this.CO=t,this.Ua=e,this.TM={[wt.USER_ID]:30},this.kM=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.xM=!1}CM({name:t,value:e}){t===wt.USER_ID&&(this.CO.userId=this.OM(e))}MM(t){let e="";const i=this.TM[t.name];if(i){e=`; expires=${new Date((0,b.XF)(i)).toUTCString()}`}this.Ua.document.cookie=`${t.name}=${t.value}${e}; path=/`}LM(t,e){if(!(0,g.BZ)(t))return;const i={cookieList:t,secureMode:e?r.ProtoCookieSecureModeEnum.Unsecure:r.ProtoCookieSecureModeEnum.Auto,browserInfo:this.BM};return Tt.n.sendProtoRequest({requestData:i,protoRequest:r.ProtoCookieSyncRequest,endpoint:d.n.endPoints.api.cookie,hasCredentials:!0,queryParams:{[Pt.Fk]:o.g.version,[Pt.cc]:d.n.tier},shouldLogErrors:!1}).catch((t=>(0,y.nF)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:y.D_.CRITICAL})))}OM(t){return t.split("_")[0]}getFirstPartyCookie(t){try{const e=t+"=",i=decodeURIComponent(this.Ua.document.cookie).split(";");for(let t of i){for(;" "===t.charAt(0);)t=t.substring(1);if(t.includes(e))return this.OM(t.substring(e.length,t.length))}}catch(t){}return""}getUserId(){return this.CO.userId}syncFirstPartyCookie(t){const e={name:t,value:"",timestamp:(0,b.XF)(this.TM[t])};t===wt.USER_ID&&(e.value=this.CO.userId),(0,A.QM)(e.value)&&this.MM(e)}syncThirdPartyCookieList(t){const e=[wt.USER_ID],i=[];e.forEach((t=>{t===wt.USER_ID&&(0,A.QM)(this.CO.userId)&&i.push({name:wt.USER_ID,value:this.CO.userId,timestamp:(0,b.XF)(this.TM[wt.USER_ID])})})),this.LM(i,t)}setBrowserInfo(t,e){this.BM=t,this.xM=this.kM.includes(t.browserType),this.xM&&e&&this.syncThirdPartyCookieList(this.xM)}setUserId(t){t&&this.CM({name:wt.USER_ID,value:t})}get unsecuredCookieSync(){return this.xM}}class St{constructor(t){this.RM=t,this.DM=!0,this.NM="",this.VM=!1,this.jM=[]}static getInstance(t){const e="cnx_player_usr_storage",i=(0,v.pE)(t).topFrame;return i[e]||(i[e]=new St(i)),i[e]}get isCcpaApplicable(){return this.DM}set isCcpaApplicable(t){this.DM=t}get usPrivacyString(){return this.NM}set usPrivacyString(t){this.NM=t}get userId(){if((0,A.QM)(this.UM))return this.UM.split("_")[0]}set userId(t){this.UM=t}getScope(){return this.RM}registerPlsCall(t){return this.VM?(this.jM.push(t),()=>{}):this.userId?(t(),()=>{}):(this.VM=!0,t(),()=>{this.VM=!1,this.jM.forEach((t=>t())),this.jM=[]})}}var At,xt,kt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};!function(t){t.USER_INFO_RECEIVED="userInfoReceived",t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.NON_BOT_DETECTED="nonBotDetected",t.USER_SETUP_COMPLETE="userSetupComplete",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(At||(At={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived"}(xt||(xt={}));class Et{constructor(t,e,i,n={}){this.$M=e,this.gS=i,this._appSettings=n,this.gdprConsentMode=r.ProtoGdprConsentModeEnum.Unknown,this.qM=new s.x,this.HM=!1,this.JM={},this.GM="{{isEu}}",this.zM=!1,this.WM=!1,this.YM=0,this.XM=!1,this.KM=!1,this.ZM=()=>{!this.tL.isConsentRequired()||this.$M?this.resolveEvent(At.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.tL.isConsentApiOnPage()||this.gS?r.ProtoGdprConsentModeEnum.NoConsent:r.ProtoGdprConsentModeEnum.NoCmp,this.tL.bindToConsentApi().then((()=>{this.gdprConsentMode=r.ProtoGdprConsentModeEnum.NoConsent,this.isConsentConnatix()||(this.gdprConsentMode=r.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(At.CONSENT_DATA_UPDATE)})).catch((t=>{})))},this.eL=()=>{a.$.getEnvelope(this.Z_,this.tL)},this.iL=()=>{this.isConsentConnatix()&&(this.onEvent([At.USER_INFO_RECEIVED,At.NON_BOT_DETECTED]).then((()=>{this.zM&&(this.nL.syncThirdPartyCookieList(),this.nL.unsecuredCookieSync&&this.nL.syncThirdPartyCookieList(this.nL.unsecuredCookieSync),this.nL.syncFirstPartyCookie(wt.USER_ID))})),this.onEvent([xt.SYNC_URLS_RECEIVED,At.CONSENT_DATA_UPDATE,At.CCPA_INFO_RECEIVED,At.NON_BOT_DETECTED,At.USER_SETUP_COMPLETE]).then((()=>{if(this.isConsentConnatix()&&this.rL.isSellUserAllowed())try{if((0,A.$K)(this.oL)&&(0,A.$K)(this.aL)){const t=this.tL.isConsentRequired(),e=this.tL.getConsentDataPayload(),i=t&&(0,A.QM)(e)?e:null,s=this.rL.isCcpaApplicable(),n=this.rL.getUsPrivacyString(),r=s&&(0,A.QM)(n)?n:null;this.oL.playerSync(this.aL,{isGdprApplicable:t,gdprConsent:i,usPrivacy:r})}}catch(t){(0,y.nF)({level:y.D_.WARN,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}})))};try{this.Z_=t,this.CO=St.getInstance(t),this.$M||(this.nL=new _t(this.CO,t));const{cmp:e,tcf:i}=this._appSettings;this.tL=new It(!!this.GM,t,{cmp:e,tcf:i}),this.rL=new I(this.CO,this._appSettings.usPrivacyString),this.lk()}catch(t){(0,y.nF)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:y.D_.CRITICAL})}}get coreSyncResolved(){return this.qM.asObservable()}get userIdentificationPending(){return this.WM}get coreSyncTimestamp(){return this.YM}get lotamePanorama(){return this.hL}set lotamePanorama(t){this.hL=t}get userAudienceIdList(){return this.dL}set userAudienceIdList(t){this.dL=t}get isCoreSyncResolved(){return this.XM}set isIdentityEnhanced(t){this.KM=t}get isIdentityEnhanced(){return this.KM}get identityEnvelope(){return a.$.getValidEnvelope()}fetchUserIdentification(t,e,i){return kt(this,void 0,void 0,(function*(){this.WM=!0;try{const s=(yield c.c.getInstance().load(e)).UserSync,n={implementationType:t,isInApp:this.$M,playerBundleNumber:o.g.version,tier:d.n.tier,ovpDomain:e};return this.oL=new s(this.Z_,n),this.aL=yield this.oL.fetchUserSyncData(i,this._appSettings.deviceID),this.XM=!0,this.qM.next(this.aL),this.aL}catch(t){throw t}finally{this.WM=!1,this.YM=Date.now()}}))}resolveBotEvent(t){t||this.resolveEvent(At.NON_BOT_DETECTED)}resolveUserSetupEvent(){this.resolveEvent(At.USER_SETUP_COMPLETE)}setupLotameService(t){var e;return kt(this,void 0,void 0,(function*(){if(!(0,A.$K)(this.oL))return;const{outcome:i}=yield null===(e=this.oL)||void 0===e?void 0:e.setupLotameService(t);i===n.M5.FailedInit&&(0,y.nF)({message:"LotameService_missing_lotamePanoramaId",level:y.D_.INFO},{pacing:1})}))}lk(){this.ZM(),this.onEvent([At.CONSENT_DATA_UPDATE]).then((()=>{this.eL(),setTimeout((()=>{try{if(this.$M)return;this.iL()}catch(t){(0,y.nF)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:y.D_.CRITICAL})}}),0)}))}lL(t){return void 0===this.JM[t]&&(this.JM[t]=new h.C,this.JM[t].promise.catch((()=>this.JM[t].reject()))),this.JM[t]}get syncedPanoIndivId(){return this.uL}resolveEvent(t,e){this.lL(t).resolve(e)}setAmpUserConsent(t){this.tL.setAmpUserConsent(t),this.resolveEvent(At.CONSENT_DATA_UPDATE)}setPageUrl(t){this.tL&&this.tL.setPageUrl(t)}onEvent(t){const e=t.map((t=>this.lL(t).promise));return Promise.all(e)}isConsent(t,e){return this.tL.isConsent(t,e)}isConsentConnatix(){return this.tL.isConsentConnatix()}ccpaInfoLogging(t){this.rL.ccpaInfoLogging(t)}getConsentPayload(){return this.tL.getConsentDataPayload()}isConsentRequired(){return this.tL.isConsentRequired()}isPersonalisedAdsAllowed(){return this.isConsentRequired()?this.tL.isConsentForPersonalisedAds():!this.isCcpaApplicable()||this.rL.isSellUserAllowed()}isConsentLotame(){return this.isConsentRequired()?this.tL.isConsent(P.VENDOR_ID,P.REQUIRED_PURPOSES):!this.isCcpaApplicable()||this.rL.isSellUserAllowed()}isConsentForVendorAndConnatix(t){return this.isConsentRequired()?this.isConsent(t)&&this.isConsentConnatix():!this.isCcpaApplicable()||this.isSellUserAllowed()}setThirdPartySyncUrls(t){this.$M||this.HM||(this.HM=!0,this.resolveEvent(xt.SYNC_URLS_RECEIVED))}setGeoLocation(t){this.rL.setGeoLocation(t),this.rL.fetchUsPrivacyString().then((()=>{this.resolveEvent(At.CCPA_INFO_RECEIVED)})).catch((()=>{this.resolveEvent(At.CCPA_INFO_RECEIVED)}))}getGeoLocation(){return this.rL.getGeoLocation()}getUserId(){if(this.isConsentConnatix())return this.$M?this.CO.userId:this.nL.getUserId()}pL(){return this.$M?this.CO.userId:this.nL.getUserId()}setUserId(t,e=!1){this.isIdentityEnhanced=e,this.$M?this.fL(t):this.mL(t)}fL(t){this.KM&&(this.CO.userId=t,this.resolveEvent(At.USER_INFO_RECEIVED))}mL(t){this.nL.setUserId(t),this.resolveEvent(At.USER_INFO_RECEIVED),this.isConsentConnatix()&&this.nL.syncFirstPartyCookie(wt.USER_ID)}isGDPR(){return!!this.GM}getUsPrivacyString(){return this.rL.getUsPrivacyString()}isCcpaApplicable(){return this.rL.isCcpaApplicable()}isSellUserAllowed(){return this.rL.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}getForcedIDFV(){return this._appSettings.idfv}gL(){return this._appSettings.deviceID}getTrackableUser(){return this.getUserId()||this.getDeviceId()}getForcedTrackableUser(){return this.pL()||this.gL()}registerPlsCall(t){return this.isConsentConnatix()||(this.zM=!0),this.CO.registerPlsCall(t)}setBrowserInfo(t){this.nL&&this.nL.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this.tL.getConsentApiType()}getConsentApiFromWindow(){if(this.isConsentRequired())return this.tL.getConsentApiFromWindow()}destroy(){this.tL.destroy()}}},9154:(t,e,i)=>{"use strict";i.d(e,{H:()=>n});var s=i(289);const n={[s.ProtoAdSlotsEnum.PreRoll]:s.ProtoAdBreakTypeEnum.PreRoll,[s.ProtoAdSlotsEnum.MidRoll]:s.ProtoAdBreakTypeEnum.MidRoll,[s.ProtoAdSlotsEnum.PostRoll]:s.ProtoAdBreakTypeEnum.PostRoll}},5650:(t,e,i)=>{"use strict";i.d(e,{BZ:()=>d,Gg:()=>u,Sz:()=>h,V7:()=>p,d3:()=>r,ee:()=>v,fn:()=>l,gX:()=>m,qo:()=>o,qy:()=>a,sj:()=>g,tN:()=>f,ti:()=>c});var s=i(7531),n=i(4798);function r(t,e){return e.indexOf(t)>-1}function o(t){return Array.isArray(t)?t:[t]}function a(t,e){const i=[],s=new Map;return e.forEach((e=>{s.has(e[t])||(s.set(e[t],!0),i.push(e))})),i}function h(t){return[].slice.call(t)}function c(t){const e=[];for(const i in t)i&&parseInt(i,10)>=0&&e.push(t[i]);return e}function d(t){return t&&Array.isArray(t)&&t.length>0}function l(t){return d(t)&&t.every((t=>(0,n.hj)(t)))}function u(t){let e="[";for(let i=0;i<t.length;i++)e+=(0,s.HD)(t[i])+(i===t.length-1?"":",");return e+="]",e}function p(t,e){return t.filter((t=>!e.includes(t)))}function f(t,e){const i=new Set(t),s=new Set(e);return[...i].filter((t=>s.has(t)))}function m(t){return t.filter(((e,i)=>t.indexOf(e)===i))}function g(t,e){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}function v(t){const e=[];return t.forEach((t=>e.push(t))),e}},2701:(t,e,i)=>{"use strict";function s(t){return"true"===t||"false"!==t&&void 0}i.d(e,{y:()=>s})},5356:(t,e,i)=>{"use strict";i.d(e,{AK:()=>u,QX:()=>h,S:()=>p,Xj:()=>d,gw:()=>c,mb:()=>l});var s=i(289),n=i(1714),r=i(1599),o=i(3020),a=(i(2728),i(4798));function h(t,e){const i=t.length-1;return{currentIndex:e,nextIndex:e===i?0:e+1,prevIndex:0===e?i:e-1,firstIndex:0,lastIndex:i}}function c(t){let e=s.ProtoAdBreakTypeEnum.None;switch(t){case s.ProtoAdSlotsEnum.PreRoll:e=s.ProtoAdBreakTypeEnum.PreRoll;break;case s.ProtoAdSlotsEnum.MidRoll:e=s.ProtoAdBreakTypeEnum.MidRoll;break;case s.ProtoAdSlotsEnum.PostRoll:e=s.ProtoAdBreakTypeEnum.PostRoll}return e}function d(t,e){return!(e.skippability===s.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan&&t<e.skipMin)}function l(t){return(0,o.pv)(t,r.s6.Ad)||(0,o.pv)(t,n.Ek.InAd)}function u(t,e){return(0,a.r)(e)&&[s.ProtoAdsourceTypeEnum.Vpaid,s.ProtoAdsourceTypeEnum.Ima].includes(t)}function p(t,e){if(t<0&&e<0)return 0;const i=Math.min(t,e);return i<=0?Math.max(t,e):i}},5715:(t,e,i)=>{"use strict";i.d(e,{R:()=>o});var s=i(4798);function n(t){return(0,s.as)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function r(t){return n(t)?o({},t):t}function o(t,e){return function(t,e){const i={};return n(t)&&Object.keys(t).forEach((e=>{i[e]=r(t[e])})),Object.keys(e).forEach((s=>{n(e[s])&&t[s]?i[s]=o(t[s],e[s]):i[s]=r(e[s])})),i}(t,e)}},3020:(t,e,i)=>{"use strict";i.d(e,{BE:()=>J,Dx:()=>x,Fs:()=>k,G$:()=>O,GF:()=>X,Ho:()=>p,IS:()=>q,IV:()=>P,Iy:()=>N,Ji:()=>Y,Kk:()=>lt,LT:()=>j,L_:()=>S,ML:()=>I,MV:()=>u,NN:()=>mt,NS:()=>y,Nb:()=>ht,O7:()=>it,PM:()=>B,Q1:()=>L,S0:()=>M,SH:()=>Q,T7:()=>f,Tp:()=>R,U6:()=>W,UR:()=>ut,Vt:()=>H,Wb:()=>ot,b_:()=>pt,aQ:()=>m,bX:()=>g,bZ:()=>ft,cn:()=>w,dA:()=>rt,dZ:()=>b,eA:()=>at,fj:()=>V,h_:()=>D,jG:()=>U,ju:()=>K,nw:()=>$,oG:()=>G,og:()=>_,pv:()=>T,rI:()=>A,sc:()=>nt,sw:()=>ct,tp:()=>C,uC:()=>v,uc:()=>E,uh:()=>dt,uq:()=>tt,w6:()=>Z,wl:()=>et});var s=i(8576),n=i(1599),r=i(307),o=i(5650),a=i(9791),h=i(51),c=i(4261),d=i(4798);function l(t,e){t&&(t.style.display=e?"":"none")}function u(t){l(t,!1)}function p(t){l(t,!0)}function f(t,e){for(const i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i])}function m(t,...e){e.forEach((e=>{t.style[e]=""}))}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function v(t,e=document){g(e.getElementById(t))}function y(t,e,i,s,n){if(e)try{const r=i.document.createElement("link");return r.id=t.id,r.type="text/css",r.rel="stylesheet",r.href=t.src,(0,d.mf)(s)&&(r.onload=()=>{s()}),(0,d.mf)(n)&&(r.onerror=t=>{e.removeChild(r),(0,d.HD)(t)?n(`link_stylesheet_load_error_${t}`):n(`link_stylesheet_load_error_${function(t,e){const i=t.document.createElement("div");return i.appendChild(e),i.innerHTML}(i,r)}`)}),e.appendChild(r),r}catch(t){return null}}function b(t,e,i,s,n,r=!0,o){try{const a=i.document.createElement("script");if(a.src=t.src,a.async=!0,a.type="text/javascript",t.id&&(a.id=t.id),t.attributes)for(const e of t.attributes)a.setAttribute(e.name,e.value);return(0,d.mf)(s)&&(a.onload=()=>{s()}),a.onerror=i=>{e.removeChild(a),r&&(0,c.nF)({message:o,exception:"script_load_error",callStack:t.src,level:c.D_.INFO},{throttle:2,shouldSendMaxLog:!1}),(0,d.mf)(n)&&n()},e.appendChild(a),a}catch(e){return r&&(0,c.nF)({message:o,exception:`script_insert_error_${e.message}_${e.stack}`,callStack:t.src,level:c.D_.CRITICAL},{throttle:2,shouldSendMaxLog:!1}),(0,d.mf)(n)&&n(),null}}function I(t,e,i){if(t)try{const s=e.document.createElement("script"),n=e.document.createTextNode(i);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function w(t,...e){t&&t.classList.add(...e)}function P(t,...e){t&&t.classList.remove(...e)}function T(t,e){return t&&t.classList.contains(e)}function _(t,e,i){return!!t&&t.classList.toggle(e,i)}function S(t,e,i,s=!1){t&&(t.classList.remove(e),t.classList.add(i),s&&R(t))}const A=(t,e)=>e.document.getElementById(t),x=(t,e,i)=>e.getComputedStyle(t,i),k=(t,e)=>e.document.getElementsByClassName(t);function E(t,e="",i){const s=i.document.getElementsByTagName("head")[0],n=i.document.createElement("style");n.setAttribute("type","text/css"),n.id=e,n.appendChild(i.document.createTextNode(t)),s.appendChild(n)}function C(t,e){const i=e.document.getElementsByTagName("head")[0],s=e.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),i.appendChild(s)}function O(t,e){const i=e.document.createElement("div");return i.innerHTML=t,i.firstElementChild}function L(t,e){e>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function M(t){return s.Ht.find((e=>{if(e.keys.fullscreenEnabled in t)return!0}))}function R(t){t.getBoundingClientRect()}function B(t,e){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(e)}function D(t,e){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(e)}function N(t){return!!t.closest(".cnx-el")}function F(t,e,i){const s=function(t,e){const i=function(t,e){let i=e;for(;i;){const e=i.parentNode;if(e){const i=t.reduce(((t,i)=>t||e.querySelector(i)),null);if(i)return i}i=e}return null}(t,e);return i?x(i,j(i)):null}(t,e);return s?function(t,e){return t.getPropertyValue(e)}(s,i):null}function $(t){const e=F(["h1","h2"],t,"font-family");return e||"inherit"}function V(t){const e=F(["p"],t,"font-family");return e||"inherit"}function j(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function U(t,e){t&&e&&(Array.isArray(t)?t.forEach((t=>e.appendChild(t))):e.appendChild(t))}function q(t,e,i){let s=!1;const n=(0,o.Sz)(e.children);for(let e=0;e<n.length;e++)if(i-1===e||0===i){s=!0,Array.isArray(t)?H(n[e],...t):H(n[e],t);break}s||U(t,e)}function H(t,...e){if(t&&t.parentElement)for(let i=e.length;i--;)t.parentElement.insertBefore(e[i],t)}function J(t,...e){for(let i=e.length;i--;)t.parentNode.insertBefore(e[i],t.nextSibling)}function G(t,e){return(0,o.Sz)(e.children).indexOf(t)}function z(t){const e=j(t);if(!e)return;const{display:i}=x(t,e);"none"===i&&(t.style.display="block")}function W(t,e=(()=>{})){const i=function(s){"opacity"===s.propertyName&&(P(t,n.jG.FadeOutBase,n.jG.FadeOut),e(),t.removeEventListener("transitionend",i))};w(t,n.jG.FadeOutBase),z(t),R(t),t.addEventListener("transitionend",i),w(t,n.jG.FadeOut)}function Y(t,e=(()=>{})){const i=function(s){"opacity"===s.propertyName&&(P(t,n.jG.FadeInBase,n.jG.FadeIn),e(),t.removeEventListener("transitionend",i))};w(t,n.jG.FadeInBase),z(t),R(t),t.addEventListener("transitionend",i),w(t,n.jG.FadeIn)}function X(t){const e=j(t);if(!e)return!0;const{display:i,opacity:s}=x(t,e);return"none"===i||"0"===s}function Q(t,e){return null===t.firstChild?t.appendChild(e):t.insertBefore(e,t.firstChild)}function K(t,e){const i=e.document.createElement("div");return i.innerHTML=t||"",i.innerText}function Z(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function tt(t,e){const i=(0,a.pE)(t).topFrame;return i[e]?i:null}function et(t,e){let i=t,s=null;try{for(;!s;){try{i.frames[e]&&(s=i)}catch(t){}if(!t.top||t.top===i)break;i=i.parent}}catch(t){}return s}function it(t,e,i){try{st(t.frameElement)&&i&&(t[e]=i)}catch(t){(0,c.nF)({message:"DomUtils_setPropertyIntoCurrentIframe",exception:t.message,callStack:t.stack,level:c.D_.INFO},{throttle:1,shouldSendMaxLog:!1})}}function st(t){return t&&"IFRAME"===t.tagName}function nt(t){var e;try{const i=t.getElementsByTagName("iframe")[0];return st(i)&&(i.contentDocument||(null===(e=i.contentWindow)||void 0===e?void 0:e.document))||t}catch(e){return t}}function rt(t){return 0!==t.getElementsByTagName("a").length}function ot(t,e){let i=[];try{i=i.slice.call(e.document.querySelectorAll(t),0)}catch(t){}return i}function at(t){return(0,a.pE)(t).topFrame.location.protocol.includes("https")}function ht(t){if(!at(t))return;[window,t].forEach((t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const e=t.document.createElement("meta");e.setAttribute("http-equiv","Content-Security-Policy"),e.content="upgrade-insecure-requests",t.document.head.appendChild(e)}}))}function ct(t){return(0,a.pE)(t).topFrame.document.referrer}function dt(t,e){const i=(0,a.pE)(e).topFrame.location.hostname,s=(0,a.bx)(t);return s&&s.hostname===i}function lt(t){t.removeAttribute("href"),t.removeAttribute("target"),t.removeAttribute("download"),t.removeAttribute("ping"),t.removeAttribute("rel"),t.removeAttribute("media"),t.removeAttribute("hreflang"),t.removeAttribute("type")}function ut(t){setTimeout((()=>{let e=t.currentTime+.01;e>t.duration&&(e=.01),t.currentTime=e}),0)}function pt(t,e){!function(t,e,i){const s=t.document.createElement("link");s.rel="preload",s.href=e,s.as=i,t.document.head.appendChild(s)}(e,t,"script")}function ft(t,e){if(!e||!mt(e))return(0,c.nF)({message:"Prerender_Elements_getgetCustomerId_no_currentScript",level:c.D_.CRITICAL}),null;const i=e.src;return(0,h.Ph)(r.ym,i)}function mt(t){return"SCRIPT"===t.tagName}},9791:(t,e,i)=>{"use strict";i.d(e,{Ae:()=>_,Hh:()=>p,Ld:()=>k,Of:()=>y,Qq:()=>T,Up:()=>I,Vm:()=>f,W$:()=>S,Xf:()=>b,YY:()=>C,N_:()=>A,bx:()=>l,dz:()=>h,er:()=>c,j6:()=>E,lU:()=>d,ld:()=>v,oC:()=>w,ox:()=>x,pE:()=>u,qs:()=>a,rM:()=>P,sq:()=>m,we:()=>g});var s=i(5650),n=i(51),r=i(7531),o=i(4798);function a(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}))}function h(){return a().replace(/-/g,"")}function c(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t.trim())}function d(t,e){let i="";if(!t.err)try{i=t.topFrame.location.href}catch(t){}if(!i||0===i.length)try{i=e.top.location.href}catch(t){}if(!i||0===i.length)try{i=t.topFrame.document.referrer}catch(t){}return i}function l(t){try{const e=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]}}catch(t){return null}}function u(t){let e=t,i=null,s=!1;try{for(;e.parent.document!==e.document;){if(!e.parent.document){s=!0;break}i=e,e=e.parent}}catch(t){s=!0}return{topFrame:e,topChildFrame:i,err:s}}function p(t=[],e,i={}){t.forEach((t=>{if((0,o.HD)(t)){let a=t;(0,o.Xz)(i)&&(a=`${t}${(0,n.CK)(t)}${function(t,e){const i=[];return Object.keys(t).forEach((n=>{const a=e?`${e}[${n}]`:n,h=t[n];if((0,o.as)(h))i.push(`${encodeURIComponent(a)}=${(0,r.HD)(h)}`);else if(Array.isArray(h))i.push(`${encodeURIComponent(a)}=${(0,s.Gg)(h)}`);else if(null!=h){const t=encodeURIComponent(h),e=encodeURIComponent(a);t&&e&&i.push(`${e}=${t}`)}})),i.join("&")}(i)}`),(new e.Image).src=a}}))}function f(t){const e=Math.floor(100*Math.random());let i=0,s=0;for(let n=0;n<t.length;n++)if(s+=t[n],e<s){i=n;break}return i}function m(t){const e=Math.min(Math.max(t,0),100);return!!f([100-e,e])}function g(){let t=!1;try{const e=document.createElement("audio");e.volume=1,e.muted=!1;const i=e.play();void 0!==i&&i.catch((()=>{})),t=!e.paused,e.pause()}catch(t){}return t}function v(t,e=0,...i){return setTimeout((()=>{t.apply(this,i)}),e)}function y(t,e,i){let s=0,n=t;for(;s<=i;){if(s++,n.classList.contains(e))return!0;if(n=n.parentElement,!n)return!1}return!1}function b(t,e){try{const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);let s=parseInt(i[1],16),n=parseInt(i[2],16),r=parseInt(i[3],16);s/=255,n/=255,r/=255;const o=Math.max(s,n,r),a=Math.min(s,n,r);let h,c,d=(o+a)/2;if(o===a)h=c=0;else{const t=o-a;switch(c=d>.5?t/(2-o-a):t/(o+a),o){case s:h=(n-r)/t+(n<r?6:0);break;case n:h=(r-s)/t+2;break;case r:h=(s-n)/t+4}h/=6}return h=Math.round(360*h),c=Math.round(100*c),d=Math.round(100*d),d+=e/100*(100-d),`hsl(${h},${c}%,${d}%)`}catch(e){return t}}function I(t,e=5,i){return new Promise(((s,n)=>{t().then(s).catch((r=>{1===e||(0,o.mf)(i)&&i(r)?n(r):I(t,e-1,i).then(s,n)}))}))}function w(){const t=!!window.MSInputMethodContext&&!!document.documentMode,e=navigator.userAgent.toLowerCase().includes("msie");return t||e}function P(t){return Object.keys(t).reduce(((e,i)=>Object.assign(Object.assign({},e),{[i]:`${t[i]}`})),{})}function T(t=navigator.userAgent){return t.includes("; wv")}function _(t){return Math.floor(Math.random()*Math.pow(10,t))}function S(t){return(0,o.VZ)(t)?t:(0,o.QM)(t)?new Error(t):new Error(String(t))}function A(t){return Math.ceil(2*t)/2}function x(t){return Math.trunc(100*t)/100}function k(t,e){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return i}function E(t,e){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return i}function C(t,e){let i;return Promise.race([t,new Promise((t=>i=setTimeout(t,e)))]).finally((()=>clearTimeout(i)))}},51:(t,e,i)=>{"use strict";i.d(e,{Bp:()=>o,CK:()=>a,FM:()=>c,Ph:()=>r,ge:()=>h,jv:()=>p,sH:()=>u});var s=i(4798);const n=".cdn.ampproject.org";function r(t,e){e||(e=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const i=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(e);return null===i?null:decodeURIComponent(i[1])}function o(t,e,i){const s=new RegExp(`([?&])${e}=.*?(&|$)`,"i"),n=a(t);return t.match(s)?i?t.replace(s,`$1${e}=${i}$2`):t.replace(s,"$1"):`${t}${n}${e}=${i}`}function a(t){return t.includes("?")?"&":"?"}function h(t){if((0,s.QM)(t))return d(t).split("/")[0]}function c(t){if((0,s.QM)(t))return d(t)}function d(t){return t.includes("://")?t.split("://")[1]:t}function l(t,e){return`${"http"+(/(\/s\/)+/.test(t.replace(e,""))?"s":"")}://${e}`}function u(t,e=!0){return t=function(t){if(!t.includes(n))return t;const e="www.",i="amp.";if((t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-",e)).replace("amp-",i)).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace(e,i)).includes(i))return t;const s="http://",r="https://";return(t=t.replace(s,`${s}${i}`)).replace(r,`${r}${i}`)}(t=function(t){const e=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==e){const i=t.replace(e[0],"");return l(t,i)}return t}(t=function(t){if(t.includes(n)){t=t.replace("https://","");const e=/^[^\/]+(\/[a-z]+\/)+s*\/*/,i=e.test(t)?t.replace(e.exec(t)[0],""):t;return l(t,i)}return t}(t))),e&&(t=function(t){if(!t.includes("#origin-")&&!t.includes("viewerUrl-"))return t;const e=t.split("#origin-")[1].split("viewerUrl-");return u(t=decodeURIComponent(e[1]),!1)}(t)),t}function p(t){try{return new URL(t),!0}catch(t){return!1}}},2728:(t,e,i)=>{"use strict";i.d(e,{$:()=>p});const s=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,n=t=>{if("string"!=typeof t)throw new TypeError("Invalid argument expected string");const e=t.match(s);if(!e)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return e.shift(),e},r=t=>"*"===t||"x"===t||"X"===t,o=t=>{const e=parseInt(t,10);return isNaN(e)?t:e},a=(t,e)=>{if(r(t)||r(e))return 0;const[i,s]=((t,e)=>typeof t!=typeof e?[String(t),String(e)]:[t,e])(o(t),o(e));return i>s?1:i<s?-1:0},h=(t,e)=>{for(let i=0;i<Math.max(t.length,e.length);i++){const s=a(t[i]||"0",e[i]||"0");if(0!==s)return s}return 0},c=(t,e,i)=>{u(i);const s=((t,e)=>{const i=n(t),s=n(e),r=i.pop(),o=s.pop(),a=h(i,s);return 0!==a?a:r&&o?h(r.split("."),o.split(".")):r||o?r?-1:1:0})(t,e);return d[i].includes(s)},d={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},l=Object.keys(d),u=t=>{if("string"!=typeof t)throw new TypeError("Invalid operator type, expected string but got "+typeof t);if(-1===l.indexOf(t))throw new Error(`Invalid operator, expected one of ${l.join("|")}`)};var p,f=i(4798);!function(t){t.shouldUseExternalViewabilityService=function(t){return c(t,"3.0.0","<")},t.showAndroidExpandButton=function(t){return c(t,"3.2.0",">=")},t.shouldUseOmsdkForAds=function(t){return c(t,"4.3.0",">=")},t.getEnvironment=function(t){const e=(0,f.QM)(t.bundleID),i=(0,f.QM)(t.sdkVersion),s=(0,f.QM)(t.reactNativeSdkVersion),n=(0,f.QM)(t.flutterSdkVersion);return{isInApp:e,isInAppSDK:i,isInAppHybrid:t.webViewability,isInAppReactNative:s,isInAppFlutter:n}},t.isValidWebviewInApp=function(t){return t.isInApp&&t.isInAppHybrid},t.canUseNativeImaSdk=function(t){return!!(0,f.QM)(t)&&c(t,"4.4.0",">=")}}(p||(p={}))},4261:(t,e,i)=>{"use strict";i.d(e,{D_:()=>A,nF:()=>k,Mn:()=>E});var s=i(8659),n=i(5204),r=i(7107),o=i(6174),a=i(9005),h=i(6568),c=i(6565),d=i(9791),l=i(9600),u=i(4798),p=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(t,e){return function(i,s){e(i,s,t)}};let g=class{constructor(t,e,i){this.ah=t,this.vL=e,this.Mi=[],this.yL=o.V.None,this.Mi.push(i.adBreakStart.asObservable().subscribe((({isLinear:t})=>{this.yL=t?o.V.Linear:o.V.NonLinear})),i.adBreakEnd.asObservable().subscribe((()=>{this.yL=o.V.None})))}getLoggingData(t=0){const e=this.ah.serverAb0,i=(0,u.hj)(e)?100:t;if(!this.bL(i))return;const s=this.IL();if(s.player.id=this.ah.playerId,s.environment.isTabFocus=this.ah.isPageInFocus,this.ah.playerEnvironment!==a.Q.Unknown&&(s.environment.renderEnvironment=this.ah.playerEnvironment),this.ah.currentMediaMetadata){const t=this.ah.currentMediaMetadata.mediaRevision;s.player.media={mediaId:this.ah.currentMediaMetadata.mediaId,mediaRevisionNumber:t?`${this.ah.currentMediaMetadata.mediaRevision}`:void 0,contentRevisionId:this.ah.currentMediaMetadata.contentRevisionId,isExternal:!!this.ah.currentMediaMetadata.isExternalMedia}}return this.ah.playerDimensions&&(s.player.size=this.ah.playerDimensions),s.player.isInView=this.vL.sessionViewabilityChanged.value.isInView,s.player.type=this.ah.playerType,this.ah.playerType!==h.e.Outstream&&(s.player.state=this.ah.playerState),s.player.advertising.adBreak=this.yL,s.environment.injectedServerAb0=this.ah.serverAb0,s}dispose(){(0,l.i)(this.Mi)}bL(t){return!!this.ah.canTrackAllRequests||!!(0,d.sq)(t)}IL(){return{player:{media:{isExternal:!1},advertising:{adBreak:o.V.None},isInView:!1},environment:{}}}};g=p([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),m(0,(0,s.f3)(r.B)),m(1,(0,s.f3)(c.q)),m(2,(0,s.f3)(n.k)),f("design:paramtypes",[Object,Object,Object])],g);var v=i(7945);const y=!0;var b=i(9741),I=i(9906),w=i(6153),P=i(51);var T=i(6258);const _=500;let S=window.location&&window.location.href;try{S=window.top.location.href}catch(t){}var A;!function(t){t.EMERGENCY="Emergency",t.ALERT="Alert",t.CRITICAL="Critical",t.ERROR="Error",t.WARN="Warn",t.INFO="Info"}(A||(A={}));const x={throttle:30,shouldSendMaxLog:!0,pacing:0,extraLogsPercentage:0};function k(t,e={}){e=Object.assign(Object.assign({},x),e);const i=function(t){return!("true"===(0,P.Ph)("cnxDebugLogs",t))}(t.pageUrl||S);if(!(i&&e.pacing>0)||(0,d.sq)(e.pacing)){if(t.sessionId)try{const i=I.h.getSessionChildContainer(t.sessionId).resolve(g);t.extra=i.getLoggingData(e.extraLogsPercentage)}catch(t){}if(t.sessionId=t.sessionId?t.sessionId:b.S.sessionId,y&&i&&(b.S.incrementLogCount(t.message),b.S.isMaxLogOverflow(t.message)&&k({message:"Logging_max_log_overflow_1000",exception:t.message,callStack:t.callStack,level:A.ALERT,sessionId:t.sessionId},{shouldSendMaxLog:!1,throttle:100,extraLogsPercentage:100}),b.S.isMaxLog(t.message,e.throttle)))e.shouldSendMaxLog&&!b.S.isMaxLogSent(t.message)&&(b.S.setMaxLogSent(t.message),k({message:"Logging_max_log_sent",exception:t.message,callStack:t.callStack,level:A.CRITICAL,sessionId:b.S.sessionId}));else{if(void 0===t.callStack){const e=new Error(t.message);t.callStack=e.stack}if(t.callStack=t.callStack.substring(0,_),v.g.logToServer){t.pageUrl=t.pageUrl||S,t.version=v.g.version;let i="connatix.com";try{i=w.n.bundleDomain}catch(t){}const s="https://pl."+i;t.ddsource="browser",t.service="player",t.ua=navigator.userAgent,e.sendBeacon?function(t,e){const i=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon(e,i)}(t,s):(0,T.Z)({requestUrl:s,requestType:"POST",withCredentials:!1},JSON.stringify(t)).catch((()=>{}))}!v.g.logToConsole&&i||function(t){let e;switch(t.level){case A.CRITICAL:e="#8B0000";break;case A.WARN:e="#FF8C00";break;case A.INFO:e="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${e}`)}(t)}}}function E(t,e){var i;null===(i=null==t?void 0:t.settings)||void 0===i||delete i._connatixInternals,t.settings&&0===Object.keys(t.settings).length&&delete t.settings;(1!==Object.keys(t).length||e)&&k({level:A.INFO,message:"CNX_CUSTOM_SETTINGS",customConfig:{config:JSON.stringify(t),hasRenderCallback:e}},{pacing:1})}},7332:(t,e,i)=>{"use strict";i.d(e,{DE:()=>r,ON:()=>c,Tc:()=>a,aX:()=>o,dO:()=>l,dQ:()=>n,oK:()=>h,uc:()=>d});var s=i(4798);function n(t,e,i,s,n){return i+(s-i)*function(t,e,i){return(i-t)/(e-t)}(t,e,n)}function r(t,e){return e.reduce(((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e))}function o(t,e){let i=t,s=e;for(;0!==i&&0!==s;)i>s?i%=s:s%=i;return 0===i?s:i}function a(t,e){return e/100*t}function h(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function c(t){return!(0,s.r)(t.width)||!(0,s.r)(t.height)}function d(t){const e=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let s;for(s=e.length-1;s>0&&!(t>=e[s].value);s--);return t/e[s].value<e[s].value/10?(Math.floor(t/e[s].value*10)/10).toFixed(1).replace(i,"$1")+e[s].symbol:Math.floor(t/e[s].value).toFixed(0)+e[s].symbol}function l(t,e){for(let i=e;i>1;i--)t%i==0&&e%i==0&&(t/=i,e/=i);return{widthRatio:t,heightRatio:e}}},7531:(t,e,i)=>{"use strict";function s(t){for(const e in t)t.hasOwnProperty(e)&&"string"==typeof t[e]&&(t[e]=`%22${encodeURIComponent(t[e])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}function n(t,e){return Object.assign(Object.assign({},t),e)}function r(t,e){const i=Object.assign({},t);return e.forEach((t=>{delete i[t]})),i}function o(t){return Object.keys(t)[0]}i.d(e,{$0:()=>o,G_:()=>r,HD:()=>s,S1:()=>n})},9600:(t,e,i)=>{"use strict";function s(t=[]){t.filter((t=>!!t)).forEach((t=>t.unsubscribe()))}i.d(e,{i:()=>s})},3003:(t,e,i)=>{"use strict";i.d(e,{EQ:()=>o,Ed:()=>u,Ft:()=>c,IS:()=>l,J5:()=>r,V7:()=>h,VN:()=>p,hF:()=>d,k0:()=>a});var s=i(4261),n=i(4798);function r(t){return t.replace(/[-]/g,"&#x2011;")}function o(t){try{return Object.keys(t).reduce(((e,i)=>Object.assign(Object.assign({},e),{[i]:(0,n.QM)(t[i])&&t[i].includes("%%")?void 0:t[i]})),{})}catch(e){return(0,s.nF)({message:"sanitizeDfpMacros_error",exception:e.message,callStack:e.stack,level:s.D_.WARN}),Object.keys(t).reduce(((e,i)=>Object.assign(Object.assign({},e),{[i]:(0,n.QM)(t[i])&&t[i].includes("%%")?void 0:t[i]})),{})}}function a(t){return/<[a-z/][\s\S]*>/i.test(t)}function h(t,e){const i=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp(`<${i}>(.*?)</${i}>`,"g");return t.replace(s,((t,i)=>i.split(" ").map((t=>`<${e}>${t}</${e}>`)).join(" ")))}function c(t){return!!t.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/)}function d(t){return t.replace(/^\s+|\s+$|\s+(?=\s)/g,"")}function l(t,e){return`${t}-${e}`}function u(t,e){return t.match(e)||[]}function p(t,e,i){return(0,n.QM)(t)?t.substring(e,i):""}},1310:(t,e,i)=>{"use strict";i.d(e,{H8:()=>f,QI:()=>o,VG:()=>l,WH:()=>h,XF:()=>a,dO:()=>d,k$:()=>u,kw:()=>v,pP:()=>r,qd:()=>p,qe:()=>m,qt:()=>y,to:()=>c,w4:()=>g});var s=i(9357),n=i(4798);function r(t){let e,i;return(0,n.HD)(t)&&(e=t.match(s.T9),e&&(i=parseInt(e[1],10)*s.p7+parseInt(e[2],10)*s.uD+parseInt(e[3],10)*s.s_+parseInt(e[5]||0,10))),isNaN(i)?null:i}function o(t,e){return/^\d+(\.\d+)?%$/g.test(t)?e?e*parseFloat(t.replace("%",""))/100:null:r(t)}function a(t){return Date.now()+t*s.ti}function h(t){return Date.now()+t*s.p7}function c(t,e=":"){const i=t=>t>=10?t:`0${t}`;return`${i(Math.floor(t/60))}${e}${i(Math.floor(t%60))}`}function d(){return Date.parse(new Date(Date.now()).toUTCString())}function l(t){const e=Date.parse(t+" GMT");if(!(0,n.hj)(e))return;const i=Math.floor((d()-e)/1e3);if(!(0,n.r)(i))return"just now";const s=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let r;for(r=s.length-1;r>0&&!(i>=s[r].value);r--);return Math.floor(i/s[r].value).toFixed(0)+s[r].symbol+" ago"}function u(t,e){const i=Date.now();return!(i<t||i>e)}function p(t){return Date.now()-t}function f(t){return Math.floor(p(t)/s.s_)}function m(t,e){return t>=e?t/s.s_:t}function g(t){return(0,n.hj)(t)?t*s.s_:null}function v(t){return Math.round(t/s.s_)}function y(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),s=Math.floor(t%3600%60);let n="";return n=e>0?n+`${e}`.slice(-2)+" hours ":"",n+=i>0?`${i}`.slice(-2)+" minutes ":"",n+=s>0?`${s}`.slice(-2)+" seconds":"0 seconds",n}},4798:(t,e,i)=>{"use strict";function s(t){return"string"==typeof t}function n(t){return"number"==typeof t&&isFinite(t)}function r(t){return n(t)&&t>0}function o(t){return n(t)&&t>=0}function a(t){return s(t)&&t.length>0}function h(t){return void 0!==t}function c(t){return null===t}function d(t){return t&&t.stack&&t.message||t instanceof Error}function l(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function p(t){return u(t)&&Object.keys(t).length>0}function f(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}function m(t,e){var i;return a(t)?!(!(null===(i=Object.values(e))||void 0===i?void 0:i.includes(t))||Object.keys(e).includes(t)):!!n(t)&&t in e}function g(t){return"boolean"==typeof t?t:"true"===t}i.d(e,{$K:()=>h,Cz:()=>m,Ft:()=>c,HD:()=>s,Mx:()=>g,QM:()=>a,VZ:()=>d,Xc:()=>o,Xz:()=>p,as:()=>u,cL:()=>f,hj:()=>n,mf:()=>l,r:()=>r})},6258:(t,e,i)=>{"use strict";var s;i.d(e,{Z:()=>d}),function(t){t.Brands="brands",t.Mobile="mobile",t.Architecture="architecture",t.Bitness="bitness",t.Model="model",t.Platform="platform",t.PlatformVersion="platformVersion",t.UaFullVersion="uaFullVersion",t.Wow64="wow64",t.FullVersionList="fullVersionList"}(s||(s={}));var n=i(4798),r=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class o{constructor(){}static getInstance(){return this.INSTANCE||(this.INSTANCE=new o),this.INSTANCE}fetch(){var t,e;return r(this,void 0,void 0,(function*(){return(0,n.$K)(this.wL)?this.wL:(null===(e=null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgentData)||void 0===e?void 0:e.getHighEntropyValues)?(this.wL=yield this.PL(),this.wL):null}))}PL(){return r(this,void 0,void 0,(function*(){return(0,n.$K)(this._L)||(this._L=new Promise((t=>{window.navigator.userAgentData.getHighEntropyValues([s.FullVersionList,s.PlatformVersion,s.Architecture,s.Bitness,s.Model]).then((e=>t(e))).catch((()=>t(null)))}))),this._L}))}}var a=i(5650),h=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};const c=3e4;function d(t,e){return h(this,void 0,void 0,(function*(){let i=null;t.shouldSetClientHintsHeaders&&(i=yield o.getInstance().fetch());const s=function({requestUrl:t,requestType:e="POST",contentType:i="",responseType:s="",withCredentials:r=!1,timeout:o=c,shouldSetClientHintsHeaders:h},d=null){const l=new XMLHttpRequest;if(l.open(e,t,!0),h&&d){const{model:t,platformVersion:e,architecture:i,bitness:s,fullVersionList:r}=d;(0,n.QM)(e)&&l.setRequestHeader("X-Sec-CH-UA-Platform-Version",e),(0,n.QM)(i)&&l.setRequestHeader("X-Sec-CH-UA-Arch",i),(0,n.QM)(s)&&l.setRequestHeader("X-Sec-CH-UA-Bitness",s),(0,n.QM)(t)&&l.setRequestHeader("X-Sec-CH-UA-Model",t),(0,a.BZ)(r)&&l.setRequestHeader("X-Sec-CH-UA-Full-Version-List",r.map((t=>`"${t.brand}";v="${t.version}"`)).join(", "))}i.length>0&&l.setRequestHeader("Content-Type",i);s.length>0&&(l.responseType=s);return l.timeout=o,l.withCredentials=r,l}(t,i),r=new Date;return new Promise(((t,i)=>{s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200===s.status)t(s.response);else{let t="";try{t=s.responseText}catch(t){}const e=(new Date).getTime()-r.getTime();i(new Error(`Request fail. status:${s.status}, readyState:${s.readyState}, response:${t}, time:${e}`))}},s.ontimeout=()=>{const t=(new Date).getTime()-r.getTime();i(new Error(`Request timeout status:${s.status}. time:${t}`))},s.send(e)}))}))}},4411:(t,e,i)=>{"use strict";i.d(e,{n:()=>s});var s,n=i(8657),r=i(8041),o=i(6153),a=i(9791),h=i(51),c=i(4261),d=i(4798),l=i(6258);!function(t){let e;function i(t,e){return(0,d.as)(e)?(Object.keys(e).forEach((i=>t=(0,h.Bp)(t,i,e[i]))),t):t}function s(t,i,s,n){return new Promise(((r,a)=>{i.then((i=>{if(t){let h=null;try{const e=i?new Uint8Array(i):new Uint8Array;h=s.includes(o.n.endPoints.api.tam)?t.fromBinary(e):t.toObject(t.decode(e),{defaults:!0,arrays:!0,objects:!0})}catch(t){!function(t,i,s,n){let r;try{r=JSON.parse((new TextDecoder).decode(t))}catch(t){}r?(r.ErrorMessage===e.DumpJson&&(0,c.nF)({message:e.DumpJson,exception:JSON.stringify(s),callStack:i,level:c.D_.INFO}),r.ErrorMessage===e.ServerError&&(0,c.nF)({message:e.ServerError,exception:i,level:c.D_.WARN})):(0,c.nF)({exception:n.message,requestUrl:i,requestData:JSON.stringify(t),message:e.ProtobufDecode,callStack:n.stack,level:c.D_.WARN},{throttle:10})}(i,s,n,t),a(e.ProtobufDecode)}r(h)}})).catch((t=>{a(t)}))}))}function u(t,e,i){try{const s=(0,a.Vm)([95,5]);let n;if(!s||e&&0!==Object.keys(e).length||(0,c.nF)({message:"empty_proto_request",callStack:"empty_function_argument",exception:i,level:c.D_.INFO},{shouldSendMaxLog:!1}),i.indexOf(o.n.endPoints.api.tam)>=0)n=e.toBinary();else{const r=t.fromObject(e);!s||r&&0!==Object.keys(r).length||(0,c.nF)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:i,level:c.D_.INFO},{shouldSendMaxLog:!1}),n=t.encode(r).finish()}return!s||n&&0!==Object.keys(n).length||(0,c.nF)({message:"empty_proto_request",callStack:"empty_encode_result",exception:i,level:c.D_.INFO},{shouldSendMaxLog:!1}),n}catch(t){throw(0,c.nF)({exception:t.message,requestUrl:i,requestData:JSON.stringify(e),level:c.D_.CRITICAL,callStack:t.stack,message:"Protobuf_encode"},{throttle:10}),Error()}}!function(t){t.DumpJson="Dump Json",t.ServerError="Server Error",t.ProtobufDecode="Protobuf_decode"}(e||(e={})),t.fetchXMLRequest=function(t,e=!0){const i=(0,l.Z)({requestUrl:t,requestType:"GET",withCredentials:e,shouldSetClientHintsHeaders:!1});return new Promise(((t,e)=>{i.then((e=>{t(e)})).catch((t=>{e(t)}))}))},t.sendProtoRequest=function({protoResponse:t,protoRequest:e,requestData:o,endpoint:h,requestType:d,hasCredentials:p,queryParams:f,shouldLogErrors:m,shouldSetClientHintsHeaders:g,timeout:v}){const y=o?u(e,o,h):null;return h=i(h,f),r.oM===n.o.elements&&h.includes(n.o.connatix)&&(0,c.nF)({message:"Connatix_domain_request_in_ovp_session",level:c.D_.WARN,extra:this.yS},{pacing:1}),function(t,e,i="POST",n,r,o,a,h=!1){return s(t,(0,l.Z)({requestUrl:e,requestType:i,withCredentials:r,shouldSetClientHintsHeaders:h,contentType:"POST"===i?"multipart/form-data":"",responseType:"arraybuffer",timeout:o},n),e,a)}(t,h,d,y,p,v,o,g).catch((t=>{throw m&&(0,a.Vm)([95,5])&&(0,c.nF)({message:"Xhr_error",exception:h,callStack:`${t}, requestData: ${JSON.stringify(o)}`,level:c.D_.INFO}),new Error(t)}))},t.sendProtoBeaconRequest=function({protoRequest:t,requestData:e,endpoint:s,queryParams:n=null}){s=i(s,n);const r=e?u(t,e,s):null;return navigator.sendBeacon(s,r)},t.trackPixel=function(t){try{return(new Image).src=t,!0}catch(t){return(0,c.nF)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:c.D_.CRITICAL}),!1}}}(s||(s={}))},8021:(t,e,i)=>{"use strict";i.d(e,{fB:()=>a,m$:()=>r,tO:()=>o,v$:()=>n,w:()=>s});const s={OrientationPortrait:"cnx-in-ps-portrait",OrientationLandscape:"cnx-in-ps-landscape",VideoLayout:"cnx-in-ps-video-layout"},n={Container:"cnx-playspace-container",Content:"cnx-playspace-content",Footer:"cnx-playspace-footer",Slider:"cnx-playspace-slider",Slide:"cnx-playspace-slide-container",Overlay:"cnx-ui-click-to-play-overlay",ImageWrapper:"cnx-ui-ps-image-wrapper",ImageBackground:"cnx-ui-ps-image-background",MediaLogo:"cnx-is-media-logo"},r={VideoSizeSlot:"cnx-ad-video-size-slot"},o={Main:"cnx-top-title",LogoContainer:"cnx-top-title-logo-container",Logo:"cnx-top-title-logo",LogoPortrait:"cnx-top-title-logo-portrait",LogoLandscape:"cnx-top-title-logo-landscape",LogoAnimation:"cnx-top-title-logo-animation",TitlesContainer:"cnx-top-title-text-container",TopStoryTitle:"cnx-top-title-story-text",TopSlideTitle:"cnx-top-title-slide-text",TextPlaceholder:"cnx-top-title-highlight-text-placeholder",Text:"cnx-top-title-highlight-text",TextOuterContainer:"cnx-top-title-highlight-text-outer-container",TextInnerContainer:"cnx-top-title-highlight-text-inner-container",SlideIn:"cnx-top-title-slide-in",SlideOut:"cnx-top-title-slide-out"},a="cnx-japanese-charset"},5204:(t,e,i)=>{"use strict";i.d(e,{k:()=>o});var s=i(6716),n=i(8659),r=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let o=class{constructor(){this.adClick=new s.x,this.adImpression=new s.x,this.adInView=new s.x,this.adQuartile=new s.x,this.auctionInformation=new s.x,this.heavyAd=new s.x,this.adPrebid=new s.x,this.adPostbid=new s.x,this.adBid=new s.x,this.startBidTracking=new s.x,this.adBidTracking=new s.x,this.adBreakStart=new s.x,this.adBreakEnd=new s.x,this.onBidFetchStart=new s.x,this.onBidFetchEnd=new s.x}};o=r([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],o)},5675:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(5650),n=i(3020),r=i(9791);function o(t,e=window,o){const a=`cnx-async-bundle-${(0,r.dz)()}`,h={id:a,src:t};return new Promise(((t,r)=>{(0,n.dZ)(h,e.document.head,e,(()=>{if(o&&e!==o)try{o.cnx_webpack_global_elements&&(0,s.BZ)(e.cnx_webpack_global_elements)&&e.cnx_webpack_global_elements.forEach((t=>{o.cnx_webpack_global_elements.push(t)})),o.cnx_webpack_global_playspace&&(0,s.BZ)(e.cnx_webpack_global_playspace)&&e.cnx_webpack_global_playspace.forEach((t=>{o.cnx_webpack_global_playspace.push(t)}))}catch(t){r(t)}t(),(0,n.uC)(a,e.document)}),(()=>{(0,n.uC)(a,i.g.document),r(new Error("script load error"))}),!1)}))}},6375:(t,e,i)=>{"use strict";i.d(e,{o:()=>Qt});var s=i(8659);class n{}n.MAX_STRING_LENGTH=99,n.TIME_BIDS_INTERVAL_FREQUENCY=5e3;var r,o=i(5204),a=i(8395),h=i(3003),c=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},d=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t,e){return function(i,s){e(i,s,t)}};let u=r=class{constructor(t,e){this.jc=t,this.di=e,this.Mi=[],this.TL=[],this.SL=[],this.AL=[],this.kL=null,this.EL()}static xL(t){return t.map((t=>Object.assign(Object.assign({},t),{reason:(0,h.VN)(t.reason,0,n.MAX_STRING_LENGTH)})))}destroy(){this.kL&&(this.di.clearInterval(this.kL),this.kL=null)}EL(){this.Mi.push(this.jc.adBid.subscribe((t=>{this.CL(Object.assign(Object.assign({},t),{eventTimestamp:Date.now()}))})),this.jc.adPostbid.subscribe((t=>{this.OL(Object.assign(Object.assign({},t),{eventTimestamp:Date.now()}))})),this.jc.adPrebid.subscribe((t=>{this.LL(Object.assign(Object.assign({},t),{eventTimestamp:Date.now()}))})),this.jc.startBidTracking.subscribe((()=>{this.BL()})))}BL(){this.kL||(this.kL=this.di.setInterval((()=>{this.RL()}),n.TIME_BIDS_INTERVAL_FREQUENCY))}LL(t){this.SL.push(t)}OL(t){this.AL.push(t)}CL(t){t.shouldTrackBid&&this.TL.push(t)}RL(){this.DL(),this.SL=[],this.TL=[],this.AL=[]}DL(){0===this.SL.length&&0===this.TL.length&&0===this.AL.length||(this.AL=r.xL(this.AL),this.jc.adBidTracking.next({prebidList:this.SL,bidList:this.TL,postbidList:this.AL}))}};u=r=c([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),l(0,(0,s.f3)(o.k)),l(1,(0,s.f3)(a.f)),d("design:paramtypes",[Object,Object])],u);var p=i(7107),f=i(6515),m=i(6716),g=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let v=class{constructor(){this.mediaPlaybackChanged=new f.X({isPlaying:!1}),this.mediaViewabilityChanged=new f.X({isInView:!1}),this.mediaView=new m.x,this.mediaQuartile=new m.x,this.mediaClick=new m.x,this.mediaTimeUpdate=new m.x,this.newMedia=new m.x,this.newChapter=new m.x}};v=g([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped)],v);var y=i(6565),b=i(4975),I=i(4978),w=i(6196),P=i(9127);var T,_=i(4727),S=i(4065),A=i(9600),x=i(1310),k=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},E=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},C=function(t,e){return function(i,s){e(i,s,t)}};let O=T=class{constructor(t,e,i){this.ah=t,this.NL=e,this.di=i,this.Zc=!1,this.FL=!1,this.Mi=[],this.VL=new f.X({mediaId:"",mediaPlayTime:0,mediaPlayInViewTime:0}),this.jL=new S.B(this.di,Number.MAX_SAFE_INTEGER,T.TIMER_TICK),this.UL=new S.B(this.di,Number.MAX_SAFE_INTEGER,T.TIMER_TICK),this.$L()}get mediaPlayInViewPayload(){const t=(0,x.kw)(this.jL.timeElapsed),e=(0,x.kw)(this.UL.timeElapsed);return{mediaId:this.ah.currentMediaMetadata.mediaId||"",mediaPlayTime:t<0?0:t,mediaPlayInViewTime:e<0?0:e}}get onMediaChange(){return this.VL.asObservable()}destroy(){(0,A.i)(this.Mi)}resetTimers(){this.jL.reset(),this.UL.reset()}$L(){this.Mi.push(this.NL.mediaPlaybackChanged.subscribe((({isPlaying:t})=>{this.qL(t)})),this.NL.mediaViewabilityChanged.subscribe((({isInView:t})=>{this.kc(t)})),this.NL.newMedia.subscribe((()=>{this.HL&&this.VL.next({mediaId:this.HL,mediaPlayTime:(0,x.kw)(this.jL.timeElapsed),mediaPlayInViewTime:(0,x.kw)(this.UL.timeElapsed)}),this.HL=this.ah.currentMediaMetadata.mediaId,this.resetTimers()})))}qL(t){this.Zc!==t&&(this.Zc=t,this.JL())}kc(t){this.FL!==t&&(this.FL=t,this.JL())}JL(){this.FL&&this.Zc?this.UL.start():this.UL.stop(),this.Zc?this.jL.start():this.jL.stop()}};O.TIMER_TICK=200,O=T=k([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),C(0,(0,s.f3)(p.B)),C(1,(0,s.f3)(v)),C(2,(0,s.f3)(a.f)),E("design:paramtypes",[Object,Object,Object])],O);class L{}L.TRACKING_POINTS=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800,timesRepeatDelay:Number.MAX_SAFE_INTEGER}];var M,R=i(9357),B=i(4798),D=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},N=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},F=function(t,e){return function(i,s){e(i,s,t)}};let $=M=class{constructor(t,e,i){this.zL=t,this.vL=e,this.di=i,this.WL=!1,this.YL=!1,this.QL=0,this.Mi=[],this.ZL=new f.X(L.TRACKING_POINTS[0]),this.eB=new S.B(this.di,Number.MAX_SAFE_INTEGER,M.TIMER_TICK),this.iB=new S.B(this.di,Number.MAX_SAFE_INTEGER,M.TIMER_TICK),this.sB=new S.B(this.di,Number.MAX_SAFE_INTEGER,M.TIMER_TICK),this.$L(),this.nB()}destroy(){(0,A.i)(this.Mi),this.zL.destroy()}nB(){this.Mi.push(this.zL.onMediaChange.subscribe((t=>{this.rB(t)})))}$L(){const t=this.vL.sessionRendered.pipe((0,_.q)(1)).subscribe((()=>{this.oB()}));this.Mi.push(this.vL.sessionPlaybackChanged.subscribe((({isPlaying:t})=>{this.hB(t)})),this.vL.sessionViewabilityChanged.subscribe((({isInView:t})=>{this.cB(t)})),this.vL.stayNextButtonsAppeared.subscribe((()=>{this.QL++})),t)}hB(t){this.WL!==t&&(this.WL=t,this.YL&&this.WL&&this.iB.start(),this.WL?this.eB.start():(this.eB.stop(),this.iB.stop()))}cB(t){this.YL!==t&&(this.YL=t,this.YL&&this.WL?this.iB.start():this.YL||this.iB.stop())}oB(){this.sB.start(),this.Mi.push(this.ZL.pipe((0,b.h)((t=>!!t)),(0,I.w)((t=>{return(0,w.H)((null==t?void 0:t.delay)*R.s_).pipe((e=t,(0,P.U)((function(){return e}))));var e}))).subscribe((t=>{this.dB(t)})))}dB(t){const e=t;let i=L.TRACKING_POINTS.indexOf(e);e.timesRepeatDelay--,this.rB(),0===e.timesRepeatDelay&&i++,(0,B.$K)(L.TRACKING_POINTS[i])&&this.lB(L.TRACKING_POINTS[i])}lB(t){this.ZL.next(t)}rB(t){const e=(0,x.kw)(this.sB.timeElapsed),i=(0,x.kw)(this.eB.timeElapsed),s=(0,x.kw)(this.iB.timeElapsed),n=null!=t?t:this.zL.mediaPlayInViewPayload;let r={elapsedTime:e,timePlayed:i,playedInView:s,mediaPlayTime:n.mediaPlayTime,mediaPlayInViewTime:n.mediaPlayInViewTime};r=this.uB(r);const o={sessionTimeInSeconds:r.elapsedTime,timePlayedInSeconds:r.timePlayed,timePlayedInViewInSeconds:r.playedInView,stayNextButtonsAppearances:this.QL,mediaId:n.mediaId,mediaPlayTime:r.mediaPlayTime,mediaPlayInViewTime:r.mediaPlayInViewTime};this.QL=0,this.eB.reset(),this.iB.reset(),this.sB.reset(),this.zL.resetTimers(),this.vL.sessionTimeElapsed.next(o)}uB(t){let{timePlayed:e,playedInView:i,elapsedTime:s,mediaPlayTime:n,mediaPlayInViewTime:r}=t;return s=Math.min(Math.max(s,0),this.ZL.value.delay),e=Math.min(Math.max(e,0),s),i=Math.min(Math.max(i,0),s),n=Math.min(Math.max(n,0),e),r=Math.min(Math.max(r,0),i),{timePlayed:e,playedInView:i,elapsedTime:s,mediaPlayTime:n,mediaPlayInViewTime:r}}};$.TIMER_TICK=200,$=M=D([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),F(0,(0,s.f3)(O)),F(1,(0,s.f3)(y.q)),F(2,(0,s.f3)(a.f)),N("design:paramtypes",[Object,Object,Object])],$);var V=i(1599),j=i(5356),U=i(3020),q=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let H=class{constructor(){this.pB=t=>{const e=t.target.closest("[tabindex]");e&&(e.focus({preventScroll:!0}),(0,U.IV)(e,V.s6.TabFocus),this.fB&&(0,j.mb)(this.fB)&&(0,U.cn)(this.fB,V.s6.AdUserInteraction))}}start(t){this.mB(t)}processAdUserInteraction(t=!1){(t||(0,U.pv)(this.fB,V.s6.AdUserInteraction))&&(this.gB(),this.fB&&((0,U.IV)(this.fB,V.s6.AdUserInteraction),(0,U.IV)(this.fB,V.s6.TabFocus)))}destroy(){var t;null===(t=this.fB)||void 0===t||t.removeEventListener("click",this.pB)}gB(){var t;null===(t=this.fB)||void 0===t||t.focus({preventScroll:!0})}mB(t){this.fB=t,null==t||t.addEventListener("click",this.pB)}};H=q([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped)],H);function J(t){var e;const i=function(t){return t?(0,U.GF)(t)||(0,U.pv)(t,"cnx-submenu-title-option")?i(t.nextElementSibling):t:null},s=null===(e=t.getElementsByClassName("cnx-cm-item--click"))||void 0===e?void 0:e[0],n=i(s);n&&((0,U.cn)(n,V.s6.TabFocus),null==n||n.focus({preventScroll:!0}))}const G=t=>J(t.target);function z(t){t&&(t.dispatchEvent(new MouseEvent("mousedown")),t.dispatchEvent(new MouseEvent("mouseup")))}function W(t){return"lit-keyboard-navigation-access"===(null==t?void 0:t.getAttribute("data-id"))}var Y,X=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const Q="Enter",K="Escape",Z="Tab";let tt=Y=class{constructor(){this.kD=void 0,this.ED=t=>{const e=t.target;if(!W(e))switch(t.code){case Q:this.xD(e);break;case K:this.CD(e);break;case Z:this.OD(e,t.shiftKey?"firstChild":"lastChild")}}}start(t){t.classList.contains("cnx-playspace-container")||(this.kD=t,this.LD(t))}destroy(){var t,e;null===(t=this.kD)||void 0===t||t.removeEventListener("keydown",this.ED),null===(e=this.kD)||void 0===e||e.removeEventListener("keyup",Y.BD)}LD(t){t.addEventListener("keydown",this.ED),t.addEventListener("keyup",Y.BD)}CD(t){const e=t.closest(".cnx-menu-popup"),i=this.RD(e);null==i||i.setAttribute("aria-expanded","false"),z(i),null==i||i.focus()}xD(t){var e;if(!t)return;const i=t.getAttribute("aria-controls");null===(e=this.kD)||void 0===e||e.addEventListener("cnx-menu-opened",(()=>{var e;const s=null===(e=this.kD)||void 0===e?void 0:e.querySelector(`[data-id="${i}"]`),n=function(t){return(0,U.pv)(t,V.Ng.SubmenuOption)}(t);!function(t,e=!1){if(!t)return;if(t.removeEventListener("cnx-mod-scrollbar",G),e)return t.addEventListener("cnx-mod-scrollbar",G,{once:!0}),void J(t);const i=t.querySelector(".cnx-cm-items:first-of-type");i&&J(i)}(s,n)}),{once:!0}),function(t){return(0,U.pv)(t,V.p0.CloseButton)}(t)?function(t){t&&t.dispatchEvent(new MouseEvent("click"))}(t):z(t)}OD(t,e){var i;const s=t.closest("[data-id]");if(s&&t===(null===(i=t.parentElement)||void 0===i?void 0:i[e])){const t=this.RD(s);z(t),null==t||t.focus()}this.kD&&(0,j.mb)(this.kD)&&(0,U.cn)(this.kD,V.s6.AdUserInteraction)}RD(t){var e;return null===(e=this.kD)||void 0===e?void 0:e.querySelector(`[aria-controls="${null==t?void 0:t.getAttribute("data-id")}"]`)}};tt.BD=t=>{const e=t.target;W(e)||t.code===Z&&(0,U.cn)(e,V.s6.TabFocus)},tt=Y=X([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped)],tt);var et=i(9209),it=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let st=class{constructor(){this.vB=new m.x,this.yB=[et.Ys.Space,et.Ys.ArrowDown,et.Ys.ArrowUp],this.bB=t=>{const e=t.code;let i=et.Pl[et.Ys[e]];this.yB.includes(et.Ys[e])&&t.preventDefault(),t.shiftKey&&t.code===et.Ys[et.Ys.KeyN]&&(i=et.Pl[et.Ys.KeyN]),t.shiftKey&&t.code===et.Ys[et.Ys.KeyP]&&(i=et.Pl[et.Ys.KeyP]),t.shiftKey&&t.code===et.Ys[et.Ys.KeyO]&&(i=et.Pl[et.Ys.KeyO]),void 0!==i&&this.vB.next({action:i})}}get shortcutsEventObservable(){return this.vB.asObservable()}start(t){this.hd(t)}destroy(){i.g.removeEventListener("keydown",this.bB)}hd(t){t.addEventListener("keydown",this.bB)}};var nt;st=it([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped)],st),function(t){t.AdBreakStatus="cnx_ad_break_status"}(nt||(nt={}));var rt=i(6661),ot=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},at=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ht=function(t,e){return function(i,s){e(i,s,t)}};let ct=class{constructor(t){this.Kr=t,this.FA=new Map}start(t){this.IB=this.PB(t)}destroy(){(0,U.bX)(this.IB)}openChannels(t){t.forEach((t=>{this.FA.get(t)||this.FA.set(t,this._B())}))}closeChannels(t){t.forEach((t=>{const e=this.FA.get(t);e&&(e.innerHTML="")}))}emitMessage(t,e){const i=this.FA.get(t);i&&(i.innerHTML=e)}mute(){var t;null===(t=this.IB)||void 0===t||t.classList.add(V.Gj.Hide),this.FA.forEach((t=>{t.innerHTML=""}))}unMute(){var t;null===(t=this.IB)||void 0===t||t.classList.remove(V.Gj.Hide)}PB(t){const e=this.Kr.createElementByString(`<cnx class="${V.Rp.Wrapper}"></cnx>`);return t.appendChild(e),e}_B(){var t;const e=this.Kr.createElementByString('<cnx role="status"></cnx>');return null===(t=this.IB)||void 0===t||t.appendChild(e),e}};ct=ot([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),ht(0,(0,s.f3)(rt.c.GlobalDomUtilsService)),at("design:paramtypes",[Object])],ct);var dt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},lt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},ut=function(t,e){return function(i,s){e(i,s,t)}};let pt=class{constructor(t,e,i){this.jc=t,this.vL=e,this.TB=i,this.Mi=[],this.SB=!1,this.AB=!1}start(t){this.EL(),this.TB.start(t)}destroy(){(0,A.i)(this.Mi),this.TB.destroy()}EL(){this.Mi.push(this.jc.adBreakStart.subscribe((({adSkippableInSeconds:t,isLinear:e})=>{e&&(this.AB=!0,this.SB&&this.kB(t))})),this.jc.adBreakEnd.subscribe((()=>{this.AB=!1,this.EB()})),this.vL.sessionViewabilityChanged.subscribe((({isInView:t})=>{t?(this.AB&&this.kB(0),this.TB.unMute()):this.AB||this.TB.mute(),this.SB=t})))}kB(t){this.TB.openChannels([nt.AdBreakStatus]);let e="The video player is currently playing an ad.";t>0&&(e+=` You can skip the ad in ${t} sec with a mouse or keyboard`),this.TB.emitMessage(nt.AdBreakStatus,e)}EB(){this.TB.closeChannels([nt.AdBreakStatus])}};pt=dt([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),ut(0,(0,s.f3)(o.k)),ut(1,(0,s.f3)(y.q)),ut(2,(0,s.f3)(ct)),lt("design:paramtypes",[Object,Object,Object])],pt);var ft,mt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},gt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},vt=function(t,e){return function(i,s){e(i,s,t)}};let yt=class{constructor(t,e,i,s){this.xB=t,this.CB=e,this.OB=i,this.MB=s}start(t,e){this.xB.start(t),this.CB.start(t),this.OB.start(t),e&&this.MB.start(t)}getShortcutsObservable(){return this.OB.shortcutsEventObservable}processAdUserInteraction(t=!1){var e;null===(e=this.xB)||void 0===e||e.processAdUserInteraction(t)}destroy(){this.xB.destroy(),this.CB.destroy(),this.OB.destroy(),this.MB.destroy()}};yt=mt([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),vt(0,(0,s.f3)(H)),vt(1,(0,s.f3)(tt)),vt(2,(0,s.f3)(st)),vt(3,(0,s.f3)(pt)),gt("design:paramtypes",[Object,"function"==typeof(ft=void 0!==tt&&tt)?ft:Object,Object,Object])],yt);var bt=i(289),It=i(9528),wt=i(6286),Pt=i(7945),Tt=i(307),_t=i(6153),St=i(4261),At=i(4411),xt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},kt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Et=function(t,e){return function(i,s){e(i,s,t)}},Ct=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};let Ot=class{constructor(t,e){this.MI=t,this.ah=e}sessionRenderEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.session_rendered,bt.ProtoSessionRenderedRequest,It.Eq.getProtoPayload(t))}))}playerStartEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.playerStart,bt.ProtoPlayerStartRequest,It.mr.getProtoPayload(t))}))}adOpportunityEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.adOpportunity,bt.ProtoAdOpportunityRequest,It.Ox.getProtoPayload(t))}))}sessionAdBlockerEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.sessionAdBlocker,bt.ProtoSessionAdBlockerRequest,It.Ax.getProtoPayload(t))}))}sessionTimeEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.session_time,bt.ProtoSessionTimeTrackingRequest,It.qw.getProtoPayload(t))}))}sessionInViewEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.session_view,bt.ProtoSessionViewRequest,It.EC.getProtoPayload(t))}))}mediaInViewEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.media_view,bt.ProtoMediaViewRequest,It.Rl.getProtoPayload(t))}))}mediaClickEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.media_click,bt.ProtoMediaClickTrackingRequest,It.sT.getProtoPayload(t))}))}mediaQuartileEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.media_quartile,bt.ProtoMediaQuartileRequest,It.s8.getProtoPayload(t))}))}adBidEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.bids,bt.ProtoBidTrackingsRequest,It.T0.getProtoPayload(t))}))}auctionInformationEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.auctionInformation,bt.ProtoAuctionInfoRequest,It.Kx.getProtoPayload(t))}))}adImpressionEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.ad_impression,bt.ProtoVideoAdImpressionRequest,It.n2.getProtoPayload(t),t.advertiserLineItemId)}))}adInViewEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.ad_impression_viewable,bt.ProtoVideoAdImpressionViewableRequest,It.aF.getProtoPayload(t),t.advertiserLineItemId)}))}adQuartileEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.ad_quartile,bt.ProtoVideoAdQuartilesRequest,It.jE.getProtoPayload(t),t.advertiserLineItemId)}))}adClickEvent(t){return Ct(this,void 0,void 0,(function*(){return this.LB(_t.n.endPoints.tracking.ad_click,bt.ProtoAdClickTrackingRequest,It.$d.getProtoPayload(t),t.advertiserLineItemId)}))}heavyAdEvent(t){this.BB(_t.n.endPoints.tracking.heavy_ad_intervention,bt.ProtoHeavyAdTrackingRequest,It.tO.getProtoPayload(t))}LB(t,e,i,s){return Ct(this,void 0,void 0,(function*(){try{const n=yield At.n.sendProtoRequest({endpoint:t,requestData:i,queryParams:{[Tt.Fk]:Pt.g.version,[Tt.cc]:_t.n.tier},protoRequest:e,protoResponse:bt.ProtoTrackingResponse,hasCredentials:!0,shouldLogErrors:!0}),r=It.ng.getTrackingResponseFromProto(n);this.MI.onResponseReceived(r,s)}catch(e){this.NA(e,t)}}))}BB(t,e,i){try{At.n.sendProtoBeaconRequest({endpoint:t,requestData:i,queryParams:{[Tt.Fk]:Pt.g.version,[Tt.cc]:_t.n.tier},protoRequest:e,shouldLogErrors:!1})}catch(e){this.NA(e,t)}}NA(t,e){(0,St.nF)({message:`ProtoTrackingCallerService_error_${e}`,level:St.D_.INFO,exception:t?JSON.stringify(t):void 0,sessionId:this.ah.sessionId},{throttle:1,pacing:1,shouldSendMaxLog:!1})}};Ot=xt([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),Et(0,(0,s.f3)(wt.j)),Et(1,(0,s.f3)(p.B)),kt("design:paramtypes",[Object,Object])],Ot);var Lt=i(6095),Mt=i(8041);class Rt{static fromPayloadToTracking(t,e,i){const{width:s,height:n}=e,{encryptedPrice:r,customClientPrice:o,floorPriceFactorBypassReason:a,rtbCreativeId:h,rtbSeatId:c,rtbADomain:d,rtbDspId:l,cnxBidId:u,publisherLineItemId:p,advertiserLineItemId:f,requestsCount:m,isUserSynced:g,timeSpentMs:v,requestedFloorPrice:y,floorPriceInformation:b,prebidJsBidderName:I,identityProviderTrackingData:w,hasLexiconEnvelopeBeenUsed:P,dynamicElkFields:T}=t;return{playerWidth:s,playerHeight:n,encryptedPrice:r,customClientPrice:o,floorPriceFactorBypassReason:a,rtbCreativeId:h,rtbSeatId:c,rtbADomain:d,rtbDspId:l,cnxBidId:u,publisherLineItemId:p,advertiserLineItemId:f,requestsCount:m,isUserSynced:g,timeSpentMs:v,requestedFloorPrice:y,floorPriceInformation:b,prebidJsBidderName:I,identityProviderTrackingData:w,hasLexiconEnvelopeBeenUsed:P,videoPlacement:i,dynamicElkFields:T}}}class Bt{static fromPayloadToTracking(t,e,i){const{width:s,height:n}=e,{reason:r,adSourceType:o,vastMediaType:a,bidElapsedTimeSeconds:h,isBidLoaded:c,winToAdLoadedTimeMs:d,adBreakType:l,auctionInformation:u,auctionReason:p,adPodSlotPosition:f,prebidJsBidderName:m,dynamicElkFields:g,publisherLineItemId:v,advertiserLineItemId:y,isUserSynced:b,rtbCreativeId:I,rtbSeatId:w,rtbADomain:P,rtbDspId:T,cnxBidId:_,timeSpentMs:S,requestsCount:A,requestedFloorPrice:x,floorPriceInformation:k,discount:E,liveRampType:C,identityProviderTrackingData:O,hasLexiconEnvelopeBeenUsed:L,assertiveYieldProbability:M}=t;return{playerWidth:s,playerHeight:n,reason:r,adSourceType:o,vastMediaType:a,bidElapsedTimeSeconds:h,isBidLoaded:c,winToAdLoadedTimeMs:d,adBreakType:l,auctionInformation:u,auctionReason:p,adPodSlotPosition:f,prebidJsBidderName:m,dynamicElkFields:g,publisherLineItemId:v,advertiserLineItemId:y,isUserSynced:b,rtbCreativeId:I,rtbSeatId:w,rtbADomain:P,rtbDspId:T,cnxBidId:_,timeSpentMs:S,requestsCount:A,requestedFloorPrice:x,floorPriceInformation:k,discount:E,liveRampType:C,identityProviderTrackingData:O,hasLexiconEnvelopeBeenUsed:L,videoPlacement:i,assertiveYieldProbability:M}}}class Dt{static fromPayloadToTracking(t,e,i){const{width:s,height:n}=e,{playerReason:r,partnerReason:o,partnerCustomHeaders:a,publisherLineItemId:h,advertiserLineItemId:c,requestedFloorPrice:d,requestsCount:l,isUserSynced:u,prebidJsBidderName:p,timeSpentMs:f,floorPriceInformation:m,identityProviderTrackingData:g,hasLexiconEnvelopeBeenUsed:v,dynamicElkFields:y}=t;return{playerWidth:s,playerHeight:n,playerReason:r,partnerReason:o,partnerCustomHeaders:a,publisherLineItemId:h,advertiserLineItemId:c,requestedFloorPrice:d,requestsCount:l,isUserSynced:u,prebidJsBidderName:p,timeSpentMs:f,floorPriceInformation:m,identityProviderTrackingData:g,hasLexiconEnvelopeBeenUsed:v,videoPlacement:i,dynamicElkFields:y}}}class Nt{static fromPayloadToTracking(t,e,i,s){const{currentMediaMetadata:n,isExplorationMode:r,lineItemAbTestInformation:o,canTrackAllRequests:a,hasGdprConsentPayload:h,playerDimensions:c,videoPlacement:d}=e,l=t.prebidList.map((t=>Dt.fromPayloadToTracking(t,c,d))),u=t.bidList.map((t=>Rt.fromPayloadToTracking(t,c,d))),p=t.postbidList.map((t=>Bt.fromPayloadToTracking(t,c,d)));return{isExplorationMode:r,panorama:s,gdprConsentMode:i,trackingMetadata:It.yz.fromProtoGetTrackingMetadata(e.trackingRequestMeta),shouldLogEverything:a,prebidList:l,bidList:u,postbidList:p,mediaId:null==n?void 0:n.mediaId,hasGdprConsent:h,lineItemAbTest:o?It.p.fromProtoLineItemAbTestFromProto(o):void 0}}}var Ft=i(6666);class $t{static fromPayloadToTracking(t,e){var i;const{type:s,adBreakType:n,publisherLineItemId:r,advertiserLineItemId:o}=t,{currentMediaMetadata:{mediaId:a,insights:h,sentimentAnalysis:c},iasSegmentCodes:d,trackingRequestMeta:l,lineItemAbTestInformation:u}=e;return{type:s,adBreakType:n,publisherLineItemId:r,advertiserLineItemId:o,mediaId:a,iasSegmentCodes:d,insightIndexes:h,trackingMetadata:It.yz.fromProtoGetTrackingMetadata(l),pageInsightIndexes:null===(i=Ft.k.pageInsights)||void 0===i?void 0:i.insights,sentimentAnalysis:c?It.XE.fromProtoGetSentimentAnalysis(c):void 0,lineItemAbTest:u?It.p.fromProtoLineItemAbTestFromProto(u):void 0}}}class Vt{static fromPayloadToTracking(t,e){var i;const{width:s,height:n}=e.playerDimensions,{currentMediaMetadata:{mediaId:r,insights:o,sentimentAnalysis:a},lineItemAbTestInformation:h,videoPlacement:c}=e,{adSourceType:d,advertiserLineItemId:l,publisherLineItemId:u,customClientPrice:p,encryptedPrice:f,prebidJsBidderName:m,rtbADomain:g,rtbCreativeId:v,rtbSeatId:y,isUserSynced:b,timeSpentMs:I,vastMediaType:w,rtbDspId:P,cnxBidId:T,winToAdLoadedTimeMs:_,startAdToImpressionTimeMs:S,impressionDurationSeconds:A,declaredDurationSeconds:k,isExplorationMode:E,requestsCount:C,requestedFloorPrice:O,floorPriceInformation:L,bidElapsedTimeSeconds:M,adBreakType:R,internalAuctionInformation:B,auctionInformation:D,dynamicElkFields:N,hasAdSkip:F,discount:$,liveRampType:V,serverBillingNoticeUrls:j,identityProviderTrackingData:U,panorama:q,hasLexiconEnvelopeBeenUsed:H,assertiveYieldResult:J,assertiveYieldProbability:G,adMediaFileWidth:z,adMediaFileHeight:W,initialGdprConsentMode:Y}=t,X={adSourceType:d,advertiserLineItemId:l,publisherLineItemId:u,customClientPrice:p,encryptedPrice:f,prebidJsBidderName:m,rtbADomain:g,rtbCreativeId:v,rtbSeatId:y,isUserSynced:b,timeSpentMs:I,vastMediaType:w,rtbDspId:P,cnxBidId:T,winToAdLoadedTimeMs:_,startAdToImpressionTimeMs:S,impressionDurationSeconds:A,declaredDurationSeconds:k,isExplorationMode:E,requestsCount:C,requestedFloorPrice:O,floorPriceInformation:L,bidElapsedTimeSeconds:M,adBreakType:R,internalAuctionInformation:B,auctionInformation:D,dynamicElkFields:N,hasAdSkip:F,mediaId:r,liveRampType:V,serverBillingNoticeUrls:j,identityProviderTrackingData:U,panorama:q,hasLexiconEnvelopeBeenUsed:H,videoPlacement:c,assertiveYieldResult:J,assertiveYieldProbability:G,adMediaFileWidth:z,adMediaFileHeight:W,initialGdprConsentMode:Y,playerWidth:s,playerHeight:n,insightIndexes:o,trackingMetadata:It.yz.fromProtoGetTrackingMetadata(e.trackingRequestMeta),lineItemAbTest:h?It.p.fromProtoLineItemAbTestFromProto(h):void 0,iasSegmentCodes:e.iasSegmentCodes,sentimentAnalysis:a?It.XE.fromProtoGetSentimentAnalysis(a):void 0,pageInsightIndexes:null===(i=Ft.k.pageInsights)||void 0===i?void 0:i.insights,discount:$?It.dz.fromProtoDiscount($):void 0};return e.isFirstAdImpressionElapsedTimeTracked||(X.dynamicElkFields=Object.assign(Object.assign({},N),{24:`${(0,x.qd)(e.bundleLoadTimestamp)}`}),e.isFirstAdImpressionElapsedTimeTracked=!0),X}}class jt{static fromPayloadToTracking(t,e){var i;const{currentMediaMetadata:{mediaId:s,insights:n,sentimentAnalysis:r},lineItemAbTestInformation:o,trackingRequestMeta:a,iasSegmentCodes:h}=e,{publisherLineItemId:c,advertiserLineItemId:d,rtbSeatId:l,rtbDspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,discount:g}=t;return{mediaId:s,publisherLineItemId:c,advertiserLineItemId:d,rtbSeatId:l,rtbDspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,iasSegmentCodes:h,discount:g,trackingMetadata:It.yz.fromProtoGetTrackingMetadata(a),lineItemAbTest:o?It.p.fromProtoLineItemAbTestFromProto(o):void 0,insightIndexes:n,sentimentAnalysis:r?It.XE.fromProtoGetSentimentAnalysis(r):void 0,pageInsightIndexes:null===(i=Ft.k.pageInsights)||void 0===i?void 0:i.insights}}}class Ut{static fromPayloadToTracking(t,e){var i;const{currentMediaMetadata:{sentimentAnalysis:s,mediaId:n,insights:r},lineItemAbTestInformation:o,iasSegmentCodes:a}=e,{advertiserLineItemId:h,publisherLineItemId:c,type:d,rtbSeatId:l,dspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m}=t;return{mediaId:n,advertiserLineItemId:h,publisherLineItemId:c,type:d,rtbSeatId:l,dspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,iasSegmentCodes:a,insightIndexes:r,trackingMetadata:It.yz.fromProtoGetTrackingMetadata(e.trackingRequestMeta),sentimentAnalysis:s?It.XE.fromProtoGetSentimentAnalysis(s):void 0,pageInsightIndexes:null===(i=Ft.k.pageInsights)||void 0===i?void 0:i.insights,lineItemAbTest:o?It.p.fromProtoLineItemAbTestFromProto(o):void 0}}}var qt=i(9107);class Ht{static fromPayloadToTracking(t,e){const{mediaId:i,clickUrl:s,sentimentAnalysis:n,slideTitle:r,slideNumber:o,slideMediaType:a,insights:h}=e.currentMediaMetadata,c=t.type||qt.$u.Click;return{trackingMetadata:It.yz.fromProtoGetTrackingMetadata(e.trackingRequestMeta),slideMediaType:a?It.EN.fromProtoGetMediaType(a):void 0,sentimentAnalysis:n?It.XE.fromProtoGetSentimentAnalysis(n):void 0,clickUrl:this.RB(t,s),insightIndexes:h,mediaId:i,type:c,slideTitle:r,slideNumber:o}}static RB(t,e){if(t.type===qt.$u.UrlClick)return t.clickUrl||e}}i(7129);var Jt=i(5742),Gt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},zt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Wt=function(t,e){return function(i,s){e(i,s,t)}};let Yt=class{constructor(t,e,i,s,n,r,o,a,h,c){this.ah=t,this.vL=e,this.NL=i,this.DB=s,this.NB=n,this.jc=r,this.FB=o,this.zd=a,this.ll=h,this.jB=c,this.Mi=[],this.$L(),this.EL(),this.UB()}destroy(){(0,A.i)(this.Mi),this.DB.destroy(),this.NB.destroy()}EL(){this.Mi.push(this.jc.adClick.subscribe((t=>{this.$B(t)})),this.jc.adImpression.subscribe((t=>{this.qB(t)})),this.jc.adInView.subscribe((t=>{this.HB(t)})),this.jc.adQuartile.subscribe((t=>{this.JB(t)})),this.jc.heavyAd.subscribe((t=>{this.GB(t)})),this.jc.auctionInformation.subscribe((t=>{this.Xy(t)})),this.jc.adBidTracking.subscribe((t=>{this.zB(t)})))}$L(){this.Mi.push(this.vL.sessionTimeElapsed.subscribe((t=>{this.WB(t)})),this.vL.sessionRendered.pipe((0,_.q)(1)).subscribe((t=>{this.YB(t)})),this.vL.sessionView.subscribe((()=>{this.XB()})),this.vL.sessionAdBlocked.subscribe((t=>{this.QB(t)})),this.vL.adOpportunity.subscribe((t=>{this.KB(t)})),this.vL.contentStart.pipe((0,_.q)(1)).subscribe((()=>{this.ZB()})),this.vL.adsEnabled.pipe((0,_.q)(1)).subscribe((()=>{this.ZB()})))}UB(){this.Mi.push(this.NL.mediaView.subscribe((()=>{this.eR()})),this.NL.mediaQuartile.subscribe((t=>{this.iR(t)})),this.NL.mediaClick.subscribe((t=>{this.sR(t)})))}ZB(){var t,e,i;this.ah.isPlayerStartTracked||(this.ah.isPlayerStartTracked=!0,(0,B.$K)(this.ah.cachedGdprConsentMode)||(this.ah.cachedGdprConsentMode=this.ll.gdprConsentMode),this.FB.playerStartEvent({trackingMetadata:It.yz.fromProtoGetTrackingMetadata(this.ah.trackingRequestMeta),pageInsightIndexes:null===(t=Ft.k.pageInsights)||void 0===t?void 0:t.insights,customClientEncryptedPrice:null===(i=null===(e=this.jB.bestStandaloneAd)||void 0===e?void 0:e.bid)||void 0===i?void 0:i.customClientEncryptedPrice,initialGdprConsentMode:this.ah.cachedGdprConsentMode,dynamicElkFields:{1:Jt.f.getCidForElkTracking(),2:`${(0,x.qd)(this.ah.bundleLoadTimestamp)}`}}))}GB(t){const{type:e,advertiserLineItemId:i,dynamicElkFields:s}=t,n=Object.assign(Object.assign({},s),{1:Jt.f.getCidForElkTracking()});this.FB.heavyAdEvent({trackingMetadata:It.yz.fromProtoGetTrackingMetadata(this.ah.trackingRequestMeta),type:e,advertiserLineItemId:i,dynamicElkFields:n})}zB(t){var e;const i=It.EN.fromProtoGDPRConsentMode(this.ll.gdprConsentMode),s=null===(e=t.postbidList.find((t=>t.panorama)))||void 0===e?void 0:e.panorama,n=Nt.fromPayloadToTracking(t,this.ah,i,s);this.FB.adBidEvent(n)}WB(t){var e;const{sessionTimeInSeconds:i,timePlayedInSeconds:s,timePlayedInViewInSeconds:n,stayNextButtonsAppearances:r,mediaId:o,mediaPlayTime:a,mediaPlayInViewTime:h}=t,{trackingRequestMeta:c}=this.ah;this.FB.sessionTimeEvent({trackingMetadata:It.yz.fromProtoGetTrackingMetadata(c),sessionTimePassedSinceLastTracking:i,secondsPlayedSinceLastTracking:s,secondsPlayedInViewSinceLastTracking:n,pageInsightIndexes:null===(e=Ft.k.pageInsights)||void 0===e?void 0:e.insights,secondsMediaPlayedSinceLastTracking:a,secondsMediaPlayedInViewSinceLastTracking:h,mediaId:o,stayNextButtonsAppearances:r})}YB(t){var e;if(this.ah.isSessionRenderTracked)return;this.ah.isSessionRenderTracked=!0;const i=Mt.d5,{width:s,height:n}=this.ah.playerDimensions,{isBannerBlocked:r,sdkVersion:o,integrationType:a,cookieDeprecationLabel:h}=t,c={7:Jt.f.getCidForElkTracking(),9:`${(0,x.qd)(this.ah.bundleLoadTimestamp)}`};(0,B.QM)(o)&&(c[3]=`${o}`),this.FB.sessionRenderEvent({playerHeight:n,playerWidth:s,isAdBlockerUsed:r,bundleName:i,dynamicElkFields:c,integrationType:a,cookieDeprecationLabel:h,trackingMetadata:It.yz.fromProtoGetTrackingMetadata(this.ah.trackingRequestMeta),pageInsightIndexes:null===(e=Ft.k.pageInsights)||void 0===e?void 0:e.insights})}XB(){var t;this.ah.isSessionViewTracked=!0;const e={9:Jt.f.getCidForElkTracking()};this.FB.sessionInViewEvent({trackingMetadata:It.yz.fromProtoGetTrackingMetadata(this.ah.trackingRequestMeta),initialGdprConsentMode:this.ah.cachedGdprConsentMode||bt.ProtoGdprConsentModeEnum.Unknown,pageInsightIndexes:null===(t=Ft.k.pageInsights)||void 0===t?void 0:t.insights,dynamicElkFields:e})}eR(){const{mediaId:t,insights:e}=this.ah.currentMediaMetadata;this.FB.mediaInViewEvent({trackingMetadata:It.yz.fromProtoGetTrackingMetadata(this.ah.trackingRequestMeta),mediaId:t||"",insightIndexes:e||[]})}iR(t){const{mediaId:e,insights:i,sentimentAnalysis:s}=this.ah.currentMediaMetadata,{quartile:n}=t;this.FB.mediaQuartileEvent({trackingMetadata:It.yz.fromProtoGetTrackingMetadata(this.ah.trackingRequestMeta),sentimentAnalysis:s?It.XE.fromProtoGetSentimentAnalysis(s):void 0,mediaId:e,quartile:n,insightIndexes:i})}sR(t){const e=Ht.fromPayloadToTracking(t,this.ah);this.FB.mediaClickEvent(e)}Xy(t){this.FB.auctionInformationEvent(t)}qB(t){var e,i;const s=(null===(e=this.zd)||void 0===e?void 0:e.remainingAdsDuration)?Math.round((null===(i=this.zd)||void 0===i?void 0:i.remainingAdsDuration)/R.s_):void 0,n=t.dynamicElkFields;n&&(0,B.$K)(s)&&(n[25]=`${s}`);const r=Vt.fromPayloadToTracking(Object.assign(Object.assign({},t),{initialGdprConsentMode:this.ah.cachedGdprConsentMode,dynamicElkFields:n}),this.ah);this.FB.adImpressionEvent(r)}HB(t){const e=jt.fromPayloadToTracking(t,this.ah);this.FB.adInViewEvent(e)}JB(t){const e=Ut.fromPayloadToTracking(t,this.ah);this.FB.adQuartileEvent(e)}$B(t){const e=$t.fromPayloadToTracking(t,this.ah);this.FB.adClickEvent(e)}KB(t){var e;const{trackingRequestMeta:i,isFirstAdOpportunityElapsedTimeTracked:s,bundleLoadTimestamp:n}=this.ah,{playerWidth:r,opportunityId:o,adBreak:a}=t;this.ah.prefetchDistance&&((0,St.nF)({message:`Prefetch_success_distance_${this.ah.prefetchDistance}`,level:St.D_.INFO,sessionId:this.ah.sessionId},{pacing:5,throttle:1}),this.ah.prefetchDistance=null);const h={1:`${o}`,2:Jt.f.getCidForElkTracking()};s||(h[3]=`${(0,x.qd)(n)}`,this.ah.isFirstAdOpportunityElapsedTimeTracked=!0),this.FB.adOpportunityEvent({adBreakType:a,playerWidth:r,dynamicElkFields:h,trackingMetadata:It.yz.fromProtoGetTrackingMetadata(i),pageInsightIndexes:null===(e=Ft.k.pageInsights)||void 0===e?void 0:e.insights})}QB(t){const{adBlockDetectionType:e}=t,i={1:Jt.f.getCidForElkTracking()},s={trackingMetadata:It.yz.fromProtoGetTrackingMetadata(this.ah.trackingRequestMeta),adBlockerDetectionType:e,dynamicElkFields:i};this.FB.sessionAdBlockerEvent(s)}};Yt=Gt([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),Wt(0,(0,s.f3)(p.B)),Wt(1,(0,s.f3)(y.q)),Wt(2,(0,s.f3)(v)),Wt(3,(0,s.f3)(u)),Wt(4,(0,s.f3)($)),Wt(5,(0,s.f3)(o.k)),Wt(6,(0,s.f3)(Ot)),Wt(7,(0,s.f3)(Lt.U)),Wt(8,(0,s.f3)(rt.c.UserManagerService)),Wt(9,(0,s.f3)(rt.c.StandaloneService)),zt("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object,Object,Object,Object])],Yt);var Xt=i(9906);class Qt{static boostrapSessionContainer(t,e,i,s,n,r,o,a,h,c,d){const l=Xt.h.getSessionChildContainer(t);Qt.nR(l,e,i,s,r,o,a,h,c,d);return Qt.rR(l,n)}static nR(t,e,i,s,n,r,o,a,h,c){t.register(rt.c.GeneralMetadata,{useValue:Object.assign({},e)}),t.register(rt.c.UserManagerService,{useValue:i}),t.register(rt.c.StandaloneService,{useValue:s}),t.register(rt.c.EventsStorageService,{useValue:n}),t.register(rt.c.GlobalDomUtilsService,{useValue:o}),t.register(rt.c.OmidSettings,{useValue:Object.assign({},r)}),t.register(rt.c.ExternalPrebidJSPermutiveConfig,{useValue:(0,B.$K)(a)?a:{}}),t.register(rt.c.FeatureFlags,{useValue:h}),t.register(rt.c.VideoAdsDurationServiceSettings,{useValue:c})}static rR(t,e){const i=t.resolve(wt.j),s=t.resolve($),n=t.resolve(y.q),r=t.resolve(v);return{trackingResponseService:i,sessionEvents:n,wcagService:t.resolve(yt),mediaEvents:r,generalRepository:t.resolve(p.B),abtTracker:t.resolve(u),adEvents:t.resolve(o.k),sessionTime:s,protoTrackingCallerService:t.resolve(Ot),trackingService:e?void 0:t.resolve(Yt)}}}},6095:(t,e,i)=>{"use strict";i.d(e,{U:()=>w});var s=i(6716),n=i(8659),r=i(5139),o=i(9069),a=i(9357),h=i(9490),c=i(8395),d=i(4065),l=i(9906),u=i(6661),p=i(4261),f=i(9600),m=i(4798),g=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},v=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=function(t,e){return function(i,s){e(i,s,t)}};const b=r.O.DEFAULT_MAX_AD_DURATION_PER_VIDEO,I=r.O.MIN_AD_DURATION;let w=class{constructor(t,e,i){this.ma=t,this.oR=e,this.aR=i,this.isAdPlayerInView=!1,this.Kb=b*a.s_,this.hR=[],this.cR=new s.x,this.dR=new s.x,this.lR=new s.x,this.uR=!1,this.pR=!1}get remainingAdsDuration(){var t;return null===(t=this.mR)||void 0===t?void 0:t.timeRemaining}get maxAdDurationConsumed(){return this.cR}get canSkipVideo(){return this.lR}get newAdsLimitReached(){return this.dR}startListeningToAdEvents(t){this.gR=t,this.eI(),this.sI()}startListeningToContentEvents(t){this.vR=t,this.yR()}destroy(){var t;(0,f.i)(this.hR),null===(t=this.mR)||void 0===t||t.stop()}getRemainingAdsDurationInMs(){return this.bR()?this.mR?Math.round(this.mR.timeRemaining):b*a.s_:null}nI(t){var e;(0,m.r)(t)&&(this.Kb=t*a.s_,null===(e=this.mR)||void 0===e||e.setTimerDuration(this.Kb))}eI(){var t;const e=null===(t=this.gR)||void 0===t?void 0:t.subscribe((t=>{var e,i;switch(t.type){case o.fI.AdImpression:this.pR&&this.IR(),this.wR();break;case o.fI.AdPlaying:case o.Y4.AdPlayingInView:this.wR();break;case o.Y4.AdPlayerOutOfView:this.PR(!1);break;case o.Y4.AdPlayerInView:this.PR(!0);break;case o.fI.AdStopped:case o.fI.AdSkipped:case o.fI.AdError:this.lR.next(this.uR),null===(e=this.mR)||void 0===e||e.stop();break;case o.fI.AdVideoComplete:case o.fI.AdClickThru:case o.fI.AdPaused:case o.fI.AdUserClose:null===(i=this.mR)||void 0===i||i.stop()}}));e&&this.hR.push(e)}PR(t){var e;this.isAdPlayerInView=t,t||null===(e=this.mR)||void 0===e||e.stop()}wR(){var t;this.isAdPlayerInView&&(null===(t=this.mR)||void 0===t||t.start())}yR(){var t;const e=null===(t=this.vR)||void 0===t?void 0:t.subscribe((t=>{var e;switch(t.type){case h.T$.NewVideo:this._R(),null===(e=this.mR)||void 0===e||e.reset(),this.lR.next(!1),this.uR=!1,this.TR(),this.nI(t.durationInS),this.pR=!1;break;case h.T$.DurationUpdate:this.nI(t.durationInS)}}));e&&this.hR.push(e)}TR(){var t,e;null===(t=this.mR)||void 0===t||t.reset(),null===(e=this.mR)||void 0===e||e.setTreshold(I*a.s_)}sI(){const t=l.h.getGlobalContainer().resolve(c.f);this.mR=new d.B(t,this.Kb,500),this.mR.setTreshold(I*a.s_);const e=this.mR.onTimeElapsed.subscribe((()=>{this.bR()&&this.cR.next(!0)}));if((0,m.r)(this.aR.skipToNextVideoAfter)){const t=this.mR.onTimeUpdate.subscribe((()=>{var t;if(this.bR()){const e=null===(t=this.mR)||void 0===t?void 0:t.timeRemaining;e&&e<=this.aR.skipToNextVideoAfter*a.s_&&(this.uR=!0)}}));this.hR.push(t)}const i=this.mR.onTresholdReached.subscribe((()=>{this.bR()&&(this.dR.next(!0),this.pR=!0)}));this.hR.push(e,i)}bR(){const t=this.ma.enableAdContentRatioMechanism||this.ma.enableAdContentRatioGuardsMechanism;return this.aR.isMechanismEnabled||t}_R(){if(!this.SR()&&this.Kb&&this.mR&&(0,m.$K)(this.mR.timeRemaining)){const t={contentDuration:Math.round(this.Kb/a.s_),remainingAdsDuration:Math.round(this.mR.timeRemaining/a.s_)};(0,p.nF)({level:p.D_.INFO,message:"VideoAdsDurationService_Durations",exception:"",adsContentRatio:t,callStack:""},{pacing:5})}}IR(){var t;(0,p.nF)({level:p.D_.WARN,message:"VideoAdsDurationService_ImpressionAfterTimeConsumed",exception:"yielded impression after duration was consumed",sessionId:null===(t=this.oR)||void 0===t?void 0:t.sessionId},{extraLogsPercentage:100})}SR(){var t,e,i;return(null===(t=this.mR)||void 0===t?void 0:t.timeRemaining)===(null===(e=this.mR)||void 0===e?void 0:e.timerDuration)&&(null===(i=this.mR)||void 0===i?void 0:i.timerDuration)===b*a.s_}};w=g([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped),y(0,(0,n.f3)(u.c.FeatureFlags)),y(1,(0,n.f3)(u.c.GeneralMetadata)),y(2,(0,n.f3)(u.c.VideoAdsDurationServiceSettings)),v("design:paramtypes",[Object,Object,Object])],w)},6628:(t,e,i)=>{"use strict";i.d(e,{A:()=>h,W:()=>c});var s=i(7945),n=i(9791),r=i(51),o=i(4798);function a(t){const e=(0,r.Ph)("cnxEnv",(0,n.pE)(window).topFrame.location.href);return(0,o.QM)(e)?`//cd-${e}.${t}`:`//cds.${t}`}function h(t){return`${a(t)}/p/${s.g.version}/`}function c(t){return`${a(t)}/a/`}},8657:(t,e,i)=>{"use strict";var s;i.d(e,{o:()=>s}),function(t){t.connatix="connatix.com",t.elements="elements.video"}(s||(s={}))},8041:(t,e,i)=>{"use strict";i.d(e,{oM:()=>c,d5:()=>u,q8:()=>d});var s=i(8657),n=i(3020),r=i(4261);function o(t){return t&&(0,n.NN)(t)?t.src:((0,r.nF)({message:"Prerender_Elements_getBundleDomain_no_currentScript",level:r.D_.CRITICAL}),null)}var a=i(5530),h=i(4798);const c=function(t){const e=o(t);return(null==e?void 0:e.includes(s.o.elements))?s.o.elements:(null==e?void 0:e.includes(s.o.connatix))?s.o.connatix:((0,r.nF)({message:"Prerender_Elements_getBundleDomain_unkown_src",level:r.D_.CRITICAL}),null)}(window.document.currentScript),d=(l=o(window.document.currentScript),(0,h.QM)(l)?l.includes(a.b.Omid)?a.b.Omid:l.includes(a.b.Standalone)?a.b.Standalone:a.b.Web:null);var l;const u=function(t){const e=o(t),i=null==e?void 0:e.match(/([^/]+\.js)/);return i?i[1]:null}(window.document.currentScript)},5530:(t,e,i)=>{"use strict";var s;i.d(e,{b:()=>s}),function(t){t.Web="",t.Omid="omid",t.Standalone="standalone"}(s||(s={}))},7107:(t,e,i)=>{"use strict";i.d(e,{B:()=>m});var s=i(8659),n=i(2979),r=i(9005),o=i(6568),a=i(7945),h=i(9490),c=i(6027),d=i(6661),l=i(4798),u=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},p=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(t,e){return function(i,s){e(i,s,t)}};let m=class{constructor(t){this.oR=t,this.AR={},this.kR={height:0,width:0},this.ER=!1,this.xR=!1,this.OR=!1,this.MR=!1,this.LR=!1,this.BR=!1,this.RR=!1,this.DR=o.e.Unknown,this.Kw=h.Ez.StoppedState,this.NR=r.Q.Unknown,this.FR=null,this.KM=!1,this.VR=!1}get trackingRequestMeta(){return{userId:this.userId,playerId:this.playerId,geo:this.geoLocation,browser:this.browser,version:a.g.version,sessionId:this.sessionId,clientAb0:c.e.clientAb0,clientAb1:c.e.clientAb1,clientAb2:c.e.clientAb2,clientAb3:c.e.clientAb3,clientAb4:c.e.clientAb4,clientAb5:c.e.clientAb5,serverAb0:(0,l.hj)(this.oR.serverAb0)?this.oR.serverAb0:c.e.serverAb0,serverAb1:c.e.serverAb1,pageUrl:this.pageUrl,bundleId:this.bundleId,customParam1:this.customParam1,customParam2:this.customParam2,customParam3:this.customParam3,customParam4:this.customParam4,customParam5:this.customParam5,bundleAbId:this.bundleAbId,bundlePart:this.bundlePart,abTestId:this.abTestId,shouldTrackAllRequests:this.VR,implementationType:this.implementationType,isPageInFocus:this.isPageInFocus,iiqEnabledAB:n.s.IIQ_ENABLED_AB,iiqGroupAB:n.s.IIQ_GROUP_AB,isIdentityEnhanced:this.KM}}get canTrackAllRequests(){return this.VR}get implementationType(){return this.oR.implementationType}get playerId(){return this.oR.playerId}get geoLocation(){return this.oR.geoLocation}get browser(){return this.oR.browser}get sessionId(){return this.oR.sessionId}get pageUrl(){return this.oR.pageUrl}get bundleId(){return this.oR.bundleId}get bundleAbId(){return this.oR.bundleAbId}get bundlePart(){return this.oR.bundlePart}get customParam1(){return this.oR.customParam1}get customParam2(){return this.oR.customParam2}get customParam3(){return this.oR.customParam3}get customParam4(){return this.oR.customParam4}get customParam5(){return this.oR.customParam5}get abTestId(){return this.oR.abTestId}get isExplorationMode(){return this.oR.isExplorationMode}get lineItemAbTestInformation(){return this.oR.lineItemAbTestInformation}get hasGdprConsentPayload(){return this.ER}set hasGdprConsentPayload(t){this.ER=t}get cachedGdprConsentMode(){return this.jR}set cachedGdprConsentMode(t){this.jR=t}get playerDimensions(){return this.kR}set playerDimensions(t){this.kR=t}get currentMediaMetadata(){return this.AR}set currentMediaMetadata(t){this.AR=t}get isSessionRenderTracked(){return this.OR}set isSessionRenderTracked(t){this.OR=t}get isPlayerStartTracked(){return this.xR}set isPlayerStartTracked(t){this.xR=t}get isSessionViewTracked(){return this.MR}set isSessionViewTracked(t){this.MR=t}get isFirstAdOpportunityElapsedTimeTracked(){return this.LR}set isFirstAdOpportunityElapsedTimeTracked(t){this.LR=t}get isFirstAdImpressionElapsedTimeTracked(){return this.BR}set isFirstAdImpressionElapsedTimeTracked(t){this.BR=t}get userId(){return this.oR.userId}set userId(t){this.oR.userId=t}set region(t){this.$R=t}get region(){return this.$R}get isIdentityEnhanced(){return this.KM}set isIdentityEnhanced(t){this.KM=t}get isPageInFocus(){return this.RR}set isPageInFocus(t){this.RR=t}get iasSegmentCodes(){return this.oR.iasSegmentCodes}get amazonTamPubId(){return this.oR.amazonTamPubId}get liveRampPubId(){return this.oR.liveRampPubId}get isInApp(){return(0,l.QM)(this.oR.bundleId)}get playerType(){return this.DR}set playerType(t){this.DR=t}get playerState(){return this.Kw}set playerState(t){this.Kw=t}get playerEnvironment(){return this.NR}set playerEnvironment(t){this.NR=t}get videoPlacement(){return this.qR}set videoPlacement(t){this.qR=t}set prefetchDistance(t){this.FR=t}get prefetchDistance(){return this.FR}get serverAb0(){return this.oR.serverAb0}get bundleLoadTimestamp(){return this.oR.bundleLoadTimestamp}get revSharePercentage(){return this.oR.revSharePercentage}};m=u([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),f(0,(0,s.f3)(d.c.GeneralMetadata)),p("design:paramtypes",[Object])],m)},8102:(t,e,i)=>{"use strict";i.d(e,{c:()=>d});var s=i(8659);const n=["treatment_1.1","treatment_1.2","treatment_1.3","control_2"];var r=i(6027),o=i(9791),a=i(4798),h=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},c=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};let d=class{loadCookieDeprecationLabel(t){return(0,a.$K)(this.HR)||(this.HR=(0,o.YY)(this.JR(t),100)),this.HR}getLoadedCookieDeprecationLabel(){return c(this,void 0,void 0,(function*(){if((0,a.$K)(this.HR))return this.HR}))}JR(t){var e;return c(this,void 0,void 0,(function*(){if("cookieDeprecationLabel"in t.navigator){const i=yield null===(e=t.navigator.cookieDeprecationLabel)||void 0===e?void 0:e.getValue();if((0,a.$K)(i)&&n.includes(i))return r.e.setClientAb4(n.indexOf(i)+1),i}}))}};d=h([(0,s.ri)()],d)},6029:(t,e,i)=>{"use strict";i.d(e,{H:()=>M});var s,n,r=i(8659),o=i(289);!function(t){t.Iab="iab",t.Static="static"}(s||(s={})),function(t){t[t.NotLinked=0]="NotLinked",t[t.Probabilistic=1]="Probabilistic",t[t.Cookies=2]="Cookies",t[t.HashedEmail=3]="HashedEmail"}(n||(n={}));var a=i(1828),h=i(4015),c=i(5650),d=i(9791),l=i(4261),u=i(4798),p=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class f{constructor(t,e,i){this.De=t,this.ll=e,this.Kr=i}init(){this.GR()}getSupplementalEids(){var t;return(0,u.$K)(this.zR)&&(0,c.BZ)(null===(t=this.zR)||void 0===t?void 0:t.uids)?[{source:this.zR.source,ids:[this.zR.uids[0].id],provider:o.ProtoIdentityPartnerEnum.ID5,ext:{linkType:this.zR.uids[0].ext.linkType}}]:[]}canUseWinUrl(){return!1}isLineItemEligibleForReporting(t){const{creativeType:e}=t.protoLineItem;return e===o.ProtoCreativeTypeEnum.Rtb}getPartner(){return o.ProtoIdentityPartnerEnum.ID5}GR(){var t,e;return p(this,void 0,void 0,(function*(){const i=new a.o(this.Kr,this.De),s={container:window.document.body,customHtml:"<script id='id5-cnx-script' type='text/javascript' src='https://cdn.id5-sync.com/api/1.0/id5-api.js'><\/script>",customIframeAttributes:[{key:"style",value:"display: none;"}]};try{const n=yield i.loadIframe(s);this.WR(null===(e=null===(t=null==n?void 0:n.iframe)||void 0===t?void 0:t.contentWindow)||void 0===e?void 0:e.ID5)}catch(t){(0,l.nF)({message:"ID5_iframe_not_loaded",level:l.D_.WARN,exception:(0,d.W$)(t).message})}}))}WR(t){if(!(0,u.$K)(t))return;const e=t.init({partnerId:1451,cmpApi:s.Static,consentData:this.YR()});e.onAvailable((t=>{this.zR=t.getUserIdAsEid()})),e.onUpdate((t=>{this.zR=t.getUserIdAsEid()}))}YR(){const t=this.ll.getConsentPayload();if(this.ll.isConsentRequired()&&(0,u.QM)(t))switch(this.ll.getGdprConsentApiType()){case h.P.TcfApi:return{getTCData:{gdprApplies:this.ll.isGDPR(),tcString:t}};case h.P.CmpApi:return{getConsentData:{gdprApplies:this.ll.isGDPR(),consentData:t}}}const e=this.ll.getUsPrivacyString();if(this.ll.isCcpaApplicable()&&(0,u.QM)(e))return{getUSPData:{version:1,uspString:e}}}}f.VENDOR_ID="131";const m=["uid2"];class g{constructor(t,e,i){this.Kr=t,this.XR=e,this.QR=i,this.KR=[],this.ZR=[],this.tD=o.ProtoIdentityProviderGroupEnum.None,this.tD=this.eD()}static isSupported(t,e){return t.includes(o.ProtoIdentityPartnerEnum.LiveIntent)&&e}init(){this.XR.isLiveIntentInitTimestampExpired()&&(this.iD(),this.XR.cacheLiveIntentInitExpiryTimestamp())}getGroup(){return this.tD}getPartner(){return o.ProtoIdentityPartnerEnum.LiveIntent}getIdentityProviderEids(){return 0===this.KR.length&&this.sD(),this.tD===o.ProtoIdentityProviderGroupEnum.A?this.KR:[]}getSupplementalEids(){return 0===this.KR.length&&this.sD(),this.tD===o.ProtoIdentityProviderGroupEnum.A?this.ZR:[]}isLineItemEligibleForReporting(t){const{creativeType:e}=t.protoLineItem;return e===o.ProtoCreativeTypeEnum.Rtb}canUseWinUrl(){return!1}iD(){const t=new a.o(this.Kr,this.QR.sessionId),e={container:window.document.body,customHtml:"<script id='liveintent-cnx-script' type='text/javascript' src='https://d-code.liadm.com/did-003y.min.js'><\/script>",customIframeAttributes:[{key:"style",value:"display: none;"}]};t.loadIframe(e).catch((t=>{(0,l.nF)({message:"LiveIntentService_iframe_not_loaded",level:l.D_.WARN,exception:(0,d.W$)(t).message})}))}sD(){const t=this.XR.getLiveIntentData();t&&this.nD(t)}nD(t){for(const[e,i]of Object.entries(t))m.includes(e)?this.ZR.push({source:e,ids:[i],provider:o.ProtoIdentityPartnerEnum.LiveIntent}):this.KR.push({source:e,ids:[i]})}eD(){return(0,d.Vm)([95,5])?o.ProtoIdentityProviderGroupEnum.B:o.ProtoIdentityProviderGroupEnum.A}}g.VENDOR_ID="148";var v=i(2979),y=i(3141),b=i(6027),I=i(6153);const w=372401555,P="_iiq_ab_group_372401555",T="intentiq.com",_="AdxCS";class S{constructor(t,e,i){this.Kr=t,this.rD=e,this.XR=i;const s=this.XR.getItem("_iiq_fdata_372401555"),n=this.XR.getItem(P),r=this.XR.getItem("_iiq_ab_percentage_372401555"),o=this.XR.getItem("_iiq_sync_372401555");((0,u.QM)(s)||(0,u.QM)(n)||(0,u.QM)(r)||(0,u.QM)(o))&&b.e.setClientAb2((0,d.Vm)([100,0])),b.e.clientAb2&&(this.oD=this.XR.getIIQIds()||{eids:[]})}static isSupported(t){return!(!S.aD(t)||0===v.s.IIQ_ENABLED_AB)&&(v.s.IIQ_GROUP_AB=(0,d.Vm)([0,0,100]),2===v.s.IIQ_GROUP_AB)}static aD(t){var e,i;const s=(null===(e=t.players)||void 0===e?void 0:e.some((t=>{var e;return null===(e=t.lineItems)||void 0===e?void 0:e.some((t=>(0,u.$K)(t.protoIntentiqResponseData)&&!(0,u.Ft)(t.protoIntentiqResponseData)))})))||!1,n=(null===(i=t.lineItems)||void 0===i?void 0:i.some((t=>(0,u.$K)(t.protoIntentiqResponseData)&&!(0,u.Ft)(t.protoIntentiqResponseData))))||!1;return s||n}init(){(0,u.$K)(this.oD)||this.hD()}getGroup(){return this.cD()}getPartner(){return o.ProtoIdentityPartnerEnum.IntentIQ}getIdentityProviderEids(){return this.dD()}getSupplementalEids(){return this.lD()}isLineItemEligibleForReporting(t){var e;const{creativeType:i}=t.protoLineItem;return i===o.ProtoCreativeTypeEnum.Rtb||(null===(e=t.protoLineItem.protoIntentiqResponseData)||void 0===e?void 0:e.vendorName)===_}reportExternalWin(t){var e;null===(e=this.pD)||void 0===e||e.reportExternalWin(t)}getAdxId(t){if(t===_)return this.fD()}canUseWinUrl(){return this.cD()!==o.ProtoIdentityProviderGroupEnum.C}hD(){const t=`<script id='intent-iq-cnx-script' type='text/javascript' src='${I.n.endPoints.assets.plugins.intentiq}'><\/script>`,e=new a.o(this.Kr,this.rD.sessionId),i={container:window.document.body,customHtml:t,customIframeAttributes:[{key:"style",value:"display: none;"}]};e.loadIframe(i).then((t=>{this.mD(t.iframe.contentWindow)})).catch((t=>{(0,l.nF)({message:"Intentiq_iframe_not_loaded",level:l.D_.WARN,exception:(0,d.W$)(t).message,sessionId:this.rD.sessionId})}))}mD(t){(null==t?void 0:t.IntentIqObject)&&(this.pD=new t.IntentIqObject(Object.assign({partner:w,ABTestingConfigurationSource:"percentage",abPercentage:95,manualWinReportEnabled:true,domainName:this.rD.domainName,callback:t=>{var e,i;this.gD=t;(0,c.BZ)(null==t?void 0:t.eids)&&(0,c.BZ)(null===(e=t.eids[0])||void 0===e?void 0:e.uids)&&(0,u.QM)(null===(i=t.eids[0].uids[0])||void 0===i?void 0:i.id)&&this.XR.cacheIIQIds(t)}},this.vD(this.rD.idfa,this.rD.idfv))))}vD(t,e){return t?{partnerClientId:t,partnerClientIdType:y.C.IDFA}:e?{partnerClientId:e,partnerClientIdType:y.C.IDFV}:void 0}lD(){var t;const e=null!==(t=this.oD)&&void 0!==t?t:this.gD;if(!(0,u.$K)(e)||!(0,c.BZ)(e.eids))return[];return this.yD({eids:e.eids.filter((t=>t.source===T))},!0)}dD(){var t;const e=null!==(t=this.oD)&&void 0!==t?t:this.gD;return(0,u.$K)(e)&&(0,c.BZ)(e.eids)?this.yD({eids:e.eids.filter((t=>t.source!==T))}):[]}yD(t,e=!1){var i;return(null===(i=null==t?void 0:t.eids)||void 0===i?void 0:i.map((({source:t,uids:i})=>{const s={source:t,ids:i.map((t=>t.id))};return e&&(s.provider=o.ProtoIdentityPartnerEnum.IntentIQ),s})))||[]}cD(){return(0,u.$K)(this.oD)?o.ProtoIdentityProviderGroupEnum.C:this.pD?this.bD():o.ProtoIdentityProviderGroupEnum.None}bD(){const t=this.XR.getItem(P);return(0,u.QM)(t)?"A"===t.toUpperCase()?o.ProtoIdentityProviderGroupEnum.A:"B"===t.toUpperCase()?o.ProtoIdentityProviderGroupEnum.B:o.ProtoIdentityProviderGroupEnum.None:o.ProtoIdentityProviderGroupEnum.None}fD(){var t,e,i;const s=(0,u.$K)(this.oD)?this.oD:this.gD;return null===(i=null===(e=null===(t=null==s?void 0:s.eids)||void 0===t?void 0:t.find((({source:t})=>t===T)))||void 0===e?void 0:e.uids[0])||void 0===i?void 0:i.id}}S.VENDOR_ID="has_no_iab_vendor_id";var A,x=i(7298),k=i(9528),E=i(6661),C=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},O=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},L=function(t,e){return function(i,s){e(i,s,t)}};let M=class{constructor(t,e,i,s){this.Kr=t,this.ID=e,this.ll=i,this.XR=s,this.wD=[],this.PD=[o.ProtoIdentityPartnerEnum.LiveIntent,o.ProtoIdentityPartnerEnum.IntentIQ,o.ProtoIdentityPartnerEnum.ID5]}initIdleProviders(){try{this._D()}catch(t){(0,l.nF)({message:"IdentityProviderService_error_initialization",exception:(0,d.W$)(t).message,level:l.D_.INFO},{pacing:5})}}getTrackingData(t,e=!1,i=o.ProtoIdentityPartnerEnum.None){var s;try{if(!this.isLineItemEligibleForReporting(t))return;const n=this.getProtoData();n.hasIIQLookup=e;const r=null===(s=n.identityProviderDataList)||void 0===s?void 0:s.find((t=>t.partner===i));return r&&(r.isUsed=!0),k.km.fromProtoIdentityProviderData(n)}catch(t){return void(0,l.nF)({message:"IdentityProviderService_error_getTrackingData",exception:(0,d.W$)(t).message,level:l.D_.WARN},{pacing:5})}}getProtoData(){var t,e,i;try{const s=[],n=[];this.wD.forEach((t=>{var e,i;const r=null===(e=t.getIdentityProviderEids)||void 0===e?void 0:e.call(t),o=null===(i=t.getGroup)||void 0===i?void 0:i.call(t);((0,c.BZ)(r)||(0,u.$K)(o))&&s.push({partner:t.getPartner(),eidsList:r,group:o}),n.push(...t.getSupplementalEids())}));let r={group:o.ProtoIdentityProviderGroupEnum.None,identityProviderEidsList:[],identityPartnerEnum:o.ProtoIdentityPartnerEnum.None};const a=this.wD.find((t=>{var e;return(null===(e=t.getPartner)||void 0===e?void 0:e.call(t))===o.ProtoIdentityPartnerEnum.LiveIntent}));return a&&(r={group:null===(t=null==a?void 0:a.getGroup)||void 0===t?void 0:t.call(a),identityProviderEidsList:[...(null===(e=null==a?void 0:a.getIdentityProviderEids)||void 0===e?void 0:e.call(a))||[],...a.getSupplementalEids()],identityPartnerEnum:null===(i=null==a?void 0:a.getPartner)||void 0===i?void 0:i.call(a)}),Object.assign(Object.assign({},r),{identityProviderDataList:s,eidsDataList:n})}catch(t){return(0,l.nF)({message:"IdentityProviderService_error_getProtoData",exception:(0,d.W$)(t).message,level:l.D_.WARN},{pacing:5}),{eidsDataList:[],group:o.ProtoIdentityProviderGroupEnum.None,identityPartnerEnum:o.ProtoIdentityPartnerEnum.None,identityProviderDataList:[],identityProviderEidsList:[]}}}isLineItemEligibleForReporting(t){return this.wD.some((e=>e.isLineItemEligibleForReporting(t)))}canUseWinUrl(t){return this.wD.some((e=>e.canUseWinUrl(t)))}reportExternalWin(t){this.wD.forEach((e=>{var i;null===(i=e.reportExternalWin)||void 0===i||i.call(e,t)}))}getAdxId(t){var e;for(const i of this.wD)if(void 0!==(null===(e=i.getAdxId)||void 0===e?void 0:e.call(i,t)))return i.getAdxId(t)}_D(){this.PD.filter((t=>!this.wD.some((e=>e.getPartner()===t)))).forEach((t=>{let e;switch(t){case o.ProtoIdentityPartnerEnum.IntentIQ:e=this.TD();break;case o.ProtoIdentityPartnerEnum.LiveIntent:e=this.SD();break;case o.ProtoIdentityPartnerEnum.ID5:e=this.AD()}(0,u.$K)(e)&&(this.wD.push(e),e.init())}))}TD(){if(!this.ll.isConsentForVendorAndConnatix(S.VENDOR_ID)||!S.isSupported(this.ID.playerResponse))return;const t={domainName:this.ID.domainName,sessionId:this.ID.sessionId,idfa:this.ID.idfa,idfv:this.ID.idfv};return new S(this.Kr,t,this.XR)}SD(){const t=this.XR.isLocalStorageEnabled;if(!this.ll.isConsentForVendorAndConnatix(g.VENDOR_ID)||!g.isSupported(this.ID.supportedIdentityPartners,t))return;const e={sessionId:this.ID.sessionId};return new g(this.Kr,this.XR,e)}AD(){return this.ll.isConsentForVendorAndConnatix(f.VENDOR_ID)?new f(this.ID.sessionId,this.ll,this.Kr):void 0}};M=C([(0,r.ri)(),L(0,(0,r.f3)(E.c.GlobalDomUtilsService)),L(1,(0,r.f3)(E.c.IdentityProviderSettings)),L(2,(0,r.f3)(E.c.UserManagerService)),L(3,(0,r.f3)(x.n)),O("design:paramtypes",[Object,Object,Object,"function"==typeof(A=void 0!==x.n&&x.n)?A:Object])],M)},2979:(t,e,i)=>{"use strict";i.d(e,{s:()=>n});var s=i(9791);class n{}n.IIQ_ENABLED_AB=(0,s.Vm)([5,95]),n.IIQ_GROUP_AB=0},3141:(t,e,i)=>{"use strict";var s,n;i.d(e,{C:()=>s,T:()=>n}),function(t){t[t.IDFV=1]="IDFV",t[t.IntentIqFirstPartyId=2]="IntentIqFirstPartyId",t[t.IDFA=4]="IDFA"}(s||(s={})),function(t){t[t.Prebid=1]="Prebid",t[t.Amazon=2]="Amazon",t[t.Google=3]="Google",t[t.OpenRTB=4]="OpenRTB"}(n||(n={}))},9209:(t,e,i)=>{"use strict";var s,n;i.d(e,{Pl:()=>r,Ys:()=>s,d:()=>n}),function(t){t[t.Space=0]="Space",t[t.KeyM=1]="KeyM",t[t.KeyF=2]="KeyF",t[t.KeyC=3]="KeyC",t[t.KeyN=4]="KeyN",t[t.KeyP=5]="KeyP",t[t.ArrowUp=6]="ArrowUp",t[t.ArrowDown=7]="ArrowDown",t[t.ArrowRight=8]="ArrowRight",t[t.ArrowLeft=9]="ArrowLeft",t[t.Digit0=10]="Digit0",t[t.Digit1=11]="Digit1",t[t.Digit2=12]="Digit2",t[t.Digit3=13]="Digit3",t[t.Digit4=14]="Digit4",t[t.Digit5=15]="Digit5",t[t.Digit6=16]="Digit6",t[t.Digit7=17]="Digit7",t[t.Digit8=18]="Digit8",t[t.Digit9=19]="Digit9",t[t.KeyO=20]="KeyO"}(s||(s={})),function(t){t[t.togglePlay=0]="togglePlay",t[t.toggleMute=1]="toggleMute",t[t.toggleFullscreen=2]="toggleFullscreen",t[t.toggleCaptions=3]="toggleCaptions",t[t.increaseVolume=4]="increaseVolume",t[t.decreaseVolume=5]="decreaseVolume",t[t.seekForward=6]="seekForward",t[t.seekBackward=7]="seekBackward",t[t.seek0Percent=8]="seek0Percent",t[t.seek10Percent=9]="seek10Percent",t[t.seek20Percent=10]="seek20Percent",t[t.seek30Percent=11]="seek30Percent",t[t.seek40Percent=12]="seek40Percent",t[t.seek50Percent=13]="seek50Percent",t[t.seek60Percent=14]="seek60Percent",t[t.seek70Percent=15]="seek70Percent",t[t.seek80Percent=16]="seek80Percent",t[t.seek90Percent=17]="seek90Percent",t[t.nextVideo=18]="nextVideo",t[t.previousVideo=19]="previousVideo",t[t.callToAction=20]="callToAction"}(n||(n={}));const r={[s.Space]:n.togglePlay,[s.KeyM]:n.toggleMute,[s.KeyF]:n.toggleFullscreen,[s.KeyC]:n.toggleCaptions,[s.ArrowUp]:n.increaseVolume,[s.ArrowDown]:n.decreaseVolume,[s.ArrowRight]:n.seekForward,[s.ArrowLeft]:n.seekBackward,[s.Digit0]:n.seek0Percent,[s.Digit1]:n.seek10Percent,[s.Digit2]:n.seek20Percent,[s.Digit3]:n.seek30Percent,[s.Digit4]:n.seek40Percent,[s.Digit5]:n.seek50Percent,[s.Digit6]:n.seek60Percent,[s.Digit7]:n.seek70Percent,[s.Digit8]:n.seek80Percent,[s.Digit9]:n.seek90Percent,[s.KeyN]:n.nextVideo,[s.KeyP]:n.previousVideo,[s.KeyO]:n.callToAction}},942:(t,e,i)=>{"use strict";i.d(e,{L:()=>p});var s,n=i(8659),r=i(1828),o=i(6661),a=i(9791),h=i(4261),c=i(4798),d=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(t,e){return function(i,s){e(i,s,t)}};let p=s=class{constructor(t){this.Kr=t}initIfSupported(t,e){var i,s;const n=Boolean(null===(i=t.players)||void 0===i?void 0:i.some((t=>{var e;return null===(e=t.lineItems)||void 0===e?void 0:e.some((t=>t.isLexiconSupported))}))),r=Boolean(null===(s=t.lineItems)||void 0===s?void 0:s.some((t=>t.isLexiconSupported)));(n||r)&&this.lk(e)}getUids(){var t;return(0,c.$K)(this.gD)&&(null===(t=this.gD[0])||void 0===t?void 0:t.uids.map((t=>t.id)))||[]}lk(t){(0,c.$K)(s.INSTANCE)||(s.INSTANCE=this,this.DD(t))}DD(t){const e=`<script id='lexicon-cnx-script' type='text/javascript' src='${s.LEXICON_SDK_URL}'><\/script>`,i=new r.o(this.Kr,t),n={container:window.document.body,customHtml:e,customIframeAttributes:[{key:"style",value:"display: none;"}]};i.loadIframe(n).then((t=>{this.ND(t.iframe.contentWindow)})).catch((t=>{(0,h.nF)({message:"Lexicon_iframe_not_loaded",level:h.D_.WARN,exception:(0,a.W$)(t).message})}))}ND(t){(null==t?void 0:t._33AcrossIdMappingsProvider)&&(this.FD=new t._33AcrossIdMappingsProvider({pid:s.CNX_PID}),this.FD.fetch().then((t=>{this.gD=t})).catch((()=>{(0,h.nF)({message:"LexiconService_lexicon_sdk_fetch_failed",level:h.D_.INFO},{pacing:5})})))}};p.LEXICON_SDK_URL="https://cdn-ima.33across.com/ima.js",p.CNX_PID="0015a00002y7TWTAA2",p=s=d([(0,n.ri)(),u(0,(0,n.f3)(o.c.GlobalDomUtilsService)),l("design:paramtypes",[Object])],p)},7298:(t,e,i)=>{"use strict";i.d(e,{n:()=>p});var s,n=i(8659),r=i(9791),o=i(4261),a=i(1310),h=i(4798),c=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},d=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t.CACHED_IIQ_IDS="cnx_cii",t.CACHED_USER="cnx_cu_v2",t.CACHED_USER_BY_PANORAMA="cnx_cu_pano",t.CACHED_PANORAM_ID="cnx_pano",t.LIVE_INTENT_IDS="__connatixLIResolveResult",t.LIVE_INTENT_INIT_EXPIRY_TIMESTAMP="__cnxLIInitExpiryTimestamp"}(s||(s={}));const l="tsvzv8mHEU39ZXO5K1QvCRGddISLFNrx",u="BHJChM5nPwTbK3q0Kn5hdunSZYGuvzF6";let p=class{constructor(){try{this.VD=(0,r.pE)(window).topFrame.localStorage}catch(t){(0,o.nF)({message:"LocalStorageService_localStorage_access_denied",level:o.D_.INFO,exception:(0,r.W$)(t).message},{pacing:1,throttle:1})}}get isLocalStorageEnabled(){return(0,h.$K)(this.VD)}cacheLiveIntentInitExpiryTimestamp(){var t;const e=String((0,a.WH)(4));null===(t=this.VD)||void 0===t||t.setItem(s.LIVE_INTENT_INIT_EXPIRY_TIMESTAMP,e)}isLiveIntentInitTimestampExpired(){try{const t=Number(this.getItem(s.LIVE_INTENT_INIT_EXPIRY_TIMESTAMP));return!t||this.jD(t)}catch(t){return(0,o.nF)({message:"LocalStorageService_parsing_LItimestamp",level:o.D_.INFO,exception:(0,r.W$)(t).message},{pacing:1}),!0}}getLiveIntentData(){try{const t=this.getItem(s.LIVE_INTENT_IDS);return t?JSON.parse(t):null}catch(t){return(0,o.nF)({message:"LocalStorageService_parsing_JSON",level:o.D_.INFO,exception:(0,r.W$)(t).message},{pacing:1}),null}}cacheIIQIds(t){this.UD(t,s.CACHED_IIQ_IDS,l)}getIIQIds(){return this.$D(s.CACHED_IIQ_IDS,l)}cacheUser(t){const e={expiryTimestamp:(0,a.XF)(1),user:t};this.UD(e,s.CACHED_USER,u)}cacheUserByPanorama(t){const e={expiryTimestamp:(0,a.XF)(30),userId:t};this.UD(e,s.CACHED_USER_BY_PANORAMA,u)}cachePanoramaId(t){this.UD(t,s.CACHED_PANORAM_ID,u)}getPanoramaId(){return this.$D(s.CACHED_PANORAM_ID,u)}getUserByPanorama(){const t=this.$D(s.CACHED_USER_BY_PANORAMA,u);if(!t)return null;return this.jD(t.expiryTimestamp)?(this.JD(s.CACHED_USER_BY_PANORAMA),null):t.userId}getUser(){const t=this.$D(s.CACHED_USER,u);if(!t)return null;return this.jD(t.expiryTimestamp)?null:t.user}getItem(t){return(0,h.$K)(this.VD)?this.VD.getItem(t):null}jD(t){return t-(0,a.dO)()<0}UD(t,e,i){if(!(0,h.$K)(this.VD))return;const s=(0,r.Ld)(JSON.stringify(t),i);this.VD.setItem(e,s)}$D(t,e){if(!(0,h.$K)(this.VD))return null;const i=this.VD.getItem(t);if(!(0,h.QM)(i))return null;const s=(0,r.j6)(i,e);return JSON.parse(s)}JD(t){var e;null===(e=this.VD)||void 0===e||e.removeItem(t)}};p=c([(0,n.ri)(),d("design:paramtypes",[])],p)},6174:(t,e,i)=>{"use strict";var s;i.d(e,{V:()=>s}),function(t){t[t.None=0]="None",t[t.Linear=1]="Linear",t[t.NonLinear=2]="NonLinear"}(s||(s={}))},9005:(t,e,i)=>{"use strict";var s;i.d(e,{Q:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.InAppSdk=1]="InAppSdk",t[t.InAppReactNative=2]="InAppReactNative",t[t.InAppFlutter=3]="InAppFlutter",t[t.InAppGam=4]="InAppGam",t[t.InAppWebview=5]="InAppWebview",t[t.WebAmp=6]="WebAmp",t[t.WebGamSafeIframe=7]="WebGamSafeIframe",t[t.WebGamFreindlyIframe=8]="WebGamFreindlyIframe",t[t.Web=9]="Web"}(s||(s={}))},6568:(t,e,i)=>{"use strict";var s;i.d(e,{e:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.Video=1]="Video",t[t.Outstream=2]="Outstream",t[t.Live=3]="Live",t[t.Story=4]="Story"}(s||(s={}))},5027:(t,e,i)=>{"use strict";i.d(e,{n:()=>o});var s=i(9107),n=i(8576),r=i(4798);class o{static getConnectionType(t){if((0,r.$K)(this.CONNECTION_TYPE))return this.CONNECTION_TYPE;const{connection:e}=window.navigator;if(!e)return n.FX.UNKNOWN;const{type:i,effectiveType:o}=e;return i===n.N_.ETHERNET?n.FX.ETHERNET:i===n.N_.WIFI?n.FX.WIFI:i===n.N_.CELLULAR?this.GD(o):(0,r.$K)(i)||t!==s.VB.Desktop?n.FX.UNKNOWN:n.FX.WIFI}static GD(t){switch(t){case n.Oc.CELLULAR_2G:case n.Oc.CELLULAR_SLOW_2G:return n.FX.CELLULAR_2G;case n.Oc.CELLULAR_3G:return n.FX.CELLULAR_3G;case n.Oc.CELLULAR_4G:return n.FX.CELLULAR_4G;default:return n.FX.CELLULAR_UNKNOWN}}}},1280:(t,e,i)=>{"use strict";i.d(e,{G:()=>D});var s,n=i(6716),r=i(6515),o=i(5196),a=i(8659),h=i(3);!function(t){t[t.OnAdLoaded=0]="OnAdLoaded",t[t.OnAdSessionStart=1]="OnAdSessionStart"}(s||(s={}));var c,d=i(1783);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(c||(c={}));class l{constructor(){this.zD=new n.x}computeState(t){const e=this.WD(t);this.YD&&this.YD!==e&&this.YD!==c.Fullscreen&&this.zD.next(e),this.YD=e,this.KD||e!==c.Normal||(this.KD={name:e,dimensions:t,area:t.height*t.width})}setPlayerState(t,e){this.YD&&this.YD!==t&&!e&&this.zD.next(t),this.YD=t}get playerStateChanged(){return this.zD.asObservable()}get currentState(){return this.YD}WD(t){if(!this.KD)return c.Normal;const{area:e}=this.KD,i=t.width*t.height;switch(!0){case i===e:return c.Normal;case 0===i:return c.Minimized;case e<i:return c.Expanded;case e>i:return c.Collapsed;default:return this.YD}}}var u=i(1703),p=i(4772),f=i(4261),m=i(9600),g=i(4798);class v{constructor(t,e,i,s,r,o,a){this.ZD=t,this.$A=e,this.eN=i,this.jc=s,this.NL=r,this.iN=o,this.De=a,this.nN=new n.x,this.rN=new h.t,this.Mi=[],this.oN=!0,this.aN={[p.Z.AdError]:()=>this.dn(),[p.Z.AdImpression]:()=>this.un(),[p.Z.AdVideoStart]:t=>this.hN(null==t?void 0:t.adVideoStartMetadata),[p.Z.AdVideoFirstQuartile]:()=>this.cN(),[p.Z.AdVideoMidpoint]:()=>this.dN(),[p.Z.AdVideoThirdQuartile]:()=>this.lN(),[p.Z.AdVideoComplete]:()=>this.uN(),[p.Z.VolumeChange]:t=>this.pN(null==t?void 0:t.volume),[p.Z.AdPause]:()=>this.zv(),[p.Z.AdPlay]:()=>this.fN(),[p.Z.AdSkipped]:()=>this.mN(),[p.Z.AdClickThru]:()=>this.gN(),[p.Z.AdInteraction]:()=>this.vN(),[p.Z.AdExpandedChange]:()=>this.yN(),[p.Z.AdLoaded]:t=>this.ln(null==t?void 0:t.adLoadedMetadata),[p.Z.PlayerResized]:t=>this.bN(null==t?void 0:t.playerDimensionsMetadata),[p.Z.OnEnterFullscreen]:()=>this.IN(),[p.Z.OnExitFullscreen]:()=>this.wN(),[p.Z.PlayerCollapsed]:()=>this.PN(),[p.Z.PlayerExpanded]:t=>this.bN(null==t?void 0:t.playerDimensionsMetadata),[p.Z.AdStopped]:()=>this._N(),[p.Z.Destroy]:()=>this.destroy()},this.TN=t=>{try{const e=this.aN[t.name];if(!e)return;e(t.metadata)}catch(t){(0,f.nF)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t?JSON.stringify(t):void 0,level:f.D_.WARN,sessionId:this.De})}},this.SN=new l,this.AN(),this.$A.subscribe(this.TN),this.Mi.push(this.SN.playerStateChanged.subscribe((t=>{this.kN(t)}))),this.ln(this.$A.adLoadedMetadata)}get adSessionFinished(){return this.nN.asObservable()}get adSessionStart(){return this.rN.asObservable()}destroy(){this.jc=null,this.NL=null,this.eN=null,this.$A.unsubscribe(this.TN),(0,m.i)(this.Mi)}kN(t){var e;t&&(null===(e=this.NL)||void 0===e||e.playerStateChange(t))}_N(){this.nN.next()}dn(){var t;null===(t=this.eN)||void 0===t||t.error(d.jI.Video,p.Z.AdError),this.nN.next()}un(){var t;null===(t=this.jc)||void 0===t||t.impressionOccurred();const e=this.SN.currentState;e!==c.Normal&&this.kN(e)}hN(t){var e;t&&(0,g.hj)(null==t?void 0:t.duration)&&(0,g.hj)(null==t?void 0:t.mediaPlayerVolume)?(this.xN(t.mediaPlayerDimensions),null===(e=this.NL)||void 0===e||e.start(t.duration,t.mediaPlayerVolume)):(0,f.nF)({message:"OmidVideoHandler_mediaEvent_start",level:f.D_.WARN,sessionId:this.De})}cN(){var t;null===(t=this.NL)||void 0===t||t.firstQuartile()}dN(){var t;null===(t=this.NL)||void 0===t||t.midpoint()}lN(){var t;null===(t=this.NL)||void 0===t||t.thirdQuartile()}uN(){var t;null===(t=this.NL)||void 0===t||t.complete()}pN(t){var e;(0,g.hj)(t)?null===(e=this.NL)||void 0===e||e.volumeChange(t):(0,f.nF)({message:"OmidVideoHandler_mediaEvent_volume",level:f.D_.WARN,sessionId:this.De})}zv(){var t;null===(t=this.NL)||void 0===t||t.pause()}fN(){var t;null===(t=this.NL)||void 0===t||t.resume()}mN(){var t;null===(t=this.NL)||void 0===t||t.skipped(),this.nN.next()}gN(){var t;null===(t=this.NL)||void 0===t||t.adUserInteraction(d.fi.Click)}vN(){var t;null===(t=this.NL)||void 0===t||t.adUserInteraction(d.fi.InvitationAccept)}yN(){var t;null===(t=this.NL)||void 0===t||t.adUserInteraction(d.fi.InvitationAccept)}ln(t){var e;if(!this.$A.adStateMetadata)return void(0,f.nF)({message:"OmidVideoHandler_adStateChangedMetadata.state",level:f.D_.WARN,sessionId:this.De});const i=new Map([[u.I.MidRoll,d.yA.MidRoll],[u.I.PostRoll,d.yA.PostRoll],[u.I.PreRoll,d.yA.PreRoll],[u.I.Standalone,d.yA.Standalone]]);this.CN=new this.ZD.VastProperties(null==t?void 0:t.isSkippable,null==t?void 0:t.skipOffset,null==t?void 0:t.isAutoPlay,i.get(this.$A.adStateMetadata.state)),this.iN===s.OnAdLoaded&&(null===(e=this.jc)||void 0===e||e.loaded(this.CN))}bN(t){t?this.xN({height:t.height,width:t.width}):(0,f.nF)({message:"OmidVideoHandler_playerDimensionsMetadata",level:f.D_.WARN,sessionId:this.De})}IN(){this.MN(c.Fullscreen)}wN(){this.MN(c.Fullscreen,this.oN)}PN(){this.MN(c.Minimized)}xN(t){(0,g.hj)(t.width)&&(0,g.hj)(t.height)&&t&&this.SN.computeState(t)}MN(t,e=!1){this.SN.setPlayerState(t,e)}AN(){var t;null===(t=this.eN)||void 0===t||t.registerSessionObserver((t=>{t.type===d.Ve.SessionStart?this.LN(t):t.type===d.Ve.SessionError&&(0,f.nF)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:f.D_.WARN,sessionId:this.De},{throttle:1,shouldSendMaxLog:!1})}))}LN(t){var e,i,n;t.data.impressionType===d.sm.DefinedByJavascript&&(null===(e=this.eN)||void 0===e||e.setImpressionType(d.sm.BeginToRender)),t.data.creativeType===d.qZ.DefinedByJavascript&&(null===(i=this.eN)||void 0===i||i.setCreativeType(d.qZ.Video)),this.CN&&this.iN===s.OnAdSessionStart&&(null===(n=this.jc)||void 0===n||n.loaded(this.CN)),this.rN.next()}}var y=i(2728);class b{constructor(t,e){this.BN=t,this.De=e,this.RN=window,this.DN=!1,this.FN=new n.x,this.jN=new n.x,this.DN=y.$.shouldUseOmsdkForAds(this.BN)}get omidAdSessionStart(){return this.FN.asObservable()}get omidAdSessionFinish(){return this.jN.asObservable()}isSupported(){return this.DN}getOMSDKVersion(){return this.BN}getLoadingStrategy(){return s.OnAdSessionStart}getServiceWindow(){return this.RN}startSession(){this.FN.next()}finishSession(){this.jN.next()}resetSession(){this.FN.next()}finishPlayerSession(){return new Promise((t=>{this.jN.next(),setTimeout((()=>{t()}),1e3)}))}createPartner(t){this.UN=new t.Partner(d.cv,this.BN)}createNewContext(t,e){if(this.UN)return new t.Context(this.UN,e);(0,f.nF)({message:"OmsdkInAppImplementation_no_partner",level:f.D_.WARN,sessionId:this.De})}}var I=i(1828),w=i(6153),P=i(384),T=i(3020);const _="omsdk-connatix-web-service-iframe";class S{constructor(t,e,i,s,n,r){this.Hl=t,this.De=e,this.$N=i,this.qN=s,this.HN=n,this.Kr=r,this.isSupported()&&this.JN()}getOMSDKVersion(){return d.rF}isSupported(){return!(this.$N||this.qN&&this.HN!==P.K.Friendly)}getServiceWindow(){return this.RN}getLoadingStrategy(){return s.OnAdLoaded}startSession(t){null==t||t.setCreativeType(d.qZ.Video),null==t||t.setImpressionType(d.sm.BeginToRender),null==t||t.start()}finishSession(t){null==t||t.finish()}finishPlayerSession(){return Promise.resolve()}createPartner(t){this.UN=new t.Partner(d.cv,d.rF)}createNewContext(t,e){if(this.UN)return new t.Context(this.UN,e,this.Hl);(0,f.nF)({message:"OmsdkWebImplementation_no_partner",level:f.D_.WARN,sessionId:this.De})}JN(){var t;const e=(0,T.rI)(_,window);if(e)return void(this.RN=null===(t=e.contentWindow)||void 0===t?void 0:t.window);const i=`<script id='omsdk-connatix-webservice-script' type='text/javascript'\n            src='${w.n.endPoints.assets.plugins.omsdkWebService}'><\/script>`;this.GN=new I.o(this.Kr,this.De);const s={container:this.qN?this.Kr.global.document.body:window.document.body,customHtml:i,customIframeAttributes:[{key:"style",value:"display: none;"}],iframeId:_};this.GN.loadIframe(s).then((()=>{var t,e;this.RN=null===(e=null===(t=this.GN)||void 0===t?void 0:t.iframe.contentWindow)||void 0===e?void 0:e.window})).catch((()=>{(0,f.nF)({message:"OMSDKService_error_loading_WebServiceIframe",level:f.D_.WARN,sessionId:this.De})}))}}var A,x=i(9357),k=(i(7129),i(4646)),E=i(6661),C=i(5650),O=i(4411),L=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},M=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},R=function(t,e){return function(i,s){e(i,s,t)}},B=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};let D=A=class{constructor(t,e,i){var s,o;this.$A=t,this.Kr=e,this.zN=i,this.FN=new n.x,this.jN=new n.x,this.WN=new r.X(!1),this.YN=new r.X(!1),this.XN=new n.x,this.Mi=[],this.zN.isInAppSdk?(this.QN=new b(this.zN.sdkVersion,this.zN.sessionId),null===(s=this.QN.omidAdSessionStart)||void 0===s||s.subscribe((()=>{this.FN.next()})),null===(o=this.QN.omidAdSessionFinish)||void 0===o||o.subscribe((()=>{this.jN.next()}))):this.QN=new S(this.zN.pageUrl,this.zN.sessionId,this.zN.isInApp,this.zN.isGam,this.zN.gamIframeType,this.Kr),this.isOmsdkFullSupport&&this.KN()}get isOmsdkFullSupport(){return this.QN.isSupported()}get omsdkVersion(){return this.QN.getOMSDKVersion()}get omidAdSessionStart(){return this.FN.asObservable()}get omidAdSessionFinish(){return this.jN.asObservable()}get omidResourcesReady(){return this.WN.asObservable()}get verificationNotExecuted(){return this.XN.asObservable()}get RN(){return this.QN.getServiceWindow()}static _a(t){const e=t.replace(/\[reason\]/i,"1");O.n.trackPixel(e)}clearPendingProcesses(){(0,m.i)(this.Mi),this.Mi=[],this.WN.next(!1)}addVerificationNode(t,e){this.clearPendingProcesses();const i=this.YN.asObservable().pipe((0,o.P)((t=>t))).subscribe((()=>{this.YN.next(!1),this.tF().then((()=>this.eF(t,e))).then((()=>{this.WN.next(!0)})).catch((()=>{this.iF(t)}))}));this.Mi.push(i)}iF(t){t.forEach((t=>{(0,g.$K)(t.trackingEvents)&&(0,C.BZ)(t.trackingEvents)&&t.trackingEvents.filter((t=>"verificationNotExecuted"===t.name)).forEach((t=>{A._a(t.uri),this.XN.next()}))})),(0,f.nF)({message:"OMSDKService_verification_not_executed",level:f.D_.INFO,sessionId:this.zN.sessionId},{throttle:1,shouldSendMaxLog:!1}),this.WN.next(!0)}eF(t,e){return B(this,void 0,void 0,(function*(){if(!(0,g.$K)(this.ZD))throw(0,f.nF)({message:"OMSDKService_no_client",level:f.D_.WARN,sessionId:this.zN.sessionId}),new Error("noOmidClient");this.QN.createPartner(this.ZD);const i=k.$.getVerificationScriptResources(t,this.ZD);if(this.Ic=this.QN.createNewContext(this.ZD,i),!this.Ic)throw(0,f.nF)({message:"OMSDKService_no_context",level:f.D_.WARN,sessionId:this.zN.sessionId}),new Error("noOmidContext");if(this.Ic.setVideoElement(e.videoSlot),this.Ic.setSlotElement(e.slot),!this.RN)throw(0,f.nF)({message:"OMSDKService_no_service_window",level:f.D_.WARN,sessionId:this.zN.sessionId}),new Error("noServiceWindow");this.Ic.setServiceWindow(this.RN);const s=new this.ZD.AdSession(this.Ic),n=new this.ZD.AdEvents(s),r=new this.ZD.MediaEvents(s);if(!s||!n||!r)throw(0,f.nF)({message:"OMSDKService_cant_start_omid_events",exception:`adSession:${!!s}_adEvents:${!!n}_mediaEvents:${!!r}`,level:f.D_.WARN,sessionId:this.zN.sessionId}),new Error("noOmidEvents");this.QN.startSession(s),this.sF=new v(this.ZD,this.$A,s,n,r,this.QN.getLoadingStrategy(),this.zN.sessionId),this.sF.adSessionFinished.subscribe((()=>{var t;this.WN.next(!1),this.YN.next(!1),this.QN.finishSession(s),null===(t=this.sF)||void 0===t||t.destroy(),this.sF=null,this.oF()}));return new Promise((t=>{var e;null===(e=this.sF)||void 0===e||e.adSessionStart.subscribe((()=>{t()}))}))}))}tF(){return this.QN.finishPlayerSession()}oF(){setTimeout((()=>{var t,e;this.hF(),this.KN(),null===(e=(t=this.QN).resetSession)||void 0===e||e.call(t)}),x.s_)}cF(){var t,e;this.ZD=k.$.getSessionClient(null===(e=null===(t=this.dF)||void 0===t?void 0:t.iframe.contentWindow)||void 0===e?void 0:e.window),this.ZD||(0,f.nF)({message:"OMSDKService_no_session_client",level:f.D_.INFO,sessionId:this.zN.sessionId})}KN(){const t=`<script id='omsdk-connatix-client-script' type='text/javascript' src='${w.n.endPoints.assets.plugins.omsdkSessionClient}'><\/script>`;this.YN.next(!1),this.dF=new I.o(this.Kr,this.zN.sessionId);const e={container:this.zN.isGam?this.Kr.global.document.body:window.document.body,customHtml:t,customIframeAttributes:[{key:"style",value:"display: none;"}]};this.dF.loadIframe(e).then((()=>{this.cF(),this.YN.next(!0)})).catch((()=>{(0,f.nF)({message:"OMSDKService_error_loading_SessionClientIframe",level:f.D_.WARN,sessionId:this.zN.sessionId})}))}hF(){var t,e,i,s;null===(e=null===(t=this.dF)||void 0===t?void 0:t.iframe.parentElement)||void 0===e||e.removeChild(null===(i=this.dF)||void 0===i?void 0:i.iframe),null===(s=this.dF)||void 0===s||s.destroy(),this.dF=null}};D=A=L([(0,a.b2)(),(0,a.Yn)(a.Fw.ContainerScoped),R(0,(0,a.f3)(E.c.EventsStorageService)),R(1,(0,a.f3)(E.c.GlobalDomUtilsService)),R(2,(0,a.f3)(E.c.OmidSettings)),M("design:paramtypes",[Object,Object,Object])],D)},6565:(t,e,i)=>{"use strict";i.d(e,{q:()=>a});var s=i(6515),n=i(6716),r=i(8659),o=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let a=class{constructor(){this.sessionPlaybackChanged=new s.X({isPlaying:!1}),this.sessionViewabilityChanged=new s.X({isInView:!1}),this.sessionTimeElapsed=new n.x,this.sessionRendered=new n.x,this.sessionView=new n.x,this.sessionAdBlocked=new n.x,this.adOpportunity=new n.x,this.adsEnabled=new n.x,this.stayNextButtonsAppeared=new n.x,this.contentStart=new n.x}};a=o([(0,r.b2)(),(0,r.Yn)(r.Fw.ContainerScoped)],a)},9528:(t,e,i)=>{"use strict";i.d(e,{T0:()=>y,$d:()=>b,n2:()=>I,aF:()=>w,Ox:()=>k,jE:()=>P,Kx:()=>T,tO:()=>_,sT:()=>S,s8:()=>A,Rl:()=>x,mr:()=>E,Ax:()=>C,EC:()=>O,Eq:()=>L,qw:()=>M,Ti:()=>s,dz:()=>n,EN:()=>c,wE:()=>d,km:()=>l,W1:()=>u,p:()=>p,yz:()=>m,ng:()=>R,XE:()=>g});class s{static getProtoAuctionInformation(t){const{bidDensity:e,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:s}=t;return{bidDensity:e,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:s}}static fromProtoAuctionInformation(t){const{bidDensity:e,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:s}=t;return{bidDensity:e,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:s}}}class n{static getProtoDiscount(t){return{id:t.id,rate:t.rate}}static fromProtoDiscount(t){return{id:t.id,rate:t.rate}}}var r=i(5419),o=i(289),a=i(9005),h=i(9107);class c{static getProtoImplementationType(t){return{[h.Vx.Amp]:o.ProtoImplementationType.Amp,[h.Vx.Web]:o.ProtoImplementationType.Web,[h.Vx.Standalone]:o.ProtoImplementationType.Standalone}[t]}static fromProtoGetImplementationType(t){return{[o.ProtoImplementationType.Amp]:h.Vx.Amp,[o.ProtoImplementationType.Web]:h.Vx.Web,[o.ProtoImplementationType.Standalone]:h.Vx.Standalone}[t]}static getProtoDeviceType(t){return{[h.VB.Desktop]:o.ProtoDeviceType.Desktop,[h.VB.Smartphone]:o.ProtoDeviceType.Smartphone,[h.VB.Tablet]:o.ProtoDeviceType.Tablet,[h.VB.GameConsole]:o.ProtoDeviceType.GameConsole,[h.VB.PDA]:o.ProtoDeviceType.PDA,[h.VB.SmartTV]:o.ProtoDeviceType.SmartTV,[h.VB.Unrecognized]:o.ProtoDeviceType.Unrecognized,[h.VB.WearableComputer]:o.ProtoDeviceType.WearableComputer}[t]}static fromProtoGetDeviceType(t){return{[o.ProtoDeviceType.Desktop]:h.VB.Desktop,[o.ProtoDeviceType.Smartphone]:h.VB.Smartphone,[o.ProtoDeviceType.Tablet]:h.VB.Tablet,[o.ProtoDeviceType.GameConsole]:h.VB.GameConsole,[o.ProtoDeviceType.PDA]:h.VB.PDA,[o.ProtoDeviceType.SmartTV]:h.VB.SmartTV,[o.ProtoDeviceType.Unrecognized]:h.VB.Unrecognized,[o.ProtoDeviceType.WearableComputer]:h.VB.WearableComputer}[t]}static getProtoAdBlockerDetectionType(t){return{[h.ev.Banner]:o.ProtoAdBlockDetectionTypeEnum.Banner,[h.ev.Network]:o.ProtoAdBlockDetectionTypeEnum.Network}[t]}static fromProtoAdBlockerDetectionType(t){return{[o.ProtoAdBlockDetectionTypeEnum.Banner]:h.ev.Banner,[o.ProtoAdBlockDetectionTypeEnum.Network]:h.ev.Network}[t]}static getProtoAdBreakType(t){return{[h.xX.None]:o.ProtoAdBreakTypeEnum.None,[h.xX.PreRoll]:o.ProtoAdBreakTypeEnum.PreRoll,[h.xX.MidRoll]:o.ProtoAdBreakTypeEnum.MidRoll,[h.xX.PostRoll]:o.ProtoAdBreakTypeEnum.PostRoll}[t]||o.ProtoAdBreakTypeEnum.None}static fromProtoAdBreakType(t){return{[o.ProtoAdBreakTypeEnum.None]:h.xX.None,[o.ProtoAdBreakTypeEnum.PreRoll]:h.xX.PreRoll,[o.ProtoAdBreakTypeEnum.MidRoll]:h.xX.MidRoll,[o.ProtoAdBreakTypeEnum.PostRoll]:h.xX.PostRoll}[t]||h.xX.None}static getProtoAdClickType(t){return{[h.VE.AdClick]:o.ProtoAdClickTypeEnum.AdClick,[h.VE.AdClickThrough]:o.ProtoAdClickTypeEnum.AdClickThrough,[h.VE.AdSkipClick]:o.ProtoAdClickTypeEnum.AdSkipClick,[h.VE.AdUserClose]:o.ProtoAdClickTypeEnum.AdUserClose,[h.VE.ExitFullScreenClick]:o.ProtoAdClickTypeEnum.ExitFullScreenClick,[h.VE.FullScreenClick]:o.ProtoAdClickTypeEnum.FullScreenClick,[h.VE.MuteClick]:o.ProtoAdClickTypeEnum.MuteClick,[h.VE.PauseClick]:o.ProtoAdClickTypeEnum.PauseClick,[h.VE.PlayClick]:o.ProtoAdClickTypeEnum.PlayClick,[h.VE.UnmuteClick]:o.ProtoAdClickTypeEnum.UnmuteClick,[h.VE.VolumeClick]:o.ProtoAdClickTypeEnum.VolumeClick,[h.VE.FloatingCloseClick]:o.ProtoAdClickTypeEnum.FloatingCloseClick,[h.VE.EmbeddedCloseClick]:o.ProtoAdClickTypeEnum.EmbeddedCloseClick}[t]}static fromProtoAdClickType(t){return{[o.ProtoAdClickTypeEnum.AdClick]:h.VE.AdClick,[o.ProtoAdClickTypeEnum.AdClickThrough]:h.VE.AdClickThrough,[o.ProtoAdClickTypeEnum.AdSkipClick]:h.VE.AdSkipClick,[o.ProtoAdClickTypeEnum.AdUserClose]:h.VE.AdUserClose,[o.ProtoAdClickTypeEnum.ExitFullScreenClick]:h.VE.ExitFullScreenClick,[o.ProtoAdClickTypeEnum.FullScreenClick]:h.VE.FullScreenClick,[o.ProtoAdClickTypeEnum.MuteClick]:h.VE.MuteClick,[o.ProtoAdClickTypeEnum.PauseClick]:h.VE.PauseClick,[o.ProtoAdClickTypeEnum.PlayClick]:h.VE.PlayClick,[o.ProtoAdClickTypeEnum.UnmuteClick]:h.VE.UnmuteClick,[o.ProtoAdClickTypeEnum.VolumeClick]:h.VE.VolumeClick,[o.ProtoAdClickTypeEnum.FloatingCloseClick]:h.VE.FloatingCloseClick,[o.ProtoAdClickTypeEnum.EmbeddedCloseClick]:h.VE.EmbeddedCloseClick}[t]}static getProtoAdSourceType(t){return{[h.Px.AOL]:o.ProtoAdsourceTypeEnum.AOL,[h.Px.CnxMedia]:o.ProtoAdsourceTypeEnum.CnxMedia,[h.Px.Ima]:o.ProtoAdsourceTypeEnum.Ima,[h.Px.Jw]:o.ProtoAdsourceTypeEnum.Jw,[h.Px.Unknown]:o.ProtoAdsourceTypeEnum.Unknown,[h.Px.VastMedia]:o.ProtoAdsourceTypeEnum.VastMedia,[h.Px.Vpaid]:o.ProtoAdsourceTypeEnum.Vpaid}[t]}static fromProtoAdSourceType(t){return{[o.ProtoAdsourceTypeEnum.AOL]:h.Px.AOL,[o.ProtoAdsourceTypeEnum.CnxMedia]:h.Px.CnxMedia,[o.ProtoAdsourceTypeEnum.Ima]:h.Px.Ima,[o.ProtoAdsourceTypeEnum.Jw]:h.Px.Jw,[o.ProtoAdsourceTypeEnum.Unknown]:h.Px.Unknown,[o.ProtoAdsourceTypeEnum.VastMedia]:h.Px.VastMedia,[o.ProtoAdsourceTypeEnum.Vpaid]:h.Px.Vpaid}[t]}static getProtoAuctionLossReason(t){return{[h.AT.AdOpportunityEnd]:o.ProtoAuctionLossReasonEnum.AdOpportunityEnd,[h.AT.TargetingMismatch]:o.ProtoAuctionLossReasonEnum.TargetingMismatch,[h.AT.CompetitorPriority]:o.ProtoAuctionLossReasonEnum.CompetitorPriority}[t]}static fromProtoAuctionLossReason(t){return{[o.ProtoAuctionLossReasonEnum.AdOpportunityEnd]:h.AT.AdOpportunityEnd,[o.ProtoAuctionLossReasonEnum.TargetingMismatch]:h.AT.TargetingMismatch,[o.ProtoAuctionLossReasonEnum.CompetitorPriority]:h.AT.CompetitorPriority}[t]}static getProtoAuctionPostbidReason(t){return{[h.MF.CreativeError]:o.ProtoAuctionPostbidReasonEnum.CreativeError,[h.MF.PlayerError]:o.ProtoAuctionPostbidReasonEnum.PlayerError,[h.MF.SDKFailure]:o.ProtoAuctionPostbidReasonEnum.SDKFailure,[h.MF.TargetingMismatch]:o.ProtoAuctionPostbidReasonEnum.TargetingMismatch,[h.MF.UnsupportedMedia]:o.ProtoAuctionPostbidReasonEnum.UnsupportedMedia}[t]}static fromProtoAuctionPostbidReason(t){return{[o.ProtoAuctionPostbidReasonEnum.CreativeError]:h.MF.CreativeError,[o.ProtoAuctionPostbidReasonEnum.PlayerError]:h.MF.PlayerError,[o.ProtoAuctionPostbidReasonEnum.SDKFailure]:h.MF.SDKFailure,[o.ProtoAuctionPostbidReasonEnum.TargetingMismatch]:h.MF.TargetingMismatch,[o.ProtoAuctionPostbidReasonEnum.UnsupportedMedia]:h.MF.UnsupportedMedia}[t]}static getProtoFloorPriceBypassReason(t){return{[h.N0.BidInHand]:h.N0.BidInHand,[h.N0.FixedCpm]:h.N0.FixedCpm,[h.N0.MaxBidPrice]:h.N0.MaxBidPrice,[h.N0.MinCpm]:h.N0.MinCpm,[h.N0.NoPredictionFound]:h.N0.NoPredictionFound,[h.N0.StaticFactorUsed]:h.N0.StaticFactorUsed,[h.N0.VideoOrBannerMin]:h.N0.VideoOrBannerMin}[t]}static fromProtoFloorPriceBypassReason(t){return{[h.N0.BidInHand]:h.N0.BidInHand,[h.N0.FixedCpm]:h.N0.FixedCpm,[h.N0.MaxBidPrice]:h.N0.MaxBidPrice,[h.N0.MinCpm]:h.N0.MinCpm,[h.N0.NoPredictionFound]:h.N0.NoPredictionFound,[h.N0.StaticFactorUsed]:h.N0.StaticFactorUsed,[h.N0.VideoOrBannerMin]:h.N0.VideoOrBannerMin}[t]}static getProtoGDPRConsentMode(t){return{[h.q1.Unknown]:o.ProtoGdprConsentModeEnum.Unknown,[h.q1.NoCmp]:o.ProtoGdprConsentModeEnum.NoCmp,[h.q1.NoConsent]:o.ProtoGdprConsentModeEnum.NoConsent,[h.q1.NotAllDemandConsent]:o.ProtoGdprConsentModeEnum.NotAllDemandConsent,[h.q1.NoConnatixConsent]:o.ProtoGdprConsentModeEnum.NoConnatixConsent,[h.q1.AllGood]:o.ProtoGdprConsentModeEnum.AllGood}[t]}static fromProtoGDPRConsentMode(t){return{[o.ProtoGdprConsentModeEnum.Unknown]:h.q1.Unknown,[o.ProtoGdprConsentModeEnum.NoCmp]:h.q1.NoCmp,[o.ProtoGdprConsentModeEnum.NoConsent]:h.q1.NoConsent,[o.ProtoGdprConsentModeEnum.NotAllDemandConsent]:h.q1.NotAllDemandConsent,[o.ProtoGdprConsentModeEnum.NoConnatixConsent]:h.q1.NoConnatixConsent,[o.ProtoGdprConsentModeEnum.AllGood]:h.q1.AllGood}[t]}static getProtoHeavyAdType(t){return{[h.Yc.Global]:o.ProtoHeavyAdBlockTypeEnum.Global,[h.Yc.OverlayIframe]:o.ProtoHeavyAdBlockTypeEnum.OverlayIframe,[h.Yc.Script]:o.ProtoHeavyAdBlockTypeEnum.Script,[h.Yc.VPAIDIframe]:o.ProtoHeavyAdBlockTypeEnum.VpaidIframe}[t]}static fromProtoHeavyAdType(t){return{[o.ProtoHeavyAdBlockTypeEnum.Global]:h.Yc.Global,[o.ProtoHeavyAdBlockTypeEnum.OverlayIframe]:h.Yc.OverlayIframe,[o.ProtoHeavyAdBlockTypeEnum.Script]:h.Yc.Script,[o.ProtoHeavyAdBlockTypeEnum.VpaidIframe]:h.Yc.VPAIDIframe}[t]}static getProtoInternalAuctionDemandType(t){return{[h.AM.None]:o.ProtoDemandTypeEnum.None,[h.AM.PMP]:o.ProtoDemandTypeEnum.PMP,[h.AM.OpenMarket]:o.ProtoDemandTypeEnum.OpenMarket,[h.AM.SelfServed]:o.ProtoDemandTypeEnum.SelfServed}[t]}static fromProtoInternalAuctionDemandType(t){return{[o.ProtoDemandTypeEnum.None]:h.AM.None,[o.ProtoDemandTypeEnum.PMP]:h.AM.PMP,[o.ProtoDemandTypeEnum.OpenMarket]:h.AM.OpenMarket,[o.ProtoDemandTypeEnum.SelfServed]:h.AM.SelfServed}[t]}static getProtoLineItemAbTest(t){return{[h.KY.CaseA]:o.ProtoLineItemAbTestCase.CaseA,[h.KY.CaseB]:o.ProtoLineItemAbTestCase.CaseB}[t]}static fromProtoLineItemAbTest(t){return{[o.ProtoLineItemAbTestCase.CaseA]:h.KY.CaseA,[o.ProtoLineItemAbTestCase.CaseB]:h.KY.CaseB}[t]}static getProtoMediaClickType(t){return{[h.$u.Click]:o.ProtoMediaClickTypeEnum.Click,[h.$u.CloseClick]:o.ProtoMediaClickTypeEnum.CloseClick,[h.$u.EmbedCloseClick]:o.ProtoMediaClickTypeEnum.EmbedCloseClick,[h.$u.FloatingCloseClick]:o.ProtoMediaClickTypeEnum.FloatingCloseClick,[h.$u.FullScreenClick]:o.ProtoMediaClickTypeEnum.FullScreenClick,[h.$u.ExitFullScreenClick]:o.ProtoMediaClickTypeEnum.ExitFullScreenClick,[h.$u.GalleryClick]:o.ProtoMediaClickTypeEnum.GalleryClick,[h.$u.MuteClick]:o.ProtoMediaClickTypeEnum.MuteClick,[h.$u.NextClick]:o.ProtoMediaClickTypeEnum.NextClick,[h.$u.PauseClick]:o.ProtoMediaClickTypeEnum.PauseClick,[h.$u.PlayClick]:o.ProtoMediaClickTypeEnum.PlayClick,[h.$u.PreviousClick]:o.ProtoMediaClickTypeEnum.PreviousClick,[h.$u.SubtitleClick]:o.ProtoMediaClickTypeEnum.SubtitleClick,[h.$u.UnmuteClick]:o.ProtoMediaClickTypeEnum.UnmuteClick,[h.$u.UrlClick]:o.ProtoMediaClickTypeEnum.UrlClick,[h.$u.VolumeClick]:o.ProtoMediaClickTypeEnum.VolumeClick,[h.$u.NextButtonClick]:o.ProtoMediaClickTypeEnum.NextButtonClick,[h.$u.StayButtonClick]:o.ProtoMediaClickTypeEnum.StayButtonClick,[h.$u.CtaButtonClick]:o.ProtoMediaClickTypeEnum.CtaButtonClick}[t]}static fromProtoGetMediaClickType(t){return{[o.ProtoMediaClickTypeEnum.Click]:h.$u.Click,[o.ProtoMediaClickTypeEnum.CloseClick]:h.$u.CloseClick,[o.ProtoMediaClickTypeEnum.EmbedCloseClick]:h.$u.EmbedCloseClick,[o.ProtoMediaClickTypeEnum.FloatingCloseClick]:h.$u.FloatingCloseClick,[o.ProtoMediaClickTypeEnum.FullScreenClick]:h.$u.FullScreenClick,[o.ProtoMediaClickTypeEnum.ExitFullScreenClick]:h.$u.ExitFullScreenClick,[o.ProtoMediaClickTypeEnum.GalleryClick]:h.$u.GalleryClick,[o.ProtoMediaClickTypeEnum.MuteClick]:h.$u.MuteClick,[o.ProtoMediaClickTypeEnum.NextClick]:h.$u.NextClick,[o.ProtoMediaClickTypeEnum.PauseClick]:h.$u.PauseClick,[o.ProtoMediaClickTypeEnum.PlayClick]:h.$u.PlayClick,[o.ProtoMediaClickTypeEnum.PreviousClick]:h.$u.PreviousClick,[o.ProtoMediaClickTypeEnum.SubtitleClick]:h.$u.SubtitleClick,[o.ProtoMediaClickTypeEnum.UnmuteClick]:h.$u.UnmuteClick,[o.ProtoMediaClickTypeEnum.UrlClick]:h.$u.UrlClick,[o.ProtoMediaClickTypeEnum.VolumeClick]:h.$u.VolumeClick,[o.ProtoMediaClickTypeEnum.NextButtonClick]:h.$u.NextButtonClick,[o.ProtoMediaClickTypeEnum.StayButtonClick]:h.$u.StayButtonClick,[o.ProtoMediaClickTypeEnum.CtaButtonClick]:h.$u.CtaButtonClick}[t]}static getProtoMediaType(t){return{[h.L5.Image]:o.ProtoMediaTypeEnum.Image,[h.L5.Video]:o.ProtoMediaTypeEnum.Video}[t]}static fromProtoGetMediaType(t){return{[o.ProtoMediaTypeEnum.Image]:h.L5.Image,[o.ProtoMediaTypeEnum.Video]:h.L5.Video}[t]}static getProtoPrebidReason(t){return{[h.lF.RequestException]:o.ConnatixNoBidReasonEnum.RequestException,[h.lF.Timeout]:o.ConnatixNoBidReasonEnum.Timeout,[h.lF.EmptyResponse]:o.ConnatixNoBidReasonEnum.EmptyResponse,[h.lF.InvalidResponse]:o.ConnatixNoBidReasonEnum.InvalidResponse,[h.lF.NoBid]:o.ConnatixNoBidReasonEnum.NoBid,[h.lF.BidBelowFloor]:o.ConnatixNoBidReasonEnum.BidBelowFloor,[h.lF.DealIdMismatch]:o.ConnatixNoBidReasonEnum.DealIdMismatch,[h.lF.CsInvalidResponse]:o.ConnatixNoBidReasonEnum.CsInvalidResponse,[h.lF.CsRequestException]:o.ConnatixNoBidReasonEnum.CsRequestException,[h.lF.CsEmptyResponse]:o.ConnatixNoBidReasonEnum.CsEmptyResponse,[h.lF.NoLibInPage]:o.ConnatixNoBidReasonEnum.NoLibInPage,[h.lF.BidIsNotTargetingAllowedEver]:o.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver,[h.lF.VastVersionNotSupported]:o.ConnatixNoBidReasonEnum.VastVersionNotSupported,[h.lF.VastContainsBannedUrl]:o.ConnatixNoBidReasonEnum.VastHasBannedUrls}[t]}static fromProtoPrebidReason(t){return{[o.ConnatixNoBidReasonEnum.RequestException]:h.lF.RequestException,[o.ConnatixNoBidReasonEnum.Timeout]:h.lF.Timeout,[o.ConnatixNoBidReasonEnum.EmptyResponse]:h.lF.EmptyResponse,[o.ConnatixNoBidReasonEnum.InvalidResponse]:h.lF.InvalidResponse,[o.ConnatixNoBidReasonEnum.NoBid]:h.lF.NoBid,[o.ConnatixNoBidReasonEnum.BidBelowFloor]:h.lF.BidBelowFloor,[o.ConnatixNoBidReasonEnum.DealIdMismatch]:h.lF.DealIdMismatch,[o.ConnatixNoBidReasonEnum.CsInvalidResponse]:h.lF.CsInvalidResponse,[o.ConnatixNoBidReasonEnum.CsRequestException]:h.lF.CsRequestException,[o.ConnatixNoBidReasonEnum.CsEmptyResponse]:h.lF.CsEmptyResponse,[o.ConnatixNoBidReasonEnum.NoLibInPage]:h.lF.NoLibInPage,[o.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver]:h.lF.BidIsNotTargetingAllowedEver,[o.ConnatixNoBidReasonEnum.VastVersionNotSupported]:h.lF.VastVersionNotSupported,[o.ConnatixNoBidReasonEnum.VastHasBannedUrls]:h.lF.VastContainsBannedUrl}[t]}static getProtoPrebidPartnerReason(t){return{[h.XD.Unknown]:o.PartnerNoBidReasonEnum.Unknown,[h.XD.TechnicalError]:o.PartnerNoBidReasonEnum.TechnicalError,[h.XD.InvalidRequest]:o.PartnerNoBidReasonEnum.InvalidRequest,[h.XD.KnownWebSpider]:o.PartnerNoBidReasonEnum.KnownWebSpider,[h.XD.SuspectedNonHumanTraffic]:o.PartnerNoBidReasonEnum.SuspectedNonHumanTraffic,[h.XD.CloudIP]:o.PartnerNoBidReasonEnum.CloudIP,[h.XD.UnsupportedDevice]:o.PartnerNoBidReasonEnum.UnsupportedDevice,[h.XD.BlockedPublisher]:o.PartnerNoBidReasonEnum.BlockedPublisher,[h.XD.UnmatchedUser]:o.PartnerNoBidReasonEnum.UnmatchedUser,[h.XD.DailyDomainCapMet]:o.PartnerNoBidReasonEnum.DailyDomainCapMet,[h.XD.DailyReaderCapMet]:o.PartnerNoBidReasonEnum.DailyReaderCapMet}[t]}static fromProtoPrebidPartnerReason(t){return{[o.PartnerNoBidReasonEnum.Unknown]:h.XD.Unknown,[o.PartnerNoBidReasonEnum.TechnicalError]:h.XD.TechnicalError,[o.PartnerNoBidReasonEnum.InvalidRequest]:h.XD.InvalidRequest,[o.PartnerNoBidReasonEnum.KnownWebSpider]:h.XD.KnownWebSpider,[o.PartnerNoBidReasonEnum.SuspectedNonHumanTraffic]:h.XD.SuspectedNonHumanTraffic,[o.PartnerNoBidReasonEnum.CloudIP]:h.XD.CloudIP,[o.PartnerNoBidReasonEnum.UnsupportedDevice]:h.XD.UnsupportedDevice,[o.PartnerNoBidReasonEnum.BlockedPublisher]:h.XD.BlockedPublisher,[o.PartnerNoBidReasonEnum.UnmatchedUser]:h.XD.UnmatchedUser,[o.PartnerNoBidReasonEnum.DailyDomainCapMet]:h.XD.DailyDomainCapMet,[o.PartnerNoBidReasonEnum.DailyReaderCapMet]:h.XD.DailyReaderCapMet}[t]}static getProtoQuartile(t){return{[h.yU.Start]:o.ProtoQuartilesEnum.Start,[h.yU.First]:o.ProtoQuartilesEnum.First,[h.yU.Second]:o.ProtoQuartilesEnum.Second,[h.yU.Third]:o.ProtoQuartilesEnum.Third,[h.yU.Fourth]:o.ProtoQuartilesEnum.Fourth}[t]}static fromProtoGetQuartile(t){return{[o.ProtoQuartilesEnum.Start]:h.yU.Start,[o.ProtoQuartilesEnum.First]:h.yU.First,[o.ProtoQuartilesEnum.Second]:h.yU.Second,[o.ProtoQuartilesEnum.Third]:h.yU.Third,[o.ProtoQuartilesEnum.Fourth]:h.yU.Fourth}[t]}static getProtoLiveRamp(t){return{[h.fR.None]:o.ProtoLiveRampEnum.None,[h.fR.ATS]:o.ProtoLiveRampEnum.ATS,[h.fR.NonATS]:o.ProtoLiveRampEnum.NonATS}[t]}static fromProtoLiveRamp(t){return{[o.ProtoLiveRampEnum.None]:h.fR.None,[o.ProtoLiveRampEnum.ATS]:h.fR.ATS,[o.ProtoLiveRampEnum.NonATS]:h.fR.NonATS}[t]}static getProtoIdentityProviderGroup(t){return{[h.dz.None]:o.ProtoIdentityProviderGroupEnum.None,[h.dz.A]:o.ProtoIdentityProviderGroupEnum.A,[h.dz.B]:o.ProtoIdentityProviderGroupEnum.B,[h.dz.C]:o.ProtoIdentityProviderGroupEnum.C}[t]}static fromProtoIdentityProviderGroup(t){return{[o.ProtoIdentityProviderGroupEnum.None]:h.dz.None,[o.ProtoIdentityProviderGroupEnum.A]:h.dz.A,[o.ProtoIdentityProviderGroupEnum.B]:h.dz.B,[o.ProtoIdentityProviderGroupEnum.C]:h.dz.C}[t]}static getProtoPanoramaIdType(t){return{[r.YE.Unknown]:o.ProtoPanoramaIdTypeEnum.Unknown,[r.YE.PanoDevice]:o.ProtoPanoramaIdTypeEnum.PanoDevice,[r.YE.PanoIndiv]:o.ProtoPanoramaIdTypeEnum.PanoIndiv}[t]}static getProtoIntegrationType(t){return{[a.Q.Unknown]:o.ProtoIntegrationTypeEnum.Unknown,[a.Q.InAppSdk]:o.ProtoIntegrationTypeEnum.InAppSdk,[a.Q.InAppReactNative]:o.ProtoIntegrationTypeEnum.InAppReactNative,[a.Q.InAppFlutter]:o.ProtoIntegrationTypeEnum.InAppFlutter,[a.Q.InAppGam]:o.ProtoIntegrationTypeEnum.InAppGam,[a.Q.InAppWebview]:o.ProtoIntegrationTypeEnum.InAppWebview,[a.Q.WebAmp]:o.ProtoIntegrationTypeEnum.WebAmp,[a.Q.WebGamSafeIframe]:o.ProtoIntegrationTypeEnum.WebGamSafeIframe,[a.Q.WebGamFreindlyIframe]:o.ProtoIntegrationTypeEnum.WebGamFriendlyIframe,[a.Q.Web]:o.ProtoIntegrationTypeEnum.Web}[t]}}class d{static getProtoFloorPriceInformation(t){const{floorPrices:e,floorPriceIndexUsed:i,floorPriceFactorBypassReason:s,adxPredictedFloorPrice:n}=t;return{adxPredictedFloorPrice:n,floorPrices:e,floorPriceIndexUsed:i,floorPriceBypassReason:s?c.getProtoFloorPriceBypassReason(s):void 0}}static fromProtoFloorPriceInformation(t){const{floorPrices:e,floorPriceIndexUsed:i,floorPriceBypassReason:s,adxPredictedFloorPrice:n}=t;return{adxPredictedFloorPrice:n,floorPrices:e,floorPriceIndexUsed:i,floorPriceFactorBypassReason:s?c.fromProtoFloorPriceBypassReason(s):void 0}}}class l{static getProtoIdentityProviderData(t){const{group:e,identityProviderEidsList:i,hasIIQLookup:s,identityPartnerEnum:n,eidsDataList:r,identityProviderDataList:o}=t;return{group:e?c.getProtoIdentityProviderGroup(e):void 0,identityProviderEidsList:i,hasIIQLookup:s,identityPartnerEnum:n,eidsDataList:r,identityProviderDataList:o}}static fromProtoIdentityProviderData(t){const{group:e,identityProviderEidsList:i,hasIIQLookup:s,identityPartnerEnum:n,eidsDataList:r,identityProviderDataList:o}=t;return{group:e?c.fromProtoIdentityProviderGroup(e):void 0,identityProviderEidsList:i,hasIIQLookup:s,identityPartnerEnum:n,eidsDataList:r,identityProviderDataList:o}}}class u{static getProtoInternalAuction(t){const{winnerDemandType:e,firstLoser:i,firstOpenMarketLoser:s}=t;return{winnerDemandType:c.getProtoInternalAuctionDemandType(e),firstLoser:i?u.getProtoInternalAuctionBid(i):void 0,firstOpenMarketLoser:s?u.getProtoInternalAuctionBid(s):void 0}}static fromProtoInternalAuction(t){const{winnerDemandType:e,firstLoser:i,firstOpenMarketLoser:s}=t;return{winnerDemandType:c.fromProtoInternalAuctionDemandType(e),firstLoser:i?u.fromProtoInternalAuctionBid(i):void 0,firstOpenMarketLoser:s?u.fromProtoInternalAuctionBid(s):void 0}}static getProtoInternalAuctionBid(t){const{advertiserLineItemId:e,customClientPrice:i,encryptedPrice:s,demandType:n,adDuration:r}=t;return{demandType:c.getProtoInternalAuctionDemandType(n),advertiserLineItemId:e,customClientPrice:i,encryptedPrice:s,adDuration:r}}static fromProtoInternalAuctionBid(t){const{advertiserLineItemId:e,customClientPrice:i,encryptedPrice:s,demandType:n,adDuration:r}=t;return{demandType:c.fromProtoInternalAuctionDemandType(n),advertiserLineItemId:e,customClientPrice:i,encryptedPrice:s,adDuration:r}}}class p{static getProtoLineItemAbTest(t){return{guid:t.id,lineItemAbTestCase:c.getProtoLineItemAbTest(t.lineItemAbTestCase)}}static fromProtoLineItemAbTestFromProto(t){return{id:t.guid,lineItemAbTestCase:c.fromProtoLineItemAbTest(t.lineItemAbTestCase)}}}class f{static getProtoLotamePanorama(t){const{id:e,type:i}=t;return{id:e,type:c.getProtoPanoramaIdType(i)}}}class m{static getProtoTrackingMetadata(t){const{buildNumber:e,buildAbPart:i,buildAbId:s,customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:h,clientAb0:d,clientAb1:l,clientAb2:u,clientAb3:p,clientAb4:f,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:w,userId:P,shouldTrackAllRequests:T,isPageInFocus:_,bundleId:S,abTestId:A,implementationType:x,browser:k,geo:E,iiqEnabledAB:C,iiqGroupAB:O,eventTimestamp:L,isIdentityEnhanced:M}=t;return{geo:E?m.uF(E):void 0,browser:k?m.pF(k):void 0,implementationType:x?c.getProtoImplementationType(x):void 0,eventTimestamp:L||Date.now(),customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:h,clientAb0:d,clientAb1:l,clientAb2:u,clientAb3:p,clientAb4:f,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:w,userId:P,isPageInFocus:_,version:e,bundleId:S,bundleAbId:s,bundlePart:i,abTestId:A,shouldTrackAllRequests:T,iiqEnabledAB:C,iiqGroupAB:O,isIdentityEnhanced:M}}static fromProtoGetTrackingMetadata(t){const{bundleAbId:e,version:i,bundlePart:s,customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:h,clientAb0:d,clientAb1:l,clientAb2:u,clientAb3:p,clientAb4:f,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:w,userId:P,shouldTrackAllRequests:T,isPageInFocus:_,bundleId:S,abTestId:A,implementationType:x,browser:k,geo:E,iiqEnabledAB:C,iiqGroupAB:O,eventTimestamp:L,isIdentityEnhanced:M}=t;return{geo:E?m.fF(E):void 0,browser:k?m.mF(k):void 0,implementationType:c.fromProtoGetImplementationType(x),eventTimestamp:L,customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:h,clientAb0:d,clientAb1:l,clientAb2:u,clientAb3:p,clientAb4:f,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:w,userId:P,isPageInFocus:_,buildNumber:i,bundleId:S,buildAbId:e,buildAbPart:s,abTestId:A,shouldTrackAllRequests:T,iiqEnabledAB:C,iiqGroupAB:O,isIdentityEnhanced:M}}static pF(t){const{osCode:e,browserVersion:i,browserType:s,deviceType:n}=t;return{osCode:e,browserVersion:i,browserType:s,device:c.getProtoDeviceType(n)}}static mF(t){const{osCode:e,browserVersion:i,browserType:s,device:n}=t;return{osCode:e,browserVersion:i,browserType:s,deviceType:c.fromProtoGetDeviceType(n)}}static uF(t){const{latitude:e,longitude:i,zipCode:s,cityId:n,countryGeoId:r,ip:o,subdivisionId:a,dmaId:h}=t;return{cityId:n,countryGeoId:r,ip:o,lat:e,lon:i,subdivisionId:a,zipcode:s,dmaId:h}}static fF(t){const{lat:e,lon:i,zipcode:s,cityId:n,countryGeoId:r,ip:o,subdivisionId:a,dmaId:h}=t;return{cityId:n,countryGeoId:r,ip:o,latitude:e,longitude:i,subdivisionId:a,zipCode:s,dmaId:h}}}class g{static getProtoSentimentAnalysis(t){return{negative:t.negative,neutral:t.neutral,positive:t.positive}}static fromProtoGetSentimentAnalysis(t){return{negative:t.negative,neutral:t.neutral,positive:t.positive}}}var v=i(5650);class y{static getProtoPayload(t){const{trackingMetadata:e,hasGdprConsent:i,gdprConsentMode:s,isExplorationMode:n,mediaId:r,shouldLogEverything:o,lineItemAbTest:a,panorama:h,prebidList:d,bidList:l,postbidList:u}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),mediaGuid:r,hasGdprConsentPayload:i,gdprConsentMode:s?c.getProtoGDPRConsentMode(s):void 0,lineItemAbTestInformation:a?p.getProtoLineItemAbTest(a):void 0,prebids:d&&(0,v.BZ)(d)?d.map((t=>y.getProtoPrebid(t))):void 0,bids:l&&(0,v.BZ)(l)?l.map((t=>y.getProtoBid(t))):void 0,postBids:u&&(0,v.BZ)(u)?u.map((t=>y.getProtoPostbid(t))):void 0,panorama:h?f.getProtoLotamePanorama(h):void 0,shouldLogEverything:o,isExplorationMode:n}}static getProtoPrebid(t){const{advertiserLineItemId:e,publisherLineItemId:i,playerReason:s,partnerReason:n,requestsCount:r,isUserSynced:o,timeSpentMs:a,playerWidth:h,playerHeight:u,partnerCustomHeaders:p,prebidJsBidderName:f,requestedFloorPrice:m,floorPriceInformation:g,identityProviderTrackingData:v,hasLexiconEnvelopeBeenUsed:y,videoPlacement:b,dynamicElkFields:I}=t;return{reason:c.getProtoPrebidReason(s),partnerReason:c.getProtoPrebidPartnerReason(n),requestNumber:r,timeSpent:a,floorPriceInformation:g?d.getProtoFloorPriceInformation(g):void 0,requestedFloorPrice:m,advertiserLineItemId:e,publisherLineItemId:i,isUserSynced:o,playerWidth:h,playerHeight:u,partnerCustomHeaders:p,prebidJsBidderName:f,identityProviderData:v?l.getProtoIdentityProviderData(v):void 0,hasLexiconEnvelopeBeenUsed:y,videoPlacement:b,dynamicElkFieldsValues:I}}static getProtoBid(t){const{advertiserLineItemId:e,publisherLineItemId:i,requestsCount:s,isUserSynced:n,timeSpentMs:r,playerWidth:o,playerHeight:a,rtbCreativeId:h,rtbSeatId:c,rtbADomain:u,rtbDspId:p,cnxBidId:f,encryptedPrice:m,customClientPrice:g,prebidJsBidderName:v,requestedFloorPrice:y,floorPriceInformation:b,identityProviderTrackingData:I,hasLexiconEnvelopeBeenUsed:w,videoPlacement:P,dynamicElkFields:T}=t;return{requestNumber:s,timeSpent:r,creativeId:h,rtbAdomain:u,dspId:p,floorPriceInformation:b?d.getProtoFloorPriceInformation(b):void 0,rtbSeatId:c,cnxBidId:f,advertiserLineItemId:e,publisherLineItemId:i,isUserSynced:n,playerWidth:o,playerHeight:a,encryptedPrice:m,customClientPrice:g,prebidJsBidderName:v,requestedFloorPrice:y,identityProviderData:I?l.getProtoIdentityProviderData(I):void 0,hasLexiconEnvelopeBeenUsed:w,videoPlacement:P,dynamicElkFieldsValues:T}}static getProtoPostbid(t){const{advertiserLineItemId:e,publisherLineItemId:i,reason:r,isBidLoaded:o,requestsCount:a,adSourceType:h,vastMediaType:u,adBreakType:p,isUserSynced:f,timeSpentMs:m,winToAdLoadedTimeMs:g,bidElapsedTimeSeconds:v,playerWidth:y,playerHeight:b,adPodSlotPosition:I,auctionInformation:w,auctionReason:P,rtbCreativeId:T,rtbSeatId:_,rtbADomain:S,rtbDspId:A,cnxBidId:x,prebidJsBidderName:k,requestedFloorPrice:E,floorPriceInformation:C,liveRampType:O,discount:L,identityProviderTrackingData:M,hasLexiconEnvelopeBeenUsed:R,videoPlacement:B,assertiveYieldProbability:D,dynamicElkFields:N}=t;return{error:r,adBreakType:c.getProtoAdBreakType(p),adsourceType:c.getProtoAdSourceType(h),auctionInformation:w?s.getProtoAuctionInformation(w):void 0,auctionPostbidReason:P?c.getProtoAuctionPostbidReason(P):void 0,floorPriceInformation:C?d.getProtoFloorPriceInformation(C):void 0,discount:L?n.getProtoDiscount(L):void 0,floorPrice:E,liveRampType:O?c.getProtoLiveRamp(O):void 0,identityProviderData:M?l.getProtoIdentityProviderData(M):void 0,timeSpent:m,winToAdLoadedTime:g,requestNumber:a,creativeId:T,rtbAdomain:S,dspId:A,rtbSeatId:_,cnxBidId:x,advertiserLineItemId:e,publisherLineItemId:i,isBidLoaded:o,vastMediaType:u,isUserSynced:f,bidElapsedTimeSeconds:v,playerWidth:y,playerHeight:b,adPodSlotPosition:I,prebidJsBidderName:k,hasLexiconEnvelopeBeenUsed:R,videoPlacement:B,assertiveYieldProbability:D,dynamicElkFieldsValues:N}}}class b{static getProtoPayload(t){const{trackingMetadata:e,advertiserLineItemId:i,publisherLineItemId:s,mediaId:n,type:r,adBreakType:o,insightIndexes:a,sentimentAnalysis:h,pageInsightIndexes:d,lineItemAbTest:l,iasSegmentCodes:u}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),mediaGuid:n,type:c.getProtoAdClickType(r),adBreakType:c.getProtoAdBreakType(o),sentimentAnalysis:h?g.getProtoSentimentAnalysis(h):void 0,lineItemAbTestInformation:l?p.getProtoLineItemAbTest(l):void 0,advertiserLineItemId:i,publisherLineItemId:s,insightIndexes:a,pageInsightIndexes:d,iasSegmentCodes:u}}}class I{static getProtoPayload(t){const{trackingMetadata:e,advertiserLineItemId:i,publisherLineItemId:r,adBreakType:o,adSourceType:a,vastMediaType:h,adPodSlotPosition:v,isExplorationMode:y,mediaId:b,isUserSynced:I,timeSpentMs:w,winToAdLoadedTimeMs:P,startAdToImpressionTimeMs:T,declaredDurationSeconds:_,impressionDurationSeconds:S,encryptedPrice:A,rtbADomain:x,rtbSeatId:k,rtbCreativeId:E,rtbDspId:C,cnxBidId:O,customClientPrice:L,prebidJsBidderName:M,auctionInformation:R,playerWidth:B,playerHeight:D,hasAdSkip:N,requestsCount:F,requestedFloorPrice:$,floorPriceInformation:V,bidElapsedTimeSeconds:j,insightIndexes:U,pageInsightIndexes:q,sentimentAnalysis:H,liveRampType:J,lineItemAbTest:G,internalAuctionInformation:z,iasSegmentCodes:W,discount:Y,dynamicElkFields:X,serverBillingNoticeUrls:Q,identityProviderTrackingData:K,hasLexiconEnvelopeBeenUsed:Z,panorama:tt,videoPlacement:et,assertiveYieldResult:it,assertiveYieldProbability:st,adMediaFileWidth:nt,adMediaFileHeight:rt,initialGdprConsentMode:ot}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),adBreakType:c.getProtoAdBreakType(o),adsourceType:c.getProtoAdSourceType(a),auctionInformation:R?s.getProtoAuctionInformation(R):void 0,internalAuction:z?u.getProtoInternalAuction(z):void 0,timeSpent:w,winToAdLoadedTime:P,startAdToImpressionTime:T,declaredDuration:_,impressionDuration:S,sentimentAnalysis:H?g.getProtoSentimentAnalysis(H):void 0,lineItemAbTestInformation:G?p.getProtoLineItemAbTest(G):void 0,floorPriceInformation:V?d.getProtoFloorPriceInformation(V):void 0,discount:Y?n.getProtoDiscount(Y):void 0,mediaGuid:b,floorPrice:$,creativeId:E,rtbAdomain:x,dspId:C,requestNumber:F,liveRampType:J?c.getProtoLiveRamp(J):void 0,identityProviderData:K?l.getProtoIdentityProviderData(K):void 0,panorama:tt?f.getProtoLotamePanorama(tt):void 0,dynamicElkFieldsValues:X,cnxBidId:O,rtbSeatId:k,vastMediaType:h,advertiserLineItemId:i,publisherLineItemId:r,isExplorationMode:y,isUserSynced:I,playerWidth:B,playerHeight:D,hasAdSkip:N,bidElapsedTimeSeconds:j,adPodSlotPosition:v,encryptedPrice:A,customClientPrice:L,prebidJsBidderName:M,insightIndexes:U,pageInsightIndexes:q,iasSegmentCodes:W,serverBillingNoticeUrls:Q,hasLexiconEnvelopeBeenUsed:Z,videoPlacement:et,assertiveYieldResult:it,assertiveYieldProbability:st,adMediaFileWidth:nt,adMediaFileHeight:rt,initialGdprConsentMode:ot}}}class w{static getProtoPayload(t){const{trackingMetadata:e,advertiserLineItemId:i,publisherLineItemId:s,adBreakType:r,mediaId:o,hasSkipAd:a,rtbSeatId:h,rtbADomain:d,rtbDspId:l,insightIndexes:u,sentimentAnalysis:f,pageInsightIndexes:v,lineItemAbTest:y,iasSegmentCodes:b,dynamicElkFields:I,discount:w}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),adBreakType:c.getProtoAdBreakType(r),sentimentAnalysis:f?g.getProtoSentimentAnalysis(f):void 0,lineItemAbTestInformation:y?p.getProtoLineItemAbTest(y):void 0,discount:w?n.getProtoDiscount(w):void 0,mediaGuid:o,hasAdSkip:a,dynamicElkFieldsValues:I,rtbAdomain:d,advertiserLineItemId:i,publisherLineItemId:s,rtbSeatId:h,dspId:l,insightIndexes:u,pageInsightIndexes:v,iasSegmentCodes:b}}}class P{static getProtoPayload(t){const{trackingMetadata:e,advertiserLineItemId:i,publisherLineItemId:s,mediaId:n,type:r,rtbSeatId:o,dspId:a,rtbADomain:h,insightIndexes:d,hasSkipAd:l,adBreakType:u,sentimentAnalysis:f,pageInsightIndexes:v,lineItemAbTest:y,iasSegmentCodes:b}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),quartile:c.getProtoQuartile(r),adBreakType:c.getProtoAdBreakType(u),lineItemAbTestInformation:y?p.getProtoLineItemAbTest(y):void 0,sentimentAnalysis:f?g.getProtoSentimentAnalysis(f):void 0,mediaGuid:n,hasAdSkip:l,rtbAdomain:h,rtbSeatId:o,dspId:a,advertiserLineItemId:i,publisherLineItemId:s,insightIndexes:d,pageInsightIndexes:v,iasSegmentCodes:b}}}class T{static getProtoPayload(t){const{cnxBidId:e,auctionLossReason:i,auctionInformation:n}=t;return{cnxBidId:e,auctionInformation:n?s.getProtoAuctionInformation(n):void 0,auctionLossReason:c.getProtoAuctionLossReason(i)}}static fromProtoAuctionInformation(t){const{cnxBidId:e,auctionLossReason:i,auctionInformation:n}=t;return{cnxBidId:e,auctionInformation:n?s.fromProtoAuctionInformation(n):void 0,auctionLossReason:c.fromProtoAuctionLossReason(i)}}}class _{static getProtoPayload(t){const{dynamicElkFields:e,trackingMetadata:i,advertiserLineItemId:s,type:n}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(i),heavyAdBlockTypeEnum:c.getProtoHeavyAdType(n),advertiserLineItemId:s,dynamicElkFieldsValues:e}}}class S{static getProtoPayload(t){const{trackingMetadata:e,type:i,mediaId:s,clickUrl:n,insightIndexes:r,sentimentAnalysis:o,slideTitle:a,slideNumber:h,slideMediaType:d}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),type:c.getProtoMediaClickType(i),mediaGuid:s,slideMediaType:d?c.getProtoMediaType(d):void 0,sentimentAnalysis:o?g.getProtoSentimentAnalysis(o):void 0,clickUrl:n,slideTitle:a,slideNumber:h,insightIndexes:r}}}class A{static getProtoPayload(t){const{trackingMetadata:e,mediaId:i,quartile:s,insightIndexes:n,sentimentAnalysis:r}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),quartile:c.getProtoQuartile(s),mediaGuid:i,sentimentAnalysis:r?g.getProtoSentimentAnalysis(r):void 0,insightIndexes:n}}}class x{static getProtoPayload(t){const{trackingMetadata:e,mediaId:i,insightIndexes:s}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),mediaGuid:i,insightIndexes:s}}}class k{static getProtoPayload(t){const{dynamicElkFields:e,trackingMetadata:i,adBreakType:s,playerWidth:n,pageInsightIndexes:r}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(i),adBreak:c.getProtoAdBreakType(s),playerWidth:n,pageInsightIndexes:r,dynamicElkFieldsValues:e}}}class E{static getProtoPayload(t){const{dynamicElkFields:e,trackingMetadata:i,pageInsightIndexes:s,customClientEncryptedPrice:n,initialGdprConsentMode:r}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(i),pageInsightIndexes:s,customClientEncryptedPrice:n,dynamicElkFieldsValues:e,initialGdprConsentMode:r}}}class C{static getProtoPayload(t){const{trackingMetadata:e,adBlockerDetectionType:i,dynamicElkFields:s}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),adBlockDetectionType:c.getProtoAdBlockerDetectionType(i),dynamicElkFieldsValues:s}}}class O{static getProtoPayload(t){const{dynamicElkFields:e,trackingMetadata:i,pageInsightIndexes:s,initialGdprConsentMode:n}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(i),pageInsightIndexes:s,dynamicElkFieldsValues:e,initialGdprConsentMode:n}}}class L{static getProtoPayload(t){const{dynamicElkFields:e,trackingMetadata:i,isAdBlockerUsed:s,bundleName:n,playerWidth:r,playerHeight:o,pageInsightIndexes:a,integrationType:h,cookieDeprecationLabel:d}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(i),hasAdBlocker:s,integrationType:c.getProtoIntegrationType(h),googleDeprecationLabel:d,bundleName:n,playerHeight:o,playerWidth:r,pageInsightIndexes:a,dynamicElkFieldsValues:e}}}class M{static getProtoPayload(t){const{trackingMetadata:e,sessionTimePassedSinceLastTracking:i,secondsPlayedInViewSinceLastTracking:s,secondsPlayedSinceLastTracking:n,stayNextButtonsAppearances:r,mediaId:o,secondsMediaPlayedSinceLastTracking:a,secondsMediaPlayedInViewSinceLastTracking:h,pageInsightIndexes:c}=t;return{trackingRequestMeta:m.getProtoTrackingMetadata(e),sessionTime:i,timePlayed:n,timePlayedInView:s,mediaTimePlayed:a,mediaTimePlayedInView:h,mediaId:o,stayNextButtonsAppearances:r,pageInsightIndexes:c}}}class R{static getTrackingResponseFromProto(t){const{errorMessage:e,adServerLineItemName:i,impressionRevenue:s,isViewabilityRestricted:n,platformCappedLineItemIdList:r}=t;return{errorMessage:e,adServerLineItemName:i,impressionRevenue:s,isViewabilityRestricted:n,platformCappedLineItemIdList:r}}}},6286:(t,e,i)=>{"use strict";i.d(e,{j:()=>h});var s=i(6716),n=i(8659),r=i(5650),o=i(4798),a=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let h=class{constructor(){this.DI=new s.x,this.NI=new s.x,this.gF=new s.x}get onLineItemPlatformCapped(){return this.DI.asObservable()}get onImpressionRevenue(){return this.NI.asObservable()}get onLineItemViewabilityChange(){return this.gF.asObservable()}onResponseReceived(t,e){const{platformCappedLineItemIdList:i,adServerLineItemName:s,impressionRevenue:n,isViewabilityRestricted:r}=t;this.vF(i),this.yF(n,s),this.bF(e,r)}vF(t){(0,o.$K)(t)&&(0,r.BZ)(t)&&this.DI.next(t)}yF(t,e){(0,o.r)(t)&&(0,o.QM)(e)&&this.NI.next({impressionRevenue:t,adServerLineItemName:e})}bF(t,e=void 0){(0,o.QM)(t)&&(0,o.$K)(e)&&this.gF.next([t,e])}};h=a([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],h)},9107:(t,e,i)=>{"use strict";var s,n,r,o,a,h,c,d,l,u,p,f,m,g,v,y,b,I,w,P,T;i.d(e,{ev:()=>s,xX:()=>n,VE:()=>r,Px:()=>o,AT:()=>a,MF:()=>h,VB:()=>d,N0:()=>l,q1:()=>u,Yc:()=>p,dz:()=>f,Vx:()=>m,AM:()=>g,KY:()=>v,fR:()=>y,$u:()=>b,L5:()=>I,XD:()=>w,lF:()=>P,yU:()=>T}),function(t){t[t.Banner=0]="Banner",t[t.Network=1]="Network"}(s||(s={})),function(t){t[t.None=0]="None",t[t.PreRoll=1]="PreRoll",t[t.MidRoll=2]="MidRoll",t[t.PostRoll=3]="PostRoll"}(n||(n={})),function(t){t[t.AdClick=1]="AdClick",t[t.AdClickThrough=2]="AdClickThrough",t[t.AdSkipClick=3]="AdSkipClick",t[t.VolumeClick=4]="VolumeClick",t[t.PauseClick=5]="PauseClick",t[t.PlayClick=6]="PlayClick",t[t.FullScreenClick=7]="FullScreenClick",t[t.MuteClick=8]="MuteClick",t[t.UnmuteClick=9]="UnmuteClick",t[t.ExitFullScreenClick=10]="ExitFullScreenClick",t[t.AdUserClose=11]="AdUserClose",t[t.FloatingCloseClick=12]="FloatingCloseClick",t[t.EmbeddedCloseClick=13]="EmbeddedCloseClick"}(r||(r={})),function(t){t[t.Unknown=0]="Unknown",t[t.Vpaid=1]="Vpaid",t[t.VastMedia=2]="VastMedia",t[t.CnxMedia=3]="CnxMedia",t[t.Jw=4]="Jw",t[t.Ima=5]="Ima",t[t.AOL=6]="AOL"}(o||(o={})),function(t){t[t.TargetingMismatch=0]="TargetingMismatch",t[t.CompetitorPriority=1]="CompetitorPriority",t[t.AdOpportunityEnd=2]="AdOpportunityEnd"}(a||(a={})),function(t){t[t.CreativeError=0]="CreativeError",t[t.SDKFailure=1]="SDKFailure",t[t.UnsupportedMedia=2]="UnsupportedMedia",t[t.TargetingMismatch=3]="TargetingMismatch",t[t.PlayerError=4]="PlayerError"}(h||(h={})),function(t){t[t.EmbedCloseClick=0]="EmbedCloseClick",t[t.FloatingCloseClick=1]="FloatingCloseClick"}(c||(c={})),function(t){t[t.Desktop=0]="Desktop",t[t.Smartphone=1]="Smartphone",t[t.Tablet=2]="Tablet",t[t.GameConsole=3]="GameConsole",t[t.SmartTV=4]="SmartTV",t[t.WearableComputer=5]="WearableComputer",t[t.PDA=6]="PDA",t[t.Unrecognized=7]="Unrecognized"}(d||(d={})),function(t){t[t.MinCpm=0]="MinCpm",t[t.FixedCpm=1]="FixedCpm",t[t.MaxBidPrice=2]="MaxBidPrice",t[t.VideoOrBannerMin=3]="VideoOrBannerMin",t[t.BidInHand=6]="BidInHand",t[t.NoPredictionFound=7]="NoPredictionFound",t[t.StaticFactorUsed=8]="StaticFactorUsed"}(l||(l={})),function(t){t[t.Unknown=0]="Unknown",t[t.NoCmp=1]="NoCmp",t[t.NoConsent=2]="NoConsent",t[t.NoConnatixConsent=3]="NoConnatixConsent",t[t.NotAllDemandConsent=4]="NotAllDemandConsent",t[t.AllGood=5]="AllGood"}(u||(u={})),function(t){t[t.Global=0]="Global",t[t.Script=1]="Script",t[t.VPAIDIframe=2]="VPAIDIframe",t[t.OverlayIframe=3]="OverlayIframe"}(p||(p={})),function(t){t[t.None=0]="None",t[t.A=1]="A",t[t.B=2]="B",t[t.C=3]="C"}(f||(f={})),function(t){t[t.Web=0]="Web",t[t.Amp=1]="Amp",t[t.Standalone=5]="Standalone"}(m||(m={})),function(t){t[t.None=0]="None",t[t.PMP=1]="PMP",t[t.OpenMarket=2]="OpenMarket",t[t.SelfServed=3]="SelfServed"}(g||(g={})),function(t){t[t.CaseA=0]="CaseA",t[t.CaseB=1]="CaseB"}(v||(v={})),function(t){t[t.None=0]="None",t[t.ATS=1]="ATS",t[t.NonATS=2]="NonATS"}(y||(y={})),function(t){t[t.Click=0]="Click",t[t.UrlClick=1]="UrlClick",t[t.VolumeClick=2]="VolumeClick",t[t.PlayClick=3]="PlayClick",t[t.PauseClick=4]="PauseClick",t[t.NextClick=5]="NextClick",t[t.PreviousClick=6]="PreviousClick",t[t.MuteClick=7]="MuteClick",t[t.UnmuteClick=8]="UnmuteClick",t[t.CloseClick=9]="CloseClick",t[t.GalleryClick=11]="GalleryClick",t[t.SubtitleClick=12]="SubtitleClick",t[t.FullScreenClick=13]="FullScreenClick",t[t.ExitFullScreenClick=14]="ExitFullScreenClick",t[t.NextButtonClick=15]="NextButtonClick",t[t.StayButtonClick=16]="StayButtonClick",t[t.CtaButtonClick=17]="CtaButtonClick",t[t.EmbedCloseClick=18]="EmbedCloseClick",t[t.FloatingCloseClick=19]="FloatingCloseClick"}(b||(b={})),function(t){t[t.Image=0]="Image",t[t.Video=1]="Video"}(I||(I={})),function(t){t[t.Unknown=0]="Unknown",t[t.TechnicalError=1]="TechnicalError",t[t.InvalidRequest=2]="InvalidRequest",t[t.KnownWebSpider=3]="KnownWebSpider",t[t.SuspectedNonHumanTraffic=4]="SuspectedNonHumanTraffic",t[t.CloudIP=5]="CloudIP",t[t.UnsupportedDevice=6]="UnsupportedDevice",t[t.BlockedPublisher=7]="BlockedPublisher",t[t.UnmatchedUser=8]="UnmatchedUser",t[t.DailyReaderCapMet=9]="DailyReaderCapMet",t[t.DailyDomainCapMet=10]="DailyDomainCapMet"}(w||(w={})),function(t){t[t.RequestException=0]="RequestException",t[t.Timeout=1]="Timeout",t[t.EmptyResponse=2]="EmptyResponse",t[t.InvalidResponse=3]="InvalidResponse",t[t.NoBid=4]="NoBid",t[t.BidBelowFloor=5]="BidBelowFloor",t[t.DealIdMismatch=6]="DealIdMismatch",t[t.CsInvalidResponse=7]="CsInvalidResponse",t[t.CsRequestException=8]="CsRequestException",t[t.CsEmptyResponse=9]="CsEmptyResponse",t[t.NoLibInPage=11]="NoLibInPage",t[t.BidIsNotTargetingAllowedEver=12]="BidIsNotTargetingAllowedEver",t[t.VastVersionNotSupported=13]="VastVersionNotSupported",t[t.VastContainsBannedUrl=18]="VastContainsBannedUrl"}(P||(P={})),function(t){t[t.Start=0]="Start",t[t.First=1]="First",t[t.Second=2]="Second",t[t.Third=3]="Third",t[t.Fourth=4]="Fourth"}(T||(T={}))},1968:(t,e,i)=>{"use strict";i.d(e,{tt:()=>c});var s=i(6716),n=i(7298),r=i(9357),o=i(8395),a=i(9906),h=i(4798);class c{constructor(){this.IF=1e3,this.PF=5,this._F="cnx_uid2_id",this.TF=new s.x,this.VD=a.h.getGlobalContainer().resolve(n.n),this.di=a.h.getGlobalContainer().resolve(o.f),this.VD.isLocalStorageEnabled&&(this.SF(),(0,h.QM)(this.AF)||this.kF())}get uid2Token(){return this.AF}get onUserIdReceived(){return this.TF.asObservable()}destroy(){this.EF()}kF(){this.fk=this.di.setInterval((()=>this.SF()),this.IF),this.Ob=this.di.setTimeout((()=>this.EF()),this.PF*r.uD)}EF(){(0,h.hj)(this.fk)&&this.di.clearInterval(this.fk),(0,h.hj)(this.Ob)&&this.di.clearTimeout(this.Ob)}SF(){const t=this.VD.getItem(this._F);(0,h.QM)(t)&&(this.AF=t,this.EF(),this.TF.next(t))}}},655:(t,e,i)=>{"use strict";i.d(e,{CR:()=>h,FC:()=>l,Jh:()=>o,KL:()=>u,XA:()=>a,ZT:()=>n,ev:()=>c,mG:()=>r,qq:()=>d});var s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function r(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}function o(t,e){var i,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(h){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(i=1,s&&(n=2&a[0]?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],s=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}}Object.create;function a(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,n,r=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return o}function c(t,e,i){if(i||2===arguments.length)for(var s,n=0,r=e.length;n<r;n++)!s&&n in e||(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function d(t){return this instanceof d?(this.v=t,this):new d(t)}function l(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=i.apply(t,e||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(t){n[t]&&(s[t]=function(e){return new Promise((function(i,s){r.push([t,e,i,s])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof d?Promise.resolve(i.value.v).then(h,c):l(r[0][2],i)}catch(t){l(r[0][3],t)}var i}function h(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),r.shift(),r.length&&a(r[0][0],r[0][1])}}function u(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=a(t),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(i){e[i]=t[i]&&function(e){return new Promise((function(s,n){(function(t,e,i,s){Promise.resolve(s).then((function(e){t({value:e,done:i})}),e)})(s,n,(e=t[i](e)).done,e.value)}))}}}Object.create},8659:(t,e,i)=>{"use strict";var s;i.d(e,{Fw:()=>n,nC:()=>k,f3:()=>C,b2:()=>O,Yn:()=>M,ri:()=>L}),function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"}(s||(s={}));const n=s;var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},r(t,e)};function o(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function a(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}function h(t,e){var i,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],s=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,n,r=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return o}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function u(t){return!!t.useClass}function p(t){return!!t.useFactory}var f=function(){function t(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(t){var e,i=this,s=!1;return new Proxy({},this.createHandler((function(){return s||(e=t(i.wrap()),s=!0),e})))},t.prototype.createHandler=function(t){var e={};return this.reflectMethods.forEach((function(i){e[i]=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return e[0]=t(),Reflect[i].apply(void 0,l(e))}})),e},t}();function m(t){return"string"==typeof t||"symbol"==typeof t}function g(t){return"object"==typeof t&&"token"in t&&"transform"in t}function v(t){return!!t.useToken}function y(t){return null!=t.useValue}const b=function(){function t(){this.xF=new Map}return t.prototype.entries=function(){return this.xF.entries()},t.prototype.getAll=function(t){return this.ensure(t),this.xF.get(t)},t.prototype.get=function(t){this.ensure(t);var e=this.xF.get(t);return e[e.length-1]||null},t.prototype.set=function(t,e){this.ensure(t),this.xF.get(t).push(e)},t.prototype.setAll=function(t,e){this.xF.set(t,e)},t.prototype.has=function(t){return this.ensure(t),this.xF.get(t).length>0},t.prototype.clear=function(){this.xF.clear()},t.prototype.ensure=function(t){this.xF.has(t)||this.xF.set(t,[])},t}();const I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(b);const w=function(){this.scopedResolutions=new Map};function P(t,e,i){var s,n,r=d(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],o=function(t,e){return null===t?"at position #"+e:'"'+t.split(",")[e].trim()+'" at position #'+e}(void 0===r?null:r,e);return s="Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',void 0===n&&(n="    "),l([s],i.message.split("\n").map((function(t){return n+t}))).join("\n")}var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(b),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(b);const S=function(){this.preResolution=new T,this.postResolution=new _};var A=new Map,x=function(){function t(t){this.parent=t,this.CF=new I,this.interceptors=new S,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(t,e,i){var s;if(void 0===i&&(i={lifecycle:n.Transient}),this.ensureNotDisposed(),s=function(t){return u(t)||y(t)||v(t)||p(t)}(e)?e:{useClass:e},v(s))for(var r=[t],o=s;null!=o;){var a=o.useToken;if(r.includes(a))throw new Error("Token registration cycle detected! "+l(r,[a]).join(" -> "));r.push(a);var h=this.CF.get(a);o=h&&v(h.provider)?h.provider:null}if((i.lifecycle===n.Singleton||i.lifecycle==n.ContainerScoped||i.lifecycle==n.ResolutionScoped)&&(y(s)||p(s)))throw new Error('Cannot use lifecycle "'+n[i.lifecycle]+'" with ValueProviders or FactoryProviders');return this.CF.set(t,{provider:s,options:i}),this},t.prototype.registerType=function(t,e){return this.ensureNotDisposed(),m(e)?this.register(t,{useToken:e}):this.register(t,{useClass:e})},t.prototype.registerInstance=function(t,e){return this.ensureNotDisposed(),this.register(t,{useValue:e})},t.prototype.registerSingleton=function(t,e){if(this.ensureNotDisposed(),m(t)){if(m(e))return this.register(t,{useToken:e},{lifecycle:n.Singleton});if(e)return this.register(t,{useClass:e},{lifecycle:n.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var i=t;return e&&!m(e)&&(i=e),this.register(t,{useClass:i},{lifecycle:n.Singleton})},t.prototype.resolve=function(t,e){void 0===e&&(e=new w),this.ensureNotDisposed();var i=this.getRegistration(t);if(!i&&m(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),i){var s=this.resolveRegistration(i,e);return this.executePostResolutionInterceptor(t,s,"Single"),s}if(function(t){return"function"==typeof t||t instanceof f}(t)){s=this.construct(t,e);return this.executePostResolutionInterceptor(t,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(t,e){var i,s;if(this.interceptors.preResolution.has(t)){var n=[];try{for(var r=c(this.interceptors.preResolution.getAll(t)),o=r.next();!o.done;o=r.next()){var a=o.value;"Once"!=a.options.frequency&&n.push(a),a.callback(t,e)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(i)throw i.error}}this.interceptors.preResolution.setAll(t,n)}},t.prototype.executePostResolutionInterceptor=function(t,e,i){var s,n;if(this.interceptors.postResolution.has(t)){var r=[];try{for(var o=c(this.interceptors.postResolution.getAll(t)),a=o.next();!a.done;a=o.next()){var h=a.value;"Once"!=h.options.frequency&&r.push(h),h.callback(t,e,i)}}catch(t){s={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}this.interceptors.postResolution.setAll(t,r)}},t.prototype.resolveRegistration=function(t,e){if(this.ensureNotDisposed(),t.options.lifecycle===n.ResolutionScoped&&e.scopedResolutions.has(t))return e.scopedResolutions.get(t);var i,s=t.options.lifecycle===n.Singleton,r=t.options.lifecycle===n.ContainerScoped,o=s||r;return i=y(t.provider)?t.provider.useValue:v(t.provider)?o?t.instance||(t.instance=this.resolve(t.provider.useToken,e)):this.resolve(t.provider.useToken,e):u(t.provider)?o?t.instance||(t.instance=this.construct(t.provider.useClass,e)):this.construct(t.provider.useClass,e):p(t.provider)?t.provider.useFactory(this):this.construct(t.provider,e),t.options.lifecycle===n.ResolutionScoped&&e.scopedResolutions.set(t,i),i},t.prototype.resolveAll=function(t,e){var i=this;void 0===e&&(e=new w),this.ensureNotDisposed();var s=this.getAllRegistrations(t);if(!s&&m(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),s){var n=s.map((function(t){return i.resolveRegistration(t,e)}));return this.executePostResolutionInterceptor(t,n,"All"),n}var r=[this.construct(t,e)];return this.executePostResolutionInterceptor(t,r,"All"),r},t.prototype.isRegistered=function(t,e){return void 0===e&&(e=!1),this.ensureNotDisposed(),this.CF.has(t)||e&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this.CF.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var t,e;this.ensureNotDisposed();try{for(var i=c(this.CF.entries()),s=i.next();!s.done;s=i.next()){var n=d(s.value,2),r=n[0],o=n[1];this.CF.setAll(r,o.filter((function(t){return!y(t.provider)})).map((function(t){return t.instance=void 0,t})))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.createChildContainer=function(){var e,i;this.ensureNotDisposed();var s=new t(this);try{for(var r=c(this.CF.entries()),o=r.next();!o.done;o=r.next()){var a=d(o.value,2),h=a[0],l=a[1];l.some((function(t){return t.options.lifecycle===n.ContainerScoped}))&&s.CF.setAll(h,l.map((function(t){return t.options.lifecycle===n.ContainerScoped?{provider:t.provider,options:t.options}:t})))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return s},t.prototype.beforeResolution=function(t,e,i){void 0===i&&(i={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:e,options:i})},t.prototype.afterResolution=function(t,e,i){void 0===i&&(i={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:e,options:i})},t.prototype.dispose=function(){return a(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return this.disposed=!0,t=[],this.disposables.forEach((function(e){var i=e.dispose();i&&t.push(i)})),[4,Promise.all(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.getRegistration=function(t){return this.isRegistered(t)?this.CF.get(t):this.parent?this.parent.getRegistration(t):null},t.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this.CF.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},t.prototype.construct=function(t,e){var i=this;if(t instanceof f)return t.createProxy((function(t){return i.resolve(t,e)}));var s,n=function(){var s=A.get(t);if(!s||0===s.length){if(0===t.length)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var n=s.map(i.resolveParams(e,t));return new(t.bind.apply(t,l([void 0],n)))}();return"function"!=typeof(s=n).dispose||s.dispose.length>0||this.disposables.add(n),n},t.prototype.resolveParams=function(t,e){var i=this;return function(s,n){var r,o,a,h;try{return"object"==typeof(h=s)&&"token"in h&&"multiple"in h?g(s)?s.multiple?(r=i.resolve(s.transform)).transform.apply(r,l([i.resolveAll(s.token)],s.transformArgs)):(o=i.resolve(s.transform)).transform.apply(o,l([i.resolve(s.token,t)],s.transformArgs)):s.multiple?i.resolveAll(s.token):i.resolve(s.token,t):g(s)?(a=i.resolve(s.transform,t)).transform.apply(a,l([i.resolve(s.token,t)],s.transformArgs)):i.resolve(s,t)}catch(t){throw new Error(P(e,n,t))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t}(),k=new x;var E="injectionTokens";const C=function(t){return e=t,function(t,s,n){var r=Reflect.getOwnMetadata(E,t)||{};r[n]=i?{token:e,transform:i.transformToken,transformArgs:i.args||[]}:e,Reflect.defineMetadata(E,r,t)};var e,i};const O=function(){return function(t){A.set(t,function(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],i=Reflect.getOwnMetadata(E,t)||{};return Object.keys(i).forEach((function(t){e[+t]=i[t]})),e}(t))}};const L=function(){return function(t){O()(t),k.registerSingleton(t)}};function M(t,e){return function(i){O()(i),k.register(e||i,i,{lifecycle:t})}}if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.")},289:function(t,e,i){var s,n,r;n=[i(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.common||(t.roots.common=new t.Root)).addJSON({ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoAdDomainBlockingResponse:{fields:{domains:{rule:"repeated",type:"string",id:1}}},ProtoAssertiveYield:{fields:{requestId:{type:"string",id:1},demandPartnerId:{rule:"repeated",type:"string",id:2},placementId:{type:"string",id:3},userIds:{rule:"repeated",type:"string",id:4},predictions:{rule:"repeated",type:"double",id:5,options:{packed:!1}},bidCpms:{rule:"repeated",type:"double",id:6,options:{packed:!1}},costCpms:{rule:"repeated",type:"double",id:7,options:{packed:!1}}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},ProtoCookieSettings:{fields:{name:{type:"string",id:1},value:{type:"string",id:2},timestamp:{type:"int64",id:3}}},ProtoCookieSyncRequest:{fields:{cookieList:{rule:"repeated",type:"ProtoCookieSettings",id:1},secureMode:{type:"ProtoCookieSecureModeEnum",id:2},browserInfo:{type:"Browser",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},ivt:{type:"bool",id:2},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoDiscount:{oneofs:{OF:{oneof:["rate"]}},fields:{rate:{type:"double",id:2,options:{proto3_optional:!0}},id:{type:"string",id:1}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoHeaderBidderLineItem:{fields:{lineItem:{type:"ProtoLineItem",id:1},bids:{rule:"repeated",type:"ProtoRtbBid",id:2}}},ProtoLookupRequest:{fields:{panoramaId:{type:"string",id:1}}},ProtoLookupResponse:{fields:{errorMessage:{type:"string",id:1},userId:{type:"string",id:2}}},Insights:{fields:{key:{type:"string",id:1}}},ProtoSentimentAnalysis:{fields:{positive:{type:"double",id:1},neutral:{type:"double",id:2},negative:{type:"double",id:3}}},ProtoInsightsResponse:{fields:{insights:{rule:"repeated",type:"Insights",id:1},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:2}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoIntentIQResponseData:{fields:{vendorName:{type:"string",id:2}}},ProtoLineItem:{oneofs:{LF:{oneof:["floorPricesNew"]},BF:{oneof:["protoIntentiqResponseData"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},protoIntentiqResponseData:{type:"ProtoIntentIQResponseData",id:63,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28,options:{default:10}},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},grossNetPercentageDifference:{type:"int32",id:64},isLexiconSupported:{type:"bool",id:65},infrastructureFee:{type:"double",id:66},optimizeFloorPrice:{type:"bool",id:67},advertiserAccountId:{type:"string",id:68},externallyManaged:{type:"bool",id:69},shouldThrottlePacing:{type:"bool",id:70},demandPartnerId:{type:"int32",id:71},advertiserAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:74},publisherAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:75},canUseConnatixDataGraph:{type:"bool",id:77},isPerformanceOverrideAd:{type:"bool",id:76},playerSize:{type:"string",id:101}}},ProtoAudienceTargetingCase:{fields:{audienceTargetingFilters:{rule:"repeated",type:"ProtoAudienceTargetingFilter",id:1}}},ProtoAudienceTargetingFilter:{fields:{rule:{type:"ProtoTargetingFilterEnum",id:1},audienceIdList:{rule:"repeated",type:"string",id:2}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoTargetingFilterEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{RF:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoLiveMediaMetadataResponse:{fields:{startDate:{type:"string",id:1},outputUrl:{type:"string",id:2},thumbnailUrl:{type:"string",id:3},altText:{type:"string",id:4},name:{type:"string",id:5}}},ProtoLotamePanorama:{fields:{id:{type:"string",id:1},type:{type:"ProtoPanoramaIdTypeEnum",id:2}}},ProtoSpriteSheet:{fields:{file:{type:"string",id:1},height:{type:"int32",id:2},count:{type:"int32",id:3}}},ProtoTrack:{fields:{file:{type:"string",id:1},type:{type:"ProtoTrackType",id:2},code:{type:"string",id:3},title:{type:"string",id:4}}},ProtoCuePoint:{fields:{timeStamp:{type:"int32",id:1}}},ProtoVideoChapter:{fields:{clickUrl:{type:"string",id:1},duration:{type:"int32",id:2},title:{type:"string",id:3},altText:{type:"string",id:4},keywords:{rule:"repeated",type:"string",id:5}}},ProtoCtaButton:{fields:{text:{type:"string",id:1},textColor:{type:"string",id:2},backgroundColor:{type:"string",id:3}}},ProtoMediaMetadataResponse:{fields:{title:{type:"string",id:1},description:{type:"string",id:2},duration:{type:"int32",id:3},clickUrl:{type:"string",id:4},keywordList:{rule:"repeated",type:"string",id:5},trackList:{rule:"repeated",type:"ProtoTrack",id:6},spriteSheet:{type:"ProtoSpriteSheet",id:7},thumbnail:{type:"string",id:8},renditionList:{rule:"repeated",type:"ProtoRendition",id:9},hlsFilePath:{type:"string",id:11},languageId:{type:"string",id:12},sourceItemId:{type:"string",id:13},altText:{type:"string",id:14},cuePoints:{rule:"repeated",type:"ProtoCuePoint",id:16},multimediaId:{type:"string",id:17},publishDate:{type:"uint32",id:18},endDate:{type:"uint32",id:19},contentStudio:{type:"string",id:20},customMetadata:{type:"string",id:21},chapters:{rule:"repeated",type:"ProtoVideoChapter",id:22},separateAudioStreamPath:{type:"string",id:23},hasSeparateAudioStream:{type:"bool",id:24},ctaButton:{type:"ProtoCtaButton",id:26},altTitle:{type:"string",id:27}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoIdentityProviderData:{fields:{group:{type:"ProtoIdentityProviderGroupEnum",id:1},identityProviderEidsList:{rule:"repeated",type:"ProtoIdentityProviderEids",id:2},hasIIQLookup:{type:"bool",id:3},identityPartnerEnum:{type:"ProtoIdentityPartnerEnum",id:4},identityProviderDataList:{rule:"repeated",type:"ProtoIdentityProviderDataNew",id:5},eidsDataList:{rule:"repeated",type:"ProtoIdentityProviderEids",id:6}}},ProtoIdentityProviderEids:{fields:{source:{type:"string",id:1},ids:{rule:"repeated",type:"string",id:2},provider:{type:"ProtoIdentityPartnerEnum",id:3},ext:{type:"ProtoExt",id:4}}},ProtoExt:{fields:{linkType:{type:"int32",id:1}}},ProtoIdentityProviderDataNew:{fields:{partner:{type:"ProtoIdentityPartnerEnum",id:1},group:{type:"ProtoIdentityProviderGroupEnum",id:2},eidsList:{rule:"repeated",type:"ProtoIdentityProviderEids",id:3},isUsed:{type:"bool",id:4}}},ProtoRtbRequest:{oneofs:{Ou:{oneof:["lineItemAbTestInformation"]},DF:{oneof:["panorama"]},AF:{oneof:["uid2Token"]},NF:{oneof:["cookieDeprecationLabel"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:46,options:{proto3_optional:!0}},panorama:{type:"ProtoLotamePanorama",id:59,options:{proto3_optional:!0}},uid2Token:{type:"string",id:60,options:{proto3_optional:!0}},cookieDeprecationLabel:{type:"string",id:61,options:{proto3_optional:!0}},metadata:{type:"MetadataModel",id:1},coppa:{type:"bool",id:4},refererUrl:{type:"string",id:5},testMode:{type:"bool",id:6},videoWidth:{type:"int32",id:7},videoHeight:{type:"int32",id:8},gdprCompliant:{type:"bool",id:9},soundOn:{type:"bool",id:10},gdprConsentData:{type:"string",id:11},explorationMode:{type:"bool",id:12},viewability:{type:"bool",id:13},outstream:{type:"bool",id:14},domainURL:{type:"string",id:16},isClickToPlay:{type:"bool",id:18},appVersion:{type:"string",id:21},deviceID:{type:"string",id:24},lineItems:{keyType:"string",type:"ProtoRtbRequestLineItemEntry",id:25},isCcpaBlockingUserInfo:{type:"bool",id:26},usPrivacyString:{type:"string",id:27},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:36},maxAdDuration:{type:"int32",id:37,options:{default:180}},customMacros:{keyType:"string",type:"string",id:38},maxBidPrice:{type:"double",id:39},playerWidth:{type:"int32",id:43},playerHeight:{type:"int32",id:44},useNewSkippability:{type:"bool",id:42},liveRampAtsEnvelope:{type:"string",id:45},connectionType:{type:"int32",id:47},OMSDKSupport:{type:"bool",id:48},OMSDKVersion:{type:"string",id:51},identityProviderData:{type:"ProtoIdentityProviderData",id:53},rollType:{type:"ProtoAdRollTypeEnum",id:54},lexiconUids:{rule:"repeated",type:"string",id:55},userIdentificationPending:{type:"bool",id:56},coreSyncTimestamp:{type:"int64",id:57},callAssertiveYield:{type:"bool",id:58}}},ProtoRtbRequestLineItemEntry:{oneofs:{FF:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:16,options:{proto3_optional:!0}},availableRequests:{type:"int32",id:1},gdprConsent:{type:"bool",id:4},publisherLineItemId:{type:"string",id:5},slotWidth:{type:"int32",id:6},slotHeight:{type:"int32",id:7},requestNumber:{type:"int32",id:8},skip:{type:"ProtoSkipEnabledEnum",id:12},skipmin:{type:"int32",id:13},skipafter:{type:"int32",id:14},minDuration:{type:"int32",id:15}}},MetadataModel:{fields:{version:{type:"int32",id:1},sessionId:{type:"string",id:2},playerId:{type:"string",id:3},userId:{type:"string",id:4},browser:{type:"Browser",id:5},geo:{type:"GeoLocation",id:6},clientAb0:{type:"int32",id:7},clientAb1:{type:"int32",id:8},serverAb0:{type:"int32",id:9},serverAb1:{type:"int32",id:10},pageUrl:{type:"string",id:15},bundleId:{type:"string",id:17},implementationType:{type:"ProtoImplementationType",id:18},shouldTrackAllRequests:{type:"bool",id:19},customParam1:{type:"string",id:20},customParam2:{type:"string",id:21},customParam3:{type:"string",id:22},abTestId:{type:"string",id:24},isPageInFocus:{type:"bool",id:25},customParam4:{type:"string",id:26},customParam5:{type:"string",id:27},bundleAbId:{type:"string",id:28},bundlePart:{type:"string",id:29},clientAb2:{type:"int32",id:31},clientAb3:{type:"int32",id:32},clientAb4:{type:"int32",id:33},clientAb5:{type:"int32",id:34},iiqEnabledAB:{type:"int32",id:35},iiqGroupAB:{type:"int32",id:36},eventTimestamp:{type:"int64",id:37},isIdentityEnhanced:{type:"bool",id:38}}},ProtoCacheFloorPrice:{fields:{floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}},recommended:{type:"int32",id:2}}},ProtoRtbResponse:{fields:{lineItemResponses:{rule:"repeated",type:"ProtoRtbLineItem",id:3},liveRampEnvelopeStatus:{type:"LiveRampEnvelopeStatusEnum",id:4},assertiveYieldPayload:{type:"ProtoAssertiveYield",id:6}}},ProtoRtbBid:{oneofs:{VF:{oneof:["floorPriceInformation"]},jF:{oneof:["discount"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:30,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:31,options:{proto3_optional:!0}},winNoticeUrl:{type:"string",id:2},adQualityCheckUrl:{type:"string",id:3},vastTag:{type:"string",id:4},encryptedPrice:{type:"string",id:6},creativeId:{type:"string",id:7},seatId:{type:"string",id:8},adomain:{type:"string",id:9},syncedUser:{type:"bool",id:10},requestedFloorPrice:{type:"double",id:11},campaignId:{type:"string",id:13},width:{type:"int32",id:14},height:{type:"int32",id:15},billingNoticeUrlList:{rule:"repeated",type:"string",id:16},mime:{type:"string",id:17,options:{default:"text/html"}},gtkpbp:{type:"double",id:18},successRate:{type:"double",id:19},impressionTimeSpent:{type:"int32",id:20},bidRate:{type:"double",id:21},dspId:{type:"string",id:22},cnxBidId:{type:"string",id:23},logAuctionInformation:{type:"bool",id:24},auctionBidId:{type:"string",id:25},rtbRequestId:{type:"string",id:26},liveRampType:{type:"ProtoLiveRampEnum",id:32},serverBillingNoticeUrls:{rule:"repeated",type:"string",id:33},hasLexiconEnvelopeBeenUsed:{type:"bool",id:34},hasIIQLookup:{type:"bool",id:35},customClientEncryptedPrice:{type:"string",id:36}}},ProtoRtbLineItem:{oneofs:{FF:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:6,options:{proto3_optional:!0}},id:{type:"string",id:1},bids:{rule:"repeated",type:"ProtoRtbBid",id:3},noBidsCount:{type:"int32",id:5},identityPartnerUsed:{type:"ProtoIdentityPartnerEnum",id:7}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoAdClickTrackingRequest:{oneofs:{Ou:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:14,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},publisherLineItemId:{type:"string",id:3},advertiserLineItemId:{type:"string",id:4},type:{type:"ProtoAdClickTypeEnum",id:5},insightIndexes:{rule:"repeated",type:"string",id:10},adBreakType:{type:"ProtoAdBreakTypeEnum",id:11},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:12},pageInsightIndexes:{rule:"repeated",type:"string",id:13},iasSegmentCodes:{rule:"repeated",type:"string",id:15}}},ProtoAdOpportunityRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:2},adBreak:{type:"ProtoAdBreakTypeEnum",id:3},playerWidth:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoAuctionInfoRequest:{fields:{cnxBidId:{type:"string",id:1},auctionInformation:{type:"ProtoAuctionInformation",id:2},auctionLossReason:{type:"ProtoAuctionLossReasonEnum",id:3}}},ProtoAuctionInformation:{fields:{highestObfuscatedBidPrice:{type:"double",id:1},secondHighestObfuscatedBidPrice:{type:"double",id:2},bidDensity:{type:"int32",id:3}}},ProtoFloorPriceInformation:{oneofs:{UF:{oneof:["floorPriceIndexUsed"]},RF:{oneof:["floorPriceBypassReason"]},$F:{oneof:["adxPredictedFloorPrice"]}},fields:{floorPriceIndexUsed:{type:"int32",id:2,options:{proto3_optional:!0}},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:3,options:{proto3_optional:!0}},adxPredictedFloorPrice:{type:"double",id:4,options:{proto3_optional:!0}},floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}}}},ProtoPrebid:{oneofs:{VF:{oneof:["floorPriceInformation"]},qF:{oneof:["identityProviderData"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:16,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:19,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},reason:{type:"ConnatixNoBidReasonEnum",id:5},requestNumber:{type:"int32",id:6},partnerReason:{type:"PartnerNoBidReasonEnum",id:7},requestedFloorPrice:{type:"double",id:8},partnerCustomHeaders:{type:"string",id:9},prebidJsBidderName:{type:"string",id:12},playerWidth:{type:"int32",id:14},playerHeight:{type:"int32",id:15},hasLexiconEnvelopeBeenUsed:{type:"bool",id:20},videoPlacement:{type:"ProtoVideoPlacementEnum",id:21},eventTimestamp:{type:"int64",id:22},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBid:{oneofs:{VF:{oneof:["floorPriceInformation"]},qF:{oneof:["identityProviderData"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:22,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:24,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},requestNumber:{type:"int32",id:5},creativeId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},rtbAdomain:{type:"string",id:8},encryptedPrice:{type:"string",id:9},requestedFloorPrice:{type:"double",id:10},prebidJsBidderName:{type:"string",id:13},customClientPrice:{type:"double",id:14},dspId:{type:"string",id:15},cnxBidId:{type:"string",id:16},playerWidth:{type:"int32",id:18},playerHeight:{type:"int32",id:19},hasLexiconEnvelopeBeenUsed:{type:"bool",id:25},videoPlacement:{type:"ProtoVideoPlacementEnum",id:26},eventTimestamp:{type:"int64",id:27},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoPostBid:{oneofs:{VF:{oneof:["floorPriceInformation"]},jF:{oneof:["discount"]},qF:{oneof:["identityProviderData"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:28,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:30,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:34,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},error:{type:"string",id:5},isBidLoaded:{type:"bool",id:6},creativeId:{type:"string",id:7},rtbSeatId:{type:"string",id:8},rtbAdomain:{type:"string",id:9},adsourceType:{type:"ProtoAdsourceTypeEnum",id:10},vastMediaType:{type:"string",id:11},adPodSlotPosition:{type:"int32",id:12},prebidJsBidderName:{type:"string",id:13},dspId:{type:"string",id:14},cnxBidId:{type:"string",id:15},winToAdLoadedTime:{type:"int32",id:16},auctionInformation:{type:"ProtoAuctionInformation",id:18},auctionPostbidReason:{type:"ProtoAuctionPostbidReasonEnum",id:19},requestNumber:{type:"int32",id:20},floorPrice:{type:"double",id:22},playerWidth:{type:"int32",id:23},playerHeight:{type:"int32",id:24},bidElapsedTimeSeconds:{type:"int32",id:25},adBreakType:{type:"ProtoAdBreakTypeEnum",id:26},liveRampType:{type:"ProtoLiveRampEnum",id:32},hasLexiconEnvelopeBeenUsed:{type:"bool",id:35},videoPlacement:{type:"ProtoVideoPlacementEnum",id:36},eventTimestamp:{type:"int64",id:37},assertiveYieldProbability:{type:"double",id:38},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBidTrackingsRequest:{oneofs:{Ou:{oneof:["lineItemAbTestInformation"]},DF:{oneof:["panorama"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:13,options:{proto3_optional:!0}},panorama:{type:"ProtoLotamePanorama",id:15,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},prebids:{rule:"repeated",type:"ProtoPrebid",id:4},bids:{rule:"repeated",type:"ProtoBid",id:5},postBids:{rule:"repeated",type:"ProtoPostBid",id:6},shouldLogEverything:{type:"bool",id:7},hasGdprConsentPayload:{type:"bool",id:10},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:11},isExplorationMode:{type:"bool",id:12}}},ProtoHeavyAdTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},advertiserLineItemId:{type:"string",id:2},heavyAdBlockTypeEnum:{type:"ProtoHeavyAdBlockTypeEnum",id:3},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoInternalAuction:{oneofs:{HF:{oneof:["firstLoser"]},JF:{oneof:["firstOpenMarketLoser"]}},fields:{firstLoser:{type:"ProtoInternalAuctionBid",id:2,options:{proto3_optional:!0}},firstOpenMarketLoser:{type:"ProtoInternalAuctionBid",id:3,options:{proto3_optional:!0}},winnerDemandType:{type:"ProtoDemandTypeEnum",id:1}}},ProtoInternalAuctionBid:{oneofs:{zF:{oneof:["customClientPrice"]},WF:{oneof:["encryptedPrice"]},en:{oneof:["adDuration"]}},fields:{customClientPrice:{type:"double",id:2,options:{proto3_optional:!0}},encryptedPrice:{type:"string",id:3,options:{proto3_optional:!0}},adDuration:{type:"double",id:5,options:{proto3_optional:!0}},demandType:{type:"ProtoDemandTypeEnum",id:1},advertiserLineItemId:{type:"string",id:4}}},ProtoMediaClickTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},type:{type:"ProtoMediaClickTypeEnum",id:3},clickUrl:{type:"string",id:4},slideTitle:{type:"string",id:5},slideNumber:{type:"int32",id:6},slideMediaType:{type:"ProtoMediaTypeEnum",id:7},insightIndexes:{rule:"repeated",type:"string",id:12},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:13}}},ProtoMediaQuartileRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},quartile:{type:"ProtoQuartilesEnum",id:4},insightIndexes:{rule:"repeated",type:"string",id:9},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:10}}},ProtoMediaViewRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},insightIndexes:{rule:"repeated",type:"string",id:3}}},ProtoPlayerStartRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},customClientEncryptedPrice:{type:"string",id:4},initialGdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:5},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionAdBlockerRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},adBlockDetectionType:{type:"ProtoAdBlockDetectionTypeEnum",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionRenderedRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},integrationType:{type:"ProtoIntegrationTypeEnum",id:3},hasAdBlocker:{type:"bool",id:4},bundleName:{type:"string",id:5},playerWidth:{type:"int32",id:6},playerHeight:{type:"int32",id:7},pageInsightIndexes:{rule:"repeated",type:"string",id:8},googleDeprecationLabel:{type:"string",id:9},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionTimeTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},timePlayed:{type:"int32",id:2},timePlayedInView:{type:"int32",id:3},sessionTime:{type:"int32",id:4},stayNextButtonsAppearances:{type:"int32",id:6},pageInsightIndexes:{rule:"repeated",type:"string",id:5},mediaId:{type:"string",id:7},mediaTimePlayed:{type:"int32",id:8},mediaTimePlayedInView:{type:"int32",id:9}}},ProtoSessionViewRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},initialGdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:3},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoTrackingResponse:{oneofs:{YF:{oneof:["isViewabilityRestricted"]}},fields:{isViewabilityRestricted:{type:"bool",id:5,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},platformCappedLineItemIdList:{rule:"repeated",type:"string",id:2},impressionRevenue:{type:"double",id:3},adServerLineItemName:{type:"string",id:4}}},ProtoVideoAdImpressionRequest:{oneofs:{VF:{oneof:["floorPriceInformation"]},Ou:{oneof:["lineItemAbTestInformation"]},QF:{oneof:["internalAuction"]},jF:{oneof:["discount"]},qF:{oneof:["identityProviderData"]},DF:{oneof:["panorama"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:46,options:{proto3_optional:!0}},lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:47,options:{proto3_optional:!0}},internalAuction:{type:"ProtoInternalAuction",id:48,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:50,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:58,options:{proto3_optional:!0}},panorama:{type:"ProtoLotamePanorama",id:64,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},isUserSynced:{type:"bool",id:7},timeSpent:{type:"int32",id:8},encryptedPrice:{type:"string",id:9},creativeId:{type:"string",id:10},rtbSeatId:{type:"string",id:11},rtbAdomain:{type:"string",id:12},customClientPrice:{type:"double",id:13},adsourceType:{type:"ProtoAdsourceTypeEnum",id:14},vastMediaType:{type:"string",id:15},adPodSlotPosition:{type:"int32",id:18},prebidJsBidderName:{type:"string",id:19},dspId:{type:"string",id:20},cnxBidId:{type:"string",id:21},winToAdLoadedTime:{type:"int32",id:22},startAdToImpressionTime:{type:"int32",id:23},declaredDuration:{type:"double",id:24},impressionDuration:{type:"double",id:25},isExplorationMode:{type:"bool",id:26},auctionInformation:{type:"ProtoAuctionInformation",id:27},playerWidth:{type:"int32",id:28},requestNumber:{type:"int32",id:29},floorPrice:{type:"double",id:31},playerHeight:{type:"int32",id:36},bidElapsedTimeSeconds:{type:"int32",id:37},insightIndexes:{rule:"repeated",type:"string",id:38},adBreakType:{type:"ProtoAdBreakTypeEnum",id:40},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:41},hasAdSkip:{type:"bool",id:39},pageInsightIndexes:{rule:"repeated",type:"string",id:42},iasSegmentCodes:{rule:"repeated",type:"string",id:49},liveRampType:{type:"ProtoLiveRampEnum",id:51},serverBillingNoticeUrls:{rule:"repeated",type:"string",id:53},hasLexiconEnvelopeBeenUsed:{type:"bool",id:60},videoPlacement:{type:"ProtoVideoPlacementEnum",id:61},assertiveYieldResult:{type:"ProtoAssertiveYield",id:65},assertiveYieldProbability:{type:"double",id:66},initialGdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:67},adMediaFileHeight:{type:"int32",id:62},adMediaFileWidth:{type:"int32",id:63},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdImpressionViewableRequest:{oneofs:{Ou:{oneof:["lineItemAbTestInformation"]},jF:{oneof:["discount"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:19,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:21,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},dspId:{type:"string",id:8},insightIndexes:{rule:"repeated",type:"string",id:13},hasAdSkip:{type:"bool",id:14},adBreakType:{type:"ProtoAdBreakTypeEnum",id:15},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:16},pageInsightIndexes:{rule:"repeated",type:"string",id:17},rtbAdomain:{type:"string",id:18},iasSegmentCodes:{rule:"repeated",type:"string",id:20},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdQuartilesRequest:{oneofs:{Ou:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:20,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},quartile:{type:"ProtoQuartilesEnum",id:7},rtbSeatId:{type:"string",id:8},dspId:{type:"string",id:9},insightIndexes:{rule:"repeated",type:"string",id:14},hasAdSkip:{type:"bool",id:15},adBreakType:{type:"ProtoAdBreakTypeEnum",id:16},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:17},pageInsightIndexes:{rule:"repeated",type:"string",id:18},rtbAdomain:{type:"string",id:19},iasSegmentCodes:{rule:"repeated",type:"string",id:21}}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1,Standalone:5}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdRollTypeEnum:{values:{Outstream:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoVideoPlacementEnum:{values:{InStream:1,AccompanyingContent:2,Interstitial:3,NoContentStandalone:4}},ProtoIdentityPartnerEnum:{values:{None:0,IntentIQ:1,LiveIntent:2,ID5:3}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoCookieSecureModeEnum:{values:{Secure:0,Unsecure:1,Auto:2}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoTargetingFilterEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}},ProtoPanoramaIdTypeEnum:{values:{Unknown:0,PanoIndiv:1,PanoDevice:2}},ProtoTrackType:{values:{ManualSubtitle:0,AutoGeneratedSubtitle:1,ClosedCaptions:2}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoIdentityProviderGroupEnum:{values:{None:0,A:1,B:2,C:3}},ProtoSkipEnabledEnum:{values:{No:0,Yes:1}},LiveRampEnvelopeStatusEnum:{values:{Ok:0,EnvelopeExpired:1,Unauthorized:2}},ConnatixNoBidReasonEnum:{values:{RequestException:0,Timeout:1,EmptyResponse:2,InvalidResponse:3,NoBid:4,BidBelowFloor:5,DealIdMismatch:6,CsInvalidResponse:7,CsRequestException:8,CsEmptyResponse:9,NoLibInPage:11,BidIsNotTargetingAllowedEver:12,VastVersionNotSupported:13,VastHasBannedUrls:18}},PartnerNoBidReasonEnum:{values:{Unknown:0,TechnicalError:1,InvalidRequest:2,KnownWebSpider:3,SuspectedNonHumanTraffic:4,CloudIP:5,UnsupportedDevice:6,BlockedPublisher:7,UnmatchedUser:8,DailyReaderCapMet:9,DailyDomainCapMet:10}},ProtoAdBlockDetectionTypeEnum:{values:{Banner:0,Network:1}},ProtoAdClickTypeEnum:{values:{AdClick:1,AdClickThrough:2,AdSkipClick:3,VolumeClick:4,PauseClick:5,PlayClick:6,FullScreenClick:7,MuteClick:8,UnmuteClick:9,ExitFullScreenClick:10,AdUserClose:11,FloatingCloseClick:12,EmbeddedCloseClick:13}},ProtoAdsourceTypeEnum:{values:{Unknown:0,Vpaid:1,VastMedia:2,CnxMedia:3,Jw:4,Ima:5,AOL:6}},ProtoAuctionLossReasonEnum:{values:{TargetingMismatch:0,CompetitorPriority:1,AdOpportunityEnd:2}},ProtoGdprConsentModeEnum:{values:{Unknown:0,NoCmp:1,NoConsent:2,NoConnatixConsent:3,NotAllDemandConsent:4,AllGood:5}},ProtoAuctionPostbidReasonEnum:{values:{CreativeError:0,SDKFailure:1,UnsupportedMedia:2,TargetingMismatch:3,PlayerError:4}},ProtoHeavyAdBlockTypeEnum:{values:{Global:0,Script:1,VpaidIframe:2,OverlayIframe:3}},ProtoDemandTypeEnum:{values:{None:0,PMP:1,OpenMarket:2,SelfServed:3}},ProtoLiveRampEnum:{values:{None:0,ATS:1,NonATS:2}},ProtoMediaClickTypeEnum:{values:{Click:0,UrlClick:1,VolumeClick:2,PlayClick:3,PauseClick:4,NextClick:5,PreviousClick:6,MuteClick:7,UnmuteClick:8,CloseClick:9,GalleryClick:11,SubtitleClick:12,FullScreenClick:13,ExitFullScreenClick:14,NextButtonClick:15,StayButtonClick:16,CtaButtonClick:17,EmbedCloseClick:18,FloatingCloseClick:19}},ProtoQuartilesEnum:{values:{Start:0,First:1,Second:2,Third:3,Fourth:4}},ProtoIntegrationTypeEnum:{values:{Unknown:0,InAppSdk:1,InAppReactNative:2,InAppFlutter:3,InAppGam:4,InAppWebview:5,WebAmp:6,WebGamSafeIframe:7,WebGamFriendlyIframe:8,Web:9}}})})?s.apply(e,n):s)||(t.exports=r)},7953:function(t,e,i){var s,n,r;n=[i(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.elements||(t.roots.elements=new t.Root)).addJSON({ProtoElementsRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forcePlaylistId:{type:"string",id:9},version:{type:"int32",id:10},forceLineItemIds:{rule:"repeated",type:"string",id:11},clientAb0:{type:"int32",id:12},clientAb1:{type:"int32",id:13},customParam1:{type:"string",id:16},customParam2:{type:"string",id:17},customParam3:{type:"string",id:18},forceExploration:{type:"bool",id:20},es6:{type:"bool",id:21},bundleId:{type:"string",id:22},forceSourceItemId:{type:"string",id:23},parseDomain:{type:"bool",id:24},implementationType:{type:"ProtoImplementationType",id:25},queryJsTargeting:{keyType:"string",type:"string",id:26},isConsentConnatix:{type:"bool",id:27,options:{default:!0}},isConsentLotame:{type:"bool",id:30},disableTracking:{type:"bool",id:31},referrer:{type:"string",id:32},localTimestamp:{type:"int64",id:33},customParam4:{type:"string",id:34},customParam5:{type:"string",id:35},forceMediaIdList:{rule:"repeated",type:"string",id:36},servingRuleId:{type:"string",id:37},cnxDebug:{type:"bool",id:38},clientAb2:{type:"int32",id:39},clientAb3:{type:"int32",id:40},clientAb4:{type:"int32",id:41},clientAb5:{type:"int32",id:42},iiqEnabledAB:{type:"int32",id:43},iiqGroupAB:{type:"int32",id:44}}},ProtoPlaylistItem:{oneofs:{KF:{oneof:["mediaContentVersionId"]},ZF:{oneof:["insightsRevisionNumber"]},tV:{oneof:["disableAdvertising"]}},fields:{mediaContentVersionId:{type:"string",id:3,options:{proto3_optional:!0}},insightsRevisionNumber:{type:"int32",id:4,options:{proto3_optional:!0}},disableAdvertising:{type:"bool",id:5,options:{proto3_optional:!0}},mediaId:{type:"string",id:1},revisionNumber:{type:"int32",id:2}}},ProtoElements:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},upNextMode:{type:"ProtoPlayerUpNextMode",id:4,options:{default:1}},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},timeBetweenAds:{type:"int32",id:14},minTimeBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},responsive:{type:"bool",id:18},ratioWidth:{type:"int32",id:19},ratioHeight:{type:"int32",id:20},fixedWidth:{type:"int32",id:21},fixedHeight:{type:"int32",id:22},casting:{type:"bool",id:23},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:24,options:{packed:!1}},closedCaption:{type:"bool",id:25},muteWatermark:{type:"bool",id:26},expandButton:{type:"bool",id:27},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:28},floatingMode:{type:"ProtoPlayerFloatingMode",id:29},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:30,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:31},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:32},floatingPageElement:{type:"string",id:33},floatingUseElementWidth:{type:"bool",id:34},floatingScrollPosition:{type:"ProtoPositionMode",id:35},floatingGutterX:{type:"int32",id:36},floatingGutterY:{type:"int32",id:37},floatingWidth:{type:"int32",id:38},iconsColor:{type:"string",id:39},accentColor:{type:"string",id:40},tooltipTextColor:{type:"string",id:41},tooltipBackgroundColor:{type:"string",id:42},html:{type:"string",id:43},galleryStyle:{type:"ProtoGalleryStyleMode",id:45},logoPosition:{type:"ProtoLogoPositionMode",id:46},lineItems:{rule:"repeated",type:"ProtoLineItem",id:49},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:50},css:{type:"string",id:51},sessionId:{type:"string",id:52},playlistId:{type:"string",id:53},playerType:{type:"ProtoElementsTypeEnum",id:54},outstreamInitialRendering:{type:"ProtoOutstreamInitialRenderingEnum",id:55},outstreamHouseBackgroundColor:{type:"string",id:56},outstreamTotalAdBreakLength:{type:"int32",id:57},outstreamEndAdBreakPolicy:{type:"ProtoOutstreamEndAdBreakPolicyEnum",id:58},galleryOrientation:{type:"ProtoGalleryOrientationEnum",id:59},playlist:{rule:"repeated",type:"ProtoPlaylistItem",id:60},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:61},floatingYAxisPadding:{type:"int32",id:62},customJsCode:{type:"string",id:63},videoQuality:{type:"ProtoVideoQuality",id:64},initializationSettingsJson:{type:"string",id:65},skipAdAfter:{type:"int32",id:67,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:68},amazonTamSlotId:{type:"string",id:69},midRollOnlyOnLongContent:{type:"bool",id:70,options:{default:!0}},limitClientSideApiUse:{type:"bool",id:71},abTestId:{type:"string",id:72},skipMin:{type:"int32",id:73,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:74},logoResource:{type:"string",id:76},nonlinearPlayerSettings:{type:"ProtoNonlinearPlayerSettings",id:77},displayAdCountdown:{type:"bool",id:78},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:79},prefetchOnPreroll:{type:"bool",id:80,options:{default:!0}},playlistThumbnail:{type:"string",id:81},playlistName:{type:"string",id:82},playlistDescription:{type:"string",id:83},hasFloatingTransition:{type:"bool",id:84,options:{default:!0}},symbolResource:{type:"string",id:85},hasNewDesign:{type:"bool",id:86},videoPlacement:{type:"ProtoVideoPlacementEnum",id:87,options:{default:2}},skipToNextVideoAfter:{type:"int32",id:88},revSharePercentage:{type:"double",id:89},hasAdContentDurationRatio:{type:"bool",id:90},closeButtonLocation:{type:"ProtoCloseButtonLocationEnum",id:91}}},ProtoElementsResponse:{oneofs:{Ou:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:31,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoElements",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30},IASSegmentCodes:{rule:"repeated",type:"string",id:32},AmazonTamPubId:{type:"string",id:33},tier:{type:"int32",id:34,options:{default:2}},useIntentiqUserSyncing:{type:"bool",id:35},liveRampPubId:{type:"string",id:36},region:{type:"string",id:37},supportedIdentityPartners:{rule:"repeated",type:"ProtoIdentityPartnerEnum",id:38,options:{packed:!1}},usedAdxHttpClient:{type:"bool",id:39},foundPredictionInV1:{type:"bool",id:40}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoIntentIQResponseData:{fields:{vendorName:{type:"string",id:2}}},ProtoLineItem:{oneofs:{LF:{oneof:["floorPricesNew"]},BF:{oneof:["protoIntentiqResponseData"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},protoIntentiqResponseData:{type:"ProtoIntentIQResponseData",id:63,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28,options:{default:10}},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},grossNetPercentageDifference:{type:"int32",id:64},isLexiconSupported:{type:"bool",id:65},infrastructureFee:{type:"double",id:66},optimizeFloorPrice:{type:"bool",id:67},advertiserAccountId:{type:"string",id:68},externallyManaged:{type:"bool",id:69},shouldThrottlePacing:{type:"bool",id:70},demandPartnerId:{type:"int32",id:71},advertiserAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:74},publisherAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:75},canUseConnatixDataGraph:{type:"bool",id:77},isPerformanceOverrideAd:{type:"bool",id:76},playerSize:{type:"string",id:101}}},ProtoAudienceTargetingCase:{fields:{audienceTargetingFilters:{rule:"repeated",type:"ProtoAudienceTargetingFilter",id:1}}},ProtoAudienceTargetingFilter:{fields:{rule:{type:"ProtoTargetingFilterEnum",id:1},audienceIdList:{rule:"repeated",type:"string",id:2}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoTargetingFilterEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{RF:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},ivt:{type:"bool",id:2},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoOutstreamInitialRenderingEnum:{values:{ExpandWithAd:0,FullyRendered:1}},ProtoOutstreamEndAdBreakPolicyEnum:{values:{Hide:0,HouseScreen:1,Loop:2}},ProtoGalleryStyleMode:{values:{None:0,Detailed:1,Visual:2}},ProtoLogoPositionMode:{values:{None:0,ControlBar:1,BottomRight:2,BottomLeft:3,TopRight:4,TopLeft:5,Center:6}},ProtoGalleryOrientationEnum:{values:{Landscape:0,Portrait:1}},ProtoElementsTypeEnum:{values:{InStream:0,OutStream:1,InStreamInApp:2,Live:3}},ProtoPlayerUpNextMode:{values:{Loop:0,Next:1,Stop:2}},ProtoCloseButtonLocationEnum:{values:{InsideThePlayer:0,OutsideThePlayer:1}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoTargetingFilterEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1,Standalone:5}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdRollTypeEnum:{values:{Outstream:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoVideoPlacementEnum:{values:{InStream:1,AccompanyingContent:2,Interstitial:3,NoContentStandalone:4}},ProtoIdentityPartnerEnum:{values:{None:0,IntentIQ:1,LiveIntent:2,ID5:3}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}}})})?s.apply(e,n):s)||(t.exports=r)},5648:function(t,e,i){var s,n,r;n=[i(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.playspace||(t.roots.playspace=new t.Root)).addJSON({ProtoPlayspaceVideoSlideRendition:{fields:{width:{type:"int32",id:1},height:{type:"int32",id:2},videoUrl:{type:"string",id:3},codec:{type:"ProtoPlayspaceCodecEnum",id:4}}},ProtoPlayspaceVideoSettings:{fields:{renditions:{rule:"repeated",type:"ProtoPlayspaceVideoSlideRendition",id:1}}},ProtoSlideCapabilityMetadata:{fields:{label:{type:"string",id:1}}},ProtoPlayspaceSlideCapability:{fields:{type:{type:"ProtoPlayspaceSlideCapabilitiesEnum",id:1},metadata:{type:"ProtoSlideCapabilityMetadata",id:2}}},ProtoFallbackStoryResponse:{fields:{storyId:{type:"string",id:1},activeVersionId:{type:"string",id:2}}},ProtoPlayspaceMediaMetadataResponse:{fields:{slides:{rule:"repeated",type:"ProtoPlayspaceSlideMetadata",id:1},storyTitle:{type:"string",id:2},order:{type:"ProtoPlayspaceSlideOrderEnum",id:3},storyName:{type:"string",id:4}}},ProtoPlayspaceSlideMetadata:{fields:{mediaType:{type:"ProtoMediaTypeEnum",id:1},title:{type:"string",id:2},clickUrl:{type:"string",id:3},imageUrl:{type:"string",id:4},slideDuration:{type:"int32",id:5},videoRendition:{type:"ProtoPlayspaceVideoSettings",id:6},type:{type:"ProtoPlayspaceSlideTypeEnum",id:7},coverMetadata:{type:"ProtoPlayspaceCoverMetadata",id:8},descriptionMetadata:{type:"ProtoPlayspaceDescriptionMetadata",id:9},bulletListMetadata:{type:"ProtoPlayspaceBulletListMetadata",id:10},quoteMetadata:{type:"ProtoPlayspaceQuoteMetadata",id:12},instagramMetadata:{type:"ProtoPlayspaceInstagramMetadata",id:16},capabilityList:{rule:"repeated",type:"ProtoPlayspaceSlideCapability",id:13},portraitImageUrl:{type:"string",id:14},mediaContext:{type:"ProtoMediaContextEnum",id:15},altText:{type:"string",id:17},customFields:{type:"string",id:18},keywords:{rule:"repeated",type:"string",id:19},language:{type:"string",id:20}}},ProtoPlayspaceCoverMetadata:{fields:{title:{type:"string",id:1},subtitle:{type:"string",id:2}}},ProtoPlayspaceDescriptionChunk:{fields:{text:{type:"string",id:1},colorScheme:{type:"ProtoPlayspaceColorSchemeEnum",id:2}}},ProtoPlayspaceDescriptionMetadata:{fields:{chunkList:{rule:"repeated",type:"ProtoPlayspaceDescriptionChunk",id:1},label:{type:"ProtoPlayspaceDescriptionChunk",id:2}}},ProtoBulletOptions:{fields:{title:{type:"string",id:1},description:{type:"string",id:2}}},ProtoPlayspaceBulletListMetadata:{fields:{title:{type:"string",id:1},items:{rule:"repeated",type:"ProtoBulletOptions",id:2}}},ProtoPlayspaceQuoteMetadata:{fields:{text:{type:"string",id:1},source:{type:"string",id:2}}},ProtoPlayspaceInstagramMetadata:{fields:{handle:{type:"string",id:1},createdDate:{type:"string",id:2},likes:{type:"string",id:3},comments:{type:"string",id:4}}},ProtoPlayspaceColorPrimary:{fields:{background:{type:"string",id:1,options:{default:"#F1F1F1"}},foreground:{type:"string",id:2,options:{default:"#000000"}}}},ProtoPlayspaceColorSecondary:{fields:{background:{type:"string",id:1,options:{default:"#000000 "}},foreground:{type:"string",id:2,options:{default:"#F1F1F1"}}}},ProtoPlayspaceColorAccent:{fields:{background:{type:"string",id:1},foreground:{type:"string",id:2}}},ProtoPlayspaceRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forceStoryId:{type:"string",id:8},version:{type:"int32",id:9},clientAb0:{type:"int32",id:10},clientAb1:{type:"int32",id:11},forceLineItemIds:{rule:"repeated",type:"string",id:12},customParam1:{type:"string",id:14},customParam2:{type:"string",id:15},customParam3:{type:"string",id:16},forceExploration:{type:"bool",id:17},es6:{type:"bool",id:18},bundleId:{type:"string",id:19},parseDomain:{type:"bool",id:20},implementationType:{type:"ProtoImplementationType",id:21},queryJsTargeting:{keyType:"string",type:"string",id:22},isConsentConnatix:{type:"bool",id:23,options:{default:!0}},isConsentLotame:{type:"bool",id:26},disableTracking:{type:"bool",id:27},referrer:{type:"string",id:28},customParam4:{type:"string",id:29},customParam5:{type:"string",id:30},servingRuleId:{type:"string",id:31},cnxDebug:{type:"bool",id:32},clientAb2:{type:"int32",id:33},clientAb3:{type:"int32",id:34},clientAb4:{type:"int32",id:35},clientAb5:{type:"int32",id:36},iiqEnabledAB:{type:"int32",id:37},iiqGroupAB:{type:"int32",id:38}}},ProtoPlayspace:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},endOfCycleMode:{type:"ProtoEndOfSlideCycleMode",id:4},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},slidesBetweenAds:{type:"int32",id:14},minSlidesBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},casting:{type:"bool",id:18},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:19,options:{packed:!1}},expandButton:{type:"bool",id:20},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:21},floatingMode:{type:"ProtoPlayerFloatingMode",id:22},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:23,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:24},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:25},floatingPageElement:{type:"string",id:26},floatingUseElementWidth:{type:"bool",id:27},floatingScrollPosition:{type:"ProtoPositionMode",id:28},floatingGutterX:{type:"int32",id:29},floatingGutterY:{type:"int32",id:30},floatingWidth:{type:"int32",id:31},html:{type:"string",id:35},lineItems:{rule:"repeated",type:"ProtoLineItem",id:37},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:38},css:{type:"string",id:39},sessionId:{type:"string",id:40},orientation:{type:"ProtoPlayerOrientationEnum",id:41},orientationBreakpoint:{type:"int32",id:42},activeVersion:{type:"string",id:43},storyId:{type:"string",id:44},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:50},floatingYAxisPadding:{type:"int32",id:51},contentTitleTextColor:{type:"string",id:57},useAccentColorForProgressBar:{type:"bool",id:58},primaryColorList:{type:"ProtoPlayspaceColorPrimary",id:59},secondaryColorList:{type:"ProtoPlayspaceColorSecondary",id:60},accentColorList:{type:"ProtoPlayspaceColorAccent",id:61},customJsCode:{type:"string",id:62},initializationSettingsJson:{type:"string",id:63},publisherName:{type:"string",id:64},skipAdAfter:{type:"int32",id:66,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:67},amazonTamSlotId:{type:"string",id:68},limitClientSideApiUse:{type:"bool",id:69},abTestId:{type:"string",id:70},skipMin:{type:"int32",id:71,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:72},logoResource:{type:"string",id:73},activeVersionHasInsights:{type:"bool",id:74},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:76},layout:{type:"ProtoPlayspaceLayoutEnum",id:77},hasFloatingTransition:{type:"bool",id:78,options:{default:!0}},videoPlacement:{type:"ProtoVideoPlacementEnum",id:79,options:{default:4}},revSharePercentage:{type:"double",id:80}}},ProtoPlayspaceResponse:{oneofs:{Ou:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:31,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoPlayspace",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30},IASSegmentCodes:{rule:"repeated",type:"string",id:32},AmazonTamPubId:{type:"string",id:33},tier:{type:"int32",id:34,options:{default:2}},useIntentiqUserSyncing:{type:"bool",id:35},liveRampPubId:{type:"string",id:36},region:{type:"string",id:37},supportedIdentityPartners:{rule:"repeated",type:"ProtoIdentityPartnerEnum",id:38,options:{packed:!1}},usedAdxHttpClient:{type:"bool",id:39},foundPredictionInV1:{type:"bool",id:40}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoIntentIQResponseData:{fields:{vendorName:{type:"string",id:2}}},ProtoLineItem:{oneofs:{LF:{oneof:["floorPricesNew"]},BF:{oneof:["protoIntentiqResponseData"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},protoIntentiqResponseData:{type:"ProtoIntentIQResponseData",id:63,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28,options:{default:10}},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},grossNetPercentageDifference:{type:"int32",id:64},isLexiconSupported:{type:"bool",id:65},infrastructureFee:{type:"double",id:66},optimizeFloorPrice:{type:"bool",id:67},advertiserAccountId:{type:"string",id:68},externallyManaged:{type:"bool",id:69},shouldThrottlePacing:{type:"bool",id:70},demandPartnerId:{type:"int32",id:71},advertiserAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:74},publisherAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:75},canUseConnatixDataGraph:{type:"bool",id:77},isPerformanceOverrideAd:{type:"bool",id:76},playerSize:{type:"string",id:101}}},ProtoAudienceTargetingCase:{fields:{audienceTargetingFilters:{rule:"repeated",type:"ProtoAudienceTargetingFilter",id:1}}},ProtoAudienceTargetingFilter:{fields:{rule:{type:"ProtoTargetingFilterEnum",id:1},audienceIdList:{rule:"repeated",type:"string",id:2}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoTargetingFilterEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{RF:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},ivt:{type:"bool",id:2},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoPlayspaceCodecEnum:{values:{h264:0,hevc:1}},ProtoPlayspaceSlideOrderEnum:{values:{Default:0,Random:1,AlphabeticalAscending:2,AlphabeticalDescending:3}},ProtoPlayerOrientationEnum:{values:{Mixed:0,Portrait:1,Landscape:2}},ProtoEndOfSlideCycleMode:{values:{Loop:0,Stop:1}},ProtoPlayspaceColorSchemeEnum:{values:{Default:0,Accent:1,Primary:2,Secondary:3}},ProtoPlayspaceLayoutEnum:{values:{TopProgressBar:0,BottomProgressBar:1}},ProtoPlayspaceSlideTypeEnum:{values:{Default:0,Cover:1,Description:2,BulletList:3,Stock:4,Quote:5,Instagram:6}},ProtoPlayspaceSlideCapabilitiesEnum:{values:{VolumeControls:0,PlaybackControls:1,PlaylistControls:2,CtaButton:3,TopStoryTitle:4,TopSlideTitle:5}},ProtoMediaContextEnum:{values:{None:0,Logo:1}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoTargetingFilterEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1,Standalone:5}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdRollTypeEnum:{values:{Outstream:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoVideoPlacementEnum:{values:{InStream:1,AccompanyingContent:2,Interstitial:3,NoContentStandalone:4}},ProtoIdentityPartnerEnum:{values:{None:0,IntentIQ:1,LiveIntent:2,ID5:3}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}}})})?s.apply(e,n):s)||(t.exports=r)},1418:(t,e,i)=>{const{Parser:s}=i(1682);t.exports=s},9479:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg>\n'},3409:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"/></svg>\n'},9040:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg>'},427:t=>{"use strict";t.exports=new Promise((t=>{const e="https://cd"+(window.cnxEnvParam?"-"+window.cnxEnvParam:"s")+"."+(window.cnxIsOvpDomain?"elements.video":"connatix.com")+"/p/427132/cSyncRemoteEntry.js",i=document.createElement("script");i.src=e,i.onload=()=>{t(window.CookieSync)},document.head.appendChild(i)}))},1549:(t,e,i)=>{"use strict";function s(t,e){if(!t)throw new Error(e)}i.r(e),i.d(e,{Any:()=>pi,Api:()=>Wi,BinaryReader:()=>B,BinaryWriter:()=>R,BoolValue:()=>Si,BytesValue:()=>xi,CodeGeneratorRequest:()=>Bi,CodeGeneratorResponse:()=>Di,CodeGeneratorResponse_Feature:()=>Ni,CodeGeneratorResponse_File:()=>ji,DescriptorProto:()=>de,DescriptorProto_ExtensionRange:()=>le,DescriptorProto_ReservedRange:()=>ue,DoubleValue:()=>bi,Duration:()=>ui,Edition:()=>Jt,Empty:()=>fi,Enum:()=>Ji,EnumDescriptorProto:()=>ve,EnumDescriptorProto_EnumReservedRange:()=>ye,EnumOptions:()=>xe,EnumValue:()=>Gi,EnumValueDescriptorProto:()=>be,EnumValueOptions:()=>ke,ExtensionRangeOptions:()=>pe,ExtensionRangeOptions_Declaration:()=>fe,ExtensionRangeOptions_VerificationState:()=>Gt,FeatureSet:()=>Me,FeatureSetDefaults:()=>Re,FeatureSetDefaults_FeatureSetEditionDefault:()=>Be,FeatureSet_EnumType:()=>ie,FeatureSet_FieldPresence:()=>ee,FeatureSet_JsonFormat:()=>oe,FeatureSet_MessageEncoding:()=>re,FeatureSet_RepeatedFieldEncoding:()=>se,FeatureSet_Utf8Validation:()=>ne,Field:()=>Hi,FieldDescriptorProto:()=>me,FieldDescriptorProto_Label:()=>Wt,FieldDescriptorProto_Type:()=>zt,FieldMask:()=>mi,FieldOptions:()=>_e,FieldOptions_CType:()=>Xt,FieldOptions_EditionDefault:()=>Se,FieldOptions_JSType:()=>Qt,FieldOptions_OptionRetention:()=>Kt,FieldOptions_OptionTargetType:()=>Zt,Field_Cardinality:()=>Vi,Field_Kind:()=>$i,FileDescriptorProto:()=>ce,FileDescriptorSet:()=>he,FileOptions:()=>Pe,FileOptions_OptimizeMode:()=>Yt,FloatValue:()=>Ii,GeneratedCodeInfo:()=>Fe,GeneratedCodeInfo_Annotation:()=>$e,GeneratedCodeInfo_Annotation_Semantic:()=>ae,Int32Value:()=>Ti,Int64Value:()=>wi,ListValue:()=>yi,LongType:()=>w,Message:()=>y,MessageOptions:()=>Te,Method:()=>Yi,MethodDescriptorProto:()=>we,MethodIdempotency:()=>Ht,MethodKind:()=>qt,MethodOptions:()=>Ce,MethodOptions_IdempotencyLevel:()=>te,Mixin:()=>Xi,NullValue:()=>ai,OneofDescriptorProto:()=>ge,OneofOptions:()=>Ae,Option:()=>zi,ScalarType:()=>I,ServiceDescriptorProto:()=>Ie,ServiceOptions:()=>Ee,SourceCodeInfo:()=>De,SourceCodeInfo_Location:()=>Ne,SourceContext:()=>Ui,StringValue:()=>Ai,Struct:()=>gi,Syntax:()=>Fi,Timestamp:()=>li,Type:()=>qi,UInt32Value:()=>_i,UInt64Value:()=>Pi,UninterpretedOption:()=>Oe,UninterpretedOption_NamePart:()=>Le,Value:()=>vi,Version:()=>Ri,WireType:()=>M,codegenInfo:()=>Ut,createDescriptorSet:()=>qe,createRegistry:()=>di,createRegistryFromDescriptors:()=>Ci,proto2:()=>Rt,proto3:()=>Lt,protoBase64:()=>st,protoDelimited:()=>Vt,protoDouble:()=>Dt,protoInt64:()=>L,toPlainMessage:()=>Li});const n=34028234663852886e22,r=-34028234663852886e22,o=4294967295,a=2147483647,h=-2147483648;function c(t){if("number"!=typeof t)throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>a||t<h)throw new Error("invalid int 32: "+t)}function d(t){if("number"!=typeof t)throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>o||t<0)throw new Error("invalid uint 32: "+t)}function l(t){if("number"!=typeof t)throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>n||t<r))throw new Error("invalid float 32: "+t)}const u=Symbol("@bufbuild/protobuf/enum-type");function p(t){const e=t[u];return s(e,"missing enum type on enum object"),e}function f(t,e,i,s){t[u]=m(e,i.map((e=>({no:e.no,name:e.name,localName:t[e.no]}))),s)}function m(t,e,i){const s=Object.create(null),n=Object.create(null),r=[];for(const t of e){const e=v(t);r.push(e),s[t.name]=e,n[t.no]=e}return{typeName:t,values:r,findName:t=>s[t],findNumber:t=>n[t]}}function g(t,e,i){const s={};for(const t of e){const e=v(t);s[e.localName]=e.no,s[e.no]=e.localName}return f(s,t,e,i),s}function v(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class y{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,e){const i=this.getType().runtime.bin,s=i.makeReadOptions(e);return i.readMessage(this,s.readerFactory(t),t.byteLength,s),this}fromJson(t,e){const i=this.getType(),s=i.runtime.json,n=s.makeReadOptions(e);return s.readMessage(i,t,n,this),this}fromJsonString(t,e){let i;try{i=JSON.parse(t)}catch(t){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${t instanceof Error?t.message:String(t)}`)}return this.fromJson(i,e)}toBinary(t){const e=this.getType().runtime.bin,i=e.makeWriteOptions(t),s=i.writerFactory();return e.writeMessage(this,s,i),s.finish()}toJson(t){const e=this.getType().runtime.json,i=e.makeWriteOptions(t);return e.writeMessage(this,i)}toJsonString(t){var e;const i=this.toJson(t);return JSON.stringify(i,null,null!==(e=null==t?void 0:t.prettySpaces)&&void 0!==e?e:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function b(t,e,i,s){return{syntax:t,json:e,bin:i,util:s,makeMessageType(t,e,i){return function(t,e,i,s){var n;const r=null!==(n=null==s?void 0:s.localName)&&void 0!==n?n:e.substring(e.lastIndexOf(".")+1),o={[r]:function(e){t.util.initFields(this),t.util.initPartial(e,this)}}[r];return Object.setPrototypeOf(o.prototype,new y),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(i),fromBinary:(t,e)=>(new o).fromBinary(t,e),fromJson:(t,e)=>(new o).fromJson(t,e),fromJsonString:(t,e)=>(new o).fromJsonString(t,e),equals:(e,i)=>t.util.equals(o,e,i)}),o}(this,t,e,i)},makeEnum:g,makeEnumType:m,getEnumType:p}}var I,w;function P(){let t=0,e=0;for(let i=0;i<28;i+=7){let s=this.buf[this.pos++];if(t|=(127&s)<<i,0==(128&s))return this.assertBounds(),[t,e]}let i=this.buf[this.pos++];if(t|=(15&i)<<28,e=(112&i)>>4,0==(128&i))return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let s=this.buf[this.pos++];if(e|=(127&s)<<i,0==(128&s))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function T(t,e,i){for(let s=0;s<28;s+=7){const n=t>>>s,r=!(n>>>7==0&&0==e),o=255&(r?128|n:n);if(i.push(o),!r)return}const s=t>>>28&15|(7&e)<<4,n=!(e>>3==0);if(i.push(255&(n?128|s:s)),n){for(let t=3;t<31;t+=7){const s=e>>>t,n=!(s>>>7==0),r=255&(n?128|s:s);if(i.push(r),!n)return}i.push(e>>>31&1)}}!function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"}(I||(I={})),function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"}(w||(w={}));const _=4294967296;function S(t){const e="-"===t[0];e&&(t=t.slice(1));const i=1e6;let s=0,n=0;function r(e,r){const o=Number(t.slice(e,r));n*=i,s=s*i+o,s>=_&&(n+=s/_|0,s%=_)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),e?k(s,n):x(s,n)}function A(t,e){if(({lo:t,hi:e}=function(t,e){return{lo:t>>>0,hi:e>>>0}}(t,e)),e<=2097151)return String(_*e+t);const i=16777215&(t>>>24|e<<8),s=e>>16&65535;let n=(16777215&t)+6777216*i+6710656*s,r=i+8147497*s,o=2*s;const a=1e7;return n>=a&&(r+=Math.floor(n/a),n%=a),r>=a&&(o+=Math.floor(r/a),r%=a),o.toString()+E(r)+E(n)}function x(t,e){return{lo:0|t,hi:0|e}}function k(t,e){return e=~e,t?t=1+~t:e+=1,x(t,e)}const E=t=>{const e=String(t);return"0000000".slice(e.length)+e};function C(t,e){if(t>=0){for(;t>127;)e.push(127&t|128),t>>>=7;e.push(t)}else{for(let i=0;i<9;i++)e.push(127&t|128),t>>=7;e.push(1)}}function O(){let t=this.buf[this.pos++],e=127&t;if(0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<7,0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<14,0==(128&t))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(127&t)<<21,0==(128&t))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(15&t)<<28;for(let e=5;0!=(128&t)&&e<10;e++)t=this.buf[this.pos++];if(0!=(128&t))throw new Error("invalid varint");return this.assertBounds(),e>>>0}const L=function(){const t=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof t.getBigInt64&&"function"==typeof t.getBigUint64&&"function"==typeof t.setBigInt64&&"function"==typeof t.setBigUint64&&("object"!=typeof process||"1"!=={DEBUG_MODE:!1}.BUF_BIGINT_DISABLE)){const e=BigInt("-9223372036854775808"),i=BigInt("9223372036854775807"),s=BigInt("0"),n=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(t){const s="bigint"==typeof t?t:BigInt(t);if(s>i||s<e)throw new Error(`int64 invalid: ${t}`);return s},uParse(t){const e="bigint"==typeof t?t:BigInt(t);if(e>n||e<s)throw new Error(`uint64 invalid: ${t}`);return e},enc(e){return t.setBigInt64(0,this.parse(e),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(e){return t.setBigInt64(0,this.uParse(e),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec:(e,i)=>(t.setInt32(0,e,!0),t.setInt32(4,i,!0),t.getBigInt64(0,!0)),uDec:(e,i)=>(t.setInt32(0,e,!0),t.setInt32(4,i,!0),t.getBigUint64(0,!0))}}const e=t=>s(/^-?[0-9]+$/.test(t),`int64 invalid: ${t}`),i=t=>s(/^[0-9]+$/.test(t),`uint64 invalid: ${t}`);return{zero:"0",supported:!1,parse:t=>("string"!=typeof t&&(t=t.toString()),e(t),t),uParse:t=>("string"!=typeof t&&(t=t.toString()),i(t),t),enc:t=>("string"!=typeof t&&(t=t.toString()),e(t),S(t)),uEnc:t=>("string"!=typeof t&&(t=t.toString()),i(t),S(t)),dec:(t,e)=>function(t,e){let i=x(t,e);const s=2147483648&i.hi;s&&(i=k(i.lo,i.hi));const n=A(i.lo,i.hi);return s?"-"+n:n}(t,e),uDec:(t,e)=>A(t,e)}}();var M;!function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"}(M||(M={}));class R{constructor(t){this.stack=[],this.textEncoder=null!=t?t:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let e=0;e<this.chunks.length;e++)t+=this.chunks[e].length;let e=new Uint8Array(t),i=0;for(let t=0;t<this.chunks.length;t++)e.set(this.chunks[t],i),i+=this.chunks[t].length;return this.chunks=[],e}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),e=this.stack.pop();if(!e)throw new Error("invalid state, fork stack empty");return this.chunks=e.chunks,this.buf=e.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,e){return this.uint32((t<<3|e)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(d(t);t>127;)this.buf.push(127&t|128),t>>>=7;return this.buf.push(t),this}int32(t){return c(t),C(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let e=this.textEncoder.encode(t);return this.uint32(e.byteLength),this.raw(e)}float(t){l(t);let e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),this.raw(e)}double(t){let e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),this.raw(e)}fixed32(t){d(t);let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),this.raw(e)}sfixed32(t){c(t);let e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),this.raw(e)}sint32(t){return c(t),C(t=(t<<1^t>>31)>>>0,this.buf),this}sfixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),s=L.enc(t);return i.setInt32(0,s.lo,!0),i.setInt32(4,s.hi,!0),this.raw(e)}fixed64(t){let e=new Uint8Array(8),i=new DataView(e.buffer),s=L.uEnc(t);return i.setInt32(0,s.lo,!0),i.setInt32(4,s.hi,!0),this.raw(e)}int64(t){let e=L.enc(t);return T(e.lo,e.hi,this.buf),this}sint64(t){let e=L.enc(t),i=e.hi>>31;return T(e.lo<<1^i,(e.hi<<1|e.lo>>>31)^i,this.buf),this}uint64(t){let e=L.uEnc(t);return T(e.lo,e.hi,this.buf),this}}class B{constructor(t,e){this.varint64=P,this.uint32=O,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=null!=e?e:new TextDecoder}tag(){let t=this.uint32(),e=t>>>3,i=7&t;if(e<=0||i<0||i>5)throw new Error("illegal tag: field no "+e+" wire type "+i);return[e,i]}skip(t){let e=this.pos;switch(t){case M.Varint:for(;128&this.buf[this.pos++];);break;case M.Bit64:this.pos+=4;case M.Bit32:this.pos+=4;break;case M.LengthDelimited:let e=this.uint32();this.pos+=e;break;case M.StartGroup:let i;for(;(i=this.tag()[1])!==M.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(e,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let t=this.uint32();return t>>>1^-(1&t)}int64(){return L.dec(...this.varint64())}uint64(){return L.uDec(...this.varint64())}sint64(){let[t,e]=this.varint64(),i=-(1&t);return t=(t>>>1|(1&e)<<31)^i,e=e>>>1^i,L.dec(t,e)}bool(){let[t,e]=this.varint64();return 0!==t||0!==e}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return L.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return L.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),e=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(e,e+t)}string(){return this.textDecoder.decode(this.bytes())}}function D(t,e){return e instanceof y||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}const N={"google.protobuf.DoubleValue":I.DOUBLE,"google.protobuf.FloatValue":I.FLOAT,"google.protobuf.Int64Value":I.INT64,"google.protobuf.UInt64Value":I.UINT64,"google.protobuf.Int32Value":I.INT32,"google.protobuf.UInt32Value":I.UINT32,"google.protobuf.BoolValue":I.BOOL,"google.protobuf.StringValue":I.STRING,"google.protobuf.BytesValue":I.BYTES};function F(t,e,i){if(e===i)return!0;if(t==I.BYTES){if(!(e instanceof Uint8Array&&i instanceof Uint8Array))return!1;if(e.length!==i.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==i[t])return!1;return!0}switch(t){case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return e==i}return!1}function $(t,e){switch(t){case I.BOOL:return!1;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return 0==e?L.zero:"0";case I.DOUBLE:case I.FLOAT:return 0;case I.BYTES:return new Uint8Array(0);case I.STRING:return"";default:return 0}}function V(t,e){const i=void 0===e;let s=M.Varint,n=0===e;switch(t){case I.STRING:n=i||!e.length,s=M.LengthDelimited;break;case I.BOOL:n=!1===e;break;case I.DOUBLE:s=M.Bit64;break;case I.FLOAT:s=M.Bit32;break;case I.INT64:case I.UINT64:n=i||0==e;break;case I.FIXED64:n=i||0==e,s=M.Bit64;break;case I.BYTES:n=i||!e.byteLength,s=M.LengthDelimited;break;case I.FIXED32:case I.SFIXED32:s=M.Bit32;break;case I.SFIXED64:n=i||0==e,s=M.Bit64;break;case I.SINT64:n=i||0==e}return[s,I[t].toLowerCase(),i||n]}const j=Symbol("@bufbuild/protobuf/unknown-fields"),U={readUnknownFields:!0,readerFactory:t=>new B(t)},q={writeUnknownFields:!0,writerFactory:()=>new R};function H(t){return t?Object.assign(Object.assign({},U),t):U}function J(t){return t?Object.assign(Object.assign({},q),t):q}function G(){return{makeReadOptions:H,makeWriteOptions:J,listUnknownFields(t){var e;return null!==(e=t[j])&&void 0!==e?e:[]},discardUnknownFields(t){delete t[j]},writeUnknownFields(t,e){const i=t[j];if(i)for(const t of i)e.tag(t.no,t.wireType).raw(t.data)},onUnknownField(t,e,i,s){const n=t;Array.isArray(n[j])||(n[j]=[]),n[j].push({no:e,wireType:i,data:s})},readMessage(t,e,i,s,n){const r=t.getType(),o=n?e.len:e.pos+i;let a,h;for(;e.pos<o&&([a,h]=e.tag(),h!=M.EndGroup);){const i=r.fields.find(a);if(!i){const i=e.skip(h);s.readUnknownFields&&this.onUnknownField(t,a,h,i);continue}let n=t,o=i.repeated,c=i.localName;switch(i.oneof&&(n=n[i.oneof.localName],n.case!=c&&delete n.value,n.case=c,c="value"),i.kind){case"scalar":case"enum":const t="enum"==i.kind?I.INT32:i.T;let r=X;if("scalar"==i.kind&&i.L>0&&(r=Y),o){let i=n[c];if(h==M.LengthDelimited&&t!=I.STRING&&t!=I.BYTES){let s=e.uint32()+e.pos;for(;e.pos<s;)i.push(r(e,t))}else i.push(r(e,t))}else n[c]=r(e,t);break;case"message":const a=i.T;o?n[c].push(z(e,new a,s,i)):n[c]instanceof y?z(e,n[c],s,i):(n[c]=z(e,new a,s,i),!a.fieldWrapper||i.oneof||i.repeated||(n[c]=a.fieldWrapper.unwrapField(n[c])));break;case"map":let[d,l]=W(i,e,s);n[c][d]=l}}if(n&&(h!=M.EndGroup||a!==i))throw new Error("invalid end group tag")}}}function z(t,e,i,s){const n=e.getType().runtime.bin,r=null==s?void 0:s.delimited;return n.readMessage(e,t,r?null==s?void 0:s.no:t.uint32(),i,r),e}function W(t,e,i){const s=e.uint32(),n=e.pos+s;let r,o;for(;e.pos<n;){let[s]=e.tag();switch(s){case 1:r=X(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=X(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=z(e,new t.V.T,i,void 0)}}}if(void 0===r){let e=$(t.K,w.BIGINT);r=t.K==I.BOOL?e.toString():e}if("string"!=typeof r&&"number"!=typeof r&&(r=r.toString()),void 0===o)switch(t.V.kind){case"scalar":o=$(t.V.T,w.BIGINT);break;case"enum":o=0;break;case"message":o=new t.V.T}return[r,o]}function Y(t,e){const i=X(t,e);return"bigint"==typeof i?i.toString():i}function X(t,e){switch(e){case I.STRING:return t.string();case I.BOOL:return t.bool();case I.DOUBLE:return t.double();case I.FLOAT:return t.float();case I.INT32:return t.int32();case I.INT64:return t.int64();case I.UINT64:return t.uint64();case I.FIXED64:return t.fixed64();case I.BYTES:return t.bytes();case I.FIXED32:return t.fixed32();case I.SFIXED32:return t.sfixed32();case I.SFIXED64:return t.sfixed64();case I.SINT64:return t.sint64();case I.UINT32:return t.uint32();case I.SINT32:return t.sint32()}}function Q(t,e,i,n,r){t.tag(i.no,M.LengthDelimited),t.fork();let o=n;switch(i.K){case I.INT32:case I.FIXED32:case I.UINT32:case I.SFIXED32:case I.SINT32:o=Number.parseInt(n);break;case I.BOOL:s("true"==n||"false"==n),o="true"==n}switch(Z(t,i.K,1,o,!0),i.V.kind){case"scalar":Z(t,i.V.T,2,r,!0);break;case"enum":Z(t,I.INT32,2,r,!0);break;case"message":t.tag(2,M.LengthDelimited).bytes(r.toBinary(e))}t.join()}function K(t,e,i,s){if(void 0!==s){const n=D(i.T,s);(null==i?void 0:i.delimited)?t.tag(i.no,M.StartGroup).raw(n.toBinary(e)).tag(i.no,M.EndGroup):t.tag(i.no,M.LengthDelimited).bytes(n.toBinary(e))}}function Z(t,e,i,s,n){let[r,o,a]=V(e,s);a&&!n||t.tag(i,r)[o](s)}function tt(t,e,i,s){if(!s.length)return;t.tag(i,M.LengthDelimited).fork();let[,n]=V(e);for(let e=0;e<s.length;e++)t[n](s[e]);t.join()}let et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),it=[];for(let t=0;t<et.length;t++)it[et[t].charCodeAt(0)]=t;it["-".charCodeAt(0)]=et.indexOf("+"),it["_".charCodeAt(0)]=et.indexOf("/");const st={dec(t){let e=3*t.length/4;"="==t[t.length-2]?e-=2:"="==t[t.length-1]&&(e-=1);let i,s=new Uint8Array(e),n=0,r=0,o=0;for(let e=0;e<t.length;e++){if(i=it[t.charCodeAt(e)],void 0===i)switch(t[e]){case"=":r=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:o=i,r=1;break;case 1:s[n++]=o<<2|(48&i)>>4,o=i,r=2;break;case 2:s[n++]=(15&o)<<4|(60&i)>>2,o=i,r=3;break;case 3:s[n++]=(3&o)<<6|i,r=0}}if(1==r)throw Error("invalid base64 string.");return s.subarray(0,n)},enc(t){let e,i="",s=0,n=0;for(let r=0;r<t.length;r++)switch(e=t[r],s){case 0:i+=et[e>>2],n=(3&e)<<4,s=1;break;case 1:i+=et[n|e>>4],n=(15&e)<<2,s=2;break;case 2:i+=et[n|e>>6],i+=et[63&e],s=0}return s&&(i+=et[n],i+="=",1==s&&(i+="=")),i}},nt={ignoreUnknownFields:!1},rt={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function ot(t){return t?Object.assign(Object.assign({},nt),t):nt}function at(t){return t?Object.assign(Object.assign({},rt),t):rt}function ht(t){const e=t(ut,pt);return{makeReadOptions:ot,makeWriteOptions:at,readMessage(t,e,i,s){if(null==e||Array.isArray(e)||"object"!=typeof e)throw new Error(`cannot decode message ${t.typeName} from JSON: ${this.debug(e)}`);s=null!=s?s:new t;const n={};for(const[r,o]of Object.entries(e)){const e=t.fields.findJsonName(r);if(!e){if(!i.ignoreUnknownFields)throw new Error(`cannot decode message ${t.typeName} from JSON: key "${r}" is unknown`);continue}let a=e.localName,h=s;if(e.oneof){if(null===o&&"scalar"==e.kind)continue;const i=n[e.oneof.localName];if(i)throw new Error(`cannot decode message ${t.typeName} from JSON: multiple keys for oneof "${e.oneof.name}" present: "${i}", "${r}"`);n[e.oneof.localName]=r,h=h[e.oneof.localName]={case:a},a="value"}if(e.repeated){if(null===o)continue;if(!Array.isArray(o))throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`);const s=h[a];for(const n of o){if(null===n)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(n)}`);let r;switch(e.kind){case"message":r=e.T.fromJson(n,i);break;case"enum":if(r=lt(e.T,n,i.ignoreUnknownFields),void 0===r)continue;break;case"scalar":try{r=dt(e.T,n,e.L)}catch(i){let s=`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(n)}`;throw i instanceof Error&&i.message.length>0&&(s+=`: ${i.message}`),new Error(s)}}s.push(r)}}else if("map"==e.kind){if(null===o)continue;if(Array.isArray(o)||"object"!=typeof o)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`);const s=h[a];for(const[n,r]of Object.entries(o)){if(null===r)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: map value null`);let a;switch(e.V.kind){case"message":a=e.V.T.fromJson(r,i);break;case"enum":if(a=lt(e.V.T,r,i.ignoreUnknownFields),void 0===a)continue;break;case"scalar":try{a=dt(e.V.T,r,w.BIGINT)}catch(i){let s=`cannot decode map value for field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`;throw i instanceof Error&&i.message.length>0&&(s+=`: ${i.message}`),new Error(s)}}try{s[dt(e.K,e.K==I.BOOL?"true"==n||"false"!=n&&n:n,w.BIGINT).toString()]=a}catch(i){let s=`cannot decode map key for field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`;throw i instanceof Error&&i.message.length>0&&(s+=`: ${i.message}`),new Error(s)}}}else switch(e.kind){case"message":const s=e.T;if(null===o&&"google.protobuf.Value"!=s.typeName){if(e.oneof)throw new Error(`cannot decode field ${t.typeName}.${e.name} from JSON: null is invalid for oneof field "${r}"`);continue}h[a]instanceof y?h[a].fromJson(o,i):(h[a]=s.fromJson(o,i),s.fieldWrapper&&!e.oneof&&(h[a]=s.fieldWrapper.unwrapField(h[a])));break;case"enum":const n=lt(e.T,o,i.ignoreUnknownFields);void 0!==n&&(h[a]=n);break;case"scalar":try{h[a]=dt(e.T,o,e.L)}catch(i){let s=`cannot decode field ${t.typeName}.${e.name} from JSON: ${this.debug(o)}`;throw i instanceof Error&&i.message.length>0&&(s+=`: ${i.message}`),new Error(s)}}}return s},writeMessage(t,i){const s=t.getType(),n={};let r;try{for(const o of s.fields.byMember()){let s;if("oneof"==o.kind){const n=t[o.localName];if(void 0===n.value)continue;if(r=o.findField(n.case),!r)throw"oneof case not found: "+n.case;s=e(r,n.value,i)}else r=o,s=e(r,t[r.localName],i);void 0!==s&&(n[i.useProtoFieldName?r.name:r.jsonName]=s)}}catch(t){const e=r?`cannot encode field ${s.typeName}.${r.name} to JSON`:`cannot encode message ${s.typeName} to JSON`,i=t instanceof Error?t.message:String(t);throw new Error(e+(i.length>0?`: ${i}`:""))}return n},readScalar:dt,writeScalar:pt,debug:ct}}function ct(t){if(null===t)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return String(t)}}function dt(t,e,i){switch(t){case I.DOUBLE:case I.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e)break;if("string"==typeof e&&e.trim().length!==e.length)break;if("string"!=typeof e&&"number"!=typeof e)break;const s=Number(e);if(Number.isNaN(s))break;if(!Number.isFinite(s))break;return t==I.FLOAT&&l(s),s;case I.INT32:case I.FIXED32:case I.SFIXED32:case I.SINT32:case I.UINT32:if(null===e)return 0;let n;if("number"==typeof e?n=e:"string"==typeof e&&e.length>0&&e.trim().length===e.length&&(n=Number(e)),void 0===n)break;return t==I.UINT32?d(n):c(n),n;case I.INT64:case I.SFIXED64:case I.SINT64:if(null===e)return L.zero;if("number"!=typeof e&&"string"!=typeof e)break;const r=L.parse(e);return i?r.toString():r;case I.FIXED64:case I.UINT64:if(null===e)return L.zero;if("number"!=typeof e&&"string"!=typeof e)break;const o=L.uParse(e);return i?o.toString():o;case I.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case I.STRING:if(null===e)return"";if("string"!=typeof e)break;try{encodeURIComponent(e)}catch(t){throw new Error("invalid UTF8")}return e;case I.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return st.dec(e)}throw new Error}function lt(t,e,i){if(null===e)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const s=t.findName(e);if(s||i)return null==s?void 0:s.no}throw new Error(`cannot decode enum ${t.typeName} from JSON: ${ct(e)}`)}function ut(t,e,i,s){var n;if(void 0===e)return e;if(0===e&&!i)return;if(s)return e;if("google.protobuf.NullValue"==t.typeName)return null;const r=t.findNumber(e);return null!==(n=null==r?void 0:r.name)&&void 0!==n?n:e}function pt(t,e,i){if(void 0!==e)switch(t){case I.INT32:case I.SFIXED32:case I.SINT32:case I.FIXED32:case I.UINT32:return s("number"==typeof e),0!=e||i?e:void 0;case I.FLOAT:case I.DOUBLE:return s("number"==typeof e),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":0!==e||i?e:void 0;case I.STRING:return s("string"==typeof e),e.length>0||i?e:void 0;case I.BOOL:return s("boolean"==typeof e),e||i?e:void 0;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:return s("bigint"==typeof e||"string"==typeof e||"number"==typeof e),i||0!=e?e.toString(10):void 0;case I.BYTES:return s(e instanceof Uint8Array),i||e.byteLength>0?st.enc(e):void 0}}function ft(){return{setEnumType:f,initPartial(t,e){if(void 0===t)return;const i=e.getType();for(const s of i.fields.byMember()){const i=s.localName,n=e,r=t;if(void 0!==r[i])switch(s.kind){case"oneof":const t=r[i].case;if(void 0===t)continue;const e=s.findField(t);let o=r[i].value;!e||"message"!=e.kind||o instanceof e.T?e&&"scalar"===e.kind&&e.T===I.BYTES&&(o=gt(o)):o=new e.T(o),n[i]={case:t,value:o};break;case"scalar":case"enum":let a=r[i];s.T===I.BYTES&&(a=s.repeated?a.map(gt):gt(a)),n[i]=a;break;case"map":switch(s.V.kind){case"scalar":case"enum":if(s.V.T===I.BYTES)for(const[t,e]of Object.entries(r[i]))n[i][t]=gt(e);else Object.assign(n[i],r[i]);break;case"message":const t=s.V.T;for(const e of Object.keys(r[i])){let s=r[i][e];t.fieldWrapper||(s=new t(s)),n[i][e]=s}}break;case"message":const h=s.T;if(s.repeated)n[i]=r[i].map((t=>t instanceof h?t:new h(t)));else if(void 0!==r[i]){const t=r[i];h.fieldWrapper?"google.protobuf.BytesValue"===h.typeName?n[i]=gt(t):n[i]=t:n[i]=t instanceof h?t:new h(t)}}}},equals:(t,e,i)=>e===i||!(!e||!i)&&t.fields.byMember().every((t=>{const s=e[t.localName],n=i[t.localName];if(t.repeated){if(s.length!==n.length)return!1;switch(t.kind){case"message":return s.every(((e,i)=>t.T.equals(e,n[i])));case"scalar":return s.every(((e,i)=>F(t.T,e,n[i])));case"enum":return s.every(((t,e)=>F(I.INT32,t,n[e])))}throw new Error(`repeated cannot contain ${t.kind}`)}switch(t.kind){case"message":return t.T.equals(s,n);case"enum":return F(I.INT32,s,n);case"scalar":return F(t.T,s,n);case"oneof":if(s.case!==n.case)return!1;const e=t.findField(s.case);if(void 0===e)return!0;switch(e.kind){case"message":return e.T.equals(s.value,n.value);case"enum":return F(I.INT32,s.value,n.value);case"scalar":return F(e.T,s.value,n.value)}throw new Error(`oneof cannot contain ${e.kind}`);case"map":const i=Object.keys(s).concat(Object.keys(n));switch(t.V.kind){case"message":const e=t.V.T;return i.every((t=>e.equals(s[t],n[t])));case"enum":return i.every((t=>F(I.INT32,s[t],n[t])));case"scalar":const r=t.V.T;return i.every((t=>F(r,s[t],n[t])))}}})),clone(t){const e=t.getType(),i=new e,s=i;for(const i of e.fields.byMember()){const e=t[i.localName];let n;if(i.repeated)n=e.map(mt);else if("map"==i.kind){n=s[i.localName];for(const[t,i]of Object.entries(e))n[t]=mt(i)}else if("oneof"==i.kind){n=i.findField(e.case)?{case:e.case,value:mt(e.value)}:{case:void 0}}else n=mt(e);s[i.localName]=n}return i}}}function mt(t){if(void 0===t)return t;if(t instanceof y)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function gt(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class vt{constructor(t,e){this.eV=t,this.iV=e}findJsonName(t){if(!this.jsonNames){const t={};for(const e of this.list())t[e.jsonName]=t[e.name]=e;this.jsonNames=t}return this.jsonNames[t]}find(t){if(!this.numbers){const t={};for(const e of this.list())t[e.no]=e;this.numbers=t}return this.numbers[t]}list(){return this.all||(this.all=this.iV(this.eV)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((t,e)=>t.no-e.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let e;for(const i of this.list())i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}return this.members}}function yt(t){switch(t.kind){case"field":return bt(t.name,void 0!==t.oneof);case"oneof":return It(t.name);case"enum":case"message":case"service":{const e=t.file.proto.package,i=void 0===e?0:e.length+1,s=t.typeName.substring(i).replace(/\./g,"_");return Et(Ct(s))}case"enum_value":{const e=t.parent.sharedPrefix;if(void 0===e)return t.name;const i=t.name.substring(e.length);return Et(i)}case"rpc":{let e=t.name;return 0==e.length?e:(e=e[0].toLowerCase()+e.substring(1),Et(e))}}}function bt(t,e){const i=Tt(t);return e?i:Et(kt(i))}function It(t){return bt(t,!1)}const wt=Tt;function Pt(t,e){const i=((s=t).substring(0,1)+s.substring(1).replace(/[A-Z]/g,(t=>"_"+t))).toLowerCase()+"_";var s;for(const t of e){if(!t.toLowerCase().startsWith(i))return;const e=t.substring(i.length);if(0==e.length)return;if(/^\d/.test(e))return}return i}function Tt(t){let e=!1;const i=[];for(let s=0;s<t.length;s++){let n=t.charAt(s);switch(n){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i.push(n),e=!1;break;default:e&&(e=!1,n=n.toUpperCase()),i.push(n)}}return i.join("")}const _t=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","enum","implements","interface","let","package","private","protected","public","static","Object","bigint","number","boolean","string","object","globalThis","Uint8Array","Partial"]),St=new Set(["constructor","toString","toJSON","valueOf"]),At=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),xt=t=>`${t}$`,kt=t=>At.has(t)?xt(t):t,Et=t=>St.has(t)?xt(t):t,Ct=t=>_t.has(t)?xt(t):t;class Ot{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=It(t)}addField(t){s(t.oneof===this,`field ${t.name} not one of ${this.name}`),this.fields.push(t)}findField(t){if(!this.sV){this.sV=Object.create(null);for(let t=0;t<this.fields.length;t++)this.sV[this.fields[t].localName]=this.fields[t]}return this.sV[t]}}const Lt=b("proto3",ht(((t,e)=>function(i,n,r){if("map"==i.kind){const o={};switch(i.V.kind){case"scalar":for(const[t,r]of Object.entries(n)){const n=e(i.V.T,r,!0);s(void 0!==n),o[t.toString()]=n}break;case"message":for(const[t,e]of Object.entries(n))o[t.toString()]=e.toJson(r);break;case"enum":const a=i.V.T;for(const[e,i]of Object.entries(n)){s(void 0===i||"number"==typeof i);const n=t(a,i,!0,r.enumAsInteger);s(void 0!==n),o[e.toString()]=n}}return r.emitDefaultValues||Object.keys(o).length>0?o:void 0}if(i.repeated){const s=[];switch(i.kind){case"scalar":for(let t=0;t<n.length;t++)s.push(e(i.T,n[t],!0));break;case"enum":for(let e=0;e<n.length;e++)s.push(t(i.T,n[e],!0,r.enumAsInteger));break;case"message":for(let t=0;t<n.length;t++)s.push(D(i.T,n[t]).toJson(r))}return r.emitDefaultValues||s.length>0?s:void 0}switch(i.kind){case"scalar":return e(i.T,n,!!i.oneof||i.opt||r.emitDefaultValues);case"enum":return t(i.T,n,!!i.oneof||i.opt||r.emitDefaultValues,r.enumAsInteger);case"message":return void 0!==n?D(i.T,n).toJson(r):void 0}})),Object.assign(Object.assign({},G()),{writeMessage(t,e,i){const s=t.getType();for(const n of s.fields.byNumber()){let s,r=n.repeated,o=n.localName;if(n.oneof){const e=t[n.oneof.localName];if(e.case!==o)continue;s=e.value}else s=t[o];switch(n.kind){case"scalar":case"enum":let t="enum"==n.kind?I.INT32:n.T;if(r)if(n.packed)tt(e,t,n.no,s);else for(const i of s)Z(e,t,n.no,i,!0);else void 0!==s&&Z(e,t,n.no,s,!!n.oneof||n.opt);break;case"message":if(r)for(const t of s)K(e,i,n,t);else K(e,i,n,s);break;case"map":for(const[t,r]of Object.entries(s))Q(e,i,n,t,r)}}return i.writeUnknownFields&&this.writeUnknownFields(t,e),e}}),Object.assign(Object.assign({},ft()),{newFieldList:t=>new vt(t,Mt),initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const i=e.localName,s=t;if(e.repeated)s[i]=[];else switch(e.kind){case"oneof":s[i]={case:void 0};break;case"enum":s[i]=0;break;case"map":s[i]={};break;case"scalar":s[i]=$(e.T,e.L)}}}}));function Mt(t){var e,i,s,n;const r=[];let o;for(const a of"function"==typeof t?t():t){const t=a;if(t.localName=bt(a.name,void 0!==a.oneof),t.jsonName=null!==(e=a.jsonName)&&void 0!==e?e:wt(a.name),t.repeated=null!==(i=a.repeated)&&void 0!==i&&i,"scalar"==a.kind&&(t.L=null!==(s=a.L)&&void 0!==s?s:w.BIGINT),void 0!==a.oneof){const e="string"==typeof a.oneof?a.oneof:a.oneof.name;o&&o.name==e||(o=new Ot(e)),t.oneof=o,o.addField(t)}"message"==a.kind&&(t.delimited=!1),t.packed=null!==(n=a.packed)&&void 0!==n?n:"enum"==a.kind||"scalar"==a.kind&&a.T!=I.BYTES&&a.T!=I.STRING,r.push(t)}return r}const Rt=b("proto2",ht(((t,e)=>function(i,n,r){if("map"==i.kind){const o={};switch(i.V.kind){case"scalar":for(const[t,r]of Object.entries(n)){const n=e(i.V.T,r,!0);s(void 0!==n),o[t.toString()]=n}break;case"message":for(const[t,e]of Object.entries(n))o[t.toString()]=e.toJson(r);break;case"enum":const a=i.V.T;for(const[e,i]of Object.entries(n)){s(void 0===i||"number"==typeof i);const n=t(a,i,!0,r.enumAsInteger);s(void 0!==n),o[e.toString()]=n}}return r.emitDefaultValues||Object.keys(o).length>0?o:void 0}if(i.repeated){const s=[];switch(i.kind){case"scalar":for(let t=0;t<n.length;t++)s.push(e(i.T,n[t],!0));break;case"enum":for(let e=0;e<n.length;e++)s.push(t(i.T,n[e],!0,r.enumAsInteger));break;case"message":for(let t=0;t<n.length;t++)s.push(n[t].toJson(r))}return r.emitDefaultValues||s.length>0?s:void 0}if(void 0!==n)switch(i.kind){case"scalar":return e(i.T,n,!0);case"enum":return t(i.T,n,!0,r.enumAsInteger);case"message":return D(i.T,n).toJson(r)}else if(!i.oneof&&!i.opt)throw"required field not set"})),Object.assign(Object.assign({},G()),{writeMessage(t,e,i){const s=t.getType();let n;try{for(n of s.fields.byNumber()){let r,o=n.repeated,a=n.localName;if(n.oneof){const e=t[n.oneof.localName];if(e.case!==a)continue;r=e.value}else if(r=t[a],void 0===r&&!n.oneof&&!n.opt)throw new Error(`cannot encode field ${s.typeName}.${n.name} to binary: required field not set`);switch(n.kind){case"scalar":case"enum":let t="enum"==n.kind?I.INT32:n.T;if(o)if(n.packed)tt(e,t,n.no,r);else for(const i of r)Z(e,t,n.no,i,!0);else void 0!==r&&Z(e,t,n.no,r,!0);break;case"message":if(o)for(const t of r)K(e,i,n,t);else K(e,i,n,r);break;case"map":for(const[t,s]of Object.entries(r))Q(e,i,n,t,s)}}}catch(t){let e=n?`cannot encode field ${s.typeName}.${null==n?void 0:n.name} to binary`:`cannot encode message ${s.typeName} to binary`,i=t instanceof Error?t.message:String(t);throw new Error(e+(i.length>0?`: ${i}`:""))}return i.writeUnknownFields&&this.writeUnknownFields(t,e),e}}),Object.assign(Object.assign({},ft()),{newFieldList:t=>new vt(t,Bt),initFields(t){for(const e of t.getType().fields.byMember()){const i=e.localName,s=t;if(e.repeated)s[i]=[];else switch(e.kind){case"oneof":s[i]={case:void 0};break;case"map":s[i]={}}}}}));function Bt(t){var e,i,s,n,r;const o=[];let a;for(const h of"function"==typeof t?t():t){const t=h;if(t.localName=bt(h.name,void 0!==h.oneof),t.jsonName=null!==(e=h.jsonName)&&void 0!==e?e:wt(h.name),t.repeated=null!==(i=h.repeated)&&void 0!==i&&i,"scalar"==h.kind&&(t.L=null!==(s=h.L)&&void 0!==s?s:w.BIGINT),void 0!==h.oneof){const e="string"==typeof h.oneof?h.oneof:h.oneof.name;a&&a.name==e||(a=new Ot(e)),t.oneof=a,a.addField(t)}"message"==h.kind&&(t.delimited=null!==(n=h.delimited)&&void 0!==n&&n),t.packed=null!==(r=h.packed)&&void 0!==r&&r,o.push(t)}return o}const Dt={NaN:Number.NaN,POSITIVE_INFINITY:Number.POSITIVE_INFINITY,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY};var Nt=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(i){e[i]=t[i]&&function(e){return new Promise((function(s,n){(function(t,e,i,s){Promise.resolve(s).then((function(e){t({value:e,done:i})}),e)})(s,n,(e=t[i](e)).done,e.value)}))}}},Ft=function(t){return this instanceof Ft?(this.v=t,this):new Ft(t)},$t=function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=i.apply(t,e||[]),r=[];return s={},o("next"),o("throw"),o("return",(function(t){return function(e){return Promise.resolve(e).then(t,c)}})),s[Symbol.asyncIterator]=function(){return this},s;function o(t,e){n[t]&&(s[t]=function(e){return new Promise((function(i,s){r.push([t,e,i,s])>1||a(t,e)}))},e&&(s[t]=e(s[t])))}function a(t,e){try{(i=n[t](e)).value instanceof Ft?Promise.resolve(i.value.v).then(h,c):d(r[0][2],i)}catch(t){d(r[0][3],t)}var i}function h(t){a("next",t)}function c(t){a("throw",t)}function d(t,e){t(e),r.shift(),r.length&&a(r[0][0],r[0][1])}};const Vt={enc(t,e){const i=G().makeWriteOptions(e);return i.writerFactory().bytes(t.toBinary(i)).finish()},dec(t,e,i){const s=G().makeReadOptions(i);return t.fromBinary(s.readerFactory(e).bytes(),s)},decStream(t,e){return $t(this,arguments,(function*(){var i,s,n,r;function o(t,e){const i=new Uint8Array(t.byteLength+e.byteLength);return i.set(t),i.set(e,t.length),i}let a=new Uint8Array(0);try{for(var h,c=!0,d=Nt(e);!(i=(h=yield Ft(d.next())).done);c=!0){r=h.value,c=!1;for(a=o(a,r);;){const e=Vt.peekSize(a);if(e.eof)break;if(e.offset+e.size>a.byteLength)break;yield yield Ft(Vt.dec(t,a)),a=a.subarray(e.offset+e.size)}}}catch(t){s={error:t}}finally{try{c||i||!(n=d.return)||(yield Ft(n.call(d)))}finally{if(s)throw s.error}}if(a.byteLength>0)throw new Error("incomplete data")}))},peekSize(t){const e={eof:!0,size:null,offset:null};for(let i=0;i<10;i++){if(i>t.byteLength)return e;if(0==(128&t[i])){const i=new B(t);let s;try{s=i.uint32()}catch(t){if(t instanceof RangeError)return e;throw t}return{eof:!1,size:s,offset:i.pos}}}throw new Error("invalid varint")}};const jt="@bufbuild/protobuf",Ut={packageName:"@bufbuild/protobuf",localName:yt,reifyWkt:function(t){switch(t.typeName){case"google.protobuf.Any":{const e=t.fields.find((t=>1==t.number&&"scalar"==t.fieldKind&&t.scalar===I.STRING)),i=t.fields.find((t=>2==t.number&&"scalar"==t.fieldKind&&t.scalar===I.BYTES));if(e&&i)return{typeName:t.typeName,typeUrl:e,value:i};break}case"google.protobuf.Timestamp":{const e=t.fields.find((t=>1==t.number&&"scalar"==t.fieldKind&&t.scalar===I.INT64)),i=t.fields.find((t=>2==t.number&&"scalar"==t.fieldKind&&t.scalar===I.INT32));if(e&&i)return{typeName:t.typeName,seconds:e,nanos:i};break}case"google.protobuf.Duration":{const e=t.fields.find((t=>1==t.number&&"scalar"==t.fieldKind&&t.scalar===I.INT64)),i=t.fields.find((t=>2==t.number&&"scalar"==t.fieldKind&&t.scalar===I.INT32));if(e&&i)return{typeName:t.typeName,seconds:e,nanos:i};break}case"google.protobuf.Struct":{const e=t.fields.find((t=>1==t.number&&!t.repeated));if("map"!==(null==e?void 0:e.fieldKind)||"message"!==e.mapValue.kind||"google.protobuf.Value"!==e.mapValue.message.typeName)break;return{typeName:t.typeName,fields:e}}case"google.protobuf.Value":{const e=t.oneofs.find((t=>"kind"===t.name)),i=t.fields.find((t=>1==t.number&&t.oneof===e));if("enum"!==(null==i?void 0:i.fieldKind)||"google.protobuf.NullValue"!==i.enum.typeName)return;const s=t.fields.find((t=>2==t.number&&"scalar"==t.fieldKind&&t.scalar===I.DOUBLE&&t.oneof===e)),n=t.fields.find((t=>3==t.number&&"scalar"==t.fieldKind&&t.scalar===I.STRING&&t.oneof===e)),r=t.fields.find((t=>4==t.number&&"scalar"==t.fieldKind&&t.scalar===I.BOOL&&t.oneof===e)),o=t.fields.find((t=>5==t.number&&t.oneof===e));if("message"!==(null==o?void 0:o.fieldKind)||"google.protobuf.Struct"!==o.message.typeName)return;const a=t.fields.find((t=>6==t.number&&t.oneof===e));if("message"!==(null==a?void 0:a.fieldKind)||"google.protobuf.ListValue"!==a.message.typeName)return;if(e&&s&&n&&r)return{typeName:t.typeName,kind:e,nullValue:i,numberValue:s,stringValue:n,boolValue:r,structValue:o,listValue:a};break}case"google.protobuf.ListValue":{const e=t.fields.find((t=>1==t.number&&t.repeated));if("message"!=(null==e?void 0:e.fieldKind)||"google.protobuf.Value"!==e.message.typeName)break;return{typeName:t.typeName,values:e}}case"google.protobuf.FieldMask":{const e=t.fields.find((t=>1==t.number&&"scalar"==t.fieldKind&&t.scalar===I.STRING&&t.repeated));if(e)return{typeName:t.typeName,paths:e};break}case"google.protobuf.DoubleValue":case"google.protobuf.FloatValue":case"google.protobuf.Int64Value":case"google.protobuf.UInt64Value":case"google.protobuf.Int32Value":case"google.protobuf.UInt32Value":case"google.protobuf.BoolValue":case"google.protobuf.StringValue":case"google.protobuf.BytesValue":{const e=t.fields.find((t=>1==t.number&&"value"==t.name));if(!e)break;if("scalar"!==e.fieldKind)break;return{typeName:t.typeName,value:e}}}},getUnwrappedFieldType:function(t){if("message"===t.fieldKind&&!t.repeated&&null==t.oneof)return N[t.message.typeName]},scalarDefaultValue:$,safeIdentifier:Ct,safeObjectProperty:Et,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:jt},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:jt},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:jt},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:jt},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:jt},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:jt},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:jt},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:jt},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:jt},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:jt},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:jt},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:jt},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:jt},protoDouble:{typeOnly:!1,privateImportPath:"./proto-double.js",publicImportPath:jt},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:jt},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:jt},LongType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:jt},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:jt},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:jt},IMessageTypeRegistry:{typeOnly:!0,privateImportPath:"./type-registry.js",publicImportPath:jt}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]};var qt,Ht,Jt,Gt,zt,Wt,Yt,Xt,Qt,Kt,Zt,te,ee,ie,se,ne,re,oe,ae;!function(t){t[t.Unary=0]="Unary",t[t.ServerStreaming=1]="ServerStreaming",t[t.ClientStreaming=2]="ClientStreaming",t[t.BiDiStreaming=3]="BiDiStreaming"}(qt||(qt={})),function(t){t[t.NoSideEffects=1]="NoSideEffects",t[t.Idempotent=2]="Idempotent"}(Ht||(Ht={})),function(t){t[t.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",t[t.EDITION_PROTO2=998]="EDITION_PROTO2",t[t.EDITION_PROTO3=999]="EDITION_PROTO3",t[t.EDITION_2023=1e3]="EDITION_2023",t[t.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",t[t.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",t[t.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",t[t.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",t[t.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY"}(Jt||(Jt={})),Rt.util.setEnumType(Jt,"google.protobuf.Edition",[{no:0,name:"EDITION_UNKNOWN"},{no:998,name:"EDITION_PROTO2"},{no:999,name:"EDITION_PROTO3"},{no:1e3,name:"EDITION_2023"},{no:1,name:"EDITION_1_TEST_ONLY"},{no:2,name:"EDITION_2_TEST_ONLY"},{no:99997,name:"EDITION_99997_TEST_ONLY"},{no:99998,name:"EDITION_99998_TEST_ONLY"},{no:99999,name:"EDITION_99999_TEST_ONLY"}]);class he extends y{constructor(t){super(),this.file=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new he).fromBinary(t,e)}static fromJson(t,e){return(new he).fromJson(t,e)}static fromJsonString(t,e){return(new he).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(he,t,e)}}he.runtime=Rt,he.typeName="google.protobuf.FileDescriptorSet",he.fields=Rt.util.newFieldList((()=>[{no:1,name:"file",kind:"message",T:ce,repeated:!0}]));class ce extends y{constructor(t){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new ce).fromBinary(t,e)}static fromJson(t,e){return(new ce).fromJson(t,e)}static fromJsonString(t,e){return(new ce).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(ce,t,e)}}ce.runtime=Rt,ce.typeName="google.protobuf.FileDescriptorProto",ce.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:de,repeated:!0},{no:5,name:"enum_type",kind:"message",T:ve,repeated:!0},{no:6,name:"service",kind:"message",T:Ie,repeated:!0},{no:7,name:"extension",kind:"message",T:me,repeated:!0},{no:8,name:"options",kind:"message",T:Pe,opt:!0},{no:9,name:"source_code_info",kind:"message",T:De,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0},{no:14,name:"edition",kind:"enum",T:Rt.getEnumType(Jt),opt:!0}]));class de extends y{constructor(t){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new de).fromBinary(t,e)}static fromJson(t,e){return(new de).fromJson(t,e)}static fromJsonString(t,e){return(new de).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(de,t,e)}}de.runtime=Rt,de.typeName="google.protobuf.DescriptorProto",de.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:me,repeated:!0},{no:6,name:"extension",kind:"message",T:me,repeated:!0},{no:3,name:"nested_type",kind:"message",T:de,repeated:!0},{no:4,name:"enum_type",kind:"message",T:ve,repeated:!0},{no:5,name:"extension_range",kind:"message",T:le,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:ge,repeated:!0},{no:7,name:"options",kind:"message",T:Te,opt:!0},{no:9,name:"reserved_range",kind:"message",T:ue,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]));class le extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new le).fromBinary(t,e)}static fromJson(t,e){return(new le).fromJson(t,e)}static fromJsonString(t,e){return(new le).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(le,t,e)}}le.runtime=Rt,le.typeName="google.protobuf.DescriptorProto.ExtensionRange",le.fields=Rt.util.newFieldList((()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:pe,opt:!0}]));class ue extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new ue).fromBinary(t,e)}static fromJson(t,e){return(new ue).fromJson(t,e)}static fromJsonString(t,e){return(new ue).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(ue,t,e)}}ue.runtime=Rt,ue.typeName="google.protobuf.DescriptorProto.ReservedRange",ue.fields=Rt.util.newFieldList((()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]));class pe extends y{constructor(t){super(),this.uninterpretedOption=[],this.declaration=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new pe).fromBinary(t,e)}static fromJson(t,e){return(new pe).fromJson(t,e)}static fromJsonString(t,e){return(new pe).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(pe,t,e)}}pe.runtime=Rt,pe.typeName="google.protobuf.ExtensionRangeOptions",pe.fields=Rt.util.newFieldList((()=>[{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0},{no:2,name:"declaration",kind:"message",T:fe,repeated:!0},{no:50,name:"features",kind:"message",T:Me,opt:!0},{no:3,name:"verification",kind:"enum",T:Rt.getEnumType(Gt),opt:!0,default:Gt.UNVERIFIED}])),function(t){t[t.DECLARATION=0]="DECLARATION",t[t.UNVERIFIED=1]="UNVERIFIED"}(Gt||(Gt={})),Rt.util.setEnumType(Gt,"google.protobuf.ExtensionRangeOptions.VerificationState",[{no:0,name:"DECLARATION"},{no:1,name:"UNVERIFIED"}]);class fe extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new fe).fromBinary(t,e)}static fromJson(t,e){return(new fe).fromJson(t,e)}static fromJsonString(t,e){return(new fe).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(fe,t,e)}}fe.runtime=Rt,fe.typeName="google.protobuf.ExtensionRangeOptions.Declaration",fe.fields=Rt.util.newFieldList((()=>[{no:1,name:"number",kind:"scalar",T:5,opt:!0},{no:2,name:"full_name",kind:"scalar",T:9,opt:!0},{no:3,name:"type",kind:"scalar",T:9,opt:!0},{no:5,name:"reserved",kind:"scalar",T:8,opt:!0},{no:6,name:"repeated",kind:"scalar",T:8,opt:!0}]));class me extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new me).fromBinary(t,e)}static fromJson(t,e){return(new me).fromJson(t,e)}static fromJsonString(t,e){return(new me).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(me,t,e)}}me.runtime=Rt,me.typeName="google.protobuf.FieldDescriptorProto",me.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:Rt.getEnumType(Wt),opt:!0},{no:5,name:"type",kind:"enum",T:Rt.getEnumType(zt),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:_e,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}])),function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.GROUP=10]="GROUP",t[t.MESSAGE=11]="MESSAGE",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.ENUM=14]="ENUM",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"}(zt||(zt={})),Rt.util.setEnumType(zt,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]),function(t){t[t.OPTIONAL=1]="OPTIONAL",t[t.REPEATED=3]="REPEATED",t[t.REQUIRED=2]="REQUIRED"}(Wt||(Wt={})),Rt.util.setEnumType(Wt,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:3,name:"LABEL_REPEATED"},{no:2,name:"LABEL_REQUIRED"}]);class ge extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new ge).fromBinary(t,e)}static fromJson(t,e){return(new ge).fromJson(t,e)}static fromJsonString(t,e){return(new ge).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(ge,t,e)}}ge.runtime=Rt,ge.typeName="google.protobuf.OneofDescriptorProto",ge.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:Ae,opt:!0}]));class ve extends y{constructor(t){super(),this.value=[],this.reservedRange=[],this.reservedName=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new ve).fromBinary(t,e)}static fromJson(t,e){return(new ve).fromJson(t,e)}static fromJsonString(t,e){return(new ve).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(ve,t,e)}}ve.runtime=Rt,ve.typeName="google.protobuf.EnumDescriptorProto",ve.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:be,repeated:!0},{no:3,name:"options",kind:"message",T:xe,opt:!0},{no:4,name:"reserved_range",kind:"message",T:ye,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]));class ye extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new ye).fromBinary(t,e)}static fromJson(t,e){return(new ye).fromJson(t,e)}static fromJsonString(t,e){return(new ye).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(ye,t,e)}}ye.runtime=Rt,ye.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",ye.fields=Rt.util.newFieldList((()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]));class be extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new be).fromBinary(t,e)}static fromJson(t,e){return(new be).fromJson(t,e)}static fromJsonString(t,e){return(new be).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(be,t,e)}}be.runtime=Rt,be.typeName="google.protobuf.EnumValueDescriptorProto",be.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:ke,opt:!0}]));class Ie extends y{constructor(t){super(),this.method=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ie).fromBinary(t,e)}static fromJson(t,e){return(new Ie).fromJson(t,e)}static fromJsonString(t,e){return(new Ie).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Ie,t,e)}}Ie.runtime=Rt,Ie.typeName="google.protobuf.ServiceDescriptorProto",Ie.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:we,repeated:!0},{no:3,name:"options",kind:"message",T:Ee,opt:!0}]));class we extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new we).fromBinary(t,e)}static fromJson(t,e){return(new we).fromJson(t,e)}static fromJsonString(t,e){return(new we).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(we,t,e)}}we.runtime=Rt,we.typeName="google.protobuf.MethodDescriptorProto",we.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:Ce,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]));class Pe extends y{constructor(t){super(),this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Pe).fromBinary(t,e)}static fromJson(t,e){return(new Pe).fromJson(t,e)}static fromJsonString(t,e){return(new Pe).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Pe,t,e)}}Pe.runtime=Rt,Pe.typeName="google.protobuf.FileOptions",Pe.fields=Rt.util.newFieldList((()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:Rt.getEnumType(Yt),opt:!0,default:Yt.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:50,name:"features",kind:"message",T:Me,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}])),function(t){t[t.SPEED=1]="SPEED",t[t.CODE_SIZE=2]="CODE_SIZE",t[t.LITE_RUNTIME=3]="LITE_RUNTIME"}(Yt||(Yt={})),Rt.util.setEnumType(Yt,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class Te extends y{constructor(t){super(),this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Te).fromBinary(t,e)}static fromJson(t,e){return(new Te).fromJson(t,e)}static fromJsonString(t,e){return(new Te).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Te,t,e)}}Te.runtime=Rt,Te.typeName="google.protobuf.MessageOptions",Te.fields=Rt.util.newFieldList((()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:11,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:12,name:"features",kind:"message",T:Me,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}]));class _e extends y{constructor(t){super(),this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new _e).fromBinary(t,e)}static fromJson(t,e){return(new _e).fromJson(t,e)}static fromJsonString(t,e){return(new _e).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(_e,t,e)}}_e.runtime=Rt,_e.typeName="google.protobuf.FieldOptions",_e.fields=Rt.util.newFieldList((()=>[{no:1,name:"ctype",kind:"enum",T:Rt.getEnumType(Xt),opt:!0,default:Xt.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:Rt.getEnumType(Qt),opt:!0,default:Qt.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:16,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"retention",kind:"enum",T:Rt.getEnumType(Kt),opt:!0},{no:19,name:"targets",kind:"enum",T:Rt.getEnumType(Zt),repeated:!0},{no:20,name:"edition_defaults",kind:"message",T:Se,repeated:!0},{no:21,name:"features",kind:"message",T:Me,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}])),function(t){t[t.STRING=0]="STRING",t[t.CORD=1]="CORD",t[t.STRING_PIECE=2]="STRING_PIECE"}(Xt||(Xt={})),Rt.util.setEnumType(Xt,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]),function(t){t[t.JS_NORMAL=0]="JS_NORMAL",t[t.JS_STRING=1]="JS_STRING",t[t.JS_NUMBER=2]="JS_NUMBER"}(Qt||(Qt={})),Rt.util.setEnumType(Qt,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]),function(t){t[t.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",t[t.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",t[t.RETENTION_SOURCE=2]="RETENTION_SOURCE"}(Kt||(Kt={})),Rt.util.setEnumType(Kt,"google.protobuf.FieldOptions.OptionRetention",[{no:0,name:"RETENTION_UNKNOWN"},{no:1,name:"RETENTION_RUNTIME"},{no:2,name:"RETENTION_SOURCE"}]),function(t){t[t.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",t[t.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",t[t.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",t[t.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",t[t.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",t[t.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",t[t.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",t[t.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",t[t.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",t[t.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"}(Zt||(Zt={})),Rt.util.setEnumType(Zt,"google.protobuf.FieldOptions.OptionTargetType",[{no:0,name:"TARGET_TYPE_UNKNOWN"},{no:1,name:"TARGET_TYPE_FILE"},{no:2,name:"TARGET_TYPE_EXTENSION_RANGE"},{no:3,name:"TARGET_TYPE_MESSAGE"},{no:4,name:"TARGET_TYPE_FIELD"},{no:5,name:"TARGET_TYPE_ONEOF"},{no:6,name:"TARGET_TYPE_ENUM"},{no:7,name:"TARGET_TYPE_ENUM_ENTRY"},{no:8,name:"TARGET_TYPE_SERVICE"},{no:9,name:"TARGET_TYPE_METHOD"}]);class Se extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Se).fromBinary(t,e)}static fromJson(t,e){return(new Se).fromJson(t,e)}static fromJsonString(t,e){return(new Se).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Se,t,e)}}Se.runtime=Rt,Se.typeName="google.protobuf.FieldOptions.EditionDefault",Se.fields=Rt.util.newFieldList((()=>[{no:3,name:"edition",kind:"enum",T:Rt.getEnumType(Jt),opt:!0},{no:2,name:"value",kind:"scalar",T:9,opt:!0}]));class Ae extends y{constructor(t){super(),this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ae).fromBinary(t,e)}static fromJson(t,e){return(new Ae).fromJson(t,e)}static fromJsonString(t,e){return(new Ae).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Ae,t,e)}}Ae.runtime=Rt,Ae.typeName="google.protobuf.OneofOptions",Ae.fields=Rt.util.newFieldList((()=>[{no:1,name:"features",kind:"message",T:Me,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}]));class xe extends y{constructor(t){super(),this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new xe).fromBinary(t,e)}static fromJson(t,e){return(new xe).fromJson(t,e)}static fromJsonString(t,e){return(new xe).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(xe,t,e)}}xe.runtime=Rt,xe.typeName="google.protobuf.EnumOptions",xe.fields=Rt.util.newFieldList((()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"deprecated_legacy_json_field_conflicts",kind:"scalar",T:8,opt:!0},{no:7,name:"features",kind:"message",T:Me,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}]));class ke extends y{constructor(t){super(),this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new ke).fromBinary(t,e)}static fromJson(t,e){return(new ke).fromJson(t,e)}static fromJsonString(t,e){return(new ke).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(ke,t,e)}}ke.runtime=Rt,ke.typeName="google.protobuf.EnumValueOptions",ke.fields=Rt.util.newFieldList((()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"features",kind:"message",T:Me,opt:!0},{no:3,name:"debug_redact",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}]));class Ee extends y{constructor(t){super(),this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ee).fromBinary(t,e)}static fromJson(t,e){return(new Ee).fromJson(t,e)}static fromJsonString(t,e){return(new Ee).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Ee,t,e)}}Ee.runtime=Rt,Ee.typeName="google.protobuf.ServiceOptions",Ee.fields=Rt.util.newFieldList((()=>[{no:34,name:"features",kind:"message",T:Me,opt:!0},{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}]));class Ce extends y{constructor(t){super(),this.uninterpretedOption=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ce).fromBinary(t,e)}static fromJson(t,e){return(new Ce).fromJson(t,e)}static fromJsonString(t,e){return(new Ce).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Ce,t,e)}}Ce.runtime=Rt,Ce.typeName="google.protobuf.MethodOptions",Ce.fields=Rt.util.newFieldList((()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:Rt.getEnumType(te),opt:!0,default:te.IDEMPOTENCY_UNKNOWN},{no:35,name:"features",kind:"message",T:Me,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:Oe,repeated:!0}])),function(t){t[t.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",t[t.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",t[t.IDEMPOTENT=2]="IDEMPOTENT"}(te||(te={})),Rt.util.setEnumType(te,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class Oe extends y{constructor(t){super(),this.name=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Oe).fromBinary(t,e)}static fromJson(t,e){return(new Oe).fromJson(t,e)}static fromJsonString(t,e){return(new Oe).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Oe,t,e)}}Oe.runtime=Rt,Oe.typeName="google.protobuf.UninterpretedOption",Oe.fields=Rt.util.newFieldList((()=>[{no:2,name:"name",kind:"message",T:Le,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]));class Le extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Le).fromBinary(t,e)}static fromJson(t,e){return(new Le).fromJson(t,e)}static fromJsonString(t,e){return(new Le).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Le,t,e)}}Le.runtime=Rt,Le.typeName="google.protobuf.UninterpretedOption.NamePart",Le.fields=Rt.util.newFieldList((()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]));class Me extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Me).fromBinary(t,e)}static fromJson(t,e){return(new Me).fromJson(t,e)}static fromJsonString(t,e){return(new Me).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Me,t,e)}}Me.runtime=Rt,Me.typeName="google.protobuf.FeatureSet",Me.fields=Rt.util.newFieldList((()=>[{no:1,name:"field_presence",kind:"enum",T:Rt.getEnumType(ee),opt:!0},{no:2,name:"enum_type",kind:"enum",T:Rt.getEnumType(ie),opt:!0},{no:3,name:"repeated_field_encoding",kind:"enum",T:Rt.getEnumType(se),opt:!0},{no:4,name:"utf8_validation",kind:"enum",T:Rt.getEnumType(ne),opt:!0},{no:5,name:"message_encoding",kind:"enum",T:Rt.getEnumType(re),opt:!0},{no:6,name:"json_format",kind:"enum",T:Rt.getEnumType(oe),opt:!0}])),function(t){t[t.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",t[t.EXPLICIT=1]="EXPLICIT",t[t.IMPLICIT=2]="IMPLICIT",t[t.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"}(ee||(ee={})),Rt.util.setEnumType(ee,"google.protobuf.FeatureSet.FieldPresence",[{no:0,name:"FIELD_PRESENCE_UNKNOWN"},{no:1,name:"EXPLICIT"},{no:2,name:"IMPLICIT"},{no:3,name:"LEGACY_REQUIRED"}]),function(t){t[t.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",t[t.OPEN=1]="OPEN",t[t.CLOSED=2]="CLOSED"}(ie||(ie={})),Rt.util.setEnumType(ie,"google.protobuf.FeatureSet.EnumType",[{no:0,name:"ENUM_TYPE_UNKNOWN"},{no:1,name:"OPEN"},{no:2,name:"CLOSED"}]),function(t){t[t.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",t[t.PACKED=1]="PACKED",t[t.EXPANDED=2]="EXPANDED"}(se||(se={})),Rt.util.setEnumType(se,"google.protobuf.FeatureSet.RepeatedFieldEncoding",[{no:0,name:"REPEATED_FIELD_ENCODING_UNKNOWN"},{no:1,name:"PACKED"},{no:2,name:"EXPANDED"}]),function(t){t[t.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",t[t.NONE=1]="NONE",t[t.VERIFY=2]="VERIFY"}(ne||(ne={})),Rt.util.setEnumType(ne,"google.protobuf.FeatureSet.Utf8Validation",[{no:0,name:"UTF8_VALIDATION_UNKNOWN"},{no:1,name:"NONE"},{no:2,name:"VERIFY"}]),function(t){t[t.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",t[t.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",t[t.DELIMITED=2]="DELIMITED"}(re||(re={})),Rt.util.setEnumType(re,"google.protobuf.FeatureSet.MessageEncoding",[{no:0,name:"MESSAGE_ENCODING_UNKNOWN"},{no:1,name:"LENGTH_PREFIXED"},{no:2,name:"DELIMITED"}]),function(t){t[t.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",t[t.ALLOW=1]="ALLOW",t[t.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"}(oe||(oe={})),Rt.util.setEnumType(oe,"google.protobuf.FeatureSet.JsonFormat",[{no:0,name:"JSON_FORMAT_UNKNOWN"},{no:1,name:"ALLOW"},{no:2,name:"LEGACY_BEST_EFFORT"}]);class Re extends y{constructor(t){super(),this.defaults=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Re).fromBinary(t,e)}static fromJson(t,e){return(new Re).fromJson(t,e)}static fromJsonString(t,e){return(new Re).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Re,t,e)}}Re.runtime=Rt,Re.typeName="google.protobuf.FeatureSetDefaults",Re.fields=Rt.util.newFieldList((()=>[{no:1,name:"defaults",kind:"message",T:Be,repeated:!0},{no:4,name:"minimum_edition",kind:"enum",T:Rt.getEnumType(Jt),opt:!0},{no:5,name:"maximum_edition",kind:"enum",T:Rt.getEnumType(Jt),opt:!0}]));class Be extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Be).fromBinary(t,e)}static fromJson(t,e){return(new Be).fromJson(t,e)}static fromJsonString(t,e){return(new Be).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Be,t,e)}}Be.runtime=Rt,Be.typeName="google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault",Be.fields=Rt.util.newFieldList((()=>[{no:3,name:"edition",kind:"enum",T:Rt.getEnumType(Jt),opt:!0},{no:2,name:"features",kind:"message",T:Me,opt:!0}]));class De extends y{constructor(t){super(),this.location=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new De).fromBinary(t,e)}static fromJson(t,e){return(new De).fromJson(t,e)}static fromJsonString(t,e){return(new De).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(De,t,e)}}De.runtime=Rt,De.typeName="google.protobuf.SourceCodeInfo",De.fields=Rt.util.newFieldList((()=>[{no:1,name:"location",kind:"message",T:Ne,repeated:!0}]));class Ne extends y{constructor(t){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ne).fromBinary(t,e)}static fromJson(t,e){return(new Ne).fromJson(t,e)}static fromJsonString(t,e){return(new Ne).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Ne,t,e)}}Ne.runtime=Rt,Ne.typeName="google.protobuf.SourceCodeInfo.Location",Ne.fields=Rt.util.newFieldList((()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]));class Fe extends y{constructor(t){super(),this.annotation=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Fe).fromBinary(t,e)}static fromJson(t,e){return(new Fe).fromJson(t,e)}static fromJsonString(t,e){return(new Fe).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Fe,t,e)}}Fe.runtime=Rt,Fe.typeName="google.protobuf.GeneratedCodeInfo",Fe.fields=Rt.util.newFieldList((()=>[{no:1,name:"annotation",kind:"message",T:$e,repeated:!0}]));class $e extends y{constructor(t){super(),this.path=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new $e).fromBinary(t,e)}static fromJson(t,e){return(new $e).fromJson(t,e)}static fromJsonString(t,e){return(new $e).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals($e,t,e)}}function Ve(t,e){switch(t){case I.STRING:return e;case I.BYTES:{const i=function(t){const e=[],i={tail:t,c:"",next(){return 0!=this.tail.length&&(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(t){if(this.tail.length>=t){const e=this.tail.substring(0,t);return this.tail=this.tail.substring(t),e}return!1}};for(;i.next();)if("\\"===i.c){if(i.next())switch(i.c){case"\\":e.push(i.c.charCodeAt(0));break;case"b":e.push(8);break;case"f":e.push(12);break;case"n":e.push(10);break;case"r":e.push(13);break;case"t":e.push(9);break;case"v":e.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const t=i.c,s=i.take(2);if(!1===s)return!1;const n=parseInt(t+s,8);if(isNaN(n))return!1;e.push(n);break}case"x":{const t=i.c,s=i.take(2);if(!1===s)return!1;const n=parseInt(t+s,16);if(isNaN(n))return!1;e.push(n);break}case"u":{const t=i.c,s=i.take(4);if(!1===s)return!1;const n=parseInt(t+s,16);if(isNaN(n))return!1;const r=new Uint8Array(4);new DataView(r.buffer).setInt32(0,n,!0),e.push(r[0],r[1],r[2],r[3]);break}case"U":{const t=i.c,s=i.take(8);if(!1===s)return!1;const n=L.uEnc(t+s),r=new Uint8Array(8),o=new DataView(r.buffer);o.setInt32(0,n.lo,!0),o.setInt32(4,n.hi,!0),e.push(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);break}}}else e.push(i.c.charCodeAt(0));return new Uint8Array(e)}(e);if(!1===i)throw new Error(`cannot parse ${I[t]} default value: ${e}`);return i}case I.INT64:case I.SFIXED64:case I.SINT64:return L.parse(e);case I.UINT64:case I.FIXED64:return L.uParse(e);case I.DOUBLE:case I.FLOAT:switch(e){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(e)}case I.BOOL:return"true"===e;case I.INT32:case I.UINT32:case I.SINT32:case I.FIXED32:case I.SFIXED32:return parseInt(e,10)}}$e.runtime=Rt,$e.typeName="google.protobuf.GeneratedCodeInfo.Annotation",$e.fields=Rt.util.newFieldList((()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0},{no:5,name:"semantic",kind:"enum",T:Rt.getEnumType(ae),opt:!0}])),function(t){t[t.NONE=0]="NONE",t[t.SET=1]="SET",t[t.ALIAS=2]="ALIAS"}(ae||(ae={})),Rt.util.setEnumType(ae,"google.protobuf.GeneratedCodeInfo.Annotation.Semantic",[{no:0,name:"NONE"},{no:1,name:"SET"},{no:2,name:"ALIAS"}]);const je=Re.fromBinary(st.dec("ChESDAgBEAIYAiABKAEwAhjmBwoREgwIAhABGAEgAigBMAEY5wcKERIMCAEQARgBIAIoATABGOgHIOYHKOgH"));function Ue(t){const e=t.minimumEdition,i=t.maximumEdition;if(void 0===e||void 0===i||t.defaults.some((t=>void 0===t.edition)))throw new Error("Invalid FeatureSetDefaults");const s=new Map;return(n,...r)=>{var o,a;let h=s.get(n);if(void 0===h){if(n<e)throw new Error(`Edition ${Jt[n]} is earlier than the minimum supported edition ${Jt[e]}`);if(i<n)throw new Error(`Edition ${Jt[n]} is later than the maximum supported edition ${Jt[i]}`);let r;for(const e of t.defaults){const t=null!==(o=e.edition)&&void 0!==o?o:0;t>n||(void 0!==r&&r.e>t||(r={e:t,f:null!==(a=e.features)&&void 0!==a?a:new Me}))}if(void 0===r)throw new Error(`No valid default found for edition ${Jt[n]}`);h=r.f.toBinary(),s.set(n,h)}const c=Me.fromBinary(h);for(const t of r)void 0!==t&&c.fromBinary(t.toBinary());if(!function(t){for(const e of Me.fields.list()){const i=t[e.localName];if(void 0===i)return!1;if("enum"==e.kind&&0===i)return!1}return!0}(c))throw new Error(`Invalid FeatureSet for edition ${Jt[n]}`);return c}}function qe(t,e){var i;const n={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map,resolveFeatures:Ue(null!==(i=null==e?void 0:e.featureSetDefaults)&&void 0!==i?i:je)},r=(t instanceof he?t.file:t instanceof Uint8Array?he.fromBinary(t).file:t).map((t=>function(t,e){var i,n;s(t.name,"invalid FileDescriptorProto: missing name");const r=Object.assign(Object.assign({kind:"file",proto:t,deprecated:null!==(n=null===(i=t.options)||void 0===i?void 0:i.deprecated)&&void 0!==n&&n},function(t,e){let i,s;switch(t){case void 0:case"proto2":s="proto2",i=Jt.EDITION_PROTO2;break;case"proto3":s="proto3",i=Jt.EDITION_PROTO3;break;case"editions":switch(s="editions",e){case void 0:case Jt.EDITION_1_TEST_ONLY:case Jt.EDITION_2_TEST_ONLY:case Jt.EDITION_99997_TEST_ONLY:case Jt.EDITION_99998_TEST_ONLY:case Jt.EDITION_99999_TEST_ONLY:case Jt.EDITION_UNKNOWN:i=Jt.EDITION_UNKNOWN;break;default:i=e}break;default:throw new Error(`invalid FileDescriptorProto: unsupported syntax: ${t}`)}if("editions"===t&&e===Jt.EDITION_UNKNOWN)throw new Error(`invalid FileDescriptorProto: syntax ${t} cannot have edition ${String(e)}`);return{syntax:s,edition:i}}(t.syntax,t.edition)),{name:t.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return ri(this.proto.sourceCodeInfo,[oi.FileDescriptorProto_Syntax])},getPackageComments(){return ri(this.proto.sourceCodeInfo,[oi.FileDescriptorProto_Package])},getFeatures(){var t;return e.resolveFeatures(this.edition,null===(t=this.proto.options)||void 0===t?void 0:t.features)}});e.mapEntries.clear();for(const i of t.enumType)Ge(i,r,void 0,e);for(const i of t.messageType)ze(i,r,void 0,e);for(const i of t.service)We(i,r,e);He(r,e);for(const t of e.mapEntries.values())Je(t,e);for(const t of r.messages)Je(t,e),He(t,e);return e.mapEntries.clear(),r}(t,n)));return Object.assign({files:r},n)}function He(t,e){switch(t.kind){case"file":for(const i of t.proto.extension){const s=Qe(i,t,void 0,e);t.extensions.push(s),e.extensions.set(s.typeName,s)}break;case"message":for(const i of t.proto.extension){const s=Qe(i,t.file,t,e);t.nestedExtensions.push(s),e.extensions.set(s.typeName,s)}for(const i of t.nestedMessages)He(i,e)}}function Je(t,e){const i=t.proto.oneofDecl.map((i=>function(t,e,i){return s(t.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:t,deprecated:!1,parent:e,fields:[],name:t.name,toString(){return`oneof ${e.typeName}.${this.name}`},getComments(){const t=[...this.parent.getComments().sourcePath,oi.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return ri(e.file.proto.sourceCodeInfo,t)},getFeatures(){var t;return i.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),null===(t=this.proto.options)||void 0===t?void 0:t.features)}}}(i,t,e))),n=new Set;for(const s of t.proto.field){const r=ti(s,i),o=Xe(s,t.file,t,r,e);t.fields.push(o),void 0===r?t.members.push(o):(r.fields.push(o),n.has(r)||(n.add(r),t.members.push(r)))}for(const e of i.filter((t=>n.has(t))))t.oneofs.push(e);for(const i of t.nestedMessages)Je(i,e)}function Ge(t,e,i,n){var r,o,a;s(t.name,"invalid EnumDescriptorProto: missing name");const h={kind:"enum",proto:t,deprecated:null!==(o=null===(r=t.options)||void 0===r?void 0:r.deprecated)&&void 0!==o&&o,file:e,parent:i,name:t.name,typeName:Ke(t,i,e),values:[],sharedPrefix:Pt(t.name,t.value.map((t=>{var e;return null!==(e=t.name)&&void 0!==e?e:""}))),toString(){return`enum ${this.typeName}`},getComments(){const t=this.parent?[...this.parent.getComments().sourcePath,oi.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[oi.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return ri(e.proto.sourceCodeInfo,t)},getFeatures(){var t,e,i;const s=null!==(e=null===(t=this.parent)||void 0===t?void 0:t.getFeatures())&&void 0!==e?e:this.file.getFeatures();return n.resolveFeatures(this.file.edition,s,null===(i=this.proto.options)||void 0===i?void 0:i.features)}};n.enums.set(h.typeName,h),t.value.forEach((t=>{var i,r;s(t.name,"invalid EnumValueDescriptorProto: missing name"),s(void 0!==t.number,"invalid EnumValueDescriptorProto: missing number"),h.values.push({kind:"enum_value",proto:t,deprecated:null!==(r=null===(i=t.options)||void 0===i?void 0:i.deprecated)&&void 0!==r&&r,parent:h,name:t.name,number:t.number,toString(){return`enum value ${h.typeName}.${this.name}`},declarationString(){var t;let e=`${this.name} = ${this.number}`;return!0===(null===(t=this.proto.options)||void 0===t?void 0:t.deprecated)&&(e+=" [deprecated = true]"),e},getComments(){const t=[...this.parent.getComments().sourcePath,oi.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return ri(e.proto.sourceCodeInfo,t)},getFeatures(){var t;return n.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),null===(t=this.proto.options)||void 0===t?void 0:t.features)}})})),(null!==(a=null==i?void 0:i.nestedEnums)&&void 0!==a?a:e.enums).push(h)}function ze(t,e,i,n){var r,o,a,h;s(t.name,"invalid DescriptorProto: missing name");const c={kind:"message",proto:t,deprecated:null!==(o=null===(r=t.options)||void 0===r?void 0:r.deprecated)&&void 0!==o&&o,file:e,parent:i,name:t.name,typeName:Ke(t,i,e),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const t=this.parent?[...this.parent.getComments().sourcePath,oi.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[oi.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return ri(e.proto.sourceCodeInfo,t)},getFeatures(){var t,e,i;const s=null!==(e=null===(t=this.parent)||void 0===t?void 0:t.getFeatures())&&void 0!==e?e:this.file.getFeatures();return n.resolveFeatures(this.file.edition,s,null===(i=this.proto.options)||void 0===i?void 0:i.features)}};!0===(null===(a=t.options)||void 0===a?void 0:a.mapEntry)?n.mapEntries.set(c.typeName,c):((null!==(h=null==i?void 0:i.nestedMessages)&&void 0!==h?h:e.messages).push(c),n.messages.set(c.typeName,c));for(const i of t.enumType)Ge(i,e,c,n);for(const i of t.nestedType)ze(i,e,c,n)}function We(t,e,i){var n,r;s(t.name,"invalid ServiceDescriptorProto: missing name");const o={kind:"service",proto:t,deprecated:null!==(r=null===(n=t.options)||void 0===n?void 0:n.deprecated)&&void 0!==r&&r,file:e,name:t.name,typeName:Ke(t,void 0,e),methods:[],toString(){return`service ${this.typeName}`},getComments(){const t=[oi.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return ri(e.proto.sourceCodeInfo,t)},getFeatures(){var t;return i.resolveFeatures(this.file.edition,this.file.getFeatures(),null===(t=this.proto.options)||void 0===t?void 0:t.features)}};e.services.push(o),i.services.set(o.typeName,o);for(const e of t.method)o.methods.push(Ye(e,o,i))}function Ye(t,e,i){var n,r,o;let a,h;switch(s(t.name,"invalid MethodDescriptorProto: missing name"),s(t.inputType,"invalid MethodDescriptorProto: missing input_type"),s(t.outputType,"invalid MethodDescriptorProto: missing output_type"),a=!0===t.clientStreaming&&!0===t.serverStreaming?qt.BiDiStreaming:!0===t.clientStreaming?qt.ClientStreaming:!0===t.serverStreaming?qt.ServerStreaming:qt.Unary,null===(n=t.options)||void 0===n?void 0:n.idempotencyLevel){case te.IDEMPOTENT:h=Ht.Idempotent;break;case te.NO_SIDE_EFFECTS:h=Ht.NoSideEffects;break;case te.IDEMPOTENCY_UNKNOWN:case void 0:h=void 0}const c=i.messages.get(Ze(t.inputType)),d=i.messages.get(Ze(t.outputType));s(c,`invalid MethodDescriptorProto: input_type ${t.inputType} not found`),s(d,`invalid MethodDescriptorProto: output_type ${t.inputType} not found`);const l=t.name;return{kind:"rpc",proto:t,deprecated:null!==(o=null===(r=t.options)||void 0===r?void 0:r.deprecated)&&void 0!==o&&o,parent:e,name:l,methodKind:a,input:c,output:d,idempotency:h,toString:()=>`rpc ${e.typeName}.${l}`,getComments(){const t=[...this.parent.getComments().sourcePath,oi.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return ri(e.file.proto.sourceCodeInfo,t)},getFeatures(){var t;return i.resolveFeatures(this.parent.file.edition,this.parent.getFeatures(),null===(t=this.proto.options)||void 0===t?void 0:t.features)}}}function Xe(t,e,i,n,r){var o,a,h;s(t.name,"invalid FieldDescriptorProto: missing name"),s(t.number,"invalid FieldDescriptorProto: missing number"),s(t.type,"invalid FieldDescriptorProto: missing type");const c={proto:t,deprecated:null!==(a=null===(o=t.options)||void 0===o?void 0:o.deprecated)&&void 0!==a&&a,name:t.name,number:t.number,parent:i,oneof:n,optional:ei(t,e.syntax),packedByDefault:ii(e,t,r.resolveFeatures),packed:si(e,i,t,r.resolveFeatures),jsonName:t.jsonName===wt(t.name)?void 0:t.jsonName,scalar:void 0,longType:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,declarationString:hi,toString(){return`field ${this.parent.typeName}.${this.name}`},getComments(){const t=[...this.parent.getComments().sourcePath,oi.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return ri(e.proto.sourceCodeInfo,t)},getFeatures(){var t;return r.resolveFeatures(e.edition,this.parent.getFeatures(),null===(t=this.proto.options)||void 0===t?void 0:t.features)}},d=t.label===Wt.REPEATED;switch(t.type){case zt.MESSAGE:case zt.GROUP:{s(t.typeName,"invalid FieldDescriptorProto: missing type_name");const e=r.mapEntries.get(Ze(t.typeName));if(void 0!==e)return s(d,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},c),{kind:"field",fieldKind:"map",repeated:!1}),function(t){var e,i;s(null===(e=t.proto.options)||void 0===e?void 0:e.mapEntry,`invalid DescriptorProto: expected ${t.toString()} to be a map entry`),s(2===t.fields.length,`invalid DescriptorProto: map entry ${t.toString()} has ${t.fields.length} fields`);const n=t.fields.find((t=>1===t.proto.number));s(n,`invalid DescriptorProto: map entry ${t.toString()} is missing key field`);const r=n.scalar;s(void 0!==r&&r!==I.BYTES&&r!==I.FLOAT&&r!==I.DOUBLE,`invalid DescriptorProto: map entry ${t.toString()} has unexpected key type ${null!==(i=n.proto.type)&&void 0!==i?i:-1}`);const o=t.fields.find((t=>2===t.proto.number));switch(s(o,`invalid DescriptorProto: map entry ${t.toString()} is missing value field`),o.fieldKind){case"scalar":return{mapKey:r,mapValue:Object.assign(Object.assign({},o),{kind:"scalar"})};case"message":return{mapKey:r,mapValue:Object.assign(Object.assign({},o),{kind:"message"})};case"enum":return{mapKey:r,mapValue:Object.assign(Object.assign({},o),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}(e));const i=r.messages.get(Ze(t.typeName));return s(void 0!==i,`invalid FieldDescriptorProto: type_name ${t.typeName} not found`),Object.assign(Object.assign({},c),{kind:"field",fieldKind:"message",repeated:d,message:i})}case zt.ENUM:{s(t.typeName,"invalid FieldDescriptorProto: missing type_name");const e=r.enums.get(Ze(t.typeName));return s(void 0!==e,`invalid FieldDescriptorProto: type_name ${t.typeName} not found`),Object.assign(Object.assign({},c),{kind:"field",fieldKind:"enum",getDefaultValue:ci,repeated:d,enum:e})}default:{const e=ni[t.type];return s(e,`invalid FieldDescriptorProto: unknown type ${t.type}`),Object.assign(Object.assign({},c),{kind:"field",fieldKind:"scalar",getDefaultValue:ci,repeated:d,scalar:e,longType:(null===(h=t.options)||void 0===h?void 0:h.jstype)==Qt.JS_STRING?w.STRING:w.BIGINT})}}}function Qe(t,e,i,n){s(t.extendee,"invalid FieldDescriptorProto: missing extendee");const r=Xe(t,e,null,void 0,n),o=n.messages.get(Ze(t.extendee));return s(o,`invalid FieldDescriptorProto: extendee ${t.extendee} not found`),Object.assign(Object.assign({},r),{kind:"extension",typeName:Ke(t,i,e),parent:i,file:e,extendee:o,toString(){return`extension ${this.typeName}`},getComments(){const i=this.parent?[...this.parent.getComments().sourcePath,oi.DescriptorProto_Extension,this.parent.proto.extension.indexOf(t)]:[oi.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(t)];return ri(e.proto.sourceCodeInfo,i)},getFeatures(){var t,e;return n.resolveFeatures(this.file.edition,(null!==(t=this.parent)&&void 0!==t?t:this.file).getFeatures(),null===(e=this.proto.options)||void 0===e?void 0:e.features)}})}function Ke(t,e,i){let n;return s(t.name,`invalid ${t.getType().typeName}: missing name`),n=e?`${e.typeName}.${t.name}`:void 0!==i.proto.package?`${i.proto.package}.${t.name}`:`${t.name}`,n}function Ze(t){return t.startsWith(".")?t.substring(1):t}function ti(t,e){var i;const n=t.oneofIndex;if(void 0===n)return;let r;return!0!==t.proto3Optional&&(r=e[n],s(r,`invalid FieldDescriptorProto: oneof #${n} for field #${null!==(i=t.number)&&void 0!==i?i:-1} not found`)),r}function ei(t,e){switch(e){case"proto2":return void 0===t.oneofIndex&&t.label===Wt.OPTIONAL;case"proto3":return!0===t.proto3Optional;case"editions":return!1}}function ii(t,e,i){const{repeatedFieldEncoding:s}=i(t.edition);if(s!=se.PACKED)return!1;switch(e.type){case zt.STRING:case zt.BYTES:case zt.GROUP:case zt.MESSAGE:return!1;default:return!0}}function si(t,e,i,s){var n,r,o,a,h,c;switch(i.type){case zt.STRING:case zt.BYTES:case zt.GROUP:case zt.MESSAGE:return!1;default:switch(t.edition){case Jt.EDITION_PROTO2:return null!==(r=null===(n=i.options)||void 0===n?void 0:n.packed)&&void 0!==r&&r;case Jt.EDITION_PROTO3:return null===(a=null===(o=i.options)||void 0===o?void 0:o.packed)||void 0===a||a;default:{const{repeatedFieldEncoding:n}=s(t.edition,null!==(h=null==e?void 0:e.getFeatures())&&void 0!==h?h:t.getFeatures(),null===(c=i.options)||void 0===c?void 0:c.features);return n==se.PACKED}}}}const ni={[zt.DOUBLE]:I.DOUBLE,[zt.FLOAT]:I.FLOAT,[zt.INT64]:I.INT64,[zt.UINT64]:I.UINT64,[zt.INT32]:I.INT32,[zt.FIXED64]:I.FIXED64,[zt.FIXED32]:I.FIXED32,[zt.BOOL]:I.BOOL,[zt.STRING]:I.STRING,[zt.GROUP]:void 0,[zt.MESSAGE]:void 0,[zt.BYTES]:I.BYTES,[zt.UINT32]:I.UINT32,[zt.ENUM]:void 0,[zt.SFIXED32]:I.SFIXED32,[zt.SFIXED64]:I.SFIXED64,[zt.SINT32]:I.SINT32,[zt.SINT64]:I.SINT64};function ri(t,e){if(!t)return{leadingDetached:[],sourcePath:e};for(const i of t.location)if(i.path.length===e.length&&!i.path.some(((t,i)=>e[i]!==t)))return{leadingDetached:i.leadingDetachedComments,leading:i.leadingComments,trailing:i.trailingComments,sourcePath:e};return{leadingDetached:[],sourcePath:e}}var oi,ai;function hi(){var t,e,i;const s=[];this.repeated&&s.push("repeated"),this.optional&&s.push("optional");let n;switch("proto2"==("extension"===this.kind?this.file:this.parent.file).syntax&&this.proto.label===Wt.REQUIRED&&s.push("required"),this.fieldKind){case"scalar":n=I[this.scalar].toLowerCase();break;case"enum":n=this.enum.typeName;break;case"message":n=this.message.typeName;break;case"map":{const t=I[this.mapKey].toLowerCase();let e;switch(this.mapValue.kind){case"scalar":e=I[this.mapValue.scalar].toLowerCase();break;case"enum":e=this.mapValue.enum.typeName;break;case"message":e=this.mapValue.message.typeName}n=`map<${t}, ${e}>`;break}}s.push(`${n} ${this.name} = ${this.number}`);const r=[];void 0!==(null===(t=this.proto.options)||void 0===t?void 0:t.packed)&&r.push(`packed = ${this.proto.options.packed.toString()}`);let o=this.proto.defaultValue;return void 0!==o&&(this.proto.type!=zt.BYTES&&this.proto.type!=zt.STRING||(o='"'+o.replace('"','\\"')+'"'),r.push(`default = ${o}`)),void 0!==this.jsonName&&r.push(`json_name = "${this.jsonName}"`),void 0!==(null===(e=this.proto.options)||void 0===e?void 0:e.jstype)&&r.push(`jstype = ${Qt[this.proto.options.jstype]}`),!0===(null===(i=this.proto.options)||void 0===i?void 0:i.deprecated)&&r.push("deprecated = true"),r.length>0&&s.push("["+r.join(", ")+"]"),s.join(" ")}function ci(){const t=this.proto.defaultValue;if(void 0!==t)switch(this.fieldKind){case"enum":return function(t,e){const i=t.values.find((t=>t.name===e));return s(i,`cannot parse ${t.name} default value: ${e}`),i.number}(this.enum,t);case"scalar":return Ve(this.scalar,t);default:return}}function di(...t){const e={},i={},s={},n={add(t){if("fields"in t){if(!this.findMessage(t.typeName)){e[t.typeName]=t;for(const e of t.fields.list())"message"==e.kind?this.add(e.T):"map"==e.kind&&"message"==e.V.kind?this.add(e.V.T):"enum"==e.kind&&this.add(e.T)}}else if("methods"in t){if(!this.findService(t.typeName)){s[t.typeName]=t;for(const e of Object.values(t.methods))this.add(e.I),this.add(e.O)}}else i[t.typeName]=t},findMessage:t=>e[t],findEnum:t=>i[t],findService:t=>s[t]};for(const e of t)n.add(e);return n}!function(t){t[t.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",t[t.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",t[t.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",t[t.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",t[t.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",t[t.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",t[t.DescriptorProto_Field=2]="DescriptorProto_Field",t[t.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",t[t.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",t[t.DescriptorProto_Extension=6]="DescriptorProto_Extension",t[t.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",t[t.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",t[t.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"}(oi||(oi={}));class li extends y{constructor(t){super(),this.seconds=L.zero,this.nanos=0,Lt.util.initPartial(t,this)}fromJson(t,e){if("string"!=typeof t)throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${Lt.json.debug(t)}`);const i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const s=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(s))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=L.parse(s/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(t){const e=1e3*Number(this.seconds);if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const t=(this.nanos+1e9).toString().substring(1);i="000000"===t.substring(3)?"."+t.substring(0,3)+"Z":"000"===t.substring(6)?"."+t.substring(0,6)+"Z":"."+t+"Z"}return new Date(e).toISOString().replace(".000Z",i)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return li.fromDate(new Date)}static fromDate(t){const e=t.getTime();return new li({seconds:L.parse(Math.floor(e/1e3)),nanos:e%1e3*1e6})}static fromBinary(t,e){return(new li).fromBinary(t,e)}static fromJson(t,e){return(new li).fromJson(t,e)}static fromJsonString(t,e){return(new li).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(li,t,e)}}li.runtime=Lt,li.typeName="google.protobuf.Timestamp",li.fields=Lt.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]));class ui extends y{constructor(t){super(),this.seconds=L.zero,this.nanos=0,Lt.util.initPartial(t,this)}fromJson(t,e){if("string"!=typeof t)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${Lt.json.debug(t)}`);const i=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===i)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${Lt.json.debug(t)}`);const s=Number(i[1]);if(s>315576e6||s<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${Lt.json.debug(t)}`);if(this.seconds=L.parse(s),"string"==typeof i[2]){const t=i[2]+"0".repeat(9-i[2].length);this.nanos=parseInt(t),(s<0||Object.is(s,-0))&&(this.nanos=-this.nanos)}return this}toJson(t){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let e=this.seconds.toString();if(0!==this.nanos){let t=Math.abs(this.nanos).toString();t="0".repeat(9-t.length)+t,"000000"===t.substring(3)?t=t.substring(0,3):"000"===t.substring(6)&&(t=t.substring(0,6)),e+="."+t,this.nanos<0&&0==Number(this.seconds)&&(e="-"+e)}return e+"s"}static fromBinary(t,e){return(new ui).fromBinary(t,e)}static fromJson(t,e){return(new ui).fromJson(t,e)}static fromJsonString(t,e){return(new ui).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(ui,t,e)}}ui.runtime=Lt,ui.typeName="google.protobuf.Duration",ui.fields=Lt.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]));class pi extends y{constructor(t){super(),this.typeUrl="",this.value=new Uint8Array(0),Lt.util.initPartial(t,this)}toJson(t){var e;if(""===this.typeUrl)return{};const i=this.typeUrlToName(this.typeUrl),s=null===(e=null==t?void 0:t.typeRegistry)||void 0===e?void 0:e.findMessage(i);if(!s)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let n=s.fromBinary(this.value).toJson(t);return(i.startsWith("google.protobuf.")||null===n||Array.isArray(n)||"object"!=typeof n)&&(n={value:n}),n["@type"]=this.typeUrl,n}fromJson(t,e){var i;if(null===t||Array.isArray(t)||"object"!=typeof t)throw new Error("cannot decode message google.protobuf.Any from JSON: expected object but got "+(null===t?"null":Array.isArray(t)?"array":typeof t));if(0==Object.keys(t).length)return this;const s=t["@type"];if("string"!=typeof s||""==s)throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const n=this.typeUrlToName(s),r=null===(i=null==e?void 0:e.typeRegistry)||void 0===i?void 0:i.findMessage(n);if(!r)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${s} is not in the type registry`);let o;if(n.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))o=r.fromJson(t.value,e);else{const i=Object.assign({},t);delete i["@type"],o=r.fromJson(i,e)}return this.packFrom(o),this}packFrom(t){this.value=t.toBinary(),this.typeUrl=this.typeNameToUrl(t.getType().typeName)}unpackTo(t){return!!this.is(t.getType())&&(t.fromBinary(this.value),!0)}unpack(t){if(""===this.typeUrl)return;const e=t.findMessage(this.typeUrlToName(this.typeUrl));return e?e.fromBinary(this.value):void 0}is(t){if(""===this.typeUrl)return!1;const e=this.typeUrlToName(this.typeUrl);let i="";return i="string"==typeof t?t:t.typeName,e===i}typeNameToUrl(t){return`type.googleapis.com/${t}`}typeUrlToName(t){if(!t.length)throw new Error(`invalid type url: ${t}`);const e=t.lastIndexOf("/"),i=e>=0?t.substring(e+1):t;if(!i.length)throw new Error(`invalid type url: ${t}`);return i}static pack(t){const e=new pi;return e.packFrom(t),e}static fromBinary(t,e){return(new pi).fromBinary(t,e)}static fromJson(t,e){return(new pi).fromJson(t,e)}static fromJsonString(t,e){return(new pi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(pi,t,e)}}pi.runtime=Lt,pi.typeName="google.protobuf.Any",pi.fields=Lt.util.newFieldList((()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]));class fi extends y{constructor(t){super(),Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new fi).fromBinary(t,e)}static fromJson(t,e){return(new fi).fromJson(t,e)}static fromJsonString(t,e){return(new fi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(fi,t,e)}}fi.runtime=Lt,fi.typeName="google.protobuf.Empty",fi.fields=Lt.util.newFieldList((()=>[]));class mi extends y{constructor(t){super(),this.paths=[],Lt.util.initPartial(t,this)}toJson(t){return this.paths.map((t=>{if(t.match(/_[0-9]?_/g)||t.match(/[A-Z]/g))throw new Error('cannot encode google.protobuf.FieldMask to JSON: lowerCamelCase of path name "'+t+'" is irreversible');return function(t){let e=!1;const i=[];for(let s=0;s<t.length;s++){let n=t.charAt(s);switch(n){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i.push(n),e=!1;break;default:e&&(e=!1,n=n.toUpperCase()),i.push(n)}}return i.join("")}(t)})).join(",")}fromJson(t,e){if("string"!=typeof t)throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+Lt.json.debug(t));if(""===t)return this;return this.paths=t.split(",").map((function(t){if(t.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const e=t.replace(/[A-Z]/g,(t=>"_"+t.toLowerCase()));return"_"===e[0]?e.substring(1):e})),this}static fromBinary(t,e){return(new mi).fromBinary(t,e)}static fromJson(t,e){return(new mi).fromJson(t,e)}static fromJsonString(t,e){return(new mi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(mi,t,e)}}mi.runtime=Lt,mi.typeName="google.protobuf.FieldMask",mi.fields=Lt.util.newFieldList((()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}])),function(t){t[t.NULL_VALUE=0]="NULL_VALUE"}(ai||(ai={})),Lt.util.setEnumType(ai,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class gi extends y{constructor(t){super(),this.fields={},Lt.util.initPartial(t,this)}toJson(t){const e={};for(const[i,s]of Object.entries(this.fields))e[i]=s.toJson(t);return e}fromJson(t,e){if("object"!=typeof t||null==t||Array.isArray(t))throw new Error("cannot decode google.protobuf.Struct from JSON "+Lt.json.debug(t));for(const[e,i]of Object.entries(t))this.fields[e]=vi.fromJson(i);return this}static fromBinary(t,e){return(new gi).fromBinary(t,e)}static fromJson(t,e){return(new gi).fromJson(t,e)}static fromJsonString(t,e){return(new gi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(gi,t,e)}}gi.runtime=Lt,gi.typeName="google.protobuf.Struct",gi.fields=Lt.util.newFieldList((()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:vi}}]));class vi extends y{constructor(t){super(),this.kind={case:void 0},Lt.util.initPartial(t,this)}toJson(t){switch(this.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(this.kind.value))throw new Error("google.protobuf.Value cannot be NaN or Infinity");return this.kind.value;case"boolValue":case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},t),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(t,e){switch(typeof t){case"number":this.kind={case:"numberValue",value:t};break;case"string":this.kind={case:"stringValue",value:t};break;case"boolean":this.kind={case:"boolValue",value:t};break;case"object":null===t?this.kind={case:"nullValue",value:ai.NULL_VALUE}:Array.isArray(t)?this.kind={case:"listValue",value:yi.fromJson(t)}:this.kind={case:"structValue",value:gi.fromJson(t)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+Lt.json.debug(t))}return this}static fromBinary(t,e){return(new vi).fromBinary(t,e)}static fromJson(t,e){return(new vi).fromJson(t,e)}static fromJsonString(t,e){return(new vi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(vi,t,e)}}vi.runtime=Lt,vi.typeName="google.protobuf.Value",vi.fields=Lt.util.newFieldList((()=>[{no:1,name:"null_value",kind:"enum",T:Lt.getEnumType(ai),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:gi,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:yi,oneof:"kind"}]));class yi extends y{constructor(t){super(),this.values=[],Lt.util.initPartial(t,this)}toJson(t){return this.values.map((t=>t.toJson()))}fromJson(t,e){if(!Array.isArray(t))throw new Error("cannot decode google.protobuf.ListValue from JSON "+Lt.json.debug(t));for(let e of t)this.values.push(vi.fromJson(e));return this}static fromBinary(t,e){return(new yi).fromBinary(t,e)}static fromJson(t,e){return(new yi).fromJson(t,e)}static fromJsonString(t,e){return(new yi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(yi,t,e)}}yi.runtime=Lt,yi.typeName="google.protobuf.ListValue",yi.fields=Lt.util.newFieldList((()=>[{no:1,name:"values",kind:"message",T:vi,repeated:!0}]));class bi extends y{constructor(t){super(),this.value=0,Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.DOUBLE,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.DOUBLE,t)}catch(t){let e='cannot decode message google.protobuf.DoubleValue from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new bi).fromBinary(t,e)}static fromJson(t,e){return(new bi).fromJson(t,e)}static fromJsonString(t,e){return(new bi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(bi,t,e)}}bi.runtime=Lt,bi.typeName="google.protobuf.DoubleValue",bi.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:1}])),bi.fieldWrapper={wrapField:t=>new bi({value:t}),unwrapField:t=>t.value};class Ii extends y{constructor(t){super(),this.value=0,Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.FLOAT,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.FLOAT,t)}catch(t){let e='cannot decode message google.protobuf.FloatValue from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new Ii).fromBinary(t,e)}static fromJson(t,e){return(new Ii).fromJson(t,e)}static fromJsonString(t,e){return(new Ii).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Ii,t,e)}}Ii.runtime=Lt,Ii.typeName="google.protobuf.FloatValue",Ii.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:2}])),Ii.fieldWrapper={wrapField:t=>new Ii({value:t}),unwrapField:t=>t.value};class wi extends y{constructor(t){super(),this.value=L.zero,Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.INT64,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.INT64,t)}catch(t){let e='cannot decode message google.protobuf.Int64Value from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new wi).fromBinary(t,e)}static fromJson(t,e){return(new wi).fromJson(t,e)}static fromJsonString(t,e){return(new wi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(wi,t,e)}}wi.runtime=Lt,wi.typeName="google.protobuf.Int64Value",wi.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:3}])),wi.fieldWrapper={wrapField:t=>new wi({value:t}),unwrapField:t=>t.value};class Pi extends y{constructor(t){super(),this.value=L.zero,Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.UINT64,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.UINT64,t)}catch(t){let e='cannot decode message google.protobuf.UInt64Value from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new Pi).fromBinary(t,e)}static fromJson(t,e){return(new Pi).fromJson(t,e)}static fromJsonString(t,e){return(new Pi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Pi,t,e)}}Pi.runtime=Lt,Pi.typeName="google.protobuf.UInt64Value",Pi.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:4}])),Pi.fieldWrapper={wrapField:t=>new Pi({value:t}),unwrapField:t=>t.value};class Ti extends y{constructor(t){super(),this.value=0,Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.INT32,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.INT32,t)}catch(t){let e='cannot decode message google.protobuf.Int32Value from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new Ti).fromBinary(t,e)}static fromJson(t,e){return(new Ti).fromJson(t,e)}static fromJsonString(t,e){return(new Ti).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Ti,t,e)}}Ti.runtime=Lt,Ti.typeName="google.protobuf.Int32Value",Ti.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:5}])),Ti.fieldWrapper={wrapField:t=>new Ti({value:t}),unwrapField:t=>t.value};class _i extends y{constructor(t){super(),this.value=0,Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.UINT32,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.UINT32,t)}catch(t){let e='cannot decode message google.protobuf.UInt32Value from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new _i).fromBinary(t,e)}static fromJson(t,e){return(new _i).fromJson(t,e)}static fromJsonString(t,e){return(new _i).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(_i,t,e)}}_i.runtime=Lt,_i.typeName="google.protobuf.UInt32Value",_i.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:13}])),_i.fieldWrapper={wrapField:t=>new _i({value:t}),unwrapField:t=>t.value};class Si extends y{constructor(t){super(),this.value=!1,Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.BOOL,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.BOOL,t)}catch(t){let e='cannot decode message google.protobuf.BoolValue from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new Si).fromBinary(t,e)}static fromJson(t,e){return(new Si).fromJson(t,e)}static fromJsonString(t,e){return(new Si).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Si,t,e)}}Si.runtime=Lt,Si.typeName="google.protobuf.BoolValue",Si.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:8}])),Si.fieldWrapper={wrapField:t=>new Si({value:t}),unwrapField:t=>t.value};class Ai extends y{constructor(t){super(),this.value="",Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.STRING,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.STRING,t)}catch(t){let e='cannot decode message google.protobuf.StringValue from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new Ai).fromBinary(t,e)}static fromJson(t,e){return(new Ai).fromJson(t,e)}static fromJsonString(t,e){return(new Ai).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Ai,t,e)}}Ai.runtime=Lt,Ai.typeName="google.protobuf.StringValue",Ai.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:9}])),Ai.fieldWrapper={wrapField:t=>new Ai({value:t}),unwrapField:t=>t.value};class xi extends y{constructor(t){super(),this.value=new Uint8Array(0),Lt.util.initPartial(t,this)}toJson(t){return Lt.json.writeScalar(I.BYTES,this.value,!0)}fromJson(t,e){try{this.value=Lt.json.readScalar(I.BYTES,t)}catch(t){let e='cannot decode message google.protobuf.BytesValue from JSON"';throw t instanceof Error&&t.message.length>0&&(e+=`: ${t.message}`),new Error(e)}return this}static fromBinary(t,e){return(new xi).fromBinary(t,e)}static fromJson(t,e){return(new xi).fromJson(t,e)}static fromJsonString(t,e){return(new xi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(xi,t,e)}}xi.runtime=Lt,xi.typeName="google.protobuf.BytesValue",xi.fields=Lt.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:12}])),xi.fieldWrapper={wrapField:t=>new xi({value:t}),unwrapField:t=>t.value};const ki=[pi,ui,fi,mi,gi,vi,yi,li,ui,bi,Ii,wi,Ti,_i,Pi,Si,Ai,xi],Ei=[p(ai)];function Ci(t,e=!0){const i=t instanceof Uint8Array||t instanceof he?qe(t):t,n={},r={},o={};if(e){for(const t of ki)r[t.typeName]=t;for(const t of Ei)n[t.typeName]=t}return{findEnum(t){const e=n[t];if(e)return e;const s=i.enums.get(t);if(!s)return;const r=("proto3"==s.file.syntax?Lt:Rt).makeEnumType(t,s.values.map((t=>({no:t.number,name:t.name,localName:yt(t)}))),{});return n[t]=r,r},findMessage(t){const e=r[t];if(e)return e;const s=i.messages.get(t);if(!s)return;const n="proto3"==s.file.syntax?Lt:Rt,o=[],a=n.makeMessageType(t,(()=>o),{localName:yt(s)});r[t]=a;for(const t of s.fields){const e=Oi(t,this);o.push(e)}return a},findService(t){const e=o[t];if(e)return e;const n=i.services.get(t);if(!n)return;const r={};for(const t of n.methods){const e=this.findMessage(t.input.typeName),i=this.findMessage(t.output.typeName);s(e,`message "${t.input.typeName}" for ${t.toString()} not found`),s(i,`output message "${t.output.typeName}" for ${t.toString()} not found`),r[yt(t)]={name:t.name,I:e,O:i,kind:t.methodKind,idempotency:t.idempotency}}return o[t]={typeName:n.typeName,methods:r}}}}function Oi(t,e){switch(t.fieldKind){case"map":return function(t,e){const i={kind:"map",no:t.number,name:t.name,jsonName:t.jsonName,K:t.mapKey};if(t.mapValue.message){const n=e.findMessage(t.mapValue.message.typeName);return s(n,`message "${t.mapValue.message.typeName}" for ${t.toString()} not found`),Object.assign(Object.assign({},i),{V:{kind:"message",T:n}})}if(t.mapValue.enum){const n=e.findEnum(t.mapValue.enum.typeName);return s(n,`enum "${t.mapValue.enum.typeName}" for ${t.toString()} not found`),Object.assign(Object.assign({},i),{V:{kind:"enum",T:n}})}return Object.assign(Object.assign({},i),{V:{kind:"scalar",T:t.mapValue.scalar}})}(t,e);case"message":return function(t,e){const i=e.findMessage(t.message.typeName);s(i,`message "${t.message.typeName}" for ${t.toString()} not found`);const n={kind:"message",no:t.number,name:t.name,jsonName:t.jsonName,T:i,delimited:t.proto.type==zt.GROUP};if(t.repeated)return Object.assign(Object.assign({},n),{repeated:!0,packed:t.packed,oneof:void 0});if(t.oneof)return Object.assign(Object.assign({},n),{oneof:t.oneof.name});if(t.optional)return Object.assign(Object.assign({},n),{opt:!0});return n}(t,e);case"enum":{const i=function(t,e){const i=e.findEnum(t.enum.typeName);s(i,`enum "${t.enum.typeName}" for ${t.toString()} not found`);const n={kind:"enum",no:t.number,name:t.name,jsonName:t.jsonName,T:i};if(t.repeated)return Object.assign(Object.assign({},n),{repeated:!0,packed:t.packed,oneof:void 0});if(t.oneof)return Object.assign(Object.assign({},n),{oneof:t.oneof.name});if(t.optional)return Object.assign(Object.assign({},n),{opt:!0});return n}(t,e);return i.default=t.getDefaultValue(),i}case"scalar":{const e=function(t){const e=t.longType==w.STRING?{L:w.STRING}:{},i=Object.assign({kind:"scalar",no:t.number,name:t.name,jsonName:t.jsonName,T:t.scalar},e);if(t.repeated)return Object.assign(Object.assign({},i),{repeated:!0,packed:t.packed,oneof:void 0,T:t.scalar});if(t.oneof)return Object.assign(Object.assign({},i),{oneof:t.oneof.name});if(t.optional)return Object.assign(Object.assign({},i),{opt:!0});return i}(t);return e.default=t.getDefaultValue(),e}}}function Li(t){if(!(t instanceof y))return t;const e=t.getType(),i={};for(const s of e.fields.byMember()){const e=t[s.localName];let n;if(s.repeated)n=e.map((t=>Mi(t)));else if("map"==s.kind){n={};for(const[t,i]of Object.entries(e))n[t]=Mi(i)}else if("oneof"==s.kind){n=s.findField(e.case)?{case:e.case,value:Mi(e.value)}:{case:void 0}}else n=Mi(e);i[s.localName]=n}return i}function Mi(t){if(void 0===t)return t;if(t instanceof y)return Li(t);if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}class Ri extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ri).fromBinary(t,e)}static fromJson(t,e){return(new Ri).fromJson(t,e)}static fromJsonString(t,e){return(new Ri).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Ri,t,e)}}Ri.runtime=Rt,Ri.typeName="google.protobuf.compiler.Version",Ri.fields=Rt.util.newFieldList((()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]));class Bi extends y{constructor(t){super(),this.fileToGenerate=[],this.protoFile=[],this.sourceFileDescriptors=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Bi).fromBinary(t,e)}static fromJson(t,e){return(new Bi).fromJson(t,e)}static fromJsonString(t,e){return(new Bi).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Bi,t,e)}}Bi.runtime=Rt,Bi.typeName="google.protobuf.compiler.CodeGeneratorRequest",Bi.fields=Rt.util.newFieldList((()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:ce,repeated:!0},{no:17,name:"source_file_descriptors",kind:"message",T:ce,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:Ri,opt:!0}]));class Di extends y{constructor(t){super(),this.file=[],Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new Di).fromBinary(t,e)}static fromJson(t,e){return(new Di).fromJson(t,e)}static fromJsonString(t,e){return(new Di).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(Di,t,e)}}var Ni,Fi,$i,Vi;Di.runtime=Rt,Di.typeName="google.protobuf.compiler.CodeGeneratorResponse",Di.fields=Rt.util.newFieldList((()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:ji,repeated:!0}])),function(t){t[t.NONE=0]="NONE",t[t.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL",t[t.SUPPORTS_EDITIONS=2]="SUPPORTS_EDITIONS"}(Ni||(Ni={})),Rt.util.setEnumType(Ni,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"},{no:2,name:"FEATURE_SUPPORTS_EDITIONS"}]);class ji extends y{constructor(t){super(),Rt.util.initPartial(t,this)}static fromBinary(t,e){return(new ji).fromBinary(t,e)}static fromJson(t,e){return(new ji).fromJson(t,e)}static fromJsonString(t,e){return(new ji).fromJsonString(t,e)}static equals(t,e){return Rt.util.equals(ji,t,e)}}ji.runtime=Rt,ji.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",ji.fields=Rt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:Fe,opt:!0}]));class Ui extends y{constructor(t){super(),this.fileName="",Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ui).fromBinary(t,e)}static fromJson(t,e){return(new Ui).fromJson(t,e)}static fromJsonString(t,e){return(new Ui).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Ui,t,e)}}Ui.runtime=Lt,Ui.typeName="google.protobuf.SourceContext",Ui.fields=Lt.util.newFieldList((()=>[{no:1,name:"file_name",kind:"scalar",T:9}])),function(t){t[t.PROTO2=0]="PROTO2",t[t.PROTO3=1]="PROTO3",t[t.EDITIONS=2]="EDITIONS"}(Fi||(Fi={})),Lt.util.setEnumType(Fi,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"},{no:2,name:"SYNTAX_EDITIONS"}]);class qi extends y{constructor(t){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=Fi.PROTO2,this.edition="",Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new qi).fromBinary(t,e)}static fromJson(t,e){return(new qi).fromJson(t,e)}static fromJsonString(t,e){return(new qi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(qi,t,e)}}qi.runtime=Lt,qi.typeName="google.protobuf.Type",qi.fields=Lt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:Hi,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:zi,repeated:!0},{no:5,name:"source_context",kind:"message",T:Ui},{no:6,name:"syntax",kind:"enum",T:Lt.getEnumType(Fi)},{no:7,name:"edition",kind:"scalar",T:9}]));class Hi extends y{constructor(t){super(),this.kind=$i.TYPE_UNKNOWN,this.cardinality=Vi.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new Hi).fromBinary(t,e)}static fromJson(t,e){return(new Hi).fromJson(t,e)}static fromJsonString(t,e){return(new Hi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Hi,t,e)}}Hi.runtime=Lt,Hi.typeName="google.protobuf.Field",Hi.fields=Lt.util.newFieldList((()=>[{no:1,name:"kind",kind:"enum",T:Lt.getEnumType($i)},{no:2,name:"cardinality",kind:"enum",T:Lt.getEnumType(Vi)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:zi,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}])),function(t){t[t.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",t[t.TYPE_DOUBLE=1]="TYPE_DOUBLE",t[t.TYPE_FLOAT=2]="TYPE_FLOAT",t[t.TYPE_INT64=3]="TYPE_INT64",t[t.TYPE_UINT64=4]="TYPE_UINT64",t[t.TYPE_INT32=5]="TYPE_INT32",t[t.TYPE_FIXED64=6]="TYPE_FIXED64",t[t.TYPE_FIXED32=7]="TYPE_FIXED32",t[t.TYPE_BOOL=8]="TYPE_BOOL",t[t.TYPE_STRING=9]="TYPE_STRING",t[t.TYPE_GROUP=10]="TYPE_GROUP",t[t.TYPE_MESSAGE=11]="TYPE_MESSAGE",t[t.TYPE_BYTES=12]="TYPE_BYTES",t[t.TYPE_UINT32=13]="TYPE_UINT32",t[t.TYPE_ENUM=14]="TYPE_ENUM",t[t.TYPE_SFIXED32=15]="TYPE_SFIXED32",t[t.TYPE_SFIXED64=16]="TYPE_SFIXED64",t[t.TYPE_SINT32=17]="TYPE_SINT32",t[t.TYPE_SINT64=18]="TYPE_SINT64"}($i||($i={})),Lt.util.setEnumType($i,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.OPTIONAL=1]="OPTIONAL",t[t.REQUIRED=2]="REQUIRED",t[t.REPEATED=3]="REPEATED"}(Vi||(Vi={})),Lt.util.setEnumType(Vi,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class Ji extends y{constructor(t){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=Fi.PROTO2,this.edition="",Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new Ji).fromBinary(t,e)}static fromJson(t,e){return(new Ji).fromJson(t,e)}static fromJsonString(t,e){return(new Ji).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Ji,t,e)}}Ji.runtime=Lt,Ji.typeName="google.protobuf.Enum",Ji.fields=Lt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:Gi,repeated:!0},{no:3,name:"options",kind:"message",T:zi,repeated:!0},{no:4,name:"source_context",kind:"message",T:Ui},{no:5,name:"syntax",kind:"enum",T:Lt.getEnumType(Fi)},{no:6,name:"edition",kind:"scalar",T:9}]));class Gi extends y{constructor(t){super(),this.name="",this.number=0,this.options=[],Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new Gi).fromBinary(t,e)}static fromJson(t,e){return(new Gi).fromJson(t,e)}static fromJsonString(t,e){return(new Gi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Gi,t,e)}}Gi.runtime=Lt,Gi.typeName="google.protobuf.EnumValue",Gi.fields=Lt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:zi,repeated:!0}]));class zi extends y{constructor(t){super(),this.name="",Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new zi).fromBinary(t,e)}static fromJson(t,e){return(new zi).fromJson(t,e)}static fromJsonString(t,e){return(new zi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(zi,t,e)}}zi.runtime=Lt,zi.typeName="google.protobuf.Option",zi.fields=Lt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:pi}]));class Wi extends y{constructor(t){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=Fi.PROTO2,Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new Wi).fromBinary(t,e)}static fromJson(t,e){return(new Wi).fromJson(t,e)}static fromJsonString(t,e){return(new Wi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Wi,t,e)}}Wi.runtime=Lt,Wi.typeName="google.protobuf.Api",Wi.fields=Lt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:Yi,repeated:!0},{no:3,name:"options",kind:"message",T:zi,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:Ui},{no:6,name:"mixins",kind:"message",T:Xi,repeated:!0},{no:7,name:"syntax",kind:"enum",T:Lt.getEnumType(Fi)}]));class Yi extends y{constructor(t){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=Fi.PROTO2,Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new Yi).fromBinary(t,e)}static fromJson(t,e){return(new Yi).fromJson(t,e)}static fromJsonString(t,e){return(new Yi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Yi,t,e)}}Yi.runtime=Lt,Yi.typeName="google.protobuf.Method",Yi.fields=Lt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:zi,repeated:!0},{no:7,name:"syntax",kind:"enum",T:Lt.getEnumType(Fi)}]));class Xi extends y{constructor(t){super(),this.name="",this.root="",Lt.util.initPartial(t,this)}static fromBinary(t,e){return(new Xi).fromBinary(t,e)}static fromJson(t,e){return(new Xi).fromJson(t,e)}static fromJsonString(t,e){return(new Xi).fromJsonString(t,e)}static equals(t,e){return Lt.util.equals(Xi,t,e)}}Xi.runtime=Lt,Xi.typeName="google.protobuf.Mixin",Xi.fields=Lt.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}]))}},e={},i,s,n,r,o,a;function h(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,h),n.loaded=!0,n.exports}h.m=t,h.n=t=>{var e=t&&t.et?()=>t.default:()=>t;return h.d(e,{a:e}),e},s=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,h.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.et)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null);h.r(n);var r={};i=i||[null,s({}),s([]),s(s)];for(var o=2&e&&t;"object"==typeof o&&!~i.indexOf(o);o=s(o))Object.getOwnPropertyNames(o).forEach((e=>r[e]=()=>t[e]));return r.default=()=>t,h.d(n,r),n},h.d=(t,e)=>{for(var i in e)h.o(e,i)&&!h.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},h.f={},h.e=t=>Promise.all(Object.keys(h.f).reduce(((e,i)=>(h.f[i](t,e),e)),[])),h.u=t=>"webpack_container_remote_CookieSync_UserSync"===t?t+".94ba6e8730e722203e99.js":"floating"===t?t+".949ef1216b23294bebb8.js":void 0,h.miniCssF=t=>{},h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),h.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},r="cnx_playspace:",h.l=(t,e,i,s)=>{if(n[t])n[t].push(e);else{var o,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==r+i){o=l;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,h.nc&&o.setAttribute("nonce",h.nc),o.setAttribute("data-webpack",r+i),o.src=t),n[t]=[e];var u=(e,i)=>{o.onerror=o.onload=null,clearTimeout(p);var s=n[t];if(delete n[t],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((t=>t(i))),e)return e(i)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),a&&document.head.appendChild(o)}},h.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"et",{value:!0})},h.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),o={webpack_container_remote_CookieSync_UserSync:[8117]},a={8117:["default","./UserSync",427]},h.f.remotes=(t,e)=>{h.o(o,t)&&o[t].forEach((t=>{var i=h.R;i||(i=[]);var s=a[t];if(!(i.indexOf(s)>=0)){if(i.push(s),s.p)return e.push(s.p);var n=e=>{e||(e=new Error("Container missing")),"string"==typeof e.message&&(e.message+='\nwhile loading "'+s[1]+'" from '+s[2]),h.m[t]=()=>{throw e},s.p=0},r=(t,i,r,o,a,h)=>{try{var c=t(i,r);if(!c||!c.then)return a(c,o,h);var d=c.then((t=>a(t,o)),n);if(!h)return d;e.push(s.p=d)}catch(t){n(t)}},o=(t,e,n)=>r(e.get,s[1],i,0,c,n),c=e=>{s.p=1,h.m[t]=t=>{t.exports=e()}};r(h,s[2],0,0,((t,e,i)=>t?r(h.I,s[0],0,t,o,i):n()),1)}}))},(()=>{h.S={};var t={},e={};h.I=(i,s)=>{s||(s=[]);var n=e[i];if(n||(n=e[i]={}),!(s.indexOf(n)>=0)){if(s.push(n),t[i])return t[i];h.o(h.S,i)||(h.S[i]={});h.S[i];var r=[];if("default"===i)(t=>{var e=t=>{return e="Initialization of sharing external failed: "+t,void("undefined"!=typeof console&&console.warn&&console.warn(e));var e};try{var n=h(t);if(!n)return;var o=t=>t&&t.init&&t.init(h.S[i],s);if(n.then)return r.push(n.then(o,e));var a=o(n);if(a&&a.then)return r.push(a.catch(e))}catch(t){e(t)}})(427);return r.length?t[i]=Promise.all(r).then((()=>t[i]=1)):t[i]=1}}})(),(()=>{var t;h.g.importScripts&&(t=h.g.location+"");var e=h.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&!t;)t=i[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),h.p=t})(),(()=>{var t={"connatix.playspace":0};h.f.j=(e,i)=>{var s=h.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else if("webpack_container_remote_CookieSync_UserSync"!=e){var n=new Promise(((i,n)=>s=t[e]=[i,n]));i.push(s[2]=n);var r=h.p+h.u(e),o=new Error;h.l(r,(i=>{if(h.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,s[1](o)}}),"chunk-"+e,e)}else t[e]=0};var e=(e,i)=>{var s,n,[r,o,a]=i,c=0;if(r.some((e=>0!==t[e]))){for(s in o)h.o(o,s)&&(h.m[s]=o[s]);if(a)a(h)}for(e&&e(i);c<r.length;c++)n=r[c],h.o(t,n)&&t[n]&&t[n][0](),t[n]=0},i=self.cnx_webpack_global_playspace=self.cnx_webpack_global_playspace||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var c={};(()=>{"use strict";h(8660),h(7175);var t=h(6628),e=h(8657);h.p=(0,t.A)(e.o.connatix);var i=h(289),s=h(6174),n=h(5027),r=h(2641),o=h(5650),a=h(4798);class c{static toProtoStandaloneLineItem(t){return{lineItem:c.toProtoLineItem(t.LineItem),bids:t.Bids.map((t=>c.toProtoBid(t)))}}static toProtoLineItem(t){const{PublisherLineItemId:e,AdvertiserLineItemId:s,Url:n,Type:r,RequireSoundOn:o,RequireViewability:a,RemoveOutOfFocus:h,GdprvId:d,Trackers:l,Duration:u,Renditions:p,MediaCreativeId:f,IgnoreFilledRequests:m,RequestsCap:g,ImpressionsCap:v,Priority:y,PbjsTimeout:b,MediaCreativeClickUrl:I,RequestsCapTimeframe:w,ImpressionsCapTimeframe:P,CapType:T,CreativeHlsFileName:_,TimeBetweenRequests:S,MediaTargeting:A,MediaKeywordsTargeting:x,MediaLanguageTargeting:k,AdType:E,OverlayTime:C,FloorPrice:O,AdBreakSettings:L,OutOfViewPauseType:M,MoatTrackingEnabled:R,CreativeId:B,BlockedDomainsRevisionNumber:D,AdvertiserContextualTargeting:N,PublisherContextualTargeting:F,PlayerSizeTargetings:$,AmazonDealId:V,PlayerOrientationTargeting:j,SkipMin:U,Skippability:q,AdOpportunityForceCalling:H,NetworkExpiryTime:J,NonlinearLineItemSettings:G,NewFloorPrices:z,PrebidParams:W,IsPmp:Y,QueryJsTargeting:X,AdxInfoModel:Q,IntentIQ:K,OptimizeFloorPrice:Z,AdvertiserAccountId:tt,ExternallyManaged:et,ShouldThrottlePacing:it,GrossNetPercentageDifference:st}=t,nt={publisherLineItemId:e,advertiserLineItemId:s,adTag:n,creativeType:r,sound:o,viewability:a,removeOutOfFocus:h,vendorId:d,trackers:c.getLineItemTrackers(l),duration:u,renditions:c.getLineItemRenditions(p),mediaCreativeId:f,ignoreFilledRequests:m,requestCap:g,impressionCap:v,lineItemPriority:y,headerBidderTimeout:b,mediaCreativeClickUrl:I,resetRequestsCapTime:w,resetImpressionsCapTime:P,resetCapType:T,creativeHlsFileName:_,timeBetweenRequests:S,mediaIdTargeting:c.getLineItemMediaTargeting(A),mediaKeywordsTargeting:c.getLineItemMediaTargeting(x),mediaLanguageTargeting:c.getLineItemMediaTargeting(k),adType:E,overlayTime:C,floorPrice:O,adBreakSettings:c.getLineItemAdBreakSettings(L),pauseAdOutOfView:M,moatTrackingEnabled:R,cnxCreativeId:B,blockedDomainsRevisionNumber:D,advertiserContextualTargeting:c.getLineItemContextualTargeting(N),publisherContextualTargeting:c.getLineItemContextualTargeting(F),playerSizeTargetings:c.getLineItemPlayerSizeTargetings($),amazonDealId:V,playerOrientationTargeting:j,skipMin:U,skippability:q,forceCallingInEveryAO:H,networkExpiryTimeSeconds:J,nonlinearLineItemSettings:c.getLineItemNonlinearLineItemSettings(G),floorPricesNew:c.getLineItemFloorPricesNew(z),prebidJsBidParamsJSONString:W,isPMP:Y,queryTargeting:c.getLineItemQueryTargeting(X),adxFloorPricePredictionList:c.getLineItemAdxFloorPricePredictionList(Q),protoIntentiqResponseData:c.getLineItemProtoIntentiqResponseData(K),optimizeFloorPrice:Z,advertiserAccountId:tt,externallyManaged:et,shouldThrottlePacing:it,grossNetPercentageDifference:st};return c.applyDefaults(nt,i.ProtoLineItem)}static applyDefaults(t,e){const i=c.generateDefaultObject(e);for(const e in t)!(0,a.Ft)(t[e])&&(0,a.$K)(t[e])||(t[e]=i[e]);return t}static getLineItemTrackers(t){if(!(0,o.BZ)(t))return;const e=t.map((t=>({type:t.Type,trigger:t.Trigger,url:t.Url})));return c.applyDefaults(e,i.CreativeTrackerViewModel)}static getLineItemRenditions(t){if(!(0,o.BZ)(t))return;const e=t.map((t=>({height:t.Height,codec:t.VideoCodec,file:t.FileName})));return c.applyDefaults(e,i.ProtoRendition)}static getLineItemMediaTargeting(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({choiceCriteria:t.Type,items:t.Items},i.ProtoTargetingChoiceModel)}static getLineItemAdBreakSettings(t){var e,s,n;if(!(0,a.$K)(t)||!(0,a.as)(t))return;let r,h;return(0,o.BZ)(t.AdBreakTargeting)&&(r=c.applyDefaults({adBreakTargeting:t.AdBreakTargeting.map((t=>({adRollType:t.AdRollType,adBreakType:t.AdBreakType})))},i.ProtoLineItemAdBreakTargeting)),(0,a.as)(t.AdPodTargeting)&&(h=c.applyDefaults({adPodTargeting:{targetingType:null===(e=null==t?void 0:t.AdPodTargeting)||void 0===e?void 0:e.TargetingType,adSlotPositions:null===(s=null==t?void 0:t.AdPodTargeting)||void 0===s?void 0:s.AdSlotPositions,adSlotTargetingType:null===(n=null==t?void 0:t.AdPodTargeting)||void 0===n?void 0:n.AdSlotTargetingType}},i.ProtoLineItemAdPodTargeting)),Object.assign(Object.assign({},r),h)}static getLineItemContextualTargeting(t){if((0,o.BZ)(t))return t.map((t=>c.applyDefaults({filters:t.Filters.map((t=>c.applyDefaults({type:t.Type,level:t.Level,hashedItemsIds:t.HashedItemsIds},i.ProtoContextualTargetingFilterModel)))},i.ProtoContextualTargetingCaseModel)))}static getLineItemPlayerSizeTargetings(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({sizeChoiceCriteria:t.Type,minWidth:t.MinWidth,maxWidth:t.MaxWidth},i.ProtoPlayerSizeTargetings)}static getLineItemNonlinearLineItemSettings(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({nonLinearRequestType:t.NonlinearRequestType,nonLinearAdTimeSeconds:t.NonlinearAdTimeSeconds},i.ProtoNonlinearLineItemSettings)}static getLineItemFloorPricesNew(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({floorPrices:t.FloorPrices.map((t=>c.applyDefaults({floorPriceBypassReason:t.Reason,floorPrice:t.Reason},i.ProtoFloorPricesData))),recommended:t.Recommended},i.ProtoFloorPricesNewModel)}static getLineItemQueryTargeting(t){if((0,o.BZ)(t))return t.map((t=>c.applyDefaults({rule:t.Type,keyValue:t.Values},i.ProtoLineItemQueryStringTargeting)))}static getLineItemAdxFloorPricePredictionList(t){if((0,o.BZ)(t))return t.map((t=>c.applyDefaults({predictedPriceObfuscated:t.PricePredictionObfuscated,floorPriceObfuscated:t.FloorPriceObfuscated,uprQueryName:t.UprQueryName,uprQueryValue:t.UprQueryValue},i.ProtoAdxFloorPricePrediction)))}static getLineItemProtoIntentiqResponseData(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({vendorName:t.VendorName},i.ProtoIntentIQResponseData)}static toProtoBid(t){const{WinNoticeUrl:e,AdQualityCheckUrl:s,Content:n,EncryptedPrice:r,CustomClientEncryptedPrice:o,CreativeId:a,SeatId:h,Adomain:d,SyncedUser:l,RequestedFloorPrice:u,CampaignId:p,Width:f,Height:m,BillingNoticeUrls:g,Mime:v,BidPrice:y,DspId:b,CnxBidId:I,LogAuctionInformation:w,AuctionBidId:P,BidId:T,FloorPriceInformation:_,Discount:S,LiveRamp:A,ServerBillingNoticeUrls:x,IIQLookup:k,IsLexiconEnabled:E}=t,C={winNoticeUrl:e,adQualityCheckUrl:s,vastTag:n,encryptedPrice:r,customClientEncryptedPrice:o,creativeId:a,seatId:h,adomain:d,syncedUser:l,requestedFloorPrice:u,campaignId:p,width:f,height:m,billingNoticeUrlList:g,mime:v,gtkpbp:y,dspId:b,cnxBidId:I,logAuctionInformation:w,auctionBidId:P,rtbRequestId:T,floorPriceInformation:c.getBidFloorPriceInformation(_),discount:c.getBidDiscount(S),liveRampType:A,serverBillingNoticeUrls:x,hasLexiconEnvelopeBeenUsed:E,hasIIQLookup:k};return c.applyDefaults(C,i.ProtoRtbBid)}static getBidFloorPriceInformation(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({floorPrices:t.FloorPrices,floorPriceIndexUsed:t.FloorPriceIndexUsed,floorPriceBypassReason:t.FloorPriceFactorBypassReason,adxPredictedFloorPrice:t.AdxPredictedFloorPrice},i.ProtoFloorPriceInformation)}static getBidDiscount(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({id:t.Id,rate:t.Rate},i.ProtoDiscount)}static generateDefaultObject(t){const e=t.encode({}).finish();return t.toObject(t.decode(e),{defaults:!0,arrays:!0,objects:!0})}}class d{constructor(t){this.nV=[],(0,a.$K)(t)&&(0,o.BZ)(t)&&(this.nV=t.map((t=>c.toProtoStandaloneLineItem(t))),this.rV())}get bestStandaloneAd(){if(this.aV())return this.hV}get standaloneLineItemsWithBids(){return this.nV}filterOutDuplicatesForStandalone(t){if(!(0,o.BZ)(this.nV))return t;return this.nV.map((t=>t.lineItem)).reduce(((t,e)=>{const i=t.find((t=>t.advertiserLineItemId===e.advertiserLineItemId));if(i){const s=t.indexOf(i);t[s]=e}else t.push(e);return t}),t)}rV(){let t=Number.MIN_SAFE_INTEGER;this.nV.forEach((e=>{const{lineItem:i}=e;e.bids.forEach((e=>{const s=(0,r.RC)(e.gtkpbp);s>t&&(t=s,this.hV={bid:e,lineItem:i})}))}))}aV(){return(0,o.BZ)(this.nV)}}var l=h(307),u=h(6027),p=(h(7129),h(5742)),f=h(6153),m=h(2859),g=h(4772);class v{constructor(t=!1){this._debugLogging=t,this.cV="eventEmitted",this.m_=new m.Q}subscribe(t){return this.m_.on(this.cV,t)}unsubscribe(t){this.m_.remove(this.cV,t)}emitSessionStart(t){const e={videoMetadata:t};this.dV({metadata:e,name:g.Z.SessionStart})}emitContentComplete(){this.dV({name:g.Z.ContentComplete})}emitSessionEnd(){this.dV({name:g.Z.SessionEnd})}emitPlay(){this.dV({name:g.Z.Play})}emitPause(){this.dV({name:g.Z.Pause})}emitAdPlay(){this.dV({name:g.Z.AdPlay})}emitAdPause(){this.dV({name:g.Z.AdPause})}emitAdPlaying(t){const e={adType:t};this.dV({name:g.Z.AdPlaying,metadata:e})}emitAdPaused(t){const e={adType:t};this.dV({name:g.Z.AdPaused,metadata:e})}emitAdImpression(t,e,i){const s={adMetadata:t,customAdMetadata:e,adType:i};this.dV({metadata:s,name:g.Z.AdImpression})}emitAdComplete(t){const e={adType:t};this.dV({name:g.Z.AdComplete,metadata:e})}emitAdStopped(t){const e={adType:t};this.dV({name:g.Z.AdStopped,metadata:e})}emitAdBreakStart(t){const e={adBreakMetadata:t};this.dV({metadata:e,name:g.Z.AdBreakStart})}emitAdBreakComplete(t){const e={adType:t};this.dV({name:g.Z.AdBreakComplete,metadata:e})}emitPlayerResized(t){const e={playerDimensionsMetadata:t};this.dV({metadata:e,name:g.Z.PlayerResized})}emitOnEnterFullscreen(){this.dV({name:g.Z.OnEnterFullscreen})}emitOnExitFullscreen(){this.dV({name:g.Z.OnExitFullscreen})}emitOnPlayerCollapsed(){this.dV({name:g.Z.PlayerCollapsed})}emitOnPlayerExpanded(t){const e={playerDimensionsMetadata:t};this.dV({name:g.Z.PlayerExpanded,metadata:e})}emitAdExpandedChange(t){const e={adType:t};this.dV({name:g.Z.AdExpandedChange,metadata:e})}emitAdError(t){const e={adType:t};this.dV({name:g.Z.AdError,metadata:e})}emitPlayError(){this.dV({name:g.Z.PlayError})}emitRenderError(){this.dV({name:g.Z.RenderError})}emitAdClickThru(t){const e={adType:t};this.dV({name:g.Z.AdClickThru,metadata:e})}emitAdInteraction(t){const e={adType:t};this.dV({name:g.Z.AdInteraction,metadata:e})}emitAdVideoStart(t,e){const i={adVideoStartMetadata:t,adType:e};this.dV({metadata:i,name:g.Z.AdVideoStart})}emitAdLoaded(t,e){const i={adLoadedMetadata:t,adType:e};this.lV=t,this.dV({metadata:i,name:g.Z.AdLoaded})}emitAdStateChange(t,e){const i={adStateChangedMetadata:t,adType:e};this.uV=t,this.dV({metadata:i,name:g.Z.AdStateChange})}emitAdVideoFirstQuartile(t){const e={adType:t};this.dV({name:g.Z.AdVideoFirstQuartile,metadata:e})}emitAdVideoMidpoint(t){const e={adType:t};this.dV({name:g.Z.AdVideoMidpoint,metadata:e})}emitAdVideoThirdQuartile(t){const e={adType:t};this.dV({name:g.Z.AdVideoThirdQuartile,metadata:e})}emitAdVideoComplete(t){const e={adType:t};this.dV({name:g.Z.AdVideoComplete,metadata:e})}emitVolumeChange(t){this.dV({name:g.Z.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(t){const e={adType:t};this.dV({name:g.Z.AdVolumeChange,metadata:e})}emitAdSkipped(t){const e={adType:t};this.dV({name:g.Z.AdSkipped,metadata:e})}dV(t){var e;(null===(e=null==t?void 0:t.metadata)||void 0===e?void 0:e.adType)!==i.ProtoAdType.Nonlinear&&(this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.m_.trigger(this.cV,t))}get adLoadedMetadata(){return this.lV}get adStateMetadata(){return this.uV}destroy(){this.dV({name:g.Z.Destroy}),this.m_.removeAll()}}var y=h(1553),b=h(5445),I=h(3020),w=h(9791),P=h(2728),T=h(4261),_=h(3003),S=h(7945);const A=`cnx-playspace-css-${S.g.version}`;var x=h(5648),k=h(1280),E=h(8049),C=h(9906);class O{constructor(){this.pV=[],this.fV=0,this.mV=!1,this.gV=t=>{this.pV.forEach((e=>{t&&t!==e.element||this.vV(e,this.fV)}))}}yV(t){let e=this.pV.find((e=>e.element===t));return e||(e={element:t,list:[],cachedPercentInView:0},this.pV.push(e)),e.list}vV(t,e){t.list.forEach((t=>{const i=t.threshold<=e,s=i?t.callbackDelay:0;(t.sentViewabilityValue!==i||t.fireOnBackgroundChange&&t.sentBackgroundValue!==this.mV)&&(!1===i&&clearTimeout(t.timeout),t.sentViewabilityValue=i,t.sentBackgroundValue=this.mV,t.timeout=(0,w.ld)(t.callback,s,i,this.mV))}))}on(t,e,i){this.yV(t).push({threshold:i.threshold,callbackSent:!1,callbackDelay:i.callbackDelay,timeout:null,callback:e,sentBackgroundValue:!1,sentViewabilityValue:!1,fireOnBackgroundChange:!!i.fireOnInAppBackgroundChange}),this.gV()}off(t,e){const i=this.pV.find((e=>e.element===t));if(i){for(let t=i.list.length;t--;)i.list[t].callback===e&&i.list.splice(t,1);0===i.list.length&&this.pV.splice(this.pV.indexOf(i))}}check(t={threshold:.1}){return this.fV>=t.threshold}triggerRecheck(t){this.gV(t)}bV(t){this.mV=t}setViewableThreshold(t){this.fV=t,this.triggerRecheck()}observeOutOfViewDistance(t,e,i){this.wV=new IntersectionObserver((([t])=>{t.isIntersecting&&i()}),{rootMargin:`${e}px`}),this.wV.observe(t)}disconnectOutOfViewObserver(){var t;null===(t=this.wV)||void 0===t||t.disconnect()}subscribe(t,e){}destroy(){for(let t=this.pV.length;t--;){const e=this.pV[t];for(let t=e.list.length;t--;)clearTimeout(e.list[t].timeout),this.off(e.element,e.list[t].callback)}}}var L=h(8532),M=h(1783),R=h(4646);const B=[M.li.backgrounded,M.li.notFound,M.li.hidden],D=B.filter((t=>t!==M.li.hidden)),N=["jp.gocro.smartnews","jp.gocro.smartnews.android","cnx.bg.test"];class F extends O{constructor(t,e,i,s,n){super(),this.Ua=t,this.ga=e,this.De=i,N.includes(s)?this.PV=D:this.PV=B;try{this.m_=new m.Q,this.lk(),this.ga.isOmsdkFullSupport&&this.ga.omidAdSessionStart.subscribe((t=>{this.lk()}))}catch(t){(0,T.nF)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:n?T.D_.CRITICAL:T.D_.INFO,sessionId:this.De})}}subscribe(t,e){return this.m_.on(t,e)}setViewableThreshold(t){}_V(t){super.setViewableThreshold(t)}lk(){const t=R.$.getVerificationClient(this.Ua);if(!t)throw new Error("omid_verification_client_not_found");if(this.TV=new t,!this.TV.isSupported())throw new Error("omid_not_implemented");this.SV(),this.hd()}SV(){this.TV.registerSessionObserver((t=>{t&&t.type===M.Ux.sessionError&&(0,T.nF)({message:"omid_verification_client_session_error",exception:t.data.message,level:T.D_.WARN,sessionId:this.De})}))}AV(t=[],e){if(0===t.length)return!1;let i;for(const e of this.PV)for(const s of t)if(s===e){i=e;break}return i===M.li.hidden?0===e.x&&0===e.y:!!i}hd(){this.TV.addEventListener(M.Ux.geometryChange,(t=>{try{const{percentageInView:e,reasons:i,geometry:s={}}=t.data.adView;this.bV(this.AV(i,s));const n=e/100;this._V(n),this.m_.trigger(L.jJ.OmidViewabilityThreshold,n)}catch(t){(0,T.nF)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:T.D_.CRITICAL,sessionId:this.De},{throttle:1})}}))}}var $;!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}($||($={}));class V{constructor(t,e,i,s=!1){this.Ua=t,this.kV=e,this.ah=i,this.pV=[],this.EV=$.none,this.xV={intersectionObserver:!1,fallbackImplementation:!1},this.CV=null,this.OV=[0,.01,.1,.2,.5],this.LV=250,this.BV=t=>{this.ah.isPageInFocus=t,this.gV()},this.gV=()=>{this.pV.forEach((t=>{const e=this.fV(t.element);this.onViewHandle(t,e)}))},this.RV=()=>{null===this.CV&&(this.CV=setTimeout((()=>{this.gV(),clearTimeout(this.CV),this.CV=null}),this.LV))},this.DV=(0,w.pE)(this.Ua).topFrame,this.NV(s),this.FV(),this.VV()}VV(){this.kV.on(this.BV),this.ah.isPageInFocus=this.kV.isDocumentVisible()}NV(t){this.Ua.IntersectionObserver&&!t?this.xV.intersectionObserver=!0:this.xV.fallbackImplementation=!0,this.Ua.self!==this.Ua.top?(this.jV=this.UV(this.Ua),null!==this.jV?this.EV=$.friendly:this.EV=$.safe):this.jV=this.Ua.frameElement}UV(t){let e;try{if(e=t.parent,e===this.Ua.top)return t.frameElement}catch(t){return null}return this.UV(e)}FV(){this.xV.intersectionObserver?this.$V=new this.Ua.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.OV}):(this.DV.addEventListener("scroll",this.RV),this.DV.addEventListener("load",this.gV),this.DV.addEventListener("resize",this.gV))}qV(t){return this.pV.find((e=>e.element===t))}fV(t){if(this.EV===$.safe){const e=this.qV(t);return e?e.cachedPercentInView:0}let e=1;const i=t.getBoundingClientRect(),s={bottomRatio:i.bottom/i.height,topRatio:(this.Ua.top.innerHeight-i.top)/i.height,leftRatio:(this.Ua.top.innerWidth-i.left)/i.width,rightRatio:i.right/i.width};return Object.keys(s).forEach((t=>{s[t]<=0&&(e=0),s[t]>0&&s[t]<1&&(e*=s[t])})),e}onObserverEnter(t){t.forEach((t=>{this.pV.filter((e=>e.element===t.target)).forEach((e=>{this.onViewHandle(e,t.intersectionRatio)}))}))}onViewHandle(t,e){t.cachedPercentInView=e;const i=this.ah.isPageInFocus;t.list.forEach((t=>{!t.callbackSent&&t.threshold<=e&&i?(t.callbackSent=!0,t.timeout=(0,w.ld)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>e||!i)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,w.ld)(t.callback,0,!1))}))}on(t,e,i={}){let s=!1;if(this.xV.fallbackImplementation)if(this.EV===$.friendly&&t.ownerDocument.defaultView!==this.Ua.top)t=this.jV;else if(this.EV===$.safe)return void(0,w.ld)(e,0,!1);let n=this.pV.find((e=>e.element===t));n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.pV.push(n)),n.list.push({threshold:i.threshold,callbackSent:!1,callbackDelay:i.callbackDelay,timeout:null,callback:e}),this.xV.intersectionObserver?(s&&this.$V.unobserve(t),this.$V.observe(t)):this.xV.fallbackImplementation&&this.gV()}off(t,e){const i=this.pV.find((e=>e.element===t));if(i){let s=i.list.length;for(;s;)s--,i.list[s].callback===e&&i.list.splice(s,1);0===i.list.length&&(this.$V&&this.$V.unobserve(t),this.pV.splice(this.pV.indexOf(i),1))}}check(t={threshold:.1}){if(!t.element)return!1;let e=t.element;this.EV===$.friendly&&(e=this.jV);const i=this.ah.isPageInFocus;return this.fV(e)>=t.threshold&&i}triggerRecheck(t){this.xV.fallbackImplementation&&t&&this.pV.forEach((e=>{if(e.element===t){const t=this.fV(e.element);this.onViewHandle(e,t)}}))}setViewableThreshold(t){}observeOutOfViewDistance(t,e,i){this.wV=new IntersectionObserver((([t])=>{t.isIntersecting&&i()}),{rootMargin:`${e}px`}),this.wV.observe(t)}disconnectOutOfViewObserver(){var t;null===(t=this.wV)||void 0===t||t.disconnect()}subscribe(t,e){}destroy(){this.DV.removeEventListener("scroll",this.RV),this.DV.removeEventListener("load",this.gV),this.DV.removeEventListener("resize",this.gV);[].slice.call(this.pV).forEach((t=>{[].slice.call(t.list).forEach((e=>{this.off(t.element,e.callback),this.Ua.clearTimeout(e.timeout)}))})),this.kV.off(this.BV),clearTimeout(this.CV)}}var j=h(51);function U(t,e){const s=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),n=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(e);return s.players.push(n),s.browser=i.Browser.toObject(i.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),s.geoLocation=i.GeoLocation.toObject(i.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),s}var q,H=h(4411),J=h(9490),G=h(4151);!function(t){t.Float="float",t.Embed="embed"}(q||(q={}));const z={PlaybackModeEnum:{AutoPlay:i.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:i.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:i.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:i.ProtoPlayerSoundMode.On,Off:i.ProtoPlayerSoundMode.Mute,OnHover:i.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:i.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:i.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:i.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:i.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:i.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:i.ProtoPlayerCloseButtonMode.Off,On:i.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:i.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:i.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:i.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:i.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:J.se,LineItemExcludedSlotsEnum:{PreRoll:i.ProtoAdSlotsEnum.PreRoll,MidRoll:i.ProtoAdSlotsEnum.MidRoll,PostRoll:i.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:L.n9.SetupError,NoPlayer:L.n9.NoPlayer},FloatingModeEnum:{Off:i.ProtoPlayerFloatingMode.Off,OnPageLoad:i.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:i.ProtoPlayerFloatingMode.AfterInView,Always:i.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:i.ProtoDeviceType.Desktop,Smartphone:i.ProtoDeviceType.Smartphone,Tablet:i.ProtoDeviceType.Tablet,Other:i.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:i.ProtoFloatingFixedPositionMode.Page,Element:i.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:i.ProtoPositionMode.BottomRight,BottomLeft:i.ProtoPositionMode.BottomLeft,TopRight:i.ProtoPositionMode.TopRight,TopLeft:i.ProtoPositionMode.TopLeft,PinnedTop:i.ProtoPositionMode.PinnedTop,PinnedBottom:i.ProtoPositionMode.PinnedBottom},FloatingStatesEnum:{Float:q.Float,Embed:q.Embed},FloatingAppendLocationEnum:{Above:i.ProtoFloatingAppendLocationEnum.Above,Below:i.ProtoFloatingAppendLocationEnum.Below,Within:i.ProtoFloatingAppendLocationEnum.Within},ImplementationTypeEnum:{Amp:i.ProtoImplementationType.Amp,Web:i.ProtoImplementationType.Web},ImpressionTrackerTypeEnum:{Image:i.ProtoTrackerType.Image,Javascript:i.ProtoTrackerType.Javascript,IAS:i.ProtoTrackerType.IAS},ExpandButtonStatesEnum:{Collapse:G.q.Collapse,Expand:G.q.Expand}};var W;!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(W||(W={}));const Y=W,X=Object.assign(Object.assign({},z),{EndOfSlideCycleEnum:{Loop:x.ProtoEndOfSlideCycleMode.Loop,Stop:x.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:Y.Portrait,Landscape:Y.Landscape},OrientationEnum:{Mixed:x.ProtoPlayerOrientationEnum.Mixed,Portrait:x.ProtoPlayerOrientationEnum.Portrait,Landscape:x.ProtoPlayerOrientationEnum.Landscape}});var Q=h(5227);const K={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",GeneralClickInteraction:"generalClickInteraction",BrandingClicked:"brandingClicked"},Z={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},tt=Object.assign(Object.assign({},Q.dP),{ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",ContentStart:"ContentStart",ContentEnd:"ContentEnd"}),et="slideTransitionStart",it="slideChanged",st="slideTransitionEnd",nt="slideTimeUpdate",rt="slideCycleEnd",ot=Object.assign(Object.assign({},Z),K),at=Object.assign(Object.assign({},L.Km),ot);var ht=h(9022),ct=h(9357),dt=h(7423),lt=h(6115);class ut{constructor(t=0){this.dU=t,this.uU=16,this.pU=9}getHeightByRatio(t){return Math.round(t/this.uU*this.pU)+this.dU}setExtraHeight(t){this.dU=t}}const pt=[i.ProtoDeviceType.Smartphone];function ft(t,e){return function(t){return pt.indexOf(t)>-1}(e)&&(t===i.ProtoPositionMode.PinnedBottom||t===i.ProtoPositionMode.PinnedTop)}class mt{constructor(t,e,s={},n){this.extraHeight=e,this.fU=n,this.cachedExtraHeight=0,this.isPinnedFloating=ft(t.floatingScrollPosition,this.fU),this.floatingPosition=(0,a.$K)(s.fixedPosition)?s.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=(0,a.$K)(s.scrollPosition)?s.scrollPosition:t.floatingScrollPosition,this.gU=(0,a.$K)(s.floatingWidth)?s.floatingWidth:t.floatingWidth||400,this.vU=(0,a.$K)(s.floatingGutterX)?s.floatingGutterX:t.floatingGutterX,this.bU=(0,a.$K)(s.floatingGutterY)?s.floatingGutterY:t.floatingGutterY,this.hasFloatingTransition=(0,a.$K)(s.hasFloatingTransition)?s.hasFloatingTransition:t.hasFloatingTransition,this.appendLocation=(0,a.$K)(s.floatingAppendLocation)?s.floatingAppendLocation:t.floatingAppendLocation,this.floatingYAxisPadding=(0,a.$K)(s.floatingYAxisPadding)?s.floatingYAxisPadding:t.floatingYAxisPadding,this.setScrollPosition(this.floatingScrollPosition),this.floatingScrollPosition!==i.ProtoPositionMode.PinnedTop&&this.floatingScrollPosition!==i.ProtoPositionMode.PinnedBottom||(this.cachedExtraHeight=e,e=0),this.IU=new ut(e)}setScrollPosition(t){this.floatingScrollPosition=t,this.isPinnedFloating=ft(t,this.fU),this.wU=t===i.ProtoPositionMode.BottomLeft||t===i.ProtoPositionMode.TopLeft,this.PU=t===i.ProtoPositionMode.BottomRight||t===i.ProtoPositionMode.TopRight,this._U=t===i.ProtoPositionMode.TopLeft||t===i.ProtoPositionMode.TopRight||t===i.ProtoPositionMode.PinnedTop}get isPositionedLeft(){return this.wU}get isPositionedRight(){return this.PU}get isPositionedTop(){return this._U}get gutterX(){return this.isPinnedFloating?0:this.vU}get gutterY(){return this.bU}set isPositionedLeft(t){this.wU=t}set isPositionedRight(t){this.PU=t}set floatingWidth(t){this.gU=t}set gutterX(t){this.vU=t}set gutterY(t){this.bU=t}get floatingWidth(){return this.gU}getHeight(t){if(this.isPinnedFloating){const e=.65*t;t=Math.min(e,435)}return`${this.IU.getHeightByRatio(t)}px`}setExtraHeight(t){this.IU.setExtraHeight(t)}}class gt{constructor(t,e,s={},n){this.extraHeight=e,this.floatingMode=(0,a.$K)(s.mode)?s.mode:t.floatingMode,(0,o.BZ)(s.devices)?this.floatingDeviceMode=s.devices:this.floatingDeviceMode=(0,o.BZ)(t.floatingDeviceMode)?t.floatingDeviceMode:[i.ProtoDeviceType.Desktop],(0,a.$K)(s.closeButton)?this.floatingCloseButtonMode=s.closeButton:(0,a.$K)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=i.ProtoPlayerCloseButtonMode.OnHover,this.pageElement=(0,a.$K)(s.floatingPageElement)?s.floatingPageElement:t.floatingPageElement,this.floatingHelperSettings=new mt(t,e,s,n),this.TU=this.floatingMode!==i.ProtoPlayerFloatingMode.Off&&this.floatingDeviceMode.includes(n)}setScrollPosition(t){this.floatingHelperSettings.setScrollPosition(t),this.floatingHelperSettings.setExtraHeight(this.floatingHelperSettings.isPinnedFloating?0:this.floatingHelperSettings.cachedExtraHeight)}get isPinnedPlayerFloating(){return this.floatingHelperSettings.isPinnedFloating}get floatingPosition(){return this.floatingHelperSettings.floatingPosition}get floatingScrollPosition(){return this.floatingHelperSettings.floatingScrollPosition}get hasFloatingCapability(){return this.TU}getFloatingSettings(){return{scrollPosition:this.floatingHelperSettings.floatingScrollPosition,floatingGutterX:this.floatingHelperSettings.gutterX,floatingGutterY:this.floatingHelperSettings.gutterY,floatingWidth:this.floatingHelperSettings.floatingWidth}}}var vt=h(7597),yt=h(5715),bt=h(1310);class It{constructor(t,e,s,n,r,o,h,c,d,l,u,p,m,g=0,v={}){if(this.global=t,this.targetContainer=e,this.SU=s,this.fU=n,this.secondLevelDomain=r,this.apiConfig=o,this.isServerlessMode=h,this.supplyChainSettings=c,this.isSeoTraffic=d,this.Xi=l,this.jB=u,this.lineItemAbTestInformation=p,this.videoPosition=m,this.sharingDestinations=[],this.disableAdvertising=!1,this.allowAdBreaksIfAdvertisingDisabled=!1,this.disablePrefetch=!1,this.disableAdsInBackground=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,this.adsMustBeSkippableIfLongerThan=ht.f3,this.skipToNextVideoAfter=0,this.hasAdContentDurationRatio=!1,this.featureFlags={enableAdContentRatioGuardsMechanism:!1,enableAdContentRatioMechanism:!1,shouldEmbedVpaidInSafeIframe:!0},(0,a.QM)(s.initializationSettingsJson))try{const t=JSON.parse(s.initializationSettingsJson);this.apiConfig=(0,yt.R)(this.apiConfig,t)}catch(t){(0,T.nF)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:T.D_.CRITICAL,sessionId:this.SU.sessionId})}const y=(0,a.as)(this.apiConfig.settings._connatixInternals.featureFlags)?this.apiConfig.settings._connatixInternals.featureFlags:{};if(this.featureFlags=Object.assign(Object.assign(Object.assign({},this.featureFlags),y),v),(this.apiConfig.playerMode===lt.B.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.queryJsTargeting=this.apiConfig.settings.queryJsTargeting||{},this.AU(this.SU.lineItems),this.soundMode=(0,a.$K)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:s.soundMode,this.playbackMode=(0,a.$K)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:s.playbackMode,this.playbackMode===i.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===i.ProtoPlayerSoundMode.Mute||(0,w.we)()||(this.soundMode=i.ProtoPlayerSoundMode.Mute),this.html=s.html,this.css=s.css,this.floatingSettings=new gt(s,g,this.apiConfig.settings.customization.floating,this.fU),s.logoResource||(0,a.QM)(this.apiConfig.settings.customization.logoUrl)){let t=`${f.n.endPoints.base.image}${s.playerId}/${s.logoResource}`;t=this.Xi.appendParamsToUrl(t),this.logoUrl=(0,a.QM)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:t}const b=s.amazonTamSlotId;(0,a.QM)(b)&&(this.amazonTamSlotId=b),(0,a.$K)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),this.midRollNumber=(0,a.$K)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:s.midRollNumber,this.adViewabilityPolicy=s.adViewabilityPolicy,this.preRollBreak=this.kU(),this.postRollBreak=this.EU(),this.playerId=s.playerId,(0,a.$K)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising,this.allowAdBreaksIfAdvertisingDisabled=this.apiConfig.settings.allowAdBreaksIfAdvertisingDisabled,this.disableAdvertising&&!this.allowAdBreaksIfAdvertisingDisabled&&(this.preRollBreak=0,this.postRollBreak=0));const{disablePrefetch:I}=this.apiConfig.settings.advertising;(0,a.$K)(I)&&(this.disablePrefetch=I);const{disableAdsInBackground:P}=this.apiConfig.settings.advertising;(0,a.$K)(P)&&(this.disableAdsInBackground=P),this.floatingSettings.floatingMode===i.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingSettings.floatingCloseButtonMode:this.closeButtonMode=(0,a.$K)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:s.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingSettings.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:(0,a.$K)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:s.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=s.adPlaybackMode,(0,a.$K)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skippability:_,skipAdAfter:S,skipMin:A}=o.settings.advertising.skipAdSettings||{};this.skipAdAfter=(0,a.$K)(S)?S:s.skipAdAfter,this.skippability=(0,a.$K)(_)?_:s.skippability,this.skipMin=(0,a.$K)(A)?A:s.skipMin;const{disableTracking:x}=o.settings._connatixInternals;(x||h||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.SU.sessionId,this.videoPlacement=this.SU.videoPlacement,this.preloadFloating=(0,a.Mx)(this.apiConfig.settings.preloadFloating)}setPreRollBreak(t){(0,a.hj)(t)?this.preRollBreak=this.xU(this.preRollBreak,t):this.preRollBreak=this.kU()}setPostRollBreak(t){(0,a.hj)(t)?this.postRollBreak=this.xU(this.postRollBreak,t):this.postRollBreak=this.EU()}kU(){return((0,a.$K)(this.apiConfig.settings.advertising.preRollBreak)?(0,bt.qe)(this.apiConfig.settings.advertising.preRollBreak,500):this.SU.preRollBreak)*ct.s_}EU(){return((0,a.$K)(this.apiConfig.settings.advertising.postRollBreak)?(0,bt.qe)(this.apiConfig.settings.advertising.postRollBreak,500):this.SU.postRollBreak)*ct.s_}xU(t,e){const i=(0,bt.w4)(e);return null===i?t:i}CU(t){const e=t.some((t=>t.advertiserAccountId===vt.Ro&&t.advertiserLineItemId!==vt.Eg));return this.OU(t),e?t:this.MU(t)}OU(t){const e=t.find((t=>t.advertiserLineItemId===vt.Eg)),i=t.some((t=>t.advertiserAccountId===vt.Ro&&t.advertiserLineItemId!==vt.Eg));if(e)if(i){const i=t.find((t=>t.advertiserAccountId===vt.Ro&&t.advertiserLineItemId!==vt.Eg&&t.adxFloorPricePredictionList.length>1));(0,a.$K)(i)&&this.LU(i.advertiserLineItemId),e.adxFloorPricePredictionList.length>1?u.e.setClientAb3(1):u.e.setClientAb3(2)}else e.adxFloorPricePredictionList.length>1?u.e.setClientAb3(3):u.e.setClientAb3(4)}LU(t){(0,T.nF)({message:"PlayerModel_hasDynamicAdx",exception:t,callStack:`serverAB0: ${u.e.serverAb0}`,level:T.D_.INFO},{pacing:1})}MU(t){return t.filter((t=>t.advertiserLineItemId!==vt.Eg))}BU(t=!1){this.RU(),this.DU();let e=[...this.NU(),...this.FU()];e=this.jB.filterOutDuplicatesForStandalone(e),e=this.CU(e),e.forEach((t=>{t.advertiserLineItemId===vt.Eg&&(t.isAdxLookup=!0)})),e=this.VU(e),e=this.jU(e,t),t&&(e=this.UU(e));const i=(0,a.$K)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:this.SU.scrollHijackingProtection;this.lineItemSettings={lineItems:e,disableScrollHijackEnforcement:i},this.$U(this.lineItemSettings)}qU(t){return t*ct.s_}HU(t,e){e.adTag=(0,a.$K)(t.url)?t.url:e.adTag,e.requestCap=(0,a.$K)(t.contentRequestCap)?t.contentRequestCap:e.requestCap,e.impressionCap=(0,a.$K)(t.contentImpressionCap)?t.contentImpressionCap:e.impressionCap,e.viewability=(0,a.$K)(t.viewability)?t.viewability:e.viewability,e.sound=(0,a.$K)(t.sound)?t.sound:e.sound,e.ignoreFilledRequests=(0,a.$K)(t.ignoreFilledRequests)?t.ignoreFilledRequests:e.ignoreFilledRequests,e.prebidJsBidParamsJSONString=(0,a.$K)(t.prebidJsBidParamsJSONString)?t.prebidJsBidParamsJSONString:e.prebidJsBidParamsJSONString,e.headerBidderTimeout=(0,a.$K)(t.headerBidderTimeout)?t.headerBidderTimeout:e.headerBidderTimeout,e.resetRequestsCapTime=(0,a.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:e.resetRequestsCapTime,e.resetImpressionsCapTime=(0,a.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:e.resetImpressionsCapTime,e.resetCapType=(0,a.$K)(t.resetCapType)?t.resetCapType:e.resetCapType,e.timeBetweenRequests=(0,a.$K)(t.timeBetweenRequests)?t.timeBetweenRequests:e.timeBetweenRequests,e.skipMode=(0,a.$K)(t.skipMode)?t.skipMode:e.skipMode,e.floorPrice=(0,a.$K)(t.floorPrice)?t.floorPrice:e.floorPrice,e.adBreakSettings=(0,a.$K)(t.adBreakSettings)?t.adBreakSettings:e.adBreakSettings,e.pauseAdOutOfView=(0,a.$K)(t.pauseAdOutOfView)?t.pauseAdOutOfView:e.pauseAdOutOfView,e.nonlinearLineItemSettings=(0,a.$K)(t.nonlinearLineItemSettings)?this.JU(t.nonlinearLineItemSettings):e.nonlinearLineItemSettings,e.adType=(0,a.$K)(t.nonlinearLineItemSettings)?i.ProtoAdType.Nonlinear:e.adType}JU(t){const e={nonLinearRequestType:t.nonLinearRequestType?t.nonLinearRequestType:i.ProtoNonlinearRequestType.Banner,nonLinearAdTimeSeconds:t.nonLinearAdTimeSeconds?t.nonLinearAdTimeSeconds:15};return e.nonLinearAdTimeSeconds<15&&(e.nonLinearAdTimeSeconds=15),e.nonLinearAdTimeSeconds>180&&(e.nonLinearAdTimeSeconds=180),e}RU(){this.zU(this.apiConfig.settings.advertising.preRollBreak,i.ProtoAdBreakTypeEnum.PreRoll),this.zU(this.apiConfig.settings.advertising.postRollBreak,i.ProtoAdBreakTypeEnum.PostRoll),this.zU(this.apiConfig.settings.advertising.maxNumberOfMidRolls,i.ProtoAdBreakTypeEnum.MidRoll)}zU(t,e){const i=this.WU(this.apiConfig.settings.advertising.adBreaks,e),s=this.WU(this.SU.adBreaks,e),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[e]};i?this.adBreaks.push(i):!(0,a.$K)(t)||i||s?!i&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}WU(t,e){if(!t)return;let i;return t.forEach((t=>{t.types.includes(e)&&(i=Object.assign({},t),i.types=[e])})),i}UU(t){return(0,r.mn)(t,dt.k.LINEAR)}jU(t,e=!1){const{adBreaks:s}=this;let n=[];(0,o.BZ)(s)||e||t.forEach((t=>{const e=t.adBreakSettings.adBreakTargeting.find((t=>t.adRollType===i.ProtoAdBreakTypeEnum.MidRoll));e||t.adType===i.ProtoAdType.Nonlinear||n.push(t)}));const r=[];return s.forEach((t=>{t.types.forEach((e=>r.push(Object.assign(Object.assign({},t),{types:[e]}))))})),r.forEach((t=>{n=this.removeCompatibleLineItems(t,n)})),t.filter((t=>!n.includes(t)))}removeCompatibleLineItems(t,e){const s=t.types[0],n=t.numberOfAdSlots>1?i.ProtoLineItemAdBreakTypeEnum.AdPod:i.ProtoLineItemAdBreakTypeEnum.SingleAd;return e.filter((t=>!t.adBreakSettings.adBreakTargeting.some((t=>t.adRollType===s&&(t.adBreakTypeEnum===i.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===n)))))}AU(t){t.forEach((t=>{t.adBreakSettings||this.YU(t),this.XU(t)}))}YU(t){t.adBreakSettings={adBreakTargeting:[{adRollType:i.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:i.ProtoLineItemAdBreakTypeEnum.All},{adRollType:i.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:i.ProtoLineItemAdBreakTypeEnum.All},{adRollType:i.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:i.ProtoLineItemAdBreakTypeEnum.All}]}}XU(t){0===t.requestCap&&(t.requestCap=20)}DU(){this.adBreaks.forEach((t=>{t.maxAdSlotDuration=this.qU(t.maxAdSlotDuration),t.maxAdPodDuration=this.qU(t.maxAdPodDuration),t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)}))}QU(t,e){const i=Object.assign({},e);return this.HU(t,i),(0,a.$K)(t.externalMediaFile)&&(i.externalMediaFile=t.externalMediaFile),(0,a.$K)(t.externalHlsFile)&&(i.externalHlsFile=t.externalHlsFile),i.customCpm=t.cpm,i}NU(){const t=[];if(!(0,o.BZ)(this.apiConfig.settings.advertising.lineItems))return[];const e=this.SU.lineItems.filter((t=>t.creativeType===i.ProtoCreativeTypeEnum.External));return this.apiConfig.settings.advertising.lineItems.forEach((i=>{if(this.XU(i),this.isServerlessMode){const e=this.KU(),s=this.QU(i,e);t.push(s)}else e.forEach((e=>{if(i.id===e.advertiserLineItemId){const s=this.QU(i,e);t.push(s)}}))})),t}FU(){return!0===this.apiConfig.settings.advertising.blockConnatixDemand?[]:this.SU.lineItems.filter((t=>t.creativeType!==i.ProtoCreativeTypeEnum.External))}VU(t){return t.forEach((t=>{t.creativeType===i.ProtoCreativeTypeEnum.External&&((0,a.QM)(t.prebidJsBidParamsJSONString)?t.creativeType=i.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=i.ProtoCreativeTypeEnum.MediaFile:t.creativeType=i.ProtoCreativeTypeEnum.ThirdParty,t.isExternal=!0)})),t}KU(){return i.ProtoLineItem.toObject(i.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}$U(t){this.moatTrackingEnabled=t.lineItems.some((t=>t.moatTrackingEnabled))}}var wt=h(6666),Pt=h(1992);class Tt extends It{constructor(t,e,s,n,r,o,h,c,d,l,u,p,f,m,g){super(t,e,s,n,r,o,h,c,m,d,l,u,p,72,g),this.global=t,this.targetContainer=e,this.SU=s,this.Xi=d,this.jB=l,this.lineItemAbTestInformation=u,this.videoPosition=p,this.storyPosition=f,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.useVideoProgressBar=!1,this.activeVersion=this.SU.activeVersion,this.storyId=this.SU.storyId,this.storyMetadata=this.apiConfig.settings.story,this.sdkVersion=this.apiConfig._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=(0,a.$K)(this.apiConfig.settings.advertising.slidesBeforeFirstAd)?this.apiConfig.settings.advertising.slidesBeforeFirstAd:this.SU.minSlidesBeforeFirstAd,this.slidesBetweenAds=(0,a.$K)(this.apiConfig.settings.advertising.slidesBetweenAds)?this.apiConfig.settings.advertising.slidesBetweenAds:this.SU.slidesBetweenAds,this.SU.floatingMode===x.ProtoPlayerFloatingMode.Always?this.orientation=x.ProtoPlayerOrientationEnum.Landscape:this.orientation=(0,a.$K)(this.apiConfig.settings.customization.orientation)?this.apiConfig.settings.customization.orientation:this.SU.orientation,this.slideOrdering=this.apiConfig.settings.slideOrder,this.orientationBreakpoint=(0,a.$K)(this.apiConfig.settings.customization.orientationBreakpoint)?this.apiConfig.settings.customization.orientationBreakpoint:this.SU.orientationBreakpoint,(0,a.as)(this.apiConfig.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.apiConfig.settings.customization.fontFamilySettings),this.J3(),this.G3(),this.K3(),this.t5(),this.e5(),this.i5(),this.useAccentColorForProgressBar=(0,a.$K)(this.apiConfig.settings.customization.useAccentColorForProgressBar)?this.apiConfig.settings.customization.useAccentColorForProgressBar:this.SU.useAccentColorForProgressBar,this.endOfSlideCycleMode=(0,a.$K)(this.apiConfig.settings.endOfSlideCycleMode)?this.apiConfig.settings.endOfSlideCycleMode:this.SU.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=(0,a.$K)(this.apiConfig.settings.disableCTARendering)&&this.apiConfig.settings.disableCTARendering,this.disableStoryProgressBarRendering=(0,a.$K)(this.apiConfig.settings.disableStoryProgressBarRendering)&&this.apiConfig.settings.disableStoryProgressBarRendering,this.disableTitleRendering=(0,a.$K)(this.apiConfig.settings.disableTitleRendering)&&this.apiConfig.settings.disableTitleRendering,this.publisherName=(0,a.QM)(this.apiConfig.settings.customization.publisherName)?this.apiConfig.settings.customization.publisherName:this.SU.publisherName,this.BU(),this.activeVersionHasInsights=this.SU.activeVersionHasInsights,this.useVideoProgressBar=(0,a.$K)(this.apiConfig.settings.customization.useVideoProgressBar)?this.apiConfig.settings.customization.useVideoProgressBar:this.SU.layout===x.ProtoPlayspaceLayoutEnum.BottomProgressBar,this.activeVersionHasInsights?(0,a.QM)(this.storyId)&&(0,a.QM)(this.activeVersion)&&wt.k.loadInsights({insightsInputType:Pt.i.Story,id:this.storyId,versionId:this.activeVersion}):wt.k.markAsUnavailable(this.storyId),this.lineItemSettings.lineItems=this.lineItemSettings.lineItems.filter((t=>t.adType!==i.ProtoAdType.Nonlinear))}J3(){this.apiConfig.settings.customization.primaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.apiConfig.settings.customization.primaryColorList.background:this.SU.primaryColorList&&(0,a.QM)(this.SU.primaryColorList.background)&&(this.primaryColorList.background=this.SU.primaryColorList.background)}G3(){this.apiConfig.settings.customization.primaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.apiConfig.settings.customization.primaryColorList.foreground:this.SU.primaryColorList&&(0,a.QM)(this.SU.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.SU.primaryColorList.foreground)}K3(){this.apiConfig.settings.customization.secondaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.apiConfig.settings.customization.secondaryColorList.background:this.SU.secondaryColorList&&(0,a.QM)(this.SU.secondaryColorList.background)&&(this.secondaryColorList.background=this.SU.secondaryColorList.background)}t5(){this.apiConfig.settings.customization.secondaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.apiConfig.settings.customization.secondaryColorList.foreground:this.SU.secondaryColorList&&(0,a.QM)(this.SU.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.SU.secondaryColorList.foreground)}e5(){this.apiConfig.settings.customization.accentColorList&&(0,a.QM)(this.apiConfig.settings.customization.accentColorList.background)?this.accentColorList.background=this.apiConfig.settings.customization.accentColorList.background:this.SU.accentColorList&&(0,a.QM)(this.SU.accentColorList.background)&&(this.accentColorList.background=this.SU.accentColorList.background)}i5(){this.apiConfig.settings.customization.accentColorList&&(0,a.QM)(this.apiConfig.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.apiConfig.settings.customization.accentColorList.foreground:this.SU.accentColorList&&(0,a.QM)(this.SU.accentColorList.foreground)&&(this.accentColorList.foreground=this.SU.accentColorList.foreground)}}var _t=h(6568),St=h(6716),At=h(6706),xt=h(8102),kt=h(1599),Et=h(9710),Ct=h(9741),Ot=h(5701),Lt=h(862),Mt=h(9600),Rt=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Bt extends Ot.tt{constructor(t,e,s,n,r,o,a,h,c,d){super(),this.mediator=t,this.playerModel=e,this.app=s,this._appSettings=n,this.vL=r,this.jc=o,this.NL=a,this.ah=h,this.r$=c,this.o$=d,this.macroElements={player:[]},this.a$=!1,this.h$={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.c$=null,this.d$=500,this.Mi=[],this.l$=new St.x,this.createExperience(e,n),this.u$(e.sessionId),this.p$=new Lt.Z(e.global,{heavyAdBlockTypeEnum:i.ProtoHeavyAdBlockTypeEnum.Global},this.jc),this.f$=new Lt.Z(window,{heavyAdBlockTypeEnum:i.ProtoHeavyAdBlockTypeEnum.Script},this.jc)}subscribeToEvents(){this.subscribe(Q.Uh.Destroy,this.experience,(()=>{this.destroy()})),this.subscribe(Q.Uh.CanStart,this.experience,(()=>{this.experience.start()})),this.subscribe(Q.Xh.SessionRendered,this.experience,(()=>Rt(this,void 0,void 0,(function*(){const t=yield C.h.getGlobalContainer().resolve(xt.c).getLoadedCookieDeprecationLabel();this.vL.sessionRendered.next({isBannerBlocked:Et.tt.isBannerBlocked,sdkVersion:this._appSettings.sdkVersion,integrationType:this.ah.playerEnvironment,cookieDeprecationLabel:t}),this.mediator.publish(this,Q.Xh.SessionRendered)})))),this.subscribe(Q.Xh.SessionView,this.experience,(()=>{!this.ah.isSessionViewTracked&&this.ah.isPlayerStartTracked&&(this.vL.sessionView.next(),this.experienceApi.trigger(L.Km.SessionInView),this.mediator.publish(this,Q.Xh.SessionView))}));const t=C.h.getSessionChildContainer(this.ah.sessionId).resolve(k.G);this.Mi.push(t.omidAdSessionStart.subscribe((()=>{this.experienceApi.trigger(L.jJ.OmidAdSessionStart)})),t.omidAdSessionFinish.subscribe((()=>{this.experienceApi.trigger(L.jJ.OmidAdSessionFinish)}))),Object.values(this.experience.events).forEach((t=>{this.subscribe(t,this.experience,(e=>{this.experienceApi.trigger(t,e.payload)}))}))}updateMacroContent(t,e){t&&t.forEach((t=>{t.textContent=e}))}u$(t){const e=C.h.getSessionChildContainer(t).resolve(At.PQ);this.experienceApi.addService("externalAdService",e)}EA(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}m$(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}g$(){if(this.experienceContainer=this.v$(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.m$(this.playerModel.html));this.b$(t);const e=this.macroElements.player[0];if(!e)throw Error("player macro was not found");e.innerHTML="",e.parentNode.insertBefore(this.experienceContainer,e),e.parentNode.removeChild(e);(0,o.Sz)(t.children).forEach((t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)}))}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}v$(){const t=this.app.config.isMobile?kt.s6.Mobile:kt.s6.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${kt.sN.MainContainer} ${t} ${this.I$}" id="${this.app.config.appId}"></cnx>`)}b$(t){(0,o.Sz)(t.children).forEach((t=>{t.children.length>0&&this.b$(t),Object.keys(this.h$).forEach((e=>{const i=this.h$[e];t.textContent.includes(i)&&this.w$(e,t)}))}))}w$(t,e){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(e),e.textContent=""}P$(){null!==this.c$&&(clearInterval(this.c$),this.c$=null)}init(t){this.EA(),this.g$();const e=this.app.config.device;return this.isSupportedBreakpoint(e)?(this.subscribeToEvents(),this.experience.renderExperience(this.playerModel,this.app,this.experienceContainer,(()=>{t()})),this.c$=setInterval((()=>{this.a$?this.P$():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.l$.next(!0),(0,T.nF)({message:"player_removed_from_DOM",level:T.D_.INFO,sessionId:this.playerModel.sessionId}))}),this.d$),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}onReady(){return this.experience.onReady()}onDestroy(){return this.l$.asObservable()}destroy(){var t;try{Ct.S.playerDestroyed=!0,this.a$=!0,this.P$(),null===(t=this.o$)||void 0===t||t.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.app.services.UserManagerService.destroy(),this.app.services.UID2Service.destroy(),(0,Mt.i)(this.Mi),this.Mi=[],this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.p$.destroy(this.playerModel.sessionId),this.f$.destroy(this.playerModel.sessionId)}catch(t){(0,T.nF)({callStack:t.stack,level:T.D_.WARN,message:"Renderer_destroy",exception:t.message,sessionId:this.playerModel.sessionId})}}}const Dt={lg:630,md:400,sm:320,xs:0},Nt={[i.ProtoDeviceType.Desktop]:Object.assign({},Dt),[i.ProtoDeviceType.Tablet]:Object.assign({},Dt),[i.ProtoDeviceType.Smartphone]:Object.assign({},Dt)};var Ft=h(4975),$t=h(4727);var Vt=h(9528),jt=h(9107);class Ut{constructor(t,e,i,s,n=1200){this._$=t,this.S$=e,this.A$=i,this.E$=s,this.x$=n,this.C$=null,this.O$=!1,this.M$=()=>{if(this.Db(),!this.O$&&this.S$&&this.S$.linearAdInWin)return this.O$=!0,void this.L$(this.x$);this._$.startContent()}}destroy(){this.Db()}changeState(t){switch(t){case J.Ez.PrerollState:this.O$=!1,this.L$(this.A$);break;case J.Ez.PostrollState:this.O$=!1,this.L$(this.E$);break;default:this.C$&&this.Db()}}setPreRollBreak(t){this.A$=t}setPostRollBreak(t){this.E$=t}Db(){clearTimeout(this.C$),this.C$=null}L$(t){this.Db(),this.C$=setTimeout(this.M$,t)}}const qt="midRollCapped",Ht="totalAdBreakDurationExpired",Jt="enableLinearAds",Gt="disableLinearAds",zt="ForceStopAdSlot",Wt="ForceStopAdPod",Yt="linearAdOpportunity",Xt="AdPodRemainingTime",Qt="disableNonLinearAds",Kt="enableNonLinearAds",Zt="disableAdvertising",te="enableAdvertising",ee="enterCuePoint",ie="exitCuePoint",se="canPrefetchAds";var ne=h(5106),re=h(8395),oe=h(4065),ae=h(9154);class he{constructor(t,e){this.$$=t,this.q$=e,this.H$=null,this.J$=null,this.z$=0,this.Y$=0,this.X$=!1,this.Q$=!1,this.K$=!1,this.Io=new Map,this.Z$=new St.x,this.tq=new St.x,this.eq=new St.x,this.iq=new St.x,this.nq=new St.x,this.rq=new St.x,this.oq=new St.x,this.aq=new St.x,this.hq=new St.x,this.cq=new St.x,this.Mi=[],this.dq={inImpression:!1};const{adBreaks:s}=this.$$.linearAdsControllerData;this.lq=s.some((t=>t.types.includes(i.ProtoAdBreakTypeEnum.PostRoll)))}start(){this.pq();const{totalAdBreakLength:t}=this.$$.linearAdsControllerData;if(t){const e=C.h.getGlobalContainer().resolve(re.f);this.fq=new oe.B(e,t),this.Io.set(this.fq,[this.fq.onTimeElapsed.subscribe((()=>{this.tq.next()}))])}}get currentPlayerAdSlot(){return this.H$}get onExperienceControllerStateChange(){return this.cq.asObservable()}get onCanPrefetchAds(){return this.hq.asObservable()}get onAdSlotDurationElapsed(){return this.Z$.asObservable()}get onAdPodDurationElapsed(){return this.eq.asObservable()}get onAdPodTimeUpdate(){return this.iq.asObservable()}get onAdOpportunity(){return this.nq.asObservable()}get onAdsDisabled(){return this.rq.asObservable()}get onAdsEnabled(){return this.oq.asObservable()}get onTotalAdBreakDurationExpired(){return this.tq.asObservable()}get onMidRollCapped(){return this.aq.asObservable()}contentPlaybackStateChanged(t){var e,i;null===(i=(e=this.q$).contentPlaybackStateChanged)||void 0===i||i.call(e,t)}contentTimeUpdate(t){var e,i;null===(i=(e=this.q$).contentTimeUpdate)||void 0===i||i.call(e,t)}slideChanged(t){var e,i;null===(i=(e=this.q$).slideChanged)||void 0===i||i.call(e,t)}updateStoryTimeline(t){var e,i;null===(i=(e=this.q$).updateStoryTimeline)||void 0===i||i.call(e,t)}onAdImpression(t,e){this.q$.onAdImpression(this.H$,e),this.H$===i.ProtoAdSlotsEnum.MidRoll&&(this.K$=!0),this.dq.inImpression=!0,this.mq(),this.gq()}onContentAdDurationElapsed(){this.q$.onContentAdDurationElapsed()}onStayNextButtonsDisplayed(){this.q$.onStayNextButtonsDisplayed()}onContentAdDurationReset(){this.q$.onContentAdDurationReset()}onStayButtonPress(){this.q$.onStayButtonPress()}contentChanged(t){this.q$.contentChanged(this.H$,t),this.Y$=0}onAdFinished(t,e,s){this.q$.onAdFinished(this.H$,e,s),this.vq=this.yq(this.vq),this.K$=!1,e||(this.bq=this.yq(this.bq),this.H$===i.ProtoAdSlotsEnum.MidRoll?this.X$||this.Y$++:this.z$++),this.Iq()&&!e&&this.aq.next(),t&&(this.Q$=!0),this.dq.inImpression=!1}viewabilityStateChanged(t,e){var i,s;null===(s=(i=this.q$).viewabilityStateChanged)||void 0===s||s.call(i,this.H$,t,e)}onStop(){this.H$=null}onAdStateChange(t,e,s,n){this.q$.onAdStateChange(t,s,n),this.$$.linearAdsControllerData.maxAdSlotDuration=e.maxAdSlotDuration,this.$$.linearAdsControllerData.maxAdPodDuration=e.maxAdPodDuration,n||(t!==i.ProtoAdSlotsEnum.MidRoll&&(this.z$=0),null===t&&this.J$===i.ProtoAdSlotsEnum.MidRoll||(this.Q$=!0),this.J$=t,this.H$=t)}canEnableAds(t){const e=this.q$.canEnableAds(this.H$,t);return e.enableAds?this.dq.inImpression?{enableAds:!1,disableReason:ne.m.InImpression}:this.H$===i.ProtoAdSlotsEnum.MidRoll&&this.Iq()||null===this.H$||this.H$!==i.ProtoAdSlotsEnum.MidRoll&&this.z$>0?{enableAds:!1,disableReason:ne.m.Unknown}:{enableAds:!0,disableReason:ne.m.Unknown}:e}enableAds(){this.oq.next(),this.fq&&this.fq.start()}disableAds(t,e){const i={disableReason:t,adBreakLength:this.wq(e)};this.rq.next({payload:i}),this.fq&&!this.dq.inImpression&&this.fq.stop()}getTheoreticalDurationUntilNextOpportuinity(t){return this.H$===i.ProtoAdSlotsEnum.MidRoll&&this.Iq()?-1:this.q$.getDurationUntilNextOpportunity(t)}onAdPlay(){this.bq&&this.bq.start(),this.vq&&this.vq.start(),this.fq&&this.fq.start()}onAdPause(){this.bq&&this.bq.stop(),this.vq&&this.vq.stop(),this.fq&&this.fq.stop()}triggerAdOpportunity(){this.Q$&&(this.Q$=!1,this.nq.next({payload:{adBreakType:ae.H[this.H$]}}))}startAds(t){var e,i;null===(i=(e=this.q$).startAds)||void 0===i||i.call(e,this.H$,t)}onNewMediaVideo(t){var e,i;const{cuePoints:s,dynamicCuePoints:n,videoDuration:r}=t;this.X$=(0,o.BZ)(s)||Array.isArray(n),this.H$=null,null===(i=(e=this.q$).onNewMediaVideo)||void 0===i||i.call(e,r,s)}setAdHandler(t){this.q$&&this.q$.setAdHandler&&this.q$.setAdHandler(t)}destroy(){(0,Mt.i)(this.Mi),this.fq&&this.fq.disable(),this.vq=this.yq(this.vq),this.bq=this.yq(this.bq),this.q$.destroy()}pq(){var t;this.Mi.push(this.q$.onExperienceControllerStateChange.subscribe((t=>{this.cq.next(t)})),null===(t=this.q$.onCanPrefetchAds)||void 0===t?void 0:t.subscribe((()=>{this.hq.next()}))),this.q$.start()}Pq(){const t=this.K$?1:0,{numberOfMidRolls:e}=this.$$.linearAdsControllerData;return this.Y$===e-t}wq(t){return this.Pq()&&!this.lq?Number.POSITIVE_INFINITY:this.q$.getAdBreakDuration(t)}Iq(){if(this.X$)return!1;const{numberOfMidRolls:t}=this.$$.linearAdsControllerData;return this.Y$>=t&&-1!==t}yq(t){if(t)return t.stop(),(0,Mt.i)(this.Io.get(t)),this.Io.delete(t),null}mq(){const{maxAdSlotDuration:t}=this.$$.linearAdsControllerData;if(!t||this.vq)return;const e=C.h.getGlobalContainer().resolve(re.f);this.vq=new oe.B(e,t),this.vq.start(),this.Io.set(this.vq,[this.vq.onTimeElapsed.subscribe((()=>{this.Z$.next()}))])}gq(){const{maxAdPodDuration:t}=this.$$.linearAdsControllerData;if(!t||this.bq)return;const e=C.h.getGlobalContainer().resolve(re.f);this.bq=new oe.B(e,t),this.bq.start(),this.Io.set(this.bq,[this.bq.onTimeElapsed.subscribe((()=>{this.eq.next()})),this.bq.onTimeUpdate.subscribe((()=>{const t=this.bq.timeRemaining;this.iq.next(t)}))])}}class ce{constructor(t,e){this.$$=t,this._q=e,this.rq=new St.x,this.oq=new St.x,this.Tq=0,this.cq=new St.x,this.Io=new Map,this.Mi=[],this.dq={inImpression:!1,linearInImpression:!1,inPrePostRoll:!1,contentPaused:!0,linearInOpportunity:!1},this.Sq=!1,this.Aq=!0}start(){this.pq(),this.initTimer()}get onExperienceControllerStateChange(){return this.cq.asObservable()}initTimer(){const t=C.h.getGlobalContainer().resolve(re.f);this.kq=new oe.B(t,this.$$.resetNumberOfNonLinearAdsAfter),this.Io.set(this.kq,[this.kq.onTimeElapsed.subscribe((()=>{this.Tq=0,this.cq.next()}))])}pq(){this.Mi.push(this._q.onExperienceControllerStateChange.subscribe((()=>{this.cq.next()}))),this._q.start()}get onAdsDisabled(){return this.rq.asObservable()}get onAdsEnabled(){return this.oq.asObservable()}onLinearImpressionStateChange(t){this.dq.linearInImpression=t,t?(this.kq.stop(),this.Tq=0):(this.kq.reset(),this.kq.start(),this._q.onLinearAdFinished())}onLinearOpportunityChange(t){this.dq.linearInOpportunity=t}onAdStateChange(t){this.dq.inPrePostRoll=!(t===i.ProtoAdSlotsEnum.MidRoll)}onAdFinished(){this._q.onAdFinished(),this.dq.inImpression=!1,this.Tq++}onAdImpression(){this.dq.inImpression=!0,0===this.Tq&&(this.kq.reset(),this.kq.start())}canEnableAds(){return!!this._q.canEnableAds()&&(!(this.dq.inImpression||this.dq.inPrePostRoll||this.dq.linearInImpression||this.dq.linearInOpportunity&&this.Aq||this.dq.contentPaused&&this.Sq)&&!(this.Tq>=this.$$.numberOfNonlinearAds&&this.$$.numberOfNonlinearAds>0))}viewabilityStateChanged(t){this.Sq=t}onLinearNoDemand(){this.Aq=!1}enableAds(){this.oq.next()}disableAds(){this.rq.next()}contentPlaybackStateChanged(t){this.dq.contentPaused=!t,this.cq.next()}destroy(){var t;(0,Mt.i)(this.Mi),null===(t=this._q)||void 0===t||t.destroy()}}class de{constructor(t,e,i,s,n,r){var o;this.mediator=t,this.$$=e,this.q$=i,this.Mi=[],this.dq={stopped:!1,viewability:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,restrictedOnCurrentMedia:!1,adBlockerActive:!0},this.xq=new he(e,i),this.Cq(i),this.viewabilityStateChanged(s),this.onResize(this.$$.playerDimensions.width,this.$$.playerDimensions.height),this.xq.start(),(0,a.hj)(null===(o=e.nonLinearAdsControllerData)||void 0===o?void 0:o.numberOfNonlinearAds)&&r&&this.Mq(e.nonLinearAdsControllerData,r),n&&this.disableAdvertising(),this.onContentStop()}Cq(t){this.Mi.push(this.xq.onAdSlotDurationElapsed.subscribe((()=>{this.mediator.publish(this,zt)})),this.xq.onAdPodDurationElapsed.subscribe((()=>{this.mediator.publish(this,Wt)})),this.xq.onAdPodTimeUpdate.subscribe((t=>{this.mediator.publish(this,Xt,{payload:{remainingTime:t}})})),this.xq.onAdOpportunity.subscribe((t=>{var e;null===(e=this.Lq)||void 0===e||e.onLinearOpportunityChange(!0),this.mediator.publish(this,Yt,t)})),this.xq.onAdsDisabled.subscribe((t=>{this.mediator.publish(this,Gt,t)})),this.xq.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,Jt)})),this.xq.onTotalAdBreakDurationExpired.subscribe((()=>{this.mediator.publish(this,Ht)})),this.xq.onMidRollCapped.subscribe((()=>{this.mediator.publish(this,qt)})),this.xq.onExperienceControllerStateChange.subscribe((t=>{(0,a.$K)(t)&&(t.inCuePoint?this.mediator.publish(this,ee):(t.cuePointTimedOut&&this.mediator.publish(this,zt),this.mediator.publish(this,ie))),this.Bq()})),this.xq.onCanPrefetchAds.subscribe((()=>{this.mediator.publish(this,se,{payload:{linearity:dt.k.LINEAR}})})))}Mq(t,e){this.Lq=new ce(t,e),this.Mi.push(this.Lq.onAdsDisabled.subscribe((()=>{this.mediator.publish(this,Qt)})),this.Lq.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,Kt)})),this.Lq.onExperienceControllerStateChange.subscribe((()=>{this.Bq()}))),this.Lq.start()}slideChanged(t){this.xq.slideChanged(t)}updateStoryTimeline(t){this.xq.updateStoryTimeline(t)}contentPlaybackStateChanged(t){var e;this.xq.contentPlaybackStateChanged(t),null===(e=this.Lq)||void 0===e||e.contentPlaybackStateChanged(t)}contentTimeUpdate(t){this.xq.contentTimeUpdate(t)}forceRecheck(){this.Bq()}onAdImpression(t,e){var i;switch(e){case dt.k.LINEAR:this.xq.onAdImpression(t,this.Dq);const e=!0;null===(i=this.Lq)||void 0===i||i.onLinearImpressionStateChange(e);break;case dt.k.NONLINEAR:this.Lq.onAdImpression()}this.Bq()}getTheoreticalDurationUntilNextOpportuinity(){return this.xq.canEnableAds(this.Dq).enableAds?0:this.xq.getTheoreticalDurationUntilNextOpportuinity(this.Dq)}onAdFinished(t,e,i=!1){var s,n;switch(e){case dt.k.LINEAR:if(this.xq.onAdFinished(t,i,this.Dq),i)this.Fq();else{const t=!1;null===(s=this.Lq)||void 0===s||s.onLinearImpressionStateChange(t)}break;case dt.k.NONLINEAR:null===(n=this.Lq)||void 0===n||n.onAdFinished()}i||this.Bq()}onLinearAdPause(){this.xq.onAdPause()}onLinearAdPlay(){this.xq.onAdPlay()}onContentStop(){this.xq.onStop(),this.dq.stopped=!0,this.Bq()}onAdStateChange(t,e,s){var n;null===(n=this.Lq)||void 0===n||n.onAdStateChange(t);const r=t===this.xq.currentPlayerAdSlot&&t===i.ProtoAdSlotsEnum.MidRoll;r?this.xq.onAdStateChange(t,e,s,r):(this.xq.onAdStateChange(t,e,s,r),this.Vq())}adBlockerStatusChange(t){this.dq.adBlockerActive=t,this.Bq()}Vq(){this.xq.startAds(this.Dq),this.dq.stopped=!1,this.Bq()}contentChanged(){this.xq.contentChanged(this.Dq),this.Bq()}viewabilityStateChanged(t,e=!1,s=!1){var n;this.xq.viewabilityStateChanged(t,e),null===(n=this.Lq)||void 0===n||n.viewabilityStateChanged(t),this.Dq=t,this.$$.viewabilityPolicy===i.ProtoAdViewabilityPolicy.Strict&&(this.dq.viewability=!t),s||this.Bq()}setToggleAdsReason({isAppBackgrounded:t}){this.dq.isAppBackgrounded=t,this.Bq()}onLinearNoFill(){var t;null===(t=this.Lq)||void 0===t||t.onLinearOpportunityChange(!1),this.jq()}onLinearNoDemand(){var t;null===(t=this.Lq)||void 0===t||t.onLinearNoDemand(),this.jq()}disableAdvertising(){this.mediator.publish(this,Zt),this.dq.forceDisable=!0,this.Bq()}enableAdvertising(){this.mediator.publish(this,te),this.dq.forceDisable=!1,this.Bq()}updateDynamicCuePoints(t){this.q$.updateDynamicCuePoints(t)}disableAdsInBackground(){this.q$.disableAdsInBackground()}enableAdsInBackground(){this.q$.enableAdsInBackground()}get isAdvertisingDisabled(){return this.dq.forceDisable}get isAdvertisingDisabledForCurrentVideo(){return this.q$.isAdvertisingDisabledForCurrentVideo}get inView(){return this.Dq}onResize(t,e){this.dq.zeroDimension=0===t||0===e,this.Bq()}onNewMediaVideo(t,e=!1){this.onContentAdDurationReset(),this.xq.onNewMediaVideo(t),this.dq.restrictedOnCurrentMedia=e,this.Bq()}onContentAdDurationElapsed(){this.xq.onContentAdDurationElapsed(),this.Bq()}onStayNextButtonsDisplayed(){this.xq.onStayNextButtonsDisplayed(),this.Bq()}onStayButtonPress(){this.xq.onStayButtonPress(),this.Bq()}onContentAdDurationReset(){this.xq.onContentAdDurationReset()}destroy(){(0,Mt.i)(this.Mi),this.xq.destroy()}Bq(){const t=this.$q();t.enableAds?(this.Hq(),this.jq()):(this.Jq(t.disableReason),this.Gq())}Hq(){const t=this.xq.canEnableAds(this.Dq);t.enableAds?this.Fq():this.Jq(t.disableReason)}jq(){var t;(null===(t=this.Lq)||void 0===t?void 0:t.canEnableAds())?this.zq():this.Gq()}Gq(){var t;null===(t=this.Lq)||void 0===t||t.disableAds()}zq(){var t;null===(t=this.Lq)||void 0===t||t.enableAds()}Jq(t){this.xq.disableAds(t,this.Dq)}$q(){return this.dq.forceDisable?{enableAds:!1,disableReason:ne.m.ForceDisable}:Object.keys(this.dq).some((t=>this.dq[t]))?{enableAds:!1,disableReason:ne.m.Unknown}:{enableAds:!0,disableReason:ne.m.Unknown}}setAdHandler(t){this.xq.setAdHandler(t)}Fq(){this.xq.triggerAdOpportunity(),this.xq.enableAds()}}var le=h(6515),ue=h(8474),pe=h(6798),fe=h(2566),me=h(278);var ge=h(4978),ve=h(9069),ye=h(4336),be=h(9021);var Ie=h(6095),we=h(9209),Pe=h(8659),Te=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let _e=class{constructor(){this.Gc=0,this.Wq=new St.x}get onToggleMute(){return this.Wq.asObservable()}mute(t){t&&0===this.Gc&&(this.Gc=t,this.Wq.next(0))}unmute(){if(0===this.Gc)return;const t=this.Gc;this.Gc=0,this.Wq.next(t)}};_e=Te([(0,Pe.b2)(),(0,Pe.Yn)(Pe.Fw.ContainerScoped)],_e);var Se=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let Ae=class{constructor(){this.Yq=J.Ez.PlayingState,this.Xq=J.Ez.PlayingState,this.Kq=!1,this.Zq=!1,this.tH=!1,this.eH=new St.x}get onTogglePlay(){return this.eH.asObservable()}cacheContentIntention(t){this.Yq=t}onAdEvent(t){switch(t){case ve.fI.AdImpression:case ve.fI.AdPlaying:this.Xq=J.Ez.PlayingState;break;case ve.fI.AdStopped:case ve.fI.AdError:case ve.fI.AdSkipped:this.Zq=!1;break;case ve.fI.AdPaused:if(this.Kq){this.Kq=!1;break}this.Xq=J.Ez.PausedState,this.Yq=J.Ez.PausedState}}pause(t,e){if(this.Zq=e,e)this.Kq=!0;else{if(this.tH)return;this.Yq=t}this.tH=!0,this.eH.next(J.Ez.PausedState)}resume(){this.tH&&(this.tH=!1,this.Zq?this.eH.next(this.Xq):this.eH.next(this.Yq))}};Ae=Se([(0,Pe.b2)(),(0,Pe.Yn)(Pe.Fw.ContainerScoped)],Ae);var xe=h(8211),ke=h(7916);const Ee=Object.assign({},L.Km);var Ce=h(5139),Oe=h(5356);class Le{constructor(t,e){this.iH=t,this.zd=e,this.nH=null,this.rH=!1,this.oH=new St.x,this.aH(i.ProtoAdBreakTypeEnum.PreRoll)?this.setNewBreak(i.ProtoAdSlotsEnum.PreRoll):this.setNewBreak(i.ProtoAdSlotsEnum.MidRoll)}get onAdBreakRemainingTimeUpdate(){return this.oH}setNewBreak(t){const e=(0,Oe.gw)(t);this.hH=this.aH(e)||this.cH(e),this.rH=!(this.hH.totalNumberOfAdSlots<=1)}adStarted(){this.dH(),0===this.hH.currentPodNumber&&(this.hH.currentPodNumber=this.hH.totalNumberOfAdSlots),this.hH.currentPodNumber--,this.hH.currentPodNumber<=0&&(this.rH=!1)}endPod(){this.dH(),this.hH.currentPodNumber=0,this.rH=!1}enterPodTimeout(t){this.dH(),this.nH=setTimeout((()=>{this.dH(),t()}),J.Qg)}isInAdPod(){return this.rH}isCurrentBreakInPod(){return this.hH.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.hH.maxAdSlotDuration}getMaxAdPodDuration(){return this.hH.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let e=0;e<this.iH.length;e++){if(0===this.iH[e].maxAdSlotDuration)return 0;t=Math.max(t,this.iH[e].maxAdSlotDuration)}return t||Ce.O.DEFAULT_MAX_AD_DURATION*ct.s_}getCurrentSlotIndex(){return this.hH.totalNumberOfAdSlots-this.hH.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.hH.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.hH.totalNumberOfAdSlots}isInPodTimeout(){return!!this.nH}updatePodRemainingTime(t){this.hH.remainingAdPodDuration=t,this.oH.next()}getAdBreakState(){const t=this.lH(),e=this.uH();return{isAdPodBreak:this.isCurrentBreakInPod(),adPodSlotIndex:this.isCurrentBreakInPod()?this.getNextSlotIndex():0,maxAdDuration:t,remainingAdDuration:e,sessionMaxAdDuration:Math.round(this.getMaxAdSlotPossibleDuration()/ct.s_),adBreakType:this.hH.breakType}}dH(){clearTimeout(this.nH),this.nH=null}cH(t){return{breakType:t,currentPodNumber:0,maxAdSlotDuration:Ce.O.DEFAULT_MAX_AD_DURATION*ct.s_,maxAdPodDuration:0,totalNumberOfAdSlots:0,remainingAdPodDuration:0}}aH(t){for(const e of this.iH)if(e.types.includes(t))return{currentPodNumber:e.numberOfAdSlots,maxAdSlotDuration:e.maxAdSlotDuration,maxAdPodDuration:e.maxAdPodDuration,totalNumberOfAdSlots:e.numberOfAdSlots,breakType:t,remainingAdPodDuration:e.maxAdPodDuration};return null}lH(){return Math.round(this.getMaxAdSlotDuration()/ct.s_||Ce.O.DEFAULT_MAX_AD_DURATION)}uH(){const t=this.isCurrentBreakInPod()?this.hH.remainingAdPodDuration/ct.s_:this.lH(),e=this.zd.getRemainingAdsDurationInMs();return null===e?t:Math.round(Math.min(t,e/ct.s_))}}class Me{constructor(t,e,i,s){this.pH=t,this.fH=i,this.mH=this.gH(e,s)}gH(t,e){return(0,a.$K)(e)?Object.assign({},t[e]||t[i.ProtoDeviceType.Smartphone]):t}updateWidth(t){const e=this.vH(t);e!==this.currentBreakpointClass&&((0,I.IV)(this.pH,this.currentBreakpointClass),(0,I.cn)(this.pH,e),this.currentBreakpointClass=e)}vH(t){switch(!0){case t>=this.mH.xxl:return this.fH.Xxl;case t>=this.mH.xl:return this.fH.Xl;case t>=this.mH.lg:return this.fH.Lg;case t>=this.mH.md:return this.fH.Md;case t>=this.mH.sm:return this.fH.Sm;case t>=this.mH.xs:return this.fH.Xs;default:return this.fH.Xxs}}}class Re{constructor(t){this.urlSuffixerService=t,this.yH={},this.bH=[]}getImage(t,e,i,s,n="",r=!1){return this.IH=t,this.tj=(0,a.QM)(e)?e:"",this.Sn=i,this.An=s,this.wH=n,this.PH=r,this._H()}_H(){const t=this.TH();if(t)return t;const e=this.IH+this.wH,i=new Image;return i.src=this.urlSuffixerService.appendParamsToUrl(e),i.alt=this.tj,this.yH[this.IH]=this.yH[this.IH]||{},this.yH[this.IH][this.Sn]=this.yH[this.IH][this.Sn]||{},this.yH[this.IH][this.Sn][this.An]=this.yH[this.IH][this.Sn][this.An]||{},this.yH[this.IH][this.Sn][this.An][this.wH]=i,i}TH(){const t=this.SH();if(t)return t;if(!this.PH)return;this.AH();const e=this.kH();if(e)return e;const i=this.EH();return i||void 0}AH(){const t=[];if(!this.yH[this.IH])return void(this.bH=[]);const e=this.yH[this.IH],i=this.Sn>this.An?Y.Landscape:Y.Portrait;Object.keys(e).forEach((s=>{const n=parseInt(s,10);Object.keys(e[s]).filter((t=>!!e[s][t])).forEach((e=>{const s=parseInt(e,10);if((n>s?Y.Landscape:Y.Portrait)!==i)return;const r={area:n*s,img:this.xH(this.IH,n,s)};t.push(r)}))})),this.bH=[...t]}xH(t,e,i){if(this.yH[t]&&this.yH[t][e]&&this.yH[t][e][i])return this.yH[t][e][i][Object.keys(this.yH[t][e][i])[0]]}SH(){return this.yH[this.IH]&&this.yH[this.IH][this.Sn]&&this.yH[this.IH][this.Sn][this.An]&&this.yH[this.IH][this.Sn][this.An][this.wH]}kH(){if(0===this.bH.length)return;const t=this.Sn*this.An,e=this.bH.filter((({area:e})=>e>t)).sort(((t,e)=>t.area-e.area));return 0!==e.length?e[0].img:void 0}EH(){if(0===this.bH.length)return;const t=this.Sn*this.An,e=this.bH.filter((({area:e})=>e<t&&t/e<=1.3)).sort(((t,e)=>e.area-t.area));return 0!==e.length?e[0].img:void 0}}var Be=h(9762),De=h(1703),Ne=h(7332),Fe=h(7531),$e=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};const Ve=["com.accuweather.android"],je=.05*ct.s_;class Ue extends Ot.tt{constructor(t,e,s,n,r,o,h,c){super(),this.mediator=t,this._appSettings=e,this.Xi=s,this.vL=n,this.jc=r,this.NL=o,this.ah=h,this.r$=c,this.CH=.01,this.OH=.5,this.MH=.5,this.LH=2e3,this.BH=0,this.RH=!1,this.DH=!1,this.NH=!1,this.VH=!1,this.jH=!1,this.UH=!1,this.Dq=!1,this.$H=i.ProtoAdSlotsEnum.PreRoll,this.$T=!1,this.qH=!1,this.HH=!1,this.JH=!1,this.GH=!0,this.zH=!1,this.YH=!0,this.XH=[],this.QH=[],this.KH=[],this.tJ=[],this.eJ=[],this.iJ=[],this.sJ=new le.X(!1),this.nJ=0,this.rJ=!1,this.oJ={[we.d.togglePlay]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.togglePlay(this.YH)},[we.d.toggleMute]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.toggleMute(this.YH)},[we.d.increaseVolume]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.increaseVolume(.1,this.YH)},[we.d.decreaseVolume]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.decreaseVolume(.1,this.YH)}},this.aJ=t=>{this.qH=t,t&&(this.hJ(),this.cJ())},this.dJ=t=>{t&&this.adHandler&&!this.zH&&setTimeout((()=>{this.adHandler.resumeWithoutUserInteraction(this.$H)}),je)},this.lJ=()=>{this.isBelowSmBreakpoint(this.$experienceContainer.clientWidth)?(0,I.cn)(this.$experienceContainer,kt.Gj.NoHeight):(0,I.IV)(this.$experienceContainer,kt.Gj.NoHeight),!this.DH&&this.uJ()&&(this.mediator.publish(this,Q.Uh.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.lJ))},this.pJ=t=>{var e;const{playback:i,isFullscreenClose:s}=t;if(this.mJ&&(0,a.$K)(i)&&!s){const t=!i;null===(e=this.mJ)||void 0===e||e.setPlaybackPausedByUserInteraction(t)}},this.gJ=()=>{this.vJ(1)},this.yJ=()=>{this.vJ(0)},this.bJ=t=>{const{playback:e}=t;(0,a.$K)(e)&&(this.pJ(t),e?(this.app.services.EventsStorageService.emitAdPlay(),this.zH=!1):(this.app.services.EventsStorageService.emitAdPause(),this.zH=!0))},this.IJ=new Re(s),this.wJ=C.h.getSessionChildContainer(this.ah.sessionId).resolve(_e),this.PJ=C.h.getSessionChildContainer(this.ah.sessionId).resolve(Ae)}_J(){}TJ(t,e,i){this.app.services.EventsStorageService.emitAdImpression(t,e,i)}SJ(t){this.app.services.EventsStorageService.emitAdComplete(t)}AJ(){}kJ(){}EJ(){}xJ(){}CJ(){}OJ(){}MJ(){}LJ(t){const e={state:t};this.app.services.EventsStorageService.emitAdStateChange(e)}BJ(){const{clientWidth:t,clientHeight:e}=this.$playerContainer,i={width:t,height:e};this.app.services.EventsStorageService.emitPlayerResized(i)}RJ(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}DJ(){this.app.services.EventsStorageService.emitOnExitFullscreen()}NJ(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}FJ(t){this.app.services.EventsStorageService.emitOnPlayerExpanded(t)}VJ(t){this.UJ(t),this.$J(t),this.qJ(t),this.$H=t,this.HJ(t)}$J(t){this.adHandler&&this.adHandler.adStateChange(t,this.$H)}qJ(t){this.JJ.onAdStateChange(t,{maxAdPodDuration:this.GJ.getMaxAdPodDuration(),maxAdSlotDuration:this.GJ.getMaxAdSlotDuration()})}UJ(t){this.GJ.setNewBreak(t)}HJ(t){this.LJ(De.V[t])}WJ(){var t;null===(t=this.adHandler)||void 0===t||t.contentChanged(),this.JJ.contentChanged()}YJ(){var t;null===(t=this.adHandler)||void 0===t||t.contentEnded()}XJ(){var t,e,i,s,n,r;return $e(this,void 0,void 0,(function*(){this.adHandler=yield this.QJ(),this.KJ(),null===(t=this.adHandler)||void 0===t||t.onLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionPrice,{payload:t})})),null===(e=this.adHandler)||void 0===e||e.onNonLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionPrice,{payload:t})})),null===(i=this.adHandler)||void 0===i||i.onLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionRevenue,{payload:t})})),null===(s=this.adHandler)||void 0===s||s.onNonLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionRevenue,{payload:t})})),null===(n=this.adHandler)||void 0===n||n.onLinearExperienceEvent.subscribe((t=>{Q.Uh.UserInteraction===t.type&&this.bJ(t.payload)}));const o=()=>{this.vL.adsEnabled.next(),this.HH=!0,this.zH=!1,this.hJ(),this.tG.unsubscribe()};this.tG=null===(r=this.adHandler)||void 0===r?void 0:r.onAdsEnable.subscribe((()=>{o()})),this.JJ.setAdHandler(this.adHandler),this.eI()}))}un(t){this.mediator.publish(this,L.Km.AdImpression,t.payload);const{adSourceData:e,customAdData:i,adType:s}=t.payload.payload;this.TJ(e,i,s)}eI(){this.QH.push(this.jc.adBid.subscribe((t=>{const{publisherLineItemId:e,advertiserLineItemId:i,impressionTrackers:s}=t;setTimeout((()=>{this.mediator.publish(this,L.Km.Bid,{payload:{publisherLineItemId:e,advertiserLineItemId:i,impressionTrackers:s}})}),0)})))}KJ(){this.eG(),this.iG(),this.sG()}eG(){this.iJ.push(this.adHandler.onVpaidEvent.subscribe((t=>{switch(this.PJ.onAdEvent(t.type),t.type){case ve.fI.AdStarted:this.mediator.publish(this,L.Km.AdStarted,t.payload);break;case ve.fI.AdImpression:this.un(t);break;case ve.fI.AdStopped:{if(this.mediator.publish(this,L.Km.AdStopped,t.payload),this.Dq&&this.kJ(),!t.payload)return;const{adType:e}=t.payload.payload;this.SJ(e),this.app.services.EventsStorageService.emitAdStopped(e);break}case ve.fI.AdError:{const{adType:e}=t.payload;this.mediator.publish(this,L.Km.AdError,t),this.app.services.EventsStorageService.emitAdError(e);break}case ve.fI.AdSkipped:{const{adType:e}=t.payload.payload;this.mediator.publish(this,L.Km.AdSkipped,t.payload),this.app.services.EventsStorageService.emitAdSkipped(e),this.SJ(e),this.Dq&&this.kJ();break}case ve.fI.AdPaused:{const{adType:e}=t.payload.payload;this.vL.sessionPlaybackChanged.next({isPlaying:!1}),this.app.services.EventsStorageService.emitAdPaused(e),this.mediator.publish(this,L.Km.AdPause,t.payload);break}case ve.fI.AdPlaying:{const{adType:e}=t.payload.payload;this.vL.sessionPlaybackChanged.next({isPlaying:!0}),this.app.services.EventsStorageService.emitAdPlaying(e),this.mediator.publish(this,L.Km.AdPlay,t.payload);break}case ve.fI.AdVideoFirstQuartile:{const{adType:e}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted25,t.payload),this.app.services.EventsStorageService.emitAdVideoFirstQuartile(e);break}case ve.fI.AdVideoMidpoint:{const{adType:e}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted50,t.payload),this.app.services.EventsStorageService.emitAdVideoMidpoint(e);break}case ve.fI.AdVideoThirdQuartile:{const{adType:e}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted75,t.payload),this.app.services.EventsStorageService.emitAdVideoThirdQuartile(e);break}case ve.fI.AdVideoComplete:{const{adType:e}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted100,t.payload),this.app.services.EventsStorageService.emitAdVideoComplete(e);break}case ve.fI.AdClickThru:{const{adType:e}=t.payload.payload;this.mediator.publish(this,L.Km.AdClick,t.payload),this.app.services.EventsStorageService.emitAdClickThru(e);break}case ve.fI.AdInteraction:{const{adType:e}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(e);break}case ve.fI.AdUserAcceptInvitation:{const{adType:e}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(e);break}case ve.fI.AdExpandedChange:{const{adType:e}=t.payload.payload;this.app.services.EventsStorageService.emitAdExpandedChange(e);break}case ve.fI.AdUserClose:{const{adType:e}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(e);break}case ve.fI.AdUserMinimize:{const{adType:e}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(e);break}case ve.fI.AdVideoStart:{const{adSourceData:e,adType:i}=t.payload,{clientWidth:s,clientHeight:n}=this.$playerContainer,r={duration:e&&e.length,mediaPlayerVolume:this.getVolume(),mediaPlayerDimensions:{width:s,height:n}};this.app.services.EventsStorageService.emitAdVideoStart(r,i);break}case ve.fI.AdLoaded:{const{payload:e}=t.payload,{adType:i,adLoadedData:s}=e;this.mediator.publish(this,L.Km.AdLoaded,t.payload),(null==s?void 0:s.skipOffset)<0&&(s.skipOffset=void 0);const n=this.nG(s);this.app.services.EventsStorageService.emitAdLoaded(n,i);break}case ve.fI.AdVolumeChange:{const{adType:e}=t.payload.payload;this.mediator.publish(this,L.Km.AdVolumeChange,t.payload),this.app.services.EventsStorageService.emitAdVolumeChange(e);break}case ve.fI.AdLog:}})),this.adHandler.onPrefetchStart.subscribe((()=>{this.mediator.publish(this,L.Km.PrefetchStart)})),this.adHandler.onLinearUiComponentEvent.subscribe((t=>{t.type===Be.C.Close&&(this.mediator.publish(this,Ee.CloseButtonClicked),this.handleClose())})))}iG(){this.iJ.push(this.adHandler.onLinearEvent.subscribe((t=>{switch(t.type){case be.lc.ShowLinearEvent:this.JJ.onAdImpression(t.payload,dt.k.LINEAR),this.rG();break;case be.lc.HideLinearEvent:this.aG(t.forced);break;case be.lc.PauseLinearEvent:this.JJ.onLinearAdPause();break;case be.lc.ResumeLinearEvent:this.JJ.onLinearAdPlay();break;case be.lc.SkipLinearEvent:const e=!0;this.aG(e)}})))}sG(){this.iJ.push(this.adHandler.onNonLinearEvent.subscribe((t=>{switch(t.type){case be.gx.ShowNonLinearEvent:this.JJ.onAdImpression(t.payload,dt.k.NONLINEAR);break;case be.gx.HideNonLinearEvent:const e=!1;this.JJ.onAdFinished(this.adHandler.nonLinearInImpression,dt.k.NONLINEAR,e)}})))}rG(){this.GJ.adStarted(),this.adHandler.showLinear(),(0,I.cn)(this.$playerWrapper,kt.F_.HidePinnedTitle)}hG(){this.adHandler.hideLinear(),(0,I.IV)(this.$playerWrapper,kt.F_.HidePinnedTitle)}aG(t=!1,e=this.$playerContainer){var s,n,r,o;this.r$.processAdUserInteraction(t);let a=this.GJ.isInAdPod();t&&(a=!1,this.GJ.endPod()),this.JJ.onAdFinished(this.adHandler.linearInImpression,dt.k.LINEAR,a),this.hG(),this.cG.isCloseButton&&this.adHandler&&this.adHandler.firstLinearAdShown&&(this.cG.closeButtonMode!==i.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,I.pv)(e,kt.s6.CloseHover)||((0,I.cn)(e,kt.s6.CloseHover),null===(n=null===(s=this._$)||void 0===s?void 0:s.updateCloseButtonMode)||void 0===n||n.call(s,!1,i.ProtoPlayerCloseButtonMode.OnHover)),this.cG.floatingSettings.floatingCloseButtonMode!==i.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,I.pv)(e,kt.s6.CloseFloatHover)||((0,I.cn)(e,kt.s6.CloseFloatHover),null===(o=null===(r=this._$)||void 0===r?void 0:r.updateCloseButtonMode)||void 0===o||o.call(r,!0,i.ProtoPlayerCloseButtonMode.OnHover)))}dG(t){this.adHandler.enterAdPodLoadingState(),this.GJ.enterPodTimeout((()=>{this.GJ.endPod(),t()}))}lG(){(0,o.BZ)((0,r.mn)(this.cG.lineItemSettings.lineItems,dt.k.LINEAR))||this.JJ.onLinearNoDemand(),this.subscribe(Kt,this.JJ,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(dt.k.NONLINEAR)})),this.subscribe(Qt,this.JJ,(t=>{var e;const i=t.payload;null===(e=this.adHandler)||void 0===e||e.disableAds(dt.k.NONLINEAR,i)})),this.subscribe(Jt,this.JJ,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(dt.k.LINEAR)})),this.subscribe(Gt,this.JJ,(t=>{var e;const i=t.payload;null===(e=this.adHandler)||void 0===e||e.disableAds(dt.k.LINEAR,i)})),this.subscribe(zt,this.JJ,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.stopAd(be.aB.ForceStopAdSlot)})),this.subscribe(Wt,this.JJ,(()=>{if(this.adHandler)if(this.adHandler.linearInImpression)this.GJ.endPod(),this.adHandler.stopAd(be.aB.ForceStopAdPod);else{const t=!0;this.aG(t)}})),this.subscribe(Zt,this.JJ,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.disableAdvertising()})),this.subscribe(te,this.JJ,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAdvertising()})),this.subscribe(Xt,this.JJ,(t=>{this.GJ.updatePodRemainingTime(t.payload.remainingTime)})),this.subscribe(se,this.JJ,(t=>{var e;const i=t.payload.linearity;null===(e=this.adHandler)||void 0===e||e.canPrefetchAds(i)})),this.subscribe(Yt,this.JJ,(t=>{var e,i;this.mediator.publish(this,L.Km.AdOpportunity,t);const s=t.payload.adBreakType,n=null===(e=this.adHandler)||void 0===e?void 0:e.getLinearAdContainerWidth(),r=this.uG(),o=(0,a.$K)(n)?n:this.$playerContainer.clientWidth;this.vL.adOpportunity.next({adBreak:Vt.EN.fromProtoAdBreakType(s),playerWidth:o,opportunityId:r.id}),null===(i=this.adHandler)||void 0===i||i.newLinearAdOpportunity(r)}))}uG(){return(0,a.$K)(this.adHandler)?this.adHandler.getNewLinearAdOpportunity():new ye.qW}pG(){this.app.services.ViewabilityService.on(this.$playerContainer,this.aJ,{threshold:this.OH,callbackDelay:this.LH}),this.app.services.ViewabilityService.on(this.$playerContainer,(t=>{var e;t&&(null===(e=this.mJ)||void 0===e||e.setSessionInView()),this.NL.mediaViewabilityChanged.next({isInView:t})}),{threshold:this.MH}),this.app.services.ViewabilityService.on(this.$playerContainer,((t,e)=>this.fG(t,e)),{threshold:this.CH,fireOnInAppBackgroundChange:!0}),this.app.services.ViewabilityService.subscribe(L.jJ.OmidViewabilityThreshold,(t=>{this.mediator.publish(this,L.jJ.OmidViewabilityThreshold,{payload:{threshold:t}})})),this.app.config.os.os===xe.M.Ios&&this.app.services.PageFocusService.on(this.dJ)}hJ(){this.qH&&this.HH&&this.mediator.publish(this,Q.Xh.SessionView)}gG(){this.GH?(this.cJ(),this.GH=!1):(0,w.ld)((()=>this.cJ()),this.LH)}cJ(){this.rJ&&this.qH&&this.JH&&(this.NL.mediaView.next(),this.rJ=!1)}fG(t,e=!1){var i;this.JJ.setToggleAdsReason({isAppBackgrounded:e}),this.app.config.isInApp&&(this.ah.isPageInFocus=!e,e?(this.PJ.pause(null===(i=this._$)||void 0===i?void 0:i.getPlaybackIntention(),this.adHandler.linearInImpression),this.wJ.mute(this.getVolume())):(this.wJ.unmute(),this.PJ.resume())),this.Dq=t,this.mediator.publish(this,L.Km.IsViewable,{payload:t}),this.JJ.viewabilityStateChanged(this.mJ?this.mJ.checkFloatingViewability(t):t,this.GJ.isInAdPod(),this.GJ.isInPodTimeout()),this.vL.sessionViewabilityChanged.next({isInView:t})}bN(){var t,e,i;const s=this.$playerContainer.clientWidth,n=this.$playerContainer.clientHeight;this.ah.playerDimensions={height:n,width:s};const r=this.$T?ve.zc.Fullscreen:ve.zc.Normal;null===(t=this.adHandler)||void 0===t||t.resizeAd(s,n,r,this.$H);try{null===(e=this.JJ)||void 0===e||e.onResize(s,n)}catch(t){(0,T.nF)({message:"BaseExperience_onResize_player",callStack:t.stack,exception:t.message,level:T.D_.WARN,sessionId:this.cG.sessionId})}null===(i=this.adHandler)||void 0===i||i.setPlayerOrientation(this.vG(s,n)),this.bG(),setTimeout((()=>{this.mediator.publish(this,L.Km.SizeChanged,{payload:{width:s,height:n}}),this.IG()}))}isBelowSmBreakpoint(t){return t<this.nJ}vG(t,e){return t<e?ke.g.Portrait:t>e?ke.g.Landscape:ke.g.None}IG(){this.$T||this.BJ()}wG(){this.app.services.ResizeObserver.on(this.$playerContainer,(()=>{this.bN()}))}mP(){var t;this.$T=!0,this.app.services.InteractionService.disableScrollEvent(),this.RJ(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(ve.zc.Fullscreen)}fP(){var t;this.$T=!1,this.app.services.InteractionService.enableScrollEvent(),this.DJ(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(ve.zc.Normal)}PG(){const t=`<cnx class='${kt.oV}'></cnx>`,e=this.app.services.GlobalDomUtilsService.createElementByString(t);return this._G(e),e}_G(t){(0,I.T7)(t,{"padding-bottom":`${this.TG()}%`})}TG(){return this.cG.playerSize.ratioHeight/this.cG.playerSize.ratioWidth*100}SG(t){var e;(null===(e=this.adHandler)||void 0===e?void 0:e.linearInImpression)?this.AG(t.action):this.kG(t.action)}kG(t){}AG(t){const e=this.oJ[t];e&&e()}EG(){this.KH.push(this.mJ.onFloatingEnterStart.subscribe((()=>{var t,e,i;this.mediator.publish(this,L.Zr.PlayerFloatChanged,{payload:q.Float}),this.mediator.publish(this,L.Zr.FloatingEnterStart,{payload:!0}),null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!0),null===(i=null===(e=this._$)||void 0===e?void 0:e.updateFloatingState)||void 0===i||i.call(e,!0)})),this.mJ.onFloatingExitStart.subscribe((()=>{var t,e;this.mediator.publish(this,L.Zr.FloatingExitStart,{payload:!0}),null===(e=null===(t=this._$)||void 0===t?void 0:t.updateFloatingState)||void 0===e||e.call(t,!1)})),this.mJ.onFloatingExitStop.subscribe((()=>{var t,e,i;this.mediator.publish(this,L.Zr.PlayerFloatChanged,{payload:q.Embed}),this.mediator.publish(this,L.Zr.FloatingExitStop,{payload:!0}),null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!1),null===(i=null===(e=this._$)||void 0===e?void 0:e.updateFloatingState)||void 0===i||i.call(e,!1)})),this.mJ.onFloatingEnterStop.subscribe((()=>{this.mediator.publish(this,L.Zr.FloatingEnterStop,{payload:!0}),this.fG(!0)})))}xG(){this.KH.push(this.mJ.onFloatingEnterStop.subscribe((()=>{var t;null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!0),this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)})))}setNewVolume(t){var e;null===(e=this.adHandler)||void 0===e||e.setLinearVolume(t)}CG(){var t;this.OG(),null===(t=this.adHandler)||void 0===t||t.onLinearExperienceEvent.subscribe((t=>{var e;t.type===Q.Uh.UserInteraction&&(null===(e=t.payload)||void 0===e?void 0:e.volume)&&this.MG()}))}BG(t){this.subscribe(Q.Uh.UserInteraction,t,(({payload:{volume:t}})=>{t&&this.MG()}))}pN(t){this.mediator.publish(this,L.Km.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}vJ(t){this.getVolume()!==t&&this.setNewVolume(t)}OG(){this.RH=!0,this.$playerContainer.addEventListener("mouseover",this.gJ),this.$playerContainer.addEventListener("mouseout",this.yJ)}MG(){this.RH&&(this.RH=!1,this.$playerContainer.removeEventListener("mouseover",this.gJ),this.$playerContainer.removeEventListener("mouseout",this.yJ))}DG(){this.breakPointsHandler=new Me(this.$playerContainer,this.NG,this.FG,this.app.config.device),this.bG()}VG(t=this.$playerContainer){if(this.cG.isCloseButton){switch(this.cG.closeButtonMode){case i.ProtoPlayerCloseButtonMode.AlwaysOn:(0,I.cn)(t,kt.s6.CloseOn);break;case i.ProtoPlayerCloseButtonMode.Off:(0,I.cn)(t,kt.s6.CloseOff);break;case i.ProtoPlayerCloseButtonMode.OnHover:(0,I.cn)(t,kt.s6.CloseHover)}switch(this.cG.floatingSettings.floatingCloseButtonMode){case i.ProtoPlayerCloseButtonMode.AlwaysOn:(0,I.cn)(t,kt.s6.CloseFloatOn);break;case i.ProtoPlayerCloseButtonMode.Off:(0,I.cn)(t,kt.s6.CloseFloatOff);break;case i.ProtoPlayerCloseButtonMode.OnHover:(0,I.cn)(t,kt.s6.CloseFloatHover)}}}nG(t){const{skipOffset:e}=t;return{isAutoPlay:this.cG.playbackMode===i.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:e,isSkippable:(0,a.hj)(e)}}UG(){this.JH=!0,this.HH=!0,this.vL.contentStart.next(),this.hJ(),this.gG()}bG(){this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}uJ(){const{clientWidth:t,clientHeight:e}=this.$experienceContainer;return!(0,Ne.ON)({width:t,height:e})&&!this.isBelowSmBreakpoint(t)||((0,I.cn)(this.$experienceContainer,kt.Gj.NoHeight),this.$G())}$G(){return Ve.includes(this.app.config.bundleID)}qG(t){try{const{display:e,width:i,height:s,flex:n,maxWidth:r,minWidth:o}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:a,height:h}=t.getBoundingClientRect(),c={display:e,compWidth:i,boundWidth:a,compHeight:s,boundHeight:h,flex:n,maxWidth:r,minWidth:o};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}HG(){if(!(0,w.Vm)([95,5]))return;const t={parent:this.qG(this.$experienceContainer.parentElement),main:this.qG(this.$experienceContainer)};(0,T.nF)({message:"BaseExperience_invalid_dimensions",level:T.D_.INFO,exception:JSON.stringify(t),sessionId:this.cG.sessionId})}JG(){const t=C.h.getSessionChildContainer(this.app.config.sessionId).resolve(Ie.U);this.GJ=new Le(this.cG.adBreaks,t)}GG(){(0,I.cn)(this.$experienceContainer,kt.s6.ClickToPlayThumbnail)}zG(){}WG(){this.mediator.publish(this,Q.Xh.SessionRendered),this.sJ.next(!0)}YG(){return this.cG.floatingSettings.floatingMode===i.ProtoPlayerFloatingMode.Always?this.$experienceContainer:this.$playerContainer}XG(){return $e(this,void 0,void 0,(function*(){if(this.mJ)return;const{FloatingModule:t}=yield(0,w.Up)((()=>h.e("floating").then(h.bind(h,2185))));this.mJ=new t(this.cG.floatingSettings,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.app.services.ViewabilityService,this.YG(),this.app.config.device,this.ah,this.QG),this.cG.floatingSettings.floatingMode===i.ProtoPlayerFloatingMode.Always?this.xG():(this.BJ(),this.EG()),this.mJ.start()}))}KG(){return $e(this,void 0,void 0,(function*(){if(this.cG.floatingSettings.hasFloatingCapability||this.cG.preloadFloating)try{yield this.XG()}catch(t){const e=this.cG.floatingSettings.floatingMode===i.ProtoPlayerFloatingMode.Always;if((0,T.nF)({message:"BaseExperience__floating_chunk_request",exception:t.message,callStack:t.stack,level:e?T.D_.CRITICAL:T.D_.INFO,sessionId:this.cG.sessionId}),e)throw t}}))}ZG(){return $e(this,void 0,void 0,(function*(){this.DG(),this.JJ=this.tz(),yield this.KG()}))}renderExperience(t,e,i,s){this.cG=t,this.app=e,this.$experienceContainer=i,s&&s(),this._J(),this.app.services.ViewabilityService.setViewableThreshold(this.BH),this.generateHTML(),this.JG(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.lJ),this.uJ()?this.mediator.publish(this,Q.Uh.CanStart):this.HG()}start(){return $e(this,void 0,void 0,(function*(){if(this.DH=!0,yield this.ZG(),this.ah.playerDimensions={height:this.$playerContainer.clientHeight,width:this.$playerContainer.clientWidth},(0,I.cn)(this.$experienceContainer,kt.sN.MainContainerFlex),this.wG(),(0,I.Tp)(this.$playerContainer),this.cG.disableAdsInBackground&&this.disableAdsInBackground(),(0,o.BZ)(this.cG.lineItemSettings.lineItems))try{yield this.XJ()}catch(e){(0,T.nF)({message:"BaseExperience__initAdHandler",exception:e.message,callStack:e.stack,level:T.D_.CRITICAL,sessionId:this.cG.sessionId})}this.cG.disableAdvertising||Et.tt.isBannerBlocked?this.JJ.adBlockerStatusChange(Et.tt.isBannerBlocked):this.app.config.isOVPDomain?this.eJ.push(Et.tt.onAdBlockerDetected().subscribe((t=>{this.JJ.adBlockerStatusChange(t)}))):this.JJ.adBlockerStatusChange(Et.tt.isBannerBlocked),this.app.config.isMobile||this.cG.soundMode!==i.ProtoPlayerSoundMode.Hover||this.CG(),this.cG.isCloseButton&&this.VG(),this.cG.displayAdCountdown&&(0,I.cn)(this.$playerContainer,kt.s6.AdShowCountdown),this.cG.playbackMode===i.ProtoPlayerPlaybackModeEnum.ClickToPlay&&this.GG();try{this.lG()}catch(t){(0,T.nF)({message:"BaseExperience_initAdsController",exception:t.message,callStack:t.stack,level:T.D_.INFO,sessionId:this.cG.sessionId})}var t,e,s,n;Et.tt.isBannerBlocked||Et.tt.detectUsingScript().then((t=>{t&&(this.vL.sessionAdBlocked.next({adBlockDetectionType:jt.ev.Network}),this.JJ.disableAdvertising())})),this.app.config.isMobile||this.XH.push(this.onReady().pipe((0,Ft.h)((t=>!!t)),(t=()=>{this.zG()},n=(0,ue.m)(t)||e||s?{next:t,error:e,complete:s}:t,n?(0,pe.e)((function(t,e){var i;null===(i=n.subscribe)||void 0===i||i.call(n);var s=!0;t.subscribe((0,fe.x)(e,(function(t){var i;null===(i=n.next)||void 0===i||i.call(n,t),e.next(t)}),(function(){var t;s=!1,null===(t=n.complete)||void 0===t||t.call(n),e.complete()}),(function(t){var i;s=!1,null===(i=n.error)||void 0===i||i.call(n,t),e.error(t)}),(function(){var t,e;s&&(null===(t=n.unsubscribe)||void 0===t||t.call(n)),null===(e=n.finalize)||void 0===e||e.call(n)})))})):me.y),(0,ge.w)((()=>{var t;return null===(t=this.r$)||void 0===t?void 0:t.getShortcutsObservable()}))).subscribe((t=>this.SG(t)))),this.tJ.push(this.wJ.onToggleMute.subscribe((t=>{this.vJ(t)})),this.PJ.onTogglePlay.subscribe((t=>{t===J.Ez.PlayingState?this.play(false):this.pause(false)})))}))}play(t){var e;null===(e=this.adHandler)||void 0===e||e.play()}pause(t){var e;null===(e=this.adHandler)||void 0===e||e.pause()}setVolume(t){this.setNewVolume(t),this.MG()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,e){(0,Ne.ON)({width:t,height:e})||(0,I.T7)(this.$experienceContainer,{width:`${t}px`,height:`${e}px`})}updateDynamicCuePoints(t){this.JJ.updateDynamicCuePoints(t)}setCustomMacros(t){var e;this.app.services.MacrosService.addExtraMacros(t),null===(e=this.adHandler)||void 0===e||e.setCustomMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.CH})}setViewableThreshold(t){(0,T.nF)({message:"setViewableThreshold_usage",level:T.D_.INFO,exception:this.app.config.sdkVersion,sessionId:this.cG.sessionId},{throttle:1,shouldSendMaxLog:!1}),this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.BH=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,Q.Uh.Destroy)}updateJsQueryTargeting(t){(0,a.$K)(this.adHandler)?this.adHandler.updateJsQueryTargeting(t):this.cG.queryJsTargeting=(0,Fe.S1)(this.cG.queryJsTargeting,t)}removeJsQueryTargeting(t){(0,a.$K)(this.adHandler)?this.adHandler.removeJsQueryTargeting(t):this.cG.queryJsTargeting=(0,Fe.G_)(this.cG.queryJsTargeting,t)}disableAdvertising(){this.JJ.disableAdvertising()}enableAdvertising(){this.JJ.enableAdvertising()}disableAdsInBackground(){this.JJ.disableAdsInBackground()}enableAdsInBackground(){this.JJ.enableAdsInBackground()}enableFloatingMode(){this.mJ?this.mJ.enableFloatingMode():this.XG().then((()=>{this.mJ.enableFloatingMode()})).catch((t=>{(0,T.nF)({message:"BaseExperience__floating_js_api_chunk_request",exception:t.message,callStack:t.stack,level:T.D_.CRITICAL,sessionId:this.cG.sessionId})}))}disableFloatingMode(){var t;this.mJ&&(null===(t=this.mJ)||void 0===t||t.disableFloatingMode())}isFloatingModeEnabled(){var t,e;return null!==(e=null===(t=this.mJ)||void 0===t?void 0:t.isFloatingModeEnabled())&&void 0!==e&&e}setFloatingSettings(t){this.mJ?this.mJ.setFloatingSettings(t):this.XG().then((()=>{this.mJ.setFloatingSettings(t)})).catch((t=>{(0,T.nF)({message:"BaseExperience__floating_js_api_chunk_request",exception:t.message,callStack:t.stack,level:T.D_.CRITICAL,sessionId:this.cG.sessionId})}))}getFloatingSettings(){var t;return null===(t=this.mJ)||void 0===t?void 0:t.getFloatingSettings()}setLineItemMetadata(t,e){(0,a.$K)(this.adHandler)?this.adHandler.setLineItemMetadata(t,e):e({success:!1,errorReason:lt.q.AdManagerNotInitialized})}startConnatixAuction(t){(0,a.$K)(this.adHandler)?this.adHandler.startConnatixAuction(t):t({success:!1})}onReady(){return this.sJ.asObservable()}getApiConfig(){const t=JSON.parse(JSON.stringify(this.cG.apiConfig));return delete t.settings._connatixInternals,t}getSessionDataConfig(){return{playerInstanceID:this.app.config.appId}}destroy(){var t;(0,Mt.i)(this.XH),(0,Mt.i)(this.eJ),(0,Mt.i)(this.QH),this.adHandler&&((0,Mt.i)(this.iJ),this.tG.unsubscribe(),this.adHandler.destroy()),this.JJ&&this.JJ.destroy(),this.mJ&&(this.mJ.destroy(!0),this.mJ=null,(0,Mt.i)(this.KH)),(0,Mt.i)(this.tJ),null===(t=this.r$)||void 0===t||t.destroy()}}var qe,He;!function(t){t[t.PlayerOrientationChange=0]="PlayerOrientationChange",t[t.MainOrientationChange=1]="MainOrientationChange"}(qe||(qe={})),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(He||(He={}));class Je{constructor(t,e){switch(this.mediator=t,this.inView=!1,this.B$=!1,this.R$=!1,this.D$=!1,this.N$=()=>{},e){case i.ProtoPlayerPlaybackModeEnum.Autoplay:this.F$(this.V$);break;case i.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.F$(this.j$);break;case i.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.F$(this.U$)}}F$(t){this.N$=()=>{this.B$||t.call(this)}}V$(){this.D$&&!this.R$&&this.inView&&(this.R$=!0,this.mediator.publish(this,He[He.Play]))}U$(){this.D$&&(this.inView||this.$T&&!this.inView?this.mediator.publish(this,He[He.Play]):this.mediator.publish(this,He[He.Pause]))}j$(){}setViewability(t){this.inView=t,this.N$()}setUserPlayback(t){!this.R$&&t&&(this.R$=t),this.B$=!t}setCanPlay(t){this.D$=t,this.B$||!this.inView&&!this.R$||this.N$()}setIsFullscreen(t){this.$T=t}}var Ge=h(7953);const ze={xl:720,lg:320,md:204,sm:142,xs:0},We={[i.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[i.ProtoDeviceType.Tablet]:Object.assign({},ze),[i.ProtoDeviceType.Smartphone]:Object.assign({},ze)},Ye={xl:720,lg:320,md:204,sm:142,xs:0},Xe={[i.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[i.ProtoDeviceType.Tablet]:Object.assign({},Ye),[i.ProtoDeviceType.Smartphone]:Object.assign({},Ye)},Qe=176,Ke=160,Ze=144,ti=112,ei={xl:Ye.xl+Qe,lg:Ye.lg+Ke,md:Ye.md+Ze,sm:Ye.sm+ti},ii={[i.ProtoDeviceType.Desktop]:{xl:468+Qe,lg:388+Ke,md:248+Ze,sm:142+ti,xs:0},[i.ProtoDeviceType.Tablet]:Object.assign({},ei),[i.ProtoDeviceType.Smartphone]:Object.assign({},ei)},si={lg:320,md:204,sm:0},ni={[i.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:0},[i.ProtoDeviceType.Tablet]:Object.assign({},si),[i.ProtoDeviceType.Smartphone]:Object.assign({},si)},ri={xxl:1080,xl:0},oi={[i.ProtoDeviceType.Desktop]:{xxl:720,xl:0},[i.ProtoDeviceType.Tablet]:Object.assign({},ri),[i.ProtoDeviceType.Smartphone]:Object.assign({},ri)};Ge.ProtoGalleryOrientationEnum.Landscape,Ge.ProtoGalleryStyleMode.Detailed,Ge.ProtoGalleryStyleMode.Visual,Ge.ProtoGalleryOrientationEnum.Portrait,Ge.ProtoGalleryStyleMode.Detailed,Ge.ProtoGalleryStyleMode.Visual;var ai;!function(t){t[t.None=0]="None",t[t.MinSlidesBeforeFirstAd=1]="MinSlidesBeforeFirstAd",t[t.SlidesBetweenAds=2]="SlidesBetweenAds"}(ai||(ai={}));class hi{constructor(t){this.$$=t,this.Tz=!1,this.s5=0,this.n5=0,this.r5=[],this.o5=0,this.dq={slides:!1},this.cq=new St.x}get onExperienceControllerStateChange(){return this.cq.asObservable()}start(){this.a5()}canEnableAds(t,e){return t===i.ProtoAdSlotsEnum.MidRoll&&this.dq.slides&&e?{enableAds:!1,disableReason:ne.m.TimeoutBetweenAds}:{enableAds:!0,disableReason:ne.m.Unknown}}getAdBreakDuration(t){const e=this.h5();return t&&0!==this.r5.length&&e!==ai.None?e===ai.MinSlidesBeforeFirstAd?this.c5(this.$$.minSlidesBeforeFirstAd-this.n5):e===ai.SlidesBetweenAds?this.c5(this.$$.slidesBetweenAds-this.s5):0:0}onAdImpression(t,e){this.s5=0,t===i.ProtoAdSlotsEnum.MidRoll&&(this.Tz||(this.Tz=!0))}onAdFinished(t,e,i){e||this.a5()}onAdStateChange(t,e,s){t===i.ProtoAdSlotsEnum.MidRoll||s||(this.Tz=!1)}contentChanged(t,e){this.a5(),this.Tz=!1}slideChanged(t){this.o5=t,this.s5++,this.n5++,this.a5()}updateStoryTimeline(t){this.r5=t}destroy(){}a5(){this.dq.slides=!1;const t=this.h5();t===ai.MinSlidesBeforeFirstAd?this.l5():t===ai.SlidesBetweenAds&&this.u5(),this.cq.next()}l5(){this.n5<=this.$$.minSlidesBeforeFirstAd&&(this.dq.slides=!0)}u5(){this.s5<=this.$$.slidesBetweenAds&&(this.dq.slides=!0)}c5(t){let e=0,i=t;for(let t=0;t<this.r5.length&&0!==i;t++)t<this.o5||(e+=this.r5[t],i--);return e}getDurationUntilNextOpportunity(t){return this.getAdBreakDuration(t)}h5(){return!this.Tz&&this.$$.minSlidesBeforeFirstAd?ai.MinSlidesBeforeFirstAd:this.Tz&&this.$$.slidesBetweenAds?ai.SlidesBetweenAds:ai.None}}var ci,di,li=h(8021),ui=h(6224),pi=h(6203),fi=h(8230);!function(t){t[t.VolumeControls=0]="VolumeControls",t[t.PlaybackControls=1]="PlaybackControls",t[t.PlaylistControls=2]="PlaylistControls",t[t.CtaButton=3]="CtaButton",t[t.SlideTitle=4]="SlideTitle",t[t.TopLogo=5]="TopLogo",t[t.TopStoryTitle=6]="TopStoryTitle",t[t.TopSlideTitle=7]="TopSlideTitle",t[t.TextLabel=8]="TextLabel"}(ci||(ci={})),function(t){t[t.Default=0]="Default",t[t.Description=1]="Description",t[t.Quote=2]="Quote",t[t.Bullet=3]="Bullet",t[t.Cover=4]="Cover",t[t.Instagram=5]="Instagram",t[t.Pinned=6]="Pinned"}(di||(di={}));var mi,gi;!function(t){t.Video="VIDEO",t.Audio="AUDIO"}(mi||(mi={})),function(t){t[t.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",t[t.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",t[t.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",t[t.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(gi||(gi={}));const vi=[gi.MEDIA_ERR_NETWORK,gi.MEDIA_ERR_DECODE,gi.MEDIA_ERR_SRC_NOT_SUPPORTED];var yi;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(yi||(yi={}));var bi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Ii{constructor(t,e,i){this.Yz=t,this.Qd=i,this.Zc=!1,this.qY=!1,this.HY=yi.Hidden,this.JY=!1,this.GY=new St.x,this.zY=!1,this.WY=new Map([[J.wB.Play,()=>this.XY()],[J.wB.Playing,()=>this.QY()],[J.wB.Timeupdate,t=>this.ZY(t)],[J.wB.Ended,t=>this.tX(t)],[J.wB.Seeked,t=>this.eX(t)],[J.wB.Error,()=>this.iX()],[J.wB.LoadedMetadata,()=>this.sX()],[J.wB.Pause,()=>this.nX()],[J.wB.Volumechange,()=>this.rX()],[J.wB.BufferProgress,()=>this.oX()]]),this.aX=t=>{let e=!1;(t.type===J.wB.Timeupdate&&this.hX()||t.type===J.wB.Seeked)&&(e=this.cX(J.wB.Timeupdate));const i=this.WY.get(t.type);(0,a.$K)(i)?i(e):this.GY.next({type:t.type})},this.kr=Object.values(J.wB),this.volume=e,this.tS()}get currentTime(){return this.Yz.currentTime}set currentTime(t){this.qY?this.Yz.currentTime=t:this.dX=t}get duration(){return this.Yz.duration}get isPlaying(){return this.Zc}get videoEvents(){return this.GY.asObservable()}get volume(){return this.Gc}set volume(t){const e=t?t<=1?t:t/100:t;e!==this.Gc&&(this.Gc=e,void 0!==this.Gc&&(this.Yz.volume=this.Gc,(0,I.Q1)(this.Yz,this.Gc)))}setUnfreeze(){this.zY=!0}play(){return bi(this,void 0,void 0,(function*(){this.JY=!0,this.lX&&clearTimeout(this.lX),this.lX=setTimeout((()=>{this.GY.next({type:J.wB.Error,payload:{errorMessage:"play_timeout"}})}),25e3);const t=this.Yz.play();return(0,a.$K)(t)?t.catch((t=>((0,T.nF)({message:"ContentPlayer_play_promise_catch",exception:t,level:T.D_.INFO,sessionId:this.Qd.sessionId},{shouldSendMaxLog:!1,pacing:1}),Promise.reject(t)))):Promise.resolve()}))}pause(){this.lX&&clearTimeout(this.lX),this.Yz.pause(),this.Zc=!1,this.JY=!1}destroy(){this.kr.forEach((t=>{this.Yz.removeEventListener(t,this.aX)}))}setTrackModes(t){this.HY=t,this.uX()}setMetaLoaded(t){this.qY=t}setCrossOriginAttribute(){this.Yz.getAttribute("crossorigin")||this.Yz.setAttribute("crossorigin","anonymous")}setPoster(t){if(this.Yz.nodeName!==mi.Video)return;const e=t.getThumbnailUrl(this.Yz.clientWidth,this.Yz.clientHeight);(0,a.QM)(e)&&(this.Yz.poster=e)}getCurrentTrack(){return this.Yz.textTracks&&0!==this.Yz.textTracks.length?this.Yz.textTracks[0]:null}tS(){this.kr.forEach((t=>{this.Yz.addEventListener(t,this.aX)}))}XY(){this.JY||!this.Qd.isInApp||this.Qd.os!==xe.M.Android?this.Zc=!0:this.pause()}QY(){this.lX&&clearTimeout(this.lX),this.Qd.os===xe.M.Ios&&this.zY&&((0,I.UR)(this.Yz),this.zY=!1),this.uX(),this.GY.next({type:J.wB.Playing})}rX(){this.GY.next({type:J.wB.Volumechange,payload:{isMuted:this.Yz.muted}})}ZY(t){this.GY.next({type:J.wB.Timeupdate,payload:{isPlaying:this.Zc,isCorruptedCurrentTime:t}})}oX(){this.GY.next({type:J.wB.BufferProgress,payload:{bufferRanges:this.Yz.buffered}})}nX(){this.lX&&clearTimeout(this.lX),this.GY.next({type:J.wB.Pause})}iX(){this.lX&&clearTimeout(this.lX);const t=this.Yz.error?this.Yz.error.message:"";t&&this.GY.next({type:J.wB.Error,payload:{errorMessage:t,errorCode:this.pX()}})}sX(){this.qY=!0,(0,a.hj)(this.dX)&&(this.currentTime=this.dX,this.dX=null),this.GY.next({type:J.wB.LoadedMetadata})}eX(t){this.GY.next({type:J.wB.Seeked,payload:{isCorruptedCurrentTime:t}})}tX(t){this.GY.next({type:J.wB.Ended,payload:{isCorruptedCurrentTime:t}})}cX(t){return this.Qd.os===xe.M.Ios&&this.Yz.currentTime>this.Yz.duration&&((0,I.UR)(this.Yz),(0,T.nF)({message:"ContentPlayer__CorruptedCurrentTime",callStack:`Event type: ${t}`,level:T.D_.WARN,sessionId:this.Qd.sessionId},{throttle:10}),!0)}hX(){return this.Yz.currentTime-this.Yz.duration>.1}uX(){this.Yz.textTracks&&0!==this.Yz.textTracks.length&&Object.keys(this.Yz.textTracks).forEach((t=>{this.HY===this.Yz.textTracks[t].mode&&(this.Yz.textTracks[t].mode=this.HY===yi.Hidden?yi.Disabled:yi.Hidden),this.Yz.textTracks[t].mode=this.HY}))}pX(){var t,e,i;if((null===(t=this.Yz.error)||void 0===t?void 0:t.message.includes("MEDIA_ELEMENT_ERROR"))&&vi.includes(null===(e=this.Yz.error)||void 0===e?void 0:e.code))return null===(i=this.Yz.error)||void 0===i?void 0:i.code}}class wi{constructor(t,e,i,s){this.Qd=t,this.FY=e,this.fX=i,this.Kr=s,this.mX=!1,this.vX=!1,this.yX()}get volume(){var t,e;return null!==(e=null===(t=this.IX)||void 0===t?void 0:t.volume)&&void 0!==e?e:0}set volume(t){this.IX&&(this.IX.volume=t,t>0&&this.mX&&this.play())}start(t){if(!(0,a.QM)(t))throw new Error("AudioHandle no audio url");this.IX=new Ii(this.wX,this.fX,this.Qd),this.PX=t}play(){if(!this.IX||!(0,a.QM)(this.PX))throw new Error("AudioHandle error");this.vX||(0!==this.IX.volume?(0,a.QM)(this.wX.src)?(this.IX.play().catch((()=>{})),this.mX=!1):(this.vX=!0,this.wX.oncanplay=()=>{var t;this.wX.oncanplay=null,null===(t=this.IX)||void 0===t||t.play().catch((()=>{})),this.mX=!1,this.vX=!1},this.wX.src=this.PX):this.mX=!0)}pause(){this.vX&&(this.wX.oncanplay=null,this.vX=!1),this.IX&&(this.mX=!1,this.IX.pause())}destroy(){var t;this.wX.oncanplay=null,null===(t=this.IX)||void 0===t||t.destroy()}yX(){this.Kr?this.wX=this.Kr.createElement("audio"):this.wX=document.createElement("audio"),this.FY.appendChild(this.wX)}}var Pi=h(3360);class Ti extends Ot.tt{constructor(t,e,i,s,n){super(),this.mediator=t,this.YV=e,this.Kr=i,this.OQ=s,this.Xi=n,this.xW=!1,this.p5=!1,(0,a.QM)(e.imageUrl)||(e.imageUrl=f.n.endPoints.base.image),this.IJ=new Re(n),this.f5=this.Kr.createElementByString(this.PW()),this.m5()}set isLoaded(t){this.p5=t}get isLoaded(){return this.p5}g5(t,e){const i=t>e?Y.Landscape:Y.Portrait;return{imageUrl:this.v5[i],altText:(0,a.$K)(this.YV.altText)?this.YV.altText:"",queryParams:this.YV.mediaContext===x.ProtoMediaContextEnum.Logo?Pi.Q.getScaledImageQueryParams(t,e):Pi.Q.getSmartCroppedImageQueryParams(t,e),width:t,height:e}}m5(){const{imageUrl:t,portraitImageUrl:e}=this.YV;this.v5={[Y.Landscape]:t,[Y.Portrait]:(0,a.QM)(e)?e:t}}get duration(){return this.YV.slideDuration*ct.s_}getThumbnailUrlParams(t,e){return this.g5(t,e)}destroy(){}}class _i extends Ti{constructor(t,e,s,n=0){super(t,e,s.services.GlobalDomUtilsService,s.services.ResizeObserver,s.services.UrlSuffixerService),this.ph=s,this.fX=n,this.type=i.ProtoMediaTypeEnum.Image,this.y5=t=>{t.preventDefault()},this.b5()}b5(){this.YV.mediaContext===x.ProtoMediaContextEnum.Logo&&(0,I.cn)(this.f5,li.v$.MediaLogo)}I5(){this.w5=this.f5.clientWidth,this.T5=this.f5.clientHeight}_5(){this.S5=setTimeout((()=>{const{clientWidth:t,clientHeight:e}=this.f5.parentElement,{imageUrl:i,altText:s,width:n,height:r,queryParams:o}=this.g5(t,e),a=this.IJ.getImage(i,s,n,r,o,!0);this.Q2&&this.f5.removeChild(this.Q2),a&&(this.f5.appendChild(a),this.Q2=a,this.A5(this.Q2))}),0)}x5(){this.Q2&&(0,a.QM)(this.YV.imageUrl)&&this._5()}k5(){return(0,a.$K)(this.f5)&&(0,a.$K)(this.w5)&&(0,a.$K)(this.T5)}E5(t){return!!this.k5()&&Math.abs(this.w5-this.f5.clientWidth)>=this.w5/t}C5(t){return!!this.k5()&&Math.abs(this.T5-this.f5.clientHeight)>=this.T5/t}A5(t){t.addEventListener("mousedown",this.y5)}O5(t){t.removeEventListener("mousedown",this.y5)}R5(t){this.B5=new wi({isInApp:this.ph.config.isInApp,os:this.ph.config.os.os,sessionId:this.ph.config.sessionId},t,this.fX)}PW(){return'<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"></cnx>'}reset(){this.isLoaded&&(this.f5.style.transitionDuration="",this.f5.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.E5(10)||this.C5(10))&&(this.x5(),this.I5())}play(){this.isLoaded&&(this.f5.style.transform="",this.f5.style.transitionDuration=`${this.YV.slideDuration}s`,(0,I.L_)(this.f5,kt.s_.Paused,kt.s_.Playing),this.B5.play())}pause(){this.isLoaded&&(this.f5.style.transitionDuration="",this.f5.style.transform=this.Kr.getTransformPropertyValue(this.f5),(0,I.L_)(this.f5,kt.s_.Playing,kt.s_.Paused),this.B5.pause())}load(t){this.isLoaded||(this.R5(this.f5),this.B5.start(this.Xi.appendParamsToUrl(((t=e.o.connatix)=>`https://vid.${t}/audio/track.mp3`)())),this.isLoaded=!0,t.appendChild(this.f5),this.I5(),this.pause(),this._5())}destroy(){var t;super.destroy(),this.Q2&&this.O5(this.Q2),clearTimeout(this.S5),null===(t=this.B5)||void 0===t||t.destroy()}get volume(){return this.isLoaded?this.B5.volume:this.fX}set volume(t){this.isLoaded?this.B5.volume=t:this.fX=t}}class Si extends wi{constructor(t,e,i,s){super(t,e,i,s),this.dX=null,this.yX()}get currentTime(){var t,e;return null!==(e=null===(t=this.IX)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:0}set currentTime(t){if(this.IX)if(isNaN(this.IX.duration))this.dX=t;else{const e=2;this.IX.currentTime=parseFloat((t%this.IX.duration).toFixed(e)),this.dX=null}}get audioFile(){var t;return null!==(t=this.PX)&&void 0!==t?t:""}set audioFile(t){this.PX=t}play(){if(!this.IX||!(0,a.QM)(this.PX))throw new Error("AudioHandle error");return this.vX?Promise.resolve():0===this.IX.volume?(this.mX=!0,Promise.resolve()):(0,a.QM)(this.wX.src)?(this.mX=!1,this.IX.play()):new Promise((t=>{if(this.vX=!0,this.wX.oncanplay=()=>{var e;this.wX.oncanplay=null,null===(e=this.IX)||void 0===e||e.play().then((()=>{(0,a.Ft)(this.dX)||(this.currentTime=this.dX,this.dX=null),t()})).catch((()=>{})),this.mX=!1,this.vX=!1},this.wX.src=this.PX||"",!(0,a.QM)(this.PX))throw new Error("AudioHandle error");this.wX.src=this.PX||""}))}yX(){super.yX(),this.wX.loop=!0}}var Ai,xi,ki=h(8576),Ei=h(7994);!function(t){t.UnexpectedError="unexpectedError",t.BufferingError="bufferingError",t.FragBuffered="fragBuffered",t.ManifestLoaded="manifestLoaded",t.LevelSwitching="levelSwitching",t.LevelSwitched="levelSwitched",t.StreamEnded="streamEnded"}(Ai||(Ai={})),function(t){t.Http="http",t.Https="https"}(xi||(xi={}));const Ci={height:0,quality:J.ZH.Auto};var Oi;!function(t){t[t.MP4=0]="MP4",t[t.HLS=1]="HLS"}(Oi||(Oi={}));var Li=h(655),Mi=h(5720),Ri=h(3699),Bi=h(8843),Di=h(2457),Ni=h(7845);var Fi=h(1418),$i=h.n(Fi);function Vi(t){const e=new($i());return e.push(t),e.end(),e.manifest}var ji=h(6258),Ui=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class qi{constructor(t,e){this.Kr=t,this.Zn=e,this._X=new St.x,this.TX=new St.x,this.SX=new St.x,this.onTrackLoaded=this._X.asObservable(),this.onQualityChange=this.TX.asObservable(),this.onCurrentQuality=this.SX.asObservable(),this.AX=()=>{this._X.next()}}kX(t){this.EX=t}CX(t){this.Zn.innerHTML="",t.forEach((t=>{this.Zn.appendChild(t)}))}OX(){return this.MX}LX(t){var e;null===(e=this.MX)||void 0===e||e.remove(),this.MX=null,this.BX=t,this.EX&&this.EX.subtitles&&t&&(this.Zn.childNodes.forEach((t=>{"track"===t.nodeName.toLowerCase()&&t.remove()})),t.isHLSTrack?this.RX(t.file).then((e=>{this.DX(t,e)})):this.DX(t))}DX(t,e){const i=this.Kr.createElement("track");i.src=(0,a.QM)(e)?e:t.file,i.srclang=t.code,i.label=t.title,i.kind="subtitle",i.default=!0,i.addEventListener("load",this.AX,!1),i.addEventListener("loaded",this.AX,!1),this.Zn.appendChild(i),this.MX=i}RX(t){return Ui(this,void 0,void 0,(function*(){try{const e=yield(0,ji.Z)({requestUrl:t,requestType:"GET"});if(!(0,a.QM)(e))return;const i=Vi(e);if(!(0,o.BZ)(i.segments)||!(0,j.jv)(i.segments[0].uri))return;return i.segments[0].uri}catch(t){return}}))}}var Hi=h(2857);class Ji extends qi{constructor(t,e,i,s,n,r,o,a,h){super(t,e),this.Qn=i,this.NX=s,this.VX=n,this.$N=r,this.Xi=o,this.De=a,this.jX=h,this.UX=new St.x,this.onHlsEvent=this.UX.asObservable(),this.ir=[],this.$X=J.ZH.Auto,this.qX=320,this.HX=!1,this.JX=!1,this.GX=!1,this.handlerType=Oi.HLS,this.zX=new le.X(0),this.WX=!1,this.YX=!1,this.XX=!1,this.isNativeVideoSrcImplementation=!1,this.QX=5,this.ar=()=>{this.rr.off(this.Qn.Events.MEDIA_ATTACHED,this.ar);const t=this.KX(this.ZX);this.rr.loadSource(t),this.rr.once(this.Qn.Events.MANIFEST_PARSED,this.hr)},this.hr=()=>{this.rr.off(this.Qn.Events.MANIFEST_PARSED,this.hr),this.rr.on(this.Qn.Events.LEVEL_SWITCHING,this.tQ),this.rr.on(this.Qn.Events.LEVEL_SWITCHED,this.eQ),this.rr.on(this.Qn.Events.FRAG_BUFFERED,this.iQ),this.rr.on(this.Qn.Events.FRAG_LOADING,this.sQ),this.rr.on(this.Qn.Events.FRAG_LOADED,this.nQ),this.rr.on(this.Qn.Events.BUFFER_APPENDING,this.rQ),this.rr.on(this.Qn.Events.BUFFER_APPENDED,this.oQ),this.rr.on(this.Qn.Events.BUFFER_EOS,this.cQ),this.ZX=null,this.cr(),this.lQ(),this.uQ(),this.pQ.resolve()},this.fQ=()=>{this.ZX=null,this.Zn.removeEventListener(J.wB.LoadedMetadata,this.fQ),this.mQ.resolve()},this.lQ=()=>{const t=(0,Hi.T_)(this.ir).map((t=>({videoHeight:t.height,isHD:t.height>=J.gQ,label:t.level.toString()})));this.UX.next({type:Ai.ManifestLoaded,payload:{qualityList:t}})},this.iQ=()=>{this.UX.next({type:Ai.FragBuffered})},this.sQ=()=>{this.HX=!0},this.nQ=()=>{this.HX=!1},this.rQ=()=>{this.JX=!0},this.oQ=()=>{this.JX=!1},this.cQ=()=>{this.UX.next({type:Ai.StreamEnded})},this.sr=(t,e)=>{if(e.details===this.Qn.ErrorDetails.BUFFER_STALLED_ERROR&&(this.HX||this.JX?this.UX.next({type:Ai.BufferingError}):(this.GX||(this.shouldRecoverMediaError()&&this.rr.recoverMediaError(),this.Zn.play().then((()=>{this.GX=!1})).catch((()=>{this.GX=!1}))),this.GX=!0)),e.fatal)switch(e.type){case this.Qn.ErrorTypes.NETWORK_ERROR:if(e.details===this.Qn.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.vQ("hls_network_error_manifest_parsing_error_FATAL");if(e.details===this.Qn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.UX.next({type:Ai.UnexpectedError});if(e.details===this.Qn.ErrorDetails.LEVEL_LOAD_ERROR&&this.zX.next(this.zX.value+1),this.WX)return this.cQ(),void(this.WX=!1);this.rr.startLoad();break;case this.Qn.ErrorTypes.MEDIA_ERROR:this.rr.recoverMediaError();break;default:this.vQ("hls_unexpected_error_FATAL",`type_${e.type}_details_${e.details}`)}else e.type===this.Qn.ErrorTypes.MEDIA_ERROR&&e.details===this.Qn.ErrorDetails.BUFFER_APPENDING_ERROR&&this.vQ("hls_media_error_buffer_appending_error"),e.type===this.Qn.ErrorTypes.NETWORK_ERROR&&e.details===this.Qn.ErrorDetails.MANIFEST_PARSING_ERROR&&this.vQ("hls_network_error_manifest_parsing_error")},this.yQ=()=>{this.vQ("hls_video_tag_error",`code_${this.Zn.error.code}_message_${this.Zn.error.message}`)},this.eQ=(t,e)=>{this.qX=this.ir.find((t=>t.level===e.level)).height,this.TX.next(this.currentQualitySettings.height),this.SX.next(this.currentQualitySettings),this.UX.next({type:Ai.LevelSwitched})},this.tQ=(t,e)=>{this.rr.autoLevelEnabled||e.level===this.rr.currentLevel||this.UX.next({type:Ai.LevelSwitching})},(0,Hi.fh)()?(this.rr=this.bQ(),this.isNativeVideoSrcImplementation=!1):(this.isNativeVideoSrcImplementation=!0,this.VX={quality:J.ZH.Strict,height:360}),this.qX=this.VX.height,this.$X=this.VX.quality}start(){}get liveSyncPosition(){if(this.rr)return this.rr.liveSyncPosition}setSource(t,e=!1){this.QX=5,this.YX=this.$N&&!t.isExternalSource,this.rr&&this.YX&&(this.XX||(this.XX=!0,this.rr.autoLevelCapping=1)),this.HL=t.id,this.kX(t),this.ZX=t,this.IQ=t,e&&this.attachMedia()}attachMedia(){return this.pQ?this.pQ.promise:this.mQ?this.mQ.promise:(!this.rr&&(0,Hi.fh)()&&(this.rr=this.bQ()),new Promise((t=>{if(this.rr?this.rr.on(this.Qn.Events.ERROR,this.sr):this.Zn.addEventListener(J.wB.Error,this.yQ),this.initLiveStreamRetry(),this.ZX){const e=this.OX()?[this.OX()]:[];this.CX(e),this.rr?this.wQ().then((()=>{t()})):this._Q().then((()=>{t()}))}else t()})))}detachMedia(){this.ir=[],this.pQ=void 0,this.mQ=void 0,this.rr?(this.rr.detachMedia(),this.destroy()):(this.Zn.removeAttribute("src"),this.Zn.removeEventListener(J.wB.LoadedMetadata,this.fQ),this.Zn.removeEventListener(J.wB.Error,this.yQ))}setQuality(t){this.$X=t.quality,this.qX=t.height,this.rr?this.uQ():this.TQ(),this.TX.next(this.currentQualitySettings.height),this.SX.next(this.currentQualitySettings)}get currentQualitySettings(){return{quality:this.$X,height:this.qX}}onQualityChanged(){return this.isNativeVideoSrcImplementation?this.attachMedia():new Promise((()=>{}))}recoverMedia(){return 0!==this.QX&&(this.QX--,this.rr.recoverMediaError(),!0)}shouldRecoverMediaError(){return!this.jX}destroy(){this.rr?(this.SQ(),this.rr.destroy(),this.rr=null):(this.Zn.removeEventListener(J.wB.LoadedMetadata,this.fQ),this.Zn.removeEventListener(J.wB.Error,this.yQ))}updateSubtitleTrackSource(t){this.LX(t)}getSelectedCaptionTrack(){return this.BX}wQ(){return this.pQ=new Ei.C,this.rr.attachMedia(this.Zn),this.rr.once(this.Qn.Events.MEDIA_ATTACHED,this.ar),this.pQ.promise}_Q(){return this.mQ=new Ei.C,this.AQ(this.IQ.getHlsSource()),this.Zn.addEventListener(J.wB.LoadedMetadata,this.fQ),this.mQ.promise}SQ(){this.rr.off(this.Qn.Events.MEDIA_ATTACHED,this.ar),this.rr.off(this.Qn.Events.MANIFEST_PARSED,this.hr),this.rr.off(this.Qn.Events.ERROR,this.sr),this.rr.off(this.Qn.Events.LEVEL_SWITCHING,this.tQ),this.rr.off(this.Qn.Events.LEVEL_SWITCHED,this.eQ),this.rr.off(this.Qn.Events.FRAG_BUFFERED,this.iQ),this.rr.off(this.Qn.Events.FRAG_LOADING,this.sQ),this.rr.off(this.Qn.Events.FRAG_LOADED,this.nQ),this.rr.off(this.Qn.Events.BUFFER_APPENDING,this.rQ),this.rr.off(this.Qn.Events.BUFFER_APPENDED,this.oQ),this.rr.off(this.Qn.Events.BUFFER_EOS,this.cQ)}cr(){this.rr.levels.forEach(((t,e)=>{this.YX&&e>1||this.ir.push({level:e,height:t.height})}))}vQ(t,e){(0,T.nF)({message:t,exception:this.HL,level:T.D_.WARN,callStack:e,sessionId:this.De},{extraLogsPercentage:5}),this.UX.next({type:Ai.UnexpectedError})}uQ(){if(this.$X===J.ZH.Auto)-1!==this.rr.currentLevel&&(this.rr.currentLevel=-1);else try{const t=(0,Hi.VK)(this.ir,this.qX);t.level!==this.rr.currentLevel&&(this.rr.currentLevel=t.level)}catch(t){(0,T.nF)({message:"HlsSourceHandler_set_quality",exception:t.message,callStack:t.stack,level:T.D_.CRITICAL,sessionId:this.De},{extraLogsPercentage:5})}}TQ(){const t=this.kQ.playlists.findIndex((t=>this.qX===t.attributes.RESOLUTION.height));if(-1!==t){const e=this.kQ.playlists[t];this.Zn.src=this.xQ(this.KX(this.IQ),e.uri)}else this.Zn.src=this.KX(this.IQ)}KX(t){try{const e=t.getHlsSource(),i=(0,w.bx)(e);return i&&i.protocol?this.Xi.appendParamsToUrl(e):this.Xi.appendParamsToUrl(`${this.NX}:${e}`)}catch(t){(0,T.nF)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:T.D_.CRITICAL,callStack:t.stack,sessionId:this.De},{throttle:5,shouldSendMaxLog:!1,extraLogsPercentage:5})}}xQ(t,e){return/^https?:\/\//i.test(e)?e:t.replace(/[^/]+\.m3u8/,e)}AQ(t){try{(0,ji.Z)({requestUrl:t,requestType:"GET"}).then((t=>{this.kQ=Vi(t),this.TQ()}))}catch(t){}}bQ(){return new this.Qn(Object.assign({},Hi.yt))}initLiveStreamRetry(){var t;null===(t=this.CQ)||void 0===t||t.unsubscribe(),this.CQ=this.zX.pipe(function(t){for(var e,i,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];var r=null!==(e=(0,Di.yG)(s))&&void 0!==e?e:Bi.z,o=null!==(i=s[0])&&void 0!==i?i:null,a=s[1]||1/0;return(0,pe.e)((function(e,i){var s=[],n=!1,h=function(t){var e=t.buffer;t.subs.unsubscribe(),(0,Ri.P)(s,t),i.next(e),n&&c()},c=function(){if(s){var e=new Mi.w0;i.add(e);var n={buffer:[],subs:e};s.push(n),(0,Ni.f)(e,r,(function(){return h(n)}),t)}};null!==o&&o>=0?(0,Ni.f)(i,r,c,o,!0):n=!0,c();var d=(0,fe.x)(i,(function(t){var e,i,n=s.slice();try{for(var r=(0,Li.XA)(n),o=r.next();!o.done;o=r.next()){var c=o.value,d=c.buffer;d.push(t),a<=d.length&&h(c)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}}),(function(){for(;null==s?void 0:s.length;)i.next(s.shift().buffer);null==d||d.unsubscribe(),i.complete(),i.unsubscribe()}),void 0,(function(){return s=null}));e.subscribe(d)}))}(5e3),(0,Ft.h)((t=>t.length<3))).subscribe((()=>{this.WX=!0,this.zX.next(0)}))}}class Gi{constructor(t){this.aj=[{id:J.L5.H264,extension:"mp4",type:"video/mp4"},{id:J.L5.Hevc,extension:"mp4",type:"video/mp4"}],this.cj=this.aj.find((e=>e.id===t))}get type(){const t=this.cj.codecs?`codecs=${this.cj.codecs}`:"";return`${this.cj.type}; ${t}`}get id(){return this.cj.id}}class zi{constructor(t,e){this.OQ=t,this.YT=e,this.MQ={quality:J.ZH.Auto,height:360},this.resizeObserverBinded=!1,this.TX=new St.x,this.SX=new le.X(this.MQ),this.LQ=30,this.BQ=()=>{const t=this.YT.clientHeight;if(this.RQ(t)&&this.currentQualitySettings.quality===J.ZH.Auto){const e={height:t,quality:J.ZH.Auto};this.setCurrentQualitySettings(e),this.SX.next(e)}}}setCurrentQualitySettings(t){this.MQ.quality=t.quality,this.MQ.height!==t.height&&(this.MQ.height=t.height,this.TX.next())}RQ(t){return!this.MQ.height||t/this.MQ.height*100-100>this.LQ}addResizeObserver(){this.resizeObserverBinded=!0,this.OQ.on(this.YT,this.BQ)}removeResizeObserver(){this.resizeObserverBinded=!1,this.OQ.off(this.YT,this.BQ)}setQuality(t){t.quality===J.ZH.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.BQ()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.SX.next(this.MQ)}get currentQualitySettings(){return this.MQ}get onQualityChange(){return this.TX.asObservable()}get onCurrentQuality(){return this.SX.asObservable()}destroy(){this.removeResizeObserver()}}class Wi extends qi{constructor(t,e,i,s,n={},r,o){super(t,s),this.OQ=e,this.hh=i,this.VX=r,this.De=o,this.hY=[],this.gj=null,this.DQ=10.13,this.handlerType=Oi.MP4,this.isNativeVideoSrcImplementation=!0,this.NQ=this.FQ(n)}start(){try{this.VQ=new zi(this.OQ,this.hh),this.tS(),this.setQuality(this.VX)}catch(t){(0,T.nF)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:T.D_.CRITICAL,sessionId:this.De},{extraLogsPercentage:5})}}onQualityChanged(){return this.attachMedia()}setSource(t,e=!1){this.kX(t),this.jQ(this.UQ(),e)}canUseSource(t){return(0,o.BZ)(t.getSources(this.VX.quality,this.NQ))}setQuality(t){this.VQ.setQuality(t)}get currentQualitySettings(){return this.VQ.currentQualitySettings}attachMedia(){return new Promise((t=>{this.$Q(),t()}))}detachMedia(){this.Zn.removeAttribute("src"),this.jQ(null)}destroy(){this.VQ.destroy(),(0,Mt.i)(this.hY)}updateSubtitleTrackSource(t){this.LX(t)}getSelectedCaptionTrack(){return this.BX}recoverMedia(){return!1}tS(){const t=this.VQ.onCurrentQuality.subscribe((t=>this.SX.next(t))),e=this.VQ.onQualityChange.subscribe((()=>this.qQ(this.VQ.currentQualitySettings.height)));this.hY.push(t,e)}qQ(t){this.jQ(this.UQ()),this.TX.next(t)}HQ(t){this.CX(t),this.Zn.load()}UQ(){return[...this.JQ(),...this.OX()?[this.OX()]:[]]}JQ(){if(!this.Zn||!this.EX)return[];const t=[];return this.EX.getSources(this.VQ.currentQualitySettings.height,this.NQ).forEach((e=>{if(e.src){const i=this.Kr.createElement("source");i.src=e.src,i.type=e.type,t.push(i)}})),t}$Q(){this.gj&&(this.HQ(this.gj),this.gj=null)}jQ(t,e=!1){this.gj=t,e&&this.$Q()}FQ(t){let e;switch(t.os){case xe.M.Ios:e=[J.L5.Hevc,J.L5.H264];break;case xe.M.Mac:e=t.osVersion>this.DQ&&t.browser===ki.lI.Safari?[J.L5.Hevc,J.L5.H264]:[J.L5.H264];break;default:e=[J.L5.H264]}return e.map((t=>new Gi(t)))}}var Yi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class Xi extends Ot.tt{constructor(t,e,i,s,n,r,o={},h,c,d){super(),this.mediator=t,this.ph=e,this.Kr=i,this.hh=s,this.OQ=n,this.fX=r,this.cj=o,this.GQ=h,this.zQ=c,this.VX=d,this.WQ=!0,this.oY=!1,this.YQ=!1,this.QQ=!1,this.Rr=new St.x,this.CH=.01,this.hY=[],this.KQ=t=>{var e;const i={[Ai.LevelSwitching]:J.T$.LevelSwitching,[Ai.LevelSwitched]:J.T$.LevelSwitched,[Ai.StreamEnded]:J.T$.EndOfStream,[Ai.FragBuffered]:J.T$.Buffered,[Ai.BufferingError]:J.T$.Buffering}[t.type];if((0,a.QM)(i))this.mediator.publish(this,i);else{if(t.type===Ai.UnexpectedError)return this.YQ=!0,void this.ZQ();if(t.type===Ai.ManifestLoaded){const i=null===(e=t.payload)||void 0===e?void 0:e.qualityList;this.mediator.publish(this,J.XQ.Loaded,{payload:{qualityList:i,videoMeta:this.tK}}),this.IX.setMetaLoaded(!0)}}},this.eK=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.playing&&this.mediator.publish(this,Be.C[Be.C.CaptionUpdate],{payload:t})},this.AX=()=>{this.currentTrack&&(this.currentTrack.mode=this.iK?yi.Hidden:yi.Disabled,this.currentTrack.oncuechange=this.eK)},this.sK(),this.nK.appendChild(this.Zn),this.hh.appendChild(this.nK),this.VX=this.VX||Ci,this.rK=new Wi(i,this.OQ,this.hh,this.Zn,this.cj,this.VX,this.ph.config.sessionId),this.ph.config.os.os===xe.M.Ios&&this.ph.services.ViewabilityService.on(this.Zn,((t,e)=>{!e&&t||this.IX.setUnfreeze()}),{threshold:this.CH})}initHlsSourceHandler(t){const e=this.Kr.isHttpsProtocolUsed()?xi.Https:xi.Http,i=(0,a.QM)(this.ph.config.bundleID);this.Jr=new Ji(this.Kr,this.Zn,t,e,this.VX,i,this.ph.services.UrlSuffixerService,this.ph.config.sessionId,this.ph.config.browser.browserType===ki.lI.Safari)}blurVideoTag(){this.Zn.blur()}aK(){return Yi(this,void 0,void 0,(function*(){if(this.Jr)return!0;const t=yield(0,Hi.zJ)(this.Kr.global,this.ph.config.sessionId);return(0,Hi.fh)()||(0,Hi.vY)(this.Zn)?(this.initHlsSourceHandler(t),this.hK(),this.cK(),!0):(this.WQ=!1,(0,T.nF)({message:"Hls_not_supported",level:T.D_.INFO,sessionId:this.ph.config.sessionId},{extraLogsPercentage:5}),!1)}))}get onVideoEvents(){return this.Rr.asObservable()}start(){try{this.IX=new Ii(this.Zn,this.fX,{isInApp:this.ph.config.isInApp,os:this.ph.config.os.os,sessionId:this.ph.config.sessionId}),this.Gc=this.volume,this.dK(),this.hK(),this.lK()}catch(t){(0,T.nF)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:T.D_.CRITICAL,sessionId:this.ph.config.sessionId},{extraLogsPercentage:5})}}ZQ(){if(this.uK=this.currentTime,!this.rK.canUseSource(this.tK))return(0,T.nF)({message:"VideoHandler_no_mp4_fallback_source",level:T.D_.CRITICAL,sessionId:this.ph.config.sessionId}),void this.Rr.next(J.wB.Error);this.setSource(this.tK,!0,!0),this.pK.attachMedia().then((()=>{this.fK()})).catch((t=>{this.YQ=!1,this.Rr.next(J.wB.Error),(0,T.nF)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:T.D_.CRITICAL,sessionId:this.ph.config.sessionId},{extraLogsPercentage:5})}))}cK(){this.hY.push(this.Jr.onHlsEvent.subscribe((t=>this.KQ(t))))}dK(){this.mK(this.rK)}hK(){this.Jr&&this.mK(this.Jr)}mK(t){t.start(),this.gK(t)}lK(){this.IX.videoEvents.subscribe((t=>{var e,i,s;const n=(null===(e=this.pK)||void 0===e?void 0:e.handlerType)===Oi.HLS;if(t.payload&&t.payload.isCorruptedCurrentTime)n&&this.ZQ();else{if(t.type===J.wB.Timeupdate&&(this.dX=this.currentTime),t.type===J.wB.Canplay&&this.zQ&&(this.currentTime=this.zQ,this.zQ=null),this.YQ&&(this.YQ=!1,t.type===J.wB.Playing&&(this.IX.currentTime=this.uK)),t.type===J.wB.Error){if(n&&(0,a.$K)(t.payload.errorCode)){return this.pK.recoverMedia()?void(this.playing&&this.play()):((0,T.nF)({message:"VideoHandler_unrecoverable_media",exception:t.payload.errorMessage,level:T.D_.WARN,sessionId:this.ph.config.sessionId},{extraLogsPercentage:100}),void this.mediator.publish(this,J.T$.PlayError,{payload:null===(i=t.payload)||void 0===i?void 0:i.errorMessage}))}return(0,T.nF)({message:"VideoHandler_play_error_event",exception:t.payload.errorMessage,level:T.D_.WARN,sessionId:this.ph.config.sessionId},{extraLogsPercentage:5}),this.Rr.next(t.type),void this.mediator.publish(this,J.T$.PlayError,{payload:null===(s=t.payload)||void 0===s?void 0:s.errorMessage})}this.Rr.next(t.type),this.mediator.publish(this,t.type,{payload:t.payload})}}))}gK(t){this.hY.push(t.onTrackLoaded.subscribe((()=>this.AX())),t.onQualityChange.subscribe((t=>this.onQualityChanged(t))),t.onCurrentQuality.subscribe((t=>{this.mediator.publish(this,J.XQ.CurrentQuality,{payload:t})})))}vK(t,e){this.yK=new Si({isInApp:this.ph.config.isInApp,os:this.ph.config.os.os,sessionId:this.ph.config.sessionId},this.nK,e,this.Kr),this.yK.start(t.separateAudioStreamPath)}bK(t,e=!1){return Yi(this,void 0,void 0,(function*(){if(e)this.IK();else{if(t){if(yield this.aK())return void(this.pK=this.Jr)}this.IK()}}))}get width(){return this.nK.getBoundingClientRect().width}get height(){return this.nK.getBoundingClientRect().height}get currentTime(){return this.IX.currentTime}set currentTime(t){this.IX.currentTime=t,this.QQ&&(this.yK.currentTime=t)}forceCurrentTime(t){this.IX.currentTime=t,this.QQ&&(this.yK.currentTime=t),this.zQ=t}get duration(){return this.IX.duration}get volume(){return this.QQ?this.yK.volume:this.IX.volume}set volume(t){this.QQ?(0===this.yK.volume&&0!==t&&(this.yK.currentTime=this.IX.currentTime),this.yK.volume=t):(0,a.$K)(this.IX)&&(this.IX.volume=t)}toggleMute(){if(0===this.volume)return this.Gc=this.Gc>0?this.Gc:.2,void(this.volume=this.Gc);this.Gc=this.volume,this.volume=0}increaseVolume(t){this.volume+t>1?this.volume=1:this.volume+=t}decreaseVolume(t){this.volume-t<0?this.volume=0:this.volume-=t}get playing(){return this.IX.isPlaying}get isIosFullscreen(){return this.oY}set isIosFullscreen(t){this.oY=t,this.oY&&this.iK?this.wK():this.PK()}get currentQualitySettings(){var t;return null===(t=this.pK)||void 0===t?void 0:t.currentQualitySettings}hide(){(0,I.cn)(this.nK,kt.pT)}show(){(0,I.IV)(this.nK,kt.pT)}setSource(t,e=!1,i=!1){return Yi(this,void 0,void 0,(function*(){try{this.tK=t,this.pK&&this.pK.detachMedia();const s=(0,a.QM)(t.hlsFilePath);if(i&&!this.rK.canUseSource(t))return(0,T.nF)({message:"VideoHandler_no_mp4_fallback_source",level:T.D_.CRITICAL,sessionId:this.ph.config.sessionId}),void this.Rr.next(J.wB.Error);if(yield this.bK(s,i),t.hasSeparateAudioStream){this.QQ=!0;const e=this.IX.volume;this.IX.volume=0,this.yK?(this.yK.volume=e,t.separateAudioStreamPath!==this.yK.audioFile&&(this.yK.audioFile=t.separateAudioStreamPath)):this.vK(t,e)}else this.QQ&&(this.QQ=!1,this.IX.volume=this.yK.volume,this.yK.volume=0);return t&&t.subtitles&&this.IX.setCrossOriginAttribute(),this.Zn.setAttribute("title",t.altText),this.IX.setPoster(t),this.IX.setTrackModes(this.iK?yi.Hidden:yi.Disabled),e&&this.IX.setMetaLoaded(!1),this.pK.setSource(t,!0),void this.mediator.publish(this,J.T$.NewVideo,{payload:{videoMetadata:t}})}catch(t){return void(0,T.nF)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:T.D_.CRITICAL,sessionId:this.ph.config.sessionId},{extraLogsPercentage:5})}}))}setQuality(t){this.pK.setQuality(t)}pauseAudio(){var t;this.QQ&&(null===(t=this.yK)||void 0===t||t.pause())}pause(){this.IX.pause(),this.QQ&&this.yK.pause(),this.Rr.next(J.wB.Pause)}play(){var t;return this._K=new Ei.C,null===(t=this.pK)||void 0===t||t.attachMedia().then((()=>{this.fK()})).catch((t=>{this.Rr.next(J.wB.Error),(0,T.nF)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:T.D_.CRITICAL,sessionId:this.ph.config.sessionId},{extraLogsPercentage:5})})),this._K.promise}hasSubtitles(){return(0,o.BZ)(this.tK.subtitles)}getSubtitles(){return this.tK.subtitles}toggleCaptions(){this.pK.updateSubtitleTrackSource(this.tK.getDefaultSubtitle()),this.iK=!0,this.IX.setTrackModes(yi.Hidden)}togglePlay(){return this.playing?(this.pause(),!1):(this.play(),!0)}showCaptions(t){var e;void 0===t&&(t=null===(e=this.tK.getDefaultSubtitle())||void 0===e?void 0:e.file);const i=this.tK.subtitles.find((e=>e.file===t));this.pK.updateSubtitleTrackSource(i),this.iK=!0,this.IX.setTrackModes(yi.Hidden)}hideCaptions(){this.pK.updateSubtitleTrackSource(),this.iK=!1,this.IX.setTrackModes(yi.Disabled),this.mediator.publish(this,Be.C[Be.C.CaptionUpdate])}get areCaptionsEnabled(){return this.iK}getSelectedCaption(){return this.pK.getSelectedCaptionTrack()}destroy(){var t;this.pK.destroy(),this.nK.parentNode.removeChild(this.nK),null===(t=this.yK)||void 0===t||t.destroy(),this.IX.destroy()}sK(){if(this.nK=this.Kr.createElementByString(`<cnx class="${kt.s6.VideoWrapper}"></cnx>`),this.Zn=this.Kr.createElementByString('<video class="cnx-video-tag"></video>'),this.cj.os===xe.M.Ios&&(this.Zn.setAttribute("playsinline",""),this.Zn.setAttribute("webkit-playsinline","")),this.ph.config.isMobile)f.n.defaultVideoPosterURL=Pi.Q.getDefaultPoster(this.ph.services.UrlSuffixerService),this.Zn.poster=f.n.defaultVideoPosterURL;else{this.GQ&&(this.Zn.tabIndex=0,this.Zn.setAttribute("aria-label","Connatix video player"),this.Zn.setAttribute("role","application"));const t=this.ph.services.GlobalDomUtilsService.createElementByString("<cnx class='cnx-border'></cnx>");this.nK.appendChild(t)}if(this.cj.os===xe.M.Android&&((0,a.QM)(this.ph.config.bundleID)||(0,w.Qq)())){const t=this.Kr.createElementByString('<cnx class="cnx_gpu_fix"></cnx>');this.nK.appendChild(t)}}IK(){this.pK=this.rK,this.pK.setQuality({quality:J.ZH.Auto,height:0})}onQualityChanged(t){const e=this.IX.isPlaying;this.pK&&this.pK.isNativeVideoSrcImplementation&&(this.zQ=this.dX),e&&this.pK.onQualityChanged&&this.pK.onQualityChanged().then((()=>{this.IX.setMetaLoaded(!1),this.fK()})),this.mediator.publish(this,J.XQ.Change,{payload:t})}get currentTrack(){return this.IX.getCurrentTrack()}wK(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,Be.C[Be.C.CaptionUpdate]),this.currentTrack.mode=yi.Showing)}PK(){if(this.currentTrack){switch(this.currentTrack.mode){case yi.Showing:case yi.Hidden:this.iK=!0;break;case yi.Disabled:this.iK=!1}this.mediator.publish(this,this.iK?Be.C[Be.C.CaptionOn]:Be.C[Be.C.CaptionOff])}this.AX()}fK(){this.IX.play().then((()=>{if(this.QQ)return this.yK.play().then((()=>{this.yK.currentTime=this.IX.currentTime}))})).catch((()=>{}))}}class Qi{constructor(t,e,i,s,n,r,a){var h;if(this.be=t,this.Xi=i,this.WV=s,this.tV=n,this.Cj=r,this.KF=a,this.Oj=[],this.dj=[],this.Mj=[],this.Lj=[],this.Bj={insights:[]},this.ZV=[],this.lj=[],this.uj=e.title,this.tj=e.altText,this.pj=e.description,this.Ir=e.clickUrl,this.Oj=e.keywordList,this.Rj=e.languageId,this.dj=e.trackList,this.Dj=e.cuePoints,this.Nj=e.multimediaId,this.Fj=e.publishDate,this.Vj=e.endDate,this.jj=e.contentStudio,this.dj&&this.dj.length>0){this.dj.forEach((t=>{t.file=this.Xi.appendParamsToUrl(this.Uj(f.n.endPoints.base.video,t.file))}));const t=this.dj.findIndex((t=>t.title.indexOf("English")>-1));if(t>-1){const e=this.dj.splice(t,1);this.dj.unshift(...e)}}this.ij=e.thumbnail,this.$j=e.duration,this.Lj=e.customFields,this.ej=e.hlsFilePath,this.qj=e.sourceItemId,this.Bj.insights=null===(h=this.Cj)||void 0===h?void 0:h.insights,this.yj=e.hasSeparateAudioStream,this.vj=e.separateAudioStreamPath,(0,o.BZ)(e.renditionList)&&(this.Mj=this.Hj(e.renditionList),this.Jj(e.renditionList)),this.lj=e.chapters,this.wj=e.ctaButton,this.zj=e.altTitle}Hj(t){return t.sort(((t,e)=>t.height-e.height))}setAvailableQualities(t){this.ZV=t}Jj(t){(0,o.qy)("height",t).forEach(((t,e)=>{this.ZV.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=J.gQ})}))}Wj(t,e){return this.Mj.find((i=>i.codec===t&&i.height===e))}Uj(t,e,i=!1){let s=`${t}${this.be}/`;return(0,a.QM)(this.KF)&&(s+=`${this.KF}/`),i&&(0,a.QM)(this.Nj)&&(s+=`mmid-${this.Nj}/`),s+=e,s}Yj(t,e){const i=(0,Ne.DE)(t,this.ZV.map((t=>t.videoHeight)));return this.Wj(e,i)}get hlsFilePath(){return this.ej}get separateAudioStreamPath(){return this.vj}get hasSeparateAudioStream(){return this.yj}getAvailableQualities(){return this.ZV}getClosestSourceQuality(t){let e;const i=(0,Ne.DE)(t,this.ZV.map((t=>t.videoHeight)));return this.ZV.forEach((t=>{t.videoHeight===i&&(e=t)})),e}getSources(t,e){const i=[];return e.forEach((e=>{const s=this.Yj(t,e.id);(0,o.BZ)(i)||s&&i.push({src:this.Xi.appendParamsToUrl(this.Uj(f.n.endPoints.base.video,s.file,true)),type:e.type})})),i}getHlsSource(){return this.Uj(f.n.endPoints.base.video,this.ej,!0)}getThumbnailUrl(t,e){const i=this.Uj(f.n.endPoints.base.image,this.ij);return Pi.Q.getSmartCroppedImageUrl(i,t,e,this.Xi)}getDefaultSubtitle(){const t=this.dj.find((t=>t.title.indexOf("English")>-1));return t||this.dj[0]}get title(){return this.uj}get altText(){return(0,a.$K)(this.tj)?this.tj:""}get description(){return this.pj}get clickUrl(){return this.Ir}set clickUrl(t){this.Ir=t}get keywords(){return this.Oj}get languageId(){return this.Rj}get sourceItemId(){return this.qj}get subtitles(){return(0,o.BZ)(this.dj)?this.dj:void 0}get spriteSheet(){return this.Qj}get duration(){return this.$j}get id(){return this.be}get customFields(){return this.Lj}get insights(){return this.Bj}get cuePoints(){return this.Dj}get publishDate(){return this.Fj}get endDate(){return this.Vj}get contentStudio(){return this.jj}get sentimentAnalysis(){var t;return null===(t=this.Cj)||void 0===t?void 0:t.sentimentAnalysis}get disableAdvertising(){return this.tV}get isExternalSource(){return!1}get multimediaId(){return this.Nj}get revisionNumber(){return this.WV}get contentVersionId(){return this.KF}get chapters(){return this.lj.map((t=>Object.assign({},t)))}get ctaButton(){return this.wj}get altTitle(){return this.zj}}class Ki extends Qi{constructor(t,e){super(null,t,e,null,null),this.Xi=e}getSources(t,e){return e.map((({id:e,type:i})=>{const s=this.Yj(t,e);if(s)return{type:i,src:this.Xi.appendParamsToUrl(`${s.file}`)}})).filter((t=>t))}getThumbnailUrl(t,e){return Pi.Q.getSmartCroppedImageUrl(this.ij,t,e,this.Xi)}}class Zi extends Ti{constructor(t,e,s,n=0,r={}){super(t,e,s.services.GlobalDomUtilsService,s.services.ResizeObserver,s.services.UrlSuffixerService),this.ph=s,this.fX=n,this.cj=r,this.D5=.1,this.type=i.ProtoMediaTypeEnum.Video,this.N5={[Y.Landscape]:{renditionList:[],videoSourceMeta:void 0},[Y.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.F5=null,this.getClosestSourceQuality=t=>(this.V5||this.j5(),this.N5[this.V5].videoSourceMeta.getClosestSourceQuality(t)),this.U5(),this.q5()}U5(){this.YV.videoRendition.renditions.forEach((({codec:t,height:e,width:i,videoUrl:s})=>{const n={codec:x.ProtoPlayspaceCodecEnum[t],height:e,file:s};e<i?this.N5[Y.Landscape].renditionList.push(n):this.N5[Y.Portrait].renditionList.push(n)}));const t=this.N5[Y.Landscape].renditionList,e=this.N5[Y.Portrait].renditionList;(0,o.BZ)(t)||(0,o.BZ)(e)?((0,o.BZ)(t)||(this.N5[Y.Landscape].renditionList=e),(0,o.BZ)(e)||(this.N5[Y.Portrait].renditionList=t)):(0,T.nF)({message:"SlideVideo_no_renditions",level:T.D_.CRITICAL,sessionId:this.ph.config.sessionId})}q5(){Object.keys(this.N5).forEach((t=>{const e=this.N5[t];e.videoSourceMeta=new Ki({title:this.YV.title,altText:this.YV.altText,clickUrl:this.YV.clickUrl,renditionList:e.renditionList,thumbnail:this.YV.imageUrl,customFields:[],chapters:[]},this.Xi)}))}SZ(t){this.SK=new Xi(this,this.ph,this.Kr,t,this.OQ,this.fX,this.cj,!1,this.D5)}H5(){this.subscribe(J.XQ.Change,this.SK,(({payload:t})=>{const e=this.getClosestSourceQuality(t);this.mediator.publish(this,J.XQ.Change,{payload:e.videoHeight})}))}j5(){const{clientHeight:t,clientWidth:e}=this.f5;this.V5=t<e?Y.Landscape:Y.Portrait}QK(t){let e;this.SK&&(t&&(e=this.SK.currentTime),this.SK.setSource(this.N5[this.V5].videoSourceMeta,!0).then((()=>{t&&this.SK.forceCurrentTime(e),this.SK.playing&&this.G5()})))}PW(){return'<cnx class="cnx-ui-ps-video-container"></cnx>'}G5(){this.SK.play().catch((()=>{}))}play(){this.isLoaded&&this.G5()}pause(){this.isLoaded&&this.SK.pause()}reset(){this.p5&&(this.SK.currentTime=this.D5)}load(t){this.isLoaded||(t.appendChild(this.f5),this.isLoaded=!0,this.SZ(this.f5),this.H5(),this.SK.start(),this.j5(),this.QK(),this.F5&&this.setQuality(this.F5),this.pause())}getAvailableQualities(){return this.N5[this.V5].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this.SK.currentQualitySettings}get volume(){return this.isLoaded?this.SK.volume:this.fX}set volume(t){this.isLoaded?this.SK.volume=t:this.fX=t}setQuality(t){this.SK?this.SK.setQuality(t):this.F5=t}onSlideResizeCallback(){const t=this.V5;this.Kr.cancelRequestAnimationFrame(this.z5),this.z5=this.Kr.requestAnimationFrameHelper((()=>{if(this.j5(),t!==this.V5){const t=!0;this.QK(t)}}))}destroy(){super.destroy(),this.SK&&(this.SK.destroy(),this.unsubscribeAll(this.SK)),this.Kr.cancelRequestAnimationFrame(this.z5)}}var ts=h(2300);class es{constructor(t){this.W5=t}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.Y5()}\n            </cnx>\n        </cnx>\n        `.trim()}Y5(){return this.W5.disableCTARendering?"":`[[${ts.r.CtaButton}]]`}}var is=h(2823),ss=h(4291);class ns extends ss.d{enterState(){super.enterState();const t=this.Ic.getComponent(ts.r.PlayspaceProgressBar);t&&t.pauseProgress();const e=this.Ic.getComponent(ts.r.CtaButton);e&&e.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class rs extends ns{enterState(){super.enterState()}exitState(){super.exitState()}}var os=h(2246);class as extends os.tt{enterState(){super.enterState();const t=this.Ic.getComponent(ts.r.PlayspaceProgressBar);t&&t.startProgress();const e=this.Ic.getComponent(ts.r.CtaButton);e&&e.startProgress()}exitState(){super.exitState()}updateDuration(){const t=this.Ic.getComponent(ts.r.PlayspaceProgressBar);t&&t.startProgress()}}class hs extends ns{enterState(){super.enterState()}exitState(){super.exitState()}}class cs extends ns{enterState(){super.enterState()}exitState(){super.exitState()}}var ds=h(1277),ls=h(9391),us=h(3537);var ps=h(6019);class fs extends ps.Y{constructor(){super(...arguments),this.eventList=[Be.C[Be.C.Play]]}onClickHandler(){this.mediator.publish(this,Be.C[Be.C.Play])}}const ms="cnx-cta-btn-timer-label",gs="cnx-svg-circle-stroke",vs="cnx-cta-btn-text",ys="cnx-cta-btn-content",bs="cnx-cta-align-with-content";class Is extends ps.Y{constructor(t,e,i,s,n,r,o){super(t,e,i,n.template,r),this.TO=s,this.X5=n,this.Q5=o,this.eventList=[K.CallToAction,pi.Z[pi.Z.Scroll]],this.K5=!1,this.Z5=!1,this.V6=!1,this.rv=()=>{this.J6()},this.yk=()=>{const t=Math.round(this.Js.timeRemaining/ct.s_);this.z6(t.toString())},this.W6=this.jo.querySelector(".cnx-ui-ps-cta")}startProgress(){this.K5=!0,this.Js&&(this.Js.start(),this.yk())}pauseProgress(){this.K5=!1,this.Js&&(this.Js.stop(),this.yk())}changeLabel(t){(0,a.QM)(t)&&(this.JE.innerHTML=t.substring(0,16))}initComponent(){super.initComponent(),this.JE=this.jo.querySelector(`.${vs}`),this.d4=this.jo.querySelector(`.${ys}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){if(!(0,o.BZ)(t))return;const e=t.find((({type:t})=>t===ci.CtaButton));if(!e||!e.metadata)return;const{url:i,label:s,duration:n,ctaAlignToContent:r,ctaAlignToFooter:h,title:c}=e.metadata;this.Z5=h,this.Y6(i,c),this.changeLabel(s);const d=(0,a.r)(n);this.X6(d),this.Q6(d,n),this.K6(r),this.Z6()}setFooterElement(t){this.t9=t,this.Z6()}handleCapabilities(t){this.onSlideTransitionStart(t)}hideComponent(){super.hideComponent(),this.e9()}K6(t){t?(0,I.cn)(this.W6,bs):(0,I.IV)(this.W6,bs)}onClickHandler(){const t={payload:null};(0,a.QM)(this.qf)&&(t.payload=this.qf),this.mediator.publish(this,K.CallToAction,t)}Z6(){this.V6||this.t9&&this.Z5&&(this.TO.on(this.t9,this.rv),this.V6=!0)}J6(){if(!this.t9)return void(0,I.aQ)(this.jo,"bottom");const t=(this.t9.clientHeight-this.jo.clientHeight)/2*-1;(0,I.T7)(this.jo,{bottom:`${t}px`})}X6(t){t?this.i9||this.s9():this.r9()}s9(){this.i9=this.Re.createElementByString(this.X5.getTimerTemplate()),(0,I.Vt)(this.d4,this.i9),this.o9(this.i9)}o9(t){this.a9=t.querySelector(`.${ms}`),this.h9=t.querySelector(`.${gs}`)}r9(){(0,I.bX)(this.i9),this.i9=null,this.a9=null,this.h9=null}Q6(t,e){t?(this.c9(),this.Js.reset(e*ct.s_),this.z6(e.toString()),this.K5&&this.Js.start(),this.l9(),(0,I.T7)(this.h9,{"animation-duration":`${e}s`})):this.e9()}c9(){if(this.Js)return;const t=C.h.getGlobalContainer().resolve(re.f);this.Js=new oe.B(t),this.u9=this.Js.onTimeUpdate.subscribe(this.yk)}e9(){this.Js&&(this.u9.unsubscribe(),this.Js.disable(),this.Js=null)}l9(){(0,I.L_)(this.h9,gs,gs,!0)}z6(t){this.a9&&(0,a.QM)(t)&&(this.a9.innerText=t)}Y6(t,e){if(this.qf=t,t&&(this.W6.title=e,!this.Q5)){this.W6.href=t;const e=this.Re.isURLSameDomainToTop(t);this.W6.target=e?ki.bS.Top:ki.bS.Blank,this.W6.rel="nofollow"}}}const ws='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"/></g></svg>\n';class Ps{get template(){return'\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"/></svg>\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"/></svg>\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        '.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${ws}\n                    ${ws}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${ms}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}var Ts=h(7263),_s=h(9901);class Ss extends _s.N{constructor(){super(...arguments),this.p9=100,this.eventList=[pi.Z[pi.Z.Scroll]],this.isEndState=!1,this.IW=()=>{this.mediator.publish(this,K.ProgressBarItemClicked,{payload:this.jo})},this.f9=t=>{t.stopPropagation()}}m9(){const t=this.Re.getComputedTranslateX(this.vE),e=this.lE;return(0,Ne.dQ)(0,e,0,100,t)}g9(t){(0,I.T7)(this.vE,{transition:`transform ${t}ms linear`})}v9(){(0,I.T7)(this.vE,{transition:"none"})}startProgress(t){this.g9(t),this.vE.style.left=null,this.setProgress(this.p9)}pauseProgress(){this.setProgress(this.m9()),this.v9()}forceEndState(){this.v9(),super.forceEndState(),this.vE.style.left="0",this.vE.style.transform=null,this.isEndState=!0}forceStartState(){this.v9(),super.forceStartState(),this.vE.style.left=null,this.vE.style.transform=null,this.isEndState=!1}initComponent(){super.initComponent();const t={click:this.IW,interactionstart:this.f9};this.gc.register(this.jo,this,this.gc,t),this.tT&&(this.subscribe(pi.Z[pi.Z.Click],this.gc,(()=>{this.IW()})),this.relay(pi.Z[pi.Z.Scroll],this.gc,this,this.mediator))}destroy(){super.destroy()}onResize(t,e){this.setProgress(this.m9()),this.v9(),e&&(this.setProgress(this.p9),this.g9(t))}}class As extends Ts.P{constructor(){super(...arguments),this.eventList=[K.ProgressBarItemClicked,pi.Z[pi.Z.Scroll]],this.y9=[],this.b9=({payload:t})=>{const e=(0,I.oG)(t,this.jo);this.mediator.publish(this,K.ProgressBarItemClicked,{payload:e})}}I9(t){const e=this.y9[t];e.forceStartState(),e.startProgress(this.$j)}startProgress(){if((0,a.$K)(this.w9)){for(let t=0;t<this.y9.length;t++)t<this.w9?this.y9[t].forceEndState():(t!==this.w9||this.y9[t].isEndState)&&this.y9[t].forceStartState();this.y9[this.w9].startProgress(this.$j)}}pauseProgress(){this.y9[this.w9]&&this.y9[this.w9].pauseProgress()}resetProgress(){(0,a.$K)(this.w9)&&this.y9.forEach((t=>t.forceStartState()))}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let e=0;e<t;e++){const t=new Ss(this,this.Re,this.gc,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-hitarea"></cnx></cnx>',this.tT);this.subscribe(K.ProgressBarItemClicked,t,this.b9),this.relay(pi.Z[pi.Z.Scroll],t,this,this.mediator),this.y9.push(t),t.initComponent(),this.jo.appendChild(t.getContainer())}}setDuration(t){this.$j=t}setCurrentIndex(t){t===this.w9&&this.I9(t),this.w9=t}initComponent(){}destroy(){super.destroy(),this.y9.forEach((t=>t.destroy()))}resizeProgressBar(t,e){this.y9.forEach(((i,s)=>{s<this.w9&&i.forceEndState(),s===this.w9&&i.onResize(t,e)}))}}var xs=h(9479);var ks,Es=h(3409);!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(ks||(ks={}));var Cs=h(7405);class Os extends Ts.P{constructor(t,e,i,s,n,r,o,a){super(t,e,i,s,a),this.eventName=n,this.q1=r,this.FY=o,this.W1=[],this.eventList=[Be.C[Be.C.RebindComponent],pi.Z[pi.Z.HoldStart],pi.Z[pi.Z.HoldEnd],Be.C[Be.C.ContextMenuOpen],Be.C[Be.C.ContextMenuClose]],this.u0=!1,this.d0=10,this.p0=t=>{this.$0.removeChild(t.target),this.$0.style.width=`${this.jo.clientWidth}px`},this.close=t=>{t&&(0,w.Of)(t.target,kt.s6.ContextController,this.d0)||!1!==this.isOpen&&(this.u0&&(this.mediator.publish(this,pi.Z[pi.Z.HoldEnd]),(0,I.IV)(this.FY,kt.Gj.OnHold),this.u0=!1),this.isOpen=!1,this.mediator.publish(this,Be.C[Be.C.ContextMenuClose],{payload:this.w0}),(0,I.cn)(this.jo,kt.Gj.Invisible),this.gc.removeGlobalActions(this.jo),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.$0=this.jo.getElementsByClassName(kt.Ng.Container)[0],this.S0=this.Re.createElementByString(`<cnx class="${kt.Ng.Items}" role="group"></cnx>`),this.$0.appendChild(this.S0),(0,I.cn)(this.$0,kt.s6.ContextController)}addNewItemsEvent(t){const e=t.filter((t=>!(0,o.d3)(t,this.eventList)));e.length>0&&(this.eventList=[...this.eventList,...e],this.mediator.publish(this,Be.C[Be.C.RebindComponent],{payload:this.q1}))}cacheCoordinates(){this.Ex=this.Re.getElementCoordinates(this.FY)}positionContextMenu(t){this.cacheCoordinates(),(0,Cs.p)(this.jo,t,this.Ex,{alignMiddle:this.T0,alignTop:this.N0,forceRight:this.q0})}n2(t){switch(t.type){case ks.SimpleMenuItem:this.close();break;case ks.SubmenuMenuItem:this.b2(t)}}z2(t,e){this.mediator.publish(this,t,e)}b2(t){const e=this.jo.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.p0),this.S0.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.p0),this.$0.style.width=2*e+"px",this.$0.appendChild(t.$menuContainer),(0,I.Tp)(this.$0),this.S0.style.left=-e+"px",t.$menuContainer.style.left=-e+"px",this._T()),t.isOpen=!t.isOpen}_T(){const t=new Event("cnx-menu-opened");this.FY.dispatchEvent(t)}closeAllSubmenuItems(){this.W1.forEach((t=>{t.type===ks.SubmenuMenuItem&&t.isOpen&&this.b2(t)}))}buildContextMenu(t){let e=[];this.S0.innerHTML="",this.jo.clientWidth>0&&(this.$0.style.width=`${this.jo.clientWidth}px`),this.W1.forEach((t=>this.unsubscribeAll(t))),this.W1=t,this.W1.forEach((t=>{e=[...e,...t.eventList],t.eventList.forEach((e=>this.subscribe(e,t,(i=>{this.n2(t),this.z2(e,i)})))),t.isInitialized||t.initComponent(),this.S0.appendChild(t.getContainer())})),this.addNewItemsEvent(e)}getAnchorCoordinatesTo(t){return null==t?void 0:t.getCoordinates()}open(t,e=!1,i){this.w0=i,e&&(this.u0=e,this.mediator.publish(this,pi.Z[pi.Z.HoldStart]),(0,I.cn)(this.FY,kt.Gj.OnHold)),this.isOpen=!0,this.mediator.publish(this,Be.C[Be.C.ContextMenuOpen],{payload:i}),this.positionContextMenu(t);const s={interactionend:this.close};this.gc.addGlobalActions(this.jo,s),(0,I.IV)(this.jo,kt.Gj.Invisible),this._T()}get $menuContainer(){return this.$0}}class Ls extends ps.Y{static getTemplate(t){const e=`<cnx class="${kt.Ng.ItemIcon}">${t.icon}</cnx>`,i=`<cnx class="${kt.Ng.ItemExtra}">${t.label}</cnx>`;return`<cnx tabindex="0" role="${t.isTitleOption?"presentation":"button"}" aria-label="${t.name}" class="${kt.Ng.ClickOption} ${t.isTitleOption?"cnx-submenu-title-option":""}">\n                    ${t.icon?e:""}\n                    <cnx class="${kt.Ng.ItemTitle}">${t.name}</cnx>\n                    ${t.label?i:""}\n                </cnx>`}constructor(t,e,i,s,n){super(t,e,i,Ls.getTemplate(n),s),this.xW=!1,this.type=ks.SimpleMenuItem,this.eventList=[],this.event=n.activeEvent,this.name=n.name,n.eventList?this.eventList=n.eventList:this.eventList.push(this.event),this.V2=this.jo.getElementsByClassName(kt.Ng.ItemTitle)[0],this.F2=this.jo.getElementsByClassName(kt.Ng.ItemIcon)[0]}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.V2.innerHTML=t}changeItemIcon(t){this.F2.innerHTML=t}get isActive(){return this.xW}set isActive(t){this.xW=t,this.xW?((0,I.cn)(this.jo,kt.Gj.Active,kt.iu.AccentColor),this.jo.setAttribute("aria-current","true")):((0,I.IV)(this.jo,kt.Gj.Active,kt.iu.AccentColor),this.jo.removeAttribute("aria-current"))}}const Ms='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"/></svg>\n';var Rs;!function(t){t.MainContainer="cnx-scrollbar",t.Wrapper="cnx-scrollbar-wrapper",t.Content="cnx-scrollbar-content",t.Horizontal="cnx-scrollbar-horizontal",t.Handle="cnx-scrollbar-handle",t.PreventSelect="cnx-scrollbar-prevent-select",t.ShowOnHover="cnx-scrollbar-show-on-hover"}(Rs||(Rs={}));class Bs{constructor(t,e={}){if(this.hT=t,this.Qs=e,this.cT=0,this.dT=t=>{t.preventDefault(),this.lT=t.pageY,this.uT=t.pageX,(0,I.cn)(this.fT,Rs.PreventSelect),(0,I.cn)(this.Ua.document.body,Rs.PreventSelect),this.Ua.document.addEventListener("mousemove",this.mT),this.Ua.document.addEventListener("mouseup",this.gT)},this.mT=t=>{const e=this.Qs.horizontal?t.pageX-this.uT:t.pageY-this.lT;this.lT=t.pageY,this.uT=t.pageX,(0,I.PM)(this.Ua,(()=>{this.Qs.horizontal?this.vT.scrollLeft+=e/this.yT:this.vT.scrollTop+=e/this.yT}))},this.gT=t=>{(0,I.IV)(this.fT,Rs.PreventSelect),(0,I.IV)(this.Ua.document.body,Rs.PreventSelect),this.Ua.document.removeEventListener("mousemove",this.mT),this.Ua.document.removeEventListener("mouseup",this.gT)},this.bT=t=>{if(!this.Qs.horizontal)return;const e=t.deltaMode?100*(t.deltaY<0?-1:1):t.deltaY,i=Math.floor(e)/33*20,s=this.cT+i;s>=-1*this.fT.clientWidth&&s<=this.vT.scrollWidth-this.fT.clientWidth&&(this.cT=s),(0,I.PM)(this.Ua,(()=>this.vT.scrollLeft=this.cT))},this.IT=()=>{clearTimeout(this.wT),this.wT=setTimeout((()=>{this.PT()}),50)},this.PT=()=>{const t=this.Qs.horizontal?this.vT.scrollWidth:this.vT.scrollHeight,e=this.Qs.horizontal?this.hT.clientWidth:this.hT.clientHeight;this.yT=e/t;const i=-1*(this.hT.clientWidth-(this.fT.clientWidth||4)-4),s=this.hT.clientHeight-this.fT.clientHeight-4;(0,I.PM)(this.Ua,(()=>{if(this.yT>=1)(0,I.MV)(this.fT);else{if((0,I.Ho)(this.fT),this.Qs.horizontal)return void(0,I.T7)(this.fT,{width:`${Math.max(100*this.yT,10)}%`,height:"",top:`${s}px`,right:"",left:this.vT.scrollLeft/t*100+"%"});(0,I.T7)(this.fT,{width:"",height:`${Math.max(100*this.yT,10)}%`,top:this.vT.scrollTop/t*100+"%",right:`${i}px`,left:""}),this._T()}}))},this.Ua=(0,I.LT)(t),!this.Ua)throw new Error("window was not found");this.TT(),this.fT.addEventListener("mousedown",this.dT),this.Qs.overrideNativeHorizontalScroll&&this.vT.addEventListener("wheel",this.bT,{passive:!0}),this.Ua.addEventListener("resize",this.IT),this.vT.addEventListener("scroll",this.PT),this.vT.addEventListener("mouseenter",this.PT),(0,I.cn)(this.hT,Rs.MainContainer,this.Qs.horizontal?Rs.Horizontal:void 0,this.Qs.showOnHover?Rs.ShowOnHover:void 0),this.PT();const i=(0,I.Dx)(this.hT,this.Ua);"0px"===i.height&&"0px"!==i.maxHeight&&(0,I.T7)(this.hT,{height:i.maxHeight})}TT(){for(this.fT=(0,I.G$)(`<cnx class="${Rs.Handle}">`,this.Ua),this.ST=(0,I.G$)(`<cnx class="${Rs.Wrapper}">`,this.Ua),this.vT=(0,I.G$)(`<cnx class="${Rs.Content}">`,this.Ua),this.ST.appendChild(this.vT);this.hT.firstChild;)this.vT.appendChild(this.hT.firstChild);this.hT.appendChild(this.ST),this.hT.insertAdjacentElement("beforeend",this.fT)}_T(){const t=new Event("cnx-mod-scrollbar");this.hT.dispatchEvent(t)}destroy(){for(this.removeListeners(),(0,I.bX)(this.fT);this.vT.firstChild;)this.hT.appendChild(this.vT.firstChild);(0,I.bX)(this.ST),(0,I.IV)(this.hT,Rs.MainContainer,Rs.Horizontal,Rs.ShowOnHover)}removeListeners(){this.Ua.document.removeEventListener("mousemove",this.mT),this.Ua.document.removeEventListener("mouseup",this.gT),this.fT.removeEventListener("mousedown",this.dT),this.vT.removeEventListener("wheel",this.bT),this.Ua.removeEventListener("resize",this.IT),this.vT.removeEventListener("scroll",this.PT),this.vT.removeEventListener("mouseenter",this.PT)}}class Ds extends ps.Y{static getTemplate(t){const e=`<cnx class="${kt.Ng.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${kt.Ng.SubmenuOption} ${kt.Ng.ClickOption}" tabindex="0" role="button" aria-label="${t.name}" aria-controls=cnx-submenu-${t.event}>\n                    ${t.icon?e:""}\n                    <cnx class="${kt.Ng.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${kt.Ng.ItemExtra} ${kt.iu.AccentColor}">${t.label?t.label:""}${Ms}</cnx>\n                </cnx>`}constructor(t,e,i,s,n,r,o){super(t,e,i,Ds.getTemplate(n),s),this.HA=r,this.l4=o,this.W1=[],this.xW=!1,this.type=ks.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.x4=n.event,this.eventList.push(this.x4),this.u4=new Ls(this,e,i,s,{activeEvent:n.event,name:n.name.toUpperCase(),icon:"",isTitleOption:!0}),this.$menuContainer=this.Re.createElementByString(`<cnx class="${kt.Ng.Items}" role="group" data-id=cnx-submenu-${n.event} ></cnx>`),this.d4=this.jo.getElementsByClassName(kt.Ng.ItemExtra)[0]}onClickHandler(t){this.mediator.publish(this,this.x4)}n2(t){this.mediator.publish(this,this.x4,{payload:t===this.x4?void 0:t})}buildContextMenu(t){this.$menuContainer.innerHTML="",this.W1.forEach((t=>this.unsubscribeAll(t))),this.W1=[this.u4,...t],this.W1.forEach((t=>{t.eventList.forEach((e=>this.subscribe(e,t,(()=>this.n2(e))))),t.isInitialized||t.initComponent(),this.$menuContainer.appendChild(t.getContainer())}))}changeLabel(t){this.d4.innerHTML=`${t}${Ms}`}get isActive(){return this.xW}set isActive(t){this.xW=t,this.xW?(0,I.cn)(this.jo,kt.Gj.Active):(0,I.IV)(this.jo,kt.Gj.Active)}makeFullHeight(t){if(!this.HA||!this.l4)return;const e=this.HA.clientHeight,i=this.l4.offsetTop;if(t.clientHeight>=e-i&&t.clientHeight<=e)this.l4.style.top="1px";else if(t.clientHeight>e-i){if(this.l4.style.top="1px",(0,I.T7)(t,{height:`${e}px`,bottom:"10px"}),this.NW)return;this.NW=new Bs(t,{horizontal:!1}),(0,I.cn)(t,kt.Gj.HasCustomScrollbar)}}resetScrollbar(){var t;null===(t=this.NW)||void 0===t||t.removeListeners(),this.NW=null}}function Ns(t,e,i){const s=i?J.ZH[J.ZH.Auto]:e.height.toString();t.forEach((t=>t.name.includes(s)?t.isActive=!0:t.isActive=!1));const n=t.find((t=>J.ZH[t.event]===J.ZH.Auto));if(i){const i=t.find((t=>t.event===e.height.toString()));if(i){const t=`${n.name} (${i.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class Fs extends Ds{constructor(t,e,i,s,n,r,o,a){super(t,e,i,s,{event:Be.C[Be.C.Quality],name:n,icon:'<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable" tabindex="0"\n    aria-label="Settings" role="button" aria-expanded="false" aria-haspopup="true" aria-controls="cnx-quality-menu">\n    <cnx class="cnx-btn-container">\n        <cnx class="cnx-settings-icon">\n        <svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg>\n\n        </cnx>\n        <cnx class="cnx-hd-flag">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 11"><g fill="none"><rect class="cnx-color-accent" width="17" height="11" rx="2" fill="#09F"/><path class="cnx-color-icon" d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg>\n\n        </cnx>\n    </cnx>\n</cnx>',options:[]},o,a),this.mediator=t,this.resizeObserver=r,this.m4={height:360,quality:J.ZH.Auto},this.g4=!0}n2(t){if(t===Be.C[Be.C.Quality])return;this.g4=t===J.ZH[J.ZH.Auto];const e={height:this.g4?this.m4.height:parseInt(t,10),quality:this.g4?J.ZH.Auto:J.ZH.Strict};this.mediator.publish(this,this.x4,{payload:e})}v4(){let t=null;if(this.g4)t=J.ZH[J.ZH.Auto];else{const e=this.b4.find((t=>t.event===this.m4.height.toString()));e&&(t=e.name)}t&&this.changeLabel(t),this.resizeObserver&&(this.resizeObserver.off(this.$menuContainer,(t=>this.r4(t))),this.resizeObserver.on(this.$menuContainer,(t=>this.r4(t))))}updateQuality(t,e=!1){(0,o.BZ)(this.ZV)&&(this.g4=t.quality===J.ZH.Auto,this.m4.quality=t.quality,this.m4.height=(0,Ne.DE)(t.height,this.ZV.map((t=>t.videoHeight))),this.v4(),Ns(this.b4,this.m4,this.g4),this.isActive=e)}updateAvailableQualities(t){this.b4=[],this.ZV=t,this.b4=this.ZV.map((t=>new Ls(this,this.Re,this.gc,this.tT,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))),this.b4.push(new Ls(this,this.Re,this.gc,this.tT,{name:J.ZH[J.ZH.Auto],activeEvent:J.ZH[J.ZH.Auto]})),this.v4(),Ns(this.b4,this.m4,this.g4),this.buildContextMenu(this.b4)}r4(t){this.makeFullHeight(t)}}const $s="About Connatix",Vs="Video Settings",js="Full Screen";class Us extends Os{constructor(){super(...arguments),this.T0=!1,this.N0=!1,this.q0=!1}initComponent(){this._9=new Ls(this,this.Re,this.gc,this.tT,{activeEvent:Be.C[Be.C.Expand],eventList:[Be.C[Be.C.Expand],Be.C[Be.C.Collapse]],icon:Es,name:js}),this.S9=new Fs(this,this.Re,this.gc,this.tT,Vs),this.S9.getContainer().classList.add("cnx-hide-pinned"),this.buildContextMenu([this.S9,this._9,new Ls(this,this.Re,this.gc,this.tT,{activeEvent:Be.C[Be.C.AboutClick],name:$s,icon:'<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"/><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"/></svg>\n',label:S.g.version?`V${S.g.version}`:"dev"})])}setExpand(){this._9.event=Be.C[Be.C.Collapse],this._9.changeItemIcon(xs)}setCollapse(){this._9.event=Be.C[Be.C.Expand],this._9.changeItemIcon(Es)}showExpandButton(){this._9.showComponent()}hideExpandButton(){this._9.hideComponent()}updateQualityMenu(t){(0,o.BZ)(t)?(this.S9.updateAvailableQualities(t),this.S9.showComponent()):this.S9.hideComponent()}updateQuality(t,e=!1){this.S9.updateQuality(t,e)}}class qs{constructor(t,e=0,i=true){if(this.A9=t,this.x9=i,!(0,o.BZ)(this.A9))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(e)}setCurrentItem(t){this.k9=this.A9[t]}get currentItem(){return this.k9}goToNextItem(){this.E9().nextIndex===this.E9().firstIndex&&this.x9?this.setCurrentItem(this.E9().firstIndex):this.setCurrentItem(this.E9().nextIndex)}get listLength(){return this.A9.length}get previousItem(){return this.A9[this.E9().prevIndex]}get currentItemIndex(){return this.E9().currentIndex}E9(t=this.A9.indexOf(this.k9)){return(0,Oe.QX)(this.A9,t)}}var Hs,Js,Gs;!function(t){t.Wrapper="cnx-ui-ps__wrapper",t.Container="cnx-ui-ps__container",t.Placeholder="cnx-ui-ps__placeholder",t.Text="cnx-ui__span--text",t.Label="cnx-ui__span--label",t.Title="cnx-ui__span--title",t.VerticalLine="cnx-ui-ps__vertical-line",t.Instagram="cnx-ui-ps__slide--instagram",t.Cover="cnx-ui-ps__slide--cover",t.HighlightInner="cnx-top-title-highlight-text-inner-container",t.HighlightText="cnx-ui-ps-highlight-text"}(Hs||(Hs={})),function(t){t.Default="cnx-ui-ps__sliding--default",t.Basic="cnx-ui-ps__sliding--basic",t.Cover="cnx-ui-ps__sliding--cover",t.Pinned="cnx-ui-ps__sliding--pinned",t.SlideIn="cnx-title-slide-in",t.SlideOut="cnx-title-slide-out"}(Js||(Js={})),function(t){t.Cover="cnx-ui-ps__title--cover",t.Quote="cnx-ui-ps__title--quote",t.Bullet="cnx-ui-ps__title--bullet",t.Default="cnx-ui-ps__title--default",t.Description="cnx-ui-ps__title--description",t.Instagram="cnx-ui-ps__title--instagram",t.Pinned="cnx-ui-ps__title--pinned"}(Gs||(Gs={}));const zs="em";class Ws{constructor(t){this.C9=t}getChunks(t){return(0,_.k0)(t)?this.O9(t):this.L9(t)}L9(t){const e=[];let i="";for(let s=0;s<t.length;s++)i+=t[s],this.M9(t[s])&&(e.push(i),i="");return i.length>0&&e.push(i),e}O9(t){try{const e=document.createElement("cnx");e.innerHTML=t;const i=[];return(0,o.Sz)(e.childNodes).forEach((t=>{t.outerHTML?i.push(t.outerHTML):i.push(...this.L9(t.nodeValue))})),i}catch(e){return(0,T.nF)({message:"TextChunker_splitHtmlStringIntoWords",exception:e.message,level:T.D_.INFO,callStack:e.stack},{throttle:1,shouldSendMaxLog:!1}),[t]}}M9(t){return this.C9.some((e=>e(t)))}}const Ys="cnx-aux",Xs="cnx-aux-container",Qs="cnx-ui-lines";class Ks{constructor(t){this.Re=t,this.R9=new Ws([t=>/\s/.test(t)])}B9(t,e){const{maxLineWidth:i,maxLines:s,minLines:n}=e,r=[...t],o=[],h=t.map((t=>t.innerHTML)).some((t=>(0,_.Ft)(t)));if(!r.length||!(0,a.r)(i))return o;let c=0,d=-1,l=0;for(;r.length>0;){if(c=0,d++,o[d]=[],l++,l>=250){(0,T.nF)({message:"Split text base line wrap infinite loop",level:T.D_.INFO},{throttle:1,shouldSendMaxLog:!1});break}for(;r[0]&&c+r[0].width<=i;)if(c+=r[0].width,o[d].push(r.shift()),l++,l>=250){(0,T.nF)({message:"Split text base line wrap infinite loop",level:T.D_.INFO},{throttle:1,shouldSendMaxLog:!1});break}if(r[0]&&o.length>=s){o[d].push(...r);break}if(1===r.length&&r[0].width>i){o[d].push(...r);break}}return o.length<n&&o[0].length>4&&(o[1]=o[0].splice(-2,2)),!h&&o[d].length<2&&o.length>1&&o[d].unshift(o[d-1].pop()),o}D9(t){return t.map((t=>({innerHTML:t.nodeName.toLowerCase()===Ys?t.innerHTML:t.outerHTML,width:t.getBoundingClientRect().width,height:t.getBoundingClientRect().height})))}getWordsHtml(t){if(!(0,a.QM)(t))return"";return this.R9.getChunks(t.trim()).map((t=>`<${Ys}>${t.cnx_replaceAll("&#x2011;","-")}</${Ys}>`)).join("")}N9(t,e){const i=t.querySelectorAll(e),s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width;(0,o.Sz)(i).forEach((t=>{const e=(0,o.Sz)(t.querySelectorAll(Ys)),i=t.parentElement;if(!e.length||t.nodeType!==Node.ELEMENT_NODE)return;const n=this.Re.getComputedStyle(t),r=parseInt(this.Re.getComputedStyle(t,"before").getPropertyValue("width"),10),h=parseInt(n.getPropertyValue("--max-title-lines"),10),c=parseInt(n.getPropertyValue("--min-title-lines"),10),d=parseInt(n.getPropertyValue("font-size"),10),l={maxLineWidth:r||t.getBoundingClientRect().width-20,maxLines:h||15,minLines:c||1},u=this.D9(e),p=this.B9(u,l),f=this.Re.createElementByString(`<cnx class='${Qs}'></cnx>`);f.dataset.split=s.toString(),f.dataset.split+=","+d,p.forEach((e=>{const i=t.cloneNode();(0,I.IV)(i,Xs);const s=e.filter((t=>(0,a.as)(t))).map((t=>t.innerHTML));i.innerHTML+=s.join("").trim(),f.dataset.split+=","+e.length,(0,I.jG)(i,f)})),this.F9(f).lines!==this.F9(i).lines?t.classList.contains(Xs)?this.Re.requestAnimationFrameHelper((()=>{null!==i.parentNode&&(0,I.BE)(i,f),(0,I.bX)(i)})):this.Re.requestAnimationFrameHelper((()=>{null!==t.parentNode&&(0,I.BE)(t,f),(0,I.bX)(t)})):(0,I.bX)(t)}))}brakeLongLines(t,e){const i=t.querySelectorAll(e);if(!i.length)return;const s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width,n=this.F9(i[0].parentElement);if(isNaN(n.width))return void this.N9(t,e);if(n.width&&0===Math.abs(n.width-s))return;const r=t.querySelectorAll(`.${Qs}[data-split]`);(0,o.Sz)(r).forEach((t=>{const i=t.querySelectorAll(e),s=i[0].cloneNode(!1),n=(0,o.Sz)(i).map((t=>t.innerHTML)).join("");s.innerHTML=this.getWordsHtml(n),(0,I.cn)(s,Xs),t.prepend(s)})),this.N9(t,e)}F9(t){const e=t.dataset.split?t.dataset.split.split(","):[],i=e.shift();return{width:parseInt(i,10),lines:e.join("")}}}class Zs extends ps.Y{get $templateFragment(){return this.V9}constructor(t,e,i,s,n,r){super(t,e,i,r.template,n),this.TO=s,this.H1=r,this.splitTextSelector=`.${Hs.Text}`,this.rv=()=>{this.Re.requestAnimationFrameHelper((()=>{this.j9.brakeLongLines(this.jo,this.splitTextSelector)}))},this.V9=e.createDocumentFragment(),this.j9=new Ks(e)}U9(t,e){const i=this.H1.titleTemplate(t,e);return this.Re.createElementByString(i)}q9(t,e){const i=this.H1.labelTemplate(t,e);return this.Re.createElementByString(i)}Q1(t,e){const i=this.H1.textTemplate(t,e);return this.Re.createElementByString(i)}H9(){const t=this.H1.placeholderTemplate();return this.Re.createElementByString(t)}J6(){}J9(){this.resetAnimation(),(0,I.cn)(this.jo,Js.SlideIn)}G9(){this.resetAnimation(),(0,I.cn)(this.jo,Js.SlideOut)}onSlideTransitionStart(t){const e=t[0];this.z9(e.metadata),this.resetAnimation(),this.render()}onSlideTransitionEnd(){this.J9()}onSlideTimeUpdate(t,e){}resetAnimation(){const t=[Js.SlideIn,Js.SlideOut];(0,I.IV)(this.jo,...t)}initComponent(t){super.initComponent(),this.W9=t,this.TO.on(this.W9,this.rv)}render(){(0,I.SH)(this.jo,this.V9),(0,I.jG)(this.jo,this.W9)}setFooterElement(t){return this.t9=t,this.J6(),this.t9}destroy(){this.TO.off(this.W9,this.rv),(0,I.bX)(this.jo),this.jo=this.Re.createElementByString(this.H1.template),this.unsubscribeAll(this.gc),this.gc.unregisterAll(this)}}class tn extends Zs{constructor(t,e,i,s,n,r){super(t,e,i,s,n,r),this.mediator=t,this.Re=e,this.tT=n,this.H1=r,this.eventList=[],this.className=Gs.Bullet}Y9(t){const e=t.map((t=>{if(!(0,a.QM)(t.title))return;const e=this.X9(t);return(0,I.jG)(e,this.$templateFragment),Object.assign(Object.assign({},t),{activated:!1,element:e,titleElement:e.firstChild,containerElement:e.querySelector(`.${Hs.Container}`)})}));this.Q9=new qs(e)}K9(t){const e=t.element.querySelector(`.${Hs.Container}`),i=e.querySelectorAll(`.${Hs.Text}`),s=(0,a.$K)(i)?i.length:0,n=(0,a.$K)(i[0])?i[0].clientHeight:0;(0,I.T7)(e,{"max-height":s*n+"px"}),t.activated=!0,(0,I.L_)(t.titleElement,kt.iu.PrimaryColor,kt.iu.SecondaryColor),(0,I.cn)(t.element,"active")}Z9(t){const e=t.element.querySelector(`.${Hs.Container}`);(0,I.aQ)(e,"max-height"),(0,I.L_)(t.titleElement,kt.iu.SecondaryColor,kt.iu.PrimaryColor),(0,I.IV)(t.element,"active")}t8(t){const e=this.H1.labelTemplate(t);return this.Re.createElementByString(e)}X9(t){const e=this.t8(t.title),i=this.Q1(this.j9.getWordsHtml(t.description)),s=this.H9();return(0,I.jG)([e,i],s),s}z9(t){const{label:e,bulletChunkList:i}=t;(0,a.QM)(e)&&(0,I.jG)(this.U9(e),this.$templateFragment),(0,o.BZ)(i)&&this.Y9(i.slice(0,3))}onSlideTimeUpdate(t,e){const i=this.Q9;i&&!i.currentItem.activated&&(0===i.currentItemIndex?t>=1e3&&(this.K9(i.currentItem),i.goToNextItem()):(e-1e3)/i.listLength*i.currentItemIndex+1e3<t&&(this.Z9(i.previousItem),this.K9(i.currentItem),i.goToNextItem()))}}class en{get template(){return`<cnx class="${kt.iu.TitleComponent}"></cnx>`}titleTemplate(t,e){return`<cnx class="${Hs.Title} ${e}">${t}</cnx>`}labelTemplate(t,e){return`<cnx class="${Hs.Label} ${e} ">${t}</cnx>`}textTemplate(t,e){return`<cnx class="${Hs.Text} ${e}">${t}</cnx>`}containerTemplate(){return`<cnx class="${Hs.Container}"></cnx>`}placeholderTemplate(){return`<cnx class="${Hs.Placeholder}"></cnx>`}wrapeprTemplate(){return`<cnx class="${Hs.Wrapper}"></cnx>`}}class sn extends en{get template(){return`<cnx class="${Js.Basic} ${kt.iu.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${Hs.Title} ${kt.iu.AccentColor}">${t}</cnx>`}labelTemplate(t){return`<cnx class="${Hs.Label} ${kt.iu.PrimaryColor}">\n            <cnx class="${Hs.VerticalLine} ${kt.iu.AccentColor}"></cnx>\n            ${t}\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${Hs.Container}">\n                    <cnx class="${Hs.Text}  ${kt.iu.SecondaryColor}">${t}</cnx>\n                </cnx>\n        `.trim()}}function nn(t,e){const i=(0,_.hF)(t);return(0,_.V7)((0,_.J5)(i),e)}class rn extends Zs{constructor(t,e,i,s,n,r){super(t,e,i,s,n,r),this.mediator=t,this.Re=e,this.tT=n,this.H1=r,this.eventList=[],this.className=Gs.Cover,this.splitTextSelector=`.${Hs.Text}, .${Hs.Title}`,this.rv=()=>{this.Re.requestAnimationFrameHelper((()=>{if(this.j9.brakeLongLines(this.jo,this.splitTextSelector),this.t9){const t=this.t9.clientHeight/2*-1;(0,I.T7)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}}))}}z9(t){let{coverChunk:{title:e,subtitle:i}}=t;const{label:s}=t;if((0,a.QM)(e)&&(e=nn(e,zs),(0,I.jG)(this.U9(this.j9.getWordsHtml(e)),this.$templateFragment)),(0,a.QM)(i)&&(i=nn(i,zs),(0,I.jG)(this.Q1(this.j9.getWordsHtml(i)),this.$templateFragment)),(0,a.QM)(s)){if(this.labelElement=this.q9(s),this.t9){const t=(this.t9.clientHeight-this.jo.clientHeight)/2*-1;(0,I.T7)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}(0,I.jG)(this.labelElement,this.$templateFragment)}}}class on extends en{get template(){return`<cnx class="${Js.Cover} ${kt.iu.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${Hs.Placeholder}">\n            <cnx class="${Hs.Title} ${kt.iu.PrimaryColor}">${t}</cnx>\n        </cnx>`}textTemplate(t){return`<cnx class="${Hs.Placeholder}">\n            <cnx class="${Hs.Text} ${kt.iu.SecondaryColor}">${t}</cnx>\n        </cnx>`}labelTemplate(t){return`<cnx class="${Hs.Placeholder}">\n            <cnx class="${Hs.Label}">${t}</cnx>\n        </cnx>`}}class an extends Zs{constructor(t,e,i,s,n,r){super(t,e,i,s,n,r),this.mediator=t,this.Re=e,this.tT=n,this.H1=r,this.className=Gs.Default,this.e8=!0,this.eventList=[...this.eventList,K.CallToAction]}z9(t){const{url:e,label:i}=t;if(e?(this.jo.setAttribute("title",e),(0,I.cn)(this.jo,kt.iu.TitleLink)):(this.jo.removeAttribute("title"),(0,I.IV)(this.jo,kt.iu.TitleLink)),(0,a.QM)(i)){const t=this.j9.getWordsHtml(nn(i,zs));(0,I.jG)(this.Q1(t),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,K.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.e8=!0}onSlideTimeUpdate(t,e){this.e8&&e-t<1200&&(this.G9(),this.e8=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.gc),this.gc.unregisterAll(this)}}class hn extends en{get template(){return`<cnx class="${Js.Default} ${kt.iu.TitleComponent}">\n            <cnx class="${Hs.VerticalLine} ${kt.iu.AccentColor}"></cnx>\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${kt.ed.InheritBodyFontFamily} ${Hs.Text} ${kt.iu.PrimaryColor} ${Hs.HighlightInner} ${Hs.HighlightText}">${t}</cnx>`.trim()}}const cn={[x.ProtoPlayspaceColorSchemeEnum.Accent]:kt.iu.AccentColor,[x.ProtoPlayspaceColorSchemeEnum.Primary]:kt.iu.PrimaryColor,[x.ProtoPlayspaceColorSchemeEnum.Secondary]:kt.iu.SecondaryColor};class dn extends Zs{constructor(t,e,i,s,n,r){super(t,e,i,s,n,r),this.mediator=t,this.Re=e,this.tT=n,this.H1=r,this.eventList=[],this.className=Gs.Description}i8(t){return t/this.n8.listLength*(this.n8.currentItemIndex+1)}Y9(t){const e=t.map(((t,e)=>{const i=this.sW(t);return(0,I.jG)(i,this.$templateFragment),0===e&&(0,I.cn)(i,"active"),Object.assign(Object.assign({},t),{shown:!1,element:i})}));this.n8=new qs(e)}r8(t){return this.q9(t.text,cn[t.colorScheme])}sW(t){return this.Q1(this.j9.getWordsHtml(nn(t.text,zs)),cn[t.colorScheme])}z9(t){const{descriptionChunkList:e,label:i,labelColorScheme:s}=t,n={text:i,colorScheme:s};(0,a.QM)(n.text)&&(0,I.jG)(this.r8(n),this.$templateFragment),(0,o.BZ)(e)&&this.Y9(e)}o8(){this.n8.currentItem.shown=!0,(0,I.IV)(this.n8.currentItem.element,"active"),this.n8.goToNextItem(),this.Re.requestAnimationFrameHelper((()=>{this.resetAnimation(),this.Re.requestAnimationFrameHelper((()=>{(0,I.cn)(this.n8.currentItem.element,"active"),this.J9()}))}))}onSlideTimeUpdate(t,e){t>=e||t>=this.i8(e)&&!this.n8.currentItem.shown&&this.o8()}}class ln extends en{get template(){return`<cnx class="${Js.Basic} ${kt.iu.TitleComponent}"></cnx>`}textTemplate(t,e){return`<cnx class="${Hs.Placeholder}">\n            <cnx class="${Hs.Text} ${e}">${t}</cnx>\n        </cnx>`}}class un extends Zs{constructor(t,e,i,s,n,r){super(t,e,i,s,n,r),this.mediator=t,this.Re=e,this.tT=n,this.H1=r,this.eventList=[],this.className=Gs.Instagram}z9(t){const{instagramMetadata:{createdDate:e,comments:i,likes:s},label:n}=t;this.h8({createdDate:e,comments:i,likes:s}),(0,a.QM)(n)&&(0,I.jG)(this.U9(n),this.$templateFragment)}h8(t){const{createdDate:e,comments:i,likes:s}=t,n=this.Re.createElementByString(this.H1.instagramMetaTemplate(e,s,i));if(this.c8(i)&&this.c8(s)){const t=n.querySelector(`.${Hs.Instagram}-date cnx-span`);(0,I.cn)(t,kt.Gj.Show)}(0,I.jG)(n,this.$templateFragment)}c8(t){return!(0,a.QM)(t)||"0"===t}}class pn extends en{get template(){return`<cnx class="${Js.Basic} ${kt.iu.TitleComponent}"></cnx>`.trim()}instagramMetaTemplate(t,e,i){const s=(0,a.QM)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${kt.ed.InheritBodyFontFamily}">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0"d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"/></svg>\n                <cnx-span class="cnx-date-label ${kt.ed.InheritBodyFontFamily}">Posted </cnx-span>${(0,bt.VG)(t)}\n            </cnx-span>`.trim():"",n=(0,a.QM)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${kt.ed.InheritBodyFontFamily}">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"/></svg> ${(0,Ne.uc)(parseInt(e,10))}\n            </cnx-span>`.trim():"",r=(0,a.QM)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${kt.ed.InheritBodyFontFamily}">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"/></svg> ${(0,Ne.uc)(parseInt(i,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${kt.ed.InheritBodyFontFamily}">\n                ${s}\n                ${n}\n                ${r}\n            </cnx>\n        `.trim()}titleTemplate(t){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${Hs.Instagram}-title ${kt.ed.InheritBodyFontFamily}">\n                ${t}\n            </cnx>\n        `.trim()}}class fn extends Zs{constructor(){super(...arguments),this.className=Gs.Pinned,this.e8=!0,this.eventList=[...this.eventList,K.CallToAction]}z9(t){var e;let i,s="";switch(t.titleType){case di.Default:({url:i,label:s}=t);break;case di.Description:let n=[];({label:s="",descriptionChunkList:n}=t),(0,o.BZ)(n)&&(s+=" "+n[0].text);break;case di.Quote:const{quote:r=""}=t;s=r;break;case di.Bullet:let h=[];({label:s="",bulletChunkList:h}=t),(0,o.BZ)(h)&&(s+=" "+(null===(e=n[0])||void 0===e?void 0:e.title));break;case di.Cover:const{coverChunk:{title:c,subtitle:d}}=t;(0,a.QM)(c)&&(s=nn(c,zs)),(0,a.QM)(d)&&(s+=" "+nn(d,zs));break;case di.Instagram:({label:s}=t)}if(i?(this.jo.setAttribute("title",i),(0,I.cn)(this.jo,kt.iu.TitleLink)):(this.jo.removeAttribute("title"),(0,I.IV)(this.jo,kt.iu.TitleLink)),(0,a.QM)(s)){const t=this.j9.getWordsHtml(nn(s,zs));(0,I.jG)(this.Q1(t),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,K.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.e8=!0}onSlideTimeUpdate(t,e){this.e8&&e-t<1200&&(this.G9(),this.e8=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.gc),this.gc.unregisterAll(this)}}class mn extends en{get template(){return`<cnx class="${Js.Pinned}">\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="pinned-title">${t}</cnx>`.trim()}}const gn='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent cnx-quote-icon" width="13" height="10" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"/></svg>\n';class vn extends Zs{constructor(t,e,i,s,n,r){super(t,e,i,s,n,r),this.mediator=t,this.Re=e,this.tT=n,this.H1=r,this.eventList=[],this.className=Gs.Quote}z9(t){const{quote:e,source:i}=t;if((0,a.QM)(e)){const t=this.j9.getWordsHtml(`${gn}${(0,_.J5)(e)}${gn}`);(0,I.jG)(this.Q1(t),this.$templateFragment)}(0,a.QM)(i)&&(0,I.jG)(this.q9(i),this.$templateFragment)}}class yn extends en{get template(){return`\n            <cnx class="${Js.Basic} ${kt.iu.TitleComponent}"></cnx>\n        `.trim()}textTemplate(t){return`\n        <cnx class="${Hs.Text} ${kt.iu.PrimaryColor}"> ${t}</cnx>`.trim()}labelTemplate(t){return`<cnx class="${Hs.Label}">${t}</cnx>`.trim()}}class bn extends Ts.P{constructor(t,e,i,s,n,r,o,a){super(t,e,i,s,r),this.TO=n,this.Q5=o,this.eventList=[K.CallToAction],this.d8=new Map,this.l8=[],this.u8(),this.p8=a}setFooterElement(t){this.d8.forEach((e=>{e.setFooterElement(t)}))}setIsPinnedTitle(t){this.p8=t,this.onSlideTransitionStart(this.l8),this.onSlideTransitionEnd()}onSlideTransitionStart(t){this.l8=t,(0,I.Kk)(this.jo),this.jo.removeAttribute("title");const e=t.find((({type:t})=>t===ci.SlideTitle));this.f8=e;const i=t.find((({type:t})=>t===ci.CtaButton));if(i&&i.metadata&&i.metadata.url){if(this.m8=i.metadata.url,!this.Q5){this.jo.href=this.m8;const t=this.Re.isURLSameDomainToTop(this.m8);this.jo.target=t?ki.bS.Top:ki.bS.Blank}this.jo.title=e.metadata.label,i.metadata.title=e.metadata.label}if((0,a.as)(e)&&(0,a.as)(e.metadata)){if(this.g8(),(0,a.QM)(e.metadata.label)){(0,_.Ft)(e.metadata.label)&&(0,I.cn)(this.jo,li.fB)}this.v8.onSlideTransitionStart([e])}}onSlideTransitionEnd(){this.v8&&this.v8.onSlideTransitionEnd()}onSlideTimeUpdate(t,e){this.v8&&this.v8.onSlideTimeUpdate(t,e)}initComponent(){}g8(){let t;t=this.p8?this.d8.get(di.Pinned):this.d8.get(this.f8.metadata.titleType),t&&this.y8(t)}y8(t){this.v8?(this.v8.destroy(),(0,I.L_)(this.jo,this.b8,t.className)):(0,I.cn)(this.jo,t.className),this.b8=t.className,this.jo.innerHTML="",this.v8=t,this.v8.initComponent(this.jo)}u8(){this.d8.set(di.Pinned,new fn(this,this.Re,this.gc,this.TO,this.tT,new mn)),this.d8.set(di.Default,new an(this,this.Re,this.gc,this.TO,this.tT,new hn)),this.d8.set(di.Description,new dn(this,this.Re,this.gc,this.TO,this.tT,new ln)),this.d8.set(di.Quote,new vn(this,this.Re,this.gc,this.TO,this.tT,new yn)),this.d8.set(di.Bullet,new tn(this,this.Re,this.gc,this.TO,this.tT,new sn)),this.d8.set(di.Cover,new rn(this,this.Re,this.gc,this.TO,this.tT,new on)),this.d8.set(di.Instagram,new un(this,this.Re,this.gc,this.TO,this.tT,new pn)),this.d8.forEach((t=>{t.eventList.forEach((e=>{this.subscribe(e,t,(()=>{const t={payload:null};e===K.CallToAction&&(t.payload=this.m8),this.mediator.publish(this,e,t)}))}))}))}destroy(){super.destroy(),this.v8&&this.v8.destroy()}}class In{get template(){return`<a class="${Hs.Wrapper}"></a>`}}class wn extends Ts.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){const e=this.I8(t);e&&this.w8(e.metadata.label)}I8(t){return t.find((({type:t,metadata:e})=>t===ci.TextLabel&&(0,a.as)(e)))}w8(t){(0,a.QM)(t)&&(this.jo.innerText=t)}}class Pn extends ps.Y{constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.eventList=[...this.eventList,Be.C[Be.C.LogoClicked]],this.hideComponent(!1),this.T8=this.jo.querySelector(`.${li.tO.Logo}`),this.T8.src=`${r}`,this.T8.alt="",this.T8.onload=()=>{this._8()}}show(t){this.showComponent(t.useTransition)}hide(t){this.hideComponent(t.useTransition)}update(t){this.showComponent(t.useTransition)}triggerLogoAnimation(){(0,I.cn)(this.jo,li.tO.LogoAnimation)}onClickHandler(){this.mediator.publish(this,Be.C[Be.C.LogoClicked])}_8(){this.T8.naturalHeight>this.T8.naturalWidth?this.T8.naturalWidth>this.T8.parentElement.clientWidth&&this.T8.naturalWidth/this.T8.naturalHeight>=.8?(0,I.cn)(this.T8,li.tO.LogoLandscape):(0,I.cn)(this.T8,li.tO.LogoPortrait):this.T8.naturalHeight>this.T8.parentElement.clientHeight&&this.T8.naturalHeight/this.T8.naturalWidth>=.8?(0,I.cn)(this.T8,li.tO.LogoPortrait):(0,I.cn)(this.T8,li.tO.LogoLandscape)}}class Tn{get template(){return`\n            <cnx class="${li.tO.LogoContainer}">\n                <img class="${li.tO.Logo}" />\n            </cnx>\n        `.trim()}}class _n extends Ts.P{constructor(t,e,i,s,n){super(t,e,i,s,n),this.eventList=[],this.AW=this.jo.querySelector(`.${li.tO.TextInnerContainer}`)}show(t){if(!this.AW)return;const{label:e,useTransition:i}=t;(0,a.QM)(e)&&e!==this.r8&&(clearTimeout(this.S8),this.r8=e,this.A8(e),this.J9(i))}initComponent(){}hide(t){const{useTransition:e}=t;clearTimeout(this.S8),this.G9(e),this.r8=null}update(t){if(!this.AW)return;const{label:e,useTransition:i}=t;(0,a.QM)(e)&&e!==this.r8&&(clearTimeout(this.S8),this.G9(i),this.r8=e,this.S8=setTimeout((()=>{this.A8(e),this.J9(i)}),600))}A8(t){(0,a.QM)(t)&&(0,_.Ft)(t)&&(0,I.cn)(this.jo,"cnx-japanese-charset"),this.AW.innerHTML=t}J9(t=!1){if(t){if((0,I.pv)(this.jo,li.tO.SlideIn))return;this.x8(),(0,I.IV)(this.jo,kt.Gj.Hide,kt.Gj.Active),(0,I.Tp)(this.jo),(0,I.L_)(this.jo,li.tO.SlideOut,li.tO.SlideIn)}else(0,I.L_)(this.jo,kt.Gj.Hide,kt.Gj.Active),(0,I.IV)(this.jo,li.tO.SlideIn,li.tO.SlideOut)}G9(t=!1){t?((0,I.IV)(this.jo,kt.Gj.Hide,kt.Gj.Active),(0,I.L_)(this.jo,li.tO.SlideIn,li.tO.SlideOut)):((0,I.L_)(this.jo,kt.Gj.Active,kt.Gj.Hide),(0,I.IV)(this.jo,li.tO.SlideIn,li.tO.SlideOut))}x8(){const t=[li.tO.SlideIn,li.tO.SlideOut];(0,I.IV)(this.AW,...t),(0,I.Tp)(this.AW)}}class Sn{get template(){return`\n            <cnx class="${li.tO.TopSlideTitle} ${kt.ed.InheritTitleFontFamily}">\n                <cnx class="${li.tO.TextPlaceholder}">\n                    <cnx class="${li.tO.Text} ${kt.iu.SecondaryColor}">\n                        <cnx class="${li.tO.TextOuterContainer}">\n                            <cnx class="${li.tO.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class An{get template(){return`\n            <cnx class="${li.tO.TopStoryTitle} ${kt.ed.InheritTitleFontFamily}">\n                <cnx class="${li.tO.TextPlaceholder}">\n                    <cnx class="${li.tO.Text} ${kt.iu.SecondaryColor}">\n                        <cnx class="${li.tO.TextOuterContainer}">\n                            <cnx class="${li.tO.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}var xn,kn=h(7617);!function(t){t[t.TopLogo=0]="TopLogo",t[t.TopSlideTitle=1]="TopSlideTitle",t[t.TopStoryTitle=2]="TopStoryTitle"}(xn||(xn={}));const En={[ci.TopLogo]:xn.TopLogo,[ci.TopSlideTitle]:xn.TopSlideTitle,[ci.TopStoryTitle]:xn.TopStoryTitle},Cn={[xn.TopLogo]:ci.TopLogo,[xn.TopSlideTitle]:ci.TopSlideTitle,[xn.TopStoryTitle]:ci.TopStoryTitle},On=[xn.TopLogo,xn.TopStoryTitle,xn.TopSlideTitle];class Ln extends kn.E{constructor(){super(...arguments),this.eventList=[Be.C[Be.C.LogoClicked],pi.Z[pi.Z.Scroll]],this.k8=[],this.E8={}}triggerLogoAnimation(){const t=this.getComponent(ts.r.TopLogo);t&&t.triggerLogoAnimation()}onSlideTransitionStart(t){const e=this.C8(t);this.E8=Object.assign({},e),this.O8(t)}onSlideTransitionEnd(){}onSlideTimeUpdate(){}getComponent(t){return super.getComponent(t)}Rc(t,e,i){this.mediator.publish(this,t,e)}L8(t){return t.map((({type:t})=>En[t])).filter((t=>(0,a.$K)(t)))}C8(t){return t.reduce(((t,{type:e,metadata:i})=>{switch(e){case Cn[xn.TopStoryTitle]:if(!i.label&&!i.useFallbackLabel)return t;const e=i.label||"Top Articles";return Object.assign(Object.assign({},t),{[xn[xn.TopStoryTitle]]:this.M8(e,i.useTransition)});case Cn[xn.TopSlideTitle]:return Object.assign(Object.assign({},t),{[xn[xn.TopSlideTitle]]:this.M8(i.label,i.useTransition)});case Cn[xn.TopLogo]:return Object.assign(Object.assign({},t),{[xn[xn.TopLogo]]:Object.assign({},i)});default:return t}}),{})}M8(t,e=!1){return{useTransition:e,label:this.B8(t)}}B8(t){if(t)return t.length>36?`${t.substring(0,36)}...`:t}O8(t,e=!1){const i=this.L8(t),s=(0,o.V7)(On,i),n=(0,o.V7)(i,this.k8),r=(0,o.tN)(i,this.k8);this.k8=i,s.forEach((t=>this.D8(t,e))),n.forEach((t=>this.N8(t,e))),r.forEach((t=>this.F8(t,e)))}D8(t,e=!1){const i=this.V8(t);if(!i)return;const s=this.j8(t);e&&(s.useTransition=!1),i.hide(s)}N8(t,e=!1){const i=this.V8(t);if(!i)return;const s=this.j8(t);e&&(s.useTransition=!1),i.show(s)}F8(t,e=!1){const i=this.V8(t);if(!i)return;const s=this.j8(t);e&&(s.useTransition=!1),i.update(s)}V8(t){return this.getComponent(ts.r[xn[t]])}j8(t){return this.E8[xn[t]]||{}}}class Mn{constructor(t){this.U8=t}get template(){return`\n            <cnx class="${li.tO.Main}">\n                ${this.J8()}\n                <cnx class="${li.tO.TitlesContainer}">\n                    [[${ts.r.TopStoryTitle}]]\n                    [[${ts.r.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}J8(){return this.U8?`[[${ts.r.TopLogo}]]`:""}}class Rn extends us.A{constructor(t,e,i,s,n){super(t,e,s,n),this.OQ=i,this.mc={[ts.r.PlayspaceProgressBar]:t=>new As(t,this.Re,this.gc,'<cnx class="cnx-slides-progress-bar"></cnx>',this.Qs.isMobile),[ts.r.PlayspaceSettingsMenu]:t=>new Us(t,this.Re,this.gc,'<cnx class="cnx-ui-cm cnx-ui-cm-settings cnx-menu-popup" data-id="cnx-ui-cm-settings"><cnx class="cnx-cm-container"></cnx></cnx>',Be.C[Be.C.SettingsMenu],ts.r.PlayspaceSettingsMenu,this.jo,this.Qs.isMobile),[ts.r.CtaButton]:t=>new Is(t,this.Re,this.gc,this.OQ,new Ps,this.Qs.isMobile,this.Qs.disableClickUrl),[ts.r.ClickToPlayButton]:t=>new fs(t,this.Re,this.gc,'<cnx class="cnx-ui-click-to-play-btn">\n    <cnx class="cnx-ui-click-to-play-btn-content">\n        <svg class="cnx-color-icon cnx-click-to-play-btn-icon cnx-color-accent" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><polygon points="5 1 5 23 23 11.9165764"></polygon></svg>\n\n        <cnx class="cnx-onion-ring"></cnx>\n        <cnx-span class="cnx-click-to-play-btn-text">PLAY</cnx-span>\n    </cnx>\n</cnx>',this.Qs.isMobile),[ts.r.OverlayComponent]:t=>new fs(t,this.Re,this.gc,'<cnx class="cnx-ui-click-to-play-overlay"></cnx>',this.Qs.isMobile),[ts.r.TopTitle]:t=>new Ln(t,this.Re,new Mn(this.Qs.logoUrl).template,this),[ts.r.TopLogo]:t=>new Pn(t,this.Re,this.gc,(new Tn).template,this.Qs.isMobile,this.Qs.logoUrl),[ts.r.TopSlideTitle]:t=>new _n(t,this.Re,this.gc,(new Sn).template,this.Qs.isMobile),[ts.r.TopStoryTitle]:t=>new _n(t,this.Re,this.gc,(new An).template,this.Qs.isMobile),[ts.r.SlideTitle]:t=>new bn(t,this.Re,this.gc,(new In).template,this.OQ,this.Qs.isMobile,this.Qs.disableClickUrl,this.Qs.isPinned),[ts.r.VolumeControls]:t=>new ds.N(t,this.Re,ls.Z,this),[ts.r.TextLabel]:t=>new wn(t,this.Re,this.gc,'<cnx class="cnx-button-text-label">1 min. story</cnx>')},this.vc=t=>e=>{const i=this.mc[t];if(i)return i(e)}}createComponent(t,e){return this.vc(t)(e)||super.createComponent(t,e)}}const Bn={[ci.PlaybackControls]:[ts.r.PlayButton],[ci.VolumeControls]:[ts.r.VolumeButton],[ci.CtaButton]:[ts.r.CtaButton],[ci.PlaylistControls]:[ts.r.UpNextButton,ts.r.PreviousButton],[ci.SlideTitle]:[ts.r.SlideTitle],[ci.TextLabel]:[ts.r.TextLabel]};class Dn{constructor(){this.G8=Object.keys(Bn).reduce(((t,e)=>[...t,...Bn[e]]),[])}setCapabilityList(t){this.z8=t.map((t=>Bn[t.type])).filter((t=>Array.isArray(t))).reduce(((t,e)=>[...t,...e]),[])}getComponentList(){return{excludedComponents:(0,o.V7)(this.G8,this.z8),includedComponents:(0,o.tN)(this.G8,this.z8)}}}class Nn extends is.${constructor(t,e,i,s,n,r,o,a,h){super(t,e,i,n,new Rn(i,h,s,e,{isMobile:r})),this.mediator=t,this.$container=e,this.Kr=i,this.t9=o,this.G8=[ts.r.CtaButton],this.W8=new Dn,this._c={[J.Ez.PlayingState]:new as(this),[J.Ez.PausedState]:new ns(this),[J.Ez.StoppedState]:new cs(this),[J.Ez.HiddenState]:new rs(this),[J.Ez.PrerollState]:new hs(this),[J.Ez.PostrollState]:new hs(this)},this.Y8(),this._c[a].enterState(),this.X8(),this.Q8(!1)}Y8(){const t=this.getComponent(ts.r.CtaButton);t&&t.setFooterElement(this.t9)}X8(t=[]){this.W8.setCapabilityList(t)}Q8(t=!0){const{excludedComponents:e,includedComponents:i}=this.W8.getComponentList();e.map((t=>this.getComponent(t))).forEach((e=>e&&e.hideComponent(t))),i.map((t=>this.getComponent(t))).forEach((e=>e&&e.showComponent(t)))}r3(t){switch(t){case K.CallToAction:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.UrlClick});break;case pi.Z[pi.Z.Scroll]:return}}Rc(t,e,i){this.r3(t),t===K.CallToAction?(0,a.QM)(e.payload)?this.mediator.publish(this,K.CallToAction,e):this.mediator.publish(this,Be.C[Be.C.Next]):this.mediator.publish(this,t,e)}handleCapabilityList(t){this.X8(t),this.Q8(),this.G8.forEach((e=>{const i=this.getComponent(e);i&&i.handleCapabilities(t)}))}getComponent(t){return super.getComponent(t)}}class Fn extends Ot.tt{constructor(t,e,i,s,n,r,o,a,h,c){super(),this.mediator=t,this.YV=e,this.Kr=i,this.gc=s,this.OQ=n,this.Nn=r,this.tT=o,this.W5=a,this.t9=h,this.cG=c,this.K8=[{type:ci.TopLogo,metadata:{}}],this.jo=this.Kr.createElementByString(`<cnx class="${li.v$.Slide}"></cnx>`),this.CZ(),this.Z8=this.jo.querySelector(".cnx-ui-ps-slide")}get $container(){return this.jo}get slideCapabilityList(){return this.K8}get metadata(){return this.YV}get media(){return this.Nn}load(){this.Nn.load(this.Z8)}get clickUrl(){return this.YV.clickUrl}updateCapabilityMetadata(t){if(!(0,o.BZ)(this.K8))return;const e=this.K8.find((({type:e})=>e===t.type));e&&(e.metadata=Object.assign(Object.assign({},e.metadata),t.metadata))}changeState(t){this.UY.changeState(t)}CZ(){this.UY=new Nn(this,this.jo,this.Kr,this.OQ,this.PW(),this.tT,this.t9,this.cG.playbackMode===x.ProtoPlayerPlaybackModeEnum.ClickToPlay?J.Ez.StoppedState:J.Ez.PausedState,this.gc),this.subscribe(K.CallToAction,this.UY,(({payload:t})=>{this.mediator.publish(this,K.CallToAction)})),this.relay(K.GeneralClickInteraction,this.UY,this,this.mediator),this.subscribe(Be.C[Be.C.Next],this.UY,(()=>{this.mediator.publish(this,Be.C[Be.C.Next])}))}PW(){return new es(this.W5).template}t7(t,e){this.K8.push({type:t,metadata:e})}e7(){const t=this.i7(this.YV);if(!t)return;const e={label:t,useTransition:!0};this.t7(ci.TopSlideTitle,e)}i7(t){const e=t.publisherName||t.title,i=this.Kr.stripHtmlTags(e).trim();return t.publisherName?`by <em>${i}</em>`:i}onSlideTransitionStart(t){this.UY&&this.UY.handleCapabilityList(t)}}class $n extends Fn{constructor(t,e,i,s,n,r,h,c,d,l){super(t,e,i,s,n,r,h,c,d,l),this.type=x.ProtoPlayspaceSlideTypeEnum.BulletList,(0,a.as)(e.bulletListMetadata)&&(0,o.BZ)(this.metadata.bulletListMetadata.items)?(this.s7(),this.onSlideTransitionStart(this.K8)):(0,T.nF)({message:"BulletSlide_no_metadata",level:T.D_.CRITICAL})}s7(){this.n7(),this.e7(),this.r7()}n7(){const{title:t,items:e}=this.YV.bulletListMetadata;e.length>4&&(e.length=4);const i=ci.SlideTitle,s={bulletChunkList:e,titleType:di.Bullet};(0,a.QM)(t)&&(s.label=t),this.t7(i,s)}r7(){const t={label:this.YV.storyTitle,useFallbackLabel:!0};this.t7(ci.TopStoryTitle,t)}}class Vn extends Fn{constructor(t,e,i,s,n,r,o,a,h,c,d){super(t,e,i,s,n,r,a,h,c,d),this.o7=o,this.type=x.ProtoPlayspaceSlideTypeEnum.Cover,this.a7(),this.h7(),this.onSlideTransitionStart(this.K8)}a7(){(0,I.cn)(this.jo,Hs.Cover)}h7(){this.c7(),this.d7()}c7(){const t=ci.SlideTitle,e={titleType:di.Cover,coverChunk:this.YV.coverMetadata,label:`${this.o7} min. story`};this.t7(t,e)}d7(){const t={label:"START",duration:this.YV.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.t7(ci.CtaButton,t)}}const jn={[i.ProtoMediaTypeEnum.Image]:"Read more",[i.ProtoMediaTypeEnum.Video]:"Continue video"};class Un extends Fn{constructor(t,e,i,s,n,r,o,a,h,c){super(t,e,i,s,n,r,o,a,h,c),this.type=x.ProtoPlayspaceSlideTypeEnum.Default,this.h7(),this.onSlideTransitionStart(this.K8)}h7(){this.c7(),this.l7(),this.u7(),this.f7(),this.d7(),this.r7(),this.YV.publisherName&&this.e7()}c7(){const{clickUrl:t,title:e}=this.YV,i={url:t,label:e,titleType:di.Default};this.t7(ci.SlideTitle,i)}l7(){this.t7(ci.PlaybackControls)}u7(){this.t7(ci.PlaylistControls)}d7(){const{clickUrl:t,title:e}=this.YV;if(!(0,a.QM)(t))return;const i={url:t,label:this.m7(this.YV),title:e,ctaAlignToContent:!0};this.t7(ci.CtaButton,i)}f7(){this.t7(ci.VolumeControls)}r7(){const t=this.Kr.stripHtmlTags(this.YV.storyTitle).trim();if(!t)return;const e={label:t,useFallbackLabel:!0};this.t7(ci.TopStoryTitle,e)}m7(t){const{capabilityList:e,mediaType:i}=t;if(!(0,o.BZ)(e))return jn[i];const s=e.find((({type:t})=>t===x.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton));return s&&s.metadata?s.metadata.label:jn[i]}}class qn extends Fn{constructor(t,e,i,s,n,r,h,c,d,l){super(t,e,i,s,n,r,h,c,d,l),this.type=x.ProtoPlayspaceSlideTypeEnum.Description,(0,a.as)(e.descriptionMetadata)&&(0,o.BZ)(this.metadata.descriptionMetadata.chunkList)?(this.g7(),this.h7(),this.onSlideTransitionStart(this.K8)):(0,T.nF)({message:"DescriptionSlide_no_metadata",level:T.D_.CRITICAL})}g7(){const{chunkList:t,label:e}=this.YV.descriptionMetadata;let i=!1;const s=t=>(0,a.r)(t);(0,a.as)(e)&&(0,a.QM)(e.text)&&(i=!0,e.colorScheme=s(e.colorScheme)?e.colorScheme:x.ProtoPlayspaceColorSchemeEnum.Primary),(0,o.BZ)(t)&&t.forEach(((t,e)=>{t.colorScheme=0!==e||i?s(t.colorScheme)?t.colorScheme:x.ProtoPlayspaceColorSchemeEnum.Secondary:s(t.colorScheme)?t.colorScheme:x.ProtoPlayspaceColorSchemeEnum.Primary}))}h7(){this.v7(),this.r7(),this.e7()}v7(){const{chunkList:t,label:e}=this.YV.descriptionMetadata,i=ci.SlideTitle,s={descriptionChunkList:t,titleType:di.Description};(0,a.as)(e)&&(s.label=e.text,s.labelColorScheme=e.colorScheme),this.t7(i,s)}r7(){const t={label:this.YV.storyTitle,useFallbackLabel:!0};this.t7(ci.TopStoryTitle,t)}}class Hn extends Fn{constructor(t,e,i,s,n,r,o,a,h,c){super(t,e,i,s,n,r,o,a,h,c),this.type=x.ProtoPlayspaceSlideTypeEnum.Instagram,this.a7(),this.h7(),this.onSlideTransitionStart(this.K8)}a7(){(0,I.cn)(this.jo,Hs.Instagram)}h7(){this.y7(),this.r7(),this.e7(),this.d7()}y7(){const{createdDate:t,comments:e,likes:i}=this.YV.instagramMetadata,s={label:this.YV.title,instagramMetadata:{createdDate:t,comments:e,likes:i},titleType:di.Instagram};this.t7(ci.SlideTitle,s)}r7(){const t={label:this.YV.storyTitle,useFallbackLabel:!0};this.t7(ci.TopStoryTitle,t)}d7(){const{clickUrl:t,title:e}=this.YV;if(!(0,a.QM)(t))return;const i={url:t,label:"VISIT POST",title:e,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.t7(ci.CtaButton,i)}b7(t){const e=this.metadata.instagramMetadata.handle||t.publisherName,i=this.Kr.stripHtmlTags(e).trim();return t.publisherName?`by <em>${i}</em>`:i}e7(){const t=this.b7(this.YV);if(!t)return;const e={label:t,useTransition:!0};this.t7(ci.TopSlideTitle,e)}}class Jn extends Fn{constructor(t,e,i,s,n,r,o,h,c,d){super(t,e,i,s,n,r,o,h,c,d),this.type=x.ProtoPlayspaceSlideTypeEnum.Quote,(0,a.as)(e.quoteMetadata)?(this.h7(),this.onSlideTransitionStart(this.K8)):(0,T.nF)({message:"QuoteSlide_no_metadata",level:T.D_.CRITICAL})}h7(){this.r7(),this.e7(),this.I7()}r7(){const t={label:this.YV.storyTitle,useFallbackLabel:!0};this.t7(ci.TopStoryTitle,t)}I7(){const{text:t,source:e}=this.YV.quoteMetadata,i=ci.SlideTitle,s={quote:t,source:e,titleType:di.Quote};this.t7(i,s)}}class Gn{constructor(t,e,i,s,n,r,o,a,h,c){this.ph=t,this.Kr=e,this.gc=i,this.OQ=s,this.fX=n,this.cj=r,this.tT=o,this.t9=a,this.cG=h,this.w7=c,this._7={[x.ProtoPlayspaceSlideTypeEnum.Description]:qn,[x.ProtoPlayspaceSlideTypeEnum.Default]:Un,[x.ProtoPlayspaceSlideTypeEnum.Quote]:Jn,[x.ProtoPlayspaceSlideTypeEnum.BulletList]:$n,[x.ProtoPlayspaceSlideTypeEnum.Instagram]:Hn}}getSlide(t,e,i,s){const n=this._7[t.type]||Un,r=this.S7(t,e);return t.type===x.ProtoPlayspaceSlideTypeEnum.Cover?new Vn(e,t,this.Kr,this.gc,this.OQ,r,i,this.tT,this.A7(t),this.t9,this.cG):new n(e,t,this.Kr,this.gc,this.OQ,r,this.tT,this.A7(t),this.t9,this.cG)}S7(t,e){if(t.mediaType===i.ProtoMediaTypeEnum.Video)return new Zi(e,t,this.ph,this.fX,this.cj);if(t.mediaType===i.ProtoMediaTypeEnum.Image)return new _i(e,t,this.ph,this.fX);throw new Error("Slide not found")}A7(t){const{disableCTARendering:e,useVideoProgressBar:i}=this.cG,s=!this.w7;return{disableCTARendering:e||i&&s}}}class zn{constructor(t,e=0){this.y9=t,this.setCurrentSlide(e)}E9(t=this.y9.indexOf(this.x7)){return(0,Oe.QX)(this.y9,t)}get currentSlide(){return this.x7}getCurrentThumbnailUrlParams(t,e){return this.x7.media.getThumbnailUrlParams(t,e)}getCurrentMetadata(){return this.x7.metadata}setCurrentSlide(t){this.x7=this.y9[t]}get currentSlideIndex(){return this.E9().currentIndex}get nextSlideIndex(){return this.E9().nextIndex}get prevSlideIndex(){return this.E9().prevIndex}get firstSlideIndex(){return this.E9().firstIndex}get lastSlideIndex(){return this.E9().lastIndex}get slides(){return this.y9}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(t=this.E9().currentIndex){const e=[];for(let i=0,s=t,n=t;i<2;i++)s=this.E9(s).nextIndex,n=this.E9(n).prevIndex,e.push(this.y9[n],this.y9[s]);return(0,o.gX)(e)}}var Wn;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Wn||(Wn={}));class Yn extends Ot.tt{constructor(t,e){super(),this.mediator=t,this.k7=e,this.inTransition=!1,this.w9=0,this.E7=null,this.C7=!1,this.L7=400,this.M7=!0,this.R7=()=>{clearTimeout(this.E7),this.E7=null,this.C7=!1,this.B7(),this.w9=this.D7(this.N7),this.mediator.publish(this,st),this.F7()},this.j7=t=>{t.stopPropagation();t.target.parentElement===this.k7&&this.U7()&&(this.E7=setTimeout((()=>{this.C7&&this.q7()}),this.L7))},this.H7=t=>{t.stopPropagation();t.target.parentElement===this.k7&&this.inTransition&&this.C7&&this.U7()&&this.q7()},this.J7=(0,o.Sz)(this.k7.childNodes),this.k7.addEventListener("transitionstart",this.j7),this.k7.addEventListener("transitionend",this.H7)}destroy(){clearTimeout(this.E7),this.E7=null,this.k7.removeEventListener("transitionend",this.H7),this.k7.removeEventListener("transitionstart",this.j7)}setCurrentSlide(t,e,i=!0){this.N7=t,this.M7||(i=!1),i&&!this.G7(this.N7)&&this.z7()&&this.M7?this.inTransition||(this.w9<this.D7(this.N7)?this.W7(e):this.W7(Wn.Left)):this.Y7()}offsetSlides(t,e){this.inTransition||((0,I.cn)(e,kt.PK.NextSlide),this.B7(),this.X7(t))}removeNextClass(t){t.forEach((t=>{(0,I.IV)(t,kt.PK.NextSlide)}))}cleanLastSlide(t,e){(0,I.aQ)(t,"transform"),(0,I.IV)(e,kt.PK.NextSlide)}setAnimationAllowed(t){this.M7=t}X7(t){(0,I.T7)(this.Q7(),{transform:`translate(${t}px)`})}Y7(){(0,I.IV)(this.Q7(),kt.PK.CurrentSlide,kt.PK.SlideLeft,kt.PK.SlideRight),this.K7(this.D7(this.N7)),(0,I.cn)(this.N7,kt.PK.CurrentSlide),this.R7()}W7(t){this.K7(this.D7(this.N7)),this.Z7(),(0,I.cn)(this.N7,kt.PK.NextSlide),t===Wn.Right?((0,I.cn)(this.N7,kt.PK.CurrentSlide),(0,I.cn)(this.Q7(),kt.PK.SlideLeft)):t===Wn.Left&&((0,I.cn)(this.N7,kt.PK.CurrentSlide),(0,I.cn)(this.Q7(),kt.PK.SlideRight)),(0,I.aQ)(this.Q7(),"transform")}G7(t){return t===this.Q7()}F7(){this.mediator.publish(this,it)}K7(t){this.C7=!0,this.mediator.publish(this,et,{payload:{nextIndex:t}})}z7(){return(0,a.$K)(this.Q7())}D7(t){return(0,I.oG)(t,this.k7)}Q7(){return this.J7[this.w9]}Z7(){this.ttt(),this.ett()}B7(){this.itt(),this.stt()}stt(){(0,I.cn)(this.k7,kt.Gj.NoTransition)}ttt(){(0,I.IV)(this.k7,kt.Gj.NoTransition)}itt(){this.inTransition=!1}ett(){this.inTransition=!0}ntt(){(0,I.IV)(this.Q7(),kt.PK.CurrentSlide,kt.PK.SlideLeft,kt.PK.SlideRight),(0,I.L_)(this.N7,kt.PK.NextSlide,kt.PK.CurrentSlide)}q7(){this.ntt(),this.R7()}U7(){return(0,I.pv)(this.Q7(),kt.PK.SlideLeft)||(0,I.pv)(this.Q7(),kt.PK.SlideRight)}}function Xn(t){return t.type===i.ProtoMediaTypeEnum.Video}function Qn(t){return t.some((t=>t.type!==x.ProtoPlayspaceSlideTypeEnum.Default))}class Kn extends Ot.tt{constructor(t,e,i,s,n,r,o=[]){super(),this.mediator=t,this.Kr=e,this.kV=i,this.ott=s,this.att=n,this.htt=r,this.ctt=o,this.Zc=!1,this.dtt=!1,this.ltt=()=>{this.goToNextSlide()},this.utt=()=>{this.mediator.publish(this,nt,{payload:{elapsedTime:this.Js.timeElapsed,duration:this.ptt.currentSlide.media.duration,totalElapsedTime:this.ftt()+this.Js.timeElapsed}})},this.mtt=this.Kr.createElementByString(`<cnx class="${li.v$.Slider}"></cnx>`),this.ott.appendChild(this.mtt),this.To()}gtt(){this.kV.on((t=>{this.dtt=t,this.vtt.setAnimationAllowed(t)}))}ytt(t=Wn.Right){this.vtt.setCurrentSlide(this.ptt.currentSlide.$container,t)}btt(){let t;this.ptt.currentSlide.load(),t=this.htt?[...this.ptt.slides]:[...this.ptt.getAdjacentSlides()],t.forEach((t=>t.load()))}Itt(){this.vtt=new Yn(this,this.mtt),this.subscribe(et,this.vtt,(({payload:{nextIndex:t}})=>{this.dtt&&this.Js.disable(),this.mediator.publish(this,et,{payload:{nextSlide:this.ptt.slides[t]}})})),this.subscribe(it,this.vtt,(()=>{this.Js.reset(this.ptt.currentSlide.media.duration),this.ptt.slides.forEach((t=>t.media.reset()));const t={payload:{index:this.ptt.currentSlideIndex}};this.mediator.publish(this,it,t),this.Zc?this.ptt.currentSlide.media.play():this.pause()})),this.subscribe(st,this.vtt,(()=>{this.mediator.publish(this,st)}))}To(){const t=C.h.getGlobalContainer().resolve(re.f);this.Js=new oe.B(t,0,100),this.Js.onTimeElapsed.subscribe(this.ltt),this.Js.onTimeUpdate.subscribe(this.utt)}wtt(){this.Ptt=this.Ttt(this.ctt);const t=this._tt(this.Ptt),e=!Qn(this.ctt),i=this.ctt.map((i=>{const s=this.att.getSlide(i,this,t,e);return this.subscribe(K.CallToAction,s,(()=>{this.mediator.publish(this,K.CallToAction)})),this.relay(K.GeneralClickInteraction,s,this,this.mediator),this.subscribe(Be.C[Be.C.Next],s,(()=>{this.mediator.publish(this,Be.C[Be.C.Next])})),s}));this.ptt=new zn(i),this.Js.reset(this.ptt.currentSlide.media.duration),this.mtt.innerHTML="",this.ptt.slides.forEach((t=>{(0,I.jG)(t.$container,this.mtt),this.relay(J.XQ.Change,t.media,this,this.mediator)}))}_tt(t){return(0,a.r)(t)?Math.ceil(t/ct.Y0):1}Ttt(t){return t.map((t=>t.slideDuration)).reduce(((t,e)=>t+e),0)}ftt(){if(0===this.ptt.currentSlideIndex)return 0;const t=this.slidesMetadata.slice(0,this.ptt.prevSlideIndex+1).map((t=>t.slideDuration)).reduce(((t,e)=>t+e),0);return(0,bt.w4)(t)}Stt(){const t=this.ptt.getAdjacentSlides().map((t=>t.$container));this.vtt.removeNextClass(t)}Att(t){return(t>0?this.ptt.prevSlide:this.ptt.nextSlide).$container}getNextSlide(){return this.ptt.nextSlide}setCurrentSlide(t,e){this.vtt.inTransition||(this.ptt.currentSlide&&this.ptt.currentSlide.media.pause(),this.ptt.setCurrentSlide(t),this.btt(),this.ytt(e))}getCurrentSlide(){if(this.ptt)return this.ptt.currentSlide}getCurrentThumbnailUrlParams(t,e){if(this.ptt)return this.ptt.getCurrentThumbnailUrlParams(t,e)}getCurrentMetadata(){if(this.ptt)return this.ptt.getCurrentMetadata()}goToNextSlide(){if(this.ptt.currentSlideIndex===this.ptt.lastSlideIndex)return this.vtt.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,rt);this.setCurrentSlide(this.ptt.nextSlideIndex,Wn.Right)}goToPrevSlide(){this.setCurrentSlide(this.ptt.prevSlideIndex,Wn.Left)}resetSlider(){this.setCurrentSlide(this.ptt.firstSlideIndex)}setVolume(t){this.ptt&&this.ptt.slides.forEach((e=>{e.media.volume=t}))}play(){this.Zc=!0,this.Js.start(),this.ptt.currentSlide.media.play()}pause(){this.Zc=!1,this.Js.stop(),this.ptt.currentSlide.media.pause()}stop(){this.ptt.setCurrentSlide(this.ptt.firstSlideIndex),this.btt(),this.pause(),this.vtt.setCurrentSlide(this.ptt.currentSlide.$container,null,!1)}get remainingTime(){return this.Js.timeRemaining}setQuality(t){this.ptt.slides.forEach((e=>{if(Xn(e.media)){const i={height:e.media.getClosestSourceQuality(t.height).videoHeight,quality:t.quality};e.media.setQuality(i)}}))}getQuality(){const{currentSlide:t}=this.ptt;if(!Xn(t.media))return;const{getClosestSourceQuality:e,currentQuality:i}=t.media;return e(i.height).videoHeight}start(t){try{this.wtt(),this.Itt(),this.gtt()}catch(e){(0,T.nF)({sessionId:t,message:"SlidesManager_start",exception:e.message,callStack:e.stack,level:T.D_.CRITICAL})}}offsetSlides(t){if(this.Stt(),0===t)return;const e=this.Att(t);this.vtt.offsetSlides(t,e)}destroy(){this.Js.disable(),this.vtt&&this.vtt.destroy(),this.ptt.slides.forEach((t=>t.media.destroy()))}get isPlaying(){return this.Zc}onPlayerContainerResize(){(0,a.$K)(this.ptt)&&(0,o.BZ)(this.ptt.slides)&&this.ptt.slides.forEach((t=>t.media.onSlideResizeCallback()))}get slides(){return(0,a.$K)(this.ptt)&&(0,o.BZ)(this.ptt.slides)?this.ptt.slides:[]}get currentSlideIndex(){return(0,a.$K)(this.ptt)?this.ptt.currentSlideIndex:0}updateCapabilityMetadata(t,e){if(!(0,a.$K)(this.ptt)||!(0,o.BZ)(this.ptt.slides))return;const i=this.ptt.slides[t];i&&i.updateCapabilityMetadata(e)}get slidesMetadata(){return this.ctt}get totalSlidesDurationSeconds(){return this.Ptt}}const Zn="stateChanged",tr="contentReset";class er{constructor(t,e,i,s,n,r,o){this.mediator=t,this.xtt=e,this.UY=i,this.kK=s,this.EK=n,this.ktt=r,this.Ett=o,this.MK=!1,this.Ctt=!1,this.Ott=!1,this.Dq=!1,this.RK=!1,this.Ltt=!0,this.tZ=()=>{this.MK=!0,this.eZ===J.Ez.PlayingState?this.play(!1):this.pause(!1)},this.oZ=()=>{switch(this.Ctt=!0,this.ktt){case x.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case x.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.UK=null,this.qK=null,this.Ett&&(this.MK=!0)}XK(t){this.UK!==t&&(this.qK=this.UK,this.UK=t,this.mediator.publish(this,Zn,{payload:this.UK}))}Mtt(t){return this.UK===t}resume(){this.qK&&this.XK(this.qK)}stop(){this.xtt.stop(),this.XK(J.Ez.StoppedState)}handleSlidesEnd(){this.rZ()}ZK(){this.XK(J.Ez.PrerollState)}rZ(){this.UK!==J.Ez.PostrollState&&(this.mediator.publish(this,tt.ContentEnd),this.EK?this.XK(J.Ez.PostrollState):this.oZ())}Rtt(t){return t===J.Ez.PrerollState||t===J.Ez.PostrollState}Btt(t){return t===J.Ez.PrerollState&&this.MK||t===J.Ez.PostrollState&&this.Ctt}setViewabilityState(t){this.Dq=t}play(t){if(this.eZ=J.Ez.PlayingState,!(this.Mtt(J.Ez.PlayingState)||this.Mtt(J.Ez.HiddenState)&&this.Ott||this.Rtt(this.UK)&&!this.Btt(this.UK)||this.Mtt(J.Ez.StoppedState)&&!t))if(!this.kK||this.MK){if(this.Mtt(J.Ez.StoppedState))return this.MK=!1,void this.reset();this.UY.setDuration(this.xtt.remainingTime),this.xtt.play(),this.XK(J.Ez.PlayingState),this.Ltt&&(this.Ltt=!1,this.mediator.publish(this,tt.ContentStart))}else this.ZK()}reset(){this.mediator.publish(this,tr),this.UK=null,this.Ctt=!1,this.Ltt=!0,this.xtt.resetSlider(),this.play(!1)}pause(t){this.eZ=J.Ez.PausedState,this.Mtt(J.Ez.PausedState)||this.Mtt(J.Ez.HiddenState)||this.Rtt(this.UK)&&!this.Btt(this.UK)||this.Mtt(J.Ez.StoppedState)&&!t||(this.xtt.pause(),this.XK(J.Ez.PausedState))}pauseToggle(){if(this.Mtt(J.Ez.PausedState)||this.Mtt(J.Ez.PlayingState))return this.Mtt(J.Ez.PausedState)&&this.RK?(this.RK=!1,void this.play(!1)):this.Mtt(J.Ez.PlayingState)?(this.RK=!0,void this.pause(!1)):void 0}hide(){this.xtt.pause(),this.Ott=!0,this.XK(J.Ez.HiddenState)}show(){this.Mtt(J.Ez.HiddenState)&&(this.Ott=!1,this.qK!==J.Ez.PostrollState?this.qK!==J.Ez.PrerollState?this.Dq?this.goToNextSlide():this.eZ===J.Ez.PlayingState?this.play(!1):this.pause(!1):this.tZ():this.oZ())}setCurrentSlide(t){this.Rtt(this.UK)&&!this.Btt(this.UK)||this.xtt.setCurrentSlide(t)}goToNextSlide(){this.Rtt(this.UK)&&!this.Btt(this.UK)||(this.xtt.goToNextSlide(),this.Mtt(J.Ez.StoppedState)||this.play(!1))}goToPrevSlide(){this.Rtt(this.UK)||(this.play(!1),this.xtt.goToPrevSlide())}exitRollBreak(){this.UK!==J.Ez.PostrollState?this.tZ():this.oZ()}set hasPreroll(t){this.kK=t,this.MK=!0}set hasPostroll(t){this.EK=t}get playbackIntention(){return this.eZ}}class ir{constructor(t){this.jo=t,this.Dtt=!1}isUIHidden(){return this.Dtt}startAutoHide(){this.Ntt=setTimeout((()=>{this.Ftt()}),3e3)}showUi(){clearTimeout(this.Ntt),this.$tt()}resetAutoHideTimer(){clearTimeout(this.Ntt),this.$tt(),this.startAutoHide()}Ftt(){(0,I.cn)(this.jo,kt.s6.HideUI),this.Dtt=!0}$tt(){(0,I.IV)(this.jo,kt.s6.HideUI),this.Dtt=!1}}var sr=h(1191);class nr{constructor(t){this.qZ=t}o1(t){return this.qZ.filter((e=>t.instance!==e.instance))}f1(t){return this.qZ.find((({name:e})=>t===e))}S1(t){t.forEach((({name:t})=>{this.closeContextMenu(t)}))}toggleContextMenu(t,e={}){const i=this.f1(t);if(i.instance.isOpen)return this.closeContextMenu(t),!1;{const{targetCoordinates:t,holdPause:s}=e,n=t||i.instance.getAnchorCoordinatesTo(i.linkedComponent);return i.instance.open(n,s,i.linkedComponent),this.S1(this.o1(i)),!0}}isAnyContextMenuOpen(){return!!this.qZ.find((({instance:t})=>t.isOpen))}closeContextMenu(t){const e=this.f1(t);e.instance.isOpen&&e.instance.close()}closeAllContextMenus(){this.S1(this.qZ)}setCloseAttribute(t){t.getContainer().setAttribute("aria-expanded","false")}setOpenAttribute(t){t.getContainer().setAttribute("aria-expanded","true")}}class rr extends ss.d{enterState(){super.enterState();const t=this.Ic.getComponent(ts.r.PlayspaceProgressBar);t&&t.pauseProgress();const e=this.Ic.getComponent(ts.r.CtaButton);e&&e.pauseProgress(),this.Ic.interactionService.disableSpecialInteractions(this.Ic.$container)}exitState(){super.exitState()}updateDuration(){}}class or extends rr{enterState(){super.enterState(),this.Ic.interactionService.disableSpecialInteractions(this.Ic.$container)}exitState(){super.exitState()}updateDuration(){const t=this.Ic.getComponent(ts.r.PlayspaceProgressBar);t&&t.resetProgress()}}class ar extends os.tt{enterState(){super.enterState();const t=this.Ic.getComponent(ts.r.PlayspaceProgressBar);t&&t.startProgress();const e=this.Ic.getComponent(ts.r.CtaButton);e&&e.startProgress(),this.Ic.interactionService.enableSpecialInteractions(this.Ic.$container),this.Ic.autoHideHandler&&this.Ic.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.Ic.autoHideHandler&&this.Ic.autoHideHandler.showUi()}updateDuration(){const t=this.Ic.getComponent(ts.r.PlayspaceProgressBar);t&&t.startProgress()}}class hr extends rr{enterState(){super.enterState(),(0,I.cn)(this.Ic.$uiContainer,kt.s_.Preroll);const t=this.Ic.getComponent(ts.r.Loader);t&&t.show(),this.Ic.interactionService.disableSpecialInteractions(this.Ic.$container)}exitState(){super.exitState(),(0,I.IV)(this.Ic.$uiContainer,kt.s_.Preroll);const t=this.Ic.getComponent(ts.r.Loader);t&&t.hide()}}class cr extends rr{enterState(){super.enterState(),this.Ic.interactionService.disableSpecialInteractions(this.Ic.$container)}exitState(){super.exitState()}}class dr extends is.${constructor(t,e,i,s,n,r,o,a,h){super(t,e,i,n,new Rn(i,h,s,e,r)),this.mediator=t,this.$container=e,this.globalDomUtilsService=i,this.settings=r,this.Go=o,this.interactionService=h,this.Vtt=80,this.jtt=[ts.r.SlideTitle,ts.r.CtaButton,ts.r.TopTitle,ts.r.TextLabel],this._c={[J.Ez.PlayingState]:new ar(this),[J.Ez.PausedState]:new rr(this),[J.Ez.StoppedState]:new cr(this),[J.Ez.HiddenState]:new or(this),[J.Ez.PrerollState]:new hr(this),[J.Ez.PostrollState]:new hr(this)},this.W8=new Dn,this.t9=this.$container.querySelector(`.${li.v$.Footer}`),this.Utt(),this.c3(),this.o3(),this.qtt(),this._c[a].enterState(),this.X8(),this.Q8(!1),this.Htt(),this.f5=this.$uiContainer.querySelector(`.${li.v$.Content}`)}Utt(){const t=this.getComponent(ts.r.SlideTitle);t&&t.setFooterElement(this.footer)}setIsPinnedTitle(t){const e=this.getComponent(ts.r.SlideTitle);e&&e.setIsPinnedTitle(t)}Jtt(t,e){const i=this.getComponent(ts.r.PlayspaceProgressBar);i&&i.resizeProgressBar(t,e)}Rc(t,e,i){switch(this.r3(t),t){case Be.C[Be.C.Mute]:this.mediator.publish(this,Be.C[Be.C.Volume],{payload:0});break;case Be.C[Be.C.Unmute]:this.mediator.publish(this,Be.C[Be.C.Volume],{payload:1});break;case ts.r[ts.r.CloseButton]:case ts.r[ts.r.PinnedCloseButton]:this.mediator.publish(this,Be.C[Be.C.Close]);break;case ts.r[ts.r.MoreButton]:const i={holdPause:!0};this.s3.toggleContextMenu(ts.r.PlayspaceSettingsMenu,i);break;case Be.C[Be.C.AboutClick]:this.globalDomUtilsService.open(l.br,ki.bS.Blank);break;case Be.C[Be.C.Quality]:e.payload&&this.mediator.publish(this,Be.C[Be.C.Quality],{payload:e.payload});break;case ts.r[ts.r.UpNextButton]:this.mediator.publish(this,Be.C[Be.C.Next]);break;case ts.r[ts.r.PreviousButton]:this.mediator.publish(this,Be.C[Be.C.Prev]);break;case K.CallToAction:(0,a.QM)(e.payload)?this.mediator.publish(this,K.CallToAction,e):this.mediator.publish(this,Be.C[Be.C.Next]);break;default:this.mediator.publish(this,t,e)}}r3(t){switch(t){case K.CallToAction:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.UrlClick});break;case pi.Z[pi.Z.Scroll]:return;case ts.r[ts.r.VolumeButton]:case ts.r[ts.r.VolumeProgress]:case ts.r[ts.r.VolumeControls]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.VolumeClick});break;case ts.r[ts.r.PlayButton]:case ts.r[ts.r.BigPlayButton]:case ts.r[ts.r.ClickToPlayButton]:case Be.C[Be.C.Play]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.PlayClick});break;case Be.C[Be.C.Pause]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.PauseClick});break;case Be.C[Be.C.Next]:case ts.r[ts.r.UpNextButton]:case ts.r[ts.r.UpNextBox]:case pi.Z[pi.Z.TapRight]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.NextClick});break;case Be.C[Be.C.Prev]:case ts.r[ts.r.PreviousButton]:case pi.Z[pi.Z.TapLeft]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.PreviousClick});break;case Be.C[Be.C.Mute]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.MuteClick});break;case Be.C[Be.C.Unmute]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.UnmuteClick});break;case Be.C[Be.C.Close]:case ts.r[ts.r.CloseButton]:case ts.r[ts.r.PinnedCloseButton]:this.mediator.publish(this,K.GeneralClickInteraction,{payload:i.ProtoMediaClickTypeEnum.CloseClick})}}o3(){const t=[],e=this.Gtt();e&&t.push({instance:e,linkedComponent:this.getComponent(ts.r.MoreButton),name:ts.r.PlayspaceSettingsMenu}),this.s3=new nr(t)}qtt(){this.settings.isMobile&&this.ztt(),this.interactionService.register(this.$uiContainer,this,this.interactionService,{},[fi.WR.Hold,fi.WR.Swipe]);const t=this.interactionService.getNonInterruptibleInteractions();Object.keys(pi.Z).filter((t=>isNaN(parseInt(t,10)))).forEach((e=>{this.subscribe(e,this.interactionService,(i=>{const s=!t.includes(pi.Z[e]);if(this.autoHideHandler&&s){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.r3(e),this.mediator.publish(this,e,i)}))}))}ztt(){this.autoHideHandler=new ir(this.$container)}c3(){const t=`id_${this.Go}`;this.$uiContainer.id=t;const{bodyFontFamily:e,titleFontFamily:i}=this.S2(),s=`\n            #${t} .${kt.iu.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${t} .${kt.iu.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n            #${t} .${kt.iu.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${t} .${kt.iu.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${t} .${kt.iu.TitleComponent}.${kt.iu.TitleLink}:${this.settings.isMobile?"active":"hover"} .${Hs.Text} {\n                background-color: ${(0,w.Xf)(this.settings.accentColorList.background,this.Vtt)}\n            }\n            #${t} .${kt.iu.SlideProgressBar} .${kt.iu.ProgressFill}.${kt.iu.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:kt.QO.Icons}\n            }\n            #${t} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${t} .${kt.ed.InheritTitleFontFamily} {\n                font-family: ${i} !important;\n            }\n            #${t} .${kt.ed.InheritBodyFontFamily} {\n                font-family: ${e} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(s)}S2(){const{bodyFontFamily:t,titleFontFamily:e}=this.settings.fontFamilySettings;return(0,a.QM)(t)&&(0,a.QM)(e)?this.settings.fontFamilySettings:{titleFontFamily:(0,I.nw)(this.$container),bodyFontFamily:(0,I.fj)(this.$container)}}Htt(){this.Wtt()&&this.hideExpandButton()}Wtt(){return this.Ytt()||!this.Xtt()}Ytt(){return this.settings.os===xe.M.Ios}Xtt(){return!0===this.settings.expandButtonEnabled}Qtt(t={}){const e=this.getComponent(ts.r.CtaButton);e&&(0,a.QM)(t.label)&&e.changeLabel(t.label)}hideExpandButton(){this.Gtt().hideExpandButton()}showExpandButton(){this.Gtt().showExpandButton()}Gtt(){return this.getComponent(ts.r.PlayspaceSettingsMenu)}X8(t=[]){this.W8.setCapabilityList(t)}Q8(t=!0){const{excludedComponents:e,includedComponents:i}=this.W8.getComponentList();e.map((t=>this.getComponent(t))).forEach((e=>e&&e.hideComponent(t))),i.map((t=>this.getComponent(t))).forEach((e=>e&&e.showComponent(t)))}updateQualityMenu(t){const e=this.getComponent(ts.r.PlayspaceSettingsMenu);e&&e.updateQualityMenu(t)}updateQuality(t){const e=this.getComponent(ts.r.PlayspaceSettingsMenu);e&&e.updateQuality(t)}setTotalSlides(t,e){var i;const s=this.getComponent(ts.r.PlayspaceProgressBar);s&&s.setSlides(t),null===(i=this.getComponent(ts.r.TotalDurationLabel))||void 0===i||i.setTime(e)}setDuration(t){const e=this.getComponent(ts.r.PlayspaceProgressBar);e&&(e.setDuration(t),this.currentState.updateDuration())}setCurrentIndex(t){const e=this.getComponent(ts.r.PlayspaceProgressBar);e&&e.setCurrentIndex(t)}updateVolume(t){const e=this.getComponent(ts.r.VolumeButton);e&&e.setState(t>0?sr.u.Unmute:sr.u.Mute)}expand(){this.Gtt().setExpand()}collapse(){this.Gtt().setCollapse()}onResizeUi(t,e){this.s3.closeAllContextMenus(),this.Jtt(t,e)}onFirstTimeInView(){const t=this.getComponent(ts.r.TopTitle);t&&t.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(t){(0,I.SH)(this.f5,t)}get $mediaContainer(){return this.f5}onSlideTransitionStart(t){const e=this.getComponent(ts.r.PlayspaceProgressBar);e&&e.pauseProgress(),this.X8(t),this.Q8(),this.jtt.forEach((e=>{const i=this.getComponent(e);i&&i.onSlideTransitionStart&&i.onSlideTransitionStart(t)}))}onSlideTransitionEnd(){this.jtt.forEach((t=>{const e=this.getComponent(t);e&&e.onSlideTransitionEnd&&e.onSlideTransitionEnd()}))}onSlideTimeUpdate(t,e,i){this.jtt.forEach((i=>{const s=this.getComponent(i);s&&s.onSlideTimeUpdate&&s.onSlideTimeUpdate(t,e)}));const s=this.getComponent(ts.r.ElapsedTimeLabel);null==s||s.setTime(i/ct.s_)}updateCapabilityMetadata(t){if(t.type===ci.CtaButton)this.Qtt(t.metadata)}get footer(){return this.t9}destroy(){this.interactionService.unregisterAll(this),this.unsubscribeAll(this),super.destroy()}getComponent(t){return super.getComponent(t)}}class lr{constructor(t,e){this.W5=t,this.Ktt=e}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps ${this.Ztt()}">\n            [[${ts.r.OverlayComponent}]]\n            <cnx class="${li.v$.Content}">\n                [[${ts.r.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                        ${this.tet()}\n                        <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                            <cnx class="cnx-ui-ps-branding">\n                                [[${ts.r.TopTitle}]]\n                            </cnx>\n                            <cnx class="cnx-ui-ps-btns">\n                                <cnx class="cnx-ui-btn ${kt.s6.ContextController}">[[${ts.r.MoreButton}]]</cnx>\n                                <cnx class="cnx-ui-btn cnx-close-button">[[${ts.r.CloseButton}]]</cnx>\n                            </cnx>\n                        </cnx>\n                    </cnx>\n                    <cnx class="cnx-ui-ps-center cnx-ui-ps-side-mg">\n                        ${this.eet()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg">\n                        ${this.iet()}\n                        ${this.net()}\n                    </cnx>\n                    [[${ts.r.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${li.v$.Footer}">\n                ${this.ret()}\n            </cnx>\n            [[${ts.r.Loader}]]\n        </cnx>\n        `.trim()}tet(){return this.Ktt?"":this.oet()}iet(){if(!this.Ktt)return"";return this.oet(!0)}eet(){if(!this.Ktt)return"";return this.aet(!1)}net(){return this.Ktt?"":this.aet()}oet(t=!1){const e=this.W5.disableStoryProgressBarRendering?"":`[[${ts.r.PlayspaceProgressBar}]]`,i=t?`<cnx class="cnx-ui-btn">[[${ts.r.VolumeButton}]]</cnx>`:"";return`<cnx class="cnx-ui-ps-nav ${this.Ktt?"cnx-ui-ps-video-progress-bar":"cnx-ui-ps-top-progress-bar"}">\n        ${i}\n        ${this.het(ts.r.ElapsedTimeLabel)}\n        ${e}\n        ${this.het(ts.r.TotalDurationLabel)}\n        </cnx>`}het(t){return this.W5.disableStoryProgressBarRendering||!this.Ktt?"":`[[${t}]]`}get cet(){return this.W5.isPinned?`<cnx class="cnx-ui-btn cnx-pinned-close-button">[[${ts.r.PinnedCloseButton}]]</cnx>`:""}ret(){const t=this.W5.disableTitleRendering?"":`[[${ts.r.SlideTitle}]]`;return`<cnx class="cnx-ui-ps-content cnx-ui-ps-side-mg">\n            ${this.cet}\n            ${t}\n        </cnx>`}aet(t=!0){const e=t?`<cnx class="cnx-ui-btn">[[${ts.r.VolumeButton}]]</cnx>`:"";return`<cnx class="cnx-ui-ps-controls--wrapper">\n        <cnx class="cnx-ui-ps-controls">\n            <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${ts.r.PreviousButton}]]</cnx>\n            <cnx class="cnx-ui-btn">[[${ts.r.PlayButton}]]</cnx>\n            <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${ts.r.UpNextButton}]]</cnx>\n            ${e}\n        </cnx>\n    </cnx>`}Ztt(){return this.Ktt?li.w.VideoLayout:""}}var ur=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class pr extends Ot.tt{constructor(t,e,i,s,n,r,o){super(),this.mediator=t,this.Kr=e,this.OQ=i,this.cG=s,this.ph=n,this.ott=r,this.det=o,this.oj=new ui.t(x.ProtoPlayspaceMediaMetadataResponse,"PlayspaceContentHandler"),this.let=0,this.uet=!1,this._Z=new le.X(!1),this.pet=new le.X(!1),this.fet=t=>{t&&(this.UY.onFirstTimeInView(),this.ph.services.ViewabilityService.off(this.ott,this.fet))},this.met()}QV(t){return new Promise(((e,i)=>{this.oj.fetchMetadata(t).then((t=>{if(window.parent.cnx_ps_slide_list&&(0,j.Ph)("cnx_ps_slide_list",this.ph.config.pageUrl)&&(t.slides=[...window.parent.cnx_ps_slide_list,...t.slides]),(0,a.$K)(this.cG.slideOrdering)&&(t.order=this.cG.slideOrdering),t.slides=this.reOrderSlides(t.slides,t.order),t.slides=this.vet(t.slides),t.slides=this.yet(t.slides),t.slides.length>=2)e(t);else{if(this.uet)return void i({message:"fallbackstory_already_used"});this.uet=!0,this.bet().then((t=>{const i=this.ph.services.UrlSuffixerService.appendParamsToUrl(`${f.n.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`);e(this.QV(i))})).catch((t=>{(0,T.nF)({level:T.D_.CRITICAL,message:"PlayspaceContentH_error_getting_default_story",sessionId:this.ph.config.sessionId}),i(t)}))}})).catch((t=>{i(t)}))}))}bet(){return new Promise(((t,e)=>{this.Iet&&t(this.Iet),H.n.sendProtoRequest({protoResponse:x.ProtoFallbackStoryResponse,endpoint:f.n.endPoints.api.fallbackstory,queryParams:{[l.cc]:f.n.tier},shouldLogErrors:!0}).then((e=>{this.Iet=e,t(e)})).catch((t=>{e(t)}))}))}vet(t){const e=["newsid"],{hostname:i,pathname:s,search:n}=this.wet(this.ph.config.appPageURL),r={};(0,a.QM)(n)&&e.forEach((t=>{n.indexOf(t)>-1&&(r[t]=(0,j.Ph)(t,n))}));let o=`${i}${s}`;return Object.keys(r).forEach((t=>{o=(0,j.Bp)(o,t,r[t])})),t.filter((t=>{const e=(0,w.bx)(t.clickUrl);return!(e&&e.hostname+e.pathname===o)}))}wet(t){const{hostname:e,pathname:i,search:s}=(0,a.QM)(t)?(0,w.bx)(t):this.Kr.getGlobalLocationProperties();return{hostname:e,pathname:i,search:s}}yet(t){return t.filter((t=>t.type!==x.ProtoPlayspaceSlideTypeEnum.Stock))}reOrderSlides(t,e){const i=(t,e)=>t.title.localeCompare(e.title)>=0?1:-1;switch(e){case x.ProtoPlayspaceSlideOrderEnum.Random:return t.map((t=>({value:t,sort:Math.random()}))).sort(((t,e)=>t.sort-e.sort)).map((({value:t})=>t));case x.ProtoPlayspaceSlideOrderEnum.AlphabeticalAscending:return t.sort(((t,e)=>i(t,e)));case x.ProtoPlayspaceSlideOrderEnum.AlphabeticalDescending:return t.sort(((t,e)=>-1*i(t,e)));default:return t}}Pet(){const{browserType:t}=this.ph.config.browser,{os:e,osVersion:s}=this.ph.config.os;this.xtt=new Kn(this,this.Kr,this.ph.services.PageFocusService,this.UY.$mediaContainer,new Gn(this.ph,this.Kr,this.ph.services.InteractionService,this.OQ,this.cG.soundMode===i.ProtoPlayerSoundMode.On?1:0,{browser:t,os:e,osVersion:s},this.ph.config.isMobile,this.UY.footer,this.cG,Qn(this.Tet.slides)),this.cG.isSeoTraffic,this.Tet.slides)}met(){this._et={logoUrl:this.cG.logoUrl,isMobile:this.ph.config.isMobile,isPinned:this.cG.floatingSettings.isPinnedPlayerFloating&&this.cG.floatingSettings.floatingMode===i.ProtoPlayerFloatingMode.Always,closeButtonMode:this.cG.closeButtonMode,floatingCloseButtonMode:this.cG.floatingSettings.floatingCloseButtonMode,isCloseButton:this.cG.isCloseButton,sharingDestinations:this.cG.sharingDestinations,os:this.ph.config.os.os,expandButtonEnabled:this.cG.uiComponentsVisibility.expandButton,primaryColorList:{background:this.cG.primaryColorList.background||kt.QO.PrimaryBackground,foreground:this.cG.primaryColorList.foreground||kt.QO.PrimaryForeground},secondaryColorList:{background:this.cG.secondaryColorList.background||kt.QO.SecondaryBackground,foreground:this.cG.secondaryColorList.foreground||kt.QO.SecondaryForeground},accentColorList:{background:this.cG.accentColorList.background,foreground:this.cG.accentColorList.foreground||kt.QO.AccentForeground},useAccentColorForProgressBar:this.cG.useAccentColorForProgressBar,disableClickUrl:this.cG.disableClickUrl,fontFamilySettings:this.cG.fontFamilySettings}}CZ(t){const e=this.cG.useVideoProgressBar&&t,s=new lr({disableStoryProgressBarRendering:this.cG.disableStoryProgressBarRendering,disableTitleRendering:this.cG.disableTitleRendering,isPinned:this.cG.floatingSettings.isPinnedPlayerFloating},e);this.UY=new dr(this,this.ott,this.ph.services.GlobalDomUtilsService,this.ph.services.ResizeObserver,s.template,this._et,this.ph.config.appId,this.cG.playbackMode===i.ProtoPlayerPlaybackModeEnum.ClickToPlay?J.Ez.StoppedState:J.Ez.PausedState,this.ph.services.InteractionService),this.pet.next(!0),this.UY.setMediaContainerRatio(this.det.getContentRatioContainer()),this.UY.show()}hd(){this.subscribe(et,this.xtt,(({payload:{nextSlide:t}})=>{const e=t;let s=[];e.media.type===i.ProtoMediaTypeEnum.Video&&(s=e.media.getAvailableQualities(),this.UY.updateQuality(e.media.currentQuality)),this.UY.updateQualityMenu(s),this.UY.onSlideTransitionStart(e.slideCapabilityList),e.onSlideTransitionStart(e.slideCapabilityList)})),this.subscribe(st,this.xtt,(()=>{this.UY.onSlideTransitionEnd()})),this.subscribe(nt,this.xtt,(({payload:{elapsedTime:t,duration:e,totalElapsedTime:i}})=>{this.UY.onSlideTimeUpdate(t,e,i)})),this.subscribe(it,this.xtt,(({payload:{index:t}})=>{this.UY.setCurrentIndex(t),this.UY.setDuration(this.xtt.remainingTime),this.mediator.publish(this,Z.ChangeSlide)})),this.subscribe(rt,this.xtt,(()=>{this.kZ.handleSlidesEnd()})),this.subscribe(J.XQ.Change,this.xtt,(({payload:t})=>{const e=this.xtt.getCurrentSlide();e&&e.media.type===i.ProtoMediaTypeEnum.Video&&this.UY.updateQuality(e.media.currentQuality),this.mediator.publish(this,J.XQ.Change,{payload:t})})),this.subscribe(Be.C[Be.C.Play],this.UY,(()=>{this.mediator.publish(this,Q.Uh.UserInteraction,{payload:{playback:!0}});this.play(!0)})),this.subscribe(Be.C[Be.C.Pause],this.UY,(()=>{this.mediator.publish(this,Q.Uh.UserInteraction,{payload:{playback:!1}});this.pause(!0)})),this.subscribe(Be.C[Be.C.Volume],this.UY,(({payload:t})=>{this.volume=t,this.mediator.publish(this,Q.Uh.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,Be.C[Be.C.Volume],{payload:{volume:t}})})),this.subscribe(Be.C[Be.C.Close],this.UY,(()=>{this.mediator.publish(this,Q.Uh.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,Be.C[Be.C.Close])})),this.subscribe(Be.C[Be.C.LogoClicked],this.UY,(()=>{this.mediator.publish(this,Be.C[Be.C.LogoClicked])})),this.subscribe(K.ProgressBarItemClicked,this.UY,(({payload:t})=>{this.mediator.publish(this,Q.Uh.UserInteraction,{payload:{playback:!0}}),this.setSlide(t),this.mediator.publish(this,K.ProgressBarItemClicked,{payload:t})})),this.subscribe(K.CallToAction,this.xtt,(()=>{this.mediator.publish(this,K.CallToAction)})),this.subscribe(Be.C[Be.C.Expand],this.UY,(()=>{this.mediator.publish(this,Be.C[Be.C.Expand])})),this.subscribe(Be.C[Be.C.Collapse],this.UY,(()=>{this.mediator.publish(this,Be.C[Be.C.Collapse])})),this.subscribe(pi.Z[pi.Z.HoldStart],this.UY,(()=>{this.kZ.pauseToggle()})),this.subscribe(pi.Z[pi.Z.HoldEnd],this.UY,(()=>{this.kZ.pauseToggle()})),this.subscribe(pi.Z[pi.Z.TapLeft],this.UY,(()=>{this.Aet(),this.goToPrevSlide()})),this.subscribe(pi.Z[pi.Z.TapRight],this.UY,(()=>{this.Aet(),this.goToNextSlide()})),this.subscribe(pi.Z[pi.Z.SwipeEnd],this.UY,(({payload:t})=>{t===fi.Av.Left?this.kZ.goToNextSlide():this.kZ.goToPrevSlide()})),this.subscribe(pi.Z[pi.Z.SwipeMove],this.UY,(({payload:t})=>{this.xtt.offsetSlides(t)})),this.subscribe(Be.C[Be.C.Quality],this.UY,(({payload:t})=>{this.xtt.setQuality(t)})),this.subscribe(Be.C[Be.C.Next],this.UY,(()=>{this.Aet(),this.goToNextSlide()})),this.subscribe(Be.C[Be.C.Next],this.xtt,(()=>{this.Aet(),this.goToNextSlide()})),this.subscribe(Be.C[Be.C.Prev],this.UY,(()=>{this.Aet(),this.goToPrevSlide()})),this.relay(K.GeneralClickInteraction,this.UY,this,this.mediator),this.relay(K.GeneralClickInteraction,this.xtt,this,this.mediator)}xet(t,e){const i=(0,a.QM)(t)?t:this.cG.storyId,s=(0,a.QM)(e)?e:this.cG.activeVersion;return this.ph.services.UrlSuffixerService.appendParamsToUrl(`${f.n.endPoints.base.metadata}${i}/${s}.bin`)}ket(){return ur(this,void 0,void 0,(function*(){if((0,a.$K)(this.cG.storyMetadata))return this.cG.storyMetadata;{let{storyId:t,activeVersion:e}=this.cG;const i=(0,j.Ph)("cnx_force_fallback",this.ph.config.pageUrl);i&&(t="00000000-0000-0000-0000-000000000002",e=i);const s=this.xet(t,e);return(0,a.QM)(e)?this.QV(s).catch((()=>this.Eet())):this.Eet()}}))}Eet(){return ur(this,void 0,void 0,(function*(){return this.bet().then((t=>{const e=this.ph.services.UrlSuffixerService.appendParamsToUrl(`${f.n.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`);return this.QV(e)})).then((t=>(this.uet=!0,t)))}))}floatingChanged(t){this.UY.setIsPinnedTitle(t)}Cet(){this.xtt.start(this.ph.config.sessionId),this.UY.setTotalSlides(this.Tet.slides.length,this.xtt.totalSlidesDurationSeconds);const t=this.cG.storyPosition&&this.cG.storyPosition<this.Tet.slides.length?this.cG.storyPosition:0;this.xtt.setCurrentSlide(t),this.mediator.publish(this,tt.ContentHandlerReady),this._Z.next(!0)}Oet(t,e){e.slides=e.slides.map(((t,i)=>Object.assign(Object.assign({},t),{slideIndex:i,storyName:e.storyName,storyTitle:e.storyTitle,publisherName:this.cG.publisherName}))),this.Tet=Object.assign(Object.assign({},t),e)}Let(){return ur(this,void 0,void 0,(function*(){try{let t=this.cG.storyId,e=this.cG.activeVersion;if(this.uet){const i=yield this.bet();t=i.storyId,e=i.activeVersionId}const i=yield wt.k.loadInsights({insightsInputType:Pt.i.Story,id:t,versionId:e});return{storyId:t,activeVersion:e,insights:i}}catch(t){return{}}}))}DZ(){const{preRollBreak:t,postRollBreak:e}=this.cG,i=(0,a.r)(t),s=(0,a.r)(e);this.kZ=new er(this,this.xtt,this.UY,i,s,this.cG.endOfSlideCycleMode,null!==this.cG.storyPosition),this.Met()}Met(){this.subscribe(Zn,this.kZ,(({payload:t})=>{this.UY.changeState(t);const e=this.xtt.getCurrentSlide();e&&e.changeState(t),this.mediator.publish(this,tt.StateChanged,{payload:t})})),this.subscribe(tr,this.kZ,(()=>{this.mediator.publish(this,tt.NewStory)})),this.relay([tt.ContentStart,tt.ContentEnd],this.kZ,this,this.mediator)}Aet(){this.mediator.publish(this,Q.Uh.UserInteraction,{payload:{playback:!0}})}set hasPostroll(t){this.kZ.hasPostroll=t}set hasPreroll(t){this.kZ.hasPreroll=t}setViewabilityState(t){this.kZ.setViewabilityState(t)}goToNextSlide(){this.kZ.goToNextSlide()}goToPrevSlide(){this.kZ.goToPrevSlide()}getNextSlide(){return this.xtt.getNextSlide()}getCurrentThumbnailUrlParams(t,e){return this.xtt.getCurrentThumbnailUrlParams(t,e)}getCurrentMetadata(){return this.xtt.getCurrentMetadata()}getCurrentStoryMeta(){return this.Tet}start(){return ur(this,void 0,void 0,(function*(){try{const t=yield this.ket(),e=yield this.Let();this.Oet(e,t)}catch(t){(0,T.nF)({message:"PlayspaceContentH_error_fetchMetadata",level:T.D_.CRITICAL,exception:t.message,callStack:t.stack,sessionId:this.ph.config.sessionId})}const t=!Qn(this.Tet.slides);this.CZ(t),this.Pet(),this.DZ(),this.volume=this.cG.soundMode===i.ProtoPlayerSoundMode.On?1:0,this.hd(),this.ph.services.ViewabilityService.on(this.ott,this.fet,{threshold:.5}),this.Cet()}))}get volume(){return this.let}set volume(t){this.let=t,this.xtt.setVolume(t),this.UY.updateVolume(t)}play(t){this.kZ.play(t)}pause(t){this.kZ.pause(t)}show(){this.kZ.show()}hide(){this.kZ.hide()}enterFullscreen(){this.UY.expand()}exitFullscreen(){this.UY.collapse()}setSlide(t){this.play(!1),this.kZ.setCurrentSlide(t)}onResize(){this.xtt.onPlayerContainerResize(),this.UY.onResizeUi(this.xtt.remainingTime,this.xtt.isPlaying)}get currentSlideIndex(){return this.xtt.currentSlideIndex}get slides(){return this.xtt.slides}updateCtaLabel(t,e){const i={type:ci.CtaButton,metadata:{label:e}};this.xtt.updateCapabilityMetadata(t,i),t===this.xtt.currentSlideIndex&&this.UY.updateCapabilityMetadata(i)}get storyName(){return this.xtt.slidesMetadata[0].storyName}get slidesMetadata(){return this.xtt.slidesMetadata}toggleExpandButton(t){t?this.UY.showExpandButton():this.UY.hideExpandButton()}getQuality(){return this.xtt.getQuality()}setQuality(t){const e={height:t,quality:J.ZH.Strict};this.xtt.setQuality(e)}stop(){this.kZ&&this.kZ.stop()}resume(){this.kZ&&this.kZ.resume()}startContent(){this.kZ.exitRollBreak()}canPlay(){return this._Z.asObservable()}onReady(){return this.pet.asObservable()}destroy(){this.xtt&&this.xtt.destroy(),this.UY&&this.UY.destroy()}get mediaContainer(){return this.UY.$mediaContainer}preloadDependencies(){return ur(this,void 0,void 0,(function*(){Promise.resolve()}))}getPlaybackIntention(){return this.kZ.playbackIntention}}class fr{constructor(t,e,i,s){this.mediator=t,this.Qs=e,this.Ret=i,this.Re=s,this.Bet={current:null,previous:null},this.Det={current:null,previous:null},this.Fet=!1}setFloatingModule(t){this.$et=t}start(t){this.HA=t,this.Vet(this.Qs.orientation),this.jet(this.Qs.orientation)}forceOrientation(t){this.Fet=!1,this.setMainOrientation(t),this.setPlayerClassByOrientation(t),this.Fet=!0}setPlayerClassByOrientation(t=this.Qs.orientation){this.Vet(t),this.Bet.previous&&this.Bet.current===this.Bet.previous||(this.Uet(this.Ret),this.Bet.previous=this.Bet.current,this.mediator.publish(this,qe[qe.PlayerOrientationChange],{payload:this.Bet.current}))}setMainOrientation(t=this.Qs.orientation){this.jet(t),this.Det.previous&&this.Det.previous===this.Det.current||(this.Det.previous=this.Det.current,this.mediator.publish(this,qe[qe.MainOrientationChange],{payload:this.Det.current}))}get playerOrientation(){return this.Bet.current}get mainOrientation(){return this.Det.current}shouldChangeMainOrientation(){return!this.td()}Vet(t){this.Bet.current=this.vG(t)}jet(t){this.Det.current=this.qet(t)}vG(t){return this.td()?x.ProtoPlayerOrientationEnum.Landscape:this.Fet?this.Det.current:t===x.ProtoPlayerOrientationEnum.Mixed?this.Het():t}qet(t){return this.Fet?this.Det.current:t===x.ProtoPlayerOrientationEnum.Mixed?this.Het():t}td(){return this.$et&&this.$et.isInFloating}Het(){return this.Re.getViewportWidth()<this.Qs.orientationBreakpoint?x.ProtoPlayerOrientationEnum.Portrait:x.ProtoPlayerOrientationEnum.Landscape}Uet(t){this.Bet.previous?(0,I.L_)(this.HA,t(this.Bet.previous),t(this.Bet.current)):(0,I.cn)(this.HA,t(this.Bet.current))}}class mr{constructor(t){this.Kr=t,this.Jet=[]}createRatioContainer(t){const e=this.Get();return this.Jet.push(e),this.setRatio(t),e}setRatio(t){this.zet=t,this.Wet()}Get(){return this.Kr.createElementByString(`<cnx class='${kt.oV}'></cnx>`)}Wet(){this.Jet.forEach((t=>{(0,I.T7)(t,{"padding-bottom":`${this.zet}%`})}))}}class gr{constructor(t,e){this.Yet={width:1,height:1},this.Xet=t,this.Qet=e}start(t){this.Ket(t)}getComputedPlayspaceRatio(t){return this.Zet(t)/this.tit(t)*100}getComputedContentRatio(t){return this.eit(t)/this.iit(t)*100}Ket(t){this.sit=t}tit(t){if(t===x.ProtoPlayerOrientationEnum.Landscape){if(!this.sit.clientWidth)return this.Xet.width;const t=this.nit();return this.sit.clientWidth/t}return this.Qet.width}Zet(t){if(t===x.ProtoPlayerOrientationEnum.Landscape){if(!this.sit.clientWidth)return this.Xet.height;return this.rit()/this.nit()}return this.Qet.height}rit(){return this.Xet.height/this.Xet.width*this.sit.clientWidth+72}nit(){const t=this.rit();return(0,Ne.aX)(this.sit.clientWidth,t)}iit(t){return t===x.ProtoPlayerOrientationEnum.Landscape?this.Xet.width:this.Yet.width}eit(t){return t===x.ProtoPlayerOrientationEnum.Landscape?this.Xet.height:this.Yet.height}}class vr extends Ot.tt{constructor(t,e,i,s,n){super(),this.mediator=t,this.Qs=e,this.Kr=n,this.oit(),this.ait=new gr(i,s),this.hit=new mr(n),this.cit=new mr(n)}setFloatingModule(t){this.dit.setFloatingModule(t),this.setRatio()}start(t,e){this.dit.start(t),this.ait.start(e)}getPlayspaceRatioContainer(){return this.hit.createRatioContainer(this.lit())}getContentRatioContainer(){return this.cit.createRatioContainer(this.uit())}setRatio(t=!1){this.dit.setPlayerClassByOrientation(),(t||this.dit.shouldChangeMainOrientation())&&(this.dit.setMainOrientation(),this.hit.setRatio(this.lit())),this.cit.setRatio(this.uit())}getOrientation(){return this.dit.playerOrientation}setOrientation(t){this.dit.forceOrientation(t),this.hit.setRatio(this.lit()),this.cit.setRatio(this.uit())}oit(){this.dit=new fr(this,this.Qs,this.Ret,this.Kr),this.subscribe(qe[qe.PlayerOrientationChange],this.dit,(({payload:t})=>{this.mediator.publish(this,qe[qe.PlayerOrientationChange],{payload:t})})),this.subscribe(qe[qe.MainOrientationChange],this.dit,(({payload:t})=>{this.mediator.publish(this,qe[qe.MainOrientationChange],{payload:t})}))}lit(){const t=this.dit.mainOrientation;return this.ait.getComputedPlayspaceRatio(t)}uit(){const t=this.dit.playerOrientation;return this.ait.getComputedContentRatio(t)}Ret(t){return t===x.ProtoPlayerOrientationEnum.Portrait?li.w.OrientationPortrait:li.w.OrientationLandscape}}var yr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))};class br extends Ue{constructor(){super(...arguments),this.hY=[],this.NG=Nt,this.FG=kt.vF,this.QG=288,this.pit=!1,this.fit=!1,this.Xet={width:16,height:9},this.Qet={width:4,height:5},this.events=Object.assign({},at),this.mit=()=>{const t=this.git(this._$.getCurrentStoryMeta());this.pit=!0,this.vit(t),this.yit(),this.JJ.updateStoryTimeline(this.getStoryTimeline()),this.bit(),this._Y(),this.cG.adPlaybackMode===x.ProtoAdPlaybackMode.Autoplay&&this.cG.playbackMode!==x.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.cG.preRollBreak&&this.VJ(x.ProtoAdSlotsEnum.MidRoll),this.mediator.publish(this,at.Ready)},this.yit=()=>{var t;this.fit&&(this.fit=!1,this.bN()),null===(t=this.adHandler)||void 0===t||t.onLinearUiComponentEvent.subscribe((t=>{if(t.type===Be.C.Volume){const{volume:e}=t.payload;this.pN(e),this._$.volume=e}}))}}_J(){const t={orientation:this.cG.orientation,orientationBreakpoint:this.cG.orientationBreakpoint};this.Iit=new vr(this,t,this.Xet,this.Qet,this.app.services.GlobalDomUtilsService),this.subscribe(qe[qe.PlayerOrientationChange],this.Iit,(({payload:t})=>{this.mediator.publish(this,at.LayoutChanged,{payload:X.LayoutEnum[x.ProtoPlayerOrientationEnum[t]]})})),this.subscribe(qe[qe.MainOrientationChange],this.Iit,(({payload:t})=>{switch(t){case x.ProtoPlayerOrientationEnum.Landscape:(0,I.aQ)(this.$experienceContainer,"maxWidth");break;case x.ProtoPlayerOrientationEnum.Portrait:(0,I.T7)(this.$experienceContainer,{maxWidth:Nt[this.app.config.device].lg-1+"px"})}}))}wit(t){this.Iit.setFloatingModule(t)}setFloatingSettings(t){super.setFloatingSettings(t),this._$.floatingChanged(this.cG.floatingSettings.isPinnedPlayerFloating)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${kt.sN.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${li.v$.Container}"></cnx>`),this.Iit.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.Iit.setRatio(),this.Pit()}Pit(){this.Tit=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${li.v$.ImageWrapper} ${li.v$.ImageBackground}"></cnx>`),this.$playerWrapper.appendChild(this.Tit)}_it(){return this._$.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}Sit(){const t=this._it();if(!t)return;const{imageUrl:e,altText:i,width:s,height:n,queryParams:r}=t,o=this.IJ.getImage(e,i,s,n,r,!0);o&&(o.className=kt.sN.ImagePlaceholder,this.Ait&&this.Tit.removeChild(this.Ait),this.Tit.appendChild(o),this.Ait=o,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(e))}xit(){this.mJ&&this.mJ.canFloat()&&this.Sit()}kit(t=!1){this.Tit&&(t?(0,I.cn)(this.Tit,li.v$.MediaLogo):(0,I.IV)(this.Tit,li.v$.MediaLogo))}addPlayerSize(){const t=this.Iit.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(t),(0,I.cn)(this.$playerWrapper,kt.Ig.Responsive)}handleClose(){this.td()&&this.cG.floatingSettings.floatingMode!==i.ProtoPlayerFloatingMode.Always?(this.mJ.destroy(!0),0!==this._$.volume&&this.setVolume(0)):this.triggerDestroy()}getVolume(){return this._$.volume}setNewVolume(t){super.setNewVolume(t),this._$.volume=t,this.pN(t)}destroy(){var t;super.destroy(),null===(t=this.kY)||void 0===t||t.destroy(),this._$&&this._$.destroy(),(0,Mt.i)(this.hY)}NY(){this._$=new pr(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.cG,this.app,this.$playerContainer,this.Iit),this.subscribe(tt.ContentHandlerReady,this._$,this.mit),this.cG.isCloseButton&&this.subscribe(Be.C[Be.C.Close],this._$,(()=>{this.mediator.publish(this,at.CloseButtonClicked),this.handleClose()})),this.subscribe(Be.C[Be.C.Volume],this._$,(({payload:{volume:t}})=>{this.pN(t),this.adHandler&&this.adHandler.setLinearVolume(t)})),this.subscribe(tt.StateChanged,this._$,(({payload:t})=>{var e;this.ah.playerState=t,null===(e=this.kY)||void 0===e||e.changeState(t),this.RY(t),t===J.Ez.PlayingState&&this.UG(),this.Eit(t)})),this.subscribe(Z.ChangeSlide,this._$,(()=>{this.JJ.slideChanged(this.getStoryPosition());const t=this.Cit();if(this.Sit(),this.mJ&&this.mJ.canFloat()){const e=t&&t.mediaContext===x.ProtoMediaContextEnum.Logo;this.kit(e)}this.ah.currentMediaMetadata=this.Oit(),this.mediator.publish(this,at.ChangeSlide,{payload:t})})),this.subscribe(tt.NewStory,this._$,(()=>{this.WJ(),this.bit()})),this.subscribe(tt.ContentStart,this._$,(()=>{this.NL.mediaQuartile.next({quartile:jt.yU.Start}),this.mediator.publish(this,at.ContentStart,{payload:this.getStorySlidesMetadata()})})),this.subscribe(tt.ContentEnd,this._$,(()=>{this.NL.mediaQuartile.next({quartile:jt.yU.Fourth}),this.mediator.publish(this,at.ContentComplete,{payload:this.getStorySlidesMetadata()})})),this.mJ&&this.subscribe(Q.Uh.UserInteraction,this._$,(({payload:t})=>this.pJ(t))),this.subscribe(K.ProgressBarItemClicked,this._$,(({payload:t})=>{this.mediator.publish(this,at.ProgressBarItemClicked,{payload:this.Lit(t)})})),this.subscribe(K.CallToAction,this._$,(()=>{this.mediator.publish(this,at.CallToAction,{payload:this.Cit()})})),this.subscribe(Be.C[Be.C.LogoClicked],this._$,(()=>{this.mediator.publish(this,at.BrandingClicked)})),this.subscribe(J.XQ.Change,this._$,(({payload:t})=>{this.F5!==t&&(this.F5=t,this.mediator.publish(this,at.QualityChanged,{payload:t}))})),this.subscribe(K.GeneralClickInteraction,this._$,(({payload:t})=>{this.NL.mediaClick.next({type:Vt.EN.fromProtoGetMediaClickType(t)})}))}bY(t,e){const{preRollBreak:i,postRollBreak:s}=this.cG;this.kY=new Ut(t,e,i,s)}RY(t){switch(t){case J.Ez.PlayingState:this.VJ(x.ProtoAdSlotsEnum.MidRoll);break;case J.Ez.PrerollState:this.VJ(x.ProtoAdSlotsEnum.PreRoll);break;case J.Ez.PostrollState:this.VJ(x.ProtoAdSlotsEnum.PostRoll);break;case J.Ez.PausedState:this.cG.adViewabilityPolicy===i.ProtoAdViewabilityPolicy.Default&&!this.xY.inView||this.JJ.onContentStop();break;case J.Ez.StoppedState:this.JJ.onContentStop()}}Eit(t){switch(t){case J.Ez.PlayingState:this.vL.sessionPlaybackChanged.next({isPlaying:!0}),this.mediator.publish(this,at.Play,{payload:this.Cit()});break;case J.Ez.PausedState:this.mediator.publish(this,at.Pause,{payload:this.Cit()}),this.vL.sessionPlaybackChanged.next({isPlaying:!1});break;case J.Ez.StoppedState:this.mediator.publish(this,at.ContentComplete,{payload:this.getStorySlidesMetadata()}),this.vL.sessionPlaybackChanged.next({isPlaying:!1});break;default:this.vL.sessionPlaybackChanged.next({isPlaying:!0})}}_Y(){this.xY=new Je(this,this.cG.playbackMode),this.subscribe(He[He.Play],this.xY,(()=>{this._$.play(!1),this.wJ.unmute()})),this.subscribe(He[He.Pause],this.xY,(()=>{this._$.pause(!1),this.wJ.mute(this.getVolume())})),this.subscribe(Q.Uh.UserInteraction,this._$,(({payload:{playback:t}})=>{(0,a.$K)(t)&&this.xY.setUserPlayback(t)})),this.xY.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.CH}));const t=this._$.canPlay().subscribe((t=>{this.xY.setCanPlay(t)}));this.hY.push(t)}yY(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.cG.soundMode===x.ProtoPlayerSoundMode.On?1:0,{shouldShowExpandButton:!1},!1),this.JJ.forceRecheck())}rG(){const t=this.getNextSlide();this.adHandler.setContinueReadingCard({imageSrc:t.metadata.imageUrl,title:t.metadata.title}),super.rG(),this._$.hide()}hG(){this.GJ.isInAdPod()?this.dG((()=>{this.JJ.onAdFinished(this.adHandler.linearInImpression,dt.k.LINEAR,this.GJ.isInAdPod()),super.hG(),this._$.show()})):(super.hG(),this._$.show())}QJ(){var t;return yr(this,void 0,void 0,(function*(){const e=!!(null===(t=this.mJ)||void 0===t?void 0:t.isInFloating),{PlayspaceAdHandler:i}=yield(0,w.Up)((()=>Promise.resolve().then(h.bind(h,6841))));return new i(e,this.JJ.isAdvertisingDisabled,this.cG,this.ah,this.$playerContainer,this.mJ?this.mJ.checkFloatingViewability(this.isViewable()):this.isViewable(),this.GJ,this.app,this._appSettings,this.Xi,this.vG(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight))}))}tz(){const t=new hi({minSlidesBeforeFirstAd:this.cG.minSlidesBeforeFirstAd,slidesBetweenAds:this.cG.slidesBetweenAds});return new de(this,{linearAdsControllerData:{numberOfMidRolls:this.cG.midRollNumber,adBreaks:this.cG.adBreaks,maxAdSlotDuration:this.GJ.getMaxAdSlotDuration(),maxAdPodDuration:this.GJ.getMaxAdPodDuration()},viewabilityPolicy:this.cG.adViewabilityPolicy,playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight}},t,this.isViewable(),this.cG.disableAdvertising)}bN(){this.pit?(super.bN(),this._$&&this._$.onResize(),this.Iit.setRatio(),this.xit(),this.Mit.updateWidth(this.$playerContainer.clientWidth)):this.fit=!0}td(){return this.mJ&&this.mJ.isInFloating}fG(t,e=!1){super.fG(t,e),this.xY&&this.xY.setViewability(t),this._$&&this._$.setViewabilityState(t)}Rit(){const t=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(t,(()=>{this.Iit.setRatio(!0)}))}Bit(){var t,e;const i=(0,Ft.h)((()=>this.cG.floatingSettings.isPinnedPlayerFloating));if(this.mJ){const s=()=>{this._$.floatingChanged(!0),setTimeout((()=>{this.bG()}),50)};this.mJ.isInFloating&&this.cG.floatingSettings.isPinnedPlayerFloating&&s(),this.hY.push(null===(t=this.mJ.onFloatingEnterStart)||void 0===t?void 0:t.pipe(i).subscribe(s),null===(e=this.mJ.onFloatingExitStop)||void 0===e?void 0:e.pipe(i).subscribe((()=>this._$.floatingChanged(!1))))}}nG(){return{isAutoPlay:this.cG.playbackMode===x.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}GG(){}start(){const t=Object.create(null,{start:{get:()=>super.start}});return yr(this,void 0,void 0,(function*(){try{yield t.start.call(this),this.wit(this.mJ),this.NY(),this.yY(),this.bY(this._$,this.adHandler),this.BG(this._$),this.Rit(),this.Mit=new Me(this.$playerContainer,We,kt.Rq,this.app.config.device),this.Dit(this.$playerContainer),yield this._$.start(),this.pG(),this.Bit(),this.WG()}catch(t){(0,T.nF)({message:"PlayspaceExperience_start",exception:t.message,callStack:t.stack,level:T.D_.CRITICAL,sessionId:this.cG.sessionId})}}))}setSlide(t){this._$.setSlide(t)}getNextSlide(){return this._$.getNextSlide()}play(){super.play();this._$.play(!1)}pause(){super.pause();this._$.pause(!1)}getStoryId(){return this.cG.storyId}getStoryName(){return this._$.storyName}getStoryPosition(){return this._$.currentSlideIndex}getStoryTimeline(){return this._$.slides.map((t=>t.media.duration/ct.s_))}updateCtaLabel(t,e){(0,a.hj)(t)&&(0,a.QM)(e)&&this._$.updateCtaLabel(t,e)}getStorySlidesMetadata(){return this._$.slidesMetadata.map((({title:t,clickUrl:e,slideDuration:i,keywords:s,language:n,altText:r,customFields:o})=>{const a={title:t,clickUrl:e,duration:i,keywords:s,language:n,altText:r};let h;try{h=JSON.parse(o)}catch(t){return a}return Object.assign(Object.assign({},a),{customFields:h})}))}getQuality(){return this._$.getQuality()}setQuality(t){this._$.setQuality(t)}getOrientation(){return this.Iit.getOrientation()}setOrientation(t){this.Iit.setOrientation(t)}setPreRollBreak(t){var e;this.cG.setPreRollBreak(t),null===(e=this.kY)||void 0===e||e.setPreRollBreak(this.cG.preRollBreak),this._$.hasPreroll=(0,a.r)(this.cG.preRollBreak)}setPostRollBreak(t){var e;this.cG.setPostRollBreak(t),null===(e=this.kY)||void 0===e||e.setPostRollBreak(this.cG.postRollBreak),this._$.hasPostroll=(0,a.r)(this.cG.postRollBreak)}disableAdvertising(){this.cG.allowAdBreaksIfAdvertisingDisabled||(this.setPreRollBreak(0),this.setPostRollBreak(0)),super.disableAdvertising()}enableAdvertising(){this.setPreRollBreak(null),this.setPostRollBreak(null),super.enableAdvertising()}Cit(){return this._$.getCurrentMetadata()}Lit(t){if(!(t<0||this._$.slidesMetadata.length<t))return this._$.slidesMetadata[t]}bit(){this.ah.currentMediaMetadata=this.Oit()}Oit(){const t=this._$.getCurrentStoryMeta(),e=this._$.getCurrentMetadata(),i=e.title||e.coverMetadata&&e.coverMetadata.title;return{mediaId:(null==t?void 0:t.storyId)||this.cG.storyId,clickUrl:e.clickUrl,slideTitle:i,slideNumber:this._$.currentSlideIndex+1,slideMediaType:e.mediaType,insights:(null==t?void 0:t.insights.insights)||[],sentimentAnalysis:(null==t?void 0:t.insights.sentimentAnalysis)||{},mediaRevision:t.activeVersion}}vit(t){this.adHandler&&this.adHandler.setMediaRestrictions(t)}git(t){return{mediaInsights:{insights:t.insights.insights}}}Dit(t){if(!(0,a.QM)(this.cG.sdkVersion)&&(0,a.QM)(this.app.config.bundleID)){const e=this.app.services.GlobalDomUtilsService.querySelector("body");(0,I.T7)(e,{margin:"0"}),t.clientWidth>=300&&((0,I.T7)(t,{"min-height":"250px"}),(0,I.Tp)(t)),(0,w.Vm)([95,5])&&(0,T.nF)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:T.D_.INFO,sessionId:this.cG.sessionId})}}d1(){}bG(){var t;this.cG.floatingSettings.isPinnedPlayerFloating&&(null===(t=this._$)||void 0===t?void 0:t.mediaContainer)&&this.td()?this.breakPointsHandler.updateWidth(this._$.mediaContainer.clientWidth):super.bG()}zG(){var t;null===(t=this.r$)||void 0===t||t.start(this.$playerContainer,!1)}WG(){this._$.onReady().pipe((0,Ft.h)((t=>!!t)),(0,$t.q)(1)).subscribe((()=>{super.WG()}))}}class Ir{constructor(t){this.experience=t,this.wf={},this.a0=(t,e)=>this.m_.on(t,e),this.h0=(t,e)=>{this.m_.remove(t,e)},this.c0=()=>{this.m_.removeAll()},this.l0=(t,e)=>{this.m_.once(t,e)},this.f0=()=>this.experience.isViewable(),this.m0=t=>{this.experience.setViewableThreshold(t)},this.g0=()=>{this.experience.play()},this.v0=()=>{this.experience.pause()},this.y0=()=>this.experience.getVolume(),this.b0=t=>{this.experience.setVolume(t)},this.Ki=()=>{this.experience.triggerDestroy()},this.tV=()=>{this.experience.disableAdvertising()},this.I0=()=>{this.experience.disableAdsInBackground()},this.P0=()=>{this.experience.enableAdvertising()},this._0=()=>{this.experience.enableAdsInBackground()},this.A0=()=>{this.experience.enableFloatingMode()},this.k0=()=>{this.experience.disableFloatingMode()},this.E0=()=>this.experience.isFloatingModeEnabled(),this.x0=t=>{this.experience.setFloatingSettings(t)},this.C0=(t,e)=>this.experience.setLineItemMetadata(t,e),this.O0=t=>this.experience.startConnatixAuction(t),this.getFloatingSettings=()=>this.experience.getFloatingSettings(),this.M0=t=>{this.experience.setCustomMacros(t)},this.L0=t=>{this.experience.setAmpUserConsent(t)},this.B0=t=>{n.n.CONNECTION_TYPE=t},this.R0=t=>{this.experience.updateJsQueryTargeting(t)},this.D0=t=>{this.experience.removeJsQueryTargeting(t)},this.F0=()=>n.n.CONNECTION_TYPE,this.V0=()=>this.experience.getApiConfig(),this.j0=()=>this.experience.getSessionDataConfig(),this.m_=new m.Q}trigger(t,e){this.m_.trigger(t,e)}setDestroyed(){this.trigger(L.Km.Removed)}getApiMethods(){return{_internals:this.wf,on:this.a0,remove:this.h0,removeAll:this.c0,once:this.l0,isViewable:this.f0,setViewableThreshold:this.m0,play:this.g0,pause:this.v0,getVolume:this.y0,setVolume:this.b0,disableAdvertising:this.tV,disableAdsInBackground:this.I0,enableAdvertising:this.P0,enableAdsInBackground:this._0,enableFloatingMode:this.A0,disableFloatingMode:this.k0,isFloatingModeEnabled:this.E0,setFloatingSettings:this.x0,getFloatingSettings:this.getFloatingSettings,setMacros:this.M0,setAmpUserConsent:this.L0,destroy:this.Ki,updateConnectionType:this.B0,getConnectionType:this.F0,updateJsQueryTargeting:this.R0,removeJsQueryTargeting:this.D0,setLineItemMetadata:this.C0,startConnatixAuction:this.O0,getApiConfig:this.V0,getSessionDataConfig:this.j0}}addService(t,e){this.wf[t]=e}}class wr extends Ir{constructor(){super(...arguments),this.Nit=()=>this.experience.getStoryPosition(),this.Fit=()=>this.experience.getStoryId(),this.$it=()=>this.experience.getStoryName(),this.Vit=()=>this.experience.getStoryTimeline(),this.jit=t=>{this.experience.setSlide(t)},this.Uit=(t,e)=>{this.experience.updateCtaLabel(t,e)},this.Let=()=>this.experience.getStorySlidesMetadata(),this.L1=()=>this.experience.getQuality(),this.B1=t=>{this.experience.setQuality(t)},this.qit=()=>{const t=this.experience.getOrientation();return X.LayoutEnum[x.ProtoPlayerOrientationEnum[t]]},this.Hit=t=>{const e=Object.keys(X.LayoutEnum).find((e=>X.LayoutEnum[e]===t));e&&x.ProtoPlayerOrientationEnum[e]&&this.experience.setOrientation(x.ProtoPlayerOrientationEnum[e])},this.Jit=()=>this.experience.getSize(),this.V1=t=>{this.experience.setPreRollBreak(t)},this.j1=t=>{this.experience.setPostRollBreak(t)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.Nit,setStoryPosition:this.jit,getStoryId:this.Fit,getStoryName:this.$it,getStoryTimeline:this.Vit,setCtaLabel:this.Uit,getStoryMetadata:this.Let,getQuality:this.L1,setQuality:this.B1,getLayout:this.qit,setLayout:this.Hit,getPlayerSize:this.Jit,setPreRollBreak:this.V1,setPostRollBreak:this.j1})}}class Pr extends Bt{constructor(){super(...arguments),this.I$="cnx-ps"}createExperience(t,e){this.experience=new br(this,e,this.app.services.UrlSuffixerService,this.vL,this.jc,this.NL,this.ah,this.r$),this.experienceApi=new wr(this.experience),this.ah.playerType=_t.e.Story}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(t){return!(this.experienceContainer.clientWidth<Nt[t].xs)}}class Tr extends E.a{xA(){return{id:A,src:f.n.endPoints.assets.css.playspace}}getDelegateHandler(){return{getCurrentVolume:()=>this.renderer.getApiMethods().getVolume()}}getRendererInstance(t,e,i,s,n,r,o,a,h){return new Pr(this,t,e,i,s,n,r,o,a,h)}getViewabilityService(t,e,i){if(this.externalAttributes.settings.useExternalViewabilityService)return new O;if(this.mS.isInApp&&!this.mS.isInAppHybrid){const e=C.h.getSessionChildContainer(i.sessionId).resolve(k.G);return new F(window,e,t.sessionId,i.bundleId,this.mS.isInAppSDK)}return new V(t.global,e,i)}getPlayerRequest(t){return(0,w.Up)((()=>H.n.sendProtoRequest({protoResponse:x.ProtoPlayspaceResponse,protoRequest:x.ProtoPlayspaceRequest,requestData:t,endpoint:f.n.endPoints.api.story,hasCredentials:!0,queryParams:Object.assign({[l.Fk]:S.g.version},p.f.getCidKeyValueObject()),shouldLogErrors:!0})),this.PLAYER_REQUEST_RETRIES_NUMBER)}getPlayerResponse(t){return new Promise(((e,i)=>{this.getPlayerRequest(t).then((t=>{f.n.setTier(t.tier),window.parent.connatixDummy&&(0,j.Ph)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),e(t)})).catch((t=>{this.GLOBAL.cnxDummyResponse?e(this.GLOBAL.cnxDummyResponse):i(t)}))}))}getPlayerModel(t,e,i,s){return new Tt(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,e.players[s],e.browser.device,e.secondLevelDomain,this.externalAttributes,this.isServerlessMode,e.supplyChain,i,this.services.StandaloneService,e.lineItemAbTestInformation,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,e.isSeoTraffic||this.queryParams.cnxIsSeoTraffic,this.FS())}getApiConfigEnums(){return X}getApiConfigEvents(){return at}getSpecificRequestData(){const t={};return this.queryParams.cnxStoryId?t.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(t.forceStoryId=this.externalAttributes.storyId),this.queryParams.cnxDebug&&(t.cnxDebug=this.queryParams.cnxDebug),t}defaultInitFromProto(){return U(x.ProtoPlayspaceResponse,x.ProtoPlayspace)}DS(){super.DS(),this.externalAttributes.settings.story=void 0}}const _r=window.parent,Sr=(0,I.bZ)(l.ym,window.document.currentScript);p.f.customerId=Sr;const Ar=[];window.addEventListener("unload",(function(t){Ar.forEach((t=>t.destroy()))}));const xr=(0,w.pE)(_r).topFrame;u.e.abServiceType=u.j.PlayspaceABService;const kr=function(t,e,r){var o,h,c;const l=JSON.parse(JSON.stringify(t));t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t._appSettings.customJsTargetingObject=t.settings.queryJsTargeting||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{};const u=(0,a.hj)(t.settings._connatixInternals.serverAb0),p={environment:{injectedServerAb0:t.settings._connatixInternals.serverAb0},player:{id:t.playerId,advertising:{adBreak:s.V.None},isInView:!1}};t=Er(t);const m=P.$.getEnvironment(t._appSettings);if(m.isInAppHybrid&&!P.$.isValidWebviewInApp(m))throw new Error("not a valid in app webview implementation. Missing bundle id or webViewability setting");t.settings.useExternalViewabilityService=!1,m.isInAppSDK&&(t.settings.useExternalViewabilityService=P.$.shouldUseExternalViewabilityService(t._appSettings.sdkVersion));const{cmp:g,tcf:_,usPrivacyString:S,deviceID:x,idfv:k}=t._appSettings,E=((t,e)=>e.AMP_CONTEXT_DATA||t.settings.implementationType===i.ProtoImplementationType.Amp)(t,_r),{advertising:C,plugins:O}=t.settings,L=C.standaloneLineItems,M={UserManagerService:new b.x(xr,m.isInApp,E,{cmp:g,tcf:_,usPrivacyString:S,deviceID:x,idfv:k}),EventsStorageService:new v(O._debugLogging),UrlSuffixerService:new y.f,StandaloneService:new d(L)},R=new Tr(M,_r,m,E,!1,r,p,t.settings._connatixInternals.bundleLoadTimestamp);Ar.push(R);const B=function(){const i={id:A,src:f.n.endPoints.assets.css.playspace};(0,w.Up)((()=>function(t){return new Promise(((e,i)=>{if((0,I.rI)(t.id,xr))return e();(0,I.NS)(t,xr.document.head,xr,(()=>e()),(t=>i(t)))||i()}))}(i))).catch((t=>{throw(0,T.nF)(Object.assign({message:"Prerender_Playspace_Loader_add_css_link",exception:t.message,callStack:t.stack,level:T.D_.INFO},u&&{extra:p}),{throttle:1e3}),t})).then((()=>{try{(0,I.Nb)(_r),R.updateQueryParams(),R.loadScriptTag(t,e)&&R.insertRenderer()}catch(t){(0,T.nF)(Object.assign({message:"Prerender_Playspace_main_insertRenderer",exception:t.message,callStack:t.stack,level:T.D_.INFO},u&&{extra:p}),{throttle:1e3})}})).catch((()=>{}))};m.isInApp?(n.n.CONNECTION_TYPE=null===(o=null==t?void 0:t._appSettings)||void 0===o?void 0:o.connectionType,R.setInappPageUrl(null===(h=null==t?void 0:t._appSettings)||void 0===h?void 0:h.appPageURL),B()):R.findPageUrl(_r,null===(c=null==t?void 0:t.settings)||void 0===c?void 0:c.ampUrl).then((()=>{B()})).catch((t=>{(0,T.nF)(Object.assign({message:"Prerender_Playspace_main_init",exception:t.message,callStack:t.stack,level:T.D_.INFO},u&&{extra:p}),{throttle:1e3}),R.registerApiError()})),E||m.isInApp||(0,T.Mn)(l,!!r)},Er=t=>{var e,i,s;const n=Object.assign({},t),r=null===(e=n._appSettings)||void 0===e?void 0:e.cmp;((0,a.QM)(null===(i=n._appSettings)||void 0===i?void 0:i.gdprConsentString)||(0,a.QM)(null===(s=n._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(n._appSettings.cmp={consentString:(0,a.QM)(null==r?void 0:r.consentString)?r.consentString:n._appSettings.gdprConsentString,parsedVendorConsents:(0,a.QM)(null==r?void 0:r.parsedVendorConsents)?r.parsedVendorConsents:n._appSettings.gdprParsedVendorString});const o=Object.assign({},(0,_.EQ)(Object.assign({},n._appSettings.cmp))),h=Object.assign({},(0,_.EQ)(Object.assign({},n._appSettings.tcf))),{usPrivacyString:c,deviceID:d,appPageURL:l}=(0,_.EQ)({usPrivacyString:n._appSettings.usPrivacyString,deviceID:n._appSettings.deviceID,appPageURL:n._appSettings.appPageURL});return n._appSettings=Object.assign(Object.assign({},n._appSettings),{cmp:o,tcf:h,usPrivacyString:c,deviceID:d,appPageURL:l}),n};try{(0,w.oC)()||(f.n.bundleDomain=e.o.connatix,window.initConnatixPlayer=kr)}catch(t){(0,T.nF)({message:"Prerender_Playspace_main",exception:t.message,callStack:t.stack,level:T.D_.INFO},{throttle:1e3})}})()})();