/*! For license information please see region.min.js.LICENSE.txt */
!function(){var t,e,i,n,r={19662:function(t,e,i){var n=i(60614),r=i(66330),o=TypeError;t.exports=function(t){if(n(t))return t;throw o(r(t)+" is not a function")}},39483:96077:51223:31530:25787:19670:18533:41318:42092:81194:9341:53671:83658:41589:50206:94362:77475:65417:17072:84326:70648:99920:84964:49920:76178:68880:79114:86135:47045:98052:13072:85117:19781:4154:80317:7207:48324:98509:68886:function(t,e,i){var n=i(88113).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},7871:83823:30256:function(t,e,i){var n=i(88113);t.exports=/MSIE|Trident/.test(n)},71528:6833:function(t,e,i){var n=i(88113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},35268:71036:88113:7392:98008:80748:82109:47293:27007:22104:49974:34374:46916:76530:75668:21470:1702:35005:71246:18554:88044:58173:10647:17854:92597:3501:function(t){t.exports={}},842:60490:64664:68361:42788:29909:97659:43157:60614:4411:54705:68554:70111:31913:47850:52190:20408:99212:63061:51656:13383:97497:26244:56339:74758:95948:78523:3929:21574:70030:36048:3070:31236:1156:8006:25181:79518:47976:16324:81956:55296:27674:90288:92140:53887:40857:function(t,e,i){var n=i(17854);t.exports=n},12534:63702:2492:69478:80612:18572:97651:22261:67066:52999:9441:38173:84488:96340:58003:6200:5465:72309:,36707,28710,76091e!==t}rim:l(&&n<41rity:ol.key,clear):o(i, n(r(te?0:n(40991) r(n(t),a(t,)?e:e+Stringurn r(Object+r+o,3.itertotypereturntring(o.f(t12);et)),l[  u(d+1),l(f,d++,o);return f.length=d,f}})},57327:function(t,e,i){"use strict";var n=i(82109),r=i(42092).filter;n({target:"Array",proto:!0,forced:!i(81194)("filter")},{filter:function(t){return r(this,t,argumentts.len>1?arg{a(_,"t){retgumentn r(thin f&n]=r[nw]=argrn l(uturn kar n=ifuncti:2,forriptortion(t}))},{ject.p;returl.catcforced0821);returreturnion(t),protogument:(t=ntIndext},"7"im")}OwnPro0,consr("Sym032),i not ar("toS in r)]&&n[dupported")},n.umask=function(){return 0}},52732:function(t){t.exports=function(){"use strict";function t(){return t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},t.apply(this,arguments)}var e="undefined"!=typeof window,i=e&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=e&&"IntersectionObserver"in window,r=e&&"classList"in document.createElement("p"),o=e&&window.devicePixelRatio>1,s={elements_selector:".lazy",container:i||e?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:er!1,{instance:r})}window.dispatchEvent(i)},u="src",l="srcset",h="sizes",f="poster",d="llOriginalAttrs",p="data",_="loading",v="lon(t,e){return t.getAttribute("data-"+e)}ri}(,null)},E=function(t){return null===w(t)},k=fd d(").replace(/^\s+/,"").replace(/\s+$/,"(e},e)"S&&Each(e)},j=function(t,e){R(t).forEach(e)},N=[u],X=[u,f],Y=[u,l,h],H=[p],q=function(t){rn ioe,le_)V=t,e.datnction(t){F(t,Y),U(t,e)})),F(t,Y),U(t,e)},IFRAME:function(poster)ction(t,e){F(t,H),V(t,p,b(t,e.data_src)oL.adnct,i)ar s_lrorme].reion(t){M(t,(function(t){z(t,Y)})),z(t,Y)},ctt,(funct,X),t.load()},OBJECT:function(t&&"(t)er.){rion_onlineHandler))}(r,this),th){t.obsehis.loadforEach((fue.class_e_t.load=functioot(var i,n=0;i=e[n];n+=1)c(t,i);else c(t,e)_esMod_esModnction.call(i.enction(){return t};returction(t){return Object.getPrototypeO.default=function(){return i},s.d(r,o),r},s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(unctu=function(=funf("object"==typeof window)return window}}(),s.o=function(t,e){return Object.prototype.hasOwnProperty.onload),c&&document.head.appendChild(a)}},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.definePrl,0)),i.push=e.bind(null,i(s,n,o,a,c,"throw",t)}a(void 0)}))}}s(92222),s(41539),s(54747),s(68309),s(26699);var a=s(64687),c=s.n(a),u=(s(88674),s(74916),s(21ction h(){return f.apply(this,arguments)}function f(){return(f=o(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){Promise.all([s.e(6809),s.e(7020)]).then(s.t.bind(s,86809,23)).then((function(e){t(e.default)}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s(66992),s(78783),s(33948);var d={config:null,get:function(t){if(!this.config){var e={};$(".content-meta").each((function(){var t=$(this).text();try{t=JSON.parse(t),e=Object.assign({},e,t)}catch(t){console.warn(t)}})),this.config=e}return t?this.config[t]:this.config}},p=function(){function t(){var e=this;n(this,"config",null),n(this,"socketChannels",{chat:null,getChat:function(){return new Promise(function(){var i=o(c().mark((function i(n,r){var o,s;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.chat){i.next=2;break}return i.abrupt("return",n(e.chat));case 2:return i.next=4,h();case 4:o=i.sent,(s=o(t.getConfig("CHAT_H"connect",(function(){e.chat=s,n(e.chat)}));case 7:ction(t,e){return i.apply(this,arguments)}}())}}),this.lazyLoadInstance=window.etAttribute("data-fallback-src");t.src=e}}),/^\/chat/gi.test(location.pathname)&&localStorage.removeItem("chatUMC")}t.getConfig=function(t){return void 0===t&&(t=null),d.get(t){return void 0===t&&(t=null),d.get(t)},t.importSelect2=function(){return new Promise((function(e,i){var n=t.getConfig("STATIC_HOST")+"vendor/select2/css/select2.min.css";$("head link[rel='stylesheet']").last().after("<link rel='stylesheet' href='"+n+"' type='text/css'>"),$.getScript(t.getConfig("STATIC_HOST")+"vendor/select2/js/select2.min.js",(function(){e()}))}))},t.importHighMaps=function(){return new Promise((function(e,i){$.when($.getScript(t.getConfig("STATIC_HOST")+"vendor/proj4js/dist/proj4.js"),$.getScript(t.getConfig("STATIC_HOST")+"vendor/highs"),$.Deft){$(t.resolve)}))).done((function(){e()}))}))},e.initChatNotificationsListener=function(){var e=o(c().mark((function e(){var i,n,r,o,s,a,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=9e4,n="chatUMC",r=(r=localStorage.getItem(n))?JSON.parse(r):{},o=t.getConfig("AUTH_USER_ID")){e.next=7;break}return e.abrupt("return",console.log("User not authenticated"));case 7:if(!r[o]){e.next=11;break}if(s=r[o],!(Date.now()-s.dateUpdated<=i)){e.next=11;break}return e.abrupt("return",document.dispatchEvent(new CustomEvent("chat-history-update",{detail:{unreadMsgCount:s.unreadMsgCount}})));case 11:return e.next=13,$.get(t.getConfig("ROUTES_AJAX_URL"),{userId:o,method:"get-profile-ids"});case 13:if((a=e.sent)&&(a=JSON.parse(a)),a.profiles){e.next=17;break}return e.abrupt("return",console.warn("This user does not have any profile."));case 17:return u=a.profiles.map((function(t){return t.id})),e.next=20,this.socketChannels.getChat();case 20:e.sent.emit("unread-messages-request-detached",{profileIds:u},(function(t){var e;if(!t.participations)return console.warn("No participations for authenticat(function(t,e){return t+e.unreadMsgCount}),0);document.dispatchEvent(new CustomEvent("chat-history-update",{detail:{unreadMsgCount:i}})),localStorage.setItem(n,JSON.stringify(Object.assign({},r,((e={})[o]={unreadMsgCount:i,dateUpdated:Date.now()},e))))}));case 22:case"eunction(){reo|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}s(15306),s(69826),s(32023),s(2707),s(73210);var g=function(){function t(){n(this,"_instance",void 0),n(this,"config",{MULTIPLE_SELECTED_TEXT:d.get("TXT_MULTIPLE_SELECTED_LABEL")||"You hnstance||(t._instance=new t),t._instance};var e=t.prototype;return e.init=function(t){void 0===t&&(t=null),this.validateNumberInputs(),this.initInputs(),t&&(this.config=Object.assign({},this.config,t))},e.validateNumberInputs=function(){var t=["-","+","e"];$(document).on("keyde){t.includes(e.key)&&e.preventDefault()}))},e.initInputs=function(){function t(t){var e=t.target.value;e&&e.replace(/^\s+|\s+$/g,"")?$(t.target).parents(".rl-form-group").first().addClass("filled"):$(t.target).parents(".rl-form-group").first().removeClass("filled")}$(document).on("input",".rl-form-group > input",t).on("change",".rl-form-group > input, .rl-form-group select",t).on("keyup",".rl-form-group > input",t).on("focus",".rl-form-group > input,.rl-form-group select",t).on("blur",".rl-form-group > input,.rl-form-group select",t).on("mousedown",".rl-form-group > input,.rl-form-group select",t),$(".rl-form-group > input,.rl-form-group select").trigger("change"),$(".rl-form-group label").click((function(){var t=$(this).siblings("input").get(0);t&&t.focus()}))},e.initSelect2=function(t,e){void 0===e&&(e={});var i=this,n=v(),r=t.prop("multiple"),o=Boolean(e.ajax)||!n,s=t.parents(".rl-select2-wrapper").first(),a=s.children("label"),c=parseInt(t.attr("data-maxSelection"));c||(c=3),this.maxSelection=c,t.prop("),s.click((function(e){t.select2("open")})),(t.find("option").length<=8||t.hasClass("mf__no-search"))&&!Boolean(e.ajax)&&(e.minimumResultsForSearch=-1,t.on("select2:opening select2:closing",(function(t){$(this).parent().find(".select2-search__field").blur().prop("disabled",!0).prop("readonly",!0).css("display","none")})));var u=t.select2(e);t.prop("multiple")&&$(u.data("select2").$dropdown).addClass("checkbox-visible"),i.updateSelect2State({wrapper:s,val:t.val(),isMultiple:r,elm:t}),t.on("select2:selecting",(function(t,e,n){i.disableSel2Group({evt:t,ref:this,disabled:!0})})),t.on("select2:unselecting",(function(t){i.disableSel2Group({evt:t,ref:this,disabled:!1})})),t.on("select2:opening",(function(t){var e=s.find(".select2-search__field").get(0);if(!o&&window.isSelect2Open)return e&&e.blur(),t.preventDefault();e&&e.focus(),s.addClass("filled")})),t.on("select2:open",(function(t){if(window.isSelect2Open=!0,o){var e=s.find(".select2-search__field").get(0);e&&e.focus()}s.addClass("filled"),n&&($(t.target).parents().off("scroll.select2"),$(window).off("sunction(){window.isSelect2Open=!1}),100)})),t.on("select2:closing",(function(){var e=$(this).val();i.updateSelect2State({wrapper:s,val:e,isMultiple:r,elm:t})})),t.change((function(){var n,o=$(this).val();i.updateSelect2State({wrapper:s,val:o,isMultiple:r,elm:t}),-1==e.minimumResultsForSearch?s.find(".select2-search").remove():null===(n=s.find(".select2-search").find("input"))||void 0===n||n.val("")})),-1==e.minimumResultsForSearch&&s.find(".select2-search").remove(),a.css("opacity",1)},e.disableSel2Group=function(t){var e=t.evt,i=t.ref,n=t.disabled,r=t.selId;r=r||e.params.args.data.id;var o=$("option[value='"+r+"']").attr("data-groupid");if(o){var s=$("option",i);$.each(s,(function(t,e){var i=$(e).data("data");$("option[value='"+i.id+"']").attr("data-groupid")==o&&i.id!=r&&(i.disabled=n)}))}},e.updateSelect2State=function(t){var e=t.wrapper,i=t.val,n=t.isMultiple,r=t.elm;i&&i.length?(e.addClass("filled"),!n&&e.find(".select2-selection__rendered").show()):(e.removeClass("filled"),!n&&e.find(".select2-selection__rendered").hide());var o=r.siblings("span.select2").find("ul"),s=o.find("li").length-1,a='\n        <li class="combined">\n          <span class="select2-selection__choice">'+this.config.MULTIPLE_SELECTED_TEXT.replace("%s","<b>"+s+"</b>")+"</span>\n        </li>";s>=this.maxSelection&&(o.find("li:not(.select2-see(),o.prepend(a),setTimeout((function(){}),0))},e.disableSearchField=function(t){$(t).parent().find(".select2-search__field").blur().prop("disabled",!0).prop("readonly",!0).css("display","none")},t}(),m=g;s(40561),s(47042),s(82526),s(41817),s(39341),s(73706),s(10408),s(57327),s(47941),s(38nebjefineP=i[n])}return t},i.apply(this,arguments)}t.r(e),t.d(e,{CREATED:function(){return q},DESTROYED:function(){return z},IDLE:function(){retun(){return G},MOVING"removt){return t.getBoundingClienorunction N(t,e){if(!t)throw new Error(e)}var X="splide",Y={active:"is-active",visible:"is-visible",loading:"is-loading"},H={type:"slide",rewind:!1,speed:400,rewindSpeed:0,waitForTransition:!0,width:0,height:0,fixedWidth:0,fixedHeight:0,heightRatio:0,autoWidth:!1,autoHeight:!1,perPage:1,perMove:0,clones:0,start:0,focus:!1,gap:0,padding:0,arrows:!0,arrowPath:"",pagination:!0,autoplay:!1,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,lazyLoad:!1,preloadPages:1,easing:"cubic-bezier(.42,.65,.27,.99)",keyboard:"global",drag:!0,dragAngleThreshold:30,swipeDistanceThreshold:150,flickVelocityThreshold:.6,flickPower:600,flickMaxPages:1,direction:"ltr",cover:!1,accessibility:!0,slideFocus:!0,isNavigation:!1,trimSpace:!0,updateOnMove:!1,throttle:100,destroy:!1,breakpoints:!1,classes:{root:X,slider:X+"__slider",track:X+"__track",list:X+"__list",slide:X+"__slide",container:X+"__slide__container",arrows:X+"__arrows",arrow:X+"__arrow",prev:X+"__arrow--prev",next:X+"__arrow--next",pagination:X+"__pagination",page:X+"__pagination__page",clone:X+"__slide--clone",progress:X+"__progress",bar:X+"__progress__bar",autoplay:X+"__autoplay",play:X+"__play",pause:X+"__pause",spinner:X+"__spinner",sr:X+"__sr"},i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",paule=!0),Object.des._i=0,this._c=n,this._e={},this._t=ged",(fc=function(t){return this.sibling=t,this},s.on=function(t,e,i,n){return void 0===i&&(i=null),void 0===n&&(n={passiv0===e&&.Eventhis.s.is=fts.add(t,s.Elementsre").emit(eady",(function(){return e.destroy(t)}))},i=t,n=[{key:"._i},set:function(t){this._i=parseInt(t)}},{key:"length",get:function(){return this.Components.Elements.length}},{key:"opis._o,t),e||this.emit("updated",this._o)}},{key:"classes",get:function(){return this._o.classes}},{key:"i18n",get:function(){return this._o.i18n}}],n&&W(i.prototype,n),t}(),V="rtl",U="ttb"setTimeout((function(){t(),i=null}),e))}}var tt=Math.abs,et="move.page",it="updated.page refresh.page",nt="data-splide-lazy",rt="data-splide-lazy-srcset",ot="aria-current",st="aria-controls",at="aria-label",ct="aria-hidden",ut="tabindex",lt={ltr:{ArrowLeft:"<",ArrowRight:">",Left:"<",Right:">"},rtl:{ArrowLeft:">",ArrowRight:"<",Left:">",Right:"<"},ttb:{ArrowUp:"<",ArrowDown:">",Up:"<",Down:">"}},ht="move.sync",ft="mouseup touchendState.is(q)&(t){t&&remofunction t){ret{return(i,t.clr?nule:i,velocity:{x:h.x/f,y:h.y/fpagation(),t.stopImmediatePropagation())}return{required:t.options.drag,mount:function(){t.on("click",n,e.Elements.track,{capture:!0,passive:!1}).onunction(){setTimeout((function(){i=!1}))}))}}},Autoplay:function(t,e,i){var n,r=[],o=e.Elements,s={required:t.options.autoplay,mount:function(){var e=t.options;o.slides.length>e.perPage&&(n=function(e,i,n){var r,o,s,a=window.requestAnimationFrame,c=!0,u=function e(u){c||(r||(r=u,s&&s<1&&(r-=s*i)),s=(o=u-r)/i,o>=i&&(r=0,s,a(e):function(t){r=0ng)).on("destroy",(func:play"punction(){s[r?"urn i(!n,r],"disabn,c),t.emmounted rn(e){on(){p(t).prototype.constructor=e,e.__proto__=i,n}(B);window.Splide=_t}();var y,b=v(),w=(y=navigator.userAgent.toLowerCase(),/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(y)),S={iium-view",type:"POST",data:{viewIds:t}})},e=$(".carousel").last().find(".carousel-item").first();t([e.attr("data-viewId")]),$(document).on("click",".carousel-control-next",(function(){var e=$(this).parents(".carousel").find(".carousel-item.active").next().attr("data-viewId");e&&t([e])})),$(document).on("click",".carousel-control-prev",(function(){var e=$(this).parents(".carousel").find(".carousel-item.active").prev().attr("data-viewId");e&&t([e])}))},mountPremiumCarousels:function(){var t=$(".slider-wrapper .splide:not(.mounted)");t.length&&t.each((function(){var t=this;$(this).addClass("mounted");var e=600;b&&!w&&(e=500),$(this).parents(".slider-wrapper");var i=new Splide($(this).get(0),{type:"loop",pagination:!1,keyboard:!1,rewind:!1,trimSpace:!0,autoplay:"pause",interval:3500,speed:e}).mount(),n=[];try{(n=JSON.parssort((function(){return Math.random()-.5}))}catch(t){console.error(t)}var r=$(this).find(".splide__arrow--next"),o=$(this).find(".splide__arrow--prev");r.html(""),o.html("");var s=!1;i.on("move",(function(t,e){i.length})),i.on("moved",(function(e,o){e>=i.length-2&&!s&&($(t).find(".splide__slide").each((function(){var t=parseInt($(this).attr("data-id")),e=n.indexOf(t);-1!==e&&n.splice(e,1)})),function(t){var e=t.parent,i=t.carousel,n=t.ids.slice(0,8),r=e.data("key");$.ajax({type:"POST",url:"/ajax?method=fetch-premiums",data:{ids:n,key:r,type:"large"},dataType:"JSON",success:function(t){if.premiums.forEach((function(t){n+=t.html})),e.find(".splide__list").append(n),i.refresh(),window.lazyLoadInstance.update()}else i.refresh(),window.lazyLoadInstance.update()}})}({parent:$(t),carousel:i,ids:n,nextBtn:r,cb:function(){s=!0}}))})),"IntersectionObserver"in window&&new IntersectionObserver((function(t,e){t.forEach((function(t){var e=i.Components.Autoplay;1!=t.intersectionRatio?e.pause():e.play()}))}),{threshold:1}).observe($(t)[0])}))},mountPremiumSliders:function(){var t=$(".premium-articles-carousel:not(.mounted)");t.length&&t.each((function(){$(this).addClass("mounted");var e=this,i=(t.find(".card--more"),t.parents(".premium-articles--container")),n=!0,r=[];try{r=JSON.parse($(this).children(".ids").text())}catch(t){}var o=4e3,s=750;b&&!w&&(o=2500,s=450);try{var a=new Splide($(this).get(0),{type:"loop",pagination:!1,rewind:!1,trimSpace:!0,gap:"20px",perMove:4,perPage:4,lazyLoad:"nearby",keyboard:!1,arrows:!0,drag:"free",autoplay:"pause",interval:o,speed:s,breakpoints:{768:{perMove:3,perPage:3,drag:"free"},600:{perMove:1,perPage:1,drag:"free",padding:{left:"10px",right:"2rem"}}}}).mount(),c=t.find(".splide__arrow--next"),u=t.find(".splide__arrow--prev");c.html(""),u.html(""),a.on("moved",(function(o,s){screen.width<768?t.find(".splide__arrows").hide():t.find(".splide__arrows").show();var c=a.length-4;if(screen.width<=768?c=a.length-3:screen.width<=600&&(c=a.length-1),$(e).find(".splide__slide").each((function(){var t=parseInt($(this).attr("data-id")),e=r.indexOf(t);-1!==e&&r.splice(e,1)})),o>=c&&n){var u=function(t,e,i,n){var r=$(t.root).find(".splide__track"),o=r.find(".card--more"),s=o.find(".cta"),a=r.data("key"),c=n.slice(0,8),u=s.html();s.html('<i class="fa fa-spinner fa-spin"></i>'),i.addClass("actions-disabled"),$.ajax({type:"POST",url:"/ajax?method=fetch-premiums",data:{ids:c,key:a},dataType:"JSON",success:function(r){if(!r.premiums||!r.premiums.length)return s.html(d.get("TXT_MATCHME_NO_MORE_RESULTS")),o.css({filter:"grayscale(1)","pointer-events":"none"}),i.removeClass("actions-disabled"),!1;var a="";return r.premiums.forEach((function(t){a+='<li class="splide__slide waiting">'+t.html+"</li>";var e=parseInt(t.id),i=n.indexOf(e);-1!==i&&n.splice(i,1)})),$(e).find(".splide__list").append(a),function(t){t.find("img:not(.loaded)").each((function(){var t=$(this);$(this).addClass("loaded"),t.on("error",(function(){$(this).attr("src",t.attr("data-fallback-src"))}))}))}(e),setTimeout((function(){s.html(u),e.find(".waiting").removeClass("waiting"),i.removeClass("actions-disabled"),t.refresh()}),50),!0}})}}})),a.on("move",(function(t,e){a.length})),"IntersectionObserver"in window&&new IntersectionObserver((function(t,e){t.forEach((function(t){var e=a.Components.Autoplay;1!=t.intersectionRatio?e.pause():e.play()}))}),{threshold:1}).observe($(e)[0])}catch(t){console.error(t)}t.parents(".premium-articles--contumSliders(),this.mountPremiumCarousels()},mountMobileGallery:function(t){void 0===t&&(t={});var e=t.selector||"#mobile-profile-gallery-carousel",i=$(e);if(i.length){var n=i.find(".caption"),r=new Splide(e,{type:"loop",lazyLoad:"nearby",preloadPages:1,keyboard:!1,rewind:!1,trimSpace:!0,pagination:!1}).mount();n.html(s(r)),i.find(".splide__arrow--next"),i.find(".splide__arrow--prev"),i.find(".splide__slide").length<=1&&i.find(".splide__arrows").remove();var o=!0;r.on("move",(function(t,e){if($(".thumbs-slider").length){$(".thumbs-slider > li > button.splide__pagination__page").removeClass("active"),$(".thumbs-slider > li > button[data-index="+t+"]").addClass("active");var i=$(".thumbs-slider > li > button[data-index="+t+"]").position().left;!0===o&&(0==t?$(".thumbs-slider").animate({scrollLeft:0},300):(i>=window.innerWidth||i<=window.innerWidth)&&$(".thumbs-slider").animate({scrollLeft:102*t},300)),o=!0}n.html(s(r))})),$(".thumbs-slider > li > button.splide__pagination__page").on("click",(function(){o=!1,r.go($(this).data("index"))}))}function s(t){return t.index+1+" / "+t.length}},mountMoreArticlesSlider:function(){if($(".more-articles-carousel").length){var t=new Splide(".more-articles-carousel",{pagination:!1,rewind:!0,trimSpace:!0,gap:"1em",perMove:1,arrows:!1,keyboard:!1,perPage:4,lazyLoad:"nearby",breakpoints:{768:{perPage:3},600:{perPage:1,padding:{right:"2rem",left:"2rem"}}}}).mount();$(".more-articles-carousel").find("img").eac.attr("src",t.attr("data-fallback-src"))}))})),$(".more-articles-wrapper .splide__arrow--prev").click((function(){return t.go("-1")})),$(".more-articxt").click((function(){return t.go("+1")}))}}},x=S,E={},k="function"==typeof Map?new Map:null,T="swap",D="move",A="layoutStart",I="layoutEnd",O="layoutAbort",L="remove",C="hideStart",P="filter",R="sort",M="move",j="send",N="beforeSend",X="receive",Y="beforeReceive",H="dragReleaseEnd",q="ontouchstart"in window,G=!!window.PointerEv=[],this._counter=0,this._clearOnEmit=!1}z.prototype.on=function(t,e){if(!this._events||!t||!e)return this;var i=this._events[t];return i||(i=this._events[t]=[]),i.push(e),this},z.prototype.off=function(t,e){if(!this._events||!t||!e)return this;var i,n=this._events[t];if(!n||!n.length)return this;for(;-1!==(i=n.indexOf(e));)n.splice(i,1);return this},z.prototype.clear=function(t){if(!this._events||!t)return this;var e=this._events[t];return e&&(e.length=0,delete this._events[t]),this},z.prototype.emit=function(t){if(!this._events||!t)return this._clearOnEmit=!1,this;var e=this._events[t];if(!e||!e.length)return this._clearOnEmit=!1,this;var i,n=this._queue,r=n.length,o=arguments.length-1;o>3&&((i=[]).push.apply(i,arguments),i.shift()),n.push.apply(n,e),this._clearOnEmit&&(e.length=0,this._clearOnEmit=!1),++this._counter;for(var s=r,a=n.length;s<a;s++)if(0===o?n[s]():1===o?n[s](arguments[1]):2===o?n[s](arguments[1],arguments[2]):3===o?n[s](arguments[1],arguments[2],arguments[3]):n[s].apply(null,i),!this._events)return this;return--this._counter,this._counter||(n.length=0),this},z.prototype.burst=function(){return this._events?(this._clearOnEmit=!0,this.emit.apply(this,arguments),this):this},z.prototype.countListeners=function(t){if(!this._events)return 0;var e=this._events[t];return e?e.length:0},z.prototype.destroy=function(){return this._events?(this._queue.length=this._counter=0,this._events=null,this):this};var W=G?"pointerout":F?"MSPointerOut":"";function B(t){W&&(this._dragger=t,this._timeout=null,this._outEvent=null,this._isActive=!1,this._addBehaviour=this._addBehaviour.bind(this),this._removeBehaviour=this._removeBehaviour.bind(this),this._onTimeout=this._onTimeout.bind(this),this._resetData=this._resetData.bind(this),this._onStart=this._onStart.bind(this),this._onOut=this._onOut.bind(this),this._dragger.on("start",this._onStart))}B.prototype._addBehaviour=function(){this._isActive||(this._isActive=!0,this._dragger.on("move",this._resetData),this._dragger.on("cancel",this._removeBehaviour),this._dragger.on("end",this._removeBehaviour),window.addEventListener(W,this._onOut))},B.prototype._removeBehaviour=function(){this._isActive&&(this._dragger.off("move",this._resetData),this._dragger.off("cancel",this._removeBehaviour),this._dragger.off("end",this._removeBehaviour),window.removeEventListener(W,this._onOut),this._resetData(),t),this._timeout=null,e"!==t.pointerType&&this._addBehaviour()},B.prototype._onOut=function(t){this._dragger._getTrackedTouch(t)&&(this._resetData(),this._outEvent=t,this._timeout=window.setTimeout(this._onTimeout,100))},B.prototype._onTimeout=function(){var t=this._outEvent;this._resetData(),this._dragger.isActive()&&this._dragger._onCancel(t)},B.prototype.destroy=function(){W&&(this._dragger.off("start",this._onStart),this._removeBehaviour())};var V=["","webkit","moz","ms","o","Webkit","Moz","MS","O"],U={};function J(t,e){var i=U[e]||"";if(i)return i;for(var n=e[0].toUpperCase()+e.slice(1),r=0;r<V.length;){if((i=V[r]?V"testPassive",null,e)}catch(t){}return t}var K=window.navigator.userAgent.toLowerCase(),Z=K.indexOf("edge")>-1,tt=K.indexOf("trident")>-1,et=K.indexOf("firefox")>-1,it=K.indexOf("android")>-1,nt=!!Q()&&{passive:!0},rt="touchAction",ot=J(document.documentElement.style,rt),st="auto";function at(t,e){this._element=t,this._emitter=new z,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._isActive=!1,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this._edgeHack=null,(Z||tt)&&(G||F)&&(this._edgeHack=new B(this)),this.setCssProps(e),this._touchAction||this.setTouchAction(st),t.addEventListener("dragstart",at._preventDefault,!1),t.addEventListener(at._inputEvents.start,this._onStart,nt)}at._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},at._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"},at._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},at._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},at._inputEvents=q?at._touchEvents:G?at._pointerEvents:F?at._msPointerEvents:at._mouseEvents,at._emitter=new z,at._emitterEvents={start:"start",move:"move",end:"end",cancel:"cancel"},at._activeInstances=[],at._preventDefault=function(t){t.preventDefault&&!1!==t.cancelable&&t.preventDefault()},at._activateInstance=function(t){at._activeInstances.indexOf(t)>-1||(at._activeInstances.push(t),at._emitter.on(at._emitterEvents.move,t._onMove),at._emitter.on(at._emitterEvents.cancel,t._onCancel),at._emitter.on(at._emitterEvents.end,t._onEnd),1===at._activeInstances.length&&at._bindListeners())},at._deactivateInstance=function(t){var e=at._activeInstances.indexOf(t);-1!==e&&(at._activeInstances.splice(e,1),at._emitter.off(at._emitterEvents.move,t._onMove),at._emitter.off(at._emitterEvents.cancel,t._onCancel),at._emitter.off(at._emitterEvents.end,t._onEnd),at._activeInstances.length||at._unbindListeners())},at._bindListeners=function(){window.addEventListener(at._inputEvents.move,at._onMove,nt),window.addEventListener(at._inputEvents.end,at._onEnd,nt),at._inputEvents.cancel&&window.addEventListener(at._inputEvents.cancel,at._onCancel,nt)},at._unbindListeners=function(){window.removeEventListener(at._inputEvents.move,at._onMove,nt),window.removeEventListener(at._inputEvents.end,at._onEnd,nt),at._inputEvents.cancel&&window.removeEventListener(at._inputEvents.cancel,at._onCancel,nt)},at._getEventPointerId=function(t){return"number"==typeof t.pointerId?t.pointerId:t.changedTouches?t.changedTouches[0]?t.changedTouches[0].identifier:null:1},at._getTouchById=function(t,e){if("number"==typeof t.pointerId)return t.pointerId===e?t:null;if(t.changedTouches){for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===e)return t.changedTouches[i];return null}return t},at._onMove=function(t){at._emitter.emit(at._emitterEvents.move,t)},at._onCancel=function(t){at._emitter.emt._emitter.emit(at._emitterEvents.end,t)},at.prototype._reset=function(){this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._isActive=!1,at._deactivateInstance(this)},at.prototype._createEvent=function(t,e){var i=this._getTrackedTouch(e);return{type:t,srcEvent:e,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:t===at._emitterEvents.start?0:this.getDeltaTime(),isFirst:t===at._emitterEvents.start,isFinal:t===at._emitterEvents.end||t===at._emitterEvents.cancel,pointerType:e.pointerType||(e.touches?"touch":"mouse"),identifier:this._pointerId,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:i.target}},at.prototype._emit=function(t,e){this._emitter.emit(t,this._createEvent(t,e))},at.prototype._getTrackedTouch=function(t){return null===this._pointerId?null:at._getTouchById(t,this._pointerId)},at.prototype._onStart=function(t){if(!this._isDestroyed&&null===this._pointerId&&(this._pointerId=at._getEventPointerId(t),null!==this._pointerId)){var e=this._getTrackedTouch(t);this._startX=this._currentX=e.clientX,this._startY=this._currentY=e.clientY,this._startTime=Date.now(),this._isActive=!0,this._emit(at._emitterEvents.start,t),this._isActive&&at._activateInstance(this)}},at.prototype._onMove=function(t){var e=this._getTrackedTouch(t);e&&(this._currentX=e.clientX,this._currentY=e.clientY,this._emit(at._emitterEvents.move,t))},at.prototype._onCancel=function(t){this._getTrackedTouch(t)&&(this._emit(at._emitterEvents.cancel,t),this._reset())},at.prototype._onEnd=function(t){this._getTrackedTouch(t)&&(this._emit(at._emitterEvents.end,t),this._reset())},at.prototype.isActive=function(){return this._isActive},at.prototype.setTouchAction=function(t){this._touchAction=t,ot&&(this._cssProps[ot]="",this._element.style[ot]=t),q&&(this._element.removeEventListener(at._touchEvents.start,at._preventDefault,!0),(this._element.style[ot]!==t||et&&it)&&this._element.addEventListener(at._touchEvents.start,at._preventDefault,!0))},at.prototype.setCssProps=function(t){if(t){var e,i,n=this._cssProps,r=this._element;for(e in n)r.style[e]=n[e],delete n[e];for(e in t)t[e]&&(e!==rt?(i=J(r.style,e))&&(n[i]="",r.style[i]=t[e]):this.setTouchAction(t[e]))}},at.prototype.getDeltaX=function(){return this._currion(){return this._currenis.getDeltaY();return Math._startTime?Date.now()-this._startTime:0},at.prototype.on=function(t,eoff=function(t,e){this._emitter.off(t,e)},at.prototype.destroy=function(){if(!this._isDestroyed){var t=this._element;for(var e in this._edgeHack&&this._edgeHack.destroy(),this._reset(),this._emitter.destroy(),t.removeEventListener(at._inputEvents.start,this._onStart,nt),t.removeEventListener("dragstart",at._preventDefault,!1),t.removeEventListener(at._touchEvents.start,at._preventDefault,!0),this._cssProps)t.style[e]=this._cssProps[e],delete this._cssProps[e];this._element=null,this._isDestroyed=!0}};var ct=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFhis.setTimeout((function(){t(Date.now())}),16.666666666666668)}).bind(window);function ut(t){this._nextStep=null,this._lanes=[],this._stepQueue=[],this._stepCallbacks={},this._step=this._step.bind(this);foreue=[],this.indices={},this.callbacks={}}ut.prototype._step=function(t){var e,i,n,r,o,s,a=this._lanes,c=this._stepQueue,u=this._stepCallbacks;for(this._nextStep=null,e=0;e<a.length;e++){for(r=a[e].queue,o=a[e].callbacks,s=a[e].indices,i=0;i<r.length;i++)(n=r[i])&&(c.push(n),u[n]=o[n],delete o[n],delete s[n]);r.length=0}for(e=0;e<c.length;e++)u[n=c[e]]&&u[n](t),delete u[n];c.length=0},ut.prototype.add=function(t,e,i){this._lanes[t].add(e,i),this._nextStep||(this._nexte=function(t,e){this._lanes[t].remove(e)},lt.prototype.add=function(t,e){var i=this.indices[t];void 0!==i&&(this.queue[i]=void 0),this.queue.push(t),this.callbacks[t]=e,this.indices[t]=this.queue.length-1},lt.prototype.remove=function(t){var e=this.indices[t];void 0!==e&&(this.queue[e]=void 0,delete this.callbacks[t],delete this.indices[t])};var ht="layoutRead",ft="layoutWrite",dt="visibilityRead",pt="visibilityWrite",_t="dragStartRead",vt="dragStartWrite",gt="dragMoveRead",mt="dragMoveWrite",yt="dragScrollRead",bt="dragScrollWrite",wt="dragSortRead",St="placeholderLayoutRead",xt="placeholderLayoutWrite",Et="placeholderResizeWrite",kt="autoScrollRead",Tt="autoScrollWrite",Dt="debounceRead",At=0,It=new ut(3);function Ot(t){It.remove(At,ht+t),It.remove(2,ft+t)}function Lt(t){It.remove(At,dt+t),It.remove(2,pt+t)}function Ct(t){It.remove(At,_t+t),It.remove(2,vt+t)}function Pt(t){It.remove(At,gt+t),It.remove(2,mt+t)}function Rt(t){It.remove(At,yt+t),It.remove(2,bt+t)}function Mt(t,e){It.add(1,wt+t,e)}function jt(t){It.remove(At,St+t),It.remove(2,xt+t)}function Nt(t,e){It.add(ion";function Yt(t){return typeof t===Xt}var Ht="function"==typeof WeakMap?new WeakMap:null;function qt(t,e){var i=Ht&&Ht.get(t);return i||(i=window.getComputedStyle(t,null),Ht&&Ht.set(t,i)),i.getPropertyValue(e)}function Gt(t,e){return parseFloat(qt(t,e))||0}var $t,Ft=document.documentElement,zt=document.body,Wt={value:0,offset:0};function Bt(t){return t===window||t===Ft||t===zt?window:t}function Vt(t){return t===window?t.pageYOffset:t.scrollTop}function Jt(t){return t===window?Ft.scrollWidth-Ft.clientWidth:t.scrollWidth-t.clientWidth}function Qt(t){return t===window?Ft.scrollHeight-Ft.clientHeight:t.scrollHeight-t.clientHeight}function Kt(t,e){if(e=e||{},t===window)e.width=Ft.clientWidth,e.height=Ft.clientHeight,e.left=0,e.right=e.width,e.top=0,e.bottom=e.height;else{var i=t.getBoundingClientRect(),n=t.clientLeft||Gt(t,"border-left-width"),r=t.clientTop||Gt(t,"border-top-width");e.width=t.clientWidth,e.height=t.clientHeight,e.left=i.left+n,e.right=e.left+e.width,e.top=i.top+r,e.bottom=e.top+e.height}return e}function Zt(t){return t._drag._getGrid()._settings.dragAutoScroll}function te(t){if(t._drag&&t._isActive){var e=t._drag;e._scrollDiffX=e._scrollDiffY=0,t._setTranslate(e._left,e._top)}}function ee(t,e,i,n){return Wt.value=Math.min(n/2,t),Wt.o],this.createItem=t,this.releaseItem=e}function oe(t,e){var i=function(t,e){return function(t,e){return!(t.left+t.width<=e.left||e.left+e.width<=t.left||t.top+t.height<=e.top||e.top+e.height<=t.top)}(t,e)?(Math.min(t.left+t.width,e.left+e.width)-Math.max(t.left,e.left))*(Math.min(t.top+t.height,e.top+e.height)-Math.max(t.top,e.top)):0}(t,e);return i?i/(Math.min(t.width,e.width)*Math.min(t.height,e.height))*100:0}ie.prototype.reset=function(){this.isActive&&this.onStop(),this.item=null,this.element=null,this.isActive=!1,this.isEnding=!1,this.direction=null,this.value=null,this.maxValue=0,this.threshold=0,this.distance=0,this.speed=0,this.duration=0,this.action=null},ie.prototype.hasReachedEnd=function(){return 4&this.direction?this.value>=this.maxValue:this.value<=0},ie.prototype.computeCurrentScrollValue=function(){return null===this.value?1&this.direction?Vt(this.element):Ut(this.element):Math.max(0,Math.min(this.value,this.maxValue))},ie.prototype.computeNextScrollValue=function(t){var e=this.speed*(t/1e3),i=4&this.direction?this.value+e:this.value-e;return Math.max(0,Math.min(i,this.maxValue))},ie.prototype.computeSpeed=($t={direction:null,threshold:0,distance:0,value:0,maxValue:0,deltaTime:0,duration:0,isEnding:!1},function(t){var e=this.item,i=Zt(e).speed;return Yt(i)?($t.direction=this.direction,$t.threshold=this.threshold,$t.distance=this.distance,$t.value=this.value,$t.maxValue=this.maxValue,$t.duration=this.duration,$t.speed=this.speed,$t.deltaTime=t,$t.isEnding=this.isEnding,i(e,this.element,$t)):i}),ie.prototype.tick=function(t){return this.isActive||(this.isActive=!0,this.onStart()),this.value=this.computeCurrentScrollValue(),this.speed=this.computeSpeed(t),this.value=this.computeNextScrollValue(t),this.duration+=t,this.value},ie.prototype.onStart=function(){var t=this.item,e=Zt(t).onStart;Yt(e)&&e(t,this.element,this.direction)},ie.prototype.onStop=function(){var t=this.item,e=Zt(t).onStop;Yt(e)&&e(t,this.element,this.direction),t._drag&&t._drag.sort()},ne.prototype.reset=function(){this.requestX&&(this.requestX.action=null),this.requestY&&(this.requestY.action=null),this.element=null,this.requestX=null,this.requestY=null,this.scrollLeft=0,this.scrollTop=0},ne.prototype.addRequest=function(t){1&t.direction?(this.removeRequest(this.requestX),this.requestX=t):(this.removeRequest(this.requestY),this.requestY=t),t.action=this},ne.prototype.removeRequest=function(t){t&&(this.requestX===t?(this.requestX=null,t.action=null):this.requestY===t&&(this.requestY=null,t.action=null))},ne.prototype.computeScrollValues=function(){this.scrollLeft=this.requestX?this.requestX.value:Vt(this.element),this.scrollTop=this.requestY?this.requestY.value:Ut(this.element)},ne.prototype.scroll=function(){var t=this.element;t&&(t.scrollTo?t.scrollTo(this.scrollLeft,this.scrollTop):(t.scrollLeft=this.scrollLeft,t.scroeturn this.pool.pop()||this.createItem()},re.prototype.release=function(t){this.releaseItem(t),-1===this.pool.indexOf(type.reset=function(){this.pool.length=0};var se={width:0,height:0,left:0,right:0,top:0,bottom:0},ae={width:0,height:0,left:0,right:0,top:0,bottom:0};function ce(){this._isDestroyed=!1,this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,this._items=[],this._actions=[],this._requests={},this._requests[1]={},this._requests[2]={},this._requestOverlapCheck={},this._dragPositions={},this._dragDirections={},this._overlapCheckInterval=150,this._requestPool=new re((function(){return new ie}),(functionionPool=new re((function(){return new ne}),(function(t){t.reset()})),this._readTick=this._readTick.bind(this),this._writeTick=this._writeTick.bind(this)}ce.AXIS_X=1,ce.AXIS_Y=2,ce.FORWARD=4,ce.BACKWARD=8,ce.LEFT=9,ce.RIGHT=5,ce.UP=10,ce.DOWN=6,ce.smoothSpeed=function(t,e,i){return function(n,r,o){var s=0;if(!o.isEnding)if(o.threshold>0){var a=o.threshold-Math.max(0,o.distance);s=t/o.threshold*a}else s=t;var c=o.speed,u=s;return c===s?u:c<s?(u=c+e*(o.deltaTime/1e3),Math.min(s,u)):(u=c-i*(o.deltaTime/1e3),Math.max(s,u))}},ce.pointerHandle=function(t){var e={left:0,top:0,width:0,height:0},i=t||1;return function(t,n,r,o,s,a,c){return e.left=a-.5*i,e.top=c-.5*i,e.width=i,e.height=i,e}},ce.prototype._readTick=function(t){this._isDestroyed||(t&&this._tickTime?(this._tickDeltaTime=t-this._tickTime,this._tickTime=t,this._updateRequests(),this._updateActions()):(this._tickTime=t,this._tickDeltaTime=0))},ce.prototype._writeTick=function(){this._isDestroyed||(this._applyActions(),Nt(this._readTick,this._writeTick))},ce.prototype._startTicking=function(){this._isTicking=!0,Nt(this._readTick,this._writeTick)},ce.prototype._stopTicking=function(){this._isTicking=!1,this._tickTime=0,this._tickDeltaTime=0,It.remove(At,kt),It.remove(2,Tt)},ce.prototype._getItemHandleRect=function(t,e,i){var n=t._drag;if(e){var r=n._dragMoveEvent||n._dragStartEvent,o=e(t,n._clientX,n._clientY,t._width,t._height,r.clientX,r.clientY);i.left=o.left,i.top=o.top,i.width=o.width,i.height=o.height}else i.left=n._clientX,i.top=n._clientY,i.width=t._width,i.height=t._height;return i.right=i.left+i.width,i.bottom=i.top+i.height,i},ce.prototype._requestItemScroll=function(t,e,i,n,r,o,s){var a=this._requests[e],c=a[t._id];c?c.element===i&&c.direction===n||c.reset():c=this._requestPool.pick(),c.item=t,c.element=i,c.direction=n,c.threshold=r,c.distance=o,c.maxValue=s,a[t._id]=c},ce.prototype._cancelItemScroll=function(t,e){var i=this._requests[e],n=i[t._id];n&&(n.action&&n.action.removeRequest(n),this._requestPool.release(n),delete i[t._id])},ce.prototype._checkItemOverlap=function(t,e,i){var n=Zt(t),r=Yt(n.targets)?n.targets(t):n.targets,o=n.threshold,s=n.safeZone;if(!r||!r.length)return e&&this._cancelItemScroll(t,1),void(i&&this._cancelItemScroll(t,2));var a=this._dragDirections[t._id],c=a[0],u=a[1];if(!c&&!u)return e&&this._cancelItemScroll(t,1),void(i&&this._cancelItemScroll(t,2));for(var l=this._getItemHandleRect(t,n.handle,se),h=ae,f=null,d=null,p=!0,_=!0,v=0,g=0,m=null,y=null,b=0,w=0,S=0,x=null,E=-1/0,k=0,T=0,D=null,A=0,I=0,O=null,L=-1/0,C=0,P=0,R=null,M=0,j=0,N=0;N<r.length;N++)f=r[N],p=e&&c&&2!==f.axis,_=i&&u&&1!==f.axis,g=f.priority||0,(!p||g<E)&&(!_||g<L)||(d=Bt(f.element||f),w=p?Jt(d):-1,S=_?Qt(d):-1,(w||S)&&((v=oe(l,h=Kt(d,h)))<=0||(p&&g>=E&&w>0&&(g>E||v>T)&&(y=null,m=ee("number"==typeof f.threshold?f.threshold:o,s,l.width,h.width),5===c?(b=h.right+m.offset-l.right)<=m.value&&Vt(d)<w&&(y=5):9===c&&(b=l.left-(h.left-m.offset))<=m.value&&Vt(d)>0&&(y=9),null!==y&&(x=d,E=g,k=m.value,T=v,D=y,A=b,I=w)),_&&g>=L&&S>0&&(g>L||v>P)&&(y=null,m=ee("number"==typeof f.threshold?f.threshold:o,s,l.height,h.height),6===u?(b=h.bottom+m.offset-l.bottom)<=m.value&&Ut(d)<S&&(y=6):10===u&&(b=l.top-(h.top-m.offset))<=m.value&&Ut(d)>0&&(y=10),null!==y&&(O=d,L=g,C=m.value,P=v,R=y,M=b,j=S)))));e&&(x?this._requestItemScroll(t,1,x,D,k,A,I):this._cancelItemScroll(t,1)),i&&(O?this._requestItemScroll(t,2,O,R,C,M,j):this._cancelItemScroll(t,2))},ce.prototype._updateScrollRequest=function(t){for(var e=t.item,i=Zt(e),n=Yt(i.targets)?i.targets(e):i.targets,r=n&&n.length||0,o=i.threshold,s=i.safeZone,a=this._getItemHandleRect(e,i.handle,se),c=ae,u=null,l=null,h=!1,f=null,d=null,p=null,_=null,v=null,g=0;g<r;g++)if((l=Bt((u=n[g]).element||u))===t.element){if(h=!!(1&t.direction)){if(2===u.axis)continue}else if(1===u.axis)continue;if((_=h?Jt(l):Qt(l))<=0)break;if(oe(a,c=Kt(l,c))<=0)break;if(f=ee("number"==typeof u.threshold?u.threshold:o,s,h?a.width:a.height,h?c.width:c.height),(d=9===t.direction?a.left-(c.left-f.offset):5===t.direction?c.right+f.offset-a.right:10===t.direction?a.top-(c.top-f.offset):c.bottom+f.offset-a.bottom)>f.value)break;if(p=h?Vt(l):Ut(l),v=4&t.direction?p>=_:p<=0)break;return t.maxValue=_,t.threshold=f.value,t.distance=d,t.isEnding=!1,!0}return!0===i.smoothStop&&t.speed>0?(null===v&&(v=t.hasReachedEnd()),t.isEnding=!v):t.isEnding=!1,t.isEnding},ce.prototype._updateRequests=function(){for(var t,e,i,n,r,o,s,a=this._items,c=this._requests[1],u=this._requests[2],l=0;l<a.length;l++)t=a[l],r=(n=this._requestOverlapCheck[t._id])>0&&this._tickTime-n>this._overlapCheckInterval,o=!0,(e=c[t._id])&&e.isActive&&(o=!this._updateScrollRequest(e))&&(r=!0,this._cancelItemScroll(t,1)),s=!0,(i=u[t._id])&&i.isActive&&(s=!this._updateScrollRequest(i))&&(r=!0,this._cancelItemScroll(t,2)),r&&(this._requestOverlapCheck[t._id]=0,this._checkItemOverlap(t,o,s))},ce.prototype._requestAction=function(t,e){for(var i=this._actions,n=1===e,r=null,o=0;o<i.length;o++){if(r=i[o],t.element===r.element){if(n?r.requestX:r.requestY)return void this._cancelItemScroll(t.item,e);break}r=null}r||(r=this._actionPool.pick()),r.element=t.element,r.addRequest(t),t.tick(this._tickDeltaTime),i.push(r)},ce.prototype._updateActions=function(){var t,e,i,n,r=this._items,o=this._requests,s=this._actions;for(n=0;n<r.length;n++)t=r[n]._id,e=o[1][t],i=o[2][t],e&&this._requestAction(e,1),i&&this._requestAction(i,2);for(n=0;n<s.length;n++)s[n].computeScrollValues()},ce.prototype._applyActions=function(){var t,e=this._actions,i=this._items;if(e.length){for(t=0;t<e.length;t++)e[t].scroll(),this._actionPool.release(e[t]);for(e.length=0,t=0;t<i.length;t++)(n=i[t])._drag&&n._drag._prepareScroll();var n;for(t=0;t<i.length;t++)te(i[t])}},ce.prototype._updateDragDirection=function(t){var e=this._dragPositions[t._id],i=this._dragDirections[t._id],n=t._drag._left,r=t._drag._top;if(e.length){var o=e[0],s=e[1];i[0]=n>o?5:n<o?9:i[0]||0,i[1]=r>s?6:r<s?10:i[1]||0}e[0]=n,e[1]=r},ce.prototype.addItem=function(t){this._isDestroyed||-1===this._items.indexOf(t)&&(this._items.push(t),this._requestOverlapCheck[t._id]=this._tickTime,this._dragDirections[t._id]=[0,0],this._dragPositions[t._id]=[],this._isTicking||this._startTicking())},ce.prototype.updateItem=function(t){this._isDestroyed||this._dragDirections[t._id]&&(this._updateDragDirection(t),this._requestOverlapCheck[t._id]||(this._requestOverlapCheck[t._id]=this._tickTime))},ce.prototype.removeItem=function(t){if(!this._isDestroyed){var e=this._items.indexOf(t);if(-1!==e){var i=t._id;this._requests[1][i]&&(this._cancelItemScroll(t,1),delete this._requests[1][i]),this._requests[2][i]&&(this._cancelItemScroll(t,2),delete this._requests[2][i]),delete this._requestOverlapCheck[i],delete this._dragPositions[i],delete this._dragDirections[i],this._items.splice(e,1),this._isTicking&&!this._items.length&&this._stopTicking()}}},ce.prototype.isItemScrollingX=function(t){var e=this._requests[1][t._id];return!(!e||!e.isActive)},ce.prototype.isItemScrollingY=function(t){var e=this._requests[2][t._id];return!(!e||!mScrollingX(t)||this.isItemScrollingY(t)},ce.prototype.destroy=function(){if(!this._isDestroyed){for(var t=this._items.slice(0),e=0;e<t.length;e++)this.removeItem(t[e]);this._actions.length=0,this._requestPool.reset(),this._actionPool.reset(),this._isDestroyed=!0}};var ue=window.Element.prototype,le=ue.matches||ue.matchesSelector||ue.webkitMatchesSelector||ue.mozMatchesSelector||u!1};function he(t,e){return le.call(t,e)}function fe(t,e){e&&(t.classList?t.classList.add(e):he(t,"."+e)||(t.className+=" "+e))}var de=[];function pe(t,e,i){var n="number"==typeof i?i:-1;n<0&&(n=t.length-n+1),t.splice.apply(t,de.concat(n,0,e)),de.length=0}function _e(t,e,i){var n=Math.max(0,t.length-1+(i||0));return e>n?n:e<0?Math.max(n+e+1,0):e}function ve(t,e,i){if(!(t.length<2)){var n=_e(t,e),r=_e(t,i);n!==r&&t.splice(r,0,t.splice(n,1)[0])}}function ge(t,e,i){if(!(t.length<2)){var n,r=_e(t,e),o=_e(t,i);r!==o&&(n=t[r],t[r]=t[o],t[o]=n)}}var me=J(document.documentElement.style,"transform")||"transform",ye=/([A-Z])/g,be=/^(webkit-|moz-|ms-|o-)/,we=/^(-m-s-)/;function Se(t){var e=t.replace(ye,"-$1").toLowerCase();return(e=e.replace(be,"-$1")).replace(we,"-ms-")}var xe=Se(me),Ee="none",ke="inline",Te="none",De="display";function Ae(t){var e=qt(t,xe);if(!e||e===Ee)return!1;var i=qt(t,De);return i!==ke&&i!==Te}function Ie(t){for(var e=document,i=t||e;i&&i!==e&&"static"===qt(i,"position")&&!Ae(i);)i=i.parentElement||e;return i}var Oe={},Le={},Ce={};function Pe(t,e){var i,n=e||{};return n.left=0,n.top=0,t===document||(n.left=window.pageXOffset||0,n.top=window.pageYOffset||0,t.self===window.self||(i=t.getBoundingClientRect(),n.left+=i.left,n.top+=i.top,n.left+=Gt(t,"border-left-width"),n.top+=Gt(t,"border-top-width"))),n}function Re(t,e,i){return Ce.left=0,Ce.top=0,t===e||i&&(t=Ie(t))===(e=Ie(e))||(Pe(t,Oe),Pe(e,Le),Ce.leftn"auto"===t||"scroll"===t||"overlay"===t}function je(t){return Me(qt(t,"overflow"))||Me(qt(t,"overflow-x"))||Me(qt(t,"overflow-y"))}function Ne(t,e){for(e=e||[];t&&t!==document;)t.getRootNode&&t instanceof DocumentFragment?t=t.getRootNode().host:(je(t)&&e.push(t),t=t.parentNode);return e.push(window),e}var Xe={},Ye=/^matrix3d/,He=/([^,]*,){4}/,qe=/([^,]*,){12}/,Ge=/[^,]*,/;function $e(t){Xe.x=0,Xe.y=0;var e=qt(t,xe);if(!e||"none"===e)return Xe;var i=Ye.test(e),n=e.replace(i?qe:He,""),r=n.replace(Ge,"");return Xe.x=parseFloat(n)||0,Xe.y=parseFloat(r)||0,Xe}function Fe(t,e){e&&(t.classList?t.classList.remove(e):he(t,"."+e)&&(t.className=(" "+t.className+" ").replace(" "+e+" "," ").trim()))}var ze,We,Be,Ve,Ue=/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1,Je=0,Qe=!!Q()&&{passive:!0};function Ke(t){var e=t._element,i=t.getGrid(),n=i._settings;this._item=t,this._gridId=i._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=Yt(n.dragStartPredicate)?n.dragStartPredicate:Ke.defaultStartPredicate,this._startPredicateState=Je,this._startPredicateResult=void 0,this._isSortNeeded=!1,this._sortTimer=void 0,this._blockedSortIndex=null,this._sortX1=0,this._sortX2=0,this._sortY1=0,this._sortY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareStart=this._prepareStart.bind(this),this._applyStart=this._applyStart.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._handleSort=this._handleSort.bind(this),this._handleSortDelayed=this._handleSortDelayed.bind(this),this._handle=n.dragHandle&&e.querySelector(n.dragHandle)||e,this._dragger=new at(this._handle,n.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}function Ze(t,e){var i,n,r={};if(Array.isArray(e))for(n=0;n<e.length;n++)r[i=e[n]]=qt(t,Se(i));else for(i in e)r[i]=qt(t,Se(i));return r}Ke.autoScroller=new ce,Ke.defaultStartPredicate=function(t,e,i){var n=t._drag;if(e.isFirst&&e.srcEvent.button)return!1;if(!Ue&&e.isFirst&&!0===e.srcEvent.isTrusted&&!1===e.srcEvent.defaultPrevented&&!1===e.srcEvent.cancelable)return!1;if(!e.isFinal){var r=n._startPredicateData;if(!r){var o=i||n._getGrid()._settings.dragStartPredicate||{};n._startPredicateData=r={distance:Math.max(o.distance,0)||0,delay:Math.max(o.delay,0)||0}}return r.delay&&(r.event=e,r.delayTimer||(r.delayTimer=window.setTimeout((function(){r.delay=0,n._resolveStartPredicate(r.event)&&(n._forceResolveStartPredicate(r.event),n._resetStartPredicate())}),r.delay))),n._resolveStartPredicate(e)}n._finishStartPredicate(e)},Ke.defaultSortPredicate=(ze={},We={},Be={},Ve=[],function(t,e){var i=t._drag,n=i._getGrid(),r=e&&"number"==typeof e.threshold?e.threshold:50,o=e&&e.action===T?T:D,s=e&&e.migrateAction===T?T:D;r=Math.min(Math.max(r,1),100),ze.width=t._width,ze.height=t._height,ze.left=i._clientX,ze.top=i._clientY;var a=function(t,e,i){var n,r,o,s,a,c,u,l,h,f,d=null,p=e._settings.dragSort,_=-1;if(!0===p?(Ve[0]=e,r=Ve):Yt(p)&&(r=p.call(e,t)),!r||!Array.isArray(r)||!r.length)return d;for(f=0;f<r.length;f++)if(!(o=r[f])._isDestroyed){for(o._updateBoundingRect(),c=Math.max(0,o._left),u=Math.max(0,o._top),l=Math.min(window.innerWidth,o._right),h=Math.min(window.innerHeight,o._bottom),s=o._element.parentNode;s&&s!==document&&s!==document.documentElement&&s!==document.body;)if(s.getRootNode&&s instanceof DocumentFragment)s=s.getRootNode().host;else{if("visible"!==qt(s,"overflow")&&(a=s.getBoundingClientRect(),c=Math.max(c,a.left),u=Math.max(u,a.top),l=Math.min(l,a.right),h=Math.min(h,a.bottom)),"fixed"===qt(s,"position"))break;s=s.parentNode}c>=l||u>=h||(We.left=c,We.top=u,We.width=l-c,We.height=h-u,(n=oe(ze,We))>i&&n>_&&(_=n,d=o))}return Ve.length=0,d}(t,n,r);if(!a)return null;var c,u,l,h=t.getGrid()!==a,f=0,d=0,p=0,_=-1,v=!1;for(a===n?(ze.left=i._gridX+t._marginLeft,ze.top=i._gridY+t._marginTop):(a._updateBorders(1,0,1,0),f=a._left+a._borderLeft,d=a._top+a._borderTop),l=0;l<a._items.length;l++)(c=a._items[l])._isActive&&c!==t&&(v=!0,We.width=c._width,We.height=c._height,We.left=c._left+c._marginLeft+f,We.top=c._top+c._marginTop+d,(u=oe(ze,We))>p&&(_=l,p=u));return h&&p<r&&(_=v?_:0,p=r),p>=r?(Be.grid=a,Be.index=_,Be.action=h?s:o,Be):null}),Ke.prototype.stop=function(){if(this._isActive)if(this._isMigrating)this._finishMigration();else{var t=this._item,e=t._id;if(Ke.autoScroller.removeItem(t),Ct(e),Pt(e),Rt(e),this._cancelSort(),this._isStarted){this._unbindScrollListeners();var i=t._element,n=this._getGrid(),r=n._settings.itemDraggingClass;i.parentNode!==n._element&&(n._element.appendChild(i),t._setTranslate(this._gridX,this._gridY),r&&i.clientWidth),Fe(i,r)}this._reset()}},Ke.prototype.sort=function(t){var e=this._item;this._isActive&&e._isActive&&this._dragMoveEvent&&(!0===t?this._handleSort():Mt(e._id,this._handleSort))},Ke.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._dragger.destroy(),Ke.autoScroller.removeItem(this._item),thi=function(){return E[this._gridId]||null},Ke.prototype._reset=function(){this._isActive=!1,this._isStarted=!1,this._container=null,this._containingBlock=null,this._dragStartEvent=null,this._dragMoveEvent=null,this._dragPrevMoveEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._clientX=0,this._clientY=0,this._scrollDiffX=0,this._scrollDiffY=0,this._moveDiffX=0,this._moveDiffY=0,this._containerDiffX=0,this._containerDiffY=0},Ke.prototype._bindScrollListeners=function(){var t,e,i=this._getGrid()._element,n=this._container,r=this._scrollers;if(r.length=0,Ne(this._item._element.parentNode,r),n!==i)for(Ne(i,t=[]),e=0;e<t.length;e++)r.indexOf(t[e])<0&&r.push(t[e]);for(e=0;e<r.length;e++)r[e].addEventListener("scroll",this._onScroll,Qe)},Ke.prototype._unbindScrollListeners=function(){var t,e=this._scrollers;for(t=0;t<e.length;t++)e[t].removeEventListener("scroll",this._onScroll,Qe);e.length=0},Ke.prototype._resolveStartPredicate=function(t){var e=this._startPredicateData;if(!(t.distance<e.distance||e.delay))return this._resetStartPredicate(),!0},Ke.prototype._forceResolveStartPredicate=function(t){this._isDestroyed||1!==this._startPredicateState||(this._startPredicateState=2,this._onStart(t))},Ke.prototype._finishStartPredicate=function(t){var e=this._item._element,i=Math.abs(t.deltaX)<2&&Math.abs(t.deltaY)<2&&t.deltaTime<200;this._resetStartPredicate(),i&&function(t){if("a"===t.tagName.toLowerCase()){var e=t.getAttribute("href");if(e){var i=t.getAttribute("target");i&&"_self"!==i?window.open(e,i):window.location.href=e}}}(e)},Ke.prototype._resetHeuristics=function(t,e){this._blockedSortIndex=null,this._sortX1=this._sortX2=t,this._sortY1=this._sortY2=e},Ke.prototype._checkHeuristics=function(t,e){var i=this._getGrid()._settings.dragSortHeuristics,n=i.minDragDistance;if(n<=0)return this._blockedSortIndex=null,!0;var r=t-this._sortX2,o=e-this._sortY2,s=n>3&&i.minBounceBackAngle>0;if(s||(this._blockedSortIndex=null),Math.abs(r)>n||Math.abs(o)>n){if(s){var a=Math.atan2(r,o),c=Math.atan2(this._sortX2-this._sortX1,this._sortY2-this._sortY1),u=Math.atan2(Math.sin(a-c),Math.cos(a-c));Math.abs(u)>i.minBounceBackAngle&&(this._blockedSortIndex=null)}return this._sortX1=this._sortX2,this._sortY1=this._sortY2,this._sortX2=t,this._sortY2=e,!0}return!1},Ke.prototype._resetStartPredicate=function(){var t=this._startPredicateData;t&&(t.delayTimer&&(t.delayTimer=window.clearTimeout(t.delayTimer)),this._startPredicateData=null)},Ke.prototype._handleSort=function(){if(this._isActive){var t=this._getGrid()._settings;if(!t.dragSort||!t.dragAutoScroll.sortDuringScroll&&Ke.autoScroller.isItemScrolling(this._item))return this._sortX1=this._sortX2=this._gridX,this._sortY1=this._sortY2=this._gridY,this._isSortNeeded=!0,void(void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)));var e=this._checkHeuristics(this._gridX,this._gridY);if(this._isSortNeeded||e){var i=t.dragSortHeuristics.sortInterval;i<=0||this._isSortNeeded?(this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),this._checkOverlap()):void 0===this._sortTimer&&(this._sortTimer=window.setTimeout(this._handleSortDelayed,i))}}},Ke.prototype._handleSortDelayed=function(){this._isSortNeeded=!0,this._sortTimer=void 0,Mt(this._item._id,this._handleSort)},Ke.prototype._cancelSort=function(){var t;this._isSortNeeded=!1,void 0!==this._sortTimer&&(this._sortTimer=window.clearTimeout(this._sortTimer)),t=this._item._id,It.remove(1,wt+t)},Ke.prototype._finishSort=function(){var t=this._getGrid()._settings.dragSort&&(this._isSortNeeded||void 0!==this._sortTimer);this._cancelSort(),t&&this._checkOverlap()},Ke.prototype._checkOverlap=function(){if(this._isActive){var t,e,i,n,r,o,s,a,c=this._item,u=this._getGrid()._settings;(t=Yt(u.dragSortPredicate)?u.dragSortPredicate(c,this._dragMoveEvent):Ke.defaultSortPredicate(c,u.dragSortPredicate))&&"number"==typeof t.index&&(s=t.action===T?T:D,a=(e=c.getGrid())!==(n=t.grid||e),i=e._items.indexOf(c),r=_e(n._items,t.index,a&&s===D?1:0),(a||r!==this._blockedSortIndex)&&(a?(this._blockedSortIndex=null,o=n._items[r],e._hasListeners(N)&&e._emit(N,{item:c,fromGrid:e,fromIndex:i,toGrid:n,toIndex:r}),n._hasListeners(Y)&&n._emit(Y,{item:c,fromGrid:e,fromIndex:i,toGrid:n,toIndex:r}),c._gridId=n._id,this._isMigrating=c._gridId!==this._gridId,e._items.splice(i,1),pe(n._items,c,r),c._sortData=null,e._hasListeners(j)&&e._emit(j,{item:c,fromGrid:e,fromIndex:i,toGrid:n,toIndex:r}),n._hasListeners(X)&&n._emit(X,{item:c,fromGrid:e,fromIndex:i,toGrid:n,toIndex:r}),s===T&&o&&o.isActive()&&n._items.indexOf(o)>-1&&n.send(o,e,i,{appendTo:this._container||document.body,layoutSender:!1,layoutReceiver:!1}),e.layout(),n.layout()):i!==r&&(this._blockedSortIndex=i,(s===T?ge:ve)(e._items,i,r),e._hasListeners(M)&&e._emit(M,{item:c,fromIndex:i,toIndex:r,action:s}),e.layout())))}},Ke.prototype._finishMigration=function(){var t,e,i=this._item,n=i._dragRelease,r=i._element,o=i._isActive,s=i.getGrid(),a=s._element,c=s._settings,u=c.dragContainer||a,l=this._getGrid()._settings,h=r.parentNode,f=o?l.itemVisibleClass:l.itemHiddenClass,d=o?c.itemVisibleClass:c.itemHiddenClass;this._isMigrating=!1,this.destroy(),l.itemClass!==c.itemClass&&(Fe(r,l.itemClass),fe(r,c.itemClass)),f!==d&&(Fe(r,f),fe(r,d)),u!==h&&(u.appendChild(r),e=Re(h,u,!0),(t=$e(r)).x-=e.left,t.y-=e.top),i._refreshDimensions(),e=Re(u,a,!0),n._containerDiffX=e.left,n._containerDiffY=e.top,i._drag=c.dragEnabled?new Ke(i):null,u!==h&&i._setTranslate(t.x,t.y),i._visibility.setStyles(o?c.visibleStyles:c.hiddenStyles),n.start()},Ke.prototype._preStartCheck=function(t){this._startPredicateState===Je&&(this._startPredicateState=1),1===this._startPredicateState?(this._startPredicateResult=this._startPredicate(this._item,t),!0===this._startPredicateResult?(this._startPredicateState=2,this._onStart(t)):!1===this._startPredicateResult&&(this._resetStartPredicate(t),this._dragger._reset(),this._startPredicateState=Je)):2===this._startPredicateState&&this._isActive&&this._onMove(t)},Ke.prototype._preEndCheck=function(t){var e=2===this._startPredicateState;this._startPredicate(this._item,t),this._startPredicateState=Je,e&&this._isActive&&(this._isStarted?this._onEnd(t):this.stop())},Ke.prototype._onStart=function(t){var e,i,n,r=this._item;r._isActive&&(this._isActive=!0,this._dragStartEvent=t,Ke.autoScroller.addItem(r),e=r._id,i=this._prepareStart,n=this._applyStart,It.add(At,_t+e,i),It.add(2,vt+e,n))},Ke.prototype._prepareStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid(),n=i._settings,r=i._element,o=n.dragContainer||r,s=Ie(o),a=$e(e),c=e.getBoundingClientRect(),u=o!==r;if(this._container=o,this._containingBlock=s,this._clientX=c.left,this._clientY=c.top,this._left=this._gridX=a.x,this._top=this._gridY=a.y,this._scrollDiffX=this._scrollDiffY=0,this._moveDiffX=this._moveDiffY=0,this._resetHeuristics(this._gridX,this._gridY),u){var l=Re(s,r);this._containerDiffX=l.left,this._containerDiffY=l.top}}}},Ke.prototype._applyStart=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=this._getGrid(),i=t._element,n=t._dragRelease,r=t._migrate,o=this._container!==e._element;t.isPositioning()&&t._layout.stop(!0,this._left,this._top),r._isActive&&(this._left-=r._containerDiffX,this._top-=r._containerDiffY,this._gridX-=r._containerDiffX,this._gridY-=r._containerDiffY,r.stop(!0,this._left,this._top)),t.isReleasing()&&n._reset(),e._settings.dragPlaceholder.enabled&&t._dragPlaceholder.create(),this._isStarted=!0,e._emit("dragInit",t,this._dragStartEvent),o&&(i.parentNode===this._container?(this._gridX-=this._containerDiffX,this._gridY-=this._containerDiffY):(this._left+=this._containerDiffX,this._top+=this._containerDiffY,this._container.appendChild(i),t._setTranslate(this._left,this._top))),fe(i,e._settings.itemDraggingClass),this._bindScrollListeners(),e._emit("dragStart",t,this._dragStartEvent)}}},Ke.prototype._onMove=function(t){var e,i,n,r=this._item;r._isActive?(this._dragMoveEvent=t,e=r._id,i=this._prepareMove,n=this._applyMove,It.add(At,gt+e,i),It.add(2,mt+e,n),Mt(r._id,this._handleSort)):this.stop()},Ke.prototype._prepareMove=function(){if(this._isActive&&this._item._isActive){var t=this._getGrid()._settings.dragAxis,e=this._dragMoveEvent,i=this._dragPrevMoveEvent||this._dragStartEvent||e;if("y"!==t){var n=e.clientX-i.clientX;this._left=this._left-this._moveDiffX+n,this._gridX=this._gridX-this._moveDiffX+n,this._clientX=this._clientX-this._moveDiffX+n,this._moveDiffX=n}if("x"!==t){var r=e.clientY-i.clientY;this._top=this._top-this._moveDiffY+r,this._gridY=this._gridY-this._moveDiffY+r,this._clientY=this._clientY-this._moveDiffY+r,this._moveDiffY=r}this._dragPrevMoveEvent=e}},Ke.prototype._applyMove=function(){if(this._isActive){var t=this._item;t._isActive&&(this._moveDiffX=this._moveDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit("dragMove",t,this._dragMoveEvent),Ke.autoScroller.updateItem(t))}},Ke.prototype._onScroll=function(t){var e,i,n,r=this._item;r._isActive?(this._scrollEvent=t,e=r._id,i=this._prepareScroll,n=this._applyScroll,It.add(At,yt+e,i),It.add(2,bt+e,n),Mt(r._id,this._handleSort)):this.stop()},Ke.prototype._prepareScroll=function(){if(this._isActive){var t=this._item;if(t._isActive){var e=t._element,i=this._getGrid()._element,n=e.getBoundingClientRect();if(this._container!==i){var r=Re(this._containingBlock,i);this._containerDiffX=r.left,this._containerDiffY=r.top}var o=this._clientX-this._moveDiffX-n.left;this._left=this._left-this._scrollDiffX+o,this._scrollDiffX=o;var s=this._clientY-this._moveDiffY-n.top;this._top=this._top-this._scrollDiffY+s,this._scrollDiffY=s,this._gridX=this._left-this._containerDiffX,this._gridY=this._top-this._containerDiffY}}},Ke.prototype._applyScroll=function(){if(this._isActive){var t=this._item;t._isActive&&(this._scrollDiffX=this._scrollDiffY=0,t._setTranslate(this._left,this._top),this._getGrid()._emit("dragScroll",t,this._scrollEvent))}},Ke.prototype._onEnd=function(t){var e=this._item,i=e._element,n=this._getGrid(),r=n._settings,o=e._dragRelease;e._isActive?(Ct(e._id),Pt(e._id),Rt(e._id),this._finishSort(),this._unbindScrollListeners(),o._containerDiffX=this._containerDiffX,o._containerDiffY=this._containerDiffY,this._reset(),Fe(i,r.itemDraggingClass),Ke.autoScroller.removeItem(e),n._emit("dragEnd",e,t),this._isMigrating?this._finishMigration():o.start()):this.stop()};var ti=/^(webkit|moz|ms|o|Webkit|Moz|MS|O)(?=[A-Z])/,ei={};function ii(t){var e=ei[t];return e||((e=t.replace(ti,""))!==t&&(e=n ni(t,e){for(var i in e)t.style[i]=e[i]}var ri,oi,si=!(!Element||!Yt(Element.prototype.animate)),ai=!!(Element&&(ri=Element.prototype.animate,oi=window.Symbol,ri&&Yt(oi)&&Yt(oi.toString)&&oi(ri).toString().indexOf("[native code]")>-1));function ci(t){this._element=t,this._animation=null,this._duration=0,this._easing="",this._callback=null,this._props=[],this._values=[],this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}function ui(t,e){var i={};translateX("+t+"px) translateY("+e+"px)"}function hi(t){this._item=t,this._animation=new ci,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._left=0,this._top=0,this._transX=0,this._transY=0,this._nextTransX=0,this._nextTransY=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._updateDimensions=this._updateDimensions.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this),this._onHide=this._onHide.bind(this)}function fi(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}function di(t){var e=t._element,i=e.style;this._item=t,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._nextLeft=0,this._nextTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animOptions={onFinish:this._finish.bind(this),duration:0,easing:0},i.left="0px",i.top="0px",t._setTranslate(0,0),this._animation=new ci(e),this._queue="layout-"+t._id,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}function pi(t){this._item=t,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}function _i(t){var e=t._isActive,i=t._element,n=i.children[0],r=t.getGrid()._settings;if(!n)throw new Error("No valid child element found within item element.");this._item=t,this._isDestroyed=!1,this._isHidden=!e,this._isHiding=!1,this._isShowing=!1,this._childElement=n,this._currentStyleProps=[],this._animation=new ci(n),this._queue="visibility-"+t._id,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),i.style.display=e?"":"none",fe(i,e?r.itemVisibleClass:r.itemHiddenClass),this.setStyles(e?r.visibleStyles:r.hiddenStyles)}ci.prototype.start=function(t,e,i){if(!this._isDestroyed){var n=this._element,r=i||{};if(!si)return ni(n,e),this._callback=Yt(r.onFinish)?r.onFinish:null,void this._onFinish();var o,s,a,c=this._animation,u=this._props,l=this._values,h=r.duration||300,f=r.easing||"ease",d=!1;if(c&&(s=0,h===this._duration&&f===this._easing||(d=!0),!d)){for(o in e)if(++s,-1===(a=u.indexOf(o))||e[o]!==l[a]){d=!0;break}s!==u.length&&(d=!0)}if(d&&c.cancel(),this._callback=Yt(r.onFinish)?r.onFinish:null,!c||d){for(o in u.length=l.length=0,e)u.push(o),l.push(e[o]);this._duration=h,this._easing=f,this._animation=n.animate([ui(t,ai),ui(e,ai)],{duration:h,easing:f}),this._animation.onfinish=this._onFinish,ni(n,e)}}},ci.prototype.stop=function(){!this._isDestroyed&&this._animation&&(this._animation.cancel(),this._animation=this._callback=null,this._props.length=this._valuesnction(){return Ze(element,currentProps)},ci.prototype.isAnimating=function(){return!!this._animation},ci.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=null,this._isDestroyed=!0)},ci.prototype._onFinish=function(){var t=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,t&&t()},hi.prototype._updateDimensions=function(){this.isActive()&&ni(this._element,{width:this._item._width+"px",height:this._item._height+"px"})},hi.prototype._onLayoutStart=function(t,e){var i=this._item;if(-1!==t.indexOf(i)){var n=i._left,r=i._top,o=this._left,s=this._top;if(this._left=n,this._top=r,e||this._didMigrate||o!==n||s!==r){var a,c,u,l=n+i._marginLeft,h=r+i._marginTop,f=i.getGrid();if(e||!(f._settings.layoutDuration>0)||this._didMigrate)return jt(i._id),this._element.style[me]=li(l,h),this._animation.stop(),void(this._didMigrate&&(f.getElement().appendChild(this._element),this._didMigrate=!1));this._nextTransX=l,this._nextTransY=h,a=i._id,c=this._setupAnimation,u=this._startAnimation,It.add(At,St+a,c),It.add(2,xt+a,u)}}else this.reset()},hi.prototype._setupAnimation=function(){if(this.isActive()){var t=$e(this._element);this._transX=t.x,this._transY=t.y}},hi.prototype._startAnimation=function(){if(this.isActive()){var t=this._animation,e=this._transX,i=this._transY,n=this._nextTransX,r=this._nextTransY;if(e!==n||i!==r){var o=this._item.getGrid()._settings,s={},a={};s[me]=li(e,i),a[me]=li(n,r),t.start(s,a,{duration:o.layoutDuration,easing:o.layoutEasing,onFinish:this._onLayoutEnd})}else t.isAnimating()&&(this._element.style[me]=li(nn(){this._resetAfterLayout&&this.reset()},hi.prototype._onReleaseEnd=function(t){if(t._id===this._item._id){if(!this._animation.isAnimating())return void this.reset();this._resetAfterLayout=!0}},hi.prototype._onMigrate=function(t){if(t.item===this._item){var e=this._item.getGrid(),i=t.toGrid;e.off(H,this._onReleaseEnd),e.off(A,this._onLayoutStart),e.off(N,this._onMigrate),e.off(C,this._onHide),i.on(H,this._onReleaseEnd),i.on(A,this._onLayoutStart),i.on(N,this._onMigrate),i.on(C,this._onHide),this._didMigrate=!0}},hi.prototype._onHide=function(t){t.indexOf(this._item)>-1&&this.reset()},hi.prototype.create=function(){if(this.isActive())this._resetAfterLayout=!1;else{var t,e=this._item,i=e.getGrid(),n=i._settings,r=this._animation;this._left=e._left,this._top=e._top,t=Yt(n.dragPlaceholder.createElement)?n.dragPlaceholder.createElement(e):document.createElement("div"),this._element=t,r._element=t,this._className=n.itemPlaceholderClass||"",this._className&&fe(t,this._className),ni(t,{position:"absolute",left:"0px",top:"0px",width:e._width+"px",height:e._height+"px"}),t.style[me]=li(e._left+e._marginLeft,e._top+e._marginTop),i.on(A,this._onLayoutStart),i.on(H,this._onReleaseEnd),i.on(N,this._onMigrate),i.on(C,this._onHide),Yt(n.dragPlaceholder.onCreate)&&n.dragPlaceholder.onCreate(e,t),i.getElement().appendChild(t)}},hi.prototype.reset=function(){if(this.isActive()){var t,e=this._element,i=this._item,n=i.getGrid(),r=n._settings,o=this._animation;this._resetAfterLayout=!1,jt(i._id),t=i._id,It.remove(2,Et+t),o.stop(),o._element=null,n.off(H,this._onReleaseEnd),n.off(A,this._onLayoutStart),n.off(N,this._onMigrate),n.off(C,this._onHide),this._className&&(Fe(e,this._className),this._className=""),e.parentNode.removeChild(e),this._element=null,Yt(r.dragPlaceholder.onRemove)&&r.dragPlaceholsActive=function(){return!!this._element},hi.prototype.getElement=function(){return this._element},hi.prototype.updateDimensions=function(){var t,e;this.isActive()&&(t=this._item._id,e=this._updateDimensions,It.add(2,Et+t,e))},hi.prototype.destroy=function(){this.reset(),this._animation.destroy(),this._item=this._animation=null},fi.prototype.start=function(){if(!this._isDestroyed&&!this._isActive){var t=this._item,e=t.getGrid(),i=e._settings;this._isActive=!0,fe(t._element,i.itemReleasingClass),i.dragRelease.useDragContainer||this._placeToGrid(),e._emit("dragReleaseStart",t),e._nextLayoutData||t._layout.start(!1)}},fi.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var n=this._item,r=n.getGrid();t||void 0!==e&&void 0!==i||(e=n._left,i=n._top);var o=this._placeToGrid(e,i);this._reset(o),t||rsActive&&!1===this._isPositioningStarted},fi.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},fi.prototype._placeToGrid=function(t,e){if(!this._isDestroyed){var i=this._item,n=i._element,r=i.getGrid()._element,o=!1;if(n.parentNode!==r){if(void 0===t||void 0===e){var s=$e(n);t=s.x-this._containerDiffX,e=s.y-this._containerDiffY}r.appendChild(n),i._setTranslate(t,e),o=!0}return this._containerDiffX=0,this._containerDiffY=0,o}},fi.prototype._reset=function(t){if(!this._isDestroyed){var e=this._item,i=e.getGrid()._settings.itemReleasingClass;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,i&&(t&&e._element.clientWidth,Fe(e._element,i))}},di.prototype.start=function(t,e){if(!this._isDestroyed){var i,n,r,o=this._item,s=o._dragRelease,a=o.getGrid()._settings,c=this._isActive,u=s.isJustReleased(),l=u?a.dragRelease.duration:a.layoutDuration,h=u?a.dragRelease.easing:a.layoutEasing,f=!t&&!this._skipNextAnimation&&l>0;if(c&&(Ot(o._id),o._emitter.burst(this._queue,!0,o)),u&&(s._isPositioningStarted=!0),Yt(e)&&o._emitter.on(this._queue,e),this._skipNextAnimation=!1,!f)return this._updateOffsets(),o._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._animation.isAnimating()&&(this._animation._animation.onfinish=null),this._isActive=!0,this._animOptions.easing=h,this._animOptions.duration=l,this._isInterrupted=c,i=o._id,n=this._setupAnimation,r=this._startAnimation,It.add(At,ht+i,n),It.add(2,ft+i,r)}},di.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var n=this._item;if(Ot(n._id),this._animation.isAnimating()){if(void 0===e||void 0===i){var r=$e(n._element);e=r.x,i=r.y}n._setTranslate(e,i),this._animation.stop()}Fe(n._element,n.getGrid()._settings.itemPositioningClass),this._isActive=!1,t&&n._emitter.burst(this._queue,!0,n)}},di.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item._element.style;this.stop(!0,0,0),this._item._emitter.clear(this._queue),this._animation.destroy(),t[me]="",t.left="",t.top="",this._item=null,this._currentStyles=null,this._targetStyles=null,this._animOptions=null,this._isDestroyed=!0}},di.prototype._updateOffsets=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;this._offsetLeft=i._isActive?i._containerDiffX:e._isActive?e._containerDiffX:0,this._offsetTop=i._isActive?i._containerDiffY:e._isActive?e._containerDiffY:0,this._nextLeft=this._item._left+this._offsetLeft,this._nextTop=this._item._top+this._offsetTop}},di.prototype._finish=function(){if(!this._isDestroyed){var t=this._item,e=t._migrate,i=t._dragRelease;t._tX=this._nextLeft,t._tY=this._nextTop,this._isActive&&(this._isActive=!1,Fe(t._element,t.getGrid()._settings.itemPositioningClass)),i._isActive&&i.stop(),e._isActive&&e.stop(),t._emitter.burst(this._queue,!1,t)}},di.prototype._setupAnimation=function(){var t=this._item;if(void 0===t._tX||void 0===t._tY){var e=$e(t._element);t._tX=e.x,t._tY=e.y}},di.prototype._startAnimation=function(){var t=this._item,e=t.getGrid()._settings,i=this._animOptions.duration<=0;this._updateOffsets();var n=Math.abs(t._left-(t._tX-this._offsetLeft)),r=Math.abs(t._top-(t._tY-this._offsetTop));if(i||n<2&&r<2)return(n||r||this._isInterrupted)&&t._setTranslate(this._nextLeft,this._nextTop),this._animation.stop(),void this._finish();this._isInterrupted||fe(t._element,e.itemPositioningClass),this._currentStyles[me]=li(t._tX,t._tY),this._targetStyles[me]=li(this._nextLeft,this._nextTop),t._tX=t._tY=void 0,this._animation.start(this._currentStyles,this._targetStyles,this._animOptions)},pi.prototype.start=function(t,e,i){if(!this._isDestroyed){var n,r,o,s,a,c,u,l,h,f,d=this._item,p=d._element,_=d.isActive(),v=d.isVisible(),g=d.getGrid(),m=g._settings,y=t._settings,b=t._element,w=t._items,S=g._items.indexOf(d),x=i||document.body;if("number"==typeof e)n=_e(w,e,1);else{if(!(r=t.getItem(e)))return;n=w.indexOf(r)}(d.isPositioning()||this._isActive||d.isReleasing())&&(u=(c=$e(p)).x,l=c.y),d.isPositioning()&&d._layout.stop(!0,u,l),this._isActive&&(u-=this._containerDiffX,l-=this._containerDiffY,this.stop(!0,u,l)),d.isReleasing()&&(u-=d._dragRelease._containerDiffX,l-=d._dragRelease._containerDiffY,d._dragRelease.stop(!0,u,l)),d._visibility.stop(!0),d._drag&&d._drag.destroy(),g._hasListeners(N)&&g._emit(N,{item:d,fromGrid:g,fromIndex:S,toGrid:t,toIndex:n}),t._hasListeners(Y)&&t._emit(Y,{item:d,fromGrid:g,fromIndex:S,toGrid:t,toIndex:n}),m.itemClass!==y.itemClass&&(Fe(p,m.itemClass),fe(p,y.itemClass)),(h=v?m.itemVisibleClass:m.itemHiddenClass)!==(f=v?y.itemVisibleClass:y.itemHiddenClass)&&(Fe(p,h),fe(p,f)),g._items.splice(S,1),pe(w,d,n),d._gridId=t._id,_?x!==(o=p.parentNode)&&(x.appendChild(p),s=Re(x,o,!0),c||(u=(c=$e(p)).x,l=c.y),d._setTranslate(u+s.left,l+s.top)):b.appendChild(p),d._visibility.setStyles(v?y.visibleStyles:y.hiddenStyles),_&&(a=Re(x,b,!0)),d._refreshDimensions(),d._sortData=null,d._drag=y.dragEnabled?new Ke(d):null,_?(this._isActive=!0,this._container=x,this._containerDiffX=a.left,this._containerDiffY=a.top):(this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0),g._hasListeners(j)&&g._emit(j,{item:d,fromGrid:g,fromIndex:S,toGrid:t,toIndex:n}),t._hasListeners(X)&&t._emit(X,{item:d,fromGrid:g,fromIndex:S,toGrid:t,toIndex:n})}},pi.prototype.stop=function(t,e,i){if(!this._isDestroyed&&this._isActive){var n,r=this._item,o=r._element,s=r.getGrid()._element;this._container!==s&&(void 0!==e&&void 0!==i||(t?(e=(n=$e(o)).x-this._containerDiffX,i=n.y-this._containerDiffY):(e=r._left,i=r._top)),s.appendChild(o),r._setTranslate(e,i)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0}},pi.prototype.destroy=function(){this._isDestroyed||(this.stop(!0),this._item=null,this._isDestroyed=!0)},_i.prototype.show=function(t,e){if(!this._isDestroyed){var i=this._item,n=i._element,r=Yt(e)?e:null,o=i.getGrid()._settings;this._isShowing||this._isHidden?!this._isShowing||t?(this._isShowing||(i._emitter.burst(this._queue,!0,i),Fe(n,o.itemHiddenClass),fe(n,o.itemVisibleClass),this._isHiding||(n.style.display="")),r&&i._emitter.on(this._queue,r),this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,t,this._finishShow)):r&&i._emitter.on(this._queue,r):r&&r(!1,i)}},_i.prototype.hide=function(t,e){if(!this._isDestroyed){var i=this._item,n=i._element,r=Yt(e)?e:null,o=i.getGrid()._settings;this._isHiding||!this._isHidden?!this._isHiding||t?(this._isHiding||(i._emitter.burst(this._queue,!0,i),fe(n,o.itemHiddenClass),Fe(n,o.itemVisibleClass)),r&&i._emitter.on(this._queue,r),this._isHidden=this._isHiding=!0,this._isShowing=!1,this._startAnimation(!1,t,this._finishHide)):r&&i._emitter.on(this._queue,r):r&&r(!1,i)}},_i.prototype.stop=function(t){if(!this._isDestroyed&&(this._isHiding||this._isShowing)){var e=this._item;Lt(e._id),this._animation.stop(),t&&e._emitter.burst(this._queue,!0,e)}},_i.prototype.setStyles=function(t){var e=this._childElement,i=this._currentStyleProps;for(var n in this._removeCurrentStyles(),t)i.push(n),e.style[n]=t[n]},_i.prototype.destroy=function(){if(!this._isDestroyed){var t=this._item,e=t._element,i=t.getGrid()._settings;this.stop(!0),t._emitter.clear(this._queue),this._animation.destroy(),this._removeCurrentStyles(),Fe(e,i.itemVisibleClass),Fe(e,i.itemHiddenClass),e.style.display="",this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0}},_i.prototype._startAnimation=function(t,e,i){if(!this._isDestroyed){var n,r=this._item,o=this._animation,s=this._childElement,a=r.getGrid()._settings,c=t?a.visibleStyles:a.hiddenStyles,u=t?a.showDuration:a.hideDuration,l=t?a.showEasing:a.hideEasing,h=e||u<=0;if(c){if(Lt(r._id),h)return ni(s,c),o.stop(),void(i&&i());var f,d,p;o.isAnimating(ish=null),f=r._id,d=function(){n=Ze(s,c)},p=function(){o.start(n,c,{duration:u,easing:l,onFinish:i})},It.add(At,dt+f,d),It.add(2,pt+f,p)}else i&&i()}},_i.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._item._emitter.burst(this._queue,!1,this._item))},_i.prototype._finishHide=function(){if(this._isHidden){var t=this._item;this._isHiding=!1,t._layout.stop(!0,0,0),t._element.style.display="none",t._emitter.burst(this._queue,!1,t)}},_i.prototype._removeCurrentStyles=function(){for(var t=this._childElement,e=this._currentStyleProps,i=0;i<e.length;gth=0};var vi=0;function gi(){return++vi}function mi(t,e,i){var n=t._settings;if(k){if(k.has(e))throw new Error("You can only create one Muuri Item per element!");k.set(e,this)}this._id=gi(),this._gridId=t._id,this._element=e,this._isDestroyed=!1,this._left=0,this._top=0,this._width=0,this._height=0,this._marginLeft=0,this._marginRight=0,this._marginTop=0,this._marginBottom=0,this._tX=void 0,this._tY=void 0,this._sortData=null,this._emitter=new z,e.parentNode!==t._element&&t._element.appendChild(e),fe(e,n.itemClass),"boolean"!=typeof i&&(i="none"!==qt(e,"display")),this._isActive=i,this._visibility=new _i(this),this._layout=new di(this),this._migrate=new pi(this),this._drag=n.dragEnabled?new Ke(this):null,this._dragRelease=new fi(this),this._dragPlaceholder=new hi(this)}function yi(t){var e,i,n,r,o,s=.001,a=.5;function c(t){return((1e3*t+.5<<0)/10<<0)/100}function u(){this.currentRects=[],this.nextRects=[],this.rectTarget={},this.rectStore=[],this.slotSizes=[],this.rectId=0,this.slotIndex=-1,this.slotData={left:0,top:0,width:0,height:0},this.sortRectsLeftTop=this.sortRectsLeftTop.bind(this),this.sortRectsTopLeft=this.sortRectsTopLeft.bind(this)}if(u.prototype.computeLayout=function(t,e){var i,n,r,o,s,a,u=t.items,l=t.slots,h=!!(1&e),f=!!(2&e),d=!!(4&e),p=!!(8&e),_=!!(16&e),v="number"==typeof u[0];if(!u.length)return t;for(n=v?2:1,i=0;i<u.length;i+=n)v?(o=u[i],s=u[i+1]):(o=(r=u[i])._width+r._marginLeft+r._marginRight,s=r._height+r._marginTop+r._marginBottom),_&&(o=c(o),s=c(s)),a=this.computeNextSlot(t,o,s,h,f),f?a.left+a.width>t.width&&(t.width=a.left+a.width):a.top+a.height>t.height&&(t.height=a.top+a.height),l[++this.slotIndex]=a.left,l[++this.slotIndex]=a.top,(d||p)&&this.slotSizes.push(a.width,a.height);if(d)for(i=0;i<l.length;i+=2)l[i]=t.width-(l[i]+this.slotSizes[i]);if(p)for(i=1;i<l.length;i+=2)l[i]=t.height-(l[i]+this.slotSizes[i]);return this.slotSizes.length=0,this.currentRects.length=0,this.nextRects.length=0,this.rectStore.length=0,this.rectId=0,this.slotIndex=-1,t},u.prototype.computeNextSlot=function(t,e,i,n,r){var o,c,u,l,h,f=this.slotData,d=this.currentRects,p=this.nextRects,_=!1;for(p.length=0,f.left=null,f.top=null,f.width=e,f.height=i,l=0;l<d.length;l++)if((c=d[l])&&(o=this.getRect(c),f.width<=o.width+s&&f.height<=o.height+s)){f.left=o.left,f.top=o.top;break}if(null===f.left&&(r?(f.left=t.width,f.top=0):(f.left=0,f.top=t.height),n||(_=!0)),!r&&f.top+f.height>t.height+s&&(f.left>a&&p.push(this.addRect(0,t.height,f.left,1/0)),f.left+f.width<t.width-a&&p.push(this.addRect(f.left+f.width,t.height,t.width-f.left-f.width,1/0)),t.height=f.top+f.height),r&&f.left+f.width>t.width+s&&(f.top>a&&p.push(this.addRect(t.width,0,1/0,f.top)),f.top+f.height<t.height-a&&p.push(this.addRect(t.width,f.top+f.height,1/0,t.height-f.top-f.height)),t.width=f.left+f.width),!_)for(n&&(l=0);l<d.length;l++)if(c=d[l])for(o=this.getRect(c),u=this.splitRect(o,f),h=0;h<u.length;h++)c=u[h],o=this.getRect(c),(r?o.left+s<t.width-s:o.top+s<t.height-s)&&p.push(c);return p.length>1&&this.purgeRects(p).sort(r?this.sortRectsLeftTop:this.sortRectsTopLeft),this.currentRects=p,this.nextRects=d,f},u.prototype.addRect=function(t,e,i,n){var r=++this.rectId;return this.rectStore[r]=t||0,this.rectStore[++this.rectId]=e||0,this.rectStore[++this.rectId]=i||0,this.rectStore[++this.rectId]=n||0,r},u.prototype.getRect=function(t,e){return e||(e=this.rectTarget),e.left=this.rectStore[t]||0,e.top=this.rectStore[++t]||0,e.width=this.rectStore[++t]||0,e.height=this.rectStore[++t]||0,e},u.prototype.splitRect=(e=[],i=0,n=0,function(t,r){return e.length=0,t.left+t.width<=r.left+s||r.left+r.width<=t.left+s||t.top+t.height<=r.top+s||r.top+r.height<=t.top+s?(e.push(this.addRect(t.left,t.top,t.width,t.height)),e):((i=r.left-t.left)>=a&&e.push(this.addRect(t.left,t.top,i,t.height)),(i=t.left+t.width-(r.left+r.width))>=a&&e.push(this.addRect(r.left+r.width,t.top,i,t.height)),(n=r.top-t.top)>=a&&e.push(this.addRect(t.left,t.top,t.width,n)),(n=t.top+t.height-(r.top+r.height))>=a&&e.push(this.addRect(t.left,r.top+r.height,t.width,n)),e)}),u.prototype.isRectAWithinRectB=function(t,e){return t.left+s>=e.left&&t.top+s>=e.top&&t.left+t.width-s<=e.left+e.width&&t.top+t.height-s<=e.top+e.height},u.prototype.purgeRects=(r={},o={},function(t){for(var e,i=t.length;i--;)if(e=t.length,t[i])for(this.getRect(t[i],r);e--;)if(t[e]&&i!==e&&(this.getRect(t[e],o),this.isRectAWithinRectB(r,o))){t[i]=0;break}return t}),u.prototype.sortRectsTopLeft=function(){var t={},e={};return function(i,n){return this.getRect(i,t),this.getRect(n,e),t.top<e.top&&t.top+s<e.top?-1:t.top>e.top&&t.top-s>e.top?1:t.left<e.left&&t.left+s<e.left?-1:t.left>e.left&&t.left-s>e.left?1:0}}(),u.prototype.sortRectsLeftTop=function(){var t={},e={};return function(i,n){return this.getRect(i,t),this.getRect(n,e),t.left<e.left&&t.left+s<e.left?-1:t.left>e.left&&t.left-s<e.left?1:t.top<e.top&&t.top+s<e.top?-1:t.top>e.top&&t.top-s>e.top?1:0}}(),t){var l=new u;self.onmessage=function(t){var e=new Float32Array(t.data),i=e.subarray(4,e.length),n=new Float32Array(i.length),r=e[3],o={items:i,slots:n,width:e[1],height:e[2]};l.computeLayout(o,r),e[1]=o.width,e[2]=o.height,e.set(o.slots,4),postMessage(e.buffer,[etGrid=function(){return E[this._gridId]},mi.prototype.getElement=function(){return this._element},mi.prototype.getWidth=function(){return this._width},mi.prototype.getHeight=function(){reis._marginTop,bottom:this(){return{left:this._left,top:this._top}},mi.prototype.isActive=function(){retu_visibility&&!this._visibility._isHidden},mi.prototype.isShowing=function(){return!(!this._visibility||!this._visibility._isShowing)},mi.prototype.isHiding=function(){return!(!this._visibility||!this._visibility._isHiding)},mi.prototype.isPositioning=function(){return!(!this._layout||!this._layout._isActive)},mi.prototype.isDragging=function(){return!(!this._drag||!this._agRelease||!this._dragRelease._isActive)},mi.prototype.isDestroyed=function(){return this._isDestroyed},mi.prototype._refreshDimensions=function(t){if(!(this._isDestroyed||!0!==t&&this._visibility._isHidden)){var e=this._element,i=this._dragPlaceholder,n=e.getBoundingClientRect();this._width=n.width,this._height=n.height,this._marginLeft=Math.max(0,Gt(e,"margin-left")),this._marginRight=Math.max(0,Gt(e,"margin-right")),this._marginTop=Math.max(0,Gt(e,"margin-top")),this._marginBottom=Math.max(0,Gt(e,"margin-bottom")),i&&i.updateDimensions()}},mi.prototype._refreshSortData=function(){if(!this._isDestroyed){var t,e=this._sortData={},i=this.getGrid()._settings.sortData;for(t in i)e[t]=i[t](this,this._element)}},mi.prototype._addToLayout=function(t,e){!0!==this._isActive&&(this._isActive=!0,this._left=t||0,this._top=e||0)},mi.prototype._removeFromLayout=function(){!1!==this._isActive&&(this._isActive=!1,this._left=0,this._top=0)},mi.prototype._canSkipLayout=function(t,e){return this._left===t&&this._top===e&&!this._migrate._isActive&&!this._layout._skipNextAnimation&&!this._dragRelease.isJustReleased()},mi.prototype._setTranslate=function(t,e){return(this._tX!==t||this._tY!==e)&&(this._tX=t,this._tY=e,this._element.style[me]=li(t,e),!0)},mi.prototype._destroy=function(t){if(!this._isDestroyed){var e=this._element,i=this.getGrid()._settings;this._dragPlaceholder.destroy(),this._dragRelease.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._drag&&this._drag.destroy(),this._emitter.destroy(),Fe(e,i.itemClass),t&&e.parentNode.removeChild(e),k&&k.delete(e),this._isActive=!1,this._isDestroyed=!0}};var bi=yi(),wi=null,Si=[];function xi(t,e){if(this._options=0,this._processor=null,this._layoutQueue=[],this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={},this._workers=[],this._onWorkerMessage=this._onWorkerMessage.bind(this),this.setOptions(e),(t="number"==typeof t?Math.max(0,t):0)&&window.Worker&&window.URL&&window.Blob)try{this._workers=function(t,e){var i=[];if(t>0){wi||(wi=URL.createObjectURL(new Blob(["("+yi.toString()+")(true)"],{type:"application/javascript"})));for(var n,r=0;r<t;r++)n=new Worker(wi),e&&(n.onmessage=e),i.push(n),Si.push(n)}return i}(t,this._onWorkerMessage)}catch(t){this._processor=new bi}else this._processor=new bi}xi.prototype._sendToWorker=function(){if(this._layoutQueue.length&&this._workers.length){var t=this._layoutQueue.shift(),e=this._workers.pop(),i=this._layoutWorkerData[t];delete this._layoutWorkerData[t],this._layoutWorkers[t]=e,e.postMessage(i.buffer,[i.buffer])}},xi.prototype._onWorkerMessage=function(t){var e=new Float32Array(t.data),i=e[0],n=this._layouts[i],r=this._layoutCallbacks[i],o=this._layoutWorkers[i];n&&delete this._layouts[i],r&&delete this._layoutCallbacks[i],o&&delete this._layoutWorkers[i],n&&r&&(n.width=e[1],n.height=e[2],n.slots=e.subarray(4,e.length),this._finalizeLayout(n),r(n)),o&&(this._workers.push(o),this._sendToWorker())},xi.prototype._finalizeLayout=function(t){var e=t._grid,i=2&t._settings,n="border-box"===e._boxSizing;return delete t._grid,delete t._settings,t.styles={},i?t.styles.width=(n?t.width+e._borderLeft+e._borderRight:t.width)+"px":t.styles.height=(n?t.height+e._borderTop+e._borderBottom:t.height)+"px",t},xi.prototype.setOptions=function(t){var e,i,n,r,o;t&&(e="boolean"==typeof t.fillGaps?t.fillGaps?1:0:1&this._options,i="boolean"==typeof t.horizontal?t.horizontal?2:0:2&this._options,n="boolean"==typeof t.alignRight?t.alignRight?4:0:4&this._options,r="boolean"==typeof t.alignBottom?t.alignBottom?8:0:8&this._options,o="boolean"==typeof t.rounding?t.rounding?16:0:16&this._options,this._options=e|i|n|r|o)},xi.prototype.createLayout=function(t,e,i,n,r,o){if(this._layouts[e])throw new Error("A layout with the provided id is currently being processed.");var s=2&this._options,a={id:e,items:i,slots:null,width:s?0:n,height:s?r:0,_grid:t,_settings:this._options};if(!i.length)return a.slots=[],this._finalizeLayout(a),void o(a);if(this._processor)return a.slots=window.Float32Array?new Float32Array(2*i.length):new Array(2*i.length),this._processor.computeLayout(a,a._settings),this._finalizeLayout(a),void o(a);var c,u,l,h=new Float32Array(4+2*i.length);for(h[0]=e,h[1]=a.width,h[2]=a.height,h[3]=a._settings,c=0,u=3;c<i.length;c++)l=i[c],h[++u]=l._width+l._marginLeft+l._marginRight,h[++u]=l._height+l._marginTop+l._marginBottom;return this._layoutQueue.push(e),this._layouts[e]=a,this._layoutCallbacks[e]=o,this._layoutWorkerData[e]=h,this._sendToWorker(),this.cancelLayout.bind(this,e)},xi.prototype.cancelLayout=function(t){if(this._layouts[t]&&(delete this._layouts[t],delete this._layoutCallbacks[t],this._layoutWorkerData[t])){delete this._layoutWorkerData[t];var e=this._layoutQueue.indexOf(t);e>-1&&this._layoutQueue.splice(e,1)}},xi.prototype.destroy=function(){for(var t in this._layoutWorkers)this._workers.push(this._layoutWorkers[t]);!function(t){for(var e,i,n=0;n<t.length;n++)(e=t[n]).onmessage=null,e.onerror=null,e.onmessageerror=null,e.terminate(),(i=Si.indexOf(e))>-1&&Si.splice(i,1);wi&&!Si.length&&(URL.revokeObjectURL(wi),wi=null)}(this._workers),this._workers.length=0,this._layoutQueue.length=0,this._layouts={},this._layoutCallbacks={},this._layoutWorkers={},this._layoutWorkerData={}};var Ei=0;var ki="[object HTMLCollection]",Ti="[object NodeList]";function Di(t){var e=Object.prototype.toString.call(t);return e===ki||e===Ti}var Ai="object",Ii="[object Object]",Oi=Object.prototype.toString;function Lif t===Ai&&Oi.call(t)===Ii}function Ci(){}var Pi,Ri="number",Mi="string",ji="instant",Ni=0;function Xi(t,e){if(typeof t===Mi&&(t=document.querySelector(t)),!(t.getRootNode?t.getRootNode({composed:!0})===document:document.body.contains(t))||t===document.documentElement)throw new Error("Container element must be an existing DOM element.");var i,n,r=function(t,e){var i=Yi({},t);return e&&(i=Yi(i,e)),e&&e.visibleStyles?i.visibleStyles=e.visibleStyles:t&&t.visibleStyles&&(i.visibleStyles=t.visibleStyles),e&&e.hiddenStyles?i.hiddenStyles=e.hiddenStyles:t&&t.hiddenStyles&&(i.hiddenStyles=t.hiddenStyles),i}(Xi.defaultOptions,e);r.visibleStyles=Hi(r.visibleStyles),r.hiddenStyles=Hi(r.hiddenStyles),Yt(r.dragSort)||(r.dragSort=!!r.dragSort),this._id=gi(),this._element=t,this._settings=r,this._isDestroyed=!1,this._items=[],this._layout={id:0,items:[],slots:[]},this._isLayoutFinished=!0,this._nextLayoutData=null,this._emitter=new z,this._onLayoutDataReceived=this._onLayoutDataReceived.bind(this),E[this._id]=this,fe(t,r.containerClass),i=this,typeof(n=r.layoutOnResize)!==Ri&&(n=!0===n?0:-1),n>=0&&(i._resizeHandler=function(t,e){var i=++Ei,n=0,r=0,o=!1,s=function(e){o||(r&&(n-=e-r),r=e,n>0?function(t,e){It.add(At,Dt+t,e)}(i,s):(n=r=0,t()))};return function(a){if(!o){if(!(e<=id 0,void function(t){It.remove(At,Dt+t)}(i)):void(n<=0?(n=e,s(0)):n=e);!0!==a&&t()}}}((function(){i.refreshItems().layout()}),n),window.addEventListener("resize",i._resizeHandler)),this.add(function(t,e){if("*"===e)return t.children;if(typeof e===Mi){for(var i=[],n=t.children,r=0;r<n.length;r++)he(n[r],e)&&i.push(n[r]);return i}return Array.isArray(e)||Di(e)?e:[]}(t,r.items),{layout:!1}),r.layoutOnInit&&this.layout(!0)}function Yi(t,e){var i,n,r,o=Object.keys(e),s=o.length;for(r=0;r<s;r++)i=Li(e[n=o[r]]),Li(t[n])&&i?t[n]=Yi(Yi({},t[n]),e[n]):i?t[n]=Yi({},e[n]):Array.isArray(e[n])?t[n]=e[n].slice(0):t[n]=e[n];return t}function Hi(t){var e,i,n={},r=document.documentElement.style;for(e in t)t[e]&&(i=J(r,e))&&(n[i]=t[e]);return n}function qi(t){for(var e={},i=0;i<t.length;i++)e[t[i]._id]=i;return e}function Gi(t,e,i){return t[e._id]-t[i._id]}Xi.Item=mi,Xi.ItemLayout=di,Xi.ItemVisibility=_i,Xi.ItemMigrate=pi,Xi.ItemDrag=Ke,Xi.ItemDragRelease=fi,Xi.ItemDragPlaceholder=hi,Xi.Emitter=z,Xi.Animator=ci,Xi.Dragger=at,Xi.Packer=xi,Xi.AutoScroller=ce,Xi.defaultPacker=new xi(2),Xi.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!1},layoutOnResize:150,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragHandle:null,dragStartPredicate:{distance:0,delay:0},dragAxis:"xy",dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:D,migrateAction:D},dragRelease:{duration:300,easing:"ease",useDragContainer:!0},dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,createElement:null,onCreate:null,onRemove:null},dragAutoScroll:{targets:[],handle:null,threshold:50,safeZone:.2,speed:ce.smoothSpeed(1e3,2e3,2500),sortDuringScroll:!0,smoothStop:!1,onStart:null,onStop:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"},Xi.prototype.on=function(t,e){return thi(t,e){return this._emitttElement=function(){return this._element},Xi.prototype.getItem=function(t){if(this._isDestroyed||!t&&0!==t)return null;if(typeof t===Ri)return this._items[t>-1?t:this._items.length+t]||null;if(t instanceof mi)return t._gridId===this._id?t:null;if(k){var e=k.get(t);return e&&e._gridId===this._id?e:null}for(var i=0;i<this._items.length;i++)if(this._items[i]._element===t)return this._items[i];return null},Xi.prototype.getItems=function(t){if(this._isDestroyed||void 0===t)return this._items.slice(0);var e,i,n=[];if(Array.isArray(t)||Di(t))for(e=0;e<t.length;e++)(i=this.getItem(t[e]))&&n.push(i);else(i=this.getItem(t))&&n.push(i);return n},Xi.prototype.refreshItems=function(t,e){if(this._isDestroyed)return this;var i,n,r,o,s=t||this._items;if(!0===e)for(o=[],i=0;i<s.length;i++)(n=s[i]).isVisible()||n.isHiding()||((r=n.getElement().style).visibility="hidden",r.display="",o.push(r));for(i=0;i<s.length;i++)s[i]._refreshDimensions(e);if(!0===e){for(i=0;i<o.length;i++)(r=o[i]).visibility="",r.display="none";o.length=0}return this},Xi.prototype.refreshSortData=function(t){if(this._isDestroyed)return this;for(var e=t||this._items,i=0;i<e.length;i++)e[i]._refreshSortData();return this},Xi.prototype.synchronize=function(){if(this._isDestroyed)return this;var t,e,i=this._items;if(!i.length)return this;for(var n=0;n<i.length;n++)(e=i[n]._element).parentNode===this._element&&(t=t||document.createDocumentFragment()).appendChild(e);return t?(this._element.appendChild(t),this._emit("synchronize"),this):this},Xi.prototype.layout=function(t,e){if(this._isDestroyed)return this;var i=this._nextLayoutData;i&&Yt(i.cancel)&&i.cancel();var n=Ni=Ni%16777216+1;this._nextLayoutData={id:n,instant:t,onFinish:e,cancel:null};for(var r=this._items,o=[],s=0;s<r.length;s++)r[s]._isActive&&o.push(r[s]);this._refreshDimensions();var a,c=this._width-this._borderLeft-this._borderRight,u=this._height-this._borderTop-this._borderBottom,l=this._settings.layout;return Yt(l)?a=l(this,n,o,c,u,this._onLayoutDataReceived):(Xi.defaultPacker.setOptions(l),a=Xi.defaultPacker.createLayout(this,n,o,c,u,this._onLayoutDataReceived)),Yt(a)&&this._nextLayoutData&&this._nextLayoutData.id===n&&(this._nextLayoutData.cancel=a),this},Xi.prototype.add=function(t,e){if(this._isDestroyed||!t)return[];var i,n=Di(i=t)?Array.prototype.slice.call(i):Array.prototype.concat(i);if(!n.length)return n;var r,o,s,a,c=e||{},u=c.layout?c.layout:void 0===c.layout,l=this._items,h=!1;for(a=0;a<n.length;a++)(o=n[a]).parentNode!==this._element&&(r=r||document.createDocumentFragment()).appendChild(o);for(r&&this._element.appendChild(r),a=0;a<n.length;a++)o=n[a],(s=n[a]=new mi(this,o,c.active))._isActive&&(h=!0,s._layout._skipNextAnimation=!0);for(a=0;a<n.length;a++)(s=n[a])._refreshDimensions(),s._refreshSortData();return pe(l,n,c.index),this._hasListeners("add")&&this._emit("add",n.slice(0)),h&&u&&this.layout(u===ji,Yt(u)?u:void 0),n},Xi.prototype.remove=function(t,e){if(this._isDestroyed||!t.length)return[];var i,n,r,o=e||{},s=o.layout?o.layout:void 0===o.layout,a=!1,c=this.getItems(),u=[],l=[];for(r=0;r<t.length;r++)(n=t[r])._isDestroyed||-1!==(i=this._items.indexOf(n))&&(n._isActive&&(a=!0),u.push(n),l.push(c.indexOf(n)),n._destroy(o.removeElements),this._items.splice(i,1));return this._hasListeners(L)&&this._emit(L,u.slice(0),l),a&&s&&this.layout(s===ji,Yt(s)?s:void 0),u},Xi.prototype.show=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!0,e),this},Xi.prototype.hide=function(t,e){return!this._isDestroyed&&t.length&&this._setItemsVisibility(t,!1,e),this},Xi.prototype.filter=function(t,e){if(this._isDestroyed||!this._items.length)return this;var i,n,r=[],o=[],s=typeof t===Mi,a=Yt(t),c=e||{},u=!0===c.instant,l=c.syncWithLayout,h=c.layout?c.layout:void 0===c.layout,f=Yt(c.onFinish)?c.onFinish:null,d=-1,p=Ci;if(f&&(p=function(){++d&&f(r.slice(0),o.slice(0))}),a||s)for(n=0;n<this._items.length;n++)i=this._items[n],(a?t(i):he(i._element,t))?r.push(i):o.push(i);return r.length?this.show(r,{instant:u,syncWithLayout:l,onFinish:p,layout:!1}):p(),o.length?this.hide(o,{instant:u,syncWithLayout:l,onFinish:p,layout:!1}):p(),(r.length||o.length)&&(this._hasListeners(P)&&this._emit(P,r.slice(0),o.slice(0)),h&&this.layout(h===ji,Yt(h)?h:void 0)),this},Xi.prototype.sort=function(){var t,e,i,n;function r(r,o){for(var s,a,c,u,l=0,h=0;h<t.length;h++)if(s=t[h][0],a=t[h][1],c=(r._sortData?r:r._refreshSortData())._sortData[s],u=(o._sortData?o:o._refreshSortData())._sortData[s],l="desc"===a||!a&&e?u<c?-1:u>c?1:0:c<u?-1:c>u?1:0)return l;return l||(n||(n=qi(i)),l=e?Gi(n,o,r):Gi(n,r,o)),l}function o(r,o){var s=e?-t(r,o):t(r,o);return s||(n||(n=qi(i)),s=e?Gi(n,o,r):Gi(n,r,o)),s}return function(s,a){if(this._isDestroyed||this._items.length<2)return this;var c=this._items,u=a||{},l=u.layout?u.layout:void 0===u.layout;if(e=!!u.descending,i=c.slice(0),n=null,Yt(s))t=s,c.sort(o);else if(ty.split(})).map((function(t){return t.split(":")})),c.sort(r);else{if(!Array.isArray(s))throw t=e=i=n=null,new Error("Invalid comparer argument provided.");c.length=0,c.push.apply(c,s)}return this._hasListeners(R)&&this._emit(R,c.slice(0),i),l&&this.layout(l===ji,Yt(l)?l:void 0),t=e=i=n=null,this}}(),Xi.prototype.move=function(t,e,i){if(this._isDestroyed||this._items.length<2)return this;var n,r,o=this._items,s=i||{},a=s.layout?s.layout:void 0===s.layout,c=s.action===T,u=c?T:D,l=this.getItem(t),h=this.getItem(e);return l&&h&&l!==h&&(n=o.indexOf(l),r=o.indexOf(h),c?ge(o,n,r):ve(o,n,r),this._hasListeners(M)&&this._emit(M,{item:l,fromIndex:n,toIndex:r,action:u}),a&&this.layout(a===ji,Yt(a)?a:void 0)),this},Xi.prototype.send=function(t,e,i,n){if(this._isDestroyed||e._isDestroyed||this===e)return this;if(!(t=this.getItem(t)))return this;var r=n||{},o=r.appendTo||document.body,s=r.layoutSender?r.layoutSender:void 0===r.layoutSender,a=r.layoutReceiver?r.layoutReceiver:void 0===r.layoutReceiver;return t._migrate.start(e,i,o),t._migrate._isActive&&t._isActive&&(s&&this.layout(s===ji,Yt(s)?s:void 0),a&&e.layout(a===ji,Yt(a)?a:void 0)),this},Xi.prototype.destroy=function(t){if(this._isDestroyed)return this;var e,i,n,r=this._element,o=this._items.slice(0),s=this._layout&&this._layout.styles||{};for((n=this)._resizeHandler&&(n._resizeHandler(!0),window.removeEventListener("resize",n._resizeHandler),n._resizeHandler=null),e=0;e<o.length;e++)o[e]._destroy(t);for(i in this._items.length=0,Fe(r,this._settings.containerClass),s)r.style[i]="";return this._emit("destroy"),this._emitter.destroy(),delete E[this._id],this._isDestroyed=!0,this},Xi.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},Xi.prototype._hasListeners=function(t){return!this._isDestroyed&&this._emitter.countListeners(t)>0},Xi.prototype._updateBoundingRect=function(){var t=this._element.getBoundingClientRect();this._width=t.width,this._height=t.height,this._left=t.left,this._top=t.top,this._right=t.right,this._bottom=t.bottom},Xi.prototype._updateBorders=function(t,e,i,n){var r=this._element;t&&(this._borderLeft=Gt(r,"border-left-width")),e&&(this._borderRight=Gt(r,"border-right-width")),i&&(this._borderTop=Gt(r,"border-top-width")),n&&(this._borderBottom=Gt(r,"border-bottom-width"))},Xi.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1),this._boxSizing=qt(this._element,"box-sizing")},Xi.prototype._onLayoutDataReceived=(Pi=[],function(t){if(!this._isDestroyed&&this._nextLayoutData&&this._nextLayoutData.id===t.id){var e,i,n,r,o=this,s=this._nextLayoutData.instant,a=this._nextLayoutData.onFinish,c=t.items.length,u=c;for(this._nextLayoutData=null,!this._isLayoutFinished&&this._hasListeners(O)&&this._emit(O,this._layout.items.slice(0)),this._layout=t,Pi.length=0,r=0;r<c;r++)(e=t.items[r])?(i=t.slots[2*r],n=t.slots[2*r+1],e._canSkipLayout(i,n)?--u:(e._left=i,e._top=n,e.isActive()&&!e.isDragging()?Pi.push(e):--u)):--u;if(t.styles&&ni(this._element,t.styles),!this._hasListeners(A)||(this._emit(A,t.items.slice(0),!0===s),this._layout.id===t.id)){var l=function(){if(!(--u>0)){var e=o._layout.id!==t.id,i=Yt(s)?s:a;e||(o._isLayoutFinished=!0),Yt(i)&&i(t.items.slice(0),e),!e&&o._hasListeners(I)&&o._emit(I,t.items.slice(0))}};if(!Pi.length)return l(),this;for(this._isLayoutFinished=!1,r=0;r<Pi.length&&this._layout.id===t.id;r++)Pi[r]._layout.start(!0===s,l);return this._layout.id===t.id&&(Pi.length=0),this}}}),Xi.prototype._setItemsVisibility=function(t,e,i){var n,r,o=this,s=t.slice(0),a=i||{},c=!0===a.instant,u=a.onFinish,l=a.layout?a.layout:void 0===a.layout,h=s.length,f=e?"showStart":C,d=e?"showEnd":"hideEnd",p=e?"show":"hide",_=!1,v=[],g=[];if(h){for(r=0;r<s.length;r++)n=s[r],(e&&!n._isActive||!e&&n._isActive)&&(_=!0),n._layout._skipNextAnimation=!(!e||n._isActive),e&&n._visibility._isHidden&&g.push(n),e?n._addToLayout():n._removeFromLayout();g.length&&(this.refreshItems(g,!0),g.length=0),_&&!1!==a.syncWithLayout?this.on(A,m):m(),_&&l&&this.layout(l===ji,Yt(l)?l:void 0)}else Yt(u)&&u(s);function m(){for(_&&!1!==a.syncWithLayout&&o.off(A,m),o._hasListeners(f)&&o._emit(f,s.slice(0)),r=0;r<s.length;r++)s[r]._gridId===o._id?s[r]._visibility[p](c,(function(t,e){t||v.push(e),--h<1&&(Yt(u)&&u(v.slice(0)),o._hasListeners(d)&&o._emit(d,v.slice(0)))})):--h<1&&(Yt(u)&&u(v.slice(0)),o._hasListeners(d)&&o._emit(d,v.slice(0)))}};var $i=Xi,Fi=function(i){var r,o;function s(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n(t(e=i.call.apply(i,[this].concat(o))||t.currentTarget).parents("form").submit()},onGeolocationDetect:function(){var i=e.getConfig().TXT_GEO_WAIT;$(t(e)).html(i),s.getInstance().getLocation()},onLocationFail:function(){var t=this.getConfig().TXT_GEO_FAILED;$(".geolocation").replaceWith(t)},onLocationSuccess:function(t){var e=this,i=this.getConfig().ajaxUrl;$.getJSON(i,{method:"geolocation",longitude:t.coords.longitude,latitude:t.coords.latitude},(function(t){t.loc?window.location=t.loc:e.eventHandlers.onLocationFail.call(s.getInstance())}))}}),e}o=i,(r=s).prototype=Object.create(o.prototype),r.prototype.constructor=r,e(r,o),s.getInstance=function(){return s.instance_||(s.instance_=new s),s.instance_};var a=s.prototype;return a.init=function(){this.bindDOMEvents(),this.initSelect2Instances(),this.updateFiltersIndicator(),x.initPremiums(),this.getConfig().showHighmaps&&this.initHighMaps(),this.getConfig().showGrid&&this.initGridLayout()},a.bindDOMEvents=function(){$(".geolocation").on("click",this.eventHandlers.onGeolocationDetect),$(".select2").on("select2:select",this.eventHandlers.onGeolocationSelect)},a.updateFiltersIndicator=function(){var t=!1,e=$("#more-filters-form").serializeArray(),i=["search"];e.forEach((function(e){e.name&&i.includes(e.name)||e.value&&e.value.length&&(t=!0)})),t?$(".filters-indicator").show():$(".filters-indicator").hide()},a.getLocation=function(){var t=this.eventHandlers.onLocationFail.bind(this),e=this.eventHandlers.onLocationSuccess.bind(this);navigator.geolocation?Cu(t){return e(t)}),(function(){return t()})):t("not supported")},a.initHighMaps=function(){var t=this.getConfig(),e=t.mapperData,i=t.country;if(!i)return console.warn("Country was not specified");$("#province-map").length&&$.getJSON("/static/vendor/mapdata/"+i.toLocaleString()+"-all.geo.json",(function(t){$("#province-map").highcharts("Map",{title:{text:null},chart:{backgroundColor:"#EEEEEE",spacingBottom:0,spacingTop:0,spacingLeft:0,spacingRight:0},mapNavigation:{enabled:!1,enableDoubleClickZoomTo:!1},credits:{enabled:!1},legend:{enabled:!1},tooltip:{enabled:!1},series:[{data:e,mapData:t,joinBy:["iso2","iso2"],name:"Basemap",showInLegend:!1,color:"(this.point.value)return this.point.name}}}]})})),$("#region-map").length&&$.getJSON("/static/vendor/mapdata/"+i.toLocaleString()+"-all.geo.json",(function(t){$("#region-map").highcharts("Map",{title:{text:null},chart:{backgroundColor:"#fff",spacingBottom:0,spacingTop:0,spacingLeft:0,spacingRight:0},mapNavigation:{enabled:!1,enableDoubleClickZoomTo:!0},credits:{enabled:!1},legend:{enabled:!1},tooltip:{backgroundColor:"#ffffff",borderColor:"#eeeeee",borderRadius:0,borderunction(){return this.point.options.name}},plotOptions:{seriunction(){location.href=this.options.url}}}}},series:[{data:e,mapData:t,joinBy:["iso2","iso2"],name:null,states:{hover:{color:"#d24d3d"}},color:"#ffffff"}]})}))},a.initSelect2Instances=function(){var t=m.getInstance(),e=this.getConfig().ajaxUrl,i=$('.select2[name="cid"]');if(i.length){var n={maximumSelectionSize:1,minimumInputLength:2,ajax:{url:e+"?method=city&v=2&country=ownche:!0,data:function(t){return{q:t.term}}},dropdownParent:i.parents(".rl-select2-wrapper").first()};t.initSelect2(i,n),$('[data-init="afterCid"]').css("opacity","1")}},a.initGridLayout=function(){new $i(".cities-grid",{layout:{fillGaps:!0,horizontal:!1,alignRight:!1,alignB,e){$(".cities-grid").css("opacity","1")}))},s}(_);n(eady((function(){Fi.getInstance().init()}))}()}();