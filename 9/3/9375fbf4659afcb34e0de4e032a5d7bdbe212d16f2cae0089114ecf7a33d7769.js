!function(){"use strict";var e=r,s=),a=c=function(e){return Array.isArray(e)},l=(r=+Date.now()+Number((""+Math.random()).slice(2,8)),,h=u=p=f=d=g=m=function(e){var t={};try{var i=g(e).search;if(!i)return t;(i=i.slice(1)).split("&").forEach(}catch(e){}return t},v="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;ar y=_(,b=function(e,t){try{return e?y.get(e,{domain:t||document.domain}):y.get()}catch(e){return""}},E=w=);var S={getItem:function(e){try{var t=localStorage.getItem(e),i=t;try{t&&"string"==typeof t&&(i=JSON.parse(t))}catch(e){}return i||{}}catch(e){}return{}},setItem:function(e,t){try{var i="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,i)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return b(e,t)},setCookie:function(e,t,i,n){E(e,t,i,n)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},k={getItem:setItem:removeItem:getCookie:setCookie:isSupportSession:)},D=),A=function(){eturn e.prototype.init=e.prototype.last=e.prototype.browser=function(){var e,t,i="",n=""+parseFloat(this.appVersion),o=this.userAgent;return-1!==o.indexOf("Edge")||-1!==o.indexOf("Edg")?(i="Microsoft Edge",-1!==o.indexOf("Edge")?(e=o.indexOf("Edge"),n=o.substring(e+5)):(e=o.indexOf("Edg"),n=o.substring(e+4))):-1!==(e=o.indexOf("MSIE"))?(i="Microsoft Internet Explorer",n=o.substring(e+5)):-1!==(e=o.indexOf("Lark"))?(i="Lark",n=o.substring(e+5,e+11)):-1!==(e=o.indexOf("MetaSr"))?(i="sougoubrowser",n=o.substring(e+7,e+10)):-1!==o.indexOf("MQQBrowser")||-1!==o.indexOf("QQBrowser")?(i="qqbrowser",-1!==o.indexOf("MQQBrowser")?(e=o.indexOf("MQQBrowser"),n=o.substring(e+11,e+15)):-1!==o.indexOf("QQBrowser")&&(e=o.indexOf("QQBrowser"),n=o.substring(e+10,e+17))):-1!==o.indexOf("Chrome")?-1!==(e=o.indexOf("MicroMessenger"))?(i="weixin",n=o.substring(e+15,e+20)):-1!==(e=o.indexOf("360"))?(i="360browser",n=o.substring(o.indexOf("Chrome")+7)):-1!==o.indexOf("baidubrowser")||-1!==o.indexOf("BIDUBrowser")?(-1!==o.indexOf("baidubrowser")?(e=o.indexOf("baidubrowser"),n=o.substring(e+13,e+16)):-1!==o.indexOf("BIDUBrowser")&&(e=o.indexOf("BIDUBrowser"),n=o.substring(e+12,e+15)),i="baidubrowser"):-1!==(e=o.indexOf("xiaomi"))?-1!==o.indexOf("openlanguagexiaomi")?(i="openlanguage xiaomi",n=o.substring(e+7,e+13)):(i="xiaomi",n=o.substring(e-7,e-1)):-1!==(e=o.indexOf("TTWebView"))?(i="TTWebView",n=o.substring(e+10,e+23)):-1!==(e=o.indexOf("Chrome"))?(i="Chrome",n=o.substring(e+7)):-1!==(e=o.indexOf("Chrome"))&&(i="Chrome",n=o.substring(e+7)):-1!==o.indexOf("Safari")?-1!==(e=o.indexOf("QQ"))?(i="qqbrowser",n=o.substring(e+10,e+16)):-1!==(e=o.indexOf("Safari"))&&(i="Safari",n=o.substring(e+7),-1!==(e=o.indexOf("Version"))&&(n=o.substring(e+8))):-1!==(e=o.indexOf("Firefox"))?(i="Firefox",n=o.substring(e+8)):-1!==(e=o.indexOf("MicroMessenger"))?(i="weixin",n=o.substring(e+15,e+20)):-1!==(e=o.indexOf("QQ"))&&(i="qqbrowser",n=o.substring(e+3,e+8)),-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(" "))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(")"))&&(n=n.substring(0,t)),{browser:i,browser_version:n}},e.prototype.os=function(){for(var e="",t="",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],n=0;n<i.length;n++){var o=i[n];if(o.r.test(this.userAgent)){"Mac OS X"===(e=o.s)&&this.isNewIpad()&&(e="iOS");break}}var r=s=/Windows/.test(e)&&(t=r(/Windows (.*)/,e),e="windows");var a,c;switch(e){case"Mac OS X":t=s("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":a=this.userAgent,(c=r(/Android ([\.\_\d]+)/,a))||(c=r(/Android\/([\.\_\d]+)/,a)),t=c,e="android";break;case"iOS":t=this.isNewIpad()?s("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=e.prototype.isNewIpad=e}(),T={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},M={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},O="5.0.52_1";var G,x,C="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-editor-rangers.js",I="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-core.js",R="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/heatmap-core",z=function(){eturn e.prototype.checkVerify=)}),this.checkEventParams(o){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var i in t)return!!this.calculate(i,"params")&&(!("string"==typeof t[i]&&t[i].length>1024)||(console.warn("params: "+i+" can not over 1024 byte, please check;"),!1));return!0},e.prototype.calculate=function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||(!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||(console.warn(("event"===t?"event":"params")+" name: "+e+" can not start wi",e.Destory.DEVTOOL_WEB_READY="devtool-web-ready"}(x||(x={}));var B=G,N=void 0,U=(new Date).getTimezoneOffset(),P=parseInt(""+-U/60,10),L=60*U,V=7776e6,$=function(){function t(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var i=new A(t.app_id,t.cookie_domain||"",t.cookie_expire||V).init();this.eventCheck=new z(e,t);var n="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new D(!1,"session"),this.localStorage=new D(!1,"local"),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var o=this.localStorage.getItem(n);o&&1==o?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(n,"1")),this.envInfo={user:{user_unique_id:N,user_type:N,user_id:N,user_is_auth:N,user_is_login:N,device_id:N,web_id:N,ip_addr_id:N,user_unique_id_type:N},header:{app_id:N,app_name:N,app_install_id:N,install_id:N,app_package:N,app_channel:N,app_version:N,ab_version:N,os_name:i.os_name,os_version:i.os_version,device_model:i.device_model,ab_client:N,traffic_type:N,client_ip:N,device_brand:N,os_api:N,access:N,language:i.language,region:N,app_language:N,app_region:N,creative_id:i.utm.creative_id,ad_id:i.utm.ad_id,campaign_id:i.utm.campaign_id,log_type:N,rnd:N,platform:i.platform,sdk_version:O,sdk_lib:"js",province:N,city:N,timezone:P,tz_offset:L,tz_name:N,sim_region:N,carrier:N,resolution:i.screen_width+"x"+i.screen_height,browser:i.browser,browser_version:i.browser_version,referrer:i.referrer,referrer_host:i.referrer_host,width:i.screen_width,height:i.screen_height,screen_width:i.screen_width,screen_height:i.screen_height,utm_term:i.utm.utm_term,utm_content:i.utm.utm_content,utm_source:i.utm.utm_source,utm_medium:i.utm.utm_medium,utm_campaign:i.utm.utm_campaign,tracer_data:JSON.stringify(i.utm.tracer_data),custom:{},wechat_unionid:N,wechat_openid:N}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(i),this.initDomain(),this.ininitConfig.channel;this.domain=h(M[t])}},t.prototype.setDomain=function(e){this.domain=e},t.prototype.getDomain=function(){retlStorage.getItem(e);this.setAbCache(t)},t.prototype.setAbCache=function(e){this.ab_cache=e},t.prototype.getAbCache=function(){return bVersion=function(e){this.ab_version=e},t.prototype.getAbVersion=function(){return th(){this.ab_version="",this.ab_cache={}},t.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||"/list";break;case"webid":t="/webid";break;case"tobid":t="/tobid"}var i="";return this.initConfig.caller&&(i="?sdk_version="+O+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+thisInfo.header.cust[n]:i.envInfo.he,level:"error",time:D‰∫ÜÂºÇÂ∏∏",level:"errèëÁîü‰∫ÜÂºÇÂ∏∏",lev∏",leve+e)}=!1;e){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),H={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function J(e,t,i,n,o,r,s,a,c){try{var l=new XMLHttpRequest,h=a||"POST";l.open(h,""+e,!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),s&&l.setR+s),n&&(l.{var e=nul.responseText)}catch(t){e={}}o(e,t)}}},l.onerror=function(){l.abort(),r&&r(t,H.XHR_ON)},c?l.send(t):l.send(JSON.stringify(t))}catch(e){}}var W=4001,F=4e3,Y=4002,Q=4003,X=function(e,t,i,n){try{var o=e.match(/\/v\d\//),r="";r=o?o[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/";var s=e.split(r)[0];if(!s)return void n(e,t,W);t.forEach(function(o){var r=function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&void 0!==e[i]&&(t+="&"+i+"="+encodeURIComponeneturn t="&"===t[0]?t.slice(1):t}(o),a=new Image(1,1);a.onload=function(){a=null,i&&i()},a.onerror=function(){a=null,n&&n(e,t,F)},a.src=s+"/gif?"+r})}catch(i){n&&n(e,t,Y,i.message)}},Z=function(e,t,i,n,o,r,s,a){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(s)return window.navigator&&window.navigator.sendBeacon?void(window.navigator.sendBeacon(e,JSONce(/[xy]/g,function(e){var t=16*Math.random()|0;returSessionId()}),this.collect.on(B.)}:e.timestamp=Date.now()is.sessionKey,t),this.sese.getItem(this.sessionKeyhis.sessionExp),this.sessio(){var e={sessionId:eme&&(e={sessionId:e){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return t.prototype.apply=function(e,t){var i=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new z(e,t),this.cacheStorgae=new D(!0),this.localStorage=new D(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||t.report_time||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.pageId=e,this.collect.on(B.ConfigDomain,function(){i.reportUrl=i.configManager.getUrl("event")}),this.collect.on(B.Event,function(e){i.event(e)}),this.collect.on(B.BeconEvent,function(e){i.beconEvent(e)}),this.covisibilitychange",funceportAll(!0)},!1)}pe:x.DEBUGGER_MESSAGE_S.sdkReady&&(this.cacheSte.length&&(this.cacthis.eventKey)||[];t.le;var o=this.split(this.m.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},t.prototype.merge=function(t,i){var n=this,o=this.configManager.get(),r=o.header,s=o.user;this.config.enable_pageid&&(r.custom.page_id=this.pageId),r.referrer=this.handleRefer(),r.custom=JSON.stringify(r.custom);SAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),t}}),h=JSON.parse(JSON.stringify({events:l,user:s,header:r}));h.local_time=Math.floor(Date.now()/1e3),h.user_unique_type=this.config.enreturn u.push(h),u},t.prototype.split=function(e){return e=e.map(function(e){var t=[];return t.push(e),t})},t.prototype.send=function(e,t){var i=this;e.length&&(this.config.disable_track_event||e.forEach(function(e){try{var n=JSON.parse(JSON.stringify(e));i.config.filter&&((n=i.config.filter(n))||console.warn("filter must return data !!")),i.collect.eventFilter&&n&&((n=i.collect.eventFilter(n))||console.warn("filterEvent api must return data !!"));var o=n||e,r=JSON.parse(JSON.stringify(o));if(i.eventCheck.collect.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_EVENT,info:"ÂüãÁÇπ‰∏äÊä•ÁΩëÁªúÂºÇÂ∏∏",time:Date.now(),data:r,code:t,failType:"ÁΩëÁªúÂºÇÂ∏∏Â§±Ë¥•",status:"fail"})},t,!1),i.collect.emit(B.SubmitAfter,o)}catch(e){console.warn("somethinsage})}}))},t}-8e3+-1e11).replace(/[01.on(B.ConfigWebId,functio.CustomWebId,functeToken.web_id?this.cogram")){var t=m(window.lEBUGGER_MESSAGE,{typee.prototype.complete=functcompleteTtWid=function(e){var t=e.user_unique_id||"",i=this.configManager.get("user_unique_id");(i||t)&&this.configManager.set({user_unique_id:i||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(B.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),i=this.configManager.get("user_unique_id"),n=this.cacheToken&&this.cacheToken.user_unique_id;if(t===i&&t===n)return;this.configManager.set({user_unique_id:t}),this.cacheToken?this.cacheToken.user_unique_id=t:(this.cacheToken={},this.cacheToken.user_unique_id=t),this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(B.TokenChange,"uuid"),this.collect.emit(B.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&this.configManager.get("user_unique_id")!==this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.que_id");i&&i!==t||(thiable_ttwebid?(this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.co:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,function(e){e&&0===e.e?i(e.tobid):i("")},function(){i("")})})},e}(),re=function(){function e(e,t){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.eventVerifyReady=!1,this.collect=e,this.config=t,this.app_id=t.app_id;var i=e.adapters,n=i.storage,o=i.fetch;this.cacheStorgae=new n(!1,"session"),this.fetch=o,this.eventVerifyInfo=[],this.sdk_type=O.includes("tob")?"tob":"inner",this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pagevtion(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){console.log("devTool load fail, "+e.message)}},e.prototype.load=function(){return e=this,i=void 0,o=function(){var e,i,n;return t(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=m(window.location.href),1===this.getStorage()||e.open_devtool_web||parseInt(e.app_id)===this.app_id?(this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool(),[4,this.fetchEventInfo()]):[2];case n=Promise))(function(t,r){function s(function c(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(s,a)}c((o=o.apply(e,i||[])).next())});var e,i,n,o},e.proorage=function(){this.cacheStorgae.setItem("__applog_devtool_web_"+this.app_id,1)},e.prototype.loadDevTool=function(){this.loadScript("https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/devtool/debug-web.0.0.2.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"Âü∫Êú¨‰ø°ÊÅØ",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,"‰∏äÊä•ÂüüÂêç":this.collect.configManager.getDomain(),"SDKÁâàÊú¨":O,"SDKÂºïÂÖ•ÊñπÂºè":"script"}},{title:"Áî®Êà∑‰ø°ÊÅØ",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"ÁÇπÂáªËé∑ÂèñSSID"}},{title:"ÂÖ¨ÂÖ±ÂèÇÊï∞‰ø°ÊÅØ",type:2,infoName:{"ÊµèËßàÂô®":this.collect.configManager.get("browser"),"ÊµèËßàÂô®ÁâàÊú¨":this.collect.configManager.get("browser_version"),"Âπ≥Âè∞":this.collect.configManager.get("platform"),"ËÆæÂ§áÂûãÂè∑":this.collect.configManager.get("device_model"),"Êìç‰ΩúÁ≥ªÁªü":this.collect.configManager.get("os_name"),"Êìç‰ΩúÁ≥ªÁªüÁâàÊú¨":this.collect.configManager.get("os_version"),"Â±èÂπïÂàÜËæ®Áéá":this.collect.configManager.get("resolution"),"Êù•Ê∫ê":this.ser").web_id,e.info[2].infoName["Ëá™ÂÆö‰πâ‰ø°ÊÅØ"]=JSON.stringify(e.collect.configManager.get("custom")),e.config.enable_ab_test&&(e.info[4].infoName["Â∑≤ÊõùÂÖâVID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["A/BÂüüÂêç"]=e.config.ab_channel_domain||h(T[e.config.channel]),e.info[4].infoName["ÂÖ®ÈÉ®ÈÖçÁΩÆ"]=e.collect.configManager.getAbData()),e.config.Native&&(e.info[5].infoName["ÊòØÂê¶ÊâìÈÄö"]=!!e.collect.bridgeReport)})},e.prototype.loadHook=function(){var e=this;this.collect.stop(),this.collect.on(x.DEBUGGER_MESSAGE,function(t){switch(t.type){case x.DEBUGGER_MESSAGE_SDK:var i={time:t.time,type:t.logType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(i.desc={content:JSON.stringify(t.data)}),e.updateLog(i),t.secType&&"AB"===t.secType?(e.info[4].infoName["Â∑≤ÊõùÂÖâVID"]=e.collect.configManager.getAbVersion(),e.info[4].infoName["ÂÖ®ÈÉ®ÈÖçÁΩÆ"]=e.collect.configManager.getAbData()):"USER"===t.secType&&(e.info[1].infoName.uuid=e.collect.configManager.get("user").user_unique_id,e.info[1].infoName.web_id=e.collect.configManager.get("user").web_id),void e.updateInfo();case x.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var n=r;if(r.custom=JSON.parse(r.custom),!o.length)return;o.forEach(function(i){i.checkShow=!0,i.searchShow=!0,i.type=-1!==e.filterEvent.indexOf(i.event)?"sdk":"cus",i.type=e.collect.bridgeReport?"bridge":i.type,i.params=JSON.parse(i.params),"fail"===t.status&&(i.info={message:"code: "+t.code+"Ôºå msg: "+t.failType},i.failType=t.failType);var n=!1,o=!1,r=[];e.eventVerifyInfo&&e.eventVerifyInfo.length&&(e.eventVerifyInfo.forEach(function(e){e.eventStatus=!1}),e.eventVerifyInfo.forEach(function(t){i.event===t.name&&(o=!0,n=!0,i.verifyStatus=t.status,Object.keys(i.params).forEach(function(n){if("event_index"!==n){var s={};s.paramsKey=n,s.paramsKeyValue=i.params[""+n],s.paramsStatus=!1,s.paramsStatusInfo="Â±ûÊÄßÊú™ÂΩïÂÖ•",t.params.forEach(function(t){n===t.name&&(t.checked=!0,typeof i.params[""+n]!==e.formalue_type):(s.paramsStatus=!0,s.paramsStatusInfo=""))}),r.push(s),s.paramsStatusInfo&&(o=!1)}}),t.params.forEach(function(e){e.checked||(o=!1,r.push({paramsKey:e.name,paramsStatus:!1,paramsStatusInfo:"Áº∫Â∞ëÂ±ûÊÄß"+e.name}))}))})),i.reportStatus="success"===t.status,i.paramsInfo=r,i.eventStatus=o&&"success"===t.status,i.eventRecord=n}),e.updateEvent(n)}return}})},e.prototype.formatParamsType=function(e){switch(e){case 0:return"string";case 1:case 2:return"number";case 3:return"boolean"}},e.prototype.fetchEventInfo=function(){var e=this;try{return new Promise(function(t){var i=h("1fz22z22z1nz21z4mz4bz4bz18z1nz1nz1jz1mz1ez1fz1mz1kz1cz4az19z27z22z1cz1bz18z1lz1az1cz4az1lz1cz22z4bz18z1nz1nz1jz1mz1ez1bz1cz24z22z1mz1mz1jz21z4bz1mz1nz1cz1lz18z1nz1gz4bz24z4dz4bz18z1nz1nz16z1jz1mz1ez16z1kz1cz22z18")+"?app_id="+e.app_id+"&t="+e.sdk_type+"&nc=false";e.fetch(i,null,3e3,!1,function(i){e.eventVerifyReady=!0,e.collect.reStart(),t({data:i.data,verifyStatus:!0})},function(){e.eventVerifyReady=!0,e.collect.reStart{data:[],verifyStatus:!1}}gin){if(t&&t.data&&"dev0,e.sendAlready)return),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken(function(t){e.info[1].infoName.ssid=t.tobid,e.updateInfo()})}})},e.prototype.sendDent("div");i.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var n=document.createElement("div");n.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(i),document.getElementsByTagName("body")[0].appendChild(n),document.getElementById("debugger-applog-web").addEventListener("click",functi1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new s,this.remotePlugin=new Map,this.Types=B,this.adapters.fetch=J,this.adapters.storage=D,this.loadType="full"}return t.usePlugin=function(e,i,n){if(i){for(var o=!1,r=0,s=t.plugins.length;r<s;r++){if(t.plugins[r].name===i){t.plugins[r].plugin=e,t.plugins[r].options=n||{},o=!0;break}}o||t.plugins.push({name:i,plugin:e,options:n})}else t.plugins.push({plugin:e})},t.prototype.usePlugin=function(e,t,i){e&&("full"===this.loadType&&this.remotePlugin.get(e)?console.info("your sdk version has "+his.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:i}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},t.prototype.init=function(e){var i,n=this;(this.logger=new j(this.name,e.log),this.inited)?this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!"):e&&a(e)?e.app_id&&("number"==typeof(i=e.app_id)&&!isNaN(i))?!e.app_key||function(e){return"string"==typeof e}(e.app_key)?(e.channel_domain||-1!==["cn","sg","va"].indexOf(e.channel)||(this.logger.warn("channel must be `cn`, `sg`,`va` !"),e.channel="cn"),this.spider=new K,this.spider.checkSpider(e)?this.logger.warn("your env may be a spider, can not report!"):(this.appBridge=new q(this,e.enable_native),this.bridgeReport=this.appBridge.bridgeInject(),tew re(this,e),this.initConfig=e,this.emit(B.Init),this.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"SDK ÊâßË°åINIT",data:e,level:"info",time:Date.now()}),e.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.set({app_id:e.app_id}),this.eventManager=new ie,this.tokenManager=new oe,this.sessionManager=new te,Promise.all([new Promise(function(e){n.once(B.TokenComplete,function(){e(!0)})}),new Promise(function(e){n.once(B.Start,function(){e(!0)})})]).then(function(){try{t.plugins.reduce(function(e,t){var i=t.plugin,o=t.options,r=JSON.parse(JSON.stringify(n.initConfig)),s=Object.assign(r,o),a=new i;return a.apply(n,s),e.push(a),e},n.pluginInstances)}catch(e){console.warn("load plugin error, "+e.message),n.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message})}n.sdkReady=!0,n.emit(B.Ready),n.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"SDK ÂàùÂßãÂåñÂÆåÊàê",time:Date.now(),level:"info",data:n.configManager.get("user")}),n.logger.info("appid: "+e.w.opener||window.pa_id+" token change, new userInfo:"+JSON.stringify(n.configManager.get("user"))),n.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"SDK ËÆæÁΩÆ‰∫ÜÁî®Êà∑‰ø°ÊÅØ",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})}),n.on(B.TokenReset,function(){n.logger.info("appid: "+e.app_id+" token reset, new userInfo:"+JSON.stringify(n.configManager.get("user"))),n.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"SDK ÈáçÁΩÆ‰∫ÜÁî®Êà∑‰ø°ÊÅØ",time:Date.now(),secType:"USER",level:"info",data:n.configManager.get("user")})}),n.on(B.RouteChange,function(t){t.init||e.disable_route_report||n.pageView()})}),this.tokenManager.apply(this,e),this.eventManager.apply(this,e),this.sessionManager.apply(this,e)),this.inited=!0)):this.logger.warn("app_key param is error, must be string, please check!"):this.logger.warn("app_id param is error, muableAutoPageView=!0,delete t.disable_auto_pv);var i=e({},t),n=this.initConfig.configPersist||this.initConfig.config_persist||!1;if(this.initConfig&&n){var o=this.configManager.getStore();o&&(i=Object.assign(o,t)),this.configManager.setStore(t)}i.web_id,i.user_unique_id;var r=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.exOf(n[o])<0&&(i[n[o]]=e[n;this.configManager.set(r),i.hasOwnProperty("web_id")&&this.emit(B.ConfigWebId,i.web_id),i.hasOwnProAGE,{type:x.DEBUGGER_M",time:Date.now(),data:i})}else this.logger.warn("config params is error, please check");else this.logger.warn("config must be use after function init")},t.prototype.setUserUniqueID=function(e){this.config({user_unique_id:e})},t.prototype.setHeaderInfo=function(e,t){var i={};i[e]=t,this.config(i)},t.prototype.removeHeaderInfo=funct))},t.prototype.event=f=e.event,n=e.params;i.apprototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return this.logger.warn("eventName is nullÔºå please check"),null;var i=e;/^event\./.test(e)&&(i=e.slice(6));var n=t;"object"!=typeof n&&(n={}),n.profile?deleid 0;return n.local_ms?(o=n.local_ms,delete n.local_ms):o=+new Date,{event:i,params:n,local_time_ms:o,is_bav:thig.autotrack?1:0}}catAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:i.message}),{event:e,params:t}}},t.prototype.filterEvent=function(e){this.eventFilter=e},t.prototype.on=function(e,t){this.hook.on(e,t)},t.prototype.once=function(e,t){this.hook.once(e,t)},t.prototype.off=function(e,t){this.hook.off(e,t)},t.prototype.emit=function(e,t,i){this.hook.emit(e,t,i)},t.prototype.set=function(e){this.hook.set(e)},t.prototype.stop=function(){this.sdkS){this.sdkStop=!1},t.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},t.prototype.predefinePageView=function(t){if(void:document.title||location.path,$is_first_time:""+(this.cohis.event("predefine_pageview",n)}else console.warn("predefinePageView must be use after function init")},t.prototype.clearEventCacht_unionid:e}),this.em.Stay)},t.prototype.resetStayParams=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=""),this.emit(B.SetStay,{url_path:e,title:t,url:i},B.Stay)},t.prototype.getToken=function(t,i){var n=this;if(this.inited){var o=!1,r=function(i){if(!o){o=!0;var r=n.configManager.get().user;return i&&(r.tobid=i,r["diss".split("").reverse().join("")]=i),t(e({},r))}},s=function(){n.tokenManager.getTobId().then(function(e){r(e)})};this.sdkReady?s():(i&&setTimeout(function(){r()},i),this.on(B.Ready,function(){s()}))}else console.warn("getToken must be use after function init")},t.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(B.ProfileSet,e,B.Profile),this.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"SDK ÊâßË°åprofileSet",level:"info",time:Date.now"SDK ÊâßË°åprofileSetOnce"SAGE_SDK,info:"SDK ÊâßË°åprofileI.bridgeReport?this.DEBUGGER_MESSAGE,{type:x,time:Date.now(),data:e})},t.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSo:"SDK ÊâßË°åprofileAppend",level:"info",time:Date.now(),data:e})},t.prototype.setExternalAbVersion=function(e){this.emit(B.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,Bemit(B.AbVar,{name:e,de.getABconfig=function(e,t){this.emit(B.AbConfig,{params:e,callback:t},B.Ab)},t.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersionB.Ab),function(){t.emtype.openOverlayer=function(){this.emit(B.AbO){le[e]=le[e}catch(ad;le[i]&&le[i].forEach(functio,de,!1)}var me="",ve=!1;function _e(e){var t=e.event,i=e.editorUrl;e.collectInstance,e.fromSession;ve||(ve=!0,p(i,function(){pe(t,"abEditorScriptloadSuccess")},function(){t&&pe(t,"abEditorScriptloadError"),ve=!1}))}var ye;!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(ye||(ye={}));var be=function(){function t(){this.fetchStatus="no",this.refreshFetchStatus="complete",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data=null,this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return t.prototype.apply=function(e,t){var i=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var n=t.enable_multilink,o=t.ab_channel_domain,r=t.enable_ab_visual,s=t.ab_crotorage,p=l.fetch;this.cacheStorgae=new u(!1),this.fetch=p,this.enable_multilink=n,this.enable_ab_visual=r,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=s,this.ab_cookie_doreportUrl=""+e.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500;var f=this.collect.Types;this.types=f,this.collect.on(f.TokenChange,function(e){"uuid"===e&&i.readyStatus&&(i.clon(f.TokenReset,function(e){"uuid"===e.AbVar,function(e){var t=e.name,n=e.defaultValue,o=e.callback;i.getVar(t,n,o)}),this.collect.on(f.AbAllVars,function(e){i.getAllVars(e)}),this.collect.on(f.AbConfig,function(e){var t=e.params,n=e.callback;i.getABconfig(t,n)}),this.collect.on(f.AbExternalVersion,function(e){i.setExternalAbVersion(e)}),this.collect.on(f.AbOpenLayer,function(){i.openOverlayer()}),this.collect.on(f.AbCloseLayer,function(){i.closeOverlayer()}),this.collect.on(f.AbVersionChangeOn,function(e){i.changeListener.set(e,e)}),this.collect.on(f.AbVersionChangeOff,function(e){i.changeListener.get(e)&&iink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(this.fetchAB(),this.readyStatus=!0),this.collect.emit(f.AbReady)}},t.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var i=this.collect.hook._hooksCache[e];if(!Object.keys(i).length)return;var n=function(e){i[e].length&&i[e].forEach(function(i){t.collect.hook.emit(e,i)})};for(var o in i)n(o)}},t.prototype.loadMode=function(){var e,t,i=function(){try{var e=JSON.parse(atob(window.name));return e||void 0}catch(e){return}}(),n="";if(i){var o=i.scenario,r=i.href;o?(this.editMode=!0,n=o):!r||-1===r.indexOf("da&&i.length)){n="https:/";for(var s=2;s<i.length&&s!==i.length-1;s++)n=n+"/"+i[s];n+="/visual-ab-core"}}catch(e){}fe("tea:openVisualABEditor",function(i){var o=i.data;if("string"==typeof i.data)try{o=JSON.parse(i.data)}catch(e){o=void 0}if(o){var r=o.langdestoryInstace():this.enabab_appId=r||"",window.TEAccdn.com/obj/data-static/loons=i||[],this.versions=t||ns);this.enable_mulsions(e.join(",")),thisype.getRealVar=functionhis.updateVersions(),this.fBUGGER_MESSAGE_SDK,seccollect.configManager.get()=JSON.stringify(o.custom);var c={events:[a],user:r,header:o};"$ab_url"===t&&window.navigator.sendBeacon?window.navigatDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),d{var t=this;this.exposur.exposureLimit?t=this;this.fetchàêÂäü",time:Date.now(),otype.getABconfig=functiondomain);return t?JSON.p.setCookie(e,t,2592e6,tersion:[],ab_version_multiamp=Date.now(),this.set(thiata={},this.extVersions=[],i.closeOverlayer()})}else if(o&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter(function(e){return n.includes(e)});var s=o.val,a=o.vid;s&&a&&this.getVar("$ab_url",s,function(){i.editMode||(s!==window.location.href?setTimeout(function(){if(!i.collect.destroy){var e=""+s;e=-1===e.indexOf("http")?"https://"+e:e,g(e).host!==location.host?e=e+"&vid="+a:window.history.replaceState("","",e),window.locatger.getAbVersion(),ab_url:window.location.href})};this.collect.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"SDK ÂèëËµ∑ABÂÆûÈ™åËØ∑Ê±Ç",level:"info",logType:"fetch",time:Date.now(),data:o}),this.fetch(this.fetchUrl,o,this.config.ab_timeout||3e3,!1,function(e){i.fetchStatus="complete",i.refreshFetchStatus="complSAGE,{type:x.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"ABÂÆûÈ™åËØ∑Ê±ÇÊàêÂäü",level:"info",logType:"fetch",time:Date.now(),data:o})},function(){i.fetchStatus="complete",i.refreshFetchStatus="complete",i.fetchComplete(null,n.user.user_unique_id),i.collect.emit(i.types.AbTimeout),t&&t(null),i.collect.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SgType:"fetch",time:Date.now()})})},t.prototype.filterUrl=function(e){try{e.prototype.apply=function(e,t){var i=this;e.adapters.fetch;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var n=e.Types;e.on(n.SubmitBefore,function(e){window.n"please use correct etunction(e,t,i){this.url_path=e,this.url=i,this.title=t,this.disableCallback=this.enablePageAlive()},t.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},t.prototype.sendEvent=function(t,i){void 0===i&&(i=!1);var n=i?this.aliveDTime:Date.now()-path"),title:this.getParams("function(e){switch(e){cas|location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},t.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval(function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)},1e3)},t.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&itychange.bind(thiction t(e,t){var i=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.visibilitychange=function(){"hidden"===document.visibilityState?i.activeEndTime=Date.now():"visible"===document.visibilityState&&(i.activeEndTime&&(i.totalTime+=i.activeEndTime-i.activeStartTime,i.activeTimes+=1his.beforeunload=fuow.sessionStorage.seringify({duration:i.toduration)&&(this.options=Objecte.resetData=function()tPageClose=function(){var t=Date.now()-this.pageStartTime;this.totalTime<0||t<0||this.totalTime>=this.maxDuration||(this.collect.beconEvent(this.options.closeName,e({url_path:this.getParams("url_path"),title:ts_supportle=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(et],e}=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var n=this.collect.Types;this.collect.on(n.SessionReset,function(){i.process()})}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.docums.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),Oe=function(){function e(){}return e.prototype.apply=function(e,t){var i=this;if(this.collect=e,this.config=t,!this.config.channel_domain){var n=e.adapters.fetch;if(this.fetch=n,!t.disable_track_event&&!t.disable_sdk_monitor){thisimeoucal_tiset.hctit.p:e.Nam)}var Re=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},ze=function(e,t){if("string"==typeof t)return Re(e,t);if(c(t)){for(var i=!1,n=0;n<t.length;n++){if(Re(e,t[n])){i=!0;break}}return i}},Be=function(e,t){var i={};if("string"==typeof t)Re(e,t)&&(i.attrs=e.getAttribute(t));else if(c(t))for(var n=0;n<t.length;n++){Re(e,t[n])&&(i[t[n]]=e.getAttribute(t[n]))}return i},Ne=function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some(functi"===e.tagName.toLowerCr o=this;this.statistieight,window.innerWidth,1!==e.nodeType)return!1;if(!t.svg&&Ue(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var i=e;return!("ptions)&&o.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){o.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){o.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(t,i){i&&"pushState"===i&&o.eventHandel({eventType:"dom",eventName:"beat"},e({beat_type:0},t)),o.eventHandel({eveneventHandel({eventect=i,this.options=t,this.beatTime=t.beat,this.domContainer=t.container||document}return t.prototype.init=function(e){this.ethis.addListener(t)},t.prototype.addListener=functhis.clntListener("submit",this.submitEvent,!0),this.config.pv){this.collect.on("route-change",function(e){var i=e.config,n=e.name;t=!0,clearTimeout(i))},2e3)}if(this.config.beat){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",function(){t.beatEvent(t.beatTime)});var n=0,o=null;window.addEventListener("scroll",function(){clearTimeout(o),o=setTimeout(r,500),n=document.documentElement.scrollTop||document.body.scrollTop});var r=function(){(document.documentElement.scrollTop||document.body.scrollTop)==n&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}tryoadEvent(s[0].startTime||0),tner.removeEventListener("submit",this.submitEvent,!0)},t.prototype.beatEvent=function(e){var t=this;try{var i;this.eventHandel({eventType:""},{beat_type:0}),t.beatTime&&clearInterval(i)})}catch(e){}},t.prototype.getDefaultConfig=function(){return{is_htapturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoturn parentElement;var i=[],n=[];return t.forEach(function(e){var t=function(e){if(null===e)return{str:"",index:),o=t.str,r=t.index;i.unshift(o),n.unshift(r)}),{element_path:"/"+i.joction je(e,t,i,n){var o={},r=function(e){if(e){var t=e.getBoundingClientRect(),i=t.width,n=t.height;return{left:t.left,top:t.top,element_width:i,element_height:n}}}(t),s=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var i=e.clientXuch_y,u=$e(t),p=u.element_path,f=u.positions,d=function(e){var t=Ce(e),i=[];return function e(t){var n=Ie(t);if(n&&-1===i.indexOf(n)&&i.push(n),t.childNodes.length>0)for(var o=t.childNodes,r=0;r<o.length;r++)8!==o[r].nodeType&&e(o[r])}(t),i}(t),g=window.performance.timing.navigationStart,m=Date.now()-g,v=f.map(function(e){return""+e}),_=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(_=window.TEAVisualEditor.getOriginXpath({xpath:p,positions:v})),o.element_path=_&&_.xpath||p,o.positions=_&&_.positions||v,n&&!n.text&&(o.textsar o=t.childNo(var b in y)o[b]=y[b]}var E=Ce(t);return"A"===E.tag:window.location.href,page_title:document.title})},qe=function(){function t(e,t){this.ignore={text:!1},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{clic.text&&(this.ignore.text=!0),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return t.prototype.handleEvent=funt",t,t.target,this.options)}}catcht.documentElement.scrollTop?d.prototydow.performance.timing.navigationStart}catch(e){console.log("beat event error "+JSON.stringify(sign({hea e=window.TEAVisualEditor.lang=window.TEAVisualEditor.lang||y.get(Fe),t=window.TEAVisualEditor.__editor_ajax_domain=window.TEAVisualEditor.__editor_ajax_domain||y.get(We),i=window.TEAVisualEditor.__editor_verison=window.TEAVisualEditor.__editor_verison||y.get(Ye),n=window.TEAVie(o+18e5);y.set(Je,"1",{expires:r}),y.set(We,t,{expires:r}),y.set(Qe,n,{expires:r}),y.set(Fe,e,{expires:r}),y.set(Ye,i||"",{expires:r})}catch(e){console.log("set cookie err")}}var Ze=!1;function et(e){var on(){pe(t,"editorScriptloadSuccess"),n.destroy()},function(){t&&pe(t,"editorScriptloadError"),Ze=!1}))}function tt(e,t){window.TEAVisualEditor=window.TEAVisualEdiit("/5.0");r=h[0]||r}}}catch(e){}}if(ge(t,O)"";u&&(window.TEAVisualEditor.__editor_ajax_domain=u,p=y.get(Qe)),et({eventeof t.data)try{s=JSON.parse(t.data)}catch(e){s=void 0}if(sifyNo",eveecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)rction(e){this.instt")})},e}(),st={hashTag:!1,impr:!1},at=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var i=e.Types;t.autotrack&&t.autady(i.Autotrack),this.try{var i=e.eventNamt",extra:{methods:"GET"}},n)}else if("page_view"===i||"page_statistics"===i){var o=void 0ntHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},o)}else if("beat"===i){var r=this.EventHandle.handleBeadtEvent(t),s=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:s},r)}}catch(e){console.log("handel dom event error "+JSON.stringify(e))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}();try{var ct=ae();ct&&(ct.LogAutoTrack=function(e,t){(new at).apply(e,t)})}catch(e){}!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(it||(it={}));var lt={["_be_active","predefine_page_arofile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","his.collect.Types,o=e.adaphis.tracerCache=newhis.processTracer(i,e,ty{if(e&&e.length){var r=e[0].events;r&&r.length&&("f_data"===t?(n&&n.hasOwnProperty("sc")?this.addCount("log",t,r.length-n.sc):this.addCount("log",t,r.length),this.errorCode[t]=i):r.forEach(function(e){var n="log";for(var r in lt)if(-1!==lt[r].indexOf(e.event)){n=r;break}o.addCount(n,t,1),o.errorCode[t]=i}))}}catch(e){}},e.prototype.rcer(t,e)}},e.prototypey{var i=this.collect.eventManager.merge(e);t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,e.prototype.processTracer=function(e,t,i){var n={count:e,state:i,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:O};"f_net"!==i&&"f_data"!==i||(n.errorCode=this.errorCode[i]);var o=this.collect.processEvent("applog_trace",n);if(o&&o.event)return delete o.is_bav,o},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",function(){"hidden"===document.vieavePage()})},n(){this.report(!0)},e}();tryigManager.getUrl("even"f_data"!==e.type&&i.storeData(e)}),e.on(n.Ready,function(){i.checkStorage()})}},e.prototype.retryRightNow=function(e){var t=this;if(this.retryStatus)this.errorCache.push(e);else{var i=0;this.retryStatus=!0;var n=setInterval(function(){if(3===i)return t.storeData(t.errorCache),t.retryStatus=!1,void clearInterval(n);var o=e.eventData;t.fetchData(o,fuhis.retryInterval)}},e.prototype.storeData=function(e){var t=this.storage.getItem(this.eventKey),i=e.eventData;Object.keys(t)type.checkStorage=function(){var e=t).$D},Hours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return ts.get("months")},t.asMonot"],vt=function(1,function(t){t&&0===tstill work, use caection||null,window:e.d_time,start_time:e.start_time,web_sdk_version:e.web_sdk_version,stage:e.stage},quotas:e.quotas})}}),this.cepReady=!0,this.dealCache(),this.collect.emit(this.types.CepReady))},e.prototype.check=function(e){var t=Date.now();return Date.now()>1e3*e.end_time?(console.log("event rules:"+e.plan_id+" is over"),!1):t<1e3*e.start_time||t>1e3*e.end_time?(console.log("rule:"+e.plan_id+" time error"),!1):(this.staing="testing"===e.staing,!(O<e.web_sdk_version)||(this.support=!1,console.log("you sdk version is oldÔºåplease update to "+e.web_sdk_version+" at least"),!1))},e.prototype.dealCache=function(){var e=this;if(this.eventCache.length){var t=1;this.eventCache.forEach(function(i){e.matchEvent(i),t++}),t===this.eventCache.length&&(this.eventCache=[])}},e.prototype.matchEvent=function(e){if(this.support&&(!this.staing||this.test)&&e&&e.length)try{if(!this.cepReady)return void this.eventCache.push(e);var t=e[0],i=t.header,n=t.user,o=t.events;o.length&&o.reverse();for(var r=0;r<o.length;r++){var s=o[r].event;if(-1!==gt.indexOf(s))return!1;this.matchRule(i,n,o[r])}}catch(e){return this.collect.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),void console.log(e.message)}},e.prototypr s=o.pattern.events,a=00],h=c[1],u=h.patternState;if(h.isSingle)break;try{for(var p=i(u),f=p.next();!f.done;f=p.next()){var d=n(f.value,2),g=d[0],m=d[1];if(m.after&&(!m.after||u.get(m.after).isMatch)){if("NOT_FOLLOWED_BY"===m.connection){m.isMatch?this.reset(l,g):Date.now()-u.get(m.after).matchTime>m.window?this.publish([u.get(m.after).event,m.event],l,g):this.startWait(l,g,m);break}m.isMatch?m.matchTime-u.get(m.after).matchTime<=m.window?this.publish([u.get(m.after).event,m.event],l,g):this.reset(l,g):Date.now()-u.get(m.after).matchTime>m.window?this.reset(l,g):this.startWait(l,g,m);break}}}catch(e){o={error:e}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(o)throw o.error}}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}},e.prototype.startWait=function(e,t,i){var n=this;try{this.waitArray.get(e)||this.waitArray.set(e,new Map);var o=this.waitArray.get(e);if(!o.get(t)){var r=setTimeout(function(){var o=n.stateArray.get(e).patternState,r=o.get(t);if("NOT_FOLLOWED_BY"===r.connection)!r.isMatch&&o.get(r.after).isMatch||r.matchTime-o.get(r.after).matchTime>i.window?((s=n.waitArray.get(e).get(t)).triggerWait=!0,n.waitArray.set(e,n.waitArray.get(e).set(t,s)),n.publish([o.get(r,time:Date.now(),data:e.message}),console.log(e.message,e.stack)}},e.prototype.rule=funct[],resultLeultList:[],resultKey:[],resultLength:n[h].conditions.length}),i(n[h].conditions,c);else{var u=o.scope(n[h].key),p=u.scope,f=u.key,d=u.key2,g=p?"header"===p?d?JSON.parse(e[d])[f]:e[f]:"user"===p?t[f]:s[f]:r,m=o.calculate(n[h].op,g,n[h].value);l.set(c,{op:n[h].op,result:m,fatherKey:a})}}(a,c);for(var h=l.get(0);void 0===h.result||h.resultList.length<h.resultLength;)l.forEach(function(e,t){if(void 0!==e.result&&void 0!==e.fatherKey){var i=l.get(e.fatherKey);i.resultList.length<i.resultLength&&-1===i.resultKey.indexOf(t)&&(i.resultKey.push(t),i.resultList.push(e.result),l.set(e.fatherKey,i))}}),l.forEach(function(e){e.resultList&&e.resultList.length===e.resultLength&&("and"===e.op&&(e.result=-1===e.resultList.indexOf(!1)),"or"===e.op&&(e.result=-1!==e.resultList.indexOf(!0)))});return l.get(0).result}return!1}var u=this.scope(n.key),p=u.scope,f=u.key,d=u.key2,g=p?"header"===p?d?JSON.parse(e[d])[f]:e[f]:"user"===p?t[f]:s[f]:r;return this.calculate(n.op,g,n.value)}catch(e){return this.collt).pattern.biz_id,plan_iage)}},e.prototype.addQuf(t&&t.length){var i=i[e].value;0===n&nsole.log("plan:"+e+" limit"),!1):Date.now()-i[e].lastTime>=r?(i[e].value=0,i[e].lastTime=Date.now(),this.storage.setItem(this.quotasKey,i),!0):!(i[e].value>=o)||(console.log("plan:"+e+" limit"),!1)}return!0},e.prototype.clearQuotas=function(){this.storage.setItem(this.quotasKey,null)},e.prototype.release=function(e){if("all"===e)return e;var t=ft.duration(e);return t?t.asMilliseconds():"all"},e.prototype.reset=function(e,t){var i=this.stateArray.get(e);if(i.singleRule){var n=i.patternState.gel,e.matchTime=0,e.initTime=Date.now()});this.stateArray.set(e,i);var o=this.waitArray.get(e);o&&o.get(t)&&(clearTimeout(o.get(t).waitFn),o.delete(t))},e.prototype.event=function(e,t){try{var i={event:e,params:JSON.stringify({plan_id:t||"",biz_id:this.stateArray.get(t).pattern.biz_id}),local_time_ms:Date.now()},n=this.configManager.get(),o=n.header,r=n.user;o.custom=JSON.stringify(o.custom);var s={events:[i],user:r,header:o};this.fetch(this.reportUrl,[s])}catch(e){return this.collect.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),void console.log(e.message)}},e.prototype.scope=function(e){var t="",i="";if(e.indexOf(".")>-1){var n=e.split(".");t=n[0],e=n[1],"header"===t&&"custom"===e&&(e=n[2],i=n[1])}return{scope:t,key:e,key2:i}},e.prototype.calculate=function(e,t,i){try{if("="===e)return t===i;if(-1!==["=","<",">",">=","<=","!="].indexOf(e))switch(e){case"=":return t===i;case"<":return t<i;case">":return t>i;case">=":return t>=i;case"<=":return t<=i;case"!=":return t!==i}else{if(-1!==["in","contains"].indexOf(e))return-1!==i.indexOf(t);if(-1!==["is not null","is null"].indexOf(e))return"is null"===e?null==t:null!=t;if(-1!==["startswith","endswith"].indexOf(e)){if("startswith"===e)return 0===t.indexOf(i);var n=t.length-i.length;return t.substr(n,i.length)===i}}}catch(e){return this.collect.emit(x.DEBUGGER_MESSAGE,{type:x.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),console.log(e.message),!1}},e}();try{var _t=ae();_t&&(_t.LogCep=function(e,t){(new vt).apply(e,t)})}catch(e){console.log(e)}var yt={autotrack:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/autotrack.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/ab.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/stay.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/route.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/cep.js",sg:"httn-sg.ibytedtos.com/obj/scollect/5.0/plugin/cep.ttps://sf16-scmcdnk"===t)if(yt.hasOwnPÜÂºÇÂ∏∏",level:"error",or: yellow;","‚Äì",(i){var n=new t;n.apply&age}),console.log("ÇÂ∏∏",level:"error",time:Date.now(),data:e.message})}},e}(),wt=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var i=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(i.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:"",refer_title:document.title||location.pathname,refer_manual_key:"",routeChange:!1},this.config.autotrack&&"object"==typeof this.config.autotrack&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItstory.pushState;history.1;r<arguments.lent.call.apply(t,o([history,i],n));if(e.lastLocation!==location.href){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a,"pushState"),s}};var i=history.replaceState;history.replaceState=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"==typeof history.onreplacestate&&history.onreplacestate({statReferCache(e.lastLocation),e.lastLocation=locatn(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.getLocation=function(){return this.lastLocation},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this,t=null;window.addEventListener("hashchange",function(i){if(e.lastLocation!==window.location.href&&(clearTimeout(t),e.allowHash)){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}}),window.addEventListener("popstate",function(i){e.lastLocation!==window.location.href&&(t=setTimeout(function(){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;e.getPopStateChangeEventgetItem("__tea_cache_firstis.handleRefer(),page_title:document.t_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:e&&e.refer_manual_key||"",refer_page_title:ost,is_first_time:""+t}}catch(ction(){var e="";try{vacache_key)||{};t.refer_key=e,t.routeChange=!0,this.storage.setItem(this.cache_key,t)},e}();try{var St=ae();St&&(St.LogRoute=function(e,t){(new wt).apply(e,t)})}catch(e){console.log(e)}var kt=["getConfig","getAbSdkVersion"],Dt=["init","usePlugin","autoInitializationRangers","on"],At=function(){function e(e){this.task=[],this.Collector=e,this.collectMap=new Map}return e.prototype.processTask=function(){var e=this;if(this.task.length){var t=this.findIndex(this.task,Dt,"0");-1!==t?(this.proce},e.prototype.processCmd=return this.callCmd(n,o,e);this.callCmd(n,o,e)}},e.prototype.callCmd=function(e,t,i){try{if(-1!==Dt.indexOf(t)&&(this.collectMap.get(e)||(this.collect=new this.Collector(e),this.collectMap.set(e,this.collect))),!this.collectMap.get(e))return void console.log("init or use must be first call, cmd: "+t);var n=th})}catch(e){return o}return o},e.prototype.processScope=function(e){var t="default";try{if("string"==typeof e&&e.indexOf(".")>-1){var i=e.split(".");t=i[0],e=i[1]}}catch(i){return{scope:t,cmd:e}}return{scope:t,cmd:e}},e}();se.usePlugin(Et,"extend"),se.usePlugin(be,"ab"),se.usePlugin(De,"stay"),se.usePlugin(at,"autotrack"),se.usePlugin(pt,"store"),se.usePlugin(we,"et"),se.usePlugin(Te,"profile"),se.usePlugin(vt,"cep"),se.usePlugin(Me,"heartbeat"),se.usePlugin(Oe,"monitor"),se.usePlugin(wt,"route"),se.usePlugin(ht,"tracer"),function(e){if("undefined"!=typeof window){var t=function(){if("undefined"!=typeof window)return window.LogAnalyticsObject||window.TeaAnalyticsObject}();if(t&&window[t]){var i=window[t];i.sdkLoad?console.log("you page has load sdk file already, do not load another sdk file"):(e.task=i.q||[],window[t]=e.processCmd.bind(e),window[t].sdkLoad=!0,e.processTask())}}}(new At(se))}();
