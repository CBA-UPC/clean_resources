"use strict";(self.webpackChunksports_web_app=self.webpackChunksports_web_app||[]).push([["vn-third-party-tracker"],{59202:(C,s,i)=>{i.r(s),i.d(s,{ThirdPartyTrackingService:()=>h,provide:);var o=i(74329),e=i(29039),d=i(26575),u=i(73789),T=i(58071),l=i(33252),v=i(89378),_=i(74520),p=i(6143),f=i(72607),y=i(79736);t h=(()=>{class r{onstructor(t,n,a){this.cookieService=t,this.apiService=n,this.user=a,this.trackingContentEvents=new T.X(null),this.loadTrackingContent()}enableTracker(t,n){if(this.cookieService.get(o.yVK.TrackingAffiliate)){const a=new Date;a.setDate(a.getDate()+7),this.cookieService.putObject(o.yVK.ThirdPartyTracker,{channelId:t,productId:n},{expires:a}),this.loadTrackingContent()}}loadTrackingContent(){if(this.cookieService.getObject(o.yVK.ThirdPartyTracker)&&!this.running){if(this.running=!0,!this.user.isAuthenticated){const n=this.user.events.pipe((0,_.h)().subscribe(;return}this.requestTrackingContent()}}requestTrackingContent(){const t=this.cookieService.getObject(o.yVK.ThirdPartyTracker);this.apiService.get("thirdpartytrackingcontent",{productId:t.productId,channelId:t.channelId}).pipe((0,p.a)(n=>n.pipe((0,f.z)(a=>(t.failureCount?t.failureCount++:t.failureCount=1,t.failureCount>4?(this.cleanup(),(0,l._)(a)):(this.cookieService.putObject(o.yVK.ThirdPartyTracker,t),(0,v.H)(1e4))))))).pipe((0,y.U)().subscribe(}cleanupreturn r.\u0275fac=r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),k=(()=>{class r{constructor(t){t.trackingContent.subscribe(n=>{this.url=null,this.content=null,n&&(0===n.indexOf("http")?this.url=n:this.content=n)})}}return r.\u0275fac=r.\u0275cmp=e.Xpm({type:r,selectors:[["vn-third-party-tracker"]],hostAttrs:[2,"display","block","width","0","height","0","overflow","hidden"],standalone:!0,features:[e.jDz],decls:2,vars:2,consts:[["width","1","height","1",3,"src",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["width","1","height","1",3,"src"],[3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,P,1,1,"img",0)(1,g,2,3,"div",1),2&t&&(e.Q6J("ngIf",n.url),e.xp6(1),e.Q6J("ngIf",n.content))},dependencies:[d.ez,d.O5,u.WL],encapsulation:2}),r})(),E=(()=>{class r{nFeatureInit(){this.dynamicLayoutService.addComponent(o.WLT.Bottom,k,null)}}return r.\u0275fac=r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();function D(){return[(0,o.Z7W)(E)]}}}]);
//# sourceMappingURL=vn-third-party-tracker.e0c8bb397eee77c7.js.map