!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[6341],{27178:(e,t,s)=>{s.d(t,{Z:()=>C});var i=s(54138),n=s.n(i),a=s(33970),o=s.n(a),l=s(2843),r=s(54382),d=s(90127),h=s(95004),g=s(13883),c=s(42580),m=s(43523),p=s(42946),u=s(78667),T=s(58849),f=s(1e4),x=s(80328),v=s(63583),b=s.n(v),w=s(2629);let C=e=>{var t=e.title,s=e.subtitle,i=e.signupText,a=e.source,v=void 0===a?"explore_floating_sign_up":a,C=e.isDismissible,k=void 0===C||C,S=e.isFloating,y=void 0===S||S,R=e.avoidSidebar,j=e.fullWidth,F=e.textColor,N=void 0===F?b().white:F,M=e.backgroundColor,P=void 0===M?b().zunePurple:M,E=e.withLoginButton,I=(0,u.bp)(),L=I.routeSet,B=I.isLoggedIn,O=I._t,_=I._c,D=I.getCookie,Z=I.setCookie,A=I.logEvent,V=I.features,W=V.loggedOutImprovementsCtas,U=V.redpopDesktopVerticalNav,z=(0,T.h)().openLoginWall,$=(0,h.useState)(!1),J=o()($,2),G=J[0],H=J[1],Q="main"===L?B:D(g.zC.LOGGED_IN)===g.Ox;(0,h.useEffect)(()=>{H(!0)},[]);var Y=_("This is a caption for a button indicating that the user doesn't want to sign up now, but we're optimistic that they will sign up later. Should be kept short to fit smaller form factors.","Maybe later"),q=null!=i?i:O(U&&!W?"Log in":"Sign me up"),X=null!=t?t:W?void 0:O("It's time to try Tumblr"),K=(null!=s?s:W)?(0,w.jsx)(r.ZP,{comment:"Subtitle on a call to action bragging to a potential user about how great our content is",components:{strong:(0,w.jsx)("strong",{})},children:"Join over [strong]100 million[/strong] people using [strong]Tumblr[/strong] to find their [strong]communities[/strong] and make [strong]friends[/strong]."}):_("This is our website bragging to a potential user about how great our content is","You'll never be bored again."),ee=(0,h.useCallback)(()=>{var e=new Date(Date.now()+p.g.Week);Z(g.zC.SIGN_UP_CTA_DISMISSED,g.Ox,{expires:e}),A({eventName:m.J.SignUpCTAClickDismiss})},[A,Z]),et=(0,x.Z)(v),es=(0,h.useCallback)(e=>{if(null==e||e.preventDefault(),A({eventName:m.J.SignUpCTAClickRegister,eventDetails:{loggedOutImprovementsCtas:!!W,isBottomBanner:y}}),"archive_floating_sign_up"===v){var t=(0,d.gZ)({formToShow:c.c.Register},{source:"archive_login_wall"});window.location.assign(`//${(0,f.Z)(window.location.host)}${t}`)}else z({form:c.c.Register,source:et})},[]);return(U||D(g.zC.SIGN_UP_CTA_DISMISSED)!==g.Ox)&&!Q&&G?(0,w.jsx)(l.Z,n()(n()({title:X,subtitle:K,floating:y,avoidSidebar:void 0!==R&&R,fullWidth:void 0!==j&&j,dismissButtonCallback:ee},k&&{dismissButtonCaption:Y}),{},{confirmButtonCaption:q,centered:!k,onConfirm:es,color:N,source:et,background:P,withLoginButton:W&&void 0!==E&&E,wavy:!W})):null}},78079:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(5754),n=s.n(i),a=s(78143);let o={pillTagsContainer:"YDdl_",pillTag:"avzpt",isColorful:"AaHfQ"};var l=s(2629);let r=e=>{var t=e.tags,s=e.isColorful,i=e.wrapperClassName,r=e.className;return t?(0,l.jsx)("div",{className:n()(o.pillTagsContainer,i,{[o.isColorful]:s}),children:null==t?void 0:t.map(e=>(0,l.jsx)(a.Z,{tagName:e,className:o.tagLink,pillClassName:n()(o.pillTag,r),isPill:!0},e))}):null}},84456:(e,t,s)=>{s.d(t,{Z:()=>x});var i=s(17276),n=s.n(i),a=s(50209),o=s.n(a),l=s(5754),r=s.n(l),d=s(95004),h=s(44009),g=s(6135),c=s(30962),m=s(60023),p=s(59215);let u={timelineObject:"YZ6YQ",desktopContainer:"MV1bs",usesNewDimensions:"x8N5H",loading:"UYXNw",header:"OpUw8",title:"FcPBI",tagList:"j1I7U",endOfList:"A9fnQ",nextPage:"PmamQ"};var T=s(2629);class f extends d.Component{constructor(){super(...arguments),o()(this,"state",{timelineObject:this.props.timelineObject,hasFetchedAll:!1,isFetchingElements:!1,offset:0}),o()(this,"nextPage",()=>{var e,t,s,i,n=this.props,a=n.elementsPerPage,o=n.getStickyElements,l=n.getPageableElements,r=this.state,d=r.hasFetchedAll,h=r.isFetchingElements,g=r.timelineObject,c=r.offset;if(!h){var m=o?o(g.elements):[],p=l?l(g.elements):g.elements.filter(e=>!m.includes(e)),u=c+a;d&&u>p.length?(this.setState({offset:0}),null===(e=(t=this.props).onShowMoreClicked)||void 0===e||e.call(t,0)):(this.setState({offset:u}),null===(s=(i=this.props).onShowMoreClicked)||void 0===s||s.call(i,u)),!d&&u+2*a>p.length&&this.fetchNext()}})}render(){var e=this.props,t=e.appContext,s=t._t,i=t.features.redpopDesktopVerticalNav,n=e.elementsPerPage,a=e.getStickyElements,o=e.getPageableElements,l=e.headerText,d=e.endOfTimelineMessage,c=e.showMoreLabel,m=this.state,p=m.isFetchingElements,f=m.offset,x=m.timelineObject,v=a?a(x.elements):[],b=o?o(x.elements):x.elements.filter(;if(0===v.length&&0===b.length)return null;var w=b.slice(f,n+f),C=f>b.length-n&&this.state.hasFetchedAll,k=C?s("Back to the top"):null!=c?c:s("Show more");return(0,T.jsxs)("div",{className:r()(u.desktopContainer,{[u.usesNewDimensions]:i}),children:[(0,T.jsx)("div",{className:u.header,children:(0,T.jsx)("span",{className:u.title,children:l})}),(0,T.jsxs)("div",{className:u.tagList,children:[this.renderElements(v),p?(0,T.jsx)("div",{className:u.loading,children:(0,T.jsx)(g.Z,{})}):this.renderElements(w),C&&(0,T.jsx)("div",{className:u.endOfList,children:null!=d?d:s("No more items to show.")})]}),(0,T.jsx)("div",{className:u.nextPage,children:b.length>n&&(0,T.jsx)(h.Z,{label:k,onClick:this.nextPage,children:k})})]})}renderElements(e){var t=this.props.timelineObjectClassName;return e.map(e=>{var s="function"==typeof t?t(e):t;return(0,T.jsx)(c.ZP,{timelineObject:e,className:r()(u.timelineObject,s)},e.id)})}getFetchNextPageRequest(){var e,t=null===(e=this.state.timelineObject.links)||void 0===e||null===(e=e.next)||void 0===e?void 0:e.href;if(void 0===t)throw Error("End of timeline data");return new m.x(this.props.appContext.apiFetch,t)}fetchNext(){var e,t,s,i=this;return n()().async(function(a){for(;;)switch(a.prev=a.next){case 0:return i.setState({isFetchingElements:!0}),e=i.state.timelineObject,a.prev=2,a.next=5,n()().awrap(i.getFetchNextPageRequest().fetch());case 5:0===(t=a.sent.response.timeline).elements.length?i.setState({hasFetchedAll:!0,isFetchingElements:!1}):(s={elements:[...e.elements,...t.elements],links:t.links},i.setState({timelineObject:s,isFetchingElements:!1})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),i.setState({hasFetchedAll:!0,isFetchingElements:!1});case 13:case"end":return a.stop()}},null,null,[[2,10]],Promise)}}let x=(0,p.X9)(f,{appContext:!0})},16481:(e,t,s)=>{s.r(t),s.d(t,{default:()=>eE});var i=s(54138),n=s.n(i),a=s(50209),o=s.n(a),l=s(5754),r=s.n(l),d=s(95004),h=s(78994),g=s(27178),c=s(52980),m=s(33970),p=s.n(m),u=s(44009),T=s(67043),f=s(78667),x=s(14544),v=s(99693),b=s(63583),w=s.n(b),C=s(2629);let k=e=>{var t=e.paletteToggled,s=(0,f.bp)(),i=s._c,n=s._t,a=(0,x.M)(),o=(0,v.QL)(a.name,i),l=(0,d.useState)(void 0!==t&&t),r=p()(l,2),h=r[0],g=r[1],c=h?o:n("Change palette");return(0,C.jsx)("div",{className:"osUS3",children:(0,C.jsxs)(u.Z,{label:n("Change palette"),className:"u24HE",wrapperStyle:{width:"100%"},type:"button",onClick:children:[(0,C.jsx)("div",{className:"sADin",children:(0,C.jsx)(T.Z,{size:{width:20,height:20},colors:{primary:w().paletteAccent}})}),c]})})};var S=s(55673),y=s(97612),R=s(38149),j=s(54382),F=s(90127),N=s(43523),M=s(59215),P=s(96467);let E={colorfulOrderedTagList:"nKYyP",topPositioned:"CXVtW",colorfulListItemWrapper:"vT7_j",fullItemLink:"yTeF1",contentTitle:"CJe61",content:"k_NNN",relatedTagLink:"jofje",contentBody:"sEVNj",imgLink:"o6N4U",emptyImg:"y6JFX",column:"FSlaf",buttonWrapper:"gREXw",showMoreButton:"iAQuj",mobileWrapper:"S227z",colorfulOrderedTagListWrapper:"VUHVZ",isCollapsed:"IWDxU"};class I extends d.Component{constructor(){super(...arguments),o()(this,"state",{isCollapsed:!0}),o()(this,"maxRelatedTagsToDisplay",3),o()(this,"avatarSize",64),o()(this,"collapsedTagsCount",4),o()(this,"showAllTags",,o()(this,"renderMobile",(e,t)=>{var s=this.props.appContext._t;return(0,C.jsxs)("div",{className:r()(E.mobileWrapper,{[E.isCollapsed]:!!this.state.isCollapsed}),children:[(0,C.jsx)("div",{className:E.colorfulOrderedTagListWrapper,children:(0,C.jsx)("ol",{className:e,children:t.map(this.renderItem)})}),this.state.isCollapsed&&t.length>this.collapsedTagsCount&&(0,C.jsx)(u.Z,{wrapperClassName:E.buttonWrapper,className:E.showMoreButton,onClick:this.showAllTags,label:s("Show More"),children:(0,C.jsx)(j.ZP,{children:"Show More"})})]})}),o()(this,"renderItem",(e,t)=>{var s=this.props.appContext,i=s._c,a=s.isLoggedIn,o=(0,F.fO)(e.label);return t<8&&(0,C.jsx)("div",{className:E.colorfulListItemWrapper,children:(0,C.jsxs)("li",{"data-index":t+1,children:[(0,C.jsx)(S.rU,n()({className:E.fullItemLink,to:o,onClick:,!a&&{"data-login-wall-type":"tags","data-login-wall-tag-label":e.label,"data-login-wall-destination":o,"data-login-wall-redirect":o,"data-login-wall-title":i("Login wall: Title shown when user clicks on a blog or image after exceeding click counter limit","Seems we're out of free samples."),"data-login-wall-text":i("Login wall: Text shown when user clicks on a blog or image after exceeding click counter limit","But there's good news. Get free samples from now until, well, the ends of time itself by signing up for Tumblr and getting unlimited access not just to this blog, but countless others like it.")})),(0,C.jsxs)("div",{className:E.content,children:[(0,C.jsx)("span",{className:E.contentTitle,children:e.label}),(0,C.jsx)("div",{className:E.contentBody,children:this.renderRelatedTags(e)})]}),(0,C.jsx)("div",{className:E.imgLink,style:{width:`${this.avatarSize}px`},children:this.renderImage(e)})]})},`trending-tag-${e.label}`)}),o()(this,"renderImage",e=>{var t;return null!=e&&null!==(t=e.resources)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.thumbUrl?(0,C.jsx)(R.pC,{imageResponse:this.getImageResponseFromTagResource(e.resources[0]),altText:e.label,sizes:`${this.avatarSize}px`}):(0,C.jsx)("div",{className:E.emptyImg,style:{width:`${this.avatarSize}px`,height:`${this.avatarSize}px`}})}),o()(this,"logUserClickedOnTagCard",e=>this.props.appContext.logEvent({eventName:N.J.ClickedOnTagCard,eventDetails:{tag:e}})),o()(this,"getImageResponseFromTagResource",e=>[{url:e.thumbUrl,width:this.avatarSize,height:this.avatarSize}]),o()(this,"renderRelatedTags",e=>e.relatedTags.reduce((e,t)=>{var s=this.props.appContext,i=s._c,a=s.isLoggedIn,o=(0,F.fO)(t);return e.length<this.maxRelatedTagsToDisplay?[...e,(0,C.jsx)(S.rU,n()(n()({to:o,className:E.relatedTagLink,onClick:,!a&&{"data-login-wall-type":"tags","data-login-wall-tag-label":t,"data-login-wall-destination":o,"data-login-wall-redirect":o,"data-login-wall-title":i("Login wall: Title shown when user clicks on a blog or image after exceeding click counter limit","Seems we're out of free samples."),"data-login-wall-text":i("Login wall: Text shown when user clicks on a blog or image after exceeding click counter limit","But there's good news. Get free samples from now until, well, the ends of time itself by signing up for Tumblr and getting unlimited access not just to this blog, but countless others like it.")}),{},{children:`#${t} `}),`related-tag-${t}`)]:e},[]))}render(){var e=this.props,t=e.isMobile,s=e.items,i=e.columns,n=e.topPositioned,a=r()(E.colorfulOrderedTagList,{[E.topPositioned]:!!n}),o=P.timelineMasonryPostWidth+P.timelineMasonryPostSpacing;return t?this.renderMobile(a,s):(0,C.jsx)("ol",{className:a,children:(0,C.jsxs)(y.Z,{visibleWidth:o*i-P.timelineMasonryPostSpacing,itemWidth:o,children:[this.getColumn(0,1),this.getColumn(2,3),this.getColumn(4,5),this.getColumn(6,7)]})})}getColumn(e,t){var s=this.props.items,i=s[e],n=s[t];return(0,C.jsxs)("div",{className:E.column,children:[i&&this.renderItem(i,e),n&&this.renderItem(n,t)]})}}o()(I,"defaultProps",{items:[],columns:4,isMobile:!1});let L=(0,M.X9)(I,{appContext:!0,loginContext:!0});var B=s(94765),O=s(29860),_=s(98724),D=s(78079),Z=s(30337),A=s(91264),V=s(43107),W=s(25321),U=s(36180),z=s(84456),$=s(43597),J=s(61822),G=s(32468),H=s(13883),Q=s(18046),Y=s(50899),q=s(92183),X=s(66498),K=s(71417),ee=s(22979),et=s(86694),es=s(20943),ei=s(93099),en=s(399),ea=s(58546),eo=s(48385),el=s(55015),er=s(75891),ed=s(68782),eh=s(94576),eg=s(48352),ec=s(84458),em=s(17287),ep=s(20103),eu=s(6233),eT=s(18488),ef=s(67023),ex=s(73125);let ev={root:"zKC5L",hasImage:"Dyavw",info:"EXJlM",horizontalLayout:"P39Zg",date:"AwrnU",liveMessage:"msIyY",description:"kxAnp",buttons:"bY0uJ",button:"nXJBu",image:"hSkG6",helpButton:"ekF1b",helpText:"jE08q",liveDot:"JDmeV"},eb=e=>{var t,s,i=e.takeover,n=e.verticalLayout,a=(0,f.bp)(),o=a.isLoggedIn,l=a._c,h=a._getLocaleDateString,g=(0,d.useState)(null!==(t=null==i||null===(s=i.answerTime)||void 0===s?void 0:s.followed)&&void 0!==t&&t),c=p()(g,2),m=c[0],u=c[1],T=(0,d.useState)(!1),x=p()(T,2),v=x[0],b=x[1];if(!(null!=i&&i.answerTime))return null;var w=i.answerTime,k=w.blogName,S=w.description,y=w.startDate,R=w.liveClickthroughUrl,F=i.headerImage,N=i.live,M=i.completed,P=y?new Date(1e3*y):null,E=(null==R?void 0:R.split("/").pop())||"answertime";return(0,C.jsxs)("div",{className:r()(ev.root,{[ev.horizontalLayout]:!(void 0!==n&&n),[ev.hasImage]:!!F}),children:[(0,C.jsxs)("div",{className:ev.info,children:[N?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:ev.liveDot,children:(0,C.jsxs)("ol",{children:[(0,C.jsx)("li",{}),(0,C.jsx)("li",{}),(0,C.jsx)("li",{}),(0,C.jsx)("li",{})]})}),(0,C.jsx)("span",{className:ev.liveMessage,children:(0,C.jsx)(j.ZP,{comment:"Message displayed when an Answer Time is live",children:"Live now"})})]}):P?(0,C.jsx)("time",{className:ev.date,dateTime:P.toISOString(),children:h(P,ef.C.DateAndTimeLongWithTimezone,!0)}):null,S&&(k?(0,C.jsx)(em.Z,{blogName:k,showBlogCard:!1,className:ev.description,children:S}):(0,C.jsx)("div",{className:ev.description,children:S})),k&&(0,C.jsxs)("div",{className:ev.buttons,children:[M?(0,C.jsx)(eT.Z,{isRounded:!0,className:ev.button,as:"a",href:`/${k}/tagged/${E}`,children:l("Button label that links to posts for a completed answertime","Answers")}):(0,C.jsx)(eT.Z,{isRounded:!0,className:ev.button,as:"a",href:o?`/new/ask/${k}`:"/login",children:l("Button label to send a question to a blog","Ask a question")}),N&&(0,C.jsx)(eT.Z,{isRounded:!0,className:ev.button,as:"a",href:`/${k}/tagged/${E}`,children:l("Button label that links to answer posts","See answers")}),(0,C.jsx)(ep.Z,{isStyledButton:!0,isRounded:!0,following:m,blogName:k,blogUrl:(0,ex.Z)(k),className:ev.button,onFollow:children:e=>e?l("Button label to unfollow a blog","Following"):l("Button label to follow a blog","Follow")})]})]}),F&&(k?(0,C.jsx)(em.Z,{blogName:k,showBlogCard:!1,className:ev.image,style:{backgroundImage:`url('${F}')`},"data-testid":"hero-image"}):(0,C.jsx)("span",{className:ev.image,style:{backgroundImage:`url('${F}')`},"data-testid":"hero-image",children:"Â "})),(0,C.jsx)("button",{className:ev.helpButton,onClick:()=>{b(!0)},children:(0,C.jsx)(j.ZP,{comment:"Button label for Answer Time help",children:"What is Answer Time?"})}),v&&(0,C.jsx)(eu.Z,{showClose:!0,title:l("Title for the Answer Time help modal","What is Answer Time?"),theme:eu.L.Rounded,onClose,children:(0,C.jsxs)("section",{className:ev.helpText,children:[(0,C.jsx)("p",{children:(0,C.jsx)(j.ZP,{comment:"Help text for Answer Time - paragraph 1 of 3",children:"We get the world's most interesting people to open up their Tumblr ask box, and you get a few days to fill it with whatever questions you want. Then they'll answer as many questions as they can, live on their Tumblrs, for one eclectic hour."})}),(0,C.jsx)("p",{children:(0,C.jsx)(j.ZP,{comment:"Help text for Answer Time - paragraph 2 of 3",children:"Not sure what to ask? Poke through the archives on this pageâ€”you'll see. Answer Times get rowdy, deep, funny, and weird. So go ahead. Ask whatever your heart wants to ask."})}),(0,C.jsx)("p",{children:(0,C.jsx)(j.ZP,{comment:"Help text for Answer Time - paragraph 3 of 3",children:"It's the best hour you can catch up on later."})})]})})]})};var ew=s(31726);let eC={postColumn:"V9TEa",mainColumnContainer:"YDpaw",newDesktopLayout:"peM4H",isNativeWebview:"Qsumj",emptyView:"VbmN8",recommendedTags:"qY_MN",trendingTags:"Fd3xx",apiError:"SmuUJ",pillTags:"hxC_t",pillTag:"aTzUH",isSnowBright:"thm0N"};var ek=e=>!!(null!=e&&e.trendingBlogsTimeline),eS=e=>!!(null!=e&&e.recommendedBlogsTimeline),ey=e=>!!(null!=e&&e.followedTagsTimeline),e),ej=e=>!!(null!=e&&e.trendingTagsTimeline),eF=e=>!!(null!=e&&e.tagInfoRowsTimeline),eN=e=>!!(null!=e&&e.recommendedTagsTimeline),eM=e=>!!(null!=e&&e.staffPicksTagsTimeline);class eP extends K.lb{constructor(e){super(e),o()(this,"state",this.getInitialState()),o()(this,"isFetchingFollowedTags",!1),o()(this,"isFetchingRecommendedBlogs",!1),o()(this,"isFetchingTrendingBlogs",!1),o()(this,"isFetchingMainTimeline",!1),o()(this,"isFetchingTagInfoRows",!1),o()(this,"isFetchingTrendingTags",!1),o()(this,"isFetchingRecommendedTags",!1),o()(this,"isFetchingStaffPicksTags",!1),o()(this,"hasLoggedInfoAboutSidebarBucketing",!1),o()(this,"translatedTextForModeTitle",(()=>{var e=this.props.appContext,t=e._t,s=e._c;return{[Q.Ru.Recommended]:s("Tab label on Explore","For You"),[Q.Ru.Today]:s("Tab label on Explore","Today"),[Q.Ru.StaffPicks]:s("Tab label on Explore","Staff Picks"),[Q.Ru.Trending]:s("Tab label on Explore","Trending"),[Q.Ru.AnswerTime]:t("Answer Time"),[Q.Ru.Gifs]:t("GIFs"),[Q.Ru.Video]:t("Videos"),[Q.Ru.Asks]:t("Asks"),[Q.Ru.Audio]:t("Audio"),[Q.Ru.Chats]:t("Chats"),[Q.Ru.Photos]:t("Photos"),[Q.Ru.Quotes]:t("Quotes"),[Q.Ru.Text]:t("Text")}})()),o()(this,"setRefreshCallbace}),o()(this,"refreshTimelin)}),o()(this,"hasFetchedTagCarouselState",()=>{switch(this.getExploreMode()){case Q.Ru.Recommended:return eN(this.state);case Q.Ru.Trending:return ej(this.state);case Q.Ru.StaffPicks:return eM(this.state);default:return!0}}),o()(this,"hasFetchedSidebar",()=>{var e=this.props.appContext.isLoggedIn,t=this.getExploreMode();return e?!!ey(this.state)&&(t===Q.Ru.Trending?ek(this.state):eS(this.state)):ek(this.state)}),o()(this,"hasFetchedInitialState",()=>this.hasFetchedTagCarouselState()&&eR(this.state)),o()(this,"isServingOnRoot",()=>{var e;return(null===(e=this.props.location)||void 0===e?void 0:e.pathname)==="/"}),o()(this,"shouldRedirectToExploreMode",()=>{var e=this.props.appContext.features.exploreTodayTab,t=this.getExploreMode();return!this.isServingOnRoot()&&(!this.props.params.exploreMode||!this.getExploreModes().includes(t)||!e&&t===Q.Ru.Today)}),o()(this,"getTimelineChangeLinkProps",e=>({to:(0,ei.Z)(F.o_.exploreByMode,{exploreMode:e}),children:this.translatedTextForModeTitle[e],onClick:()=>this.props.appContext.logEvent({eventName:N.J.TimelineOptionChange,eventDetails:{option:e}})})),o()(this,"renderSidebar",()=>{var e=this.props.appContext,t=e._t,s=e.isLoggedIn,i=e.features,n=i.exploreRightRailAds,a=i.redpopDesktopVerticalNav,o=i.trendingTagsSidebar,l=e.logEvent,r=this.props.loggedOutFeatureContext,d=this.state,h=d.followedTagsTimeline,c=d.tagInfoRowsTimeline,m=this.isServingOnRoot()?Q.Ru.Today:this.getExploreMode(),p=o&&m!==Q.Ru.Trending&&c,u=s||(null==r?void 0:r.isReady);if(!this.hasFetchedSidebar()||!u)return(0,C.jsx)(Z.Z,{allContentSticky:!0,children:(0,C.jsx)(_.w,{})});var T=!!(null!=r&&r.features.loggedOutTest);return null!=r&&r.isReady&&!this.hasLoggedInfoAboutSidebarBucketing&&(l({eventName:T?N.J.LoggedOutTreatmentDisplay:N.J.LoggedOutControlDisplay}),this.hasLoggedInfoAboutSidebarBucketing=!0),(0,C.jsxs)(Z.Z,{supplyProviderId:q.E.EXPLORE,showAd:n,followedTags:s&&h,children:[p?(0,C.jsx)(z.Z,{headerText:t("Popular Tags"),showMoreLabel:t("Show more tags"),endOfTimelineMessage:t("No more tags to show."),elementsPerPage:4,timelineObject:c,getPageableElemenw)}):(0,C.jsx)(W.D,{timelineObject:this.getRecommendedBlogs(),displayMode:ee.mt.Masonry}),!s&&!a&&(0,C.jsx)(g.Z,{backgroundColor:w().betamaxOrange,isFloating:!1,isDismissible:!1,title:t("Curate your own Dashboard"),signupText:t("Sign me up ðŸ™Œ"),source:"explore_right_rail_sign_up"}),!s&&!a&&(0,C.jsx)(k,{})]})}),o()(this,"renderPageViewLogger",()=>{var e=!!this.props.params.exploreMode;return(0,C.jsx)(eg.Z,n()({page:e?`${ew.HJ.analyticsPageName}Tab`:ew.HJ.analyticsPageName},e&&{eventDetails:{tab:this.getExploreMode()}}))}),o()(this,"renderMetaData",()=>{var e=this.props.appContext,t=e._c,s=e._t,i={},a=this.isServingOnRoot()?Q.Ru.Today:this.getExploreMode(),o=t("Page title for the Explore page","Explore | Tumblr"),l=s("From fandoms to photography, gaming to anime, Tumblr is where your people are.");if(this.isServingOnRoot()&&(i.canonicalUrl=`${Y.Cw}${(0,ei.Z)(F.o_.exploreByMode,{exploreMode:a})}`),i.pageName=ew.HJ.analyticsPageName,!a)return(0,C.jsx)(O.Z,{title:o,description:l});switch(a){case Q.Ru.Recommended:i.title=s("Recommended for you on Tumblr"),i.description=s("These up-to-date topics are curated just for you. The more you engage with content on Tumblr, the more exciting your personalized recommendations will feel.");break;case Q.Ru.Today:i.title=s("Today on Tumblr"),i.description=s("Explore todayâ€™s picks from the Tumblr team.");break;case Q.Ru.StaffPicks:i.title=s("Staff picks on Tumblr"),i.description=s("These are the best new GIFs, fan art, illustrations, photos on the internet as curated by Tumblr staff.");break;case Q.Ru.Trending:i.title=s("Trending topics on Tumblr"),i.description=s("Explore trending topics on Tumblr. See all of the GIFs, fan art, and general conversation about the internetâ€™s favorite things.");break;default:i.title=this.translatedTextForModeTitle[a]?`${this.translatedTextForModeTitle[a]} | Tumblr`:o,i.description=l}return(0,C.jsx)(O.Z,n()({},i))}),o()(this,"renderTagsSection",()=>{var e=this.props.appContext,t=e.features.redpopDesktopVerticalNav,s=e.isLoggedIn,i=this.props.paletteContext.name,n=this.props.viewportContext,a=n.isViewportMounted,o=n.width,l=this.state,d=l.recommendedTagsTimeline,h=l.trendingTagsTimeline,g=l.staffPicksTagsTimeline;if((0,ea.Q)(d)&&(0,ea.Q)(h)&&(0,ea.Q)(g))return null;var c=this.isMobile();switch(this.getExploreMode()){case Q.Ru.Recommended:return(null==d?void 0:d.elements)&&(0,C.jsx)("div",{className:eC.recommendedTags,children:(0,C.jsx)(U.Z,{timelineObject:d,itemWidth:P.tagCardCarouselItemWidth+P.carouselItemSpacing,loaderClass:"carouselLoaderTagCard"},Q.Ru.Recommended)});case Q.Ru.Trending:if(!((null==h?void 0:h.elements)&&a))return null;if(!s&&c){var m=null==h?void 0:h.ele=>e.label);return(0,C.jsx)(D.Z,{isColorful:!0,tags:m,wrapperClassName:eC.pillTags,className:r()(eC.pillTag,{[eC.isSnowBright]:i===X.Z.snowBright})})}return(0,C.jsx)("div",{className:eC.trendingTags,children:(0,C.jsx)(L,{isMobile:c,transparent:!0,topPositioned:!0,columns:this.isListView()?2:(0,eo.vk)(o,!0,t),items:h.elements})});case Q.Ru.StaffPicks:return(null==g?void 0:g.elements)&&(0,C.jsx)("div",{className:eC.recommendedTags,children:(0,C.jsx)(U.Z,{timelineObject:g,itemWidth:P.tagCardCarouselItemWidth+P.carouselItemSpacing,loaderClass:"carouselLoaderTagCard"},Q.Ru.StaffPicks)});default:return null}}),o()(this,"getExploreModes",()=>this.props.appContext.isLoggedIn?Object.values(Q.Ru):Object.values(Q.Um)),o()(this,"switchView",e=>{this.setState({displayMode:e},()=>this.props.appContext.setCookie(H.zC.TAGGED_DISPLAY_MODE,e))}),o()(this,"renderEmptyTimeline",()=>(0,C.jsx)("div",{className:eC.emptyView,children:(0,C.jsx)(j.ZP,{children:"We couldnâ€™t find any posts like that."})})),o()(this,"getInitialPage",()=>{var e,t=this.state.timeline[this.getExploreMode()];return{objects:(null==t?void 0:t.elements)||[],nextLink:null==t||null===(e=t.links)||void 0===e?void 0:e.next}}),o()(this,"getRecommendedBlogs",()=>{var e,t=this.props.appContext.isLoggedIn,s=this.state,i=s.recommendedBlogsTimeline,n=s.trendingBlogsTimeline,a=this.getExploreMode()!==Q.Ru.Trending&&t?i:n;return(0,er.Z)({elements:null==a||null===(e=a.elements)||void 0===e?voidee.RP.Title),objectType:ee.TE.Carousel,id:"id",links:null==a?void 0:a.links},this.getTranslatedTextForBlogsSidebar())}),o()(this,"getTranslatedTextForBlogsSidebar",()=>{var e=this.props.appContext,t=e._c,s=e.isLoggedIn;return this.getExploreMode()!==Q.Ru.Trending&&s?t("Title for the sidebar section with blogs recommended for the user","Check out these blogs"):t("Title for the sidebar section with trending blogs","Trending Blogs")}),o()(this,"onPagination",()=>this.props.appContext.logEvent({eventName:N.J.Pagination})),o()(this,"isListView",()=>this.isMobile()||this.state.displayMode===ee.mt.List),o()(this,"getEndpointApiRequestFromQueryParams",e=>{var t=this.getExploreMode();return(0,ew.Aw)([this.props.appContext.apiFetch,this.props.appContext.apiFetchWithSchema],t,e)}),o()(this,"renderTimelineContent",()=>{var e=this.isMobile(),t=this.props.viewportContext.isViewportMounted;if(this.isFetchingMainTimeline||!t||!eR(this.state))return(0,C.jsx)(_.w,{condensed:e});var s=this.state.timelineKey,i=this.getExploreMode(),n=i===Q.Ru.AnswerTime?e||this.state.displayMode===ee.mt.Masonry?el.Z.answerTimeMobile:el.Z.answerTimeDesktop:void 0;return(0,C.jsx)(B.Z,{timelineName:`/explore/${i}`,getEndpointApiRequestFromQueryParams:this.getEndpointApiRequestFromQueryParams,children:(0,C.jsx)(A.ZP,{id:`explore-${i}`,getInitialPage:this.getInitialPage,getObjectsFromResponse:this.getTimelineElementsFromResponse,getNextLink:this.getNextLinkFromResponse,onPagination:this.onPagination,displayMode:this.isListView()?ee.mt.List:ee.mt.Masonry,maximumNumberOfColumns:ew.GI,masonryRendersWithSidebar:!0,emptyView:this.renderEmptyTimeline(),doesNotRemoveUnfollowedObjects:!0,overridePresentationStyle:n,setRefreshCallback:this.setRefreshCallback,initialLoader:(0,C.jsx)(_.w,{condensed:e})},s)})}),o()(this,"fetchCurrentTimeline",()=>{var e=this.getExploreMode(),t=this.props.appContext,s=t.apiFetch,i=t.apiFetchWithSchema;this.isFetchingMainTimeline=!0,(0,ew.kh)([s,i],e).then(t=>{this.isFetchingMainTimeline=!1,this.setState({timeline:n()(n()({},this.state.timeline),{},{[e]:t.timeline[e]}),takeover:n()(n()({},this.state.takeover),t.takeover),hasFetchError:t.hasFetchError})})}),o()(this,"getTimelineElementsFromResponse",e=>{var t;return(null===(t=e.response.timeline)||void 0===t?void 0:t.elements)||[]}),o()(this,"getNextLinkFromResponse",e=>{var t;return null===(t=e.response.timeline)||void 0===t||null===(t=t.links)||void 0===t?void 0:t.next}),o()(this,"getExploreMode",()=>{var e;return null!==(e=this.props.params.exploreMode)&&void 0!==e?e:this.props.appContext.features.exploreTodayTab?Q.Ru.Today:Q.Ru.Trending}),this.tabsHeaderRef=(0,d.createRef)()}getInitialState(){var e=this.props.appContext,t=e.getBootstrap,s=e.getCookie,i=e.isLoggedIn,n=e.features.exploreTodayTab,a=t(ew.Rn),o=n||!i?ee.mt.List:ee.mt.Masonry;return{displayMode:(s(H.zC.TAGGED_DISPLAY_MODE)||o)===ee.mt.List?ee.mt.List:ee.mt.Masonry,followedTagsTimeline:null==a?void 0:a.followedTagsTimeline,timeline:(null==a?void 0:a.timeline)||{},recommendedBlogsTimeline:null==a?void 0:a.recommendedBlogsTimeline,trendingBlogsTimeline:null==a?void 0:a.trendingBlogsTimeline,recommendedTagsTimeline:null==a?void 0:a.recommendedTagsTimeline,trendingTagsTimeline:null==a?void 0:a.trendingTagsTimeline,staffPicksTagsTimeline:null==a?void 0:a.staffPicksTagsTimeline,hasFetchError:!1,timelineKey:0,takeover:null==a?void 0:a.takeover}}componentDidMount(){this.shouldRedirectToExploreMode()||(eR(this.state)||this.fetchCurrentTimeline(),this.fetchTags(),this.fetchSidebar())}componentDidUpdate(e){var t=e.params.exploreMode,s=this.state,i=s.timeline,n=s.hasFetchError,a=s.timelineKey,o=this.getExploreMode();i[o]||this.isFetchingMainTimeline||n?t&&t!==o&&this.hasFetchedInitialState()&&this.setState({timelineKey:a+1}):this.fetchCurrentTimeline(),t!==o&&(this.fetchTags(),this.fetcext.width)}render(){var e=this.props.appContext,t=e.isLoggedIn,s=e._t,i=e.getCookie,a=e.features,o=a.exploreTodayTab,l=a.redpopDesktopVerticalNav,d=a.loggedOutImprovementsCtas,m=this.state,p=m.hasFetchError,u=m.displayMode,T=this.isMobile(),f=T?0:l?"100vh":`calc(100vh - ${P.desktopHeaderEffectiveHeightPx}px + 1px)`,x=H.X3.includes(i(H.zC.NATIVE_APP_WEBVIEW)),v=this.getExploreMode()||(o?Q.Ru.Today:Q.Ru.Trending);if(this.shouldRedirectToExploreMode())return(0,C.jsxs)(C.Fragment,{children:[this.renderPageViewLogger(),(0,C.jsx)(h.Fg,{to:(0,F.wT)({exploreMode:o?Q.Ru.Today:t?Q.Ru.Recommended:Q.Ru.Trending}),replace:!0})]});var b={activePage:G.vS.explore,mainContentIsMasonry:!this.isListView(),maxMasonryColumns:ew.GI};if(p){var w=(0,ed.U)((0,en.Pk)(s));return(0,C.jsxs)(C.Fragment,{children:[this.renderPageViewLogger(),(0,C.jsxs)(c.Z,n()(n()({},b),{},{children:[this.renderMetaData(),(0,C.jsx)("div",{className:eC.apiError,children:w}),";"]}))]})}return(0,C.jsxs)(C.Fragment,{children:[this.renderPageViewLogger(),(0,C.jsx)(J.M.Provider,{value:this.refreshTimeline,children:(0,C.jsxs)(c.Z,n()(n()({},b),{},{children:[this.renderMetaData(),!t&&(!T||d)&&(0,C.jsx)(g.Z,{fullWidth:l,avoidSidebar:!l,isDismissible:!(l||d),source:"explore_floating_sign_up",withLoginButton:d}),(0,C.jsx)($.Z,{innerBorder:!T,maxMasonryColumns:ew.GI,mainContentIsMasonry:!this.isListView(),sidebar:this.renderSidebar(),children:(0,C.jsxs)("main",{style:{minHeight:f},className:r()(eC.mainColumnContainer,this.isListView()?eC.postColumn:eC.postMasonry,{[eC.newDesktopLayout]:l,[eC.isNativeWebview]:x}),children:[(0,C.jsx)(ec.T,{ref:this.tabsHeaderRef,additionalOffset:0,isMasonryView:!this.isListView(),children:(0,C.jsx)(V.Z,{timelineOptions:t?[...o?[Q.Ru.Today]:[],Q.Ru.Recommended,Q.Ru.Trending,Q.Ru.StaffPicks,Q.Ru.AnswerTime]:[...o?[Q.Ru.Today]:[],Q.Ru.Trending,Q.Ru.StaffPicks,Q.Ru.AnswerTime],submenuOptions:Q.PX,viewsShown:[ee.mt.List,ee.mt.Masonry],onViewClick:this.switchView,currentView:u,activeOption:v,addBottomMargin:v===Q.Ru.StaffPicks,getLinkProps:this.getTimelineChangeLinkProps,isScrollingHeader:!0})}),this.renderTagsSection(),this.getExploreMode()===Q.Ru.AnswerTime&&(0,C.jsx)(eb,{takeover:this.state.takeover,verticalLayout:this.state.displayMode===ee.mt.List}),this.renderTimelineContent()]})})]}))})]})}fetchTrendingTagsState(){var e=this.props.appContext.apiFetch;this.isFetchingTrendingTags=!0,(0,ew.Ks)(e).then(e=>{this.isFetchingTrendingTags=!1,this.setState(n()({},e))})}fetchTagInfoRowsState(){var e=this.props.appContext.apiFetch;this.isFetchingTagInfoRows=!0,(0,ew.Iy)(e).then(e=>{this.isFetchingTrendingTags=!1,this.setState(n()({},e))})}fetchRecommendedTagsState(){var e=this.props.appContext,t=e.apiFetch,s=e.isLoggedIn;this.isFetchingRecommendedTags=!0,(0,ew.zJ)(t,s).then(e=>{this.isFetchingRecommendedTags=!1,this.setState(n()({},e))})}fetchStaffPicksTagsState(){var e=this.props.appContext.apiFetch;this.isFetchingStaffPicksTags=!0,(0,ew.lu)(e).then(e=>{this.isFetchingStaffPicksTags=!1,this.setState(n()({},e))})}fetchTags(){switch(this.getExploreMode()){case Q.Ru.Recommended:eN(this.state)||this.isFetchingRecommendedTags||this.fetchRecommendedTagsState();break;case Q.Ru.Trending:ej(this.state)||this.isFetchingTrendingTags||this.fetchTrendingTagsState();break;case Q.Ru.StaffPicks:eM(this.state)||this.isFetchingStaffPicksTags||this.fetchStaffPicksTagsState()}}fetchFollowedTagsState(){var e=this.props.appContext.apiFetch;this.isFetchingFollowedTags=!0,(0,es.KN)(e).fetch().then(e=>{var t=e.response,s=(void 0===t?{}:t).timeline;this.isFetchingFollowedTags=!1,this.setState({followedTagsTimeline:s})})}fetchRecommendedBlogsState(){var e=this.props.appContext.apiFetch;this.isFetchingRecommendedBlogs=!0,(0,et.Iv)(e).fetch().then(e=>{var t=e.response,s=(void 0===t?{}:t).timeline;this.isFetchingRecommendedBlogs=!1,this.setState({recommendedBlogsTimeline:s})})}fetchTrendingBlogsState(){var e=this.props.appContext.apiFetch;this.isFetchingTrendingBlogs=!0,(0,et.E1)(e).fetch().then(e=>{var t=e.response,s=(void 0===t?{}:t).timeline;this.isFetchingTrendingBlogs=!1,this.setState({trendingBlogsTimeline:s})})}fetchSidebar(){var e=this.props.appContext.isLoggedIn,t=this.getExploreMode(),s=this.props.appContext.features.trendingTagsSidebar;e||!s||eF(this.state)||this.isFetchingTagInfoRows||this.fetchTagInfoRowsState(),e&&t!==Q.Ru.Trending||ek(this.state)||this.isFetchingTrendingBlogs||this.fetchTrendingBlogsState(),!e||(ey(this.state)||this.isFetchingFollowedTags||this.fetchFollowedTagsState(),t===Q.Ru.Trending||eS(this.state)||this.isFetchingRecommendedBlogs||this.fetchRecommendedBlogsState())}}let eE=(0,M.Bg)(eP,{appContext:!0,loggedOutFeatureContext:!0,viewportContext:!0,paletteContext:!0})},1e4:(e,t,s)=>{s.d(t,{Z:()n t?t[1]:e}},75891:(e,t,s)(t,{Z:()=>o});var i=s(54138),n=s.n(i),a=s(22979);function o(e,t){return(0,a.eO)(e)?n()(n()({},e),{},{display:n()(n()({},e.display),{},{title:t})}):e}}}]);