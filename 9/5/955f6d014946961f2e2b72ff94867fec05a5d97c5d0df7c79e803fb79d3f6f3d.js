var GA4_RS=function(e){"use strict";i=4;const s={setLogLevel(e){switch(e.toUpperCase()){case"INFO":i=1;break;case"DEBUG":i=2;break;case"WARN":i=3;break;default:i=4}},info(...e){i<=1&&console.info(...e)},debug(...e){i<=2&&console.log(...e)},warn(...e){i<=3&&console.warn(...e)},error(...e){i<=4&&console.error(...e)}},a="RS_JS_SDK",c=["Request failed with status:"],u=e=>{const t=window.RudderStackGlobals&&window.RudderStackGlobals.errorReporting;t&&e instanceof Error&&t.notify(e)},l=e=>{const t=[];return function(r,n){if(!e||null!=n){if("object"!=typeof n||null===n)return n;for(;t.length>0&&t[t.length-1]!==this;)t.pop();return t.includes(n)?(s.debug(`Circular Reference detected for key: ${r}`),"[Circular Reference]"):(t.push(n),n)}}},p=(e,t)=>{try{return JSON.stringify(e,l(t))}catch(e){return s.warn("Failed to convert the value to a JSON string."),null}},f=e=>e?0===Object.keys(e).length:(s.warn("input is undefined or null"),!0),d=(e,t,r)=>{let n;try{n=((e,t,r)=>{let n;try{n="string"==typeof e?e:e instanceof Error||e.message?e.message:p(e)}catch(e){n=""}if("object"==typeof(o=e)&&null!==o&&"target"in o){if(e.target&&"script"!==e.target.localName)return"";if(e.target.dataset&&(e.target.dataset.loader!==a||"true"!==e.target.dataset.isnonnativesdk))return"";if(n=`error in script loading:: src::  ${e.target.src} id:: ${e.target.id}`,"ad-block"===e.target.id)return r.page("RudderJS-Initiated","ad-block page request",{path:"/ad-blocked",title:n},r.sendAdblockPageOptions),""}var o;return`[handleError]::${t||""} "${n}"`})(e,t,r)}catch(t){s.error("[handleError] Exception:: ",t),s.error("[handleError] Original error:: ",p(e)),u(t)}n&&(s.error(n),(e=>!e.message||!c.some(())(e)&&u(e))},y="Google Analytics 4 (GA4)";var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar m,v,_={exports:{}};ar w=function(e){urn t.debug=t,t.default=t,t.coerce=t.disable=t.enable=t.enabled=t.humanize=b(),t.destroy=Object.keys(e).forEach((),t.names=[],t.skips=[],t.formatters={},t.selectColor=t.enable(t.load()),t};!function(e,t){t.formatArgs=t.save=t.load=t.useColors=t.storage=),t.destroy=((),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(,e.exports=w(t);const{formatters:r}=e.exports;r.j=(_,_.exports);var C=_.exports,O=C("cookie"),j=function(e,t,r){switch(arguments.length){case 3:case 2:return function(e,t,r){r=r||{};var n=A(e)+"="+A(t);null==t&&(r.maxage=-1);r.maxage&&(r.expires=new Date(+new Date+r.maxage));r.path&&(n+="; path="+r.path);r.domain&&(n+="; domain="+r.domain);r.expires&&(n+="; expires="+r.expires.toUTCString());r.samesite&&(n+="; samesite="+r.samesite);r.secure&&(n+="; secure");document.cookie=n}(e,t,r);case 1:return function(e){return E()[e]}(e);default:return E()}};function E(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(e){var t,r={},n=e.split(/ *; */);if(""==n[0])return r;for(var o=0;o<n.length;++o)r[S((t=n[o].split("="))[0])]=S(t[1]);return r}(e)}function A(e){try{return encodeURIComponent(e)}catch(t){O("error `encode(%o)` - %o",e,t)}}function S(e){try{return decodeURIComponent(e)}catch(t){O("error `decode(%o)` - %o",e,t)}}const I=h(j);var K={exports:{}},F=Math.max,D=k=Math.max,x=D,P=R=Object.prototype.hasOwnProperty,T=Object.prototype.toString,N=U=L=$=M=K.exports=K.exports.deep=M;const B=h(K.exports);var V={exports:{}},q=C("cookie"),G=unction Y(e){try{return encodeURIComponent(e)}catch(t){q("error `encode(%o)` - %o",e,t)}}function(e,t){var r=G;.levels=function(e){var t=("function"!=typeof window.URL?e):new URL(e).hostname).split("."),r=t[t.length-1],n=[];if(4===t.length&&r===parseInt(r,10))return n;if(t.length<=1)return n;for(var o=t.length-2;o>=0;--o)n.push(t.slice(o).join("."));return n},n.cookie=r,t=e.exports=n}(V,V.exports);const J=h(V.exports);function z(e){return function t(r){return 0===arguments.length||r)?t:e.apply(this,arguments)}}var Z=z(();function Q(e,t,r){if(r||(r=new X),e))return e;var n,o=switch(Z(e)){case"Object":return o(Object.create(Object.getPrototypeOf(e)));case"Array":return o([]);case"Date":return new Date(e.valueOf());case"RegExp":return n=e,new RegExp(n.source,n.flags?n.flags:(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":"")+(n.unicode?"u":"")+(n.dotAll?"s":""));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var X=function(){eturn e.prototype.set=function(e,t){const r=this.hash(e);let n=this.map[r];n||(this.map[r]=n=[]),n.push([e,t]),this.length+=1},e.prototype.hash=e.prototype.get=function(e){if(this.length<=180){for(const t in this.map){const r=this.map[t];for(let t=0;t<r.length;t+=1){const n=r[t];if(n[0]===e)return n[1]}}return}const t=this.hash(e),r=this.map[t];if(r)for(let t=0;t<r.length;t+=1){const n=r[t];if(n[0]===e)return n[1]}},e}(),ee=z(();const te=new class{constructor(e){this.cOpts={},this.options(e),this.isSupportAvailable=this.checkSupportAvailability()}options(e={}){if(0===arguments.length)return this.cOpts;let t=`.${J(window.location.href)}`;return"."===t&&(t=null),this.cOpts=B(e,{maxage:31536e6,path:"/",domain:t,samesite:"Lax"}),e.sameDomainCookiesOnly&&delete this.cOpts.domain,this.cOpts}set(e,t){try{return I(e,t,ee(this.cOpts)),!0}catch(e){return s.error(e),!1}}emoveheckSupportAvailability(){const e="test_rudder_cookie";return this.set(e,!0),!!this.get(e)&&(this.remove(e),!0)}}({}),re={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}};class ne{constructor(e,t){this.level=+t||re.ERROR.value,this.scope=e||""}setLogLevelg(...e){this.logBase(e,re.LOG.value)}info(...e){this.logBase(e,re.INFO.value)}debug(...e){this.logBase(e,re.DEBUG.value)}warn(...e){this.logBase(e,re.WARN.value)}error(...e){this.logBase(e,re.ERROR.value)}logBase(e,t){if(this.level<=t){Object.values(re).find(().method(...this.getLogData(e))}}getLogData(e){if(Array.isArray(e)&&e.length>0){let t="%c RS SDK";this.scope&&(t=`${t} - ${this.scope}`);t=`${t} %c ${e[0].trim()}`;const r=[];return r.push(t),r.push("font-weight: bold; background: black; color: white;"),r.push("font-weight: normal;"),r.push(...e.slice(1)),r}return e}}const oe=["item_id","itemId","product_id","item_name","itemName","name","coupon","item_brand","itemBrand","brand","item_variant","itemVariant","variant","price","quantity","index","position","affiliation","discount","item_category","itemCategory","category","item_category2","item_category3","item_category4","item_category5","item_list_id","item_list_name","location_id"],ie=[{sourceKeys:["product_id","itemId"],destKey:"item_id"},{sourceKeys:["name","itemName"],destKey:"item_name"},{sourceKeys:"coupon",destKey:"coupon"},{sourceKeys:["brand","itemBrand"],destKey:"item_brand"},{sourceKeys:["variant","itemVariant"],destKey:"item_variant"},{sourceKeys:"price",destKey:"price",metadata:{type:"toNumber"}},{sourceKeys:"quantity",destKey:"quantity",metadata:{type:"toNumber"}},{sourceKeys:"position",destKey:"index",metadata:{type:"toNumber"}},{sourceKeys:"affiliation",destKey:"affiliation"},{sourceKeys:"discount",destKey:"discount"},{sourceKeys:["category","itemCategory"],destKey:"item_category"},{sourceKeys:"item_category2",destKey:"item_category2"},{sourceKeys:"item_category3",destKey:"item_category3"},{sourceKeys:"item_category4",destKey:"item_category4"},{sourceKeys:"item_category5",destKey:"item_category5"},{sourceKeys:"item_list_id",destKey:"item_list_id"},{sourceKeys:"item_list_name",destKey:"item_list_name"},{sourceKeys:"location_id",destKey:"location_id"}],se={method:{sourceKeys:"properties.method",destKey:"method"},product_cart_shared_method:{sourceKeys:"properties.share_via",destKey:"method"},currency:{sourceKeys:"properties.currency",destKey:"currency",metadata:{defaultValue:"USD"}},value:{sourceKeys:["properties.total","properties.value","properties.revenue","properties.price"],destKey:"value",metadata:{type:"toNumber"}},product_add_or_remove_value:{sourceKeys:["properties.total","properties.value","properties.revenue",{operation:"multiplication",args:[{sourceKeys:"properties.price"},{sourceKeys:"properties.quantity",defaultVal:1}]}],destKey:"value",metadata:{type:"toNumber"}},search:{sourceKeys:"properties.query",destKey:"search_term"},list_id:{sourceKeys:"properties.list_id",destKey:"item_list_id"},list_name:{sourceKeys:"properties.category",destKey:"item_list_name"},creative_name:{sourceKeys:["properties.creative_name","properties.creative"],destKey:"creative_name"},creative_slot:{sourceKeys:["properties.creative_slot","properties.position"],destKey:"creative_slot"},promotion_id:{sourceKeys:"properties.promotion_id",destKey:"promotion_id"},promotion_name:{sourceKeys:["properties.promotion_name","properties.name"],destKey:"promotion_name"},coupon:{sourceKeys:"properties.coupon",destKey:"coupon"},payment_method:{sourceKeys:"properties.payment_method",destKey:"payment_type"},shipping_method:{sourceKeys:"properties.shipping_method",destKey:"shipping_tier"},order_id:{sourceKeys:"properties.order_id",destKey:"transaction_id"},shipping:{sourceKeys:"properties.shipping",destKey:"shipping",metadata:{type:"toNumber"}},tax:{sourceKeys:"properties.tax",destKey:"tax",metadata:{type:"toNumber"}},content_type:{sourceKeys:"properties.content_type",destKey:"content_type"},item_id:{sourceKeys:["properties.item_id","properties.product_id","properties.sku"],destKey:"item_id"},cart_shared_item_id:{sourceKeys:["properties.item_id","properties.cart_id"],destKey:"item_id"},url:{sourceKeys:["properties.url","context.page.url"],destKey:"page_location"},referrer:{sourceKeys:["properties.referrer","context.page.referrer"],destKey:"page_referrer"},title:{sourceKeys:["properties.title","context.page.title"],destKey:"page_title"}},ae={LOGIN:{event:"login",mapping:[se.method]},SIGN_UP:{event:"sign_up",mapping:[se.method]},GENERATE_LEAD:{event:"generate_lead",mapping:[se.currency,r(r({},se.value),{},{required:!0})]},PRODUCTS_SEARCHED:{event:"search",mapping:[se.search]},PRODUCT_SEARCHED:{event:"search",mapping:[se.search]},PRODUCT_LIST_VIEWED:{event:"view_item_list",itemList:"YES",mapping:[se.list_id,se.list_name]},PROMOTION_VIEWED:{event:"view_promotion",itemList:"YES",mapping:[se.promotion_id,se.creative_slot,se.creative_name,se.promotion_name]},PROMOTION_CLICKED:{event:"select_promotion",itemList:"NO",mapping:[se.promotion_id,se.creative_slot,se.creative_name,se.promotion_name]},PRODUCT_CLICKED:{event:"select_item",item:"YES",mapping:[se.list_id,se.list_name]},PRODUCTS_CLICKED:{event:"select_item",item:"YES",mapping:[se.list_id,se.list_name]},PRODUCT_VIEWED:{event:"view_item",item:"YES",mapping:[se.currency,r(r({},se.value),{},{required:!0})]},PRODUCT_ADDED:{event:"add_to_cart",itemList:"NO",item:"YES",mapping:[se.currency,r(r({},se.product_add_or_remove_value),{},{required:!0})]},PRODUCT_REMOVED:{event:"remove_from_cart",itemList:"NO",item:"YES",mapping:[se.currency,r(r({},se.product_add_or_remove_value),{},{required:!0})]},CART_VIEWED:{event:"view_cart",itemList:"YES",mapping:[se.currency,r(r({},se.value),{},{required:!0})]},CHECKOUT_STARTED:{event:"begin_checkout",itemList:"YES",mapping:[se.currency,se.coupon,r(r({},se.value),{},{required:!0})]},PAYMENT_INFO_ENTERED:{event:"add_payment_info",itemList:"YES",mapping:[se.currency,se.coupon,se.payment_method,r(r({},se.value),{},{required:!0})]},CHECKOUT_STEP_COMPLETED:{event:"add_shipping_info",itemList:"YES",mapping:[se.currency,se.coupon,se.shipping_method,r(r({},se.value),{},{required:!0})]},ORDER_COMPLETED:{event:"purchase",itemList:"YES",mapping:[se.tax,se.coupon,se.shipping,se.currency,r(r({},se.value),{},{required:!0}),r(r({},se.order_id),{},{required:!0})]},ORDER_REFUNDED:{event:"refund",itemList:"NO",mapping:[se.tax,se.coupon,se.shipping,se.currency,r(r({},se.value),{},{required:!0}),r(r({},se.order_id),{},{required:!0})]},PRODUCT_ADDED_TO_WISHLIST:{event:"add_to_wishlist",itemList:"NO",item:"YES",mapping:[se.currency,r(r({},se.value),{},{required:!0})]},PRODUCT_SHARED:{event:"share",mapping:[se.item_id,se.content_type,se.product_cart_shared_method]},CART_SHARED:{event:"share",mapping:[se.content_type,se.cart_shared_item_id,se.product_cart_shared_method]},PAGE:{event:"page_view",mapping:[se.url,se.title,se.referrer]}},ce=[ae.PRODUCT_CLICKED.event,ae.PRODUCT_VIEWED.event,ae.PRODUCT_ADDED.event,ae.PRODUCT_REMOVED.event,ae.PRODUCT_ADDED_TO_WISHLIST.event];const ue=var le=st ye=h(le);for(var ge=256;ge--;)(ge+256).toString(16).substring(1);for(var he=0;he<256;he++)(he+256).toString(16).substring(1);function me(e,t,r,n=new Set){const o=r;return n.has(e)?(o[t]="[Circular Reference]",r):(n.add(e),Object(e)!==e?o[t]=e:Array.isArray(e)?(()=>{const r=e.length;for(let i=0;i<r;i+=1)me(e[i],t?`${t}.${i}`:`${i}`,o,n);0===r&&(o[t]=[])})():(()=>{let r=!0;Object.keys(e).forEach((i=>{r=!1,me(e[i],t?`${t}.${i}`:i,o,n)})),r&&(o[t]={})})(),n.delete(e),o)}function ve(e,t,r,n){const o=[],i=t||{};return Array.isArray(r)?r.forEach((t=>{const r=ye(e,t);r&&(Object.keys(r).forEach((e=>{n.includes(e)||o.push(e)})),o.forEach((e=>{void 0!==r[e]&&(i[e]=ye(r,e))})))})):"root"===r?(Object.keys(e).forEach((),o.forEach((t=>{void 0!==e[t]&&(i[t]=ye(e,t))}))):s.debug("unable to parse keys"),i}const _e=e=>((e)&&((e),be=({message:e,operationObject:t})=>{const{operation:r,args:n}=t,o=n.map((t=>{const{sourceKeys:r,defaultVal:n}=t,o=ye(e,r);return o||!1===o||0===o?o:n}));if(!o.every(())return null;let i=null;switch(r){case"multiplication":i=1;for(const e of o){if("number"!=typeof e)return null;i*=e}return i.toFixed(2);case"addition":i=0;for(const e of o){if("number"!=typeof e)return null;i+=e}return i.toFixed(2);default:return null}},we=(e,t)=>{let r=e;const n={jsonStringify:jsonStringifyOnObject:()=>{"string"!=typeof e&&(r=JSON.stringify(e))},toString:()=>{r=String(e)},toNumber:()=>{r=Number(e)},toFloat:toInt:toLower:()=>{r=e.toString().toLowerCase()},trim:()=>{"string"==typeof e&&(r=e.trim())},IsBoolean:()=>{r=!0,"boolean"!=typeof e&&(s.debug("Boolean value missing, so dropping it"),r=!1)}};if(t in n){(0,n[t])()}return r},Ce=(e,t)=>{const r={};return Array.isArray(t)&&t.length>0&&t.forEach((t=>{const{sourceKeys:n,destKey:o,metadata:i}=t,s=((e,t)=>{if(!t)return e;const{type:r,defaultValue:n}=t;if(!_e(e))return n||e;let o=e;return r&&(Array.isArray(r)?r.forEach(():o=we(o,r)),o})(((e,t)=>{if(Array.isArray(t)&&t.length>0){for(const r of t){let t;if(t="object"==typeof r?be({message:e,operationObject:r}):ye(e,r),t||!1===t||0===t)return t}return null}return"object"==typeof t?be({message:e,operationObject:t}):ye(e,t)})(e,n),i);(s||0===s||!1===s)&&o&&(r[o]=s)})),r};var Oe={exports:{}};!function(e,t){var r=9007199254740991,n="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",s="[object Map]",a="[object Promise]",c="[object Set]",u="[object WeakMap]",l="[object DataView]",p=/^\[object .+?Constructor\]$/,f="object"==typeof g&&g&&g.Object===Object&&g,d="object"==typeof self&&self&&self.Object===Object&&self,y=f||d||Function("return this")(),h=t&&!t.nodeType&&t,m=h&&e&&!e.nodeType&&e,v=m&&m.exports===h;var _,b,w,C=Function.prototype,O=Object.prototype,j=y["__core-js_shared__"],E=(_=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",A=C.toString,S=O.hasOwnProperty,I=O.toString,K=RegExp("^"+A.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=v?y.Buffer:void 0,D=O.propertyIsEnumerable,k=F?F.isBuffer:void 0,x=(b=Object.keys,w=Object,function(e){return b(w(e))}),P=W(y,"DataView"),R=W(y,"Map"),T=W(y,"Promise"),N=W(y,"Set"),U=W(y,"WeakMap"),L=!D.call({valueOf:1},"valueOf"),$=H(P),M=H(R),B=H(T),V=H(N),q=H(U);unction W(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return G(r)?r:void 0}var Y=function(e){return I.call(e)};function H(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}P&&Y(new P(new ArrayBuffer(1)))!=l||R&&Y(new R)!=s||T&&Y(T.resolve())!=a||N&&Y(new N)!=c||U&&Y(new U)!=u)&&(Y=;var z=Array.isArray;ar Q=k||function X(e){var t=ee(e)?I.call(e):"";return t==o||t==i}function ee(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=(Oe,Oe.exports);const je=h(Oe.exports);var Ee={exports:{}};!function(e,t){var r="__lodash_hash_undefined__",n=1,o=2,i=1/0,s=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object Boolean]",l="[object Date]",p="[object Error]",f="[object Function]",d="[object GeneratorFunction]",y="[object Map]",h="[object Number]",m="[object Object]",v="[object Promise]",_="[object RegExp]",b="[object Set]",w="[object String]",C="[object Symbol]",O="[object WeakMap]",j="[object ArrayBuffer]",E="[object DataView]",A=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,I=/^\./,K=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,F=/\\(\\)?/g,D=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[a]=x[c]=x[j]=x[u]=x[E]=x[l]=x[p]=x[f]=x[y]=x[h]=x[m]=x[_]=x[b]=x[w]=x[O]=!1;var P="object"==typeof g&&g&&g.Object===Object&&g,R="object"==typeof self&&self&&self.Object===Object&&self,T=P||R||Function("return this")(),N=t&&!t.nodeType&&t,U=N&&e&&!e.nodeType&&e,L=U&&U.exports===N&&P.process,$=),M=$&&$.isTypedArray;function B(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},J=Array.prototype,z=Function.prototype,Z=Object.prototype,Q=T["__core-js_shared__"],X=(H=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",ee=z.toString,te=Z.hasOwnProperty,re=Z.toString,ne=RegExp("^"+ee.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=T.Symbol,ie=T.Uint8Array,se=W(Object.getPrototypeOf,Object),ae=Z.propertyIsEnumerable,ce=J.splice,ue=Object.getOwnPropertySymbols,le=W(Object.keys,Object),pe=Be(T,"DataView"),fe=Be(T,"Map"),de=Be(T,"Promise"),ye=Be(T,"Set"),ge=Be(T,"WeakMap"),he=Be(Object,"create"),me=Xe(pe),ve=Xe(fe),_e=Xe(de),be=Xe(ye),we=Xe(ge),Ce=oe?oe.prototype:void 0,Oe=Ce?Ce.valueOf:void 0,je=Ce?Ce.toString:void 0;function Ee(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ar=Ee.prototype.delete=Ee.prototype.get=Ee.prototype.has=Ee.prototype.set=Ae.prototype.clear=Ae.prototype.delete=Ae.prototype.get=Ae.prototype.has=Ae.prototype.set=Se.prototype.clear=Se.prototype.delete=function(e){return Me(this,e).delete(e)},Se.prototype.get=function(e){return Me(this,e).get(e)},Se.prototype.has=Se.prototype.set=Ie.prototype.add=Ie.prototype.push=Ie.prototype.has=function(e){return this.__data__.has(e)},Ke.prototype.clear=Ke.prototype.delete=function(e){return this.__data__.delete(e)},Ke.prototype.get=function(e){return this.__data__.get(e)},Ke.prototype.has=Ke.prototype.set=var Ve=ue?W(ue,Object):gt,qe=ue?gt,Ge=Ge(new pe(new ArrayBuffer(1)))!=E||fe&&Ge(new fe)!=y||de&&Ge(de.resolve())!=v||ye&&Ge(new ye)!=b||ge&&Ge(new ge)!=O)&&(Ge=;var Ze=et(();che=Se;var nt=Array.isArray;tion ct(e){return!!e&&"object"==typeof e}ar lt,pt=M?(lt=M,:ports=(Ee,Ee.exports);var Ae=9007199254740991,Se="[object Arguments]",Ie="[object Function]",Ke="[object GeneratorFunction]",Fe="[object Symbol]",De="object"==typeof g&&g&&g.Object===Object&&g,ke="object"==typeof self&&self&&self.Object===Object&&self,xe=De||ke||Function("return this")();ar Re=Object.prototype,Te=Re.hasOwnProperty,Ne=Re.toString,Ue=xe.Symbol,Le=Re.propertyIsEnumerable,$e=Ue?Ue.isConcatSpreadable:void 0,Me=Math.max; Ge,We,Ye=Array.isArray;e=We=Me(void 0===We?Ge.length-1:We,0);var Je=1/0,ze="[object Symbol]",Ze="object"==typeof g&&g&&g.Object===Object&&g,Qe="object"==typeof self&&self&&self.Object===Object&&self,Xe=Ze||Qe||Function("return this")(),et=Object.prototype.toString,tt=Xe.Symbol,rt=tt?tt.prototype:void 0,nt=rt?rt.toString:void 0;onst it=h(();function st(e,t=".",r="normal"){const n={};let o;return function e(i,s,a=new Set){let c;if(a.has(i))n[s]="[Circular Reference]";else{if(a.add(i),Object(i)!==i)n[s]=i;else if(Array.isArray(i)){for(c=0,o=i.length;c<o;c+=1)e(i[c],"strict"===r?`${s}${t}${c}`:`${s}[${c}]`,a);0===o&&(n[s]=[])}else{let r=!0;Object.keys(i).forEach((n=>{r=!1,e(i[n],s?`${s}${t}${n}`:n,a)})),r&&s&&(n[s]={})}a.delete(i)}}(e,""),n}const at=new ne(y),ct=ut=e=>{const t={};if("object"==typeof e&&!Array.isArray(e)){return Object.keys(e).forEach((r=>{const n=e[r];("items"===r||"object"!=typeof n&&!(e=>je(it(e).trim()))(n))&&(t[r]=n)})),t}return e},lt=(e,t,r)=>{let n={};return n=ve(e,n,t,r),f(n)||(n=st(n,"_","strict")),n},pt=e=>{const t=[],{properties:n}=e;let o=null==n?void 0:n.products,i=!1;return"object"!=typeof o||Array.isArray(o)||(i=!0,o=[o]),Array.isArray(o)&&o.forEach(((n,o)=>{let s=Ce(n,ie);const a=ve(e,{},i?["properties.products"]:[`properties.products.${o}`],oe);f(a)||(s=ut(r(r({},s),st(a,"_","strict")))),f(s)||t.push(s)})),t},ft=e=>{const{properties:t}=e,r=[];if(t&&Object.keys(t).length>0){const e=Ce(t,ie);f(e)||r.push(e)}return r},dt=(e,t)=>{const{event:n,mapping:o}=t;let i=Ce(e,o);if(Array.isArray(o)&&o.length>0){if(o.some((e=>!(i[e.destKey]||!e.required)&&(at.error(`Missing required value from ${JSON.stringify(e.sourceKeys)}`),!0))))return null}const{items:s,mapRootLevelPropertiesToGA4ItemsArray:a}=((e,t)=>{const{itemList:r,item:n}=t;let o=[],i=!1;return r&&n?(o=pt(e),o&&o.length>0||(i=!0,o=ft(e))):n?(i=!0,o=ft(e)):r&&(o=pt(e)),{items:o,mapRootLevelPropertiesToGA4ItemsArray:i}})(e,t),c=((e,t,r)=>{let n=t.reduce(((e,t)=>{const r=t.sourceKeys;return"string"==typeof r?e.push(ct(r)):Array.isArray(r)&&r.forEach((t=>{"string"==typeof t&&e.push(ct(t))})),e}),[]);return n.push("products"),e&&ce.includes(r)&&(n=n.concat(oe)),n})(a,o,n),u=lt(e,["properties"],c);return s.length>0&&(i.items=s),f(u)||(i=r(r({},i),u)),i},yt=(e,t)=>{const r=ae[`${t.toUpperCase()}`],n=r?dt(e,r):(e=>lt(e,["properties"],[]))(e);if(!n)return null;return{params:ut(n),event:r?r.event:t}},gt=new ne(y);return e.GA4=class{constructor(e,t,r){t.logLevel&&gt.setLogLevel(t.logLevel),this.name="GA4",this.clientId="",this.sessionId="",this.sessionNumber="",this.cookie=te,this.sendUserId=!0,this.analytics=t,this.measurementId=e.measurementId,this.debugView=e.debugView||!1,this.capturePageView=e.capturePageView||"rs",this.isHybridModeEnabled="hybrid"===e.connectionMode,this.piiPropertiesToIgnore=e.piiPropertiesToIgnore||[],this.extendPageViewParams=e.extendPageViewParams||!1,this.overrideClientAndSessionId=e.overrideClientAndSessionId||!1,({shouldApplyDeviceModeTransformation:this.shouldApplyDeviceModeTransformation,propagateEventsUntransformedOnError:this.propagateEventsUntransformedOnError,destinationId:this.destinationId}=null!=r?r:{})}loadScript(e){window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||window.gtag("js",new Date);const t={};var r,n,o;if("rs"===this.capturePageView&&(t.send_page_view=!1),this.sendUserId=(r=this.analytics.loadOnlyIntegrations,null===(n=null==r||null===(o=r.GA4)||void 0===o?void 0:o.sendUserId)||void 0===n||n),this.sendUserId&&this.analytics.getUserId()&&(t.user_id=this.analytics.getUserId()),this.isHybridModeEnabled&&this.overrideClientAndSessionId)t.cookie_prefix="rs",t.client_id=this.analytics.getAnonymousId(),t.session_id=this.analytics.getSessionId();else{const e=this.cookie.get("rs_ga"),r=this.cookie.get("_ga"),n=this.measurementId.split("-"),o=this.cookie.get(`rs_ga_${n[1]}`);if(!r&&e&&o){const r=e.split("."),n=r.length>3?`${r[2]}.${r[3]}`:r[2],i=o.split(".")[2];n&&(t.client_id=n),i&&(t.session_id=i)}this.cookie.remove("rs_ga"),this.cookie.remove(`rs_ga_${n[1]}`)}this.debugView&&(t.debug_mode=!0),0===Object.keys(t).length?window.gtag("config",e):window.gtag("config",e,t),window.gtag("get",this.measurementId,"session_id",(e=>{this.sessionId=e})),window.gtag("get",this.measurementId,"client_id",(e=>{this.clientId=e})),window.gtag("get",this.measurementId,"session_number",(),((e,t,r={})=>{try{if(document.getElementById(e))return;const n=document.createElement("script");n.src=t,n.async=void 0===r.async||r.async,n.type="text/javascript",n.id=e,!0!==r.skipDatasetAttributes&&(n.setAttribute("data-loader",a),void 0!==r.isNonNativeSDK&&n.setAttribute("data-isNonNativeSDK",r.isNonNativeSDK));const o=document.getElementsByTagName("head");if(o.length>0)o[0].insertBefore(n,o[0].firstChild);else{const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}}catch(e){d(e)}})("google-analytics 4",`https://www.googletagmanager.com/gtag/js?id=${e}`)}ntify(e){const{message:t}=e,{traits:n}=t.context,o=((e,t)=>{const n=[],o={},i=t,s={};return e.length>0&&e.forEach((e=>{"string"==typeof e.piiProperty&&""!==e.piiProperty.trim()&&n.push(e.piiProperty.trim())})),Object.keys(i).forEach((e=>{const t=i[e];n.includes(e)?o[e]=null:s[e]=t})),r(r({},o),s)})(this.piiPropertiesToIgnore,n);if(Object.keys(o).length>0&&window.gtag("set","user_properties",o),this.sendUserId&&t.userId){const{userId:e}=t;window.gtag("config",this.measurementId,{user_id:e})}}track(e){if(this.isHybridModeEnabled)return;const{message:t}=e,r=(e=>{if(!e||"string"!=typeof e)return at.error("Event name is required and should be a string"),null;const t=e.trim().replace(/\s+/g,"_");return["click","error","scroll","form_start","form_submit","first_open","first_visit","app_remove","video_start","session_start","view_complete","file_download","video_progress","user_engagement","in_app_purchase","app_store_refund","app_store_subscription_cancel","app_store_subscription_renew"].includes(t)?(at.error(`Reserved event name ${t} is not allowed`),null):t})(null==t?void 0:t.event);if(!r)return void gt.error("Event name is required");const n=yt(t,r);if(!n)return;const{params:o,event:i}=n,s=this.addSendToAndMeasurementIdToPayload(o,e);window.gtag("event",i,s)}page(e){if("rs"===this.capturePageView){const{message:t}=e,{properties:n}=t;let o=Ce(t,ae.PAGE.mapping);o=this.addSendToAndMeasurementIdToPayload(o,e),this.extendPageViewParams?window.gtag("event","page_view",r(r({},function(e,t=""){return me(e,t,{})}(n)),o)):window.gtag("event","page_view",o)}}group(e){if(this.isHybridModeEnabled)return;const{groupId:t,traits:n}=e.message;let o=n;o=this.addSendToAndMeasurementIdToPayload(o,e);const i=r({group_id:t},o);window.gtag("event","join_group",i)}addSendToAndMeasurementIdToPayload(e,t){const{message:r}=t,{userId:n}=r,o=e;return o.send_to=this.measurementId,this.sendUserId&&n&&(o.user_id=n),o}getDataForIntegrationsObject,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});
//# sourceMappingURL=GA4.min.js.map
