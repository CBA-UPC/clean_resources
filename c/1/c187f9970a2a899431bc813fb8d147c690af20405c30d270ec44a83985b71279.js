import{at as w,ai as y,aA as D,K as d,a3 as h,l as b,as as x}from"./itinerary-entities.5f897bcd.js";import{u as T,D as c}from"./entry.a7cea746.js";import{P as g}from"./PanelContainer.e2d81510.js";import{bN as v}from"./service-client.4862e840.js";import{l as V,r as u,G as B,H as C,I as m,Y as U,x as i,z as t,a as p,a7 as I,a6 as N}from"./graphql.5cf3693b.js";import"./itinerary-modules.2ea32123.js";const A={class:"inputs"},E=V({__name:"downloadTickets",setup(O){const{day:r}=b(),a=u(null),o=u(null),f=w(),s=y(),{handleException:_}=T(),k=async()=>{var n;if(!(!a.value||!o.value))try{const{data:e}=await v({endDate:r.gregory(o.value).format(d()),startDate:r.gregory(a.value).format(d())});if(!((n=e.Urls)!=null&&n.length)){f({icon:"warning",text:s.t("DownloadTickets.noFilesMessage"),confirmButtonText:s.t("DownloadTickets.ok"),allowOutsideClick:!1,allowEscapeKey:!1});return}const l=`${h().faas}/zip?urls_base64=${btoa(encodeURI(e.Urls.join(",")))}`;open(l,"_blank")}catch(e){_(e,{closeOnClickOutside:!1,icon:"warning"})}};return(n,e)=>(B(),C(g,{title:t(s).t("DownloadTickets.title")},{default:m(()=>[U("div",A,[i(c,{modelValue:t(a),"onUpdate:modelValue":e[0]||(e[0]=l=>p(a)?a.value=l:null),"hide-icon":"","start-day-title":t(s).t("DownloadTickets.fromDate"),required:"",format:"short","year-month-selector":"","hide-inputs":"","hide-description":"","double-month":""},null,8,["modelValue","start-day-title"]),i(c,{modelValue:t(o),"onUpdate:modelValue":e[1]||(e[1]=,"hide-icon":"","start-day-title":t(s).t("DownloadTickets.toDate"),required:"",format:"short","year-month-selector":"","hide-description":"","hide-inputs":"","double-month":""},null,8,["modelValue","start-day-title"]),i(D,{class:"submit-button",type:"filled",disabled:!t(a)||!t(o),onClick:k},{default:m(()=>[I(N(t(s).t("DownloadTickets.submit")),1)]),_:1},8,["disabled"])])]),_:1},8,["title"]))}});const M=x(E,[["__scopeId","data-v-2c9d43ce"]]);export{M as default};
