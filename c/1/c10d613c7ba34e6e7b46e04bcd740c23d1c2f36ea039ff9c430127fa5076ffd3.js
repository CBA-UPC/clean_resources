(self.webpackChunkWPS_Drive=self.webpackChunkWPS_Drive||[]).push([[1626],{66419:function(t,r,n){t.exports=n(27698)},47302:function(t,r,n){t.exports=n(62856)},92762:function(t,r,n){t.exports=n(2348)},29828:function(t,r,n){t.exports=n(35178)},51942:function(t,r,n){t.exports=n(63383)},53592:function(t,r,n){t.exports=n(27385)},78363:function(t,r,n){t.exports=n(81522)},19996:function(t,r,n){t.exports=n(32209)},95238:function(t,r,n){t.exports=n(81493)},95299:function(t,r,n){var o=n(27698);t.exports=o},83450:function(t,r,n){var o=n(83363);t.exports=o},66820:function(t,r,n){var o=n(56243);t.exports=o},84234:function(t,r,n){var o=n(82073);t.exports=o},54493:function(t,r,n){n(77971),n(53242);var o=n(54058);t.exports=o.Array.from},2948:function(t,r,n){n(4115);var o=n(35703);t.exports=o("Array").sort},78209:function(t,r,n){n(93925);var o=n(35703);t.exports=o("Array").splice},13830:function(t,r,n){n(66274),n(77971);var o=n(22902);t.exports=o},69355:function(t,r,n){var o=n(7046),e=n(2948),i=Array.prototype;t.exports=function(t){var r=t.sort;return t===i||o(i,t)&&r===i.sort?e:r}},18339:function(t,r,n){var o=n(7046),e=n(78209),i=Array.prototype;t.exports=function(t){var r=t.splice;return t===i||o(i,t)&&r===i.splice?e:r}},71611:function(t,r,n){var o=n(7046),e=n(3269),i=String.prototype;t.exports=function(t){var r=t.startsWith;return"string"==typeof t||t===i||o(i,t)&&r===i.startsWith?e:r}},45999:function(t,r,n){n(49221);var o=n(54058);t.exports=o.Object.assign},3269:function(t,r,n){n(94761);var o=n(35703);t.exports=o("String").startsWith},27385:function(t,r,n){var o=n(95299);t.exports=o},81522:function(t,r,n){var o=n(83450);t.exports=o},32209:function(t,r,n){var o=n(66820);t.exports=o},81493:function(t,r,n){var o=n(84234);t.exports=o},11354:function(t,r,n){"use strict";var o=n(21899),e=n(86843),i=n(78834),u=n(89678),c=n(75196),a=n(6782),f=n(24284),s=n(10623),p=n(55449),v=n(53476),l=n(22902),_=o.Array;t.exports=function(t){var r=u(t),n=f(this),o=arguments.length,h=o>1?arguments[1]:void 0,x=void 0!==h;x&&(h=e(h,o>2?arguments[2]:void 0));var d,y,g,b,w,m,A=l(r),j=0;if(!A||this==_&&a(A))for(d=s(r),y=n?new this(d):_(d);d>j;j++)m=x?h(r[j],j):r[j],p(y,j,m);else for(w=(b=v(r,A)).next,y=n?new this:[];!(g=i(w,b)).done;j++)m=x?c(b,h,[g.value,j],!0):g.value,p(y,j,m);return y.length=j,y}},61388:function(t,r,n){var o=n(15790),e=Math.floor,i=function(t,r){var n=t.length,a=e(n/2);return n<8?u(t,r):c(t,i(o(t,0,a),r),i(o(t,a),r),r)},u=function(t,r){for(var n,o,e=t.length,i=1;i<e;){for(o=i,n=t[i];o&&r(t[o-1],n)>0;)t[o]=t[--o];o!==i++&&(t[o]=n)}return t},c=function(t,r,n,o){for(var e=r.length,i=n.length,u=0,c=0;u<e||c<i;)t[u+c]=u<e&&c<i?o(r[u],n[c])<=0?r[u++]:n[c++]:u<e?r[u++]:n[c++];return t};t.exports=i},75196:function(t,r,n){var o=n(96059),e=n(7609);t.exports=function(t,r,n,i){try{return i?r(o(n)[0],n[1]):r(n)}catch(r){e(t,"throw",r)}}},34342:function(t,r,n){var o=n(2861).match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},81046:function(t,r,n){var o=n(2861);t.exports=/MSIE|Trident/.test(o)},18938:function(t,r,n){var o=n(2861).match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},24420:function(t,r,n){"use strict";var o=n(55746),e=n(95329),i=n(78834),u=n(95981),c=n(14771),a=n(87857),f=n(36760),s=n(89678),p=n(37026),v=Object.assign,l=Object.defineProperty,_=e([].concat);t.exports=!v||u((function(){if(o&&1!==v({b:1},v(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},r={},n=Symbol(),e="abcdefghijklmnopqrst";return t[n]=7,e.split("").forEach((function(t){r[t]=t})),7!=v({},t)[n]||c(v({},r)).join("")!=e}))?function(t,r){for(var n=s(t),e=arguments.length,u=1,v=a.f,l=f.f;e>u;)for(var h,x=p(arguments[u++]),d=v?_(c(x),v(x)):c(x),y=d.length,g=0;y>g;)h=d[g++],o&&!i(l,x,h)||(n[h]=x[h]);return n}:v},53242:function(t,r,n){var o=n(76887),e=n(11354);o({target:"Array",stat:!0,forced:!n(21385)((function(t){Array.from(t)}))},{from:e})},4115:function(t,r,n){"use strict";var o=n(76887),e=n(95329),i=n(24883),u=n(89678),c=n(10623),a=n(85803),f=n(95981),s=n(61388),p=n(34194),v=n(34342),l=n(81046),_=n(53385),h=n(18938),x=[],d=e(x.sort),y=e(x.push),g=f((function(){x.sort(void 0)})),b=f((function(){x.sort(null)})),w=p("sort"),m=!f((function(){if(_)return _<70;if(!(v&&v>3)){if(l)return!0;if(h)return h<603;var t,r,n,o,e="";for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)x.push({k:r+o,v:n})}for(x.sort((function(t,r){return r.v-t.v})),o=0;o<x.length;o++)r=x[o].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return"DGBEFHACIJK"!==e}}));o({target:"Array",proto:!0,forced:g||!b||!w||!m},{sort:function(t){void 0!==t&&i(t);var r=u(this);if(m)return void 0===t?d(r):d(r,t);var n,o,e=[],f=c(r);for(o=0;o<f;o++)o in r&&y(e,r[o]);for(s(e,function(t){return function(r,n){return void 0===n?-1:void 0===r?1:void 0!==t?+t(r,n)||0:a(r)>a(n)?1:-1}}(t)),n=e.length,o=0;o<n;)r[o]=e[o++];for(;o<f;)delete r[o++];return r}})},93925:function(t,r,n){"use strict";var o=n(76887),e=n(21899),i=n(59413),u=n(62435),c=n(10623),a=n(89678),f=n(64692),s=n(55449),p=n(50568)("splice"),v=e.TypeError,l=Math.max,_=Math.min,h=9007199254740991,x="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p},{splice:function(t,r){var n,o,e,p,d,y,g=a(this),b=c(g),w=i(t,b),m=arguments.length;if(0===m?n=o=0:1===m?(n=0,o=b-w):(n=m-2,o=_(l(u(r),0),b-w)),b+n-o>h)throw v(x);for(e=f(g,o),p=0;p<o;p++)(d=w+p)in g&&s(e,p,g[d]);if(e.length=o,n<o){for(p=w;p<b-o;p++)y=p+n,(d=p+o)in g?g[y]=g[d]:delete g[y];for(p=b;p>b-o+n;p--)delete g[p-1]}else if(n>o)for(p=b-o;p>w;p--)y=p+n-1,(d=p+o-1)in g?g[y]=g[d]:delete g[y];for(p=0;p<n;p++)g[p+w]=arguments[p+2];return g.length=b-o+n,e}})},49221:function(t,r,n){var o=n(76887),e=n(24420);o({target:"Object",stat:!0,forced:Object.assign!==e},{assign:e})},94761:function(t,r,n){"use strict";var o,e=n(76887),i=n(95329),u=n(49677).f,c=n(43057),a=n(85803),f=n(70344),s=n(48219),p=n(67772),v=n(82529),l=i("".startsWith),_=i("".slice),h=Math.min,x=p("startsWith");e({target:"String",proto:!0,forced:!!(v||x||(o=u(String.prototype,"startsWith"),!o||o.writable))&&!x},{startsWith:function(t){var r=a(s(this));f(t);var n=c(h(arguments.length>1?arguments[1]:void 0,r.length)),o=a(t);return l?l(r,o,n):_(r,n,n+o.length)===o}})},27698:function(t,r,n){var o=n(54493);t.exports=o},56243:function(t,r,n){var o=n(13830);n(7634),t.exports=o},62856:function(t,r,n){var o=n(69355);t.exports=o},2348:function(t,r,n){var o=n(18339);t.exports=o},35178:function(t,r,n){var o=n(71611);t.exports=o},63383:function(t,r,n){var o=n(45999);t.exports=o},96425:function(t,r,n){var o=n(3118),e=n(9435);function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}i.prototype=o(e.prototype),i.prototype.constructor=i,t.exports=i},7548:function(t,r,n){var o=n(3118),e=n(9435);function i(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}i.prototype=o(e.prototype),i.prototype.constructor=i,t.exports=i},78975:function(t,r,n){var o=n(47816);t.exports=function(t,r,n,e){return o(t,(function(t,o,i){r(e,n(t),o,i)})),e}},9435:function(t){t.exports=function(){}},48969:function(t,r,n){var o=n(29932);t.exports=function(t,r){return o(r,(function(r){return[r,t[r]]}))}},23468:function(t,r,n){var o=n(7548),e=n(99021),i=n(66833),u=n(97658),c=n(1469),a=n(86528);t.exports=function(t){return e((function(r){var n=r.length,e=n,f=o.prototype.thru;for(t&&r.reverse();e--;){var s=r[e];if("function"!=typeof s)throw new TypeError("Expected a function");if(f&&!p&&"wrapper"==u(s))var p=new o([],!0)}for(e=p?e:n;++e<n;){s=r[e];var v=u(s),l="wrapper"==v?i(s):void 0;p=l&&a(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?p[u(l[0])].apply(p,l[3]):1==s.length&&a(s)?p[v]():p.thru(s)}return function(){var t=arguments,o=t[0];if(p&&1==t.length&&c(o))return p.plant(o).value();for(var e=0,i=n?r[e].apply(this,t):o;++e<n;)i=r[e].call(this,i);return i}}))}},17779:function(t,r,n){var o=n(78975);t.exports=function(t,r){return function(n,e){return o(n,t,r(e),{})}}},13866:function(t,r,n){var o=n(48969),e=n(98882),i=n(68776),u=n(99294);t.exports=function(t){return function(r){var n=e(r);return"[object Map]"==n?i(r):"[object Set]"==n?u(r):o(r,t(r))}}},66833:function(t,r,n){var o=n(89250),e=n(50308),i=o?function(t){return o.get(t)}:e;t.exports=i},97658:function(t,r,n){var o=n(65081),e=Object.prototype.hasOwnProperty;t.exports=function(t){for(var r=t.name+"",n=o[r],i=e.call(o,r)?n.length:0;i--;){var u=n[i],c=u.func;if(null==c||c==t)return u.name}return r}},86528:function(t,r,n){var o=n(96425),e=n(66833),i=n(97658),u=n(8111);t.exports=function(t){var r=i(t),n=u[r];if("function"!=typeof n||!(r in o.prototype))return!1;if(t===n)return!0;var c=e(n);return!!c&&t===c[0]}},89250:function(t,r,n){var o=n(70577),e=o&&new o;t.exports=e},65081:function(t){t.exports={}},99294:function(t){t.exports=function(t){var r=-1,n=Array(t.size);return t.forEach((function(t){n[++r]=[t,t]})),n}},21913:function(t,r,n){var o=n(96425),e=n(7548),i=n(278);t.exports=function(t){if(t instanceof o)return t.clone();var r=new e(t.__wrapped__,t.__chain__);return r.__actions__=i(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}},47745:function(t,r,n){var o=n(23468)(!0);t.exports=o},63137:function(t,r,n){var o=n(75703),e=n(17779),i=n(6557),u=Object.prototype.toString,c=e((function(t,r,n){null!=r&&"function"!=typeof r.toString&&(r=u.call(r)),t[r]=n}),o(i));t.exports=c},93220:function(t,r,n){var o=n(13866)(n(3674));t.exports=o},8111:function(t,r,n){var o=n(96425),e=n(7548),i=n(9435),u=n(1469),c=n(37005),a=n(21913),f=Object.prototype.hasOwnProperty;function s(t){if(c(t)&&!u(t)&&!(t instanceof o)){if(t instanceof e)return t;if(f.call(t,"__wrapped__"))return a(t)}return new e(t)}s.prototype=i.prototype,s.prototype.constructor=s,t.exports=s},84406:function(t,r,n){"use strict";function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=t[n];return o}n.d(r,{Z:function(){return o}})},24713:function(t,r,n){"use strict";n.d(r,{Z:function(){return u}});var o=n(51446),e=n(19996),i=n(53592);function u(t){if(void 0!==o&&null!=e(t)||null!=t["@@iterator"])return i(t)}},79349:function(t,r,n){"use strict";n.d(r,{Z:function(){return c}});var o=n(78363),e=n(84406);var i=n(24713),u=n(71518);function c(t){return function(t){if(o(t))return(0,e.Z)(t)}(t)||(0,i.Z)(t)||(0,u.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},71518:function(t,r,n){"use strict";n.d(r,{Z:function(){return u}});var o=n(95238),e=n(53592),i=n(84406);function u(t,r){var n;if(t){if("string"==typeof t)return(0,i.Z)(t,r);var u=o(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===u&&t.constructor&&(u=t.constructor.name),"Map"===u||"Set"===u?e(t):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?(0,i.Z)(t,r):void 0}}}}]);
topicId:{type:Number,default:0}},data:function(){return{vote:this.data||{},optionLimit:4,showMore:!1,checkedIds:[]}},computed:v(v({},Object(r.b)("user",["isLogin"])),{},{user:function(){return this.$store.state.user.current},isPk:function(){return 0===this.vote.type},formatExpire:function(){return this.vote.expiredAt},disabledSbmt:function(){return this.checkedIds.length!==this.vote.voteNum||this.vote.expired||this.vote.voted}}),mounted:function(){},methods:{getCommonPercent:function(t){var e=0,n=0,o=!1;return t=t||0,(this.vote.options||[]).map((function(t){e+=(null==t?void 0:t.voteCount)||0})),(t||e)&&((n=(t/e*100).toFixed(0))<0&&(n=0),n>100&&(n=100),n>=100&&(o=!0)),{percent:n,isFull:o}},getPercent:function(t,e){var n=0,o=0,r="style"===e;return t=t||0,(this.vote.options||[]).map((function(t){n+=(null==t?void 0:t.voteCount)||0})),t||n?(o=(t/n*100).toFixed(0),r&&o<30&&(o=30),o<0&&(o=0),o>100&&(o=100)):o=r?50:0,this.vote.voted||(o=50),o},JMore:function(){this.showMore=!this.showMore},JVote:function(){var t=this;if(this.isLogin)return!this.vote.expired&&!this.vote.voted&&(this.checkedIds.length!==this.vote.voteNum?this.$message.error("请选择正确的选项"):void this.$axios.post(c.default.vote.vote,{voteId:this.vote.id||"",optionIds:this.checkedIds.join(",")}).then((function(){t.getTopicDetail()})).catch((function(){})));l.a.gotoLogin()},JCheck:function(t){if(this.vote.expired||this.vote.voted)return!1;if(t){if(0===this.vote.type)return this.checkedIds=[t],this.JVote(),!1;var e=this.checkedIds.indexOf(t);-1===e?1===this.vote.voteNum?this.checkedIds=[t]:this.checkedIds.length<this.vote.voteNum&&this.checkedIds.push(t):this.checkedIds.splice(e,1)}},getTopicDetail:function(){var t=this;if(!this.topicId)return!1;this.$axios.get(c.default.topic.topic.replace(/#{id}/gi,this.topicId)).then((function(data){data=data||{},t.vote=data.vote||{}})).catch((function(){}))}}},m=(n(751),n(134)),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return t.vote&&t.vote.title?e("div",{staticClass:"comVoteView",class:{VOTED:t.vote.voted,EXPIRED:t.vote.expired}},[t.isPk?t._e():e("div",{staticClass:"view-common"},[e("h5",{staticClass:"vc-title"},[e("span",{staticClass:"vc-tag"},[t._v("投票")]),e("span",{domProps:{innerHTML:t._s(t.xss(t.vote.title))}}),t._v("("+t._s(t.vote.options.length)+"选"+t._s(t.vote.voteNum)+")\n    ")]),t._v(" "),e("div",{staticClass:"vc-opts"},[e("ul",t._l(t.vote.options,(function(n,o){return e("li",{key:n.id,staticClass:"EASE",class:{none:o>t.optionLimit-1&&!t.showMore,disabled:t.vote.expired||t.vote.voted,chked:t.checkedIds.includes(n.id),voted:n.voted,highLight:!n.voted&&t.vote.expired},attrs:{title:t.xss(n.content)},on:{click:function(e){return t.JCheck(n.id)}}},[e("span",{staticClass:"opt-percent",class:{FULL:t.getCommonPercent(n.voteCount).isFull},style:{width:t.getCommonPercent(n.voteCount).percent+"%"}}),t._v(" "),e("span",{staticClass:"opt-txt",domProps:{innerHTML:t._s(t.xss(n.content))}}),t._v(" "),e("span",{staticClass:"opt-result"},[t._v(t._s(n.voteCount))])])})),0),t._v(" "),t.vote.options&&t.vote.options.length>t.optionLimit?e("span",{staticClass:"vc-more",on:{click:t.JMore}},[t._v(t._s(t.showMore?"收起选项":"展开查看更多选项"))]):t._e()]),t._v(" "),e("div",{staticClass:"vc-status"},[t._v("\n      "+t._s(t.vote.voteCount||0)+"人参与\n      "),t.vote.expired?e("span",{staticClass:"status-end"},[t._v("投票已截止")]):t._e(),t._v(" "),t.vote.expired?t._e():e("span",{staticClass:"status-end"},[t._v("截止时间:"+t._s(t._f("formatDate")(t.vote.expiredAt,"yyyy/MM/dd HH:mm:ss")))])]),t._v(" "),e("div",{staticClass:"vc-act"},[e("button",{staticClass:"btn-sbmt",attrs:{type:"button",disabled:t.disabledSbmt},on:{click:t.JVote}},[t._v("\n        "+t._s(t.vote.voted?"已投票":t.vote.expired?"投票结束":"投票")+"\n      ")])])]),t._v(" "),t.isPk?e("div",{staticClass:"view-pk"},[e("h5",{staticClass:"vc-title"},[e("span",{staticClass:"vc-tag"}),e("span",{domProps:{innerHTML:t._s(t.xss(t.vote.title))}})]),t._v(" "),e("div",{staticClass:"vc-opts"},[t._l(t.vote.options,(function(n,o){return[0===o?e("div",{key:n.id,class:"opt-item OPT"+o+(n.voted&&!t.vote.expired?" highLight":"")+(t.vote.expired||t.vote.voted?" disabled":""),style:{width:t.getPercent(n.voteCount,"style")+"%"},attrs:{title:t.xss(n.content)},on:{click:function(e){return t.JCheck(n.id)}}},[e("span",{staticClass:"opt-txt multiLineCut",domProps:{innerHTML:t._s(t.xss(n.content))}}),t._v(" "),e("div",{staticClass:"opt-result"},[t._v("\n            "+t._s(n.voteCount)+" ("+t._s(t.getPercent(n.voteCount))+"%)\n            "+t._s(n.voted?"  已投":"")+"\n          ")])]):t._e()]})),t._v(" "),e("i",{staticClass:"ic-pk-b"}),t._v(" "),t._l(t.vote.options,(function(n,o){return[1===o?e("div",{key:n.id,class:"opt-item OPT"+o+(n.voted&&!t.vote.expired?" highLight":"")+(t.vote.expired||t.vote.voted?" disabled":""),style:{width:t.getPercent(n.voteCount,"style")+"%"},attrs:{title:t.xss(n.content)},on:{click:function(e){return t.JCheck(n.id)}}},[e("span",{staticClass:"opt-txt multiLineCut",domProps:{innerHTML:t._s(t.xss(n.content))}}),t._v(" "),e("div",{staticClass:"opt-result"},[t._v("\n            "+t._s(n.voted?"已投  ":"")+"\n            "+t._s(n.voteCount)+" ("+t._s(t.getPercent(n.voteCount))+"%)\n          ")])]):t._e()]}))],2),t._v(" "),e("div",{staticClass:"vc-status"},[t._v("\n      "+t._s(t.vote.voteCount||0)+"人参与\n      "),t.vote.expired?e("span",{staticClass:"status-end"},[t._v("投票已截止")]):t._e(),t._v(" "),t.vote.expired?t._e():e("span",{staticClass:"status-end"},[t._v("截止时间:"+t._s(t._f("formatDate")(t.vote.expiredAt,"yyyy/MM/dd HH:mm:ss")))])])]):t._e()]):t._e()}),[],!1,null,null,null);e.default=component.exports},832:function(t,e,n){"use strict";n.r(e);n(43),n(59);var o=n(5),r=(n(44),n(19),n(40),n(106)),c=n(713),l=n(257),img=n(722),d={props:{topics:{type:Array,default:function(){return[]},required:!1},showAvatar:{type:Boolean,default:!0},sortType:{type:String,default:""},isNodeAdmin:{type:String,default:""},enablePicInPic:{type:Boolean,required:!0}},data:function(){return{thumbMax:6}},mounted:function(){Object(l.a)("content_default",{event:"show",page:c.h[this.$route.name]||this.$route.name||""})},methods:{JClickA:function(t){t.stopPropagation()},copyTopic:function(t){return t},goTopicDetail:function(t){this.collectContentClick("open",t),window.open("/topic/".concat(t.topicId),"_blank")},formatLevel:function(t){return t<10?"0"+t:t},getCoverImage:function(image){return"video"===image.img_type&&image.top_cate&&image.bg_title?"https://personal-act.wpscdn.cn/operations-fe/fe-static/img/learning-fe/cover/single_".concat(image.top_cate,".png"):this.getScaleImage(image.preview||image.url)},getScaleImage:function(t,e){return e?Object(img.a)(t,{w:120,h:120,m:1,c:1,F:"png"}):/https:\/\/wps-home\.wpscdn\.cn/.test(t)?"".concat(t,"@base@tag=imgScale&m=2&h=158&w=371&F=png"):t},like:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!t.liked){n.next=8;break}return n.next=4,e.$axios.post(r.default.topic.unlike.replace("#{id}",t.topicId));case 4:t.liked=!1,t.likeCount--,n.next=12;break;case 8:return n.next=10,e.$axios.post(r.default.topic.like.replace("#{id}",t.topicId));case 10:t.liked=!0,t.likeCount++;case 12:e.collectContentClick("like",t),Object(l.a)("like_default",{page:c.h[e.$route.name]||e.$route.name||"",button:t.liked?"cancel":"like",data1:t.topicId||"",data2:1===t.type?"QA":"post"}),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),1===n.t0.errorCode?e.$msgSignIn():e.$message.error(n.t0.message||n.t0||"点赞失败，请检查网络后再试");case 19:case"end":return n.stop()}}),n,null,[[0,16]])})))()},goTopicDetailComment:function(t,e){Object(l.a)("comment_default",{page:c.h[this.$route.name]||this.$route.name||"",button:"comment",data1:t.topicId||"",data2:1===t.type?"QA":"post"}),this.collectContentClick("comment",t),this.$linkTo("/topic/".concat(t.topicId,"/").concat(e||""))},collectContentClick:function(button,t){Object(l.a)("content_default",{page:c.h[this.$route.name]||this.$route.name||"",button:button||"",data1:t.topicId||"",data2:1===t.type?"QA":"post"})},handleClickImg:function(image,t){"video"===image.img_type&&image.video_url&&this.enablePicInPic?this.$emit("handleShowPicInPicVideo",image.video_url):this.goTopicDetail(t)},compTitle:function(text){return null==text?void 0:text.replace(/\x20/g,"<br>")}}},v=(n(907),n(134)),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("ul",{staticClass:"topic-list"},t._l(t.topics,(function(n){return e("li",{key:n.topicId,staticClass:"topic-item"},[e("div",{staticClass:"topic-main-content"},[e("div",{staticClass:"topic-top"},[e("a",{staticClass:"topic-userinfo",attrs:{href:"/user/".concat(n.user.id),target:"_blank"},on:{click:function(e){return t.collectContentClick("selfcenter",n)}}},[e("avatar",{staticClass:"topic-inline-avatar",attrs:{"hide-link":"",user:n.user,size:"38"}}),t._v(" "),e("div",{staticClass:"userinfo-out"},[e("span",{attrs:{href:"javascript:;"}},[t._v(t._s(n.user.nickname)),e("span",{class:"userBadge userBadge"+n.user.level}),n.user&&n.user.authDetail&&n.user.authDetail.authImg?e("img",{staticClass:"auth-vip userBadge",attrs:{src:n.user.authDetail.authImg}}):t._e(),t._l(n.user.medals,(function(t){return e("img",{key:t.icon,staticClass:"userBadge",attrs:{src:t.icon,alt:t.name,title:t.name}})}))],2),t._v(" "),n.user&&n.user.authDetail&&n.user.authDetail.title?e("p",{staticClass:"user-desc"},[t._v("\n              "+t._s(n.user.authDetail.title)+"\n            ")]):t._e()])],1),t._v(" "),e("div",{staticClass:"topic-header-right"},[e("user-entity-manage-menu",{attrs:{value:n,"is-node-admin":t.isNodeAdmin}}),t._v(" "),n.sticky?e("span",{staticClass:"topic-sticky-icon"},[t._v("置顶")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"topic-content",class:{"topic-tweet":1===n.type},on:{click:function(e){return t.goTopicDetail(n)}}},[0===n.type?[n.imageList&&n.imageList.length?e("div",{staticClass:"topic-image",on:{click:function(e){return e.stopPropagation(),t.handleClickImg(n.imageList[0],n)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"".concat(t.getCoverImage(n.imageList[0])),expression:"`${getCoverImage(topic.imageList[0])}`"}]}),t._v(" "),"video"===n.imageList[0].img_type&&n.imageList[0].top_cate&&n.imageList[0].bg_title?e("p",{staticClass:"video-title ellipsis",domProps:{innerHTML:t._s(t.xss(t.compTitle(n.imageList[0].bg_title)))}}):t._e(),t._v(" "),"video"===n.imageList[0].img_type?e("span",{staticClass:"video-icon"}):t._e(),t._v(" "),e("span",{staticClass:"gray"}),t._v(" "),n.imageList&&n.imageList.length&&n.imageList.length>1?e("span",{staticClass:"plus"},[t._v(t._s(n.imageList.length)+"+")]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"topic-text"},[e("div",{staticClass:"topic-text-top"},[e("h1",{staticClass:"topic-title multiLineCut"},[e("a",{attrs:{href:"/topic/"+n.topicId,target:"_blank"},on:{click:t.JClickA}},[t._v(t._s(n.title))])])]),t._v(" "),e("div",{staticClass:"topic-summary",attrs:{to:"/topic/"+n.topicId}},[t._v("\n              "+t._s(n.summary)+"\n            ")])])]:t._e(),t._v(" "),1===n.type?[n.imageList&&n.imageList.length?e("div",{staticClass:"topic-image",on:{click:function(e){return e.stopPropagation(),t.handleClickImg(n.imageList[0],n)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"".concat(t.getCoverImage(n.imageList[0])),expression:"`${getCoverImage(topic.imageList[0])}`"}]}),t._v(" "),"video"===n.imageList[0].img_type&&n.imageList[0].top_cate&&n.imageList[0].bg_title?e("p",{staticClass:"video-title ellipsis",domProps:{innerHTML:t._s(t.xss(t.compTitle(n.imageList[0].bg_title)))}}):t._e(),t._v(" "),"video"===n.imageList[0].img_type?e("span",{staticClass:"video-icon"}):t._e(),t._v(" "),e("span",{staticClass:"gray"}),t._v(" "),n.imageList&&n.imageList.length&&n.imageList.length>1?e("span",{staticClass:"plus"},[t._v(t._s(n.imageList.length)+"+")]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"topic-text"},[e("h1",{staticClass:"topic-title multiLineCut"},[e("i",{directives:[{name:"show",rawName:"v-show",value:1===n.type,expression:"topic.type === 1"}],staticClass:"icon-ask"}),t._v(" "),e("a",{attrs:{href:"/topic/"+n.topicId,target:"_blank"},on:{click:t.JClickA}},[t._v(t._s(n.title))])]),t._v(" "),e("a",{staticClass:"topic-summary",attrs:{href:"javascript:;"}},[t._v(t._s(n.summary||n.content))])])]:t._e()],2),t._v(" "),e("div",{staticClass:"topic-vote"},[e("VoteView",{attrs:{data:n.vote,"topic-id":n.topicId}})],1),t._v(" "),e("div",{staticClass:"topic-bottom"},[e("div",{staticClass:"topic-tags"},[n.node||n.nodeChild?e("a",{staticClass:"topic-tag",attrs:{href:"/topics/node/"+n.node.nodeId,target:"_blank",alt:n.node.name},on:{click:function(e){return t.collectContentClick("group",n)}}},[e("img",{directives:[{name:"show",rawName:"v-show",value:n.node.logo,expression:"topic.node.logo"}],staticClass:"icon-node",attrs:{src:n.node.logo,alt:n.node.name}}),t._v("\n            "+t._s(n.node.name))]):t._e(),t._v(" "),n.nodeChild?e("a",{staticClass:"topic-tag",attrs:{href:"/topics/node/".concat(n.node.nodeId,"?child=").concat(n.nodeChild.id),target:"_blank"},on:{click:function(e){return t.collectContentClick("subgroup",n)}}},[t._v(t._s(n.nodeChild.name))]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.tags&&n.tags.length,expression:"topic.tags && topic.tags.length"}],staticClass:"topic-labels"},t._l(n.tags,(function(o,r){return e("a",{key:o.tagId,staticClass:"topic-label",class:{none:r>2},attrs:{href:"/topics/tag/"+o.tagId,target:"_blank"},on:{click:function(e){return t.collectContentClick("label",n)}}},[t._v("#"),e("span",[t._v(t._s(o.tagName))])])})),0),t._v(" "),e("time",{staticClass:"topic-meta",attrs:{datetime:t._f("formatDate")(n.createTime,"yyyy-MM-ddTHH:mm:ss")}},[t._v(t._s(t._f("prettyDate")(1==t.sortType?n.lastCommentTime:n.createTime)))]),t._v(" "),e("div",{staticClass:"topic-handlers"},[e("div",{staticClass:"btn EASE",class:{liked:n.liked},on:{click:function(e){return t.like(n)}}},[e("i",{staticClass:"icon-fav"}),t._v(" "),n.likeCount>0?e("span",[t._v(t._s(n.likeCount))]):t._e()]),t._v(" "),e("div",{staticClass:"btn EASE",on:{click:function(e){return t.goTopicDetailComment(n,"#comment")}}},[e("i",{staticClass:"icon-cmmt"}),t._v(" "),n.commentCount>0?e("span",[t._v(t._s(n.commentCount))]):t._e()])])]),t._v(" "),n.stampList&&n.stampList.length?e("div",{staticClass:"stampList"},t._l(n.stampList,(function(t){return e("img",{key:t.imageUrl,attrs:{src:t.imageUrl}})})),0):t._e()])])})),0)}),[],!1,null,"596813e4",null);e.default=component.exports;installComponents(component,{Avatar:n(721).default,UserEntityManageMenu:n(740).default,VoteView:n(756).default})},872:function(t,e,n){},907:function(t,e,n){"use strict";n(872)}}]);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          revert(r)},le.prototype.toString=function(b){if(this.s<0)return"-"+this.negate().toString(b);var t;if(16==b)t=4;else if(8==b)t=3;else if(2==b)t=1;else if(32==b)t=5;else{if(4!=b)return this.toRadix(b);t=2}var e,r=(1<<t)-1,n=!1,o="",i=this.t,p=this.DB-i*this.DB%t;if(i-- >0)for(p<this.DB&&(e=this[i]>>p)>0&&(n=!0,o=ge(e));i>=0;)p<t?(e=(this[i]&(1<<p)-1)<<t-p,e|=this[--i]>>(p+=this.DB-t)):(e=this[i]>>(p-=t)&r,p<=0&&(p+=this.DB,--i)),e>0&&(n=!0),n&&(o+=ge(e));return n?o:"0"},le.prototype.negate=function(){var t=he();return le.ZERO.subTo(this,t),t},le.prototype.abs=function(){return this.s<0?this.negate():this},le.prototype.compareTo=function(a){var t=this.s-a.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-a.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-a[i]))return t;return 0},le.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+we(this[this.t-1]^this.s&this.DM)},le.prototype.mod=function(a){var t=he();return this.abs().divRemTo(a,null,t),this.s<0&&t.compareTo(le.ZERO)>0&&a.subTo(t,t),t},le.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new be(e):new De(e),this.exp(t,r)},le.ZERO=_e(0),le.ONE=_e(1),Ee.prototype.init=function(t){var i,e,r;for(i=0;i<256;++i)this.S[i]=i;for(e=0,i=0;i<256;++i)e=e+this.S[i]+t[i%t.length]&255,r=this.S[i],this.S[i]=this.S[e],this.S[e]=r;this.i=0,this.j=0},Ee.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var Se,Pe,Te,Ae=256;function Be(){var t;t=(new Date).getTime(),Pe[Te++]^=255&t,Pe[Te++]^=t>>8&255,Pe[Te++]^=t>>16&255,Pe[Te++]^=t>>24&255,Te>=Ae&&(Te-=Ae)}if(null==Pe){Pe=new Array,Te=0;var Oe=void 0;if(window.crypto&&window.crypto.getRandomValues){var xe=new Uint8Array(32);for(window.crypto.getRandomValues(xe),Oe=0;Oe<32;++Oe)Pe[Te++]=xe[Oe]}if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto&&window.crypto.random){var Ce=window.crypto.random(32);for(Oe=0;Oe<Ce.length;++Oe)Pe[Te++]=255&Ce.charCodeAt(Oe)}for(;Te<Ae;)Oe=Math.floor(65536*Math.random()),Pe[Te++]=Oe>>>8,Pe[Te++]=255&Oe;Te=0,Be()}function Re(){if(null==Se){for(Be(),(Se=new Ee).init(Pe),Te=0;Te<Pe.length;++Te)Pe[Te]=0;Te=0}return Se.next()}function Ie(){}function ke(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}Ie.prototype.nextBytes=function(t){var i;for(i=0;i<t.length;++i)t[i]=Re()},ke.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},ke.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=new le(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")},ke.prototype.encrypt=function(text){var t=function(s,t){if(t<s.length+11)return alert("Message too long for RSA"),null;for(var e=new Array,i=s.length-1;i>=0&&t>0;){var r=s.charCodeAt(i--);r<128?e[--t]=r:r>127&&r<2048?(e[--t]=63&r|128,e[--t]=r>>6|192):(e[--t]=63&r|128,e[--t]=r>>6&63|128,e[--t]=r>>12|224)}e[--t]=0;for(var n=new Ie,o=new Array;t>2;){for(o[0]=0;0==o[0];)n.nextBytes(o);e[--t]=o[0]}return e[--t]=2,e[--t]=0,new le(e)}(text,this.n.bitLength()+7>>3);if(null==t)return null;var e=this.doPublic(t);if(null==e)return null;var r=e.toString(16);return 0==(1&r.length)?r:"0"+r};var Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";de.hex2b64=function(t){var i,e,r="";for(i=0;i+3<=t.length;i+=3)e=parseInt(t.substring(i,i+3),16),r+=Me.charAt(e>>6)+Me.charAt(63&e);for(i+1==t.length?(e=parseInt(t.substring(i,i+1),16),r+=Me.charAt(e<<2)):i+2==t.length&&(e=parseInt(t.substring(i,i+2),16),r+=Me.charAt(e>>2)+Me.charAt((3&e)<<4));(3&r.length)>0;)r+="=";return r},de.linebrk=function(s,t){for(var e="",i=0;i+t<s.length;)e+=s.substring(i,i+t),i+=t;return e+s.substring(i,s.length)},de.default=ke;var je={};Object.defineProperty(je,"__esModule",{value:!0}),je.generateRandomString=void 0,je.generateRandomString=function(t){void 0===t&&(t=32);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r="",i=0;i<t;i++)r+=e.charAt(Math.floor(52*Math.random()));return r},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.webEncrypt=t.rsaEncrypt=t.aesEncrypt=void 0;var e=w,r=e.__importStar(Ut),n=e.__importStar(de),o=je,c=Ut;function d(t,content){if(n.default&&n.linebrk&&n.hex2b64){var e=0,r=function(t,content){var o=new n.default;o.setPublic(t,"10001");var c=o.encrypt(content);return 344!==(c=n.linebrk(n.hex2b64(c),64)).length&&e<10&&(e++,c=r(t,content)),e=0,c};return r(t,content)}return content}function l(t,e,n){for(var c=Object.assign({},t),l=o.generateRandomString(16),i=0,h=e.length;i<h;i++){var f=e[i],v=c[f];null!=v&&(c[f]=r.aesEncrypt(l,String(v)))}return{encryptedData:c,encryptedKey:d(n,l)}}Object.defineProperty(t,"aesEncrypt",{enumerable:!0,get:function(){return c.aesEncrypt}}),t.rsaEncrypt=d,t.webEncrypt=l;var h={install:function(t,e){t.appendPreBind({name:"plugin-encrypt-web",event:"event-data-encrypt",callback:function(t){var r,n,o,c=t.dwEvent,d=t.dwProcess;c.validate();var h=d.dwConfig.getAll();if((h.dbg||h.debugMode)&&h.noEncrypted)c.dataEncrypted=c.data;else{var f,data=null!==(o=null===(n=null===(r=d.dynamicData)||void 0===r?void 0:r.events)||void 0===n?void 0:n.data)&&void 0!==o?o:[];if("_page_view"===c.name)f=["title","url","refer"];else for(var i=0;i<data.length;i++){var v=data[i];if(v.name===c.name){v.encryptAttrs&&(f=v.encryptAttrs);break}}if(f&&c.data){var y=l(c.data,f,e.rsaKey),m=y.encryptedData,_=y.encryptedKey;if(_){var w={_encrypted_key:_,_encrypted_version:"20160113",_encrypted_fields:f.join(",")};Object.assign(m,w)}c.dataEncrypted=m}}}}),r.default.install(t,{aesKey:e.aesKey})}};t.default=h}(Kt);var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.default={install:function(t,e){var r=0,n=e.max;t.appendPreBind({name:"send-in-limit-connect-before-event",event:"before-event-send",callback:function(t){var e=t.dwEvent;e.isPostStopped()||(r>=n?e.saveWait().stopPost():r++)}}),t.appendPreBind({name:"send-in-limit-connect-after-event",event:"after-event-send",callback:function(t){t.dwProcess,r>0&&r--}}),t.appendPreBind({name:"send-in-limit-connect-before-dynamic",event:"before-dynamic-send",callback:function(t){var e=t.dwDynamic;e.isPostStopped()||(r>=n?(e.retry(),e.stopPost()):r++)}}),t.appendPreBind({name:"send-in-limit-connect-after-dynamic",event:"after-dynamic-send",callback:function(){r>0&&r--}})}};var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});var Le={install:function(t,e){var r=null!=e?e:{},n=r.debounce,o=void 0===n?0:n,c=r.throttle,d=void 0===c?0:c,l=r.ignoreEventNames,h=void 0===l?[]:l;t.appendPreBind({name:"plugin-send-in-throttle",event:"before-event-send",callback:function(t){var e=t.dwEvent,r=t.dwProcess;r.cache.others.throttle||(r.cache.others.throttle={first:!1,debounceTimer:null,throttleTimer:null});var n=r.dwService,c=r.cache.others.throttle;if(!e.isPostStopped()&&"wait"!==e.from&&!h.includes(e.name)){var l=function(){c.first=!1,clearTimeout(c.debounceTimer),clearTimeout(c.throttleTimer),c.debounceTimer=null,c.throttleTimer=null,n.sendWaitEvents(r)};o>0&&(e.saveWait().stopPost(),clearTimeout(c.debounceTimer),c.debounceTimer=setTimeout(l,o)),d>0&&(c.first||(c.first=!0,clearTimeout(c.throttleTimer),c.throttleTimer=setTimeout(l,d)))}}})}};Fe.default=Le,Object.defineProperty(c,"__esModule",{value:!0}),c.WebReporter=void 0;var Ne=w,Ve=Ne.__importDefault(D.exports),ze=Ne.__importDefault(E),He=S,Ke=xt,Ue=Wt,qe=zt,Je=Ne.__importDefault(Kt),Ge=Ne.__importDefault(We),Xe=Ne.__importDefault(Fe),Ze=F;He.Reporter.adapters.http=new Ke.HttpAdapterWeb,He.Reporter.adapters.osInfo=new Ue.OSInfoAdapterWeb,He.Reporter.adapters.storage=new qe.StorageAdapterWeb,He.Reporter.defaults={dynamicUrl:"https://dw-online.ksosoft.com",sendUrl:"(https://shuc-js.ksord.com/bat/js/cors)",debugUrl:"(https://dw-collect-debug.ksord.com)",handleAppEnd:function(t,e){if(!e.fresh){var r=t.dwStorage,n=function(){if("function"==typeof navigator.sendBeacon){var e=t.generateAppEndEvent();if("boolean"==typeof navigator.onLine&&!navigator.onLine)return e.saveFail(),void r.fail.sync();var n=Ve.default.encode(ze.default.encode(JSON.stringify(e.eventBody))),o=new Blob([n],{type:"application/x-www-form-urlencoded"}),c=e.urlsParsed[0];t.isDebug()&&(console.log("beacon url",c),console.log("beacon body",JSON.stringify(e.eventBody))),navigator.sendBeacon("string"==typeof c?c:c[0],o)}else console.log('[dw-js-sdk] "sendBeacon" is not supported, use normal method to send app_end.'),t.sendAppEnd()};"onbeforeunload"in window?window.addEventListener("beforeunload",n,!1):window.addEventListener("pagehide",n,!1)}}},He.Reporter.use(Je.default,{aesKey:"ZctYg7JjXcPySXxw",rsaKey:"8762DEC337D703A5841A8090180350203AC0C2809A864BF6CA31979FCD7AA3D1BFA38CF8B243878984CBC9B83496CBAC87B448F74EA7550D579BD5820EFD17F5D22D0665AB114FB6EBA74261B4EB040828FBCA7CF95EF0D56BBFD9C67E5941AFFB34DE4C6FA2E737C16D9C703A43D90F65B40E7F3E44C1165C1ED3BD10BC449421863174E8EFA3CA618E0DEE7EDD65F07AAE0586AB1702B1D95F29F3BA447AD744E9B37ACB3F510D068A2D6BDBE4F0689B26A9AFCF66219160E7CF802D2F1A56503F462693B62747AD4163DBC1222687D154C53C03BBB5D2DE9ABC2DE6907E3B26E45C4FCA63F28258C4D07D3E152AE51F80A0DA7B77A3E1D0EFE72A988B57F9"}),He.Reporter.use(Xe.default,{debounce:parseInt("300"),throttle:parseInt("5000"),ignoreEventNames:["_app_end"]}),He.Reporter.use(Ge.default,{max:3});var Ye=function(t){function e(e){void 0===e&&(e={});var r=t.call(this,e)||this;r.options=e;var n=new Date;return r._lastFreshDate=[n.getFullYear(),n.getMonth()+1,n.getDate()],r}return Ne.__extends(e,t),e.prototype.createReporter=function(t,r){if(!t)throw Error("createReporter requires param appKey.");return new e(r).setAppKey(t)},e.prototype.setDailyFresh=function(time){var t=this;void 0===time&&(time="00:15");var e=time.match(/(\d?\d):(\d?\d)/),r="请设置正确的时间格式 hh:mm";if(!e)throw Error(r);var n=parseInt(e[1]),o=parseInt(e[2]);if(n>24||o>60)throw Error(r);var c=this.dwProcess.getRemoteDate();if(Ze.DWProcess.printLog("WebReporter","setDailyFresh",time),c){var d=new Date(c),l=parseInt("21600000 # 6小时");d.setHours(n),d.setMinutes(o),d.setSeconds(0,0),d.setTime(d.getTime()+Math.random()*l);var sub=d.getTime()-c.getTime(),h=864e5,f=sub>0?sub:sub+h,v=function(){t.dwProcess.refresh(),t._dailyRefreshTimer=setTimeout(v,h)};clearTimeout(this._dailyRefreshTimer),this._dailyRefreshTimer=setTimeout(v,f)}else setTimeout((function(){return t.setDailyFresh(time)}),6e4);return this},e.prototype.forceFresh=function(){var t=new Date,e=[t.getFullYear(),t.getMonth()+1,t.getDate()],r=function(t,e,r){var n=e;return 1===r&&(n*=100),t+n};e.reduce(r)-this._lastFreshDate.reduce(r)<=0?Ze.DWProcess.printLog("WebReporter","forceFresh","fail: same date",{currentDate:e.join("-"),lastFreshDate:this._lastFreshDate.join("-")}):(Ze.DWProcess.printLog("WebReporter","forceFresh","success",{currentDate:e.join("-"),lastFreshDate:this._lastFreshDate.join("-")},!0),this.dwProcess.refresh(!0),this._lastFreshDate=e)},e}(He.Reporter);return c.WebReporter=Ye,c.default=Ye,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.dw=void 0;var e=o,r=c;t.dw=function(){var t=window;if(void 0===t._dw)t._dw=t.dw=new r.WebReporter({});else{if(console.group("[dw-js-sdk] warn"),void 0===t._dw.version)return console.warn("[dw-js-sdk] 检测到您已引入旧版sdk, 请升级您的版本至v3.0.27或以上"),new r.WebReporter({});switch(e.compareVersion(t._dw.version)){case-1:console.log("[dw-js-sdk] 检测到新的版本, 请升级您的sdk");break;case 1:console.log("[dw-js-sdk] 检测到当前环境存在旧版本的sdk!")}console.log("[dw-js-sdk] (1/3) 当前环境已存在统计工具 window._dw"),console.log("[dw-js-sdk] (2/3) 可能的原因是存在重复引入 sdk 文件"),console.log('[dw-js-sdk] (3/3) 请使用 window._dw.createReporter("your-app-key") 创建一个新的统计工具'),console.groupEnd()}return t._dw}(),t.default=t.dw}(n),t(n)},t.exports=r()}).call(this,r(31))}}]);