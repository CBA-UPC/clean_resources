"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[89658],{152403:(e,t,o)=>{o.d(t,{Icon20VerifiedBadgeAltDark:()=>i});var i=(0,o(28178).makeIcon)("Icon20VerifiedBadgeAltDark","verified_badge_alt_dark_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="verified_badge_alt_dark_20"><path fill="#529EF4" d="M8.248 2.87a2.198 2.198 0 0 1 3.504 0c.48.633 1.264.958 2.05.85a2.198 2.198 0 0 1 2.478 2.477 2.198 2.198 0 0 0 .85 2.051 2.198 2.198 0 0 1 0 3.504 2.198 2.198 0 0 0-.85 2.05 2.198 2.198 0 0 1-2.477 2.478 2.198 2.198 0 0 0-2.051.85 2.198 2.198 0 0 1-3.504 0 2.198 2.198 0 0 0-2.05-.85 2.198 2.198 0 0 1-2.478-2.477 2.198 2.198 0 0 0-.85-2.051 2.198 2.198 0 0 1 0-3.504c.633-.48.958-1.264.85-2.05A2.198 2.198 0 0 1 6.197 3.72a2.198 2.198 0 0 0 2.051-.85z" /><path fill="#fff" fill-rule="evenodd" d="M13.765 7.205a.75.75 0 0 1 .03 1.06l-4.25 4.5a.75.75 0 0 1-1.047.042l-2.25-2.025A.75.75 0 0 1 7.25 9.667l1.706 1.536 3.748-3.968a.75.75 0 0 1 1.06-.03z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},42939:(e,t,o)=>{o.d(t,{Icon24VerifiedBadgeAltShadowDark:()=>i});var i=(0,o(28178).makeIcon)("Icon24VerifiedBadgeAltShadowDark","verified_badge_alt_shadow_dark_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="verified_badge_alt_shadow_dark_24"><path fill="#529EF4" d="M10.248 4.87a2.198 2.198 0 0 1 3.504 0c.48.633 1.264.958 2.05.85a2.198 2.198 0 0 1 2.478 2.477 2.198 2.198 0 0 0 .85 2.051 2.198 2.198 0 0 1 0 3.504 2.198 2.198 0 0 0-.85 2.05 2.198 2.198 0 0 1-2.477 2.478 2.198 2.198 0 0 0-2.051.85 2.198 2.198 0 0 1-3.504 0 2.198 2.198 0 0 0-2.05-.85 2.198 2.198 0 0 1-2.478-2.477 2.198 2.198 0 0 0-.85-2.051 2.198 2.198 0 0 1 0-3.504c.633-.48.958-1.264.85-2.05A2.198 2.198 0 0 1 8.197 5.72a2.198 2.198 0 0 0 2.051-.85z" filter="url(#verified_badge_alt_shadow_dark_24_a)" /><path fill="#fff" fill-rule="evenodd" d="M15.765 9.205a.75.75 0 0 1 .03 1.06l-4.25 4.5a.75.75 0 0 1-1.047.042l-2.25-2.025a.75.75 0 0 1 1.003-1.115l1.707 1.536 3.747-3.968a.75.75 0 0 1 1.06-.03z" clip-rule="evenodd" /><defs><filter id="verified_badge_alt_shadow_dark_24_a" width="22" height="22" x="1" y="2" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="1.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_43255_15364"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation=".5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"></feColorMatrix><feBlend in2="effect1_dropShadow_43255_15364" result="effect2_dropShadow_43255_15364"></feBlend><feBlend in="SourceGraphic" in2="effect2_dropShadow_43255_15364" result="shape"></feBlend></filter></defs></symbol>',24,24,!1,void 0)},664158:(e,t,o)=>{o.d(t,{Icon12FireVerified:()=>i});var i=(0,o(28178).makeIcon)("Icon12FireVerified","fire_verified_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="fire_verified_12"><path fill="currentColor" d="m6.192.5.053.005a.19.19 0 0 1 .142.224l-.029.108a.7.7 0 0 1-.07.161c-1.417 2.186-.795 3.5.16 3.642.988.146 1.71-.516 1.555-1.944l-.066-.622a.172.172 0 0 1 .266-.162L8.326 2q.442.334 1.03 1.066C10.828 4.904 10.99 6.464 11 7.253v.174c-.032 2.561-1.929 4.323-4.5 4.323S2 9.99 2 7.427c.011-1.94.991-4.67 3.696-6.6l.397-.29a.19.19 0 0 1 .152-.032zM8.379 5.38 5.75 8.008l-1.129-1.13a.525.525 0 1 0-.742.743l1.5 1.5a.525.525 0 0 0 .742 0l3-3a.525.525 0 1 0-.742-.742" /></symbol>',12,12,!1,void 0)},354768:(e,t,o)=>{o.d(t,{Icon12Verified:()=>i});var i=(0,o(28178).makeIcon)("Icon12Verified","verified_12","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="verified_12"><path fill="currentColor" d="M4.5 9.586 2.957 8.043a1 1 0 0 0-1.414 1.414l2.25 2.25a1 1 0 0 0 1.414 0l5.25-5.25a1 1 0 0 0-1.414-1.414z" /></symbol>',16,16,!1,void 0)},674056:(e,t,o)=>{o.d(t,{Icon16FireVerified:()=>i});var i=(0,o(28178).makeIcon)("Icon16FireVerified","fire_verified_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="fire_verified_16"><path fill="currentColor" d="m7.607 0 .054.006a.25.25 0 0 1 .189.299l-.029.11a1 1 0 0 1-.104.25C5.829 3.578 6.657 5.33 7.93 5.52c1.316.194 2.28-.688 2.074-2.592l-.09-.829a.23.23 0 0 1 .356-.216l.146.103q.595.444 1.39 1.435c1.985 2.476 2.186 4.574 2.194 5.614l-.001.2C13.957 12.651 11.429 15 8 15s-6-2.349-6-5.765C2.015 6.65 3.322 3.01 6.928.435Q7.13.291 7.457.05A.25.25 0 0 1 7.66.006zm2.898 6.505L7 10.01 5.495 8.505a.7.7 0 1 0-.99.99l2 2a.7.7 0 0 0 .99 0l4-4a.7.7 0 0 0-.99-.99" /></symbol>',16,16,!1,void 0)},789862:(e,t,o)=>{o.d(t,{Icon16LockOutline:()=>i});var i=(0,o(28178).makeIcon)("Icon16LockOutline","lock_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="lock_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M2 10c0-1.4 0-2.1.273-2.635a2.5 2.5 0 0 1 1.092-1.093c.297-.15.645-.218 1.135-.248V4.5a3.5 3.5 0 1 1 7 0v1.524c.49.03.838.097 1.135.249a2.5 2.5 0 0 1 1.093 1.092C14 7.9 14 8.6 14 10v1c0 1.4 0 2.1-.272 2.635a2.5 2.5 0 0 1-1.093 1.093C12.1 15 11.4 15 10 15H6c-1.4 0-2.1 0-2.635-.272a2.5 2.5 0 0 1-1.092-1.093C2 13.1 2 12.4 2 11zm8-2.5H6c-.725 0-1.178.001-1.52.029-.324.027-.413.07-.434.08a1 1 0 0 0-.437.437c-.01.02-.053.11-.08.434-.028.342-.029.795-.029 1.52v1c0 .725.001 1.178.029 1.52.027.324.07.413.08.434a1 1 0 0 0 .437.437c.02.01.11.053.434.08.342.028.795.029 1.52.029h4c.725 0 1.178-.001 1.52-.03.324-.026.413-.069.434-.079a1 1 0 0 0 .437-.437c.01-.02.053-.11.08-.434.028-.342.029-.795.029-1.52v-1c0-.725-.001-1.178-.03-1.52-.026-.324-.069-.413-.079-.434a1 1 0 0 0-.437-.437c-.02-.01-.11-.053-.434-.08-.342-.028-.795-.029-1.52-.029M10 6H6V4.5a2 2 0 1 1 4 0z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},96715:(e,t,o)=>{o.d(t,{Icon16Verified:()=>i});var i=(0,o(28178).makeIcon)("Icon16Verified","verified_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="verified_16"><path fill="currentColor" d="M4.5 9.586 2.957 8.043a1 1 0 0 0-1.414 1.414l2.25 2.25a1 1 0 0 0 1.414 0l5.25-5.25a1 1 0 0 0-1.414-1.414z" /></symbol>',16,16,!1,void 0)},36193:(e,t,o)=>{o.d(t,{Icon20Add:()=>i});var i=(0,o(28178).makeIcon)("Icon20Add","add_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="add_20"><path fill-rule="evenodd" d="M10 3a.75.75 0 0 1 .75.75v5.5h5.5a.75.75 0 0 1 0 1.5h-5.5v5.5a.75.75 0 0 1-1.5 0v-5.5h-5.5a.75.75 0 0 1 0-1.5h5.5v-5.5A.75.75 0 0 1 10 3" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},445264:(e,t,o)=>{o.d(t,{Icon20CheckAlt:()=>i});var i=(0,o(28178).makeIcon)("Icon20CheckAlt","check_alt_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="check_alt_20"><path fill-rule="evenodd" d="M16.659 5.344a1.16 1.16 0 0 1 0 1.645L8.82 14.812a1.167 1.167 0 0 1-1.649 0l-3.83-3.823a1.16 1.16 0 0 1 0-1.646 1.167 1.167 0 0 1 1.648 0l3.007 3 7.013-7a1.167 1.167 0 0 1 1.649 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},29157:(e,t,o)=>{o.d(t,{Icon20CheckCircleOff:()=>i});var i=(0,o(28178).makeIcon)("Icon20CheckCircleOff","check_circle_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" viewBox="0 0 20 20" id="check_circle_off_20"><defs><path id="check_circle_off_20_a" fill="currentColor" fill-rule="evenodd" d="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10m0-1a9 9 0 1 0 0-18 9 9 0 0 0 0 18" clip-rule="evenodd" /></defs><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},536426:(e,t,o)=>{o.d(t,{Icon20ListAddOutline:()=>i});var i=(0,o(28178).makeIcon)("Icon20ListAddOutline","list_add_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="list_add_outline_20"><g fill="currentColor"><path d="M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75M2 9.75A.75.75 0 0 1 2.75 9h12.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75M2 14.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75" /><path fill-rule="evenodd" d="M19.28 12.22a.75.75 0 0 1 0 1.06l-4.495 4.496a.75.75 0 0 1-1.06 0l-2.503-2.495a.75.75 0 0 1 1.06-1.062l1.972 1.966 3.966-3.965a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></g></symbol>',20,20,!1,void 0)},28919:(e,t,o)=>{o.d(t,{Icon20Verified:()=>i});var i=(0,o(28178).makeIcon)("Icon20Verified","verified_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="verified_20"><path d="m5.625 11.982-1.929-1.928A1.25 1.25 0 0 0 1.93 11.82l2.812 2.813a1.25 1.25 0 0 0 1.768 0l6.56-6.563a1.25 1.25 0 0 0-1.767-1.767z" /></symbol>',20,20,!1,void 0)},78818:(e,t,o)=>{o.d(t,{Icon24CommentOutline:()=>i});var i=(0,o(28178).makeIcon)("Icon24CommentOutline","comment_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="comment_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M16.895 4h-9.79c-1.152 0-1.74.113-2.35.44A3.17 3.17 0 0 0 3.44 5.755c-.327.61-.44 1.198-.44 2.35v5.79c0 1.152.113 1.74.44 2.35.302.565.75 1.013 1.315 1.315l.14.071c.517.25 1.05.352 1.954.367L7.1 18v2.215c0 .432.17.846.472 1.155l.116.108a1.65 1.65 0 0 0 2.217-.085L13.366 18h3.53c1.151 0 1.738-.113 2.35-.44a3.17 3.17 0 0 0 1.314-1.315c.327-.61.44-1.198.44-2.35v-5.79c0-1.152-.113-1.74-.44-2.35a3.17 3.17 0 0 0-1.315-1.315c-.61-.327-1.198-.44-2.35-.44M6.912 5.801l9.983-.001c.88 0 1.187.06 1.502.228q.375.2.575.575c.169.315.228.622.228 1.502v5.79l-.004.368c-.017.607-.081.867-.224 1.134q-.2.375-.575.575c-.315.169-.622.228-1.502.228H13l-.117.008a.9.9 0 0 0-.513.25L8.9 19.856V17.1a.9.9 0 0 0-.9-.9h-.895l-.368-.004c-.607-.017-.867-.081-1.134-.224a1.37 1.37 0 0 1-.575-.575c-.169-.315-.228-.622-.228-1.502v-5.79l.004-.368c.017-.607.081-.867.224-1.134q.2-.375.575-.575c.291-.156.574-.218 1.309-.227" /></g></symbol>',24,24,!1,void 0)},647643:(e,t,o)=>{o.d(t,{Icon24SortOutline:()=>i});var i=(0,o(28178).makeIcon)("Icon24SortOutline","sort_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="sort_outline_24"><g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M16.6 18.38a.9.9 0 0 1-.9-.9V9.034l-2.064 2.064a.9.9 0 0 1-1.272-1.273l3.529-3.53a1 1 0 0 1 1.414 0l3.53 3.53a.9.9 0 0 1-1.273 1.273L17.5 9.034v8.446a.9.9 0 0 1-.9.9M6.6 17.1V6.882a.9.9 0 0 1 1.8 0V17.1a.9.9 0 1 1-1.8 0" /><path d="M11.736 13.264a.9.9 0 0 1 0 1.272l-3.529 3.53a1 1 0 0 1-1.414 0l-3.53-3.53a.9.9 0 0 1 1.273-1.272L7.5 16.227l2.964-2.963a.9.9 0 0 1 1.272 0" /></g></symbol>',24,24,!1,void 0)},49961},911099:(e,t,o)=>{Object.defineProperty(t,"classNames",{enumerable:!0,ge}});var i=o(74185}},25728},69158},888410:(e,t,o)=>{o.d(t,{default:()=>i});const i={button:"VideoActionButton-module__button--yeFmE",buttonIcon:"VideoActionButton-module__buttonIcon--CKZ8l",buttonSelected:"VideoActionButton-module__buttonSelected--Kkldl"}},62304},948260:(e,t,o)=>{o.d(t,{audioShowActionTooltip:()=>m,bookmarkTooltip:()=>f,mentionOver:()=>v,mobileOnlineTip:()=>c,pageVerifiedTip:()=>u});var i=o(29244),n=o(135266),r=o(912766),d=o(538248),l=o(414126),a=o(251923),s=o(11064467449:(e,t,o)=>{o.d(t,{useExternRef:()=>n});var i=o(667294}},71127==(t=e)?void 0:t.type,d]),[d,(0,i.isValidElement)(e)?(0,i.cloneElement)(e,{[r(e)?"ref":"getRootRef"]:d}):e]}},548009:(e,t,o)=>{o.d(t,{createVideoAddAlbumFx:()=>E,createVideoAddToAlbumFx:()=>u,createVideoCreateCommentFx:()=>b,createVideoDeleteAlbumFx:()=>f,createVideoDeleteCommentFx:()=>g,createVideoDeleteFx:()=>V,createVideoEditAlbumFx:()=>A,createVideoEditCommentFx:()=>w,createVideoFeedVideosForYouBlockItemsFx:()=>s,createVideoGetAlbumByIdFx:()=>r,createVideoGetAlbumsByVideoFx:()=>v,createVideoGetAlbumsExtendedFx:()=>c,createVideoGetBlockItemsFx:()=>d,createVideoGetCommentsExtendedFx:()=>_,createVideoGetFx:()=>n,createVideoGetGroupsForStreamingFx:()=>p,createVideoGetVideoDiscoverFx:()=>y,createVideoPinVideoFx:()=>P,createVideoRemoveFromAlbumFx:()=>m,createVideoReorderVideosFx:()=>I,createVideoRestoreCommentFx:()=>h,createVideoRestoreFx:()=>x,createVideoSubscribeToAlbum:()=>l,createVideoUnpinVideoFx:()=>C,createVideoUnsubscribeFromAlbum:()=>a});var i=o(963632);const n=e=>(0,i.createApiEffect)("video.get",e),r=e=>(0,i.createApiEffect)("video.getAlbumById",e),d=e=>(0,i.createApiEffect)("video.getCatalogBlockItems",e),l=e=>(0,i.createApiEffect)("video.subscribeToAlbum",e),a=e=>(0,i.createApiEffect)("video.unsubscribeFromAlbum",e),s=e=>(0,i.createApiEffect)("video.feedVideosForYouBlockItems",e),c=e=>(0,i.createApiEffect)("video.getAlbums",e),u=e=>(0,i.createApiEffect)("video.addToAlbum",e),m=e=>(0,i.createApiEffect)("video.removeFromAlbum",e),v=e=>(0,i.createApiEffect)("video.getAlbumsByVideo",e),f=e=>(0,i.createApiEffect)("video.deleteAlbum",e),p=e=>(0,i.createApiEffect)("video.getGroupsForStreaming",e),y=e=>(0,i.createApiEffect)("video.getVideoDiscover",e),_=e=>(0,i.createApiEffect)("video.getComments",e),b=e=>(0,i.createApiEffect)("video.createComment",e),g=e=>(0,i.createApiEffect)("video.deleteComment",e),h=e=>(0,i.createApiEffect)("video.restoreComment",e),w=e=>(0,i.createApiEffect)("video.editComment",e),A=e=>(0,i.createApiEffect)("video.editAlbum",e),E=e=>(0,i.createApiEffect)("video.addAlbum",e),I=e=>(0,i.createApiEffect)("video.reorderVideos",e),V=e=>(0,i.createApiEffect)("video.delete",e),x=e=>(0,i.createApiEffect)("video.restore",e),P=e=>(0,i.createApiEffect)("video.pinVideo",e),C=e=>(0,i.createApiE=n.length||(t[i]=r),t}),(0,i._)({},e))},target:t}),{pushItemsEvent:r,unshiftItemsEvent:d,deleteItemsEvent:l}}},510759:(e,t,o)=>{o.d(t,{createFactormbine)(e,x,o),$error:(0,n.combine)(e,P,o),$loading:(0,n.combine)(e,E,o),$fullyLoaded:(0,n.combine)(e,A,o=>store:e,keys:[t],fn:(e,[t])=>{const o=e[t];if(null==o)throw new Error("Empty value entity store");return o}})},707014:(e,t,o)=>{o.d(t,{createEntitiesVideoAlbumService:()=>y});var i=o(434788),n=o(820224),r=o(798116),d=o(243864),l=o(837529),a=o(350906),s=o(548009),c=o(530187),u=o(792831),m=o(596136),v=o(612295),f=o(323241);const p=({album_id:e,owner_id:t=0})=>(0,d.joinRawId)({ownerId:t,itemId:e}),y=e=>{const t=(0,s.createVideoDeleteAlbumFx)(e),o=(0,s.createVideoEditAlbumFx)(e),y=(0,s.createVideoAddAlbumFx)(e),_=(0,s.createVideoGetAlbumByIdFx)(e),b=(0,s.createVideoGetAlbumsExtendedFx)(e),g=(0,s.createVideoAddToAlbumFx)(e),h=(0,s.createVideoRemoveFromAlbumFx)(e),{domain:w}=e,A=w.createStore({}),E=w.createStore({}),I=w.createStore({}),V=w.createStore({}),x=w.createStore({}),P=w.createStore({}),C=w.createStore({}),S=w.createStore({}),k=w.createEvent(),L=w.createEvent(),B=(0,r.attach)({effect:t,mapParams:e=>{var{id:t}=e,o=(0,n._)(e,["id"]);const{itemId:r,ownerId:d}=(0,l.splitRawId)(t),a=f.Ranges.isGroupId(d)?{album_id:r,group_id:f.Ranges.convertOwnerIdToGroupId(d)}:{album_id:r,owner_id:d};return(0,i._)({},o,{query:a})}}),T=(0,r.attach)({effect:o,mapParams:e=>{var{ownerId:t,itemId:o,title:r,privacy:d}=e,l=(0,n._)(e,["ownerId","itemId","title","privacy"]);const a={album_id:o,title:r};return d&&(a.privacy=(0,c.stringifyBasePrivacy)(d)),f.Ranges.isGroupId(t)&&(a.group_id=f.Ranges.convertOwnerIdToGroupId(t)),(0,i._)({},l,{query:a})}}),O=(0,r.attach)({effect:y,mapParams:e=>{var{ownerId:t,title:o,privacy:r}=e,d=(0,n._)(e,["ownerId","title","privacy"]);const l={title:o};return r&&(l.privacy=(0,c.stringifyBasePrivacy)(r)),f.Ranges.isGroupId(t)&&(l.group_id=f.Ranges.convertOwnerIdToGroupId(t)),(0,i._)({},d,{query:l})}}),F=(0,m.createVideoAlbumSubscriptionEffect)((0,s.createVideoSubscribeToAlbum)(e),k,!0),j=(0,m.createVideoAlbumSubscriptionEffect)((0,s.createVideoUnsubscribeFromAlbum)(e),k,!1);return(0,v.registerEntitiesSetSample)(L,A),I.on(_,((e,{query:t})=>(0,u.updateEntitiesBy)(e,p(t),!0))),I.on(_.finally,((e,{params:t})=>(0,u.updateEntitiesBy)(e,p(t.query),!1))),E.on(_,((e,{query:t})=>(0,u.updateEntitiesBy)(e,p(t),null))),E.on(_.fail,((e,{error:t,params:o})=>(0,u.updateEntitiesBy)(e,p(o.query),t))),A.on(_.done,((e,{params:t,result:o})=>e,{id:t})=>(0,u.updateEntitiesBy)(e,t,!0))),P.on(B.finally,((e,{params:t})=>(0,u.updateEntitiesBy)(e,t.id,!1))),x.on(B,((e,{id:t})=>(0,u.updateEntitiesBy)(e,t,null))),x.on(B.fail,((e,{error:t,params:o})=>(0,u.updateEntitiesBy)(e,o.id,t))),V.on(B.done,((e,{params:t,result:o})=>o?(0,u.updateEntitiesBy)(e,t.id,!0):e)),S.on(T,((e,{ownerId:t,itemId:o})=>(0,u.updateEntitiesBy)(e,(0,d.joinRawId)({itemId:o,ownerId:t}),!0))),S.on(T.finally,((e,{params:t})=>(0,u.updateEntitiesBy)(e,(0,d.joinRawId)({itemId:t.itemId,ownerId:t.ownerId}),!1))),C.on(T,((e,{ownerId:t,itemId:o})=>(0,u.updateEntitiesBy)(e,(0,d.joinRawId)({itemId:o,ownerId:t}),null))),C.on(T.fail,((e,{error:t,params:o})=>(0,u.updateEntitiesBy)(e,(0,d.joinRawId)({itemId:o.itemId,ownerId:o.ownerId}),t))),(0,r.sample)({clock:T.done,fn:({params:e})=>[{owner_id:e.ownerId,id:e.itemId,title:e.title,privacy:e.privacy}],target:k}),(0,r.sample)({clock:k,source:A,fn:(e,t)=>t.reduce(((t,o)=>{const n=(0,d.joinRawId)({ownerId:o.owner_id,itemId:o.id}),r=(0,i._)({},e[n],o);return(0,a.isVideoVideoAlbumFull)(r)&&t.push(r),t}),[]),target:L}),{$entitiesVideoAlbums:A,$entitiesVideoAlbumsErrors:E,$entitiesVideoAlbumsLoading:I,$entitiesVideoDeletedAlbums:V,$entitiesVideoDeletedAlbumsErrors:x,$entitiesVideoDeletedAlbumsPending:P,$entitiesVideoEditedAlbumsErrors:C,$entitiesVideoEditedAlbumsPending:S,patchVideoAlbumsEvent:k,setVideoAlbumsEvent:L,editVideoAlbumByIdFx:T,createVideoAlbumFx:O,deleteVideoAlbumByIdFx:B,getVideoAlbumByIdFx:_,subscribeToVideoAlbumFx:F,unsubscribeFromVideoAlbumFx:j,getVideoAlbumsFx:b,addVideoToAlbumFx:g,removeVideoFromAlbumFx:h}}},123578:(e,t,o)=>{o.d(t,{createListsVideosAlbumsService:()=>l});var i=o(243864),n=o(548009),r=o(510759);const d=({id:e,owner_id:t})=>void 0===e||void 0===t?"":(0,i.joinRawId)({itemId:e,ownerId:t}),l=({domain:e,entitiesVideoAlbumService:t})=>{const o=(0,n.createVideoGetAlbumsExtendedFx)({domain:e}),i=e.createEffect(o),l=(0,r.createFactoryLists)({$entitiesItems:t.$entiain:e,fetchFx:i,getItemKey:d,getList:({items:e})=>e,getListCount:({count:e})=>e,getListKey:({entityKey:e})=>e,getEntityKey:d});return{resetVideosAlbumsEvent:l.resetEvent,fetchMoreVideosAlbumsEvent:l.fetchMoreEvent,fetchVideosAlbumsFx:l.fetchFx,$videosAlbumsFullyLoaded:l.$entitiesFullyLoaded,$videosAlbumsLoading:l.$entitiesLoading,$videosAlbumsIds:l.$entitiesListIds,$videosAlbumsCount:l.$entitiesCount,$videosAlbumsError:l.$entitiesError,selectStores:l.selectStores}}},596136:(e,t,o)=>{o.d(t,{createVonst r=(e,t,o)=>{const r=(0,n.createEffect)((t=>{var{optimistic:o}=t,n=(0,i._)(t,["optimistic"]);return e(n)}));return(0,n.sample)({clock:r,filter:({optimistic:e=!1,query:t})=>e&&void 0!==t.album_id,fn:({query:e})=>[{owner_id:e.owner_id,id:Number(e.album_id),is_subscribed:o}],target:t}),(0,n.sample)({clock:r.fail,filter:({params:e})=>Boolean(e.optimistic)&&void 0!==e.query.album_id,fn:({params:e})=>[{owner_id:e.query.owner_id,id:Number(e.query.album_id),is_subscribed:!o}],target:t}),(0,n.sample)({clock:r.done,filter:({params:e})=>!e.optimistic&&void 0!==e.query.album_id,fn:({params:e})=>[{owner_id:e.query.owner_id,id:Number(e.query.album_id),is_subscribed:o}],target:t}),r}},612295:(e,t,o)=>{o.d(t,{registerEntitiesSetSample:()=>d});var it d=(e,t)=>{(0,i.sample)({clock:e,source:&&void 0!==e.id));return o.length?(0,r.mapToEntity)(e,o,(e=>(0,n.joinRawId)({ownerId:t n=(e,t,o="id")=>{const n=(0,i._)({},e);return t.reduce(((e,t)=>(e["fu:(e,t,o)=>{o.d(t,{resetEntities:()=>n});var i=o(453934);const n=(e,l})):{}},347140:(e,t,o)=>{o.d(t,{setEntity:()=>n});var i=o(434788);const n=(e,t,o)=>t?(0,i._)({},e,{[t]:o}):e},530187:(e,t,o)=>{function i(e){var t,o,i,n,r,d,l,a;const s=null==(o=e.lists)||null==oid 0:t.map((e=>`list${e}`)).join(","),c=null==(n=e.lists)||null==(i=n.excluded)?void 0:i.map((e=>`-list${e}`)).join(","),u=null==wners)||null==(r=d.allowed)?void 0:r.join(","),m=null==(a=e.owners)||null==(l=a.excluded)?void 0:l.map((e=>-es(new Map(d.map((e=>[e,o]))));return(0,i._)({},e,t)}return d.reduce(((e,t)=>(delete e[t],e)),(0,i._)({},e))}},350906:(e,t,o)=>{o.d(t,{isVideoVideoAlbumFulnst i=eegisterReactApplication)(a,(t=>{r.render((0,n.jsx)(e,(0,i._)({},t)),l)})),window.initReactApplication(a,o))}},910667:(e,t,o)=>{o.d(t,{useLazyLoad:()=>r});var i=o(667294),n=o(832204);const r=(e,t,o=window,r)=>{(0,i.useEffect)((()=>{let i;if(o)return e?(i=(0,n.throttle)((()=>{const e=o instanceof Window?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight):Math.max(o.scrollHeight,o.clientHeight),i=o instanceof Window?document.documentElement.clientHeight:o.clientHeight,n=o instanceof Window?o.scrollY:o.scrollTop,d=i+n,l=Math.max(e-2*i,0);var a;(!r&&d>=l|addEventListener("scroll",i)):i&&o.removeEventListener("scroll",i),()=>{i&&o.removeEventListener("scroll",i)}}),[e,t,o,r])}},535139:(e,t,o)=>{o.d(t,{VideoAddToPlaylistActionSheet:()=>b});var i=o(785893),n=o(973935),r=o(667294),d=o(764646),l=o(659397),a=o(739878),s=o(370364),c=o(900710),u=o(572761),m=o(304395),v=o(134915),f=o(257284),p=o(36193),y=o(536426),_=o(414126);const b=()=>{const[e,t]=(0,r.useState)(),[o,b]=(0,r.useState)(),{onCreatePlaylist:g,onAddToPlaylist:h,onDeletePlaylist:w,playlistsByVideoLoaded:A,playlists:E}=(0,u.usePlaylists)({videoId:o,ownerId:e}),{shown:I,videoCardElement:V,setShown:x}=(0,u.useActionSheetEvents)({onCreatePlaylist:g,onDeletePlaylist:w,setVideoId:b,setOwnerId:t,playlists:Object.values(E),playlistsByVideoLoaded:A}),{addedPlaylistCheckbox:P,checkboxItems:C}=(0,r.useMemo)((()=>({addedPlaylistCheckbox:E[m.MY_VIDEO_ALBUM_ID]&&(0,i.jsx)(a.Checkbox,{checked:E[m.MY_VIDEO_ALBUM_ID].containsVideo,onChange:()=>h(m.MY_VIDEO_ALBUM_ID),children:(0,i.jsx)("span",{className:f.default.checkboxText,children:E[m.MY_VIDEO_ALBUM_ID].title})},m.MY_VIDEO_ALBUM_ID),checkboxItems:Object.values(E).map((e=>{if(e.id!==m.MY_VIDEO_ALBUM_ID)return(0,i.jsx)(a.Checkbox,{checked:e.containsVideo,onChange:()=>h(e.id),children:(0,i.jsx)("span",{className:f.default.checkboxText,children:e.title})},e.id)}))})),[E]),S=V.current&&V.current.querySelector(".VideoCard__action--add");return n.createPortal((0,i.jsx)(s.AppRootProvider,{children:(0,i.jsx)(c.DropdownActionSheet,{className:"VideoCard__actionSheet",padding:"none",placement:"bottom-end",width:190,maxHeight:160,shown:I,content:(0,i.jsxs)(i.Fragment,{children:[P,(0,i.jsx)(c.DropdownActionSheet.Item,{onClick:t=>{const i=window.vk.id;i&&((0,v.createPlaylistPopup)(t,i,o,e,v.CreatePlaylistRequestOrigin.VIDEO_PLAYLISTS_MODAL),x(!1))},before:(0,i.jsx)("div",{className:f.default.dropdownItemIcon,children:(0,_.partConfigEnabled)("video_playlist_icon_refactoring")?(0,i.jsx)(p.Icon20Add,{}):(0,i.jsx)(y.Icon20ListAddOutline,{})}),children:(0,_.partConfigEnabled)("video_playlist_icon_refactoring")?d.getLang("video_create_g("video_card_add_video_to_new_playlist")}),C]}),children:(0,i.jsx)("div",{onClick:()=>h(m.MY_VIDEO_ALBUM_ID),className:(0,l.classNames)("VideoAddToPlaylistActionSheet",f.default.container,!S&&f.default.hidden)})})}),S||document.body)}},109329:(e,t,o)=>{o.d(t,{VideoAddToPlaylistPopover:()=>h});var i=o(11010),n=o(785893),r=o(973935),d=o(667294),l=o(659397),a=o(370364),s=o(572761),c=o(304395),u=o(134915),m=o(257284),v=o(969569),f=o(809485),p=o(504190),y=o(670511),_=o(745830),b=o(918863),g=o(414126);const h=()=>{var e;const[t,o]=(0,d.useState)(),[h,w]=(0,d.useState)(),A=(0,f.ensurePlaylistPopoverService)(),E=(0,b.getVideoCardKey)(t||0,h||0),I=(0,_.useEntitiesStore)(A.videoCardEntities,E),V=(0,y.usePlaylists)(A.$playlistEntityStore),{$playlistsLoading:x,addVideoCardEntity:P,togglePlaylistAddedEvent:C,fetchPlaylistsEvent:S,fetchMorePlaylistsEvent:k,$curVideoAddedToMy:L,clearStoreEvent:B}=(0,p.useUnit)(A),T=(0,i._)((function*(e){const{newAlbumId:t,videoOwnerId:o,videoId:i}=e.detail;if(o&&i&&t){const e=(0,b.getVideoCardKey)(o,i);C({album_id:t,key:e,isAdded:!1})}})),{shown:O,videoCardElement:F,setShown:j}=(0,s.useActionSheetEvents)({onDeletePlaylist:()=>{},onCreatePlaylist:T,setVideoId:w,setOwnerId:o,playlists:V,playlistsByVideoLoaded:!x,addedToMy:Boolean(null==(e=I)?void 0:e.added),clearStoreEvent:B}),M=F.current&&F.current.querySelector(".VideoCard__action--add");return(0,d.useEffect)((()=>{h&&t&&P({vid:h,oid:t,added:!1})}),[h,t]),(0,r.createPortal)((0,n.jsx)(a.AppRootProvider,{children:(0,n.jsx)(v.PlCard__actionSheet",playlists:V,addedToMy:Boolean(L),onToggleVideoAdded:(e,t)=>C({album_id:t,key:E,isAdded:e}),onCreateNewPlaylist:e=>{const o=window.vk.id;o&&(j(!1),(0,u.createPlaylistPopup)(e,o,h,t,u.CreatePlaylistRequestOrigin.VIDEO_PLAYLISTS_MODAL))},videoId:h,videoOwnerId:t,playlistsLoading:x,addedToMyCheckboxDisabled:x,width:238,maxWidth:238,fetchMorePlaylistEvent:(0,g.partConfigEnabled)("video_legacy_video_card_popover_infinite_scroll")?k:void 0,onShownChange:e=>{j(e),e&&!V.length&&S(E),e||(0,g.partConfigEnabled)("video_legacy_video_card_popover_infinite_scroll")||B()},placement:"bottom-end",children:(0,n.jsx)("div",{onClick:x?void 0:()=>C({album_id:c.MY_VIDEO_ALBUM_ID,key:E||"",isAdded:Boolean(L)}),className:(0,l.classNames)("VideoAddToPlaylistActionSheet",m.default.container,!M&&m.default.hidden)})})}),M||document.body)}},251528:(e,t,o)=>{o.d(t,{ADDED_PLAYLIST_MAP_ITEM:()=>n});var i=o(764646);const n={"-2":{id:o(304395).MY_VIDEO_ALBUM_ID,title:i.getLang("video_catalog_showcase_section_my_video_added_title"),containsVideo:!1,isPrivate:!0}}},572761:(e,t,o)=>{o.d(t,{useActionSheetEvents:()=>d.useActionSheetEvents,useAllPlaylists:()=>n.useAllPlaylists,usePlaylists:()=>i.usePlaylists,usePlaylistsByVideo:()=>r.usePlaylistsByVideo});var i=o(292141),n=o(894676),r=o(257358),d=o(951712)},951712:(e,t,o)=>{o.d(t,{useActionSheetEvents:()=>l});var i=o(11010),n=o(667294),r=o(134915),d=o(414126);const l=({onCreatePlaylist:e,onDeletePlaylist:t,setOwnerId:o,setVideoId:l,playlistsByVideoLoaded:a,playlists:s,addedToMy:c,clearStoreEvent:u})=>{const[m,v]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1),y=(0,n.useRef)(null),_=e=>{if(y.current){const t=e?r.VideoCardAddButtonEvents.SET_ADDED:r.VideoCardAddButtonEvents.SET_ADD;window.dispatchEvent(new CustomEvent(t,{detail:{videoCardElement:y.current}}))}},b=(0,i._)((function*(t){try{yield e(t),_(!0)}catch(e){}}));return(0,n.useEffect)((()=>{var e;!m&&(0,d.partConfigEnabled)("video_legacr_infinite_scroll")&&(null==(e=u)||e())}),[m]),(0,n.useEffect)((()=>{if(m){const e=s.some((e=>e.containsVideo));_(e||!!c)}}),[s,m,c]),(0,n.useEffect)((()=>{f&&a&&(v(!0),p(!1))}),[f,a]),(0,n.useEffect)((()=>{y.current&&window.dispatchEvent(new CustomEvent(m?r.VideoCardAddButtonEvents.SHOW:r.VideoCardAddButtonEvents.HIDE,{detail:{videoCardElement:y.current}}))}),[m]),(0,n.useEffect)((()=>{const e=()=>{p(!0umber(e.detail.videoId)),o(Number(e.detail.ownerId)),y.current=e.detail.videoCardElement},n=()=>{v(!1),p(!1)};return window.addEventListener(r.VideoAddToPlaylistActionSheetEvents.INIT,i),window.addEventListener(r.VideoAddToPlaylistActionSheetEvents.SHOW,e),window.addEventListener(r.VideoAddToPlaylistActionSheetEvents.HIDE,n),window.addEventListener(r.CreatePlaylistFormEvents.DELETE,t),()=>{window.removeEventListener(r.VideoAddToPlaylistActionSheetEvents.INIT,i),window.removeEventListener(r.VideoAddToPlaylistActionSheetEvents.SHOW,e),window.removeEventListener(r.VideoAddToPlaylistActionSheetEvents.HIDE,n),window.removeEventListener(r.CreatePlaylistFer(r.CreatePlaylistFormEvents.CREATE,b),()=>{window.removeEventListener(r.CreatePlaylistFormEvents.CREATE,b)})),[b]),{shown:m,videoCardElement:y,setShown:v}}},894676:(e,t,o)=>{o.d(t,{useAllPlaylists:()=>l});var i=o(434788),n=o(667294),r=o(998593),d=o(251528);const l=()=>{const[e,t]=(0,n.useState)({}),[o,l]=(0,n.useState)(!1),[a,s]=(0,n.useState)(!0),c=(0,n.useRef)(null);return(0,n.useEffect)((()=>{var e;a&&(null==(e=c.current)||e.abort(),c.current=new AbortController,(0,r.getPlaylists)({options:{signal:c.current.signal},params:{extended:1}}).then((e=>{t(e.items.reduce(((e,t)=>{var o,i;return e[String(t.id)]={id:t.id,title:t.title,containsVideo:!1,isPrivate:"all"!==(null==(i=t)||null==(o=i.privacy)?void 0:o.category)},e}),(0,i._)({},d.ADDED_PLAYLIST_MAP_ITEM))),l(!0),s(!1)})).catch((()=>{})));return()=>{var e;null==(e=c.current)||e.abort()}}),[a]),{allPlaylists:e,allPlaylistsLoaded:o,setNeedLoadAllPlaylists:s}}},292141:(e,t,o)=>{o.d(t,{usePlaylists:()=>p});var i=o(11010),n=o(434788),r=o(785893),d=o(667294),l=o(659397),a=o(764646),s=o(246329),c=o(499610),u=o(494720),m=o(304395),v=o(998593),f=o(572761);const p=({videoId:e,ownerId:t})=>{const[o,p]=(0,d.useState)({}),{allPlaylistsLoaded:y,allPlaylists:_,setNeedLoadAllPlaylists:b}=(0,f.useAllPlaylists)(),{playlistsByVideoLoaded:g}=(0,f.usePlaylistsByVideo)({videoId:e,ownerId:t,allPlaylists:_,allPlaylistsLoaded:y,setPlaylists:p}),h=(0,i._)((function*(i,d,f,y,_){var b;const g=d||!(null==(b=o[i])?void 0:b.containsVideo),h={owner_id:f||t,video_id:y||e,album_id:i},w=i===m.MY_VIDEO_ALBUM_ID;if(h.owner_id&&h.video_id)try{const e=window.vk.id,t=(0,u.getPlaylistURL)(e,i);let d;g?(yield(0,v.addVideoToPlaylist)(h),d=w?a.getLang("video_added_to_section"):a.getLang("video_added_to_playlist")):(yield(0,v.removeVideoFromPlaylist)(h),d=w?a.getLang("video_deleted_from_section"):a.getLang("video_deleted_from_playlist")),((e,t)=>{if(o[e]){const i=(0,n._)({},o);i[e].containsVideo=t,p(i)}})(i,g),(0,s.showSnackbar)({text:d,before:{content:(0,r.jsx)(c.Icon28ListCheckOutline,{})},action:{label:(0,l.unescape)(_||o[i].title),onClick:()=>window.location.href=t}})}catch(e){throw e}})),w=(0,i._)((function*(e){b(!0);const t=e.detail;if(!t)return;const{videoOwnerId:o,videoId:i,newAlbumId:no&&i&&n&&r&&(yield h(n,!0,o,i,r))}));return{onCreatePlaylist:w,onAddToPlaylist:h,onDeletePlaylist:()=>{b(!0)},playlistsByVideoLoaded:g,playlists:o}}},257358:(e,t,o)=>{o.d(t,{usePlaylistsByVideo:()=>d});var i=o(667294),n=o(789253),r=o(998593);const d=({videoId:e,ownerId:t,allPlaylists:o,allPlaylistsLoaded:d,setPlaylists:l})=>{const[a,s]=(0,i.useState)(!1),c=(0,i.useRef)(null);return(0,i.useEffect)((()=>{var i;if(null==(i=c.current)||i.abort(),e&&t&&d){const i=new AbortController;c.current=i,s(!1),(0,r.getPlaylistsByVideo)({params:{video_id:e,owner_id:t},options:{signal:i.signal}}).then((e=>{const t=(0,n.deepClone)(od)];o&&(o.containsVideo=!0)})),l(t),s(!0)})).catch((()=>{}))}return()=>{var e;null==(e=c.current)||e.abort()}}),[e,t,o,d]),{playlistsByVideoLoaded:a}}},337616:(e,t,o)=>{o.r(t),o.d(t,{renderVideoAddToPlaylistActionSheet:()=>a});var i=o(785893),n=o(973935),r=o(535139),d=o(414126),l=o(109329);const a=()=>{const e=document.getElementById("VideoAddToPlaylistActionSheet"),t=(0,d.partConfigEnabled)("video_card_add_playlist_actionsheet_legacy_redesign")?(0,i.jsx)(l.VideoAddToPlaylistPopover,{}):(0,i.jsx)(r.VideoAddToPlaylistActionSheet,{});e&&n.render(t,e)}},632128:(e,t,o)=>{o.d(t,{addVideoToPlaylist:()=>n});var i=o(87330);const n=e=>(0,i.api)("video.addToAlbum",e)},557284:(e,t,o)=>{o.d(t,{getPlaylists:()=>n});var i=o(87330);function n({params:e={},apiConfig:t={},options:o={}}){return(0,i.api)("video.getAlbums",e,t,o)}},975108:(e,t,o)=>{o.d(t,{getPlaylistsByVideo:()=>d});var i=o(434788),n=o(87330);const r={extended:1,removeVideoFromPlaylist:()=>d.removeVideoFromPlaylist});var i=o(632128),n=o(55,t,o)=>{o.d(t,{removeVideoFromPlaylist:()=>n});var i=o(87330);const n=e=>(0,i.api)("video.removeFromAlbum",e)},313802:(e,t,o)=>{o.d(t,{VideoExtraTabsActions:()=>m});var i=o(785893),n=o(667294),r=o(86894),d=o(370364),l=o(900710),a=o(134915),s=o(178065),c=o(691583);const u="default",m=({orderItems:e,commentsTooltipText:t,canSeeComments:o,canSeeOrder:m,onCommentsButtonClick:v,onVideosOrderChangnst[p,y]=(0,n.useState)(u),[_,b]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=()=>b(!0),t=()=>b(!1);return window.aentListener(a.VideoOrderEvents.START_LOADING,e),window.removeEventListener(a.VideoOrderEvents.END_LOADING,t)}}),[]),(0,i.jsx)(d.AppRootProvider,{children:(0,i.jsxs)("div",{className:c.default.actions,children:[o&&(0,i.jsx)(s.VideoActionButton,{tooltipText:t,type:s.VideoActionButtonType.Comments,onClick:v}),m&&(_?(0,i.jsx)(r.Spinner,{size:"regular",className:c.default.spinner}):(0,i.jsx)(l.Dret,{width:200,action:"hover",content:(0,i.jsx)(s.VideoOrderPopout,{selected:p,items:e,onChange:e=>{y(e),f(e)}}),children:(0,i.jsx)(s.VideoActionButton,{selected:p!==u,type:s.VideoActionButtonType.Order})}))]})})}},556550:(e,t,o)=>{o.d(t,{VideoActionButton:()=>v,VideoActionButtonType:,a=o(260471),s=o(78818),c=o(647643),u=o(888410);!function(e){e[e.Comments=0]="Comments",e[e.Order=1]="Order"}(i||(i={}));const m={0:(0,n.jsx)(s.Icon24CommentOutline,{className:u.default.buttonIcon}),1:(0,n.jsx)(c.Icon24SortOutline,{className:u.default.buttonIcon})},v=({type:e,tooltipText:t,selected:o,getRootRef:i,onClick:s})=>{const c=(0,r.useRef)(null),v=(0,n.jsx)(l.IconButton,{size:36,className:(0,d.classNames)(u.default.button,o&&u.default.buttonSelected),hasHover:!1,hasActive:!1,onClick:()=>{c.current&&c.current.remove(),s&&s()},getRootRef:i,children:m[e]});return t?(0,n.jsx)(a.TextTooltip,{getRef:c,text:t,offsetDistance:-3,offsetSkidding:20,appearance:"black",placement:"top-end",children:v}):v}},755771:(e,t,o)=>{o.d(t,{VideoOrderPopout:()=>r});var i=o(785893),n=o(900710);const r=({selected:e,items:t,onChange:o})=>(0,i.jsx)(i.Fragmdren:t.map((({value:t,label:r})=>{return(0,i.jsx)(n.DropdownActionSheet.IteButtonType:()=>i.VideoActionButtonType,VideoOrderPopout:()=>n.VideoOrderPopout});var i=o(556550),n=o(755771)},103276:(e,t,o)=>{o.r(t),o.d(t,{mapRawVideosOrderItemToVideosOrderItem:()=>s,renderVideoExtraTabsActions:()=>a});var i=o(434788),n=o(785893),r=o(973935),d=o(448180),l=o(313802);const a=e=>{const t=document.getElementById("V0,n.jst),(0,d.pushNavDestroy)((()=>{t&&r.unmountComponentAtNode(t)})))},s=e=>{t}}},196540:(e,t,o)=>{o.d(t,{ensureEventPropagationStopping:()=>i});const i=(e,t)=>(e.stopPropagation(),t(e))},692415:(e,t,o)=>{o.d(t,{getOwnerPlaylistsUrl:()=>r});var i=o(414126),n=o(756779);const r=(e,t)=>{var o;const r=(0,n.getOwnerUrl)(e,t);return(null==(o=e)?void 0:o.id)?e.id===window.vk.id||(0,i.partConfigEnabled)("video_community_catal:"playlists"}).toString()].join("?"):r}},437433:(e,t,o)=>{o.d(t,{getShowcaseUrl:()=>i});const i=()=>"/video"},675645:(e,t,o)=>{o.d(t,{getVerifiedBadge:()=>a});var i=o(785893),n=o(770524),r=o(304244),d=o(323241),l=o(948260);const a=e=>{if(!e)return;const t=(e=>{var t,o,i,n;return(0,r.isOwnerUser)(e)&&((null==(t=e)?void 0:t.is_esia_verified)||(null==(o=e)?void 0:o.is_sber_verified)||(null==(i=e)?void 0:i.is_tinkoff_verified))?{icon:"esia",ownerId:e.id}:(null==(n=e)?void 0:n.verified)?{icon:"default",ownerId:(0,r.isOwnerUser)(e)?e.id:d.Ranges.convertGroupIdToOwnerId(e.id)}:null})(e);return t?(0,i.jsx)(n.VerifiedLabel,{iconHref:"/verify",onMouseOver:e=>(0,l.pageVerifiedTip)(e.currentTarget,{oid:t.ownerId,fo(e,t,o)=>{o.d(t,{getVideoCardKey:()=>n});var i=o(243864);const n=(e,t)=>(0,i.joinRawId)({ownerId:e,itemId:t})},918863:(e,t,o)=>{o.d(t,{copyPlaylistUrl:()=>v.copyPlaylistUrl,ensureEventPropagationStopping:()=>i.ensureEventPropagationStopping,getFullAlbumId:()=>v.getFullAlbumId,getOwnerPlaylistsUrl:()=>n.getOwnerPlaylistsUrl,getShowcaseUrl:()=>r.getShowcaseUrl,getVerifiedBadge:()=>d.getVerifiedBadge,getVideoCardKey:()=>l.getVideoCardKey,initDestroyablePage:()=>a.initDestroyablePage,isAccessDenied:()=>s.isAccessDenied,isIdInvalid:()=>c.isIdInvalid,isMyVideoAlbum:()=>v.isMyVideoAlbum,isServiceAlbumId:()=>v.isServiceAlbumId,isSystemPlaylist:()=>u.isSystemPlaylist,isVideosEnabled:()=>m.isVideosEnabled,mapAlbumsWithInclusionsToPlaylists:()=>v.mapAlbumsWithInclusionsToPlaylists,showPlaylistActionSnackbar:()=>v.showPlaylistActionSnackbar});var i=o(196540),n=o(692415),r=o(437433),d=o(675645),l=o(638085),a=o(570148),s=o(373915),c=o(34107),u=o(769934),m=o(301047),v=o(573164)},570148:(e,t,o)=>{o.d(t,{inition r({descriptor:e,component:t}){var o,r,d;const l=()=>{(0,n.hydrateComponent)({descriptor:e,component:t})};l(),null!=(o=window.cur)._back||(o._back={}),null!=(r=window.cur._back).hide||(r.hide=[]),window.cur._back.hide.push((()=>{const{target:t}=e.payload;t&&i.unmountComponentAtNode(t)})),null!=(d=window.cur._back).show||(d.show=[]),window.cur._back.show.push(l)}},373915:(e,t,o)=>{o.d(t,{isAccessDenied:()=>i});const i=e=>{var t,o;return"api_error"===(null==(t=e)?void 0:t.type)&&204===Number(null==(o=e.error)?void 0:o.error_code)}},34107:(e,t,o)=>{o.d(t,{isIdInvalid:()=>i});const i=e=>{var t,o;return"api_error"===(null==(t=e)?void 0:t.type)&&19934:(e,t,o)=>{o.d(t,{isSystemPlaylist:()=>i});const i=e=>{var t;return 1===(null==(t=e)?void 0:t.is_system)}},301047:(e,t,o)=>{o.d(t,{isVideosEnabled:()=>i});const i=e=>{var t,o;return"api_error"===(null==(t=e)?void 0:t.type)&&15===Number(null==(o=e.error)?void 0:o.error_code)}},573164:(e,t,o)=>{o.d(t,{copyPlaylistUrl:()=>g,getFullAlbumId:()=>p,isMyVideoAlbum:()=>v,isServiceAlbumId:()=>f,mapAlbumsWithInclusionsToPlaylists:()=>_,showPlaylistActionSnackbar:()=>b});var i=o(434788),n=o(722),l=o(764646),a=o(246329),s=o(499610),c=o(445264),u=o(659397),m=o(86548);const v=e=>e===d.MY_VIDEO_ALBUM_ID,f=e=>e&&e<=0,p=({albumId:e,ownerId:t})=>e&&t?(0,r.joinRawId)({ownerId:t,itemId:e}):"",y=(e,t=!1)=>{var o,i;return{id:e.id,title:e.title,isPrivate:"only_me"===(null==(i=e)||null==(o=i.privacy)?void 0:o.category),containsVideo:t}},_=({albumsByVideo:e,albums:t,ownerId:o})=>{const n={};return e.forEach((e=>{const i=p({albumId:e,ownerId:o}),r=t[i];r&&(n[i]=y(r,!0),delete t[i])})),(0,i._)({},n,(r=t,Object.keys(r).reduce(((e,t)=>{const o=r[t];return o&&(e[t]=y(o)),e}),{})));var r},b=({playlistId:e,ownerId:t,playlistTitle:o,added:i})=>{const r=v(e);if(!o&&!r)return;const c=r?window.Video._getMyAddedVideosPath():(0,d.getPlaylistURL)(t,e);let m;m=i?r?l.getLang("video_added_to_section"):l.getLang("video_added_to_playlist"):r?l.getLang("video_deleted_from_section"):l.getLang("video_deleted_from_playlist");const f=r?l.getLang("video_catalog_showcase_section_my_video_added_title"):(0,u.decodeHTMLEntities)(o||":m,before:{content:(0,n.jsx)(s.Icon28ListCheckOutline,{})},action:{label:f,onClick:()=>window.location.href=c},timeout:d.SNACKBAR_TIMEOUT}).catch()},g=({owner_id:e,id:t})=>{(0,u.copyTextToClipboard)(`https://${(0,m.getHostName)()}${(0,d.getPlaylistURL)(e,t)}`),(0,a.showSnackbar)({text:l.getLang("video_playlist_url_copied"),before:{content:(0,n.jsx)(c.Icon20CheckAlt,{})}})}},197619:(e,t,o)=>{o.d(t,{PlaylistPopover:()=>h});var i=o(434788),n=o(820224),r=o(785893),d=o(667294),l=o(901930),a=o(516048),s=o(739878),c=o(85773),u=o(681341),m=o(764646),v=o(86894),f=o(623042),p=o(36193),y=o(727122),_=o(919205),b=o(414126),g=o(910667);const h=e=>{var t,o,h,w,{addedToMy:A,playlists:E,onToggleVideoAdded:I,children:V,action:x="hover",videoId:P,videoOwnerId:C,playlistsLoading:S,onCreateNewPlaylist:k,addedToMyCheckboxDisabled:L,fetchMorePlaylistEvent:B}=e,T=(0,n._)(e,["addedToMy","playlists","onToggleVideoAdded","children","action","videoId","videoOwnerId","playlistsLoading","onCreateNewPlaylist","addedToMyCheckboxDisabled","fetchMorePlaylistEvent"]);const[O,F]=(0,d.useState)(null);return(0,g.useLazyLoad)(Boolean(B),B,O),(0,r.jsx)(l.Popo:(0,r.jsxs)(a.Div,{children:[(0,r.jsx)(s.Checkbox,{checked:A,disabled:L,onChange:()=>I(A,y.MY_VIDEO_ALBUM_ID),children:m.getLang("video_my_added_videos_playlist")}),(Boolean(null==(t=E)?void 0:t.length)||S)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Spacing,{size:8}),(0,r.jsx)(c.Separator,{}),(0,r.jsx)(v.Spacing,{size:4}),(0,r.jsx)(a.Div,{mode:"vertical",spacing:8,children:(0,r.jsx)(v.Footnote,{className:f.default.playlistSubhead,weight:"3",children:m.getLang("video_playlists")})})]}),S&&!(null==(o=E)?void 0:o.length)&&(0,r.jsx)("div",{className:f.default.scrollHeight,children:(0,r.jsx)(v.Spinner,{})}),Boolean(null==(h=E)?void 0:h.length)&&(0,r.jsxs)(r.Fragment,{childredren:null==(w=E)?void 0:w.map((e=>(0,r.jsx)(_.PlaylistPopoverItem,{playlist:e,handleToggleVideoAdded:I},e.id)))}),S&&(0,r.jsx)(v.Spinner,{})]}),(0,r.jsx)(u.Button,{onClick:k,mode:"tertiary",appearance:"accent-invariable",stretched:!0,align:"left",before:(0,r.jsx)(p.Icon20Add,{}),size:"m",children:(0,b.partConfigEnabled)("video_playlist_icon_refactoring")?m.getLang("video_create_new_playlist_btn"):m.getLang("video_add_video_to_new_playlist")})]})},T,{children:V}))}},919205:(e,t,o)=>{o.d(t,{PlaylistPopoverItem:()=>m});var i=o(785893),n=o(667294),r=o(739878),d=o(260471),l=o(763014),a=o(764646),s=o(789862),c=o(659397),u=o(623042);const andleToggleVideoAdded:t})=>(0,i.jsx)(r.Checkbox,{checked:e.containsVideo,onChange:()=>t(e.containsVideo,e.id),titleAfter:e.isPrivate&&(0,i.jsx)(d.TextTooltip,{placement:"top",appearance:"black",offsetSkidding:-56,offsetDistance:4,text:a.getLang("video_playlist_private_tooltip"),children:(0,i.jsx)(s.Icon16LockOutline,{className:u.default.playlistPrivateItities)(e.title)})},e.id)))},969569:(e,t,o)=>{o.d(t,{PlaylistPopover:()=>i.PlaylistPopover});var i=o(197619)},670511:(e,t,o)=>{o.d(t,{usePlaylists:()=>n});var i=o(504190);const n=e=>(0,i.useStoreMap)(e,(e=>Object.values(e).filter((e=>Boolean(e)))))},772316:(e,t,o)=>{o.d(t,{createPlaylistPopoverService:()=>v});var i=o(434788),n=o(918863),r=o(548009),d=o(707014),l=o(123578),a=o(19068),s=o(798116),c=o(629260),u=o(727122),m=o(228136);const v=(e,t)=>{const o=(0,r.createVideoGetAlbumsByVideoFx)({domain:e}),v=e.createEvent(),f=(0,r.createVideoAddToAlbumFx)({domain:e}),p=(0,r.createVideoRemoveFromAlbumFx)({domain:e}),y=e.createStore({}),_=e.createEffect((({controller:e,isAdded:t,query:o})=>{const i={controller:e,query:o};return t?p(i):f(i)})),b=e.createStore(t),g=e.createStore([]),h=e.createEvent(),w=(0,s.restore)(h,{}),A=e.createEvent(),E=e.createEvent(),I=e.createEvent(),V=(0,d.createEntitiesVideoAlbumService)({domain:e}),x=(0,l.createListsVideosAlbumsService)({domain:e,entitiesVideoAlbumService:V}),{videoCardEntities:P,addEntity:C,updateEntity:S}=(0,m.createVideoCardEntitiesService)({domain:e}),{$entitiesVideoAlbums:k}=V,{resetVideosAlbumsEvent:L}=x;k.reset(v);const B=e.createEvent(),T=e.createEvent(),O=(0,s.restore)(T,null).reset(v),F=e.createEvent(),j=(0,s.restore)(F,mple)({clock:B,target:C});const M=(0,s.combine)(w,O,((e,t)=>!alues(e).some((e=>e&&e.containsVideo)))),D=(0,s.combine)(x.fetchVideosAlbumsFx.pending,o.pending,((e,t)=>e||t)),R=(0,c.combineEvents)({events:{albumsByVideo:o.done,albums:x.fetchVideosAlbumsFx.done},reset:v});return(0,s.sample)({clock:R,source:{videoEntities:k,ownerId:b},fn:({videoEntities:e,ownerId:t},{albumsByVideo:o})=>(0,n.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:o.result,albums:e,ownerId:t||0}),target:h}),(0,s.sample)({clock:R,fn:(:{result:e}})=>e.includes(u.MY_VIDEO_ALBUM_ID),target:T}),(0,s.sample)({clock:A,source:b,filter:e=>Boolean(e),fn:e=>({query:{owner_id:e||0,extended:1},conentityKey:e||0}),target:x.fetchVideosAlbumsFx}),(0,s.sample)({clock:E,source:b,fn:e=>({entityKey:e,count:50}),target:x.fetchMoreVideosAlbumsEvent}),(0,s.sample)({clock:x.fetchVideosAlbumsFx.done,source:{ownerId:b,videoEntities:k,albumsByVideo:g,playlistEntityStore:w},filter:(e,{params:t})=>Boolean(t.query.offs:o},{result:r})=>{const d=(0,a.mapToEntity)({},r.items,(({id:t})=>(0,n.getFullAlbumId)({albumId:t,ownerId:e})));return(0,i._)({},o,(0,n.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:t,albums:d,ownerId:e||0}))},target:h}),(0,s.sample)({clock:A,source:{videoCardEntities:P,$ownerId:b},filter:({videoCardEntities:e},t)=>!!e[t],fn:({videoCardEntities:e,$ownerId:t},o)=>{const{vid:i,oid:n}=e[o];return{query:{video_id:i,owner_id:n,target_id:t},controller:new AbortController}},t,(0,s.sample)({clock:o.doneData,target:g}),(0,s.sample)({clock:A,target:F}),(0,s.sample)({clock:L,fn:()=>({}),target:w}),(0,s.sample)({clock:I,source:{videoCardEntities:P,$ownerId:b},filter:({videoCardEntities:e},{key:t})=>!!e[t],fn:({videoCardEntities:e,$ownerId:t},{key:o,album_id:i,isAdded:r})=>{const d=(0,n.getFullAlbumId)({albumId:i,ownerId:t}),{vid:l,oid:a}=e[o];return{controller:new AbortController,fullId:d,query:{target_id:t,album_id:i,video_id:l,owner_id:a},isAdded:r}},target:_}),(0,s.sample)({clock:_,source:w,filter:(e,t)=>!(0,n.isMyVideoAlbum)(t.query.album_id),fn:(e,{query:t,isAdded:o})=>{const r=(0,i._)({},e),d=(0,n.getFullAlbumId)({albumId:t.album_id,ownerId:t.taont,target:h}),(0,s.sample)({clock:_,filter:({query:id:isAdded:e})=>!e,target:T}),(0,s.sample)({clock:M,source:j,filter:e=>!!e,fn:(e,t)=>({key:e,updates:{added:t}}),target:S}),(0,s.sample)({clock:_,source:y,fn:(e,{controller:t,fullId:o})=>{var n;return null==(n=e[o])||n.abort(),(0,i._)({},e,{[o]:t})},target:y}),mple)({clock:v,source:o,fn:({controller:e})=>{var t;null==(t=e)||t.abort()}}),(0,s.sample)({clock:v,fn:()=>{},target:L}),(0,s.sample)({clock:[_.done,_.fail],source:w,filter:(e,t)=>("error"in t||!t.result)&&!(0,n.isMyVideoAlbum)(t.params.query.album_id),fn:(e,{params:{query:t,isAdded:o}})=>{const r=(0,i._)({},e),d=(0,n.getFullAlbumId)({albumId:t.album_id,ownerId:t.owner_id}),l=e[d];return l&&(r[d]=(0,i._)({},l,{containsVideo:o})),r},target:h}),(0,s.sampleilter:e=>("error"in e||!e.result)&&(0,n.isMyVideoAlbum)(e.params.query.album_id),fn:({params:{isAdded:e}})=>e,target:T}),(0,s.sample)({clock:I,source:{playlists:w,ownerId:b},fn:({playlists:e,ownerId:t},{isAdded:o,album_id:i})=>{var r;const d=(0,n.getFullAlbumId)({albumId:i,ownerId:t});(0,n.showPlaylistActionSnackbar)({ownerId:t||0,playlistId:i,playlistTitle:null==(r=e[d])?void 0:r.title,added:!o})}}),{addVideoCardEntity:B,videoCardEntities:P,togglePlaylistAddedEvent:I,fetchPlaylistsEvent:A,fetchMorePlaylistsEvent:E,resetVideosAlbumsEvent:L,$ownerId:b,$playlistsLoading:D,$curVideoAddedToMy:O,clearStoreEvent:v,$playlistEntityStore:w}}},228136:(e,t,o)=>{o.d(t,{createVideoCardEntitiesService:()=>l});var i=o(434788),n=o(798116),r=o(918863),d=o(453934);const l=({domain:e})=>{const t=e.createEvent(),o=(0,n.restore)(t,{}),l=e.createEvent(),a=e.createEvent();return(0,n.sample)({clock:l,source:o,fn:(e,t)=>{const o=(0,r.getVideoCardKey)(t.oid,t.vid);return(0,i._)({},e,{[o]:t})},target:t}),(0,n.sample)({clock:a,source:o,fn:(e,{key:t,updates:o})=>{const ne[t],o);return"object"==typeof(r=n)&&null!==r&&"vid"in r&&"oid"in r&&"added"in r?(0,d.produce)(e,(e=>{e[t]=n})):e;var r},target:t}),{addEntity:l,updateEntity:a,videoCardEntities:o}}},245977:(e,t,o)=>{o.d(t,{ensurePlaylistPopoverService:()=>d});var i=o(772316),n=o(798116);let r;function d(){if(!r){const e=(0,n.createDomo.d(t,{ensurePlaylistPopoverS=>{t._=t._type_of=function(e){return e&fined"!=typeof Sym:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function d(e){var{events:t,reset:o,target:d=(0,i.createEvent)({name:"target",sid:"aip3nf"},{name:"target",sid:"aip3nf"})}=e;return i.is.unit(d)||l("target should be a unit"),o&&!i.is.unit(o)&&l("reset should be a unit"),(0,i.withRegion)(d,(()=>{var e=Object.keys(t),l=Array.isArray(t)?[...e].fill(""):{},a=(0,i.createStore)(e.length,{and:{serialize:"ignore"},name:"$counter",sid:"-dby0v3"}),s=(0,i.createStore)(l,{and:{serialize:"ignore"},name:"$results",sid:"c60qbe"});a.reset((0,i.sample)({and:[{source:d}],or:{sid:"-8hxq8z"}})),s.reset(d),o&&(a.reset((0,i.sample)({and:[{source:o}],or:{sid:"3c6u5p"}})),s.reset(o));unction(e){var l=(0,i.createStorend:{serialize:"ignore"},name:"$isDone",sid:"uttu1j"(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t);return i[e]=o,i}))};for(var u of e)c(u);(0,i.guard)({and:[{source:(0,i.sample)({and:[{source:s,clockge)(Object.values(t),{name:"clock",sidid:"uwap9g"}}),filter:a.map((e=>0===e)),target:d}],or:{sid:"ciyd7d"}})})),d}function l(e){throw new Error(e)}}}]);try{stManager.done("dist/web/chunks/video_groups_redesign.8808851c.js")}catch(e){}