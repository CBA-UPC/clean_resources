var yG={exports:{}};(function(ha){(function(){var wc=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},ac=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},ps=yr=nr=io=nr(,nt=io,bs=ea=function(e,n){return yr(bs(e),},Hn=Is=nr(function(e,n){if(e===n)return!0;var o=wc(e),r=wc(n);return o!==r?!1:ac(o)?e===n:o==="array"?bs(Is).eq(e,n):o==="object"?Hn(Is).eq(e,n):!1});const Ds=Object.getPrototypeOf,rs=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Es=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&rs(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},to=e=>n=>Es(n)===e,Tt=e=>n=>typeof n===e,Rs=e=>n=>e===n,Ht=(e,n)=>Ve(e)&&rs(e,n,(o,r)=>Ds(o)===r),j=to("string"),Ve=to("object"),Xo=e=>Ht(e,Object),hn=to("array"),re=Rs(null),bt=Tt("boolean"),Jn=Rs(void 0),Xt=e=>e==null,_e=e=>!Xt(e),te=Tt("function"),go=Tt("number"),Xe=(e,n)=>{if(hn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Oe=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),mn=(e,n)=>o=>e(n(o)),ze=e=>()=>e,pn=e=>e,Ot=(e,n)=>e===n;function Ne(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Rn=e=>n=>!e(n),cs=e=>()=>{throw new Error(e)},it=e=>e(),It=ye=ze(!1),We=ze(!0);class ${constructor(n,o){this.tag=n,this.value=o}static some(n){return new $(!0,n)}static none(){return $.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?$.some(n(this.value)):$.none()}bind(n){return this.tag?n(this.value):$.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:$.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n!=null?n:"Called getOrDie on None")}static from(n){return _e(n)?$.some(n):$.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$.singletonNone=new $(!1);const Ts=Array.prototype.slice,Kn=Array.prototype.indexOf,lo=Array.prototype.push,no=(e,n)=>Kn.call(e,n),Ns=(e,n)=>{const o=no(e,n);return o===-1?$.none():$.some(o)},Re=(e,n)=>no(e,n)>-1,st=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},De=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},le=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},jt=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},jn=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Ct=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Ms=(e,n,o)=>(jt(e,(r,a)=>{o=n(o,r,a)}),o),Cn=(e,n,o)=>(le(e,(r,a)=>{o=n(o,r,a)}),o),Cr=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return $.some(u);if(o(u,r))break}return $.none()},ao=(e,n)=>Cr(e,n,ye),ks=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return $.some(o)}return $.none()},Ii=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!hn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);lo.apply(n,e[o])}return n},Wr=(e,n)=>Ii(De(e,n)),vs=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},Uo=e=>{const n=Ts.call(e,0);return n.reverse(),n},Ol=(e,n)=>Ct(e,o=>!Re(n,o)),$o=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Fo=(e,n)=>{const o=Ts.call(e,0);return o.sort(n),o},li=(e,n)=>n>=0&&n<e.length?$.some(e[n]):$.none(),Bs=e=>li(e,0),zc=e=>li(e,e.length-1),ur=te(Array.from)?Array.from:e=>Ts.call(e),Fa=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return $.none()},Hi=(e,n)=>{const o=[],r=te(n)?a=>st(o,u=>n(u,a)):a=>Re(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},Ys=Object.keys,du=Object.hasOwnProperty,dt=(e,n)=>{const o=Ys(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},Gn=(e,n)=>$r(e,(o,r)=>({k:r,v:n(o,r)})),$r=(e,n)=>{const o={};return dt(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},ic=e=>(n,o)=>{e[o]=n},mu=(e,n,o,r)=>{dt(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},Uc=(e,n)=>{const o={},r={};return mu(e,n,ic(o),ic(r)),{t:o,f:r}},wo=(e,n)=>{const o={};return mu(e,n,ic(o),Oe),o},ta=(e,n)=>{const o=[];return dt(e,(r,a)=>{o.push(n(r,a))}),o},pa=e=>ta(e,pn),xo=(e,n)=>Gt(e,n)?$.from(e[n]):$.none(),Gt=(e,n)=>du.call(e,n),Zr=(e,n)=>Gt(e,n)&&e[n]!==void 0&&e[n]!==null,La=Vi=fu=e=>e.length!==void 0,Fr=Array.isArray,Xs=as=(e,n,o)=>{if(!e)return!1;if(o=o||e,fu(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Gt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},na=gu=(e,n)=>{const o=[];return as(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},ui=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},lc=Jo=xc=di=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},fd=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=a||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!y,D=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!E&&!y&&!D;return{isiPad:ze(a),isiPhone:ze(u),isTablet:ze(y),isPhone:ze(E),isTouch:ze(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ze(D),isDesktop:ze(R)}},ba=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Ia=(e,n)=>{const o=ba(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return Lr(r(1),r(2))},am=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?de():Ia(e,o)},de=()=>Lr(0,0),Lr=(e,n)=>({major:e,minor:n}),Ha={nu:Lr,detect:am,unknown:de},oa=(e,n)=>Fa(n.brands,o=>{const r=o.brand.toLowerCase();return ao(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:Ha.nu(parseInt(o.version,10),0)}))}),Dl=(e,n)=>{const o=String(n).toLowerCase();return ao(e,r=>r.search(o))},Eo=(e,n)=>Dl(e,n).map(o=>{const r=Ha.detect(o.versionRegexes,n);return{current:o.name,version:r}}),gd=(e,n)=>Dl(e,n).map(o=>{const r=Ha.detect(o.versionRegexes,n);return{current:o.name,version:r}}),hu=(e,n)=>e.substring(n),zi=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,rl=(e,n)=>is(e,n)?hu(e,n.length):e,Js=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?Jn(r)?!0:a+n.length<=r:!1},is=(e,n)=>zi(e,n,0),uc=(e,n)=>zi(e,n,e.length-n.length),Ec=e=>n=>n.replace(e,""),mi=Ec(/^\s+|\s+$/g),cl=Ec(/^\s+/g),Ui=Ec(/\s+$/g),ro=e=>e.length>0,Sr=e=>!ro(e),sa=(e,n)=>n<=0?"":new Array(n+1).join(e),Va=Tc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_s=e=>n=>Js(n,e),Oo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Js(e,"edge/")&&Js(e,"chrome")&&Js(e,"safari")&&Js(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Tc],search:e=>Js(e,"chrome")&&!Js(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Js(e,"msie")||Js(e,"trident")},{name:"Opera",versionRegexes:[Tc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:_s("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:_s("firefox")},{name:"Safari",versionRegexes:[Tc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Js(e,"safari")||Js(e,"mobile/"))&&Js(e,"applewebkit")}],jr=[{name:"Windows",search:_s("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Js(e,"iphone")||Js(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:_s("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:_s("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:_s("linux"),versionRegexes:[]},{name:"Solaris",search:_s("sunos"),versionRegexes:[]},{name:"FreeBSD",search:_s("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:_s("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],pu={browsers:ze(Oo),oses:ze(jr)},co="Edge",wr="Chromium",Gr="IE",Hs="Opera",va="Firefox",ya="Safari",xr=()=>za({current:void 0,version:Ha.unknown()}),za=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(co),isChromium:r(wr),isIE:r(Gr),isOpera:r(Hs),isFirefox:r(va),isSafari:r(ya)}},ra={unknown:xr,nu:za,edge:ze(co),chromium:ze(wr),ie:ze(Gr),opera:ze(Hs),firefox:ze(va),safari:ze(ya)},Rl="Windows",ca="iOS",hd="Android",dc="Linux",fi="macOS",Nl="Solaris",Ml="FreeBSD",pd="ChromeOS",H=()=>ee({current:void 0,version:Ha.unknown()}),ee=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(Rl),isiOS:r(ca),isAndroid:r(hd),isMacOS:r(fi),isLinux:r(dc),isSolaris:r(Nl),isFreeBSD:r(Ml),isChromeOS:r(pd)}},ue={unknown:H,nu:ee,windows:ze(Rl),ios:ze(ca),android:ze(hd),linux:ze(dc),macos:ze(fi),solaris:ze(Nl),freebsd:ze(Ml),chromeos:ze(pd)},qe={detect:(e,n,o)=>{const r=pu.browsers(),a=pu.oses(),u=n.bind(y=>oa(r,y)).orThunk(()=>Eo(r,e)).fold(ra.unknown,ra.nu),f=gd(a,e).fold(ue.unknown,ue.nu),b=fd(f,u,e,o);return{browser:u,os:f,deviceType:b}}},Wt=e=>window.matchMedia(e).matches;let vo=di(()=>qe.detect(navigator.userAgent,$.from(navigator.userAgentData),Wt));const Do=()=>vo(),ho=navigator.userAgent,Ko=Do(),Vn=Ko.browser,ls=Ko.os,kc=Ko.deviceType,Bl=ho.indexOf("Windows Phone")!==-1,ht={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Vn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Vn.isIE(),windowsPhone:Bl,browser:{current:Vn.current,version:Vn.version,isChromium:Vn.isChromium,isEdge:Vn.isEdge,isFirefox:Vn.isFirefox,isIE:Vn.isIE,isOpera:Vn.isOpera,isSafari:Vn.isSafari},os:{current:ls.current,version:ls.version,isAndroid:ls.isAndroid,isChromeOS:ls.isChromeOS,isFreeBSD:ls.isFreeBSD,isiOS:ls.isiOS,isLinux:ls.isLinux,isMacOS:ls.isMacOS,isSolaris:ls.isSolaris,isWindows:ls.isWindows},deviceType:{isDesktop:kc.isDesktop,isiPad:kc.isiPad,isiPhone:kc.isiPhone,isPhone:kc.isPhone,isTablet:kc.isTablet,isTouch:kc.isTouch,isWebView:kc.isWebView}},bu=/^\s*|\s*$/g,Qo=Er=(e,n)=>n?n==="array"&&Fr(e)?!0:typeof e===n:e!==void 0,pf=es=Gt,Jh=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(Gt(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},Wi=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),as(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(Wi(a,n,o,r),!0)))},Ke={trim:Qo,isArray:Fr,is:Er,toArray:Xs,makeMap:pf,each:as,map:na,grep:gu,inArray:ui,hasOwn:es,extend:Jh,walk:Wi,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>hn(e)?e:e===""?[]:na(e.split(n||","),Qo),_addCacheSuffix:e=>{const n=ht.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},ts=(e,n,o=Ot)=>e.exists(r=>o(r,n)),bd=(e,n,o=Ot)=>dr(e,n,o).getOr(e.isNone()&&n.isNone()),As=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},dr=(e,n,o)=>e.isSome()&&n.isSome()?$.some(o(e.getOrDie(),n.getOrDie())):$.none(),Zi=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?$.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):$.none(),V=(e,n)=>e?$.some(n):$.none(),X=typeof window<"u"?window:Function("return this;")(),pe=(e,n)=>{let o=n!=null?n:X;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Fe=(e,n)=>{const o=e.split(".");return pe(o,n)},mt=(e,n)=>Fe(e,n),kn=(e,n)=>{const o=mt(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},jo=Object.getPrototypeOf,or=e=>kn("HTMLElement",e),On=e=>{const n=Fe("ownerDocument.defaultView",e);return Ve(e)&&(or(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(jo(e).constructor.name))},mc=8,Ps=9,Tr=11,kr=1,yu=3,Bn=e=>e.dom.nodeName.toLowerCase(),Go=e=>e.dom.nodeType,sr=e=>n=>Go(n)===e,Qh=e=>Go(e)===mc||Bn(e)==="#comment",us=e=>qr(e)&&On(e.dom),qr=sr(kr),Kr=sr(yu),s0=sr(Ps),ep=sr(Tr),Ua=e=>n=>qr(n)&&Bn(n)===e,hg=(e,n,o)=>{if(j(o)||bt(o)||go(o))e.setAttribute(n,o+"");else throw new Error("Attribute value was not simple")},qo=(e,n,o)=>{hg(e.dom,n,o)},ji=(e,n)=>{const o=e.dom;dt(n,(r,a)=>{hg(o,a,r)})},Ac=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},al=(e,n)=>$.from(Ac(e,n)),Cu=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},$s=(e,n)=>{e.dom.removeAttribute(n)},Gi=e=>{const n=e.dom.attributes;return n==null||n.length===0},im=e=>Cn(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),bf=(e,n)=>{const o=Ac(e,n);return o===void 0||o===""?[]:o.split(" ")},r0=(e,n,o)=>{const a=bf(e,n).concat([o]);return qo(e,n,a.join(" ")),!0},tp=(e,n,o)=>{const r=Ct(bf(e,n),a=>a!==o);return r.length>0?qo(e,n,r.join(" ")):$s(e,n),!1},qi=e=>e.dom.classList!==void 0,vf=e=>bf(e,"class"),Wc=(e,n)=>r0(e,"class",n),yf=(e,n)=>tp(e,"class",n),np=(e,n)=>Re(vf(e),n)?yf(e,n):Wc(e,n),Su=(e,n)=>{qi(e)?e.dom.classList.add(n):Wc(e,n)},op=e=>{(qi(e)?e.dom.classList:vf(e)).length===0&&$s(e,"class")},il=(e,n)=>{qi(e)?e.dom.classList.remove(n):yf(e,n),op(e)},c0=(e,n)=>{const o=qi(e)?e.dom.classList.toggle(n):np(e,n);return op(e),o},wu=(e,n)=>qi(e)&&e.dom.classList.contains(n),a0=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw new Error(a)}return lm(r.childNodes[0])},i0=(e,n)=>{const r=(n||document).createElement(e);return lm(r)},l0=(e,n)=>{const r=(n||document).createTextNode(e);return lm(r)},lm=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Y={fromHtml:a0,fromTag:i0,fromText:l0,fromDom:lm,fromPoint:(e,n,o)=>$.from(e.dom.elementFromPoint(n,o)).map(lm)},xu=(e,n)=>{const o=[],r=let a=n(e);do a=a.bind(r);while(a.isSome());return o},Wa=(e,n)=>{const o=e.dom;if(o.nodeType!==kr)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},um=e=>e.nodeType!==kr&&e.nodeType!==Ps&&e.nodeType!==Tr||e.childElementCount===0,sp=(e,n)=>{const o=n===void 0?document:n.dom;return um(o)?[]:De(o.querySelectorAll(e),Y.fromDom)},Mv=(e,n)=>{const o=n===void 0?document:n.dom;return um(o)?$.none():$.from(o.querySelector(e)).map(Y.fromDom)},Qn=(e,n)=>e.dom===n.dom,Oc=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},ll=e=>Y.fromDom(e.dom.ownerDocument),Pl=e=>s0(e)?e:ll(e),Eu=e=>Y.fromDom(Pl(e).dom.documentElement),Ki=e=>Y.fromDom(Pl(e).dom.defaultView),Yr=e=>$.from(e.dom.parentNode).map(Y.fromDom),ul=e=>$.from(e.dom.parentElement).map(Y.fromDom),rp=(e,n)=>{const o=te(n)?n:ye;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=Y.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},cp=e=>{const n=o=>Ct(o,r=>!Qn(e,r));return Yr(e).map(rr).map(n).getOr([])},gi=e=>$.from(e.dom.previousSibling).map(Y.fromDom),dl=e=>$.from(e.dom.nextSibling).map(Y.fromDom),ap=Dc=e=>xu(e,dl),rr=e=>De(e.dom.childNodes,Y.fromDom),Tu=(e,n)=>{const o=e.dom.childNodes;return $.from(o[n]).map(Y.fromDom)},dm=e=>Tu(e,0),hi=e=>Tu(e,e.dom.childNodes.length-1),Rc=ip=e=>e.dom.hasChildNodes(),d0=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return Y.fromDom(n)},Cf=e=>ep(e)&&_e(e.dom.host),pg=te(Element.prototype.attachShadow)&&te(Node.prototype.getRootNode),mm=ze(pg),ml=pg?e=>Y.fromDom(e.dom.getRootNode()):Pl,m0=e=>Cf(e)?e:d0(Pl(e)),dS=e=>Cf(e)?e:Y.fromDom(Pl(e).dom.body),Bv=e=>{const n=ml(e);return Cf(n)?$.some(n):$.none()},Pv=e=>Y.fromDom(e.dom.host),vd=e=>{if(mm()&&_e(e.target)){const n=Y.fromDom(e.target);if(qr(n)&&lp(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Bs(o)}}return $.from(e.target)},lp=e=>_e(e.dom.shadowRoot),fm=e=>{const n=Kr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Bv(Y.fromDom(n)).fold(()=>o.body.contains(n),mn(fm,Pv))};var ds=(e,n,o,r,a)=>e(o,r)?$.some(o):te(a)&&a(o)?$.none():n(o,r,a);const ys=(e,n,o)=>{let r=e.dom;const a=te(o)?o:ye;for(;r.parentNode;){r=r.parentNode;const u=Y.fromDom(r);if(n(u))return $.some(u);if(a(u))break}return $.none()},Ca=(e,n,o)=>ds((a,u)=>u(a),ys,e,n,o),up=(e,n)=>{const o=e.dom;return o.parentNode?$v(Y.fromDom(o.parentNode),:$.none()},$v=(e,n)=>{const o=a=>n(Y.fromDom(a));return ao(e.dom.childNodes,o).map(Y.fromDom)},Xr=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=Y.fromDom(r.childNodes[a]);if(n(u))return $.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return $.none()};return o(e.dom)},ku=(e,n,o)=>ys(e,r=>Wa(r,n),o),Sa=(e,n)=>Mv(n,e),fl=(e,n,o)=>ds((a,u)=>Wa(a,u),ku,e,n,o),f0=e=>fl(e,"[contenteditable]"),bn=(e,n=!1)=>fm(e)?e.dom.isContentEditable:f0(e).fold(ze(n),o=>aa(o)==="true"),aa=e=>e.dom.contentEditable,_u=e=>e.style!==void 0&&te(e.style.getPropertyValue),gm=(e,n,o)=>{if(!j(o))throw new Error("CSS value must be a string: "+o);_u(e)&&e.style.setProperty(n,o)},dp=(e,n)=>{_u(e)&&e.style.removeProperty(n)},g0=(e,n,o)=>{const r=e.dom;gm(r,n,o)},Nc=(e,n)=>{const o=e.dom;dt(n,(r,a)=>{gm(o,a,r)})},cr=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!fm(e)?wa(o,n):a},wa=(e,n)=>_u(e)?e.style.getPropertyValue(n):"",ar=(e,n)=>{const o=e.dom,r=wa(o,n);return $.from(r).filter(a=>a.length>0)},bg=e=>{const n={},o=e.dom;if(_u(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},hm=(e,n)=>{const o=e.dom;dp(o,n),ts(al(e,"style").map(mi),"")&&$s(e,"style")},Vs=e=>e.dom.offsetWidth,mr=(e,n)=>{Yr(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Yi=(e,n)=>{dl(e).fold(()=>{Yr(e).each(a=>{Qs(a,n)})},r=>{mr(r,n)})},Sf=(e,n)=>{dm(e).fold(()=>{Qs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Qs=(e,n)=>{e.dom.appendChild(n.dom)},mp=(e,n)=>{mr(e,n),Qs(n,e)},h0=(e,n)=>{le(n,(o,r)=>{const a=r===0?e:n[r-1];Yi(a,o)})},yo=(e,n)=>{le(n,o=>{Qs(e,o)})},yd=e=>{e.dom.textContent="",le(rr(e),n=>{uo(n)})},uo=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Xi=e=>{const n=rr(e);n.length>0&&h0(e,n),uo(e)},vg=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,rr(Y.fromDom(r))},wf=e=>De(e,Y.fromDom),Dn=e=>e.dom.innerHTML,pm=(e,n)=>{const r=ll(e).dom,a=Y.fromDom(r.createDocumentFragment()),u=vg(n,r);yo(a,u),yd(e),Qs(e,a)},p0=e=>{const n=Y.fromTag("div"),o=Y.fromDom(e.dom.cloneNode(!0));return Qs(n,o),Dn(n)},fp=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),Fv=e=>{const n=Y.fromDom(vd(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=k(r,o);return fp(n,e.clientX,e.clientY,o,r,a,e)},Lv=(e,n)=>o=>{e(o)&&n(Fv(o))},b0=(e,n,o,r,a)=>{const u=Lv(o,r);return e.dom.addEventListener(n,u,a),{unbind:Ne(gp,e,n,u,a)}},yg=(e,n,o,r)=>b0(e,n,o,r,!1),gp=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},w=(e,n)=>({left:e,top:n,translate:(r,a)=>w(e+r,n+a)}),O=w,F=e=>{const n=e.getBoundingClientRect();return O(n.left,n.top)},K=(e,n)=>e!==void 0?e:n!==void 0?n:0,ne=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return O(o.offsetLeft,o.offsetTop);const u=K(r==null?void 0:r.pageYOffset,a.scrollTop),f=K(r==null?void 0:r.pageXOffset,a.scrollLeft),b=K(a.clientTop,o.clientTop),y=K(a.clientLeft,o.clientLeft);return Ze(e).translate(f-y,u-b)},Ze=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?O(r.offsetLeft,r.offsetTop):fm(e)?F(n):O(0,0)},Rt=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return O(o,r)},un=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},ln=qt=e=>{const n=e===void 0?window:e;return Do().browser.isFirefox()?$.none():$.from(n.visualViewport)},ms=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Ir=e=>{const n=e===void 0?window:e,o=n.document,r=Rt(Y.fromDom(o));return qt(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return ms(r.left,r.top,u,f)},a=>ms(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},Za=(e,n)=>Ct(rr(e),n),$l=(e,n)=>{let o=[];return le(rr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat($l(r,n))}),o},Jr=(e,n)=>sp(n,e),mS=(e,n,o)=>ku(e,n,o).isSome();class Wo{urrent(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}dPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Pt=Fl=Et=Pt(1),bm=RD=e=>Et(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Cd=fr=xf=hp=e=>n=>Et(n)&&n.hasAttribute(e),Qr=(e,n)=>Ll=v0=e=>Et(e)&&e.getAttribute("data-mce-bogus")==="all",Au=e=>Et(e)&&e.tagName==="TABLE",fS=e=>n=>!!(bm(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),y0=fr(["textarea","input"]),Ge=Pt(3),gS=Pt(4),vm=Pt(7),Sd=Pt(8),pp=Pt(9),Cs=Pt(11),Ro=Cd("br"),ia=Cd("img"),la=fS("true"),zn=fS("false"),bp=fr(["td","th"]),fc=fr(["td","th","caption"]),zs=fr(["video","audio","object","embed"]),C0=Cd("li"),Le=Cd("details"),ja=Cd("summary"),vp="\uFEFF",oo="\xA0",Il=e=>e===vp,qT=e=>e.replace(/\uFEFF/g,""),Iv=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?$.from(u.dom.nodeValue):$.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Kr,"text"),Vl=e=>Iv.get(e),Hv=e=>Iv.getOption(e),pi=(e,n)=>Iv.set(e,n),mo=["td","th"],Ou=["thead","tbody","tfoot"],Ef=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],gc=["li","dd","dt"],Vv=["ul","ol","dl"],Tf=["pre","script","textarea","style"],kf=xa=e=>Bn(e)==="table",ym=e=>qr(e)&&Bn(e)==="br",ge=kf(Ef),Ga=kf(Vv),Du=kf(gc),Ru=kf(Ou),qa=kf(mo),_r=kf(Tf),Hr=e=>{const n=[];let o=e.dom;for(;o;)n.push(Y.fromDom(o)),o=o.lastChild;return n},ND=e=>{const n=Jr(e,"br"),o=Ct(Hr(e).slice(-1),ym);n.length===o.length&&le(o,uo)},Ea=()=>{const e=Y.fromTag("br");return qo(e,"data-mce-bogus","1"),e},Nu=Vt=(e,n)=>{hi(e).each(o=>{gi(o).each(r=>{n.isBlock(Bn(e))&&ym(o)&&n.isBlock(Bn(r))&&uo(o)})})},ec=vp,Ka=Il,bi=qT,KT=YT=Et,Cg=Ge,yp=Ta=e=>Cg(e)&&Ka(e.data),hc=e=>yp(e)||Ta(e),zv=XT=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ec),u=e.parentNode;if(n){const f=e.previousSibling;if(Cg(f)){if(hc(f))return f;if(Sg(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(Cg(f)){if(hc(f))return f;if(_f(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},Mu=e=>{const n=e.container();return Ge(n)?n.data.charAt(e.offset())===ec||e.isAtStart()&&Ta(n.previousSibling):!1},S0=e=>{const n=e.container();return Ge(n)?n.data.charAt(e.offset()-1)===ec||e.isAtEnd()&&Ta(n.nextSibling):!1},hS=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Ea().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},_f=e=>Cg(e)&&e.data[0]===ec,Sg=e=>Cg(e)&&e.data[e.data.length-1]===ec,pS=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Ll(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},wd=e=>e&&e.hasAttribute("data-mce-caret")?(pS(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,bS=e=>yp(e.startContainer),vS=la,Uv=zn,Wv=Ro,tc=Ge,Bu=fr(["script","style","textarea"]),wg=fr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Af=fr(["table"]),yS=hc,gr=e=>yS(e)?!1:tc(e)?!Bu(e.parentNode):wg(e)||Wv(e)||Af(e)||Eg(e),xg=e=>Et(e)&&e.getAttribute("unselectable")==="true",Eg=Zv=xd=e=>Eg(e)?!Cn(ur(e.getElementsByTagName("*")),!1):!1,Ya=e=>wg(e)||xd(e),w0=(e,n)=>gr(e)&&Zv(e,n),gl=/^[ \t\r\n]*$/,Cm=e=>gl.test(e),Of=Tg=e=>" \f	\v".indexOf(e)!==-1,Ed=e=>e===`
`||e==="\r",JT=(e,n)=>n<e.length&&n>=0?Ed(e[n]):!1,Df=(e,n=4,o=!0,r=!0)=>{const a=sa(" ",n),u=e.replace(/\t/g,a);return Cn(u,(b,y)=>Tg(y)||y===oo?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||JT(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+oo}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Ed(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},jv=(e,n)=>{const o=Y.fromDom(n),r=Y.fromDom(e);return mS(r,"pre,code",Ne(Qn,o))},CS=(e,n)=>Ge(e)&&Cm(e.data)&&!jv(e,n),Us=e=>Et(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),kg=(e,n)=>gr(e)&&!CS(e,n)||Us(e)||Td(e),Td=hp("data-mce-bookmark"),Sm=hp("data-mce-bogus"),Rf=Qr("data-mce-bogus","all"),Nf=e=>ul(Y.fromDom(e)).exists(n=>!bn(n)),Xa=(e,n)=>{let o=0;if(kg(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const a=new Wo(r,e);do{if(n){if(Rf(r)){r=a.next(!0);continue}if(Sm(r)){r=a.next();continue}}if(la(r)&&Nf(r))return!1;if(Ro(r)){o++,r=a.next();continue}if(kg(r,e))return!1;r=a.next()}while(r);return o<=1}},Os=(e,n=!0)=>Xa(e.dom,n),zl=e=>e.toLowerCase()==="svg",Gv=e=>zl(e.nodeName),Cp=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",x0=["svg"],wm=()=>{let e=[];const n=return{track:u=>{Gv(u)&&e.push(u);let f=n();return f&&!f.contains(u)&&(e.pop(),f=n()),Cp(f)},current:reset:},Sp="data-mce-block",E0=Pu=e=>De(E0(e),n=>`${n}:`+De(x0,.join(":")).join(","),Ul=(e,n)=>_e(n.querySelector(e))?(n.setAttribute(Sp,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Sp),!1),vi=xm=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let a=e[r];a;a=a[r])if(Os(Y.fromDom(a))){(o=a.parentNode)===null||o===void 0||o.removeChild(a);return}},Em=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const a=o.extractContents();xm(a,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();xm(u,!1),Os(Y.fromDom(a))||r.insertBefore(a,e),Os(Y.fromDom(n))||r.insertBefore(n,e),Os(Y.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},SS=(e,n,o)=>{const r=e.getBlockElements(),a=Y.fromDom(n),u=f=b=>Qn(b,a);le(wf(o),b=>{ys(b,u,f).each(y=>{const E=Za(b,;if(E.length>0){const D=ul(y);le(E,R=>{ys(R,u,f).each(}),D.each(R=>vi(e,R.dom))}})})},T0=(e,n,o)=>{le([...o,...Fn(e,n)?[n]:[]],r=>le(Jr(Y.fromDom(r),r.nodeName.toLowerCase()),a=>{Ft(e,a.dom)&&Xi(a)}))},wp=(e,n)=>{const o=vi(e,n);SS(e,n,o),T0(e,n,o)},k0=wS=(e,n,o)=>{const r=u=>Qn(u,Y.fromDom(n)),a=rp(Y.fromDom(o),r);li(a,a.length-2).filter(qr).fold(()=>wp(e,n),u=>wp(e,u.dom))},_0=e=>e.hasAttribute(Sp),xp=(e,n)=>Gt(e.getTransparentElements(),n),Ep=Fn=Ft=kd=(e,n)=>n.type===1&&xp(e,n.name)&&j(n.attr(Sp)),A0=Do().browser,Tp=e=>ao(e,qr),QT=e=>A0.isFirefox()&&Bn(e)==="table"?Tp(rr(e)).filter(n=>Bn(n)==="caption").bind(.getOr(0):0,qv=Lo=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&cr(Y.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!qv(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!qv(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=QT(Y.fromDom(n))}return{x:r,y:a}},Kv=(e,n={})=>{let o=0;const r={},a=Y.fromDom(e),u=Pl(a),f=se=>{n.referrerPolicy=se},b=se=>{n.contentCssCors=se},y=E=D=R=se=>new Promise((ie,ae)=>{let be;const He=Ke._addCacheSuffix(se),Qe=D(He);r[He]=Qe,Qe.count++;const gt=ke=()=>gt(Qe.passed,2),we=()=>gt(Qe.failed,3);if(ie&&Qe.passed.push(ie),ae&&Qe.failed.push(ae),Qe.status===1)return;if(Qe.status===2){ke();return}if(Qe.status===3){we();return}Qe.status=1;const Ie=Y.fromTag("link",u.dom);ji(Ie,{rel:"stylesheet",type:"text/css",id:Qe.id}),n.contentCssCors&&qo(Ie,"crossOrigin","anonymous"),n.referrerPolicy&&qo(Ie,"referrerpolicy",n.referrerPolicy),be=Ie.dom,be.onload=ke,be.onerror=we,y(Ie),qo(Ie,"href",He)}),B=(se,ie)=>{const ae=D(se);r[se]=ae,ae.count++;const be=Y.fromTag("style",u.dom);ji(be,{rel:"stylesheet",type:"text/css",id:ae.id}),be.dom.innerHTML=ie,y(be)},W=se=>Promise.allSettled(De(se,ae=>R(ae).then(ze(ae)))).then(ae=>{const be=jn(ae,He=>He.status==="fulfilled");return be.fail.length>0?Promise.reject(De(be.fail,He=>He.reason)):De(be.pass,He=>He.value)}),G=se=>{const ie=Ke._addCacheSuffix(se);xo(r,ie).each(ae=>{--ae.count===0&&(delete r[ie],E(ae.id))})};return{load:R,loadRawCss:B,loadAll:W,unload:G,unloadRawCss:se=>{xo(r,se).each(ie=>{--ie.count===0&&(delete r[se],E(ie.id))})},unloadAll:_setReferrerPolicy:f,_setContentCssCors:b}},Xv=((),Pe=O0=(e,n,o)=>_e(e)&&(kg(e,n)||o.isInline(e.nodeName.toLowerCase())),ek=(e,n,o)=>{const r=new Wo(e,n).prev(!1),a=new Wo(e,n).next(!1),u=Jn(r)||O0(r,n,o),f=Jn(a)||O0(a,n,o);return u&&f},kp=e=>Pe(e)&&e.getAttribute("data-mce-type")==="bookmark",tk=(e,n,o)=>Ge(e)&&e.data.length>0&&ek(e,n,o),_g=e=>Et(e)?e.childNodes.length>0:!1,Jv=e=>Cs(e)||pp(e),_d=(e,n,o,r)=>{var a;const u=r||n;if(Et(n)&&kp(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)_d(e,f[b],o,u);if(Et(n)){const b=n.childNodes;b.length===1&&kp(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!Jv(n)&&!kg(n,u)&&!_g(n)&&!tk(n,u,o)&&e.remove(n),n},nk=Ke.makeMap,$u=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,No=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fu=/[<>&\"\']/g,Qv=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,hl={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},Ad={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ey={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Mf=e=>{const n=Y.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},xS=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!Ad[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},D0=xS("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ty=ok=ny=(e,n)=>e.replace(n?$u:No,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Ad[o]||"&#"+o.charCodeAt(0)+";"),Bf=Tm={encodeRaw:ty,encodeAllRaw:ok,encodeNumeric:ny,encodeNamed:Bf,getEncodeFunc:(e,n)=>{const o=xS(n)||D0,r=(f,b)=>f.replace(b?$u:No,y=>Ad[y]!==void 0?Ad[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),a=(f,b)=>Bf(f,b,o),u=nk(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:Bf:u.numeric?ny:ty},decode:e=>e.replace(Qv,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):hl[o]||String.fromCharCode(o)):ey[n]||D0[n]||Mf(n))},pc=(e,n)=>(e=Ke.trim(e),e?e.split(n||" "):[]),wt=sk=e=>{const n=/^(~)?(.+)$/;return Wr(pc(e,","),o=>{const r=n.exec(o);if(r){const a=r[1]==="~",u=a?"span":"div",f=r[2];return[{inline:a,cloneName:u,name:f}]}else return[]})},sy=e=>{let n,o,r;if(n="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const u="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav "+u,r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(n+=" xml:lang",r=[r,"acronym applet basefont big font strike tt"].join(" "),o=[o,"center dir isindex noframes"].join(" "));const a=[o,r].join(" ");return{globalAttributes:n,blockContent:o,phrasingContent:r,flowContent:a}},rk=e=>{const{globalAttributes:n,phrasingContent:o,flowContent:r}=sy(e),a={},u=(y,E,D)=>{a[y]={attributes:$o(E,ze({})),attributesOrder:E,children:$o(D,ze({}))}},f=(y,E="",D="")=>{const R=pc(D),B=pc(y);let W=B.length;const G=pc([n,E].join(" "));for(;W--;)u(B[W],G.slice(),R)},b=return e!=="html5-strict"&&(le(pc("acronym applet basefont big font strike tt"),D=>{f(D,"",o)}),le(pc("center dir isindex noframes"),D=>{f(D,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&le([a.video,a.audio],,le(pc("a form meter progress dfn"),,delete a.caption.children.table,delete a.script,a},ES=Pf=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Wr(pc(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?ES(a):"replace",f=r[2],b=pc(r[3],"|");return[{operation:u,name:f,validChildren:b}]}else return[]})},Ag=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return le(pc(e,"|"),f=>{const b=o.exec(f);if(b){const y={},E=b[1],D=b[2].replace(/[\\:]:/g,":"),R=b[3],B=b[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(D),y.required=!0),E==="-"){delete a[D],u.splice(Ke.inArray(u,D),1);return}if(R&&(R==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:D,value:B}),y.defaultValue=B):R==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:D,value:B}),y.forcedValue=B):R==="<"&&(y.validValues=Ke.makeMap(B,"?"))),r.test(D)){const W=y;n.attributePatterns=n.attributePatterns||[],W.pattern=wt(D),n.attributePatterns.push(W)}else a[D]||u.push(D),a[D]=y}})},_p=(e,n)=>{dt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Og=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Wr(pc(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],y=a[4],E=a[5],D={attributes:{},attributesOrder:[]};if(e.each(R=>_p(R,D)),u==="#"?D.paddEmpty=!0:u==="-"&&(D.removeEmpty=!0),y==="!"&&(D.removeEmptyAttrs=!0),E&&Ag(E,D),b&&(D.outputName=f),f==="@")if(e.isNone())e=$.some(D);else return[];return[b?{name:f,element:D,aliasName:b}:{name:f,element:D}]}else return[]})},R0={},Od=Ke.makeMap,Wl=Ke.each,Ap=Ke.extend,Ji=Ke.explode,N0=TS=Dg=(e,n)=>{if(e){const o={};return j(e)&&(e={"*":e}),Wl(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?Od(r,/[, ]/):Ji(r,/[, ]/)}),o}else return},Dd=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=y=(n=e.schema)!==null&&n!==void 0?n:"html5",E=rk(y);e.verify_html===!1&&(e.valid_elements="*[*]");const D=Dg(e.valid_styles),R=Dg(e.invalid_styles,"map"),B=Dg(e.valid_classes,"map"),W=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),G=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),z=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),q=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),se="td th iframe video audio object script code",ie=b("non_empty_elements",se+" pre svg",z),ae=b("move_caret_before_on_enter_elements",se+" table",z),be="h1 h2 h3 h4 h5 h6",He=b("text_block_elements",be+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Qe=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",He),gt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ke=b("transparent_elements","a ins del canvas map"),we=b("wrap_block_elements","pre "+be);Wl("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),;const Ie=dn=>{const eo=$.from(o["@"]),zo=/[*?+]/;le(Og(eo,dn!=null?dn:""),({name:ss,element:xs,aliasName:Pi})=>{if(Pi&&(o[Pi]=xs),zo.test(ss)){const rm=xs;rm.pattern=wt(ss),a.push(rm)}else o[ss]=xs})},xt=dn=>{a=[],le(Ys(o),,Ie(dn)},$t=dn=>{delete R0.text_block_elements,delete R0.block_elements,le(sk(dn!=null?dn:""),({inline:eo,name:zo,cloneName:ss})=>{if(r[zo]=r[ss],u[zo]=ss,ie[zo.toUpperCase()]={},ie[zo]={},eo||(Qe[zo.toUpperCase()]={},Qe[zo]={}),!o[zo]){let xs=o[ss];xs=Ap({},xs),delete xs.removeEmptyAttrs,delete xs.removeEmpty,o[zo]=xs}dt(r,})},Tn=dn=>{le(Pf(dn!=null?dn:""),({operation:eo,name:zo,validChildren:ss})=>{const xs=eo==="replace"?{"#comment":{}}:r[zo];le(ss,Pi=>{eo==="remove"?delete xs[Pi]:xs[Pi]={}}),r[zo]=xs})},wn=e.valid_elements?(xt(e.valid_elements),Wl(E,(dn,eo)=>{r[eo]=dn.children})):(Wl(E,,Wl(pc("strong/b em/i"),,Wl(gt,,Wl(pc("ol ul blockquote a table tbody"),dn=>{o[dn]&&(o[dn].removeEmpty=!0)}),Wl(pc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),,Wl(pc("span"),),delete o.svg,$t(e.custom_elements),Tn(e.valid_children),Ie(e.extended_valid_elements),Tn("+ol[ul|ol],+ul[ul|ol]"),Wl({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},,e.invalid_elements&&Wl(Ji(e.invalid_elements),,wn("span")||Ie("span[!data-mce-type|*]");const _o=ze(D),Vo=ze(R),qs=ze(B),Hc=ze(q),So=ze(Qe),rt=ze(He),Nt=ze(gt),xn=ze(Object.seal(z)),Nn=ze(G),kt=ze(ie),on=ze(ae),tt=ze(W),sn=ze(ke),Zn=ze(we),Bo=ze(Object.seal(f)),Ao=(dn,eo)=>{const zo=r[dn.toLowerCase()];return!!(zo&&zo[eo.toLowerCase()])},zr=(dn,eo)=>{const zo=wn(dn);if(zo)if(eo){if(zo.attributes[eo])return!0;const ss=zo.attributePatterns;if(ss){let xs=ss.length;for(;xs--;)if(ss[xs].pattern.test(eo))return!0}}else return!0;return!1},ld=dn=>Gt(So(),dn),uf=dn=>!is(dn,"#")&&zr(dn)&&!ld(dn),ai=dn=>Gt(Zn(),dn)||uf(dn),au=ze(u);return{type:y,children:r,elements:o,getValidStyles:_o,getValidClasses:qs,getBlockElements:So,getInvalidStyles:Vo,getVoidElements:xn,getTextBlockElements:rt,getTextInlineElements:Nt,getBoolAttrs:Hc,getElementRule:wn,getSelfClosingElements:Nn,getNonEmptyElements:kt,getMoveCaretBeforeOnEnterElements:on,getWhitespaceElements:tt,getTransparentElements:sn,getSpecialElements:Bo,isValidChild:Ao,isValid:zr,isBlock:ld,isInline:uf,isWrapper:ai,getCustomElements:au,addValidElements:Ie,setValidElements:xt,addCustomElements:$t,addValidChildren:Tn}},ck=e=>({value:Rg(e)}),Rg=e=>rl(e,"#").toUpperCase(),$f=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},pl=e=>{const n=$f(e.red)+$f(e.green)+$f(e.blue);return ck(n)},Ja=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ak=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,kS=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),_S=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return kS(a,u,f,b)},ry=e=>{if(e==="transparent")return $.some(kS(0,0,0,0));const n=Ja.exec(e);if(n!==null)return $.some(_S(n[1],n[2],n[3],"1"));const o=ak.exec(e);return o!==null?$.some(_S(o[1],o[2],o[3],o[4])):$.none()},Qa=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Ng=e=>ry(e).map(pl).map(.getOr(e),M0=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const y=vp;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let R=0;R<E.length;R++)u[E[R]]=y+R,u[y+R]=E[R];const D={parse:R=>{const B={};let W=!1;const G=e.url_converter,z=e.url_converter_scope||D,q=(ke,we,Ie)=>{const xt=B[ke+"-top"+we];if(!xt)return;const $t=B[ke+"-right"+we];if(!$t)return;const Tn=B[ke+"-bottom"+we];if(!Tn)return;const wn=B[ke+"-left"+we];if(!wn)return;const _o=[xt,$t,Tn,wn];let Vo=_o.length-1;for(;Vo--&&_o[Vo]===_o[Vo+1];);Vo>-1&&Ie||(B[ke+we]=Vo===-1?_o[0]:_o.join(" "),delete B[ke+"-top"+we],delete B[ke+"-right"+we],delete B[ke+"-bottom"+we],delete B[ke+"-left"+we])},se=ke=>{const we=B[ke];if(!we)return;const Ie=we.indexOf(",")>-1?[we]:we.split(" ");let xt=Ie.length;for(;xt--;)if(Ie[xt]!==Ie[0])return!1;return B[ke]=Ie[0],!0},ie=(ke,we,Ie,xt)=>{!se(we)||!se(Ie)||!se(xt)||(B[ke]=B[we]+" "+B[Ie]+" "+B[xt],delete B[we],delete B[Ie],delete B[xt])},ae=be=He=Qe=ke=>ke.replace(/\\[0-9a-f]+/gi,He),gt=(ke,we,Ie,xt,$t,Tn)=>{if($t=$t||Tn,$t)return $t=be($t),"'"+$t.replace(/\'/g,"\\'")+"'";if(we=be(we||Ie||xt||""),!e.allow_script_urls){const wn=we.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(wn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(wn))return""}return G&&(we=G.call(z,we,"style")),"url('"+we.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,ae).replace(/\"[^\"]+\"|\'[^\']+\'/g,we=>we.replace(/[;:]/g,ae));let ke;for(;ke=r.exec(R);){r.lastIndex=ke.index+ke[0].length;let we=ke[1].replace(a,"").toLowerCase(),Ie=ke[2].replace(a,"");if(we&&Ie){if(we=Qe(we),Ie=Qe(Ie),we.indexOf(y)!==-1||we.indexOf('"')!==-1||!e.allow_script_urls&&(we==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ie)))continue;we==="font-weight"&&Ie==="700"?Ie="bold":(we==="color"||we==="background-color")&&(Ie=Ie.toLowerCase()),j(e.force_hex_color)&&e.force_hex_color!=="off"&&ry(Ie).each(xt=>{(e.force_hex_color==="always"||xt.alpha===1)&&(Ie=Ng(Qa(xt)))}),Ie=Ie.replace(o,gt),B[we]=W?be(Ie,!0):Ie}}q("border","",!0),q("border","-width"),q("border","-color"),q("border","-style"),q("padding",""),q("margin",""),ie("border","border-width","border-style","border-color"),B.border==="medium none"&&delete B.border,B["border-image"]==="none"&&delete B["border-image"]}return B},serialize:(R,B)=>{let W="";const G=z=(q,se)=>{if(!b||!se)return!0;let ie=b["*"];return ie&&ie[q]?!1:(ie=b[se],!(ie&&ie[q]))};return B&&f?(G("*",f),G(B,f)):dt(R,(q,se)=>{q&&z(se,B)&&(W+=(W.length>0?" ":"")+se+": "+q+";")}),W}};return D},B0={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ik=AS=cy=e=>Xt(e.preventDefault)||ik(e),Mg=(e,n)=>{const o=n!=null?n:{};for(const r in e)Gt(B0,r)||(o[r]=e[r]);return _e(e.composedPath)&&(o.composedPath=()=>e.composedPath()),_e(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),_e(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Bg=(e,n,o,r)=>{var a;const u=Mg(n,r);return u.type=e,Xt(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),cy(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=We,te(n.preventDefault)&&n.preventDefault()},u.stopPropagation=u.stopImmediatePropagation=AS(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?We:ye,u.isPropagationStopped=u.cancelBubble===!0?We:ye,u.isImmediatePropagationStopped=ye)),u},P0="mce-data-",lk=/^(?:mouse|contextmenu)|click/,$0=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Pg=uk=e=>_e(e)&&lk.test(e.type),Op=(e,n)=>{const o=Bg(e.type,e,document,n);if(uk(e)&&Jn(e.pageX)&&!Jn(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},ay=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=u()?f():$0(e,"DOMContentLoaded",f),o.domLoaded||$0(e,"load",f)};class ei{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=P0+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,y=if(!n||Ge(n)||Sd(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),a=a||n;const D=o.split(" ");let R=D.length;for(;R--;){let B=D[R],W=y,G=!1,z=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(a,Op({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(G=!0,z=B==="focusin"?"focus":"blur",W=q=>{const se=Op(q||b.event);se.type=se.type==="focus"?"focusin":"focusout",u.executeHandlers(se,E)}),f=u.events[E][B],f?B==="ready"&&u.domLoaded?r(Op({type:B})):f.push({func:r,scope:a}):(u.events[E][B]=f=[{func:r,scope:a}],f.fakeName=z,f.capture=G,f.nativeHandler=W,B==="ready"?ay(n,W,u):$0(n,z||B,W,G))}return n=f=null,r}unbind(n,o,r){if(!n||Ge(n)||Sd(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],E=u[y];if(E){if(r){let D=E.length;for(;D--;)if(E[D].func===r){const R=E.nativeHandler,B=E.fakeName,W=E.capture,G=E.slice(0,D).concat(E.slice(D+1));G.nativeHandler=R,G.fakeName=B,G.capture=W,u[y]=G}}(!r||E.length===0)&&(delete u[y],Pg(n,E.fakeName||y,E.nativeHandler,E.capture))}}}else dt(u,,u={};for(const f in u)if(Gt(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch(f){n[this.expando]=null}}return this}ean(n){if(!n||Ge(n)||Sd(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}ecuteHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}ei.Event=new ei;const F0=Ke.each,OS=Ke.grep,L0="data-mce-style",BD=Ke.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),I0=(e,n,o)=>{Xt(o)||o===""?$s(e,n):qo(e,n,o)},km=Lu=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&Ge(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},iy=$g=H0=(e,n,o)=>{const r=km(n);Xt(o)||o===""?hm(e,r):g0(e,r,$g(o,r))},DS=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,y)=>{const E=Y.fromDom(f);te(n.url_converter)&&_e(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const D="data-mce-"+y;I0(E,D,b),I0(E,y,b)},get:(f,b)=>{const y=Y.fromDom(f);return Ac(y,"data-mce-"+b)||Ac(y,b)}},u={style:{set:(f,b)=>{const y=Y.fromDom(f);r&&I0(y,L0,b),$s(y,"style"),j(b)&&Nc(y,e.parse(b))},get:f=>{const b=Y.fromDom(f),y=Ac(b,L0)||Ac(b,"style");return e.serialize(e.parse(y),Bn(b))}}};return r&&(u.href=u.src=a),u},Zo=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,y=Xv.forElement(Y.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],D=n.schema?n.schema:Dd({}),R=M0({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,force_hex_color:n.force_hex_color},n.schema),B=n.ownEvents?new ei:ei.Event,W=D.getBlockElements(),G=z=q=ve=>{const Se=z(ve);return _e(Se)?Y.fromDom(Se):null},se=(ve,Se,ot="")=>{let Ye;const Bt=q(ve);if(_e(Bt)&&qr(Bt)){const Mn=Rv[Se];Mn&&Mn.get?Ye=Mn.get(Bt.dom,Se):Ye=Ac(Bt,Se)}return _e(Ye)?Ye:ot},ie=ae=(ve,Se,ot)=>{Nt(ve,Ye=>{if(Et(Ye)){const Bt=Y.fromDom(Ye),Mn=ot===""?null:ot,hs=Ac(Bt,Se),ii=Rv[Se];ii&&ii.set?ii.set(Bt.dom,Mn,Se):I0(Bt,Se,Mn),hs!==Mn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Bt.dom,attrName:Se,attrValue:Mn})}})},be=(ve,Se)=>ve.cloneNode(Se),He=Qe=gt=(ve,Se)=>Lo(e.body,z(ve),Se),ke=(ve,Se,ot)=>{Nt(ve,Ye=>{const Bt=Y.fromDom(Ye);H0(Bt,Se,ot),n.update_styles&&iy(R,Bt)})},we=(ve,Se)=>{Nt(ve,ot=>{const Ye=Y.fromDom(ot);dt(Se,(Bt,Mn)=>{H0(Ye,Mn,Bt)}),n.update_styles&&iy(R,Ye)})},Ie=(ve,Se,ot)=>{const Ye=z(ve);if(!(Xt(Ye)||!bm(Ye)&&!RD(Ye)))return ot?cr(Y.fromDom(Ye),km(Se)):(Se=Se.replace(/-(\D)/g,(Bt,Mn)=>Mn.toUpperCase()),Se==="float"&&(Se="cssFloat"),Ye.style?Ye.style[Se]:void 0)},xt=ve=>{const Se=z(ve);if(!Se)return{w:0,h:0};let ot=Ie(Se,"width"),Ye=Ie(Se,"height");return(!ot||ot.indexOf("px")===-1)&&(ot="0"),(!Ye||Ye.indexOf("px")===-1)&&(Ye="0"),{w:parseInt(ot,10)||Se.offsetWidth||Se.clientWidth,h:parseInt(Ye,10)||Se.offsetHeight||Se.clientHeight}},$t=Tn=(ve,Se)=>{if(!ve)return!1;const ot=hn(ve)?ve:[ve];return st(ot,Ye=>Wa(Y.fromDom(Ye),Se))},wn=(ve,Se,ot,Ye)=>{const Bt=[];let Mn=z(ve);Ye=Ye===void 0;const hs=ot||(He().nodeName!=="BODY"?He().parentNode:null);if(j(Se))if(Se==="*")Se=Et;else{const ii=Se;Se=cc=>Tn(cc,ii)}for(;Mn&&!(Mn===hs||Xt(Mn.nodeType)||pp(Mn)||Cs(Mn));){if(!Se||Se(Mn))if(Ye)Bt.push(Mn);else return[Mn];Mn=Mn.parentNode}return Ye?Bt:null},_o=Vo=qs=(ve,Se)=>Vo(ve,Se,"nextSibling"),Hc=(ve,Se)=>Vo(ve,Se,"previousSibling"),So=ve=>te(ve.querySelectorAll),rt=(ve,Se)=>{var ot,Ye;const Bt=(Ye=(ot=z(Se))!==null&&ot!==void 0?ot:n.root_element)!==null&&Ye!==void 0?Ye:e;return So(Bt)?ur(Bt.querySelectorAll(ve)):[]},Nt=function(ve,Se,ot){const Ye=ot!=null?ot:this;if(hn(ve)){const Bt=[];return F0(ve,,Bt}else{const Bt=z(ve);return Bt?Se.call(Ye,Bt):!1}},xn=Nn=(ve,Se)=>{Nt(ve,},kt=on=tt=Tm.decode,sn=Tm.encodeAllRaw,Zn=Bo=ve=>{const Se=e.createElement("div"),ot=e.createDocumentFragment();ot.appendChild(Se),ve&&(Se.innerHTML=ve);let Ye;for(;Ye=Se.firstChild;)ot.appendChild(Ye);return ot.removeChild(Se),ot},Ao=(ve,Se)=>Nt(ve,ot=>{const Ye=Y.fromDom(ot);return Se&&le(rr(Ye),Bt=>{Kr(Bt)&&Bt.dom.length===0?uo(Bt):mr(Ye,Bt)}),uo(Ye),Ye.dom}),zr=ld=ve=>R.parse(ve),uf=(ve,Se)=>R.serialize(ve,Se),ai=au=dn=(ve,Se,ot)=>{Nt(ve,Ye=>{if(Et(Ye)){const Bt=Y.fromDom(Ye),Mn=Se.split(" ");le(Mn,hs=>{_e(ot)?(ot?Su:il)(Bt,hs):c0(Bt,hs)})}})},eo=(ve,Se)=>{dn(ve,Se,!0)},zo=ss=xs=ve=>{Nt(ve,},Pi=ve=>{Nt(ve,Se=>g0(Y.fromDom(Se),"display","none"))},rm=qh=ve=>(ve||"mce_")+u++,nS=ve=>{const Se=q(ve);return _e(Se)?Et(Se.dom)?Se.dom.outerHTML:p0(Se):""},J1=Av=(ve,Se)=>{const ot=z(Se);return Nt(ve,Ye=>{const Bt=ot==null?void 0:ot.parentNode,Mn=ot==null?void 0:ot.nextSibling;return Bt&&(Mn?Bt.insertBefore(Ye,Mn):Bt.appendChild(Ye)),Ye})},Ov=(ve,Se,ot)=>Nt(Se,Ye=>{var Bt;const Mn=hn(Se)?ve.cloneNode(!0):ve;return ot&&F0(OS(Ye.childNodes),hs=>{Mn.appendChild(hs)}),(Bt=Ye.parentNode)===null||Bt===void 0||Bt.replaceChild(Mn,Ye),Ye}),oS=(ve,Se)=>{if(ve.nodeName!==Se.toUpperCase()){const ot=on(Se);return F0(ie(ve),,Ov(ot,ve,!0),ot}else return ve},Q1=e0=ve=>{if(Et(ve)){const Se=ve.nodeName.toLowerCase()==="a"&&!se(ve,"href")&&se(ve,"id");if(se(ve,"name")||se(ve,"data-mce-bookmark")||Se)return!0}return!1},ud=(ve,Se,ot)=>{let Ye=0;if(e0(ve))return!1;const Bt=ve.firstChild;if(Bt){const Mn=new Wo(Bt,ve),hs=D?D.getWhitespaceElements():{},ii=Se||(D?D.getNonEmptyElements():null);let cc=Bt;do{if(Et(cc)){const Yh=cc.getAttribute("data-mce-bogus");if(Yh){cc=Mn.next(Yh==="all");continue}const iu=cc.nodeName.toLowerCase();if(ii&&ii[iu]){if(iu==="br"){Ye++,cc=Mn.next();continue}return!1}if(e0(cc))return!1}if(Sd(cc)||Ge(cc)&&!Cm(cc.data)&&(!(ot!=null&&ot.includeZwsp)||!Of(cc.data))||Ge(cc)&&cc.parentNode&&hs[cc.parentNode.nodeName]&&Cm(cc.data))return!1;cc=Mn.next()}while(cc)}return Ye<=1},df=()=>e.createRange(),sS=(ve,Se,ot)=>{let Ye=df(),Bt,Mn;if(ve&&Se&&ve.parentNode&&Se.parentNode){const hs=ve.parentNode;return Ye.setStart(hs,Lu(ve)),Ye.setEnd(Se.parentNode,Lu(Se)),Bt=Ye.extractContents(),Ye=df(),Ye.setStart(Se.parentNode,Lu(Se)+1),Ye.setEnd(hs,Lu(ve)+1),Mn=Ye.extractContents(),hs.insertBefore(_d(ff,Bt,D),ve),ot?hs.insertBefore(ot,ve):hs.insertBefore(Se,ve),hs.insertBefore(_d(ff,Mn,D),ve),Ao(ve),ot||Se}else return},Dv=(ve,Se,ot,Ye)=>{if(hn(ve)){let Bt=ve.length;const Mn=[];for(;Bt--;)Mn[Bt]=Dv(ve[Bt],Se,ot,Ye);return Mn}else return n.collect&&(ve===e||ve===r)&&E.push([ve,Se,ot,Ye]),B.bind(ve,Se,ot,Ye||ff)},IT=(ve,Se,ot)=>{if(hn(ve)){let Ye=ve.length;const Bt=[];for(;Ye--;)Bt[Ye]=IT(ve[Ye],Se,ot);return Bt}else{if(E.length>0&&(ve===e||ve===r)){let Ye=E.length;for(;Ye--;){const[Bt,Mn,hs]=E[Ye];ve===Bt&&(!Se||Se===Mn)&&(!ot||ot===hs)&&B.unbind(Bt,Mn,hs)}}return B.unbind(ve,Se,ot)}},mf=(ve,Se,ot)=>B.dispatch(ve,Se,ot),HT=(ve,Se,ot)=>B.dispatch(ve,Se,ot),rS=ve=>{if(ve&&bm(ve)){const Se=ve.getAttribute("data-mce-contenteditable");return Se&&Se!=="inherit"?Se:ve.contentEditable!=="inherit"?ve.contentEditable:null}else return null},ff={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:E,styles:R,schema:D,events:B,isBlock:G,root:null,clone:be,getRoot:He,getViewPort:Qe,getRect:$t,getSize:xt,getParent:_o,getParents:wn,get:z,getNext:qs,getPrev:Hc,select:rt,is:Tn,add:kt,create:on,createHTML:Zn,createFragment:Bo,remove:Ao,setStyle:ke,getStyle:Ie,setStyles:we,removeAllAttribs:zr,setAttrib:ae,setAttribs:xn,getAttrib:se,getPos:gt,parseStyle:ld,serializeStyle:uf,addStyle:ai,loadCSS:au,addClass:eo,removeClass:zo,hasClass:ss,toggleClass:dn,show:xs,hide:Pi,isHidden:rm,uniqueId:qh,setHTML:Nn,getOuterHTML:nS,setOuterHTML:J1,decode:tt,encode:sn,insertAfter:Av,replace:Ov,rename:oS,findCommonAncestor:Q1,run:Nt,getAttribs:ie,isEmpty:ud,createRng:df,nodeIndex:Lu,split:sS,bind:Dv,unbind:IT,fire:HT,dispatch:mf,getContentEditable:rS,getContentEditableParent:ve=>{const Se=He();let ot=null;for(let Ye=ve;Ye&&Ye!==Se&&(ot=rS(Ye),ot===null);Ye=Ye.parentNode);return ot},isEditable:ve=>{if(_e(ve)){const Se=Et(ve)?ve:ve.parentElement;return _e(Se)&&bm(Se)&&bn(Y.fromDom(Se))}else return!1},destroy:isChildOf:dumpRng:,Rv=DS(R,n,ze(ff));return ff};Zo.DOM=Zo(document),Zo.nodeIndex=Lu;const dk=Zo.DOM,Ws=0,RS=1,fs=2,Fg=3;class hr{setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=dk;let u;const f=b=()=>{f(),o()},y=E=a.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=Ke._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}d(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Ws),new Promise(}dScripts(n){const o=this,r=a=y=>{const E=Ct(y,D=>D.status==="rejected");return E.length>0?Promise.reject(Wr(E,):Promise.resolve()},u=y=>Promise.allSettled(De(y,E=>o.states[E]===fs?(r("resolve",E),Promise.resolve()):o.states[E]===Fg?(r("reject",E),Promise.reject(E)):(o.states[E]=RS,o.loadScript(E).then(()=>{o.states[E]=fs,r("resolve",E);const D=o.queue;return D.length>0?(o.queue=[],u(D).then(a)):Promise.resolve()},()=>(o.states[E]=Fg,r("reject",E),Promise.reject(E)))))),f=b=Vi(n);return o.loading?new Promise((y,E)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,E)})}):f(b)}}hr.ScriptLoader=new hr;const Ss=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},yi=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},ly=bc=Dp={},Lg=Ss("en"),Iu=()=>xo(Dp,Lg.get()),bl={getData:setCode:e=>{e&&Lg.set(e)},getCode:()=>Lg.get(),add:(e,n)=>{let o=Dp[e];o||(Dp[e]=o={});const r=De(Ys(n),a=>a.toLowerCase());dt(n,(a,u)=>{const f=u.toLowerCase();f!==u&&yi(r,f)?(Gt(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=Iu().getOr({}),o=r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return Gt(n,b)?o(n[b]):xo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(ly(e))return o(e.raw);if(bc(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,;return u(b)}return u(a(e))},isRtl:()=>Iu().bind(e=>xo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Gt(Dp,e)},Zc=()=>{const e=[],n={},o={},r=[],a=u=z=>Gt(n,z),f=z=>Gt(o,z),b=y=(z,q)=>{const se=bl.getCode(),ie=","+(q||"")+",";!se||q&&ie.indexOf(","+se+",")===-1||hr.ScriptLoader.add(n[z]+"/langs/"+se+".js")},E=(z,q)=>{Zc.languageLoad!==!1&&(u(z)?y(z,q):G(z,"loaded").then(()=>y(z,q)))},D=R=B=W=(z,q)=>{if(n[z])return Promise.resolve();let se=j(q)?q:q.prefix+q.resource+q.suffix;se.indexOf("/")!==0&&se.indexOf("://")===-1&&(se=Zc.baseURL+"/"+se),n[z]=se.substring(0,se.lastIndexOf("/"));const ie=return o[z]?ie():hr.ScriptLoader.add(se).then(ie)},G=(z,q="added")=>q==="added"&&f(z)||q==="loaded"&&u(z)?Promise.resolve():new Promise(;return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:D,remove:R,createUrl:B,load:W,waitFor:G}};Zc.languageLoad=!0,Zc.baseURL="",Zc.PluginManager=Zc(),Zc.ThemeManager=Zc(),Zc.ModelManager=Zc();const fk=e=>{const n=Ss($.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set($.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set($.some(b))}}},gk=Am=()=>{const e=fk(Oe);return{...e,on:o=>e.get().each(o)}},Rp=(e,n)=>{let o=null;return{cancel:()=>{re(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{re(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},V0=(e,n)=>{let o=null;const r=()=>{re(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},z0=ze("mce-annotation"),Hu=ze("data-mce-annotation"),Hg=ze("data-mce-annotation-uid"),Vg=ze("data-mce-annotation-active"),zg=ze("data-mce-annotation-classes"),Ff=ze("data-mce-annotation-attrs"),MS=e=>n=>Qn(n,e),Fs=(e,n)=>{const o=e.selection.getRng(),r=Y.fromDom(o.startContainer),a=Y.fromDom(e.getBody()),u=n.fold(,f=Tu(r,o.startOffset).getOr(r);return fl(f,u,MS(a)).bind(},BS=Ug=PS=(e,n)=>{const o=Y.fromDom(e.getBody()),r=Jr(o,`[${Hg()}="${n}"]`);return Ct(r,a=>!Ug(a,o))},U0=(e,n)=>{const o=Y.fromDom(e.getBody()),r=Jr(o,`[${Hu()}="${n}"]`),a={};return le(r,,a},Mc=(e,n)=>{const o=Ss({}),r=a=u=(R,B)=>{const W=o.get(),G=xo(W,R).getOrThunk(r),z=B(G);W[R]=z,o.set(W)},f=b=y=E=V0(()=>{const R=Fo(n.getNames());le(R,B=>{u(B,W=>{const G=W.previous.get();return Fs(e,$.some(B)).fold(()=>{G.each(z=>{b(B),W.previous.clear(),y(z,!1)})},({uid:z,name:q,elements:se})=>{ts(G,z)||(G.each(ie=>y(ie,!1)),f(q,z,se),W.previous.set(z),y(z,!0))}),{previous:W.previous,listeners:W.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:},Ci=(e,n)=>{const o=Hu(),r=a=u=>{var f,b;u.attr(Hg(),null),u.attr(Hu(),null),u.attr(Vg(),null);const y=$.from(u.attr(Ff())).map(B=>B.split(",")).getOr([]),E=$.from(u.attr(zg())).map(B=>B.split(",")).getOr([]);le(y,B=>u.attr(B,null));const D=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=Ol(D,[z0()].concat(E));u.attr("class",R.length>0?R.join(" "):null),u.attr(zg(),null),u.attr(Ff(),null)};e.serializer.addTempAttr(Vg()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},$S=let W0=0;const Lf=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return W0++,e+"_"+r+W0+String(o)},hk=(e,n)=>{le(n,o=>{Su(e,o)})},FS=(e,n)=>{le(n,o=>{il(e,o)})},uy=(e,n)=>Y.fromDom(e.dom.cloneNode(n)),ti=e=>uy(e,!1),Z0=e=>uy(e,!0),Zs=(e,n)=>{const o=Y.fromTag(n),r=im(e);return ji(o,r),o},Zl=(e,n)=>{const o=Zs(e,n);Yi(e,o);const r=rr(e);return yo(o,r),uo(e),o},Wg=(e,n,o=ye)=>{const r=new Wo(e,n),a=u=>{let f;do f=r[u]();while(f&&!Ge(f)&&!o(f));return $.from(f).filter(Ge)};return{current:next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Om=(e,n)=>{const o=n||(,r=(f,b,y,E)=>{if(Ge(f)){const D=E(f,b,f.data);if(D!==-1)return $.some({container:f,offset:D})}return y().bind(};return{backwards:(f,b,y,E)=>{const D=Wg(f,E!=null?E:e.getRoot(),o);return r(f,b,y).getOrNull()},forwards:(f,b,y,E)=>{const D=Wg(f,E!=null?E:e.getRoot(),o);return r(f,b,y).getOrNull()}}},If=Math.round,Hf=Nd=LS=Vf=Dm=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Vf(n.top-e.bottom,e,n)},zf=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Vf(n.bottom-e.top,e,n),IS=pk=dy=bk=j0=(e,n,o)=>Math.min(Math.max(e,n),o),my=ni=(e,n)=>{if(Et(e)&&e.hasChildNodes()){const o=e.childNodes,r=j0(n,0,o.length-1);return o[r]}else return e},HS=(e,n)=>{if(!(n<0&&Et(e)&&e.hasChildNodes()))return ni(e,n)},Zg=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),VS=vk=Np=Rm=Et,G0=gr,Un=xf("display","block table"),oi=xf("float","left right"),jl=Np(Rm,G0,Rn(oi)),fy=Rn(xf("white-space","pre pre-line pre-wrap")),Co=Ge,Mp=Ro,gy=Zo.nodeIndex,Ar=HS,Vu=Nm=e=>j(e)&&/[\r\n\t ]/.test(e),hy=q0=Bp=py=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&Ge(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),zu(u)}else return null},K0=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,zu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Hf(r[0]):o=Hf(e.getBoundingClientRect()),!hy(e)&&Mp(e)&&K0(o)?Bp(e):K0(o)&&hy(e)&&(n=py(e))!==null&&n!==void 0?n:o},Md=yk=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&LS(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=Vu(f.ownerDocument);if(b<f.data.length){if(VS(f.data[b]))return;if(VS(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!q0(y))){o(Md(zu(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),q0(y)||o(Md(zu(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),q0(y)||o(Md(zu(y),!0)))},a=e.container(),u=e.offset();if(Co(a))return r(a,u),n;if(Rm(a))if(e.isAtEnd()){const f=Ar(a,u);Co(f)&&r(f,f.data.length),jl(f)&&!Mp(f)&&o(Md(zu(f),!1))}else{const f=Ar(a,u);if(Co(f)&&r(f,0),jl(f)&&e.isAtEnd())return o(Md(zu(f),!1)),n;const b=Ar(e.container(),e.offset()-1);jl(b)&&!Mp(b)&&(Un(b)||Un(f)||!jl(f))&&o(Md(zu(b),!1)),jl(f)&&o(Md(zu(f),!0))}return n},Ce=(e,n,o)=>{const r=()=>(Co(e),n===0),a=u=f=()=>(o||(o=yk(Ce(e,n))),o),b=y=E=return{container:ze(e),offset:ze(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:y,getNode:E}};Ce.fromRangeStart=e=>Ce(e.startContainer,e.startOffset),Ce.fromRangeEnd=e=>Ce(e.endContainer,e.endOffset),Ce.after=Ce.before=Ce.isAbove=(e,n)=>dr(Bs(n.getClientRects()),zc(e.getClientRects()),Dm).getOr(!1),Ce.isBelow=Ce.isAtStart=e=>e?e.isAtStart():!1,Ce.isAtEnd=e=>e?e.isAtEnd():!1,Ce.isTextPosition=e=>e?Ge(e.container()):!1,Ce.isElementPosition=e=>!Ce.isTextPosition(e);const Pp=(e,n)=>{Ge(n)&&n.data.length===0&&e.remove(n)},jg=Si=by=(e,n,o)=>{Cs(o)?Si(e,n,o):jg(e,n,o)},ns=Ge,Y0=Ll,Bd=Zo.nodeIndex,vy=X0=e=>e?lc(e.childNodes,(n,o)=>(Y0(o)&&o.nodeName!=="BR"?n=n.concat(X0(o)):n.push(o),n),[]):[],yy=$p=e=>n=>e===n,Gg=Cy=e=>(ns(e)?"text()":e.nodeName.toLowerCase())+"["+Gg(e)+"]",Ck=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e&&!(o&&o(a));a=a.parentNode)r.push(a);return r},ua=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(ns(r))u=yy(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(Cy(r));let f=Ck(e,r);return f=gu(f,Rn(Ll)),o=o.concat(na(f,b=>Cy(b))),o.reverse().join("/")+","+u},Or=vc=(e,n)=>{let o=e,r=0;for(;ns(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!ns(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return ns(e)&&n>e.data.length&&(n=e.data.length),Ce(e,n)},da=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=lc(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),Or(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!ns(u)&&u.parentNode){let f;return a==="after"?f=Bd(u)+1:f=Bd(u),Ce(u.parentNode,f)}return vc(u,parseInt(a,10))},Bc=zn,jc=Dr=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(Ge(u))b.push(o?jc(n,u,f):f);else{let E=0;const D=u.childNodes;f>=D.length&&D.length&&(E=1,f=Math.max(0,D.length-1)),b.push(e.nodeIndex(D[f],o)+E)}for(let E=u;E&&E!==y;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},Sy=(e,n,o,r)=>{const a=n.dom,u=Dr(a,e,o,r,!0),f=n.isForward(),b=bS(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=Dr(a,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Fp=(e,n,o)=>{let r=0;return Ke.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},wy=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Et(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Lp=xy=(e,n)=>{if(Et(e)&&(e=ni(e,n),Bc(e)))return e;if(hc(e)){Ge(e)&&yp(e)&&(e=e.parentNode);let o=e.previousSibling;if(Bc(o)||(o=e.nextSibling,Bc(o)))return o}},zS=J0=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||Bc(r)){const f=r.nodeName;return{name:f,index:Fp(o.dom,f,r)}}const u=zS(a);if(u){const f=u.tagName;return{name:f,index:Fp(o.dom,f,u)}}return Sy(e,o,n,a)},Ey=Sk=wk=US=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Fp(o,b,f)};const E=Lp(r.cloneRange());if(!u){E.collapse(!1);const R=wk(o,a+"_end",n);by(o,E,R)}r=Lp(r),r.collapse(!0);const D=wk(o,a+"_start",n);return by(o,r,D),e.moveToBookmark({id:a,keep:!0,forward:y}),{id:a,forward:y}},xk=(e,n,o=!1)=>n===2?J0(bi,o,e):n===3?Ey(e):n?Sk(e):US(e,!1),qg=Ne(J0,pn,!0),Q0=e=>{const n=u=>u(e),o=ze(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:We,isError:ye,map:u=>ka.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>$.some(e)};return a},WS=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:ye,isError:We,map:n,mapError:r=>ka.error(r(e)),bind:n,exists:ye,forall:We,getOr:pn,or:pn,getOrThunk:it,orThunk:it,getOrDie:cs(String(e)),each:Oe,toOptional:$.none};return o},ka={value:Q0,error:WS,fromOption:(e,n)=>e.fold(()=>WS(n),Q0)},Gl={generate:e=>{if(!hn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return le(e,(r,a)=>{const u=Ys(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!hn(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const E=y.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:match:R=>{const B=Ys(R);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!vs(n,G=>Re(B,G)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,y)},log:}}),o}};Gl.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const et=Ty=e=>e.type==="inline-command"||e.type==="inline-format",Rr=ZS=e=>{const n=o=(r,a,u)=>{if(e.format!==void 0){let f;if(hn(e.format)){if(!vs(e.format,j))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(j(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return ka.value(a(f))}else return e.cmd!==void 0?j(e.cmd)?ka.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ve(e))return n("Raw pattern is not an object");if(!j(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!j(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,a=e.end;return a.length===0&&(a=r,r=""),o("Inline",}else return e.replacement!==void 0?j(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):ka.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",},eb=e=>Ct(e,Rr),ky=e=>Ct(e,Ty),_a=(e,n)=>({inlinePatterns:ky(e),blockPatterns:eb(e),dynamicPatternsLookup:n}),Ek=e=>{const n=et(De(e,ZS));return le(n.errors,o=>{}),n.values},jS=Aa=Do().deviceType,Kg=Aa.isTouch(),Ip=Zo.DOM,Uu=vl=e=>Ht(e,RegExp),vt=e=>n=>n.options.get(e),wi=e=>j(e)||Ve(e),GS=(e,n="")=>o=>{const r=j(o);if(r)if(o.indexOf("=")!==-1){const a=Uu(o);return{value:xo(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},qS=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:GS(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:GS(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Re(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>bt(o)?{valid:!0,value:o}:j(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||j(o)||Xe(o,j);return r?j(o)?{value:De(o.split(","),mi),valid:r}:hn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ly(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=bt(o)||j(o);return r?o===!1||Aa.isiPhone()||Aa.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Kg}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||j(o)||te(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||j(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:wi}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:wi}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:wi}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>j(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Xe(o,Ve)||o===!1?{value:Ek(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>te(o)?{value:jS(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Re(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Re(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("force_hex_color",{processor:o=>{const r=["always","rgb_only","off"],a=Re(r,o);return a?{value:o,valid:a}:{valid:!1,message:`Must be one of: ${r.join(", ")}.`}},default:"off"}),n("sandbox_iframes",{processor:"boolean",default:!1}),n("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",},_y=vt("iframe_attrs"),KS=vt("doctype"),Ay=vt("document_base_url"),Oy=vt("body_id"),Tk=vt("body_class"),Dy=vt("content_security_policy"),kk=vt("br_in_pre"),Gc=vt("forced_root_block"),Hp=vt("forced_root_block_attrs"),_k=vt("newline_behavior"),Ak=vt("br_newline_selector"),Ry=vt("no_newline_selector"),Ok=vt("keep_styles"),YS=vt("end_container_on_empty_block"),XS=vt("automatic_uploads"),Vp=vt("images_reuse_filename"),JS=vt("images_replace_blob_uris"),Ny=vt("icons"),Uf=vt("icons_url"),Dk=vt("images_upload_url"),Rk=vt("images_upload_base_path"),My=vt("images_upload_credentials"),Nk=vt("images_upload_handler"),Pd=vt("content_css_cors"),_n=vt("referrer_policy"),By=vt("language"),qc=vt("language_url"),tb=vt("indent_use_margin"),Py=vt("indentation"),$y=vt("content_css"),nb=vt("content_style"),QS=vt("font_css"),Mk=vt("directionality"),Bk=vt("inline_boundaries_selector"),Yg=vt("object_resizing"),ew=vt("resize_img_proportional"),ID=vt("placeholder"),Mm=vt("event_root"),Pk=vt("service_message"),Xg=vt("theme"),$k=vt("theme_url"),Fy=vt("model"),tw=vt("model_url"),Wf=vt("inline_boundaries"),Fk=vt("formats"),nw=vt("preview_styles"),ow=vt("format_empty_lines"),Jg=vt("format_noneditable_selector"),sw=vt("custom_ui_selector"),Ly=vt("inline"),Lk=vt("hidden_input"),rw=vt("submit_patch"),Wu=vt("add_form_submit_trigger"),zp=vt("add_unload_trigger"),Up=vt("custom_undo_redo_levels"),ob=vt("disable_nodechange"),Wp=vt("readonly"),Qi=vt("editable_root"),Qg=vt("content_css_cors"),Zp=vt("plugins"),Bm=vt("external_plugins"),sb=vt("block_unsupported_drop"),Ik=vt("visual"),Hk=vt("visual_table_class"),cw=vt("visual_anchor_class"),Vk=vt("iframe_aria_text"),Iy=vt("setup"),zk=vt("init_instance_callback"),Uk=vt("urlconverter_callback"),aw=vt("auto_focus"),Wk=vt("browser_spellcheck"),iw=vt("protect"),Zk=vt("paste_block_drop"),rb=vt("paste_data_images"),jk=vt("paste_preprocess"),lw=vt("paste_postprocess"),eh=vt("newdocument_content"),Hy=vt("paste_webkit_styles"),Vy=vt("paste_remove_styles_if_webkit"),zy=vt("paste_merge_formats"),uw=vt("smart_paste"),Uy=vt("paste_as_text"),Gk=vt("paste_tab_spaces"),cb=vt("allow_html_data_urls"),ab=vt("text_patterns"),qk=vt("text_patterns_lookup"),Wy=vt("noneditable_class"),dw=vt("editable_class"),Kk=vt("noneditable_regexp"),Zy=vt("preserve_cdata"),Yk=vt("highlight_on_focus"),th=vt("xss_sanitization"),Xk=vt("init_content_sync"),jy=e=>e.options.isSet("text_patterns_lookup"),Jk=e=>Ke.explode(e.options.get("font_size_style_values")),Qk=e=>Ke.explode(e.options.get("font_size_classes")),e_=e=>e.options.get("encoding")==="xml",mw=e=>Ke.explode(e.options.get("images_file_types")),t_=vt("table_tab_navigation"),nc=vt("details_initial_state"),HD=vt("details_serialized_state"),nh=vt("force_hex_color"),ib=vt("sandbox_iframes"),fw=Et,Gy=Ge,gw=hw=Zf=e=>{let n;for(;(n=e.data.lastIndexOf(ec))!==-1;)e.deleteData(n,1)},jp=n_=o_=(e,n)=>{const o=n.container(),r=Ns(ur(o.childNodes),e).map(.getOr(n);return Nr(e),r},Gp=(e,n)=>Gy(e)&&n.container()===e?n_(e,n):jp(e,n),qy=(e,n)=>n.container()===e.parentNode?o_(e,n):jp(e,n),pw=(e,n)=>Ce.isTextPosition(n)?Gp(e,n):qy(e,n),Nr=e=>{fw(e)&&hc(e)&&(zv(e)?e.removeAttribute("data-mce-caret"):gw(e)),Gy(e)&&(Zf(e),e.data.length===0&&gw(e))},bw=zn,Ky=zs,VD=bp,oh="*[contentEditable=false],video,audio,embed,object",s_=(e,n,o)=>{const r=Nd(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},vw=e=>{var n,o;const r=Jr(Y.fromDom(e),oh);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(Sg(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,_f(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},Yy=(e,n,o,r)=>{const a=Am();let u,f;const b=Gc(e),y=e.dom,E=(z,q)=>{let se;if(D(),VD(q))return null;if(o(q)){const ie=hS(b,q,z),ae=s_(n,q,z);y.setStyle(ie,"top",ae.top),f=ie;const be=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(be,{...ae}),y.add(n,be),a.set({caret:be,element:q,before:z}),z&&y.addClass(be,"mce-visual-caret-before"),R(),se=q.ownerDocument.createRange(),se.setStart(ie,0),se.setEnd(ie,0)}else return f=XT(q,z),se=q.ownerDocument.createRange(),lb(f.nextSibling)?(se.setStart(f,0),se.setEnd(f,0)):(se.setStart(f,1),se.setEnd(f,1)),se;return se},D=()=>{vw(n),f&&(Nr(f),f=null),a.on(,u&&(clearInterval(u),u=void 0)},R=()=>{u=setInterval(500)};return{show:E,hide:D,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:destroy:()=>clearInterval(u)}},qp=lb=e=>bw(e)||Ky(e),sh=e=>(lb(e)||Au(e)&&qp())&&ul(Y.fromDom(e)).exists(bn),r_=la,Pm=zn,yw=zs,$m=xf("display","block table table-cell table-caption list-item"),Fm=hc,Xy=yp,Cw=Et,zD=Ge,Jy=gr,Lm=Zu=e=>e<0,Kp=rh=Qy=(e,n)=>{const o=a=>r_(a.dom),r=a=>a.dom===n;return ys(Y.fromDom(e),o,r).map(a=>a.dom).getOr(n)},$d=ql=Yp=ub=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},Xp=e2=ch=Ne(ub,!0),Jp=Ne(ub,!1),t2=(e,n,o)=>{let r;const a=Ne(e2,!0,n),u=Ne(e2,!1,n),f=o.startContainer,b=o.startOffset;if(yp(f)){const y=zD(f)?f.parentNode:f,E=y.getAttribute("data-mce-caret");if(E==="before"&&(r=y.nextSibling,sh(r)))return ch(r);if(E==="after"&&(r=y.previousSibling,sh(r)))return Jp(r)}if(!o.collapsed)return o;if(Ge(f)){if(Fm(f)){if(e===1){if(r=u(f),r)return ch(r);if(r=a(f),r)return Jp(r)}if(e===-1){if(r=a(f),r)return Jp(r);if(r=u(f),r)return ch(r)}return o}if(Sg(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?ch(r):o;if(_f(f)&&b<=1)return e===-1&&(r=a(f),r)?Jp(r):o;if(b===f.data.length)return r=u(f),r?ch(r):o;if(b===0)return r=a(f),r?Jp(r):o}return o},Sw=Im=(e,n,o)=>{const r=t2(e,n,o);return e===-1?Ce.fromRangeStart(r):Ce.fromRangeEnd(r)},db=e=>$.from(e.getNode()).map(Y.fromDom),c_=e=>$.from(e.getNode(!0)).map(Y.fromDom),ww=n2=(e,n)=>{const o=ql(e,n);return!o&&Ro(e.getNode())?!0:o};var js;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(js||(js={}));const UD=zn,Fd=Ge,xw=Et,mb=Ro,Hm=gr,Pc=Ya,ah=w0,Qp=ih=o2=lh=jf=(e,n,o)=>{let r,a,u,f;if(!xw(o)||!n)return null;if(n.isEqual(Ce.after(o))&&o.lastChild){if(f=Ce.after(o.lastChild),Zu(e)&&Hm(o.lastChild)&&xw(o.lastChild))return mb(o.lastChild)?Ce.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Fd(b)){if(Zu(e)&&y>0)return Ce(b,--y);if(Lm(e)&&y<b.length)return Ce(b,++y);r=b}else{if(Zu(e)&&y>0&&(a=ih(b,y-1),Hm(a)))return!Pc(a)&&(u=rh(a,e,ah,a),u)?Fd(u)?Ce(u,u.data.length):Ce.after(u):Fd(a)?Ce(a,a.data.length):Ce.before(a);if(Lm(e)&&y<b.childNodes.length&&(a=ih(b,y),Hm(a)))return mb(a)?lh(o,a):!Pc(a)&&(u=rh(a,e,ah,a),u)?Fd(u)?Ce(u,0):Ce.before(u):Fd(a)?Ce(a,0):Ce.after(a);r=a||f.getNode()}if(r&&(Lm(e)&&f.isAtEnd()||Zu(e)&&f.isAtStart())&&(r=rh(r,e,We,o,!0),ah(r,o)))return o2(e,r);a=r&&rh(r,e,ah,o);const E=xc(Ct(Qp(b,o),UD));return E&&(!a||!E.contains(a))?(Lm(e)?f=Ce.after(E):f=Ce.before(E),f):a?o2(e,a):null},Kl=a_=i_=Vm=e=>Ce.isTextPosition(e)?e.offset()===0:gr(e.getNode()),uh=e=>{if(Ce.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return gr(e.getNode(!0))},fb=ju=e=>!Ce.isTextPosition(e)&&Ro(e.getNode()),s2=(e,n,o)=>e?!fb(n,o)&&!ju(n)&&uh(n)&&Vm(o):!fb(o,n)&&Vm(n)&&uh(o),oc=Ld=(e,n,o)=>oc(e,n,o).bind(r=>ql(o,r,n)&&s2(e,o,r)?oc(e,n,r):$.some(r)),yl=dh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Ge(o)?$.some(Ce(o,e?0:o.data.length)):o?gr(o)?$.some(e?Ce.before(o):i_(o)):a_(e,n,o):$.none()},Kc=Ne(oc,!0),Oa=Ne(oc,!1),ma=Ne(dh,!0),Cl=Ne(dh,!1),gb="_mce_caret",xi=Gf=r2=e=>j(e.start),l_=e=>Gt(e,"rng"),Ew=e=>Gt(e,"id"),e1=e=>Gt(e,"name"),Tw=e=>Ke.isArray(e.start),t1=e=>!e1(e)&&bt(e.forward)?e.forward:!0,hb=u_=kw=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ec);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},d_=WD=_w=(e,n,o)=>d_(n)&&Gf(e,n)?(kw(n,o),!0):!1,Ln=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let y=a.length-1;f&&y>=1;y--){const E=f.childNodes;if(_w(u,f,r))return!0;if(a[y]>E.length-1)return _w(u,f,r)?!0:WD(f,r);f=E[a[y]]}Ge(f)&&(b=Math.min(a[0],f.data.length)),Et(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},Yl=qf=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Yl(r.nextSibling)?(f=r.nextSibling,b=0):Yl(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Yl(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const y=r.previousSibling,E=r.nextSibling;Ke.each(Ke.grep(r.childNodes),;let D;for(;D=e.get(o.id+"_"+n);)e.remove(D,!0);if(Ge(E)&&Ge(y)&&!ht.browser.isOpera()){const R=y.data.length;y.appendData(E.data),e.remove(E),f=y,b=R}}return $.some(Ce(f,b))}else return $.none()},c2=Aw=n1=m_=(e,n)=>{const o=e.dom;if(n){if(Tw(n))return c2(o,n);if(r2(n))return u_(o,n);if(Ew(n))return Aw(o,n);if(e1(n))return n1(o,n);if(l_(n))return $.some({range:n.rng,forward:t1(n)})}return $.none()},mh=(e,n,o)=>xk(e,n,o),pb=(e,n)=>{m_(e,n).each(},Ei=e=>Et(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",bb=(e=>n=>e===n)(oo),fh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,zm=vb=yb=e=>Wr(e,n=>{const o=my(n);return o?[Y.fromDom(o)]:[]}),Kf=e=>vb(e).length>1,f_=e=>Ct(yb(e),qa),Ow=e=>Jr(e,"td[data-mce-selected],th[data-mce-selected]"),g_=(e,n)=>{const o=Ow(n);return o.length>0?o:f_(e)},gh=e=>g_(vb(e.selection.getSel()),Y.fromDom(e.getBody())),Id=(e,n)=>ku(e,"table",n),h_=e=>{const n=e.startContainer,o=e.startOffset;return Ge(n)?o===0?$.some(Y.fromDom(n)):$.none():$.from(n.childNodes[o]).map(Y.fromDom)},p_=e=>{const n=e.endContainer,o=e.endOffset;return Ge(n)?o===n.data.length?$.some(Y.fromDom(n)):$.none():$.from(n.childNodes[o-1]).map(Y.fromDom)},Dw=a2=e=>hi(e).fold(ze([e]),n=>Bn(n)==="br"?gi(n).map(.getOr([]):[e].concat(a2(n))),i2=(e,n)=>dr(h_(n),p_(n),.getOr(!1),l2=(e,n,o,r)=>{const a=o,u=new Wo(o,a),f=wo(e.schema.getMoveCaretBeforeOnEnterElements(),;let b=o;do{if(Ge(b)&&Ke.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},Cb=Um=Rw=o1=e=>go(e==null?void 0:e.nodeType),u2=e=>Et(e)&&!Ei(e)&&!xi(e)&&!Ll(e),b_=(e,n)=>{if(u2(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},s1=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=zn(u);Rw(r,!0,()=>{n()}),f&&zn(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&v_(a,r)},v_=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!b_(e,b)&&Et(u)){const y=u.childNodes,E=e.getRoot();let D;if(f<y.length){const R=y[f];D=new Wo(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:E)}else{const R=y[y.length-1];D=new Wo(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:E),D.next(!0)}for(let R=D.current();R;R=D.next()){if(e.getContentEditable(R)==="false")return;if(Ge(R)&&!er(R)){a.setStart(R,0),n.setRng(a);return}}}},pt=pr=Hd=er=(e,n=!1)=>{if(_e(e)&&Ge(e)){const o=n?e.data.replace(/ /g,"\xA0"):e.data;return Cm(o)}else return!1},el=e=>_e(e)&&Ge(e)&&e.length===0,Sb=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Jg(e),a=Sr(r)?o:`${o},${r}`;return Wa(Y.fromDom(n),a)},r1=(e,n)=>{const o=e.dom;return u2(n)&&o.getContentEditable(n)==="false"&&Sb(e,n)&&o.select('[contenteditable="true"]',n).length===0},Xl=wb=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),xb=(e,n)=>{if(Xt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Ng(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},hh=Nw=(e,n)=>{let o;return e.getParent(n,r=>Et(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},c1=d2=m2=(e,n)=>d2(e,n,r=>{const a=u=>te(u)||u.length>1&&u.charAt(0)==="%";return st(["styles","attributes"],}),y_=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=return d2(e,n,u=>{const f=a(u);return d2(e,o,b=>{const y=a(b);return La(f,y)})})},Jl=e=>Zr(e,"block"),Eb=e=>Jl(e)&&e.wrapper===!0,ph=e=>Jl(e)&&e.wrapper!==!0,yc=e=>Zr(e,"selector"),ir=e=>Zr(e,"inline"),Tb=a1=e=>yc(e)&&e.expand!==!1&&!ir(e),kb=i1=e=>kb(e).length>0,l1=e=>xi(e.dom)&&i1(e.dom),bh=Ei,Mw=c1,u1=er,Bw=pr,Pw=e=>Ro(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,$w=(e,n)=>{let o=n;for(;o;){if(Et(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},tl=$c=Sl=(e,n,o)=>tl(e,n,o,zm),Da=d1=(e,n,o,r,a)=>{const u=r[a];Ge(r)&&Sr(r.data)&&u&&(r=u);const f=Mw(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const E=n[y];if(!(_e(E.collapsed)&&E.collapsed!==o.collapsed)&&yc(E)&&e.is(f[b],E.selector))return f[b]}return r},_b=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(Jl(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(Ge(o)?o.parentNode:o,y)}if(u&&Jl(b)&&b.wrapper&&(u=Mw(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!wb(u,"br")););return u||o},Fw=(e,n,o,r)=>{const a=o.parentNode;return _e(o[r])?!1:a===n||Xt(a)||e.isBlock(a)?!0:Fw(e,n,a,r)},m1=(e,n,o,r,a)=>{let u=o;const f=a?"previousSibling":"nextSibling",b=e.getRoot();if(Ge(o)&&!u1(o)&&(a?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const E=Ge(y)&&!Fw(e,b,y,f);if(!bh(y)&&!Pw(y)&&!u1(y,E))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},C_=Vd=(e,n,o,r=!1)=>{let{startContainer:a,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return Et(a)&&a.hasChildNodes()&&(a=ni(a,u),Ge(a)&&(u=0)),Et(f)&&f.hasChildNodes()&&(f=ni(f,n.collapsed?b:b-1),Ge(f)&&(b=f.data.length)),a=$w(e,a),f=$w(e,f),C_(a)&&(a=bh(a)?a:a.parentNode,n.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,Ge(a)&&(u=n.collapsed?a.length:0)),C_(f)&&(f=bh(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,Ge(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(Da(e,e.getRoot(),a,u,!0,r).each(({container:R,offset:B})=>{a=R,u=B}),Da(e,e.getRoot(),f,b,!1,r).each(),(ir(y)||y.block_expand)&&((!ir(y)||!Ge(a)||u===0)&&(a=m1(e,o,a,u,!0)),(!ir(y)||!Ge(f)||b===f.data.length)&&(f=m1(e,o,f,b,!1))),a1(y)&&(a=d1(e,o,n,a,"previousSibling"),f=d1(e,o,n,f,"nextSibling")),(Jl(y)||yc(y))&&(a=_b(e,o,a,"previousSibling"),f=_b(e,o,f,"nextSibling"),Jl(y)&&(e.isBlock(a)||(a=m1(e,o,a,u,!0)),e.isBlock(f)||(f=m1(e,o,f,b,!1)))),Et(a)&&a.parentNode&&(u=e.nodeIndex(a),a=a.parentNode),Et(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:a,startOffset:u,endContainer:f,endOffset:b}},f1=(e,n,o)=>{var r;const a=n.startOffset,u=ni(n.startContainer,a),f=n.endOffset,b=ni(n.endContainer,f-1),y=q=>{const se=q[0];Ge(se)&&se===u&&a>=se.data.length&&q.splice(0,1);const ie=q[q.length-1];return f===0&&q.length>0&&ie===b&&Ge(ie)&&q.splice(q.length-1,1),q},E=D=R=if(u===b)return o(y([u]));const B=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,B,!0);if(e.isChildOf(b,u))return R(b,B);const W=D(u,B)||u,G=D(b,B)||b;R(u,W,!0);const z=E(W===u?W:W.nextSibling,"nextSibling",G===b?G.nextSibling:G);z.length&&o(y(z)),R(b,G)},f2=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Lw=e=>Kr(e)&&Vl(e)===ec,Iw=(e,n,o,r)=>Yr(n).fold(()=>"skipping",a=>r==="br"||Lw(n)?"valid":BS(n)?"existing":xi(n.dom)?"caret":st(f2,u=>Wa(n,u))?"valid-block":!Hd(e,o,r)||!Hd(e,Bn(a),o)?"invalid-child":"valid"),g2=Ab=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;Su(e,z0()),qo(e,`${Hg()}`,f),qo(e,`${Hu()}`,r);const{attributes:y={},classes:E=[]}=a(f,b);if(ji(e,y),hk(e,E),u){E.length>0&&qo(e,`${zg()}`,E.join(","));const D=Ys(y);D.length>0&&qo(e,`${Ff()}`,D.join(","))}},Mo=e=>{il(e,z0()),$s(e,`${Hg()}`),$s(e,`${Hu()}`),$s(e,`${Vg()}`);const n=al(e,`${Ff()}`).map(r=>r.split(",")).getOr([]),o=al(e,`${zg()}`).map(r=>r.split(",")).getOr([]);le(n,r=>$s(e,r)),FS(e,o),$s(e,`${zg()}`),$s(e,`${Ff()}`)},zd=(e,n,o,r,a)=>{const u=Y.fromTag("span",e);return Ab(u,n,o,r,a,!1),u},Hw=(e,n,o,r,a,u)=>{const f=[],b=zd(e.getDoc(),o,u,r,a),y=Am(),E=()=>{y.clear()},D=()=>y.get().getOrThunk(,R=G=>{le(G,B)},B=G=>{switch(Iw(e,G,"span",Bn(G))){case"invalid-child":{E();const q=rr(G);R(q),E();break}case"valid-block":{E(),Ab(G,o,u,r,a,!0);break}case"valid":{const q=D();mp(G,q);break}}},W=G=>{const z=De(G,Y.fromDom);R(z)};return f1(e.dom,n,,f},h2=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=gh(e).length>0,b=Lf("mce-annotation");if(u.collapsed&&!f&&g2(e,u),a.getRng().collapsed&&!f){const y=zd(e.getDoc(),b,r,n,o.decorate);pm(y,oo),a.getRng().insertNode(y.dom),a.select(y.dom)}else Rw(a,!1,})},p2=e=>{const n=$S();Ci(e,n);const o=Mc(e,n),r=Ua("span"),a=u=>{le(u,};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{h2(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Fs(e,$.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:getAll:},Yf=Yf.isBookmarkNode=Ei;const b2=(e,n,o)=>o.collapsed?!1:st(o.getClientRects(),r=>IS(r,e,n)),v2=(e,n)=>e.dispatch("PreProcess",n),S_=(e,n)=>e.dispatch("PostProcess",n),vh=e=>{e.dispatch("remove")},yh=e=>{e.dispatch("detach")},y2=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},C2=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},wl=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},Wm=e=>{e.dispatch("PreInit")},w_=e=>{e.dispatch("PostRender")},g1=e=>{e.dispatch("Init")},x_=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},si=(e,n,o)=>{e.dispatch(n,o)},Fc=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Xf=ZD=(e,n)=>e.dispatch("BeforeSetContent",n),Vw=(e,n)=>e.dispatch("SetContent",n),E_=(e,n)=>e.dispatch("BeforeGetContent",n),Pn=(e,n)=>e.dispatch("GetContent",n),S2=(e,n)=>{e.dispatch("AutocompleterStart",n)},zw=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},w2=e=>{e.dispatch("AutocompleterEnd")},T_=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),k_=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Uw=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),__=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),yt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:metaKeyPressed:,Zm="data-mce-selected",Ww="table,img,figure.image,hr,video,span.mce-preview-object,details",h1=Math.abs,p1=Math.round,A_={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},jD=e=>e.type==="longpress"||e.type.indexOf("touch")===0,GD=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,y,E,D,R,B,W,G,z,q,se,ie,ae,be,He,Qe;const gt=ke=we=(tt,sn)=>{if(jD(tt)){const Zn=tt.touches[0];return gt(tt.target)&&!b2(Zn.clientX,Zn.clientY,sn)}else return gt(tt.target)&&!b2(tt.clientX,tt.clientY,sn)},Ie=tt=>{const sn=tt.target;we(tt,n.selection.getRng())&&!tt.isDefaultPrevented()&&n.selection.select(sn)},xt=$t=tt=>{const sn=Yg(n);return!sn||tt.getAttribute("data-mce-resize")==="false"||tt===n.getBody()?!1:o.hasClass(tt,"mce-preview-object")&&_e(tt.firstElementChild)?Wa(Y.fromDom(tt.firstElementChild),sn):Wa(Y.fromDom(tt),sn)},Tn=tt=>ke(tt)?o.create("img",{src:ht.transparentSrc}):tt.cloneNode(!0),wn=_o=Vo=tt=>{let sn,Zn,Bo,Ao,zr;sn=tt.screenX-R,Zn=tt.screenY-B,ae=sn*E[2]+z,be=Zn*E[3]+q,ae=ae<5?5:ae,be=be<5?5:be,(gt(f)||ke(f))&&ew(n)!==!1?Bo=!yt.modifierPressed(tt):Bo=yt.modifierPressed(tt),Bo&&(h1(sn)>h1(Zn)?(be=p1(ae*se),ae=p1(be/se)):(ae=p1(be/se),be=p1(ae*se))),_o(b,ae,be),Ao=E.startPos.x+sn,zr=E.startPos.y+Zn,Ao=Ao>0?Ao:0,zr=zr>0?zr:0,o.setStyles(y,{left:Ao,top:zr,display:"block"}),y.innerHTML=ae+" &times; "+be,E[2]<0&&b.clientWidth<=ae&&o.setStyle(b,"left",W+(z-ae)),E[3]<0&&b.clientHeight<=be&&o.setStyle(b,"top",G+(q-be)),sn=u.scrollWidth-He,Zn=u.scrollHeight-Qe,sn+Zn!==0&&o.setStyles(y,{left:Ao-sn,top:zr-Zn}),ie||(C2(n,f,z,q,"corner-"+E.name),ie=!0)},qs=()=>{const tt=ie;ie=!1,tt&&(wn(f,"width",ae),wn(f,"height",be)),o.unbind(r,"mousemove",Vo),o.unbind(r,"mouseup",qs),a!==r&&(o.unbind(a,"mousemove",Vo),o.unbind(a,"mouseup",qs)),o.remove(b),o.remove(y),o.remove(D),Hc(f),tt&&(wl(n,f,ae,be,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Hc=tt=>{Nn();const sn=o.getPos(tt,u),Zn=sn.x,Bo=sn.y,Ao=tt.getBoundingClientRect(),zr=Ao.width||Ao.right-Ao.left,ld=Ao.height||Ao.bottom-Ao.top;f!==tt&&(rt(),f=tt,ae=be=0);const uf=n.dispatch("ObjectSelected",{target:tt});$t(tt)&&!uf.isDefaultPrevented()?dt(A_,(ai,au)=>{const dn=zo=>{const ss=xt(f)[0];R=zo.screenX,B=zo.screenY,z=ss.clientWidth,q=ss.clientHeight,se=q/z,E=ai,E.name=au,E.startPos={x:zr*ai[0]+Zn,y:ld*ai[1]+Bo},He=u.scrollWidth,Qe=u.scrollHeight,D=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Tn(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Zn,top:Bo,margin:0}),_o(b,zr,ld),b.removeAttribute(Zm),u.appendChild(b),o.bind(r,"mousemove",Vo),o.bind(r,"mouseup",qs),a!==r&&(o.bind(a,"mousemove",Vo),o.bind(a,"mouseup",qs)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},z+" &times; "+q)};let eo=o.get("mceResizeHandle"+au);eo&&o.remove(eo),eo=o.add(u,"div",{id:"mceResizeHandle"+au,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+au+"-resize; margin:0; padding:0"}),o.bind(eo,"mousedown",,ai.elm=eo,o.setStyles(eo,{left:zr*ai[0]+Zn-eo.offsetWidth/2,top:ld*ai[1]+Bo-eo.offsetHeight/2})}):rt(!1)},So=Rp(Hc,0),rt=Nt=(tt,sn)=>o.isChildOf(tt,sn),xn=tt=>{if(ie||n.removed||n.composing)return;const sn=tt.type==="mousedown"?tt.target:e.getNode(),Zn=fl(Y.fromDom(sn),Ww).map(Ao=>Ao.dom).filter(Ao=>o.isEditable(Ao.parentElement)||Ao.nodeName==="IMG"&&o.isEditable(Ao)).getOrUndefined(),Bo=_e(Zn)?o.getAttrib(Zn,Zm,"1"):"1";if(le(o.select(`img[${Zm}],hr[${Zm}]`),Ao=>{Ao.removeAttribute(Zm)}),_e(Zn)&&Nt(Zn,u)&&n.hasFocus()){kt();const Ao=e.getStart(!0);if(Nt(Ao,Zn)&&Nt(e.getEnd(!0),Zn)){o.setAttrib(Zn,Zm,Bo),So.throttle(Zn);return}}rt()},Nn=kt=return n.on("init",()=>{kt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",xn),n.on("keyup compositionend",tt=>{f&&f.nodeName==="TABLE"&&xn(tt)}),n.on("hide blur",rt),n.on("contextmenu longpress",Ie,!0)}),n.on("remove",Nn),{isResizable:$t,showResizeRect:Hc,hideResizeRect:rt,updateResizeRect:xn,destroy:},b6=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},O_=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Zw=(e,n,o)=>{const r=e.document.createRange();return b6(r,n),O_(r,o),r},Zt=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},Ud=Gl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),jw=(e,n,o)=>n(Y.fromDom(o.startContainer),o.startOffset,Y.fromDom(o.endContainer),o.endOffset),D_=(e,n)=>n.match({domRange:o=>({ltr:ze(o),rtl:$.none}),relative:(o,r)=>({ltr:di(()=>Zw(e,o,r)),rtl:di(()=>$.some(Zw(e,r,o)))}),exact:(o,r,a,u)=>({ltr:di(()=>Zt(e,o,r,a,u)),rtl:di(()=>$.some(Zt(e,a,u,o,r)))})}),b1=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>Ud.rtl(Y.fromDom(a.endContainer),a.endOffset,Y.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>jw(e,Ud.ltr,o)):jw(e,Ud.ltr,o)},R_=(e,n)=>{const o=D_(e,n);return b1(e,o)};Ud.ltr,Ud.rtl;const x2={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},qw=(e,n,o)=>{var r,a;return $.from((a=(r=e.dom).caretPositionFromPoint)===null||a===void 0?void 0:a.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return $.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),$.some(f)})},Ob=(e,n,o)=>{var r,a;return $.from((a=(r=e.dom).caretRangeFromPoint)===null||a===void 0?void 0:a.call(r,n,o))},N_=(()=>document.caretPositionFromPoint?qw:document.caretRangeFromPoint?Ob:$.none)(),M_=(e,n,o)=>{const r=Y.fromDom(e.document);return N_(r,n,o).map(a=>x2.create(Y.fromDom(a.startContainer),a.startOffset,Y.fromDom(a.endContainer),a.endOffset))},Ch=Gl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),E2=(e,n,o,r)=>e.fold(n,o,r),Kw=e=>e.fold(pn,pn,pn),B_=Ch.before,P_=Ch.on,Db=Ch.after,Gu={before:B_,on:P_,after:Db,cata:E2,getStart:Kw},Rb=Gl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),so=e=>Rb.exact(e.start,e.soffset,e.finish,e.foffset),$_=e=>e.match({domRange:n=>Y.fromDom(n.startContainer),relative:(n,o)=>Gu.getStart(n),exact:(n,o,r,a)=>n}),Wd=Rb.domRange,qu=Rb.relative,Nb=Rb.exact,Ti=e=>{const n=$_(e);return Ki(n)},Mb=x2.create,Zd={domRange:Wd,relative:qu,exact:Nb,exactFromRange:so,getWin:Ti,range:Mb},Sh=(e,n)=>{const o=Bn(e);return o==="input"?Gu.after(e):Re(["br","img"],o)?n===0?Gu.before(e):Gu.after(e):Gu.on(e,n)},v1=(e,n)=>{const o=e.fold(Gu.before,Sh,Gu.after),r=n.fold(Gu.before,Sh,Gu.after);return Zd.relative(o,r)},T2=(e,n,o,r)=>{const a=Sh(e,n),u=Sh(o,r);return Zd.relative(a,u)},F_=e=>e.match({domRange:n=>{const o=Y.fromDom(n.startContainer),r=Y.fromDom(n.endContainer);return T2(o,n.startOffset,r,n.endOffset)},relative:v1,exact:T2}),k2=(e,n)=>{const r=(n||document).createDocumentFragment();return le(e,a=>{r.appendChild(a.dom)}),Y.fromDom(r)},L_=e=>{const n=Zd.getWin(e).dom,o=(a,u,f,b)=>Zt(n,a,u,f,b),r=F_(e);return R_(n,r).match({ltr:o,rtl:o})},In=(e,n,o)=>M_(e,n,o),ki=(e,n,o)=>{const r=Ki(Y.fromDom(o));return In(r.dom,e,n).map(.getOrUndefined()},jd=I_=wh=(e,n,o)=>I_(e,n,o)!==null,Yn=H_=_2=l=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},m=h=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let y,E;if(!b)return $.none();const D=e.getParent(b,e.isBlock)||u;if(r&&Ro(a)&&n&&e.isEmpty(D))return $.some(Ce(b,e.nodeIndex(a)));const R=new Wo(a,D);for(;E=R[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||H_(E,u))return $.none();if(Ge(E)&&E.data.length>0)return Yn(E,u,"A")?$.none():$.some(Ce(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return $.none();y=E}return Sd(y)?$.none():o&&y?$.some(Ce(y,0)):$.none()},v=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const E=Et(b)&&y===b.childNodes.length,D=e.schema.getNonEmptyElements();let R=o;if(hc(b))return $.none();if(Et(b)&&y>b.childNodes.length-1&&(R=!1),pp(b)&&(b=a,y=0),b===a){if(R&&(u=b.childNodes[y>0?y-1:0],u&&(hc(u)||D[u.nodeName]||Au(u))))return $.none();if(b.hasChildNodes()){if(y=Math.min(!R&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=Ge(b)&&E?b.data.length:0,!n&&b===a.lastChild&&Au(b)||m(a,b)||hc(b)||Le(b))return $.none();if(b.hasChildNodes()&&!Au(b)){u=b;const B=new Wo(b,a);do{if(zn(u)||hc(u)){f=!1;break}if(Ge(u)&&u.data.length>0){y=R?0:u.data.length,b=u,f=!0;break}if(D[u.nodeName.toLowerCase()]&&!fc(u)){y=e.nodeIndex(u),b=u.parentNode,R||y++,f=!0;break}}while(u=R?B.next():B.prev())}}}return n&&(Ge(b)&&y===0&&h(e,E,n,!0,b).each(B=>{b=B.container(),y=B.offset(),f=!0}),Et(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&Ro(u)&&!l(u,"A")&&!_2(e,u,!1)&&!_2(e,u,!0)&&h(e,E,n,!0,u).each(B=>{b=B.container(),y=B.offset(),f=!0}))),R&&!n&&Ge(b)&&y===b.data.length&&h(e,E,n,!1,b).each(,f&&b?$.some(Ce(b,y)):$.none()},x=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=Ce.fromRangeStart(n);return v(e,o,!0,r).each(u=>{(!o||!Ce.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||v(e,o,!1,r).each(,o&&r.collapse(!0),jd(n,r)?$.none():$.some(r)},_=(e,n)=>e.splitText(n),M=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&Ge(n)){if(o>0&&o<n.data.length)if(r=_(n,o),n=r.previousSibling,a>o){a=a-o;const u=_(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(Ge(n)&&o>0&&o<n.data.length&&(n=_(n,o),o=0),Ge(r)&&a>0&&a<r.data.length){const u=_(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},I=e=>({walk:(u,f)=>f1(e,u,f),split:M,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Vd(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:);I.compareRanges=jd,I.getCaretRangeFromPoint=ki,I.getSelectedNode=my,I.getNode=ni;const Q=((e,n)=>{const o=(b,y)=>{if(!go(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const E=b.dom;_u(E)&&(E.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const E=cr(b,e);return parseFloat(E)||0}return y},a=r,u=(b,y)=>Cn(y,(E,D)=>{const R=cr(b,D),B=R===void 0?0:parseInt(R,10);return isNaN(B)?E:E+B},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,y,E)=>{const D=u(b,E);return y>D?y-D:0}}})("height",e=>{const n=e.dom;return fm(e)?n.getBoundingClientRect().height:n.offsetHeight}),me=e=>Q.get(e),Ue=()=>Y.fromDom(document),ut=(e,n)=>e.view(n).fold(ze([]),r=>{const a=e.owner(r),u=ut(e,a);return[r].concat(u)}),lt=(e,n)=>{const o=n.owner(e);return ut(n,o)};var Me=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?$.none():$.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(Y.fromDom)},owner:e=>Pl(e)});const At=e=>{const n=Ue(),o=Rt(n),r=lt(e,Me),a=Ze(e),u=Ms(r,(f,b)=>{const y=Ze(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return O(u.left+a.left+o.left,u.top+a.top+o.top)},Qt=e=>Bn(e)==="textarea",Sn=Yo=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Mr=(e,n)=>{const o=rr(e);if(o.length===0||Qt(e))return{element:e,offset:n};if(n<o.length&&!Qt(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Qt(r)?{element:e,offset:n}:Bn(r)==="img"?{element:r,offset:1}:Kr(r)?{element:r,offset:Vl(r).length}:{element:r,offset:rr(r).length}}},Ls=(e,n)=>{const o=ne(e),r=me(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Ra=(e,n)=>{const o=Mr(e,n),r=Y.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ec+"</span>");return mr(o.element,r),Ls(r,()=>uo(r))},Jf=e=>Ls(Y.fromDom(e),Oe),Qf=A2=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(Sn(e,u))return;const f=Rt(n).top;o(e,n,f,r,a),Yo(e,u)},Bb=(e,n,o,r)=>{const a=Y.fromDom(e.getBody()),u=Y.fromDom(e.getDoc());Vs(a);const f=Ra(Y.fromDom(o.startContainer),o.startOffset);A2(e,u,n,f,r),f.cleanup()},To=(e,n,o,r)=>{const a=Y.fromDom(e.getDoc());A2(e,a,o,Jf(n),r)},Yc=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(Y.fromDom(r),Y.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},Cc=(e,n,o,r,a)=>{const u=n.pos;if(r)un(u.left,u.top,a);else{const f=u.top-o+n.height;un(-e.getBody().getBoundingClientRect().left,f,a)}},_i=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,y=a.bottom,E=y-b>=r;b<o?Cc(e,a,r,u!==!1,n):b>f?Cc(e,a,r,E?u!==!1:u===!0,n):y>f&&!E&&Cc(e,a,r,u===!0,n)},ri=(e,n,o,r,a)=>{const u=Ki(n).dom.innerHeight;_i(e,n,o,u,r,a)},jm=(e,n,o,r,a)=>{const u=Ki(n).dom.innerHeight;_i(e,n,o,u,r,a);const f=At(r.element),b=Ir(window);f.top<b.y?ln(r.element,a!==!1):f.top>b.bottom&&ln(r.element,a===!0)},fa=(e,n,o)=>Qf(e,ri,n,o),O2=(e,n,o)=>To(e,n,ri,o),y1=(e,n,o)=>Qf(e,jm,n,o),Ku=(e,n,o)=>To(e,n,jm,o),Lc=(e,n,o)=>{(e.inline?O2:Ku)(e,n,o)},C1=Yw=(e,n=!1)=>e.dom.focus({preventScroll:n}),Xw=e=>{const n=ml(e).dom;return e.dom===n.activeElement},xh=(e=Ue())=>$.from(e.dom.activeElement).map(Y.fromDom),Jw=e=>xh(ml(e)).filter(n=>e.dom.contains(n.dom)),Pb=Qw=eg=qD=v6=y6=e=>Zd.range(Y.fromDom(e.startContainer),e.startOffset,Y.fromDom(e.endContainer),e.endOffset),C6=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?$.none():$.from(n.getRangeAt(0))).map(y6)},S6=e=>{const n=Ki(e);return C6(n.dom).filter(qD(e))},KD=(e,n)=>$.from(n).filter(qD(e)).map(Qw),YD=$b=e=>{const n=v6(e)?S6(Y.fromDom(e.getBody())):$.none();e.bookmark=n.isSome()?n:e.bookmark},V_=e=>(e.bookmark?e.bookmark:$.none()).bind(o=>KD(Y.fromDom(e.getBody()),o)).bind(YD),w6=JD={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},QD=(e,n)=>(go(n)||(n=0),setTimeout(e,n)),eR=xl={setEditorTimeout:(e,n,o)=>QD(o),setEditorInterval:(e,n,o)=>{const r=eR(o);return r}},x6=e=>e.type==="nodechange"&&e.selectionChange,E6=T6=k6=(e,n)=>{T6(e,n),e.on("keyup NodeChange AfterSetSelectionRange",},ex=e=>{const n=Rp(()=>{$b(e)},0);e.on("init",()=>{e.inline&&E6(e,n),k6(e,n)}),e.on("remove",()=>{n.cancel()})};let S1;const tx=Zo.DOM,tR=e=>Et(e)&&JD.isEditorUIElement(e),nx=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},ox=(e,n)=>{const o=sw(e);return tx.getParent(n,a=>tR(a)||(o?e.dom.is(a,o):!1))!==null},z_=e=>{try{const n=ml(Y.fromDom(e.getElement()));return xh(n).fold(()=>document.body,o=>o.dom)}catch(n){return document.body}},_6=(e,n)=>{const o=n.editor;ex(o);const r=(a,u)=>{if(Yk(a)&&a.inline!==!0){const f=Y.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",,o.on("focusout",()=>{xl.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!nx(z_(o))||a!==o)&&r(o,il),!ox(o,z_(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),S1||(S1=a=>{const u=e.activeEditor;u&&vd(a).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!ox(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},tx.bind(document,"focusin",S1))},A6=O6=e=>{e.on("AddEditor",Ne(_6,e)),e.on("RemoveEditor",Ne(A6,e))},D6=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),R6=e=>e.collapsed?$.from(ni(e.startContainer,e.startOffset)).map(Y.fromDom):$.none(),N6=(e,n)=>R6(n).bind(,nR=(e,n)=>{N6(Y.fromDom(e.getBody()),n).bind(o=>ma(o.dom)).fold(()=>{e.selection.normalize()},},U_=M6=e=>Xw(e)||Jw(e).isSome(),B6=e=>_e(e.iframeElement)&&Xw(Y.fromDom(e.iframeElement)),sx=e=>{const n=e.getBody();return n&&M6(Y.fromDom(n))},oR=e=>{const n=ml(Y.fromDom(e.getElement()));return xh(n).filter(.isSome()},Eh=sR=e=>Eh(e)||oR(e),P6=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),_e(e.bookmark)&&!Eh(e)&&V_(e).each(;const a=D6(e,n.getNode());if(a&&e.dom.isChildOf(a,o)){U_(a),nR(e,r),W_(e);return}e.inline||(ht.browser.isOpera()||U_(o),e.getWin().focus()),(ht.browser.isFirefox()||e.inline)&&(U_(o),nR(e,r)),W_(e)},W_=e=>e.editorManager.setActive(e),$6=(e,n)=>{e.removed||(n?W_(e):P6(e))},rR=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),cR=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return $.from(u).map(Y.fromDom).map(b=>!r||!n.collapsed?Tu(b,a(b,f)).getOr(b):b).bind(.map(b=>b.dom).getOr(e)},Z_=aR=j_=(e,n)=>{const o=e;for(;e&&Ge(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},iR=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),Ge(o)&&Ge(r)&&(o.length===a?o=j_(o.nextSibling,!0):o=o.parentNode,u===0?r=j_(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=Ge(f)?f.parentNode:f;return bm(b)?b:e},F6=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||Z_(u,n,n.collapsed),e.isBlock),b=e.getParent(r||aR(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let y;const E=new Wo(f,u);for(;(y=E.next())&&y!==b;)e.isBlock(y)&&a.push(y)}return b&&f!==b&&b!==u&&a.push(b),a},L6=G_=I6=e=>Bn(e)==="img"?1:Hv(e).fold(()=>rr(e).length,n=>n.length),H6=e=>Hv(e).filter(n=>n.trim().length!==0||n.indexOf(oo)>-1).isSome(),V6=e=>us(e)&&Ac(e,"contenteditable")==="false",z6=["img","br"],lR=e=>H6(e)||Re(z6,Bn(e))||V6(e),U6=e=>Xr(e,lR),W6=e=>Z6(e,lR),Z6=(e,n)=>{const o=r=>{const a=rr(r);for(let u=a.length-1;u>=0;u--){const f=a[u];if(n(f))return $.some(f);const b=o(f);if(b.isSome())return b}return $.none()};return o(e)},uR="[data-mce-autocompleter]",j6=(e,n)=>{if(dR(Y.fromDom(e.getBody())).isNone()){const o=Y.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Qs(o,Y.fromDom(n.extractContents())),n.insertNode(o.dom),Yr(o).each(r=>r.dom.normalize()),W6(o).map(r=>{e.selection.setCursorLocation(r.dom,I6(r))})}},G6=e=>fl(e,uR),dR=e=>Sa(e,uR),q6=K6={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},rx=Y6=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Cm(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},Lt=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Na{onstructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}ttr(n,o){const r=this;if(!j(n))return _e(n)&&dt(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new Na(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}en(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}sEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(Lt(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||Lt(f))return!1}if(f.type===8||f.type===3&&!Y6(f)||f.type===3&&f.parent&&o[f.parent.name]&&Cm((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=rx(f,u));return!0}const mR=Ke.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),fR=e=>j(e.nodeValue)&&e.nodeValue.includes(ec),cx=e=>`${e.length===0?"":`${De(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,X6=gR=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,,hR=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(fR(n)){const o=n.parentNode;return o&&Gt(mR,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),J6=e=>gR(e).nextNode()!==null,Q6=e=>hR(e).nextNode()!==null,ax=(e,n)=>n.querySelector(cx(e))!==null,pR=(e,n)=>{le(X6(e,n),o=>{const r=Y.fromDom(o);Ac(r,"data-mce-bogus")==="all"?uo(r):le(e,})},eL=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},tL=k(eL,gR),fn=k(eL,hR),bR=(e,n)=>{const o=[{condition:Ne(ax,n),action:Ne(pR,n)},{condition:J6,action:tL},{condition:Q6,action:fn}];let r=e,a=!1;return le(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},vn=e=>{const n=Jr(e,"[data-mce-bogus]");le(n,o=>{Ac(o,"data-mce-bogus")==="all"?uo(o):ym(o)?(mr(o,Y.fromText(vp)),uo(o)):Xi(o)})},q_=QZ=ej=(e,n)=>{const o=e.getDoc(),r=ml(Y.fromDom(e.getBody())),a=Y.fromTag("div",o);qo(a,"data-mce-bogus","all"),Nc(a,{position:"fixed",left:"-9999999px",top:"0"}),pm(a,n.innerHTML),vn(a),q_(a);const u=dS(r);Qs(u,a);const f=bi(a.dom.innerText);return uo(a),f},nL=(e,n,o)=>{let r;return n.format==="raw"?r=Ke.trim(bi(bR(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=ej(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=QZ(e,e.serializer.serialize(o,n)),n.format!=="text"&&!_r(Y.fromDom(o))&&j(r)?Ke.trim(r):r},tj=(e,n)=>$.from(e.getBody()).fold(ze(n.format==="tree"?new Na("body",11):""),o=>nL(e,n,o)),oL=Ke.makeMap,vR=e=>{const n=[];e=e||{};const o=e.indent,r=oL(e.indent_before||""),a=oL(e.indent_after||""),u=Tm.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,E)=>{if(o&&r[b]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let D=0,R=y.length;D<R;D++){const B=y[D];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&a[b]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&a[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:getContent:},Th=(e={},n=Dd())=>{const o=vR(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:y=>{var E;o.text((E=y.value)!==null&&E!==void 0?E:"",y.raw)},8:y=>{var E;o.comment((E=y.value)!==null&&E!==void 0?E:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var E;o.doctype((E=y.value)!==null&&E!==void 0?E:"")},4:y=>{var E;o.cdata((E=y.value)!==null&&E!==void 0?E:"")},11:y=>{let E=y;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=y=>{var E;const D=f[y.type];if(D)D(y);else{const R=y.name,B=R in n.getVoidElements();let W=y.attributes;if(u&&W&&W.length>1){const G=[];G.map={};const z=n.getElementRule(y.name);if(z){for(let q=0,se=z.attributesOrder.length;q<se;q++){const ie=z.attributesOrder[q];if(ie in W.map){const ae=W.map[ie];G.map[ie]=ae,G.push({name:ie,value:ae})}}for(let q=0,se=W.length;q<se;q++){const ie=W[q].name;if(!(ie in G.map)){const ae=W.map[ie];G.map[ie]=ae,G.push({name:ie,value:ae})}}W=G}}if(o.start(R,W,B),zl(R))j(y.value)&&o.text(y.value,!0),o.end(R);else if(!B){let G=y.firstChild;if(G){(R==="pre"||R==="textarea")&&G.type===3&&((E=G.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(G);while(G=G.next)}o.end(R)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},Kt=new Set;le(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{Kt.add(n)});const yR=["font","text-decoration","text-emphasis"],K_=sL=e=>Kt.has(e),D2=(e,n)=>vs(K_(e,n),o=>!sL(o)),CR=e=>Ct(e,n=>st(yR,o=>is(n,o))),rL=(e,n,o)=>{const r=K_(e,n),a=K_(e,o),u=f=>{var b,y;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",D=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return ro(E)&&ro(D)&&E!==D};return st(r,f=>{const b=if(!b(a)&&b(yR)){const y=CR(a);return st(y,u)}else return u(f)})},SR=Y_=Ne(SR,!0,fh),ix=Ne(SR,!1,fh),cL=e=>{const n=e.container();return Ge(n)&&(n.data.length===0||Ka(n.data)&&Yf.isBookmarkNode(n.parentNode))},w1=aL=e=>ia(e)&&cr(Y.fromDom(e),"display")==="block",wR=e=>zn(e)&&!v0(e),iL=w1(!0,aL),lL=w1(!1,aL),R2=w1(!0,zs),Fb=w1(!1,zs),xR=w1(!0,Au),En=w1(!1,Au),tg=w1(!0,wR),Gd=w1(!1,wR),ER=TR=(e,n,o)=>Oc(n,e)?ER(rp(e,r=>o(r)||Qn(r,n))):[],X_=(e,n)=>TR(e,n,ye),Gm=lx=(e,n,o)=>yl(e,n,o,cL),uL=e=>n=>e.isBlock(Bn(n)),J_=(e,n,o)=>ao(Gm(Y.fromDom(n.container()),e),uL(o)),kR=(e,n,o,r)=>lx(e,n.dom,o).forall(a=>J_(n,o,r).fold(u=>!ql(a,o,n.dom)&&Oc(u,Y.fromDom(a.container())))),_R=(e,n,o,r)=>J_(n,o,r).fold(,Q_=Ne(_R,!1),AR=Ne(_R,!0),dL=Ne(kR,!1),mL=Ne(kR,!0),fL=e=>db(e).exists(ym),ux=(e,n,o,r)=>{const a=Ct(Gm(Y.fromDom(o.container()),n),f=>r.isBlock(Bn(f))),u=Bs(a).getOr(n);return oc(e,u.dom,o).filter(fL)},N2=(e,n,o)=>db(n).exists(ym)||ux(!0,e,n,o).isSome(),M2=(e,n,o)=>c_(n).exists(ym)||ux(!1,e,n,o).isSome(),gL=Ne(ux,!1),hL=Ne(ux,!0),OR=DR=(e,n,o)=>{const r=Ct(Gm(Y.fromDom(n.container()),e),a=>o.isBlock(Bn(a)));return Bs(r).getOr(e)},RR=(e,n,o)=>OR(n)?ix(n):ix(n)||Oa(DR(e,n,o).dom,n).exists(ix),NR=(e,n,o)=>OR(n)?Y_(n):Y_(n)||Kc(DR(e,n,o).dom,n).exists(Y_),pL=e4=e=>db(e).bind(n=>Ca(n,qr)).exists(,MR=(e,n)=>Oa(e.dom,n).isNone(),bL=vL=(e,n,o)=>MR(e,n)||bL(e,n)||Q_(e,n,o)||AR(e,n,o)||M2(e,n,o)||N2(e,n,o),x1=BR=(e,n)=>o=>x1(new Wo(o,e)[n]()),PR=(e,n)=>{const o=Kc(e.dom,n).getOr(n),r=BR(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},yL=$R=(e,n,o)=>e4(n)?!1:vL(e,n,o)||RR(e,n,o)||NR(e,n,o),Lb=(e,n,o)=>e4(n)?!1:Q_(e,n,o)||dL(e,n,o)||M2(e,n,o)||RR(e,n,o)||yL(e,n),FR=Ib=(e,n,o)=>e4(n)?!1:AR(e,n,o)||mL(e,n,o)||N2(e,n,o)||NR(e,n,o)||PR(e,n),dx=(e,n,o)=>Lb(e,n,o)||Ib(e,FR(n),o),Ma=(e,n)=>bb(e.charAt(n)),LR=(e,n)=>fh(e.charAt(n)),CL=SL=IR=(e,n,o,r)=>{const a=n.data,u=Ce(n,0);return!o&&Ma(a,0)&&!dx(e,u,r)?(n.data=" "+a.slice(1),!0):o&&LR(a,0)&&Lb(e,u,r)?(n.data=oo+a.slice(1),!0):!1},wL=e=>{const n=e.data,o=SL(n);return o!==n?(e.data=o,!0):!1},kh=(e,n,o,r)=>{const a=n.data,u=Ce(n,a.length-1);return!o&&Ma(a,a.length-1)&&!dx(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&LR(a,a.length-1)&&Ib(e,u,r)?(n.data=a.slice(0,-1)+oo,!0):!1},xL=(e,n,o)=>{const r=n.container();if(!Ge(r))return $.none();if(CL(n)){const a=IR(e,r,!1,o)||wL(r)||kh(e,r,!1,o);return V(a,n)}else if(dx(e,n,o)){const a=IR(e,r,!0,o)||kh(e,r,!0,o);return V(a,n)}else return $.none()},EL=e=>{const n=Y.fromDom(e.getBody());e.selection.isCollapsed()&&xL(n,Ce.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},ws=(e,n,o,r)=>{if(o===0)return;const a=Y.fromDom(e),u=ys(a,E=>r.isBlock(Bn(E))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&Ib(u,Ce(e,e.data.length),r),y=n===0&&Lb(u,Ce(e,0),r);e.replaceData(n,o,Df(f,4,y,b))},E1=(e,n,o)=>{const r=e.data.slice(n),a=r.length-cl(r).length;ws(e,n,a,o)},HR=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-Ui(r).length;ws(e,n-a,a,o)},sc=(e,n,o,r,a=!0)=>{const u=Ui(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),uo(Y.fromDom(b)),r&&E1(f,u,o),f},TL=kL=(e,n)=>TL(n,e)?Ce(n.container(),n.offset()-1):n,ng=e=>Ge(e)?Ce(e,0):Ce.before(e),po=e=>Ge(e)?Ce(e,e.data.length):Ce.after(e),t4=e=>gr(e.previousSibling)?$.some(po(e.previousSibling)):e.previousSibling?Cl(e.previousSibling):$.none(),n4=e=>gr(e.nextSibling)?$.some(ng(e.nextSibling)):e.nextSibling?ma(e.nextSibling):$.none(),_L=AL=OL=(e,n)=>t4(n).orThunk(()=>n4(n)).orThunk(()=>_L(e,n)),nl=(e,n)=>n4(n).orThunk(()=>t4(n)).orThunk(()=>AL(e,n)),qd=DL=(e,n,o)=>qd(e,n,o).map(Ne(kL,o)),mx=o4=RL=NL=(e,n)=>{if(Os(e)){const o=Y.fromHtml('<br data-mce-bogus="1">');return n?le(rr(e),r=>{l1(r)||uo(r)}):yd(e),Qs(e,o),$.some(Ce.before(o.dom))}else return $.none()},B2=(e,n,o,r)=>{const a=gi(e).filter(Kr),u=dl(e).filter(Kr);return uo(e),Zi(a,u,n,(f,b,y)=>{const E=f.dom,D=b.dom,R=E.data.length;return sc(E,D,o,r),y.container()===D?Ce(E,R):y}).orThunk(()=>(r&&(a.each(f=>HR(f.dom,f.dom.length,o)),u.each(f=>E1(f.dom,0,o))),n))},fx=og=(e,n,o,r=!0,a=!1)=>{const u=DL(n,e.getBody(),o.dom),f=ys(o,Ne(RL,e),o4(e.getBody())),b=B2(o,u,e.schema,fx(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(y=>NL(y,a)).fold(},ML=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Kd=e=>ML.test(e),T1=(e,n)=>Wa(Y.fromDom(n),Bk(e))&&!Fn(e.schema,n)&&e.dom.isEditable(n),VR=e=>{var n;return Zo.DOM.getStyle(e,"direction",!0)==="rtl"||Kd((n=e.textContent)!==null&&n!==void 0?n:"")},Ql=Yu=(e,n,o)=>{const r=Ql(e,n,o);return $.from(r[r.length-1])},Xu=BL=e=>Mu(e)||S0(e),Wn=k1=Ne(Wn,!0),P2=Ne(Wn,!1),s4=r4=e=>{e.execCommand("delete")},$2=e=>s4(e,"Delete"),PL=e=>s4(e,"ForwardDelete"),c4=$L=e=>ge(e)||Du(e),F2=(e,n)=>Oc(e,n)?Ca(n,$L,c4(e)):$.none(),gx=hx=a4=e=>(Qh(e)?gi(e):hi(e)).bind(a4).orThunk(()=>$.some(e)),L2=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=a4(o).getOr(o),f=Y.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?gx(e,r):Os(f)&&(Nu(f),r&&e.selection.setCursorLocation(f.dom,0)),!Qn(o,f)){const b=ts(Yr(f),o)?[]:cp(f);le(b.concat(rr(o)),y=>{!Qn(y,f)&&!Oc(y,f)&&Os(y)&&uo(y)})}},FL=(e,n,o)=>ys(e,n,o).isSome(),LL=(e,n)=>up(e,n).isSome(),zR=(e,n)=>Xr(e,n).isSome(),IL=e=>n=>Qn(e,n),i4=e=>Jr(e,"td,th"),l4=(e,n)=>Id(Y.fromDom(e),n),HL=e=>dr(e.startTable,e.endTable,(n,o)=>{const r=zR(n,u=>Qn(u,o)),a=zR(o,u=>Qn(u,n));return!r&&!a?e:{...e,startTable:r?$.none():e.startTable,endTable:a?$.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),VL=e=>HL(e),UR=(e,n)=>{const o=l4(e.startContainer,n),r=l4(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=dr(o,r,Qn).getOr(!1);return VL({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},px=(e,n)=>({start:e,end:n}),zL=(e,n,o)=>({rng:e,table:n,cells:o}),I2=Gl.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),H2=(e,n)=>fl(Y.fromDom(e),"td,th",n),WR=u4=El=(e,n)=>!WR(e)&&u4(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),UL=ZR=e=>n=>Id(n,e).bind(o=>zc(i4(o)).map(r=>px(n,r))),d4=V2=e=>n=>u4(n,e).map(,m4=(e,n,o,r)=>{if(o.collapsed||!e.forall(WR))return $.none();if(n.isSameTable){const a=e.bind(V2(r));return $.some({start:a,end:a})}else{const a=H2(o.startContainer,r),u=H2(o.endContainer,r),f=a.bind(ZR(r)).bind(V2(r)),b=u.bind(d4(r)).bind(V2(r));return $.some({start:f,end:b})}},f4=(e,n)=>ks(e,o=>Qn(o,n)),g4=WL=(e,n,o)=>e.exists(r=>El(r,o)&&i2(r.start,n)),bx=jR=(e,n,o,r)=>m4(e,n,o,r).bind(.bind(a=>{const{isSameTable:u}=n,f=g4(a).getOr([]);if(u&&a.cells.length===f.length)return $.some(I2.fullTable(a.table));if(f.length>0){if(u)return $.some(I2.partialTable(f,$.none()));{const b=bx(o,n);return $.some(I2.partialTable(f,$.some({...n,rng:b})))}}else return $.none()}),Ju=(e,n,o,r)=>m4(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(g4).getOr([]),b=u.bind(g4).getOr([]);if(f.length>0&&b.length>0){const y=bx(o,n);return $.some(I2.multiTable(f,b,y))}else return $.none()}),ZL=(e,n)=>{const o=IL(e),r=UL(n,o),a=UR(n,o);return WL(r,n,o)?r.map(u=>I2.singleCellTable(n,u.start)):a.isMultiTable?Ju(r,a,n,o):jR(r,a,n,o)},GR=nj=(e,n)=>$.from(e.dom.getParent(n,e.dom.isBlock)).map(Y.fromDom),h4=p4=_1=e=>{const n=gh(e),o=Y.fromDom(e.selection.getNode());bp(o.dom)&&Os(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&st(n,r=>Qn(r,o))&&qo(o,"data-mce-selected","1")},qR=(e,n,o)=>$.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=nj(e,f?u.endContainer:u.startContainer);u.deleteContents(),h4(e,f,b.filter(Os));const y=f?n[0]:n[n.length-1];return p4(e,y,r,f),Os(y)?$.none():$.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);GR(a),_1(e)}),Hb=ol=z2=Io=U2=(e,n)=>Vb(e,n),KR=(e,n,o,r)=>W2(n,r).fold(()=>Io(e,n,o),a=>U2(e,a)),YR=(e,n,o)=>{const r=Y.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?qR(e,o,$.none()):KR(e,r,a,n)},vx=(e,n)=>ao(Gm(n,e),qa),W2=b4=(e,n,o,r,a)=>Ld(o,e.getBody(),a).bind(u=>vx(n,Y.fromDom(u.getNode())).bind(),Vb=yx=v4=(e,n)=>Vb(e,n),XR=(e,n,o)=>W2(e,Y.fromDom(o.getNode())).fold(()=>$.some(Oe),,JR=(e,n,o,r,a)=>Ld(o,e.getBody(),a).fold(()=>$.some(Oe),u=>yx(r,o,a,u)?v4(e,r):XR(n,r,u)),QR=(e,n,o,r)=>{const a=Ce.fromRangeStart(e.selection.getRng());return vx(o,r).bind(u=>Os(u)?Vb(e,u):b4(e,o,n,u,a))},eN=(e,n,o,r)=>{const a=Ce.fromRangeStart(e.selection.getRng());return Os(r)?Vb(e,r):JR(e,o,n,r,a)},y4=(e,n)=>e?xR(n):En(n),zb=tN=(e,n,o)=>{const r=Y.fromDom(e.getBody());return W2(r,o).fold(()=>QR(e,n,r,o).orThunk(()=>V(zb(e,n),Oe)),a=>eN(e,n,r,a))},Z2=(e,n)=>{const o=Y.fromDom(e.selection.getStart(!0)),r=gh(e);return e.selection.isCollapsed()&&r.length===0?tN(e,n,o):YR(e,o,r)},A1=jL=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],nN=Ke.each,Cx=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const D={};return nN(n.getAttribs(E),R=>{const B=R.nodeName.toLowerCase();B!=="style"&&!a(B)&&(D[B]=n.getAttrib(E,B))}),D},y=(E,D)=>{for(const R in E)if(Gt(E,R)){const B=D[R];if(Jn(B)||E[R]!==B)return!1;delete D[R]}for(const R in D)if(Gt(D,R))return!1;return!0};return Et(u)&&Et(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Ei(u)&&!Ei(f)},a=return{compare:r,isAttributeInternal:a}},C4=Sx=e=>e.name==="summary",oN=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},S4=sN=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&oN(o,a=>{S4(e,n,a,r)}),r},w4=(e,n)=>{const o=(r,a)=>{dt(r,u=>{const f=ur(u.nodes);le(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const E=f[y];(!(a?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||Xt(E.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},x4=(e,n,o,r={})=>{const a=sN(e,n,o);w4(a,r)},wx=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Na("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Na("#text",3)).value=oo},rN=e=>{var n;return E4(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===oo},E4=(e,n)=>{const o=e==null?void 0:e.firstChild;return _e(o)&&o===e.lastChild&&o.name===n},cN=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Ub=(e,n,o,r)=>r.isEmpty(n,o,a=>cN(e,a)),T4=(e,n)=>_e(e)&&(n(e)||e.name==="br"),aN=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return $.from(n)},xx=Ex=(e,n,o,r=Oe)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Ke.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),y=new Set,E=for(let D=0;D<e.length;D++){const R=e[D];let B,W,G;if(!R.parent||y.has(R))continue;if(a[R.name]&&R.parent.name==="li"){let q=R.next;for(;q&&a[q.name];){q.name="li",y.add(q),R.parent.insert(q,R.parent);q=q.next}R.unwrap();continue}const z=[R];for(B=R.parent;B&&!n.isValidChild(B.name,R.name)&&E(B);B=B.parent)z.push(B);if(B&&z.length>1)if(Tx(n,R,B))xx(R,n);else{z.reverse(),W=z[0].clone(),r(W);let q=W;for(let se=0;se<z.length-1;se++){n.isValidChild(q.name,z[se].name)&&se>0?(G=z[se].clone(),r(G),q.append(G)):G=q;for(let ie=z[se].firstChild;ie&&ie!==z[se+1];){const ae=ie.next;G.append(ie),ie=ae}q=G}Ub(n,u,f,W)?B.insert(R,z[0],!0):(B.insert(W,z[0],!0),B.insert(R,W)),B=z[0],(Ub(n,u,f,B)||E4(B,"br"))&&B.empty().remove()}else if(R.parent){if(R.name==="li"){let q=R.prev;if(q&&(q.name==="ul"||q.name==="ol")){q.append(R);continue}if(q=R.next,q&&(q.name==="ul"||q.name==="ol")&&q.firstChild){q.insert(R,q.firstChild,!0);continue}const se=new Na("ul",1);r(se),R.wrap(se);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const q=new Na("div",1);r(q),R.wrap(q)}else xx(R,n)}}},iN=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},Tx=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&iN(o,"a")?!0:Sx(o)&&C4(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,lN=k4=e=>{const n=Ce.fromRangeStart(e),o=Ce.fromRangeEnd(e),r=e.commonAncestorContainer;return oc(!1,r,o).map(a=>!ql(n,o,r)&&ql(n,a,r)?lN(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},Wb=kx=_4=e=>e.name==="br"||e.value===oo,uN=(e,n)=>e.getBlockElements()[n.name]&&kx(n)&&_4(n.firstChild),_x=(e,n)=>{const o=e.getNonEmptyElements();return _e(n)&&(n.isEmpty(o)||uN(e,n))},A4=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),_x(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},j2=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},O4=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return j2(a)},dN=e=>{var n;return Ct((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},Zb=D4=e=>_e(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Zb(e.firstChild),R4=e=>!e.firstChild||D4(e),G2=e=>e.length>0&&R4(e[e.length-1])?e.slice(0,-1):e,qm=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},mN=GL=fN=(e,n)=>{const o=Ce.before(e),a=Kl(n).next(o);return a?a.toRange():null},N4=qL=(e,n,o,r)=>{const a=GL(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),Ke.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),N4(n[n.length-1],o)},oj=(e,n,o)=>{const r=e.parentNode;return r&&Ke.each(n,a=>{r.insertBefore(a,e)}),fN(e,o)},KL=M4=(e,n,o,r)=>{const a=O4(n,e,r),u=qm(n,o.startContainer),f=G2(dN(a.firstChild)),b=1,y=2,E=n.getRoot(),D=R=>{const B=Ce.fromRangeStart(o),W=Kl(n.getRoot()),G=R===b?W.prev(B):W.next(B),z=G==null?void 0:G.getNode();return z?qm(n,z)!==u:!0};return u?D(b)?oj(u,f,E):D(y)?KL(u,f,E,n):qL(u,f,E,o):null},Yd=["pre"],B4=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,E=Re(Yd,u.name);if(y&&E){const D=u.attr("contenteditable")!=="false",R=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,B=$.from(A1(r,o)).forall(la);return D&&R&&B}else return!1},jb=bp,P4=(e,n,o)=>{if(_e(o)){const r=e.getParent(n.endContainer,jb);return o===r&&i2(Y.fromDom(o),n)}else return!1},YL=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const a=o.firstChild,u=o.lastChild;!a||a===u&&a.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},gN=(e,n,o)=>{$.from(e.getParent(n,"td,th")).map(Y.fromDom).each(r=>Vt(r,o))},XL=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=Cx(e);Ke.each(r.select("*[data-mce-fragment]"),f=>{if(_e(o[f.nodeName.toLowerCase()])&&D2(r,f)){for(let y=f.parentElement;_e(y)&&y!==a&&!rL(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},hN=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},$4=e=>{Ke.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},JL=pN=QL=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=A1(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let E=f.createRng();const D=n.previousSibling;if(Ge(D)){E.setStart(D,(r=(o=D.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const W=n.nextSibling;Ge(W)&&(D.appendData(W.data),(a=W.parentNode)===null||a===void 0||a.removeChild(W))}else E.setStartBefore(n),E.setEndBefore(n);const R=W=>{let G=Ce.fromRangeStart(W);return G=Kl(e.getBody()).next(G),G==null?void 0:G.toRange()},B=f.getParent(n,f.isBlock);if(f.remove(n),B&&f.isEmpty(B)){const W=jb(B);yd(Y.fromDom(B)),E.setStart(B,0),E.setEnd(B,0),!W&&!JL(B)&&(u=R(E))?(E=u,f.remove(B)):f.add(B,f.create("br",W?{}:{"data-mce-bogus":"1"}))}b.setRng(E)},q2=e=>{const n=e.dom,o=Wb(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,jb);P4(n,o,r)?ol(e,o,Y.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Ge(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},bN=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return $.some(n);return $.none()},eI=(e,n,o)=>{var r;return st(o.children(),C4)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},vN=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,E=Th({validate:!0},e.schema),D='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=bi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,D);let R=u.getRng();const B=R.startContainer,W=e.getBody();B===W&&u.isCollapsed()&&f.isBlock(W.firstChild)&&pN(e,W.firstChild)&&f.isEmpty(W.firstChild)&&(R=f.createRng(),R.setStart(W.firstChild,0),R.setEnd(W.firstChild,0),u.setRng(R)),u.isCollapsed()||q2(e);const G=u.getNode(),z={context:G.nodeName.toLowerCase(),data:o.data,insert:!0},q=b.parse(n,z);if(o.paste===!0&&A4(e.schema,q)&&mN(f,G))return R=M4(E,f,u.getRng(),q),R&&u.setRng(R),n;o.paste===!0&&B4(f,q,G,e.getBody())&&((r=q.firstChild)===null||r===void 0||r.unwrap()),hN(q);let se=q.lastChild;if(se&&se.attr("id")==="mce_marker"){const ie=se;for(se=se.prev;se;se=se.walk(!0))if(se.type===3||!f.isBlock(se.name)){se.parent&&e.schema.isValidChild(se.parent.name,"span")&&se.parent.insert(ie,se,se.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(G),!z.invalid&&!eI(f,G,q))n=E.serialize(q),YL(e,n,G);else{e.selection.setContent(D);let ie=u.getNode(),ae;const be=e.getBody();for(pp(ie)?ie=ae=be:ae=ie;ae&&ae!==be;)ie=ae,ae=ae.parentNode;n=ie===be?be.innerHTML:f.getOuterHTML(ie);const He=b.parse(n),Qe=bN(He),gt=Qe.bind(aN).getOr(He);Qe.each(xt=>xt.replace(q));const ke=q.children(),we=(a=q.parent)!==null&&a!==void 0?a:He;q.unwrap();const Ie=Ct(ke,xt=>Tx(e.schema,xt,we));Ex(Ie,e.schema,gt),x4(b.getNodeFilters(),b.getAttributeFilters(),He),n=E.serialize(He),ie===be?f.setHTML(be,n):f.setOuterHTML(ie,n)}return XL(e,y),QL(e,f.get("mce_marker")),$4(e.getBody()),gN(f,u.getStart(),e.schema),wS(e.schema,e.getBody(),u.getStart()),n},Ax=tI=F4=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&tI(e)},nI=(e,n,o,r)=>{if(o=bi(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=Gc(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,Hp(e),o)):o||(o=a),F4(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Th({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=_r(Y.fromDom(n))?o:Ke.trim(o);return F4(e,a,r.no_selection),{content:a,html:a}}},oI=(e,n,o,r)=>{x4(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=Th({validate:!1},e.schema).serialize(o),u=bi(_r(Y.fromDom(n))?a:Ke.trim(a));return F4(e,u,r.no_selection),{content:o,html:u}},yN=(e,n,o)=>$.from(e.getBody()).map(r=>Ax(n)?oI(e,r,n,o):nI(e,r,n,o)).getOr({content:n,html:Ax(o.content)?"":o.content}),CN=L4=(e,n,o)=>{let r=e.dom;const a=CN(o);for(;r.parentNode;){r=r.parentNode;const u=Y.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return $.none()},sg=(e,n,o)=>{const r=n(e),a=CN(o);return r.orThunk(()=>a(e)?$.none():L4(e,n,a))},I4=wb,SN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(yc(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Gb=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>SN(e,b,o)?!0:b.parentNode===u||!!Km(e,b,o,r,!0));return!!Km(e,f,o,r,a)},K2=(e,n,o)=>ir(o)&&I4(n,o.inline)||Jl(o)&&I4(n,o.block)?!0:yc(o)?Et(n)&&e.is(n,o.selector):!1,H4=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(te(o.onmatch))return o.onmatch(n,o,r);if(f){if(fu(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):hh(e,n,f[y]))return!0}else for(const y in f)if(Gt(f,y)){const E=b?e.getAttrib(n,y):hh(e,n,y),D=Xl(f[y],u),R=Xt(E)||Sr(E);if(R&&Xt(D))continue;if(a&&R&&!o.exact||(!a||o.exact)&&!I4(E,xb(D,y)))return!1}}return!0},Km=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Et(n))for(let b=0;b<u.length;b++){const y=u[b];if(K2(e.dom,n,y)&&H4(f,n,y,"attributes",a,r)&&H4(f,n,y,"styles",a,r)){const E=y.classes;if(E){for(let D=0;D<E.length;D++)if(!e.dom.hasClass(n,Xl(E[D],r)))return}return y}}},Ox=(e,n,o,r,a)=>{if(r)return Gb(e,r,n,o,a);if(r=e.selection.getNode(),Gb(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&Gb(e,u,n,o,a))},sI=O1=(e,n)=>{const o=a=>Qn(a,Y.fromDom(e.getBody())),r=return $.from(e.selection.getStart(!0)).bind(a=>sg(Y.fromDom(a),u=>Fa(n,f=>r(u,f)),o)).getOrNull()},wN=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=c1(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!yc(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},xN=(e,n,o)=>Cn(o,(r,a)=>{const u=m2(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),qb=ec,Dx=V4=z4=e=>{const n=Y.fromTag("span");return ji(n,{id:gb,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Qs(n,Y.fromText(qb)),n},EN=U4=(e,n,o)=>{const r=e.dom,a=e.selection;if(i1(n))og(e,!1,Y.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,E=u.endContainer,D=u.endOffset,R=EN(n);r.remove(n,!0),b===R&&y>0&&u.setStart(R,y-1),E===R&&D>0&&u.setEnd(R,D-1),f&&r.isEmpty(f)&&Nu(Y.fromDom(f)),a.setRng(u)}},W4=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)U4(e,n,o);else if(n=Gf(e.getBody(),a.getStart()),!n)for(;n=r.get(gb);)U4(e,n,o)},Rx=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,Ne(pr,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(ND(Y.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},Z4=Nx=(e,n)=>{var o;const r=Ms(e,n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return Z4(r,a.createTextNode(qb))},rI=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,y=Ct(Ys(f.get()),,E=xN(e,o,y);if(Ct(E,.length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,a,R,u),b.remove(R),$.some(R)}else return $.none()},cI=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=Gf(e.getBody(),a.getStart());const D=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&D.test(E.charAt(b))&&D.test(E.charAt(b-1))){const R=a.getBookmark();f.collapse(!0);let B=Vd(e.dom,f,u);B=M(B),e.formatter.apply(n,o,B),a.moveToBookmark(R)}else{let R=r?V4(r):null;(!r||(R==null?void 0:R.data)!==qb)&&(r=Dx(e.getDoc(),z4(!0).dom),R=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),a.setCursorLocation(R,b)}},TN=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),E=y.startContainer,D=y.startOffset;let R=E;Ge(E)&&(D!==E.data.length&&(f=!0),R=R.parentNode);const B=[];let W;for(;R;){if(Km(e,R,n,o,r)){W=R;break}R.nextSibling&&(f=!0),B.push(R),R=R.parentNode}if(!!W)if(f){const G=u.getBookmark();y.collapse(!0);let z=Vd(a,y,b,!0);z=M(z),e.formatter.remove(n,o,z,r),u.moveToBookmark(G)}else{const G=Gf(e.getBody(),W),z=_e(G)?a.getParents(W.parentNode,We,G):[],q=z4(!1).dom;Rx(e,q,G!=null?G:W);const se=rI(e,q,W,n,o,r),ie=Nx([...B,...se.toArray(),...z],q);G&&U4(e,G,_e(G)),u.setCursorLocation(ie,1),a.isEmpty(W)&&a.remove(W)}},j4=(e,n,o)=>{const r=e.selection,a=e.getBody();W4(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===qb&&W4(e,Gf(a,r.getStart()),!0),(n===37||n===39)&&W4(e,Gf(a,r.getStart()),!0)},kN=e=>Ge(e)&&uc(e.data,oo),aI=e=>{e.on("mouseup keydown",n=>{j4(e,n.keyCode,kN(e.selection.getRng().endContainer))})},_N=AN=(e,n)=>{const{caretContainer:o,caretPosition:r}=_N(n);return mr(Y.fromDom(e),o),uo(Y.fromDom(e)),r},Mx=(e,n)=>{const{caretContainer:o,caretPosition:r}=_N(n);return e.insertNode(o.dom),r},Ym=(e,n)=>{if(xi(n.dom))return!1;const o=e.schema.getTextInlineElements();return Gt(o,Bn(n))&&!xi(n.dom)&&!Ll(n.dom)},Y2={},Bx=fr(["pre"]),lr=G4=lr("pre",e=>{const n=e.selection.getRng(),o=r=(a,u)=>{const f=Y.fromDom(u),b=Pl(f).dom;uo(f),yo(Y.fromDom(a),[Y.fromTag("br",b),Y.fromTag("br",b),...rr(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Ct(Ct(a,Bx),o(a));le(u,f=>{r(f.previousSibling,f)})}});const Px=["fontWeight","fontStyle","color","fontSize","fontFamily"],rg=ON=e=>ao(e,n=>ir(n)&&n.inline==="span"&&rg(n)),q4=(e,n)=>{const o=e.get(n);return hn(o)?ON(o):$.none()},Kb=DN=(e,n)=>Kc(n,Ce.fromRangeEnd(e)).exists(===!1,RN=Yb=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return Kb(o,n[0])&&DN(o,n[0])?n:[];{const r=Bs(n).filter(f=>Kb(o,f)).toArray(),a=zc(n).filter(f=>DN(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},iI=e=>Ct(Yb(e),RN(e.dom)),_h=K4=Ke.each,Xm=Tl=X2=(e,n,o)=>{const r=Cx(e),a=bm(n)&&e.dom.isEditable(n),u=bm(o)&&e.dom.isEditable(o);if(a&&u){const f=Tl(n,"previousSibling"),b=Tl(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const E=y;y=y.nextSibling,f.appendChild(E)}return e.dom.remove(b),Ke.each(Ke.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},$x=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=X2(e,pt(r),r))!==null&&a!==void 0?a:r;X2(e,u,pt(u,!0))}},lI=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";K4(e.select(r,o),a=>{Xm(a)&&e.isEditable(a)&&K4(n.styles,})}},Y4=Fx=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},NN=(e,n)=>o=>!!(o&&hh(e,o,n)),eu=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Fx(e,r)},Jm=Gl.generate([{keep:[]},{rename:["name"]},{removed:[]}]),MN=/^(src|href|style)$/,J2=Ke.each,Xb=wb,D1=e=>/^(TR|TH|TD)$/.test(e.nodeName),Lx=BN=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(Et(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return Ge(r)&&o&&a>=r.data.length&&(r=new Wo(r,e.getBody()).next()||r),Ge(r)&&!o&&a===0&&(r=new Wo(r,e.getBody()).prev()||r),r},X4=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return D1(e)&&r?e.nodeName==="TR"&&r[o]||r:e},J4=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},PN=(e,n,o,r,a)=>{const u=Y.fromDom(n),f=Y.fromDom(e.create(r,a)),b=o?Dc(u):ap(u);return yo(f,b),o?(mr(u,f),Sf(f,u)):(Yi(u,f),Qs(f,u)),f.dom},uI=(e,n)=>n.links&&e.nodeName==="A",$N=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=Gc(e);Jl(o)&&r===u.getRoot()&&(!o.list_block||!Xb(n,o.list_block))&&le(ur(n.childNodes),,!(Tb(o)&&!Xb(o.inline,n))&&u.remove(n,!0)},Jb=FN=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},Q4=e3=(e,n,o)=>{n==="removeformat"?le(_h(e.selection),:q4(e.formatter,n).each(},LN=(e,n,o,r,a)=>{const u=e.dom,f=Cx(e),b=e.schema;if(ir(n)&&xp(b,n.inline)&&Fn(b,r)&&r.parentElement===e.getBody())return $N(e,r,n),Jm.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!K2(u,r,n)&&!uI(r,n))return Jm.keep();const y=r,E=n.preserve_attributes;if(ir(n)&&n.remove==="all"&&hn(E)){const D=Ct(u.getAttribs(y),R=>Re(E,R.name.toLowerCase()));if(u.removeAllAttribs(y),le(D,,D.length>0)return Jm.rename("span")}if(n.remove!=="all"){Q4(u,y,n,o,a),J2(n.attributes,(R,B)=>{const{name:W,value:G}=Jb(B,R,o);if(n.remove_similar||re(G)||!Et(a)||Xb(u.getAttrib(a,W),G)){if(W==="class"){const z=u.getAttrib(y,W);if(z){let q="";if(le(z.split(/\s+/),,q){u.setAttrib(y,W,q);return}}}if(MN.test(W)&&y.removeAttribute("data-mce-"+W),W==="style"&&fr(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(W),u.setStyle(y,"list-style-type","none");return}W==="class"&&y.removeAttribute("className"),y.removeAttribute(W)}}),J2(n.classes,R=>{R=Xl(R,o),(!Et(a)||u.hasClass(a,R))&&u.removeClass(y,R)});const D=u.getAttribs(y);for(let R=0;R<D.length;R++){const B=D[R].nodeName;if(!f.isAttributeInternal(B))return Jm.keep()}}return n.remove!=="none"?($N(e,y,n),Jm.removed()):Jm.keep()},IN=(e,n,o,r,a)=>{let u;return n.parentNode&&le(c1(e.dom,n.parentNode).reverse(),f=>{if(!u&&Et(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Km(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},HN=dI=(e,n,o,r,a,u,f,b)=>{var y,E;let D,R;const B=e.dom;if(o){const W=o.parentNode;for(let G=r.parentNode;G&&G!==W;G=G.parentNode){let z=B.clone(G,!1);for(let q=0;q<n.length&&(z=HN(e,n[q],b,z),z!==null);q++);z&&(D&&z.appendChild(D),R||(R=z),D=z)}u&&(!f.mixed||!B.isBlock(o))&&(r=(y=B.split(o,r))!==null&&y!==void 0?y:r),D&&R&&((E=a.parentNode)===null||E===void 0||E.insertBefore(D,a),R.appendChild(a),ir(f)&&$x(e,f,b,D))}return r},mI=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,E=z=>{const q=IN(e,z,n,o,a);return dI(e,u,q,z,z,!0,f,o)},D=z=>Ei(z)&&Et(z)&&(z.id==="_start"||z.id==="_end"),R=B=W=z=>{const q=b.get(z?"_start":"_end");if(q){let se=q[z?"firstChild":"lastChild"];return D(se)&&(se=se[z?"firstChild":"lastChild"]),Ge(se)&&se.data.length===0&&(se=z?q.previousSibling||q.nextSibling:q.nextSibling||q.previousSibling),b.remove(q,!0),se}else return null},G=z=>{let q,se,ie=Vd(b,z,u,z.collapsed);if(f.split){if(ie=M(ie),q=BN(e,ie,!0),se=BN(e,ie),q!==se){if(q=X4(q,!0),se=X4(se,!1),Lx(b,q,se)){const be=$.from(q.firstChild).getOr(q);E(PN(b,be,!0,"span",{id:"_start","data-mce-type":"bookmark"})),W(!0);return}if(Lx(b,se,q)){const be=$.from(se.lastChild).getOr(se);E(PN(b,be,!1,"span",{id:"_end","data-mce-type":"bookmark"})),W(!1);return}q=J4(b,q,"span",{id:"_start","data-mce-type":"bookmark"}),se=J4(b,se,"span",{id:"_end","data-mce-type":"bookmark"});const ae=b.createRng();ae.setStartAfter(q),ae.setEndBefore(se),f1(b,ae,be=>{le(be,He=>{!Ei(He)&&!Ei(He.parentNode)&&E(He)})}),E(q),E(se),q=W(!0),se=W()}else q=se=E(q);ie.startContainer=q.parentNode?q.parentNode:q,ie.startOffset=b.nodeIndex(q),ie.endContainer=se.parentNode?se.parentNode:se,ie.endOffset=b.nodeIndex(se)+1}f1(b,ie,ae=>{le(ae,B)})};if(r){if(o1(r)){const z=b.createRng();z.setStartBefore(r),z.setEndAfter(r),G(z)}else G(r);Xf(e,n,r,o);return}!y.isCollapsed()||!ir(f)||gh(e).length?(s1(e,()=>Um(e,G),z=>ir(f)&&Ox(e,n,o,z)),e.nodeChanged()):TN(e,n,o,a),e3(e,n,o),Xf(e,n,r,o)},VN=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&mI(e,n,o,r,a)},Q2=zN=Ke.each,fI=(e,n,o,r)=>{const a=u=>{if(bm(u)&&Et(u.parentNode)&&e.isEditable(u)){const f=Nw(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ke.walk(r,a,"childNodes"),a(r))},gI=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=NN(e,"fontSize");Y4(r,u=>a(u)&&e.isEditable(u),eu(e,"backgroundColor",Xl(n.styles.backgroundColor,o)))}},hI=(e,n,o,r)=>{if(ir(n)&&(n.inline==="sub"||n.inline==="sup")){const a=NN(e,"fontSize");Y4(r,eu(e,"fontSize",""));const u=Ct(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},pI=(e,n,o,r)=>{zN(n,a=>{ir(a)&&zN(e.dom.select(a.inline,r),,lI(e.dom,a,r)})},bI=(e,n,o,r,a)=>{const u=a.parentNode;Km(e,u,o,r)&&Q2(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>Km(e,f,o,r)?(Q2(e,n,r,a),!0):!1)},Ix=Ke.each,vI=(e,n,o,r)=>{if(ow(e)&&ir(n)&&o.parentNode){const a=TS(e.schema),u=LL(Y.fromDom(o),f=>xi(f.dom));return Zr(a,r)&&Os(Y.fromDom(o.parentNode),!1)&&!u}else return!1},UN=WN=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,E=D=(G,z)=>{let q=!1;return Ix(G,se=>yc(se)?b.getContentEditable(z)==="false"&&!se.ceFalseOverride||_e(se.collapsed)&&se.collapsed!==f?!0:b.is(z,se.selector)&&!xi(z)?(E(z,se),q=!0,!1):!0:!1),q},R=G=>{if(j(G)){const z=b.create(G);return E(z),z}else return null},B=(G,z,q)=>{const se=[];let ie=!0;const ae=u.inline||u.block,be=R(ae),He=Qe=(ke,we,Ie)=>{const xt=ph(u)&&pr(e.schema,ke)&&Hd(e,we,ae);return Ie&&xt},gt=f1(G,z,ke=>{let we;const Ie=xt=>{let $t=!1,Tn=ie,wn=!1;const _o=xt.parentNode,Vo=_o.nodeName.toLowerCase(),qs=G.getContentEditable(xt);_e(qs)&&(Tn=ie,ie=qs==="true",$t=!0,wn=r1(e,xt));const Hc=ie&&!$t;if(Ro(xt)&&!vI(e,u,xt,Vo)){we=null,Jl(u)&&G.remove(xt);return}if(He(xt)){we=null;return}if(Qe(xt,Vo,Hc)){const So=G.rename(xt,ae);E(So),se.push(So),we=null;return}if(yc(u)){let So=D(a,xt);if(!So&&_e(_o)&&a1(u)&&(So=D(a,_o)),!ir(u)||So){we=null;return}}_e(be)&&gt(xt,Vo,Hc,wn)?(we||(we=G.clone(be,!1),_o.insertBefore(we,xt),se.push(we)),wn&&$t&&(ie=Tn),we.appendChild(xt)):(we=null,le(ur(xt.childNodes),Ie),$t&&(ie=Tn),we=null)};le(ke,Ie)}),u.links===!0&&le(se,ke=>{const we=Ie=>{Ie.nodeName==="A"&&E(Ie,u),le(ur(Ie.childNodes),we)};we(ke)}),le(se,ke=>{const we=$t=>{let Tn=0;return le($t.childNodes,wn=>{!el(wn)&&!Ei(wn)&&Tn++}),Tn},Ie=$t=>ao($t.childNodes,u2).filter(wn=>G.getContentEditable(wn)!=="false"&&K2(G,wn,u)).map(.getOr($t),xt=we(ke);if((se.length>1||!G.isBlock(ke))&&xt===0){G.remove(ke,!0);return}(ir(u)||Jl(u)&&u.wrapper)&&(!u.exact&&xt===1&&(ke=Ie(ke)),pI(e,a,o,ke),bI(e,u,n,o,ke),gI(G,u,o,ke),fI(G,u,o,ke),hI(G,u,o,ke),$x(e,u,o,ke))})},W=o1(r)?r:y.getNode();if(b.getContentEditable(W)==="false"&&!r1(e,W)){r=W,D(a,r),Fc(e,n,r,o);return}if(u){if(r)if(o1(r)){if(!D(a,r)){const G=b.createRng();G.setStartBefore(r),G.setEndAfter(r),B(b,Vd(b,G,a),!0)}}else B(b,r,!0);else!f||!ir(u)||gh(e).length?(y.setRng(Wb(y.getRng())),s1(e,We),e.nodeChanged()):cI(e,n,o),q4(e.formatter,n).each(G=>{le(iI(e.selection),z=>UN(b,z,G,o))});G4(n,e)}Fc(e,n,r,o)},ZN=(e,n,o,r)=>{(r||e.selection.isEditable())&&WN(e,n,o,r)},R1=e=>Gt(e,"vars"),yI=jN=e=>e.selection.getStart(),GN=(e,n,o,r,a)=>Cr(n,b=>{const y=e.formatter.matchNode(b,o,a!=null?a:{},r);return!Jn(y)},b=>SN(e,b,o)?!0:r?!1:_e(e.formatter.matchNode(b,o,a,!0))),qN=(e,n)=>{const o=n!=null?n:jN(e);return Ct(c1(e.dom,o),r=>Et(r)&&!Ll(r))},t3=CI=(e,n,o,r,a,u)=>{const f=n.get();le(o.split(","),b=>{const y=xo(f,b).getOrThunk(,E=if(Jn(u)){const D=a?y.withSimilar:y.withoutSimilar;D.callbacks.push(r),D.callbacks.length===1&&D.state.set(E())}else y.withVars.push({state:Ss(E()),similar:a,vars:u,callback:r})}),n.set(f)},SI=wI=(e,n,o,r,a,u)=>(CI(e,n,o,r,a,u),{unbind:()=>SI(n,o,r)}),xI=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(Ox(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?VN(e,n,o,r):ZN(e,n,o,r))},KN=Ke.explode,YN=EI=(e,n)=>{le(n,},TI=(e,n,o)=>{e.addNodeFilter("font",r=>{le(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),y=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Va(y).each(,a.name="span",a.attr("style",n.serialize(u)),EI(a,["color","face","size"])})})},kI=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";le(r,})},_I=(e,n,o)=>{var r;const a=M0();n.convert_fonts_to_spans&&TI(e,a,Ke.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),kI(e,o,a)},n3=o3=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=Ke.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),y=o.getWhitespaceElements();f.body=1;const E=D=>D.name in f||kd(o,D);for(let D=0,R=r.length;D<R;D++){let B=r[D],W=B.parent;if(W&&E(W)&&B===W.lastChild){let G=B.prev;for(;G;){const z=G.name;if(z!=="span"||G.attr("data-mce-type")!=="bookmark"){z==="br"&&(B=null);break}G=G.prev}if(B&&(B.remove(),Ub(o,b,y,W))){const z=o.getElementRule(W.name);z&&(z.removeEmpty?W.remove():z.paddEmpty&&wx(e,u,E,W))}}else{let G=B;for(;W&&W.firstChild===G&&W.lastChild===G&&(G=W,!f[W.name]);)W=W.parent;if(G===W){const z=new Na("#text",3);z.value=oo,B.replace(z)}}}})},sj=eC=Hx=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=u?eC(r):decodeURIComponent(r);return $.some({type:a[1],data:f,base64Encoded:u})}else return $.none()},Qb=tC=e=>new Promise(,XN=e=>is(e,"blob:")?sj(e):is(e,"data:")?tC(e):Promise.reject("Unknown URI format"),AI=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let OI=0;const rj=JN=QN=(e,n,o)=>{const r=e.create(rj(),n,o);return e.add(r),r},DI=RI=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(is(n,"blob:")){const r=e.getByUri(n);return _e(r)?Promise.resolve(r):XN(n).then(}else return is(n,"data:")?DI(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},eM=NI=tM=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");NI(a)||eM(a)||Xt(u)||DI(o,u,!0).each(};e.addAttributeFilter("src",a=>le(a,r))}},s3=(e,n)=>is(e,`${n}/`),Vx=(e,n,o,r,a)=>{let u;Jn(e)?u="iframe":s3(e,"image")?u="img":s3(e,"video")?u="video":s3(e,"audio")?u="audio":u="iframe";const f=new Na(u,1);return f.attr(u==="audio"?{src:n}:{src:n,width:o,height:r}),(u==="audio"||u==="video")&&f.attr("controls",""),u==="iframe"&&a&&f.attr("sandbox",""),f},nM=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&o3(n,e,o),e.addAttributeFilter("href",a=>{let u=a.length;const f=b=y=>{const E=y?Ke.trim(y):"";return/\b(noopener)\b/g.test(E)?E:f(E)};if(!n.allow_unsafe_link_target)for(;u--;){const y=a[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",a=>{let u=a.length,f,b,y,E;for(;u--;)if(E=a[u],E.name==="a"&&E.firstChild&&!E.attr("href"))for(y=E.parent,f=E.lastChild;f&&y;)b=f.prev,y.insert(f,E),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",a=>{let u=a.length,f,b;for(;u--;)if(f=a[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new Na("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",a=>{var u;let f=a.length;for(;f--;){const b=a[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",E=Ke.explode(y," ");let D="";for(let R=0;R<E.length;R++){const B=E[R];let W=!1,G=r["*"];G&&G[B]&&(W=!0),G=r[b.name],!W&&G&&G[B]&&(W=!0),W&&(D&&(D+=" "),D+=B)}D.length||(D=null),b.attr("class",D)}}),tM(e,n),n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",a=>le(a,u=>{u.replace(Vx(u.attr("type"),u.name==="object"?u.attr("data"):u.attr("src"),u.attr("width"),u.attr("height"),n.sandbox_iframes))})),n.sandbox_iframes&&e.addNodeFilter("iframe",a=>le(a,u=>u.attr("sandbox","")))},{entries:Br,setPrototypeOf:MI,isFrozen:cj,getPrototypeOf:aj,getOwnPropertyDescriptor:ij}=Object;let{freeze:br,seal:kl,create:Ah}=Object,{apply:Qm,construct:r3}=typeof Reflect<"u"&&Reflect;Qm||(Qm=function(n,o,r){return n.apply(o,r)}),br||(br=function(n){return n}),kl||(kl=function(n){return n}),r3||(r3=function(n,o){return new n(...o)});const BI=ed(Array.prototype.forEach),ev=ed(Array.prototype.pop),ef=ed(Array.prototype.push),cg=ed(String.prototype.toLowerCase),zx=ed(String.prototype.toString),c3=ed(String.prototype.match),Qu=ed(String.prototype.replace),oM=ed(String.prototype.indexOf),PI=ed(String.prototype.trim),tu=ed(RegExp.prototype.test),tv=$I(TypeError);function ed(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return Qm(e,n,r)}}function $I(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return r3(e,o)}}function ko(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:cg,MI&&MI(e,null);let a=n.length;for(;a--;){let u=n[a];if(typeof u=="string"){const f=o(u);f!==u&&(cj(n)||(n[a]=f),u=f)}e[u]=!0}return e}function nv(e){const n=Ah(null);for(const[o,r]of Br(e))n[o]=r;return n}function Ux(e,n){for(;e!==null;){const r=ij(e,n);if(r){if(r.get)return ed(r.get);if(typeof r.value=="function")return ed(r.value)}e=aj(e)}function o(r){return null}return o}const a3=br(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),i3=br(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N1=br(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sM=br(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),l3=br(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),rM=br(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cM=br(["#text"]),u3=br(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),d3=br(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aM=br(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nC=br(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),iM=kl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lM=kl(/<%[\w\W]*|[\w\W]*%>/gm),uM=kl(/\${[\w\W]*}/gm),dM=kl(/^data-[\-\w.\u00B7-\uFFFF]/),mM=kl(/^aria-[\-\w]+$/),fM=kl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),FI=kl(/^(?:\w+script|data):/i),LI=kl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Wx=kl(/^html$/i);var ov=Object.freeze({__proto__:null,MUSTACHE_EXPR:iM,ERB_EXPR:lM,TMPLIT_EXPR:uM,DATA_ATTR:dM,ARIA_ATTR:mM,IS_ALLOWED_URI:fM,IS_SCRIPT_OR_DATA:FI,ATTR_WHITESPACE:LI,DOCTYPE_NAME:Wx});const gM=()=>typeof window>"u"?null:window,hM=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch(f){return null}};function oC(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gM();const n=An=>oC(An);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:a}=e;const{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:y,NodeFilter:E,NamedNodeMap:D=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:R,DOMParser:B,trustedTypes:W}=e,G=y.prototype,z=Ux(G,"cloneNode"),q=Ux(G,"nextSibling"),se=Ux(G,"childNodes"),ie=Ux(G,"parentNode");if(typeof f=="function"){const An=a.createElement("template");An.content&&An.content.ownerDocument&&(a=An.content.ownerDocument)}let ae,be="";const{implementation:He,createNodeIterator:Qe,createDocumentFragment:gt,getElementsByTagName:ke}=a,{importNode:we}=o;let Ie={};n.isSupported=typeof Br=="function"&&typeof ie=="function"&&He&&He.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:xt,ERB_EXPR:$t,TMPLIT_EXPR:Tn,DATA_ATTR:wn,ARIA_ATTR:_o,IS_SCRIPT_OR_DATA:Vo,ATTR_WHITESPACE:qs}=ov;let{IS_ALLOWED_URI:Hc}=ov,So=null;const rt=ko({},[...a3,...i3,...N1,...l3,...cM]);let Nt=null;const xn=ko({},[...u3,...d3,...aM,...nC]);let Nn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,on=null,tt=!0,sn=!0,Zn=!1,Bo=!0,Ao=!1,zr=!1,ld=!1,uf=!1,ai=!1,au=!1,dn=!1,eo=!0,zo=!1;const ss="user-content-";let xs=!0,Pi=!1,rm={},qh=null;const nS=ko({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let J1=null;const Av=ko({},["audio","video","img","source","image","track"]);let Ov=null;const oS=ko({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Q1="http://www.w3.org/1998/Math/MathML",e0="http://www.w3.org/2000/svg",ud="http://www.w3.org/1999/xhtml";let df=ud,sS=!1,Dv=null;const IT=ko({},[Q1,e0,ud],zx);let mf;const HT=["application/xhtml+xml","text/html"],rS="text/html";let Qc,Kh=null;const xD=a.createElement("form"),cS=function(Ee){return Ee instanceof RegExp||Ee instanceof Function},aS=function(Ee){if(!(Kh&&Kh===Ee)){if((!Ee||typeof Ee!="object")&&(Ee={}),Ee=nv(Ee),mf=HT.indexOf(Ee.PARSER_MEDIA_TYPE)===-1?mf=rS:mf=Ee.PARSER_MEDIA_TYPE,Qc=mf==="application/xhtml+xml"?zx:cg,So="ALLOWED_TAGS"in Ee?ko({},Ee.ALLOWED_TAGS,Qc):rt,Nt="ALLOWED_ATTR"in Ee?ko({},Ee.ALLOWED_ATTR,Qc):xn,Dv="ALLOWED_NAMESPACES"in Ee?ko({},Ee.ALLOWED_NAMESPACES,zx):IT,Ov="ADD_URI_SAFE_ATTR"in Ee?ko(nv(oS),Ee.ADD_URI_SAFE_ATTR,Qc):oS,J1="ADD_DATA_URI_TAGS"in Ee?ko(nv(Av),Ee.ADD_DATA_URI_TAGS,Qc):Av,qh="FORBID_CONTENTS"in Ee?ko({},Ee.FORBID_CONTENTS,Qc):nS,kt="FORBID_TAGS"in Ee?ko({},Ee.FORBID_TAGS,Qc):{},on="FORBID_ATTR"in Ee?ko({},Ee.FORBID_ATTR,Qc):{},rm="USE_PROFILES"in Ee?Ee.USE_PROFILES:!1,tt=Ee.ALLOW_ARIA_ATTR!==!1,sn=Ee.ALLOW_DATA_ATTR!==!1,Zn=Ee.ALLOW_UNKNOWN_PROTOCOLS||!1,Bo=Ee.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ao=Ee.SAFE_FOR_TEMPLATES||!1,zr=Ee.WHOLE_DOCUMENT||!1,ai=Ee.RETURN_DOM||!1,au=Ee.RETURN_DOM_FRAGMENT||!1,dn=Ee.RETURN_TRUSTED_TYPE||!1,uf=Ee.FORCE_BODY||!1,eo=Ee.SANITIZE_DOM!==!1,zo=Ee.SANITIZE_NAMED_PROPS||!1,xs=Ee.KEEP_CONTENT!==!1,Pi=Ee.IN_PLACE||!1,Hc=Ee.ALLOWED_URI_REGEXP||fM,df=Ee.NAMESPACE||ud,Nn=Ee.CUSTOM_ELEMENT_HANDLING||{},Ee.CUSTOM_ELEMENT_HANDLING&&cS(Ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Nn.tagNameCheck=Ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ee.CUSTOM_ELEMENT_HANDLING&&cS(Ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Nn.attributeNameCheck=Ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ee.CUSTOM_ELEMENT_HANDLING&&typeof Ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Nn.allowCustomizedBuiltInElements=Ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ao&&(sn=!1),au&&(ai=!0),rm&&(So=ko({},[...cM]),Nt=[],rm.html===!0&&(ko(So,a3),ko(Nt,u3)),rm.svg===!0&&(ko(So,i3),ko(Nt,d3),ko(Nt,nC)),rm.svgFilters===!0&&(ko(So,N1),ko(Nt,d3),ko(Nt,nC)),rm.mathMl===!0&&(ko(So,l3),ko(Nt,aM),ko(Nt,nC))),Ee.ADD_TAGS&&(So===rt&&(So=nv(So)),ko(So,Ee.ADD_TAGS,Qc)),Ee.ADD_ATTR&&(Nt===xn&&(Nt=nv(Nt)),ko(Nt,Ee.ADD_ATTR,Qc)),Ee.ADD_URI_SAFE_ATTR&&ko(Ov,Ee.ADD_URI_SAFE_ATTR,Qc),Ee.FORBID_CONTENTS&&(qh===nS&&(qh=nv(qh)),ko(qh,Ee.FORBID_CONTENTS,Qc)),xs&&(So["#text"]=!0),zr&&ko(So,["html","head","body"]),So.table&&(ko(So,["tbody"]),delete kt.tbody),Ee.TRUSTED_TYPES_POLICY){if(typeof Ee.TRUSTED_TYPES_POLICY.createHTML!="function")throw tv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ee.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw tv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ae=Ee.TRUSTED_TYPES_POLICY,be=ae.createHTML("")}else ae===void 0&&(ae=hM(W,r)),ae!==null&&typeof be=="string"&&(be=ae.createHTML(""));br&&br(Ee),Kh=Ee}},ff=ko({},["mi","mo","mn","ms","mtext"]),Rv=ko({},["foreignobject","desc","title","annotation-xml"]),ve=ko({},["title","style","font","a","script"]),Se=ko({},i3);ko(Se,N1),ko(Se,sM);const ot=ko({},l3);ko(ot,rM);const Ye=function(Ee){let Dt=ie(Ee);(!Dt||!Dt.tagName)&&(Dt={namespaceURI:df,tagName:"template"});const Jt=cg(Ee.tagName),Ks=cg(Dt.tagName);return Dv[Ee.namespaceURI]?Ee.namespaceURI===e0?Dt.namespaceURI===ud?Jt==="svg":Dt.namespaceURI===Q1?Jt==="svg"&&(Ks==="annotation-xml"||ff[Ks]):Boolean(Se[Jt]):Ee.namespaceURI===Q1?Dt.namespaceURI===ud?Jt==="math":Dt.namespaceURI===e0?Jt==="math"&&Rv[Ks]:Boolean(ot[Jt]):Ee.namespaceURI===ud?Dt.namespaceURI===e0&&!Rv[Ks]||Dt.namespaceURI===Q1&&!ff[Ks]?!1:!ot[Jt]&&(ve[Jt]||!Se[Jt]):!!(mf==="application/xhtml+xml"&&Dv[Ee.namespaceURI]):!1},Bt=function(Ee){ef(n.removed,{element:Ee});try{Ee.parentNode.removeChild(Ee)}catch(Dt){Ee.remove()}},Mn=function(Ee,Dt){try{ef(n.removed,{attribute:Dt.getAttributeNode(Ee),from:Dt})}catch(Jt){ef(n.removed,{attribute:null,from:Dt})}if(Dt.removeAttribute(Ee),Ee==="is"&&!Nt[Ee])if(ai||au)try{Bt(Dt)}catch(Jt){}else try{Dt.setAttribute(Ee,"")}catch(Jt){}},hs=function(Ee){let Dt,Jt;if(uf)Ee="<remove></remove>"+Ee;else{const lu=c3(Ee,/^[\r\n\t ]+/);Jt=lu&&lu[0]}mf==="application/xhtml+xml"&&df===ud&&(Ee='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ee+"</body></html>");const Ks=ae?ae.createHTML(Ee):Ee;if(df===ud)try{Dt=new B().parseFromString(Ks,mf)}catch(lu){}if(!Dt||!Dt.documentElement){Dt=He.createDocument(df,"template",null);try{Dt.documentElement.innerHTML=sS?be:Ks}catch(lu){}}const $a=Dt.body||Dt.documentElement;return Ee&&Jt&&$a.insertBefore(a.createTextNode(Jt),$a.childNodes[0]||null),df===ud?ke.call(Dt,zr?"html":"body")[0]:zr?Dt.documentElement:$a},ii=function(Ee){return Qe.call(Ee.ownerDocument||Ee,Ee,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null,!1)},cc=function(Ee){return Ee instanceof R&&(typeof Ee.nodeName!="string"||typeof Ee.textContent!="string"||typeof Ee.removeChild!="function"||!(Ee.attributes instanceof D)||typeof Ee.removeAttribute!="function"||typeof Ee.setAttribute!="function"||typeof Ee.namespaceURI!="string"||typeof Ee.insertBefore!="function"||typeof Ee.hasChildNodes!="function")},Yh=function(Ee){return typeof b=="object"?Ee instanceof b:Ee&&typeof Ee=="object"&&typeof Ee.nodeType=="number"&&typeof Ee.nodeName=="string"},iu=function(Ee,Dt,Jt){!Ie[Ee]||BI(Ie[Ee],Ks=>{Ks.call(n,Dt,Jt,Kh)})},ED=function(Ee){let Dt;if(iu("beforeSanitizeElements",Ee,null),cc(Ee))return Bt(Ee),!0;const Jt=Qc(Ee.nodeName);if(iu("uponSanitizeElement",Ee,{tagName:Jt,allowedTags:So}),Ee.hasChildNodes()&&!Yh(Ee.firstElementChild)&&(!Yh(Ee.content)||!Yh(Ee.content.firstElementChild))&&tu(/<[/\w]/g,Ee.innerHTML)&&tu(/<[/\w]/g,Ee.textContent))return Bt(Ee),!0;if(!So[Jt]||kt[Jt]){if(!kt[Jt]&&TD(Jt)&&(Nn.tagNameCheck instanceof RegExp&&tu(Nn.tagNameCheck,Jt)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Jt)))return!1;if(xs&&!qh[Jt]){const Ks=ie(Ee)||Ee.parentNode,$a=se(Ee)||Ee.childNodes;if($a&&Ks){const lu=$a.length;for(let Ur=lu-1;Ur>=0;--Ur)Ks.insertBefore(z($a[Ur],!0),q(Ee))}}return Bt(Ee),!0}return Ee instanceof y&&!Ye(Ee)||(Jt==="noscript"||Jt==="noembed"||Jt==="noframes")&&tu(/<\/no(script|embed|frames)/i,Ee.innerHTML)?(Bt(Ee),!0):(Ao&&Ee.nodeType===3&&(Dt=Ee.textContent,Dt=Qu(Dt,xt," "),Dt=Qu(Dt,$t," "),Dt=Qu(Dt,Tn," "),Ee.textContent!==Dt&&(ef(n.removed,{element:Ee.cloneNode()}),Ee.textContent=Dt)),iu("afterSanitizeElements",Ee,null),!1)},VT=function(Ee,Dt,Jt){if(eo&&(Dt==="id"||Dt==="name")&&(Jt in a||Jt in xD))return!1;if(!(sn&&!on[Dt]&&tu(wn,Dt))){if(!(tt&&tu(_o,Dt))){if(!Nt[Dt]||on[Dt]){if(!(TD(Ee)&&(Nn.tagNameCheck instanceof RegExp&&tu(Nn.tagNameCheck,Ee)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Ee))&&(Nn.attributeNameCheck instanceof RegExp&&tu(Nn.attributeNameCheck,Dt)||Nn.attributeNameCheck instanceof Function&&Nn.attributeNameCheck(Dt))||Dt==="is"&&Nn.allowCustomizedBuiltInElements&&(Nn.tagNameCheck instanceof RegExp&&tu(Nn.tagNameCheck,Jt)||Nn.tagNameCheck instanceof Function&&Nn.tagNameCheck(Jt))))return!1}else if(!Ov[Dt]){if(!tu(Hc,Qu(Jt,qs,""))){if(!((Dt==="src"||Dt==="xlink:href"||Dt==="href")&&Ee!=="script"&&oM(Jt,"data:")===0&&J1[Ee])){if(!(Zn&&!tu(Vo,Qu(Jt,qs,"")))){if(Jt)return!1}}}}}}return!0},TD=function(Ee){return Ee.indexOf("-")>0},kD=function(Ee){let Dt,Jt,Ks,$a;iu("beforeSanitizeAttributes",Ee,null);const{attributes:lu}=Ee;if(!lu)return;const Ur={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Nt};for($a=lu.length;$a--;){Dt=lu[$a];const{name:dd,namespaceURI:zT}=Dt;Jt=dd==="value"?Dt.value:PI(Dt.value);const ZZ=Jt;if(Ks=Qc(dd),Ur.attrName=Ks,Ur.attrValue=Jt,Ur.keepAttr=!0,Ur.forceKeepAttr=void 0,iu("uponSanitizeAttribute",Ee,Ur),Jt=Ur.attrValue,Ur.forceKeepAttr)continue;if(!Ur.keepAttr){Mn(dd,Ee);continue}if(!Bo&&tu(/\/>/i,Jt)){Mn(dd,Ee);continue}Ao&&(Jt=Qu(Jt,xt," "),Jt=Qu(Jt,$t," "),Jt=Qu(Jt,Tn," "));const _D=Qc(Ee.nodeName);if(!VT(_D,Ks,Jt)){Mn(dd,Ee);continue}if(zo&&(Ks==="id"||Ks==="name")&&(Mn(dd,Ee),Jt=ss+Jt),ae&&typeof W=="object"&&typeof W.getAttributeType=="function"&&!zT)switch(W.getAttributeType(_D,Ks)){case"TrustedHTML":{Jt=ae.createHTML(Jt);break}case"TrustedScriptURL":{Jt=ae.createScriptURL(Jt);break}}if(Jt!==ZZ)try{zT?Ee.setAttributeNS(zT,dd,Jt):Ee.setAttribute(dd,Jt)}catch(u6){Mn(dd,Ee)}}iu("afterSanitizeAttributes",Ee,null)},WZ=function An(Ee){let Dt;const Jt=ii(Ee);for(iu("beforeSanitizeShadowDOM",Ee,null);Dt=Jt.nextNode();)iu("uponSanitizeShadowNode",Dt,null),!ED(Dt)&&(Dt.content instanceof u&&An(Dt.content),kD(Dt));iu("afterSanitizeShadowDOM",Ee,null)};return n.sanitize=function(An){let Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt,Jt,Ks,$a;if(sS=!An,sS&&(An="<!-->"),typeof An!="string"&&!Yh(An))if(typeof An.toString=="function"){if(An=An.toString(),typeof An!="string")throw tv("dirty is not a string, aborting")}else throw tv("toString is not a function");if(!n.isSupported)return An;if(ld||aS(Ee),n.removed=[],typeof An=="string"&&(Pi=!1),Pi){if(An.nodeName){const dd=Qc(An.nodeName);if(!So[dd]||kt[dd])throw tv("root node is forbidden and cannot be sanitized in-place")}}else if(An instanceof b)Dt=hs("<!---->"),Jt=Dt.ownerDocument.importNode(An,!0),Jt.nodeType===1&&Jt.nodeName==="BODY"||Jt.nodeName==="HTML"?Dt=Jt:Dt.appendChild(Jt);else{if(!ai&&!Ao&&!zr&&An.indexOf("<")===-1)return ae&&dn?ae.createHTML(An):An;if(Dt=hs(An),!Dt)return ai?null:dn?be:""}Dt&&uf&&Bt(Dt.firstChild);const lu=ii(Pi?An:Dt);for(;Ks=lu.nextNode();)ED(Ks)||(Ks.content instanceof u&&WZ(Ks.content),kD(Ks));if(Pi)return An;if(ai){if(au)for($a=gt.call(Dt.ownerDocument);Dt.firstChild;)$a.appendChild(Dt.firstChild);else $a=Dt;return(Nt.shadowroot||Nt.shadowrootmode)&&($a=we.call(o,$a,!0)),$a}let Ur=zr?Dt.outerHTML:Dt.innerHTML;return zr&&So["!doctype"]&&Dt.ownerDocument&&Dt.ownerDocument.doctype&&Dt.ownerDocument.doctype.name&&tu(Wx,Dt.ownerDocument.doctype.name)&&(Ur="<!DOCTYPE "+Dt.ownerDocument.doctype.name+`>
`+Ur),Ao&&(Ur=Qu(Ur,xt," "),Ur=Qu(Ur,$t," "),Ur=Qu(Ur,Tn," ")),ae&&dn?ae.createHTML(Ur):Ur},n.setConfig=function(An){aS(An),ld=!0},n.clearConfig=function(){Kh=null,ld=!1},n.isValidAttribute=function(An,Ee,Dt){Kh||aS({});const Jt=Qc(An),Ks=Qc(Ee);return VT(Jt,Ks,Dt)},n.addHook=function(An,Ee){typeof Ee=="function"&&(Ie[An]=Ie[An]||[],ef(Ie[An],Ee))},n.removeHook=function(An){if(Ie[An])return ev(Ie[An])},n.removeHooks=function(An){Ie[An]&&(Ie[An]=[])},n.removeAllHooks=function(){Ie={}},n}var pM=oC();const bM=Ke.each,Oh=Ke.trim,m3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],vM={ftp:21,http:80,https:443,mailto:25},sC=["img","video"],yM=(e,n)=>_e(e)?!e:_e(n)?!Re(sC,n):!0,f3=g3=(e,n,o)=>{const r=f3(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?yM(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class nu{atic getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Oh(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new nu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&bM(m3,,r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}oRelative(n){if(n==="./")return n;const o=new nu(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}RelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?a+="/"+y[u]:a+=y[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];bM(u,;const y=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}y.push(f[R])}const E=b.length-r;let D;return E<=0?D=Uo(y).join("/"):D=b.slice(0,E).join("/")+"/"+Uo(y).join("/"),D.indexOf("/")!==0&&(D="/"+D),a&&D.lastIndexOf("/")!==D.length-1&&(D+=a),D}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const II=Ke.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),h3="data-mce-type";let CM=0;const Zx=(e,n,o,r,a)=>{var u,f,b,y;const E=n.validate,D=o.getSpecialElements();e.nodeType===mc&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const R=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){_e(a)&&(a.allowedTags[R]=!0);return}if(e.nodeType!==kr||R==="body")return;const B=Y.fromDom(e),W=Cu(B,h3),G=Ac(B,"data-mce-bogus");if(!W&&j(G)){G==="all"?uo(B):Xi(B);return}const z=o.getElementRule(R);if(E&&!z){Gt(D,R)?uo(B):Xi(B);return}else _e(a)&&(a.allowedTags[R]=!0);if(E&&z&&!W){if(le((b=z.attributesForced)!==null&&b!==void 0?b:[],q=>{qo(B,q.name,q.value==="{$uid}"?`mce_${CM++}`:q.value)}),le((y=z.attributesDefault)!==null&&y!==void 0?y:[],q=>{Cu(B,q.name)||qo(B,q.name,q.value==="{$uid}"?`mce_${CM++}`:q.value)}),z.attributesRequired&&!st(z.attributesRequired,q=>Cu(B,q))){Xi(B);return}if(z.removeEmptyAttrs&&Gi(B)){Xi(B);return}z.outputName&&z.outputName!==R&&Zl(B,z.outputName)}},HI=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=p3(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,wM(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&is(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):SM(e,f)&&(a.forceKeepAttr=!0)},p3=(e,n,o,r,a,u)=>o!=="html"&&!zl(r)?!0:!(a in II&&g3(e,u,r))&&(!e.validate||n.isValid(r,a)||is(a,"data-")||is(a,"aria-")),SM=(e,n)=>e.hasAttribute(h3)&&(n==="id"||n==="class"||n==="style"),wM=VI=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,y=f.value;!p3(n,o,r,e.tagName.toLowerCase(),b,y)&&!SM(e,b)?e.removeAttribute(b):wM(b,o)&&e.setAttribute(b,b)}},zI=(e,n,o)=>{const r=pM();return r.addHook("uponSanitizeElement",(a,u)=>{Zx(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{HI(a,e,n,o.current(),u)}),r},UI=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},WI=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};return pM().sanitize(e,o),e.innerHTML},ZI=(e,n)=>{const o=wm();if(e.sanitize){const r=zI(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,UI(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:WI}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let y;for(;y=b.nextNode();){const E=o.track(y);Zx(y,e,n,E),Et(y)&&VI(y,e,n,E)}o.reset()},sanitizeNamespaceElement:Oe}},xM=Ke.makeMap,EM=Ke.extend,rC=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea",f=n.childNodes;for(let b=0,y=f.length;b<y;b++){const E=f[b],D=new Na(E.nodeName.toLowerCase(),E.nodeType);if(Et(E)){const R=E.attributes;for(let B=0,W=R.length;B<W;B++){const G=R[B];D.attr(G.name,G.value)}zl(D.name)&&(r(E),D.value=E.innerHTML)}else Ge(E)?(D.value=E.data,u&&(D.raw=!0)):(Sd(E)||gS(E)||vm(E))&&(D.value=E.data);zl(D.name)||rC(D,E,o,r),e.append(D)}},Ba=jI=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=EM(xM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=TS(n),E=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,B=W=G=ie=>ie.name in b||kd(n,ie)||zl(ie.name)&&ie.parent===e,z=(ie,ae)=>{const be=ae?ie.prev:ie.next;return _e(be)||Xt(ie.parent)?!1:G(ie.parent)&&(ie.parent!==e||r.isRootContent===!0)};return[ie=>{var ae;if(ie.type===3&&!B(ie)){let be=(ae=ie.value)!==null&&ae!==void 0?ae:"";be=be.replace(E," "),(T4(ie.prev,G)||z(ie,!0))&&(be=be.replace(D,"")),be.length===0?ie.remove():ie.value=be}},ie=>{var ae;if(ie.type===1){const be=n.getElementRule(ie.name);if(a&&be){const He=Ub(n,u,f,ie);be.paddInEmptyBlock&&He&&W(ie)?wx(o,r,G,ie):be.removeEmpty&&He?G(ie)?ie.remove():ie.unwrap():be.paddEmpty&&(He||rN(ie))&&wx(o,r,G,ie)}}else if(ie.type===3&&!B(ie)){let be=(ae=ie.value)!==null&&ae!==void 0?ae:"";(ie.next&&G(ie.next)||z(ie,!1))&&(be=be.replace(R,"")),be.length===0?ie.remove():ie.value=be}}]},jx=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},td=(e={},n=Dd())=>{const o=YN(),r=YN(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=ZI(a,n),b=(ae,be,He="html")=>{const Qe=He==="xhtml"?"application/xhtml+xml":"text/html",gt=Gt(n.getSpecialElements(),be.toLowerCase()),ke=gt?`<${be}>${ae}</${be}>`:ae,we=He==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ke}</body></html>`:`<body>${ke}</body>`,Ie=u.parseFromString(we,Qe).body;return f.sanitizeHtmlElement(Ie,Qe),gt?Ie.firstChild:Ie},y=o.addFilter,E=o.getFilters,D=o.removeFilter,R=r.addFilter,B=r.getFilters,W=r.removeFilter,G=z=(ae,be)=>{const He=j(be.attr(h3)),Qe=be.type===1&&!Gt(ae,be.name)&&!kd(n,be)&&!zl(be.name);return be.type===3||Qe&&!He},q=(ae,be)=>{const He=EM(xM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Qe=/^[ \t\r\n]+/,gt=/[ \t\r\n]+$/;let ke=ae.firstChild,we=null;const Ie=xt=>{var $t,Tn;xt&&(ke=xt.firstChild,ke&&ke.type===3&&(ke.value=($t=ke.value)===null||$t===void 0?void 0:$t.replace(Qe,"")),ke=xt.lastChild,ke&&ke.type===3&&(ke.value=(Tn=ke.value)===null||Tn===void 0?void 0:Tn.replace(gt,"")))};if(!!n.isValidChild(ae.name,be.toLowerCase())){for(;ke;){const xt=ke.next;z(He,ke)?(we||(we=new Na(be,1),we.attr(a.forced_root_block_attrs),ae.insert(we,ke)),we.append(ke)):(Ie(we),we=null),ke=xt}Ie(we)}},ie={schema:n,addAttributeFilter:R,getAttributeFilters:B,removeAttributeFilter:W,addNodeFilter:y,getNodeFilters:E,removeNodeFilter:D,parse:(ae,be={})=>{var He;const Qe=a.validate,gt=(He=be.context)!==null&&He!==void 0?He:a.root_name,ke=b(ae,gt,be.format);wp(n,ke);const we=new Na(gt,11);rC(we,ke,n.getSpecialElements(),f.sanitizeNamespaceElement),ke.innerHTML="";const[Ie,xt]=jI(we,n,a,be),$t=[],Tn=Qe?qs=>G(qs,$t):Oe,wn={nodes:{},attributes:{}},_o=if(Ba(we,[Ie,_o],[xt,Tn]),$t.reverse(),Qe&&$t.length>0)if(be.context){const{pass:qs,fail:Hc}=jn($t,So=>So.parent===we);Ex(Hc,n,we,_o),be.invalid=qs.length>0}else Ex($t,n,we,_o);const Vo=jx(a,be);return Vo&&(we.name==="body"||be.isRootContent)&&q(we,Vo),be.invalid||w4(wn,be),we}};return nM(ie,a),n3(ie,a,n),ie},TM=Ai=(e,n,o)=>{const r=TM(e),a=n(r);if(a.isDefaultPrevented())return a;if(Ax(e))if(a.content!==r){const u=td({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},Dh=(e,n)=>{if(n.no_events)return ka.value(n);{const o=E_(e,n);return o.isDefaultPrevented()?ka.error(Pn(e,{content:"",...o}).content):ka.value(o)}},b3=(e,n,o)=>o.no_events?n:Ai(n,a=>Pn(e,{...o,content:a}),{sanitize:th(e),sandbox_iframes:ib(e)}).content,v3=(e,n)=>{if(n.no_events)return ka.value(n);{const o=Ai(n.content,{sanitize:th(e),sandbox_iframes:ib(e)});return o.isDefaultPrevented()?(Vw(e,o),ka.error(void 0)):ka.value(o)}},Gx=y3=(e,n,o)=>({element:e,width:n,rows:o}),C3=(e,n)=>({element:e,cells:n}),cC=(e,n)=>({x:e,y:n}),qx=GI=(e,n,o,r,a)=>{const u=qx(a,"rowspan"),f=qx(a,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=C3(Z0(r),[]));for(let E=n;E<n+f;E++){const D=b[y].cells;D[E]=y===o&&E===n?a:ti(a)}}},kM=qI=Kx=Yx=_M=KI=tf=(e,n)=>{const o=ti(e.element),r=Y.fromTag("tbody");return yo(r,n),Qs(o,r),o},S3=YI=e=>{const n=y3(ti(e),0,[]);return le(Jr(e,"tr"),(o,r)=>{le(Jr(o,"td,th"),(a,u)=>{GI(n,qI(n,u,r),r,o,a)})}),y3(n.element,Kx(n.rows),n.rows)},Xx=e=>tf(e,S3(e)),w3=(e,n,o)=>Yx(e,n).bind(r=>Yx(e,o).map(a=>KI(e,r,a))),AM=e=>ao(e,n=>Bn(n)==="ul"||Bn(n)==="ol"),OM=(e,n)=>ao(e,o=>Bn(o)==="li"&&i2(o,n)).fold(ze([]),o=>AM(e).map(r=>{const a=Y.fromTag(Bn(r)),u=wo(bg(r),;return Nc(a,u),[Y.fromTag("li"),a]}).getOr([])),DM=XI=JI=(e,n,o)=>{const r=Y.fromDom(n.commonAncestorContainer),a=Gm(r,e),u=Ct(a,y=>o.isWrapper(Bn(y))),f=OM(a,n),b=u.concat(f.length?f:XI(r));return De(b,ti)},RM=()=>k2([]),QI=(e,n,o)=>DM(Y.fromDom(n.cloneContents()),JI(e,n,o)),e8=NM=(e,n)=>e8(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=YI(o);return w3(u,r,a).map(}).getOrThunk(RM),t8=(e,n,o)=>n.length>0&&n[0].collapsed?RM():QI(e,n[0],o),n8=(e,n,o)=>{const r=g_(n,e);return r.length>0?NM(e,r):t8(e,n,o)},Jx=x3=e=>bi(e.innerText),E3=T3=e=>$.from(e.selection.getRng()).map(n=>{var o;const r=$.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=E3(r),f=Y.fromDom(n.cloneContents());vn(f),q_(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=x3(b),E=bi((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),Jx(E,0)||Jx(E,E.length-1)){const D=r.getOr(a),R=x3(D),B=R.indexOf(y);if(B===-1)return y;{const W=Jx(R,B-1),G=Jx(R,B+y.length);return(W?" ":"")+y+(G?" ":"")}}else return y}).getOr(""),MM=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=G_(e,vb(a)),f=n.contextual?n8(Y.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},k3=(e,n)=>{if(n.format==="text")return T3(e);{const o=MM(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},BM=PM=(e,n,o={})=>{const r=BM(o,n);return Dh(e,r).fold(pn,a=>{const u=k3(e,a);return b3(e,u,a)})},aC=0,_3=1,A3=2,$M=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(D,R,B)=>({start:D,end:R,diag:B}),f=(D,R,B,W,G)=>{const z=y(D,R,B,W);if(z===null||z.start===R&&z.diag===R-W||z.end===D&&z.diag===D-B){let q=D,se=B;for(;q<R||se<W;)q<R&&se<W&&e[q]===n[se]?(G.push([aC,e[q]]),++q,++se):R-D>W-B?(G.push([A3,e[q]]),++q):(G.push([_3,n[se]]),++se)}else{f(D,z.start,B,z.start-z.diag,G);for(let q=z.start;q<z.end;++q)G.push([aC,e[q]]);f(z.end,R,z.end-z.diag,W,G)}},b=(D,R,B,W)=>{let G=D;for(;G-R<W&&G<B&&e[G]===n[G-R];)++G;return u(D,G,R)},y=(D,R,B,W)=>{const G=R-D,z=W-B;if(G===0||z===0)return null;const q=G-z,se=z+G,ie=(se%2===0?se:se+1)/2;r[1+ie]=D,a[1+ie]=R+1;let ae,be,He,Qe,gt;for(ae=0;ae<=ie;++ae){for(be=-ae;be<=ae;be+=2){for(He=be+ie,be===-ae||be!==ae&&r[He-1]<r[He+1]?r[He]=r[He+1]:r[He]=r[He-1]+1,Qe=r[He],gt=Qe-D+B-be;Qe<R&&gt<W&&e[Qe]===n[gt];)r[He]=++Qe,++gt;if(q%2!==0&&q-ae<=be&&be<=q+ae&&a[He-q]<=r[He])return b(a[He-q],be+D-B,R,W)}for(be=q-ae;be<=q+ae;be+=2){for(He=be+ie-q,be===q-ae||be!==q+ae&&a[He+1]<=a[He-1]?a[He]=a[He+1]-1:a[He]=a[He-1],Qe=a[He]-1,gt=Qe-D+B-be;Qe>=D&&gt>=B&&e[Qe]===n[gt];)a[He]=Qe--,gt--;if(q%2===0&&-ae<=be&&be<=ae&&a[He]<=r[He+q])return b(a[He],be+D-B,R,W)}}return null},E=[];return f(0,e.length,0,n.length,E),E},O3=D3=o8=(e,n,o)=>{const r=D3(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},Qx=s8=(e,n)=>{let o=0;le(e,r=>{r[0]===aC?o++:r[0]===_3?(o8(n,r[1],o),o++):r[0]===A3&&Qx(n,o)})},r8=(e,n)=>Ct(De(ur(e.childNodes),n?k(bi,O3):O3),o=>o.length>0),c8=(e,n)=>{const o=De(ur(n.childNodes),O3);return s8($M(o,e),n),n},FM=di(,LM=e=>e.querySelector("iframe")!==null,a8=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),i8=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),eE=e=>{const n=e.serializer.getTempAttrs(),o=bR(e.getBody(),n);return LM(o)?a8(r8(o,!0)):i8(bi(o.innerHTML))},R3=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?c8(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:_e(r)&&Tw(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},N3=e=>e.type==="fragmented"?e.fragments.join(""):e.content,M3=e=>{const n=Y.fromTag("body",FM());return pm(n,N3(e)),le(Jr(n,"*[data-mce-bogus]"),Xi),Dn(n)},lj=(e,n)=>N3(e)===N3(n),l8=B3=(e,n)=>!e||!n?!1:lj(e,n)?!0:l8(e,n),P3=tE=IM=u8=e=>{e.typing&&(e.typing=!1,e.add())},d8=HM=(e,n,o,r,a,u,f)=>{const b=eE(e),y=Ke.extend(u||{},b);if(!P3(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&B3(E,y))return null;n.data[o.get()]&&a.get().each(;const D=Up(e);if(D&&n.data.length>D){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}y.bookmark=qg(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const R={level:y,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),y},m8=f8=g8=h8=p8=e=>{e.clear(),e.add()},uj=dj=b8=v8=mj=(e,n)=>{const o=e.dom,r=_e(n)?n:e.getBody();le(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=Hk(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,y=cw(e);b&&e.hasVisual?o.addClass(a,y):o.removeClass(a,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},VM=e=>({init:{bindEvents:Oe},undoManager:{beforeChange:(n,o)=>d8(e,n,o),add:(n,o,r,a,u,f)=>HM(e,n,o,r,a,u,f),undo:(n,o,r)=>h8(e,n,o,r),redo:(n,o)=>g8(e,n,o),clear:(n,o)=>m8(e,n,o),reset:n=>p8(n),hasUndo:(n,o)=>uj(e,n,o),hasRedo:(n,o)=>dj(n,o),transact:ignore:(n,o)=>v8(n,o),extra:(n,o,r,a)=>f8(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>Ox(e,n,o,r,a),matchAll:(n,o)=>sI(e,n,o),matchNode:(n,o,r,a)=>Km(e,n,o,r,a),canApply:n=>wN(e,n),closest:n=>O1(e,n),apply:(n,o,r)=>ZN(e,n,o,r),remove:toggle:(n,o,r)=>xI(e,n,o,r),formatChanged:,editor:{getContent:n=>tj(e,n),setContent:(n,o)=>yN(e,n,o),insertContent:(n,o)=>vN(e,n,o),addVisual:n=>mj(e,n)},selection:{getContent:(n,o)=>PM(e,n,o)},autocompleter:{addDecoration:n=>j6(e,n),removeDecoration:()=>q6(e,Y.fromDom(e.getBody()))},raw:{getModel:()=>$.none()}}),Gs=$3=ag=e=>Gt(e.plugins,"rtc"),y8=C8=e=>{const n=e;return y8(e).fold(o=>(n.rtcInstance=$3(),$.some(()=>o().then(r=>(n.rtcInstance=Gs(r),r.rtc.isRemote)))))},Rh=Vr=fj=(e,n,o)=>{Vr(e).undoManager.beforeChange(n,o)},Xc=zM=(e,n,o,r)=>Vr(e).undoManager.undo(n,o,r),UM=(e,n,o)=>Vr(e).undoManager.redo(n,o),WM=(e,n,o)=>{Vr(e).undoManager.clear(n,o)},S8=w8=(e,n,o)=>Vr(e).undoManager.hasUndo(n,o),nE=(e,n,o)=>Vr(e).undoManager.hasRedo(n,o),x8=F3=E8=(e,n,o,r,a)=>{Vr(e).undoManager.extra(n,o,r,a)},ZM=(e,n,o,r,a)=>Vr(e).formatter.match(n,o,r,a),jM=(e,n,o)=>Vr(e).formatter.matchAll(n,o),L3=GM=(e,n)=>Vr(e).formatter.canApply(n),I3=(e,n)=>Vr(e).formatter.closest(n),T8=(e,n,o,r)=>{Vr(e).formatter.apply(n,o,r)},k8=_8=ou=A8=(e,n)=>Rh(e).editor.getContent(n),O8=(e,n,o)=>Rh(e).editor.setContent(n,o),D8=(e,n,o)=>Rh(e).editor.insertContent(n,o),R8=N8=(e,n)=>Vr(e).editor.addVisual(n),H3=e=>Vr(e).init.bindEvents(),M8=B8=P8=(e,n={})=>{const o=n.format?n.format:"html";return R8(e,o,n)},iC=e=>e.dom.length===0?(uo(e),$.none()):$.some(e),$8=F8=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(sc(u,f,a,!1,!r),o.setStart(f,b)):(sc(f,u,a,!1,!r),o.setEnd(f,b))},qM=(e,n,o)=>{Yr(e).each(r=>{const a=e.dom;n&&Lb(r,Ce(a,0),o)?E1(a,0,o):!n&&Ib(r,Ce(a,a.length),o)&&HR(a,a.length,o)})},oE=(e,n,o,r,a)=>{e.bind(u=>((r?HR:E1)(u.dom,r?u.dom.length:0,a),n.filter(Kr).map()).orThunk(()=>$8(n,r).or(n).filter(Kr).map(f=>qM(f,r,a)))},L8=(e,n,o)=>{const r=$.from(n.firstChild).map(Y.fromDom),a=$.from(n.lastChild).map(Y.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(gi).filter(Kr).bind(iC),f=a.bind(dl).filter(Kr).bind(iC);oE(u,r,e,!0,o),oE(f,a,e,!1,o),e.collapse(!1)},I8=gj=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return Th({validate:!1},e.schema).serialize(u)}else return n.content},H8=(e,n,o={})=>{const r=I8(o,n);v3(e,r).each(a=>{const u=gj(e,a),f=e.selection.getRng();L8(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),C1(e,f),Gx(e,u,a)})},KM=(e,n,o)=>{if(Gt(e,n)){const r=Ct(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var YM=(e,n)=>{let o,r;const a=u=f=()=>{o={},r={},n.on("NodeChange",};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),a(b,u(n.selection.getStart())).each(,{unbind:)}};const V3=e=>!!(e&&e.ownerDocument)&&Oc(Y.fromDom(e.ownerDocument),Y.fromDom(e)),V8=e=>e?V3(e.startContainer)&&V3(e.endContainer):!1,Nh=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=YM(e,r),b=y=rt=>P8(r,rt),E=(rt,Nt)=>H8(r,rt,Nt),D=rt=>Z_(r.getBody(),ae(),rt),R=B=(rt,Nt)=>Hc.getBookmark(rt,Nt),W=rt=>Hc.moveToBookmark(rt),G=(rt,Nt)=>(L6(e,rt,Nt).each(be),rt),z=()=>{const rt=ae(),Nt=ie();return!rt||rt.item?!1:rt.compareEndPoints?rt.compareEndPoints("StartToEnd",rt)===0:!Nt||rt.collapsed},q=()=>{const rt=ae(),Nt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Nt.length>0?vs(Nt,xn=>e.isEditable(xn.parentElement)):rR(e,rt)},se=ie=ae=()=>{let rt;const Nt=xn=n.document;if(_e(r.bookmark)&&!Eh(r)){const Nn=V_(r);if(Nn.isSome())return Nn.map(.getOr(xn.createRange())}try{const Nn=ie();Nn&&!Fl(Nn.anchorNode)&&(Nn.rangeCount>0?rt=Nn.getRangeAt(0):rt=xn.createRange(),rt=G_(r,[rt])[0])}catch(Nn){}if(rt||(rt=xn.createRange()),pp(rt.startContainer)&&rt.collapsed){const Nn=e.getRoot();rt.setStart(Nn,0),rt.setEnd(Nn,0)}return a&&u&&(Nt(rt.START_TO_START,rt,a)===0&&Nt(rt.END_TO_END,rt,a)===0?rt=u:(a=null,u=null)),rt},be=(rt,Nt)=>{if(!V8(rt))return;const xn=ie();if(rt=r.dispatch("SetSelectionRange",{range:rt,forward:Nt}).range,xn){u=rt;try{xn.removeAllRanges(),xn.addRange(rt)}catch(kt){}Nt===!1&&xn.extend&&(xn.collapse(rt.endContainer,rt.endOffset),xn.extend(rt.startContainer,rt.startOffset)),a=xn.rangeCount>0?xn.getRangeAt(0):null}if(!rt.collapsed&&rt.startContainer===rt.endContainer&&(xn==null?void 0:xn.setBaseAndExtent)&&rt.endOffset-rt.startOffset<2&&rt.startContainer.hasChildNodes()){const kt=rt.startContainer.childNodes[rt.startOffset];kt&&kt.nodeName==="IMG"&&(xn.setBaseAndExtent(rt.startContainer,rt.startOffset,rt.endContainer,rt.endOffset),(xn.anchorNode!==rt.startContainer||xn.focusNode!==rt.endContainer)&&xn.setBaseAndExtent(kt,0,kt,1))}r.dispatch("AfterSetSelectionRange",{range:rt,forward:Nt})},He=Qe=()=>iR(r.getBody(),ae()),gt=(rt,Nt)=>F6(e,ae(),rt,Nt),ke=()=>{const rt=ie(),Nt=rt==null?void 0:rt.anchorNode,xn=rt==null?void 0:rt.focusNode;if(!rt||!Nt||!xn||Fl(Nt)||Fl(xn))return!0;const Nn=e.createRng(),kt=e.createRng();try{Nn.setStart(Nt,rt.anchorOffset),Nn.collapse(!0),kt.setStart(xn,rt.focusOffset),kt.collapse(!0)}catch(on){return!0}return Nn.compareBoundaryPoints(Nn.START_TO_START,kt)<=0},qs={dom:e,win:n,serializer:o,editor:r,expand:(rt={type:"word"})=>be(I(e).expand(ae(),rt)),collapse:se,setCursorLocation:b,getContent:y,setContent:E,getBookmark:B,moveToBookmark:W,select:G,isCollapsed:z,isEditable:q,isForward:ke,setNode:He,getNode:Qe,getSel:ie,setRng:be,getRng:ae,getStart:D,getEnd:R,getSelectedBlocks:gt,normalize:()=>{const rt=ae(),Nt=ie();if(!Kf(Nt)&&Cb(r)){const xn=x(e,rt);return xn.each(,xn.getOr(rt)}return rt},selectorChanged:selectorChangedWithUnbind:f,getScrollContainer:()=>{let rt,Nt=e.getRoot();for(;Nt&&Nt.nodeName!=="BODY";){if(Nt.scrollHeight>Nt.clientHeight){rt=Nt;break}Nt=Nt.parentNode}return rt},scrollIntoView:(rt,Nt)=>{_e(rt)?Lc(r,rt,Nt):C1(r,ae(),Nt)},placeCaretAt:getBoundingClientRect:destroy:,Hc=Yf(qs),So=GD(qs,r);return qs.bookmarkManager=Hc,qs.controlSelection=So,qs},sv=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",,e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const E=r[y];let D=E.attr(u);D!==void 0?(E.attr(a,D.length>0?D:null),E.attr(u,null)):(D=E.attr(a),a==="style"?D=o.serializeStyle(o.parseStyle(D),E.name):f&&(D=f.call(b,D,a,E.name)),E.attr(a,D.length>0?D:null))}}),e.addAttributeFilter("class",,e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&($.from(b.firstChild).exists(E=>{var D;return!Ka((D=E.value)!==null&&D!==void 0?D:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var a;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Tm.decode((a=f.value)!==null&&a!==void 0?a:""))}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],E=y.firstChild,D=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(a==="script"){const R=y.attr("type");R&&y.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&D.length>0&&(E.value=`// <![CDATA[
`+f(D)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&D.length>0&&(E.value=`<!--
`+f(D)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{le(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&o3(n,e,e.schema)},lC=e=>{const n=o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},XM=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Ke.each(u.nodeName==="BODY"?u.childNodes:[u],,u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return v2(e,{...o,node:u}),r&&(a.doc=r),u},JM=z8=(e,n,o)=>JM(e,o)?XM(e,n,o):n,QM=(e,n,o)=>{Ke.inArray(n,o)===-1&&(e.addAttributeFilter(o,,n.push(o))},U8=(e,n,o)=>!n.no_events&&e?S_(e,{...n,content:o}).content:o,W8=(e,n,o)=>{const r=bi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||_r(Y.fromDom(n))?r:Ke.trim(r)},Z8=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return lC(a),a},j8=eB=(e,n,o,r,a)=>{const u=j8(n,o,r);return U8(e,a,u)},G8=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:Zo.DOM,u=n&&n.schema?n.schema:Dd(r),f=td(r,u);sv(f,r,a);const b=(y,E={})=>{const D={format:"html",...E},R=z8(n,y,D),B=W8(a,R,D),W=Z8(f,B,D);return D.format==="tree"?W:eB(n,r,u,W,D)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ne(QM,f,o),getTempAttrs:ze(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},tB=uC="html",nB=oB=(e,n={})=>{const o=n.format?n.format:uC,r=nB(n,o);return Dh(e,r).fold(pn,a=>{const u=A8(e,a);return b3(e,u,a)})},q8="html",K8=(e,n)=>({format:q8,...e,set:!0,content:n}),z3=(e,n,o={})=>{const r=K8(o,n);return v3(e,r).map(a=>{const u=O8(e,a.content,a);return Gx(e,u.html,a),u.content}).getOr(n)},sB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Y8="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),X8="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),rB=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],cB=hj=e=>{const n=cB(e,sB),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Fo(n)},Xd=e=>cB(e,Y8),sE=J8=e=>sE(e,X8),Q8=e7=(e,n)=>{const o=hj(e),r=J8(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",E=a?`

Plugins:${b}${r.join(b)}`:"",D=u?`

Options:${b}${o.join(b)}`:""}},t7=e=>ao(rB,n=>n.name===e).fold(()=>e,,bo=(e,n)=>{const o=Xd(e),r=Q8(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(t7).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:""}},pj=(e,n)=>{e7(e,n),bo(e,n)},rE=Zo.DOM,n7=os=o7=dC=s7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&_e(a==null?void 0:a.nextSibling)&&rE.remove(a.nextSibling),vh(e),e.editorManager.remove(e),!e.inline&&r&&n7(e),yh(e),rE.remove(e.getContainer()),os(n),os(o),e.destroy()}},r7=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),os(o),os(r)),dC(e),o7(e),e.destroyed=!0}},mC=((),su=Zc.ModelManager,Oi=(e,n)=>n.dom[e],rv=(e,n)=>parseInt(cr(n,e),10),Mh=Ne(Oi,"clientWidth"),nf=Ne(Oi,"clientHeight"),fC=Ne(rv,"margin-top"),U3=Ne(rv,"margin-left"),W3=e=>e.dom.getBoundingClientRect(),aB=iB=(e,n,o,r)=>{const a=W3(n),u=e?a.left+n.dom.clientLeft+U3(n):0,f=e?a.top+n.dom.clientTop+fC(n):0,b=o-u,y=r-f;return{x:b,y}},c7=(e,n,o)=>{const r=Y.fromDom(e.getBody()),a=e.inline?r:Eu(r),u=iB(e.inline,a,n,o);return aB(a,u.x,u.y)},a7=e=>$.from(e).map(Y.fromDom),lB=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return a7(n).map(fm).getOr(!1)};var uB=const Z3=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():uB()},r=a=(B,W)=>B.type===W.type&&B.text===W.text&&!B.progressBar&&!B.timeout&&!W.progressBar&&!W.timeout,u=()=>{le(n,B=>{B.reposition()})},f=B=>{n.push(B)},b=y=(B,W=!0)=>e.removed||!lB(e)?{}:(W&&e.dispatch("BeforeOpenNotification",{notification:B}),ao(n,G=>a(o().getArgs(G),B)).getOrThunk(()=>{e.editorManager.setActive(e);const G=o().open(B,()=>{b(G),u(),sR(e)&&r().fold(()=>e.focus(),z=>Yw(Y.fromDom(z.getEl())))});return f(G),u(),e.dispatch("OpenNotification",{notification:{...G}}),G})),E=D=ze(n);return((e),{open:y,close:E,getNotifications:D}},M1=Zc.PluginManager,ig=Zc.ThemeManager;var vj=const dB=e=>{let n=[];const o=()=>{const z=e.theme;return z&&z.getWindowManagerImpl?z.getWindowManagerImpl():vj()},r=a=z=>{e.dispatch("OpenWindow",{dialog:z})},u=f=z=>{n.push(z),a(z)},b=z=>{u(z),n=Ct(n,q=>q!==z),n.length===0&&e.focus()},y=E=z=>{e.editorManager.setActive(e),$b(e),e.ui.show();const q=z();return f(q),q},D=R=B=(z,q,se)=>{const ie=o();ie.alert(z,r(se||ie,q))},W=G=()=>{y().each(};return e.on("remove",,{open:D,openUrl:R,alert:B,confirm:W,close:G}},i7=cE=l7=_l=(e,n,o)=>{si(e,n,{message:o})},aE=yj=(e,n,o)=>{_l(e,"PluginLoadError",aE("plugin",n,o))},u7=(e,n,o)=>{_l(e,"IconsLoadError",aE("icons",n,o))},gC=(e,n,o)=>{_l(e,"LanguageLoadError",aE("language",n,o))},d7=(e,n,o)=>{_l(e,"ThemeLoadError",aE("theme",n,o))},mB=fB=hC=m7=e=>/^[a-z0-9\-]+$/i.test(e),j3=e=>"content/"+e+"/content.css",Bh=e=>tinymce.Resource.has(j3(e)),f7=e=>gB(e,$y(e)),g7=e=>gB(e,QS(e)),gB=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return De(n,u=>Bh(u)?u:m7(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},h7=e=>{e.contentCSS=e.contentCSS.concat(f7(e),g7(e))},p7=b7=(e,n)=>{const o={};return{findAll:(a,u=We)=>{const f=Ct(p7(a),y=>{const E=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!E||E===ht.transparentSrc?!1:is(E,"blob:")?!e.isUploaded(E)&&u(y):is(E,"data:")?u(y):!1}),b=De(f,y=>{const E=y.src;if(Gt(o,E))return o[E].then(;{const D=RI(n,E).then(.catch(;return o[E]=D,D}});return Promise.all(b)}}},hB=()=>{let o={};const r=(B,W)=>({status:B,resultUri:W}),a=B=>B in o;return{hasBlobUri:a,getResultUri:isPending:B=>a(B)?o[B].status===1:!1,isUploaded:B=>a(B)?o[B].status===2:!1,markPending:markUploaded:removeFailed:B=>{delete o[B]},destroy:};let v7=0;const y7=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},iE=e=>e+v7+++y7(),C7=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=R.id||iE("blobid"),W=R.name||B,G=R.blob;return{id:ze(B),name:ze(W),filename:ze(R.filename||W+"."+n(G.type)),blob:ze(G),base64:ze(R.base64),blobUri:ze(R.blobUri||URL.createObjectURL(G)),uri:ze(R.uri)}},a=u=R=>ao(e,R).getOrUndefined(),f=R=>u(B=>B.id()===R);return{create:o,add:a,get:f,getByUri:getByData:findFirst:u,removeByUri:R=>{e=Ct(e,B=>B.blobUri()===R?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:},S7=(e,n)=>{const o={},r=(z,q)=>z?z.replace(/\/$/,"")+"/"+q.replace(/^\//,""):q,a=(z,q)=>new Promise((se,ie)=>{const ae=new XMLHttpRequest;ae.open("POST",n.url),ae.withCredentials=n.credentials,ae.upload.onprogress=ae.onerror=ae.onload=()=>{if(ae.status<200||ae.status>=300){ie("HTTP Error: "+ae.status);return}const He=JSON.parse(ae.responseText);if(!He||!j(He.location)){ie("Invalid JSON: "+ae.responseText);return}se(r(n.basePath,He.location))};const be=new FormData;be.append("file",z.blob(),z.filename()),ae.send(be)}),u=te(n.handler)?n.handler:a,f=()=>new Promise(,b=y=E=D=R=z=>z===a,B=W=(z,q)=>(z=Ke.grep(z,,Promise.all(Ke.map(z,se=>e.isPending(se.blobUri())?B(se):D(se,u,q))));return{upload:(z,q)=>!n.url&&R(u)?f():W(z,q)}},w7=cv=x7=G3=(e,n)=>e.dom.isEmpty(n.dom)&&_e(e.schema.getTextBlockElements()[Bn(n)]),E7=e=>n=>{G3(e,n)&&Qs(n,Y.fromHtml('<br data-mce-bogus="1" />'))},T7=e=>{const n=C7();let o,r;const a=hB(),u=[],f=b=ae=>ae+(ae.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(ae,be,He)=>{let Qe=0;do Qe=ae.indexOf(be,Qe),Qe!==-1&&(ae=ae.substring(0,Qe)+He+ae.substr(Qe+be.length),Qe+=He.length-be.length+1);while(Qe!==-1);return ae},E=(ae,be,He)=>{const Qe=`src="${He}"${He===ht.transparentSrc?' data-mce-placeholder="1"':""}`;return ae=y(ae,`src="${be}"`,Qe),ae=y(ae,'data-mce-src="'+be+'"','data-mce-src="'+He+'"'),ae},D=(ae,be)=>{le(e.undoManager.data,He=>{He.type==="fragmented"?He.fragments=De(He.fragments,Qe=>E(Qe,ae,be)):He.content=E(He.content,ae,be)})},R=(ae,be)=>{const He=e.convertURL(be,"src");D(ae.src,be),ji(Y.fromDom(ae),{src:Vp(e)?b(be):be,"data-mce-src":He})},B=()=>(o||(o=cv(e,a)),q().then(f(ae=>{const be=De(ae,He=>He.blobInfo);return o.upload(be,w7(e)).then(f(He=>{const Qe=[];let gt=!1;const ke=De(He,(we,Ie)=>{const{blobInfo:xt,image:$t}=ae[Ie];let Tn=!1;return we.status&&JS(e)?(we.url&&!Js($t.src,we.url)&&(gt=!0),n.removeByUri($t.src),ag(e)||R($t,we.url)):we.error&&(we.error.remove&&(D($t.src,ht.transparentSrc),Qe.push($t),Tn=!0),l7(e,we.error.message)),{element:$t,status:we.status,uploadUri:we.url,blobInfo:xt,removed:Tn}});return Qe.length>0&&!ag(e)?e.undoManager.transact(()=>{le(wf(Qe),we=>{const Ie=Yr(we);uo(we),Ie.each(E7(e)),n.removeByUri(we.dom.src)})}):gt&&e.undoManager.dispatchChange(),ke}))}))),W=G=ae=>vs(u,be=>be(ae)),z=ae=>{u.push(ae)},q=()=>(r||(r=b7(a,n)),r.findAll(e.getBody(),G).then(f(ae=>{const be=Ct(ae,He=>j(He)?(cE(e,He),!1):He.uriType!=="blob");return ag(e)||le(be,,be}))),se=ie=return e.on("SetContent",,e.on("RawSaveContent",,e.on("GetContent",ae=>{ae.source_view||ae.format==="raw"||ae.format==="tree"||(ae.content=ie(ae.content))}),e.on("PostRender",,{blobCache:n,addFilter:z,uploadImages:B,uploadImagesAuto:W,scanForImages:q,destroy:se}},k7=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:onformat:,lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ke.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),,r},pB={remove_similar:!0,inherit:!1},nd={selector:"td,th",...pB},B1={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...nd},tablecellverticalalign:{styles:{"vertical-align":"%value"},...nd},tablecellbordercolor:{styles:{borderColor:"%value"},...nd},tablecellclass:{classes:["%value"],...nd},tableclass:{selector:"table",classes:["%value"],...pB},tablecellborderstyle:{styles:{borderStyle:"%value"},...nd},tablecellborderwidth:{styles:{borderWidth:"%value"},...nd}},lE=ze(B1),uE=e=>{const n={},o=r=f=>Gt(n,f),a=u=return a(k7(e)),a(lE()),a(Fk(e)),{get:o,has:r,register:a,unregister:u}},of=Ke.each,ga=Zo.DOM,av=e=>_e(e)&&Ve(e),pC=(e,n)=>{const o=n&&n.schema||Dd({}),r=a=y=>{const E=j(y)?{name:y,classes:[],attrs:{}}:y,D=ga.create(E.name);return r(D,E),D},u=(y,E)=>{const D=o.getElementRule(y.nodeName.toLowerCase()),R=D==null?void 0:D.parentsRequired;return R&&R.length?E&&Re(R,E)?E:R[0]:!1},f=(y,E,D)=>{let R;const B=E[0],W=av(B)?B.name:void 0,G=u(y,W);if(G)W===G?(R=B,E=E.slice(1)):R=G;else if(B)R=B,E=E.slice(1);else if(!D)return y;const z=R?a(R):ga.create("div");z.appendChild(y),D&&Ke.each(D,;const q=av(R)?R.siblings:void 0;return f(z,E,q)},b=ga.create("div");if(e.length>0){const y=e[0],E=a(y),D=av(y)?y.siblings:void 0;b.appendChild(f(E,e.slice(1),D))}return b},bB=e=>{e=Ke.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Ke.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},q3=e=>j(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ke.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),.reverse()):[],K3=(e,n)=>{let o="",r=nw(e);if(r==="")return"";const a=u=(B,W)=>ga.getStyle(W!=null?W:e.getBody(),B,!0);if(j(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let f=n.block||n.inline||"span",b;const y=q3(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=pC(y,e)):b=pC([f],e);const E=ga.select(f,b)[0]||b.firstChild;of(n.styles,(B,W)=>{const G=a(B);G&&ga.setStyle(E,W,G)}),of(n.attributes,,of(n.classes,,e.dispatch("PreviewFormats"),ga.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const D=u("fontSize"),R=/px$/.test(D)?parseInt(D,10):0;return of(r.split(" "),B=>{let W=u(B,E);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(W)&&(W=u(B),Ng(W).toLowerCase()==="#ffffff"))&&!(B==="color"&&Ng(W).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(W)){if(R===0)return;W=parseFloat(W)/(/%$/.test(W)?100:1)*R+"px"}B==="border"&&W&&(o+="padding:0 2px;"),o+=B+":"+W+";"}}),e.dispatch("AfterPreviewFormats"),ga.remove(b),o},vB=Y3=e=>{const n=uE(e),o=Ss({});return vB(e),aI(e),ag(e)||yI(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{T8(e,r,a,u)},remove:(r,a,u,f)=>{k8(e,r,a,u,f)},toggle:match:(r,a,u,f)=>ZM(e,r,a,u,f),closest:r=>I3(e,r),matchAll:(r,a)=>jM(e,r,a),matchNode:(r,a,u,f)=>L3(e,r,a,u,f),canApply:r=>GM(e,r),formatChanged:getCssText:Ne(K3,e)}},P1=yB=(e,n,o)=>{const r=Ss(!1),a=e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",,e.on("ExecCommand",,e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;const D=ht.os.isMacOS()&&y.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||y.ctrlKey||D)&&(a(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!B3(eE(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&a(y);return}const D=y.ctrlKey&&!y.altKey||y.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!D){n.beforeChange(),tE(n,!0,o),n.add({},y),r.set(!0);return}(ht.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",;const u=y=>y.inputType==="insertReplacementText",f=b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&a(y)}),e.on("AddUndo Undo Redo ClearUndos",},CB=X3=e=>{const n=Am(),o=Ss(0),r=Ss(0),a={data:[],typing:!1,beforeChange:()=>{fj(e,o,n)},add:dispatchChange:undo:()=>zM(e,a,o,r),redo:clear:()=>{WM(e,a,r)},reset:()=>{S8(e,a)},hasUndo:()=>w8(e,a,r),hasRedo:()=>nE(e,a,r),transact:u=>x8(e,a,o,u),ignore:u=>{F3(e,o,u)},extra:;return ag(e)||yB(e,a,o),CB(e),a},dE=[9,27,yt.HOME,yt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,yt.DOWN,yt.UP,yt.LEFT,yt.RIGHT].concat(ht.browser.isFirefox()?[224]:[]),J3="data-mce-placeholder",Q3=e=>e.type==="keydown"||e.type==="keyup",eA=SB=e=>{if(Q3(e)){const n=e.keyCode;return!eA(e)&&(yt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Re(dE,n))}else return!1},lg=e=>Q3(e)&&!(eA(e)||e.type==="keyup"&&e.keyCode===229),Ph=(e,n,o)=>{if(Os(Y.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},od=e=>{var n;const o=e.dom,r=Gc(e),a=(n=ID(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(SB(f))return;const y=e.getBody(),E=lg(f)?!1:Ph(o,y,r);(o.getAttrib(y,J3)!==""!==E||b)&&(o.setAttrib(y,J3,E?a:null),o.setAttrib(y,"aria-placeholder",E?a:null),x_(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};ro(a)&&e.on("init",},_7=(e,n)=>({block:e,position:n}),A7=(e,n)=>({from:e,to:n}),tA=(e,n)=>{const o=Y.fromDom(e),r=Y.fromDom(n.container());return F2(o,r).map(a=>_7(a,n))},O7=wB=D7=(e,n)=>{const o=Y.fromDom(e);return Qn(wB(o,n.from.block),wB(o,n.to.block))},R7=e=>zn(e.from.block.dom)===!1&&zn(e.to.block.dom)===!1,N7=M7=B7=(e,n,o)=>{const r=tA(e,Ce.fromRangeStart(o)),a=r.bind(u=>oc(n,e,u.position).bind(f=>tA(e,f).map(b=>M7(e,n,b))));return dr(r,a,A7).filter(u=>O7(u)&&D7(e,u)&&R7(u)&&N7(u))},P7=(e,n,o)=>o.collapsed?B7(e,n,o):$.none(),$7=(e,n)=>{const o=rr(e);return ks(o,r=>n.isBlock(Bn(r))).fold(ze(o),r=>o.slice(0,r))},mE=(e,n)=>{const o=$7(e,n);return le(o,uo),o},fE=xB=e=>Ct(ap(e),n=>!Os(n)).length===0,F7=(e,n,o,r,a)=>{if(Os(o))return Nu(o),ma(o.dom);xB(a)&&Os(n)&&mr(a,Y.fromTag("br"));const u=Oa(o.dom,Ce.before(a.dom));return le(mE(n,r),f=>{mr(a,f)}),fE(e,n),u},L7=(e,n)=>e.isInline(Bn(n)),EB=(e,n,o,r)=>{if(Os(o)){if(Os(n)){const f=Ms((b=>{const y=(E,D)=>dm(E).fold(()=>D,R=>L7(r,R)?y(R,D.concat(ti(R))):D);return y(b,[])})(o),(b,y)=>(mp(b,y),y),Ea());yd(n),Qs(n,f)}return uo(o),ma(n.dom)}const a=Cl(o.dom);return le(mE(n,r),u=>{Qs(o,u)}),fE(e,n),a},TB=nA=(e,n)=>Oc(n,e)?TB(n,e):$.none(),oA=(e,n)=>{dh(e,n.dom).bind(o=>$.from(o.getNode())).map(Y.fromDom).filter(ym).each(uo)},sA=(e,n,o,r)=>(oA(!0,n),oA(!1,o),nA(n,o).fold(Ne(EB,e,n,o,r),Ne(F7,e,n,o,r))),gE=(e,n,o,r,a)=>n?sA(e,r,o,a):sA(e,o,r,a),rA=(e,n)=>{const o=Y.fromDom(e.getBody());return P7(o.dom,n,e.selection.getRng()).map(a=>()=>{gE(o,n,a.from.block,a.to.block,e.schema).each(})},I7=(e,n,o)=>{const r=n.getRng();return dr(F2(e,Y.fromDom(r.startContainer)),F2(e,Y.fromDom(r.endContainer)),(a,u)=>Qn(a,u)?$.none():$.some(()=>{r.deleteContents(),gE(e,!0,a,u,o).each(})).getOr($.none())},Jd=(e,n)=>{const o=Y.fromDom(n),r=Ne(Qn,e);return ys(o,qa,r).isSome()},sd=hE=(e,n)=>{const o=Oa(e.dom,Ce.fromRangeStart(n)).isNone(),r=Kc(e.dom,Ce.fromRangeEnd(n)).isNone();return!sd(e,n)&&o&&r},kB=pE=e=>{const n=Y.fromDom(e.getBody()),o=e.selection.getRng();return hE(n,o)?kB(e):I7(n,e.selection,e.schema)},bE=sf=_B=iv=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?$.none():$.some(_B(n)),AB=vE=(e,n,o)=>n.collapsed?AB(e,n,o).getOr(n):n,yE=e=>tg(e)||R2(e),cA=e=>Gd(e)||Fb(e),H7=(e,n)=>{Ge(n)&&n.data.length===0&&e.remove(n)},OB=(e,n,o,r,a,u)=>{sf(r,e,u.getNode(!a),a,!0).each(,H7(e.dom,o)},V7=(e,n)=>{const o=e.selection.getRng();if(!Ge(o.commonAncestorContainer))return $.none();const r=n?js.Forwards:js.Backwards,a=Kl(e.getBody()),u=Ne(ww,n?a.next:a.prev),f=n?yE:cA,b=Im(r,e.getBody(),o),y=u(b),E=y&&Wn(n,y);if(!E||!n2(b,E))return $.none();if(f(E))return $.some(()=>OB(e,o,b.getNode(),r,n,E));const D=u(E);return D&&f(D)&&n2(E,D)?$.some(:$.none()},aA=(e,n)=>V7(e,n),CE=iA=z7=e=>_e(e)&&(qa(Y.fromDom(e))||Du(Y.fromDom(e))),Di=Gl.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),U7=W7=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!ql(o,r,e);return Sw(!n,o).fold(u)},DB=(e,n,o,r)=>{const a=r.getNode(!n);return F2(Y.fromDom(e),Y.fromDom(o.getNode())).map(.orThunk(},RB=(e,n,o,r)=>oc(n,e,o).bind(a=>z7(a.getNode())||W7(e,n,o,a,r)?$.none():n&&zn(a.getNode())||!n&&zn(a.getNode(!0))?DB(e,n,o,a):n&&Gd(o)||!n&&tg(o)?$.some(Di.moveToPosition(a)):$.none()),Z7=j7=G7=(e,n,o,r)=>U7(n,o)?Z7(n,o.getNode(!n)).orThunk(()=>RB(e,n,o,r)):RB(e,n,o,r).bind(a=>j7(e,o,a)),SE=(e,n,o,r)=>{const a=t2(n?1:-1,e,o),u=Ce.fromRangeStart(a),f=Y.fromDom(e);return!n&&Gd(u)?$.some(Di.remove(u.getNode(!0))):n&&tg(u)?$.some(Di.remove(u.getNode())):!n&&tg(u)&&M2(f,u,r)?gL(f,u,r).map(b=>Di.remove(b.getNode())):n&&Gd(u)&&N2(f,u,r)?hL(f,u,r).map(b=>Di.remove(b.getNode())):G7(e,n,u,r)},lA=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),og(e,n,Y.fromDom(o)),!0),q7=K7=NB=Y7=(e,n)=>{const o=e.selection.getNode();return NB(e,o).filter(zn).fold(()=>SE(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(lA(e,n),q7(e,n),K7(e))),()=>$.some(Oe))},MB=e=>{le(Jr(e,".mce-offscreen-selection"),uo)},X7=(e,n)=>{const o=e.selection.getNode();return zn(o)&&!bp(o)?NB(e,o.parentNode).filter(zn).fold(()=>$.some(()=>{MB(Y.fromDom(e.getBody())),og(e,n,Y.fromDom(e.selection.getNode())),gx(e)}),()=>$.some(Oe)):iA(e)?$.some(()=>{L2(e,e.selection.getRng(),Y.fromDom(e.getBody()))}):$.none()},BB=bC=(e,n)=>e.selection.isCollapsed()?Y7(e,n):X7(e,n),J7=uA=(e,n)=>e.selection.isCollapsed()?J7(e,n):$.none(),lv=Ge,PB=$B=FB=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ec)},Q7=e=>{var n;if(lv(e.previousSibling))return $B(e.previousSibling)||e.previousSibling.appendData(ec),e.previousSibling;if(lv(e))return PB(e)||e.insertData(0,ec),e;{const o=FB(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},wE=e=>{var n,o;if(lv(e.nextSibling))return PB(e.nextSibling)||e.nextSibling.insertData(0,ec),e.nextSibling;if(lv(e))return $B(e)||e.appendData(ec),e;{const r=FB(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},$1=eH=Ne($1,!0),tH=Ne($1,!1),vC=LB=dA=(e,n)=>n.fold(o=>ma(o).map(r=>{if(LB(r,e)){const a=e.get();return Ce(a,1)}else{Nr(e.get());const a=vC(r,!0);return e.set(a),Ce(a,1)}}),o=>Cl(o).map(r=>{if(LB(r,e)){const a=e.get();return Ce(a,a.length-1)}else{Nr(e.get());const a=vC(r,!1);return e.set(a),Ce(a,a.length-1)}}),,IB=ci=Gl.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),HB=(e,n)=>{const o=$d(n,e);return o||e},nH=(e,n,o)=>{const r=k1(o),a=HB(n,r.container());return Yu(e,a,r).fold(()=>Kc(a,r).bind(Ne(Yu,e,a)).map(u=>ci.before(u)),$.none)},oH=(e,n)=>Gf(e,n)===null,VB=sH=(e,n,o)=>{const r=P2(o);return VB(e,n,r).bind(a=>Oa(a,r).isNone()?$.some(ci.start(a)):$.none())},rH=cH=aH=Ic=yC=mA=CC=e=>e.fold(ci.before,ci.before,ci.after,ci.after),fA=zB=(e,n)=>mA(e)===mA(n)&&yC(e)===yC(n),iH=(e,n,o,r,a,u)=>dr(Yu(n,o,r),Yu(n,o,a),(f,b)=>f!==b&&Xu(o,f,b)?ci.after(e?f:b):u).getOr(u),UB=(e,n)=>e.fold(We,o=>!zB(o,n)),lH=uH=dH=(e,n,o,r)=>{const a=Wn(e,r),u=Ic(n,o,a);return Ic(n,o,a).bind(Ne(uH,e)).orThunk(()=>lH(e,n,o,u,r))},uv=gA=WB=(e,n)=>{const o=n.selection.getRng(),r=e?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return uv(n)?e&&Mu(r)?gA(!0,n.selection,r):!e&&S0(r)?gA(!1,n.selection,r):!1:!1};var Qd;((Qd||(Qd={}));const dv=mH=fH=(e,n,o,r)=>Ro(r.getNode(n===js.Forwards))?Qd.Br:ql(o,r)===!1?Qd.Block:Qd.Wrap,ZB=(e,n,o,r)=>{const a=Kl(o);let u=r;const f=[];for(;u;){const b=mH(n,a,u);if(!b)break;if(Ro(b.getNode(!1)))return n===js.Forwards?{positions:dv(n,f).concat([b]),breakType:Qd.Br,breakAt:$.some(b)}:{positions:dv(n,f),breakType:Qd.Br,breakAt:$.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=fH(o,n,u,b);return{positions:dv(n,f),breakType:y,breakAt:$.some(b)}}f.push(b),u=b}return{positions:dv(n,f),breakType:Qd.Eol,breakAt:$.none()}},gH=jB=hA=Ri=Ne(ZB,Ce.isAbove,-1),SC=Ne(ZB,Ce.isBelow,1),GB=Ne(gH,-1,Ri),$h=Ne(gH,1,SC),pA=(e,n)=>Ri(e,n).breakAt.isNone(),qB=xE=e=>ma(e).map(.getOr([]),hH=e=>Cl(e).map(.getOr([]),pH=(e,n)=>hA(GB(e,n),n),bH=vH=zn,KB=(e,n)=>Math.abs(e.left-n),YB=ug=e=>Zr(e,"node"),XB=(e,n)=>lc(e,(o,r)=>{const a=Math.min(KB(o,n),YB(o,n)),u=Math.min(KB(r,n),YB(r,n));return u===a&&ug(r)&&vH(r.node)||u<a?r:o}),yH=e=>{const n=if(Et(e))return n(e.getClientRects());if(Ge(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},JB=e=>Wr(e,yH);var wC;((wC||(wC={}));const CH=EE=(e,n,o,r,a,u)=>{let f=0;const b=[],y=R=>{let B=JB([R]);e===-1&&(B=B.reverse());for(let W=0;W<B.length;W++){const G=B[W];if(!o(G,E)){if(b.length>0&&n(G,xc(b))&&f++,G.line=f,a(G))return!0;b.push(G)}}return!1},E=xc(u.getClientRects());if(!E)return b;const D=u.getNode();return D&&(y(D),CH(e,r,y,D)),b},bA=(e,n)=>n.line>e,vA=QB=Ne(EE,wC.Up,Dm,zf),e5=Ne(EE,wC.Down,zf,Dm),yA=SH=(e,n,o,r)=>{const a=Kl(n);let u,f,b,y;const E=[];let D=0;e===1?(u=a.next,f=zf,b=Dm,y=Ce.after(r)):(u=a.prev,f=Dm,b=zf,y=Ce.before(r));const R=yA(y);do{if(!y.isVisible())continue;const B=yA(y);if(b(B,R))continue;E.length>0&&f(B,xc(E))&&D++;const W=Hf(B);if(W.position=y,W.line=D,o(W))return E;E.push(W)}while(y=u(y));return E},mv=e=>n=>bA(e,n),fv=e=>n=>vA(e,n),rf=TE=(e,n,o)=>$.some(vE(e,n,o)),CA=(e,n,o,r,a,u)=>{const f=n===js.Forwards,b=Kl(e.getBody()),y=Ne(ww,f?b.next:b.prev),E=f?r:a;if(!o.collapsed){const G=my(o);if(u(G))return sf(n,e,G,n===js.Backwards,!1);if(iA(e)){const z=o.cloneRange();return z.collapse(n===js.Backwards),$.from(z)}}const D=Im(n,e.getBody(),o);if(E(D))return iv(e,D.getNode(!f));let R=y(D);const B=bS(o);if(R)R=Wn(f,R);else return B?$.some(o):$.none();if(E(R))return sf(n,e,R.getNode(!f),f,!1);const W=y(R);return W&&E(W)&&n2(R,W)?sf(n,e,W.getNode(!f),f,!1):B?TE(e,R.toRange(),!1):$.none()},SA=(e,n,o,r,a,u)=>{const f=Im(n,e.getBody(),o),b=xc(f.getClientRects()),y=n===wC.Down,E=e.getBody();if(!b)return $.none();if(iA(e)){const q=y?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return(y?bH:pH)(E,q).orThunk(()=>$.from(q)).map(ie=>ie.toRange())}const R=(y?e5:QB)(E,mv(1),f),B=Ct(R,fv(1)),W=b.left,G=XB(B,W);if(G&&u(G.node)){const q=Math.abs(W-G.left),se=Math.abs(W-G.right);return sf(n,e,G.node,q<se,!1)}let z;if(r(f)?z=f.getNode():a(f)?z=f.getNode(!0):z=my(o),z){const q=SH(n,E,mv(1),z);let se=XB(Ct(q,fv(1)),W);if(se||(se=xc(Ct(q,fv(0))),se))return TE(e,se.position.toRange(),!1)}return B.length===0?gv(e,y).filter(y?a:r).map(:$.none()},gv=(e,n)=>{const o=e.selection.getRng(),r=n?Ce.fromRangeEnd(o):Ce.fromRangeStart(o),a=Qy(r.container(),e.getBody());if(n){const u=SC(a,r);return zc(u.positions)}else{const u=Ri(a,r);return Bs(u.positions)}},kE=Fh=t5=wA=wH=xH=(e,n,o)=>{const r=e.getBody(),a=wH(e.selection.getRng(),r,o),u=Ne(T1,e);return dH(o,u,r,a).bind(b=>wA(e,n,b))},n5=(e,n,o)=>{const r=De(Jr(Y.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Ct(r,e),u=Ct(o,e);le(Ol(a,u),Ne(t5,!1)),le(Ol(u,a),Ne(t5,!0))},EH=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ce.fromRangeStart(e.selection.getRng());Ce.isTextPosition(r)&&!BL(r)&&(Fh(e,pw(o,r)),n.set(null))}},o5=TH=(e,n,o)=>Wf(e)?xH(e,n,o).isSome():!1,s5=(e,n,o)=>Wf(n)?WB(e,n):!1,kH=e=>{const n=Ss(null),o=Ne(T1,e);return e.on("NodeChange",r=>{Wf(e)&&(n5(o,e.dom,r.parents),EH(e,n),o5(o,e,n,r.parents))}),n},_H=Ne(s5,!0),AH=Ne(s5,!1),_E=(e,n,o)=>{if(Wf(e)){const r=gv(e,n).getOrThunk(;return Ic(Ne(T1,e),e.getBody(),r).exists(}else return!1},OH=DH=r5=xA=(e,n,o,r)=>{const a=e.getBody(),u=Ne(T1,e);e.undoManager.ignore(()=>{e.selection.setRng(OH(o,r)),$2(e),Ic(u,a,Ce.fromRangeStart(e.selection.getRng())).map(fA).bind(r5(e,n)).each(It)}),e.nodeChanged()},RH=(e,n)=>{const o=$d(n,e);return o||e},F1=(e,n,o,r)=>{const a=RH(e.getBody(),r.container()),u=Ne(T1,e),f=Ic(u,a,r);return f.bind(.map(r5(e,n)).getOrThunk(()=>{const y=Ld(o,a,r),E=y.bind(D=>Ic(u,a,D));return dr(f,E,()=>Yu(u,a,r).bind(D=>DH(D)?$.some(()=>{og(e,o,Y.fromDom(D))}):$.none())).getOrThunk(})},AE=(e,n,o)=>{if(e.selection.isCollapsed()&&Wf(e)){const r=Ce.fromRangeStart(e.selection.getRng());return F1(e,n,o,r)}return $.none()},EA=TA=(e,n)=>{const o=Y.fromDom(e.getBody()),r=Y.fromDom(e.selection.getStart()),a=Gm(r,o);return ks(a,n).fold(ze(a),},kA=e=>Rc(e)===1,Lh=e=>TA(e,n=>e.schema.isBlock(Bn(n))||EA(n)),c5=e=>TA(e,n=>e.schema.isBlock(Bn(n))),Al=Ih=e=>{const n=c5(e);return Al(e,n)},_A=(e,n,o,r)=>{const a=Al(n,r);if(a.length===0)og(n,e,o);else{const u=AN(o.dom,a);n.selection.setRng(u.toRange())}},NH=(e,n)=>{const o=Ct(Lh(e),kA);return zc(o).bind(r=>{const a=Ce.fromRangeStart(e.selection.getRng());return hx(n,a,r.dom)&&!l1(r)?$.some(()=>_A(n,e,r,o)):$.none()})},a5=MH=e=>l1(Y.fromDom(e)),i5=(e,n)=>{const o=e.selection.getStart(),r=a5(e,o)||MH(o)?AN(o,n):Mx(e.selection.getRng(),n);e.selection.setRng(r.toRange())},BH=l5=e=>Ge(e.startContainer),PH=e=>e.startOffset===0&&l5(e),u5=(e,n)=>{const o=n.startContainer.parentElement;return!re(o)&&Ym(e,Y.fromDom(o))},$H=FH=hv=e=>$H(e)&&FH(e),AA=d5=e=>hv(e)||AA(e),m5=e=>{const n=e.selection.getRng();return PH(n)&&u5(e,n)&&d5(n)},OA=e=>{if(m5(e)){const n=Ih(e);return $.some(}else return $.none()},DA=(e,n)=>e.selection.isCollapsed()?NH(e,n):OA(e),LH=(e,n)=>FL(e,o=>xi(o.dom),o=>n.isBlock(Bn(o))),IH=e=>LH(Y.fromDom(e.selection.getStart()),e.schema),HH=e=>{const n=e.selection.getRng();return n.collapsed&&(l5(n)||e.dom.isEmpty(n.startContainer))&&!IH(e)},xC=e=>(HH(e)&&i5(e,[]),!0),RA=(e,n,o)=>_e(o)?$.some(()=>{e._selectionOverrides.hideFakeCaret(),og(e,n,Y.fromDom(o))}):$.none(),VH=f5=NA=(e,n)=>e.selection.isCollapsed()?VH(e,n):f5(e,n),zH=e=>Ca(e,.exists(n=>la(n.dom)),Ni=e=>Va(e!=null?e:"").getOr(0),g5=(e,n)=>{const o=e||xa(n)?"margin":"padding",r=cr(n,"direction")==="rtl"?"-right":"-left";return o+r},MA=(e,n,o,r,a,u)=>{const f=g5(o,Y.fromDom(u)),b=Ni(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+a:"")}else{const y=b+r+a;e.setStyle(u,f,y)}},h5=(e,n)=>vs(n,o=>{const r=g5(tb(e),o),a=ar(o,r).map(Ni).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),OE=e=>{const n=b5(e);return!e.mode.isReadOnly()&&(n.length>1||h5(e,n))},p5=e=>Ga(e)||Du(e),UH=e=>Yr(e).exists(p5),b5=e=>Ct(wf(e.selection.getSelectedBlocks()),,v5=(e,n)=>{var o,r;const{dom:a}=e,u=Py(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=Ni(u),y=tb(e);le(b5(e),E=>{MA(a,n,y,b,f,E.dom)})},WH=e=>v5(e,"indent"),BA=e=>v5(e,"outdent"),y5=e=>{if(e.selection.isCollapsed()&&OE(e)){const n=e.dom,o=e.selection.getRng(),r=Ce.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&Q_(Y.fromDom(a),r,e.schema))return $.some(()=>BA(e))}return $.none()},C5=EC=(e,n)=>{C5(e,n,!1).fold(()=>{e.selection.isEditable()&&($2(e),gx(e))},It)},dg=(e,n)=>{C5(e,n,!0).fold(()=>{e.selection.isEditable()&&PL(e)},It)},L1=(e,n)=>{e.addCommand("delete",()=>{EC(e,n)}),e.addCommand("forwardDelete",()=>{dg(e,n)})},TC=5,PA=400,DE=e=>e.touches===void 0||e.touches.length!==1?$.none():$.some(e.touches[0]),S5=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>TC||r>TC},ZH=e=>{const n=Am(),o=Ss(!1),r=V0(PA);e.on("touchstart",!0),e.on("touchmove",a=>{r.cancel(),DE(a).each(u=>{n.on(f=>{S5(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(.each(},!0)},RE=(e,n)=>Gt(e,n.nodeName),w5=(e,n)=>Ge(n)?!0:Et(n)?!RE(e.getBlockElements(),n)&&!Ei(n)&&!Fn(e,n)&&!Gv(n):!1,jH=(e,n,o)=>st(X_(Y.fromDom(o),Y.fromDom(n)),r=>RE(e,r.dom)),GH=(e,n)=>{if(Ge(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||RE(e,n.nextSibling)||Gv(n.nextSibling)}return!1},x5=qH=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,E=!1;const D=Gc(e);if(!u||!Et(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,D.toLowerCase())||jH(a,f,u))return;const B=o.getRng(),{startContainer:W,startOffset:G,endContainer:z,endOffset:q}=B,se=Eh(e);let ie=f.firstChild;for(;ie;)if(Et(ie)&&k0(r,ie),w5(r,ie)){if(GH(a,ie)){y=ie,ie=ie.nextSibling,n.remove(y);continue}b||(b=x5(e),f.insertBefore(b,ie),E=!0),y=ie,ie=ie.nextSibling,b.appendChild(y)}else b=null,ie=ie.nextSibling;E&&se&&(B.setStart(W,G),B.setEnd(z,q),o.setRng(B),e.nodeChanged())},E5=(e,n,o)=>{const r=Y.fromDom(x5(e)),a=Ea();Qs(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},KH=e=>{e.on("NodeChange",Ne(qH,e))},$A=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,T5=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},Cj=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],T5(e,a,Wy(e)));o.content=a}},Sj=e=>{const n="contenteditable",o=" "+Ke.trim(dw(e))+" ",r=" "+Ke.trim(Wy(e))+" ",a=$A(o),u=$A(r),f=Kk(e);f.length>0&&e.on("BeforeSetContent",b=>{Cj(e,f,b)}),e.parser.addAttributeFilter("class",,e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const E=b[y];!a(E)&&!u(E)||(f.length>0&&E.attr("data-mce-content")?(E.name="#text",E.type=3,E.raw=!0,E.value=E.attr("data-mce-content")):E.attr(n,null))}})},wj=e=>Sa(Y.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),k5=xj=(e,n)=>{const o=wj(e);if(!!o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),k5(e,o);return}zv(o)&&(k5(e,o),e.undoManager.add())}},Ej=_5=zn,YH=Tj=XH=Mi=(e,n,o)=>{const r=Kl(e.getBody()),a=Ne(ww,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(Ce.fromRangeStart(o))){const b=Y.fromDom(XH(e));n===1?Yi(Y.fromDom(u),b):mr(Y.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},A5=(e,n)=>{const o=n?js.Forwards:js.Backwards,r=e.selection.getRng();return YH(o,e,r).orThunk(()=>(Mi(e,o,r),$.none()))},kC=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Tj(o,e,r).orThunk(},JH=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return VR(o)?!n:n},FA=(e,n)=>A5(e,JH(e.selection,n)).exists(o=>(rf(e,o),!0)),LA=(e,n)=>kC(e,n).exists(o=>(rf(e,o),!0)),NE=(e,n)=>kE(e,n,n?Gd:tg),ME=QH=O5=(e,n,o)=>{const r=Ne(Qn,n);return Ca(Y.fromDom(e.container()),a=>o.isBlock(Bn(a)),r).filter(QH)},e9=(e,n,o)=>n?qB(e.dom,o):pA(e.dom,o),t9=(e,n)=>{const o=Y.fromDom(e.getBody()),r=Ce.fromRangeStart(e.selection.getRng());return O5(r,o,e.schema).exists(()=>{if(e9(o,n,r)){const u=E5(e,o,n?Qs:Sf);return e.selection.setRng(u),!0}else return!1})},D5=(e,n)=>e.selection.isCollapsed()?t9(e,n):!1,IA=(e,n,o)=>{const r=e.selection.getRng(),a=Ce.fromRangeStart(r);return e.getBody().firstChild===n&&pA(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},n9=(e,n)=>{const o=e.selection.getRng(),r=Ce.fromRangeStart(o);return e.getBody().lastChild===n&&qB(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},o9=(e,n)=>n?$.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>n9(e,o)).getOr(!1):$.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>$.from(e.dom.getParent(o,"details")).map(r=>IA(e,r,o))).getOr(!1),s9=(e,n)=>o9(e,n),R5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},N5=e=>De(e,n=>({...R5,...n})),kj=M5=r9=(e,n)=>Wr(N5(e),o=>M5(o,n)?[o]:[]),c9=(e,n)=>Wr(kj(e),,en=Hh=(e,n)=>ao(r9(e,n),o=>o.action()),HA=(e,n)=>Fa(c9(e,n),o=>o.action()),VA=B5=P5=BE=Gl.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),_C={...BE,none:e=>BE.none(e)},a9=(e,n)=>$5(e,n,We),$5=rd=(e,n,o=ye)=>{if(o(n))return $.none();if(Re(e,Bn(n)))return $.some(n);const r=return ku(n,e.join(","),r)},F5=(e,n)=>rd(["td","th"],e,n),L5=e=>a9(e,"th,td"),i9=I5=(e,n,o,r,a=We)=>{const u=r===1;if(!u&&o<=0)return _C.first(e[0]);if(u&&o>=e.length-1)return _C.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?_C.middle(n,b):I5(e,n,f,r,a)}},l9=(e,n)=>i9(e,n).bind(o=>{const r=L5(o);return ks(r,u=>Qn(e,u)).map(u=>({index:u,all:r}))}),Aj=(e,n,o)=>l9(e,o).fold(()=>_C.none(e),,u9=(e,n,o)=>l9(e,o).fold(()=>_C.none(),,PE=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),d9=(e,n)=>Wr(n,o=>{const r=PE(Hf(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),zA=UA=(e,n,o,r,a)=>{const u=Jr(Y.fromDom(o),"td,th,caption").map(b=>b.dom),f=Ct(d9(e,u),b=>n(b,a));return zA(f,r,a).map(b=>b.cell)},H5=e=>e.bottom,V5=e=>e.top,m9=f9=g9=Ne(UA,H5,m9),h9=Ne(UA,V5,f9),$E=(e,n)=>Bs(n.getClientRects()).bind(o=>g9(e,o.left,o.top)).bind(o=>hA(hH(o),n)),p9=(e,n)=>zc(n.getClientRects()).bind(o=>h9(e,o.left,o.top)).bind(o=>hA(xE(o),n)),b9=v9=e=>e.breakType===Qd.Wrap&&e.positions.length===0,WA=e=>e.breakType===Qd.Br&&e.positions.length===1,z5=(e,n,o)=>{const r=e(n,o);return v9(r)||!Ro(o.getNode())&&WA(r)?!b9(e,n,r):r.breakAt.isNone()},y9=Ne(z5,Ri),U5=Ne(z5,SC),C9=S9=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return qp()&&C9(n,a,o)?(sf(u,e,o,!n,!1).each(f=>{rf(e,f)}),!0):!1},w9=(e,n,o)=>$E(n,o).orThunk(()=>Bs(o.getClientRects()).bind(r=>jB(GB(e,Ce.before(n)),r.left))).getOr(Ce.before(n)),x9=(e,n,o)=>p9(n,o).orThunk(.getOr(Ce.after(n)),W5=E9=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Yi:mr,a=E5(n,Y.fromDom(o),r);rf(n,a)})},FE=(e,n,o)=>{const r=W5(!!n,o),a=n===!1;r.fold(()=>rf(e,o.toRange()),u=>dh(a,e.getBody()).filter(f=>f.isEqual(o)).fold(f=>E9(n,e,u)))},T9=(e,n,o,r)=>{const a=e.selection.getRng(),u=Ce.fromRangeStart(a),f=e.getBody();if(!n&&y9(r,u)){const b=w9(f,o,u);return FE(e,n,b),!0}else if(n&&U5(r,u)){const b=x9(f,o,u);return FE(e,n,b),!0}else return!1},ZA=Z5=(e,n)=>ZA(e,n,S9),jA=(e,n)=>ZA(e,n,T9),k9=j5=(e,n,o)=>o.fold($.none,$.none,(r,a)=>U6(a).map(u=>k9(u)),,G5=(e,n,o)=>j5(e,n,Aj(o,bn)),_9=Pr=(e,n)=>{const o=["table","li","dl"],r=Y.fromDom(e.getBody()),a=u=e.selection.getRng(),f=Y.fromDom(n?u.endContainer:u.startContainer);return F5(f,a).map(.getOr(!1)},A9=(e,n,o)=>{const r=ht.os.isMacOS()||ht.os.isiOS();Hh([{keyCode:yt.RIGHT,action:en(FA,e,!0)},{keyCode:yt.LEFT,action:en(FA,e,!1)},{keyCode:yt.UP,action:en(LA,e,!1)},{keyCode:yt.DOWN,action:en(LA,e,!0)},...r?[{keyCode:yt.UP,action:en(ME,e,!1),metaKey:!0,shiftKey:!0},{keyCode:yt.DOWN,action:en(ME,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:yt.RIGHT,action:en(Z5,e,!0)},{keyCode:yt.LEFT,action:en(Z5,e,!1)},{keyCode:yt.UP,action:en(jA,e,!1)},{keyCode:yt.DOWN,action:en(jA,e,!0)},{keyCode:yt.UP,action:en(jA,e,!1)},{keyCode:yt.UP,action:en(s9,e,!1)},{keyCode:yt.DOWN,action:en(s9,e,!0)},{keyCode:yt.RIGHT,action:en(VA,e,!0)},{keyCode:yt.LEFT,action:en(VA,e,!1)},{keyCode:yt.UP,action:en(B5,e,!1)},{keyCode:yt.DOWN,action:en(B5,e,!0)},{keyCode:yt.RIGHT,action:en(TH,e,n,!0)},{keyCode:yt.LEFT,action:en(TH,e,n,!1)},{keyCode:yt.RIGHT,ctrlKey:!r,altKey:r,action:en(_H,e,n)},{keyCode:yt.LEFT,ctrlKey:!r,altKey:r,action:en(AH,e,n)},{keyCode:yt.UP,action:en(D5,e,!1)},{keyCode:yt.DOWN,action:en(D5,e,!0)}],o).each(},O9=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||A9(e,n,o)})},em=(e,n)=>({container:e,offset:n}),AC=Zo.DOM,pv=q5=e=>n=>e.isBlock(n)||Re(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",cf=GA=(e,n,o)=>{if(Ge(e)&&n>=e.length)return $.some(em(e,n));{const r=Om(AC);return $.from(r.forwards(e,n,pv(e),o)).map(}},LE=IE=OC=(e,n,o,r,a)=>{const u=Om(e,q5(e));return $.from(u.backwards(n,o,r,a))},qA=KA=DC=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,bv=RC=NC=(e,n,o,r=0)=>{if(!qA(n))return $.none();const a={text:"",offset:0},u=(b,y,E)=>(a.text=E+a.text,a.offset+=y,RC(a.text,a.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return OC(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return $.none();const E=KA(y);return E.lastIndexOf(o)!==0||bv(E,o).length<r?$.none():$.some({text:bv(E,o),range:y,trigger:o})})},ru=(e,n,o,r=0)=>G6(Y.fromDom(n.startContainer)).fold(()=>NC(e,n,o,r),,MC=e=>e.nodeType===yu,K5=e=>e.nodeType===kr,YA=e=>{if(MC(e))return em(e,e.data.length);{const n=e.childNodes;return n.length>0?YA(n[n.length-1]):em(e,n.length)}},Y5=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?Y5(o[n],0):o.length>0&&K5(e)&&o.length===n?YA(o[o.length-1]):em(e,n)},X5=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return OC(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(.isSome()},D9=e=>n=>{const o=Y5(n.startContainer,n.startOffset);return!X5(e,o)},R9=BC=(e,n)=>{const o=n(),r=e.selection.getRng();return R9(e.dom,r,o).bind(a=>J5(e,n,a))},J5=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",y=Ct(u.lookupByTrigger(o.trigger),D=>o.text.length>=D.minChars&&D.matches.getOrThunk((o.range,b,o.text));if(y.length===0)return $.none();const E=Promise.all(De(y,);return $.some({lookupData:E,context:o})};var tm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(tm||(tm={}));const XA=(e,n,o)=>e.stype===tm.Error?n(e.serror):o(e.svalue),N9=e=>{const n=[],o=[];return le(e,r=>{XA(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},M9=(e,n)=>e.stype===tm.Error?{stype:tm.Error,serror:n(e.serror)}:e,B9=(e,n)=>e.stype===tm.Value?{stype:tm.Value,svalue:n(e.svalue)}:e,P9=(e,n)=>e.stype===tm.Value?n(e.svalue):e,$9=(e,n)=>e.stype===tm.Error?n(e.serror):e,Q5=e=>({stype:tm.Value,svalue:e}),eP=e=>({stype:tm.Error,serror:e}),Jc={fromResult:e=>e.fold(eP,Q5),toResult:e=>XA(e,ka.error,ka.value),svalue:Q5,partition:N9,serror:eP,bind:P9,bindError:$9,map:B9,mapError:M9,fold:XA},JA=tP=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ze("... (only showing first ten failures)")}]):e;return De(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},PC=(e,n)=>Jc.serror([{path:e,getErrorInfo:n}]),nP=(e,n,o)=>PC(e,()=>'Could not find valid *required* value for "'+n+'" in '+JA(o)),F9=L9=I9=H9=(e,n,o,r)=>xo(o,r).fold(()=>L9(e,o,r),,oP=(e,n)=>({extract:(a,u)=>xo(u,e).fold(()=>F9(a,e),b=>H9(a,u,n,b)),toString:),V9=(e,n)=>n,sP=(e,n)=>Xo(e)&&Xo(n)?$C(e,n):n,rP=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)Gt(a,u)&&(o[u]=e(o[u],a[u]))}return o},$C=rP(sP),cP=rP(V9),aP=()=>({tag:"required",process:{}}),z9=e=>({tag:"defaultedThunk",process:e}),iP=e=>z9(ze(e)),lP=()=>({tag:"option",process:{}}),U9=(e,n)=>e.length>0?Jc.svalue($C(n,cP.apply(void 0,e))):Jc.svalue(n),uP=e=>k(Jc.serror,Ii)(e),Z9={consolidateObj:(e,n)=>{const o=Jc.partition(e);return o.errors.length>0?uP(o.errors):U9(o.values,n)},consolidateArr:e=>{const n=Jc.partition(e);return n.errors.length>0?uP(n.errors):Jc.svalue(n.values)}},dP=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),j9=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),mP=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},QA=e=>{const n=(r,a)=>Jc.bindError(e(a),u=>I9(r,u)),o=ze("val");return{extract:n,toString:o}},fP=QA(Jc.svalue),gP=(e,n,o,r)=>xo(n,o).fold(r),hP=(e,n,o,r)=>{const a=xo(e,n).getOrThunk(()=>o(e));return r(a)},G9=q9=(e,n,o,r)=>{const a=xo(e,n).map(u=>u===!0?o(e):u);return r(a)},K9=(e,n,o,r,a)=>{const u=f=b=>b.fold(y=>{const E=a.extract(n.concat([r]),y);return Jc.map(E,$.some)});switch(e.tag){case"required":return gP(n,o,r,u);case"defaultedThunk":return hP(o,r,e.process,u);case"option":return G9(o,r,f);case"defaultedOptionThunk":return q9(o,r,e.process,f);case"mergeWithThunk":return hP(o,r,ze({}),}},Y9=(e,n,o)=>{const r={},a=[];for(const u of o)mP(u,(f,b,y,E)=>{const D=K9(y,e,n,f,E);Jc.fold(D,},;return a.length>0?Jc.serror(a):Jc.svalue(r)},eO=e=>({extract:(r,a)=>Y9(r,a,e),toString:()=>`obj{
`+De(e,.join(`
`)+"}"}),pP=e=>({extract:(r,a)=>{const u=De(a,;return Z9.consolidateArr(u)},toString:),X9=e=>QA(n=>e(n).fold(Jc.serror,Jc.svalue)),Nj=(e,n,o)=>{const r=n.extract([e],o);return Jc.mapError(r,a=>({input:o,errors:a}))},J9=bP=e=>`Errors: 
`+tP(e.errors).join(`
`)+`

Input object: `+JA(e.input),tO=(e,n)=>oP(e,Gn(n,eO)),vP=ze(fP),HE=(e,n)=>QA(o=>{const r=typeof o;return e(o)?Jc.svalue(o):Jc.serror(`Expected type: ${n} but got: ${r}`)}),yP=HE(go,"number"),FC=HE(j,"string"),Q9=HE(bt,"boolean"),nO=HE(te,"function"),LC=dP,oO=j9,eV=e=>X9(,VE=(e,n)=>LC(e,e,aP(),n),CP=e=>VE(e,FC),SP=e=>VE(e,nO),tV=(e,n)=>LC(e,e,aP(),pP(n)),zE=(e,n)=>LC(e,e,lP(),n),UE=e=>zE(e,FC),nV=e=>zE(e,nO),oV=(e,n)=>LC(e,e,iP(n),vP()),vv=wP=(e,n)=>vv(e,n,yP),rc=(e,n)=>vv(e,n,FC),nm=(e,n,o)=>vv(e,n,eV(o)),sO=(e,n)=>vv(e,n,Q9),xP=(e,n)=>vv(e,n,nO),sV=(e,n,o)=>vv(e,n,pP(o)),rV=CP("type"),cV=SP("fetch"),rO=SP("onAction"),EP=xP("onSetup",()=>Oe),yv=UE("text"),Mj=UE("icon"),aV=UE("tooltip"),iV=UE("label"),om=sO("active",!1),lV=sO("enabled",!0),TP=sO("primary",!1),kP=e=>oV("columns",e),IC=e=>rc("type",e),cO=eO([rV,CP("trigger"),wP("minChars",1),kP(1),wP("maxResults",10),nV("matches"),cV,rO,sV("highlightOn",[],FC)]),_P=e=>J9("Autocompleter",cO,{trigger:e.ch,...e}),aO=[lV,aV,Mj,yv,EP],AP=[om].concat(aO),uV=[xP("predicate",ye),nm("scope","node",["node","editor"]),nm("position","selection",["node","selection","line"])],OP=aO.concat([IC("contextformbutton"),TP,rO,oO("original",pn)]),DP=AP.concat([IC("contextformbutton"),TP,rO,oO("original",pn)]),iO=aO.concat([IC("contextformbutton")]),lO=AP.concat([IC("contextformtogglebutton")]),uO=tO("type",{contextformbutton:OP,contextformtogglebutton:DP});eO([IC("contextform"),xP("initValue",ze("")),iV,tV("commands",uO),zE("launch",tO("type",{contextformbutton:iO,contextformtogglebutton:lO}))].concat(uV));const dV=e=>{const n=e.ui.registry.getAll().popups,o=Gn(n,f=>_P(f).fold(b=>{throw new Error(bP(b))},pn)),r=Vi(ta(o,f=>f.trigger)),a=pa(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Ct(a,b=>b.trigger===f)}},mV=(e,n)=>{const o=V0(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},fV=e=>{const n=Am(),o=Ss(!1),r=n.isSet,a=()=>{r()&&(B8(e),w2(e),o.set(!1),n.clear())},u=E=>{r()||(M8(e,E.range),n.set({trigger:E.trigger,matchLength:E.text.length}))},f=di(()=>dV(e)),b=E=>n.get().map(.getOrThunk(()=>BC(e,f)),y=E=>{b(E).fold(a,D=>{u(D.context),D.lookupData.then(R=>{n.get().map(B=>{const W=D.context;B.trigger===W.trigger&&(W.text.length-B.matchLength>=10?a():(n.set({...B,matchLength:W.text.length}),o.get()?zw(e,{lookupData:R}):(o.set(!0),S2(e,{lookupData:R}))))})})})};e.addCommand("mceAutocompleterReload",,e.addCommand("mceAutocompleterClose",a),mV(e,{cancelIfNecessary:a,load:y})},dO=Do().browser.isSafari(),mO=e=>Nu(Y.fromDom(e)),RP=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},HC=(e,n)=>$.from(e.getParent(n.container(),"details")),NP=(e,n)=>HC(e,n).isSome(),fO=(e,n)=>{const o=$.from(e.getParent(n.startContainer,"details")),r=$.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>$.from(e.select("summary",u)[0]));return $.some({startSummary:a,startDetails:o,endDetails:r})}else return $.none()},gV=(e,n)=>ma(n).exists(o=>o.isEqual(e)),hV=(e,n)=>Cl(n).exists(o=>Ro(o.getNode())&&Oa(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),pV=(e,n)=>n.startSummary.exists(o=>gV(e,o)),bV=(e,n)=>n.startSummary.exists(o=>hV(e,o)),vV=(e,n)=>n.startDetails.exists(o=>Oa(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),MP=(e,n,o)=>o.startDetails.exists(r=>Kc(e,n).forall(a=>!r.contains(a.container()))),WE=(e,n)=>{const o=n.getNode();Jn(o)||e.selection.setCursorLocation(o,n.offset())},gO=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?ma(a):Cl(a)).each(f=>WE(e,f))}else WE(e,n)},BP=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(;return(a||u)&&!(a&&u)||f},PP=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=Ce.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),y=HC(r,f),E=b&&r.isEmpty(b),D=re(b==null?void 0:b.previousSibling),R=re(b==null?void 0:b.nextSibling);return E&&(n?R:D)&&Ld(!n,u,f).exists(G=>NP(r,G)&&!bd(y,HC(r,G)))?!0:Ld(n,u,f).fold(ye,B=>{const W=HC(r,B);if(NP(r,B)&&!bd(y,W)){if(n||gO(e,B,!1),b&&E){if(n&&D)return!0;if(!n&&R)return!0;gO(e,B,n),e.dom.remove(b)}return!0}else return!1})}else return!1},yV=(e,n,o,r)=>{const u=e.selection.getRng(),f=Ce.fromRangeStart(u),b=e.getBody();return r==="selection"?BP(u,n):o?bV(f,n)||MP(b,f,n):pV(f,n)||vV(f,n)},CV=(e,n,o)=>fO(e.dom,e.selection.getRng()).fold(()=>PP(e,n,o),r=>yV(e,r,n,o)||PP(e,n,o)),ZE=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=Ce.fromRangeStart(u);return ja(a)?(o==="selection"&&RP(u,a)||hx(n,f,a)?mO(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:y,anchorOffset:E,focusNode:D,focusOffset:R}=b!=null?b:{};const B=()=>{_e(y)&&_e(E)&&_e(D)&&_e(R)&&(b==null||b.setBaseAndExtent(y,E,D,R))},W=()=>{y=b==null?void 0:b.anchorNode,E=b==null?void 0:b.anchorOffset,D=b==null?void 0:b.focusNode,R=b==null?void 0:b.focusOffset},G=(q,se)=>{le(q.childNodes,ie=>{o1(ie)&&se.appendChild(ie)})},z=e.dom.create("span",{"data-mce-bogus":"1"});G(a,z),a.appendChild(z),B(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&RP(r.getRng(),z)?mO(a):(e.execCommand(n?"ForwardDelete":"Delete"),W(),G(z,a),B()),e.dom.remove(z)}),!0):!1},Vh=(e,n,o)=>CV(e,n,o)||dO&&ZE(e,n,o)?$.some(Oe):$.none(),hO=VC=hO("input"),jE=hO("beforeinput"),SV=Do(),wV=SV.os,xV=wV.isMacOS()||wV.isiOS(),$j=SV.browser.isFirefox(),EV=(e,n,o)=>{const r=o.keyCode===yt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";HA([{keyCode:yt.BACKSPACE,action:en(y5,e)},{keyCode:yt.BACKSPACE,action:en(bC,e,!1)},{keyCode:yt.DELETE,action:en(bC,e,!0)},{keyCode:yt.BACKSPACE,action:en(aA,e,!1)},{keyCode:yt.DELETE,action:en(aA,e,!0)},{keyCode:yt.BACKSPACE,action:en(AE,e,n,!1)},{keyCode:yt.DELETE,action:en(AE,e,n,!0)},{keyCode:yt.BACKSPACE,action:en(Z2,e,!1)},{keyCode:yt.DELETE,action:en(Z2,e,!0)},{keyCode:yt.BACKSPACE,action:en(Vh,e,!1,u)},{keyCode:yt.DELETE,action:en(Vh,e,!0,u)},...xV?[{keyCode:yt.BACKSPACE,altKey:!0,action:en(Vh,e,!1,f(!0))},{keyCode:yt.DELETE,altKey:!0,action:en(Vh,e,!0,f(!0))},{keyCode:yt.BACKSPACE,metaKey:!0,action:en(Vh,e,!1,f(!1))}]:[{keyCode:yt.BACKSPACE,ctrlKey:!0,action:en(Vh,e,!1,f(!0))},{keyCode:yt.DELETE,ctrlKey:!0,action:en(Vh,e,!0,f(!0))}],{keyCode:yt.BACKSPACE,action:en(uA,e,!1)},{keyCode:yt.DELETE,action:en(uA,e,!0)},{keyCode:yt.BACKSPACE,action:en(NA,e,!1)},{keyCode:yt.DELETE,action:en(NA,e,!0)},{keyCode:yt.BACKSPACE,action:en(bE,e,!1)},{keyCode:yt.DELETE,action:en(bE,e,!0)},{keyCode:yt.BACKSPACE,action:en(rA,e,!1)},{keyCode:yt.DELETE,action:en(rA,e,!0)},{keyCode:yt.BACKSPACE,action:en(DA,e,!1)},{keyCode:yt.DELETE,action:en(DA,e,!0)}],o).filter(b=>e.selection.isEditable()).each(},TV=(e,n,o)=>Hh([{keyCode:yt.BACKSPACE,action:en(BB,e)},{keyCode:yt.DELETE,action:en(BB,e)},...xV?[{keyCode:yt.BACKSPACE,altKey:!0,action:en(xC,e)},{keyCode:yt.DELETE,altKey:!0,action:en(xC,e)},...o?[{keyCode:$j?224:91,action:en(xC,e)}]:[]]:[{keyCode:yt.BACKSPACE,ctrlKey:!0,action:en(xC,e)},{keyCode:yt.DELETE,ctrlKey:!0,action:en(xC,e)}]],n),Fj=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===yt.BACKSPACE,r.isDefaultPrevented()||EV(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||TV(e,r,o),o=!1})},kV=gs=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=kV(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(oo),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Wo(n,n);let f=n,b;for(;b=u.current();){if(Ge(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else Ro(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),C1(e,a)},I1=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},cd=$P=FP=e=>cd(e).filter(n=>Du(Y.fromDom(n))).isSome(),pO=GE=(e,n,o)=>{const r=e.dom;$.from(o.style).map(r.parseStyle).each(y=>{const D={...bg(Y.fromDom(n)),...y};r.setStyles(n,D)});const a=$.from(o.class).map(y=>y.split(/\s+/)),u=$.from(n.className).map(y=>Ct(y.split(/\s+/),E=>E!==""));dr(a,u,;const f=["style","class"],b=wo(o,;r.setAttribs(n,b)},H1=(e,n)=>{if(Gc(e).toLowerCase()===n.tagName.toLowerCase()){const r=Hp(e);GE(e,n,r)}},bO=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,y=e.schema,E=Gc(e),D=o?o.nodeName.toUpperCase():"";let R=n;const B=y.getTextInlineElements();let W;u||D==="TABLE"||D==="HR"?W=b.create(u||E,f||{}):W=o.cloneNode(!1);let G=W;if(!a)b.setAttrib(W,"style",null),b.setAttrib(W,"class",null);else do if(B[R.nodeName]){if(xi(R)||Ei(R))continue;const z=R.cloneNode(!1);b.setAttrib(z,"id",""),W.hasChildNodes()?(z.appendChild(W.firstChild),W.appendChild(z)):(G=z,W.appendChild(z))}while((R=R.parentNode)&&R!==r);return H1(e,W),pO(G),W},LP=(e,n)=>e.dom.getParent(n,Le),_V=(e,n,o)=>{let r=n;for(;r&&r!==e&&re(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return Le(a);r=a}return!1},AV=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Gc(e)&&e.dom.isEmpty(o)&&_V(e.getBody(),o,r=>Gt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),OV=(e,n,o)=>{var r,a,u;const f=n(Gc(e)),b=LP(e,o);!b||(e.dom.insertAfter(f,b),gs(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},DV=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,RV=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},vO=(e,n)=>{const o=e==null?void 0:e.parentNode;return _e(o)&&o.nodeName===n},IP=e=>_e(e)&&/^(OL|UL|LI)$/.test(e.nodeName),yO=NV=e=>IP(e)&&IP(e.parentNode),qE=e=>{const n=e.parentNode;return yO(n)?n:e},KE=CO=e=>Cn(ta(bg(Y.fromDom(e)),,(n,o)=>n+o,""),HP=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;NV(o)&&(a="LI");const y=yO(r)?CO(r):void 0;let E=yO(r)&&y?n(a,{style:CO(r)}):n(a);if(KE(o,r,!0)&&KE(o,r,!1))if(vO(o,"LI")){const D=qE(o);u.insertAfter(E,D),RV(o)?u.remove(D):u.remove(o)}else u.replace(E,o);else if(KE(o,r,!0))vO(o,"LI")?(u.insertAfter(E,qE(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):b.insertBefore(E,o),u.remove(r);else if(KE(o,r,!1))u.insertAfter(E,qE(o)),u.remove(r);else{o=qE(o);const D=f.cloneRange();D.setStartAfter(r),D.setEndAfter(o);const R=D.extractContents();if(a==="LI"&&DV(R,"LI")){const B=Ct(De(E.children,Y.fromDom),Rn(Ua("br")));E=R.firstChild,u.insertAfter(R,o),le(B,W=>Sf(Y.fromDom(E),W)),y&&E.setAttribute("style",y)}else u.insertAfter(R,o),u.insertAfter(E,o);u.remove(r)}gs(e,E)},MV=e=>{le($l(Y.fromDom(e),Kr),},BV=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},Lj=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),zC=SO=(e,n)=>_e(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",PV=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Et(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||Lj(e,u))&&e.remove(u)},wO=(e,n,o)=>Ge(n)?e?o===1&&n.data.charAt(o-1)===ec?0:o:o===n.data.length-1&&n.data.charAt(o)===ec?n.data.length:o:o,VP=$V=e=>{let n=e;do Ge(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},zP=(e,n,o,r,a)=>{var u,f;const b=e.dom,y=(u=I1(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!SO(b,E)){if(E=E||y,!E.hasChildNodes()){const W=b.create(n);return H1(e,W),E.appendChild(W),o.setStart(W,0),o.setEnd(W,0),W}let D=r;for(;D&&D.parentNode!==E;)D=D.parentNode;let R;for(;D&&!b.isBlock(D);)R=D,D=D.previousSibling;const B=(f=R==null?void 0:R.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&B&&e.schema.isValidChild(B,n.toLowerCase())){const W=R.parentNode,G=b.create(n);for(H1(e,G),W.insertBefore(G,R),D=R;D&&!b.isBlock(D);){const z=D.nextSibling;G.appendChild(D),D=z}o.setStart(r,a),o.setEnd(r,a)}}return r},FV=LV=(e,n)=>{const o=YS(e);return Xt(n)?!1:j(o)?Re(Ke.explode(o),n.nodeName.toLowerCase()):o},UP={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,y=e.schema,E=y.getNonEmptyElements(),D=e.selection.getRng(),R=Gc(e),B=Y.fromDom(D.startContainer),W=Tu(B,D.startOffset),G=W.exists(Ie=>us(Ie)&&!bn(Ie)),z=D.collapsed&&G,q=(Ie,xt)=>bO(e,o,Qe,He,Ok(e),Ie,xt),se=Ie=>{const xt=wO(Ie,o,r);if(Ge(o)&&(Ie?xt>0:xt<o.data.length))return!1;if(o.parentNode===Qe&&f&&!Ie||Ie&&Et(o)&&o===Qe.firstChild)return!0;if(zC(o,"TABLE")||zC(o,"HR"))return f&&!Ie||!f&&Ie;const $t=new Wo(o,Qe);Ge(o)&&(Ie&&xt===0?$t.prev():!Ie&&xt===o.data.length&&$t.next());let Tn;for(;Tn=$t.current();){if(Et(Tn)){if(!Tn.getAttribute("data-mce-bogus")){const wn=Tn.nodeName.toLowerCase();if(E[wn]&&wn!=="br")return!1}}else if(Ge(Tn)&&!Cm(Tn.data))return!1;Ie?$t.prev():$t.next()}return!0},ie=()=>{let Ie;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&gt!=="HGROUP"?Ie=q(R):Ie=q(),LV(e,u)&&SO(b,u)&&b.isEmpty(Qe,void 0,{includeZwsp:!0})?Ie=b.split(u,Qe):b.insertAfter(Ie,Qe),gs(e,Ie),Ie};x(b,D).each(Ie=>{D.setStart(Ie.startContainer,Ie.startOffset),D.setEnd(Ie.endContainer,Ie.endOffset)}),o=D.startContainer,r=D.startOffset;const ae=!!(n&&n.shiftKey),be=!!(n&&n.ctrlKey);Et(o)&&o.hasChildNodes()&&!z&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&Ge(o)?r=o.data.length:r=0);const He=I1(b,o);if(!He||BV(e,o))return;ae||(o=zP(e,R,D,o,r));let Qe=b.getParent(o,b.isBlock)||b.getRoot();u=_e(Qe==null?void 0:Qe.parentNode)?b.getParent(Qe.parentNode,b.isBlock):null,a=Qe?Qe.nodeName.toUpperCase():"";const gt=u?u.nodeName.toUpperCase():"";if(gt==="LI"&&!be){const Ie=u;Qe=Ie,u=Ie.parentNode,a=gt}if(Et(u)&&AV(e,ae,Qe))return OV(e,q,Qe);if(/^(LI|DT|DD)$/.test(a)&&Et(u)&&b.isEmpty(Qe)){HP(e,q,u,Qe,R);return}if(!z&&(Qe===e.getBody()||!SO(b,Qe)))return;const ke=Qe.parentNode;let we;if(z)we=q(R),W.fold(()=>{Qs(B,Y.fromDom(we))},Ie=>{mr(Ie,Y.fromDom(we))}),e.selection.setCursorLocation(we,0);else if(yp(Qe))we=wd(Qe),b.isEmpty(Qe)&&pO(Qe),H1(e,we),gs(e,we);else if(se(!1))we=ie();else if(se(!0)&&ke){we=ke.insertBefore(q(),Qe);const Ie=ip(Y.fromDom(D.startContainer))&&D.collapsed;gs(e,zC(Qe,"HR")||Ie?we:Qe)}else{const Ie=VP(D).cloneRange();Ie.setEndAfter(Qe);const xt=Ie.extractContents();MV(xt),$V(xt),we=xt.firstChild,b.insertAfter(xt,Qe),PV(b,E,we),FV(b,Qe),b.isEmpty(Qe)&&pO(Qe),we.normalize(),b.isEmpty(we)?(b.remove(we),ie()):(H1(e,we),gs(e,we))}b.setAttrib(we,"id",""),e.dispatch("NewBlock",{newBlock:we})},fakeEventName:"insertParagraph"},IV=WP=HV=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;x(r,a).each(;let b=a.startOffset,y=a.startContainer;if(Et(y)&&y.hasChildNodes()){const W=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,W&&Ge(y)?b=y.data.length:b=0}let E=r.getParent(y,r.isBlock);const D=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,R=D?D.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);R==="LI"&&!B&&(E=D),Ge(y)&&b>=y.data.length&&(IV(e.schema,y,E||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),by(r,a,u),WP(e,u,f),e.undoManager.add()},VV=(e,n)=>{const o=Y.fromTag("br");mr(Y.fromDom(n),o),e.undoManager.add()},zV=(e,n)=>{YE(e.getBody(),n)||Yi(Y.fromDom(n),Y.fromTag("br"));const o=Y.fromTag("br");Yi(Y.fromDom(n),o),WP(e,o.dom,!1),e.undoManager.add()},UV=e=>Ro(e.getNode()),YE=(e,n)=>UV(Ce.after(n))?!0:Kc(e,Ce.after(n)).map(o=>Ro(o.getNode())).getOr(!1),ZP=e=>e&&e.nodeName==="A"&&"href"in e,WV=e=>e.fold(ye,ZP,ZP,ye),xO=EO=ZV={insert:(e,n)=>{const o=xO(e);o.isSome()?o.each(Ne(EO,e)):HV(e,n)},fakeEventName:"insertLineBreak"},jV=(e,n)=>cd(e).filter(o=>n.length>0&&Wa(Y.fromDom(o),n)).isSome(),GV=e=>jV(e,Ak(e)),qV=e=>jV(e,Ry(e)),cu=Gl.generate([{br:[]},{block:[]},{none:[]}]),KV=(e,n)=>qV(e),ad=e=>(n,o)=>FP(n)===e,jP=(e,n)=>(o,r)=>$P(o)===e.toUpperCase()===n,GP=UC=e=>jP("pre",e),YV=XE=XV=(e,n)=>GV(e),JE=(e,n)=>n,JV=QV=e=>{const n=e.selection.getRng(),o=Y.fromDom(n.startContainer),a=Tu(o,n.startOffset).map(u=>us(u)&&!bn(u));return n.collapsed&&a.getOr(!0)},sl=qP=(e,n)=>IB([sl([KV],cu.none()),sl([UC(!0),GP],cu.none()),sl([YV()],cu.br()),sl([UC(!0),XE(!1),JE],cu.br()),sl([UC(!0),XE(!1)],cu.block()),sl([UC(!0),XE(!0),JE],cu.block()),sl([UC(!0),XE(!0)],cu.br()),sl([ad(!0),JE],cu.br()),sl([ad(!0)],cu.block()),sl([XV],cu.br()),sl([JE],cu.br()),sl([JV],cu.block()),sl([QV],cu.block())],[e,!!(n&&n.shiftKey)]).getOr(cu.none()),V1=(e,n,o)=>{n.selection.isCollapsed()||r4(n),!(_e(o)&&jE(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),_e(o)&&VC(n,e.fakeEventName))},KP=(e,n)=>{const o=()=>V1(ZV,e,n),r=()=>V1(UP,e,n),a=qP(e,n);switch(_k(e)){case"linebreak":a.fold(o,o,Oe);break;case"block":a.fold(r,r,Oe);break;case"invert":a.fold(r,o,Oe);break;default:a.fold(o,r,Oe);break}},YP=Do(),ez=YP.os.isiOS()&&YP.browser.isSafari(),XP=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),u8(e.undoManager),e.undoManager.transact(()=>{KP(e,n)}))},tz=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Ge(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},JP=e=>{let n=$.none();const o=a=>{n=$.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(Oe,f=>a.selection.moveToBookmark(f)),XP(a,u),n=$.none()};e.on("keydown",a=>{a.keyCode===yt.ENTER&&(ez&&tz(e.selection.getRng())?o(e):XP(e,a))}),e.on("keyup",a=>{a.keyCode===yt.ENTER&&n.each(()=>r(e,a))})},nz=QP=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||nz(e,n,o)})},e$=e=>{e.on("input",},oz=Do(),sz=QE=e=>e.stopImmediatePropagation(),t$=n$=eT=(e,n)=>{if(oz.os.isMacOS())return;const o=Ss(!1);e.on("keydown",,e.on("keyup",r=>{r.isDefaultPrevented()||sz(e,n,r),t$(r)&&o.get()&&(n$(o,e,!1),e.nodeChanged())})},rz=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||st(n.getTargetRanges(),o=>!rR(e.dom,o)))&&n.preventDefault()})},tT=(e,n)=>{const o=n.container(),r=n.offset();return Ge(o)?(o.insertData(r,e),$.some(Ce(o,r+e.length))):db(n).map(a=>{const u=Y.fromText(e);return n.isAtEnd()?Yi(a,u):mr(a,u),Ce(u.dom,e.length)})},nT=Ne(tT,oo),TO=Ne(tT," "),cz=(e,n,o)=>$R(e,n,o)?nT(n):TO(n),Hj=zh=(e,n,o)=>r=>$R(e,r,o)?nT(n):TO(n),o$=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},az=(e,n)=>e.isEditable(e.getParent(n,"summary")),iz=e=>{const n=Ce.fromRangeStart(e.selection.getRng()),o=Y.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ne(T1,e),a=Ce.fromRangeStart(e.selection.getRng());return Ic(r,e.getBody(),a).bind(Hj(o)).map(u=>()=>zh(o,n,e.schema)(u).each(o$(e)))}else return $.none()},oT=e=>{const n=()=>{const o=Y.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ce.fromRangeStart(e.selection.getRng());cz(o,r,e.schema).each(o$(e))};return V(ht.browser.isFirefox()&&e.selection.isEditable()&&az(e.dom,e.selection.getRng().startContainer),n)},s$=(e,n)=>{HA([{keyCode:yt.SPACEBAR,action:en(iz,e)},{keyCode:yt.SPACEBAR,action:en(oT,e)}],n).each(},r$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||s$(e,n)})},lz=c$=uz=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||c$(e,n)})},dz=e=>{if(e.addShortcut("Meta+P","","mcePrint"),fV(e),ag(e))return Ss(null);{const n=kH(e);return rz(e),Ej(e),O9(e,n),Fj(e,n),JP(e),r$(e),e$(e),uz(e),QP(e,n),eT(e,n),n}};class mz{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!jd(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);!a||Cb(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&Cb(n)&&(n.selection.getNode().nodeName==="IMG"?xl.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!ob(this.editor)&&!this.editor.mode.isReadOnly()){const a=this.editor.getBody();r=o.getStart(!0)||a,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,a))&&(r=a);const u=[];this.editor.dom.getParent(r,f=>f===a?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,a=Uo(r.dom.getParents(n,We,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const kO=Lf("image"),_O=e=>{const n=e;return $.from(n[kO])},fz=(e,n)=>{const o=e;o[kO]=n},WC=Lf("event"),a$=e=>{const n=e;return $.from(n[WC])},z1=e=>n=>{const o=n;o[WC]=e},i$=(e,n)=>z1(n)(e),AO=z1(0),gz=z1(2),hz=z1(1),l$=(e=>n=>{const o=n;return $.from(o[WC]).exists(r=>r===e)})(0),pz=()=>Object.freeze({length:0,item:),DO=Lf("mode"),u$=e=>{const n=e;return $.from(n[DO])},sT=e=>n=>{const o=n;o[DO]=e},d$=(e,n)=>sT(n)(e),m$=sT(0),RO=sT(2),bz=sT(1),NO=e=>n=>{const o=n;return $.from(o[DO]).exists(r=>r===e)},Cv=NO(0),MO=NO(1),vz=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Cv(e))if(j(o)){if(!Jn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Cv(e)&&n.remove(o)},clear:),yz=["none","copy","link","move"],Cz=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],BO=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffectget effectAllowedset effectAllowed(a){l$(r)&&Re(Cz,a)&&(o=a)},get itemsget files(){return MO(r)?pz():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{Cv(r)&&(fz(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:setData:clearData:;return m$(r),r},Sz=e=>{const n=BO(),o=u$(e);return RO(e),AO(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,_O(e).each(,le(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),le(e.files,r=>n.items.add(r)),a$(e).each(r=>{i$(n,r)}),o.each(,n},Sv=e=>{const n=e.getData("text/html");return n===""?$.none():$.some(n)},f$=g$="x-tinymce/html",ZC=ze(g$),PO="<!-- "+g$+" -->",wz=xz=e=>e.replace(PO,""),$O=Ez=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),Tz=Vj=(e,n,o)=>{const r=e.split(/\n\n/),a=Tz(n,o),u="</"+n+">",f=De(r,,b=return f.length===1?f[0]:De(f,b).join("")},jC="%MCEPASTEBIN%",kz=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},jC);ht.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},_z=FO=Az=e=>_e(e)&&e.id==="mcepastebin",Oz=h$=e=>e===jC,Dz=e=>{const n=Ss(null);return{create:()=>kz(e,n),remove:()=>_z(e,n),getEl:()=>FO(e),getHtml:()=>Oz(e),getLastRng:n.get}},p$=(e,n)=>(Ke.each(n,o=>{Ht(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),Rz=e=>{const n=Dd(),o=td({},n);let r="";const a=n.getVoidElements(),u=Ke.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const E=y.name,D=y;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(a[E]&&(r+=" "),u[E]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let R=y.firstChild;if(R)do b(R);while(R=R.next)}f[E]&&D.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=p$(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},b$=e=>(e=p$(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":oo],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),Nz=e=>{let n=0;return()=>e+n++},Mz=Bz=(e,n)=>{const o=td({sanitize:th(e),sandbox_iframes:ib(e)},e.schema);o.addNodeFilter("meta",;const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Th({validate:!0},e.schema).serialize(r)},Ho=(e,n)=>({content:e,cancelled:n}),Pz=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=k_(e,r,o);return Ho(a.node.innerHTML,a.isDefaultPrevented())},v$=(e,n,o)=>{const r=T_(e,n,o),a=Bz(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?Pz(e,a,o):Ho(a,r.isDefaultPrevented())},$z=(e,n,o)=>v$(e,n,o),GC=rT=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),Fz=Lz=y$=LO=(e,n,o)=>!e.selection.isCollapsed()&&rT(n)?y$(e,n,o):!1,Iz=(e,n,o)=>Fz(e,n)?Lz(e,n,o):!1,Hz=Vz=(e,n,o)=>{o||!uw(e)?GC(e,n):Hz(e,n)},C$=Nz("mceclip"),zz=e=>{const n=BO();return f$(n,e),RO(n),n},S$=(e,n,o,r,a)=>{const u=$z(e,n,o);if(!u.cancelled){const f=u.content,b=()=>Vz(e,f,r);a?jE(e,"insertFromPaste",{dataTransfer:zz(f)}).isDefaultPrevented()||(b(),VC(e,"insertFromPaste")):b()}},mg=(e,n,o,r)=>{const a=o||$O(n);S$(e,xz(n),a,!1,r)},IO=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=Df(r,Gk(e)),u=Vj(a,Gc(e),Hp(e));S$(e,u,!1,!0,o)},U1=id=w$=e=>id(e,"text/html")||id(e,"text/plain"),Uz=wv=(e,n,o,r)=>{const a=C$(),u=Vp(e)&&_e(o.name),f=u?Uz(e,o.name):a,b=u?o.name:void 0,y=n.create(a,o,r,f,b);return n.add(y),y},Wz=(e,n)=>{Hx(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),E=y!=null?y:wv(e,b,f,u);mg(e,`<img src="${E.blobUri()}">`,!1,!0)})},HO=e=>e.type==="paste",Zz=e=>Promise.all(De(e,),x$=e=>{const n=mw(e);return o=>is(o.type,"image/")&&st(n,},E$=(e,n)=>{const o=n.items?Wr(ur(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?ur(n.files):[];return Ct(o.length>0?o:r,x$(e))},cT=(e,n,o)=>{const r=HO(n)?n.clipboardData:n.dataTransfer;if(rb(e)&&r){const a=E$(e,r);if(a.length>0)return n.preventDefault(),Zz(a).then(u=>{o&&e.selection.setRng(o),le(u,f=>{Wz(e,f)})}),!0}return!1},T$=e=>{var n,o;return ht.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},jz=e=>yt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,VO=(e,n,o,r,a)=>{let u=b$(o);const f=id(n,ZC())||$O(o),b=!f&&Ez(u),y=rT(u);(h$(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(id(n,"text/plain")&&b?u=n["text/plain"]:u=Rz(u)),!h$(u)&&(r?IO(e,u,a):mg(e,u,f,a))},k$=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{jz(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||T$(u))return;const f=o.get()==="text"||r;r=!1;const b=U1(u.clipboardData);!w$(b)&&cT(e,u,a())||(id(b,"text/html")?(u.preventDefault(),VO(e,b,b["text/html"],f,!0)):id(b,"text/plain")&&id(b,"text/uri-list")?(u.preventDefault(),VO(e,b,b["text/plain"],f,!0)):(n.create(),xl.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),VO(e,b,y,f,!1)},0)))})},Gz=e=>{const n=a=>is(a,"webkit-fake-url"),o=a=>is(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!rb(e)&&r(f))for(const b of a){const y=b.attr("src");j(y)&&!b.attr("data-mce-object")&&y!==ht.transparentSrc&&(n(y)||!cb(e)&&o(y))&&b.remove()}})},_$=zO=(e,n)=>{n.get()==="text"?(n.set("html"),Uw(e,!1)):(n.set("text"),Uw(e,!0)),e.focus()},A$=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{zO(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&mg(e,r.html,r.internal,!1),r.text&&IO(e,r.text,!1)})},qz=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(ZC(),n),!0}catch(r){return!1}else return!1},O$=(e,n,o,r)=>{qz(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},D$=UO=WO=R$=e=>!e.selection.isCollapsed()||WO(e),N$=e=>n=>{!n.isDefaultPrevented()&&R$(e)&&e.selection.isEditable()&&O$(n,UO(e),D$(e),},M$=Kz=e=>{e.on("cut",N$(e)),e.on("copy",M$(e))},ZO=(e,n)=>{var o,r;return I.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},Yz=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},B$=Xz=Jz=(e,n,o,r)=>{const a=e.getParent(o,f=>Fn(n,f));if(!re(e.getParent(o,"summary")))return!0;if(a&&Gt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!re(f.querySelector(a.nodeName.toLowerCase()))}else return!1},Qz=e=>{e.on("input",n=>{const o=r=>re(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Ct(e.dom.select("details"),o);le(r,a=>{Ro(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Ea().dom),a.prepend(u)})}})},aT=(e,n)=>{Zk(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),rb(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&Xz(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=ZO(e,o);if(Xt(r))return;const a=U1(o.dataTransfer),u=id(a,ZC());if((!w$(a)||Yz(a))&&cT(e,o,r))return;const f=a[ZC()],b=f||a["text/html"]||a["text/plain"],y=Jz(e.dom,e.schema,r.startContainer,a),E=n.get();E&&!y||b&&(o.preventDefault(),xl.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||E&&y)&&e.execCommand("Delete"),B$(e,r);const D=b$(b);a["text/html"]?mg(e,D,u,!0):IO(e,D,!0)})}))}),e.on("dragstart",,e.on("dragover dragend",o=>{rb(e)&&!n.get()&&(o.preventDefault(),B$(e,ZO(e,o))),o.type==="dragend"&&n.set(!1)}),Qz(e)},eU=P$=tU=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,$$=F$=(e,n,o)=>{const r=Hy(e);if(o||r==="all"||!Vy(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,,n},L$=e=>{(ht.browser.isChromium()||ht.browser.isSafari())&&P$(e,F$)},nU=e=>{const n=Ss(!1),o=Ss(Uy(e)?"text":"html"),r=Dz(e);L$(e),A$(e,o),eU(e),e.on("PreInit",()=>{Kz(e),aT(e,n),_$(e,r,o)})},oU=sU=e=>{e.parser.addNodeFilter("details",n=>{const o=nc(e);le(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=HD(e);le(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},rU=e=>{oU(e),sU(e)},cU=Ro,jO=Ge,aU=e=>zn(e.dom),iU=e=>la(e.dom),I$=e=>n=>Qn(Y.fromDom(e),n),lU=(e,n,o)=>Ca(Y.fromDom(e),r=>iU(r)||o.isBlock(Bn(r)),I$(n)).getOr(Y.fromDom(n)).dom,H$=(e,n)=>Ca(Y.fromDom(e),aU,I$(n)),V$=uU=(e,n,o)=>{const a=Ce.fromRangeStart(e).getNode(),u=lU(a,n,o),f=V$(a,u,!1),b=V$(a,u,!0),y=document.createRange();return H$(f,u).fold(E=>y.setStartBefore(E.dom)),H$(b,u).fold(E=>y.setEndAfter(E.dom)),y},dU=e=>{const n=uU(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Wb(n))},z$=var W1;((W1||(W1={}));const mU=(e,n)=>Math.abs(e.left-n),fU=(e,n)=>Math.abs(e.right-n),gU=hU=(e,n)=>e.top<n.bottom&&e.bottom>n.top,pU=(e,n)=>{const o=bk(e,n)/Math.min(e.height,n.height);return hU(e,n)&&o>.5},bU=(e,n)=>{const o=Ct(e,r=>gU(n,r));return pk(o).fold(r=>{const{pass:a,fail:u}=jn(e,f=>pU(f,r));return[a,u]})},vU=iT=lT=(e,n,o,r)=>{const a=R=>gr(R.node)?$.some(R):Et(R.node)?lT(ur(R.node.childNodes),n,o,!1):$.none(),u=(R,B,W)=>a(B).filter(G=>Math.abs(W(R,n,o)-W(G,n,o))<2&&Ge(G.node)),f=(R,B)=>{const W=Fo(R,;return Fa(W,a).map(G=>r&&!Ge(G.node)&&W.length>1?u(G,W[1],B).getOr(G):G)},[b,y]=bU(JB(e),o),{pass:E,fail:D}=jn(y,R=>R.top<o);return f(b,iT).orThunk(()=>f(D,dy)).orThunk(()=>f(E,dy))},yU=(e,n,o,r)=>{const a=(u,f)=>{const b=y=Ct(u.dom.childNodes,Rn(b));return f.fold(E=>{const D=Ct(y,;return lT(D,o,r,!0)}).orThunk(};return a(n,$.none())},U$=(e,n,o)=>{const r=Y.fromDom(e),a=Pl(r),f=Y.fromPoint(a,n,o).filter(b=>Oc(r,b)).getOr(r);return yU(r,f,n,o)},GO=(e,n,o)=>U$(e,n,o).filter(r=>sh(r.node)).map(r=>vU(r,n)),uT=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},CU=W$=SU=Z$=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=uT(e.getContentAreaContainer()),r=SU(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},wU=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),j$=(e,n)=>wU(CU(e),W$(e),Z$(e,n)),G$=e=>({target:e,srcElement:e}),xU=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...G$(o)}),EU=(e,n,o)=>{const r=cs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Oe,stopImmediatePropagation:Oe,stopPropagation:Oe,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...G$(n)}},qC=(e,n)=>{const o=Sz(e);return n==="dragstart"?(AO(o),m$(o)):n==="drop"?(gz(o),RO(o)):(hz(o),bz(o)),o},TU=(e,n,o,r)=>{const a=qC(o,e);return Jn(r)?EU(e,n,a):xU(e,r,n,a)},dT=32,q$=100,mT=8,fT=16,K$=zn,kU=vk(K$,la),_U=gT=(e,n,o)=>Xt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Y$=X$=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},hT=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},J$=hT("left",-dT),Q$=hT("left",dT),AU=hT("top",-dT),eF=hT("top",dT),qO=(e,n,o,r,a,u,f,b,y,E,D,R)=>{let B=0,W=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(B=n.pageX+o-a),n.pageY+r>u&&(W=n.pageY+r-u),e.style.width=o-B+"px",e.style.height=r-W+"px";const G=y.clientHeight,z=y.clientWidth,q=f+y.getBoundingClientRect().top,se=b+y.getBoundingClientRect().left;D.on(ie=>{ie.intervalId.clear(),ie.dragging&&R&&(f+mT>=G?ie.intervalId.set(eF(E)):f-mT<=0?ie.intervalId.set(AU(E)):b+mT>=z?ie.intervalId.set(Q$(E)):b-mT<=0?ie.intervalId.set(J$(E)):q+fT>=window.innerHeight?ie.intervalId.set(eF(window)):q-fT<=0?ie.intervalId.set(AU(window)):se+fT>=window.innerWidth?ie.intervalId.set(Q$(window)):se-fT<=0&&ie.intervalId.set(J$(window)))})},pT=bT=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);pT(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Nu(Y.fromDom(o))},OU=e=>e.button===0,DU=tF=(e,n)=>o=>{if(OU(o)){const r=ao(n.dom.getParents(o.target),kU).getOr(null);if(_e(r)&&_U(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:BO(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:Y$(n,r,r.offsetWidth,r.offsetHeight),intervalId:gk(q$)})}}},RU=Z1=(e,n,o,r,a)=>{n==="dragstart"&&f$(r,e.dom.getOuterHTML(o));const u=TU(n,o,r,a);return e.dispatch(n,u)},nF=(e,n)=>{const o=Rp((a,u)=>RU(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=Z1(n,"dragstart",u.element,u.dataTransfer,a);if(_e(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,y=DU(u,j$(n,a));X$(u.ghost,n.getBody()),qO(u.ghost,y,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},NU=e=>{const n=e.getSel();if(_e(n)){const r=n.getRangeAt(0).startContainer;return Ge(r)?r.parentNode:r}else return null},MU=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(gT(n,NU(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();Z1(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{bT(n.dom,r.element),Sv(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}Z1(n,"dragend",n.getBody(),r.dataTransfer,o)}}),PU(e)},KO=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Z1(n,"dragend",r.element,r.dataTransfer),a=>Z1(n,"dragend",r.element,r.dataTransfer,a))}),PU(e)},BU=PU=$U=e=>{const n=Am(),o=Zo.DOM,r=document,a=tF(n,e),u=nF(n,e),f=MU(n,e),b=BU(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",,e.on("keydown",},FU=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(Re(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&cE(e,"Dropped file type is not supported"))}},o=r=e.on("init",},LU=e=>{$U(e),sb(e)&&FU(e)},oF=IU=xv=zn,sF=(e,n)=>A1(e.getBody(),n),HU=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=Yy(e,r,o.isBlock,()=>Eh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=E=D=gt=>{gt&&n.setRng(gt)},R=(gt,ke,we,Ie=!0)=>e.dispatch("ShowCaret",{target:ke,direction:gt,before:we}).isDefaultPrevented()?null:(Ie&&n.scrollIntoView(ke,gt===-1),a.show(we,ke)),B=W=()=>{e.on("click",,e.on("blur NewBlock",be),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",!0),e.on("mousedown",ke=>{const we=ke.target;if(we!==r&&we.nodeName!=="HTML"&&!o.isChildOf(we,r)||!c7(e,ke.clientX,ke.clientY))return;be(),Qe();const Ie=sF(e,we);xv(Ie)?(ke.preventDefault(),iv(e,Ie).each(ae)):GO(r,ke.clientX,ke.clientY).each(xt=>{ke.preventDefault();const $t=R(1,xt.node,xt.position===W1.Before,!1);D($t),bm(Ie)?Ie.focus():e.getBody().focus()})}),e.on("keypress",,e.on("GetSelectionRange",ke=>{let we=ke.range;if(b){if(!b.parentNode){b=null;return}we=we.cloneRange(),we.selectNode(b),ke.range=we}}),e.on("SetSelectionRange",;const gt=ke=>Et(ke)&&ke.id==="mcepastebin";e.on("AfterSetSelectionRange",ke=>{const we=ke.range,Ie=we.startContainer.parentElement;!z(we)&&!gt(Ie)&&Qe(),y(Ie)||be()}),LU(e),oF(e),IU(e)},G=z=gt=>G(gt.startContainer)||G(gt.endContainer),q=gt=>{const ke=e.schema.getVoidElements(),we=o.createRng(),Ie=gt.startContainer,xt=gt.startOffset,$t=gt.endContainer,Tn=gt.endOffset;return Gt(ke,Ie.nodeName.toLowerCase())?xt===0?we.setStartBefore(Ie):we.setStartAfter(Ie):we.setStart(Ie,xt),Gt(ke,$t.nodeName.toLowerCase())?Tn===0?we.setEndBefore($t):we.setEndAfter($t):we.setEnd($t,Tn),we},se=(gt,ke)=>{const we=Y.fromDom(e.getBody()),Ie=e.getDoc(),xt=Sa(we,"#"+u).getOrThunk(()=>{const wn=Y.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ie);return qo(wn,"id",u),Qs(we,wn),wn}),$t=o.createRng();yd(xt),yo(xt,[Y.fromText(oo,Ie),Y.fromDom(ke),Y.fromText(oo,Ie)]),$t.setStart(xt.dom.firstChild,1),$t.setEnd(xt.dom.lastChild,0),Nc(xt,{top:o.getPos(gt,e.getBody()).y+"px"}),Yw(xt);const Tn=n.getSel();return Tn&&(Tn.removeAllRanges(),Tn.addRange($t)),$t},ie=gt=>{const ke=gt.cloneNode(!0),we=e.dispatch("ObjectSelected",{target:gt,targetClone:ke});if(we.isDefaultPrevented())return null;const Ie=se(gt,we.targetClone),xt=Y.fromDom(gt);return le(Jr(Y.fromDom(e.getBody()),`*[${f}]`),,o.getAttrib(gt,f)||gt.setAttribute(f,"1"),b=gt,Qe(),Ie},ae=(gt,ke)=>{if(!gt)return null;if(gt.collapsed){if(!z(gt)){const $t=ke?1:-1,Tn=Im($t,r,gt),wn=Tn.getNode(!ke);if(_e(wn)){if(sh(wn))return R($t,wn,ke?!Tn.isAtEnd():!1,!1);if(Ta(wn)&&zn(wn.nextSibling)){const Vo=o.createRng();return Vo.setStart(wn,0),Vo.setEnd(wn,0),Vo}}const _o=Tn.getNode(ke);if(_e(_o)){if(sh(_o))return R($t,_o,ke?!1:!Tn.isAtEnd(),!1);if(Ta(_o)&&zn(_o.previousSibling)){const Vo=o.createRng();return Vo.setStart(_o,1),Vo.setEnd(_o,1),Vo}}}return null}let we=gt.startContainer,Ie=gt.startOffset;const xt=gt.endOffset;if(Ge(we)&&Ie===0&&xv(we.parentNode)&&(we=we.parentNode,Ie=o.nodeIndex(we),we=we.parentNode),!Et(we))return null;if(xt===Ie+1&&we===gt.endContainer){const $t=we.childNodes[Ie];if(E($t))return ie($t)}return null},be=()=>{b&&b.removeAttribute(f),Sa(Y.fromDom(e.getBody()),"#"+u).each(uo),b=null},He=Qe=()=>{a.hide()};return ag(e)||W(),{showCaret:R,showBlockCaretContainer:B,hideFakeCaret:Qe,destroy:He}},VU=rF=YO=(e,n,o,r,a,u,f=!1)=>{const b=rF(e,n,o,r,f),y=rF(e,n,a,u,f);return{start:b,end:y}},XO=zU=UU=j1=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,Ge(n.firstChild)&&Cm(n.firstChild.data)),j1(e,r,o)}},vT=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Ge(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Ge(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),j1(e,a,o),a!==u&&j1(e,u,o))},KC=cF=aF=WU=e=>/^\s[^\s]/.test(e),JO=(e,n,o)=>{GA(n,0,n).each(a=>{const u=a.container;IE(u,o.start.length,n).each(;const f=Y.fromDom(u),b=Vl(f);WU(b)&&pi(f,b.slice(1))})},yT=(e,n)=>{const o=e.dom,r=n.pattern,a=zU(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=return KC(e,a).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(:r.type==="block-command"&&e.undoManager.transact(}),!0},iF=e=>Fo(e,(n,o)=>o.start.length-n.start.length),lF=(e,n)=>{const o=iF(e),r=n.replace(oo," ");return ao(o,a=>n.indexOf(a.start)===0||r.indexOf(a.start)===0)},ZU=(e,n,o,r)=>{var a;const u=e.dom,f=Gc(e);if(!u.is(n,f))return[];const b=(a=n.textContent)!==null&&a!==void 0?a:"";return lF(o.blockPatterns,b).map(y=>Ke.trim(b).length===y.start.length?[]:[{pattern:y,range:YO(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},jU=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();le(n,r=>yT(e,r)),e.selection.moveToBookmark(o)},QO=CT=uF=(e,n,o)=>{const r=zU(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),y=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(QO(e,n+"-end"),f),start:y.insertBefore(QO(e,n+"-start"),b)}},dF=YC=e=>e.start.length===0,GU=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},mF=(e,n,o,r)=>{const a=n.start;return OC(e,r.container,r.offset,GU(a),o).bind(f=>{var b,y;const E=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&y!==void 0?y:-1;if(E!==-1&&f.offset>=E+a.length){const R=e.createRng();return R.setStart(f.container,f.offset-a.length),R.setEnd(f.container,f.offset),$.some(R)}else{const R=f.offset-a.length;return LE(f.container,R,o).map(.filter(.orThunk(}})},qU=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),$.some(f)}return cf(o,r,a).bind(f=>mF(e,n,a,f).bind(y=>{var E;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return $.none();if(f.offset===0&&((E=y.endContainer.textContent)===null||E===void 0?void 0:E.length)===y.endOffset)return $.none()}return $.some(y)}))},KU=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return LE(b,y-o.pattern.end.length,n).bind(E=>{const D=YO(a,u,E.container,E.offset,b,y,r);if(YC(f))return $.some({matches:[{pattern:f,startRng:D,endRng:D}],position:E});{const R=ST(e,o.remainingPatterns,E.container,E.offset,n,r),B=R.getOr({matches:[],position:E}),W=B.position;return qU(a,f,W.container,W.offset,n,R.isNone()).map(z=>{const q=UU(a,u,z,r);return{matches:B.matches.concat([{pattern:f,startRng:q,endRng:D}]),position:em(z.startContainer,z.startOffset)}})}})},ST=(e,n,o,r,a,u)=>{const f=e.dom;return cf(o,r,f.getRoot()).bind(b=>{const y=aF(f,a,o,r);for(let E=0;E<n.length;E++){const D=n[E];if(!uc(y,D.end))continue;const R=n.slice();R.splice(E,1);const B=KU(e,a,{pattern:D,remainingPatterns:R,position:b},u);if(B.isNone()&&r>0)return ST(e,n,o,r-1,a,u);if(B.isSome())return B}return $.none()})},fF=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?le(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},gF=hF=eD=tD=YU=wT=(e,n,o,r,a,u)=>{const f=ST(e,a.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=ST(e,tD(a.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return YU(f,b)},pF=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=eD(o,n);le(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;YC(u.pattern)?gF(e,u.pattern,u.endMarker,b):hF(e,u.pattern,u.startMarker,u.endMarker,b),dF(o,u.endMarker,b),dF(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},XU=(e,n)=>{const o=e.selection.getRng();return KC(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=cF(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=wT(e,r,o.startContainer,u,f,!0),y=ZU(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{KT(e),pF(e,b),jU(e,y);const E=e.selection.getRng(),D=cf(E.startContainer,E.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),D.each(}),!0):!1}).getOr(!1)},bF=vF=JU=(e,n)=>vF(e,n,,QU=(e,n)=>vF(e,n,,eW=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>_a(ab(e),qk(e)),a=()=>jy(e);e.on("keydown",f=>{if(f.keyCode===13&&!yt.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&XU(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||a())&&bF(e,f)}};e.on("keyup",f=>{JU(o,f)&&u()}),e.on("keypress",f=>{QU(n,f)&&xl.setEditorTimeout(e,u)})},tW=e=>{eW(e)},nW=e=>{const n=Ke.each,o=yt.BACKSPACE,r=yt.DELETE,a=e.dom,u=e.selection,f=e.parser,b=ht.browser,y=b.isFirefox(),E=b.isChromium()||b.isSafari(),D=ht.deviceType.isiPhone()||ht.deviceType.isiPad(),R=ht.os.isMacOS()||ht.os.isiOS(),B=W=kt=>kt.isDefaultPrevented(),G=()=>{const kt=on=tt=>{const sn=kt(tt),Zn=a.createRng();Zn.selectNode(e.getBody());const Bo=kt(Zn);return sn===Bo};e.on("keydown",tt=>{const sn=tt.keyCode;if(!W(tt)&&(sn===r||sn===o)&&e.selection.isEditable()){const Zn=e.selection.isCollapsed(),Bo=e.getBody();if(Zn&&!Os(Y.fromDom(Bo))||!Zn&&!on(e.selection.getRng()))return;tt.preventDefault(),e.setContent(""),Bo.firstChild&&a.isBlock(Bo.firstChild)?e.selection.setCursorLocation(Bo.firstChild,0):e.selection.setCursorLocation(Bo,0),e.nodeChanged()}})},z=q=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",kt=>{let on;if(kt.target===e.getDoc().documentElement)if(on=u.getRng(),e.getBody().focus(),kt.type==="mousedown"){if(hc(on.startContainer))return;u.placeCaretAt(kt.clientX,kt.clientY)}else u.setRng(on)})},se=()=>{e.on("keydown",kt=>{if(!W(kt)&&kt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const on=u.getNode(),tt=on.previousSibling;if(on.nodeName==="HR"){a.remove(on),kt.preventDefault();return}tt&&tt.nodeName&&tt.nodeName.toLowerCase()==="hr"&&(a.remove(tt),kt.preventDefault())}}})},ie=()=>{Range.prototype.getClientRects||e.on("mousedown",kt=>{if(!W(kt)&&kt.target.nodeName==="HTML"){const on=e.getBody();on.blur(),xl.setEditorTimeout(e,()=>{on.focus()})}})},ae=()=>{const kt=cw(e);e.on("click",on=>{const tt=on.target;/^(IMG|HR)$/.test(tt.nodeName)&&a.isEditable(tt)&&(on.preventDefault(),e.selection.select(tt),e.nodeChanged()),tt.nodeName==="A"&&a.hasClass(tt,kt)&&tt.childNodes.length===0&&a.isEditable(tt.parentNode)&&(on.preventDefault(),u.select(tt))})},be=()=>{const kt=on=e.on("keypress",tt=>{let sn;return!W(tt)&&(tt.keyCode===8||tt.keyCode===46)&&on()?(sn=kt(),e.getDoc().execCommand("delete",!1),sn(),tt.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",},He=()=>{e.on("keydown",kt=>{if(!W(kt)&&kt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const on=u.getNode().previousSibling;if(on&&on.nodeName&&on.nodeName.toLowerCase()==="table")return kt.preventDefault(),!1}return!0})},Qe=()=>{e.on("keydown",kt=>{if(W(kt)||kt.keyCode!==yt.BACKSPACE)return;let on=u.getRng();const tt=on.startContainer,sn=on.startOffset,Zn=a.getRoot();let Bo=tt;if(!(!on.collapsed||sn!==0)){for(;Bo.parentNode&&Bo.parentNode.firstChild===Bo&&Bo.parentNode!==Zn;)Bo=Bo.parentNode;Bo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Bo),on=a.createRng(),on.setStart(tt,0),on.setEnd(tt,0),u.setRng(on))}})},gt=()=>{const kt=Wp(e)||e.on("BeforeExecCommand mousedown",kt)},ke=()=>{const kt=()=>{n(a.select("a:not([data-mce-block])"),on=>{var tt;let sn=on.parentNode;const Zn=a.getRoot();if((sn==null?void 0:sn.lastChild)===on){for(;sn&&!a.isBlock(sn);){if(((tt=sn.parentNode)===null||tt===void 0?void 0:tt.lastChild)!==sn||sn===Zn)return;sn=sn.parentNode}a.add(sn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",on=>{(on.type==="setcontent"||on.command==="mceInsertLink")&&kt()})},we=()=>{e.on("init",},Ie=kt=>{const on=kt.getBody(),tt=kt.selection.getRng();return tt.startContainer===tt.endContainer&&tt.startContainer===on&&tt.startOffset===0&&tt.endOffset===on.childNodes.length},xt=()=>{e.on("keyup focusin mouseup",kt=>{!yt.modifierPressed(kt)&&!Ie(e)&&u.normalize()},!0)},$t=Tn=wn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",kt=>{let on;kt.target.nodeName==="HTML"&&(on=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(on),e.selection.normalize(),e.nodeChanged())}))},_o=()=>{R&&e.on("keydown",kt=>{yt.metaKeyPressed(kt)&&!kt.shiftKey&&(kt.keyCode===37||kt.keyCode===39)&&(kt.preventDefault(),e.selection.getSel().modify("move",kt.keyCode===37?"backward":"forward","lineboundary"))})},Vo=()=>{e.on("click",kt=>{let on=kt.target;do if(on.tagName==="A"){kt.preventDefault();return}while(on=on.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},qs=Hc=()=>{f.addNodeFilter("br",kt=>{let on=kt.length;for(;on--;)kt[on].attr("class")==="Apple-interchange-newline"&&kt[on].remove()})},So=Oe,rt=()=>{if(!y||e.removed)return!1;const kt=e.selection.getSel();return!kt||!kt.rangeCount||kt.rangeCount===0},Nt=()=>{E&&(q(),ae(),qs(),z(),D&&(Tn(),wn(),Vo())),y&&(ie(),gt(),$t(),_o())},xn=()=>{e.on("drop",kt=>{var on;const tt=(on=kt.dataTransfer)===null||on===void 0?void 0:on.getData("text/html");j(tt)&&/^<img[^>]*>$/.test(tt)&&e.dispatch("dragend",new window.DragEvent("dragend",kt))})},Nn=()=>{Qe(),G(),ht.windowsPhone||xt(),E&&(q(),ae(),we(),qs(),He(),Hc(),D?(Tn(),wn(),Vo()):z()),y&&(se(),ie(),be(),gt(),ke(),$t(),_o(),He(),xn())};return ag(e)?Nt():Nn(),{refreshContentEditable:So,isHidden:rt}},nD=Zo.DOM,yF=(e,n)=>{const o=Y.fromDom(e.getBody()),r=m0(ml(o)),a=Y.fromTag("style");qo(a,"type","text/css"),Qs(a,Y.fromText(n)),Qs(r,a),e.on("remove",()=>{uo(a)})},oW=XC=e=>wo(e,n=>Jn(n)===!1),CF=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return XC({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:oW(e),sandbox_iframes:n("sandbox_iframes"),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},SF=sW=e=>{const n=e.options.get;return{...CF(e),...SF(e),...XC({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},rW=e=>{const n=td(CF(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=a.serializeStyle(a.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),Zy(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new Na("br",1))}}),n},cW=e=>{const n=aw(e);n&&xl.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},aW=e=>{const n=e.dom.getRoot();!e.inline&&(!Cb(e)||e.selection.getStart(!0)===n)&&ma(n).each(},xT=e=>{e.bindPendingEventDelegates(),e.initialized=!0,g1(e),e.focus(!0),aW(e),e.nodeChanged({initial:!0});const n=zk(e);te(n)&&n.call(e,e),cW(e)},oD=iW=(e,n,o)=>{const{pass:r,fail:a}=jn(n,,f=[...r.map(b=>{const y=tinymce.Resource.get(j3(b));return j(y)?Promise.resolve(oD(e).loadRawCss(b,y)):Promise.resolve()}),oD(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},wF=e=>{const n=oD(e),o=QS(e),r=e.contentCSS,a=u=if(e.contentStyles.length>0){let y="";Ke.each(e.contentStyles,E=>{y+=E+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(iW(e,r,o)).then(u).catch(u),b=nb(e);return b&&yF(e,b),f},lW=e=>{const n=e.getDoc(),o=e.getBody();Wm(e),Wk(e)||(n.body.spellcheck=!1,nD.setAttrib(o,"spellcheck","false")),e.quirks=nW(e),w_(e);const r=Mk(e);r!==void 0&&(o.dir=r);const a=iw(e);a&&e.on("BeforeSetContent",,e.on("SetContent",,e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},uW=sD=e=>{e.removed!==!0&&(uW(e),xT(e))},dW=e=>{let n=!1;const o=setTimeout(500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},xF=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(nD.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Wp(e),e._editableRoot=Qi(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&nD.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=T7(e),e.schema=Dd(SF(e)),e.dom=Zo(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Pd(e),referrerPolicy:_n(e),onSetAttrib:force_hex_color:nh(e)}),e.parser=rW(e),e.serializer=tB(sW(e),e),e.selection=Nh(e.dom,e.getWin(),e.serializer,e),e.annotator=p2(e),e.formatter=Y3(e),e.undoManager=X3(e),e._nodeChangeDispatcher=new mz(e),e._selectionOverrides=HU(e),ZH(e),rU(e),Sj(e),ag(e)||(z$(e),tW(e));const a=dz(e);L1(e,a),KH(e),od(e),nU(e);const u=C8(e);lW(e),u.fold(()=>{const f=dW(e);wF(e).then(()=>{sD(e),f()})},},mW=We,EF=(e,n,o)=>yg(e,n,mW,o),rD=Zo.DOM,TF=(e,n,o,r)=>{const a=Y.fromTag("iframe");return r.each(u=>qo(a,"tabindex",u)),ji(a,o),ji(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Su(a,"tox-edit-area__iframe"),a},fW=gW=(e,n)=>{const o=e.translate("Rich Text Area"),r=al(Y.fromDom(e.getElement()),"tabindex").bind(Va),a=TF(e.id,o,_y(e),r).dom;a.onload=e.contentAreaContainer=n.iframeContainer,e.iframeElement=a,e.iframeHTML=fW(e),rD.add(n.iframeContainer,a)},kF=e=>{const n=e.iframeElement,o=if(Xk(e)||ht.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=EF(Y.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},JC=(e,n)=>{gW(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=rD.isHidden(n.editorContainer)),e.getElement().style.display="none",rD.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,kF(e)},_F=Zo.DOM,AF=(e,n,o)=>{const r=M1.get(o),a=M1.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Ke.trim(o),r&&Ke.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,te(u.init)&&(u.init(e,a),n.push(o))}catch(u){fB(e,o,u)}}},hW=e=>e.replace(/^\-/,""),pW=e=>{const n=[];le(Zp(e),o=>{AF(e,n,hW(o))})},bW=vW=OF=yW=DF=RF=CW=NF=e=>{const n=e.getElement();return e.inline?RF(null):CW(n)},SW=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,j(Xg(e))?yW(e):te(Xg(e))?DF(e):NF(e)},wW=xW=async e=>{e.dispatch("ScriptsLoaded"),bW(e),vW(e),OF(e),pW(e);const n=await SW(e);wW(e,$.from(n.api).getOr({})),e.editorContainer=n.editorContainer,h7(e),e.inline?xF(e):JC(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},G1=Zo.DOM,MF=EW=(e,n)=>{const o=By(n),r=qc(n);if(!bl.hasCode(o)&&o!=="en"){const a=ro(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{gC(n,a,o)})}},BF=(e,n)=>{const o=Xg(e);if(j(o)&&!MF(o)&&!Gt(ig.urls,o)){const r=$k(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;ig.load(o,a).catch(()=>{d7(e,a,o)})}},cD=(e,n)=>{const o=Fy(e);if(o!=="plugin"&&!Gt(su.urls,o)){const r=tw(e),a=j(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;su.load(o,a).catch(()=>{mB(e,a,o)})}},PF=aD=TW=(e,n,o)=>{const r=aD(n,"default",o),a=PF(n).orThunk(;le(As([r,a]),u=>{e.add(u.url).catch(()=>{u7(n,u.url,u.name.getOrUndefined())})})},kW=(e,n)=>{const o=(r,a)=>{M1.load(r,a).catch(};dt(Bm(e),,le(Zp(e),r=>{r=Ke.trim(r),r&&!M1.urls[r]&&!MF(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},_W=$F=FF=(e,n)=>{const o=hr.ScriptLoader,r=()=>{!e.removed&&_W(e)&&$F(e)&&xW(e)};BF(e,n),cD(e,n),EW(o,e),TW(o,e,n),kW(e,n),o.loadQueue().then(r,r)},AW=OW=e=>{const n=e.id;bl.setCode(By(e));const o=if(!ei.Event.domLoaded){G1.bind(window,"ready",o);return}if(!e.getElement())return;const r=Y.fromDom(e.getElement()),a=im(r);e.on("remove",,e.ui.styleSheetLoader=AW(r,e),Ly(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||G1.getParent(n,"form");u&&(e.formElement=u,Lk(e)&&!y0(e.getElement())&&(G1.insertAfter(G1.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=G1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),rw(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=),e.windowManager=dB(e),e.notificationManager=Z3(e),e_(e)&&e.on("GetContent",,Wu(e)&&e.on("submit",,zp(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),FF(e,e.suffix)},iD=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),__(e,n))},ET=e=>e._editableRoot,TT=(e,n)=>({sections:ze(e),options:ze(n)}),af=Do().deviceType,QC=af.isPhone(),Ev=af.isTablet(),Tv=DW=(e,n)=>{const o=Uc(n,(r,a)=>Re(e,a));return TT(o.t,o.f)},RW=kT=NW=lD=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:xo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),_T=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Ke.extend({},e.external_plugins,r):r},Uh=q1=LF=(e,n,o,r)=>{const a=Tv(o.forced_plugins),u=Tv(r.plugins),f=NW(n,"mobile"),b=f.plugins?Tv(f.plugins):u,y=q1(e,n,u,b),E=Uh(a,y);return Ke.extend(r,{forced_plugins:a,plugins:E})},MW=BW=(e,n,o,r,a)=>{var u;const f=e?{mobile:lD((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=DW(["mobile"],$C(f,a)),y=Ke.extend(o,r,b.options(),MW(e,b)?RW(b,"mobile"):{},{external_plugins:_T(r,b.options())});return LF(e,b,r,y)},PW=$W=(e,n)=>N8(e,n),FW=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{le("left,center,right,justify".split(","),,r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},LW=IF=e=>{FW(e),LW(e)},IW=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch(a){r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ht.os.isMacOS()||ht.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:a,type:"error"})}}})},HW=(e,n,o,r)=>{const a=Y.fromDom(e.getRoot());return Lb(a,Ce.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Ib(a,Ce.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},VW=e=>{if(typeof e!="string"){const n=Ke.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},zj=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?HW(r,o.getRng(),n,e.schema):n},AT=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=VW(n);v3(e,{...r,content:zj(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=D8(e,a.content,r);Gx(e,u,a),e.addVisual()})}},uD=e=>{e.editorCommands.addCommands({mceCleanup:insertImage:insertHorizontalRule:insertText:insertHTML:(n,o,r)=>{AT(e,r)},mceInsertContent:(n,o,r)=>{AT(e,r)},mceSetContent:mceReplaceContent:mceNewDocument:)},zW={"font-size":"size","font-family":"face"},UW=Ua("font"),HF=(e,n,o)=>{const r=a=u=>Qn(Y.fromDom(n),u);return sg(Y.fromDom(o),u=>r(u),a)},WW=VF=zF=e=>(n,o)=>$.from(o).map(Y.fromDom).filter(qr).bind(r=>HF(e,n,r.dom).or(VF(e,r.dom))).getOr(""),dD=zF("font-size"),ZW=k(WW,zF("font-family")),jW=GW=e=>$.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?$.none():$.from(e.selection.getStart(!0))}),qW=(e,n)=>GW(e).orThunk(Ne(jW,e)).map(Y.fromDom).filter(qr).bind(n),OT=(e,n)=>qW(e,mn($.some,n)),DT=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Jk(e),a=Qk(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},UF=e=>{const n=e.split(/\s*,\s*/);return De(n,o=>o.indexOf(" ")!==-1&&!(is(o,'"')||is(o,"'"))?`'${o}'`:o).join(",")},mD=KW=e=>OT(e,n=>ZW(e.getBody(),n.dom)).getOr(""),Uj=Wj=YW=e=>OT(e,n=>{const o=Y.fromDom(e.getBody()),r=sg(n,u=>ar(u,"line-height"),Ne(Qn,o)),a=return r.getOrThunk(a)}).getOr(""),WF=XW=e=>{const n=e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":BackColor:FontName:(o,r,a)=>{mD(e,a)},FontSize:(o,r,a)=>{Uj(e,a)},LineHeight:(o,r,a)=>{WF(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:mceBlockQuote:FormatBlock:mceToggleFormat:)},JW=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:,"state"),e.editorCommands.addQueryValueHandler("FontName",()=>KW(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Wj(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>YW(e))},QW=e=>{XW(e),JW(e)},Zj=jj=e=>{e.editorCommands.addCommands({Indent:()=>{WH(e)},Outdent:()=>{BA(e)}}),e.editorCommands.addCommands({Outdent:()=>OE(e)},"state")},ZF=e=>{const n=(o,r,a)=>{const u=j(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");Ve(u)&&j(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},jF=eZ=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},tZ=nZ=(e,n,o,r)=>{const a=e.dom,u=f=u(n)?n:a.getParent(r,u,o);return $.from(f).map(Y.fromDom)},oZ=(e,n)=>{const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=I1(o,u);if(!f||!f.isContentEditable)return;const b=n?mr:Yi,y=Gc(e);nZ(e,a,f,u).each(E=>{const D=bO(e,u,E.dom,f,!1,y);b(E,Y.fromDom(D)),e.selection.setCursorLocation(D,0),e.dispatch("NewBlock",{newBlock:D}),VC(e,"insertParagraph")})},Gj=e=>oZ(e,!0),qj=e=>oZ(e,!1),sZ=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Gj(e)},InsertNewBlockAfter:()=>{qj(e)}})},Kj=rZ=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>Et(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:selectAll:)},K1=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r!=null?r:e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:mceFocus:(n,o,r)=>{$6(e,r===!0)},mceToggleVisualAid:)},fD=e=>{IF(e),IW(e),Zj(e),rZ(e),uD(e),ZF(e),jj(e),sZ(e),Kj(e),tZ(e),QW(e),K1(e)},RT=["toggleview"],gD=class hD{xecCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():w6(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return te(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!gD(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return te(r)?r(o):!1}dCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r!=null?r:this.editor,f,b)}ddQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}}const Wh="data-mce-contenteditable",cZ=pD=NT=aZ=e=>{le(Jr(e,'*[contenteditable="true"]'),},Zh=e=>{le(Jr(e,`*[${Wh}="true"]`),},iZ=GF=lZ=(e,n)=>{const o=Y.fromDom(e.getBody());cZ(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),iZ(e),e.readonly=!0,NT(o,!1),aZ(o)):(e.readonly=!1,e.hasEditableRoot()&&NT(o,!0),Zh(o),pD(e,"StyleWithCSS",!1),pD(e,"enableInlineTableEditing",!1),pD(e,"enableObjectResizing",!1),sR(e)&&e.focus(),GF(e),e.nodeChanged())},lf=e=>e.readonly,qF=uZ=dZ=e=>e.type==="click",KF=["copy"],mZ=e=>Re(KF,e.type),fZ=(e,n)=>fl(n,"a",r=>Qn(r,Y.fromDom(e.getBody()))).bind(r=>al(r,"href")),gZ=(e,n)=>{if(dZ(n)&&!yt.metaKeyPressed(n)){const o=Y.fromDom(n.target);fZ(e,o).each(}else mZ(n)&&e.dispatch(n.type,n)},bD=hZ=Ke.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class vD{patch(n,o){const r=n.toLowerCase(),a=Bg(r,o!=null?o:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),a.isImmediatePropagationStopped())return a;if(y.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=ye),o){const u={func:o,removed:!1};a&&Ke.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let E=this.bindings[y];E||(E=[],this.toggleEvent(y,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[y]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return dt(this.bindings,,this;if(f){if(!o)f.length=0;else{const b=jn(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,le(b.pass,}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else dt(this.bindings,,this.bindings={};return this}as(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const tr=yD={firedispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Bg(e.toLowerCase(),n!=null?n:{},r);const a=tr(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},onoff(e,n){return tr(this).off(e,n)},oncehasEventListeners,MT=Zo.DOM;let fg;const eS=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Mm(e);return o?(e.eventRoot||(e.eventRoot=MT.select(o)[0]),e.eventRoot):e.getBody()},CD=YF=(e,n,o)=>{CD(e)?e.dispatch(n,o):lf(e)&&gZ(e,o)},XF=JF={...yD,bindPendingEventDelegatestoggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?XF(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(eS(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents,pZ=bZ=vZ=e=>j(e.processor),Yj=(e,n)=>{const o=Sr(n.message)?"":`. ${n.message}`;return e+o},QF=e=>e.valid,jh=sm=(e,n,o)=>{if(!Jn(n)){const r=jh(n,o);if(QF(r))return r.value}},yZ=(e,n)=>{const o={},r={},a=(R,B,W)=>{const G=jh(B,W);return QF(G)?(r[R]=G.value,!0):!1},u=(R,B)=>{const W=vZ(B)?bZ(B.processor):B.processor,G=sm(R,B.default,W);o[R]={...B,default:G,processor:W},xo(r,R).orThunk(()=>xo(n,R)).each(q=>a(R,q,W))},f=R=>Gt(o,R);return{register:u,isRegistered:f,get:set:(R,B)=>{if(f(R)){const W=o[R];return W.immutable?!1:a(R,B,W.processor)}else return!1},unset:isSet:R=>Gt(r,R)}},CZ=["design","readonly"],e6=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&lZ(e,u.editorReadOnly),n.set(r),y2(e,r)},SZ=wZ=(e,n,o)=>{if(Re(CZ,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:}},xZ=e=>{const n=Ss("design"),o=Ss({design:{activate:Oe,deactivate:Oe,editorReadOnly:!1},readonly:{activate:Oe,deactivate:Oe,editorReadOnly:!0}});return uZ(e),bD(e),{isReadOnly:()=>lf(e),set:r=>SZ(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(wZ(o.get(),r,a))}}},SD=Ke.each,wD=Ke.explode,EZ={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},TZ=Ke.makeMap("alt,ctrl,shift,meta,access"),kZ=e=>e in TZ,_Z=e=>{const n={},o=ht.os.isMacOS()||ht.os.isiOS();SD(wD(e.toLowerCase(),"+"),u=>{kZ(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=EZ[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in TZ)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class t6{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(SD(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}emove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?Ke.isArray(r)?r}FunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}const AZ=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},y=E=return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(a,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:E,getAll:},OZ=()=>{const e=AZ();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Y1=Zo.DOM,DZ=Ke.extend,RZ=Ke.each;class BT{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,DZ(this,JF);const a=this;this.id=n,this.hidden=!1;const u=PW(r.defaultOptions,o);this.options=yZ(a,u),qS(a);const f=this.options.get;f("deprecation_warnings")&&pj(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const E=_n(a);E&&(hr.ScriptLoader._setReferrerPolicy(E),Zo.DOM.styleSheetLoader._setReferrerPolicy(E));const D=Qg(a);_e(D)&&Zo.DOM.styleSheetLoader._setContentCssCors(D),Zc.languageLoad=f("language_load"),Zc.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new nu(Ay(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ly(a),this.hasVisual=Ik(a),this.shortcuts=new t6(this),this.editorCommands=new hD(this),fD(this);const R=f("cache_suffix");R&&(ht.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:OZ(),styleSheetLoader:void 0,show:Oe,hide:Oe,setEnabled:Oe,isEnabled:We},this.mode=xZ(a),r.dispatch("SetupEditor",{editor:this});const B=Iy(a);te(B)&&B.call(a,a)}render(){OW(this)}asFocus(){return Eh(this)}etParam(n,o,r){const a=this.options;return a.isRegistered(n)||(_e(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:We,default:o})),!a.isSet(n)&&!Jn(o)?o:a.get(n)}hasPlugin(n,o){return Re(Zp(this),n)?o?M1.get(n)!==void 0:!0:!1}ddCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}ryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}idden(){return this.hidden}oad(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=y0(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,y0(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Y1.getParent(o.id,"form");b&&RZ(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}etContent(n){n===void 0?z3(this,this.startContent,{format:"raw"}):z3(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}tContentAreaContainer(){return this.contentAreaContainer}Body(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=Uk(a);if(te(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||Ve(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new nu(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){$W(this,n)}setEditableRoot(n){iD(this,n)}oadImages(){return this.editorUpload.uploadImages()}const kv=Zo.DOM,PT=Ke.each;let n6=!1,$T,Bi=[];const FT=e=>{const n=e.type;PT(Gh.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},o6=s6=NZ=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(s6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},MZ=document.compatMode!=="CSS1Compat",Gh={...yD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.2",releaseDate:"2023-12-11",i18n:bl,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=nu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new nu(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new nu(e.baseURL),e.suffix=o,O6(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&dt(r,},init(e){const n=this;let o;const r=Ke.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=u=f=D=>{const R=e[D];if(!!R)return R.apply(n,[])},b=let y=D=>{o=D};const E=()=>{let D=0;const R=[];let B;const W=kv.unbind(window,"ready",E),f("onpageload"),B=Hi(b(e)),Ke.each(B,,B=Ke.grep(B,,B.length===0?y([]):PT(B,G=>{a(e,G)?hC("Could not initialize inline editor on invalid inline target element",G):W(u(G),e,G)})};return kv.bind(window,"ready",E),new Promise(},get(e){return arguments.length===0?Bi.slice(0):j(e)?ao(Bi,n=>n.id===e).getOr(null):go(e)&&Bi[e]?Bi[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Bi.push(e),o6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),$T||($T=window.addEventListener("beforeunload",$T))),e},createEditorremove(e){const n=this;let o;if(!e){for(let r=Bi.length-1;r>=0;r--)n.remove(Bi[r]);return}if(j(e)){PT(kv.select(e),;return}return o=e,re(n.get(o.id))?null:(s6(o)&&n.dispatch("RemoveEditor",{editor:o}),Bi.length===0&&window.removeEventListener("beforeunload",$T),o.remove(),o6(Bi.length>0),o)},execCommand(e,n,o){var r;const a=this,u=Ve(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new BT(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:addI18n:(e,n)=>{bl.add(e,n)},translate:e=>bl.translate(e),setActive_setBaseUrl;Gh.setup();const BZ=(()=>{const e=Am(),n=o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),r6=Math.min,X1=Math.max,LT=Math.round,c6=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,E=(o||"").split("");return E[0]==="b"&&(a+=y),E[1]==="r"&&(r+=b),E[0]==="c"&&(a+=LT(y/2)),E[1]==="c"&&(r+=LT(b/2)),E[3]==="b"&&(a-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(a-=LT(f/2)),E[4]==="c"&&(r-=LT(u/2)),_v(r,a,u,f)},PZ=$Z=(e,n,o)=>_v(e.x-n,e.y-o,e.w+n*2,e.h+o*2),FZ=LZ=_v=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),a6={inflate:$Z,relativePosition:c6,findBestRelativePosition:PZ,intersect:FZ,clamp:LZ,create:_v,fromClientRect:e=>_v(e.left,e.top,e.width,e.height)},IZ=(e,n,o=1e3)=>{let r=!1,a=null;const u=E=>(...D)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),E.apply(null,D))},f=u(e),b=u(n);return{start:(...E)=>{!r&&a===null&&(a=setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},HZ=(()=>{const e={},n={},o={};return{load:(y,E)=>{const D=`Script at URL "${E}" failed to load`,R=`Script at URL "${E}" did not call \`tinymce.Resource.add('${y}', data)\` within 1 second`;if(e[y]!==void 0)return e[y];{const B=new Promise((W,G)=>{const z=IZ(W,G);n[y]=z.resolve,hr.ScriptLoader.loadScript(E).then(()=>z.start(R),()=>z.reject(D))});return e[y]=B,B}},add:(y,E)=>{n[y]!==void 0&&(n[y](E),delete n[y]),e[y]=Promise.resolve(E),o[y]=E},has:get:y=>o[y],unload:y=>{delete e[y]}}})(),VZ=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:key:r=>n[r],removeItem:clear:length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let tS;try{const e="__storage_test__";tS=window.localStorage,tS.setItem(e,e),tS.removeItem(e)}catch(e){tS=VZ()}var zZ=tS;const UZ={geom:{Rect:a6},util:{Delay:xl,Tools:Ke,VK:yt,URI:nu,EventDispatcher:vD,Observable:yD,I18n:bl,LocalStorage:zZ,ImageUploader:x7},dom:{EventUtils:ei,TreeWalker:Wo,TextSeeker:Om,DOMUtils:Zo,ScriptLoader:hr,RangeUtils:I,Serializer:tB,StyleSheetLoader:Kv,ControlSelection:GD,BookmarkManager:Yf,Selection:Nh,Event:ei.Event},html:{Styles:M0,Entities:Tm,Node:Na,Schema:Dd,DomParser:td,Writer:vR,Serializer:Th},Env:ht,AddOnManager:Zc,Annotator:p2,Formatter:Y3,UndoManager:X3,EditorCommands:hD,WindowManager:dB,NotificationManager:Z3,EditorObservable:JF,Shortcuts:t6,Editor:BT,FocusManager:JD,EditorManager:Gh,DOM:Zo.DOM,ScriptLoader:hr.ScriptLoader,PluginManager:M1,ThemeManager:ig,ModelManager:su,IconManager:mC,Resource:HZ,FakeClipboard:BZ,trim:Ke.trim,isArray:Ke.isArray,is:Ke.is,toArray:Ke.toArray,makeMap:Ke.makeMap,each:Ke.each,map:Ke.map,grep:Ke.grep,inArray:Ke.inArray,extend:Ke.extend,walk:Ke.walk,resolve:Ke.resolve,explode:Ke.explode,_addCacheSuffix:Ke._addCacheSuffix},i6=Ke.extend(Gh,UZ),l6=e=>{try{ha.exports=e}catch(n){}};((i6),l6(i6)})()})(yG);const ZG=yG.exports;(function(){var ha=tinymce.util.Tools.resolve("tinymce.ModelManager");const wc=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},ac=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&wc(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},ps=l=>m=>ac(m)===l,yr=l=>m=>typeof m===l,nr=l=>m=>l===m,io=ps("string"),nt=ps("object"),bs=ps("array"),ea=nr(null),Hn=yr("boolean"),Is=nr(void 0),Ds=l=>l==null,rs=l=>!Ds(l),Es=yr("function"),to=yr("number"),Tt=()=>{},Rs=(l,m)=>(...h)=>l(m.apply(null,h)),Ht=(l,m)=>h=>l(m(h)),j=l=>()=>l,Ve=l=>l,Xo=(l,m)=>l===m;function hn(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const re=l=>m=>!l(m),bt=l=>()=>{throw new Error(l)},Jn=l=>l(),Xt=j(!1),_e=j(!0);class te{constructor(m,h){this.tag=m,this.value=h}static some(m){return new te(!0,m)}static none(){return te.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?te.some(m(this.value)):te.none()}bind(m){return this.tag?m(this.value):te.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:te.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m!=null?m:"Called getOrDie on None")}static from(m){return rs(m)?te.some(m):te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}te.singletonNone=new te(!1);const go=Array.prototype.slice,Xe=Array.prototype.indexOf,Oe=Array.prototype.push,k=(l,m)=>Xe.call(l,m),mn=(l,m)=>k(l,m)>-1,ze=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const x=l[h];if(m(x,h))return!0}return!1},pn=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},Ot=(l,m)=>{const h=l.length,v=new Array(h);for(let x=0;x<h;x++){const _=l[x];v[x]=m(_,x)}return v},Ne=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const x=l[h];m(x,h)}},Rn=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},cs=(l,m)=>{const h=[],v=[];for(let x=0,_=l.length;x<_;x++){const M=l[x];(m(M,x)?h:v).push(M)}return{pass:h,fail:v}},it=(l,m)=>{const h=[];for(let v=0,x=l.length;v<x;v++){const _=l[v];m(_,v)&&h.push(_)}return h},It=(l,m,h)=>(Rn(l,(v,x)=>{h=m(h,v,x)}),h),ye=(l,m,h)=>(Ne(l,(v,x)=>{h=m(h,v,x)}),h),We=(l,m,h)=>{for(let v=0,x=l.length;v<x;v++){const _=l[v];if(m(_,v))return te.some(_);if(h(_,v))break}return te.none()},$=(l,m)=>We(l,m,Xt),Ts=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const x=l[h];if(m(x,h))return te.some(h)}return te.none()},Kn=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!bs(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);Oe.apply(m,l[h])}return m},lo=(l,m)=>Kn(Ot(l,m)),no=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const x=l[h];if(m(x,h)!==!0)return!1}return!0},Ns=l=>{const m=go.call(l,0);return m.reverse(),m},Re=(l,m)=>{const h={};for(let v=0,x=l.length;v<x;v++){const _=l[v];h[String(_)]=m(_,v)}return h},st=(l,m)=>{const h=go.call(l,0);return h.sort(m),h},De=(l,m)=>m>=0&&m<l.length?te.some(l[m]):te.none(),le=l=>De(l,0),jt=l=>De(l,l.length-1),jn=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return te.none()},Ct=Object.keys,Ms=Object.hasOwnProperty,Cn=(l,m)=>{const h=Ct(l);for(let v=0,x=h.length;v<x;v++){const _=h[v],M=l[_];m(M,_)}},Cr=(l,m)=>ao(l,(h,v)=>({k:v,v:m(h,v)})),ao=(l,m)=>{const h={};return Cn(l,(v,x)=>{const _=m(v,x);h[_.k]=_.v}),h},ks=l=>(m,h)=>{l[h]=m},Ii=(l,m,h,v)=>{Cn(l,(x,_)=>{(m(x,_)?h:v)(x,_)})},Wr=(l,m)=>{const h={};return Ii(l,m,ks(h),Tt),h},vs=(l,m)=>{const h=[];return Cn(l,(v,x)=>{h.push(m(v,x))}),h},Uo=l=>vs(l,Ve),Ol=(l,m)=>$o(l,m)?te.from(l[m]):te.none(),$o=(l,m)=>Ms.call(l,m),Fo=(l,m)=>$o(l,m)&&l[m]!==void 0&&l[m]!==null,li=Bs=typeof window<"u"?window:Function("return this;")(),zc=(l,m)=>{let h=m!=null?m:Bs;for(let v=0;v<l.length&&h!==void 0&&h!==null;++v)h=h[l[v]];return h},ur=(l,m)=>{const h=l.split(".");return zc(h,m)},Fa=(l,m)=>ur(l,m),Hi=(l,m)=>{const h=Fa(l,m);if(h==null)throw new Error(l+" not available on this browser");return h},Ys=Object.getPrototypeOf,du=l=>Hi("HTMLElement",l),dt=l=>{const m=ur("ownerDocument.defaultView",l);return nt(l)&&(du(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Ys(l).constructor.name))},Gn=8,$r=9,ic=11,mu=1,Uc=3,wo=l=>l.dom.nodeName.toLowerCase(),ta=l=>l.dom.nodeType,pa=l=>m=>ta(m)===l,xo=l=>ta(l)===Gn||wo(l)==="#comment",Gt=l=>Zr(l)&&dt(l.dom),Zr=pa(mu),La=pa(Uc),Vi=pa($r),fu=pa(ic),Fr=l=>m=>Zr(m)&&wo(m)===l,Xs=(l,m,h)=>{if(io(h)||Hn(h)||to(h))l.setAttribute(m,h+"");else throw new Error("Attribute value was not simple")},as=(l,m,h)=>{Xs(l.dom,m,h)},na=(l,m)=>{const h=l.dom;Cn(m,(v,x)=>{Xs(h,x,v)})},gu=(l,m)=>{Cn(m,(h,v)=>{h.fold(()=>{Jo(l,v)},})},ui=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},lc=(l,m)=>te.from(ui(l,m)),Jo=(l,m)=>{l.dom.removeAttribute(m)},xc=l=>ye(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),di=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const x="HTML does not have a single root node";throw new Error(x)}return Ia(v.childNodes[0])},fd=(l,m)=>{const v=(m||document).createElement(l);return Ia(v)},ba=(l,m)=>{const v=(m||document).createTextNode(l);return Ia(v)},Ia=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},de={fromHtml:di,fromTag:fd,fromText:ba,fromDom:Ia,fromPoint:(l,m,h)=>te.from(l.dom.elementFromPoint(m,h)).map(Ia)},Lr=(l,m)=>{const h=l.dom;if(h.nodeType!==mu)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Ha=l=>l.nodeType!==mu&&l.nodeType!==$r&&l.nodeType!==ic||l.childElementCount===0,oa=(l,m)=>{const h=m===void 0?document:m.dom;return Ha(h)?[]:Ot(h.querySelectorAll(l),de.fromDom)},Dl=(l,m)=>{const h=m===void 0?document:m.dom;return Ha(h)?te.none():te.from(h.querySelector(l)).map(de.fromDom)},Eo=(l,m)=>l.dom===m.dom,gd=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},hu=Lr,zi=l=>de.fromDom(l.dom.ownerDocument),rl=l=>Vi(l)?l:zi(l),Js=l=>de.fromDom(rl(l).dom.documentElement),is=l=>de.fromDom(rl(l).dom.defaultView),uc=l=>te.from(l.dom.parentNode).map(de.fromDom),Ec=l=>te.from(l.dom.parentElement).map(de.fromDom),mi=(l,m)=>{const h=Es(m)?m:Xt;let v=l.dom;const x=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const _=v.parentNode,M=de.fromDom(_);if(x.push(M),h(M)===!0)break;v=_}return x},cl=l=>te.from(l.dom.previousSibling).map(de.fromDom),Ui=l=>te.from(l.dom.nextSibling).map(de.fromDom),ro=l=>Ot(l.dom.childNodes,de.fromDom),Sr=(l,m)=>{const h=l.dom.childNodes;return te.from(h[m]).map(de.fromDom)},sa=l=>Sr(l,0),Va=(l,m)=>{uc(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},Tc=(l,m)=>{Ui(l).fold(()=>{uc(l).each(x=>{Oo(x,m)})},v=>{Va(v,m)})},_s=(l,m)=>{sa(l).fold(()=>{Oo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Oo=(l,m)=>{l.dom.appendChild(m.dom)},jr=(l,m,h)=>{Sr(l,h).fold(()=>{Oo(l,m)},v=>{Va(v,m)})},pu=(l,m)=>{Va(l,m),Oo(m,l)},co=(l,m)=>{Ne(m,(h,v)=>{const x=v===0?l:m[v-1];Tc(x,h)})},wr=(l,m)=>{Ne(m,h=>{Oo(l,h)})},Gr=l=>{l.dom.textContent="",Ne(ro(l),m=>{Hs(m)})},Hs=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},va=l=>{const m=ro(l);m.length>0&&co(l,m),Hs(l)},ya=(l,m)=>de.fromDom(l.dom.cloneNode(m)),xr=l=>ya(l,!1),za=l=>ya(l,!0),ra=(l,m)=>{const h=de.fromTag(m),v=xc(l);return na(h,v),h},Rl=(l,m)=>{const h=ra(l,m),v=ro(za(l));return wr(h,v),h},ca=(l,m)=>{const h=ra(l,m);Tc(l,h);const v=ro(l);return wr(h,v),Hs(l),h},hd=["tfoot","thead","tbody","colgroup"],dc=l=>mn(hd,l),fi=(l,m)=>({rows:l,columns:m}),Nl=(l,m)=>({row:l,column:m}),Ml=(l,m,h)=>({element:l,rowspan:m,colspan:h}),pd=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),H=(l,m,h,v,x,_)=>({element:l,rowspan:m,colspan:h,row:v,column:x,isLocked:_}),ee=(l,m,h)=>({element:l,cells:m,section:h}),ue=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),xe=(l,m,h)=>({element:l,isNew:m,isLocked:h}),qe=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),Wt=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),vo=(l,m,h)=>({element:l,colspan:m,column:h}),Do=(l,m)=>({element:l,columns:m}),ho=l=>fu(l)&&rs(l.dom.host),Ko=Es(Element.prototype.attachShadow)&&Es(Node.prototype.getRootNode),Vn=j(Ko),ls=Ko?l=>de.fromDom(l.dom.getRootNode()):rl,kc=l=>{const m=ls(l);return ho(m)?te.some(m):te.none()},Bl=l=>de.fromDom(l.dom.host),ht=l=>{if(Vn()&&rs(l.target)){const m=de.fromDom(l.target);if(Zr(m)&&bu(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return le(h)}}return te.from(l.target)},bu=l=>rs(l.dom.shadowRoot),Qo=l=>{const m=La(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return kc(de.fromDom(m)).fold(()=>h.body.contains(m),Ht(Qo,Bl))},Er=()=>pf(de.fromDom(document)),pf=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return de.fromDom(m)},es=(l,m,h)=>it(mi(l,h),m),Jh=(l,m)=>it(ro(l),m),Wi=vu=(l,m,h)=>es(l,v=>Lr(v,m),h),an=(l,m)=>Jh(l,h=>Lr(h,m)),_c=(l,m)=>oa(m,l);var Ke=(l,m,h,v,x)=>l(h,v)?te.some(h):Es(x)&&x(h)?te.none():m(h,v,x);const ts=(l,m,h)=>{let v=l.dom;const x=Es(h)?h:Xt;for(;v.parentNode;){v=v.parentNode;const _=de.fromDom(v);if(m(_))return te.some(_);if(x(_))break}return te.none()},bd=(l,m,h)=>Ke((x,_)=>_(x),ts,l,m,h),As=(l,m)=>{const h=x=>m(de.fromDom(x));return $(l.dom.childNodes,h).map(de.fromDom)},dr=(l,m)=>{const h=v=>{for(let x=0;x<v.childNodes.length;x++){const _=de.fromDom(v.childNodes[x]);if(m(_))return te.some(_);const M=h(v.childNodes[x]);if(M.isSome())return M}return te.none()};return h(l.dom)},Zi=(l,m,h)=>ts(l,v=>Lr(v,m),h),V=(l,m)=>As(l,h=>Lr(h,m)),X=(l,m)=>Dl(m,l),pe=(l,m,h)=>Ke((x,_)=>Lr(x,_),Zi,l,m,h),Fe=(l,m,h=Xo)=>l.exists(v=>h(v,m)),mt=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},kn=(l,m)=>l!=null?m(l):te.none(),jo=(l,m)=>l?te.some(m):te.none(),or=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,On=(l,m,h=0,v)=>{const x=l.indexOf(m,h);return x!==-1?Is(v)?!0:x+m.length<=v:!1},mc=(l,m)=>or(l,m,0),Ps=(l,m)=>or(l,m,l.length-m.length),kr=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),yu=l=>l.length>0,Bn=l=>{const m=parseFloat(l);return isNaN(m)?te.none():te.some(m)},Go=l=>l.style!==void 0&&Es(l.style.getPropertyValue),sr=(l,m,h)=>{if(!io(h))throw new Error("CSS value must be a string: "+h);Go(l)&&l.style.setProperty(m,h)},Qh=(l,m)=>{Go(l)&&l.style.removeProperty(m)},us=(l,m,h)=>{const v=l.dom;sr(v,m,h)},qr=(l,m)=>{const h=l.dom;Cn(m,(v,x)=>{sr(h,x,v)})},Kr=(l,m)=>{const h=l.dom,x=window.getComputedStyle(h).getPropertyValue(m);return x===""&&!Qo(l)?s0(h,m):x},s0=(l,m)=>Go(l)?l.style.getPropertyValue(m):"",ep=(l,m)=>{const h=l.dom,v=s0(h,m);return te.from(v).filter(x=>x.length>0)},Ua=(l,m)=>{const h=l.dom;Qh(h,m),Fe(lc(l,"style").map(kr),"")&&Jo(l,"style")},hg=(l,m)=>{const h=l.dom,v=m.dom;Go(h)&&Go(v)&&(v.style.cssText=h.style.cssText)},qo=(l,m,h=0)=>lc(l,m).map(v=>parseInt(v,10)).getOr(h),ji=(l,m)=>qo(l,m,1),Ac=l=>Fr("col")(l)?qo(l,"span",1)>1:ji(l,"colspan")>1,al=l=>ji(l,"rowspan")>1,Cu=$s=j(10),Gi=j(10),im=(l,m)=>bf(l,m,_e),bf=(l,m,h)=>lo(ro(l),v=>Lr(v,m)?h(v)?[v]:[]:bf(v,m,h)),r0=(l,m,h=Xt)=>{if(h(m))return te.none();if(mn(l,wo(m)))return te.some(m);const v=x=>Lr(x,"table")||h(x);return Zi(m,l.join(","),v)},tp=(l,m)=>r0(["td","th"],l,m),qi=l=>im(l,"th,td"),vf=l=>Lr(l,"colgroup")?an(l,"col"):lo(np(l),m=>an(m,"col")),Wc=(l,m)=>pe(l,"table",m),yf=l=>im(l,"tr"),np=l=>Wc(l).fold(j([]),m=>an(m,"colgroup")),Su=(l,m)=>Ot(l,h=>{if(wo(h)==="colgroup"){const v=Ot(vf(h),x=>{const _=qo(x,"span",1);return Ml(x,1,_)});return ee(h,v,"colgroup")}else{const v=Ot(qi(h),x=>{const _=qo(x,"rowspan",1),M=qo(x,"colspan",1);return Ml(x,_,M)});return ee(h,v,m(h))}}),op=l=>uc(l).map(m=>{const h=wo(m);return dc(h)?h:"tbody"}).getOr("tbody"),il=l=>{const m=yf(l),v=[...np(l),...m];return Su(v,op)},c0=wu=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},a0=(l,m,h,v)=>{const x=l.isiOS()&&/ipad/i.test(h)===!0,_=l.isiOS()&&!x,M=l.isiOS()||l.isAndroid(),I=M||v("(pointer:coarse)"),Z=x||!_&&M&&v("(min-device-width:768px)"),Q=_||M&&!Z,me=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,Ue=!Q&&!Z&&!me;return{isiPad:j(x),isiPhone:j(_),isTablet:j(Z),isPhone:j(Q),isTouch:j(I),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:j(me),isDesktop:j(Ue)}},i0=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},l0=(l,m)=>{const h=i0(l,m);if(!h)return{major:0,minor:0};const v=x=>Number(m.replace(h,"$"+x));return Y(v(1),v(2))},lm=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?u0():l0(l,h)},u0=()=>Y(0,0),Y=(l,m)=>({major:l,minor:m}),xu={nu:Y,detect:lm,unknown:u0},Wa=(l,m)=>jn(m.brands,h=>{const v=h.brand.toLowerCase();return $(l,x=>{var _;return v===((_=x.brand)===null||_===void 0?void 0:_.toLowerCase())}).map(x=>({current:x.name,version:xu.nu(parseInt(h.version,10),0)}))}),um=(l,m)=>{const h=String(m).toLowerCase();return $(l,v=>v.search(h))},sp=(l,m)=>um(l,m).map(h=>{const v=xu.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Mv=(l,m)=>um(l,m).map(h=>{const v=xu.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Qn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Oc=l=>m=>On(m,l),ll=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>On(l,"edge/")&&On(l,"chrome")&&On(l,"safari")&&On(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qn],search:l=>On(l,"chrome")&&!On(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>On(l,"msie")||On(l,"trident")},{name:"Opera",versionRegexes:[Qn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Oc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Oc("firefox")},{name:"Safari",versionRegexes:[Qn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(On(l,"safari")||On(l,"mobile/"))&&On(l,"applewebkit")}],Pl=[{name:"Windows",search:Oc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>On(l,"iphone")||On(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Oc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Oc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Oc("linux"),versionRegexes:[]},{name:"Solaris",search:Oc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Oc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Oc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Eu={browsers:j(ll),oses:j(Pl)},Ki="Edge",Yr="Chromium",ul="IE",rp="Opera",cp="Firefox",gi="Safari",dl=()=>ap({current:void 0,version:xu.unknown()}),ap=l=>{const m=l.current,h=l.version,v=x=>()=>m===x;return{current:m,version:h,isEdge:v(Ki),isChromium:v(Yr),isIE:v(ul),isOpera:v(rp),isFirefox:v(cp),isSafari:v(gi)}},Dc={unknown:dl,nu:ap,edge:j(Ki),chromium:j(Yr),ie:j(ul),opera:j(rp),firefox:j(cp),safari:j(gi)},rr="Windows",Tu="iOS",dm="Android",hi="Linux",Rc="macOS",ip="Solaris",d0="FreeBSD",Cf="ChromeOS",pg=()=>mm({current:void 0,version:xu.unknown()}),mm=l=>{const m=l.current,h=l.version,v=x=>()=>m===x;return{current:m,version:h,isWindows:v(rr),isiOS:v(Tu),isAndroid:v(dm),isMacOS:v(Rc),isLinux:v(hi),isSolaris:v(ip),isFreeBSD:v(d0),isChromeOS:v(Cf)}},ml={unknown:pg,nu:mm,windows:j(rr),ios:j(Tu),android:j(dm),linux:j(hi),macos:j(Rc),solaris:j(ip),freebsd:j(d0),chromeos:j(Cf)},dS={detect:(l,m,h)=>{const v=Eu.browsers(),x=Eu.oses(),_=m.bind(Z=>Wa(v,Z)).orThunk(()=>sp(v,l)).fold(Dc.unknown,Dc.nu),M=Mv(x,l).fold(ml.unknown,ml.nu),I=a0(M,_,l,h);return{browser:_,os:M,deviceType:I}}},Bv=l=>window.matchMedia(l).matches;let Pv=wu(()=>dS.detect(navigator.userAgent,te.from(navigator.userAgentData),Bv));const vd=()=>Pv(),lp=(l,m)=>{const h=(I,Z)=>{if(!to(Z)&&!Z.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+Z);const Q=I.dom;Go(Q)&&(Q.style[l]=Z+"px")},v=I=>{const Z=m(I);if(Z<=0||Z===null){const Q=Kr(I,l);return parseFloat(Q)||0}return Z},x=v,_=(I,Z)=>ye(Z,(Q,me)=>{const Ue=Kr(I,me),ut=Ue===void 0?0:parseInt(Ue,10);return isNaN(ut)?Q:Q+ut},0);return{set:h,get:v,getOuter:x,aggregate:_,max:(I,Z,Q)=>{const me=_(I,Q);return Z>me?Z-me:0}}},fm=ds=(l,m,h)=>fm(Kr(l,m),h),ys=(l,m,h,v)=>{const x=ds(l,`padding-${h}`,0),_=ds(l,`padding-${v}`,0),M=ds(l,`border-${h}-width`,0),I=ds(l,`border-${v}-width`,0);return m-x-_-M-I},Ca=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:ys(l,v,"left","right")},up=l=>ds(l,"height",l.dom.offsetHeight),$v=Xr=l=>Ca(l,"content-box"),ku=lp("width",l=>l.dom.offsetWidth),Sa=l=>ku.get(l),fl=l=>ku.getOuter(l),f0=Xr,bn=$v,aa=(l,m,h)=>{const v=l.cells,x=v.slice(0,m),_=v.slice(m),M=x.concat(h).concat(_);return dp(l,M)},_u=(l,m,h)=>aa(l,m,[h]),gm=(l,m,h)=>{const v=l.cells;v[m]=h},dp=(l,m)=>qe(l.element,m,l.section,l.isNew),g0=(l,m)=>{const h=l.cells,v=Ot(h,m);return qe(l.element,v,l.section,l.isNew)},Nc=cr=wa=l=>l.cells.length,ar=l=>{const m=cs(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},bg=(l,m,h)=>{const v=Ot(l.cells,h);return qe(m(l.element),v,l.section,!0)},hm="data-snooker-locked-cols",Vs=l=>lc(l,hm).bind(m=>te.from(m.match(/\d+/g))).map(m=>Re(m,_e)),mr=l=>{const m=ye(ar(l).rows,(v,x)=>(Ne(x.cells,(_,M)=>{_.isLocked&&(v[M]=!0)}),v),{}),h=vs(m,(v,x)=>parseInt(x,10));return st(h)},Yi=Sf=(l,m,h)=>te.from(l.access[Yi(m,h)]),Qs=(l,m,h)=>{const v=mp(l,x=>h(m,x.element));return v.length>0?te.some(v[0]):te.none()},mp=(l,m)=>{const h=lo(l.all,v=>v.cells);return it(h,m)},h0=l=>{const m={};let h=0;return Ne(l.cells,v=>{const x=v.colspan;pn(x,_=>{const M=h+_;m[M]=vo(v.element,x,M)}),h+=x}),m},yo=l=>{const m={},h=[],x=le(l).map(lt=>lt.element).bind(Wc).bind(Vs).getOr({});let _=0,M=0,I=0;const{pass:Z,fail:Q}=cs(l,lt=>lt.section==="colgroup");Ne(Q,lt=>{const $e=[];Ne(lt.cells,ft=>{let Me=0;for(;m[Yi(I,Me)]!==void 0;)Me++;const At=Fo(x,Me.toString()),Qt=H(ft.element,ft.rowspan,ft.colspan,I,Me,At);for(let Sn=0;Sn<ft.colspan;Sn++)for(let Yo=0;Yo<ft.rowspan;Yo++){const Mr=I+Yo,Ls=Me+Sn,Ra=Yi(Mr,Ls);m[Ra]=Qt,M=Math.max(M,Ls+1)}$e.push(Qt)}),_++,h.push(ee(lt.element,$e,lt.section)),I++});const{columns:me,colgroups:Ue}=jt(Z).map(lt=>{const $e=h0(lt);return{colgroups:[Do(lt.element,Uo($e))],columns:$e}}).getOrThunk(;return{grid:fi(_,M),access:m,all:h,columns:me,colgroups:Ue}},Dn={fromTable:generate:yo,getAt:Sf,findItem:Qs,filterItems:mp,justCells:l=>lo(l.all,m=>m.cells),justColumns:l=>Uo(l.columns),hasColumns:l=>Ct(l.columns).length>0,getColumnAt:,pm=(l,m=_e)=>{const h=l.grid,v=pn(h.columns,Ve),x=pn(h.rows,Ve);return Ot(v,_=>p0(()=>lo(x,Q=>Dn.getAt(l,Q,_).filter(me=>me.column===_).toArray()),)},p0=(l,m,h)=>{const v=l();return $(v,m).orThunk(()=>te.from(v[0]).orThunk(h)).map(M=>M.element)},fp=l=>{const m=l.grid,h=pn(m.rows,Ve),v=pn(m.columns,Ve);return Ot(h,x=>p0(()=>lo(v,Z=>Dn.getAt(l,x,Z).filter(Q=>Q.row===x).fold(j([]),Q=>[Q])),Z=>Z.rowspan===1,)},Fv=(l,m)=>{if(m<0||m>=l.length-1)return te.none();const h=l[m].fold(()=>{const x=Ns(l.slice(0,m));return jn(x,(_,M)=>_.map(I=>({value:I,delta:M+1})))},x=>te.some({value:x,delta:0})),v=l[m+1].fold(()=>{const x=l.slice(m+1);return jn(x,(_,M)=>_.map()},;return h.bind(x=>v.map(_=>{const M=_.delta+x.delta;return Math.abs(_.value-x.value)/M}))},Lv=(l,m)=>h=>b0(h)==="rtl"?m:l,b0=l=>Kr(l,"direction")==="rtl"?"rtl":"ltr",yg=lp("height",l=>{const m=l.dom;return Qo(l)?m.getBoundingClientRect().height:m.offsetHeight}),gp=l=>yg.get(l),w=l=>yg.getOuter(l),O=up,F=(l,m)=>({left:l,top:m,translate:(v,x)=>F(l+v,m+x)}),K=F,ne=l=>{const m=l.getBoundingClientRect();return K(m.left,m.top)},Ze=(l,m)=>l!==void 0?l:m!==void 0?m:0,Rt=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,x=m.documentElement;if(h===l.dom)return K(h.offsetLeft,h.offsetTop);const _=Ze(v==null?void 0:v.pageYOffset,x.scrollTop),M=Ze(v==null?void 0:v.pageXOffset,x.scrollLeft),I=Ze(x.clientTop,h.clientTop),Z=Ze(x.clientLeft,h.clientLeft);return un(l).translate(M-Z,_-I)},un=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?K(v.offsetLeft,v.offsetTop):Qo(l)?ne(m):K(0,0)},ln=(l,m)=>({row:l,y:m}),qt=(l,m)=>({col:l,x:m}),ms=l=>Rt(l).left+fl(l),Ir=l=>Rt(l).left,Za=(l,m)=>qt(l,Ir(m)),$l=(l,m)=>qt(l,ms(m)),Jr=l=>Rt(l).top,mS=(l,m)=>ln(l,Jr(m)),Wo=(l,m)=>ln(l,Jr(m)+w(m)),Pt=(l,m,h)=>{if(h.length===0)return[];const v=Ot(h.slice(1),,x=h[h.length-1].map(_=>m(h.length-1,_));return v.concat([x])},Fl=Et={delta:Ve,positions:l=>Pt(mS,Wo,l),edge:Jr},Cd=Lv({delta:Ve,edge:Ir,positions:l=>Pt(Za,$l,l)},{delta:Fl,edge:ms,positions:l=>Pt($l,Za,l)}),fr={delta:(l,m)=>Cd(m).delta(l,m),positions:(l,m)=>Cd(m).positions(l,m),edge:l=>Cd(l).edge(l)},xf={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},hp=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",x=M=`[+-]?(?:${["Infinity",l+v+x(l)+x(h),v+l+x(h),l+x(h)].join("|")})`;return new RegExp(`^(${M})(.*)$`)})(),Qr=(l,m)=>ze(m,h=>ze(xf[h],v=>l===v)),Ll=(l,m)=>te.from(hp.exec(l)).bind(v=>{const x=Number(v[1]),_=v[2];return Qr(_,m)?te.some({value:x,unit:_}):te.none()}),v0=/(\d+(\.\d+)?)%/,Au=/(\d+(\.\d+)?)px|em/,fS=Fr("col"),y0=(l,m,h)=>{const v=Ec(l).getOrThunk(()=>pf(zi(l)));return m(l)/h(v)*100},Ge=(l,m)=>{us(l,"width",m+"px")},gS=(l,m)=>{us(l,"width",m+"%")},vm=(l,m)=>{us(l,"height",m+"px")},Sd=l=>O(l)+"px",pp=(l,m,h,v)=>{const x=Wc(l).map(_=>{const M=h(_);return Math.floor(m/100*M)}).getOr(m);return v(l,x),x},Cs=(l,m,h,v)=>{const x=parseFloat(l);return Ps(l,"%")&&wo(m)!=="table"?pp(m,x,h,v):x},Ro=l=>{const m=Sd(l);return m?Cs(m,l,gp,vm):gp(l)},ia=(l,m,h)=>{const v=h(l),x=ji(l,m);return v/x},la=(l,m)=>ep(l,m).orThunk(()=>lc(l,m).map(h=>h+"px")),zn=l=>la(l,"width"),bp=l=>la(l,"height"),fc=l=>y0(l,Sa,f0),zs=C0=l=>ia(l,"rowspan",Ro),Le=l=>zn(l).bind(h=>Ll(h,["fixed","relative","empty"])),ja=(l,m,h)=>{us(l,"width",m+h)},vp=oo=l=>y0(l,Sa,f0)+"%",Il=l=>zn(l).exists(m=>v0.test(m)),qT=Hl=l=>zn(l).isNone(),Iv=j(v0),Vl=Fr("col"),Hv=l=>zn(l).getOrThunk(()=>zs(l)+"px"),pi=l=>bp(l).getOrThunk(,mo=l=>Ot(Dn.justColumns(l),m=>te.from(m.element)),Ou=l=>{const m=vd().browser,h=m.isChromium()||m.isFirefox();return Vl(l)?h:!0},Ef=(l,m,h,v,x,_)=>l.filter(v).fold(M=>x(M)),gc=(l,m,h,v)=>{const x=pm(l),_=Dn.hasColumns(l)?mo(l):x,M=[te.some(fr.edge(m))].concat(Ot(fr.positions(x,m),Z=>Z.map(Q=>Q.x))),I=re(Ac);return Ot(_,(Z,Q)=>Ef(Z,Q,M,I,me=>{if(Ou(me))return h(me);{const Ue=kn(x[Q],Ve);return Ef(Ue,Q,M,I,v)}},v))},Vv=l=>l.map(.getOr(""),Tf=kf=(l,m,h)=>gc(l,m,fc,v=>v.fold(()=>h.minCellWidth(),x=>x/h.pixelWidth()*100)),xa=(l,m,h)=>gc(l,m,zs,v=>v.getOrThunk(h.minCellWidth)),ym=(l,m,h,v,x)=>{const _=fp(l),M=[te.some(h.edge(m))].concat(Ot(h.positions(_,m),);return Ot(_,(I,Z)=>Ef(I,Z,M,re(al),v,x))},ge=(l,m,h)=>ym(l,m,h,C0,v=>v.getOrThunk(Gi)),Ga=Du=(l,m)=>()=>Qo(l)?m(l):parseFloat(ep(l,"width").getOr("0")),Ru=l=>{const m=Du(l,Sa),h=j(0);return{width:m,pixelWidth:m,getWidths:(x,_)=>xa(x,l,_),getCellDelta:h,singleColumnWidth:j([0]),minCellWidth:h,setElementWidth:Tt,adjustTableWidth:Tt,isRelative:!0,label:"none"}},qa=l=>{const m=Du(l,Z=>parseFloat(oo(Z))),h=Du(l,Sa);return{width:m,pixelWidth:h,getWidths:(Z,Q)=>kf(Z,l,Q),getCellDelta:Z=>Z/h()*100,singleColumnWidth:(Z,Q)=>[100-Z],minCellWidth:()=>$s()/h()*100,setElementWidth:gS,adjustTableWidth:Z=>{const Q=m(),me=Z/100*Q,Ue=Q+me;gS(l,Ue)},isRelative:!0,label:"percent"}},_r=l=>{const m=Du(l,Sa);return{width:m,pixelWidth:m,getWidths:(M,I)=>xa(M,l,I),getCellDelta:Ve,singleColumnWidth:(M,I)=>[Math.max($s(),M+I)-M],minCellWidth:$s,setElementWidth:Ge,adjustTableWidth:M=>{const I=m()+M;Ge(l,I)},isRelative:!1,label:"pixel"}},Hr=(l,m)=>Iv().exec(m)!==null?qa(l):_r(l),Ea={getTableSize:l=>zn(l).fold(()=>Ru(l),h=>Hr(l,h)),pixelSize:_r,percentageSize:qa,noneSize:Ru},Nu=Vt=(l,m)=>{const h=l.grid.columns;let x=l.grid.rows,_=h,M=0,I=0;const Z=[],Q=[];return Cn(l.access,me=>{if(Z.push(me),m(me)){Q.push(me);const Ue=me.row,ut=Ue+me.rowspan-1,lt=me.column,$e=lt+me.colspan-1;Ue<x?x=Ue:ut>M&&(M=ut),lt<_?_=lt:$e>I&&(I=$e)}}),Nu(x,_,M,I,Z,Q)},ec=(l,m,h)=>{const v=l[h].element,x=de.fromTag("td");Oo(x,de.fromTag("br")),(m?Oo:_s)(v,x)},Ka=(l,m,h,v)=>{const x=it(l,,_=m.grid.columns,M=m.grid.rows;for(let I=0;I<M;I++){let Z=!1;for(let Q=0;Q<_;Q++)I<h.minRow||I>h.maxRow||Q<h.minCol||Q>h.maxCol||(Dn.getAt(m,I,Q).filter(v).isNone()?ec(x,Z,I):Z=!0)}},bi=(l,m,h,v)=>{Cn(h.columns,M=>{(M.column<m.minCol||M.column>m.maxCol)&&Hs(M.element)});const x=it(im(l,"tr"),;Ne(x,Hs),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ne(im(l,"th,td"),M=>{Jo(M,"rowspan"),Jo(M,"colspan")}),Jo(l,hm),Jo(l,"data-snooker-col-series"),Ea.getTableSize(l).adjustTableWidth(v)},KT=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const x=xa(m,l,h),_=ye(x,(Q,me)=>Q+me,0),Z=ye(x.slice(v.minCol,v.maxCol+1),(Q,me)=>Q+me,0)/_*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(Z)},YT=(l,m)=>{const h=ut=>Lr(ut.element,m),v=za(l),x=il(v),_=Ea.getTableSize(l),M=Dn.generate(x),I=Vt(M,h),Z="th:not("+m+"),td:not("+m+")",Q=bf(v,"th,td",ut=>Lr(ut,Z));Ne(Q,Hs),Ka(x,M,I,h);const me=Dn.fromTable(l),Ue=KT(l,me,_,I);return bi(v,I,M,Ue),v},Cg="\xA0",Ta=((l,m)=>{const h=_=>{if(!l(_))throw new Error("Can only get "+m+" value of a "+m+" node");return v(_).getOr("")},v=return{get:h,getOption:v,set:(_,M)=>{if(!l(_))throw new Error("Can only set raw "+m+" value of a "+m+" node");_.dom.nodeValue=M}}})(La,"text"),hc=l=>Ta.get(l),zv=l=>Ta.getOption(l),XT=(l,m)=>Ta.set(l,m),Mu=l=>wo(l)==="img"?1:zv(l).fold(m=>m.length),S0=l=>zv(l).filter(m=>m.trim().length!==0||m.indexOf(Cg)>-1).isSome(),hS=l=>Gt(l)&&ui(l,"contenteditable")==="false",_f=["img","br"],Sg=l=>S0(l)||mn(_f,wo(l))||hS(l),pS=l=>dr(l,Sg),wd=l=>bS(l,Sg),bS=vS={scope:["row","col"]},Uv=l=>()=>{const m=de.fromTag("td",l.dom);return Oo(m,de.fromTag("br",l.dom)),m},Wv=l=>()=>de.fromTag("col",l.dom),tc=l=>()=>de.fromTag("colgroup",l.dom),Bu=l=>wg=(l,m,h)=>{const v=Rl(l,m);return Cn(h,(x,_)=>{x===null?Jo(v,_):as(v,_,x)}),v},Af=yS=(l,m,h)=>pS(l).map(x=>{const _=h.join(","),M=vu(x,_,I=>Eo(I,l));return It(M,(I,Z)=>{const Q=xr(Z);return Oo(I,Q),Q},m)}).getOr(m),gr=(l,m)=>{Cn(vS,(h,v)=>lc(l,v).filter(x=>mn(h,x)).each(x=>as(m,v,x)))},xg=(l,m,h)=>{const v=(M,I)=>{hg(M.element,I),Ua(I,"height"),M.colspan!==1&&Ua(I,"width")},x=M=>{const I=de.fromTag(wo(M.element),m.dom),Z=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Q=Z.length>0?yS(M.element,I,Z):I;return Oo(Q,de.fromTag("br")),v(M,I),gr(M.element,I),l(M.element,I),I};return{col:M=>{const I=de.fromTag(wo(M.element),m.dom);return v(M,I),l(M.element,I),I},colgroup:tc(m),row:Bu(m),cell:x,replace:wg,colGap:Wv(m),gap:Uv(m)}},Eg=l=>({col:Wv(l),colgroup:tc(l),row:Bu(l),cell:Uv(l),replace:Af,colGap:Wv(l),gap:Uv(l)}),Zv=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,ro(de.fromDom(v))},xd=l=>Ot(l,de.fromDom),Ya=l=>m=>m.options.get(l),w0="100%",gl=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return f0(de.fromDom(v))+"px"},Cm=(l,m)=>Rf(l)||!Xa(l)?m:Sm(l)?{...m,width:gl(l)}:{...m,width:w0},Of=(l,m)=>Rf(l)||Xa(l)?m:Sm(l)?{...m,width:gl(l)}:{...m,width:w0},Tg=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=mn(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Ed=JT=l=>{const m=l.options.get("object_resizing");return mn(m.split(","),"table")},Df=Ya("table_header_type"),jv=Ya("table_column_resizing"),CS=l=>jv(l)==="preservetable",Us=l=>jv(l)==="resizetable",kg=Ya("table_sizing_mode"),Td=l=>kg(l)==="relative",Sm=l=>kg(l)==="fixed",Rf=l=>kg(l)==="responsive",Nf=Ya("table_resize_bars"),Xa=Ya("table_style_by_css"),Os=Ya("table_merge_content_on_paste"),zl=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:Of(l,h)},Gv=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:Cm(l,h)},Cp=Ya("table_use_colgroups"),x0=l=>pe(l,"[contenteditable]"),wm=(l,m=!1)=>Qo(l)?l.dom.isContentEditable:x0(l).fold(j(m),h=>Sp(h)==="true"),Sp=l=>l.dom.contentEditable,E0=Pu=Ul=l=>{Jo(l,"data-mce-style");const m=h=>Jo(h,"data-mce-style");Ne(qi(l),m),Ne(vf(l),m),Ne(yf(l),m)},vi=l=>de.fromDom(l.selection.getStart()),xm=l=>l.getBoundingClientRect().width,Em=SS=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return te.from(h).filter(yu)},T0=l=>/^(\d+(\.\d+)?)%$/.test(l),wp=l=>/^(\d+(\.\d+)?)px$/.test(l),k0=l=>bd(l,Fr("table")).exists(wm),wS=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,x=m.row,_=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&x<=l.finishRow&&_>=l.startRow},_0=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,xp=(l,m)=>{let h=!0;const v=hn(_0,m);for(let x=m.startRow;x<=m.finishRow;x++)for(let _=m.startCol;_<=m.finishCol;_++)h=h&&Dn.getAt(l,x,_).exists(v);return h?te.some(m):te.none()},Ep=(l,m)=>Wt(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),Fn=(l,m,h)=>{const v=Dn.findItem(l,m,Eo),x=Dn.findItem(l,h,Eo);return v.bind(},Ft=(l,m,h)=>Fn(l,m,h).bind(v=>xp(l,v)),kd=(l,m,h,v)=>Dn.findItem(l,m,Eo).bind(x=>{const _=h>0?x.row+x.rowspan-1:x.row,M=v>0?x.column+x.colspan-1:x.column;return Dn.getAt(l,_+h,M+v).map(Z=>Z.element)}),A0=(l,m,h)=>Fn(l,m,h).map(v=>{const x=Dn.filterItems(l,hn(wS,v));return Ot(x,_=>_.element)}),Tp=(l,m)=>{const h=(v,x)=>gd(x,v);return Dn.findItem(l,m,h).map(v=>v.element)},QT=(l,m,h)=>Wc(l).bind(v=>{const x=Yv(v);return kd(x,l,m,h)}),qv=(l,m,h)=>{const v=Yv(l);return A0(v,m,h)},Lo=(l,m,h,v,x)=>{const _=Yv(l),M=Eo(l,h)?te.some(m):Tp(_,m),I=Eo(l,x)?te.some(v):Tp(_,v);return M.bind(},Kv=(l,m,h)=>{const v=Yv(l);return Ft(v,m,h)},Yv=Dn.fromTable;var Xv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Pe=()=>{const l=Q=>de.fromDom(Q.dom.cloneNode(!1)),m=h=Q=>Zr(Q)?wo(Q)==="body"?!0:mn(Xv,wo(Q)):!1,v=Q=>Zr(Q)?mn(["br","img","hr","input"],wo(Q)):!1,x=Q=>Zr(Q)&&ui(Q,"contenteditable")==="false",_=M=(Q,me)=>{const Ue=xc(Q);na(me,Ue)},I=Q=>{const me=wo(Q);return mn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],me)},Z=Q=>Zr(Q)?lc(Q,"lang"):te.none();return{up:j({selector:Zi,closest:pe,predicate:ts,all:mi}),down:j({selector:_c,predicate:Wi}),styles:j({get:Kr,getRaw:ep,set:us,remove:Ua}),attrs:j({get:ui,set:as,remove:Jo,copyTo:M}),insert:j({before:Va,after:Tc,afterAll:co,append:Oo,appendAll:wr,prepend:_s,wrap:pu}),remove:j({unwrap:va,remove:Hs}),create:j({nu:de.fromTag,clone:l,text:de.fromText}),query:j({comparePosition:_,prevSibling:cl,nextSibling:Ui}),property:j({children:ro,name:wo,parent:uc,document:m,isText:La,isComment:xo,isElement:Zr,isSpecial:I,getLanguage:Z,getText:hc,setText:XT,isBoundary:h,isEmptyTag:v,isNonEditable:x}),eq:Eo,is:hu}};const O0=(l,m,h,v)=>{const x=h[0],_=h.slice(1);return v(l,m,x,_)},ek=(l,m,h)=>h.length>0?O0(l,m,h,kp):te.none(),kp=(l,m,h,v)=>{const x=m(l,h);return It(v,(_,M)=>{const I=m(l,M);return tk(l,_,I)},x)},tk=(l,m,h)=>m.bind(v=>h.filter(hn(l.eq,v))),_g=Jv=(l,m,h,v=Xt)=>{const x=[m].concat(l.up().all(m)),_=[h].concat(l.up().all(h)),M=me=>Ts(me,v).fold(()=>me,,I=M(x),Z=M(_),Q=$(I,me=>ze(Z,_g(l,me)));return{firstpath:I,secondpath:Z,shared:Q}},_d=ek,nk=Jv,$u=Pe(),No=(l,m)=>_d($u,(h,v)=>l(v),m),Fu=Qv=l=>Zi(l,"table"),hl=(l,m,h)=>{const v=x=>_=>h!==void 0&&h(_)||Eo(_,x);return Eo(l,m)?te.some({boxes:te.some([l]),start:l,finish:m}):Qv(l).bind(x=>Qv(m).bind(_=>{if(Eo(x,_))return te.some({boxes:qv(x,l,m),start:l,finish:m});if(gd(x,_)){const M=vu(m,"td,th",v(x)),I=M.length>0?M[M.length-1]:m;return te.some({boxes:Lo(x,l,x,m,_),start:l,finish:I})}else if(gd(_,x)){const M=vu(l,"td,th",v(_)),I=M.length>0?M[M.length-1]:l;return te.some({boxes:Lo(_,l,x,m,_),start:l,finish:I})}else return Fu(l,m).shared.bind(M=>pe(M,"table",h).bind(I=>{const Z=vu(m,"td,th",v(I)),Q=Z.length>0?Z[Z.length-1]:m,me=vu(l,"td,th",v(I)),Ue=me.length>0?me[me.length-1]:l;return te.some({boxes:Lo(I,l,x,m,_),start:Ue,finish:Q})}))}))},Ad=(l,m)=>{const h=_c(l,m);return h.length>0?te.some(h):te.none()},ey=Mf=(l,m,h)=>X(l,m).bind(v=>X(l,h).bind(x=>No(Qv,[v,x]).map()),xS=(l,m)=>Zi(l,"table").bind(h=>X(h,m).bind(v=>hl(v,l).bind(x=>x.boxes.map())),D0=(l,m,h,v,x)=>ey(l,x).bind(_=>QT(_,m,h).bind(M=>xS(M,v))),ty=(l,m)=>Ad(l,m),ok=(l,m,h)=>Mf(l,m,h).bind(v=>{const x=Z=>Eo(l,Z),_="thead,tfoot,tbody,table",M=Zi(v.first,_,x),I=Zi(v.last,_,x);return M.bind(Z=>I.bind(Q=>Eo(Z,Q)?Kv(v.table,v.first,v.last):te.none()))}),ny=Ve,Bf=l=>{const m=(v,x)=>lc(v,x).exists(,h=return l.length>0&&no(l,h)?te.some(l):te.none()},MD=(l,m,h)=>m.length<=1?te.none():ok(l,h.firstSelectedSelector,h.lastSelectedSelector).map(,oy="data-mce-selected",Tm="td["+oy+"],th["+oy+"]",pc="["+oy+"]",wt="data-mce-first-selected",sk="td["+wt+"],th["+wt+"]",sy="data-mce-last-selected",rk="td["+sy+"],th["+sy+"]",ES=pc,Pf={selected:oy,selectedSelector:Tm,firstSelected:wt,firstSelectedSelector:sk,lastSelected:sy,lastSelectedSelector:rk},Ag=(l,m,h)=>({element:h,mergable:MD(m,l,Pf),unmergable:Bf(l),selection:ny(l)}),_p=(l,m,h)=>({element:l,clipboard:m,generators:h}),Og=(l,m,h,v)=>({selection:ny(l),clipboard:h,generators:v}),R0=l=>Wc(l).bind(m=>ty(m,Pf.firstSelectedSelector)).fold(j(l),,Od=l=>(m,h)=>{const v=wo(m),x=v==="col"||v==="colgroup"?R0(m):m;return pe(x,l,h)},Wl=Od("th,td,caption"),Ap=Od("th,td"),Ji=N0=l=>it(Ji(l),m=>Lr(m,Pf.selectedSelector)),TS=l=>Wc(l[0]).map(m=>{const h=YT(m,ES);return Ul(h),[h]}),Dg=(l,m)=>Ot(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),Dd=l=>Ot(l,.join(""),ck=(l,m)=>{l.on("BeforeGetContent",h=>{const v=x=>{h.preventDefault(),TS(x).each(_=>{h.content=h.format==="text"?Dd(_):Dg(l,_)})};if(h.selection===!0){const x=N0(l);x.length>=1&&v(x)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=Ji(l);le(v).each(x=>{Wc(x).each(_=>{const M=it(Zv(h.content),,I=Fr("table");if(Os(l)&&M.length===1&&I(M[0])){h.preventDefault();const Z=de.fromDom(l.getDoc()),Q=Eg(Z),me=_p(x,M[0],Q);m.pasteCells(_,me).each(()=>{l.focus()})}})})}})},Rg=(l,m)=>({element:l,offset:m}),$f=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>$f(l,v,h).orThunk(()=>te.some(v))):te.none(),pl=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Ja=(l,m)=>{const h=$f(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return Rg(h,pl(l,h));const v=l.property().children(h);return v.length>0?Ja(l,v[v.length-1]):Rg(h,pl(l,h))},ak=Ja,kS=Pe(),_S=l=>ak(kS,l),ry=(l,m)=>{Ac(l)||Le(l).each(v=>{const x=v.value/2;ja(l,x,v.unit),ja(m,x,v.unit)})},Qa=Ng=(l,m,h,v,x)=>x(l.slice(0,m)).concat(v).concat(x(l.slice(h))),M0=l=>(m,h,v,x)=>{if(l(v)){const _=Math.max(x,m[h]-Math.abs(v)),M=Math.abs(_-m[h]);return v>=0?M:-M}else return v},B0=M0(,ik=M0(_e),AS=()=>{const l=(I,Z,Q,me,Ue)=>{const ut=B0(I,Z,me,Ue);return Ng(I,Z,Q+1,[ut,0],Qa)},m=(I,Z,Q,me)=>{const Ue=(100+Q)/100,ut=Math.max(me,(I[Z]+Q)/Ue);return Ot(I,(lt,$e)=>($e===Z?ut:lt/Ue)-lt)},h=(I,Z,Q,me,Ue,ut)=>ut?m(I,Z,me,Ue):l(I,Z,Q,me,Ue);return{resizeTable:(I,Z)=>I(Z),clampTableDelta:B0,calcLeftEdgeDeltas:h,calcMiddleDeltas:(I,Z,Q,me,Ue,ut,lt)=>h(I,Q,me,Ue,ut,lt),calcRightEdgeDeltas:(I,Z,Q,me,Ue,ut)=>{if(ut)return m(I,Q,me,Ue);{const lt=B0(I,Q,me,Ue);return Qa(I.slice(0,Q)).concat([lt])}},calcRedestributedWidths:(I,Z,Q,me)=>{if(me){const ut=(Z+Q)/Z,lt=Ot(I,;return{delta:ut*100-100,newSizes:lt}}else return{delta:Q,newSizes:I}}}},cy=()=>{const l=(M,I,Z,Q,me)=>{const Ue=Q>=0?Z:I,ut=ik(M,Ue,Q,me);return Ng(M,I,Z+1,[ut,-ut],Qa)};return{resizeTable:clampTableDelta:(M,I,Z,Q,me)=>{if(me){if(Z>=0)return Z;{const Ue=ye(M,(ut,lt)=>ut+lt-Q,0);return Math.max(-Ue,Z)}}else return B0(M,I,Z,Q)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(M,I,Z,Q,me,Ue)=>l(M,Z,Q,me,Ue),calcRightEdgeDeltas:(M,I,Z,Q,me,Ue)=>{if(Ue)return Qa(M);{const ut=Q/M.length;return Ot(M,j(ut))}},calcRedestributedWidths:(M,I,Z,Q)=>({delta:0,newSizes:M})}},Mg=l=>Dn.fromTable(l).grid,Bg=Fr("th"),P0=l=>no(l,m=>Bg(m.element)),lk=$0=l=>{const m=l.section==="thead",h=Fe(Pg(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:lk(m,h)}:{type:"body"}},Pg=l=>{const m=it(l,h=>Bg(h.element));return m.length===0?te.some("td"):m.length===l.length?te.some("th"):te.none()},uk=l=>{const m=Ot(l,x=>$0(x).type),h=mn(m,"header"),v=mn(m,"footer");if(!h&&!v)return te.some("body");{const x=mn(m,"body");return h&&!x&&!v?te.some("header"):!h&&!x&&v?te.some("footer"):te.none()}},Op=l=>jn(l.all,m=>{const h=$0(m);return h.type==="header"?te.from(h.subType):te.none()}),ay=(l,m,h)=>xe(h(l.element,m),!0,l.isLocked),ei=(l,m)=>l.section!==m?qe(l.element,l.cells,m,l.isNew):l,F0=()=>({transformRow:ei,transformCell:(l,m,h)=>{const v=h(l.element,m),x=wo(v)!=="td"?ca(v,"td"):v;return xe(x,l.isNew,l.isLocked)}}),OS=()=>({transformRow:ei,transformCell:ay}),L0=()=>({transformRow:(l,m)=>ei(l,m==="thead"?"tbody":m),transformCell:ay}),km={getTableSectionType:(l,m)=>{const h=Dn.fromTable(l);switch(Op(h).getOr(m)){case"section":return F0();case"sectionCells":return OS();case"cells":return L0()}},section:F0,sectionCells:OS,cells:L0,fallback:()=>({transformRow:Ve,transformCell:ay})},Lu=(l,m,h,v)=>{h===v?Jo(l,m):as(l,m,h)},iy=(l,m,h)=>{jt(an(l,m)).fold(()=>_s(l,h),v=>Tc(v,h))},$g=(l,m)=>{const h=V(l,m).getOrThunk(()=>{const v=de.fromTag(m,zi(l).dom);return m==="thead"?iy(l,"caption,colgroup",v):m==="colgroup"?iy(l,"caption",v):Oo(l,v),v});return Gr(h),h},H0=(l,m)=>{const h=[],v=[],x=lt=>Ot(lt,$e=>{$e.isNew&&h.push($e.element);const ft=$e.element;return Gr(ft),Ne($e.cells,Me=>{Me.isNew&&v.push(Me.element),Lu(Me.element,"colspan",Me.colspan,1),Lu(Me.element,"rowspan",Me.rowspan,1),Oo(ft,Me.element)}),ft}),_=lt=>lo(lt,$e=>Ot($e.cells,ft=>(Lu(ft.element,"span",ft.colspan,1),ft.element))),M=(lt,$e)=>{const ft=$g(l,$e),At=($e==="colgroup"?_:x)(lt);wr(ft,At)},I=lt=>{V(l,lt).each(Hs)},Z=(lt,$e)=>{lt.length>0?M(lt,$e):I($e)},Q=[],me=[],Ue=[],ut=[];return Ne(m,lt=>{switch(lt.section){case"thead":Q.push(lt);break;case"tbody":me.push(lt);break;case"tfoot":Ue.push(lt);break;case"colgroup":ut.push(lt);break}}),Z(ut,"colgroup"),Z(Q,"thead"),Z(me,"tbody"),Z(Ue,"tfoot"),{newRows:h,newCells:v}},DS=l=>Ot(l,m=>{const h=xr(m.element);return Ne(m.cells,v=>{const x=za(v.element);Lu(x,"colspan",v.colspan,1),Lu(x,"rowspan",v.rowspan,1),Oo(h,x)}),h}),Zo=(l,m)=>Ot(l,h=>Nc(h,m)),dk=(l,m)=>l[m],Ws=(l,m)=>{if(l.length===0)return 0;const h=l[0];return Ts(l,x=>!m(h.element,x.element)).getOr(l.length)},RS=(l,m,h,v)=>{const x=dk(l,m),_=x.section==="colgroup",M=Ws(x.cells.slice(h),v),I=_?1:Ws(Zo(l.slice(m),h),v);return{colspan:M,rowspan:I}},fs=(l,m)=>{const h=Ot(l,x=>Ot(x.cells,Xt)),v=(x,_,M,I)=>{for(let Z=x;Z<x+M;Z++)for(let Q=_;Q<_+I;Q++)h[Z][Q]=!0};return Ot(l,(x,_)=>{const M=lo(x.cells,(I,Z)=>{if(h[_][Z]===!1){const Q=RS(l,_,Z,m);return v(_,Z,Q.rowspan,Q.colspan),[pd(I.element,Q.rowspan,Q.colspan,I.isNew)]}else return[]});return ue(x.element,M,x.section,x.isNew)})},Fg=(l,m,h)=>{const v=[];Ne(l.colgroups,x=>{const _=[];for(let M=0;M<l.grid.columns;M++){const I=Dn.getColumnAt(l,M).map(.getOrThunk(()=>xe(m.colGap(),!0,!1));_.push(I)}v.push(qe(x.element,_,"colgroup",h))});for(let x=0;x<l.grid.rows;x++){const _=[];for(let Z=0;Z<l.grid.columns;Z++){const Q=Dn.getAt(l,x,Z).map(.getOrThunk(()=>xe(m.gap(),!0,!1));_.push(Q)}const M=l.all[x],I=qe(M.element,_,M.section,h);v.push(I)}return v},hr=Ss=l=>fs(l,Eo),yi=(l,m)=>jn(l.all,h=>$(h.cells,v=>Eo(m,v.element))),ly=(l,m,h)=>{const v=Ot(m.selection,_=>tp(_).bind(M=>yi(l,M)).filter(h)),x=mt(v);return jo(x.length>0,x)},bc=(l,m,h,v,x)=>(_,M,I,Z)=>{const Q=Dn.fromTable(_),me=te.from(Z==null?void 0:Z.section).getOrThunk(km.fallback);return m(Q,M).map(ut=>{const lt=hr(Q,I),$e=l(lt,ut,Eo,x(I),me),ft=mr($e.grid),Me=Ss($e.grid);return{info:ut,grid:Me,cursor:$e.cursor,lockedColumns:ft}}).bind(ut=>{const lt=H0(_,ut.grid),$e=te.from(Z==null?void 0:Z.sizing).getOrThunk(()=>Ea.getTableSize(_)),ft=te.from(Z==null?void 0:Z.resize).getOrThunk(cy);return h(_,ut.grid,ut.info,{sizing:$e,resize:ft,section:me}),v(_),Jo(_,hm),ut.lockedColumns.length>0&&as(_,hm,ut.lockedColumns.join(",")),te.some({cursor:ut.cursor,newRows:lt.newRows,newCells:lt.newCells})})},Dp=(l,m)=>tp(m.element).bind(h=>yi(l,h).map(),Lg=(l,m)=>ly(l,m,_e).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),Iu=(l,m)=>m.mergable,Ig=(l,m)=>m.unmergable,_m=(l,m)=>ly(l,m,_e),Rd=(l,m)=>ly(l,m,h=>!h.isLocked),mk=(l,m)=>yi(l,m).exists(h=>!h.isLocked),NS=(l,m)=>no(m,h=>mk(l,h)),PD=(l,m)=>Iu(l,m).filter(h=>NS(l,h.cells)),$D=(l,m)=>Ig(l,m).filter(h=>NS(l,h)),bl=(l,m,h,v)=>{const x=ar(l).rows;if(x.length===0)return l;for(let _=m.startRow;_<=m.finishRow;_++)for(let M=m.startCol;M<=m.finishCol;M++){const I=x[_],Z=Nc(I,M).isLocked;gm(I,M,xe(v(),!1,Z))}return l},Zc=(l,m,h,v)=>{const x=ar(l).rows;let _=!0;for(let M=0;M<x.length;M++)for(let I=0;I<wa(x[0]);I++){const Z=x[M],Q=Nc(Z,I),me=Q.element,Ue=h(me,m);Ue&&!_?gm(Z,I,xe(v(),!0,Q.isLocked)):Ue&&(_=!1)}return l},fk=(l,m)=>ye(l,(h,v)=>ze(h,x=>m(x.element,v.element))?h:h.concat([v]),[]),gk=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&Ne(l,x=>{const _=x.cells[m-1];let M=0;const I=v();for(;x.cells.length>m+M&&h(_.element,x.cells[m+M].element);)gm(x,m+M,xe(I,!0,x.cells[m+M].isLocked)),M++}),l),Am=(l,m,h,v)=>{const x=ar(l).rows;if(m>0&&m<x.length){const _=x[m-1].cells,M=fk(_,h);Ne(M,I=>{let Z=te.none();for(let Q=m;Q<x.length;Q++)for(let me=0;me<wa(x[0]);me++){const Ue=x[Q],ut=Nc(Ue,me);h(ut.element,I.element)&&(Z.isNone()&&(Z=te.some(v())),Z.each($e=>{gm(Ue,me,xe($e,!0,ut.isLocked))}))}})}return l},Rp=l=>{const m=_=>_(l),h=j(l),v=()=>x,x={tag:!0,inner:l,fold:(_,M)=>M(l),isValue:_e,isError:Xt,map:_=>Hu.value(_(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:_=>{_(l)},toOptional:()=>te.some(l)};return x},V0=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,x)=>v(l),isValue:Xt,isError:_e,map:m,mapError:v=>Hu.error(v(l)),bind:m,exists:Xt,forall:_e,getOr:Ve,or:Ve,getOrThunk:Jn,orThunk:Jn,getOrDie:bt(String(l)),each:Tt,toOptional:te.none};return h},Hu={value:Rp,error:V0,fromOption:(l,m)=>l.fold(()=>V0(m),Rp)},Hg=(l,m,h)=>{if(l.row>=m.length||l.column>wa(m[0]))return Hu.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),x=v[0].cells.slice(l.column),_=wa(h[0]),M=h.length;return Hu.value({rowDelta:v.length-M,colDelta:x.length-_})},Vg=(l,m)=>{const h=wa(l[0]),v=wa(m[0]);return{rowDelta:0,colDelta:h-v}},zg=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},Ff=(l,m,h,v)=>{const x=m.section==="colgroup"?h.col:h.cell;return pn(l,_=>xe(x(),!0,v(_)))},MS=(l,m,h,v)=>{const x=l[l.length-1];return l.concat(pn(m,()=>{const _=x.section==="colgroup"?h.colgroup:h.row,M=bg(x,_,Ve),I=Ff(M.cells.length,M,h,Z=>$o(v,Z.toString()));return dp(M,I)}))},Fs=(l,m,h,v)=>Ot(l,x=>{const _=Ff(m,x,h,Xt);return aa(x,v,_)}),BS=(l,m,h)=>Ot(l,v=>ye(h,(x,_)=>{const M=Ff(1,v,m,_e)[0];return _u(x,_,M)},v)),Ug=(l,m,h)=>{const v=m.colDelta<0?Fs:Ve,x=m.rowDelta<0?MS:Ve,_=mr(l),M=wa(l[0]),I=ze(_,me=>me===M-1),Z=v(l,Math.abs(m.colDelta),h,I?M-1:M),Q=mr(Z);return x(Z,Math.abs(m.rowDelta),h,Re(Q,_e))},PS=(l,m,h,v)=>{const x=Nc(l[m],h),_=hn(v,x.element),M=l[m];return l.length>1&&wa(M)>1&&(h>0&&_(cr(M,h-1))||h<M.cells.length-1&&_(cr(M,h+1))||m>0&&_(cr(l[m-1],h))||m<l.length-1&&_(cr(l[m+1],h)))},U0=(l,m,h,v,x,_)=>{const M=l.row,I=l.column,Z=h.length,Q=wa(h[0]),me=M+Z,Ue=I+Q+_.length,ut=Re(_,_e);for(let lt=M;lt<me;lt++){let $e=0;for(let ft=I;ft<Ue;ft++){if(ut[ft]){$e++;continue}PS(m,lt,ft,x)&&Zc(m,cr(m[lt],ft),x,v.cell);const Me=ft-I-$e,At=Nc(h[lt-M],Me),Qt=At.element,Sn=v.replace(Qt);gm(m[lt],ft,xe(Sn,!0,At.isLocked))}}return m},Mc=(l,m,h)=>{const v=wa(m[0]),x=ar(m).cols.length+l.row,_=pn(v-l.column,,M=$(_,I=>no(h,Z=>Z!==I)).getOr(v-1);return{row:x,column:M}},Ci=(l,m,h)=>it(h,v=>v>=l.column&&v<=wa(m[0])+l.column),$S=(l,m,h,v,x)=>{const _=mr(m),M=Mc(l,m,_),I=ar(h).rows,Z=Ci(M,I,_);return Hg(M,m,I).map(me=>{const Ue={...me,colDelta:me.colDelta-Z.length},ut=Ug(m,Ue,v),lt=mr(ut),$e=Ci(M,I,lt);return U0(M,ut,I,v,x,$e)})},W0=(l,m,h,v,x)=>{gk(m,l,x,v.cell);const _=zg(h,m),M=Ug(h,_,v),I=zg(m,M),Z=Ug(m,I,v);return Ot(Z,},Lf=(l,m,h,v,x)=>{Am(m,l,x,v.cell);const _=mr(m),M=Vg(m,h),I={...M,colDelta:M.colDelta-_.length},Z=Ug(m,I,v),{cols:Q,rows:me}=ar(Z),Ue=mr(Z),ut=Vg(h,m),lt={...ut,colDelta:ut.colDelta+Ue.length},$e=BS(h,v,Ue),ft=Ug($e,lt,v);return[...Q,...me.slice(0,l),...ft,...me.slice(l,me.length)]},hk=(l,m,h,v)=>bg(l,x=>v(x,h),m),FS=(l,m,h,v,x)=>{const{rows:_,cols:M}=ar(l),I=_.slice(0,m),Z=_.slice(m),Q=hk(_[h],(me,Ue)=>m>0&&m<_.length&&v(cr(_[m-1],Ue),cr(_[m],Ue))?Nc(_[m],Ue):xe(x(me.element,v),!0,me.isLocked),v,x);return[...M,...I,Q,...Z]},uy=(l,m,h,v,x,_,M)=>{if(h==="colgroup"||!v){const I=Nc(l,x);return xe(M(I.element,_),!0,!1)}else return Nc(l,m)},ti=(l,m,h,v,x)=>Ot(l,_=>{const M=m>0&&m<wa(_)&&v(cr(_,m-1),cr(_,m)),I=uy(_,m,_.section,M,h,v,x);return _u(_,m,I)}),Z0=(l,m)=>lo(l,h=>{const v=h.cells,x=It(m,(_,M)=>M>=0&&M<_.length?_.slice(0,M).concat(_.slice(M+1)):_,v);return x.length>0?[qe(h.element,x,h.section,h.isNew)]:[]}),Zs=(l,m,h)=>{const{rows:v,cols:x}=ar(l);return[...x,...v.slice(0,m),...v.slice(h+1)]},Zl=(l,m,h,v)=>cr(l[m],h)!==void 0&&m>0&&v(cr(l[m-1],h),cr(l[m],h)),Wg=(l,m,h)=>m>0&&h(cr(l,m-1),cr(l,m)),Om=(l,m,h,v)=>Zl(l,m,h,v)||Wg(l[m],h,v),If=(l,m)=>no(m,Ve)&&P0(l.cells)?_e:(v,x,_)=>!(wo(v.element)==="th"&&m[_]),Hf=(l,m)=>no(m,Ve)&&P0(l)?_e:(v,x,_)=>!(wo(v.element)==="th"&&m[x]),Nd=(l,m,h,v)=>{const x=_=M=>x(M)?`${M}group`:M;return l?Bg(m)?_(h):null:v&&Bg(m)?_(h==="row"?"col":"row"):null},LS=(l,m)=>(h,v,x)=>te.some(Nd(l,h.element,"col",m[x])),Vf=(l,m)=>(h,v)=>te.some(Nd(l,h.element,"row",m[v])),Dm=(l,m,h)=>xe(h(l.element,m),!0,l.isLocked),zf=(l,m,h,v,x,_,M)=>{const I=Z=>ze(m,Q=>h(Z.element,Q.element));return Ot(l,(Z,Q)=>g0(Z,(me,Ue)=>{if(I(me)){const ut=M(me,Q,Ue)?x(me,h,v):me;return _(ut,Q,Ue).each(lt=>{gu(ut.element,{scope:te.from(lt)})}),ut}else return me}))},IS=(l,m,h)=>lo(l,(v,x)=>Om(l,x,m,h)?[]:[Nc(v,m)]),pk=(l,m,h)=>{const v=l[m];return lo(v.cells,(x,_)=>Om(l,m,_,h)?[]:[x])},dy=(l,m,h,v,x)=>{const _=ar(l).rows,M=lo(m,me=>IS(_,me,v)),I=Ot(_,me=>P0(me.cells)),Z=Hf(M,I),Q=Vf(h,I);return zf(l,M,v,x,Dm,Q,Z)},bk=(l,m,h,v,x,_,M)=>{const{cols:I,rows:Z}=ar(l),Q=Z[m[0]],me=lo(m,Me=>pk(Z,Me,x)),Ue=Ot(Q.cells,,ut=[...Z];Ne(m,;const lt=[...I,...ut],$e=If(Q,Ue),ft=LS(v,Ue);return zf(lt,me,x,_,M.transformCell,ft,$e)},j0=(l,m,h,v)=>{const x=ar(l).rows,_=Ot(m,M=>Nc(x[M.row],M.column));return zf(l,_,h,v,Dm,te.none,_e)},ni={generate:l=>{if(!bs(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return Ne(l,(v,x)=>{const _=Ct(v);if(_.length!==1)throw new Error("one and only one name per case");const M=_[0],I=v[M];if(h[M]!==void 0)throw new Error("duplicate key detected:"+M);if(M==="cata")throw new Error("cannot have a case named cata (sorry)");if(!bs(I))throw new Error("case arguments must be an array");m.push(M),h[M]=(...Z)=>{const Q=Z.length;if(Q!==I.length)throw new Error("Wrong number of arguments to case "+M+". Expected "+I.length+" ("+I+"), got "+Q);return{fold:(...Ue)=>{if(Ue.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Ue.length);return Ue[x].apply(null,Z)},match:Ue=>{const ut=Ct(Ue);if(m.length!==ut.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+ut.join(","));if(!no(m,$e=>mn(ut,$e)))throw new Error("Not all branches were specified when using match. Specified: "+ut.join(", ")+`
Required: `+m.join(", "));return Ue[M].apply(null,Z)},log:Ue=>{}}}}),h}},Zg={...ni.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},VS=(l,m)=>l.length===0?Zg.none():l.length===1?Zg.only(0):m===0?Zg.left(0,1):m===l.length-1?Zg.right(m-1,m):m>0&&m<l.length-1?Zg.middle(m-1,m,m+1):Zg.none(),vk=(l,m,h,v,x)=>{const _=l.slice(0),M=VS(l,m),I=j(Ot(_,j(0))),Z=ut=>v.singleColumnWidth(_[ut],h),Q=(ut,lt)=>x.calcLeftEdgeDeltas(_,ut,lt,h,v.minCellWidth(),v.isRelative),me=(ut,lt,$e)=>x.calcMiddleDeltas(_,ut,lt,$e,h,v.minCellWidth(),v.isRelative),Ue=(ut,lt)=>x.calcRightEdgeDeltas(_,ut,lt,h,v.minCellWidth(),v.isRelative);return M.fold(I,Z,Q,me,Ue)},Np=(l,m,h)=>{let v=0;for(let x=l;x<m;x++)v+=h[x]!==void 0?h[x]:0;return v},Rm=(l,m)=>{const h=Dn.justCells(l);return Ot(h,v=>{const x=Np(v.column,v.column+v.colspan,m);return{element:v.element,width:x,colspan:v.colspan}})},G0=(l,m)=>{const h=Dn.justColumns(l);return Ot(h,},Un=(l,m)=>{const h=Dn.justCells(l);return Ot(h,v=>{const x=Np(v.row,v.row+v.rowspan,m);return{element:v.element,height:x,rowspan:v.rowspan}})},oi=(l,m)=>Ot(l.all,,jl=l=>It(l,(m,h)=>m+h,0),fy=(l,m)=>Dn.hasColumns(l)?G0(l,m):Rm(l,m),Co=(l,m,h)=>{const v=fy(l,m);Ne(v,},Mp=(l,m,h,v,x)=>{const _=Dn.fromTable(l),M=x.getCellDelta(m),I=x.getWidths(_,x),Z=h===_.grid.columns-1,Q=v.clampTableDelta(I,h,M,x.minCellWidth(),Z),me=vk(I,h,Q,x,v),Ue=Ot(me,(ut,lt)=>ut+I[lt]);Co(_,Ue,x),v.resizeTable(x.adjustTableWidth,Q,Z)},gy=(l,m,h,v)=>{const x=Dn.fromTable(l),_=ge(x,l,v),M=Ot(_,(me,Ue)=>h===Ue?Math.max(m+me,Gi()):me),I=Un(x,M),Z=oi(x,M);Ne(Z,me=>{vm(me.element,me.height)}),Ne(I,me=>{vm(me.element,me.height)});const Q=jl(M);vm(l,Q)},Ar=(l,m,h,v,x)=>{const _=Dn.generate(m),M=v.getWidths(_,v),I=v.pixelWidth(),{newSizes:Z,delta:Q}=x.calcRedestributedWidths(M,I,h.pixelDelta,v.isRelative);Co(_,Z,v),v.adjustTableWidth(Q)},Vu=(l,m,h,v)=>{const x=Dn.generate(m),_=v.getWidths(x,v);Co(x,_,v)},Nm=l=>ye(l,(h,v)=>ze(h,_=>_.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),hy=Fr("col"),q0=Fr("colgroup"),Bp=l=>wo(l)==="tr"||q0(l),py=l=>{const m=qo(l,"colspan",1),h=qo(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},K0=(l,m=py)=>{const h=I=>hy(I.element)?l.col(I):l.cell(I),v=I=>q0(I.element)?l.colgroup(I):l.row(I),x=I=>{if(Bp(I))return v({element:I});{const Z=I,Q=h(m(Z));return _=te.some({item:Z,replacement:Q}),Q}};let _=te.none();return{getOrInit:(I,Z)=>_.fold(()=>x(I),Q=>Z(I,Q.item)?Q.replacement:x(I))}},zu=l=>m=>{const h=[],v=(M,I)=>$(h,Z=>I(Z.item,M)),x=M=>{const I=l==="td"?{scope:null}:{},Z=m.replace(M,l,I);return h.push({item:M,sub:Z}),Z};return{replaceOrInit:(M,I)=>{if(Bp(M)||hy(M))return M;{const Z=M;return v(Z,I).fold(()=>x(Z),Q=>I(M,Q.item)?Q.sub:x(Z))}}}},Md=l=>lc(l,"scope").map(m=>m.substr(0,3)),Ce={modification:K0,transform:zu,merging:l=>({unmerge:v=>{const x=Md(v);return x.each(_=>as(v,"scope",_)),()=>{const _=l.cell({element:v,colspan:1,rowspan:1});return Ua(_,"width"),Ua(v,"width"),x.each(M=>as(_,"scope",M)),_}},merge:v=>{const x=()=>{const _=mt(Ot(v,Md));if(_.length===0)return te.none();{const M=_[0],I=["row","col"];return ze(_,Q=>Q!==M&&mn(I,Q))?te.none():te.from(M)}};return Ua(v[0],"width"),x().fold(()=>Jo(v[0],"scope"),_=>as(v[0],"scope",_+"group")),j(v[0])}})},Pp=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],jg=(l,m)=>{const h=l.property().name(m);return mn(["ol","ul"],h)},Si=(l,m)=>{const h=l.property().name(m);return mn(Pp,h)},by=(l,m)=>mn(["br","img","hr","input"],l.property().name(m)),ns=Pe(),Y0=l=>Si(ns,l),Bd=l=>jg(ns,l),vy=l=>by(ns,l),X0=l=>{const m=Fr("br"),h=Z=>no(Z,Q=>m(Q)||La(Q)&&hc(Q).trim().length===0),v=Z=>wo(Z)==="li"||ts(Z,Bd).isSome(),x=Z=>Ui(Z).map(Q=>Y0(Q)?!0:vy(Q)?wo(Q)!=="img":!1).getOr(!1),_=Z=>wd(Z).bind(Q=>{const me=x(Q);return uc(Q).map(Ue=>me===!0||v(Ue)||m(Q)||Y0(Ue)&&!Eo(Z,Ue)?[]:[de.fromTag("br")])}).getOr([]),I=(()=>{const Z=lo(l,Q=>{const me=ro(Q);return h(me)?[]:me.concat(_(Q))});return Z.length===0?[de.fromTag("br")]:Z})();Gr(l[0]),wr(l[0],I)},yy=l=>wm(l,!0),$p=l=>{qi(l).length===0&&Hs(l)},Gg=(l,m)=>({grid:l,cursor:m}),Cy=l=>jn(l,m=>jn(m.cells,h=>{const v=h.element;return jo(yy(v),v)})),Ck=(l,m,h)=>{var v,x;const _=ar(l).rows;return te.from((x=(v=_[m])===null||v===void 0?void 0:v.cells[h])===null||x===void 0?void 0:x.element).filter(yy).orThunk(()=>Cy(_))},ua=(l,m,h)=>{const v=Ck(l,m,h);return Gg(l,v)},Or=l=>ye(l,(h,v)=>ze(h,_=>_.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),vc=(l,m,h,v)=>{const x=m[0].row,_=Or(m),M=It(_,(I,Z)=>({grid:FS(I.grid,x,Z.row+I.delta,h,v.getOrInit),delta:I.delta+1}),{grid:l,delta:0}).grid;return ua(M,x,m[0].column)},da=(l,m,h,v)=>{const x=Or(m),_=x[x.length-1],M=_.row+_.rowspan,I=It(x,(Z,Q)=>FS(Z,M,Q.row,h,v.getOrInit),l);return ua(I,M,m[0].column)},Bc=(l,m,h,v)=>{const x=m.details,_=Nm(x),M=_[0].column,I=It(_,(Z,Q)=>({grid:ti(Z.grid,M,Q.column+Z.delta,h,v.getOrInit),delta:Z.delta+1}),{grid:l,delta:0}).grid;return ua(I,x[0].row,M)},jc=(l,m,h,v)=>{const x=m.details,_=x[x.length-1],M=_.column+_.colspan,I=Nm(x),Z=It(I,(Q,me)=>ti(Q,M,me.column,h,v.getOrInit),l);return ua(Z,x[0].row,M)},Dr=(l,m,h,v)=>{const x=Nm(m),_=Ot(x,I=>I.column),M=dy(l,_,!0,h,v.replaceOrInit);return ua(M,m[0].row,m[0].column)},Sy=(l,m,h,v)=>{const x=j0(l,m,h,v.replaceOrInit);return ua(x,m[0].row,m[0].column)},Fp=(l,m,h,v)=>{const x=Nm(m),_=Ot(x,I=>I.column),M=dy(l,_,!1,h,v.replaceOrInit);return ua(M,m[0].row,m[0].column)},wy=(l,m,h,v)=>{const x=j0(l,m,h,v.replaceOrInit);return ua(x,m[0].row,m[0].column)},Lp=(l,m)=>(h,v,x,_,M)=>{const I=Or(v),Z=Ot(I,me=>me.row),Q=bk(h,Z,l,m,x,_.replaceOrInit,M);return ua(Q,v[0].row,v[0].column)},xy=Lp("thead",!0),zS=Lp("tbody",!1),J0=Lp("tfoot",!1),Ey=(l,m,h,v)=>{const x=Nm(m.details),_=Z0(l,Ot(x,I=>I.column)),M=_.length>0?_[0].cells.length-1:0;return ua(_,x[0].row,Math.min(x[0].column,M))},Sk=(l,m,h,v)=>{const x=Or(m),_=Zs(l,x[0].row,x[x.length-1].row),M=_.length>0?_.length-1:0;return ua(_,Math.min(m[0].row,M),m[0].column)},wk=(l,m,h,v)=>{const x=m.cells;X0(x);const _=bl(l,m.bounds,h,v.merge(x));return Gg(_,te.from(x[0]))},US=(l,m,h,v)=>{const _=It(m,(M,I)=>Zc(M,I,h,v.unmerge(I)),l);return Gg(_,te.from(m[0]))},xk=(l,m,h,v)=>{const _=((Z,Q)=>{const me=Dn.fromTable(Z);return Fg(me,Q,!0)})(m.clipboard,m.generators),M=Nl(m.row,m.column);return $S(M,l,_,m.generators,h).fold(Z=>ua(Z,m.row,m.column))},qg=(l,m,h)=>{const v=c0(l,h.section),x=Dn.generate(v);return Fg(x,m,!0)},Q0=(l,m,h,v)=>{const x=ar(l).rows,_=m.cells[0].column,M=x[m.cells[0].row],I=qg(m.clipboard,m.generators,M),Z=W0(_,l,I,m.generators,h);return ua(Z,m.cells[0].row,m.cells[0].column)},WS=(l,m,h,v)=>{const x=ar(l).rows,_=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,M=x[m.cells[0].row],I=qg(m.clipboard,m.generators,M),Z=W0(_,l,I,m.generators,h);return ua(Z,m.cells[0].row,m.cells[0].column)},FD=(l,m,h,v)=>{const x=ar(l).rows,_=m.cells[0].row,M=x[_],I=qg(m.clipboard,m.generators,M),Z=Lf(_,l,I,m.generators,h);return ua(Z,m.cells[0].row,m.cells[0].column)},ka=(l,m,h,v)=>{const x=ar(l).rows,_=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,M=x[m.cells[0].row],I=qg(m.clipboard,m.generators,M),Z=Lf(_,l,I,m.generators,h);return ua(Z,m.cells[0].row,m.cells[0].column)},LD=(l,m)=>{const h=Dn.fromTable(l);return _m(h,m).bind(x=>{const _=x[x.length-1],M=x[0].column,I=_.column+_.colspan,Z=Kn(Ot(h.all,Q=>it(Q.cells,));return Pg(Z)}).getOr("")},Gl=(l,m)=>{const h=Dn.fromTable(l);return _m(h,m).bind(Pg).getOr("")},et=(l,m)=>{const h=Dn.fromTable(l);return _m(h,m).bind(x=>{const _=x[x.length-1],M=x[0].row,I=_.row+_.rowspan,Z=h.all.slice(M,I);return uk(Z)}).getOr("")},Ty=(l,m,h,v)=>Vu(l,m,h,v.sizing),Rr=(l,m,h,v)=>Ar(l,m,h,v.sizing,v.resize),ZS=(l,m)=>ze(m,,eb=(l,m)=>ze(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),ky=(l,m)=>{const h=pm(l),v=Nm(m);return ye(v,(x,_)=>{const I=h[_.column].map(fl).getOr(0);return x+I},0)},_a=l=>(m,h)=>_m(m,h).filter(v=>!(l?ZS:eb)(m,v)).map(,Ek=(l,m)=>Rd(l,m).map(h=>({details:h,pixelDelta:-ky(l,h)})),jS=l=>(m,h)=>Lg(m,h).filter(v=>!(l?ZS:eb)(m,v.cells)),Aa=Ce.transform("th"),Kg=Ce.transform("td"),Ip=bc(vc,_m,Tt,Tt,Ce.modification),Uu=bc(da,_m,Tt,Tt,Ce.modification),vl=bc(Bc,_a(!0),Rr,Tt,Ce.modification),vt=bc(jc,_a(!1),Rr,Tt,Ce.modification),wi=bc(Ey,Ek,Rr,$p,Ce.modification),GS=bc(Sk,_m,Tt,$p,Ce.modification),qS=bc(Dr,Rd,Tt,Tt,Aa),_y=bc(Fp,Rd,Tt,Tt,Kg),KS=bc(xy,Rd,Tt,Tt,Aa),Ay=bc(zS,Rd,Tt,Tt,Kg),Oy=bc(J0,Rd,Tt,Tt,Kg),Tk=bc(Sy,Rd,Tt,Tt,Aa),Dy=bc(wy,Rd,Tt,Tt,Kg),kk=bc(wk,PD,Ty,Tt,Ce.merging),Gc=bc(US,$D,Ty,Tt,Ce.merging),Hp=bc(xk,Dp,Ty,Tt,Ce.modification),_k=bc(Q0,jS(!0),Tt,Tt,Ce.modification),Ak=bc(WS,jS(!1),Tt,Tt,Ce.modification),Ry=bc(FD,Lg,Tt,Tt,Ce.modification),Ok=bc(ka,Lg,Tt,Tt,Ce.modification),YS=LD,XS=Gl,Vp=et,JS=(l,m)=>l.dispatch("NewRow",{node:m}),Ny=Uf=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},Dk=(l,m,h,v,x)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:x})},Rk=l=>{l.dispatch("TableSelectionClear")},My=(l,m,h,v,x)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:x})},Nk=Pd={structure:!1,style:!0},_n={structure:!0,style:!1},By={structure:!0,style:!0},qc=(l,m)=>Td(l)?Ea.percentageSize(m):Sm(l)?Ea.pixelSize(m):Ea.getTableSize(m),tb=(l,m,h)=>{const v=fa=>wo(E0(fa))==="table",x=fa=>!v(l)||Mg(fa).rows>1,_=fa=>!v(l)||Mg(fa).columns>1,M=Ed(l),I=Us(l)?Tt:ry,Z=fa=>{switch(Df(l)){case"section":return km.section();case"sectionCells":return km.sectionCells();case"cells":return km.cells();default:return km.getTableSectionType(fa,"section")}},Q=(fa,O2)=>O2.cursor.fold(()=>{const y1=qi(fa);return le(y1).filter(Qo).map(Ku=>{h.clearSelectedCells(fa.dom);const Lc=l.dom.createRng();return Lc.selectNode(Ku.dom),l.selection.setRng(Lc),as(Ku,"data-mce-selected","1"),Lc})},y1=>{const Ku=_S(y1),Lc=l.dom.createRng();return Lc.setStart(Ku.element.dom,Ku.offset),Lc.setEnd(Ku.element.dom,Ku.offset),l.selection.setRng(Lc),h.clearSelectedCells(fa.dom),te.some(Lc)}),me=(fa,O2,y1,Ku)=>(Lc,C1,Yw=!1)=>{Ul(Lc);const Xw=de.fromDom(l.getDoc()),xh=xg(y1,Xw,M),Jw={sizing:qc(l,Lc),resize:Us(l)?AS():cy(),section:Z(Lc)};return O2(Lc)?fa(Lc,C1,xh,Jw).bind(Pb=>{m.refresh(Lc.dom),Ne(Pb.newRows,eg=>{JS(l,eg.dom)}),Ne(Pb.newCells,eg=>{Ny(l,eg.dom)});const Qw=Q(Lc,Pb);return Qo(Lc)&&(Ul(Lc),Yw||Uf(l,Lc.dom,Ku)),Qw.map(eg=>({rng:eg,effect:Ku}))}):te.none()},Ue=me(GS,x,Tt,_n),ut=me(wi,_,Tt,_n),lt=me(Ip,_e,Tt,_n),$e=me(Uu,_e,Tt,_n),ft=me(vl,_e,I,_n),Me=me(vt,_e,I,_n),At=me(kk,_e,Tt,_n),Qt=me(Gc,_e,Tt,_n),Sn=me(_k,_e,Tt,_n),Yo=me(Ak,_e,Tt,_n),Mr=me(Ry,_e,Tt,_n),Ls=me(Ok,_e,Tt,_n),Ra=me(Hp,_e,Tt,By),Jf=me(Tk,_e,Tt,_n),Qf=me(Dy,_e,Tt,_n),A2=me(qS,_e,Tt,_n),Bb=me(_y,_e,Tt,_n),To=me(KS,_e,Tt,_n),Yc=me(Ay,_e,Tt,_n),Cc=me(Oy,_e,Tt,_n);return{deleteRow:Ue,deleteColumn:ut,insertRowsBefore:lt,insertRowsAfter:$e,insertColumnsBefore:ft,insertColumnsAfter:Me,mergeCells:At,unmergeCells:Qt,pasteColsBefore:Sn,pasteColsAfter:Yo,pasteRowsBefore:Mr,pasteRowsAfter:Ls,pasteCells:Ra,makeCellsHeader:Jf,unmakeCellsHeader:Qf,makeColumnsHeader:A2,unmakeColumnsHeader:Bb,makeRowsHeader:To,makeRowsBody:Yc,makeRowsFooter:Cc,getTableRowType:Vp,getTableCellType:XS,getTableColType:YS}},Py=(l,m,h)=>{const v=qo(l,m,1);h===1||v<=1?Jo(l,m):as(l,m,Math.min(h,v))},$y=(l,m)=>h=>{const v=h.column+h.colspan-1,x=h.column;return v>=l&&x<m},nb=(l,m,h)=>{if(Dn.hasColumns(l)){const v=it(Dn.justColumns(l),$y(m,h)),x=Ot(v,M=>{const I=za(M.element);return Py(I,"span",h-m),I}),_=de.fromTag("colgroup");return wr(_,x),[_]}else return[]},QS=(l,m,h)=>Ot(l.all,v=>{const x=it(v.cells,$y(m,h)),_=Ot(x,I=>{const Z=za(I.element);return Py(Z,"colspan",h-m),Z}),M=de.fromTag("tr");return wr(M,_),M}),Mk=(l,m)=>{const h=Dn.fromTable(l);return Rd(h,m).map(x=>{const _=x[x.length-1],M=x[0].column,I=_.column+_.colspan,Z=nb(h,M,I),Q=QS(h,M,I);return[...Z,...Q]})},Bk=(l,m,h)=>{const v=Dn.fromTable(l);return _m(v,m).bind(_=>{const M=Fg(v,h,!1),Z=ar(M).rows.slice(_[0].row,_[_.length-1].row+_[_.length-1].rowspan),Q=lo(Z,Ue=>{const ut=it(Ue.cells,;return ut.length>0?[{...Ue,cells:ut}]:[]}),me=Ss(Q);return jo(me.length>0,me)}).map(_=>DS(_))},Yg=ni.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ew=(l,m,h)=>{const v=h.substring(0,h.length-l.length),x=parseFloat(v);return v===x.toString()?m(x):Yg.invalid(h)},Mm={...Yg,from:l=>Ps(l,"%")?ew("%",Yg.percent,l):Ps(l,"px")?ew("px",Yg.pixels,l):Yg.invalid(l)},Pk=(l,m)=>Ot(l,h=>Mm.from(h).fold(()=>h,x=>x/m*100+"%",x=>x+"%")),Xg=(l,m,h)=>{const v=h/m;return Ot(l,x=>Mm.from(x).fold(()=>x,M=>M/100*h+"px"))},$k=(l,m)=>{const h=l.fold(()=>j(""),v=>{const x=v/m;return j(x+"px")},()=>{const v=100/m;return j(v+"%")});return pn(m,h)},Fy=(l,m,h)=>l.fold(()=>m,v=>Xg(m,h,v),v=>Pk(m,h)),tw=(l,m,h)=>{const v=Mm.from(h),x=no(l,_=>_==="0px")?$k(v,l.length):Fy(v,l,m);return ow(x)},Wf=(l,m)=>l.length===0?m:It(l,(h,v)=>Mm.from(v).fold(j(0),Ve,Ve)+h,0),Fk=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},nw=(l,m)=>Mm.from(l).fold(j(l),h=>h+m+"px",,ow=l=>{if(l.length===0)return l;const m=It(l,(v,x)=>{const _=Mm.from(x).fold(M=>Fk(M,"px"),M=>({value:M+"%",remainder:0}));return{output:[_.value].concat(v.output),remainder:v.remainder+_.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([nw(h[h.length-1],Math.round(m.remainder))])},Jg=Mm.from,sw=(l,m,h)=>{Ne(m,v=>{const x=l.slice(v.column,v.colspan+v.column),_=Wf(x,$s());us(v.element,"width",_+h)})},Ly=(l,m,h)=>{Ne(m,(v,x)=>{const _=Wf([l[x]],$s());us(v.element,"width",_+h)})},Lk=(l,m,h,v)=>{Ne(h,x=>{const _=l.slice(x.row,x.rowspan+x.row),M=Wf(_,Gi());us(x.element,"height",M+v)}),Ne(m,(x,_)=>{us(x.element,"height",l[_])})},rw=l=>Jg(l).fold(j("px"),j("px"),j("%")),Wu=(l,m,h)=>{const v=Dn.fromTable(l),x=v.all,_=Dn.justCells(v),M=Dn.justColumns(v);m.each(I=>{const Z=rw(I),Q=Sa(l),me=Tf(v,l),Ue=tw(me,Q,I);Dn.hasColumns(v)?Ly(Ue,M,Z):sw(Ue,_,Z),us(l,"width",I)}),h.each(I=>{const Z=rw(I),Q=gp(l),me=Ga(v,l,Et),Ue=tw(me,Q,I);Lk(Ue,x,_,Z),us(l,"height",I)})},zp=Il,Up=qT,ob=Hl,Wp=Qi=l=>{const m=oo(l);Wu(l,te.some(m),te.none()),Wp(l)},Qg=l=>{const m=vp(l);Wu(l,te.some(m),te.none()),Wp(l)},Zp=l=>{Ua(l,"width");const m=vf(l),h=m.length>0?m:qi(l);Ne(h,,Wp(l)},Bm={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},sb=()=>de.fromTag("th"),Ik=()=>de.fromTag("td"),Hk=()=>de.fromTag("col"),cw=(l,m,h,v)=>{const x=de.fromTag("tr");for(let _=0;_<l;_++){const M=v<m||_<h?sb():Ik();_<h&&as(M,"scope","row"),v<m&&as(M,"scope","col"),Oo(M,de.fromTag("br")),Oo(x,M)}return x},Vk=l=>{const m=de.fromTag("colgroup");return pn(l,,m},Iy=(l,m,h,v)=>pn(l,x=>cw(m,h,v,x)),zk=(l,m,h,v,x,_=Bm)=>{const M=de.fromTag("table"),I=x!=="cells";qr(M,_.styles),na(M,_.attributes),_.colGroups&&Oo(M,Vk(m));const Z=Math.min(l,h);if(I&&h>0){const lt=de.fromTag("thead");Oo(M,lt);const ft=Iy(h,m,x==="sectionCells"?Z:0,v);wr(lt,ft)}const Q=de.fromTag("tbody");Oo(M,Q);const me=I?l-Z:l,ut=Iy(me,m,I?0:h,v);return wr(Q,ut),M},Uk=l=>l.dom.innerHTML,aw=l=>{const m=de.fromTag("div"),h=de.fromDom(l.dom.cloneNode(!0));return Oo(m,h),Uk(m)},Wk=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},iw=(l,m)=>{X(m,"td,th").each(hn(Wk,l))},Zk=(l,m)=>{Ne(_c(m,"tr"),h=>{JS(l,h.dom),Ne(_c(h,"th,td"),v=>{Ny(l,v.dom)})})},rb=l=>io(l)&&l.indexOf("%")!==-1,jk=(l,m,h,v,x)=>{const _=Gv(l),M={styles:_,attributes:zl(l),colGroups:Cp(l)};return l.undoManager.ignore(()=>{const I=zk(h,m,x,v,Df(l),M);as(I,"data-mce-id","__mce");const Z=aw(I);l.insertContent(Z),l.addVisual()}),X(E0(l),'table[data-mce-id="__mce"]').map(I=>(Sm(l)?Qg(I):Rf(l)?Zp(I):(Td(l)||rb(_.width))&&Qi(I),Ul(I),Jo(I,"data-mce-id"),Zk(l,I),iw(l,I),I.dom)).getOrNull()},lw=(l,m,h,v={})=>{const x=if(x(m)&&x(h)){const _=v.headerRows||0,M=v.headerColumns||0;return jk(l,h,m,M,_)}else return null};var eh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Hy="x-tinymce/dom-table-",Vy=Hy+"rows",zy=Hy+"columns",uw=l=>{const m=eh.FakeClipboardItem(l);eh.write([m])},Uy=l=>{var m;const h=(m=eh.read())!==null&&m!==void 0?m:[];return jn(h,v=>te.from(v.getType(l)))},Gk=l=>{Uy(l).isSome()&&eh.clear()},cb=l=>{l.fold(qk,m=>uw({[Vy]:m}))},ab=()=>Uy(Vy),qk=()=>Gk(Vy),Wy=l=>{l.fold(Kk,},dw=()=>Uy(zy),Kk=()=>Gk(zy),Zy=l=>Wl(vi(l),Pu(l)).filter(k0),Yk=l=>Ap(vi(l),Pu(l)).filter(k0),th=(l,m)=>{const h=Pu(l),v=()=>Zy(l).each(Me=>{Wc(Me,h).filter(re(h)).each(At=>{const Qt=de.fromText("");if(Tc(At,Qt),Hs(At),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Sn=l.dom.createRng();Sn.setStart(Qt.dom,0),Sn.setEnd(Qt.dom,0),l.selection.setRng(Sn),l.nodeChanged()}})}),x=Me=>Zy(l).each(At=>{Rf(l)||Sm(l)||Td(l)||Wc(At,h).each(Sn=>{Me==="relative"&&!zp(Sn)?Qi(Sn):Me==="fixed"&&!Up(Sn)?Qg(Sn):Me==="responsive"&&!ob(Sn)&&Zp(Sn),Ul(Sn),Uf(l,Sn.dom,_n)})}),_=Me=>Wc(Me,h),M=Me=>Yk(l).bind(At=>_(At).map(Qt=>Me(Qt,At))),I=(Me,At)=>{M(Qt=>{l.formatter.toggle("tableclass",{value:At},Qt.dom),Uf(l,Qt.dom,Pd)})},Z=(Me,At)=>{M(Qt=>{const Sn=Ji(l),Mr=no(Sn,Ls=>l.formatter.match("tablecellclass",{value:At},Ls.dom))?l.formatter.remove:l.formatter.apply;Ne(Sn,,Uf(l,Qt.dom,Pd)})},Q=()=>{Zy(l).each(Me=>{Wc(Me,h).each(At=>{V(At,"caption").fold(()=>{const Qt=de.fromTag("caption");Oo(Qt,de.fromText("Caption")),jr(At,Qt,0),l.selection.setCursorLocation(Qt.dom,0)},Qt=>{Fr("caption")(Me)&&Dl("td",At).each(,Hs(Qt)}),Uf(l,At.dom,_n)})})},me=Me=>{l.focus()},Ue=(Me,At=!1)=>M((Qt,Sn)=>{const Yo=Ag(Ji(l),Qt,Sn);Me(Qt,Yo,At).each(me)}),ut=()=>M((Me,At)=>{const Qt=Ag(Ji(l),Me,At),Sn=xg(Tt,de.fromDom(l.getDoc()),te.none());return Bk(Me,Qt,Sn)}),lt=()=>M((Me,At)=>{const Qt=Ag(Ji(l),Me,At);return Mk(Me,Qt)}),$e=(Me,At)=>At().each(Qt=>{const Sn=Ot(Qt,Yo=>za(Yo));M((Yo,Mr)=>{const Ls=Eg(de.fromDom(l.getDoc())),Ra=Og(Ji(l),Mr,Sn,Ls);Me(Yo,Ra).each(me)})}),ft=Me=>(At,Qt)=>Ol(Qt,"type").each(Sn=>{Ue(Me(Sn),Qt.no_events)});Cn({mceTableSplitCells:()=>Ue(m.unmergeCells),mceTableMergeCells:()=>Ue(m.mergeCells),mceTableInsertRowBefore:()=>Ue(m.insertRowsBefore),mceTableInsertRowAfter:()=>Ue(m.insertRowsAfter),mceTableInsertColBefore:()=>Ue(m.insertColumnsBefore),mceTableInsertColAfter:()=>Ue(m.insertColumnsAfter),mceTableDeleteCol:()=>Ue(m.deleteColumn),mceTableDeleteRow:()=>Ue(m.deleteRow),mceTableCutCol:()=>lt().each(Me=>{Wy(Me),Ue(m.deleteColumn)}),mceTableCutRow:()=>ut().each(,mceTableCopyCol:()=>lt().each(Me=>Wy(Me)),mceTableCopyRow:mceTablePasteColBefore:()=>$e(m.pasteColsBefore,dw),mceTablePasteColAfter:()=>$e(m.pasteColsAfter,dw),mceTablePasteRowBefore:()=>$e(m.pasteRowsBefore,ab),mceTablePasteRowAfter:()=>$e(m.pasteRowsAfter,ab),mceTableDelete:v,mceTableCellToggleClass:Z,mceTableToggleClass:I,mceTableToggleCaption:Q,mceTableSizingMode:(Me,At)=>x(At),mceTableCellType:ft(Me=>Me==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:ft(Me=>Me==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:ft(},(Me,At)=>l.addCommand(At,Me)),l.addCommand("mceInsertTable",(Me,At)=>{lw(l,At.rows,At.columns,At.options)}),l.addCommand("mceTableApplyCellStyle",(Me,At)=>{const Qt=Mr=>"tablecell"+Mr.toLowerCase().replace("-","");if(!nt(At))return;const Sn=it(Ji(l),k0);if(Sn.length===0)return;const Yo=Wr(At,(Mr,Ls)=>l.formatter.has(Qt(Ls))&&io(Mr));li(Yo)||(Cn(Yo,(Mr,Ls)=>{const Ra=Qt(Ls);Ne(Sn,Jf=>{Mr===""?l.formatter.remove(Ra,{value:null},Jf.dom,!0):l.formatter.apply(Ra,{value:Mr},Jf.dom)})}),_(Sn[0]).each(Mr=>Uf(l,Mr.dom,Pd)))})},Xk=(l,m)=>{const h=Pu(l),v=x=>Ap(vi(l)).bind(_=>Wc(_,h).map(M=>{const I=Ag(Ji(l),M,_);return x(M,I)})).getOr("");Cn({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(x,_)=>l.addQueryValueHandler(_,x))},jy=ni.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Jk=(l,m,h,v)=>l.fold(m,h,v),Qk=l=>l.fold(Ve,Ve,Ve),e_=jy.before,mw=jy.on,t_=jy.after,nc={before:e_,on:mw,after:t_,cata:Jk,getStart:Qk},nh={create:(l,m)=>({selection:l,kill:m})},ib=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},fw=(l,m)=>{const h=l.document.createRange();return Gy(h,m),h},Gy=(l,m)=>l.selectNodeContents(m.dom),gw=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},hw=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},Zf=(l,m,h)=>{const v=l.document.createRange();return gw(v,m),hw(v,h),v},jp=(l,m,h,v,x)=>{const _=l.document.createRange();return _.setStart(m.dom,h),_.setEnd(v.dom,x),_},n_=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),o_=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?te.some(h).map(n_):te.none()},Gp=ni.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),qy=(l,m,h)=>m(de.fromDom(h.startContainer),h.startOffset,de.fromDom(h.endContainer),h.endOffset),pw=(l,m)=>m.match({domRange:h=>({ltr:j(h),rtl:te.none}),relative:(h,v)=>({ltr:wu(()=>Zf(l,h,v)),rtl:wu(()=>te.some(Zf(l,v,h)))}),exact:(h,v,x,_)=>({ltr:wu(()=>jp(l,h,v,x,_)),rtl:wu(()=>te.some(jp(l,x,_,h,v)))})}),Nr=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(x=>x.collapsed===!1).map(x=>Gp.rtl(de.fromDom(x.endContainer),x.endOffset,de.fromDom(x.startContainer),x.startOffset)).getOrThunk(()=>qy(l,Gp.ltr,h)):qy(l,Gp.ltr,h)},bw=(l,m)=>{const h=pw(l,m);return Nr(l,h)},Ky=(l,m)=>bw(l,m).match({ltr:(v,x,_,M)=>{const I=l.document.createRange();return I.setStart(v.dom,x),I.setEnd(_.dom,M),I},rtl:(v,x,_,M)=>{const I=l.document.createRange();return I.setStart(_.dom,M),I.setEnd(v.dom,x),I}});Gp.ltr,Gp.rtl;const oh={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},vw={create:(l,m,h,v)=>({start:nc.on(l,m),finish:nc.on(h,v)})},Yy=(l,m)=>{const h=Ky(l,m);return oh.create(de.fromDom(h.startContainer),h.startOffset,de.fromDom(h.endContainer),h.endOffset)},qp=vw.create,lb=(l,m,h,v,x,_,M)=>Eo(h,x)&&v===_?te.none():pe(h,"td,th",m).bind(I=>pe(x,"td,th",m).bind(Z=>sh(l,m,I,Z,M))),sh=(l,m,h,v,x)=>Eo(h,v)?te.none():hl(h,v,m).bind(_=>{const M=_.boxes.getOr([]);return M.length>1?(x(l,M,_.start,_.finish),te.some(nh.create(te.some(qp(h,0,h,Mu(h))),!0))):te.none()}),r_=(l,m,h,v,x)=>{const _=M=>(x.clearBeforeUpdate(h),x.selectRange(h,M.boxes,M.start,M.finish),M.boxes);return D0(v,l,m,x.firstSelectedSelector,x.lastSelectedSelector).map(_)},Pm=(l,m)=>({item:l,mode:m}),yw=(l,m,h,v=$m)=>l.property().parent(m).map(x=>Pm(x,v)),$m=(l,m,h,v=Fm)=>h.sibling(l,m).map(x=>Pm(x,v)),Fm=(l,m,h,v=Fm)=>{const x=l.property().children(m);return h.first(x).map(M=>Pm(M,v))},Xy=[{current:yw,next:$m,fallback:te.none()},{current:$m,next:Fm,fallback:te.some(yw)},{current:Fm,next:Fm,fallback:te.some($m)}],Cw=(l,m,h,v,x=Xy)=>$(x,M=>M.current===h).bind(M=>M.current(l,m,v,M.next).orThunk(()=>M.fallback.bind(I=>Cw(l,m,I,v)))),Lm={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?te.some(h[h.length-1]):te.none()}),right:()=>({sibling:first:h=>h.length>0?te.some(h[0]):te.none()})},Zu=(l,m,h,v,x,_)=>Cw(l,m,v,x).bind(I=>_(I.item)?te.none():h(I.item)?te.some(I.item):Zu(l,I.item,h,I.mode,x,_)),Kp=(l,m,h,v)=>Zu(l,m,h,$m,Lm.left(),v),rh=(l,m,h,v)=>Zu(l,m,h,$m,Lm.right(),v),Qy=l=>m=>l.property().children(m).length===0,$d=(l,m,h)=>Yp(l,m,Qy(l),h),ql=(l,m,h)=>ub(l,m,Qy(l),h),Yp=Kp,ub=rh,Xp=Pe(),e2=(l,m)=>$d(Xp,l,m),ch=(l,m)=>ql(Xp,l,m),Jp=(l,m,h)=>Yp(Xp,l,m,h),t2=(l,m,h)=>ub(Xp,l,m,h),Sw=(l,m,h)=>ts(l,m,h).isSome(),Im=ni.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),db=(l,m,h)=>{const v=l.getRect(m),x=l.getRect(h);return x.right>v.left&&x.left<v.right},c_=l=>pe(l,"tr"),js={...Im,verify:(l,m,h,v,x,_,M)=>pe(v,"td,th",M).bind(I=>pe(m,"td,th",M).map(Z=>Eo(I,Z)?Eo(v,I)&&Mu(I)===x?_(Z):Im.none("in same cell"):No(c_,[I,Z]).fold(()=>db(l,Z,I)?Im.success():_(Z),Q=>_(Z)))).getOr(Im.none("default")),cata:(l,m,h,v,x)=>l.fold(m,h,v,x)},UD=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),Fd=l=>uc(l).bind(m=>{const h=ro(m);return xw(h,l).map(v=>UD(m,h,l,v))}),xw=(l,m)=>Ts(l,hn(Eo,m)),mb=Fr("br"),Hm=(l,m,h)=>m(l,h).bind(v=>La(v)&&hc(v).trim().length===0?Hm(v,m,h):te.some(v)),Pc=(l,m,h)=>h.traverse(m).orThunk(.map(h.relative),ah=(l,m)=>Sr(l,m).filter(mb).orThunk(()=>Sr(l,m-1).filter(mb)),Qp=(l,m,h,v)=>ah(m,h).bind(x=>v.traverse(x).fold(()=>Hm(x,v.gather,l).map(v.relative),_=>Fd(_).map(M=>nc.on(M.parent,M.index)))),ih=(l,m,h,v)=>(mb(m)?Pc(l,m,v):Qp(l,m,h,v)).map(_=>({start:_,finish:_})),o2=l=>js.cata(l,m=>te.none(),()=>te.none(),m=>te.some(Rg(m,Mu(m)))),lh=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),jf=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),Kl=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),a_=l=>l.top,i_=l=>l.bottom,Vm=(l,m,h)=>h>=0&&h<Mu(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):te.none(),uh=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),fb=ju=(l,m,h)=>Zr(m)?fb(l,m).map(uh):La(m)?Vm(l,m,h).map(uh):te.none(),s2=(l,m)=>Zr(m)?fb(l,m).map(uh):La(m)?l.getRangedRect(m,0,m,Mu(m)).map(uh):te.none(),oc=5,Ld=100,yl=ni.generate([{none:[]},{retry:["caret"]}]),dh=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Kc=(l,m,h)=>bd(m,Y0).fold(Xt,v=>s2(l,v).exists(x=>dh(h,x))),Oa=(l,m,h,v,x)=>{const _=lh(x,oc);return Math.abs(h.bottom-v.bottom)<1||h.top>x.bottom?yl.retry(_):h.top===x.bottom?yl.retry(lh(x,1)):Kc(l,m,x)?yl.retry(Kl(_,oc,0)):yl.none()},Cl={point:a_,adjuster:(l,m,h,v,x)=>{const _=jf(x,oc);return Math.abs(h.top-v.top)<1||h.bottom<x.top?yl.retry(_):h.bottom===x.top?yl.retry(jf(x,1)):Kc(l,m,x)?yl.retry(Kl(_,oc,0)):yl.none()},move:jf,gather:e2},gb={point:i_,adjuster:Oa,move:lh,gather:ch},xi=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>wo(v)==="table").isSome(),Gf=(l,m,h,v,x)=>r2(l,m,h,m.move(v,oc),x),r2=(l,m,h,v,x)=>x===0?te.some(v):xi(l,v.left,m.point(v))?Gf(l,m,h,v,x-1):l.situsFromPoint(v.left,m.point(v)).bind(_=>_.start.fold(te.none,M=>s2(l,M).bind(I=>m.adjuster(l,M,I,h,v).fold(te.none,Z=>r2(l,m,h,Z,x-1))).orThunk(()=>te.some(v)),te.none)),l_=(l,m,h)=>l.point(m)>h.getInnerHeight()?te.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?te.some(-l.point(m)):te.none(),Ew=(l,m,h)=>{const v=l.move(h,oc),x=r2(m,l,h,v,Ld).getOr(v);return l_(l,x,m).fold(()=>m.situsFromPoint(x.left,l.point(x)),_=>(m.scrollBy(0,_),m.situsFromPoint(x.left,l.point(x)-_)))},e1={tryUp:hn(Ew,Cl),tryDown:hn(Ew,gb),getJumpSize:j(oc)},Tw=20,t1=(l,m,h)=>l.getSelection().bind(v=>ih(m,v.finish,v.foffset,h).fold(()=>te.some(Rg(v.finish,v.foffset)),x=>{const _=l.fromSitus(x),M=js.verify(l,v.finish,v.foffset,_.finish,_.foffset,h.failure,m);return o2(M)})),hb=(l,m,h,v,x,_)=>_===0?te.none():d_(l,m,h,v,x).bind(M=>{const I=l.fromSitus(M),Z=js.verify(l,h,v,I.finish,I.foffset,x.failure,m);return js.cata(Z,()=>te.none(),()=>te.some(M),Q=>Eo(h,Q)&&v===0?u_(l,h,v,jf,x):hb(l,m,Q,0,x,_-1),Q=>Eo(h,Q)&&v===Mu(Q)?u_(l,h,v,lh,x):hb(l,m,Q,Mu(Q),x,_-1))}),u_=(l,m,h,v,x)=>ju(l,m,h).bind(_=>kw(l,x,v(_,e1.getJumpSize()))),kw=(l,m,h)=>{const v=vd().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):te.none()},d_=(l,m,h,v,x)=>ju(l,h,v).bind(_=>kw(l,x,_)),WD=(l,m,h)=>t1(l,m,h).bind(v=>hb(l,m,v.element,v.offset,h,Tw).map(l.fromSitus)),_w=(l,m)=>Sw(l,h=>uc(h).exists(v=>Eo(v,m))),Ln=(l,m,h,v,x)=>pe(v,"td,th",m).bind(_=>pe(_,"table",m).bind(M=>_w(x,M)?WD(l,m,h).bind(I=>pe(I.finish,"td,th",m).map(Z=>({start:_,finish:Z,range:I}))):te.none())),Yl=(l,m,h,v,x,_)=>_(v,m).orThunk(()=>Ln(l,m,h,v,x).map(M=>{const I=M.range;return nh.create(te.some(qp(I.start,I.soffset,I.finish,I.foffset)),!0)})),qf=(l,m)=>pe(l,"tr",m).bind(h=>pe(h,"table",m).bind(v=>{const x=_c(v,"tr");return Eo(h,x[0])?Jp(v,_=>wd(_).isSome(),m).map(_=>{const M=Mu(_);return nh.create(te.some(qp(_,M,_,M)),!0)}):te.none()})),c2=(l,m)=>pe(l,"tr",m).bind(h=>pe(h,"table",m).bind(v=>{const x=_c(v,"tr");return Eo(h,x[x.length-1])?t2(v,_=>pS(_).isSome(),m).map(_=>nh.create(te.some(qp(_,0,_,0)),!0)):te.none()})),Aw=(l,m,h,v,x,_,M)=>Ln(l,h,v,x,_).bind(I=>sh(m,h,I.start,I.finish,M)),n1=l=>{let m=l;return{get:()=>m,set:x=>{m=x}}},m_=l=>{const m=n1(te.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(te.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:I=>{h(),m.set(te.some(I))}}},mh=()=>{const l=m_(Tt);return{...l,on:h=>l.get().each(h)}},pb=(l,m)=>pe(l,"td,th",m),Ei=l=>Ec(l).exists(wm),p6=(l,m,h,v)=>{const x=mh(),_=x.clear,M=me=>{x.on(Ue=>{v.clearBeforeUpdate(m),pb(me.target,h).each(ut=>{hl(Ue,ut,h).each(lt=>{const $e=lt.boxes.getOr([]);if($e.length===1){const ft=$e[0],Me=Sp(ft)==="false",At=Fe(x0(me.target),ft,Eo);Me&&At&&(v.selectRange(m,$e,ft,ft),l.selectContents(ft))}else $e.length>1&&(v.selectRange(m,$e,lt.start,lt.finish),l.selectContents(ut))})})})};return{clearstate:_,mousedown:me=>{v.clear(m),pb(me.target,h).filter(Ei).each(x.set)},mouseover:me=>{M(me)},mouseup:me=>{M(me),_()}}},bb={traverse:Ui,gather:ch,relative:nc.before,retry:e1.tryDown,failure:js.failedDown},fh={traverse:cl,gather:e2,relative:nc.before,retry:e1.tryUp,failure:js.failedUp},zm=l=>m=>m===l,vb=zm(38),yb=zm(40),Kf=f_={isBackward:zm(37),isForward:zm(39)},Ow={isBackward:zm(39),isForward:zm(37)},g_=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return K(h,v)},gh=(l,m,h)=>{const x=(h!==void 0?h.dom:document).defaultView;x&&x.scrollBy(l,m)},Id=ni.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),h_=l=>Id.exact(l.start,l.soffset,l.finish,l.foffset),p_=l=>l.match({domRange:m=>de.fromDom(m.startContainer),relative:(m,h)=>nc.getStart(m),exact:),Dw=Id.domRange,a2=Id.relative,i2=Id.exact,l2=l=>{const m=p_(l);return is(m)},Cb=oh.create,Um={domRange:Dw,relative:a2,exact:i2,exactFromRange:h_,getWin:l2,range:Cb},Rw=(l,m,h)=>{var v,x;return te.from((x=(v=l.dom).caretPositionFromPoint)===null||x===void 0?void 0:x.call(v,m,h)).bind(_=>{if(_.offsetNode===null)return te.none();const M=l.dom.createRange();return M.setStart(_.offsetNode,_.offset),M.collapse(),te.some(M)})},o1=(l,m,h)=>{var v,x;return te.from((x=(v=l.dom).caretRangeFromPoint)===null||x===void 0?void 0:x.call(v,m,h))},u2=(()=>document.caretPositionFromPoint?Rw:document.caretRangeFromPoint?o1:te.none)(),b_=(l,m,h)=>{const v=de.fromDom(l.document);return u2(v,m,h).map(x=>oh.create(de.fromDom(x.startContainer),x.startOffset,de.fromDom(x.endContainer),x.endOffset))},s1=(l,m)=>{const h=wo(l);return h==="input"?nc.after(l):mn(["br","img"],h)?m===0?nc.before(l):nc.after(l):nc.on(l,m)},v_=pt=pr=(l,m,h,v)=>{const _=zi(l).dom.createRange();return _.setStart(l.dom,m),_.setEnd(h.dom,v),_},Hd=(l,m,h,v)=>{const x=pr(l,m,h,v),_=Eo(l,h)&&m===v;return x.collapsed&&!_},er=l=>te.from(l.getSelection()),el=(l,m)=>{er(l).each(},Sb=(l,m,h,v,x)=>{const _=jp(l,m,h,v,x);el(l,_)},r1=(l,m,h,v,x,_)=>{m.collapse(h.dom,v),m.extend(x.dom,_)},Xl=(l,m)=>bw(l,m).match({ltr:rtl:(h,v,x,_)=>{er(l).each(M=>{if(M.setBaseAndExtent)M.setBaseAndExtent(h.dom,v,x.dom,_);else if(M.extend)try{r1(l,M,h,v,x,_)}catch(I){Sb(l,x,_,h,v)}else Sb(l,x,_,h,v)})}}),wb=(l,m,h,v,x)=>{const _=pt(m,h,v,x);Xl(l,_)},xb=(l,m,h)=>{const v=v_(m,h);Xl(l,v)},hh=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return te.some(oh.create(de.fromDom(m.startContainer),m.startOffset,de.fromDom(h.endContainer),h.endOffset))}else return te.none()},Nw=l=>{if(l.anchorNode===null||l.focusNode===null)return hh(l);{const m=de.fromDom(l.anchorNode),h=de.fromDom(l.focusNode);return Hd(m,l.anchorOffset,h,l.focusOffset)?te.some(oh.create(m,l.anchorOffset,h,l.focusOffset)):hh(l)}},c1=(l,m,h=!0)=>{const x=(h?fw:ib)(l,m);el(l,x)},d2=l=>er(l).filter(m=>m.rangeCount>0).bind(Nw),m2=l=>d2(l).map(m=>Um.exact(m.start,m.soffset,m.finish,m.foffset)),y_=(l,m)=>{const h=Ky(l,m);return o_(h)},Jl=(l,m,h)=>b_(l,m,h),Eb=ph=l=>({elementFromPoint:(Me,At)=>de.fromPoint(de.fromDom(l.document),Me,At),getRect:Me=>Me.dom.getBoundingClientRect(),getRangedRect:(Me,At,Qt,Sn)=>{const Yo=Um.exact(Me,At,Qt,Sn);return y_(l,Yo)},getSelection:()=>m2(l).map(Me=>Yy(l,Me)),fromSitus:Me=>{const At=Um.relative(Me.start,Me.finish);return Yy(l,At)},situsFromPoint:(Me,At)=>Jl(l,Me,At).map(Qt=>vw.create(Qt.start,Qt.soffset,Qt.finish,Qt.foffset)),clearSelection:()=>{Eb(l)},collapseSelection:(Me=!1)=>{m2(l).each(At=>At.fold(Qt=>Qt.collapse(Me),(Qt,Sn)=>{const Yo=Me?Qt:Sn;xb(l,Yo,Yo)},(Qt,Sn,Yo,Mr)=>{const Ls=Me?Qt:Yo,Ra=Me?Sn:Mr;wb(l,Ls,Ra,Ls,Ra)}))},setSelection:Me=>{wb(l,Me.start,Me.soffset,Me.finish,Me.foffset)},setRelativeSelection:(Me,At)=>{xb(l,Me,At)},selectNode:selectContents:Me=>{c1(l,Me)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>g_(de.fromDom(l.document)).top,scrollBy:(Me,At)=>{gh(Me,At,de.fromDom(l.document))}}),yc=(l,m)=>({rows:l,cols:m}),ir=(l,m,h,v)=>{const x=ph(l),_=p6(x,m,h,v);return{clearstate:_.clearstate,mousedown:_.mousedown,mouseover:_.mouseover,mouseup:_.mouseup}},Tb=l=>bd(l,Gt).exists(wm),a1=kb=(l,m,h,v)=>{const x=ph(l),_=return{keydown:(Z,Q,me,Ue,ut,lt)=>{const $e=Z.raw,ft=$e.which,Me=$e.shiftKey===!0;return Ad(m,v.selectedSelector).fold(()=>(Kf(ft)&&!Me&&v.clearBeforeUpdate(m),Kf(ft)&&Me&&!a1(Q,Ue)?te.none:yb(ft)&&Me?hn(Aw,x,m,h,bb,Ue,Q,v.selectRange):vb(ft)&&Me?hn(Aw,x,m,h,fh,Ue,Q,v.selectRange):yb(ft)?hn(Yl,x,h,bb,Ue,Q,c2):vb(ft)?hn(Yl,x,h,fh,Ue,Q,qf):te.none),Qt=>{const Sn=Yo=>()=>jn(Yo,Ls=>r_(Ls.rows,Ls.cols,m,Qt,v)).fold(()=>Mf(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Ls=>{const Ra=yb(ft)||lt.isForward(ft)?nc.after:nc.before;return x.setRelativeSelection(nc.on(Ls.first,0),Ra(Ls.table)),v.clear(m),nh.create(te.none(),!0)}),Ls=>te.some(nh.create(te.none(),!0)));return Kf(ft)&&Me&&!a1(Q,Ue)?te.none:yb(ft)&&Me?Sn([yc(1,0)]):vb(ft)&&Me?Sn([yc(-1,0)]):lt.isBackward(ft)&&Me?Sn([yc(0,-1),yc(-1,0)]):lt.isForward(ft)&&Me?Sn([yc(0,1),yc(1,0)]):Kf(ft)&&!Me?_:te.none})()},keyup:(Z,Q,me,Ue,ut)=>Ad(m,v.selectedSelector).fold(()=>{const lt=Z.raw,$e=lt.which;return lt.shiftKey===!0&&Kf($e)&&a1(Q,Ue)?lb(m,h,Q,me,Ue,ut,v.selectRange):te.none()},te.none)}},i1=(l,m,h,v)=>{const x=ph(l);return(_,M)=>{v.clearBeforeUpdate(m),hl(_,M,h).each(I=>{const Z=I.boxes.getOr([]);v.selectRange(m,Z,I.start,I.finish),x.selectContents(M),x.collapseSelection()})}},l1=(l,m)=>{const h=ui(l,m);return h===void 0||h===""?[]:h.split(" ")},bh=Mw=u1=l=>l.dom.classList!==void 0,Bw=l=>l1(l,"class"),Pw=(l,m)=>bh(l,"class",m),$w=(l,m)=>Mw(l,"class",m),tl=$c=l=>{(u1(l)?l.dom.classList:Bw(l)).length===0&&Jo(l,"class")},Sl=(l,m)=>{u1(l)?l.dom.classList.remove(m):$w(l,m),$c(l)},Da=d1=(l,m)=>{Ne(m,h=>{Sl(l,h)})},_b=l=>m=>{tl(m,l)},Fw=Vd={byClass:l=>{const m=_b(l.selected),h=Fw([l.selected,l.lastSelected,l.firstSelected]),v=_=>{const M=_c(_,l.selectedSelector);Ne(M,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(_,M,I,Z)=>{v(_),Ne(M,m),tl(I,l.firstSelected),tl(Z,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=Z=>{Jo(Z,l.selected),Jo(Z,l.firstSelected),Jo(Z,l.lastSelected)},x=_=M=Z=>{const Q=_c(Z,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ne(Q,v)};return{clearBeforeUpdate:M,clear:_,selectRange:(Z,Q,me,Ue)=>{_(Z),Ne(Q,x),as(me,l.firstSelected,"1"),as(Ue,l.lastSelected,"1"),m(Q,me,Ue)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},f1=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},f2=Lw=l=>({tag:"multiple",elements:l}),Iw=l=>({tag:"single",element:l}),g2=(l,m,h)=>({get:()=>ty(l(),h).fold(Lw)}),Ab=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=Ss(h);return lo(v,x=>{const _=x.cells.slice(0,m[m.length-1].column+1);return Ot(_,M=>M.element)})},Mo=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=Ss(h);return lo(v,x=>{const _=x.cells.slice(m[0].column+m[0].colspan-1,x.cells.length);return Ot(_,M=>M.element)})},zd=(l,m,h)=>{const v=Dn.fromTable(l);return _m(v,m).map(_=>{const M=Fg(v,h,!1),{rows:I}=ar(M),Z=Ab(I,_),Q=Mo(I,_);return{upOrLeftCells:Z,downOrRightCells:Q}})},Hw=(l,m,h,v,x,_,M)=>({target:l,x:m,y:h,stop:v,prevent:x,kill:_,raw:M}),h2=l=>{const m=de.fromDom(ht(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),x=Rs(v,h);return Hw(m,l.clientX,l.clientY,h,v,x,l)},p2=(l,m)=>h=>{l(h)&&m(h2(h))},Yf=(l,m,h,v,x)=>{const _=p2(h,v);return l.dom.addEventListener(m,_,x),{unbind:hn(v2,l,m,_,x)}},b2=(l,m,h,v)=>Yf(l,m,h,v,!1),v2=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},S_=_e,vh=(l,m,h)=>b2(l,m,S_,h),yh=h2,y2=l=>!Da(de.fromDom(l.target),"ephox-snooker-resizer-bar"),C2=(l,m)=>{const h=g2(()=>de.fromDom(l.getBody()),()=>Ap(vi(l),Pu(l)),Pf.selectedSelector),v=(Z,Q,me)=>{Wc(Q).each(ut=>{const lt=Ed(l),$e=xg(Tt,de.fromDom(l.getDoc()),lt),ft=Ji(l),Me=zd(ut,{selection:ft},$e);Dk(l,Z,Q,me,Me)})},x=()=>Rk(l),_=Vd.byAttr(Pf,v,x);return l.on("init",Z=>{const Q=l.getWin(),me=E0(l),Ue=Pu(l),ut=()=>{const To=l.selection,Yc=de.fromDom(To.getStart()),Cc=de.fromDom(To.getEnd());No(Wc,[Yc,Cc]).fold(()=>_.clear(me),Tt)},lt=ir(Q,me,Ue,_),$e=kb(Q,me,Ue,_),ft=i1(Q,me,Ue,_),Me=To=>To.raw.shiftKey===!0;l.on("TableSelectorChange",To=>ft(To.start,To.finish));const At=(To,Yc)=>{!Me(To)||(Yc.kill&&To.kill(),Yc.selection.each(Cc=>{const _i=Um.relative(Cc.start,Cc.finish),ri=Ky(Q,_i);l.selection.setRng(ri)}))},Qt=To=>{const Yc=yh(To);if(Yc.raw.shiftKey&&Kf(Yc.raw.which)){const Cc=l.selection.getRng(),_i=de.fromDom(Cc.startContainer),ri=de.fromDom(Cc.endContainer);$e.keyup(Yc,_i,Cc.startOffset,ri,Cc.endOffset).each(jm=>{At(Yc,jm)})}},Sn=To=>{const Yc=yh(To);m.hide();const Cc=l.selection.getRng(),_i=de.fromDom(Cc.startContainer),ri=de.fromDom(Cc.endContainer),jm=Lv(f_,Ow)(de.fromDom(l.selection.getStart()));$e.keydown(Yc,_i,Cc.startOffset,ri,Cc.endOffset,jm).each(fa=>{At(Yc,fa)}),m.show()},Yo=To=>To.button===0,Mr=To=>To.buttons===void 0?!0:(To.buttons&1)!==0,Ls=To=>{lt.clearstate()},Ra=To=>{Yo(To)&&y2(To)&&lt.mousedown(yh(To))},Jf=To=>{Mr(To)&&y2(To)&&lt.mouseover(yh(To))},Qf=To=>{Yo(To)&&y2(To)&&lt.mouseup(yh(To))},Bb=(()=>{const To=n1(de.fromDom(me)),Yc=n1(0);return{touchEnd:_i=>{const ri=de.fromDom(_i.target);if(Fr("td")(ri)||Fr("th")(ri)){const jm=To.get(),fa=Yc.get();Eo(jm,ri)&&_i.timeStamp-fa<300&&(_i.preventDefault(),ft(ri,ri))}To.set(ri),Yc.set(_i.timeStamp)}}})();l.on("dragstart",Ls),l.on("mousedown",Ra),l.on("mouseover",Jf),l.on("mouseup",Qf),l.on("touchend",Bb.touchEnd),l.on("keyup",Qt),l.on("keydown",Sn),l.on("NodeChange",ut)}),l.on("PreInit",,{getSelectedCells:()=>f1(h.get(),j([]),,clearSelectedCells:Z=>_.clear(de.fromDom(Z))}},wl=l=>{let m=[];return{bind:_=>{if(_===void 0)throw new Error("Event bind error: undefined handler");m.push(_)},unbind:_=>{m=it(m,M=>M!==_)},trigger:(..._)=>{const M={};Ne(l,,Ne(m,I=>{I(M)})}}},Wm=l=>{const m=Cr(l,v=>({bind:v.bind,unbind:v.unbind})),h=Cr(l,v=>v.trigger);return{registry:m,trigger:h}},w_=g1=x_=(l,m)=>{throw new Error("All required keys ("+g1(l).join(", ")+") were not specified. Specified keys were: "+g1(m).join(", ")+".")},si=l=>{throw new Error("Unsupported keys for object: "+g1(l).join(", "))},Fc=(l,m)=>{if(!bs(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ne(m,h=>{if(!io(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},Xf=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+g1(l).join(", ")+") were not.")},ZD=l=>{const m=g1(l);$(m,(v,x)=>x<m.length-1&&v===m[x+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},Vw=(l,m)=>E_(l,m,{validate:Es,label:"function"}),E_=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Fc("required",m),ZD(m),v=>{const x=Ct(v);no(m,I=>mn(x,I))||x_(m,x),l(m,x);const M=it(m,;return M.length>0&&Xf(M,h.label),v}},Pn=(l,m)=>{const h=it(m,v=>!mn(l,v));h.length>0&&si(h)},S2=l=>Vw(Pn,l),zw=S2(["compare","extract","mutate","sink"]),w2=S2(["element","start","stop","destroy"]),T_=S2(["forceDrop","drop","move","delayDrop"]),k_=()=>{let l=te.none();const m=h=(_,M)=>{const I=l.map(Z=>_.compare(Z,M));return l=te.some(M),I},v=(_,M)=>{M.extract(_).each(Z=>{h(M,Z).each(me=>{x.trigger.move(me)})})},x=Wm({move:wl(["info"])});return{onEvent:v,reset:m,events:x.registry}},Uw=()=>{const l=Wm({move:wl(["info"])});return{onEvent:Tt,reset:Tt,events:l.registry}},__=()=>{const l=Uw(),m=k_();let h=l;return{on:()=>{h.reset(),h=m},off:isOn:()=>h===m,onEvent:(I,Z)=>{h.onEvent(I,Z)},events:m.events}},yt=(l,m,h)=>{let v=!1;const x=Wm({start:wl([]),stop:wl([])}),_=__(),M=()=>{$e.stop(),_.isOn()&&(_.off(),x.trigger.stop())},I=w_(M,200),Z=Me=>{$e.start(Me),_.on(),x.trigger.start()},Q=_.events.move.bind(Me=>{m.mutate(l,Me.info)});const me=()=>{v=!0},Ue=()=>{v=!1},ut=()=>v,lt=Me=>(...At)=>{v&&Me.apply(null,At)},$e=m.sink(T_({forceDrop:M,drop:lt(M),move:lt(Q),delayDrop:lt(I.throttle)}),h),ft=()=>{$e.destroy()};return{element:$e.element,go:Z,on:me,off:Ue,isActive:ut,destroy:ft,events:x.registry}},Zm=l=>{const m=l.replace(/\./g,"-");return{resolve:},h1=Zm("ephox-dragster").resolve,p1=l=>{const m={layerClass:h1("blocker"),...l},h=de.fromTag("div");return as(h,"role","presentation"),qr(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),tl(h,h1("blocker")),tl(h,m.layerClass),{element:j(h),destroy:()=>{Hs(h)}}};var O_=zw({compare:(l,m)=>K(m.left-l.left,m.top-l.top),extract:sink:(l,m)=>{const h=p1(m),v=vh(h.element(),"mousedown",l.forceDrop),x=vh(h.element(),"mouseup",l.drop),_=vh(h.element(),"mousemove",l.move),M=vh(h.element(),"mouseout",l.delayDrop),I=Z=Q=return w2({element:h.element,start:Z,stop:Q,destroy:I})},mutate:);const Zw=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:O_;return yt(l,v,m)},Ud=Zm("ephox-snooker").resolve,jw=()=>{const l=Wm({drag:wl(["xDelta","yDelta"])});return{mutate:events:l.registry}},D_=()=>{const l=Wm({drag:wl(["xDelta","yDelta","target"])});let m=te.none();const h=jw();return h.events.drag.bind(_=>{m.each(}),{assign:get:()=>m,mutate:h.mutate,events:l.registry}},b1=(l,m,h,v,x)=>{const _=de.fromTag("div");return qr(_,{position:"absolute",left:m-v/2+"px",top:h+"px",height:x+"px",width:v+"px"}),na(_,{"data-column":l,role:"presentation"}),_},R_=(l,m,h,v,x)=>{const _=de.fromTag("div");return qr(_,{position:"absolute",left:m+"px",top:h-x/2+"px",height:x+"px",width:v+"px"}),na(_,{"data-row":l,role:"presentation"}),_},Gw=Ud("resizer-bar"),x2=Ud("resizer-rows"),qw=Ud("resizer-cols"),Ob=7,N_=(l,m)=>lo(l.all,(h,v)=>m(h.element)?[v]:[]),M_=(l,m)=>{const h=[];return pn(l.grid.columns,v=>{Dn.getColumnAt(l,v).map(_=>_.element).forall(m)&&h.push(v)}),it(h,v=>{const x=Dn.filterItems(l,_=>_.column===v);return no(x,_=>m(_.element))})},Ch=l=>{const m=_c(l.parent(),"."+Gw);Ne(m,Hs)},E2=(l,m,h)=>{const v=l.origin();Ne(m,x=>{x.each(_=>{const M=h(v,_);tl(M,Gw),Oo(l.parent(),M)})})},Kw=(l,m,h,v)=>{E2(l,m,(x,_)=>{const M=b1(_.col,_.x-x.left,h.top-x.top,Ob,v);return tl(M,qw),M})},B_=(l,m,h,v)=>{E2(l,m,(x,_)=>{const M=R_(_.row,h.left-x.left,_.y-x.top,v,Ob);return tl(M,x2),M})},P_=(l,m,h,v,x)=>{const _=Rt(h),M=m.isResizable,I=v.length>0?Et.positions(v,h):[],Z=I.length>0?N_(l,M):[],Q=it(I,(lt,$e)=>ze(Z,ft=>$e===ft));B_(m,Q,_,fl(h));const me=x.length>0?fr.positions(x,h):[],Ue=me.length>0?M_(l,M):[],ut=it(me,;Kw(m,ut,_,w(h))},Db=(l,m)=>{if(Ch(l),l.isResizable(m)){const h=Dn.fromTable(m),v=fp(h),x=pm(h);P_(h,l,m,v,x)}},Gu=(l,m)=>{const h=_c(l.parent(),"."+Gw);Ne(h,m)},Rb=l=>{Gu(l,m=>{us(m,"display","none")})},so=l=>{Gu(l,},$_=l=>Da(l,x2),Wd=l=>Da(l,qw),qu=Ud("resizer-bar-dragging"),Nb=l=>{const m=D_(),h=Zw(m,{});let v=te.none();const x=($e,ft)=>te.from(ui($e,ft));m.events.drag.bind($e=>{x($e.target,"data-row").each(ft=>{const Me=Cu($e.target,"top");us($e.target,"top",Me+$e.yDelta+"px")}),x($e.target,"data-column").each(ft=>{const Me=Cu($e.target,"left");us($e.target,"left",Me+$e.xDelta+"px")})});const _=($e,ft)=>{const Me=Cu($e,ft),At=qo($e,"data-initial-"+ft,0);return Me-At};h.events.stop.bind(()=>{m.get().each($e=>{v.each(ft=>{x($e,"data-row").each(Me=>{const At=_($e,"top");Jo($e,"data-initial-top"),lt.trigger.adjustHeight(ft,At,parseInt(Me,10))}),x($e,"data-column").each(Me=>{const At=_($e,"left");Jo($e,"data-initial-left"),lt.trigger.adjustWidth(ft,At,parseInt(Me,10))}),Db(l,ft)})})});const M=($e,ft)=>{lt.trigger.startAdjust(),m.assign($e),as($e,"data-initial-"+ft,Cu($e,ft)),tl($e,qu),us($e,"opacity","0.2"),h.go(l.parent())},I=vh(l.parent(),"mousedown",$e=>{$_($e.target)&&M($e.target,"top"),Wd($e.target)&&M($e.target,"left")}),Z=$e=>Eo($e,l.view()),Q=$e=>pe($e,"table",Z).filter(wm),me=vh(l.view(),"mouseover",$e=>{Q($e.target).fold(()=>{Qo($e.target)&&Ch(l)},ft=>{h.isActive()&&(v=te.some(ft),Db(l,ft))})}),Ue=()=>{I.unbind(),me.unbind(),h.destroy(),Ch(l)},ut=$e=>{Db(l,$e)},lt=Wm({adjustHeight:wl(["table","delta","row"]),adjustWidth:wl(["table","delta","column"]),startAdjust:wl([])});return{destroy:Ue,refresh:ut,on:h.on,off:h.off,hideBars:hn(Rb,l),showBars:hn(so,l),events:lt.registry}},Mb={create:(l,m,h)=>{const v=Et,x=fr,_=Nb(l),M=Wm({beforeResize:wl(["table","type"]),afterResize:wl(["table","type"]),startDrag:wl([])});return _.events.adjustHeight.bind(I=>{const Z=I.table;M.trigger.beforeResize(Z,"row");const Q=v.delta(I.delta,Z);gy(Z,Q,I.row,v),M.trigger.afterResize(Z,"row")}),_.events.startAdjust.bind(,_.events.adjustWidth.bind(I=>{const Z=I.table;M.trigger.beforeResize(Z,"col");const Q=x.delta(I.delta,Z),me=h(Z);Mp(Z,Q,I.column,m,me),M.trigger.afterResize(Z,"col")}),{on:_.on,off:_.off,refreshBars:_.refresh,hideBars:_.hideBars,showBars:_.showBars,destroy:_.destroy,events:M.registry}}},T2={only:(l,m)=>{const h=Vi(l)?Js(l):l;return{parent:j(h),view:j(l),origin:j(K(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>Rt(m);return{parent:j(m),view:j(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:j(m),view:j(l),origin:j(K(0,0)),isResizable:h})},F_=()=>{const l=de.fromTag("div");return qr(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Oo(Er(),l),l},k2=(l,m)=>l.inline?T2.body(de.fromDom(l.getBody()),F_(),m):T2.only(de.fromDom(l.getDoc()),m),L_=(l,m)=>{l.inline&&Hs(m.parent())},In=l=>rs(l)&&l.nodeName==="TABLE",ki="bar-",jd=l=>ui(l,"data-mce-resize")!=="false",I_=l=>{const m=Dn.fromTable(l);Dn.hasColumns(m)||Ne(qi(l),h=>{const v=Kr(h,"width");us(h,"width",v),Jo(h,"width")})},wh=l=>{const m=mh(),h=mh(),v=mh();let x,_;const M=$e=>qc(l,$e),I=()=>CS(l)?cy():AS(),Z=$e=>Mg($e).columns,Q=($e,ft,Me)=>{const At=Ps(ft,"e");if(_===""&&Qi($e),Me!==x&&_!==""){us($e,"width",_);const Qt=I(),Sn=M($e),Yo=CS(l)||At?Z($e)-1:0;Mp($e,Me-x,Yo,Qt,Sn)}else if(T0(_)){const Qt=parseFloat(_.replace("%","")),Sn=Me*Qt/x;us($e,"width",Sn+"%")}wp(_)&&I_($e)},me=()=>{h.on($e=>{$e.destroy()}),v.on($e=>{L_(l,$e)})};return l.on("init",()=>{const $e=k2(l,jd);if(v.set($e),JT(l)&&Nf(l)){const ft=I(),Me=Mb.create($e,ft,M);Me.on(),Me.events.startDrag.bind(,Me.events.beforeResize.bind(At=>{const Qt=At.table.dom;My(l,Qt,xm(Qt),Em(Qt),ki+At.type)}),Me.events.afterResize.bind(At=>{const Qt=At.table,Sn=Qt.dom;Ul(Qt),m.on(,Nk(l,Sn,xm(Sn),Em(Sn),ki+At.type),l.undoManager.add()}),h.set(Me)}}),l.on("ObjectResizeStart",$e=>{const ft=$e.target;if(In(ft)){const Me=de.fromDom(ft);Ne(l.dom.select(".mce-clonedresizable"),At=>{l.dom.addClass(At,"mce-"+jv(l)+"-columns")}),!Up(Me)&&Sm(l)?Qg(Me):!zp(Me)&&Td(l)&&Qi(Me),ob(Me)&&mc($e.origin,ki)&&Qi(Me),x=$e.width,_=Rf(l)?"":SS(l,ft).getOr("")}}),l.on("ObjectResized",$e=>{const ft=$e.target;if(In(ft)){const Me=de.fromDom(ft),At=$e.origin;mc(At,"corner-")&&Q(Me,At,$e.width),Ul(Me),Uf(l,Me.dom,Pd)}}),l.on("SwitchMode",()=>{h.on($e=>{l.mode.isReadOnly()?$e.hideBars():$e.showBars()})}),l.on("dragstart dragend",$e=>{h.on(ft=>{$e.type==="dragstart"?(ft.hideBars(),ft.off()):(ft.on(),ft.showBars())})}),l.on("remove",()=>{me()}),{refresh:$e=>{h.on(},hide:()=>{h.on($e=>$e.hideBars())},show:},Yn=l=>{Tg(l);const m=wh(l),h=C2(l,m),v=tb(l,m,h);return th(l,v),Xk(l,v),ck(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},H_=l=>({table:Yn(l)});var _2=_2()})();(function(){const ha=Object.getPrototypeOf,wc=(t,s,c)=>{var i;return c(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},ac=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&wc(t,String,(c,i)=>i.isPrototypeOf(c))?"string":s},ps=t=>s=>ac(s)===t,yr=t=>s=>typeof s===t,nr=t=>s=>t===s,io=nt=ps("string"),bs=ps("object"),ea=t=>io(t,Object),Hn=ps("array"),Is=nr(null),Ds=yr("boolean"),rs=nr(void 0),Es=t=>t==null,to=t=>!Es(t),Tt=yr("function"),Rs=yr("number"),Ht=(t,s)=>{if(Hn(t)){for(let c=0,i=t.length;c<i;++c)if(!s(t[c]))return!1;return!0}return!1},j=()=>{},Ve=t=>()=>t(),Xo=(t,s)=>(...c)=>t(s.apply(null,c)),hn=(t,s)=>c=>t(s(c)),re=t=>()=>t,bt=t=>t,Jn=(t,s)=>t===s;function Xt(t,...s){return(...c)=>{const i=s.concat(c);return t.apply(null,i)}}const _e=t=>s=>!t(s),te=go=Xe=re(!1),Oe=re(!0);class k{constructor(s,c){this.tag=s,this.value=c}static some(s){return new k(!0,s)}static none(){return k.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?k.some(s(this.value)):k.none()}bind(s){return this.tag?s(this.value):k.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:k.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s!=null?s:"Called getOrDie on None")}static from(s){return to(s)?k.some(s):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const mn=Array.prototype.slice,ze=Array.prototype.indexOf,pn=Array.prototype.push,Ot=(t,s)=>ze.call(t,s),Ne=(t,s)=>{const c=Ot(t,s);return c===-1?k.none():k.some(c)},Rn=(t,s)=>Ot(t,s)>-1,cs=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return!0}return!1},it=(t,s)=>{const c=[];for(let i=0;i<t;i++)c.push(s(i));return c},It=(t,s)=>{const c=[];for(let i=0;i<t.length;i+=s){const d=mn.call(t,i,i+s);c.push(d)}return c},ye=(t,s)=>{const c=t.length,i=new Array(c);for(let d=0;d<c;d++){const g=t[d];i[d]=s(g,d)}return i},We=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];s(d,c)}},$=(t,s)=>{for(let c=t.length-1;c>=0;c--){const i=t[c];s(i,c)}},Ts=Kn=(t,s)=>{const c=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&c.push(g)}return c},lo=(t,s,c)=>($(t,(i,d)=>{c=s(c,i,d)}),c),no=(t,s,c)=>(We(t,(i,d)=>{c=s(c,i,d)}),c),Ns=(t,s,c)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(c(g,i))break}return k.none()},Re=(t,s)=>Ns(t,s,Xe),st=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return k.some(c)}return k.none()},De=t=>{const s=[];for(let c=0,i=t.length;c<i;++c){if(!Hn(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);pn.apply(s,t[c])}return s},le=(t,s)=>De(ye(t,s)),jt=(t,s)=>{for(let c=0,i=t.length;c<i;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},jn=t=>{const s=mn.call(t,0);return s.reverse(),s},Ct=Ms=Cn=t=>[t],Cr=ao=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),ks=t=>ao(t,0),Ii=t=>ao(t,t.length-1),Wr=Tt(Array.from)?Array.from:t=>mn.call(t),vs=(t,s)=>{for(let c=0;c<t.length;c++){const i=s(t[c],c);if(i.isSome())return i}return k.none()},Uo=Object.keys,Ol=Object.hasOwnProperty,$o=(t,s)=>{const c=Uo(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],p=t[g];s(p,g)}},Fo=li=Bs=t=>(s,c)=>{t[c]=s},zc=(t,s,c,i)=>{$o(t,(d,g)=>{(s(d,g)?c:i)(d,g)})},ur=(t,s)=>{const c={},i={};return zc(t,s,Bs(c),Bs(i)),{t:c,f:i}},Fa=(t,s)=>{const c={};return zc(t,s,Bs(c),j),c},Hi=Ys=(t,s)=>{const c=Uo(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],p=t[g];if(s(p,g,t))return k.some(p)}return k.none()},du=t=>Hi(t,bt),dt=Gn=(t,s)=>Ol.call(t,s),$r=(t,s)=>Gn(t,s)&&t[s]!==void 0&&t[s]!==null,ic=(t,s,c=Jn)=>t.exists(i=>c(i,s)),mu=(t,s,c=Jn)=>ta(t,s,c).getOr(t.isNone()&&s.isNone()),Uc=t=>{const s=[],c=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(c);return s},wo=t=>{const s=[];for(let c=0;c<t.length;c++){const i=t[c];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},ta=(t,s,c)=>t.isSome()&&s.isSome()?k.some(c(t.getOrDie(),s.getOrDie())):k.none(),pa=(t,s,c,i)=>t.isSome()&&s.isSome()&&c.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),c.getOrDie())):k.none(),xo=(t,s)=>t!=null?k.some(s(t)):k.none(),Gt=(t,s)=>t?k.some(s):k.none(),Zr=(t,s)=>t+s,La=(t,s)=>t.substring(s),Vi=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,fu=(t,s)=>as(t,s)?La(t,s.length):t,Fr=(t,s)=>na(t,s)?t:Zr(t,s),Xs=(t,s,c=0,i)=>{const d=t.indexOf(s,c);return d!==-1?rs(i)?!0:d+s.length<=i:!1},as=(t,s)=>Vi(t,s,0),na=ui=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),lc=t=>t.length>0,Jo=t=>!lc(t),xc=t=>t.style!==void 0&&Tt(t.style.getPropertyValue),di=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw new Error(d)}return Ia(i.childNodes[0])},fd=(t,s)=>{const i=(s||document).createElement(t);return Ia(i)},ba=(t,s)=>{const i=(s||document).createTextNode(t);return Ia(i)},Ia=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},de={fromHtml:di,fromTag:fd,fromText:ba,fromDom:Ia,fromPoint:(t,s,c)=>k.from(t.dom.elementFromPoint(s,c)).map(Ia)},Lr=typeof window<"u"?window:Function("return this;")(),Ha=(t,s)=>{let c=s!=null?s:Lr;for(let i=0;i<t.length&&c!==void 0&&c!==null;++i)c=c[t[i]];return c},oa=(t,s)=>{const c=t.split(".");return Ha(c,s)},Dl=(t,s)=>oa(t,s),Eo=(t,s)=>{const c=Dl(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},gd=Object.getPrototypeOf,hu=t=>Eo("HTMLElement",t),zi=t=>{const s=oa("ownerDocument.defaultView",t);return bs(t)&&(hu(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(gd(t).constructor.name))},rl=9,Js=11,is=1,uc=3,Ec=t=>t.dom.nodeName.toLowerCase(),mi=t=>t.dom.nodeType,cl=t=>s=>mi(s)===t,Ui=t=>ro(t)&&zi(t.dom),ro=cl(is),Sr=cl(uc),sa=cl(rl),Va=cl(Js),Tc=t=>s=>ro(s)&&Ec(s)===t,_s=(t,s)=>{const c=t.dom;if(c.nodeType!==is)return!1;{const i=c;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Oo=t=>t.nodeType!==is&&t.nodeType!==rl&&t.nodeType!==Js||t.childElementCount===0,jr=(t,s)=>{const c=s===void 0?document:s.dom;return Oo(c)?[]:ye(c.querySelectorAll(t),de.fromDom)},pu=(t,s)=>{const c=s===void 0?document:s.dom;return Oo(c)?k.none():k.from(c.querySelector(t)).map(de.fromDom)},co=(t,s)=>t.dom===s.dom,wr=(t,s)=>{const c=t.dom,i=s.dom;return c===i?!1:c.contains(i)},Gr=t=>de.fromDom(t.dom.ownerDocument),Hs=t=>sa(t)?t:Gr(t),va=t=>de.fromDom(Hs(t).dom.documentElement),ya=t=>de.fromDom(Hs(t).dom.defaultView),xr=t=>k.from(t.dom.parentNode).map(de.fromDom),za=t=>xr(t),ra=t=>k.from(t.dom.parentElement).map(de.fromDom),Rl=(t,s)=>{const c=Tt(s)?s:Xe;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,p=de.fromDom(g);if(d.push(p),c(p)===!0)break;i=g}return d},ca=t=>k.from(t.dom.offsetParent).map(de.fromDom),hd=t=>k.from(t.dom.nextSibling).map(de.fromDom),dc=t=>ye(t.dom.childNodes,de.fromDom),fi=(t,s)=>{const c=t.dom.childNodes;return k.from(c[s]).map(de.fromDom)},Nl=t=>fi(t,0),Ml=(t,s)=>({element:t,offset:s}),pd=(t,s)=>{const c=dc(t);return c.length>0&&s<c.length?Ml(c[s],0):Ml(t,s)},H=t=>Va(t)&&to(t.dom.host),ee=Tt(Element.prototype.attachShadow)&&Tt(Node.prototype.getRootNode),ue=re(ee),xe=ee?t=>de.fromDom(t.dom.getRootNode()):Hs,qe=t=>H(t)?t:de.fromDom(Hs(t).dom.body),Wt=vo=t=>{const s=xe(t);return H(s)?k.some(s):k.none()},Do=t=>de.fromDom(t.dom.host),ho=t=>{if(ue()&&to(t.target)){const s=de.fromDom(t.target);if(ro(s)&&Ko(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return ks(c)}}return k.from(t.target)},Ko=t=>to(t.dom.shadowRoot),Vn=t=>{const s=Sr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return vo(de.fromDom(s)).fold(()=>c.body.contains(s),hn(Vn,Do))},ls=kc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return de.fromDom(s)},Bl=(t,s,c)=>{if(nt(c)||Ds(c)||Rs(c))t.setAttribute(s,c+"");else throw new Error("Attribute value was not simple")},ht=bu=(t,s)=>{const c=t.dom;$o(s,(i,d)=>{Bl(c,d,i)})},Qo=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Er=pf=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},es=(t,s)=>{t.dom.removeAttribute(s)},Jh=t=>no(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),Wi=(t,s,c)=>{if(!nt(c))throw new Error("CSS value must be a string: "+c);xc(t)&&t.style.setProperty(s,c)},vu=an=(t,s,c)=>{const i=t.dom;Wi(i,s,c)},_c=(t,s)=>{const c=t.dom;$o(s,(i,d)=>{Wi(c,d,i)})},Ke=(t,s)=>{const c=t.dom;$o(s,(i,d)=>{i.fold(()=>{vu(c,d)},g=>{Wi(c,d,g)})})},ts=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!Vn(t)?bd(c,s):d},bd=As=dr=Zi=(t,s,c)=>{const i=de.fromTag(t);return an(i,s,c),As(i,s).isSome()},V=(t,s)=>{const c=t.dom;vu(c,s),ic(Er(t,"style").map(ui),"")&&es(t,"style")},X=t=>t.dom.offsetWidth,pe=(t,s)=>{const c=i=C=>{const S=s(C);if(S<=0||S===null){const T=ts(C,t);return parseFloat(T)||0}return S},d=i,g=(C,S)=>no(S,(T,A)=>{const N=ts(C,A),P=N===void 0?0:parseInt(N,10);return isNaN(P)?T:T+P},0);return{set:c,get:i,getOuter:d,aggregate:g,max:},Fe=pe("height",,mt=t=>Fe.get(t),kn=t=>Fe.getOuter(t),jo=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Fe.max(t,s,c);an(t,"max-height",i+"px")},or=On=or,mc=Ps=(t,s)=>t!==void 0?t:s!==void 0?s:0,Tr=t=>{const s=t.dom.ownerDocument,c=s.body,i=s.defaultView,d=s.documentElement;if(c===t.dom)return On(c.offsetLeft,c.offsetTop);const g=Ps(i==null?void 0:i.pageYOffset,d.scrollTop),p=Ps(i==null?void 0:i.pageXOffset,d.scrollLeft),C=Ps(d.clientTop,c.clientTop),S=Ps(d.clientLeft,c.clientLeft);return kr(t).translate(p-S,g-C)},kr=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?On(i.offsetLeft,i.offsetTop):Vn(t)?mc(s):On(0,0)},yu=pe("width",t=>t.dom.offsetWidth),Bn=(t,s)=>yu.set(t,s),Go=t=>yu.get(t),sr=t=>yu.getOuter(t),Qh=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=yu.max(t,s,c);an(t,"max-width",i+"px")},us=t=>{let s=!1,c;return,qr=(t,s,c,i)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),C=p||i("(pointer:coarse)"),S=d||!g&&p&&i("(min-device-width:768px)"),T=g||p&&!S,A=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,N=!T&&!S&&!A;return{isiPad:re(d),isiPhone:re(g),isTablet:re(S),isPhone:re(T),isTouch:re(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:re(A),isDesktop:re(N)}},Kr=s0=(t,s)=>{const c=Kr(t,s);if(!c)return{major:0,minor:0};const i=return hg(i(1),i(2))},ep=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Ua():s0(t,c)},Ua=hg=(t,s)=>({major:t,minor:s}),qo={nu:hg,detect:ep,unknown:Ua},ji=(t,s)=>vs(s.brands,c=>{const i=c.brand.toLowerCase();return Re(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(}),Ac=al=(t,s)=>Ac(t,s).map(c=>{const i=qo.detect(c.versionRegexes,s);return{current:c.name,version:i}}),Cu=$s=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gi=im=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:,{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$s],search:,{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Xs(t,"msie")||Xs(t,"trident")},{name:"Opera",versionRegexes:[$s,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gi("firefox")},{name:"Safari",versionRegexes:[$s,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:],bf=[{name:"Windows",search:Gi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Xs(t,"iphone")||Xs(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gi("linux"),versionRegexes:[]},{name:"Solaris",search:Gi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],r0={browsers:re(im),oses:re(bf)},tp="Edge",qi="Chromium",vf="IE",Wc="Opera",yf="Firefox",np="Safari",Su=()=>op({current:void 0,version:qo.unknown()}),op=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isEdge:i(tp),isChromium:i(qi),isIE:i(vf),isOpera:i(Wc),isFirefox:i(yf),isSafari:i(np)}},il={unknown:Su,nu:op,edge:re(tp),chromium:re(qi),ie:re(vf),opera:re(Wc),firefox:re(yf),safari:re(np)},c0="Windows",wu="iOS",a0="Android",i0="Linux",l0="macOS",lm="Solaris",u0="FreeBSD",Y="ChromeOS",xu=Wa=t=>{const s=t.current,c=t.version,i=return{current:s,version:c,isWindows:i(c0),isiOS:i(wu),isAndroid:i(a0),isMacOS:i(l0),isLinux:i(i0),isSolaris:i(lm),isFreeBSD:i(u0),isChromeOS:i(Y)}},um={unknown:xu,nu:Wa,windows:re(c0),ios:re(wu),android:re(a0),linux:re(i0),macos:re(l0),solaris:re(lm),freebsd:re(u0),chromeos:re(Y)},Mv={detect:(t,s,c)=>{const i=r0.browsers(),d=r0.oses(),g=s.bind(S=>ji(i,S)).orThunk(()=>al(i,t)).fold(il.unknown,il.nu),p=Cu(d,t).fold(um.unknown,um.nu),C=qr(p,g,t,c);return{browser:g,os:p,deviceType:C}}},Qn=let Oc=us(()=>Mv.detect(navigator.userAgent,k.from(navigator.userAgentData),Qn));const ll=Pl=Eu=t=>{const s=de.fromDom(ho(t).getOr(t.target)),c=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Xo(i,c);return Pl(s,t.clientX,t.clientY,c,i,d,t)},Ki=(t,s)=>c=>{t(c)&&s(Eu(c))},Yr=(t,s,c,i,d)=>{const g=Ki(c,i);return t.dom.addEventListener(s,g,d),{unbind:Xt(cp,t,s,g,d)}},ul=(t,s,c,i)=>Yr(t,s,c,i,!1),rp=cp=gi=dl=ap=Dc=rr=(t,s,c)=>{fi(t,c).fold(i=>{gi(i,s)})},Tu=(t,s)=>{We(s,c=>{Dc(t,c)})},dm=t=>{t.dom.textContent="",We(dc(t),s=>{hi(s)})},hi=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Rc=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return On(c,i)},ip=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},d0=t=>{const s=t===void 0?window:t;return ll().browser.isFirefox()?k.none():k.from(s.visualViewport)},Cf=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),pg=t=>{const s=t===void 0?window:t,c=s.document,i=Rc(de.fromDom(c));return d0(s).fold(},mm=()=>de.fromDom(document),ml=m0=(t,s)=>{const c=s.owner(t),i=ml(s,c);return k.some(i)};var Pv=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?k.none():k.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(de.fromDom)},owner:t=>Gr(t)});const vd=t=>{const s=mm(),c=Rc(s);return m0(t,Pv).fold(Xt(Tr,t),d=>{const g=kr(t),p=lo(d,{left:0,top:0});return On(p.left+g.left+c.left,p.top+g.top+c.top)})},lp=fm=ds=ys=t=>{const s=Tr(t),c=sr(t),i=kn(t);return ds(s.left,s.top,c,i)},Ca=t=>{const s=vd(t),c=sr(t),i=kn(t);return ds(s.left,s.top,c,i)},up=(t,s)=>{const c=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-c,C=g-i;return ds(c,i,p,C)},$v=(t,s)=>no(s,t),Xr=()=>pg(window);var ku=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Sa=fl=bn={value:Sa,error:fl,fromOption:;var aa;((aa||(aa={}));const _u=gm=dp=(t,s)=>t.stype===aa.Error?{stype:aa.Error,serror:s(t.serror)}:t,g0=Nc=(t,s)=>t.stype===aa.Value?s(t.svalue):t,cr=(t,s)=>t.stype===aa.Error?s(t.serror):t,wa=t=>({stype:aa.Value,svalue:t}),ar=Vs={fromResult:toResult:t=>_u(t,bn.error,bn.value),svalue:wa,partition:gm,serror:ar,bind:Nc,bindError:cr,map:g0,mapError:dp,fold:_u},mr=Yi=Sf=Qs=mp=h0=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Gn(d,g)&&(c[g]=t(c[g],d[g]))}return c},yo=h0(mp),yd=h0(Qs),uo=()=>({tag:"required",process:{}}),Xi=t=>({tag:"defaultedThunk",process:t}),vg=t=>Xi(re(t)),wf=Dn=pm=p0=(t,s)=>t.length>0?Vs.svalue(yo(s,yd.apply(void 0,t))):Vs.svalue(s),fp=t=>Xo(Vs.serror,De)(t),b0={consolidateObj:(t,s)=>{const c=Vs.partition(t);return c.errors.length>0?fp(c.errors):p0(c.values,s)},consolidateArr:t=>{const s=Vs.partition(t);return s.errors.length>0?fp(s.errors):Vs.svalue(s.values)}},yg=t=>bs(t)&&Uo(t).length>100?" removed due to size":JSON.stringify(t,null,2),gp=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:re("... (only showing first ten failures)")}]):t;return ye(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},w=(t,s)=>Vs.serror([{path:t,getErrorInfo:s}]),O=(t,s,c)=>w(t,()=>'Could not find valid *required* value for "'+s+'" in '+yg(c)),F=(t,s)=>w(t,()=>'Choice schema did not contain choice key: "'+s+'"'),K=(t,s,c)=>w(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+yg(s)),ne=(t,s)=>w(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Ze=(t,s)=>w(t,re(s)),Rt=t=>{const s=(i,d)=>Vs.bindError(t(d),g=>Ze(i,g)),c=re("val");return{extract:s,toString:c}},un=Rt(Vs.svalue),ln=(t,s,c,i)=>dt(s,c).fold(()=>O(t,c,s),i),qt=(t,s,c,i)=>{const d=dt(t,s).getOrThunk(()=>c(t));return i(d)},ms=(t,s,c)=>c(dt(t,s)),Ir=(t,s,c,i)=>{const d=dt(t,s).map(g=>g===!0?c(t):g);return i(d)},Za=(t,s,c,i,d)=>{const g=C=>d.extract(s.concat([i]),C),p=C=>C.fold(()=>Vs.svalue(k.none()),S=>{const T=d.extract(s.concat([i]),S);return Vs.map(T,k.some)});switch(t.tag){case"required":return ln(s,c,i,g);case"defaultedThunk":return qt(c,i,t.process,g);case"option":return ms(c,i,p);case"defaultedOptionThunk":return Ir(c,i,t.process,p);case"mergeWithThunk":return qt(c,i,re({}),C=>{const S=yo(t.process(c),C);return g(S)})}},$l=(t,s,c)=>{const i={},d=[];for(const g of c)Sf(g,(p,C,S,T)=>{const A=Za(S,t,s,p,T);Vs.fold(A,N=>{d.push(...N)},N=>{i[C]=N})},(p,C)=>{i[p]=C(s)});return d.length>0?Vs.serror(d):Vs.svalue(i)},Jr=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),mS=t=>Uo(Fa(t,to)),Wo=t=>{const s=Pt(t),c=lo(t,(d,g)=>Sf(g,re(d)),{});return{extract:(d,g)=>{const p=Ds(g)?[]:mS(g),C=Kn(p,S=>!$r(c,S));return C.length===0?s.extract(d,g):ne(d,C)},toString:s.toString}},Pt=t=>({extract:(i,d)=>$l(i,d,t),toString:()=>`obj{
`+ye(t,d=>Sf(d,(g,p,C,S)=>g+" -> "+S.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Fl=t=>({extract:(i,d)=>{const g=ye(d,(p,C)=>t.extract(i.concat(["["+C+"]"]),p));return b0.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Et=(t,s)=>{const c=s!==void 0?s:bt;return{extract:(g,p)=>{const C=[];for(const S of t){const T=S.extract(g,p);if(T.stype===aa.Value)return{stype:aa.Value,svalue:c(T.svalue)};C.push(T)}return b0.consolidateArr(C)},toString:()=>"oneOf("+ye(t,g=>g.toString()).join(", ")+")"}},bm=(t,s)=>{const c=(g,p)=>Fl(Rt(t)).extract(g,p);return{extract:(g,p)=>{const C=Uo(p),S=c(g,C);return Vs.bind(S,T=>{const A=ye(T,N=>mr(N,N,uo(),s));return Pt(A).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},RD=(t,s)=>{const c=us(s);return{extract:toString:()=>c().toString()}},Cd=Xo(Fl,Pt),fr=re(un),xf=(t,s)=>Rt(c=>{const i=typeof c;return t(c)?Vs.svalue(c):Vs.serror(`Expected type: ${s} but got: ${i}`)}),hp=xf(Rs,"number"),Qr=xf(nt,"string"),Ll=xf(Ds,"boolean"),v0=xf(Tt,"function"),Au=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Au(t[s]));default:return!1}},fS=Rt(t=>Au(t)?Vs.svalue(t):Vs.serror("Expected value to be acceptable for sending via postMessage")),y0=(t,s,c,i)=>dt(c,i).fold(()=>K(t,c,i),g=>g.extract(t.concat(["branch: "+i]),s)),Ge=(t,s)=>({extract:(d,g)=>dt(g,t).fold(()=>F(d,t),C=>y0(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+Uo(s)}),gS=()=>Fl(un),vm=t=>Rt(s=>t(s).fold(Vs.serror,Vs.svalue)),Sd=(t,s)=>bm(c=>Vs.fromResult(t(c)),s),pp=(t,s,c)=>{const i=s.extract([t],c);return Vs.mapError(i,d=>({input:c,errors:d}))},Cs=(t,s,c)=>Vs.toResult(pp(t,s,c)),Ro=t=>t.fold(s=>{throw new Error(la(s))},bt),ia=la=t=>`Errors: 
`+gp(t.errors).join(`
`)+`

Input object: `+yg(t.input),zn=(t,s)=>Ge(t,Fo(s,Pt)),bp=(t,s)=>RD(t,s),fc=mr,zs=Yi,C0=t=>vm(s=>Rn(t,s)?bn.value(s):bn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Le=t=>fc(t,t,uo(),fr()),ja=(t,s)=>fc(t,t,uo(),s),vp=t=>ja(t,hp),oo=t=>ja(t,Qr),Il=(t,s)=>fc(t,t,uo(),C0(s)),qT=t=>ja(t,Ll),Hl=t=>ja(t,v0),Iv=(t,s)=>fc(t,t,wf(),Rt(c=>Vs.serror("The field: "+t+" is forbidden. "+s))),Vl=(t,s)=>fc(t,t,uo(),Pt(s)),Hv=(t,s)=>fc(t,t,uo(),Cd(s)),pi=(t,s)=>fc(t,t,uo(),Fl(s)),mo=t=>fc(t,t,wf(),fr()),Ou=(t,s)=>fc(t,t,wf(),s),Ef=t=>Ou(t,hp),gc=t=>Ou(t,Qr),Vv=(t,s)=>Ou(t,C0(s)),Tf=t=>Ou(t,v0),kf=(t,s)=>Ou(t,Fl(s)),xa=(t,s)=>Ou(t,Pt(s)),ym=(t,s)=>Ou(t,Wo(s)),ge=(t,s)=>fc(t,t,vg(s),fr()),Ga=(t,s,c)=>fc(t,t,vg(s),c),Du=(t,s)=>Ga(t,s,hp),Ru=(t,s)=>Ga(t,s,Qr),qa=(t,s,c)=>Ga(t,s,C0(c)),_r=(t,s)=>Ga(t,s,Ll),Hr=(t,s)=>Ga(t,s,v0),ND=(t,s)=>Ga(t,s,fS),Ea=(t,s,c)=>Ga(t,s,Fl(c)),Nu=(t,s,c)=>Ga(t,s,Pt(c)),Vt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Ka={generate:t=>{if(!Hn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return We(t,(i,d)=>{const g=Uo(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],C=i[p];if(c[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Hn(C))throw new Error("case arguments must be an array");s.push(p),c[p]=(...S)=>{const T=S.length;if(T!==C.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+C.length+" ("+C+"), got "+T);return{fold:(...N)=>{if(N.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+N.length);return N[d].apply(null,S)},match:N=>{const P=Uo(N);if(s.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+P.join(","));if(!jt(s,U=>Rn(P,U)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+s.join(", "));return N[p].apply(null,S)},log:N=>{}}}}),c}};Ka.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const bi=t=>{const s=[],c=[];return We(t,i=>{i.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},KT=(t,s)=>{const c={};return $o(t,,c},YT=Cg=t=>{const s={};return We(t,,s},yp=(t,s)=>KT(t,s),Ta=(t,s)=>YT(t,s),hc=t=>Cg(t),zv=(t,s)=>t.length===0?bn.value(s):bn.value(yo(s,yd.apply(void 0,t))),XT=t=>bn.error(De(t)),Mu=(t,s)=>{const c=bi(t);return c.errors.length>0?XT(c.errors):zv(c.values,s)},S0=t=>Tt(t)?t:Xe,hS=(t,s,c)=>{let i=t.dom;const d=S0(c);for(;i.parentNode;){i=i.parentNode;const g=de.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return k.none()},_f=(t,s,c)=>{const i=s(t),d=S0(c);return i.orThunk(()=>d(t)?k.none():hS(t,s,d))},Sg=pS={can:Oe,abort:Xe,run:j},wd=t=>{if(!$r(t,"can")&&!$r(t,"abort")&&!$r(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...pS,...t}},bS=(t,s)=>(...c)=>no(t,(i,d)=>i&&s(d).apply(void 0,c),!0),vS=(t,s)=>(...c)=>no(t,(i,d)=>i||s(d).apply(void 0,c),!1),Uv=t=>Tt(t)?{can:Oe,abort:Xe,run:t}:t,Wv=t=>{const s=bS(t,d=>d.can),c=vS(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{We(t,g=>{g.run.apply(void 0,d)})}}},tc=re,Bu=tc("touchstart"),wg=tc("touchmove"),Af=tc("touchend"),yS=tc("touchcancel"),gr=tc("mousedown"),xg=tc("mousemove"),Eg=tc("mouseout"),Zv=tc("mouseup"),xd=tc("mouseover"),Ya=tc("focusin"),w0=tc("focusout"),gl=tc("keydown"),Cm=tc("keyup"),Of=tc("input"),Tg=tc("change"),Ed=tc("click"),JT=tc("transitioncancel"),Df=tc("transitionend"),jv=tc("transitionstart"),CS=tc("selectstart"),Us=kg={tap:Us("tap")},Td=Us("focus"),Sm=Us("blur.post"),Rf=Us("paste.post"),Nf=Us("receive"),Xa=Us("execute"),Os=Us("focus.item"),zl=kg.tap,Gv=Us("longpress"),Cp=Us("sandbox.close"),x0=Us("typeahead.cancel"),wm=Us("system.init"),Sp=Us("system.touchmove"),E0=Us("system.touchend"),Pu=Us("system.scroll"),Ul=Us("system.resize"),vi=Us("system.attached"),xm=Us("system.detached"),Em=Us("system.dismissRequested"),SS=Us("system.repositionRequested"),T0=Us("focusmanager.shifted"),wp=Us("slotcontainer.visibility"),k0=Us("system.external.element.scroll"),wS=Us("change.tab"),_0=Us("dismiss.tab"),xp=Us("highlight"),Ep=Us("dehighlight"),Fn=(t,s)=>{Tp(t,t.element,s,{})},Ft=(t,s,c)=>{Tp(t,t.element,s,c)},kd=t=>{Fn(t,Xa())},A0=(t,s,c)=>{Tp(t,s,c,{})},Tp=(t,s,c,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(c,s,d)},QT=(t,s,c,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(c,s,d)},qv=(t,s,c,i)=>{t.getSystem().triggerEvent(c,s,i.event)},Lo=t=>hc(t),Kv=(t,s)=>({key:t,value:wd({abort:s})}),Yv=(t,s)=>({key:t,value:wd({can:s})}),Xv=t=>({key:t,value:wd({run:(s,c)=>{c.event.prevent()}})}),Pe=(t,s)=>({key:t,value:wd({run:s})}),O0=(t,s,c)=>({key:t,value:wd({run:(i,d)=>{s.apply(void 0,[i,d].concat(c))}})}),ek=t=>s=>Pe(t,s),kp=t=>s=>({key:t,value:wd({run:)}),tk=(t,s)=>Pe(t,(c,i)=>{c.getSystem().getByUid(s).each(}),_g=(t,s,c)=>{const i=s.partUids[c];return tk(t,i)},Jv=(t,s)=>Pe(t,(c,i)=>{const d=i.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>_f(d.target,C=>c.getSystem().getByDom(C).toOptional(),Xe).getOr(c));s(c,g,i)}),_d=t=>Pe(t,(s,c)=>{c.cut()}),nk=t=>Pe(t,,$u=No=kp(vi()),Fu=kp(xm()),Qv=kp(wm()),hl=ek(Xa()),Ad=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,dc(de.fromDom(i))},ey=t=>t.dom.innerHTML,Mf=(t,s)=>{const i=Gr(t).dom,d=de.fromDom(i.createDocumentFragment()),g=Ad(s,i);Tu(d,g),dm(t),Dc(t,d)},xS=t=>{const s=de.fromTag("div"),c=de.fromDom(t.dom.cloneNode(!0));return Dc(s,c),ey(s)},D0=(t,s)=>de.fromDom(t.dom.cloneNode(s)),ty=t=>D0(t,!1),ok=t=>D0(t,!0),ny=t=>{if(H(t))return"#shadow-root";{const s=ty(t);return xS(s)}},Bf=t=>ny(t),MD=(t,s,c)=>co(s,t.element)&&!co(s,c),oy=Lo([Yv(Td(),(t,s)=>{const c=s.event,i=c.originator,d=c.target;return!MD(t,i,d)})]);var Tm=Object.freeze({__proto__:null,events:oy});let pc=0;const wt=t=>{const c=new Date().getTime(),i=Math.floor(Math.random()*1e9);return pc++,t+"_"+i+pc+String(c)},sk=re("alloy-id-"),sy=re("data-alloy-id"),rk=sk(),ES=sy(),Pf=(t,s)=>{const c=wt(rk+t);return Ag(s,c),c},Ag=(t,s)=>{Object.defineProperty(t.dom,ES,{value:s,writable:!0})},_p=t=>{const s=ro(t)?t.dom[ES]:null;return k.from(s)},Og=t=>wt(t),R0=bt,Od=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Bf(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},i=return{debugInfo:re("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:Xe}},Wl=Od(),Ap=(t,s,c)=>{const i=c.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Ji(p.slice(0,1).concat(p.slice(3)))}),t},Ji=t=>ye(t,s=>na(s,"/*")?s.substring(0,s.length-2):s),N0=(t,s)=>{const c=t.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=t},TS=(t,s)=>{const c=s.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Ji(g.slice(1))}),t},Dg=wt("alloy-premade"),Dd=t=>(Object.defineProperty(t.element.dom,Dg,{value:t.uid,writable:!0}),Ta(Dg,t)),ck=t=>Gn(t.dom,Dg),Rg=t=>dt(t,Dg),$f=t=>TS((s,...c)=>t(s.getApis(),s,...c),t),pl={init:()=>Ja({readState:re("No State required")})},Ja=t=>t,ak=(t,s)=>{const c=ye(s,d=>xa(d.name(),[Le("config"),ge("state",pl)])),i=Cs("component.behaviours",Pt(c),t.behaviours).fold(d=>{throw new Error(la(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},bt);return{list:s,data:Fo(i,d=>{const g=d.map(;return re(g)})}},kS=t=>t.list,_S=t=>t.data,ry=(t,s)=>{const c={};return $o(t,(i,d)=>{$o(i,(g,p)=>{const C=dt(c,p).getOr([]);c[p]=C.concat([s(d,g)])})}),c},Qa=t=>({classes:rs(t.classes)?[]:t.classes,attributes:rs(t.attributes)?{}:t.attributes,styles:rs(t.styles)?{}:t.styles}),Ng=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),M0=(t,s,c,i)=>{const d={...s};We(c,A=>{d[A.name()]=A.exhibit(t,i)});const g=ry(d,(A,N)=>({name:A,modification:N})),p=A=>lo(A,(N,P)=>({...P.modification,...N}),{}),C=lo(g.classes,[]),S=p(g.attributes),T=p(g.styles);return Qa({classes:C,attributes:S,styles:T})},B0=(t,s,c,i)=>{try{const d=Cr(c,(g,p)=>{const C=g[s],S=p[s],T=i.indexOf(C),A=i.indexOf(S);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(A===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return T<A?-1:A<T?1:0});return bn.value(d)}catch(d){return bn.error([d])}},ik=(t,s)=>({handler:t,purpose:s}),AS=(t,s)=>({cHandler:t,purpose:s}),cy=(t,s)=>AS(Xt.apply(void 0,[t.handler].concat(s)),t.purpose),Mg=t=>t.cHandler,Bg=(t,s)=>({name:t,handler:s}),P0=(t,s)=>{const c={};return We(t,,c},lk=(t,s,c)=>{const i={...c,...P0(s,t)};return ry(i,Bg)},$0=(t,s,c,i)=>{const d=lk(t,c,i);return ay(d,s)},Pg=t=>{const s=Uv(t);return(c,i,...d)=>{const g=[c,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},uk=(t,s)=>bn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(ye(s,c=>c.name),null,2)]),Op=(t,s,c)=>{const i=s[c];return i?B0("Event: "+c,"name",t,i).map(d=>{const g=ye(d,p=>p.handler);return Wv(g)}):uk(c,t)},ay=(t,s)=>{const c=Hi(t,(i,d)=>(i.length===1?bn.value(i[0].handler):Op(i,s,d)).map(p=>{const C=Pg(p),S=i.length>1?Kn(s[d],T=>cs(i,A=>A.name===T)).join(" > "):i[0].name;return Ta(d,ik(C,S))}));return Mu(c,{})},ei="alloy.base.behaviour",F0=Pt([fc("dom","dom",uo(),Pt([Le("tag"),ge("styles",{}),ge("classes",[]),ge("attributes",{}),mo("value"),mo("innerHtml")])),Le("components"),Le("uid"),ge("events",{}),ge("apis",{}),fc("eventOrder","eventOrder",pm({[Xa()]:["disabling",ei,"toggling","typeaheadevents"],[Td()]:[ei,"focusing","keying"],[wm()]:[ei,"disabling","toggling","representing"],[Of()]:[ei,"representing","streaming","invalidating"],[xm()]:[ei,"representing","item-events","tooltipping"],[gr()]:["focusing",ei,"item-type-events"],[Bu()]:["focusing",ei,"item-type-events"],[xd()]:["item-type-events","tooltipping"],[Nf()]:["receiving","reflecting","tooltipping"]}),fr()),mo("domModification")]),OS=t=>Cs("custom.definition",F0,t),L0=t=>({...t.dom,uid:t.uid,domChildren:ye(t.components,s=>s.element)}),BD=t=>t.domModification.fold(()=>Qa({}),Qa),I0=t=>t.events,km=(t,s)=>{const c=Qo(t,s);return c===void 0||c===""?[]:c.split(" ")},Lu=(t,s,c)=>{const d=km(t,s).concat([c]);return ht(t,s,d.join(" ")),!0},iy=(t,s,c)=>{const i=Kn(km(t,s),d=>d!==c);return i.length>0?ht(t,s,i.join(" ")):es(t,s),!1},$g=t=>t.dom.classList!==void 0,H0=t=>km(t,"class"),DS=(t,s)=>Lu(t,"class",s),Zo=(t,s)=>iy(t,"class",s),dk=Ws=(t,s)=>{$g(t)?t.dom.classList.add(s):DS(t,s)},RS=t=>{($g(t)?t.dom.classList:H0(t)).length===0&&es(t,"class")},fs=(t,s)=>{$g(t)?t.dom.classList.remove(s):Zo(t,s),RS(t)},Fg=(t,s)=>{const c=$g(t)?t.dom.classList.toggle(s):dk(t,s);return RS(t),c},hr=(t,s)=>$g(t)&&t.dom.classList.contains(s),Ss=(t,s)=>{We(s,c=>{Ws(t,c)})},yi=(t,s)=>{We(s,c=>{fs(t,c)})},ly=(t,s)=>{We(s,c=>{Fg(t,c)})},bc=(t,s)=>jt(s,c=>hr(t,c)),Dp=t=>{const s=t.dom.classList,c=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(c[i]=d)}return c},Lg=t=>$g(t)?Dp(t):H0(t),Iu=t=>t.dom.value,Ig=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},_m=(t,s,c)=>fi(t,s).map(d=>{if(c.exists(p=>!co(p,d))){const p=c.map(Ec).getOr("span"),C=de.fromTag(p);return gi(d,C),C}else return d}),Rd=(t,s,c)=>{c.fold(()=>Dc(t,s),i=>{co(i,s)||(gi(i,s),hi(i))})},mk=(t,s,c)=>{const i=ye(s,c),d=dc(t);return We(d.slice(i.length),hi),i},NS=(t,s,c,i)=>{const d=fi(t,s),g=i(c,d),p=_m(t,s,d);return Rd(t,g.element,p),g},PD=(t,s,c)=>mk(t,s,(i,d)=>NS(t,d,i,c)),$D=(t,s)=>mk(t,s,(c,i)=>{const d=fi(t,i);return Rd(t,c,d),c}),bl=(t,s)=>{const c=Uo(t),i=Uo(s),d=Ct(i,c),g=ur(t,(p,C)=>!Gn(s,C)||p!==s[C]).t;return{toRemove:d,toSet:g}},Zc=(t,s)=>{const{class:c,style:i,...d}=Jh(s),{toSet:g,toRemove:p}=bl(t.attributes,d),C=()=>{We(p,fe=>es(s,fe)),bu(s,g)},S=dr(s),{toSet:T,toRemove:A}=bl(t.styles,S),N=()=>{We(A,fe=>V(s,fe)),_c(s,T)},P=Lg(s),L=Ct(P,t.classes),U=Ct(t.classes,P),J=he=fe=>{Mf(s,fe)},ce=oe=()=>{const fe=s,je=t.value.getOrUndefined();je!==Iu(fe)&&Ig(fe,je!=null?je:"")};return C(),J(),N(),t.innerHtml.fold(ce,he),oe(),s},fk=t=>{const s=de.fromTag(t.tag);bu(s,t.attributes),Ss(s,t.classes),_c(s,t.styles),t.innerHtml.each(i=>Mf(s,i));const c=t.domChildren;return Tu(s,c),t.value.each(i=>{Ig(s,i)}),s},gk=(t,s)=>{try{const c=Zc(t,s);return k.some(c)}catch(c){return k.none()}},Am=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Rp=(t,s)=>{const c=d=>Ec(d)===t.tag&&!Am(t)&&!ck(d),i=s.filter(c).bind(d=>gk(t,d)).getOrThunk(()=>fk(t));return Ag(i,t.uid),i},V0=t=>{const s=dt(t,"behaviours").getOr({});return le(Uo(s),c=>{const i=s[c];return to(i)?[i.me]:[]})},z0=(t,s)=>ak(t,s),Hu=t=>{const s=V0(t);return z0(t,s)},Hg=(t,s,c)=>{const i=L0(t),d=BD(t),g={"alloy.base.modification":d},p=s.length>0?M0(c,g,s,i):d;return Ng(i,p)},Vg=(t,s,c)=>{const i={"alloy.base.behaviour":I0(t)};return $0(c,t.eventOrder,s,i).getOrDie()},zg=(t,s)=>{const c=()=>fe,i=Vt(Wl),d=Ro(OS(t)),g=Hu(t),p=kS(g),C=_S(g),S=Hg(d,p,C),T=Rp(S,s),A=Vg(d,p,C),N=Vt(d.components),P=je=>{i.set(je)},L=()=>{i.set(Od(c))},U=()=>{const je=dc(T),Be=le(je,Ae=>i.get().getByDom(Ae).fold(()=>[],Cn));N.set(Be)},J=je=>{const Be=C;return(Tt(Be[je.name()])?Be[je.name()]:()=>{throw new Error("Could not find "+je.name()+" in "+JSON.stringify(t,null,2))})()},he=je=>Tt(C[je.name()]),ce=oe=je=>C[je]().map(Be=>Be.state.readState()).getOr("not enabled"),fe={uid:t.uid,getSystem:i.get,config:J,hasConfigured:he,spec:t,readState:oe,getApis:ce,connect:P,disconnect:L,element:T,syncComponents:U,components:N.get,events:A};return fe},Ff=(t,s)=>{const c=dt(t,"components").getOr([]);return s.fold(()=>ye(c,Mc),i=>ye(c,(d,g)=>U0(d,fi(i,g))))},MS=(t,s)=>{const{events:c,...i}=R0(t),d=Ff(i,s),g={...i,events:{...Tm,...c},components:d};return bn.value(zg(g,s))},Fs=t=>{const s=de.fromText(t);return BS({element:s})},BS=t=>{const s=ia("external.component",Wo([Le("element"),mo("uid")]),t),c=Vt(Od()),i=C=>{c.set(C)},d=()=>{c.set(Od(()=>p))},g=s.uid.getOrThunk(()=>Og("external"));Ag(s.element,g);const p={uid:g,getSystem:c.get,config:k.none,hasConfigured:Xe,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:re("No state"),syncComponents:j,components:re([]),events:{}};return Dd(p)},Ug=Og,PS=t=>Gn(t,"uid"),U0=(t,s)=>Rg(t).getOrThunk(()=>{const c=PS(t)?t:{uid:Ug(""),...t};return MS(c,s).getOrDie()}),Mc=t=>U0(t,k.none()),Ci=Dd;var $S=(t,s,c,i,d)=>t(c,i)?k.some(c):Tt(d)&&d(c)?k.none():s(c,i,d);const W0=(t,s,c)=>{let i=t.dom;const d=Tt(c)?c:Xe;for(;i.parentNode;){i=i.parentNode;const g=de.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},Lf=(t,s,c)=>$S((d,g)=>g(d),W0,t,s,c),hk=(t,s)=>{const c=d=>s(de.fromDom(d));return Re(t.dom.childNodes,c).map(de.fromDom)},FS=(t,s)=>{const c=i=>{for(let d=0;d<i.childNodes.length;d++){const g=de.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const p=c(i.childNodes[d]);if(p.isSome())return p}return k.none()};return c(t.dom)},uy=(t,s,c)=>Lf(t,s,c).isSome(),ti=(t,s,c)=>W0(t,i=>_s(i,s),c),Z0=(t,s)=>hk(t,c=>_s(c,s)),Zs=(t,s)=>pu(s,t),Zl=(t,s,c)=>$S((d,g)=>_s(d,g),ti,t,s,c),Wg="aria-controls",Om=t=>Lf(t,c=>{if(!ro(c))return!1;const i=Qo(c,"id");return i!==void 0&&i.indexOf(Wg)>-1}).bind(c=>{const i=Qo(c,"id"),d=xe(c);return Zs(d,`[${Wg}="${i}"]`)}),If=()=>{const t=wt(Wg);return{id:t,link:i=>{ht(i,Wg,t)},unlink:i=>{es(i,Wg)}}},Hf=(t,s)=>Om(s).exists(c=>Nd(t,c)),Nd=(t,s)=>uy(s,c=>co(c,t.element),Xe)||Hf(t,s),LS="unknown";var Vf;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Vf||(Vf={}));const Dm=Vt({}),zf=(t,s)=>{const c=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{c.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{c.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{c.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:logEventResponse:(d,g,p)=>{c.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();Rn(["mousemove","mouseover","mouseout",wm()],t)}}},IS=(t,s,c)=>{switch(dt(Dm.get(),t).orThunk(()=>{const d=Uo(Dm.get());return vs(d,g=>t.indexOf(g)>-1?k.some(Dm.get()[g]):k.none())}).getOr(Vf.NORMAL)){case Vf.NORMAL:return c(my());case Vf.LOGGING:{const d=zf(t,s),g=c(d);return d.write(),g}case Vf.STOP:return!0}},pk=["alloy/data/Fields","alloy/debugging/Debugging"],dy=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Re(s,c=>c.indexOf("alloy")>0&&!cs(pk,).getOr(LS)}else return LS},bk={logEventCut:j,logEventStopped:j,logNoParent:j,logEventNoHandlers:j,logEventResponse:j,write:j},j0=(t,s,c)=>IS(t,s,c),my=re(bk),ni=re([Le("menu"),Le("selectedMenu")]),HS=re([Le("item"),Le("selectedItem")]);re(Pt(HS().concat(ni())));const Zg=re(Pt(HS())),VS=Vl("initSize",[Le("numColumns"),Le("numRows")]),vk=Np=()=>Vl("markers",[Le("backgroundMenu")].concat(ni()).concat(HS())),Rm=t=>Vl("markers",ye(t,Le)),G0=(t,s,c)=>(dy(),fc(s,s,c,vm(i=>bn.value((...d)=>i.apply(void 0,d))))),Un=t=>G0("onHandler",t,vg(j)),oi=t=>G0("onKeyboardHandler",t,vg(k.none)),jl=t=>G0("onHandler",t,uo()),fy=t=>G0("onKeyboardHandler",t,uo()),Co=(t,s)=>zs(t,re(s)),Mp=t=>zs(t,bt),gy=re(VS),Ar=(t,s,c,i,d,g,p,C=!1)=>({x:t,y:s,bubble:c,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:C}),Vu=Ka.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Nm=(t,s,c,i,d,g,p,C,S)=>t.fold(s,c,i,d,g,p,C,S),hy=(t,s,c,i)=>t.fold(s,s,i,i,s,i,c,c),q0=(t,s,c,i)=>t.fold(s,i,s,i,c,c,s,i),Bp=Vu.southeast,py=Vu.southwest,K0=Vu.northeast,zu=Vu.northwest,Md=Vu.south,yk=Vu.north,Ce=Vu.east,Pp=Vu.west,jg=(t,s,c,i)=>{const d=t+s;return d>i?c:d<c?i:d},Si=by=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ns=(t,s)=>Ms(["left","right","top","bottom"],c=>dt(s,c).map(i=>by(t,i))),Y0=(t,s,c)=>{const i=(S,T)=>s[S].map(A=>{const N=S==="top"||S==="bottom",P=N?c.top:c.left,U=(S==="left"||S==="top"?Math.max:Math.min)(A,T)+P;return N?Si(U,t.y,t.bottom):Si(U,t.x,t.right)}).getOr(T),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),C=i("bottom",t.bottom);return ds(d,g,p-d,C-g)},Bd="layout",vy=t=>t.x,X0=(t,s)=>t.x+t.width/2-s.width/2,yy=(t,s)=>t.x+t.width-s.width,$p=Gg=Cy=(t,s)=>t.y+t.height/2-s.height/2,Ck=t=>t.x+t.width,ua=(t,s)=>t.x-s.width,Or=(t,s,c)=>Ar(vy(t),Gg(t),c.southeast(),Bp(),"southeast",ns(t,{left:1,top:3}),Bd),vc=(t,s,c)=>Ar(yy(t,s),Gg(t),c.southwest(),py(),"southwest",ns(t,{right:0,top:3}),Bd),da=(t,s,c)=>Ar(vy(t),$p(t,s),c.northeast(),K0(),"northeast",ns(t,{left:1,bottom:2}),Bd),Bc=(t,s,c)=>Ar(yy(t,s),$p(t,s),c.northwest(),zu(),"northwest",ns(t,{right:0,bottom:2}),Bd),jc=(t,s,c)=>Ar(X0(t,s),$p(t,s),c.north(),yk(),"north",ns(t,{bottom:2}),Bd),Dr=(t,s,c)=>Ar(X0(t,s),Gg(t),c.south(),Md(),"south",ns(t,{top:3}),Bd),Sy=(t,s,c)=>Ar(Ck(t),Cy(t,s),c.east(),Ce(),"east",ns(t,{left:0}),Bd),Fp=(t,s,c)=>Ar(ua(t,s),Cy(t,s),c.west(),Pp(),"west",ns(t,{right:1}),Bd),wy=()=>[Or,vc,da,Bc,Dr,jc,Sy,Fp],Lp=xy=()=>[da,Bc,Or,vc,jc,Dr],zS=()=>[Bc,da,vc,Or,jc,Dr],J0=()=>[Or,vc,da,Bc,Dr,jc],Ey=Sk=(t,s)=>s.universal?t:Kn(t,c=>Rn(s.channels,c));var US=Object.freeze({__proto__:null,events:t=>Lo([Pe(Nf(),(s,c)=>{const i=t.channels,d=Uo(i),g=c,p=Sk(d,g);We(p,C=>{const S=i[C],T=S.schema,A=ia("channel["+C+`] data
Receiver: `+Bf(s.element),T,g.data);S.onReceive(s,A)})})])}),xk=[ja("channels",Sd(bn.value,Wo([jl("onReceive"),ge("schema",fr())])))];const qg=(t,s,c)=>hl(i=>{c(i,t,s)}),Q0=(t,s,c)=>Qv((i,d)=>{c(i,t,s)}),WS=(t,s,c,i,d,g)=>{const p=Wo(t),C=xa(s,[ym("config",t)]);return Gl(p,C,s,c,i,d,g)},FD=(t,s,c,i,d,g)=>{const p=t,C=xa(s,[Ou("config",t)]);return Gl(p,C,s,c,i,d,g)},ka=(t,s,c)=>Ap((d,...g)=>{const p=[d].concat(g);return d.config({name:re(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},C=>{const S=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},c,s),LD=Gl=(t,s,c,i,d,g,p)=>{const C=N=>$r(N,c)?N[c]():k.none(),S=Fo(d,(N,P)=>ka(c,N,P)),A={...Fo(g,(N,P)=>N0(N,P)),...S,revoke:Xt(LD,c),config:N=>{const P=ia(c+"-config",t,N);return{key:c,value:{config:P,me:A,configAsRaw:us(()=>ia(c+"-config",t,N)),initialConfig:N,state:p}}},schema:re(s),exhibit:(N,P)=>ta(C(N),dt(i,"exhibit"),.getOrThunk(()=>Qa({})),name:re(c),handlers:N=>C(N).map(P=>dt(i,"events").getOr(()=>({}))(P.config,P.state)).getOr({})};return A},et=t=>hc(t),Ty=Wo([Le("fields"),Le("name"),ge("active",{}),ge("apis",{}),ge("state",pl),ge("extra",{})]),Rr=t=>{const s=ia("Creating behaviour: "+t.name,Ty,t);return WS(s.fields,s.name,s.active,s.apis,s.extra,s.state)},ZS=Wo([Le("branchKey"),Le("branches"),Le("name"),ge("active",{}),ge("apis",{}),ge("state",pl),ge("extra",{})]),eb=t=>{const s=ia("Creating behaviour: "+t.name,ZS,t);return FD(zn(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},ky=re(void 0),_a=Rr({fields:xk,name:"receiving",active:US});var jS=Object.freeze({__proto__:null,exhibit:(t,s)=>Qa({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Aa=(t,s=!1)=>t.dom.focus({preventScroll:s}),Kg=t=>t.dom.blur(),Ip=Uu=(t=mm())=>k.from(t.dom.activeElement).map(de.fromDom),vl=t=>Uu(xe(t)).filter(s=>t.dom.contains(s.dom)),vt=(t,s)=>{const c=xe(s),i=Uu(c).bind(g=>{const p=C=>co(g,C);return p(s)?k.some(s):FS(s,p)}),d=t(s);return i.each(g=>{Uu(c).filter(p=>co(p,g)).fold(()=>{Aa(g)},j)}),d},wi=(t,s,c,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:c.map(g),right:i.map(g),bottom:d.map(g)}},GS=qS=(t,s)=>{Ke(t,GS(s))},_y=Ka.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),KS=(t,s,c,i,d,g)=>{const p=s.rect,C=p.x-c,S=p.y-i,T=p.width,A=p.height,N=d-(C+T),P=g-(S+A),L=k.some(C),U=k.some(S),J=k.some(N),he=k.some(P),ce=k.none();return Nm(s.direction,()=>wi(t,L,U,ce,ce),()=>wi(t,ce,U,J,ce),()=>wi(t,L,ce,ce,he),()=>wi(t,ce,ce,J,he),()=>wi(t,L,U,ce,ce),()=>wi(t,L,ce,ce,he),()=>wi(t,L,U,ce,ce),()=>wi(t,ce,U,J,ce))},Ay=(t,s)=>t.fold(()=>{const c=s.rect;return wi("absolute",k.some(c.x),k.some(c.y),k.none(),k.none())},(c,i,d,g)=>KS("absolute",s,c,i,d,g),(c,i,d,g)=>KS("fixed",s,c,i,d,g)),Oy=(t,s)=>{const c=Xt(vd,s),i=t.fold(c,c,()=>{const p=Rc();return vd(s).translate(-p.left,-p.top)}),d=sr(s),g=kn(s);return ds(i.left,i.top,d,g)},Tk=(t,s)=>s.fold(c=>t.fold(re(c),re(c),()=>{const i=Dy(t,c.x,c.y);return ds(i.left,i.top,c.width,c.height)})),Dy=(t,s,c)=>{const i=On(s,c),d=()=>{const g=Rc();return i.translate(-g.left,-g.top)};return t.fold(re(i),re(i),d)},kk=_y.none;const Gc=_y.relative,Hp=_y.fixed,_k=(t,s)=>({anchorBox:t,origin:s}),Ak=(t,s)=>_k(t,s),Ry="data-alloy-placement",Ok=(t,s)=>{ht(t,Ry,s)},YS=t=>Er(t,Ry),XS=t=>es(t,Ry),Vp=Ka.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),JS=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:p,y:C,right:S,bottom:T,width:A,height:N}=t,P=p>=c&&p<=d,L=C>=i&&C<=g,U=P&&L,J=S<=d&&S>=c,he=T<=g&&T>=i,ce=J&&he,oe=Math.min(A,p>=c?d-p:S-c),fe=Math.min(N,C>=i?g-C:T-i);return{originInBounds:U,sizeInBounds:ce,visibleW:oe,visibleH:fe}},Ny=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:p,y:C,width:S,height:T}=t,A=Math.max(c,d-S),N=Math.max(i,g-T),P=Si(p,c,A),L=Si(C,i,N),U=Math.min(P+S,d)-P,J=Math.min(L+T,g)-L;return ds(P,L,U,J)},Uf=(t,s,c)=>{const i=re(s.bottom-c.y),d=re(c.bottom-s.y),g=hy(t,d,d,i),p=re(s.right-c.x),C=re(c.right-s.x);return{maxWidth:q0(t,C,C,p),maxHeight:g}},Dk=(t,s,c,i)=>{const d=t.bubble,g=d.offset,p=Y0(i,t.restriction,g),C=t.x+g.left,S=t.y+g.top,T=ds(C,S,s,c),{originInBounds:A,sizeInBounds:N,visibleW:P,visibleH:L}=JS(T,p),U=A&&N,J=U?T:Ny(T,p),he=J.width>0&&J.height>0,{maxWidth:ce,maxHeight:oe}=Uf(t.direction,J,i),fe={rect:J,maxHeight:oe,maxWidth:ce,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return U||t.alwaysFit?Vp.fit(fe):Vp.nofit(fe,P,L,he)},Rk=(t,s,c,i,d,g)=>{const p=i.width,C=i.height,S=(A,N,P,L,U)=>{const J=A(c,i,d,t,g),he=Dk(J,p,C,g);return he.fold(re(he),(ce,oe,fe,je)=>(U===je?fe>L||oe>P:!U&&je)?he:Vp.nofit(N,P,L,U))};return no(s,(A,N)=>{const P=Xt(S,N);return A.fold(re(A),P)},Vp.nofit({rect:c,maxHeight:i.height,maxWidth:i.width,direction:Bp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(bt,bt)},My=t=>{const s=Vt(k.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{c(),s.set(k.some(C))}}},Nk=()=>My(t=>t.destroy()),Pd=()=>My(t=>t.unbind()),_n=()=>{const t=My(j);return{...t,on:c=>t.get().each(c)}},By=Oe,qc=(t,s,c)=>ul(t,s,By,c),tb=(t,s,c)=>rp(t,s,By,c),Py=Eu,$y=["top","bottom","right","left"],nb="data-alloy-transition-timer",QS=(t,s)=>bc(t,s.classes),Mk=(t,s,c)=>c.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),Bk=(t,s)=>{const c=return Ys(s,(i,d)=>{const g=t[d].map(c),p=i.map(c);return!mu(g,p)}).isSome()},Yg=t=>{const s=g=>{const C=ts(t,g).split(/\s*,\s*/);return Kn(C,lc)},c=g=>{if(nt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return na(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return no(d,(g,p,C)=>{const S=c(i[C])+c(p);return Math.max(g,S)},0)},ew=(t,s)=>{const c=Pd(),i=Pd();let d;const g=T=>{var A;const N=(A=T.raw.pseudoElement)!==null&&A!==void 0?A:"";return co(T.target,t)&&Jo(N)&&Rn($y,T.raw.propertyName)},p=T=>{if(Es(T)||g(T)){c.clear(),i.clear();const A=T==null?void 0:T.raw.type;(Es(A)||A===Df())&&(clearTimeout(d),es(t,nb),yi(t,s.classes))}},C=qc(t,jv(),T=>{g(T)&&(C.unbind(),c.set(qc(t,Df(),p)),i.set(qc(t,JT(),p)))}),S=Yg(t);requestAnimationFrame(()=>{d=setTimeout(p,S+17),ht(t,nb,d)})},ID=(t,s)=>{Ss(t,s.classes),Er(t,nb).each(c=>{clearTimeout(parseInt(c,10)),es(t,nb)}),ew(t,s)},Mm=(t,s,c,i,d,g)=>{const p=Mk(i,d,g);if(p||QS(t,i)){an(t,"position",c.position);const C=Oy(s,t),S=Ay(s,{...d,rect:C}),T=Ms($y,A=>S[A]);Bk(c,T)&&(Ke(t,T),p&&ID(t,i),X(t))}else yi(t,i.classes)},Pk=Xg=(t,s,c,i)=>{V(s,"max-height"),V(s,"max-width");const d=Pk(s);return Rk(s,i.preference,t,d,c,i.bounds)},$k=(t,s)=>{const c=s.classes;yi(t,c.off),Ss(t,c.on)},Fy=(t,s,c)=>{const i=c.maxHeightFunction;i(t,s.maxHeight)},tw=(t,s,c)=>{const i=c.maxWidthFunction;i(t,s.maxWidth)},Wf=(t,s,c)=>{const i=Ay(c.origin,s);c.transition.each(d=>{Mm(t,c.origin,i,d,s,c.lastPlacement)}),qS(t,i)},Fk=nw=ow=re((t,s)=>{nw(t,s),_c(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Jg=re((t,s)=>{nw(t,s)}),sw=(t,s,c)=>t[s]===void 0?c:t[s],Ly=(t,s,c,i,d,g,p,C)=>{const S=sw(p,"maxHeightFunction",ow()),T=sw(p,"maxWidthFunction",j),A=t.anchorBox,N=t.origin,P={bounds:Tk(N,g),origin:N,preference:i,maxHeightFunction:S,maxWidthFunction:T,lastPlacement:d,transition:C};return Lk(A,s,c,P)},Lk=(t,s,c,i)=>{const d=Xg(t,s,c,i);return Wf(s,d,i),Fk(s,d),$k(s,d),Fy(s,d,i),tw(s,d,i),{layout:d.layout,placement:d.placement}},rw=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Wu=(t,s,c,i=1)=>{const d=t*i,g=s*i,p=S=>dt(c,S).getOr([]),C=(S,T,A)=>{const N=Ct(rw,A);return{offset:On(S,T),classesOn:le(A,p),classesOff:le(N,p)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},zp=()=>Wu(0,0,{}),Up=bt,ob=(t,s)=>c=>Wp(c)==="rtl"?s:t,Wp=t=>ts(t,"direction")==="rtl"?"rtl":"ltr";var Qi;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Qi||(Qi={}));const Qg="data-alloy-vertical-dir",Zp=t=>uy(t,s=>ro(s)&&Qo(s,"data-alloy-vertical-dir")===Qi.BottomToTop),Bm=()=>xa("layouts",[Le("onLtr"),Le("onRtl"),mo("onBottomLtr"),mo("onBottomRtl")]),sb=(t,s,c,i,d,g,p)=>{const C=p.map(Zp).getOr(!1),S=s.layouts.map(L=>L.onLtr(t)),T=s.layouts.map(L=>L.onRtl(t)),A=C?s.layouts.bind(L=>L.onBottomLtr.map(U=>U(t))).or(S).getOr(d):S.getOr(c),N=C?s.layouts.bind(.or(T).getOr(g):T.getOr(i);return ob(A,N)(t)},Ik=(t,s,c)=>{const i=s.hotspot,d=Oy(c,i.element),g=sb(t.element,s,J0(),Ey(),xy(),zS(),k.some(s.hotspot.element));return k.some(Up({anchorBox:d,bubble:s.bubble.getOr(zp()),overrides:s.overrides,layouts:g}))};var Hk=[Le("hotspot"),mo("bubble"),ge("overrides",{}),Bm(),Co("placement",Ik)];const cw=(t,s,c)=>{const i=Dy(c,s.x,s.y),d=ds(i.left,i.top,s.width,s.height),g=sb(t.element,s,wy(),Lp(),wy(),Lp(),k.none());return k.some(Up({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Vk=[Le("x"),Le("y"),ge("height",0),ge("width",0),ge("bubble",zp()),ge("overrides",{}),Bm(),Co("placement",cw)];const Iy=Ka.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),zk=t=>t.fold(bt,(s,c,i)=>s.translate(-c,-i)),Uk=t=>t.fold(bt,bt),aw=t=>no(t,(s,c)=>s.translate(c.left,c.top),On(0,0)),Wk=t=>{const s=ye(t,zk);return aw(s)},iw=Zk=Iy.screen,rb=Iy.absolute,jk=(t,s,c)=>{const i=ya(c.root).dom,d=g=>{const p=Gr(g),C=Gr(t.element);return co(p,C)};return k.from(i.frameElement).map(de.fromDom).filter(d).map(Tr)},lw=(t,s,c)=>{const i=Gr(t.element),d=Rc(i),g=jk(t,s,c).getOr(d);return rb(g,d.left,d.top)},eh=(t,s,c,i)=>{const d=Zk(On(t,s));return k.some(lp(d,c,i))},Hy=(t,s,c,i,d)=>t.map(g=>{const p=[s,g.point],C=kk(i,()=>iw(p),()=>iw(p),()=>Wk(p)),S=fm(C.left,C.top,g.width,g.height),T=c.showAbove?xy():J0(),A=c.showAbove?zS():Ey(),N=sb(d,c,T,A,T,A,k.none());return Up({anchorBox:S,bubble:c.bubble.getOr(zp()),overrides:c.overrides,layouts:N})}),Vy=(t,s,c)=>{const i=lw(t,c,s);return s.node.filter(Vn).bind(d=>{const g=d.dom.getBoundingClientRect(),p=eh(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return Hy(p,i,s,c,C)})};var zy=[Le("node"),Le("root"),mo("bubble"),Bm(),ge("overrides",{}),ge("showAbove",!1),Co("placement",Vy)];const uw="\uFEFF",Uy="\xA0",cb={create:(t,s,c,i)=>({start:t,soffset:s,finish:c,foffset:i})},ab=Ka.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),qk=(t,s,c,i)=>t.fold(s,c,i),Wy=t=>t.fold(bt,bt,bt),dw=ab.before,Kk=ab.on,Zy=ab.after,Yk={before:dw,on:Kk,after:Zy,cata:qk,getStart:Wy},th=Ka.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xk=t=>th.exact(t.start,t.soffset,t.finish,t.foffset),jy=t=>t.match({domRange:s=>de.fromDom(s.startContainer),relative:(s,c)=>Yk.getStart(s),exact:(s,c,i,d)=>s}),Jk=th.domRange,Qk=th.relative,e_=th.exact,mw=t=>{const s=jy(t);return ya(s)},t_=cb.create,nc={domRange:Jk,relative:Qk,exact:e_,exactFromRange:Xk,getWin:mw,range:t_},HD=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,i)=>{t.setStart(c.dom,i)},c=>{t.setStartAfter(c.dom)})},nh=ib=(t,s,c)=>{const i=t.document.createRange();return HD(i,s),nh(i,c),i},fw=Gy=gw=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?k.some(c).map(Gy):k.none()},hw=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(Gy):k.none()},Zf=Ka.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),jp=(t,s,c)=>s(de.fromDom(c.startContainer),c.startOffset,de.fromDom(c.endContainer),c.endOffset),n_=o_=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(.map(d=>Zf.rtl(de.fromDom(d.endContainer),d.endOffset,de.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>jp(t,Zf.ltr,c)):jp(t,Zf.ltr,c)},Gp=(t,s)=>{const c=n_(t,s);return o_(t,c)},qy=(t,s)=>Gp(t,s).match({ltr:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,p),C},rtl:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(g.dom,p),C.setEnd(i.dom,d),C}});Zf.ltr,Zf.rtl;const pw=(t,s,c)=>Kn(Rl(t,c),s),Nr=(t,s)=>jr(s,t),bw=(t,s,c,i)=>{const g=Gr(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,i),g},Ky=(t,s,c,i)=>{const d=bw(t,s,c,i),g=co(t,c)&&s===i;return d.collapsed&&!g},VD=t=>k.from(t.getSelection()),oh=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return k.some(cb.create(de.fromDom(s.startContainer),s.startOffset,de.fromDom(c.endContainer),c.endOffset))}else return k.none()},s_=t=>{if(t.anchorNode===null||t.focusNode===null)return oh(t);{const s=de.fromDom(t.anchorNode),c=de.fromDom(t.focusNode);return Ky(s,t.anchorOffset,c,t.focusOffset)?k.some(cb.create(s,t.anchorOffset,c,t.focusOffset)):oh(t)}},vw=t=>VD(t).filter(s=>s.rangeCount>0).bind(s_),Yy=(t,s)=>{const c=qy(t,s);return gw(c)},qp=(t,s)=>{const c=qy(t,s);return hw(c)},sh=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:c,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(Sr,"text"),r_=t=>sh.get(t),Pm=(t,s)=>({element:t,offset:s}),yw=(t,s)=>{const c=dc(t);if(c.length===0)return Pm(t,s);if(s<c.length)return Pm(c[s],0);{const i=c[c.length-1],d=Sr(i)?r_(i).length:dc(i).length;return Pm(i,d)}},$m=(t,s)=>Sr(t)?Pm(t,s):yw(t,s),Fm=t=>t.foffset!==void 0,Xy=(t,s)=>s.getSelection.getOrThunk(().map(i=>{if(Fm(i)){const d=$m(i.start,i.soffset),g=$m(i.finish,i.foffset);return nc.range(d.element,d.offset,g.element,g.offset)}else return i}),Cw=(t,s,c)=>{const i=ya(s.root).dom,d=lw(t,c,s),g=Xy(i,s).bind(S=>{if(Fm(S))return qp(i,nc.exactFromRange(S)).orThunk(()=>{const A=de.fromText(uw);gi(S.start,A);const N=Yy(i,nc.exact(A,0,A,1));return hi(A),N}).bind(;{const T=Fo(S,N=>N.dom.getBoundingClientRect()),A={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return eh(A.left,A.top,A.right-A.left,A.bottom-A.top)}}),C=Xy(i,s).bind(S=>Fm(S)?ro(S.start)?k.some(S.start):ra(S.start):k.some(S.firstCell)).getOr(t.element);return Hy(g,d,s,c,C)};var zD=[mo("getSelection"),Le("root"),mo("bubble"),Bm(),ge("overrides",{}),ge("showAbove",!1),Co("placement",Cw)];const Jy="link-layout",Lm=t=>t.x+t.width,Zu=(t,s)=>t.x-s.width,Kp=(t,s)=>t.y-s.height+t.height,rh=t=>t.y,Qy=(t,s,c)=>Ar(Lm(t),rh(t),c.southeast(),Bp(),"southeast",ns(t,{left:0,top:2}),Jy),$d=(t,s,c)=>Ar(Zu(t,s),rh(t),c.southwest(),py(),"southwest",ns(t,{right:1,top:2}),Jy),ql=(t,s,c)=>Ar(Lm(t),Kp(t,s),c.northeast(),K0(),"northeast",ns(t,{left:0,bottom:3}),Jy),Yp=(t,s,c)=>Ar(Zu(t,s),Kp(t,s),c.northwest(),zu(),"northwest",ns(t,{right:1,bottom:3}),Jy),ub=()=>[Qy,$d,ql,Yp],Xp=e2=(t,s,c)=>{const i=Oy(c,s.item.element),d=sb(t.element,s,ub(),Xp(),ub(),Xp(),k.none());return k.some(Up({anchorBox:i,bubble:zp(),overrides:s.overrides,layouts:d}))};var ch=[Le("item"),Bm(),ge("overrides",{}),Co("placement",e2)],Jp=zn("type",{selection:zD,node:zy,hotspot:Hk,submenu:ch,makeshift:Vk});const t2=[pi("classes",Qr),qa("mode","all",["all","layout","placement"])],Sw=[ge("useFixed",Xe),mo("getBounds")],Im=[ja("anchor",Jp),xa("transition",t2)],db=()=>{const t=document.documentElement;return Hp(0,0,t.clientWidth,t.clientHeight)},c_=t=>{const s=Tr(t.element),c=t.element.dom.getBoundingClientRect();return Gc(s.left,s.top,c.width,c.height)},ww=(t,s,c,i,d,g)=>{const p=Ak(s.anchorBox,t);return Ly(p,i.element,s.bubble,s.layouts,d,c,s.overrides,g)},n2=(t,s,c,i,d)=>{const g=k.none();js(t,s,c,i,d,g)},js=(t,s,c,i,d,g)=>{const p=ia("placement.info",Pt(Im),d),C=p.anchor,S=i.element,T=c.get(i.uid);vt(()=>{an(S,"position","fixed");const A=As(S,"visibility");an(S,"visibility","hidden");const N=s.useFixed()?db():c_(t);C.placement(t,C,N).each(P=>{const L=g.orThunk(()=>s.getBounds.map(go)),U=ww(N,P,L,i,T,p.transition);c.set(i.uid,U)}),A.fold(P=>{an(S,"visibility",P)}),As(S,"left").isNone()&&As(S,"top").isNone()&&As(S,"right").isNone()&&As(S,"bottom").isNone()&&ic(As(S,"position"),"fixed")&&V(S,"position")},S)};var xw=Object.freeze({__proto__:null,position:n2,positionWithinBounds:js,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,i)=>{const d=i.element;We(["position","left","right","top","bottom"],g=>V(d,g)),XS(d),c.clear(i.uid)}}),Hm=Object.freeze({__proto__:null,init:()=>{let t={};return Ja({readState:()=>t,clear:d=>{to(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>dt(t,d)})}});const Pc=Rr({fields:Sw,name:"positioning",active:jS,apis:xw,state:Hm}),ah=Qp=t=>{Fn(t,xm());const s=t.components();We(s,Qp)},ih=t=>{const s=t.components();We(s,ih),Fn(t,vi())},o2=(t,s)=>{t.getSystem().addToWorld(s),Vn(t.element)&&ih(s)},lh=t=>{Qp(t),t.getSystem().removeFromWorld(t)},jf=(t,s)=>{Dc(t.element,s.element)},Kl=t=>{We(t.components(),s=>hi(s.element)),dm(t.element),t.syncComponents()},a_=(t,s,c)=>{const i=t.components();Kl(t);const d=c(s),g=Ct(i,d);We(g,p=>{Qp(p),t.getSystem().removeFromWorld(p)}),We(d,p=>{ah(p)?jf(t,p):(t.getSystem().addToWorld(p),jf(t,p),Vn(t.element)&&ih(p))}),t.syncComponents()},i_=(t,s,c)=>{const i=t.components(),d=le(s,C=>Rg(C).toArray());We(i,;const g=c(s),p=Ct(i,g);We(p,,We(g,C=>{ah(C)||o2(t,C)}),t.syncComponents()},Vm=(t,s)=>{uh(t,s,Dc)},uh=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),Vn(t.element)&&ih(s),t.syncComponents()},fb=t=>{Qp(t),hi(t.element),t.getSystem().removeFromWorld(t)},ju=t=>{const s=xr(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());fb(t),s.each(c=>{c.syncComponents()})},s2=t=>{const s=t.components();We(s,fb),dm(t.element),t.syncComponents()},oc=(t,s)=>{yl(t,s,Dc)},Ld=(t,s)=>{yl(t,s,dl)},yl=(t,s,c)=>{c(t,s.element);const i=dc(s.element);We(i,d=>{s.getByDom(d).each(ih)})},dh=t=>{const s=dc(t.element);We(s,,hi(t.element)},Kc=(t,s,c,i)=>{c.get().each(p=>{s2(t)});const d=s.getAttachPoint(t);Vm(d,t);const g=t.getSystem().build(i);return Vm(t,g),c.set(g),g},Oa=(t,s,c,i)=>{const d=Kc(t,s,c,i);return s.onOpen(t,d),d},ma=(t,s,c,i)=>c.get().map(()=>Kc(t,s,c,i)),Cl=(t,s,c,i,d)=>{e1(t,s),Oa(t,s,c,i),d(),t1(t,s)},gb=(t,s,c)=>{c.get().each(i=>{s2(t),ju(t),s.onClose(t,i),c.clear()})},xi=(t,s,c)=>c.isOpen(),Gf=(t,s,c,i)=>xi(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,i)),r2=(t,s,c)=>c.get(),l_=(t,s,c,i)=>{As(t.element,s).fold(d=>{ht(t.element,c,d)}),an(t.element,s,i)},Ew=(t,s,c)=>{Er(t.element,c).fold(},e1=(t,s,c)=>{const i=s.getAttachPoint(t);an(t.element,"position",Pc.getMode(i)),l_(t,"visibility",s.cloakVisibilityAttr,"hidden")},Tw=t=>cs(["top","left","right","bottom"],,t1=(t,s,c)=>{Tw(t.element)||V(t.element,"position"),Ew(t,"visibility",s.cloakVisibilityAttr)};var hb=Object.freeze({__proto__:null,cloak:e1,decloak:t1,open:Oa,openWhileCloaked:Cl,close:gb,isOpen:xi,isPartOf:Gf,getState:r2,setContent:ma}),kw=Object.freeze({__proto__:null,events:(t,s)=>Lo([Pe(Cp(),(c,i)=>{gb(c,t,s)})])}),d_=[Un("onOpen"),Un("onClose"),Le("isPartOf"),Le("getAttachPoint"),ge("cloakVisibilityAttr","data-precloak-visibility")],_w=Object.freeze({__proto__:null,init:()=>{const t=_n(),s=re("not-implemented");return Ja({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Ln=Rr({fields:d_,name:"sandboxing",active:kw,apis:hb,state:_w}),Yl=re("dismiss.popups"),qf=re("reposition.popups"),c2=re("mouse.released"),Aw=Wo([ge("isExtraPart",Xe),xa("fireEventInstead",[ge("event",Em())])]),n1=t=>{const s=ia("Dismissal",Aw,t);return{[Yl()]:{schema:Wo([Le("target")]),onReceive:(c,i)=>{Ln.isOpen(c)&&(Ln.isPartOf(c,i.target)||s.isExtraPart(c,i.target)||s.fireEventInstead.fold(()=>Ln.close(c),g=>Fn(c,g.event)))}}}},m_=Wo([xa("fireEventInstead",[ge("event",SS())]),Hl("doReposition")]),mh=t=>{const s=ia("Reposition",m_,t);return{[qf()]:{onReceive:c=>{Ln.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),i=>Fn(c,i.event))}}}},pb=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},Ei=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var zm=Object.freeze({__proto__:null,onLoad:pb,onUnload:Ei,setValue:(t,s,c,i)=>{s.store.manager.setValue(t,s,c,i)},getValue:getState:(t,s,c)=>c}),yb=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[No((i,d)=>{pb(i,t,s)}),Fu((i,d)=>{Ei(i,t,s)})]:[Q0(t,s,pb)];return Lo(c)}});const Kf=()=>{const t=Vt(null),s=c=()=>t.get()===null,i=()=>{t.set(null)};return Ja({set:t.set,get:t.get,isNotSet:c,clear:i,readState:s})},f_=Ow=()=>{const t=Vt({}),s=Vt({});return Ja({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>dt(t.get(),p).orThunk(,update:p=>{const C=t.get(),S=s.get(),T={},A={};We(p,N=>{T[N.value]=N,dt(N,"meta").each(P=>{dt(P,"text").each(L=>{A[L]=N})})}),t.set({...C,...T}),s.set({...S,...A})},clear:()=>{t.set({}),s.set({})}})};var gh=Object.freeze({__proto__:null,memory:Kf,dataset:Ow,manual:f_,init:);const Id=(t,s,c,i)=>{const d=s.store;c.update([i]),d.setValue(t,i),s.onSetValue(t,i)},h_=(t,s,c)=>{const i=s.store,d=i.getDataKey(t);return c.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},p_=(t,s,c)=>{s.store.initialValue.each(d=>{Id(t,s,c,d)})},Dw=(t,s,c)=>{c.clear()};var a2=[mo("initialValue"),Le("getFallbackEntry"),Le("getDataKey"),Le("setValue"),Co("manager",{setValue:Id,getValue:h_,onLoad:p_,onUnload:Dw,state:Ow})];const i2=l2=(t,s,c,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Cb=(t,s,c)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var Um=[Le("getValue"),ge("setValue",j),mo("initialValue"),Co("manager",{setValue:l2,getValue:i2,onLoad:Cb,onUnload:j,state:pl.init})];const Rw=(t,s,c,i)=>{c.set(i),s.onSetValue(t,i)},o1=(t,s,c)=>c.get(),u2=(t,s,c)=>{s.store.initialValue.each(},b_=var s1=[mo("initialValue"),Co("manager",{setValue:Rw,getValue:o1,onLoad:u2,onUnload:b_,state:Kf})],v_=[Ga("store",{mode:"memory"},zn("mode",{memory:s1,manual:Um,dataset:a2})),Un("onSetValue"),ge("resetOnDom",!1)];const pt=Rr({fields:v_,name:"representing",active:yb,apis:zm,extra:{setValueFrom:(t,s)=>{const c=pt.getValue(s);pt.setValue(t,c)}},state:gh}),pr=(t,s)=>Nu(t,{},ye(s,c=>Iv(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([zs("dump",bt)])),Hd=t=>t.dump,er=(t,s)=>({...et(s),...t.dump}),el={field:pr,augment:er,get:Hd},Sb="placeholder",r1=Ka.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Xl=t=>Gn(t,"uiType"),wb=(t,s,c,i)=>t.exists(d=>d!==c.owner)?r1.single(!0,re(c)):dt(i,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+Uo(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),xb=(t,s,c,i)=>Xl(c)&&c.uiType===Sb?wb(t,s,c,i):r1.single(!1,re(c)),hh=(t,s,c,i)=>xb(t,s,c,i).fold((g,p)=>{const C=Xl(c)?p(s,c.config,c.validated):p(s),S=dt(C,"components").getOr([]),T=le(S,A=>hh(t,s,A,i));return[{...C,components:T}]},(g,p)=>{if(Xl(c)){const C=p(s,c.config,c.validated);return c.validated.preprocess.getOr(bt)(C)}else return p(s)}),Nw=(t,s,c,i)=>le(c,d=>hh(t,s,d,i)),c1=(t,s)=>{let c=!1;const i=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((p,C)=>p,(p,C)=>p);return{name:re(t),required:g,used:i,replace:d}},d2=(t,s,c,i)=>{const d=Fo(i,(p,C)=>c1(C,p)),g=Nw(t,s,c,d);return $o(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},m2=r1.single,y_=r1.multiple,Jl=re(Sb),Eb=Ka.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ph=ge("factory",{sketch:bt}),yc=ge("schema",[]),ir=Le("name"),Tb=fc("pname","pname",Xi(,fr()),a1=zs("schema",,kb=ge("defaults",re({})),i1=ge("overrides",re({})),l1=Pt([ph,yc,ir,Tb,kb,i1]),bh=Pt([ph,yc,ir,kb,i1]),Mw=Pt([ph,yc,ir,Tb,kb,i1]),u1=Pt([ph,a1,ir,Le("unit"),Tb,kb,i1]),Bw=t=>t.fold(k.some,k.none,k.some,k.some),Pw=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},$w=t=>t.fold(bt,bt,bt,bt),tl=(t,s)=>c=>{const i=ia("Converting part type",s,c);return t(i)},$c=tl(Eb.required,l1),Sl=tl(Eb.external,bh),Da=tl(Eb.optional,Mw),d1=tl(Eb.group,u1),_b=re("entirety");var Fw=Object.freeze({__proto__:null,required:$c,external:Sl,optional:Da,group:d1,asNamedPart:Bw,name:Pw,asCommon:$w,original:_b});const m1=(t,s,c,i)=>yo(s.defaults(t,c,i),c,{uid:t.partUids[s.name]},s.overrides(t,c,i)),C_=(t,s,c)=>{const i={},d={};return We(c,g=>{g.fold(p=>{i[p.pname]=m2(!0,(C,S,T)=>p.factory.sketch(m1(C,p,S,T)))},p=>{const C=s.parts[p.name];d[p.name]=re(p.factory.sketch(m1(s,p,C[_b()]),C))},p=>{i[p.pname]=m2(!1,(C,S,T)=>p.factory.sketch(m1(C,p,S,T)))},p=>{i[p.pname]=y_(!0,(C,S,T)=>{const A=C[p.name];return ye(A,N=>p.factory.sketch(yo(p.defaults(C,N,T),N,p.overrides(C,N))))})})}),{internals:re(i),externals:re(d)}},Vd=(t,s)=>{const c={};return We(s,i=>{Bw(i).each(d=>{const g=f1(t,d.pname);c[d.name]=p=>{const C=ia("Part: "+d.name+" in "+t,Pt(d.schema),p);return{...g,config:p,validated:C}}})}),c},f1=f2=(t,s,c)=>({uiType:Jl(),owner:t,name:s,config:c,validated:{}}),Lw=t=>le(t,s=>s.fold(k.none,k.some,k.none,k.none).map(c=>Vl(c.name,c.schema.concat([Mp(_b())]))).toArray()),Iw=t=>ye(t,Pw),g2=(t,s,c)=>C_(t,s,c),Ab=(t,s,c)=>d2(k.some(t),s,s.components,c),Mo=(t,s,c)=>{const i=s.partUids[c];return t.getSystem().getByUid(i).toOptional()},zd=(t,s,c)=>Mo(t,s,c).getOrDie("Could not find part: "+c),Hw=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return We(c,p=>{i[p]=re(g.getByUid(d[p]))}),i},h2=(t,s)=>{const c=t.getSystem();return Fo(s.partUids,},p2=t=>Uo(t.partUids),Yf=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return We(c,p=>{i[p]=re(g.getByUid(d[p]).getOrDie())}),i},b2=(t,s)=>{const c=Iw(s);return hc(ye(c,i=>({key:i,value:t+"-"+i})))},v2=t=>fc("partUids","partUids",Dn(s=>b2(s.uid,t)),fr());var S_=Object.freeze({__proto__:null,generate:Vd,generateOne:f2,schemas:Lw,names:Iw,substitutes:g2,components:Ab,defaultUids:b2,defaultUidsSchema:v2,getAllParts:h2,getAllPartNames:p2,getPart:Mo,getPartOrDie:zd,getParts:Hw,getPartsOrDie:Yf});const vh=(t,s)=>(t.length>0?[Vl("parts",t)]:[]).concat([Le("uid"),ge("dom",{}),ge("components",[]),Mp("originalSpec"),ge("debug.sketcher",{})]).concat(s),yh=(t,s,c,i,d)=>{const g=vh(i,d);return ia(t+" [SpecSchema]",Wo(g.concat(s)),c)},y2=(t,s,c,i)=>{const d=Wm(i),g=yh(t,s,d,[],[]);return c(g,d)},C2=(t,s,c,i,d)=>{const g=Wm(d),p=Lw(c),C=v2(c),S=yh(t,s,g,p,[C]),T=g2(t,S,c),A=Ab(t,S,T.internals());return i(S,A,g,T.externals())},wl=t=>Gn(t,"uid"),Wm=t=>wl(t)?t:{...t,uid:Og("uid")},w_=g1=Wo([Le("name"),Le("factory"),Le("configFields"),ge("apis",{}),ge("extraApis",{})]),x_=Wo([Le("name"),Le("factory"),Le("configFields"),Le("partFields"),ge("apis",{}),ge("extraApis",{})]),si=t=>{const s=ia("Sketcher for "+t.name,g1,t),c=g=>y2(s.name,s.configFields,s.factory,g),i=Fo(s.apis,$f),d=Fo(s.extraApis,(g,p)=>N0(g,p));return{name:s.name,configFields:s.configFields,sketch:c,...i,...d}},Fc=t=>{const s=ia("Sketcher for "+t.name,x_,t),c=p=>C2(s.name,s.configFields,s.partFields,s.factory,p),i=Vd(s.name,s.partFields),d=Fo(s.apis,$f),g=Fo(s.extraApis,(p,C)=>N0(p,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:i,...d,...g}},Xf=t=>Tc("input")(t)&&Qo(t,"type")!=="radio"||Tc("textarea")(t);var Vw=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const E_=[Le("find")],Pn=Rr({fields:E_,name:"composing",apis:Vw}),S2=["input","button","textarea","select"],zw=(t,s,c)=>{(s.disabled()?Ww:h1)(t,s)},w2=(t,s)=>s.useNative===!0&&Rn(S2,Ec(t.element)),T_=t=>pf(t.element,"disabled"),k_=t=>{ht(t.element,"disabled","disabled")},Uw=t=>{es(t.element,"disabled")},__=t=>Qo(t.element,"aria-disabled")==="true",yt=t=>{ht(t.element,"aria-disabled","true")},Zm=t=>{ht(t.element,"aria-disabled","false")},Ww=(t,s,c)=>{s.disableClass.each(d=>{Ws(t.element,d)}),(w2(t,s)?k_:yt)(t),s.onDisabled(t)},h1=(t,s,c)=>{s.disableClass.each(d=>{fs(t.element,d)}),(w2(t,s)?Uw:Zm)(t),s.onEnabled(t)},p1=(t,s)=>w2(t,s)?T_(t):__(t);var jD=Object.freeze({__proto__:null,enable:h1,disable:Ww,isDisabled:p1,onLoad:zw,set:(t,s,c,i)=>{(i?Ww:h1)(t,s)}}),O_=Object.freeze({__proto__:null,exhibit:(t,s)=>Qa({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Lo([Kv(Xa(),(c,i)=>p1(c,t)),Q0(t,s,zw)])}),Zw=[Hr("disabled",Xe),ge("useNative",!0),mo("disableClass"),Un("onDisabled"),Un("onEnabled")];const Zt=Rr({fields:Zw,name:"disabling",active:O_,apis:jD}),Ud=(t,s,c,i)=>{const d=Nr(t.element,"."+s.highlightClass);We(d,g=>{cs(i,C=>co(C.element,g))||(fs(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),Fn(C,Ep())}))})},jw=(t,s,c)=>Ud(t,s,c,[]),D_=(t,s,c,i)=>{Ob(t,s,c,i)&&(fs(i.element,s.highlightClass),s.onDehighlight(t,i),Fn(i,Ep()))},b1=(t,s,c,i)=>{Ud(t,s,c,[i]),Ob(t,s,c,i)||(Ws(i.element,s.highlightClass),s.onHighlight(t,i),Fn(i,xp()))},R_=(t,s,c)=>{Ch(t,s).each(i=>{b1(t,s,c,i)})},Gw=(t,s,c)=>{E2(t,s).each(i=>{b1(t,s,c,i)})},x2=(t,s,c,i)=>{M_(t,s,c,i).fold(d=>{b1(t,s,c,d)})},qw=(t,s,c,i)=>{const d=Db(t,s);Re(d,i).each(p=>{b1(t,s,c,p)})},Ob=(t,s,c,i)=>hr(i.element,s.highlightClass),N_=(t,s,c)=>Zs(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),M_=(t,s,c,i)=>{const d=Nr(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>bn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Ch=(t,s,c)=>Zs(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),E2=(t,s,c)=>{const i=Nr(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Kw=(t,s,c,i)=>{const d=Nr(t.element,"."+s.itemClass);return st(d,p=>hr(p,s.highlightClass)).bind(p=>{const C=jg(p,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},B_=(t,s,c)=>Kw(t,s,c,-1),P_=(t,s,c)=>Kw(t,s,c,1),Db=(t,s,c)=>{const i=Nr(t.element,"."+s.itemClass);return Uc(ye(i,d=>t.getSystem().getByDom(d).toOptional()))};var Gu=Object.freeze({__proto__:null,dehighlightAll:jw,dehighlight:D_,highlight:b1,highlightFirst:R_,highlightLast:Gw,highlightAt:x2,highlightBy:qw,isHighlighted:Ob,getHighlighted:N_,getFirst:Ch,getLast:E2,getPrevious:B_,getNext:P_,getCandidates:Db}),Rb=[Le("highlightClass"),Le("itemClass"),Un("onHighlight"),Un("onDehighlight")];const so=Rr({fields:Rb,name:"highlighting",apis:Gu}),$_=[8],Wd=[9],qu=[13],Nb=[27],Ti=[32],Mb=[37],Zd=[38],Sh=[39],v1=[40],T2=(t,s,c)=>{const i=jn(t.slice(0,s)),d=jn(t.slice(s+1));return Re(i.concat(d),c)},F_=(t,s,c)=>{const i=jn(t.slice(0,s));return Re(i,c)},k2=(t,s,c)=>{const i=t.slice(0,s),d=t.slice(s+1);return Re(d.concat(i),c)},L_=(t,s,c)=>{const i=t.slice(s+1);return Re(i,c)},In=t=>s=>{const c=s.raw;return Rn(t,c.which)},ki=t=>jd=t=>t.raw.shiftKey===!0,I_=wh=_e(jd),Yn=(t,s)=>({matches:t,classification:s}),H_=(t,s)=>Re(t,i=>i.matches(s)).map(i=>i.classification),_2=(t,s,c)=>{s.exists(d=>c.exists(g=>co(g,d)))||Ft(t,T0(),{prevFocus:s,newFocus:c})},l=()=>{const t=c=>vl(c.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().triggerFocus(i,c.element);const g=t(c);_2(c,d,g)}}},m=()=>{const t=return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().getByDom(i).fold(j,p=>{so.highlight(c,p)});const g=t(c);_2(c,d,g)}}};var h;((h||(h={}));const v=(t,s,c,i,d)=>{const g=()=>t.concat([ge("focusManager",l()),Ga("focusInside","onFocus",vm(T=>Rn(["onFocus","onEnterOrSpace","onApi"],T)?bn.value(T):bn.error("Invalid value for focusInside"))),Co("handler",S),Co("state",s),Co("sendFocusIn",d)]),p=(T,A,N,P,L)=>{const U=N(T,A,P,L);return H_(U,A.event).bind(J=>J(T,A,P,L))},S={schema:g,processKey:p,toEvents:(T,A)=>{const N=T.focusInside!==h.OnFocusMode?k.none():d(T).map(U=>Pe(Td(),(J,he)=>{U(J,T,A),he.stop()})),P=(U,J)=>{const he=In(Ti.concat(qu))(J.event);T.focusInside===h.OnEnterOrSpaceMode&&he&&Sg(U,J)&&d(T).each(ce=>{ce(U,T,A),J.stop()})},L=[Pe(gl(),(U,J)=>{p(U,J,c,T,A).fold(()=>{P(U,J)},he=>{J.stop()})}),Pe(Cm(),(U,J)=>{p(U,J,i,T,A).each(he=>{J.stop()})})];return Lo(N.toArray().concat(L))}};return S},x=t=>{const s=[mo("onEscape"),mo("onEnter"),ge("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ge("firstTabstop",0),ge("useTabstopAt",Oe),mo("visibilitySelector")].concat([t]),c=(ce,oe)=>{const fe=ce.visibilitySelector.bind(je=>Zl(oe,je)).getOr(oe);return mt(fe)>0},i=(ce,oe)=>{const fe=Nr(ce.element,oe.selector),je=Kn(fe,Be=>c(oe,Be));return k.from(je[oe.firstTabstop])},d=(ce,oe)=>oe.focusManager.get(ce).bind(fe=>Zl(fe,oe.selector)),g=(ce,oe)=>c(ce,oe)&&ce.useTabstopAt(oe),p=(ce,oe,fe)=>{i(ce,oe).each(je=>{oe.focusManager.set(ce,je)})},C=(ce,oe,fe,je,Be)=>Be(oe,fe,Ae=>g(je,Ae)).fold(()=>je.cyclic?k.some(!0):k.none(),Ae=>(je.focusManager.set(ce,Ae),k.some(!0))),S=(ce,oe,fe,je)=>{const Be=Nr(ce.element,fe.selector);return d(ce,fe).bind(Ae=>st(Be,Xt(co,Ae)).bind(ct=>C(ce,Be,ct,fe,je)))},T=(ce,oe,fe)=>{const je=fe.cyclic?T2:F_;return S(ce,oe,fe,je)},A=(ce,oe,fe)=>{const je=fe.cyclic?k2:L_;return S(ce,oe,fe,je)},N=ce=>za(ce).bind(Nl).exists(oe=>co(oe,ce)),P=(ce,oe,fe)=>d(ce,fe).filter(.bind(je=>(N(je)?T:A)(ce,oe,fe)),L=(ce,oe,fe)=>fe.onEnter.bind(je=>je(ce,oe)),U=(ce,oe,fe)=>fe.onEscape.bind(je=>je(ce,oe)),J=re([Yn(ki([jd,In(Wd)]),T),Yn(In(Wd),A),Yn(ki([wh,In(qu)]),L)]),he=re([Yn(In(Nb),U),Yn(In(Wd),P)]);return v(s,pl.init,J,he,()=>k.some(p))};var _=x(zs("cyclic",Xe)),M=x(zs("cyclic",Oe));const I=(t,s,c)=>(A0(t,c,Xa()),k.some(!0)),Z=(t,s,c)=>Xf(c)&&In(Ti)(s.event)?k.none():I(t,s,c),Q=(t,s)=>k.some(!0),me=[ge("execute",Z),ge("useSpace",!1),ge("useEnter",!0),ge("useControlEnter",!1),ge("useDown",!1)],Ue=(t,s,c)=>c.execute(t,s,t.element),ut=(t,s,c,i)=>{const d=c.useSpace&&!Xf(t.element)?Ti:[],g=c.useEnter?qu:[],p=c.useDown?v1:[],C=d.concat(g).concat(p);return[Yn(In(C),Ue)].concat(c.useControlEnter?[Yn(ki([I_,In(qu)]),Ue)]:[])},lt=(t,s,c,i)=>c.useSpace&&!Xf(t.element)?[Yn(In(Ti),Q)]:[];var $e=v(me,pl.init,ut,lt,()=>k.none());const ft=()=>{const t=_n();return Ja({readState:()=>t.get().map(.getOr({numRows:"?",numColumns:"?"}),setGridSize:getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var At=Object.freeze({__proto__:null,flatgrid:ft,init:t=>t.state(t)});const Qt=t=>(s,c,i,d)=>{const g=t(s.element);return Ls(g,s,c,i,d)},Sn=(t,s)=>{const c=ob(t,s);return Qt(c)},Yo=Mr=t=>(s,c,i,d)=>Ls(t,s,c,i,d),Ls=(t,s,c,i,d)=>i.focusManager.get(s).bind(.map(,Ra=Mr,Jf=Mr,Qf=Mr,A2=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Bb=t=>!A2(t.dom),To=(t,s)=>st(t,s).map(c=>({index:c,candidates:t})),Yc=(t,s,c)=>{const i=p=>co(p,s),d=Nr(t,c),g=Kn(d,Bb);return To(g,i)},Cc=(t,s)=>st(t,c=>co(s,c)),_i=(t,s,c,i)=>{const d=Math.floor(s/c),g=s%c;return i(d,g).bind(p=>{const C=p.row*c+p.column;return C>=0&&C<t.length?k.some(t[C]):k.none()})},ri=(t,s,c,i,d)=>_i(t,s,i,(g,p)=>{const S=g===c-1?t.length-g*i:i,T=jg(p,d,0,S-1);return k.some({row:g,column:T})}),jm=(t,s,c,i,d)=>_i(t,s,i,(g,p)=>{const C=jg(g,d,0,c-1),T=C===c-1?t.length-C*i:i,A=Si(p,0,T-1);return k.some({row:C,column:A})}),fa=(t,s,c,i)=>ri(t,s,c,i,1),O2=(t,s,c,i)=>ri(t,s,c,i,-1),y1=(t,s,c,i)=>jm(t,s,c,i,-1),Ku=(t,s,c,i)=>jm(t,s,c,i,1),Lc=[Le("selector"),ge("execute",Z),oi("onEscape"),ge("captureTab",!1),gy()],C1=(t,s,c)=>{Zs(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Yw=(t,s)=>s.focusManager.get(t).bind(c=>Zl(c,s.selector)),Xw=(t,s,c,i)=>Yw(t,c).bind(d=>c.execute(t,s,d)),xh=t=>(s,c,i,d)=>Yc(s,c,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),Jw=(t,s,c)=>c.captureTab?k.some(!0):k.none(),Pb=(t,s,c)=>c.onEscape(t,s),Qw=xh(O2),eg=xh(fa),qD=xh(y1),v6=xh(Ku),y6=re([Yn(In(Mb),Sn(Qw,eg)),Yn(In(Sh),Yo(Qw,eg)),Yn(In(Zd),Ra(qD)),Yn(In(v1),Jf(v6)),Yn(ki([jd,In(Wd)]),Jw),Yn(ki([wh,In(Wd)]),Jw),Yn(In(Ti.concat(qu)),Xw)]),C6=re([Yn(In(Nb),Pb),Yn(In(Ti),Q)]);var S6=v(Lc,ft,y6,C6,()=>k.some(C1));const KD=(t,s,c,i,d)=>{const g=C=>Ec(C)==="button"&&Qo(C,"disabled")==="disabled",p=(C,S,T)=>d(C,S,i,0,T.length-1,T[S],A=>g(T[A])?p(C,A,T):k.from(T[A]));return Yc(t,c,s).bind(C=>{const S=C.index,T=C.candidates;return p(S,S,T)})},YD=(t,s,c,i)=>KD(t,s,c,i,(d,g,p,C,S,T,A)=>{const N=Si(g+p,C,S);return N===d?k.from(T):A(N)}),$b=(t,s,c,i)=>KD(t,s,c,i,(d,g,p,C,S,T,A)=>{const N=jg(g,p,C,S);return N===d?k.none():A(N)}),V_=[Le("selector"),ge("getInitial",k.none),ge("execute",Z),oi("onEscape"),ge("executeOnMove",!1),ge("allowVertical",!0),ge("allowHorizontal",!0),ge("cycles",!0)],w6=(t,s)=>s.focusManager.get(t).bind(c=>Zl(c,s.selector)),XD=(t,s,c)=>w6(t,c).bind(i=>c.execute(t,s,i)),JD=(t,s,c)=>{s.getInitial(t).orThunk(.each(i=>{s.focusManager.set(t,i)})},QD=(t,s,c)=>(c.cycles?$b:YD)(t,c.selector,s,-1),eR=(t,s,c)=>(c.cycles?$b:YD)(t,c.selector,s,1),xl=t=>(s,c,i,d)=>t(s,c,i,d).bind(()=>i.executeOnMove?XD(s,c,i):k.some(!0)),x6=(t,s,c)=>c.onEscape(t,s),E6=(t,s,c,i)=>{const d=[...c.allowHorizontal?Mb:[]].concat(c.allowVertical?Zd:[]),g=[...c.allowHorizontal?Sh:[]].concat(c.allowVertical?v1:[]);return[Yn(In(d),xl(Sn(QD,eR))),Yn(In(g),xl(Yo(QD,eR))),Yn(In(qu),XD),Yn(In(Ti),XD)]},T6=re([Yn(In(Ti),Q),Yn(In(Nb),x6)]);var k6=v(V_,pl.init,E6,T6,()=>k.some(JD));const ex=(t,s,c)=>k.from(t[s]).bind(i=>k.from(i[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),S1=(t,s,c,i)=>{const g=t[s].length,p=jg(c,i,0,g-1);return ex(t,s,p)},tx=(t,s,c,i)=>{const d=jg(c,i,0,t.length-1),g=t[d].length,p=Si(s,0,g-1);return ex(t,d,p)},tR=(t,s,c,i)=>{const g=t[s].length,p=Si(c+i,0,g-1);return ex(t,s,p)},nx=(t,s,c,i)=>{const d=Si(c+i,0,t.length-1),g=t[d].length,p=Si(s,0,g-1);return ex(t,d,p)},ox=(t,s,c)=>S1(t,s,c,1),z_=(t,s,c)=>S1(t,s,c,-1),_6=(t,s,c)=>tx(t,c,s,-1),A6=(t,s,c)=>tx(t,c,s,1),O6=(t,s,c)=>tR(t,s,c,-1),D6=(t,s,c)=>tR(t,s,c,1),R6=(t,s,c)=>nx(t,c,s,-1),N6=nR=[Vl("selectors",[Le("row"),Le("cell")]),ge("cycles",!0),ge("previousSelector",k.none),ge("execute",Z)],U_=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Zs(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},M6=(t,s,c)=>vl(t.element).bind(i=>c.execute(t,s,i)),B6=(t,s)=>ye(t,,sx=(t,s)=>(c,i,d)=>{const g=d.cycles?t:s;return Zl(i,d.selectors.row).bind(p=>{const C=Nr(p,d.selectors.cell);return Cc(C,i).bind(S=>{const T=Nr(c,d.selectors.row);return Cc(T,p).bind(A=>{const N=B6(T,d);return g(N,A,S).map(P=>P.cell)})})})},oR=sx(z_,O6),Eh=sx(ox,D6),sR=sx(_6,R6),P6=sx(A6,N6),W_=re([Yn(In(Mb),Sn(oR,Eh)),Yn(In(Sh),Yo(oR,Eh)),Yn(In(Zd),Ra(sR)),Yn(In(v1),Jf(P6)),Yn(In(Ti.concat(qu)),M6)]),$6=re([Yn(In(Ti),Q)]);var rR=v(nR,pl.init,W_,$6,()=>k.some(U_));const cR=[Le("selector"),ge("execute",Z),ge("moveOnTab",!1)],Z_=(t,s,c)=>c.focusManager.get(t).bind(i=>c.execute(t,s,i)),aR=(t,s,c)=>{Zs(t.element,s.selector).each(},j_=(t,s,c)=>$b(t,c.selector,s,-1),iR=(t,s,c)=>$b(t,c.selector,s,1),F6=(t,s,c,i)=>c.moveOnTab?Qf(j_)(t,s,c,i):k.none(),L6=(t,s,c,i)=>c.moveOnTab?Qf(iR)(t,s,c,i):k.none(),G_=re([Yn(In(Zd),Qf(j_)),Yn(In(v1),Qf(iR)),Yn(ki([jd,In(Wd)]),F6),Yn(ki([wh,In(Wd)]),L6),Yn(In(qu),Z_),Yn(In(Ti),Z_)]),I6=re([Yn(In(Ti),Q)]);var H6=v(cR,pl.init,G_,I6,()=>k.some(aR));const V6=[oi("onSpace"),oi("onEnter"),oi("onShiftEnter"),oi("onLeft"),oi("onRight"),oi("onTab"),oi("onShiftTab"),oi("onUp"),oi("onDown"),oi("onEscape"),ge("stopSpaceKeyup",!1),mo("focusIn")],z6=(t,s,c)=>[Yn(In(Ti),c.onSpace),Yn(ki([wh,In(qu)]),c.onEnter),Yn(ki([jd,In(qu)]),c.onShiftEnter),Yn(ki([jd,In(Wd)]),c.onShiftTab),Yn(ki([wh,In(Wd)]),c.onTab),Yn(In(Zd),c.onUp),Yn(In(v1),c.onDown),Yn(In(Mb),c.onLeft),Yn(In(Sh),c.onRight),Yn(In(Ti),c.onSpace)],lR=(t,s,c)=>[...c.stopSpaceKeyup?[Yn(In(Ti),Q)]:[],Yn(In(Nb),c.onEscape)];var U6=v(V6,pl.init,z6,lR,t=>t.focusIn);const W6=_.schema(),Z6=M.schema(),uR=k6.schema(),j6=S6.schema(),G6=rR.schema(),dR=$e.schema(),q6=H6.schema(),K6=U6.schema();var rx=Object.freeze({__proto__:null,acyclic:W6,cyclic:Z6,flow:uR,flatgrid:j6,matrix:G6,execution:dR,menu:q6,special:K6});const Y6=t=>$r(t,"setGridSize"),Lt=eb({branchKey:"mode",branches:rx,name:"keying",active:{events:,apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,c)})},setGridSize:(t,s,c,i,d)=>{Y6(c)&&c.setGridSize(i,d)}},state:At}),Na=(t,s)=>{vt(()=>{a_(t,s,()=>ye(s,t.getSystem().build))},t.element)},mR=(t,s)=>{vt(()=>{i_(t,s,()=>PD(t.element,s,t.getSystem().buildOrPatch))},t.element)},fR=(t,s,c,i)=>{lh(s);const d=NS(t.element,c,i,t.getSystem().buildOrPatch);o2(t,d),t.syncComponents()},cx=(t,s,c)=>{const i=t.getSystem().build(c);uh(t,i,s)},X6=(t,s,c,i)=>{ju(s),cx(t,(d,g)=>rr(d,g,c),i)},gR=(t,s,c,i)=>(s.reuseDom?mR:Na)(t,i),hR=(t,s,c,i)=>{cx(t,Dc,i)},J6=(t,s,c,i)=>{cx(t,ap,i)},Q6=(t,s,c,i)=>{const d=ax(t);Re(d,p=>co(i.element,p.element)).each(ju)},ax=pR=(t,s,c,i,d)=>{const g=ax(t);return k.from(g[i]).map(p=>(d.fold(()=>ju(p),C=>{(s.reuseDom?fR:X6)(t,p,i,C)}),p))};var tL=Object.freeze({__proto__:null,append:hR,prepend:J6,remove:Q6,replaceAt:pR,replaceBy:(t,s,c,i,d)=>{const g=ax(t);return st(g,i).bind(p=>pR(t,s,c,p,d))},set:gR,contents:ax});const fn=Rr({fields:[_r("reuseDom",!0)],name:"replacing",apis:tL}),bR=(t,s)=>{const c=Lo(s);return Rr({fields:[Le("enabled")],name:t,active:{events:re(c)}})},vn=(t,s)=>{const c=bR(t,s);return{key:t,value:{config:{},me:c,configAsRaw:re({}),initialConfig:{},state:pl}}},q_=(t,s)=>{s.ignore||(Aa(t.element),s.onFocus(t))};var nL=Object.freeze({__proto__:null,focus:q_,blur:(t,s)=>{s.ignore||Kg(t.element)},isFocused:t=>Ip(t.element)}),vR=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return Qa(c)},events:t=>Lo([Pe(Td(),(s,c)=>{q_(s,t),c.stop()})].concat(t.stopMousedown?[Pe(gr(),]:[]))}),Th=[Un("onFocus"),ge("stopMousedown",!1),ge("ignore",!1)];const Kt=Rr({fields:Th,name:"focusing",active:vR,apis:nL}),yR=t=>({init:()=>{const c=Vt(t);return{get:()=>c.get(),set:C=>c.set(C),clear:()=>c.set(t),readState:()=>c.get()}}}),K_=(t,s,c)=>{const i=s.aria;i.update(t,i,c.get())},sL=(t,s,c)=>{s.toggleClass.each(i=>{c.get()?Ws(t.element,i):fs(t.element,i)})},D2=(t,s,c,i)=>{const d=c.get();c.set(i),sL(t,s,c),K_(t,s,c),d!==i&&s.onToggled(t,i)},CR=(t,s,c)=>{D2(t,s,c,!c.get())},rL=(t,s,c)=>{D2(t,s,c,!0)},SR=(t,s,c)=>{D2(t,s,c,!1)},Y_=(t,s,c)=>c.get(),ix=(t,s,c)=>{D2(t,s,c,s.selected)};var cL=Object.freeze({__proto__:null,onLoad:ix,toggle:CR,isOn:Y_,on:rL,off:SR,set:D2}),wR=Object.freeze({__proto__:null,exhibit:events:(t,s)=>{const c=qg(t,s,CR),i=Q0(t,s,ix);return Lo(De([t.toggleOnExecute?[c]:[],[i]]))}});const iL=(t,s,c)=>{ht(t.element,"aria-pressed",c),s.syncWithExpanded&&Fb(t,s,c)},lL=(t,s,c)=>{ht(t.element,"aria-selected",c)},R2=(t,s,c)=>{ht(t.element,"aria-checked",c)},Fb=(t,s,c)=>{ht(t.element,"aria-expanded",c)};var xR=[ge("selected",!1),mo("toggleClass"),ge("toggleOnExecute",!0),Un("onToggled"),Ga("aria",{mode:"none"},zn("mode",{pressed:[ge("syncWithExpanded",!1),Co("update",iL)],checked:[Co("update",R2)],expanded:[Co("update",Fb)],selected:[Co("update",lL)],none:[Co("update",j)]}))];const En=Rr({fields:xR,name:"toggling",active:wR,apis:cL,state:yR(!1)}),tg=()=>{const t=return[Pe(Ed(),t),Pe(zl(),t),_d(Bu()),_d(gr())]},Gd=t=>{const s=c=>hl(;return Lo(De([t.map(s).toArray(),tg()]))},ER="alloy.item-hover",TR="alloy.item-focus",X_="alloy.item-toggled",Gm=t=>{(vl(t.element).isNone()||Kt.isFocused(t))&&(Kt.isFocused(t)||Kt.focus(t),Ft(t,ER,{item:t}))},lx=t=>{Ft(t,TR,{item:t})},uL=(t,s)=>{Ft(t,X_,{item:t,state:s})},J_=re(ER),kR=re(TR),_R=re(X_),Q_=t=>t.toggling.map(.getOr("menuitem"),AR=t=>({aria:{mode:"checked"},...Fa(t,(s,c)=>c!=="exclusive"),onToggled:(s,c)=>{Tt(t.onToggled)&&t.onToggled(s,c),uL(s,c)}}),dL=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:Q_(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:el.augment(t.itemBehaviours,[t.toggling.fold(En.revoke,s=>En.config(AR(s))),Kt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{lx(s)}}),Lt.config({mode:"execution"}),pt.config({store:{mode:"memory",initialValue:t.data}}),vn("item-type-events",[...tg(),Pe(xd(),Gm),Pe(Os(),Kt.focus)])]),components:t.components,eventOrder:t.eventOrder}),mL=[Le("data"),Le("components"),Le("dom"),ge("hasSubmenu",!1),mo("toggling"),el.field("itemBehaviours",[En,Kt,Lt,pt]),ge("ignoreFocus",!1),ge("domModification",{}),Co("builder",dL),ge("eventOrder",{})],fL=t=>({dom:t.dom,components:t.components,events:Lo([nk(Os())])}),ux=[Le("dom"),Le("components"),Co("builder",fL)],N2=re("item-widget"),M2=re([$c({name:"widget",overrides:t=>({behaviours:et([pt.config({store:{mode:"manual",getValue:s=>t.data,setValue:j}})])})})]),gL=t=>{const s=g2(N2(),t,M2()),c=Ab(N2(),t,s.internals()),i=g=>Mo(g,t,"widget").map(,d=(g,p)=>Xf(p.event.target)?k.none():(()=>(t.autofocus&&p.setSource(g.element),k.none()))();return{dom:t.dom,components:c,domModification:t.domModification,events:Lo([hl((g,p)=>{i(g).each(C=>{p.stop()})}),Pe(xd(),Gm),Pe(Os(),(g,p)=>{t.autofocus?i(g):Kt.focus(g)})]),behaviours:el.augment(t.widgetBehaviours,[pt.config({store:{mode:"memory",initialValue:t.data}}),Kt.config({ignore:t.ignoreFocus,onFocus:g=>{lx(g)}}),Lt.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:ky(),onLeft:d,onRight:d,onEscape:(g,p)=>!Kt.isFocused(g)&&!t.autofocus?(Kt.focus(g),k.some(!0)):(t.autofocus&&p.setSource(g.element),k.none())})])}},hL=[Le("uid"),Le("data"),Le("components"),Le("dom"),ge("autofocus",!1),ge("ignoreFocus",!1),el.field("widgetBehaviours",[pt,Kt,Lt]),ge("domModification",{}),v2(M2()),Co("builder",gL)],OR=zn("type",{widget:hL,item:mL,separator:ux}),DR=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),RR=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),NR=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),pL=re([d1({factory:{sketch:t=>{const s=ia("menu.spec item",OR,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Gn(s,"uid")?s:{...s,uid:Og("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),e4=re([Le("value"),Le("items"),Le("dom"),Le("components"),ge("eventOrder",{}),pr("menuBehaviours",[so,pt,Pn,Lt]),Ga("movement",{mode:"menu",moveOnTab:!0},zn("mode",{grid:[gy(),Co("config",DR)],matrix:[Co("config",RR),Le("rowSelector"),ge("previousSelector",k.none)],menu:[ge("moveOnTab",!0),Co("config",NR)]})),vk(),ge("fakeFocus",!1),ge("focusManager",l()),Un("onHighlight"),Un("onDehighlight")]),MR=re("alloy.menu-focus"),bL=(t,s)=>{const c=Nr(t.element,'[role="menuitemradio"][aria-checked="true"]');We(c,i=>{co(i,s.element)||t.getSystem().getByDom(i).each(d=>{En.off(d)})})},vL=(t,s,c,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:er(t.menuBehaviours,[so.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),pt.config({store:{mode:"memory",initialValue:t.value}}),Pn.config({find:k.some}),Lt.config(t.movement.config(t,t.movement))]),events:Lo([Pe(kR(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(C=>{so.highlight(d,C),g.stop(),Ft(d,MR(),{menu:d,item:C})})}),Pe(J_(),(d,g)=>{const p=g.event.item;so.highlight(d,p)}),Pe(_R(),(d,g)=>{const{item:p,state:C}=g.event;C&&Qo(p.element,"role")==="menuitemradio"&&bL(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),x1=Fc({name:"Menu",configFields:e4(),partFields:pL(),factory:vL}),BR=t=>li(t,(s,c)=>({k:s,v:c})),PR=(t,s,c,i)=>dt(c,i).bind(d=>dt(t,d).bind(g=>{const p=PR(t,s,c,g);return k.some([g].concat(p))})).getOr([]),yL=(t,s)=>{const c={};$o(t,(p,C)=>{We(p,S=>{c[S]=C})});const i=s,d=BR(s),g=Fo(d,(p,C)=>[C].concat(PR(c,i,d,C)));return Fo(c,p=>dt(g,p).getOr([p]))},$R=()=>{const t=Vt({}),s=Vt({}),c=Vt({}),i=_n(),d=Vt({}),g=()=>{t.set({}),s.set({}),c.set({}),i.clear()},p=C=(Be,Ae)=>{s.set({...s.get(),[Be]:{type:"prepared",menu:Ae}})},S=(Be,Ae,Je,ct)=>{i.set(Be),t.set(Je),s.set(Ae),d.set(ct);const yn=yL(ct,Je);c.set(yn)},T=Be=>Ys(t.get(),(Ae,Je)=>Ae===Be),A=(Be,Ae,Je)=>J(Be).bind(ct=>T(Be).bind(yn=>Ae(yn).map(St=>({triggeredMenu:ct,triggeringItem:St,triggeringPath:Je})))),N=(Be,Ae)=>{const Je=Kn(ce(Be).toArray(),ct=>J(ct).isSome());return dt(c.get(),Be).bind(ct=>{const yn=jn(Je.concat(ct)),St=le(yn,(tn,Yt)=>A(tn,Ae,yn.slice(0,Yt+1)).fold(()=>ic(i.get(),tn)?[]:[k.none()],);return wo(St)})},P=Be=>dt(t.get(),Be).map(Ae=>{const Je=dt(c.get(),Be).getOr([]);return[Ae].concat(Je)}),L=Be=>dt(c.get(),Be).bind(Ae=>Ae.length>1?k.some(Ae.slice(1)):k.none()),U=Be=>dt(c.get(),Be),J=Be=>he(Be).bind(Lb),he=Be=>dt(s.get(),Be),ce=return{setMenuBuilt:C,setContents:S,expand:P,refresh:U,collapse:L,lookupMenu:he,lookupItem:ce,otherMenus:Be=>{const Ae=d.get();return Ct(Uo(Ae),Be)},getPrimary:getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:N}},Lb=t=>t.type==="prepared"?k.some(t.menu):k.none(),FR={init:$R,extractPreparedMenu:Lb},Ib=wt("tiered-menu-item-highlight"),dx=wt("tiered-menu-item-dehighlight");var Ma;((Ma||(Ma={}));const LR=(t,s)=>{const c=_n(),i=(at,_t,nn)=>Fo(nn,(rn,Ut)=>{const gn=()=>x1.sketch({...rn,value:Ut,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Po,Xn)=>{Ft(Po,Ib,{menuComp:Po,itemComp:Xn})},onDehighlight:(Po,Xn)=>{Ft(Po,dx,{menuComp:Po,itemComp:Xn})},focusManager:t.fakeFocus?m():l()});return Ut===_t?{type:"prepared",menu:at.getSystem().build(gn())}:{type:"notbuilt",nbMenu:gn}}),d=FR.init(),g=at=>{const _t=i(at,t.data.primary,t.data.menus),nn=S();return d.setContents(t.data.primary,_t,t.data.expansions,nn),d.getPrimary()},p=at=>pt.getValue(at).value,C=(at,_t,nn)=>vs(_t,rn=>{if(!rn.getSystem().isConnected())return k.none();const Ut=so.getCandidates(rn);return Re(Ut,gn=>p(gn)===nn)}),S=at=>Fo(t.data.menus,(_t,nn)=>le(_t.items,rn=>rn.type==="separator"?[]:[rn.data.value])),T=so.highlight,A=(at,_t)=>{T(at,_t),so.getHighlighted(_t).orThunk(()=>so.getFirst(_t)).each(nn=>{t.fakeFocus?so.highlight(_t,nn):A0(at,nn.element,Os())})},N=(at,_t)=>Uc(ye(_t,nn=>at.lookupMenu(nn).bind(rn=>rn.type==="prepared"?k.some(rn.menu):k.none()))),P=(at,_t,nn)=>{const rn=N(_t,_t.otherMenus(nn));We(rn,Ut=>{yi(Ut.element,[t.markers.backgroundMenu]),t.stayInDom||fn.remove(at,Ut)})},L=at=>c.get().getOrThunk(()=>{const _t={},nn=Nr(at.element,`.${t.markers.item}`),rn=Kn(nn,Ut=>Qo(Ut,"aria-haspopup")==="true");return We(rn,Ut=>{at.getSystem().getByDom(Ut).each(gn=>{const Po=p(gn);_t[Po]=gn})}),c.set(_t),_t}),U=(at,_t)=>{const nn=L(at);$o(nn,(rn,Ut)=>{const gn=Rn(_t,Ut);ht(rn.element,"aria-expanded",gn)})},J=(at,_t,nn)=>k.from(nn[0]).bind(rn=>_t.lookupMenu(rn).bind(Ut=>{if(Ut.type==="notbuilt")return k.none();{const gn=Ut.menu,Po=N(_t,nn.slice(1));return We(Po,,Vn(gn.element)||fn.append(at,Ci(gn)),yi(gn.element,[t.markers.backgroundMenu]),A(at,gn),P(at,_t,nn),k.some(gn)}}));let he;(function(at){at[at.HighlightSubmenu=0]="HighlightSubmenu",at[at.HighlightParent=1]="HighlightParent"})(he||(he={}));const ce=(at,_t,nn)=>{if(nn.type==="notbuilt"){const rn=at.getSystem().build(nn.nbMenu());return d.setMenuBuilt(_t,rn),rn}else return nn.menu},oe=(at,_t,nn=he.HighlightSubmenu)=>{if(_t.hasConfigured(Zt)&&Zt.isDisabled(_t))return k.some(_t);{const rn=p(_t);return d.expand(rn).bind(Ut=>(U(at,Ut),k.from(Ut[0]).bind(gn=>d.lookupMenu(gn).bind(Po=>{const Xn=ce(at,gn,Po);return Vn(Xn.element)||fn.append(at,Ci(Xn)),t.onOpenSubmenu(at,_t,Xn,jn(Ut)),nn===he.HighlightSubmenu?(so.highlightFirst(Xn),J(at,d,Ut)):(so.dehighlightAll(Xn),k.some(_t))}))))}},fe=(at,_t)=>{const nn=p(_t);return d.collapse(nn).bind(rn=>(U(at,rn),J(at,d,rn).map(Ut=>(t.onCollapseMenu(at,_t,Ut),Ut))))},je=(at,_t)=>{const nn=p(_t);return d.refresh(nn).bind(rn=>(U(at,rn),J(at,d,rn)))},Be=(at,_t)=>Xf(_t.element)?k.none():oe(at,_t,he.HighlightSubmenu),Ae=(at,_t)=>Xf(_t.element)?k.none():fe(at,_t),Je=(at,_t)=>fe(at,_t).orThunk(()=>t.onEscape(at,_t).map(()=>at)),ct=at=>(_t,nn)=>Zl(nn.getSource(),`.${t.markers.item}`).bind(rn=>_t.getSystem().getByDom(rn).toOptional().bind(Ut=>at(_t,Ut).map(Oe))),yn=Lo([Pe(MR(),(at,_t)=>{const nn=_t.event.item;d.lookupItem(p(nn)).each(()=>{const rn=_t.event.menu;so.highlight(at,rn);const Ut=p(_t.event.item);d.refresh(Ut).each(gn=>P(at,d,gn))})}),hl((at,_t)=>{const nn=_t.event.target;at.getSystem().getByDom(nn).each(rn=>{p(rn).indexOf("collapse-item")===0&&fe(at,rn),oe(at,rn,he.HighlightSubmenu).fold(j)})}),No((at,_t)=>{g(at).each(nn=>{fn.append(at,Ci(nn)),t.onOpenMenu(at,nn),t.highlightOnOpen===Ma.HighlightMenuAndItem?A(at,nn):t.highlightOnOpen===Ma.HighlightJustMenu&&T(at,nn)})}),Pe(Ib,(at,_t)=>{t.onHighlightItem(at,_t.event.menuComp,_t.event.itemComp)}),Pe(dx,(at,_t)=>{t.onDehighlightItem(at,_t.event.menuComp,_t.event.itemComp)}),...t.navigateOnHover?[Pe(J_(),(at,_t)=>{const nn=_t.event.item;je(at,nn),oe(at,nn,he.HighlightParent),t.onHover(at,nn)})]:[]]),St=tn=at=>{St(at).each(_t=>{fe(at,_t)})},Yt=at=>{d.getPrimary().each(_t=>{A(at,_t)})},fo=at=>k.from(at.components()[0]).filter(_t=>Qo(_t.element,"role")==="menu"),qn={collapseMenu:tn,highlightPrimary:Yt,repositionMenus:at=>{d.getPrimary().bind(nn=>St(at).bind(rn=>{const Ut=p(rn),gn=du(d.getMenus()),Po=Uc(ye(gn,FR.extractPreparedMenu));return d.getTriggeringPath(Ut,Xn=>C(at,Po,Xn))}).map(rn=>({primary:nn,triggeringPath:rn}))).fold(()=>{fo(at).each(nn=>{t.onRepositionMenu(at,nn,[])})},({primary:nn,triggeringPath:rn})=>{t.onRepositionMenu(at,nn,rn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:er(t.tmenuBehaviours,[Lt.config({mode:"special",onRight:ct(Be),onLeft:ct(Ae),onEscape:ct(Je),focusIn:(at,_t)=>{d.getPrimary().each(nn=>{A0(at,nn.element,Os())})}}),so.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Pn.config({find:at=>so.getHighlighted(at)}),fn.config({})]),eventOrder:t.eventOrder,apis:qn,events:yn}},CL=re("collapse-item"),SL=(t,s,c)=>({primary:t,menus:s,expansions:c}),IR=(t,s)=>({primary:t,menus:Ta(t,s),expansions:{}}),wL=t=>({value:wt(CL()),meta:{text:t}}),kh=si({name:"TieredMenu",configFields:[fy("onExecute"),fy("onEscape"),jl("onOpenMenu"),jl("onOpenSubmenu"),Un("onRepositionMenu"),Un("onCollapseMenu"),ge("highlightOnOpen",Ma.HighlightMenuAndItem),Vl("data",[Le("primary"),Le("menus"),Le("expansions")]),ge("fakeFocus",!1),Un("onHighlightItem"),Un("onDehighlightItem"),Un("onHover"),Np(),Le("dom"),ge("navigateOnHover",!0),ge("stayInDom",!1),pr("tmenuBehaviours",[Lt,so,Pn,fn]),ge("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:LR,extraApis:{tieredData:SL,singleData:IR,collapseItem:wL}}),xL=(t,s,c,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>J0(),onRtl:()=>Ey()}}:{},C=T=>T.length===2,S=return kh.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Ln.close(s),t.onEscape.map(T=>T(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(T,A)=>{Pc.positionWithinBounds(g().getOrDie(),A,c,d())},onOpenSubmenu:(T,A,N,P)=>{const L=g().getOrDie();Pc.position(L,N,{anchor:{type:"submenu",item:A,...S(P)}})},onRepositionMenu:(T,A,N)=>{const P=g().getOrDie();Pc.positionWithinBounds(P,A,c,d()),We(N,L=>{const U=S(L.triggeringPath);Pc.position(P,L.triggeredMenu,{anchor:{type:"submenu",item:L.triggeringItem,...U}})})}})},EL=(t,s)=>{const c=(P,L)=>t.getRelated(P).exists(J=>Nd(J,L)),i=(P,L)=>{Ln.setContent(P,L)},d=(P,L,U)=>{const J=k.none;g(P,L,U,J)},g=(P,L,U,J)=>{const he=t.lazySink(P).getOrDie();Ln.openWhileCloaked(P,L,()=>Pc.positionWithinBounds(he,P,U,J())),pt.setValue(P,k.some({mode:"position",config:U,getBounds:J}))},p=(P,L,U)=>{C(P,L,U,k.none)},C=(P,L,U,J)=>{const he=xL(t,P,L,U,J);Ln.open(P,he),pt.setValue(P,k.some({mode:"menu",menu:he}))},S=P=>{Ln.isOpen(P)&&(pt.setValue(P,k.none()),Ln.close(P))},T=P=>Ln.getState(P),A=P=>{Ln.isOpen(P)&&pt.getValue(P).each(L=>{switch(L.mode){case"menu":Ln.getState(P).each(kh.repositionMenus);break;case"position":const U=t.lazySink(P).getOrDie();Pc.positionWithinBounds(U,P,L.config,L.getBounds());break}})},N={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:C,hide:S,getContent:T,reposition:A,isOpen:Ln.isOpen};return{uid:t.uid,dom:t.dom,behaviours:er(t.inlineBehaviours,[Ln.config({isPartOf:(P,L,U)=>Nd(L,U)||c(P,U),getAttachPoint:onOpen:P=>{t.onShow(P)},onClose:P=>{t.onHide(P)}}),pt.config({store:{mode:"memory",initialValue:k.none()}}),_a.config({channels:{...n1({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({})}),...mh({...t.fireRepositionEventInstead.map(.getOr({}),doReposition:A})}})]),eventOrder:t.eventOrder,apis:N}},ws=si({name:"InlineView",configFields:[Le("lazySink"),Un("onShow"),Un("onHide"),Tf("onEscape"),pr("inlineBehaviours",[Ln,pt,_a]),xa("fireDismissalEventInstead",[ge("event",Em())]),xa("fireRepositionEventInstead",[ge("event",SS())]),ge("getRelated",k.none),ge("isExtraPart",Xe),ge("eventOrder",k.none)],factory:EL,apis:{showAt:(t,s,c,i)=>{t.showAt(s,c,i)},showWithinBounds:(t,s,c,i,d)=>{t.showWithinBounds(s,c,i,d)},showMenuAt:showMenuWithinBounds:(t,s,c,i,d)=>{t.showMenuWithinBounds(s,c,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var E1=tinymce.util.Tools.resolve("tinymce.util.Delay");const sc=si({name:"Button",factory:t=>{const s=Gd(t.action),c=t.dom.tag,i=g=>dt(t.dom,"attributes").bind(p=>dt(p,g)),d=()=>{if(c==="button"){const g=i("type").getOr("button"),p=i("role").map(.getOr({});return{type:g,...p}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:el.augment(t.buttonBehaviours,[Kt.config({}),Lt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[ge("uid",void 0),Le("dom"),ge("components",[]),el.field("buttonBehaviours",[Kt,Lt]),mo("action"),mo("role"),ge("eventOrder",{})]}),TL=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return no(s,(c,i)=>i.name==="class"?c:{...c,[i.name]:i.value},{})},kL=t=>Array.prototype.slice.call(t.dom.classList,0),ng=t=>{const s=de.fromHtml(t),c=dc(s),i=TL(s),d=kL(s),g=c.length===0?{}:{innerHtml:ey(s)};return{tag:Ec(s),classes:d,attributes:i,...g}},po=t=>{const s=w_(t)&&$r(t,"uid")?t.uid:Og("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:},{entries:t4,setPrototypeOf:n4,isFrozen:_L,getPrototypeOf:AL,getOwnPropertyDescriptor:OL}=Object;let{freeze:nl,seal:qd,create:DL}=Object,{apply:mx,construct:o4}=typeof Reflect<"u"&&Reflect;mx||(mx=,nl||(nl=function(s){return s}),qd||(qd=function(s){return s}),o4||(o4=;const RL=Xu(Array.prototype.forEach),NL=Xu(Array.prototype.pop),B2=Xu(Array.prototype.push),fx=Xu(String.prototype.toLowerCase),og=Xu(String.prototype.toString),ML=Xu(String.prototype.match),Kd=Xu(String.prototype.replace),T1=Xu(String.prototype.indexOf),VR=Xu(String.prototype.trim),Ql=Xu(RegExp.prototype.test),Yu=BL(TypeError);nction Wn(t,s,c){var i;c=(i=c)!==null&&i!==void 0?i:fx,n4&&n4(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const p=c(g);p!==g&&(_L(s)||(s[d]=p),g=p)}t[g]=!0}return t}unction P2(t,s){for(;t!==null;){const i=OL(t,s);if(i){if(i.get)return Xu(i.get);if(typeof i.value=="function")return Xu(i.value)}t=AL(t)}eturn c}const s4=nl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),r4=nl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$2=nl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),PL=nl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),c4=nl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$L=nl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F2=nl(["#text"]),gx=nl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hx=nl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),a4=nl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L2=nl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),FL=qd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),LL=qd(/<%[\w\W]*|[\w\W]*%>/gm),zR=qd(/\${[\w\W]*}/gm),IL=qd(/^data-[\-\w.\u00B7-\uFFFF]/),i4=qd(/^aria-[\-\w]+$/),l4=qd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),HL=qd(/^(?:\w+script|data):/i),VL=qd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),UR=qd(/^html$/i);var px=Object.freeze({__proto__:null,MUSTACHE_EXPR:FL,ERB_EXPR:LL,TMPLIT_EXPR:zR,DATA_ATTR:IL,ARIA_ATTR:i4,IS_ALLOWED_URI:l4,IS_SCRIPT_OR_DATA:HL,ATTR_WHITESPACE:VL,DOCTYPE_NAME:UR});const zL=()=>typeof window>"u"?null:window,I2=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(i=c.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(p){return p},createScriptURL)}catch(p){return null}};function H2(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zL();const s=$n=>H2($n);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const c=t.document,i=c.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:p,Node:C,Element:S,NodeFilter:T,NamedNodeMap:A=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:N,DOMParser:P,trustedTypes:L}=t,U=S.prototype,J=P2(U,"cloneNode"),he=P2(U,"nextSibling"),ce=P2(U,"childNodes"),oe=P2(U,"parentNode");if(typeof p=="function"){const $n=d.createElement("template");$n.content&&$n.content.ownerDocument&&(d=$n.content.ownerDocument)}let fe,je="";const{implementation:Be,createNodeIterator:Ae,createDocumentFragment:Je,getElementsByTagName:ct}=d,{importNode:yn}=c;let St={};s.isSupported=typeof t4=="function"&&typeof oe=="function"&&Be&&Be.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:tn,ERB_EXPR:Yt,TMPLIT_EXPR:fo,DATA_ATTR:zt,ARIA_ATTR:qn,IS_SCRIPT_OR_DATA:at,ATTR_WHITESPACE:_t}=px;let{IS_ALLOWED_URI:nn}=px,rn=null;const Ut=Wn({},[...s4,...r4,...$2,...c4,...F2]);let gn=null;const Po=Wn({},[...gx,...hx,...a4,...L2]);let Xn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Sc=null,$i=null,uu=!0,md=!0,Xh=!1,t0=!0,cm=!1,gg=!1,iS=!1,AD=!1,Nv=!1,UT=!1,d6=!1,oG=!0,sG=!1;const BG="user-content-";let jZ=!0,OD=!1,WT={},ZT=null;const rG=Wn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let cG=null;const aG=Wn({},["audio","video","img","source","image","track"]);let GZ=null;const iG=Wn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),m6="http://www.w3.org/1998/Math/MathML",f6="http://www.w3.org/2000/svg",n0="http://www.w3.org/1999/xhtml";let jT=n0,qZ=!1,KZ=null;const PG=Wn({},[m6,f6,n0],og);let lS;const $G=["application/xhtml+xml","text/html"],FG="text/html";let Fi,GT=null;const LG=d.createElement("form"),lG=YZ=function(Te){if(!(GT&&GT===Te)){if((!Te||typeof Te!="object")&&(Te={}),Te=k1(Te),lS=$G.indexOf(Te.PARSER_MEDIA_TYPE)===-1?lS=FG:lS=Te.PARSER_MEDIA_TYPE,Fi=lS==="application/xhtml+xml"?og:fx,rn="ALLOWED_TAGS"in Te?Wn({},Te.ALLOWED_TAGS,Fi):Ut,gn="ALLOWED_ATTR"in Te?Wn({},Te.ALLOWED_ATTR,Fi):Po,KZ="ALLOWED_NAMESPACES"in Te?Wn({},Te.ALLOWED_NAMESPACES,og):PG,GZ="ADD_URI_SAFE_ATTR"in Te?Wn(k1(iG),Te.ADD_URI_SAFE_ATTR,Fi):iG,cG="ADD_DATA_URI_TAGS"in Te?Wn(k1(aG),Te.ADD_DATA_URI_TAGS,Fi):aG,ZT="FORBID_CONTENTS"in Te?Wn({},Te.FORBID_CONTENTS,Fi):rG,Sc="FORBID_TAGS"in Te?Wn({},Te.FORBID_TAGS,Fi):{},$i="FORBID_ATTR"in Te?Wn({},Te.FORBID_ATTR,Fi):{},WT="USE_PROFILES"in Te?Te.USE_PROFILES:!1,uu=Te.ALLOW_ARIA_ATTR!==!1,md=Te.ALLOW_DATA_ATTR!==!1,Xh=Te.ALLOW_UNKNOWN_PROTOCOLS||!1,t0=Te.ALLOW_SELF_CLOSE_IN_ATTR!==!1,cm=Te.SAFE_FOR_TEMPLATES||!1,gg=Te.WHOLE_DOCUMENT||!1,Nv=Te.RETURN_DOM||!1,UT=Te.RETURN_DOM_FRAGMENT||!1,d6=Te.RETURN_TRUSTED_TYPE||!1,AD=Te.FORCE_BODY||!1,oG=Te.SANITIZE_DOM!==!1,sG=Te.SANITIZE_NAMED_PROPS||!1,jZ=Te.KEEP_CONTENT!==!1,OD=Te.IN_PLACE||!1,nn=Te.ALLOWED_URI_REGEXP||l4,jT=Te.NAMESPACE||n0,Xn=Te.CUSTOM_ELEMENT_HANDLING||{},Te.CUSTOM_ELEMENT_HANDLING&&lG(Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Xn.tagNameCheck=Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&lG(Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Xn.attributeNameCheck=Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&typeof Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Xn.allowCustomizedBuiltInElements=Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),cm&&(md=!1),UT&&(Nv=!0),WT&&(rn=Wn({},[...F2]),gn=[],WT.html===!0&&(Wn(rn,s4),Wn(gn,gx)),WT.svg===!0&&(Wn(rn,r4),Wn(gn,hx),Wn(gn,L2)),WT.svgFilters===!0&&(Wn(rn,$2),Wn(gn,hx),Wn(gn,L2)),WT.mathMl===!0&&(Wn(rn,c4),Wn(gn,a4),Wn(gn,L2))),Te.ADD_TAGS&&(rn===Ut&&(rn=k1(rn)),Wn(rn,Te.ADD_TAGS,Fi)),Te.ADD_ATTR&&(gn===Po&&(gn=k1(gn)),Wn(gn,Te.ADD_ATTR,Fi)),Te.ADD_URI_SAFE_ATTR&&Wn(GZ,Te.ADD_URI_SAFE_ATTR,Fi),Te.FORBID_CONTENTS&&(ZT===rG&&(ZT=k1(ZT)),Wn(ZT,Te.FORBID_CONTENTS,Fi)),jZ&&(rn["#text"]=!0),gg&&Wn(rn,["html","head","body"]),rn.table&&(Wn(rn,["tbody"]),delete Sc.tbody),Te.TRUSTED_TYPES_POLICY){if(typeof Te.TRUSTED_TYPES_POLICY.createHTML!="function")throw Yu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Te.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Yu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');fe=Te.TRUSTED_TYPES_POLICY,je=fe.createHTML("")}else fe===void 0&&(fe=I2(L,i)),fe!==null&&typeof je=="string"&&(je=fe.createHTML(""));nl&&nl(Te),GT=Te}},uG=Wn({},["mi","mo","mn","ms","mtext"]),dG=Wn({},["foreignobject","desc","title","annotation-xml"]),IG=Wn({},["title","style","font","a","script"]),g6=Wn({},r4);Wn(g6,$2),Wn(g6,PL);const XZ=Wn({},c4);Wn(XZ,$L);const HG=function(Te){let Mt=oe(Te);(!Mt||!Mt.tagName)&&(Mt={namespaceURI:jT,tagName:"template"});const cn=fx(Te.tagName),vr=fx(Mt.tagName);return KZ[Te.namespaceURI]?Te.namespaceURI===f6?Mt.namespaceURI===n0?cn==="svg":Mt.namespaceURI===m6?cn==="svg"&&(vr==="annotation-xml"||uG[vr]):Boolean(g6[cn]):Te.namespaceURI===m6?Mt.namespaceURI===n0?cn==="math":Mt.namespaceURI===f6?cn==="math"&&dG[vr]:Boolean(XZ[cn]):Te.namespaceURI===n0?Mt.namespaceURI===f6&&!dG[vr]||Mt.namespaceURI===m6&&!uG[vr]?!1:!XZ[cn]&&(IG[cn]||!g6[cn]):!!(lS==="application/xhtml+xml"&&KZ[Te.namespaceURI]):!1},uS=DD=mG=function(Te){let Mt,cn;if(AD)Te="<remove></remove>"+Te;else{const gf=ML(Te,/^[\r\n\t ]+/);cn=gf&&gf[0]}lS==="application/xhtml+xml"&&jT===n0&&(Te='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Te+"</body></html>");const vr=fe?fe.createHTML(Te):Te;if(jT===n0)try{Mt=new P().parseFromString(vr,lS)}catch(gf){}if(!Mt||!Mt.documentElement){Mt=Be.createDocument(jT,"template",null);try{Mt.documentElement.innerHTML=qZ?je:vr}catch(gf){}}const Li=Mt.body||Mt.documentElement;return Te&&cn&&Li.insertBefore(d.createTextNode(cn),Li.childNodes[0]||null),jT===n0?ct.call(Mt,gg?"html":"body")[0]:gg?Mt.documentElement:Li},fG=VG=function(Te){return Te instanceof N&&(typeof Te.nodeName!="string"||typeof Te.textContent!="string"||typeof Te.removeChild!="function"||!(Te.attributes instanceof A)||typeof Te.removeAttribute!="function"||typeof Te.setAttribute!="function"||typeof Te.namespaceURI!="string"||typeof Te.insertBefore!="function"||typeof Te.hasChildNodes!="function")},h6=function(Te){return typeof C=="object"?Te instanceof C:Te&&typeof Te=="object"&&typeof Te.nodeType=="number"&&typeof Te.nodeName=="string"},o0=function(Te,Mt,cn){!St[Te]||RL(St[Te],},gG=function(Te){let Mt;if(o0("beforeSanitizeElements",Te,null),VG(Te))return uS(Te),!0;const cn=Fi(Te.nodeName);if(o0("uponSanitizeElement",Te,{tagName:cn,allowedTags:rn}),Te.hasChildNodes()&&!h6(Te.firstElementChild)&&(!h6(Te.content)||!h6(Te.content.firstElementChild))&&Ql(/<[/\w]/g,Te.innerHTML)&&Ql(/<[/\w]/g,Te.textContent))return uS(Te),!0;if(!rn[cn]||Sc[cn]){if(!Sc[cn]&&pG(cn)&&(Xn.tagNameCheck instanceof RegExp&&Ql(Xn.tagNameCheck,cn)||Xn.tagNameCheck instanceof Function&&Xn.tagNameCheck(cn)))return!1;if(jZ&&!ZT[cn]){const vr=oe(Te)||Te.parentNode,Li=ce(Te)||Te.childNodes;if(Li&&vr){const gf=Li.length;for(let Vc=gf-1;Vc>=0;--Vc)vr.insertBefore(J(Li[Vc],!0),he(Te))}}return uS(Te),!0}return Te instanceof S&&!HG(Te)||(cn==="noscript"||cn==="noembed"||cn==="noframes")&&Ql(/<\/no(script|embed|frames)/i,Te.innerHTML)?(uS(Te),!0):(cm&&Te.nodeType===3&&(Mt=Te.textContent,Mt=Kd(Mt,tn," "),Mt=Kd(Mt,Yt," "),Mt=Kd(Mt,fo," "),Te.textContent!==Mt&&(B2(s.removed,{element:Te.cloneNode()}),Te.textContent=Mt)),o0("afterSanitizeElements",Te,null),!1)},hG=pG=bG=function(Te){let Mt,cn,vr,Li;o0("beforeSanitizeAttributes",Te,null);const{attributes:gf}=Te;if(!gf)return;const Vc={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:gn};for(Li=gf.length;Li--;){Mt=gf[Li];const{name:hf,namespaceURI:JZ}=Mt;cn=hf==="value"?Mt.value:VR(Mt.value);const UG=cn;if(vr=Fi(hf),Vc.attrName=vr,Vc.attrValue=cn,Vc.keepAttr=!0,Vc.forceKeepAttr=void 0,o0("uponSanitizeAttribute",Te,Vc),cn=Vc.attrValue,Vc.forceKeepAttr)continue;if(!Vc.keepAttr){DD(hf,Te);continue}if(!t0&&Ql(/\/>/i,cn)){DD(hf,Te);continue}cm&&(cn=Kd(cn,tn," "),cn=Kd(cn,Yt," "),cn=Kd(cn,fo," "));const vG=Fi(Te.nodeName);if(!hG(vG,vr,cn)){DD(hf,Te);continue}if(sG&&(vr==="id"||vr==="name")&&(DD(hf,Te),cn=BG+cn),fe&&typeof L=="object"&&typeof L.getAttributeType=="function"&&!JZ)switch(L.getAttributeType(vG,vr)){case"TrustedHTML":{cn=fe.createHTML(cn);break}case"TrustedScriptURL":{cn=fe.createScriptURL(cn);break}}if(cn!==UG)try{JZ?Te.setAttributeNS(JZ,hf,cn):Te.setAttribute(hf,cn)}catch(WG){DD(hf,Te)}}o0("afterSanitizeAttributes",Te,null)},zG=function $n(Te){let Mt;const cn=fG(Te);for(o0("beforeSanitizeShadowDOM",Te,null);Mt=cn.nextNode();)o0("uponSanitizeShadowNode",Mt,null),!gG(Mt)&&(Mt.content instanceof g&&$n(Mt.content),bG(Mt));o0("afterSanitizeShadowDOM",Te,null)};return s.sanitize=function($n){let Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Mt,cn,vr,Li;if(qZ=!$n,qZ&&($n="<!-->"),typeof $n!="string"&&!h6($n))if(typeof $n.toString=="function"){if($n=$n.toString(),typeof $n!="string")throw Yu("dirty is not a string, aborting")}else throw Yu("toString is not a function");if(!s.isSupported)return $n;if(iS||YZ(Te),s.removed=[],typeof $n=="string"&&(OD=!1),OD){if($n.nodeName){const hf=Fi($n.nodeName);if(!rn[hf]||Sc[hf])throw Yu("root node is forbidden and cannot be sanitized in-place")}}else if($n instanceof C)Mt=mG("<!---->"),cn=Mt.ownerDocument.importNode($n,!0),cn.nodeType===1&&cn.nodeName==="BODY"||cn.nodeName==="HTML"?Mt=cn:Mt.appendChild(cn);else{if(!Nv&&!cm&&!gg&&$n.indexOf("<")===-1)return fe&&d6?fe.createHTML($n):$n;if(Mt=mG($n),!Mt)return Nv?null:d6?je:""}Mt&&AD&&uS(Mt.firstChild);const gf=fG(OD?$n:Mt);for(;vr=gf.nextNode();)gG(vr)||(vr.content instanceof g&&zG(vr.content),bG(vr));if(OD)return $n;if(Nv){if(UT)for(Li=Je.call(Mt.ownerDocument);Mt.firstChild;)Li.appendChild(Mt.firstChild);else Li=Mt;return(gn.shadowroot||gn.shadowrootmode)&&(Li=yn.call(c,Li,!0)),Li}let Vc=gg?Mt.outerHTML:Mt.innerHTML;return gg&&rn["!doctype"]&&Mt.ownerDocument&&Mt.ownerDocument.doctype&&Mt.ownerDocument.doctype.name&&Ql(UR,Mt.ownerDocument.doctype.name)&&(Vc="<!DOCTYPE "+Mt.ownerDocument.doctype.name+`>
`+Vc),cm&&(Vc=Kd(Vc,tn," "),Vc=Kd(Vc,Yt," "),Vc=Kd(Vc,fo," ")),fe&&d6?fe.createHTML(Vc):Vc},s.setConfig=s.clearConfig=s.isValidAttribute=s.addHook=s.removeHook=s.removeHooks=s.removeAllHooks=s}var WR=H2();const u4=var El=tinymce.util.Tools.resolve("tinymce.util.I18n");const UL={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},ZR="temporary-placeholder",d4=t=>()=>dt(t,ZR).getOr("!not found!"),V2=(t,s)=>{const c=t.toLowerCase();if(El.isRtl()){const i=Fr(c,"-rtl");return Gn(s,i)?i:c}else return c},m4=(t,s)=>dt(s,V2(t,s)),f4=(t,s)=>{const c=s();return m4(t,c).getOrThunk(d4(c))},g4=(t,s,c)=>{const i=s();return m4(t,i).or(c).getOrThunk(d4(i))},WL=t=>El.isRtl()?Gn(UL,t):!1,bx=()=>vn("add-focusable",[No(t=>{Z0(t.element,"svg").each(})]),jR=(t,s,c,i)=>{var d,g;const p=WL(s)?["tox-icon--flip"]:[],C=dt(c,V2(s,c)).or(i).getOrThunk(d4(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:C},behaviours:et([...(g=t.behaviours)!==null&&g!==void 0?g:[],bx()])}},Ju=(t,s,c,i=k.none())=>jR(s,t,c(),i),ZL=(t,s,c)=>{const i=c(),d=Re(t,;return jR(s,d.getOr(ZR),i,k.none())},GR={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},h4=si({name:"Notification",factory:t=>{const s=po({dom:ng(`<p>${u4(t.translationProvider(t.text))}</p>`),behaviours:et([fn.config({})])}),c=L=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${L}%`}}}),i=L=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${L}%`}}),d=po({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},i(0)],behaviours:et([fn.config({})])}),C={updateProgress:(L,U)=>{L.getSystem().isConnected()&&d.getOpt(L).each(J=>{fn.set(J,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(U)]},i(U)])})},updateText:(L,U)=>{if(L.getSystem().isConnected()){const J=s.get(L);fn.set(J,[Fs(U)])}}},S=De([t.icon.toArray(),t.level.toArray(),t.level.bind(.toArray()]),T=po(sc.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Ju("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:L=>{t.onAction(L)}})),A=ZL(S,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),N={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:et([fn.config({})])},P=[A,N];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(L=>["tox-notification","tox-notification--in",`tox-notification--${L}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:et([Kt.config({}),vn("notification-events",[Pe(Ya(),L=>{T.getOpt(L).each(Kt.focus)})])]),components:P.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[T.asSpec()]:[]),apis:C}},configFields:[mo("level"),Le("progress"),mo("icon"),Le("onAction"),Le("text"),Le("iconProvider"),Le("translationProvider"),_r("closeButton",!0)],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var p4=(t,s,c)=>{const i=s.backstage.shared,d=()=>{const S=ys(de.fromDom(t.getContentAreaContainer())),T=Xr(),A=Si(T.x,S.x,S.right),N=Si(T.y,S.y,S.bottom),P=Math.max(S.right,T.right),L=Math.max(S.bottom,T.bottom);return k.some(ds(A,N,P-A,L-N))};return{open:(S,T)=>{const A=N=Mc(h4.sketch({text:S.text,level:Rn(["success","error","warning","warn","info"],S.type)?S.type:void 0,progress:S.progressBar===!0,icon:S.icon,closeButton:S.closeButton,onAction:A,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),P=Mc(ws.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));c.add(P),Rs(S.timeout)&&S.timeout>0&&E1.setEditorTimeout(t,S.timeout);const U={close:A,reposition:()=>{const J=Ci(N),he={maxHeightFunction:Jg()},ce=t.notificationManager.getNotifications();if(ce[0]===U){const oe={...i.anchors.banner(),overrides:he};ws.showWithinBounds(P,J,{anchor:oe},d)}else Ne(ce,U).each(oe=>{const fe=ce[oe-1].getEl(),je={type:"node",root:ls(),node:k.some(de.fromDom(fe)),overrides:he,layouts:{onRtl:()=>[Dr],onLtr:()=>[Dr]}};ws.showWithinBounds(P,J,{anchor:je},d)})},text:J=>{h4.updateText(N,J)},settings:S,getEl:()=>N.element.dom,progressBar:{value:J=>{h4.updateProgress(N,J)}}};return U},close:S=>{S.close()},getArgs:S=>S.settings}},_1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),qR=tinymce.util.Tools.resolve("tinymce.EditorManager"),Hb=tinymce.util.Tools.resolve("tinymce.Env"),ol;((ol||(ol={}));var z2;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(z2||(z2={}));const Io=t=>s=>s.options.get(t),U2=KR=t=>{const s=Hb.deviceType.isPhone(),c=Hb.deviceType.isTablet()||s,i=t.options.register,d=p=>nt(p)||p===!1,g=p=>nt(p)||Rs(p);i("skin",{processor:p=>nt(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:_1.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>nt(p)||Ds(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>Ds(p)||nt(p)||Hn(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),it(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:z2.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:default:!Hb.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},YR=Io("readonly"),vx=Io("height"),W2=Io("width"),b4=U2(Io("min_width")),Vb=U2(Io("min_height")),yx=U2(Io("max_width")),v4=U2(Io("max_height")),XR=U2(Io("style_formats")),JR=Io("style_formats_merge"),QR=Io("style_formats_autohide"),eN=Io("content_langs"),y4=Io("removed_menuitems"),zb=Io("toolbar_mode"),tN=Io("toolbar_groups"),Z2=Io("toolbar_location"),A1=Io("fixed_toolbar_container"),jL=Io("fixed_toolbar_container_target"),nN=Io("toolbar_persist"),Cx=Io("toolbar_sticky_offset"),C4=Io("menubar"),Sx=Io("toolbar"),oN=Io("file_picker_callback"),S4=Io("file_picker_validator_handler"),sN=Io("font_size_input_default_unit"),w4=Io("file_picker_types"),x4=Io("typeahead_urls"),wx=Io("anchor_top"),rN=Io("anchor_bottom"),E4=Io("draggable_modal"),cN=Io("statusbar"),Ub=Io("elementpath"),T4=Io("branding"),aN=Io("resize"),xx=Io("paste_as_text"),Ex=Io("sidebar_show"),iN=Io("promotion"),Tx=Io("help_accessibility"),lN=Io("default_font_stack"),k4=t=>t.options.get("skin")===!1,Wb=t=>t.options.get("menubar")!==!1,kx=t=>{const s=t.options.get("skin_url");if(k4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return qR.baseURL+"/skins/ui/"+c}},_4=t=>k.from(t.options.get("skin_url")),uN=_x=t=>{const s=Sx(t),c=nt(s),i=Hn(s)&&s.length>0;return!j2(t)&&(i||c||s===!0)},A4=t=>{const s=it(9,i=>t.options.get("toolbar"+(i+1))),c=Kn(s,nt);return Gt(c.length>0,c)},j2=t=>A4(t).fold(()=>{const s=Sx(t);return Ht(s,nt)&&s.length>0},Oe),O4=t=>Z2(t)===z2.bottom,dN=t=>{var s;if(!t.inline)return k.none();const c=(s=A1(t))!==null&&s!==void 0?s:"";if(c.length>0)return Zs(ls(),c);const i=jL(t);return to(i)?k.some(de.fromDom(i)):k.none()},Zb=t=>t.inline&&dN(t).isSome(),D4=t=>dN(t).getOrThunk(()=>qe(xe(de.fromDom(t.getElement())))),R4=t=>t.inline&&!Wb(t)&&!_x(t)&&!j2(t),G2=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Zb(t)&&!R4(t),qm=t=>!Zb(t)&&t.options.get("ui_mode")==="split",mN=t=>{const s=t.options.get("menu");return Fo(s,};var GL=Object.freeze({__proto__:null,get ToolbarMode(){return ol},get ToolbarLocation(){return z2},register:KR,getSkinUrl:kx,getSkinUrlOption:_4,isReadOnly:YR,isSkinDisabled:k4,getHeightOption:vx,getWidthOption:W2,getMinWidthOption:b4,getMinHeightOption:Vb,getMaxWidthOption:yx,getMaxHeightOption:v4,getUserStyleFormats:XR,shouldMergeStyleFormats:JR,shouldAutoHideStyleFormats:QR,getLineHeightFormats:uN,getContentLanguages:eN,getRemovedMenuItems:y4,isMenubarEnabled:Wb,isMultipleToolbars:j2,isToolbarEnabled:_x,isToolbarPersist:nN,getMultipleToolbarsOption:A4,getUiContainer:D4,useFixedContainer:Zb,isSplitUiMode:qm,getToolbarMode:zb,isDraggableModal:E4,isDistractionFree:R4,isStickyToolbar:G2,getStickyToolbarOffset:Cx,getToolbarLocation:Z2,isToolbarLocationBottom:O4,getToolbarGroups:tN,getMenus:mN,getMenubar:C4,getToolbar:Sx,getFilePickerCallback:oN,getFilePickerTypes:w4,useTypeaheadUrls:x4,getAnchorTop:wx,getAnchorBottom:rN,getFilePickerValidatorHandler:S4,getFontSizeInputDefaultUnit:sN,useStatusBar:cN,useElementPath:Ub,promotionEnabled:iN,useBranding:T4,getResize:aN,getPasteAsText:xx,getSidebarShow:Ex,useHelpAccessibility:Tx,getDefaultFontStack:lN});const fN="[data-mce-autocompleter]",N4=t=>Zl(t,fN),qL=t=>Zs(t,fN),KL={setup:(t,s)=>{const c=(d,g)=>{Ft(d,gl(),{raw:g})},i=s.on("keydown",d=>{const g=d.which;!t.isActive()||(t.isMenuOpen()?g===13?(i().each(kd),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(so.highlightFirst)},p=>{c(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{c(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&N4(de.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var M4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(M4||(M4={}));var Yd=M4;const B4="tox-menu-nav__js",jb="tox-collection__item",P4="tox-swatch",YL={normal:B4,color:P4},gN="tox-collection__item--enabled",XL="tox-collection__group-heading",hN="tox-collection__item-icon",$4="tox-collection__item-label",JL="tox-collection__item-accessory",pN="tox-collection__item-caret",QL="tox-collection__item-checkmark",q2="tox-collection__item--active",bN="tox-collection__item-container",eI="tox-collection__item-container--column",vN="tox-collection__item-container--row",Ax="tox-collection__item-container--align-right",tI="tox-collection__item-container--align-left",F4="tox-collection__item-container--valign-top",nI="tox-collection__item-container--valign-middle",oI="tox-collection__item-container--valign-bottom",yN=t=>dt(YL,t).getOr(B4),CN=t=>t==="color"?"tox-swatches":"tox-menu",L4=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:CN(t),tieredMenu:"tox-tiered-menu"}),sg=t=>{const s=L4(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:yN(t)}},I4=(t,s,c)=>{const i=L4(c);return{tag:"div",classes:De([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},SN=[x1.parts.items({})],Gb=(t,s,c)=>{const i=L4(c);return{dom:{tag:"div",classes:De([[i.tieredMenu]])},markers:sg(c)}},K2=re([mo("data"),ge("inputAttributes",{}),ge("inputStyles",{}),ge("tag","input"),ge("inputClasses",[]),Un("onSetValue"),ge("styles",{}),ge("eventOrder",{}),pr("inputBehaviours",[pt,Kt]),ge("selectOnFocus",!0)]),H4=t=>et([Kt.config({onFocus:t.selectOnFocus?s=>{const c=s.element,i=Iu(c);c.dom.setSelectionRange(0,i.length)}:j})]),Km=t=>({...H4(t),...er(t.inputBehaviours,[pt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Iu(s.element),setValue:(s,c)=>{Iu(s.element)!==c&&Ig(s.element,c)}},onSetValue:t.onSetValue})])}),Ox=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),sI=(t,s)=>({uid:t.uid,dom:Ox(t),components:[],behaviours:Km(t),eventOrder:t.eventOrder}),O1=si({name:"Input",configFields:K2(),factory:sI}),wN=wt("refetch-trigger-event"),xN=wt("redirect-menu-item-interaction"),qb="tox-menu__searcher",Dx=t=>Zs(t.element,`.${qb}`).bind(s=>t.getSystem().getByDom(s).toOptional()),V4=Dx,z4=(t,s)=>{pt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},EN=t=>{const s=pt.getValue(t),c=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:i}},U4=(t,s)=>{Er(s.element,"id").each(c=>ht(t.element,"aria-activedescendant",c))},W4=t=>{const s=(d,g)=>(g.cut(),k.none()),c=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return Ft(d,xN,p),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[jb]},components:[O1.sketch({inputClasses:[qb,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:et([vn(i,[Pe(Of(),d=>{Fn(d,wN)}),Pe(gl(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Lt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[i,Lt.name()]}})]}},Rx="tox-collection--results__js",Z4=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:wt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},Nx=(t,s)=>c=>{const i=It(c,s);return ye(i,d=>({dom:t,components:d}))},rI=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[x1.parts.items({preprocess:t!=="auto"?Nx({tag:"div",classes:["tox-swatches__row"]},t):bt})]}]}),cI=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[x1.parts.items({preprocess:Nx({tag:"div",classes:["tox-collection__group"]},t)})]}),TN=(t,s)=>{const c=[];let i=[];return We(t,(d,g)=>{s(d,g)?(i.length>0&&c.push(i),i=[],(Gn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&c.push(i),ye(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},j4=(t,s,c)=>x1.parts.items({preprocess:i=>{const d=ye(i,c);return t!=="auto"&&t>1?Nx({tag:"div",classes:["tox-collection__group"]},t)(d):TN(d,(g,p)=>s[p].type==="separator")}}),kN=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[j4(t,s,bt)]}),aI=(t,s,c=!0)=>{const i=wt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Rx].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[j4(t,s,Z4)]}},_N=(t,s,c)=>{const i=wt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[W4({i18n:El.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Rx],attributes:{id:i}},components:[j4(t,s,Z4)]}]}},AN=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[x1.parts.items({preprocess:c=>TN(c,(i,d)=>t[d].type==="separator")})]}),Mx=t=>cs(t,s=>"icon"in s&&s.icon!==void 0),Ym=t=>k.none(),Y2=(t,s,c,i,d)=>{const g=AN(c);return{value:t,dom:g.dom,components:g.components,items:c}},Bx=(t,s,c,i,d)=>{const g=()=>d.menuType!=="searchable"?kN(i,c):d.searchMode.searchMode==="search-with-field"?_N(i,c,d.searchMode):aI(i,c);if(d.menuType==="color"){const p=rI(i);return{value:t,dom:p.dom,components:p.components,items:c}}else if(d.menuType==="normal"&&i==="auto"){const p=kN(i,c);return{value:t,dom:p.dom,components:p.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:c}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=cI(i);return{value:t,dom:p.dom,components:p.components,items:c}}else return{value:t,dom:I4(s,i,d.menuType),components:SN,items:c}},lr=oo("type"),G4=oo("name"),Px=oo("label"),rg=oo("text"),ON=oo("title"),q4=oo("icon"),Kb=oo("value"),DN=Hl("fetch"),RN=Hl("getSubmenuItems"),Yb=Hl("onAction"),iI=Hl("onItemAction"),_h=Hr("onSetup",()=>j),K4=gc("name"),Xm=gc("text"),Tl=gc("icon"),X2=gc("tooltip"),$x=gc("label"),lI=gc("shortcut"),Y4=Tf("select"),Fx=_r("active",!1),NN=_r("borderless",!1),eu=_r("enabled",!0),Jm=_r("primary",!1),MN=t=>ge("columns",t),J2=ge("meta",{}),Xb=Hr("onAction",j),D1=t=>Ru("type",t),Lx=t=>fc("name","name",Xi(()=>wt(`${t}-name`)),Qr),BN=t=>fc("value","value",Xi(,fr()),X4=Pt([lr,Xm]),J4=t=>Cs("separatormenuitem",X4,t),PN=Pt([D1("autocompleteitem"),Fx,eu,J2,Kb,Xm,Tl]),uI=t=>Cs("Autocompleter.Separator",X4,t),$N=t=>Cs("Autocompleter.Item",PN,t),Jb=[eu,X2,Tl,Xm,_h],FN=Pt([lr,Yb].concat(Jb)),Q4=t=>Cs("toolbarbutton",FN,t),e3=[Fx].concat(Jb),LN=Pt(e3.concat([lr,Yb])),IN=t=>Cs("ToggleButton",LN,t),HN=[Hr("predicate",Xe),qa("scope","node",["node","editor"]),qa("position","selection",["node","selection","line"])],dI=Jb.concat([D1("contextformbutton"),Jm,Yb,zs("original",bt)]),mI=e3.concat([D1("contextformbutton"),Jm,Yb,zs("original",bt)]),VN=Jb.concat([D1("contextformbutton")]),Q2=e3.concat([D1("contextformtogglebutton")]),zN=zn("type",{contextformbutton:dI,contextformtogglebutton:mI}),fI=Pt([D1("contextform"),Hr("initValue",re("")),$x,pi("commands",zN),Ou("launch",zn("type",{contextformbutton:VN,contextformtogglebutton:Q2}))].concat(HN)),gI=t=>Cs("ContextForm",fI,t),hI=Pt([D1("contexttoolbar"),oo("items")].concat(HN)),pI=t=>Cs("ContextToolbar",hI,t),bI=[lr,oo("src"),gc("alt"),Ea("classes",[],Qr)],Ix=Pt(bI),vI=[lr,rg,K4,Ea("classes",["tox-collection__item-label"],Qr)],UN=Pt(vI),WN=Jr(()=>Ge("type",{cardimage:Ix,cardtext:UN,cardcontainer:ZN})),ZN=Pt([lr,Ru("direction","horizontal"),Ru("align","left"),Ru("valign","middle"),pi("items",WN)]),R1=[eu,Xm,lI,BN("menuitem"),J2],yI=Pt([lr,$x,pi("items",WN),_h,Xb].concat(R1)),jN=t=>Cs("cardmenuitem",yI,t),GN=Pt([lr,Fx,Tl].concat(R1)),qN=t=>Cs("choicemenuitem",GN,t),t3=[lr,oo("fancytype"),Xb],CI=[ge("initData",{})].concat(t3),SI=[Tf("select"),Nu("initData",{},[_r("allowCustomColors",!0),Ru("storageKey","default"),kf("colors",fr())])].concat(t3),wI=zn("fancytype",{inserttable:CI,colorswatch:SI}),xI=t=>Cs("fancymenuitem",wI,t),KN=Pt([lr,_h,Xb,Tl].concat(R1)),YN=t=>Cs("menuitem",KN,t),EI=Pt([lr,RN,_h,Tl].concat(R1)),TI=t=>Cs("nestedmenuitem",EI,t),kI=Pt([lr,Tl,Fx,_h,Yb].concat(R1)),_I=t=>Cs("togglemenuitem",kI,t),n3=(t,s,c)=>{const i=Nr(t.element,"."+c);if(i.length>0){const d=st(i,g=>{const p=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(p-C)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},o3=(t,s)=>et([vn(t,s)]),eC={namedEvents:o3,unnamedEvents:t=>o3(wt("unnamed-events"),t)},Hx=wt("tooltip.exclusive"),Qb=wt("tooltip.show"),tC=wt("tooltip.hide"),XN=(t,s,c)=>{t.getSystem().broadcastOn([Hx],{})};var OI=Object.freeze({__proto__:null,hideAllExclusive:XN,setComponents:(t,s,c,i)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&fn.set(d,i)})}}),JN=Object.freeze({__proto__:null,events:(t,s)=>{const c=d=>{s.getTooltip().each(g=>{ju(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){XN(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Lo(t.mode==="normal"?[Pe(xd(),C=>{Fn(d,Qb)}),Pe(Eg(),C=>{Fn(d,tC)})]:[]),behaviours:et([fn.config({})])});s.setTooltip(p),Vm(g,p),t.onShow(d,p),Pc.position(g,p,{anchor:t.anchor(d)})}};return Lo(De([[Pe(Qb,d=>{s.resetTimer(()=>{i(d)},t.delay)}),Pe(tC,d=>{s.resetTimer(()=>{c(d)},t.delay)}),Pe(Nf(),(d,g)=>{const p=g;p.universal||Rn(p.channels,Hx)&&c(d)}),Fu(d=>{c(d)})],t.mode==="normal"?[Pe(Ya(),d=>{Fn(d,Qb)}),Pe(Sm(),d=>{Fn(d,tC)}),Pe(xd(),d=>{Fn(d,Qb)}),Pe(Eg(),d=>{Fn(d,tC)})]:[Pe(xp(),(d,g)=>{Fn(d,Qb)}),Pe(Ep(),d=>{Fn(d,tC)})]]))}}),QN=[Le("lazySink"),Le("tooltipDom"),ge("exclusive",!0),ge("tooltipComponents",[]),ge("delay",300),qa("mode","normal",["normal","follow-highlight"]),ge("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:re([Dr,jc,Or,da,vc,Bc]),onRtl:re([Dr,jc,Or,da,vc,Bc])}})),Un("onHide"),Un("onShow")],RI=Object.freeze({__proto__:null,init:()=>{const t=_n(),s=_n(),c=()=>{t.on(clearTimeout)},i=(g,p)=>{c(),t.set(setTimeout(g,p))},d=re("not-implemented");return Ja({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:c,resetTimer:i,readState:d})}});const eM=Rr({fields:QN,name:"tooltipping",active:JN,state:RI,apis:OI}),NI=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),tM="silver.readonly",s3=Pt([qT("readonly")]),Vx=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&We(d,g=>{g.broadcastOn([Yl()],{target:i})}),We(d,g=>{g.broadcastOn([tM],{readonly:s})})},nM=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&Vx(s,!0)}),t.on("SwitchMode",()=>Vx(s,t.mode.isReadOnly())),YR(t)&&t.mode.set("readonly")},Br=()=>_a.config({channels:{[tM]:{schema:s3,onReceive:}}),br={item:t=>Zt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:splitButton:t=>Zt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Zt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},kl=(t,s)=>{const c=t.getApi(s);return i=>{i(c)}},Ah=(t,s)=>No(c=>{kl(t,c)(d=>{const g=t.onSetup(d);Tt(g)&&s.set(g)})}),Qm=(t,s)=>Fu(c=>kl(t,c)(s.get())),r3=(t,s)=>hl((c,i)=>{kl(t,c)(t.onAction),!t.triggersSubmenu&&s===Yd.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&Fn(c,Cp()),i.stop())}),BI={[Xa()]:["disabling","alloy.base.behaviour","toggling","item-events"]},ev=Uc,ef=(t,s,c,i)=>{const d=Vt(j);return{type:"item",dom:s.dom,components:ev(s.optComponents),data:t.data,eventOrder:BI,hasSubmenu:t.triggersSubmenu,itemBehaviours:et([vn("item-events",[r3(t,c),Ah(t,d),Qm(t,d)]),br.item(()=>!t.enabled||i.isDisabled()),Br(),fn.config({})].concat(t.itemBehaviours))}},cg=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),zx=t=>{const s=Hb.os.isMacOS()||Hb.os.isiOS(),d=s?{alt:"\u2325",ctrl:"\u2303",shift:"\u21E7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=ye(g,C=>{const S=C.toLowerCase().trim();return Gn(d,S)?d[S]:C});return s?p.join(""):p.join("+")},c3=(t,s,c=[hN])=>Ju(t,{tag:"div",classes:c},s),Qu=t=>({dom:{tag:"div",classes:[$4]},components:[Fs(El.translate(t))]}),oM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),PI=(t,s)=>({dom:{tag:"div",classes:[$4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Fs(El.translate(s))]}]}),tu=t=>({dom:{tag:"div",classes:[JL]},components:[Fs(zx(t))]}),tv=t=>c3("checkmark",t,[QL]),ed=t=>c3("chevron-right",t,[pN]),$I=t=>c3("chevron-down",t,[pN]),ko=(t,s)=>{const c=t.direction==="vertical"?eI:vN,i=t.align==="left"?tI:Ax;return{dom:{tag:"div",classes:[bN,c,i,(()=>{switch(t.valign){case"top":return F4;case"middle":return nI;case"bottom":return oI}})()]},components:s}},nv=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),Ux=(t,s,c)=>{const i="custom",d="remove",g=t.ariaLabel,p=t.value,C=t.iconContent.map(;return{dom:(()=>{const T=P4,A=C.getOr(""),P={tag:"div",attributes:g.map(.getOr({}),classes:[T]};return p===i?{...P,tag:"button",classes:[...P.classes,"tox-swatches__picker-btn"],innerHtml:A}:p===d?{...P,classes:[...P.classes,"tox-swatch--remove"],innerHtml:A}:to(p)?{...P,attributes:{...P.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:A}:P})(),optComponents:[]}},a3=t=>{const s=t.map(c=>({attributes:{title:El.translate(c),id:wt("menu-item")}})).getOr({});return{tag:"div",classes:[B4,jb],...s}},i3=(t,s,c,i)=>{const d={tag:"div",classes:[hN]},g=p=C=c?t.iconContent.map(g).orThunk(p):k.none(),S=t.checkMark,T=k.from(t.meta).fold(()=>Qu,P=>Gn(P,"style")?Xt(PI,P.style):Qu),A=t.htmlContent.fold(()=>t.textContent.map(T),P=>k.some(oM(P,[$4])));return{dom:a3(t.ariaLabel),optComponents:[C,A,t.shortcutContent.map(tu),S,t.caret]}},N1=(t,s,c,i=k.none())=>t.presets==="color"?Ux(t,s,i):i3(t,s,c,i),sM=(t,s)=>dt(t,"tooltipWorker").map(c=>[eM.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:Jg}}),mode:"follow-highlight",onShow:(i,d)=>{c(g=>{eM.setComponents(i,[BS({element:de.fromDom(g)})])})}})]).getOr([]),l3=t=>_1.DOM.encode(t),rM=(t,s)=>{const c=El.translate(t),i=l3(c);if(s.length>0){const d=new RegExp(NI(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},cM=(t,s,c,i,d,g,p,C=!0)=>{const S=N1({presets:i,textContent:k.none(),htmlContent:c?t.text.map(T=>rM(T,s)):k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},p.providers,C,t.icon);return ef({data:cg(t),enabled:t.enabled,getApi:re({}),onAction:T=>d(t.value,t.meta),onSetup:re(j),triggersSubmenu:!1,itemBehaviours:sM(t.meta,p)},S,g,p.providers)},u3=(t,s)=>ye(t,c=>{switch(c.type){case"cardcontainer":return ko(c,u3(c.items,s));case"cardimage":return nv(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(?k.from(s.cardText.matchText).getOr(""):"";return oM(rM(c.text,d),c.classes)}}),d3=(t,s,c,i)=>{const d=p=>({isEnabled:()=>!Zt.isDisabled(p),setEnabled:C=>{Zt.set(p,!C),We(Nr(p.element,"*"),S=>{p.getSystem().getByDom(S).each(T=>{T.hasConfigured(Zt)&&Zt.set(T,!C)})})}}),g={dom:a3(t.label),optComponents:[k.some({dom:{tag:"div",classes:[bN,vN]},components:u3(t.items,i)})]};return ef({data:cg({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,c.providers)},aM=(t,s,c,i,d,g,p,C=!0)=>{const S=A=>({setActive:N=>{En.set(A,N)},isActive:()=>En.isOn(A),isEnabled:()=>!Zt.isDisabled(A),setEnabled:N=>Zt.set(A,!N)}),T=N1({presets:c,textContent:s?t.text:k.none(),htmlContent:k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(tv(p.icons)):k.none(),caret:k.none(),value:t.value},p,C);return yo(ef({data:cg(t),enabled:t.enabled,getApi:S,onAction:A=>i(t.value),onSetup:A=>(A.setActive(d),j),triggersSubmenu:!1,itemBehaviours:[]},T,g,p),{toggling:{toggleClass:gN,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},nC=Vd(N2(),M2()),iM=t=>({value:mM(t)}),lM=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,uM=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,dM=mM=t=>fu(t,"#").toUpperCase(),fM=t=>dM(t)?k.some({value:mM(t)}):k.none(),FI=t=>({value:t.value.replace(lM,}),LI=t=>{const s=FI(t),c=uM.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},Wx=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},ov=t=>{const s=Wx(t.red)+Wx(t.green)+Wx(t.blue);return iM(s)},gM=Math.min,hM=Math.max,oC=Math.round,pM=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,bM=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Oh=(t,s,c,i)=>({red:t,green:s,blue:c,alpha:i}),m3=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},vM=t=>{let s,c,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=hM(0,gM(g,1)),p=hM(0,gM(p,1)),g===0)return s=c=i=oC(255*p),Oh(s,c,i,1);const C=d/60,S=p*g,T=S*(1-Math.abs(C%2-1)),A=p-S;switch(Math.floor(C)){case 0:s=S,c=T,i=0;break;case 1:s=T,c=S,i=0;break;case 2:s=0,c=S,i=T;break;case 3:s=0,c=T,i=S;break;case 4:s=T,c=0,i=S;break;case 5:s=S,c=0,i=T;break;default:s=c=i=0}return s=oC(255*(s+A)),c=oC(255*(c+A)),i=oC(255*(i+A)),Oh(s,c,i,1)},sC=t=>{const s=LI(t),c=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Oh(c,i,d,1)},yM=f3=t=>{if(t==="transparent")return k.some(Oh(0,0,0,0));const s=pM.exec(t);if(s!==null)return k.some(yM(s[1],s[2],s[3],"1"));const c=bM.exec(t);return c!==null?k.some(yM(c[1],c[2],c[3],c[4])):k.none()},g3=nu=Oh(255,0,0,1),II=t=>{t.dispatch("SkinLoaded")},h3=(t,s)=>{t.dispatch("SkinLoadError",s)},CM=t=>{t.dispatch("ResizeEditor")},Zx=(t,s)=>{t.dispatch("ResizeContent",s)},HI=(t,s)=>{t.dispatch("ScrollContent",s)},p3=(t,s)=>{t.dispatch("TextColorChange",s)},SM=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},wM=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),VI=zI=(t,s)=>{t.dispatch("StylesTextUpdate",s)},UI=(t,s)=>{t.dispatch("AlignTextUpdate",s)},WI=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},ZI=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},xM=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},EM=rC=(t,s)=>()=>{t(),s()},Ba=t=>td(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),jI=(t,s)=>c=>{const i=Pd(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);i.set(g)};return t.initialized?d():t.once("init",d),,jx=(t,s)=>c=>{const i=Ba(t)(c),d=jI(t,s)(c);return()=>{i(),d()}},td=(t,s,c)=>i=>{const d=()=>c(i),g=()=>{c(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},TM=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Ai=var Dh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const b3={},v3=(t,s=10)=>{const c=Dh.getItem(t),i=nt(c)?JSON.parse(c):[],g=(T=>s-T.length<0?T.slice(0,s):T)(i),p=T=>{Ne(g,T).each(C),g.unshift(T),g.length>s&&g.pop(),Dh.setItem(t,JSON.stringify(g))},C=T=>{g.splice(T,1)};return{add:p,state:()=>g.slice(0)}},Gx=t=>dt(b3,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=Dh.getItem(s);if(Es(c)){const d=Dh.getItem("tinymce-custom-colors");Dh.setItem(s,to(d)?d:"[]")}const i=v3(s,10);return b3[t]=i,i}),y3=t=>ye(Gx(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),C3=cC=(t,s,c)=>({hue:t,saturation:s,value:c}),qx=t=>{let s=0,c=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,C=Math.min(d,Math.min(g,p)),S=Math.max(d,Math.max(g,p));if(C===S)return i=C,cC(0,0,i*100);const T=d===C?g-p:p===C?d-g:p-d;return s=d===C?3:p===C?1:5,s=60*(s-T/(S-C)),c=(S-C)/S,i=S,cC(Math.round(s),Math.round(c*100),Math.round(i*100))},GI=t=>qx(sC(t)),kM=t=>ov(vM(t)),qI=t=>fM(t).orThunk(.getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const i=c.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],C=i[3];return ov(Oh(d,g,p,C))}),Kx="forecolor",Yx="hilitecolor",_M=5,KI=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:"#"+qI(t[c]).value,icon:"checkmark",type:"choiceitem"});return s},tf=t=>s=>s.options.get(t),S3="#000000",YI=t=>{const s=t.options.register,c=d=>Ht(d,nt)?{value:KI(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=d=>Rs(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:i,default:w3(t)}),s("color_cols_foreground",{processor:i,default:AM(t,Kx)}),s("color_cols_background",{processor:i,default:AM(t,Yx)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:S3}),s("color_default_background",{processor:"string",default:S3})},Xx=(t,s)=>s===Kx&&t.options.isSet("color_map_foreground")?tf("color_map_foreground")(t):s===Yx&&t.options.isSet("color_map_background")?tf("color_map_background")(t):tf("color_map")(t),w3=(t,s="default")=>Math.max(_M,Math.ceil(Math.sqrt(Xx(t,s).length))),AM=(t,s)=>{const c=tf("color_cols")(t),i=w3(t,s);return c===w3(t)?i:c},OM=(t,s="default")=>Math.round((()=>s===Kx?tf("color_cols_foreground")(t):s===Yx?tf("color_cols_background")(t):tf("color_cols")(t))()),DM=tf("custom_colors"),XI=tf("color_default_foreground"),JI=tf("color_default_background"),RM="rgba(0, 0, 0, 0)",QI=t=>f3(t).exists(s=>s.alpha!==0),e8=t=>_f(t,s=>{if(ro(s)){const c=ts(s,"background-color");return Gt(QI(c),c)}else return k.none()}).getOr(RM),NM=(t,s)=>{const c=de.fromDom(t.selection.getStart()),i=s==="hilitecolor"?e8(c):ts(c,"color");return f3(i).map(d=>"#"+ov(d).value)},t8=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},n8=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},Jx=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{t8(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{n8(t,s)})},x3=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},E3=(t,s,c,i)=>{c==="custom"?$M(t)(g=>{g.each(p=>{C3(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},NM(t,s).getOr(S3)):c==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(c),t.execCommand("mceApplyTextcolor",s,c))},T3=(t,s,c)=>t.concat(y3(s).concat(x3(c))),MM=(t,s,c)=>k3=(t,s,c)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,c)},BM=(t,s)=>{t.setTooltip(s)},PM=(t,s)=>c=>{const i=NM(t,s);return ic(i,c.toUpperCase())},aC=(t,s,c)=>{if(Jo(c))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=T3(Xx(t,s),s,!1),g=Re(d,p=>p.value===c).getOr({text:""}).text;return t.translate([i,t.translate(g)])},_3=(t,s,c,i)=>{t.ui.registry.addSplitButton(s,{tooltip:aC(t,c,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:PM(t,c),columns:OM(t,c),fetch:MM(Xx(t,c),c,DM(t)),onAction:d=>{E3(t,c,i.get(),j)},onItemAction:(d,g)=>{E3(t,c,g,p=>{i.set(p),p3(t,{name:s,color:p})})},onSetup:d=>{k3(d,s,i.get());const g=p=>{p.name===s&&(k3(d,p.name,p.color),BM(d,aC(t,c,p.color)))};return t.on("TextColorChange",g),rC(Ba(t)(d),()=>{t.off("TextColorChange",g)})}})},A3=(t,s,c,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(BM(g,aC(t,c,d.get())),k3(g,s,d.get()),Ba(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:PM(t,c),initData:{storageKey:c},onAction:g=>{E3(t,c,g.value,p=>{d.set(p),p3(t,{name:s,color:p})})}}]})},$M=t=>(s,c)=>{let i=!1;const d=C=>{const T=C.getData().colorpicker;i?(s(k.from(T)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},p={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:j,onCancel:()=>{s(k.none())}})},O3=t=>{Jx(t);const s=XI(t),c=JI(t),i=Vt(s),d=Vt(c);_3(t,"forecolor","forecolor",i),_3(t,"backcolor","hilitecolor",d),A3(t,"forecolor","forecolor","Text color",i),A3(t,"backcolor","hilitecolor","Background color",d)},D3=(t,s,c,i,d,g,p,C)=>{const S=Mx(s),A=o8(s,c,i,d!=="color"?"normal":"color",g,p,C);return Bx(t,S,A,i,{menuType:d})},o8=(t,s,c,i,d,g,p)=>Uc(ye(t,C=>C.type==="choiceitem"?qN(C).fold(Ym,S=>k.some(aM(S,c===1,i,s,g(S.value),d,p,Mx(t)))):k.none())),Qx=(t,s)=>{const c=sg(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Zs(d.element,"[aria-checked=true]"):k.none()}},s8=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${P4}`:`.${jb}`}},r8=(t,s)=>{const c=c8(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...D3(wt("menu-value"),c,C=>{t.onAction({value:C})},i,d,Yd.CLOSE_ON_EXECUTE,t.select.getOr(Xe),s.shared.providers),markers:sg(d),movement:Qx(i,d)};return{type:"widget",data:{value:wt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[nC.widget(x1.sketch(p))]}},c8=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>T3(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),i=>i.concat(x3(c)))},FM=wt("cell-over"),LM=wt("cell-execute"),a8=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),i8=(t,s,c)=>{const i=p=>Ft(p,FM,{row:t,col:s}),d=g=(p,C)=>{C.stop(),d(p)};return Mc({dom:{tag:"div",attributes:{role:"button",["aria-label"]:c}},behaviours:et([vn("insert-table-picker-cell",[Pe(xd(),Kt.focus),Pe(Xa(),d),Pe(Ed(),g),Pe(zl(),g)]),En.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Kt.config({onFocus:i})])})},eE=(t,s,c)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<c;p++){const C=t(d+1,p+1);g.push(i8(d,p,C))}i.push(g)}return i},R3=(t,s,c,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)En.set(t[g][p],g<=s&&p<=c)},N3=t=>le(t,s=>ye(s,Ci)),M3=l8={inserttable:(t,s)=>{const d=a8(s),g=eE(d,10,10),p=M3(0,0),C=po({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[p],behaviours:et([fn.config({})])});return{type:"widget",data:{value:wt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[nC.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:N3(g).concat(C.asSpec()),behaviours:et([vn("insert-table-picker",[No(S=>{fn.set(C.get(S),[p])}),Jv(FM,(S,T,A)=>{const{row:N,col:P}=A.event;R3(g,N,P,10,10),fn.set(C.get(S),[M3(N+1,P+1)])}),Jv(LM,(S,T,A)=>{const{row:N,col:P}=A.event;t.onAction({numRows:N+1,numColumns:P+1}),Fn(S,Cp())})]),Lt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:r8},B3=(t,s)=>dt(l8,t.fancytype).map(c=>c(t,s)),P3=(t,s,c,i=!0,d=!1)=>{const g=d?$I(c.icons):ed(c.icons),p=S=>({isEnabled:()=>!Zt.isDisabled(S),setEnabled:T=>Zt.set(S,!T),setIconFill:(T,A)=>{Zs(S.element,`svg path[class="${T}"], rect[class="${T}"]`).each(N=>{ht(N,"fill",A)})},setTooltip:T=>{const A=c.translate(T);bu(S.element,{"aria-label":A,title:A})}}),C=N1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return ef({data:cg(t),getApi:p,enabled:t.enabled,onAction:j,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,c)},tE=(t,s,c,i=!0)=>{const d=p=>({isEnabled:()=>!Zt.isDisabled(p),setEnabled:C=>Zt.set(p,!C)}),g=N1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return ef({data:cg(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},IM=t=>({type:"separator",dom:{tag:"div",classes:[jb,XL]},components:t.text.map(Fs).toArray()}),u8=(t,s,c,i=!0)=>{const d=p=>({setActive:C=>{En.set(p,C)},isActive:()=>En.isOn(p),isEnabled:()=>!Zt.isDisabled(p),setEnabled:C=>Zt.set(p,!C)}),g=N1({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,checkMark:k.some(tv(c.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,i);return yo(ef({data:cg(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:gN,toggleOnExecute:!1,selected:t.active}})},d8=cM,HM=IM,m8=tE,f8=P3,g8=u8,h8=B3,p8=d3;var b8=Object.freeze({__proto__:null,getCoupled:(t,s,c,i)=>c.getOrCreate(t,s,i),getExistingCoupled:(t,s,c,i)=>c.getExisting(t,s,i)}),v8=[ja("others",Sd(bn.value,fr()))],VM=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(Uo(g.others).length===0)throw new Error("Cannot find any known coupled components");return dt(t,p)},c=(g,p,C)=>s(p,C).getOrThunk(()=>{const T=dt(p.others,C).getOrDie("No information found for coupled component: "+C)(g),A=g.getSystem().build(T);return t[C]=A,A}),i=(g,p,C)=>s(p,C).orThunk(()=>(dt(p.others,C).getOrDie("No information found for coupled component: "+C),k.none())),d=re({});return Ja({readState:d,getExisting:i,getOrCreate:c})}});const Gs=Rr({fields:v8,name:"coupling",apis:b8,state:VM}),$3=t=>{let s=k.none(),c=[];const i=T=>$3(A=>{d(}),d=T=>{p()?S(T):c.push(T)},g=T=>{p()||(s=k.some(T),C(c),c=[])},p=()=>s.isSome(),C=T=>{We(T,S)},S=T=>{s.each(};return t(g),{get:d,map:i,isReady:p}},y8={nu:$3,pure:t=>$3(s=>{s(t)})},C8=Rh=t=>{const s=return{map:S=>Rh(,bind:S=>Rh(()=>t().then(T=>S(T).toPromise())),anonBind:S=>Rh(()=>t().then(()=>S.toPromise())),toLazy:()=>y8.nu(s),toCached:()=>{let S=null;return Rh(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},Xc={nu:t=>Rh(,pure:,zM=re("sink"),UM=re(Da({name:zM(),overrides:re({dom:{tag:"div"},behaviours:et([Pc.config({useFixed:Oe})]),events:Lo([_d(gl()),_d(gr()),_d(Ed())])})})),WM=(t,s)=>{const c=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(},S8=(t,s,c)=>{const i=t.fetch;return i(c).map(s)},w8=(t,s,c,i,d,g,p)=>{const C=S8(t,s,i),S=ZM(i,t);return C.map(T=>T.bind(A=>k.from(kh.sketch({...g.menu(),uid:Og(""),data:A,highlightOnOpen:p,onOpenMenu:(N,P)=>{const L=S().getOrDie();Pc.position(L,P,{anchor:c}),Ln.decloak(d)},onOpenSubmenu:(N,P,L)=>{const U=S().getOrDie();Pc.position(U,L,{anchor:{type:"submenu",item:P}}),Ln.decloak(d)},onRepositionMenu:(N,P,L)=>{const U=S().getOrDie();Pc.position(U,P,{anchor:c}),We(L,J=>{Pc.position(U,J.triggeredMenu,{anchor:{type:"submenu",item:J.triggeringItem}})})},onEscape:()=>(Kt.focus(i),Ln.close(d),k.some(!0))}))))},nE=(t,s,c,i,d,g,p)=>{const C=WM(t,c);return w8(t,s,C,c,i,d,p).map(T=>(T.fold(A=>{Ln.cloak(i),Ln.open(i,A),g(i)}),i))},x8=(t,s,c,i,d,g,p)=>(Ln.close(i),Xc.pure(i)),F3=(t,s,c,i,d,g)=>{const p=Gs.getCoupled(c,"sandbox");return(Ln.isOpen(p)?x8:nE)(t,s,c,p,i,d,g)},E8=(t,s,c)=>{const i=Pn.getCurrent(s).getOr(s),d=Go(t.element);c?an(i.element,"min-width",d+"px"):Bn(i.element,d)},ZM=(t,s)=>t.getSystem().getByUid(s.uid+"-"+zM()).map(c=>()=>bn.value(c)).getOrThunk(()=>s.lazySink.fold(()=>c=>()=>c(t))),jM=t=>{Ln.getState(t).each(s=>{kh.repositionMenus(s)})},L3=(t,s,c)=>{const i=If(),d=(C,S)=>{const T=WM(t,s);i.link(s.element),t.matchWidth&&E8(T.hotspot,S,t.useMinWidth),t.onOpen(T,C,S),c!==void 0&&c.onOpen!==void 0&&c.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),c!==void 0&&c.onClose!==void 0&&c.onClose(C,S)},p=ZM(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:el.augment(t.sandboxBehaviours,[pt.config({store:{mode:"memory",initialValue:s}}),Ln.config({onOpen:d,onClose:g,isPartOf:(C,S,T)=>Nd(S,T)||Nd(s,T),getAttachPoint:),Pn.config({find:),_a.config({channels:{...n1({isExtraPart:Xe}),...mh({doReposition:jM})}})])}},GM=t=>{const s=Gs.getCoupled(t,"sandbox");jM(s)},I3=()=>[ge("sandboxClasses",[]),el.field("sandboxBehaviours",[Pn,_a,Ln,pt])],T8=re([Le("dom"),Le("fetch"),Un("onOpen"),oi("onExecute"),ge("getHotspot",k.some),ge("getAnchorOverrides",re({})),Bm(),pr("dropdownBehaviours",[En,Gs,Lt,Kt]),Le("toggleClass"),ge("eventOrder",{}),mo("lazySink"),ge("matchWidth",!1),ge("useMinWidth",!1),mo("role")].concat(I3())),k8=re([Sl({schema:[Np(),ge("fakeFocus",!1)],name:"menu",defaults:),UM()]),_8=(t,s,c,i)=>{const d=A=>dt(t.dom,"attributes").bind(N=>dt(N,A)),g=p=(A,N,P)=>F3(t,bt,A,i,N,P),C=A=>{p(A,g,Ma.HighlightMenuAndItem).get(j)},S={expand:A=>{En.isOn(A)||p(A,j,Ma.HighlightNone).get(j)},open:A=>{En.isOn(A)||p(A,j,Ma.HighlightMenuAndItem).get(j)},refetch:A=>Gs.getExistingCoupled(A,"sandbox").fold(()=>p(A,j,Ma.HighlightMenuAndItem).map(j),P=>nE(t,bt,A,P,i,j,Ma.HighlightMenuAndItem).map(j)),isOpen:En.isOn,close:A=>{En.isOn(A)&&p(A,j,Ma.HighlightMenuAndItem).get(j)},repositionMenus:A=>{En.isOn(A)&&GM(A)}},T=(A,N)=>(kd(A),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:er(t.dropdownBehaviours,[En.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Gs.config({others:{sandbox:A=>L3(t,A,{onOpen:()=>En.on(A),onClose:()=>En.off(A)})}}),Lt.config({mode:"special",onSpace:T,onEnter:T,onDown:(A,N)=>{if(ou.isOpen(A)){const P=Gs.getCoupled(A,"sandbox");g(P)}else ou.open(A);return k.some(!0)},onEscape:(A,N)=>ou.isOpen(A)?(ou.close(A),k.some(!0)):k.none()}),Kt.config({})]),events:Gd(k.some(C)),eventOrder:{...t.eventOrder,[Xa()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),A=>({role:A})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},ou=Fc({name:"Dropdown",configFields:T8(),partFields:k8(),factory:_8,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),A8=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},O8=t=>{const s=pt.getValue(t),c=Dx(t).map(EN);ou.refetch(s).get(()=>{const i=Gs.getCoupled(s,"sandbox");c.each(})},D8=(t,s)=>{R8(t).each(c=>{QT(t,c.element,s.event.eventType,s.event.interactionEvent)})},R8=t=>Ln.getState(t).bind(so.getHighlighted).bind(so.getHighlighted),N8=t=>hr(t.element,Rx)?k.some(t.element):Zs(t.element,"."+Rx),H3=(t,s,c)=>{V4(t).each(i=>{U4(i,c),N8(s).each(g=>{Er(g,"id").each(})}),ht(c.element,"aria-selected","true")},M8=(t,s,c)=>{ht(c.element,"aria-selected","false")},B8=t=>{V4(t).each(s=>Kt.focus(s))},P8=t=>Gs.getExistingCoupled(t,"sandbox").bind(Dx).map(EN).map(c=>c.fetchPattern).getOr("");var iC;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(iC||(iC={}));const $8=(t,s,c,i,d)=>{const g=c.shared.providers,p=C=>d?{...C,shortcut:k.none(),icon:C.text.isSome()?k.none():C.icon}:C;switch(t.type){case"menuitem":return YN(t).fold(Ym,C=>k.some(m8(p(C),s,g,i)));case"nestedmenuitem":return TI(t).fold(Ym,C=>k.some(f8(p(C),s,g,i,d)));case"togglemenuitem":return _I(t).fold(Ym,C=>k.some(g8(p(C),s,g,i)));case"separator":return J4(t).fold(Ym,C=>k.some(HM(C)));case"fancymenuitem":return xI(t).fold(Ym,C=>h8(C,c));default:return k.none()}},F8=(t,s,c,i,d,g,p)=>{const C=i===1,S=!C||Mx(t);return Uc(ye(t,T=>{switch(T.type){case"separator":return uI(T).fold(Ym,A=>k.some(HM(A)));case"cardmenuitem":return jN(T).fold(Ym,A=>k.some(p8({...A,onAction:N=>{A.onAction(N),c(A.value,A.meta)}},d,g,{itemBehaviours:sM(A.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return $N(T).fold(Ym,A=>k.some(d8(A,s,C,"normal",c,d,g,S)))}}))},qM=(t,s,c,i,d,g)=>{const p=Mx(s),C=Uc(ye(s,A=>{const N=L=>d?!Gn(L,"text"):p,P=L=>$8(L,c,i,N(L),d);return A.type==="nestedmenuitem"&&A.getSubmenuItems().length<=0?P({...A,enabled:!1}):P(A)})),S=A8(g);return(d?Y2:Bx)(t,p,C,1,S)},oE=t=>kh.singleData(t.value,t),L8=(t,s,c,i)=>{const d=Qx(s,i),g=sg(i);return{data:oE({...t,movement:d,menuBehaviours:eC.unnamedEvents(s!=="auto"?[]:[No((p,C)=>{n3(p,4,g.item).each(({numColumns:S,numRows:T})=>{Lt.setGridSize(p,T,S)})})])}),menu:{markers:sg(i),fakeFocus:c===iC.ContentFocus}}},I8=(t,s)=>N4(de.fromDom(s.startContainer)).map(c=>{const i=t.createRng();return i.selectNode(c.dom),i}),H8={register:(t,s)=>{const c=wt("autocompleter"),i=Vt(!1),d=Vt(!1),g=Mc(ws.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:et([vn("dismissAutocompleter",[Pe(Em(),()=>A()),Pe(xp(),(he,ce)=>{Er(ce.event.target,"id").each(oe=>ht(de.fromDom(t.getBody()),"aria-activedescendant",oe))})])]),lazySink:s.getSink})),p=()=>ws.isOpen(g),C=d.get,S=()=>{if(p()){ws.hide(g),t.dom.remove(c,!1);const he=de.fromDom(t.getBody());Er(he,"aria-owns").filter(ce=>ce===c).each(}},T=()=>ws.getContent(g).bind(,A=()=>t.execCommand("mceAutocompleterClose"),N=he=>{const ce=vs(he,oe=>k.from(oe.columns)).getOr(1);return le(he,oe=>{const fe=oe.items;return F8(fe,oe.matchText,(je,Be)=>{const Ae=t.selection.getRng();I8(t.dom,Ae).each(Je=>{const ct={hide:()=>A(),reload:yn=>{S(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:yn})}};i.set(!0),oe.onAction(ct,Je,je,Be),i.set(!1)})},ce,Yd.BUBBLE_TO_SANDBOX,s,oe.highlightOn)})},P=(he,ce)=>{qL(de.fromDom(t.getBody())).each(oe=>{const fe=vs(he,je=>k.from(je.columns)).getOr(1);ws.showMenuAt(g,{anchor:{type:"node",root:de.fromDom(t.getBody()),node:k.from(oe)}},L8(Bx("autocompleter-value",!0,ce,fe,{menuType:"normal"}),fe,iC.ContentFocus,"normal"))}),T().each(so.highlightFirst)},L=he=>{const ce=N(he);ce.length>0?(P(he,ce),ht(de.fromDom(t.getBody()),"aria-owns",c),t.inline||U()):S()},U=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const he=t.getDoc().documentElement,ce=t.selection.getNode(),oe=ok(g.element);_c(oe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ce.offsetTop}px`,left:`${ce.offsetLeft}px`}),t.dom.add(he,oe.dom),Zs(oe,'[role="menu"]').each(fe=>{V(fe,"position"),V(fe,"max-height")})};t.on("AutocompleterStart",({lookupData:he})=>{d.set(!0),i.set(!1),L(he)}),t.on("AutocompleterUpdate",,t.on("AutocompleterEnd",()=>{S(),d.set(!1),i.set(!1)});const J={cancelIfNecessary:A,isMenuOpen:p,isActive:C,isProcessingAction:i.get,getMenu:T};KL.setup(J,t)}},KM=["visible","hidden","clip"],YM=t=>ui(t).length>0&&!Rn(KM,t),V3=t=>{if(Ui(t)){const s=ts(t,"overflow-x"),c=ts(t,"overflow-y");return YM(s)||YM(c)}else return!1},V8=t=>{const s=pw(t,V3),c=s.length===0?vo(t).map(Do).map(i=>pw(i,V3)).getOr([]):s;return ks(c).map(},Nh=(t,s)=>qm(t)?V8(s):k.none(),sv=t=>{const s=[...ye(t.others,ys),Xr()];return $v(ys(t.element),s)},lC=(t,s,c)=>Zl(t,s,c).isSome(),XM=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(s)}}},JM=5,z8=400,QM=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},U8=(t,s)=>{const c=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return c>JM||i>JM},W8=t=>{const s=_n(),c=Vt(!1),i=XM(T=>{t.triggerEvent(Gv(),T),c.set(!0)},z8),d=T=>(QM(T).each(,k.none()),g=T=>(i.cancel(),QM(T).each(A=>{s.on(}),k.none()),p=T=>{i.cancel();const A=N=>co(N.target,T.target);return s.get().filter(A).map(N=>c.get()?(T.prevent(),!1):t.triggerEvent(zl(),T))},C=hc([{key:Bu(),value:d},{key:wg(),value:g},{key:Af(),value:p}]);return{fireIfReady:(T,A)=>dt(C,A).bind(N=>N(T))}},Z8=t=>t.raw.which===$_[0]&&!Rn(["input","textarea"],Ec(t.target))&&!lC(t.target,'[contenteditable="true"]'),j8=(t,s)=>{const c={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=W8(c),g=ye(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),L=>qc(t,L,U=>{d.fireIfReady(U,L).each(he=>{he&&U.kill()}),c.triggerEvent(L,U)&&U.kill()})),p=_n(),C=qc(t,"paste",L=>{d.fireIfReady(L,"paste").each(,c.triggerEvent("paste",L)&&L.kill(),p.set(setTimeout(()=>{c.triggerEvent(Rf(),L)},0))}),S=qc(t,"keydown",L=>{c.triggerEvent("keydown",L)?L.kill():c.stopBackspace&&Z8(L)&&L.prevent()}),T=qc(t,"focusin",L=>{c.triggerEvent("focusin",L)&&L.kill()}),A=_n(),N=qc(t,"focusout",L=>{c.triggerEvent("focusout",L)&&L.kill(),A.set(setTimeout(0))});return{unbind:()=>{We(g,L=>{L.unbind()}),S.unbind(),T.unbind(),N.unbind(),C.unbind(),p.on(clearTimeout),A.on(clearTimeout)}}},eB=(t,s)=>{const c=dt(t,"target").getOr(s);return Vt(c)},G8=(t,s)=>{const c=Vt(!1),i=Vt(!1);return{stop:()=>{c.set(!0)},cut:()=>{i.set(!0)},isStopped:c.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},tB=t=>{const s=Vt(!1);return{stop:cut:j,isStopped:s.get,isCut:Xe,event:t,setSource:te("Cannot set source of a broadcasted event"),getSource:te("Cannot get source of a broadcasted event")}},uC=Ka.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),nB=(t,s,c,i,d,g)=>{const p=t(s,i),C=G8(c,d);return p.fold(()=>(g.logEventNoHandlers(s,i),uC.complete()),S=>{const T=S.descHandler;return Mg(T)(C),C.isStopped()?(g.logEventStopped(s,S.element,T.purpose),uC.stopped()):C.isCut()?(g.logEventCut(s,S.element,T.purpose),uC.complete()):xr(S.element).fold(()=>(g.logNoParent(s,S.element,T.purpose),uC.complete()),N=>(g.logEventResponse(s,S.element,T.purpose),uC.resume(N)))})},oB=(t,s,c,i,d,g)=>nB(t,s,c,i,d,g).fold(Oe,Xe),q8=(t,s,c,i,d)=>{const g=eB(c,i);return nB(t,s,c,i,g,d)},K8=(t,s,c)=>{const i=tB(s);return We(t,d=>{const g=d.descHandler;Mg(g)(i)}),i.isStopped()},z3=(t,s,c,i)=>sB(t,s,c,c.target,i),sB=(t,s,c,i,d)=>{const g=eB(c,i);return oB(t,s,c,i,g,d)},Y8=(t,s)=>({element:t,descHandler:s}),X8=(t,s)=>({id:t,descHandler:s}),rB=()=>{const t={},s=(p,C,S)=>{$o(S,(T,A)=>{const N=t[A]!==void 0?t[A]:{};N[C]=cy(T,p),t[A]=N})},c=(p,C)=>_p(C).bind(S=>dt(p,S)).map(S=>Y8(C,S));return{registerId:s,unregisterId:p=>{$o(t,(C,S)=>{Gn(C,p)&&delete C[p]})},filterByType:p=>dt(t,p).map(C=>Hi(C,(S,T)=>X8(T,S))).getOr([]),find:(p,C,S)=>dt(t,C).bind(T=>_f(S,A=>c(T,A),p))}},cB=()=>{const t=rB(),s={},c=T=>{const A=T.element;return _p(A).getOrThunk(},i=(T,A)=>{const N=s[A];if(N===T)g(T);else throw new Error('The tagId "'+A+'" is already used by: '+Bf(N.element)+`
Cannot use it for: `+Bf(T.element)+`
The conflicting element is`+(Vn(N.element)?" ":" not ")+"already in the DOM")},d=T=>{const A=c(T);$r(s,A)&&i(T,A);const N=[T];t.registerId(N,A,T.events),s[A]=T},g=T=>{_p(T.element).each(};return{find:filter:T=>t.filterByType(T),register:d,unregister:g,getById:T=>dt(s,T)}},Xd=si({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:Hd(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ge("components",[]),pr("containerBehaviours",[]),ge("events",{}),ge("domModification",{}),ge("eventOrder",{})]}),sE=t=>{const s=ce=>xr(t.element).fold(Oe,oe=>co(ce,oe)),c=cB(),i=d=j8(t.element,{triggerEvent:(ce,oe)=>j0(ce,oe.target,fe=>z3(i,ce,oe,fe))}),g={debugInfo:re("real"),triggerEvent:(ce,oe,fe)=>{j0(ce,oe,je=>sB(i,ce,fe,oe,je))},triggerFocus:(ce,oe)=>{_p(ce).fold(()=>{Aa(ce)},fe=>{j0(Td(),ce,je=>(q8(i,Td(),{originator:oe,kill:j,prevent:j,target:ce},ce,je),!1))})},triggerEscape:(ce,oe)=>{g.triggerEvent("keydown",ce.element,oe.event)},getByUid:ce=>J(ce),getByDom:ce=>he(ce),build:Mc,buildOrPatch:U0,addToGui:ce=>{S(ce)},removeFromGui:ce=>{T(ce)},addToWorld:ce=>{p(ce)},removeFromWorld:ce=>{C(ce)},broadcast:ce=>{P(ce)},broadcastOn:(ce,oe)=>{L(ce,oe)},broadcastEvent:(ce,oe)=>{U(ce,oe)},isConnected:Oe},p=ce=>{ce.connect(g),Sr(ce.element)||(c.register(ce),We(ce.components(),p),g.triggerEvent(wm(),ce.element,{target:ce.element}))},C=ce=>{Sr(ce.element)||(We(ce.components(),C),c.unregister(ce)),ce.disconnect()},S=ce=>{Vm(t,ce)},T=ce=>{ju(ce)},A=N=ce=>{const oe=c.filter(Nf());We(oe,fe=>{const je=fe.descHandler;Mg(je)(ce)})},P=L=(ce,oe)=>{N({universal:!1,channels:ce,data:oe})},U=J=ce=>c.getById(ce).fold(()=>bn.error(new Error('Could not find component with uid: "'+ce+'" in system.')),bn.value),he=ce=>{const oe=_p(ce).getOr("not found");return J(oe)};return p(t),{root:t,element:t.element,destroy:A,add:S,remove:T,getByUid:J,getByDom:he,addToWorld:p,removeFromWorld:C,broadcast:P,broadcastOn:L,broadcastEvent:U}},J8=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ye(t.items,s.interpreter)}),Q8=re([ge("prefix","form-field"),pr("fieldBehaviours",[Pn,pt])]),e7=re([Da({schema:[Le("dom")],name:"label"}),Da({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Le("text")],name:"aria-descriptor"}),$c({factory:{sketch:t=>{const s=yp(t,["factory"]);return t.factory.sketch(s)}},schema:[Le("factory")],name:"field"})]),t7=(t,s,c,i)=>{const d=er(t.fieldBehaviours,[Pn.config({find:C=>Mo(C,t,"field")}),pt.config({store:{mode:"manual",getValue:C=>Pn.getCurrent(C).bind(pt.getValue),setValue:(C,S)=>{Pn.getCurrent(C).each(T=>{pt.setValue(T,S)})}}})]),g=Lo([No((C,S)=>{const T=Hw(C,t,["label","field","aria-descriptor"]);T.field().each(A=>{const N=wt(t.prefix);T.label().each(P=>{ht(P.element,"for",N),ht(A.element,"id",N)}),T["aria-descriptor"]().each(P=>{const L=wt(t.prefix);ht(P.element,"id",L),ht(A.element,"aria-describedby",L)})})})]),p={getField:C=>Mo(C,t,"field"),getLabel:C=>Mo(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},bo=Fc({name:"FormField",configFields:Q8(),partFields:e7(),factory:t7,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var rE=Object.freeze({__proto__:null,exhibit:(t,s)=>Qa({attributes:hc([{key:s.tabAttr,value:"true"}])})}),n7=[ge("tabAttr","data-alloy-tabstop")];const os=Rr({fields:n7,name:"tabstopping",active:rE});var o7=tinymce.util.Tools.resolve("tinymce.html.Entities");const dC=(t,s,c,i)=>{const d=r7(t,s,c,i);return bo.sketch(d)},s7=(t,s)=>dC(t,s,[],[]),r7=(t,s,c,i)=>({dom:mC(c),components:t.toArray().concat([s]),fieldBehaviours:et(i)}),bj=mC=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),su=(t,s)=>bo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(t))]}),Oi=wt("form-component-change"),rv=wt("form-close"),Mh=wt("form-cancel"),nf=wt("form-action"),fC=wt("form-submit"),U3=wt("form-block"),W3=wt("form-unblock"),aB=wt("form-tabchange"),iB=wt("form-resize"),c7=(t,s,c)=>{const i=t.label.map(L=>su(L,s)),d=s.icons(),g=L=>{var U;return(U=d[L])!==null&&U!==void 0?U:L},p=L=>(U,J)=>{Zl(J.event.target,"[data-collection-item-value]").each(he=>{L(U,J,he,Qo(he,"data-collection-item-value"))})},C=(L,U)=>{const J=ye(U,oe=>{const fe=El.translate(oe.text),je=t.columns===1?`<div class="tox-collection__item-label">${fe}</div>`:"",Be=`<div class="tox-collection__item-icon">${g(oe.icon)}</div>`,Ae={_:" "," - ":" ","-":" "},Je=fe.replace(/\_| \- |\-/g,yn=>Ae[yn]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${o7.encodeAllRaw(oe.value)}" title="${Je}" aria-label="${Je}">${Be}${je}</div>`}),he=t.columns!=="auto"&&t.columns>1?It(J,t.columns):[J],ce=ye(he,;Mf(L.element,ce.join(""))},S=p((L,U,J,he)=>{U.stop(),s.isDisabled()||Ft(L,nf,{name:t.name,value:he})}),T=[Pe(xd(),p((L,U,J)=>{Aa(J)})),Pe(Ed(),S),Pe(zl(),S),Pe(Ya(),p((L,U,J)=>{Zs(L.element,"."+q2).each(he=>{fs(he,q2)}),Ws(J,q2)})),Pe(w0(),p(L=>{Zs(L.element,"."+q2).each(U=>{fs(U,q2)})})),hl(p((L,U,J,he)=>{Ft(L,nf,{name:t.name,value:he})}))],A=(L,U)=>ye(Nr(L.element,".tox-collection__item"),U),N=bo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:bt},behaviours:et([Zt.config({disabled:s.isDisabled,onDisabled:L=>{A(L,U=>{Ws(U,"tox-collection__item--state-disabled"),ht(U,"aria-disabled",!0)})},onEnabled:L=>{A(L,U=>{fs(U,"tox-collection__item--state-disabled"),es(U,"aria-disabled")})}}),Br(),fn.config({}),pt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(L,U)=>{C(L,U),t.columns==="auto"&&n3(L,5,"tox-collection__item").each(({numRows:J,numColumns:he})=>{Lt.setGridSize(L,J,he)}),Fn(L,iB)}}),os.config({}),Lt.config(s8(t.columns,"normal")),vn("collection-events",T)]),eventOrder:{[Xa()]:["disabling","alloy.base.behaviour","collection-events"]}});return dC(i,N,["tox-form__group--collection"],[])},a7=["input","textarea"],lB=t=>{const s=Ec(t);return Rn(a7,s)},uB=(t,s)=>{const c=s.getRoot(t).getOr(t.element);fs(c,s.invalidClass),s.notify.each(i=>{lB(t.element)&&ht(t.element,"aria-invalid",!1),i.getContainer(t).each(,i.onValid(t)})},Z3=(t,s,c,i)=>{const d=s.getRoot(t).getOr(t.element);Ws(d,s.invalidClass),s.notify.each(g=>{lB(t.element)&&ht(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{Mf(p,i)}),g.onInvalid(t,i)})},M1=(t,s,c)=>s.validator.fold(()=>Xc.pure(bn.value(!0)),i=>i.validate(t)),ig=(t,s,c)=>(s.notify.each(i=>{i.onValidate(t)}),M1(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(Z3(t,s,c,d),bn.error(d)),:bn.error("No longer in system")));var dB=Object.freeze({__proto__:null,markValid:uB,markInvalid:Z3,query:M1,run:ig,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return hr(c,s.invalidClass)}}),cE=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>Lo([Pe(c.onEvent,i=>{ig(i,t,s).get(bt)})].concat(c.validateOnLoad?[No(i=>{ig(i,t,s).get(j)})]:[]))).getOr({})}),l7=[Le("invalidClass"),ge("getRoot",k.none),xa("notify",[ge("aria","alert"),ge("getContainer",k.none),ge("validHtml",""),Un("onValid"),Un("onInvalid"),Un("onValidate")]),xa("validator",[Le("validate"),ge("onEvent","input"),ge("validateOnLoad",!0)])];const _l=Rr({fields:l7,name:"invalidating",active:cE,apis:dB,extra:{validation:t=>s=>{const c=pt.getValue(s);return Xc.pure(t(c))}}});var u7=Object.freeze({__proto__:null,events:()=>Lo([Kv(CS(),Oe)]),exhibit:()=>Qa({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const gC=Rr({fields:[],name:"unselecting",active:u7}),d7=(t,s)=>ou.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:et([br.button(s.providers.isDisabled),Br(),gC.config({}),os.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>Xc.nu(i=>t.fetch(i)).map(i=>k.from(oE(yo(D3(wt("menu-value"),i,d=>{t.onItemAction(c,d)},t.columns,t.presets,Yd.CLOSE_ON_EXECUTE,Xe,s.providers),{movement:Qx(t.columns,t.presets)})))),parts:{menu:Gb(!1,1,t.presets)}}),mB=wt("color-input-change"),fB=wt("color-swatch-change"),hC=wt("color-picker-cancel"),m7=(t,s,c,i)=>{const d=bo.parts.field({factory:O1,inputClasses:["tox-textfield"],data:i,onSetValue:inputBehaviours:et([Zt.config({disabled:s.providers.isDisabled}),Br(),os.config({}),_l.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>ra(T.element),notify:{onValid:T=>{const A=pt.getValue(T);Ft(T,mB,{color:A})}},validator:{validateOnLoad:!1,validate:T=>{const A=pt.getValue(T);if(A.length===0)return Xc.pure(bn.value(!0));{const N=de.fromTag("span");an(N,"background-color",A);const P=As(N,"background-color").fold(()=>bn.error("blah"),L=>bn.value(A));return Xc.pure(P)}}}})]),selectOnFocus:!1}),g=t.label.map(T=>su(T,s.providers)),p=(T,A)=>{Ft(T,fB,{value:A})},C=(T,A)=>{S.getOpt(T).each(N=>{A==="custom"?c.colorPicker(P=>{P.fold(()=>Fn(N,hC),},"#ffffff"):A==="remove"?p(N,""):p(N,A)})},S=po(d7({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[vc,Or,Dr],onLtr:,components:[],fetch:MM(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return bo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:et([vn("form-field-events",[Pe(mB,(T,A)=>{S.getOpt(T).each(N=>{an(N.element,"background-color",A.event.color)}),Ft(T,Oi,{name:t.name})}),Pe(fB,(T,A)=>{bo.getField(T).each(N=>{pt.setValue(N,A.event.value),Pn.getCurrent(T).each(Kt.focus)})}),Pe(hC,(T,A)=>{bo.getField(T).each(N=>{Pn.getCurrent(T).each(Kt.focus)})})])])})},j3=Da({schema:[Le("dom")],name:"label"}),Bh=t=>Da({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(i=>({events:Lo([O0(Bu(),(d,g,p)=>i(d,p),[s]),O0(gr(),[s]),O0(xg(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),f7=Bh("top-left"),g7=Bh("top"),gB=Bh("top-right"),h7=Bh("right"),p7=Bh("bottom-right"),b7=Bh("bottom"),hB=Bh("bottom-left"),v7=Bh("left"),y7=$c({name:"thumb",defaults:re({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Lo([_g(Bu(),t,"spectrum"),_g(wg(),t,"spectrum"),_g(Af(),t,"spectrum"),_g(gr(),t,"spectrum"),_g(xg(),t,"spectrum"),_g(Zv(),t,"spectrum")])})}),iE=t=>jd(t.event),C7=$c({schema:[zs("mouseIsDown",()=>Vt(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,i=(d,g)=>c.getValueFromEvent(g).map(;return{behaviours:et([Lt.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,iE(g)),onRight:(d,g)=>c.onRight(d,t,iE(g)),onUp:(d,g)=>c.onUp(d,t,iE(g)),onDown:(d,g)=>c.onDown(d,t,iE(g))}),os.config({}),Kt.config({})]),events:Lo([Pe(Bu(),i),Pe(wg(),i),Pe(gr(),i),Pe(xg(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var S7=[j3,v7,h7,g7,b7,f7,gB,hB,p7,y7,C7];const cv=re("slider.change.value"),x7=t=>t.type.indexOf("touch")!==-1,G3=t=>{const s=t.event.raw;if(x7(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?k.some(c.touches[0]).map(i=>On(i.clientX,i.clientY)):k.none()}else{const c=s;return c.clientX!==void 0?k.some(c).map(:k.none()}},E7="top",T7="right",k7="bottom",pB="left",nd=t=>t.model.minX,B1=t=>t.model.minY,lE=t=>t.model.minX-1,uE=of=t=>t.model.maxX,ga=t=>t.model.maxY,av=t=>t.model.maxX+1,pC=bB=(t,s,c)=>s(t)-c(t),q3=t=>bB(t,of,nd),K3=t=>bB(t,ga,B1),vB=t=>q3(t)/2,Y3=P1=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,yB=t=>t.snapToGrid,CB=t=>t.snapStart,X3=t=>t.rounded,dE=(t,s)=>t[s+"-edge"]!==void 0,J3=t=>dE(t,pB),Q3=t=>dE(t,T7),eA=t=>dE(t,E7),SB=t=>dE(t,k7),lg=t=>t.model.value.get(),Ph=(t,s)=>({x:t,y:s}),od=(t,s)=>{Ft(t,cv(),{value:s})},_7=(t,s)=>{od(t,Ph(lE(s),uE(s)))},A7=(t,s)=>{od(t,uE(s))},tA=(t,s)=>{od(t,Ph(vB(s),uE(s)))},O7=(t,s)=>{od(t,Ph(av(s),uE(s)))},wB=(t,s)=>{od(t,av(s))},D7=(t,s)=>{od(t,Ph(av(s),Y3(s)))},R7=(t,s)=>{od(t,Ph(av(s),pC(s)))},N7=(t,s)=>{od(t,pC(s))},M7=(t,s)=>{od(t,Ph(vB(s),pC(s)))},B7=(t,s)=>{od(t,Ph(lE(s),pC(s)))},P7=$7=(t,s)=>{od(t,Ph(lE(s),Y3(s)))},mE=(t,s,c,i)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-i),fE=(t,s,c,i)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+i),xB=F7=(t,s,c,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return xB(s+p,s-1,c+1)},g=>{const p=(t-g)%i,C=Math.round(p/i),S=Math.floor((t-g)/i),T=Math.floor((c-g)/i),A=Math.min(T,S+C),N=g+A*i;return Math.max(g,N)}),L7=(t,s,c)=>Math.min(c,Math.max(t,s))-s,EB=t=>{const{min:s,max:c,range:i,value:d,step:g,snap:p,snapStart:C,rounded:S,hasMinEdge:T,hasMaxEdge:A,minBound:N,maxBound:P,screenRange:L}=t,U=T?s-1:s,J=A?c+1:c;if(d<N)return U;if(d>P)return J;{const he=L7(d,N,P),ce=xB(he/L*i+s,U,J);return p&&ce>=s&&ce<=c?F7(ce,s,c,g,C):S?Math.round(ce):ce}},TB=t=>{const{min:s,max:c,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:C,maxOffset:S,centerMinEdge:T,centerMaxEdge:A}=t;return d<s?g?0:T:d>c?p?C:A:(d-s)/i*S},nA="top",oA="right",sA="bottom",gE="left",rA="width",I7="height",Jd=t=>t.element.dom.getBoundingClientRect(),sd=hE=t=>{const s=Jd(t);return sd(s,gE)},kB=t=>{const s=Jd(t);return sd(s,oA)},pE=t=>{const s=Jd(t);return sd(s,nA)},bE=t=>{const s=Jd(t);return sd(s,sA)},sf=t=>{const s=Jd(t);return sd(s,rA)},_B=t=>{const s=Jd(t);return sd(s,I7)},iv=(t,s,c)=>(t+s)/2-c,AB=(t,s)=>{const c=Jd(t),i=Jd(s),d=sd(c,gE),g=sd(c,oA),p=sd(i,gE);return iv(d,g,p)},vE=(t,s)=>{const c=Jd(t),i=Jd(s),d=sd(c,nA),g=sd(c,sA),p=sd(i,nA);return iv(d,g,p)},yE=(t,s)=>{Ft(t,cv(),{value:s})},cA=(t,s,c)=>{const i={min:nd(s),max:of(s),range:q3(s),value:c,step:P1(s),snap:yB(s),snapStart:CB(s),rounded:X3(s),hasMinEdge:J3(s),hasMaxEdge:Q3(s),minBound:hE(t),maxBound:kB(t),screenRange:sf(t)};return EB(i)},H7=(t,s,c)=>{const i=cA(t,s,c);return yE(t,i),i},OB=(t,s)=>{const c=nd(s);yE(t,c)},V7=(t,s)=>{const c=of(s);yE(t,c)},aA=(t,s,c,i)=>{const g=(t>0?fE:mE)(lg(c),nd(c),of(c),P1(c,i));return yE(s,g),k.some(g)},CE=t=>(s,c,i)=>aA(t,s,c,i).map(Oe),iA=t=>G3(t).map(c=>c.left),z7=(t,s,c,i,d)=>{const p=sf(t),C=i.bind(A=>k.some(AB(A,t))).getOr(0),S=d.bind(A=>k.some(AB(A,t))).getOr(p),T={min:nd(s),max:of(s),range:q3(s),value:c,hasMinEdge:J3(s),hasMaxEdge:Q3(s),minBound:hE(t),minOffset:0,maxBound:kB(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return TB(T)},Di=(t,s,c,i,d,g)=>{const p=z7(s,g,c,i,d);return hE(s)-hE(t)+p},U7=(t,s,c,i)=>{const d=lg(c),g=Di(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),c),p=Go(s.element)/2;an(s.element,"left",g-p+"px")},W7=CE(-1),DB=CE(1),RB=k.none,Z7=k.none,j7={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(wB),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(P7)};var G7=Object.freeze({__proto__:null,setValueFrom:H7,setToMin:OB,setToMax:V7,findValueOfOffset:cA,getValueFromEvent:iA,findPositionOfValue:Di,setPositionFromValue:U7,onLeft:W7,onRight:DB,onUp:RB,onDown:Z7,edgeActions:j7});const SE=(t,s)=>{Ft(t,cv(),{value:s})},lA=(t,s,c)=>{const i={min:B1(s),max:ga(s),range:K3(s),value:c,step:P1(s),snap:yB(s),snapStart:CB(s),rounded:X3(s),hasMinEdge:eA(s),hasMaxEdge:SB(s),minBound:pE(t),maxBound:bE(t),screenRange:_B(t)};return EB(i)},q7=(t,s,c)=>{const i=lA(t,s,c);return SE(t,i),i},K7=(t,s)=>{const c=B1(s);SE(t,c)},NB=Y7=(t,s,c,i)=>{const g=(t>0?fE:mE)(lg(c),B1(c),ga(c),P1(c,i));return SE(s,g),k.some(g)},MB=t=>(s,c,i)=>Y7(t,s,c,i).map(Oe),X7=BB=(t,s,c,i,d)=>{const p=_B(t),C=i.bind(A=>k.some(vE(A,t))).getOr(0),S=d.bind(.getOr(p),T={min:B1(s),max:ga(s),range:K3(s),value:c,hasMinEdge:eA(s),hasMaxEdge:SB(s),minBound:pE(t),minOffset:0,maxBound:bE(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return TB(T)},bC=(t,s,c,i,d,g)=>{const p=BB(s,g,c,i,d);return pE(s)-pE(t)+p},J7=(t,s,c,i)=>{const d=lg(c),g=bC(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),c),p=mt(s.element)/2;an(s.element,"top",g-p+"px")},uA=k.none,lv=k.none,PB=MB(-1),$B=MB(1),FB={"top-left":k.none(),top:k.some(A7),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(N7),"bottom-left":k.none(),left:k.none()};var Q7=Object.freeze({__proto__:null,setValueFrom:q7,setToMin:K7,setToMax:NB,findValueOfOffset:lA,getValueFromEvent:X7,findPositionOfValue:bC,setPositionFromValue:J7,onLeft:uA,onRight:lv,onUp:PB,onDown:$B,edgeActions:FB});const wE=(t,s)=>{Ft(t,cv(),{value:s})},$1=(t,s)=>({x:t,y:s}),eH=(t,s,c)=>{const i=cA(t,s,c.left),d=lA(t,s,c.top),g=$1(i,d);return wE(t,g),g},tH=(t,s,c,i,d)=>{const g=t>0?fE:mE,p=s?lg(i).x:g(lg(i).x,nd(i),of(i),P1(i,d)),C=s?g(lg(i).y,B1(i),ga(i),P1(i,d)):lg(i).y;return wE(c,$1(p,C)),k.some(p)},vC=(t,s)=>(c,i,d)=>tH(t,s,c,i,d).map(Oe),LB=(t,s)=>{const c=nd(s),i=B1(s);wE(t,$1(c,i))},dA=(t,s)=>{const c=of(s),i=ga(s);wE(t,$1(c,i))},IB=t=>G3(t),ci=(t,s,c,i)=>{const d=lg(c),g=Di(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),c),p=bC(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),c),C=Go(s.element)/2,S=mt(s.element)/2;an(s.element,"left",g-C+"px"),an(s.element,"top",p-S+"px")},HB=vC(-1,!1),nH=vC(1,!1),oH=vC(-1,!0),VB=vC(1,!0),sH={"top-left":k.some(_7),top:k.some(tA),"top-right":k.some(O7),right:k.some(D7),"bottom-right":k.some(R7),bottom:k.some(M7),"bottom-left":k.some(B7),left:k.some($7)};var rH=Object.freeze({__proto__:null,setValueFrom:eH,setToMin:LB,setToMax:dA,getValueFromEvent:IB,setPositionFromValue:ci,onLeft:HB,onRight:nH,onUp:oH,onDown:VB,edgeActions:sH});const cH=[ge("stepSize",1),ge("speedMultiplier",10),ge("onChange",j),ge("onChoose",j),ge("onInit",j),ge("onDragStart",j),ge("onDragEnd",j),ge("snapToGrid",!1),ge("rounded",!0),mo("snapStart"),ja("model",zn("mode",{x:[ge("minX",0),ge("maxX",100),zs("value",t=>Vt(t.mode.minX)),Le("getInitialValue"),Co("manager",G7)],y:[ge("minY",0),ge("maxY",100),zs("value",,Le("getInitialValue"),Co("manager",Q7)],xy:[ge("minX",0),ge("maxX",100),ge("minY",0),ge("maxY",100),zs("value",,Le("getInitialValue"),Co("manager",rH)]})),pr("sliderBehaviours",[Lt,pt]),zs("mouseIsDown",],Ic=Fc({name:"Slider",configFields:cH,partFields:S7,factory:(t,s,c,i)=>{const d=Be=>zd(Be,t,"thumb"),g=Be=>zd(Be,t,"spectrum"),p=Be=>Mo(Be,t,"left-edge"),C=Be=>Mo(Be,t,"right-edge"),S=Be=>Mo(Be,t,"top-edge"),T=A=t.model,N=A.manager,P=(Be,Ae)=>{N.setPositionFromValue(Be,Ae,t,{getLeftEdge:p,getRightEdge:C,getTopEdge:S,getBottomEdge:T,getSpectrum:g})},L=(Be,Ae)=>{A.value.set(Ae);const Je=d(Be);P(Be,Je)},U=(Be,Ae)=>{L(Be,Ae);const Je=d(Be);return t.onChange(Be,Je,Ae),k.some(!0)},J=Be=>{N.setToMin(Be,t)},he=Be=>{N.setToMax(Be,t)},ce=Be=>{const Ae=()=>{Mo(Be,t,"thumb").each(ct=>{const yn=A.value.get();t.onChoose(Be,ct,yn)})},Je=t.mouseIsDown.get();t.mouseIsDown.set(!1),Je&&Ae()},oe=(Be,Ae)=>{Ae.stop(),t.mouseIsDown.set(!0),t.onDragStart(Be,d(Be))},fe=(Be,Ae)=>{Ae.stop(),t.onDragEnd(Be,d(Be)),ce(Be)},je=Be=>{Mo(Be,t,"spectrum").map(Lt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:er(t.sliderBehaviours,[Lt.config({mode:"special",focusIn:je}),pt.config({store:{mode:"manual",getValue:Be=>A.value.get(),setValue:L}}),_a.config({channels:{[c2()]:{onReceive:ce}}})]),events:Lo([Pe(cv(),,No((Be,Ae)=>{const Je=A.getInitialValue();A.value.set(Je);const ct=d(Be);P(Be,ct);const yn=g(Be);t.onInit(Be,ct,yn,A.value.get())}),Pe(Bu(),oe),Pe(Af(),fe),Pe(gr(),,Pe(Zv(),fe)]),apis:{resetToMin:J,resetToMax:he,setValue:L,refresh:P},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),yC=wt("rgb-hex-update"),mA=wt("slider-update"),CC=wt("palette-update"),fA=(t,s)=>{const c=Ic.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Ic.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Ic.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:re(0)},components:[c,i],sliderBehaviours:et([Kt.config({})]),onChange:(d,g,p)=>{ht(d.element,"aria-valuenow",Math.floor(360-p*3.6)),Ft(d,mA,{value:p})}})},zB="form",iH=[pr("formBehaviours",[pt])],UB=t=>"<alloy.field."+t+">",lH=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),f2(zB,UB(C),S)),record:re(g)}})(),c=t(s),i=s.record(),d=ye(i,g=>$c({name:g,pname:UB(g)}));return C2(zB,iH,d,dH,c)},uH=(t,s)=>t.fold(()=>bn.error(s),bn.value),dH=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:er(t.formBehaviours,[pt.config({store:{mode:"manual",getValue:c=>{const i=h2(c,t);return Fo(i,(d,g)=>d().bind(p=>{const C=Pn.getCurrent(p);return uH(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Bf(p.element)))}).map(pt.getValue))},setValue:(c,i)=>{$o(i,(d,g)=>{Mo(c,t,g).each(p=>{Pn.getCurrent(p).each(C=>{pt.setValue(C,d)})})})}}})]),apis:{getField:(c,i)=>Mo(c,t,i).bind(Pn.getCurrent)}}),uv={getField:$f(,sketch:lH},gA=wt("valid-input"),WB=wt("invalid-input"),Qd=wt("validating-input"),dv="colorcustom.rgb.",mH=(t,s,c,i)=>{const d=(P,L)=>_l.config({invalidClass:s("invalid"),notify:{onValidate:U=>{Ft(U,Qd,{type:P})},onValid:U=>{Ft(U,gA,{type:P,value:pt.getValue(U)})},onInvalid:U=>{Ft(U,WB,{type:P,value:pt.getValue(U)})}},validator:{validate:U=>{const J=pt.getValue(U),he=L(J)?bn.value(!0):bn.error(t("aria.input.invalid"));return Xc.pure(he)},validateOnLoad:!1}}),g=(P,L,U,J,he)=>{const ce=t(dv+"range"),oe=bo.parts.label({dom:{tag:"label",attributes:{"aria-label":J}},components:[Fs(U)]}),fe=bo.parts.field({data:he,factory:O1,inputAttributes:{type:"text",...L==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:et([d(L,P),os.config({})]),onSetValue:Je=>{_l.isInvalid(Je)&&_l.run(Je).get(j)}}),je=[oe,fe],Be=L!=="hex"?[bo.parts["aria-descriptor"]({text:ce})]:[],Ae=je.concat(Be);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Ae}},p=(P,L)=>{const U=ov(L);return uv.getField(P,"hex").each(J=>{Kt.isFocused(J)||pt.setValue(P,{hex:U.value})}),U},C=(P,L)=>{const U=L.red,J=L.green,he=L.blue;pt.setValue(P,{red:U,green:J,blue:he})},S=po({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),T=(P,L)=>{S.getOpt(P).each(U=>{an(U.element,"background-color","#"+L.value)})};return si({factory:()=>{const P={red:Vt(k.some(255)),green:Vt(k.some(255)),blue:Vt(k.some(255)),hex:Vt(k.some("ffffff"))},L=(Yt,fo)=>{const zt=sC(fo);C(Yt,zt),ce(zt)},U=J=he=()=>U("red").bind(Yt=>U("green").bind(fo=>U("blue").map()),ce=Yt=>{const fo=Yt.red,zt=Yt.green,qn=Yt.blue;J("red",k.some(fo)),J("green",k.some(zt)),J("blue",k.some(qn))},oe=(Yt,fo)=>{const zt=fo.event;zt.type!=="hex"?J(zt.type,k.none()):i(Yt)},fe=(Yt,fo)=>{c(Yt);const zt=iM(fo);J("hex",k.some(zt.value));const qn=sC(zt);C(Yt,qn),ce(qn),Ft(Yt,yC,{hex:zt}),T(Yt,zt)},je=(Yt,fo,zt)=>{const qn=parseInt(zt,10);J(fo,k.some(qn)),he().each(at=>{const _t=p(Yt,at);Ft(Yt,yC,{hex:_t}),T(Yt,_t)})},Be=Yt=>Yt.type==="hex",Ae=(Yt,fo)=>{const zt=fo.event;Be(zt)?fe(Yt,zt.value):je(Yt,zt.type,zt.value)},Je=Yt=>({label:t(dv+Yt+".label"),description:t(dv+Yt+".description")}),ct=Je("red"),yn=Je("green"),St=Je("blue"),tn=Je("hex");return yo(uv.sketch(Yt=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Yt.field("red",bo.sketch(g(m3,"red",ct.label,ct.description,255))),Yt.field("green",bo.sketch(g(m3,"green",yn.label,yn.description,255))),Yt.field("blue",bo.sketch(g(m3,"blue",St.label,St.description,255))),Yt.field("hex",bo.sketch(g(dM,"hex",tn.label,tn.description,"ffffff"))),S.asSpec()],formBehaviours:et([_l.config({invalidClass:s("form-invalid")}),vn("rgb-form-events",[Pe(gA,Ae),Pe(WB,oe),Pe(Qd,oe)])])})),{apis:{updateHex:(Yt,fo)=>{pt.setValue(Yt,{hex:fo.value}),L(Yt,fo),T(Yt,fo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(P,L,U)=>{P.updateHex(L,U)}},extraApis:{}})},fH=(t,s)=>{const c=Ic.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Ic.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,A)=>{const{width:N,height:P}=T,L=T.getContext("2d");if(L===null)return;L.fillStyle=A,L.fillRect(0,0,N,P);const U=L.createLinearGradient(0,0,N,0);U.addColorStop(0,"rgba(255,255,255,1)"),U.addColorStop(1,"rgba(255,255,255,0)"),L.fillStyle=U,L.fillRect(0,0,N,P);const J=L.createLinearGradient(0,0,0,P);J.addColorStop(0,"rgba(0,0,0,0)"),J.addColorStop(1,"rgba(0,0,0,1)"),L.fillStyle=J,L.fillRect(0,0,N,P)},g=(T,A)=>{const N=T.components()[0].element.dom,P=cC(A,100,100),L=vM(P);d(N,g3(L))},p=(T,A)=>{const N=qx(sC(A));Ic.setValue(T,{x:N.saturation,y:100-N.value}),ht(T.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",N.saturation,N.value]))};return si({factory:T=>{const A=re({x:0,y:0}),N=(U,J,he)=>{Rs(he)||ht(U.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(he.x),Math.floor(100-he.y)])),Ft(U,CC,{value:he})},P=(U,J,he,ce)=>{d(he.element.dom,g3(nu))},L=et([Pn.config({find:k.some}),Kt.config({})]);return Ic.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:A},rounded:!1,components:[c,i],onChange:N,onInit:P,sliderBehaviours:L})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,A,N)=>{g(A,N)},setThumb:(T,A,N)=>{p(A,N)}},extraApis:{}})},ZB=(t,s)=>{const c=d=>{const g=mH(t,s,d.onValidHex,d.onInvalidHex),p=fH(t,s),C=Ae=>(100-Ae)/100*360,S=Ae=>100-Ae/360*100,T={paletteRgba:Vt(nu),paletteHue:Vt(0)},A=po(fA(t,s)),N=po(p.sketch({})),P=po(g.sketch({})),L=(Ae,Je,ct)=>{N.getOpt(Ae).each(yn=>{p.setHue(yn,ct)})},U=(Ae,Je)=>{P.getOpt(Ae).each(ct=>{g.updateHex(ct,Je)})},J=(Ae,Je,ct)=>{A.getOpt(Ae).each(yn=>{Ic.setValue(yn,S(ct))})},he=(Ae,Je)=>{N.getOpt(Ae).each(ct=>{p.setThumb(ct,Je)})},ce=(Ae,Je)=>{const ct=sC(Ae);T.paletteRgba.set(ct),T.paletteHue.set(Je)},oe=(Ae,Je,ct,yn)=>{ce(Je,ct),We(yn,St=>{St(Ae,Je,ct)})},fe=()=>{const Ae=[U];return(Je,ct)=>{const yn=ct.event.value,St=T.paletteHue.get(),tn=cC(St,yn.x,100-yn.y),Yt=kM(tn);oe(Je,Yt,St,Ae)}},je=()=>{const Ae=[L,U];return(Je,ct)=>{const yn=C(ct.event.value),St=T.paletteRgba.get(),tn=qx(St),Yt=cC(yn,tn.saturation,tn.value),fo=kM(Yt);oe(Je,fo,yn,Ae)}},Be=()=>{const Ae=[L,J,he];return(Je,ct)=>{const yn=ct.event.hex,St=GI(yn);oe(Je,yn,St.hue,Ae)}};return{uid:d.uid,dom:d.dom,components:[N.asSpec(),A.asSpec(),P.asSpec()],behaviours:et([vn("colour-picker-events",[Pe(yC,Be()),Pe(CC,fe()),Pe(mA,je())]),Pn.config({find:Ae=>P.getOpt(Ae)}),Lt.config({mode:"acyclic"})])}};return si({name:"ColourPicker",configFields:[Le("dom"),ge("onValidHex",j),ge("onInvalidHex",j)],factory:c})},Ri={self:memento:childAt:t=>Pn.config({find:s=>fi(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},SC=Pt([ge("preprocess",bt),ge("postprocess",bt)]),GB=(t,s)=>{const c=ia("RepresentingConfigs.memento processors",SC,s);return pt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=pt.getValue(d);return c.postprocess(g)},setValue:(i,d)=>{const g=c.preprocess(d),p=t.get(i);pt.setValue(p,g)}}})},$h=(t,s,c)=>pt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:c}}),pA=(t,s,c)=>$h(t,i=>s(i.element),(i,d)=>c(i.element,d)),qB=t=>pA(t,ey,Mf),xE=t=>pt.config({store:{mode:"memory",initialValue:t}}),hH={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},pH=t=>s=>nt(s)?t.translate(hH[s]):t.translate(s),bH=(t,s,c)=>{const i=d=ZB(pH(s),i),g=S=>{Ft(S,nf,{name:"hex-valid",value:!0})},p=S=>{Ft(S,nf,{name:"hex-valid",value:!1})},C=po(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:et([$h(c,S=>{const T=C.get(S);return Pn.getCurrent(T).bind(P=>pt.getValue(P).hex).map(P=>"#"+fu(P,"#")).getOr("")},(S,T)=>{const A=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,N=k.from(A.exec(T)).bind(U=>ao(U,1)),P=C.get(S);Pn.getCurrent(P).fold(()=>{},U=>{pt.setValue(U,{hex:N.getOr("")}),uv.getField(U,"hex").each(J=>{Fn(J,Of())})})}),Ri.self()])}};var vH=tinymce.util.Tools.resolve("tinymce.Resource");const KB=t=>Gn(t,"init"),YB=t=>{const s=_n(),c=po({dom:{tag:t.tag}}),i=_n();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:et([vn("custom-editor-events",[No(d=>{c.getOpt(d).each(g=>{(KB(t)?t.init(g.element.dom):vH.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{i.on(C=>{p.setValue(C)}),i.clear(),s.set(p)})})})]),$h(k.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),p=>p.setValue(g))}),Ri.self()]),components:[c.asSpec()]}};var ug=tinymce.util.Tools.resolve("tinymce.util.Tools");const XB=(t,s)=>{const c=ug.explode(s.getOption("images_file_types")),i=d=>cs(c,g=>na(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Kn(Wr(t),i)},yH=(t,s,c)=>{const i=(P,L)=>{L.stop()},d=P=>(L,U)=>{We(P,J=>{J(L,U)})},g=(P,L)=>{var U;if(!Zt.isDisabled(P)){const J=L.event.raw;C(P,(U=J.dataTransfer)===null||U===void 0?void 0:U.files)}},p=(P,L)=>{const U=L.event.raw.target;C(P,U.files)},C=(P,L)=>{L&&(pt.setValue(P,XB(L,s)),Ft(P,Oi,{name:t.name}))},S=po({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:et([vn("input-file-events",[_d(Ed()),_d(zl())])])}),T=P=>({uid:P.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:et([xE(c.getOr([])),Ri.self(),Zt.config({}),En.config({toggleClass:"dragenter",toggleOnExecute:!1}),vn("dropzone-events",[Pe("dragenter",d([i,En.toggle])),Pe("dragleave",d([i,En.toggle])),Pe("dragover",i),Pe("drop",d([i,g])),Pe(Tg(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Fs(s.translate("Drop an image here"))]},sc.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Fs(s.translate("Browse for an image")),S.asSpec()],action:L=>{S.get(L).element.dom.click()},buttonBehaviours:et([os.config({}),br.button(s.isDisabled),Br()])})]}]}),A=t.label.map(P=>su(P,s)),N=bo.parts.field({factory:{sketch:T}});return dC(A,N,["tox-form__group--stretched"],[])},JB=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:ye(t.items,s.interpreter)}),wC=(t,s)=>{let c=null,i=null;return{cancel:()=>{Is(c)||(clearTimeout(c),c=null,i=null)},throttle:(...p)=>{i=p,Is(c)&&(c=setTimeout(()=>{const C=i;c=null,i=null,t.apply(null,C)},s))}}},CH=(t,s)=>{let c=null;return{cancel:()=>{Is(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{Is(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},EE=(t,s)=>{let c=null;const i=()=>{Is(c)||(clearTimeout(c),c=null)};return{cancel:i,throttle:(...g)=>{i(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},bA=wt("alloy-fake-before-tabstop"),vA=wt("alloy-fake-after-tabstop"),QB=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:et([Kt.config({ignore:!0}),os.config({})])}),e5=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[QB([bA]),s,QB([vA])],behaviours:et([Ri.childAt(1)])}),yA=(t,s)=>{Ft(t,gl(),{raw:{which:9,shiftKey:s}})},SH=(t,s)=>{const c=s.element;hr(c,bA)?yA(t,!0):hr(c,vA)&&yA(t,!1)},mv=t=>lC(t,["."+bA,"."+vA].join(","),Xe),fv=wt("update-dialog"),rf=wt("update-title"),TE=wt("update-body"),CA=wt("update-footer"),SA=wt("body-send-message"),gv=wt("dialog-focus-shifted"),kE=ll().browser,Fh=kE.isSafari(),t5=kE.isFirefox(),wA=Fh||t5,wH=kE.isChromium(),xH=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,n5=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),EH=(t,s)=>{const c=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!wH&&!Fh||to(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},o5=(t,s,c)=>{const i=t.dom;k.from(i.contentDocument).fold(c,d=>{let g=0;const p=EH(d,s).map(.forall(xH),C=()=>{const S=i.contentWindow;to(S)&&(p?n5(S,"bottom"):!p&&wA&&g!==0&&n5(S,g))};Fh&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),Fh||C()})},s5=Gt(wA,Fh?500:200).map(t=>wC(o5,t)),kH=(t,s)=>{const c=Vt(t.getOr(""));return{getValue:i=>c.get(),setValue:(i,d)=>{if(c.get()!==d){const g=i.element,p=s?s5.fold(re(o5),C=>C.throttle)(g,d,p):p()}c.set(d)}}},_H=(t,s,c)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],p={...t.label.map(N=>({title:N})).getOr({}),...c.map(N=>({srcdoc:N})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=kH(c,t.streamContent),S=t.label.map(N=>su(N,s)),T=N=>e5(k.from(g),{uid:N.uid,dom:{tag:"iframe",attributes:p,classes:[i,...d]},behaviours:et([os.config({}),Kt.config({}),$h(c,C.getValue,C.setValue),_a.config({channels:{[gv]:{onReceive:(P,L)=>{L.newFocus.each(U=>{ra(P.element).each(J=>{(co(P.element,U)?Ws:fs)(J,"tox-navobj-bordered-focus")})})}}}})])}),A=bo.parts.field({factory:{sketch:T}});return dC(S,A,["tox-form__group--stretched"],[])},AH=t=>new Promise((s,c)=>{const i=d=[qc(t,"load",i),qc(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>We(d,p=>p.unbind());t.dom.complete&&i()}),_E=(t,s,c,i,d)=>{const g=c*d,p=i*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-p/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},OH=(t,s,c)=>{const i=Go(t),d=mt(t);return Math.min(i/s,d/c,1)},DH=(t,s)=>{const c=Vt(s.getOr({url:""})),i=po({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=po({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,T)=>{const A={url:T.url};T.zoom.each(P=>A.zoom=P),T.cachedWidth.each(P=>A.cachedWidth=P),T.cachedHeight.each(P=>A.cachedHeight=P),c.set(A);const N=()=>{const{cachedWidth:P,cachedHeight:L,zoom:U}=A;if(!rs(P)&&!rs(L)){if(rs(U)){const he=OH(S.element,P,L);A.zoom=he}const J=_E(Go(S.element),mt(S.element),P,L,A.zoom);d.getOpt(S).each(he=>{_c(he.element,J)})}};i.getOpt(S).each(P=>{const L=P.element;T.url!==Qo(L,"src")&&(ht(L,"src",T.url),fs(S.element,"tox-imagepreview__loaded")),N(),AH(L).then(U=>{S.getSystem().isConnected()&&(Ws(S.element,"tox-imagepreview__loaded"),A.cachedWidth=U.dom.naturalWidth,A.cachedHeight=U.dom.naturalHeight,N())})})},p={};t.height.each(;const C=s.map(S=>({url:S.url,zoom:k.from(S.zoom),cachedWidth:k.from(S.cachedWidth),cachedHeight:k.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:et([Ri.self(),$h(C,()=>c.get(),g)])}},r5=(t,s)=>{const c="tox-label",i=t.align==="center"?[`${c}--center`]:[],d=t.align==="end"?[`${c}--end`]:[],g={dom:{tag:"label",classes:[c,...i,...d]},components:[Fs(s.providers.translate(t.label))]},p=ye(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[g,...p],behaviours:et([Ri.self(),fn.config({}),qB(k.none()),Lt.config({mode:"acyclic"})])}},xA=wt("toolbar.button.execute"),RH=t=>hl((s,c)=>{kl(t,s)(i=>{Ft(s,xA,{buttonApi:i}),t.onAction(i)})}),F1=wt("common-button-display-events"),AE={[Xa()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[vi()]:["toolbar-button-events",F1],[gr()]:["focusing","alloy.base.behaviour",F1]},EA=t=>an(t.element,"width",ts(t.element,"width")),TA=(t,s,c)=>Ju(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),kA=(t,s)=>TA(t,s,[]),Lh=(t,s)=>TA(t,s,[fn.config({})]),c5=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Fs(c.translate(t))],behaviours:et([fn.config({})])}),Al=wt("update-menu-text"),Ih=wt("update-menu-icon"),_A=(t,s,c)=>{const i=Vt(j),d=t.text.map(P=>po(c5(P,s,c.providers))),g=t.icon.map(P=>po(Lh(P,c.providers.icons))),p=(P,L)=>{const U=pt.getValue(P);return Kt.focus(U),Ft(U,"keydown",{raw:L.event.raw}),ou.close(U),k.some(!0)},C=t.role.fold(()=>({}),P=>({role:P})),S=t.tooltip.fold(()=>({}),P=>{const L=c.providers.translate(P);return{title:L,"aria-label":L}}),T=Ju("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),A=wt("common-button-display-events");return po(ou.sketch({...t.uid?{uid:t.uid}:{},...C,dom:{tag:"button",classes:[s,`${s}--select`].concat(ye(t.classes,P=>`${s}--${P}`)),attributes:{...S}},components:ev([g.map(P=>P.asSpec()),d.map(P=>P.asSpec()),k.some(T)]),matchWidth:!0,useMinWidth:!0,onOpen:(P,L,U)=>{t.searchable&&B8(U)},dropdownBehaviours:et([...t.dropdownBehaviours,br.button(()=>t.disabled||c.providers.isDisabled()),Br(),gC.config({}),fn.config({}),vn("dropdown-events",[Ah(t,i),Qm(t,i)]),vn(A,[No((P,L)=>EA(P))]),vn("menubutton-update-display-text",[Pe(Al,(P,L)=>{d.bind(U=>U.getOpt(P)).each(U=>{fn.set(U,[Fs(c.providers.translate(L.event.text))])})}),Pe(Ih,(P,L)=>{g.bind(U=>U.getOpt(P)).each(U=>{fn.set(U,[Lh(L.event.icon,c.providers.icons)])})})])]),eventOrder:yo(AE,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[vi()]:["toolbar-button-events","dropdown-events",A]}),sandboxBehaviours:et([Lt.config({mode:"special",onLeft:p,onRight:p}),vn("dropdown-sandbox-events",[Pe(wN,(P,L)=>{O8(P),L.stop()}),Pe(xN,(P,L)=>{D8(P,L),L.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...Gb(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:H3,onCollapseMenu:(P,L,U)=>{so.getHighlighted(U).each(J=>{H3(P,U,J)})},onDehighlightItem:M8}},getAnchorOverrides:()=>({maxHeightFunction:(P,L)=>{ow()(P,L-10)}}),fetch:P=>Xc.nu(Xt(t.fetch,P))})).asSpec()},NH=t=>nt(t),a5=t=>t.type==="separator",MH=t=>Gn(t,"getSubmenuItems"),i5={type:"separator"},BH=(t,s)=>{const c=no(t,(i,d)=>NH(d)?d===""?i:d==="|"?i.length>0&&!a5(i[i.length-1])?i.concat([i5]):i:Gn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return c.length>0&&a5(c[c.length-1])&&c.pop(),c},l5=(t,s)=>{const c=t.getSubmenuItems(),i=u5(c,s),d=yo(i.menus,{[t.value]:i.items}),g=yo(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},PH=t=>{const s=dt(t,"value").getOrThunk(()=>wt("generated-menu-item"));return yo({value:s},t)},u5=(t,s)=>{const c=BH(nt(t)?t.split(" "):t,s);return lo(c,(i,d)=>{if(MH(d)){const g=PH(d),p=l5(g,s);return{menus:yo(i.menus,p.menus),items:[p.item,...i.items],expansions:yo(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},$H=t=>t.search.fold(()=>({searchMode:"no-search"}),,FH=t=>t.search.fold(()=>({searchMode:"no-search"}),,hv=(t,s,c,i)=>{const d=wt("primary-menu"),g=u5(t,c.shared.providers.menuItems());if(g.items.length===0)return k.none();const p=$H(i),C=qM(d,g.items,s,c,i.isHorizontalMenu,p),S=FH(i),T=Fo(g.menus,(N,P)=>qM(P,N,s,c,!1,S)),A=yo(T,Ta(d,C));return k.from(kh.tieredData(d,A,g.expansions))},AA=d5="data-value",m5=(t,s,c,i)=>ye(c,d=>AA(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{pt.setValue(t,d.value),Ft(t,Oi,{name:s}),Kt.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>m5(t,s,d.items,i)}),OA=(t,s)=>vs(t,c=>AA(c)?Gt(c.value===s,c):OA(c.items,s)),DA=(t,s,c)=>{const i=s.shared.providers,d=c.bind(S=>OA(t.items,S)).orThunk(,g=t.label.map(S=>su(S,i)),p=bo.parts.field({dom:{},factory:{sketch:S=>_A({uid:S.uid,text:d.map(T=>T.text),icon:k.none(),tooltip:t.label,role:k.none(),fetch:(T,A)=>{const N=m5(T,t.name,t.items,pt.getValue(T));A(hv(N,Yd.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:re(j),getApi:re({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[os.config({}),$h(d.map(T=>T.value),T=>Qo(T.element,d5),(T,A)=>{OA(t.items,A).each(N=>{ht(T.element,d5,N.value),Ft(T,Al,{text:N.text})})})]},"tox-listbox",s.shared)}}),C={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return bo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:De([g.toArray(),[C]]),fieldBehaviours:et([Zt.config({disabled:re(!t.enabled),onDisabled:S=>{bo.getField(S).each(Zt.disable)},onEnabled:S=>{bo.getField(S).each(Zt.enable)}})])})},LH=(t,s)=>({dom:{tag:"div",classes:t.classes},components:ye(t.items,s.shared.interpreter)}),IH=(t,s)=>{const c=ye(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Ta("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:er(t.selectBehaviours,[Kt.config({}),pt.config({store:{mode:"manual",getValue:d=>Iu(d.element),setValue:(d,g)=>{const p=ks(t.options);Re(t.options,S=>S.value===g).isSome()?Ig(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(S=>Ig(d.element,S.value))},...i}})])}},HH=si({name:"HtmlSelect",configFields:[Le("options"),pr("selectBehaviours",[Kt,pt]),ge("selectClasses",[]),ge("selectAttributes",{}),mo("data")],factory:IH}),xC=(t,s,c)=>{const i=ye(t.items,,d=t.label.map(S=>su(S,s)),g=bo.parts.field({dom:{},...c.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:i,factory:HH,selectBehaviours:et([Zt.config({disabled:()=>!t.enabled||s.isDisabled()}),os.config({}),vn("selectbox-change",[Pe(Tg(),(S,T)=>{Ft(S,Oi,{name:t.name})})])])}),p=t.size>1?k.none():k.some(Ju("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:De([[g],p.toArray()])};return bo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:De([d.toArray(),[C]]),fieldBehaviours:et([Zt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:S=>{bo.getField(S).each(Zt.disable)},onEnabled:S=>{bo.getField(S).each(Zt.enable)}}),Br()])})},RA=re([ge("field1Name","field1"),ge("field2Name","field2"),jl("onLockedChange"),Rm(["lockClass"]),ge("locked",!1),el.field("coupledFieldBehaviours",[Pn,pt])]),VH=(t,s,c)=>Mo(t,s,c).bind(Pn.getCurrent),f5=(t,s)=>$c({factory:bo,name:t,overrides:c=>({fieldBehaviours:et([vn("coupled-input-behaviour",[Pe(Of(),i=>{VH(i,c,s).each(d=>{Mo(i,c,"lock").each(g=>{En.isOn(g)&&c.onLockedChange(i,d,g)})})})])])})}),NA=re([f5("field1","field2"),f5("field2","field1"),$c({factory:sc,schema:[Le("dom")],name:"lock",overrides:t=>({buttonBehaviours:et([En.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),zH=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:el.augment(t.coupledFieldBehaviours,[Pn.config({find:k.some}),pt.config({store:{mode:"manual",getValue:d=>{const g=Yf(d,t,["field1","field2"]);return{[t.field1Name]:pt.getValue(g.field1()),[t.field2Name]:pt.getValue(g.field2())}},setValue:(d,g)=>{const p=Yf(d,t,["field1","field2"]);$r(g,t.field1Name)&&pt.setValue(p.field1(),g[t.field1Name]),$r(g,t.field2Name)&&pt.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Mo(d,t,"field1"),getField2:d=>Mo(d,t,"field2"),getLock:d=>Mo(d,t,"lock")}}),Ni=Fc({name:"FormCoupledInputs",configFields:RA(),partFields:NA(),factory:zH,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),g5=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=let i=t.value.toFixed(c(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},MA=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const i=parseFloat(c[1]),d=c[2];return bn.value({value:i,unit:d})}else return bn.error(t)},h5=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Gn(c,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?c[t.unit]===c[s]?k.some(t.value):k.some(t.value/c[t.unit]*c[s]):k.none()},OE=t=>k.none(),p5=(t,s)=>c=>h5(c,s).map(,UH=(t,s)=>{const c=MA(t).toOptional(),i=MA(s).toOptional();return ta(c,i,(d,g)=>h5(d,g.unit).map(p=>g.value/p).map(p=>p5(p,g.unit)).getOr(OE)).getOr(OE)},b5=(t,s)=>{let c=OE;const i=wt("ratio-event"),d=N=>Ju(N,{tag:"span",classes:["tox-icon","tox-lock-icon__"+N]},s.icons),g=Ni.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:et([Zt.config({disabled:()=>!t.enabled||s.isDisabled()}),Br(),os.config({})])}),p=N=>({dom:{tag:"div",classes:["tox-form__group"]},components:N}),C=N=>bo.parts.field({factory:O1,inputClasses:["tox-textfield"],inputBehaviours:et([Zt.config({disabled:()=>!t.enabled||s.isDisabled()}),Br(),os.config({}),vn("size-input-events",[Pe(Ya(),(P,L)=>{Ft(P,i,{isField1:N})}),Pe(Tg(),(P,L)=>{Ft(P,Oi,{name:t.name})})])]),selectOnFocus:!1}),S=N=>({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(N))]}),T=Ni.parts.field1(p([bo.parts.label(S("Width")),C(!0)])),A=Ni.parts.field2(p([bo.parts.label(S("Height")),C(!1)]));return Ni.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[T,A,p([S(Uy),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(N,P,L)=>{MA(pt.getValue(N)).each(U=>{c(U).each(J=>{pt.setValue(P,g5(J))})})},coupledFieldBehaviours:et([Zt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:N=>{Ni.getField1(N).bind(bo.getField).each(Zt.disable),Ni.getField2(N).bind(bo.getField).each(Zt.disable),Ni.getLock(N).each(Zt.disable)},onEnabled:N=>{Ni.getField1(N).bind(bo.getField).each(Zt.enable),Ni.getField2(N).bind(bo.getField).each(Zt.enable),Ni.getLock(N).each(Zt.enable)}}),Br(),vn("size-input-events2",[Pe(i,(N,P)=>{const L=P.event.isField1,U=L?Ni.getField1(N):Ni.getField2(N),J=L?Ni.getField2(N):Ni.getField1(N),he=U.map(pt.getValue).getOr(""),ce=J.map(pt.getValue).getOr("");c=UH(he,ce)})])])})},v5=(t,s,c)=>{const i=Ic.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(t.label))]}),d=Ic.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Ic.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ic.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:re(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:et([Ri.self(),Kt.config({})]),onChoose:(p,C,S)=>{Ft(p,Oi,{name:t.name,value:S})}})},WH=(t,s)=>{const c=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ye(C,c)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:ye(C,d)}),p=C=>({dom:{tag:"tbody"},components:ye(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:et([os.config({}),Kt.config({})])}},BA=(t,s)=>{const c=t.label.map(L=>su(L,s)),i=[Zt.config({disabled:()=>t.disabled||s.isDisabled()}),Br(),Lt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:L=>(Fn(L,fC),k.some(!0))}),vn("textfield-change",[Pe(Of(),(L,U)=>{Ft(L,Oi,{name:t.name})}),Pe(Rf(),(L,U)=>{Ft(L,Oi,{name:t.name})})]),os.config({})],d=t.validation.map(L=>_l.config({getRoot:U=>ra(U.element),invalidClass:"tox-invalid",validator:{validate:U=>{const J=pt.getValue(U),he=L.validator(J);return Xc.pure(he===!0?bn.value(J):bn.error(he))},validateOnLoad:L.validateOnLoad}})).toArray(),g=t.placeholder.fold(re({}),L=>({placeholder:s.translate(L)})),p=t.inputMode.fold(re({}),L=>({inputmode:L})),C={...g,...p},S=bo.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(L=>({data:L})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:et(De([i,d])),selectOnFocus:!1,factory:O1}),T=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,N=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),P=[Zt.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:L=>{bo.getField(L).each(Zt.disable)},onEnabled:L=>{bo.getField(L).each(Zt.enable)}}),Br()];return dC(c,T,N,P)},y5=(t,s,c)=>BA({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:c},s),C5=(t,s,c)=>BA({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:c},s),EC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),dg=t=>t.dimension.property,L1=(t,s)=>t.dimension.getDimension(s),TC=(t,s)=>{const c=EC(t,s);yi(c,[s.shrinkingClass,s.growingClass])},PA=(t,s)=>{fs(t.element,s.openClass),Ws(t.element,s.closedClass),an(t.element,dg(s),"0px"),X(t.element)},DE=(t,s)=>{fs(t.element,s.closedClass),Ws(t.element,s.openClass),V(t.element,dg(s))},S5=(t,s,c,i)=>{c.setCollapsed(),an(t.element,dg(s),L1(s,t.element)),TC(t,s),PA(t,s),s.onStartShrink(t),s.onShrunk(t)},ZH=(t,s,c,i)=>{const d=i.getOrThunk(;c.setCollapsed(),an(t.element,dg(s),d),X(t.element);const g=EC(t,s);fs(g,s.growingClass),Ws(g,s.shrinkingClass),PA(t,s),s.onStartShrink(t)},RE=(t,s,c)=>{const i=L1(s,t.element);(i==="0px"?S5:ZH)(t,s,c,k.some(i))},w5=(t,s,c)=>{const i=EC(t,s),d=hr(i,s.shrinkingClass),g=L1(s,t.element);DE(t,s);const p=L1(s,t.element);(d?()=>{an(t.element,dg(s),g),X(t.element)}:()=>{PA(t,s)})(),fs(i,s.shrinkingClass),Ws(i,s.growingClass),DE(t,s),an(t.element,dg(s),p),c.setExpanded(),s.onStartGrow(t)},jH=(t,s,c)=>{if(c.isExpanded()){V(t.element,dg(s));const i=L1(s,t.element);an(t.element,dg(s),i)}},GH=(t,s,c)=>{c.isExpanded()||w5(t,s,c)},x5=(t,s,c)=>{c.isExpanded()&&RE(t,s,c)},qH=(t,s,c)=>{c.isExpanded()&&S5(t,s,c)},E5=(t,s,c)=>c.isExpanded(),KH=(t,s,c)=>c.isCollapsed(),$A=(t,s,c)=>{const i=EC(t,s);return hr(i,s.growingClass)===!0},T5=(t,s,c)=>{const i=EC(t,s);return hr(i,s.shrinkingClass)===!0};var k5=Object.freeze({__proto__:null,refresh:jH,grow:GH,shrink:x5,immediateShrink:qH,hasGrown:E5,hasShrunk:KH,isGrowing:$A,isShrinking:T5,isTransitioning:(t,s,c)=>$A(t,s)||T5(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?RE:w5)(t,s,c)},disableTransitions:TC,immediateGrow:(t,s,c)=>{c.isExpanded()||(DE(t,s),an(t.element,dg(s),L1(s,t.element)),TC(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),_5=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const i=s.expanded;return Qa(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Ta(s.dimension.property,"0px")})},events:(t,s)=>Lo([$u(Df(),(c,i)=>{i.event.raw.propertyName===t.dimension.property&&(TC(c,t),s.isExpanded()&&V(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),YH=[Le("closedClass"),Le("openClass"),Le("shrinkingClass"),Le("growingClass"),mo("getAnimationRoot"),Un("onShrunk"),Un("onStartShrink"),Un("onGrown"),Un("onStartGrow"),ge("expanded",!1),ja("dimension",zn("property",{width:[Co("property","width"),Co("getDimension",t=>Go(t)+"px")],height:[Co("property","height"),Co("getDimension",t=>mt(t)+"px")]}))],XH=Object.freeze({__proto__:null,init:t=>{const s=Vt(t.expanded),c=return Ja({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Xt(s.set,!1),setExpanded:Xt(s.set,!0),readState:c})}});const Mi=Rr({fields:YH,name:"sliding",active:_5,apis:k5,state:XH}),A5=t=>({isEnabled:()=>!Zt.isDisabled(t),setEnabled:s=>Zt.set(t,!s),setActive:s=>{const c=t.element;s?(Ws(c,"tox-tbtn--enabled"),ht(c,"aria-pressed",!0)):(fs(c,"tox-tbtn--enabled"),es(c,"aria-pressed"))},isActive:()=>hr(t.element,"tox-tbtn--enabled"),setText:s=>{Ft(t,Al,{text:s})},setIcon:s=>Ft(t,Ih,{icon:s})}),kC=(t,s,c,i,d=!0)=>_A({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(g,p)=>{const C={pattern:t.search.isSome()?P8(g):""};t.fetch(S=>{p(hv(S,Yd.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},C,A5(g))},onSetup:t.onSetup,getApi:A5,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[os.config({})]:[]]},s,c.shared),JH=(t,s,c)=>{const i=g=>p=>{const C=!p.isActive();p.setActive(C),g.storage.set(C),c.shared.getSink().each(S=>{s().getOpt(S).each(T=>{Aa(T.element),Ft(T,nf,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(ye(t,p=>{const C=p.text.fold(()=>({}),S=>({text:S}));return{type:p.type,active:!1,...C,onAction:i(p),onSetup:d(p)}}))}},FA=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Fs(t)]}),LA=wt("leaf-label-event-id"),NE=({leaf:t,onLeafAction:s,visible:c,treeId:i,selectedId:d,backstage:g})=>{const p=t.menu.map(S=>kC(S,"tox-mbtn",g,k.none(),c)),C=[FA(t.title)];return p.each(S=>C.push(S)),sc.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[gl()]:[LA,"keying"]},buttonBehaviours:et([...c?[os.config({})]:[],En.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),_a.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,T)=>{(T.value===t.id?En.on:En.off)(S)}}}}),vn(LA,[No((S,T)=>{d.each(A=>{(A===t.id?En.on:En.off)(S)})}),Pe(gl(),(S,T)=>{const A=T.event.raw.code==="ArrowLeft",N=T.event.raw.code==="ArrowRight";A?(ti(S.element,".tox-tree--directory").each(P=>{S.getSystem().getByDom(P).each(L=>{Z0(P,".tox-tree--directory__label").each(U=>{L.getSystem().getByDom(U).each(Kt.focus)})})}),T.stop()):N&&T.stop()})])])})},ME=(t,s,c)=>Ju(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:c},s),QH=(t,s)=>ME(t,s,[]),O5=wt("directory-label-event-id"),e9=({directory:t,visible:s,noChildren:c,backstage:i})=>{const d=t.menu.map(C=>kC(C,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[QH("chevron-right",i.shared.providers.icons)]},FA(t.title)];d.each(C=>{g.push(C)});const p=C=>{ti(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(T=>{const A=!En.isOn(T);En.toggle(T),Ft(C,"expand-tree-node",{expanded:A,node:t.id})})})};return sc.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[gl()]:[O5,"keying"]},buttonBehaviours:et([...s?[os.config({})]:[],vn(O5,[Pe(gl(),(C,S)=>{const T=S.event.raw.code==="ArrowRight",A=S.event.raw.code==="ArrowLeft";T&&c&&S.stop(),(T||A)&&ti(C.element,".tox-tree--directory").each(N=>{C.getSystem().getByDom(N).each(P=>{!En.isOn(P)&&T||En.isOn(P)&&A?(p(C),S.stop()):A&&!En.isOn(P)&&(ti(P.element,".tox-tree--directory").each(L=>{Z0(L,".tox-tree--directory__label").each(U=>{P.getSystem().getByDom(U).each(Kt.focus)})}),S.stop())})})})])])})},t9=({children:t,onLeafAction:s,visible:c,treeId:i,expandedIds:d,selectedId:g,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?NE({leaf:C,selectedId:g,onLeafAction:s,visible:c,treeId:i,backstage:p}):IA({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:p})),behaviours:et([Mi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),fn.config({})])}),D5=wt("directory-event-id"),IA=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:d,expandedIds:g,selectedId:p})=>{const{children:C}=t,S=Vt(g),T=N=>C.map(P=>P.type==="leaf"?NE({leaf:P,selectedId:p,onLeafAction:s,visible:N,treeId:i,backstage:d}):IA({directory:P,expandedIds:S.get(),selectedId:p,onLeafAction:s,labelTabstopping:N,treeId:i,backstage:d})),A=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[e9({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),t9({children:C,expandedIds:g,selectedId:p,onLeafAction:s,visible:A,treeId:i,backstage:d})],behaviours:et([vn(D5,[No((N,P)=>{En.set(N,A)}),Pe("expand-tree-node",(N,P)=>{const{expanded:L,node:U}=P.event;S.set(L?[...S.get(),U]:S.get().filter(J=>J!==U))})]),En.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(N,P)=>{const L=N.components()[1],U=T(P);P?Mi.grow(L):Mi.shrink(L),fn.set(L,U)}})])}},n9=wt("tree-event-id"),o9=(t,s)=>{const c=t.onLeafAction.getOr(j),i=t.onToggleExpand.getOr(j),d=t.defaultExpandedIds,g=Vt(d),p=Vt(t.defaultSelectedId),C=wt("tree-id"),S=(T,A)=>t.items.map(N=>N.type==="leaf"?NE({leaf:N,selectedId:T,onLeafAction:c,visible:!0,treeId:C,backstage:s}):IA({directory:N,selectedId:T,onLeafAction:c,expandedIds:A,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(p.get(),g.get()),behaviours:et([Lt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),vn(n9,[Pe("expand-tree-node",(T,A)=>{const{expanded:N,node:P}=A.event;g.set(N?[...g.get(),P]:g.get().filter(L=>L!==P)),i(g.get(),{expanded:N,node:P})})]),_a.config({channels:{[`update-active-item-${C}`]:{onReceive:(T,A)=>{p.set(k.some(A.value)),fn.set(T,S(k.some(A.value),g.get()))}}}}),fn.config({})])}};var R5=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Lo([Pe(t.event,i),Fu(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Pe(d,()=>s.cancel())]).getOr([])))}});const N5=t=>{const s=Vt(null);return Ja({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var M5=Object.freeze({__proto__:null,throttle:N5,init:t=>t.stream.streams.state(t)});const r9=(t,s)=>{const c=t.stream,i=EE(t.onStream,c.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),c.stopEvent&&g.stop()}};var c9=[ja("stream",zn("mode",{throttle:[Le("delay"),ge("stopEvent",!0),Co("streams",{setup:r9,state:N5})]})),ge("event","input"),mo("cancelEvent"),jl("onStream")];const en=Rr({fields:c9,name:"streaming",active:R5,state:M5}),Hh=(t,s,c)=>{const i=pt.getValue(c);pt.setValue(s,i),VA(s)},HA=(t,s)=>{const c=t.element,i=Iu(c),d=c.dom;Qo(c,"type")!=="number"&&s(d,i)},VA=t=>{HA(t,},B5=(t,s)=>{HA(t,},P5=(t,s,c)=>{if(t.selectsOver){const i=pt.getValue(s),d=t.getDisplayText(i),g=pt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{Hh(t,s,c),B5(s,d.length)}):k.none()}else return k.none()},BE=re("alloy.typeahead.itemexecute"),_j=(t,s,c,i)=>{const d=(N,P,L)=>{t.previewing.set(!1);const U=Gs.getCoupled(N,"sandbox");if(Ln.isOpen(U))Pn.getCurrent(U).each(J=>{so.getHighlighted(J).fold(()=>{L(J)},()=>{qv(U,J.element,"keydown",P)})});else{const J=he=>{Pn.getCurrent(he).each(L)};nE(t,p(N),N,U,i,J,Ma.HighlightMenuAndItem).get(j)}},g=H4(t),p=N=>P=>P.map(L=>{const U=du(L.menus),J=le(U,ce=>Kn(ce.items,oe=>oe.type==="item"));return pt.getState(N).update(ye(J,ce=>ce.data)),L}),C=N=>Pn.getCurrent(N),S="typeaheadevents",T=[Kt.config({}),pt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:N=>Iu(N.element),getFallbackEntry:setValue:(N,P)=>{Ig(N.element,t.model.getDisplayText(P))},...t.initialData.map(N=>Ta("initialValue",N)).getOr({})}}),en.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(N,P)=>{const L=Gs.getCoupled(N,"sandbox");if(Kt.isFocused(N)&&Iu(N.element).length>=t.minChars){const J=C(L).bind(ce=>so.getHighlighted(ce).map(pt.getValue));t.previewing.set(!0);const he=ce=>{C(L).each(oe=>{J.fold(()=>{t.model.selectsOver&&so.highlightFirst(oe)},fe=>{so.highlightBy(oe,je=>pt.getValue(je).value===fe.value),so.getHighlighted(oe).orThunk(()=>(so.highlightFirst(oe),k.none()))})})};nE(t,p(N),N,L,i,he,Ma.HighlightJustMenu).get(j)}},cancelEvent:x0()}),Lt.config({mode:"special",onDown:(N,P)=>(d(N,P,so.highlightFirst),k.some(!0)),onEscape:N=>{const P=Gs.getCoupled(N,"sandbox");return Ln.isOpen(P)?(Ln.close(P),k.some(!0)):k.none()},onUp:(N,P)=>(d(N,P,so.highlightLast),k.some(!0)),onEnter:N=>{const P=Gs.getCoupled(N,"sandbox"),L=Ln.isOpen(P);if(L&&!t.previewing.get())return C(P).bind(U=>so.getHighlighted(U)).map(U=>(Ft(N,BE(),{item:U}),!0));{const U=pt.getValue(N);return Fn(N,x0()),t.onExecute(P,N,U),L&&Ln.close(P),k.some(!0)}}}),En.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Gs.config({others:{sandbox:N=>L3(t,N,{onOpen:()=>En.on(N),onClose:()=>{t.lazyTypeaheadComp.get().each(P=>es(P.element,"aria-activedescendant")),En.off(N)}})}}),vn(S,[No(,Fu(N=>{t.lazyTypeaheadComp.set(k.none())}),hl(N=>{const P=j;F3(t,p(N),N,i,P,Ma.HighlightMenuAndItem).get(j)}),Pe(BE(),(N,P)=>{const L=Gs.getCoupled(N,"sandbox");Hh(t.model,N,P.event.item),Fn(N,x0()),t.onItemExecute(N,L,P.event.item,pt.getValue(N)),Ln.close(L),VA(N)})].concat(t.dismissOnBlur?[Pe(Sm(),N=>{const P=Gs.getCoupled(N,"sandbox");vl(P.element).isNone()&&Ln.close(P)})]:[]))],A={[xm()]:[pt.name(),en.name(),S],...t.eventOrder};return{uid:t.uid,dom:Ox(yo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...er(t.typeaheadBehaviours,T)},eventOrder:A}},_C=re([mo("lazySink"),Le("fetch"),ge("minChars",5),ge("responseTime",1e3),Un("onOpen"),ge("getHotspot",k.some),ge("getAnchorOverrides",re({})),ge("layouts",k.none()),ge("eventOrder",{}),Nu("model",{},[ge("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ge("selectsOver",!0),ge("populateFromBrowse",!0)]),Un("onSetValue"),oi("onExecute"),Un("onItemExecute"),ge("inputClasses",[]),ge("inputAttributes",{}),ge("inputStyles",{}),ge("matchWidth",!0),ge("useMinWidth",!1),ge("dismissOnBlur",!0),Rm(["openClass"]),mo("initialData"),pr("typeaheadBehaviours",[Kt,pt,en,Lt,En,Gs]),zs("lazyTypeaheadComp",()=>Vt(k.none)),zs("previewing",()=>Vt(!0))].concat(K2()).concat(I3())),a9=re([Sl({schema:[Np()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{P5(t.model,d,i).fold(()=>{t.model.selectsOver?(so.dehighlight(c,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Hh(t.model,d,i),Er(i.element,"id").each(g=>ht(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(i=>(Ft(i,BE(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&Hh(t.model,i,c)})}})})]),$5=Fc({name:"Typeahead",configFields:_C(),partFields:a9(),factory:_j}),rd=t=>({...t,toCached:()=>rd(t.toCached()),bindFuture:S=>rd(t.bind(T=>T.fold(A=>Xc.pure(bn.error(A)),A=>S(A)))),bindResult:S=>rd(t.map(T=>T.bind(S))),mapResult:S=>rd(t.map(T=>T.map(S))),mapError:S=>rd(t.map(T=>T.mapError(S))),foldResult:withTimeout:(S,T)=>rd(Xc.nu(A=>{let N=!1;const P=setTimeout(()=>{N=!0,A(bn.error(T()))},S);t.get(}))}),F5=t=>rd(Xc.nu(t)),L5=t=>rd(Xc.pure(bn.value(t))),u9={nu:F5,wrap:rd,pure:L5,value:L5,error:t=>rd(Xc.pure(bn.error(t))),fromResult:t=>rd(Xc.pure(t)),fromFuture:fromPromise:t=>F5(s=>{t.then(c=>{s(bn.value(c))},})},PE=(t,s,c=[],i,d,g)=>{const p=s.fold(()=>({}),T=>({action:T})),C={buttonBehaviours:et([br.button(()=>!t.enabled||g.isDisabled()),Br(),os.config({}),vn("button press",[Xv("click"),Xv("mousedown")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},S=yo(C,{dom:i});return yo(S,{components:d})},d9=(t,s,c,i=[])=>{const d=t.tooltip.map(S=>({"aria-label":c.translate(S),title:c.translate(S)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(S=>kA(S,c.icons)),C=ev([p]);return PE(t,s,i,g,C,c)},zA=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},UA=(t,s,c,i=[],d=[])=>{const g=c.translate(t.text),p=t.icon.map(P=>kA(P,c.icons)),C=[p.getOrThunk(()=>Fs(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),N={tag:"button",classes:[...zA(S),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return PE(t,s,i,N,C,c)},H5=(t,s,c,i=[],d=[])=>{const g=UA(t,k.some(s),c,i,d);return sc.sketch(g)},V5=(t,s)=>c=>{s==="custom"?Ft(c,nf,{name:t,value:{}}):s==="submit"?Fn(c,fC):s==="cancel"&&Fn(c,Mh)},m9=(t,s)=>s==="menu",f9=(t,s)=>s==="custom"||s==="cancel"||s==="submit",g9=(t,s)=>s==="togglebutton",h9=(t,s)=>{var c,i;const d=t.icon.map(oe=>Lh(oe,s.icons)).map(po),g=oe=>{Ft(oe,nf,{name:t.name,value:{setIcon:fe=>{d.map(je=>je.getOpt(oe).each(Be=>{fn.set(Be,[Lh(fe,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),C={...t,name:(c=t.name)!==null&&c!==void 0?c:"",primary:p==="primary",tooltip:k.from(t.tooltip),enabled:(i=t.enabled)!==null&&i!==void 0?i:!1,borderless:!1},S=C.tooltip.map(oe=>({"aria-label":s.translate(oe),title:s.translate(oe)})).getOr({}),T=zA(p!=null?p:"secondary"),A=t.icon.isSome()&&t.text.isSome(),N={tag:"button",classes:[...T.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...A?["tox-button--icon-and-text"]:[]],attributes:S},P=[],L=s.translate(t.text.getOr("")),U=Fs(L),he=[...ev([d.map(oe=>oe.asSpec())]),...t.text.isSome()?[U]:[]],ce=PE(C,k.some(g),P,N,he,s);return sc.sketch(ce)},$E=(t,s,c)=>{if(m9(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:k.none(),onSetup:C=>(C.setEnabled(t.enabled),j),fetch:JH(d.items,i,c)},p=po(kC(g,"tox-tbtn",c,k.none()));return p.asSpec()}else if(f9(t,s)){const i=V5(t.name,s),d={...t,borderless:!1};return H5(d,i,c.shared.providers,[])}else{if(g9(t,s))return h9(t,c.shared.providers);throw new Error("Unknown footer button type")}},p9=(t,s)=>{const c=V5(t.name,"custom");return s7(k.none(),bo.parts.field({factory:sc,...UA(t,k.some(c),s,[xE(""),Ri.self()])}))},b9={type:"separator"},v9=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:j}),WA=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:j}),z5=t=>ye(t,v9),y9=U5=(t,s)=>z5(y9(t,s)),C9=t=>U5("header",t.targets),S9=w9=t=>k.from(t.anchorTop).map(s=>WA("<top>",s)).toArray(),x9=t=>k.from(t.anchorBottom).map(s=>WA("<bottom>",s)).toArray(),W5=t=>ye(t,s=>WA(s,s)),E9=t=>no(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(b9,c),[]),FE=(t,s)=>{const c=t.toLowerCase();return Kn(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return Xs(g.toLowerCase(),c)||Xs(p.toLowerCase(),c)})},T9=(t,s,c)=>{var i,d;const g=pt.getValue(s),p=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],S=>{const T=FE(p,W5(c.getHistory(t)));return t==="file"?E9([T,FE(p,C9(S)),FE(p,De([w9(S),S9(S),x9(S)]))]):T})},ZA=wt("aria-invalid"),Z5=(t,s,c,i)=>{const d=s.shared.providers,g=oe=>{const fe=pt.getValue(oe);c.addToHistory(fe.value,t.filetype)},p={...i.map(oe=>({initialData:oe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":ZA,type:"url"},minChars:0,responseTime:0,fetch:oe=>{const fe=T9(t.filetype,oe,c),je=hv(fe,Yd.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return Xc.pure(je)},getHotspot:oe=>U.getOpt(oe),onSetValue:(oe,fe)=>{oe.hasConfigured(_l)&&_l.run(oe).get(j)},typeaheadBehaviours:et([...c.getValidationHandler().map(oe=>_l.config({getRoot:fe=>ra(fe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(fe,je)=>{A.getOpt(fe).each(Be=>{ht(Be.element,"title",d.translate(je))})}},validator:{validate:fe=>{const je=pt.getValue(fe);return u9.nu(Be=>{oe({type:t.filetype,url:je.value},Ae=>{if(Ae.status==="invalid"){const Je=bn.error(Ae.message);Be(Je)}else{const Je=bn.value(Ae.message);Be(Je)}})})},validateOnLoad:!1}})).toArray(),Zt.config({disabled:()=>!t.enabled||d.isDisabled()}),os.config({}),vn("urlinput-events",[Pe(Of(),oe=>{const fe=Iu(oe.element),je=fe.trim();je!==fe&&Ig(oe.element,je),t.filetype==="file"&&Ft(oe,Oi,{name:t.name})}),Pe(Tg(),oe=>{Ft(oe,Oi,{name:t.name}),g(oe)}),Pe(Rf(),oe=>{Ft(oe,Oi,{name:t.name}),g(oe)})])]),eventOrder:{[Of()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:oe=>oe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Gb(!1,1,"normal")},onExecute:(oe,fe,je)=>{Ft(fe,fC,{})},onItemExecute:(oe,fe,je,Be)=>{g(oe),Ft(oe,Oi,{name:t.name})}},C=bo.parts.field({...p,factory:$5}),S=t.label.map(oe=>su(oe,d)),A=po(((oe,fe,je=oe,Be=oe)=>Ju(je,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+oe],attributes:{title:d.translate(Be),"aria-live":"polite",...fe.fold(()=>({}),Ae=>({id:Ae}))}},d.icons))("invalid",k.some(ZA),"warning")),N=po({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[A.asSpec()]}),P=c.getUrlPicker(t.filetype),L=wt("browser.url.event"),U=po({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,N.asSpec()],behaviours:et([Zt.config({disabled:()=>!t.enabled||d.isDisabled()})])}),J=po(H5({name:t.name,icon:k.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},oe=>Fn(oe,L),d,[],["tox-browse-url"])),he=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:De([[U.asSpec()],P.map(()=>J.asSpec()).toArray()])}),ce=oe=>{Pn.getCurrent(oe).each(fe=>{const je=pt.getValue(fe),Be={fieldname:t.name,...je};P.each(Ae=>{Ae(Be).get(Je=>{pt.setValue(fe,Je),Ft(oe,Oi,{name:t.name})})})})};return bo.sketch({dom:bj(),components:S.toArray().concat([he()]),fieldBehaviours:et([Zt.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:oe=>{bo.getField(oe).each(Zt.disable),J.getOpt(oe).each(Zt.disable)},onEnabled:oe=>{bo.getField(oe).each(Zt.enable),J.getOpt(oe).each(Zt.enable)}}),Br(),vn("url-input-events",[Pe(L,ce)])])})},jA=(t,s)=>{const c=f4(t.icon,s.icons);return Xd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[sc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:i=>Ft(i,nf,{name:"alert-banner",value:t.url}),buttonBehaviours:et([bx()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},k9=j5=t=>t.dom.checked,G5=(t,s,c)=>{const i=S=>(S.element.dom.click(),k.some(!0)),d=bo.parts.field({factory:{sketch:bt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:et([Ri.self(),Zt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:S=>{ra(S.element).each(T=>Ws(T,"tox-checkbox--disabled"))},onEnabled:S=>{ra(S.element).each(T=>fs(T,"tox-checkbox--disabled"))}}),os.config({}),Kt.config({}),pA(c,j5,k9),Lt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),vn("checkbox-events",[Pe(Tg(),(S,T)=>{Ft(S,Oi,{name:t.name})})])])}),g=bo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Fs(s.translate(t.label))],behaviours:et([gC.config({})])}),p=S=>Ju(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=po({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return bo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:et([Zt.config({disabled:()=>!t.enabled||s.isDisabled()}),Br()])})},_9=t=>t.presets==="presentation"?Xd.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Xd.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:et([os.config({}),Kt.config({})])}),Pr=t=>(s,c,i,d)=>dt(c,"name").fold(()=>t(c,d,k.none()),g=>s.field(g,t(c,d,dt(i,g)))),A9=t=>(s,c,i,d)=>{const g=yo(c,{source:"dynamic"});return Pr(t)(s,g,i,d)},O9={bar:Pr((t,s)=>J8(t,s.shared)),collection:Pr((t,s,c)=>c7(t,s.shared.providers,c)),alertbanner:Pr((t,s)=>jA(t,s.shared.providers)),input:Pr((t,s,c)=>y5(t,s.shared.providers,c)),textarea:Pr((t,s,c)=>C5(t,s.shared.providers,c)),label:Pr((t,s)=>r5(t,s.shared)),iframe:A9((t,s,c)=>_H(t,s.shared.providers,c)),button:Pr((t,s)=>p9(t,s.shared.providers)),checkbox:Pr((t,s,c)=>G5(t,s.shared.providers,c)),colorinput:Pr((t,s,c)=>m7(t,s.shared,s.colorinput,c)),colorpicker:Pr((t,s,c)=>bH(t,s.shared.providers,c)),dropzone:Pr((t,s,c)=>yH(t,s.shared.providers,c)),grid:Pr((t,s)=>JB(t,s.shared)),listbox:Pr((t,s,c)=>DA(t,s,c)),selectbox:Pr((t,s,c)=>xC(t,s.shared.providers,c)),sizeinput:Pr((t,s)=>b5(t,s.shared.providers)),slider:Pr((t,s,c)=>v5(t,s.shared.providers,c)),urlinput:Pr((t,s,c)=>Z5(t,s,s.urlinput,c)),customeditor:Pr(YB),htmlpanel:Pr(_9),imagepreview:Pr((t,s,c)=>DH(t,c)),table:Pr((t,s)=>WH(t,s.shared.providers)),tree:Pr((t,s)=>o9(t,s)),panel:Pr((t,s)=>LH(t,s))},em={field:(t,s)=>s,record:re([])},AC=(t,s,c,i)=>{const d=yo(i,{shared:{interpreter:g=>pv(t,g,c,d)}});return pv(t,s,c,d)},pv=(t,s,c,i)=>dt(O9,s.type).fold(()=>s,d=>d(t,s,c,i)),q5=(t,s,c)=>pv(em,t,s,c),cf="layout-inset",GA=t=>t.x,LE=(t,s)=>t.x+t.width/2-s.width/2,IE=(t,s)=>t.x+t.width-s.width,OC=t=>t.y,qA=(t,s)=>t.y+t.height-s.height,KA=(t,s)=>t.y+t.height/2-s.height/2,DC=(t,s,c)=>Ar(IE(t,s),qA(t,s),c.insetSouthwest(),zu(),"southwest",ns(t,{right:0,bottom:3}),cf),bv=(t,s,c)=>Ar(GA(t),qA(t,s),c.insetSoutheast(),K0(),"southeast",ns(t,{left:1,bottom:3}),cf),RC=(t,s,c)=>Ar(IE(t,s),OC(t),c.insetNorthwest(),py(),"northwest",ns(t,{right:0,top:2}),cf),NC=(t,s,c)=>Ar(GA(t),OC(t),c.insetNortheast(),Bp(),"northeast",ns(t,{left:1,top:2}),cf),ru=(t,s,c)=>Ar(LE(t,s),OC(t),c.insetNorth(),Md(),"north",ns(t,{top:2}),cf),MC=(t,s,c)=>Ar(LE(t,s),qA(t,s),c.insetSouth(),yk(),"south",ns(t,{bottom:3}),cf),K5=(t,s,c)=>Ar(IE(t,s),KA(t,s),c.insetEast(),Pp(),"east",ns(t,{right:0}),cf),YA=(t,s,c)=>Ar(GA(t),KA(t,s),c.insetWest(),Ce(),"west",ns(t,{left:1}),cf),Y5=t=>{switch(t){case"north":return ru;case"northeast":return NC;case"northwest":return RC;case"south":return MC;case"southeast":return bv;case"southwest":return DC;case"east":return K5;case"west":return YA}},X5=(t,s,c,i,d)=>YS(i).map(Y5).getOr(ru)(t,s,c,i,d),D9=t=>{switch(t){case"north":return MC;case"northeast":return bv;case"northwest":return DC;case"south":return ru;case"southeast":return NC;case"southwest":return RC;case"east":return YA;case"west":return K5}},R9=(t,s,c,i,d)=>YS(i).map(D9).getOr(ru)(t,s,c,i,d),BC={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},J5=(t,s,c)=>{const d={maxHeightFunction:Jg()},g=()=>({type:"node",root:qe(xe(t())),node:k.from(t()),bubble:Wu(12,12,BC),layouts:{onRtl:()=>[NC],onLtr:()=>[RC]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:Wu(-12,12,BC),layouts:{onRtl:()=>[Or,vc,Dr],onLtr:()=>[vc,Or,Dr]},overrides:d});return()=>c()?g():p()},tm=(t,s,c,i)=>{const g={maxHeightFunction:Jg()},p=()=>({type:"node",root:qe(xe(s())),node:k.from(s()),bubble:Wu(12,12,BC),layouts:{onRtl:()=>[ru],onLtr:()=>[ru]},overrides:g}),C=()=>t?{type:"node",root:qe(xe(s())),node:k.from(s()),bubble:Wu(0,-kn(s()),BC),layouts:{onRtl:()=>[jc],onLtr:()=>[jc]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Wu(0,0,BC),layouts:{onRtl:()=>[jc],onLtr:()=>[jc]},overrides:g};return()=>i()?p():C()},XA=(t,s,c)=>{const i=()=>({type:"node",root:qe(xe(t())),node:k.from(t()),layouts:{onRtl:()=>[ru],onLtr:()=>[ru]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Dr],onLtr:()=>[Dr]}});return()=>c()?i():d()},N9=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],p={firstCell:de.fromDom(d),lastCell:de.fromDom(g)};return k.some(p)}return k.some(nc.range(de.fromDom(c.startContainer),c.startOffset,de.fromDom(c.endContainer),c.endOffset))}}),M9=t=>s=>({type:"node",root:t(),node:s}),B9=(t,s,c,i)=>{const d=Zb(t),g=()=>de.fromDom(t.getBody()),p=()=>de.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:J5(p,s,C),inlineBottomDialog:tm(t.inline,p,c,C),banner:XA(p,s,C),cursor:N9(t,g),node:M9(g)}},P9=t=>(s,c)=>{$M(t)(s,c)},$9=t=>()=>DM(t),Q5=t=>s=>Xx(t,s),eP=t=>s=>OM(t,s),Oj=Dj=Jc=JA=t=>{const s=Vt(O4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},tP=t=>$r(t,"items"),PC=t=>$r(t,"format"),nP=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],F9=t=>Gn(t,"items"),L9=t=>Gn(t,"block"),I9=t=>Gn(t,"inline"),H9=t=>Gn(t,"selector"),oP=t=>no(t,(s,c)=>{if(F9(c)){const i=oP(c.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:c.title,items:i.formats}])}}else if(I9(c)||L9(c)||H9(c)){const d=`custom-${nt(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),V9=(t,s)=>{const c=oP(s),i=d=>{We(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(c.customFormats):t.on("init",,c.formats},sP=t=>XR(t).map(s=>{const c=V9(t,s);return JR(t)?nP.concat(c):c}).getOr(nP),rP=t=>{const s=Uo(t);return s.length===1&&Rn(s,"title")},$C=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),cP=(t,s,c,i)=>{const d=S=>$C(S,c,i),g=S=>{const T=C(S.items);return{...S,type:"submenu",getStyleItems:re(T)}},p=S=>{const T=nt(S.name)?S.name:wt(S.title),A=`custom-${T}`,N={...S,type:"formatter",format:A,isSelected:c(A),getStylePreview:i(A)};return t.formatter.register(T,N),N},C=S=>ye(S,T=>tP(T)?g(T):PC(T)?d(T):rP(T)?{...T,type:"separator"}:p(T));return C(s)},aP=t=>{const s=c=C=>()=>{const S=t.formatter.get(C);return S!==void 0?k.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):k.none()},i=Vt([]),d=Vt([]),g=Vt(!1);return t.on("PreInit",C=>{const S=sP(t),T=cP(t,S,s,c);i.set(T)}),t.on("addStyleModifications",C=>{const S=cP(t,C.items,s,c);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},z9=t=>to(t)&&t.nodeType===1,iP=ug.trim,lP=t=>s=>!!(z9(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),U9=lP("true"),uP=lP("false"),W9=Rj=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return U9(s)}return!1},Z9=(t,s)=>ye(Nr(de.fromDom(s),t),c=>c.dom),dP=j9=t=>t.id?t.id:wt("h"),mP=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,QA=t=>mP(t)&&gP(t),fP=gP=t=>Rj(t)&&!uP(t),hP=G9=t=>fP(t)?parseInt(t.nodeName.substr(1),10):0,q9=t=>{var s;const c=j9(t),i=return W9("header",(s=dP(t))!==null&&s!==void 0?s:"","#"+c,G9(t),i)},K9=t=>{const s=t.id||t.name,c=dP(t);return W9("anchor",c||"#"+s,"#"+s,0,j)},Y9=t=>ye(Kn(t,hP),q9),eO=pP=t=>Z9("h1,h2,h3,h4,h5,h6,a:not([href])",t),X9=t=>iP(t.title).length>0,J9={find:t=>{const s=pP(t);return Kn(Y9(s).concat(eO(s)),X9)}},bP="tinymce-url-history",tO=5,vP=HE=t=>Hn(t)&&t.length<=tO&&jt(t,vP),yP=t=>bs(t)&&Ys(t,s=>!HE(s)).isNone(),FC=()=>{const t=Dh.getItem(bP);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return{};throw c}return yP(s)?s:{}},Q9=t=>{if(!yP(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Dh.setItem(bP,JSON.stringify(t))},nO=t=>{const s=FC();return dt(s,t).getOr([])},LC=(t,s)=>{if(!vP(t))return;const c=FC(),i=dt(c,s).getOr([]),d=Kn(i,;c[s]=[t].concat(d).slice(0,tO),Q9(c)},oO=eV=t=>Fo(ug.makeMap(t,/[, ]/),oO),VE=t=>k.from(oN(t)),CP=t=>{const s=k.from(w4(t)).filter(oO).map(eV);return VE(t).fold(Xe,c=>s.fold(Oe,i=>Uo(i).length>0?i:!1))},SP=(t,s)=>{const c=CP(t);return Ds(c)?c?VE(t):k.none():c[s]?VE(t):k.none()},tV=(t,s)=>SP(t,s).map(c=>i=>Xc.nu(d=>{const g=(C,S)=>{if(!nt(C))throw new Error("Expected value to be string");if(S!==void 0&&!bs(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},p={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};c.call(t,g,i.value,p)})),zE=t=>k.from(t).filter(nt).getOrUndefined(),UE=t=>x4(t)?k.some({targets:J9.find(t.getBody()),anchorTop:zE(wx(t)),anchorBottom:zE(rN(t))}):k.none(),nV=t=>k.from(S4(t)),oV=t=>({getHistory:nO,addToHistory:LC,getLinkInformation:()=>UE(t),getValidationHandler:()=>nV(t),getUrlPicker:s=>tV(t,s)}),vv=(t,s,c,i)=>{const d=Vt(!1),g=JA(s),p={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:El.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},C=oV(s),S=aP(s),T=Oj(s),A=Jc(s),N=()=>d.get(),P=he=>d.set(he),L={shared:{providers:p,anchors:B9(s,c,i,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:T,dialog:A,isContextMenuOpen:N,setContextMenuState:P},U={...L,shared:{...L.shared,interpreter:he=>q5(he,{},U),getSink:t.popup}},J={...L,shared:{...L.shared,interpreter:he=>q5(he,{},J),getSink:t.dialog}};return{popup:U,dialog:J}},wP=(t,s,c)=>{const i=(Ae,Je)=>{We([s,...c],ct=>{ct.broadcastEvent(Ae,Je)})},d=(Ae,Je)=>{We([s,...c],},g=Ae=>d(Yl(),{target:Ae.target}),p=mm(),C=qc(p,"touchstart",g),S=qc(p,"touchmove",Ae=>i(Sp(),Ae)),T=qc(p,"touchend",,A=qc(p,"mousedown",g),N=qc(p,"mouseup",Ae=>{Ae.raw.button===0&&d(c2(),{target:Ae.target})}),P=Ae=>d(Yl(),{target:de.fromDom(Ae.target)}),L=Ae=>{Ae.button===0&&d(c2(),{target:de.fromDom(Ae.target)})},U=()=>{We(t.editorManager.get(),Ae=>{t!==Ae&&Ae.dispatch("DismissPopups",{relatedTarget:t})})},J=Ae=>i(Pu(),Py(Ae)),he=Ae=>{d(qf(),{}),i(Ul(),Py(Ae))},ce=xe(de.fromDom(t.getElement())),oe=tb(ce,"scroll",Ae=>{requestAnimationFrame(()=>{const Je=t.getContainer();if(Je!=null){const yn=Nh(t,s.element).map(.getOr([]);cs(yn,St=>co(St,Ae.target))&&(t.dispatch("ElementScroll",{target:Ae.target.dom}),i(k0(),Ae))}})}),fe=()=>d(qf(),{}),je=Ae=>{Ae.state&&d(Yl(),{target:de.fromDom(t.getContainer())})},Be=Ae=>{d(Yl(),{target:de.fromDom(Ae.relatedTarget.getContainer())})};t.on("PostRender",,t.on("remove",()=>{t.off("click",P),t.off("tap",P),t.off("mouseup",L),t.off("mousedown",U),t.off("ScrollWindow",J),t.off("ResizeWindow",he),t.off("ResizeEditor",fe),t.off("AfterProgressState",je),t.off("DismissPopups",Be),A.unbind(),C.unbind(),S.unbind(),T.unbind(),N.unbind(),oe.unbind()}),t.on("detach",()=>{We([s,...c],dh),We([s,...c],Ae=>Ae.destroy())})},rc=S_,nm=Fw,sO=re([ge("shell",!1),Le("makeItem"),ge("setupItem",j),el.field("listBehaviours",[fn])]),sV=Da({name:"items",overrides:()=>({behaviours:et([fn.config({})])})}),rV=re([sV]),cV=re("CustomList"),rO=(t,s,c,i)=>{const d=(C,S)=>{p(C).fold(()=>{throw new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const A=fn.contents(T),N=S.length,P=N-A.length,L=P>0?it(P,()=>t.makeItem()):[],U=A.slice(N);We(U,he=>fn.remove(T,he)),We(L,he=>fn.append(T,he));const J=fn.contents(T);We(J,(he,ce)=>{t.setupItem(C,he,S[ce],ce)})})},g=t.shell?{behaviours:[fn.config({})],components:[]}:{behaviours:[],components:s},p=C=>t.shell?k.some(C):Mo(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:er(t.listBehaviours,g.behaviours),apis:{setItems:d}}},EP=Fc({name:cV(),configFields:sO(),partFields:rV(),factory:rO,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),yv=re([Le("dom"),ge("shell",!0),pr("toolbarBehaviours",[fn])]),aV=re([Da({name:"groups",overrides:()=>({behaviours:et([fn.config({})])})})]),iV=(t,s,c,i)=>{const d=(C,S)=>{g(C).fold(T=>{fn.set(T,S)})},g=C=>t.shell?k.some(C):Mo(C,t,"groups"),p=t.shell?{behaviours:[fn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:er(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d,refresh:j},domModification:{attributes:{role:"group"}}}},om=Fc({name:"Toolbar",configFields:yv(),partFields:aV(),factory:iV,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),lV=j,TP=Xe,kP=re([]);var IC=Object.freeze({__proto__:null,setup:lV,isDocked:TP,getBehaviours:kP});const cO=t=>(ic(As(t,"position"),"fixed")?k.none():ca(t)).orThunk(()=>{const i=de.fromTag("span");return xr(t).bind(d=>{Dc(d,i);const g=ca(i);return hi(i),g})}),_P=t=>cO(t).map(Tr).getOrThunk(()=>On(0,0)),aO=(t,s)=>{const c=t.element;Ws(c,s.transitionClass),fs(c,s.fadeOutClass),Ws(c,s.fadeInClass),s.onShow(t)},AP=(t,s)=>{const c=t.element;Ws(c,s.transitionClass),fs(c,s.fadeInClass),Ws(c,s.fadeOutClass),s.onHide(t)},uV=OP=DP=iO=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),lO=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),uO=dV=(t,s,c)=>{const i=s.win,d=s.box,g=uO(s);return vs(t,p=>{switch(p){case"bottom":return DP(d,c.bounds)?k.none():k.some(lO(i,g,c));case"top":return OP(d,c.bounds)?k.none():k.some(iO(i,g,c));default:return k.none()}}).getOr({location:"no-dock"})},mV=(t,s,c)=>jt(t,i=>{switch(i){case"bottom":return DP(s,c.bounds);case"top":return OP(s,c.bounds)}}),fV=(t,s)=>{const c=s.optScrollEnv.fold(re(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return On(t.bounds.x,c)},Bj=(t,s)=>{const c=s.optScrollEnv.fold(re(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return On(t.x,c)},dO=(t,s,c)=>c.getInitialPos().map(i=>{const d=fV(i,s);return{box:ds(d.left,d.top,Go(t),mt(t)),location:i.location}}),mO=(t,s,c,i,d)=>{const g=Bj(s,c),p=ds(g.left,g.top,s.width,s.height);i.setInitialPos({style:dr(t),position:ts(t,"position")||"static",bounds:p,location:d.location})},RP=(t,s,c,i,d)=>{i.getInitialPos().fold(()=>j)},HC=(t,s,c)=>c.getInitialPos().bind(i=>{var d;switch(c.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const g=cO(t).getOr(ls()),p=ys(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return k.some({morph:"absolute",positionCss:wi("absolute",dt(i.style,"left").map(S=>s.x-p.x),dt(i.style,"top").map(S=>s.y-p.y+C),dt(i.style,"right").map(S=>p.right-s.right),dt(i.style,"bottom").map()});default:return k.none()}}),NP=(t,s,c)=>dO(t,s,c).filter(({box:i})=>mV(c.getModes(),i,s)).bind(({box:i})=>HC(t,i,c)),fO=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:wi("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:wi("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},gV=(t,s,c)=>{const i=ys(t),d=Xr(),g=dV(c.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(mO(t,i,s,c,g),fO(g)):k.none()},hV=(t,s,c)=>NP(t,s,c).orThunk(()=>s.optScrollEnv.bind(i=>dO(t,s,c)).bind(({box:i,location:d})=>{const g=Xr(),p=uO({win:g,box:i}),C=d==="top"?iO(g,p,s):lO(g,p,s);return fO(C)})),pV=(t,s,c)=>{const i=t.element;return ic(As(i,"position"),"fixed")?hV(i,s,c):gV(i,s,c)},bV=(t,s,c)=>{const i=t.element;return dO(i,s,c).bind(},vV=(t,s,c,i)=>{const d=ys(t),g=Xr(),p=uO({win:g,box:d}),C=i(g,p,s);return C.location==="bottom"||C.location==="top"?(RP(t,d,s,c,C),fO(C)):k.none()},MP=(t,s,c)=>{c.setDocked(!1),We(["left","right","top","bottom","position"],i=>V(t.element,i)),s.onUndocked(t)},WE=(t,s,c,i)=>{const d=i.position==="fixed";c.setDocked(d),qS(t.element,i),(d?s.onDocked:s.onUndocked)(t)},gO=(t,s,c,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const C=uV(p,i.bounds);C!==c.isVisible()&&(c.setVisible(C),d&&!C?(Ss(t.element,[g.fadeOutClass]),g.onHide(t)):(C?aO:AP)(t,g))})})},BP=(t,s,c,i,d)=>{gO(t,s,c,i,!0),WE(t,s,c,d.positionCss)},PP=(t,s,c,i,d)=>{switch(d.morph){case"static":return MP(t,s,c);case"absolute":return WE(t,s,c,d.positionCss);case"fixed":return BP(t,s,c,i,d)}},yV=(t,s,c)=>{const i=s.lazyViewport(t);gO(t,s,c,i),pV(t,i,c).each(d=>{PP(t,s,c,i,d)})},CV=(t,s,c)=>{const i=t.element;c.setDocked(!1);const d=s.lazyViewport(t);bV(t,d,c).each(g=>{switch(g.morph){case"static":{MP(t,s,c);break}case"absolute":{WE(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{yi(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),ZE(t,s,c)},ZE=(t,s,c)=>{t.getSystem().isConnected()&&yV(t,s,c)},Vh=(t,s,c)=>{c.isDocked()&&CV(t,s,c)},hO=t=>(s,c,i)=>{const d=c.lazyViewport(s);vV(s.element,d,i,t).each(},VC=hO(iO),jE=hO(lO);var Pj=Object.freeze({__proto__:null,refresh:ZE,reset:Vh,isDocked:(t,s,c)=>c.isDocked(),getModes:setModes:(t,s,c,i)=>c.setModes(i),forceDockToTop:VC,forceDockToBottom:jE}),EV=Object.freeze({__proto__:null,events:(t,s)=>Lo([$u(Df(),(c,i)=>{t.contextual.each(d=>{hr(c.element,d.transitionClass)&&(yi(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),i.stop()})}),Pe(Pu(),(c,i)=>{ZE(c,t,s)}),Pe(k0(),(c,i)=>{ZE(c,t,s)}),Pe(Ul(),(c,i)=>{Vh(c,t,s)})])}),TV=[xa("contextual",[oo("fadeInClass"),oo("fadeOutClass"),oo("transitionClass"),Hl("lazyContext"),Un("onShow"),Un("onShown"),Un("onHide"),Un("onHidden")]),Hr("lazyViewport",()=>({bounds:Xr(),optScrollEnv:k.none()})),Ea("modes",["top","bottom"],Qr),Un("onDocked"),Un("onUndocked")],kV=Object.freeze({__proto__:null,init:t=>{const s=Vt(!1),c=Vt(!0),i=_n(),d=Vt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return Ja({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const gs=Rr({fields:TV,name:"docking",active:EV,apis:Pj,state:kV}),I1=re(wt("toolbar-height-change")),cd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},$P="tox-tinymce--toolbar-sticky-on",FP="tox-tinymce--toolbar-sticky-off",pO=(t,s)=>{const c=Gr(s),d=ya(s).dom.innerHeight,g=Rc(c),p=de.fromDom(t.elm),C=Ca(p),S=mt(p),T=C.y,A=T+S,N=Tr(s),P=mt(s),L=N.top,U=L+P,J=Math.abs(L-g.top)<2,he=Math.abs(U-(g.top+d))<2;if(J&&T<U)ip(g.left,T-P,c);else if(he&&A>L){const ce=T-d+S+P;ip(g.left,ce,c)}},GE=H1=t=>{const s=i=>kn(i)+(parseInt(ts(i,"margin-top"),10)||0)+(parseInt(ts(i,"margin-bottom"),10)||0),c=t.element;ra(c).each(i=>{const d="padding-"+gs.getModes(t)[0];if(gs.isDocked(t)){const g=Go(i);an(c,"width",g+"px"),an(i,d,s(c)+"px")}else V(c,"width"),V(i,d)})},bO=(t,s)=>{s?(fs(t,cd.fadeOutClass),Ss(t,[cd.transitionClass,cd.fadeInClass])):(fs(t,cd.fadeInClass),Ss(t,[cd.fadeOutClass,cd.transitionClass]))},LP=(t,s)=>{const c=de.fromDom(t.getContainer());s?(Ws(c,$P),fs(c,FP)):(Ws(c,FP),fs(c,$P))},_V=(t,s)=>{const c=Gr(s);Uu(c).filter(.filter(i=>co(i,de.fromDom(c.dom.body))||wr(t,i)).each(()=>Aa(s))},AV=(t,s)=>vl(t).orThunk(()=>s().toOptional().bind(c=>vl(c.element))),OV=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(gs.reset)}),t.on("ResizeWindow ResizeEditor",,t.on("SkinLoaded",()=>{c().each(}),t.on("FullscreenStateChanged",),t.on("AfterScrollIntoView",i=>{c().each(d=>{gs.refresh(d);const g=d.element;Bb(g)&&pO(i,g)})}),t.on("PostRender",},DV=t=>t().map(gs.isDocked).getOr(!1),RV=()=>[_a.config({channels:{[I1()]:{onReceive:H1}}})],vO=(t,s)=>{const c=_n(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{t.inline||H1(C),LP(t,gs.isDocked(C)),C.getSystem().broadcastOn([qf()],{}),i().each(S=>S.getSystem().broadcastOn([qf()],{}))},p=t.inline?[]:RV();return[Kt.config({}),gs.config({contextual:{lazyContext:C=>{const S=kn(C.element),T=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(T).map(A=>{const N=ys(de.fromDom(A));return Nh(t,C.element).fold(()=>{const L=N.height-S,U=N.y+(GE(C,"top")?0:S);return ds(N.x,U,N.width,L)},L=>{const U=up(N,sv(L)),J=GE(C,"top")?U.y:U.y+S;return ds(U.x,J,U.width,U.height-S)})})},onShow:()=>{d(C=>bO(C,!0))},onShown:C=>{d(S=>yi(S,[cd.transitionClass,cd.fadeInClass])),c.get().each(S=>{_V(C.element,S),c.clear()})},onHide:C=>{AV(C.element,i).fold(c.clear,c.set),d(S=>bO(S,!1))},onHidden:()=>{d(C=>yi(C,[cd.transitionClass]))},...cd},lazyViewport:C=>Nh(t,C.element).fold(()=>{const T=Xr(),A=Cx(t),N=T.y+(GE(C,"top")?A:0),P=T.height-(GE(C,"bottom")?A:0);return{bounds:ds(T.x,N,T.width,P),optScrollEnv:k.none()}},T=>({bounds:sv(T),optScrollEnv:k.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:Tr(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var IP=Object.freeze({__proto__:null,setup:OV,isDocked:DV,getBehaviours:vO});const yO=t=>{const s=t.editor,c=t.sticky?vO:kP;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:et(c(s,t.sharedBackstage))}},NV=Pt([lr,ja("items",Et([Cd([G4,pi("items",Qr)]),Qr]))].concat(Jb)),qE=t=>Cs("GroupToolbarButton",NV,t),KE=[gc("text"),gc("tooltip"),gc("icon"),Ga("search",!1,Et([Ll,Pt([gc("placeholder")])],t=>Ds(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),Hl("fetch"),Hr("onSetup",()=>j)],CO=Pt([lr,...KE]),HP=t=>Cs("menubutton",CO,t),MV=Pt([lr,X2,Tl,Xm,Y4,DN,_h,qa("presets","normal",["normal","color","listpreview"]),MN(1),Yb,iI]),BV=var zC=si({factory:(t,s)=>{const c=(d,g)=>{const p=ye(g,C=>{const S={type:"menubutton",text:C.text,fetch:,T=HP(S).mapError(A=>la(A)).getOrDie();return kC(T,"tox-mbtn",s.backstage,k.some("menuitem"))});fn.set(d,p)},i={focus:Lt.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:et([fn.config({}),vn("menubar-events",[No(,Pe(xd(),(d,g)=>{Zs(d.element,".tox-mbtn--active").each(p=>{Zl(g.event.target,".tox-mbtn").each(C=>{co(p,C)||d.getSystem().getByDom(p).each(S=>{d.getSystem().getByDom(C).each(})})})}),Pe(T0(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(})})]),Lt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),os.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Le("dom"),Le("uid"),Le("onEscape"),Le("backstage"),ge("onSetup",j)],apis:{focus:setMenus:});const SO="\u26A1\uFE0FUpgrade",PV="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",wO=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:PV,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:SO}}]}),VP="container",$V=[pr("slotBehaviours",[])],zP=FV=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),f2(VP,zP(C),S)),record:re(g)}})(),c=t(s),i=s.record(),d=ye(i,g=>$c({name:g,pname:zP(g)}));return C2(VP,$V,d,LV,c)},LV=(t,s)=>{const c=i=d=(J,he)=>(ce,oe)=>Mo(ce,t,oe).map(fe=>J(fe,oe)).getOr(he),g=J=>(he,ce)=>{We(ce,oe=>J(he,oe))},p=(J,he)=>Qo(J.element,"aria-hidden")!=="true",C=(J,he)=>{if(!p(J)){const ce=J.element;V(ce,"display"),es(ce,"aria-hidden"),Ft(J,wp(),{name:he,visible:!0})}},S=(J,he)=>{if(p(J)){const ce=J.element;an(ce,"display","none"),ht(ce,"aria-hidden","true"),Ft(J,wp(),{name:he,visible:!1})}},T=d(p,!1),A=d(S),N=g(A),P=L=d(C),U={getSlotNames:c,getSlot:i,isShowing:T,hideSlot:A,hideAllSlots:P,showSlot:L};return{uid:t.uid,dom:t.dom,components:s,behaviours:Hd(t.slotBehaviours),apis:U}},Pa={...Fo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>$f(t)),sketch:FV},UP=Pt([Tl,X2,Hr("onShow",j),Hr("onHide",j),_h]),IV=t=>Cs("sidebar",UP,t),WP=t=>{const{sidebars:s}=t.ui.registry.getAll();We(Uo(s),c=>{const i=s[c],d=()=>ic(k.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},HV=t=>({element:),VV=(t,s)=>{const c=ye(Uo(s),i=>{const d=s[i],g=Ro(IV(d));return{name:i,getApi:HV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return ye(c,i=>{const d=Vt(j);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:eC.unnamedEvents([Ah(i,d),Qm(i,d),Pe(wp(),(g,p)=>{const C=p.event;Re(c,T=>T.name===C.name).each(T=>{(C.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},zV=t=>Pa.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:VV(s,t),slotBehaviours:eC.unnamedEvents([No(c=>Pa.hideAllSlots(c))])})),UV=(t,s,c)=>{Pn.getCurrent(t).each(d=>{fn.set(d,[zV(s)]);const g=c==null?void 0:c.toLowerCase();nt(g)&&Gn(s,g)&&Pn.getCurrent(d).each(p=>{Pa.showSlot(p,g),Mi.immediateGrow(d),V(d.element,"width"),YE(t.element,"region")})})},YE=(t,s)=>{ht(t,"role",s)},ZP=(t,s)=>{Pn.getCurrent(t).each(i=>{Pn.getCurrent(i).each(g=>{Mi.hasGrown(i)?Pa.isShowing(g,s)?(Mi.shrink(i),YE(t.element,"presentation")):(Pa.hideAllSlots(g),Pa.showSlot(g,s),YE(t.element,"region")):(Pa.hideAllSlots(g),Pa.showSlot(g,s),Mi.grow(i),YE(t.element,"region"))})})},WV=t=>Pn.getCurrent(t).bind(c=>Mi.isGrowing(c)||Mi.hasGrown(c)?Pn.getCurrent(c).bind(g=>Re(Pa.getSlotNames(g),p=>Pa.isShowing(g,p))):k.none()),xO=wt("FixSizeEvent"),EO=wt("AutoSizeEvent"),Ij=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:et([os.config({}),Kt.config({}),Mi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Pn.getCurrent(s).each(Pa.hideAllSlots),Fn(s,EO)},onGrown:s=>{Fn(s,EO)},onStartGrow:s=>{Ft(s,xO,{width:As(s.element,"width").getOr("")})},onStartShrink:s=>{Ft(s,xO,{width:Go(s.element)+"px"})}}),fn.config({}),Pn.config({find:s=>{const c=fn.contents(s);return ks(c)}})])}],behaviours:et([Ri.childAt(0),vn("sidebar-sliding-events",[Pe(xO,(s,c)=>{an(s.element,"width",c.event.width)}),Pe(EO,(s,c)=>{V(s.element,"width")})])])});var GV=Object.freeze({__proto__:null,block:(t,s,c,i)=>{ht(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=et([Lt.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),Kt.config({})]),p=i(d,g),C=d.getSystem().build(p);fn.append(d,Ci(C)),C.hasConfigured(Lt)&&s.focus&&Lt.focusIn(C),c.isBlocked()||s.onBlock(t),c.blockWith(()=>fn.remove(d,C))},unblock:(t,s,c)=>{es(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),qV=[Hr("getRoot",k.none),_r("focus",!0),Un("onBlock"),Un("onUnblock")],KV=Object.freeze({__proto__:null,init:()=>{const t=Nk(),s=return Ja({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const ad=Rr({fields:qV,name:"blocking",apis:GV,state:KV}),jP=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ng('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),GP=t=>Pn.getCurrent(t).each(,UC=(t,s)=>{const c="tabindex",i=`data-mce-${c}`;k.from(t.iframeElement).map(de.fromDom).each(d=>{s?(Er(d,c).each(g=>ht(d,i,g)),ht(d,c,-1)):(es(d,c),Er(d,i).each(g=>{ht(d,c,g),es(d,i)}))})},YV=(t,s,c,i)=>{const d=s.element;if(UC(t,c),c)ad.block(s,jP(i)),V(d,"display"),es(d,"aria-hidden"),t.hasFocus()&&GP(s);else{const g=Pn.getCurrent(s).exists(p=>Ip(p.element));ad.unblock(s),an(d,"display","none"),ht(d,"aria-hidden","true"),g&&t.focus()}},XE=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:et([fn.config({}),ad.config({focus:!1}),Pn.config({find:s=>ks(s.components())})]),components:[]}),XV=t=>t.type==="focusin",JE=t=>XV(t)?(t.composed?ks(t.composedPath()):k.from(t.target)).map(de.fromDom).filter(ro).exists(c=>hr(c,"mce-pastebin")):!1,JV=(t,s,c)=>{const i=Vt(!1),d=_n(),g=C=>{i.get()&&!JE(C)&&(C.preventDefault(),GP(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const p=C=>{C!==i.get()&&(i.set(C),YV(t,s(),C,c.providers),SM(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Rs(C.time)){const S=E1.setEditorTimeout(t,()=>p(C.state),C.time);d.set(S)}else p(C.state),d.clear()})},QV=(t,s)=>no(t,(d,g)=>s(g,d.len).fold(re(d),,{len:0,list:[]}).list,sl=(t,s,c)=>({within:t,extra:s,withinWidth:c}),qP=(t,s,c)=>{const i=QV(t,(C,S)=>{const T=c(C);return k.some({element:C,start:S,finish:S+T,width:T})}),d=Kn(i,,g=lo(d,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},V1=t=>ye(t,s=>s.element),KP=(t,s,c)=>{const i=V1(t.concat(s));return sl(i,[],c)},YP=(t,s,c,i)=>{const d=V1(t).concat([c]);return sl(d,V1(s),i)},ez=(t,s,c)=>sl(V1(t),[],c),XP=(t,s,c)=>{const i=qP(s,t,c);return i.extra.length===0?k.some(i):k.none()},tz=(t,s,c,i)=>{const d=XP(t,s,c).getOrThunk(()=>qP(s,t-c(i),c)),g=d.within,p=d.extra,C=d.withinWidth;return p.length===1&&p[0].width<=c(i)?KP(g,p,C):p.length>=1?YP(g,p,i,C):ez(g,p,C)},JP=(t,s)=>{const c=ye(s,i=>Ci(i));om.setGroups(t,c)},nz=t=>vs(t,s=>vl(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),QP=(t,s,c)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=zd(t,s,"primary"),g=Gs.getCoupled(t,"overflowGroup");an(d.element,"visibility","hidden");const p=i.concat([g]),C=nz(p);c([]),JP(d,p);const S=Go(d.element),T=tz(S,s.builtGroups.get(),A=>Go(A.element),g);T.extra.length===0?(fn.remove(d,g),c([])):(JP(d,T.within),c(T.extra)),V(d.element,"visibility"),X(d.element),C.each(Kt.focus)},e$=re([pr("splitToolbarBehaviours",[Gs]),zs("builtGroups",()=>Vt([]))]),oz=re([Rm(["overflowToggledClass"]),Tf("getOverflowBounds"),Le("lazySink"),zs("overflowGroups",()=>Vt([])),Un("onOpened"),Un("onClosed")].concat(e$())),sz=re([$c({factory:om,schema:yv(),name:"primary"}),Sl({schema:yv(),name:"overflow"}),Sl({name:"overflow-button"}),Sl({name:"overflow-group"})]),QE=re((t,s)=>{Qh(t,Math.floor(s))}),t$=re([Rm(["toggledClass"]),Le("lazySink"),Hl("fetch"),Tf("getBounds"),xa("fireDismissalEventInstead",[ge("event",Em())]),Bm(),Un("onToggled")]),n$=re([Sl({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:et([En.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Sl({factory:om,schema:yv(),name:"toolbar",overrides:t=>({toolbarBehaviours:et([Lt.config({mode:"cyclic",onEscape:s=>(Mo(s,t,"button").each(Kt.focus),k.none())})])})})]),eT=_n(),rz=(t,s)=>{eT.set(!0),tT(t,s),eT.clear()},tT=(t,s)=>{const c=Gs.getCoupled(t,"toolbarSandbox");Ln.isOpen(c)?Ln.close(c):Ln.open(c,s.toolbar())},nT=(t,s,c,i)=>{const d=c.getBounds.map(p=>p()),g=c.lazySink(t).getOrDie();Pc.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:QE()}}},d)},TO=(t,s,c,i,d)=>{om.setGroups(s,d),nT(t,s,c,i),En.on(t)},cz=(t,s,c)=>{const i=If(),d=(p,C)=>{const S=eT.get().getOr(!1);c.fetch().get(T=>{TO(t,C,c,s.layouts,T),i.link(t.element),S||Lt.focusIn(C)})},g=()=>{En.off(t),eT.get().getOr(!1)||Kt.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:et([Lt.config({mode:"special",onEscape:p=>(Ln.close(p),k.some(!0))}),Ln.config({onOpen:d,onClose:g,isPartOf:(p,C,S)=>Nd(C,S)||Nd(t,S),getAttachPoint:),_a.config({channels:{...n1({isExtraPart:Xe,...c.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...mh({doReposition:()=>{Ln.getState(Gs.getCoupled(t,"toolbarSandbox")).each(p=>{nT(t,p,c,s.layouts)})}})}})])}},zh=Fc({name:"FloatingToolbarButton",factory:(t,s,c,i)=>({...sc.sketch({...i.button(),action:d=>{tT(d,i)},buttonBehaviours:el.augment({dump:i.button().buttonBehaviours},[Gs.config({others:{toolbarSandbox:d=>cz(d,c,t)}})])}),apis:{setGroups:(d,g)=>{Ln.getState(Gs.getCoupled(d,"toolbarSandbox")).each(p=>{TO(d,p,t,c.layouts,g)})},reposition:d=>{Ln.getState(Gs.getCoupled(d,"toolbarSandbox")).each(g=>{nT(d,g,t,c.layouts)})},toggle:d=>{tT(d,i)},toggleWithoutFocusing:d=>{rz(d,i)},getToolbar:d=>Ln.getState(Gs.getCoupled(d,"toolbarSandbox")),isOpen:d=>Ln.isOpen(Gs.getCoupled(d,"toolbarSandbox"))}}),configFields:t$(),partFields:n$(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),o$=re([Le("items"),Rm(["itemSelector"]),pr("tgroupBehaviours",[Lt])]),az=re([d1({name:"items",unit:"item"})]),iz=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:er(t.tgroupBehaviours,[Lt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),oT=Fc({name:"ToolbarGroup",configFields:o$(),partFields:az(),factory:iz}),s$=t=>ye(t,s=>Ci(s)),r$=(t,s,c)=>{QP(t,c,i=>{c.overflowGroups.set(i),s.getOpt(t).each(})},lz=(t,s,c,i)=>{const d=po(zh.sketch({fetch:()=>Xc.nu(g=>{g(s$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[vc,Or],onRtl:()=>[Or,vc],onBottomLtr:()=>[Bc,da],onBottomRtl:,getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:er(t.splitToolbarBehaviours,[Gs.config({others:{overflowGroup:()=>oT.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(ye(p,g.getSystem().build)),r$(g,d,t)},refresh:g=>r$(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{zh.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(zh.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(zh.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{zh.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(zh.getToolbar)},domModification:{attributes:{role:"group"}}}},c$=Fc({name:"SplitFloatingToolbar",configFields:oz(),partFields:sz(),factory:lz,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),uz=re([Rm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Un("onOpened"),Un("onClosed")].concat(e$())),dz=re([$c({factory:om,schema:yv(),name:"primary"}),$c({factory:om,schema:yv(),name:"overflow",overrides:t=>({toolbarBehaviours:et([Mi.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Mo(s,t,"overflow-button").each(c=>{En.off(c),Kt.focus(c)}),t.onClosed(s)},onGrown:s=>{Lt.focusIn(s),t.onOpened(s)},onStartGrow:s=>{Mo(s,t,"overflow-button").each(En.on)}}),Lt.config({mode:"acyclic",onEscape:s=>(Mo(s,t,"overflow-button").each(Kt.focus),k.some(!0))})])})}),Sl({name:"overflow-button",overrides:t=>({buttonBehaviours:et([En.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Sl({name:"overflow-group"})]),mz=(t,s)=>Mo(t,s,"overflow").map(Mi.hasGrown).getOr(!1),kO=(t,s)=>{Mo(t,s,"overflow-button").bind(.each(},_O=(t,s)=>{Mo(t,s,"overflow").each(c=>{QP(t,s,i=>{const d=ye(i,g=>Ci(g));om.setGroups(c,d)}),Mo(t,s,"overflow-button").each(,Mi.refresh(c)})},fz=(t,s,c,i)=>{const d="alloy.toolbar.toggle",g=(p,C)=>{const S=ye(C,p.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:er(t.splitToolbarBehaviours,[Gs.config({others:{overflowGroup:p=>oT.sketch({...i["overflow-group"](),items:[sc.sketch({...i["overflow-button"](),action:C=>{Fn(p,d)}})]})}}),vn("toolbar-toggle-events",[Pe(d,p=>{kO(p,t)})])]),apis:{setGroups:refresh:p=>_O(p,t),toggle:p=>kO(p,t),isOpen:p=>mz(p,t)},domModification:{attributes:{role:"group"}}}},WC=Fc({name:"SplitSlidingToolbar",configFields:uz(),partFields:dz(),factory:fz,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),a$=t=>{const s=t.title.fold(()=>({}),;return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[oT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:et([os.config({}),Kt.config({})])}},z1=t=>oT.sketch(a$(t)),i$=(t,s)=>{const c=No(i=>{const d=ye(t.initGroups,z1);om.setGroups(i,d)});return et([br.toolbarButton(t.providers.isDisabled),Br(),Lt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),vn("toolbar-events",[c])])},AO=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":a$({title:k.none(),items:[]}),"overflow-button":d9({name:"more",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:k.none(),borderless:!1},k.none(),t.providers)},splitToolbarBehaviours:i$(t,s)}},gz=t=>{const s=AO(t),c=4,i=c$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return c$.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Ca(d),p=va(d),C=Ca(p),S=Math.max(p.dom.scrollHeight,C.height);return ds(g.x+c,C.y,g.width-c*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:)},hz=t=>{const s=WC.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=WC.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=AO(t);return WC.sketch({...i,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([I1()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([I1()],{type:"closed"}),t.onToggled(d,!1)}})},OO=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return om.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===ol.scrolling?["tox-toolbar--scrolling"]:[])},components:[om.parts.groups({})],toolbarBehaviours:i$(t,s)})},l$=[Xm,Tl,gc("tooltip"),qa("buttonType","secondary",["primary","secondary"]),_r("borderless",!1),Hl("onAction")],pz=[...l$,rg,Il("type",["button"])],DO=[...l$,_r("active",!1),Il("type",["togglebutton"])],u$={button:pz,togglebutton:DO},sT=[Il("type",["group"]),Ea("buttons",[],zn("type",u$))],d$=zn("type",{...u$,group:sT}),m$=Pt([Ea("buttons",[],d$),Hl("onShow"),Hl("onHide")]),RO=t=>Cs("view",m$,t),bz=(t,s)=>{var c,i;const d=t.type==="togglebutton",g=t.icon.map(fe=>Lh(fe,s.icons)).map(po),C=(()=>fe=>{const je=Je=>{g.map(ct=>ct.getOpt(fe).each(yn=>{fn.set(yn,[Lh(Je,s.icons)])}))},Be=Je=>{const ct=fe.element;Je?(Ws(ct,"tox-button--enabled"),ht(ct,"aria-pressed",!0)):(fs(ct,"tox-button--enabled"),es(ct,"aria-pressed"))},Ae=if(d)return t.onAction({setIcon:je,setActive:Be,isActive:Ae});if(t.type==="button")return t.onAction({setIcon:je})})(),S={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},T=zA((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),A=d?t.text.map(s.translate):k.some(s.translate(t.text)),N=A.map(Fs),P=S.tooltip.or(A).map(fe=>({"aria-label":s.translate(fe),title:s.translate(fe)})).getOr({}),L=g.map(fe=>fe.asSpec()),U=ev([L,N]),J=t.icon.isSome()&&N.isSome(),he={tag:"button",classes:T.concat(...t.icon.isSome()&&!J?["tox-button--icon"]:[]).concat(...J?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:P},ce=[],oe=PE(S,k.some(C),ce,he,U,s);return sc.sketch(oe)},NO=(t,s)=>bz(t,s),Cv=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ye(t.buttons,c=>NO(c,s))}),MO=ll().deviceType,vz=MO.isPhone(),yz=MO.isTablet(),Cz=t=>{let s=!1;const c=ye(t.buttons,i=>i.type==="group"?(s=!0,Cv(i,t.providers)):NO(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...vz||yz?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:et([Kt.config({}),Lt.config({mode:"flow",selector:"button, .tox-button",focusInside:h.OnEnterOrSpaceMode})]),components:s?c:[Xd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Xd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},BO=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),Sz=(t,s,c,i)=>{const d={getPane:g=>rc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var Sv=Fc({name:"silver.View",configFields:[Le("viewConfig")],partFields:[Da({factory:{sketch:Cz},schema:[Le("buttons"),Le("providers")],name:"header"}),Da({factory:{sketch:BO},schema:[],name:"pane"})],factory:Sz,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const f$=(t,s,c)=>Hi(s,(i,d)=>{const g=Ro(RO(i));return t.slot(d,Sv.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Sv.parts.header({buttons:g.buttons,providers:c})]:[],Sv.parts.pane({})]}))}),g$=(t,s)=>Pa.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:f$(c,t,s),slotBehaviours:eC.unnamedEvents([No(i=>Pa.hideAllSlots(i))])})),ZC=t=>Re(Pa.getSlotNames(t),s=>Pa.isShowing(t,s)),PO=t=>{const s=t.element;an(s,"display","none"),ht(s,"aria-hidden","true")},wz=t=>{const s=t.element;V(s,"display"),es(s,"aria-hidden")},xz=t=>({getContainer:re(t)}),$O=(t,s,c)=>{Pa.getSlot(t,s).each(i=>{Sv.getPane(i).each(d=>{c(i)(xz(d.element.dom))})})},Ez=(t,s)=>$O(t,s,Sv.getOnShow),Tz=var jC=si({factory:(t,s)=>{const g={setViews:(p,C)=>{fn.set(p,[g$(C,s.backstage.shared.providers)])},whichView:p=>Pn.getCurrent(p).bind(ZC),toggleView:(p,C,S,T)=>Pn.getCurrent(p).exists(A=>{const N=ZC(A),P=N.exists(U=>T===U),L=Pa.getSlot(A,T).isSome();return L&&(Pa.hideAllSlots(A),P?(PO(p),C()):(S(),wz(p),Pa.showSlot(A,T),Ez(A,T)),N.each(U=>Tz(A,U))),L})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:et([fn.config({}),Pn.config({find:)]),apis:g}},name:"silver.ViewWrapper",configFields:[Le("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,i,d)=>t.toggleView(s,c,i,d),whichView:(t,s)=>t.whichView(s)}});const kz=(t,s,c)=>{let i=!1;const d={getSocket:g=>rc.getPart(g,t,"socket"),setSidebar:(g,p,C)=>{rc.getPart(g,t,"sidebar").each(S=>UV(S,p,C))},toggleSidebar:(g,p)=>{rc.getPart(g,t,"sidebar").each(C=>ZP(C,p))},whichSidebar:g=>rc.getPart(g,t,"sidebar").bind(WV).getOrNull(),getHeader:g=>rc.getPart(g,t,"header"),getToolbar:g=>rc.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{rc.getPart(g,t,"toolbar").each(C=>{const S=ye(p,z1);C.getApis().setGroups(C,S)})},setToolbars:(g,p)=>{rc.getPart(g,t,"multiple-toolbar").each(C=>{const S=ye(p,T=>ye(T,z1));EP.setItems(C,S)})},refreshToolbar:g=>{rc.getPart(g,t,"toolbar").each(C=>C.getApis().refresh(C))},toggleToolbarDrawer:g=>{rc.getPart(g,t,"toolbar").each(p=>{xo(p.getApis().toggle,C=>C(p))})},toggleToolbarDrawerWithoutFocusing:g=>{rc.getPart(g,t,"toolbar").each(p=>{xo(p.getApis().toggleWithoutFocusing,C=>C(p))})},isToolbarDrawerToggled:g=>rc.getPart(g,t,"toolbar").bind(p=>k.from(p.getApis().isOpen).map(C=>C(p))).getOr(!1),getThrobber:g=>rc.getPart(g,t,"throbber"),focusToolbar:g=>{rc.getPart(g,t,"toolbar").orThunk(()=>rc.getPart(g,t,"multiple-toolbar")).each(C=>{Lt.focusIn(C)})},setMenubar:(g,p)=>{rc.getPart(g,t,"menubar").each(C=>{zC.setMenus(C,p)})},focusMenubar:g=>{rc.getPart(g,t,"menubar").each(p=>{zC.focus(p)})},setViews:(g,p)=>{rc.getPart(g,t,"viewWrapper").each(C=>{jC.setViews(C,p)})},toggleView:(g,p)=>rc.getPart(g,t,"viewWrapper").exists(C=>jC.toggleView(C,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>rc.getPart(g,t,"viewWrapper").bind(jC.whichView).getOrNull(),hideMainView:g=>{i=d.isToolbarDrawerToggled(g),i&&d.toggleToolbarDrawer(g),rc.getPart(g,t,"editorContainer").each(p=>{const C=p.element;an(C,"display","none"),ht(C,"aria-hidden","true")})},showMainView:g=>{i&&d.toggleToolbarDrawer(g),rc.getPart(g,t,"editorContainer").each(p=>{const C=p.element;V(C,"display"),es(C,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},_z=nm.optional({factory:zC,name:"menubar",schema:[Le("backstage")]}),FO=t=>t.type===ol.sliding?hz:t.type===ol.floating?gz:OO,Az=nm.optional({factory:{sketch:t=>EP.sketch({uid:t.uid,dom:t.dom,listBehaviours:et([Lt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>OO({type:t.type,uid:wt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,c,i,d)=>{om.setGroups(c,i)},shell:!0})},name:"multiple-toolbar",schema:[Le("dom"),Le("onEscape")]}),Oz=nm.optional({factory:{sketch:t=>{const s=FO(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[Le("dom"),Le("onEscape"),Le("getSink")]}),h$=nm.optional({factory:{sketch:yO},name:"header",schema:[Le("dom")]}),Dz=nm.optional({factory:{sketch:wO},name:"promotion",schema:[Le("dom")]}),p$=nm.optional({name:"socket",schema:[Le("dom")]}),Rz=nm.optional({factory:{sketch:Ij},name:"sidebar",schema:[Le("dom")]}),b$=nm.optional({factory:{sketch:XE},name:"throbber",schema:[Le("dom")]}),Nz=nm.optional({factory:jC,name:"viewWrapper",schema:[Le("backstage")]}),Mz=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),Bz=nm.optional({factory:{sketch:Mz},name:"editorContainer",schema:[]});var Ho=Fc({name:"OuterContainer",factory:kz,configFields:[Le("dom"),Le("behaviours")],partFields:[h$,_z,Oz,Az,p$,Rz,Dz,b$,Nz,Bz],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,i)=>{t.setSidebar(s,c,i)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const Pz="file edit view insert format tools table help",v$={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},$z=(t,s,c)=>{const i=y4(c).split(/[ ,]/);return{text:t.title,getItems:()=>le(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:cs(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},GC=rT=(t,s)=>{const c={...v$,...s.menus},i=Uo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?GC(Pz):GC(s.menubar===!1?"":s.menubar),g=Kn(d,C=>{const S=Gn(v$,C);return i?S||dt(s.menus,C).exists(T=>Gn(T,"items")):S}),p=ye(g,C=>{const S=c[C];return $z({title:S.title,items:GC(S.items)},s,t)});return Kn(p,C=>{const S=T=>nt(T)||T.type!=="separator";return C.getItems().length>0&&cs(C.getItems(),S)})},Fz=t=>{const s=return()=>{t.initialized?s():t.on("init",s)}},Lz=(t,s)=>y$=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),LO=(t,s,c,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,c)),Iz=async(t,s)=>{const i="ui/"+_4(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(i);if(nt(d))return Promise.resolve(LO(t,i,d,t.ui.styleSheetLoader));{const g=s+"/skin.min.css";return y$(t,g,t.ui.styleSheetLoader)}},Hz=async(t,s)=>{if(Wt(de.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.css",d=tinymce.Resource.get(i);if(nt(d))return LO(t,i,d,_1.DOM.styleSheetLoader),Promise.resolve();{const g=s+"/skin.shadowdom.min.css";return y$(t,g,_1.DOM.styleSheetLoader)}}},Vz=async(t,s)=>{_4(s).fold(()=>{const i=kx(s);i&&s.contentCSS.push(i+(t?"/content.inline":"/content")+".min.css")},i=>{const d="ui/"+i+(t?"/content.inline":"/content")+".css",g=tinymce.Resource.get(d);if(nt(g))LO(s,d,g,s.ui.styleSheetLoader);else{const p=kx(s);p&&s.contentCSS.push(p+(t?"/content.inline":"/content")+".min.css")}});const c=kx(s);if(!k4(s)&&nt(c))return Promise.all([Iz(s,c),Hz(s,c)]).then()},C$=(t,s)=>Vz(t,s).then(Fz(s),Lz(s,"Skin could not be loaded")),zz=Xt(C$,!1),S$=Xt(C$,!0),mg=(t,s,c)=>t.translate([s,t.translate(c)]),IO=(t,s,c)=>{const i=(C,S,T,A)=>{const N=s.shared.providers.translate(C.title);if(C.type==="separator")return k.some({type:"separator",text:N});if(C.type==="submenu"){const P=le(C.getStyleItems(),L=>d(L,S,A));return S===0&&P.length<=0?k.none():k.some({type:"nestedmenuitem",text:N,enabled:P.length>0,getSubmenuItems:()=>le(C.getStyleItems(),L=>d(L,S,A))})}else return k.some({type:"togglemenuitem",text:N,icon:C.icon,active:C.isSelected(A),enabled:!T,onAction:c.onAction(C),...C.getStylePreview().fold(()=>({}),P=>({meta:{style:P}}))})},d=(C,S,T)=>{const A=C.type==="formatter"&&c.isInvalid(C);return S===0?A?[]:i(C,S,!1,T).toArray():i(C,S,A,T).toArray()},g=C=>{const S=c.getCurrentValue(),T=c.shouldHide?0:1;return le(C,A=>d(A,T,S))};return{validateItems:g,getFetch:(C,S)=>(T,A)=>{const N=S(),P=g(N),L=hv(P,Yd.CLOSE_ON_EXECUTE,C,{isHorizontalMenu:!1,search:k.none()});A(L)}}},U1=(t,s,c)=>{const i=c.dataset,d=i.type==="basic"?()=>ye(i.data,g=>$C(g,c.isSelectedFor,c.getPreviewFor)):i.getData;return{items:IO(t,s,c),getStyleItems:d}},id=(t,s,c,i,d)=>{const{items:g,getStyleItems:p}=U1(t,s,c),C=T=>({getComponent:re(T),setTooltip:A=>{const N=s.shared.providers.translate(A);bu(T.element,{"aria-label":N,title:N})}}),S=T=>{const A=N=>T.setTooltip(mg(t,i,N.value));return t.on(d,A),rC(td(t,"NodeChange",N=>{const P=N.getComponent();c.updateText(P),Zt.set(N.getComponent(),!t.selection.isEditable())})(T),()=>t.off(d,A))};return _A({text:c.icon.isSome()?k.none():c.text,icon:c.icon,tooltip:k.from(c.tooltip),role:k.none(),fetch:g.getFetch(s,p),onSetup:S,getApi:C,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},w$=t=>ye(t,s=>{let c=s,i=s;const d=s.split("=");return d.length>1&&(c=d[0],i=d[1]),{title:c,format:i}}),Uz=t=>({type:"basic",data:t});var wv;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(wv||(wv={}));const Wz=(t,s)=>s===wv.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),HO=(t,s,c)=>{const i=t.options.get(s);return{type:"basic",data:w$(Wz(i,c))}},Zz="Align",x$="Alignment {0}",E$="left",cT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],T$=t=>{const s=()=>Re(cT,C=>t.formatter.match(C.format)),c=C=>()=>t.formatter.match(C),i=C=>k.none,d=C=>{const T=s().fold(re(E$),A=>A.title.toLowerCase());Ft(C,Ih,{icon:`align-${T}`}),UI(t,{value:T})},g=Uz(cT),p=C=>()=>Re(cT,.each(S=>t.execCommand(S.command));return{tooltip:mg(t,x$,E$),text:k.none(),icon:k.some("align-left"),isSelectedFor:c,getCurrentValue:k.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},jz=(t,s)=>id(t,s,T$(t),x$,"AlignTextUpdate"),VO=(t,s)=>{const c=U1(t,s,T$(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(Zz),onSetup:Ba(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},k$=(t,s)=>{const c=s(),i=ye(c,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>Re(c,g=>g.format===d)).orThunk(()=>Gt(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},Gz="Blocks",_$="Block {0}",zO="Paragraph",A$=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const p=t.formatter.get(g);return p?k.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):k.none()},i=g=>{const C=k$(t,()=>d.data).fold(re(zO),S=>S.title);Ft(g,Al,{text:C}),xM(t,{value:C})},d=HO(t,"block_formats",wv.SemiColon);return{tooltip:mg(t,_$,zO),text:k.some(zO),icon:k.none(),isSelectedFor:s,getCurrentValue:k.none,getPreviewFor:c,onAction:TM(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},qz=(t,s)=>id(t,s,A$(t),_$,"BlocksTextUpdate"),O$=(t,s)=>{const c=U1(t,s,A$(t));t.ui.registry.addNestedMenuItem("blocks",{text:Gz,onSetup:Ba(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},D$="Fonts",UO="Font {0}",WO="System Font",R$=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],N$=t=>{const s=t.split(/\s*,\s*/);return ye(s,c=>c.replace(/^['"]+|['"]+$/g,""))},M$=(t,s)=>s.length>0&&jt(s,,Kz=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=N$(t.toLowerCase());return M$(c,R$)||M$(c,s)}else return!1},ZO=t=>{const s=()=>{const S=U=>U?N$(U)[0]:"",T=t.queryCommandValue("FontName"),A=C.data,N=T?T.toLowerCase():"",P=lN(t);return{matchOpt:Re(A,U=>{const J=U.format;return J.toLowerCase()===N||S(J).toLowerCase()===S(N).toLowerCase()}).orThunk(()=>Gt(Kz(N,P),{title:WO,format:N})),font:T}},c=S=>T=>T.exists(A=>A.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>k.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},p=S=>{const{matchOpt:T,font:A}=s(),N=T.fold(re(A),P=>P.title);Ft(S,Al,{text:N}),EM(t,{value:N})},C=HO(t,"font_family_formats",wv.SemiColon);return{tooltip:mg(t,UO,WO),text:k.some(WO),icon:k.none(),isSelectedFor:c,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:Xe}},Yz=(t,s)=>id(t,s,ZO(t),UO,"FontFamilyTextUpdate"),B$=(t,s)=>{const c=U1(t,s,ZO(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(D$),onSetup:Ba(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},Xz={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Jz=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(c),i+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),Qz=(t,s)=>cs(s,c=>cs(Xz[c],i=>t===i)),aT=(t,s)=>k.from(Jz.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return Qz(g,s)?k.some({value:d,unit:g}):k.none()}),eU=(t,s)=>aT(t,s).map(,P$={tab:re(9),escape:re(27),enter:re(13),backspace:re(8),delete:re(46),left:re(37),up:re(38),right:re(39),down:re(40),space:re(32),home:re(36),end:re(35),pageUp:re(33),pageDown:re(34)},tU=(t,s,c)=>{let i=k.none();const d=oe=>oe.map(fe=>pt.getValue(fe)).getOr(""),g=td(t,"NodeChange SwitchMode",oe=>{const fe=oe.getComponent();i=k.some(fe),c.updateInputValue(fe),Zt.set(fe,!t.selection.isEditable())}),p=oe=>({getComponent:re(oe)}),C=Vt(j),S=wt("custom-number-input-events"),T=(oe,fe,je)=>{const Be=d(i),Ae=c.getNewValue(Be,oe),Je=Be.length-`${Ae}`.length,ct=i.map(St=>St.element.dom.selectionStart-Je),yn=i.map(St=>St.element.dom.selectionEnd-Je);c.onAction(Ae,je),i.each(St=>{pt.setValue(St,Ae),fe&&(ct.each(tn=>St.element.dom.selectionStart=tn),yn.each()})},A=(oe,fe)=>T(oe,fe),N=(oe,fe)=>T((je,Be)=>je+Be,oe,fe),P=oe=>ra(oe.element).fold(k.none,fe=>(Aa(fe),k.some(!0))),L=oe=>Ip(oe.element)?(Nl(oe.element).each(fe=>Aa(fe)),k.some(!0)):k.none(),U=(oe,fe,je,Be)=>{const Ae=Vt(j),Je=s.shared.providers.translate(je),ct=wt("altExecuting"),yn=td(t,"NodeChange SwitchMode",tn=>{Zt.set(tn.getComponent(),!t.selection.isEditable())}),St=tn=>{Zt.isDisabled(tn)||oe(!0)};return sc.sketch({dom:{tag:"button",attributes:{title:Je,"aria-label":Je},classes:Be.concat(fe)},components:[kA(fe,s.shared.providers.icons)],buttonBehaviours:et([Zt.config({}),vn(ct,[Ah({onSetup:yn,getApi:p},Ae),Qm({getApi:p},Ae),Pe(gl(),(tn,Yt)=>{(Yt.event.raw.keyCode===P$.space()||Yt.event.raw.keyCode===P$.enter())&&(Zt.isDisabled(tn)||oe(!1))}),Pe(Ed(),St),Pe(Af(),St)])]),eventOrder:{[gl()]:[ct,"keying"],[Ed()]:[ct,"alloy.base.behaviour"],[Af()]:[ct,"alloy.base.behaviour"]}})},J=po(U(oe=>A(!1,oe),"minus","Decrease font size",[])),he=po(U("plus","Increase font size",[])),ce=po({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[O1.sketch({inputBehaviours:et([Zt.config({}),vn(S,[Ah({onSetup:g,getApi:p},C),Qm({getApi:p},C)]),vn("input-update-display-text",[Pe(Al,(oe,fe)=>{pt.setValue(oe,fe.event.text)}),Pe(w0(),oe=>{c.onAction(pt.getValue(oe))}),Pe(Tg(),]),Lt.config({mode:"special",onEnter:oe=>(T(bt,!0,!0),k.some(!0)),onEscape:P,onUp:oe=>(N(!0,!1),k.some(!0)),onDown:oe=>(A(!0,!1),k.some(!0)),onLeft:(oe,fe)=>(fe.cut(),k.none()),onRight:(oe,fe)=>(fe.cut(),k.none())})])})],behaviours:et([Kt.config({}),Lt.config({mode:"special",onEnter:L,onSpace:L,onEscape:P}),vn("input-wrapper-events",[Pe(xd(),oe=>{We([J,he],fe=>{const je=de.fromDom(fe.get(oe).element.dom);Ip(je)&&Kg(je)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[J.asSpec(),ce.asSpec(),he.asSpec()],behaviours:et([Kt.config({}),Lt.config({mode:"flow",focusInside:h.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:oe=>Ip(oe.element)?k.none():(Aa(oe.element),k.some(!0))})])}},$$="Font sizes",F$="Font size {0}",L$="12pt",nU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},oU={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},sU=rU=(t,s)=>/[0-9.]+px$/.test(t)?sU(parseInt(t,10)*72/96,s||0)+"pt":dt(oU,t).getOr(t),cU=t=>dt(nU,t).getOr(""),jO=t=>{const s=()=>{let S=k.none();const T=C.data,A=t.queryCommandValue("FontSize");if(A)for(let N=3;S.isNone()&&N>=0;N--){const P=rU(A,N),L=cU(P);S=Re(T,}return{matchOpt:S,size:A}},c=S=>i=d=re(k.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},p=S=>{const{matchOpt:T,size:A}=s(),N=T.fold(re(A),P=>P.title);Ft(S,Al,{text:N}),WI(t,{value:N})},C=HO(t,"font_size_formats",wv.Space);return{tooltip:mg(t,F$,L$),text:k.some(L$),icon:k.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:Xe}},aU=(t,s)=>id(t,s,jO(t),F$,"FontSizeTextUpdate"),iU=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},I$=16,lU=H$=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>Ft(i,Al,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{aT(i,["unsupportedLength","empty"]);const g=s(),p=aT(i,["unsupportedLength","empty"]).or(aT(g,["unsupportedLength","empty"])),C=p.map(P=>P.value).getOr(I$),S=sN(t),T=p.map(P=>P.unit).filter(.getOr(S),A=d(C,iU(T).step),N=`${lU(A)?A:C}${T}`;return N!==g&&ZI(t,{value:N}),N}}},V$=uU=(t,s)=>{const c=U1(t,s,jO(t));t.ui.registry.addNestedMenuItem("fontsize",{text:$$,onSetup:Ba(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},dU="Formats",z$="Format {0}",W1=(t,s)=>{const c="Paragraph",i=p=>()=>t.formatter.match(p),d=p=>()=>{const C=t.formatter.get(p);return C!==void 0?k.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):k.none()},g=p=>{const C=N=>tP(N)?le(N.items,C):PC(N)?[{title:N.title,format:N.format}]:[],S=le(sP(t),C),A=k$(t,re(S)).fold(re(c),N=>N.title);Ft(p,Al,{text:A}),zI(t,{value:A})};return{tooltip:mg(t,z$,c),text:k.some(c),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:TM(t),updateText:g,shouldHide:QR(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},mU=(t,s)=>{const c={type:"advanced",...s.styles};return id(t,s,W1(t,c),z$,"StylesTextUpdate")},fU=(t,s)=>{const c={type:"advanced",...s.styles},i=U1(t,s,W1(t,c));t.ui.registry.addNestedMenuItem("styles",{text:dU,onSetup:Ba(t),getSubmenuItems:)},gU=re([Le("toggleClass"),Le("fetch"),jl("onExecute"),ge("getHotspot",k.some),ge("getAnchorOverrides",re({})),Bm(),jl("onItemExecute"),mo("lazySink"),Le("dom"),Un("onOpen"),pr("splitDropdownBehaviours",[Gs,Lt,Kt]),ge("matchWidth",!1),ge("useMinWidth",!1),ge("eventOrder",{}),mo("role")].concat(I3())),hU=$c({factory:sc,schema:[Le("dom")],name:"arrow",defaults:()=>({buttonBehaviours:et([Kt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(kd)},buttonBehaviours:et([En.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),pU=$c({factory:sc,schema:[Le("dom")],name:"button",defaults:()=>({buttonBehaviours:et([Kt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),bU=re([hU,pU,Da({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Le("text")],name:"aria-descriptor"}),Sl({schema:[Np()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(}})}),UM()]),vU=(t,s,c,i)=>{const d=A=>{Pn.getCurrent(A).each(},g=A=>{F3(t,bt,A,i,d,Ma.HighlightMenuAndItem).get(j)},p=A=>(g(A),k.some(!0)),C=A=>{const N=zd(A,t,"button");return kd(N),k.some(!0)},S={...Lo([No((A,N)=>{Mo(A,t,"aria-descriptor").each(L=>{const U=wt("aria");ht(L.element,"id",U),ht(A.element,"aria-describedby",U)})})]),...Gd(k.some(g))},T={repositionMenus:;return{uid:t.uid,dom:t.dom,components:s,apis:T,eventOrder:{...t.eventOrder,[Xa()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:er(t.splitDropdownBehaviours,[Gs.config({others:{sandbox:A=>{const N=zd(A,t,"arrow");return L3(t,A,{onOpen:()=>{En.on(N),En.on(A)},onClose:)}}}),Lt.config({mode:"special",onSpace:C,onEnter:C,onDown:p}),Kt.config({}),En.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},iT=Fc({name:"SplitDropdown",configFields:gU(),partFields:bU(),factory:vU,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),lT=t=>({isEnabled:()=>!Zt.isDisabled(t),setEnabled:s=>Zt.set(t,!s),setText:s=>Ft(t,Al,{text:s}),setIcon:s=>Ft(t,Ih,{icon:s})}),yU=t=>({setActive:s=>{En.set(t,s)},isActive:()=>En.isOn(t),isEnabled:()=>!Zt.isDisabled(t),setEnabled:s=>Zt.set(t,!s),setText:s=>Ft(t,Al,{text:s}),setIcon:s=>Ft(t,Ih,{icon:s})}),U$=(t,s)=>t.map(c=>({"aria-label":s.translate(c),title:s.translate(c)})).getOr({}),GO=wt("focus-button"),uT=(t,s,c,i,d)=>{const g=s.map(C=>po(c5(C,"tox-tbtn",d))),p=t.map(;return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:U$(c,d)},components:ev([p.map(C=>C.asSpec()),g.map(C=>C.asSpec())]),eventOrder:{[gr()]:["focusing","alloy.base.behaviour",F1],[vi()]:[F1,"toolbar-group-button-events"]},buttonBehaviours:et([br.toolbarButton(d.isDisabled),Br(),vn(F1,[No((C,S)=>EA(C)),Pe(Al,(C,S)=>{g.bind(T=>T.getOpt(C)).each(T=>{fn.set(T,[Fs(d.translate(S.event.text))])})}),Pe(Ih,(C,S)=>{p.bind(T=>T.getOpt(C)).each(T=>{fn.set(T,[Lh(S.event.icon,d.icons)])})}),Pe(gr(),(C,S)=>{S.event.prevent(),Fn(C,GO)})])].concat(i.getOr([])))}},CU=(t,s,c,i)=>{const d=s.shared,g=Vt(j),p={toolbarButtonBehaviours:[],getApi:lT,onSetup:t.onSetup},C=[vn("toolbar-group-button-events",[Ah(p,g),Qm(p,g)])];return zh.sketch({lazySink:d.getSink,fetch:()=>Xc.nu(S=>{S(ye(c(t.items),z1))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:uT(t.icon,t.text,t.tooltip,k.some(C),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},W$=(t,s,c)=>{var i;const d=Vt(j),g=uT(t.icon,t.text,t.tooltip,k.none(),c);return sc.sketch({dom:g.dom,components:g.components,eventOrder:AE,buttonBehaviours:{...et([vn("toolbar-button-events",[RH({onAction:t.onAction,getApi:s.getApi}),Ah(s,d),Qm(s,d)]),br.toolbarButton(()=>!t.enabled||c.isDisabled()),Br()].concat(s.toolbarButtonBehaviours)),[F1]:(i=g.buttonBehaviours)===null||i===void 0?void 0:i[F1]}})},SU=(t,s)=>Z$(t,s,[]),Z$=(t,s,c)=>W$(t,{toolbarButtonBehaviours:c.length>0?[vn("toolbarButtonWith",c)]:[],getApi:lT,onSetup:t.onSetup},s),wU=(t,s)=>j$(t,s,[]),j$=(t,s,c)=>W$(t,{toolbarButtonBehaviours:[fn.config({}),En.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[vn("toolbarToggleButtonWith",c)]:[]),getApi:yU,onSetup:t.onSetup},s),G$=(t,s,c)=>i=>Xc.nu(d=>s.fetch(d)).map(d=>k.from(oE(yo(D3(wt("menu-value"),d,s.columns,s.presets,Yd.CLOSE_ON_EXECUTE,s.select.getOr(Xe),c),{movement:Qx(s.columns,s.presets),menuBehaviours:eC.unnamedEvents(s.columns!=="auto"?[]:[No((g,p)=>{n3(g,4,yN(s.presets)).each(({numRows:C,numColumns:S})=>{Lt.setGridSize(g,C,S)})})])})))),xU=(t,s)=>{const c=g=>({isEnabled:()=>!Zt.isDisabled(g),setEnabled:p=>Zt.set(g,!p),setIconFill:(p,C)=>{Zs(g.element,`svg path[class="${p}"], rect[class="${p}"]`).each(},setActive:p=>{ht(g.element,"aria-pressed",p),Zs(g.element,"span").each(C=>{g.getSystem().getByDom(C).each(S=>En.set(S,p))})},isActive:()=>Zs(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists(En.isOn)),setText:p=>Zs(g.element,"span").each(C=>g.getSystem().getByDom(C).each(S=>Ft(S,Al,{text:p}))),setIcon:p=>Zs(g.element,"span").each(C=>g.getSystem().getByDom(C).each(),setTooltip:p=>{const C=s.providers.translate(p);bu(g.element,{"aria-label":C,title:C})}}),i=Vt(j),d={getApi:c,onSetup:t.onSetup};return iT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...U$(t.tooltip,s.providers)}},onExecute:g=>{const p=c(g);p.isEnabled()&&t.onAction(p)},onItemExecute:splitDropdownBehaviours:et([br.splitButton(s.providers.isDisabled),Br(),vn("split-dropdown-events",[No(,Pe(GO,Kt.focus),Ah(d,i),Qm(d,i)]),gC.config({})]),eventOrder:{[vi()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:G$(c,t,s.providers),parts:{menu:Gb(!1,t.columns,t.presets)},components:[iT.parts.button(uT(t.icon,t.text,k.none(),k.some([En.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),iT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:f4("chevron-down",s.providers.icons)},buttonBehaviours:et([br.splitButton(s.providers.isDisabled),Br(),bx()])}),iT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},EU=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],qC=(t,s)=>(c,i,d)=>{const g=t(c).mapError(p=>la(p)).getOrDie();return s(g,i,d)},TU={button:qC(Q4,(t,s)=>SU(t,s.shared.providers)),togglebutton:qC(IN,,menubutton:qC(HP,(t,s)=>kC(t,"tox-tbtn",s,k.none(),!1)),splitbutton:qC(BV,,grouptoolbarbutton:qC(qE,(t,s,c)=>{const i=c.ui.registry.getAll().buttons,d=p=>gT(c,{buttons:i,toolbar:p,allowToolbarGroups:!1},s,k.none()),g={[Qg]:s.shared.header.isPositionedAtTop()?Qi.TopToBottom:Qi.BottomToTop};switch(zb(c)){case ol.floating:return CU(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},dT=(t,s,c)=>dt(TU,t.type).fold(()=>k.none(),,q$={styles:mU,fontsize:aU,fontsizeinput:V$,fontfamily:Yz,blocks:qz,align:jz},mT=t=>{const s=ye(EU,c=>{const i=Kn(c.items,;return{name:c.name,items:i}});return Kn(s,c=>c.items.length>0)},fT=t=>{const s=t.split("|");return ye(s,c=>({items:c.trim().split(" ")}))},K$=t=>Ht(t,s=>Gn(s,"name")&&Gn(s,"items")),kU=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?mT(c):nt(s)?fT(s):K$(s)?s:[]},_U=(t,s,c,i,d,g)=>dt(s,c.toLowerCase()).orThunk(()=>g.bind(p=>vs(p,C=>dt(s,C+c.toLowerCase())))).fold(()=>dt(q$,c.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?k.none():dT(p,d,t)),gT=(t,s,c,i)=>{const d=kU(s),g=ye(d,p=>{const C=le(p.items,S=>S.trim().length===0?[]:_U(t,s.buttons,S,s.allowToolbarGroups,c,i).toArray());return{title:k.from(t.translate(p.name)),items:C}});return Kn(g,},Y$=(t,s,c,i)=>{const d=s.mainUi.outerContainer,g=c.toolbar,p=c.buttons;if(Ht(g,nt)){const C=g.map(S=>{const T={toolbar:S,buttons:p,allowToolbarGroups:c.allowToolbarGroups};return gT(t,T,i,k.none())});Ho.setToolbars(d,C)}else Ho.setToolbar(d,gT(t,c,i,k.none()))},X$=ll(),hT=X$.os.isiOS()&&X$.os.version.major<=12,J$=(t,s)=>{const{uiMotherships:c}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=Vt(On(d.innerWidth,d.innerHeight)),C=Vt(On(g.offsetWidth,g.offsetHeight)),S=()=>{const P=p.get();(P.left!==d.innerWidth||P.top!==d.innerHeight)&&(p.set(On(d.innerWidth,d.innerHeight)),Zx(t))},T=()=>{const P=t.getDoc().documentElement,L=C.get();(L.left!==P.offsetWidth||L.top!==P.offsetHeight)&&(C.set(On(P.offsetWidth,P.offsetHeight)),Zx(t))},A=P=>{HI(t,P)};i.bind(d,"resize",S),i.bind(d,"scroll",A);const N=tb(de.fromDom(t.getBody()),"load",T);t.on("hide",()=>{We(c,P=>{an(P.element,"display","none")})}),t.on("show",()=>{We(c,P=>{V(P.element,"display")})}),t.on("NodeChange",T),t.on("remove",()=>{N.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",A),d=null})},Q$=(t,s,c)=>{qm(t)&&Ld(c.mainUi.mothership.element,c.popupUi.mothership),oc(s,c.dialogUi.mothership)};var eF=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:p}=s,C=Vt(0),S=g.outerContainer;zz(t);const T=de.fromDom(d.targetNode),A=qe(xe(T));Ld(T,g.mothership),Q$(t,A,s),t.on("SkinLoaded",()=>{Ho.setSidebar(S,c.sidebar,Ex(t)),Y$(t,s,c,i),C.set(t.getWin().innerWidth),Ho.setMenubar(S,rT(t,c)),Ho.setViews(S,c.views),J$(t,s)});const N=Ho.getSocket(S).getOrDie("Could not find expected socket element");if(hT){_c(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const J=CH(20),he=qc(N.element,"scroll",J.throttle);t.on("remove",he.unbind)}nM(t,s),t.addCommand("ToggleSidebar",(J,he)=>{Ho.toggleSidebar(S,he),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var J;return(J=Ho.whichSidebar(S))!==null&&J!==void 0?J:""}),t.addCommand("ToggleView",(J,he)=>{if(Ho.toggleView(S,he)){const ce=S.element;g.mothership.broadcastOn([Yl()],{target:ce}),We(p,oe=>{oe.broadcastOn([Yl()],{target:ce})}),Is(Ho.whichView(S))&&(t.focus(),t.nodeChanged(),Ho.refreshToolbar(S))}}),t.addQueryValueHandler("ToggleView",()=>{var J;return(J=Ho.whichView(S))!==null&&J!==void 0?J:""});const P=zb(t),L=(P===ol.sliding||P===ol.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const J=t.getWin().innerWidth;J!==C.get()&&(L(),C.set(J))});const U={setEnabled:J=>{Vx(s,!J)},isEnabled:;return{iframeContainer:N.element.dom,editorContainer:S.element.dom,api:U}}});const qO=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),pT=t=>Rs(t)?t+"px":t,bT=(t,s,c)=>{const i=s.filter(,d=c.filter(;return i.or(d).getOr(t)},OU=t=>{const s=vx(t),c=Vb(t),i=v4(t);return qO(s).map(d=>bT(d,c,i))},DU=t=>OU(t).getOr(vx(t)),tF=t=>{const s=W2(t),c=b4(t),i=yx(t);return qO(s).map(},RU={ToolbarLocation:Z1,ToolbarMode:nF}=GL,NU=40,MU=(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:p}=c,C=_1.DOM,S=Zb(t),T=G2(t),A=yx(t).or(tF(t)),N=i.shared.header,P=N.isPositionedAtTop,L=zb(t),U=L===nF.sliding||L===nF.floating,J=Vt(!1),he=()=>J.get()&&!t.removed,ce=zt=>U?zt.fold(re(0),qn=>qn.components().length>1?mt(qn.components()[1].element):0):0,oe=zt=>{switch(Z2(t)){case Z1.auto:const qn=Ho.getToolbar(g.outerContainer),at=ce(qn),_t=mt(zt.element)-at,nn=ys(s);if(nn.y>_t)return"top";{const Ut=va(s),gn=Math.max(Ut.dom.scrollHeight,mt(Ut));return nn.bottom<gn-_t||Xr().bottom<nn.bottom-_t?"bottom":"top"}case Z1.bottom:return"bottom";case Z1.top:default:return"top"}},fe=zt=>{d.on(qn=>{gs.setModes(qn,[zt]),N.setDockingMode(zt);const at=P()?Qi.TopToBottom:Qi.BottomToTop;ht(qn.element,Qg,at)})},je=()=>{d.on(zt=>{const qn=A.getOrThunk(()=>{const at=qO(ts(ls(),"margin-left")).getOr(0);return Go(ls())-Tr(s).left+at});an(zt.element,"max-width",qn+"px")})},Be=zt=>{d.on(qn=>{const at=Ho.getToolbar(g.outerContainer),_t=ce(at),nn=ys(s),{top:rn,left:Ut}=Ae(t,g.outerContainer.element).fold(()=>({top:P()?Math.max(nn.y-mt(qn.element)+_t,0):nn.bottom,left:nn.x}),Xn=>{var Sc;const $i=ys(Xn),uu=(Sc=Xn.dom.scrollTop)!==null&&Sc!==void 0?Sc:0,md=co(Xn,ls()),Xh=md?Math.max(nn.y-mt(qn.element)+_t,0):nn.y-$i.y+uu-mt(qn.element)+_t;return{top:P()?Xh:nn.bottom,left:md?nn.x:nn.x-$i.x}}),gn={position:"absolute",left:Math.round(Ut)+"px",top:Math.round(rn)+"px"},Po=zt.map(Xn=>{const Sc=Rc(),$i=150,uu=window.innerWidth-(Ut-Sc.left);return{width:Math.max(Math.min(Xn,uu),$i)+"px"}}).getOr({});_c(g.outerContainer.element,{...gn,...Po})})},Ae=(zt,qn)=>qm(zt)?cO(qn):k.none(),Je=()=>{We(p,zt=>{zt.broadcastOn([qf()],{})})},ct=()=>{if(S)return k.none();if(Tr(g.outerContainer.element).left+sr(g.outerContainer.element)>=window.innerWidth-NU||As(g.outerContainer.element,"width").isSome()){an(g.outerContainer.element,"position","absolute"),an(g.outerContainer.element,"left","0px"),V(g.outerContainer.element,"width");const qn=sr(g.outerContainer.element);return k.some(qn)}else return k.none()},yn=zt=>{if(!he())return;S||je();const qn=S?k.none():ct();U&&Ho.refreshToolbar(g.outerContainer),S||Be(qn),T&&d.on(zt),Je()},St=()=>S||!T||!he()?!1:d.get().exists(zt=>{const qn=N.getDockingMode(),at=oe(zt);return at!==qn?(fe(at),!0):!1});return{isVisible:he,isPositionedAtTop:P,show:()=>{J.set(!0),an(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),We(p,,St(),qm(t)?yn(zt=>gs.isDocked(zt)?gs.reset(zt):gs.refresh(zt)):yn(gs.refresh)},hide:()=>{J.set(!1),an(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),We(p,zt=>{an(zt.element,"display","none")})},update:yn,updateMode:()=>{St()&&yn(gs.reset)},repositionPopups:Je}},KO=(t,s)=>{const c=ys(t);return{pos:s?c.y:c.bottom,bounds:c}},BU=(t,s,c,i)=>{const d=Vt(KO(s,c.isPositionedAtTop())),g=T=>{const{pos:A,bounds:N}=KO(s,c.isPositionedAtTop()),{pos:P,bounds:L}=d.get(),U=N.height!==L.height||N.width!==L.width;d.set({pos:A,bounds:N}),U&&Zx(t,T),c.isVisible()&&(P!==A?c.update(gs.reset):U&&(c.updateMode(),c.repositionPopups()))};i||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(gs.reset)),t.on("NodeChange keydown",;let p=0;const C=EE(33);t.on("ScrollWindow",()=>{const T=Rc().left;T!==p&&(p=T,C.throttle()),c.updateMode()}),qm(t)&&t.on("ElementScroll",;const S=Pd();S.set(tb(de.fromDom(t.getBody()),"load",),t.on("remove",};var $U=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g}=s,p=_n(),C=de.fromDom(d.targetNode),S=MU(t,C,s,i,p),T=nN(t);S$(t);const A=()=>{if(p.isSet()){S.show();return}p.set(Ho.getHeader(g.outerContainer).getOrDie());const P=D4(t);qm(t)?(Ld(C,g.mothership),Ld(C,s.popupUi.mothership)):oc(P,g.mothership),oc(P,s.dialogUi.mothership),Y$(t,s,c,i),Ho.setMenubar(g.outerContainer,rT(t,c)),S.show(),BU(t,C,S,T),t.nodeChanged()};t.on("show",A),t.on("hide",S.hide),T||(t.on("focus",A),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||T)&&A()}),nM(t,s);const N={show:A,hide:S.hide,setEnabled:isEnabled:;return{editorContainer:g.outerContainer.element.dom,api:N}}});const FU=()=>{const t=_n(),s=_n(),c=_n();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),p=s.get().map(;return g.fold(C=>p.fold(S=>co(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,p)=>()=>c.get().bind(C=>p(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},LU="contexttoolbar-show",oF="contexttoolbar-hide",IU=t=>({hide:()=>Fn(t,Cp()),getValue:()=>pt.getValue(t)}),xv=(t,s)=>Pe(xA,(c,i)=>{const d=t.get(c),g=IU(d);s.onAction(g,i.event.buttonApi)}),sF=(t,s,c)=>{const{primary:i,...d}=s.original,g=Ro(Q4({...d,type:"button",onAction:j}));return Z$(g,c,[xv(t,s)])},HU=(t,s,c)=>{const{primary:i,...d}=s.original,g=Ro(IN({...d,type:"togglebutton",onAction:j}));return j$(g,c,[xv(t,s)])},VU=t=>t.type==="contextformtogglebutton",rF=(t,s,c)=>VU(s)?HU(t,s,c):sF(t,s,c),YO=(t,s,c)=>{const i=ye(s,;return{asSpecs:findPrimary:p=>vs(s,(C,S)=>C.primary?k.from(i[S]).bind(T=>T.getOpt(p)).filter(_e(Zt.isDisabled)):k.none())}},XO=(t,s)=>{const c=t.label.fold(()=>({}),,i=po(O1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:et([Lt.config({mode:"special",onEnter:g=>d.findPrimary(g).map(,onLeft:(g,p)=>(p.cut(),k.none()),onRight:(g,p)=>(p.cut(),k.none())})])})),d=YO(i,t.commands,s);return[{title:k.none(),items:[i.asSpec()]},{title:k.none(),items:d.asSpecs()}]},UU={renderContextForm:(t,s,c)=>OO({type:t,uid:wt("context-toolbar"),initGroups:XO(s,c),onEscape:k.none,cyclicKeying:!0,providers:c}),buildInitGroups:XO},j1=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,vT=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=pd(de.fromDom(t.startContainer),t.startOffset).element;return(Sr(c)?xr(c):k.some(c)).filter(ro).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},KC=t=>{const s=t.selection.getRng(),c=vT(s);if(t.inline){const i=Rc();return ds(i.left+c.left,i.top+c.top,c.width,c.height)}else{const i=Ca(de.fromDom(t.getBody()));return ds(i.x+c.left,i.y+c.top,c.width,c.height)}},cF=(t,s)=>s.filter(c=>Vn(c)&&Ui(c)).map(Ca).getOrThunk(()=>KC(t)),aF=(t,s,c)=>{const i=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:i,width:d-i}},WU=(t,s,c,i,d,g)=>{const p=de.fromDom(t.getContainer()),C=Zs(p,".tox-editor-header").getOr(p),S=ys(C),T=S.y>=s.bottom,A=i&&!T;if(t.inline&&A)return{y:Math.max(S.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!A)return{y:c.y,bottom:Math.min(S.y-g,c.bottom)};const N=d==="line"?ys(p):s;return A?{y:Math.max(S.bottom+g,c.y),bottom:Math.min(N.bottom-g,c.bottom)}:{y:Math.max(N.y+g,c.y),bottom:Math.min(S.y-g,c.bottom)}},JO=(t,s,c,i=0)=>{const d=pg(window),g=ys(de.fromDom(t.getContentAreaContainer())),p=Wb(t)||_x(t)||j2(t),{x:C,width:S}=aF(g,d,i);if(t.inline&&!p)return ds(C,d.y,S,d.height);{const T=s.header.isPositionedAtTop(),{y:A,bottom:N}=WU(t,g,d,T,c,i);return ds(C,A,S,N-A)}},yT=12,iF={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},lF={maxHeightFunction:Jg(),maxWidthFunction:QE()},ZU=(t,s)=>{const c=t.selection.getRng(),i=pd(de.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&co(i.element,s)},jU=(t,s,c)=>{const i=As(t,"position");an(t,"position",s);const d=c(t);return i.each(g=>an(t,"position",g)),d},QO=CT=(t,s,c,i,d)=>{const g=KC(t),p=i.lastElement().exists(C=>co(c,C));if(ZU(t,c))return p?X5:ru;if(p)return jU(s,i.getMode(),()=>j1(g,ys(s),-20)&&!i.isReposition()?R9:X5);{const C=i.getMode()==="fixed"?d.y+Rc().top:d.y,S=mt(s)+yT;return C+S<=g.y?ru:MC}},uF=(t,s,c,i)=>{const d=S=>(T,A,N,P,L)=>{const U=CT(t,P,S,c,L),J={...T,y:L.y,height:L.height};return{...U(J,A,N,P,L),alwaysFit:!0}},g=S=>QO(i)?[d(S)]:[];return s?{onLtr:S=>[Dr,Or,vc,da,Bc,jc].concat(g(S)),onRtl:S=>[Dr,vc,Or,Bc,da,jc].concat(g(S))}:{onLtr:S=>[jc,Dr,da,Or,Bc,vc].concat(g(S)),onRtl:S=>[jc,Dr,Bc,vc,da,Or].concat(g(S))}},dF=(t,s,c,i)=>s==="line"?{bubble:Wu(yT,0,iF),layouts:{onLtr:()=>[Sy],onRtl:()=>[Fp]},overrides:lF}:{bubble:Wu(0,yT,iF,1/yT),layouts:uF(t,c,i,s),overrides:lF},YC=(t,s)=>{const c=Kn(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Ts(c,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},GU=t=>{if(t.length<=1)return t;{const s=g=>cs(t,p=>p.position===g),c=g=>Kn(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=c("node"),p=ye(c("selection"),;return g.concat(p)}else return c(i?"selection":"node");else return c("line")}},mF=t=>{if(t.length<=1)return t;{const s=i=>Re(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],}},qU=(t,s,c)=>{const i=YC(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=YC(t,c);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=GU(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},KU=(t,s,c)=>t(s)?k.none():hS(s,i=>{if(ro(i)){const{contextToolbars:d,contextForms:g}=YC(i,c.inNodeScope),p=g.length>0?g:mF(d);return p.length>0?k.some({elem:i,toolbars:p}):k.none()}else return k.none()},t),ST=(t,s)=>{const c=de.fromDom(s.getBody()),i=p=>co(p,c),d=p=>!i(p)&&!wr(c,p),g=de.fromDom(s.selection.getNode());return d(g)?k.none():qU(g,t.inNodeScope,t.inEditorScope).orThunk(()=>KU(i,g,t))},fF=(t,s)=>{const c={},i=[],d=[],g={},p={},C=(A,N)=>{const P=Ro(gI(N));c[A]=P,P.launch.map(L=>{g["form:"+A]={...N.launch,type:L.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(P)}}}),P.scope==="editor"?d.push(P):i.push(P),p[A]=P},S=(A,N)=>{pI(N).each(P=>{N.scope==="editor"?d.push(P):i.push(P),p[A]=P})},T=Uo(t);return We(T,A=>{const N=t[A];N.type==="contextform"?C(A,N):N.type==="contexttoolbar"&&S(A,N)}),{forms:c,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},gF=wt("forward-slide"),hF=wt("backward-slide"),eD=wt("change-slide-event"),tD="tox-pop--resizing",YU=t=>{const s=Vt([]);return ws.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),ws.getContent(c).each(i=>{V(i.element,"visibility")}),fs(c.element,tD),V(c.element,"width")},inlineBehaviours:et([vn("context-toolbar-events",[$u(Df(),(c,i)=>{i.event.raw.propertyName==="width"&&(fs(c.element,tD),V(c.element,"width"))}),Pe(eD,(c,i)=>{const d=c.element;V(d,"width");const g=Go(d);ws.setContent(c,i.event.contents),Ws(d,tD);const p=Go(d);an(d,"width",g+"px"),ws.getContent(c).each(C=>{i.event.focus.bind(.orThunk(()=>(Lt.focusIn(C),Uu(xe(d))))}),setTimeout(()=>{an(c.element,"width",p+"px")},0)}),Pe(gF,(c,i)=>{ws.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:Uu(xe(c.element))}]))}),Ft(c,eD,{contents:i.event.forwardContents,focus:k.none()})}),Pe(hF,(c,i)=>{Ii(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Ft(c,eD,{contents:Ci(d.bar),focus:d.focus})})})]),Lt.config({mode:"special",onEscape:c=>Ii(s.get()).fold(()=>t.onEscape(),i=>(Fn(c,hF),k.some(!0)))})]),lazySink:()=>bn.value(t.sink)})},wT="tox-pop--transition",pF=(t,s,c,i)=>{const d=i.backstage,g=d.shared,p=ll().deviceType.isTouch,C=_n(),S=_n(),T=_n(),A=Mc(YU({sink:c,onEscape:()=>(t.focus(),k.some(!0))})),N=()=>{const St=T.get().getOr("node"),tn=QO(St)?1:0;return JO(t,g,St,tn)},P=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),L=St=>ic(ta(St,C.get(),co),!0),U=()=>{if(P()){const St=N(),tn=ic(T.get(),"node")?cF(t,C.get()):KC(t);return St.height<=0||!j1(tn,St,.01)}else return!0},J=()=>{C.clear(),S.clear(),T.clear(),ws.hide(A)},he=()=>{if(ws.isOpen(A)){const St=A.element;V(St,"display"),U()?an(St,"display","none"):(S.set(0),ws.reposition(A))}},ce=St=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[St],behaviours:et([Lt.config({mode:"acyclic"}),vn("pop-dialog-wrap-events",[No(tn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Lt.focusIn(tn))}),Fu(])])}),oe=us(()=>fF(s,St=>{const tn=Be([St]);Ft(A,gF,{forwardContents:ce(tn)})})),fe=(St,tn)=>gT(t,{buttons:St,toolbar:tn.items,allowToolbarGroups:!1},i.backstage,k.some(["form:"])),je=(St,tn)=>UU.buildInitGroups(St,tn),Be=St=>{const{buttons:tn}=t.ui.registry.getAll(),Yt=oe(),fo={...tn,...Yt.formNavigators},zt=zb(t)===ol.scrolling?ol.scrolling:ol.default,qn=De(ye(St,at=>at.type==="contexttoolbar"?fe(fo,at):je(at,g.providers)));return OO({type:zt,uid:wt("context-toolbar"),initGroups:qn,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},Ae=(St,tn)=>{const Yt=St==="node"?g.anchors.node(tn):g.anchors.cursor(),fo=dF(t,St,p(),{lastElement:C.get,isReposition:getMode:()=>Pc.getMode(c)});return yo(Yt,fo)},Je=(St,tn)=>{if(yn.cancel(),!P())return;const Yt=Be(St),fo=St[0].position,zt=Ae(fo,tn);T.set(fo),S.set(1);const qn=A.element;V(qn,"display"),L(tn)||(fs(qn,wT),Pc.reset(c,A)),ws.showWithinBounds(A,ce(Yt),{anchor:zt,transition:{classes:[wT],mode:"placement"}},,tn.fold(C.clear,C.set),U()&&an(qn,"display","none")};let ct=!1;const yn=EE(()=>{if(!(!t.hasFocus()||t.removed||ct))if(hr(A.element,wT))yn.throttle();else{const St=oe();ST(St,t).fold(J,tn=>{Je(tn.toolbars,k.some(tn.elem))})}},17);t.on("init",()=>{t.on("remove",J),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",he),t.on("click keyup focus SetContent",yn.throttle),t.on(oF,J),t.on(LU,St=>{const tn=oe();dt(tn.lookupTable,St.toolbarKey).each(Yt=>{Je([Yt],Gt(St.target!==t,St.target)),ws.getContent(A).each(Lt.focusIn)})}),t.on("focusout",St=>{E1.setEditorTimeout(t,()=>{vl(c.element).isNone()&&vl(A.element).isNone()&&J()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&J()}),t.on("AfterProgressState",St=>{St.state?J():t.hasFocus()&&yn.throttle()}),t.on("dragstart",()=>{ct=!0}),t.on("dragend drop",,t.on("NodeChange",St=>{vl(A.element).fold(yn.throttle,j)})})},XU=t=>{We([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:Ai(t,c.cmd),onSetup:jx(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ba(t),onAction:Ai(t,"JustifyNone")})},bF=(t,s)=>{const c=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=_n();return ye(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:C=>{const S=A=>{A&&(g.on(,g.set(C)),C.setActive(A)};S(ic(d,s.hash(p)));const T=s.watcher(t,p,S);return,onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},vF=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:uN,hash:s=>eU(s,["fixed","relative","empty"]).getOr(s),display:bt,watcher:(s,c,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:c}).unbind,getCurrent:setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:Ba(t),onMenuSetup:Ba(t)}),JU=t=>k.from(eN(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:re(c),hash:i=>rs(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=de.fromDom(i.selection.getNode());return _f(d,g=>k.some(g).filter(ro).bind(p=>Er(p,"lang").map(S=>{const T=Er(p,"data-mce-lang").getOrUndefined();return{code:S,customCode:T,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=Pd();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),rC(d.clear,Ba(t)(i))},onMenuSetup:Ba(t)})),QU=t=>{bF(t,vF(t)),JU(t).each(s=>bF(t,s))},eW=(t,s)=>{VO(t,s),B$(t,s),fU(t,s),O$(t,s),uU(t,s)},tW=t=>td(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),nW=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:tW(t),onAction:Ai(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ba(t),onAction:Ai(t,"indent")})},nD=t=>{nW(t)},yF=(t,s)=>c=>{c.setActive(s.get());const i=return t.on("PastePlainTextToggle",i),rC(()=>t.off("PastePlainTextToggle",i),Ba(t)(c))},oW=t=>{const s=Vt(xx(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:yF(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:yF(t,s)})},XC=(t,s)=>CF=t=>{ug.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:jx(t,s.name),onAction:XC(t,s.name)})});for(let s=1;s<=6;s++){const c="h"+s;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:jx(t,c),onAction:XC(t,c)})}},SF=t=>{ug.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ai(t,s.action)})}),ug.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ba(t),onAction:Ai(t,s.action)})})},sW=t=>{ug.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ai(t,s.action),onSetup:jx(t,s.name)})})},rW=cW=t=>{ug.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Ai(t,s.action)})}),ug.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ba(t),onAction:Ai(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ba(t),onAction:XC(t,"code")})},aW=t=>{rW(t),cW(t)},xT=(t,s)=>td(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),oD=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:xT(t,"hasUndo"),onAction:Ai(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:xT(t,"hasRedo"),onAction:Ai(t,"redo")})},iW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:xT(t,"hasUndo"),onAction:Ai(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:xT(t,"hasRedo"),onAction:Ai(t,"redo")})},wF=t=>{oD(t),iW(t)},lW=t=>td(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),uW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:lW(t),onAction:Ai(t,"mceToggleVisualAid")})},sD=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ai(t,"mceToggleVisualAid")})},dW=t=>{sD(t),uW(t)},xF=(t,s)=>{XU(t),aW(t),eW(t,s),wF(t),O3(t),dW(t),nD(t),QU(t),oW(t)},mW=t=>nt(t)?t.split(/[ ,]/):t,EF=t=>s=>s.options.get(t),rD=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:nt(c)||Ht(c,nt)?{value:mW(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},TF=EF("contextmenu_never_use_native"),fW=EF("contextmenu_avoid_overlap"),gW=kF=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:Kn(c,i=>Gn(s,i))},JC=(t,s)=>({type:"makeshift",x:t,y:s}),_F=(t,s,c)=>JC(t.x+s,t.y+c),AF=t=>t.type==="longpress"||t.type.indexOf("touch")===0,hW=t=>{if(AF(t)){const s=t.touches[0];return JC(s.pageX,s.pageY)}else return JC(t.pageX,t.pageY)},pW=t=>{if(AF(t)){const s=t.touches[0];return JC(s.clientX,s.clientY)}else return JC(t.clientX,t.clientY)},bW=(t,s)=>{const c=_1.DOM.getPos(t);return _F(s,c.x,c.y)},vW=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?hW(s):bW(t.getContentAreaContainer(),pW(s)):OF(t),OF=t=>({type:"selection",root:de.fromDom(t.selection.getNode())}),yW=t=>({type:"node",node:k.some(de.fromDom(t.selection.getNode())),root:de.fromDom(t.getBody())}),DF=(t,s,c)=>{switch(c){case"node":return yW(t);case"point":return vW(t,s);case"selection":return OF(t)}},RF=(t,s,c,i,d,g)=>{const p=c(),C=DF(t,s,g);hv(p,Yd.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(S=>{s.preventDefault(),ws.showMenuAt(d,{anchor:C},{menu:{markers:sg("normal")},data:S})})},CW={onLtr:()=>[Dr,Or,vc,da,Bc,jc,ru,MC,NC,bv,RC,DC],onRtl:,NF=12,SW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},wW=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=c.getRng();return Yy(t.getWin(),nc.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},xW=t=>{const s=t.selection.getRng(),c=()=>{E1.setEditorTimeout(t,10),g()};t.once("touchend",c);const i=t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=,G1=(t,s,c)=>{const i=DF(t,s,c);return{bubble:Wu(0,c==="point"?NF:0,SW),layouts:CW,overrides:{maxWidthFunction:QE(),maxHeightFunction:Jg()},...i}},MF=(t,s,c,i,d,g,p)=>{const C=G1(t,s,g);hv(c,Yd.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(S=>{s.preventDefault();const T=p?Ma.HighlightMenuAndItem:Ma.HighlightNone;ws.showMenuWithinBounds(d,{anchor:C},{menu:{markers:sg("normal"),highlightOnOpen:T},data:S,type:"horizontal"},()=>k.some(JO(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(oF)})},EW=(t,s,c,i,d,g)=>{const p=ll(),C=p.os.isiOS(),S=p.os.isMacOS(),T=p.os.isAndroid(),A=p.deviceType.isTouch(),N=()=>!(T||C||S&&A),P=()=>{const L=c();MF(t,s,L,i,d,g,N())};if((S||C)&&g!=="node"){const L=wW(t,s)?L():(t.once("selectionchange",L),t.once("touchend",()=>t.off("selectionchange",L)))}else P()},BF=t=>nt(t)?t==="|":t.type==="separator",cD={type:"separator"},PF=t=>{const s=if(nt(t))return t;switch(t.type){case"separator":return cD;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return nt(i)?i:ye(i,PF)}};default:const c=t;return{type:"menuitem",...s(c),onAction:Ve(c.onAction)}}},aD=(t,s)=>{if(s.length===0)return t;const i=Ii(t).filter(d=>!BF(d)).fold(d=>[cD]);return t.concat(i).concat(s).concat([cD])},TW=(t,s,c)=>{const i=no(s,(d,g)=>dt(t,g.toLowerCase()).map(p=>{const C=p.update(c);if(nt(C)&&lc(ui(C)))return aD(d,C.split(" "));if(Hn(C)&&C.length>0){const S=ye(C,PF);return aD(d,S)}else return d}).getOrThunk(,[]);return i.length>0&&BF(i[i.length-1])&&i.pop(),i},kW=(t,s)=>s.ctrlKey&&!TF(t),_W=t=>t.type==="longpress"||Gn(t,"touches"),$F=(t,s)=>!_W(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),FF=(t,s)=>$F(t,s)?t.selection.getStart(!0):s.target,AW=(t,s)=>{const c=fW(t),i=$F(t,s)?"selection":"point";if(lc(c)){const d=FF(t,s);return lC(de.fromDom(d),c)?"node":i}else return i},OW=(t,s,c)=>{const d=ll().deviceType.isTouch,g=Mc(ws.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:fireDismissalEventInstead:{},inlineBehaviours:et([vn("dismissContextMenu",[Pe(Em(),(S,T)=>{Ln.close(S),t.focus()})])])})),p=()=>ws.hide(g),C=S=>{if(TF(t)&&S.preventDefault(),kW(t,S)||gW(t))return;const T=AW(t,S),A=()=>{const P=FF(t,S),L=t.ui.registry.getAll(),U=kF(t);return TW(L.contextMenus,U,P)};(d()?EW:RF)(t,S,A,c,g,T)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,p),t.on("longpress contextmenu",C)})},iD=Ka.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ET=t=>s=>s.translate(-t.left,-t.top),TT=t=>af=t=>(s,c)=>no(t,(i,d)=>d(i),On(s,c)),QC=(t,s,c)=>t.fold(af([TT(c),ET(s)]),af([ET(s)]),af([])),Ev=(t,s,c)=>t.fold(af([TT(c)]),af([]),af([TT(s)])),Tv=(t,s,c)=>t.fold(af([]),af([ET(c)]),af([TT(s),ET(c)])),DW=(t,s,c,i,d,g)=>{const p=Ev(t,d,g),C=Ev(s,d,g);return Math.abs(p.left-C.left)<=c&&Math.abs(p.top-C.top)<=i},RW=(t,s,c,i,d,g)=>{const p=Ev(t,d,g),C=Ev(s,d,g),S=Math.abs(p.left-C.left),T=Math.abs(p.top-C.top);return On(S,T)},kT=(t,s,c)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-c.left+"px"),top:k.some(g-c.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},NW=(t,s,c)=>t.fold((i,d)=>_T(i+s,d+c),(i,d)=>Uh(i+s,d+c),,lD=(t,s,c,i)=>{const d=(g,p)=>(C,S)=>{const T=g(s,c,i);return p(C.getOr(T.left),S.getOr(T.top))};return t.fold(d(Tv,_T),d(Ev,Uh),d(QC,q1))},_T=iD.offset,Uh=iD.absolute,q1=iD.fixed,LF=(t,s)=>{const c=Qo(t,s);return rs(c)?NaN:parseInt(c,10)},MW=(t,s)=>{const c=t.element,i=LF(c,s.leftAttr),d=LF(c,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(On(i,d))},BW=(t,s,c)=>{const i=t.element;ht(i,s.leftAttr,c.left+"px"),ht(i,s.topAttr,c.top+"px")},PW=(t,s)=>{const c=t.element;es(c,s.leftAttr),es(c,s.topAttr)},$W=(t,s,c,i)=>MW(t,s).fold(()=>c,d=>q1(d.left+i.left,d.top+i.top)),FW=(t,s,c,i,d,g)=>{const p=$W(t,s,c,i),C=s.mustSnap?IW(t,s,p,d,g):HW(t,s,p,d,g),S=QC(p,d,g);return BW(t,s,S),C.fold(()=>({coord:q1(S.left,S.top),extra:k.none()}),},LW=IF=(t,s,c,i)=>vs(t,d=>{const g=d.sensor;return DW(s,g,d.range.left,d.range.top,c,i)?k.some({output:lD(d.output,s,c,i),extra:d.extra}):k.none()}),IW=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return IF(g,c,i,d).orThunk(()=>no(g,(S,T)=>{const A=T.sensor,N=RW(c,A,T.range.left,T.range.top,i,d);return S.deltas.fold(()=>({deltas:k.some(N),snap:k.some(T)}),P=>{const L=(N.left+N.top)/2,U=(P.left+P.top)/2;return L<=U?{deltas:k.some(N),snap:k.some(T)}:S})},{deltas:k.none(),snap:k.none()}).snap.map(S=>({output:lD(S.output,c,i,d),extra:S.extra})))},HW=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return IF(g,c,i,d)},VW=(t,s,c)=>({coord:lD(t.output,t.output,s,c),extra:t.extra});var AT=Object.freeze({__proto__:null,snapTo:(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Gr(t.element),p=Rc(g),C=_P(d),S=VW(i,p,C),T=kT(S.coord,p,C);Ke(d,T)}}});const uD="data-initial-z-index",zW=t=>{xr(t.element).filter(ro).each(s=>{Er(s,uD).fold(,es(s,uD)})},UW=t=>{xr(t.element).filter(ro).each(s=>{As(s,"z-index").each(,an(s,"z-index",ts(t.element,"z-index"))})},HF=(t,s)=>{t.getSystem().addToGui(s),UW(s)},WW=t=>{zW(t),t.getSystem().removeFromGui(t)},VF=(t,s,c)=>t.getSystem().build(Xd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var zF=xa("snaps",[Le("getSnapPoints"),Un("onSensor"),Le("leftAttr"),Le("topAttr"),ge("lazyViewport",Xr),ge("mustSnap",!1)]);const dD=[ge("useFixed",Xe),Le("blockerClass"),ge("getTarget",bt),ge("onDrag",j),ge("repositionTarget",!0),ge("onDrop",j),Hr("getBounds",Xr),zF],ZW=t=>pa(As(t,"left"),As(t,"top"),As(t,"position"),(s,c,i)=>(i==="fixed"?q1:_T)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=Tr(t);return Uh(s.left,s.top)}),jW=(t,s,c,i,d)=>{const g=d.bounds,p=Ev(s,c,i),C=Si(p.left,g.x,g.x+g.width-d.width),S=Si(p.top,g.y,g.y+g.height-d.height),T=Uh(C,S);return s.fold(()=>{const A=Tv(T,c,i);return _T(A.left,A.top)},re(T),()=>{const A=QC(T,c,i);return q1(A.left,A.top)})},GW=(t,s,c,i,d,g,p)=>{const C=s.fold(()=>{const S=NW(c,g.left,g.top),T=QC(S,i,d);return q1(T.left,T.top)},S=>{const T=FW(t,S,c,g,i,d);return T.extra.each(,T.coord});return jW(t,C,i,d,p)},qW=(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Gr(t.element),p=Rc(g),C=_P(d),S=ZW(d),T=GW(t,s.snaps,S,p,C,i,c),A=kT(T,p,C);Ke(d,A)}s.onDrag(t,d,i)},OT=(t,s)=>({bounds:t.getBounds(),height:kn(s.element),width:sr(s.element)}),DT=(t,s,c,i,d)=>{const g=c.update(i,d),p=c.getStartData().getOrThunk(()=>OT(s,t));g.each(C=>{qW(t,s,p,C)})},UF=(t,s,c,i)=>{s.each(WW),c.snaps.each(g=>{LW(t,g)});const d=c.getTarget(t.element);i.reset(),c.onDrop(t,d)},mD=t=>(s,c)=>{const i=return Lo([Pe(Pu(),d=>{c.getStartData().each(()=>i(d))}),...t(s,c,i)])},KW=t=>Lo([Pe(gr(),t.forceDrop),Pe(Zv(),t.drop),Pe(xg(),(s,c)=>{t.move(c.event)}),Pe(Eg(),t.delayDrop)]);var YW=Object.freeze({__proto__:null,getData:t=>k.from(On(t.x,t.y)),getDelta:(t,s)=>On(s.left-t.left,s.top-t.top)});const WF=(t,s,c)=>[Pe(gr(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>UF(i,k.some(T),t,s),C=XM(p,200),S={drop:p,delayDrop:C.schedule,forceDrop:p,move:N=>{C.cancel(),DT(i,t,s,YW,N)}},T=VF(i,t.blockerClass,KW(S));(()=>{c(i),HF(i,T)})()})],XW=[...dD,Co("dragger",{handlers:mD(WF)})],JW=t=>Lo([Pe(Bu(),t.forceDrop),Pe(Af(),t.drop),Pe(yS(),t.drop),Pe(wg(),]),QW=t=>{const s=t[0];return k.some(On(s.clientX,s.clientY))};var ZF=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?QW(c):k.none()},getDelta:(t,s)=>On(s.left-t.left,s.top-t.top)});const jF=(t,s,c)=>{const i=_n(),d=g=>{UF(g,i.get(),t,s),i.clear()};return[Pe(Bu(),(g,p)=>{p.stop();const C=()=>d(g),S={drop:C,delayDrop:j,forceDrop:C,move:N=>{DT(g,t,s,ZF,N)}},T=VF(g,t.blockerClass,JW(S));i.set(T),(()=>{c(g),HF(g,T)})()}),Pe(wg(),(g,p)=>{p.stop(),DT(g,t,s,ZF,p.event)}),Pe(Af(),(g,p)=>{p.stop(),d(g)}),Pe(yS(),d)]},eZ=[...dD,Co("dragger",{handlers:mD(jF)})],tZ=(t,s,c)=>[...WF(t,s,c),...jF(t,s,c)],nZ=[...dD,Co("dragger",{handlers:mD(tZ)})];var sZ=Object.freeze({__proto__:null,mouse:XW,touch:eZ,mouseOrTouch:nZ}),rZ=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const c=()=>{t=k.none(),s=k.none()},i=(S,T)=>{const A=t.map(N=>S.getDelta(N,T));return t=k.some(T),A},d=(S,T)=>S.getData(T).bind(A=>i(S,A)),g=S=>{s=k.some(S)},p=()=>s,C=re({});return Ja({readState:C,reset:c,update:d,getStartData:p,setStartData:g})}});const K1=eb({branchKey:"mode",branches:sZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:,state:rZ,apis:AT}),fD=40,RT=fD/2,gD=(t,s,c,i,d,g)=>t.fold(()=>K1.snap({sensor:Uh(c-RT,i-RT),range:On(d,g),output:Uh(k.some(c),k.some(i)),extra:{td:s}}),p=>{const C=c-RT,S=i-RT,T=fD,A=fD,N=p.element.dom.getBoundingClientRect();return K1.snap({sensor:Uh(C,S),range:On(T,A),output:Uh(k.some(c-N.width/2),k.some(i-N.height/2)),extra:{td:s}})}),hD=(t,s,c)=>{const i=(d,g)=>d.exists(p=>co(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),c(p))},mustSnap:!0}},Wh=t=>po(sc.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:et([K1.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),gC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),cZ=(t,s)=>{const c=Vt([]),i=Vt([]),d=Vt(!1),g=_n(),p=_n(),C=Je=>{const ct=Ca(Je);return gD(L.getOpt(s),Je,ct.x,ct.y,ct.width,ct.height)},S=()=>ye(c.get(),Je=>C(Je)),T=Je=>{const ct=Ca(Je);return gD(U.getOpt(s),Je,ct.right,ct.bottom,ct.width,ct.height)},A=()=>ye(i.get(),Je=>T(Je)),N=hD(S,g,Je=>{p.get().each(ct=>{t.dispatch("TableSelectorChange",{start:Je,finish:ct})})}),P=hD(A,p,Je=>{g.get().each(}),L=Wh(N),U=Wh(P),J=Mc(L.asSpec()),he=Mc(U.asSpec()),ce=(Je,ct,yn,St)=>{const tn=ct.dom.getBoundingClientRect();V(Je.element,"display");const Yt=ya(de.fromDom(t.getBody())).dom.innerHeight,fo=yn(tn),zt=St(tn,Yt);(fo||zt)&&an(Je.element,"display","none")},oe=(Je,ct,yn,St)=>{const tn=yn(ct);K1.snapTo(Je,tn),ce(Je,ct,(zt,qn)=>zt[St]>qn)},fe=Je=>oe(J,Je,C,"top"),je=()=>g.get().each(fe),Be=Je=>oe(he,Je,T,"bottom"),Ae=()=>p.get().each(Be);ll().deviceType.isTouch()&&(t.on("TableSelectionChange",Je=>{d.get()||(Vm(s,J),Vm(s,he),d.set(!0)),g.set(Je.start),p.set(Je.finish),Je.otherCells.each(ct=>{c.set(ct.upOrLeftCells),i.set(ct.downOrRightCells),fe(Je.start),Be(Je.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{je(),Ae()}),t.on("TableSelectionClear",()=>{d.get()&&(ju(J),ju(he),d.set(!1)),g.clear(),p.clear()}))};var pD=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const NT=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",aZ=(t,s,c)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"\u203A",g=(T,A,N)=>sc.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":N,"aria-level":N+1}},components:[Fs(T)],action:P=>{t.focus(),t.selection.select(A),t.nodeChanged()},buttonBehaviours:et([br.button(c.isDisabled),Br()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Fs(` ${d} `)]}),C=T=>no(T,(A,N,P)=>{const L=g(N.name,N.element,P);return P===0?A.concat([L]):A.concat([p(),L])},[]),S=T=>{const A=[];let N=T.length;for(;N-- >0;){const P=T[N];if(P.nodeType===1&&!NT(P)){const L=wM(t,P);if(L.isDefaultPrevented()||A.push({name:L.name,element:P}),L.isPropagationStopped())break}}return A};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:et([Lt.config({mode:"flow",selector:"div[role=button]"}),Zt.config({disabled:c.isDisabled}),Br(),os.config({}),fn.config({}),vn("elementPathEvents",[No((T,A)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Lt.focusIn(T)),t.on("NodeChange",N=>{const P=S(N.parents),L=P.length>0?C(P):[];fn.set(T,L)})})])]),components:[]}};var Zh;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Zh||(Zh={}));const iZ=(t,s,c,i,d)=>{const g={height:bT(i+s.top,Vb(t),v4(t))};return c===Zh.Both&&(g.width=bT(d+s.left,b4(t),yx(t))),g},GF=(t,s,c)=>{const i=de.fromDom(t.getContainer()),d=iZ(t,s,c,mt(i),Go(i));$o(d,(g,p)=>{Rs(g)&&an(i,p,pT(g))}),CM(t)},lZ=t=>{const s=aN(t);return s===!1?Zh.None:s==="both"?Zh.Both:Zh.Vertical},lf=(t,s,c,i)=>{const g=On(c*20,i*20);return GF(t,g,s),k.some(!0)},qF=(t,s)=>{const c=lZ(t);if(c===Zh.None)return k.none();const i=c===Zh.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return k.some(Ju("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize"),"aria-label":s.translate(i)},behaviours:[K1.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,p)=>GF(t,p,c),blockerClass:"tox-blocker"}),Lt.config({mode:"special",onLeft:()=>lf(t,c,-1,0),onRight:()=>lf(t,c,1,0),onUp:()=>lf(t,c,0,-1),onDown:),os.config({}),Kt.config({})]},s.icons))},uZ=(t,s)=>{const c=(i,d,g)=>fn.set(i,[Fs(s.translate(["{0} "+g,d[g]]))]);return sc.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:et([br.button(s.isDisabled),Br(),os.config({}),fn.config({}),pt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),vn("wordcount-events",[hl(i=>{const d=pt.getValue(i),g=d.mode==="words"?"characters":"words";pt.setValue(i,{mode:g,count:d.count}),c(i,d.count,g)}),No(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=pt.getValue(i);pt.setValue(i,{mode:g,count:d.wordCount}),c(i,d.wordCount,g)})})])]),eventOrder:{[Xa()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},dZ=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":El.translate(["Powered by {0}","Tiny"])},innerHtml:pD.trim()},behaviours:et([Kt.config({})])}]}),i=()=>{const C=zx("Alt+0"),S="Press {0} for help";return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Fs(El.translate([S,C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(uZ(t,s)),T4(t)&&C.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=Tx(t),T=Ub(t),A=T4(t)||t.hasPlugin("wordcount"),N=()=>{const P="tox-statusbar__text-container--flex-start",L="tox-statusbar__text-container--flex-end",U="tox-statusbar__text-container--space-around";if(S){const J="tox-statusbar__text-container-3-cols";return!A&&!T?[J,U]:A&&!T?[J,L]:[J,P]}return[A&&!T?L:P]};return T&&C.push(aZ(t,{},s)),S&&C.push(i()),A&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...N()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=qF(t,s);return C.concat(S.toArray())})()}},KF=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),mZ=(t,s)=>{const c=t.inline,i=c?$U:eF,d=G2(t)?IP:IC,g=FU(),p=_n(),C=_n(),S=_n(),P=ll().deviceType.isTouch()?["tox-platform-touch"]:[],L=O4(t),U=zb(t),J=po({dom:{tag:"div",classes:["tox-anchorbar"]}}),he=po({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ce=()=>g.mainUi.get().map(Ut=>Ut.outerContainer).bind(Ho.getHeader),oe=()=>bn.fromOption(g.dialogUi.get().map(Ut=>Ut.sink),"UI has not been rendered"),fe=()=>bn.fromOption(g.popupUi.get().map(Ut=>Ut.sink),"(popup) UI has not been rendered"),je=g.lazyGetInOuterOrDie("anchor bar",J.getOpt),Be=g.lazyGetInOuterOrDie("bottom anchor bar",he.getOpt),Ae=g.lazyGetInOuterOrDie("toolbar",Ho.getToolbar),Je=g.lazyGetInOuterOrDie("throbber",Ho.getThrobber),ct=vv({popup:fe,dialog:oe},t,je,Be),yn=()=>{const Ut={attributes:{[Qg]:L?Qi.BottomToTop:Qi.TopToBottom}},gn=Ho.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ct.popup,onEscape:()=>{t.focus()}}),Po=Ho.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ct.popup.shared.getSink,providers:ct.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:iS=>{VI(t,iS)},type:U,lazyToolbar:Ae,lazyHeader:...Ut}),Xn=Ho.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ct.popup.shared.providers,onEscape:()=>{t.focus()},type:U}),Sc=j2(t),$i=_x(t),uu=Wb(t),md=iN(t),Xh=St(),t0=Sc||$i||uu,cm=()=>Sc?[Xn]:$i?[Po]:[],gg=md?[Xh,gn]:[gn];return Ho.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(t0?[]:["tox-editor-header--empty"]),...Ut},components:De([uu?gg:[],cm(),Zb(t)?[]:[J.asSpec()]]),sticky:G2(t),editor:t,sharedBackstage:ct.popup.shared})},St=()=>Ho.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),tn=()=>{const Ut=Ho.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),gn=Ho.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ut,gn]}},Yt=()=>{const Ut=D4(t),gn=co(ls(),Ut)&&ts(Ut,"display")==="grid",Po={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(P),attributes:{...El.isRtl()?{dir:"rtl"}:{}}},behaviours:et([Pc.config({useFixed:()=>d.isDocked(ce)})])},Xn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Lo([Pe(Ul(),uu=>{an(uu.element,"width",document.body.clientWidth+"px")})])},Sc=Mc(yo(Po,gn?Xn:{})),$i=sE(Sc);return C.set($i),{sink:Sc,mothership:$i}},fo=()=>{const Ut={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(P),attributes:{...El.isRtl()?{dir:"rtl"}:{}}},behaviours:et([Pc.config({useFixed:()=>d.isDocked(ce),getBounds:()=>s.getPopupSinkBounds()})])},gn=Mc(Ut),Po=sE(gn);return S.set(Po),{sink:gn,mothership:Po}},zt=()=>{const Ut=yn(),gn=tn(),Po=Ho.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ct.popup}),Xn=Ho.parts.viewWrapper({backstage:ct.popup}),Sc=cN(t)&&!c?k.some(dZ(t,ct.popup.shared.providers)):k.none(),$i=De([L?[]:[Ut],c?[]:[gn],L?[Ut]:[]]),uu=Ho.parts.editorContainer({components:De([$i,c?[]:[he.asSpec(),...Sc.toArray()]])}),md=R4(t),Xh={role:"application",...El.isRtl()?{dir:"rtl"}:{},...md?{"aria-hidden":"true"}:{}},t0=Mc(Ho.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(L?["tox-tinymce--toolbar-bottom"]:[]).concat(P),styles:{visibility:"hidden",...md?{opacity:"0",border:"0"}:{}},attributes:Xh},components:[uu,...c?[]:[Xn],Po],behaviours:et([Br(),Zt.config({disableClass:"tox-tinymce--disabled"}),Lt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),cm=sE(t0);return p.set(cm),{mothership:cm,outerContainer:t0}},qn=Ut=>{const gn=pT(DU(t)),Po=pT(RU(t));return t.inline||(Zi("div","width",Po)&&an(Ut.element,"width",Po),Zi("div","height",gn)?an(Ut.element,"height",gn):an(Ut.element,"height","400px")),gn},at=Ut=>{t.addShortcut("alt+F9","focus menubar",()=>{Ho.focusMenubar(Ut)}),t.addShortcut("alt+F10","focus toolbar",()=>{Ho.focusToolbar(Ut)}),t.addCommand("ToggleToolbarDrawer",(gn,Po)=>{Po!=null&&Po.skipFocus?Ho.toggleToolbarDrawerWithoutFocusing(Ut):Ho.toggleToolbarDrawer(Ut)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Ho.isToolbarDrawerToggled(Ut))},_t=Ut=>{const{mainUi:gn,popupUi:Po,uiMotherships:Xn}=Ut;Fo(tN(t),;const{buttons:Sc,menuItems:$i,contextToolbars:uu,sidebars:md,views:Xh}=t.ui.registry.getAll(),t0=A4(t),cm={menuItems:$i,menus:mN(t),menubar:C4(t),toolbar:t0.getOrThunk(()=>Sx(t)),allowToolbarGroups:U===ol.floating,buttons:Sc,sidebar:md,views:Xh};at(gn.outerContainer),wP(t,gn.mothership,Xn),d.setup(t,ct.popup.shared,ce),xF(t,ct.popup),OW(t,ct.popup.shared.getSink,ct.popup),WP(t),JV(t,Je,ct.popup.shared),pF(t,uu,Po.sink,{backstage:ct.popup}),cZ(t,Po.sink);const gg=t.getElement(),iS=qn(gn.outerContainer),AD={targetNode:gg,height:iS};return i.render(t,Ut,cm,ct.popup,AD)},nn=rn=()=>{const Ut=zt(),gn=Yt(),Po=qm(t)?fo():nn(gn);g.dialogUi.set(gn),g.popupUi.set(Po),g.mainUi.set(Ut);const Xn={popupUi:Po,dialogUi:gn,mainUi:Ut,uiMotherships:g.getUiMotherships()};return _t(Xn)};return{popups:{backstage:ct.popup,getMothership:()=>KF("popups",S)},dialogs:{backstage:ct.dialog,getMothership:,renderUI:rn}},fZ=(t,s)=>{const c=Er(t,"id").fold(()=>{const i=wt("dialog-label");return ht(s,"id",i),i},bt);ht(t,"aria-labelledby",c)},gZ=re([Le("lazySink"),mo("dragBlockClass"),Hr("getBounds",Xr),ge("useTabstopAt",Oe),ge("firstTabstop",0),ge("eventOrder",{}),pr("modalBehaviours",[Lt]),oi("onExecute"),fy("onEscape")]),bD={sketch:bt},hZ=re([Da({name:"draghandle",overrides:(t,s)=>({behaviours:et([K1.config({mode:"mouse",getTarget:c=>ti(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),$c({schema:[Le("dom")],name:"title"}),$c({factory:bD,schema:[Le("dom")],name:"close"}),$c({factory:bD,schema:[Le("dom")],name:"body"}),Da({factory:bD,schema:[Le("dom")],name:"footer"}),Sl({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[ge("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ge("components",[])],name:"blocker"})]),vD=(t,s,c,i)=>{const d=_n(),g=L=>{d.set(L);const U=t.lazySink(L).getOrDie(),J=i.blocker(),he=U.getSystem().build({...J,components:J.components.concat([Ci(L)]),behaviours:et([Kt.config({}),vn("dialog-blocker-events",[$u(Ya(),()=>{ad.isBlocked(L)?j():Lt.focusIn(L)})])])});Vm(U,he),Lt.focusIn(L)},p=L=>{d.clear(),xr(L.element).each(U=>{L.getSystem().getByDom(U).each(J=>{ju(J)})})},C=L=>zd(L,t,"body"),S=L=>Mo(L,t,"footer"),T=(L,U)=>{ad.block(L,U)},A=L=>{ad.unblock(L)},N=wt("modal-events"),P={...t.eventOrder,[vi()]:[N].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:C,getFooter:S,setIdle:A,setBusy:T},eventOrder:P,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:er(t.modalBehaviours,[fn.config({}),Lt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),ad.config({getRoot:d.get}),vn(N,[No(L=>{fZ(L.element,zd(L,t,"title").element)})])])}},tr=Fc({name:"ModalDialog",configFields:gZ(),partFields:hZ(),factory:vD,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),yD=Pt([lr,G4].concat(R1)),MT=Ll,fg=[Lx("button"),Tl,qa("align","end",["start","end"]),Jm,eu,Vv("buttonType",["primary","secondary"])],eS=[...fg,rg],CD=[Il("type",["submit","cancel","custom"]),...eS],YF=[Il("type",["menu"]),Xm,X2,Tl,pi("items",yD),...fg],XF=[...fg,Il("type",["togglebutton"]),oo("tooltip"),Tl,Xm,_r("active",!1)],JF=zn("type",{submit:CD,cancel:CD,custom:CD,menu:YF,togglebutton:XF}),pZ=[lr,rg,Il("level",["info","warn","error","success"]),q4,ge("url","")],bZ=Pt(pZ),vZ=t=>[lr,t],Yj=[lr,rg,eu,Lx("button"),Tl,NN,Vv("buttonType",["primary","secondary","toolbar"]),Jm],QF=Pt(Yj),jh=[lr,G4],sm=jh.concat([$x]),yZ=jh.concat([Px,eu]),CZ=Pt(yZ),e6=Ll,SZ=sm.concat([MN("auto")]),wZ=Pt(SZ),xZ=Cd([Kb,rg,q4]),SD=sm.concat([Ru("storageKey","default")]),wD=Pt(SD),EZ=Qr,kZ=Pt(sm),_Z=Qr,t6=jh.concat([Ru("tag","textarea"),oo("scriptId"),oo("scriptUrl"),ND("settings",void 0)]),AZ=jh.concat([Ru("tag","textarea"),Hl("init")]),OZ=vm(t=>Cs("customeditor.old",Wo(AZ),t).orThunk(()=>Cs("customeditor.new",Wo(t6),t))),Y1=Qr,RZ=Pt(sm),BT=gS(),kv=t=>[lr,vp("columns"),t],PT=[lr,oo("html"),qa("presets","presentation",["presentation","document"])],n6=Pt(PT),$T=sm.concat([_r("border",!1),_r("sandboxed",!0),_r("streamContent",!1),_r("transparent",!0)]),Bi=Pt($T),FT=Qr,o6=Pt(jh.concat([gc("height")])),s6=Pt([oo("url"),Ef("zoom"),Ef("cachedWidth"),Ef("cachedHeight")]),NZ=sm.concat([gc("inputMode"),gc("placeholder"),_r("maximized",!1),eu]),MZ=Pt(NZ),Gh=Qr,Xj=t=>[lr,Px,t,qa("align","start",["start","center","end"])],BZ=[rg,Kb],r6=[rg,pi("items",bp("items",()=>X1))],X1=Et([Pt(BZ),Pt(r6)]),LT=sm.concat([pi("items",X1),eu]),c6=Pt(LT),PZ=Qr,$Z=sm.concat([Hv("items",[rg,Kb]),Du("size",1),eu]),FZ=Pt($Z),LZ=Qr,_v=sm.concat([_r("constrain",!0),eu]),Jj=Pt(_v),a6=Pt([oo("width"),oo("height")]),IZ=jh.concat([Px,Du("min",0),Du("max",0)]),Qj=Pt(IZ),HZ=hp,VZ=[lr,pi("header",Qr),pi("cells",Fl(Qr))],tS=Pt(VZ),zZ=sm.concat([gc("placeholder"),_r("maximized",!1),eu]),UZ=Pt(zZ),i6=Qr,l6=[Il("type",["directory","leaf"]),ON,oo("id"),Ou("menu",CO)],e=Pt(l6),n=l6.concat([pi("children",bp("children",)]),o=Pt(n),r=Ge("type",{directory:o,leaf:e}),a=[lr,pi("items",r),Tf("onLeafAction"),Tf("onToggleExpand"),Ea("defaultExpandedIds",[],Qr),gc("defaultSelectedId")],u=Pt(a),f=sm.concat([qa("filetype","file",["image","media","file"]),eu,gc("picker_text")]),b=Pt(f),y=Pt([Kb,J2]),E=t=>fc("items","items",uo(),Fl(vm(s=>Cs(`Checking item of ${t}`,D,s).fold(c=>bn.error(la(c)),c=>bn.value(c))))),D=Jr(()=>Ge("type",{alertbanner:bZ,bar:Pt(vZ(E("bar"))),button:QF,checkbox:CZ,colorinput:wD,colorpicker:kZ,dropzone:RZ,grid:Pt(kv(E("grid"))),iframe:Bi,input:MZ,listbox:c6,selectbox:FZ,sizeinput:Jj,slider:Qj,textarea:UZ,urlinput:b,customeditor:OZ,htmlpanel:n6,imagepreview:o6,collection:wZ,label:Pt(Xj(E("label"))),table:tS,tree:u,panel:B})),R=[lr,ge("classes",[]),pi("items",D)],B=Pt(R),W=[Lx("tab"),ON,pi("items",D)],G=[lr,Hv("tabs",W)],z=Pt(G),q=eS,se=JF,ie=Pt([oo("title"),ja("body",Ge("type",{panel:B,tabpanel:z})),Ru("size","normal"),Ea("buttons",[],se),ge("initialData",{}),Hr("onAction",j),Hr("onChange",j),Hr("onSubmit",j),Hr("onClose",j),Hr("onCancel",j),Hr("onTabChange",j)]),ae=t=>Cs("dialog",ie,t),be=Pt([Il("type",["cancel","custom"]),...q]),He=Pt([oo("title"),oo("url"),Ef("height"),Ef("width"),kf("buttons",be),Hr("onAction",j),Hr("onCancel",j),Hr("onClose",j),Hr("onMessage",j)]),Qe=t=>Cs("dialog",He,t),gt=t=>bs(t)?[t].concat(le(du(t),gt)):Hn(t)?le(t,gt):[],ke=we={checkbox:e6,colorinput:EZ,colorpicker:_Z,dropzone:BT,input:Gh,iframe:FT,imagepreview:s6,selectbox:LZ,sizeinput:a6,slider:HZ,listbox:PZ,size:a6,textarea:i6,urlinput:y,customeditor:Y1,collection:xZ,togglemenuitem:MT},Ie=xt=t=>Kn(gt(t),ke),$t=t=>{const s=xt(t),c=le(s,i=>Ie(i).fold(()=>[],d=>[ja(i.name,d)]));return Pt(c)},Tn=t=>{var s;const c=Ro(ae(t)),i=$t(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:i,initialData:d}},wn={open:(t,s)=>{const c=Tn(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=Ro(Qe(s));return t(c)},redial:t=>Tn(t)};var Vo=Object.freeze({__proto__:null,events:(t,s)=>{const c=(i,d)=>{t.updateState.each(,t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?mR:Na)(i,p)})};return Lo([Pe(Nf(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;Rn(g.channels,p)&&c(i,g.data)}}),No((i,d)=>{t.initialData.each(g=>{c(i,g)})})])}}),Hc=Object.freeze({__proto__:null,getState:),So=[Le("channel"),mo("renderComponents"),mo("updateState"),mo("initialData"),_r("reuseDom",!0)],Nt=Object.freeze({__proto__:null,init:()=>{const t=Vt(k.none()),s=()=>t.set(k.none());return{readState:get:t.get,set:t.set,clear:s}}});const xn=Rr({fields:So,name:"reflecting",active:Vo,apis:Hc,state:Nt}),Nn=t=>{const s=[],c={};return $o(t,(i,d)=>{i.fold(g=>{c[d]=g})}),s.length>0?bn.error(s):bn.value(c)},kt=(t,s,c)=>{const i=po(uv.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:ye(t.items,g=>AC(d,g,s,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:et([Lt.config({mode:"acyclic",useTabstopAt:_e(mv)}),Ri.memento(i),GB(i,{postprocess:d=>Nn(d).fold(bt)}),vn("dialog-body-panel",[Pe(Ya(),(d,g)=>{d.getSystem().broadcastOn([gv],{newFocus:k.some(g.event.target)})})])])}},on=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Gd(t.action),behaviours:er(t.tabButtonBehaviours,[Kt.config({}),Lt.config({mode:"execution",useSpace:!0,useEnter:!0}),pt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),tt=si({name:"TabButton",configFields:[ge("uid",void 0),Le("value"),fc("dom","dom",Dn(()=>({attributes:{role:"tab",id:wt("aria"),"aria-selected":"false"}})),fr()),mo("action"),ge("domModification",{}),pr("tabButtonBehaviours",[Kt,Lt,pt]),Le("view")],factory:on}),sn=re([Le("tabs"),Le("dom"),ge("clickToDismiss",!1),pr("tabbarBehaviours",[so,Lt]),Rm(["tabClass","selectedClass"])]),Zn=d1({factory:tt,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{so.dehighlight(i,d),Ft(i,_0(),{tabbar:i,button:d})},c=(i,d)=>{so.highlight(i,d),Ft(i,wS(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=so.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?j:c)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Bo=re([Zn]),Ao=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:er(t.tabbarBehaviours,[so.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{ht(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{ht(g.element,"aria-selected","false")}}),Lt.config({mode:"flow",getInitial:d=>so.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),zr=Fc({name:"Tabbar",configFields:sn(),partFields:Bo(),factory:Ao}),ld=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:er(t.tabviewBehaviours,[fn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),uf=si({name:"Tabview",configFields:[pr("tabviewBehaviours",[fn])],factory:ld}),ai=re([ge("selectFirst",!0),Un("onChangeTab"),Un("onDismissTab"),ge("tabs",[]),pr("tabSectionBehaviours",[])]),au=$c({factory:zr,schema:[Le("dom"),Vl("markers",[Le("tabClass"),Le("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),dn=$c({factory:uf,name:"tabview"}),eo=re([au,dn]),zo=(t,s,c,i)=>{const d=p=>{const C=pt.getValue(p);Mo(p,t,"tabview").each(S=>{Re(t.tabs,A=>A.value===C).each(A=>{const N=A.view();Er(p.element,"id").each(P=>{ht(S.element,"aria-labelledby",P)}),fn.set(S,N),t.onChangeTab(S,p,N)})})},g=(p,C)=>{Mo(p,t,"tabbar").each(};return{uid:t.uid,dom:t.dom,components:s,behaviours:Hd(t.tabSectionBehaviours),events:Lo(De([t.selectFirst?[No((p,C)=>{g(p,so.getFirst)})]:[],[Pe(wS(),(p,C)=>{const S=C.event.button;d(S)}),Pe(_0(),(p,C)=>{const S=C.event.button;t.onDismissTab(p,S)})]])),apis:{getViewItems:p=>Mo(p,t,"tabview").map(C=>fn.contents(C)).getOr([]),showTab:(p,C)=>{g(p,T=>{const A=so.getCandidates(T);return Re(A,.filter(})}}}},ss=Fc({name:"TabSection",configFields:ai(),partFields:eo(),factory:zo,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),xs=(t,s,c)=>ye(t,(i,d)=>{fn.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return fn.set(c,[]),g.height}),Pi=t=>ks(Cr(t,(s,c)=>s>c?-1:s<c?1:0)),rm=(t,s,c)=>{const i=va(t).dom,d=ti(t,".tox-dialog-wrap").getOr(t),g=ts(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const C=mt(s),T=s.dom.offsetLeft>=c.dom.offsetLeft+Go(c)?Math.max(mt(c),C):C,A=parseInt(ts(t,"margin-top"),10)||0,N=parseInt(ts(t,"margin-bottom"),10)||0,L=mt(t)+A+N-T;return p-L},qh=(t,s)=>{ks(t).each(},nS=(t,s)=>{an(t,"height",s+"px"),an(t,"flex-basis",s+"px")},J1=(t,s,c)=>{ti(t,'[role="dialog"]').each(i=>{Zs(i,'[role="tablist"]').each(d=>{c.get().map(g=>(an(s,"height","0"),an(s,"flex-basis","0"),Math.min(g,rm(i,s,d)))).each(g=>{nS(s,g)})})})},Av=t=>Zs(t,'[role="tabpanel"]'),Ov=t=>{const s=_n();return{extraEvents:[No(d=>{const g=d.element;Av(g).each(p=>{an(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(C=>{const S=xs(t,p,C);Pi(S).fold(s.clear,s.set)}),J1(g,p,s),V(p,"visibility"),qh(t,d),requestAnimationFrame(()=>{J1(g,p,s)})})}),Pe(Ul(),d=>{const g=d.element;Av(g).each(p=>{J1(g,p,s)})}),Pe(iB,(d,g)=>{const p=d.element;Av(p).each(C=>{const S=Uu(xe(C));an(C,"visibility","hidden");const T=As(C,"height").map(P=>parseInt(P,10));V(C,"height"),V(C,"flex-basis");const A=C.dom.getBoundingClientRect().height;T.forall(P=>A>P)?(s.set(A),J1(p,C,s)):T.each(P=>{nS(C,P)}),V(C,"visibility"),S.each(Aa)})})],selectFirst:!1}},oS="send-data-to-section",Q1="send-data-to-view",e0=(t,s,c)=>{const i=Vt({}),d=T=>{const A=pt.getValue(T),N=Nn(A).getOr({}),P=i.get(),L=yo(P,N);i.set(L)},g=T=>{const A=i.get();pt.setValue(T,A)},p=Vt(null),C=ye(t.tabs,T=>({value:T.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Fs(c.shared.providers.translate(T.title))],view:()=>[uv.sketch(A=>({dom:{tag:"div",classes:["tox-form"]},components:ye(T.items,N=>AC(A,N,s,c)),formBehaviours:et([Lt.config({mode:"acyclic",useTabstopAt:_e(mv)}),vn("TabView.form.events",[No(g),Fu(d)]),_a.config({channels:hc([{key:oS,value:{onReceive:d}},{key:Q1,value:{onReceive:g}}])})])}))]})),S=Ov(C);return ss.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(T,A,N)=>{const P=pt.getValue(A);Ft(T,aB,{name:P,oldName:p.get()}),p.set(P)},tabs:C,components:[ss.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[zr.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:et([os.config({})])}),ss.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:S.selectFirst,tabSectionBehaviours:et([vn("tabpanel",S.extraEvents),Lt.config({mode:"acyclic"}),Pn.config({find:T=>ks(ss.getViewItems(T))}),$h(k.none(),T=>(T.getSystem().broadcastOn([oS],{}),i.get()),(T,A)=>{i.set(A),T.getSystem().broadcastOn([Q1],{})})])})},ud=(t,s,c,i,d)=>{const g=S=>{const T=S.body;switch(T.type){case"tabpanel":return[e0(T,S.initialData,i)];default:return[kt(T,S.initialData,i)]}},p=(S,T)=>k.some({isTabPanel:),C={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(S=>({id:S})).getOr({}),...d?C:{}}},components:[],behaviours:et([Ri.childAt(0),xn.config({channel:`${TE}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},df=(t,s,c,i,d)=>ud(t,s,k.some(c),i,d),sS=(t,s,c)=>{const i=ud(t,s,k.none(),c,!1);return tr.parts.body(i)},Dv=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[e5(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:et([os.config({}),Kt.config({})])})]}],behaviours:et([Lt.config({mode:"acyclic",useTabstopAt:_e(mv)})])};return tr.parts.body(s)},IT=Hb.deviceType.isTouch(),mf=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),HT=(t,s)=>tr.parts.close(sc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:et([os.config({})])})),rS=()=>tr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Qc=(t,s)=>tr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ng(`<p>${u4(s.translate(t))}</p>`)}]}]}),Kh=t=>tr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),xD=(t,s)=>[Xd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Xd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],cS=t=>{const s="tox-dialog",c=s+"-wrap",i=c+"__backdrop",d=s+"__disable-scroll";return tr.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!mv(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ng(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:IT?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:c,modalBehaviours:et([Kt.config({}),vn("dialog-events",t.dialogEvents.concat([$u(Ya(),(g,p)=>{ad.isBlocked(g)?j():Lt.focusIn(g)}),Pe(T0(),(g,p)=>{g.getSystem().broadcastOn([gv],{newFocus:p.event.newFocus})})])),vn("scroll-lock",[No(()=>{Ws(ls(),d)}),Fu(]),...t.extraBehaviours]),eventOrder:{[Xa()]:["dialog-events"],[vi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[xm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},aS=t=>sc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:et([os.config({})]),components:[Ju("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Fn(s,Mh)}}),ff=(t,s,c,i)=>{const d=g=>[Fs(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:et([xn.config({channel:`${rf}-${s}`,initialData:t,renderComponents:d})])}},Rv=ve=(t,s,c,i)=>Xd.sketch({dom:ng('<div class="tox-dialog__header"></div>'),components:[ff(t,s,k.some(c),i),Rv(),aS(i)],containerBehaviours:et([K1.config({mode:"mouse",blockerClass:"blocker",getTarget:snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Se=(t,s,c)=>{const i=tr.parts.title(ff(t,s,k.none(),c)),d=tr.parts.draghandle(Rv()),g=tr.parts.close(aS(c)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return Xd.sketch({dom:ng('<div class="tox-dialog__header"></div>'),components:p})},ot=(t,s,c)=>Se({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),Ye=(t,s,c,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:ng('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Bt=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:i=>{const d=Zs(t().element,".tox-dialog__header").map(g=>mt(g));tr.setBusy(t(),(g,p)=>Ye(i.message,p,s,d))},onUnblock:),Mn="tox-dialog--fullscreen",hs="tox-dialog--width-lg",ii="tox-dialog--width-md",cc=t=>{switch(t){case"large":return k.some(hs);case"medium":return k.some(ii);default:return k.none()}},Yh=(t,s)=>{const c=de.fromDom(s.element.dom);hr(c,Mn)||(yi(c,[hs,ii]),cc(t).each(i=>Ws(c,i)))},iu=(t,s)=>{const c=de.fromDom(t.element.dom),i=Lg(c),d=Re(i,.or(cc(s));ly(c,[Mn,...d.toArray()])},ED=(t,s,c)=>Mc(cS({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[xE({}),...t.extraBehaviours],onEscape:i=>{Fn(i,Mh)},dialogEvents:s,eventOrder:{[Nf()]:[xn.name(),_a.name()],[vi()]:["scroll-lock",xn.name(),"messages","dialog-events","alloy.base.behaviour"],[xm()]:["alloy.base.behaviour","dialog-events","messages",xn.name(),"scroll-lock"]}})),VT=(t,s={})=>{const c=i=>{const d=ye(i.items,g=>{const p=dt(s,g.name).getOr(Vt(!1));return{...g,storage:p}});return{...i,items:d}};return ye(t,i=>i.type==="menu"?c(i):i)},TD=t=>no(t,(s,c)=>c.type==="menu"?no(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),kD=(t,s)=>[Jv(Ya(),SH),t(rv,(c,i,d,g)=>{Uu(xe(g.element)).fold(j,Kg),s.onClose(),i.onClose()}),t(Mh,(c,i,d,g)=>{i.onCancel(c),Fn(g,rv)}),Pe(W3,(c,i)=>s.onUnblock()),Pe(U3,(c,i)=>s.onBlock(i.event))],WZ=(t,s)=>{const c=(d,g)=>Pe(d,(p,C)=>{i(p,(S,T)=>{g(t(),S,C.event,p)})}),i=(d,g)=>{xn.getState(d).get().each(p=>{g(p,d)})};return[...kD(c,s),c(nf,(d,g,p)=>{g.onAction(d,{name:p.name})})]},An=(t,s,c)=>{const i=(g,p)=>Pe(g,(C,S)=>{d(C,(T,A)=>{p(t(),T,S.event,C)})}),d=(g,p)=>{xn.getState(g).get().each(C=>{p(C.internalDialog,g)})};return[...kD(i,s),i(fC,(g,p)=>p.onSubmit(g)),i(Oi,(g,p,C)=>{p.onChange(g,{name:C.name})}),i(nf,(g,p,C,S)=>{const T=()=>S.getSystem().isConnected()?Lt.focusIn(S):void 0,A=L=>pf(L,"disabled")||Er(L,"aria-disabled").exists(U=>U==="true"),N=xe(S.element),P=Uu(N);p.onAction(g,{name:C.name,value:C.value}),Uu(N).fold(T,L=>{A(L)||P.exists(?T():c().toOptional().filter(.each(T)})}),i(aB,(g,p,C)=>{p.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Fu(g=>{const p=t();pt.setValue(g,p.getData())})]},Ee=Dt=(t,s,c)=>Re(s,i=>i.name===c).bind(i=>i.memento.getOpt(t)),Jt=(t,s)=>{const c=s.map(C=>C.footerButtons).getOr([]),i=Ts(c,C=>C.align==="start"),d=(C,S)=>Xd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:ye(S,T=>T.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},Ks=(t,s,c)=>{const i=(d,g)=>{const p=ye(g.buttons,S=>{const T=po(Ee(S,c));return{name:S.name,align:S.align,memento:T}}),C=S=>Dt(d,p,S);return k.some({lookupByName:C,footerButtons:p})};return{dom:ng('<div class="tox-dialog__footer"></div>'),components:[],behaviours:et([xn.config({channel:`${CA}-${s}`,initialData:t,updateState:i,renderComponents:Jt})])}},$a=(t,s,c)=>Ks(t,s,c),lu=(t,s,c)=>tr.parts.footer(Ks(t,s,c)),Ur=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Pn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return uv.getField(i,s).orThunk(()=>t.getFooter().bind(p=>xn.getState(p).get()).bind(p=>p.lookupByName(s)))}else return k.none()},dd=(t,s)=>{const c=t.getRoot();return xn.getState(c).get().map(i=>Ro(Cs("data",i.dataValidator,s))).getOr(s)},zT=(t,s,c)=>{const i=U=>{const J=t.getRoot();J.getSystem().isConnected()&&U(J)},L={getData:()=>{const U=t.getRoot(),J=U.getSystem().isConnected()?t.getFormWrapper():U,he=pt.getValue(J),ce=Fo(c,oe=>oe.get());return{...he,...ce}},setData:U=>{i(J=>{const he=L.getData(),ce=yo(he,U),oe=dd(t,ce),fe=t.getFormWrapper();pt.setValue(fe,oe),$o(c,(je,Be)=>{Gn(ce,Be)&&je.set(ce[Be])})})},setEnabled:(U,J)=>{Ur(t,U).each(J?Zt.enable:Zt.disable)},focus:U=>{Ur(t,U).each(Kt.focus)},block:U=>{if(!nt(U))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(J=>{Ft(J,U3,{message:U})})},unblock:()=>{i(U=>{Fn(U,W3)})},showTab:U=>{i(J=>{const he=t.getBody();xn.getState(he).get().exists(oe=>oe.isTabPanel())&&Pn.getCurrent(he).each(oe=>{ss.showTab(oe,U)})})},redial:U=>{i(J=>{const he=t.getId(),ce=s(U),oe=VT(ce.internalDialog.buttons,c);J.getSystem().broadcastOn([`${fv}-${he}`],ce),J.getSystem().broadcastOn([`${rf}-${he}`],ce.internalDialog),J.getSystem().broadcastOn([`${TE}-${he}`],ce.internalDialog),J.getSystem().broadcastOn([`${CA}-${he}`],{...ce.internalDialog,buttons:oe}),L.setData(ce.initialData)})},close:()=>{i(U=>{Fn(U,rv)})},toggleFullscreen:t.toggleFullscreen};return L},ZZ=(t,s,c)=>{const i=wt("dialog"),d=t.internalDialog,g=ot(d.title,i,c),p=Vt(d.size),C=cc(p.get()).toArray(),S=(oe,fe)=>(p.set(fe.internalDialog.size),Yh(fe.internalDialog.size,oe),k.some(fe)),T=sS({body:d.body,initialData:d.initialData},i,c),A=VT(d.buttons),N=TD(A),P=Gt(A.length!==0,lu({buttons:A},i,c)),L=An(()=>ce,Bt(()=>J,c.shared.providers,s),c.shared.getSink),U={id:i,header:g,body:T,footer:P,extraClasses:C,extraBehaviours:[xn.config({channel:`${fv}-${i}`,updateState:S,initialData:t})],extraStyles:{}},J=ED(U,L,c),he=(()=>{const oe=()=>{const je=tr.getBody(J);return Pn.getCurrent(je).getOr(je)},fe=()=>{iu(J,p.get())};return{getId:re(i),getRoot:re(J),getBody:()=>tr.getBody(J),getFooter:()=>tr.getFooter(J),getFormWrapper:oe,toggleFullscreen:fe}})(),ce=zT(he,s.redial,N);return{dialog:J,instanceApi:ce}},_D=(t,s,c,i=!1,d)=>{const g=wt("dialog"),p=wt("dialog-label"),C=wt("dialog-content"),S=t.internalDialog,T=Vt(S.size),A=cc(T.get()).toArray(),N=(Ae,Je)=>(T.set(Je.internalDialog.size),Yh(Je.internalDialog.size,Ae),d(),k.some(Je)),P=po(ve({title:S.title,draggable:!0},g,p,c.shared.providers)),L=po(df({body:S.body,initialData:S.initialData},g,C,c,i)),U=VT(S.buttons),J=TD(U),he=Gt(U.length!==0,po($a({buttons:U},g,c))),ce=An(()=>Be,{onBlock:Ae=>{ad.block(fe,(Je,ct)=>{const yn=P.getOpt(fe).map(St=>mt(St.element));return Ye(Ae.message,ct,c.shared.providers,yn)})},onUnblock:()=>{ad.unblock(fe)},onClose:()=>s.closeWindow()},c.shared.getSink),fe=Mc({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...A],attributes:{role:"dialog",["aria-labelledby"]:p}},eventOrder:{[Nf()]:[xn.name(),_a.name()],[Xa()]:["execute-on-form"],[vi()]:["reflecting","execute-on-form"]},behaviours:et([Lt.config({mode:"cyclic",onEscape:Ae=>(Fn(Ae,rv),k.some(!0)),useTabstopAt:Ae=>!mv(Ae)&&(Ec(Ae)!=="button"||Qo(Ae,"disabled")!=="disabled"),firstTabstop:1}),xn.config({channel:`${fv}-${g}`,updateState:N,initialData:t}),Kt.config({}),vn("execute-on-form",ce.concat([$u(Ya(),(Ae,Je)=>{Lt.focusIn(Ae)}),Pe(T0(),(Ae,Je)=>{Ae.getSystem().broadcastOn([gv],{newFocus:Je.event.newFocus})})])),ad.config({getRoot:()=>k.some(fe)}),fn.config({}),xE({})]),components:[P.asSpec(),L.asSpec(),...he.map(Ae=>Ae.asSpec()).toArray()]}),je=()=>{iu(fe,T.get())},Be=zT({getId:re(g),getRoot:re(fe),getFooter:getBody:()=>L.get(fe),getFormWrapper:()=>{const Ae=L.get(fe);return Pn.getCurrent(Ae).getOr(Ae)},toggleFullscreen:je},s.redial,J);return{dialog:fe,instanceApi:Be}};var u6=tinymce.util.Tools.resolve("tinymce.util.URI");const xG=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!nt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{Ft(C,U3,{message:p})})},unblock:()=>{s(p=>{Fn(p,W3)})},close:sendMessage:p=>{s(C=>{C.getSystem().broadcastOn([SA],p)})}}},EG=["insertContent","setContent","execCommand","close","block","unblock"],eG=t=>bs(t)&&EG.indexOf(t.mceAction)!==-1,TG=t=>!eG(t)&&bs(t)&&Gn(t,"mceAction"),kG=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const i=Ds(c.ui)?c.ui:!1;t.execCommand(c.cmd,i,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},_G=(t,s,c,i)=>{const d=wt("dialog"),g=ot(t.title,d,i),p=Dv(t),C=t.buttons.bind(fe=>fe.length===0?k.none():k.some(lu({buttons:fe},d,i))),S=WZ(()=>oe,Bt(()=>ce,i.shared.providers,s)),T={...t.height.fold(()=>({}),fe=>({height:fe+"px","max-height":fe+"px"})),...t.width.fold(()=>({}),fe=>({width:fe+"px","max-width":fe+"px"}))},A=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],N=new u6(t.url,{base_uri:new u6(window.location.href)}),P=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,L=Pd(),U=(fe,je)=>k.some(je),J=[xn.config({channel:`${fv}-${d}`,updateState:U,initialData:t}),vn("messages",[No(()=>{const fe=qc(de.fromDom(window),"message",je=>{if(N.isSameOrigin(new u6(je.raw.origin))){const Be=je.raw.data;eG(Be)?kG(c,oe,Be):TG(Be)&&t.onMessage(oe,Be)}});L.set(fe)}),Fu(L.clear)]),_a.config({channels:{[SA]:{onReceive:(fe,je)=>{Zs(fe.element,"iframe").each(Be=>{const Ae=Be.dom.contentWindow;to(Ae)&&Ae.postMessage(je,P)})}}}})],ce=ED({id:d,header:g,body:p,footer:C,extraClasses:A,extraBehaviours:J,extraStyles:T},S,i),oe=xG(ce);return{dialog:ce,instanceApi:oe}},AG=t=>{const s=t.shared;return{open:(i,d)=>{const g=p=po($E({name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),C=rS(),S=HT(g,s.providers),T=Mc(cS({lazySink:()=>s.getSink(),header:mf(C,S),body:Qc(i,s.providers),footer:k.some(Kh(xD([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pe(Mh,g)],eventOrder:{}}));tr.show(T);const A=p.get(T);Kt.focus(A)}}},OG=t=>{const s=t.shared;return{open:(i,d)=>{const g=p=po($E({name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),C=$E({name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),S=rS(),T=HT(()=>g(!1),s.providers),A=Mc(cS({lazySink:()=>s.getSink(),header:mf(S,T),body:Qc(i,s.providers),footer:k.some(Kh(xD([],[C,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pe(Mh,()=>g(!1)),Pe(fC,()=>g(!0))],eventOrder:{}}));tr.show(A);const N=p.get(A);Kt.focus(N)}}},tG=(t,s)=>Ro(Cs("data",s,t)),nG=t=>lC(t,".tox-alert-dialog")||lC(t,".tox-confirm-dialog"),DG=(t,s,c)=>s&&c?[]:[gs.config({contextual:{lazyContext:()=>k.some(ys(de.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Nh(t,i.element).map(g=>({bounds:sv(g),optScrollEnv:k.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Tr(g.element).top})})).getOrThunk(()=>({bounds:Xr(),optScrollEnv:k.none()}))})],RG=t=>{const s=t.editor,c=G2(s),i=AG(t.backstages.dialog),d=OG(t.backstages.dialog),g=(U,J,he)=>{if(!rs(J)){if(J.inline==="toolbar")return T(U,t.backstages.popup.shared.anchors.inlineDialog(),he,J);if(J.inline==="bottom")return A(U,t.backstages.popup.shared.anchors.inlineBottomDialog(),he,J);if(J.inline==="cursor")return T(U,t.backstages.popup.shared.anchors.cursor(),he,J)}return S(U,he)},p=(U,J)=>C(U,J),C=(U,J)=>{const he=ce=>{const oe=_G(ce,{closeWindow:()=>{tr.hide(oe.dialog),J(oe.instanceApi)}},s,t.backstages.dialog);return tr.show(oe.dialog),oe.instanceApi};return wn.openUrl(he,U)},S=(U,J)=>{const he=(ce,oe,fe)=>{const je=oe,Ae=ZZ({dataValidator:fe,initialData:je,internalDialog:ce},{redial:wn.redial,closeWindow:,t.backstages.dialog);return tr.show(Ae.dialog),Ae.instanceApi.setData(je),Ae.instanceApi};return wn.open(he,U)},T=(U,J,he,ce)=>{const oe=(fe,je,Be)=>{const Ae=tG(je,Be),Je=_n(),ct=t.backstages.popup.shared.header.isPositionedAtTop(),yn={dataValidator:Be,initialData:Ae,internalDialog:fe},St=()=>Je.on(zt=>{ws.reposition(zt),(!c||!ct)&&gs.refresh(zt)}),tn=_D(yn,{redial:wn.redial,closeWindow:()=>{Je.on(ws.hide),s.off("ResizeEditor",St),Je.clear(),he(tn.instanceApi)}},t.backstages.popup,ce.ariaAttrs,St),Yt=Mc(ws.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ce.persistent?{event:"doNotDismissYet"}:{},...ct?{}:{fireRepositionEventInstead:{}},inlineBehaviours:et([vn("window-manager-inline-events",[Pe(Em(),(zt,qn)=>{Fn(tn.dialog,Mh)})]),...DG(s,c,ct)]),isExtraPart:(zt,qn)=>nG(qn)}));Je.set(Yt);const fo=()=>{const zt=s.inline?ls():de.fromDom(s.getContainer()),qn=ys(zt);return k.some(qn)};return ws.showWithinBounds(Yt,Ci(tn.dialog),{anchor:J},fo),(!c||!ct)&&(gs.refresh(Yt),s.on("ResizeEditor",St)),tn.instanceApi.setData(Ae),Lt.focusIn(tn.dialog),tn.instanceApi};return wn.open(oe,U)},A=(U,J,he,ce)=>{const oe=(fe,je,Be)=>{const Ae=tG(je,Be),Je=_n(),ct=t.backstages.popup.shared.header.isPositionedAtTop(),yn={dataValidator:Be,initialData:Ae,internalDialog:fe},St=()=>Je.on(zt=>{ws.reposition(zt),gs.refresh(zt)}),tn=_D(yn,{redial:wn.redial,closeWindow:()=>{Je.on(ws.hide),s.off("ResizeEditor ScrollWindow ElementScroll",St),Je.clear(),he(tn.instanceApi)}},t.backstages.popup,ce.ariaAttrs,St),Yt=Mc(ws.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ce.persistent?{event:"doNotDismissYet"}:{},...ct?{}:{fireRepositionEventInstead:{}},inlineBehaviours:et([vn("window-manager-inline-events",[Pe(Em(),]),gs.config({contextual:{lazyContext:()=>k.some(ys(de.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:zt=>Nh(s,zt.element).map(at=>({bounds:sv(at),optScrollEnv:k.some({currentScrollTop:at.element.dom.scrollTop,scrollElmTop:Tr(at.element).top})})).getOrThunk(()=>({bounds:Xr(),optScrollEnv:k.none()}))})]),isExtraPart:(zt,qn)=>nG(qn)}));Je.set(Yt);const fo=()=>t.backstages.popup.shared.getSink().toOptional().bind(zt=>{const qn=Nh(s,zt.element),at=15,_t=qn.map(Ut=>sv(Ut)).getOr(Xr()),nn=ys(de.fromDom(s.getContentAreaContainer())),rn=up(nn,_t);return k.some(ds(rn.x,rn.y,rn.width,rn.height-at))});return ws.showWithinBounds(Yt,Ci(tn.dialog),{anchor:J},fo),gs.refresh(Yt),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",St),tn.instanceApi.setData(Ae),Lt.focusIn(tn.dialog),tn.instanceApi};return wn.open(oe,U)};return{open:g,openUrl:p,alert:(U,J)=>{i.open(U,J)},close:U=>{U.close()},confirm:(U,J)=>{d.open(U,J)}}},NG=t=>{KR(t),YI(t),rD(t)};var MG=()=>{ku.add("silver",t=>{NG(t);let s=()=>Xr();const{dialogs:c,popups:i,renderUI:d}=mZ(t,{getPopupSinkBounds:()=>s()}),g=()=>{const S=d();return Nh(t,i.getMothership().element).each(A=>{s=()=>sv(A)}),S};H8.register(t,i.backstage.shared);const p=RG({editor:t,backstages:{popup:i.backstage,dialog:c.backstage}}),C=()=>p4(t,{backstage:i.backstage},i.getMothership());return{renderUI:g,getWindowManagerImpl:re(p),getNotificationManagerImpl:C}})};MG()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var ha=tinymce.util.Tools.resolve("tinymce.PluginManager");const wc=(Xe,Oe,k)=>{const mn=Oe==="UL"?"InsertUnorderedList":"InsertOrderedList";Xe.execCommand(mn,!1,k===!1?null:{"list-style-type":k})},ac=Xe=>{Xe.addCommand("ApplyUnorderedListStyle",(Oe,k)=>{wc(Xe,"UL",k["list-style-type"])}),Xe.addCommand("ApplyOrderedListStyle",(Oe,k)=>{wc(Xe,"OL",k["list-style-type"])})},ps=Xe=>Oe=>Oe.options.get(Xe),yr=Xe=>{const Oe=Xe.options.register;Oe("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Oe("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},nr=ps("advlist_number_styles"),io=ps("advlist_bullet_styles"),nt=Xe=>Xe==null,bs=Xe=>!nt(Xe);var ea=tinymce.util.Tools.resolve("tinymce.util.Tools");class Hn{constructor(Oe,k){this.tag=Oe,this.value=k}static some(Oe){return new Hn(!0,Oe)}static none(){return Hn.singletonNone}fold(Oe,k){return this.tag?k(this.value):Oe()}isSome(){return this.tag}e){if(this.tag)return this.value;throw new Error(Oe!=null?Oe:"Called getOrDie on None")}ngletonNone=new Hn(!1);const Is=Ds=rs=(Xe,Oe)=>Xe.dom.isChildOf(Oe,Xe.getBody()),Es=Xe=>to=Es(/^(OL|UL|DL)$/),Tt=Es(/^(TH|TD)$/),Rs=(Xe,Oe,k)=>Is(Oe,Tt).exists(mn=>mn.nodeName===k&&rs(Xe,mn)),Ht=Xe=>{const Oe=Xe.dom.getParent(Xe.selection.getNode(),"ol,ul"),k=Xe.dom.getStyle(Oe,"listStyleType");return Hn.from(k)},j=(Xe,Oe)=>Oe!==null&&!Xe.dom.isEditable(Oe),Ve=(Xe,Oe)=>{const k=Xe.dom.getParent(Oe,"ol,ul,dl");return j(Xe,k)&&Xe.selection.isEditable()},Xo=(Xe,Oe)=>{const k=Xe.selection.getNode();return Oe({parents:Xe.dom.getParents(k),element:k}),Xe.on("NodeChange",Oe),,hn=Xe=>Xe.replace(/\-/g," ").replace(/\b\w/g,,re=Xe=>nt(Xe)||Xe==="default"?"":Xe,bt=(Xe,Oe)=>k=>{const mn=(pn,Ot)=>{const Ne=pn.selection.getStart(!0);k.setActive(Rs(pn,Ot,Oe)),k.setEnabled(!Ve(pn,Ne)&&pn.selection.isEditable())};return Xo(Xe,},Jn=(Xe,Oe,k,mn,ze,pn)=>{Xe.ui.registry.addSplitButton(Oe,{tooltip:k,icon:ze==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Ot=>{const Ne=ea.map(pn,Rn=>{const cs=ze==="OL"?"num":"bull",it=Rn==="disc"||Rn==="decimal"?"default":Rn,It=re(Rn),ye=hn(Rn);return{type:"choiceitem",value:It,icon:"list-"+cs+"-"+it,text:ye}});Ot(Ne)},onAction:()=>Xe.execCommand(mn),onItemAction:select:Ot=>Ht(Xe).map(Rn=>Ot===Rn).getOr(!1),onSetup:bt(Xe,ze)})},Xt=(Xe,Oe,k,mn,ze,pn)=>{Xe.ui.registry.addToggleButton(Oe,{active:!1,tooltip:k,icon:ze==="OL"?"ordered-list":"unordered-list",onSetup:bt(Xe,ze),onAction:()=>Xe.queryCommandState(mn)||pn===""?Xe.execCommand(mn):wc(Xe,ze,pn)})},_e=(Xe,Oe,k,mn,ze,pn)=>{pn.length>1?Jn(Xe,Oe,k,mn,ze,pn):Xt(Xe,Oe,k,mn,ze,re(pn[0]))},te=Xe=>{_e(Xe,"numlist","Numbered list","InsertOrderedList","OL",nr(Xe)),_e(Xe,"bullist","Bullet list","InsertUnorderedList","UL",io(Xe))};var go=()=>{ha.add("advlist",Xe=>{Xe.hasPlugin("lists")&&(yr(Xe),te(Xe),ac(Xe))})};go()})();(function(){var ha=tinymce.util.Tools.resolve("tinymce.PluginManager");const wc=ac=ps=it=>{const It=it.options.register;It("autolink_pattern",{processor:"regexp",default:new RegExp("^"+wc().source+"$","i")}),It("link_default_target",{processor:"string"}),It("link_default_protocol",{processor:"string",default:"https"})},yr=ac("autolink_pattern"),nr=ac("link_default_target"),io=ac("link_default_protocol"),nt=ac("allow_unsafe_link_target"),bs=(it,It,ye)=>{var We;return ye(it,It.prototype)?!0:((We=it.constructor)===null||We===void 0?void 0:We.name)===It.name},ea=it=>{const It=typeof it;return it===null?"null":It==="object"&&Array.isArray(it)?"array":It==="object"&&bs(it,String,?"string":It},Hn=Is=it=>It=>it===It,Ds=Hn("string"),rs=Is(void 0),Es=to=it=>!Es(it),Tt=Rs=Object.hasOwnProperty,Ht=j=(it,It,ye)=>It===""||it.length>=It.length&&it.substr(ye,ye+It.length)===It,Ve=(it,It,ye=0,We)=>{const $=it.indexOf(It,ye);return $!==-1?rs(We)?!0:$+It.length<=We:!1},Xo=hn="\uFEFF",re=it=>it===hn,bt=var Jn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Xt=it=>it.nodeType===3,_e=it=>it.nodeType===1,te=it=>/^[(\[{ \u00a0]$/.test(it),go=it=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(it),Xe=it=>/[?!,.;:]/.test(it),Oe=(it,It,ye)=>{for(let We=It-1;We>=0;We--){const $=it.charAt(We);if(!re($)&&ye($))return We}return-1},k=(it,It)=>{let ye=it,We=It;for(;_e(ye)&&ye.childNodes[We];)ye=ye.childNodes[We],We=Xt(ye)?ye.data.length:ye.childNodes.length;return{container:ye,offset:We}},mn=(it,It)=>{var ye;const We=it.schema.getVoidElements(),$=yr(it),{dom:Ts,selection:Kn}=it;if(Ts.getParent(Kn.getNode(),"a[href]")!==null)return null;const lo=Kn.getRng(),no=Jn(Ts,Cn=>Ts.isBlock(Cn)||Ht(We,Cn.nodeName.toLowerCase())||Ts.getContentEditable(Cn)==="false"),{container:Ns,offset:Re}=k(lo.endContainer,lo.endOffset),st=(ye=Ts.getParent(Ns,Ts.isBlock))!==null&&ye!==void 0?ye:Ts.getRoot(),De=no.backwards(Ns,Re+It,(Cn,Cr)=>{const ao=Cn.data,ks=Oe(ao,Cr,Tt(te));return ks===-1||Xe(ao[ks])?ks:ks+1},st);if(!De)return null;let le=De.container;const jt=no.backwards(De.container,De.offset,(Cn,Cr)=>{le=Cn;const ao=Oe(Cn.data,Cr,te);return ao===-1?ao:ao+1},st),jn=Ts.createRng();jt?jn.setStart(jt.container,jt.offset):jn.setStart(le,0),jn.setEnd(De.container,De.offset);const Ms=bt(jn.toString()).match($);if(Ms){let Cn=Ms[0];return Xo(Cn,"www.")?Cn=io(it)+"://"+Cn:Ve(Cn,"@")&&!go(Cn)&&(Cn="mailto:"+Cn),{rng:jn,url:Cn}}else return null},ze=(it,It)=>{const{dom:ye,selection:We}=it,{rng:$,url:Ts}=It,Kn=We.getBookmark();We.setRng($);const lo="createlink",no={command:lo,ui:!1,value:Ts};if(!it.dispatch("BeforeExecCommand",no).isDefaultPrevented()){it.getDoc().execCommand(lo,!1,Ts),it.dispatch("ExecCommand",no);const Re=nr(it);if(Ds(Re)){const st=We.getNode();ye.setAttrib(st,"target",Re),Re==="_blank"&&!nt(it)&&ye.setAttrib(st,"rel","noopener")}}We.moveToBookmark(Kn),it.nodeChanged()},pn=it=>{const It=mn(it,-1);to(It)&&ze(it,It)},Ot=pn,Ne=it=>{const It=mn(it,0);to(It)&&ze(it,It)},Rn=it=>{it.on("keydown",It=>{It.keyCode===13&&!It.isDefaultPrevented()&&Ne(it)}),it.on("keyup",It=>{It.keyCode===32?pn(it):(It.keyCode===48&&It.shiftKey||It.keyCode===221)&&Ot(it)})};var cs=()=>{ha.add("autolink",it=>{ps(it),Rn(it)})};cs()})();(function(){const ha=j=>{let Ve=j;return{get:()=>Ve,set:re=>{Ve=re}}};var wc=tinymce.util.Tools.resolve("tinymce.PluginManager");const ac=j=>()=>j;var ps=tinymce.util.Tools.resolve("tinymce.Env");const yr=j=>j.dispatch("ResizeEditor"),nr=j=>Ve=>Ve.options.get(j),io=j=>{const Ve=j.options.register;Ve("autoresize_overflow_padding",{processor:"number",default:1}),Ve("autoresize_bottom_margin",{processor:"number",default:50})},nt=nr("min_height"),bs=nr("max_height"),ea=nr("autoresize_overflow_padding"),Hn=nr("autoresize_bottom_margin"),Is=j=>j.plugins.fullscreen&&j.plugins.fullscreen.isFullscreen(),Ds=(j,Ve)=>{const Xo=j.getBody();Xo&&(Xo.style.overflowY=Ve?"":"hidden",Ve||(Xo.scrollTop=0))},rs=(j,Ve,Xo,hn)=>{var re;const bt=parseInt((re=j.getStyle(Ve,Xo,hn))!==null&&re!==void 0?re:"",10);return isNaN(bt)?0:bt},Es=j=>{if((j==null?void 0:j.type.toLowerCase())==="setcontent"){const Ve=j;return Ve.selection===!0||Ve.paste===!0}else return!1},to=(j,Ve,Xo,hn)=>{var re;const bt=j.dom,Jn=j.getDoc();if(!Jn)return;if(Is(j)){Ds(j,!0);return}const Xt=Jn.documentElement,_e=hn?hn():ea(j),te=(re=nt(j))!==null&&re!==void 0?re:j.getElement().offsetHeight;let go=te;const Xe=rs(bt,Xt,"margin-top",!0),Oe=rs(bt,Xt,"margin-bottom",!0);let k=Xt.offsetHeight+Xe+Oe+_e;k<0&&(k=0);const mn=j.getContainer().offsetHeight,ze=j.getContentAreaContainer().offsetHeight,pn=mn-ze;k+pn>te&&(go=k+pn);const Ot=bs(j);if(Ot&&go>Ot?(go=Ot,Ds(j,!0)):Ds(j,!1),go!==Ve.get()){const Ne=go-Ve.get();if(bt.setStyle(j.getContainer(),"height",go+"px"),Ve.set(go),yr(j),ps.browser.isSafari()&&(ps.os.isMacOS()||ps.os.isiOS())){const Rn=j.getWin();Rn.scrollTo(Rn.pageXOffset,Rn.pageYOffset)}j.hasFocus()&&Es(Xo)&&j.selection.scrollIntoView(),(ps.browser.isSafari()||ps.browser.isChromium())&&Ne<0&&to(j,Ve,Xo,hn)}},Tt=(j,Ve)=>{let Xo=()=>Hn(j),hn,re;j.on("init",bt=>{hn=0;const Jn=ea(j),Xt=j.dom;Xt.setStyles(j.getDoc().documentElement,{height:"auto"}),ps.browser.isEdge()||ps.browser.isIE()?Xt.setStyles(j.getBody(),{paddingLeft:Jn,paddingRight:Jn,"min-height":0}):Xt.setStyles(j.getBody(),{paddingLeft:Jn,paddingRight:Jn}),to(j,Ve,bt,Xo),hn+=1}),j.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",bt=>{if(hn===1)re=j.getContainer().offsetHeight,to(j,Ve,bt,Xo),hn+=1;else if(hn===2){const Jn=re<j.getContainer().offsetHeight;if(Jn){const Xt=j.dom,_e=j.getDoc();Xt.setStyles(_e.documentElement,{"min-height":0}),Xt.setStyles(j.getBody(),{"min-height":"inherit"})}Xo=Jn?ac(0):Xo,hn+=1}else to(j,Ve,bt,Xo)})},Rs=(j,Ve)=>{j.addCommand("mceAutoResize",()=>{to(j,Ve)})};var Ht=()=>{wc.add("autoresize",j=>{if(io(j),j.options.isSet("resize")||j.options.set("resize",!1),!j.inline){const Ve=ha(0);Rs(j,Ve),Tt(j,Ve)}})};Ht()})();(function(){const ha=V=>{let X=V;return{get:()=>X,set:mt=>{X=mt}}};var wc=tinymce.util.Tools.resolve("tinymce.PluginManager");const ac=V=>({isFullscreen:()=>V.get()!==null}),ps=(V,X,pe)=>{var Fe;return pe(V,X.prototype)?!0:((Fe=V.constructor)===null||Fe===void 0?void 0:Fe.name)===X.name},yr=V=>{const X=typeof V;return V===null?"null":X==="object"&&Array.isArray(V)?"array":X==="object"&&ps(V,String,(pe,Fe)=>Fe.isPrototypeOf(pe))?"string":X},nr=V=>X=>yr(X)===V,io=V=>X=>typeof X===V,nt=V=>X=>V===X,bs=nr("string"),ea=nr("array"),Hn=nt(null),Is=io("boolean"),Ds=nt(void 0),rs=V=>V==null,Es=V=>!rs(V),to=io("function"),Tt=io("number"),Rs=()=>{},Ht=j=(V,X)=>pe=>V(X(pe)),Ve=V=>()=>V;function Xo(V,...X){return(...pe)=>{const Fe=X.concat(pe);return V.apply(null,Fe)}}const hn=Ve(!1),re=Ve(!0);class bt{constructor(X,pe){this.tag=X,this.value=pe}static some(X){return new bt(!0,X)}static none(){return bt.singletonNone}fold(X,pe){return this.tag?pe(this.value):X()}isSome(){return this.tag}isNone(){return!this.tag}map(X){return this.tag?bt.some(X(this.value)):bt.none()}bind(X){return this.tag?X(this.value):bt.none()}exists(X){return this.tag&&X(this.value)}forall(X){return!this.tag||X(this.value)}filter(X){return!this.tag||X(this.value)?this:bt.none()}getOr(X){return this.tag?this.value:X}or(X){return this.tag?this:X}getOrThunk(X){return this.tag?this.value:X()}orThunk(X){return this.tag?this:X()}getOrDie(X){if(this.tag)return this.value;throw new Error(X!=null?X:"Called getOrDie on None")}static from(X){return Es(X)?bt.some(X):bt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(X){this.tag&&X(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}bt.singletonNone=new bt(!1);const Jn=Xt=_e=()=>{const V=Jn(Rs);return{...V,on:},te=(V,X)=>{let pe=null;return{cancel:()=>{Hn(pe)||(clearTimeout(pe),pe=null)},throttle:(...kn)=>{Hn(pe)&&(pe=setTimeout(()=>{pe=null,V.apply(null,kn)},X))}}},go=Array.prototype.push,Xe=(V,X)=>{const pe=V.length,Fe=new Array(pe);for(let mt=0;mt<pe;mt++){const kn=V[mt];Fe[mt]=X(kn,mt)}return Fe},Oe=(V,X)=>{for(let pe=0,Fe=V.length;pe<Fe;pe++){const mt=V[pe];X(mt,pe)}},k=(V,X)=>{const pe=[];for(let Fe=0,mt=V.length;Fe<mt;Fe++){const kn=V[Fe];X(kn,Fe)&&pe.push(kn)}return pe},mn=(V,X,pe)=>{for(let Fe=0,mt=V.length;Fe<mt;Fe++){const kn=V[Fe];if(X(kn,Fe))return bt.some(kn);if(pe(kn,Fe))break}return bt.none()},ze=(V,X)=>mn(V,X,hn),pn=V=>{const X=[];for(let pe=0,Fe=V.length;pe<Fe;++pe){if(!ea(V[pe]))throw new Error("Arr.flatten item "+pe+" was not an array, input: "+V);go.apply(X,V[pe])}return X},Ot=(V,X)=>pn(Xe(V,X)),Ne=(V,X)=>X>=0&&X<V.length?bt.some(V[X]):bt.none(),Rn=V=>Ne(V,0),cs=(V,X)=>{for(let pe=0;pe<V.length;pe++){const Fe=X(V[pe],pe);if(Fe.isSome())return Fe}return bt.none()},it=Object.keys,It=(V,X)=>{const pe=it(V);for(let Fe=0,mt=pe.length;Fe<mt;Fe++){const kn=pe[Fe],jo=V[kn];X(jo,kn)}},ye=(V,X,pe=0,Fe)=>{const mt=V.indexOf(X,pe);return mt!==-1?Ds(Fe)?!0:mt+X.length<=Fe:!1},We=V=>V.style!==void 0&&to(V.style.getPropertyValue),$=(V,X)=>{const Fe=(X||document).createElement("div");if(Fe.innerHTML=V,!Fe.hasChildNodes()||Fe.childNodes.length>1){const mt="HTML does not have a single root node";throw new Error(mt)}return lo(Fe.childNodes[0])},Ts=(V,X)=>{const Fe=(X||document).createElement(V);return lo(Fe)},Kn=(V,X)=>{const Fe=(X||document).createTextNode(V);return lo(Fe)},lo=V=>{if(V==null)throw new Error("Node cannot be null or undefined");return{dom:V}},Ns={fromHtml:$,fromTag:Ts,fromText:Kn,fromDom:lo,fromPoint:(V,X,pe)=>bt.from(V.dom.elementFromPoint(X,pe)).map(lo)};typeof window<"u"||Function("return this;")();const Re=9,st=11,De=1,le=3,jt=V=>V.dom.nodeType,jn=V=>X=>jt(X)===V,Ct=jn(De),Ms=jn(le),Cn=jn(Re),Cr=jn(st),ao=(V,X)=>{const pe=V.dom;if(pe.nodeType!==De)return!1;{const Fe=pe;if(Fe.matches!==void 0)return Fe.matches(X);if(Fe.msMatchesSelector!==void 0)return Fe.msMatchesSelector(X);if(Fe.webkitMatchesSelector!==void 0)return Fe.webkitMatchesSelector(X);if(Fe.mozMatchesSelector!==void 0)return Fe.mozMatchesSelector(X);throw new Error("Browser lacks native selectors")}},ks=V=>V.nodeType!==De&&V.nodeType!==Re&&V.nodeType!==st||V.childElementCount===0,Ii=(V,X)=>{const pe=X===void 0?document:X.dom;return ks(pe)?[]:Xe(pe.querySelectorAll(V),Ns.fromDom)},Wr=(V,X)=>V.dom===X.dom,vs=V=>Ns.fromDom(V.dom.ownerDocument),Uo=V=>Cn(V)?V:vs(V),Ol=V=>bt.from(V.dom.parentNode).map(Ns.fromDom),$o=(V,X)=>{const pe=to(X)?X:hn;let Fe=V.dom;const mt=[];for(;Fe.parentNode!==null&&Fe.parentNode!==void 0;){const kn=Fe.parentNode,jo=Ns.fromDom(kn);if(mt.push(jo),pe(jo)===!0)break;Fe=kn}return mt},Fo=V=>{const X=return Ol(V).map(li).map(X).getOr([])},li=V=>Xe(V.dom.childNodes,Ns.fromDom),Bs=V=>Cr(V)&&Es(V.dom.host),zc=to(Element.prototype.attachShadow)&&to(Node.prototype.getRootNode),ur=Ve(zc),Fa=zc?V=>Ns.fromDom(V.dom.getRootNode()):Uo,Hi=V=>{const X=Fa(V);return Bs(X)?bt.some(X):bt.none()},Ys=V=>Ns.fromDom(V.dom.host),du=V=>{if(ur()&&Es(V.target)){const X=Ns.fromDom(V.target);if(Ct(X)&&dt(X)&&V.composed&&V.composedPath){const pe=V.composedPath();if(pe)return Rn(pe)}}return bt.from(V.target)},dt=V=>Es(V.dom.shadowRoot),Gn=V=>{const X=Ms(V)?V.dom.parentNode:V.dom;if(X==null||X.ownerDocument===null)return!1;const pe=X.ownerDocument;return Hi(Ns.fromDom(X)).fold(()=>pe.body.contains(X),j(Gn,Ys))},$r=V=>{const X=V.dom.body;if(X==null)throw new Error("Body is not available yet");return Ns.fromDom(X)},ic=(V,X,pe)=>{if(bs(pe)||Is(pe)||Tt(pe))V.setAttribute(X,pe+"");else throw new Error("Attribute value was not simple")},mu=(V,X,pe)=>{ic(V.dom,X,pe)},Uc=(V,X)=>{const pe=V.dom.getAttribute(X);return pe===null?void 0:pe},wo=(V,X)=>{V.dom.removeAttribute(X)},ta=(V,X,pe)=>{if(!bs(pe))throw new Error("CSS value must be a string: "+pe);We(V)&&V.style.setProperty(X,pe)},pa=(V,X)=>{const pe=V.dom;It(X,(Fe,mt)=>{ta(pe,mt,Fe)})},xo=(V,X)=>{const pe=V.dom,mt=window.getComputedStyle(pe).getPropertyValue(X);return mt===""&&!Gn(V)?Gt(pe,X):mt},Gt=(V,X)=>We(V)?V.style.getPropertyValue(X):"",Zr=(V,X,pe,Fe,mt,kn,jo)=>({target:V,x:X,y:pe,stop:Fe,prevent:mt,kill:kn,raw:jo}),La=V=>{const X=Ns.fromDom(du(V).getOr(V.target)),pe=()=>V.stopPropagation(),Fe=()=>V.preventDefault(),mt=Ht(Fe,pe);return Zr(X,V.clientX,V.clientY,pe,Fe,mt,V)},Vi=(V,X)=>pe=>{V(pe)&&X(La(pe))},fu=(V,X,pe,Fe,mt)=>{const kn=Vi(pe,Fe);return V.dom.addEventListener(X,kn,mt),{unbind:Xo(Xs,V,X,kn,mt)}},Fr=(V,X,pe,Fe)=>fu(V,X,pe,Fe,!1),Xs=(V,X,pe,Fe)=>{V.dom.removeEventListener(X,pe,Fe)},as=re,na=(V,X,pe)=>Fr(V,X,as,pe),gu=V=>{let X=!1,pe;return(...Fe)=>(X||(X=!0,pe=V.apply(null,Fe)),pe)},ui=(V,X,pe,Fe)=>{const mt=V.isiOS()&&/ipad/i.test(pe)===!0,kn=V.isiOS()&&!mt,jo=V.isiOS()||V.isAndroid(),or=jo||Fe("(pointer:coarse)"),On=mt||!kn&&jo&&Fe("(min-device-width:768px)"),mc=kn||jo&&!On,Ps=X.isSafari()&&V.isiOS()&&/safari/i.test(pe)===!1,Tr=!mc&&!On&&!Ps;return{isiPad:Ve(mt),isiPhone:Ve(kn),isTablet:Ve(On),isPhone:Ve(mc),isTouch:Ve(or),isAndroid:V.isAndroid,isiOS:V.isiOS,isWebView:Ve(Ps),isDesktop:Ve(Tr)}},lc=(V,X)=>{for(let pe=0;pe<V.length;pe++){const Fe=V[pe];if(Fe.test(X))return Fe}},Jo=(V,X)=>{const pe=lc(V,X);if(!pe)return{major:0,minor:0};const Fe=mt=>Number(X.replace(pe,"$"+mt));return fd(Fe(1),Fe(2))},xc=(V,X)=>{const pe=String(X).toLowerCase();return V.length===0?di():Jo(V,pe)},di=()=>fd(0,0),fd=(V,X)=>({major:V,minor:X}),ba={nu:fd,detect:xc,unknown:di},Ia=(V,X)=>cs(X.brands,pe=>{const Fe=pe.brand.toLowerCase();return ze(V,mt=>{var kn;return Fe===((kn=mt.brand)===null||kn===void 0?void 0:kn.toLowerCase())}).map(mt=>({current:mt.name,version:ba.nu(parseInt(pe.version,10),0)}))}),am=(V,X)=>{const pe=String(X).toLowerCase();return ze(V,Fe=>Fe.search(pe))},de=(V,X)=>am(V,X).map(pe=>{const Fe=ba.detect(pe.versionRegexes,X);return{current:pe.name,version:Fe}}),Lr=(V,X)=>am(V,X).map(pe=>{const Fe=ba.detect(pe.versionRegexes,X);return{current:pe.name,version:Fe}}),Ha=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,oa=V=>X=>ye(X,V),Dl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:V=>ye(V,"edge/")&&ye(V,"chrome")&&ye(V,"safari")&&ye(V,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ha],search:V=>ye(V,"chrome")&&!ye(V,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:V=>ye(V,"msie")||ye(V,"trident")},{name:"Opera",versionRegexes:[Ha,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:oa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:oa("firefox")},{name:"Safari",versionRegexes:[Ha,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:V=>(ye(V,"safari")||ye(V,"mobile/"))&&ye(V,"applewebkit")}],Eo=[{name:"Windows",search:oa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:V=>ye(V,"iphone")||ye(V,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:oa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:oa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:oa("linux"),versionRegexes:[]},{name:"Solaris",search:oa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:oa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:oa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gd={browsers:Ve(Dl),oses:Ve(Eo)},hu="Edge",zi="Chromium",rl="IE",Js="Opera",is="Firefox",uc="Safari",Ec=()=>mi({current:void 0,version:ba.unknown()}),mi=V=>{const X=V.current,pe=V.version,Fe=mt=>()=>X===mt;return{current:X,version:pe,isEdge:Fe(hu),isChromium:Fe(zi),isIE:Fe(rl),isOpera:Fe(Js),isFirefox:Fe(is),isSafari:Fe(uc)}},cl={unknown:Ec,nu:mi,edge:Ve(hu),chromium:Ve(zi),ie:Ve(rl),opera:Ve(Js),firefox:Ve(is),safari:Ve(uc)},Ui="Windows",ro="iOS",Sr="Android",sa="Linux",Va="macOS",Tc="Solaris",_s="FreeBSD",Oo="ChromeOS",jr=()=>pu({current:void 0,version:ba.unknown()}),pu=V=>{const X=V.current,pe=V.version,Fe=mt=>()=>X===mt;return{current:X,version:pe,isWindows:Fe(Ui),isiOS:Fe(ro),isAndroid:Fe(Sr),isMacOS:Fe(Va),isLinux:Fe(sa),isSolaris:Fe(Tc),isFreeBSD:Fe(_s),isChromeOS:Fe(Oo)}},co={unknown:jr,nu:pu,windows:Ve(Ui),ios:Ve(ro),android:Ve(Sr),linux:Ve(sa),macos:Ve(Va),solaris:Ve(Tc),freebsd:Ve(_s),chromeos:Ve(Oo)},Gr={detect:(V,X,pe)=>{const Fe=gd.browsers(),mt=gd.oses(),kn=X.bind(On=>Ia(Fe,On)).orThunk(()=>de(Fe,V)).fold(cl.unknown,cl.nu),jo=Lr(mt,V).fold(co.unknown,co.nu),or=ui(jo,kn,V,pe);return{browser:kn,os:jo,deviceType:or}}},Hs=V=>window.matchMedia(V).matches;let va=gu(()=>Gr.detect(navigator.userAgent,bt.from(navigator.userAgentData),Hs));const ya=()=>va(),xr=(V,X)=>({left:V,top:X,translate:(Fe,mt)=>xr(V+Fe,X+mt)}),za=xr,ra=V=>{const X=V!==void 0?V.dom:document,pe=X.body.scrollLeft||X.documentElement.scrollLeft,Fe=X.body.scrollTop||X.documentElement.scrollTop;return za(pe,Fe)},Rl=V=>{const X=V===void 0?window:V;return ya().browser.isFirefox()?bt.none():bt.from(X.visualViewport)},ca=(V,X,pe,Fe)=>({x:V,y:X,width:pe,height:Fe,right:V+pe,bottom:X+Fe}),hd=V=>{const X=V===void 0?window:V,pe=X.document,Fe=ra(Ns.fromDom(pe));return Rl(X).fold(()=>{const mt=X.document.documentElement,kn=mt.clientWidth,jo=mt.clientHeight;return ca(Fe.left,Fe.top,kn,jo)},mt=>ca(Math.max(mt.pageLeft,Fe.left),Math.max(mt.pageTop,Fe.top),mt.width,mt.height))},dc=(V,X,pe)=>Rl(pe).map(Fe=>{const mt=kn=>X(La(kn));return Fe.addEventListener(V,mt),{unbind:}).getOrThunk(;var fi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Nl=tinymce.util.Tools.resolve("tinymce.Env");const Ml=(V,X)=>{V.dispatch("FullscreenStateChanged",{state:X}),V.dispatch("ResizeEditor")},pd=V=>X=>X.options.get(V),H=V=>{const X=V.options.register;X("fullscreen_native",{processor:"boolean",default:!1})},ee=pd("fullscreen_native"),ue=V=>{const X=Ns.fromDom(V.getElement());return Hi(X).map(Ys).getOrThunk(},xe=V=>V.fullscreenElement!==void 0?V.fullscreenElement:V.msFullscreenElement!==void 0?V.msFullscreenElement:V.webkitFullscreenElement!==void 0?V.webkitFullscreenElement:null,qe=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Wt=V=>{const X=V.dom;X.requestFullscreen?X.requestFullscreen():X.msRequestFullscreen?X.msRequestFullscreen():X.webkitRequestFullScreen&&X.webkitRequestFullScreen()},vo=V=>{const X=V.dom;X.exitFullscreen?X.exitFullscreen():X.msExitFullscreen?X.msExitFullscreen():X.webkitCancelFullScreen&&X.webkitCancelFullScreen()},Do=V=>V.dom===xe(vs(V).dom),ho=Ko=Vn=V=>Ii(V),ls=(V,X,pe)=>ho(V,Fe=>ao(Fe,X),pe),kc=(V,X)=>Ko(V,pe=>ao(pe,X)),Bl="data-ephox-mobile-fullscreen-style",ht="display:none!important;",bu="position:absolute!important;",Qo="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Er="background-color:rgb(255,255,255)!important;",pf=Nl.os.isAndroid(),es=V=>{const X=xo(V,"background-color");return X!==void 0&&X!==""?"background-color:"+X+"!important":Er},Jh=(V,X,pe)=>{const Fe=mc=>kc(mc,"*:not(.tox-silver-sink)"),mt=mc=>Ps=>{const Tr=Uc(Ps,"style"),kr=Tr===void 0?"no-styles":Tr.trim();kr!==mc&&(mu(Ps,Bl,kr),pa(Ps,V.parseStyle(mc)))},kn=ls(X,"*"),jo=Ot(kn,Fe),or=es(pe);Oe(jo,mt(ht)),Oe(kn,mt(bu+Qo+or)),mt((pf===!0?"":bu)+Qo+or)(X)},Wi=V=>{const X=Vn("["+Bl+"]");Oe(X,pe=>{const Fe=Uc(pe,Bl);Fe&&Fe!=="no-styles"?pa(pe,V.parseStyle(Fe)):wo(pe,"style"),wo(pe,Bl)})},vu=fi.DOM,an=()=>hd(window),_c=V=>window.scrollTo(V.x,V.y),Ke=Rl().fold(V=>{const X=_e(),pe=Xt(),Fe=Xt(),mt=kn=()=>{window.requestAnimationFrame(()=>{X.on(mc=>pa(mc,{top:V.offsetTop+"px",left:V.offsetLeft+"px",height:V.height+"px",width:V.width+"px"}))})},jo=te(50);return{bind:mc=>{X.set(mc),jo.throttle(),pe.set(dc("resize",jo.throttle)),Fe.set(dc("scroll",jo.throttle))},unbind:()=>{X.on(,X.clear()}}}),ts=(V,X)=>{const pe=document.body,Fe=document.documentElement,mt=V.getContainer(),kn=Ns.fromDom(mt),jo=ue(V),or=X.get(),On=Ns.fromDom(V.getBody()),mc=Nl.deviceType.isTouch(),Ps=mt.style,Tr=V.iframeElement,kr=Tr==null?void 0:Tr.style,yu=Go=>{Go(pe,"tox-fullscreen"),Go(Fe,"tox-fullscreen"),Go(mt,"tox-fullscreen"),Hi(kn).map(sr=>Ys(sr).dom).each(},Bn=()=>{mc&&Wi(V.dom),yu(vu.removeClass),Ke.unbind(),bt.from(X.get()).each(Go=>Go.fullscreenChangeHandler.unbind())};if(or)or.fullscreenChangeHandler.unbind(),ee(V)&&Do(jo)&&vo(vs(jo)),kr.width=or.iframeWidth,kr.height=or.iframeHeight,Ps.width=or.containerWidth,Ps.height=or.containerHeight,Ps.top=or.containerTop,Ps.left=or.containerLeft,Bn(),_c(or.scrollPos),X.set(null),Ml(V,!1),V.off("remove",Bn);else{const Go=na(vs(jo),qe(),Qh=>{ee(V)&&!Do(jo)&&X.get()!==null&&ts(V,X)}),sr={scrollPos:an(),containerWidth:Ps.width,containerHeight:Ps.height,containerTop:Ps.top,containerLeft:Ps.left,iframeWidth:kr.width,iframeHeight:kr.height,fullscreenChangeHandler:Go};mc&&Jh(V.dom,kn,On),kr.width=kr.height="100%",Ps.width=Ps.height="",yu(vu.addClass),Ke.bind(kn),V.on("remove",Bn),X.set(sr),ee(V)&&Wt(jo),Ml(V,!0)}},bd=(V,X)=>{V.addCommand("mceFullScreen",()=>{ts(V,X)})},As=(V,X)=>pe=>{pe.setActive(X.get()!==null);const Fe=mt=>pe.setActive(mt.state);return V.on("FullscreenStateChanged",Fe),()=>V.off("FullscreenStateChanged",Fe)},dr=(V,X)=>{const pe=()=>V.execCommand("mceFullScreen");V.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:pe,onSetup:As(V,X)}),V.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:pe,onSetup:As(V,X)})};var Zi=()=>{wc.add("fullscreen",V=>{const X=ha(null);return V.inline||(H(V),bd(V,X),dr(V,X),V.addShortcut("Meta+Shift+F","","mceFullScreen")),ac(X)})};Zi()})();(function(){var ha=tinymce.util.Tools.resolve("tinymce.PluginManager");const wc=(H,ee,ue)=>{var xe;return ue(H,ee.prototype)?!0:((xe=H.constructor)===null||xe===void 0?void 0:xe.name)===ee.name},ac=H=>{const ee=typeof H;return H===null?"null":ee==="object"&&Array.isArray(H)?"array":ee==="object"&&wc(H,String,(ue,xe)=>xe.isPrototypeOf(ue))?"string":ee},ps=H=>ee=>ac(ee)===H,yr=nr=H=>ee=>H===ee,io=ps("string"),nt=ps("object"),bs=ps("array"),ea=nr(null),Hn=yr("boolean"),Is=H=>H==null,Ds=H=>!Is(H),rs=yr("function"),Es=to=Tt=H=>()=>H,Rs=class Ht{me(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?Ht.some(ee(this.value)):Ht.none()}bind(ee){return this.tag?ee(this.value):Ht.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:Ht.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee!=null?ee:"Called getOrDie on None")}static from(ee){return Ds(ee)?Ht.some(ee):Ht.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ht.singletonNone=new Ht(!1);const j=Array.prototype.indexOf,Ve=Array.prototype.push,Xo=(H,ee)=>j.call(H,ee),hn=re=bt=(H,ee)=>{for(let ue=0,xe=H.length;ue<xe;ue++){const qe=H[ue];ee(qe,ue)}},Jn=Xt=_e=te=go=(H,ee,ue=Rs)=>H.exists(xe=>ue(xe,ee)),Xe=Oe=k=H=>ee=>ee.options.get(H),mn=H=>{const ee=H.options.register;ee("link_assume_external_targets",{processor:ue=>{const xe=io(ue)||Hn(ue);return xe?ue===!0?{value:1,valid:xe}:ue==="http"||ue==="https"?{value:ue,valid:xe}:{value:0,valid:xe}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ee("link_context_toolbar",{processor:"boolean",default:!1}),ee("link_list",{processor:ue=>io(ue)||rs(ue)||Es(ue,nt)}),ee("link_default_target",{processor:"string"}),ee("link_default_protocol",{processor:"string",default:"https"}),ee("link_target_list",{processor:default:!0}),ee("link_rel_list",{processor:"object[]",default:[]}),ee("link_class_list",{processor:"object[]",default:[]}),ee("link_title",{processor:"boolean",default:!0}),ee("allow_unsafe_link_target",{processor:"boolean",default:!1}),ee("link_quicklink",{processor:"boolean",default:!1})},ze=k("link_assume_external_targets"),pn=k("link_context_toolbar"),Ot=k("link_list"),Ne=k("link_default_target"),Rn=k("link_default_protocol"),cs=k("link_target_list"),it=k("link_rel_list"),It=k("link_class_list"),ye=k("link_title"),We=k("allow_unsafe_link_target"),$=k("link_quicklink");var Ts=tinymce.util.Tools.resolve("tinymce.util.Tools");const Kn=H=>io(H.value)?H.value:"",lo=H=>io(H.text)?H.text:io(H.title)?H.title:"",no=(H,ee)=>{const ue=[];return Ts.each(H,xe=>{const qe=lo(xe);if(xe.menu!==void 0){const Wt=no(xe.menu,ee);ue.push({text:qe,items:Wt})}else{const Wt=ee(xe);ue.push({text:qe,value:Wt})}}),ue},Ns=(H=Kn)=>ee=>Ht.from(ee).map(ue=>no(ue,H)),De={sanitize:sanitizeWith:Ns,createUi:(H,ee)=>ue=>({name:H,type:"listbox",label:ee,items:ue}),getValue:Kn},le=Object.keys,jt=Object.hasOwnProperty,jn=(H,ee)=>{const ue=le(H);for(let xe=0,qe=ue.length;xe<qe;xe++){const Wt=ue[xe],vo=H[Wt];ee(vo,Wt)}},Ct=H=>(ee,ue)=>{H[ue]=ee},Ms=(H,ee,ue,xe)=>{jn(H,(qe,Wt)=>{(ee(qe,Wt)?ue:xe)(qe,Wt)})},Cn=(H,ee)=>{const ue={};return Ms(H,ee,Ct(ue),to),ue},Cr=(H,ee)=>jt.call(H,ee),ao=(H,ee)=>Cr(H,ee)&&H[ee]!==void 0&&H[ee]!==null;var ks=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ii=tinymce.util.Tools.resolve("tinymce.util.URI");const Wr=H=>Ds(H)&&H.nodeName.toLowerCase()==="a",vs=H=>Wr(H)&&!!$o(H),Uo=(H,ee)=>{if(H.collapsed)return[];{const ue=H.cloneContents(),xe=ue.firstChild,qe=new ks(xe,ue),Wt=[];let vo=xe;do ee(vo)&&Wt.push(vo);while(vo=qe.next());return Wt}},Ol=H=>/^\w+:/i.test(H),$o=H=>{var ee,ue;return(ue=(ee=H.getAttribute("data-mce-href"))!==null&&ee!==void 0?ee:H.getAttribute("href"))!==null&&ue!==void 0?ue:""},Fo=(H,ee)=>{const ue=["noopener"],xe=H?H.split(/\s+/):[],qe=ho=>Ts.trim(ho.sort().join(" ")),Wt=ho=>(ho=vo(ho),ho.length>0?ho.concat(ue):ue),vo=ho=>ho.filter(Ko=>Ts.inArray(ue,Ko)===-1),Do=ee?Wt(xe):vo(xe);return Do.length>0?qe(Do):""},li=H=>H.replace(/\uFEFF/g,""),Bs=(H,ee)=>(ee=ee||Fa(H.selection.getRng())[0]||H.selection.getNode(),Gn(ee)?Ht.from(H.dom.select("a[href]",ee)[0]):Ht.from(H.dom.getParent(ee,"a[href]"))),zc=ur=(H,ee)=>{const ue=ee.fold(;return li(ue)},Fa=H=>Uo(H,vs),Hi=H=>Ts.grep(H,vs),Ys=H=>Hi(H).length>0,du=dt=H=>{const ee=H.schema.getTextInlineElements(),ue=Wt=>Wt.nodeType===1&&!Wr(Wt)&&!Cr(ee,Wt.nodeName.toLowerCase());if(Bs(H).exists(Wt=>Wt.hasAttribute("data-mce-block")))return!1;const qe=H.selection.getRng();return qe.collapsed?!0:Uo(qe,ue).length===0},Gn=H=>Ds(H)&&H.nodeName==="FIGURE"&&/\bimage\b/i.test(H.className),$r=H=>Jn(["title","rel","class","target"],(ue,xe)=>(H[xe].each(qe=>{ue[xe]=qe.length>0?qe:null}),ue),{href:H.href}),ic=(H,ee)=>(ee==="http"||ee==="https")&&!Ol(H)?ee+"://"+H:H,mu=(H,ee)=>{const ue={...ee};if(it(H).length===0&&!We(H)){const xe=Fo(ue.rel,ue.target==="_blank");ue.rel=xe||null}return Ht.from(ue.target).isNone()&&cs(H)===!1&&(ue.target=Ne(H)),ue.href=ic(ue.href,ze(H)),ue},Uc=(H,ee,ue,xe)=>{ue.each(qe=>{Cr(ee,"innerText")?ee.innerText=qe:ee.textContent=qe}),H.dom.setAttribs(ee,xe),H.selection.select(ee)},wo=(H,ee,ue,xe)=>{const qe=H.dom;Gn(ee)?Fr(qe,ee,xe):ue.fold(()=>{H.execCommand("mceInsertLink",!1,xe)},Wt=>{H.insertContent(qe.createHTML("a",xe,qe.encode(Wt)))})},ta=(H,ee,ue)=>{const xe=H.selection.getNode(),qe=Bs(H,xe),Wt=mu(H,$r(ue));H.undoManager.transact(()=>{ue.href===ee.href&&ee.attach(),qe.fold(()=>{wo(H,xe,ue.text,Wt)},vo=>{H.focus(),Uc(H,vo,ue.text,Wt)})})},pa=H=>{const ee=H.dom,ue=H.selection,xe=ue.getBookmark(),qe=ue.getRng().cloneRange(),Wt=ee.getParent(qe.startContainer,"a[href]",H.getBody()),vo=ee.getParent(qe.endContainer,"a[href]",H.getBody());Wt&&qe.setStartBefore(Wt),vo&&qe.setEndAfter(vo),ue.setRng(qe),H.execCommand("unlink"),ue.moveToBookmark(xe)},xo=H=>{H.undoManager.transact(()=>{const ee=H.selection.getNode();Gn(ee)?fu(H,ee):pa(H),H.focus()})},Gt=H=>{const{class:ee,href:ue,rel:xe,target:qe,text:Wt,title:vo}=H;return Cn({class:ee.getOrNull(),href:ue,rel:xe.getOrNull(),target:qe.getOrNull(),text:Wt.getOrNull(),title:vo.getOrNull()},(Do,ho)=>ea(Do)===!1)},Zr=(H,ee)=>{const ue=H.options.get,xe={allow_html_data_urls:ue("allow_html_data_urls"),allow_script_urls:ue("allow_script_urls"),allow_svg_data_urls:ue("allow_svg_data_urls")},qe=ee.href;return{...ee,href:Ii.isDomSafe(qe,"a",xe)?qe:""}},La=(H,ee,ue)=>{const xe=Zr(H,ue);H.hasPlugin("rtc",!0)?H.execCommand("createlink",!1,Gt(xe)):ta(H,ee,xe)},Vi=H=>{H.hasPlugin("rtc",!0)?H.execCommand("unlink"):xo(H)},fu=(H,ee)=>{var ue;const xe=H.dom.select("img",ee)[0];if(xe){const qe=H.dom.getParents(xe,"a[href]",ee)[0];qe&&((ue=qe.parentNode)===null||ue===void 0||ue.insertBefore(xe,qe),H.dom.remove(qe))}},Fr=(H,ee,ue)=>{var xe;const qe=H.select("img",ee)[0];if(qe){const Wt=H.create("a",ue);(xe=qe.parentNode)===null||xe===void 0||xe.insertBefore(Wt,qe),Wt.appendChild(qe)}},Xs=H=>ao(H,"items"),as=(H,ee)=>te(ee,ue=>Xs(ue)?as(H,ue.items):Oe(ue.value===H,ue)),na=(H,ee,ue,xe)=>{const qe=xe[ee],Wt=H.length>0;return qe!==void 0?as(qe,ue).map(vo=>({url:{value:vo.value,meta:{text:Wt?H:vo.text,attach:to}},text:Wt?H:vo.text})):Ht.none()},gu=(H,ee)=>ee==="link"?H.link:ee==="anchor"?H.anchor:Ht.none(),lc={init:(H,ee)=>{const ue={text:H.text,title:H.title},xe=ho=>{var Ko;return Oe(ue.title.length<=0,Ht.from((Ko=ho.meta)===null||Ko===void 0?void 0:Ko.title).getOr(""))},qe=ho=>{var Ko;return Oe(ue.text.length<=0,Ht.from((Ko=ho.meta)===null||Ko===void 0?void 0:Ko.text).getOr(ho.value))},Wt=ho=>{const Ko=qe(ho.url),Vn=xe(ho.url);return Ko.isSome()||Vn.isSome()?Ht.some({...Ko.map(ls=>({text:ls})).getOr({}),...Vn.map(ls=>({title:ls})).getOr({})}):Ht.none()},vo=(ho,Ko)=>{const Vn=gu(ee,Ko).getOr([]);return na(ue.text,Ko,Vn,ho)};return{onChange:(ho,Ko)=>{const Vn=Ko.name;return Vn==="url"?Wt(ho()):hn(["anchor","link"],Vn)?vo(ho(),Vn):((Vn==="text"||Vn==="title")&&(ue[Vn]=ho()[Vn]),Ht.none())}}},getDelta:na};var Jo=tinymce.util.Tools.resolve("tinymce.util.Delay");const xc=(H,ee,ue)=>{const xe=H.selection.getRng();Jo.setEditorTimeout(H,()=>{H.windowManager.confirm(ee,})},di=H=>{const ee=H.href;return ee.indexOf("@")>0&&ee.indexOf("/")===-1&&ee.indexOf("mailto:")===-1?Ht.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:xe=>({...xe,href:"mailto:"+ee})}):Ht.none()},fd=(H,ee)=>ue=>{const xe=ue.href;return H===1&&!Ol(xe)||H===0&&/^\s*www(\.|\d\.)/i.test(xe)?Ht.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ee}:// prefix?`,preprocess:Wt=>({...Wt,href:ee+"://"+xe})}):Ht.none()},Ia={preprocess:(H,ee)=>te([di,fd(ze(H),Rn(H))],ue=>ue(ee)).fold(()=>Promise.resolve(ee),ue=>new Promise(xe=>{xc(H,ue.message,qe=>{xe(qe?ue.preprocess(ee):ee)})}))},de={getAnchors:H=>{const ee=H.dom.select("a:not([href])"),ue=_e(ee,xe=>{const qe=xe.name||xe.id;return qe?[{text:qe,value:"#"+qe}]:[]});return ue.length>0?Ht.some([{text:"None",value:""}].concat(ue)):Ht.none()}},Ha={getClasses:H=>{const ee=It(H);return ee.length>0?De.sanitize(ee):Ht.none()}},oa=H=>{try{return Ht.some(JSON.parse(H))}catch(ee){return Ht.none()}},Eo={getLinks:H=>{const ee=xe=>H.convertURL(xe.value||xe.url||"","href"),ue=Ot(H);return new Promise(xe=>{io(ue)?fetch(ue).then(qe=>qe.ok?qe.text().then(oa):Promise.reject()).then(xe,:rs(ue)?ue(qe=>xe(Ht.some(qe))):xe(Ht.from(ue))}).then(xe=>xe.bind(De.sanitizeWith(ee)).map(qe=>qe.length>0?[{text:"None",value:""}].concat(qe):qe))}},hu={getRels:(H,ee)=>{const ue=it(H);if(ue.length>0){const xe=go(ee,"_blank"),qe=We(H)===!1,Wt=Do=>Fo(De.getValue(Do),xe);return(qe?De.sanitizeWith(Wt):De.sanitize)(ue)}return Ht.none()}},zi=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Js={getTargets:H=>{const ee=cs(H);return bs(ee)?De.sanitize(ee).orThunk(()=>Ht.some(zi)):ee===!1?Ht.none():Ht.some(zi)}},is=(H,ee,ue)=>{const xe=H.getAttrib(ee,ue);return xe!==null&&xe.length>0?Ht.some(xe):Ht.none()},uc=(H,ee)=>{const ue=H.dom,qe=dt(H)?Ht.some(ur(H.selection,ee)):Ht.none(),Wt=ee.bind(Vn=>Ht.from(ue.getAttrib(Vn,"href"))),vo=ee.bind(,Do=ee.bind(Vn=>is(ue,Vn,"rel")),ho=ee.bind(Vn=>is(ue,Vn,"class")),Ko=ee.bind(Vn=>is(ue,Vn,"title"));return{url:Wt,text:qe,title:Ko,target:vo,rel:Do,linkClass:ho}},mi={collect:(H,ee)=>Eo.getLinks(H).then(ue=>{const xe=uc(H,ee);return{anchor:xe,catalogs:{targets:Js.getTargets(H),rels:hu.getRels(H,xe.target),classes:Ha.getClasses(H),anchor:de.getAnchors(H),link:ue},optNode:ee,flags:{titleEnabled:ye(H)}}})},cl=(H,ee)=>ue=>{const xe=ue.getData();if(!xe.url.value){Vi(H),ue.close();return}const qe=Do=>Ht.from(xe[Do]).filter(ho=>!go(ee.anchor[Do],ho)),Wt={href:xe.url.value,text:qe("text"),target:qe("target"),rel:qe("rel"),class:qe("linkClass"),title:qe("title")},vo={href:xe.url.value,attach:xe.url.meta!==void 0&&xe.url.meta.attach?xe.url.meta.attach:to};Ia.preprocess(H,Wt).then(Do=>{La(H,vo,Do)}),ue.close()},Ui=ro=(H,ee)=>{const ue=H.anchor,xe=ue.url.getOr("");return{url:{value:xe,meta:{original:{value:xe}}},text:ue.text.getOr(""),title:ue.title.getOr(""),anchor:xe,link:xe,rel:ue.rel.getOr(""),target:ue.target.or(ee).getOr(""),linkClass:ue.linkClass.getOr("")}},Sr=(H,ee,ue)=>{const xe=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],qe=H.anchor.text.map(.toArray(),Wt=H.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],vo=Ht.from(Ne(ue)),Do=ro(H,vo),ho=H.catalogs,Ko=lc.init(Do,ho);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Xt([xe,qe,Wt,Xe([ho.anchor.map(De.createUi("anchor","Anchors")),ho.rels.map(De.createUi("rel","Rel")),ho.targets.map(De.createUi("target","Open link in...")),ho.link.map(De.createUi("link","Link list")),ho.classes.map(De.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Do,onChange:(ls,{name:kc})=>{Ko.onChange(ls.getData,{name:kc}).each(Bl=>{ls.setData(Bl)})},onSubmit:ee}},sa=H=>{Ui(H).then(ue=>{const xe=cl(H,ue);return Sr(ue,xe,H)}).then(ue=>{H.windowManager.open(ue)})},Va=H=>{H.addCommand("mceLink",(ee,ue)=>{(ue==null?void 0:ue.dialog)===!0||!$(H)?sa(H):H.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Tc=tinymce.util.Tools.resolve("tinymce.util.VK");const _s=(H,ee)=>{document.body.appendChild(H),H.dispatchEvent(ee),document.body.removeChild(H)},Oo=H=>{const ee=document.createElement("a");ee.target="_blank",ee.href=H,ee.rel="noreferrer noopener";const ue=document.createEvent("MouseEvents");ue.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),_s(ee,ue)},jr=(H,ee)=>H.dom.getParent(ee,"a[href]"),pu=co=H=>H.altKey===!0&&H.shiftKey===!1&&H.ctrlKey===!1&&H.metaKey===!1,wr=(H,ee)=>{if(ee){const ue=$o(ee);if(/^#/.test(ue)){const xe=H.dom.select(ue);xe.length&&H.selection.scrollIntoView(xe[0],!0)}else Oo(ee.href)}},Gr=H=>()=>{H.execCommand("mceLink",!1,{dialog:!0})},Hs=H=>()=>{wr(H,pu(H))},va=H=>{H.on("click",ee=>{const ue=jr(H,ee.target);ue&&Tc.metaKeyPressed(ee)&&(ee.preventDefault(),wr(H,ue))}),H.on("keydown",ee=>{if(!ee.isDefaultPrevented()&&ee.keyCode===13&&co(ee)){const ue=pu(H);ue&&(ee.preventDefault(),wr(H,ue))}})},ya=(H,ee)=>(H.on("NodeChange",ee),()=>H.off("NodeChange",ee)),xr=H=>ee=>{const ue=()=>{ee.setActive(!H.mode.isReadOnly()&&zc(H,H.selection.getNode())),ee.setEnabled(H.selection.isEditable())};return ue(),ya(H,ue)},za=H=>ee=>{const ue=return ue(),ya(H,ue)},ra=H=>(H.selection.isCollapsed()?Hi(H.dom.getParents(H.selection.getStart())):Fa(H.selection.getRng())).length===1,Rl=H=>ee=>{const ue=return ue(),ya(H,ue)},ca=H=>ee=>{const ue=Wt=>Ys(Wt)||du(H.selection.getRng()),xe=H.dom.getParents(H.selection.getStart()),qe=Wt=>{ee.setEnabled(ue(Wt)&&H.selection.isEditable())};return qe(xe),ya(H,Wt=>qe(Wt.parents))},hd=H=>{H.addShortcut("Meta+K","",()=>{H.execCommand("mceLink")})},dc=H=>{H.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Gr(H),onSetup:xr(H)}),H.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Hs(H),onSetup:Rl(H)}),H.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Vi(H),onSetup:ca(H)})},fi=H=>{H.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Hs(H),onSetup:Rl(H)}),H.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:za(H),onAction:Gr(H)}),H.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Vi(H),onSetup:ca(H)})},Nl=H=>{const ee="link unlink openlink",ue="link";H.ui.registry.addContextMenu("link",{update:xe=>H.dom.isEditable(xe)?Ys(H.dom.getParents(xe,"a"))?ee:ue:""})},Ml=H=>{const ee=qe=>{qe.selection.collapse(!1)},ue=qe=>{const Wt=H.selection.getNode();return qe.setEnabled(zc(H,Wt)),to},xe=qe=>{const Wt=Bs(H),vo=dt(H);if(Wt.isNone()&&vo){const Do=ur(H.selection,Wt);return Oe(Do.length===0,qe)}else return Ht.none()};H.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:xr(H)},label:"Link",predicate:initValue:()=>Bs(H).fold(Tt(""),$o),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:qe=>{const Wt=H.selection.getNode();return qe.setActive(zc(H,Wt)),xr(H)(qe)},onAction:qe=>{const Wt=qe.getValue(),vo=xe(Wt);La(H,{href:Wt,attach:to},{href:Wt,text:vo,title:Ht.none(),rel:Ht.none(),target:Ht.none(),class:Ht.none()}),ee(H),qe.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ue,onAction:,{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ue,onAction:qe=>{Hs(H)(),qe.hide()}}]})};var pd=()=>{ha.add("link",H=>{mn(H),dc(H),fi(H),Nl(H),Ml(H),va(H),Va(H),hd(H)})};pd()})();(function(){var ha=tinymce.util.Tools.resolve("tinymce.PluginManager");const wc=(w,O,F)=>{var K;return F(w,O.prototype)?!0:((K=w.constructor)===null||K===void 0?void 0:K.name)===O.name},ac=w=>{const O=typeof w;return w===null?"null":O==="object"&&Array.isArray(w)?"array":O==="object"&&wc(w,String,(F,K)=>K.isPrototypeOf(F))?"string":O},ps=w=>O=>ac(O)===w,yr=w=>O=>typeof O===w,nr=ps("string"),io=ps("object"),nt=ps("array"),bs=yr("boolean"),ea=w=>w==null,Hn=w=>!ea(w),Is=yr("function"),Ds=yr("number"),rs=()=>{},Es=to=Tt=(w,O)=>w===O;onst Ht=w=>O=>!w(O),j=to(!1);class Ve{constructor(O,F){this.tag=O,this.value=F}static some(O){return new Ve(!0,O)}static none(){return Ve.singletonNone}fold(O,F){return this.tag?F(this.value):O()}isSome(){return this.tag}isNone(){return!this.tag}map(O){return this.tag?Ve.some(O(this.value)):Ve.none()}bind(O){return this.tag?O(this.value):Ve.none()}exists(O){return this.tag&&O(this.value)}forall(O){return!this.tag||O(this.value)}filter(O){return!this.tag||O(this.value)?this:Ve.none()}getOr(O){return this.tag?this.value:O}or(O){return this.tag?this:O}getOrThunk(O){return this.tag?this.value:O()}orThunk(O){return this.tag?this:O()}getOrDie(O){if(this.tag)return this.value;throw new Error(O!=null?O:"Called getOrDie on None")}static from(O){return Hn(O)?Ve.some(O):Ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(O){this.tag&&O(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ve.singletonNone=new Ve(!1);const Xo=Array.prototype.slice,hn=Array.prototype.indexOf,re=Array.prototype.push,bt=(w,O)=>hn.call(w,O),Jn=(w,O)=>bt(w,O)>-1,Xt=(w,O)=>{for(let F=0,K=w.length;F<K;F++){const ne=w[F];if(O(ne,F))return!0}return!1},_e=(w,O)=>{const F=w.length,K=new Array(F);for(let ne=0;ne<F;ne++){const Ze=w[ne];K[ne]=O(Ze,ne)}return K},te=(w,O)=>{for(let F=0,K=w.length;F<K;F++){const ne=w[F];O(ne,F)}},go=Xe=(w,O)=>{if(w.length===0)return[];{let F=O(w[0]);const K=[];let ne=[];for(let Ze=0,Rt=w.length;Ze<Rt;Ze++){const un=w[Ze],ln=O(un);ln!==F&&(K.push(ne),ne=[]),F=ln,ne.push(un)}return ne.length!==0&&K.push(ne),K}},Oe=(w,O,F)=>(te(w,(K,ne)=>{F=O(F,K,ne)}),F),k=(w,O,F)=>{for(let K=0,ne=w.length;K<ne;K++){const Ze=w[K];if(O(Ze,K))return Ve.some(Ze);if(F(Ze,K))break}return Ve.none()},mn=(w,O)=>k(w,O,j),ze=w=>{const O=[];for(let F=0,K=w.length;F<K;++F){if(!nt(w[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+w);re.apply(O,w[F])}return O},pn=(w,O)=>ze(_e(w,O)),Ot=Ne=Rn=w=>Ne(w,0),cs=it=It=ye=(w,O,F=Tt)=>We(w,O,F).getOr(w.isNone()&&O.isNone()),We=$=8,Ts=9,Kn=11,lo=1,no=3,Ns=(w,O)=>{const K=(O||document).createElement("div");if(K.innerHTML=w,!K.hasChildNodes()||K.childNodes.length>1){const ne="HTML does not have a single root node";throw new Error(ne)}return De(K.childNodes[0])},Re=(w,O)=>{const K=(O||document).createElement(w);return De(K)},st=De=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},jt={fromHtml:Ns,fromTag:Re,fromText:st,fromDom:De,fromPoint:,jn=(w,O)=>{const F=w.dom;if(F.nodeType!==lo)return!1;{const K=F;if(K.matches!==void 0)return K.matches(O);if(K.msMatchesSelector!==void 0)return K.msMatchesSelector(O);if(K.webkitMatchesSelector!==void 0)return K.webkitMatchesSelector(O);if(K.mozMatchesSelector!==void 0)return K.mozMatchesSelector(O);throw new Error("Browser lacks native selectors")}},Ct=(w,O)=>w.dom===O.dom,Ms=(w,O)=>{const F=w.dom,K=O.dom;return F===K?!1:F.contains(K)},Cn=jn,Cr=typeof window<"u"?window:Function("return this;")(),ao=(w,O)=>{let F=O!=null?O:Cr;for(let K=0;K<w.length&&F!==void 0&&F!==null;++K)F=F[w[K]];return F},ks=(w,O)=>{const F=w.split(".");return ao(F,O)},Ii=(w,O)=>ks(w,O),Wr=(w,O)=>{const F=Ii(w,O);if(F==null)throw new Error(w+" not available on this browser");return F},vs=Object.getPrototypeOf,Uo=Ol=w=>{const O=ks("ownerDocument.defaultView",w);return io(w)&&(Uo(O).prototype.isPrototypeOf(w)||/^HTML\w*Element$/.test(vs(w).constructor.name))},$o=Fo=w=>w.dom.nodeType,li=w=>O=>Fo(O)===w,Bs=w=>Fo(w)===$||$o(w)==="#comment",zc=ur=li(lo),Fa=li(no),Hi=li(Ts),Ys=li(Kn),du=dt=w=>jt.fromDom(w.dom.ownerDocument),Gn=$r=w=>Ve.from(w.dom.parentNode).map(jt.fromDom),ic=w=>Ve.from(w.dom.parentElement).map(jt.fromDom),mu=Uc=wo=(w,O)=>{const F=w.dom.childNodes;return Ve.from(F[O]).map(jt.fromDom)},ta=w=>wo(w,0),pa=xo=Zr=Is(Element.prototype.attachShadow)&&Is(Node.prototype.getRootNode)?Gn,La=Vi=fu=w=>{const O=Fa(w)?w.dom.parentNode:w.dom;if(O==null||O.ownerDocument===null)return!1;const F=O.ownerDocument;return La(jt.fromDom(O)).fold(Es(fu,Vi))};var Fr=const Xs=(w,O,F)=>{let K=w.dom;const ne=Is(F)?F:j;for(;K.parentNode;){K=K.parentNode;const Ze=jt.fromDom(K);if(O(Ze))return Ve.some(Ze);if(ne(Ze))break}return Ve.none()},as=na=gu=ui=w=>gu(w,"[contenteditable]"),lc=(w,O=!1)=>fu(w)?w.dom.isContentEditable:ui(w).fold(to(O),,Jo=w=>w.dom.contentEditable,xc=(w,O)=>{$r(w).each(K=>{K.dom.insertBefore(O.dom,w.dom)})},di=(w,O)=>{mu(w).fold(()=>{$r(w).each(ne=>{ba(ne,O)})},K=>{xc(K,O)})},fd=(w,O)=>{ta(w).fold(()=>{ba(w,O)},K=>{w.dom.insertBefore(O.dom,K.dom)})},ba=(w,O)=>{w.dom.appendChild(O.dom)},Ia=(w,O)=>{te(O,F=>{xc(w,F)})},am=de=Lr=w=>{const O=w.dom;O.parentNode!==null&&O.parentNode.removeChild(O)};var Ha=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),oa=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Dl=tinymce.util.Tools.resolve("tinymce.util.VK");const Eo=w=>_e(w,jt.fromDom),gd=Object.keys,hu=(w,O)=>{const F=gd(w);for(let K=0,ne=F.length;K<ne;K++){const Ze=F[K],Rt=w[Ze];O(Rt,Ze)}},zi=rl=Js=is=(w,O,F)=>{if(nr(F)||bs(F)||Ds(F))w.setAttribute(O,F+"");else throw new Error("Attribute value was not simple")},uc=Ec=mi=cl=Ui=(w,O)=>{const F=jt.fromTag(O),K=Ec(w);return uc(F,K),F},ro=(w,O)=>{const F=Ui(w,O);di(w,F);const K=Uc(w);return am(F,K),Lr(w),F};var Sr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),sa=tinymce.util.Tools.resolve("tinymce.util.Tools");const Va=w=>Tc=w=>O=>Hn(O)&&w.test(O.nodeName),_s=w=>Hn(w)&&w.nodeType===3,Oo=w=>Hn(w)&&w.nodeType===1,jr=Tc(/^(OL|UL|DL)$/),pu=Tc(/^(OL|UL)$/),co=Va("ol"),wr=Tc(/^(LI|DT|DD)$/),Gr=Tc(/^(DT|DD)$/),Hs=Tc(/^(TH|TD)$/),va=Va("br"),ya=w=>{var O;return((O=w.parentNode)===null||O===void 0?void 0:O.firstChild)===w},xr=(w,O)=>Hn(O)&&O.nodeName in w.schema.getTextBlockElements(),za=(w,O)=>Hn(w)&&w.nodeName in O,ra=(w,O)=>Hn(O)&&O.nodeName in w.schema.getVoidElements(),Rl=(w,O)=>va(O)?w.isBlock(O.nextSibling)&&!va(O.previousSibling):!1,ca=(w,O,F)=>{const K=w.isEmpty(O);return F&&w.select("span[data-mce-type=bookmark]",O).length>0?!1:K},hd=dc=w=>O=>O.options.get(w),fi=w=>{const O=w.options.register;O("lists_indent_on_tab",{processor:"boolean",default:!0})},Nl=dc("lists_indent_on_tab"),Ml=dc("forced_root_block"),pd=dc("forced_root_block_attrs"),H=(w,O)=>{const F=w.dom,K=w.schema.getBlockElements(),ne=F.createFragment(),Ze=Ml(w),Rt=pd(w);let un,ln,qt=!1;for(ln=F.create(Ze,Rt),za(O.firstChild,K)||ne.appendChild(ln);un=O.firstChild;){const ms=un.nodeName;!qt&&(ms!=="SPAN"||un.getAttribute("data-mce-type")!=="bookmark")&&(qt=!0),za(un,K)?(ne.appendChild(un),ln=null):(ln||(ln=F.create(Ze,Rt),ne.appendChild(ln)),ln.appendChild(un))}return!qt&&ln&&ln.appendChild(F.create("br",{"data-mce-bogus":"1"})),ne},ee=Sr.DOM,ue=(w,O,F)=>{const K=qt=>{const ms=qt.parentNode;ms&&sa.each(ne,,ee.remove(qt)},ne=ee.select('span[data-mce-type="bookmark"]',O),Ze=H(w,F),Rt=ee.createRng();Rt.setStartAfter(F),Rt.setEndAfter(O);const un=Rt.extractContents();for(let qt=un.firstChild;qt;qt=qt.firstChild)if(qt.nodeName==="LI"&&w.dom.isEmpty(qt)){ee.remove(qt);break}w.dom.isEmpty(un)||ee.insertAfter(un,O),ee.insertAfter(Ze,O);const ln=F.parentElement;ln&&ca(w.dom,ln)&&K(ln),ee.remove(F),ca(w.dom,O)&&ee.remove(O)},xe=du("dd"),qe=du("dt"),Wt=(w,O)=>{xe(O)?ro(O,"dt"):qe(O)&&ic(O).each(},vo=w=>{qe(w)&&ro(w,"dd")},Do=(w,O,F)=>{O==="Indent"?te(F,vo):te(F,K=>Wt(w,K))},ho=(w,O)=>{if(_s(w))return{container:w,offset:O};const F=Ha.getNode(w,O);return _s(F)?{container:F,offset:O>=w.childNodes.length?F.data.length:0}:F.previousSibling&&_s(F.previousSibling)?{container:F.previousSibling,offset:F.previousSibling.data.length}:F.nextSibling&&_s(F.nextSibling)?{container:F.nextSibling,offset:0}:{container:w,offset:O}},Ko=w=>{const O=w.cloneRange(),F=ho(w.startContainer,w.startOffset);O.setStart(F.container,F.offset);const K=ho(w.endContainer,w.endOffset);return O.setEnd(K.container,K.offset),O},Vn=["OL","UL","DL"],ls=Vn.join(","),kc=(w,O)=>{const F=O||w.selection.getStart(!0);return w.dom.getParent(F,ls,Wi(w,F))},Bl=(w,O)=>Hn(w)&&O.length===1&&O[0]===w,ht=bu=w=>{const O=kc(w),F=w.selection.getSelectedBlocks();return Bl(O,F)?ht(O):go(F,},Qo=(w,O)=>{const F=sa.map(O,K=>{const ne=w.dom.getParent(K,"li,dd,dt",Wi(w,K));return ne||K});return it(F)},Er=w=>{const O=w.selection.getSelectedBlocks();return go(Qo(w,O),wr)},pf=es=(w,O)=>{const F=w.dom.getParents(O,"TD,TH");return F.length>0?F[0]:w.getBody()},Jh=(w,O)=>!jr(O)&&!wr(O)&&Xt(Vn,,Wi=(w,O)=>{const F=w.dom.getParents(O,w.dom.isBlock);return mn(F,.getOr(w.getBody())},vu=w=>$r(w).exists(O=>wr(O.dom)&&ta(O).exists(F=>!jr(F.dom))&&pa(O).exists(),an=(w,O)=>{const F=w.dom.getParents(O,"ol,ul",Wi(w,O));return cs(F)},_c=w=>{const O=an(w,w.selection.getStart()),F=go(w.selection.getSelectedBlocks(),pu);return O.toArray().concat(F)},Ke=w=>{const O=w.selection.getStart();return w.dom.getParents(O,"ol,ul",Wi(w,O))},ts=w=>{const O=_c(w),F=Ke(w);return mn(F,.fold(},bd=(w,O)=>{const F=_e(O,;return it(F)},As=w=>/\btox\-/.test(w.className),dr=(w,O)=>k(w,jr,Hs).exists(F=>F.nodeName===O&&!As(F)),Zi=(w,O)=>O!==null&&!w.dom.isEditable(O),V=X=(w,O)=>{const F=w.dom.getParent(O,"ol,ul,dl");return Zi(w,F)},pe=(w,O)=>{const F=w.selection.getNode();return O({parents:w.dom.getParents(F),element:F}),w.on("NodeChange",O),()=>w.off("NodeChange",O)},Fe=(w,O)=>{const K=(O||document).createDocumentFragment();return te(w,ne=>{K.appendChild(ne.dom)}),jt.fromDom(K)},mt=jo=((/^\s+|\s+$/g),or=w=>w.length>0,On=w=>!or(w),mc=w=>w.style!==void 0&&Is(w.style.getPropertyValue),Ps=(w,O,F)=>{if(!nr(F))throw new Error("CSS value must be a string: "+F);mc(w)&&w.style.setProperty(O,F)},Tr=kr=w=>Cn(w,"OL,UL"),yu=w=>Cn(w,"LI"),Bn=w=>ta(w).exists(kr),Go=sr=w=>"listAttributes"in w,Qh=w=>"isComment"in w,us=w=>"isFragment"in w,qr=Kr=w=>w.isSelected,s0=w=>{const O=Uc(w),F=Go(w)?O.slice(0,-1):O;return _e(F,cl)},ep=(w,O,F)=>$r(w).filter(ur).map(K=>({depth:O,dirty:!1,isSelected:F,content:s0(w),itemAttributes:Ec(w),listAttributes:Ec(K),listType:$o(K),isInPreviousLi:!1})),Ua=(w,O)=>{ba(w.item,O.list)},hg=w=>{for(let O=1;O<w.length;O++)Ua(w[O-1],w[O])},qo=(w,O)=>{We(cs(w),Rn(O),Ua)},ji=(w,O)=>{const F={list:jt.fromTag(O,w),item:jt.fromTag("li",w)};return ba(F.list,F.item),F},Ac=(w,O,F)=>{const K=[];for(let ne=0;ne<F;ne++)K.push(ji(w,sr(O)?O.listType:O.parentListType));return K},al=(w,O)=>{for(let F=0;F<w.length-1;F++)Tr(w[F].item,"list-style-type","none");cs(w).each(F=>{sr(O)&&(uc(F.list,O.listAttributes),uc(F.item,O.itemAttributes)),am(F.item,O.content)})},Cu=(w,O)=>{$o(w.list)!==O.listType&&(w.list=ro(w.list,O.listType)),uc(w.list,O.listAttributes)},$s=(w,O,F)=>{const K=jt.fromTag("li",w);return uc(K,O),am(K,F),K},Gi=(w,O)=>{ba(w.list,O),w.item=O},im=(w,O,F)=>{const K=O.slice(0,F.depth);return cs(K).each(ne=>{if(sr(F)){const Ze=$s(w,F.itemAttributes,F.content);Gi(ne,Ze),Cu(ne,F)}else if(us(F))am(ne.item,F.content);else{const Ze=jt.fromHtml(`<!--${F.content}-->`);ba(ne.list,Ze)}}),K},bf=(w,O,F)=>{const K=Ac(w,F,F.depth-O.length);return hg(K),al(K,F),qo(O,K),O.concat(K)},r0=(w,O)=>{let F=Ve.none();const K=Oe(O,(ne,Ze,Rt)=>Qh(Ze)?Rt===0?(F=Ve.some(Ze),ne):im(w,ne,Ze):Ze.depth>ne.length?bf(w,ne,Ze):im(w,ne,Ze),[]);return F.each(ne=>{const Ze=jt.fromHtml(`<!--${ne.content}-->`);Rn(K).each(}),Rn(K).map(ne=>ne.list)},tp=(w,O)=>{switch(w){case"Indent":O.depth++;break;case"Outdent":O.depth--;break;case"Flatten":O.depth=0}O.dirty=!0},qi=(w,O)=>{sr(w)&&sr(O)&&(w.listType=O.listType,w.listAttributes={...O.listAttributes})},vf=w=>{w.listAttributes=Js(w.listAttributes,(O,F)=>F!=="start")},Wc=(w,O)=>{const F=w[O].depth,K=ne=return k(Ot(w.slice(0,O)),K,ne).orThunk(()=>k(w.slice(O+1),K,ne))},yf=w=>(te(w,(O,F)=>{Wc(w,F).fold(()=>{O.dirty&&sr(O)&&vf(O)},K=>qi(O,K))}),w),np=Su=(w,O,F,K)=>{var ne;if(Bs(K))return[{depth:w+1,content:(ne=K.dom.nodeValue)!==null&&ne!==void 0?ne:"",dirty:!1,isSelected:!1,isComment:!0}];O.each(un=>{Ct(un.start,K)&&F.set(!0)});const Ze=ep(K,w,F.get());O.each(un=>{Ct(un.end,K)&&F.set(!1)});const Rt=pa(K).filter(kr).map(.getOr([]);return Ze.toArray().concat(Rt)},op=(w,O,F,K)=>ta(K).filter(kr).fold(ne=>{const Ze=Oe(Uc(K),(Rt,un,ln)=>{if(ln===0)return Rt;if(yu(un))return Rt.concat(Su(w,O,F,un));{const qt={isFragment:!0,depth:w,content:[un],isSelected:!1,dirty:!1,parentListType:$o(ne)};return Rt.concat(qt)}},[]);return il(w,O,F,ne).concat(Ze)}),il=(w,O,F,K)=>pn(Uc(K),ne=>{const Ze=kr(ne)?il:op,Rt=w+1;return Ze(Rt,O,F,ne)}),c0=(w,O)=>{const F=np(!1),K=0;return _e(w,ne=>({sourceList:ne,entries:il(K,O,F,ne)}))},wu=(w,O)=>{const F=yf(O);return _e(F,K=>{const ne=Qh(K)?Fe([jt.fromHtml(`<!--${K.content}-->`)]):Fe(K.content);return jt.fromDom(H(w,ne.dom))})},a0=(w,O)=>{const F=yf(O);return r0(w.contentDocument,F).toArray()},i0=(w,O)=>pn(Xe(O,qr),F=>Rn(F).exists(qr)?a0(w,F):wu(w,F)),l0=(w,O)=>{te(go(w,Kr),F=>tp(O,F))},lm=w=>{const O=_e(Er(w),jt.fromDom);return We(mn(O,Ht(Bn)),mn(Ot(O),Ht(Bn)),},u0=(w,O,F)=>{const K=c0(O,lm(w));te(K,ne=>{l0(ne.entries,F);const Ze=i0(w,ne.entries);te(Ze,Rt=>{mt(w,F==="Indent"?"IndentList":"OutdentList",Rt.dom)}),Ia(ne.sourceList,Ze),Lr(ne.sourceList)})},Y=(w,O)=>{const F=Eo(ts(w)),K=Eo(pf(w));let ne=!1;if(F.length||K.length){const Ze=w.selection.getBookmark();u0(w,F,O),Do(w,O,K),w.selection.moveToBookmark(Ze),w.selection.setRng(Ko(w.selection.getRng())),w.nodeChanged(),ne=!0}return ne},xu=(w,O)=>!V(w)&&Y(w,O),Wa=w=>xu(w,"Indent"),um=w=>xu(w,"Outdent"),sp=Mv="\uFEFF",Qn=w=>w===Mv,Oc=ll=var Pl=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Eu=Sr.DOM,Ki=w=>{const O={},F=K=>{let ne=w[K?"startContainer":"endContainer"],Ze=w[K?"startOffset":"endOffset"];if(Oo(ne)){const Rt=Eu.create("span",{"data-mce-type":"bookmark"});ne.hasChildNodes()?(Ze=Math.min(Ze,ne.childNodes.length-1),K?ne.insertBefore(Rt,ne.childNodes[Ze]):Eu.insertAfter(Rt,ne.childNodes[Ze])):ne.appendChild(Rt),ne=Rt,Ze=0}O[K?"startContainer":"endContainer"]=ne,O[K?"startOffset":"endOffset"]=Ze};return F(!0),w.collapsed||F(),O},Yr=w=>{const O=K=>{const ne=un=>{var ln;let qt=(ln=un.parentNode)===null||ln===void 0?void 0:ln.firstChild,ms=0;for(;qt;){if(qt===un)return ms;(!Oo(qt)||qt.getAttribute("data-mce-type")!=="bookmark")&&ms++,qt=qt.nextSibling}return-1};let Ze=w[K?"startContainer":"endContainer"],Rt=w[K?"startOffset":"endOffset"];if(!!Ze){if(Oo(Ze)&&Ze.parentNode){const un=Ze;Rt=ne(Ze),Ze=Ze.parentNode,Eu.remove(un),!Ze.hasChildNodes()&&Eu.isBlock(Ze)&&Ze.appendChild(Eu.create("br"))}w[K?"startContainer":"endContainer"]=Ze,w[K?"startOffset":"endOffset"]=Rt}};O(!0),O();const F=Eu.createRng();return F.setStart(w.startContainer,w.startOffset),w.endContainer&&F.setEnd(w.endContainer,w.endOffset),Ko(F)},ul=rp=(w,O,F)=>{const K=F["list-style-type"]?F["list-style-type"]:null;w.setStyle(O,"list-style-type",K)},cp=(w,O)=>{sa.each(O,},gi=(w,O,F)=>{cp(O,F["list-attributes"]),sa.each(w.select("li",O),},dl=ap=(w,O,F)=>{sa.each(F,},Dc=(w,O)=>Hn(O)&&!za(O,w.schema.getBlockElements()),rr=(w,O,F,K)=>{let ne=O[F?"startContainer":"endContainer"];const Ze=O[F?"startOffset":"endOffset"];Oo(ne)&&(ne=ne.childNodes[Math.min(Ze,ne.childNodes.length-1)]||ne),!F&&va(ne.nextSibling)&&(ne=ne.nextSibling);const Rt=ln=>{for(;!w.dom.isBlock(ln)&&ln.parentNode&&K!==ln;)ln=ln.parentNode;return ln},un=(ln,qt)=>{var ms;const Ir=new oa(ln,Rt(ln)),Za=qt?"next":"prev";let $l;for(;$l=Ir[Za]();)if(!(ra(w,$l)||Qn($l.textContent)||((ms=$l.textContent)===null||ms===void 0?void 0:ms.length)===0))return Ve.some($l);return Ve.none()};if(F&&_s(ne))if(Qn(ne.textContent))ne=un(ne,!1).getOr(ne);else for(ne.parentNode!==null&&Dc(w,ne.parentNode)&&(ne=ne.parentNode);ne.previousSibling!==null&&(Dc(w,ne.previousSibling)||_s(ne.previousSibling));)ne=ne.previousSibling;if(!F&&_s(ne))if(Qn(ne.textContent))ne=un(ne,!0).getOr(ne);else for(ne.parentNode!==null&&Dc(w,ne.parentNode)&&(ne=ne.parentNode);ne.nextSibling!==null&&(Dc(w,ne.nextSibling)||_s(ne.nextSibling));)ne=ne.nextSibling;for(;ne.parentNode!==K;){const ln=ne.parentNode;if(xr(w,ne)||/^(TD|TH)$/.test(ln.nodeName))return ne;ne=ln}return ne},Tu=(w,O,F)=>{const K=[],ne=w.dom,Ze=rr(w,O,!0,F),Rt=rr(w,O,!1,F);let un;const ln=[];for(let qt=Ze;qt&&(ln.push(qt),qt!==Rt);qt=qt.nextSibling);return sa.each(ln,qt=>{var ms;if(xr(w,qt)){K.push(qt),un=null;return}if(ne.isBlock(qt)||va(qt)){va(qt)&&ne.remove(qt),un=null;return}const Ir=qt.nextSibling;if(Pl.isBookmarkNode(qt)&&(jr(Ir)||xr(w,Ir)||!Ir&&qt.parentNode===F)){un=null;return}un||(un=ne.create("p"),(ms=qt.parentNode)===null||ms===void 0||ms.insertBefore(un,qt),K.push(un)),un.appendChild(qt)}),K},dm=(w,O,F)=>{const K=w.getStyle(O,"list-style-type");let ne=F?F["list-style-type"]:"";return ne=ne===null?"":ne,K===ne},hi=(w,O)=>{const F=w.selection.getStart(!0),K=rr(w,O,!0,w.getBody());return ll(jt.fromDom(K),jt.fromDom(O.commonAncestorContainer))?O.commonAncestorContainer:F},Rc=(w,O,F)=>{const K=w.selection.getRng();let ne="LI";const Ze=Wi(w,hi(w,K)),Rt=w.dom;if(Rt.getContentEditable(w.selection.getNode())==="false")return;O=O.toUpperCase(),O==="DL"&&(ne="DT");const un=Ki(K),ln=go(Tu(w,K,Ze),w.dom.isEditable);sa.each(ln,qt=>{let ms;const Ir=qt.previousSibling,Za=qt.parentNode;wr(Za)||(Ir&&jr(Ir)&&Ir.nodeName===O&&dm(Rt,Ir,F)?(ms=Ir,qt=Rt.rename(qt,ne),Ir.appendChild(qt)):(ms=Rt.create(O),Za.insertBefore(ms,qt),ms.appendChild(qt),qt=Rt.rename(qt,ne)),ap(Rt,qt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),dl(Rt,ms,F),mm(w.dom,ms))}),w.selection.setRng(Yr(un))},ip=(w,O)=>jr(w)&&w.nodeName===(O==null?void 0:O.nodeName),d0=(w,O,F)=>{const K=w.getStyle(O,"list-style-type",!0),ne=w.getStyle(F,"list-style-type",!0);return K===ne},Cf=pg=(w,O,F)=>ip(O,F)&&d0(w,O,F)&&Cf(O,F),mm=(w,O)=>{let F,K=O.nextSibling;if(pg(w,O,K)){const ne=K;for(;F=ne.firstChild;)O.appendChild(F);w.remove(ne)}if(K=O.previousSibling,pg(w,O,K)){const ne=K;for(;F=ne.lastChild;)O.insertBefore(F,O.firstChild);w.remove(ne)}},ml=(w,O,F,K)=>{if(O.nodeName!==F){const ne=w.dom.rename(O,F);dl(w.dom,ne,K),mt(w,ul(F),ne)}else dl(w.dom,O,K),mt(w,ul(F),O)},m0=(w,O,F,K)=>{if(O.classList.forEach((ne,Ze,Rt)=>{ne.startsWith("tox-")&&(Rt.remove(ne),Rt.length===0&&O.removeAttribute("class"))}),O.nodeName!==F){const ne=w.dom.rename(O,F);dl(w.dom,ne,K),mt(w,ul(F),ne)}else dl(w.dom,O,K),mt(w,ul(F),O)},dS=(w,O,F,K,ne)=>{const Ze=jr(O);if(Ze&&O.nodeName===K&&!Bv(ne)&&!As(O))sp(w);else{Rc(w,K,ne);const Rt=Ki(w.selection.getRng()),un=Ze?[O,...F]:F,ln=Ze&&As(O)?m0:ml;sa.each(un,,w.selection.setRng(Yr(Rt))}},Bv=Pv=(w,O,F,K)=>{if(O!==w.getBody())if(O)if(O.nodeName===F&&!Bv(K)&&!As(O))sp(w);else{const ne=Ki(w.selection.getRng());As(O)&&O.classList.forEach((Rt,un,ln)=>{Rt.startsWith("tox-")&&(ln.remove(Rt),ln.length===0&&O.removeAttribute("class"))}),dl(w.dom,O,K);const Ze=w.dom.rename(O,F);mm(w.dom,Ze),w.selection.setRng(Yr(ne)),Rc(w,F,K),mt(w,ul(F),Ze)}else Rc(w,F,K),mt(w,ul(F),O)},vd=(w,O,F)=>{const K=kc(w);if(X(w,K))return;const ne=bu(w),Ze=io(F)?F:{};ne.length>0?dS(w,K,ne,O,Ze):Pv(w,K,O,Ze)},lp=Sr.DOM,fm=(w,O)=>{const F=O.parentElement;if(F&&F.nodeName==="LI"&&F.firstChild===O){const K=F.previousSibling;K&&K.nodeName==="LI"?(K.appendChild(O),ca(w,F)&&lp.remove(F)):lp.setStyle(F,"listStyleType","none")}if(jr(F)){const K=F.previousSibling;K&&K.nodeName==="LI"&&K.appendChild(O)}},ds=(w,O)=>{const F=sa.grep(w.select("ol,ul",O));sa.each(F,K=>{fm(w,K)})},ys=(w,O,F,K)=>{let ne=O.startContainer;const Ze=O.startOffset;if(_s(ne)&&(F?Ze<ne.data.length:Ze>0))return ne;const Rt=w.schema.getNonEmptyElements();Oo(ne)&&(ne=Ha.getNode(ne,Ze));const un=new oa(ne,K);F&&Rl(w.dom,ne)&&un.next();const ln=F?un.next.bind(un):un.prev2.bind(un);for(;ne=ln();)if(ne.nodeName==="LI"&&!ne.hasChildNodes()||Rt[ne.nodeName]||_s(ne)&&ne.data.length>0)return ne;return null},Ca=(w,O)=>{const F=O.childNodes;return F.length===1&&!jr(F[0])&&w.isBlock(F[0])},up=w=>Ve.from(w).map(jt.fromDom).filter(zc).exists(O=>lc(O)&&!Jn(["details"],$o(O))),$v=(w,O)=>{Ca(w,O)&&up(O.firstChild)&&w.remove(O.firstChild,!0)},Xr=(w,O,F)=>{let K;const ne=Ca(w,F)?F.firstChild:F;if($v(w,O),!ca(w,O,!0))for(;K=O.firstChild;)ne.appendChild(K)},ku=(w,O,F)=>{let K;const ne=O.parentNode;if(!hd(w,O)||!hd(w,F))return;jr(F.lastChild)&&(K=F.lastChild),ne===F.lastChild&&va(ne.previousSibling)&&w.remove(ne.previousSibling);const Ze=F.lastChild;Ze&&va(Ze)&&O.hasChildNodes()&&w.remove(Ze),ca(w,F,!0)&&de(jt.fromDom(F)),Xr(w,O,F),K&&F.appendChild(K);const un=Ms(jt.fromDom(F),jt.fromDom(O))?w.getParents(O,jr,F):[];w.remove(O),te(un,ln=>{ca(w,ln)&&ln!==w.getRoot()&&w.remove(ln)})},Sa=(w,O,F)=>{de(jt.fromDom(F)),ku(w.dom,O,F),w.selection.setCursorLocation(F,0)},fl=(w,O,F,K)=>{const ne=w.dom;if(ne.isEmpty(K))Sa(w,F,K);else{const Ze=Ki(O);ku(ne,F,K),w.selection.setRng(Yr(Ze))}},f0=(w,O,F,K)=>{const ne=Ki(O);ku(w.dom,F,K);const Ze=Yr(ne);w.selection.setRng(Ze)},bn=(w,O)=>{const F=w.dom,K=w.selection,ne=K.getStart(),Ze=es(w,ne),Rt=F.getParent(K.getStart(),"LI",Ze);if(Rt){const un=Rt.parentElement;if(un===w.getBody()&&ca(F,un))return!0;const ln=Ko(K.getRng()),qt=F.getParent(ys(w,ln,O,Ze),"LI",Ze),ms=qt&&(O?F.isChildOf(Rt,qt):F.isChildOf(qt,Rt));if(qt&&qt!==Rt&&!ms)return w.undoManager.transact(()=>{O?fl(w,ln,qt,Rt):ya(Rt)?um(w):f0(w,ln,Rt,qt)}),!0;if(ms&&!O&&qt!==Rt)return w.undoManager.transact(()=>{if(ln.commonAncestorContainer.parentElement){const Ir=Ki(ln),Za=ln.commonAncestorContainer.parentElement;Xr(F,ln.commonAncestorContainer.parentElement,qt),Za.remove();const $l=Yr(Ir);w.selection.setRng($l)}}),!0;if(!qt&&!O&&ln.startOffset===0&&ln.endOffset===0)return w.undoManager.transact(()=>{sp(w)}),!0}return!1},aa=(w,O,F)=>{const K=w.getParent(O.parentNode,w.isBlock,F);w.remove(O),K&&w.isEmpty(K)&&w.remove(K)},_u=(w,O)=>{const F=w.dom,K=w.selection.getStart(),ne=es(w,K),Ze=F.getParent(K,F.isBlock,ne);if(Ze&&F.isEmpty(Ze)){const Rt=Ko(w.selection.getRng()),un=F.getParent(ys(w,Rt,O,ne),"LI",ne);if(un){const ln=Za=>Jn(["td","th","caption"],$o(Za)),qt=ms=as(jt.fromDom(un),ln,qt),Ir=as(jt.fromDom(Rt.startContainer),ln,qt);return ye(ms,Ir,Ct)?(w.undoManager.transact(()=>{const Za=un.parentNode;aa(F,Ze,ne),mm(F,Za),w.selection.select(un,!0),w.selection.collapse(O)}),!0):!1}}return!1},gm=dp=w=>{const O=w.selection.getStart(),F=es(w,O);return w.dom.getParent(O,"LI,DT,DD",F)||Er(w).length>0},g0=w=>dp(w)?(w.undoManager.transact(()=>{w.execCommand("Delete"),ds(w.dom,w.getBody())}),!0):!1,Nc=(w,O)=>{const F=w.selection;return!X(w,F.getNode())&&(F.isCollapsed()?gm(w,O):g0(w))},cr=w=>{w.on("ExecCommand",O=>{const F=O.command.toLowerCase();(F==="delete"||F==="forwarddelete")&&dp(w)&&ds(w.dom,w.getBody())}),w.on("keydown",O=>{O.keyCode===Dl.BACKSPACE?Nc(w,!1)&&O.preventDefault():O.keyCode===Dl.DELETE&&Nc(w,!0)&&O.preventDefault()})},wa=w=>({backspaceDelete:),ar=(w,O)=>{const F=kc(w);F===null||X(w,F)||w.undoManager.transact(()=>{io(O.styles)&&w.dom.setStyles(F,O.styles),io(O.attrs)&&hu(O.attrs,})},bg=w=>{const O=Ot(jo(w).split("")),F=_e(O,(K,ne)=>{const Ze=K.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,ne)*Ze});return Oe(F,0)},hm=w=>{if(w--,w<0)return"";{const O=w%26,F=Math.floor(w/26),K=hm(F),ne=String.fromCharCode("A".charCodeAt(0)+O);return K+ne}},Vs=w=>/^[A-Z]+$/.test(w),mr=w=>/^[a-z]+$/.test(w),Yi=Sf=w=>Yi(w)?2:Vs(w)?0:mr(w)?1:On(w)?3:4,Qs=w=>{switch(Sf(w)){case 2:return Ve.some({listStyleType:Ve.none(),start:w});case 0:return Ve.some({listStyleType:Ve.some("upper-alpha"),start:bg(w).toString()});case 1:return Ve.some({listStyleType:Ve.some("lower-alpha"),start:bg(w).toString()});case 3:return Ve.some({listStyleType:Ve.none(),start:""});case 4:return Ve.none()}},mp=w=>{const O=parseInt(w.start,10);return It(w.listStyleType,"upper-alpha")?hm(O):It(w.listStyleType,"lower-alpha")?hm(O).toLowerCase():w.start},h0=w=>{const O=kc(w);!co(O)||X(w,O)||w.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:mp({start:w.dom.getAttrib(O,"start","1"),listStyleType:Ve.from(w.dom.getStyle(O,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:F=>{const K=F.getData();Qs(K.start).each(ne=>{w.execCommand("mceListUpdate",!1,{attrs:{start:ne.start==="1"?"":ne.start},styles:{"list-style-type":ne.listStyleType.getOr("")}})}),F.close()}})},yo=(w,O)=>()=>{const F=kc(w);return Hn(F)&&F.nodeName===O},yd=uo=w=>{w.on("BeforeExecCommand",O=>{const F=O.command.toLowerCase();F==="indent"?Wa(w):F==="outdent"&&um(w)}),w.addCommand("InsertUnorderedList",(O,F)=>{vd(w,"UL",F)}),w.addCommand("InsertOrderedList",(O,F)=>{vd(w,"OL",F)}),w.addCommand("InsertDefinitionList",,w.addCommand("RemoveList",,yd(w),w.addCommand("mceListUpdate",(O,F)=>{io(F)&&ar(w,F)}),w.addQueryStateHandler("InsertUnorderedList",yo(w,"UL")),w.addQueryStateHandler("InsertOrderedList",yo(w,"OL")),w.addQueryStateHandler("InsertDefinitionList",yo(w,"DL"))};var Xi=tinymce.util.Tools.resolve("tinymce.html.Node");const vg=w=>w.type===3,wf=Dn=w=>{const O=(ne,Ze)=>{const Rt=Xi.create("li");te(ne,,Ze?w.insert(Rt,Ze,!0):w.append(Rt)},F=(ne,Ze)=>vg(Ze)?[...ne,Ze]:!wf(ne)&&!vg(Ze)?(O(ne,Ze),[]):ne,K=Oe(w.children(),F,[]);wf(K)||O(K)},pm=w=>{w.on("PreInit",()=>{const{parser:O}=w;O.addNodeFilter("ul,ol",})},p0=w=>{w.on("keydown",O=>{O.keyCode!==Dl.TAB||Dl.metaKeyPressed(O)||w.undoManager.transact(()=>{(O.shiftKey?um(w):Wa(w))&&O.preventDefault()})})},fp=Fv=(w,O)=>F=>{const K=ne=>{F.setActive(dr(ne.parents,O)),F.setEnabled(!X(w,ne.element)&&w.selection.isEditable())};return F.setEnabled(w.selection.isEditable()),pe(w,K)},Lv=w=>{const O=w.hasPlugin("advlist")||(w.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:O("InsertOrderedList"),onSetup:Fv(w,"OL")}),w.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:O("InsertUnorderedList"),onSetup:Fv(w,"UL")}))},b0=(w,O)=>F=>pe(w,ne=>F.setEnabled(dr(ne.parents,O)&&!X(w,ne.element))),yg=w=>{const O={text:"List properties...",icon:"ordered-list",onAction:onSetup:b0(w,"OL")};w.ui.registry.addMenuItem("listprops",O),w.ui.registry.addContextMenu("lists",{update:F=>{const K=kc(w,F);return co(K)?["listprops"]:[]}})};var gp=()=>{ha.add("lists",w=>(fi(w),pm(w),w.hasPlugin("rtc",!0)?yd(w):(fp(w),uo(w)),Lv(w),yg(w),wa(w)))};gp()})();(function(){var ha=tinymce.util.Tools.resolve("tinymce.PluginManager");const ac=((null),ps=Re=>Re,yr=(Re,st)=>{const De=Re.length,le=new Array(De);for(let jt=0;jt<De;jt++){const jn=Re[jt];le[jt]=st(jn,jt)}return le},io={aletter:"[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F3\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1A00-\u1A16\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BC0-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u24B6-\u24E9\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790\uA791\uA7A0-\uA7A9\uA7FA-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]",midnumlet:"[-'\\.\u2018\u2019\u2024\uFE52\uFF07\uFF0E]",midletter:"[:\xB7\xB7\u05F4\u2027\uFE13\uFE55\uFF1A]",midnum:"[\xB1+*/,;;\u0589\u060C\u060D\u066C\u07F8\u2044\uFE10\uFE14\uFE50\uFE54\uFF0C\uFF1B]",numeric:"[0-9\u0660-\u0669\u066B\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9]",cr:"\\r",lf:"\\n",newline:"[\v\f\x85\u2028\u2029]",extend:"[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D02\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B6-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAA\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2\u1DC0-\u1DE6\u1DFC-\u1DFF\u200C\u200D\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA67C\uA67D\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE26\uFF9E\uFF9F]",format:"[\xAD\u0600-\u0603\u06DD\u070F\u17B4\u17B5\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\uFEFF\uFFF9-\uFFFB]",katakana:"[\u3031-\u3035\u309B\u309C\u30A0-\u30FA\u30FC-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF9D]",extendnumlet:"[=_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F\u2200-\u22FF<>]",punctuation:"[~\u2116|!-*+-\\/:;?@\\[-`{}\xA1\xAB\xB7\xBB\xBF;\xB7\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1361-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u3008\u3009\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30\u2E31\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]"},nt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},bs=[new RegExp(io.aletter),new RegExp(io.midnumlet),new RegExp(io.midletter),new RegExp(io.midnum),new RegExp(io.numeric),new RegExp(io.cr),new RegExp(io.lf),new RegExp(io.newline),new RegExp(io.extend),new RegExp(io.format),new RegExp(io.katakana),new RegExp(io.extendnumlet),new RegExp("@")],ea="",Hn=new RegExp("^"+io.punctuation+"$"),Is=/^\s+$/,Ds=bs,rs=nt.OTHER,Es=Re=>{let st=rs;const De=Ds.length;for(let le=0;le<De;++le){const jt=Ds[le];if(jt&&jt.test(Re)){st=le;break}}return st},to=Re=>{const st={};return De=>{if(st[De])return st[De];{const le=Re(De);return st[De]=le,le}}},Tt=Re=>{const st=to(Es);return yr(Re,st)},Rs=(Re,st)=>{const De=Re[st],le=Re[st+1];if(st<0||st>Re.length-1&&st!==0||De===nt.ALETTER&&le===nt.ALETTER)return!1;const jt=Re[st+2];if(De===nt.ALETTER&&(le===nt.MIDLETTER||le===nt.MIDNUMLET||le===nt.AT)&&jt===nt.ALETTER)return!1;const jn=Re[st-1];return(De===nt.MIDLETTER||De===nt.MIDNUMLET||le===nt.AT)&&le===nt.ALETTER&&jn===nt.ALETTER||(De===nt.NUMERIC||De===nt.ALETTER)&&(le===nt.NUMERIC||le===nt.ALETTER)||(De===nt.MIDNUM||De===nt.MIDNUMLET)&&le===nt.NUMERIC&&jn===nt.NUMERIC||De===nt.NUMERIC&&(le===nt.MIDNUM||le===nt.MIDNUMLET)&&jt===nt.NUMERIC||(De===nt.EXTEND||De===nt.FORMAT)&&(le===nt.ALETTER||le===nt.NUMERIC||le===nt.KATAKANA||le===nt.EXTEND||le===nt.FORMAT)||(le===nt.EXTEND||le===nt.FORMAT&&(jt===nt.ALETTER||jt===nt.NUMERIC||jt===nt.KATAKANA||jt===nt.EXTEND||jt===nt.FORMAT))&&(De===nt.ALETTER||De===nt.NUMERIC||De===nt.KATAKANA||De===nt.EXTEND||De===nt.FORMAT)||De===nt.CR&&le===nt.LF?!1:De===nt.NEWLINE||De===nt.CR||De===nt.LF||le===nt.NEWLINE||le===nt.CR||le===nt.LF?!0:!(De===nt.KATAKANA&&le===nt.KATAKANA||le===nt.EXTENDNUMLET&&(De===nt.ALETTER||De===nt.NUMERIC||De===nt.KATAKANA||De===nt.EXTENDNUMLET)||De===nt.EXTENDNUMLET&&(le===nt.ALETTER||le===nt.NUMERIC||le===nt.KATAKANA)||De===nt.AT)},Ht=ea,j=Is,Ve=Hn,Xo=hn=(Re,st)=>{let De;for(De=st;De<Re.length&&!j.test(Re[De]);De++);return De},re=(Re,st)=>{const De=hn(Re,st+1);return Re.slice(st+1,De).join(Ht).substr(0,3)==="://"?De:st},bt=(Re,st,De,le)=>{const jt=[],jn=[];let Ct=[];for(let Ms=0;Ms<De.length;++Ms)if(Ct.push(Re[Ms]),Rs(De,Ms)){const Cn=st[Ms];if((le.includeWhitespace||!j.test(Cn))&&(le.includePunctuation||!Ve.test(Cn))){const Cr=Ms-Ct.length+1,ao=Ms+1,ks=st.slice(Cr,ao).join(Ht);if(Xo(ks)){const Ii=re(st,Ms),Wr=Re.slice(ao,Ii);Array.prototype.push.apply(Ct,Wr),Ms=Ii}jt.push(Ct),jn.push({start:Cr,end:ao})}Ct=[]}return{words:jt,indices:jn}},Jn=Xt=(Re,st,De)=>{De={...Jn(),...De};const le=yr(Re,st),jt=Tt(le);return bt(Re,le,jt,De)},te=go=Re=>Re.replace(/\uFEFF/g,"");var Xe=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Oe=(Re,st)=>{const De=st.getBlockElements(),le=st.getVoidElements(),jt=Cr=>De[Cr.nodeName]||le[Cr.nodeName],jn=[];let Ct="";const Ms=new Xe(Re,Re);let Cn;for(;Cn=Ms.next();)Cn.nodeType===3?Ct+=go(Cn.data):jt(Cn)&&Ct.length&&(jn.push(Ct),Ct="");return Ct.length&&jn.push(Ct),jn},k=Re=>Re.replace(/\u200B/g,""),mn=Re=>Re.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ze=(Re,st)=>{const De=k(Oe(Re,st).join(`
`));return te(De.split(""),ps).length},pn=(Re,st)=>{const De=Oe(Re,st).join("");return mn(De)},Ot=(Re,st)=>{const De=Oe(Re,st).join("").replace(/\s/g,"");return mn(De)},Ne=(Re,st)=>()=>st(Re.getBody(),Re.schema),Rn=(Re,st)=>()=>st(Re.selection.getRng().cloneContents(),Re.schema),cs=Re=>Ne(Re,ze),it=Re=>({body:{getWordCount:cs(Re),getCharacterCount:Ne(Re,pn),getCharacterCountWithoutSpaces:Ne(Re,Ot)},selection:{getWordCount:Rn(Re,ze),getCharacterCount:Rn(Re,pn),getCharacterCountWithoutSpaces:Rn(Re,Ot)},getCount:cs(Re)}),It=(Re,st)=>{Re.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(st.body.getWordCount()),String(st.selection.getWordCount())],["Characters (no spaces)",String(st.body.getCharacterCountWithoutSpaces()),String(st.selection.getCharacterCountWithoutSpaces())],["Characters",String(st.body.getCharacterCount()),String(st.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},ye=(Re,st)=>{Re.addCommand("mceWordCount",()=>It(Re,st))},We=var $=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ts=(Re,st)=>{Re.dispatch("wordCountUpdate",{wordCount:{words:st.body.getWordCount(),characters:st.body.getCharacterCount(),charactersWithoutSpaces:st.body.getCharacterCountWithoutSpaces()}})},Kn=(Re,st)=>{Ts(Re,st)},lo=(Re,st,De)=>{const le=We(()=>Kn(Re,st),De);Re.on("init",()=>{Kn(Re,st),$.setEditorTimeout(Re,0),Re.on("remove",le.cancel)})},no=Re=>{const st=()=>Re.execCommand("mceWordCount");Re.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:st}),Re.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:st})};var Ns=(Re=300)=>{ha.add("wordcount",st=>{const De=it(st);return ye(st,De),no(st),lo(st,De,Re),De})};Ns()})();export{ZG as t};
