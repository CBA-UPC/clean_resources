(window.webpackJsonp=window.webpackJsonp||[]).push([[227],{1355:function(t,e,n){"use strict";n.r(e);var a=n(5),o=n(1183),i=n.n(o),l=Object(a.defineComponent)({__name:"lottie-player",props:{animationData:null,tag:{default:"div"},autoplay:{type:Boolean},loop:{type:Boolean}},emits:["animation-complete","animation-stop"],setup(t,e){let{expose:n,emit:o}=e;const l=t,p=Object(a.ref)(null),s=Object(a.ref)(null);let r=null;Object(a.onMounted)((async()=>{s.value=await l.animationData(),r=i.a.loadAnimation({container:p.value,loop:l.loop,autoplay:l.autoplay,animationData:s.value}),r.addEventListener("complete",(()=>{o("animation-complete")})),r.addEventListener("stop",(()=>{o("animation-stop")}))})),Object(a.onBeforeUnmount)((()=>{r&&(r.removeEventListener("complete"),r.removeEventListener("stop"),r.destroy())}));const u=()=>r&&r.play(),c=()=>{r&&(r.stop(),o("animation-stop"))};return n({play:u,stop:c}),{__sfc:!0,props:l,emit:o,container:p,animationData:s,animationInstance:r,play:u,stop:c}}}),p=n(45),s=Object(p.a)(l,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e(t.tag,{ref:"container",tag:"Component"})}),[],!1,null,null,null);e.default=s.exports}}]);gleLike}},[t("BaseIcon",{attrs:{name:"thumb-up"}}),t("span",{staticClass:"size--all-s space--ml-2 hide--toW2"},[e._v(e._s(e.toggle.label))])],1)}),[],!1,null,null,null).exports,c=i(0),u=i.n(c),g=i(50),h=i(515),f={components:{BaseButton:s.a,BaseSpinner:h.a},props:{info:{type:Object,default:()=>({})}},data:()=>({loading:!1,formActive:!1}),computed:{communityUpdatable(){return this.info.editable},enabled(){return this.communityUpdatable},buttonClasses(){return{"button--selected":this.formActive,"":!1}}},methods:{legacyToggle(e){this.formActive?document.querySelector("#threadInfoForm").dispatchEvent(new CustomEvent("replace-revert",{bubbles:!0})):(this.toggleLoading(),g.a.handler(u()(this.$el),{endpoint:"/thread-info/edit/".concat(this.info.additionalInfoId),method:"get",replaces:[{target:".thread-info",endEvent:"wysiwyg-update",reversible:!0}]},e).done((()=>{this.toggleLoading(),this.toggleActive(),u()(".thread .thread-infos").on("toggle",this.toggleComplete),u()("#threadInfoForm").on("replace-revert toggle",this.toggleInactive)})))},toggleActive(){this.formActive=!0},toggleInactive(){this.formActive=!1},toggleComplete(){this.toggleInactive()},toggleLoading(){this.loading=!this.loading},toggleForm(e){this.legacyToggle(e)}}},m=Object(d.a)(f,(function(){var e=this,t=e._self._c;return e.enabled?t("BaseButton",{directives:[{name:"track",rawName:"v-track:edit.click",arg:"edit",modifiers:{click:!0}}],class:e.buttonClasses,attrs:{variant:"text",mode:"secondary",seal:e.loading},on:{click:e.toggleForm}},[e.loading?t("BaseSpinner"):e._e(),t("BaseIcon",{attrs:{name:"pencil"}}),t("span",{staticClass:"size--all-s space--ml-2 hide--toW2"},[e._v(e._s("Editar"))])],1):e._e()}),[],!1,null,null,null).exports,p=i(93),b=i(23),k={components:{BaseSpinner:h.a,BaseButton:s.a},props:{info:{type:Object,default:()=>({})}},data:()=>({loading:!1}),computed:Object.assign({},Object(p.e)("auth",{authUserId:(e,t)=>{var i;return null===(i=t.me)||void 0===i?void 0:i.userId}}),{isAuthor(){return this.info.userId===this.authUserId},enabled(){return this.info.deletable},isDeleted(){return this.info.isDeleted},label(){let e=this.isDeleted?"Undelete":"Delete";return this.isDeleted&&this.info.deletedBy&&(e="".concat(e," ").concat("Borrado por"," ").concat(this.info.deletedBy.username)),e},buttonClasses(){const e=(this.isDeleted,"");return{[e]:!!e}}}),methods:{toggleDelete(){this.$emit("update",Object.assign({},this.info,{isDeleted:!this.isDeleted}))},toggleLoading(){this.loading=!this.loading},legacyToggle(e){this.isDeleted||this.isAuthor?g.a.handler(u()(this.$el),{endpoint:"/thread-info/".concat(this.isDeleted?"undelete":"delete","/").concat(this.info.additionalInfoId),replaces:[{target:".thread-info",endEvent:"init"}]},e).done((()=>{this.toggleLoading(),this.toggleDelete()})):b.a.handler(u()(document.documentElement),Object.assign({},b.a.defaults,{endpoint:"/thread-info/delete-modal/".concat(this.info.additionalInfoId)}))}}},v={components:{AdditionalInfoLike:r,AdditionalInfoEdit:m,AdditionalInfoDelete:Object(d.a)(k,(function(){var e=this,t=e._self._c;return e.enabled?t("BaseButton",{directives:[{name:"track",rawName:"v-track:delete.click",arg:"delete",modifiers:{click:!0}}],class:e.buttonClasses,attrs:{variant:"text",mode:"secondary",seal:e.loading},on:{click:e.legacyToggle}},[e.loading?t("BaseSpinner"):e._e(),t("BaseIcon",{attrs:{name:"trash"}}),t("span",{staticClass:"size--all-s space--ml-2 hide--toW2"},[e._v(e._s(e.label))])],1):e._e()}),[],!1,null,null,null).exports},mixins:[i(942).a]},I=Object(d.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"lbox--v-3 text--b"},[e.ready?[t("AdditionalInfoLike",{staticClass:"space--mr-3",attrs:{info:e.info},on:{update:function(t){return e.$emit("update",t)}}}),t("AdditionalInfoEdit",{staticClass:"space--mr-3",attrs:{info:e.info},on:{update:function(t){return e.$emit("update",t)}}}),t("AdditionalInfoDelete",{attrs:{info:e.info},on:{update:function(t){return e.$emit("update",t)}}})]:e._e()],2)}),[],!1,null,null,null);t.default=I.exports},942:function(e,t,i){"use strict";const a=i(104).b.create("batchGQL");t.a={props:{info:{type:Object,default:()=>({})}},computed:{ready(){return!a.isLoading()&&void 0!==this.info.liked}}}}}]);aryLimitReached:t,secondaryLimitReached:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.source=this.sourceKey(e),e.source===c.b&&t||e.source===c.c&&i)return;e.isSelected=!0;const s=Object(r.e)(e,this.selectedValue);s&&(this.selectedValue=s,this.updateUnselectedGroups(e.threadGroupId))},updateSelection(e){const t=Object(r.h)(this.selectedValue,this.options,e);t&&(this.selectedValue=t,this.updateUnselectedGroups(e.id))},clearTags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.a;const t=this.selectedValue.filter((t=>this.sourceKey(t)===e)).map((e=>e.threadGroupId)),i=this.selectedValue.filter((t=>this.sourceKey(t)!==e));this.selectedValue=i,this.updateUnselectedGroups(t)},updateUnselectedGroups(e){Array.isArray(e)||(e=[e]),setTimeout((()=>{e.forEach((e=>{this.selectedValue.some((t=>{let{threadGroupId:i}=t;return i===e}))?this.unselectedGroups=this.unselectedGroups.filter((t=>t!==e)):this.unselectedGroups.push(e)})),this.$emit("update-unselected-groups",this.unselectedGroups)}),0)}}},g=y,p=Object(n.a)(g,(function(){var e=this;return(0,e._self._c)("TagCloud",e._b({attrs:{i18n:e.i18n,collection:e.options,"primary-limit":e.limit,"secondary-limit":e.limit,"selected-key":e.selectedGroup,"highlighted-key":e.highlightedGroup,"source-key":e.sourceKey,"search-enabled":e.isSearch,"value-key":"threadGroupId","text-key":"threadGroupName"},on:{update:e.updateSelection,clear:e.clearTags},scopedSlots:e._u([{key:"search",fn:function({primaryLimitReached:t,secondaryLimitReached:i,otherTags:s,toggleSelection:a}){return[e._t("search",null,{otherTags:s,toggleSelection:a,updateSearchSelection:s=>e.updateSearchSelection(s,{primaryLimitReached:t,secondaryLimitReached:i}),clearTags:e.clearTags})]}},{key:"primary-messages",fn:function(){return[e._t("primary-messages")]},proxy:!0},{key:"secondary-messages",fn:function(){return[e._t("secondary-messages")]},proxy:!0},{key:"other-messages",fn:function(){return[e._t("other-messages")]},proxy:!0}],null,!0)},"TagCloud",e.$attrs,!1))}),[],!1,null,null,null);t.default=p.exports}}]);