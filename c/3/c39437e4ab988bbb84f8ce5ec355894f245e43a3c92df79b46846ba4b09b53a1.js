!function(){var t={5591:5293:8107:3396:7818:6032:8723:9700:69:3175:322:1793:2914:9568:3447:6552:2560:6954:566:6673:5346:6266:8078:1789:7280:2633:8871:6021:8117:4591:3493:7651:3714:1978:5694:5880:8314:335:9253:8147:1106:3689:761:9548:1148:5653:3135:506:8386:4347:7729:2709:9464:664:5392:6410:370:7578:4758:5568:9507:9206:2595:1418:0:3927:7881:3103:4307:9617:2960:,6250,1653,4523,6369,464,80,2451,3872,5910,6508,3511,1940,7302,3267,1295,8433,9144,1281,148,1067,7664:function(t,e,r){"use strict";var n,i,o,a,s,u,l,c,p,d,f,h,_,g,v,y,b,m,S,A,x,E;for(r(148),y=r(8118),g=["prod","dev","debug","test"],b=null,m=0,S=(x=document.querySelectorAll("script")).length;m<S;m++)if((E=(A=x[m]).src)&&(-1!==E.indexOf("buzzlibrary.js")||-1!==E.indexOf("buzzretarget.js"))){b=/^(http(s?):)?\/\/localtube/.test(A.src)?"debug":/^(http(s?):)?\/\/devtube/.test(A.src)?"dev":"prod";break}_=b,i=(a=["onError","onNoad","onDestroy"]).concat(["onReady","onFetch"]),o=(u=["hash","avito"]).concat(["default"]),s=["placementHash","placementId","sizes"],l=["isVpaidJsPlacement","videoSlot","videoSlotCanAutoPlay"],c=["auctionId","crs","placement"],n=["uuid","disallowFpc"],v=["codeSettings","placementId","unitSettings","unitSettingsList","unitType"],d=(h=(f=["audioroll","vast","vast2","vast3","vast4","vpaid","vpaidjs"]).concat(["video_url"])).concat(["youtube_id"]),y("CONSTANTS",p={ENVIRONMENTS:g,DEFAULT_ENV:_,AD_SETTINGS_NAME:"buzzoolaAdSettings",AD_UNIT_COLLECTION_NAME:"buzzoolaAdUnits",ECOMM_STORAGE_NAME:"buzzoolaRetarget",AD_UNIT_REQUEST_FAIL_CALLBACKS:a,AD_UNIT_CALLBACKS:i,AD_UNIT_SINGLEPLAYER_LOADERS:u,AD_UNIT_LOADERS:o,AD_UNIT_REQUEST_FIELDS:s,AD_UNIT_VPAID_JS_PROPERTIES:l,AD_WATERFALL_ROOT_FIELDS:c,AD_RESPONSE_ROOT_FIELDS:n,PLACEMENT_FIELDS:v,CREATIVE_VAST_VIDEO_TYPES:f,CREATIVE_VIDEO_TYPES:h,CREATIVE_FULL_VIDEO_TYPES:d,REGEXP_CAMEL_CASE_STRING:/^[A-Za-z][a-z\d]*?([A-Z][a-z\d]*?)+?$/,REGEXP_SNAKE_CASE_STRING:/^([a-z\d]+_)+[a-z\d]+$/,SCROLL_EVENTS:["wheel","touchmove"],SPACE:{WHOLE:["top","right","bottom","left"],VERTICAL:["top","bottom"],HORIZONTAL:["right","left"]},AXES:{MAIN:{NAME:"x",DELTA:"deltaX",VALUE:"clientX",SIZE:"clientWidth",OFFSET:"offsetLeft",UNITS:"cols"},SUB:{NAME:"y",DELTA:"deltaY",VALUE:"clientY",SIZE:"clientHeight",OFFSET:"offsetTop",UNITS:"rows"}},DISPLAY_FORMAT_TYPES:["inread_banner","inread_banner_desktop","inread_banner_mobile","mobile_native_unit","carousel_mobile","ecomm_carousel","maxiscroller","scroller","benefit_unit","scratcher","stories","banner","banner_desktop","banner_mobile","bls_banner","cube_banner","prebanner_desktop","prebanner_mobile","smart_tv","custom_widget","unknown"],VIDEO_FORMAT_TYPES:["video_seeding","video_seeding_desktop","video_seeding_mobile","preroll","preroll_desktop","preroll_mobile","inread","inread_desktop","inread_mobile","inread_plus","inread_max","shoppable_ads","vertical_video"],MODULE_LEVELS:{MODULE:0,SUBMODULE:1,NODE:2,CORE:3},FLYROLL_MODES:{NONE:"none",UNSEEN:"unseen",ALWAYS:"always"},PREROLL_MODES:{NONE:0,CLICK:1,AUTO:2}}),t.exports=p},8118:function(t,e,r){"use strict";var n,i;i=r(9484),n=function(t,e){var r,n,o;r=(n=t.split(".")).splice(-1),o=!0;try{i(n.join("."))[r]=e}catch(t){t,o=!1}return o},t.exports=n},1441:function(t,e,r){"use strict";var n,i,o;o=r(9484),n=r(8118),(i=function(t,e){var r;r=!0;try{o("Utils")[t]=e}catch(t){r=!1}return r})("getNamespace",o),i("addModule",n),t.exports=i},6993:function(t,e,r){"use strict";var n,i,o;i=r(1441),n={},i("capitalize",o=function(t){return n.hasOwnProperty(t)||(n[t]=t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase()),n[t]}),t.exports=o},3768:function(t,e,r){"use strict";var n,i,o,a,s,u,l=[].slice;n=r(1441),a=r(7904),s=r(6209),u=r(8398),o=r(7240),i=function(){var t,e,r,n,c,p,d,f,h;for(f=arguments[0],(t=2<=arguments.length?l.call(arguments,1):[]).length>1&&(null==(e=t[t.length-1])||a(e)?t.splice(t.length-1,1):e=null),r=0,c=t.length;r<c;r++)for(n in d=t[r])h=d[n],null==e||null==(p=e(f[n],h,n,f,d))?Array.isArray(h)&&Array.isArray(f[n])?f[n]=u(f[n],h):s(h)&&!o(h)?s(f[n])?f[n]=i(f[n],h):f[n]=i({},h):f[n]=h:f[n]=p;return f},n("extend",i),t.exports=i},9484:function(t,e,r){"use strict";var n,i;r(148),n={},i=function(t,e){var r,i,o,a,s;if(null==e&&(e="."),0!==t.indexOf("Buzzoola")&&(t=0===t.length?"Buzzoola":"Buzzoola."+t),n.hasOwnProperty(t))return n[t];for(o=t.split(e),a=window,r=0,i=o.length;r<i;r++)null==a[s=o[r]]&&(a[s]={}),a=a[s];return n[t]=a,a},t.exports=i},7240:function(t,e,r){"use strict";var n,i,o,a;o=r(1441),n=[],i=[],o("isCircularObject",a=function(t){var e,r;if(r=!1,-1!==(e=n.indexOf(t)))r=i[e];else{try{JSON.stringify(t)}catch(t){r=!0}n.push(t),i.push(r)}return r}),t.exports=a},7904:function(t,e,r){"use strict";var n;r(1441)("isFunction",n),t.exports=n},6356:function(t,e,r){"use strict";var n;r(1441)("isNumber",n),t.exports=n},6209:function(t,e,r){"use strict";var n;r(1441)("isObject",n),t.exports=n},3713:function(t,e,r){"use strict";var n;r(1441)("isString",n),t.exports=n},5161,1909:function(t,e,r){"use strict";r(148);var n,i,o,a,s,u,l,c,p,d={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};a=r(6993),o=r(1441),c=r(3713),l=r(6209),u=r(6356),s=r(7240),i=r(7664).REGEXP_SNAKE_CASE_STRING,n={},o("toCamelCase",p=function(t,e){var r,o,h,_,g,v,y,b;if(null==e&&(e=[]),b=t,c(t))if(n.hasOwnProperty(t))b=n[t];else try{y=JSON.parse(t),b=u(y)?t:p(y,e)}catch(e){i.test(t)&&(b=(r=t.split("_"))[0],r.length>1&&(b+=r.slice(1).map(a).join("")),n[t]=b)}else if(Array.isArray(t))for(b=[],h=0,v=t.length;h<v;h++)_=t[h],c(_)?b.push(_):b.push(p(_,e));else if(l(t)&&!s(t))for(g in b={},t)d.call(t,g)&&(o=t[g],f.call(e,g)>=0?b[g]=o:b[p(g,e)]=c(o)?o:p(o,e));return b}),t.exports=p},8918:function(t,e,r){"use strict";r(148),r(1067);var n,i,o,a,s,u,l,c,p={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};o=r(1441),l=r(3713),u=r(6209),s=r(6356),a=r(7240),n=r(7664).REGEXP_CAMEL_CASE_STRING,i={},o("toSnakeCase",c=function(t,e){var r,o,f,h,_,g,v;if(null==e&&(e=[]),v=t,l(t))if(i.hasOwnProperty(t))v=i[t];else try{g=JSON.parse(t),v=s(g)?t:c(g,e)}catch(e){n.test(t)&&(0===(v=t.replace(/([A-Z])/gm,"_$1").toLowerCase()).indexOf("_")&&(v=v.slice(1)),i[t]=v)}else if(Array.isArray(t))for(v=[],o=0,_=t.length;o<_;o++)f=t[o],l(f)?v.push(f):v.push(c(f,e));else if(u(t)&&!a(t))for(h in v={},t)p.call(t,h)&&(r=t[h],d.call(e,h)>=0?v[h]=r:v[c(h,e)]=l(r)?r:c(r,e));return v}),t.exports=c},8398:function(t,e,r){"use strict";var n,i=[].slice;n=function(){var t,e,r,n,o;for(o=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],o||(o=[]),e=0,r=t.length;e<r;e++)n=t[e],Array.isArray(o)&&Array.isArray(n)&&o.push.apply(o,n.filter()));return o},r(1441)("unite",n),t.exports=n}},e={}r.g(),r.nc=void 0,function(){"use strict";r(1281);var t,e,n,i,o,a,s=[].slice,u=[].indexOf|;if(i=r(5161),void 0!==(t=i(document)))try{r.nc=t}catch(t){}r(7664).NONCE_VALUE=t,n=r(3713),e=r(3768),o=r(1909),a=r(8918),function(r,l){var c,p,d,f,h,_,g,v,y,b,m;return v=new Date,m=v.getHours()+"-"+v.getMinutes()+"-"+v.getSeconds(),p={AdLoaded:!1,AdStarted:!0,AdReady:!1,AdStopped:!0,AdSkipped:!1,AdSkippableStateChange:!1,AdSizeChange:!0,AdLinearChange:!1,AdDurationChange:!1,AdExpandedChange:!1,AdRemainingTimeChange:!1,AdVolumeChange:!1,AdImpression:!1,AdVideoStart:!1,AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1,AdVideoComplete:!0,AdClickThru:!1,AdInteraction:!1,AdUserAcceptInvitation:!1,AdUserMinimize:!1,AdUserClose:!1,AdPaused:!0,AdPlaying:!0,AdLog:!1,AdError:!1},d=["AdLoaded","AdError","AdStopped"],g=["AdStarted"].concat(h=["AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile"]),c={prod:"tube.buzzoola.com",dev:"devtube.buzzoola.com",debug:"localtube.buzzoola.com:8000",test:r.location.host},f={prod:"https://",dev:"https://",debug:"http://",test:"//"},_=["duration","currentTime"],72e5,y=function(t){var e,r,n;return null==t&&(t=[]),null==(e=function(){var e,i;if(null!=t.crs)return t;for(n=(n=Array.isArray(t)?t:null!=t?[t]:[]).filter()),e=0,i=n.length;e<i;e++)r=n[e],mergeTracking(r);return{crs:n,trackingUrls:{},trackingJs:{}}}()).placement&&(e.placement={}),e},b=function(){var t;return(t)()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},null==r.BuzzVPAIDJsProxy&&(r.BuzzVPAIDJsProxy=function(){function v(){this._id="BUZZPROXY-"+b()+"-"+Date.now(),this._eventCallbacks={},this._pendingCallbacks=[],this._expectedCallbacks={},this._attributes={env:"prod",companions:"",desiredBitrate:256,duration:[],currentTime:[],remainingTime:0,expanded:!1,height:0,icons:"",linear:!0,skippableState:!1,viewMode:"normal",width:0,volume:50},this._handlers=[]}return v.prototype._id=null,v.prototype._destroyed=!1,v.prototype._eventCallbacks=null,v.prototype._pendingCallbacks=null,v.prototype._expectedCallbacks=null,v.prototype._attributes=null,v.prototype._slot=null,v.prototype._videoSlot=null,v.prototype._autoPlay=null,v.prototype._container=null,v.prototype._creatives=null,v.prototype._lsName=null,v.prototype._lsSupported=!1,v.prototype._lsSaved=null,v.prototype._lsSession=null,v.prototype._unitType=null,v.prototype._player=null,v.prototype._state="init",v.prototype._errorMessage="",v.prototype._handlers=null,v.prototype._subscribedOnce=!1,v.prototype._savedVolume=null,v.prototype._timerInterval=null,v.prototype._debug=!1,v.prototype.ready=!1,v.prototype._getSlot=function(){var t;return null!=this._slot||(this._slot=t=l.createElement("div"),l.body||(l.body=l.createElement("body")),l.body.appendChild(t)),this._slot},v.prototype._renderSlot=function(){var t,e;e=this._getSlot(),this._container=t=l.createElement("div"),this._attributes.adParameters.hash&&t.setAttribute("data-hash",this._attributes.adParameters.hash),this._debug&&t.setAttribute("data-debug",!0),"prod"!==this._attributes.env&&t.setAttribute("data-debug_env",this._attributes.env),e.appendChild(t)},v.prototype._addPlayerListener=function(t,e){var r;null!=(r=this._player)&&r.on(t,e,!1),this._handlers.push({event:t,callback:e})},v.prototype._removePlayerListeners=function(){var t,e,r,n,i,o,a;for(r=0,n=(i=this._handlers).length;r<n;r++)e=(o=i[r]).event,t=o.callback,null!=(a=this._player)&&a.off(e,t);this._handlers=[]},v.prototype._initWidget=function(){var t,n,i,o,a,s,u,l;this._destroyed||(this._renderSlot(),n={adInitTS:this._attributes.adInitTS,originalUnitType:this._unitType,isVpaidJsPlacement:!0,playerData:null!=(o=this._creatives)?o:{},session:this._lsSession,requestData:{source:"vpaid_wrapper"},thirdPartyRequestParams:null!=(a=this._attributes.adParameters.request_params)?a:{}},null!=this._videoSlot&&(n.videoSlot=this._videoSlot),null!=this._autoPlay&&(n.videoSlotAutoPlay=this._autoPlay),u={width:""+this._attributes.width,containerHeight:""+this._attributes.height,overroll:"onclick",expandable:"never",creativesAmount:1,prerollsAmount:1},null!=(i=e({},null!=(s=n.playerData.placement)?s:{})).unitSettings?e(i.unitSettings,u):(null==(t=n.playerData).crs&&(t.crs=[]),i.unitSettings=u),i.unitSettingsList=["width","overroll","container_height","debug_mode"],i.unitType="preroll",n.playerData.placement=i,this._player=new r.Buzzoola.Core(this._container,n),this._player.on("widget:initialized",(l=this,function(){null==l._savedVolume||isNaN(l._savedVolume)||l._player.callStrategy("widget:set_volume",l._savedVolume)}),!1),this._player.on("tube:reload",function(t){return}(this),!1),this._player.on("error",function(t){return}(this),!1),this._player.on("api:change_creative",function(t){return function(e,r){t._removeCreative(r,!0),t._removeCreative(e,!0),t._updateLocalStorage()}}(this),!1),this._player.on("api:event_sent",function(t){return}(this),!1),this._player.on("terminated",function(t){return}(this),!1),this._player.on("destroyed",function(t){return function(){t._destroyed=!0,setTimeout((function(){"error"!==t._state?("skipped"===t._state?(t._attributes.skippableState=!0,t._trigger("AdSkipped")):t._trigger("AdVideoComplete"),t._expectedCallbacks.AdStopped=!0,t._trigger("AdStopped")):t._triggerError()}),1e3)}}(this),!1),this._player.on("api:formed",function(t){return function(){var n,i,o,a;a=r.BUZZOOLA.callStrategy("tracker:get","global"),t._lsSaved=e(t._player.callStrategy("api:get_data","merged",{copy:!0}),{trackingUrls:a.img,trackingJs:a.js}),t._removeCreative(null!=(n=null!=(i=t._lsSaved.crs[0])&&null!=(o=i.extra)?o.impId:void 0)?n:null)}}(this),!1),this._player.on("api:empty",function(t){return function(){t._lsSaved.crs=[],t._updateLocalStorage()}}(this),!1),this._player.adsLoaded?this._initPlayerEvents():this._player.on("core:ads_loaded",function(t){return function(){"error"===t._state&&(t._state="reload"),t._initPlayerEvents()}}(this),!1))},v.prototype._initPlayerEvents=function(){var t,e,n,i,o,s,u,l;null!=this._player&&(this._removeCreative(null!=(n=null!=(i=this._player)&&null!=(o=i.creative)&&null!=(s=o.extra)?s.impId:void 0)?n:null),t="display"!==this._player.creative.adType,e=t&&this._player.creative.content.widgets.filter()).length>0,_.forEach((l=this)),e?g.forEach(function(t){return function(e){var r;r=a(e),t._addPlayerListener("vpaidjs:"+r,(function(){t._trigger(e),"AdVideoStart"===e&&t._trigger("AdReady")}))}}(this)):this._addPlayerListener("event:quartile",function(t){return function(e){var r;(r=h[e])&&t._trigger(r)}}(this)),t||this._emulateVideoPlayback(),"ready"===(null!=(u=this._player.state)?u.state:void 0)&&this._onReady(),this._subscribedOnce||(r.BUZZOOLA.on("tracked"(this)),this._player.on("preroll:shown",function(t){return function(){e||(t._trigger("AdStarted"),t._trigger("AdReady"))}}(this),!1),this._player.on("event:state",function(t){return function(e){switch(e){case"duration":t._updateDuration(),t._updateRemainingTime(t._player.callStrategy("widget:get_current_time"));break;case"ready":t._onReady();break;case"play":t._trigger("AdPlaying");break;case"pause":t._trigger("AdPaused");break;case"finish":t._state="ended"}}}(this),!1),this._player.on("event:time"(this),!1),this._player.on("widget:volume_changed",function(t){return function(e){t._attributes.volume=e>1?e/100:e,t._trigger("AdVolumeChange",t._attributes.volume)}}(this),!1),this._player.on("clickthrough:action"(this),!1),this._player.on("close_button:click"(this),!1),this._player.addStrategy("widget:get_total_time",999,function(t){return function(){return"video"===t._player.creative.adType?t._player.callStrategyByMaxWeight("widget:get_total_time",998):t._player.callStrategy("preroll:get_inactivity_timeout_value")}}(this),!1),this._subscribedOnce=!0))},v.prototype._emulateVideoPlayback=function(){var t;return this._addPlayerListener("engagement:seen_first_time",(t=this)),this._addPlayerListener("preroll:shown",function(t){return function(){var e,r,n,i;t._player.trigger("event:state","duration"),t._player.trigger("event:state","start"),t._player.trigger("event:state","play"),i=Date.now(),n=-1,r=-1,e=t._getFromStorage("duration"),t._timerInterval=setInterval((function(){var o,a,s;o=(a=Math.min((Date.now()-i)/1e3,e))!==e?(s=Math.round(a/e*100),{quartile:Math.floor(s/25),slice:Math.round(s/10)}):{quartile:4,slice:10},a>=e-.5&&(clearInterval(t._timerInterval),t._player.trigger("event:state","finish")),o.slice!==n&&t._player.trigger("event:tick",n=o.slice),o.quartile!==r&&t._player.trigger("event:quartile",r=o.quartile),t._player.trigger("event:time",a)}),100)}}(this))},v.prototype._triggerError=function(t){null==t&&(t=this._errorMessage),this._trigger("AdError",null!=t?t:"Unknown error"),this._errorMessage=""},v.prototype._onReady=function(){var t,e,r,n,i;for(this.ready=!0,this._removeCreative(null!=(t=null!=(e=this._player)&&null!=(r=e.creative)&&null!=(n=r.extra)?n.impId:void 0)?t:null),this._trigger("AdLoaded");null!=(i=this._pendingCallbacks.shift());)this._trigger.apply(this,[i.event].concat(s.call(i.arg)))},v.prototype._trigger=function(){var t,e,r;e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],this.ready||u.call(d,e)>=0?p[e]&&!this._expectedCallbacks[e]||(delete this._expectedCallbacks[e],"AdRemainingTimeChange"!==e&&"AdDurationChange"!==e&&this._log.apply(this,["trigger",e].concat(s.call(t))),(null!=(r=this._eventCallbacks[e])?r:[]).forEach((function(e){var r,n;r=e.callback,n=e.context,"function"==typeof r&&(null!=n?r.apply(n,t):r.apply(null,t))})),"AdVideoThirdQuartile"===e&&(this._expectedCallbacks.AdVideoComplete=!0)):this._pendingCallbacks.push({event:e,arg:t})},v.prototype._updateDuration=function(){var t,e;t=this._getFromStorage("duration"),null!=this._player&&(e=this._player.callStrategy("widget:get_total_time"))>0&&e!==t&&(this._updateStorage("duration",e),this._trigger("AdDurationChange",this._reduceStorage("duration")))},v.prototype._updateRemainingTime=function(t){var e,r,n,i;r=this._reduceStorage("duration"),e=this._getFromStorage("currentTime"),t>=0&&t!==e&&this._updateStorage("currentTime",t),(i=(n=this._reduceStorage("currentTime"))<=0&&r>0?r:Math.floor(r-n))>=0&&i!==this._attributes.remainingTime&&this._trigger("AdRemainingTimeChange",this._attributes.remainingTime=i)},v.prototype._updateStorage=function(t,e,r){var n;(n=this._attributes[t])&&!isNaN(e)&&((!r||r<0)&&(r=n.length-1),n[r=Math.min(r,n.length-1)]=e)},v.prototype._addToStorage=function(t,e){var r;isNaN(e)||null!=(r=this._attributes[t])&&r.push(e)},v.prototype._getFromStorage=function(t,e){var r;return(r=this._attributes[t])?(e||(e=r.length-1),e<0||e>r.length-1||isNaN(e)?0:r[e]):0},v.prototype._reduceStorage=function(t){var e;return(null!=(e=this._attributes[t])?e:[]).reduce(),0)},v.prototype._initLocalStorage=function(){var t,e;if(this._lsSupported=function(){try{return e=r.localStorage.getItem(this._lsName),!0}catch(t){return t,!1}}.call(this),(null!=e?e.length:void 0)>0&&((t=function(){try{return JSON.parse(e)}catch(t){return t,{}}}()).vpaidJSSessionID!==this._lsSession||t.vpaidJSModified<=Date.now()-72e5)){try{r.localStorage.removeItem(this._lsName)}catch(t){t}t={}}return this._lsSaved=y(null!=t?t:{}),this._lsSupported},v.prototype._updateLocalStorage=function(){if(!this._lsSupported)return!1;this._lsSaved.vpaidJSSessionID=this._lsSession,this._lsSaved.vpaidJSModified=Date.now();try{r.localStorage.setItem(this._lsName,JSON.stringify(this._lsSaved))}catch(t){return t,!1}return!0},v.prototype._removeCreative=function(t,e){var r;null==e&&(e=!1),null!=t&&this._lsSupported&&(r=this._lsSaved.crs.length,this._lsSaved.crs=this._lsSaved.crs.filter((function(e){var r;return(null!=(r=e.extra)?r.impId:void 0)!==t})),r!==this._lsSaved.crs.length&&(e||this._updateLocalStorage()))},v.prototype._removeTracking=function(t){var e,r,n,i,o,a;e=t.collection,r=t.event,a=t.url,this._lsSupported&&(o=function(){var t,r;switch(e){case"img":return null!=(t=this._lsSaved.trackingUrls)?t:{};case"script":return null!=(r=this._lsSaved.trackingJs)?r:{};default:return null}}.call(this),o&&(null==o[r]&&(o[r]=[]),n=o[r].length,o[r]=(null!=(i=o[r])?i:[]).filter()),n!==o[r].length&&this._updateLocalStorage()))},v.prototype._log=function(){var t;if(t=1<=arguments.length?s.call(arguments,0):[],this._debug||"debug"===this._attributes.env)try{console.debug.apply(console,["buzzproxy-"+m].concat(s.call(t)))}catch(t){t}},v.prototype.handshakeVersion,v.prototype.initAd=function(e,a,s,u,p,d){var h,_,g,v,b,m,S,A,x,E,O,w,T,C,I,k,P,L;if(null==p&&(p={}),null==d&&(d={}),A=null!=(E=(h=function(){try{return o(JSON.parse(p.AdParameters),["request_params"])}catch(t){return{}}}()).placement)?E:{},this._unitType=null!=(O=A.unitType)?O:"undefined",h.env&&(this._attributes.env=h.env),this._debug=null!=(w=null!=(T=A.unitSettings)?T.debugMode:void 0)&&w,this._log("initAd("+e+", "+a+", "+s+", "+u+", ...)"),v=!!h.hash,m=!!(this._lsSession=h.sessionId),_=y(v?{}:h),m?(this._lsName="_vpaid_"+A.placementId,this._initLocalStorage(),!!this._lsSupported&&((b=this._lsSaved.crs.length>0)&&(_=this._lsSaved,v=!1),!this._lsSaved.vpaidJSSessionID||b)):v||_.crs.length>0)if(this._attributes.adInitTS=Date.now(),this._attributes.adParameters=h,this._attributes.width=e,this._attributes.height=a,this._attributes.viewMode=s,this._attributes.desiredBitrate=u,this._slot=d.slot,this._videoSlot=d.videoSlot,this._autoPlay=d.videoSlotCanAutoPlay,_.crs.length>0&&(this._creatives=_),null!=this._slot&&(null!=this._slot.ownerDocument&&(l=this._slot.ownerDocument),r=l.defaultView||l.parentWindow||r),g=c[null!=(C=this._attributes.env)?C:"prod"],x=f[null!=(I=this._attributes.env)?I:"prod"],null!=(null!=(k=r.Buzzoola)?k.Core:void 0))this._initWidget();else{if(r.buzzoolaAdSettings={debugMode:this._debug||"debug"===this._attributes.env},P=l.createElement("script"),(S=l!==document?i(l):t)&&n(S))try{P.setAttribute("nonce",t),P.nonce=S}catch(t){t}P.onload=(L=this),P.onerror(this),P.src=""+x+g+"/build/buzzlibrary.js",P.async=!0,l.body.appendChild(P)}else this._triggerError("Nobanner")},v.prototype.startAd=function(){this._log("startAd() <before check>"),null!=this._player&&(this._log("startAd()"),this._expectedCallbacks.AdStarted=!0,this._player.callStrategy("preroll:show"),this._container.style.height=this._slot.style.height=this._attributes.height+"px")},v.prototype.stopAd=function(){var t;this._log("stopAd() <before check>"),this._destroyed=!0,this._expectedCallbacks.AdStopped=!0,null!=this._player?(this._log("stopAd()"),null!=(t=this._player)&&t.destroy(!0),this._player=null):this._trigger("AdStopped")},v.prototype.resizeAd=function(t,e,r){var n;this._log("resizeAd("+t+", "+e+", "+r+") <before check>"),this._attributes.viewMode=r,null!=this._player&&(n=this._player.creative,this._expectedCallbacks.AdSizeChange=!0,this._attributes.width!==t||this._attributes.height!==e?(this._player.callStrategy("placement:set_sizes",{width:t,height:e}),this._container.style.height=this._slot.style.height=e+"px",null!=n?(this._log("resizeAd("+t+", "+e+", "+r+")"),this._player.callStrategy("resize:call"),this._trigger("AdSizeChange",t,e,r)):delete this._expectedCallbacks.AdSizeChange):this._trigger("AdSizeChange",t,e,r)),this._attributes.width=t,this._attributes.height=e},v.prototype.pauseAd=function(){this._log("pauseAd() <before check>"),this._destroyed||(this._log("pauseAd()"),null!=this._player&&(this._expectedCallbacks.AdPaused=!0,"pause"===this._player.state.state&&this._trigger("AdPaused"),this._player.callStrategy("widget:pause",{manual:!0})))},v.prototype.resumeAd=function(){this._log("resumeAd() <before check>"),this._destroyed||null!=this._player&&(this._expectedCallbacks.AdPlaying=!0,"play"===this._player.state.state?this._trigger("AdPlaying"):(this._log("resumeAd()"),this._player.callStrategy("widget:play",{manual:!0})))},v.prototype.setAdVolume=function(t){var e;this._log("setAdVolume("+t+") <before check>"),this._destroyed||(this._attributes.volume=t,e=100*t,null!=this._player?(this._log("setAdVolume("+t+")"),this._player.callStrategy("widget:set_volume",e)):this._savedVolume=e)},v.prototype.skipAd=function(){this._log("skipAd() <before check>"),this._destroyed||null==this._player||(this._destroyed=!0,this._log("skipAd()"),this._state="skipped",this._player.destroy(!0),this._player=null,this._attributes.skippableState=!0)},v.prototype.expandAd=function(){},v.prototype.collapseAd,v.prototype.subscribe=function(t,e,r){var n;null==(n=this._eventCallbacks)[e]&&(n[e]=[]),this._eventCallbacks[e].push({callback:t,context:r})},v.prototype.unsubscribe=function(t,e){null!=this._eventCallbacks[e]&&(this._eventCallbacks[e]=null==t?[]:this._eventCallbacks[e].filter()),0===this._eventCallbacks[e].length&&delete this._eventCallbacks[e])},v.prototype.getAdWidth=function(){return this._attributes.width},v.prototype.getAdHeight=function(){return this._attributes.height},v.prototype.getAdExpanded=function(){return this._attributes.expanded},v.prototype.getAdSkippableState=function(){return this._attributes.skippableState},v.prototype.getAdRemainingTime=function(){return this._attributes.remainingTime},v.prototype.getAdDuration,v.prototype.getAdVolume=function(){return this._attributes.volume},v.prototype.getAdLinear=function(){return this._attributes.linear},v.prototype.getAdCompanions=function(){return this._attributes.companions},v.prototype.getAdIcons,v}()),r.getVPAIDAd}.call({},window,document)}()}();