(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[1744],{61744:(e,t,r)=>{"use strict";r.d(t,{Z:);var n,a,i,o=r(3e4),s=(r(91938),r(76955)),p=r(55382),d=r.n(p),c=r(29466),l=r.n(c),h=r(52361),m=r.n(h),u=r(93533),y=r.n(u),g=r(45525),k=r(59226),I=r.n(k),T=r(5154),b=r.n(T),v=r(98205),L=r.n(v),A=r(66680),f=r.n(A),C=r(75457),P=r(16884),E=r(30657),D=r(36509),j=r(41185),Z=r(52377),_=r(55752),S=r.n(_),N=r(5663),x=r.n(N),R=r(27356),w=r.n(R),B=r(32450),F=r.n(B),O=r(1324),G=r(97243),q=r(47530),M=r(77383),H=r(22221),W=r(34679),U=r(52791),V=r.n(U),z=r(47255),Q=r.n(z),K=r(15972),J=r(3599),Y=r(24448),X=r(82819),$=r(40393),ee=r(4645),te=r(39472),re=r(71500);r ie,oe,se,pe,de,ce,le,he=(0,g.w1)([V(),Q()])((i=a=class extends s.Component{static get defaultProps(){return{bloggerGenreCode:"",bloggerType:$.vh,shouldInjectAutoGeneratedAds:!1,sidebarCount:null,trackRaichoAdInviewRequest:b(),trackRaichoAdTapRequest:b(),locationSearch:null,injectedAdsData:null,injectedAdsLoadingStatus:null,injectedAdDfpParam:{},onFetchPickEventLabels:null,onInjectedAdDFPNotFound:b(),pickEventLabels:[],remoteConfig:{}}}constructor(e){super(e),this.state={adSlots:[],clipPortalTargets:[],html:(0,H.Z)(e.content),imageEmbedTargets:[],content:this.props.content,imageProtectionType:this.props.imageProtectionType}}tatic getDerivedStateFromProps(e,t){return t.content!==e.content||t.imageProtectionType!==e.imageProtectionType?{clipPortalTargets:[],html:(0,H.Z)(e.content),imageEmbedTargets:[],content:e.content,imageProtectionType:e.imageProtectionType,adSlots:[]}:null}shouldComponentUpdate(e,t){return!(this.props.amebaId===e.amebaId&&this.props.content===e.content&&this.props.openModal===e.openModal&&this.props.trackStartClip===e.trackStartClip&&this.props.trackTapLog===e.trackTapLog&&this.props.trackViewLog===e.trackViewLog&&this.props.shouldInjectAutoGeneratedAds===e.shouldInjectAutoGeneratedAds&&this.props.bloggerGenreCode===e.bloggerGenreCode&&this.props.bloggerType===e.bloggerType&&this.props.onInjectedAdDFPNotFound===e.onInjectedAdDFPNotFound&&this.props.trackRaichoAdInviewRequest===e.trackRaichoAdInviewRequest&&this.props.trackRaichoAdTapRequest===e.trackRaichoAdTapRequest&&this.state.html===t.html&&this.state.adSlots===t.adSlots&&this.state.sidebarCount===t.sidebarCount&&l()(this.state.clipPortalTargets,t.clipPortalTargets)&&l()(this.state.imageEmbedTargets,t.imageEmbedTargets)&&l()(this.props.entry,e.entry)&&l()(this.props.onClickLink,e.onClickLink)&&l()(this.props.injectedAdsLoadingStatus,e.injectedAdsLoadingStatus)&&l()(this.props.injectedAdsData,e.injectedAdsData)&&l()(this.props.injectedAdDfpParam,e.injectedAdDfpParam)&&l()(this.props.remoteConfig,e.remoteConfig)&&l()(this.props.pickEventLabels,e.pickEventLabels)&&l()(this.props.commerceEntryImageItemList,e.commerceEntryImageItemList))}componentDidUpdate(e,t){if(this.state.html!==t.html&&setImmediate((),this.state.html===t.html&&this.props.shouldInjectAutoGeneratedAds!==e.shouldInjectAutoGeneratedAds&&setImmediate((),l()(this.props.pickEventLabels,e.pickEventLabels)||(0,te.DH)(this.entryDetailText,this.props.pickEventLabels),!l()(this.props.commerceEntryImageItemList,e.commerceEntryImageItemList)){var{amebaId:r,entryId:n}=this.props,a={bloggerAmebaId:r,entryId:n,pageId:this.props.pageType,sectionId:re.ej};(0,M.A_)({amebaId:this.props.amebaId,itemList:this.props.commerceEntryImageItemList,trackTapLog:e=>{this.props.trackTapLog(ae(ae({},a),{},{contentId:e}))},trackInViewLog:e=>{this.props.trackViewLog(ae(ae({},a),{},{contentId:e}))}})}}andleMount(){var{amebaId:e,entryId:t,imageProtectionType:r,pageType:n}=this.props;setImmediate((()=>{this.entryDetailText&&((0,M.V0)(this.entryDetailText,{amebaId:e,entryId:t,imageProtectionType:r,pageType:n}),(0,M.C9)(this.entryDetailText),(0,W.IO)(this.entryDetailText,this.props.locationSearch),this.props.isOfficial&&"protected"!==this.props.imageReproduce&&this.setState({imageEmbedTargets:(0,M.Fr)(this.entryDetailText,V().ImageEmbedWrapper,V().ImageEmbedWrapper__EntryDesign)}),(0,D.WW)(this.entryDetailText),this.setState({clipPortalTargets:(0,q.O)(this.entryDetailText,e,"".concat(t),this.props.trackStartClip)}),this.updateLinkClick(),this.updatePickEventLabelsIfNeeded())}))}handleAdSlotInjectionnsertInArticleInjectedAdTags(){var{remoteConfig:e,sidebarCount:t}=this.props;if(!x()(e)){var{pickLayoutType:r,adHeight:n,adWidth:a,adVerticalMargin:i,fallbackShortestDistanceToBottom:o,fallbackShortestDistanceToTop:s,firstAdPosition:p,repeatHeight:d,repeatLimit:c,shortestDistanceToBottom:l,maxDepth:h,doubleColumn:m,outside:u,unsafeRange:y,contextSeparator:g}=e;(0,X.BF)(this.entryDetailText,{firstAdPosition:p,shortestDistanceToBottom:l,repeatHeight:d,repeatUpperLimit:c,maxDepth:h,fallbackShortestDistanceToTop:s,fallbackShortestDistanceToBottom:o,pickLayoutType:r,adHeight:n,adWidth:a,adVerticalMargin:i,showDoubleColumn:!F()(t)&&t<=1,doubleColumnAdConfig:m,outsideAdConfig:u,unsafeRangeConfig:y,contextSeparatorConfig:g,align:"same-as-user-image"})}}updateLinkClick(){this.unlistenLinkClick&&this.unlistenLinkClick();var e=this.entryDetailText.querySelectorAll("a")||[];Array.prototype.forEach.call(e,(e=>{e.addEventListener("click",this.props.onClickLink,!1)})),this.unlistenLinkClick=()=>{Array.prototype.forEach.call(e,(e=>{e.removeEventListener("click",this.props.onClickLink,!1)})),this.unlistenLinkClick=null}}updateInjectedAdsPortalTargets(){var{entryDetailText:e}=this;if(e){var t=Array.from(e.querySelectorAll(K.w6));0!==t.length&&this.setState({adSlots:t})}}updatePickEventLabelsIfNeeded(){var{entryDetailText:e}=this;e&&(0,te.iq)(e)&&this.props.onFetchPickEventLabels&&(this.props.pickEventLabels.length>0?(0,te.DH)(this.entryDetailText,this.props.pickEventLabels):this.props.onFetchPickEventLabels())}renderClipPortal(){var e=this.state.clipPortalTargets.map((e=>e.element?Z.createPortal(s.createElement(O.L,e.props),e.element):null));return e.length<1?null:e}renderImageEmbedButtonPortal(){var e=this.state.imageEmbedTargets.map((e=>Z.createPortal((0,o.Z)("button",{className:V().ImageEmbedButton,type:"button",onClick:()=>{this.props.openModal(this.props.entryId,G.rl,{imageHeight:parseInt(e.dataset.imageHeight,10),imageId:e.dataset.imageId,imageWidth:parseInt(e.dataset.imageWidth,10)})}},void 0,(0,o.Z)(w(),{className:V().ImageEmbedButtonIcon}),(0,o.Z)("span",{className:V().ImageEmbedButtonLabel},void 0,"\u3053\u306e\u753b\u50cf\u3092\u30b7\u30a7\u30a2")),e)));return e.length<1?null:e}renderInjectedAdsPortal(){var{bloggerType:e,amebaId:t,entry:r,entryId:n,pageType:a,injectedAdsLoadingStatus:i,isOfficial:s,injectedAdsData:p,injectedAdDfpParam:d,onInjectedAdDFPNotFound:c,trackTapLog:l,trackViewLog:h,trackRaichoAdInviewRequest:m,trackRaichoAdTapRequest:u}=this.props,y=this.state.adSlots.length>0;return e&&y?this.state.adSlots.map(((e,y)=>{var{injectionType:g,orderId:k,displayPosition:I,slotHeight:T,pickLayoutType:b}=(0,ee.Cg)(e,"".concat(y+1)),{data:v,status:L}=(0,ee.lW)({adData:p,adRequestStatus:i,entryId:n,orderId:k,pickLayoutType:b}),A={status:L,data:v,trackInview:m,trackTap:u};return(0,o.Z)(J.h,{container:e},y,(0,o.Z)(Y.Z,{adInjectionType:g||"manual",adcross:A,affiliatorId:S()(r,"affiliator_id"),amebaId:t,dfp:(0,ee.m5)(d,b),displayPosition:I||"",entryId:n,isOfficial:s,orderId:k,pageType:a,pickLayoutType:b,slotHeight:T,trackTapLog:l,trackViewLog:h,onDfpNotFound:c}))})):null}render(){return(0,o.Z)(s.Fragment,{},void 0,s.createElement("div",{className:d()("skin-entryBody",V().Block,{[V().ImageProtected]:"all_deny"===this.props.imageProtectionType}),dangerouslySetInnerHTML:{__html:this.state.html},"data-uranus-component":"entryBody",id:"entryBody",ref:),this.renderInjectedAdsPortal(),this.renderClipPortal(),this.renderImageEmbedButtonPortal())}},a.displayName="PcEntryDetailTextUranus",n=i))||n,me=r(48516),ue=r(10793),ye=r(39954),ge=r(14272),ke=r(91216),Ie=r(66109),Te=r.n(Ie),be=r(38160),ve=(0,g.w1)(Te())((se=oe=class extends s.Component{static get defaultProps(){return{adEntryBottom:null,adInArticlePanel:null,amebloOneTimeToken:"",bloggerGenreCode:"",bloggerType:"",shouldInjectAutoGeneratedAds:!1,entryDetailClip:null,entryDetailGenreRanking:null,hashtag:null,cheerFrame:null,mypickModule:null,reactions:null,reactionsLink:null,readerModule:null,remoteConfig:{},shareButton:null,sidebarCount:null,locationSearch:null,injectedAdDfpParam:{},injectedAdsData:null,injectedAdsLoadingStatus:null,isLoggedIn:!1,pickEventLabels:[],onFetchPickEventLabels:null,onInjectedAdDFPNotFound:b()}}houldComponentUpdate(e){return!(this.props.adEntryBottom===e.adEntryBottom&&this.props.adInArticlePanel===e.adInArticlePanel&&this.props.amebaId===e.amebaId&&this.props.amebloOneTimeToken===e.amebloOneTimeToken&&this.props.dateDisplayCode===e.dateDisplayCode&&this.props.entryDetailClip===e.entryDetailClip&&this.props.entryDetailGenreRanking===e.entryDetailGenreRanking&&this.props.entryIndex===e.entryIndex&&this.props.hashtag===e.hashtag&&this.props.imageProtectionType===e.imageProtectionType&&this.props.imageReproduce===e.imageReproduce&&this.props.isLoggedIn===e.isLoggedIn&&this.props.isOfficial===e.isOfficial&&this.props.openModal===e.openModal&&this.props.pageType===e.pageType&&this.props.reactions===e.reactions&&this.props.reactionsLink===e.reactionsLink&&this.props.readerModule===e.readerModule&&this.props.shareButton===e.shareButton&&this.props.skinCode===e.skinCode&&this.props.sidebarCount===e.sidebarCount&&this.props.trackRaichoAdInviewRequest===e.trackRaichoAdInviewRequest&&this.props.trackRaichoAdTapRequest===e.trackRaichoAdTapRequest&&this.props.trackTapLog===e.trackTapLog&&this.props.trackStartClip===e.trackStartClip&&this.props.onInjectedAdDFPNotFound===e.onInjectedAdDFPNotFound&&this.props.locationSearch===e.locationSearch&&this.props.shouldInjectAutoGeneratedAds===e.shouldInjectAutoGeneratedAds&&this.props.bloggerGenreCode===e.bloggerGenreCode&&this.props.bloggerType===e.bloggerType&&this.props.injectedAdsLoadingStatus===e.injectedAdsLoadingStatus&&l()(this.props.cheerFrame,e.cheerFrame)&&l()(this.props.entry,e.entry)&&l()(this.props.mypickModule,e.mypickModule)&&l()(this.props.trackViewLog,e.trackViewLog)&&l()(this.props.injectedAdDfpParam,e.injectedAdDfpParam)&&l()(this.props.injectedAdsData,e.injectedAdsData)&&l()(this.props.remoteConfig,e.remoteConfig)&&l()(this.props.commerceEntryImageItemList,e.commerceEntryImageItemList))}trackLinkTapLog(e){var{amebaId:t,entry:r,isOfficial:n,pageType:a}=this.props,i={bloggerAmebaId:t,contentId:e,entryId:r.entry_id,pageId:a,sectionId:"entry-hyperlink",serviceId:n?"official":"general"};this.props.trackTapLog(i)}handleClickEntryTextLink(e){var t="".concat(window.process.env.HTTP_PATH_BLOG_AMEBA,"/reader.do"),r=e.currentTarget.href;-1!==r.indexOf(t.replace("https://",""))||this.trackLinkTapLog(r)}renderEntryEmpty(){return pe||(pe=(0,o.Z)("div",{className:"error","data-uranus-component":"noEntryError"},void 0,"\u3053\u306e\u8a18\u4e8b\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u308b\u304b\u3001",(0,o.Z)("br",{}),"\u307e\u305f\u306f\u672a\u6765\u8a18\u4e8b\u8a2d\u5b9a\uff08\u73fe\u65e5\u6642\u4ee5\u964d\u306e\u516c\u958b\uff09\u3055\u308c\u305f\u8a18\u4e8b\u306e\u305f\u3081\u8868\u793a\u3067\u304d\u307e\u305b\u3093\u3002"))}renderIcon(){return"amember"===this.props.entry.publish_flg?(0,o.Z)(L(),{"aria-label":"\u30a2\u30e1\u30f3\u30d0\u30fc\u8a18\u4e8b",className:Te().EntryIcon}):this.props.entry.reblog_flg?(0,o.Z)(f(),{"aria-label":"\u30ea\u30d6\u30ed\u30b0\u8a18\u4e8b",className:Te().EntryIcon}):null}renderEntryTitle(){var e=this.props.isOfficial?"official":"general",t=this.props.pageType,r=(0,o.Z)(ue.f,{bloggerAmebaId:this.props.amebaId,entryId:this.props.entry.entry_id,orderId:"".concat(this.props.entryIndex+1),pageId:t,sectionId:"article",serviceId:e,tapLogger:this.props.trackTapLog},void 0,(0,o.Z)(me.Z,{className:"skinArticleTitle",rel:"bookmark",targetUrl:(0,D.IT)(this.props.amebaId,this.props.entry)},void 0,this.renderIcon(),this.props.entry.entry_title));return t===C.Z.Entry||t===C.Z.AmemberEntry?(0,o.Z)("h1",{className:"skin-entryTitle","data-uranus-component":"entryTitle"},void 0,r):(0,o.Z)("h2",{className:"skin-entryTitle","data-uranus-component":"entryTitle"},void 0,r)}renderEntryHead(e){var{entry:t}=this.props,r=t.entry_created_datetime||"",n=t.is_pickpr||!1;return(0,o.Z)("div",{className:"skin-entryHead","data-uranus-component":"entryHead"},"entryHead",this.renderEntryTitle(),(0,o.Z)("div",{className:d()(Te().TimeBlock,{[Te().NoJSTimeBlock]:!n}),"data-uranus-component":"entryDate"},void 0,(0,o.Z)("p",{className:d()(Te().Time,"skin-entryPubdate")},void 0,(0,o.Z)(ye.x,{},void 0,e&&(de||(de=(0,o.Z)("span",{className:"skin-textLoud","data-uranus-component":"entryNewLabel"},void 0,"NEW!"))),(0,o.Z)("time",{className:"skin-textQuiet",dateTime:(0,E.TA)(5,r)},void 0,(0,E.TA)(this.props.dateDisplayCode,r)))),n&&(0,o.Z)(ge.E,{wrapperStyle:{marginLeft:"12px"}})),(0,o.Z)("div",{},void 0,(0,o.Z)("dl",{className:d()(Te().Theme,"skin-entryThemes"),"data-uranus-component":"entryThemes"},void 0,(0,o.Z)(ye.x,{},void 0,ce||(ce=(0,o.Z)("dt",{className:"skin-textQuiet"},void 0,"\u30c6\u30fc\u30de\uff1a")),(0,o.Z)("dd",{},void 0,(0,o.Z)(me.Z,{rel:"tag",targetUrl:(0,P.Z)(C.Z.Theme,{amebaId:this.props.amebaId,themeId:this.props.entry.theme_id})},void 0,this.props.entry.theme_name,(0,o.Z)(I(),{"aria-hidden":"true",className:d()(Te().ThemeIcon)})))))))}renderEntryBody(){if("amember"===this.props.entry.publish_flg&&(this.props.pageType===C.Z.BlogTop||this.props.pageType===C.Z.SkinPreview))return(0,o.Z)(s.Fragment,{},void 0,(0,o.Z)("div",{className:"skin-entryBody","data-uranus-component":"entryBody"},void 0,(0,o.Z)(ke.Z,{colorClassNames:{borderColorClassName:"skin-borderQuiet",titleColorClassName:"skin-mainWidgetTitle",buttonColorClassName:"skin-btnPrimary"},linkButtonUrl:(0,P.Z)(C.Z.AmemberEntry,{amebaId:this.props.amebaId,entryId:this.props.entry.entry_id}),status:"inList"})),this.props.hashtag);var e=this.props.entry.entry_text||"";return"mon_ng"===this.props.entry.closed_flg?(0,o.Z)("div",{className:"skin-entryBody","data-uranus-component":"entryBody"},void 0,(0,o.Z)("div",{className:"nopermitentry",dangerouslySetInnerHTML:{__html:e}})):"amember"!==this.props.entry.publish_flg||e||!1!==this.props.entry.amemberLoading?(0,o.Z)(s.Fragment,{},void 0,this.props.entryDetailClip,(0,o.Z)(he,{amebaId:this.props.amebaId,bloggerType:this.props.bloggerType,commerceEntryImageItemList:this.props.commerceEntryImageItemList,content:e,entry:this.props.entry,entryId:"".concat(this.props.entry.entry_id),entryIndex:this.props.entryIndex,imageProtectionType:this.props.imageProtectionType,imageReproduce:this.props.imageReproduce,injectedAdDfpParam:this.props.injectedAdDfpParam,injectedAdsData:this.props.injectedAdsData,injectedAdsLoadingStatus:this.props.injectedAdsLoadingStatus,isOfficial:this.props.isOfficial,locationSearch:this.props.locationSearch,openModal:this.props.openModal,pageType:this.props.pageType,pickEventLabels:this.props.pickEventLabels,remoteConfig:this.props.remoteConfig,shouldInjectAutoGeneratedAds:this.props.shouldInjectAutoGeneratedAds,sidebarCount:this.props.sidebarCount,skinCode:this.props.skinCode,trackRaichoAdInviewRequest:this.props.trackRaichoAdInviewRequest,trackRaichoAdTapRequest:this.props.trackRaichoAdTapRequest,trackStartClip:this.props.trackStartClip,trackTapLog:this.props.trackTapLog,trackViewLog:this.props.trackViewLog,onClickLink:this.handleClickEntryTextLink,onFetchPickEventLabels:this.props.onFetchPickEventLabels,onInjectedAdDFPNotFound:this.props.onInjectedAdDFPNotFound},"entry_detail_text"),this.props.mypickModule,this.props.hashtag):(0,o.Z)(ye.x,{},void 0,(0,o.Z)("div",{className:"skin-entryBody","data-uranus-component":"entryBody"},void 0,(0,o.Z)(ke.Z,{colorClassNames:{borderColorClassName:"skin-borderQuiet",titleColorClassName:"skin-mainWidgetTitle",buttonColorClassName:"skin-btnPrimary"},linkButtonUrl:this.props.isLoggedIn?"".concat(window.process.env.HTTP_PATH_AMEMBER_APPLY,"/amemberRequest.do?oAid=").concat(this.props.amebaId):"".concat(be.qD,"?bnm=").concat(this.props.amebaId,"&eid=").concat(this.props.entry.entry_id,"&service=amember_entry&token=").concat(this.props.amebloOneTimeToken),status:this.props.isLoggedIn?"notAmember":"notLoggedIn"})),this.props.hashtag)}renderEntryFooter(){var e={minHeight:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.reduce(((e,t)=>{var{component:r,height:n}=t;return r?e+n:e}),t)}([{component:this.props.cheerFrame,height:470},{component:this.props.reactions,height:64},{component:this.props.reactionsLink,height:40},{component:this.props.shareButton,height:66},{component:this.props.readerModule,height:116}])+11},t=(0,o.Z)("div",{style:e});return(0,o.Z)(ye.x,{placeholder:t},void 0,(0,o.Z)("div",{className:"skin-entryFooter","data-uranus-component":"entryFooter"},"entryFooter",this.props.cheerFrame,this.props.reactions,this.props.reactionsLink,le||(le=(0,o.Z)("div",{className:"skin-borderQuiet","data-uranus-component":"entryFooterDivider"})),this.props.shareButton,this.props.readerModule))}renderEntry(){var{amebaId:e,entry:t}=this.props,r=t.entry_created_datetime||"",n=m()(r,y()(new Date,1)),a=this.props.pageType===C.Z.TOP?"entryStdTop":"entry";return(0,o.Z)("article",{className:"skin-entry js-entryWrapper","data-unique-ameba-id":e,"data-unique-entry-id":t.entry_id,"data-unique-entry-title":t.entry_title,"data-uranus-component":a},void 0,(0,o.Z)("div",{className:"skin-entryInner"},void 0,this.renderEntryHead(n),this.props.pageType===C.Z.Entry&&(0,o.Z)("div",{className:"js-blogGenreRank","data-uranus-component":"blogGenreEntryRankInfo"},void 0,this.props.entryDetailGenreRanking),this.renderEntryBody(),this.props.adInArticlePanel,this.props.adEntryBottom,this.renderEntryFooter()))}render(){var{entry:e}=this.props;return!1!==e.loading||e.entry_id?this.renderEntry():this.renderEntryEmpty()}},oe.displayName="PcEntryDetailBlockUranus",ie=se))||ie},35673:(e,t,r)=>{var n=r(18300)(();n.push([e.id,"._2KDNuvKs{align-items:center;display:flex;justify-content:space-between;min-height:26px}#no-js ._2yvqcGo-{display:none}._l__DWUzI{flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._2yGpGBRh,._l__DWUzI{min-height:14px}#no-js ._2yGpGBRh{display:none}._3Narn8q4{vertical-align:text-bottom}._zmdtuyxn{font-size:1.5em;margin-right:4px;vertical-align:-.25em}",""]),n.locals={TimeBlock:"_2KDNuvKs",NoJSTimeBlock:"_2yvqcGo-",Time:"_l__DWUzI",Theme:"_2yGpGBRh",ThemeIcon:"_3Narn8q4",EntryIcon:"_zmdtuyxn"},e.exports=n},66109:(e,t,r)=>{var n=r(35673),a=Object.assign||i=Object.defineProperty||"string"==typeof n&&(n=[[e.id,n,""]]),e.exports=function(e){var t=a({},e.locals||{});return i(t,"_",{value:),i(t,"toString",{value:function(){return"function"==typeof e.toString?e.toString():""}}),t}(n)}}]);