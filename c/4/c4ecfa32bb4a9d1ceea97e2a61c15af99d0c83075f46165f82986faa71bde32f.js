(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{8699:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(7782),s=a(2784),i=a(7870),n=a(496),l={link:"WAhIaVnH",cardImageRatio:"xmT2fTn1",cardOverlay:"SvOui1YH",cardOverlayContent:"vXLj4kK5",cardDescription:"C5tnML-D",flexOnMobile:"ertngXId"};function o(e){var t,a=e._ref,o=e.alt,c=e.children,d=e.className,m=e.classNameImageRatio,u=e.classNameOverlay,h=e.classNameDescription,p=e.dataGaTrack,f=e.description,x=e.href,b=e.id,g=e.image,v=e.tabIndex,N=e.target,j=e.flexOnMobile,w=(0,r._T)(e,["_ref","alt","children","className","classNameImageRatio","classNameOverlay","classNameDescription","dataGaTrack","description","href","id","image","tabIndex","target","flexOnMobile"]),k=function(e,t){return x?s.createElement("a",{"aria-hidden":t.ariaHidden,"data-ga-track":p,className:l.link,tabIndex:t.tabIndex,target:N,href:x},e):e};return s.createElement(n.Z,(0,r.pi)({id:b,ref:a,className:(0,i.Z)(d,((t={})[l.flexOnMobile]=!!j,t))},w),s.createElement(s.Fragment,null,s.createElement("div",{className:l.cardOverlay},s.createElement("div",{className:(0,i.Z)(l.cardImageRatio,m)},s.createElement("img",{src:g,alt:o})),k(s.createElement("div",{className:(0,i.Z)(l.cardOverlayContent,u)},c),{ariaHidden:!0,tabIndex:-1})),f&&k(s.createElement("div",{className:(0,i.Z)(l.cardDescription,h)},f),{ariaHidden:!1,tabIndex:void 0===v?0:v})))}},2443:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(7782),s=a(2784),i=a(7870),n={"col-xl-1":"MHZo3X3M","col-xl-2":"AHkO1oPW","col-xl-3":"k-qOzhW5","col-xl-4":"_7XybmG6x","col-xl-5":"d1J5Vi4x","col-xl-6":"uT3cmBfB","col-xl-7":"_0X-e1fSp","col-xl-8":"ipDUB2fU","col-xl-9":"CD47sgTf","col-xl-10":"o-EdIG-s","col-xl-11":"leyBm6d2","col-xl-12":"NVEEDdgw","col-l-1":"ba7ULF9Q","col-l-2":"M4bkXr06","col-l-3":"IhMRhXR9","col-l-4":"_4aBAfG7V","col-l-5":"WYfI4TUc","col-l-6":"UixKH0cd","col-l-7":"ziWGGwWe","col-l-8":"b3zwMn3r","col-l-9":"C70-7SRg","col-l-10":"wKxr5x7V","col-l-11":"AwDoqtP2","col-l-12":"e-gTxscT","col-m-1":"bPkCajX1","col-m-2":"rM5klLRl","col-m-3":"juSTTilA","col-m-4":"-UVneTQm","col-m-5":"bV9Z1ENZ","col-m-6":"GnoT33eB","col-m-7":"M1gEd-op","col-m-8":"_8Ou4bhIw","col-m-9":"EWD6-MDo","col-m-10":"Hd7kJjS4","col-m-11":"_4Oq-k-1I","col-m-12":"KI4Scabg","col-s-1":"_9PFx4YeG","col-s-2":"KrWkr0z0","col-s-3":"sYMQE-JN","col-s-4":"ztXS5KJf","col-s-5":"AnTgntfW","col-s-6":"ZOMji6G7","col-s-7":"_8pWwqlMr","col-s-8":"_2TW91CKT","col-s-9":"kFwqRHic","col-s-10":"_1IXagcHn","col-s-11":"M4Y2qHhY","col-s-12":"J3iAwvdR",defaultGrid:"D-9YuXR-"},l=function(e){var t=function(t){return n["".concat(t,"-").concat(e[t])]},a=[t("col-xl")];return e["col-l"]&&a.push(t("col-l")),e["col-m"]&&a.push(t("col-m")),e["col-s"]&&a.push(t("col-s")),a};function o(e){var t=e.children;return s.createElement("div",{className:(0,i.Z)(n.gridItem)},t)}function c(e){var t=e._ref,a=e.className,c=e.children,d=(0,r._T)(e,["_ref","className","children"]);return s.createElement("div",{ref:t,"data-testid":"grid-container",className:i.Z.apply(void 0,(0,r.ev)([a,n.defaultGrid],l(d),!1))},s.Children.toArray(c).map(function(e,t){return s.createElement(o,{key:"gridItem-".concat(t)},e)}))}},4135:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var r=a(7782),s=a(2784),i=a(7870),n=a(2234),l={gridWrapper:"_4frv0Qf-",gridChild:"U0asx5dC",biggerChild:"YSm2LM95",gridWithBigChildren:"LHMkix3r"};function o(e){var t,a=e.children,n=e.className,o=e.shouldRenderBiggerItems,c=void 0!==o&&o,d=(0,r._T)(e,["children","className","shouldRenderBiggerItems"]);return s.createElement("div",(0,r.pi)({className:(0,i.Z)(l.gridWrapper,n,((t={})[l.gridWithBigChildren]=c,t))},d),s.Children.toArray(a).map(function(e,t){var a;return s.createElement("div",{className:(0,i.Z)(l.gridChild,((a={})[l.biggerChild]=c,a)),key:"gridChild-".concat(t)},e)}))}var c=function(e){var t=e.onClick,a=e.label,r=void 0===a?"Load More":a,n=e.className;return s.createElement("div",{className:"wrOzy6zF"},s.createElement("span",{role:"button",className:(0,i.Z)("cLW8e5fz",n),onClick:t},r))};function d(e){var t=e._ref,a=e.className,l=e.classNameLoadMoreButton,d=e.itemsPerPage,m=e.children,u=e.moreButtonLabel,h=e.renderAd,p=(0,r._T)(e,["_ref","className","classNameLoadMoreButton","itemsPerPage","children","moreButtonLabel","renderAd"]),f=s.Children.toArray(m),x=(0,s.useState)(1),b=x[0],g=x[1],v=Math.ceil(f.length/d),N=f.length<=2;return s.createElement("div",(0,r.pi)({className:(0,i.Z)(a,"-XChG0PY")},p,{ref:t}),function(e,t){for(var a=[],r=0;r<b;r++){var i=r*d,n=i+d,l=!!h&&r!==b-1;a.push(s.createElement(s.Fragment,{key:r},s.createElement(o,{shouldRenderBiggerItems:t},e.slice(i,n)),l&&h()))}return a}(f,N),s.createElement(n.Z,{condition:!(b>=v)},s.createElement(c,{className:l,onClick:function(){return g(function(e){return e+1})},label:u})))}},7123:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(7782),s=a(2784),i=a(7870),n=a(9128),l={shareItem:"SVPRdZO5",facebook:"_0dxM0WCw",linkedin:"kHieQd3h",email:"_279Evu24",x:"anJ-9SBF",threads:"OJBrXc59"};function o(e){var t=e.name,a=e.icon,o=e.link,c=e.onShareHandler,d=e.trackingProps,m=e.className,u=(0,r._T)(e,["name","icon","link","onShareHandler","trackingProps","className"]),h=function(e){c&&c(e,t),d&&(0,n.M)(d,d.shareLabel)};return s.createElement("a",(0,r.pi)({onClick:function(e){return h(e)},href:o,className:(0,i.Z)("SVPRdZO5",l[t],m),"aria-label":"Share this page on ".concat(t," (opens in a new window)")},u),a)}},8543:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chansec",function(){return a(8819)}])},2734:function(e,t,a){"use strict";var r=a(2322),s=a(2784),i=a(3980),n=a.n(i),l=a(2779),o=a.n(l),c=a(2419),d=a.n(c),m=a(7554);let u=e=>{let{children:t}=e,{doesUserHaveEditToolsAccess:a}=(0,m.b)();return a?(0,r.jsx)("div",{className:o()(d().cardStreamContainer,"et-promoblock-star-item"),children:s.cloneElement(t,{className:o()(t.props.className,"stream-item__text")})}):t};u.propTypes={children:n().node.isRequired},t.Z=u},6919:function(e,t,a){"use strict";var r=a(2322);a(2784);var s=a(3980),i=a.n(s),n=a(2779),l=a.n(n);let o=e=>{let{children:t,className:a,...s}=e;return(0,r.jsx)("div",{className:l()("csf-block",a),"data-testid":"edit-tools-csf-block","data-test-e2e":"data viz",...s,children:t})};o.propTypes={children:i().node,className:i().string},t.Z=o},4987:function(e,t,a){"use strict";var r=a(2322);a(2784);var s=a(2779),i=a.n(s),n=a(3980),l=a.n(n),o=a(4057),c=a(9906),d=a.n(c);let m=e=>{let{isMobile:t,className:a}=e;return(0,r.jsx)(o.Z,{type:t?"inlineAdMobile":"inlineAd",className:i()(d().adContainer,a),children:(0,r.jsx)("fbs-ad",{position:t?"mobilex":"topx","data-testid":"inline-fbs-ad"})})};m.propTypes={isMobile:l().bool.isRequired,className:l().string},t.Z=m},7342:function(e,t,a){"use strict";var r=a(2322);a(2784);var s=a(3980),i=a.n(s),n=a(4057);let l=e=>{let{className:t}=e;return(0,r.jsx)(n.Z,{type:"default",children:(0,r.jsx)("div",{className:t,"aria-hidden":"true",role:"presentation",tabIndex:"-1"})})};l.propTypes={className:i().string.isRequired},t.Z=l},2107:function(e,t,a){"use strict";var r=a(2322);a(2784);var s=a(2779),i=a.n(s),n=a(3980),l=a.n(n),o=a(4057),c=a(2986),d=a.n(c);let m=e=>{let{className:t,breakout:a}=e;return(0,r.jsx)("div",{"data-testid":"fbs-ad - mobileRec",className:i()(t,{[d().breakout]:a}),children:(0,r.jsx)(o.Z,{type:"inlineAdMobile",children:(0,r.jsx)("fbs-ad",{position:"mobilerec"})})})};m.propTypes={className:l().string,breakout:l().bool},t.Z=m},9230:function(e,t,a){"use strict";var r=a(2322);a(2784);var s=a(2779),i=a.n(s),n=a(3980),l=a.n(n),o=a(4057),c=a(1045),d=a.n(c);let m=e=>{let{darkMode:t,fbsAdRef:a,className:s,classNameOuterContainer:n,position:l="rec",...c}=e;return(0,r.jsx)("div",{className:i()(d().rightRailOuterContainer,n),"data-testid":"fbs-ad - rightRail",children:(0,r.jsx)(o.Z,{className:i()(d().rightRailAd,s),darkMode:t,type:"rightRail",...c,children:(0,r.jsx)("fbs-ad",{position:l,ref:a,"data-testid":"fbs-ad - Right Rail"})})})};m.propTypes={darkMode:l().bool},t.Z=m},9021:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var r=a(2322),s=a(2784),i=a(3980),n=a.n(i),l=a(2779),o=a.n(l),c=a(9156),d=a(768),m=a(6375),u=a(6229),h=a(650),p=a.n(h),f=e=>t=>{e.forEach(e=>{e&&(e.current=t)})},x=a(813);let b=e=>{let{className:t,fbsAdRef:a}=e,{data:{isMobile:i}}=(0,d.f)(),{adsLoaded:n,isMobileStickyAdDisplayed:l,setIsMobileStickyAdDisplayed:h}=(0,m.R)(),[x,b]=(0,s.useState)(!1),g=(0,s.useRef)(null);return((0,u.Z)({fbsAdRef:g,callBackOnRender:e=>{let{detail:{size:t=[]}}=e;b(0===t[0]),h(!0)}}),i&&n)?(0,r.jsx)(c.Z,{className:o()(p().stickyAd,t),visible:l,showLabel:!1,showCloseButton:x,children:(0,r.jsx)("fbs-ad",{"fire-render-on-refresh":!0,position:"mobile","ad-id":"mobile-sticky",ref:f([g,a])})}):null};b.propTypes={className:n().string,fbsAdRef:x.S};var g=b},6688:function(e,t,a){"use strict";var r=a(2322);a(2784);var s=a(5462),i=a(3980),n=a.n(i),l=a(2779),o=a.n(l),c=a(3821),d=a(5161),m=a.n(d);let u=e=>{let{carouselOptions:t,shouldStick:a,expectedAdHeight:i,expectedAdHeightRenderCallback:n}=e,{label:l,labelColor:d,carouselItems:u,showCarousel:h}=t,{headerHeight:p}=(0,c.l)();return(0,r.jsx)(s.ZP,{className:o()({[m().topAd]:a}),adPosition:"top",showCarousel:h,carouselItems:u,label:l,labelColor:d,shouldStick:a,stickyTimeout:5,stickyTopOffset:p,expectedAdHeight:i,expectedAdHeightRenderCallback:n,children:(0,r.jsx)("fbs-ad",{position:"top"})})};u.propTypes={carouselOptions:n().shape({label:n().string,labelColor:n().string,showCarousel:n().bool,carouselItems:n().array}).isRequired,shouldStick:n().bool,expectedAdHeight:n().number,expectedAdHeightRenderCallback:n().func},t.Z=u},6229:function(e,t,a){"use strict";var r=a(2784),s=a(6375);t.Z=e=>{let{fbsAdRef:t,callBackOnRender:a}=e,{adsLoaded:i}=(0,s.R)();(0,r.useEffect)(()=>{if(!t.current||!i)return;let e=t.current;return e.addEventListener("render",a),()=>{e.removeEventListener("render",a)}},[t,i,a])}},3450:function(e,t,a){"use strict";var r=a(2784),s=a(6375),i=a(823);t.Z=()=>{let{isConsentRequired:e}=(0,s.R)(),[t,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{a(!e||(0,i.LE)())},[e]),t}},8819:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return tH},default:function(){return tF}});var r,s=a(2322),i=a(2784),n=a(3980),l=a.n(n),o=a(1294),c=a(4980),d=a(4882),m=a(4556),u=a(9021),h=a(768),p=a(2779),f=a.n(p),x=(a(5998),a(7996),a(4704)),b=a.n(x);let g=e=>{let{as:t="section",children:a,className:r,...i}=e;return(0,s.jsx)(t,{className:f()(b().section,r),"data-test-e2e":"section",...i,children:a})};g.propTypes={as:l().string,className:l().string,children:l().node};var v=a(4771),N=a.n(v);let j=e=>{let{title:t,withEyebrow:a,hasSubnav:r}=e;return(0,s.jsx)("h1",{className:f()(N().mainTitle,{[N().withEyebrow]:a,[N().hasSubnav]:r}),children:t})};j.propTypes={title:l().string.isRequired,withEyebrow:l().bool,hasSubnav:l().bool};l().array.isRequired;let w=e=>{let{title:t,href:a}=e;return(0,s.jsx)("h2",{className:N().secondaryTitle,children:(0,s.jsx)("a",{href:a,children:t})})};w.propTypes={title:l().string.isRequired,href:l().string.isRequired};let k=e=>{let{title:t,eyebrowData:a,subnavData:r,titleBackgroundImage:i}=e,n=!!a?.title,l=i?{style:{backgroundImage:`url(${i})`}}:null;return(0,s.jsxs)(g,{className:N().titleSectionContainer,...l,children:[n&&(0,s.jsx)(w,{...a}),(0,s.jsx)(j,{title:t,withEyebrow:n,hasSubnav:!1}),!1]})};k.propTypes={title:l().string.isRequired,eyebrowData:l().object,subnavData:l().array,titleBackgroundImage:l().string};var C=a(3902),R=a(7019),y=a(6312),T=a(9230),Z=a(5217),_=a.n(Z),A=a(647),E=a(3783);let I=(e,t)=>e.filter(e=>e.date===t).map(e=>e.id).join(","),S=e=>{let{streamItems:t,sourceValue:a,serverData:r}=e,{swimLane:s,specialSlot:i,streamSourceType:n}=r,l=t[t.length-1].date,o=I(t,l);return{date:l,start:t.length+1,ids:o,sourceValue:a,swimLane:s,specialSlot:i,streamSourceType:n}},M=async e=>{let t=await fetch(`/simple-data/chansec/stream/${(0,E.Z)(e)}`);return(0,A.Z)(t).json()},B=e=>e.blocks.items,P=e=>e.hasMore;var q=a(5554),D=a(3821),L=a(6919),$=a(4057),O=a(3450),H=a(7870),F={heading:"g3mAYQ8J",large:"WkFbYh-E",medium:"SJNTKDP3",small:"e-91fd8B",bold:"ibL4kWHc",darkGray:"XY-jq-64",mediumGray:"iFiX5lKl",siteBlack:"KbI-PWh6",siteWhite:"_892ZjfZs"},z=function(e){var t=e.as,a=e.children,r=e.color,s=e.size,n=e.weight,l=[void 0===n?"regular":n,void 0===r?"siteBlack":r,void 0===s?"medium":s].map(function(e){return F[e]}).join(" ");return i.createElement(t,{className:(0,H.Z)("g3mAYQ8J",l)},a)},W=a(1932),G=a.n(W);let Y=e=>{let{title:t}=e;return(0,s.jsx)("div",{className:G().headingContainer,children:(0,s.jsx)(z,{as:"h2",size:"large",weight:"bold",children:t})})};Y.propTypes={title:l().string.isRequired};var U=a(2734),V=a(1267);let K=e=>{let{streamItems:t,isMobile:a,channelName:r}=e;return t.map((e,t)=>{let{author:i,coAuthors:n,id:l,description:o,title:c,image:d,date:m,url:u,hasAccess:h,isFreeNewsletter:p,removePaywall:f,type:x,paidLabel:b,magazine:g,naturalId:v}=e,N=u.includes("newsletters"),j=g?.displayDate?`From the ${g.displayDate} issue`:null,w={title:c,description:a?"":o,isVideo:"video"===x,timestamp:m,customTimestamp:j,imageSrc:(!a||t<3)&&d,imageAlignment:"right",articleUrl:u,byLineProps:{author:(0,q.xh)(i,n),linkTarget:"_self"},showLockIcon:N&&!h&&!p&&!f,paidProgramLabelProps:(0,q.zK)(b),lines:3,loading:"lazy",variant:"stream",articleId:v,trackingProps:{track:V.reactComponentsTracking,category:"template area interaction",action:"Click",saveLabel:`stream-save-article-${u}`,unSaveLabel:`stream-unsave-article-${u}`}},k={articleData:`${r} - Stream - Position ${t+1} - ${e.title}`,authorData:`${r} - Stream - Position ${t+1} - ${e.author.name}`};return(0,s.jsx)(U.Z,{children:(0,s.jsx)(R.ZP,{...w,"data-testid":"Card Stream","data-test-e2e":"card stream",trackingData:k,target:"_self"})},l)})},Q=e=>{let{top:t,position:a="recx"}=e;return(0,s.jsx)(T.Z,{position:a,className:_().rightRailAd,classNameOuterContainer:_().rightRailOuterContainer,style:{top:t},"data-testid":"Sticky Right Rail AdContainer"})};Q.propTypes={position:l().string,top:l().number.isRequired};let X=()=>(0,s.jsx)($.Z,{type:"inlineAd",className:_().moreOnAdContainer,"data-test-e2e":"moreon container",children:(0,s.jsx)("fbs-ad",{position:"moreon","data-testid":"fbs-ad - More On"})}),J=e=>{let{streamData:t,index:a}=e,{data:{isMobile:r,serverData:n,hasPromoted:l}}=(0,h.f)(),{heading:o,hasMore:c,streamItems:d,onShowMoreButtonClick:m}=function(e,t){let{sourceValue:a,streamHeaderTitle:r}=e,[s,n]=(0,i.useState)(B(e)),[l,o]=(0,i.useState)(P(e)),c=async()=>{let e=S({sourceValue:a,serverData:t,streamItems:s}),r=await M(e);n(e=>[...e,...B(r)]),o(P(r))};return{heading:`More From ${r}`,hasMore:l,streamItems:s,onShowMoreButtonClick:c}}(t,n),{headerHeight:u}=(0,D.l)(),p=(0,O.Z)(),x=(u||0)+10;return(0,s.jsx)(g,{as:"div",id:`row-${a}`,className:f()("csf-row et-rows",t.id),"data-testid":"edit-tools-csf-row",children:(0,s.jsx)(L.Z,{children:(0,s.jsxs)("div",{className:_().section,children:[l&&(0,s.jsx)(Y,{title:o}),(0,s.jsx)(y.Z,{className:_().streamFeed,renderAd:!r&&X,moreButtonLabel:"More Articles",onShowMoreButtonClick:m,hasMore:c,"data-test-e2e":"stream articles",children:K({streamItems:d,isMobile:r,channelName:n?.channelName})}),p&&!r&&(0,s.jsxs)("div",{className:f()(_().adsColumn,{[_().withoutHeading]:!l}),children:[(0,s.jsx)(Q,{top:x,position:l?"recx":"rec"}),(0,s.jsx)(Q,{top:x})]})]})})})};J.propTypes={streamData:l().shape({blocks:l().object.isRequired,hasMore:l().bool,id:l().string,sourceValue:l().string.isRequired,streamHeaderTitle:l().string.isRequired}).isRequired,index:l().number.isRequired};var ee=a(2723),et=a(2443),ea=a(9483),er=a(6229),es=a(8585),ei=a.n(es),en=a(2107),el=a(9482),eo=a.n(el);let ec=()=>(0,s.jsxs)("div",{className:eo().ntvLoading,children:[(0,s.jsx)("div",{className:eo().image}),(0,s.jsxs)("div",{className:eo().loadingText,children:[(0,s.jsx)("div",{className:eo().smallText}),(0,s.jsx)("div",{className:f()(eo().largeText,eo().largeText1)}),(0,s.jsx)("div",{className:f()(eo().largeText,eo().largeText2)}),(0,s.jsx)("div",{className:f()(eo().largeText,eo().largeText3)})]})]}),ed=()=>null,em=e=>{let{isLoading:t}=e;return t?(0,s.jsx)(ec,{}):(0,s.jsx)(ed,{})};em.propTypes={isLoading:l().bool};var eu={apexBlue:"#007ac8"},eh=a(5518),ep=a.n(eh),ef=()=>{let e=(0,i.useRef)(null),[t,a]=(0,i.useState)(!1);return(0,er.Z)({fbsAdRef:e,callBackOnRender:e=>{e?.detail?.isEmpty===!1&&a(!0)}}),(0,s.jsx)($.Z,{className:f()({[ep().adShown]:t}),showLabel:t,children:(0,s.jsx)("fbs-ad",{position:"spon-logo",ref:e})})};let ex=e=>e.filter(e=>{let{title:t}=e;return t}),eb=e=>{let{cards:t,isMobile:a,size:r,channelName:s,positionIndex:n}=e;return ex(t).map((e,t)=>{let l=(0,q.tY)({item:e,showDescription:!1}),o={articleData:`${s} - Stream - Position ${n+t} - ${e.title}`,authorData:`${s} - Stream - Position ${n+t} - ${e.author?.name}`};return(0,i.createElement)(ee.Z,{...l,size:a?"small":r,image:l.image,showImage:!a,className:ei().cardItemMobile,key:l.title,trackingData:o})})},eg=e=>{let{smallCards:t,isMobile:a,channelName:r,positionIndex:i}=e;return(0,s.jsx)("div",{className:ei().ChannelSideBar,children:eb({cards:t,isMobile:a,size:"medium",channelName:r,positionIndex:i})})};eg.propTypes={smallCards:l().array.isRequired,isMobile:l().bool,channelName:l().string.isRequired,positionIndex:l().number.isRequired};let ev=e=>{let{listCards:t,isMobile:a,channelName:r,positionIndex:n}=e,l=t.slice(0,3),o=(0,i.useRef)(null),[c,d]=(0,i.useState)(!0);return(0,er.Z)({fbsAdRef:o,callBackOnRender:()=>d(!1)}),(0,s.jsx)("div",{className:ei().bottomCards,children:(0,s.jsxs)(et.Z,{"col-xl":2,"col-m":1,className:ei().bottomCards,children:[eb({cards:l,isMobile:a,size:"small",channelName:r,positionIndex:n}),(0,s.jsx)(ea.Z,{showLabel:!1,className:f()(a&&ei().cardItemMobile,ei().ntvMobileWrapper),children:(0,s.jsx)("fbs-ad",{position:`ntv-${a?"mob":"desk"}channel`,ref:o,"custom-targeting":`ntv-channel:${r.replace(/ /g,"-").toLowerCase().trim()}`,children:(0,s.jsx)(em,{isLoading:c})})})]})})};ev.propTypes={listCards:l().array.isRequired,isMobile:l().bool,channelName:l().string.isRequired,positionIndex:l().number.isRequired};let eN=e=>{let{row:t,isMobile:a,channelName:r}=e,{smallCards:i,listCards:n,largeCard:l}=t?.blocks[0]?.items||{},o={articleData:`${r} - Stream - Position 0 - ${l.title}`,authorData:`${r} - Stream - Position 0 - ${l.author?.name}`};return(0,s.jsx)(g,{as:"div",children:(0,s.jsx)(L.Z,{children:(0,s.jsxs)("div",{className:ei().channelFeaturedCardContainer,children:[(0,s.jsxs)("div",{className:ei().cardFourArticles,children:[(0,s.jsx)(ee.Z,{...(0,q.tY)({item:l,showDescription:!1}),size:"large",isZoomable:!0,coloredLabelText:l.eyebrows,themeColor:eu.apexBlue,className:ei().channelLargeCard,trackingData:o}),(0,s.jsx)(ev,{listCards:n,isMobile:a,channelName:r,positionIndex:3})]}),(0,s.jsx)(eg,{smallCards:i,isMobile:a,channelName:r,positionIndex:1}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ef,{}),(0,s.jsx)(en.Z,{className:ei().mobileRec,breakout:!0})]})]})})})};eN.propTypes={row:l().object.isRequired,isMobile:l().bool,channelColor:l().string,channelName:l().string.isRequired};var ej=a(9438),ew=a.n(ej),ek=a(9673);function eC(){return(eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var eR=e=>i.createElement("svg",eC({className:"chevron-right_svg__fs-icon chevron-right_svg__fs-icon--chevron-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),r||(r=i.createElement("path",{d:"M8.2 7.2 13 12l-4.8 4.8 1.5 1.4L16 12 9.7 5.8z"}))),ey=a(4096),eT=a.n(ey),eZ=a(7773),e_=a(7215),eA=()=>{let e=(0,i.useRef)(null),t=(0,eZ.Z)("primeInviewEvent");(0,i.useEffect)(()=>{t&&t(e.current,"frase-channel-promo")},[t]);let a={eventCategory:"Template Area Interaction",eventAction:"Click",eventLabel:"frase-channel-promo"};return(0,s.jsx)("a",{href:"https://www.forbes.com/frase",ref:e,onClick:()=>(0,e_.fireGAEvent)(a),target:"_blank",rel:"noopener noreferrer",className:eT().frasePromoBlockContainer,children:(0,s.jsxs)("div",{className:eT().promoBlockSpanAndButton,children:[(0,s.jsx)("span",{className:eT().promoBlockTitle,children:"Can you solve today's phrase?"}),(0,s.jsx)(ek.Z,{className:eT().promoBlockButton,icon:(0,s.jsx)(eR,{}),children:"Play Now"})]})})};let eE=(e,t)=>e.length+[t].filter(Boolean).length,eI=e=>{let{id:t,items:a,customHtml:r,index:i,shouldRenderAd:n,className:l}=e,{data:{serverData:o}}=(0,h.f)(),c=o?.isNewsletter;return(0,s.jsx)(g,{as:"div",id:`row-${i}`,className:f()(t,"csf-row et-rows"),"data-testid":"edit-tools-csf-row",children:(0,s.jsx)("div",{className:l,children:(0,s.jsxs)(L.Z,{className:f()({[ew().cardRowColumnsWithAd]:n}),children:[(0,s.jsxs)("div",{className:ew().cardRowGridContainer,children:[(0,s.jsxs)(et.Z,{"col-xl":eE(a,r),"col-s":1,className:ew().cardRowGrid,children:[a.map(e=>{let{hasAccess:t,url:a}=e;return(0,s.jsx)(ee.Z,{className:ew().cardRowFeatureCard,classNameImg:ew().imgCard,size:"medium",showLockIcon:!t&&c,...(0,q.tY)({item:e,showDescription:!1})},a)}),!!r&&(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:r},className:ew().twoUpImageCustomHtmlBlock})]}),n&&(0,s.jsx)(eA,{})]}),n&&(0,s.jsx)("div",{className:ew().rightRailContainer,children:(0,s.jsx)(T.Z,{className:ew().rightRail,type:"rightRail"})})]})})})};eI.propTypes={items:l().array.isRequired,id:l().string.isRequired,customHtml:l().string,index:l().number.isRequired,shouldRenderAd:l().bool,className:l().string};var eS=a(7782),eM=a(9128),eB={tabsContainer:"_6rVqkGje",tabItem:"aqMnK6vU",tabItemActive:"_3l-6rvH7",activeTab:"_3AjFPbsY"};function eP(e){var t,a=e.activeTab,r=e.label,s=e.tabName,n=e.className,l=e.setActiveTab,o=e.trackingProps,c=e.themeColor,d=function(e){e!==a&&(0,eM.M)(o,null==o?void 0:o.tabLabel),l(e)};return i.createElement("button",{type:"button",className:(0,H.Z)(eB.tabItem,((t={})[eB.tabItemActive]=r===a,t),n),onClick:function(){return d(r)},role:"tab"},s,r===a&&i.createElement("div",{style:{backgroundColor:void 0===c?"#007ac8":c},className:eB.activeTab}))}var eq=a(2234);function eD(e){var t=e._ref,a=e.activeTab,r=e.tabItems,s=e.className,n=e.classNameTab,l=e.themeColor,o=void 0===l?"#007ac8":l,c=e.setActiveTab,d=(0,eS._T)(e,["_ref","activeTab","tabItems","className","classNameTab","themeColor","setActiveTab"]);return i.createElement(i.Fragment,null,i.createElement("nav",(0,eS.pi)({ref:t,className:(0,H.Z)(eB.tabsContainer,s),role:"tablist"},d),r.map(function(e,t){return i.createElement(eP,(0,eS.pi)({},e,{activeTab:a,key:"".concat(e.label,"-").concat(t),setActiveTab:c,trackingProps:e.trackingProps,className:n,themeColor:o}))})),i.createElement("div",null,r.map(function(e,t){var r=e.content,s=e.label;return i.createElement(eq.Z,{key:"".concat(s,"-content-").concat(t),condition:s===a},r)})))}var eL=a(1057),e$=a.n(eL);let eO=(e,t,a)=>e?.slice(0,6).map((e,r)=>s.jsx(eH,{item:e,isNewsletter:a},`${t}-item${r+1}`)),eH=e=>{let{item:t,isNewsletter:a}=e,r=a&&!t.hasAccess&&!t.removePaywall,i={showLockIcon:r,size:"small",...(0,q.tY)({item:t,showDescription:!1,showImage:!1}),href:t.uri,truncateTitleToLines:2};return(0,s.jsx)(ee.Z,{...i,className:e$().picksItem,"data-test-e2e":"data viz articles"})};eH.propTypes={item:l().object.isRequired,isNewsletter:l().bool};let eF=e=>{let{latestContent:t,editorsPicks:a,rowId:r}=e,{data:{serverData:n}}=(0,h.f)(),[l,o]=(0,i.useState)("Editor’s"),c=n?.isNewsletter,d=[{content:eO(a,"editors-picks",c),label:"Editor’s",tabName:"Editor’s Picks"},{content:eO(t,"latest-content",c),label:"Latest",tabName:"Latest"}];return(0,s.jsx)("div",{className:f()(e$().sectionSidebar,`csf-row et-rows row-${r}`),children:(0,s.jsx)(L.Z,{children:(0,s.jsx)(eD,{classNameTab:e$().tabs,tabItems:d,activeTab:l,setActiveTab:o})})})};eF.propTypes={editorsPicks:l().array.isRequired,latestContent:l().array.isRequired,rowId:l().string};var ez=a(5221),eW=a.n(ez);let eG=e=>{let{latestContent:t,renderPicks:a,editorsPicks:r,renderRightAd:i,cardArticleData:n,isMobile:l,rowId:o,isRestricted:c,hasBorderBottom:d=!0,channelName:m}=e,u={articleData:`${m} - Stream - Position 0 - ${n.title}`};return n.authors?.length>0&&(u.authorData=`${m} - Stream - Position 0 - ${n.authors[0].name}`),(0,s.jsx)(g,{as:"div",children:(0,s.jsx)(L.Z,{children:(0,s.jsxs)("div",{className:f()(eW().featuredCard,{[eW().withoutBottomBorder]:!d}),children:[a&&(0,s.jsx)(eF,{latestContent:t,editorsPicks:r,rowId:o}),(0,s.jsx)(ee.Z,{...n,trackingData:u,size:"large",isZoomable:!0,showLockIcon:c,themeColor:eu.apexBlue,"data-test-e2e":"featured card"}),i&&!l&&(0,s.jsx)(T.Z,{type:"rightRail",classNameOuterContainer:eW().rightRailContainer}),l&&(0,s.jsx)(en.Z,{breakout:!0})]})})})};eG.propTypes={latestContent:l().array,renderPicks:l().bool,editorsPicks:l().array,renderRightAd:l().bool,cardArticleData:l().object.isRequired,isMobile:l().bool,rowId:l().string,isRestricted:l().bool,hasBorderBottom:l().bool,channelName:l().string.isRequired};var eY=a(9484),eU=a.n(eY);let eV=e=>{let{rowData:t,...a}=e,[r,...i]=t.blocks?.[0]?.items||[],n=t.id,{data:{isMobile:l}}=(0,h.f)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eG,{cardArticleData:(0,q.tY)({item:r}),renderRightAd:t.renderRightAd,isMobile:l,rowId:n,channelName:t.channelName}),!!i.length&&(0,s.jsx)(eI,{className:eU().cardRow,items:i,...a,id:n})]})};eV.propTypes={rowData:l().object.isRequired};var eK=a(1460),eQ=a.n(eK),eX=e=>{let{...t}=e;return(0,s.jsx)(eI,{...t,className:eQ().specialFeature})};let eJ=e=>{let{id:t,html:a,index:r}=e;return(0,s.jsx)(g,{as:"div",id:`row-${r}`,className:f()(t,"csf-row et-rows"),"data-testid":"edit-tools-csf-row",children:(0,s.jsx)(L.Z,{dangerouslySetInnerHTML:{__html:a},className:"custom-html-row"})})};eJ.propTypes={id:l().string,index:l().number,html:l().string.isRequired};var e0=a(7554),e2=a(1851),e1=a.n(e2);let e7=e=>{let{rowData:t}=e,{data:{editorsPicks:a,isMobile:r,serverData:i}}=(0,h.f)(),n=t?.blocks[0]?.items[0]?.hasAccess,l=i.isNewsletter;return(0,s.jsx)(eG,{latestContent:t.latestContent,renderPicks:t.renderPicks,editorsPicks:a,cardArticleData:(0,q.tY)({item:t?.blocks[0]?.items[0]}),renderRightAd:t.renderRightAd,isMobile:r,rowId:t?.id,isRestricted:!n&&l,channelName:t.channelName})};e7.propTypes={rowData:l().object.isRequired};var e4=e=>{let{...t}=e;return(0,s.jsx)(eI,{...t})};function e8(e){var t=e._ref,a=e.children,r=e.className,s=e.title,n=(0,eS._T)(e,["_ref","children","className","title"]);return i.createElement("div",(0,eS.pi)({className:(0,H.Z)("sQ65iQ0Z",r),ref:t},n),i.createElement("div",{className:"QFm-UYy1"},i.createElement("span",{className:"iiZ-e5bh"},"Forbes"),i.createElement("span",{className:"_46ijczbn"},"Social Media")),i.createElement("h3",{className:"_5RVlRGzY"},s),i.createElement("div",{className:"_7-PyzOam"},a))}var e3=a(7123),e9=a(1618),e5=a(4171),e6=a(7360),te=a(4546),tt=a.n(te);let ta=e=>{let{sectionName:t,socialLinks:a={}}=e,r=!!(t&&(a.facebook||a.twitter||a.instagram));return r&&(0,s.jsxs)(e8,{title:`Follow Forbes ${t}`,className:f()(b().section,tt().socialMedia),children:[a.facebook&&(0,s.jsx)(e3.Z,{icon:(0,s.jsx)(e5.Z,{}),link:`https://www.facebook.com/${a.facebook}`}),a.twitter&&(0,s.jsx)(e3.Z,{icon:(0,s.jsx)(e9.Z,{}),link:`https://www.x.com/${a.twitter}`}),a.instagram&&(0,s.jsx)(e3.Z,{icon:(0,s.jsx)(e6.Z,{}),link:`https://www.instagram.com/${a.instagram}`})]})};ta.propTypes={sectionName:l().string,socialLinks:l().shape({facebook:l().string,twitter:l().string,instagram:l().string})};var tr=a(4987),ts=a(4135),ti=a(8699),tn=a(5429),tl=a(3841),to=a.n(tl);let tc=e=>{let{id:t,index:a,row:r}=e,{CarouselTitle:i,blocks:n}=r,l=n?.[0]?.items||[];return(0,s.jsx)(g,{as:"div",id:`row-${a}`,className:f()(t,"csf-row et-rows"),"data-testid":"edit-tools-csf-row",children:(0,s.jsx)("div",{className:to().section,children:(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(Y,{title:i}),(0,s.jsx)(ts.Z,{itemsPerPage:1e3,children:l.map((e,t)=>{let r=`card-${t}`,{image:i,title:n,url:l,type:o,video:c}=e;return(0,s.jsx)(ti.Z,{image:i,alt:n,description:n,href:l,dataGaTrack:`Featured Block - ${o} - Position ${a+1} - ${n}`,children:c&&(0,s.jsx)(tn.Z,{style:{color:"white"},className:to().watchLabel})},r)})})]})})})};tc.propTypes={id:l().string.isRequired,index:l().number.isRequired,row:l().object.isRequired};let td="image_and_text",tm="image_and_three_text_bottom",tu="feature_and_stream",th="featured_carousel",tp="special_feature",tf="two_up_image_custom_html",tx=[td,tm,tu,th,tp,tf],tb=[td,tm],tg=e=>tx.includes(e.title),tv=e=>tb.includes(e.title),tN=e=>!!e.sectionId,tj=e=>{let t=0,a=-1;return e.forEach((e,r)=>{tv(e)&&(a=r,t++)}),{countFeatureCardRows:t,lastFeatureCardRowIndex:a}},tw=(e,t)=>{if(e.title===td)return!t;if(e.title===tm){let t=e.blocks?.[0]?.items?.[1]?.length;return!t}return!1},tk=e=>{let{rows:t,channelSectionData:a,showEditorsPicks:r,isMobile:s}=e,i=t.filter(tg),{countFeatureCardRows:n,lastFeatureCardRowIndex:l}=tj(i),o=!!(tN(a)&&r&&2!==a.layout);return i.map((e,t)=>{let a=o&&t===l,r=s&&tw(e,a);return{...e,renderRightAd:!(n>1&&t===l),renderPicks:a,isLastBlockRenderedAnAd:r}})},tC=(e,t)=>{let{isMobile:a,channelSectionData:r={}}=t,i=tN(r);return e?.map((e,t)=>{let{title:r,id:n,blocks:l,channelName:o,key:c}=e;switch(r){case td:return s.jsx(e7,{rowData:e},c);case tm:return s.jsx(eV,{index:t,rowData:e},c);case tu:return s.jsx(eN,{row:e,isMobile:a,channelName:o},c);case th:return s.jsx(tc,{id:n,index:t,row:e},c);case tp:return s.jsx(eX,{id:n,items:l?.[0]?.items,index:t,shouldRenderAd:!i&&!a},c);case tf:return s.jsx(e4,{id:n,items:l?.[0]?.items.slice(0,2),customHtml:l?.[0]?.customHtml,index:t,shouldRenderAd:!i&&!a},c);default:return null}})},tR=e=>e?.map((e,t)=>{let{title:a,id:r,html:i,key:n}=e;switch(a){case"stream":return s.jsx(J,{streamData:e,index:t},n);case"custom_html":return s.jsx(eJ,{id:r,html:i},n);default:return s.jsx(g,{id:`row-${t}`,className:f()(r,"csf-row et-rows")},n)}}),ty=e=>{let{shouldRenderAd:t,formattedMainRows:a,isNewsletter:r,isMobile:s}=e;return t&&a.length>0&&!a[a.length-1].isLastBlockRenderedAnAd&&(!r||s)};var tT=()=>{let{data:e}=(0,h.f)(),{editToolsData:{rows:t}}=(0,e0.b)(),a=(0,O.Z)(),{isMobile:r,showEditorsPicks:i,channelSectionData:n={},serverData:{isNewsletter:l}}=e,o=a&&n.showQotd,c=tk({rows:t,channelSectionData:n,showEditorsPicks:i,isMobile:r}),d=ty({shouldRenderAd:a,formattedMainRows:c,isNewsletter:l,isMobile:r});return(0,s.jsx)("div",{children:(0,s.jsxs)("section",{id:"row-0",className:f()(e1().mainSectionContainer,"csf-row et-rows",(t[0]||{}).id),"data-testid":"chanSec-Row",children:[tC(c,e),(0,s.jsx)(ta,{sectionName:n.sectionName,socialLinks:{facebook:n.socialFacebook,twitter:n.socialTwitter,instagram:n.socialInstagram}}),o&&(0,s.jsx)("fbs-ad",{class:e1().fbsQotdAd,position:r?"qotd-mob":"qotd"}),d&&(0,s.jsx)(tr.Z,{isMobile:r}),tR(t)]})})},tZ=a(7342),t_=a(6256),tA=a.n(t_);let tE=(e,t)=>{let{sectionName:a,mobileHeaderImage:r,desktopHeaderImage:s}=e;return"Top Advisor/SHOOK"!==a?null:t?r:s},tI=e=>{let{channelSectionData:t,header:a,isMobile:r}=e,{layout:s,sectionName:i,channelName:n}=t,l=!i,o=a.find(e=>e.title===n),c=tE(t,r);return{title:l?n:i,eyebrowData:{title:!l&&3!==s&&n,href:o?.url},subnavData:l?o?.sections:[],titleBackgroundImage:c}};var tS=()=>{let{data:{channelSectionData:e,pageLocation:t,header:a,isMobile:r}}=(0,h.f)();return(0,s.jsxs)(C.Z,{"data-et-location":t,className:"et-promoblock",children:[(0,s.jsx)(k,{...tI({channelSectionData:e,header:a,isMobile:r})}),(0,s.jsx)(tT,{}),r&&(0,s.jsx)(g,{className:tA().mediaNetContainer,children:(0,s.jsx)(tZ.Z,{className:"fbs-ad--mobile-medianet-wrapper"})})]})},tM=a(4417),tB=a(6688);let tP=e=>{let{isProd:t,channelNames:a,sectionNames:r,allExpectedTopAdHeights:s,isUs:i}=e;return e=>{if(!t||!s)return;let{height:n}=e,l=s.includes(n),o=s.join(","),{sourceAgnosticCreativeId:c,sourceAgnosticLineItemId:d}=e.eventDetail||{},m=`expected:${o};actual:${n};channel:${a};section:${r};creativeId:${c};campaignId:${d}';isUs:${i}`;(0,e_.fireGAEvent)({eventCategory:"LockedTopAdContainer - Ad Campaigns height estimation",eventAction:l?"Successful estimate":"Wrong estimate",eventLabel:m})}};var tq=()=>{let{data:{topAdHeight:e,allExpectedTopAdHeights:t,isUs:a,serverData:{isProd:r,tracking:{channelNames:i,sectionNames:n}}}}=(0,h.f)(),l=tP({isProd:r,channelNames:i,sectionNames:n,allExpectedTopAdHeights:t,isUs:a});return(0,s.jsx)(tB.Z,{expectedAdHeight:e,expectedAdHeightRenderCallback:l,carouselOptions:{showCarousel:!1},shouldStick:!0})},tD=a(3798),tL=e=>{let{rows:t}=e;return{rows:(0,tD.Vq)(t)}},t$=(e,t)=>{let{sectionId:a,channelId:r,name:s,channelName:i,layout:n,isVetted:l,channelColor:o}=e;return{reqBody:{channelSectionData:{id:a?r.concat(a):r,sectionId:a,channelName:i,sectionName:s,layout:n,isVetted:l},color:o,promotedContent:t},path:`/simple-data/chansec/${s}/rows/next`}};let tO=e=>{let{data:t,isEurope:a,isChina:r,isUsDpa:i,isUs:n,isMobile:l}=e;return(0,s.jsx)(tM.Z,{isChina:r,isEurope:a,isUsDpa:i,isUs:n,data:t,children:(0,s.jsxs)(e0.Z,{getReqBodyAndPath:t$,data:t,extractDataCallback:tL,children:[(0,s.jsx)(o.Z,{enableNativeAds:!0}),(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(c.Z,{enableEditTools:!0}),!l&&t.shouldRenderTopAd&&(0,s.jsx)(tq,{}),(0,s.jsx)(tS,{}),(0,s.jsx)(m.Z,{})]}),(0,s.jsx)(u.Z,{})]})})};tO.propTypes={data:l().object.isRequired,isEurope:l().bool.isRequired,isChina:l().bool.isRequired,isUsDpa:l().bool.isRequired,isUs:l().bool.isRequired,isMobile:l().bool.isRequired};var tH=!0,tF=tO},813:function(e,t,a){"use strict";a.d(t,{S:function(){return n}});var r=a(3980),s=a.n(r);let i="undefined"==typeof Element?()=>{}:Element,n=s().shape({current:s().instanceOf(i)})},5554:function(e,t,a){"use strict";a.d(t,{tY:function(){return l},xh:function(){return i},zK:function(){return n}});var r=a(5109);let s=e=>{let{displayType:t,name:a,url:r}=e;return{type:t,name:a,link:r}},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[e,...t].map(e=>s(e)).filter(e=>e.name)},n=e=>{let{brandName:t,primaryColor:a,label:s,ftcLabel:i,type:n}=e||{};return s?{contentTypeColor:a,contentType:s?.trim(),brandName:(0,r.Z)(t,n),ftcLabel:i,variant:"card"}:null},l=e=>{let{item:t,showDescription:a=!0,showByline:r=!0,showImage:s=!0}=e,{image:l,title:o,author:c,url:d,uri:m,description:u,videoId:h,coAuthors:p,paidLabel:f}=t||{};return{authors:r?i(c,p):[],image:l,showImage:s,title:o,href:d||m,description:a?u:"",alt:o,isVideo:h,paidProgramLabelProps:f&&n(f)}}},2419:function(e){e.exports={cardStreamContainer:"ajFXt"}},1932:function(e){e.exports={headingContainer:"tQhyN"}},9438:function(e){e.exports={rightRailContainer:"Km8GN",rightRail:"aVbIw",twoUpImageCustomHtmlBlock:"QmyJA",cardRowGridContainer:"_4fMm9",cardRowGrid:"_35FNu",cardRowFeatureCard:"tWXKu",imgCard:"BQ15_",cardRowColumnsWithAd:"_81eAf"}},4704:function(e){e.exports={section:"V1k6W"}},5221:function(e){e.exports={featuredCard:"Ticp8",withoutBottomBorder:"xuP4n",cardArticleContainer:"XBb88",rightRailContainer:"AwK8t"}},1057:function(e){e.exports={sectionSidebar:"_4hUHv",picksItem:"N2NkM",tabs:"_7pqMp"}},6256:function(e){e.exports={mediaNetContainer:"r44kg"}},8585:function(e){e.exports={channelFeaturedCardContainer:"Y7PHJ",mobileRec:"UfRYe",cardFourArticles:"HB6Dg",bottomCards:"lP_t6",ChannelSideBar:"_24yUh",cardItemMobile:"Tr6oF",channelLargeCard:"L1042",ntvMobileWrapper:"CLImA"}},3841:function(e){e.exports={section:"_8SOLz",watchLabel:"Ij2VF"}},4096:function(e){e.exports={frasePromoBlockContainer:"_51Jom",promoBlockSpanAndButton:"yVw2j",promoBlockTitle:"_4Dodn",promoBlockButton:"Kgu4z"}},9484:function(e){e.exports={cardRow:"z294_"}},5217:function(e){e.exports={section:"Zs9Un",streamFeed:"COe59",adsColumn:"_6s6zy",rightRailAd:"IVZjT",rightRailOuterContainer:"tRmDa",withoutHeading:"_1Kwvp",moreOnAdContainer:"Qg_VH"}},1851:function(e){e.exports={mainSectionContainer:"_05P2y",fbsQotdAd:"vcRCv"}},4546:function(e){e.exports={socialMedia:"iQbDL"}},1460:function(e){e.exports={specialFeature:"lz_0i"}},4771:function(e){e.exports={titleSectionContainer:"vyjNF",mainTitle:"Bg1Io",hasSubnav:"zwzNI",withEyebrow:"VoSfl",secondaryTitle:"ABl4Z",subNavContainer:"c91Wi",sectionsContainer:"UoeK_",sections:"DkQE0",sectionLink:"vwg1_"}},9906:function(e){e.exports={adContainer:"K_HHg"}},2986:function(e){e.exports={breakout:"PV4yr"}},9482:function(e){e.exports={ntvLoading:"ocIop",image:"_1oISo",loadingText:"TpAor",smallText:"g14O3",largeText:"bjBQc",largeText1:"mLw_r",largeText2:"SysDR",largeText3:"fpE6g"}},1045:function(e){e.exports={rightRailOuterContainer:"_63PTi",rightRailAd:"wr9U2"}},5518:function(e){e.exports={adShown:"_1vtMi"}},650:function(e){e.exports={stickyAd:"mUnMc"}},5161:function(e){e.exports={topAd:"DlCaB"}},647:function(e,t,a){"use strict";function r(e){if(e.status<200||e.status>=300){let t=Error(e.statusText);throw t.response=e,t}return e}a.d(t,{Z:function(){return r}})},3783:function(e,t,a){"use strict";function r(e){let t=Object.keys(e||{}).map(t=>`${t}=${e[t]}`).join("&");return t?`?${t}`:""}a.d(t,{Z:function(){return r}})},1267:function(e){e.exports={reactComponentsTracking:(e,t,a)=>{window.dataLayer.push({event:"analyticsEvent","event category":e,"event action":t,"event label":a})}}}},function(e){e.O(0,[969,728,448,848,326,558,774,888,179],function(){return e(e.s=8543)}),_N_E=e.O()}]);lastProgramDateTime,this.lastProgramDateTime+=1e3*r.duration),r={}},comment(){},custom(){h.segment?(r.custom=r.custom||{},r.custom[h.customType]=h.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[h.customType]=h.data)}})[h.type].call(t)}))}warnOnMissingAttributes_(t,i,e){const s=[];e.forEach((function(t){i.hasOwnProperty(t)||s.push(t)})),s.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${s.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}},4492:(t,i,e)=>{"use strict";t.exports=e(8836)},3996:(t,i,e)=>{"use strict";var s=i,n=e(7025),r=e(9935);function o(t,i,e,s){var r=!1;if(i.resolvedType)if(i.resolvedType instanceof n){t("switch(d%s){",s);for(var o=i.resolvedType.values,a=Object.keys(o),h=0;h<a.length;++h)o[a[h]]!==i.typeDefault||r||(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',s,s,s),i.repeated||t("break"),r=!0),t("case%j:",a[h])("case %i:",o[a[h]])("m%s=%j",s,o[a[h]])("break");t("}")}else t('if(typeof d%s!=="object")',s)("throw TypeError(%j)",i.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",s,e,s);else{var c=!1;switch(i.type){case"double":case"float":t("m%s=Number(d%s)",s,s);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",s,s);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",s,s);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",s,s,c)('else if(typeof d%s==="string")',s)("m%s=parseInt(d%s,10)",s,s)('else if(typeof d%s==="number")',s)("m%s=d%s",s,s)('else if(typeof d%s==="object")',s)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",s,s,s,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',s)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",s,s,s)("else if(d%s.length >= 0)",s)("m%s=d%s",s,s);break;case"string":t("m%s=String(d%s)",s,s);break;case"bool":t("m%s=Boolean(d%s)",s,s)}}return t}function a(t,i,e,s){if(i.resolvedType)i.resolvedType instanceof n?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",s,e,s,s,e,s,s):t("d%s=types[%i].toObject(m%s,o)",s,e,s);else{var r=!1;switch(i.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",s,s,s,s);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',s)("d%s=o.longs===String?String(m%s):m%s",s,s,s)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",s,s,s,s,r?"true":"",s);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",s,s,s,s,s);break;default:t("d%s=m%s",s,s)}}return t}s.fromObject=function(t){var i=t.fieldsArray,e=r.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!i.length)return e("return new this.ctor");e("var m=new this.ctor");for(var s=0;s<i.length;++s){var a=i[s].resolve(),h=r.safeProp(a.name);a.map?(e("if(d%s){",h)('if(typeof d%s!=="object")',h)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",h)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",h),o(e,a,s,h+"[ks[i]]")("}")("}")):a.repeated?(e("if(d%s){",h)("if(!Array.isArray(d%s))",h)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",h)("for(var i=0;i<d%s.length;++i){",h),o(e,a,s,h+"[i]")("}")("}")):(a.resolvedType instanceof n||e("if(d%s!=null){",h),o(e,a,s,h),a.resolvedType instanceof n||e("}"))}return e("return m")},s.toObject=function(t){var i=t.fieldsArray.slice().sort(r.compareFieldsById);if(!i.length)return r.codegen()("return {}");for(var e=r.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),s=[],o=[],h=[],c=0;c<i.length;++c)i[c].partOf||(i[c].resolve().repeated?s:i[c].map?o:h).push(i[c]);if(s.length){for(e("if(o.arrays||o.defaults){"),c=0;c<s.length;++c)e("d%s=[]",r.safeProp(s[c].name));e("}")}if(o.length){for(e("if(o.objects||o.defaults){"),c=0;c<o.length;++c)e("d%s={}",r.safeProp(o[c].name));e("}")}if(h.length){for(e("if(o.defaults){"),c=0;c<h.length;++c){var d=h[c],l=r.safeProp(d.name);if(d.resolvedType instanceof n)e("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)e("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var u="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";e("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else e("d%s=%j",l,d.typeDefault)}e("}")}var p=!1;for(c=0;c<i.length;++c){d=i[c];var f=t.tt.indexOf(d);l=r.safeProp(d.name);d.map?(p||(p=!0,e("var ks2")),e("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),a(e,d,f,l+"[ks2[j]]")("}")):d.repeated?(e("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),a(e,d,f,l+"[j]")("}")):(e("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),a(e,d,f,l),d.partOf&&e("if(o.oneofs)")("d%s=%j",r.safeProp(d.partOf.name),d.name)),e("}")}return e("return d")}},5305:(t,i,e)=>{"use strict";t.exports=function(t){var i=r.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&i("if((t&7)===4)")("break");i("switch(t>>>3){");for(var e=0;e<t.fieldsArray.length;++e){var a=t.tt[e].resolve(),h=a.resolvedType instanceof s?"int32":a.type,c="m"+r.safeProp(a.name);i("case %i: {",a.id),a.map?(i("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[a.keyType]?i("k=%j",n.defaults[a.keyType]):i("k=null"),void 0!==n.defaults[h]?i("value=%j",n.defaults[h]):i("value=null"),i("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===n.basic[h]?i("value=types[%i].decode(r,r.uint32())",e):i("value=r.%s()",h),i("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[a.keyType]?i('%s[typeof k==="object"?util.longToHash(k):k]=value',c):i("%s[k]=value",c)):a.repeated?(i("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==n.packed[h]&&i("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,h)("}else"),void 0===n.basic[h]?i(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,e):i("%s.push(r.%s())",c,h)):void 0===n.basic[h]?i(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,e):i("%s=r.%s()",c,h),i("break")("}")}for(i("default:")("r.skipType(t&7)")("break")("}")("}"),e=0;e<t.tt.length;++e){var d=t.tt[e];d.required&&i("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return i("return m")};var s=e(7025),n=e(7063),r=e(9935);function o(t){return"missing required '"+t.name+"'"}},4928:(t,i,e)=>{"use strict";t.exports=function(t){for(var i,e=r.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),a=t.fieldsArray.slice().sort(r.compareFieldsById),h=0;h<a.length;++h){var c=a[h].resolve(),d=t.tt.indexOf(c),l=c.resolvedType instanceof s?"int32":c.type,u=n.basic[l];i="m"+r.safeProp(c.name),c.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|n.mapKey[c.keyType],c.keyType),void 0===u?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,i):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,l,i),e("}")("}")):c.repeated?(e("if(%s!=null&&%s.length){",i,i),c.packed&&void 0!==n.packed[l]?e("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",l,i)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",i),void 0===u?o(e,c,d,i+"[i]"):e("w.uint32(%i).%s(%s[i])",(c.id<<3|u)>>>0,l,i)),e("}")):(c.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,c.name),void 0===u?o(e,c,d,i):e("w.uint32(%i).%s(%s)",(c.id<<3|u)>>>0,l,i))}return e("return w")};var s=e(7025),n=e(7063),r=e(9935);function o(t,i,e,s){return i.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",e,s,(i.id<<3|3)>>>0,(i.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",e,s,(i.id<<3|2)>>>0)}},7025:(t,i,e)=>{"use strict";t.exports=o;var s=e(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="Enum";var n=e(9313),r=e(9935);function o(t,i,e,n,r,o){if(s.call(this,t,e),i&&"object"!=typeof i)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=r||{},this.valuesOptions=o,this.reserved=void 0,i)for(var a=Object.keys(i),h=0;h<a.length;++h)"number"==typeof i[a[h]]&&(this.valuesById[this.values[a[h]]=i[a[h]]]=a[h])}o.fromJSON=function(t,i){var e=new o(t,i.values,i.options,i.comment,i.comments);return e.reserved=i.reserved,e},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",i?this.comment:void 0,"comments",i?this.comments:void 0])},o.prototype.add=function(t,i,e,s){if(!r.isString(t))throw TypeError("name must be a string");if(!r.isInteger(i))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(i))throw Error("id "+i+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[i]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+i+" in "+this);this.values[t]=i}else this.valuesById[this.values[t]=i]=t;return s&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[t]=s||null),this.comments[t]=e||null,this},o.prototype.remove=function(t){if(!r.isString(t))throw TypeError("name must be a string");var i=this.values[t];if(null==i)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[i],delete this.values[t],delete this.comments[t],this.valuesOptions&&delete this.valuesOptions[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},3548:(t,i,e)=>{"use strict";t.exports=c;var s=e(3243);((c.prototype=Object.create(s.prototype)).constructor=c).className="Field";var n,r=e(7025),o=e(7063),a=e(9935),h=/^required|optional|repeated$/;function c(t,i,e,n,r,c,d){if(a.isObject(n)?(d=r,c=n,n=r=void 0):a.isObject(r)&&(d=c,c=r,r=void 0),s.call(this,t,c),!a.isInteger(i)||i<0)throw TypeError("id must be a non-negative integer");if(!a.isString(e))throw TypeError("type must be a string");if(void 0!==n&&!h.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==r&&!a.isString(r))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=e,this.id=i,this.extend=r||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[e],this.bytes="bytes"===e,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.it=null,this.comment=d}c.fromJSON=function(t,i){return new c(t,i.id,i.type,i.rule,i.extend,i.options,i.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this.it&&(this.it=!1!==this.getOption("packed")),this.it}}),c.prototype.setOption=function(t,i,e){return"packed"===t&&(this.it=null),s.prototype.setOption.call(this,t,i,e)},c.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof r&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof r)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),s.prototype.resolve.call(this)},c.d=function(t,i,e,s){return"function"==typeof i?i=a.decorateType(i).name:i&&"object"==typeof i&&(i=a.decorateEnum(i).name),function(n,r){a.decorateType(n.constructor).add(new c(r,t,i,e,{default:s}))}},c.et=function(t){n=t}},8836:(t,i,e)=>{"use strict";var s=t.exports=e(9482);s.build="light",s.load=function(t,i,e){return"function"==typeof i?(e=i,i=new s.Root):i||(i=new s.Root),i.load(t,e)},s.loadSync=function(t,i){return i||(i=new s.Root),i.loadSync(t)},s.encoder=e(4928),s.decoder=e(5305),s.verifier=e(4497),s.converter=e(3996),s.ReflectionObject=e(3243),s.Namespace=e(9313),s.Root=e(9424),s.Enum=e(7025),s.Type=e(7645),s.Field=e(3548),s.OneOf=e(7598),s.MapField=e(6039),s.Service=e(7513),s.Method=e(4429),s.Message=e(8368),s.wrappers=e(1667),s.types=e(7063),s.util=e(9935),s.ReflectionObject.et(s.Root),s.Namespace.et(s.Type,s.Service,s.Enum),s.Root.et(s.Type),s.Field.et(s.Type)},9482:(t,i,e)=>{"use strict";var s=i;function n(){s.util.et(),s.Writer.et(s.BufferWriter),s.Reader.et(s.BufferReader)}s.build="minimal",s.Writer=e(1173),s.BufferWriter=e(3155),s.Reader=e(1408),s.BufferReader=e(593),s.util=e(9693),s.rpc=e(5994),s.roots=e(5054),s.configure=n,n()},6039:(t,i,e)=>{"use strict";t.exports=o;var s=e(3548);((o.prototype=Object.create(s.prototype)).constructor=o).className="MapField";var n=e(7063),r=e(9935);function o(t,i,e,n,o,a){if(s.call(this,t,i,n,void 0,void 0,o,a),!r.isString(e))throw TypeError("keyType must be a string");this.keyType=e,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,i){return new o(t,i.id,i.keyType,i.type,i.options,i.comment)},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},o.d=function(t,i,e){return"function"==typeof e?e=r.decorateType(e).name:e&&"object"==typeof e&&(e=r.decorateEnum(e).name),function(s,n){r.decorateType(s.constructor).add(new o(n,t,i,e))}}},8368:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)this[i[e]]=t[i[e]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,i){return this.$type.encode(t,i)},n.encodeDelimited=function(t,i){return this.$type.encodeDelimited(t,i)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,i){return this.$type.toObject(t,i)},n.prototype.toJSON=function(){return this.$type.toObject(this,s.toJSONOptions)}},4429:(t,i,e)=>{"use strict";t.exports=r;var s=e(3243);((r.prototype=Object.create(s.prototype)).constructor=r).className="Method";var n=e(9935);function r(t,i,e,r,o,a,h,c,d){if(n.isObject(o)?(h=o,o=a=void 0):n.isObject(a)&&(h=a,a=void 0),void 0!==i&&!n.isString(i))throw TypeError("type must be a string");if(!n.isString(e))throw TypeError("requestType must be a string");if(!n.isString(r))throw TypeError("responseType must be a string");s.call(this,t,h),this.type=i||"rpc",this.requestType=e,this.requestStream=!!o||void 0,this.responseType=r,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=d}r.fromJSON=function(t,i){return new r(t,i.type,i.requestType,i.responseType,i.requestStream,i.responseStream,i.options,i.comment,i.parsedOptions)},r.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",i?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),s.prototype.resolve.call(this))}},9313:(t,i,e)=>{"use strict";t.exports=l;var s=e(3243);((l.prototype=Object.create(s.prototype)).constructor=l).className="Namespace";var n,r,o,a=e(3548),h=e(9935),c=e(7598);function d(t,i){if(t&&t.length){for(var e={},s=0;s<t.length;++s)e[t[s].name]=t[s].toJSON(i);return e}}function l(t,i){s.call(this,t,i),this.nested=void 0,this.st=null}function u(t){return t.st=null,t}l.fromJSON=function(t,i){return new l(t,i.options).addJSON(i.nested)},l.arrayToJSON=d,l.isReservedId=function(t,i){if(t)for(var e=0;e<t.length;++e)if("string"!=typeof t[e]&&t[e][0]<=i&&t[e][1]>i)return!0;return!1},l.isReservedName=function(t,i){if(t)for(var e=0;e<t.length;++e)if(t[e]===i)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this.st||(this.st=h.toArray(this.nested))}}),l.prototype.toJSON=function(t){return h.toObject(["options",this.options,"nested",d(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var i,e=Object.keys(t),s=0;s<e.length;++s)i=t[e[s]],this.add((void 0!==i.fields?n.fromJSON:void 0!==i.values?o.fromJSON:void 0!==i.methods?r.fromJSON:void 0!==i.id?a.fromJSON:l.fromJSON)(e[s],i));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof a&&void 0!==t.extend||t instanceof n||t instanceof c||t instanceof o||t instanceof r||t instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var i=this.get(t.name);if(i){if(!(i instanceof l&&t instanceof l)||i instanceof n||i instanceof r)throw Error("duplicate name '"+t.name+"' in "+this);for(var e=i.nestedArray,s=0;s<e.length;++s)t.add(e[s]);this.remove(i),this.nested||(this.nested={}),t.setOptions(i.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),u(this)},l.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),u(this)},l.prototype.define=function(t,i){if(h.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var e=this;t.length>0;){var s=t.shift();if(e.nested&&e.nested[s]){if(!((e=e.nested[s])instanceof l))throw Error("path conflicts with non-namespace objects")}else e.add(e=new l(s))}return i&&e.addJSON(i),e},l.prototype.resolveAll=function(){for(var t=this.nestedArray,i=0;i<t.length;)t[i]instanceof l?t[i++].resolveAll():t[i++].resolve();return this.resolve()},l.prototype.lookup=function(t,i,e){if("boolean"==typeof i?(e=i,i=void 0):i&&!Array.isArray(i)&&(i=[i]),h.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),i);var s=this.get(t[0]);if(s){if(1===t.length){if(!i||i.indexOf(s.constructor)>-1)return s}else if(s instanceof l&&(s=s.lookup(t.slice(1),i,!0)))return s}else for(var n=0;n<this.nestedArray.length;++n)if(this.st[n]instanceof l&&(s=this.st[n].lookup(t,i,!0)))return s;return null===this.parent||e?null:this.parent.lookup(t,i)},l.prototype.lookupType=function(t){var i=this.lookup(t,[n]);if(!i)throw Error("no such type: "+t);return i},l.prototype.lookupEnum=function(t){var i=this.lookup(t,[o]);if(!i)throw Error("no such Enum '"+t+"' in "+this);return i},l.prototype.lookupTypeOrEnum=function(t){var i=this.lookup(t,[n,o]);if(!i)throw Error("no such Type or Enum '"+t+"' in "+this);return i},l.prototype.lookupService=function(t){var i=this.lookup(t,[r]);if(!i)throw Error("no such Service '"+t+"' in "+this);return i},l.et=function(t,i,e){n=t,r=i,o=e}},3243:(t,i,e)=>{"use strict";t.exports=r,r.className="ReflectionObject";var s,n=e(9935);function r(t,i){if(!n.isString(t))throw TypeError("name must be a string");if(i&&!n.isObject(i))throw TypeError("options must be an object");this.options=i,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(r.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],i=this.parent;i;)t.unshift(i.name),i=i.parent;return t.join(".")}}}),r.prototype.toJSON=function(){throw Error()},r.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var i=t.root;i instanceof s&&i.nt(this)},r.prototype.onRemove=function(t){var i=t.root;i instanceof s&&i.rt(this),this.parent=null,this.resolved=!1},r.prototype.resolve=function(){return this.resolved||this.root instanceof s&&(this.resolved=!0),this},r.prototype.getOption=function(t){if(this.options)return this.options[t]},r.prototype.setOption=function(t,i,e){return e&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=i),this},r.prototype.setParsedOption=function(t,i,e){this.parsedOptions||(this.parsedOptions=[]);var s=this.parsedOptions;if(e){var r=s.find((function(i){return Object.prototype.hasOwnProperty.call(i,t)}));if(r){var o=r[t];n.setProperty(o,e,i)}else(r={})[t]=n.setProperty({},e,i),s.push(r)}else{var a={};a[t]=i,s.push(a)}return this},r.prototype.setOptions=function(t,i){if(t)for(var e=Object.keys(t),s=0;s<e.length;++s)this.setOption(e[s],t[e[s]],i);return this},r.prototype.toString=function(){var t=this.constructor.className,i=this.fullName;return i.length?t+" "+i:t},r.et=function(t){s=t}},7598:(t,i,e)=>{"use strict";t.exports=o;var s=e(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="OneOf";var n=e(3548),r=e(9935);function o(t,i,e,n){if(Array.isArray(i)||(e=i,i=void 0),s.call(this,t,e),void 0!==i&&!Array.isArray(i))throw TypeError("fieldNames must be an Array");this.oneof=i||[],this.fieldsArray=[],this.comment=n}function a(t){if(t.parent)for(var i=0;i<t.fieldsArray.length;++i)t.fieldsArray[i].parent||t.parent.add(t.fieldsArray[i])}o.fromJSON=function(t,i){return new o(t,i.oneof,i.options,i.comment)},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"oneof",this.oneof,"comment",i?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,a(this),this},o.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var i=this.fieldsArray.indexOf(t);if(i<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(i,1),(i=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(i,1),t.partOf=null,this},o.prototype.onAdd=function(t){s.prototype.onAdd.call(this,t);for(var i=0;i<this.oneof.length;++i){var e=t.get(this.oneof[i]);e&&!e.partOf&&(e.partOf=this,this.fieldsArray.push(e))}a(this)},o.prototype.onRemove=function(t){for(var i,e=0;e<this.fieldsArray.length;++e)(i=this.fieldsArray[e]).parent&&i.parent.remove(i);s.prototype.onRemove.call(this,t)},o.d=function(){for(var t=new Array(arguments.length),i=0;i<arguments.length;)t[i]=arguments[i++];return function(i,e){r.decorateType(i.constructor).add(new o(e,t)),Object.defineProperty(i,e,{get:r.oneOfGetter(t),set:r.oneOfSetter(t)})}}},1408:(t,i,e)=>{"use strict";t.exports=h;var s,n=e(9693),r=n.LongBits,o=n.utf8;function a(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function h(t){this.buf=t,this.pos=0,this.len=t.length}var c,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new h(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new h(t);throw Error("illegal buffer")},l=function(){return n.Buffer?function(t){return(h.create=function(t){return n.Buffer.isBuffer(t)?new s(t):d(t)})(t)}:d};function u(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}h.create=l(),h.prototype.ot=n.Array.prototype.subarray||n.Array.prototype.slice,h.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},h.prototype.bool=function(){return 0!==this.uint32()},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},h.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},h.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw a(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(i,e);if(i===e){var s=n.Buffer;return s?s.alloc(0):new this.buf.constructor(0)}return this.ot.call(this.buf,i,e)},h.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},h.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},h.et=function(t){s=t,h.create=l(),s.et();var i=n.Long?"toLong":"toNumber";n.merge(h.prototype,{int64:function(){return u.call(this)[i](!1)},uint64:function(){return u.call(this)[i](!0)},sint64:function(){return u.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},593:(t,i,e)=>{"use strict";t.exports=r;var s=e(1408);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(t){s.call(this,t)}r.et=function(){n.Buffer&&(r.prototype.ot=n.Buffer.prototype.slice)},r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},r.et()},9424:(t,i,e)=>{"use strict";t.exports=l;var s=e(9313);((l.prototype=Object.create(s.prototype)).constructor=l).className="Root";var n,r,o,a=e(3548),h=e(7025),c=e(7598),d=e(9935);function l(t){s.call(this,"",t),this.deferred=[],this.files=[]}function u(){}l.fromJSON=function(t,i){return i||(i=new l),t.options&&i.setOptions(t.options),i.addJSON(t.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function t(i,e,s){"function"==typeof e&&(s=e,e=void 0);var n=this;if(!s)return d.asPromise(t,n,i,e);var a=s===u;function h(t,i){if(s){var e=s;if(s=null,a)throw t;e(t,i)}}function c(t){var i=t.lastIndexOf("google/protobuf/");if(i>-1){var e=t.substring(i);if(e in o)return e}return null}function l(t,i){try{if(d.isString(i)&&"{"===i.charAt(0)&&(i=JSON.parse(i)),d.isString(i)){r.filename=t;var s,o=r(i,n,e),l=0;if(o.imports)for(;l<o.imports.length;++l)(s=c(o.imports[l])||n.resolvePath(t,o.imports[l]))&&p(s);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(s=c(o.weakImports[l])||n.resolvePath(t,o.weakImports[l]))&&p(s,!0)}else n.setOptions(i.options).addJSON(i.nested)}catch(t){h(t)}a||f||h(null,n)}function p(t,i){if(t=c(t)||t,!(n.files.indexOf(t)>-1))if(n.files.push(t),t in o)a?l(t,o[t]):(++f,setTimeout((function(){--f,l(t,o[t])})));else if(a){var e;try{e=d.fs.readFileSync(t).toString("utf8")}catch(t){return void(i||h(t))}l(t,e)}else++f,n.fetch(t,(function(e,r){--f,s&&(e?i?f||h(null,n):h(e):l(t,r))}))}var f=0;d.isString(i)&&(i=[i]);for(var m,g=0;g<i.length;++g)(m=n.resolvePath("",i[g]))&&p(m);if(a)return n;f||h(null,n)},l.prototype.loadSync=function(t,i){if(!d.isNode)throw Error("not supported");return this.load(t,i,u)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return s.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(t,i){var e=i.parent.lookup(i.extend);if(e){var s=new a(i.fullName,i.id,i.type,i.rule,void 0,i.options);return e.get(s.name)||(s.declaringField=i,i.extensionField=s,e.add(s)),!0}return!1}l.prototype.nt=function(t){if(t instanceof a)void 0===t.extend||t.extensionField||f(0,t)||this.deferred.push(t);else if(t instanceof h)p.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof c)){if(t instanceof n)for(var i=0;i<this.deferred.length;)f(0,this.deferred[i])?this.deferred.splice(i,1):++i;for(var e=0;e<t.nestedArray.length;++e)this.nt(t.st[e]);p.test(t.name)&&(t.parent[t.name]=t)}},l.prototype.rt=function(t){if(t instanceof a){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var i=this.deferred.indexOf(t);i>-1&&this.deferred.splice(i,1)}}else if(t instanceof h)p.test(t.name)&&delete t.parent[t.name];else if(t instanceof s){for(var e=0;e<t.nestedArray.length;++e)this.rt(t.st[e]);p.test(t.name)&&delete t.parent[t.name]}},l.et=function(t,i,e){n=t,r=i,o=e}},5054:t=>{"use strict";t.exports={}},5994:(t,i,e)=>{"use strict";i.Service=e(7948)},7948:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,o){if(!r)throw TypeError("request must be specified");var a=this;if(!o)return s.asPromise(t,a,i,e,n,r);if(a.rpcImpl)try{return a.rpcImpl(i,e[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(t,e){if(t)return a.emit("error",t,i),o(t);if(null!==e){if(!(e instanceof n))try{e=n[a.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return a.emit("error",t,i),o(t)}return a.emit("data",e,i),o(null,e)}a.end(!0)}))}catch(t){return a.emit("error",t,i),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:(t,i,e)=>{"use strict";t.exports=a;var s=e(9313);((a.prototype=Object.create(s.prototype)).constructor=a).className="Service";var n=e(4429),r=e(9935),o=e(5994);function a(t,i){s.call(this,t,i),this.methods={},this.ht=null}function h(t){return t.ht=null,t}a.fromJSON=function(t,i){var e=new a(t,i.options);if(i.methods)for(var s=Object.keys(i.methods),r=0;r<s.length;++r)e.add(n.fromJSON(s[r],i.methods[s[r]]));return i.nested&&e.addJSON(i.nested),e.comment=i.comment,e},a.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return r.toObject(["options",i&&i.options||void 0,"methods",s.arrayToJSON(this.methodsArray,t)||{},"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this.ht||(this.ht=r.toArray(this.methods))}}),a.prototype.get=function(t){return this.methods[t]||s.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,i=0;i<t.length;++i)t[i].resolve();return s.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?(this.methods[t.name]=t,t.parent=this,h(this)):s.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,h(this)}return s.prototype.remove.call(this,t)},a.prototype.create=function(t,i,e){for(var s,n=new o.Service(t,i,e),a=0;a<this.methodsArray.length;++a){var h=r.lcFirst((s=this.ht[a]).resolve().name).replace(/[^$\w_]/g,"");n[h]=r.codegen(["r","c"],r.isReserved(h)?h+"_":h)("return this.rpcCall(m,q,s,r,c)")({m:s,q:s.resolvedRequestType.ctor,s:s.resolvedResponseType.ctor})}return n}},7645:(t,i,e)=>{"use strict";t.exports=y;var s=e(9313);((y.prototype=Object.create(s.prototype)).constructor=y).className="Type";var n=e(7025),r=e(7598),o=e(3548),a=e(6039),h=e(7513),c=e(8368),d=e(1408),l=e(1173),u=e(9935),p=e(4928),f=e(5305),m=e(4497),g=e(3996),v=e(1667);function y(t,i){s.call(this,t,i),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.dt=null,this.tt=null,this.lt=null,this.ft=null}function b(t){return t.dt=t.tt=t.lt=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this.dt)return this.dt;this.dt={};for(var t=Object.keys(this.fields),i=0;i<t.length;++i){var e=this.fields[t[i]],s=e.id;if(this.dt[s])throw Error("duplicate id "+s+" in "+this);this.dt[s]=e}return this.dt}},fieldsArray:{get:function(){return this.tt||(this.tt=u.toArray(this.fields))}},oneofsArray:{get:function(){return this.lt||(this.lt=u.toArray(this.oneofs))}},ctor:{get:function(){return this.ft||(this.ctor=y.generateConstructor(this)())},set:function(t){var i=t.prototype;i instanceof c||((t.prototype=new c).constructor=t,u.merge(t.prototype,i)),t.$type=t.prototype.$type=this,u.merge(t,c,!0),this.ft=t;for(var e=0;e<this.fieldsArray.length;++e)this.tt[e].resolve();var s={};for(e=0;e<this.oneofsArray.length;++e)s[this.lt[e].resolve().name]={get:u.oneOfGetter(this.lt[e].oneof),set:u.oneOfSetter(this.lt[e].oneof)};e&&Object.defineProperties(t.prototype,s)}}}),y.generateConstructor=function(t){for(var i,e=u.codegen(["p"],t.name),s=0;s<t.fieldsArray.length;++s)(i=t.tt[s]).map?e("this%s={}",u.safeProp(i.name)):i.repeated&&e("this%s=[]",u.safeProp(i.name));return e("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(t,i){var e=new y(t,i.options);e.extensions=i.extensions,e.reserved=i.reserved;for(var c=Object.keys(i.fields),d=0;d<c.length;++d)e.add((void 0!==i.fields[c[d]].keyType?a.fromJSON:o.fromJSON)(c[d],i.fields[c[d]]));if(i.oneofs)for(c=Object.keys(i.oneofs),d=0;d<c.length;++d)e.add(r.fromJSON(c[d],i.oneofs[c[d]]));if(i.nested)for(c=Object.keys(i.nested),d=0;d<c.length;++d){var l=i.nested[c[d]];e.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?y.fromJSON:void 0!==l.values?n.fromJSON:void 0!==l.methods?h.fromJSON:s.fromJSON)(c[d],l))}return i.extensions&&i.extensions.length&&(e.extensions=i.extensions),i.reserved&&i.reserved.length&&(e.reserved=i.reserved),i.group&&(e.group=!0),i.comment&&(e.comment=i.comment),e},y.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return u.toObject(["options",i&&i.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,t),"fields",s.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},y.prototype.resolveAll=function(){for(var t=this.fieldsArray,i=0;i<t.length;)t[i++].resolve();var e=this.oneofsArray;for(i=0;i<e.length;)e[i++].resolve();return s.prototype.resolveAll.call(this)},y.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},y.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&void 0===t.extend){if(this.dt?this.dt[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),b(this)}return t instanceof r?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),b(this)):s.prototype.add.call(this,t)},y.prototype.remove=function(t){if(t instanceof o&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),b(this)}if(t instanceof r){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),b(this)}return s.prototype.remove.call(this,t)},y.prototype.isReservedId=function(t){return s.isReservedId(this.reserved,t)},y.prototype.isReservedName=function(t){return s.isReservedName(this.reserved,t)},y.prototype.create=function(t){return new this.ctor(t)},y.prototype.setup=function(){for(var t=this.fullName,i=[],e=0;e<this.fieldsArray.length;++e)i.push(this.tt[e].resolve().resolvedType);this.encode=p(this)({Writer:l,types:i,util:u}),this.decode=f(this)({Reader:d,types:i,util:u}),this.verify=m(this)({types:i,util:u}),this.fromObject=g.fromObject(this)({types:i,util:u}),this.toObject=g.toObject(this)({types:i,util:u});var s=v[t];if(s){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=s.fromObject.bind(n),n.toObject=this.toObject,this.toObject=s.toObject.bind(n)}return this},y.prototype.encode=function(t,i){return this.setup().encode(t,i)},y.prototype.encodeDelimited=function(t,i){return this.encode(t,i&&i.len?i.fork():i).ldelim()},y.prototype.decode=function(t,i){return this.setup().decode(t,i)},y.prototype.decodeDelimited=function(t){return t instanceof d||(t=d.create(t)),this.decode(t,t.uint32())},y.prototype.verify=function(t){return this.setup().verify(t)},y.prototype.fromObject=function(t){return this.setup().fromObject(t)},y.prototype.toObject=function(t,i){return this.setup().toObject(t,i)},y.d=function(t){return function(i){u.decorateType(i,t)}}},7063:(t,i,e)=>{"use strict";var s=i,n=e(9935),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(t,i){var e=0,s={};for(i|=0;e<t.length;)s[r[e+i]]=t[e++];return s}s.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),s.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),s.long=o([0,0,0,1,1],7),s.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),s.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:(t,i,e)=>{"use strict";var s,n,r=t.exports=e(9693),o=e(5054);r.codegen=e(5124),r.fetch=e(9054),r.path=e(8626),r.fs=r.inquire("fs"),r.toArray=function(t){if(t){for(var i=Object.keys(t),e=new Array(i.length),s=0;s<i.length;)e[s]=t[i[s++]];return e}return[]},r.toObject=function(t){for(var i={},e=0;e<t.length;){var s=t[e++],n=t[e++];void 0!==n&&(i[s]=n)}return i};var a=/\\/g,h=/"/g;r.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},r.safeProp=function(t){return!/^[$\w_]+$/.test(t)||r.isReserved(t)?'["'+t.replace(a,"\\\\").replace(h,'\\"')+'"]':"."+t},r.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var c=/_([a-z])/g;r.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(c,(function(t,i){return i.toUpperCase()}))},r.compareFieldsById=function(t,i){return t.id-i.id},r.decorateType=function(t,i){if(t.$type)return i&&t.$type.name!==i&&(r.decorateRoot.remove(t.$type),t.$type.name=i,r.decorateRoot.add(t.$type)),t.$type;s||(s=e(7645));var n=new s(i||t.name);return r.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var d=0;r.decorateEnum=function(t){if(t.$type)return t.$type;n||(n=e(7025));var i=new n("Enum"+d++,t);return r.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i},r.setProperty=function(t,i,e){if("object"!=typeof t)throw TypeError("dst must be an object");if(!i)throw TypeError("path must be specified");return function t(i,e,s){var n=e.shift();if("__proto__"===n||"prototype"===n)return i;if(e.length>0)i[n]=t(i[n]||{},e,s);else{var r=i[n];r&&(s=[].concat(r).concat(s)),i[n]=s}return i}(t,i=i.split("."),e)},Object.defineProperty(r,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e(9424)))}})},1945:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?r:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},9693:function(t,i,e){"use strict";var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return i.prototype=Object.create(Error.prototype,{constructor:{value:i,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),i}s.asPromise=e(4537),s.base64=e(7419),s.EventEmitter=e(9211),s.float=e(945),s.inquire=e(7199),s.utf8=e(4997),s.pool=e(6662),s.LongBits=e(1945),s.isNode=Boolean(void 0!==e.g&&e.g&&e.g.process&&e.g.process.versions&&e.g.process.versions.node),s.global=s.isNode&&e.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.vt=null,s.gt=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.gt(t):new s.Array(t):s.Buffer?s.vt(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.et=function(){var t=s.Buffer;t?(s.vt=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.gt=t.allocUnsafe||function(i){return new t(i)}):s.vt=s.gt=null}},4497:(t,i,e)=>{"use strict";t.exports=function(t){var i=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),e=t.oneofsArray,s={};e.length&&i("var p={}");for(var h=0;h<t.fieldsArray.length;++h){var c=t.tt[h].resolve(),d="m"+n.safeProp(c.name);if(c.optional&&i("if(%s!=null&&m.hasOwnProperty(%j)){",d,c.name),c.map)i("if(!util.isObject(%s))",d)("return%j",r(c,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),a(i,c,"k[i]"),o(i,c,h,d+"[k[i]]")("}");else if(c.repeated)i("if(!Array.isArray(%s))",d)("return%j",r(c,"array"))("for(var i=0;i<%s.length;++i){",d),o(i,c,h,d+"[i]")("}");else{if(c.partOf){var l=n.safeProp(c.partOf.name);1===s[c.partOf.name]&&i("if(p%s===1)",l)("return%j",c.partOf.name+": multiple values"),s[c.partOf.name]=1,i("p%s=1",l)}o(i,c,h,d)}c.optional&&i("}")}return i("return null")};var s=e(7025),n=e(9935);function r(t,i){return t.name+": "+i+(t.repeated&&"array"!==i?"[]":t.map&&"object"!==i?"{k:"+t.keyType+"}":"")+" expected"}function o(t,i,e,n){if(i.resolvedType)if(i.resolvedType instanceof s){t("switch(%s){",n)("default:")("return%j",r(i,"enum value"));for(var o=Object.keys(i.resolvedType.values),a=0;a<o.length;++a)t("case %i:",i.resolvedType.values[o[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",e,n)("if(e)")("return%j+e",i.name+".")("}");else switch(i.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",r(i,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",r(i,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",r(i,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",r(i,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",r(i,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",r(i,"buffer"))}return t}function a(t,i,e){switch(i.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",e)("return%j",r(i,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",e)("return%j",r(i,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",e)("return%j",r(i,"boolean key"))}return t}},1667:(t,i,e)=>{"use strict";var s=i,n=e(8368);s[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var i=t["@type"].substring(t["@type"].lastIndexOf("/")+1),e=this.lookup(i);if(e){var s="."===t["@type"].charAt(0)?t["@type"].slice(1):t["@type"];return-1===s.indexOf("/")&&(s="/"+s),this.create({type_url:s,value:e.encode(e.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,i){var e="",s="";if(i&&i.json&&t.type_url&&t.value){s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),e=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var r=this.lookup(s);r&&(t=r.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var o=t.$type.toObject(t,i);return""===e&&(e="type.googleapis.com/"),s=e+("."===t.$type.fullName[0]?t.$type.fullName.slice(1):t.$type.fullName),o["@type"]=s,o}return this.toObject(t,i)}}},1173:(t,i,e)=>{"use strict";t.exports=l;var s,n=e(9693),r=n.LongBits,o=n.base64,a=n.utf8;function h(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function d(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new h(c,0,0),this.tail=this.head,this.states=null}var u=function(){return n.Buffer?function(){return(l.create=function(){return new s})()}:function(){return new l}};function p(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function m(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function g(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}l.create=u(),l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype.bt=function(t,i,e){return this.tail=this.tail.next=new h(t,i,e),this.len+=i,this},f.prototype=Object.create(h.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.bt(m,10,r.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var i=r.from(t);return this.bt(m,i.length(),i)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.bt(m,i.length(),i)},l.prototype.bool=function(t){return this.bt(p,1,t?1:0)},l.prototype.fixed32=function(t){return this.bt(g,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var i=r.from(t);return this.bt(g,4,i.lo).bt(g,4,i.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this.bt(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.bt(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};l.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.bt(p,1,0);if(n.isString(t)){var e=l.alloc(i=o.length(t));o.decode(t,e,0),t=e}return this.uint32(i).bt(v,i,t)},l.prototype.string=function(t){var i=a.length(t);return i?this.uint32(i).bt(a.write,i,t):this.bt(p,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new h(c,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new h(c,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},l.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},l.et=function(t){s=t,l.create=u(),s.et()}},3155:(t,i,e)=>{"use strict";t.exports=r;var s=e(1173);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(){s.call(this)}function o(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write?i.utf8Write(t,e):i.write(t,e)}r.et=function(){r.alloc=n.gt,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]}},r.prototype.bytes=function(t){n.isString(t)&&(t=n.vt(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.bt(r.writeBytesBuffer,i,t),this},r.prototype.string=function(t){var i=n.Buffer.byteLength(t);return this.uint32(i),i&&this.bt(o,i,t),this},r.et()},8660:(t,i,e)=>{var s;!function(t){!function(i){var s="object"==typeof e.g?e.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=r(t);function r(t,i){return function(e,s){"function"!=typeof t[e]&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:s}),i&&i(e,s)}}void 0===s.Reflect?s.Reflect=t:n=r(s.Reflect,n),function(t){var i=Object.prototype.hasOwnProperty,e="function"==typeof Symbol,s=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",n=e&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,o={__proto__:[]}instanceof Array,a=!r&&!o,h={create:r?function(){return st(Object.create(null))}:o?function(){return st({__proto__:null})}:function(){return st({})},has:a?function(t,e){return i.call(t,e)}:function(t,i){return i in t},get:a?function(t,e){return i.call(t,e)?t[e]:void 0}:function(t,i){return t[i]}},c=Object.getPrototypeOf(Function),d="object"==typeof process&&{DEBUG_MODE:!1}&&"true"==={DEBUG_MODE:!1}.REFLECT_METADATA_USE_MAP_POLYFILL,l=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,u=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?it():Set,p=new(d||"function"!=typeof WeakMap?et():WeakMap);function f(t,i,e,s){if(O(e)){if(!H(t))throw new TypeError;if(!W(i))throw new TypeError;return A(t,i)}if(!H(t))throw new TypeError;if(!F(i))throw new TypeError;if(!F(s)&&!O(s)&&!D(s))throw new TypeError;return D(s)&&(s=void 0),x(t,i,e=q(e),s)}function m(t,i){function e(e,s){if(!F(e))throw new TypeError;if(!O(s)&&!G(s))throw new TypeError;M(t,i,e,s)}return e}function g(t,i,e,s){if(!F(e))throw new TypeError;return O(s)||(s=q(s)),M(t,i,e,s)}function v(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),T(t,i,e)}function y(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),C(t,i,e)}function b(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),k(t,i,e)}function I(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),E(t,i,e)}function P(t,i){if(!F(t))throw new TypeError;return O(i)||(i=q(i)),L(t,i)}function w(t,i){if(!F(t))throw new TypeError;return O(i)||(i=q(i)),R(t,i)}function S(t,i,e){if(!F(i))throw new TypeError;O(e)||(e=q(e));var s=_(i,e,!1);if(O(s))return!1;if(!s.delete(t))return!1;if(s.size>0)return!0;var n=p.get(i);return n.delete(e),n.size>0||p.delete(i),!0}function A(t,i){for(var e=t.length-1;e>=0;--e){var s=(0,t[e])(i);if(!O(s)&&!D(s)){if(!W(s))throw new TypeError;i=s}}return i}function x(t,i,e,s){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(i,e,s);if(!O(r)&&!D(r)){if(!F(r))throw new TypeError;s=r}}return s}function _(t,i,e){var s=p.get(t);if(O(s)){if(!e)return;s=new l,p.set(t,s)}var n=s.get(i);if(O(n)){if(!e)return;n=new l,s.set(i,n)}return n}function T(t,i,e){if(C(t,i,e))return!0;var s=Z(i);return!D(s)&&T(t,s,e)}function C(t,i,e){var s=_(i,e,!1);return!O(s)&&j(s.has(t))}function k(t,i,e){if(C(t,i,e))return E(t,i,e);var s=Z(i);return D(s)?void 0:k(t,s,e)}function E(t,i,e){var s=_(i,e,!1);if(!O(s))return s.get(t)}function M(t,i,e,s){_(e,s,!0).set(t,i)}function L(t,i){var e=R(t,i),s=Z(t);if(null===s)return e;var n=L(s,i);if(n.length<=0)return e;if(e.length<=0)return n;for(var r=new u,o=[],a=0,h=e;a<h.length;a++){var c=h[a];r.has(c)||(r.add(c),o.push(c))}for(var d=0,l=n;d<l.length;d++){c=l[d];r.has(c)||(r.add(c),o.push(c))}return o}function R(t,i){var e=[],s=_(t,i,!1);if(O(s))return e;for(var n=Q(s.keys()),r=0;;){var o=Y(n);if(!o)return e.length=r,e;var a=J(o);try{e[r]=a}catch(t){try{K(n)}finally{throw t}}r++}}function B(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function O(t){return void 0===t}function D(t){return null===t}function N(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function $(t,i){switch(B(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var e=3===i?"string":5===i?"number":"default",n=X(t,s);if(void 0!==n){var r=n.call(t,e);if(F(r))throw new TypeError;return r}return V(t,"default"===e?"number":e)}function V(t,i){if("string"===i){var e=t.toString;if(z(e))if(!F(n=e.call(t)))return n;if(z(s=t.valueOf))if(!F(n=s.call(t)))return n}else{var s;if(z(s=t.valueOf))if(!F(n=s.call(t)))return n;var n,r=t.toString;if(z(r))if(!F(n=r.call(t)))return n}throw new TypeError}function j(t){return!!t}function U(t){return""+t}function q(t){var i=$(t,3);return N(i)?i:U(i)}function H(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function z(t){return"function"==typeof t}function W(t){return"function"==typeof t}function G(t){switch(B(t)){case 3:case 4:return!0;default:return!1}}function X(t,i){var e=t[i];if(null!=e){if(!z(e))throw new TypeError;return e}}function Q(t){var i=X(t,n);if(!z(i))throw new TypeError;var e=i.call(t);if(!F(e))throw new TypeError;return e}function J(t){return t.value}function Y(t){var i=t.next();return!i.done&&i}function K(t){var i=t.return;i&&i.call(t)}function Z(t){var i=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return i;if(i!==c)return i;var e=t.prototype,s=e&&Object.getPrototypeOf(e);if(null==s||s===Object.prototype)return i;var n=s.constructor;return"function"!=typeof n||n===t?i:n}function tt(){var t={},i=[],e=function(){function t(t,i,e){this.It=0,this.Pt=t,this.wt=i,this.At=e}return t.prototype["@@iterator"]=function(){return this},t.prototype[n]=function(){return this},t.prototype.next=function(){var t=this.It;if(t>=0&&t<this.Pt.length){var e=this.At(this.Pt[t],this.wt[t]);return t+1>=this.Pt.length?(this.It=-1,this.Pt=i,this.wt=i):this.It++,{value:e,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this.It>=0&&(this.It=-1,this.Pt=i,this.wt=i),t},t.prototype.return=function(t){return this.It>=0&&(this.It=-1,this.Pt=i,this.wt=i),{value:t,done:!0}},t}();return function(){function i(){this.Pt=[],this.wt=[],this.St=t,this._t=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this.Pt.length},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this.Tt(t,!1)>=0},i.prototype.get=function(t){var i=this.Tt(t,!1);return i>=0?this.wt[i]:void 0},i.prototype.set=function(t,i){var e=this.Tt(t,!0);return this.wt[e]=i,this},i.prototype.delete=function(i){var e=this.Tt(i,!1);if(e>=0){for(var s=this.Pt.length,n=e+1;n<s;n++)this.Pt[n-1]=this.Pt[n],this.wt[n-1]=this.wt[n];return this.Pt.length--,this.wt.length--,i===this.St&&(this.St=t,this._t=-2),!0}return!1},i.prototype.clear=function(){this.Pt.length=0,this.wt.length=0,this.St=t,this._t=-2},i.prototype.keys=function(){return new e(this.Pt,this.wt,s)},i.prototype.values=function(){return new e(this.Pt,this.wt,r)},i.prototype.entries=function(){return new e(this.Pt,this.wt,o)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[n]=function(){return this.entries()},i.prototype.Tt=function(t,i){return this.St!==t&&(this._t=this.Pt.indexOf(this.St=t)),this._t<0&&i&&(this._t=this.Pt.length,this.Pt.push(t),this.wt.push(void 0)),this._t},i}();function s(t,i){return t}function r(t,i){return i}function o(t,i){return[t,i]}}function it(){return function(){function t(){this.kt=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this.kt.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this.kt.has(t)},t.prototype.add=function(t){return this.kt.set(t,t),this},t.prototype.delete=function(t){return this.kt.delete(t)},t.prototype.clear=function(){this.kt.clear()},t.prototype.keys=function(){return this.kt.keys()},t.prototype.values=function(){return this.kt.values()},t.prototype.entries=function(){return this.kt.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[n]=function(){return this.keys()},t}()}function et(){var t=16,e=h.create(),s=n();return function(){function t(){this.Ct=n()}return t.prototype.has=function(t){var i=r(t,!1);return void 0!==i&&h.has(i,this.Ct)},t.prototype.get=function(t){var i=r(t,!1);return void 0!==i?h.get(i,this.Ct):void 0},t.prototype.set=function(t,i){return r(t,!0)[this.Ct]=i,this},t.prototype.delete=function(t){var i=r(t,!1);return void 0!==i&&delete i[this.Ct]},t.prototype.clear=function(){this.Ct=n()},t}();function n(){var t;do{t="@@WeakMap@@"+c()}while(h.has(e,t));return e[t]=!0,t}function r(t,e){if(!i.call(t,s)){if(!e)return;Object.defineProperty(t,s,{value:h.create()})}return t[s]}function o(t,i){for(var e=0;e<i;++e)t[e]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t)}function c(){var i=a(t);i[6]=79&i[6]|64,i[8]=191&i[8]|128;for(var e="",s=0;s<t;++s){var n=i[s];4!==s&&6!==s&&8!==s||(e+="-"),n<16&&(e+="0"),e+=n.toString(16).toLowerCase()}return e}}function st(t){return t.Et=void 0,delete t.Et,t}t("decorate",f),t("metadata",m),t("defineMetadata",g),t("hasMetadata",v),t("hasOwnMetadata",y),t("getMetadata",b),t("getOwnMetadata",I),t("getMetadataKeys",P),t("getOwnMetadataKeys",w),t("deleteMetadata",S)}(n)}()}(s||(s={}))},6515:(t,i,e)=>{"use strict";e.d(i,{X:()=>n});var s=e(655),n=function(t){function i(i){var e=t.call(this)||this;return e.Mt=i,e}return(0,s.ZT)(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.Lt=function(i){var e=t.prototype.Lt.call(this,i);return!e.closed&&i.next(this.Mt),e},i.prototype.getValue=function(){var t=this,i=t.hasError,e=t.thrownError,s=t.Mt;if(i)throw e;return this.Bt(),s},i.prototype.next=function(i){t.prototype.next.call(this,this.Mt=i)},i}(e(6716).x)},1480:(t,i,e)=>{"use strict";e.d(i,{y:()=>l});var s=e(5642),n=e(5720),r=e(6766),o=e(278);function a(t){return 0===t.length?o.y:1===t.length?t[0]:function(i){return t.reduce((function(t,i){return i(t)}),i)}}var h=e(3912),c=e(8474),d=e(8846),l=function(){function t(t){t&&(this.Lt=t)}return t.prototype.lift=function(i){var e=new t;return e.source=this,e.operator=i,e},t.prototype.subscribe=function(t,i,e){var r,o=this,a=(r=t)&&r instanceof s.Lv||function(t){return t&&(0,c.m)(t.next)&&(0,c.m)(t.error)&&(0,c.m)(t.complete)}(r)&&(0,n.Nn)(r)?t:new s.Hp(t,i,e);return(0,d.x)((function(){var t=o,i=t.operator,e=t.source;a.add(i?i.call(a,e):e?o.Lt(a):o.Rt(a))})),a},t.prototype.Rt=function(t){try{return this.Lt(t)}catch(i){t.error(i)}},t.prototype.forEach=function(t,i){var e=this;return new(i=u(i))((function(i,n){var r=new s.Hp({next:function(i){try{t(i)}catch(t){n(t),r.unsubscribe()}},error:n,complete:i});e.subscribe(r)}))},t.prototype.Lt=function(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)},t.prototype[r.L]=function(){return this},t.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return a(t)(this)},t.prototype.toPromise=function(t){var i=this;return new(t=u(t))((function(t,e){var s;i.subscribe((function(t){return s=t}),(function(t){return e(t)}),(function(){return t(s)}))}))},t.create=function(i){return new t(i)},t}();function u(t){var i;return null!==(i=null!=t?t:h.v.Promise)&&void 0!==i?i:Promise}},3:(t,i,e)=>{"use strict";e.d(i,{t:()=>o});var s=e(655),n=e(6716),r=e(4318),o=function(t){function i(i,e,s){void 0===i&&(i=1/0),void 0===e&&(e=1/0),void 0===s&&(s=r.l);var n=t.call(this)||this;return n.Ot=i,n.Dt=e,n.Nt=s,n.jt=[],n.Ut=!0,n.Ut=e===1/0,n.Ot=Math.max(1,i),n.Dt=Math.max(1,e),n}return(0,s.ZT)(i,t),i.prototype.next=function(i){var e=this,s=e.isStopped,n=e.jt,r=e.Ut,o=e.Nt,a=e.Dt;s||(n.push(i),!r&&n.push(o.now()+a)),this.$t(),t.prototype.next.call(this,i)},i.prototype.Lt=function(t){this.Bt(),this.$t();for(var i=this.Gt(t),e=this.Ut,s=this.jt.slice(),n=0;n<s.length&&!t.closed;n+=e?1:2)t.next(s[n]);return this.Wt(t),i},i.prototype.$t=function(){var t=this,i=t.Ot,e=t.Nt,s=t.jt,n=t.Ut,r=(n?1:2)*i;if(i<1/0&&r<s.length&&s.splice(0,s.length-r),!n){for(var o=e.now(),a=0,h=1;h<s.length&&s[h]<=o;h+=2)a=h;a&&s.splice(0,a+1)}},i}(n.x)},6716:(t,i,e)=>{"use strict";e.d(i,{x:()=>c});var s=e(655),n=e(1480),r=e(5720),o=(0,e(1819).d)((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),a=e(3699),h=e(8846),c=function(t){function i(){var i=t.call(this)||this;return i.closed=!1,i.currentObservers=null,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return(0,s.ZT)(i,t),i.prototype.lift=function(t){var i=new d(this,this);return i.operator=t,i},i.prototype.Bt=function(){if(this.closed)throw new o},i.prototype.next=function(t){var i=this;(0,h.x)((function(){var e,n;if(i.Bt(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var r=(0,s.XA)(i.currentObservers),o=r.next();!o.done;o=r.next()){o.value.next(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}}))},i.prototype.error=function(t){var i=this;(0,h.x)((function(){if(i.Bt(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var e=i.observers;e.length;)e.shift().error(t)}}))},i.prototype.complete=function(){var t=this;(0,h.x)((function(){if(t.Bt(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}}))},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),i.prototype.Rt=function(i){return this.Bt(),t.prototype.Rt.call(this,i)},i.prototype.Lt=function(t){return this.Bt(),this.Wt(t),this.Gt(t)},i.prototype.Gt=function(t){var i=this,e=this,s=e.hasError,n=e.isStopped,o=e.observers;return s||n?r.Lc:(this.currentObservers=null,o.push(t),new r.w0((function(){i.currentObservers=null,(0,a.P)(o,t)})))},i.prototype.Wt=function(t){var i=this,e=i.hasError,s=i.thrownError,n=i.isStopped;e?t.error(s):n&&t.complete()},i.prototype.asObservable=function(){var t=new n.y;return t.source=this,t},i.create=function(t,i){return new d(t,i)},i}(n.y),d=function(t){function i(i,e){var s=t.call(this)||this;return s.destination=i,s.source=e,s}return(0,s.ZT)(i,t),i.prototype.next=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.next)||void 0===e||e.call(i,t)},i.prototype.error=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.error)||void 0===e||e.call(i,t)},i.prototype.complete=function(){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===i||i.call(t)},i.prototype.Lt=function(t){var i,e;return null!==(e=null===(i=this.source)||void 0===i?void 0:i.subscribe(t))&&void 0!==e?e:r.Lc},i}(c)},5642:(t,i,e)=>{"use strict";e.d(i,{Hp:()=>v,Lv:()=>p});var s=e(655),n=e(8474),r=e(5720),o=e(3912),a=e(5);function h(){}var c=d("C",void 0,void 0);function d(t,i,e){return{kind:t,value:i,error:e}}var l=e(8380),u=e(8846),p=function(t){function i(i){var e=t.call(this)||this;return e.isStopped=!1,i?(e.destination=i,(0,r.Nn)(i)&&i.add(e)):e.destination=I,e}return(0,s.ZT)(i,t),i.create=function(t,i,e){return new v(t,i,e)},i.prototype.next=function(t){this.isStopped?b(function(t){return d("N",t,void 0)}(t),this):this.Xt(t)},i.prototype.error=function(t){this.isStopped?b(d("E",void 0,t),this):(this.isStopped=!0,this.Qt(t))},i.prototype.complete=function(){this.isStopped?b(c,this):(this.isStopped=!0,this.Jt())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype.Xt=function(t){this.destination.next(t)},i.prototype.Qt=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},i.prototype.Jt=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(r.w0),f=Function.prototype.bind;function m(t,i){return f.call(t,i)}var g=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var i=this.partialObserver;if(i.next)try{i.next(t)}catch(t){y(t)}},t.prototype.error=function(t){var i=this.partialObserver;if(i.error)try{i.error(t)}catch(t){y(t)}else y(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){y(t)}},t}(),v=function(t){function i(i,e,s){var r,a,h=t.call(this)||this;(0,n.m)(i)||!i?r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=s?s:void 0}:h&&o.v.useDeprecatedNextContext?((a=Object.create(i)).unsubscribe=function(){return h.unsubscribe()},r={next:i.next&&m(i.next,a),error:i.error&&m(i.error,a),complete:i.complete&&m(i.complete,a)}):r=i;return h.destination=new g(r),h}return(0,s.ZT)(i,t),i}(p);function y(t){o.v.useDeprecatedSynchronousErrorHandling?(0,u.O)(t):(0,a.h)(t)}function b(t,i){var e=o.v.onStoppedNotification;e&&l.z.setTimeout((function(){return e(t,i)}))}var I={closed:!0,next:h,error:function(t){throw t},complete:h}},5720:(t,i,e)=>{"use strict";e.d(i,{Lc:()=>h,w0:()=>a,Nn:()=>c});var s=e(655),n=e(8474),r=(0,e(1819).d)((function(t){return function(i){t(this),this.message=i?i.length+" errors occurred during unsubscription:\n"+i.map((function(t,i){return i+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=i}})),o=e(3699),a=function(){function t(t){this.initialTeardown=t,this.closed=!1,this.Yt=null,this.Kt=null}var i;return t.prototype.unsubscribe=function(){var t,i,e,o,a;if(!this.closed){this.closed=!0;var h=this.Yt;if(h)if(this.Yt=null,Array.isArray(h))try{for(var c=(0,s.XA)(h),l=c.next();!l.done;l=c.next()){l.value.remove(this)}}catch(i){t={error:i}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}else h.remove(this);var u=this.initialTeardown;if((0,n.m)(u))try{u()}catch(t){a=t instanceof r?t.errors:[t]}var p=this.Kt;if(p){this.Kt=null;try{for(var f=(0,s.XA)(p),m=f.next();!m.done;m=f.next()){var g=m.value;try{d(g)}catch(t){a=null!=a?a:[],t instanceof r?a=(0,s.ev)((0,s.ev)([],(0,s.CR)(a)),(0,s.CR)(t.errors)):a.push(t)}}}catch(t){e={error:t}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(e)throw e.error}}}if(a)throw new r(a)}},t.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)d(i);else{if(i instanceof t){if(i.closed||i.Zt(this))return;i.ii(this)}(this.Kt=null!==(e=this.Kt)&&void 0!==e?e:[]).push(i)}},t.prototype.Zt=function(t){var i=this.Yt;return i===t||Array.isArray(i)&&i.includes(t)},t.prototype.ii=function(t){var i=this.Yt;this.Yt=Array.isArray(i)?(i.push(t),i):i?[i,t]:t},t.prototype.ei=function(t){var i=this.Yt;i===t?this.Yt=null:Array.isArray(i)&&(0,o.P)(i,t)},t.prototype.remove=function(i){var e=this.Kt;e&&(0,o.P)(e,i),i instanceof t&&i.ei(this)},t.EMPTY=((i=new t).closed=!0,i),t}(),h=a.EMPTY;function c(t){return t instanceof a||t&&"closed"in t&&(0,n.m)(t.remove)&&(0,n.m)(t.add)&&(0,n.m)(t.unsubscribe)}function d(t){(0,n.m)(t)?t():t.unsubscribe()}},3912:(t,i,e)=>{"use strict";e.d(i,{v:()=>s});var s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1545:(t,i,e)=>{"use strict";e.d(i,{E:()=>s});var s=new(e(1480).y)((function(t){return t.complete()}))},7878:(t,i,e)=>{"use strict";e.d(i,{Xf:()=>m});var s=e(655),n=e(5685),r=e(3841),o=e(1480),a=e(1764),h=e(8430),c=e(8729),d=e(1837),l=e(8671),u=e(8474),p=e(5),f=e(6766);function m(t){if(t instanceof o.y)return t;if(null!=t){if((0,a.c)(t))return y=t,new o.y((function(t){var i=y[f.L]();if((0,u.m)(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,n.z)(t))return v=t,new o.y((function(t){for(var i=0;i<v.length&&!t.closed;i++)t.next(v[i]);t.complete()}));if((0,r.t)(t))return m=t,new o.y((function(t){m.then((function(i){t.closed||(t.next(i),t.complete())}),(function(i){return t.error(i)})).then(null,p.h)}));if((0,h.D)(t))return g(t);if((0,d.T)(t))return e=t,new o.y((function(t){var i,n;try{for(var r=(0,s.XA)(e),o=r.next();!o.done;o=r.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}t.complete()}));if((0,l.L)(t))return i=t,g((0,l.Q)(i))}var i,e,m,v,y;throw(0,c.z)(t)}function g(t){return new o.y((function(i){(function(t,i){var e,n,r,o;return(0,s.mG)(this,void 0,void 0,(function(){var a,h;return(0,s.Jh)(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),e=(0,s.KL)(t),c.label=1;case 1:return[4,e.next()];case 2:if((n=c.sent()).done)return[3,4];if(a=n.value,i.next(a),i.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return h=c.sent(),r={error:h},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}}))}))})(t,i).catch((function(t){return i.error(t)}))}))}},6196:(t,i,e)=>{"use strict";e.d(i,{H:()=>o});var s=e(1480),n=e(8843),r=e(4865);function o(t,i,e){void 0===t&&(t=0),void 0===e&&(e=n.P);var o=-1;return null!=i&&((0,r.K)(i)?e=i:o=i),new s.y((function(i){var s,n=(s=t)instanceof Date&&!isNaN(s)?+t-e.now():t;n<0&&(n=0);var r=0;return e.schedule((function(){i.closed||(i.next(r++),0<=o?this.schedule(void 0,o):i.complete())}),n)}))}},2566:(t,i,e)=>{"use strict";e.d(i,{x:()=>n});var s=e(655);function n(t,i,e,s,n){return new r(t,i,e,s,n)}var r=function(t){function i(i,e,s,n,r,o){var a=t.call(this,i)||this;return a.onFinalize=r,a.shouldUnsubscribe=o,a.Xt=e?function(t){try{e(t)}catch(t){i.error(t)}}:t.prototype.Xt,a.Qt=n?function(t){try{n(t)}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Qt,a.Jt=s?function(){try{s()}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Jt,a}return(0,s.ZT)(i,t),i.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var e=this.closed;t.prototype.unsubscribe.call(this),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}},i}(e(5642).Lv)},4975:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(6798),n=e(2566);function r(t,i){return(0,s.e)((function(e,s){var r=0;e.subscribe((0,n.x)(s,(function(e){return t.call(i,e,r++)&&s.next(e)})))}))}},5196:(t,i,e)=>{"use strict";e.d(i,{P:()=>d});var s=(0,e(1819).d)((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}})),n=e(4975),r=e(4727),o=e(6798),a=e(2566);function h(){return new s}var c=e(278);function d(t,i){var e=arguments.length>=2;return function(d){return d.pipe(t?(0,n.h)((function(i,e){return t(i,e,d)})):c.y,(0,r.q)(1),e?function(t){return(0,o.e)((function(i,e){var s=!1;i.subscribe((0,a.x)(e,(function(t){s=!0,e.next(t)}),(function(){s||e.next(t),e.complete()})))}))}(i):(void 0===(l=function(){return new s})&&(l=h),(0,o.e)((function(t,i){var e=!1;t.subscribe((0,a.x)(i,(function(t){e=!0,i.next(t)}),(function(){return e?i.complete():i.error(l())})))}))));var l}}},9127:(t,i,e)=>{"use strict";e.d(i,{U:()=>r});var s=e(6798),n=e(2566);function r(t,i){return(0,s.e)((function(e,s){var r=0;e.subscribe((0,n.x)(s,(function(e){s.next(t.call(i,e,r++))})))}))}},4978:(t,i,e)=>{"use strict";e.d(i,{w:()=>o});var s=e(7878),n=e(6798),r=e(2566);function o(t,i){return(0,n.e)((function(e,n){var o=null,a=0,h=!1,c=function(){return h&&!o&&n.complete()};e.subscribe((0,r.x)(n,(function(e){null==o||o.unsubscribe();var h=0,d=a++;(0,s.Xf)(t(e,d)).subscribe(o=(0,r.x)(n,(function(t){return n.next(i?i(e,t,d,h++):t)}),(function(){o=null,c()})))}),(function(){h=!0,c()})))}))}},4727:(t,i,e)=>{"use strict";e.d(i,{q:()=>o});var s=e(1545),n=e(6798),r=e(2566);function o(t){return t<=0?function(){return s.E}:(0,n.e)((function(i,e){var s=0;i.subscribe((0,r.x)(e,(function(i){++s<=t&&(e.next(i),t<=s&&e.complete())})))}))}},8843:(t,i,e)=>{"use strict";e.d(i,{P:()=>l,z:()=>d});var s=e(655),n=function(t){function i(i,e){return t.call(this)||this}return(0,s.ZT)(i,t),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),this},i}(e(5720).w0),r={setInterval:function(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var o=r.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,(0,s.ev)([t,i],(0,s.CR)(e))):setInterval.apply(void 0,(0,s.ev)([t,i],(0,s.CR)(e)))},clearInterval:function(t){var i=r.delegate;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},o=e(3699),a=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.scheduler=i,s.work=e,s.pending=!1,s}return(0,s.ZT)(i,t),i.prototype.schedule=function(t,i){var e;if(void 0===i&&(i=0),this.closed)return this;this.state=t;var s=this.id,n=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(n,s,i)),this.pending=!0,this.delay=i,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(n,this.id,i),this},i.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),r.setInterval(t.flush.bind(t,this),e)},i.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!=e&&this.delay===e&&!1===this.pending)return i;null!=i&&r.clearInterval(i)},i.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this.si(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype.si=function(t,i){var e,s=!1;try{this.work(t)}catch(t){s=!0,e=t||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),e},i.prototype.unsubscribe=function(){if(!this.closed){var i=this.id,e=this.scheduler,s=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.P)(s,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},i}(n),h=e(4318),c=function(){function t(i,e){void 0===e&&(e=t.now),this.schedulerActionCtor=i,this.now=e}return t.prototype.schedule=function(t,i,e){return void 0===i&&(i=0),new this.schedulerActionCtor(this,t).schedule(e,i)},t.now=h.l.now,t}(),d=new(function(t){function i(i,e){void 0===e&&(e=c.now);var s=t.call(this,i,e)||this;return s.actions=[],s.ni=!1,s}return(0,s.ZT)(i,t),i.prototype.flush=function(t){var i=this.actions;if(this.ni)i.push(t);else{var e;this.ni=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=i.shift());if(this.ni=!1,e){for(;t=i.shift();)t.unsubscribe();throw e}}},i}(c))(a),l=d},4318:(t,i,e)=>{"use strict";e.d(i,{l:()=>s});var s={now:function(){return(s.delegate||Date).now()},delegate:void 0}},8380:(t,i,e)=>{"use strict";e.d(i,{z:()=>n});var s=e(655),n={setTimeout:function(t,i){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var o=n.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,s.ev)([t,i],(0,s.CR)(e))):setTimeout.apply(void 0,(0,s.ev)([t,i],(0,s.CR)(e)))},clearTimeout:function(t){var i=n.delegate;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0}},9768:(t,i,e)=>{"use strict";e.d(i,{h:()=>s});var s="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6766:(t,i,e)=>{"use strict";e.d(i,{L:()=>s});var s="function"==typeof Symbol&&Symbol.observable||"@@observable"},2457:(t,i,e)=>{"use strict";e.d(i,{oi:()=>h,jO:()=>o,yG:()=>a});var s=e(8474),n=e(4865);function r(t){return t[t.length-1]}function o(t){return(0,s.m)(r(t))?t.pop():void 0}function a(t){return(0,n.K)(r(t))?t.pop():void 0}function h(t,i){return"number"==typeof r(t)?t.pop():i}},3699:(t,i,e)=>{"use strict";function s(t,i){if(t){var e=t.indexOf(i);0<=e&&t.splice(e,1)}}e.d(i,{P:()=>s})},1819:(t,i,e)=>{"use strict";function s(t){var i=t((function(t){Error.call(t),t.stack=(new Error).stack}));return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}e.d(i,{d:()=>s})},8846:(t,i,e)=>{"use strict";e.d(i,{O:()=>o,x:()=>r});var s=e(3912),n=null;function r(t){if(s.v.useDeprecatedSynchronousErrorHandling){var i=!n;if(i&&(n={errorThrown:!1,error:null}),t(),i){var e=n,r=e.errorThrown,o=e.error;if(n=null,r)throw o}}else t()}function o(t){s.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=t)}},7845:(t,i,e)=>{"use strict";function s(t,i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=!1);var r=i.schedule((function(){e(),n?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(r),!n)return r}e.d(i,{f:()=>s})},278:(t,i,e)=>{"use strict";function s(t){return t}e.d(i,{y:()=>s})},5685:(t,i,e)=>{"use strict";e.d(i,{z:()=>s});var s=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},8430:(t,i,e)=>{"use strict";e.d(i,{D:()=>n});var s=e(8474);function n(t){return Symbol.asyncIterator&&(0,s.m)(null==t?void 0:t[Symbol.asyncIterator])}},8474:(t,i,e)=>{"use strict";function s(t){return"function"==typeof t}e.d(i,{m:()=>s})},1764:(t,i,e)=>{"use strict";e.d(i,{c:()=>r});var s=e(6766),n=e(8474);function r(t){return(0,n.m)(t[s.L])}},1837:(t,i,e)=>{"use strict";e.d(i,{T:()=>r});var s=e(9768),n=e(8474);function r(t){return(0,n.m)(null==t?void 0:t[s.h])}},3841:(t,i,e)=>{"use strict";e.d(i,{t:()=>n});var s=e(8474);function n(t){return(0,s.m)(null==t?void 0:t.then)}},8671:(t,i,e)=>{"use strict";e.d(i,{L:()=>o,Q:()=>r});var s=e(655),n=e(8474);function r(t){return(0,s.FC)(this,arguments,(function(){var i,e,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:i=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,(0,s.qq)(i.read())];case 3:return e=r.sent(),n=e.value,e.done?[4,(0,s.qq)(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,(0,s.qq)(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}}))}))}function o(t){return(0,n.m)(null==t?void 0:t.getReader)}},4865:(t,i,e)=>{"use strict";e.d(i,{K:()=>n});var s=e(8474);function n(t){return t&&(0,s.m)(t.schedule)}},6798:(t,i,e)=>{"use strict";e.d(i,{e:()=>n});var s=e(8474);function n(t){return function(i){if(function(t){return(0,s.m)(null==t?void 0:t.lift)}(i))return i.lift((function(i){try{return t(i,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}},5:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(3912),n=e(8380);function r(t){n.z.setTimeout((function(){var i=s.v.onUnhandledError;if(!i)throw t;i(t)}))}},8729:(t,i,e)=>{"use strict";function s(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}e.d(i,{z:()=>s})},6723:(t,i,e)=>{"use strict";var s;e.d(i,{O:()=>s}),function(t){t.PARALLEL_CALLS_DEFAULT=5,t.PARALLEL_WINS_DEFAULT=10,t.MAX_WINS_DEFAULT=-1,t.DEFAULT_DESIRED_BITRATE=1,t.REMOVE_BIDS_DEFAULT=!1,t.MID_SESSION_PREFETCH_MINIMUM_TIME=1e4,t.NON_LINEAR_MAX_HEIGHT_PERCENT=20,t.NON_LINEAR_MAX_WIDTH_PERCENT=80,t.DEFAULT_MAX_AD_DURATION=180,t.DEFAULT_MAX_AD_DURATION_PER_VIDEO=240,t.MIN_AD_DURATION=5,t.DEFAULT_CLIENT_SIDE_PACING=6,t.DEFAULT_AGGREGATOR_PACING=10}(s||(s={}))},5226:(t,i,e)=>{"use strict";e.d(i,{O:()=>n.O,c:()=>s});var s,n=e(6723);!function(t){t.BANNED_IMA_ADS_ID=["9026814","9053547"],t.KEYWORDS_FOR_BANNED_VAST=[],t.BANNED_DOMAINS=["fakeurl.com"]}(s||(s={}))},6210:(t,i,e)=>{"use strict";e.d(i,{ai:()=>n,h:()=>s});const s="nonLinearCloseClick",n=["ddb2f21f-97a6-4efe-b8d3-29187a109f26","6faf989f-40de-4754-ac8e-359574e4b357","a28964ae-afa3-45d3-9f00-fa228cf89d74","5ee7c0e2-db41-417d-a2f2-4d91037b85bd","885d6a6e-3989-4b92-b39d-f27bf95585f6","fb24d42c-879a-4d98-8bc6-037f99e971ed","17db3dde-36f2-4c05-9e37-0c6d6cd2d2b8","3ebdd57e-b5b8-4fd8-8887-6ae94a978a12","4b724681-b6ed-4206-af76-91558dd7ae97","6aef9fe6-a3f3-48a0-ae28-b068a96f45e1","90857b8e-560f-42c0-b0d1-5c4527da610c","14f5a754-5e79-42ff-a5a3-0cbe2300f428","8b29f95e-7663-4825-97c5-85e4b427df2a","3de724ff-efea-4f24-b1a4-5520a0530ee1","fe9242a7-7f5a-40f0-84ad-0d1cb921dbbe","b51de0ac-a3f1-4618-89dc-89111ff5ec62","11d8c7dd-ba90-4bae-9148-e32a7b2fecef","a35dcb98-5f9a-472e-98bf-8fe48d66c86d","5863ca7a-9fea-40e4-a207-0f1e82d07ed7","c8916590-a8b2-4c1c-9616-e251f70bb88b","0ab96a0d-2794-4727-81e7-ca9b1935de68","1bc398f8-c04c-4d33-89c8-af4932b4365c","de0d3790-6d2f-4de3-a99f-c57e4ff48315","fa930c65-1cfa-492a-b774-c32f657d05c3","be8b2598-a065-4d14-8865-4e077b92c65c","98abb9bd-c4dd-413a-bfaf-f79615250a5a","9a4005b0-473d-40be-81d0-ff5d4739b27c","41524015-c77a-4aad-88c8-327e8a55118d","07b3f552-8cd1-4af6-845c-bbc9956d1565","8cd4291c-d6fb-407f-adee-22547cf3d545","66ef0899-eaf6-4bd7-8993-e4d17d730dad","e8ee883f-4058-454c-b198-ebe07884fd42","08d77337-01a3-6602-77df-0366fd684428","dea7fe60-f902-42d0-9aca-9732e064e44e","442ef13a-dec7-4c67-858e-8ae8112c2818","e25ff406-83a4-480f-9632-d687a8f060b9","24a0faa2-a178-41f9-a37b-22c8f01cb26b","75b73df5-e303-47f8-8383-4093b1aef937","0acc1292-75a0-4578-8110-a5de236c4676","ca99043c-edc0-4451-adf3-a6803de76c8e","79669999-34e8-4b9e-aa03-320a318ebf31","a475e8a0-9824-4027-b35f-3d039902afe5","cd68b41e-cee7-4d57-89ef-fcf1b862274e","3c80aa77-c355-4523-8731-0e9092a73bf3"]},8509:(t,i,e)=>{"use strict";var s;e.d(i,{Y:()=>s}),function(t){t.AdPlayingInView="AdPlayingInView",t.AdPlayerOutOfView="AdPlayerOutOfView",t.AdPlayerInView="AdPlayerInView"}(s||(s={}))},6888:(t,i,e)=>{"use strict";var s,n,r,o,a;e.d(i,{wy:()=>s,ZJ:()=>n,RG:()=>r,zc:()=>o,fI:()=>a}),function(t){t[t.IDLE=0]="IDLE",t[t.LOADING=1]="LOADING",t[t.CONSUMED_LOADING=2]="CONSUMED_LOADING",t[t.LOADED=3]="LOADED",t[t.STARTING=4]="STARTING",t[t.IMPRESSION=5]="IMPRESSION",t[t.CONSUMED_LOADED=6]="CONSUMED_LOADED",t[t.INVALIDATED=7]="INVALIDATED"}(s||(s={})),function(t){t.Html="text/html",t.Javascript="application/javascript"}(n||(n={})),function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.ImaLoadInitError="imaLoadInitError",t.ImaCreateWrapperError="imaCreateWrapperError",t.ImaInitWrapperError="imaInitWrapperError",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.VastNonLinearImageLoadFailure="nonLinearVastImageLoadFailure",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError",t.NonLinearZeroDimensions="nonLinearzeroDimensions",t.NonLinearImageToLarge="nonLinearImageToLarge",t.NonLinearUnsupportedMedia="nonLinearUnsupportedMedia",t.ExternalSdkError="ExternalSdkError"}(r||(r={})),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(o||(o={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(a||(a={}))},8921:(t,i,e)=>{"use strict";e.d(i,{o:()=>p});var s=e(289),n=e(6723);class r{constructor(){this.requestNumber=0}}var o=e(6899),a=e(1006),h=e(4782),c=e(4656),d=e(5650),l=e(5715),u=e(4798);class p{constructor(t,i,e){this.ci=t,this.di=i,this.ui=e,this.yoScore=0,this.historicalMetrics=new r,this.bidsInFetch=new Set,this.aggregators=new Set,this.hasAggregator=this.vi(t.creativeType),this.mi=this.gi(),this.resetPrice()}get timeBetweenRequests(){if(!this.hasAggregator)return n.O.DEFAULT_CLIENT_SIDE_PACING;if(this.ci.creativeType===s.ProtoCreativeTypeEnum.Rtb){const t=this.ui.getThrottledLineItemPacing(this.ci.advertiserLineItemId);return(0,u.hj)(t)?t:this.ci.timeBetweenRequests||n.O.DEFAULT_AGGREGATOR_PACING}return n.O.DEFAULT_AGGREGATOR_PACING}get protoLineItem(){return this.ci}get adxFloorPrice(){return this.yi}get adxFloorPrices(){return this.mi}get timeBetweenRequestsIdentifier(){return(0,u.$K)(this.yi)?this.yi.id:this.ci.advertiserLineItemId}updateMetadata(t){const i=(0,c.pi)(t,this.ci);this.ci=(0,l.R)(this.ci,i)}updatePriceStatus(t,i){const e=this.getAdxFloorPriceObjectsByPrice(t);(0,d.BZ)(e)&&(e.forEach((t=>{t.priceOutcome=i})),this.resetPrice())}resetAllAdxPricesStatus(){this.mi&&this.mi.forEach((t=>{t.priceOutcome=h.f.Unused}))}resetPrice(){this.yoScore=this.bi()}getAdxFloorPriceObjectsByPrice(t){var i;return(null===(i=this.mi)||void 0===i?void 0:i.filter((i=>i.price===t)))||[]}vi(t){return(0,u.$K)(o.T[t])}Ii(){const{floorPrice:t,customCpm:i}=this.ci;if((0,u.r)(t))return t;if((0,u.r)(i))return i;if((0,u.$K)(this.mi)){const t=(0,a.n_)(this.mi);if(t)return this.yi=this.mi[t.index],t.price}return 0}bi(){const t=this.Ii(),{advertiserLineItemId:i,grossNetPercentageDifference:e,lineItemPriority:s}=this.ci;return this.di.calculateLineItemYoScore(i,{cpm:t,priority:s,grossNetPercentageDifference:e},this.hasAggregator)}gi(){if(this.protoLineItem.adxFloorPricePredictionList&&(0,d.BZ)(this.protoLineItem.adxFloorPricePredictionList)&&!this.protoLineItem.isAdxLookup)return this.protoLineItem.adxFloorPricePredictionList.slice(-9).map(((t,i)=>({price:(0,c.RC)(t.floorPriceObfuscated),priceOutcome:h.f.Unused,adxData:t,id:`${this.protoLineItem.advertiserLineItemId}${t.floorPriceObfuscated}`,index:i}))).sort(((t,i)=>i.price-t.price))}}},1265:(t,i,e)=>{"use strict";e.d(i,{j:()=>n});var s=e(6716);class n{constructor(){this.Pi=new s.x}get onVpaidEvent(){return this.Pi.asObservable()}handshakeVersion(t="2.0"){return"2.0"}}},7763:(t,i,e)=>{"use strict";e.d(i,{I:()=>b,j:()=>n.j});var s,n=e(1265),r=e(6716),o=e(6888),a=e(3682),h=e(7689),c=e(1187),d=e(9022),l=(e(7129),e(3020)),u=e(9791),p=e(9607),f=e(9600),m=e(4798);!function(t){t.IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT"}(s||(s={}));const g=[o.fI.AdImpression,o.fI.AdSkipped,o.fI.AdStopped,o.fI.AdError,o.fI.AdVideoFirstQuartile,o.fI.AdVideoMidpoint,o.fI.AdVideoThirdQuartile,o.fI.AdVideoComplete],v="cnx-ad-bid-slot-selected",y="Connatix Ad";class b extends n.j{constructor(t,i){super(),this.wi=t,this.settings=i,this.bidStatusHistory=[],this.Ai=null,this.Si=null,this._i=null,this.xi=null,this.ki=void 0,this.Ci=!1,this.Ei=!1,this.Mi=!1,this.Li=!1,this.Bi=!1,this.Ri=!1,this.Oi=!1,this.Di=[],this.Ni=null,this.Vi=new r.x,this.Fi=new r.x,this.ji=new r.x,this.Ui=[],this.$i=!1,this.qi=()=>{this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.Timeout,errorCode:c.Oq.ImpressionTimeout}}),this.Di.length&&(0,p.nF)({message:"BidAdaptor_ImpressionTimeout",exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:JSON.stringify(this.Di),level:p.D_.WARN,sessionId:this.settings.sessionId}),this.zi()},this.Gi=()=>{this.Wi(),this.Xi(s.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.Ai,this.Qi)},this.Qi=t=>{const i=this.Xi(s.VIEWABLE_IMPRESSION_TIMEOUT);this.ji.next(t),t?i.timeoutHandle.timeoutId||i.setTimeout():i.clearTimeout()},this.Yi=()=>{this.Hi({type:o.fI.AdSkipped}),this.zi()},this.Ki=()=>{this.Hi({type:o.fI.AdStopped,payload:{shouldTrackPostBid:!0}}),this.zi()},this.Zi=()=>{const t=c.Oq.MediaFileUriTimeout;this.te=t,this.Hi({type:o.fI.AdError,payload:{errorCode:t,errorMessage:o.RG.TimeoutLoaded}}),this.zi()},this.Xi=t=>{const i=this.ie[t];return{timeoutHandle:i,setTimeout:()=>{i.timeoutId=this.wi.setTimeout((()=>{i.callback()}),i.timeout)},clearTimeout:()=>{null!==i.timeoutId&&(this.wi.clearTimeout(i.timeoutId),i.timeoutId=null)}}},this.status=o.wy.IDLE,this.price=this.settings.price,this.yoScore=this.settings.yoScore,this.ne=Date.now(),this.creativeId=this.settings.externalCreativeId,this.re=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.oe=`cnx-ad-slot-${this.settings.bidId}`;const{adType:e}=this.settings.adManagerLineItem.protoLineItem;this.ie={[s.IMPRESSION_TIMEOUT]:{callback:this.qi,timeout:25e3,timeoutId:null},[s.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.Gi,timeout:d.xs[e],timeoutId:null},[s.SKIP_AD_TIMEOUT]:{callback:this.Yi,timeout:500,timeoutId:null},[s.STOP_AD_TIMEOUT]:{callback:this.Ki,timeout:500,timeoutId:null},[s.AD_LOADED_TIMEOUT]:{callback:this.Zi,timeout:25e3,timeoutId:null}},this.he=i.urlSuffixerService}set status(t){this.ae=t,this.bidStatusHistory.push(o.wy[t]),this.Vi.next(t),t===o.wy.INVALIDATED&&this.ce()}get status(){return this.ae}get onStatusChanged(){return this.Vi.asObservable()}get createdTimestamp(){return this.ne}get loadingTimeMs(){return this.de}get startingTimeMs(){return this.le}get started(){return this.Mi}get errorReason(){return this.ue}get vastErrorCode(){return this.te}get shouldTrackPostbid(){return this.$i}get onAdSlotViewabilityChanged(){return this.ji.asObservable()}invalidate(){this.Mi||(this.status=o.wy.INVALIDATED)}skipAd(){this.Xi(s.SKIP_AD_TIMEOUT).setTimeout()}stopAd(t){this.Xi(s.STOP_AD_TIMEOUT).setTimeout()}startAd(){const{adManagerLineItem:t,bidId:i,requestMetadata:e}=this.settings;this.fe=Date.now(),this.Mi=!0,this.status=o.wy.STARTING,this.Ri&&(0,p.nF)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.oe}`,level:p.D_.CRITICAL,sessionId:this.settings.sessionId}),this.Ri=!0,this.Xi(s.IMPRESSION_TIMEOUT).setTimeout()}initAd(t,i,e,n,r,h,c){this.ve=Date.now(),this.status=o.wy.LOADING,this.Bi&&(0,p.nF)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.oe}`,level:p.D_.CRITICAL,sessionId:this.settings.sessionId}),this.Bi=!0,this.Xi(s.AD_LOADED_TIMEOUT).setTimeout(),this.me(c),this.ye=new a.ih(this),this.ye.onTrackingLifecycleEvent(a.cO.Win)}setAdVolume(t){this.Si.volume=t,(0,l.Q1)(this.Si,t),t<=0?this.settings.adEnforcer.start(h.be.Mute):this.settings.adEnforcer.stop(h.be.Mute)}getTrackerSlot(){return this._i}get impressionStarted(){return this.Ci}get creativeId(){return this.ki}set creativeId(t){(0,m.QM)(this.creativeId)||(this.ki=t)}get onAdViewableImpression(){return this.Fi.asObservable()}Ie(t){let i;(0,m.hj)(t.payload.skipOffset)&&(i=t.payload.skipOffset);const e={type:o.fI.AdLoaded,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adLoadedData:{skipOffset:i},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,vastVerifications:t.payload.verificationScriptResources,containers:t.payload.containers}};return this.settings.adLoadedPayload=e,e}Pe(){if(this._i){const t=this._i.getAttribute("aria-hidden");this._i.setAttribute("aria-hidden","true"===t?"false":"true")}}Se(t){return{type:o.fI.AdImpression,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:y,skipOffset:this.skipOffset},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}get skipOffset(){var t,i,e;return null===(e=null===(i=null===(t=this.settings.adLoadedPayload)||void 0===t?void 0:t.payload)||void 0===i?void 0:i.adLoadedData)||void 0===e?void 0:e.skipOffset}_e(t){return{type:o.fI.AdVideoStart,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:y},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId},logInMobiInfo:t.payload.logInMobiInfo}}}Hi(t){if(t.payload||(t.payload={}),this.Te(t.type),t.payload.adType=this.settings.adManagerLineItem.protoLineItem.adType,!this.xe(t))return void this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.InvalidVpaidEvent,errorCode:c.Oq.GeneralError}});const{adManagerLineItem:i,bidId:e,requestMetadata:n}=this.settings,{cnxBidId:r}=n.data;switch(t.type){case o.fI.AdLoaded:0,this.ye.onTrackingLifecycleEvent(a.cO.AdLoaded),this.Xi(s.AD_LOADED_TIMEOUT).clearTimeout(),this.Pi.next(this.Ie(t)),this.Ei=!0,this.de=(0,m.hj)(this.ve)?Date.now()-this.ve:0,this.status=o.wy.LOADED;break;case o.fI.AdImpression:this.le=(0,m.hj)(this.fe)?Date.now()-this.fe:0,this.ye.onTrackingLifecycleEvent(a.cO.AdImpression),this.Xi(s.IMPRESSION_TIMEOUT).clearTimeout(),this.ke(),(0,l.cn)(this._i,v),this.Pe(),this.Pi.next(this.Se(t)),this.Ci=!0,this.status=o.wy.IMPRESSION;break;case o.fI.AdVideoStart:this.ye.onTrackingLifecycleEvent(a.cO.AdStarted),this.Pi.next(this._e(t));break;case o.fI.AdStopped:case o.fI.AdSkipped:case o.fI.AdError:this.Ce(t);break;default:this.Pi.next(t)}}Ce(t){var i;this.Li?(0,p.nF)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:p.D_.WARN,sessionId:this.settings.sessionId}):((0,m.hj)(this.de)||((0,m.hj)(this.ve)?this.de=Date.now()-this.ve:this.de=0),(0,m.hj)(this.le)||((0,m.hj)(this.fe)?this.le=Date.now()-this.fe:this.le=0),o.fI.AdError===t.type&&(this.ue=t.payload.errorMessage,this.$i=!0),o.fI.AdStopped===t.type&&(this.ue=o.RG.AdStopped,this.$i=!!(null===(i=t.payload)||void 0===i?void 0:i.shouldTrackPostBid)),o.fI.AdSkipped===t.type&&(this.ue=o.RG.AdStopped,this.$i=!1),this.ce(),this.Pi.next(t),this.ae!==o.wy.INVALIDATED&&(this.Ei?this.status=o.wy.CONSUMED_LOADED:(this.ae!==o.wy.LOADING&&(0,p.nF)({message:"Bid_idle_consumed",level:p.D_.WARN,sessionId:this.settings.sessionId},{throttle:1,shouldSendMaxLog:!1}),this.status=o.wy.CONSUMED_LOADING)))}me(t){this.xi=this.Ee(),this._i=this.xi.slotsContainer,(0,l.cn)(this._i,this.re),this.Ai=this.xi.adSlot,this.Ai.id=this.oe,this._i.id=this.settings.bidSlotId,this.Si=this.xi.videoSlot,this.Si.volume=t,(0,l.Q1)(this.Si,t),this.settings.adEnforcer.registerContainer(this._i,this.oe),this.Ui.push(this.settings.adEnforcer.onEnforcerEvent.subscribe((t=>{this.Me(t)}))),this.settings.adEnforcer.start(h.be.All)}Ee(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}ce(){try{this.Li=!0,this._i&&((0,l.IV)(this._i,v),(0,l.IV)(this._i,this.re),this._i.removeAttribute("id")),this.Ai&&this.Ai.removeAttribute("id"),this.Pe(),(0,f.i)(this.Ui),this.zi(),this.settings.adEnforcer.deregisterContainer(this._i),this.settings.viewabilityService.off(this.Ai,this.Qi),null!==this.Ni&&this.wi.clearTimeout(this.Ni),this.Le()}catch(t){this.Re("ABaseBidAdaptor","_destroy",(0,u.W$)(t))}}Le(){this.Ni=this.wi.setTimeout((()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.xi)}),500)}Wi(){const{advertiserLineItemId:t,publisherLineItemId:i}=this.settings.adManagerLineItem.protoLineItem;this.Fi.next({advertiserLineItemId:t,publisherLineItemId:i,rtbSeatId:this.settings.requestMetadata.data.rtbSeatId,dspId:this.settings.requestMetadata.data.dspId,rtbAdomain:this.settings.requestMetadata.data.rtbAdomain})}ke(){const t=d.fJ,i=this.Ai;this.settings.viewabilityService.on(i,this.Qi,{threshold:t}),this.Qi(this.settings.viewabilityService.check({threshold:t,element:i}))}zi(){Object.keys(this.ie).forEach((t=>{this.Xi(t).clearTimeout()}))}xe(t){return!(!this.Ci&&(t.type===o.fI.AdStopped||t.type===o.fI.AdSkipped))}Me(t){if(t.detectedContainer!==this._i)return;let i;switch(t.type){case h.lU.BADURI_DETECTED:i="AdManager_enforcer_BadUri";break;case h.lU.MALWARE_DETECTED:i="AdManager_enforcer_malware",this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.EnforcementMalware,errorCode:c.Oq.GeneralError}});break;case h.lU.VOLUME_DETECTED:i="AdManager_enforcer_soundBlock",this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.EnforcementVolume,errorCode:c.Oq.GeneralError}})}(0,p.nF)({message:i,exception:t.message,level:p.D_.WARN,sessionId:this.settings.sessionId})}Te(t){if(!this.Bi&&(g.includes(t)||t===o.fI.AdLoaded)){if(this.Di.push(t),this.Oi)return;this.Oi=!0,(0,p.nF)({message:`${this.adMediaType?this.adMediaType:""}BidAdaptor_AdIdle_${t}BeforeInitAd`,exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:"PostBidInitAd",level:p.D_.WARN,sessionId:this.settings.sessionId})}if(this.Ei&&!this.Ri&&g.includes(t)){if(this.Di.push(t),this.Oi)return;this.Oi=!0,(0,p.nF)({message:`${this.adMediaType?this.adMediaType:""}BidAdaptor_AdLoaded_${t}WithoutStartAd`,exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:"PostBidStartAd",level:p.D_.WARN,sessionId:this.settings.sessionId})}}Re(t,i,e){const s=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,n=this.creativeId;(0,p.nF)({message:`AdManager_${t}_${i}`,exception:`advertiserLineItemId:${s}_creativeId:${n}_errorMessage:${null==e?void 0:e.message}`,callStack:null==e?void 0:e.stack,level:p.D_.WARN,sessionId:this.settings.sessionId},{throttle:10})}}},5460:(t,i,e)=>{"use strict";e.d(i,{p:()=>_,f:()=>E});var s=e(289),n=e(6888),r=e(7763),o=e(6716),a=e(655),h=e(1480),c=e(7878),d=Array.isArray;var l=e(1545),u=e(2566),p=e(2457);function f(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=(0,p.jO)(t),s=function(t){return 1===t.length&&d(t[0])?t[0]:t}(t);return s.length?new h.y((function(t){var i=s.map((function(){return[]})),n=s.map((function(){return!1}));t.add((function(){i=n=null}));for(var r=function(r){(0,c.Xf)(s[r]).subscribe((0,u.x)(t,(function(s){if(i[r].push(s),i.every((function(t){return t.length}))){var o=i.map((function(t){return t.shift()}));t.next(e?e.apply(void 0,(0,a.ev)([],(0,a.CR)(o))):o),i.some((function(t,i){return!t.length&&n[i]}))&&t.complete()}}),(function(){n[r]=!0,!i[r].length&&t.complete()})))},o=0;!t.closed&&o<s.length;o++)r(o);return function(){i=n=null}})):l.E}var m=e(9127),g=e(5650),v=e(9791);const y=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]];class b{constructor(t,i,e){this.Oe=t,this.De=i,this.Ne=e,this.Fe=`div-gpt-ad-1589549806211-${(0,v.qs)()}`,this.je=new o.x,this.Ue=new o.x,this.$e=new o.x,this.He=new o.x,this.ze=new o.x}get onCreativeReceived(){return this.ze.asObservable()}get onDisplayAd(){return this.$e.asObservable()}get onError(){return this.He.asObservable()}getAdMediaHeight(){return this.Ge?this.Ge.clientHeight:0}getAdMediaWidth(){return this.Ge?this.Ge.clientWidth:0}initializeAd(t,i){try{this.We=t,this.me(t);const e=this.Xe(i.width,i.height);this.Oe.cmd.push((()=>{this.Qe=this.Oe.defineSlot(this.Ne,e,this.Fe).addService(this.Oe.pubads()).setTargeting("domains",this.De),this.Oe.enableServices(),this.Je(),this.Oe.pubads().isInitialLoadDisabled()&&this.Oe.pubads().refresh([this.Qe]),this.Oe.display(this.Fe)}))}catch(t){this.He.next(n.RG.WrapperInitAdError)}}destroy(){this.Oe.cmd.push((()=>{this.Oe.destroySlots&&this.Qe&&this.Oe.destroySlots([this.Qe])}))}Je(){this.Oe.pubads().addEventListener("slotOnload",(t=>{t.slot===this.Qe&&this.Ue.next(t)})),this.Oe.pubads().addEventListener("slotRenderEnded",(t=>{t.slot===this.Qe&&(this.je.next(t),t.isEmpty&&this.Ue.next(null))})),f([this.je,this.Ue]).pipe((0,m.U)((([t,i])=>({slotRenderEndedEvent:t,slotOnloadEvent:i})))).subscribe((t=>{var i;const{slotRenderEndedEvent:e}=t;if(e.isEmpty)return void this.He.next(n.RG.AdxOverlayNoFill);this.Ge=null===(i=this.We)||void 0===i?void 0:i.getElementsByTagName("iframe")[0];const s=e.creativeId;s&&this.ze.next(s.toString()),this.$e.next()}))}me(t){t.id=this.Fe}Xe(t,i){return y.filter((e=>!Array.isArray(e)||!(0,g.fn)(e)||(0,g.BZ)(e)&&e[0]<=t&&e[1]<=i))}}var I=e(8850),P=e(1509),w=e(9357),S=e(4065),A=e(9906),x=e(9600);class _ extends r.I{constructor(t,i){super(t,i),this.wi=t,this.settings=i,this.adMediaType="displayAdx",this.adSourceType=s.ProtoAdsourceTypeEnum.Unknown,this.Ye="adx",this.Ke={[P.n.FirstQuartile]:n.fI.AdVideoFirstQuartile,[P.n.SecondQuartile]:n.fI.AdVideoMidpoint,[P.n.ThirdQuartile]:n.fI.AdVideoThirdQuartile,[P.n.FourthQuartile]:n.fI.AdVideoComplete},this.Ze=[];const e=this.settings.adManagerLineItem.protoLineItem.overlayTime*w.s_;this.ts=new S.B(this.wi,e,500),this.Ze.push(this.ts.onTimeUpdate.subscribe((()=>{this.Hi({type:n.fI.AdRemainingTimeChange})})),this.ts.onTimeElapsed.subscribe((()=>{this.stopAd("adxTimerElapsed")})),this.ts.onQuartile.subscribe((t=>{this.Hi({type:this.Ke[t],payload:{}})})))}initAd(t,i,e,s,r,o,a){try{super.initAd(t,i,e,s,r,o,a),this.es={width:t,height:i},this.ss().then((t=>{this.ns=new b(t,this.settings.domain,this.settings.adxAdUnitPath),this.Ze.push(this.ns.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.Hi({type:n.fI.AdLoaded,payload:{skipOffset:0}})})).catch((t=>{this.Hi({type:n.fI.AdError,payload:{errorMessage:n.RG.AdxOverlayGptScriptLoad+`_${t.message}`,errorCode:I.O.GeneralError}})}))}catch(t){this.Hi({type:n.fI.AdError,payload:{errorMessage:n.RG.AdaptorInitAdError+`_${t.message}`,errorCode:I.O.GeneralError}})}}startAd(){try{super.startAd(),this.Ze.push(this.ns.onDisplayAd.subscribe((()=>{this.Hi({type:n.fI.AdStarted}),this.Hi({type:n.fI.AdVideoStart}),this.Hi({type:n.fI.AdImpression,payload:{}}),this.ts.start()})),this.ns.onError.subscribe((t=>{this.Hi({type:n.fI.AdError,payload:{errorMessage:t,errorCode:I.O.GeneralError}}),this.ts.stop()}))),this.ns.initializeAd(this.Ai,this.es)}catch(t){this.Hi({type:n.fI.AdError,payload:{errorMessage:n.RG.AdaptorStartAdError+`_${t.exception}`,errorCode:I.O.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.ts.stop(),this.Hi({type:n.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.Re("AdxBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.es&&(this.es.width=t,this.es.height=i)}pauseAd(){try{this.ts.stop(),this.Hi({type:n.fI.AdPaused})}catch(t){this.Re("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ts.start(),this.Hi({type:n.fI.AdPlaying})}catch(t){this.Re("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.Hi({type:n.fI.AdSkipped})}catch(t){this.Re("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.ts.timeRemaining/w.s_}getAdDuration(){return this.ts.timerDuration/w.s_}getAdVolume(){return 0}getAdMediaSize(){return{width:this.ns.getAdMediaWidth(),height:this.ns.getAdMediaHeight()}}setAdVolume(t){}get adVideoUrl(){return this.Ye}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}ss(){const t=(0,v.pE)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);t.googletag=window.googletag||{cmd:[]};return A.h.getGlobalContainer().resolve(E).fetchGoogleTag()}ce(){var t;try{super.ce(),this.ts.stop(),(0,x.i)(this.Ze),null===(t=this.ns)||void 0===t||t.destroy()}catch(t){this.Re("AdxBidAdaptor","_destroy",t)}}}var T=e(8659);var C=e(3020),k=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let E=class{constructor(){this.rs=null}fetchGoogleTag(){if(null!==this.rs)return this.rs;const t=(0,v.pE)(window).topFrame;return this.rs=(0,v.Up)((()=>new Promise(((i,e)=>{(0,C.dZ)({src:"//securepubads.g.doubleclick.net/tag/js/gpt.js"},t.document.head,t,(()=>i(t.googletag)),(()=>e(new Error("GptLoader_failed_gpt_script"))))})))),this.rs}};E=k([(0,T.ri)()],E)},5113:(t,i,e)=>{"use strict";e.d(i,{pe:()=>s.p,EM:()=>v,f1:()=>T,Kz:()=>U,pr:()=>W,SI:()=>ut});var s=e(5460),n=e(289),r=e(6210),o=e(6888),a=e(7763),h=e(6716),c=e(3682),d=e(9600);class l{constructor(t,i,e,s,n,r,o){this.hs=t,this.cs=i,this.ds=e,this.ls=s,this.us=n,this.ps=r,this.vs=o,this.$e=new h.x,this.gs=new h.x,this.He=new h.x,this.Ui=[]}get onDisplayAd(){return this.$e.asObservable()}get onError(){return this.He.asObservable()}get onClickClose(){return this.gs.asObservable()}initializeAd(t,i){try{let e;if(this.ps===n.ProtoAdType.Nonlinear){const{width:t,height:i}=this.vs;e={width:t,height:i}}this.ys=new c.IV(this.ps,this.cs,this.hs,t,this.ls,this.us,this.ds,e),this.Ui.push(this.ys.onDisplayAd.subscribe((()=>{this.$e.next()})),this.ys.onError.subscribe((()=>{this.He.next(o.RG.DisplayIntegratorIframeLoad)})),this.ys.onClickClose.subscribe((()=>{this.gs.next()}))),this.ys.createBanner(i)}catch(t){this.He.next(o.RG.WrapperInitAdError)}}getAdMediaDimensions(){var t;return null===(t=this.ys)||void 0===t?void 0:t.getAdMediaDimensions()}destroy(){var t;(0,d.i)(this.Ui),null===(t=this.ys)||void 0===t||t.destroy()}}var u=e(8850),p=e(1509),f=e(9357),m=e(4065);const g={[p.n.FirstQuartile]:o.fI.AdVideoFirstQuartile,[p.n.SecondQuartile]:o.fI.AdVideoMidpoint,[p.n.ThirdQuartile]:o.fI.AdVideoThirdQuartile,[p.n.FourthQuartile]:o.fI.AdVideoComplete};class v extends a.I{constructor(t,i){var e;let s;super(t,i),this.wi=t,this.settings=i,this.adSourceType=n.ProtoAdsourceTypeEnum.Unknown,this.bs=500,this.Is=[],this.settings.adManagerLineItem.protoLineItem.adType===n.ProtoAdType.Nonlinear?(this.adMediaType="displayHtmlNonLinear",this.Ye="htmlNonLinear",s=null===(e=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearAdTimeSeconds):(this.adMediaType="displayHtml",this.Ye="html",s=this.settings.adManagerLineItem.protoLineItem.overlayTime);const r=s*f.s_;this.ts=new m.B(this.wi,r,this.bs),this.Is.push(this.ts.onTimeUpdate.subscribe((()=>{this.Hi({type:o.fI.AdRemainingTimeChange})})),this.ts.onTimeElapsed.subscribe((()=>{this.stopAd("htmlTimerElapsed")})),this.ts.onQuartile.subscribe((t=>{this.Hi({type:g[t],payload:{}})})))}get adVideoUrl(){return this.Ye}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,i,e,s,n,r,a){try{super.initAd(t,i,e,s,n,r,a),this.Ps=t,this.ws=i,this.Hi({type:o.fI.AdLoaded,payload:{}})}catch(t){this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.AdaptorInitAdError+`_${t.message}`,errorCode:u.O.GeneralError}})}}startAd(){try{super.startAd(),this.ts.start(),this.As=new l(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.sessionId,this.settings.adManagerLineItem.protoLineItem.adType,this.settings.dimensions),this.Is.push(this.As.onDisplayAd.subscribe((()=>{this.Hi({type:o.fI.AdStarted}),this.Hi({type:o.fI.AdVideoStart}),this.Hi({type:o.fI.AdImpression,payload:{}})})),this.As.onError.subscribe((t=>{this.Hi({type:o.fI.AdError,payload:{errorMessage:t,errorCode:u.O.GeneralError}}),this.ts.stop()})),this.As.onClickClose.subscribe((()=>{this.Hi({type:o.fI.AdUserClose,payload:{}}),this.stopAd(r.h)}))),this.As.initializeAd(this.Ai,{width:this.Ps,height:this.ws})}catch(t){this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.AdaptorStartAdError+`_${t.message}`,errorCode:u.O.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.ts.stop(),this.Hi({type:o.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.Re("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.Hi({type:o.fI.AdSkipped})}catch(t){this.Re("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.ts.stop(),this.Hi({type:o.fI.AdPaused})}catch(t){this.Re("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ts.start(),this.Hi({type:o.fI.AdPlaying})}catch(t){this.Re("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.ts.timerDuration/f.s_}getAdRemainingTime(){return this.ts.timeRemaining/f.s_}getAdVolume(){return 0}getAdMediaSize(){var t;return null===(t=this.As)||void 0===t?void 0:t.getAdMediaDimensions()}setAdVolume(t){}resizeAd(t,i,e){this.Ps=t,this.ws=i}ce(){var t;try{super.ce(),this.ts.stop(),(0,d.i)(this.Is),null===(t=this.As)||void 0===t||t.destroy()}catch(t){this.Re("HtmlBidAdaptor","_destroy",t)}}}var y=e(5226),b=e(1265),I=e(7720),P=e(8211),w=e(3326),S=e(3020),A=e(4798);class x extends b.j{constructor(t,i,e,s,n,r,a){super(),this.Ss=t,this._s=i,this.Ts=e,this.ks=s,this.Cs=n,this.Es=r,this.Ls=a,this.ze=new h.x,this.Bs=t=>{if(!this.Rs(t))return;let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.ImaError+"_"+i,errorCode:I.Oq.GeneralError}})},this.Os=t=>{const i=this.Ss.AdEvent.Type;switch(t.type){case i.CLICK:this.Pi.next({type:o.fI.AdClickThru,payload:{}});break;case i.LOADED:this.Ds(t);break;case i.IMPRESSION:{const t={adsManager:this.Cs,adContainer:this.Ns,viewMode:this.Vs(this.js),adTag:this.ks};this.Pi.next({type:o.fI.AdVideoStart}),this.Pi.next({type:o.fI.AdImpression,payload:{imaMetadata:t}});break}case i.STARTED:this.Pi.next({type:o.fI.AdStarted});break;case i.FIRST_QUARTILE:this.Pi.next({type:o.fI.AdVideoFirstQuartile});break;case i.MIDPOINT:this.Pi.next({type:o.fI.AdVideoMidpoint});break;case i.THIRD_QUARTILE:this.Pi.next({type:o.fI.AdVideoThirdQuartile});break;case i.COMPLETE:this.Pi.next({type:o.fI.AdVideoComplete}),this.Pi.next({type:o.fI.AdStopped,payload:{shouldTrackPostBid:!0}});break;case i.ALL_ADS_COMPLETED:break;case i.DURATION_CHANGE:this.Pi.next({type:o.fI.AdDurationChange});break;case i.PAUSED:this.Pi.next({type:o.fI.AdPaused});break;case i.RESUMED:this.Pi.next({type:o.fI.AdPlaying});break;case i.LINEAR_CHANGED:this.Pi.next({type:o.fI.AdLinearChange});break;case i.SKIPPABLE_STATE_CHANGED:this.Pi.next({type:o.fI.AdSkippableStateChange});break;case i.SKIPPED:this.Pi.next({type:o.fI.AdSkipped});break;case i.VOLUME_CHANGED:this.Pi.next({type:o.fI.AdVolumeChange});break;case i.USER_CLOSE:this.Pi.next({type:o.fI.AdUserClose});break;case i.LOG:this.Pi.next({type:o.fI.AdLog})}},this.Us()}get onCreativeReceived(){return this.ze.asObservable()}initAd(t,i,e,s,n,r){this.Ns=r.slot,this.$s=r.videoSlot,this.js=e||o.zc.Normal;try{this.Cs.setVolume(0),this.Cs.init(t,i,this.Vs(this.js))}catch(t){this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.ImaManagerInit,errorCode:I.Oq.GeneralError}})}}startAd(){try{this.Cs.start()}catch(t){this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.WrapperStartAdError+`_${t.message}`,errorCode:I.Oq.GeneralError}})}}stopAd(t){this.Cs.stop(),this.Pi.next({type:o.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){this.Cs.resize(t,i,this.Vs(e))}pauseAd(){this.Cs.pause()}resumeAd(){this.Cs.resume(),this._s===P.M.Ios&&(0,S.UR)(this.$s)}expandAd(){this.Cs.expand()}collapseAd(){this.Cs.collapse()}skipAd(){this.Cs.skip()}getAdRemainingTime(){return this.Cs.getRemainingTime()||0}getAdDuration(){return this.zs?this.zs.getDuration():0}getAdVolume(){return this.Cs.getVolume()}getAdMediaWidth(){return this.zs?this.zs.getVastMediaWidth():0}getAdMediaHeight(){return this.zs?this.zs.getVastMediaHeight():0}setAdVolume(t){this.Cs.setVolume(t)}getMediaFile(){return this.zs?this.zs.getMediaUrl():void 0}Us(){this.Ts.addEventListener(this.Ss.AdErrorEvent.Type.AD_ERROR,this.Bs),this.Cs.addEventListener(this.Ss.AdErrorEvent.Type.AD_ERROR,this.Bs),Object.keys(this.Ss.AdEvent.Type).forEach((t=>{this.Cs.addEventListener(this.Ss.AdEvent.Type[t],this.Os,!1)}))}Gs(){this.Ts.removeEventListener(this.Ss.AdErrorEvent.Type.AD_ERROR,this.Bs),this.Cs.removeEventListener(this.Ss.AdErrorEvent.Type.AD_ERROR,this.Bs),Object.keys(this.Ss.AdEvent.Type).forEach((t=>{this.Cs.removeEventListener(this.Ss.AdEvent.Type[t],this.Os,!1)}))}Vs(t){return t===o.zc.Fullscreen?this.Ss.ViewMode.FULLSCREEN:this.Ss.ViewMode.NORMAL}Ws(t){return y.c.BANNED_IMA_ADS_ID.some((i=>i===t))}Rs(t){const i=t.getUserRequestContext();return!i||i.id===this.Es.id}Ds(t){if(this.zs=t.getAd(),this.Ws(this.zs.getAdId()))return void this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.VpaidInvalid,errorCode:I.Oq.GeneralError}});this.ze.next(this.zs.getCreativeId());let i=-1,e="";try{i=this.zs.getSkipTimeOffset();const s=t.getAdData().clickThroughUrl;e=(0,A.QM)(s)?s:void 0}catch(t){}(0,w.A)(this.Ls,e).then((t=>{t?this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.DomainBlocked,errorCode:I.Oq.GeneralError}}):this.Pi.next({type:o.fI.AdLoaded,payload:{skipOffset:i}})}))}destroy(){try{this.Gs(),setTimeout((()=>{this.Cs.destroy()}))}catch(t){}}}var _=e(8919);class T extends a.I{constructor(t,i){super(t,i),this.wi=t,this.settings=i,this.xi=null,this.adMediaType="ima",this.adSourceType=n.ProtoAdsourceTypeEnum.Ima,this.Qs=[],this.xi=this.settings.imaAdSlotContainer,this.Js=new x(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(t,i,e,s,n,r,a){try{super.initAd(t,i,e,s,n,r,a),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.Ks(),this.Qs.push(this.Js.onVpaidEvent.subscribe((t=>{this.Hi(t)})),this.Js.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.Js.initAd(t,i,e,s,n,{slot:this.Ai,videoSlot:this.Si})}catch(t){this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.AdaptorInitAdError+`_${t.message}`,errorCode:u.O.GeneralError}})}}startAd(){try{super.startAd(),this.Js.startAd()}catch(t){this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.AdaptorStartAdError+`_${t.message}`,errorCode:u.O.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.Js.stopAd(t)}catch(t){this.Re("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.Js.resizeAd(t,i,e)}catch(t){this.Re("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Js.pauseAd()}catch(t){this.Re("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Js.resumeAd()}catch(t){this.Re("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Js.expandAd()}catch(t){this.Re("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Js.collapseAd()}catch(t){this.Re("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Js.skipAd()}catch(t){this.Re("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Js.getAdRemainingTime()}catch(t){return this.Re("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Js&&this.Js.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.Re("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Js.getAdVolume()}catch(t){return this.Re("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.Js.getAdMediaWidth(),height:this.Js.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.Js.setAdVolume(t)}catch(t){this.Re("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Js.getMediaFile()}get declaredDurationInSeconds(){return this.Js.getAdDuration()}Se(t){const i=super.Se(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}Ee(){return this.xi}Le(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.xi)}Ks(){_.X3.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1,this.settings.sessionId)}ce(){try{super.ce(),(0,d.i)(this.Qs),this.Js.destroy()}catch(t){this.Re("ImaBidAdaptor","_destroy",t)}}}var C=e(2857),k=e(9791),E=e(9607);class M{constructor(t,i,e,s){this.Zs=t,this.tn=i,this.en=e,this.sn=s,this.rn=[],this.hn=(t,i)=>{if(i.fatal)switch(i.type){case this.Zs.ErrorTypes.NETWORK_ERROR:if(i.details===this.Zs.ErrorDetails.MANIFEST_PARSING_ERROR||i.details===this.Zs.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.an();this.dn.startLoad();break;case this.Zs.ErrorTypes.MEDIA_ERROR:this.dn.recoverMediaError();break;default:this.an()}},this.ln=()=>{this.dn.off(this.Zs.Events.MEDIA_ATTACHED,this.ln),this.dn.loadSource(this.tn),this.dn.once(this.Zs.Events.MANIFEST_PARSED,this.un)},this.un=()=>{this.dn.off(this.Zs.Events.MANIFEST_PARSED,this.un),this.pn(),this.sn.forceMaxLevel&&this.vn(),this.sn.forceResolutionHeight&&this.gn(this.sn.forceResolutionHeight),this.yn()},(this.sn.forceMaxLevel||this.sn.forceResolutionHeight)&&(C.yt.capLevelToPlayerSize=!1)}start(t,i){this.yn=t,this.an=i,this.Zs&&(0,C.fh)()?(this.dn=new this.Zs(Object.assign({},C.yt)),this.bn()):this.an()}destroy(t){try{this.dn&&(this.dn.destroy(),this.dn=null)}catch(i){const{message:e,stack:s}=(0,k.W$)(i);(0,E.nF)({sessionId:t,level:E.D_.WARN,message:"AdManager_HlsAdSourceHandler_destroy",exception:e,callStack:s})}}bn(){this.dn.on(this.Zs.Events.ERROR,this.hn),this.dn.attachMedia(this.en),this.dn.once(this.Zs.Events.MEDIA_ATTACHED,this.ln)}vn(){const t=this.dn.levels.length-1;this.In(t)}gn(t){const i=this.rn.find((i=>i.height===t));i&&this.In(i.level)}In(t){this.dn.currentLevel=t,this.dn.startLevel=t,this.dn.nextLevel=t}pn(){this.dn.levels.forEach(((t,i)=>{this.rn.push({level:i,height:t.height})}))}}var L=e(1187),R=e(9490),B=e(5292),O=e(7332);const D="huffpost",N=540,F=["d426a992-f367-434b-827b-d3561b6af50c","e3bcb71c-7486-4955-a5fe-c94bade4948d"];class $ extends b.j{constructor(t,i,e,s,n,r,a,h,c,d,l,u=!1,p){super(),this.ls=t,this.Pn=i,this.$s=e,this._s=s,this.ds=n,this.wn=r,this.An=a,this.us=h,this.Sn=c,this._n=d,this.Zs=l,this.Tn=u,this.xn=p,this.kn=!1,this.pageFocus=new B.v(this.ls),this.Cn=Object.values(R.wB),this.En=!1,this.Ln=!1,this.Bn=!0,this.Rn=!1,this.Dn=[{event:o.fI.AdVideoStart,position:0},{event:o.fI.AdVideoFirstQuartile,position:25},{event:o.fI.AdVideoMidpoint,position:50},{event:o.fI.AdVideoThirdQuartile,position:75},{event:o.fI.AdVideoComplete,position:100}],this.Vn=this.Dn[0],this.Fn=t=>{try{switch(t.type){case R.wB.Pause:if(this.An&&!this.Bn)return this.Bn=!0,void this.jn("pause_event_loopAd");this.Ln=!1;break;case R.wB.Play:!this.Ln&&this.Tn&&this.$s.pause();break;case R.wB.Canplay:case R.wB.Durationchange:this.Un();break;case R.wB.Timeupdate:this.$n();break;case R.wB.Error:{const t=this.$s.networkState===HTMLMediaElement.NETWORK_NO_SOURCE?L.Oq.MediaFileNotFound:L.Oq.GeneralLinearError;this.Pi.next({type:o.fI.AdError,payload:{errorCode:t,errorMessage:o.RG.VastVideoTagEventError}});break}case"click":this.Pi.next({type:o.fI.AdClickThru,payload:{}})}}catch(t){(0,E.nF)({level:E.D_.CRITICAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message,sessionId:this.us},{throttle:10,shouldSendMaxLog:!1})}}}initAd(t,i,e,s,n,r){try{this.$s=r.videoSlot,this.width=t,this.height=i,this.qn(this.wn,this.$s.parentElement),this.resizeAd(t,i,e),this.addVideoEvents(this.$s),this._n&&(0,C.fh)()?this.Hn(this.Zs):(this.$s.setAttribute("src",this.Pn),this.$s.setAttribute("preload","metadata"),this.$s.load()),this.pageFocus.isDocumentVisible()||this.Un()}catch(t){this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.WrapperInitAdError+`_${t.message}`,errorCode:L.Oq.GeneralError}})}}zn(t){if(this.En){const i=t?"INMOBI_IMPRESSION_EVENT_DOCUMENT_VISIBLE":"INMOBI_IMPRESSION_EVENT_DOCUMENT_NOT_VISIBLE";(0,E.nF)({level:E.D_.INFO,exception:`advLineItemId: ${this.ds}`,message:i,sessionId:this.us},{throttle:1e3})}}startAd(){try{(0,S.cn)(this.$s,"cnx-ad-video-slot"),this.Ln=!0,this.ds&&F.includes(this.ds)&&(this.En=!0),this.pageFocus.isDocumentVisible()?this.$s.play().then((()=>{this.Pi.next({type:o.fI.AdStarted}),this.Gn(),this.zn(!0)})).catch((t=>{this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.VastPlayPromiseReject,errorCode:L.Oq.GeneralError}}),this.En&&(0,E.nF)({level:E.D_.INFO,message:"INMOBI_DOCUMENT_VISIBLE_REJECTED_PLAY_EVENT",exception:`advLineItemId: ${this.ds}, promiseError: ${t.message}`,callStack:t.stack,sessionId:this.us},{throttle:1e3})})):(this.Pi.next({type:o.fI.AdStarted}),this.Gn(),this.zn(!1),this.$s.play().then((()=>{this.Wn(),this.En&&(0,E.nF)({level:E.D_.INFO,message:"INMOBI_DOCUMENT_NOT_VISIBLE_RESOLVED_PLAY_EVENT",exception:`advLineItemId: ${this.ds}`,sessionId:this.us},{throttle:1e3})})).catch((t=>{this.En&&(0,E.nF)({level:E.D_.INFO,message:"INMOBI_DOCUMENT_NOT_VISIBLE_REJECTED_PLAY_EVENT",exception:`advLineItemId: ${this.ds}, promiseError: ${t.message}`,callStack:t.stack,sessionId:this.us},{throttle:1e3})})))}catch(t){this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.WrapperStartAdError+`_${t.message}`,errorCode:L.Oq.GeneralError}})}}stopAd(t){this.Tn&&this.$s.pause(),"videoComplete"===t&&this.An?this.Pi.next({type:o.fI.AdStopped,payload:{shouldTrackPostBid:!1}}):this.Pi.next({type:o.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){(0,S.T7)(this.$s,{width:`${t}px`,height:`${i}px`}),this.Pi.next({type:o.fI.AdSizeChange})}pauseAd(){this.Ln=!1,this.Sn&&void 0===this.Vn&&(this.Vn=this.Dn[0]),this.$s.pause(),this.Pi.next({type:o.fI.AdPaused})}resumeAd(){this.An&&void 0===this.Vn&&(this.Vn=this.Dn[0]),this.Ln=!0,this.jn("resumeAd"),this.Wn(),this.Pi.next({type:o.fI.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.Pi.next({type:o.fI.AdSkipped})}getAdRemainingTime(){return this.$s.duration-this.$s.currentTime}getAdDuration(){return this.$s.duration?this.$s.duration:0}getAdVolume(){return this.$s.volume}setAdVolume(t){this.$s.volume=t}getAdMediaWidth(){return this.$s.videoWidth}getAdMediaHeight(){return this.$s.videoHeight}destroy(){if(!this.Sn&&!this.An)try{(0,S.IV)(this.$s,"cnx-ad-video-slot"),this.Xn(this.$s),this.$s.removeAttribute("src"),this.Qn&&(this.Qn.destroy(this.us),this.Qn=null)}catch(t){const{message:i,stack:e}=(0,k.W$)(t);(0,E.nF)({level:E.D_.WARN,message:"AdManager_VastIntegrator_destroyAd",exception:i,callStack:e,sessionId:this.us})}}Wn(){this._s===P.M.Ios&&(0,S.UR)(this.$s)}Hn(t){let i={forceMaxLevel:!0};this.xn&&this.xn.includes(D)&&(i={forceMaxLevel:!1,forceResolutionHeight:N}),this.Qn=new M(t,this.Pn,this.$s,i),this.Qn.start((()=>{this.Un()}),(()=>{this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.CnxMediaSrcNotSupported,errorCode:L.Oq.MediaFileNotSupported}})}))}qn(t,i){this.Jn=this.ls.createElement("a"),t&&(this.Jn.href=t,this.Jn.target="_blank"),(0,S.cn)(this.Jn,"cnx-ad-slot"),this.Jn.setAttribute("title","Advertisement link"),this.Jn.setAttribute("role","link"),this.Jn.setAttribute("tabindex","-1"),this.Jn.setAttribute("aria-disabled","true"),i.appendChild(this.Jn),this.Jn.addEventListener("click",this.Fn)}addVideoEvents(t){this.Cn.forEach((i=>{t.addEventListener(i,this.Fn)})),this.Jn&&this.Jn.addEventListener("click",this.Fn)}Xn(t){this.Cn.forEach((i=>{t.removeEventListener(i,this.Fn)})),this.Jn&&this.Jn.removeEventListener("click",this.Fn)}Un(){this.kn||(this.kn=!0,this.Pi.next({type:o.fI.AdLoaded,payload:{}}))}$n(){this.Pi.next({type:o.fI.AdRemainingTimeChange});const t=(0,O.dQ)(0,this.$s.duration,0,100,this.$s.currentTime);if(this.Vn&&t>=this.Vn.position){this.Vn.event===o.fI.AdVideoStart&&this.En&&(0,E.nF)({level:E.D_.INFO,message:"INMOBI_AD_VIDEO_START_EVENT_FIRED",exception:`advLineItemId: ${this.ds}`,sessionId:this.us},{throttle:1e3}),this.Rn||(this.Vn.event===o.fI.AdVideoStart&&this.En?this.Pi.next({type:o.fI.AdVideoStart,payload:{logInMobiInfo:this.En}}):this.Pi.next({type:this.Vn.event}));const t=this.Vn;this.Vn=this.Dn[this.Dn.indexOf(this.Vn)+1],t.event===o.fI.AdVideoComplete&&(this.An&&(this.$s.currentTime=.01),this.Bn=!1,this.stopAd("videoComplete"),this.Rn=!0)}}jn(t){try{this.$s.play().catch((i=>(0,E.nF)({level:E.D_.WARN,message:`AdManager_VastIntegrator_play_${t}`,exception:`playError: ${i.message}`,callStack:i.stack,sessionId:this.us})))}catch(i){(0,E.nF)({level:E.D_.WARN,message:`AdManager_VastIntegrator__play_${t}`,exception:`promiseError: ${i.message}`,callStack:i.stack})}}Gn(){this.Jn&&(this.Jn.removeAttribute("tabindex"),this.Jn.removeAttribute("aria-disabled")),this.Pi.next({type:o.fI.AdImpression,payload:{}})}}var V=e(6153),j=e(5650);class U extends a.I{constructor(t,i){super(t,i),this.wi=t,this.settings=i,this.adMediaType="cnxMedia",this.adSourceType=n.ProtoAdsourceTypeEnum.CnxMedia,this.Kn=[]}initAd(t,i,e,s,n,r,a){try{let h;super.initAd(t,i,e,s,n,r,a);let c=!1;if((0,A.QM)(this.settings.externalMediaFile))h=this.Zn(this.settings.externalMediaFile);else if((0,A.QM)(this.settings.externalHlsFile))h=this.Zn(this.settings.externalHlsFile),c=!0;else{if(!(0,j.BZ)(this.settings.renditions))return void this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.CnxMediaNoRenditions,errorCode:u.O.MediaFileNotFound}});h=this.tr(this.settings.renditions,i,this.settings.mediaId)}this.ir=h,this.sr=new $(this.settings.globalDomUtilsService,this.ir,this.Si,this.settings.os,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.clickUrl,this.settings.shouldLoopAdWhenFinished,this.settings.sessionId,this.settings.shouldPauseAdWhenFinished,c,this.settings.hlsModule,this.settings.isInApp,this.settings.pageDomain),this.Kn.push(this.sr.onVpaidEvent.subscribe((t=>{this.Hi(t)}))),this.sr.initAd(t,i,e,s,n,{slot:this.Ai,videoSlot:this.Si})}catch(t){this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.AdaptorInitAdError+`_${t.message}`,errorCode:u.O.GeneralError}})}}startAd(){try{super.startAd(),this.sr.startAd()}catch(t){this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.AdaptorStartAdError+`_${t.message}`,errorCode:u.O.GeneralError}})}}stopAd(t){super.stopAd(t),this.sr?this.sr.stopAd(t):(0,E.nF)({message:"stopAd",exception:t,level:E.D_.WARN,sessionId:this.settings.sessionId})}resizeAd(t,i,e){try{this.sr.resizeAd(t,i,e)}catch(t){this.Re("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.sr.pauseAd()}catch(t){this.Re("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.sr.resumeAd()}catch(t){this.Re("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this.sr.expandAd()}catch(t){this.Re("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this.sr.collapseAd()}catch(t){this.Re("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.sr.skipAd()}catch(t){this.Re("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.sr.getAdRemainingTime()}catch(t){return this.Re("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.sr?this.sr.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.Re("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.sr.getAdVolume()}catch(t){return this.Re("CnxMediaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.sr.getAdMediaWidth(),height:this.sr.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.sr.setAdVolume(t)}catch(t){this.Re("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.ir}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}ce(){var t;if(!this.settings.shouldPauseAdWhenFinished&&!this.settings.shouldLoopAdWhenFinished)try{super.ce(),(0,d.i)(this.Kn),null===(t=this.sr)||void 0===t||t.destroy()}catch(t){this.Re("CnxMediaBidAdaptor","_destroy",t)}}Zn(t){return(null==t?void 0:t.includes(V.n.endPoints.base.video))?this.he.appendParamsToUrl(t):t}tr(t,i,e){let s;s=t.filter((t=>t.codec===R.L5.H264));const n=(0,O.DE)(i,s.map((t=>t.height)));return s=s.filter((t=>t.height===n)),s.length>0?this.he.appendParamsToUrl(`${V.n.endPoints.base.video}${e}/${s[0].file}`):null}}class q{constructor(t,i,e,s){this.imageUrl=t,this.nr=i,this.us=e,this.ds=s,this.$e=new h.x,this.He=new h.x,this.rr=new h.x,this.gs=new h.x,this.Ui=[]}get onDisplayAd(){return this.$e.asObservable()}get onError(){return this.He.asObservable()}get onClickAd(){return this.rr.asObservable()}get onClickClose(){return this.gs.asObservable()}destroy(){var t;null===(t=this.ys)||void 0===t||t.destroy()}initializeAd(t,i,e,s){this.hr=t,this.ar(s,i,e)}getAdMediaDimensions(){var t;return null===(t=this.ys)||void 0===t?void 0:t.getAdMediaDimensions()}ar(t,i,e){this.cr=this.nr.createElement("img"),this.cr.onload=()=>{this.dr(t,i,e)},this.cr.onerror=()=>{this.He.next(o.RG.VastNonLinearImageLoadFailure)},this.cr.src=this.imageUrl}dr(t,i,e){const s=this.lr(t,i,e);this.ur(s,t,i)}lr(t,i,e){let s;return s=t?this.vr(i,e):`height:${i.height}px; width: ${i.width}px;`,`<img alt='' src="${this.imageUrl}" style="${s} display: block; pointer-events: all; cursor: pointer">`}ur(t,i,e){this.ys=new c.IV(n.ProtoAdType.Nonlinear,t,o.ZJ.Html,this.hr,this.nr,this.us,this.ds,{height:e.height,width:e.width,scalable:i?{maxHeightPercent:y.O.NON_LINEAR_MAX_HEIGHT_PERCENT,maxWidthPercent:y.O.NON_LINEAR_MAX_WIDTH_PERCENT}:null}),this.Ui.push(this.ys.onDisplayAd.subscribe((()=>{this.$e.next()})),this.ys.onClickClose.subscribe((()=>{this.gs.next()})),this.ys.onClickAd.subscribe((()=>{this.rr.next()})),this.ys.onError.subscribe((()=>{this.He.next(o.RG.DisplayIntegratorIframeLoad)}))),this.ys.createBanner(e)}vr(t,i){const e=(0,O.Tc)(i.height,y.O.NON_LINEAR_MAX_HEIGHT_PERCENT),s=(0,O.Tc)(i.width,y.O.NON_LINEAR_MAX_WIDTH_PERCENT),n=t.height/e;return t.width/s>n?"width: 100%;":"height: 100%;"}}var H=e(8576);const z={[p.n.FirstQuartile]:o.fI.AdVideoFirstQuartile,[p.n.SecondQuartile]:o.fI.AdVideoMidpoint,[p.n.ThirdQuartile]:o.fI.AdVideoThirdQuartile,[p.n.FourthQuartile]:o.fI.AdVideoComplete};class W extends a.I{constructor(t,i){super(t,i),this.wi=t,this.settings=i,this.adMediaType="nonLinearVast",this.adSourceType=n.ProtoAdsourceTypeEnum.VastMedia,this.gr=[],this.bs=500,this.yr=0,this.nonLinearOnClick=()=>{this.Ir.nonLinearClickTracking.uri&&this.settings.globalDomUtilsService.trackWithImages([this.Ir.nonLinearClickTracking.uri]),this.Ir.nonLinearClickThrough&&this.settings.globalDomUtilsService.open(this.Ir.nonLinearClickThrough,H.bS.Blank),this.Hi({type:o.fI.AdClickThru,payload:{}})}}initAd(t,i,e,s,n,r,a){try{if(super.initAd(t,i,e,s,n,r,a),!(0,j.BZ)(this.settings.vastResponse.nonLinearFiles))return this.te=I.Oq.NonlinearSupportedTypeNotFound,void this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.NonLinearUnsupportedMedia,errorCode:this.te}});if(this.Ir=this.Pr(),!this.Ir)return this.te=I.Oq.NonlinearExpectingDifferentSize,void this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.NonLinearUnsupportedMedia,errorCode:this.te}});this.wr(),this.Ar(),this.Hi({type:o.fI.AdLoaded,payload:{}})}catch(t){(0,A.$K)(this.te)||(this.te=I.Oq.NonlinearGeneralError),this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.AdaptorInitAdError+`_${t.message}`,errorCode:this.te}})}}startAd(){super.startAd(),this.ts.start(),this.gr.push(this.Sr.onDisplayAd.subscribe((()=>{this.Hi({type:o.fI.AdStarted}),this.Hi({type:o.fI.AdVideoStart}),this.Hi({type:o.fI.AdImpression,payload:{}})})),this.Sr.onError.subscribe((t=>{this.te=I.Oq.NonlinearUnableToFetchResource,this.Hi({type:o.fI.AdError,payload:{errorMessage:t,errorCode:this.te}})})),this.Sr.onClickAd.subscribe((()=>this.nonLinearOnClick())),this.Sr.onClickClose.subscribe((()=>{this.Hi({type:o.fI.AdUserClose,payload:{}}),this.stopAd(r.h)})));const t={height:this.Ir.height,width:this.Ir.width},i={height:this.Si.clientHeight,width:this.Si.clientWidth};this.Sr.initializeAd(this.Ai,t,i,this.Ir.scalable)}get adVideoUrl(){return this.Ye}get declaredDurationInSeconds(){return this.yr/f.s_}getAdMediaSize(){var t;return null===(t=this.Sr)||void 0===t?void 0:t.getAdMediaDimensions()}resizeAd(t,i,e){}pauseAd(){try{this.ts.stop(),this.Hi({type:o.fI.AdPaused}),this.Pe()}catch(t){this.Re("NonLinearVastBidAdaptor","pauseAd",t)}}resumeAd(){this.ts.start(),this.Pe()}expandAd(){}collapseAd(){}getAdRemainingTime(){return this.ts.timeRemaining}getAdDuration(){return this.yr/f.s_}getAdVolume(){return 0}wr(){this.Ir.staticResource&&(this.Sr=new q(this.Ir.staticResource.uri,this.settings.globalDomUtilsService,this.settings.sessionId,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),this.Ye=this.Ir.staticResource.creativeType,this._r())}_r(){this.Si.style.visibility="hidden"}Ar(){var t;this.yr=(null===(t=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===t?void 0:t.nonLinearAdTimeSeconds)*f.s_,this.ts=new m.B(this.wi,this.yr,this.bs),this.gr.push(this.ts.onTimeUpdate.subscribe((()=>{this.Hi({type:o.fI.AdRemainingTimeChange})})),this.ts.onTimeElapsed.subscribe((()=>{this.stopAd("nonLinearTimerElapsed")})),this.ts.onQuartile.subscribe((t=>{this.Hi({type:z[t],payload:{}})})))}ce(){var t,i;try{super.ce(),null===(t=this.ts)||void 0===t||t.stop(),(0,d.i)(this.gr),null===(i=this.Sr)||void 0===i||i.destroy()}catch(t){this.Re("NonLinearBidAdaptor","_destroy",t)}}Pr(){let t;if(t=this.settings.vastResponse.nonLinearFiles.find((t=>!0===t.scalable)),!t){const i=(0,O.Tc)(this.Si.clientHeight,y.O.NON_LINEAR_MAX_HEIGHT_PERCENT);t=this.settings.vastResponse.nonLinearFiles.find((t=>t.height<=i&&t.width<=this.Si.clientWidth))}return t}}var G,X=e(5196);!function(t){t.VastIconsContainer="cnx-vast-icons",t.VastIcon="cnx-vast-icon"}(G||(G={}));class Q{constructor(t,i,e){this.wi=t,this.Pi=i,this.Tr=e,this.kr=[],this.Cr=[],this.bs=500,this.Cr.push(this.Pi.subscribe((t=>{t.type===o.fI.AdPaused&&this.Er(),t.type===o.fI.AdPlaying&&this.Mr()})))}init(){(0,A.$K)(this.Tr.offset)?this.Lr(this.Tr.offset,(()=>this.Br())):this.Br()}destroy(){var t;this.Rr(),this.Or.removeEventListener("click",this.Dr.bind(this)),null===(t=this.ts)||void 0===t||t.disable(),(0,d.i)(this.kr),(0,d.i)(this.Cr),this.kr=[],this.Cr=[]}Br(){this.Or=this.Nr(),this.Or.addEventListener("click",this.Dr.bind(this)),this.Tr.$container.appendChild(this.Or),(0,A.$K)(this.Tr.duration)&&this.Lr(this.Tr.duration,(()=>this.destroy())),(0,A.$K)(this.Tr.iconViewTracking)&&this.Tr.globalDomUtilsService.trackWithImages([this.Tr.iconViewTracking])}Lr(t,i){this.ts=new m.B(this.wi,t,this.bs),this.kr.push(this.ts.onTimeElapsed.subscribe((()=>{i()}))),this.ts.start()}Rr(){this.Or.remove()}Er(){var t;null===(t=this.ts)||void 0===t||t.stop()}Mr(){var t;null===(t=this.ts)||void 0===t||t.start()}Nr(){return this.Tr.globalDomUtilsService.createElementByString(`\n            <cnx\n                class="${G.VastIcon}"\n                style="\n                        position: absolute;\n                        ${this.Vr(this.Tr.xPosition)}\n                        ${this.Fr(this.Tr.yPosition)}\n                        ${this.jr(this.Tr.width)}\n                        ${this.Ur(this.Tr.height)}\n                    "\n                >\n                ${this.$r()}\n            </cnx>\n        `)}Vr(t){if(!(0,A.QM)(t)&&!(0,A.hj)(t))return"left: 0;";switch(t){case"left":return"left: 0;";case"right":return"right: 0;";default:return`left: ${t}px;`}}Fr(t){if(!(0,A.QM)(t)&&!(0,A.hj)(t))return"top: 0;";switch(t){case"top":return"top: 0;";case"bottom":return"bottom: 0;";default:return`top: ${t}px;`}}jr(t){return(0,A.QM)(t)||(0,A.hj)(t)?"auto"===t?`width: ${t};`:`width: ${t}px;`:"width: auto;"}Ur(t){return(0,A.QM)(t)||(0,A.hj)(t)?"auto"===t?`height: ${t};`:`height: ${t}px;`:"height: auto;"}Dr(){if(!(0,A.$K)(this.Tr.iconClicks))return;const{iconClickTracking:t,iconClickThrough:i}=this.Tr.iconClicks;(0,j.BZ)(t)&&this.Tr.globalDomUtilsService.trackWithImages(t),(0,A.QM)(i)&&this.Tr.globalDomUtilsService.open(i,H.bS.Blank)}}class J extends Q{$r(){return this.Tr.resource}}class Y extends Q{$r(){return`<iframe src="${this.Tr.resource}"/>`}}class K extends Q{$r(){return`<img src="${this.Tr.resource}"/>`}}const Z=["AdChoices"];class tt{constructor(t,i,e,s,n){this.We=t,this.qr=i,this.nr=e,this.wi=s,this.Pi=n,this.Hr=[]}initIcons(){if(!(0,j.BZ)(this.qr))return;const t=this.zr(this.qr);(0,j.BZ)(t)&&(this.Gr=this.Wr(),this.We.appendChild(this.Gr),t.forEach((t=>{const i=this.Xr(t);i.init(),this.Hr.push(i)})))}destroy(){for(;0!==this.Hr.length;){const t=this.Hr.length-1;this.Hr[t].destroy(),this.Hr.pop()}}Wr(){return this.nr.createElementByString(`<cnx class="${G.VastIconsContainer}"></cnx>`)}zr(t){let i=[...t].filter((t=>Z.includes(t.program))).filter((t=>(0,A.QM)(t.staticResource)||(0,A.QM)(t.htmlResource)||(0,A.QM)(t.iframeResource)));return i=(0,j.qy)("program",i.reverse()),i}Xr(t){const{width:i,height:e,xPosition:s,yPosition:n,staticResource:r,htmlResource:o,iframeResource:a,iconViewTracking:h,iconClicks:c,duration:d,offset:l}=t,u={globalDomUtilsService:this.nr,$container:this.Gr,resource:r||o||a,iconClicks:c,width:i,height:e,xPosition:s,yPosition:n,iconViewTracking:h,duration:d,offset:l};switch(u.resource){case r:return new K(this.wi,this.Pi,u);case o:return new J(this.wi,this.Pi,u);case a:return new Y(this.wi,this.Pi,u)}}}var it=e(9022),et=e(1828);class st{constructor(t,i,e,s,n){this.Jr=t,this.ls=i,this.us=e,this.Yr=s,this.ds=n,this.Kr={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.Jr}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Yr}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Yr}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.io=new et.o(this.ls,this.us)}eo(t){return this.io.loadIframe({customHead:this.Kr.headTamplate,customHtml:this.Kr.bodyTamplate,container:t,customReportingLog:{heavyAdBlockTypeEnum:n.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.ds},iframeClass:"omid-elem",title:it.$b})}loadAdUnitIframe(t){return new Promise(((i,e)=>{this.eo(t).then((t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)})).catch((t=>{e(t)}))}))}destroyAdUnit(){var t,i;try{const e=null===(i=null===(t=this.io.iframe)||void 0===t?void 0:t.contentWindow)||void 0===i?void 0:i.clearAll;e&&e()}catch(t){const{message:i,stack:e}=(0,k.W$)(t);(0,E.nF)({message:"AdManager_VPAIClient_destroyAdUnit",exception:i,callStack:e,level:E.D_.WARN,sessionId:this.us},{throttle:2,shouldSendMaxLog:!0})}this.io.destroy(),this.io=null}}var nt;!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(nt||(nt={}));class rt extends a.j{constructor(t,i,e,s,n,r,a){super(),this.Pn=t,this.ls=i,this.us=e,this.so=s,this.ds=n,this.ki=r,this._s=a,this.no=[],this.ro=new Set,this.oo=new Set,this.ho=(t,i,e)=>{const s={url:t,playerHandles:e};this.ao(o.fI.AdClickThru,s)},this.ao=(t,i)=>{if(this.oo.add(t),!this.ro.has(t))return t!==o.fI.AdImpression||this.oo.has(o.fI.AdLoaded)?void this.co(t,i):((0,E.nF)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.ds}_creativeId:${this.ki}_vpaidSrc:${this.Pn}`,callStack:JSON.stringify((0,j.ee)(this.oo)),level:E.D_.WARN,sessionId:this.us},{throttle:1e3}),this.ro.add(o.fI.AdLoaded),void this.co(o.fI.AdLoaded,i))},this.co=(t,i)=>{switch(t){case o.fI.AdError:this.Pi.next({type:o.fI.AdError,payload:{errorMessage:(0,A.HD)(i)?i:JSON.stringify(i),errorCode:I.Oq.GeneralVpaidError}});break;case o.fI.AdLoaded:this.Pi.next({type:o.fI.AdLoaded,payload:{skipOffset:(0,A.as)(i)?i.skipOffset:void 0}});break;case o.fI.AdImpression:this.Pi.next({type:o.fI.AdImpression,payload:{}});break;case o.fI.AdClickThru:this.Pi.next({type:o.fI.AdClickThru,payload:(0,A.as)(i)?i:{}});break;default:this.Pi.next({type:o.fI[t]})}}}initAd(t,i,e,s,n,r){try{this.Ps=t,this.ws=i,this.js=e,this.uo=s,this.po=n,this.fo=r,this.vo=new st(this.Pn,this.ls,this.us,this.so,this.ds),this.mo=this.vo.loadAdUnitIframe(r.slot).then((t=>{this.yo(t)})).catch((t=>{this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.VpaidOnLoad,errorCode:I.Oq.GeneralVpaidError}})}))}catch(t){this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.VpaidOnLoad,errorCode:I.Oq.GeneralVpaidError}})}}startAd(){try{this.oo.has(o.fI.AdImpression)&&!this.ro.has(o.fI.AdImpression)&&((0,E.nF)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.ds}_creativeId:${this.ki}_vpaidSrc:${this.Pn}`,callStack:JSON.stringify((0,j.ee)(this.oo)),level:E.D_.WARN,sessionId:this.us},{throttle:1e3}),this.ro.add(o.fI.AdImpression),this.Pi.next({type:o.fI.AdImpression,payload:{}})),this.bo.startAd()}catch(t){this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.WrapperStartAdError,errorCode:I.Oq.GeneralVpaidError}})}}stopAd(t){var i;null===(i=this.mo)||void 0===i||i.then((()=>{this.bo?this.bo.stopAd(t):(0,E.nF)({message:"stopAd",exception:t,level:E.D_.WARN,sessionId:this.us})}))}resizeAd(t,i,e){this.bo.resizeAd(t,i,e)}pauseAd(){this.bo.pauseAd()}resumeAd(){this.bo.resumeAd(),this._s===P.M.Ios&&(0,S.UR)(this.fo.videoSlot)}expandAd(){this.bo.expandAd()}collapseAd(){this.bo.collapseAd()}skipAd(){this.bo.skipAd()}getAdRemainingTime(){return this.bo.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.bo)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.bo.getAdVolume()}setAdVolume(t){this.bo.setAdVolume(t)}destroy(){var t;try{this.Io(),this.no.length=0,this.bo=null,null===(t=this.vo)||void 0===t||t.destroyAdUnit()}catch(t){const{message:i,stack:e}=(0,k.W$)(t);(0,E.nF)({level:E.D_.WARN,message:"AdManager_VpaidIntegrator_destroyAd",exception:i,callStack:e,sessionId:this.us})}}yo(t){const i=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof i){const e=i();this.bo=e,this.Po(),this.wo(e)?e.initAd(this.Ps,this.ws,this.js,this.uo,this.po,{slot:t.adContainer,videoSlot:this.fo.videoSlot}):this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.VpaidInvalid,errorCode:I.Oq.GeneralVpaidError}})}else this.Pi.next({type:o.fI.AdError,payload:{errorMessage:o.RG.VpaidGetVpaidAdError,errorCode:I.Oq.MediaFileNotFound}})}Po(){Object.keys(o.fI).forEach((t=>{let i=this.ao.bind(this,o.fI[t]);o.fI[t]===o.fI.AdClickThru&&(i=this.ho),this.no.push({handler:i,event:t}),this.bo.subscribe(i,t)}))}Io(){this.no.forEach((t=>{this.bo.unsubscribe(t.handler,t.event)}))}wo(t){return Object.keys((0,j.ti)(nt)).every((i=>(0,A.mf)(t[nt[i]])))}}var ot=e(3199),at=e(4656),ht=e(1280),ct=e(9906);const dt=["fb1bdb1d-9743-4237-94e3-35d254e13564","e9d12322-f412-4a4a-aacc-a0d36f91544c","cbee7f7d-b0ba-453b-a28f-a23bc304481e"],lt=["omid"];class ut extends a.I{constructor(t,i){super(t,i),this.wi=t,this.settings=i,this.adSourceType=n.ProtoAdsourceTypeEnum.Unknown,this.Cr=[],this.creativeId=i.vastResponse.creativeId,this.Ao=ct.h.getSessionChildContainer(this.settings.sessionId).resolve(ht.G)}initAd(t,i,e,s,r,a,h){try{super.initAd(t,i,e,s,r,a,h),(0,w.A)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.linearClickThrough).then((r=>{var a;if(r)return void this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.DomainBlocked,errorCode:L.Oq.GeneralError}});if(this.So=this._o(t,this.Si),null===this.So)return void this.Hi({type:o.fI.AdError,payload:{errorMessage:o.RG.VastUnsupportedMedia,errorCode:L.Oq.MediaFileNotFound}});(null===(a=this.So.src)||void 0===a?void 0:a.includes(V.n.endPoints.base.video))&&(this.So.src=this.he.appendParamsToUrl(this.So.src)),this.adMediaType=this.So.type,this.So.getMediaFileType()===L.y$.Video?(this.To=new $(this.settings.globalDomUtilsService,this.So.src,this.Si,this.settings.os,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.vastResponse.linearClickThrough,this.settings.shouldLoopAdWhenFinished,this.settings.sessionId),this.adSourceType=n.ProtoAdsourceTypeEnum.VastMedia):(this.To=new rt(this.So.src,this.settings.globalDomUtilsService,this.settings.sessionId,this.oe,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=n.ProtoAdsourceTypeEnum.Vpaid),(0,j.BZ)(this.settings.vastResponse.icons)&&(this.xo=new tt(this._i,this.settings.vastResponse.icons,this.settings.globalDomUtilsService,this.wi,this.To.onVpaidEvent)),this.Cr.push(this.To.onVpaidEvent.subscribe((t=>{var i;if(t.type===o.fI.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset,t.payload.containers={slot:this.Ai,videoSlot:this.Si},t.payload.verificationScriptResources=this.settings.vastResponse.verifications.filter((t=>{var i;return(0,j.d3)(null===(i=t.javaScriptResource)||void 0===i?void 0:i.apiFramework,lt)})).map((t=>({javaScriptResource:t.javaScriptResource.url,vendor:t.vendor,verificationParameters:t.verificationParameters,trackingEvents:t.trackingEvents})))),t.type===o.fI.AdClickThru){this.ko=t.payload.url;const i=t.payload.url||this.settings.vastResponse.linearClickThrough;i&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(i,H.bS.Blank)}t.type===o.fI.AdStarted&&(null===(i=this.xo)||void 0===i||i.initIcons()),t.type===o.fI.AdError&&(this.te=t.payload.errorCode),this.Hi(t)})));const h={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.To.initAd(t,i,e,s,h,{slot:this.Ai,videoSlot:this.Si})})).catch((t=>{this.Co(t)}))}catch(t){this.Co(t)}}startAd(){try{super.startAd();const t=this.settings.adLoadedPayload.payload.vastVerifications;if(!(0,j.BZ)(t))return void this.To.startAd();this.Ao.isOmsdkFullSupport?this.Cr.push(this.Ao.omidResourcesReady.pipe((0,X.P)((t=>t))).subscribe((()=>{this.To.startAd()})),this.Ao.verificationNotExecuted.subscribe((()=>{this.Eo()}))):(this.Eo(),this.To.startAd())}catch(t){const i=this.te||L.Oq.GeneralLinearError;this.te=i,this.Hi({type:o.fI.AdError,payload:{errorCode:i,errorMessage:o.RG.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.To?this.To.stopAd(t):(0,E.nF)({message:"stopAd",exception:t,level:E.D_.WARN,sessionId:this.settings.sessionId})}resizeAd(t,i,e){try{this.To.resizeAd(t,i,e)}catch(t){this.Re("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.To.pauseAd()}catch(t){this.Re("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.To.resumeAd()}catch(t){this.Re("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.To.expandAd()}catch(t){this.Re("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.To.collapseAd()}catch(t){this.Re("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.To.skipAd()}catch(t){this.Re("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.To.getAdRemainingTime()}catch(t){return this.Re("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.To&&this.To.getAdDuration()||Math.round(this.settings.vastResponse.duration/f.s_)}catch(t){return this.Re("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.To.getAdVolume()}catch(t){return this.Re("VastBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){let t=0,i=0;return this.To instanceof $?(t=this.To.getAdMediaWidth(),i=this.To.getAdMediaHeight()):(t=this.So.width,i=this.So.height),{width:t,height:i}}setAdVolume(t){try{super.setAdVolume(t),this.To.setAdVolume(t)}catch(t){this.Re("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.So)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/f.s_}_e(t){const i=super._e(t);return this.Mo(i)}Se(t){const i=super.Se(t);return this.Mo(i)}ce(){var t,i;if(!this.settings.shouldLoopAdWhenFinished)try{super.ce(),(0,d.i)(this.Cr),null===(t=this.To)||void 0===t||t.destroy(),null===(i=this.xo)||void 0===i||i.destroy()}catch(t){this.Re("VastBidAdaptor","_destroy",(0,k.W$)(t))}}Mo(t){var i;return t.payload.adSourceData.name=null===(i=this.settings.vastResponse)||void 0===i?void 0:i.adTitle,t.payload.clickThroughUrl=this.ko||this.settings.vastResponse.linearClickThrough,t}Lo(t,i){return t.filter((t=>t.getMediaFileType()===L.y$.Video))}_o(t,i){const e=this.Lo(this.settings.vastResponse.mediaFiles,i),s=e.filter((t=>"video/mp4"===t.type)),n=this.settings.vastResponse.mediaFiles.filter((t=>t.getMediaFileType()===L.y$.Javascript));return this.Bo()&&this.Oo()&&n.length?(0,at.qD)(n,t):s.length?(0,at.qD)(s,t):e.length?(0,at.qD)(e,t):n.length?(0,at.qD)(n,t):null}Oo(){const{advertiserLineItemId:t}=this.settings.adManagerLineItem.protoLineItem;return dt.includes(t)}Bo(){const t=this.settings.vastResponse.extensions.filter((t=>t.type===L.Uq.AdVerifications));return(0,j.BZ)(t)||(0,j.BZ)(this.settings.vastResponse.verifications)}Co(t){const i=this.te||L.Oq.GeneralLinearError;this.te=i,this.Hi({type:o.fI.AdError,payload:{errorCode:i,errorMessage:o.RG.AdaptorInitAdError+`_${t.message}`}})}Eo(){ot.Mz.trackError(this.settings.vastTracker.adError,this.settings.adMacroReplacer,this.settings.adManagerLineItem.protoLineItem,this.settings.callingState,this.settings.plcmt,L.Oq.VerificationUnitNotExecuted)}}},3682:(t,i,e)=>{"use strict";e.d(i,{cO:()=>s,ih:()=>r,IV:()=>m});var s,n=e(4798);!function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(s||(s={}));class r{constructor(t){this.Do=t,this.Vo=new Map,(0,n.$K)(this.Do.settings.bidLifecycle)||(this.Do.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this.Vo.set(t,Date.now()),t){case s.AdLoaded:this.Fo();break;case s.AdImpression:this.jo()}}Fo(){this.Do.settings.bidLifecycle.winToAdLoadedTime=this.Uo}jo(){this.Do.settings.bidLifecycle.startAdToImpressionTime=this.$o}get $o(){return this.Vo.get(s.AdImpression)&&this.Vo.get(s.AdStarted)?this.Vo.get(s.AdImpression)-this.Vo.get(s.AdStarted):0}get Uo(){return this.Vo.get(s.AdLoaded)&&this.Vo.get(s.Win)?this.Vo.get(s.AdLoaded)-this.Vo.get(s.Win):0}}var o=e(6716),a=e(289);var h=e(6888),c=e(8983),d=e(9022),l=e(9223),u=e(1828),p=e(3020);const f=`\n            <div class=${c.p0.CloseButton} role='button' aria-label='Close ad' tabindex='0'>\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73 18"><path d="M32.266 8.293c-.105.902-.439 1.6-1.002 2.092s-1.303.732-2.233.732c-1.008 0-1.816-.361-2.426-1.084s-.908-1.689-.908-2.9v-.82c0-.793.141-1.49.422-2.092s.688-1.062 1.207-1.383 1.121-.486 1.805-.486c.906 0 1.633.254 2.18.762s.865 1.203.955 2.098h-1.131c-.098-.68-.311-1.172-.639-1.477s-.779-.457-1.365-.457c-.719 0-1.283.266-1.693.797s-.609 1.287-.609 2.268v.826c0 .926.193 1.662.58 2.209s.928.82 1.623.82c.625 0 1.104-.141 1.436-.422s.559-.779.668-1.482h1.131zM34.815 11h-1.084V2h1.084v9zm1.453-3.229c0-.621.121-1.18.363-1.676s.586-.879 1.02-1.148a2.79 2.79 0 0 1 1.494-.404c.863 0 1.561.299 2.092.897s.803 1.393.803 2.385V7.9c0 .617-.119 1.172-.357 1.664a2.67 2.67 0 0 1-1.014 1.143c-.437.273-.941.41-1.512.41-.859 0-1.557-.299-2.092-.896s-.797-1.389-.797-2.373v-.076zm1.09.129c0 .703.162 1.268.486 1.693a1.57 1.57 0 0 0 1.312.639c.551 0 .988-.215 1.313-.645s.486-1.039.486-1.816c0-.695-.166-1.258-.498-1.687a1.56 1.56 0 0 0-1.312-.65c-.535 0-.967.213-1.295.639s-.492 1.035-.492 1.828zm9.732 1.418c0-.293-.111-.52-.334-.68s-.604-.305-1.154-.422-.982-.258-1.307-.422-.559-.359-.715-.586-.229-.496-.229-.809c0-.52.219-.959.656-1.318s1.004-.539 1.688-.539c.719 0 1.301.186 1.746.557s.674.846.674 1.424h-1.09c0-.297-.127-.553-.381-.768s-.566-.322-.949-.322c-.395 0-.703.086-.926.258a.81.81 0 0 0-.334.674c0 .262.104.459.311.592s.58.26 1.119.381.983.266 1.318.434.584.371.744.609a1.5 1.5 0 0 1 .246.861 1.63 1.63 0 0 1-.68 1.365c-.453.34-1.041.51-1.764.51-.508 0-.957-.09-1.348-.27s-.697-.43-.92-.75a1.84 1.84 0 0 1-.328-1.049h1.084c.02.363.164.652.433.867s.633.316 1.078.316c.41 0 .738-.082.984-.246a.77.77 0 0 0 .375-.668zm5.127 1.799c-.859 0-1.559-.281-2.098-.844s-.809-1.322-.809-2.267v-.199c0-.629.119-1.189.358-1.682s.578-.883 1.008-1.16a2.56 2.56 0 0 1 1.406-.422c.824 0 1.465.271 1.922.814s.686 1.32.686 2.332v.451h-4.295c.016.625.197 1.131.545 1.518s.797.574 1.336.574c.383 0 .707-.078.973-.234a2.44 2.44 0 0 0 .697-.621l.662.516c-.531.816-1.328 1.225-2.391 1.225zm-.135-5.684a1.44 1.44 0 0 0-1.102.481c-.297.316-.48.762-.551 1.336h3.176v-.082c-.031-.551-.18-.977-.445-1.277s-.625-.457-1.078-.457zM62.84 11c-.062-.125-.113-.348-.152-.668-.504.523-1.105.785-1.805.785-.625 0-1.139-.176-1.541-.527a1.71 1.71 0 0 1-.598-1.348c0-.66.25-1.172.75-1.535s1.211-.551 2.121-.551h1.055v-.498c0-.379-.113-.68-.34-.902s-.561-.34-1.002-.34c-.387 0-.711.098-.973.293s-.393.432-.393.709h-1.09c0-.316.111-.621.334-.914s.531-.531.914-.703.811-.258 1.272-.258c.73 0 1.303.184 1.717.551s.629.865.645 1.506v2.918c0 .582.074 1.045.223 1.389V11H62.84zm-1.799-.826c.34 0 .662-.088.967-.264s.525-.404.662-.686v-1.3h-.85c-1.328 0-1.992.389-1.992 1.166 0 .34.113.605.34.797s.517.287.873.287zm4.148-2.396c0-.973.23-1.754.691-2.344a2.18 2.18 0 0 1 1.811-.891c.742 0 1.33.254 1.764.762V2h1.084v9h-.996l-.053-.68c-.434.531-1.037.797-1.811.797a2.17 2.17 0 0 1-1.799-.902c-.461-.601-.691-1.387-.691-2.355v-.082zm1.084.123c0 .719.148 1.281.445 1.687s.707.609 1.23.609c.688 0 1.189-.309 1.506-.926V6.359a1.59 1.59 0 0 0-1.494-.896c-.531 0-.945.205-1.242.615s-.445 1.018-.445 1.822zM16 1.41L14.59 0 9 5.59 3.41 0 2 1.41 7.59 7 2 12.59 3.41 14 9 8.41 14.59 14 16 12.59 10.41 7 16 1.41z"/></svg>\n            </div>`.trim();class m{constructor(t,i,e,s,n,r,a,h){this.ps=t,this.zo=i,this.Go=e,this.Ai=s,this.ls=n,this.us=r,this.ds=a,this.Wo=h,this.Fe="div-cnx-display",this.$e=new o.x,this.gs=new o.x,this.He=new o.x,this.rr=new o.x,this.Xo=t=>{this.gs.next()},this.Qo=t=>{this.rr.next()}}get onDisplayAd(){return this.$e.asObservable()}get onError(){return this.He.asObservable()}get onClickClose(){return this.gs.asObservable()}get onClickAd(){return this.rr.asObservable()}createBanner(t){this.io=new u.o(this.ls,this.us),this.Jo=t?this.Yo(this.Ai,t):this.Ai;let i="";this.Go===h.ZJ.Html&&(i=this.zo);let e="",s="";switch(this.ps){case a.ProtoAdType.Overlay:e=`#${this.Fe}{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}`,s=`#${this.Fe}{border:3px solid white}`;break;case a.ProtoAdType.Nonlinear:e=`#${this.Fe}{width: 100%; height: 100%}`}const n="<style>html, body {position:relative;width:100%;height:100%}"+e+s+"#"+this.Fe+" iframe{display:block}</style>";this.io.loadIframe({customHead:n,customHtml:'<div id="'+this.Fe+'">'+i+"</div>",container:this.Jo,customReportingLog:{heavyAdBlockTypeEnum:a.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.ds},iframePosition:this.ps===a.ProtoAdType.Nonlinear?l.ai.relative:l.ai.absolute,iframeCustomDimensions:this.Wo?this.Wo:void 0,iframePointerEvents:l.P.all,title:d.$b}).then((t=>{this.Zo=t.iframe;const i=this.Zo.contentWindow;if(this.th=i.document.getElementById(this.Fe),this.Go===h.ZJ.Javascript&&(0,p.ML)(this.th,i,this.zo),""===this.Zo.contentWindow.document.head.innerHTML){const t=n;this.eh(t)}this.ps===a.ProtoAdType.Nonlinear&&this.sh(),this.$e.next()})).catch((t=>{this.He.next()}))}getAdMediaDimensions(){return{width:this.th.clientWidth||this.Zo.contentWindow.document.body.clientWidth,height:this.th.clientHeight||this.Zo.contentWindow.document.body.clientHeight}}destroy(){var t;null===(t=this.th)||void 0===t||t.removeEventListener("click",this.Qo),this.nh&&(this.nh.removeEventListener("click",this.Xo),this.Jo.removeChild(this.nh)),this.Zo&&this.Ai&&(0,p.bX)(this.Zo),this.io&&(this.io.destroy(),this.io=null)}sh(){var t;this.nh=this.ls.createElementByString(f),this.Jo.appendChild(this.nh),this.nh.addEventListener("click",this.Xo),null===(t=this.th)||void 0===t||t.addEventListener("click",this.Qo)}eh(t){const i=this.Zo.contentWindow.document.createElement("style"),e=this.Zo.contentWindow.document.createTextNode(t);i.appendChild(e),this.Zo.contentWindow.document.head.appendChild(i)}Yo(t,i){if(!i.width||!i.height)return t;let e,s;if(this.ps===a.ProtoAdType.Nonlinear)e=s="100%";else e=i.width+"px",s=i.height+"px";const n=this.ls.createElementByString(`<div class="cnx-iframe-container" style="width: ${e}; height: ${s}"></div>`);return t.appendChild(n),n}}},1307:(t,i,e)=>{"use strict";e.d(i,{qW:()=>n,oO:()=>o});e(8921);var s=e(9791);class n{get id(){return this.rh}get timestamp(){return this.oh}set timestamp(t){this.oh=t}constructor(){this.rh=(0,s.qs)()}}var r=e(4798);class o{constructor(t){this.data=t,(0,r.QM)(this.data.cnxBidId)||(this.data.cnxBidId=(0,s.qs)())}}e(5113)},7225:(t,i,e)=>{"use strict";var s;e.d(i,{t:()=>s}),function(t){t[t.Rtb=1]="Rtb",t[t.HeaderBidder=2]="HeaderBidder",t[t.Tam=3]="Tam"}(s||(s={}))},6899:(t,i,e)=>{"use strict";e.d(i,{t:()=>s.t,T:()=>r});var s=e(7225),n=e(289);const r={[n.ProtoCreativeTypeEnum.Rtb]:s.t.Rtb,[n.ProtoCreativeTypeEnum.HeaderBidder]:s.t.HeaderBidder,[n.ProtoCreativeTypeEnum.Tam]:s.t.Tam,[n.ProtoCreativeTypeEnum.TamDeal]:s.t.Tam,[n.ProtoCreativeTypeEnum.TamPrivateAuction]:s.t.Tam}},9592:(t,i,e)=>{"use strict";var s;e.d(i,{f:()=>s}),function(t){t.HandlingSdkUrl="HandlingSdkUrl",t.NetworkRequestUrl="NetworkRequestUrl",t.InvalidCreativeType="InvalidCreativeType",t.XmlInvalidString="XmlInvalidString",t.XmlParseGeneral="XmlParseGeneral",t.XmlInvalidTree="XmlInvalidTree",t.XmlInvalidAd="XmlInvalidAd",t.XmlAdaptorWrapperLimit="XmlAdaptorWrapperLimit",t.VastVersionNotSupported="VastVersionNotSupported",t.VastMediaFilesNotSupported="VastMediaFilesNotSupported",t.HTMLUnknownMimeType="HTMLUnknownMimeType",t.HTMLNotEnoughData="HTMLNotEnoughData",t.ImaAdsManagerInit="ImaAdsManagerInit",t.ImaVastEmptyResponse="ImaVastEmptyResponse",t.ImaRequestException="ImaRequestException",t.ImaTimeout="ImaTimeout",t.ImaInvalidResponse="ImaInvalidResponse",t.InvalidCreativeUrl="InvalidCreativeUrl",t.BidIsNotTargetingAllowedEver="BidIsNotTargetingAllowedEver",t.ExternalSdkTimeout="ExternalSdkTimeout",t.ExternalSdkInvalidResponse="ExternalSdkInvalidResponse",t.VastContainsBannedUrls="VastContainsBannedUrls"}(s||(s={}))},7689:(t,i,e)=>{"use strict";e.d(i,{Jd:()=>y,lU:()=>s,be:()=>n});var s,n,r=e(6716);!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(s||(s={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(n||(n={}));var o=e(5650),a=e(4798);const h=["octob.azureedge.net/oc.js","lzi.azureedge.net/lz.js","tinlc.azureedge.net/pt.js","bm-rb.azureedge.net/rb.js","foluo.azureedge.net/fo.js","vpv-ger.azureedge.net/VpaidVideoAd1.js"];class c{constructor(){this.hh=["viralgains","serving-sys.com","commercialadsdistributor",...h],this.ah=["beachfrontmedia","commercialadsdistributor",...h],this.dh=["commercialadsdistributor",...h],this.lh=["pixel.clearstream.tv","pixel.clrstm.com",...h],this.ph=new r.x,this.mh=new r.x}get onMalwareDetected(){return this.ph.asObservable()}get onBadUriDetected(){return this.mh.asObservable()}enforce(t,i){if((0,a.cL)(t)){this.gh=i;try{this.yh(t),this.bh(t),this.wh(t),this.Ah(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}Sh(t,i,e,s){t.every((t=>!e.includes(t)))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.mh.next({referenceId:this.gh,enforcementMessage:`${s}-${i}`}))}yh(t){const i=t.getAttribute("src");i&&(this.hh.forEach((t=>{i.includes(t)&&this.ph.next({referenceId:this.gh,enforcementMessage:`malware-${t}`})})),this.Sh(["//","about:blank","about:self","javascript:"],t,i,"iframe"))}bh(t){(0,o.Sz)(t.contentDocument.getElementsByTagName("script")).forEach((t=>{const i=t.getAttribute("src");i&&(this.ah.forEach((t=>{i.includes(t)&&this.ph.next({referenceId:this.gh,enforcementMessage:`malware-${t}`})})),this.Sh(["//"],t,i,"script"))}))}wh(t){(0,o.Sz)(t.contentDocument.getElementsByTagName("a")).forEach((t=>{const i=t.getAttribute("href");i&&this.dh.forEach((t=>{i.includes(t)&&this.ph.next({referenceId:this.gh,enforcementMessage:`malware-${t}`})}))}))}Ah(t){(0,o.Sz)(t.contentDocument.getElementsByTagName("img")).forEach((t=>{const i=t.getAttribute("src");i&&this.lh.forEach((t=>{i.includes(t)&&this.ph.next({referenceId:this.gh,enforcementMessage:`malware-${t}`})}))}))}}var d=e(3020),l=e(9607);class u{constructor(t,i){this._h=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.Th=t;try{this._h(this.Th)||this.xh(this.Th)}catch(t){(0,l.nF)({sessionId:i,message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:l.D_.CRITICAL})}}xh(t){(0,d.ML)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,i){if((0,a.cL)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const i=this._h(this.Th);i.eventListeners[t]&&(i.eventListeners[t].forEach((t=>{t.element.removeEventListener(t.type,t.handler,t.options)})),i.eventListeners[t]=[]),i.setInterval[t]&&(i.setInterval[t].forEach((t=>this.Th.clearInterval(t))),i.setInterval[t]=[]),i.setTimeout[t]&&(i.setTimeout[t].forEach((t=>this.Th.clearTimeout(t))),i.setTimeout[t]=[])}catch(t){}}}const p="cnxpl-vl",f="cnxpl-rf";class m{constructor(){this.kh=!0,this.Ch=new r.x,this.Eh=[],this.Mh=t=>{if(this.kh)return;const i=t.target;if(i.volume>0&&(i.volume=0,!i.paused)){const t=i.getAttribute(f);this.Ch.next(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this.Ch.asObservable()}enforce(t,i){let e=t;(0,a.cL)(t)&&(e=t.contentDocument||t.contentWindow.document),this.kh=!1;(0,o.Sz)(e.getElementsByTagName("video")).forEach((t=>{this.Lh(t,i)}))}stopEnforce(){this.kh=!0}clearEnforce(t){try{const i=[];this.Eh=this.Eh.filter((e=>e.getAttribute(f)!==t||(i.push(e),!1))),i.forEach((t=>{t.removeAttribute(p),t.removeAttribute(f),t.removeEventListener("volumechange",this.Mh)}))}catch(t){}}Lh(t,i){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(p,"true"),t.setAttribute(f,i),t.addEventListener("volumechange",this.Mh),this.Eh.push(t))}}class g{Bh(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){(0,a.cL)(t)&&this.Bh(t.contentWindow)}stopEnforce(){}clearEnforce(){}}var v=e(9600);class y{constructor(t,i,e,o){if(this.Rh=e,this.Oh=null,this.Dh=new Map,this.Vh=n.None,this.Fh=300,this.Ui=[],this.jh=new Map,this.Me=new r.x,this.Dh.set(n.MemoryLeak,new u(i,o)),e||this.Dh.set(n.ScrollHijack,new g),!t){const t=new m;this.Dh.set(n.Mute,t),this.Ui.push(t.onVolumeDetected.subscribe((t=>{this.$h(s.VOLUME_DETECTED,t,"")})))}const a=new c;this.Ui.push(a.onBadUriDetected.subscribe((t=>{this.$h(s.BADURI_DETECTED,t.referenceId,t.enforcementMessage)})),a.onMalwareDetected.subscribe((t=>{this.$h(s.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)}))),this.Dh.set(n.Malware,a)}get onEnforcerEvent(){return this.Me.asObservable()}registerContainer(t,i){this.jh.get(t)||this.jh.set(t,i)}deregisterContainer(t){this.jh.get(t)&&(this.Dh.forEach((i=>{i.clearEnforce(this.jh.get(t))})),this.jh.delete(t),this.jh.size||this.stop(n.All))}start(t){this.Rh&&(t^=n.ScrollHijack),this.Vh|=t,null===this.Oh&&(this.Oh=setInterval((()=>{try{this.jh.forEach(((t,i)=>{this.qh(i,t)}))}catch(t){}}),this.Fh))}stop(t){this.Vh&=~t,this.Vh===n.None&&(clearInterval(this.Oh),this.Oh=null),this.Dh.forEach(((i,e)=>{t&e&&i.stopEnforce()}))}destroy(){this.stop(n.All),(0,v.i)(this.Ui),this.jh.forEach(((t,i)=>{this.deregisterContainer(i)}))}qh(t,i){(0,o.Sz)(t.getElementsByTagName("iframe")).forEach((t=>{try{this.qh(t,i)}catch(t){}})),this.Dh.forEach(((e,s)=>{this.Vh&s&&e.enforce(t,i)}))}$h(t,i,e){let s;this.jh.forEach(((t,e)=>{t===i&&(s=e)})),this.Me.next({message:e,type:t,detectedContainer:s})}}},7626:(t,i,e)=>{"use strict";var s;e.d(i,{E:()=>s}),function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-text",t.AdDurationLabel="cnx-ad-duration",t.AdTitleLabel="cnx-ad-title",t.AdMarkerTitleContainer="cnx-ad-marker-title",t.AdMarkerTitleText="cnx-ad-title-text",t.CardImage="cnx-ad-card-image",t.CardTitle="cnx-ad-card-title",t.AdUiContent="cnx-ui-ad-content",t.InAd="cnx-ui-ad"}(s||(s={}))},4793:(t,i,e)=>{"use strict";var s,n;e.d(i,{Ek:()=>o.E,lc:()=>s,gx:()=>n,aB:()=>r}),function(t){t.ShowLinearEvent="showLinearEvent",t.HideLinearEvent="hideLinearEvent",t.PauseLinearEvent="pauseLinearEvent",t.ResumeLinearEvent="resumeLinearEvent",t.SkipLinearEvent="skipLinearEvent"}(s||(s={})),function(t){t.ShowNonLinearEvent="showNonLinearEvent",t.HideNonLinearEvent="hideNonLinearEvent"}(n||(n={}));var r,o=e(7626);!function(t){t.ForceStopAdSlot="forceStopAdSlot",t.ForceStopAdPod="forceStopAdPod",t.ChangeVideo="changeVideo"}(r||(r={}))},5078:(t,i,e)=>{"use strict";e.d(i,{f:()=>M});var s=e(6716),n=e(4793);var r=e(2300);var o=e(8576),a=e(8983),h=e(7263),c=e(3020),d=e(4798);class l extends h.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.zh=this.Gr.getElementsByClassName(a.mr.BackgroundImg)[0],this.Gh=this.Gr.getElementsByClassName(a.mr.Icon)[0],this.Gh.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"/></svg>',this.Wh=this.Gr.getElementsByClassName(a.mr.ButtonContainer)[0];const t=this.Gr.getElementsByClassName(a.mr.Button)[0];this.Qh=this.ls.createElementByString(`<a class="${a.mr.Wrapper}" href="#">`),this.Qh.target=o.bS.Blank,this.Qh.appendChild(t),this.Wh.innerHTML="",this.Wh.appendChild(this.Qh),this.Kh=this.Gr.getElementsByClassName(a.mr.InfoContainer)[0],this.Zh=this.Gr.getElementsByClassName(a.mr.FallbackContainer)[0],this.ta=this.Gr.getElementsByClassName(a.mr.SlotCountText)[0]}setBackgroundImg(t){(0,d.QM)(t)?((0,c.IV)(this.zh,a.Gj.DisplayNone),this.zh.src=t):(0,c.cn)(this.zh,a.Gj.DisplayNone)}setClickUrl(t){if(!(0,d.QM)(t))return(0,c.Ho)(this.Zh),void(0,c.MV)(this.Kh);(0,c.Ho)(this.Kh),(0,c.MV)(this.Zh),this.Qh.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.ta.innerHTML=`Loading ad ${e}/${s}`}}var u=e(9762),p=e(7309);class f extends p.h{constructor(){super(...arguments),this.eventList=[u.C[u.C.SkipAd],...this.eventList],this.ia=-1,this.ea=-1}initComponent(){super.initComponent(),this.hideComponent(),this.sa=this.Gr.getElementsByTagName("cnx-span")[0],this.sa.innerHTML="Ad",this.na=this.Gr.querySelectorAll(`.${a.Hs.Timer} svg`)[0],this.Gr.setAttribute("aria-label","Skip Ad")}setSecondsUntilSkip(t){this.ia=Math.ceil(t),this.ea=-1,this.ia>0&&(0,c.T7)(this.na,{"animation-duration":this.ia+"s"})}tickDown(t){const i=this.ia-Math.floor(t);if(i<0||0===this.ea)return;const e=(0,c.pv)(this.Gr,a.Hs.InTimer);this.ea=i,0===this.ea?(e&&(0,c.IV)(this.Gr,a.Hs.InTimer),this.sa.innerHTML="Ad"):(e||(0,c.cn)(this.Gr,a.Hs.InTimer),this.sa.innerHTML=`in ${this.ea}s`)}get tooltip(){}onClickHandler(){0===this.ea&&this.mediator.publish(this,u.C[u.C.SkipAd])}}const m=`<cnx class="cnx-ad-skip-button cnx-ui-btn" role="button" tabindex="0">\n    <cnx class="cnx-icon-button">\n        <cnx class="cnx-skip-ad-text">\n            Skip&nbsp;<cnx-span></cnx-span>\n        </cnx>\n        <cnx class="cnx-skip-ad-icon">\n            ${e(9040)}\n        </cnx>\n    </cnx>\n    <cnx class="cnx-timer-loader">\n        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36"><circle class="cnx-svg-circle-stroke" cx="18" cy="18" r="17"/></svg>\n\n    </cnx>\n</cnx>`;var g=e(1277),v=e(9391),y=e(1612);class b extends y.A{constructor(){super(...arguments),this.ra={[r.r.VolumeControls]:t=>new g.N(t,this.ls,v.Z,this),[r.r.AdLoadingScreen]:t=>new l(t,this.ls,this.oa,'<cnx class="cnx-pod-loading-screen-container"><img alt="Loading Pods" class="cnx-pod-loading-background"><cnx class="cnx-pod-loading-info"><cnx class="cnx-pod-open-new-icon"></cnx><cnx class="cnx-pod-visit-website-text"><cnx-span>Visit Advertiser website</cnx-span></cnx><cnx class="cnx-pod-read-more-container"><cnx-span class="cnx-pod-read-more-btn">GO TO PAGE</cnx-span></cnx></cnx><cnx class="cnx-pod-loading-fallback"><cnx class="cnx-pod-loading-spinner"></cnx><cnx-span class="cnx-pod-slot-count-text"></cnx-span></cnx></cnx>'),[r.r.SkipAdButton]:t=>new f(t,this.ls,this.oa,m,this.Tr.isMobile)},this.ha=t=>i=>{var e,s;return null===(s=(e=this.ra)[t])||void 0===s?void 0:s.call(e,i)}}createComponent(t,i){return this.ha(t)(i)||super.createComponent(t,i)}}var I=e(9490),P=e(8395),w=e(1e3),S=e(3052),A=e(4291);class x extends A.d{initState(){super.initState()}exitState(){super.exitState()}}var _=e(2246),T=e(7332);class C extends _.ai{constructor(){super(...arguments),this.aa=100}ca(){if(this.elapsedTimeoutId||!this.da.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout((()=>{this.da.elapsedTime+=(Date.now()-t)/1e3;const i=this.da.getComponent(r.r.ProgressBar);i&&i.setProgress((0,T.dQ)(0,this.da.duration,0,100,this.da.elapsedTime)),this.elapsedTimeoutId=null,this.ca()}),this.aa)}initState(){super.initState(),this.da.duration&&this.ca()}exitState(){super.exitState(),this.da.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}var k=e(9906),E=e(5650);class M extends S.q{constructor(t,i,e,r,o,h={}){super(r,t,o,new b(t,e,r,h),h),this.la=i,this.$container=r,this.settings=h,this.pa=new s.x,this.fa={[I.Ez.PlayingState]:new C(this),[I.Ez.PausedState]:new x(this)},this.va=0,this.ma=null,this.ga=t=>{(0,c.og)(this.$uiContainer,a.s6.UiInView,t)},this.ya.setDistanceValues({top:4,bottom:4}),this.fa[I.Ez.PausedState].enterState(),this.ba=this.$container.querySelector(`.${n.Ek.CardImage}`),this.Ia=this.$container.querySelector(`.${n.Ek.CardTitle}`),this.Pa=this.$container.querySelector(`.${n.Ek.AdMarkerTitleText}`),this.wa=this.$container.querySelector(`.${n.Ek.AdUiContent}`),this.wi=k.h.getGlobalContainer().resolve(P.f)}get onUiEvent(){return this.pa.asObservable()}Aa(t,i,e){var s,n,o;switch(super.Aa(t,i,e),t){case u.C[u.C.Volume]:{const t=i.payload;this.pa.next({type:u.C.Volume,payload:{volume:t}});break}case u.C[u.C.Seek]:{const t=i.payload;this.pa.next({type:u.C.Seek,payload:{seek:t}});break}case u.C[u.C.Quality]:{const t=i.payload;this.pa.next({type:u.C.Quality,payload:{quality:t}});break}case u.C[u.C.HoverStart]:{const t=null===(s=null==i?void 0:i.payload)||void 0===s?void 0:s.targetComponent;this.pa.next({type:u.C.HoverStart,payload:t?{targetComponent:t}:void 0});break}case u.C[u.C.FocusStart]:this.Sa();break;case u.C[u.C.HoverEnd]:{const t=null===(n=null==i?void 0:i.payload)||void 0===n?void 0:n.targetComponent;this.pa.next({type:u.C.HoverEnd,payload:t?{targetComponent:t}:void 0});break}case u.C[u.C.StateChanged]:{const t=null===(o=null==i?void 0:i.payload)||void 0===o?void 0:o.targetComponent;this.pa.next({type:u.C.StateChanged,payload:t?{targetComponent:t}:void 0});break}case u.C[u.C.RebindComponent]:{const t=i.payload;this.pa.next({type:u.C.RebindComponent,payload:{uiComponentEnum:t}});break}case r.r[r.r.CloseButton]:this.pa.next({type:u.C.Close});break;default:this.pa.next({type:u.C[t]})}}Sa(){this.wi.clearTimeout(this._a),(0,c.cn)(this.$container,a.s6.PlayerFocused),this._a=this.wi.setTimeout((()=>{(0,c.IV)(this.$container,a.s6.PlayerFocused),this.ya.removeActiveTooltip()}),3e3)}updateDuration(t){const i=this.getComponent(r.r.ProgressBar),e=this.getComponent(r.r.TotalDurationLabel),s=this.getComponent(r.r.SkipAdButton);if(!t&&s&&(s.setSecondsUntilSkip(0),s.tickDown(0)),!t&&i)return i.setProgress(100),void i.updateWcagAttributes(0,0);this.elapsedTime=0,this.duration=t,i&&i.setProgress((0,T.dQ)(0,t,0,100,0)),e&&e.setTime(t),this.Ta(this.va)}updateVolume(t){const i=this.getComponent(r.r.VolumeControls),e=this.getComponent(r.r.VolumeButton);i&&i.setVolume(t),e&&e.setVolume(t)}get elapsedTime(){return this.va}set elapsedTime(t){this.va=t,this.Ta(this.va)}showSkipAdButton(t){const i=this.getComponent(r.r.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent(r.r.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){(0,c.cn)(this.$uiContainer,n.Ek.InPod);(0,E.Sz)(this.$uiContainer.getElementsByClassName(n.Ek.AdMarkerInPodTextContainer)).forEach((e=>{e.innerHTML=`${t+1}/${i}`}))}removeAddPodAdMarker(){(0,c.IV)(this.$uiContainer,n.Ek.InPod)}addDurationAdMarker(){(0,c.cn)(this.$uiContainer,n.Ek.AdDurationLabel)}removeDurationAdMarker(){(0,c.IV)(this.$uiContainer,n.Ek.AdDurationLabel)}Ta(t){const i=this.getComponent(r.r.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent(r.r.SkipAdButton);e&&e.tickDown(t);const s=this.getComponent(r.r.ProgressBar);null==s||s.updateWcagAttributes(this.va,this.duration);const n=this.getComponent(r.r.RemainingDurationLabel);if(n&&this.duration){const i=this.duration-t;i>=0&&n.setTime(i)}}hideAdLoadingScreen(){const t=this.getComponent(r.r.AdLoadingScreen);t&&t.hideComponent(),(0,c.IV)(this.$container,a.s6.PodLoadingScreen)}showAdLoadingScreen(t,i,e,s){const n=this.getComponent(r.r.AdLoadingScreen);n&&(n.showComponent(),n.setBackgroundImg(t),n.setClickUrl(i),n.setFallbackText(e,s),(0,c.cn)(this.$container,a.s6.PodLoadingScreen))}hideAdMarker(){const t=this.$container.querySelector(".cnx-ad-marker");(0,c.MV)(t)}hideProgressBar(){this.getComponent(r.r.ProgressBar).hideComponent()}setContinueReadingCard(t){this.ba.style.backgroundImage=`url("${t.imageSrc}")`,this.Ia.innerText=t.title?t.title:""}addAdMarkerTitle(t){this.Pa.innerHTML=t}cardHasData(){return(0,d.QM)(this.ba.style.backgroundImage)&&(0,d.QM)(this.Ia.innerHTML)}showContinueReadingCard(t){(0,c.cn)(this.$container,a.s6.AdShowCard),null===this.ma&&(this.ma=this.globalDomUtilsService.requestAnimationFrameHelper((()=>{this.ma=null,(0,c.T7)(t,{height:`${this.wa.clientHeight}px`})})))}hideContinueReadingCard(t){(0,c.IV)(this.$container,a.s6.AdShowCard),(0,c.aQ)(t,"height")}showAdMarkerTitle(){(0,c.cn)(this.$uiContainer,n.Ek.AdTitleLabel)}hideAdMarkerTitle(){(0,c.IV)(this.$uiContainer,n.Ek.AdTitleLabel)}show(){super.show(),this.la.on(this.$uiContainer,this.ga,{threshold:.5})}hide(){super.hide();(0,c.og)(this.$uiContainer,a.s6.UiInView,!1),this.la.off(this.$uiContainer,this.ga)}expand(){this.getComponent(r.r.ExpandButton).setState(w.q.expand)}collapse(){this.getComponent(r.r.ExpandButton).setState(w.q.collapse)}getComponent(t){return super.getComponent(t)}}},8696:(t,i,e)=>{"use strict";e(5078)},4481:(t,i,e)=>{"use strict";e.d(i,{l:()=>u,p:()=>n});var s=e(6888);class n{static getSelectionScore(t){return t.yoScore}}class r{static sortDescBySelectionScore(t){return[...t].sort(((t,i)=>n.getSelectionScore(i)-n.getSelectionScore(t)))}static getBestBySelectionScore(t){return r.sortDescBySelectionScore(t)[0]}}var o=e(9134),a=e(8919),h=e(5650);class c{constructor(t,i,e,s){this.xa=t,this.ka=i,this.Ca=e,this.Ea=s}getRequestEvents(t){return this.ka.getEvents(t)}hasAggregatorType(t){return this.xa.hasAggregatorType(t)}getAll(){return this.xa.lineItems}getAllByAggregator(t){return this.xa.getByAggregation(t)}getById(t){return this.xa.getByLineItemById(t)}getAllByRequest(t){return t?this.ka.lineItems:(0,h.V7)(this.xa.lineItems,this.ka.lineItems)}getAllCallable(t){return this.xa.lineItems.filter((t=>!o.IX.getInstance().hasLineItemById(t.protoLineItem.advertiserLineItemId,t.protoLineItem.publisherLineItemId))).filter((i=>this.Ma(i,t))).filter((i=>a.rO.isLineItemTargetingAllowed(i,t,this.Ea.standaloneService))).filter((i=>this.La(i,t)))}getBestCallable(t,i){if(!i)return;const e=this.Ba(t);return e?{state:i,lineItemList:this.Ra(e,t)}:void 0}La(t,i){const{hasAggregator:e,protoLineItem:s}=t;return!(!e&&!s.forceCallingInEveryAO)||this.Oa(t,i)}Oa(t,i){const e=n.getSelectionScore(t),r=this.getAllByRequest(!0),o=this.Ca.getBidsByStatus([s.wy.IDLE,s.wy.LOADING,s.wy.LOADED]).filter((t=>this.Da(t,i))).some((t=>e<n.getSelectionScore(t))),a=r.some((t=>e<n.getSelectionScore(t)));return!o&&!a}Ma(t,i){if(t.aggregators.size>0)return!1;const{advertiserLineItemId:e,forceCallingInEveryAO:n}=t.protoLineItem,r=this.Ca.getBidsByLineItemId(e).filter((t=>t.status!==s.wy.IMPRESSION));return!(!t.hasAggregator&&(r.length>0||t.bidsInFetch.size>0)&&!n||t.protoLineItem.isAdxLookup||t.protoLineItem.isAdxPenskeLookup)&&this.Ea.callingValidationAggregator.canCall(t,i.adOpportunity.id)}Ba(t){let i=t;return t.some((t=>t.hasAggregator))&&(i=i.filter((t=>t.hasAggregator))),r.getBestBySelectionScore(i)}Ra(t,i){if(t.hasAggregator){const{creativeType:e}=t.protoLineItem,s=i.filter((t=>e===t.protoLineItem.creativeType));return r.sortDescBySelectionScore(s)}return[t]}Da(t,i){return this.Ea.impressionCapsValidationService.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&a.rO.isBidTargetingAllowed(t,i,this.Ea.standaloneService)}}var d=e(289);class l{constructor(t,i,e,s){this.Na=t,this.Ca=i,this.Ea=e,this.Tr=s,this.Va=(t,i)=>{const e=[],s=[];for(const n of t){this.isBidTargetingAllowed(n,i)?e.push(n):s.push(n)}return{allowedBidList:e,notAllowedBidList:s}}}static isBidTargetingAllowedEverInSession(t,i){const{protoLineItem:e}=t.settings.adManagerLineItem,{advertiserLineItemId:s,publisherLineItemId:n}=e,{sessionMaxAdDuration:r}=i.adBreakState,h=t.getAdDuration();return a.rO.isAllowedRegardingDuration(h,r)&&!o.IX.getInstance().hasLineItemById(s,n)}getBidEvents(t){return this.Ca.getEvents(t)}hasReachTheMaxNumberOfReadyBids(){const{maxNumberOfWins:t}=this.Tr;if(-1===t)return!1;return this.Ca.getBidsByStatus([s.wy.LOADING,s.wy.LOADED,s.wy.STARTING,s.wy.IMPRESSION]).length>=t}hasLoadingBids(){const t=this.Ca.getBidsByStatus([s.wy.LOADING]);return(0,h.BZ)(t)}hasLoadedBids(){const t=this.Ca.getBidsByStatus([s.wy.LOADED]);return(0,h.BZ)(t)}hasUnstartedBids(){return this.Ca.getBidsByStatus([s.wy.LOADED,s.wy.LOADING,s.wy.STARTING]).length>0}hasAdsEligibleForFill(t){const i=this.Na.bidInFetchList.filter((i=>this.Fa(i.adManagerLineItem,t))),e=this.Ca.getBidsByStatus([s.wy.IDLE,s.wy.LOADING,s.wy.LOADED]).filter((i=>this.isBidTargetingAllowed(i,t)));return(0,h.BZ)(e)||(0,h.BZ)(i)}getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t){return r.sortDescBySelectionScore(this.Na.bidInFetchList.filter((i=>this.ja(i.adManagerLineItem,t))))}getEligibleBidsInAuctionSortedBySelectionScore(t){return r.sortDescBySelectionScore(this.Ca.getBidsByStatus([s.wy.IDLE,s.wy.LOADING,s.wy.LOADED]).filter((i=>this.isBidTargetingAllowed(i,t))))}isBestBidLoaded(t){const i=this.getBestLoadedBid();if(!i)return!1;const e=this.Ca.getBidsByStatus([s.wy.IDLE]),n=this.selectBestBid(e,t),o=[...this.Ca.getBidsByStatus([s.wy.LOADING])];n.selectedBid&&o.push(n.selectedBid);const a=r.getBestBySelectionScore(o);return!a||i.yoScore>=a.yoScore}getBestLoadedBid(){const t=this.Ca.getBidsByStatus([s.wy.LOADED]);return r.getBestBySelectionScore(t)}getAllLoadedBids(){return this.Ca.getBidsByStatus([s.wy.LOADED])}getAllBidPricesSortedDesc(){return this.Ca.getAllBids().map((t=>t.price)).sort(((t,i)=>i-t))}getBestAllowedBidPrice(t){return[...this.Ca.getBidsByStatus([s.wy.IDLE,s.wy.LOADING,s.wy.LOADED])].filter((i=>this.isBidTargetingAllowed(i,t))).sort(((t,i)=>i.price-t.price)).map((t=>t.price))[0]||0}getBestAllowedBidPricePubNET(t){return this.Ca.getBidsByStatus([s.wy.IDLE,s.wy.LOADING,s.wy.LOADED]).filter((i=>this.isBidTargetingAllowed(i,t))).map((t=>function(t,i,e){const s=i?t-t*i/100:t;return e?s*e/100:s}(t.price,t.settings.adManagerLineItem.protoLineItem.infrastructureFee,this.Tr.revSharePercentage))).sort(((t,i)=>i-t))[0]||0}getWinnableBidPricesSortedDesc(){return this.Ca.getBidsByStatus([s.wy.LOADING,s.wy.LOADED]).sort(((t,i)=>i.price-t.price)).map((t=>t.price))}getBestBidAllowedByStatus(t,i){const e=this.Ca.getBidsByStatus(t);return this.Ua(e,i)}getBestBidAllowed(t){const i=this.Ca.getAllBids();return this.Ua(i,t)}getBestBidPriceExceptAdxLookup(){const t=this.Ca.getAllBidsExceptAdxLookup();return 0===t.length?0:this.$a(t)}selectBestBid(t,i){const e=this.Va(t,i),{allowedBidList:s,notAllowedBidList:n}=e,o=(0,h.BZ)(s)&&r.getBestBySelectionScore(s)||null,a=n.map((t=>({bid:t,lossReason:this.qa(t,i)}))),c=s.filter((t=>t!==o)).map((t=>({bid:t,lossReason:d.ProtoAuctionLossReasonEnum.CompetitorPriority})));return{state:i,selectedBid:o,unselectedBidList:[...a,...c]}}selectBestBidForWin(t,i){const e=this.Ha(i),s=this.za(t,i);return this.Ga(e,s)}isBidTargetingAllowed(t,i){return this.Ea.impressionCapsValidationService.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&a.rO.isBidTargetingAllowed(t,i,this.Ea.standaloneService)}$a(t){return Math.max(...t.map((t=>t.price)))}Ha(t){const i=this.Ca.getBidsByStatus([s.wy.IDLE]);return this.selectBestBid(i,t)}za(t,i){const e=[...t,...this.Ca.getBidsByStatus([s.wy.LOADED])];return this.selectBestBid(e,i)}Ga(t,i){const e=Object.assign({},t);return t.selectedBid&&i.selectedBid?(n.getSelectionScore(i.selectedBid)>n.getSelectionScore(t.selectedBid)&&(e.selectedBid=null,e.unselectedBidList.push({bid:t.selectedBid,lossReason:d.ProtoAuctionLossReasonEnum.CompetitorPriority})),e):e}qa(t,i){const e=t.getAdDuration(),s=i.adBreakState.remainingAdDuration;return a.rO.isAllowedRegardingDuration(e,s)?d.ProtoAuctionLossReasonEnum.AdOpportunityEnd:d.ProtoAuctionLossReasonEnum.TargetingMismatch}ja(t,i){const e=[d.ProtoCreativeTypeEnum.ThirdParty,d.ProtoCreativeTypeEnum.External],s=t.protoLineItem.creativeType,n=e.includes(s),r=this.Fa(t,i);return!n&&r}Fa(t,i){return this.Ea.impressionCapsValidationService.canCall(t,i.adOpportunity.id)&&a.rO.isLineItemTargetingAllowed(t,i,this.Ea.standaloneService)}Ua(t,i){const e=t.filter((t=>this.isBidTargetingAllowed(t,i)));return r.getBestBySelectionScore(e)}}class u{constructor(t,i,e,s,n,r){this.xa=t,this.ka=i,this.Na=e,this.Ca=s,this.Ea=n,this.Tr=r,this.Wa=new c(this.xa,this.ka,this.Ca,{callingValidationAggregator:this.Ea.callingValidationAggregator,impressionCapsValidationService:this.Ea.impressionCapService,standaloneService:this.Ea.standaloneService}),this.Xa=new l(this.Na,this.Ca,{impressionCapsValidationService:this.Ea.impressionCapService,standaloneService:this.Ea.standaloneService},{maxNumberOfWins:this.Tr.maxNumberOfWins,revSharePercentage:this.Tr.revSharePercentage})}static isBidTargetingAllowedEverInSession(t,i){return l.isBidTargetingAllowedEverInSession(t,i)}isBidTargetingAllowed(t,i){return this.Xa.isBidTargetingAllowed(t,i)}geLineItemById(t){return this.Wa.getById(t)}getLineItemRequestEvents(t){return this.Wa.getRequestEvents(t)}getBidEvents(t){return this.Xa.getBidEvents(t)}hasAggregatorType(t){return this.Wa.hasAggregatorType(t)}getAllLineItems(){return this.Wa.getAll()}getLineItemsByAggregation(t){return this.Wa.getAllByAggregator(t)}getLineItemsByRequest(t){return this.Wa.getAllByRequest(t)}getAllCallableLineItems(t){return this.Wa.getAllCallable(t)}getBestCallableLineItem(t,i){return this.Wa.getBestCallable(t,i)}hasUnstartedBids(){return this.Xa.hasUnstartedBids()}hasLoadingBids(){return this.Xa.hasLoadingBids()}hasLoadedBids(){return this.Xa.hasLoadedBids()}isBestBidLoaded(t){return this.Xa.isBestBidLoaded(t)}getAllLoadedBids(){return this.Xa.getAllLoadedBids()}getBestLoadedBid(){return this.Xa.getBestLoadedBid()}getBestBidPriceExceptAdxLookup(){return this.Xa.getBestBidPriceExceptAdxLookup()}hasReachTheMaxNumberOfReadyBids(){return this.Xa.hasReachTheMaxNumberOfReadyBids()}hasAdsEligibleForFill(t){return this.Xa.hasAdsEligibleForFill(t)}getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t){return this.Xa.getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t)}getEligibleBidsInAuctionSortedDescBySelectionScore(t){return this.Xa.getEligibleBidsInAuctionSortedBySelectionScore(t)}getAllBidPricesSortedDesc(){return this.Xa.getAllBidPricesSortedDesc()}getBestAllowedBidPrice(t){return this.Xa.getBestAllowedBidPrice(t)}getBestAllowedBidPricePubNET(t){return this.Xa.getBestAllowedBidPricePubNET(t)}getWinnableBidPricesSortedDesc(){return this.Xa.getWinnableBidPricesSortedDesc()}getBestBidAllowedByStatus(t,i){return this.Xa.getBestBidAllowedByStatus(t,i)}getBestBidAllowed(t){return this.Xa.getBestBidAllowed(t)}selectBestBid(t,i){return this.Xa.selectBestBid(t,i)}selectBestBidForWin(t){const i=this.Ca.getBidsByStatus([s.wy.LOADING]);return this.Xa.selectBestBidForWin(i,t)}}},1006:(t,i,e)=>{"use strict";e.d(i,{gx:()=>h,n_:()=>a});var s=e(4782),n=e(5650),r=e(4798);function o(t){if(!t.adxFloorPrices)return;(t.adxFloorPrices.every((t=>t.priceOutcome!==s.f.Unused))||t.adxFloorPrices.some((t=>t.priceOutcome===s.f.Success)))&&(t.resetAllAdxPricesStatus(),t.resetPrice())}function a(t){if(!(0,n.BZ)(t))return null;const i=t.find((t=>t.priceOutcome===s.f.Unused));if((0,r.$K)(i))return{price:i.price,index:t.indexOf(i)};const e=t.length-1;return{price:t[e].price,index:e}}function h(t,i,e){!function(t,i,e){const s=i.data.requestedFloorPrice;t.adxFloorPrices&&t.adxFloorPrice&&s&&t.updatePriceStatus(s,e)}(t,i,e),e!==s.f.Success&&e!==s.f.Fail||o(t)}},4782:(t,i,e)=>{"use strict";var s;e.d(i,{f:()=>s}),function(t){t[t.Unused=0]="Unused",t[t.Pending=1]="Pending",t[t.Success=2]="Success",t[t.Fail=3]="Fail"}(s||(s={}))},5294:(t,i,e)=>{"use strict";e.d(i,{eT:()=>s,rL:()=>c,hR:()=>m});var s,n,r=e(289),o=e(6888),a=e(4481);!function(t){t[t.TimeoutWithReadyBid=0]="TimeoutWithReadyBid",t[t.TimeoutWithoutReadyBid=1]="TimeoutWithoutReadyBid",t[t.Shorted=2]="Shorted",t[t.Prefetched=3]="Prefetched"}(s||(s={})),function(t){t[t.IsIma=-1]="IsIma",t[t.IsBidCall=-2]="IsBidCall"}(n||(n={}));var h=e(4798);class c{static getBidDemandType(t){const i=Object.keys(c.bidDemandTypeMap).filter((i=>(0,c.bidDemandTypeMap[i])(t.settings.adManagerLineItem.protoLineItem)))[0];if(!(0,h.$K)(i))return r.ProtoDemandTypeEnum.None;const e=Number.parseInt(i,10);return r.ProtoDemandTypeEnum[r.ProtoDemandTypeEnum[e]]}static isPrivateMarketplaceBid(t){return t.isPMP}static isOpenMarketBid(t){const{advertiserLineItemId:i,publisherLineItemId:e}=t;return!c.isPrivateMarketplaceBid(t)&&i!==e}static isSelfServedBid(t){const{advertiserLineItemId:i,publisherLineItemId:e}=t;return!c.isPrivateMarketplaceBid(t)&&i===e}}c.bidDemandTypeMap={[r.ProtoDemandTypeEnum.PMP]:t=>c.isPrivateMarketplaceBid(t),[r.ProtoDemandTypeEnum.OpenMarket]:t=>c.isOpenMarketBid(t),[r.ProtoDemandTypeEnum.SelfServed]:t=>c.isSelfServedBid(t)};var d,l=e(6992),u=e(4656),p=e(9607);class f{constructor(t,i,e,s,n){this.Qa=t,this.Ja=i,this.adManagerState=e,this.us=n,this.Ya=[],this.Ka=[],this.deltaTimestampAdStartAdOpportunity=Date.now()-s,this.Ya=this.Qa.getEligibleBidsInAuctionSortedDescBySelectionScore(this.adManagerState).filter((t=>t!==this.Ja)),this.Ka=this.Qa.getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(this.adManagerState),this.winnerDemandType=this.Za(),this.firstLoser=this.tc(),this.allLoserStatusInfo=this.ic(),this.firstOpenMarketLoser=this.ec(),this.auctionEndType=this.adManagerState.auctionEndType}Za(){return this.Ja?c.getBidDemandType(this.Ja):(this.sc("ImpressionAuctionSnapshot: No winner bid found"),r.ProtoDemandTypeEnum.None)}ic(){const t=this.Ka.length;let i=0,e=0,s=0;return this.Ya.forEach((t=>{switch(t.status){case o.wy.IDLE:i++;break;case o.wy.LOADING:e++;break;case o.wy.LOADED:s++}})),{verifyingBidsInAuction:t,idleBidsInAuction:i,loadingBidsInAuction:e,loadedBidsInAuction:s}}tc(){const t=this.Ya[0],i=this.Ka[0];if(!(0,h.$K)(t)&&!(0,h.$K)(i))return;let e=0;(0,h.$K)(t)&&(e=a.p.getSelectionScore(t));let s,r,o,p,f,m,g,v,y,b=0;return(0,h.$K)(i)&&(b=a.p.getSelectionScore(i)),e>b?(s=c.getBidDemandType(t),r=t.price,o=d.BID,p=t.settings.requestMetadata.data.encryptedPrice,f=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,m=t.settings.adManagerLineItem.protoLineItem,g=t.settings.isIma,v=t.status,y=t.settings.isIma?n.IsIma:t.getAdDuration()):(s=(0,u.Bl)(i.adManagerLineItem),r=i.bidPrice,o=d.BID_IN_FETCH,p=i.encryptedPrice,f=i.adManagerLineItem.protoLineItem.advertiserLineItemId,m=i.adManagerLineItem.protoLineItem,g=i.isIma,v=l.e.VERIFYING,y=n.IsBidCall),{loserType:o,demandType:s,encryptedPrice:p,customClientPrice:r,advertiserLineItemId:f,lineItem:m,isIma:g,status:v,adDuration:y}}ec(){const t=this.rc();if((0,h.$K)(t))return{demandType:r.ProtoDemandTypeEnum.OpenMarket,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,customClientPrice:t.settings.cpm,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}}rc(){return this.Ya.find((t=>c.getBidDemandType(t)===r.ProtoDemandTypeEnum.OpenMarket))}sc(t){(0,p.nF)({level:p.D_.WARN,message:t,sessionId:this.us},{throttle:1,shouldSendMaxLog:!1})}}!function(t){t.BID="bid",t.BID_IN_FETCH="bid_in_fetch"}(d||(d={}));class m{constructor(t,i){this.Qa=t,this.us=i,this.oc=null}get lastSnapshot(){return this.oc}takeSnapshot(t,i,e){return this.oc=new f(this.Qa,t,i,e,this.us),this.oc}}},3199:(t,i,e)=>{"use strict";e.d(i,{Mz:()=>p,E3:()=>m,Vx:()=>f,U4:()=>g,Ko:()=>v});var s=e(289),n=e(6888);class r{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.viewable_impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}var o=e(9607);class a{constructor(t,i){this.us=i,this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new r,t.inLine?this.hc(t.inLine):this.ac(t.wrapper)}hc(t){this.dc(t.errors),this.fc(t.impressions),this.vc(t.creatives)}ac(t){this.dc(t.errors),this.fc(t.impressions),this.vc(t.creatives)}mc(t){this.gc(t.trackingEvents),this.yc(t.videoClicks)}yc(t){t&&(this.bc(t.clickTrackings),this.Ic(t.customClicks))}bc(t){this.clickTrackings.push(...t)}Ic(t){this.customClicks.push(...t)}gc(t){t.forEach((t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){(0,o.nF)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:o.D_.INFO,sessionId:this.us})}}))}vc(t){t.forEach((t=>{t.linear?this.mc(t.linear):t.nonLinear&&this.gc(t.nonLinear.trackingEvents)}))}dc(t){this.errorUrls.push(...t)}fc(t){this.impressions.push(...t)}}var h=e(1187),c=e(3775),d=e(3020),l=e(9791);const u={[s.ProtoTrackerTriggerType.Impression]:"adImpression",[s.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[s.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[s.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[s.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[s.ProtoTrackerTriggerType.VideoClick]:"adClick",[s.ProtoTrackerTriggerType.Pause]:"adPause",[s.ProtoTrackerTriggerType.Resume]:"adResume",[s.ProtoTrackerTriggerType.Mute]:"adMute",[s.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class p{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adViewableImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static trackError(t,i,e,s,n,r=h.Oq.GeneralError,o=window.document.head){this.track(t,i,e,s,n,o,r)}static track(t,i,e,n,r,o=window.document.head,a){if(!Array.isArray(t))return;const{width:h,height:u}=n.adContainerState.get(e.adType),{adBreakType:p}=n.adBreakState,{mediaDescription:f,mediaDuration:m,mediaId:g,mediaUrl:v,mediaTitle:y}=n.media,b=n.sound?0:1;t.forEach((t=>{if(t.url)try{const n=i.replace(t.url,e.vendorId,e.advertiserLineItemId,{adMacros:{adWidth:h,adHeight:u,adPostion:p,errorCode:a,mute:b,plcmt:r},mediaMacros:{mediaDescription:f,mediaDuration:m,mediaId:g,mediaUrl:v,mediaTitle:y}});switch(t.type){case s.ProtoTrackerType.Image:(0,l.Hh)([n],window);break;case s.ProtoTrackerType.Javascript:(0,d.dZ)({src:n},window.document.head,window);break;case s.ProtoTrackerType.IAS:(0,d.dZ)({src:n,attributes:[{name:c.b.GarbageCollector,value:""}]},o,window)}}catch(t){}}))}}function f(t,i,e){const s=new a(t,e);i.adError.push(...y(s.errorUrls)),i.adImpression.push(...y(s.impressions)),i.adViewableImpression.push(...y(s.trackingEvents.viewable_impression)),i.adClick.push(...y(s.clickTrackings)),i.adMute.push(...y(s.trackingEvents.mute)),i.adPause.push(...y(s.trackingEvents.pause)),i.adQuartileFirst.push(...y(s.trackingEvents.firstQuartile)),i.adQuartileSecond.push(...y(s.trackingEvents.midpoint)),i.adQuartileThird.push(...y(s.trackingEvents.thirdQuartile)),i.adQuartileFourth.push(...y(s.trackingEvents.complete)),i.adResume.push(...y(s.trackingEvents.resume)),i.adSkip.push(...y(s.trackingEvents.skip)),i.adStarted.push(...y(s.trackingEvents.creativeView)),i.adVideoStart.push(...y([...s.trackingEvents.start])),i.adUnmute.push(...i.adUnmute,...y(s.trackingEvents.unmute)),i.adUserAcceptInvitation.push(...y([...s.trackingEvents.acceptInvitation,...s.trackingEvents.acceptInvitationLinear])),i.adUserClose.push(...y(s.trackingEvents.close)),i.adUserMinimize.push(...i.adUserMinimize,...y([...s.trackingEvents.collapse,...s.trackingEvents.playerCollapse,...s.trackingEvents.adCollapse]))}function m(t,i){t.forEach((t=>function(t,i){(function(t,i){return i[u[t]]})(t.trigger,i).push({type:t.type,url:t.url})}(t,i)))}function g(t){return{type:s.ProtoTrackerType.Image,url:t}}function v(t,i){switch(t){case n.fI.AdImpression:return i.adImpression;case n.fI.AdClickThru:return i.adClick;case n.fI.AdStarted:return i.adStarted;case n.fI.AdVideoStart:return i.adVideoStart;case n.fI.AdVideoFirstQuartile:return i.adQuartileFirst;case n.fI.AdVideoMidpoint:return i.adQuartileSecond;case n.fI.AdVideoThirdQuartile:return i.adQuartileThird;case n.fI.AdVideoComplete:return i.adQuartileFourth;case n.fI.AdPaused:return i.adPause;case n.fI.AdPlaying:return i.adResume;case n.fI.AdSkipped:return i.adSkip;case n.fI.AdUserClose:return i.adUserClose;case n.fI.AdUserAcceptInvitation:return i.adUserAcceptInvitation;case n.fI.AdUserMinimize:return i.adUserMinimize;case n.fI.AdError:return i.adError}}function y(t){return t.map((t=>g(t)))}},8850:(t,i,e)=>{"use strict";var s;e.d(i,{O:()=>s}),function(t){t[t.XmlParsingError=100]="XmlParsingError",t[t.VastSchemaError=101]="VastSchemaError",t[t.InvalidVastVersionError=102]="InvalidVastVersionError",t[t.ExpectingDifferentLinearity=201]="ExpectingDifferentLinearity",t[t.GeneralLinearError=400]="GeneralLinearError",t[t.MediaFileNotFound=401]="MediaFileNotFound",t[t.MediaFileUriTimeout=402]="MediaFileUriTimeout",t[t.MediaFileNotSupported=403]="MediaFileNotSupported",t[t.VerificationUnitNotExecuted=410]="VerificationUnitNotExecuted",t[t.WrapperVastUriTimeout=301]="WrapperVastUriTimeout",t[t.WrapperLimitReached=302]="WrapperLimitReached",t[t.NoVastResponseAfterWrapper=303]="NoVastResponseAfterWrapper",t[t.ImpressionTimeout=304]="ImpressionTimeout",t[t.NonlinearGeneralError=500]="NonlinearGeneralError",t[t.NonlinearExpectingDifferentSize=501]="NonlinearExpectingDifferentSize",t[t.NonlinearUnableToFetchResource=502]="NonlinearUnableToFetchResource",t[t.NonlinearSupportedTypeNotFound=503]="NonlinearSupportedTypeNotFound",t[t.GeneralError=900]="GeneralError",t[t.GeneralVpaidError=901]="GeneralVpaidError"}(s||(s={}))},7720:(t,i,e)=>{"use strict";var s;e.d(i,{ev:()=>s,Oq:()=>o.O,Uq:()=>n,y$:()=>r}),function(t){t[t.Empty=0]="Empty",t[t.BadWrapper=1]="BadWrapper",t[t.MediaNotFound=2]="MediaNotFound"}(s||(s={}));var n,r,o=e(8850);!function(t){t.AdVerifications="AdVerifications"}(n||(n={})),function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(r||(r={}))},2321:(t,i,e)=>{"use strict";e.d(i,{RA:()=>n,RC:()=>d,hj:()=>h,JO:()=>p,wz:()=>f,d1:()=>m,Nh:()=>g,bJ:()=>v,xt:()=>y,ML:()=>b,az:()=>I,wd:()=>P,Qr:()=>w,GU:()=>S,GX:()=>A,vZ:()=>x,im:()=>_});var s=e(7720);class n extends Error{constructor(t){super(t.errorReason),this.vastErrorTrackers=[],this.vastErrorCode=t.vastErrorCode||s.Oq.GeneralError,this.vastErrorTrackers=t.errorUrlTrackers||[]}}var r,o=e(894);!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(o.y.getKeyValue(t))})),i}t.parseImpressions=function(t){return i(t)},t.parseCreatives=function(t,i){const e=[];return t.forEach((t=>{e.push(new d(t,i))})),e},t.parseExtensions=function(t,i){return t.map((t=>new h(t,i)))},t.parseVerifications=function(t,i){return t.map((t=>new A(t,i)))},t.parseErrors=function(t){return i(t)},t.parseTrackingEvents=function(t,i){const e=[];return void 0!==t[0]&&t.forEach((t=>{e.push(new P(t,i))})),e}}(r||(r={}));var a=e(5650);class h{constructor(t,i){var e;this.adVerifications=void 0,this.type=t.keyAttributes.type,this.adVerifications=(null===(e=null==t?void 0:t.adverifications)||void 0===e?void 0:e.verification)?r.parseVerifications((0,a.qo)(t.adverifications.verification),i):[]}}var c=e(9607);class d{constructor(t,i){if(this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.nonLinear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear)try{this.linear=new v(t.linear,i)}catch(t){(0,c.nF)({sessionId:i,callStack:t.stack,level:c.D_.WARN,exception:t.message,message:"Creative_Linear"})}if(t.nonlinearads)try{this.nonLinear=new I(t.nonlinearads,i)}catch(t){(0,c.nF)({sessionId:i,callStack:t.stack,level:c.D_.WARN,exception:t.message,message:"Creative_NonLinear"})}}isSupported(){return!0}}var l=e(1310),u=e(4798);class p{constructor(t){var i,e,s,n,r,a,h;this.program=null===(i=t.keyAttributes)||void 0===i?void 0:i.program,this.width=null===(e=t.keyAttributes)||void 0===e?void 0:e.width,this.height=null===(s=t.keyAttributes)||void 0===s?void 0:s.height,this.pxRatio=null===(n=t.keyAttributes)||void 0===n?void 0:n.pxratio,this.xPosition=null===(r=t.keyAttributes)||void 0===r?void 0:r.xposition,this.yPosition=null===(a=t.keyAttributes)||void 0===a?void 0:a.yposition,this.apiFramework=null===(h=t.keyAttributes)||void 0===h?void 0:h.apiframework,this.offset=(0,u.$K)(t.keyAttributes.offset)?(0,l.pP)(t.keyAttributes.offset):void 0,this.duration=(0,u.$K)(t.keyAttributes.duration)?(0,l.pP)(t.keyAttributes.duration):void 0,this.staticResource=o.y.getKeyValue(t.staticresource),this.iframeResource=o.y.getKeyValue(t.iframeresource),this.htmlResource=o.y.getKeyValue(t.htmlresource),this.iconViewTracking=o.y.getKeyValue(t.iconviewtracking),(0,u.$K)(t.iconclicks)&&(this.iconClicks=new f(t.iconclicks))}}class f{constructor(t){this.iconClickTracking=[],this.iconClickThrough=o.y.getKeyValue(t.iconclickthrough),(0,u.$K)(t.iconclicktracking)&&(this.iconClickTracking=this.Pc((0,a.qo)(t.iconclicktracking)))}Pc(t){return(0,a.BZ)(t)?t.map((t=>o.y.getKeyValue(t))):[]}}class m{constructor(t,i){var e,s,n;this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adVerifications=void 0,this.adTitle=o.y.getKeyValue(t.adtitle),this.adSystem=o.y.getKeyValue(t.adsystem),this.impressions=r.parseImpressions((0,a.qo)(t.impression)),this.creatives=(null===(e=t.creatives)||void 0===e?void 0:e.creative)?r.parseCreatives((0,a.qo)(t.creatives.creative),i):[],this.description=o.y.getKeyValue(t.description),this.advertiser=o.y.getKeyValue(t.advertiser),this.surveys=o.y.getKeyValue(t.survey),this.errors=r.parseErrors((0,a.qo)(t.error)),this.pricing=o.y.getKeyValue(t.pricing),this.extensions=(null===(s=t.extensions)||void 0===s?void 0:s.extension)?r.parseExtensions((0,a.qo)(t.extensions.extension),i):[],this.adVerifications=(null===(n=t.adverifications)||void 0===n?void 0:n.verification)?r.parseVerifications((0,a.qo)(t.adverifications.verification),i):[]}isSupported(){return!0}}class g{constructor(t){var i,e;this.url=t.keyValue,this.apiFramework=null===(i=t.keyAttributes)||void 0===i?void 0:i.apiframework,this.browserOptional=null===(e=t.keyAttributes)||void 0===e?void 0:e.browseroptional}}class v{constructor(t,i){this.us=i,this.duration=void 0,this.mediaFiles=[],this.icons=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=(0,l.pP)(o.y.getKeyValue(t.duration)),this.skipoffset=(0,l.QI)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.wc((0,a.qo)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=r.parseTrackingEvents((0,a.qo)(t.trackingevents.tracking),this.duration)),t.videoclicks&&(this.videoClicks=new x(t.videoclicks)),t.adparameters&&(this.adParameters=o.y.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=o.y.decodeXMLText(this.adParameters))),t.icons&&t.icons.icon&&(this.icons=this.Ac((0,a.qo)(t.icons.icon)))}wc(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{const e=new y(t,this.us);i.push(e)})),i}Ac(t){return(0,a.BZ)(t)?t.map((t=>new p(t))):[]}isSupported(){return!0}}class y{constructor(t,i){this.us=i,this.Sc=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this._c="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.isSupported=!0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=o.y.getKeyValue(t),this.isSupported=this.xc()}getMediaFileType(){return this.apiFramework===this._c||(0,a.d3)(this.type,this.Sc)?s.y$.Javascript:s.y$.Video}xc(){if("VPAID"===this.apiFramework||(0,a.d3)(this.type,this.Sc))return!0;if("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)return!1;if(!(0,u.QM)(this.type))return(0,c.nF)({message:"MediaFile_type_not_provided",level:c.D_.WARN,sessionId:this.us}),!0;const t=document.createElement("video").canPlayType(this.type);return!!(0,u.QM)(t)}}class b{constructor(t,i){var e;this.us=i,this.minSuggestedDuration=void 0,this.staticResource={},this.htmlResource={},this.iframeResource={},this.nonLinearClickTracking={},this.id=t.keyAttributes.id,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.expandedWidth=t.keyAttributes.expandedheight,this.expandedHeight=t.keyAttributes.expandedwidth,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.minSuggestedDuration=(0,l.pP)(t.keyAttributes.minsuggestedduration),this.nonLinearClickThrough=null===(e=t.nonlinearclickthrough)||void 0===e?void 0:e.keyValue,t.nonlinearclicktracking&&(this.nonLinearClickTracking.id=t.nonlinearclicktracking.keyAttributes.id,this.nonLinearClickTracking.uri=t.nonlinearclicktracking.keyValue),t.staticresource&&(this.staticResource.creativeType=t.staticresource.keyAttributes.creativetype,this.staticResource.uri=t.staticresource.keyValue),t.iframeresource&&(this.iframeResource.uri=t.iframeresource.keyValue),t.htmlresource&&(this.htmlResource.uri=t.htmlresource.keyValue)}isSupported(){return"VPAID"===this.apiFramework?((0,c.nF)({message:"AdManager_NonLinearAd_VPAID_found",level:c.D_.INFO,sessionId:this.us},{pacing:10,shouldSendMaxLog:!1}),!1):this.width&&this.height?!(!this.staticResource.creativeType||!this.staticResource.uri)||(this.htmlResource.uri&&(0,c.nF)({message:"AdManager_NonLinearAd_htmlResource_found",level:c.D_.INFO,sessionId:this.us},{pacing:10,shouldSendMaxLog:!1}),this.iframeResource.uri&&(0,c.nF)({message:"AdManager_NonLinearAd_iframeResource_found",level:c.D_.INFO,sessionId:this.us},{pacing:10,shouldSendMaxLog:!1}),!1):((0,c.nF)({message:"AdManager_NonLinearAd_no_dimensions",level:c.D_.INFO,sessionId:this.us},{pacing:10,shouldSendMaxLog:!1}),!1)}}class I{constructor(t,i){if(this.us=i,this.nonLinearAdList=[],this.trackingEvents=[],this.kc=!1,t.nonlinear){const i=(0,a.qo)(t.nonlinear);this.nonLinearAdList=this.Cc(i),this.kc=(0,a.BZ)(i)&&0===this.nonLinearAdList.length}t.trackingevents&&(this.trackingEvents=r.parseTrackingEvents((0,a.qo)(t.trackingevents.tracking))),t.adparameters&&(this.adParameters=o.y.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=o.y.decodeXMLText(this.adParameters)))}isSupported(){return!0}get hasInvalidResource(){return this.kc}Cc(t){return t.map((t=>new b(t,this.us))).filter((t=>t.isSupported()))}}class P{constructor(t,i){this.name=t.keyAttributes.event,this.uri=o.y.getKeyValue(t),"progress"===this.name&&(this.offset=(0,l.QI)(t.keyAttributes.offset,i))}}class w{constructor(t,i){this.us=i,Array.isArray(t)?this.Ec(t):this.Mc(t)}isSupported(){return!0}Mc(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new m(t.inline,this.us):t.wrapper&&(this.wrapper=new _(t.wrapper,this.us))}Ec(t){const i=t.filter((t=>{const i=this.Bc(t).filter((t=>t.linear));return!!(0,a.BZ)(i)}));(0,a.BZ)(i)&&this.Mc(i[0])}Bc(t){return t.inline?(0,a.qo)(t.inline.creatives.creative):t.wrapper?(0,a.qo)(t.wrapper.creatives.creative):[]}}class S{constructor(t){this.mediaFiles=[],this.nonLinearFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.linearClickThrough=void 0,this.creativeId=void 0,this.extensions=[],this.verifications=[],this.icons=[],t.forEach((t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.extensions=t.inLine.extensions,this.Rc(t.inLine.extensions),this.Dc(t.inLine.adVerifications),this.vc(t.inLine.creatives)):t.wrapper&&(this.vc(t.wrapper.creatives),this.Dc(t.wrapper.adVerifications),this.Rc(t.wrapper.extensions))}))}Rc(t){(0,a.BZ)(t)&&t.forEach((t=>{(0,a.BZ)(t.adVerifications)&&this.Dc(t.adVerifications)}))}Dc(t){this.verifications=[...this.verifications,...t]}mc(t){this.duration=t.duration,this.Nc(t.mediaFiles),this.Vc(t.skipoffset),this.Fc(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.qn(t.videoClicks.clickThrough),(0,a.BZ)(t.icons)&&this.jc(t.icons)}Uc(t){this.$c(t.nonLinearAdList),this.Fc(t.adParameters)}$c(t){this.nonLinearFiles=[...this.nonLinearFiles,...t]}jc(t){this.icons.push(...t)}Fc(t){this.adParameters=t}Vc(t){this.skipoffset=t}Nc(t){this.mediaFiles=[...this.mediaFiles,...t]}qn(t){this.linearClickThrough=t}vc(t){t.forEach((t=>{this.creativeId=t.id,t.linear&&this.mc(t.linear),t.nonLinear&&this.Uc(t.nonLinear)}))}}class A{constructor(t,i){var e,s;try{this.vendor=t.keyAttributes.vendor,t.javascriptresource&&(this.javaScriptResource=new g(t.javascriptresource)),this.verificationParameters=null===(e=t.verificationparameters)||void 0===e?void 0:e.keyValue,this.trackingEvents=(null===(s=t.trackingevents)||void 0===s?void 0:s.tracking)?r.parseTrackingEvents((0,a.qo)(null==t?void 0:t.trackingevents.tracking)):[]}catch(t){(0,c.nF)({sessionId:i,message:"OMID_Verification_parse_error",level:c.D_.WARN,callStack:t.stack,exception:t.message})}}}class x{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=o.y.getKeyValue(t.clickthrough),this.clickTrackings=this.qc((0,a.qo)(t.clicktracking)),this.customClicks=this.qc((0,a.qo)(t.customclick))}qc(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(o.y.getKeyValue(t))})),i}}class _{constructor(t,i){var e,s,n;this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adVerifications=void 0,this.extensions=void 0,this.adSystem=o.y.getKeyValue(t.adsystem),this.impressions=r.parseImpressions((0,a.qo)(t.impression)),this.VASTAdTagURI=o.y.getKeyValue(t.vastadtaguri),this.creatives=(null===(e=t.creatives)||void 0===e?void 0:e.creative)?r.parseCreatives((0,a.qo)(t.creatives.creative),i):[],this.errors=r.parseErrors((0,a.qo)(t.error)),this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad,this.adVerifications=(null===(s=null==t?void 0:t.adverifications)||void 0===s?void 0:s.verification)?r.parseVerifications((0,a.qo)(t.adverifications.verification),i):[],this.extensions=(null===(n=null==t?void 0:t.extensions)||void 0===n?void 0:n.extension)?r.parseExtensions((0,a.qo)(t.extensions.extension),i):[]}}},894:(t,i,e)=>{"use strict";e.d(i,{y:()=>s});var s,n=e(51),r=e(4798);!function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():(0,n.jv)(t)?t:isFinite(Number(t))?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,o=0;o<e.childNodes.length;o++)i=e.childNodes.item(o),(i.nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},t.isValidXMLString=function(t){const i=(new DOMParser).parseFromString(t,"text/xml").documentElement.querySelector("parsererror");return(0,r.Ft)(i)},t.parseText=i}(s||(s={}))},1187:(t,i,e)=>{"use strict";e.d(i,{RA:()=>a.RA,Oq:()=>o.Oq,Uq:()=>o.Uq,GU:()=>a.GU,y$:()=>o.y$,H3:()=>l});var s=e(289),n=e(5226),r=e(9592),o=e(7720),a=e(2321),h=e(894),c=e(5650),d=e(4798);class l{constructor(t=2,i){this.Hc=t,this.us=i}parseVastXml(t){var i,e;try{if(!h.y.isValidXMLString(t))return{hasError:!0,vastErrorCode:o.Oq.XmlParsingError,errorReason:r.f.XmlInvalidString};if(this.Gc(t))return{hasError:!0,vastErrorCode:o.Oq.GeneralError,errorReason:r.f.XmlInvalidAd};if(this.Wc(t))return{hasError:!0,vastErrorCode:o.Oq.GeneralError,errorReason:r.f.VastContainsBannedUrls};const s=(new DOMParser).parseFromString(t,"application/xml"),n=new h.y.JXONTree(s.documentElement);if(!this.Qc(n))return{hasError:!0,vastErrorCode:o.Oq.VastSchemaError,errorReason:r.f.XmlInvalidTree};if(!this.Jc(n,this.Hc))return{hasError:!0,vastErrorCode:o.Oq.InvalidVastVersionError,errorReason:r.f.VastVersionNotSupported};const d=new a.Qr(n.ad,this.us);let l=[],u=[];(0,c.BZ)(null===(i=null==d?void 0:d.inLine)||void 0===i?void 0:i.creatives)&&(l=d.inLine.creatives.filter((t=>{var i;return(0,c.BZ)(null===(i=null==t?void 0:t.linear)||void 0===i?void 0:i.mediaFiles)})),u=null===(e=null==d?void 0:d.inLine)||void 0===e?void 0:e.creatives.filter((t=>{var i;return(0,c.BZ)(null===(i=null==t?void 0:t.nonLinear)||void 0===i?void 0:i.nonLinearAdList)})));const p=this.Kc(d,l,u);return p.isValid?this.Zc(d,u)?{hasError:!1,result:d}:{hasError:!0,vastErrorCode:o.Oq.MediaFileNotSupported,errorReason:r.f.VastMediaFilesNotSupported,errorUrlTrackers:this.td(d)}:p.reason===o.ev.MediaNotFound&&this.ed(d)?{hasError:!0,vastErrorCode:o.Oq.NonlinearSupportedTypeNotFound,errorReason:r.f.XmlInvalidAd,errorUrlTrackers:this.td(d)}:{hasError:!0,vastErrorCode:o.Oq.VastSchemaError,errorReason:r.f.XmlInvalidAd}}catch(t){return{hasError:!0,vastErrorCode:o.Oq.GeneralError,errorReason:r.f.XmlParseGeneral}}}td(t){var i;const e=[];return null===(i=null==t?void 0:t.inLine)||void 0===i||i.errors.forEach((t=>{e.push({url:t,type:s.ProtoTrackerType.Image})})),e}ed(t){var i,e;return null===(e=null===(i=t.inLine)||void 0===i?void 0:i.creatives)||void 0===e?void 0:e.some((t=>{var i;return null===(i=t.nonLinear)||void 0===i?void 0:i.hasInvalidResource}))}Zc(t,i){var e,s;if((0,d.$K)(t.wrapper))return!0;null===(e=null==t?void 0:t.inLine)||void 0===e||e.creatives.forEach((t=>{var i;(0,c.BZ)(null===(i=null==t?void 0:t.linear)||void 0===i?void 0:i.mediaFiles)&&(t.linear.mediaFiles=this.sd(t.linear.mediaFiles))}));const n=null===(s=null==t?void 0:t.inLine)||void 0===s?void 0:s.creatives.reduce(((t,i)=>{var e;return(0,c.BZ)(null===(e=null==i?void 0:i.linear)||void 0===e?void 0:e.mediaFiles)?[...t,...i.linear.mediaFiles]:t}),[]);return!(!(0,c.BZ)(n)&&!(0,c.BZ)(i))}sd(t){return t.filter((t=>t.isSupported))}Gc(t){return n.c.KEYWORDS_FOR_BANNED_VAST.some((i=>t.includes(i)))}Jc(t,i){const e=parseInt(t.keyAttributes.version,10);return!(e&&e<i)}Qc(t){return!!t.ad}Kc(t,i,e){const s=t.wrapper;return t.inLine||s?s&&!s.VASTAdTagURI?{isValid:!1,reason:o.ev.BadWrapper}:s||(0,c.BZ)(i)||(0,c.BZ)(e)?{isValid:!0}:{isValid:!1,reason:o.ev.MediaNotFound}:{isValid:!1,reason:o.ev.Empty}}Wc(t){return n.c.BANNED_DOMAINS.some((i=>t.includes(i)))}}},3716:(t,i,e)=>{"use strict";e.d(i,{z:()=>p,S:()=>s});var s,n=e(8659),r=e(6888),o=e(6716);!function(t){t[t.ON_BID=0]="ON_BID",t[t.ON_BID_LOADING=1]="ON_BID_LOADING",t[t.ON_BID_LOADING_CONSUMED=2]="ON_BID_LOADING_CONSUMED",t[t.ON_BID_LOADED=3]="ON_BID_LOADED",t[t.ON_BID_STARTING=4]="ON_BID_STARTING",t[t.ON_BID_IN_IMPRESSION=5]="ON_BID_IN_IMPRESSION",t[t.ON_BID_LOADED_CONSUMED=6]="ON_BID_LOADED_CONSUMED"}(s||(s={}));class a{constructor(){this.nd=new o.x,this.rd=new o.x,this.od=new o.x,this.hd=new o.x,this.dd=new o.x,this.ud=new o.x,this.fd=new o.x,this.vd={[s.ON_BID]:this.nd,[s.ON_BID_LOADING]:this.rd,[s.ON_BID_LOADING_CONSUMED]:this.ud,[s.ON_BID_LOADED]:this.od,[s.ON_BID_STARTING]:this.hd,[s.ON_BID_IN_IMPRESSION]:this.dd,[s.ON_BID_LOADED_CONSUMED]:this.fd},this.gd={[r.wy.IDLE]:t=>{this.nd.next(t)},[r.wy.LOADING]:t=>{this.rd.next(t)},[r.wy.LOADED]:t=>{this.od.next(t)},[r.wy.STARTING]:t=>{this.hd.next(t)},[r.wy.IMPRESSION]:t=>{this.dd.next(t)},[r.wy.CONSUMED_LOADING]:t=>{this.ud.next(t)},[r.wy.CONSUMED_LOADED]:t=>{this.fd.next(t)},[r.wy.INVALIDATED]:t=>{[r.wy.IDLE,r.wy.LOADING].includes(t.status)?this.ud.next(t):this.fd.next(t)}}}bidStatusChanged(t,i){(0,this.gd[i])(t)}getBidObservable(t){return this.vd[t].asObservable()}}var h=e(7597),c=e(5650),d=e(1310),l=e(4798),u=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let p=class{constructor(){this.bd=[],this.Pd=new a,this.Sd=new Map}getEvents(t){return this.Pd.getBidObservable(t)}addBid(t){this._d(t),this.bd.push(t),this.Pd.bidStatusChanged(t,r.wy.IDLE)}getAllBids(){return this.Td(),this.bd}getAllBidsExceptAdxLookup(){return this.getAllBids().filter((t=>t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId!==h.Eg))}getBidsByLineItemId(t){return this.getAllBids().filter((i=>{const{advertiserLineItemId:e,publisherLineItemId:s}=i.settings.adManagerLineItem.protoLineItem;return[e,s].includes(t)}))}getBidsByStatus(t){return this.getAllBids().filter((i=>t.includes(i.status)))}xd(t,i){[r.wy.CONSUMED_LOADING,r.wy.CONSUMED_LOADED,r.wy.INVALIDATED].includes(i)&&this.Cd(t),this.Pd.bidStatusChanged(t,i)}Cd(t){this.Bd(t),(0,c.sj)(this.bd,t)}Rd(){return this.bd.filter((t=>{const i=t.createdTimestamp,e=t.settings.adManagerLineItem.protoLineItem.networkExpiryTimeSeconds;return(0,l.r)(e)&&(0,d.H8)(i)>=e}))}Td(){this.Rd().forEach((t=>t.invalidate()))}_d(t){const i=t.onStatusChanged.subscribe((i=>{this.xd(t,i)}));this.Sd.set(t.settings.bidId,i)}Bd(t){const{bidId:i}=t.settings,e=this.Sd.get(i);null==e||e.unsubscribe(),this.Sd.delete(i)}};p=u([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],p)},6992:(t,i,e)=>{"use strict";e.d(i,{T:()=>o,e:()=>a});var s=e(8659),n=e(5650),r=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let o=class{constructor(){this.bidInFetchList=[]}add(t){this.bidInFetchList.push(t)}remove(t){(0,n.sj)(this.bidInFetchList,t)}getById(t){return this.bidInFetchList.find((i=>i.bidId===t))}};var a;o=r([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped)],o),function(t){t[t.VERIFYING=-1]="VERIFYING"}(a||(a={}))},8797:(t,i,e)=>{"use strict";e.d(i,{S:()=>c,N:()=>s});var s,n=e(8659);!function(t){t[t.ON_STARTED=0]="ON_STARTED",t[t.ON_END=1]="ON_END"}(s||(s={}));var r=e(6716);class o{constructor(){this.Od=new r.x,this.Dd=new r.x,this.Nd={[s.ON_STARTED]:this.Od,[s.ON_END]:this.Dd},this.Vd={[s.ON_STARTED]:t=>this.Od.next(t),[s.ON_END]:t=>this.Dd.next(t)}}getCallingObservable(t){return this.Nd[t].asObservable()}triggerEvent(t,i){(0,this.Vd[t])(i)}}var a=e(5650),h=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let c=class{constructor(){this.Fd=new o,this.jd=[]}get lineItems(){return this.jd}add(t){this.jd=[...this.lineItems,...t],this.Fd.triggerEvent(s.ON_STARTED,t)}remove(t){this.jd=this.lineItems.filter((i=>!(0,a.d3)(i,t))),this.Fd.triggerEvent(s.ON_END,t)}getEvents(t){return this.Fd.getCallingObservable(t)}};c=h([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],c)},9134:(t,i,e)=>{"use strict";e.d(i,{z:()=>s.z,Sb:()=>s.S,TA:()=>n.T,vZ:()=>c,S6:()=>d.S,IX:()=>u});var s=e(3716),n=e(6992),r=e(8659),o=e(6899),a=e(5650),h=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let c=class{constructor(){this.Ud=[]}get lineItems(){return[...this.Ud]}add(t){this.Ud.push(...t)}remove(t){this.Ud.indexOf(t)<0||(0,a.sj)(this.Ud,t)}getByAggregation(t){return this.lineItems.filter((i=>i.hasAggregator===t))}getByLineItemById(t){return this.lineItems.find((i=>i.protoLineItem.advertiserLineItemId===t))}getByPublisherLineItemId(t){return this.lineItems.find((i=>i.protoLineItem.publisherLineItemId===t))}hasAggregatorType(t){return this.lineItems.some((i=>{const e=i.protoLineItem.creativeType;return e&&o.T[e]===t}))}};c=h([(0,r.b2)(),(0,r.Yn)(r.Fw.ContainerScoped)],c);var d=e(8797),l=e(4798);class u{constructor(){this.$d=new Set}static getInstance(){return this.INSTANCE||(this.INSTANCE=new u),this.INSTANCE}static Hd(t,i){const e=t.lineItems.find((t=>{const{advertiserLineItemId:e,publisherLineItemId:s}=t.protoLineItem;return[e,s].includes(i)}));(0,l.$K)(e)&&t.remove(e)}static zd(t,i){t.getBidsByLineItemId(i).forEach((t=>t.invalidate()))}add(t,i,e){t.filter((t=>!this.$d.has(t))).forEach((t=>{this.$d.add(t),u.Hd(i,t),u.zd(e,t)}))}hasLineItemById(t,i){return this.$d.has(t)||this.$d.has(i)}clear(){this.$d.clear()}}},751:(t,i,e)=>{"use strict";e.d(i,{P:()=>h});var s=e(8659),n=e(66),r=e(2859),o=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},a=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)};let h=class{constructor(){this.Gd=!1,this.Wd=[],this.Xd=new r.Q}on(t,i){if(!this.Gd&&t===n.t.REQUEST_AD){this.Gd=!0;const t=1e3;this.Wd.forEach((i=>{setTimeout((()=>{i()}),t)})),this.Wd.length=0}this.Xd.on(t,i)}publish(t,i){this.Gd?this.Xd.trigger(t,i):this.Wd.push((()=>{this.publish(t,i)}))}remove(t,i){this.Xd.remove(t,i)}removeAll(){this.Xd.removeAll(),this.Wd.length=0}};h=o([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),a("design:paramtypes",[])],h)},66:(t,i,e)=>{"use strict";var s,n;e.d(i,{g:()=>n,t:()=>s}),function(t){t.REQUEST_AD="requestAd",t.INIT_AD="initAd",t.START_AD="startAd",t.STOP_AD="stopAd",t.RESIZE_AD="resizeAd",t.PAUSE_AD="pauseAd",t.RESUME_AD="resumeAd",t.EXPAND_AD="expandAd",t.COLLAPSE_AD="collapseAd",t.SKIP_AD="skipAd",t.SET_AD_VOLUME="setAdVolume",t.DESTROY_AD="destroyAd"}(s||(s={})),function(t){t.REQUEST_SUCCESS="requestSuccess",t.AD_ERROR="adError",t.CLICK="click",t.LOADED="loaded",t.IMPRESSION="impression",t.STARTED="start",t.FIRST_QUARTILE="firstQuartile",t.MIDPOINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.ALL_ADS_COMPLETED="allAdsCompleted",t.DURATION_CHANGE="durationChange",t.PAUSED="pause",t.RESUMED="resume",t.STOPPED="stop",t.LINEAR_CHANGED="liniarChanged",t.SKIPPABLE_STATE_CHANGED="skippableStateChanged",t.SKIPPED="skip",t.VOLUME_CHANGED="volumeChange",t.USER_CLOSE="userclose",t.LOG="log"}(n||(n={}))},8919:(t,i,e)=>{"use strict";e.d(i,{Yh:()=>r,sL:()=>h,X3:()=>g,H1:()=>k,IS:()=>y,rO:()=>_});var s=e(289);const n={[s.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[s.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[s.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class r{constructor(t,i,e,s){this.Qd=t,this.Yd=i,this.Kd=e,this._appSettings=s}replace(t,i,e,s){this.Qd.setAdWidth(s.adMacros.adWidth),this.Qd.setAdHeight(s.adMacros.adHeight),this.Qd.setAdPosition(n[s.adMacros.adPostion]),this.Qd.setErrorCode(s.adMacros.errorCode),this.Qd.setMute(s.adMacros.mute),this.Qd.setPlcmt(s.adMacros.plcmt),s.mediaMacros.mediaDescription&&this.Qd.setVideoDescription(s.mediaMacros.mediaDescription),s.mediaMacros.mediaDuration&&this.Qd.setVideoDuration(s.mediaMacros.mediaDuration),s.mediaMacros.mediaId&&this.Qd.setVideoId(s.mediaMacros.mediaId),s.mediaMacros.mediaTitle&&this.Qd.setVideoTitle(s.mediaMacros.mediaTitle),s.mediaMacros.mediaUrl&&this.Qd.setVideoUrl(s.mediaMacros.mediaUrl);const r=this.Yd.isConsent(i);this.Qd.setGDPR(this.Yd.isConsentRequired()?1:0),this.Qd.setConsent(r?1:0),this.Qd.setGDPRConsent(this.Yd.getConsentPayload()),this.Qd.setNPA(this.Yd.isPersonalisedAdsAllowed()?0:1);const o=this.Yd.getTrackableUser(),a=this.Yd.isConsentConnatix()&&r?o:void 0;return this.Qd.setUUID(a),this.Qd.setNielsenSiteId(this._appSettings.bundleID),this.Qd.setNielsenPlacementId(e),this.Qd.setNielsenDeviceGrouping(this.Kd.deviceType),this.Qd.setNielsenOsGrouping(this.Kd.os.os),this.Qd.setNielsenUserId(a),this.Qd.setNielsenPlatform(this.Kd.isInApp),this.Qd.setNielsenOsVersion(this.Kd.os.osVersion),this.Qd.setNielsenUOO(this.Yd.isPersonalisedAdsAllowed()?0:1),this.Qd.setNielsenTimestamp(),this.Qd.setupMacros(t)}}var o=e(4656);const a={[s.ProtoCreativeTypeEnum.External]:t=>t.floorPrice||t.customCpm,[s.ProtoCreativeTypeEnum.MediaFile]:t=>t.floorPrice||t.customCpm,[s.ProtoCreativeTypeEnum.ThirdParty]:t=>t.adxLookupPrice||t.floorPrice||t.customCpm||t.adxFloorPrice,[s.ProtoCreativeTypeEnum.HeaderBidder]:t=>t.prebidjsCPM,[s.ProtoCreativeTypeEnum.Rtb]:t=>(0,o.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.Tam]:t=>(0,o.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.TamDeal]:t=>(0,o.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.TamPrivateAuction]:t=>(0,o.RC)(t.obfuscatedPrice)};class h{static getBidPriceByCreative(t,i){return(0,a[t])(i)}}var c=e(6888),d=e(3020);class l{static insertScript(t,i,e,s,n,r=!0,o){const a=this.Zd.find((i=>i.src===t.src));if(a){const{onLoadCallbacks:t,onErrorCallbacks:i,wasOnLoadCalled:e}=a;if(t.push(s),i.push(s),!e)return;if(e)return void this.tl(a)}this.Zd.push({src:t.src,wasOnLoadCalled:!1,onLoadCallbacks:[s],onErrorCallbacks:[n]}),(0,d.dZ)(t,i,e,(()=>this.il(t)),(()=>this.He(t)),r,o)}static il(t){const i=this.Zd.find((i=>i.src===t.src));i.wasOnLoadCalled=!0,this.tl(i)}static He(t){const i=this.Zd.find((i=>i.src===t.src)),e=this.Zd.findIndex((i=>i.src===t.src));i.onErrorCallbacks.forEach((t=>{try{t()}catch(t){}})),this.Zd.splice(e,1)}static tl(t){t.onLoadCallbacks.forEach((t=>{try{t()}catch(t){}})),t.onLoadCallbacks=[]}}l.Zd=[];var u=e(9791),p=e(9607);const f={ImaObjectNotFound:c.RG.ImaObjectNotFound,ImaScriptFailure:c.RG.ImaScriptFailure},m="//imasdk.googleapis.com/js/sdkloader/ima3.js";class g{static preloadImaSdk(t){(0,d.el)(m,t)}static fetchImaSdk(t,i,e){return new Promise(((s,n)=>{const r=g.sl(t);if(r)return void s(r);const o=i&&1===(0,u.Vm)([99,1]);l.insertScript({src:m},t.document.head,t,(()=>{const i=g.sl(t);i?s(i):(o&&(0,p.nF)({sessionId:e,message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:p.D_.CRITICAL},{throttle:2,shouldSendMaxLog:!1}),n(f.ImaObjectNotFound))}),(()=>{n(f.ImaScriptFailure)}),o,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")}))}static sl(t){return t.google&&t.google.ima}}var v=e(6716);class y{constructor(t){this.wi=t,this.nl=null,this.rl=new v.x}start(){return this.ol(),this}stop(){return this.hl(),this}onTimer(){return this.rl.asObservable()}destroy(){this.hl()}ol(){null===this.nl&&(this.nl=this.wi.setInterval((()=>{this.rl.next()}),500))}hl(){this.wi.clearInterval(this.nl),this.nl=null}}var b,I,P=e(5226),w=e(7916),S=e(5650),A=e(7332),x=e(4798);class _{static isLineItemTargetingAllowed(t,i,e){return _.isAllowedByViewability(t,i)&&_.isAllowedBySound(t,i)&&_.isAllowedByAdBreakType(t,i)&&_.isAllowedByMediaTargeting(t,i)&&_.isAllowedByPodTargeting(t,i)&&_.isAllowedByContextualTargeting(t,i,e)&&_.isAllowedByPlayerSizeTargeting(t,i)&&_.isAllowedByPlayerOrientationTargeting(t,i)&&_.isAllowedByJsQueryTargeting(t,i)&&_.isAllowedByAdTagInCaseOfExternal(t)}static isBidTargetingAllowed(t,i,e){const s=t.getAdDuration(),{sessionMaxAdDuration:n,remainingAdDuration:r,maxAdDuration:o}=i.adBreakState,{adManagerLineItem:a,dimensions:h}=t.settings,{adType:c,nonlinearLineItemSettings:d}=a.protoLineItem;return _.isLineItemTargetingAllowed(a,i,e)&&_.isAllowedRegardingDuration(s,n)&&_.isAllowedRegardingDuration(s,r)&&_.isAllowedRegardingDuration(s,o)&&_.isDimensionsAllowedForNonLinearBanner(c,d,h,i)&&_.isAllowedByPageFocus(a,i)}static isAllowedByJsQueryTargeting(t,i){let e=!0;return t.protoLineItem.queryTargeting.filter((t=>t.rule===s.ProtoLineItemQueryTargetingRuleEnum.Only)).forEach((t=>{this.al(t.keyValue,i.queryJsTargeting)||(e=!1)})),t.protoLineItem.queryTargeting.filter((t=>t.rule===s.ProtoLineItemQueryTargetingRuleEnum.Except)).forEach((t=>{this.al(t.keyValue,i.queryJsTargeting)&&(e=!1)})),e}static al(t,i){let e=!1;return Object.keys(i).forEach((s=>{i[s]===t[s]&&(e=!0)})),e}static isAllowedByAdTagInCaseOfExternal(t){return!t.protoLineItem.isExternal||((0,x.QM)(t.protoLineItem.adTag)||(0,x.QM)(t.protoLineItem.prebidJsBidParamsJSONString)||(0,x.QM)(t.protoLineItem.externalMediaFile)||(0,x.QM)(t.protoLineItem.externalHlsFile))}static isAllowedBySound(t,i){return!t.protoLineItem.sound||i.sound}static isAllowedByViewability(t,i){const e=i.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||e}static isAllowedByAdBreakType(t,i){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some((t=>{if(t.adRollType===i.adBreakState.adBreakType)return _.isAdBreakTypeAllowed(t.adBreakTypeEnum,i.adBreakState.isAdPodBreak)}))}static isAllowedByPageFocus(t,i){return!(t.protoLineItem.removeOutOfFocus&&!i.isPageInFocus)}static isAllowedByMediaTargeting(t,i){return!(t.protoLineItem.mediaIdTargeting&&!_.stringTargetingFiltering(i.media.mediaId,t.protoLineItem.mediaIdTargeting))&&(!(t.protoLineItem.mediaKeywordsTargeting&&!_.stringTargetingFiltering(i.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting))&&!(t.protoLineItem.mediaLanguageTargeting&&!_.stringTargetingFiltering(i.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting)))}static isAllowedByContextualTargeting(t,i,e){var s,n;const{advertiserContextualTargeting:r,publisherContextualTargeting:o}=t.protoLineItem,a=(null===(s=i.media.mediaInsights)||void 0===s?void 0:s.insights)||[],h=(null===(n=i.page.insights)||void 0===n?void 0:n.insights)||[];return!((0,S.BZ)(r)&&!_.isContextualTargetingValid(r,a,h))&&!((0,S.BZ)(o)&&!_.isContextualTargetingValid(o,a,h))}static isAllowedByPlayerSizeTargeting(t,i){const{playerSizeTargetings:e}=t.protoLineItem,{width:n}=i.adContainerState.get(t.protoLineItem.adType);return!(0,x.as)(e)||!(0,x.hj)(n)||(e.sizeChoiceCriteria===s.ProtoSizeChoiceCriteriaEnum.GreaterThan?!(0,x.hj)(e.minWidth)||n>=e.minWidth:e.sizeChoiceCriteria===s.ProtoSizeChoiceCriteriaEnum.SmallerThan?!(0,x.hj)(e.maxWidth)||n<=e.maxWidth:e.sizeChoiceCriteria!==s.ProtoSizeChoiceCriteriaEnum.Between||(!(0,x.hj)(e.maxWidth)||!(0,x.hj)(e.minWidth)||n>=e.minWidth&&n<=e.maxWidth))}static isAllowedByPlayerOrientationTargeting(t,i){const{playerOrientationTargeting:e}=t.protoLineItem;switch(e){case s.ProtoPlayerOrientationTargetingEnum.Landscape:if(i.playerOrientation===w.g.Portrait)return!1;break;case s.ProtoPlayerOrientationTargetingEnum.Portrait:if(i.playerOrientation===w.g.Landscape)return!1}return!0}static isAllowedByPodTargeting(t,i){var e;const n=null===(e=t.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!n)return!0;if(!i.adBreakState.isAdPodBreak)return!0;const r=i.adBreakState.adPodSlotIndex;let o=!0;switch(n.adSlotTargetingType){case s.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(r<n.adSlotPositions[0]||r>n.adSlotPositions[1])&&(o=!1);break;case s.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===n.adSlotPositions.indexOf(r)&&(o=!1)}return n.targetingType===s.ProtoLineItemTargetingTypeEnum.Except&&(o=!o),o}static isAllowedRegardingDuration(t,i){return!t||0===i||t<=i}static isDimensionsAllowedForNonLinearBanner(t,i,e,s){if(!(0,o.lZ)(t,null==i?void 0:i.nonLinearRequestType))return!0;const n=Math.ceil((0,A.Tc)(s.height,P.O.NON_LINEAR_MAX_HEIGHT_PERCENT));return!(!e||(null==e?void 0:e.width)>s.width||(null==e?void 0:e.height)>n)}static stringTargetingFiltering(t,i){if((0,S.BZ)(i.items)&&Array.isArray(t)){const e=(0,S.tN)(t,i.items).length;return i.choiceCriteria===s.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=(0,S.d3)(t,i.items);return i.choiceCriteria===s.ProtoChoiceCriteriaEnum.Only?e:!e}static isAdBreakTypeAllowed(t,i){switch(t){case s.ProtoLineItemAdBreakTypeEnum.All:return!0;case s.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case s.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}static isContextualTargetingValid(t,i,e){return t.some((t=>_.isContextualTargetingCaseValid(t,i,e)))}static isContextualTargetingCaseValid(t,i,e){for(let n=0;n<t.filters.length;n++){const r=t.filters[n],o=r.hashedItemsIds,a=i.filter((t=>o.includes(t))).length,h=e.filter((t=>o.includes(t))).length,c=_.isContextualTargetingFilterValid(r.type,a,o),d=_.isContextualTargetingFilterValid(r.type,h,o);switch(r.level){case s.ProtoContextualTargetingLevelEnum.Media:if(!c)return!1;break;case s.ProtoContextualTargetingLevelEnum.Page:if(!d)return!1;break;case s.ProtoContextualTargetingLevelEnum.Both:if(!c||!d)return!1}}return!0}static isContextualTargetingFilterValid(t,i,e){switch(t){case s.ProtoTargetingFilterEnum.IncludeAny:if(0===i)return!1;break;case s.ProtoTargetingFilterEnum.IncludeAll:if(i!==e.length)return!1;break;case s.ProtoTargetingFilterEnum.ExcludeAny:if(i>0)return!1;break;case s.ProtoTargetingFilterEnum.ExcludeAll:if(i===e.length)return!1}return!0}}class T{}T.IMA_CORRELATOR_LENGTH=10,T.IMA_SCOR_LENGTH=10,function(t){t.DoesNotApply="0",t.Applies="1"}(b||(b={})),function(t){t.PersonalizedAds="0",t.NonPersonalizedAds="1"}(I||(I={}));var C=e(51);class k{constructor(t,i){this.cl=t,this.Yd=i}static dl(t){return`${t.width}x${t.height}`}appendParams(t,i){if(!this.ll()||this.cl.isInApp)return t;const e=new URL(t);return e.searchParams.set("tfcd","0"),e.searchParams.set("gdfp_req","1"),e.searchParams.set("unviewed_position_start","1"),e.searchParams.set("env","vp"),e.searchParams.set("hl","en"),e.searchParams.set("sdk_apis","1,2"),e.searchParams.set("output","vast"),e.searchParams.set("correlator",String((0,u.Ae)(T.IMA_CORRELATOR_LENGTH))),e.searchParams.set("sid",(0,u.qs)()),e.searchParams.set("scor",String((0,u.Ae)(T.IMA_SCOR_LENGTH))),e.searchParams.set("url",this.ul()),e.searchParams.set("description_url",this.ul()),e.searchParams.set("sz",k.dl(i)),e.searchParams.set("gdpr",this.pl()),e.searchParams.set("npa",this.fl()),this.Yd.isPersonalisedAdsAllowed()&&e.searchParams.set("gdpr_consent",this.vl()),e.href}ll(){return(0,x.QM)(this.cl.pageUrl)&&"true"===(0,C.Ph)("cnxImaTest",this.cl.pageUrl)}ul(){return(0,x.QM)(this.cl.pageUrl)?encodeURIComponent(this.cl.pageUrl):""}pl(){return this.Yd.isConsentRequired()?b.Applies:b.DoesNotApply}vl(){return(0,x.QM)(this.Yd.getConsentPayload())?this.Yd.getConsentPayload():""}fl(){return this.Yd.isPersonalisedAdsAllowed()?I.PersonalizedAds:I.NonPersonalizedAds}}},4656:(t,i,e)=>{"use strict";e.d(i,{RC:()=>b,pd:()=>I,aW:()=>g,qD:()=>m,mn:()=>h,ZN:()=>c,Bl:()=>p,AA:()=>d,lZ:()=>l,pi:()=>u});var s=e(289),n=e(5294),r=e(7423),o=e(4798);const a={[r.k.LINEAR]:[s.ProtoAdType.Video,s.ProtoAdType.Overlay],[r.k.NONLINEAR]:[s.ProtoAdType.Nonlinear]};function h(t,i){return t.filter((t=>a[i].includes(t.adType)))}function c(t,i){return t.find((t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===i)).adManagerLineItem}const d=({playerSkippability:t,playerSkipMin:i,playerSkipAfter:e,lineItemSkippability:n,lineItemSkipMin:r})=>{let o={skippable:!0,skipafter:e};switch(t){case s.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan:o=function({skippabitySettings:t,playerSkipMin:i,lineItemSkippability:e,lineItemSkipMin:n}){if(e===s.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan)n<i?t.skipmin=i:(t.skipmin=n,t.minDuration=n);else t.skipmin=i;return t}({skippabitySettings:o,playerSkipMin:i,lineItemSkippability:n,lineItemSkipMin:r});break;case s.ProtoPlayerSkippabilityType.RequireAdsToBeSkippable:n===s.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan&&(o.skipmin=r,o.minDuration=r)}return o};function l(t,i){return t===s.ProtoAdType.Nonlinear&&i===s.ProtoNonlinearRequestType.Banner}function u(t,i){return{adTag:(0,o.$K)(t.url)?t.url:i.adTag,requestCap:(0,o.$K)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,impressionCap:(0,o.$K)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,resetRequestsCapTime:(0,o.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,resetImpressionsCapTime:(0,o.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,resetCapType:(0,o.$K)(t.resetCapType)?t.resetCapType:i.resetCapType}}function p(t){const i=Object.keys(n.rL.bidDemandTypeMap).filter((i=>(0,n.rL.bidDemandTypeMap[i])(t.protoLineItem)))[0];if(!(0,o.$K)(i))return s.ProtoDemandTypeEnum.None;const e=Number.parseInt(i,10);return s.ProtoDemandTypeEnum[s.ProtoDemandTypeEnum[e]]}var f=e(9791);function m(t,i){t.sort(((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width));for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const g=()=>`cnx_bid_slot_${(0,f.qs)()}`,v=2,y=41;function b(t){return(t+y)*v}function I(t){return t/v-y}},5186:(t,i,e)=>{"use strict";e.r(i),e.d(i,{ElementsAdHandler:()=>js,OutstreamAdHandler:()=>qs,PlayspaceAdHandler:()=>Ws});e(8696);var s=e(6716),n=e(289),r=e(6888),o=e(4793),a=e(5204),h=e(7423),c=e(5106),d=e(9906),l=e(9600);class u{constructor(t,i,e,n,o,h,c,l,u,p,f){this.ml=t,this.gl=i,this.yl=e,this.cl=n,this.bl=o,this.Il=h,this.Al=c,this.Sl=l,this._appSettings=u,this.he=p,this._l=f,this.Tl=r.zc.Normal,this.Ui=[],this.kl=new s.x,this.Pi=new s.x,this.Cl=new s.x,this.El=new s.x,this.Ml=new s.x,this.Ll=new s.x,this.Rl=new s.x,this.Ol=new s.x,this.Dl=new s.x,this.Nl=new s.x,this.Vl=new s.x,this.Fl=new s.x,this.jl=new s.x,this.Ul=this.$l(),this.ql();const m=d.h.getSessionChildContainer(this.Sl.config.sessionId).resolve(a.k);this.Hl=this.zl(m),this.Gl(),this.Wl=this.Ql(m),this.Wl&&this.Jl(),this.gl&&this.disableAdvertising()}inFloatingChanged(t){this.ml=t,this.Ul.inFloatingChanged(t),this.Hl.updateFloatingState(t)}canPrefetchAds(t){this.Ul.canPrefetchAds(t)}hasAdsEligibleForFill(){return this.Ul.hasAdsEligibleForFill()}Yl(t,i){const e=[{container:this.Kl,width:t,height:i,type:n.ProtoAdType.Overlay},{container:this.Kl,width:t,height:i,type:n.ProtoAdType.Video},{container:this.Zl,width:t,height:i,type:n.ProtoAdType.Nonlinear}];return this.Zl||e.pop(),e}ql(){this.Ui.push(this.Ul.onAdsEnable.subscribe((t=>{this.kl.next(t)})),this.Ul.onPrefetchStart.subscribe((()=>{this.Cl.next()})))}Jl(){var t,i,e;this.Ui.push(null===(t=this.Wl)||void 0===t?void 0:t.onVpaidEvent.subscribe((t=>{this.Pi.next(t)})),null===(i=this.Wl)||void 0===i?void 0:i.onNonLinearEvent.subscribe((t=>{t.type===o.gx.ShowNonLinearEvent&&this.linearInImpression&&this.Wl.pause(),this.Nl.next(t)})),null===(e=this.Wl)||void 0===e?void 0:e.onExperienceEvent.subscribe((t=>{this.Vl.next({type:t.type,payload:t.payload})})),this.Ul.onNonlinearImpressionPrice.subscribe((t=>{this.Fl.next(t)})),this.Ul.onNonlinearImpressionRevenue.subscribe((t=>{this.jl.next(t)})))}Gl(){this.Ui.push(this.Hl.onVpaidEvent.subscribe((t=>{this.Pi.next(t)})),this.Hl.onUiComponentEvent.subscribe((t=>{this.Ml.next(t)})),this.Hl.onExperienceEvent.subscribe((t=>{this.Ll.next({type:t.type,payload:t.payload})})),this.Hl.onLinearEvent.subscribe((t=>{var i;t.type===o.lc.ShowLinearEvent&&(null===(i=this.Wl)||void 0===i||i.pause()),this.El.next(t)})),this.Ul.onLinearImpressionPrice.subscribe((t=>{this.Rl.next(t)})),this.Ul.onLinearImpressionRevenue.subscribe((t=>{this.Ol.next(t)})),this.Ul.onLinearNoFill.subscribe((()=>{this.Dl.next()})))}tu(t,i,e){this.Ul.initAd(t,i,this.Tl,1,e,this.Yl(t,i),this.Sl)}setLineItemMetadata(t,i){this.Ul.setLineItemMetadata(t,i)}startConnatixAuction(t){this.Ul.startConnatixAuction(t)}adStateChange(t,i){var e;this.Hl.adStateChange(t,i),null===(e=this.Wl)||void 0===e||e.adStateChange(t,i)}contentPlaybackStateChanged(t){var i;null===(i=this.Wl)||void 0===i||i.contentPlaybackStateChanged(t)}disableAds(t,i){this.Ul.disableAds(t,i)}enableAds(t){this.Ul.enableAds(t)}disableAdvertising(){this.Ul.disableAdvertising()}enableAdvertising(){this.Ul.enableAdvertising()}start(t,i,e,s=!1,n=!1){n&&this.startNonLinear(),this.startLinear(e,s),this.tu(t,i,e)}stopAd(t){var i;this.Hl.stopAd(t),null===(i=this.Wl)||void 0===i||i.stopAd(t)}play(){this.Hl.play()}pause(){var t;this.Hl.pause(),null===(t=this.Wl)||void 0===t||t.pause()}togglePlay(t=!1){this.Hl.togglePlay(t)}resumeWithoutUserInteraction(t){var i;this.Hl.resumeWithoutUserInteraction(),null===(i=this.Wl)||void 0===i||i.resumeWithoutUserInteraction(t)}resizeAd(t,i,e,s){var n;this.setVastViewMode(e),this.Hl.resizeAd(t,i),null===(n=this.Wl)||void 0===n||n.resizeAd(t,i,s)}setPlayerOrientation(t){this.Ul.setPlayerOrientation(t)}updateJsQueryTargeting(t){this.Ul.updateJsQueryTargeting(t)}removeJsQueryTargeting(t){this.Ul.removeJsQueryTargeting(t)}setVastViewMode(t){this.Tl=t,this.Ul.setVastViewMode(t)}contentChanged(){this.Ul.onContentChange()}newLinearAdOpportunity(t){this.Ul.newLinearAdOpportunity(t)}destroy(){var t,i,e;(0,l.i)(this.Ui),this.Hl.destroy(),null===(t=this.Wl)||void 0===t||t.destroy(),null===(i=this.Ul)||void 0===i||i.disableAds(h.k.LINEAR,{disableReason:c.m.Unknown}),null===(e=this.Ul)||void 0===e||e.disableAds(h.k.NONLINEAR,{disableReason:c.m.Unknown}),this.Ul.destroy(this.yl.sessionId)}get onAdsEnable(){return this.kl.asObservable()}get onVpaidEvent(){return this.Pi.asObservable()}get onPrefetchStart(){return this.Cl.asObservable()}startNonLinear(){var t;null===(t=this.Wl)||void 0===t||t.start()}contentEnded(){var t;null===(t=this.Wl)||void 0===t||t.pause()}get onNonLinearEvent(){return this.Nl.asObservable()}get onNonLinearExperienceEvent(){return this.Vl.asObservable()}get onNonLinearImpressionPrice(){return this.Fl.asObservable()}get onNonLinearImpressionRevenue(){return this.jl.asObservable()}get nonLinearInImpression(){return!!this.Wl&&this.Wl.inImpression}get Zl(){var t;return null===(t=this.Wl)||void 0===t?void 0:t.adContainer}startLinear(t,i=!1){this.Hl.start(t,i)}setMediaRestrictions(t){this.Ul.setMediaRestrictions(t)}getNewLinearAdOpportunity(){return this.Ul.getNewLinearAdOpportunity()}getLinearVolume(){return this.Hl.getVolume()}setLinearVolume(t){this.Hl.setVolume(t)}increaseVolume(t,i=!1){this.Hl.increaseVolume(t,i)}decreaseVolume(t,i=!1){this.Hl.decreaseVolume(t,i)}toggleMute(t=!1){this.Hl.toggleMute(t)}hideLinear(){this.Hl.hide()}showLinear(){this.Hl.show()}updateContinueReadingCard(){this.Hl.updateContinueReadingCard()}setContinueReadingCard(t){this.Hl.setContinueReadingCard(t)}hideContinueReadingCard(){this.Hl.hideContinueReadingCard()}setAdMarkerTitle(t){this.Hl.setAdMarkerTitle(t)}hideAdMarkerTitle(){this.Hl.hideAdMarkerTitle()}enterAdPodLoadingState(){this.Hl.enterAdPodLoadingState()}setAdLoadingBackgroundUrl(t){this.Hl.setAdLoadingBackgroundUrl(t)}setCustomMacros(t){this.Ul.setCustomMacros(t)}enablePrefetchForLinearity(t){this.Ul.enablePrefetchForLinearity(t)}get onLinearEvent(){return this.El.asObservable()}get onLinearUiComponentEvent(){return this.Ml.asObservable()}get onLinearExperienceEvent(){return this.Ll.asObservable()}get onLinearImpressionPrice(){return this.Rl.asObservable()}get onLinearImpressionRevenue(){return this.Ol.asObservable()}get onLinearNoFill(){return this.Dl.asObservable()}get linearInImpression(){return this.Hl.inImpression}get Kl(){return this.Hl.adContainer}get eu(){return this.Hl.secondaryAdContainer}get linearAdUserInterface(){return this.Hl.adUserInterface}get onFullcreenChange(){return this.Hl.onFullcreenChange}get linearAdInWin(){return this.Hl.adInWin}get firstLinearAdShown(){return this.Hl.firstAdShown}get inAdPodLoadingState(){return this.Hl.inAdPodLoadingState}getLinearAdContainerWidth(){return this.Hl.getMainAdContainerWidth()}userInteraction(t){this.Ul.userInteraction(t)}get sessionId(){return this.yl.sessionId}}var p=e(9127),f=e(7878),m=e(6798),g=e(7845),v=e(2566);var y=e(8474);function b(t,i,e){return void 0===e&&(e=1/0),(0,y.m)(i)?b((function(e,s){return(0,p.U)((function(t,n){return i(e,t,s,n)}))((0,f.Xf)(t(e,s)))}),e):("number"==typeof i&&(e=i),(0,m.e)((function(i,s){return function(t,i,e,s,n,r,o,a){var h=[],c=0,d=0,l=!1,u=function(){!l||h.length||c||i.complete()},p=function(t){return c<s?m(t):h.push(t)},m=function(t){r&&i.next(t),c++;var a=!1;(0,f.Xf)(e(t,d++)).subscribe((0,v.x)(i,(function(t){null==n||n(t),r?p(t):i.next(t)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var t=function(){var t=h.shift();o?(0,g.f)(i,o,(function(){return m(t)})):m(t)};h.length&&c<s;)t();u()}catch(t){i.error(t)}})))};return t.subscribe((0,v.x)(i,p,(function(){l=!0,u()}))),function(){null==a||a()}}(i,s,t,e)})))}var I=e(278);var P=e(1545),w=e(2457);function S(t,i){return void 0===i&&(i=0),(0,m.e)((function(e,s){e.subscribe((0,v.x)(s,(function(e){return(0,g.f)(s,t,(function(){return s.next(e)}),i)}),(function(){return(0,g.f)(s,t,(function(){return s.complete()}),i)}),(function(e){return(0,g.f)(s,t,(function(){return s.error(e)}),i)})))}))}function A(t,i){return void 0===i&&(i=0),(0,m.e)((function(e,s){s.add(t.schedule((function(){return e.subscribe(s)}),i))}))}var x=e(1480);var _=e(9768);function T(t,i){if(!t)throw new Error("Iterable cannot be null");return new x.y((function(e){(0,g.f)(e,i,(function(){var s=t[Symbol.asyncIterator]();(0,g.f)(e,i,(function(){s.next().then((function(t){t.done?e.complete():e.next(t.value)}))}),0,!0)}))}))}var C=e(1764),k=e(3841),E=e(5685),M=e(1837),L=e(8430),R=e(8729),B=e(8671);function O(t,i){if(null!=t){if((0,C.c)(t))return function(t,i){return(0,f.Xf)(t).pipe(A(i),S(i))}(t,i);if((0,E.z)(t))return function(t,i){return new x.y((function(e){var s=0;return i.schedule((function(){s===t.length?e.complete():(e.next(t[s++]),e.closed||this.schedule())}))}))}(t,i);if((0,k.t)(t))return function(t,i){return(0,f.Xf)(t).pipe(A(i),S(i))}(t,i);if((0,L.D)(t))return T(t,i);if((0,M.T)(t))return function(t,i){return new x.y((function(e){var s;return(0,g.f)(e,i,(function(){s=t[_.h](),(0,g.f)(e,i,(function(){var t,i,n;try{i=(t=s.next()).value,n=t.done}catch(t){return void e.error(t)}n?e.complete():e.next(i)}),0,!0)})),function(){return(0,y.m)(null==s?void 0:s.return)&&s.return()}}))}(t,i);if((0,B.L)(t))return function(t,i){return T((0,B.Q)(t),i)}(t,i)}throw(0,R.z)(t)}function D(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=(0,w.yG)(t),s=(0,w.oi)(t,1/0),n=t;return n.length?1===n.length?(0,f.Xf)(n[0]):function(t){return void 0===t&&(t=1/0),b(I.y,t)}(s)(function(t,i){return i?O(t,i):(0,f.Xf)(t)}(n,e)):P.E}var N=e(8509),F=e(5078),$=e(1102),V=e(8983),j=e(5227),U=e(9022),q=e(9490),H=e(3360),z=e(9762);var W=e(2300);class G{constructor(t){this.showExpandButton=t}get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content ${this.showExpandButton?"cnx-ad-fs":""}">\n                    <cnx class="cnx-ad-marker" aria-label="Ad" role="img">\n                        <cnx class="cnx-marker-cnt-first">\n                            <cnx class="cnx-marker-cnt-second">\n                                <cnx class="cnx-ad-marker-svg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"/><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"/></svg>\n</cnx>\n                                <cnx class="cnx-ad-marker-text">1/1</cnx>\n                            </cnx>\n                            <cnx class="cnx-ad-marker-duration">[[${W.r.RemainingDurationLabel}]]</cnx>\n                        </cnx>\n                        <cnx class="cnx-ad-marker-title"><cnx-span class="cnx-ad-title-text"></cnx-span></cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${W.r.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${W.r.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${W.r.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${W.r.SkipAdButton}]]\n                    <cnx class="cnx-ad-close-button cnx-ui-btn">[[${W.r.CloseButton}]]</cnx>\n                    ${this.getExpandTemplate()}\n                    <cnx class="cnx-ad-progress-bar">[[${W.r.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${o.Ek.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${o.Ek.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${W.r.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}getExpandTemplate(){return this.showExpandButton?`<cnx class="cnx-ad-expand-button cnx-ui-btn cnx-hide-on-volume-hover cnx-d-sm-none">[[${W.r.ExpandButton}]]</cnx>`:""}}var X=e(5356),Q=e(3020),J=e(51),Y=e(9607),K=e(4798);class Z{constructor(t,i,e,n,r,o,a,h,c){this.yl=t,this.bl=i,this.Il=e,this.Al=n,this.Sl=r,this.he=o,this._l=a,this.Ul=h,this.su=c,this.ru=[],this.ou=!1,this.hu=!1,this.au=!1,this.cu=0,this.du=0,this.lu=!0,this.uu=!1,this.pu=!1,this.fu=!1,this.vu=!1,this.Ui=[],this.El=new s.x,this.Pi=new s.x,this.mu=new s.x,this.gu=new s.x,this.yu=new s.x,this.bu=new s.x,this.Qi=t=>{const i=t?{type:N.Y.AdPlayerInView}:{type:N.Y.AdPlayerOutOfView};this.mu.next(i),t&&this.au&&this.fu&&this.mu.next({type:N.Y.AdPlayingInView})},this.Iu(),this.subscribeToViewabilityService()}Pu(){this.Ui.push(this.wu(),this.Au())}subscribeToViewabilityService(){var t;null===(t=this.Sl.services.ViewabilityService)||void 0===t||t.on(this.bl,(t=>this.Qi(t)),{threshold:U.fJ})}Su(t){switch(t.type){case r.fI.AdPaused:this.El.next({type:o.lc.PauseLinearEvent});break;case r.fI.AdPlaying:this.El.next({type:o.lc.ResumeLinearEvent});break;case r.fI.AdImpression:this.El.next({type:o.lc.ShowLinearEvent,payload:t.payload});break;case r.fI.AdSkipped:this.El.next({type:o.lc.SkipLinearEvent});break;case r.fI.AdStopped:this.El.next({type:o.lc.HideLinearEvent});break;case r.fI.AdError:this.inImpression&&this.El.next({type:o.lc.HideLinearEvent})}}_u(t){var i;this.Tu(),this.updateContinueReadingCard(),t.payload.adDuration=null===(i=this.Ul.getCurrentAdMetadata(h.k.LINEAR))||void 0===i?void 0:i.duration,t.payload.adDuration||this.ou||this.show(),this.ou=!0,this.au=!0,this.uu&&this.xu(),t.payload.adDuration?this.ku.addDurationAdMarker():this.ku.removeDurationAdMarker(),this.ku.updateDuration(t.payload.adDuration),this.ku.changeState(q.Ez.PlayingState),this.Cu=t.payload.clickThroughUrl,this.Eu(t.payload.selectedAdSlot),this.Al.getTotalNumberOfSlots()>1?this.ku.addPodAdMarker(this.Al.getCurrentSlotIndex(),this.Al.getTotalNumberOfSlots()):this.ku.removeAddPodAdMarker()}Mu(t=!1){const i=(e=this.yl,s=this.Sl.config,{logoUrl:e.logoUrl,isMobile:s.isMobile,closeButtonMode:e.closeButtonMode,floatingCloseButtonMode:e.floatingSettings.floatingCloseButtonMode,isCloseButton:e.isCloseButton,sharingDestinations:e.sharingDestinations});var e,s;this.ku=new F.f(this.Sl.services.GlobalDomUtilsService,this.Sl.services.ViewabilityService,this.Sl.services.InteractionService,this.bl,new G(t).template,i),this.Sl.config.isMobile&&(0,Q.cn)(this.bl,V.s6.Mobile),this.ku.hide()}Lu(){this.Bu=this.Ru(),this.Ou(this.Bu),this.ru.push(this.Bu)}Ru(t=""){return this.Sl.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}Ou(t){this.bl.appendChild(t)}Iu(){}wu(){return this.Ul.onLinearVpaidEvent.subscribe((t=>{let i=!1;switch(t.type){case r.fI.AdLoaded:this.uu=this.Du(t.payload),this.uu&&(t.payload.payload.adLoadedData.skipOffset=this.yl.skipAdAfter);break;case r.fI.AdPaused:this.fu=!1,this.ku.changeState(q.Ez.PausedState);break;case r.fI.AdPlaying:this.fu=!0,this.ku.changeState(q.Ez.PlayingState);break;case r.fI.AdImpression:this.fu=!0,this._u(t.payload);break;case r.fI.AdSkipped:this.Nu(n.ProtoAdClickTypeEnum.AdSkipClick),this.Vu(),i=!0;break;case r.fI.AdStopped:case r.fI.AdError:if(this.Fu())return;this.Vu(),i=!0;break;case r.fI.AdClickThru:this.Nu(n.ProtoAdClickTypeEnum.AdClickThrough)}this.lu&&(this.Pi.next(t),this.Su(t)),this.lu=!0,i&&(this.au=!1,this.fu=!1,this.ku.changeState(q.Ez.PausedState))}))}Au(){return this.ku.onUiEvent.subscribe((t=>{switch(t.type){case z.C.Volume:this.Uu(t.payload.volume),this.Nu(n.ProtoAdClickTypeEnum.VolumeClick);break;case z.C.Play:this.Nu(n.ProtoAdClickTypeEnum.PlayClick),this.play();break;case z.C.Pause:this.Nu(n.ProtoAdClickTypeEnum.PauseClick),this.pause();break;case z.C.Expand:this.Nu(n.ProtoAdClickTypeEnum.FullScreenClick),this.bu.next(z.C.Expand);break;case z.C.Collapse:this.Nu(n.ProtoAdClickTypeEnum.ExitFullScreenClick),this.bu.next(z.C.Collapse);break;case z.C.Close:{this.yu.next({type:j.Uh.UserInteraction,payload:{playback:!1}});const t=this.vu?n.ProtoAdClickTypeEnum.FloatingCloseClick:n.ProtoAdClickTypeEnum.EmbeddedCloseClick;this.Nu(t),this.gu.next({type:z.C.Close});break}case z.C.Mute:this.Uu(0),this.Nu(n.ProtoAdClickTypeEnum.MuteClick);break;case z.C.Unmute:this.Uu(1),this.Nu(n.ProtoAdClickTypeEnum.UnmuteClick);break;case z.C.SkipAd:this.qu()}}))}xu(){this.ku.showSkipAdButton(this.yl.skipAdAfter)}Nu(t){var i;const e=null===(i=this.Ul)||void 0===i?void 0:i.getCurrentAdMetadata(h.k.LINEAR);if(!e)return;const{advertiserLineItemId:s,publisherLineItemId:n}=e,r=this.Ul.getCurrentAdBreakType();this.su.adClick.next({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:$.EN.fromProtoAdBreakType(r),type:$.EN.fromProtoAdClickType(t)})}Du(t){var i;const e=null===(i=this.Ul)||void 0===i?void 0:i.getCurrentAdMetadata(h.k.LINEAR);if(!e)return!1;const{adSourceType:s}=e,{skipOffset:n}=t.payload.adLoadedData;return!(0,X.AK)(s,n)&&(0,X.Xj)(e.duration,this.yl)}Eu(t){this.ru.filter((i=>i!==t)).forEach((t=>{(0,Q.cn)(t,V.Gj.Invisible)}))}Vu(){this.ru.forEach((t=>{(0,Q.IV)(t,V.Gj.Invisible)}))}Hu(){this.pu=!1,this.ku.hideAdLoadingScreen()}Uu(t){this.setVolume(t),this.yu.next({type:j.Uh.UserInteraction,payload:{volume:!0}})}Tu(){this.ku.hideSkipAdButton()}start(t,i=!1){try{this.Mu(i),this.Lu(),this.setVolume(t),this.Pu()}catch(t){(0,Y.nF)({callStack:t.stack,level:Y.D_.CRITICAL,exception:t.message,message:"linearAdhandler_start",sessionId:this.yl.sessionId})}}updateFloatingState(t){this.vu=t}getVolume(){return this.cu}increaseVolume(t,i=!1){if(i&&this.Nu(n.ProtoAdClickTypeEnum.VolumeClick),this.cu+t>1)return void this.setVolume(1);const e=this.cu+t;this.setVolume(e)}decreaseVolume(t,i=!1){if(i&&this.Nu(n.ProtoAdClickTypeEnum.VolumeClick),this.getVolume()-t<0)return void this.setVolume(0);const e=this.getVolume()-t;this.setVolume(e)}toggleMute(t=!1){if(t&&this.Nu(0===this.cu?n.ProtoAdClickTypeEnum.UnmuteClick:n.ProtoAdClickTypeEnum.MuteClick),0===this.cu)return this.du=this.du>0?this.du:.2,void this.setVolume(this.du);this.du=this.cu,this.setVolume(0)}hide(){(0,Q.IV)(this.bl,V.s6.Ad,V.s6.AdOverlayType);const t=this.bl.parentElement;t&&(0,Q.IV)(t,V.s6.AdContainer),this.ku.hide(),this.su.adBreakEnd.next()}show(){var t,i;const e=[V.s6.Ad],s=null===(i=null===(t=this.Ul)||void 0===t?void 0:t.getCurrentAdMetadata(h.k.LINEAR))||void 0===i?void 0:i.adType;s===n.ProtoAdType.Overlay&&e.push(V.s6.AdOverlayType),this.zu=s,(0,Q.cn)(this.bl,...e);const r=this.bl.parentElement;r&&(0,Q.cn)(r,V.s6.AdContainer),this.ku.show(),this.ku.updateVolume(this.cu),this.Hu(),this.su.adBreakStart.next({adSkippableInSeconds:this.xu?this.yl.skipAdAfter:0,isLinear:!0})}setVolume(t){this.cu=t,this.Ul.setAdVolume(h.k.LINEAR,t),this.ku&&this.ku.updateVolume(t),this.gu.next({type:z.C.Volume,payload:{volume:t}})}resizeAd(t,i){this.inImpression&&(this.updateContinueReadingCard(),this.updateShowAdMarkerTitle())}adStateChange(t,i){this.Ul.onAdStateChange(h.k.LINEAR,t,i)}getMainAdContainerWidth(){return this.Ul.getMainAdContainerWidth(h.k.LINEAR)}resumeWithoutUserInteraction(){this.inImpression&&this.Ul.resumeAd(h.k.LINEAR,!1)}play(){if(!this.inImpression)return;this.Ul.resumeAd(h.k.LINEAR,!0),this.yu.next({type:j.Uh.UserInteraction,payload:{playback:!0}}),this.fu=!0}Gu(t){if((0,J.Ph)("cnxShowAdCard",this.Sl.config.pageUrl))return!0;let i=!1;if(t.adType===n.ProtoAdType.Video){const e=this.bl.clientWidth*(t.heightRatio/t.widthRatio);i=this.bl.clientHeight-e>=76}return t.adType===n.ProtoAdType.Overlay&&(i=this.bl.clientHeight-t.height>=76),i}updateContinueReadingCard(){const t=this.Ul.getCurrentAdMediaSize(h.k.LINEAR);(0,K.$K)(t)&&(this.Gu(t)?this.ku.showContinueReadingCard(this.Bu):this.ku.hideContinueReadingCard(this.Bu))}updateShowAdMarkerTitle(){this.hu&&this.bl.clientWidth>=320?this.ku.showAdMarkerTitle():this.ku.hideAdMarkerTitle()}setContinueReadingCard(t){this.ku.setContinueReadingCard({imageSrc:H.Q.getSmartCroppedImageUrl(t.imageSrc,270,150,this.he),title:t.title})}hideContinueReadingCard(){this.ku.hideContinueReadingCard(this.Bu)}setAdMarkerTitle(t){this.ku.addAdMarkerTitle(t),this.hu=!0,this.bl.clientWidth>=320&&this.ku.showAdMarkerTitle()}hideAdMarkerTitle(){this.ku.hideAdMarkerTitle()}pause(){if(!this.inImpression)return;this.Ul.pauseAd(h.k.LINEAR,!0),this.yu.next({type:j.Uh.UserInteraction,payload:{playback:!1}}),this.fu=!1}togglePlay(t=!1){t&&this.Nu(this.fu?n.ProtoAdClickTypeEnum.PauseClick:n.ProtoAdClickTypeEnum.PlayClick),this.fu?this.pause():this.play()}stopAd(t){const i=()=>{this.Pi.next({type:r.fI.AdStopped,payload:{payload:{adType:n.ProtoAdType.Video}}});const i=t===o.aB.ForceStopAdSlot;this.El.next({type:o.lc.HideLinearEvent,forced:i}),this.lu=!1};this.Ul?(i(),this.Ul.stopAd(h.k.LINEAR,t)):this.inAdPodLoadingState&&i()}qu(){this.Ul&&this.inImpression?this.Ul.skipAd(h.k.LINEAR):this.pu&&(this.Pi.next({type:r.fI.AdSkipped}),this.Hu())}enterAdPodLoadingState(){this.pu=!0;const{width:t,height:i}=this.Ul.getAdContainerSize(this.zu);this.ku.showAdLoadingScreen(H.Q.getSmartCroppedImageUrl(this.Wu,t,i,this.he),this.Cu,this.Al.getNextSlotIndex(),this.Al.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.Wu=t}destroy(){var t,i;(0,l.i)(this.Ui),null===(t=this.Sl.services.ViewabilityService)||void 0===t||t.off(this.bl,this.Qi),null===(i=this.ku)||void 0===i||i.destroy()}get onVpaidEvent(){return this.Pi.asObservable()}get onUiComponentEvent(){return this.gu.asObservable()}get onExperienceEvent(){return this.yu.asObservable()}get onLinearEvent(){return this.El.asObservable()}get adUserInterface(){return this.ku}get adContainer(){return this.Bu}get secondaryAdContainer(){return this.eu}get firstAdShown(){return this.ou}get inImpression(){return this.au}get adInWin(){return this.Ul.isAdInWin(h.k.LINEAR)}get inAdPodLoadingState(){return this.pu}get onFullcreenChange(){return this.bu.asObservable()}}var tt=e(6095);class it extends Z{_u(t){super._u(t),this.yl.outstreamAdAsContent&&this.Xu()}Fu(){return this.yl.outstreamAdAsContent}Iu(){this.yl.isOutStreamType()||this.yl.isLiveType()||(this.Qu=d.h.getSessionChildContainer(this.Sl.config.sessionId).resolve(tt.U),this.Qu.startListeningToAdEvents(D(this.Pi,this.mu)))}Xu(){this.ku.hideProgressBar(),this.ku.hideAdMarker(),this.Tu()}}var et=e(5226),st=e(7332);class nt{constructor(t,i,e,n,o,a,h,c,d){this.yl=t,this.bl=i,this.Il=e,this.Al=n,this.Sl=o,this.he=a,this._l=h,this.Ul=c,this.su=d,this.Ui=[],this.Nl=new s.x,this.Pi=new s.x,this.yu=new s.x,this.ru=[],this.au=!1,this.Tl=r.zc.Normal,this.Ju=!1}Pu(){this.Ui.push(this.Ul.onNonlinearVpaidEvent.subscribe((t=>{switch(t.type){case r.fI.AdImpression:this._u(t.payload);break;case r.fI.AdUserClose:this.Nu(n.ProtoAdClickTypeEnum.AdUserClose);break;case r.fI.AdError:this.Vu();break;case r.fI.AdClickThru:this.Nu(n.ProtoAdClickTypeEnum.AdClickThrough)}this.Pi.next(t),this.Yu(t)})))}Yu(t){switch(t.type){case r.fI.AdImpression:this.show(),this.Nl.next({type:o.gx.ShowNonLinearEvent,payload:t.payload});break;case r.fI.AdUserClose:this.hide();break;case r.fI.AdStopped:this.hide(),this.Nl.next({type:o.gx.HideNonLinearEvent});break;case r.fI.AdError:this.inImpression&&this.Nl.next({type:o.gx.HideNonLinearEvent})}}_u(t){this.au=!0,this.Eu(t.payload.selectedAdSlot)}Lu(){this.Bu=this.Ru(),this.Ou(this.Bu),this.ru.push(this.Bu)}Ru(t=""){return this.Sl.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-non-linear-ad-container cnx-full-height ${t}"></div>`)}Ou(t){this.bl.appendChild(t)}Nu(t){var i;const e=null===(i=this.Ul)||void 0===i?void 0:i.getCurrentAdMetadata(h.k.NONLINEAR);if(!e)return;const{advertiserLineItemId:s,publisherLineItemId:n}=e,r=this.Ul.getCurrentAdBreakType();this.su.adClick.next({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:$.EN.fromProtoAdBreakType(r),type:$.EN.fromProtoAdClickType(t)})}Eu(t){this.ru.filter((i=>i!==t)).forEach((t=>{(0,Q.cn)(t,V.Gj.Hide)}))}Vu(){this.ru.forEach((t=>{(0,Q.IV)(t,V.Gj.Hide)}))}Ku(){var t;const i=null===(t=this.Ul.getCurrentAdMediaSize(h.k.NONLINEAR))||void 0===t?void 0:t.height;if(!(0,K.r)(i))return!0;const e=this.adContainer.clientHeight,s=(0,st.Tc)(e,et.O.NON_LINEAR_MAX_HEIGHT_PERCENT);return Math.ceil(s)<i}start(){try{this.Lu(),this.Pu()}catch(t){(0,Y.nF)({callStack:t.stack,level:Y.D_.CRITICAL,exception:t.message,message:"nonLinearAdhandler_start",sessionId:this.yl.sessionId})}}hide(){(0,Q.IV)(this.bl,V.s6.AdNonLinear),this.su.adBreakEnd.next()}show(){(0,Q.cn)(this.bl,V.s6.AdNonLinear),this.su.adBreakStart.next({adSkippableInSeconds:0,isLinear:!1})}adStateChange(t,i){this.inImpression&&(t===n.ProtoAdSlotsEnum.PreRoll||t===n.ProtoAdSlotsEnum.PostRoll?this.pause():this.resumeWithoutUserInteraction(t),this.Ul.onAdStateChange(h.k.NONLINEAR,t,i))}contentPlaybackStateChanged(t){this.Ju=t,this.Ju||this.pause()}resizeAd(t,i,e){this.inImpression&&this.Ju&&(this.Ku()?this.pause():this.resumeWithoutUserInteraction(e))}resumeWithoutUserInteraction(t){this.inImpression&&t!==n.ProtoAdSlotsEnum.PreRoll&&t!==n.ProtoAdSlotsEnum.PostRoll&&(this.Ku()||(this.show(),this.Ul.resumeAd(h.k.NONLINEAR,!1)))}pause(){if(!this.inImpression)return;this.hide();this.Ul.pauseAd(h.k.NONLINEAR,!0),this.yu.next({type:j.Uh.UserInteraction,payload:{playback:!1}})}stopAd(t){if(!this.inImpression)return;const i=()=>{this.Pi.next({type:r.fI.AdStopped,payload:{payload:{adType:n.ProtoAdType.Nonlinear}}}),this.Nl.next({type:o.gx.HideNonLinearEvent})};this.Ul&&(i(),this.Ul.stopAd(h.k.NONLINEAR,t))}destroy(){(0,l.i)(this.Ui)}get onExperienceEvent(){return this.yu.asObservable()}get onNonLinearEvent(){return this.Nl.asObservable()}get onVpaidEvent(){return this.Pi.asObservable()}get adContainer(){return this.Bu}get inImpression(){return this.au}get adInWin(){return this.Ul.isAdInWin(h.k.NONLINEAR)}}class rt extends nt{}var ot,at=e(1307),ht=e(8921),ct=e(6899),dt=e(7225);!function(t){t[t.Index=17]="Index"}(ot||(ot={}));class lt{}lt.GLOBAL_DISPLAY_SIZES=[{w:300,h:250},{w:728,h:90},{w:320,h:50},{w:300,h:600},{w:160,h:600},{w:970,h:250},{w:300,h:50},{w:336,h:280},{w:320,h:100},{w:320,h:320},{w:300,h:300},{w:120,h:600},{w:970,h:90},{w:900,h:550},{w:320,h:480},{w:250,h:250},{w:200,h:200}],lt.NONLINEAR_DISPLAY_SIZES=[{w:450,h:50}],lt.NONLINEAR_AD_HEIGHT=50,lt.CUSTOM_DISPLAY_FORMATS={[ot.Index]:[{w:300,h:250},{w:320,h:50},{w:728,h:90},{w:300,h:600},{w:160,h:600},{w:970,h:250},{w:300,h:50},{w:320,h:100},{w:336,h:280},{w:120,h:600},{w:970,h:90},{w:320,h:480},{w:800,h:250},{w:300,h:105},{w:300,h:100},{w:750,h:300},{w:750,h:200},{w:320,h:320},{w:250,h:250},{w:300,h:300}]};var ut=e(3199);class pt{static parseAggregatorBidResponse(t,i,e){return{lineItem:i,vastTracker:this.Zu(t,i),state:e,requestMetadata:new at.oO({requestedFloorPrice:t.requestedFloorPrice,isUserSynced:t.syncedUser,requestNumber:i.historicalMetrics.requestNumber,encryptedPrice:t.encryptedPrice,dspId:t.dspId,rtbAdomain:t.adomain,rtbSeatId:t.seatId,rtbCampainId:t.campaignId,cnxBidId:t.cnxBidId,requestTrackingHandledByServer:!0,logAuctionInformation:t.logAuctionInformation,auctionBidId:t.auctionBidId,rtbRequestId:t.rtbRequestId,liveRampType:t.liveRampType,floorPriceInformation:t.floorPriceInformation,discount:t.discount,serverBillingNoticeUrls:t.serverBillingNoticeUrls,hasIIQLookup:t.hasIIQLookup,hasLexiconEnvelopeBeenUsed:t.hasLexiconEnvelopeBeenUsed}),creativeId:t.creativeId,dimensions:{width:t.width,height:t.height},html:t.vastTag,mime:t.mime,obfuscatedPrice:t.gtkpbp,successRate:t.successRate,vastTag:t.vastTag}}static Zu(t,i){const e=new ut.Mz;(0,ut.E3)(i.protoLineItem.trackers,e);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter((t=>(0,K.QM)(t))).map((t=>(0,ut.U4)(t)));return e.adImpression.push(...s),(0,K.QM)(t.winNoticeUrl)&&e.adWin.push((0,ut.U4)(t.winNoticeUrl)),e}}var ft=e(1006),mt=e(4782),gt=e(4656),vt=e(2493),yt=e(942),bt=e(7298),It=e(5027),Pt=e(1280),wt=e(7945),St=e(307),At=e(2450),xt=e(9741),_t=e(6153),Tt=e(5650),Ct=e(9791),kt=e(6578),Et=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class Mt{constructor(t,i,e,s,n,r,o,a,h){this.ep=t,this.sp=i,this.Sl=e,this.cl=s,this.np=n,this.rp=r,this.ui=o,this.op=a,this.ap=h,this.dp=new Map,this.lp=new Map,this.up=!1,this.pp=!1,this.Ao=d.h.getSessionChildContainer(this.Sl.config.sessionId).resolve(Pt.G),this.up=this.Ao.isOmsdkFullSupport}request(t){return Et(this,void 0,void 0,(function*(){const{width:i,height:e}=t.callingState,s=this.fp(i,e),n=this.vp(t);return!s||Object.keys(n.lineItems).length<=0?{bids:[],noBids:[]}:(n.callAssertiveYield&&(0,Ct.Vm)([90,10])&&(0,Y.nF)({message:"RtbCallAggregator_request_callAssertiveYield",exception:this.cl.region,level:Y.D_.INFO},{pacing:1}),this.mp(n).then((i=>((0,K.$K)(n.liveRampAtsEnvelope)&&At.$.setEnvelopeStatus(i.liveRampEnvelopeStatus),this.gp(i,t)))).catch((t=>((0,Y.nF)({message:"RtbCallAggregator",exception:t.message,level:Y.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{pacing:1}),{bids:[],noBids:[]}))))}))}gp(t,i){const e={bids:[],noBids:[]};return i.lineItemRequestDataList.forEach((e=>{var s;(null===(s=t.lineItemResponses)||void 0===s?void 0:s.find((t=>t.id===e.adManagerLineItem.protoLineItem.advertiserLineItemId)))||this.op.registerUnfulfilledRequest(e.adManagerLineItem,i.callingState.adOpportunity.id)})),t.lineItemResponses.forEach((t=>{var s;const n=(0,gt.ZN)(i.lineItemRequestDataList,t.id),r=(0,Tt.BZ)(t.bids)||(0,K.r)(t.noBidsCount);if(this.yp(t),(0,K.$K)(t.cachedFloorPrice)&&!this.dp.has(t.id)&&this.lp.set(t.id,t.cachedFloorPrice),r||this.op.registerUnfulfilledRequest(n,i.callingState.adOpportunity.id),n.protoLineItem.shouldThrottlePacing&&r)try{this.ui.updateLineItemResponse(n.protoLineItem,(null===(s=t.bids)||void 0===s?void 0:s.length)||0)}catch(t){(0,Y.nF)({level:Y.D_.WARN,message:"RtbCallAggregator_updateLineItemResponse",exception:`lineItemId:${n.protoLineItem.advertiserLineItemId}`},{throttle:1})}t.bids.forEach((t=>{const s=n.protoLineItem;if(t=Object.assign(Object.assign({},t),this.bp(s)),this.Pp(s,t))return(0,Y.nF)({level:Y.D_.WARN,message:"RtbCallAggregator_nonLinear_banner_0_dimensions",exception:`lineItemId:${n.protoLineItem.advertiserLineItemId}`,sessionId:this.Sl.config.sessionId},{throttle:5}),void e.noBids.push(this.wp(n));const r=pt.parseAggregatorBidResponse(t,n,i.callingState);e.bids.push(r)}));const o=t.noBidsCount;for(let t=0;t<o;t++)e.noBids.push(this.wp(n))})),(0,K.$K)(t.assertiveYieldPayload)&&!(0,K.Ft)(t.assertiveYieldPayload)&&this.ap.saveAuctionPayload(t.assertiveYieldPayload,e),e}yp(t){var i;const e=this.dp.get(t.id);if(!(0,Tt.BZ)(e))return;const s=null===(i=t.cachedFloorPrice)||void 0===i?void 0:i.floorPrices[0],n=null==e?void 0:e.filter((t=>t.price===s)),r=t.bids.length>0;null==n||n.forEach((t=>{t.priceOutcome=r?mt.f.Success:mt.f.Fail}))}bp(t){return{}}Pp(t,i){var e;return(0,gt.lZ)(t.adType,null===(e=t.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearRequestType)&&(!i.height||!i.width)}wp(t){return{lineItem:t,requestMetadata:new at.oO({requestNumber:t.historicalMetrics.requestNumber,partnerReason:n.PartnerNoBidReasonEnum.Unknown,requestTrackingHandledByServer:!0}),reason:n.ConnatixNoBidReasonEnum.NoBid}}Ap(t,i){if(t.protoLineItem.adType!==n.ProtoAdType.Overlay)return null;const e=i.adContainerState.get(n.ProtoAdType.Video),s=i.adContainerState.get(n.ProtoAdType.Overlay);return e.height!==s.height||e.width!==s.width?{width:s.width,height:s.height}:void 0}Sp(t,i){const e={};return t.filter((t=>this._p(t))).forEach((t=>{const s=t.adManagerLineItem,n=this.Ap(s,i),r=this.xp(s);let o=null;try{o=this.kp(s)}catch(t){throw(0,Y.nF)({message:"RtbCallAggregator_getFloorPrice_error",level:Y.D_.CRITICAL,exception:(0,Ct.W$)(t).message},{pacing:5,throttle:1}),(0,Ct.W$)(t)}e[s.protoLineItem.advertiserLineItemId]=Object.assign({availableRequests:t.maxAvailableRequests,gdprConsent:this.Sl.services.UserManagerService.isConsent(s.protoLineItem.vendorId),cachedFloorPrice:o,publisherLineItemId:s.protoLineItem.publisherLineItemId,slotHeight:null==n?void 0:n.height,slotWidth:null==n?void 0:n.width,requestNumber:s.historicalMetrics.requestNumber},r)})),e}kp(t){if(t.protoLineItem.floorPricesNew&&(0,Tt.BZ)(t.protoLineItem.floorPricesNew.floorPrices)){if(!this.pp)return{floorPrices:[t.protoLineItem.floorPricesNew.floorPrices[0].price],recommended:1};let i=[];this.dp.has(t.protoLineItem.advertiserLineItemId)?i=this.dp.get(t.protoLineItem.advertiserLineItemId)||[]:(i=t.protoLineItem.floorPricesNew.floorPrices.slice(0,4).sort(((t,i)=>i.price-t.price)).map((t=>({price:(0,Ct.ox)(t.price),priceOutcome:mt.f.Unused,floorPriceBypassReason:t.floorPriceBypassReason}))),this.dp.set(t.protoLineItem.advertiserLineItemId,i));const e=(0,ft.n_)(i);return(0,K.Ft)(e)?((0,Y.nF)({message:"RtbCallAggregator_getFloorPrice_nextBestFloorPrice_is_null",level:Y.D_.CRITICAL},{pacing:5,throttle:1}),null):{floorPrices:[e.price],recommended:1}}return this.lp.get(t.protoLineItem.advertiserLineItemId)||null}xp(t){const i=(0,gt.AA)({playerSkippability:this.sp.skippability,playerSkipMin:this.sp.skipMin,playerSkipAfter:this.sp.skipAdAfter,lineItemSkippability:t.protoLineItem.skippability,lineItemSkipMin:t.protoLineItem.skipMin}),e=i.skippable?n.ProtoSkipEnabledEnum.Yes:n.ProtoSkipEnabledEnum.No;return Object.assign(Object.assign({},i),{skip:e})}_p(t){if(t.adManagerLineItem.protoLineItem.forceCallingInEveryAO)return!0;const{adType:i,demandPartnerId:e,nonlinearLineItemSettings:s}=t.adManagerLineItem.protoLineItem,{width:n,height:r}=this.cl.playerDimensions;return this.Cp(i,n,r,e,null==s?void 0:s.nonLinearRequestType)?this.np.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId):((0,Y.nF)({message:"RtbCallAggregator_not_supported_banner_sizes",level:Y.D_.INFO},{pacing:1,throttle:100}),!1)}Ep(t){if(t===n.ProtoAdBreakTypeEnum.None||this.ep)return n.ProtoAdRollTypeEnum.Outstream;const i=n.ProtoAdBreakTypeEnum[t];return n.ProtoAdRollTypeEnum[i]}vp(t){var i,e,s,r,o;const{width:a,height:h,viewability:c}=t.callingState,{width:l,height:u}=this.cl.playerDimensions,p=d.h.getGlobalContainer().resolve(vt.l),f=d.h.getGlobalContainer().resolve(yt.L),m={id:null===(i=this.Sl.services.UserManagerService)||void 0===i?void 0:i.syncedPanoIndivId,type:n.ProtoPanoramaIdTypeEnum.PanoIndiv},g=p.getProtoData();let v=null===(e=this.Sl.services.UID2Service)||void 0===e?void 0:e.uid2Token;return(0,K.QM)(v)||(null===(s=g.identityProviderEidsList)||void 0===s?void 0:s.some((t=>"uid2"===t.source)))||(v=d.h.getGlobalContainer().resolve(bt.n).getItem("uid2"),(0,K.QM)(v)&&(0,Y.nF)({level:Y.D_.INFO,message:"RtbCallAggregator_UID2_found",callStack:this.Sl.config.pageDomain},{throttle:1})),{metadata:this.cl.trackingRequestMeta,gdprCompliant:this.Sl.services.UserManagerService.isGDPR(),gdprConsentData:this.Sl.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:h,videoWidth:a,testMode:"true"===(0,J.Ph)("cnxRtbTest",this.Sl.config.pageUrl),explorationMode:this.Sl.config.explorationMode,viewability:c,outstream:this.ep,domainURL:this.Sl.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.Sl.config.appVersion,deviceID:this.Sl.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.Sl.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.Sl.services.UserManagerService.getUsPrivacyString(),gdprConsentMode:this.Sl.services.UserManagerService.gdprConsentMode,customMacros:this.Sl.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.Sp(t.lineItemRequestDataList,t.callingState),maxBidPrice:t.maxBidPrice,playerWidth:l,playerHeight:u,useNewSkippability:!0,liveRampAtsEnvelope:this.Sl.services.UserManagerService.identityEnvelope,lineItemAbTestInformation:this.rp,connectionType:It.n.getConnectionType(this.Sl.config.deviceType),OMSDKSupport:this.up,OMSDKVersion:this.Ao.omsdkVersion,identityProviderData:g,lexiconUids:f.getUids(),userIdentificationPending:null===(r=this.Sl.services.UserManagerService)||void 0===r?void 0:r.userIdentificationPending,rollType:this.Ep(t.callingState.adBreakState.adBreakType),coreSyncTimestamp:null===(o=this.Sl.services.UserManagerService)||void 0===o?void 0:o.coreSyncTimestamp,callAssertiveYield:"us-east-2"===this.cl.region,panorama:m,uid2Token:v}}mp(t){return kt.n.sendProtoRequest({endpoint:_t.n.endPoints.api.rtb,protoRequest:n.ProtoRtbRequest,protoResponse:n.ProtoRtbResponse,requestData:t,queryParams:{[St.Fk]:wt.g.version,[St.cc]:_t.n.tier},shouldLogErrors:!1,shouldSetClientHintsHeaders:!0})}fp(t,i){return 0!==t&&0!==i||((0,Y.nF)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${i}_destroyed:${xt.S.playerDestroyed}`,level:Y.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{throttle:5}),!1)}Cp(t,i,e,s,r){let o=lt.GLOBAL_DISPLAY_SIZES;return s===ot.Index&&(o=lt.CUSTOM_DISPLAY_FORMATS[ot.Index]),t===n.ProtoAdType.Overlay?o.some((t=>i>=t.w&&e>=t.h)):!(0,gt.lZ)(t,r)||(o=[...o,...lt.NONLINEAR_DISPLAY_SIZES],o.some((t=>i>=t.w&&t.h<=lt.NONLINEAR_AD_HEIGHT)))}}var Lt,Rt,Bt,Ot,Dt,Nt,Ft,$t,Vt,jt,Ut;!function(t){t.AppNexus="appnexus",t.IndexExchange="ix",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.SynacorMedia="synacormedia",t.Undertone="undertone",t.AmxRTB="amx",t.Smaato="smaato",t.SmartAdServer="smartadserver",t.TheMediaGrid="grid",t.Rise="rise",t.YahooAds="yahooAds",t.Unruly="unruly",t.Kargo="kargo",t.SmileWanted="smilewanted",t.TrustX="trustx",t.CadentApertureMx="cadent_aperture_mx",t.KrushMedia="krushmedia",t.Conversant="conversant",t.Criteo="criteo",t.TripleLift="triplelift",t.PulsePoint="pulsepoint",t.Adtelligent="adtelligent",t.Yieldmo="yieldmo",t.PgamMedia="pgammedia",t.NextMillennium="nextMillennium",t.AdYouLike="adyoulike",t.FreeWheelSSP="freewheel-ssp",t.ColossusSSP="colossusssp",t.ResetDigital="resetdigital",t.MediaFuse="mediafuse",t.Sharethrough="sharethrough",t.Insticator="insticator",t.Sonobi="sonobi",t.Ozone="ozone",t.ShowHeroes="showheroes-bs",t.SeedTag="seedtag",t.MinuteMedia="minutemedia"}(Lt||(Lt={}));class qt{static logMissingRequireParam(t,i,e){(0,Y.nF)({level:Y.D_.CRITICAL,message:`PrebidJS_${t}_adapter_missing_${i}_li_${e}`})}static logMissingRequireIntegrationsParams(t,i,e){const s=i.map((t=>t.join("_and_"))).join("_or_");(0,Y.nF)({level:Y.D_.CRITICAL,message:`PrebidJS_${t}_adapter_needs_${s}_li_${e}`})}get config(){return this.Mp}}!function(t){t[t.Unknown=0]="Unknown",t[t.AboveTheFold=1]="AboveTheFold",t[t.Deprecated=2]="Deprecated",t[t.BelowTheFold=3]="BelowTheFold",t[t.Header=4]="Header",t[t.Footer=5]="Footer",t[t.Sidebar=6]="Sidebar",t[t.Fullscreen=7]="Fullscreen"}(Rt||(Rt={})),function(t){t.Gross="gross",t.Net="net"}(Bt||(Bt={})),function(t){t.Instream="instream",t.Outstream="outstream"}(Ot||(Ot={})),function(t){t.InApp="mobile_app",t.MobileWeb="mobile_web",t.Web="web"}(Dt||(Dt={})),function(t){t.NATIVE="native",t.VIDEO="video",t.BANNER="banner"}(Nt||(Nt={})),function(t){t.Outstream="outstream",t.PreRoll="pre_roll",t.MidRoll="mid_roll",t.PostRoll="post_roll"}(Ft||(Ft={})),function(t){t[t.Instream=1]="Instream",t[t.InBanner=2]="InBanner",t[t.Outstream=3]="Outstream",t[t.InFeed=4]="InFeed",t[t.Floating=5]="Floating"}($t||($t={})),function(t){t[t.AutoplaySoundOn=1]="AutoplaySoundOn",t[t.AutoPlaySoundOff=2]="AutoPlaySoundOff",t[t.ClickToPlay=3]="ClickToPlay",t[t.MouseOver=4]="MouseOver",t[t.ScrollToPlaySoundOn=5]="ScrollToPlaySoundOn",t[t.ScrollToPlaySoundOff=6]="ScrollToPlaySoundOff"}(Vt||(Vt={})),function(t){t.AutoPlaySoundOn="auto_play_sound_on",t.AutoPlaySoundOff="auto_play_sound_off",t.AutoPlaySoundUnknown="auto_play_sound_unknown",t.ClickToPlay="click_to_play",t.MouseOver="mouse_over"}(jt||(jt={})),function(t){t[t.Instream=201]="Instream",t[t.Outstream=203]="Outstream"}(Ut||(Ut={}));var Ht,zt=e(8211);!function(t){t[t.Nonsecure=0]="Nonsecure",t[t.Secure=1]="Secure"}(Ht||(Ht={}));var Wt=e(7531);const Gt={[Lt.AppNexus]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:32,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.hj)(e.placementId))return void qt.logMissingRequireParam("appnexus","placementId",i.lineItemId);const{floorPrice:s}=i;(0,K.r)(s)&&(e.reserve=s);const{deviceId:n,os:r}=i;if((0,K.QM)(n))switch(e.app=Object.assign({},e.app),r){case zt.M.Android:e.app.device_id={aaid:n};break;case zt.M.Ios:e.app.device_id={idfa:n}}return e.video=Object.assign(Object.assign({},e.video),{skippable:!!i.skippabilitySettings.skip,skipoffset:i.skippabilitySettings.skipafter}),e}},[Lt.IndexExchange]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:10,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.siteId))return void qt.logMissingRequireParam("ix","siteId",i.lineItemId);const{floorPrice:s,isOutstream:n}=i;if((0,K.r)(s)&&(e.bidFloor=s,e.bidFloorCur="USD"),n){const{inFloating:t,hasFloatingCapability:s,playerWidth:n,playerHeight:r}=i;e.video.playerConfig={floatOnScroll:s,floatSize:t?[n,r]:void 0}}return e}},[Lt.OpenX]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:69,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,K.QM)(e.unit))return void qt.logMissingRequireParam("openx","unit",s);if(!(0,K.QM)(e.delDomain))return void qt.logMissingRequireParam("openx","delDomain",s);const{floorPrice:n}=i;return(0,K.r)(n)&&(e.customFloor=n),e}},[Lt.Pubmatic]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:76,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.publisherId))return void qt.logMissingRequireParam("pubmatic","publisherId",i.lineItemId);const s=i.floorPrice;return(0,K.r)(s)&&(e.kadfloor=String(s)),i.isOutstream&&(e.outstreamAU=i.adUnitCode),e.kadpageurl=i.pageUrl,e}},[Lt.RhythmOne]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:36,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){if((0,K.QM)(t.placementId))return t;qt.logMissingRequireParam("rhythmone","placementId",i.lineItemId)}},[Lt.Rubicon]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:52,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,K.hj)(e.accountId))return void qt.logMissingRequireParam("rubicon","accountId",s);if(!(0,K.hj)(e.siteId))return void qt.logMissingRequireParam("rubicon","siteId",s);if(!(0,K.hj)(e.zoneId))return void qt.logMissingRequireParam("rubicon","zoneId",s);const n=i.floorPrice;return(0,K.r)(n)&&(e.floor=n),e}},[Lt.SpotX]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:165,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.channel_id))return void qt.logMissingRequireParam("spotx","channel_id",i.lineItemId);(0,K.QM)(e.ad_unit)||(e.ad_unit=i.isOutstream?Ot.Outstream:Ot.Instream);const{floorPrice:s,isOutstream:n,bidSlotId:r}=i;return(0,K.r)(s)&&(e.price_floor=s),n&&(e.outstream_options={slot:r}),e.page=i.pageUrl,e}},[Lt.Telaria]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:52,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s,pageUrl:n}=i;if((0,K.QM)(t.adCode)){if((0,K.QM)(t.supplyCode))return e.srcPageUrl=n,t;qt.logMissingRequireParam("telaria","supplyCode",s)}else qt.logMissingRequireParam("telaria","adCode",s)}},[Lt.MediaNet]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:142,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,K.QM)(e.cid))return void qt.logMissingRequireParam("medianet","cid",s);if(!(0,K.QM)(e.crid))return void qt.logMissingRequireParam("medianet","crid",s);const{floorPrice:n}=i;return(0,K.r)(n)&&(e.bidFloor=n),e.site=Object.assign(Object.assign({},e.site||{}),{page:i.pageUrl}),e}},[Lt.Adman]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:149,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.placementId))return void qt.logMissingRequireParam("adman","placementId",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidfloor=s),e.traffic=Nt.VIDEO,e}},[Lt.SynacorMedia]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:void 0,gdprSupport:!1,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,K.QM)(e.seatId))return void qt.logMissingRequireParam("synacormedia","seatId",s);if(!(0,K.QM)(e.tagId))return void qt.logMissingRequireParam("synacormedia","tagId",s);const{floorPrice:n}=i;return(0,K.r)(n)&&(e.bidfloor=n),e}},[Lt.Undertone]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:677,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if((0,K.hj)(e.publisherId)){if((0,K.QM)(e.placementId))return e.video=Object.assign(Object.assign({},e.video||{}),{skippable:!!i.skippabilitySettings.skip}),e;qt.logMissingRequireParam("undertone","placementId",s)}else qt.logMissingRequireParam("undertone","publisherId",s)}},[Lt.AmxRTB]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:737,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.tagId))return void qt.logMissingRequireParam("amx","tagId",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.floor=s),e}},[Lt.Smaato]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:82,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const{lineItemId:e}=i;if((0,K.QM)(t.publisherId)){if((0,K.QM)(t.adspaceId))return t;qt.logMissingRequireParam("smaato","adspaceId",e)}else qt.logMissingRequireParam("smaato","publisherId",e)}},[Lt.SmartAdServer]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:18,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,K.hj)(e.siteId))return void qt.logMissingRequireParam("smartadserver","siteId",s);if(!(0,K.hj)(e.pageId))return void qt.logMissingRequireParam("smartadserver","pageId",s);if(!(0,K.hj)(e.formatId))return void qt.logMissingRequireParam("smartadserver","formatId",s);const{floorPrice:n}=i;return(0,K.r)(n)&&(e.bidfloor=n),e}},[Lt.TheMediaGrid]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:686,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.r)(e.uid))return void qt.logMissingRequireParam("grid","uid",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidFloor=s),e}},[Lt.Rise]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:1043,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.org))return void qt.logMissingRequireParam("rise","org",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.floorPrice=s),e}},[Lt.YahooAds]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:25,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=(0,K.QM)(e.pos)&&(0,K.QM)(e.dcn),n=(0,K.QM)(e.pubId);if(!s&&!n)return void qt.logMissingRequireParam("yahooAds","required",i.lineItemId);const{floorPrice:r}=i;return(0,K.r)(r)&&(e.bidOverride={imp:{bidfloor:r}}),e}},[Lt.Unruly]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:36,gdprSupport:!1,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.hj)(e.siteId))return i.isOutstream&&(e.featureOverrides={canRunUnmissable:!0}),(0,K.r)(i.floorPrice)&&(e.floor=i.floorPrice),e;qt.logMissingRequireParam("unruly","siteId",i.lineItemId)}},[Lt.Kargo]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:972,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){if((0,K.QM)(t.placementId))return t;qt.logMissingRequireParam("kargo","placementId",i.lineItemId)}},[Lt.SmileWanted]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:639,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.zoneId))return void qt.logMissingRequireParam("smilewanted","zoneId",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidfloor=s),e}},[Lt.TrustX]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.hj)(e.uid))return void qt.logMissingRequireParam("trustx","uid",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidFloor=s),e}},[Lt.CadentApertureMx]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:183,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.tagid))return void qt.logMissingRequireParam("cadent_aperture_mx","tagid",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidfloor=s.toString()),e}},[Lt.KrushMedia]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.key))return void qt.logMissingRequireParam("krushmedia","key",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidfloor=s),e.traffic=Nt.VIDEO,e}},[Lt.Conversant]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:24,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.site_id))return void qt.logMissingRequireParam("conversant","site_id",i.lineItemId);e.secure=Ht.Secure;const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidfloor=s),e}},[Lt.Criteo]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:91,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.hj)(e.networkId))return e;qt.logMissingRequireParam("criteo","networkId",i.lineItemId)}},[Lt.TripleLift]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:28,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.inventoryCode))return void qt.logMissingRequireParam("triplelift","inventoryCode",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.floor=s),e}},[Lt.PulsePoint]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:81,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.hj)(e.cp))return void qt.logMissingRequireParam("pulsepoint","cp",i.lineItemId);if(!(0,K.hj)(e.ct))return void qt.logMissingRequireParam("pulsepoint","ct",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidfloor=s),e}},[Lt.Adtelligent]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:410,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.hj)(e.aid))return e;qt.logMissingRequireParam("adtelligent","aid",i.lineItemId)}},[Lt.Yieldmo]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:173,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.placementId))return void qt.logMissingRequireParam("yieldmo","placementId",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.bidFloor=s),e}},[Lt.PgamMedia]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.QM)(e.AV_PUBLISHERID)){if((0,K.QM)(e.AV_CHANNELID))return e;qt.logMissingRequireParam("pgammedia","AV_CHANNELID",i.lineItemId)}else qt.logMissingRequireParam("pgammedia","AV_PUBLISHERID",i.lineItemId)}},[Lt.NextMillennium]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:1060,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.QM)(e.placement_id)||(0,K.QM)(e.group_id))return e;qt.logMissingRequireIntegrationsParams("nextMillennium",[["placement_id"],["group_id"]],i.lineItemId)}},[Lt.AdYouLike]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:259,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.QM)(e.placement))return e;qt.logMissingRequireParam("adyoulike","placement",i.lineItemId)}},[Lt.FreeWheelSSP]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:285,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.QM)(t.zoneId))return e;qt.logMissingRequireParam("freewheel-ssp","zoneId",i.lineItemId)}},[Lt.ColossusSSP]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=(0,K.hj)(e.placement_id),n=(0,K.hj)(e.group_id);if(s||n)return e;qt.logMissingRequireIntegrationsParams("colossusssp",[["placement_id"],["group_id"]],i.lineItemId)}},[Lt.ResetDigital]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:void 0,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t),s=(0,K.QM)(e.pubId),n=(0,K.QM)(e.zoneId);if(s||n)return e;qt.logMissingRequireIntegrationsParams("resetdigital",[["pubId"],["zoneId"]],i.lineItemId)}},[Lt.MediaFuse]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{placementId:s}=e;if(!(0,K.hj)(s))return void qt.logMissingRequireParam("mediafuse","placementId",i.lineItemId);const{floorPrice:n}=i;(0,K.r)(n)&&(e.reserve=n);const{deviceId:r,os:o}=i;if((0,K.QM)(r))switch(e.app=Object.assign({},e.app),o){case zt.M.Android:e.app.device_id={aaid:r};break;case zt.M.Ios:e.app.device_id={idfa:r}}return e.video=Object.assign(Object.assign({},e.video),{skippable:!!i.skippabilitySettings.skip,skipoffset:i.skippabilitySettings.skipafter}),e}},[Lt.Sharethrough]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:80,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.pkey))return void qt.logMissingRequireParam("sharethrough","pkey",i.lineItemId);const{floorPrice:s}=i;return(0,K.r)(s)&&(e.floor=s),e}},[Lt.Insticator]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:910,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);if((0,K.QM)(e.adUnitId))return e;qt.logMissingRequireParam("insticator","adUnitId",i.lineItemId)}},[Lt.Sonobi]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:104,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,K.QM)(e.placement_id)&&!(0,K.QM)(e.ad_unit))return void qt.logMissingRequireIntegrationsParams("sonobi",[["placement_id"],["ad_unit"]],i.lineItemId);const s=i.floorPrice;return(0,K.r)(s)&&(e.floor=s),e}},[Lt.Ozone]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:524,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{siteId:s,placementId:n,publisherId:r}=e;if((0,K.QM)(s))if((0,K.QM)(n)){if((0,K.QM)(r))return e;qt.logMissingRequireParam("ozone",(0,Wt.$0)({publisherId:r}),i.lineItemId)}else qt.logMissingRequireParam("ozone",(0,Wt.$0)({placementId:n}),i.lineItemId);else qt.logMissingRequireParam("ozone",(0,Wt.$0)({siteId:s}),i.lineItemId)}},[Lt.ShowHeroes]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:111,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{unitId:s}=e;if((0,K.QM)(s))return e;qt.logMissingRequireParam("showHeroes",(0,Wt.$0)({unitId:s}),i.lineItemId)}},[Lt.SeedTag]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:157,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{adUnitId:s,publisherId:n}=e;if(!(0,K.QM)(s))return void qt.logMissingRequireParam("seedtag",(0,Wt.$0)({adUnitId:s}),i.lineItemId);if(!(0,K.QM)(n))return void qt.logMissingRequireParam("seedtag",(0,Wt.$0)({publisherId:n}),i.lineItemId);return e.placement="inStream",e}},[Lt.MinuteMedia]:new class extends qt{constructor(){super(...arguments),this.Mp={vendorId:918,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{org:s}=e;if(!(0,K.QM)(s))return void qt.logMissingRequireParam("minutemedia",(0,Wt.$0)({org:s}),i.lineItemId);const{floorPrice:n}=i;return(0,K.r)(n)&&(e.floorPrice=n),e}}},Xt=t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}),Qt=(t,i)=>({[n.ProtoPlayerPlaybackModeEnum.Autoplay]:i!==n.ProtoPlayerSoundMode.Mute?Vt.AutoplaySoundOn:Vt.AutoPlaySoundOff,[n.ProtoPlayerPlaybackModeEnum.ClickToPlay]:Vt.ClickToPlay,[n.ProtoPlayerPlaybackModeEnum.ScrollToPlay]:i!==n.ProtoPlayerSoundMode.Mute?Vt.ScrollToPlaySoundOn:Vt.ScrollToPlaySoundOff}[t]),Jt=t=>t===n.ProtoVideoPlacementEnum.InStream?$t.Instream:$t.Outstream,Yt=t=>({id:t.appId,name:t.appName,bundle:t.bundleID,domain:t.domainURL,storeurl:t.storeURL,cat:t.appCategories,ver:t.appVersion,privacypolicy:t.appPrivacyPolicy,paid:t.appIsPaid}),Kt="https://prebid.adnxs.com/pbc/v1/cache",Zt=()=>({url:Kt}),ti=(t,i)=>t?{gdpr:ii()}:i?{usp:ei()}:{},ii=()=>({cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["permutive"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}),ei=()=>({cmpApi:"iab",timeout:2e3}),si=()=>({ix:{timeout:900}}),ni=t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:(0,K.QM)(t.supplyChainId)?t.supplyChainId:null}]}}),ri=t=>{if(!(0,K.as)(t))return null;return`1.0,1!${(0,K.QM)(t.businessDomain)?encodeURI(t.businessDomain):""},${(0,K.QM)(t.supplyChainId)?encodeURI(t.supplyChainId):""},1`};var oi;!function(t){t.CACHE_ID="CACHE_ID"}(oi||(oi={}));const ai=()=>({targetingControls:{addTargetingKeys:[oi.CACHE_ID]}}),hi=(t,i)=>{const e={userSync:{syncEnabled:!0,iframeEnabled:!0,pixelEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}},syncsPerBidder:0,syncDelay:3e3,auctionDelay:0,aliasSyncEnabled:!0,userIds:[{name:"criteo"}]}};return(0,K.QM)(t)&&e.userSync.userIds.push(ci(t)),(0,K.QM)(i)&&e.userSync.userIds.push(di(i)),e},ci=t=>({name:"identityLink",params:{pid:t,notUse3P:!1},storage:{name:"idl_env",type:"html5",expires:15,refreshInSeconds:1800}}),di=t=>({name:"uid2",value:{uid2:{id:t}}}),li=t=>({realTimeData:{dataProviders:[{name:"permutive",params:(0,K.as)(t)?t:{}}]}});var ui;!function(t){t.Banner="banner",t.Video="video",t.All="all"}(ui||(ui={}));const pi=()=>({yahooAds:{mode:ui.Video}}),fi=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],mi=[2,3,5,6],gi={VPAID_1:1,VPAID_2:2},vi=[gi.VPAID_1,gi.VPAID_2],yi=[gi.VPAID_1,gi.VPAID_2],bi=(t,i)=>{const{skip:e,skippable:s,skipmin:n,skipafter:r}=i,{width:o,height:a,isOutstreamContext:h,maxAdDuration:c,initialSoundMode:d,playbackMode:l,plcmt:u}=t,p=Jt(u),f=h?{}:void 0;return{video:Object.assign({w:Math.floor(o),h:Math.floor(a),playerSize:[Math.floor(o),Math.floor(a)],context:h?"outstream":"instream",mimes:fi,protocols:mi,linearity:1,api:vi,frameworks:yi,maxduration:c,minduration:0,skip:e,skippable:s,skipmin:n,skipafter:r,placement:p,renderer:f,playbackmethod:[Qt(l,d)],pos:Rt.Unknown},u?{plcmt:u}:null)}};class Ii{constructor(t){this.Lp=t,this.Ui=[]}init(t){this.Op(t)}destroy(){(0,l.i)(this.Ui)}Op(t){this.Ui.push(this.Lp.onUserIdReceived.subscribe((i=>{this.Dp(t,i)})))}Dp(t,i){const e=di(i);this.Np(t,e)}Np(t,i){const e={userSync:{userIds:[i]}};t.mergeConfig(e),t.refreshUserIds({submoduleNames:[i.name]})}}var Pi=e(1828);const wi="pbjs";class Si{constructor(t,i,e){this.ls=t,this.Lp=i,this.us=e,this.Vp=!0,this.io=new Pi.o(this.ls,this.us),this.Fp=new Ii(this.Lp)}loadPrebidJs(t){return new Promise(((i,e)=>{if(this.jp)return i(this.jp);this.insertPrebidJs().then((e=>{this.jp=e,this.jp.setConfig(t),this.jp.setBidderConfig({bidders:[Lt.TrustX,Lt.TripleLift,Lt.Conversant,Lt.Criteo,Lt.Kargo],config:{localStorageWriteAllowed:!0}},this.Vp),this.Fp.init(e),i(e)})).catch((t=>e(t)))}))}insertPrebidJs(){return new Promise(((t,i)=>{this.io.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-prebid-loader' type='text/javascript' src='${_t.n.endPoints.assets.plugins.prebidScript}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-prebid-loader"}],container:this.ls.querySelector("head"),visible:!1}).then((e=>{if(e.iframe.contentWindow[wi])return this.$p(e.iframe),t(e.iframe.contentWindow[wi]);i(new Error("pbjs could not be found on the iframe window"))})).catch((t=>{i(t)}))}))}destroy(){this.Fp.destroy()}$p(t){const i=this.ls.global.permutive;(0,K.$K)(i)&&(t.contentWindow.permutive=i)}}var Ai=e(2918);class xi{constructor(t){this.Yd=t}isAdapterCallable(t){const i=(t=>{const i=Object.keys(Lt).find((i=>Lt[i]===t));if(i)return Lt[i]})(t);return!!i&&(this.Yd.isGDPR()?this.qp(i):!this.Yd.isCcpaApplicable()||this.zp(i))}Gp(t){return Gt[t].config.gdprSupport}qp(t){if(this.Gp(t))return!0;const i=Gt[t].config.vendorId,e=(0,K.hj)(i)?`${i}`:"";return this.Yd.isConsent(e,Ai.Z)}zp(t){return!!Gt[t].config.ccpaSupport||!!this.Yd.isSellUserAllowed()}}var _i,Ti=e(3003);class Ci{constructor(t,i={}){this.Wp=t,this.Xp=i,this.Qp="{{",this.Jp="}}",this.Yp=new RegExp(`${this.Qp}(.*?)${this.Jp}`,"g")}replaceMacros(t,i){const e=(0,Ti.Ed)(t,this.Yp);if(!(0,Tt.BZ)(e))return t;const s=this.Zp(t,e,i);return this.replaceMacros(s,i)}setMacros(t){this.Xp=Object.assign(Object.assign({},this.Xp),t)}Zp(t,i,e){const s=t;return i.reduce(((t,i)=>this.tf(t,i,e)),s)}tf(t,i,e){const s=this.if(i);if(!this.ef(s,e))return t.replace(i,null);let n=null,r=!1;this.sf(s,e)?n=this.Wp.getMacroValue(s,e):this.nf(s)&&(n=this.Xp[s],(0,K.HD)(n)||(r=!0));const o=this.rf(n);if(r){return t.replace(`"${i}"`,o).replace(i,o)}return t.replace(i,o)}ef(t,i){return this.sf(t,i)||this.nf(t)}sf(t,i){return this.Wp.hasMacroValue(t,i)}nf(t){return(0,K.$K)(this.Xp[t])}if(t){return t.replace(this.Qp,"").replace(this.Jp,"")}rf(t){return[null,void 0,NaN].includes(t)?null:Array.isArray(t)||(0,K.as)(t)?JSON.stringify(t):t.toString()}}!function(t){t.CnxSupplyType="CNX_SUPPLY_TYPE",t.CnxAdUnit="CNX_AD_UNIT",t.CnxVideoMimes="CNX_VIDEO_MIMES",t.CnxVideoApi="CNX_VIDEO_API",t.CnxVideoId="CNX_VIDEO_ID",t.CnxAtsEnvelope="CNX_ATS_ENVELOPE",t.CnxSupplyChain="CNX_SUPPLY_CHAIN",t.CnxIntegrationMode="CNX_INTEGRATION_MODE",t.CnxVideoFrameworks="CNX_VIDEO_FRAMEWORKS",t.CnxVideoSkippable="CNX_VIDEO_SKIPPABLE",t.CnxVideoSkipOffset="CNX_VIDEO_SKIP_OFFSET",t.CnxVideoMaxDuration="CNX_VIDEO_MAX_DURATION",t.CnxVideoStartDelay="CNX_VIDEO_START_DELAY",t.CnxVideoPlaybackMethodInteger="CNX_VIDEO_PLAYBACK_METHOD_INTEGER",t.CnxVideoPlaybackMethodsString="CNX_VIDEO_PLAYBACK_METHOD_STRING",t.CnxVideoProtocols="CNX_VIDEO_PROTOCOLS",t.CnxVideoLinearity="CNX_VIDEO_LINEARITY",t.CnxVideoPlacement="CNX_VIDEO_PLACEMENT",t.CnxVideoContext="CNX_VIDEO_CONTEXT",t.CnxVideoSizeId="CNX_VIDEO_SIZE_ID",t.CnxVideoLanguage="CNX_VIDEO_LANGUAGE",t.CnxVideoVolume="CNX_VIDEO_VOLUME",t.UserLanguage="USER_LANGUAGE",t.AppDeviceId="APP_DEVICE_ID",t.Width="WIDTH",t.Height="HEIGHT",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.DoNotTrack="DNT",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.PageUrl="PAGE_URL"}(_i||(_i={}));class ki{constructor(t,i,e,s,n){this._appSettings=t,this.Kd=i,this.Yd=e,this.hf=s,this.af=n,this.cf={[_i.PageUrl]:()=>this.Kd.pageUrl,[_i.AppBundle]:()=>this._appSettings.bundleID,[_i.AppName]:()=>this._appSettings.appName,[_i.AppDeviceId]:t=>this.df(t),[_i.CnxAdUnit]:()=>this.lf(),[_i.CnxSupplyType]:()=>this.uf(),[_i.CnxVideoContext]:t=>this.pf(t),[_i.CnxIntegrationMode]:()=>this.Kd.isAmp?"AMP":void 0,[_i.Width]:t=>Math.floor(t.videoWidth),[_i.Height]:t=>Math.floor(t.videoHeight),[_i.CnxSupplyChain]:t=>t.supplyChain,[_i.CnxVideoApi]:()=>Object.values(gi),[_i.CnxVideoFrameworks]:()=>yi,[_i.CnxVideoMimes]:()=>fi,[_i.CnxVideoProtocols]:()=>mi,[_i.CnxVideoLinearity]:()=>1,[_i.CnxVideoMaxDuration]:t=>t.videoMaxAdDuration,[_i.CnxVideoLanguage]:()=>"en",[_i.CnxVideoId]:t=>t.mediaId,[_i.CnxAtsEnvelope]:t=>t.liveRampEnvelope,[_i.CnxVideoSkippable]:t=>t.skippabilitySettings.skippable,[_i.CnxVideoSkipOffset]:t=>t.skippabilitySettings.skipafter,[_i.CnxVideoPlaybackMethodInteger]:()=>this.ff(),[_i.CnxVideoPlaybackMethodsString]:()=>this.vf(),[_i.CnxVideoPlacement]:t=>Jt(t.plcmt),[_i.CnxVideoSizeId]:()=>this.gf(),[_i.CnxVideoStartDelay]:()=>this.af,[_i.CnxVideoVolume]:t=>t.videoVolume,[_i.DoNotTrack]:()=>{},[_i.UserLanguage]:()=>this.yf(),[_i.UserLat]:()=>this.Kd.geoLocation.lat,[_i.UserLong]:()=>this.Kd.geoLocation.lon}}getMacroValue(t,i){const e=this.cf[t];if(e)return e(i)}hasMacroValue(t,i){return(0,K.$K)(this.getMacroValue(t,i))}df(t){const i=this.Yd.isConsent(t.vendorId);return this.Yd.isConsentConnatix()&&i?this.Yd.getTrackableUser():void 0}lf(){return this.hf.isOutstream?Ot.Outstream:Ot.Instream}uf(){return this.Kd.isInApp?Dt.InApp:this.Kd.isMobile?Dt.MobileWeb:Dt.Web}pf(t){if(this.hf.isOutstream)return Ft.Outstream;return{[n.ProtoAdBreakTypeEnum.None]:Ft.PreRoll,[n.ProtoAdBreakTypeEnum.PreRoll]:Ft.PreRoll,[n.ProtoAdBreakTypeEnum.MidRoll]:Ft.MidRoll,[n.ProtoAdBreakTypeEnum.PostRoll]:Ft.PostRoll}[t.adBreakType]}ff(){return Qt(this.hf.playbackMode,this.hf.initialSoundMode)}vf(){const t=this.hf.playbackMode,i=this.hf.initialSoundMode;return t===n.ProtoPlayerPlaybackModeEnum.Autoplay?i===n.ProtoPlayerSoundMode.On?jt.AutoPlaySoundOn:i===n.ProtoPlayerSoundMode.Mute?jt.AutoPlaySoundOff:jt.AutoPlaySoundUnknown:t===n.ProtoPlayerPlaybackModeEnum.ClickToPlay?jt.ClickToPlay:void 0}gf(){return this.hf.isOutstream?Ut.Outstream:Ut.Instream}yf(){const t=navigator.language;if((0,K.QM)(t))return t.split("-")[0].toUpperCase()}}class Ei{constructor(t,i,e,s,n,r,o,a,h){this.bf=t,this.If=i,this.ls=e,this.Pf=s,this.Yd=n,this.Mp=r,this.Lp=o,this.wf=a,this.Af=h,this.Sf=this.Mp.pageUrl,this.us=this.Mp.sessionId,this._s=this.Mp.os.os,this._f=new Si(this.ls,this.Lp,this.us)}requestHeaderBidder(t,i){return new Promise(((e,s)=>{this.Tf().then((s=>{const n=t.map((t=>this.xf(s,t,i).then((t=>t))));Promise.all(n).then((t=>{e(t)}))})).catch((t=>{s(n.ConnatixNoBidReasonEnum.NoBid)}))}))}setMacros(t){this.bf.setMacros(t)}destroy(){this._f.destroy()}kf(t,i){const e={lineItemSkippability:t,lineItemSkipMin:i,playerSkippability:this.Pf.skippability,playerSkipMin:this.Pf.skipMin,playerSkipAfter:this.Pf.skipAdAfter},s=(0,gt.AA)(e),n=s.skippable?1:0;return Object.assign({skip:n},s)}xf(t,i,e){return new Promise((s=>{let r=[];if(i.availableRequests>0)if((0,K.$K)(i.lineItem.floorPricesNew)&&(0,Tt.BZ)(i.lineItem.floorPricesNew.floorPrices)){const s=i.lineItem.floorPricesNew.floorPrices.map((t=>t.price));r=this.Cf(i.lineItem.floorPricesNew,i.availableRequests,i.maxBidPrice).map((n=>this.Ef(t,i.lineItem,i.bidderName,i.bidderParams,s,n,e)))}else{const s={requestedFloorPrice:i.lineItem.floorPrice,floorPriceInformation:{floorPrices:[],floorPriceIndexUsed:-1,floorPriceFactorBypassReason:n.FloorPriceBypassReasonEnum.FixedCpm}},o=this.Ef(t,i.lineItem,i.bidderName,i.bidderParams,[],s,e);r.push(o)}Promise.all(r).then((t=>{const e=[],n=[],r=i.lineItem.advertiserLineItemId;t.forEach((t=>{t.reason?n.push(t):e.push(t)}));s({bids:e,noBids:n,lineItemId:r})}))}))}Ef(t,i,e,s,n,r,o){return new Promise((a=>{this.Mf(t,i,e,s,n,r,o).then((t=>{a(t)})).catch((t=>{a(t)}))}))}Tf(){const t=((t,i,e,s,n,r,o,a)=>{const h=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({usePrebidCache:!0,enableTIDs:!0},hi(s,n)),si()),ai()),pi()),li(a));return h.floors={},(0,K.QM)(o)&&(h.pageUrl=o),h.usePrebidCache&&(h.cache=Zt()),r&&(h.schain=ni(r)),(t||i)&&(h.consentManagement=ti(t,i)),e.isInApp&&(h.app=Yt(e),h.ortb2={app:Yt(e)}),h})(this.Yd.isGDPR(),this.Yd.isCcpaApplicable(),this.Mp,this.wf,this.Lp.uid2Token,this.If,this.Sf,this.Af);return new Promise(((i,e)=>{this._f.loadPrebidJs(t).then((t=>{i(t)})).catch((t=>{(0,Y.nF)({message:"AdManager_HeaderBidder_unable_to_load_prebidJs_script",exception:t.message,callStack:t.stack,level:Y.D_.CRITICAL,sessionId:this.us}),e(t)}))}))}Lf(t){const i=Object.keys(t),e=i.filter((i=>!(0,K.as)(t[i]))),s=i.filter((i=>(0,K.as)(t[i])));return e.forEach((i=>{null!==t[i]&&"null"!==t[i]||delete t[i]})),s.forEach((i=>{this.Lf(t[i])})),t}Mf(t,i,e,s,r,o,a){return new Promise(((h,c)=>{const d=this.kf(i.skippability,i.skipMin),l=((t,i,e,s)=>{const r=(0,Ct.qs)(),o={code:(0,Ct.qs)(),transactionId:r,mediaTypes:bi(t,e),ortb2Imp:{ext:{tid:r},source:{tid:r}},bids:[]};let a=0;if(!t.isOutstreamContext)switch(t.adBreakType){case n.ProtoAdBreakTypeEnum.PreRoll:a=0;break;case n.ProtoAdBreakTypeEnum.MidRoll:a=1;break;case n.ProtoAdBreakTypeEnum.PostRoll:a=-2;break;default:a=0}return o.mediaTypes.video.startdelay=a,(0,K.r)(i)&&(o.floors=Xt(i)),o})(a,o.requestedFloorPrice,d);try{const{width:t,height:e,maxAdDuration:n,videoVolume:r,inFloating:o,adBreakType:h,mediaLanguage:c,mediaId:u,liveRampEnvelope:p,plcmt:f}=a,m=this.bf.replaceMacros(s,{videoWidth:t,videoHeight:e,videoMaxAdDuration:n,vendorId:i.vendorId,skippabilitySettings:d,videoVolume:r,inFloating:o,adBreakType:h,mediaLanguage:c,mediaId:u,supplyChain:ri(this.If),liveRampEnvelope:p,plcmt:f}),g=JSON.parse(m),v=this.Lf(g);l.bids=[v]}catch(t){(0,Y.nF)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:Y.D_.WARN,sessionId:this.us});const i=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.NoBid},o);return void c(i)}const u=(0,gt.aW)();l.bids.forEach((t=>this.Bf(t,o.requestedFloorPrice,i.advertiserLineItemId,u,d,a,l.code,this.Yd.getDeviceId(),this._s))),t.que.push((()=>{t.addAdUnits(l);const s={timeout:i.headerBidderTimeout,adUnits:[l],bidsBackHandler:()=>{var s;try{const a=t.getHighestCpmBids(l.code)[0];if(!a){const t=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.CsEmptyResponse},o);return void c(t)}let d,p;if(this.Rf(a))d=(t=>`${Kt}?uuid=${t.adserverTargeting.hb_cache_id}`)(a);else if(d=a.vastUrl,p=a.vastXml||a.ad,!d&&!p){(0,Y.nF)({level:Y.D_.WARN,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(a),sessionId:this.us});const t=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.CsEmptyResponse},o);return void c(t)}const f=a.cpm||a.adResponse.ad.cpm,{advertiserLineItemId:m}=i,g=Object.assign(Object.assign({},o),{bidderName:e,adTagUrl:d,adTagXml:p,lineItemId:m,cpm:f,slotId:u,bidId:l.code});(0,K.r)(o.requestedFloorPrice)&&f<o.requestedFloorPrice&&(0,Y.nF)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:Y.D_.WARN,exception:`floorPrices_${r}_floorPrice_${o.requestedFloorPrice}_index_${null===(s=o.floorPriceInformation)||void 0===s?void 0:s.floorPriceIndexUsed}_cpm_${f}_li_${i.advertiserLineItemId}`,callStack:e,sessionId:this.us},{shouldSendMaxLog:!1,throttle:5}),h(g)}catch(t){(0,Y.nF)({level:Y.D_.WARN,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack,sessionId:this.us});const i=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.NoBid},o);c(i)}}};t.requestBids(s)}))}))}Bf(t,i,e,s,n,r,o,a,h){var c;const d=null===(c=Gt[t.bidder])||void 0===c?void 0:c.getBidParams;if(!d)return;const{width:l,height:u,isOutstreamContext:p,maxAdDuration:f,adBreakType:m,inFloating:g,hasFloatingCapability:v}=r;t.params=d(t.params,{playerWidth:l,playerHeight:u,maxDuration:f,pageUrl:this.Sf,floorPrice:i,lineItemId:e,isOutstream:p,bidSlotId:s,skippabilitySettings:n,adBreakType:m,adUnitCode:o,inFloating:g,hasFloatingCapability:v,deviceId:a,os:h})}Rf(t){return t.adserverTargeting&&(0,K.QM)(t.adserverTargeting.hb_cache_id)}Cf(t,i,e){if(0===i)return[];const{floorPrices:s,recommended:n}=t,r=s.map(((i,e)=>{if(e<n)return{requestedFloorPrice:i.price,floorPriceInformation:{floorPrices:t.floorPrices.map((({price:t})=>t)),floorPriceIndexUsed:e,floorPriceFactorBypassReason:i.floorPriceBypassReason}}})).filter((t=>(0,K.$K)(t)));return this.Df(r,i,e)}Df(t,i,e){let s=i;const r=t.filter((({requestedFloorPrice:t})=>t>=e&&s>0&&(s--,!0)));if((0,Tt.BZ)(r))return r;return[{requestedFloorPrice:e,floorPriceInformation:{floorPrices:t.map((({requestedFloorPrice:t})=>t)),floorPriceIndexUsed:-1,floorPriceFactorBypassReason:n.FloorPriceBypassReasonEnum.BidInHand}}]}}var Mi=e(6661);class Li{constructor(t,i,e,s,n){this.hf=t,this.If=i,this.Sl=e,this._appSettings=s,this.Pf=n,this.Nf=new Map,this.Vf=t=>t.replace(/\s/g,"").match(/"bidder":.+?(?=",)/).toString().split('bidder":"')[1];const r=new ki(this._appSettings,this.Sl.config,this.Sl.services.UserManagerService,this.hf,null),o=this._appSettings.customJsTargetingObject,a=new Ci(r,o),h=d.h.getSessionChildContainer(this.Sl.config.sessionId).resolve(Mi.c.ExternalPrebidJSPermutiveConfig);this.Ff=new Ei(a,this.If,this.Sl.services.GlobalDomUtilsService,this.Pf,this.Sl.services.UserManagerService,this.Sl.config,this.Sl.services.UID2Service,this.hf.liveRampPubId,h),this.jf=new xi(this.Sl.services.UserManagerService)}request(t){const{width:i,height:e}=t.callingState,s=this.fp(i,e);this.Uf(t.lineItemRequestDataList);const n=this.$f(t.lineItemRequestDataList);return(0,Tt.BZ)(n)&&s?(t.lineItemRequestDataList=n,this.qf(t).then((i=>Promise.resolve(this.Hf(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]})))):Promise.resolve({bids:[],noBids:[]})}setMacros(t){this.Ff.setMacros(t)}destroy(){this.Ff.destroy()}Hf(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=(0,gt.ZN)(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=t.bidId,r=new ut.Mz,o=new at.oO({requestedFloorPrice:t.requestedFloorPrice,prebidJsBidderName:t.bidderName,requestNumber:s.historicalMetrics.requestNumber,floorPriceInformation:t.floorPriceInformation});(0,ut.E3)(s.protoLineItem.trackers,r),((0,K.QM)(t.adTagUrl)||(0,K.QM)(t.adTagXml))&&e.bids.push({bidId:n,lineItem:s,requestMetadata:o,state:i.callingState,vastTracker:r,shouldRequestWithCredentials:!1,vastTag:t.adTagXml,url:t.adTagUrl,prebidjsCPM:t.cpm,slotId:t.slotId})})),t.noBids.forEach((t=>{const i=new at.oO({requestedFloorPrice:t.requestedFloorPrice,requestNumber:s.historicalMetrics.requestNumber,prebidJsBidderName:t.bidderName,floorPriceInformation:t.floorPriceInformation});e.noBids.push({lineItem:s,requestMetadata:i,reason:t.reason})}))})),e}qf(t){const{width:i,height:e,media:s,soundVolume:n}=t.callingState,r={width:i,height:e,maxAdDuration:t.maxAdDuration,videoVolume:n,hasFloatingCapability:this.hf.hasFloatingCapability,inFloating:t.callingState.inFloating,adBreakType:t.callingState.adBreakState.adBreakType,mediaLanguage:s.mediaLanguage,mediaId:s.mediaId,isOutstreamContext:this.hf.isOutstream,initialSoundMode:this.hf.initialSoundMode,playbackMode:this.hf.playbackMode,liveRampEnvelope:this.hf.liveRampEnvelope,plcmt:this.hf.plcmt},o=t.lineItemRequestDataList.map((i=>this.zf(i,t.maxBidPrice)));return this.Ff.requestHeaderBidder(o,r)}zf(t,i){const e=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:e.protoLineItem,maxBidPrice:i,bidderName:this.Nf.get(t.adManagerLineItem).bidderName,bidderParams:this.Nf.get(t.adManagerLineItem).bidderParamsJSONStringWithMacros}}$f(t){return t.filter((t=>{var i;const e=(null===(i=this.Nf.get(t.adManagerLineItem))||void 0===i?void 0:i.bidderName)||"";return this.Gf(e)}))}Uf(t){t.map((t=>t.adManagerLineItem)).filter((t=>!this.Nf.has(t))).forEach((t=>{try{const i=t.protoLineItem.prebidJsBidParamsJSONString,e=this.Vf(i);this.Nf.set(t,{bidderName:e,bidderParamsJSONStringWithMacros:i})}catch(i){this.Wf(i,t.protoLineItem.advertiserLineItemId)}}))}Wf(t,i){(0,Y.nF)({message:"PrebidJS_cannot_parse_bidderParams_"+i,level:Y.D_.WARN,exception:`${t}`,sessionId:this.Sl.config.sessionId},{throttle:1,shouldSendMaxLog:!1})}fp(t,i){return 0!==t&&0!==i||((0,Y.nF)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${xt.S.playerDestroyed}`,level:Y.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{throttle:5}),!1)}Gf(t){return this.jf.isAdapterCallable(t)}}var Ri=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class Bi{constructor(t,i){this.Sl=t,this.cl=i}callCoreTam(t){return Ri(this,void 0,void 0,(function*(){const i=t.map((t=>{const i={lineItemId:t.lineItemId,code:t.coreTamCode,metadata:this.cl.trackingRequestMeta,exploration:this.Sl.config.explorationMode};return this.Qf(i)}));return Promise.all(i)}))}Qf(t){return Ri(this,void 0,void 0,(function*(){try{const i=yield kt.n.sendProtoRequest({endpoint:_t.n.endPoints.api.tam,protoRequest:n.ProtoCoreTamBidRequest,protoResponse:n.ProtoCoreTamBidResponse,requestData:t,queryParams:{[St.Fk]:wt.g.version,[St.cc]:_t.n.tier},shouldLogErrors:!0});return(0,K.QM)(i.errorMessage)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:n.ConnatixNoBidReasonEnum.RequestException}:(0,K.QM)(i.encryptedBidPrice)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:i,rejectReason:null}:{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:n.ConnatixNoBidReasonEnum.InvalidResponse}}catch(i){return{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:n.ConnatixNoBidReasonEnum.RequestException}}}))}}class Oi{static getTargetingFromBid(t){var i,e;return{amzniid:t.amzniid||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid),amznbid:t.amznbid||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid)}}static hasTargeting(t){const i=Oi.getTargetingFromBid(t);return(0,K.QM)(i.amzniid)&&(0,K.QM)(i.amznbid)}constructor(t){this.Jf=t.amznbid,this.Yf=t.amzniid}get amazonBidCode(){return this.Jf}getVast(){return`${Vi.VAST_TAG_BASE_URL}?b=${this.Yf}&pp=${this.Jf}&rnd=${(0,Ct.qs)()}`}}class Di{static hasTargetings(t){const i=Di.getTargetingsFromBid(t);return(0,Tt.BZ)(i)}static getTargetingsFromBid(t){const i=Di.getDeals(t);return(0,Tt.BZ)(i)?i.map((i=>{const e=`${i}amzniid`;return{targetingDeal:i,targetingKey:e,targetingValue:t.targeting[e]}})).filter((t=>(0,K.QM)(t.targetingValue))):[]}static getDeals(t){var i;return t.amzndeals||(null===(i=t.targeting)||void 0===i?void 0:i.amzndeals)}constructor(t){this.Kf=t.targetingDeal,this.Zf=t.targetingKey,this.tv=t.targetingValue}get targetingDeal(){return this.Kf}get targetingKey(){return this.Zf}get targetingValue(){return this.tv}getVast(){return`${Vi.VAST_TAG_BASE_URL}?b=${this.tv}&rnd=${(0,Ct.qs)()}`}}class Ni{static getTargetingFromBid(t){var i,e;return{amzniid_sp:t.amzniid_sp||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid_sp),amznbid_sp:t.amznbid_sp||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid_sp)}}static hasTargeting(t){const i=Ni.getTargetingFromBid(t);return(0,K.QM)(i.amzniid_sp)&&(0,K.QM)(i.amznbid_sp)}constructor(t){this.Jf=t.amznbid_sp,this.Yf=t.amzniid_sp}get amazonBidCode(){return this.Jf}getVast(){return`${Vi.VAST_TAG_BASE_URL}?b=${this.Yf}&rnd=${(0,Ct.qs)()}`}}class Fi{static createObjects(t,i){const e=[];switch(t.creativeType){case n.ProtoCreativeTypeEnum.Tam:if(Oi.hasTargeting(i)){const t=Oi.getTargetingFromBid(i);e.push(new Oi(t))}break;case n.ProtoCreativeTypeEnum.TamDeal:if(Di.hasTargetings(i)){const s=Di.getTargetingsFromBid(i).filter((i=>i.targetingDeal===t.amazonDealId)).map((t=>new Di(t)));e.push(...s)}break;case n.ProtoCreativeTypeEnum.TamPrivateAuction:if(Ni.hasTargeting(i)){const t=Ni.getTargetingFromBid(i);e.push(new Ni(t))}}return e}}class $i{constructor(t,i){this.sv=t,this.bd=[],i.forEach((t=>{const i=Fi.createObjects(this.sv,t);this.bd.push(...i)}))}get amazonBidList(){return this.bd}get lineItem(){return this.sv}get hasCoreTamDependency(){return this.bd.every((t=>(0,K.QM)(t.amazonBidCode)))}}var Vi,ji=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class Ui{constructor(t,i,e,s,n,r){this.Sl=t,this.nv=i,this.rv=e,this.ls=s,this.us=n,this.cl=r;const o=this.Sl.config.topWindow;this.ov=(0,Ct.pE)(o).topFrame}requestBids(t){return this.hv(t)}hv(t){return ji(this,void 0,void 0,(function*(){try{yield this.av();const i=yield this.dv(),e=this.lv(t,i),s=yield this.uv(e);return this.fv(e,s)}catch(i){return this.vv(t,i)}}))}vv(t,i){return i.message?t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:n.ConnatixNoBidReasonEnum.CsRequestException}]}))):t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:i}]})))}fv(t,i){return t.map((t=>{const e=i.filter((i=>t.lineItem.advertiserLineItemId===i.lineItemId));return this.mv(t,e)}))}mv(t,i){return t.hasCoreTamDependency?this.gv(t,i):this.yv(t)}yv(t){const i=t.amazonBidList.map((i=>({encryptedPrice:null,vastTag:i.getVast(),ofskp:(0,gt.pd)(t.lineItem.floorPrice),successRate:t.lineItem.successRate,slotId:(0,gt.aW)()})));return(0,Tt.BZ)(i)?{bids:i,lineItemId:t.lineItem.advertiserLineItemId,noBids:[]}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:n.ConnatixNoBidReasonEnum.NoBid}]}}gv(t,i){const e=i.map((i=>this.bv(t,i))).filter((t=>t.amazonBid&&!(0,K.Cz)(t.coreTamRequestOutput.rejectReason,n.ConnatixNoBidReasonEnum))).map((t=>({encryptedPrice:t.coreTamRequestOutput.coreTamBidResponse.encryptedBidPrice,vastTag:t.amazonBid.getVast(),ofskp:t.coreTamRequestOutput.coreTamBidResponse.ofskp,successRate:t.coreTamRequestOutput.coreTamBidResponse.successRate,slotId:(0,gt.aW)()}))),s=i.filter((t=>t.rejectReason)).map((t=>({reason:t.rejectReason})));return(0,Tt.BZ)(e)||(0,Tt.BZ)(s)?{bids:e,noBids:s,lineItemId:t.lineItem.advertiserLineItemId}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:n.ConnatixNoBidReasonEnum.NoBid}]}}bv(t,i){return{coreTamRequestOutput:i,amazonBid:t.amazonBidList.find((t=>t.amazonBidCode===i.coreTamCode))}}uv(t){return ji(this,void 0,void 0,(function*(){const i=t.reduce(this.Iv,[]);return this.Pv(i)}))}Iv(t,i){return[...t,...i.amazonBidList.filter((t=>t.amazonBidCode)).map((t=>({lineItemId:i.lineItem.advertiserLineItemId,coreTamCode:t.amazonBidCode})))]}lv(t,i){return t.map((t=>new $i(t,i)))}Pv(t){return this.rv.callCoreTam(t)}dv(){return new Promise(((t,i)=>{(0,K.$K)(this.wv)?this.wv.fetchBids({slots:[{slotID:this.nv,mediaType:Vi.MEDIA_TYPE}]},(e=>{(0,Tt.BZ)(e)?t(e):i(n.ConnatixNoBidReasonEnum.EmptyResponse)})):i(n.ConnatixNoBidReasonEnum.NoLibInPage)}))}av(){return ji(this,void 0,void 0,(function*(){if(!(0,K.$K)(this.wv)){if((0,K.QM)(this.cl.amazonTamPubId)){const t=yield this.Sv();return this.wv=t,void this.wv.init({pubID:this.cl.amazonTamPubId,deals:!0})}this.wv=this.ov[Vi.SDK_NAME_ON_PUB_WINDOW]}}))}Sv(){const t=new Pi.o(this.ls,this.us);return new Promise(((i,e)=>{t.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-apstag-loader' type='text/javascript' src='${Vi.APSTAG_URL}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-apstag-loader"}],container:this.ls.querySelector("head"),visible:!1,title:U.$b}).then((t=>{if(t.iframe.contentWindow[Vi.SDK_NAME_ON_PUB_WINDOW])return i(t.iframe.contentWindow[Vi.SDK_NAME_ON_PUB_WINDOW]);e(new Error("Amazon TAM not found"))})).catch((t=>{e(t)}))}))}}!function(t){t.SDK_NAME_ON_PUB_WINDOW="apstag",t.MEDIA_TYPE="video",t.VAST_TAG_BASE_URL="https://aax.amazon-adsystem.com/e/dtb/vast",t.APSTAG_URL="https://c.amazon-adsystem.com/aax2/apstag.js"}(Vi||(Vi={}));class qi{constructor(t,i,e){this.Sl=t,this._v=i,this.cl=e,this.Tv=new Ui(this.Sl,this._v,new Bi(this.Sl,this.cl),this.Sl.services.GlobalDomUtilsService,this.Sl.config.sessionId,this.cl)}request(t){const{width:i,height:e}=t.callingState;return this.fp(i,e)?this.xv(t).then((i=>Promise.resolve(this.kv(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}xv(t){const i=t.lineItemRequestDataList.map((t=>t.adManagerLineItem.protoLineItem));return this.Tv.requestBids(i)}kv(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=(0,gt.ZN)(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=new ut.Mz,r=new at.oO({encryptedPrice:t.encryptedPrice,requestNumber:s.historicalMetrics.requestNumber});(0,ut.E3)(s.protoLineItem.trackers,n),e.bids.push({requestMetadata:r,vastTracker:n,lineItem:s,url:t.vastTag,state:i.callingState,successRate:t.successRate,obfuscatedPrice:t.ofskp,shouldRequestWithCredentials:!1,slotId:t.slotId})})),t.noBids.forEach((t=>{e.noBids.push({lineItem:s,requestMetadata:new at.oO({requestNumber:s.historicalMetrics.requestNumber}),reason:t.reason})}))})),e}fp(t,i){return 0!==t&&0!==i||((0,Y.nF)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${xt.S.playerDestroyed}`,level:Y.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{throttle:5}),!1)}}var Hi=e(9592);const zi={[Hi.f.HandlingSdkUrl]:n.ConnatixNoBidReasonEnum.CsRequestException,[Hi.f.NetworkRequestUrl]:n.ConnatixNoBidReasonEnum.CsRequestException,[Hi.f.InvalidCreativeType]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.XmlInvalidString]:n.ConnatixNoBidReasonEnum.CsEmptyResponse,[Hi.f.XmlParseGeneral]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.XmlInvalidTree]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.XmlInvalidAd]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.XmlAdaptorWrapperLimit]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.VastVersionNotSupported]:n.ConnatixNoBidReasonEnum.VastVersionNotSupported,[Hi.f.HTMLUnknownMimeType]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.HTMLNotEnoughData]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.ImaAdsManagerInit]:n.ConnatixNoBidReasonEnum.CsRequestException,[Hi.f.ImaVastEmptyResponse]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.ImaRequestException]:n.ConnatixNoBidReasonEnum.CsRequestException,[Hi.f.ImaTimeout]:n.ConnatixNoBidReasonEnum.Timeout,[Hi.f.ImaInvalidResponse]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.InvalidCreativeUrl]:n.ConnatixNoBidReasonEnum.CsRequestException,[Hi.f.BidIsNotTargetingAllowedEver]:n.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver,[Hi.f.VastMediaFilesNotSupported]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.ExternalSdkTimeout]:n.ConnatixNoBidReasonEnum.Timeout,[Hi.f.ExternalSdkInvalidResponse]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[Hi.f.VastContainsBannedUrls]:n.ConnatixNoBidReasonEnum.VastHasBannedUrls};var Wi=e(4481),Gi=e(5113),Xi=e(7763),Qi=e(1265),Ji=e(7720),Yi=e(66),Ki=e(3326);class Zi extends Qi.j{constructor(t,i){super(),this.Tr=t,this.Cv=i,this.ze=new s.x,this.Ev=new s.x,this.Mv="",this.Bv=0,this.Rv=0,this.Ov=0,this.Dv=0,this.Us()}get onCreativeReceived(){return this.ze.asObservable()}get onNonCriticalError(){return this.Ev.asObservable()}initAd(t,i,e){this.Cv.emitSdkEvent(Yi.t.INIT_AD,{width:t,height:i,viewMode:e})}startAd(){this.Cv.emitSdkEvent(Yi.t.START_AD)}stopAd(){this.Cv.emitSdkEvent(Yi.t.STOP_AD)}resizeAd(t,i,e){this.Cv.emitSdkEvent(Yi.t.RESIZE_AD,{width:t,height:i,viewMode:e})}pauseAd(){this.Cv.emitSdkEvent(Yi.t.PAUSE_AD)}resumeAd(){this.Cv.emitSdkEvent(Yi.t.RESUME_AD)}expandAd(){this.Cv.emitSdkEvent(Yi.t.EXPAND_AD)}collapseAd(){this.Cv.emitSdkEvent(Yi.t.COLLAPSE_AD)}skipAd(){this.Cv.emitSdkEvent(Yi.t.SKIP_AD)}getAdRemainingTime(){return 0}getAdDuration(){return this.Bv||this.Tr.adManagerLineItem.protoLineItem.duration||0}getAdVolume(){return this.Dv}setAdVolume(t){this.Cv.emitSdkEvent(Yi.t.SET_AD_VOLUME,{volume:t})}getAdMediaWidth(){return this.Rv}getAdMediaHeight(){return this.Ov}getMediaFile(){return this.Mv}destroy(){this.Cv.destroy()}Us(){Object.keys(Yi.g).forEach((t=>{const i=Yi.g[t];i===Yi.g.AD_ERROR&&this.Cv.subscribeToSdkEvent(i,(t=>this.Nv(t))),i===Yi.g.LOADED&&this.Cv.subscribeToSdkEvent(i,(t=>this.Ds(t))),i===Yi.g.IMPRESSION&&this.Cv.subscribeToSdkEvent(i,(t=>this.Vv(t))),i===Yi.g.VOLUME_CHANGED?this.Cv.subscribeToSdkEvent(i,(t=>this.Fv(t))):this.Cv.subscribeToSdkEvent(i,(()=>this.Os(i)))}))}Ds(t){const{creativeId:i,skipOffset:e,clickThroughUrl:s,mediaUrl:n,adDuration:o,mediaWidth:a,mediaHeight:h}=t;this.ze.next(i),this.Mv=n,this.Bv=o,this.Rv=a,this.Ov=h;const c=this.Tr.adManagerLineItem.protoLineItem.publisherLineItemId||"";(0,Ki.A)(c,s).then((t=>{t?this.Pi.next({type:r.fI.AdError,payload:{errorMessage:r.RG.DomainBlocked,errorCode:Ji.Oq.GeneralError}}):this.Pi.next({type:r.fI.AdLoaded,payload:{skipOffset:e}})})).catch((()=>{}))}Vv(t){this.Bv=t.adDuration,this.Pi.next({type:r.fI.AdVideoStart}),this.Pi.next({type:r.fI.AdImpression,payload:{}})}Fv(t){this.Dv=t.volume,this.Pi.next({type:r.fI.AdVolumeChange})}Os(t){switch(t){case Yi.g.CLICK:this.Pi.next({type:r.fI.AdClickThru,payload:{}});break;case Yi.g.STARTED:this.Pi.next({type:r.fI.AdStarted});break;case Yi.g.FIRST_QUARTILE:this.Pi.next({type:r.fI.AdVideoFirstQuartile});break;case Yi.g.MIDPOINT:this.Pi.next({type:r.fI.AdVideoMidpoint});break;case Yi.g.THIRD_QUARTILE:this.Pi.next({type:r.fI.AdVideoThirdQuartile});break;case Yi.g.COMPLETE:this.Pi.next({type:r.fI.AdVideoComplete});break;case Yi.g.DURATION_CHANGE:this.Pi.next({type:r.fI.AdDurationChange});break;case Yi.g.PAUSED:this.Pi.next({type:r.fI.AdPaused});break;case Yi.g.RESUMED:this.Pi.next({type:r.fI.AdPlaying});break;case Yi.g.STOPPED:this.Pi.next({type:r.fI.AdStopped,payload:{shouldTrackPostBid:!0}});break;case Yi.g.LINEAR_CHANGED:this.Pi.next({type:r.fI.AdLinearChange});break;case Yi.g.SKIPPABLE_STATE_CHANGED:this.Pi.next({type:r.fI.AdSkippableStateChange});break;case Yi.g.SKIPPED:this.Pi.next({type:r.fI.AdSkipped});break;case Yi.g.USER_CLOSE:this.Pi.next({type:r.fI.AdUserClose});break;case Yi.g.LOG:this.Pi.next({type:r.fI.AdLog})}}Nv(t){t.nonCriticalError?this.Ev.next(t.nonCriticalError):this.Pi.next({type:r.fI.AdError,payload:{errorMessage:r.RG.ExternalSdkError,errorCode:t.errorCode}})}}var te=e(8850);class ie extends Xi.I{constructor(t,i,e){super(t,i),this.Cv=e,this.adMediaType="external",this.adSourceType=n.ProtoAdsourceTypeEnum.Unknown,this.Uv=[],this.$v=new Zi(i,e)}get adVideoUrl(){return this.$v.getMediaFile()}get declaredDurationInSeconds(){return this.$v.getAdDuration()}initAd(t,i,e,s,n,o,a){try{super.initAd(t,i,e,s,n,o,a),this.Uv.push(this.$v.onVpaidEvent.subscribe((t=>{this.Hi(t)})),this.$v.onCreativeReceived.subscribe((t=>{this.creativeId=t})),this.$v.onNonCriticalError.subscribe((t=>{this.Re("ExternalBidAdaptor",t.event,t.error)}))),this.$v.initAd(t,i,e)}catch(t){t instanceof Error&&(this.Cv.emitSdkEvent(Yi.t.DESTROY_AD),this.Hi({type:r.fI.AdError,payload:{errorMessage:r.RG.AdaptorInitAdError+`_${t.message}`,errorCode:te.O.GeneralError}}))}}startAd(){try{super.startAd(),this.$v.startAd()}catch(t){t instanceof Error&&(this.Cv.emitSdkEvent(Yi.t.DESTROY_AD),this.Hi({type:r.fI.AdError,payload:{errorMessage:r.RG.AdaptorStartAdError+`_${t.message}`,errorCode:te.O.GeneralError}}))}}stopAd(t){try{super.stopAd(t),this.$v.stopAd()}catch(t){t instanceof Error&&this.Re("ExternalBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.$v.resizeAd(t,i,e)}pauseAd(){this.$v.pauseAd()}resumeAd(){this.$v.resumeAd()}expandAd(){this.$v.expandAd()}collapseAd(){this.$v.collapseAd()}skipAd(){this.$v.skipAd()}getAdRemainingTime(){return this.$v.getAdRemainingTime()}getAdDuration(){return this.$v.getAdDuration()}getAdVolume(){return this.$v.getAdVolume()}getAdMediaSize(){return{width:this.$v.getAdMediaWidth(),height:this.$v.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.$v.setAdVolume(t)}catch(t){t instanceof Error&&this.Re("ExternalBidAdaptor","setAdVolume",t)}}ce(){try{super.ce(),this.$v.destroy()}catch(t){t instanceof Error&&this.Re("ExternalBidAdaptor","_destroy",t)}}}class ee{}ee.SHOULD_CALL_WITH_CREDENTIALS_DEFAULT=!0,ee.MIN_VAST_VERSION=2,ee.DEFAULT_MAX_WRAPPER_LIMIT=10;class se{}se.AD_TAG_DUMMY_PREFIX="https://adx.connatix.com",se.IMA_URL_PART=".g.doubleclick.net";var ne=e(6210),re=e(2321),oe=e(2857),ae=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class he{static getHlsModule(t,i,e){return ae(this,void 0,void 0,(function*(){let s=null;if((0,K.QM)(i)&&(s=yield(0,oe.zJ)(t,e),!s))throw new Error(Hi.f.NetworkRequestUrl);return s}))}static getAdUnitPath(t){return t.slice(se.AD_TAG_DUMMY_PREFIX.length)}static isImaLineItem(t){if(ne.ai.includes(t.protoLineItem.advertiserLineItemId))return!0;const i=t.protoLineItem.adTag;return!(!(0,K.$K)(i)||(0,K.Ft)(i))&&he.isImaUrl(i)}static isImaUrl(t){return((0,J.ge)(t)||"").includes(se.IMA_URL_PART)}static getFinalUrl(t,i,e,s){let n=t;try{const t=i.callingState.adContainerState.get(i.adManagerLineItem.protoLineItem.adType);(0,K.$K)(t)&&(n=he.qv(n,e,t,i),n=s.appendParams(n,t))}catch(t){throw new Error(Hi.f.InvalidCreativeUrl)}return n}static setVastInfo(t,i,e){(0,ut.Vx)(t,i.vastTracker,i.sessionId),e.push(t)}static isValidHtmlMimeType(t){return Object.values(r.ZJ).some((i=>i===t))}static isVideoAd(t){const{protoLineItem:i}=t.adManagerLineItem;return i.adType===n.ProtoAdType.Video}static isNonlinearVideoAd(t){var i;const{protoLineItem:e}=t.adManagerLineItem;return e.adType===n.ProtoAdType.Nonlinear&&(null===(i=e.nonlinearLineItemSettings)||void 0===i?void 0:i.nonLinearRequestType)===n.ProtoNonlinearRequestType.Video}static haveExpectedAdType(t,i){const e=new re.GU(t),{mediaFiles:s,nonLinearFiles:r}=e;return i===n.ProtoAdType.Video&&(0,Tt.BZ)(s)||i===n.ProtoAdType.Nonlinear&&(0,Tt.BZ)(r)}static notifyBidFetchStart(t,i){t.onBidFetchStart.next(i),i.adManagerLineItem.bidsInFetch.add(i.bidId)}static notifyBidFetchEnd(t,i){t.onBidFetchEnd.next(i),i.adManagerLineItem.bidsInFetch.delete(i.bidId)}static qv(t,i,e,s){const n={adHeight:e.height,adWidth:e.width,adPostion:s.callingState.adBreakState.adBreakType,mute:s.callingState.sound?0:1,plcmt:s.plcmt},r={mediaDescription:s.callingState.media.mediaDescription,mediaDuration:s.callingState.media.mediaDuration,mediaId:s.callingState.media.mediaId,mediaTitle:s.callingState.media.mediaTitle,mediaUrl:s.callingState.media.mediaUrl};return i.replace(t,s.adManagerLineItem.protoLineItem.vendorId,s.adManagerLineItem.protoLineItem.advertiserLineItemId,{adMacros:n,mediaMacros:r})}}var ce=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class de{constructor(t,i,e){this.Hv=t,this.Cv=i,this.zv=e}static Gv(){return ce(this,void 0,void 0,(function*(){return new Promise((t=>{setTimeout((()=>{t(null)}),25e3)}))}))}loadAd(){return ce(this,void 0,void 0,(function*(){if(!(yield Promise.race([this.Wv(),de.Gv()]).catch((t=>{throw this.Cv.destroy(),t}))))throw this.Cv.destroy(),new Error(Hi.f.ExternalSdkTimeout)}))}Wv(){return new Promise(((t,i)=>{this.Cv.subscribeToSdkEvent(Yi.g.REQUEST_SUCCESS,(()=>{t(!0)})),this.Cv.subscribeToSdkEvent(Yi.g.AD_ERROR,(()=>{i(new Error(Hi.f.ExternalSdkInvalidResponse))})),this.Cv.emitSdkEvent(Yi.t.REQUEST_AD,{url:this.Hv,lineitemId:this.zv})}))}}class le{}le.FETCH_BID_TIMEOUT=25e3;var ue=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class pe{constructor(t,i,e){this.imaAdSlot=t,this.imaDependencies=i,this.us=e,this.Xv=null,this.Qv=!1,this.Jv=[]}static Gv(){return ue(this,void 0,void 0,(function*(){return new Promise((t=>{setTimeout((()=>{t(null)}),le.FETCH_BID_TIMEOUT)}))}))}getImaAdModule(){return ue(this,void 0,void 0,(function*(){try{const t=yield Promise.race([this.Yv(),pe.Gv()]);if(!t)throw new Error(Hi.f.ImaTimeout);return this.Qv=!0,this.Xv&&(0,l.i)(this.Jv),t}catch(t){throw this.Qv=!0,this.Xv&&((0,l.i)(this.Jv),this.Xv.destroy(),this.imaDependencies.adSlotContainerRecycler.recycleAdSlot(this.imaAdSlot)),(0,Ct.W$)(t)}}))}dl(){return this.imaDependencies.adContainerState.get(this.imaDependencies.adType)}Yv(){return ue(this,void 0,void 0,(function*(){try{const t=yield this.imaAdSlot.fetchImaDependencies();return yield this.Kv(t)}catch(t){throw(0,Ct.W$)(t)}}))}Kv(t){if(this.Qv)throw new Error(Hi.f.ImaRequestException);return new Promise(((i,e)=>{const s=this.dl();if(!(0,K.$K)(s)||!(0,K.$K)(this.imaDependencies.url))throw new Error(Hi.f.ImaRequestException);this.Xv=new ve(t.imaSdk,t.imaAdsLoader,s.width,s.height,this.imaDependencies.url,this.imaAdSlot.videoSlot,this.imaDependencies.pageUrl,this.imaDependencies.advertiserLineItemId,this.imaDependencies.adxMinPrice,!1,this.imaDependencies.xml,this.imaDependencies.adxFloorPrice,this.imaDependencies.ppid,this.us),this.Jv.push(this.Xv.onSuccess.subscribe((e=>{i(Object.assign(Object.assign({},e),t))})),this.Xv.onError.subscribe((t=>{e(new Error(t))}))),this.Xv.loadAd()}))}}var fe=e(7597);function me(t){const{adxLastLookParam:i,custParam:e,adxUprParam:s}=t,{adxFloorPrice:n,upr:r}=function(t){const{adxMinPrice:i,adxLastLookMinPrice:e,adxUprMinPrice:s,adxLastLookMaxPrice:n,adxUprMaxPrice:r,adxLastLookIncrementPrice:o}=t;if(i<=e)return{adxFloorPrice:e,upr:s};if(i>=n)return{adxFloorPrice:n,upr:r};if(i>=r)return{adxFloorPrice:Math.ceil(10*i)/10,upr:r};if(Number.isInteger(i))return{adxFloorPrice:i,upr:i};const a=(0,Ct.Zv)(i);return{adxFloorPrice:a+o,upr:a}}(t);return e?`${e}&${i}=${n}&${s}=${r}`:`${i}=${n}&${s}=${r}`}var ge=e(9357);class ve{constructor(t,i,e,n,r,o,a,h,c,d=!1,l=null,u,p,f){this.Ss=t,this.Ts=i,this.Ps=e,this.ws=n,this.ks=r,this.$s=o,this.Sf=a,this.tm=h,this.nm=c,this.rm=d,this.om=l,this.hm=u,this.am=p,this.us=f,this.dm=new s.x,this.He=new s.x,this.lm={id:(0,Ct.qs)()},this.Cs=null,this.Bs=t=>{if(!this.Rs(t))return;const i=t.getError().getErrorCode();switch(this.rm&&(0,Y.nF)({message:"Ima_Error_Code",exception:t.getError().getMessage(),level:Y.D_.INFO,sessionId:this.us},{throttle:5}),i){case this.Ss.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.um(Hi.f.ImaVastEmptyResponse);break;case this.Ss.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.Ss.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.um(Hi.f.ImaInvalidResponse);break;default:this.um(Hi.f.ImaRequestException)}},this.pm=t=>{this.Rs(t)&&(this.Cs=t.getAdsManager(this.$s,{loadVideoTimeout:25*ge.s_}),this.fm(),this.dm.next({imaAdsManager:this.Cs,requestAdsContext:this.lm}))},this.Ts.addEventListener(this.Ss.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.pm),this.Ts.addEventListener(this.Ss.AdErrorEvent.Type.AD_ERROR,this.Bs)}get onSuccess(){return this.dm.asObservable()}get onError(){return this.He.asObservable()}loadAd(){const t=new this.Ss.AdsRequest;if(["3ebdd57e-b5b8-4fd8-8887-6ae94a978a12","fe9242a7-7f5a-40f0-84ad-0d1cb921dbbe","5ee7c0e2-db41-417d-a2f2-4d91037b85bd","a28964ae-afa3-45d3-9f00-fa228cf89d74"].includes(this.tm)&&(t.omidAccessModeRules={},t.omidAccessModeRules[google.ima.OmidVerificationVendor.OTHER]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.INTEGRAL_AD_SCIENCE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.MOAT]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.DOUBLEVERIFY]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.PIXELATE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.NIELSEN]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.COMSCORE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.MEETRICS]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.GOOGLE]=google.ima.OmidAccessMode.FULL),(0,K.QM)(this.om))t.adsResponse=this.om;else if((0,K.$K)(this.hm)||this.nm){const i=(0,J.Ph)("cust_params",this.ks),e=new URL(this.ks);let s=i;this.nm?s=me({adxLastLookIncrementPrice:fe.P8,adxLastLookMaxPrice:fe.zt,adxLastLookMinPrice:fe.FH,adxLastLookParam:fe.wF,adxUprParam:fe.rU,adxMinPrice:this.nm,adxUprMaxPrice:fe.qx,adxUprMinPrice:fe.$w,custParam:i}):(0,K.$K)(this.hm)&&(s=this.vm(i,this.hm)),e.searchParams.set("cust_params",s),t.adTagUrl=e.href}else t.adTagUrl=this.ks;this.nm&&(0,Y.nF)({message:"Adx_lookup_finalUrl",level:Y.D_.INFO,callStack:`${t.adTagUrl}`,sessionId:this.us},{pacing:1}),t.linearAdSlotWidth=t.nonLinearAdSlotWidth=this.Ps,t.linearAdSlotHeight=t.nonLinearAdSlotHeight=this.ws,t.pageUrl=this.Sf,(0,K.QM)(this.am)&&this.Ts.getSettings().setPpid(this.am),this.Ts.requestAds(t,this.lm)}destroy(){var t;try{this.fm(),null===(t=this.Cs)||void 0===t||t.destroy()}catch(t){}}vm(t,i){const{uprQueryName:e,uprQueryValue:s}=i.adxData;return t?`${t}&${e}=${s}&dy=1`:`${e}=${s}&dy=1`}um(t){this.He.next(t)}fm(){this.Ts.removeEventListener(this.Ss.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.pm),this.Ts.removeEventListener(this.Ss.AdErrorEvent.Type.AD_ERROR,this.Bs)}Rs(t){const i=t.getUserRequestContext();return!i||i.id===this.lm.id}}var ye=e(1187),be=e(8919),Ie=e(751);class Pe{constructor(t,i){this.rh=t,this.Cv=i,this.Ui=[]}subscribeToSdkEvent(t,i){const e=t=>{t.id===this.rh&&i(t)};this.Ui.push((()=>{this.Cv.remove(t,e)})),this.Cv.on(t,e)}emitSdkEvent(t,i){this.Cv.publish(t,Object.assign(Object.assign({},i),{id:this.rh}))}destroy(){this.Ui.forEach((t=>t())),this.Ui.length=0,this.emitSdkEvent(Yi.t.DESTROY_AD)}}var we,Se=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class Ae{constructor(t){this.gm=t}fetchBid(t){var i,e;return Se(this,void 0,void 0,(function*(){const s=this.bm(t),{cnxBidId:r,encryptedPrice:o}=t.requestMetadata.data,a={bidPrice:s.price,bidId:s.bidId,yoScore:s.yoScore,isIma:s.isIma,adManagerLineItem:t.lineItem,encryptedPrice:o},h=null===(e=null===(i=this.gm.standaloneService.bestStandaloneAd)||void 0===i?void 0:i.bid)||void 0===e?void 0:e.cnxBidId;let c;t.lineItem.protoLineItem.creativeType===n.ProtoCreativeTypeEnum.Rtb&&(0,K.QM)(r)&&r===h&&(a.yoScore=Number.MAX_SAFE_INTEGER,s.yoScore=Number.MAX_SAFE_INTEGER);try{he.notifyBidFetchStart(this.gm.adEvents,a),c=yield this.Im(t,s)}catch(t){throw(0,Ct.W$)(t)}finally{he.notifyBidFetchEnd(this.gm.adEvents,a)}return c.shouldBeDiscarded=a.shouldBeDiscarded,c}))}Im(t,i){return Se(this,void 0,void 0,(function*(){const e=t.url||i.adManagerLineItem.protoLineItem.adTag||"",s=t.vastTag;switch(t.lineItem.protoLineItem.creativeType){case n.ProtoCreativeTypeEnum.External:case n.ProtoCreativeTypeEnum.ThirdParty:return t.lineItem.protoLineItem.adType===n.ProtoAdType.Overlay?this.Pm(i):this.gm.canUseExternalAdService&&(t.lineItem.protoLineItem.externallyManaged||t.lineItem.protoLineItem.advertiserAccountId===fe.Ro)?this.wm(i,e):this.Am(e,i,t);case n.ProtoCreativeTypeEnum.MediaFile:return this._m(i);case n.ProtoCreativeTypeEnum.Rtb:return this.Tm(i,t);case n.ProtoCreativeTypeEnum.HeaderBidder:return(0,K.QM)(s)?this.xm(s,i,t):this.Am(e,i,t);case n.ProtoCreativeTypeEnum.Tam:case n.ProtoCreativeTypeEnum.TamDeal:case n.ProtoCreativeTypeEnum.TamPrivateAuction:return this.Am(e,i,t);default:throw new Error(Hi.f.InvalidCreativeType)}}))}bm(t){const{lineItem:i,obfuscatedPrice:e,vastTracker:s,state:n,requestMetadata:r,prebidjsCPM:o,slotId:a,bidId:h,creativeId:c,adxMinPrice:d,plcmt:l}=t,{globalDomUtilsService:u,viewabilityService:p,adEnforcer:f,os:m,adSlotContainerRecycler:g,urlSuffixerService:v,sessionId:y}=this.gm,{creativeType:b,advertiserLineItemId:I,floorPrice:P,customCpm:w,adType:S,grossNetPercentageDifference:A,lineItemPriority:x}=i.protoLineItem;let _=be.sL.getBidPriceByCreative(b,{floorPrice:P,customCpm:w,obfuscatedPrice:e,prebidjsCPM:o,adxFloorPrice:r.data.requestedFloorPrice||0,adxLookupPrice:d});(0,K.r)(_)||((0,Y.nF)({message:"AdManager_BidFactory_no_cpm_on_bid",level:Y.D_.ERROR,sessionId:this.gm.sessionId},{throttle:1,shouldSendMaxLog:!1}),_=0);const T=this.gm.yoScoreCalculator.calculateBidYoScore(I,{priority:x,grossNetPercentageDifference:A,cpm:_}),C=this.gm.adContainerMap.get(S);if(!(0,K.$K)(C))throw new Error("AdManager_BidFactory_adContainer_is_undefined");return{adContainer:C,requestMetadata:r,globalDomUtilsService:u,viewabilityService:p,adEnforcer:f,os:m,adSlotContainerRecycler:g,urlSuffixerService:v,sessionId:y,yoScore:T,price:_,vastTracker:s,plcmt:l,cpm:o||P||w,adManagerLineItem:i,callingState:n,externalCreativeId:c,bidId:h||(0,Ct.qs)(),bidSlotId:a||(0,gt.aW)(),isIma:he.isImaLineItem(i),adxFloorPrice:i.getAdxFloorPriceObjectsByPrice(r.data.requestedFloorPrice)[0]}}Cm(t,i){const{mime:e,html:s,dimensions:n}=i;if(!(0,K.$K)(e)||!(0,K.$K)(s)||!(0,K.$K)(n))throw new Error(Hi.f.HTMLNotEnoughData);if(!he.isValidHtmlMimeType(e))throw new Error(Hi.f.HTMLUnknownMimeType);return new Gi.EM(this.gm.timerService,Object.assign(Object.assign({},t),{html:s,mime:e,dimensions:n}))}_m(t){return Se(this,void 0,void 0,(function*(){return new Gi.Kz(this.gm.timerService,Object.assign(Object.assign({},t),{hlsModule:yield he.getHlsModule(this.gm.globalDomUtilsService.global,t.adManagerLineItem.protoLineItem.externalHlsFile,this.gm.sessionId),mediaId:t.adManagerLineItem.protoLineItem.mediaCreativeId,renditions:t.adManagerLineItem.protoLineItem.renditions,clickUrl:t.adManagerLineItem.protoLineItem.mediaCreativeClickUrl,externalMediaFile:t.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:t.adManagerLineItem.protoLineItem.externalHlsFile,shouldPauseAdWhenFinished:this.gm.shouldPauseAdWhenFinished,shouldLoopAdWhenFinished:this.gm.shouldLoopAdWhenFinished,isInApp:this.gm.isInApp,pageDomain:this.gm.pageDomain}))}))}Pm(t){return new Gi.pe(this.gm.timerService,Object.assign(Object.assign({},t),{adxAdUnitPath:he.getAdUnitPath(t.adManagerLineItem.protoLineItem.adTag),domain:this.gm.pageDomain}))}Am(t,i,e,s){var r;return Se(this,void 0,void 0,(function*(){const o=he.getFinalUrl(t,i,this.gm.adMacroReplacer,this.gm.imaVastUrlBuilderService),a=he.isImaUrl(o);if(i.isIma||a){if(i.adManagerLineItem.protoLineItem.adType!==n.ProtoAdType.Nonlinear){const t=d.h.getGlobalContainer().resolve(vt.l),s=null===(r=i.adManagerLineItem.protoLineItem.protoIntentiqResponseData)||void 0===r?void 0:r.vendorName,n=t.getAdxId(s);return this.Em(i,{url:o,adxMinPrice:e.adxMinPrice,ppid:n})}(0,Y.nF)({message:"AdManager_BidFactory_found_ima_in_nonLinear",level:Y.D_.INFO,sessionId:i.sessionId})}return this.Mm(o,i,e,s)}))}wm(t,i){return Se(this,void 0,void 0,(function*(){const e=he.getFinalUrl(i,t,this.gm.adMacroReplacer,this.gm.imaVastUrlBuilderService),s=Object.assign(Object.assign({},t),{url:e}),n=t.bidId,r=d.h.getSessionChildContainer(t.sessionId).resolve(Ie.P),o=new Pe(n,r),a=new de(e,o,t.adManagerLineItem.protoLineItem.advertiserLineItemId);try{yield a.loadAd()}catch(t){throw(0,Ct.W$)(t)}return new ie(this.gm.timerService,s,o)}))}Em(t,i){return Se(this,void 0,void 0,(function*(){const e=(0,K.$K)(i.url)?i.url:"",s=(0,K.$K)(i.xml)?i.xml:"",n={url:e,xml:s,ppid:i.ppid,pageUrl:this.gm.pageUrl,adContainerState:t.callingState.adContainerState,advertiserLineItemId:t.adManagerLineItem.protoLineItem.advertiserLineItemId,adType:t.adManagerLineItem.protoLineItem.adType,adSlotContainerRecycler:t.adSlotContainerRecycler,adxFloorPrice:t.adxFloorPrice,adxMinPrice:i.adxMinPrice};let r;const o=this.gm.adSlotContainerRecycler.requestAdSlotIma(t.adContainer,!!i.adxMinPrice),a=new pe(o,n,this.gm.sessionId);try{r=yield a.getImaAdModule()}catch(t){throw(0,Ct.W$)(t)}return new Gi.f1(this.gm.timerService,Object.assign(Object.assign({},t),{imaSdk:r.imaSdk,imaAdsLoader:r.imaAdsLoader,imaAdsManager:r.imaAdsManager,requestAdsContext:r.requestAdsContext,pageUrl:this.gm.pageUrl,imaAdSlotContainer:o,url:e,vastAd:s||e}))}))}Mm(t,i,e,s){return Se(this,void 0,void 0,(function*(){const n=(0,K.$K)(e.shouldRequestWithCredentials)?e.shouldRequestWithCredentials:ee.SHOULD_CALL_WITH_CREDENTIALS_DEFAULT;let r="";try{r=yield kt.n.fetchXMLRequest(t,n)}catch(t){if(!1===n)throw new ye.RA({hasError:!0,errorReason:Hi.f.NetworkRequestUrl,vastErrorCode:ye.Oq.WrapperVastUriTimeout})}if(!(0,K.QM)(r)){try{r=yield kt.n.fetchXMLRequest(t,!1)}catch(t){throw new ye.RA({hasError:!0,errorReason:Hi.f.NetworkRequestUrl,vastErrorCode:ye.Oq.WrapperVastUriTimeout})}if(!(0,K.QM)(r))throw new ye.RA({hasError:!0,errorReason:Hi.f.XmlInvalidString,vastErrorCode:ye.Oq.NoVastResponseAfterWrapper})}return this.xm(r,i,e,s)}))}xm(t,i,e,s){return Se(this,void 0,void 0,(function*(){const r=new ye.H3(ee.MIN_VAST_VERSION,i.sessionId).parseVastXml(t);if(!0===r.hasError){const{errorReason:t,vastErrorCode:i,errorUrlTrackers:e}=r;throw new ye.RA({hasError:!0,errorUrlTrackers:e,errorReason:t,vastErrorCode:i})}const o=(0,K.$K)(s)?s.vastAdsChain:[];if(he.setVastInfo(r.result,i,o),r.result.wrapper){const t=(0,K.$K)(s)?s.maxWrapperLimit:ee.DEFAULT_MAX_WRAPPER_LIMIT;if(t<=0)throw new ye.RA({hasError:!0,errorReason:Hi.f.XmlAdaptorWrapperLimit,vastErrorCode:ye.Oq.WrapperLimitReached});return this.Am(r.result.wrapper.VASTAdTagURI,i,e,{vastAdsChain:o,maxWrapperLimit:t-1})}const{adType:a}=i.adManagerLineItem.protoLineItem;if(!he.haveExpectedAdType(o,a))throw new ye.RA({hasError:!0,errorReason:Hi.f.InvalidCreativeType,vastErrorCode:ye.Oq.ExpectingDifferentLinearity});return a===n.ProtoAdType.Nonlinear?new Gi.pr(this.gm.timerService,Object.assign(Object.assign({},i),{vastResponse:new ye.GU(o)})):new Gi.SI(this.gm.timerService,Object.assign(Object.assign({},i),{vastResponse:new ye.GU(o),shouldLoopAdWhenFinished:this.gm.shouldLoopAdWhenFinished,adMacroReplacer:this.gm.adMacroReplacer,vastAd:t}))}))}Tm(t,i){return Se(this,void 0,void 0,(function*(){const e=he.isVideoAd(t),s=he.isNonlinearVideoAd(t),n=t.isIma;if(e||s){if(!(0,K.$K)(i.vastTag))throw new Error(Hi.f.InvalidCreativeUrl);return n?this.Em(t,{xml:i.vastTag}):this.xm(i.vastTag,t,i)}return this.Cm(t,i)}))}}!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(we||(we={}));class xe{constructor(t){this.Lm=t,this.Bm=we.IDLE,this.Rm=Promise.resolve()}start(){(this.Bm===we.IDLE||this.Bm===we.STOPPING)&&(this.Bm=we.RUNNING,this.Om())}stop(){this.Bm=we.STOPPING}setPromiseNotifier(t){return this.Dm=t,this}setIdleNotifier(t){return this.Nm=t,this}getState(){return this.Bm}Fm(){const t=this.Lm();void 0!==t?this.Rm=t.then((t=>{this.Dm&&this.Dm(t)})).then((()=>{this.Bm===we.STOPPING&&(this.Bm=we.IDLE)})):this.Bm=we.IDLE}Om(){this.Bm===we.IDLE?this.Nm&&this.Nm():this.Bm===we.RUNNING&&(this.Fm(),this.Rm.then((()=>{this.Om()})))}}class _e{constructor(t,i=1){this.Lm=t,this.jm=i,this.Um=[],this.$m(i)}start(){return this.Um.forEach((t=>{t.start()})),this}stop(){return this.Um.forEach((t=>{t.stop()})),this}setPromiseNotifier(t){return this.Um.forEach((i=>{i.setPromiseNotifier(t)})),this}setAllThreadsIdleNotifier(t){return this.qm=t,this.Hm(),this}setNumberOfThreads(t){if(t<=0)return;this.jm=t;const i=t-this.jm;i>0?this.$m(i):i<0&&this.zm(i)}getState(){return this.Um.reduce(((t,i)=>(t[i.getState()]++,t)),{[we.IDLE]:0,[we.RUNNING]:0,[we.STOPPING]:0})}$m(t){for(let i=0;i<t;i++){const t=new xe(this.Lm).setPromiseNotifier(this.Dm);this.Um.push(t)}}zm(t){t=Math.min(t,this.Um.length);for(let i=0;i<t;i++)this.Um.pop().stop()}Hm(){const t=()=>{this.getState()[we.IDLE]===this.Um.length&&this.qm()};this.Um.forEach((i=>{i.setIdleNotifier(t)}))}}var Te=e(3716),Ce=e(8659);const ke=[{numberOfRequestsThreshold:10,pacing:15},{numberOfRequestsThreshold:11,pacing:15},{numberOfRequestsThreshold:12,pacing:30},{numberOfRequestsThreshold:13,pacing:30},{numberOfRequestsThreshold:14,pacing:30},{numberOfRequestsThreshold:15,pacing:60}];var Ee=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let Me=class{constructor(){this.Gm=new Map}getThrottledLineItemPacing(t){const i=this.Gm.get(t);if((0,K.$K)(i))return i.pacing}updateLineItemResponse(t,i){if(!(0,K.QM)(t.advertiserLineItemId))return;const e=this.Gm.get(t.advertiserLineItemId),s=(null==e?void 0:e.noBidsRequestCount)||0,n={protoLineItem:t,noBidsRequestCount:0===i?s+1:0,pacing:(null==e?void 0:e.originalPacing)||0,originalPacing:(null==e?void 0:e.originalPacing)||0};!(0,K.$K)(e)&&t.timeBetweenRequests&&(n.originalPacing=t.timeBetweenRequests),n.pacing=this.Wm(n),this.Gm.set(t.advertiserLineItemId,n)}Wm(t){const i=ke,e=i[0].numberOfRequestsThreshold;if(t.noBidsRequestCount<e)return t.originalPacing;const s=i[i.length-1].numberOfRequestsThreshold;if(t.noBidsRequestCount>=s)return i[i.length-1].pacing;const n=i.find((i=>i.numberOfRequestsThreshold===t.noBidsRequestCount));return(null==n?void 0:n.pacing)||t.originalPacing}};Me=Ee([(0,Ce.b2)(),(0,Ce.Yn)(Ce.Fw.ContainerScoped)],Me);e(7129);var Le=e(5742),Re=e(8395),Be=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class Oe{constructor(t,i){this.settings=t,this.su=i,this.Xm=new Map,this.Ui=[],this.Qm=!1,this.Jm=new s.x,this.Ym=new s.x,this.nd=new s.x,this.Zm=new s.x,this.tg=!1,this.ig=()=>{const t=this.eg();if(t)return this.Jm.next(t.lineItemList),this.sg(t.lineItemList,t.state).then((()=>{this.Ym.next(t.lineItemList),this.ng()})).catch((()=>{this.Ym.next(t.lineItemList),this.ng()}));this.settings.auctionManager.onNothingToCall()},this.rg=d.h.getGlobalContainer().resolve(vt.l),this.Ui.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe((()=>{this.hg()})),this.settings.adSelector.getBidEvents(Te.S.ON_BID_LOADING).subscribe((()=>{this.hg()})),this.settings.adSelector.getBidEvents(Te.S.ON_BID_LOADING_CONSUMED).subscribe((()=>{this.hg()})),this.settings.adSelector.getBidEvents(Te.S.ON_BID_LOADED_CONSUMED).subscribe((()=>{this.hg()})),this.settings.adxLastLookService.onForceCallAdxLastLook.subscribe((({adxLineItem:t,state:i})=>{this.ag(t,i).finally((()=>{this.Ym.next([t])}))}))),this.cg=new _e(this.ig,5),this.dg=new be.H1(this.settings.generalRepository,this.settings.app.services.UserManagerService);const e=d.h.getGlobalContainer().resolve(Re.f),n=d.h.getSessionChildContainer(this.settings.app.config.sessionId).resolve(Me);this.ug=new Ae({globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,timerService:e,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,yoScoreCalculator:this.settings.yoScoreCalculator,urlSuffixerService:this.settings.app.services.UrlSuffixerService,interactionService:this.settings.app.services.InteractionService,standaloneService:this.settings.app.services.StandaloneService,sessionId:this.settings.app.config.sessionId,pageUrl:this.settings.app.config.pageUrl,pageDomain:this.settings.app.config.pageDomain,adContainerMap:this.settings.adContainerMap,shouldPauseAdWhenFinished:this.settings.pauseAdWhenFinished,shouldLoopAdWhenFinished:this.settings.loopAdWhenFinished,isInApp:this.settings.app.config.isInApp,canUseExternalAdService:this.settings.app.config.canUseExternalAdService,adEvents:this.su,adMacroReplacer:this.settings.adMacroReplacer,imaVastUrlBuilderService:this.dg}),this.settings.adSelector.hasAggregatorType(dt.t.Rtb)&&this.Xm.set(dt.t.Rtb,{auctionPending:!1,caller:new Mt(this.settings.playerData.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.generalRepository,this.settings.adRequestGatekeeper,this.settings.lineItemAbTestInformation,n,this.settings.callingValidationAggregator,this.settings.assertiveYieldService)}),this.settings.adSelector.hasAggregatorType(dt.t.HeaderBidder)&&this.Xm.set(dt.t.HeaderBidder,{auctionPending:!1,caller:new Li(this.settings.playerData,this.settings.schainSettings,this.settings.app,this.settings.appSettings,this.settings.skipAdSettings)}),this.settings.adSelector.hasAggregatorType(dt.t.Tam)&&this.Xm.set(dt.t.Tam,{auctionPending:!1,caller:new qi(this.settings.app,this.settings.amazonSlotId,this.settings.generalRepository)}),this.cg.setAllThreadsIdleNotifier((()=>{this.settings.lineItemServices.lineItemServicesTimer.start()}))}get onLineItemsRequestStart(){return this.Jm.asObservable()}get onLineItemsRequestEnd(){return this.Ym.asObservable()}get onBid(){return this.nd.asObservable()}get onFirstAggregatedBatchFinished(){return this.Zm.asObservable()}pg(){return Be(this,void 0,void 0,(function*(){return this.settings.standaloneService.standaloneLineItemsWithBids.forEach((t=>{const{lineItem:i,bids:e}=t,s=this.settings.adSelector.geLineItemById(i.advertiserLineItemId);e.forEach((t=>Be(this,void 0,void 0,(function*(){try{yield this.fg(t,s)}catch(t){(0,Y.nF)({message:"AdManager_AdCallerController_injectStandaloneBidsIfPossible",level:Y.D_.INFO},{throttle:3,shouldSendMaxLog:!1})}}))))})),Promise.resolve()}))}fg(t,i){return Be(this,void 0,void 0,(function*(){const{currentState:e,predictedState:s}=this.vg.stateSettings,n=e||s,r=pt.parseAggregatorBidResponse(t,i,n),{lineItem:o,state:a}=r;return this.settings.callingValidationAggregator.registerRequestForLineItem(o,this.gg()),this.ag(o,a,r)}))}call(t){this.vg=t,this.cg.setNumberOfThreads(t.maxParallelCalls),this.Qm=!0,!this.tg&&(0,Tt.BZ)(this.settings.standaloneService.standaloneLineItemsWithBids)?(this.tg=!0,this.pg().then((()=>{this.hg()}))):this.hg()}stop(){this.Qm=!1,this.cg.stop()}setMacros(t){const i=this.Xm.get(dt.t.HeaderBidder);i&&i.caller.setMacros(t)}destroy(){this.stop(),this.settings.callingValidationAggregator.destroy(),(0,l.i)(this.Ui),this.Xm.forEach((t=>{var i,e;null===(e=(i=t.caller).destroy)||void 0===e||e.call(i)}))}ng(){let t=!0;this.Xm.forEach((i=>{i.auctionPending&&(t=!1)})),t&&this.Zm.next()}hg(){this.Qm&&this.cg.start()}eg(){const t=this.vg.stateSettings.currentState||this.vg.stateSettings.predictedState;if(!t)return void(0,Y.nF)({message:"AdCallerController_no_state",level:Y.D_.INFO,sessionId:this.settings.sessionId},{throttle:10,shouldSendMaxLog:!1});const i=this.settings.adSelector.getAllCallableLineItems(t),e=this.settings.adSelector.getBestCallableLineItem(i,t);return e||void 0}sg(t,i){return t[0].hasAggregator?this.yg(t,i):this.ag(t[0],i)}bg(t,i,e,s){if((0,K.$K)(s))return s;const n=t.protoLineItem.isAdxLookup?this.settings.adxLastLookService.getAdxLastLookPrice():void 0,r=this.Pg(t),o=new at.oO(r),a=new ut.Mz,h={lineItem:t,vastTracker:a,requestMetadata:o,state:i,adxMinPrice:n,plcmt:e};return(0,ut.E3)(t.protoLineItem.trackers,a),h}ag(t,i,e){return Be(this,void 0,void 0,(function*(){const s=Date.now(),r=this.bg(t,i,this.settings.playerData.plcmt,e);(0,K.$K)(e)||this.wg(t,i),(0,ft.gx)(t,r.requestMetadata,mt.f.Pending);let o=null;try{o=yield this.ug.fetchBid(r),this.Ag(o,s)}catch(e){const o=null==e?void 0:e.vastErrorCode,a=null==e?void 0:e.vastErrorTrackers,h=zi[e.message]?zi[e.message]:n.ConnatixNoBidReasonEnum.RequestException;this.Sg(i,t,h,r.requestMetadata,r.vastTracker,Date.now()-s,Hi.f[e.message],o,a)}}))}Pg(t){var i;const e=!!this.rg.getAdxId(null===(i=t.protoLineItem.protoIntentiqResponseData)||void 0===i?void 0:i.vendorName);let s={requestNumber:t.historicalMetrics.requestNumber,hasIIQLookup:e};return t.protoLineItem.advertiserAccountId===fe.Ro&&!t.protoLineItem.isAdxLookup&&(s=t.adxFloorPrice?Object.assign(Object.assign({},s),{floorPriceInformation:{adxPredictedFloorPrice:(0,gt.RC)(t.adxFloorPrice.adxData.predictedPriceObfuscated)},requestedFloorPrice:t.adxFloorPrice.price}):Object.assign(Object.assign({},s),{requestedFloorPrice:t.protoLineItem.floorPrice})),s}wg(t,i){this.settings.callingValidationAggregator.registerRequestForLineItem(t,this.gg(i)),t.historicalMetrics.requestNumber++}Ag(t,i){try{this._g(t,Date.now()-i)}catch(t){(0,Y.nF)({message:"AdManager_AdCallerController_handleBidFactoryRequestSuccess",exception:t.message,callStack:t.stack,level:Y.D_.CRITICAL,sessionId:this.settings.sessionId},{throttle:5})}}yg(t,i){const e=this.Xm.get(ct.T[t[0].protoLineItem.creativeType]);t.forEach((t=>t.aggregators.add(e.caller))),e.auctionPending=!0;const{maxAdDuration:s,remainingAdDuration:n}=i.adBreakState,r={lineItemRequestDataList:t.map((t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t,this.gg())}))),callingState:i,maxAdDuration:(0,X.S)(s,n),maxBidPrice:this.settings.adSelector.getBestAllowedBidPrice(i)};return this.Tg(e,r,t,i)}Tg(t,i,e,s){return t.caller.request(i).then((i=>{i.bids.length||i.noBids.length||e.forEach((t=>{this.wg(t)})),e.forEach((i=>{i.aggregators.delete(t.caller),i.historicalMetrics.requestNumber++})),i.noBids.forEach((t=>{this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.gg()),this.Sg(s,t.lineItem,t.reason,t.requestMetadata)}));const n=i.bids.map((t=>(this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.gg()),this.ag(t.lineItem,t.state,t))));return Promise.all(n)})).finally((()=>{t.auctionPending=!1}))}_g(t,i){if(t.shouldBeDiscarded)return;const e=t.settings.adManagerLineItem,s=t.settings.requestMetadata,n=t.settings.requestMetadata.data.floorPriceInformation,r=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup);let o={shouldTrackBid:!t.settings.requestMetadata.data.requestTrackingHandledByServer,advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,impressionTrackers:t.settings.vastTracker.adImpression,identityProviderTrackingData:r};o.shouldTrackBid&&(o=Object.assign(Object.assign({},o),{requestedFloorPrice:s.data.requestedFloorPrice,requestsCount:s.data.requestNumber,isUserSynced:s.data.isUserSynced,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpentMs:i,rtbDspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbADomain:s.data.rtbAdomain,rtbCreativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,floorPriceInformation:n?$.wE.fromProtoFloorPriceInformation(n):void 0,hasLexiconEnvelopeBeenUsed:s.data.hasLexiconEnvelopeBeenUsed,dynamicElkFields:{1:`${It.n.getConnectionType(this.settings.app.config.deviceType)}`,2:Le.f.getCidForElkTracking()}})),this.su.adBid.next(o),this.settings.adRequestGatekeeper.addBid(e.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),Wi.l.isBidTargetingAllowedEverInSession(t,t.settings.callingState)?((0,ft.gx)(e,s,mt.f.Success),this.nd.next(t)):this.settings.auctionInfoLogging.bidIsNotWinnableEverInSession(t)}Sg(t,i,e,s,n,r,o,a,h=[]){const c=[...(null==n?void 0:n.adError)||[],...h];(0,Tt.BZ)(c)&&ut.Mz.trackError(c,this.settings.adMacroReplacer,i.protoLineItem,t,this.settings.playerData.plcmt,a);const d=this.rg.getTrackingData(i,s.data.hasIIQLookup);if((0,ft.gx)(i,s,mt.f.Fail),!s.data.requestTrackingHandledByServer){const t=s.data.floorPriceInformation,n={advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:$.EN.fromProtoPrebidPartnerReason(s.data.partnerReason),requestedFloorPrice:s.data.requestedFloorPrice,requestsCount:s.data.requestNumber,isUserSynced:s.data.isUserSynced,prebidJsBidderName:s.data.prebidJsBidderName,playerReason:$.EN.fromProtoPrebidReason(e),timeSpentMs:r,floorPriceInformation:t?$.wE.fromProtoFloorPriceInformation(t):void 0,hasLexiconEnvelopeBeenUsed:s.data.hasLexiconEnvelopeBeenUsed,dynamicElkFields:{1:`${It.n.getConnectionType(this.settings.app.config.deviceType)}`,2:Le.f.getCidForElkTracking()},identityProviderTrackingData:d};this.su.adPrebid.next(n)}this.settings.adRequestGatekeeper.addPrebid(i.protoLineItem.advertiserLineItemId)}gg(t){return(t||this.vg.stateSettings.currentState||this.vg.stateSettings.predictedState).adOpportunity.id}}class De{constructor(){this.xg=Date.now(),this.kg={advertiser:{}}}addPrebid(t){(0,K.$K)(this.kg.advertiser[t])||this.Cg(t),this.kg.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){(0,K.$K)(this.kg.advertiser[t])||this.Cg(t),this.kg.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){(0,K.$K)(this.kg.advertiser[t])||this.Cg(t),this.kg.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.Mg(i,3)&&this.Bg(t,i,5)<-.5&&this.Rg(t,i,3)>=11.5&&this.Og(t,i,10,.1)<.35)}Mg(t,i){return t-this.xg>=i*ge.uD}Bg(t,i,e){const s=this.kg.advertiser[t];if(!(0,K.$K)(s))return-1;const n=this.Dg(s.impressionRevenueList,i,e).map((t=>t.obfuscatedPrice));let r=0;return(0,Tt.BZ)(n)&&(r=n.reduce(((t,i)=>t+(0,gt.RC)(i)))),this.Vg(r)}Rg(t,i,e){const s=this.kg.advertiser[t];if(!(0,K.$K)(s))return-1;const n=this.Dg(s.prebidData,i,e).length;return this.Vg(n)}Og(t,i,e,s){const n=this.kg.advertiser[t];if(!(0,K.$K)(n))return-1;const r=this.Dg(n.impressionRevenueList,i,e).map((t=>t.floorPrice)),o=this.Fg(r,s);return this.Vg(o)}Dg(t,i,e){const s=i-ge.s_,n=i-e*ge.uD,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}Vg(t){return 0===t?-1:t}Cg(t){this.kg.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}Fg(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort(((t,i)=>t-i))).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class Ne{constructor(){this.jg=[]}canCall(t,i){return this.jg.every((e=>e.canCall(t,i)))}registerRequestForLineItem(t,i){return this.jg.forEach((e=>{e.registerRequestForLineItem(t,i)})),this}registerImpressionForLineItem(t,i){return this.jg.forEach((e=>{e.registerImpressionForLineItem(t,i)})),this}registerUnfulfilledRequest(t,i){return this.jg.forEach((e=>{e.registerUnfulfilledRequest(t,i)})),this}registerCallingValidator(t){return this.jg.push(t),this}registerCallingValidators(t){return t.forEach((t=>{this.registerCallingValidator(t)})),this}destroy(){this.jg.forEach((t=>{t.destroy()}))}}class Fe{resetCapsBasedOnExternalEvent(t){const i=this.kt.keys();for(const e of i)this.Ug(e,t)&&this.$g(e,$e)}resetCapsOnLineItemMetadataUpdate(t){this.$g(t,$e)}Ug(t,i){return t.protoLineItem.resetCapType===i}qg(t){return this.Ug(t,n.ProtoResetCapTypeEnum.TimeCapping)&&this.Hg(t)>0}}const $e="uncategorized";class Ve{constructor(t){this.zg=t,this.Wg=new Map}setNumberOfImpressions({value:t,categoryId:i}){(0,K.$K)(i)&&this.zg===n.ProtoResetCapTypeEnum.OpportunityCapping||(i=$e),this.Wg.set(i,t)}getNumberOfImpressions({categoryId:t}){return(0,K.$K)(t)&&this.zg===n.ProtoResetCapTypeEnum.OpportunityCapping||(t=$e),this.Wg.get(t)||0}}class je extends Fe{constructor(t=Date.now()){super(),this.Xg=t,this.kt=new Map}canCall(t,i){this.Jg(t);const e=this.kt.get(t);return void 0===e||(0===t.protoLineItem.impressionCap||e.getNumberOfImpressions({categoryId:i})<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t,i){let e=this.kt.get(t);return void 0===e&&(this.kt.set(t,new Ve(t.protoLineItem.resetCapType)),e=this.kt.get(t),this.qg(t)&&(e.nextImpressionCapResetTimestamp=this.Yg(this.Hg(t)))),e.setNumberOfImpressions({value:e.getNumberOfImpressions({categoryId:i})+1,categoryId:i}),this}registerRequestForLineItem(t,i){return this}registerUnfulfilledRequest(t,i){return this}destroy(){this.kt.clear()}$g(t,i){var e;null===(e=this.kt.get(t))||void 0===e||e.setNumberOfImpressions({value:0,categoryId:i})}Hg(t){return t.protoLineItem.resetImpressionsCapTime*ge.s_}Jg(t,i=Date.now()){if(!this.qg(t))return;const e=this.kt.get(t);void 0!==e&&this.Kg(t,i)&&(e.setNumberOfImpressions({value:0}),e.nextImpressionCapResetTimestamp=this.Yg(this.Hg(t),i))}Kg(t,i){return i>=this.kt.get(t).nextImpressionCapResetTimestamp}Yg(t,i=Date.now()){const e=Math.ceil((i-this.Xg)/t)*t;return this.Xg+e}}class Ue{constructor(t){this.zg=t,this.Zg=new Map}setNumberOfRequests({value:t,categoryId:i}){(0,K.$K)(i)&&this.zg===n.ProtoResetCapTypeEnum.OpportunityCapping||(i=$e),this.Zg.set(i,t)}getNumberOfRequests({categoryId:t}){return(0,K.$K)(t)&&this.zg===n.ProtoResetCapTypeEnum.OpportunityCapping||(t=$e),this.Zg.get(t)||0}}class qe extends Fe{constructor(t=Date.now()){super(),this.Xg=t,this.allowResetOnTime=!0,this.kt=new Map}canCall(t,i){this.Jg(t);const e=this.kt.get(t);return void 0===e||(0===t.protoLineItem.requestCap||e.getNumberOfRequests({categoryId:i})<t.protoLineItem.requestCap)}registerRequestForLineItem(t,i,e=Date.now()){let s=this.kt.get(t);return void 0===s&&(this.kt.set(t,new Ue(t.protoLineItem.resetCapType)),s=this.kt.get(t),this.qg(t)&&(s.nextRequestCapResetTimestamp=this.Yg(this.Hg(t)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:i})+1,categoryId:i}),this}registerImpressionForLineItem(t){return this}registerUnfulfilledRequest(t,i){return this}getAvailableRequestsForLineItem(t,i){const e=this.kt.get(t);return void 0===e?t.protoLineItem.requestCap:t.protoLineItem.requestCap-e.getNumberOfRequests({categoryId:i})}restoreOneCapForLineItem(t,i){if(t.protoLineItem.ignoreFilledRequests){const e=this.kt.get(t);if(void 0===e)return;const s=e.getNumberOfRequests({categoryId:i});s>0&&e.setNumberOfRequests({value:s-1,categoryId:i})}}destroy(){this.kt.clear()}$g(t,i){var e;null===(e=this.kt.get(t))||void 0===e||e.setNumberOfRequests({value:0,categoryId:i})}Hg(t){return t.protoLineItem.resetRequestsCapTime*ge.s_}Jg(t,i=Date.now()){if(!this.qg(t))return;const e=this.kt.get(t);void 0!==e&&this.Kg(t,i)&&(e.setNumberOfRequests({value:0}),e.nextRequestCapResetTimestamp=this.Yg(this.Hg(t),i))}Kg(t,i){return i>=this.kt.get(t).nextRequestCapResetTimestamp&&this.allowResetOnTime}Yg(t,i=Date.now()){const e=Math.ceil((i-this.Xg)/t)*t;return this.Xg+e}}class He{constructor(){this.kt=new Map}registerRequestForLineItem(t,i){return this.ty(t,i),this}registerImpressionForLineItem(t,i){return this}registerUnfulfilledRequest(t,i){return this.ty(t,i),this}canCall(t,i,e=Date.now()){const s=this.kt.get(t.timeBetweenRequestsIdentifier);if(void 0===s||void 0===s.lastRequestTimestamp)return!0;if(0===t.timeBetweenRequests)return!0;if(e>=s.lastRequestTimestamp+t.timeBetweenRequests*ge.s_)return!0;return!(s.categoryId===i||t.protoLineItem.resetCapType!==n.ProtoResetCapTypeEnum.OpportunityCapping)}destroy(){this.kt.clear()}ty(t,i){let e=this.kt.get(t.timeBetweenRequestsIdentifier);void 0===e&&(e={},this.kt.set(t.timeBetweenRequestsIdentifier,e)),e.lastRequestTimestamp=Date.now(),e.categoryId=i}}class ze{constructor(t,i,e,r){this.iy=t,this.ey=i,this.sy=e,this.la=r,this.ny=new s.x,this.oy=new Map,this.hy=[],this.forceTriggerUpdateState=()=>{this.hy.forEach((t=>this.ly(t)))},this.ly=(t,i)=>{this.oy.set(t,this.uy(this.ey.get(t),i))},this.py=t=>{this.vy([n.ProtoAdType.Video],t)},this.my=t=>{this.vy([n.ProtoAdType.Overlay],t)},this.gy=t=>{this.vy([n.ProtoAdType.Nonlinear],t)},this.yy=()=>{this.vy(this.hy)},this.vy=(t,i)=>{t.forEach((t=>this.ly(t,i))),this.ny.next()},this.by={[n.ProtoAdType.Video]:this.py,[n.ProtoAdType.Overlay]:this.my,[n.ProtoAdType.Nonlinear]:this.gy},this.hy=[...this.ey.keys()],this.hy.forEach((t=>this.ly(t))),this.Py()}get onContainerStateUpdate(){return this.ny.asObservable()}getContainerMap(){return this.ey}getContainerStateMap(){return this.oy}getMainContainer(){return this.ey.get(this.iy)}getMainContainerState(){return this.getContainerStateMap().get(this.iy)}destroy(){this.ey.forEach(((t,i)=>{this.sy.off(t,this.yy),this.la.off(t,this.by[i])}))}Py(){this.ey.forEach(((t,i)=>{this.sy.on(t,this.yy),this.la.on(t,this.by[i],{threshold:U.fJ})}))}uy(t,i){let e=i;return void 0===e&&(e=this.la.check({element:t,threshold:U.fJ})),{width:t.clientWidth,height:t.clientHeight,viewability:e}}}var We,Ge=e(7689),Xe=e(3141),Qe=e(3816),Je=e(1310);class Ye{constructor(t,i){this.Tr=t,this.su=i,this.Ay=!1,this.Ja=void 0,this.Sy=!1,this._y=[],this.Ui=[],this.Ty=!1,this.xy=new s.x,this.ky=new s.x,this.Cy=-1,this.rg=d.h.getGlobalContainer().resolve(vt.l),this.Ui.push(this.Tr.adSelector.getBidEvents(Te.S.ON_BID_LOADED).subscribe((()=>{this.Ey()})),this.Tr.adSelector.getBidEvents(Te.S.ON_BID_IN_IMPRESSION).subscribe((t=>{try{this.My(t)}catch(t){(0,Y.nF)({message:"AdImpressionerController_handleAdImpression_error",level:Y.D_.INFO,exception:(0,Ct.W$)(t).message,sessionId:this.Tr.sessionId},{pacing:5})}})),this.Tr.adSelector.getBidEvents(Te.S.ON_BID_LOADED_CONSUMED).subscribe((t=>{t.started&&t.status!==r.wy.INVALIDATED&&this.Ly(t)})),this.Tr.impressionCapsTimer.onTimer().subscribe((()=>{this.Ey()})))}get onAdSelected(){return this.xy.asObservable()}get onAdFinished(){return this.ky.asObservable()}start(t){this.By=t,this.Ay=!0,this.Ey()}stop(){this.Ay=!1}destroy(){this.stop(),(0,l.i)(this.Ui),this.Ja&&this.Ry()}Ey(){var t;if(!this.Ay||this.Sy)return;const i=this.Tr.adSelector.getBestBidAllowedByStatus([r.wy.LOADED],this.By);if(!i)return;const e=this.Ja&&Wi.p.getSelectionScore(this.Ja)<Wi.p.getSelectionScore(i);this.Ja&&this.Tr.removeBidIfHigherYoScore&&e?(this.Ry(),null===(t=this.Ja)||void 0===t||t.stopAd("removeStartedBid"),this.Oy(i)):this.Ja||this.Oy(i)}Oy(t){this.Tr.adxLastLookService.callAdxLookup({state:this.By,startingBid:t}),this.Ja=t,this.Tr.internalAuctionSnapshot.takeSnapshot(this.Ja,this.By,this.By.adOpportunity.timestamp),this.xy.next(t),this.Dy(),this.Ny(t),t.startAd()}Ry(){this.Ja&&(this.Ja=void 0,(0,l.i)(this._y),this._y=[])}Dy(){const t=this.By.adOpportunity;if(this.Vy!==t)return this.Vy=t,void(this.Cy=0);this.Cy++}My(t){this.Sy&&((0,Y.nF)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,level:Y.D_.CRITICAL,sessionId:this.Tr.sessionId},{throttle:1e3,extraLogsPercentage:5}),(0,Y.nF)({message:"StartedBidInImpression_bidStatusHistory",exception:`${t.adMediaType}_advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}_vastAd:${JSON.stringify(t.settings.vastAd)}`,callStack:`${JSON.stringify(t.bidStatusHistory)}`,level:Y.D_.INFO,sessionId:this.Tr.sessionId},{throttle:1e3})),this.Sy=!0,this.Ty=this.Fy(t.skipOffset,t.getAdDuration()),this.Tr.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.Tr.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem,this.By.adOpportunity.id),this.Tr.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem,this.By.adOpportunity.id);const i=this.Tr.auctionInfoLogging.onImpression(t);try{this.jy(t,i)}catch(t){(0,Y.nF)({message:"AdImpressionerController_handleAdImpressionTracking_error",level:Y.D_.INFO,exception:(0,Ct.W$)(t).message,sessionId:this.Tr.sessionId},{pacing:5})}}Uy(t){if(!this.rg.isLineItemEligibleForReporting(t.settings.adManagerLineItem)||!this.rg.canUseWinUrl())return;const{protoIntentiqResponseData:i,infrastructureFee:e}=t.settings.adManagerLineItem.protoLineItem,s=null==i?void 0:i.vendorName;(0,K.QM)(s)||(0,Y.nF)({message:"AdImpressionerController_triggerIntentiqWin",level:Y.D_.CRITICAL,sessionId:this.Tr.sessionId});const n=e||0,r=t.price-n/100*t.price;this.rg.reportExternalWin({biddingPlatformId:Xe.T.OpenRTB,partnerAuctionId:t.settings.callingState.adOpportunity.id,bidderCode:s,cpm:r,currency:"USD",placementId:t.settings.bidSlotId})}Ly(t){this.$y(t),this.Tr.loopAdWhenFinished?t.resumeAd():this.Tr.pauseAdWhenFinished?t.pauseAd():(this.ky.next(t),this.Ry(),this.Ey())}$y(t){if(this.Sy)return void(this.Sy=!1);if(!t.shouldTrackPostbid)return;const i=this.Tr.auctionInfoLogging.onPostBid(t);this.Hy(t,i)}zy(){const t=this.Tr.internalAuctionSnapshot.lastSnapshot,i=null==t?void 0:t.firstLoser,e=null==t?void 0:t.allLoserStatusInfo;let s,n,r;return(0,K.$K)(i)&&(s=i.lineItem,r=i.isIma,n=i.status),{firstLoser:i,bidStatus:n,highestLosingBidLineItem:s,allLoserStatusInfo:e,firstLoserIsIma:r}}jy(t,i){var e,s,n,r,o,a,h,c,d,l;const{adBreakState:u}=this.By,p=(0,K.hj)((0,st.oK)(t.getAdDuration(),2))?(0,st.oK)(t.getAdDuration(),2):0,f=(0,K.hj)((0,st.oK)(t.declaredDurationInSeconds,2))?(0,st.oK)(t.declaredDurationInSeconds,2):0,m=(0,Je.H8)(t.createdTimestamp),g=this.By.adContainerState.get(t.settings.adManagerLineItem.protoLineItem.adType).viewability,v=t.getAdMediaSize();let y;if((0,K.$K)(this.Tr.internalAuctionSnapshot.lastSnapshot)){const{winnerDemandType:t,firstLoser:i,firstOpenMarketLoser:e}=this.Tr.internalAuctionSnapshot.lastSnapshot;y={winnerDemandType:t,firstLoser:i,firstOpenMarketLoser:e}}else(0,Y.nF)({message:"AdImpressionerController: No internal auction snapshot found",level:Y.D_.WARN,sessionId:this.Tr.sessionId},{throttle:1,shouldSendMaxLog:!1});const{floorPriceInformation:b,requestedFloorPrice:I,discount:P,liveRampType:w,serverBillingNoticeUrls:S}=t.settings.requestMetadata.data,A=this.zy(),x=(0,K.$K)(A.firstLoser)?100*(t.price-A.firstLoser.customClientPrice):null,_=A.allLoserStatusInfo;let T,C;(0,K.$K)(this.Tr.internalAuctionSnapshot.lastSnapshot)&&(T=this.Tr.internalAuctionSnapshot.lastSnapshot.auctionEndType,C=this.Tr.internalAuctionSnapshot.lastSnapshot.deltaTimestampAdStartAdOpportunity);let k=t.settings.cpm;t.settings.adManagerLineItem.adxFloorPrice&&(k=I),t.settings.adManagerLineItem.protoLineItem.isAdxLookup&&(k=t.price);const E=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup),M=this.Tr.assertiveYieldService.getAssertiveYieldOnImpression(t),L=this.Tr.assertiveYieldService.getAssertiveYieldProbability(t),R=null===(e=this.Tr.userManagerService)||void 0===e?void 0:e.lotamePanorama,B={adPodSlotPosition:u.adPodSlotIndex,adSourceType:$.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:k,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,isUserSynced:t.settings.requestMetadata.data.isUserSynced,timeSpentMs:t.startingTimeMs,vastMediaType:t.adMediaType,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime,startAdToImpressionTimeMs:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.startAdToImpressionTime,impressionDurationSeconds:p,declaredDurationSeconds:f,isExplorationMode:this.Tr.explorationMode,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:b?$.wE.fromProtoFloorPriceInformation(b):void 0,adMediaFileWidth:v.width,adMediaFileHeight:v.height,bidElapsedTimeSeconds:m,adBreakType:$.EN.fromProtoAdBreakType(u.adBreakType),liveRampType:w?$.EN.fromProtoLiveRamp(w):void 0,internalAuctionInformation:y?$.W1.fromProtoInternalAuction(y):void 0,auctionInformation:i?$.Ti.fromProtoAuctionInformation(i):void 0,hasLexiconEnvelopeBeenUsed:t.settings.requestMetadata.data.hasLexiconEnvelopeBeenUsed,dynamicElkFields:{1:t.settings.requestMetadata.data.rtbRequestId,2:t.settings.requestMetadata.data.auctionBidId,4:`${g}`,5:`${t.settings.adManagerLineItem.protoLineItem.viewability}`,6:`${(0,K.$K)(null===(r=A.highestLosingBidLineItem)||void 0===r?void 0:r.lineItemPriority)?null===(o=A.highestLosingBidLineItem)||void 0===o?void 0:o.lineItemPriority:0}`,7:`${(0,K.$K)(A.bidStatus)?A.bidStatus:null}`,8:`${(0,K.$K)(t.price)?t.price:0}`,9:`${(0,K.$K)(null===(a=A.firstLoser)||void 0===a?void 0:a.customClientPrice)?A.firstLoser.customClientPrice:0}`,11:`${T}`,10:`${(0,K.$K)(null===(h=A.firstLoser)||void 0===h?void 0:h.demandType)?null===(c=A.firstLoser)||void 0===c?void 0:c.demandType:0}`,12:(0,K.hj)(C)?`${C}`:"0",13:`${(0,K.$K)(_)?_.verifyingBidsInAuction:0}`,14:`${(0,K.$K)(_)?_.idleBidsInAuction:0}`,15:`${(0,K.$K)(_)?_.loadingBidsInAuction:0}`,16:`${(0,K.$K)(_)?_.loadedBidsInAuction:0}`,17:`${(0,K.$K)(this.Vy.id)?this.Vy.id:""}`,18:`${(0,K.$K)(null===(d=A.highestLosingBidLineItem)||void 0===d?void 0:d.creativeType)?null===(l=A.highestLosingBidLineItem)||void 0===l?void 0:l.creativeType:null}`,19:`${(0,K.$K)(A.firstLoserIsIma)?A.firstLoserIsIma:null}`,20:`${x}`,21:`${this.Cy}`,22:`${It.n.getConnectionType(this.Tr.deviceType)}`,23:Le.f.getCidForElkTracking(),27:`${(0,K.$K)(t.settings.adxFloorPrice)?t.settings.adxFloorPrice.index:-1}`},hasAdSkip:this.Ty,discount:P?Qe.d.fromProtoDiscount(P):void 0,serverBillingNoticeUrls:S,identityProviderTrackingData:E,assertiveYieldResult:M,assertiveYieldProbability:L,panorama:R};this.su.adImpression.next(B),this.Uy(t)}Hy(t,i){var e,s;const{adBreakState:n}=this.By,r=(0,Je.H8)(t.createdTimestamp),o=(0,K.$K)(i)?$.EN.fromProtoAuctionPostbidReason(this.Tr.auctionInfoLogging.getGeneralPostbidReason(t.errorReason)):void 0,{discount:a,liveRampType:h}=t.settings.requestMetadata.data,c=t.settings.requestMetadata.data.floorPriceInformation;let d,l;(0,K.$K)(this.Tr.internalAuctionSnapshot.lastSnapshot)&&(d=this.Tr.internalAuctionSnapshot.lastSnapshot.auctionEndType,l=this.Tr.internalAuctionSnapshot.lastSnapshot.deltaTimestampAdStartAdOpportunity);const u=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup),p=this.Tr.assertiveYieldService.getAssertiveYieldProbability(t),f=null===(e=this.Tr.userManagerService)||void 0===e?void 0:e.lotamePanorama,m={adPodSlotPosition:n.adPodSlotIndex,adSourceType:$.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,reason:t.errorReason,isBidLoaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,isUserSynced:t.settings.requestMetadata.data.isUserSynced,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,timeSpentMs:t.startingTimeMs,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:c?$.wE.fromProtoFloorPriceInformation(c):void 0,liveRampType:h?$.EN.fromProtoLiveRamp(h):void 0,bidElapsedTimeSeconds:r,adBreakType:$.EN.fromProtoAdBreakType(n.adBreakType),auctionInformation:i?$.Ti.fromProtoAuctionInformation(i):void 0,auctionReason:o,discount:a?Qe.d.fromProtoDiscount(a):void 0,hasLexiconEnvelopeBeenUsed:t.settings.requestMetadata.data.hasLexiconEnvelopeBeenUsed,identityProviderTrackingData:u,assertiveYieldProbability:p,dynamicElkFields:{1:`${d}`,2:(0,K.hj)(l)?`${l}`:"0",7:`${(0,K.$K)(this.Vy.id)?this.Vy.id:""}`,8:`${this.Cy}`,9:`${It.n.getConnectionType(this.Tr.deviceType)}`,10:Le.f.getCidForElkTracking()},panorama:f};this.su.adPostbid.next(m)}Ny(t){this._y.push(t.onVpaidEvent.subscribe((i=>{const e=(0,ut.Ko)(i.type,t.settings.vastTracker);!(0,Tt.BZ)(e)&&i.type===r.fI.AdImpression&&(t.adSourceType===n.ProtoAdsourceTypeEnum.Vpaid||t.adSourceType===n.ProtoAdsourceTypeEnum.VastMedia)&&(0,Y.nF)({message:"AdManager_AdImpressionController_tracker_impression_not_found",exception:`creativeId: ${t.creativeId}, advertiserLineItemId: ${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}`,level:Y.D_.CRITICAL,sessionId:this.Tr.sessionId},{shouldSendMaxLog:!1});let s;i.type===r.fI.AdError&&(s=i.payload.errorCode||ye.Oq.GeneralError),ut.Mz.track(e,this.Tr.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,this.Tr.plcmt,t.getTrackerSlot(),s)}))),this._y.push(t.onAdViewableImpression.subscribe((i=>{const{publisherLineItemId:e,advertiserLineItemId:s,rtbSeatId:n,dspId:r,rtbAdomain:o}=i,a=t.settings.requestMetadata.data.discount;this.su.adInView.next({publisherLineItemId:e,advertiserLineItemId:s,rtbSeatId:n,rtbDspId:r,adBreakType:$.EN.fromProtoAdBreakType(this.By.adBreakState.adBreakType),discount:a?Qe.d.fromProtoDiscount(a):void 0,hasSkipAd:this.Ty,rtbADomain:o}),ut.Mz.track(t.settings.vastTracker.adViewableImpression,this.Tr.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,this.Tr.plcmt)})))}Fy(t,i){if((0,K.hj)(t)&&t>=0)return!0;return(0,X.Xj)(i,this.Tr.skipAdSettings)}}!function(t){t[t.NoPrefetch=0]="NoPrefetch",t[t.StartSessionPrefetch=1]="StartSessionPrefetch",t[t.MidSessionPrefetch=2]="MidSessionPrefetch"}(We||(We={}));var Ke=e(6666);class Ze{constructor(t,i){this.Bu=t,this.cl=i,this.Gy=!1,this.Wy=!1,this.Xy=!1}get predictMode(){return this.Gy}get adFetchingAllowed(){return this.Wy}get impressionsAllowed(){return this.Xy}get currentAdPlayerState(){return this.Qy}get predictedAdPlayerState(){return this.Jy}partialStateUpdate(t){this.Qy&&(this.Qy=Object.assign(Object.assign({},this.Qy),t)),this.Jy&&(this.Jy=Object.assign(Object.assign({},this.Jy),t))}getCurrentAdManagerState(t=!1){let i=this.Qy;!this.currentAdPlayerState&&t&&(i=this.Jy);const e=this.Bu.getContainerStateMap();return this.getAdManagerState(i,e)}getPredictedAdManagerState(){const t=this.Jy,i=this.Yy();return this.getAdManagerState(t,i)}getAdManagerState(t,i){if(!t)return;const{width:e,height:s,viewability:n}=this.Bu.getMainContainerState(),{clickToPlay:r,mediaMetadata:o,sound:a,adBreakState:h,linearAdOpportunity:c,playerOrientation:d,inFloating:l,queryJsTargeting:u}=t;return{width:e,height:s,viewability:n,clickToPlay:r,media:o,sound:!!a,soundVolume:a,adContainerState:i,adBreakState:h,adOpportunity:c,playerOrientation:d,page:{insights:Ke.k.pageInsights},inFloating:l,auctionEndType:this.Ky,isPageInFocus:this.cl.isPageInFocus,queryJsTargeting:u}}Yy(){var t;let i;return(null===(t=this.Jy)||void 0===t?void 0:t.prefetchStateType)===We.StartSessionPrefetch?(i=new Map,this.Bu.getContainerStateMap().forEach(((t,e)=>{i.set(e,Object.assign(Object.assign({},t),{viewability:!0}))}))):i=this.Bu.getContainerStateMap(),i}getCallSettings(){return{maxParallelCalls:et.O.PARALLEL_CALLS_DEFAULT,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}getWinSettings(){return{desiredBitRate:et.O.DEFAULT_DESIRED_BITRATE,maxParallelWins:et.O.PARALLEL_WINS_DEFAULT,vastViewMode:this.currentAdPlayerState?this.currentAdPlayerState.vastViewMode:this.predictedAdPlayerState.vastViewMode,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}enableImpression(t){this.Gy=!1,this.Qy=t,this.Jy||(this.Jy=this.Qy),this.Wy=!0}disableImpression(){this.Xy=!1,this.Wy=!1}enablePredict(t,i){this.Qy=null,this.Gy=!0,this.Jy=t,this.Jy.prefetchStateType=i,this.Wy=!0}auctionEnd(t){this.Ky=t,this.Xy=!0}auctionStopCalling(){this.predictMode&&(this.Wy=!1)}}var ts=e(3775);const is="cnx-ad-slot";class es{constructor(t,i,e){this.parentContainer=t,this.nr=i,this.us=e,this.isImaSlot=!1,this.isAdxLookupSlot=!1,this.slotsContainer=this.nr.createElementByString('<div class= "cnx-ad-bid-slot"></div>');const s=this.nr.createElementByString(`<div class="${is}"></div>`);this.adSlot=this.nr.createElementByString(`<div class="${is}"></div>`),this.videoSlot=this.nr.createElementByString(`<video class="${is} cnx-ad-video-slot"></video>`);const n=_t.n.defaultVideoPosterURL;(0,K.QM)(n)&&this.videoSlot.setAttribute("poster",n),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.videoSlot.setAttribute("aria-label","Advertisement"),this.slotsContainer.setAttribute("aria-hidden","true"),s.appendChild(this.videoSlot),s.appendChild(this.adSlot),this.slotsContainer.appendChild(s),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}Zy(){this.parentContainer.querySelectorAll(`[${ts.b.GarbageCollector}]`).forEach((t=>{(0,Q.bX)(t)}))}sanitize(){this.Zy()}}class ss extends es{constructor(){super(...arguments),this.isImaSlot=!0,this.isAdxLookupSlot=!1,this.tb=!1,this.ib={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return be.X3.fetchImaSdk(window,!0,this.us).then((t=>this.eb(t)))}destroy(){this.ib.imaAdsLoader&&this.ib.imaAdsLoader.destroy(),this.ib.imaAdDisplayContainer&&this.ib.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.ib.imaAdsLoader.contentComplete(),super.sanitize()}eb(t){if(this.tb)return this.ib;t.settings.setDisableCustomPlaybackForIOS10Plus(!0);const i=this.sb(t),e=this.nb(t,i);return this.ib={imaSdk:t,imaAdDisplayContainer:i,imaAdsLoader:e},this.tb=!0,this.ib}sb(t){const i=new t.AdDisplayContainer(this.adSlot,this.videoSlot);return i.initialize(),i}nb(t,i){const e=new t.AdsLoader(i);return e.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.INSECURE),e.getSettings().setAutoPlayAdBreaks(!1),e}}class ns extends ss{constructor(){super(...arguments),this.isAdxLookupSlot=!0}}class rs{constructor(t){this.settings=t,this.rb=new Set,this.ob=new Set}preloadImaSdkSlots(t){be.X3.preloadImaSdk(window);for(let i=1;i<=3;i++){const i=new ss(t,this.settings.globalDomUtilsService,this.settings.sessionId);i.fetchImaDependencies(),this.rb.add(i)}}preloadImaSdkAdxLookupSlot(t){const i=new ns(t,this.settings.globalDomUtilsService,this.settings.sessionId);i.fetchImaDependencies(),this.rb.add(i)}requestAdSlot(t){const i=new es(t,this.settings.globalDomUtilsService,this.settings.sessionId);return this.hb(i),i}requestAdSlotIma(t,i=!1){let e=i?this.ab():this.cb();return e||(e=i?new ns(t,this.settings.globalDomUtilsService,this.settings.sessionId):new ss(t,this.settings.globalDomUtilsService,this.settings.sessionId)),this.hb(e),e}getNumberOfUsedImaSlots(){return[...this.ob].map((t=>t.isImaSlot&&!t.isAdxLookupSlot)).length}destroyAdSlot(t){this.ob.delete(t),t.destroy()}recycleAdSlot(t){if(this.ob.delete(t),this.lb(t)){[...this.rb].map((t=>t.isImaSlot&&!t.isAdxLookupSlot)).length>=3&&!t.isAdxLookupSlot?this.destroyAdSlot(t):(t.sanitize(),this.rb.add(t))}else this.destroyAdSlot(t)}lb(t){return t.isImaSlot}ub(t){return t.isAdxLookupSlot}ab(){let t=null;return this.rb.forEach((i=>{this.ub(i)&&null===t&&(t=i)})),t}cb(){let t=null;return this.rb.forEach((i=>{this.lb(i)&&null===t&&(t=i)})),t}hb(t){this.rb.delete(t),this.ob.add(t)}}class os{constructor(t,i){this.Tr=t,this.pb=i,this.Ui=[],this.fb=!1,this.vb=()=>{if(this.Tr.adSelector.hasReachTheMaxNumberOfReadyBids())return void this.Tr.auctionManager.onNothingToWin();const t=this.gb(),{selectedBid:i,state:e}=t;if(!i)return;this.Tr.auctionInfoLogging.winBid(i);const{width:s,height:n}=e.adContainerState.get(i.settings.adManagerLineItem.protoLineItem.adType);i.initAd(s,n,this.yb.vastViewMode,this.Tr.desiredBitRateForWins,void 0,void 0,e.soundVolume);const{vastTracker:r,adManagerLineItem:o}=i.settings;return ut.Mz.track(r.adWin,this.Tr.adMacroReplacer,o.protoLineItem,e,this.Tr.plcmt),Promise.resolve()},this.rg=d.h.getGlobalContainer().resolve(vt.l),this.cg=new _e(this.vb,10),this.Ui.push(this.Tr.adSelector.getBidEvents(Te.S.ON_BID).subscribe((t=>{const i=this.gb();this.Tr.auctionInfoLogging.newBidAdded(t,i),this.bb()})),this.Tr.adSelector.getBidEvents(Te.S.ON_BID_STARTING).subscribe((()=>{this.bb()})),this.Tr.adSelector.getBidEvents(Te.S.ON_BID_LOADED_CONSUMED).subscribe((t=>{if(!t.started&&t.status!==r.wy.INVALIDATED){const i=this.Tr.auctionInfoLogging.onPostBid(t),e=!0;this.Pb(t,i,e)}this.bb()})),this.Tr.adSelector.getBidEvents(Te.S.ON_BID_LOADING_CONSUMED).subscribe((t=>{if(t.status!==r.wy.INVALIDATED){const i=this.Tr.auctionInfoLogging.onPostBid(t);this.Pb(t,i)}this.bb()})),this.Tr.impressionCapsTimer.onTimer().subscribe((()=>{this.bb()})))}win(t){this.yb=t,this.cg.setNumberOfThreads(t.maxParallelWins),this.fb=!0,this.bb()}stop(){this.fb=!1,this.cg.stop()}destroy(){this.stop(),(0,l.i)(this.Ui)}bb(){this.fb&&this.cg.start()}gb(){const t=this.yb.stateSettings.currentState||this.yb.stateSettings.predictedState;return this.Tr.adSelector.selectBestBidForWin(t)}Pb(t,i,e=!1){var s,n,r,o,a,h;ut.Mz.trackError(t.settings.vastTracker.adError,this.Tr.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,this.Tr.plcmt,t.vastErrorCode);const c=(null===(n=null===(s=this.yb.stateSettings)||void 0===s?void 0:s.currentState)||void 0===n?void 0:n.adBreakState)||(null===(o=null===(r=this.yb.stateSettings)||void 0===r?void 0:r.predictedState)||void 0===o?void 0:o.adBreakState),d=this.rg.getTrackingData(t.settings.adManagerLineItem,t.settings.requestMetadata.data.hasIIQLookup),l=this.Tr.assertiveYieldService.getAssertiveYieldProbability(t),u=(0,Je.H8)(t.createdTimestamp),p=(0,K.$K)(i)?$.EN.fromProtoAuctionPostbidReason(this.Tr.auctionInfoLogging.getGeneralPostbidReason(t.errorReason)):void 0,{discount:f,liveRampType:m}=t.settings.requestMetadata.data,g=t.settings.requestMetadata.data.floorPriceInformation,v=null===(a=this.Tr.userManagerService)||void 0===a?void 0:a.lotamePanorama,y={adPodSlotPosition:c.adPodSlotIndex,adSourceType:$.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,reason:t.errorReason,isBidLoaded:e,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,isUserSynced:t.settings.requestMetadata.data.isUserSynced,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,timeSpentMs:t.loadingTimeMs,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(h=t.settings.bidLifecycle)||void 0===h?void 0:h.winToAdLoadedTime,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:g?$.wE.fromProtoFloorPriceInformation(g):void 0,liveRampType:m?$.EN.fromProtoLiveRamp(m):void 0,bidElapsedTimeSeconds:u,auctionInformation:i?$.Ti.fromProtoAuctionInformation(i):void 0,auctionReason:p,discount:f?Qe.d.fromProtoDiscount(f):void 0,hasLexiconEnvelopeBeenUsed:t.settings.requestMetadata.data.hasLexiconEnvelopeBeenUsed,identityProviderTrackingData:d,assertiveYieldProbability:l,dynamicElkFields:{10:Le.f.getCidForElkTracking()},panorama:v};this.pb.adPostbid.next(y)}}var as=e(9134);class hs{constructor(t,i){this.Qa=t,this.wb=i,this.Ab=0,this._b=new s.x,this.Ui=[],this.Tb=this.xb(),this.kb()}get onForceCallAdxLastLook(){return this._b.asObservable()}forceCallAdxLookup(t,i){if(!t||!i)return;const e={adxLineItem:t,state:i};this._b.next(e)}callAdxLookup(t){const{state:i,startingBid:e}=t;if(!this.Tb||!i)return;const s=this.wb.getBidsByLineItemId(this.Tb.protoLineItem.advertiserLineItemId),n=this.Qa.getBestBidPriceExceptAdxLookup(),r=s.every((t=>t.price<n)),o=!!(null==e?void 0:e.settings.adManagerLineItem.protoLineItem.isAdxLookup);if((r||o)&&this.Qa.hasUnstartedBids()&&n>0&&n<fe.zt-fe.P8){const t={adxLineItem:this.Tb,state:i};this._b.next(t)}}destroy(){(0,l.i)(this.Ui)}getAdxLastLookPrice(){let t=this.Qa.getBestBidPriceExceptAdxLookup()+fe.P8;return t&&t<fe.FH&&(t=fe.FH),t<this.Ab?this.Ab:t}kb(){this.Ui.push(this.Qa.getBidEvents(as.Sb.ON_BID_LOADED).subscribe((t=>{t.settings.adManagerLineItem.protoLineItem.isAdxLookup&&t.price>this.Ab&&(this.Ab=t.price)})))}xb(){return this.Qa.getAllLineItems().find((t=>t.protoLineItem.isAdxLookup))}}class cs{constructor(t,i,e){this.Qa=t,this.su=i,this.us=e,this.Cb=new Map}bidIsNotWinnableEverInSession(t){if(!this.Eb(t))return;const i=[...this.Qa.getAllBidPricesSortedDesc(),t.price].sort(((t,i)=>i-t)),e=this.Mb(i);this.Lb(t.settings.requestMetadata.data.cnxBidId,e,n.ProtoAuctionLossReasonEnum.TargetingMismatch)}newBidAdded(t,i){this.Eb(t)&&(i.selectedBid?i.selectedBid!==t?this.Bb(t,i):this.Rb(t):this.Bb(t,i))}winBid(t){if(!this.Eb(t))return;const i=this.Qa.getAllBidPricesSortedDesc(),e=this.Mb(i);this.Cb.set(t,e)}onPostBid(t){return this.Ob(t)}onImpression(t){return this.Ob(t)}Eb(t){return t.settings.requestMetadata.data.logAuctionInformation}Rb(t){const{cnxBidId:i}=t.settings.requestMetadata.data,e=this.Qa.getAllBidPricesSortedDesc(),s=this.Mb(e);this.Lb(i,s,n.ProtoAuctionLossReasonEnum.CompetitorPriority)}Ob(t){const i=this.Db(t);return this.Vb(t),i}Bb(t,i){var e,s,n,r;const o=this.Fb(t,i);if(!(0,K.$K)(o))return void this.jb("AdManager_AuctionInfoLogging_lossReason_cannot_be_found",t.settings.requestMetadata.data.cnxBidId,null===(r=null===(n=null===(s=null===(e=i.selectedBid)||void 0===e?void 0:e.settings)||void 0===s?void 0:s.requestMetadata)||void 0===n?void 0:n.data)||void 0===r?void 0:r.cnxBidId);const{cnxBidId:a}=t.settings.requestMetadata.data,h=this.Qa.getAllBidPricesSortedDesc(),c=this.Mb(h);this.Lb(a,c,o)}Db(t){if(this.Cb.has(t))return this.Cb.get(t);this.Eb(t)&&this.jb("AdManager_AuctionInfoLogging_cannot_find_win_bid_snapshot",t.settings.requestMetadata.data.cnxBidId)}Vb(t){this.Cb.has(t)&&this.Cb.delete(t)}Fb(t,i){var e;return null===(e=i.unselectedBidList.find((i=>i.bid===t)))||void 0===e?void 0:e.lossReason}getGeneralPostbidReason(t){switch(t){case r.RG.ImaScriptFailure:case r.RG.ImaObjectNotFound:case r.RG.ImaManagerInit:case r.RG.ImaInitSdkError:case r.RG.AdxOverlayGptScriptLoad:case r.RG.DisplayIntegratorIframeLoad:return n.ProtoAuctionPostbidReasonEnum.SDKFailure;case r.RG.VastUnsupportedMedia:case r.RG.CnxMediaSrcNotSupported:return n.ProtoAuctionPostbidReasonEnum.UnsupportedMedia;case r.RG.DomainBlocked:case r.RG.AdaptorInitAdError:case r.RG.AdaptorStartAdError:case r.RG.WrapperInitAdError:case r.RG.WrapperStartAdError:return n.ProtoAuctionPostbidReasonEnum.TargetingMismatch;default:return n.ProtoAuctionPostbidReasonEnum.CreativeError}}Mb(t){const i=t[0]?(0,gt.pd)(t[0]):void 0,e=t[1]?(0,gt.pd)(t[1]):void 0;return i||this.jb("AdManager_AuctionInfoLogging_highestBidPrice_missing",`${i}`),{bidDensity:t.length,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:e}}Lb(t,i,e){this.su.auctionInformation.next({cnxBidId:t,auctionInformation:i?$.Ti.fromProtoAuctionInformation(i):void 0,auctionLossReason:$.EN.fromProtoAuctionLossReason(e)})}jb(t,i="",e=""){(0,Y.nF)({message:t,level:Y.D_.CRITICAL,callStack:i,exception:e,sessionId:this.us},{throttle:5})}}var ds,ls=e(8797);class us{constructor(t){this.Tr=t,this.Ub=new s.x,this.qb=[],this.Hb=!1,this.zb=!1,this.Ui=[],this.Gb=""}get onAuctionMechanismEnded(){return this.Ub.asObservable()}startNewAuction(t){this.Gb=t.auctionId,this.Xb=t.callingState,this.zb=t.waitForNewReadyBid,this.Qb(),this.Jb(),this.kb(),this.Yb()}cancelAuction(){this.Qb()}updateState(t){if(this.Xb=t,0===this.qb.length)return;const i=this.Xb.stateSettings.currentState||this.Xb.stateSettings.predictedState;if(!i)return;const e=this.Tr.adSelector.getLineItemsByRequest(!0).map((t=>t.protoLineItem.advertiserLineItemId)),s=this.Tr.adSelector.getAllCallableLineItems(i).map((t=>t.protoLineItem.advertiserLineItemId));this.qb=this.qb.filter((t=>t.isAdCalled||(0,Tt.d3)(t.lineItemId,s)||(0,Tt.d3)(t.lineItemId,e))),this.Yb()}onNothingToWin(){0!==this.qb.length&&this.qb.every((t=>!0===t.isAdCalled))&&this.Yb()}onNothingToCall(){0!==this.qb.length&&(this.Kb(),this.Yb())}Kb(){const t=this.Tr.adSelector.getLineItemsByRequest(!0).map((t=>t.protoLineItem.advertiserLineItemId));this.qb=this.qb.filter((i=>!0===i.isAdCalled||!1===i.isAdCalled&&(0,Tt.d3)(i.lineItemId,t)))}Zb(){this.Qb(),this.Ub.next(this.Gb)}kb(){this.Ui.push(this.Tr.adSelector.getLineItemRequestEvents(ls.N.ON_END).subscribe((t=>{this.tI(t),this.Yb()})),this.Tr.adSelector.getBidEvents(Te.S.ON_BID_LOADED).subscribe((t=>{this.Hb=!0,this.Yb()})),this.Tr.adSelector.getBidEvents(Te.S.ON_BID_LOADING_CONSUMED).subscribe((t=>{this.Yb()})))}tI(t){this.qb.forEach((i=>{t.some((t=>t.protoLineItem.advertiserLineItemId===i.lineItemId))&&(i.isAdCalled=!0)}))}iI(){(0,l.i)(this.Ui)}Yb(){const t=this.Xb.stateSettings.currentState||this.Xb.stateSettings.predictedState;0!==this.qb.length?this.zb&&!this.Hb||this.qb.every((t=>!0===t.isAdCalled))&&this.Tr.adSelector.isBestBidLoaded(t)&&this.Zb():this.Zb()}Qb(){this.qb=[],this.Hb=!1,this.iI()}Jb(){this.eI(),this.sI(),this.nI()}nI(){this.Tr.adSelector.getLineItemsByRequest(!0).forEach((t=>{this.oI(t)}))}sI(){const t=this.Xb.stateSettings.currentState||this.Xb.stateSettings.predictedState;if(!t)return void(0,Y.nF)({message:"ShortCircuitMechanism_registerClientSideLineItem_no_state",level:Y.D_.INFO,sessionId:this.Tr.sessionId},{throttle:10,shouldSendMaxLog:!1});const i=this.Tr.adSelector.getAllCallableLineItems(t).filter((t=>!t.hasAggregator)),e=i.filter((t=>t.protoLineItem.forceCallingInEveryAO)),s=this.hI(i,t);if(!s)return void this.aI(e);const n=this.Tr.adSelector.getBestLoadedBid();(n?Wi.p.getSelectionScore(n):0)>Wi.p.getSelectionScore(s)?this.aI(e):(this.oI(s),e.filter((t=>t!==s)).forEach((t=>{this.oI(t)})))}eI(){const t=this.Xb.stateSettings.currentState||this.Xb.stateSettings.predictedState;if(!t)return void(0,Y.nF)({message:"ShortCircuitMechanism_registerAggregatedLineItems_no_state",level:Y.D_.INFO,sessionId:this.Tr.sessionId},{throttle:1,shouldSendMaxLog:!1});this.Tr.adSelector.getAllCallableLineItems(t).filter((t=>t.hasAggregator)).forEach((t=>{this.oI(t)}))}hI(t,i){const e=this.Tr.adSelector.getBestCallableLineItem(t,i);if(e&&(0,Tt.BZ)(e.lineItemList))return e.lineItemList[0]}oI(t,i=!1){return!this.qb.some((i=>i.lineItemId===t.protoLineItem.advertiserLineItemId))&&(this.qb.push({isAdCalled:i,lineItemId:t.protoLineItem.advertiserLineItemId}),!0)}aI(t){t.forEach((t=>{this.oI(t)}))}}!function(t){t.ShortCircuitEnd="short",t.TimeoutEnd="timeout",t.Prefetch="prefetched"}(ds||(ds={}));class ps{constructor(t,i){this.wi=t,this.Tr=i,this.cI=!1,this.dI=null,this.uI=new s.x,this.Ub=new s.x,this.pI=[],this.vI=null,this.mI={inPrefetchMode:!1,startTime:0,prefetchEnded:!1},this.gI={id:"",auctionEnded:!1},this.yI=new us({adSelector:i.adSelector,sessionId:i.sessionId,adBidPool:i.adBidPool}),this.bI()}get onAuctionStopCalling(){return this.Ub.asObservable()}get onAuctionEnd(){return this.uI.asObservable()}updateState(t){this.yI.updateState(t)}cancelAuction(){this.cI||(this.mI.inPrefetchMode=!1,this.yI.cancelAuction(),this.II())}startPrefetch(t){this.cI=!1,this.II(),this.mI={inPrefetchMode:!0,startTime:Date.now(),prefetchEnded:!1},this.yI.startNewAuction({callingState:t,waitForNewReadyBid:!0})}startAuction(t,i,e=3e3){if(this.cI=!1,this.gI.id===i)return void(this.gI.auctionEnded&&(0,K.$K)(this.gI.auctionEndedType)&&this.Zb(this.gI.auctionEndedType));this.dI=Date.now(),this.gI={auctionEnded:!1,id:i},this.II();let s=e;this.mI.inPrefetchMode?(s-=Date.now()-this.mI.startTime,s<0||this.mI.prefetchEnded?this.Zb(ds.Prefetch):this.wI(s)):(this.yI.startNewAuction({callingState:t,waitForNewReadyBid:!1}),this.wI(s)),this.mI.inPrefetchMode=!1}startCustomAuction(t,i){this.cI=!0,this.yI.startNewAuction({callingState:t,waitForNewReadyBid:!1,auctionId:i}),this.wI(3e3,i)}onNothingToWin(){this.yI.onNothingToWin()}onNothingToCall(){this.yI.onNothingToCall()}destroy(){(0,l.i)(this.pI)}bI(){this.pI.push(this.yI.onAuctionMechanismEnded.subscribe((t=>{this.AI(t)})))}AI(t){this.mI.prefetchEnded=!0,this.Ub.next(),this.mI.inPrefetchMode||this.Zb(ds.ShortCircuitEnd,t)}wI(t,i){this.vI=this.wi.setTimeout((()=>{this.Zb(ds.TimeoutEnd,i)}),t)}Zb(t,i){this.cI=!1,null!==this.dI&&(0,K.$K)(t)&&(this._I(t,Date.now()-this.dI),this.dI=null),this.gI.auctionEnded=!0,this.gI.auctionEndedType=t,this.cancelAuction();const e={type:t,auctionId:i};this.uI.next(e)}II(){this.wi.clearTimeout(this.vI),this.vI=null}_I(t,i){(0,Ct.Vm)([99,1])&&(0,Y.nF)({message:"AuctionManager_end_auction",exception:t,callStack:this.TI(i),level:Y.D_.INFO,sessionId:this.Tr.sessionId},{shouldSendMaxLog:!1,throttle:1e4})}TI(t,i=0){const e=[0,.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,4,5][i];return void 0===e?"over_5s":t<=1e3*e?`${e}`:this.TI(t,i+1)}}const fs=30*ge.s_;class ms{constructor(){this.xI=null}onAdRemoved(){this.xI=null,this.kI()}pauseViaUserInteraction(){this.xI&&(this.xI.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.xI&&(this.xI.pausedWithUserInteraction=!1,this.kI())}CI(t){this.xI={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:fs,lastAdPausedStartedTimestamp:void 0},this.kI()}checkPauseAd(t,i){t&&(null===this.xI&&this.CI(t),i?this.EI(t):this.MI(t))}MI(t){this.LI(t)&&(this.xI.isPaused=!0,this.xI.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.kI(),this.BI=setTimeout((()=>{t.stopAd("pauseOutOfView"),this.xI=null,this.kI()}),this.xI.remainingTimeForAdToBePaused))}EI(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.xI.isPaused&&!this.xI.pausedWithUserInteraction&&(this.kI(),this.xI.isPaused=!1,this.xI.remainingTimeForAdToBePaused=this.xI.remainingTimeForAdToBePaused-(Date.now()-this.xI.lastAdPausedStartedTimestamp),t.resumeAd())}kI(){clearTimeout(this.BI),this.BI=void 0}LI(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.xI.isPaused&&!this.xI.pausedWithUserInteraction}}var gs=e(4065);const vs=["11d44b9b-1330-432c-bcd7-4a095b47cdbd"];class ys{constructor(t,i){this.RI=t,this.OI=i,this.DI=3e3,this.Bv=null,this.NI=!1,vs.includes(this.RI.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)||this.VI()}VI(){this.FI=this.RI.onVpaidEvent.subscribe((t=>{var i,e,s,n,o,a,h,c,d;switch(t.type){case r.fI.AdImpression:this.UI();break;case r.fI.AdVideoFirstQuartile:this.$I();break;case r.fI.AdVideoMidpoint:null===(i=this.qI)||void 0===i||i.reset();break;case r.fI.AdVideoThirdQuartile:null===(e=this.qI)||void 0===e||e.reset();break;case r.fI.AdVideoComplete:null===(s=this.qI)||void 0===s||s.stop();break;case r.fI.AdStopped:null===(n=this.qI)||void 0===n||n.stop();break;case r.fI.AdError:null===(o=this.qI)||void 0===o||o.stop();break;case r.fI.AdPaused:null===(a=this.qI)||void 0===a||a.stop();break;case r.fI.AdSkipped:null===(h=this.qI)||void 0===h||h.stop();break;case r.fI.AdPlaying:null===(c=this.qI)||void 0===c||c.start();break;case r.fI.AdUserClose:null===(d=this.qI)||void 0===d||d.stop();break;case r.fI.AdExpandedChange:case r.fI.AdClickThru:case r.fI.AdInteraction:case r.fI.AdUserAcceptInvitation:case r.fI.AdLinearChange:case r.fI.AdUserMinimize:this.destroy()}}))}UI(){const t=d.h.getGlobalContainer().resolve(Re.f);let i=this.RI.getAdDuration();(0,K.r)(i)?(i*=1e3,this.NI=!0):i=1e3*this.OI,this.Bv=i;const e=this.HI();this.qI=new gs.B(t,e),this.qI.onTimeElapsed.subscribe((()=>{this.FI.unsubscribe(),this.FI=null,this.RI.stopAd("adNotLoading")})),this.qI.start()}$I(){if(this.NI)this.qI.reset();else{this.Bv=4*this.qI.timeElapsed;const t=this.HI();this.qI.reset(t)}}HI(){return this.Bv/4+this.DI}destroy(){var t;this.FI&&(this.FI.unsubscribe(),this.FI=null),null===(t=this.qI)||void 0===t||t.stop()}}class bs{constructor(t,i,e,n,r){this.RI=t,this.Bu=i,this.su=e,this.zI=n,this.Tr=r,this.au=!1,this.Ty=!1,this.GI=[],this.WI=new ms,this.Pi=new s.x,this.VI(),this.XI=new ys(this.RI,this.Tr.maxAdDuration),this.resizeAd()}get onVpaidEvent(){return this.Pi.asObservable()}get inImpression(){return this.au}setVastViewMode(t){this.Tr.adViewMode=t;const{width:i,height:e}=this.Bu.getContainerStateMap().get(this.RI.settings.adManagerLineItem.protoLineItem.adType);this.RI.resizeAd(i,e,this.Tr.adViewMode)}getAdVolume(){return this.RI.getAdVolume()}setAdVolume(t,i){if(i){const{adMacroReplacer:e,adManagerState:s}=i;this.JI(t,s,e)}this.RI.setAdVolume(t)}resizeAd(){const{width:t,height:i,viewability:e}=this.Bu.getContainerStateMap().get(this.RI.settings.adManagerLineItem.protoLineItem.adType);this.WI.checkPauseAd(this.RI,e),this.RI.resizeAd(t,i,this.Tr.adViewMode)}skipAd(){this.RI.setAdVolume(0),this.RI.skipAd()}stopAd(t){this.RI.stopAd(t)}pauseAd(t){this.RI.pauseAd(),t&&this.WI.pauseViaUserInteraction()}resumeAd(t){this.RI.resumeAd(),t&&this.WI.resumeViaUserInteraction()}getMediaSize(){const t=this.RI.getAdMediaSize().width,i=this.RI.getAdMediaSize().height,{widthRatio:e,heightRatio:s}=(0,st.dO)(t,i);return{width:t,height:i,widthRatio:e,heightRatio:s,adType:this.RI.settings.adManagerLineItem.protoLineItem.adType}}getMetadata(){return{advertiserLineItemId:this.RI.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.RI.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.RI.settings.adManagerLineItem.protoLineItem.adType,duration:this.RI.getAdDuration(),adSkipMode:this.RI.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.RI.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,adSourceType:this.RI.adSourceType}}destroy(){this.au=!1,this.WI.onAdRemoved(),this.FI.unsubscribe(),this.FI=null,this.XI.destroy()}VI(){this.FI=this.RI.onVpaidEvent.subscribe((t=>{switch(t.type){case r.fI.AdImpression:this.YI();break;case r.fI.AdVideoFirstQuartile:this.KI(n.ProtoQuartilesEnum.First);break;case r.fI.AdVideoMidpoint:this.KI(n.ProtoQuartilesEnum.Second);break;case r.fI.AdVideoThirdQuartile:this.KI(n.ProtoQuartilesEnum.Third);break;case r.fI.AdVideoComplete:this.KI(n.ProtoQuartilesEnum.Fourth)}this.Pi.next(t)}))}YI(){this.Ty=this.Fy(this.RI.skipOffset,this.RI.getAdDuration()),this.au=!0;const{viewability:t}=this.Bu.getContainerStateMap().get(this.RI.settings.adManagerLineItem.protoLineItem.adType);this.WI.checkPauseAd(this.RI,t)}KI(t){const i=this.GI.indexOf(t)>=0&&!(this.Tr.pauseAdWhenFinished||this.Tr.loopAdWhenFinished),e=this.zI.adBreakState,{adManagerLineItem:s}=this.RI.settings;if(i)return void(1===(0,Ct.Vm)([99,1])&&(0,Y.nF)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:Y.D_.WARN,exception:s.protoLineItem.advertiserLineItemId,callStack:this.RI.adMediaType,sessionId:this.Tr.sessionId}));this.GI.push(t);const{requestMetadata:n}=this.RI.settings,{advertiserLineItemId:r,publisherLineItemId:o}=s.protoLineItem,{rtbSeatId:a,rtbAdomain:h,dspId:c}=n.data;this.su.adQuartile.next({advertiserLineItemId:r,publisherLineItemId:o,rtbSeatId:a,dspId:c,rtbADomain:h,type:$.EN.fromProtoGetQuartile(t),adBreakType:$.EN.fromProtoAdBreakType(e.adBreakType),hasSkipAd:this.Ty})}Fy(t,i){if((0,K.hj)(t)&&t>=0)return!0;return(0,X.Xj)(i,this.Tr.skipAdSettings)}JI(t,i,e){const s=this.RI.getAdVolume();let n=null;0===s&&t>0?n=this.RI.settings.vastTracker.adUnmute:s>0&&0===t&&(n=this.RI.settings.vastTracker.adMute);const{plcmt:r}=this.Tr,o=this.RI.settings.adManagerLineItem.protoLineItem;n&&ut.Mz.track(n,e,o,i,r)}}class Is{constructor(t,i){this.Qa=t,this.ZI=i}refreshImaSlots(t){if(this.ZI.getNumberOfUsedImaSlots()<=5)return;const i=this.Qa.getAllLoadedBids().filter((t=>"ima"===t.adMediaType&&!t.settings.adManagerLineItem.protoLineItem.isAdxLookup));if(i.length<=5)return;i.sort(((i,e)=>(this.Qa.isBidTargetingAllowed(e,t)?1:0)-(this.Qa.isBidTargetingAllowed(i,t)?1:0)||e.yoScore-i.yoScore)).slice(5).forEach((t=>{t.invalidate()}))}}var Ps=e(5294);class ws{constructor(){this.tP=new Map}calculateLineItemYoScore(t){return this.iP(t)}calculateBidYoScore(t){return this.iP(t)}iP(t){const i=this.tP.get(t);if((0,K.$K)(i))return i;const e=Math.random();return this.tP.set(t,e),e}}class Ss{calculateLineItemYoScore(t,i,e){return e?Math.random():this.eP(i)}calculateBidYoScore(t,i){return this.eP(i)}eP(t){const{cpm:i,priority:e,grossNetPercentageDifference:s}=t;return i-s/100*i+200*e}}class As{constructor(t){this.di=t?new ws:new Ss}calculateLineItemYoScore(t,i,e){return this.di.calculateLineItemYoScore(t,i,e)}calculateBidYoScore(t,i){return this.di.calculateBidYoScore(t,i)}}var xs=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let _s=class{constructor(){this.sP=[],this.nP=new Map}saveAuctionPayload(t,i){const{requestId:e,demandPartnerId:s,placementId:n,userIds:r,bidCpms:o,costCpms:a,predictions:h}=t;this.sP.push({requestId:e,demandPartnerId:s,placementId:n,predictions:h,userIds:r,bidCpms:o,costCpms:a}),i.bids.forEach((i=>{const e=i.requestMetadata.data.cnxBidId;(0,K.QM)(e)&&(0,K.QM)(t.requestId)&&this.nP.set(e,t.requestId)}))}getAssertiveYieldOnImpression(t){const i=this.rP(t);if(!(0,K.$K)(i))return;const e=this.oP(i,t),s=i.bidCpms.map(((i,s)=>s===e?t.price:0));return this.nP.delete(t.settings.bidId),Object.assign(Object.assign({},i),{costCpms:s})}getAssertiveYieldProbability(t){const i=this.rP(t);if(!(0,K.$K)(i))return;const e=this.oP(i,t);return(0,K.$K)(i)&&i.predictions&&(0,K.$K)(e)?i.predictions[e]:void 0}rP(t){if(!(0,K.QM)(t.settings.requestMetadata.data.cnxBidId))return;const i=this.nP.get(t.settings.requestMetadata.data.cnxBidId);return this.sP.find((t=>t.requestId===i))}oP(t,i){var e;return null===(e=t.demandPartnerId)||void 0===e?void 0:e.indexOf(`${i.settings.adManagerLineItem.protoLineItem.demandPartnerId}`)}};_s=xs([(0,Ce.b2)(),(0,Ce.Yn)(Ce.Fw.ContainerScoped)],_s);var Ts=e(7107);class Cs{static isLineItemAllowedByUserAudiences(t,i){const{advertiserAudienceTargetingCases:e,publisherAudienceTargetingCases:s}=t,n=this.hP(e,i),r=this.hP(s,i);return n&&r}static hP(t,i){return!(0,Tt.BZ)(t)||this.aP(t,i)}static aP(t,i){return t.some((t=>{const{audienceTargetingFilters:e}=t;return!!(0,Tt.BZ)(e)&&this.cP(e,i)}))}static cP(t,i=[]){return t.every((t=>{const e=t.audienceIdList;if(!(0,Tt.BZ)(e))return!1;const s=(0,Tt.tN)(e,i).length,r=e.length;switch(t.rule){case n.ProtoTargetingFilterEnum.IncludeAny:return s>0;case n.ProtoTargetingFilterEnum.IncludeAll:return s===r;case n.ProtoTargetingFilterEnum.ExcludeAny:return 0===s;case n.ProtoTargetingFilterEnum.ExcludeAll:return s!==r;default:return!1}}))}}class ks{constructor(t,i,e){this.Tr=t,this.lP=i,this.su=e,this.uP=!1,this.Pi=new s.x,this.fP=new s.x,this.vP=new s.x,this.Ui=[],this.mP=t=>{as.IX.getInstance().add(t,this.xa,this.wb)},this.gP=t=>{this.fP.next(t)},this.yP=(t,i)=>{const e=this.xa.lineItems.find((i=>i.protoLineItem.advertiserLineItemId===t));e&&(e.protoLineItem.viewability=i)},this.ny=()=>{var t;null===(t=this.bP)||void 0===t||t.resizeAd(),this.IP()},this.Ao=d.h.getSessionChildContainer(this.Tr.app.config.sessionId).resolve(Pt.G);const n=this.Tr.adContainerMap.get(this.PP());this.wP=(0,Q.LT)(n),this.su.startBidTracking.next(),this.AP(),this.SP(),this._P(),this.TP(),this.xP()}get onVpaidEvent(){return this.Pi.asObservable()}get onImpressionRevenueEvent(){return this.fP.asObservable()}get onNoFill(){return this.vP.asObservable()}setAdVolume(t){var i;this.zI.partialStateUpdate({sound:t});const e={adManagerState:this.zI.getCurrentAdManagerState(!0),adMacroReplacer:this.kP};null===(i=this.bP)||void 0===i||i.setAdVolume(t,e)}setAdViewMode(t){var i;this.zI.partialStateUpdate({vastViewMode:t}),null===(i=this.bP)||void 0===i||i.setVastViewMode(t)}getCurrentAdMetadata(){var t;return null===(t=this.bP)||void 0===t?void 0:t.getMetadata()}getCurrentAdMediaSize(){var t;return null===(t=this.bP)||void 0===t?void 0:t.getMediaSize()}pauseAd(t){var i;null===(i=this.bP)||void 0===i||i.pauseAd(t)}resumeAd(t){var i;null===(i=this.bP)||void 0===i||i.resumeAd(t)}skipAd(){var t;null===(t=this.bP)||void 0===t||t.skipAd()}stopAd(t){var i;null===(i=this.bP)||void 0===i||i.stopAd(t)}setPlayerOrientation(t){this.zI.partialStateUpdate({playerOrientation:t}),this.IP()}setQueryJsTargeting(t){this.zI.partialStateUpdate({queryJsTargeting:t}),this.IP()}enableImpressions(t){this.zI.enableImpression(t),this.Bu.forceTriggerUpdateState(),this.CP.allowResetOnTime=!0,this.EP(t),this.MP()}disableImpressions(t=!1){(this.zI.impressionsAllowed||t)&&(this.LP.stop(),this.BP.stop(),this.zI.disableImpression(),this.bP&&!this.bP.inImpression&&this.Tr.app.config.isInApp&&this.bP.stopAd("inApp_disable"))}enablePredict(t,i){if(this.Tr.disablePrefetch)return;if(i===We.StartSessionPrefetch&&this.Tr.playerData.playbackMode===n.ProtoPlayerPlaybackModeEnum.ScrollToPlay)try{this.RP()}catch(t){return void(0,Y.nF)({message:"Prefetch_logOutOfViewDistance_error",level:Y.D_.INFO,exception:(0,Ct.W$)(t).message,sessionId:this.Tr.app.config.sessionId},{pacing:1,throttle:1})}switch(this.zI.enablePredict(t,i),i){case We.StartSessionPrefetch:this.CP.allowResetOnTime=!1;break;case We.MidSessionPrefetch:this.CP.allowResetOnTime=!0}this.MP();const e=this.zI.getCallSettings();this.OP.startPrefetch(e)}RP(){const t=this.Bu.getMainContainer(),{topFrame:{innerHeight:i}}=(0,Ct.pE)(window);if(!t)return void(0,Y.nF)({message:"Prefetch_no_container",level:Y.D_.INFO,sessionId:this.Tr.app.config.sessionId},{pacing:1,throttle:1});const e=t.getBoundingClientRect(),s=e.top>i,n=e.bottom<0;if(s&&n)return void(0,Y.nF)({message:"Prefetch_impossible_coordinates",level:Y.D_.INFO,sessionId:this.Tr.app.config.sessionId},{pacing:1,throttle:1});let r=0;s&&(r=e.top-i),n&&(r=e.bottom);const o=Math.round(r/i*10)/10;if(0!==o){d.h.getSessionChildContainer(this.Tr.app.config.sessionId).resolve(Ts.B).prefetchDistance=o,(0,Y.nF)({message:`Prefetch_distance_${o}`,level:Y.D_.INFO,sessionId:this.Tr.app.config.sessionId},{pacing:5,throttle:1})}}isLoadingAds(){return!!this.bP||this.Qa.hasLoadingBids()}getMainContainerState(){return this.Bu.getMainContainerState()}getMainContainer(){return this.Bu.getMainContainer()}setCustomMacros(t){this.BP.setMacros(t)}destroy(){var t;this.disableImpressions(),(0,l.i)(this.Ui),this.BP.destroy(),this.DP.destroy(),this.LP.destroy(),this.NP.destroy(),this.VP.destroy(),this.FP(),null===(t=this.bP)||void 0===t||t.stopAd("adManagerDestroy"),this.jP()}AP(){const t=d.h.getGlobalContainer().resolve(Re.f);this.NP=new be.IS(t),this.UP=new je,this.CP=new qe,this.$P=new He,this.op=(new Ne).registerCallingValidators([this.CP,this.UP,this.$P]),this.np=new De,this.kP=new be.Yh(this.Tr.app.services.MacrosService,this.Tr.app.services.UserManagerService,this.Tr.app.config,this.Tr.appSettings)}SP(){var t,i,e;this.di=new As(this.Tr.app.config.explorationMode);const s=d.h.getSessionChildContainer(this.Tr.app.config.sessionId).resolve(Me),n=this.Tr.lineItemList.filter((t=>{var i;return Cs.isLineItemAllowedByUserAudiences(t,null===(i=this.Tr.app.services.UserManagerService)||void 0===i?void 0:i.userAudienceIdList)})),r=n.map((t=>new ht.o(t,this.di,s)));this.xa=new as.vZ,this.xa.add(r);if(!Boolean(null===(t=this.Tr.app.services.UserManagerService)||void 0===t?void 0:t.isCoreSyncResolved)){const t=(0,Tt.V7)(this.Tr.lineItemList,n),r=null===(e=null===(i=this.Tr.app.services.UserManagerService)||void 0===i?void 0:i.coreSyncResolved)||void 0===e?void 0:e.subscribe((i=>{const e=t.filter((t=>Cs.isLineItemAllowedByUserAudiences(t,null==i?void 0:i.audienceIdList))).map((t=>new ht.o(t,this.di,s)));this.xa.add(e),null==r||r.unsubscribe()}));r&&this.Ui.push(r)}this.ka=new as.S6,this.Na=new as.TA,this.wb=new as.z,this.Bu=new ze(this.PP(),this.Tr.adContainerMap,this.Tr.app.services.ResizeObserver,this.Tr.app.services.ViewabilityService),this.ZI=new rs({globalDomUtilsService:this.Tr.app.services.GlobalDomUtilsService,recycleAdSlots:!0,sessionId:this.Tr.app.config.sessionId}),this.zI=new Ze(this.Bu,this.Tr.generalRepository),this.Qa=new Wi.l(this.xa,this.ka,this.Na,this.wb,{callingValidationAggregator:this.op,impressionCapService:this.UP,standaloneService:this.Tr.standaloneService},{maxNumberOfWins:et.O.MAX_WINS_DEFAULT,revSharePercentage:this.Tr.generalRepository.revSharePercentage});const o=d.h.getGlobalContainer().resolve(Re.f);this.OP=new ps(o,{sessionId:this.Tr.app.config.sessionId,adSelector:this.Qa,adBidPool:this.wb});const h=d.h.getSessionChildContainer(this.Tr.app.config.sessionId).resolve(a.k),c=d.h.getSessionChildContainer(this.Tr.app.config.sessionId).resolve(_s),l=new cs(this.Qa,h,this.Tr.app.config.sessionId);this.VP=new hs(this.Qa,this.wb),this.BP=new Oe({yoScoreCalculator:this.di,playerData:this.Tr.playerData,generalRepository:this.Tr.generalRepository,auctionInfoLogging:l,adSelector:this.Qa,adContainerMap:this.Tr.adContainerMap,amazonSlotId:this.Tr.amazonTamSlotId,app:this.Tr.app,appSettings:this.Tr.appSettings,schainSettings:this.Tr.pbjsSchainSettings,skipAdSettings:this.Tr.skipPlayerSettings,sessionId:this.Tr.app.config.sessionId,adMacroReplacer:this.kP,lineItemServices:{lineItemServicesTimer:this.NP,requestCapsService:this.CP},adRequestGatekeeper:this.np,standaloneService:this.Tr.standaloneService,adEnforcer:new Ge.Jd(this.Tr.app.config.isMobile,this.wP,this.Tr.disableScrollHijackEnforcement,this.Tr.app.config.sessionId),pauseAdWhenFinished:this.Tr.pauseAdWhenFinished,loopAdWhenFinished:this.Tr.loopAdWhenFinished,os:this.Tr.app.config.os.os,adSlotContainerRecycler:this.ZI,callingValidationAggregator:this.op,auctionManager:this.OP,lineItemAbTestInformation:this.Tr.lineItemAbTestInformation,adxLastLookService:this.VP,assertiveYieldService:c},h),this.DP=new os({desiredBitRateForWins:et.O.DEFAULT_DESIRED_BITRATE,playerId:this.Tr.app.config.playerId,sessionId:this.Tr.app.config.sessionId,adSelector:this.Qa,auctionManager:this.OP,auctionInfoLogging:l,impressionCapsTimer:this.NP,adMacroReplacer:this.kP,plcmt:this.Tr.playerData.plcmt,assertiveYieldService:c,userManagerService:this.Tr.app.services.UserManagerService},h),this.LP=new Ye({adContainer:this.Bu,adSelector:this.Qa,auctionInfoLogging:l,internalAuctionSnapshot:new Ps.hR(this.Qa,this.Tr.app.config.sessionId),impressionCapsService:this.UP,impressionCapsTimer:this.NP,requestCapsService:this.CP,removeBidIfHigherYoScore:et.O.REMOVE_BIDS_DEFAULT,adRequestGatekeeper:this.np,pauseAdWhenFinished:this.Tr.pauseAdWhenFinished,loopAdWhenFinished:this.Tr.loopAdWhenFinished,adMacroReplacer:this.kP,explorationMode:this.Tr.app.config.explorationMode,playerId:this.Tr.app.config.playerId,skipAdSettings:this.Tr.skipPlayerSettings,fullSessionLog:this.Tr.generalRepository.canTrackAllRequests,deviceType:this.Tr.app.config.deviceType,sessionId:this.Tr.app.config.sessionId,adxLastLookService:this.VP,plcmt:this.Tr.playerData.plcmt,userManagerService:this.Tr.app.services.UserManagerService,assertiveYieldService:c},h),this.qP=new Is(this.Qa,this.ZI)}_P(){this.Ui.push(this.Qa.getBidEvents(as.Sb.ON_BID_LOADED).subscribe((()=>{const t=this.zI.getCurrentAdManagerState()||this.zI.getPredictedAdManagerState();this.qP.refreshImaSlots(t)})))}TP(){this.Ui.push(this.lP.onLineItemPlatformCapped.subscribe((t=>{this.mP(t)})),this.lP.onImpressionRevenue.subscribe((t=>{this.gP(t)})),this.lP.onLineItemViewabilityChange.subscribe((([t,i])=>{this.yP(t,i)})))}HP(t){this.ka.remove(t)}xP(){this.Ui.push(this.BP.onLineItemsRequestStart.subscribe((t=>{this.ka.add(t)})),this.BP.onLineItemsRequestEnd.subscribe((t=>{this.HP(t)})),this.su.onBidFetchStart.subscribe((t=>{this.Na.add(t)})),this.su.onBidFetchEnd.subscribe((t=>{this.Na.remove(t)})),this.BP.onBid.subscribe((t=>{this.wb.addBid(t)})),this.OP.onAuctionEnd.subscribe((t=>{this.uI(t.type,t.auctionId)})),this.OP.onAuctionStopCalling.subscribe((()=>{this.zP()})),this.Bu.onContainerStateUpdate.subscribe((()=>{this.ny()})),this.LP.onAdSelected.subscribe((t=>{this.xy(t)})),this.LP.onAdFinished.subscribe((t=>{this.ky()})))}uI(t,i){this.zI.auctionEnd(this.GP(t)),this.zI.impressionsAllowed&&this.WP()}GP(t){switch(t){case ds.Prefetch:return Ps.eT.Prefetched;case ds.ShortCircuitEnd:return Ps.eT.Shorted;case ds.TimeoutEnd:return this.Qa.hasLoadedBids()?Ps.eT.TimeoutWithReadyBid:Ps.eT.TimeoutWithoutReadyBid;default:return}}hasAdsEligibleForFill(t){const i=this.zI.getAdManagerState(t,this.Bu.getContainerStateMap());return this.Qa.hasAdsEligibleForFill(i)}hasUnstartedBids(){return this.Qa.hasUnstartedBids()}zP(){this.zI.predictMode&&this.BP.stop(),this.zI.auctionStopCalling()}xy(t){const{currentAdPlayerState:i,predictedAdPlayerState:e}=this.zI,s=(i||e).vastViewMode,n=this.zI.getCurrentAdManagerState().adBreakState.maxAdDuration,r=this.zI.getCurrentAdManagerState()||this.zI.getPredictedAdManagerState();this.bP=new bs(t,this.Bu,this.su,r,{adViewMode:s,maxAdDuration:n,skipAdSettings:this.Tr.skipPlayerSettings,loopAdWhenFinished:this.Tr.loopAdWhenFinished,pauseAdWhenFinished:this.Tr.pauseAdWhenFinished,sessionId:this.Tr.app.config.sessionId,plcmt:this.Tr.playerData.plcmt}),this.XP(),this.bP.setAdVolume(this.zI.currentAdPlayerState.sound);const o=t.settings.adLoadedPayload.payload.vastVerifications;(0,Tt.BZ)(o)&&this.Ao.isOmsdkFullSupport&&this.Ao.addVerificationNode(o,t.settings.adLoadedPayload.payload.containers),this.QP(t)}QP(t){var i;this.Pi.next({type:r.fI.AdLoaded,payload:null===(i=t.settings.adLoadedPayload)||void 0===i?void 0:i.payload})}ky(){this.Ao.clearPendingProcesses(),this.jP()}IP(){this.zI.adFetchingAllowed&&this.MP(),this.zI.impressionsAllowed&&this.WP()}MP(){this.uP||(this.uP=!0,this.Tr.app.services.UserManagerService.ccpaInfoLogging(this.Tr.app.config.playerId));const t=this.zI.getCallSettings();this.BP.call(t);const i=this.zI.getWinSettings();this.DP.win(i)}WP(){(this.zI.currentAdPlayerState||this.zI.predictedAdPlayerState)&&this.zI.currentAdPlayerState&&this.LP.start(this.zI.getCurrentAdManagerState())}XP(){this.JP=this.bP.onVpaidEvent.subscribe((t=>{var i;if(t.type===r.fI.AdImpression)try{const t=(null===(i=this.zI.getCurrentAdManagerState())||void 0===i?void 0:i.soundVolume)||0;this.bP.setAdVolume(t)}catch(t){(0,Y.nF)({level:Y.D_.WARN,message:"AdManager_current_sound",exception:t.message,callStack:t.stack,sessionId:this.Tr.app.config.sessionId})}this.Pi.next(t)}))}jP(){var t;null===(t=this.bP)||void 0===t||t.destroy(),this.bP=null,this.FP()}FP(){var t;null===(t=this.JP)||void 0===t||t.unsubscribe(),this.JP=null}EP(t){const i=[this.UP,this.CP];t.newContent&&i.forEach((t=>{t.resetCapsBasedOnExternalEvent(n.ProtoResetCapTypeEnum.ContentCapping)}))}}var Es=e(6115);class Ms extends ks{constructor(t,i,e){super(t,i,e),this.YP="",this.KP=()=>{},this.ZP=()=>{},this.tw=[],this.iw="",this.uI=(t,i)=>{this.ew()||this.vP.next(),i!==this.YP?super.uI(t):this.KP({success:!0})};const s=this.Bu.getMainContainer();this.ZI.preloadImaSdkSlots(s),t.lineItemList.some((t=>t.isAdxLookup))&&this.ZI.preloadImaSdkAdxLookupSlot(s),this.Ui.push(this.su.adBid.subscribe((t=>{this.rw(t)})),this.su.adPrebid.subscribe((t=>{this.ow(t)})),this.Qa.getBidEvents(Te.S.ON_BID_LOADED_CONSUMED).subscribe((()=>{this.ew()||this.vP.next()})))}enableImpressions(t){super.enableImpressions(t);const i=this.zI.getCallSettings();this.OP.startAuction(i,t.linearAdOpportunity.id)}disableImpressions(t=!1){(this.zI.impressionsAllowed||t)&&(this.OP.cancelAuction(),super.disableImpressions(t))}setLineItemMetadata(t,i,e){const s=this.xa.getByPublisherLineItemId(t.id),n=this.hw(s,t,i);(0,K.mf)(e)&&(t.shouldCallAdWithUprKey?this.aw(s,i,e):e(n))}startConnatixAuction(t,i){this.KP=i,this.zI.enablePredict(t,We.MidSessionPrefetch);const e=this.zI.getCallSettings();this.YP=(0,Ct.qs)(),this.OP.startCustomAuction(e,this.YP),this.MP()}MP(){const t=this.zI.getCallSettings();this.OP.updateState(t),super.MP()}PP(){return n.ProtoAdType.Video}aw(t,i,e){this.ZP=e;const s=this.zI.getAdManagerState(i,this.Bu.getContainerStateMap());s?this.VP.forceCallAdxLookup(t,s):this.ZP({success:!1,errorReason:Es.q.LineItemCantBeCalled})}rw(t){t.advertiserLineItemId===this.iw&&this.tw.push(this.wb.getEvents(Te.S.ON_BID_LOADED).subscribe((t=>{t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId===this.iw&&(this.ZP({success:!0}),(0,l.i)(this.tw))})))}ow(t){t.advertiserLineItemId===this.iw&&this.ZP({success:!0})}hw(t,i,e){try{if(!(0,K.$K)(t))return{success:!1,errorReason:Es.q.NoLineItem};if(t.protoLineItem.isAdxPenskeLookup=!1,!t.protoLineItem.isExternal)return{success:!1,errorReason:Es.q.NoSupportForCreativeType};if(!this.cw(i,t))return{success:!1,errorReason:Es.q.MetadataInvalid};if(this.wb.getBidsByStatus([r.wy.STARTING,r.wy.IMPRESSION]).find((i=>i.settings.adManagerLineItem===t)))return{success:!1,errorReason:Es.q.AdAlreadyStarted};if(t.updateMetadata(i),this.dw(i.id),this.lw(t),this.uw(t),i.shouldCallAdWithUprKey){t.protoLineItem.isAdxPenskeLookup=!0;const s=this.zI.getAdManagerState(e,this.Bu.getContainerStateMap()),n=s?this.Qa.getBestAllowedBidPricePubNET(s):0;t.protoLineItem.adTag=n?this.pw(t.protoLineItem.adTag,n):this.fw(t.protoLineItem.adTag),this.iw=i.id}return{success:!0}}catch(t){return{success:!1,errorReason:Es.q.Unknown}}}fw(t){const i=new URL(t),e=i.searchParams;let s=e.get("cust_params");if(s){let t=s.split("&");t=t.filter((t=>!t.startsWith(`${fe.ut}=`))),s=t.join("&"),e.set("cust_params",s)}return i.href}pw(t,i){const e=(0,J.Ph)("cust_params",t),s=new URL(t);let n=e;return n=function(t,i){const e=(i>fe.TW?fe.TW:i).toFixed(2);return t?t.replace(fe.o1,e):`${fe.ut}=${e}`}(e,i),s.searchParams.set("cust_params",n),s.href}uw(t){this.Na.bidInFetchList.filter((i=>i.adManagerLineItem===t)).forEach((t=>{t.shouldBeDiscarded=!0}))}cw(t,i){const{adTag:e,resetCapType:s,requestCap:r,impressionCap:o,resetRequestsCapTime:a,resetImpressionsCapTime:h}=(0,gt.pi)(t,i.protoLineItem);return!(!(0,K.QM)(e)||!(0,K.$K)(s))&&(!(s===n.ProtoResetCapTypeEnum.OpportunityCapping&&!(0,K.Xc)(r))&&(!(s!==n.ProtoResetCapTypeEnum.OpportunityCapping&&!(0,K.r)(r)&&!(0,K.r)(o))&&!!this.mw(s,r,o,a,h)))}mw(t,i,e,s,r){return t!==n.ProtoResetCapTypeEnum.TimeCapping||!((0,K.r)(i)&&!(0,K.Xc)(s))&&!((0,K.r)(e)&&!(0,K.Xc)(r))}lw(t){[this.UP,this.CP].forEach((i=>{i.resetCapsOnLineItemMetadataUpdate(t)}))}dw(t){this.wb.getBidsByLineItemId(t).forEach((t=>{t.invalidate()}))}ew(){const t=this.zI.getCurrentAdManagerState()||this.zI.getPredictedAdManagerState(),i=this.Qa.getBestBidAllowed(t);return(0,K.$K)(i)}}class Ls extends ks{PP(){return n.ProtoAdType.Nonlinear}enableImpressions(t){super.enableImpressions(t),this.uI()}}class Rs{get onAdLifeEnding(){return this.yw.asObservable()}constructor(t,i){this.bw=t,this.Iw=i,this.yw=new s.x,this.Ui=[],this.Pw=!1;const e=d.h.getGlobalContainer().resolve(Re.f);this.ts=new gs.B(e),this.ww(),this.Po(),this.Aw()}isDurationExpired(){return this.Pw}destroy(){this.ts.disable(),this.Ui.forEach((t=>t.unsubscribe()))}ww(){this.Ui.push(this.ts.onTimeElapsed.subscribe((()=>{this.ts.stop(),this.Pw=!0,this.yw.next()})))}Po(){this.Ui.push(this.bw.subscribe((t=>{switch(t.type){case r.fI.AdImpression:this.Sw(t.payload.adSourceData.length);break;case r.fI.AdPlaying:this.Aw();break;case r.fI.AdPaused:this._w();break;case r.fI.AdStopped:case r.fI.AdSkipped:case r.fI.AdError:this.Tw();break;case r.fI.AdVideoFirstQuartile:this.xw()}})))}_w(){this.ts.stop()}Aw(){this.ts.start()}Sw(t){if(this.Cw=Date.now(),t){this.Bv=t*ge.s_;const i=this.Bv-this.Iw;this.Ew(i),this.ts.start()}}Tw(){this.ts.stop(),this.Pw=!1}xw(){if(this.Bv)return;const t=Date.now()-this.Cw;this.Bv=4*t;const i=this.Bv-t-this.Iw;this.Ew(i)}Ew(t){const i=t<0?0:t;this.ts.reset(i)}}var Bs,Os=e(384);class Ds{constructor(t,i,e,r){this.la=t,this.nr=i,this.An=e,this.Mw=new s.x,this.Cl=new s.x,this.Lw=We.NoPrefetch,this.Bw=r===n.ProtoAdPlaybackMode.ScrollToPlay}get prefetchType(){return this.Lw}get startSessionPrefetch(){return this.Bw}set startSessionPrefetch(t){this.Bw=t}get onMidSessionPrefetchReady(){return this.Mw.asObservable()}get onPrefetchStart(){return this.Cl.asObservable()}enablePrefetch(t,i,e){this.Bw=!1,this.Lw=t,this.Cl.next(),null==e||e.enablePredict(i,t)}observeOutOfViewDistance(t,i,e,s){if(this.nr.getIframeMode()===Os.K.Safe)return void this.enablePrefetch(t,i,s);this.la.observeOutOfViewDistance(e,Ds.VIEWPORTS_THRESHOLD*this.nr.getViewportHeight(),(()=>{this.la.disconnectOutOfViewObserver(),this.enablePrefetch(t,i,s)}))}disablePrefetch(){this.Lw=We.NoPrefetch}tryPreparingMidSessionPrefetch(t,i){if(!this.Rw(t))return;const e=null==t?void 0:t.disableReason;e===c.m.TimeoutBetweenAds&&this.Mw.next(We.MidSessionPrefetch),e===c.m.InImpression&&this.Ow(t,i)&&this.Mw.next(We.MidSessionPrefetch)}Rw(t){return this.Lw===We.NoPrefetch&&null!==t&&t.adBreakLength!==Number.POSITIVE_INFINITY}Ow(t,i){return i&&t.adBreakLength<=et.O.MID_SESSION_PREFETCH_MINIMUM_TIME&&!this.An}}Ds.VIEWPORTS_THRESHOLD=1;class Ns{constructor(t,i,e,n){this.la=t,this.nr=i,this.Tr={[h.k.LINEAR]:{enable:!1,disablePayload:null,usePrefetch:!0},[h.k.NONLINEAR]:{enable:!1,disablePayload:null,usePrefetch:!1}},this.Mw=new s.x,this.Cl=new s.x,this.Ui=[],this.Dw(e,n)}get onMidSessionPrefetchReady(){return this.Mw.asObservable()}get onPrefetchStart(){return this.Cl.asObservable()}getAllLinearityKeys(){return Object.keys(this.Tr)}enable(t){this.Tr[t].enable=!0,this.Tr[t].disablePayload=null}disable(t,i){this.Tr[t].enable=!1,this.Tr[t].disablePayload=i}getDisablePayload(t){return this.Tr[t].disablePayload}setAdManager(t,i){this.Tr[t].adManager=i,this.Tr[t].usePrefetch&&(this.Tr[t].adLifecycleObserver=new Rs(i.onVpaidEvent,et.O.MID_SESSION_PREFETCH_MINIMUM_TIME),this.Ui.push(this.Tr[t].adLifecycleObserver.onAdLifeEnding.subscribe((()=>{const i=this.getDisablePayload(t),e=this.Tr[t].adLifecycleObserver.isDurationExpired();this.Tr[t].adPrefetch.tryPreparingMidSessionPrefetch(i,e)}))))}isAdManagerEnable(t){return this.Tr[t].enable}getAllAdManagers(){return this.getAllLinearityKeys().map((t=>this.Tr[t].adManager))}getAllAvailableAdManagers(){return this.getAllAdManagers().filter((t=>(0,K.$K)(t)))}getAdManagerByLinearity(t){return this.Tr[t].adManager}usePrefetch(t){return this.Tr[t].usePrefetch}enablePrefetch(t,i,e,s){this.usePrefetch(t)&&this.Tr[t].adPrefetch.enablePrefetch(i,e,s)}observeOutOfViewDistance(t,i,e,s,n){this.usePrefetch(t)&&this.Tr[t].adPrefetch.observeOutOfViewDistance(i,e,s,n)}startSessionPrefetch(t,i){this.Tr[t].adPrefetch.startSessionPrefetch=i}disablePrefetch(t){this.usePrefetch(t)&&this.Tr[t].adPrefetch.disablePrefetch()}getPrefetchType(t){if(this.usePrefetch(t))return this.Tr[t].adPrefetch.prefetchType}hasStartSessionPrefetch(t){return!!this.usePrefetch(t)&&this.Tr[t].adPrefetch.startSessionPrefetch}tryPreparingMidSessionPrefetch(t,i){var e;if(!this.usePrefetch(t))return;const s=(null===(e=this.Tr[t].adLifecycleObserver)||void 0===e?void 0:e.isDurationExpired())||!1;this.Tr[t].adPrefetch.tryPreparingMidSessionPrefetch(i,s)}destroy(){(0,l.i)(this.Ui),this.getAllAvailableAdManagers().forEach((t=>t.destroy()))}Dw(t,i){this.getAllLinearityKeys().forEach((e=>{this.Tr[e].usePrefetch&&(this.Tr[e].adPrefetch=new Ds(this.la,this.nr,t,i),this.Nw(e))}))}Nw(t){const i=this.Tr[t].adPrefetch;this.Ui.push(i.onMidSessionPrefetchReady.subscribe((i=>{this.Mw.next({prefetchType:i,linearity:h.k[t]})})),i.onPrefetchStart.subscribe((()=>{this.Cl.next()})))}}!function(t){t.adLoadedPayload=t=>({payload:{adType:t.payload.adType,adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}}),t.impressionPayload=(t,i,e)=>{const{adId:s,adVideoUrl:n,creativeId:r,name:o,length:a,imaMetadata:h,moatTrackingEnabled:c}=t.payload.adSourceData,{adType:d,adSkipMode:l,clickThroughUrl:u,customAdData:p,adSourceData:f}=t.payload;return{payload:{adType:d,adBreakType:e,adSkipMode:l,adSourceData:{moatTrackingEnabled:c,adId:s,length:a,imaMetadata:h,adVideoUrl:n,creativeId:r,name:o},clickThroughUrl:u,customAdData:{ADVERTISER:null==p?void 0:p.ADVERTISER,CAMPAIGN_ID:null==p?void 0:p.CAMPAIGN_ID,CREATIVE_ID:p.CREATIVE_ID},adDuration:f.length,selectedAdSlot:i}}},t.defaultPayload=t=>({payload:{adType:t.payload.adType}})}(Bs||(Bs={}));var Fs=e(6286),$s=e(9154);class Vs{constructor(t,i,e,n,o){this.yl=t,this._l=i,this.Al=e,this.Il=n,this.bl=o,this.Ui=[],this.kl=new s.x,this.Vw=new s.x,this.jw=new s.x,this.Ol=new s.x,this.Uw=new s.x,this.Rl=new s.x,this.Fl=new s.x,this.Dl=new s.x,this.Cl=new s.x,this.qw=new Map,this.Hw=!0,this.zw=!0,this.Gw={[h.k.LINEAR]:(t,i)=>{const e=new Ms(t,t.trackingResponseService,i);this.Tr.setAdManager(h.k.LINEAR,e)},[h.k.NONLINEAR]:(t,i)=>{const e=new Ls(t,t.trackingResponseService,i);this.Tr.setAdManager(h.k.NONLINEAR,e)}},this.Ww={mediaMetadata:{},clickToPlay:!1,linearAdOpportunity:new at.qW,newContent:!1,sound:0,vastViewMode:r.zc.Normal,adBreakState:this.Al.getAdBreakState(),playerOrientation:this._l,inFloating:this.yl.playerData.inFloating,queryJsTargeting:this.yl.queryJsTargeting},this.Tr=new Ns(this.yl.viewabilityService,this.yl.globalDomUtilsService,this.yl.loopAdWhenFinished,this.yl.adPlaybackMode),this.Hw=this.yl.canPrefetchBeforePreroll}get onLinearNoFill(){return this.Dl.asObservable()}get onAdsEnable(){return this.kl.asObservable()}get onLinearVpaidEvent(){return this.Vw.asObservable()}get onNonlinearVpaidEvent(){return this.jw.asObservable()}get onLinearImpressionRevenue(){return this.Ol.asObservable()}get onNonlinearImpressionRevenue(){return this.Uw.asObservable()}get onLinearImpressionPrice(){return this.Rl.asObservable()}get onNonlinearImpressionPrice(){return this.Fl.asObservable()}get onPrefetchStart(){return this.Cl.asObservable()}hasAdsEligibleForFill(){var t;return Boolean(null===(t=this.Tr.getAdManagerByLinearity(h.k.LINEAR))||void 0===t?void 0:t.hasAdsEligibleForFill(this.Ww))}getCurrentAdBreakType(){return this.Ww.adBreakState.adBreakType}canPrefetchAds(t){const i=this.Tr.getAdManagerByLinearity(t);this.Xw(t,We.StartSessionPrefetch,i)}initAd(t,i,e,s,n,r,o){this.Qw(r),this.tu(o),this.Tr.getAllLinearityKeys().forEach((t=>{this.Yw(h.k[t],{sound:n})})),this.Ui.push(this.Al.onAdBreakRemainingTimeUpdate.subscribe((()=>{this.Yw(h.k.LINEAR,{adBreakState:this.Al.getAdBreakState()})})))}getNewLinearAdOpportunity(){return this.Tr.getPrefetchType(h.k.LINEAR)===We.NoPrefetch?new at.qW:this.Ww.linearAdOpportunity}getAdContainerSize(t){const i=this.qw.get(t);return{height:(null==i?void 0:i.clientHeight)||0,width:(null==i?void 0:i.clientWidth)||0}}getMainAdContainerWidth(t){var i;return null===(i=this.Tr.getAdManagerByLinearity(t))||void 0===i?void 0:i.getMainContainerState().width}getCurrentAdMetadata(t){var i;return null===(i=this.Tr.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMetadata()}getCurrentAdMediaSize(t){var i;return null===(i=this.Tr.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMediaSize()}isAdInWin(t){const i=this.Tr.getAdManagerByLinearity(t);return(null==i?void 0:i.isLoadingAds())||!1}enableAds(t){this.Tr.enable(t),this.Yw(t),this.kl.next(t)}disableAds(t,i){this.Tr.disable(t,i);const e=this.Tr.getAdManagerByLinearity(t);if(!e)return;const s=(null==i?void 0:i.disableReason)===c.m.ForceDisable;e.disableImpressions(s),(null==i?void 0:i.disableReason)!==c.m.ForceDisable&&this.Tr.usePrefetch(t)&&this.Tr.tryPreparingMidSessionPrefetch(t,i)}disableAdvertising(){this.zw=!1}enableAdvertising(){this.zw=!0,this.Tr.getAllLinearityKeys().forEach((t=>{const i=h.k[t];this.enablePrefetchForLinearity(i)}))}setAdVolume(t,i){var e;null===(e=this.Tr.getAdManagerByLinearity(t))||void 0===e||e.setAdVolume(i),this.Yw(t,{sound:i})}pauseAd(t,i){var e;null===(e=this.Tr.getAdManagerByLinearity(t))||void 0===e||e.pauseAd(i)}resumeAd(t,i){var e;null===(e=this.Tr.getAdManagerByLinearity(t))||void 0===e||e.resumeAd(i)}skipAd(t){var i;null===(i=this.Tr.getAdManagerByLinearity(t))||void 0===i||i.skipAd()}stopAd(t,i){var e;null===(e=this.Tr.getAdManagerByLinearity(t))||void 0===e||e.stopAd(i)}onAdStateChange(t,i,e){const s=$s.H[i],r=$s.H[e];this.Kw(t,s,r),s===n.ProtoAdBreakTypeEnum.PreRoll&&(this.Hw=!0)}onContentChange(){this.Tr.getAllLinearityKeys().forEach((t=>{this.Yw(h.k[t],{newContent:!0})}))}setMediaRestrictions(t){const i=Object.assign(this.Ww.mediaMetadata,t);this.Tr.getAllLinearityKeys().forEach((t=>{const e=h.k[t];this.Yw(e,{mediaMetadata:i}),this.enablePrefetchForLinearity(e)}))}userInteraction(t){this.Tr.getAllLinearityKeys().forEach((t=>{this.Yw(h.k[t],{clickToPlay:!0})}))}setPlayerOrientation(t){this.Ww.playerOrientation=t,this.Tr.getAllAvailableAdManagers().forEach((i=>i.setPlayerOrientation(t)))}updateJsQueryTargeting(t){this.Ww.queryJsTargeting=(0,Wt.S1)(this.Ww.queryJsTargeting,t),this.Zw()}removeJsQueryTargeting(t){this.Ww.queryJsTargeting=(0,Wt.G_)(this.Ww.queryJsTargeting,t),this.Zw()}setVastViewMode(t){this.tA({vastViewMode:t})}newLinearAdOpportunity(t){const i=h.k.LINEAR;this.Tr.usePrefetch(i)&&(this.Ww.linearAdOpportunity=t,this.Ww.linearAdOpportunity.timestamp=Date.now(),this.Yw(i,{linearAdOpportunity:this.Ww.linearAdOpportunity}),this.Tr.disablePrefetch(i))}inFloatingChanged(t){this.Ww.inFloating=t}setCustomMacros(t){this.Tr.getAllAvailableAdManagers().forEach((i=>i.setCustomMacros(t)))}setLineItemMetadata(t,i){var e;const s=this.Tr.getAdManagerByLinearity(h.k.LINEAR);(0,K.$K)(s)?null===(e=s.setLineItemMetadata)||void 0===e||e.call(s,t,this.Ww,i):i({success:!1,errorReason:Es.q.AdManagerNotInitialized})}startConnatixAuction(t){var i;const e=this.Tr.getAdManagerByLinearity(h.k.LINEAR);(0,K.$K)(e)?null===(i=e.startConnatixAuction)||void 0===i||i.call(e,this.Ww,t):t({success:!1})}destroy(t){try{(0,l.i)(this.Ui),this.Tr.destroy()}catch(i){(0,Y.nF)({message:"AdManagerBridge_destroy",level:Y.D_.WARN,exception:i.message,callStack:i.stack,sessionId:t})}}Zw(){this.Tr.getAllAvailableAdManagers().forEach((t=>t.setQueryJsTargeting(this.Ww.queryJsTargeting)))}Qw(t){t.forEach((t=>{this.qw.set(t.type,t.container)}))}Kw(t,i,e=n.ProtoAdBreakTypeEnum.None){const s=e===n.ProtoAdBreakTypeEnum.PreRoll&&i===n.ProtoAdBreakTypeEnum.MidRoll;this.Yw(t,{adBreakState:this.Al.getAdBreakState()},s)}Yw(t,i,e=!1){this.tA(i);const s=this.Tr.getAdManagerByLinearity(t),n=null==s?void 0:s.hasUnstartedBids();if(e&&!n&&this.Tr.disable(h.k.LINEAR,{disableReason:c.m.TimeoutBetweenAds}),s&&this.Tr.isAdManagerEnable(t)){if(this.Tr.usePrefetch(t)){const i=!1;this.Tr.startSessionPrefetch(t,i)}if(t===h.k.NONLINEAR){const t=Object.assign(Object.assign({},this.Ww.adBreakState),{remainingAdDuration:0});s.enableImpressions(Object.assign(Object.assign({},this.Ww),{adBreakState:t}))}else s.enableImpressions(this.Ww);this.iA()}}tA(t){Object.assign(this.Ww,t),this.Ww.adBreakState=this.Al.getAdBreakState()}iA(){this.tA({clickToPlay:!1,newContent:!1})}enablePrefetchForLinearity(t){if(this.Tr.usePrefetch(t)&&this.Tr.hasStartSessionPrefetch(t)){const i=this.Tr.getAdManagerByLinearity(t);this.Xw(t,We.StartSessionPrefetch,i)}}Xw(t,i,e){if(!this.Hw||!this.zw||!this.Il&&this.yl.disableAdsInBackground)return;this.Ww.linearAdOpportunity=new at.qW;const s=this.yl.viewabilityService.check({element:this.bl,threshold:.1});i!==We.StartSessionPrefetch||s?this.Tr.enablePrefetch(t,i,this.Ww,e):this.Tr.observeOutOfViewDistance(t,i,this.Ww,this.bl,e)}tu(t){const i=(0,gt.mn)(this.yl.adSourceSettings.lineItems,h.k.NONLINEAR),e=(0,gt.mn)(this.yl.adSourceSettings.lineItems,h.k.LINEAR);(0,Tt.BZ)(i)&&this.sA(h.k.NONLINEAR,i,t),(0,Tt.BZ)(e)&&this.sA(h.k.LINEAR,e,t),this.nA(),this.rA()}sA(t,i,e){const s=d.h.getSessionChildContainer(e.config.sessionId).resolve(Fs.j),n=d.h.getSessionChildContainer(e.config.sessionId).resolve(a.k),r={playerData:this.yl.playerData,generalRepository:this.yl.generalRepository,standaloneService:this.yl.standaloneService,trackingResponseService:s,lineItemList:i,adBreakHelper:this.Al,adContainerMap:this.qw,amazonTamSlotId:this.yl.amazonTamSlotId,pbjsSchainSettings:this.yl.prebidJsSupplyChain,skipPlayerSettings:this.yl.skipPlayerSettings,disableScrollHijackEnforcement:!this.yl.adSourceSettings.disableScrollHijackEnforcement,pauseAdWhenFinished:this.yl.pauseAdWhenFinished,loopAdWhenFinished:this.yl.loopAdWhenFinished,app:e,lineItemAbTestInformation:this.yl.lineItemAbTestInformation,appSettings:this.yl.appSettings,disablePrefetch:this.yl.disablePrefetch};(0,this.Gw[t])(r,n),this.Ui.push(this.Tr.onMidSessionPrefetchReady.subscribe((i=>{const{linearity:e,prefetchType:s}=i,n=this.Tr.getAdManagerByLinearity(e);this.Xw(t,s,n)})),this.Tr.onPrefetchStart.subscribe((()=>{this.Cl.next()})))}nA(){const t={[h.k.LINEAR]:this.Vw,[h.k.NONLINEAR]:this.jw};Object.keys(t).forEach((i=>{const e=h.k[i];this.oA(e,t[e])}))}oA(t,i){const e=this.Tr.getAdManagerByLinearity(t);e&&this.Ui.push(e.onVpaidEvent.subscribe((e=>{var s,n;switch(e.type){case r.fI.AdLoaded:i.next({type:r.fI.AdLoaded,payload:Bs.adLoadedPayload(e)});break;case r.fI.AdImpression:{const o=null===(n=null===(s=this.Tr.getAdManagerByLinearity(t))||void 0===s?void 0:s.getCurrentAdMetadata())||void 0===n?void 0:n.adType,a=this.qw.get(o),h=this.getCurrentAdBreakType();i.next({type:r.fI.AdImpression,payload:Bs.impressionPayload(e,a,h)});break}case r.fI.AdVideoStart:case r.fI.AdError:i.next(e);break;default:i.next({type:e.type,payload:Bs.defaultPayload(e)})}})))}rA(){const t=this.Tr.getAdManagerByLinearity(h.k.LINEAR),i=this.Tr.getAdManagerByLinearity(h.k.NONLINEAR);t&&this.Ui.push(t.onImpressionRevenueEvent.subscribe((t=>{this.Ol.next(t),this.Rl.next(t.impressionRevenue)})),t.onNoFill.subscribe((()=>{this.Dl.next()}))),i&&this.Ui.push(i.onImpressionRevenueEvent.subscribe((t=>{this.Uw.next(t),this.Fl.next(t.impressionRevenue)})))}}class js extends u{$l(){const t={isOutstream:this.yl.isOutStreamType(),playbackMode:this.yl.playbackMode,initialSoundMode:this.yl.soundMode,hasFloatingCapability:this.yl.floatingSettings.hasFloatingCapability,inFloating:this.ml,liveRampEnvelope:this.Sl.services.UserManagerService.identityEnvelope,plcmt:this.yl.videoPlacement,liveRampPubId:this.cl.liveRampPubId};if(!(0,K.$K)(this.Sl.services.ViewabilityService))throw new Error("ElementsAdHandler_viewabilityService_is_undefined");if(!(0,K.$K)(this.Sl.services.GlobalDomUtilsService))throw new Error("ElementsAdHandler_globalDomUtilsService_is_undefined");const i={playerData:t,appSettings:this._appSettings,generalRepository:this.cl,viewabilityService:this.Sl.services.ViewabilityService,globalDomUtilsService:this.Sl.services.GlobalDomUtilsService,standaloneService:this.Sl.services.StandaloneService,adSourceSettings:this.yl.lineItemSettings,pauseAdWhenFinished:this.yl.pauseAdWhenFinished,loopAdWhenFinished:this.yl.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.yl.skipAdAfter,skipMin:this.yl.skipMin,skippability:this.yl.skippability},adPlaybackMode:this.yl.adPlaybackMode,amazonTamSlotId:this.yl.amazonTamSlotId,prebidJsSupplyChain:this.yl.supplyChainSettings,lineItemAbTestInformation:this.yl.lineItemAbTestInformation,disablePrefetch:this.yl.disablePrefetch,disableAdsInBackground:this.yl.disableAdsInBackground,canPrefetchBeforePreroll:this.yl.prefetchOnPreroll,queryJsTargeting:this.yl.queryJsTargeting};return new Vs(i,this._l,this.Al,this.Il,this.bl)}zl(t){return new it(this.yl,this.bl,this.Il,this.Al,this.Sl,this.he,this._l,this.Ul,t)}Ql(t){return new rt(this.yl,this.bl,this.Il,this.Al,this.Sl,this.he,this._l,this.Ul,t)}}var Us=e(8216);class qs extends js{constructor(){super(...arguments),this.hA=[],this.enterFullScreen=()=>{this.aA.enterFullScreen().then().catch((t=>{(0,Y.nF)({level:Y.D_.WARN,message:"OutstreamAdHandler_enterFullscreen",sessionId:this.yl.sessionId})}))},this.exitFullscreen=()=>{this.aA.exitFullScreen()},this.cA=()=>{this.Sl.services.InteractionService.enableScrollEvent(),this.Sl.services.EventsStorageService.emitOnExitFullscreen(),this.linearAdUserInterface.collapse(),this.setVastViewMode(r.zc.Normal)},this.dA=()=>{this.Sl.services.InteractionService.disableScrollEvent(),this.Sl.services.EventsStorageService.emitOnEnterFullscreen(),this.linearAdUserInterface.expand(),this.setVastViewMode(r.zc.Fullscreen)}}initFullScreen(){this.aA=new Us.I(this.Sl.services.GlobalDomUtilsService,this.Kl.parentElement,this.Sl.config.os.os),this.lA()}lA(){this.hA.push(this.onFullcreenChange.subscribe((t=>{t===z.C.Expand?this.enterFullScreen():this.exitFullscreen()}))),this.uA()}uA(){const t=this.aA.onFullScreenEnter.subscribe((()=>this.dA())),i=this.aA.onFullScreenExit.subscribe((()=>this.cA()));this.hA.push(i,t)}destroy(){super.destroy(),(0,l.i)(this.hA)}Gu(){return!1}}var Hs=e(8021);class zs extends Z{pA(){this.eu=this.Ru(Hs.m$.VideoSizeSlot),this.Ou(this.eu),this.ru.push(this.eu)}Lu(){super.Lu(),this.pA()}Eu(t){super.Eu(t),t===this.eu&&(0,Q.cn)(this.bl,V.s6.AdFullSize)}qu(){super.qu(),this.Ul.userInteraction(!0)}Fu(){return!1}updateContinueReadingCard(){const t=this.Ul.getCurrentAdMediaSize(h.k.LINEAR);(0,K.$K)(t)&&(this.Gu(t)?this.ku.showContinueReadingCard(this.Bu):this.ku.hideContinueReadingCard(this.Bu))}}class Ws extends u{$l(){const t={isOutstream:!1,playbackMode:this.yl.playbackMode,initialSoundMode:this.yl.soundMode,hasFloatingCapability:this.yl.floatingSettings.hasFloatingCapability,inFloating:this.ml,liveRampEnvelope:this.Sl.services.UserManagerService.identityEnvelope,plcmt:this.yl.videoPlacement,liveRampPubId:this.cl.liveRampPubId};if(!(0,K.$K)(this.Sl.services.ViewabilityService))throw new Error("PlayspaceAdHandler_viewabilityService_is_undefined");if(!(0,K.$K)(this.Sl.services.GlobalDomUtilsService))throw new Error("PlayspaceAdHandler_globalDomUtilsService_is_undefined");const i={playerData:t,appSettings:this._appSettings,generalRepository:this.cl,viewabilityService:this.Sl.services.ViewabilityService,globalDomUtilsService:this.Sl.services.GlobalDomUtilsService,standaloneService:this.Sl.services.StandaloneService,adSourceSettings:this.yl.lineItemSettings,pauseAdWhenFinished:this.yl.pauseAdWhenFinished,loopAdWhenFinished:this.yl.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.yl.skipAdAfter,skipMin:this.yl.skipMin,skippability:this.yl.skippability},adPlaybackMode:this.yl.adPlaybackMode,amazonTamSlotId:this.yl.amazonTamSlotId,prebidJsSupplyChain:this.yl.supplyChainSettings,lineItemAbTestInformation:this.yl.lineItemAbTestInformation,disablePrefetch:this.yl.disablePrefetch,disableAdsInBackground:this.yl.disableAdsInBackground,queryJsTargeting:this.yl.queryJsTargeting,canPrefetchBeforePreroll:!0};return new Vs(i,this._l,this.Al,this.Il,this.bl)}Yl(t,i){return[{container:this.Kl,width:this.Kl.offsetWidth,height:this.Kl.offsetHeight,type:n.ProtoAdType.Overlay},{container:this.eu,width:this.eu.offsetWidth,height:this.eu.offsetHeight,type:n.ProtoAdType.Video}]}zl(t){return new zs(this.yl,this.bl,this.Il,this.Al,this.Sl,this.he,this._l,this.Ul,t)}Ql(){}}},8532:(t,i,e)=>{"use strict";e.d(i,{Km:()=>r,Zr:()=>s,jJ:()=>n,n9:()=>o});const s={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged",FloatingEnterStart:"floatingEnterStart",FloatingEnterStop:"floatingEnterStop",FloatingExitStart:"floatingExitStart",FloatingExitStop:"floatingExitStop",CloseButtonClicked:"closeButtonClicked",CtaButtonClicked:"ctaButtonClicked"},n={OmidViewabilityThreshold:"OmidViewabilityThreshold",OmidAdSessionStart:"omidAdSessionStart",OmidAdSessionFinish:"omidAdSessionFinish"},r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice",ImpressionRevenue:"impressionRevenue",SessionInView:"sessionInView",Bid:"bid",PrefetchStart:"prefetchStart"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),s),n),{AdOpportunity:"adOpportunity",AdLoaded:"adLoaded",AdStarted:"adStarted",AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdVolumeChange:"adVolumeChange",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"}),{Stopped:"stopped",Buffering:"buffering",Preroll:"preroll",Postroll:"postroll",Hidden:"hidden"});var o;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError",t.InvalidGUID="InvalidGUID"}(o||(o={}))},8576:(t,i,e)=>{"use strict";var s,n,r,o,a;e.d(i,{FX:()=>r,Ht:()=>h,Oc:()=>a,Zv:()=>o,bS:()=>c,do:()=>n,lI:()=>s}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ETHERNET=1]="ETHERNET",t[t.WIFI=2]="WIFI",t[t.CELLULAR_UNKNOWN=3]="CELLULAR_UNKNOWN",t[t.CELLULAR_2G=4]="CELLULAR_2G",t[t.CELLULAR_3G=5]="CELLULAR_3G",t[t.CELLULAR_4G=6]="CELLULAR_4G",t[t.CELLULAR_5G=7]="CELLULAR_5G"}(r||(r={})),function(t){t.ETHERNET="ethernet",t.WIFI="wifi",t.CELLULAR="cellular"}(o||(o={})),function(t){t.CELLULAR_SLOW_2G="slow-2g",t.CELLULAR_2G="2g",t.CELLULAR_3G="3g",t.CELLULAR_4G="4g"}(a||(a={}));const h=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var c;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(c||(c={}))},8983:(t,i,e)=>{"use strict";e.d(i,{Gj:()=>s,Hs:()=>S,Ig:()=>c,Ng:()=>d,PK:()=>v,QO:()=>p,Rp:()=>_,Rq:()=>a,fA:()=>m,ed:()=>u,hQ:()=>y,iu:()=>l,jG:()=>g,mr:()=>A,oV:()=>P,p0:()=>x,pT:()=>w,s6:()=>n,sN:()=>I,s_:()=>r,vF:()=>h});var s,n,r,o=e(1988);!function(t){t.Invisible="cnx-mod-invisible",t.HovarableButton="cnx-ui-btn-hoverable",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.NoHeight="cnx-mod-no-height",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdNonLinear="cnx-in-ad-non-linear",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.AdContainer="cnx-in-ad-container",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.PodLoadingScreen="cnx-in-pod-loading",t.AdShowCountdown="cnx-ad-show-countdown",t.CloseOn="cnx-close-on",t.CloseOff="cnx-close-off",t.CloseHover="cnx-close-hover",t.CloseFloatOn="cnx-close-float-on",t.CloseFloatOff="cnx-close-float-off",t.CloseFloatHover="cnx-close-float-hover",t.OutsidePlayerCloseButton="cnx-outside-close-button",t.UiInView="cnx-ui-in-view",t.ClickToPlayThumbnail="cnx-click-to-play-thumbnail",t.VideoWrapper="cnx-video-wrapper",t.PlayerFocused="cnx-focused",t.TabFocus="cnx-tab-focus",t.AdUserInteraction="cnx-ad-user-interaction",t.BottomButtonsContainer="cnx-ui-buttons",t.HeadButtonsContainer="cnx-ui-head-buttons",t.MuteWatermark="cnx-mute-watermark"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const a={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},h={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};o.Z.XL,o.Z.LG,o.Z.MD,o.Z.SM,o.Z.XS;var c,d,l,u,p,f,m;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(c||(c={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(d||(d={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(l||(l={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(u||(u={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(p||(p={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(f||(f={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition",t.InstantTransitionClass="cnx-float-instant-transition",t.AlwaysFloating="cnx-always-floating",t.PinnedTopFloating="cnx-pinned-top-floating",t.PinnedFloating="cnx-pinned",t.PinnedBottomFloating="cnx-pinned-bottom-floating",t.PinnedWrapper="cnx-pinned-wrapper",t.ContentWrapper="cnx-content-wrapper",t.HidePinnedTitle="cnx-hide-pinned-title-in-ad",t.FloatingPositionLeft="cnx-float-position-left",t.FloatingPositionRight="cnx-float-position-right",t.FloatingPositionTop="cnx-float-position-top",t.FloatingPositionBottom="cnx-float-position-bottom"}(m||(m={}));const g={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var v,y,b;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(v||(v={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(y||(y={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(b||(b={}));const I={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},P="cnx-ratio",w="cnx-hide-video",S={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},A={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"},x={CloseButton:"cnx-ad-close-non-linear-button"},_={Wrapper:"cnx-a11y-status"}},3775:(t,i,e)=>{"use strict";var s;e.d(i,{b:()=>s}),function(t){t.GarbageCollector="data-cnx-gc",t.ContextMenuSettings="cnx-ui-cm-settings"}(s||(s={}))},7945:(t,i,e)=>{"use strict";e.d(i,{g:()=>s,x:()=>n});const s=JSON.parse('{"version":411324,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),n=!0},5227:(t,i,e)=>{"use strict";var s,n;e.d(i,{Uh:()=>n,Xh:()=>s,dP:()=>r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={})),function(t){t.UserInteraction="userInteraction",t.GeneralUserInteraction="generalUserInteraction",t.CanStart="canStart",t.Destroy="destroy"}(n||(n={}));const r={StateChanged:"stateChanged"}},9022:(t,i,e)=>{"use strict";e.d(i,{$b:()=>h,f3:()=>n,fJ:()=>o,kd:()=>a,xs:()=>r});var s=e(289);const n=31,r={[s.ProtoAdType.Video]:2e3,[s.ProtoAdType.Overlay]:1e3,[s.ProtoAdType.Nonlinear]:1e3},o=.5,a="connatix.com",h="Advertisement"},8211:(t,i,e)=>{"use strict";e.d(i,{M:()=>r,a:()=>n});var s=e(289);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux",t.IPadOS="ipados"}(r||(r={}))},307:(t,i,e)=>{"use strict";e.d(i,{Fk:()=>n,Kp:()=>o,a8:()=>a,br:()=>s,cc:()=>r,ym:()=>h});const s="https://info.connatix.com/",n="v",r="tier",o="pid",a="sid",h="cid"},1509:(t,i,e)=>{"use strict";var s;e.d(i,{n:()=>s}),function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(s||(s={}))},9357:(t,i,e)=>{"use strict";e.d(i,{T9:()=>s,Y0:()=>a,p7:()=>n,s_:()=>o,ti:()=>h,uD:()=>r});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,o=1e3,a=60,h=864e5},9490:(t,i,e)=>{"use strict";var s,n,r,o,a;e.d(i,{Ez:()=>r,L5:()=>o,Qg:()=>l,T$:()=>a,XQ:()=>h,ZH:()=>n,gQ:()=>d,se:()=>c,wB:()=>s}),function(t){t.Play="play",t.Playing="playing",t.Pause="pause",t.Mute="mute",t.Unmute="unmute",t.Canplay="canplay",t.Ended="ended",t.Timeupdate="timeupdate",t.Seeking="seeking",t.Seeked="seeked",t.Volumechange="volumechange",t.Durationchange="durationchange",t.Fullscreen="fullscreen",t.LoadedData="loadeddata",t.LoadedMetadata="loadedmetadata",t.Error="error",t.BufferProgress="progress"}(s||(s={})),function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(n||(n={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported",t[t.InCuePoint=12]="InCuePoint"}(r||(r={})),function(t){t.H264="h264",t.Hevc="hevc"}(o||(o={})),function(t){t.PlayError="playError",t.NewVideo="newVideo",t.Buffering="buffering",t.Buffered="buffered",t.LevelSwitching="levelSwitching",t.LevelSwitched="levelSwitched",t.EndOfStream="endOfStream",t.LiveStreamNotPlayable="liveNotPlayable",t.DurationUpdate="DurationUpdate"}(a||(a={}));const h={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};var c;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(c||(c={}));const d=720,l=5e3},7423:(t,i,e)=>{"use strict";var s;e.d(i,{k:()=>s}),function(t){t.LINEAR="LINEAR",t.NONLINEAR="NONLINEAR"}(s||(s={}))},6027:(t,i,e)=>{"use strict";e.d(i,{e:()=>a,j:()=>s});var s,n=e(9791);class r{}r.clientAb0=(0,n.Vm)([0,0,0,0,50,50]),r.clientAb1=(0,n.Vm)([0,50,50]),r.clientAb2=0,r.clientAb3=0,r.clientAb4=0,r.clientAb5=0;class o{}o.clientAb0=(0,n.Vm)([0,0,0,0,50,50]),o.clientAb1=(0,n.Vm)([0,50,50]),o.clientAb2=0,o.clientAb3=0,o.clientAb4=0,o.clientAb5=0,function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(s||(s={}));class a{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static get clientAb2(){return this.getABValueForKey("clientAb2")}static get clientAb3(){return this.getABValueForKey("clientAb3")}static get clientAb4(){return this.getABValueForKey("clientAb4")}static get clientAb5(){return this.getABValueForKey("clientAb5")}static getABValueForKey(t){return this.abServiceType===s.PlayspaceABService?o[t]:r[t]}static setClientAb0(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb0=t;else r.clientAb0=t}static setClientAb1(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb1=t;else r.clientAb1=t}static setClientAb2(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb2=t;else r.clientAb2=t}static setClientAb3(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb3=t;else r.clientAb3=t}static setClientAb4(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb4=t;else r.clientAb4=t}static setClientAb5(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb5=t;else r.clientAb5=t}}},2450:(t,i,e)=>{"use strict";e.d(i,{$:()=>h});var s=e(289);const n="ats-liveramp-envelope-request";var r=e(9791),o=e(4798),a=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class h{static getEnvelopeFromParentAts(t){var i;return a(this,void 0,void 0,(function*(){if(!(null===(i=h.envelope)||void 0===i?void 0:i.envelope))try{const i=yield this.vA(t);return(0,o.$K)(i)?void(h.envelope=JSON.parse(i)):void h.communicateViaPostMessage(t)}catch(t){}}))}static vA(t){return a(this,void 0,void 0,(function*(){if(t.ats){try{return t.ats.retrieveEnvelope().then((t=>t))}catch(t){}return this.retrieveEnvelopeWithCallback(t)}}))}static retrieveEnvelopeWithCallback(t){return a(this,void 0,void 0,(function*(){return new Promise((i=>{t.ats.retrieveEnvelope((t=>{i(t)}))}))}))}static communicateViaPostMessage(t){h.dispatchEnvelopeRequestEvent(t),h.addEnvelopeListener()}static dispatchEnvelopeRequestEvent(t){try{t.postMessage(n,"*")}catch(i){void 0!==t.contentWindow&&t.contentWindow.postMessage(n,"*")}}static receiveEnvelopeListener(t){t&&t.data&&"ats-liveramp-envelope-result"===t.data.message&&t.data.result&&(h.envelope=JSON.parse(t.data.result),window.removeEventListener("message",h.receiveEnvelopeListener))}static addEnvelopeListener(){window.addEventListener("message",h.receiveEnvelopeListener,!1)}static getEnvelopeWithConsent(t,i){return new Promise(((e,s)=>{i.isConsentConnatix()?h.getEnvelopeFromParentAts(t).then((()=>{var t;(null===(t=h.envelope)||void 0===t?void 0:t.envelope)?e(h.envelope.envelope):setTimeout((()=>s()),500)})):setTimeout((()=>s()),500)}))}static getEnvelope(t,i){return a(this,void 0,void 0,(function*(){yield(0,r.Up)((()=>h.getEnvelopeWithConsent(t,i))).catch((()=>{}))}))}static setEnvelopeStatus(t){h.envelopeStatus=t}static getValidEnvelope(){var t;return(null===(t=h.envelope)||void 0===t?void 0:t.envelope)&&h.envelopeStatus===s.LiveRampEnvelopeStatusEnum.Ok?h.envelope.envelope:null}static wasRequestEnhanced(t){var i;return(null===(i=h.envelope)||void 0===i?void 0:i.envelope)&&t===s.LiveRampEnvelopeStatusEnum.Ok}static destroy(){h.envelope=null}}h.envelope=null,h.envelopeStatus=s.LiveRampEnvelopeStatusEnum.Ok},9710:(t,i,e)=>{"use strict";e.d(i,{ai:()=>l});var s=e(3),n=e(5460);const r=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],o="cnxtestadblock";var a=e(9906),h=e(9791),c=e(4798),d=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class l{static get isBannerBlocked(){return this.mA}static onAdBlockerDetected(){return this.gA.asObservable()}static detectUsingCSS(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",this.bA(t));const e=t.document.getElementById(o);return 0!==e.getBoundingClientRect().height&&0!==e.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(e),this.IA(i),i}catch(t){return this.IA(!1),!1}}static detectUsingScript(){return d(this,void 0,void 0,(function*(){return new Promise((t=>{const i=(0,h.pE)(window).topFrame,e=i=>{this.gA.next(i),this.gA.complete(),t(i)},s=()=>(0,c.QM)(i.googletag.getVersion())?e(!1):e(!0);i.googletag&&e(!1);a.h.getGlobalContainer().resolve(n.f).fetchGoogleTag().then((()=>{var t;i.googletag?null===(t=i.googletag.cmd)||void 0===t||t.push(s):e(!0)})).catch((()=>{e(!0)}))}))}))}static IA(t){this.mA=t,this.mA&&(this.gA.next(!0),this.gA.complete())}static bA(t){const i=t.location.hostname.toLowerCase().indexOf("aljazeera.net")>-1;let e=[...r];i&&(e=e.filter((t=>"text-ads"!==t&&"text-ad-links"!==t)));const s=e.join(" ");return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${o}" class="${s}"></div>`}}l.mA=null,l.gA=new s.t(1)},7129:(t,i,e)=>{"use strict";var s;!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.viewableImpression="viewableImpression",t.postbid="postbid",t.initAd="initAd",t.request="request",t.startAd="startAd",t.adVerification="adVerification"}(s||(s={}))},9741:(t,i,e)=>{"use strict";e.d(i,{S:()=>s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.playerDestroyed=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},5742:(t,i,e)=>{"use strict";e.d(i,{f:()=>n});var s=e(307);class n{static getCidKeyValueObject(){return!!this.customerId&&{[s.ym]:this.customerId}}static getCidForElkTracking(){return this.customerId?this.customerId:""}}n.customerId=null},8395:(t,i,e)=>{"use strict";e.d(i,{f:()=>d});var s=e(8843),n=e(6196);var r,o=e(8659),a=e(9607),h=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},c=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)};let d=r=class{constructor(){var t,i;this.PA=new Map,this.wA=0,this.SA=(void 0===(t=r.TIME_BETWEEN_TICKS)&&(t=0),void 0===i&&(i=s.z),t<0&&(t=0),(0,n.H)(t,t,i)),this.SA.subscribe((()=>this._A()))}setTimeout(t,i=0){return this.xA(t,i,!0)}clearTimeout(t){this.PA.delete(t)}setInterval(t,i=0){return this.xA(t,i,!1)}clearInterval(t){this.PA.delete(t)}kA(t){try{t.callback()}catch(t){(0,a.nF)({message:"TimerService_error",callStack:t.stack,exception:t.message,level:a.D_.INFO},{throttle:1})}}_A(){const t=(new Date).getTime(),i=[];for(const[e,s]of this.PA)t-s.startTime<s.duration*(s.intervalTimesCalled+1)||(this.kA(s),s.isTimeout?i.push(e):s.intervalTimesCalled++);for(const t of i)this.PA.delete(t)}xA(t,i,e){const s=++this.wA;return this.PA.set(s,{startTime:(new Date).getTime(),isTimeout:e,callback:t,duration:i,intervalTimesCalled:0}),s}};d.TIME_BETWEEN_TICKS=100,d=r=h([(0,o.ri)(),c("design:paramtypes",[])],d)},6115:(t,i,e)=>{"use strict";var s,n;e.d(i,{B:()=>n,q:()=>s}),function(t){t.NoLineItem="No line item",t.MetadataInvalid="Metadata invalid",t.AdAlreadyStarted="Ad already started",t.NoSupportForCreativeType="Only js api defined creatives can be updated",t.AdManagerNotInitialized="Ad manager not initialized",t.LineItemCantBeCalled="Ad can not be called do to no player state",t.Unknown="The line item could not be updated"}(s||(s={})),function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(n||(n={}))},7916:(t,i,e)=>{"use strict";var s;e.d(i,{g:()=>s}),function(t){t[t.None=0]="None",t[t.Portrait=1]="Portrait",t[t.Landscape=2]="Landscape"}(s||(s={}))},9223:(t,i,e)=>{"use strict";var s,n;e.d(i,{P:()=>n,ai:()=>s}),function(t){t.absolute="absolute",t.relative="relative"}(s||(s={})),function(t){t.auto="auto",t.all="all"}(n||(n={}))},5935:(t,i,e)=>{"use strict";e.d(i,{X:()=>d});var s=e(1102),n=e(8576),r=e(8211),o=e(9791),a=e(51),h=e(2728),c=e(4798);class d{constructor(t){this.Tr=t,this.CA=100,this.EA=(0,o.pE)(window).topFrame,this.MA=r.a.indexOf(this.Tr.browser.device)>-1,this.Yr=(0,o.dz)(),this.LA={browserType:this.BA(),browserVersion:this.Tr.browser.browserVersion},this._s=this.OA(),this.DA=s.EN.fromProtoGetDeviceType(this.Tr.browser.device),this.NA=this.pageUrl.substr(0,this.CA),this.xn=(0,a.ge)(this.NA),this.VA=(0,a.FM)(this.NA)}BA(){let t;return Object.keys(n.lI).forEach((i=>{this.Tr.browser.browserType.toLowerCase().includes(n.lI[i])&&(t=n.lI[i])})),t}OA(){let t,i=0;const e=this.Tr.browser.osCode.split("_"),s=e[0].toLowerCase();return Object.keys(r.M).forEach((i=>{s.includes(r.M[i])&&(t=r.M[i])})),t===r.M.IPadOS&&(t=r.M.Ios),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.Tr.browser.device}get browser(){return this.LA}get os(){return this._s}get deviceType(){return this.DA}get geoLocation(){return this.Tr.geoLocation}get pageUrl(){return this.Tr.pageUrl||""}get sessionId(){return this.Tr.sessionId}get pageUrlTrunc(){return this.NA}get pageDomain(){return this.xn}get pageDomainFullPath(){return this.VA}get isMobile(){return this.MA}get isInApp(){return(0,c.QM)(this.Tr.bundleID)}get isAmp(){return this.Tr.isAmp}get playerId(){return this.Tr.playerId}get appId(){return this.Yr}get bundleID(){return(0,c.QM)(this.Tr.iOSAppID)?this.Tr.iOSAppID:this.Tr.bundleID}get domainURL(){return this.Tr.domainURL}get storeURL(){return this.Tr.storeURL}get explorationMode(){return this.Tr.explorationMode}get appName(){return this.Tr.appName}get appCategories(){return this.Tr.appCategories}get appVersion(){return this.Tr.appVersion}get sdkVersion(){return this.Tr.sdkVersion}get appPrivacyPolicy(){return this.Tr.appPrivacyPolicy}get appIsPaid(){return this.Tr.appIsPaid}get topWindow(){return this.EA}get appPageURL(){return this.Tr.appPageURL}get isOVPDomain(){return this.Tr.isOVPDomain}get canUseExternalAdService(){return this.Tr.canUseExternalAdService||h.$.canUseNativeImaSdk(this.Tr.sdkVersion)}}},7597:(t,i,e)=>{"use strict";e.d(i,{$w:()=>c,Eg:()=>n,FH:()=>o,P8:()=>r,Ro:()=>s,TW:()=>f,o1:()=>p,qx:()=>d,rU:()=>l,ut:()=>u,wF:()=>h,zt:()=>a});const s="1d73d9ef-fa29-4c16-bad5-82002c247b60",n="4692b5d8-dc46-4a86-a548-511a24809ca8",r=.1,o=1,a=39.9,h="last_look",c=1,d=39.5,l="upr",u="cnxbid",p="[CNX_BEST_BID]",f=50.99},5106:(t,i,e)=>{"use strict";var s;e.d(i,{m:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds",t[t.InImpression=2]="InImpression",t[t.LinearDemandMissing=3]="LinearDemandMissing",t[t.ForceDisable=4]="ForceDisable",t[t.AdContentDurationRatioElapsed=5]="AdContentDurationRatioElapsed",t[t.StayNextButtonsDisplayed=6]="StayNextButtonsDisplayed"}(s||(s={}))},7994:(t,i,e)=>{"use strict";e.d(i,{C:()=>s});class s{constructor(){this.nS=!1,this.promise=new Promise(((t,i)=>{this.rS=t,this.oS=i}))}hS(){this.nS||(this.nS=!0)}resolve(t){this.hS(),this.rS(t)}reject(t){this.hS(),this.oS(t)}get isPending(){return!this.nS}}},6299:(t,i,e)=>{"use strict";e.d(i,{P:()=>h});var s,n=e(289);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const r={[n.ProtoDeviceType.Desktop]:s.Desktop,[n.ProtoDeviceType.Smartphone]:s.Smartphone,[n.ProtoDeviceType.Tablet]:s.Tablet,[n.ProtoDeviceType.GameConsole]:s.GameConsole,[n.ProtoDeviceType.SmartTV]:s.SmartTV,[n.ProtoDeviceType.WearableComputer]:s.Unrecognized,[n.ProtoDeviceType.PDA]:s.Unrecognized,[n.ProtoDeviceType.Unrecognized]:s.Unrecognized},o="cnx_fraud_sensor";var a=e(4798);class h{constructor(t,i,e,s){this.aS=t,this.cS=i,this.dS=e,this.lS(s)}addFraudSensorScript(){if(this.cS.getElementById(o))return;const t={id:o,src:this.aS.setupMacros("https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[FS_DEVICE_IDENT]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]")};this.cS.insertScript(t,null,"FraudSensor_script_error")}lS(t){t=(0,a.QM)(t)?t:"00000000-0000-0000-0000-000000000000";const{lookupId:i,lookupResponseCode:e,deviceIdentifier:s}=this.dS,n=r[this.dS.deviceType];this.aS.setUserId(t),this.aS.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:n,mediaType:2,deviceIdentifier:s})}}},8216:(t,i,e)=>{"use strict";e.d(i,{I:()=>c});var s,n=e(6716),r=e(8576),o=e(8211),a=e(7994),h=e(9607);!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(s||(s={}));class c{constructor(t,i,e,r){if(this.nr=t,this._s=e,this.us=r,this.uS=!1,this.fS=1e3,this.vS=!0,this.mS=new n.x,this.gS=new n.x,this.yS=!1,this.PS=()=>{this.uS&&this.wS()},this.AS=t=>{this.uS?null!==this.fullscreenElement?this.wS():this.SS():this.mS.next(s.exit)},this.SS=()=>{this.yS=!1,this._S.reject(),this.uS=!1,clearTimeout(this.TS)},this.xS=this.nr.hasIosFullscreenBehaviour(e)?i.getElementsByTagName("video")[0]:i,!this.xS)throw new Error("element is missing");try{const t=this.kS();if(null==t)return void(this.vS=!1);this.CS=t.keys,this.ES=t.name,this.MS()}catch(t){this.vS=!1,(0,h.nF)({message:"Fullscreen init failed",exception:t.message,callStack:t.stack,level:h.D_.CRITICAL,sessionId:this.us})}}kS(){let t;return t=this.nr.hasIosFullscreenBehaviour(this._s)?this.nr.getFullscreenKeys(this.xS):this.nr.getFullscreenKeys(),t}get fullscreenElement(){return this.nr.getDocumentProperty(this.CS.fullscreenElement)}get fullscreenEnabled(){return this.nr.getDocumentProperty(this.CS.fullscreenEnabled)}enterFullScreen(){if(this.vS){this._S=new a.C,this.uS=!0,clearTimeout(this.TS),this.TS=setTimeout(this.SS,this.fS);try{this.xS[this.CS.requestFullscreen]()}catch(t){this.SS()}return this._S.promise}}exitFullScreen(){try{this.nr.exitFullscreen(this.CS.exitFullscreen,this._s===o.M.Ios?this.xS:void 0)}catch(t){(0,h.nF)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:h.D_.WARN,sessionId:this.us})}this.yS=!1}MS(){this.ES===r.do.Moz||this.ES===r.do.Ms?(this.nr.addEventListenerOnGlobal(this.CS.fullscreenchange,this.AS),this.nr.addEventListenerOnGlobal(this.CS.fullscreenerror,this.SS)):(this.xS.addEventListener(this.CS.fullscreenchange,this.AS),this.xS.addEventListener(this.CS.fullscreenerror,this.SS)),this.nr.hasIosFullscreenBehaviour(this._s)&&(this.xS.addEventListener("webkitbeginfullscreen",this.PS),this.xS.addEventListener("webkitendfullscreen",this.AS))}LS(){this.ES===r.do.Moz||this.ES===r.do.Ms?(this.nr.removeEventListenerOnGlobal(this.CS.fullscreenchange,this.AS),this.nr.removeEventListenerOnGlobal(this.CS.fullscreenerror,this.SS)):(this.xS.removeEventListener(this.CS.fullscreenchange,this.AS),this.xS.removeEventListener(this.CS.fullscreenerror,this.SS)),this._s===o.M.Ios&&(this.xS.removeEventListener("webkitbeginfullscreen",this.PS),this.xS.removeEventListener("webkitendfullscreen",this.AS))}wS(){this.yS=!0,this.gS.next(s.enter),this._S.resolve(),this.uS=!1,clearTimeout(this.TS)}get isFullscreen(){return this.yS}get onFullScreenExit(){return this.mS.asObservable()}get onFullScreenEnter(){return this.gS.asObservable()}destroy(){this.isFullscreen&&this.exitFullScreen(),this.LS(),this._S&&this._S.isPending&&this._S.reject()}}},1828:(t,i,e)=>{"use strict";e.d(i,{o:()=>m});var s=e(5204),n=e(3020);const r="cnxProxyTask",o=`\n    window.${r} = function(task) {\n        setTimeout(function(){\n            task();\n        }, 0);\n    }\n`;class a{static executeAsync(t,i){this.BS(t)(i)}static RS(t){return!!t[r]}static BS(t){return this.RS(t)||this.OS(t),t[r]}static OS(t){const i=t.document.head;(0,n.ML)(i,t,o)}}var h,c=e(9223),d=e(862),l=e(9906),u=e(9791),p=e(9607),f=e(4798);!function(t){t.errorIframe="Error creating iframe"}(h||(h={}));class m{constructor(t,i,e){this.ls=t,this.us=i,this.DS=e}VS(t,i,e){let s=!1;return n=>{n.contentWindow&&!s&&(s=!0,this.FS(n,this.jS(t,i),e))}}$S(t,i,e,s,n,r,o,a,h,c,d=!0,l="",u=""){return this.qS(t,this.VS(i,e,s),n,r,o,a,h,c,d,l,u)}qS(t,i,e=c.ai.absolute,s=c.P.auto,r,o,a,h,d=!0,l="",u=""){const p=this.ls.createElement("iframe",a);let m="100%",g="100%";return(null==h?void 0:h.scalable)?(m=h.scalable.maxHeightPercent+"%",g=h.scalable.maxWidthPercent+"%"):(null==h?void 0:h.width)&&(null==h?void 0:h.height)&&(m=h.height+"px",g=h.width+"px"),(0,f.QM)(l)&&(0,n.cn)(p,l),r&&(p.title=r),u&&(p.id=u),p.allow="autoplay",p.src="javascript:false",p.srcdoc="",p.width=g,p.height=m,p.style.position=e,p.style.left="0",p.style.top="0",p.style.margin="0px",p.style.padding="0px",p.style.border="0px",p.style.width=g,p.style.height=m,p.style.pointerEvents=s,d||(p.style.display="none"),p.setAttribute("SCROLLING","NO"),null==o||o.forEach((t=>{p.setAttribute(t.key,t.value)})),p.onload=()=>{i(p)},t.appendChild(p),i(p),p}FS(t,i,e){const s=(0,n.LT)(t);a.executeAsync(s,(()=>{try{const e=t.contentWindow&&t.contentWindow.document;e.open(),e.write(i)}catch(i){this.HS(t,i),t=null}e(t)}))}jS(t,i){return Object.keys(i).forEach((function(e){const s="object"==typeof i[e]?JSON.stringify(i[e]):i[e];t=t.replace(new RegExp(`{{${e}}}`,"g"),s)})),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+(0,u.qs)();return new Promise(((n,r)=>{const o=i=>{if(null===i)return void r(h.errorIframe);const o=t=>{let s;try{s=JSON.parse(t.data)}catch(t){return}s.id===e&&(i.contentWindow?(i.contentWindow.document.close(),i.contentWindow.removeEventListener("message",o),n({iframe:i})):r("The Iframe is no longer in the DOM"))};try{if(i.contentWindow.addEventListener("message",o),!t.customReportingLog)return;const{advertiserLineItemId:e,heavyAdBlockTypeEnum:n}=t.customReportingLog,r=l.h.getSessionChildContainer(this.us).resolve(s.k);this.zS=new d.Z(this.GS.contentWindow,{advertiserLineItemId:e,heavyAdBlockTypeEnum:n},r)}catch(t){this.HS(i,t),r("Iframe callback error")}};try{this.GS=this.$S(t.container,i,{iframeID:e},o,t.iframePosition,t.iframePointerEvents,t.title,t.customIframeAttributes,this.DS,t.iframeCustomDimensions,t.visible,t.iframeClass,t.iframeId)}catch(t){(0,p.nF)({message:"IframeLoader_error_creating_iframe",level:p.D_.WARN,exception:t.message,callStack:t.stack,sessionId:this.us})}}))}get iframe(){return this.GS}destroy(){var t;try{null===(t=this.zS)||void 0===t||t.destroy(this.us),this.GS=null}catch(t){const{message:i,stack:e}=(0,u.W$)(t);(0,p.nF)({level:p.D_.WARN,message:"IframeLoader_destroy",exception:i,callStack:e,sessionId:this.us})}}HS(t,i){this.ls.isDetachedFromDOM(t)?(0,p.nF)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:p.D_.WARN,sessionId:this.us},{shouldSendMaxLog:!1,throttle:1}):(0,p.nF)({message:"iframeLoader_(inDom_true)",exception:i.message,callStack:i.stack,level:p.D_.WARN,sessionId:this.us},{shouldSendMaxLog:!1,throttle:1}),(0,n.bX)(t)}}},3360:(t,i,e)=>{"use strict";e.d(i,{Q:()=>o});var s=e(6153),n=e(7332),r=e(4798);class o{static getScaledImageUrl(t,i,e,s,a){if(t&&!(0,n.ON)({width:i,height:e}))return(0,r.r)(a)&&(i=(0,n.Tc)(i,a),e=(0,n.Tc)(e,a)),s.appendParamsToUrl(`${t}${o.getScaledImageQueryParams(i,e)}`.trim())}static getScaledImageQueryParams(t,i){return(0,n.ON)({width:t,height:i})?"":`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e,a){return(0,r.QM)(t)||(t=s.n.endPoints.base.image),(0,n.ON)({width:i,height:e})&&(i=140,e=80),a.appendParamsToUrl(`${t}${o.getSmartCroppedImageQueryParams(i,e)}`)}static getSmartCroppedImageQueryParams(t,i){const e=this.thumbnailQuality>=1&&this.thumbnailQuality<=100?this.thumbnailQuality:60;return(0,n.ON)({width:t,height:i})?"":`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=${e}&fit=crop`}static getDefaultPoster(t){const i=`${s.n.endPoints.base.image}default_video_poster.svg`;return t.appendParamsToUrl(i)}}o.thumbnailQuality=60},8049:(t,i,e)=>{"use strict";e.d(i,{a:()=>lt});var s=e(4975),n=e(4727),r=e(5419),o=e(289),a=e.n(o),h=e(7953),c=e.n(h),d=e(5675),l=e(7214),u=e(6628),p=e(8041),f=e(5530),m=e(2493),g=e(2979),v=e(942),y=e(7298),b=e(9005),I=e(8736),P=e(1968),w=e(8532),S=e(8983),A=e(7945),x=e(5227),_=e(307),T=e(6027),C=e(9710),k=e(9741),E=e(5935),M=e(6299),L=e(7745),R=e(5701),B=e(4701),O=e(604),D=e(3326),N=e(9906),F=e(6661),$=e(6153),V=e(384),j=e(5687),U=e(6666),q=e(1992),H=e(7187),z=e(4474),W=e(5292),G=e(5421),X=e(1553),Q=e(3222),J=e(5650),Y=e(3020),K=e(9791),Z=e(51),tt=e(9607),it=e(9600),et=e(3003),st=e(4798),nt=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};const rt="player_instance",ot=",",at=3,ht="google_ads_iframe",ct=["googlesyndication.com","googleads.g.doubleclick"],dt=["partner.googleadservices","admanager.google"];class lt extends R.ai{constructor(t,i,e,s,n,r,o=null,a=Date.now()){super(),this.services=t,this.GLOBAL=i,this.WS=e,this.QS=s,this.JS=n,this.readyCallback=r,this.YS=o,this.KS=a,this.ZS=!1,this.t_=!1,this.i_={},this.e_="<cnx-placeholder></cnx-placeholder>",this.r_=100,this.o_=1e3,this.a_=700,this.c_=[],this.PLAYER_REQUEST_RETRIES_NUMBER=2,this.isServerlessMode=!1,this.d_=!1,this.l_=[],C.ai.detectUsingCSS(this.GLOBAL),this.u_=(0,K.YY)(this.p_(),this.a_),this.f_=(0,Y.sw)(this.GLOBAL)}initUrlSuffixer(t){const i=new X.f;if(t.bandwidthLoggingState===o.ProtoBandwidthLoggingEnum.Disabled)return i;const e=this.v_(t);return i.setUrlParams({domain:$.n.bundleDomain,urlParams:[(0,et.IS)(e,t.playerId)]}),i}m_(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(t.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(t.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}g_(){if(!(0,st.QM)(this.queryParams.cnxFeatureFlags))return;const t=this.queryParams.cnxFeatureFlags.split(","),i={};return t.forEach((t=>i[t]=!0)),i}y_(t){const i=this.GLOBAL.frameElement;if(!(0,Y.GF)(i))return;let e=!0;i&&t&&(e=!1),e?(0,Y.MV)(i):(0,Y.Ho)(i)}b_(t,i){try{return this.I_(t,i)}catch(t){return null}}P_(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}w_(t,i){const e=this.b_(t,i);return null===e?new Promise((e=>{setTimeout((()=>{e(this.w_(t,i))}),this.r_)})):Promise.resolve(e)}A_(t,i){const e=this.P_(t);return Promise.resolve(this.w_(e,i))}I_(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter((t=>t)).forEach((t=>{e=t.includes("cnxEq")?this.S_(e,t):e?e.querySelectorAll(t):(0,Y.Wb)(t,i)})),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}S_(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?(0,J.Sz)(t)[t.length-1]:(0,J.Sz)(t)[s]}__(){return(0,J.BZ)(this.services.StandaloneService.standaloneLineItemsWithBids)?o.ProtoImplementationType.Standalone:this.QS?o.ProtoImplementationType.Amp:o.ProtoImplementationType.Web}x_(){return dt.some((t=>{var i;return null===(i=this.pageUrl)||void 0===i?void 0:i.includes(t)}))}k_(){let t=window,i=!1,e=V.K.None;try{for(;t.parent.document!==t.document;){if(i=this.C_(t),i){e=V.K.Friendly;break}t=t.parent}}catch(s){i=this.E_(t),i&&(e=V.K.Safe)}return{isInGamIframe:i,gamIframeType:e}}M_(){return this.ZS?{isInGamIframe:!0,gamIframeType:V.K.Safe}:this.k_()}E_(t){return ct.some((i=>{var e;return null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.href.includes(i)}))}C_(t){var i;return!!(null===(i=null==t?void 0:t.frameElement)||void 0===i?void 0:i.id.includes(ht))}B_(t,i){const e=(0,K.pE)(this.GLOBAL);this.ZS=this.x_();const{isInGamIframe:s}=this.M_();let n;return this.t_=s,n=(0,st.$K)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise(((s,r)=>{let o=(0,Y.G$)(this.e_,this.GLOBAL);if(n||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,n,r;e.topChildFrame&&(0,Y.IV)(e.topChildFrame.frameElement,S.Gj.DisplayNone),t=(0,st.QM)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,n=(0,st.$K)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,r=(0,st.$K)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.A_(t,e.topFrame).then((t=>{this.R_(t,o,n,r),s({insertContainer:o,insertWindow:e.topFrame})}))}else e.topChildFrame&&!i.renderInFrame?(o=(0,Y.G$)(this.e_,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(o,e.topChildFrame.frameElement),(0,Y.cn)(e.topChildFrame.frameElement,S.Gj.DisplayNone),s({insertContainer:o,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(o,t.tag),s({insertContainer:o}))}))}O_(t,i,e){(0,Y.IS)(i,t,e)}N_(t,i,e){switch(e){case o.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case o.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),(0,Y.bX)(t);break;case o.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),(0,Y.MV)(t);break;case o.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}R_(t,i,e,s){e===o.ProtoPlayerInsertMode.WithinContainer?this.O_(t,i,s):this.N_(t,i,e)}V_(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=(0,J.qy)("advertiserLineItemId",t.lineItems),e!==t.lineItems.length&&(0,tt.nF)({level:tt.D_.WARN,message:"Loader_duplicated_adsources",callStack:"_",extra:this.YS})}F_(t,i){var e,s,n,r,a;const h=t.players[i],{sessionId:c}=h,{playerModel:d,globalDomUtilsService:u,urlSuffixerService:p}=this.i_[i],{gamIframeType:f}=this.M_();if(this.services.UserManagerService.setGeoLocation(t.geoLocation),k.S.sessionId=c,!d)return void this.registerApiError(w.n9.SetupError,"No playlist was provided!");const m=new E.X({iOSAppID:this.WS.isInApp&&!this.WS.isInAppSDK?t.iOSAppID:null,browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:d.playerId,explorationMode:t.explorationMode,isAmp:this.QS,bundleID:this.externalAttributes._appSettings.bundleID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,sdkVersion:this.externalAttributes._appSettings.sdkVersion,appPageURL:this.externalAttributes._appSettings.appPageURL,isOVPDomain:this.JS,canUseExternalAdService:this.externalAttributes.settings._connatixInternals.useExternalAdService,sessionId:c}),g=null===(s=null===(e=this.externalAttributes.settings)||void 0===e?void 0:e._connatixInternals)||void 0===s?void 0:s.serverAb0,y={browser:t.browser,geoLocation:t.geoLocation,playerId:d.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:t.players[i].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:t.players[i].abTestId,isExplorationMode:t.explorationMode,bundleAbId:t.bundleAbId,bundlePart:t.bundlePart,lineItemAbTestInformation:t.lineItemAbTestInformation,implementationType:this.__(),iasSegmentCodes:t.IASSegmentCodes,amazonTamPubId:t.AmazonTamPubId,liveRampPubId:t.liveRampPubId,serverAb0:(0,st.hj)(g)?g:void 0,bundleLoadTimestamp:this.KS,revSharePercentage:t.players[i].revSharePercentage},b={gamIframeType:f,sessionId:c,omidWindow:(0,K.pE)(window).topFrame,isInAppSdk:this.WS.isInAppSDK,isInApp:this.WS.isInApp,isGam:this.t_,sdkVersion:this.externalAttributes._appSettings.sdkVersion?this.externalAttributes._appSettings.sdkVersion:void 0,pageUrl:this.pageUrl},S={skipToNextVideoAfter:d.skipToNextVideoAfter,isMechanismEnabled:d.hasAdContentDurationRatio},{sessionEvents:A,generalRepository:_,wcagService:T,mediaEvents:M,trackingService:R,adEvents:B}=l.o.boostrapSessionContainer(h.sessionId,y,this.services.UserManagerService,this.services.StandaloneService,d.disableTracking,this.services.EventsStorageService,b,u,null===(r=null===(n=this.externalAttributes.settings)||void 0===n?void 0:n.advertising)||void 0===r?void 0:r.prebidPermutiveParamsConfig,d.featureFlags,S),O=new W.v(u),D=this.getViewabilityService(d,O,_),$=new P.ai;C.ai.detectUsingCSS(d.global);const V=new z.c(d,t.geoLocation,m.pageUrl,m.pageDomain,m.pageDomainFullPath,this.externalAttributes._appSettings,this.f_,t.publisherNetworkCode),j=null===(a=t.userInformation)||void 0===a?void 0:a.publisherAdsTxt;(0,st.QM)(j)&&V.setPublisherId(j);const U={services:{GlobalDomUtilsService:u,ViewabilityService:D,ResizeObserver:new G.a(d.global,d.sessionId),UserManagerService:this.services.UserManagerService,MacrosService:V,EventsStorageService:this.services.EventsStorageService,PageFocusService:O,InteractionService:new H.k(d.global,m.isMobile),UrlSuffixerService:p,StandaloneService:this.services.StandaloneService,UID2Service:$},config:m};U.services.UserManagerService.setPageUrl(U.config.pageUrl),_.playerEnvironment=this.j_(),_.region=t.region,_.videoPlacement=d.videoPlacement,d.externalMacros&&U.services.MacrosService.addExtraMacros(d.externalMacros),N.h.getGlobalContainer().register(F.c.GlobalDomUtilsService,{useValue:u});const q=U.services.UserManagerService.getForcedTrackableUser(),X=U.services.UserManagerService.getForcedIDFV(),J=this.WS.isInApp?U.config.bundleID:U.config.pageDomain;this.rg=this.U_(c,t,J,q,X),U.services.UserManagerService.onEvent([Q.k.CCPA_INFO_RECEIVED]).then((()=>{U.services.MacrosService.setUsPrivacyString(U.services.UserManagerService.getUsPrivacyString());N.h.getGlobalContainer().resolve(v.L).initIfSupported(t,c),this.rg.init(U.services.UserManagerService.isPersonalisedAdsAllowed())})),U.services.UserManagerService.onEvent([Q.k.CCPA_INFO_RECEIVED,Q.k.USER_SETUP_COMPLETE]).then((()=>nt(this,void 0,void 0,(function*(){t.useIntentiqUserSyncing&&U.services.UserManagerService.onEvent([Q.k.USER_INFO_RECEIVED]).then((()=>{(0,L.jE)(U.services.UserManagerService.getUserId()),(0,L.pS)(U.services.UserManagerService.getUserId())}))})))),U.services.UserManagerService.onEvent([Q.k.CONSENT_DATA_UPDATE,Q.k.USER_SETUP_COMPLETE]).then((()=>nt(this,void 0,void 0,(function*(){_.userId=U.services.UserManagerService.getTrackableUser(),_.isIdentityEnhanced=U.services.UserManagerService.isIdentityEnhanced,C.ai.isBannerBlocked&&A.sessionAdBlocked.next({adBlockDetectionType:I.ev.Banner})})))),U.services.UserManagerService.onEvent([Q.k.CONSENT_DATA_UPDATE]).then((()=>{const t=U.services.UserManagerService.getConsentPayload();if(_.hasGdprConsentPayload=(0,st.QM)(t),this.services.UserManagerService.gdprConsentMode===o.ProtoGdprConsentModeEnum.NoConsent||this.WS.isInApp){const t=d.lineItemSettings.lineItems.filter((t=>(0,st.QM)(t.vendorId))).every((t=>this.services.UserManagerService.isConsent(t.vendorId)));this.services.UserManagerService.gdprConsentMode=t?o.ProtoGdprConsentModeEnum.AllGood:o.ProtoGdprConsentModeEnum.NotAllDemandConsent}})),this.renderer=this.getRendererInstance(d,U,this.externalAttributes._appSettings,A,B,M,_,T,R),this.subscribe(x.Xh.SessionRendered,this.renderer,(()=>{this.q_(V,u,U.config)}));const Y=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let Z=h.customJsCode;try{Z=Z.trim(),Z="try\n            {   var trackerData;\n                var trackerDataWoodford;\n                const api2 = \"{{player_instance}}\";\n                api2.on('adImpression',function(data){\n                    if(data.adSourceData.adId === '56445225-357b-4728-847b-5ff007dddc2d' || data.adSourceData.adId === 'eff225cb-dc0b-40d0-82aa-c6343d2f513d'){\n                        trackerData.impressionTrackers.forEach(function(el){\n                            const img = new Image();\n                            img.src = el.url;\n                        });\n                    }\n                    if(data.adSourceData.adId === '25fa169b-d527-4939-97cb-91bac272368f' || data.adSourceData.adId === '72f84310-19a9-4d07-8377-93efafcbdaae' || data.adSourceData.adId ==='72f84310-19a9-4d07-8377-93efafcbdaae'){\n                        trackerDataWoodford.impressionTrackers.forEach(function(el){\n                            const img = new Image();\n                            img.src = el.url;\n                        });\n                    }\n                });\n                api2.on('bid',function(data){\n                    if(data.advertiserLineItemId === 'e021c805-a361-483c-b11c-5142342d87ef'){\n                        trackerData = data;\n                        api2.updateJsQueryTargeting({audiance:'enable'})\n                    }\n                    if(data.advertiserLineItemId === 'bbdf1792-fd92-4ab1-8452-763fd8603818'){ // woodford targeting\n                        trackerDataWoodford = data;\n                        api2.updateJsQueryTargeting({audiance_woodford:'enable'})\n                    }\n                });\n            } catch(e){}; "+Z}catch(t){}if(Z){const t=`${rt}_${U.config.appId}`;this.GLOBAL[t]=Y,Z=Z.cnx_replaceAll(`"{{${rt}}}"`,`window.${t}`)}this.renderer.init((()=>{this.H_(Z),this.c_.push(this.renderer.onDestroy().subscribe((t=>{t&&this.destroy()})))}))?this.registerApiSuccess(Y):this.registerApiError(w.n9.RenderError,"Player size under supported value")}U_(t,i,e,s,n){const r={sessionId:t,playerResponse:i,domainName:e,idfa:s,idfv:n,supportedIdentityPartners:i.supportedIdentityPartners};return N.h.getGlobalContainer().register(F.c.IdentityProviderSettings,{useValue:Object.assign({},r)}),N.h.getGlobalContainer().resolve(m.l)}H_(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,(0,Y.ML)(n.document.head,n,r.trim())}z_(){return nt(this,void 0,void 0,(function*(){try{yield O.c.getInstance().load(this.JS)}catch(t){(0,tt.nF)({message:"Loader_doPlayerIdCall_load_user_sync",level:tt.D_.INFO})}const{playerId:t,parseDomain:i}=this.W_;return this.X_(t,i).catch((t=>{const i=new Error(t);throw(0,tt.nF)({callStack:i.stack,level:tt.D_.CRITICAL,exception:i.message,message:"Prerender_Loader_player_id_call_get_pls",extra:this.YS},{throttle:1e3}),this.registerApiError(w.n9.SetupError,"player data call error"),this.Q_(),i}))}))}J_(t){t.players.forEach((({playerType:t})=>{t===h.ProtoElementsTypeEnum.OutStream&&this.JS&&(0,tt.nF)({message:"PlayerType_outstream_on_ovp_domain",level:tt.D_.CRITICAL,extra:this.YS})}))}Y_(t){const i=t.usedAdxHttpClient,e=t.foundPredictionInV1;i?e?T.e.setClientAb5(2):T.e.setClientAb5(3):e?T.e.setClientAb5(4):T.e.setClientAb5(1)}K_(t){var i;return nt(this,void 0,void 0,(function*(){const{browser:e,userInformation:s}=t;if(this.Y_(t),this.J_(t),this.services.UserManagerService.setBrowserInfo(e),this.services.UserManagerService.resolveBotEvent(Boolean(null===(i=t.userInformation)||void 0===i?void 0:i.ivt)),t.hashedPageUrl&&(yield U.k.loadPageInsights({insightsInputType:q.i.Page,id:t.hashedPageUrl})),s&&s.callFraudSensor){const{lookupId:t,lookupResponseCode:i}=s;this.dS={lookupId:t,lookupResponseCode:i,deviceType:e.device}}if((0,J.BZ)(t.players)){if(t.players.length>1&&(this.m_(),this.d_=!0),p.q8===f.b.Omid&&!this.WS.isInAppHybrid){const t=(0,u.W)(p.oM);yield(0,K.Up)((()=>nt(this,void 0,void 0,(function*(){return yield(0,d.Z)(`${t}omid.verification.client.1.4.9.js`)}))))}Object.keys(t.players).forEach((i=>{this.Z_(t,this.W_,i)}))}else this.registerApiError(w.n9.NoPlayer,`No player available for given player id:${this.W_.playerId}`);this.Q_()}))}Q_(){this.tT(),this.iT()}iT(){this.renderer&&this.c_.push(this.renderer.onReady().pipe((0,s.h)((t=>!!t)),(0,n.q)(1)).subscribe((()=>{try{if(!this.d_){const t=this.l_[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this.sT()}catch(t){(0,tt.nF)({message:"Loader_JSApi_readyCallback",exception:t.message,callStack:`playerId: ${this.W_.playerId}`,level:tt.D_.WARN},{pacing:1})}})))}sT(){this.l_.filter((t=>t.apiErrorObj)).forEach((()=>{this.services.EventsStorageService.emitRenderError()}))}Z_(t,i,e){const s=t.players[e],{playerModel:n}=this.i_[e];this.y_(s.renderInFrame),this.F_(t,e),this.nT(n,this.renderer.playerContainer)}X_(t,i=!1){let e={parseDomain:i,referrer:this.f_,pageUrl:this.pageUrl,tokens:[t]};e.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(e.forceLineItemIds=this.queryParams.cnxLineItemId.split(ot).filter((t=>(0,st.QM)(t)))),this.queryParams.cnxPlayerId?e.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(e.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(e.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return(0,st.as)(s)&&Object.keys(s).length>0&&(e.queryJsTargeting=(0,K.rM)(s)),e.customParam1=this.externalAttributes.customParam1,e.customParam2=this.externalAttributes.customParam2,e.customParam3=this.externalAttributes.customParam3,e.customParam4=this.externalAttributes.customParam4,e.customParam5=this.externalAttributes.customParam5,e.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,e.version=A.g.version,e.es6=A.x,e.userId=this.services.UserManagerService.getForcedTrackableUser(),e.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),e.isConsentLotame=this.services.UserManagerService.isConsentLotame(),e.clientAb0=T.e.clientAb0,e.clientAb1=T.e.clientAb1,e.iiqEnabledAB=g.s.IIQ_ENABLED_AB,e.iiqGroupAB=g.s.IIQ_GROUP_AB,e.implementationType=this.__(),e.servingRuleId=this.externalAttributes.servingRuleId,e=Object.assign(Object.assign({},e),this.getSpecificRequestData()),this.W_.playerId?this.getPlayerResponse(e):new Promise(((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())}))}rT(){const t=(0,Z.Ph)("cnxVideoPosition",this.pageUrl),i=parseInt((0,Z.Ph)("cnxStoryPosition",this.pageUrl),10),e=(0,Z.Ph)("cnxEnableNewUi",this.pageUrl);return{cnxStoryId:(0,Z.Ph)("cnxStoryId",this.pageUrl),cnxLineItemId:(0,Z.Ph)("cnxLineItemId",this.pageUrl),cnxPlayerId:(0,Z.Ph)("cnxPlayerId",this.pageUrl),cnxMediaId:(0,Z.Ph)("cnxMediaId",this.pageUrl),cnxPlaylistId:(0,Z.Ph)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===(0,Z.Ph)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:(0,st.r)(i)?i:null,cnxSkipAdsFlag:"true"===(0,Z.Ph)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt((0,Z.Ph)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===(0,Z.Ph)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===(0,Z.Ph)("cnxIsSeoTraffic",this.pageUrl),cnxDebug:"true"===(0,Z.Ph)("cnxDebug",this.pageUrl),cnxEnableNewUi:(0,et.yd)(e),cnxDebugLogs:"true"===(0,Z.Ph)("cnxDebugLogs",this.pageUrl),cnxFeatureFlags:(0,Z.Ph)("cnxFeatureFlags",this.pageUrl)}}nT(t,i){const e=this.getDelegateHandler(),s=new B.N(this.GLOBAL,this.services.EventsStorageService,e,t,i);this.JS?C.ai.isBannerBlocked||this.c_.push(C.ai.onAdBlockerDetected().subscribe((t=>{t||s.start()}))):s.start()}q_(t,i,e){if(!this.dS)return;const s=this.services.UserManagerService.getTrackableUser();this.dS.deviceIdentifier=e.bundleID;const n=new M.P(t,i,this.dS,s);this.JS?this.c_.push(C.ai.onAdBlockerDetected().subscribe((t=>{t||n.addFraudSensorScript()}))):n.addFraudSensorScript()}oT(t){C.ai.isBannerBlocked||(this.JS?this.c_.push(C.ai.onAdBlockerDetected().subscribe((i=>{i||this.services.UserManagerService.setThirdPartySyncUrls(t)}))):this.services.UserManagerService.setThirdPartySyncUrls(t))}hT(t){const i=()=>new Promise(((i,e)=>{const s=this.aT();t.addCssStylesheetToHead(s,(()=>i()),(t=>e(t)))}));return(0,K.Up)((()=>i())).catch((t=>{throw(0,tt.nF)({message:"Loader_add_css_link",exception:t,level:tt.D_.INFO,extra:this.YS}),new Error(t)}))}v_(t){return t.bandwidthLoggingState===o.ProtoBandwidthLoggingEnum.Enabled?_.Kp:t.bandwidthLoggingState===o.ProtoBandwidthLoggingEnum.SaaS?_.a8:void 0}j_(){if(this.WS.isInAppSDK)return this.WS.isInAppFlutter?b.Q.InAppFlutter:this.WS.isInAppReactNative?b.Q.InAppReactNative:b.Q.InAppSdk;if(this.WS.isInAppHybrid)return b.Q.InAppWebview;if(this.WS.isInApp)return b.Q.InAppGam;if(this.QS)return b.Q.WebAmp;const{gamIframeType:t}=this.M_();switch(t){case V.K.Safe:return b.Q.WebGamSafeIframe;case V.K.Friendly:return b.Q.WebGamFreindlyIframe}return b.Q.Web}p_(){return(0,K.Up)((()=>nt(this,void 0,void 0,(function*(){const t=N.h.getGlobalContainer().resolve(y.n),i=this.__(),e=t.getUser(),s=(0,st.Ft)(e)?yield this.services.UserManagerService.fetchUserIdentification(i,this.JS,r.cW.Enabled):e;this.services.UserManagerService.lotamePanorama=null==s?void 0:s.panorama,this.services.UserManagerService.userAudienceIdList=null==s?void 0:s.audienceIdList,this.cT(s),this.services.UserManagerService.onEvent([Q.k.NON_BOT_DETECTED]).then((()=>{(0,st.$K)(s)&&(0,st.QM)(s.userId)&&(this.services.UserManagerService.setupLotameService(s),this.services.UserManagerService.setGeoLocation(s.geoLocation),this.services.UserManagerService.setUserId(s.userId,s.isIdentityEnhanced),s.isIdentityEnhanced&&t.cacheUser(s)),(0,st.$K)(s)&&(0,st.Xz)(s.cookieSyncUrls)&&($.n.setTier(s.tier),this.oT(s.cookieSyncUrls)),this.services.UserManagerService.resolveUserSetupEvent()}))}))),at).catch((t=>{(0,tt.nF)({message:"Loader_getUserIdentification",exception:t.message,callStack:t.callStack,level:tt.D_.WARN,extra:this.YS},{throttle:1,pacing:1})}))}cT(t){(0,tt.nF)({message:"Loader_userIdentificationResult",exception:(0,st.$K)(t)?"userIsSticky":"userNotSticky",level:tt.D_.INFO,extra:this.YS},{throttle:1,pacing:1})}dT(){try{const t=window.frameElement;if(!(this.j_()===b.Q.Web)||null!==t&&"javascript:false"===t.src)return;(0,tt.nF)({message:"Loader_iframe_missing",exception:this.W_.playerId,callStack:"",level:tt.D_.INFO},{pacing:1,throttle:1,shouldSendMaxLog:!1})}catch(t){}}setInappPageUrl(t){(0,st.QM)(t)&&(this.pageUrl=t)}updateQueryParams(){this.queryParams=this.rT()}loadScriptTag(t,i){if(this.externalAttributes=t,(0,st.QM)(t.playerId)&&!(0,K.er)(t.playerId))return(0,tt.nF)({level:tt.D_.WARN,message:"Invalid_Player_GUID",exception:t.playerId,extra:this.YS}),this.registerApiError(w.n9.InvalidGUID,"Invalid PlayerID was provided"),!1;let e;if(i&&(e=this.GLOBAL.document.getElementById(i)),!e)return(0,tt.nF)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:tt.D_.INFO,extra:this.YS},{pacing:5}),this.registerApiError(w.n9.SetupError,"Could not locate any script tag ids in the page"),!1;const s=(0,st.as)(t.settings.plugins.adobeAnalyticsSettings);return this.W_={parseDomain:s,playerId:t.playerId,tag:e},this.dT(),!0}insertRenderer(){try{(0,L.d9)(this.queryParams.cnxReloadTime),this.y_();const t=()=>{try{this.z_().then((t=>{const i=[];i.push(this.u_),t.players.forEach(((e,s)=>{t.players[s].limitClientSideApiUse&&this.m_();const n=this.B_(this.W_,e).then((i=>{this.V_(e,t.lineItems);const n=this.initUrlSuffixer(e);T.e.serverAb0=t.serverAb0,T.e.serverAb1=t.serverAb1,this.services.UserManagerService.isCoreSyncResolved||(0,tt.nF)({message:"Loader_coreSyncNotResolved_before_pls",level:tt.D_.INFO},{pacing:1});const r=this.getPlayerModel(i,t,n,s.toString()),o=new j.m(r.global);return(0,D.u)(r.lineItemSettings.lineItems,this.YS),this.ZS&&(r.disableAdvertising=!0,e.lineItems=[]),this.i_[s]={playerModel:r,globalDomUtilsService:o,urlSuffixerService:n},this.hT(o)})).catch((t=>{this.registerApiError(w.n9.SetupError,"rendering error"),(0,tt.nF)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:tt.D_.CRITICAL,extra:this.YS})}));i.push(n)})),Promise.all(i).then((()=>this.K_(t)))}))}catch(t){(0,tt.nF)({message:"Prerender_Loader_do_player_call",callStack:t.stack,exception:t.message,level:tt.D_.WARN,extra:this.YS},{throttle:1e3})}};this.tT=this.services.UserManagerService.registerPlsCall(t)}catch(t){(0,tt.nF)({message:"Prerender_Loader_insert_renderer",exception:t.message,callStack:t.stack,level:tt.D_.CRITICAL,extra:this.YS})}}findPageUrl(t,i,e=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||(0,K.lU)((0,K.pE)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return e||(0,tt.nF)({message:"Prerender_Loader_find_page_url",level:tt.D_.INFO,extra:this.YS},{throttle:1e3}),new Promise((e=>{setTimeout((()=>{this.findPageUrl(t,i,!0).then((()=>e()))}),this.o_)}));try{return this.pageUrl=(0,Z.sH)(this.pageUrl),Promise.resolve()}catch(t){return(0,tt.nF)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:tt.D_.CRITICAL,extra:this.YS}),Promise.reject()}}registerApiError(t=w.n9.SetupError,i=""){this.l_.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t){this.l_.push({apiConfigObj:t})}destroy(){this.renderer&&this.renderer.destroy(),this.rg&&this.rg.destroy(),(0,it.i)(this.c_)}}},7745:(t,i,e)=>{"use strict";e.d(i,{d9:()=>h,jE:()=>o,pS:()=>a});var s=e(9357),n=e(9791),r=e(6578);function o(t){const i=`https://sync.intentiq.com/profiles_engine/ProfilesEngineServlet?at=20&mi=10&dpi=372401555&pcid=${t}`;r.n.trackPixel(i)}function a(t){const i=`https://i.liadm.com/s/81549?bidder_id=246480&bidder_uuid=${t}`;r.n.trackPixel(i)}function h(t){const i=(0,n.pE)(window).topFrame;setTimeout((()=>{i.location.reload()}),t||s.ti)}},6224:(t,i,e)=>{"use strict";e.d(i,{t:()=>a});var s=e(9791),n=e(9607),r=e(4798),o=e(6578);class a{constructor(t,i){this.lT=t,this.uT=i,this.fT=(t,i)=>new Promise(((e,s)=>{o.n.sendProtoRequest({protoResponse:this.lT,endpoint:t,requestType:"GET",shouldLogErrors:!0,timeout:i}).then((t=>{e(t)})).catch((t=>{s(t)}))}))}fetchMetadata(t,i=5,e=!0,n){const o=t=>403===this.vT(t);return new Promise(((a,h)=>{(0,s.Up)((()=>this.fT(t,n)),i,o).then((i=>{if((0,r.as)(i))return a(i);const e=new Error("invalid metadata");return this.mT({url:t,metadata:i,e}),h(e)})).catch((i=>{e&&this.mT({url:t,e:i}),h(i)}))}))}mT(t){var i;const e=(0,r.QM)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";e.includes("XhrUtils_XMLHttpRequest_error")||(0,n.nF)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.uT}_${e}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:n.D_.CRITICAL})}vT(t){if(t&&t.message){const i=t.message.split("status:")[1];return i?parseInt(i.slice(0,3),10):null}return null}}},5701:(t,i,e)=>{"use strict";e.d(i,{ai:()=>n});var s=e(5650);class n{constructor(){this.gT={}}subscribe(t,i,e){this.gT[t]||(this.gT[t]=[]),this.gT[t].push({context:i,func:e})}unsubscribe(t,i,e){this.gT[t]&&(this.gT[t]=this.gT[t].filter((t=>!(t.context===i&&(t.func===e||!e)))))}unsubscribeAll(t){Object.keys(this.gT).forEach((i=>{this.gT[i]=this.gT[i].filter((i=>i.context!==t))}))}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.gT,i)&&this.gT[i].forEach((i=>{i.context===t&&i.func(e)}))}relay(t,i,e,n){(0,s.qo)(t).forEach((t=>{this.subscribe(t,i,(i=>{n.publish(e,t,i)}))}))}relayBulk(t,i,e){t.forEach((t=>{this.relay(t.channel,t.source,i,e)}))}}},2859:(t,i,e)=>{"use strict";e.d(i,{Q:()=>n});var s=e(4798);class n{constructor(){this.Ui={}}on(t,i){if(this.Ui[t]=this.Ui[t]||[],!(0,s.mf)(i))throw new Error(`${t} event callback is not a function`);return this.Ui[t].push(i),()=>this.Ui[t]=this.Ui[t].filter((t=>t!==i))}once(t,i){const e=this.on(t,(t=>{try{i(t)}catch(t){}e()}))}remove(t,i){this.Ui[t]&&(this.Ui[t]=this.Ui[t].filter((t=>t!==i)))}removeAll(){this.Ui={}}trigger(t,i){this.Ui[t]&&this.Ui[t].forEach((t=>{try{t(i)}catch(t){}}))}}},4701:(t,i,e)=>{"use strict";e.d(i,{N:()=>p});var s,n=e(7945);!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));class r{constructor(t){this.yT=[],this.bT=t=>{this.yT.push(t)},this.IT=t.subscribe(this.bT)}get cachedEvents(){return this.yT}destroy(){this.yT=null,this.IT()}}var o=e(6153),a=e(5650),h=e(3020),c=e(9791),d=e(51),l=e(9607),u=e(4798);class p{constructor(t,i,e,s,r){this.PT=i,this.wT=e,this.yl=s,this.ST=r,this._T=[],this.TT=t=>{try{this.xT(t);const i=this._T.find((i=>i.name===t.type));let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:r,_debugLogging:o}=this.yl.apiConfig.settings.plugins,{secondLevelDomain:a,playerId:h}=this.yl,c={cachedEvents:e,adobeAnalyticsSettings:s,moatAnalyticsSettings:r,_debugLogging:o,secondLevelDomain:a,playerId:h,pageName:this.kT,pageUrl:this.Sf,version:n.g.version,delegateHandlers:this.wT,playerContainer:this.ST,playerWindow:window};t.getInstance().start(this.PT,c)}catch(t){(0,l.nF)({callStack:t.stack,exception:t.message,level:l.D_.CRITICAL,message:"PluginsHandler_initPlugin",sessionId:this.yl.sessionId})}};const o=(0,c.pE)(t);this.Th=o.topFrame,this.Sf=(0,c.lU)(o,this.Th),this.Sf=(0,d.sH)(this.Sf),this.kT=(0,d.ge)(this.Sf)}start(){this.CT(),this.ET(),this.Th.cnxPlugins.pluginsHandlers.push(this.TT)}CT(){let t=[];Array.isArray(this.Th.cnxPlugins)&&this.Th.cnxPlugins.length>0&&(t=this.Th.cnxPlugins,t.forEach((t=>this.TT(t)))),(0,u.as)(this.Th.cnxPlugins)||this.MT(t)}ET(){const t=this.BT();(0,a.BZ)(t)&&this.RT(t)}OT(t){const i=this.Th.cnxPlugins.cachedPlugins;if((0,a.BZ)(i))return i.find((i=>i.type===t))}xT(t){this.OT(t.type)||this.Th.cnxPlugins.cachedPlugins.push(t)}MT(t){this.Th.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push(t){this.pluginsHandlers.forEach((i=>{i(t)}))}}}RT(t){t.forEach((t=>{this.OT(t)||this._T.push({name:t,started:!1,eventsCacheHandler:new r(this.PT)})})),this._T.forEach((({name:t})=>this.DT(t)))}NT(t){return Object.values(t).every((t=>(0,u.QM)(t)))}BT(){const t=[];return this.yl.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.NT(this.yl.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.yl.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}DT(t){const i={id:`cnx-${t}`,src:""};switch(t){case s.AdobeAnalytics:i.src=o.n.endPoints.assets.plugins.adobeAnalytics;break;case s.MoatAnalytics:i.src=o.n.endPoints.assets.plugins.moatAnalytics}this.Th.document.getElementById(i.id)||(0,h.dZ)(i,this.Th.document.head,this.Th,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},862:(t,i,e)=>{"use strict";e.d(i,{Z:()=>a});var s,n=e(1102);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(s||(s={}));var r=e(9791),o=e(9607);class a{constructor(t,i,e){this.Th=t,this.VT=i,this.su=e,this.FT=!1,this.jT=!1,this.UT=()=>{"hidden"===this.Th.document.visibilityState&&this.$T()},this.$T=()=>{if(this.FT||!this.Xd)return;const t=this.Xd.takeRecords();this.qT(t),this.FT=!0},this.qT=t=>{t.filter((({body:t})=>"HeavyAdIntervention"===(null==t?void 0:t.id))).forEach((()=>{const{heavyAdBlockTypeEnum:t,advertiserLineItemId:i}=this.VT;this.su.heavyAd.next({type:n.EN.fromProtoHeavyAdType(t),advertiserLineItemId:i})}))},this.zT()}destroy(t){var i,e,s,n;try{if(!this.jT)return;null===(e=null===(i=this.Th)||void 0===i?void 0:i.removeEventListener)||void 0===e||e.call(i,"pagehide",this.$T),null===(n=null===(s=this.Th)||void 0===s?void 0:s.removeEventListener)||void 0===n||n.call(s,"visibilitychange",this.UT)}catch(i){const{message:e,stack:s}=(0,r.W$)(i);(0,o.nF)({level:o.D_.WARN,message:"AdManager_VpaidIntegrator_destroyAd",exception:e,callStack:s,sessionId:t})}}GT(){return!!this.Th.ReportingObserver}zT(){this.GT()&&(this.jT=!0,this.Xd=new this.Th.ReportingObserver((t=>{this.qT(t)}),{buffered:!0,types:[s.Intervention]}),this.Xd.observe(),this.Th.addEventListener("pagehide",this.$T),this.Th.addEventListener("visibilitychange",this.UT))}}},4065:(t,i,e)=>{"use strict";e.d(i,{B:()=>a});var s=e(6716),n=e(1509),r=e(9357),o=e(7332);class a{constructor(t,i=0,e=1e3){this.wi=t,this.timerDuration=i,this.bs=e,this.WT=0,this.XT=null,this.QT=!1,this.JT=!1,this.YT=null,this.KT=new s.x,this.tx=new s.x,this.sx=new s.x,this.nx=new s.x,this.hx=[{event:n.n.FirstQuartile,quartile:1},{event:n.n.SecondQuartile,quartile:2},{event:n.n.ThirdQuartile,quartile:3},{event:n.n.FourthQuartile,quartile:4}],this.lx=null,this.ux=()=>{this.vx(),this.KT.next(),this.mx(this.WT,this.timerDuration),this.yx(),this.Ix(),this.wx=(new Date).getTime()},i||this.disable()}start(){this.JT=!0,null===this.XT&&this.Mr()}stop(){this.JT=!1,null!==this.XT&&(this.vx(),this.Er())}reset(t){t&&(this.timerDuration=t),this.WT=0,this.QT=!1,this.lx=null,(null!==this.XT||this.JT)&&(this.Er(),this.Mr())}setTimerDuration(t){t&&(this.timerDuration=t)}setTreshold(t){t&&(this.YT=t)}get timeElapsed(){return this.WT}get timeRemaining(){return this.QT?0:this.timerDuration-this.WT}disable(){this.QT=!0,this.Er()}get onTimeUpdate(){return this.KT.asObservable()}get onTimeElapsed(){return this.tx.asObservable()}get onTresholdReached(){return this.nx.asObservable()}get onQuartile(){return this.sx.asObservable()}get startingTime(){return this.wx}vx(){this.WT+=(new Date).getTime()-this.wx}Mr(){this.QT||(this.yx(),this.wx=(new Date).getTime(),this.XT=this.wi.setInterval(this.ux,this.bs))}Er(){this.wi.clearInterval(this.XT),this.XT=null}Ax(){this.disable(),this.tx.next(),this.WT=0}Sx(){this.YT=null,this.nx.next()}yx(){this.WT/r.s_>=this.timerDuration/r.s_&&this.Ax()}Ix(){null!==this.YT&&this.timeRemaining<=this.YT&&this.Sx()}mx(t,i){const e=Math.floor((0,o.dQ)(0,i,1,4,t));this.lx<=e&&this.hx.forEach((({event:t,quartile:i})=>{i===e&&i!==this.lx&&(this.sx.next(t),this.lx=i)}))}}},2300:(t,i,e)=>{"use strict";var s;e.d(i,{r:()=>s}),function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.UpNextButton=9]="UpNextButton",t[t.UpNextBox=10]="UpNextBox",t[t.PreviousButton=11]="PreviousButton",t[t.LogoComponent=12]="LogoComponent",t[t.LogoOutstream=13]="LogoOutstream",t[t.MoreButton=14]="MoreButton",t[t.ElapsedTimeLabel=15]="ElapsedTimeLabel",t[t.TotalDurationLabel=16]="TotalDurationLabel",t[t.RemainingDurationLabel=17]="RemainingDurationLabel",t[t.ProgressBar=18]="ProgressBar",t[t.QualityMenu=19]="QualityMenu",t[t.QueStateOverlay=20]="QueStateOverlay",t[t.Loader=21]="Loader",t[t.ContextMenu=22]="ContextMenu",t[t.ElementsSettingsMenu=23]="ElementsSettingsMenu",t[t.CloseButton=24]="CloseButton",t[t.PinnedCloseButton=25]="PinnedCloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.NextProgressButton=28]="NextProgressButton",t[t.StayProgressButton=29]="StayProgressButton",t[t.CtaButton=30]="CtaButton",t[t.PlayspaceProgressBar=31]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=32]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=33]="ClickToPlayButton",t[t.OverlayComponent=34]="OverlayComponent",t[t.SlideTitle=35]="SlideTitle",t[t.TopTitle=36]="TopTitle",t[t.TopLogo=37]="TopLogo",t[t.TopSlideTitle=38]="TopSlideTitle",t[t.TopStoryTitle=39]="TopStoryTitle",t[t.TextLabel=40]="TextLabel",t[t.LivePoster=41]="LivePoster",t[t.LiveIcon=42]="LiveIcon",t[t.ElementsCaptionMenu=43]="ElementsCaptionMenu",t[t.PinnedTitle=44]="PinnedTitle"}(s||(s={}))},9762:(t,i,e)=>{"use strict";var s;e.d(i,{C:()=>s}),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.DraggingStart=6]="DraggingStart",t[t.DraggingStopped=7]="DraggingStopped",t[t.Seek=8]="Seek",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.SettingsMenu=18]="SettingsMenu",t[t.CaptionOn=19]="CaptionOn",t[t.CaptionOff=20]="CaptionOff",t[t.CaptionUpdate=21]="CaptionUpdate",t[t.CaptionMenu=22]="CaptionMenu",t[t.VolumeHoverStart=23]="VolumeHoverStart",t[t.VolumeHoverStopped=24]="VolumeHoverStopped",t[t.UIHideStart=25]="UIHideStart",t[t.UIShowStart=26]="UIShowStart",t[t.UIEndShowHide=27]="UIEndShowHide",t[t.ContextMenuOpen=28]="ContextMenuOpen",t[t.ContextMenuClose=29]="ContextMenuClose",t[t.ContextClick=30]="ContextClick",t[t.AboutClick=31]="AboutClick",t[t.OverlayClick=32]="OverlayClick",t[t.LogoClicked=33]="LogoClicked",t[t.HoverStart=34]="HoverStart",t[t.HoverEnd=35]="HoverEnd",t[t.StateChanged=36]="StateChanged",t[t.RebindComponent=37]="RebindComponent",t[t.SkipAd=38]="SkipAd",t[t.FocusStart=39]="FocusStart",t[t.StayButton=40]="StayButton",t[t.NextButton=41]="NextButton",t[t.CtaClick=42]="CtaClick",t[t.ApiButton=43]="ApiButton"}(s||(s={}))},6203:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={}));const n=s},7263:(t,i,e)=>{"use strict";e.d(i,{P:()=>o});var s=e(5701),n=e(7405),r=e(3020);class o extends s.ai{constructor(t,i,e,s,n){super(),this.mediator=t,this.ls=i,this.oa=e,this.MA=n,this.Gr=this.ls.createElementByString(s)}getContainer(){return this.Gr}getCoordinates(t){const i=this.ls.getElementCoordinates(this.Gr);return this.MA&&t?((t&n.C.Top)===n.C.Top&&(i.clientY-=this.Gr.clientHeight),(t&n.C.Right)===n.C.Right&&(i.clientX+=this.Gr.clientWidth)):i.clientX+=i.width/2,i}showComponent(t=!1){if(!this.Gr||!this.Gr.parentElement)return;const i=(0,r.pv)(this.Gr.parentElement,"cnx-ui-btn")?this.Gr.parentElement:this.Gr;t&&(0,r.GF)(i)?(0,r.Ji)(i):(0,r.Ho)(i)}hideComponent(t=!1){if(!this.Gr||!this.Gr.parentElement)return;const i=(0,r.pv)(this.Gr.parentElement,"cnx-ui-btn")?this.Gr.parentElement:this.Gr;t&&!(0,r.GF)(i)?(0,r.U6)(i,(()=>(0,r.MV)(i))):(0,r.MV)(i)}destroy(){this.Gr.innerHTML="",this.Gr.style.display="none",this.oa.unregisterAll(this)}}},6019:(t,i,e)=>{"use strict";e.d(i,{Y:()=>r});var s=e(6203),n=e(7263);class r extends n.P{constructor(){super(...arguments),this.eventList=[s.Z[s.Z.Scroll],s.Z[s.Z.Click]],this.jT=!1,this._x=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){this.jT=!0;const t={interactionstart:this.onBeforeClick,interaction:this._x,click:this.onClick};this.oa.register(this.Gr,this,this.oa,t),this.MA&&(this.subscribe(s.Z[s.Z.Click],this.oa,(()=>{this.onClickHandler()})),this.relay(s.Z[s.Z.Scroll],this.oa,this,this.mediator))}destroy(){this.unsubscribeAll(this.oa),super.destroy()}get isInitialized(){return this.jT}}},7309:(t,i,e)=>{"use strict";e.d(i,{h:()=>h});var s=e(8983),n=e(9762),r=e(6019),o=e(3020);class a extends r.Y{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){(0,o.cn)(this.Gr,"cnx-boom"),(0,o.Tp)(this.Gr),(0,o.cn)(this.Gr,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&((0,o.IV)(this.Gr,"cnx-boom"),(0,o.IV)(this.Gr,"cnx-boom-anim"),this.Gr.removeEventListener("transitionend",t))};this.Gr.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.Gr.appendChild(this.ls.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class h extends a{constructor(){super(...arguments),this.eventList=[n.C[n.C.HoverStart],n.C[n.C.HoverEnd],n.C[n.C.FocusStart],...this.eventList],this.onStartHover=()=>{(0,o.cn)(this.Gr,s.Gj.HoverStart),(0,o.cn)(this.Gr,s.Gj.HoverEnd),this.MA&&this.Gr.addEventListener("transitionend",(()=>this.onEndHoverClick())),this.mediator.publish(this,n.C[n.C.HoverStart])},this.onEndHover=()=>{(0,o.IV)(this.Gr,s.Gj.HoverEnd),this.mediator.publish(this,n.C[n.C.HoverEnd])},this.Tx=()=>{this.mediator.publish(this,n.C[n.C.FocusStart]),this.onStartHover()},this.xx=()=>{this.onEndHover()}}initComponent(){super.initComponent(),this.MA?(this.Gr.addEventListener("touchstart",this.onStartHover,{passive:!0}),this.Gr.addEventListener("touchend",this.onEndHover),this.Gr.addEventListener("touchcancel",this.onEndHover)):(this.Gr.addEventListener("mouseenter",this.onStartHover),(0,o.Iy)(this.Gr)&&(this.Gr.addEventListener("focusin",this.Tx),this.Gr.addEventListener("focusout",this.xx)),this.Gr.addEventListener("mouseleave",this.onEndHover))}destroy(){this.MA?(this.Gr.removeEventListener("touchstart",this.onStartHover),this.Gr.removeEventListener("touchend",this.onEndHover),this.Gr.removeEventListener("touchcancel",this.onEndHover)):(this.Gr.removeEventListener("mouseenter",this.onStartHover),this.Gr.removeEventListener("mouseleave",this.onEndHover),(0,o.Iy)(this.Gr)&&(this.Gr.removeEventListener("focusin",this.Tx),this.Gr.removeEventListener("focusout",this.xx))),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){(0,o.IV)(this.Gr,s.Gj.HoverEnd),(0,o.IV)(this.Gr,s.Gj.HoverStart),this.MA&&this.Gr.removeEventListener("transitionend",(()=>this.onEndHoverClick()))}}},7617:(t,i,e)=>{"use strict";e.d(i,{E:()=>r});var s=e(6237),n=e(3020);class r extends s.s{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this.Gr=this.kx.getRenderedDom()}getContainer(){return this.Gr}initComponent(){this.kx.initComponents()}showComponent(){(0,n.Ho)(this.Gr)}hideComponent(){(0,n.MV)(this.Gr)}}},9901:(t,i,e)=>{"use strict";e.d(i,{N:()=>a});var s=e(8983),n=e(7263),r=e(3020),o=e(7332);class a extends n.P{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Cx=0,this.Ex=null,this.Lx=0,this.Bx=0,this.Rx=100,this.cacheDomElements()}cacheDomElements(){this.Ox=this.Gr.getElementsByClassName("cnx-progress-fill")[0],this.Nx=this.Gr.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.Cx=this.fixedRailWidth?this.fixedRailWidth:this.Nx.getBoundingClientRect().width,this.Ex=this.Nx.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.Lx=i,this.Ox.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.Lx>=0&&this.Lx<=this.Cx}getComputedTranslation(t){return t<0?0:t>this.Cx?this.Cx:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation((0,o.dQ)(0,100,0,this.Cx,t));this.updateUi(i)}disableTransition(){(0,r.cn)(this.Gr,s.Gj.NoTransition)}enableTransition(){(0,r.IV)(this.Gr,s.Gj.NoTransition)}Fx(t){this.disableTransition(),this.setProgress(t),(0,r.Tp)(this.Ox),this.enableTransition()}forceStartState(){this.Fx(this.Bx)}forceEndState(){this.Fx(this.Rx)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}},1e3:(t,i,e)=>{"use strict";e.d(i,{V:()=>a,q:()=>s});var s,n=e(8983),r=e(9762),o=e(7309);!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(s||(s={}));class a extends o.h{constructor(){super(...arguments),this.eventList=[r.C[r.C.Expand],r.C[r.C.Collapse],...this.eventList],this.jx="Full Screen (f)",this.Ux="Exit Full Screen (f)"}initComponent(){super.initComponent(),this.Gr&&this.Gr.setAttribute("aria-label",this.tooltip)}onClickHandler(){switch(this.Bm){case s.collapse:this.mediator.publish(this,r.C[r.C.Expand]);break;case s.expand:this.mediator.publish(this,r.C[r.C.Collapse]);break;default:this.mediator.publish(this,r.C[r.C.Expand])}}$x(){this.Gr&&(this.Gr.setAttribute("aria-label",this.tooltip),this.Bm===s.expand?this.Gr.classList.add(n.Gj.Active):this.Gr.classList.remove(n.Gj.Active))}setState(t){this.Bm!==t&&(this.Bm=t,this.$x())}get tooltip(){return this.Bm===s.expand?this.Ux:this.jx}}},4115:(t,i,e)=>{"use strict";e.d(i,{J:()=>o,L:()=>s});var s,n=e(9762),r=e(7309);!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(s||(s={}));class o extends r.h{constructor(t,i,e,r,o,a){super(t,i,e,r,o),this.isBig=a,this.Hx=!1,this.eventList=[n.C[n.C.Play],n.C[n.C.Pause],n.C[n.C.Replay],n.C[n.C.StateChanged],...this.eventList],this.zx="Play (SPACE)",this.Gx="Pause (SPACE)",this.setState(s.Pause)}onClickHandler(){this.Bm===s.Pause?this.mediator.publish(this,n.C[n.C.Pause]):this.Hx?this.mediator.publish(this,n.C[n.C.Replay]):this.mediator.publish(this,n.C[n.C.Play]),this.Gr.setAttribute("aria-label",this.tooltip)}$x(){this.Bm===s.Play?this.Gr.setAttribute("aria-hidden","false"):this.isBig&&this.Gr.setAttribute("aria-hidden","true")}toggleReplay(t){this.Hx=t}setState(t){this.Bm!==t&&(this.Bm=t,this.$x(),this.Gr.setAttribute("aria-label",this.tooltip),this.mediator.publish(this,n.C[n.C.StateChanged]))}get tooltip(){return this.Bm===s.Play?this.zx:this.Gx}}},1191:(t,i,e)=>{"use strict";e.d(i,{F:()=>a,u:()=>s});var s,n=e(9762),r=e(7309),o=e(3020);!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(s||(s={}));class a extends r.h{constructor(t,i,e,s,r,o){super(t,i,e,s,o),this.eventList=[n.C[n.C.Mute],n.C[n.C.Unmute],n.C[n.C.StateChanged],...this.eventList],this.Wx="Mute (m)",this.Xx="Unmute (m)",this.Bm=r,this.Gr.setAttribute("aria-label",this.tooltip)}onClickHandler(){this.Bm===s.Mute?(this.mediator.publish(this,n.C[n.C.Unmute]),this.setState(s.Unmute)):(this.mediator.publish(this,n.C[n.C.Mute]),this.setState(s.Mute))}$x(){this.Bm===s.Mute?(0,o.L_)(this.Gr,"cnx-sound-on","cnx-sound-off"):(0,o.L_)(this.Gr,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.Bm===s.Mute?this.Xx:this.Wx}initComponent(){super.initComponent(),this.$x()}setState(t){this.Bm!==t&&(this.Bm=t,this.$x(),this.Gr.setAttribute("aria-label",this.tooltip),this.mediator.publish(this,n.C[n.C.StateChanged]))}setVolume(t){t>0?this.setState(s.Unmute):this.setState(s.Mute)}}},1277:(t,i,e)=>{"use strict";e.d(i,{N:()=>c});var s=e(8983),n=e(9762),r=e(2300),o=e(7617),a=e(1191),h=e(3020);class c extends o.E{constructor(t,i,e,o){super(t,i,e,o),this.Qx=null,this.eventList=[n.C[n.C.Volume],n.C[n.C.VolumeHoverStart],n.C[n.C.VolumeHoverStopped],n.C[n.C.DraggingStopped],n.C[n.C.DraggingStart],n.C[n.C.HoverStart],n.C[n.C.HoverEnd],n.C[n.C.StateChanged],n.C[n.C.FocusStart]],this.Jx=.2,this.Yx=600,this.Kx=!1,this.Zx=t=>{clearTimeout(this.Qx),(0,h.cn)(this.Gr,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.VolumeHoverStart])},this.tk=()=>{this.Kx||(null!==this.Qx&&clearTimeout(this.Qx),this.Qx=setTimeout((()=>{(0,h.IV)(this.Gr,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.VolumeHoverStopped])}),this.Yx))},this.Tx=()=>{(0,h.cn)(this.Gr,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.FocusStart]),this.mediator.publish(this,n.C[n.C.VolumeHoverStart])},this.xx=()=>{(0,h.IV)(this.Gr,"cnx-mod-hover"),this.mediator.publish(this,n.C[n.C.VolumeHoverStopped])},this.ik=this.Jx,this.ek=this.getComponent(r.r.VolumeButton),this.sk=this.getComponent(r.r.VolumeProgress),(0,h.IV)(this.ek.getContainer(),s.Gj.HovarableButton)}Aa(t,i,e){let s;switch(t){case n.C[n.C.Volume]:s=i.payload/100,this.nk(s),this.rk(i.payload);break;case n.C[n.C.Mute]:s=0,this.setVolumeProgress(0);break;case n.C[n.C.Unmute]:s=this.ik,this.setVolumeProgress(100*this.ik);break;case n.C[n.C.DraggingStopped]:this.Kx=!1,this.mediator.publish(this,n.C[n.C.DraggingStopped]),this.tk();break;case n.C[n.C.DraggingStart]:this.Kx=!0,this.mediator.publish(this,n.C[n.C.DraggingStart]);break;case n.C[n.C.HoverStart]:this.mediator.publish(this,n.C[n.C.HoverStart],{payload:{targetComponent:e}});break;case n.C[n.C.HoverEnd]:this.mediator.publish(this,n.C[n.C.HoverEnd],{payload:{targetComponent:e}});break;case n.C[n.C.StateChanged]:this.mediator.publish(this,n.C[n.C.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.hk(s)}nk(t){t<this.Jx?this.ik=this.Jx:this.ik=t}hk(t){this.mediator.publish(this,n.C[n.C.Volume],{payload:t})}rk(t){0===t?this.ek.setState(a.u.Mute):this.ek.setState(a.u.Unmute)}setVolumeProgress(t){this.sk.setProgress(t)}initComponent(){super.initComponent(),this.Gr.addEventListener("mouseenter",this.Zx),this.Gr.addEventListener("mouseleave",this.tk),this.Gr.addEventListener("focusin",this.Tx),this.Gr.addEventListener("focusout",this.xx)}setVolume(t){const i=100*t;this.rk(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this.Gr.removeEventListener("mouseenter",this.Zx),this.Gr.removeEventListener("mouseleave",this.tk),this.Gr.removeEventListener("focusin",this.Tx),this.Gr.removeEventListener("focusout",this.xx)}}},9391:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});var s=e(2300);const n=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${s.r.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${s.r.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim()},2823:(t,i,e)=>{"use strict";e.d(i,{$:()=>o});var s=e(8983),n=e(6237),r=e(3020);class o extends n.s{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.$uiContainer=this.kx.getRenderedDom(),i.appendChild(this.$uiContainer),this.kx.initComponents()}changeState(t){const i=this.fa[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){(0,r.cn)(this.$uiContainer,s.Gj.DisplayNone)}show(){(0,r.IV)(this.$uiContainer,s.Gj.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}},1612:(t,i,e)=>{"use strict";e.d(i,{A:()=>V});var s=e(9161);const n='<cnx class="cnx-ui-progress-label"><cnx-span role="timer"></cnx-span></cnx>';var r=e(2300),o=e(1e3),a=e(9479);const h=`\n<cnx class="cnx-icon-button cnx-ui-btn-hoverable" role="button" tabindex="0">\n    <cnx class="cnx-btn-container">\n        <cnx class="cnx-expand-icon">\n            ${e(3409)}\n        </cnx>\n        <cnx class="cnx-collapse-icon">\n            ${a}\n        </cnx>\n    </cnx>\n</cnx>\n`,c='<svg viewBox = "0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"/></svg>\n';var d=e(9040),l=e(3775);function u(t,i,e,s=null,n=!0){if(n){const{expanded:n,hasPopup:o,label:a,controls:h}=s||{};return`\n        ${s?`<cnx aria-expanded=${n} aria-haspopup=${o} aria-controls=${h} aria-label="${a}" role="button" class="cnx-icon-button cnx-button-${r.r[t].toLowerCase()} cnx-ui-btn-hoverable" tabindex="0">`:`<cnx class="cnx-icon-button cnx-button-${r.r[t].toLowerCase()} cnx-ui-btn-hoverable" aria-label="${e}" role="button" tabindex="0">`}\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim()}return`<cnx class="cnx-button-${r.r[t].toLowerCase()}">${i}</cnx>`}const p="More",f="Close Player",m="Next (Shift + N)",g="Previous (Shift + P)",v={[r.r[r.r.MoreButton]]:{template:u(r.r.MoreButton,'<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></svg>\n',"",{hasPopup:!0,expanded:!1,label:p,controls:l.b.ContextMenuSettings}),tooltip:p,isHoverable:!0},[r.r[r.r.CloseButton]]:{template:u(r.r.CloseButton,c,f),tooltip:f,isHoverable:!0},[r.r[r.r.PinnedCloseButton]]:{template:u(r.r.CloseButton,c,f),tooltip:f,isHoverable:!0},[r.r[r.r.UpNextButton]]:{template:u(r.r.UpNextButton,d,m),tooltip:m,isHoverable:!0},[r.r[r.r.PreviousButton]]:{template:u(r.r.PreviousButton,d,g),tooltip:g,isHoverable:!0}};var y=e(6019);class b extends y.Y{constructor(t,i,e,s,n,o,a){super(t,i,e,s,n),this.tooltip=a,this.eventList=[],this.ak=r.r[o],this.eventList.push(this.ak)}onClickHandler(){this.mediator.publish(this,this.ak)}}var I=e(7309);class P extends I.h{constructor(t,i,e,s,n,o,a){super(t,i,e,s,n),this.tooltip=a,this.ak=r.r[o],this.eventList.push(this.ak)}onClickHandler(){this.mediator.publish(this,this.ak)}}class w{constructor(t,i,e,s){this.ls=t,this.oa=i,this.MA=e,this.ck=new Map,Object.keys(s).forEach((t=>this.dk(r.r[t],s[t])))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.lk(t);return e?new P(i,this.ls,this.oa,s,this.MA,t,n):new b(i,this.ls,this.oa,s,this.MA,t,n)}isGeneralComponent(t){return this.ck.has(t)}lk(t){return this.ck.get(t)}dk(t,i){this.ck.set(t,i)}}var S=e(8983),A=e(7263),x=e(3020);class _ extends A.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){(0,x.Ho)(this.Gr),(0,x.Tp)(this.Gr),(0,x.cn)(this.Gr,S.Gj.Active)}hide(){(0,x.IV)(this.Gr,S.Gj.Active),(0,x.MV)(this.Gr)}}var T=e(4115);var C=e(834);var k=e(9762),E=e(9901),M=e(7332);class L extends E.N{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.uk=0,this.ma=null,this.pk=!1,this.eventList=[k.C[k.C.DraggingStart],k.C[k.C.DraggingStopped]],this.fk=t=>{this.cacheWidths(),this.vk(this.mk(t)),this.MA?this.Gr.addEventListener(this.gk,this.yk):this.ls.addEventListenerOnGlobal(this.gk,this.yk),this.onDragStart()},this.yk=t=>{null===this.ma&&(this.pk||(this.pk=!0,this.disableTransition()),this.ma=this.ls.requestAnimationFrameHelper((()=>{const i=this.bk+(this.mk(t)-this.Ik);this.isValidTranslation()&&this.Pk(i),this.ma=null})))},this.wk=t=>{t.stopPropagation(),this.MA?this.Gr.removeEventListener(this.gk,this.yk):this.ls.removeEventListenerOnGlobal(this.gk,this.yk),this.pk=!1,this.enableTransition(),this.onDragEnd()},this.Ak=t=>{const i=100*t.target.value/this.Sk.max;this.onProgressChange(i),this.onDragStart(),this.onDragEnd()},this.gk=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this._k=this.Gr.getElementsByClassName("cnx-progress-handle")[0],this.Sk=this.Gr.querySelector('input[type="range"]')}cacheWidths(){super.cacheWidths(),this.uk=this._k.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this._k.style.transform=`translateX(${i-this.uk}px)`}onDragEnd(){this.mediator.publish(this,k.C[k.C.DraggingStopped])}onDragStart(){this.mediator.publish(this,k.C[k.C.DraggingStart])}mk(t){return this.MA?t.touches.item(0).clientX:t.clientX}vk(t){this.bk=t-this.Ex,this.Ik=t,this.Pk(this.bk)}Pk(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.Cx,n=0,r=100;this.updateUi(i),this.onProgressChange((0,M.dQ)(e,s,n,r,i))}}setProgress(t){if(super.setProgress(t),!this.Sk)return;const i=Math.round(t/100*this.Sk.max);this.Sk.value=i}setMaxRange(t){this.Sk.setAttribute("max",t.toString())}hideRangeInput(){this.Sk&&(0,x.MV)(this.Sk)}initComponent(){super.initComponent();const t={interactionstart:this.fk,interactionend:this.wk};this.oa.register(this.Gr,this,this.oa,t),this.Sk&&(this.Sk.addEventListener("input",this.Ak),this.Sk.addEventListener("change",this.Ak))}destroy(){super.destroy(),this.Sk&&(this.Sk.removeEventListener("input",this.Ak),this.Sk.removeEventListener("change",this.Ak))}}var R=e(1310),B=e(4798);class O extends L{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Tk=!1,this.xk=t=>{(0,x.cn)(this.Gr,S.Gj.HoverEnd),this.Tk=!0},this.kk=t=>{const i=this.getComputedTranslation(t.clientX-this.Ex);this.Ck.style.transform=`translateX(${i}px)`},this.Mk=t=>{this.Ck.style.transform="translateX(0)",this.Tk=!1,this.Lk()},this.eventList=this.eventList.concat([k.C[k.C.Seek],k.C[k.C.SeekingStart],k.C[k.C.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,k.C[k.C.Seek],{payload:t-.1})}updateWcagAttributes(t,i){if(!(0,B.hj)(t)||!(0,B.hj)(i))return;const e=(0,R.qt)(i),s=(0,R.qt)(t),n=this.Sk;n&&(n.setAttribute("aria-label","Seek"),n.setAttribute("aria-valuemin","0"),n.setAttribute("aria-valuemax",`${Math.round(i)}`),n.setAttribute("aria-valuenow",`${Math.round(t)}`),n.setAttribute("aria-valuetext",`${s} of ${e}`))}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,k.C[k.C.SeekingStopped]),this.Lk()}onDragStart(){super.onDragStart(),this.mediator.publish(this,k.C[k.C.SeekingStart])}Lk(){this.Tk||this.pk||(0,x.IV)(this.Gr,S.Gj.HoverEnd)}initComponent(){super.initComponent(),this.Gr.addEventListener("mousemove",this.kk),this.Gr.addEventListener("mouseenter",this.xk),this.Gr.addEventListener("mouseleave",this.Mk),this.Ck=this.Gr.getElementsByClassName("cnx-progress-follow")[0]}hide(){this.Gr.style.opacity="0"}show(){this.Gr.style.opacity="1"}destroy(){super.destroy(),this.Gr.removeEventListener("mousemove",this.kk),this.Gr.removeEventListener("mouseenter",this.xk),this.Gr.removeEventListener("mouseleave",this.Mk)}}class D extends A.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Bk=this.Gr.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?(0,x.cn)(this.Gr,S.Gj.Invisible):(this.Bk.innerHTML=(0,R.to)(t),(0,x.IV)(this.Gr,S.Gj.Invisible))}}var N=e(1191);const F=`<cnx class="cnx-icon-button cnx-ui-btn-hoverable" role="button" tabindex="0">\n    <cnx class="cnx-btn-container">\n        <cnx class="cnx-unmute-icon">\n           <svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg>\n\n        </cnx>\n        <cnx class="cnx-mute-icon">\n           ${e(5217)}\n        </cnx>\n    </cnx>\n</cnx>`;class $ extends L{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Rk=80,this.fixedRailWidth=this.Rk,this.eventList.push(k.C[k.C.Volume])}onProgressChange(t){this.mediator.publish(this,k.C[k.C.Volume],{payload:t})}setProgress(t){this.Gr.setAttribute("aria-valuenow",t.toString()),super.setProgress(t)}initComponent(){this.Gr.setAttribute("role","slider"),super.initComponent()}}class V{constructor(t,i,e,a={},c={}){this.ls=t,this.oa=i,this.Gr=e,this.Tr=a,this.Dk={[r.r.PlayButton]:t=>this.Nk(!1,t),[r.r.BigPlayButton]:t=>this.Nk(!0,t),[r.r.VolumeProgress]:t=>new $(t,this.ls,this.oa,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-icon"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-icon"></cnx></cnx>'),[r.r.ExpandButton]:t=>new o.V(t,this.ls,this.oa,h,this.Tr.isMobile),[r.r.Loader]:t=>new _(t,this.ls,this.oa,s.Z),[r.r.ElapsedTimeLabel]:t=>new D(t,this.ls,this.oa,n),[r.r.TotalDurationLabel]:t=>new D(t,this.ls,this.oa,n),[r.r.RemainingDurationLabel]:t=>new D(t,this.ls,this.oa,n),[r.r.ProgressBar]:t=>new O(t,this.ls,this.oa,'<cnx class="cnx-progress-bar cnx-video-progress"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-accent"></cnx><cnx class="cnx-progress-hitarea"></cnx><cnx class="cnx-progress-input"><input type="range" step="5" role="slider" class="cnx-progress-range"></cnx></cnx>',this.Tr.isMobile),[r.r.VolumeButton]:t=>new N.F(t,this.ls,this.oa,F,N.u.Mute,this.Tr.isMobile)},this.Nk=(t,i)=>new T.J(i,this.ls,this.oa,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}" role="button" tabindex="0">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${C}</cnx>\n            <cnx class="cnx-pause-icon"><svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"/></svg>\n</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.Tr.isMobile,t),this.Vk=t=>i=>{const e=this.Dk[t];if(e)return e(i)},this.jk=new w(this.ls,this.oa,this.Tr.isMobile,Object.assign(Object.assign({},v),c))}createComponent(t,i){const e=this.Vk(t)(i);return e||(this.jk.isGeneralComponent(t)?this.jk.getButton(t,i):void 0)}}},6237:(t,i,e)=>{"use strict";e.d(i,{s:()=>o});var s=e(5701),n=e(9762);class r{constructor(t,i){this.Uk=t,this.ls=i,this.$k=/\[\[([0-9]+)]]/g,this.qk=[],this.Hk=[],this.zk=this.ls.createElementByString(this.Gk(this.Uk))}Wk(t){return`<cnx class="pl_${t}"></cnx>`}Gk(t){return t.replace(this.$k,((t,i)=>(this.qk.push(parseInt(i,10)),this.Wk(i))))}Xk(t,i){return this.Hk.some((i=>i.slotName===t))||this.Hk.some((t=>t.component===i))?null:this.zk.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.qk}getRenderedDom(){return this.zk}registerSlot(t,i){const e=this.Xk(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.Hk.push({component:i,slotName:t}),!0}return!1}initComponents(){this.Hk.forEach((t=>t.component.initComponent()))}}class o extends s.ai{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.Qk={},this.kx=new r(i,t),this.addComponents()}addComponents(){this.kx.getComponentList().forEach((t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)}))}registerComponent(t,i){this.kx.registerSlot(t,i),this.Qk[t]=i,this.Jk(i)}Jk(t){t.eventList.forEach((i=>{this.subscribe(i,t,(e=>{i===n.C[n.C.RebindComponent]&&this.Zk(t),this.Aa(i,e,t)}))}))}Zk(t){t&&(this.unsubscribeAll(t),this.Jk(t))}getComponent(t){return this.Qk[t]}destroy(){Object.keys(this.Qk).forEach((t=>{this.Qk[t].destroy()}))}}},3052:(t,i,e)=>{"use strict";e.d(i,{q:()=>p});var s=e(8983),n=e(9762),r=e(2300),o=e(1e3);var a=e(7405),h=e(5356),c=e(3020);class d{constructor(t,i,e){this.tC=t,this.ls=i,this.iC=[],this.eC={top:12,bottom:24,margin:4},this.sC=!1,e&&(this.sC=!0)}rC(){this.hC=this.ls.getElementCoordinates(this.tC.parentElement)}aC(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}cC(t){if(!t||!t.tooltip||this.sC)return;if(this.iC.find((i=>i.component===t)))return;const i=this.ls.createElementByString('<cnx class="cnx-tooltip-holder cnx-color-tt-bg"><cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx></cnx>');this.aC(i,t.tooltip),this.rC();const e=t.getCoordinates();let n=!1;const{clientY:r,height:o}=e,{clientY:d,height:l}=this.ls.getElementCoordinates(this.tC);!(0,c.pv)(this.tC,s.s6.ShowControls)&&!(0,h.mb)(this.tC)||r<=d+l/2-o?e.clientY+=this.eC.top:(e.clientY-=this.eC.bottom,n=!0),this.tC.appendChild(i),(0,a.p)(i,e,this.hC,{alignMiddle:!0,alignTop:n,forceRight:!0,distanceFromMargin:this.eC.margin}),(0,c.Tp)(i),(0,c.cn)(i,s.hQ.OpacityInTransition),this.iC.push({component:t,domElement:i})}dC(t){if(!t.tooltip)return;const i=this.iC.find((i=>i.component===t));if(!i)return;const e=i.domElement;this.tC.removeChild(e),this.iC=this.iC.filter((i=>i.component!==t))}lC(t){if(!t.tooltip)return;const i=this.iC.find((t=>t.component===this.pC));i&&this.aC(i.domElement,t.tooltip)}fC(){this.pC=null,this.iC.forEach((t=>this.dC(t.component)))}removeActiveTooltip(){this.pC&&this.dC(this.pC)}setDistanceValues(t){this.eC=Object.assign(Object.assign({},this.eC),t)}hoverStart(t){this.removeActiveTooltip(),this.pC=t,this.cC(t)}hoverEnd(t){this.pC=null,this.dC(t)}stateChanged(t){this.pC===t&&this.lC(t)}disableTooltips(){this.sC=!0,this.fC()}enableTooltips(){this.sC=!1,this.cC(this.pC)}}var l=e(2823),u=e(7332);class p extends l.${constructor(t,i,e,s,n={},r){super(r,t,i,e,s),this.ya=new d(this.$uiContainer,i,n.isMobile)}Aa(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case n.C[n.C.HoverStart]:this.ya.hoverStart(s);break;case n.C[n.C.HoverEnd]:this.ya.hoverEnd(s);break;case n.C[n.C.StateChanged]:this.ya.stateChanged(s)}}updateDuration(t,i){const e=this.getComponent(r.r.ProgressBar);if(null==e||e.updateWcagAttributes(t,i),!(0,c.pv)(this.$uiContainer,s.s6.ShowControls))return;const n=this.getComponent(r.r.ElapsedTimeLabel),o=this.getComponent(r.r.TotalDurationLabel);if(n&&n.setTime(t),o&&o.setTime(i),e){const s=0,n=i,r=0,o=100;e.setMaxRange(Math.round(i)),e.setProgress((0,u.dQ)(s,n,r,o,t))}}updateVolume(t){}expand(){this.getComponent(r.r.ExpandButton).setState(o.q.expand)}collapse(){this.getComponent(r.r.ExpandButton).setState(o.q.collapse)}}},2925:(t,i,e)=>{"use strict";e.d(i,{w:()=>s});class s{constructor(t){this.da=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.da.currentState=this}}},4291:(t,i,e)=>{"use strict";e.d(i,{d:()=>a});var s=e(8983),n=e(2300),r=e(4115),o=e(2925);class a extends o.w{initState(){var t;this.da.$uiContainer.classList.add(s.s_.Paused);const i=this.da.getComponent(n.r.PlayButton);i&&i.setState(r.L.Play);const e=this.da.getComponent(n.r.BigPlayButton);e&&(null===(t=e.getContainer())||void 0===t||t.setAttribute("tabindex","0"),e.setState(r.L.Play))}exitState(){var t;const i=this.da.getComponent(n.r.BigPlayButton);null===(t=null==i?void 0:i.getContainer())||void 0===t||t.removeAttribute("tabindex"),this.da.$uiContainer.classList.remove(s.s_.Paused)}}},2246:(t,i,e)=>{"use strict";e.d(i,{ai:()=>a});var s=e(8983),n=e(2300),r=e(4115),o=e(2925);class a extends o.w{initState(){this.da.$uiContainer.classList.add(s.s_.Playing);const t=this.da.getComponent(n.r.PlayButton);t&&t.setState(r.L.Pause);const i=this.da.getComponent(n.r.BigPlayButton);i&&i.setState(r.L.Pause)}exitState(){this.da.$uiContainer.classList.remove(s.s_.Playing)}}},7405:(t,i,e)=>{"use strict";var s;function n(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const o=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&o<t.offsetHeight?r-=t.offsetHeight-o:(r+=e,r+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight));return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),o=i,a=o+t.offsetWidth;const h=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),o-=i,a-=i}if(s.alignMiddle||s.forceRight)return e.clientX>o?r=0+n:h<a&&(r-=Math.ceil(a)-Math.ceil(h)+n),r;a>h&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}e.d(i,{C:()=>s,p:()=>n}),function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(s||(s={}))},604:(t,i,e)=>{"use strict";e.d(i,{c:()=>a});var s=e(9791),n=e(51),r=e(9607),o=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class a{constructor(){this.Rm=null}static getInstance(){return a.vC?a.vC:(this.vC=new a,this.vC)}mC(t){t&&(window.cnxIsOvpDomain=t);const i=(0,s.pE)(window).topFrame;window.cnxEnvParam=(0,n.Ph)("cnxEnv",i.location.search)}load(t){return o(this,void 0,void 0,(function*(){return this.mC(t),(0,s.Up)((()=>(this.Rm||(this.Rm=e.e("webpack_container_remote_CookieSync_UserSync").then(e.t.bind(e,8117,23))),this.Rm))).then((t=>t)).catch((t=>{(0,r.nF)({message:"UserSyncLoader_failed_loading_CookieSync_script",level:r.D_.INFO,exception:`${t}`})}))}))}}},2857:(t,i,e)=>{"use strict";e.d(i,{T_:()=>m,VK:()=>g,fh:()=>p,vY:()=>f,yt:()=>l,zJ:()=>u});var s=e(5675),n=e(6628),r=e(8041),o=(e(3020),e(9791)),a=e(51),h=e(9607),c=e(4798),d=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};const l={enableWorker:!0,capLevelToPlayerSize:!0,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:90,backBufferLength:1/0,lowLatencyMode:!0,ignoreDevicePixelRatio:!0,debug:"true"===(0,a.Ph)("cnxHlsDebug",(0,o.pE)(window).topFrame.location.href)};function u(t,i){return d(this,void 0,void 0,(function*(){try{const i=yield(0,o.Up)((()=>d(this,void 0,void 0,(function*(){return yield function(t){var i,e;return d(this,void 0,void 0,(function*(){if(null===(i=t.cnxAsyncChunks)||void 0===i?void 0:i.Hls)return t.cnxAsyncChunks.Hls;const o=(0,n.W)(r.oM);if(yield(0,s.Z)(`${o}hls.1.3.4.js`,window,t),!(null===(e=t.cnxAsyncChunks)||void 0===e?void 0:e.Hls))throw new Error("hls bundle not found");return t.cnxAsyncChunks.Hls}))}(t)}))));if(!i)throw new Error("no_hls_module");return i}catch(t){return(0,h.nF)({sessionId:i,callStack:t.stack,exception:t.message,level:h.D_.WARN,message:"HLS_dynamicImport"}),null}}))}function p(){const t=self.MediaSource||self.WebKitMediaSource;if(!t)return!1;const i=self.SourceBuffer||self.WebKitSourceBuffer,e="function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!e&&!!s}const f=t=>(0,c.QM)(t.canPlayType("application/vnd.apple.mpegurl"));function m(t){const i=[];return t.forEach((t=>{i.some((i=>i.height===t.height))||i.push(t)})),i}function g(t,i){return t.reduce(((t,e)=>{if(!t)return e;const s=Math.abs(t.height-i);return Math.abs(e.height-i)<s?e:t}),void 0)}},1783:(t,i,e)=>{"use strict";e.d(i,{Ve:()=>h,gC:()=>l,cv:()=>s,fi:()=>o,jI:()=>r,li:()=>u,qZ:()=>d,rF:()=>n,sm:()=>c,yA:()=>a});const s="Connatix",n="1.4.9";var r,o,a,h,c,d,l,u;!function(t){t.Generic="generic",t.Video="video"}(r||(r={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(o||(o={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(a||(a={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(h||(h={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(c||(c={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(d||(d={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(l||(l={})),function(t){t.notFound="notFound",t.hidden="hidden",t.viewport="viewport",t.backgrounded="backgrounded",t.obstructed="obstructed",t.clipped="clipped"}(u||(u={}))},4646:(t,i,e)=>{"use strict";var s,n;e.d(i,{$:()=>n}),function(t){t.Full="full"}(s||(s={})),function(t){const i=["1.4.9-iab4257","1.3.25-iab3167","1.3.13-iab2343"],e=["1.4.9-iab4257","1.3.25-iab3167","1.3.13-iab2343"];function n(t,i){if(!t)return;let e=null;for(let s=0;s<i.length&&(e=t[i[s]],!e);s++);return e}t.getSessionClient=function(t){if(t)return n(t.OmidSessionClient,i)},t.getVerificationClient=function(t){return n(t.OmidVerificationClient,e)},t.getVerificationScriptResources=function(t,i){return t.map((t=>{const{javaScriptResource:e,vendor:n,verificationParameters:r}=t;return new i.VerificationScriptResource(e,n,r,s.Full)}))}}(n||(n={}))},7175:()=>{String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},3326:(t,i,e)=>{"use strict";e.d(i,{A:()=>p,u:()=>u});var s=e(289),n=e(6224),r=e(6153),o=e(9607),a=e(4798);const h=new n.t(s.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),c=2;let d;const l=new Map;function u(t,i){d||(d=new Promise((e=>{const s=t.find((t=>t.blockedDomainsRevisionNumber));if(!s)return void e();const{publisherLineItemId:n,blockedDomainsRevisionNumber:a}=s,d=`${r.n.endPoints.base.lineItems}${n}/blockedDomains_${a}.bin`;h.fetchMetadata(d,c).then((t=>{l.set(n,t.domains),e()})).catch((()=>{(0,o.nF)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:o.D_.CRITICAL,extra:i},{throttle:2,shouldSendMaxLog:!1}),e()}))})))}function p(t,i){return new Promise((e=>{(0,a.QM)(i)?d.then((()=>{l.has(t)&&l.get(t).some((t=>i.includes(t)))?e(!0):e(!1)})):e(!1)}))}},9906:(t,i,e)=>{"use strict";e.d(i,{h:()=>n});var s=e(8659);class n{static getInstance(){return this.vC||(this.vC=new n),this.vC}static getGlobalContainer(){return this.getInstance().globalContainer}static getSessionChildContainer(t){const i=n.yC.get(t);return i||n.bC(t)}constructor(t=s.nC){this.IC=t}get globalContainer(){return this.IC}static bC(t){const i=n.getGlobalContainer().createChildContainer();return n.yC.set(t,i),i}}n.yC=new Map},6661:(t,i,e)=>{"use strict";var s;e.d(i,{c:()=>s}),function(t){t.GeneralMetadata="GeneralMetadata",t.UserManagerService="UserManagerService",t.StandaloneService="StandaloneService",t.Temp="TempDataForSS",t.OmidSettings="OmidSettings",t.EventsStorageService="EventsStorageService",t.OmsdkImplementationType="OmsdkImplementationType",t.GlobalDomUtilsService="GlobalDomUtilsService",t.ExternalPrebidJSPermutiveConfig="ExternalPrebidJSPermutiveConfig",t.IdentityProviderSettings="IdentityProviderSettings",t.LiveIntentSettings="LiveIntentSettings",t.FeatureFlags="FeatureFlags",t.VideoAdsDurationServiceSettings="VideoAdsDurationServiceSettings"}(s||(s={}))},6153:(t,i,e)=>{"use strict";e.d(i,{n:()=>h});var s=e(7945);class n{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam",lookup:t.core+"core/lookup"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_view:t.tracking+"mv",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao",sessionAdBlocker:t.tracking+"sab",heavy_ad_intervention:t.tracking+"ha",auctionInformation:t.tracking+"aucinfo"},this.assets={css:{elements:`${this.PC(t.assets)}player.css`,playspace:`${this.PC(t.assets)}connatix.playspace.css`},plugins:{adobeAnalytics:`${t.plugins}p/plugins/adobe.plugin.js`,moatAnalytics:`${t.plugins}p/plugins/moat.plugin.js`,prebidScript:`${t.plugins}p/plugins/prebid8.20.0-4.js`,omsdkSessionClient:`${t.plugins}p/plugins/connatix.omsdk.session.client-1.4.9.js`,omsdkWebService:`${t.plugins}p/plugins/connatix.omsdk.service-web-1.4.9.js`,intentiq:`${t.plugins}p/plugins/connatix.intentiq.js`}}}PC(t){return`${t}p/${s.g.version}/`}}var r=e(9791),o=e(51),a=e(4798);class h{static set bundleDomain(t){this.wC=t}static get bundleDomain(){if(!(0,a.QM)(this.wC))throw new Error("bundleDomain missing");return this.wC}static get defaultVideoPosterURL(){return this.AC}static set defaultVideoPosterURL(t){this.AC=t}static get tier(){return null===this.SC?h.DEFAULT_TIER:this.SC}static setTier(t){this.SC=t,h._C=h.TC()}static xC(t){const i=`capi{{env}}.${t}`;return{video:`//vid.${t}/`,image:`//img.${t}/`,core:`https://${i}/`,tracking:`https://${i}/tr/`,metadata:`//vid.${t}/`,insights:`//ins.${t}/`,assets:`//cds{{env}}.${t}/`,plugins:`//cds.${t}/`,lineItems:`//lit.${t}/`}}static TC(){const t=(0,o.Ph)("cnxEnv",(0,r.pE)(window).topFrame.location.href);t&&(s.g.domainPrefix=`-${t}`);const i=this.xC(this.bundleDomain);return Object.keys(i).forEach((t=>{i[t]=i[t].replace("{{env}}",s.g.domainPrefix)})),new n(i)}static get endPoints(){return null===h._C&&(h._C=h.TC()),h._C}}h.DEFAULT_TIER=2,h.SC=null,h.AC="",h._C=null},1703:(t,i,e)=>{"use strict";e.d(i,{I:()=>s,V:()=>r});var s,n=e(289);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},4772:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});const s=e(6888).fI,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"})},5687:(t,i,e)=>{"use strict";e.d(i,{m:()=>l});var s=e(8211),n=e(6153),r=e(384),o=e(5650),a=e(3020),h=e(9791),c=e(9607),d=e(4798);class l{constructor(t){this.createElement=(t,i=this.Th)=>i.document.createElement(t),this.Th=t,this.addPreconnect()}get global(){return this.Th}addCssString(t,i=""){return(0,a.uc)(t,i,this.Th)}addPreconnect(){(0,a.tp)(n.n.endPoints.base.video,this.Th),(0,a.tp)(n.n.endPoints.base.core,this.Th),(0,a.tp)(n.n.endPoints.base.image,this.Th)}getLineHeightPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("line-height")}getFontSizePropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("font-weight")}getTransformPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return(0,a.Dx)(t,this.Th).getPropertyValue("margin-right")}createElementByString(t,i=this.Th){return(0,a.G$)(t,i)}createDocumentFragment(t=this.Th){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return(0,a.eA)(this.Th)}isURLSameDomainToTop(t){return(0,a.uh)(t,this.Th)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if(i=i.parentNode,i===this.Th.document.body)return!1;return!0}hasIosFullscreenBehaviour(t){return t&&t===s.M.Ios||!this.getFullscreenKeys()}querySelector(t,i=this.Th){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.Th.document,n=s.getElementById(t.id);n?(0,d.mf)(i)&&(this.isStyleSheetLoaded(t.id,s)?i():n.onload=()=>i()):(0,a.NS)(t,s.head,this.Th,i,e)}isStyleSheetLoaded(t,i){var e;const s=i.styleSheets;for(let i=0;i<s.length;i++){const n=null===(e=s[i])||void 0===e?void 0:e.ownerNode;if((null==n?void 0:n.id)===t)return!0}return!1}getFullscreenKeys(t){return(0,a.S0)(t||this.Th.document)}exitFullscreen(t,i){(i||this.Th.document)[t]()}getDocumentProperty(t){return this.Th.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.Th.document:this.Th).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.Th.document:this.Th).removeEventListener(t,i,s)}trackWithImages(t,i){(0,h.Hh)(t,this.Th,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect();return i+=this.Th.pageYOffset,e+=this.Th.pageXOffset,{clientX:e,clientY:i,width:s,height:n}}getElementDistanceToViewport(t){const{top:i,left:e}=t.getBoundingClientRect();return{top:i,left:e}}requestAnimationFrameHelper(t){return(0,a.PM)(this.Th,t)}cancelRequestAnimationFrame(t){return(0,a.h_)(this.Th,t)}getGlobalLocationProperties(){const t=this.Th.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.Th.open(t,i)}getComputedTranslateX(t){let i=0;const e=(0,a.Dx)(t,this.Th).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return(0,o.BZ)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=(0,h.pE)(this.Th).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const s=(0,a.Dx)(t,this.Th);return i+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),e+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),{width:i,height:e}}catch(t){return(0,c.nF)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:c.D_.CRITICAL}),{width:0,height:0}}}getViewportWidth(){return(0,h.pE)(this.Th).topFrame.document.documentElement.clientWidth}getViewportHeight(){return(0,h.pE)(this.Th).topFrame.innerHeight}getGlobalClosestTop(){return(0,h.pE)(this.Th)}stripHtmlTags(t){return(0,a.ju)(t,this.Th)}getComputedStyle(t,i){return(0,a.Dx)(t,this.Th,i)}getElementById(t){return(0,a.rI)(t,this.Th)}getElementsByClassName(t){return(0,a.Fs)(t,this.Th)}insertScript(t,i,e){this.Th.document.getElementById(t.id)?(0,d.mf)(i)&&i():(0,a.dZ)(t,this.Th.document.head,this.Th,i,null,!0,e)}getIframeMode(){let t=r.K.None;if(this.Th.self!==this.Th.top){const{err:i}=(0,h.pE)(this.Th);t=i?r.K.Safe:r.K.Friendly}return t}destroy(){}}},384:(t,i,e)=>{"use strict";var s;e.d(i,{K:()=>s}),function(t){t[t.None=0]="None",t[t.Friendly=1]="Friendly",t[t.Safe=2]="Safe"}(s||(s={}))},6666:(t,i,e)=>{"use strict";e.d(i,{k:()=>u});var s=e(289),n=e(6224),r=e(6153),o=e(1992),a=e(9791),h=e(9607),c=e(4798),d=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};const l={insights:[],sentimentAnalysis:void 0};class u{static loadInsights(t){const{id:i}=t;let e=u.insightsPromiseStore.get(i);return e||(e=new Promise((i=>{const e=u.requestUrlBuilder(t);u.mediaMetadataHandler.fetchMetadata(e,2,false,1e4).then((t=>{const e=t.insights.map((t=>t.key));i({insights:e,sentimentAnalysis:t.sentimentAnalysis})})).catch((t=>{(0,a.Vm)([95,5])&&(0,h.nF)({message:"LoadInsightIndexesService_endpoint_unavailable",exception:e,callStack:`${t}`,level:h.D_.WARN},{shouldSendMaxLog:!1}),i(l)}))})),u.insightsPromiseStore.set(i,e)),e}static loadPageInsights(t){return d(this,void 0,void 0,(function*(){const i=yield u.loadInsights(t);return u.pageInsights={insights:i.insights},u.pageInsights}))}static requestUrlBuilder({insightsInputType:t,id:i,versionId:e}){return t===o.i.Page||(0,c.$K)(e)||(0,h.nF)({message:"LoadInsightIndexesService_requestUrlBuilder_noVersionIdProvided",exception:`Type: ${t}, id: ${i}`,level:h.D_.CRITICAL}),t===o.i.Page?`${r.n.endPoints.base.insights}${i}/insights.bin`:`${r.n.endPoints.base.insights}${i}/${e}/insights.bin`}static markAsUnavailable(t){u.insightsPromiseStore.get(t)||u.insightsPromiseStore.set(t,Promise.resolve(l))}}u.mediaMetadataHandler=new n.t(s.ProtoInsightsResponse,"InsightsLoaderService"),u.insightsPromiseStore=new Map},1992:(t,i,e)=>{"use strict";var s;e.d(i,{i:()=>s}),function(t){t[t.Video=0]="Video",t[t.Story=1]="Story",t[t.Page=2]="Page"}(s||(s={}))},8230:(t,i,e)=>{"use strict";var s,n,r,o;e.d(i,{Av:()=>o,HT:()=>n,WR:()=>r,qs:()=>s}),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(o||(o={}))},7187:(t,i,e)=>{"use strict";e.d(i,{k:()=>u});var s=e(8983),n=e(6203),r=e(8230),o=e(5650),a=e(3020);const h=0;function c(t){return t.button===h}var d=e(7332),l=e(4798);class u{constructor(t,i,e){this.DS=t,this.MA=i,this.mediator=null,this.kC=30,this.CC=250,this.EC=25,this.MC=[],this.LC={},this.BC=0,this.OC=0,this.DC=!0,this.NC=null,this.VC=!1,this.jC=!1,this.UC=!1,this.$C=!1,this.qC=0,this.HC=0,this.zC=null,this.ma=null,this.GC=null,this.WC=!0,this.XC=!1,this.QC=t=>{this.MA?(t.element.addEventListener("touchstart",this.JC,{passive:!0}),t.element.addEventListener("touchmove",this.KC,{passive:!0}),t.element.addEventListener("touchend",this.ZC),t.element.addEventListener("touchcancel",this.tE),t.element.addEventListener("mouseup",this.iE)):(t.element.addEventListener("mousedown",this.eE),t.element.addEventListener("mouseup",this.iE))},this.sE=t=>{this.MA?(t.element.removeEventListener("touchstart",this.JC),t.element.removeEventListener("touchmove",this.KC),t.element.removeEventListener("touchend",this.ZC),t.element.removeEventListener("touchcancel",this.tE),t.element.removeEventListener("mouseup",this.iE)):(t.element.removeEventListener("mousedown",this.eE),t.element.removeEventListener("mouseup",this.iE))},this.JC=t=>{t.stopPropagation();const i=this.nE(t);this.GC=i,this.jC=!1,this.rE(i,r.WR.Hold)&&this.oE(t);const e=this.hE(t);this.OC=e.eventX,this.BC=e.eventY,this.aE(t,i,r.HT.InteractionStart),this.DC=!0},this.KC=t=>{t.stopPropagation();const i=this.nE(t),e=this.hE(t);if(this.DC&&(Math.abs(e.deltaXFromStart)>this.EC||Math.abs(e.deltaYFromStart)>this.EC)&&(this.DC=!1),this.VC||this.rE(i,r.WR.Swipe)){if(null===this.zC&&this.cE(i,e),this.zC===r.qs.Y)return;null===this.ma&&(this.ma=(0,a.PM)(this.DS,(()=>{this.ma=null,this.dE(e.deltaXFromStart),i.mediator.publish(i.context,n.Z[n.Z.SwipeMove],{payload:e.deltaXFromStart})})))}},this.ZC=t=>{const i=this.nE(t);if(this.XC=!1,this.GC===i){const e=this.hE(t);t.cancelable&&this.rE(i,r.WR.Hold)&&Math.abs(e.deltaXFromStart)<this.EC&&Math.abs(e.deltaYFromStart)<this.EC&&t.preventDefault(),this.lE(t,i,e);this.uE(e)===r.qs.Y&&Math.abs(e.deltaYFromStart)>=this.EC?this.WC&&i.mediator.publish(i.context,n.Z[n.Z.Scroll]):!this.DC||this.UC||this.jC||(this.XC=!0)}this.GC=null},this.tE=t=>{const i=this.nE(t);this.lE(t,i),this.GC=null},this.eE=t=>{if(!c(t))return void this.fE(r.HT.InteractionStart,t);const i=this.nE(t);this.GC=i,t.stopPropagation(),t.preventDefault(),this.rE(i,r.WR.Hold)&&this.oE(t),this.aE(t,i,r.HT.InteractionStart)},this.iE=t=>{const i=this.nE(t);return this.XC?(i.mediator.publish(i.context,n.Z[n.Z.Click]),void(this.XC=!1)):c(t)&&this.GC?(t.stopPropagation(),t.preventDefault(),this.aE(t,this.GC,r.HT.Interaction),this.aE(t,this.GC,r.HT.InteractionEnd),(this.VC||this.rE(i,r.WR.Hold))&&this.vE(t),this.GC===i&&(this.aE(t,i,r.HT.Click),i.mediator.publish(i.context,n.Z[n.Z.Click])),void(this.GC=null)):(this.fE(r.HT.Interaction,t),void this.fE(r.HT.InteractionEnd,t))},this.mE=t=>{if(!c(t))return this.fE(r.HT.Interaction,t),void this.fE(r.HT.InteractionEnd,t);this.GC=null},this.gE=t=>{if(!c(t)||!this.GC)return this.fE(r.HT.Interaction,t),void this.fE(r.HT.InteractionEnd,t);this.aE(t,this.GC,r.HT.Interaction),this.aE(t,this.GC,r.HT.InteractionEnd),(this.VC||this.rE(this.GC,r.WR.Hold))&&this.vE(t),this.GC=null};const{leftTapSizeThreshold:s,holdTriggerDuration:o,scrollThreshold:h}=Object.assign({},e);this.kC=s||this.kC,this.CC=o||this.CC,this.EC=h||this.EC,this.DS.document.addEventListener("mousedown",this.mE),this.DS.document.addEventListener("mouseup",this.gE)}register(t,i,e,s={},n=[]){const r={element:t,mediator:i,context:e,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.MC.push(r),this.QC(r)}unregister(t){const i=this.MC.find((i=>i.element===t));i&&(this.MC=this.MC.filter((i=>i.element!==t)),this.sE(i))}unregisterAll(t){const i=this.MC.filter((i=>i.mediator===t));i.forEach(this.sE),this.MC=(0,o.V7)(this.MC,i)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach((e=>{this.LC[e]=this.LC[e]||[],this.LC[e].push({initiator:t,action:i[e]})}))}removeGlobalActions(t){Object.keys(this.LC).forEach((i=>{this.LC[i].some((i=>i.initiator===t))&&(this.LC[i]=this.LC[i].filter((i=>i.initiator!==t)))}))}disableSpecialInteractions(t){const i=this.yE(t);i&&(i.disabledSpecialInteractions=(0,o.gX)(i.allowedSpecialInteractions))}enableSpecialInteractions(t){const i=this.yE(t);i&&(i.disabledSpecialInteractions=[])}getNonInterruptibleInteractions(){return[n.Z.HoldStart,n.Z.HoldEnd,n.Z.SwipeMove,n.Z.SwipeEnd,n.Z.Scroll]}disableScrollEvent(){this.WC=!1}enableScrollEvent(){this.WC=!0}destroy(){clearTimeout(this.NC),this.MC.forEach(this.sE),this.DS.document.removeEventListener("mousedown",this.mE),this.DS.document.removeEventListener("mouseup",this.gE)}bE(t){const i=this.nE(t),e=i.element.getBoundingClientRect(),s=this.IE(t),n=e.width,r=(0,d.dQ)(0,n,0,100,s);this.PE(i,this.kC,r)}PE(t,i,e){e<i?t.mediator.publish(t.context,n.Z[n.Z.TapLeft]):t.mediator.publish(t.context,n.Z[n.Z.TapRight])}oE(t){clearTimeout(this.NC),this.VC=!1,this.UC=!1;const i=this.nE(t);(0,a.cn)(i.element,s.Gj.OnHold),this.NC=setTimeout((()=>{this.VC=!0,this.DC&&(this.UC=!0,i.mediator.publish(i.context,n.Z[n.Z.HoldStart]))}),this.CC)}vE(t){clearTimeout(this.NC);const i=this.nE(t);(0,a.IV)(i.element,s.Gj.OnHold),this.VC?(this.VC=!1,this.UC&&(this.UC=!1,i.mediator.publish(i.context,n.Z[n.Z.HoldEnd]))):(this.jC=!0,this.bE(t))}lE(t,i,e){e=e||this.hE(t),t.stopPropagation(),this.aE(t,i,r.HT.Interaction),this.aE(t,i,r.HT.InteractionEnd),(this.VC||this.$C||this.DC&&this.rE(i,r.WR.Hold))&&this.vE(t),(this.$C||this.rE(i,r.WR.Swipe))&&this.AE(i,e)}cE(t,i){this.zC=this.uE(i),this.zC===r.qs.X&&(this.$C=!0,this.VC||(clearTimeout(this.NC),this.NC=null,this.VC=!0,t.mediator.publish(t.context,n.Z[n.Z.HoldStart])))}AE(t,i){if(this.$C){const e=this.SE(i);t.mediator.publish(t.context,n.Z[n.Z.SwipeEnd],{payload:e})}(0,a.h_)(this.DS,this.ma),this.ma=null,this.$C=!1,this.OC=null,this.BC=null,this.zC=null,this.qC=0,this.HC=0}dE(t){this.HC<this.EC?this.HC++:(this.qC=t,this.HC=0)}uE(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?r.qs.X:r.qs.Y}SE(t){return t.deltaXFromStart-this.qC<0?r.Av.Left:r.Av.Right}hE(t){const i=t.changedTouches[0];return{deltaXFromStart:i.clientX-this.OC,deltaYFromStart:i.clientY-this.BC,eventX:i.clientX,eventY:i.clientY}}nE(t){return this.GC||this.yE(t.currentTarget)}yE(t){return this.MC.find((i=>i.element===t))}IE(t){const i=this.nE(t);if(this.MA){return t.changedTouches[0].clientX-i.element.getBoundingClientRect().left}return t.offsetX}rE(t,i){return t.allowedSpecialInteractions.includes(i)&&!t.disabledSpecialInteractions.includes(i)}aE(t,i,e){const s=i.callbacks[e];(0,l.mf)(s)&&s(t),this.fE(e,t)}fE(t,i){var e;null===(e=this.LC[t])||void 0===e||e.forEach((t=>{t.action(i)}))}}},4474:(t,i,e)=>{"use strict";e.d(i,{c:()=>m});var s,n=e(289),r=e(8736),o=e(9022);!function(t){t.Phone="PHN",t.Tablet="TAB",t.IPOD="PMP",t.Desktop="DSK",t.CTV="STV",t.Unknown="UNWN"}(s||(s={}));var a,h=e(8211);!function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Mute="MUTE",t.Plcmt="PLCMT",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.Npa="NPA",t.DoNotTrack="DNT",t.LotameClientId="LOTAME_CLIENT_ID",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.FraudSensorDeviceIdentifier="FS_DEVICE_IDENT",t.CnxSupplierId="CNX_SUPPLIER_ID",t.AdxPublisherNetworkCode="ADX_CPNC",t.ErrorCode="ERRORCODE",t.NielsenSideId="NIELSEN_SITE_ID",t.NielsenPlacementId="NIELSEN_PLACEMENT_ID",t.OsGrouping="OS_GROUPING",t.DeviceGrouping="DEVICE_GROUPING",t.UserId="USER_ID",t.Platform="PLATFORM",t.OsVersion="OS_VERSION",t.UOO="UOO",t.TimeStamp="timestamp"}(a||(a={}));var c,d=e(4798);!function(t){t.isStringWithMacros=function(t,i){if(!(0,d.QM)(t))return!1;const e=`\\${i[0]}.*?\\${i[1]}`,s=new RegExp(e,"g");return!!t.match(s)},t.splitByFirstEqual=function(t){if(!(0,d.QM)(t))return;const i=t.indexOf("=");return-1!==i?[t.slice(0,i),t.slice(i+1)]:void 0}}(c||(c={}));var l=e(5650),u=e(3020),p=e(9791),f=e(9607);class m{constructor(t,i,e,s,r,h,c,l){this.yl=t,this._E=new Map,this.TE="[",this.xE="]",this._E.set(a.Autoplay,t.playbackMode===n.ProtoPlayerPlaybackModeEnum.Autoplay),this._E.set(a.UserAgent,navigator.userAgent),this._E.set(a.UserLong,i.lon),this._E.set(a.UserLat,i.lat),this._E.set(a.Ip,i.ip),this.kE(h),this.CE(c),this.EE(e,s,r),this.ME(),this._E.set(a.Domain,s),this._E.set(a.CnxSupplierId,o.kd),this._E.set(a.SessionId,t.sessionId),(0,d.QM)(l)&&this._E.set(a.AdxPublisherNetworkCode,`,${l}`)}kE(t){this._E.set(a.AppBundle,t.bundleID),this._E.set(a.AppName,t.appName),this._E.set(a.AppUrl,t.storeURL)}CE(t){this._E.set(a.SourceReferrer,t)}ME(){const t=(0,u.w6)()?1:0;this._E.set(a.DoNotTrack,t)}EE(t,i,e){this._E.set(a.Url,t),this._E.set(a.PageUrl,e),this._E.set(a.Site,i),this._E.set(a.Publisher,t),this._E.set(a.DescriptionUrl,t)}LE(){const t=(0,p.qs)();this._E.set(a.CashBuster,t),this._E.set(a.Random,t),this._E.set(a.Ctd,t)}BE(t){return t.split("?")[0]}RE(t){return t.split("?").slice(1).join("?")}Zp(t,i){const e=this.BE(t),s=this.OE(this.RE(t),i);return`${e}${s?`?${s}`:""}`}OE(t,i,e=!1){let s=t;const n=s.split("&"),r=[this.TE,this.xE];try{n.forEach((n=>{const o=c.splitByFirstEqual(n);if((0,l.BZ)(o)&&o[1])if(c.isStringWithMacros(o[1],r))s=s.replace(o[1],this.NE(o[1],i,e));else try{if(!o[1].includes(encodeURIComponent("="))||0===decodeURIComponent(o[1]).split("=").length)return;const t=this.OE(decodeURIComponent(o[1]),i,!0);s=s.replace(o[1],encodeURIComponent(t))}catch(i){(0,p.Vm)([95,5])&&(0,f.nF)({message:"ReplaceData_handleMacros",exception:`pair:${o}, ${i.message}`,callStack:t,level:f.D_.WARN,sessionId:this.yl.sessionId},{throttle:1})}}))}catch(i){throw(0,f.nF)({message:"MacrosService_handleMacros",exception:i.message,callStack:t,level:f.D_.CRITICAL,sessionId:this.yl.sessionId},{throttle:1}),i}return s=this.FE(s,i),this.UE(s)}UE(t){return t.includes(this.TE)&&(t=t.cnx_replaceAll(this.TE,encodeURIComponent(this.TE))),t.includes(this.xE)&&(t=t.cnx_replaceAll(this.xE,encodeURIComponent(this.xE))),t}NE(t,i,e){let s,n=t,r=t.toLowerCase();return i.forEach(((t,i)=>{const o=this.TE+i.toLowerCase()+this.xE;for(;r.includes(o);){const i=r.indexOf(o),a=i+o.length;s=e?t:encodeURIComponent(t),n=n.slice(0,i)+s+n.slice(a),r=n.toLowerCase()}})),n}FE(t,i){const e=`${this.TE}${a.AdxPublisherNetworkCode}${this.xE}`;return t.includes(e)?i.has(a.AdxPublisherNetworkCode)?t.cnx_replaceAll(e,i.get(a.AdxPublisherNetworkCode)):t.cnx_replaceAll(e,""):t}setAdWidth(t){this._E.set(a.Width,Math.floor(t))}setAdHeight(t){this._E.set(a.Height,Math.floor(t))}setSubId(t){this._E.set(a.SubId,t)}setGDPR(t){this._E.set(a.Gdpr,t)}setUUID(t){this._E.set(a.Uuid,t)}setGDPRConsent(t){this._E.set(a.GdprConsent,t)}setConsent(t){this._E.set(a.Consent,t)}setVideoId(t){this._E.set(a.VideoId,t)}setNPA(t){this._E.set(a.Npa,t)}setVideoTime(t){this._E.set(a.VideoTime,Math.floor(t))}setVideoUrl(t){this._E.set(a.VideoUrl,t)}setVideoDescription(t){this._E.set(a.VideoDescription,t)}setVideoDuration(t){this._E.set(a.VideoDuration,t),this._E.set(a.ContentLength,t)}setVideoTitle(t){let i;this._E.set(a.VideoTitle,t),this._E.set(a.MediaTitle,t),t&&(i=t.split(" ").join(",")),this._E.set(a.VideoKeywords,i)}setMute(t){this._E.set(a.Mute,t)}setPlcmt(t){this._E.set(a.Plcmt,t)}setAdPosition(t="midRoll"){this._E.set(a.AdPosition,t)}setupMacros(t){return this.LE(),this.Zp(t,this._E)}addExtraMacros(t){const i=Object.values(a);Object.keys(t).filter((t=>!i.includes(t.toUpperCase()))).forEach((i=>{this._E.set(i,t[i])}))}getMacroValue(t){return this._E.get(t)}getExtraMacros(){const t=Object.values(a),i={};return this._E.forEach(((e,s)=>{t.includes(s)||null==e||(i[s]=(0,d.QM)(e)?e:JSON.stringify(e))})),i}setUsPrivacyString(t){const i=t||"";this._E.set(a.UsPrivacyString,i)}setUserId(t){this._E.set(a.FraudSensorUserId,t)}setPublisherId(t){this._E.set(a.PublisherId,t)}setFraudSensorMacros(t){this._E.set(a.FraudSensorDeviceType,t.deviceType),this._E.set(a.FraudSensorLookupId,t.lookupId),this._E.set(a.FraudSensorLookupResponseCode,t.lookupResponseCode),this._E.set(a.FraudSensorMediaType,t.mediaType),this._E.set(a.FraudSensorDeviceIdentifier,t.deviceIdentifier)}setErrorCode(t){this._E.set(a.ErrorCode,t)}setNielsenSiteId(t){this._E.set(a.NielsenSideId,t)}setNielsenPlacementId(t){this._E.set(a.NielsenPlacementId,t)}setNielsenOsGrouping(t){switch(t){case h.M.Android:this._E.set(a.OsGrouping,"ANDROID");break;case h.M.Ios:this._E.set(a.OsGrouping,"IOS");break;default:this._E.set(a.OsGrouping,void 0)}}setNielsenDeviceGrouping(t){switch(t){case r.VB.Smartphone:this._E.set(a.DeviceGrouping,s.Phone);break;case r.VB.Tablet:this._E.set(a.DeviceGrouping,s.Tablet);break;case r.VB.Desktop:this._E.set(a.DeviceGrouping,s.Desktop);break;case r.VB.SmartTV:this._E.set(a.DeviceGrouping,s.CTV);break;case r.VB.WearableComputer:this._E.set(a.DeviceGrouping,s.IPOD);break;default:this._E.set(a.DeviceGrouping,s.Unknown)}}setNielsenUserId(t){this._E.set(a.UserId,t)}setNielsenPlatform(t){this._E.set(a.Platform,t?"MBL":"DSK")}setNielsenOsVersion(t){this._E.set(a.OsVersion,t.toString())}setNielsenUOO(t){this._E.set(a.UOO,t)}setNielsenTimestamp(){this._E.set(a.TimeStamp,Date.now())}destroy(){}}},5292:(t,i,e)=>{"use strict";var s,n;e.d(i,{v:()=>r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.ls=t,this.$E=[],this.qE(),this.HE()}on(t){this.$E.push(t),t(this.isDocumentVisible())}off(t){this.$E=this.$E.filter((i=>i!==t))}qE(){void 0!==this.ls.getDocumentProperty(s.hidden)?(this.zE=s.hidden,this.GE=n.visibilitychange):void 0!==this.ls.getDocumentProperty(s.msHidden)?(this.zE=s.msHidden,this.GE=n.msvisibilitychange):void 0!==this.ls.getDocumentProperty(s.webkitHidden)&&(this.zE=s.webkitHidden,this.GE=n.webkitvisibilitychange)}HE(){this.ls.addEventListenerOnGlobal(this.GE,(()=>{this.$E.forEach((t=>{t(this.isDocumentVisible())}))}),!0,!1)}isDocumentVisible(){return!this.ls.getDocumentProperty(this.zE)}}},5421:(t,i,e)=>{"use strict";e.d(i,{a:()=>z});var s,n=[],r="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var o,a=function(t){return Object.freeze(t)},h=function(t,i){this.inlineSize=t,this.blockSize=i,a(this)},c=function(){function t(t,i,e,s){return this.x=t,this.y=i,this.width=e,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,a(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(i){return new t(i.x,i.y,i.width,i.height)},t}(),d=function(t){return t instanceof SVGElement&&"getBBox"in t},l=function(t){if(d(t)){var i=t.getBBox(),e=i.width,s=i.height;return!e&&!s}var n=t,r=n.offsetWidth,o=n.offsetHeight;return!(r||o||t.getClientRects().length)},u=function(t){var i;if(t instanceof Element)return!0;var e=null===(i=null==t?void 0:t.ownerDocument)||void 0===i?void 0:i.defaultView;return!!(e&&t instanceof e.Element)},p="undefined"!=typeof window?window:{},f=new WeakMap,m=/auto|scroll/,g=/^tb|vertical/,v=/msie|trident/i.test(p.navigator&&p.navigator.userAgent),y=function(t){return parseFloat(t||"0")},b=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=!1),new h((e?i:t)||0,(e?t:i)||0)},I=a({devicePixelContentBoxSize:b(),borderBoxSize:b(),contentBoxSize:b(),contentRect:new c(0,0,0,0)}),P=function(t,i){if(void 0===i&&(i=!1),f.has(t)&&!i)return f.get(t);if(l(t))return f.set(t,I),I;var e=getComputedStyle(t),s=d(t)&&t.ownerSVGElement&&t.getBBox(),n=!v&&"border-box"===e.boxSizing,r=g.test(e.writingMode||""),o=!s&&m.test(e.overflowY||""),h=!s&&m.test(e.overflowX||""),u=s?0:y(e.paddingTop),p=s?0:y(e.paddingRight),P=s?0:y(e.paddingBottom),w=s?0:y(e.paddingLeft),S=s?0:y(e.borderTopWidth),A=s?0:y(e.borderRightWidth),x=s?0:y(e.borderBottomWidth),_=w+p,T=u+P,C=(s?0:y(e.borderLeftWidth))+A,k=S+x,E=h?t.offsetHeight-k-t.clientHeight:0,M=o?t.offsetWidth-C-t.clientWidth:0,L=n?_+C:0,R=n?T+k:0,B=s?s.width:y(e.width)-L-M,O=s?s.height:y(e.height)-R-E,D=B+_+M+C,N=O+T+E+k,F=a({devicePixelContentBoxSize:b(Math.round(B*devicePixelRatio),Math.round(O*devicePixelRatio),r),borderBoxSize:b(D,N,r),contentBoxSize:b(B,O,r),contentRect:new c(w,u,B,O)});return f.set(t,F),F},w=function(t,i,e){var n=P(t,e),r=n.borderBoxSize,o=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(i){case s.DEVICE_PIXEL_CONTENT_BOX:return a;case s.BORDER_BOX:return r;default:return o}},S=function(t){var i=P(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=a([i.borderBoxSize]),this.contentBoxSize=a([i.contentBoxSize]),this.devicePixelContentBoxSize=a([i.devicePixelContentBoxSize])},A=function(t){if(l(t))return 1/0;for(var i=0,e=t.parentNode;e;)i+=1,e=e.parentNode;return i},x=function(){var t=1/0,i=[];n.forEach((function(e){if(0!==e.activeTargets.length){var s=[];e.activeTargets.forEach((function(i){var e=new S(i.target),n=A(i.target);s.push(e),i.lastReportedSize=w(i.target,i.observedBox),n<t&&(t=n)})),i.push((function(){e.callback.call(e.observer,s,e.observer)})),e.activeTargets.splice(0,e.activeTargets.length)}}));for(var e=0,s=i;e<s.length;e++){(0,s[e])()}return t},_=function(t){n.forEach((function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach((function(e){e.isActive()&&(A(e.target)>t?i.activeTargets.push(e):i.skippedTargets.push(e))}))}))},T=function(){var t,i=0;for(_(i);n.some((function(t){return t.activeTargets.length>0}));)i=x(),_(i);return n.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:r}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=r),window.dispatchEvent(t)),i>0},C=[],k=function(t){if(!o){var i=0,e=document.createTextNode("");new MutationObserver((function(){return C.splice(0).forEach((function(t){return t()}))})).observe(e,{characterData:!0}),o=function(){e.textContent="".concat(i?i--:i++)}}C.push(t),o()},E=0,M={attributes:!0,characterData:!0,childList:!0,subtree:!0},L=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],R=function(t){return void 0===t&&(t=0),Date.now()+t},B=!1,O=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var i=this;if(void 0===t&&(t=250),!B){B=!0;var e,s=R(t);e=function(){var e=!1;try{e=T()}finally{if(B=!1,t=s-R(),!E)return;e?i.run(1e3):t>0?i.run(t):i.start()}},k((function(){requestAnimationFrame(e)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,M)};document.body?i():p.addEventListener("DOMContentLoaded",i)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),L.forEach((function(i){return p.addEventListener(i,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),L.forEach((function(i){return p.removeEventListener(i,t.listener,!0)})),this.stopped=!0)},t}()),D=function(t){!E&&t>0&&O.start(),!(E+=t)&&O.stop()},N=function(){function t(t,i){this.target=t,this.observedBox=i||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,i=w(this.target,this.observedBox,!0);return t=this.target,d(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=i),this.lastReportedSize.inlineSize!==i.inlineSize||this.lastReportedSize.blockSize!==i.blockSize},t}(),F=function(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i},$=new WeakMap,V=function(t,i){for(var e=0;e<t.length;e+=1)if(t[e].target===i)return e;return-1},j=function(){function t(){}return t.connect=function(t,i){var e=new F(t,i);$.set(t,e)},t.observe=function(t,i,e){var s=$.get(t),r=0===s.observationTargets.length;V(s.observationTargets,i)<0&&(r&&n.push(s),s.observationTargets.push(new N(i,e&&e.box)),D(1),O.schedule())},t.unobserve=function(t,i){var e=$.get(t),s=V(e.observationTargets,i),r=1===e.observationTargets.length;s>=0&&(r&&n.splice(n.indexOf(e),1),e.observationTargets.splice(s,1),D(-1))},t.disconnect=function(t){var i=this,e=$.get(t);e.observationTargets.slice().forEach((function(e){return i.unobserve(t,e.target)})),e.activeTargets.splice(0,e.activeTargets.length)},t}(),U=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");j.connect(this,t)}return t.prototype.observe=function(t,i){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");j.observe(this,t,i)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");j.unobserve(this,t)},t.prototype.disconnect=function(){j.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),q=e(3020),H=e(9607);class z{constructor(t,i){this.WE=[],this.yy=(t,i)=>{t.forEach((t=>{this.QE(t.target).forEach((t=>{t&&((0,q.Tp)(t.element),t.callback(t.element))}))}))};try{const i=t.ResizeObserver||U;this.JE=new i(this.yy)}catch(t){(0,H.nF)({sessionId:i,message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:H.D_.CRITICAL})}}on(t,i){this.KE(t,i)||(this.WE.push({element:t,callback:i}),this.JE.observe(t))}off(t,i){const e=this.KE(t,i);if(!e)return;this.JE.unobserve(e.element);const s=this.WE.indexOf(e);s>=0&&this.WE.splice(s,1)}destroy(){if(this.WE)for(;this.WE.length>0;)this.WE.pop();this.JE.disconnect()}QE(t){return this.WE.filter((i=>i.element===t))}KE(t,i){return this.WE.find((e=>e.element===t&&e.callback===i))}}},1553:(t,i,e)=>{"use strict";e.d(i,{f:()=>o});var s=e(5650),n=e(51),r=e(4798);class o{constructor(){this.ZE={},this.tM={domain:"",urlParams:[]},this.ignoredDomains=[]}setQueryParams(t){this.ZE=t}setUrlParams(t){this.tM=t}appendParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.iM(t)}appendQueryParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.eM(t,Object.keys(this.ZE).map((t=>({paramName:t,paramValue:this.ZE[t]}))))}iM(t){if(!(0,s.BZ)(Object.keys(this.tM))||!(0,s.BZ)(this.tM.urlParams)||!t.includes(this.tM.domain))return t;const i=this.tM.urlParams.reduce(((t,i)=>`${t}${i}`),"");return t.replace(this.tM.domain,this.tM.domain+"/"+i)}eM(t,i){if(!(0,s.BZ)(i))return t;t+=(0,n.CK)(t);let e="";return i.forEach((t=>{(0,r.QM)(t.paramName)&&(0,r.QM)(t.paramValue)&&(e+=`${e.length>0?"&":""}${t.paramName}=${t.paramValue}`)})),t+e}isIgnoredDomain(t){return this.ignoredDomains.some((i=>t.indexOf(i)>-1))}}},5845:(t,i,e)=>{"use strict";var s;e.d(i,{Q:()=>s}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}))},2918:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});var s=e(5845);const n=[s.Q.P1,s.Q.P2,s.Q.P4,s.Q.P7,s.Q.P8]},3222:(t,i,e)=>{"use strict";e.d(i,{k:()=>_t,x:()=>kt});var s=e(6716),n=e(5419),r=e(289),o=e(7945),a=e(2450),h=e(7994),c=e(604),d=e(6153);const l={ccpaSubdivisions:[5332921,6254928,4831725,5417618],country:{US:6252001}};var u;!function(t){t.Connatix="143",t.DV360="755",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82",t.TheMediaGrid="686",t.Rise="1043",t._33Across="58",t.Lotame="999999"}(u||(u={}));const p=["1YNY"],f="Y";var m,g=e(5650),v=e(9791),y=e(9607),b=e(1310);!function(t){t.CCPA_Error="CCPA Error",t.CCPA_Pending="CCPA Pending",t.CCPA_Success="CCPA Success",t.CCPA_Delayed_Success="CCPA Delayed Success",t.CCPA_Delayed_Failure="CCPA Delayed Failure"}(m||(m={}));class I{constructor(t,i){this.sM=t,this.nM=1,this.hM="__uspapi",this.aM="getUSPData",this.dM={isPending:!0,isRejected:!1,isDelayed:!1,promise:new Promise((()=>{}))},this.lM(i)}getUsPrivacyString(){if(this.sM.usPrivacyString||this.sM.isCcpaApplicable)return this.sM.usPrivacyString}isCcpaApplicable(){return this.sM.isCcpaApplicable}isSellUserAllowed(){return!this.sM.isCcpaApplicable||this.uM()}setGeoLocation(t){this.pM=t,(0,g.d3)(t.subdivisionId,l.ccpaSubdivisions)||(this.sM.isCcpaApplicable=!1)}getGeoLocation(){return this.pM}fetchUsPrivacyString(){return this.fM()&&this.vM(),this.isCcpaApplicable()?new Promise((t=>{this.getUsPrivacyString()?t():t(this.mM())})):Promise.resolve()}mM(){return this.dM.promise=new Promise(((t,i)=>{const e=this.sM.getScope()[this.hM];e?(this.gM=!0,e(this.aM,this.nM,((e,s)=>{s?(this.lM(e.uspString),t()):i()}))):i()})),this.makeQuerablePromise(this.dM),this.dM.promise}uM(){return!this.sM.usPrivacyString||(0,g.d3)(this.sM.usPrivacyString,p)}yM(t){this.sM.usPrivacyString=t}lM(t){let i=t;window.navigator.globalPrivacyControl&&(t?this.uM()&&(i=function(t,i){return(null==t?void 0:t.slice(0,2))+i+t.slice(3)}(t,f)):i="1-Y-"),this.yM(i)}fM(){if(!(0,v.Vm)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),i=new Date(2020,10,17,12,0,0).getTime();return(0,b.k$)(t,i)}vM(){const{countryGeoId:t,subdivisionId:i}=this.pM;t===l.country.US&&(0,y.nF)({message:"UserCcpaManager_logCCPA",level:y.D_.INFO,callStack:JSON.stringify(i),exception:this.sM.usPrivacyString})}ccpaInfoLogging(t){this.isCcpaApplicable()&&this.gM&&(this.dM.isPending?((0,y.nF)({message:m.CCPA_Pending,exception:"CCPA_Pending_At_Start_AdRequest",level:y.D_.INFO,callStack:t}),this.dM.isDelayed=!0,this.bM=t):this.dM.isRejected&&(0,y.nF)({message:m.CCPA_Error,exception:"CCPA_Error_At_Start_AdRequest",level:y.D_.INFO,callStack:t}))}makeQuerablePromise(t){t.promise.then((()=>{t.isPending=!1,t.isDelayed&&(0,y.nF)({message:m.CCPA_Delayed_Success,exception:"CCPA_Success_After_Delay",level:y.D_.INFO,callStack:this.bM})})).catch((i=>{throw t.isRejected=!0,t.isPending=!1,t.isDelayed&&(0,y.nF)({message:m.CCPA_Delayed_Failure,exception:"CCPA_Failed_After_Delay",level:y.D_.INFO,callStack:this.bM}),i}))}}var P=e(5845);const w={VENDOR_ID:"95",REQUIRED_PURPOSES:[P.Q.P1,P.Q.P3,P.Q.P5,P.Q.P7,P.Q.P8,P.Q.P9,P.Q.P10]};var S;!function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(S||(S={}));var A=e(2918);const x={[S.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[S.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};var _=e(4798);class T{constructor(t,i){this.IM=t,this.wM=i,this.apiType=S.CmpApi,this._M={},this.TM=null,this.xM=t=>new Promise(((i,e)=>{try{const e="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof e&&e.kM)if(e.kM.callId===this.CM){const t=e.kM.returnValue&&e.kM.returnValue.vendorConsents;this.MM(t).then((()=>i(this.CM)))}else if(e.kM.callId===this.LM){const t=e.kM.returnValue&&e.kM.returnValue.consentData;this.BM(t).then((()=>i(this.LM)))}}catch(t){e()}}))}isApiOnPage(){return null!==this.IM||null!==this.wM}bindToApi(){return null!==this.IM?new Promise(((t,i)=>{this.RM(this.IM).then((()=>t())).catch((t=>i(t)))})):null!==this.wM?this.OM(this.wM):Promise.reject()}isConsentForVendor(t){return!!this._M[t]}getConsentPayload(){return this.TM}setInAppConsentData(t){this.MM(t),this.BM(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(u.Connatix)}isConsentForPurposes(t){return!0}OM(t){this.LM=(0,v.qs)(),this.CM=(0,v.qs)();const i={};return new Promise((e=>{const s=t=>{this.xM(t).then((t=>{i[t]=!0,i[this.LM]&&i[this.CM]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=x[S.CmpApi].getVendorConsentDataMethodName,r=x[S.CmpApi].getConsentDataMethodName;t.postMessage({DM:{command:n,parameter:null,callId:this.CM}},"*"),t.postMessage({DM:{command:r,parameter:null,callId:this.LM}},"*")}))}RM(t){const i=x[S.CmpApi].windowPropertyName,e=x[S.CmpApi].getVendorConsentDataMethodName,s=x[S.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise((s=>{t[i](e,null,((t,i)=>{if(i){const{vendorConsents:i}=t;this.MM(i).then((()=>s()))}}))})),r=new Promise((e=>{t[i](s,null,((t,i)=>{if(i){const{consentData:i}=t;this.BM(i).then((()=>e()))}}))}));return Promise.all([n,r])}return Promise.reject()}MM(t){return(0,_.as)(t)?(this._M=t,Promise.resolve()):Promise.reject()}BM(t){return(0,_.HD)(t)?(this.TM=t,Promise.resolve()):Promise.reject()}}var C,k,E,M,L=e(8462);class R extends Error{constructor(t){super(t),this.name="EncodingError"}}class B extends Error{constructor(t){super(t),this.name="DecodingError"}}class O{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(t){if(!/^[0-1]+$/.test(t))throw new R("Invalid bitField");const i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";let e="";for(let i=0;i<t.length;i+=this.BASIS)e+=this.DICT[parseInt(t.substr(i,this.BASIS),2)];return e}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new B("Invalidly encoded Base64URL string");let i="";for(let e=0;e<t.length;e++){const s=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-s.length)+s}return i}}class D{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(t){return D.langSet.has(t)}forEach(t){D.langSet.forEach(t)}get size(){return D.langSet.size}}class N{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardStacks="useNonStandardStacks";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class F{clone(){const t=new this.constructor;return Object.keys(this).forEach((i=>{const e=this.deepClone(this[i]);void 0!==e&&(t[i]=e)})),t}deepClone(t){const i=typeof t;if("number"===i||"string"===i||"boolean"===i)return t;if(null!==t&&"object"===i){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){const i=[];for(const e of t)i.push(this.deepClone(e));return t instanceof Array?i:new t.constructor(i)}{const i={};for(const e in t)t.hasOwnProperty(e)&&(i[e]=this.deepClone(t[e]));return i}}}}class $ extends Error{constructor(t,i,e=""){super(`invalid value ${i} passed for ${t} ${e}`),this.name="TCModelError"}}!function(t){t[t.NOT_ALLOWED=0]="NOT_ALLOWED",t[t.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",t[t.REQUIRE_LI=2]="REQUIRE_LI"}(C||(C={}));class V extends F{static hashSeparator="-";purposeId_;restrictionType;constructor(t,i){super(),void 0!==t&&(this.purposeId=t),void 0!==i&&(this.restrictionType=i)}static unHash(t){const i=t.split(this.hashSeparator),e=new V;if(2!==i.length)throw new $("hash",t);return e.purposeId=parseInt(i[0],10),e.restrictionType=parseInt(i[1],10),e}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${V.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(t){this.purposeId_=t}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===C.NOT_ALLOWED||this.restrictionType===C.REQUIRE_CONSENT||this.restrictionType===C.REQUIRE_LI)}isSameAs(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType}}class j extends F{root=null;getRoot(){return this.root}isEmpty(){return!this.root}add(t){const i={value:t,left:null,right:null};let e;if(this.isEmpty())this.root=i;else for(e=this.root;;)if(t<e.value){if(null===e.left){e.left=i;break}e=e.left}else{if(!(t>e.value))break;if(null===e.right){e.right=i;break}e=e.right}}get(){const t=[];let i=this.root;for(;i;)if(i.left){let e=i.left;for(;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t}contains(t){let i=!1,e=this.root;for(;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i}min(t=this.root){let i;for(;t;)t.left?t=t.left:(i=t.value,t=null);return i}max(t=this.root){let i;for(;t;)t.right?t=t.right:(i=t.value,t=null);return i}remove(t,i=this.root){let e=null,s="left";for(;i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){const t=this.min(i.right);this.remove(t,i.right),i.value=t}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}}static build(t){if(t&&0!==t.length){if(1===t.length){const i=new j;return i.add(t[0]),i}{const i=t.length>>1,e=new j;e.add(t[i]);const s=e.getRoot();if(s){if(i+1<t.length){const e=j.build(t.slice(i+1));s.right=e?e.getRoot():null}if(i-1>0){const e=j.build(t.slice(0,i-1));s.left=e?e.getRoot():null}}return e}}return null}}class U extends F{bitLength=0;map=new Map;gvl_;has(t){return this.map.has(t)}isOkToHave(t,i,e){let s=!0;if(this.gvl?.vendors){const n=this.gvl.vendors[e];if(n)if(t===C.NOT_ALLOWED)s=n.legIntPurposes.includes(i)||n.purposes.includes(i);else if(n.flexiblePurposes.length)switch(t){case C.REQUIRE_CONSENT:s=n.flexiblePurposes.includes(i)&&n.legIntPurposes.includes(i);break;case C.REQUIRE_LI:s=n.flexiblePurposes.includes(i)&&n.purposes.includes(i)}else s=!1;else s=!1}return s}add(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){const e=i.hash;this.has(e)||(this.map.set(e,new j),this.bitLength=0),this.map.get(e).add(t)}}restrictPurposeToLegalBasis(t){const i=this.gvl.vendorIds,e=t.hash,s=function(){let t;for(t of i);return t}(),n=[...Array(s).keys()].map((t=>t+1));for(let t=1;t<=s;t++)this.has(e)||(this.map.set(e,j.build(n)),this.bitLength=0),this.map.get(e).add(t)}getVendors(t){let i=[];if(t){const e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{const t=new Set;this.map.forEach((i=>{i.get().forEach((i=>{t.add(i)}))})),i=Array.from(t)}return i}getRestrictionType(t,i){let e;return this.getRestrictions(t).forEach((t=>{t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)})),e}vendorHasRestriction(t,i){let e=!1;const s=this.getRestrictions(t);for(let t=0;t<s.length&&!e;t++)e=i.isSameAs(s[t]);return e}getMaxVendorId(){let t=0;return this.map.forEach((i=>{t=Math.max(i.max(),t)})),t}getRestrictions(t){const i=[];return this.map.forEach(((e,s)=>{t?e.contains(t)&&i.push(V.unHash(s)):i.push(V.unHash(s))})),i}getPurposes(){const t=new Set;return this.map.forEach(((i,e)=>{t.add(V.unHash(e).purposeId)})),Array.from(t)}remove(t,i){const e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))}set gvl(t){this.gvl_||(this.gvl_=t,this.map.forEach(((t,i)=>{const e=V.unHash(i);t.get().forEach((i=>{this.isOkToHave(e.restrictionType,e.purposeId,i)||t.remove(i)}))})))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(t){t.COOKIE="cookie",t.WEB="web",t.APP="app"}(k||(k={})),function(t){t.CORE="core",t.VENDORS_DISCLOSED="vendorsDisclosed",t.VENDORS_ALLOWED="vendorsAllowed",t.PUBLISHER_TC="publisherTC"}(E||(E={}));class q{static ID_TO_KEY=[E.CORE,E.VENDORS_DISCLOSED,E.VENDORS_ALLOWED,E.PUBLISHER_TC];static KEY_TO_ID={[E.CORE]:0,[E.VENDORS_DISCLOSED]:1,[E.VENDORS_ALLOWED]:2,[E.PUBLISHER_TC]:3}}class H extends F{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let t=1;t<=this.maxId;t++)yield[t,this.has(t)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(t){return this.set_.has(t)}unset(t){Array.isArray(t)?t.forEach((t=>this.unset(t))):"object"==typeof t?this.unset(Object.keys(t).map((t=>Number(t)))):(this.set_.delete(Number(t)),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach((t=>{this.maxId_=Math.max(this.maxId,t)}))))}isIntMap(t){let i="object"==typeof t;return i=i&&Object.keys(t).every((i=>{let e=Number.isInteger(parseInt(i,10));return e=e&&this.isValidNumber(t[i].id),e=e&&void 0!==t[i].name,e})),i}isValidNumber(t){return parseInt(t,10)>0}isSet(t){let i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i}set(t){if(Array.isArray(t))t.forEach((t=>this.set(t)));else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map((t=>Number(t))));else{if(!this.isValidNumber(t))throw new $("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}}empty(){this.set_=new Set}forEach(t){for(let i=1;i<=this.maxId;i++)t(this.has(i),i)}get size(){return this.set_.size}setAll(t){this.set(t)}}class z{static[N.cmpId]=12;static[N.cmpVersion]=12;static[N.consentLanguage]=12;static[N.consentScreen]=6;static[N.created]=36;static[N.isServiceSpecific]=1;static[N.lastUpdated]=36;static[N.policyVersion]=6;static[N.publisherCountryCode]=12;static[N.publisherLegitimateInterests]=24;static[N.publisherConsents]=24;static[N.purposeConsents]=24;static[N.purposeLegitimateInterests]=24;static[N.purposeOneTreatment]=1;static[N.specialFeatureOptins]=12;static[N.useNonStandardStacks]=1;static[N.vendorListVersion]=12;static[N.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class W{static encode(t){return String(Number(t))}static decode(t){return"1"===t}}class G{static encode(t,i){let e;if("string"==typeof t&&(t=parseInt(t,10)),e=t.toString(2),e.length>i||t<0)throw new R(`${t} too large to encode into ${i}`);return e.length<i&&(e="0".repeat(i-e.length)+e),e}static decode(t,i){if(i!==t.length)throw new B("invalid bit length");return parseInt(t,2)}}class X{static encode(t,i){return G.encode(Math.round(t.getTime()/100),i)}static decode(t,i){if(i!==t.length)throw new B("invalid bit length");const e=new Date;return e.setTime(100*G.decode(t,i)),e}}class Q{static encode(t,i){let e="";for(let s=1;s<=i;s++)e+=W.encode(t.has(s));return e}static decode(t,i){if(t.length!==i)throw new B("bitfield encoding length mismatch");const e=new H;for(let s=1;s<=i;s++)W.decode(t[s-1])&&e.set(s);return e.bitLength=t.length,e}}class J{static encode(t,i){const e=(t=t.toUpperCase()).charCodeAt(0)-65,s=t.charCodeAt(1)-65;if(e<0||e>25||s<0||s>25)throw new R(`invalid language code: ${t}`);if(i%2==1)throw new R(`numBits must be even, ${i} is not valid`);i/=2;return G.encode(e,i)+G.encode(s,i)}static decode(t,i){let e;if(i!==t.length||t.length%2)throw new B("invalid bit length for language");{const i=65,s=t.length/2,n=G.decode(t.slice(0,s),s)+i,r=G.decode(t.slice(s),s)+i;e=String.fromCharCode(n)+String.fromCharCode(r)}return e}}class Y{static encode(t){let i=G.encode(t.numRestrictions,z.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach((e=>{i+=G.encode(e.purposeId,z.purposeId),i+=G.encode(e.restrictionType,z.restrictionType);const s=t.getVendors(e),n=s.length;let r=0,o=0,a="";for(let i=0;i<n;i++){const e=s[i];0===o&&(r++,o=e);const h=s[n-1],c=t.gvl.vendorIds,d=t=>{for(;++t<=h&&!c.has(t););return t};if(i===n-1||s[i+1]>d(e)){const t=!(e===o);a+=W.encode(t),a+=G.encode(o,z.vendorId),t&&(a+=G.encode(e,z.vendorId)),o=0}}i+=G.encode(r,z.numEntries),i+=a})),i}static decode(t){let i=0;const e=new U,s=G.decode(t.substr(i,z.numRestrictions),z.numRestrictions);i+=z.numRestrictions;for(let n=0;n<s;n++){const s=G.decode(t.substr(i,z.purposeId),z.purposeId);i+=z.purposeId;const n=G.decode(t.substr(i,z.restrictionType),z.restrictionType);i+=z.restrictionType;const r=new V(s,n),o=G.decode(t.substr(i,z.numEntries),z.numEntries);i+=z.numEntries;for(let s=0;s<o;s++){const s=W.decode(t.substr(i,z.anyBoolean));i+=z.anyBoolean;const n=G.decode(t.substr(i,z.vendorId),z.vendorId);if(i+=z.vendorId,s){const s=G.decode(t.substr(i,z.vendorId),z.vendorId);if(i+=z.vendorId,s<n)throw new B(`Invalid RangeEntry: endVendorId ${s} is less than ${n}`);for(let t=n;t<=s;t++)e.add(t,r)}else e.add(n,r)}}return e.bitLength=i,e}}!function(t){t[t.FIELD=0]="FIELD",t[t.RANGE=1]="RANGE"}(M||(M={}));class K{static encode(t){const i=[];let e,s=[],n=G.encode(t.maxId,z.maxId),r="";const o=z.maxId+z.encodingType,a=o+t.maxId,h=2*z.vendorId+z.singleOrRange+z.numEntries;let c=o+z.numEntries;return t.forEach(((n,o)=>{if(r+=W.encode(n),e=t.maxId>h&&c<a,e&&n){t.has(o+1)?0===s.length&&(s.push(o),c+=z.singleOrRange,c+=z.vendorId):(s.push(o),c+=z.vendorId,i.push(s),s=[])}})),e?(n+=String(M.RANGE),n+=this.buildRangeEncoding(i)):(n+=String(M.FIELD),n+=r),n}static decode(t,i){let e,s=0;const n=G.decode(t.substr(s,z.maxId),z.maxId);s+=z.maxId;const r=G.decode(t.charAt(s),z.encodingType);if(s+=z.encodingType,r===M.RANGE){if(e=new H,1===i){if("1"===t.substr(s,1))throw new B("Unable to decode default consent=1");s++}const n=G.decode(t.substr(s,z.numEntries),z.numEntries);s+=z.numEntries;for(let i=0;i<n;i++){const i=W.decode(t.charAt(s));s+=z.singleOrRange;const n=G.decode(t.substr(s,z.vendorId),z.vendorId);if(s+=z.vendorId,i){const i=G.decode(t.substr(s,z.vendorId),z.vendorId);s+=z.vendorId;for(let t=n;t<=i;t++)e.set(t)}else e.set(n)}}else{const i=t.substr(s,n);s+=n,e=Q.decode(i,n)}return e.bitLength=s,e}static buildRangeEncoding(t){const i=t.length;let e=G.encode(i,z.numEntries);return t.forEach((t=>{const i=1===t.length;e+=W.encode(!i),e+=G.encode(t[0],z.vendorId),i||(e+=G.encode(t[1],z.vendorId))})),e}}function Z(){return{[N.version]:G,[N.created]:X,[N.lastUpdated]:X,[N.cmpId]:G,[N.cmpVersion]:G,[N.consentScreen]:G,[N.consentLanguage]:J,[N.vendorListVersion]:G,[N.policyVersion]:G,[N.isServiceSpecific]:W,[N.useNonStandardStacks]:W,[N.specialFeatureOptins]:Q,[N.purposeConsents]:Q,[N.purposeLegitimateInterests]:Q,[N.purposeOneTreatment]:W,[N.publisherCountryCode]:J,[N.vendorConsents]:K,[N.vendorLegitimateInterests]:K,[N.publisherRestrictions]:Y,segmentType:G,[N.vendorsDisclosed]:K,[N.vendorsAllowed]:K,[N.publisherConsents]:Q,[N.publisherLegitimateInterests]:Q,[N.numCustomPurposes]:G,[N.publisherCustomConsents]:Q,[N.publisherCustomLegitimateInterests]:Q}}class tt{1={[E.CORE]:[N.version,N.created,N.lastUpdated,N.cmpId,N.cmpVersion,N.consentScreen,N.consentLanguage,N.vendorListVersion,N.purposeConsents,N.vendorConsents]};2={[E.CORE]:[N.version,N.created,N.lastUpdated,N.cmpId,N.cmpVersion,N.consentScreen,N.consentLanguage,N.vendorListVersion,N.policyVersion,N.isServiceSpecific,N.useNonStandardStacks,N.specialFeatureOptins,N.purposeConsents,N.purposeLegitimateInterests,N.purposeOneTreatment,N.publisherCountryCode,N.vendorConsents,N.vendorLegitimateInterests,N.publisherRestrictions],[E.PUBLISHER_TC]:[N.publisherConsents,N.publisherLegitimateInterests,N.numCustomPurposes,N.publisherCustomConsents,N.publisherCustomLegitimateInterests],[E.VENDORS_ALLOWED]:[N.vendorsAllowed],[E.VENDORS_DISCLOSED]:[N.vendorsDisclosed]}}class it{1=[E.CORE];2=[E.CORE];constructor(t,i){if(2===t.version)if(t.isServiceSpecific)this[2].push(E.PUBLISHER_TC);else{const e=!(!i||!i.isForVendors);e&&!0!==t[N.supportOOB]||this[2].push(E.VENDORS_DISCLOSED),e&&(t[N.supportOOB]&&t[N.vendorsAllowed].size>0&&this[2].push(E.VENDORS_ALLOWED),this[2].push(E.PUBLISHER_TC))}}}class et{static fieldSequence=new tt;static encode(t,i){let e;try{e=this.fieldSequence[String(t.version)][i]}catch(e){throw new R(`Unable to encode version: ${t.version}, segment: ${i}`)}let s="";i!==E.CORE&&(s=G.encode(q.KEY_TO_ID[i],z.segmentType));const n=Z();return e.forEach((e=>{const r=t[e],o=n[e];let a=z[e];void 0===a&&this.isPublisherCustom(e)&&(a=Number(t[N.numCustomPurposes]));try{s+=o.encode(r,a)}catch(t){throw new R(`Error encoding ${i}->${e}: ${t.message}`)}})),O.encode(s)}static decode(t,i,e){const s=O.decode(t);let n=0;e===E.CORE&&(i.version=G.decode(s.substr(n,z[N.version]),z[N.version])),e!==E.CORE&&(n+=z.segmentType);const r=this.fieldSequence[String(i.version)][e],o=Z();return r.forEach((t=>{const e=o[t];let r=z[t];if(void 0===r&&this.isPublisherCustom(t)&&(r=Number(i[N.numCustomPurposes])),0!==r){const o=s.substr(n,r);if(i[t]=e===K?e.decode(o,i.version):e.decode(o,r),Number.isInteger(r))n+=r;else{if(!Number.isInteger(i[t].bitLength))throw new B(t);n+=i[t].bitLength}}})),i}static isPublisherCustom(t){return 0===t.indexOf("publisherCustom")}}class st{static processor=[t=>t,(t,i)=>{t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);const e=new Map;return e.set("legIntPurposes",t.vendorLegitimateInterests),e.set("purposes",t.vendorConsents),e.forEach(((e,s)=>{e.forEach(((n,r)=>{if(n){const n=i.vendors[r];if(!n||n.deletedDate)e.unset(r);else if(0===n[s].length)if("legIntPurposes"===s&&0===n.purposes.length&&0===n.legIntPurposes.length&&n.specialPurposes.length>0);else if(t.isServiceSpecific)if(0===n.flexiblePurposes.length)e.unset(r);else{const i=t.publisherRestrictions.getRestrictions(r);let n=!1;for(let t=0,e=i.length;t<e&&!n;t++)n=i[t].restrictionType===C.REQUIRE_CONSENT&&"purposes"===s||i[t].restrictionType===C.REQUIRE_LI&&"legIntPurposes"===s;n||e.unset(r)}else e.unset(r)}}))})),t.vendorsDisclosed.set(i.vendors),t}];static process(t,i){const e=t.gvl;if(!e)throw new R("Unable to encode TCModel without a GVL");if(!e.isReady)throw new R("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=e.language.toUpperCase(),i?.version>0&&i?.version<=this.processor.length?t.version=i.version:t.version=this.processor.length;const s=t.version-1;if(!this.processor[s])throw new R(`Invalid version: ${t.version}`);return this.processor[s](t,e)}}class nt extends Error{constructor(t){super(t),this.name="GVLError"}}class rt{static absCall(t,i,e,s){return new Promise(((n,r)=>{const o=new XMLHttpRequest;o.withCredentials=e,o.addEventListener("load",(()=>{if(o.readyState==XMLHttpRequest.DONE)if(o.status>=200&&o.status<300){let t=o.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error(`HTTP Status: ${o.status} response type: ${o.responseType}`))})),o.addEventListener("error",(()=>{r(new Error("error"))})),o.addEventListener("abort",(()=>{r(new Error("aborted"))})),null===i?o.open("GET",t,!0):o.open("POST",t,!0),o.responseType="json",o.timeout=s,o.ontimeout=()=>{r(new Error("Timeout "+s+"ms "+t))},o.send(i)}))}static post(t,i,e=!1,s=0){return this.absCall(t,JSON.stringify(i),e,s)}static fetch(t,i=!1,e=0){return this.absCall(t,null,i,e)}}class ot extends F{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new D;static baseUrl_;static set baseUrl(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new nt("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;lang_;isLatest=!1;constructor(t){super();let i=ot.baseUrl;if(this.lang_=ot.DEFAULT_LANGUAGE,this.isVendorList(t))this.populate(t),this.readyPromise=Promise.resolve();else{if(!i)throw new nt("must specify GVL.baseUrl before loading GVL json");if(t>0){const e=t;ot.CACHE.has(e)?(this.populate(ot.CACHE.get(e)),this.readyPromise=Promise.resolve()):(i+=ot.versionedFilename.replace("[VERSION]",String(e)),this.readyPromise=this.fetchJson(i))}else ot.CACHE.has(ot.LATEST_CACHE_KEY)?(this.populate(ot.CACHE.get(ot.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(i+ot.latestFilename))}}static emptyLanguageCache(t){let i=!1;return void 0===t&&ot.LANGUAGE_CACHE.size>0?(ot.LANGUAGE_CACHE=new Map,i=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(ot.LANGUAGE_CACHE.delete(t.toUpperCase()),i=!0),i}static emptyCache(t){let i=!1;return Number.isInteger(t)&&t>=0?(ot.CACHE.delete(t),i=!0):void 0===t&&(ot.CACHE=new Map,i=!0),i}cacheLanguage(){ot.LANGUAGE_CACHE.has(this.lang_)||ot.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(t){try{this.populate(await rt.fetch(t))}catch(t){throw new nt(t.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(t){const i=t.toUpperCase();if(!ot.consentLanguages.has(i))throw new nt(`unsupported language ${t}`);if(i!==this.lang_)if(this.lang_=i,ot.LANGUAGE_CACHE.has(i)){const t=ot.LANGUAGE_CACHE.get(i);for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}else{const i=ot.baseUrl+ot.languageFilename.replace("[LANG]",t);try{await this.fetchJson(i),this.cacheLanguage()}catch(t){throw new nt("unable to load language: "+t.message)}}}get language(){return this.lang_}isVendorList(t){return void 0!==t&&void 0!==t.vendors}populate(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&ot.CACHE.set(ot.LATEST_CACHE_KEY,this.getJson()),ot.CACHE.has(this.vendorListVersion)||ot.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(t){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((t=>{this.bySpecialPurposeVendorMap[t]=new Set})),Object.keys(this.features).forEach((t=>{this.byFeatureVendorMap[t]=new Set})),Object.keys(this.specialFeatures).forEach((t=>{this.bySpecialFeatureVendorMap[t]=new Set})),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map((t=>+t))),this.vendorIds=new Set(t),this.vendors_=t.reduce(((t,i)=>{const e=this.vendors_[String(i)];return e&&void 0===e.deletedDate&&(e.purposes.forEach((t=>{this.byPurposeVendorMap[String(t)].consent.add(i)})),e.specialPurposes.forEach((t=>{this.bySpecialPurposeVendorMap[String(t)].add(i)})),e.legIntPurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].legInt.add(i)})),e.flexiblePurposes&&e.flexiblePurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].flexible.add(i)})),e.features.forEach((t=>{this.byFeatureVendorMap[String(t)].add(i)})),e.specialFeatures.forEach((t=>{this.bySpecialFeatureVendorMap[String(t)].add(i)})),t[i]=e),t}),{})}getFilteredVendors(t,i,e,s){const n=t.charAt(0).toUpperCase()+t.slice(1);let r;const o={};return r="purpose"===t&&e?this["by"+n+"VendorMap"][String(i)][e]:this["by"+(s?"Special":"")+n+"VendorMap"][String(i)],r.forEach((t=>{o[String(t)]=this.vendors[String(t)]})),o}getVendorsWithConsentPurpose(t){return this.getFilteredVendors("purpose",t,"consent")}getVendorsWithLegIntPurpose(t){return this.getFilteredVendors("purpose",t,"legInt")}getVendorsWithFlexiblePurpose(t){return this.getFilteredVendors("purpose",t,"flexible")}getVendorsWithSpecialPurpose(t){return this.getFilteredVendors("purpose",t,void 0,!0)}getVendorsWithFeature(t){return this.getFilteredVendors("feature",t)}getVendorsWithSpecialFeature(t){return this.getFilteredVendors("feature",t,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(t){this.mapVendors(t)}get isReady(){return this.isReady_}clone(){const t=new ot(this.getJson());return this.lang_!==ot.DEFAULT_LANGUAGE&&t.changeLanguage(this.lang_),t}static isInstanceOf(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo}}class at extends F{static consentLanguages=ot.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardStacks_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=2;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new H;purposeConsents=new H;purposeLegitimateInterests=new H;publisherConsents=new H;publisherLegitimateInterests=new H;publisherCustomConsents=new H;publisherCustomLegitimateInterests=new H;customPurposes;vendorConsents=new H;vendorLegitimateInterests=new H;vendorsDisclosed=new H;vendorsAllowed=new H;publisherRestrictions=new U;constructor(t){super(),t&&(this.gvl=t),this.updated()}set gvl(t){ot.isInstanceOf(t)||(t=new ot(t)),this.gvl_=t,this.publisherRestrictions.gvl=t}get gvl(){return this.gvl_}set cmpId(t){if(t=Number(t),!(Number.isInteger(t)&&t>1))throw new $("cmpId",t);this.cmpId_=t}get cmpId(){return this.cmpId_}set cmpVersion(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new $("cmpVersion",t);this.cmpVersion_=t}get cmpVersion(){return this.cmpVersion_}set consentScreen(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new $("consentScreen",t);this.consentScreen_=t}get consentScreen(){return this.consentScreen_}set consentLanguage(t){this.consentLanguage_=t}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(t){if(!/^([A-z]){2}$/.test(t))throw new $("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(t){if((t=Number(t)>>0)<0)throw new $("vendorListVersion",t);this.vendorListVersion_=t}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new $("policyVersion",t)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(t){this.version_=parseInt(t,10)}get version(){return this.version_}set isServiceSpecific(t){this.isServiceSpecific_=t}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardStacks(t){this.useNonStandardStacks_=t}get useNonStandardStacks(){return this.useNonStandardStacks_}set supportOOB(t){this.supportOOB_=t}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(t){this.purposeOneTreatment_=t}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const i=Object.keys(this.customPurposes).sort(((t,i)=>Number(t)-Number(i)));t=parseInt(i.pop(),10)}return t}set numCustomPurposes(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new $("numCustomPurposes",t)}updated(){const t=new Date,i=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));this.created=i,this.lastUpdated=i}}class ht{static encode(t,i){let e,s="";return t=st.process(t,i),e=Array.isArray(i?.segments)?i.segments:new it(t,i)[""+t.version],e.forEach(((i,n)=>{let r="";n<e.length-1&&(r="."),s+=et.encode(t,i)+r})),s}static decode(t,i){const e=t.split("."),s=e.length;i||(i=new at);for(let t=0;t<s;t++){const s=e[t],n=O.decode(s.charAt(0)).substr(0,z.segmentType),r=q.ID_TO_KEY[G.decode(n,z.segmentType).toString()];et.decode(s,i,r)}return i}}var ct=e(3020);const dt=(t,i)=>{const e=x[i].windowPropertyName;return(0,ct.uq)(t,e)},lt=(t,i)=>{const e=x[i].framePropertyName;return(0,ct.wl)(t,e)},ut=(t,i)=>null!==dt(t,i)||null!==lt(t,i),pt=t=>{const i=ht.decode(t),e={},s={};return i.vendorConsents.forEach(((t,i)=>e[i]=t)),i.purposeConsents.forEach(((t,i)=>s[i]=t)),{vendorConsents:e,purposeConsents:s,tcString:t}},ft=t=>{const i=L.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");i.allowedVendorIds.forEach((t=>{n[t-1]="1"}));return(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(n.join(""))},mt=(t,i,e)=>{let s;try{s=i(t)}catch(t){}if((0,_.as)(s))return s;try{s=e(t)}catch(t){}return s},gt=t=>(0,_.QM)(null==t?void 0:t.tcString),vt=t=>(0,_.QM)(null==t?void 0:t.consentString),yt=({cmpEncodedString:t,tcfEncodedString:i})=>{if(!(0,_.QM)(t)&&!(0,_.QM)(i))return null;let e=null;return(0,_.QM)(i)&&(e=mt(i,pt,ft)),(0,_.as)(e)?e:(0,_.QM)(t)?(e=mt(t,ft,pt),(0,_.as)(e)?e:((0,y.nF)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:i}),level:y.D_.CRITICAL}),null)):((0,y.nF)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:i}),level:y.D_.CRITICAL}),null)};class bt{constructor(t,i){this.NM=t,this.VM=i,this.apiType=S.TcfApi,this.jM=t=>new Promise(((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.UM&&s.UM.callId===this.$M){const t=s.UM.returnValue.tcString;this.MM(t).then((()=>i(this.$M))).catch((t=>e()))}}catch(t){e()}}))}isApiOnPage(){return null!==this.NM||null!==this.VM}bindToApi(){return null!==this.NM?new Promise(((t,i)=>{this.RM(this.NM).then((()=>t())).catch((t=>i(t)))})):null!==this.VM?this.OM(this.VM):Promise.reject()}isConsentForVendor(t){var i,e;return!!(null===(i=this.qM)||void 0===i?void 0:i.vendorConsents)&&!!(null===(e=this.qM)||void 0===e?void 0:e.vendorConsents[t])}getConsentPayload(){var t;const i=null===(t=this.qM)||void 0===t?void 0:t.tcString;return(0,_.QM)(i)?i:null}setInAppConsentData(t){this.qM=Object.assign(Object.assign({},this.qM),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var i;return!!(null===(i=this.qM)||void 0===i?void 0:i.purposeConsents)&&t.every((t=>!!this.qM.purposeConsents[t]))}OM(t){this.$M=(0,v.qs)();const i={};return new Promise((e=>{const s=t=>{this.jM(t).then((t=>{i[t]=!0,i[this.$M]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=x[S.TcfApi].getVendorConsentDataMethodName;t.postMessage({HM:{command:n,parameter:null,callId:this.$M}},"*")}))}RM(t){const i=x[S.TcfApi].windowPropertyName,e=x[S.TcfApi].consentUpdateMethodName,s=x[S.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise((t=>{this.NM[i](e,2,((e,n)=>{if(n&&("useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus)){const n=e.tcString;this.MM(n).then((()=>t())),this.NM[i](s,2,(()=>{}),e.listenerId)}}))})):Promise.reject()}MM(t){const i=yt({tcfEncodedString:t});return gt(i)?(this.qM=i,Promise.resolve()):Promise.reject()}}class It{constructor(t,i,e={}){var s,n;this.zM=t,this.Th=i,this.GM=null;const r=yt({cmpEncodedString:null===(s=e.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=e.tcf)||void 0===n?void 0:n.tcString}),o=this.WM(r);null!==o?(this.XM(o),(gt(r)||vt(r))&&this.JM.setInAppConsentData(r)):(0,y.nF)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:e}),level:y.D_.CRITICAL})}setPageUrl(t){this.Sf=t}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType,r=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);let o;if(!(0,_.QM)(r))return void(0,y.nF)({level:y.D_.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.Sf});if(n===s)return void(0,y.nF)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:y.D_.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.Sf}`},{throttle:2,shouldSendMaxLog:!1});const a=yt({tcfEncodedString:r,cmpEncodedString:r});gt(a)?o=new bt(null,null):vt(a)&&(o=new T(null,null)),o?o?(this.JM=o,this.JM.setInAppConsentData(a)):(0,y.nF)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:y.D_.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Sf}`},{shouldSendMaxLog:!1,throttle:2}):(0,y.nF)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:y.D_.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Sf}`},{throttle:2,shouldSendMaxLog:!1})}isConsentRequired(){return this.zM}isConsent(t,i=[]){if(this.isConsentRequired()){return this.JM.isConsentForVendor(t)&&this.JM.isConsentForPurposes(i)}return!0}isConsentConnatix(){return this.isConsent(u.Connatix,A.Z)}isConsentForPersonalisedAds(){return this.getConsentApiType()!==S.CmpApi&&this.JM.isConsentForPurposes(A.Z)}getConsentDataPayload(){return this.JM.getConsentPayload()}bindToConsentApi(){return this.JM.isApiOnPage()?this.JM.bindToApi():new Promise((t=>{this.GM=setInterval((()=>{const{apiWindow:i,apiLocatorFrame:e}=this.YM(this.JM.apiType);(i||e)&&(clearInterval(this.GM),this.XM(this.JM.apiType),t(this.JM.bindToApi()))}),1e3)}))}isConsentApiOnPage(){return this.JM.isApiOnPage()}hasIVTConsent(){return this.JM.hasIvtConsent()}getConsentApiType(){return this.JM.apiType}destroy(){clearInterval(this.GM)}XM(t){const{apiWindow:i,apiLocatorFrame:e}=this.YM(t);t===S.TcfApi?this.JM=new bt(i,e):this.JM=new T(i,e)}YM(t){return{apiWindow:dt(this.Th,t),apiLocatorFrame:lt(this.Th,t)}}WM(t){if(gt(t))return S.TcfApi;if(vt(t))return S.CmpApi;if(ut(this.Th,S.TcfApi))return S.TcfApi;return ut(this.Th,S.CmpApi)?S.CmpApi:S.TcfApi}}var Pt,wt=e(307),St=e(6578);!function(t){t.USER_ID="cnx_userId"}(Pt||(Pt={}));class At{constructor(t,i){this.sM=t,this.Th=i,this.KM={[Pt.USER_ID]:30},this.ZM=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.tL=!1}iL({name:t,value:i}){t===Pt.USER_ID&&(this.sM.userId=this.eL(i))}nL(t){let i="";const e=this.KM[t.name];if(e){i=`; expires=${new Date((0,b.XF)(e)).toUTCString()}`}this.Th.document.cookie=`${t.name}=${t.value}${i}; path=/`}oL(t,i){if(!(0,g.BZ)(t))return;const e={cookieList:t,secureMode:i?r.ProtoCookieSecureModeEnum.Unsecure:r.ProtoCookieSecureModeEnum.Auto,browserInfo:this.hL};return St.n.sendProtoRequest({requestData:e,protoRequest:r.ProtoCookieSyncRequest,endpoint:d.n.endPoints.api.cookie,hasCredentials:!0,queryParams:{[wt.Fk]:o.g.version,[wt.cc]:d.n.tier},shouldLogErrors:!1}).catch((t=>(0,y.nF)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:y.D_.CRITICAL})))}eL(t){return t.split("_")[0]}getFirstPartyCookie(t){try{const i=t+"=",e=decodeURIComponent(this.Th.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(t.includes(i))return this.eL(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.sM.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:(0,b.XF)(this.KM[t])};t===Pt.USER_ID&&(i.value=this.sM.userId),(0,_.QM)(i.value)&&this.nL(i)}syncThirdPartyCookieList(t){const i=[Pt.USER_ID],e=[];i.forEach((t=>{t===Pt.USER_ID&&(0,_.QM)(this.sM.userId)&&e.push({name:Pt.USER_ID,value:this.sM.userId,timestamp:(0,b.XF)(this.KM[Pt.USER_ID])})})),this.oL(e,t)}setBrowserInfo(t,i){this.hL=t,this.tL=this.ZM.includes(t.browserType),this.tL&&i&&this.syncThirdPartyCookieList(this.tL)}setUserId(t){t&&this.iL({name:Pt.USER_ID,value:t})}get unsecuredCookieSync(){return this.tL}}class xt{constructor(t){this.aL=t,this.dL=!0,this.lL="",this.uL=!1,this.pL=[]}static getInstance(t){const i="cnx_player_usr_storage",e=(0,v.pE)(t).topFrame;return e[i]||(e[i]=new xt(e)),e[i]}get isCcpaApplicable(){return this.dL}set isCcpaApplicable(t){this.dL=t}get usPrivacyString(){return this.lL}set usPrivacyString(t){this.lL=t}get userId(){if((0,_.QM)(this.fL))return this.fL.split("_")[0]}set userId(t){this.fL=t}getScope(){return this.aL}registerPlsCall(t){return this.uL?(this.pL.push(t),()=>{}):this.userId?(t(),()=>{}):(this.uL=!0,t(),()=>{this.uL=!1,this.pL.forEach((t=>t())),this.pL=[]})}}var _t,Tt,Ct=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};!function(t){t.USER_INFO_RECEIVED="userInfoReceived",t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.NON_BOT_DETECTED="nonBotDetected",t.USER_SETUP_COMPLETE="userSetupComplete",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(_t||(_t={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived"}(Tt||(Tt={}));class kt{constructor(t,i,e,n={}){this.vL=i,this.QS=e,this._appSettings=n,this.gdprConsentMode=r.ProtoGdprConsentModeEnum.Unknown,this.mL=new s.x,this.gL=!1,this.yL={},this.bL="{{isEu}}",this.IL=!1,this.PL=!1,this.wL=0,this.AL=!1,this.SL=!1,this._L=()=>{!this.TL.isConsentRequired()||this.vL?this.resolveEvent(_t.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.TL.isConsentApiOnPage()||this.QS?r.ProtoGdprConsentModeEnum.NoConsent:r.ProtoGdprConsentModeEnum.NoCmp,this.TL.bindToConsentApi().then((()=>{this.gdprConsentMode=r.ProtoGdprConsentModeEnum.NoConsent,this.isConsentConnatix()||(this.gdprConsentMode=r.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(_t.CONSENT_DATA_UPDATE)})).catch((t=>{})))},this.xL=()=>{a.$.getEnvelope(this.EA,this.TL)},this.kL=()=>{this.isConsentConnatix()&&(this.onEvent([_t.USER_INFO_RECEIVED,_t.NON_BOT_DETECTED]).then((()=>{this.IL&&(this.CL.syncThirdPartyCookieList(),this.CL.unsecuredCookieSync&&this.CL.syncThirdPartyCookieList(this.CL.unsecuredCookieSync),this.CL.syncFirstPartyCookie(Pt.USER_ID))})),this.onEvent([Tt.SYNC_URLS_RECEIVED,_t.CONSENT_DATA_UPDATE,_t.CCPA_INFO_RECEIVED,_t.NON_BOT_DETECTED,_t.USER_SETUP_COMPLETE]).then((()=>{if(this.isConsentConnatix()&&this.EL.isSellUserAllowed())try{if((0,_.$K)(this.LL)&&(0,_.$K)(this.BL)){const t=this.TL.isConsentRequired(),i=this.TL.getConsentDataPayload(),e=t&&(0,_.QM)(i)?i:null,s=this.EL.isCcpaApplicable(),n=this.EL.getUsPrivacyString(),r=s&&(0,_.QM)(n)?n:null;this.LL.playerSync(this.BL,{isGdprApplicable:t,gdprConsent:e,usPrivacy:r})}}catch(t){(0,y.nF)({level:y.D_.WARN,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}})))};try{this.EA=t,this.sM=xt.getInstance(t),this.vL||(this.CL=new At(this.sM,t));const{cmp:i,tcf:e}=this._appSettings;this.TL=new It(!!this.bL,t,{cmp:i,tcf:e}),this.EL=new I(this.sM,this._appSettings.usPrivacyString),this.zT()}catch(t){(0,y.nF)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:y.D_.CRITICAL})}}get coreSyncResolved(){return this.mL.asObservable()}get userIdentificationPending(){return this.PL}get coreSyncTimestamp(){return this.wL}get lotamePanorama(){return this.RL}set lotamePanorama(t){this.RL=t}get userAudienceIdList(){return this.OL}set userAudienceIdList(t){this.OL=t}get isCoreSyncResolved(){return this.AL}set isIdentityEnhanced(t){this.SL=t}get isIdentityEnhanced(){return this.SL}get identityEnvelope(){return a.$.getValidEnvelope()}fetchUserIdentification(t,i,e){return Ct(this,void 0,void 0,(function*(){this.PL=!0;try{const s=(yield c.c.getInstance().load(i)).UserSync,n={implementationType:t,isInApp:this.vL,playerBundleNumber:o.g.version,tier:d.n.tier,ovpDomain:i};return this.LL=new s(this.EA,n),this.BL=yield this.LL.fetchUserSyncData(e,this._appSettings.deviceID),this.AL=!0,this.mL.next(this.BL),this.BL}catch(t){throw t}finally{this.PL=!1,this.wL=Date.now()}}))}resolveBotEvent(t){t||this.resolveEvent(_t.NON_BOT_DETECTED)}resolveUserSetupEvent(){this.resolveEvent(_t.USER_SETUP_COMPLETE)}setupLotameService(t){var i;return Ct(this,void 0,void 0,(function*(){if(!(0,_.$K)(this.LL))return;const{outcome:e}=yield null===(i=this.LL)||void 0===i?void 0:i.setupLotameService(t);e===n.M5.FailedInit&&(0,y.nF)({message:"LotameService_missing_lotamePanoramaId",level:y.D_.INFO},{pacing:1})}))}zT(){this._L(),this.onEvent([_t.CONSENT_DATA_UPDATE]).then((()=>{this.xL(),setTimeout((()=>{try{if(this.vL)return;this.kL()}catch(t){(0,y.nF)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:y.D_.CRITICAL})}}),0)}))}DL(t){return void 0===this.yL[t]&&(this.yL[t]=new h.C,this.yL[t].promise.catch((()=>this.yL[t].reject()))),this.yL[t]}get syncedPanoIndivId(){return this.NL}resolveEvent(t,i){this.DL(t).resolve(i)}setAmpUserConsent(t){this.TL.setAmpUserConsent(t),this.resolveEvent(_t.CONSENT_DATA_UPDATE)}setPageUrl(t){this.TL&&this.TL.setPageUrl(t)}onEvent(t){const i=t.map((t=>this.DL(t).promise));return Promise.all(i)}isConsent(t,i){return this.TL.isConsent(t,i)}isConsentConnatix(){return this.TL.isConsentConnatix()}ccpaInfoLogging(t){this.EL.ccpaInfoLogging(t)}getConsentPayload(){return this.TL.getConsentDataPayload()}isConsentRequired(){return this.TL.isConsentRequired()}isPersonalisedAdsAllowed(){return this.isConsentRequired()?this.TL.isConsentForPersonalisedAds():!this.isCcpaApplicable()||this.EL.isSellUserAllowed()}isConsentLotame(){return this.isConsentRequired()?this.TL.isConsent(w.VENDOR_ID,w.REQUIRED_PURPOSES):!this.isCcpaApplicable()||this.EL.isSellUserAllowed()}setThirdPartySyncUrls(t){this.vL||this.gL||(this.gL=!0,this.resolveEvent(Tt.SYNC_URLS_RECEIVED))}setGeoLocation(t){this.EL.setGeoLocation(t),this.EL.fetchUsPrivacyString().then((()=>{this.resolveEvent(_t.CCPA_INFO_RECEIVED)})).catch((()=>{this.resolveEvent(_t.CCPA_INFO_RECEIVED)}))}getGeoLocation(){return this.EL.getGeoLocation()}getUserId(){if(this.isConsentConnatix())return this.vL?this.sM.userId:this.CL.getUserId()}VL(){return this.vL?this.sM.userId:this.CL.getUserId()}setUserId(t,i=!1){this.isIdentityEnhanced=i,this.vL?this.FL(t):this.jL(t)}FL(t){this.SL&&(this.sM.userId=t,this.resolveEvent(_t.USER_INFO_RECEIVED))}jL(t){this.CL.setUserId(t),this.resolveEvent(_t.USER_INFO_RECEIVED),this.resolveEvent(_t.USER_INFO_RECEIVED),this.isConsentConnatix()&&this.CL.syncFirstPartyCookie(Pt.USER_ID)}isGDPR(){return!!this.bL}getUsPrivacyString(){return this.EL.getUsPrivacyString()}isCcpaApplicable(){return this.EL.isCcpaApplicable()}isSellUserAllowed(){return this.EL.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}getForcedIDFV(){return this._appSettings.idfv}UL(){return this._appSettings.deviceID}getTrackableUser(){return this.getUserId()||this.getDeviceId()}getForcedTrackableUser(){return this.VL()||this.UL()}registerPlsCall(t){return this.isConsentConnatix()||(this.IL=!0),this.sM.registerPlsCall(t)}setBrowserInfo(t){this.CL&&this.CL.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this.TL.getConsentApiType()}destroy(){this.TL.destroy()}}},9154:(t,i,e)=>{"use strict";e.d(i,{H:()=>n});var s=e(289);const n={[s.ProtoAdSlotsEnum.PreRoll]:s.ProtoAdBreakTypeEnum.PreRoll,[s.ProtoAdSlotsEnum.MidRoll]:s.ProtoAdBreakTypeEnum.MidRoll,[s.ProtoAdSlotsEnum.PostRoll]:s.ProtoAdBreakTypeEnum.PostRoll}},5650:(t,i,e)=>{"use strict";e.d(i,{BZ:()=>d,Gg:()=>u,Sz:()=>h,V7:()=>p,d3:()=>r,ee:()=>v,fn:()=>l,gX:()=>m,qo:()=>o,qy:()=>a,sj:()=>g,tN:()=>f,ti:()=>c});var s=e(7531),n=e(4798);function r(t,i){return i.indexOf(t)>-1}function o(t){return Array.isArray(t)?t:[t]}function a(t,i){const e=[],s=new Map;return i.forEach((i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))})),e}function h(t){return[].slice.call(t)}function c(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function d(t){return t&&Array.isArray(t)&&t.length>0}function l(t){return d(t)&&t.every((t=>(0,n.hj)(t)))}function u(t){let i="[";for(let e=0;e<t.length;e++)i+=(0,s.HD)(t[e])+(e===t.length-1?"":",");return i+="]",i}function p(t,i){return t.filter((t=>!i.includes(t)))}function f(t,i){const e=new Set(t),s=new Set(i);return[...e].filter((t=>s.has(t)))}function m(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function g(t,i){const e=t.indexOf(i);-1!==e&&t.splice(e,1)}function v(t){const i=[];return t.forEach((t=>i.push(t))),i}},5356:(t,i,e)=>{"use strict";e.d(i,{AK:()=>u,QX:()=>h,S:()=>p,Xj:()=>d,gw:()=>c,mb:()=>l});var s=e(289),n=e(7626),r=e(8983),o=e(3020),a=(e(2728),e(4798));function h(t,i){const e=t.length-1;return{currentIndex:i,nextIndex:i===e?0:i+1,prevIndex:0===i?e:i-1,firstIndex:0,lastIndex:e}}function c(t){let i=s.ProtoAdBreakTypeEnum.None;switch(t){case s.ProtoAdSlotsEnum.PreRoll:i=s.ProtoAdBreakTypeEnum.PreRoll;break;case s.ProtoAdSlotsEnum.MidRoll:i=s.ProtoAdBreakTypeEnum.MidRoll;break;case s.ProtoAdSlotsEnum.PostRoll:i=s.ProtoAdBreakTypeEnum.PostRoll}return i}function d(t,i){return!(i.skippability===s.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan&&t<i.skipMin)}function l(t){return(0,o.pv)(t,r.s6.Ad)||(0,o.pv)(t,n.E.InAd)}function u(t,i){return(0,a.r)(i)&&[s.ProtoAdsourceTypeEnum.Vpaid,s.ProtoAdsourceTypeEnum.Ima].includes(t)}function p(t,i){if(t<0&&i<0)return 0;const e=Math.min(t,i);return e<=0?Math.max(t,i):e}},5715:(t,i,e)=>{"use strict";e.d(i,{R:()=>o});var s=e(4798);function n(t){return(0,s.as)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function r(t){return n(t)?o({},t):t}function o(t,i){return function(t,i){const e={};return n(t)&&Object.keys(t).forEach((i=>{e[i]=r(t[i])})),Object.keys(i).forEach((s=>{n(i[s])&&t[s]?e[s]=o(t[s],i[s]):e[s]=r(i[s])})),e}(t,i)}},3020:(t,i,e)=>{"use strict";e.d(i,{BE:()=>z,Dx:()=>T,Fs:()=>C,G$:()=>M,GF:()=>J,Ho:()=>p,IS:()=>q,IV:()=>w,Iy:()=>N,Ji:()=>Q,Kk:()=>at,LT:()=>j,L_:()=>x,ML:()=>I,MV:()=>u,NN:()=>lt,NS:()=>y,Nb:()=>nt,PM:()=>O,Q1:()=>L,S0:()=>R,SH:()=>Y,T7:()=>f,Tp:()=>B,U6:()=>X,UR:()=>ht,Vt:()=>H,Wb:()=>et,el:()=>ct,aQ:()=>m,bX:()=>g,bZ:()=>dt,cn:()=>P,dZ:()=>b,eA:()=>st,fj:()=>V,h_:()=>D,jG:()=>U,ju:()=>K,nw:()=>$,oG:()=>W,og:()=>A,pv:()=>S,rI:()=>_,sw:()=>rt,tp:()=>E,uC:()=>v,uc:()=>k,uh:()=>ot,uq:()=>tt,w6:()=>Z,wl:()=>it});var s=e(8576),n=e(8983),r=e(307),o=e(5650),a=e(9791),h=e(51),c=e(9607),d=e(4798);function l(t,i){t&&(t.style.display=i?"":"none")}function u(t){l(t,!1)}function p(t){l(t,!0)}function f(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function m(t,...i){i.forEach((i=>{t.style[i]=""}))}function g(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function v(t,i=document){g(i.getElementById(t))}function y(t,i,e,s,n){if(i)try{const r=e.document.createElement("link");return r.id=t.id,r.type="text/css",r.rel="stylesheet",r.href=t.src,(0,d.mf)(s)&&(r.onload=()=>{s()}),(0,d.mf)(n)&&(r.onerror=t=>{i.removeChild(r),(0,d.HD)(t)?n(`link_stylesheet_load_error_${t}`):n(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,r)}`)}),i.appendChild(r),r}catch(t){return null}}function b(t,i,e,s,n,r=!0,o){try{const a=e.document.createElement("script");if(a.src=t.src,a.async=!0,a.type="text/javascript",t.id&&(a.id=t.id),t.attributes)for(const i of t.attributes)a.setAttribute(i.name,i.value);return(0,d.mf)(s)&&(a.onload=()=>{s()}),a.onerror=e=>{i.removeChild(a),r&&(0,c.nF)({message:o,exception:"script_load_error",callStack:t.src,level:c.D_.INFO},{throttle:2,shouldSendMaxLog:!1}),(0,d.mf)(n)&&n()},i.appendChild(a),a}catch(i){return r&&(0,c.nF)({message:o,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:c.D_.CRITICAL},{throttle:2,shouldSendMaxLog:!1}),(0,d.mf)(n)&&n(),null}}function I(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function P(t,...i){t&&t.classList.add(...i)}function w(t,...i){t&&t.classList.remove(...i)}function S(t,i){return t&&t.classList.contains(i)}function A(t,i,e){return!!t&&t.classList.toggle(i,e)}function x(t,i,e,s=!1){t&&(t.classList.remove(i),t.classList.add(e),s&&B(t))}const _=(t,i)=>i.document.getElementById(t),T=(t,i,e)=>i.getComputedStyle(t,e),C=(t,i)=>i.document.getElementsByClassName(t);function k(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function E(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function M(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function L(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function R(t){return s.Ht.find((i=>{if(i.keys.fullscreenEnabled in t)return!0}))}function B(t){t.getBoundingClientRect()}function O(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function D(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function N(t){return!!t.closest(".cnx-el")}function F(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce(((t,e)=>t||i.querySelector(e)),null);if(e)return e}e=i}return null}(t,i);return e?T(e,j(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function $(t){const i=F(["h1","h2"],t,"font-family");return i||"inherit"}function V(t){const i=F(["p"],t,"font-family");return i||"inherit"}function j(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function U(t,i){t&&i&&(Array.isArray(t)?t.forEach((t=>i.appendChild(t))):i.appendChild(t))}function q(t,i,e){let s=!1;const n=(0,o.Sz)(i.children);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?H(n[i],...t):H(n[i],t);break}s||U(t,i)}function H(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function z(t,...i){for(let e=i.length;e--;)t.parentNode.insertBefore(i[e],t.nextSibling)}function W(t,i){return(0,o.Sz)(i.children).indexOf(t)}function G(t){const i=j(t);if(!i)return;const{display:e}=T(t,i);"none"===e&&(t.style.display="block")}function X(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(w(t,n.jG.FadeOutBase,n.jG.FadeOut),i(),t.removeEventListener("transitionend",e))};P(t,n.jG.FadeOutBase),G(t),B(t),t.addEventListener("transitionend",e),P(t,n.jG.FadeOut)}function Q(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(w(t,n.jG.FadeInBase,n.jG.FadeIn),i(),t.removeEventListener("transitionend",e))};P(t,n.jG.FadeInBase),G(t),B(t),t.addEventListener("transitionend",e),P(t,n.jG.FadeIn)}function J(t){const i=j(t);if(!i)return!0;const{display:e,opacity:s}=T(t,i);return"none"===e||"0"===s}function Y(t,i){return null===t.firstChild?t.appendChild(i):t.insertBefore(i,t.firstChild)}function K(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function Z(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function tt(t,i){const e=(0,a.pE)(t).topFrame;return e[i]?e:null}function it(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(!t.top||t.top===e)break;e=e.parent}}catch(t){}return s}function et(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function st(t){return(0,a.pE)(t).topFrame.location.protocol.includes("https")}function nt(t){if(!st(t))return;[window,t].forEach((t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}}))}function rt(t){return(0,a.pE)(t).topFrame.document.referrer}function ot(t,i){const e=(0,a.pE)(i).topFrame.location.hostname,s=(0,a.bx)(t);return s&&s.hostname===e}function at(t){t.removeAttribute("href"),t.removeAttribute("target"),t.removeAttribute("download"),t.removeAttribute("ping"),t.removeAttribute("rel"),t.removeAttribute("media"),t.removeAttribute("hreflang"),t.removeAttribute("type")}function ht(t){setTimeout((()=>{let i=t.currentTime+.01;i>t.duration&&(i=.01),t.currentTime=i}),0)}function ct(t,i){!function(t,i,e){const s=t.document.createElement("link");s.rel="preload",s.href=i,s.as=e,t.document.head.appendChild(s)}(i,t,"script")}function dt(t,i){if(!i||!lt(i))return(0,c.nF)({message:"Prerender_Elements_getgetCustomerId_no_currentScript",level:c.D_.CRITICAL}),null;const e=i.src;return(0,h.Ph)(r.ym,e)}function lt(t){return"SCRIPT"===t.tagName}},9791:(t,i,e)=>{"use strict";e.d(i,{Ae:()=>A,Hh:()=>p,Ld:()=>C,Of:()=>y,Qq:()=>S,Up:()=>I,Vm:()=>f,W$:()=>x,Xf:()=>b,YY:()=>E,Zv:()=>_,bx:()=>l,dz:()=>h,er:()=>c,j6:()=>k,lU:()=>d,ld:()=>v,oC:()=>P,ox:()=>T,pE:()=>u,qs:()=>a,rM:()=>w,sq:()=>m,we:()=>g});var s=e(5650),n=e(51),r=e(7531),o=e(4798);function a(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){const e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)}))}function h(){return a().replace(/-/g,"")}function c(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t.trim())}function d(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function l(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function u(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function p(t=[],i,e={}){t.forEach((t=>{if((0,o.HD)(t)){let a=t;(0,o.Xz)(e)&&(a=`${t}${(0,n.CK)(t)}${function(t,i){const e=[];return Object.keys(t).forEach((n=>{const a=i?`${i}[${n}]`:n,h=t[n];if((0,o.as)(h))e.push(`${encodeURIComponent(a)}=${(0,r.HD)(h)}`);else if(Array.isArray(h))e.push(`${encodeURIComponent(a)}=${(0,s.Gg)(h)}`);else if(null!=h){const t=encodeURIComponent(h),i=encodeURIComponent(a);t&&i&&e.push(`${i}=${t}`)}})),e.join("&")}(e)}`),(new i.Image).src=a}}))}function f(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(s+=t[n],i<s){e=n;break}return e}function m(t){const i=Math.min(Math.max(t,0),100);return!!f([100-i,i])}function g(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch((()=>{})),t=!i.paused,i.pause()}catch(t){}return t}function v(t,i=0,...e){return setTimeout((()=>{t.apply(this,e)}),i)}function y(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(n=n.parentElement,!n)return!1}return!1}function b(t,i){try{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);let s=parseInt(e[1],16),n=parseInt(e[2],16),r=parseInt(e[3],16);s/=255,n/=255,r/=255;const o=Math.max(s,n,r),a=Math.min(s,n,r);let h,c,d=(o+a)/2;if(o===a)h=c=0;else{const t=o-a;switch(c=d>.5?t/(2-o-a):t/(o+a),o){case s:h=(n-r)/t+(n<r?6:0);break;case n:h=(r-s)/t+2;break;case r:h=(s-n)/t+4}h/=6}return h=Math.round(360*h),c=Math.round(100*c),d=Math.round(100*d),d+=i/100*(100-d),`hsl(${h},${c}%,${d}%)`}catch(i){return t}}function I(t,i=5,e){return new Promise(((s,n)=>{t().then(s).catch((r=>{1===i||(0,o.mf)(e)&&e(r)?n(r):I(t,i-1,e).then(s,n)}))}))}function P(){const t=!!window.MSInputMethodContext&&!!document.documentMode,i=navigator.userAgent.toLowerCase().includes("msie");return t||i}function w(t){return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:`${t[e]}`})),{})}function S(t=navigator.userAgent){return t.includes("; wv")}function A(t){return Math.floor(Math.random()*Math.pow(10,t))}function x(t){return(0,o.VZ)(t)?t:(0,o.QM)(t)?new Error(t):new Error(String(t))}function _(t){return Math.ceil(2*t)/2}function T(t){return Math.trunc(100*t)/100}function C(t,i){let e="";for(let s=0;s<t.length;s++)e+=String.fromCharCode(t.charCodeAt(s)^i.charCodeAt(s%i.length));return e}function k(t,i){let e="";for(let s=0;s<t.length;s++)e+=String.fromCharCode(t.charCodeAt(s)^i.charCodeAt(s%i.length));return e}function E(t,i){let e;return Promise.race([t,new Promise((t=>e=setTimeout(t,i)))]).finally((()=>clearTimeout(e)))}},51:(t,i,e)=>{"use strict";e.d(i,{Bp:()=>o,CK:()=>a,FM:()=>c,Ph:()=>r,ge:()=>h,jv:()=>p,sH:()=>u});var s=e(4798);const n=".cdn.ampproject.org";function r(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function o(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=a(t);return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function a(t){return t.includes("?")?"&":"?"}function h(t){if((0,s.QM)(t))return d(t).split("/")[0]}function c(t){if((0,s.QM)(t))return d(t)}function d(t){return t.includes("://")?t.split("://")[1]:t}function l(t,i){return`${"http"+(/(\/s\/)+/.test(t.replace(i,""))?"s":"")}://${i}`}function u(t,i=!0){return t=function(t){if(!t.includes(n))return t;const i="www.",e="amp.";if((t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-",i)).replace("amp-",e)).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace(i,e)).includes(e))return t;const s="http://",r="https://";return(t=t.replace(s,`${s}${e}`)).replace(r,`${r}${e}`)}(t=function(t){const i=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==i){const e=t.replace(i[0],"");return l(t,e)}return t}(t=function(t){if(t.includes(n)){t=t.replace("https://","");const i=/^[^\/]+(\/[a-z]+\/)+s*\/*/,e=i.test(t)?t.replace(i.exec(t)[0],""):t;return l(t,e)}return t}(t))),i&&(t=function(t){if(!t.includes("#origin-")&&!t.includes("viewerUrl-"))return t;const i=t.split("#origin-")[1].split("viewerUrl-");return u(t=decodeURIComponent(i[1]),!1)}(t)),t}function p(t){try{return new URL(t),!0}catch(t){return!1}}},2728:(t,i,e)=>{"use strict";e.d(i,{$:()=>p});const s=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,n=t=>{if("string"!=typeof t)throw new TypeError("Invalid argument expected string");const i=t.match(s);if(!i)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return i.shift(),i},r=t=>"*"===t||"x"===t||"X"===t,o=t=>{const i=parseInt(t,10);return isNaN(i)?t:i},a=(t,i)=>{if(r(t)||r(i))return 0;const[e,s]=((t,i)=>typeof t!=typeof i?[String(t),String(i)]:[t,i])(o(t),o(i));return e>s?1:e<s?-1:0},h=(t,i)=>{for(let e=0;e<Math.max(t.length,i.length);e++){const s=a(t[e]||"0",i[e]||"0");if(0!==s)return s}return 0},c=(t,i,e)=>{u(e);const s=((t,i)=>{const e=n(t),s=n(i),r=e.pop(),o=s.pop(),a=h(e,s);return 0!==a?a:r&&o?h(r.split("."),o.split(".")):r||o?r?-1:1:0})(t,i);return d[e].includes(s)},d={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},l=Object.keys(d),u=t=>{if("string"!=typeof t)throw new TypeError("Invalid operator type, expected string but got "+typeof t);if(-1===l.indexOf(t))throw new Error(`Invalid operator, expected one of ${l.join("|")}`)};var p,f=e(4798);!function(t){t.shouldUseExternalViewabilityService=function(t){return c(t,"3.0.0","<")},t.showAndroidExpandButton=function(t){return c(t,"3.2.0",">=")},t.shouldUseOmsdkForAds=function(t){return c(t,"4.3.0",">=")},t.getEnvironment=function(t){const i=(0,f.QM)(t.bundleID),e=(0,f.QM)(t.sdkVersion),s=(0,f.QM)(t.reactNativeSdkVersion),n=(0,f.QM)(t.flutterSdkVersion);return{isInApp:i,isInAppSDK:e,isInAppHybrid:t.webViewability,isInAppReactNative:s,isInAppFlutter:n}},t.isValidWebviewInApp=function(t){return t.isInApp&&t.isInAppHybrid},t.canUseNativeImaSdk=function(t){return!!(0,f.QM)(t)&&c(t,"4.4.0",">=")}}(p||(p={}))},9607:(t,i,e)=>{"use strict";e.d(i,{D_:()=>_,nF:()=>C,Mn:()=>k});var s=e(8659),n=e(5204),r=e(7107),o=e(6174),a=e(9005),h=e(6568),c=e(6565),d=e(9791),l=e(9600),u=e(4798),p=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},f=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},m=function(t,i){return function(e,s){i(e,s,t)}};let g=class{constructor(t,i,e){this.cl=t,this.$L=i,this.Ui=[],this.qL=o.V.None,this.Ui.push(e.adBreakStart.asObservable().subscribe((({isLinear:t})=>{this.qL=t?o.V.Linear:o.V.NonLinear})),e.adBreakEnd.asObservable().subscribe((()=>{this.qL=o.V.None})))}getLoggingData(t=0){const i=this.cl.serverAb0,e=(0,u.hj)(i)?100:t;if(!this.HL(e))return;const s=this.zL();if(s.player.id=this.cl.playerId,s.environment.isTabFocus=this.cl.isPageInFocus,this.cl.playerEnvironment!==a.Q.Unknown&&(s.environment.renderEnvironment=this.cl.playerEnvironment),this.cl.currentMediaMetadata){const t=this.cl.currentMediaMetadata.mediaRevision;s.player.media={mediaId:this.cl.currentMediaMetadata.mediaId,mediaRevisionNumber:t?`${this.cl.currentMediaMetadata.mediaRevision}`:void 0,contentRevisionId:this.cl.currentMediaMetadata.contentRevisionId,isExternal:!!this.cl.currentMediaMetadata.isExternalMedia}}return this.cl.playerDimensions&&(s.player.size=this.cl.playerDimensions),s.player.isInView=this.$L.sessionViewabilityChanged.value.isInView,s.player.type=this.cl.playerType,this.cl.playerType!==h.e.Outstream&&(s.player.state=this.cl.playerState),s.player.advertising.adBreak=this.qL,s.environment.injectedServerAb0=this.cl.serverAb0,s}dispose(){(0,l.i)(this.Ui)}HL(t){return!!this.cl.canTrackAllRequests||!!(0,d.sq)(t)}zL(){return{player:{media:{isExternal:!1},advertising:{adBreak:o.V.None},isInView:!1},environment:{}}}};g=p([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),m(0,(0,s.f3)(r.B)),m(1,(0,s.f3)(c.q)),m(2,(0,s.f3)(n.k)),f("design:paramtypes",[Object,Object,Object])],g);var v=e(7945);const y=!0;var b=e(9741),I=e(9906),P=e(6153),w=e(51),S=e(6578);const A=500;let x=window.location&&window.location.href;try{x=window.top.location.href}catch(t){}var _;!function(t){t.EMERGENCY="Emergency",t.ALERT="Alert",t.CRITICAL="Critical",t.ERROR="Error",t.WARN="Warn",t.INFO="Info"}(_||(_={}));const T={throttle:30,shouldSendMaxLog:!0,pacing:0,extraLogsPercentage:0};function C(t,i={}){i=Object.assign(Object.assign({},T),i);const e=function(t){return!("true"===(0,w.Ph)("cnxDebugLogs",t))}(t.pageUrl||x);if(!(e&&i.pacing>0)||(0,d.sq)(i.pacing)){if(t.sessionId)try{const e=I.h.getSessionChildContainer(t.sessionId).resolve(g);t.extra=e.getLoggingData(i.extraLogsPercentage)}catch(t){}if(t.sessionId=t.sessionId?t.sessionId:b.S.sessionId,y&&e&&(b.S.incrementLogCount(t.message),b.S.isMaxLogOverflow(t.message)&&C({message:"Logging_max_log_overflow_1000",exception:t.message,callStack:t.callStack,level:_.ALERT,sessionId:t.sessionId},{shouldSendMaxLog:!1,throttle:100,extraLogsPercentage:100}),b.S.isMaxLog(t.message,i.throttle)))i.shouldSendMaxLog&&!b.S.isMaxLogSent(t.message)&&(b.S.setMaxLogSent(t.message),C({message:"Logging_max_log_sent",exception:t.message,callStack:t.callStack,level:_.CRITICAL,sessionId:b.S.sessionId}));else{if(void 0===t.callStack){const i=new Error(t.message);t.callStack=i.stack}if(t.callStack=t.callStack.substring(0,A),v.g.logToServer){t.pageUrl=t.pageUrl||x,t.version=v.g.version;let e="connatix.com";try{e=P.n.bundleDomain}catch(t){}const s="https://pl."+e;t.ddsource="browser",t.service="player",t.ua=navigator.userAgent,i.sendBeacon?S.n.sendJsonBeaconRequest(t,s):S.n.fetchXhttpRequest({requestUrl:s,requestType:"POST",withCredentials:!1},JSON.stringify(t)).catch((()=>{}))}!v.g.logToConsole&&e||function(t){let i;switch(t.level){case _.CRITICAL:i="#8B0000";break;case _.WARN:i="#FF8C00";break;case _.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(t)}}}function k(t,i){var e;null===(e=null==t?void 0:t.settings)||void 0===e||delete e._connatixInternals,t.settings&&0===Object.keys(t.settings).length&&delete t.settings;(1!==Object.keys(t).length||i)&&C({level:_.INFO,message:"CNX_CUSTOM_SETTINGS",customConfig:{config:JSON.stringify(t),hasRenderCallback:i}},{pacing:1})}},7332:(t,i,e)=>{"use strict";e.d(i,{DE:()=>r,ON:()=>c,Tc:()=>a,aX:()=>o,dO:()=>l,dQ:()=>n,oK:()=>h,uc:()=>d});var s=e(4798);function n(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function r(t,i){return i.reduce(((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i))}function o(t,i){let e=t,s=i;for(;0!==e&&0!==s;)e>s?e%=s:s%=e;return 0===e?s:e}function a(t,i){return i/100*t}function h(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function c(t){return!(0,s.r)(t.width)||!(0,s.r)(t.height)}function d(t){const i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}],e=/\.0+$|(\.[0-9]*[1-9])0+$/;let s;for(s=i.length-1;s>0&&!(t>=i[s].value);s--);return t/i[s].value<i[s].value/10?(Math.floor(t/i[s].value*10)/10).toFixed(1).replace(e,"$1")+i[s].symbol:Math.floor(t/i[s].value).toFixed(0)+i[s].symbol}function l(t,i){for(let e=i;e>1;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}},7531:(t,i,e)=>{"use strict";function s(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}function n(t,i){return Object.assign(Object.assign({},t),i)}function r(t,i){const e=Object.assign({},t);return i.forEach((t=>{delete e[t]})),e}function o(t){return Object.keys(t)[0]}e.d(i,{$0:()=>o,G_:()=>r,HD:()=>s,S1:()=>n})},9600:(t,i,e)=>{"use strict";function s(t=[]){t.filter((t=>!!t)).forEach((t=>t.unsubscribe()))}e.d(i,{i:()=>s})},3003:(t,i,e)=>{"use strict";e.d(i,{EQ:()=>o,Ed:()=>u,Ft:()=>c,IS:()=>l,J5:()=>r,V7:()=>h,VN:()=>p,hF:()=>d,k0:()=>a,yd:()=>f});var s=e(9607),n=e(4798);function r(t){return t.replace(/[-—]/g,"&#x2011;")}function o(t){try{return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}catch(i){return(0,s.nF)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:s.D_.WARN}),Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}}function a(t){return/<[a-z/][\s\S]*>/i.test(t)}function h(t,i){const e=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp(`<${e}>(.*?)</${e}>`,"g");return t.replace(s,((t,e)=>e.split(" ").map((t=>`<${i}>${t}</${i}>`)).join(" ")))}function c(t){return!!t.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/)}function d(t){return t.replace(/^\s+|\s+$|\s+(?=\s)/g,"")}function l(t,i){return`${t}-${i}`}function u(t,i){return t.match(i)||[]}function p(t,i,e){return(0,n.QM)(t)?t.substring(i,e):""}function f(t){return"true"===t||"false"!==t&&void 0}},1310:(t,i,e)=>{"use strict";e.d(i,{H8:()=>f,QI:()=>o,VG:()=>l,WH:()=>h,XF:()=>a,dO:()=>d,k$:()=>u,kw:()=>v,pP:()=>r,qd:()=>p,qe:()=>m,qt:()=>y,to:()=>c,w4:()=>g});var s=e(9357),n=e(4798);function r(t){let i,e;return(0,n.HD)(t)&&(i=t.match(s.T9),i&&(e=parseInt(i[1],10)*s.p7+parseInt(i[2],10)*s.uD+parseInt(i[3],10)*s.s_+parseInt(i[5]||0,10))),isNaN(e)?null:e}function o(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function a(t){return Date.now()+t*s.ti}function h(t){return Date.now()+t*s.p7}function c(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function d(){return Date.parse(new Date(Date.now()).toUTCString())}function l(t){const i=Date.parse(t+" GMT");if(!(0,n.hj)(i))return;const e=Math.floor((d()-i)/1e3);if(!(0,n.r)(e))return"just now";const s=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let r;for(r=s.length-1;r>0&&!(e>=s[r].value);r--);return Math.floor(e/s[r].value).toFixed(0)+s[r].symbol+" ago"}function u(t,i){const e=Date.now();return!(e<t||e>i)}function p(t){return Date.now()-t}function f(t){return Math.floor(p(t)/s.s_)}function m(t,i){return t>=i?t/s.s_:t}function g(t){return(0,n.hj)(t)?t*s.s_:null}function v(t){return Math.round(t/s.s_)}function y(t){var i=Math.floor(t/3600),e=Math.floor(t%3600/60),s=Math.floor(t%3600%60);let n="";return n=i>0?n+`${i}`.slice(-2)+" hours ":"",n+=e>0?`${e}`.slice(-2)+" minutes ":"",n+=s>0?`${s}`.slice(-2)+" seconds":"0 seconds",n}},4798:(t,i,e)=>{"use strict";function s(t){return"string"==typeof t}function n(t){return"number"==typeof t&&isFinite(t)}function r(t){return n(t)&&t>0}function o(t){return n(t)&&t>=0}function a(t){return s(t)&&t.length>0}function h(t){return void 0!==t}function c(t){return null===t}function d(t){return t&&t.stack&&t.message||t instanceof Error}function l(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function p(t){return u(t)&&Object.keys(t).length>0}function f(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}function m(t,i){var e;return a(t)?!(!(null===(e=Object.values(i))||void 0===e?void 0:e.includes(t))||Object.keys(i).includes(t)):!!n(t)&&t in i}function g(t){return"boolean"==typeof t?t:"true"===t}e.d(i,{$K:()=>h,Cz:()=>m,Ft:()=>c,HD:()=>s,Mx:()=>g,QM:()=>a,VZ:()=>d,Xc:()=>o,Xz:()=>p,as:()=>u,cL:()=>f,hj:()=>n,mf:()=>l,r:()=>r})},6578:(t,i,e)=>{"use strict";e.d(i,{n:()=>c});var s,n=e(8657),r=e(8041);!function(t){t.Brands="brands",t.Mobile="mobile",t.Architecture="architecture",t.Bitness="bitness",t.Model="model",t.Platform="platform",t.PlatformVersion="platformVersion",t.UaFullVersion="uaFullVersion",t.Wow64="wow64",t.FullVersionList="fullVersionList"}(s||(s={}));var o=e(4798),a=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class h{constructor(){}static getInstance(){return this.INSTANCE||(this.INSTANCE=new h),this.INSTANCE}fetch(){var t,i;return a(this,void 0,void 0,(function*(){return(0,o.$K)(this.WL)?this.WL:(null===(i=null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgentData)||void 0===i?void 0:i.getHighEntropyValues)?(this.WL=yield this.QL(),this.WL):null}))}QL(){return a(this,void 0,void 0,(function*(){return(0,o.$K)(this.JL)||(this.JL=new Promise((t=>{window.navigator.userAgentData.getHighEntropyValues([s.FullVersionList,s.PlatformVersion,s.Architecture,s.Bitness,s.Model]).then((i=>t(i))).catch((()=>t(null)))}))),this.JL}))}}var c,d=e(5650),l=e(9791),u=e(51),p=e(9607),f=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};!function(t){let i;!function(t){t.DumpJson="Dump Json",t.ServerError="Server Error",t.ProtobufDecode="Protobuf_decode"}(i||(i={}));const e=3e4;function s(t,i){return(0,o.as)(i)?(Object.keys(i).forEach((e=>t=(0,u.Bp)(t,e,i[e]))),t):t}function a(t,i){return f(this,void 0,void 0,(function*(){let s=null;t.shouldSetClientHintsHeaders&&(s=yield h.getInstance().fetch());const n=function({requestUrl:t,requestType:i="POST",contentType:s="",responseType:n="",withCredentials:r=!1,timeout:a=e,shouldSetClientHintsHeaders:h},c=null){const l=new XMLHttpRequest;if(l.open(i,t,!0),h&&c){const{model:t,platformVersion:i,architecture:e,bitness:s,fullVersionList:n}=c;(0,o.QM)(i)&&l.setRequestHeader("X-Sec-CH-UA-Platform-Version",i),(0,o.QM)(e)&&l.setRequestHeader("X-Sec-CH-UA-Arch",e),(0,o.QM)(s)&&l.setRequestHeader("X-Sec-CH-UA-Bitness",s),(0,o.QM)(t)&&l.setRequestHeader("X-Sec-CH-UA-Model",t),(0,d.BZ)(n)&&l.setRequestHeader("X-Sec-CH-UA-Full-Version-List",n.map((t=>`"${t.brand}";v="${t.version}"`)).join(", "))}return s.length>0&&l.setRequestHeader("Content-Type",s),n.length>0&&(l.responseType=n),l.timeout=a,l.withCredentials=r,l}(t,s),r=new Date;return new Promise(((t,e)=>{n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE)if(200===n.status)t(n.response);else{let t="";try{t=n.responseText}catch(t){}const i=(new Date).getTime()-r.getTime();e(new Error(`Request fail. status:${n.status}, readyState:${n.readyState}, response:${t}, time:${i}`))}},n.ontimeout=()=>{const t=(new Date).getTime()-r.getTime();e(new Error(`Request timeout status:${n.status}. time:${t}`))},n.send(i)}))}))}function c(t,e,s,n){return new Promise(((r,o)=>{e.then((e=>{if(t){let a=null;try{const i=e?new Uint8Array(e):new Uint8Array;a=t.toObject(t.decode(i),{defaults:!0,arrays:!0,objects:!0})}catch(t){!function(t,e,s,n){let r;try{r=JSON.parse((new TextDecoder).decode(t))}catch(t){}r?(r.ErrorMessage===i.DumpJson&&(0,p.nF)({message:i.DumpJson,exception:JSON.stringify(s),callStack:e,level:p.D_.INFO}),r.ErrorMessage===i.ServerError&&(0,p.nF)({message:i.ServerError,exception:e,level:p.D_.WARN})):(0,p.nF)({exception:n.message,requestUrl:e,requestData:JSON.stringify(t),message:i.ProtobufDecode,callStack:n.stack,level:p.D_.WARN},{throttle:10})}(e,s,n,t),o(i.ProtobufDecode)}r(a)}})).catch((t=>{o(t)}))}))}function m(t,i,e){try{const s=(0,l.Vm)([95,5]);!s||i&&0!==Object.keys(i).length||(0,p.nF)({message:"empty_proto_request",callStack:"empty_function_argument",exception:e,level:p.D_.INFO},{shouldSendMaxLog:!1});const n=t.fromObject(i);!s||n&&0!==Object.keys(n).length||(0,p.nF)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:e,level:p.D_.INFO},{shouldSendMaxLog:!1});const r=t.encode(n).finish();return!s||r&&0!==Object.keys(r).length||(0,p.nF)({message:"empty_proto_request",callStack:"empty_encode_result",exception:e,level:p.D_.INFO},{shouldSendMaxLog:!1}),r}catch(t){throw(0,p.nF)({exception:t.message,requestUrl:e,requestData:JSON.stringify(i),level:p.D_.CRITICAL,callStack:t.stack,message:"Protobuf_encode"},{throttle:10}),Error()}}t.fetchXhttpRequest=a,t.fetchXMLRequest=function(t,i=!0){const e=a({requestUrl:t,requestType:"GET",withCredentials:i,shouldSetClientHintsHeaders:!1});return new Promise(((t,i)=>{e.then((i=>{t(i)})).catch((t=>{i(t)}))}))},t.sendProtoRequest=function({protoResponse:t,protoRequest:i,requestData:e,endpoint:o,requestType:h,hasCredentials:d,queryParams:u,shouldLogErrors:f,shouldSetClientHintsHeaders:g,timeout:v}){const y=e?m(i,e,o):null;return o=s(o,u),r.oM===n.o.elements&&o.includes(n.o.connatix)&&(0,p.nF)({message:"Connatix_domain_request_in_ovp_session",level:p.D_.WARN,extra:this.YS},{pacing:1}),function(t,i,e="POST",s,n,r,o,h=!1){return c(t,a({requestUrl:i,requestType:e,withCredentials:n,shouldSetClientHintsHeaders:h,contentType:"POST"===e?"multipart/form-data":"",responseType:"arraybuffer",timeout:r},s),i,o)}(t,o,h,y,d,v,e,g).catch((t=>{throw f&&(0,l.Vm)([95,5])&&(0,p.nF)({message:"Xhr_error",exception:o,callStack:`${t}, requestData: ${JSON.stringify(e)}`,level:p.D_.INFO}),new Error(t)}))},t.sendProtoBeaconRequest=function({protoRequest:t,requestData:i,endpoint:e,queryParams:n=null}){e=s(e,n);const r=i?m(t,i,e):null;return navigator.sendBeacon(e,r)},t.sendJsonBeaconRequest=function(t,i){const e=new Blob([JSON.stringify(t)],{type:"application/json"});return navigator.sendBeacon(i,e)},t.trackPixel=function(t){try{return(new Image).src=t,!0}catch(t){return(0,p.nF)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:p.D_.CRITICAL}),!1}}}(c||(c={}))},8021:(t,i,e)=>{"use strict";e.d(i,{fB:()=>a,m$:()=>r,tO:()=>o,v$:()=>n,w:()=>s});const s={OrientationPortrait:"cnx-in-ps-portrait",OrientationLandscape:"cnx-in-ps-landscape",VideoLayout:"cnx-in-ps-video-layout"},n={Container:"cnx-playspace-container",Content:"cnx-playspace-content",Footer:"cnx-playspace-footer",Slider:"cnx-playspace-slider",Slide:"cnx-playspace-slide-container",Overlay:"cnx-ui-click-to-play-overlay",ImageWrapper:"cnx-ui-ps-image-wrapper",ImageBackground:"cnx-ui-ps-image-background",MediaLogo:"cnx-is-media-logo"},r={VideoSizeSlot:"cnx-ad-video-size-slot"},o={Main:"cnx-top-title",LogoContainer:"cnx-top-title-logo-container",Logo:"cnx-top-title-logo",LogoPortrait:"cnx-top-title-logo-portrait",LogoLandscape:"cnx-top-title-logo-landscape",LogoAnimation:"cnx-top-title-logo-animation",TitlesContainer:"cnx-top-title-text-container",TopStoryTitle:"cnx-top-title-story-text",TopSlideTitle:"cnx-top-title-slide-text",TextPlaceholder:"cnx-top-title-highlight-text-placeholder",Text:"cnx-top-title-highlight-text",TextOuterContainer:"cnx-top-title-highlight-text-outer-container",TextInnerContainer:"cnx-top-title-highlight-text-inner-container",SlideIn:"cnx-top-title-slide-in",SlideOut:"cnx-top-title-slide-out"},a="cnx-japanese-charset"},5204:(t,i,e)=>{"use strict";e.d(i,{k:()=>o});var s=e(6716),n=e(8659),r=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let o=class{constructor(){this.adClick=new s.x,this.adImpression=new s.x,this.adInView=new s.x,this.adQuartile=new s.x,this.auctionInformation=new s.x,this.heavyAd=new s.x,this.adPrebid=new s.x,this.adPostbid=new s.x,this.adBid=new s.x,this.startBidTracking=new s.x,this.adBidTracking=new s.x,this.adBreakStart=new s.x,this.adBreakEnd=new s.x,this.onBidFetchStart=new s.x,this.onBidFetchEnd=new s.x}};o=r([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],o)},5675:(t,i,e)=>{"use strict";e.d(i,{Z:()=>o});var s=e(5650),n=e(3020),r=e(9791);function o(t,i=window,o=window){const a=`cnx-async-bundle-${(0,r.dz)()}`,h={id:a,src:t};return new Promise(((t,r)=>{(0,n.dZ)(h,o.document.head,o,(()=>{try{i.cnx_webpack_global&&(0,s.BZ)(o.cnx_webpack_global)&&o.cnx_webpack_global.forEach((t=>{i.cnx_webpack_global.push(t)}))}catch(t){r(t)}t(),(0,n.uC)(a,o.document)}),(()=>{(0,n.uC)(a,e.g.document),r(new Error("script load error"))}),!1)}))}},7214:(t,i,e)=>{"use strict";e.d(i,{o:()=>oi});var s=e(8659);class n{}n.MAX_STRING_LENGTH=99,n.TIME_BIDS_INTERVAL_FREQUENCY=5e3;var r,o=e(5204),a=e(8395),h=e(3003),c=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},d=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},l=function(t,i){return function(e,s){i(e,s,t)}};let u=r=class{constructor(t,i){this.su=t,this.wi=i,this.Ui=[],this.YL=[],this.ZL=[],this.tB=[],this.iB=null,this.eB()}static sB(t){return t.map((t=>Object.assign(Object.assign({},t),{reason:(0,h.VN)(t.reason,0,n.MAX_STRING_LENGTH)})))}destroy(){this.iB&&(this.wi.clearInterval(this.iB),this.iB=null)}eB(){this.Ui.push(this.su.adBid.subscribe((t=>{this.nB(Object.assign(Object.assign({},t),{eventTimestamp:Date.now()}))})),this.su.adPostbid.subscribe((t=>{this.rB(Object.assign(Object.assign({},t),{eventTimestamp:Date.now()}))})),this.su.adPrebid.subscribe((t=>{this.oB(Object.assign(Object.assign({},t),{eventTimestamp:Date.now()}))})),this.su.startBidTracking.subscribe((()=>{this.hB()})))}hB(){this.iB||(this.iB=this.wi.setInterval((()=>{this.cB()}),n.TIME_BIDS_INTERVAL_FREQUENCY))}oB(t){this.ZL.push(t)}rB(t){this.tB.push(t)}nB(t){t.shouldTrackBid&&this.YL.push(t)}cB(){this.dB(),this.ZL=[],this.YL=[],this.tB=[]}dB(){0===this.ZL.length&&0===this.YL.length&&0===this.tB.length||(this.tB=r.sB(this.tB),this.su.adBidTracking.next({prebidList:this.ZL,bidList:this.YL,postbidList:this.tB}))}};u=r=c([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),l(0,(0,s.f3)(o.k)),l(1,(0,s.f3)(a.f)),d("design:paramtypes",[Object,Object])],u);var p=e(7107),f=e(148),m=e(6565),g=e(6515),v=e(4975),y=e(4978),b=e(6196),I=e(9127);var P,w=e(4727),S=e(4065),A=e(9600),x=e(1310),_=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},T=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},C=function(t,i){return function(e,s){i(e,s,t)}};let k=P=class{constructor(t,i,e){this.cl=t,this.lB=i,this.wi=e,this.fu=!1,this.uB=!1,this.Ui=[],this.pB=new g.X({mediaId:"",mediaPlayTime:0,mediaPlayInViewTime:0}),this.fB=new S.B(this.wi,Number.MAX_SAFE_INTEGER,P.TIMER_TICK),this.vB=new S.B(this.wi,Number.MAX_SAFE_INTEGER,P.TIMER_TICK),this.mB()}get mediaPlayInViewPayload(){const t=(0,x.kw)(this.fB.timeElapsed),i=(0,x.kw)(this.vB.timeElapsed);return{mediaId:this.cl.currentMediaMetadata.mediaId||"",mediaPlayTime:t<0?0:t,mediaPlayInViewTime:i<0?0:i}}get onMediaChange(){return this.pB.asObservable()}destroy(){(0,A.i)(this.Ui)}resetTimers(){this.fB.reset(),this.vB.reset()}mB(){this.Ui.push(this.lB.mediaPlaybackChanged.subscribe((({isPlaying:t})=>{this.gB(t)})),this.lB.mediaViewabilityChanged.subscribe((({isInView:t})=>{this.ga(t)})),this.lB.newMedia.subscribe((()=>{this.yB&&this.pB.next({mediaId:this.yB,mediaPlayTime:(0,x.kw)(this.fB.timeElapsed),mediaPlayInViewTime:(0,x.kw)(this.vB.timeElapsed)}),this.yB=this.cl.currentMediaMetadata.mediaId,this.resetTimers()})))}gB(t){this.fu!==t&&(this.fu=t,this.bB())}ga(t){this.uB!==t&&(this.uB=t,this.bB())}bB(){this.uB&&this.fu?this.vB.start():this.vB.stop(),this.fu?this.fB.start():this.fB.stop()}};k.TIMER_TICK=200,k=P=_([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),C(0,(0,s.f3)(p.B)),C(1,(0,s.f3)(f.z)),C(2,(0,s.f3)(a.f)),T("design:paramtypes",[Object,Object,Object])],k);class E{}E.TRACKING_POINTS=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800,timesRepeatDelay:Number.MAX_SAFE_INTEGER}];var M,L=e(9357),R=e(4798),B=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},O=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},D=function(t,i){return function(e,s){i(e,s,t)}};let N=M=class{constructor(t,i,e){this.IB=t,this.$L=i,this.wi=e,this.PB=!1,this.AB=!1,this.SB=0,this.Ui=[],this._B=new g.X(E.TRACKING_POINTS[0]),this.TB=new S.B(this.wi,Number.MAX_SAFE_INTEGER,M.TIMER_TICK),this.xB=new S.B(this.wi,Number.MAX_SAFE_INTEGER,M.TIMER_TICK),this.kB=new S.B(this.wi,Number.MAX_SAFE_INTEGER,M.TIMER_TICK),this.mB(),this.CB()}destroy(){(0,A.i)(this.Ui),this.IB.destroy()}CB(){this.Ui.push(this.IB.onMediaChange.subscribe((t=>{this.EB(t)})))}mB(){const t=this.$L.sessionRendered.pipe((0,w.q)(1)).subscribe((()=>{this.MB()}));this.Ui.push(this.$L.sessionPlaybackChanged.subscribe((({isPlaying:t})=>{this.LB(t)})),this.$L.sessionViewabilityChanged.subscribe((({isInView:t})=>{this.BB(t)})),this.$L.stayNextButtonsAppeared.subscribe((()=>{this.SB++})),t)}LB(t){this.PB!==t&&(this.PB=t,this.AB&&this.PB&&this.xB.start(),this.PB?this.TB.start():(this.TB.stop(),this.xB.stop()))}BB(t){this.AB!==t&&(this.AB=t,this.AB&&this.PB?this.xB.start():this.AB||this.xB.stop())}MB(){this.kB.start(),this.Ui.push(this._B.pipe((0,v.h)((t=>!!t)),(0,y.w)((t=>{return(0,b.H)((null==t?void 0:t.delay)*L.s_).pipe((i=t,(0,I.U)((function(){return i}))));var i}))).subscribe((t=>{this.RB(t)})))}RB(t){const i=t;let e=E.TRACKING_POINTS.indexOf(i);i.timesRepeatDelay--,this.EB(),0===i.timesRepeatDelay&&e++,(0,R.$K)(E.TRACKING_POINTS[e])&&this.OB(E.TRACKING_POINTS[e])}OB(t){this._B.next(t)}EB(t){const i=(0,x.kw)(this.kB.timeElapsed),e=(0,x.kw)(this.TB.timeElapsed),s=(0,x.kw)(this.xB.timeElapsed),n=null!=t?t:this.IB.mediaPlayInViewPayload;let r={elapsedTime:i,timePlayed:e,playedInView:s,mediaPlayTime:n.mediaPlayTime,mediaPlayInViewTime:n.mediaPlayInViewTime};r=this.DB(r);const o={sessionTimeInSeconds:r.elapsedTime,timePlayedInSeconds:r.timePlayed,timePlayedInViewInSeconds:r.playedInView,stayNextButtonsAppearances:this.SB,mediaId:n.mediaId,mediaPlayTime:r.mediaPlayTime,mediaPlayInViewTime:r.mediaPlayInViewTime};this.SB=0,this.TB.reset(),this.xB.reset(),this.kB.reset(),this.IB.resetTimers(),this.$L.sessionTimeElapsed.next(o)}DB(t){let{timePlayed:i,playedInView:e,elapsedTime:s,mediaPlayTime:n,mediaPlayInViewTime:r}=t;return s=Math.min(Math.max(s,0),this._B.value.delay),i=Math.min(Math.max(i,0),s),e=Math.min(Math.max(e,0),s),n=Math.min(Math.max(n,0),i),r=Math.min(Math.max(r,0),e),{timePlayed:i,playedInView:e,elapsedTime:s,mediaPlayTime:n,mediaPlayInViewTime:r}}};N.TIMER_TICK=200,N=M=B([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),D(0,(0,s.f3)(k)),D(1,(0,s.f3)(m.q)),D(2,(0,s.f3)(a.f)),O("design:paramtypes",[Object,Object,Object])],N);var F=e(8983),$=e(5356),V=e(3020),j=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let U=class{constructor(){this.NB=t=>{const i=t.target.closest("[tabindex]");i&&(i.focus({preventScroll:!0}),(0,V.IV)(i,F.s6.TabFocus),this.FB&&(0,$.mb)(this.FB)&&(0,V.cn)(this.FB,F.s6.AdUserInteraction))}}start(t){this.jB(t)}processAdUserInteraction(t=!1){(t||(0,V.pv)(this.FB,F.s6.AdUserInteraction))&&(this.UB(),this.FB&&((0,V.IV)(this.FB,F.s6.AdUserInteraction),(0,V.IV)(this.FB,F.s6.TabFocus)))}destroy(){var t;null===(t=this.FB)||void 0===t||t.removeEventListener("click",this.NB)}UB(){var t;null===(t=this.FB)||void 0===t||t.focus({preventScroll:!0})}jB(t){this.FB=t,null==t||t.addEventListener("click",this.NB)}};U=j([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped)],U);var q=e(2404),H=e(6716),z=e(9209),W=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let G=class{constructor(){this.$B=new H.x,this.qB=[z.Ys.Space,z.Ys.ArrowDown,z.Ys.ArrowUp],this.HB=t=>{const i=t.code;let e=z.Pl[z.Ys[i]];this.qB.includes(z.Ys[i])&&t.preventDefault(),t.shiftKey&&t.code===z.Ys[z.Ys.KeyN]&&(e=z.Pl[z.Ys.KeyN]),t.shiftKey&&t.code===z.Ys[z.Ys.KeyP]&&(e=z.Pl[z.Ys.KeyP]),t.ctrlKey&&t.code===z.Ys[z.Ys.Enter]&&(e=z.Pl[z.Ys.Enter]),void 0!==e&&this.$B.next({action:e})}}get shortcutsEventObservable(){return this.$B.asObservable()}start(t){this.Pu(t)}destroy(){e.g.removeEventListener("keydown",this.HB)}Pu(t){t.addEventListener("keydown",this.HB)}};var X;G=W([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped)],G),function(t){t.AdBreakStatus="cnx_ad_break_status"}(X||(X={}));var Q=e(6661),J=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Y=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},K=function(t,i){return function(e,s){i(e,s,t)}};let Z=class{constructor(t){this.nr=t,this.gT=new Map}start(t){this.zB=this.GB(t)}destroy(){(0,V.bX)(this.zB)}openChannels(t){t.forEach((t=>{this.gT.get(t)||this.gT.set(t,this.WB())}))}closeChannels(t){t.forEach((t=>{const i=this.gT.get(t);i&&(i.innerHTML="")}))}emitMessage(t,i){const e=this.gT.get(t);e&&(e.innerHTML=i)}mute(){var t;null===(t=this.zB)||void 0===t||t.classList.add(F.Gj.Hide),this.gT.forEach((t=>{t.innerHTML=""}))}unMute(){var t;null===(t=this.zB)||void 0===t||t.classList.remove(F.Gj.Hide)}GB(t){const i=this.nr.createElementByString(`<cnx class="${F.Rp.Wrapper}"></cnx>`);return t.appendChild(i),i}WB(){var t;const i=this.nr.createElementByString('<cnx role="status"></cnx>');return null===(t=this.zB)||void 0===t||t.appendChild(i),i}};Z=J([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),K(0,(0,s.f3)(Q.c.GlobalDomUtilsService)),Y("design:paramtypes",[Object])],Z);var tt=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},it=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},et=function(t,i){return function(e,s){i(e,s,t)}};let st=class{constructor(t,i,e){this.su=t,this.$L=i,this.XB=e,this.Ui=[],this.QB=!1,this.JB=!1}start(t){this.eB(),this.XB.start(t)}destroy(){(0,A.i)(this.Ui),this.XB.destroy()}eB(){this.Ui.push(this.su.adBreakStart.subscribe((({adSkippableInSeconds:t,isLinear:i})=>{i&&(this.JB=!0,this.QB&&this.YB(t))})),this.su.adBreakEnd.subscribe((()=>{this.JB=!1,this.KB()})),this.$L.sessionViewabilityChanged.subscribe((({isInView:t})=>{t?(this.JB&&this.YB(0),this.XB.unMute()):this.JB||this.XB.mute(),this.QB=t})))}YB(t){this.XB.openChannels([X.AdBreakStatus]);let i="The video player is currently playing an ad.";t>0&&(i+=` You can skip the ad in ${t} sec with a mouse or keyboard`),this.XB.emitMessage(X.AdBreakStatus,i)}KB(){this.XB.closeChannels([X.AdBreakStatus])}};st=tt([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),et(0,(0,s.f3)(o.k)),et(1,(0,s.f3)(m.q)),et(2,(0,s.f3)(Z)),it("design:paramtypes",[Object,Object,Object])],st);var nt,rt=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ot=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},at=function(t,i){return function(e,s){i(e,s,t)}};let ht=class{constructor(t,i,e,s){this.ZB=t,this.iR=i,this.eR=e,this.sR=s}start(t,i){this.ZB.start(t),this.iR.start(t),this.eR.start(t),i&&this.sR.start(t)}getShortcutsObservable(){return this.eR.shortcutsEventObservable}processAdUserInteraction(t=!1){var i;null===(i=this.ZB)||void 0===i||i.processAdUserInteraction(t)}destroy(){this.ZB.destroy(),this.iR.destroy(),this.eR.destroy(),this.sR.destroy()}};ht=rt([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),at(0,(0,s.f3)(U)),at(1,(0,s.f3)(q.m)),at(2,(0,s.f3)(G)),at(3,(0,s.f3)(st)),ot("design:paramtypes",[Object,"function"==typeof(nt=void 0!==q.m&&q.m)?nt:Object,Object,Object])],ht);var ct=e(289),dt=e(1102);class lt{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,isAdBlockerUsed:s,bundleName:n,playerWidth:r,playerHeight:o,pageInsightIndexes:a,integrationType:h}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(e),hasAdBlocker:s,integrationType:dt.EN.getProtoIntegrationType(h),bundleName:n,playerHeight:o,playerWidth:r,pageInsightIndexes:a,dynamicElkFieldsValues:i}}}class ut{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,pageInsightIndexes:s,customClientEncryptedPrice:n}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(e),pageInsightIndexes:s,customClientEncryptedPrice:n,dynamicElkFieldsValues:i}}}class pt{static getProtoPayload(t){const{trackingMetadata:i,adBlockerDetectionType:e,dynamicElkFields:s}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),adBlockDetectionType:dt.EN.getProtoAdBlockerDetectionType(e),dynamicElkFieldsValues:s}}}class ft{static getProtoPayload(t){const{trackingMetadata:i,sessionTimePassedSinceLastTracking:e,secondsPlayedInViewSinceLastTracking:s,secondsPlayedSinceLastTracking:n,stayNextButtonsAppearances:r,mediaId:o,secondsMediaPlayedSinceLastTracking:a,secondsMediaPlayedInViewSinceLastTracking:h,pageInsightIndexes:c}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),sessionTime:e,timePlayed:n,timePlayedInView:s,mediaTimePlayed:a,mediaTimePlayedInView:h,mediaId:o,stayNextButtonsAppearances:r,pageInsightIndexes:c}}}class mt{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,pageInsightIndexes:s}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(e),pageInsightIndexes:s,dynamicElkFieldsValues:i}}}class gt{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,adBreakType:s,playerWidth:n,pageInsightIndexes:r}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(e),adBreak:dt.EN.getProtoAdBreakType(s),playerWidth:n,pageInsightIndexes:r,dynamicElkFieldsValues:i}}}class vt{static getProtoPayload(t){const{trackingMetadata:i,mediaId:e,quartile:s,insightIndexes:n,sentimentAnalysis:r}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),quartile:dt.EN.getProtoQuartile(s),mediaGuid:e,sentimentAnalysis:r?dt.XE.getProtoSentimentAnalysis(r):void 0,insightIndexes:n}}}class yt{static getProtoPayload(t){const{trackingMetadata:i,type:e,mediaId:s,clickUrl:n,insightIndexes:r,sentimentAnalysis:o,slideTitle:a,slideNumber:h,slideMediaType:c}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),type:dt.EN.getProtoMediaClickType(e),mediaGuid:s,slideMediaType:c?dt.EN.getProtoMediaType(c):void 0,sentimentAnalysis:o?dt.XE.getProtoSentimentAnalysis(o):void 0,clickUrl:n,slideTitle:a,slideNumber:h,insightIndexes:r}}}class bt{static getProtoPayload(t){const{trackingMetadata:i,mediaId:e,insightIndexes:s}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),mediaGuid:e,insightIndexes:s}}}var It=e(3816),Pt=e(5650);class wt{static getProtoPayload(t){const{trackingMetadata:i,hasGdprConsent:e,gdprConsentMode:s,isExplorationMode:n,mediaId:r,shouldLogEverything:o,lineItemAbTest:a,panorama:h,prebidList:c,bidList:d,postbidList:l}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),mediaGuid:r,hasGdprConsentPayload:e,gdprConsentMode:s?dt.EN.getProtoGDPRConsentMode(s):void 0,lineItemAbTestInformation:a?dt.p.getProtoLineItemAbTest(a):void 0,prebids:c&&(0,Pt.BZ)(c)?c.map((t=>wt.getProtoPrebid(t))):void 0,bids:d&&(0,Pt.BZ)(d)?d.map((t=>wt.getProtoBid(t))):void 0,postBids:l&&(0,Pt.BZ)(l)?l.map((t=>wt.getProtoPostbid(t))):void 0,panorama:h?dt.QV.getProtoLotamePanorama(h):void 0,shouldLogEverything:o,isExplorationMode:n}}static getProtoPrebid(t){const{advertiserLineItemId:i,publisherLineItemId:e,playerReason:s,partnerReason:n,requestsCount:r,isUserSynced:o,timeSpentMs:a,playerWidth:h,playerHeight:c,partnerCustomHeaders:d,prebidJsBidderName:l,requestedFloorPrice:u,floorPriceInformation:p,identityProviderTrackingData:f,hasLexiconEnvelopeBeenUsed:m,videoPlacement:g,dynamicElkFields:v}=t;return{reason:dt.EN.getProtoPrebidReason(s),partnerReason:dt.EN.getProtoPrebidPartnerReason(n),requestNumber:r,timeSpent:a,floorPriceInformation:p?dt.wE.getProtoFloorPriceInformation(p):void 0,requestedFloorPrice:u,advertiserLineItemId:i,publisherLineItemId:e,isUserSynced:o,playerWidth:h,playerHeight:c,partnerCustomHeaders:d,prebidJsBidderName:l,identityProviderData:f?dt.km.getProtoIdentityProviderData(f):void 0,hasLexiconEnvelopeBeenUsed:m,videoPlacement:g,dynamicElkFieldsValues:v}}static getProtoBid(t){const{advertiserLineItemId:i,publisherLineItemId:e,requestsCount:s,isUserSynced:n,timeSpentMs:r,playerWidth:o,playerHeight:a,rtbCreativeId:h,rtbSeatId:c,rtbADomain:d,rtbDspId:l,cnxBidId:u,encryptedPrice:p,customClientPrice:f,prebidJsBidderName:m,requestedFloorPrice:g,floorPriceInformation:v,identityProviderTrackingData:y,hasLexiconEnvelopeBeenUsed:b,videoPlacement:I,dynamicElkFields:P}=t;return{requestNumber:s,timeSpent:r,creativeId:h,rtbAdomain:d,dspId:l,floorPriceInformation:v?dt.wE.getProtoFloorPriceInformation(v):void 0,rtbSeatId:c,cnxBidId:u,advertiserLineItemId:i,publisherLineItemId:e,isUserSynced:n,playerWidth:o,playerHeight:a,encryptedPrice:p,customClientPrice:f,prebidJsBidderName:m,requestedFloorPrice:g,identityProviderData:y?dt.km.getProtoIdentityProviderData(y):void 0,hasLexiconEnvelopeBeenUsed:b,videoPlacement:I,dynamicElkFieldsValues:P}}static getProtoPostbid(t){const{advertiserLineItemId:i,publisherLineItemId:e,reason:s,isBidLoaded:n,requestsCount:r,adSourceType:o,vastMediaType:a,adBreakType:h,isUserSynced:c,timeSpentMs:d,winToAdLoadedTimeMs:l,bidElapsedTimeSeconds:u,playerWidth:p,playerHeight:f,adPodSlotPosition:m,auctionInformation:g,auctionReason:v,rtbCreativeId:y,rtbSeatId:b,rtbADomain:I,rtbDspId:P,cnxBidId:w,prebidJsBidderName:S,requestedFloorPrice:A,floorPriceInformation:x,liveRampType:_,discount:T,identityProviderTrackingData:C,hasLexiconEnvelopeBeenUsed:k,videoPlacement:E,assertiveYieldProbability:M,dynamicElkFields:L}=t;return{error:s,adBreakType:dt.EN.getProtoAdBreakType(h),adsourceType:dt.EN.getProtoAdSourceType(o),auctionInformation:g?dt.Ti.getProtoAuctionInformation(g):void 0,auctionPostbidReason:v?dt.EN.getProtoAuctionPostbidReason(v):void 0,floorPriceInformation:x?dt.wE.getProtoFloorPriceInformation(x):void 0,discount:T?It.d.getProtoDiscount(T):void 0,floorPrice:A,liveRampType:_?dt.EN.getProtoLiveRamp(_):void 0,identityProviderData:C?dt.km.getProtoIdentityProviderData(C):void 0,timeSpent:d,winToAdLoadedTime:l,requestNumber:r,creativeId:y,rtbAdomain:I,dspId:P,rtbSeatId:b,cnxBidId:w,advertiserLineItemId:i,publisherLineItemId:e,isBidLoaded:n,vastMediaType:a,isUserSynced:c,bidElapsedTimeSeconds:u,playerWidth:p,playerHeight:f,adPodSlotPosition:m,prebidJsBidderName:S,hasLexiconEnvelopeBeenUsed:k,videoPlacement:E,assertiveYieldProbability:M,dynamicElkFieldsValues:L}}}class St{static getProtoPayload(t){const{cnxBidId:i,auctionLossReason:e,auctionInformation:s}=t;return{cnxBidId:i,auctionInformation:s?dt.Ti.getProtoAuctionInformation(s):void 0,auctionLossReason:dt.EN.getProtoAuctionLossReason(e)}}static fromProtoAuctionInformation(t){const{cnxBidId:i,auctionLossReason:e,auctionInformation:s}=t;return{cnxBidId:i,auctionInformation:s?dt.Ti.fromProtoAuctionInformation(s):void 0,auctionLossReason:dt.EN.fromProtoAuctionLossReason(e)}}}class At{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,advertiserLineItemId:s,type:n}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(e),heavyAdBlockTypeEnum:dt.EN.getProtoHeavyAdType(n),advertiserLineItemId:s,dynamicElkFieldsValues:i}}}class xt{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,adBreakType:n,adSourceType:r,vastMediaType:o,adPodSlotPosition:a,isExplorationMode:h,mediaId:c,isUserSynced:d,timeSpentMs:l,winToAdLoadedTimeMs:u,startAdToImpressionTimeMs:p,declaredDurationSeconds:f,impressionDurationSeconds:m,encryptedPrice:g,rtbADomain:v,rtbSeatId:y,rtbCreativeId:b,rtbDspId:I,cnxBidId:P,customClientPrice:w,prebidJsBidderName:S,auctionInformation:A,playerWidth:x,playerHeight:_,hasAdSkip:T,requestsCount:C,requestedFloorPrice:k,floorPriceInformation:E,bidElapsedTimeSeconds:M,insightIndexes:L,pageInsightIndexes:R,sentimentAnalysis:B,liveRampType:O,lineItemAbTest:D,internalAuctionInformation:N,iasSegmentCodes:F,discount:$,dynamicElkFields:V,serverBillingNoticeUrls:j,identityProviderTrackingData:U,hasLexiconEnvelopeBeenUsed:q,panorama:H,videoPlacement:z,assertiveYieldResult:W,assertiveYieldProbability:G,adMediaFileWidth:X,adMediaFileHeight:Q}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),adBreakType:dt.EN.getProtoAdBreakType(n),adsourceType:dt.EN.getProtoAdSourceType(r),auctionInformation:A?dt.Ti.getProtoAuctionInformation(A):void 0,internalAuction:N?dt.W1.getProtoInternalAuction(N):void 0,timeSpent:l,winToAdLoadedTime:u,startAdToImpressionTime:p,declaredDuration:f,impressionDuration:m,sentimentAnalysis:B?dt.XE.getProtoSentimentAnalysis(B):void 0,lineItemAbTestInformation:D?dt.p.getProtoLineItemAbTest(D):void 0,floorPriceInformation:E?dt.wE.getProtoFloorPriceInformation(E):void 0,discount:$?It.d.getProtoDiscount($):void 0,mediaGuid:c,floorPrice:k,creativeId:b,rtbAdomain:v,dspId:I,requestNumber:C,liveRampType:O?dt.EN.getProtoLiveRamp(O):void 0,identityProviderData:U?dt.km.getProtoIdentityProviderData(U):void 0,panorama:H?dt.QV.getProtoLotamePanorama(H):void 0,dynamicElkFieldsValues:V,cnxBidId:P,rtbSeatId:y,vastMediaType:o,advertiserLineItemId:e,publisherLineItemId:s,isExplorationMode:h,isUserSynced:d,playerWidth:x,playerHeight:_,hasAdSkip:T,bidElapsedTimeSeconds:M,adPodSlotPosition:a,encryptedPrice:g,customClientPrice:w,prebidJsBidderName:S,insightIndexes:L,pageInsightIndexes:R,iasSegmentCodes:F,serverBillingNoticeUrls:j,hasLexiconEnvelopeBeenUsed:q,videoPlacement:z,assertiveYieldResult:W,assertiveYieldProbability:G,adMediaFileWidth:X,adMediaFileHeight:Q}}}class _t{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,adBreakType:n,mediaId:r,hasSkipAd:o,rtbSeatId:a,rtbADomain:h,rtbDspId:c,insightIndexes:d,sentimentAnalysis:l,pageInsightIndexes:u,lineItemAbTest:p,iasSegmentCodes:f,dynamicElkFields:m,discount:g}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),adBreakType:dt.EN.getProtoAdBreakType(n),sentimentAnalysis:l?dt.XE.getProtoSentimentAnalysis(l):void 0,lineItemAbTestInformation:p?dt.p.getProtoLineItemAbTest(p):void 0,discount:g?It.d.getProtoDiscount(g):void 0,mediaGuid:r,hasAdSkip:o,dynamicElkFieldsValues:m,rtbAdomain:h,advertiserLineItemId:e,publisherLineItemId:s,rtbSeatId:a,dspId:c,insightIndexes:d,pageInsightIndexes:u,iasSegmentCodes:f}}}class Tt{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,mediaId:n,type:r,rtbSeatId:o,dspId:a,rtbADomain:h,insightIndexes:c,hasSkipAd:d,adBreakType:l,sentimentAnalysis:u,pageInsightIndexes:p,lineItemAbTest:f,iasSegmentCodes:m}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),quartile:dt.EN.getProtoQuartile(r),adBreakType:dt.EN.getProtoAdBreakType(l),lineItemAbTestInformation:f?dt.p.getProtoLineItemAbTest(f):void 0,sentimentAnalysis:u?dt.XE.getProtoSentimentAnalysis(u):void 0,mediaGuid:n,hasAdSkip:d,rtbAdomain:h,rtbSeatId:o,dspId:a,advertiserLineItemId:e,publisherLineItemId:s,insightIndexes:c,pageInsightIndexes:p,iasSegmentCodes:m}}}class Ct{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,mediaId:n,type:r,adBreakType:o,insightIndexes:a,sentimentAnalysis:h,pageInsightIndexes:c,lineItemAbTest:d,iasSegmentCodes:l}=t;return{trackingRequestMeta:dt.yz.getProtoTrackingMetadata(i),mediaGuid:n,type:dt.EN.getProtoAdClickType(r),adBreakType:dt.EN.getProtoAdBreakType(o),sentimentAnalysis:h?dt.XE.getProtoSentimentAnalysis(h):void 0,lineItemAbTestInformation:d?dt.p.getProtoLineItemAbTest(d):void 0,advertiserLineItemId:e,publisherLineItemId:s,insightIndexes:a,pageInsightIndexes:c,iasSegmentCodes:l}}}class kt{static getTrackingResponseFromProto(t){const{errorMessage:i,adServerLineItemName:e,impressionRevenue:s,isViewabilityRestricted:n,platformCappedLineItemIdList:r}=t;return{errorMessage:i,adServerLineItemName:e,impressionRevenue:s,isViewabilityRestricted:n,platformCappedLineItemIdList:r}}}var Et=e(6286),Mt=e(7945),Lt=e(307),Rt=e(6153),Bt=e(9607),Ot=e(6578),Dt=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Nt=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},Ft=function(t,i){return function(e,s){i(e,s,t)}},$t=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};let Vt=class{constructor(t,i){this.lP=t,this.cl=i}sessionRenderEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.session_rendered,ct.ProtoSessionRenderedRequest,lt.getProtoPayload(t))}))}playerStartEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.playerStart,ct.ProtoPlayerStartRequest,ut.getProtoPayload(t))}))}adOpportunityEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.adOpportunity,ct.ProtoAdOpportunityRequest,gt.getProtoPayload(t))}))}sessionAdBlockerEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.sessionAdBlocker,ct.ProtoSessionAdBlockerRequest,pt.getProtoPayload(t))}))}sessionTimeEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.session_time,ct.ProtoSessionTimeTrackingRequest,ft.getProtoPayload(t))}))}sessionInViewEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.session_view,ct.ProtoSessionViewRequest,mt.getProtoPayload(t))}))}mediaInViewEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.media_view,ct.ProtoMediaViewRequest,bt.getProtoPayload(t))}))}mediaClickEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.media_click,ct.ProtoMediaClickTrackingRequest,yt.getProtoPayload(t))}))}mediaQuartileEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.media_quartile,ct.ProtoMediaQuartileRequest,vt.getProtoPayload(t))}))}adBidEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.bids,ct.ProtoBidTrackingsRequest,wt.getProtoPayload(t))}))}auctionInformationEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.auctionInformation,ct.ProtoAuctionInfoRequest,St.getProtoPayload(t))}))}adImpressionEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.ad_impression,ct.ProtoVideoAdImpressionRequest,xt.getProtoPayload(t),t.advertiserLineItemId)}))}adInViewEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.ad_impression_viewable,ct.ProtoVideoAdImpressionViewableRequest,_t.getProtoPayload(t),t.advertiserLineItemId)}))}adQuartileEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.ad_quartile,ct.ProtoVideoAdQuartilesRequest,Tt.getProtoPayload(t),t.advertiserLineItemId)}))}adClickEvent(t){return $t(this,void 0,void 0,(function*(){return this.nR(Rt.n.endPoints.tracking.ad_click,ct.ProtoAdClickTrackingRequest,Ct.getProtoPayload(t),t.advertiserLineItemId)}))}heavyAdEvent(t){this.rR(Rt.n.endPoints.tracking.heavy_ad_intervention,ct.ProtoHeavyAdTrackingRequest,At.getProtoPayload(t))}nR(t,i,e,s){return $t(this,void 0,void 0,(function*(){try{const n=yield Ot.n.sendProtoRequest({endpoint:t,requestData:e,queryParams:{[Lt.Fk]:Mt.g.version,[Lt.cc]:Rt.n.tier},protoRequest:i,protoResponse:ct.ProtoTrackingResponse,hasCredentials:!0,shouldLogErrors:!0}),r=kt.getTrackingResponseFromProto(n);this.lP.onResponseReceived(r,s)}catch(i){this.mT(i,t)}}))}rR(t,i,e){try{Ot.n.sendProtoBeaconRequest({endpoint:t,requestData:e,queryParams:{[Lt.Fk]:Mt.g.version,[Lt.cc]:Rt.n.tier},protoRequest:i,shouldLogErrors:!1})}catch(i){this.mT(i,t)}}mT(t,i){(0,Bt.nF)({message:`ProtoTrackingCallerService_error_${i}`,level:Bt.D_.INFO,exception:t?JSON.stringify(t):void 0,sessionId:this.cl.sessionId},{throttle:1,pacing:1,shouldSendMaxLog:!1})}};Vt=Dt([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),Ft(0,(0,s.f3)(Et.j)),Ft(1,(0,s.f3)(p.B)),Nt("design:paramtypes",[Object,Object])],Vt);var jt=e(6095),Ut=e(8041),qt=e(6666);class Ht{static fromPayloadToTracking(t,i){var e;const{type:s,adBreakType:n,publisherLineItemId:r,advertiserLineItemId:o}=t,{currentMediaMetadata:{mediaId:a,insights:h,sentimentAnalysis:c},iasSegmentCodes:d,trackingRequestMeta:l,lineItemAbTestInformation:u}=i;return{type:s,adBreakType:n,publisherLineItemId:r,advertiserLineItemId:o,mediaId:a,iasSegmentCodes:d,insightIndexes:h,trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(l),pageInsightIndexes:null===(e=qt.k.pageInsights)||void 0===e?void 0:e.insights,sentimentAnalysis:c?dt.XE.fromProtoGetSentimentAnalysis(c):void 0,lineItemAbTest:u?dt.p.fromProtoLineItemAbTestFromProto(u):void 0}}}class zt{static fromPayloadToTracking(t,i){var e;const{width:s,height:n}=i.playerDimensions,{currentMediaMetadata:{mediaId:r,insights:o,sentimentAnalysis:a},lineItemAbTestInformation:h,videoPlacement:c}=i,{adSourceType:d,advertiserLineItemId:l,publisherLineItemId:u,customClientPrice:p,encryptedPrice:f,prebidJsBidderName:m,rtbADomain:g,rtbCreativeId:v,rtbSeatId:y,isUserSynced:b,timeSpentMs:I,vastMediaType:P,rtbDspId:w,cnxBidId:S,winToAdLoadedTimeMs:A,startAdToImpressionTimeMs:_,impressionDurationSeconds:T,declaredDurationSeconds:C,isExplorationMode:k,requestsCount:E,requestedFloorPrice:M,floorPriceInformation:L,bidElapsedTimeSeconds:R,adBreakType:B,internalAuctionInformation:O,auctionInformation:D,dynamicElkFields:N,hasAdSkip:F,discount:$,liveRampType:V,serverBillingNoticeUrls:j,identityProviderTrackingData:U,panorama:q,hasLexiconEnvelopeBeenUsed:H,assertiveYieldResult:z,assertiveYieldProbability:W,adMediaFileWidth:G,adMediaFileHeight:X}=t,Q={adSourceType:d,advertiserLineItemId:l,publisherLineItemId:u,customClientPrice:p,encryptedPrice:f,prebidJsBidderName:m,rtbADomain:g,rtbCreativeId:v,rtbSeatId:y,isUserSynced:b,timeSpentMs:I,vastMediaType:P,rtbDspId:w,cnxBidId:S,winToAdLoadedTimeMs:A,startAdToImpressionTimeMs:_,impressionDurationSeconds:T,declaredDurationSeconds:C,isExplorationMode:k,requestsCount:E,requestedFloorPrice:M,floorPriceInformation:L,bidElapsedTimeSeconds:R,adBreakType:B,internalAuctionInformation:O,auctionInformation:D,dynamicElkFields:N,hasAdSkip:F,mediaId:r,liveRampType:V,serverBillingNoticeUrls:j,identityProviderTrackingData:U,panorama:q,hasLexiconEnvelopeBeenUsed:H,videoPlacement:c,assertiveYieldResult:z,assertiveYieldProbability:W,adMediaFileWidth:G,adMediaFileHeight:X,playerWidth:s,playerHeight:n,insightIndexes:o,trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),lineItemAbTest:h?dt.p.fromProtoLineItemAbTestFromProto(h):void 0,iasSegmentCodes:i.iasSegmentCodes,sentimentAnalysis:a?dt.XE.fromProtoGetSentimentAnalysis(a):void 0,pageInsightIndexes:null===(e=qt.k.pageInsights)||void 0===e?void 0:e.insights,discount:$?It.d.fromProtoDiscount($):void 0};return i.isFirstAdImpressionElapsedTimeTracked||(Q.dynamicElkFields=Object.assign(Object.assign({},N),{24:`${(0,x.qd)(i.bundleLoadTimestamp)}`}),i.isFirstAdImpressionElapsedTimeTracked=!0),Q}}class Wt{static fromPayloadToTracking(t,i){var e;const{currentMediaMetadata:{mediaId:s,insights:n,sentimentAnalysis:r},lineItemAbTestInformation:o,trackingRequestMeta:a,iasSegmentCodes:h}=i,{publisherLineItemId:c,advertiserLineItemId:d,rtbSeatId:l,rtbDspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,discount:g}=t;return{mediaId:s,publisherLineItemId:c,advertiserLineItemId:d,rtbSeatId:l,rtbDspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,iasSegmentCodes:h,discount:g,trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(a),lineItemAbTest:o?dt.p.fromProtoLineItemAbTestFromProto(o):void 0,insightIndexes:n,sentimentAnalysis:r?dt.XE.fromProtoGetSentimentAnalysis(r):void 0,pageInsightIndexes:null===(e=qt.k.pageInsights)||void 0===e?void 0:e.insights}}}class Gt{static fromPayloadToTracking(t,i){var e;const{currentMediaMetadata:{sentimentAnalysis:s,mediaId:n,insights:r},lineItemAbTestInformation:o,iasSegmentCodes:a}=i,{advertiserLineItemId:h,publisherLineItemId:c,type:d,rtbSeatId:l,dspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m}=t;return{mediaId:n,advertiserLineItemId:h,publisherLineItemId:c,type:d,rtbSeatId:l,dspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,iasSegmentCodes:a,insightIndexes:r,trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),sentimentAnalysis:s?dt.XE.fromProtoGetSentimentAnalysis(s):void 0,pageInsightIndexes:null===(e=qt.k.pageInsights)||void 0===e?void 0:e.insights,lineItemAbTest:o?dt.p.fromProtoLineItemAbTestFromProto(o):void 0}}}var Xt=e(8736);class Qt{static fromPayloadToTracking(t,i){const{mediaId:e,clickUrl:s,sentimentAnalysis:n,slideTitle:r,slideNumber:o,slideMediaType:a,insights:h}=i.currentMediaMetadata,c=t.type||Xt.$u.Click;return{trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),slideMediaType:a?dt.EN.fromProtoGetMediaType(a):void 0,sentimentAnalysis:n?dt.XE.fromProtoGetSentimentAnalysis(n):void 0,clickUrl:this.oR(t,s),insightIndexes:h,mediaId:e,type:c,slideTitle:r,slideNumber:o}}static oR(t,i){if(t.type===Xt.$u.UrlClick)return t.clickUrl||i}}class Jt{static fromPayloadToTracking(t,i,e,s){const{currentMediaMetadata:n,isExplorationMode:r,lineItemAbTestInformation:o,canTrackAllRequests:a,hasGdprConsentPayload:h,playerDimensions:c,videoPlacement:d}=i,l=t.prebidList.map((t=>Zt.fromPayloadToTracking(t,c,d))),u=t.bidList.map((t=>Yt.fromPayloadToTracking(t,c,d))),p=t.postbidList.map((t=>Kt.fromPayloadToTracking(t,c,d)));return{isExplorationMode:r,panorama:s,gdprConsentMode:e,trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),shouldLogEverything:a,prebidList:l,bidList:u,postbidList:p,mediaId:null==n?void 0:n.mediaId,hasGdprConsent:h,lineItemAbTest:o?dt.p.fromProtoLineItemAbTestFromProto(o):void 0}}}class Yt{static fromPayloadToTracking(t,i,e){const{width:s,height:n}=i,{encryptedPrice:r,customClientPrice:o,floorPriceFactorBypassReason:a,rtbCreativeId:h,rtbSeatId:c,rtbADomain:d,rtbDspId:l,cnxBidId:u,publisherLineItemId:p,advertiserLineItemId:f,requestsCount:m,isUserSynced:g,timeSpentMs:v,requestedFloorPrice:y,floorPriceInformation:b,prebidJsBidderName:I,identityProviderTrackingData:P,hasLexiconEnvelopeBeenUsed:w,dynamicElkFields:S}=t;return{playerWidth:s,playerHeight:n,encryptedPrice:r,customClientPrice:o,floorPriceFactorBypassReason:a,rtbCreativeId:h,rtbSeatId:c,rtbADomain:d,rtbDspId:l,cnxBidId:u,publisherLineItemId:p,advertiserLineItemId:f,requestsCount:m,isUserSynced:g,timeSpentMs:v,requestedFloorPrice:y,floorPriceInformation:b,prebidJsBidderName:I,identityProviderTrackingData:P,hasLexiconEnvelopeBeenUsed:w,videoPlacement:e,dynamicElkFields:S}}}class Kt{static fromPayloadToTracking(t,i,e){const{width:s,height:n}=i,{reason:r,adSourceType:o,vastMediaType:a,bidElapsedTimeSeconds:h,isBidLoaded:c,winToAdLoadedTimeMs:d,adBreakType:l,auctionInformation:u,auctionReason:p,adPodSlotPosition:f,prebidJsBidderName:m,dynamicElkFields:g,publisherLineItemId:v,advertiserLineItemId:y,isUserSynced:b,rtbCreativeId:I,rtbSeatId:P,rtbADomain:w,rtbDspId:S,cnxBidId:A,timeSpentMs:x,requestsCount:_,requestedFloorPrice:T,floorPriceInformation:C,discount:k,liveRampType:E,identityProviderTrackingData:M,hasLexiconEnvelopeBeenUsed:L,assertiveYieldProbability:R}=t;return{playerWidth:s,playerHeight:n,reason:r,adSourceType:o,vastMediaType:a,bidElapsedTimeSeconds:h,isBidLoaded:c,winToAdLoadedTimeMs:d,adBreakType:l,auctionInformation:u,auctionReason:p,adPodSlotPosition:f,prebidJsBidderName:m,dynamicElkFields:g,publisherLineItemId:v,advertiserLineItemId:y,isUserSynced:b,rtbCreativeId:I,rtbSeatId:P,rtbADomain:w,rtbDspId:S,cnxBidId:A,timeSpentMs:x,requestsCount:_,requestedFloorPrice:T,floorPriceInformation:C,discount:k,liveRampType:E,identityProviderTrackingData:M,hasLexiconEnvelopeBeenUsed:L,videoPlacement:e,assertiveYieldProbability:R}}}class Zt{static fromPayloadToTracking(t,i,e){const{width:s,height:n}=i,{playerReason:r,partnerReason:o,partnerCustomHeaders:a,publisherLineItemId:h,advertiserLineItemId:c,requestedFloorPrice:d,requestsCount:l,isUserSynced:u,prebidJsBidderName:p,timeSpentMs:f,floorPriceInformation:m,identityProviderTrackingData:g,hasLexiconEnvelopeBeenUsed:v,dynamicElkFields:y}=t;return{playerWidth:s,playerHeight:n,playerReason:r,partnerReason:o,partnerCustomHeaders:a,publisherLineItemId:h,advertiserLineItemId:c,requestedFloorPrice:d,requestsCount:l,isUserSynced:u,prebidJsBidderName:p,timeSpentMs:f,floorPriceInformation:m,identityProviderTrackingData:g,hasLexiconEnvelopeBeenUsed:v,videoPlacement:e,dynamicElkFields:y}}}e(7129);var ti=e(5742),ii=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ei=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},si=function(t,i){return function(e,s){i(e,s,t)}};let ni=class{constructor(t,i,e,s,n,r,o,a,h,c){this.cl=t,this.$L=i,this.lB=e,this.aR=s,this.cR=n,this.su=r,this.dR=o,this.Qu=a,this.Yd=h,this.lR=c,this.Ui=[],this.mB(),this.eB(),this.uR()}destroy(){(0,A.i)(this.Ui),this.aR.destroy(),this.cR.destroy()}eB(){this.Ui.push(this.su.adClick.subscribe((t=>{this.pR(t)})),this.su.adImpression.subscribe((t=>{this.fR(t)})),this.su.adInView.subscribe((t=>{this.vR(t)})),this.su.adQuartile.subscribe((t=>{this.mR(t)})),this.su.heavyAd.subscribe((t=>{this.gR(t)})),this.su.auctionInformation.subscribe((t=>{this.Lb(t)})),this.su.adBidTracking.subscribe((t=>{this.yR(t)})))}mB(){this.Ui.push(this.$L.sessionTimeElapsed.subscribe((t=>{this.bR(t)})),this.$L.sessionRendered.pipe((0,w.q)(1)).subscribe((t=>{this.IR(t)})),this.$L.sessionView.subscribe((()=>{this.PR()})),this.$L.sessionAdBlocked.subscribe((t=>{this.wR(t)})),this.$L.adOpportunity.subscribe((t=>{this.AR(t)})),this.$L.contentStart.pipe((0,w.q)(1)).subscribe((()=>{this.SR()})),this.$L.adsEnabled.pipe((0,w.q)(1)).subscribe((()=>{this.SR()})))}uR(){this.Ui.push(this.lB.mediaView.subscribe((()=>{this._R()})),this.lB.mediaQuartile.subscribe((t=>{this.TR(t)})),this.lB.mediaClick.subscribe((t=>{this.xR(t)})))}SR(){var t,i,e;this.cl.isPlayerStartTracked||(this.cl.isPlayerStartTracked=!0,this.dR.playerStartEvent({trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(this.cl.trackingRequestMeta),pageInsightIndexes:null===(t=qt.k.pageInsights)||void 0===t?void 0:t.insights,customClientEncryptedPrice:null===(e=null===(i=this.lR.bestStandaloneAd)||void 0===i?void 0:i.bid)||void 0===e?void 0:e.customClientEncryptedPrice,dynamicElkFields:{1:ti.f.getCidForElkTracking(),2:`${(0,x.qd)(this.cl.bundleLoadTimestamp)}`}}))}gR(t){const{type:i,advertiserLineItemId:e,dynamicElkFields:s}=t,n=Object.assign(Object.assign({},s),{1:ti.f.getCidForElkTracking()});this.dR.heavyAdEvent({trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(this.cl.trackingRequestMeta),type:i,advertiserLineItemId:e,dynamicElkFields:n})}yR(t){var i;const e=dt.EN.fromProtoGDPRConsentMode(this.Yd.gdprConsentMode),s=null===(i=t.postbidList.find((t=>t.panorama)))||void 0===i?void 0:i.panorama,n=Jt.fromPayloadToTracking(t,this.cl,e,s);this.dR.adBidEvent(n)}bR(t){var i;const{sessionTimeInSeconds:e,timePlayedInSeconds:s,timePlayedInViewInSeconds:n,stayNextButtonsAppearances:r,mediaId:o,mediaPlayTime:a,mediaPlayInViewTime:h}=t,{trackingRequestMeta:c}=this.cl;this.dR.sessionTimeEvent({trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(c),sessionTimePassedSinceLastTracking:e,secondsPlayedSinceLastTracking:s,secondsPlayedInViewSinceLastTracking:n,pageInsightIndexes:null===(i=qt.k.pageInsights)||void 0===i?void 0:i.insights,secondsMediaPlayedSinceLastTracking:a,secondsMediaPlayedInViewSinceLastTracking:h,mediaId:o,stayNextButtonsAppearances:r})}IR(t){var i;if(this.cl.isSessionRenderTracked)return;this.cl.isSessionRenderTracked=!0;const e=Ut.d5,{width:s,height:n}=this.cl.playerDimensions,{isBannerBlocked:r,sdkVersion:o,integrationType:a}=t,h={7:ti.f.getCidForElkTracking(),9:`${(0,x.qd)(this.cl.bundleLoadTimestamp)}`};(0,R.QM)(o)&&(h[3]=`${o}`),this.dR.sessionRenderEvent({playerHeight:n,playerWidth:s,isAdBlockerUsed:r,bundleName:e,dynamicElkFields:h,integrationType:a,trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(this.cl.trackingRequestMeta),pageInsightIndexes:null===(i=qt.k.pageInsights)||void 0===i?void 0:i.insights})}PR(){var t;this.cl.isSessionViewTracked=!0;const i={9:ti.f.getCidForElkTracking()};this.dR.sessionInViewEvent({trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(this.cl.trackingRequestMeta),pageInsightIndexes:null===(t=qt.k.pageInsights)||void 0===t?void 0:t.insights,dynamicElkFields:i})}_R(){const{mediaId:t,insights:i}=this.cl.currentMediaMetadata;this.dR.mediaInViewEvent({trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(this.cl.trackingRequestMeta),mediaId:t||"",insightIndexes:i||[]})}TR(t){const{mediaId:i,insights:e,sentimentAnalysis:s}=this.cl.currentMediaMetadata,{quartile:n}=t;this.dR.mediaQuartileEvent({trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(this.cl.trackingRequestMeta),sentimentAnalysis:s?dt.XE.fromProtoGetSentimentAnalysis(s):void 0,mediaId:i,quartile:n,insightIndexes:e})}xR(t){const i=Qt.fromPayloadToTracking(t,this.cl);this.dR.mediaClickEvent(i)}Lb(t){this.dR.auctionInformationEvent(t)}fR(t){var i,e;const s=(null===(i=this.Qu)||void 0===i?void 0:i.remainingAdsDuration)?Math.round((null===(e=this.Qu)||void 0===e?void 0:e.remainingAdsDuration)/L.s_):void 0,n=t.dynamicElkFields;n&&(0,R.$K)(s)&&(n[25]=`${s}`);const r=zt.fromPayloadToTracking(Object.assign(Object.assign({},t),{dynamicElkFields:n}),this.cl);this.dR.adImpressionEvent(r)}vR(t){const i=Wt.fromPayloadToTracking(t,this.cl);this.dR.adInViewEvent(i)}mR(t){const i=Gt.fromPayloadToTracking(t,this.cl);this.dR.adQuartileEvent(i)}pR(t){const i=Ht.fromPayloadToTracking(t,this.cl);this.dR.adClickEvent(i)}AR(t){var i;const{trackingRequestMeta:e,isFirstAdOpportunityElapsedTimeTracked:s,bundleLoadTimestamp:n}=this.cl,{playerWidth:r,opportunityId:o,adBreak:a}=t;this.cl.prefetchDistance&&((0,Bt.nF)({message:`Prefetch_success_distance_${this.cl.prefetchDistance}`,level:Bt.D_.INFO,sessionId:this.cl.sessionId},{pacing:5,throttle:1}),this.cl.prefetchDistance=null);const h={1:`${o}`,2:ti.f.getCidForElkTracking()};s||(h[3]=`${(0,x.qd)(n)}`,this.cl.isFirstAdOpportunityElapsedTimeTracked=!0),this.dR.adOpportunityEvent({adBreakType:a,playerWidth:r,dynamicElkFields:h,trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(e),pageInsightIndexes:null===(i=qt.k.pageInsights)||void 0===i?void 0:i.insights})}wR(t){const{adBlockDetectionType:i}=t,e={1:ti.f.getCidForElkTracking()},s={trackingMetadata:dt.yz.fromProtoGetTrackingMetadata(this.cl.trackingRequestMeta),adBlockerDetectionType:i,dynamicElkFields:e};this.dR.sessionAdBlockerEvent(s)}};ni=ii([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),si(0,(0,s.f3)(p.B)),si(1,(0,s.f3)(m.q)),si(2,(0,s.f3)(f.z)),si(3,(0,s.f3)(u)),si(4,(0,s.f3)(N)),si(5,(0,s.f3)(o.k)),si(6,(0,s.f3)(Vt)),si(7,(0,s.f3)(jt.U)),si(8,(0,s.f3)(Q.c.UserManagerService)),si(9,(0,s.f3)(Q.c.StandaloneService)),ei("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object,Object,Object,Object])],ni);var ri=e(9906);class oi{static boostrapSessionContainer(t,i,e,s,n,r,o,a,h,c,d){const l=ri.h.getSessionChildContainer(t);oi.kR(l,i,e,s,r,o,a,h,c,d);return oi.ER(l,n)}static kR(t,i,e,s,n,r,o,a,h,c){t.register(Q.c.GeneralMetadata,{useValue:Object.assign({},i)}),t.register(Q.c.UserManagerService,{useValue:e}),t.register(Q.c.StandaloneService,{useValue:s}),t.register(Q.c.EventsStorageService,{useValue:n}),t.register(Q.c.GlobalDomUtilsService,{useValue:o}),t.register(Q.c.OmidSettings,{useValue:Object.assign({},r)}),t.register(Q.c.ExternalPrebidJSPermutiveConfig,{useValue:(0,R.$K)(a)?a:{}}),t.register(Q.c.FeatureFlags,{useValue:h}),t.register(Q.c.VideoAdsDurationServiceSettings,{useValue:c})}static ER(t,i){const e=t.resolve(Et.j),s=t.resolve(N),n=t.resolve(m.q),r=t.resolve(f.z);return{trackingResponseService:e,sessionEvents:n,wcagService:t.resolve(ht),mediaEvents:r,generalRepository:t.resolve(p.B),abtTracker:t.resolve(u),adEvents:t.resolve(o.k),sessionTime:s,protoTrackingCallerService:t.resolve(Vt),trackingService:i?void 0:t.resolve(ni)}}}},6095:(t,i,e)=>{"use strict";e.d(i,{U:()=>w});var s=e(6716),n=e(8659),r=e(5226),o=e(6888),a=e(8509),h=e(9357),c=e(9490),d=e(8395),l=e(4065),u=e(9906),p=e(6661),f=e(9607),m=e(9600),g=e(4798),v=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},y=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},b=function(t,i){return function(e,s){i(e,s,t)}};const I=r.O.DEFAULT_MAX_AD_DURATION_PER_VIDEO,P=r.O.MIN_AD_DURATION;let w=class{constructor(t,i,e){this.MR=t,this.LR=i,this.BR=e,this.isAdPlayerInView=!1,this.OI=I*h.s_,this.RR=[],this.OR=new s.x,this.DR=new s.x,this.NR=new s.x,this.VR=!1,this.FR=!1}get remainingAdsDuration(){var t;return null===(t=this.jR)||void 0===t?void 0:t.timeRemaining}get maxAdDurationConsumed(){return this.OR}get canSkipVideo(){return this.NR}get newAdsLimitReached(){return this.DR}startListeningToAdEvents(t){this.$R=t,this.VI(),this.UI()}startListeningToContentEvents(t){this.qR=t,this.HR()}destroy(){var t;(0,m.i)(this.RR),null===(t=this.jR)||void 0===t||t.stop()}getRemainingAdsDurationInMs(){return this.zR()?this.jR?Math.round(this.jR.timeRemaining):I*h.s_:null}$I(t){var i;(0,g.r)(t)&&(this.OI=t*h.s_,null===(i=this.jR)||void 0===i||i.setTimerDuration(this.OI))}VI(){var t;const i=null===(t=this.$R)||void 0===t?void 0:t.subscribe((t=>{var i,e;switch(t.type){case o.fI.AdImpression:this.FR&&this.GR(),this.XR();break;case o.fI.AdPlaying:case a.Y.AdPlayingInView:this.XR();break;case a.Y.AdPlayerOutOfView:this.QR(!1);break;case a.Y.AdPlayerInView:this.QR(!0);break;case o.fI.AdStopped:case o.fI.AdSkipped:case o.fI.AdError:this.NR.next(this.VR),null===(i=this.jR)||void 0===i||i.stop();break;case o.fI.AdVideoComplete:case o.fI.AdClickThru:case o.fI.AdPaused:case o.fI.AdUserClose:null===(e=this.jR)||void 0===e||e.stop()}}));i&&this.RR.push(i)}QR(t){var i;this.isAdPlayerInView=t,t||null===(i=this.jR)||void 0===i||i.stop()}XR(){var t;this.isAdPlayerInView&&(null===(t=this.jR)||void 0===t||t.start())}HR(){var t;const i=null===(t=this.qR)||void 0===t?void 0:t.subscribe((t=>{var i;switch(t.type){case c.T$.NewVideo:this.JR(),null===(i=this.jR)||void 0===i||i.reset(),this.NR.next(!1),this.VR=!1,this.YR(),this.$I(t.durationInS),this.FR=!1;break;case c.T$.DurationUpdate:this.$I(t.durationInS)}}));i&&this.RR.push(i)}YR(){var t,i;null===(t=this.jR)||void 0===t||t.reset(),null===(i=this.jR)||void 0===i||i.setTreshold(P*h.s_)}UI(){const t=u.h.getGlobalContainer().resolve(d.f);this.jR=new l.B(t,this.OI,500),this.jR.setTreshold(P*h.s_);const i=this.jR.onTimeElapsed.subscribe((()=>{this.zR()&&this.OR.next(!0)}));if((0,g.r)(this.BR.skipToNextVideoAfter)){const t=this.jR.onTimeUpdate.subscribe((()=>{var t;if(this.zR()){const i=null===(t=this.jR)||void 0===t?void 0:t.timeRemaining;i&&i<=this.BR.skipToNextVideoAfter*h.s_&&(this.VR=!0)}}));this.RR.push(t)}const e=this.jR.onTresholdReached.subscribe((()=>{this.zR()&&(this.DR.next(!0),this.FR=!0)}));this.RR.push(i,e)}zR(){const t=this.MR.enableAdContentRatioMechanism||this.MR.enableAdContentRatioGuardsMechanism;return this.BR.isMechanismEnabled||t}JR(){if(!this.KR()&&this.OI&&this.jR&&(0,g.$K)(this.jR.timeRemaining)){const t={contentDuration:Math.round(this.OI/h.s_),remainingAdsDuration:Math.round(this.jR.timeRemaining/h.s_)};(0,f.nF)({level:f.D_.INFO,message:"VideoAdsDurationService_Durations",exception:"",adsContentRatio:t,callStack:""},{pacing:5})}}GR(){var t;(0,f.nF)({level:f.D_.WARN,message:"VideoAdsDurationService_ImpressionAfterTimeConsumed",exception:"yielded impression after duration was consumed",sessionId:null===(t=this.LR)||void 0===t?void 0:t.sessionId},{extraLogsPercentage:100})}KR(){var t,i,e;return(null===(t=this.jR)||void 0===t?void 0:t.timeRemaining)===(null===(i=this.jR)||void 0===i?void 0:i.timerDuration)&&(null===(e=this.jR)||void 0===e?void 0:e.timerDuration)===I*h.s_}};w=v([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped),b(0,(0,n.f3)(p.c.FeatureFlags)),b(1,(0,n.f3)(p.c.GeneralMetadata)),b(2,(0,n.f3)(p.c.VideoAdsDurationServiceSettings)),y("design:paramtypes",[Object,Object,Object])],w)},6628:(t,i,e)=>{"use strict";e.d(i,{A:()=>h,W:()=>c});var s=e(7945),n=e(9791),r=e(51),o=e(4798);function a(t){const i=(0,r.Ph)("cnxEnv",(0,n.pE)(window).topFrame.location.href);return(0,o.QM)(i)?`//cd-${i}.${t}`:`//cds.${t}`}function h(t){return`${a(t)}/p/${s.g.version}/`}function c(t){return`${a(t)}/a/`}},8657:(t,i,e)=>{"use strict";var s;e.d(i,{o:()=>s}),function(t){t.connatix="connatix.com",t.elements="elements.video"}(s||(s={}))},8041:(t,i,e)=>{"use strict";e.d(i,{oM:()=>c,d5:()=>u,q8:()=>d});var s=e(8657),n=e(3020),r=e(9607);function o(t){return t&&(0,n.NN)(t)?t.src:((0,r.nF)({message:"Prerender_Elements_getBundleDomain_no_currentScript",level:r.D_.CRITICAL}),null)}var a=e(5530),h=e(4798);const c=function(t){const i=o(t);return(null==i?void 0:i.includes(s.o.elements))?s.o.elements:(null==i?void 0:i.includes(s.o.connatix))?s.o.connatix:((0,r.nF)({message:"Prerender_Elements_getBundleDomain_unkown_src",level:r.D_.CRITICAL}),null)}(window.document.currentScript),d=(l=o(window.document.currentScript),(0,h.QM)(l)?l.includes(a.b.Omid)?a.b.Omid:l.includes(a.b.Standalone)?a.b.Standalone:a.b.Web:null);var l;const u=function(t){const i=o(t),e=null==i?void 0:i.match(/([^/]+\.js)/);return e?e[1]:null}(window.document.currentScript)},5530:(t,i,e)=>{"use strict";var s;e.d(i,{b:()=>s}),function(t){t.Web="",t.Omid="omid",t.Standalone="standalone"}(s||(s={}))},7107:(t,i,e)=>{"use strict";e.d(i,{B:()=>m});var s=e(8659),n=e(2979),r=e(9005),o=e(6568),a=e(7945),h=e(9490),c=e(6027),d=e(6661),l=e(4798),u=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},p=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},f=function(t,i){return function(e,s){i(e,s,t)}};let m=class{constructor(t){this.LR=t,this.ZR={},this.tO={height:0,width:0},this.iO=!1,this.eO=!1,this.sO=!1,this.nO=!1,this.hO=!1,this.aO=!1,this.lO=!1,this.uO=o.e.Unknown,this.Ww=h.Ez.StoppedState,this.pO=r.Q.Unknown,this.fO=null,this.SL=!1,this.vO=!1}get trackingRequestMeta(){return{userId:this.userId,playerId:this.playerId,geo:this.geoLocation,browser:this.browser,version:a.g.version,sessionId:this.sessionId,clientAb0:c.e.clientAb0,clientAb1:c.e.clientAb1,clientAb2:c.e.clientAb2,clientAb3:c.e.clientAb3,clientAb4:c.e.clientAb4,clientAb5:c.e.clientAb5,serverAb0:(0,l.hj)(this.LR.serverAb0)?this.LR.serverAb0:c.e.serverAb0,serverAb1:c.e.serverAb1,pageUrl:this.pageUrl,bundleId:this.bundleId,customParam1:this.customParam1,customParam2:this.customParam2,customParam3:this.customParam3,customParam4:this.customParam4,customParam5:this.customParam5,bundleAbId:this.bundleAbId,bundlePart:this.bundlePart,abTestId:this.abTestId,shouldTrackAllRequests:this.vO,implementationType:this.implementationType,isPageInFocus:this.isPageInFocus,iiqEnabledAB:n.s.IIQ_ENABLED_AB,iiqGroupAB:n.s.IIQ_GROUP_AB,isIdentityEnhanced:this.SL}}get canTrackAllRequests(){return this.vO}get implementationType(){return this.LR.implementationType}get playerId(){return this.LR.playerId}get geoLocation(){return this.LR.geoLocation}get browser(){return this.LR.browser}get sessionId(){return this.LR.sessionId}get pageUrl(){return this.LR.pageUrl}get bundleId(){return this.LR.bundleId}get bundleAbId(){return this.LR.bundleAbId}get bundlePart(){return this.LR.bundlePart}get customParam1(){return this.LR.customParam1}get customParam2(){return this.LR.customParam2}get customParam3(){return this.LR.customParam3}get customParam4(){return this.LR.customParam4}get customParam5(){return this.LR.customParam5}get abTestId(){return this.LR.abTestId}get isExplorationMode(){return this.LR.isExplorationMode}get lineItemAbTestInformation(){return this.LR.lineItemAbTestInformation}get hasGdprConsentPayload(){return this.iO}set hasGdprConsentPayload(t){this.iO=t}get playerDimensions(){return this.tO}set playerDimensions(t){this.tO=t}get currentMediaMetadata(){return this.ZR}set currentMediaMetadata(t){this.ZR=t}get isSessionRenderTracked(){return this.sO}set isSessionRenderTracked(t){this.sO=t}get isPlayerStartTracked(){return this.eO}set isPlayerStartTracked(t){this.eO=t}get isSessionViewTracked(){return this.nO}set isSessionViewTracked(t){this.nO=t}get isFirstAdOpportunityElapsedTimeTracked(){return this.hO}set isFirstAdOpportunityElapsedTimeTracked(t){this.hO=t}get isFirstAdImpressionElapsedTimeTracked(){return this.aO}set isFirstAdImpressionElapsedTimeTracked(t){this.aO=t}get userId(){return this.LR.userId}set userId(t){this.LR.userId=t}set region(t){this.mO=t}get region(){return this.mO}get isIdentityEnhanced(){return this.SL}set isIdentityEnhanced(t){this.SL=t}get isPageInFocus(){return this.lO}set isPageInFocus(t){this.lO=t}get iasSegmentCodes(){return this.LR.iasSegmentCodes}get amazonTamPubId(){return this.LR.amazonTamPubId}get liveRampPubId(){return this.LR.liveRampPubId}get isInApp(){return(0,l.QM)(this.LR.bundleId)}get playerType(){return this.uO}set playerType(t){this.uO=t}get playerState(){return this.Ww}set playerState(t){this.Ww=t}get playerEnvironment(){return this.pO}set playerEnvironment(t){this.pO=t}get videoPlacement(){return this.gO}set videoPlacement(t){this.gO=t}set prefetchDistance(t){this.fO=t}get prefetchDistance(){return this.fO}get serverAb0(){return this.LR.serverAb0}get bundleLoadTimestamp(){return this.LR.bundleLoadTimestamp}get revSharePercentage(){return this.LR.revSharePercentage}};m=u([(0,s.b2)(),(0,s.Yn)(s.Fw.ContainerScoped),f(0,(0,s.f3)(d.c.GeneralMetadata)),p("design:paramtypes",[Object])],m)},2493:(t,i,e)=>{"use strict";e.d(i,{l:()=>y});var s=e(6716),n=e(8659),r=e(289),o=e(1828),a=e(9791),h=e(9607);class c{constructor(t,i,e){this.nr=t,this.yO=i,this.bO=e,this.IO=[],this.PO=r.ProtoIdentityProviderGroupEnum.None,this.wO=new s.x,this.PO=this.AO()}get onUserIdReceived(){return this.wO.asObservable()}static isSupported(t){return t.isLocalStorageEnabled}init(){this.yO.isLiveIntentInitTimestampExpired()&&(this.SO(),this.yO.cacheLiveIntentInitExpiryTimestamp())}getProtoData(){return 0===this.IO.length&&this._O(),{group:this.PO,identityProviderEidsList:this.PO===r.ProtoIdentityProviderGroupEnum.A?this.IO:[],identityPartnerEnum:r.ProtoIdentityPartnerEnum.LiveIntent}}isLineItemEligibleForReporting(){return!0}canUseWinUrl(){return!1}SO(){const t=new o.o(this.nr,this.bO.sessionId),i={container:window.document.body,customHtml:"<script id='liveintent-cnx-script' type='text/javascript' src='https://d-code.liadm.com/did-003y.min.js'><\/script>",customIframeAttributes:[{key:"style",value:"display: none;"}]};t.loadIframe(i).catch((t=>{(0,h.nF)({message:"LiveIntentService_iframe_not_loaded",level:h.D_.WARN,exception:(0,a.W$)(t).message})}))}_O(){const t=this.yO.getLiveIntentData();t&&this.TO(t)}TO(t){for(const[i,e]of Object.entries(t))this.IO.push({source:i,ids:[e]})}AO(){return(0,a.Vm)([95,5])?r.ProtoIdentityProviderGroupEnum.B:r.ProtoIdentityProviderGroupEnum.A}}e(2979),e(3141),e(6027),e(6153),e(5650),e(4798);var d,l=e(7298),u=e(1102),p=e(6661),f=e(9600),m=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},g=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},v=function(t,i){return function(e,s){i(e,s,t)}};let y=class{constructor(t,i,e){this.nr=t,this.xO=i,this.yO=e,this.kO=void 0,this.Ui=[],this.wO=new s.x}get onUserIdReceived(){return this.wO.asObservable()}init(t){var i;t&&(this.CO(),this.EO(),null===(i=this.kO)||void 0===i||i.init())}getTrackingData(t,i=!1){if(!this.isLineItemEligibleForReporting(t))return;const e=this.getProtoData();return e.hasIIQLookup=i,u.km.fromProtoIdentityProviderData(e)}getProtoData(){var t;const i={group:r.ProtoIdentityProviderGroupEnum.None,identityProviderEidsList:[],identityPartnerEnum:r.ProtoIdentityPartnerEnum.None};return(null===(t=this.kO)||void 0===t?void 0:t.getProtoData())||i}isLineItemEligibleForReporting(t){var i;return(null===(i=this.kO)||void 0===i?void 0:i.isLineItemEligibleForReporting(t))||!1}canUseWinUrl(){var t;return(null===(t=this.kO)||void 0===t?void 0:t.canUseWinUrl())||!1}reportExternalWin(t){var i,e;null===(e=null===(i=this.kO)||void 0===i?void 0:i.reportExternalWin)||void 0===e||e.call(i,t)}getAdxId(t){var i,e;return null===(e=null===(i=this.kO)||void 0===i?void 0:i.getAdxId)||void 0===e?void 0:e.call(i,t)}destroy(){(0,f.i)(this.Ui)}MO(t){return this.xO.supportedIdentityPartners.includes(t)}CO(){{if(!this.MO(r.ProtoIdentityPartnerEnum.LiveIntent)||!c.isSupported(this.yO))return;const t={sessionId:this.xO.sessionId};this.kO=new c(this.nr,this.yO,t)}}EO(){var t,i;const e=null===(i=null===(t=this.kO)||void 0===t?void 0:t.onUserIdReceived)||void 0===i?void 0:i.subscribe((t=>{this.wO.next(t)}));e&&this.Ui.push(e)}};y=m([(0,n.ri)(),v(0,(0,n.f3)(p.c.GlobalDomUtilsService)),v(1,(0,n.f3)(p.c.IdentityProviderSettings)),v(2,(0,n.f3)(l.n)),g("design:paramtypes",[Object,Object,"function"==typeof(d=void 0!==l.n&&l.n)?d:Object])],y)},2979:(t,i,e)=>{"use strict";e.d(i,{s:()=>n});var s=e(9791);class n{}n.IIQ_ENABLED_AB=(0,s.Vm)([5,95]),n.IIQ_GROUP_AB=0},3141:(t,i,e)=>{"use strict";var s,n;e.d(i,{C:()=>s,T:()=>n}),function(t){t[t.IDFV=1]="IDFV",t[t.IntentIqFirstPartyId=2]="IntentIqFirstPartyId",t[t.IDFA=4]="IDFA"}(s||(s={})),function(t){t[t.Prebid=1]="Prebid",t[t.Amazon=2]="Amazon",t[t.Google=3]="Google",t[t.OpenRTB=4]="OpenRTB"}(n||(n={}))},2404:(t,i,e)=>{"use strict";e.d(i,{m:()=>p});var s,n=e(8659),r=e(2370),o=e(8983),a=e(5356),h=e(3020),c=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};const d="Enter",l="Escape",u="Tab";let p=s=class{constructor(){this.LO=void 0,this.BO=t=>{const i=t.target;if(!(0,r.ev)(i))switch(t.code){case d:this.RO(i);break;case l:this.OO(i);break;case u:this.DO(i,t.shiftKey?"firstChild":"lastChild")}}}start(t){t.classList.contains("cnx-playspace-container")||(this.LO=t,this.NO(t))}destroy(){var t,i;null===(t=this.LO)||void 0===t||t.removeEventListener("keydown",this.BO),null===(i=this.LO)||void 0===i||i.removeEventListener("keyup",s.VO)}NO(t){t.addEventListener("keydown",this.BO),t.addEventListener("keyup",s.VO)}OO(t){const i=t.closest(".cnx-menu-popup"),e=this.FO(i);null==e||e.setAttribute("aria-expanded","false"),(0,r.P7)(e),null==e||e.focus()}RO(t){var i;if(!t)return;const e=t.getAttribute("aria-controls");null===(i=this.LO)||void 0===i||i.addEventListener("cnx-menu-opened",(()=>{var i;const s=null===(i=this.LO)||void 0===i?void 0:i.querySelector(`[data-id="${e}"]`),n=(0,r.Be)(t);(0,r.HO)(s,n)}),{once:!0}),(0,r.sZ)(t)?(0,r.ih)(t):(0,r.P7)(t)}DO(t,i){var e;const s=t.closest("[data-id]");if(s&&t===(null===(e=t.parentElement)||void 0===e?void 0:e[i])){const t=this.FO(s);(0,r.P7)(t),null==t||t.focus()}this.LO&&(0,a.mb)(this.LO)&&(0,h.cn)(this.LO,o.s6.AdUserInteraction)}FO(t){var i;return null===(i=this.LO)||void 0===i?void 0:i.querySelector(`[aria-controls="${null==t?void 0:t.getAttribute("data-id")}"]`)}};p.VO=t=>{const i=t.target;(0,r.ev)(i)||t.code===u&&(0,h.cn)(i,o.s6.TabFocus)},p=s=c([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],p)},2370:(t,i,e)=>{"use strict";e.d(i,{Be:()=>p,HO:()=>h,P7:()=>c,ev:()=>u,ih:()=>d,sZ:()=>l});var s=e(8983),n=e(3020);const r="lit-keyboard-navigation-access";function o(t){var i;const e=function(t){return t?(0,n.GF)(t)||(0,n.pv)(t,"cnx-submenu-title-option")?e(t.nextElementSibling):t:null},r=null===(i=t.getElementsByClassName("cnx-cm-item--click"))||void 0===i?void 0:i[0],o=e(r);o&&((0,n.cn)(o,s.s6.TabFocus),null==o||o.focus({preventScroll:!0}))}const a=t=>o(t.target);function h(t,i=!1){if(!t)return;if(t.removeEventListener("cnx-mod-scrollbar",a),i)return t.addEventListener("cnx-mod-scrollbar",a,{once:!0}),void o(t);const e=t.querySelector(".cnx-cm-items:first-of-type");e&&o(e)}function c(t){t&&(t.dispatchEvent(new MouseEvent("mousedown")),t.dispatchEvent(new MouseEvent("mouseup")))}function d(t){t&&t.dispatchEvent(new MouseEvent("click"))}function l(t){return(0,n.pv)(t,s.p0.CloseButton)}function u(t){return(null==t?void 0:t.getAttribute("data-id"))===r}function p(t){return(0,n.pv)(t,s.Ng.SubmenuOption)}},9209:(t,i,e)=>{"use strict";var s,n;e.d(i,{Pl:()=>r,Ys:()=>s,d:()=>n}),function(t){t[t.Space=0]="Space",t[t.KeyM=1]="KeyM",t[t.KeyF=2]="KeyF",t[t.KeyC=3]="KeyC",t[t.KeyN=4]="KeyN",t[t.KeyP=5]="KeyP",t[t.ArrowUp=6]="ArrowUp",t[t.ArrowDown=7]="ArrowDown",t[t.ArrowRight=8]="ArrowRight",t[t.ArrowLeft=9]="ArrowLeft",t[t.Digit0=10]="Digit0",t[t.Digit1=11]="Digit1",t[t.Digit2=12]="Digit2",t[t.Digit3=13]="Digit3",t[t.Digit4=14]="Digit4",t[t.Digit5=15]="Digit5",t[t.Digit6=16]="Digit6",t[t.Digit7=17]="Digit7",t[t.Digit8=18]="Digit8",t[t.Digit9=19]="Digit9",t[t.Enter=20]="Enter"}(s||(s={})),function(t){t[t.togglePlay=0]="togglePlay",t[t.toggleMute=1]="toggleMute",t[t.toggleFullscreen=2]="toggleFullscreen",t[t.toggleCaptions=3]="toggleCaptions",t[t.increaseVolume=4]="increaseVolume",t[t.decreaseVolume=5]="decreaseVolume",t[t.seekForward=6]="seekForward",t[t.seekBackward=7]="seekBackward",t[t.seek0Percent=8]="seek0Percent",t[t.seek10Percent=9]="seek10Percent",t[t.seek20Percent=10]="seek20Percent",t[t.seek30Percent=11]="seek30Percent",t[t.seek40Percent=12]="seek40Percent",t[t.seek50Percent=13]="seek50Percent",t[t.seek60Percent=14]="seek60Percent",t[t.seek70Percent=15]="seek70Percent",t[t.seek80Percent=16]="seek80Percent",t[t.seek90Percent=17]="seek90Percent",t[t.nextVideo=18]="nextVideo",t[t.previousVideo=19]="previousVideo",t[t.callToAction=20]="callToAction"}(n||(n={}));const r={[s.Space]:n.togglePlay,[s.KeyM]:n.toggleMute,[s.KeyF]:n.toggleFullscreen,[s.KeyC]:n.toggleCaptions,[s.ArrowUp]:n.increaseVolume,[s.ArrowDown]:n.decreaseVolume,[s.ArrowRight]:n.seekForward,[s.ArrowLeft]:n.seekBackward,[s.Digit0]:n.seek0Percent,[s.Digit1]:n.seek10Percent,[s.Digit2]:n.seek20Percent,[s.Digit3]:n.seek30Percent,[s.Digit4]:n.seek40Percent,[s.Digit5]:n.seek50Percent,[s.Digit6]:n.seek60Percent,[s.Digit7]:n.seek70Percent,[s.Digit8]:n.seek80Percent,[s.Digit9]:n.seek90Percent,[s.KeyN]:n.nextVideo,[s.KeyP]:n.previousVideo,[s.Enter]:n.callToAction}},942:(t,i,e)=>{"use strict";e.d(i,{L:()=>p});var s,n=e(8659),r=e(1828),o=e(6661),a=e(9791),h=e(9607),c=e(4798),d=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},l=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},u=function(t,i){return function(e,s){i(e,s,t)}};let p=s=class{constructor(t){this.nr=t}initIfSupported(t,i){var e,s;const n=Boolean(null===(e=t.players)||void 0===e?void 0:e.some((t=>{var i;return null===(i=t.lineItems)||void 0===i?void 0:i.some((t=>t.isLexiconSupported))}))),r=Boolean(null===(s=t.lineItems)||void 0===s?void 0:s.some((t=>t.isLexiconSupported)));(n||r)&&this.zT(i)}getUids(){var t;return(0,c.$K)(this.UO)&&(null===(t=this.UO[0])||void 0===t?void 0:t.uids.map((t=>t.id)))||[]}zT(t){(0,c.$K)(s.INSTANCE)||(s.INSTANCE=this,this.$O(t))}$O(t){const i=`<script id='lexicon-cnx-script' type='text/javascript' src='${s.LEXICON_SDK_URL}'><\/script>`,e=new r.o(this.nr,t),n={container:window.document.body,customHtml:i,customIframeAttributes:[{key:"style",value:"display: none;"}]};e.loadIframe(n).then((t=>{this.qO(t.iframe.contentWindow)})).catch((t=>{(0,h.nF)({message:"Lexicon_iframe_not_loaded",level:h.D_.WARN,exception:(0,a.W$)(t).message})}))}qO(t){(null==t?void 0:t._33AcrossIdMappingsProvider)&&(this.zO=new t._33AcrossIdMappingsProvider({pid:s.CNX_PID}),this.zO.fetch().then((t=>{this.UO=t})).catch((()=>{(0,h.nF)({message:"LexiconService_lexicon_sdk_fetch_failed",level:h.D_.INFO},{pacing:5})})))}};p.LEXICON_SDK_URL="https://cdn-ima.33across.com/ima.js",p.CNX_PID="0015a00002y7TWTAA2",p=s=d([(0,n.ri)(),u(0,(0,n.f3)(o.c.GlobalDomUtilsService)),l("design:paramtypes",[Object])],p)},7298:(t,i,e)=>{"use strict";e.d(i,{n:()=>p});var s,n=e(8659),r=e(9791),o=e(9607),a=e(1310),h=e(4798),c=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},d=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)};!function(t){t.CACHED_IIQ_IDS="cnx_cii",t.CACHED_USER="cnx_cu_v2",t.CACHED_USER_BY_PANORAMA="cnx_cu_pano",t.CACHED_PANORAM_ID="cnx_pano",t.LIVE_INTENT_IDS="__connatixLIResolveResult",t.LIVE_INTENT_INIT_EXPIRY_TIMESTAMP="__cnxLIInitExpiryTimestamp"}(s||(s={}));const l="tsvzv8mHEU39ZXO5K1QvCRGddISLFNrx",u="BHJChM5nPwTbK3q0Kn5hdunSZYGuvzF6";let p=class{constructor(){try{this.GO=(0,r.pE)(window).topFrame.localStorage}catch(t){(0,o.nF)({message:"LocalStorageService_localStorage_access_denied",level:o.D_.INFO,exception:(0,r.W$)(t).message},{pacing:1,throttle:1})}}get isLocalStorageEnabled(){return(0,h.$K)(this.GO)}cacheLiveIntentInitExpiryTimestamp(){var t;const i=String((0,a.WH)(4));null===(t=this.GO)||void 0===t||t.setItem(s.LIVE_INTENT_INIT_EXPIRY_TIMESTAMP,i)}isLiveIntentInitTimestampExpired(){try{const t=Number(this.getItem(s.LIVE_INTENT_INIT_EXPIRY_TIMESTAMP));return!t||this.WO(t)}catch(t){return(0,o.nF)({message:"LocalStorageService_parsing_LItimestamp",level:o.D_.INFO,exception:(0,r.W$)(t).message},{pacing:1}),!0}}getLiveIntentData(){try{const t=this.getItem(s.LIVE_INTENT_IDS);return t?JSON.parse(t):null}catch(t){return(0,o.nF)({message:"LocalStorageService_parsing_JSON",level:o.D_.INFO,exception:(0,r.W$)(t).message},{pacing:1}),null}}cacheIIQIds(t){this.XO(t,s.CACHED_IIQ_IDS,l)}getIIQIds(){return this.YO(s.CACHED_IIQ_IDS,l)}cacheUser(t){const i={expiryTimestamp:(0,a.XF)(14),user:t};this.XO(i,s.CACHED_USER,u)}cacheUserByPanorama(t){const i={expiryTimestamp:(0,a.XF)(30),userId:t};this.XO(i,s.CACHED_USER_BY_PANORAMA,u)}cachePanoramaId(t){this.XO(t,s.CACHED_PANORAM_ID,u)}getPanoramaId(){return this.YO(s.CACHED_PANORAM_ID,u)}getUserByPanorama(){const t=this.YO(s.CACHED_USER_BY_PANORAMA,u);if(!t)return null;return this.WO(t.expiryTimestamp)?(this.KO(s.CACHED_USER_BY_PANORAMA),null):t.userId}getUser(){const t=this.YO(s.CACHED_USER,u);if(!t)return null;return this.WO(t.expiryTimestamp)?null:t.user}getItem(t){return(0,h.$K)(this.GO)?this.GO.getItem(t):null}WO(t){return t-(0,a.dO)()<0}XO(t,i,e){if(!(0,h.$K)(this.GO))return;const s=(0,r.Ld)(JSON.stringify(t),e);this.GO.setItem(i,s)}YO(t,i){if(!(0,h.$K)(this.GO))return null;const e=this.GO.getItem(t);if(!(0,h.QM)(e))return null;const s=(0,r.j6)(e,i);return JSON.parse(s)}KO(t){var i;null===(i=this.GO)||void 0===i||i.removeItem(t)}};p=c([(0,n.ri)(),d("design:paramtypes",[])],p)},6174:(t,i,e)=>{"use strict";var s;e.d(i,{V:()=>s}),function(t){t[t.None=0]="None",t[t.Linear=1]="Linear",t[t.NonLinear=2]="NonLinear"}(s||(s={}))},9005:(t,i,e)=>{"use strict";var s;e.d(i,{Q:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.InAppSdk=1]="InAppSdk",t[t.InAppReactNative=2]="InAppReactNative",t[t.InAppFlutter=3]="InAppFlutter",t[t.InAppGam=4]="InAppGam",t[t.InAppWebview=5]="InAppWebview",t[t.WebAmp=6]="WebAmp",t[t.WebGamSafeIframe=7]="WebGamSafeIframe",t[t.WebGamFreindlyIframe=8]="WebGamFreindlyIframe",t[t.Web=9]="Web"}(s||(s={}))},6568:(t,i,e)=>{"use strict";var s;e.d(i,{e:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.Video=1]="Video",t[t.Outstream=2]="Outstream",t[t.Live=3]="Live",t[t.Story=4]="Story"}(s||(s={}))},148:(t,i,e)=>{"use strict";e.d(i,{z:()=>a});var s=e(6515),n=e(6716),r=e(8659),o=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let a=class{constructor(){this.mediaPlaybackChanged=new s.X({isPlaying:!1}),this.mediaViewabilityChanged=new s.X({isInView:!1}),this.mediaView=new n.x,this.mediaQuartile=new n.x,this.mediaClick=new n.x,this.mediaTimeUpdate=new n.x,this.newMedia=new n.x,this.newChapter=new n.x}};a=o([(0,r.b2)(),(0,r.Yn)(r.Fw.ContainerScoped)],a)},5027:(t,i,e)=>{"use strict";e.d(i,{n:()=>o});var s=e(8736),n=e(8576),r=e(4798);class o{static getConnectionType(t){if((0,r.$K)(this.CONNECTION_TYPE))return this.CONNECTION_TYPE;const{connection:i}=window.navigator;if(!i)return n.FX.UNKNOWN;const{type:e,effectiveType:o}=i;return e===n.Zv.ETHERNET?n.FX.ETHERNET:e===n.Zv.WIFI?n.FX.WIFI:e===n.Zv.CELLULAR?this.ZO(o):(0,r.$K)(e)||t!==s.VB.Desktop?n.FX.UNKNOWN:n.FX.WIFI}static ZO(t){switch(t){case n.Oc.CELLULAR_2G:case n.Oc.CELLULAR_SLOW_2G:return n.FX.CELLULAR_2G;case n.Oc.CELLULAR_3G:return n.FX.CELLULAR_3G;case n.Oc.CELLULAR_4G:return n.FX.CELLULAR_4G;default:return n.FX.CELLULAR_UNKNOWN}}}},1280:(t,i,e)=>{"use strict";e.d(i,{G:()=>D});var s,n=e(6716),r=e(6515),o=e(5196),a=e(8659),h=e(3);!function(t){t[t.OnAdLoaded=0]="OnAdLoaded",t[t.OnAdSessionStart=1]="OnAdSessionStart"}(s||(s={}));var c,d=e(1783);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(c||(c={}));class l{constructor(){this.tD=new n.x}computeState(t){const i=this.iD(t);this.eD&&this.eD!==i&&this.eD!==c.Fullscreen&&this.tD.next(i),this.eD=i,this.sD||i!==c.Normal||(this.sD={name:i,dimensions:t,area:t.height*t.width})}setPlayerState(t,i){this.eD&&this.eD!==t&&!i&&this.tD.next(t),this.eD=t}get playerStateChanged(){return this.tD.asObservable()}get currentState(){return this.eD}iD(t){if(!this.sD)return c.Normal;const{area:i}=this.sD,e=t.width*t.height;switch(!0){case e===i:return c.Normal;case 0===e:return c.Minimized;case i<e:return c.Expanded;case i>e:return c.Collapsed;default:return this.eD}}}var u=e(1703),p=e(4772),f=e(9607),m=e(9600),g=e(4798);class v{constructor(t,i,e,s,r,o,a){this.nD=t,this.PT=i,this.rD=e,this.su=s,this.lB=r,this.oD=o,this.us=a,this.hD=new n.x,this.aD=new h.t,this.Ui=[],this.cD=!0,this.dD={[p.Z.AdError]:()=>this.Nv(),[p.Z.AdImpression]:()=>this.Vv(),[p.Z.AdVideoStart]:t=>this.lD(null==t?void 0:t.adVideoStartMetadata),[p.Z.AdVideoFirstQuartile]:()=>this.pD(),[p.Z.AdVideoMidpoint]:()=>this.fD(),[p.Z.AdVideoThirdQuartile]:()=>this.vD(),[p.Z.AdVideoComplete]:()=>this.mD(),[p.Z.VolumeChange]:t=>this.gD(null==t?void 0:t.volume),[p.Z.AdPause]:()=>this._w(),[p.Z.AdPlay]:()=>this.yD(),[p.Z.AdSkipped]:()=>this.bD(),[p.Z.AdClickThru]:()=>this.ID(),[p.Z.AdInteraction]:()=>this.PD(),[p.Z.AdExpandedChange]:()=>this.wD(),[p.Z.AdLoaded]:t=>this.Ds(null==t?void 0:t.adLoadedMetadata),[p.Z.PlayerResized]:t=>this.AD(null==t?void 0:t.playerDimensionsMetadata),[p.Z.OnEnterFullscreen]:()=>this.SD(),[p.Z.OnExitFullscreen]:()=>this._D(),[p.Z.PlayerCollapsed]:()=>this.TD(),[p.Z.PlayerExpanded]:t=>this.AD(null==t?void 0:t.playerDimensionsMetadata),[p.Z.AdStopped]:()=>this.xD(),[p.Z.Destroy]:()=>this.destroy()},this.kD=t=>{try{const i=this.dD[t.name];if(!i)return;i(t.metadata)}catch(t){(0,f.nF)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t?JSON.stringify(t):void 0,level:f.D_.WARN,sessionId:this.us})}},this.CD=new l,this.ED(),this.PT.subscribe(this.kD),this.Ui.push(this.CD.playerStateChanged.subscribe((t=>{this.LD(t)}))),this.Ds(this.PT.adLoadedMetadata)}get adSessionFinished(){return this.hD.asObservable()}get adSessionStart(){return this.aD.asObservable()}destroy(){this.su=null,this.lB=null,this.rD=null,this.PT.unsubscribe(this.kD),(0,m.i)(this.Ui)}LD(t){var i;t&&(null===(i=this.lB)||void 0===i||i.playerStateChange(t))}xD(){this.hD.next()}Nv(){var t;null===(t=this.rD)||void 0===t||t.error(d.jI.Video,p.Z.AdError),this.hD.next()}Vv(){var t;null===(t=this.su)||void 0===t||t.impressionOccurred();const i=this.CD.currentState;i!==c.Normal&&this.LD(i)}lD(t){var i;t&&(0,g.hj)(null==t?void 0:t.duration)&&(0,g.hj)(null==t?void 0:t.mediaPlayerVolume)?(this.BD(t.mediaPlayerDimensions),null===(i=this.lB)||void 0===i||i.start(t.duration,t.mediaPlayerVolume)):(0,f.nF)({message:"OmidVideoHandler_mediaEvent_start",level:f.D_.WARN,sessionId:this.us})}pD(){var t;null===(t=this.lB)||void 0===t||t.firstQuartile()}fD(){var t;null===(t=this.lB)||void 0===t||t.midpoint()}vD(){var t;null===(t=this.lB)||void 0===t||t.thirdQuartile()}mD(){var t;null===(t=this.lB)||void 0===t||t.complete()}gD(t){var i;(0,g.hj)(t)?null===(i=this.lB)||void 0===i||i.volumeChange(t):(0,f.nF)({message:"OmidVideoHandler_mediaEvent_volume",level:f.D_.WARN,sessionId:this.us})}_w(){var t;null===(t=this.lB)||void 0===t||t.pause()}yD(){var t;null===(t=this.lB)||void 0===t||t.resume()}bD(){var t;null===(t=this.lB)||void 0===t||t.skipped(),this.hD.next()}ID(){var t;null===(t=this.lB)||void 0===t||t.adUserInteraction(d.fi.Click)}PD(){var t;null===(t=this.lB)||void 0===t||t.adUserInteraction(d.fi.InvitationAccept)}wD(){var t;null===(t=this.lB)||void 0===t||t.adUserInteraction(d.fi.InvitationAccept)}Ds(t){var i;if(!this.PT.adStateMetadata)return void(0,f.nF)({message:"OmidVideoHandler_adStateChangedMetadata.state",level:f.D_.WARN,sessionId:this.us});const e=new Map([[u.I.MidRoll,d.yA.MidRoll],[u.I.PostRoll,d.yA.PostRoll],[u.I.PreRoll,d.yA.PreRoll],[u.I.Standalone,d.yA.Standalone]]);this.RD=new this.nD.VastProperties(null==t?void 0:t.isSkippable,null==t?void 0:t.skipOffset,null==t?void 0:t.isAutoPlay,e.get(this.PT.adStateMetadata.state)),this.oD===s.OnAdLoaded&&(null===(i=this.su)||void 0===i||i.loaded(this.RD))}AD(t){t?this.BD({height:t.height,width:t.width}):(0,f.nF)({message:"OmidVideoHandler_playerDimensionsMetadata",level:f.D_.WARN,sessionId:this.us})}SD(){this.OD(c.Fullscreen)}_D(){this.OD(c.Fullscreen,this.cD)}TD(){this.OD(c.Minimized)}BD(t){(0,g.hj)(t.width)&&(0,g.hj)(t.height)&&t&&this.CD.computeState(t)}OD(t,i=!1){this.CD.setPlayerState(t,i)}ED(){var t;null===(t=this.rD)||void 0===t||t.registerSessionObserver((t=>{t.type===d.Ve.SessionStart?this.DD(t):t.type===d.Ve.SessionError&&(0,f.nF)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:f.D_.WARN,sessionId:this.us},{throttle:1,shouldSendMaxLog:!1})}))}DD(t){var i,e,n;t.data.impressionType===d.sm.DefinedByJavascript&&(null===(i=this.rD)||void 0===i||i.setImpressionType(d.sm.BeginToRender)),t.data.creativeType===d.qZ.DefinedByJavascript&&(null===(e=this.rD)||void 0===e||e.setCreativeType(d.qZ.Video)),this.RD&&this.oD===s.OnAdSessionStart&&(null===(n=this.su)||void 0===n||n.loaded(this.RD)),this.aD.next()}}var y=e(2728);class b{constructor(t,i){this.ND=t,this.us=i,this.VD=window,this.FD=!1,this.jD=new n.x,this.UD=new n.x,this.FD=y.$.shouldUseOmsdkForAds(this.ND)}get omidAdSessionStart(){return this.jD.asObservable()}get omidAdSessionFinish(){return this.UD.asObservable()}isSupported(){return this.FD}getOMSDKVersion(){return this.ND}getLoadingStrategy(){return s.OnAdSessionStart}getServiceWindow(){return this.VD}startSession(){this.jD.next()}finishSession(){this.UD.next()}resetSession(){this.jD.next()}finishPlayerSession(){return new Promise((t=>{this.UD.next(),setTimeout((()=>{t()}),1e3)}))}createPartner(t){this.$D=new t.Partner(d.cv,this.ND)}createNewContext(t,i){if(this.$D)return new t.Context(this.$D,i);(0,f.nF)({message:"OmsdkInAppImplementation_no_partner",level:f.D_.WARN,sessionId:this.us})}}var I=e(1828),P=e(6153),w=e(384),S=e(3020);const A="omsdk-connatix-web-service-iframe";class x{constructor(t,i,e,s,n,r){this.Sf=t,this.us=i,this.zD=e,this.GD=s,this.WD=n,this.nr=r,this.isSupported()&&this.JD()}getOMSDKVersion(){return d.rF}isSupported(){return!(this.zD||this.GD&&this.WD!==w.K.Friendly)}getServiceWindow(){return this.VD}getLoadingStrategy(){return s.OnAdLoaded}startSession(t){null==t||t.setCreativeType(d.qZ.Video),null==t||t.setImpressionType(d.sm.BeginToRender),null==t||t.start()}finishSession(t){null==t||t.finish()}finishPlayerSession(){return Promise.resolve()}createPartner(t){this.$D=new t.Partner(d.cv,d.rF)}createNewContext(t,i){if(this.$D)return new t.Context(this.$D,i,this.Sf);(0,f.nF)({message:"OmsdkWebImplementation_no_partner",level:f.D_.WARN,sessionId:this.us})}JD(){var t;const i=(0,S.rI)(A,window);if(i)return void(this.VD=null===(t=i.contentWindow)||void 0===t?void 0:t.window);const e=`<script id='omsdk-connatix-webservice-script' type='text/javascript'\n            src='${P.n.endPoints.assets.plugins.omsdkWebService}'><\/script>`;this.YD=new I.o(this.nr,this.us);const s={container:this.GD?this.nr.global.document.body:window.document.body,customHtml:e,customIframeAttributes:[{key:"style",value:"display: none;"}],iframeId:A};this.YD.loadIframe(s).then((()=>{var t,i;this.VD=null===(i=null===(t=this.YD)||void 0===t?void 0:t.iframe.contentWindow)||void 0===i?void 0:i.window})).catch((()=>{(0,f.nF)({message:"OMSDKService_error_loading_WebServiceIframe",level:f.D_.WARN,sessionId:this.us})}))}}var _,T=e(9357),C=(e(7129),e(4646)),k=e(6661),E=e(5650),M=e(6578),L=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},R=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},B=function(t,i){return function(e,s){i(e,s,t)}},O=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};let D=_=class{constructor(t,i,e){var s,o;this.PT=t,this.nr=i,this.KD=e,this.jD=new n.x,this.UD=new n.x,this.ZD=new r.X(!1),this.iN=new r.X(!1),this.eN=new n.x,this.Ui=[],this.KD.isInAppSdk?(this.nN=new b(this.KD.sdkVersion,this.KD.sessionId),null===(s=this.nN.omidAdSessionStart)||void 0===s||s.subscribe((()=>{this.jD.next()})),null===(o=this.nN.omidAdSessionFinish)||void 0===o||o.subscribe((()=>{this.UD.next()}))):this.nN=new x(this.KD.pageUrl,this.KD.sessionId,this.KD.isInApp,this.KD.isGam,this.KD.gamIframeType,this.nr),this.isOmsdkFullSupport&&this.rN()}get isOmsdkFullSupport(){return this.nN.isSupported()}get omsdkVersion(){return this.nN.getOMSDKVersion()}get omidAdSessionStart(){return this.jD.asObservable()}get omidAdSessionFinish(){return this.UD.asObservable()}get omidResourcesReady(){return this.ZD.asObservable()}get verificationNotExecuted(){return this.eN.asObservable()}get VD(){return this.nN.getServiceWindow()}static Eo(t){const i=t.replace(/\[reason\]/i,"1");M.n.trackPixel(i)}clearPendingProcesses(){(0,m.i)(this.Ui),this.Ui=[],this.ZD.next(!1)}addVerificationNode(t,i){this.clearPendingProcesses();const e=this.iN.asObservable().pipe((0,o.P)((t=>t))).subscribe((()=>{this.iN.next(!1),this.oN().then((()=>this.hN(t,i))).then((()=>{this.ZD.next(!0)})).catch((()=>{this.aN(t)}))}));this.Ui.push(e)}aN(t){t.forEach((t=>{(0,g.$K)(t.trackingEvents)&&(0,E.BZ)(t.trackingEvents)&&t.trackingEvents.filter((t=>"verificationNotExecuted"===t.name)).forEach((t=>{_.Eo(t.uri),this.eN.next()}))})),(0,f.nF)({message:"OMSDKService_verification_not_executed",level:f.D_.INFO,sessionId:this.KD.sessionId},{throttle:1,shouldSendMaxLog:!1}),this.ZD.next(!0)}hN(t,i){return O(this,void 0,void 0,(function*(){if(!(0,g.$K)(this.nD))throw(0,f.nF)({message:"OMSDKService_no_client",level:f.D_.WARN,sessionId:this.KD.sessionId}),new Error("noOmidClient");this.nN.createPartner(this.nD);const e=C.$.getVerificationScriptResources(t,this.nD);if(this.da=this.nN.createNewContext(this.nD,e),!this.da)throw(0,f.nF)({message:"OMSDKService_no_context",level:f.D_.WARN,sessionId:this.KD.sessionId}),new Error("noOmidContext");if(this.da.setVideoElement(i.videoSlot),this.da.setSlotElement(i.slot),!this.VD)throw(0,f.nF)({message:"OMSDKService_no_service_window",level:f.D_.WARN,sessionId:this.KD.sessionId}),new Error("noServiceWindow");this.da.setServiceWindow(this.VD);const s=new this.nD.AdSession(this.da),n=new this.nD.AdEvents(s),r=new this.nD.MediaEvents(s);if(!s||!n||!r)throw(0,f.nF)({message:"OMSDKService_cant_start_omid_events",exception:`adSession:${!!s}_adEvents:${!!n}_mediaEvents:${!!r}`,level:f.D_.WARN,sessionId:this.KD.sessionId}),new Error("noOmidEvents");this.nN.startSession(s),this.cN=new v(this.nD,this.PT,s,n,r,this.nN.getLoadingStrategy(),this.KD.sessionId),this.cN.adSessionFinished.subscribe((()=>{var t;this.ZD.next(!1),this.iN.next(!1),this.nN.finishSession(s),null===(t=this.cN)||void 0===t||t.destroy(),this.cN=null,this.dN()}));return new Promise((t=>{var i;null===(i=this.cN)||void 0===i||i.adSessionStart.subscribe((()=>{t()}))}))}))}oN(){return this.nN.finishPlayerSession()}dN(){setTimeout((()=>{var t,i;this.lN(),this.rN(),null===(i=(t=this.nN).resetSession)||void 0===i||i.call(t)}),T.s_)}uN(){var t,i;this.nD=C.$.getSessionClient(null===(i=null===(t=this.pN)||void 0===t?void 0:t.iframe.contentWindow)||void 0===i?void 0:i.window),this.nD||(0,f.nF)({message:"OMSDKService_no_session_client",level:f.D_.INFO,sessionId:this.KD.sessionId})}rN(){const t=`<script id='omsdk-connatix-client-script' type='text/javascript' src='${P.n.endPoints.assets.plugins.omsdkSessionClient}'><\/script>`;this.iN.next(!1),this.pN=new I.o(this.nr,this.KD.sessionId);const i={container:this.KD.isGam?this.nr.global.document.body:window.document.body,customHtml:t,customIframeAttributes:[{key:"style",value:"display: none;"}]};this.pN.loadIframe(i).then((()=>{this.uN(),this.iN.next(!0)})).catch((()=>{(0,f.nF)({message:"OMSDKService_error_loading_SessionClientIframe",level:f.D_.WARN,sessionId:this.KD.sessionId})}))}lN(){var t,i,e,s;null===(i=null===(t=this.pN)||void 0===t?void 0:t.iframe.parentElement)||void 0===i||i.removeChild(null===(e=this.pN)||void 0===e?void 0:e.iframe),null===(s=this.pN)||void 0===s||s.destroy(),this.pN=null}};D=_=L([(0,a.b2)(),(0,a.Yn)(a.Fw.ContainerScoped),B(0,(0,a.f3)(k.c.EventsStorageService)),B(1,(0,a.f3)(k.c.GlobalDomUtilsService)),B(2,(0,a.f3)(k.c.OmidSettings)),R("design:paramtypes",[Object,Object,Object])],D)},6565:(t,i,e)=>{"use strict";e.d(i,{q:()=>a});var s=e(6515),n=e(6716),r=e(8659),o=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let a=class{constructor(){this.sessionPlaybackChanged=new s.X({isPlaying:!1}),this.sessionViewabilityChanged=new s.X({isInView:!1}),this.sessionTimeElapsed=new n.x,this.sessionRendered=new n.x,this.sessionView=new n.x,this.sessionAdBlocked=new n.x,this.adOpportunity=new n.x,this.adsEnabled=new n.x,this.stayNextButtonsAppeared=new n.x,this.contentStart=new n.x}};a=o([(0,r.b2)(),(0,r.Yn)(r.Fw.ContainerScoped)],a)},3816:(t,i,e)=>{"use strict";e.d(i,{d:()=>s});class s{static getProtoDiscount(t){return{id:t.id,rate:t.rate}}static fromProtoDiscount(t){return{id:t.id,rate:t.rate}}}},1102:(t,i,e)=>{"use strict";e.d(i,{Ti:()=>u,EN:()=>h,wE:()=>p,km:()=>m,W1:()=>f,p:()=>l,QV:()=>g,yz:()=>c,XE:()=>d});var s=e(5419),n=e(289),r=e(9005),o=e(8736),a=e(202);class h{static getProtoImplementationType(t){return{[o.Vx.Amp]:n.ProtoImplementationType.Amp,[o.Vx.Web]:n.ProtoImplementationType.Web,[o.Vx.Standalone]:n.ProtoImplementationType.Standalone}[t]}static fromProtoGetImplementationType(t){return{[n.ProtoImplementationType.Amp]:o.Vx.Amp,[n.ProtoImplementationType.Web]:o.Vx.Web,[n.ProtoImplementationType.Standalone]:o.Vx.Standalone}[t]}static getProtoDeviceType(t){return{[o.VB.Desktop]:n.ProtoDeviceType.Desktop,[o.VB.Smartphone]:n.ProtoDeviceType.Smartphone,[o.VB.Tablet]:n.ProtoDeviceType.Tablet,[o.VB.GameConsole]:n.ProtoDeviceType.GameConsole,[o.VB.PDA]:n.ProtoDeviceType.PDA,[o.VB.SmartTV]:n.ProtoDeviceType.SmartTV,[o.VB.Unrecognized]:n.ProtoDeviceType.Unrecognized,[o.VB.WearableComputer]:n.ProtoDeviceType.WearableComputer}[t]}static fromProtoGetDeviceType(t){return{[n.ProtoDeviceType.Desktop]:o.VB.Desktop,[n.ProtoDeviceType.Smartphone]:o.VB.Smartphone,[n.ProtoDeviceType.Tablet]:o.VB.Tablet,[n.ProtoDeviceType.GameConsole]:o.VB.GameConsole,[n.ProtoDeviceType.PDA]:o.VB.PDA,[n.ProtoDeviceType.SmartTV]:o.VB.SmartTV,[n.ProtoDeviceType.Unrecognized]:o.VB.Unrecognized,[n.ProtoDeviceType.WearableComputer]:o.VB.WearableComputer}[t]}static getProtoAdBlockerDetectionType(t){return{[o.ev.Banner]:n.ProtoAdBlockDetectionTypeEnum.Banner,[o.ev.Network]:n.ProtoAdBlockDetectionTypeEnum.Network}[t]}static fromProtoAdBlockerDetectionType(t){return{[n.ProtoAdBlockDetectionTypeEnum.Banner]:o.ev.Banner,[n.ProtoAdBlockDetectionTypeEnum.Network]:o.ev.Network}[t]}static getProtoAdBreakType(t){return{[o.xX.None]:n.ProtoAdBreakTypeEnum.None,[o.xX.PreRoll]:n.ProtoAdBreakTypeEnum.PreRoll,[o.xX.MidRoll]:n.ProtoAdBreakTypeEnum.MidRoll,[o.xX.PostRoll]:n.ProtoAdBreakTypeEnum.PostRoll}[t]||n.ProtoAdBreakTypeEnum.None}static fromProtoAdBreakType(t){return{[n.ProtoAdBreakTypeEnum.None]:o.xX.None,[n.ProtoAdBreakTypeEnum.PreRoll]:o.xX.PreRoll,[n.ProtoAdBreakTypeEnum.MidRoll]:o.xX.MidRoll,[n.ProtoAdBreakTypeEnum.PostRoll]:o.xX.PostRoll}[t]||o.xX.None}static getProtoAdClickType(t){return{[o.VE.AdClick]:n.ProtoAdClickTypeEnum.AdClick,[o.VE.AdClickThrough]:n.ProtoAdClickTypeEnum.AdClickThrough,[o.VE.AdSkipClick]:n.ProtoAdClickTypeEnum.AdSkipClick,[o.VE.AdUserClose]:n.ProtoAdClickTypeEnum.AdUserClose,[o.VE.ExitFullScreenClick]:n.ProtoAdClickTypeEnum.ExitFullScreenClick,[o.VE.FullScreenClick]:n.ProtoAdClickTypeEnum.FullScreenClick,[o.VE.MuteClick]:n.ProtoAdClickTypeEnum.MuteClick,[o.VE.PauseClick]:n.ProtoAdClickTypeEnum.PauseClick,[o.VE.PlayClick]:n.ProtoAdClickTypeEnum.PlayClick,[o.VE.UnmuteClick]:n.ProtoAdClickTypeEnum.UnmuteClick,[o.VE.VolumeClick]:n.ProtoAdClickTypeEnum.VolumeClick,[o.VE.FloatingCloseClick]:n.ProtoAdClickTypeEnum.FloatingCloseClick,[o.VE.EmbeddedCloseClick]:n.ProtoAdClickTypeEnum.EmbeddedCloseClick}[t]}static fromProtoAdClickType(t){return{[n.ProtoAdClickTypeEnum.AdClick]:o.VE.AdClick,[n.ProtoAdClickTypeEnum.AdClickThrough]:o.VE.AdClickThrough,[n.ProtoAdClickTypeEnum.AdSkipClick]:o.VE.AdSkipClick,[n.ProtoAdClickTypeEnum.AdUserClose]:o.VE.AdUserClose,[n.ProtoAdClickTypeEnum.ExitFullScreenClick]:o.VE.ExitFullScreenClick,[n.ProtoAdClickTypeEnum.FullScreenClick]:o.VE.FullScreenClick,[n.ProtoAdClickTypeEnum.MuteClick]:o.VE.MuteClick,[n.ProtoAdClickTypeEnum.PauseClick]:o.VE.PauseClick,[n.ProtoAdClickTypeEnum.PlayClick]:o.VE.PlayClick,[n.ProtoAdClickTypeEnum.UnmuteClick]:o.VE.UnmuteClick,[n.ProtoAdClickTypeEnum.VolumeClick]:o.VE.VolumeClick,[n.ProtoAdClickTypeEnum.FloatingCloseClick]:o.VE.FloatingCloseClick,[n.ProtoAdClickTypeEnum.EmbeddedCloseClick]:o.VE.EmbeddedCloseClick}[t]}static getProtoAdSourceType(t){return{[o.Px.AOL]:n.ProtoAdsourceTypeEnum.AOL,[o.Px.CnxMedia]:n.ProtoAdsourceTypeEnum.CnxMedia,[o.Px.Ima]:n.ProtoAdsourceTypeEnum.Ima,[o.Px.Jw]:n.ProtoAdsourceTypeEnum.Jw,[o.Px.Unknown]:n.ProtoAdsourceTypeEnum.Unknown,[o.Px.VastMedia]:n.ProtoAdsourceTypeEnum.VastMedia,[o.Px.Vpaid]:n.ProtoAdsourceTypeEnum.Vpaid}[t]}static fromProtoAdSourceType(t){return{[n.ProtoAdsourceTypeEnum.AOL]:o.Px.AOL,[n.ProtoAdsourceTypeEnum.CnxMedia]:o.Px.CnxMedia,[n.ProtoAdsourceTypeEnum.Ima]:o.Px.Ima,[n.ProtoAdsourceTypeEnum.Jw]:o.Px.Jw,[n.ProtoAdsourceTypeEnum.Unknown]:o.Px.Unknown,[n.ProtoAdsourceTypeEnum.VastMedia]:o.Px.VastMedia,[n.ProtoAdsourceTypeEnum.Vpaid]:o.Px.Vpaid}[t]}static getProtoAuctionLossReason(t){return{[o.AT.AdOpportunityEnd]:n.ProtoAuctionLossReasonEnum.AdOpportunityEnd,[o.AT.TargetingMismatch]:n.ProtoAuctionLossReasonEnum.TargetingMismatch,[o.AT.CompetitorPriority]:n.ProtoAuctionLossReasonEnum.CompetitorPriority}[t]}static fromProtoAuctionLossReason(t){return{[n.ProtoAuctionLossReasonEnum.AdOpportunityEnd]:o.AT.AdOpportunityEnd,[n.ProtoAuctionLossReasonEnum.TargetingMismatch]:o.AT.TargetingMismatch,[n.ProtoAuctionLossReasonEnum.CompetitorPriority]:o.AT.CompetitorPriority}[t]}static getProtoAuctionPostbidReason(t){return{[o.MF.CreativeError]:n.ProtoAuctionPostbidReasonEnum.CreativeError,[o.MF.PlayerError]:n.ProtoAuctionPostbidReasonEnum.PlayerError,[o.MF.SDKFailure]:n.ProtoAuctionPostbidReasonEnum.SDKFailure,[o.MF.TargetingMismatch]:n.ProtoAuctionPostbidReasonEnum.TargetingMismatch,[o.MF.UnsupportedMedia]:n.ProtoAuctionPostbidReasonEnum.UnsupportedMedia}[t]}static fromProtoAuctionPostbidReason(t){return{[n.ProtoAuctionPostbidReasonEnum.CreativeError]:o.MF.CreativeError,[n.ProtoAuctionPostbidReasonEnum.PlayerError]:o.MF.PlayerError,[n.ProtoAuctionPostbidReasonEnum.SDKFailure]:o.MF.SDKFailure,[n.ProtoAuctionPostbidReasonEnum.TargetingMismatch]:o.MF.TargetingMismatch,[n.ProtoAuctionPostbidReasonEnum.UnsupportedMedia]:o.MF.UnsupportedMedia}[t]}static getProtoFloorPriceBypassReason(t){return{[o.N0.BidInHand]:o.N0.BidInHand,[o.N0.FixedCpm]:o.N0.FixedCpm,[o.N0.MaxBidPrice]:o.N0.MaxBidPrice,[o.N0.MinCpm]:o.N0.MinCpm,[o.N0.NoPredictionFound]:o.N0.NoPredictionFound,[o.N0.StaticFactorUsed]:o.N0.StaticFactorUsed,[o.N0.VideoOrBannerMin]:o.N0.VideoOrBannerMin}[t]}static fromProtoFloorPriceBypassReason(t){return{[o.N0.BidInHand]:o.N0.BidInHand,[o.N0.FixedCpm]:o.N0.FixedCpm,[o.N0.MaxBidPrice]:o.N0.MaxBidPrice,[o.N0.MinCpm]:o.N0.MinCpm,[o.N0.NoPredictionFound]:o.N0.NoPredictionFound,[o.N0.StaticFactorUsed]:o.N0.StaticFactorUsed,[o.N0.VideoOrBannerMin]:o.N0.VideoOrBannerMin}[t]}static getProtoGDPRConsentMode(t){return{[o.q1.Unknown]:n.ProtoGdprConsentModeEnum.Unknown,[o.q1.NoCmp]:n.ProtoGdprConsentModeEnum.NoCmp,[o.q1.NoConsent]:n.ProtoGdprConsentModeEnum.NoConsent,[o.q1.NotAllDemandConsent]:n.ProtoGdprConsentModeEnum.NotAllDemandConsent,[o.q1.NoConnatixConsent]:n.ProtoGdprConsentModeEnum.NoConnatixConsent,[o.q1.AllGood]:n.ProtoGdprConsentModeEnum.AllGood}[t]}static fromProtoGDPRConsentMode(t){return{[n.ProtoGdprConsentModeEnum.Unknown]:o.q1.Unknown,[n.ProtoGdprConsentModeEnum.NoCmp]:o.q1.NoCmp,[n.ProtoGdprConsentModeEnum.NoConsent]:o.q1.NoConsent,[n.ProtoGdprConsentModeEnum.NotAllDemandConsent]:o.q1.NotAllDemandConsent,[n.ProtoGdprConsentModeEnum.NoConnatixConsent]:o.q1.NoConnatixConsent,[n.ProtoGdprConsentModeEnum.AllGood]:o.q1.AllGood}[t]}static getProtoHeavyAdType(t){return{[o.Yc.Global]:n.ProtoHeavyAdBlockTypeEnum.Global,[o.Yc.OverlayIframe]:n.ProtoHeavyAdBlockTypeEnum.OverlayIframe,[o.Yc.Script]:n.ProtoHeavyAdBlockTypeEnum.Script,[o.Yc.VPAIDIframe]:n.ProtoHeavyAdBlockTypeEnum.VpaidIframe}[t]}static fromProtoHeavyAdType(t){return{[n.ProtoHeavyAdBlockTypeEnum.Global]:o.Yc.Global,[n.ProtoHeavyAdBlockTypeEnum.OverlayIframe]:o.Yc.OverlayIframe,[n.ProtoHeavyAdBlockTypeEnum.Script]:o.Yc.Script,[n.ProtoHeavyAdBlockTypeEnum.VpaidIframe]:o.Yc.VPAIDIframe}[t]}static getProtoInternalAuctionDemandType(t){return{[o.AM.None]:n.ProtoDemandTypeEnum.None,[o.AM.PMP]:n.ProtoDemandTypeEnum.PMP,[o.AM.OpenMarket]:n.ProtoDemandTypeEnum.OpenMarket,[o.AM.SelfServed]:n.ProtoDemandTypeEnum.SelfServed}[t]}static fromProtoInternalAuctionDemandType(t){return{[n.ProtoDemandTypeEnum.None]:o.AM.None,[n.ProtoDemandTypeEnum.PMP]:o.AM.PMP,[n.ProtoDemandTypeEnum.OpenMarket]:o.AM.OpenMarket,[n.ProtoDemandTypeEnum.SelfServed]:o.AM.SelfServed}[t]}static getProtoLineItemAbTest(t){return{[o.KY.CaseA]:n.ProtoLineItemAbTestCase.CaseA,[o.KY.CaseB]:n.ProtoLineItemAbTestCase.CaseB}[t]}static fromProtoLineItemAbTest(t){return{[n.ProtoLineItemAbTestCase.CaseA]:o.KY.CaseA,[n.ProtoLineItemAbTestCase.CaseB]:o.KY.CaseB}[t]}static getProtoMediaClickType(t){return{[o.$u.Click]:n.ProtoMediaClickTypeEnum.Click,[o.$u.CloseClick]:n.ProtoMediaClickTypeEnum.CloseClick,[o.$u.EmbedCloseClick]:n.ProtoMediaClickTypeEnum.EmbedCloseClick,[o.$u.FloatingCloseClick]:n.ProtoMediaClickTypeEnum.FloatingCloseClick,[o.$u.FullScreenClick]:n.ProtoMediaClickTypeEnum.FullScreenClick,[o.$u.ExitFullScreenClick]:n.ProtoMediaClickTypeEnum.ExitFullScreenClick,[o.$u.GalleryClick]:n.ProtoMediaClickTypeEnum.GalleryClick,[o.$u.MuteClick]:n.ProtoMediaClickTypeEnum.MuteClick,[o.$u.NextClick]:n.ProtoMediaClickTypeEnum.NextClick,[o.$u.PauseClick]:n.ProtoMediaClickTypeEnum.PauseClick,[o.$u.PlayClick]:n.ProtoMediaClickTypeEnum.PlayClick,[o.$u.PreviousClick]:n.ProtoMediaClickTypeEnum.PreviousClick,[o.$u.SubtitleClick]:n.ProtoMediaClickTypeEnum.SubtitleClick,[o.$u.UnmuteClick]:n.ProtoMediaClickTypeEnum.UnmuteClick,[o.$u.UrlClick]:n.ProtoMediaClickTypeEnum.UrlClick,[o.$u.VolumeClick]:n.ProtoMediaClickTypeEnum.VolumeClick,[o.$u.NextButtonClick]:n.ProtoMediaClickTypeEnum.NextButtonClick,[o.$u.StayButtonClick]:n.ProtoMediaClickTypeEnum.StayButtonClick,[o.$u.CtaButtonClick]:n.ProtoMediaClickTypeEnum.CtaButtonClick}[t]}static fromProtoGetMediaClickType(t){return{[n.ProtoMediaClickTypeEnum.Click]:o.$u.Click,[n.ProtoMediaClickTypeEnum.CloseClick]:o.$u.CloseClick,[n.ProtoMediaClickTypeEnum.EmbedCloseClick]:o.$u.EmbedCloseClick,[n.ProtoMediaClickTypeEnum.FloatingCloseClick]:o.$u.FloatingCloseClick,[n.ProtoMediaClickTypeEnum.FullScreenClick]:o.$u.FullScreenClick,[n.ProtoMediaClickTypeEnum.ExitFullScreenClick]:o.$u.ExitFullScreenClick,[n.ProtoMediaClickTypeEnum.GalleryClick]:o.$u.GalleryClick,[n.ProtoMediaClickTypeEnum.MuteClick]:o.$u.MuteClick,[n.ProtoMediaClickTypeEnum.NextClick]:o.$u.NextClick,[n.ProtoMediaClickTypeEnum.PauseClick]:o.$u.PauseClick,[n.ProtoMediaClickTypeEnum.PlayClick]:o.$u.PlayClick,[n.ProtoMediaClickTypeEnum.PreviousClick]:o.$u.PreviousClick,[n.ProtoMediaClickTypeEnum.SubtitleClick]:o.$u.SubtitleClick,[n.ProtoMediaClickTypeEnum.UnmuteClick]:o.$u.UnmuteClick,[n.ProtoMediaClickTypeEnum.UrlClick]:o.$u.UrlClick,[n.ProtoMediaClickTypeEnum.VolumeClick]:o.$u.VolumeClick,[n.ProtoMediaClickTypeEnum.NextButtonClick]:o.$u.NextButtonClick,[n.ProtoMediaClickTypeEnum.StayButtonClick]:o.$u.StayButtonClick,[n.ProtoMediaClickTypeEnum.CtaButtonClick]:o.$u.CtaButtonClick}[t]}static getProtoMediaType(t){return{[o.L5.Image]:n.ProtoMediaTypeEnum.Image,[o.L5.Video]:n.ProtoMediaTypeEnum.Video}[t]}static fromProtoGetMediaType(t){return{[n.ProtoMediaTypeEnum.Image]:o.L5.Image,[n.ProtoMediaTypeEnum.Video]:o.L5.Video}[t]}static getProtoPrebidReason(t){return{[o.fN.RequestException]:n.ConnatixNoBidReasonEnum.RequestException,[o.fN.Timeout]:n.ConnatixNoBidReasonEnum.Timeout,[o.fN.EmptyResponse]:n.ConnatixNoBidReasonEnum.EmptyResponse,[o.fN.InvalidResponse]:n.ConnatixNoBidReasonEnum.InvalidResponse,[o.fN.NoBid]:n.ConnatixNoBidReasonEnum.NoBid,[o.fN.BidBelowFloor]:n.ConnatixNoBidReasonEnum.BidBelowFloor,[o.fN.DealIdMismatch]:n.ConnatixNoBidReasonEnum.DealIdMismatch,[o.fN.CsInvalidResponse]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[o.fN.CsRequestException]:n.ConnatixNoBidReasonEnum.CsRequestException,[o.fN.CsEmptyResponse]:n.ConnatixNoBidReasonEnum.CsEmptyResponse,[o.fN.NoLibInPage]:n.ConnatixNoBidReasonEnum.NoLibInPage,[o.fN.BidIsNotTargetingAllowedEver]:n.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver,[o.fN.VastVersionNotSupported]:n.ConnatixNoBidReasonEnum.VastVersionNotSupported,[o.fN.VastContainsBannedUrl]:n.ConnatixNoBidReasonEnum.VastHasBannedUrls}[t]}static fromProtoPrebidReason(t){return{[n.ConnatixNoBidReasonEnum.RequestException]:o.fN.RequestException,[n.ConnatixNoBidReasonEnum.Timeout]:o.fN.Timeout,[n.ConnatixNoBidReasonEnum.EmptyResponse]:o.fN.EmptyResponse,[n.ConnatixNoBidReasonEnum.InvalidResponse]:o.fN.InvalidResponse,[n.ConnatixNoBidReasonEnum.NoBid]:o.fN.NoBid,[n.ConnatixNoBidReasonEnum.BidBelowFloor]:o.fN.BidBelowFloor,[n.ConnatixNoBidReasonEnum.DealIdMismatch]:o.fN.DealIdMismatch,[n.ConnatixNoBidReasonEnum.CsInvalidResponse]:o.fN.CsInvalidResponse,[n.ConnatixNoBidReasonEnum.CsRequestException]:o.fN.CsRequestException,[n.ConnatixNoBidReasonEnum.CsEmptyResponse]:o.fN.CsEmptyResponse,[n.ConnatixNoBidReasonEnum.NoLibInPage]:o.fN.NoLibInPage,[n.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver]:o.fN.BidIsNotTargetingAllowedEver,[n.ConnatixNoBidReasonEnum.VastVersionNotSupported]:o.fN.VastVersionNotSupported,[n.ConnatixNoBidReasonEnum.VastHasBannedUrls]:o.fN.VastContainsBannedUrl}[t]}static getProtoPrebidPartnerReason(t){return{[o.XD.Unknown]:n.PartnerNoBidReasonEnum.Unknown,[o.XD.TechnicalError]:n.PartnerNoBidReasonEnum.TechnicalError,[o.XD.InvalidRequest]:n.PartnerNoBidReasonEnum.InvalidRequest,[o.XD.KnownWebSpider]:n.PartnerNoBidReasonEnum.KnownWebSpider,[o.XD.SuspectedNonHumanTraffic]:n.PartnerNoBidReasonEnum.SuspectedNonHumanTraffic,[o.XD.CloudIP]:n.PartnerNoBidReasonEnum.CloudIP,[o.XD.UnsupportedDevice]:n.PartnerNoBidReasonEnum.UnsupportedDevice,[o.XD.BlockedPublisher]:n.PartnerNoBidReasonEnum.BlockedPublisher,[o.XD.UnmatchedUser]:n.PartnerNoBidReasonEnum.UnmatchedUser,[o.XD.DailyDomainCapMet]:n.PartnerNoBidReasonEnum.DailyDomainCapMet,[o.XD.DailyReaderCapMet]:n.PartnerNoBidReasonEnum.DailyReaderCapMet}[t]}static fromProtoPrebidPartnerReason(t){return{[n.PartnerNoBidReasonEnum.Unknown]:o.XD.Unknown,[n.PartnerNoBidReasonEnum.TechnicalError]:o.XD.TechnicalError,[n.PartnerNoBidReasonEnum.InvalidRequest]:o.XD.InvalidRequest,[n.PartnerNoBidReasonEnum.KnownWebSpider]:o.XD.KnownWebSpider,[n.PartnerNoBidReasonEnum.SuspectedNonHumanTraffic]:o.XD.SuspectedNonHumanTraffic,[n.PartnerNoBidReasonEnum.CloudIP]:o.XD.CloudIP,[n.PartnerNoBidReasonEnum.UnsupportedDevice]:o.XD.UnsupportedDevice,[n.PartnerNoBidReasonEnum.BlockedPublisher]:o.XD.BlockedPublisher,[n.PartnerNoBidReasonEnum.UnmatchedUser]:o.XD.UnmatchedUser,[n.PartnerNoBidReasonEnum.DailyDomainCapMet]:o.XD.DailyDomainCapMet,[n.PartnerNoBidReasonEnum.DailyReaderCapMet]:o.XD.DailyReaderCapMet}[t]}static getProtoQuartile(t){return{[o.yU.Start]:n.ProtoQuartilesEnum.Start,[o.yU.First]:n.ProtoQuartilesEnum.First,[o.yU.Second]:n.ProtoQuartilesEnum.Second,[o.yU.Third]:n.ProtoQuartilesEnum.Third,[o.yU.Fourth]:n.ProtoQuartilesEnum.Fourth}[t]}static fromProtoGetQuartile(t){return{[n.ProtoQuartilesEnum.Start]:o.yU.Start,[n.ProtoQuartilesEnum.First]:o.yU.First,[n.ProtoQuartilesEnum.Second]:o.yU.Second,[n.ProtoQuartilesEnum.Third]:o.yU.Third,[n.ProtoQuartilesEnum.Fourth]:o.yU.Fourth}[t]}static getProtoLiveRamp(t){return{[a.f.None]:n.ProtoLiveRampEnum.None,[a.f.ATS]:n.ProtoLiveRampEnum.ATS,[a.f.NonATS]:n.ProtoLiveRampEnum.NonATS}[t]}static fromProtoLiveRamp(t){return{[n.ProtoLiveRampEnum.None]:a.f.None,[n.ProtoLiveRampEnum.ATS]:a.f.ATS,[n.ProtoLiveRampEnum.NonATS]:a.f.NonATS}[t]}static getProtoIdentityProviderGroup(t){return{[o.dz.None]:n.ProtoIdentityProviderGroupEnum.None,[o.dz.A]:n.ProtoIdentityProviderGroupEnum.A,[o.dz.B]:n.ProtoIdentityProviderGroupEnum.B,[o.dz.C]:n.ProtoIdentityProviderGroupEnum.C}[t]}static fromProtoIdentityProviderGroup(t){return{[n.ProtoIdentityProviderGroupEnum.None]:o.dz.None,[n.ProtoIdentityProviderGroupEnum.A]:o.dz.A,[n.ProtoIdentityProviderGroupEnum.B]:o.dz.B,[n.ProtoIdentityProviderGroupEnum.C]:o.dz.C}[t]}static getProtoPanoramaIdType(t){return{[s.YE.Unknown]:n.ProtoPanoramaIdTypeEnum.Unknown,[s.YE.PanoDevice]:n.ProtoPanoramaIdTypeEnum.PanoDevice,[s.YE.PanoIndiv]:n.ProtoPanoramaIdTypeEnum.PanoIndiv}[t]}static getProtoIntegrationType(t){return{[r.Q.Unknown]:n.ProtoIntegrationTypeEnum.Unknown,[r.Q.InAppSdk]:n.ProtoIntegrationTypeEnum.InAppSdk,[r.Q.InAppReactNative]:n.ProtoIntegrationTypeEnum.InAppReactNative,[r.Q.InAppFlutter]:n.ProtoIntegrationTypeEnum.InAppFlutter,[r.Q.InAppGam]:n.ProtoIntegrationTypeEnum.InAppGam,[r.Q.InAppWebview]:n.ProtoIntegrationTypeEnum.InAppWebview,[r.Q.WebAmp]:n.ProtoIntegrationTypeEnum.WebAmp,[r.Q.WebGamSafeIframe]:n.ProtoIntegrationTypeEnum.WebGamSafeIframe,[r.Q.WebGamFreindlyIframe]:n.ProtoIntegrationTypeEnum.WebGamFriendlyIframe,[r.Q.Web]:n.ProtoIntegrationTypeEnum.Web}[t]}}class c{static getProtoTrackingMetadata(t){const{buildNumber:i,buildAbPart:e,buildAbId:s,customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:d,clientAb0:l,clientAb1:u,clientAb2:p,clientAb3:f,clientAb4:m,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:P,userId:w,shouldTrackAllRequests:S,isPageInFocus:A,bundleId:x,abTestId:_,implementationType:T,browser:C,geo:k,iiqEnabledAB:E,iiqGroupAB:M,eventTimestamp:L,isIdentityEnhanced:R}=t;return{geo:k?c.vN(k):void 0,browser:C?c.mN(C):void 0,implementationType:T?h.getProtoImplementationType(T):void 0,eventTimestamp:L||Date.now(),customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:d,clientAb0:l,clientAb1:u,clientAb2:p,clientAb3:f,clientAb4:m,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:P,userId:w,isPageInFocus:A,version:i,bundleId:x,bundleAbId:s,bundlePart:e,abTestId:_,shouldTrackAllRequests:S,iiqEnabledAB:E,iiqGroupAB:M,isIdentityEnhanced:R}}static fromProtoGetTrackingMetadata(t){const{bundleAbId:i,version:e,bundlePart:s,customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:d,clientAb0:l,clientAb1:u,clientAb2:p,clientAb3:f,clientAb4:m,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:P,userId:w,shouldTrackAllRequests:S,isPageInFocus:A,bundleId:x,abTestId:_,implementationType:T,browser:C,geo:k,iiqEnabledAB:E,iiqGroupAB:M,eventTimestamp:L,isIdentityEnhanced:R}=t;return{geo:k?c.gN(k):void 0,browser:C?c.yN(C):void 0,implementationType:h.fromProtoGetImplementationType(T),eventTimestamp:L,customParam1:n,customParam2:r,customParam3:o,customParam4:a,customParam5:d,clientAb0:l,clientAb1:u,clientAb2:p,clientAb3:f,clientAb4:m,clientAb5:g,serverAb0:v,serverAb1:y,playerId:b,sessionId:I,pageUrl:P,userId:w,isPageInFocus:A,buildNumber:e,bundleId:x,buildAbId:i,buildAbPart:s,abTestId:_,shouldTrackAllRequests:S,iiqEnabledAB:E,iiqGroupAB:M,isIdentityEnhanced:R}}static mN(t){const{osCode:i,browserVersion:e,browserType:s,deviceType:n}=t;return{osCode:i,browserVersion:e,browserType:s,device:h.getProtoDeviceType(n)}}static yN(t){const{osCode:i,browserVersion:e,browserType:s,device:n}=t;return{osCode:i,browserVersion:e,browserType:s,deviceType:h.fromProtoGetDeviceType(n)}}static vN(t){const{latitude:i,longitude:e,zipCode:s,cityId:n,countryGeoId:r,ip:o,subdivisionId:a,dmaId:h}=t;return{cityId:n,countryGeoId:r,ip:o,lat:i,lon:e,subdivisionId:a,zipcode:s,dmaId:h}}static gN(t){const{lat:i,lon:e,zipcode:s,cityId:n,countryGeoId:r,ip:o,subdivisionId:a,dmaId:h}=t;return{cityId:n,countryGeoId:r,ip:o,latitude:i,longitude:e,subdivisionId:a,zipCode:s,dmaId:h}}}class d{static getProtoSentimentAnalysis(t){return{negative:t.negative,neutral:t.neutral,positive:t.positive}}static fromProtoGetSentimentAnalysis(t){return{negative:t.negative,neutral:t.neutral,positive:t.positive}}}class l{static getProtoLineItemAbTest(t){return{guid:t.id,lineItemAbTestCase:h.getProtoLineItemAbTest(t.lineItemAbTestCase)}}static fromProtoLineItemAbTestFromProto(t){return{id:t.guid,lineItemAbTestCase:h.fromProtoLineItemAbTest(t.lineItemAbTestCase)}}}class u{static getProtoAuctionInformation(t){const{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}=t;return{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}}static fromProtoAuctionInformation(t){const{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}=t;return{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}}}class p{static getProtoFloorPriceInformation(t){const{floorPrices:i,floorPriceIndexUsed:e,floorPriceFactorBypassReason:s,adxPredictedFloorPrice:n}=t;return{adxPredictedFloorPrice:n,floorPrices:i,floorPriceIndexUsed:e,floorPriceBypassReason:s?h.getProtoFloorPriceBypassReason(s):void 0}}static fromProtoFloorPriceInformation(t){const{floorPrices:i,floorPriceIndexUsed:e,floorPriceBypassReason:s,adxPredictedFloorPrice:n}=t;return{adxPredictedFloorPrice:n,floorPrices:i,floorPriceIndexUsed:e,floorPriceFactorBypassReason:s?h.fromProtoFloorPriceBypassReason(s):void 0}}}class f{static getProtoInternalAuction(t){const{winnerDemandType:i,firstLoser:e,firstOpenMarketLoser:s}=t;return{winnerDemandType:h.getProtoInternalAuctionDemandType(i),firstLoser:e?f.getProtoInternalAuctionBid(e):void 0,firstOpenMarketLoser:s?f.getProtoInternalAuctionBid(s):void 0}}static fromProtoInternalAuction(t){const{winnerDemandType:i,firstLoser:e,firstOpenMarketLoser:s}=t;return{winnerDemandType:h.fromProtoInternalAuctionDemandType(i),firstLoser:e?f.fromProtoInternalAuctionBid(e):void 0,firstOpenMarketLoser:s?f.fromProtoInternalAuctionBid(s):void 0}}static getProtoInternalAuctionBid(t){const{advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,demandType:n,adDuration:r}=t;return{demandType:h.getProtoInternalAuctionDemandType(n),advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,adDuration:r}}static fromProtoInternalAuctionBid(t){const{advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,demandType:n,adDuration:r}=t;return{demandType:h.fromProtoInternalAuctionDemandType(n),advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,adDuration:r}}}class m{static getProtoIdentityProviderData(t){const{group:i,eidsList:e,hasIIQLookup:s,identityPartnerEnum:n}=t;return{group:i?h.getProtoIdentityProviderGroup(i):void 0,identityProviderEidsList:null==e?void 0:e.map((t=>({source:t.source,ids:t.ids}))),hasIIQLookup:s,identityPartnerEnum:n}}static fromProtoIdentityProviderData(t){const{group:i,identityProviderEidsList:e,hasIIQLookup:s,identityPartnerEnum:n}=t;return{group:i?h.fromProtoIdentityProviderGroup(i):void 0,eidsList:null==e?void 0:e.map((t=>({source:t.source,ids:t.ids}))),hasIIQLookup:s,identityPartnerEnum:n}}}class g{static getProtoLotamePanorama(t){const{id:i,type:e}=t;return{id:i,type:h.getProtoPanoramaIdType(e)}}}},6286:(t,i,e)=>{"use strict";e.d(i,{j:()=>h});var s=e(6716),n=e(8659),r=e(5650),o=e(4798),a=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let h=class{constructor(){this.mP=new s.x,this.gP=new s.x,this.bN=new s.x}get onLineItemPlatformCapped(){return this.mP.asObservable()}get onImpressionRevenue(){return this.gP.asObservable()}get onLineItemViewabilityChange(){return this.bN.asObservable()}onResponseReceived(t,i){const{platformCappedLineItemIdList:e,adServerLineItemName:s,impressionRevenue:n,isViewabilityRestricted:r}=t;this.IN(e),this.PN(n,s),this.wN(i,r)}IN(t){(0,o.$K)(t)&&(0,r.BZ)(t)&&this.mP.next(t)}PN(t,i){(0,o.r)(t)&&(0,o.QM)(i)&&this.gP.next({impressionRevenue:t,adServerLineItemName:i})}wN(t,i=void 0){(0,o.QM)(t)&&(0,o.$K)(i)&&this.bN.next([t,i])}};h=a([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],h)},202:(t,i,e)=>{"use strict";var s;e.d(i,{f:()=>s}),function(t){t[t.None=0]="None",t[t.ATS=1]="ATS",t[t.NonATS=2]="NonATS"}(s||(s={}))},4967:(t,i,e)=>{"use strict";var s;e.d(i,{$:()=>s}),function(t){t[t.Click=0]="Click",t[t.UrlClick=1]="UrlClick",t[t.VolumeClick=2]="VolumeClick",t[t.PlayClick=3]="PlayClick",t[t.PauseClick=4]="PauseClick",t[t.NextClick=5]="NextClick",t[t.PreviousClick=6]="PreviousClick",t[t.MuteClick=7]="MuteClick",t[t.UnmuteClick=8]="UnmuteClick",t[t.CloseClick=9]="CloseClick",t[t.GalleryClick=11]="GalleryClick",t[t.SubtitleClick=12]="SubtitleClick",t[t.FullScreenClick=13]="FullScreenClick",t[t.ExitFullScreenClick=14]="ExitFullScreenClick",t[t.NextButtonClick=15]="NextButtonClick",t[t.StayButtonClick=16]="StayButtonClick",t[t.CtaButtonClick=17]="CtaButtonClick",t[t.EmbedCloseClick=18]="EmbedCloseClick",t[t.FloatingCloseClick=19]="FloatingCloseClick"}(s||(s={}))},5692:(t,i,e)=>{"use strict";var s;e.d(i,{y:()=>s}),function(t){t[t.Start=0]="Start",t[t.First=1]="First",t[t.Second=2]="Second",t[t.Third=3]="Third",t[t.Fourth=4]="Fourth"}(s||(s={}))},8736:(t,i,e)=>{"use strict";var s,n,r,o;e.d(i,{ev:()=>r,xX:()=>c,VE:()=>y,Px:()=>h,AT:()=>g,MF:()=>m,VB:()=>s,N0:()=>f,q1:()=>d,Yc:()=>o,dz:()=>P,Vx:()=>n,AM:()=>v,KY:()=>l,$u:()=>I.$,L5:()=>a,XD:()=>p,fN:()=>u,yU:()=>b.y}),function(t){t[t.Desktop=0]="Desktop",t[t.Smartphone=1]="Smartphone",t[t.Tablet=2]="Tablet",t[t.GameConsole=3]="GameConsole",t[t.SmartTV=4]="SmartTV",t[t.WearableComputer=5]="WearableComputer",t[t.PDA=6]="PDA",t[t.Unrecognized=7]="Unrecognized"}(s||(s={})),function(t){t[t.Web=0]="Web",t[t.Amp=1]="Amp",t[t.Standalone=5]="Standalone"}(n||(n={})),function(t){t[t.Banner=0]="Banner",t[t.Network=1]="Network"}(r||(r={})),function(t){t[t.Global=0]="Global",t[t.Script=1]="Script",t[t.VPAIDIframe=2]="VPAIDIframe",t[t.OverlayIframe=3]="OverlayIframe"}(o||(o={}));var a,h,c,d,l,u,p,f,m,g,v,y,b=e(5692),I=e(4967);!function(t){t[t.Image=0]="Image",t[t.Video=1]="Video"}(a||(a={})),function(t){t[t.Unknown=0]="Unknown",t[t.Vpaid=1]="Vpaid",t[t.VastMedia=2]="VastMedia",t[t.CnxMedia=3]="CnxMedia",t[t.Jw=4]="Jw",t[t.Ima=5]="Ima",t[t.AOL=6]="AOL"}(h||(h={})),function(t){t[t.None=0]="None",t[t.PreRoll=1]="PreRoll",t[t.MidRoll=2]="MidRoll",t[t.PostRoll=3]="PostRoll"}(c||(c={})),function(t){t[t.Unknown=0]="Unknown",t[t.NoCmp=1]="NoCmp",t[t.NoConsent=2]="NoConsent",t[t.NoConnatixConsent=3]="NoConnatixConsent",t[t.NotAllDemandConsent=4]="NotAllDemandConsent",t[t.AllGood=5]="AllGood"}(d||(d={})),function(t){t[t.CaseA=0]="CaseA",t[t.CaseB=1]="CaseB"}(l||(l={})),function(t){t[t.RequestException=0]="RequestException",t[t.Timeout=1]="Timeout",t[t.EmptyResponse=2]="EmptyResponse",t[t.InvalidResponse=3]="InvalidResponse",t[t.NoBid=4]="NoBid",t[t.BidBelowFloor=5]="BidBelowFloor",t[t.DealIdMismatch=6]="DealIdMismatch",t[t.CsInvalidResponse=7]="CsInvalidResponse",t[t.CsRequestException=8]="CsRequestException",t[t.CsEmptyResponse=9]="CsEmptyResponse",t[t.NoLibInPage=11]="NoLibInPage",t[t.BidIsNotTargetingAllowedEver=12]="BidIsNotTargetingAllowedEver",t[t.VastVersionNotSupported=13]="VastVersionNotSupported",t[t.VastContainsBannedUrl=18]="VastContainsBannedUrl"}(u||(u={})),function(t){t[t.Unknown=0]="Unknown",t[t.TechnicalError=1]="TechnicalError",t[t.InvalidRequest=2]="InvalidRequest",t[t.KnownWebSpider=3]="KnownWebSpider",t[t.SuspectedNonHumanTraffic=4]="SuspectedNonHumanTraffic",t[t.CloudIP=5]="CloudIP",t[t.UnsupportedDevice=6]="UnsupportedDevice",t[t.BlockedPublisher=7]="BlockedPublisher",t[t.UnmatchedUser=8]="UnmatchedUser",t[t.DailyReaderCapMet=9]="DailyReaderCapMet",t[t.DailyDomainCapMet=10]="DailyDomainCapMet"}(p||(p={})),function(t){t[t.MinCpm=0]="MinCpm",t[t.FixedCpm=1]="FixedCpm",t[t.MaxBidPrice=2]="MaxBidPrice",t[t.VideoOrBannerMin=3]="VideoOrBannerMin",t[t.BidInHand=6]="BidInHand",t[t.NoPredictionFound=7]="NoPredictionFound",t[t.StaticFactorUsed=8]="StaticFactorUsed"}(f||(f={})),function(t){t[t.CreativeError=0]="CreativeError",t[t.SDKFailure=1]="SDKFailure",t[t.UnsupportedMedia=2]="UnsupportedMedia",t[t.TargetingMismatch=3]="TargetingMismatch",t[t.PlayerError=4]="PlayerError"}(m||(m={})),function(t){t[t.TargetingMismatch=0]="TargetingMismatch",t[t.CompetitorPriority=1]="CompetitorPriority",t[t.AdOpportunityEnd=2]="AdOpportunityEnd"}(g||(g={})),function(t){t[t.None=0]="None",t[t.PMP=1]="PMP",t[t.OpenMarket=2]="OpenMarket",t[t.SelfServed=3]="SelfServed"}(v||(v={})),function(t){t[t.AdClick=1]="AdClick",t[t.AdClickThrough=2]="AdClickThrough",t[t.AdSkipClick=3]="AdSkipClick",t[t.VolumeClick=4]="VolumeClick",t[t.PauseClick=5]="PauseClick",t[t.PlayClick=6]="PlayClick",t[t.FullScreenClick=7]="FullScreenClick",t[t.MuteClick=8]="MuteClick",t[t.UnmuteClick=9]="UnmuteClick",t[t.ExitFullScreenClick=10]="ExitFullScreenClick",t[t.AdUserClose=11]="AdUserClose",t[t.FloatingCloseClick=12]="FloatingCloseClick",t[t.EmbeddedCloseClick=13]="EmbeddedCloseClick"}(y||(y={}));var P;e(202);!function(t){t[t.None=0]="None",t[t.A=1]="A",t[t.B=2]="B",t[t.C=3]="C"}(P||(P={}))},1968:(t,i,e)=>{"use strict";e.d(i,{ai:()=>c});var s=e(6716),n=e(7298),r=e(9357),o=e(8395),a=e(9906),h=e(4798);class c{constructor(){this.AN=1e3,this.SN=5,this._N="cnx_uid2_id",this.wO=new s.x,this.GO=a.h.getGlobalContainer().resolve(n.n),this.wi=a.h.getGlobalContainer().resolve(o.f),this.GO.isLocalStorageEnabled&&(this.TN(),(0,h.QM)(this.xN)||this.kN())}get uid2Token(){return this.xN}get onUserIdReceived(){return this.wO.asObservable()}destroy(){this.CN()}kN(){this.XT=this.wi.setInterval((()=>this.TN()),this.AN),this.vI=this.wi.setTimeout((()=>this.CN()),this.SN*r.uD)}CN(){(0,h.hj)(this.XT)&&this.wi.clearInterval(this.XT),(0,h.hj)(this.vI)&&this.wi.clearTimeout(this.vI)}TN(){const t=this.GO.getItem(this._N);(0,h.QM)(t)&&(this.xN=t,this.CN(),this.wO.next(t))}}},1988:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t.XL="cnx-bp-xl-lit",t.LG="cnx-bp-lg-lit",t.MD="cnx-bp-md-lit",t.SM="cnx-bp-sm-lit",t.XS="cnx-bp-xs-lit"}(s||(s={}));const n=s},655:(t,i,e)=>{"use strict";e.d(i,{CR:()=>h,FC:()=>l,Jh:()=>o,KL:()=>u,XA:()=>a,ZT:()=>n,ev:()=>c,mG:()=>r,qq:()=>d});var s=function(t,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},s(t,i)};function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function r(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))}function o(t,i){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(h){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(e=1,s&&(n=2&a[0]?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=i.call(t,o)}catch(t){a=[6,t],s=0}finally{e=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}}Object.create;function a(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return o}function c(t,i,e){if(e||2===arguments.length)for(var s,n=0,r=i.length;n<r;n++)!s&&n in i||(s||(s=Array.prototype.slice.call(i,0,n)),s[n]=i[n]);return t.concat(s||Array.prototype.slice.call(i))}function d(t){return this instanceof d?(this.v=t,this):new d(t)}function l(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=e.apply(t,i||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(t){n[t]&&(s[t]=function(i){return new Promise((function(e,s){r.push([t,i,e,s])>1||a(t,i)}))})}function a(t,i){try{(e=n[t](i)).value instanceof d?Promise.resolve(e.value.v).then(h,c):l(r[0][2],e)}catch(t){l(r[0][3],t)}var e}function h(t){a("next",t)}function c(t){a("throw",t)}function l(t,i){t(i),r.shift(),r.length&&a(r[0][0],r[0][1])}}function u(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=a(t),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(e){i[e]=t[e]&&function(i){return new Promise((function(s,n){(function(t,i,e,s){Promise.resolve(s).then((function(i){t({value:i,done:e})}),i)})(s,n,(i=t[e](i)).done,i.value)}))}}}Object.create},8659:(t,i,e)=>{"use strict";var s;e.d(i,{Fw:()=>n,nC:()=>C,f3:()=>E,b2:()=>M,Yn:()=>R,ri:()=>L}),function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"}(s||(s={}));const n=s;var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},r(t,i)};function o(t,i){function e(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function a(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))}function h(t,i){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=i.call(t,o)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function c(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return o}function l(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(d(arguments[i]));return t}function u(t){return!!t.useClass}function p(t){return!!t.useFactory}var f=function(){function t(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(t){var i,e=this,s=!1;return new Proxy({},this.createHandler((function(){return s||(i=t(e.wrap()),s=!0),i})))},t.prototype.createHandler=function(t){var i={};return this.reflectMethods.forEach((function(e){i[e]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return i[0]=t(),Reflect[e].apply(void 0,l(i))}})),i},t}();function m(t){return"string"==typeof t||"symbol"==typeof t}function g(t){return"object"==typeof t&&"token"in t&&"transform"in t}function v(t){return!!t.useToken}function y(t){return null!=t.useValue}const b=function(){function t(){this.MN=new Map}return t.prototype.entries=function(){return this.MN.entries()},t.prototype.getAll=function(t){return this.ensure(t),this.MN.get(t)},t.prototype.get=function(t){this.ensure(t);var i=this.MN.get(t);return i[i.length-1]||null},t.prototype.set=function(t,i){this.ensure(t),this.MN.get(t).push(i)},t.prototype.setAll=function(t,i){this.MN.set(t,i)},t.prototype.has=function(t){return this.ensure(t),this.MN.get(t).length>0},t.prototype.clear=function(){this.MN.clear()},t.prototype.ensure=function(t){this.MN.has(t)||this.MN.set(t,[])},t}();const I=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return o(i,t),i}(b);const P=function(){this.scopedResolutions=new Map};function w(t,i,e){var s,n,r=d(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],o=function(t,i){return null===t?"at position #"+i:'"'+t.split(",")[i].trim()+'" at position #'+i}(void 0===r?null:r,i);return s="Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',void 0===n&&(n="    "),l([s],e.message.split("\n").map((function(t){return n+t}))).join("\n")}var S=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return o(i,t),i}(b),A=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return o(i,t),i}(b);const x=function(){this.preResolution=new S,this.postResolution=new A};var _=new Map,T=function(){function t(t){this.parent=t,this.LN=new I,this.interceptors=new x,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(t,i,e){var s;if(void 0===e&&(e={lifecycle:n.Transient}),this.ensureNotDisposed(),s=function(t){return u(t)||y(t)||v(t)||p(t)}(i)?i:{useClass:i},v(s))for(var r=[t],o=s;null!=o;){var a=o.useToken;if(r.includes(a))throw new Error("Token registration cycle detected! "+l(r,[a]).join(" -> "));r.push(a);var h=this.LN.get(a);o=h&&v(h.provider)?h.provider:null}if((e.lifecycle===n.Singleton||e.lifecycle==n.ContainerScoped||e.lifecycle==n.ResolutionScoped)&&(y(s)||p(s)))throw new Error('Cannot use lifecycle "'+n[e.lifecycle]+'" with ValueProviders or FactoryProviders');return this.LN.set(t,{provider:s,options:e}),this},t.prototype.registerType=function(t,i){return this.ensureNotDisposed(),m(i)?this.register(t,{useToken:i}):this.register(t,{useClass:i})},t.prototype.registerInstance=function(t,i){return this.ensureNotDisposed(),this.register(t,{useValue:i})},t.prototype.registerSingleton=function(t,i){if(this.ensureNotDisposed(),m(t)){if(m(i))return this.register(t,{useToken:i},{lifecycle:n.Singleton});if(i)return this.register(t,{useClass:i},{lifecycle:n.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var e=t;return i&&!m(i)&&(e=i),this.register(t,{useClass:e},{lifecycle:n.Singleton})},t.prototype.resolve=function(t,i){void 0===i&&(i=new P),this.ensureNotDisposed();var e=this.getRegistration(t);if(!e&&m(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),e){var s=this.resolveRegistration(e,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}if(function(t){return"function"==typeof t||t instanceof f}(t)){s=this.construct(t,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(t,i){var e,s;if(this.interceptors.preResolution.has(t)){var n=[];try{for(var r=c(this.interceptors.preResolution.getAll(t)),o=r.next();!o.done;o=r.next()){var a=o.value;"Once"!=a.options.frequency&&n.push(a),a.callback(t,i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(e)throw e.error}}this.interceptors.preResolution.setAll(t,n)}},t.prototype.executePostResolutionInterceptor=function(t,i,e){var s,n;if(this.interceptors.postResolution.has(t)){var r=[];try{for(var o=c(this.interceptors.postResolution.getAll(t)),a=o.next();!a.done;a=o.next()){var h=a.value;"Once"!=h.options.frequency&&r.push(h),h.callback(t,i,e)}}catch(t){s={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}this.interceptors.postResolution.setAll(t,r)}},t.prototype.resolveRegistration=function(t,i){if(this.ensureNotDisposed(),t.options.lifecycle===n.ResolutionScoped&&i.scopedResolutions.has(t))return i.scopedResolutions.get(t);var e,s=t.options.lifecycle===n.Singleton,r=t.options.lifecycle===n.ContainerScoped,o=s||r;return e=y(t.provider)?t.provider.useValue:v(t.provider)?o?t.instance||(t.instance=this.resolve(t.provider.useToken,i)):this.resolve(t.provider.useToken,i):u(t.provider)?o?t.instance||(t.instance=this.construct(t.provider.useClass,i)):this.construct(t.provider.useClass,i):p(t.provider)?t.provider.useFactory(this):this.construct(t.provider,i),t.options.lifecycle===n.ResolutionScoped&&i.scopedResolutions.set(t,e),e},t.prototype.resolveAll=function(t,i){var e=this;void 0===i&&(i=new P),this.ensureNotDisposed();var s=this.getAllRegistrations(t);if(!s&&m(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),s){var n=s.map((function(t){return e.resolveRegistration(t,i)}));return this.executePostResolutionInterceptor(t,n,"All"),n}var r=[this.construct(t,i)];return this.executePostResolutionInterceptor(t,r,"All"),r},t.prototype.isRegistered=function(t,i){return void 0===i&&(i=!1),this.ensureNotDisposed(),this.LN.has(t)||i&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this.LN.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var t,i;this.ensureNotDisposed();try{for(var e=c(this.LN.entries()),s=e.next();!s.done;s=e.next()){var n=d(s.value,2),r=n[0],o=n[1];this.LN.setAll(r,o.filter((function(t){return!y(t.provider)})).map((function(t){return t.instance=void 0,t})))}}catch(i){t={error:i}}finally{try{s&&!s.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}},t.prototype.createChildContainer=function(){var i,e;this.ensureNotDisposed();var s=new t(this);try{for(var r=c(this.LN.entries()),o=r.next();!o.done;o=r.next()){var a=d(o.value,2),h=a[0],l=a[1];l.some((function(t){return t.options.lifecycle===n.ContainerScoped}))&&s.LN.setAll(h,l.map((function(t){return t.options.lifecycle===n.ContainerScoped?{provider:t.provider,options:t.options}:t})))}}catch(t){i={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(i)throw i.error}}return s},t.prototype.beforeResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:i,options:e})},t.prototype.afterResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:i,options:e})},t.prototype.dispose=function(){return a(this,void 0,void 0,(function(){var t;return h(this,(function(i){switch(i.label){case 0:return this.disposed=!0,t=[],this.disposables.forEach((function(i){var e=i.dispose();e&&t.push(e)})),[4,Promise.all(t)];case 1:return i.sent(),[2]}}))}))},t.prototype.getRegistration=function(t){return this.isRegistered(t)?this.LN.get(t):this.parent?this.parent.getRegistration(t):null},t.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this.LN.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},t.prototype.construct=function(t,i){var e=this;if(t instanceof f)return t.createProxy((function(t){return e.resolve(t,i)}));var s,n=function(){var s=_.get(t);if(!s||0===s.length){if(0===t.length)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var n=s.map(e.resolveParams(i,t));return new(t.bind.apply(t,l([void 0],n)))}();return"function"!=typeof(s=n).dispose||s.dispose.length>0||this.disposables.add(n),n},t.prototype.resolveParams=function(t,i){var e=this;return function(s,n){var r,o,a,h;try{return"object"==typeof(h=s)&&"token"in h&&"multiple"in h?g(s)?s.multiple?(r=e.resolve(s.transform)).transform.apply(r,l([e.resolveAll(s.token)],s.transformArgs)):(o=e.resolve(s.transform)).transform.apply(o,l([e.resolve(s.token,t)],s.transformArgs)):s.multiple?e.resolveAll(s.token):e.resolve(s.token,t):g(s)?(a=e.resolve(s.transform,t)).transform.apply(a,l([e.resolve(s.token,t)],s.transformArgs)):e.resolve(s,t)}catch(t){throw new Error(w(i,n,t))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t}(),C=new T;var k="injectionTokens";const E=function(t){return i=t,function(t,s,n){var r=Reflect.getOwnMetadata(k,t)||{};r[n]=e?{token:i,transform:e.transformToken,transformArgs:e.args||[]}:i,Reflect.defineMetadata(k,r,t)};var i,e};const M=function(){return function(t){_.set(t,function(t){var i=Reflect.getMetadata("design:paramtypes",t)||[],e=Reflect.getOwnMetadata(k,t)||{};return Object.keys(e).forEach((function(t){i[+t]=e[t]})),i}(t))}};const L=function(){return function(t){M()(t),C.registerSingleton(t)}};function R(t,i){return function(e){M()(e),C.register(i||e,e,{lifecycle:t})}}if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.")},289:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.common||(t.roots.common=new t.Root)).addJSON({ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoAdDomainBlockingResponse:{fields:{domains:{rule:"repeated",type:"string",id:1}}},ProtoCoreTamBidRequest:{fields:{lineItemId:{type:"string",id:1},code:{type:"string",id:2},metadata:{type:"MetadataModel",id:3},exploration:{type:"bool",id:4}}},MetadataModel:{fields:{version:{type:"int32",id:1},sessionId:{type:"string",id:2},playerId:{type:"string",id:3},userId:{type:"string",id:4},browser:{type:"Browser",id:5},geo:{type:"GeoLocation",id:6},clientAb0:{type:"int32",id:7},clientAb1:{type:"int32",id:8},serverAb0:{type:"int32",id:9},serverAb1:{type:"int32",id:10},pageUrl:{type:"string",id:15},bundleId:{type:"string",id:17},implementationType:{type:"ProtoImplementationType",id:18},shouldTrackAllRequests:{type:"bool",id:19},customParam1:{type:"string",id:20},customParam2:{type:"string",id:21},customParam3:{type:"string",id:22},abTestId:{type:"string",id:24},isPageInFocus:{type:"bool",id:25},customParam4:{type:"string",id:26},customParam5:{type:"string",id:27},bundleAbId:{type:"string",id:28},bundlePart:{type:"string",id:29},clientAb2:{type:"int32",id:31},clientAb3:{type:"int32",id:32},clientAb4:{type:"int32",id:33},clientAb5:{type:"int32",id:34},iiqEnabledAB:{type:"int32",id:35},iiqGroupAB:{type:"int32",id:36},eventTimestamp:{type:"int64",id:37},isIdentityEnhanced:{type:"bool",id:38}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoCoreTamBidResponse:{fields:{errorMessage:{type:"string",id:1},encryptedBidPrice:{type:"string",id:10},ofskp:{type:"double",id:12},impressionTimeSpent:{type:"int32",id:13},bidRate:{type:"double",id:14},successRate:{type:"double",id:15}}},ProtoAssertiveYield:{fields:{requestId:{type:"string",id:1},demandPartnerId:{rule:"repeated",type:"string",id:2},placementId:{type:"string",id:3},userIds:{rule:"repeated",type:"string",id:4},predictions:{rule:"repeated",type:"double",id:5,options:{packed:!1}},bidCpms:{rule:"repeated",type:"double",id:6,options:{packed:!1}},costCpms:{rule:"repeated",type:"double",id:7,options:{packed:!1}}}},ProtoCookieSettings:{fields:{name:{type:"string",id:1},value:{type:"string",id:2},timestamp:{type:"int64",id:3}}},ProtoCookieSyncRequest:{fields:{cookieList:{rule:"repeated",type:"ProtoCookieSettings",id:1},secureMode:{type:"ProtoCookieSecureModeEnum",id:2},browserInfo:{type:"Browser",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},ivt:{type:"bool",id:2},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoDiscount:{oneofs:{BN:{oneof:["rate"]}},fields:{rate:{type:"double",id:2,options:{proto3_optional:!0}},id:{type:"string",id:1}}},ProtoHeaderBidderLineItem:{fields:{lineItem:{type:"ProtoLineItem",id:1},bids:{rule:"repeated",type:"ProtoRtbBid",id:2}}},ProtoLookupRequest:{fields:{panoramaId:{type:"string",id:1}}},ProtoLookupResponse:{fields:{errorMessage:{type:"string",id:1},userId:{type:"string",id:2}}},Insights:{fields:{key:{type:"string",id:1}}},ProtoSentimentAnalysis:{fields:{positive:{type:"double",id:1},neutral:{type:"double",id:2},negative:{type:"double",id:3}}},ProtoInsightsResponse:{fields:{insights:{rule:"repeated",type:"Insights",id:1},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:2}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoIntentIQResponseData:{fields:{vendorName:{type:"string",id:2}}},ProtoLineItem:{oneofs:{RN:{oneof:["floorPricesNew"]},DN:{oneof:["protoIntentiqResponseData"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},protoIntentiqResponseData:{type:"ProtoIntentIQResponseData",id:63,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28,options:{default:10}},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},grossNetPercentageDifference:{type:"int32",id:64},isLexiconSupported:{type:"bool",id:65},infrastructureFee:{type:"double",id:66},optimizeFloorPrice:{type:"bool",id:67},advertiserAccountId:{type:"string",id:68},externallyManaged:{type:"bool",id:69},shouldThrottlePacing:{type:"bool",id:70},demandPartnerId:{type:"int32",id:71},advertiserAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:74},publisherAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:75},playerSize:{type:"string",id:101}}},ProtoAudienceTargetingCase:{fields:{audienceTargetingFilters:{rule:"repeated",type:"ProtoAudienceTargetingFilter",id:1}}},ProtoAudienceTargetingFilter:{fields:{rule:{type:"ProtoTargetingFilterEnum",id:1},audienceIdList:{rule:"repeated",type:"string",id:2}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoTargetingFilterEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{FN:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoLiveMediaMetadataResponse:{fields:{startDate:{type:"string",id:1},outputUrl:{type:"string",id:2},thumbnailUrl:{type:"string",id:3},altText:{type:"string",id:4},name:{type:"string",id:5}}},ProtoLotamePanorama:{fields:{id:{type:"string",id:1},type:{type:"ProtoPanoramaIdTypeEnum",id:2}}},ProtoSpriteSheet:{fields:{file:{type:"string",id:1},height:{type:"int32",id:2},count:{type:"int32",id:3}}},ProtoTrack:{fields:{file:{type:"string",id:1},type:{type:"ProtoTrackType",id:2},code:{type:"string",id:3},title:{type:"string",id:4}}},ProtoCuePoint:{fields:{timeStamp:{type:"int32",id:1}}},ProtoVideoChapter:{fields:{clickUrl:{type:"string",id:1},duration:{type:"int32",id:2},title:{type:"string",id:3},altText:{type:"string",id:4},keywords:{rule:"repeated",type:"string",id:5}}},ProtoCtaButton:{fields:{text:{type:"string",id:1},textColor:{type:"string",id:2},backgroundColor:{type:"string",id:3}}},ProtoMediaMetadataResponse:{fields:{title:{type:"string",id:1},description:{type:"string",id:2},duration:{type:"int32",id:3},clickUrl:{type:"string",id:4},keywordList:{rule:"repeated",type:"string",id:5},trackList:{rule:"repeated",type:"ProtoTrack",id:6},spriteSheet:{type:"ProtoSpriteSheet",id:7},thumbnail:{type:"string",id:8},renditionList:{rule:"repeated",type:"ProtoRendition",id:9},hlsFilePath:{type:"string",id:11},languageId:{type:"string",id:12},sourceItemId:{type:"string",id:13},altText:{type:"string",id:14},cuePoints:{rule:"repeated",type:"ProtoCuePoint",id:16},multimediaId:{type:"string",id:17},publishDate:{type:"uint32",id:18},endDate:{type:"uint32",id:19},contentStudio:{type:"string",id:20},customMetadata:{type:"string",id:21},chapters:{rule:"repeated",type:"ProtoVideoChapter",id:22},separateAudioStreamPath:{type:"string",id:23},hasSeparateAudioStream:{type:"bool",id:24},ctaButton:{type:"ProtoCtaButton",id:26},altTitle:{type:"string",id:27}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoIdentityProviderData:{fields:{group:{type:"ProtoIdentityProviderGroupEnum",id:1},identityProviderEidsList:{rule:"repeated",type:"ProtoIdentityProviderEids",id:2},hasIIQLookup:{type:"bool",id:3},identityPartnerEnum:{type:"ProtoIdentityPartnerEnum",id:4}}},ProtoIdentityProviderEids:{fields:{source:{type:"string",id:1},ids:{rule:"repeated",type:"string",id:2}}},ProtoRtbRequest:{oneofs:{rp:{oneof:["lineItemAbTestInformation"]},jN:{oneof:["panorama"]},xN:{oneof:["uid2Token"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:46,options:{proto3_optional:!0}},panorama:{type:"ProtoLotamePanorama",id:59,options:{proto3_optional:!0}},uid2Token:{type:"string",id:60,options:{proto3_optional:!0}},metadata:{type:"MetadataModel",id:1},coppa:{type:"bool",id:4},refererUrl:{type:"string",id:5},testMode:{type:"bool",id:6},videoWidth:{type:"int32",id:7},videoHeight:{type:"int32",id:8},gdprCompliant:{type:"bool",id:9},soundOn:{type:"bool",id:10},gdprConsentData:{type:"string",id:11},explorationMode:{type:"bool",id:12},viewability:{type:"bool",id:13},outstream:{type:"bool",id:14},domainURL:{type:"string",id:16},isClickToPlay:{type:"bool",id:18},appVersion:{type:"string",id:21},deviceID:{type:"string",id:24},lineItems:{keyType:"string",type:"ProtoRtbRequestLineItemEntry",id:25},isCcpaBlockingUserInfo:{type:"bool",id:26},usPrivacyString:{type:"string",id:27},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:36},maxAdDuration:{type:"int32",id:37,options:{default:180}},customMacros:{keyType:"string",type:"string",id:38},maxBidPrice:{type:"double",id:39},playerWidth:{type:"int32",id:43},playerHeight:{type:"int32",id:44},useNewSkippability:{type:"bool",id:42},liveRampAtsEnvelope:{type:"string",id:45},connectionType:{type:"int32",id:47},OMSDKSupport:{type:"bool",id:48},OMSDKVersion:{type:"string",id:51},identityProviderData:{type:"ProtoIdentityProviderData",id:53},rollType:{type:"ProtoAdRollTypeEnum",id:54},lexiconUids:{rule:"repeated",type:"string",id:55},userIdentificationPending:{type:"bool",id:56},coreSyncTimestamp:{type:"int64",id:57},callAssertiveYield:{type:"bool",id:58}}},ProtoRtbRequestLineItemEntry:{oneofs:{UN:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:16,options:{proto3_optional:!0}},availableRequests:{type:"int32",id:1},gdprConsent:{type:"bool",id:4},publisherLineItemId:{type:"string",id:5},slotWidth:{type:"int32",id:6},slotHeight:{type:"int32",id:7},requestNumber:{type:"int32",id:8},skip:{type:"ProtoSkipEnabledEnum",id:12},skipmin:{type:"int32",id:13},skipafter:{type:"int32",id:14},minDuration:{type:"int32",id:15}}},ProtoCacheFloorPrice:{fields:{floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}},recommended:{type:"int32",id:2}}},ProtoRtbResponse:{fields:{lineItemResponses:{rule:"repeated",type:"ProtoRtbLineItem",id:3},liveRampEnvelopeStatus:{type:"LiveRampEnvelopeStatusEnum",id:4},assertiveYieldPayload:{type:"ProtoAssertiveYield",id:6}}},ProtoRtbBid:{oneofs:{$N:{oneof:["floorPriceInformation"]},qN:{oneof:["discount"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:30,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:31,options:{proto3_optional:!0}},winNoticeUrl:{type:"string",id:2},adQualityCheckUrl:{type:"string",id:3},vastTag:{type:"string",id:4},encryptedPrice:{type:"string",id:6},creativeId:{type:"string",id:7},seatId:{type:"string",id:8},adomain:{type:"string",id:9},syncedUser:{type:"bool",id:10},requestedFloorPrice:{type:"double",id:11},campaignId:{type:"string",id:13},width:{type:"int32",id:14},height:{type:"int32",id:15},billingNoticeUrlList:{rule:"repeated",type:"string",id:16},mime:{type:"string",id:17,options:{default:"text/html"}},gtkpbp:{type:"double",id:18},successRate:{type:"double",id:19},impressionTimeSpent:{type:"int32",id:20},bidRate:{type:"double",id:21},dspId:{type:"string",id:22},cnxBidId:{type:"string",id:23},logAuctionInformation:{type:"bool",id:24},auctionBidId:{type:"string",id:25},rtbRequestId:{type:"string",id:26},liveRampType:{type:"ProtoLiveRampEnum",id:32},serverBillingNoticeUrls:{rule:"repeated",type:"string",id:33},hasLexiconEnvelopeBeenUsed:{type:"bool",id:34},hasIIQLookup:{type:"bool",id:35},customClientEncryptedPrice:{type:"string",id:36}}},ProtoRtbLineItem:{oneofs:{UN:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:6,options:{proto3_optional:!0}},id:{type:"string",id:1},bids:{rule:"repeated",type:"ProtoRtbBid",id:3},noBidsCount:{type:"int32",id:5}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoAdClickTrackingRequest:{oneofs:{rp:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:14,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},publisherLineItemId:{type:"string",id:3},advertiserLineItemId:{type:"string",id:4},type:{type:"ProtoAdClickTypeEnum",id:5},insightIndexes:{rule:"repeated",type:"string",id:10},adBreakType:{type:"ProtoAdBreakTypeEnum",id:11},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:12},pageInsightIndexes:{rule:"repeated",type:"string",id:13},iasSegmentCodes:{rule:"repeated",type:"string",id:15}}},ProtoAdOpportunityRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:2},adBreak:{type:"ProtoAdBreakTypeEnum",id:3},playerWidth:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoAuctionInfoRequest:{fields:{cnxBidId:{type:"string",id:1},auctionInformation:{type:"ProtoAuctionInformation",id:2},auctionLossReason:{type:"ProtoAuctionLossReasonEnum",id:3}}},ProtoAuctionInformation:{fields:{highestObfuscatedBidPrice:{type:"double",id:1},secondHighestObfuscatedBidPrice:{type:"double",id:2},bidDensity:{type:"int32",id:3}}},ProtoFloorPriceInformation:{oneofs:{HN:{oneof:["floorPriceIndexUsed"]},FN:{oneof:["floorPriceBypassReason"]},zN:{oneof:["adxPredictedFloorPrice"]}},fields:{floorPriceIndexUsed:{type:"int32",id:2,options:{proto3_optional:!0}},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:3,options:{proto3_optional:!0}},adxPredictedFloorPrice:{type:"double",id:4,options:{proto3_optional:!0}},floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}}}},ProtoPrebid:{oneofs:{$N:{oneof:["floorPriceInformation"]},GN:{oneof:["identityProviderData"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:16,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:19,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},reason:{type:"ConnatixNoBidReasonEnum",id:5},requestNumber:{type:"int32",id:6},partnerReason:{type:"PartnerNoBidReasonEnum",id:7},requestedFloorPrice:{type:"double",id:8},partnerCustomHeaders:{type:"string",id:9},prebidJsBidderName:{type:"string",id:12},playerWidth:{type:"int32",id:14},playerHeight:{type:"int32",id:15},hasLexiconEnvelopeBeenUsed:{type:"bool",id:20},videoPlacement:{type:"ProtoVideoPlacementEnum",id:21},eventTimestamp:{type:"int64",id:22},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBid:{oneofs:{$N:{oneof:["floorPriceInformation"]},GN:{oneof:["identityProviderData"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:22,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:24,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},requestNumber:{type:"int32",id:5},creativeId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},rtbAdomain:{type:"string",id:8},encryptedPrice:{type:"string",id:9},requestedFloorPrice:{type:"double",id:10},prebidJsBidderName:{type:"string",id:13},customClientPrice:{type:"double",id:14},dspId:{type:"string",id:15},cnxBidId:{type:"string",id:16},playerWidth:{type:"int32",id:18},playerHeight:{type:"int32",id:19},hasLexiconEnvelopeBeenUsed:{type:"bool",id:25},videoPlacement:{type:"ProtoVideoPlacementEnum",id:26},eventTimestamp:{type:"int64",id:27},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoPostBid:{oneofs:{$N:{oneof:["floorPriceInformation"]},qN:{oneof:["discount"]},GN:{oneof:["identityProviderData"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:28,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:30,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:34,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},error:{type:"string",id:5},isBidLoaded:{type:"bool",id:6},creativeId:{type:"string",id:7},rtbSeatId:{type:"string",id:8},rtbAdomain:{type:"string",id:9},adsourceType:{type:"ProtoAdsourceTypeEnum",id:10},vastMediaType:{type:"string",id:11},adPodSlotPosition:{type:"int32",id:12},prebidJsBidderName:{type:"string",id:13},dspId:{type:"string",id:14},cnxBidId:{type:"string",id:15},winToAdLoadedTime:{type:"int32",id:16},auctionInformation:{type:"ProtoAuctionInformation",id:18},auctionPostbidReason:{type:"ProtoAuctionPostbidReasonEnum",id:19},requestNumber:{type:"int32",id:20},floorPrice:{type:"double",id:22},playerWidth:{type:"int32",id:23},playerHeight:{type:"int32",id:24},bidElapsedTimeSeconds:{type:"int32",id:25},adBreakType:{type:"ProtoAdBreakTypeEnum",id:26},liveRampType:{type:"ProtoLiveRampEnum",id:32},hasLexiconEnvelopeBeenUsed:{type:"bool",id:35},videoPlacement:{type:"ProtoVideoPlacementEnum",id:36},eventTimestamp:{type:"int64",id:37},assertiveYieldProbability:{type:"double",id:38},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBidTrackingsRequest:{oneofs:{rp:{oneof:["lineItemAbTestInformation"]},jN:{oneof:["panorama"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:13,options:{proto3_optional:!0}},panorama:{type:"ProtoLotamePanorama",id:15,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},prebids:{rule:"repeated",type:"ProtoPrebid",id:4},bids:{rule:"repeated",type:"ProtoBid",id:5},postBids:{rule:"repeated",type:"ProtoPostBid",id:6},shouldLogEverything:{type:"bool",id:7},hasGdprConsentPayload:{type:"bool",id:10},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:11},isExplorationMode:{type:"bool",id:12}}},ProtoHeavyAdTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},advertiserLineItemId:{type:"string",id:2},heavyAdBlockTypeEnum:{type:"ProtoHeavyAdBlockTypeEnum",id:3},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoInternalAuction:{oneofs:{WN:{oneof:["firstLoser"]},XN:{oneof:["firstOpenMarketLoser"]}},fields:{firstLoser:{type:"ProtoInternalAuctionBid",id:2,options:{proto3_optional:!0}},firstOpenMarketLoser:{type:"ProtoInternalAuctionBid",id:3,options:{proto3_optional:!0}},winnerDemandType:{type:"ProtoDemandTypeEnum",id:1}}},ProtoInternalAuctionBid:{oneofs:{QN:{oneof:["customClientPrice"]},JN:{oneof:["encryptedPrice"]},Bv:{oneof:["adDuration"]}},fields:{customClientPrice:{type:"double",id:2,options:{proto3_optional:!0}},encryptedPrice:{type:"string",id:3,options:{proto3_optional:!0}},adDuration:{type:"double",id:5,options:{proto3_optional:!0}},demandType:{type:"ProtoDemandTypeEnum",id:1},advertiserLineItemId:{type:"string",id:4}}},ProtoMediaClickTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},type:{type:"ProtoMediaClickTypeEnum",id:3},clickUrl:{type:"string",id:4},slideTitle:{type:"string",id:5},slideNumber:{type:"int32",id:6},slideMediaType:{type:"ProtoMediaTypeEnum",id:7},insightIndexes:{rule:"repeated",type:"string",id:12},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:13}}},ProtoMediaQuartileRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},quartile:{type:"ProtoQuartilesEnum",id:4},insightIndexes:{rule:"repeated",type:"string",id:9},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:10}}},ProtoMediaViewRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},insightIndexes:{rule:"repeated",type:"string",id:3}}},ProtoPlayerStartRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},customClientEncryptedPrice:{type:"string",id:4},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionAdBlockerRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},adBlockDetectionType:{type:"ProtoAdBlockDetectionTypeEnum",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionRenderedRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},integrationType:{type:"ProtoIntegrationTypeEnum",id:3},hasAdBlocker:{type:"bool",id:4},bundleName:{type:"string",id:5},playerWidth:{type:"int32",id:6},playerHeight:{type:"int32",id:7},pageInsightIndexes:{rule:"repeated",type:"string",id:8},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionTimeTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},timePlayed:{type:"int32",id:2},timePlayedInView:{type:"int32",id:3},sessionTime:{type:"int32",id:4},stayNextButtonsAppearances:{type:"int32",id:6},pageInsightIndexes:{rule:"repeated",type:"string",id:5},mediaId:{type:"string",id:7},mediaTimePlayed:{type:"int32",id:8},mediaTimePlayedInView:{type:"int32",id:9}}},ProtoSessionViewRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoTrackingResponse:{oneofs:{YN:{oneof:["isViewabilityRestricted"]}},fields:{isViewabilityRestricted:{type:"bool",id:5,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},platformCappedLineItemIdList:{rule:"repeated",type:"string",id:2},impressionRevenue:{type:"double",id:3},adServerLineItemName:{type:"string",id:4}}},ProtoVideoAdImpressionRequest:{oneofs:{$N:{oneof:["floorPriceInformation"]},rp:{oneof:["lineItemAbTestInformation"]},KN:{oneof:["internalAuction"]},qN:{oneof:["discount"]},GN:{oneof:["identityProviderData"]},jN:{oneof:["panorama"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:46,options:{proto3_optional:!0}},lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:47,options:{proto3_optional:!0}},internalAuction:{type:"ProtoInternalAuction",id:48,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:50,options:{proto3_optional:!0}},identityProviderData:{type:"ProtoIdentityProviderData",id:58,options:{proto3_optional:!0}},panorama:{type:"ProtoLotamePanorama",id:64,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},isUserSynced:{type:"bool",id:7},timeSpent:{type:"int32",id:8},encryptedPrice:{type:"string",id:9},creativeId:{type:"string",id:10},rtbSeatId:{type:"string",id:11},rtbAdomain:{type:"string",id:12},customClientPrice:{type:"double",id:13},adsourceType:{type:"ProtoAdsourceTypeEnum",id:14},vastMediaType:{type:"string",id:15},adPodSlotPosition:{type:"int32",id:18},prebidJsBidderName:{type:"string",id:19},dspId:{type:"string",id:20},cnxBidId:{type:"string",id:21},winToAdLoadedTime:{type:"int32",id:22},startAdToImpressionTime:{type:"int32",id:23},declaredDuration:{type:"double",id:24},impressionDuration:{type:"double",id:25},isExplorationMode:{type:"bool",id:26},auctionInformation:{type:"ProtoAuctionInformation",id:27},playerWidth:{type:"int32",id:28},requestNumber:{type:"int32",id:29},floorPrice:{type:"double",id:31},playerHeight:{type:"int32",id:36},bidElapsedTimeSeconds:{type:"int32",id:37},insightIndexes:{rule:"repeated",type:"string",id:38},adBreakType:{type:"ProtoAdBreakTypeEnum",id:40},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:41},hasAdSkip:{type:"bool",id:39},pageInsightIndexes:{rule:"repeated",type:"string",id:42},iasSegmentCodes:{rule:"repeated",type:"string",id:49},liveRampType:{type:"ProtoLiveRampEnum",id:51},serverBillingNoticeUrls:{rule:"repeated",type:"string",id:53},hasLexiconEnvelopeBeenUsed:{type:"bool",id:60},videoPlacement:{type:"ProtoVideoPlacementEnum",id:61},assertiveYieldResult:{type:"ProtoAssertiveYield",id:65},assertiveYieldProbability:{type:"double",id:66},adMediaFileHeight:{type:"int32",id:62},adMediaFileWidth:{type:"int32",id:63},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdImpressionViewableRequest:{oneofs:{rp:{oneof:["lineItemAbTestInformation"]},qN:{oneof:["discount"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:19,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:21,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},dspId:{type:"string",id:8},insightIndexes:{rule:"repeated",type:"string",id:13},hasAdSkip:{type:"bool",id:14},adBreakType:{type:"ProtoAdBreakTypeEnum",id:15},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:16},pageInsightIndexes:{rule:"repeated",type:"string",id:17},rtbAdomain:{type:"string",id:18},iasSegmentCodes:{rule:"repeated",type:"string",id:20},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdQuartilesRequest:{oneofs:{rp:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:20,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},quartile:{type:"ProtoQuartilesEnum",id:7},rtbSeatId:{type:"string",id:8},dspId:{type:"string",id:9},insightIndexes:{rule:"repeated",type:"string",id:14},hasAdSkip:{type:"bool",id:15},adBreakType:{type:"ProtoAdBreakTypeEnum",id:16},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:17},pageInsightIndexes:{rule:"repeated",type:"string",id:18},rtbAdomain:{type:"string",id:19},iasSegmentCodes:{rule:"repeated",type:"string",id:21}}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1,Standalone:5}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdRollTypeEnum:{values:{Outstream:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoVideoPlacementEnum:{values:{InStream:1,AccompanyingContent:2,Interstitial:3,NoContentStandalone:4}},ProtoIdentityPartnerEnum:{values:{None:0,IntentIQ:1,LiveIntent:2}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoCookieSecureModeEnum:{values:{Secure:0,Unsecure:1,Auto:2}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoTargetingFilterEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}},ProtoPanoramaIdTypeEnum:{values:{Unknown:0,PanoIndiv:1,PanoDevice:2}},ProtoTrackType:{values:{ManualSubtitle:0,AutoGeneratedSubtitle:1,ClosedCaptions:2}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoIdentityProviderGroupEnum:{values:{None:0,A:1,B:2,C:3}},ProtoSkipEnabledEnum:{values:{No:0,Yes:1}},LiveRampEnvelopeStatusEnum:{values:{Ok:0,EnvelopeExpired:1,Unauthorized:2}},ConnatixNoBidReasonEnum:{values:{RequestException:0,Timeout:1,EmptyResponse:2,InvalidResponse:3,NoBid:4,BidBelowFloor:5,DealIdMismatch:6,CsInvalidResponse:7,CsRequestException:8,CsEmptyResponse:9,NoLibInPage:11,BidIsNotTargetingAllowedEver:12,VastVersionNotSupported:13,VastHasBannedUrls:18}},PartnerNoBidReasonEnum:{values:{Unknown:0,TechnicalError:1,InvalidRequest:2,KnownWebSpider:3,SuspectedNonHumanTraffic:4,CloudIP:5,UnsupportedDevice:6,BlockedPublisher:7,UnmatchedUser:8,DailyReaderCapMet:9,DailyDomainCapMet:10}},ProtoAdBlockDetectionTypeEnum:{values:{Banner:0,Network:1}},ProtoAdClickTypeEnum:{values:{AdClick:1,AdClickThrough:2,AdSkipClick:3,VolumeClick:4,PauseClick:5,PlayClick:6,FullScreenClick:7,MuteClick:8,UnmuteClick:9,ExitFullScreenClick:10,AdUserClose:11,FloatingCloseClick:12,EmbeddedCloseClick:13}},ProtoAdsourceTypeEnum:{values:{Unknown:0,Vpaid:1,VastMedia:2,CnxMedia:3,Jw:4,Ima:5,AOL:6}},ProtoAuctionLossReasonEnum:{values:{TargetingMismatch:0,CompetitorPriority:1,AdOpportunityEnd:2}},ProtoGdprConsentModeEnum:{values:{Unknown:0,NoCmp:1,NoConsent:2,NoConnatixConsent:3,NotAllDemandConsent:4,AllGood:5}},ProtoAuctionPostbidReasonEnum:{values:{CreativeError:0,SDKFailure:1,UnsupportedMedia:2,TargetingMismatch:3,PlayerError:4}},ProtoHeavyAdBlockTypeEnum:{values:{Global:0,Script:1,VpaidIframe:2,OverlayIframe:3}},ProtoDemandTypeEnum:{values:{None:0,PMP:1,OpenMarket:2,SelfServed:3}},ProtoLiveRampEnum:{values:{None:0,ATS:1,NonATS:2}},ProtoMediaClickTypeEnum:{values:{Click:0,UrlClick:1,VolumeClick:2,PlayClick:3,PauseClick:4,NextClick:5,PreviousClick:6,MuteClick:7,UnmuteClick:8,CloseClick:9,GalleryClick:11,SubtitleClick:12,FullScreenClick:13,ExitFullScreenClick:14,NextButtonClick:15,StayButtonClick:16,CtaButtonClick:17,EmbedCloseClick:18,FloatingCloseClick:19}},ProtoQuartilesEnum:{values:{Start:0,First:1,Second:2,Third:3,Fourth:4}},ProtoIntegrationTypeEnum:{values:{Unknown:0,InAppSdk:1,InAppReactNative:2,InAppFlutter:3,InAppGam:4,InAppWebview:5,WebAmp:6,WebGamSafeIframe:7,WebGamFriendlyIframe:8,Web:9}}})})?s.apply(i,n):s)||(t.exports=r)},7953:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.elements||(t.roots.elements=new t.Root)).addJSON({ProtoElementsRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forcePlaylistId:{type:"string",id:9},version:{type:"int32",id:10},forceLineItemIds:{rule:"repeated",type:"string",id:11},clientAb0:{type:"int32",id:12},clientAb1:{type:"int32",id:13},customParam1:{type:"string",id:16},customParam2:{type:"string",id:17},customParam3:{type:"string",id:18},forceExploration:{type:"bool",id:20},es6:{type:"bool",id:21},bundleId:{type:"string",id:22},forceSourceItemId:{type:"string",id:23},parseDomain:{type:"bool",id:24},implementationType:{type:"ProtoImplementationType",id:25},queryJsTargeting:{keyType:"string",type:"string",id:26},isConsentConnatix:{type:"bool",id:27,options:{default:!0}},isConsentLotame:{type:"bool",id:30},disableTracking:{type:"bool",id:31},referrer:{type:"string",id:32},localTimestamp:{type:"int64",id:33},customParam4:{type:"string",id:34},customParam5:{type:"string",id:35},forceMediaIdList:{rule:"repeated",type:"string",id:36},servingRuleId:{type:"string",id:37},cnxDebug:{type:"bool",id:38},clientAb2:{type:"int32",id:39},clientAb3:{type:"int32",id:40},clientAb4:{type:"int32",id:41},clientAb5:{type:"int32",id:42},iiqEnabledAB:{type:"int32",id:43},iiqGroupAB:{type:"int32",id:44}}},ProtoPlaylistItem:{oneofs:{tV:{oneof:["mediaContentVersionId"]},iV:{oneof:["insightsRevisionNumber"]},eV:{oneof:["disableAdvertising"]}},fields:{mediaContentVersionId:{type:"string",id:3,options:{proto3_optional:!0}},insightsRevisionNumber:{type:"int32",id:4,options:{proto3_optional:!0}},disableAdvertising:{type:"bool",id:5,options:{proto3_optional:!0}},mediaId:{type:"string",id:1},revisionNumber:{type:"int32",id:2}}},ProtoElements:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},upNextMode:{type:"ProtoPlayerUpNextMode",id:4,options:{default:1}},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},timeBetweenAds:{type:"int32",id:14},minTimeBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},responsive:{type:"bool",id:18},ratioWidth:{type:"int32",id:19},ratioHeight:{type:"int32",id:20},fixedWidth:{type:"int32",id:21},fixedHeight:{type:"int32",id:22},casting:{type:"bool",id:23},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:24,options:{packed:!1}},closedCaption:{type:"bool",id:25},muteWatermark:{type:"bool",id:26},expandButton:{type:"bool",id:27},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:28},floatingMode:{type:"ProtoPlayerFloatingMode",id:29},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:30,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:31},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:32},floatingPageElement:{type:"string",id:33},floatingUseElementWidth:{type:"bool",id:34},floatingScrollPosition:{type:"ProtoPositionMode",id:35},floatingGutterX:{type:"int32",id:36},floatingGutterY:{type:"int32",id:37},floatingWidth:{type:"int32",id:38},iconsColor:{type:"string",id:39},accentColor:{type:"string",id:40},tooltipTextColor:{type:"string",id:41},tooltipBackgroundColor:{type:"string",id:42},html:{type:"string",id:43},galleryStyle:{type:"ProtoGalleryStyleMode",id:45},logoPosition:{type:"ProtoLogoPositionMode",id:46},lineItems:{rule:"repeated",type:"ProtoLineItem",id:49},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:50},css:{type:"string",id:51},sessionId:{type:"string",id:52},playlistId:{type:"string",id:53},playerType:{type:"ProtoElementsTypeEnum",id:54},outstreamInitialRendering:{type:"ProtoOutstreamInitialRenderingEnum",id:55},outstreamHouseBackgroundColor:{type:"string",id:56},outstreamTotalAdBreakLength:{type:"int32",id:57},outstreamEndAdBreakPolicy:{type:"ProtoOutstreamEndAdBreakPolicyEnum",id:58},galleryOrientation:{type:"ProtoGalleryOrientationEnum",id:59},playlist:{rule:"repeated",type:"ProtoPlaylistItem",id:60},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:61},floatingYAxisPadding:{type:"int32",id:62},customJsCode:{type:"string",id:63},videoQuality:{type:"ProtoVideoQuality",id:64},initializationSettingsJson:{type:"string",id:65},skipAdAfter:{type:"int32",id:67,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:68},amazonTamSlotId:{type:"string",id:69},midRollOnlyOnLongContent:{type:"bool",id:70,options:{default:!0}},limitClientSideApiUse:{type:"bool",id:71},abTestId:{type:"string",id:72},skipMin:{type:"int32",id:73,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:74},logoResource:{type:"string",id:76},nonlinearPlayerSettings:{type:"ProtoNonlinearPlayerSettings",id:77},displayAdCountdown:{type:"bool",id:78},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:79},prefetchOnPreroll:{type:"bool",id:80,options:{default:!0}},playlistThumbnail:{type:"string",id:81},playlistName:{type:"string",id:82},playlistDescription:{type:"string",id:83},hasFloatingTransition:{type:"bool",id:84,options:{default:!0}},symbolResource:{type:"string",id:85},hasNewDesign:{type:"bool",id:86},videoPlacement:{type:"ProtoVideoPlacementEnum",id:87,options:{default:2}},skipToNextVideoAfter:{type:"int32",id:88},revSharePercentage:{type:"double",id:89},hasAdContentDurationRatio:{type:"bool",id:90},closeButtonLocation:{type:"ProtoCloseButtonLocationEnum",id:91}}},ProtoElementsResponse:{oneofs:{rp:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:31,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoElements",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30},IASSegmentCodes:{rule:"repeated",type:"string",id:32},AmazonTamPubId:{type:"string",id:33},tier:{type:"int32",id:34,options:{default:2}},useIntentiqUserSyncing:{type:"bool",id:35},liveRampPubId:{type:"string",id:36},region:{type:"string",id:37},supportedIdentityPartners:{rule:"repeated",type:"ProtoIdentityPartnerEnum",id:38,options:{packed:!1}},usedAdxHttpClient:{type:"bool",id:39},foundPredictionInV1:{type:"bool",id:40}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoIntentIQResponseData:{fields:{vendorName:{type:"string",id:2}}},ProtoLineItem:{oneofs:{RN:{oneof:["floorPricesNew"]},DN:{oneof:["protoIntentiqResponseData"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},protoIntentiqResponseData:{type:"ProtoIntentIQResponseData",id:63,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28,options:{default:10}},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},grossNetPercentageDifference:{type:"int32",id:64},isLexiconSupported:{type:"bool",id:65},infrastructureFee:{type:"double",id:66},optimizeFloorPrice:{type:"bool",id:67},advertiserAccountId:{type:"string",id:68},externallyManaged:{type:"bool",id:69},shouldThrottlePacing:{type:"bool",id:70},demandPartnerId:{type:"int32",id:71},advertiserAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:74},publisherAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:75},playerSize:{type:"string",id:101}}},ProtoAudienceTargetingCase:{fields:{audienceTargetingFilters:{rule:"repeated",type:"ProtoAudienceTargetingFilter",id:1}}},ProtoAudienceTargetingFilter:{fields:{rule:{type:"ProtoTargetingFilterEnum",id:1},audienceIdList:{rule:"repeated",type:"string",id:2}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoTargetingFilterEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{FN:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},ivt:{type:"bool",id:2},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoOutstreamInitialRenderingEnum:{values:{ExpandWithAd:0,FullyRendered:1}},ProtoOutstreamEndAdBreakPolicyEnum:{values:{Hide:0,HouseScreen:1,Loop:2}},ProtoGalleryStyleMode:{values:{None:0,Detailed:1,Visual:2}},ProtoLogoPositionMode:{values:{None:0,ControlBar:1,BottomRight:2,BottomLeft:3,TopRight:4,TopLeft:5,Center:6}},ProtoGalleryOrientationEnum:{values:{Landscape:0,Portrait:1}},ProtoElementsTypeEnum:{values:{InStream:0,OutStream:1,InStreamInApp:2,Live:3}},ProtoPlayerUpNextMode:{values:{Loop:0,Next:1,Stop:2}},ProtoCloseButtonLocationEnum:{values:{InsideThePlayer:0,OutsideThePlayer:1}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoTargetingFilterEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1,Standalone:5}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdRollTypeEnum:{values:{Outstream:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoVideoPlacementEnum:{values:{InStream:1,AccompanyingContent:2,Interstitial:3,NoContentStandalone:4}},ProtoIdentityPartnerEnum:{values:{None:0,IntentIQ:1,LiveIntent:2}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}}})})?s.apply(i,n):s)||(t.exports=r)},5648:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.playspace||(t.roots.playspace=new t.Root)).addJSON({ProtoPlayspaceVideoSlideRendition:{fields:{width:{type:"int32",id:1},height:{type:"int32",id:2},videoUrl:{type:"string",id:3},codec:{type:"ProtoPlayspaceCodecEnum",id:4}}},ProtoPlayspaceVideoSettings:{fields:{renditions:{rule:"repeated",type:"ProtoPlayspaceVideoSlideRendition",id:1}}},ProtoSlideCapabilityMetadata:{fields:{label:{type:"string",id:1}}},ProtoPlayspaceSlideCapability:{fields:{type:{type:"ProtoPlayspaceSlideCapabilitiesEnum",id:1},metadata:{type:"ProtoSlideCapabilityMetadata",id:2}}},ProtoFallbackStoryResponse:{fields:{storyId:{type:"string",id:1},activeVersionId:{type:"string",id:2}}},ProtoPlayspaceMediaMetadataResponse:{fields:{slides:{rule:"repeated",type:"ProtoPlayspaceSlideMetadata",id:1},storyTitle:{type:"string",id:2},order:{type:"ProtoPlayspaceSlideOrderEnum",id:3},storyName:{type:"string",id:4}}},ProtoPlayspaceSlideMetadata:{fields:{mediaType:{type:"ProtoMediaTypeEnum",id:1},title:{type:"string",id:2},clickUrl:{type:"string",id:3},imageUrl:{type:"string",id:4},slideDuration:{type:"int32",id:5},videoRendition:{type:"ProtoPlayspaceVideoSettings",id:6},type:{type:"ProtoPlayspaceSlideTypeEnum",id:7},coverMetadata:{type:"ProtoPlayspaceCoverMetadata",id:8},descriptionMetadata:{type:"ProtoPlayspaceDescriptionMetadata",id:9},bulletListMetadata:{type:"ProtoPlayspaceBulletListMetadata",id:10},quoteMetadata:{type:"ProtoPlayspaceQuoteMetadata",id:12},instagramMetadata:{type:"ProtoPlayspaceInstagramMetadata",id:16},capabilityList:{rule:"repeated",type:"ProtoPlayspaceSlideCapability",id:13},portraitImageUrl:{type:"string",id:14},mediaContext:{type:"ProtoMediaContextEnum",id:15},altText:{type:"string",id:17},customFields:{type:"string",id:18},keywords:{rule:"repeated",type:"string",id:19},language:{type:"string",id:20}}},ProtoPlayspaceCoverMetadata:{fields:{title:{type:"string",id:1},subtitle:{type:"string",id:2}}},ProtoPlayspaceDescriptionChunk:{fields:{text:{type:"string",id:1},colorScheme:{type:"ProtoPlayspaceColorSchemeEnum",id:2}}},ProtoPlayspaceDescriptionMetadata:{fields:{chunkList:{rule:"repeated",type:"ProtoPlayspaceDescriptionChunk",id:1},label:{type:"ProtoPlayspaceDescriptionChunk",id:2}}},ProtoBulletOptions:{fields:{title:{type:"string",id:1},description:{type:"string",id:2}}},ProtoPlayspaceBulletListMetadata:{fields:{title:{type:"string",id:1},items:{rule:"repeated",type:"ProtoBulletOptions",id:2}}},ProtoPlayspaceQuoteMetadata:{fields:{text:{type:"string",id:1},source:{type:"string",id:2}}},ProtoPlayspaceInstagramMetadata:{fields:{handle:{type:"string",id:1},createdDate:{type:"string",id:2},likes:{type:"string",id:3},comments:{type:"string",id:4}}},ProtoPlayspaceColorPrimary:{fields:{background:{type:"string",id:1,options:{default:"#F1F1F1"}},foreground:{type:"string",id:2,options:{default:"#000000"}}}},ProtoPlayspaceColorSecondary:{fields:{background:{type:"string",id:1,options:{default:"#000000 "}},foreground:{type:"string",id:2,options:{default:"#F1F1F1"}}}},ProtoPlayspaceColorAccent:{fields:{background:{type:"string",id:1},foreground:{type:"string",id:2}}},ProtoPlayspaceRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forceStoryId:{type:"string",id:8},version:{type:"int32",id:9},clientAb0:{type:"int32",id:10},clientAb1:{type:"int32",id:11},forceLineItemIds:{rule:"repeated",type:"string",id:12},customParam1:{type:"string",id:14},customParam2:{type:"string",id:15},customParam3:{type:"string",id:16},forceExploration:{type:"bool",id:17},es6:{type:"bool",id:18},bundleId:{type:"string",id:19},parseDomain:{type:"bool",id:20},implementationType:{type:"ProtoImplementationType",id:21},queryJsTargeting:{keyType:"string",type:"string",id:22},isConsentConnatix:{type:"bool",id:23,options:{default:!0}},isConsentLotame:{type:"bool",id:26},disableTracking:{type:"bool",id:27},referrer:{type:"string",id:28},customParam4:{type:"string",id:29},customParam5:{type:"string",id:30},servingRuleId:{type:"string",id:31},cnxDebug:{type:"bool",id:32},clientAb2:{type:"int32",id:33},clientAb3:{type:"int32",id:34},clientAb4:{type:"int32",id:35},clientAb5:{type:"int32",id:36},iiqEnabledAB:{type:"int32",id:37},iiqGroupAB:{type:"int32",id:38}}},ProtoPlayspace:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},endOfCycleMode:{type:"ProtoEndOfSlideCycleMode",id:4},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},slidesBetweenAds:{type:"int32",id:14},minSlidesBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},casting:{type:"bool",id:18},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:19,options:{packed:!1}},expandButton:{type:"bool",id:20},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:21},floatingMode:{type:"ProtoPlayerFloatingMode",id:22},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:23,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:24},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:25},floatingPageElement:{type:"string",id:26},floatingUseElementWidth:{type:"bool",id:27},floatingScrollPosition:{type:"ProtoPositionMode",id:28},floatingGutterX:{type:"int32",id:29},floatingGutterY:{type:"int32",id:30},floatingWidth:{type:"int32",id:31},html:{type:"string",id:35},lineItems:{rule:"repeated",type:"ProtoLineItem",id:37},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:38},css:{type:"string",id:39},sessionId:{type:"string",id:40},orientation:{type:"ProtoPlayerOrientationEnum",id:41},orientationBreakpoint:{type:"int32",id:42},activeVersion:{type:"string",id:43},storyId:{type:"string",id:44},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:50},floatingYAxisPadding:{type:"int32",id:51},contentTitleTextColor:{type:"string",id:57},useAccentColorForProgressBar:{type:"bool",id:58},primaryColorList:{type:"ProtoPlayspaceColorPrimary",id:59},secondaryColorList:{type:"ProtoPlayspaceColorSecondary",id:60},accentColorList:{type:"ProtoPlayspaceColorAccent",id:61},customJsCode:{type:"string",id:62},initializationSettingsJson:{type:"string",id:63},publisherName:{type:"string",id:64},skipAdAfter:{type:"int32",id:66,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:67},amazonTamSlotId:{type:"string",id:68},limitClientSideApiUse:{type:"bool",id:69},abTestId:{type:"string",id:70},skipMin:{type:"int32",id:71,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:72},logoResource:{type:"string",id:73},activeVersionHasInsights:{type:"bool",id:74},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:76},layout:{type:"ProtoPlayspaceLayoutEnum",id:77},hasFloatingTransition:{type:"bool",id:78,options:{default:!0}},videoPlacement:{type:"ProtoVideoPlacementEnum",id:79,options:{default:4}},revSharePercentage:{type:"double",id:80}}},ProtoPlayspaceResponse:{oneofs:{rp:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:31,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoPlayspace",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30},IASSegmentCodes:{rule:"repeated",type:"string",id:32},AmazonTamPubId:{type:"string",id:33},tier:{type:"int32",id:34,options:{default:2}},useIntentiqUserSyncing:{type:"bool",id:35},liveRampPubId:{type:"string",id:36},region:{type:"string",id:37},supportedIdentityPartners:{rule:"repeated",type:"ProtoIdentityPartnerEnum",id:38,options:{packed:!1}},usedAdxHttpClient:{type:"bool",id:39},foundPredictionInV1:{type:"bool",id:40}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoIntentIQResponseData:{fields:{vendorName:{type:"string",id:2}}},ProtoLineItem:{oneofs:{RN:{oneof:["floorPricesNew"]},DN:{oneof:["protoIntentiqResponseData"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},protoIntentiqResponseData:{type:"ProtoIntentIQResponseData",id:63,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28,options:{default:10}},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},grossNetPercentageDifference:{type:"int32",id:64},isLexiconSupported:{type:"bool",id:65},infrastructureFee:{type:"double",id:66},optimizeFloorPrice:{type:"bool",id:67},advertiserAccountId:{type:"string",id:68},externallyManaged:{type:"bool",id:69},shouldThrottlePacing:{type:"bool",id:70},demandPartnerId:{type:"int32",id:71},advertiserAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:74},publisherAudienceTargetingCases:{rule:"repeated",type:"ProtoAudienceTargetingCase",id:75},playerSize:{type:"string",id:101}}},ProtoAudienceTargetingCase:{fields:{audienceTargetingFilters:{rule:"repeated",type:"ProtoAudienceTargetingFilter",id:1}}},ProtoAudienceTargetingFilter:{fields:{rule:{type:"ProtoTargetingFilterEnum",id:1},audienceIdList:{rule:"repeated",type:"string",id:2}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoTargetingFilterEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{FN:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},ivt:{type:"bool",id:2},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoPlayspaceCodecEnum:{values:{h264:0,hevc:1}},ProtoPlayspaceSlideOrderEnum:{values:{Default:0,Random:1,AlphabeticalAscending:2,AlphabeticalDescending:3}},ProtoPlayerOrientationEnum:{values:{Mixed:0,Portrait:1,Landscape:2}},ProtoEndOfSlideCycleMode:{values:{Loop:0,Stop:1}},ProtoPlayspaceColorSchemeEnum:{values:{Default:0,Accent:1,Primary:2,Secondary:3}},ProtoPlayspaceLayoutEnum:{values:{TopProgressBar:0,BottomProgressBar:1}},ProtoPlayspaceSlideTypeEnum:{values:{Default:0,Cover:1,Description:2,BulletList:3,Stock:4,Quote:5,Instagram:6}},ProtoPlayspaceSlideCapabilitiesEnum:{values:{VolumeControls:0,PlaybackControls:1,PlaylistControls:2,CtaButton:3,TopStoryTitle:4,TopSlideTitle:5}},ProtoMediaContextEnum:{values:{None:0,Logo:1}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoTargetingFilterEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1,Standalone:5}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdRollTypeEnum:{values:{Outstream:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoVideoPlacementEnum:{values:{InStream:1,AccompanyingContent:2,Interstitial:3,NoContentStandalone:4}},ProtoIdentityPartnerEnum:{values:{None:0,IntentIQ:1,LiveIntent:2}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}}})})?s.apply(i,n):s)||(t.exports=r)},1418:(t,i,e)=>{const{Parser:s}=e(1682);t.exports=s},9479:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg>\n'},3409:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"/></svg>\n'},5217:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg>\n'},834:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg>\n'},9040:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg>'},9218:t=>{"use strict";t.exports=new Promise((t=>{const i="https://cd"+(window.cnxEnvParam?"-"+window.cnxEnvParam:"s")+"."+(window.cnxIsOvpDomain?"elements.video":"connatix.com")+"/p/411324/cSyncRemoteEntry.js",e=document.createElement("script");e.src=i,e.onload=()=>{t(window.CookieSync)},document.head.appendChild(e)}))}},i={},e,s,n,r,o,a;function h(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(n.exports,n,n.exports,h),n.loaded=!0,n.exports}h.m=t,h.n=t=>{var i=t&&t.sV?()=>t.default:()=>t;return h.d(i,{a:i}),i},s=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,h.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.sV)return t;if(16&i&&"function"==typeof t.then)return t}var n=Object.create(null);h.r(n);var r={};e=e||[null,s({}),s([]),s(s)];for(var o=2&i&&t;"object"==typeof o&&!~e.indexOf(o);o=s(o))Object.getOwnPropertyNames(o).forEach((i=>r[i]=()=>t[i]));return r.default=()=>t,h.d(n,r),n},h.d=(t,i)=>{for(var e in i)h.o(i,e)&&!h.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},h.f={},h.e=t=>Promise.all(Object.keys(h.f).reduce(((i,e)=>(h.f[e](t,i),i)),[])),h.u=t=>"webpack_container_remote_CookieSync_UserSync"===t?t+".90bf161d28ed1fdf7cfe.js":"floating"===t?t+".2911e71a95d5a9906070.js":void 0,h.miniCssF=t=>{},h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),h.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),n={},r="Connatix.Player:",h.l=(t,i,e,s)=>{if(n[t])n[t].push(i);else{var o,a;if(void 0!==e)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==r+e){o=l;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,h.nc&&o.setAttribute("nonce",h.nc),o.setAttribute("data-webpack",r+e),o.src=t),n[t]=[i];var u=(i,e)=>{o.onerror=o.onload=null,clearTimeout(p);var s=n[t];if(delete n[t],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((t=>t(e))),i)return i(e)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),a&&document.head.appendChild(o)}},h.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"sV",{value:!0})},h.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),o={webpack_container_remote_CookieSync_UserSync:[8117]},a={8117:["default","./UserSync",9218]},h.f.remotes=(t,i)=>{h.o(o,t)&&o[t].forEach((t=>{var e=h.R;e||(e=[]);var s=a[t];if(!(e.indexOf(s)>=0)){if(e.push(s),s.p)return i.push(s.p);var n=i=>{i||(i=new Error("Container missing")),"string"==typeof i.message&&(i.message+='\nwhile loading "'+s[1]+'" from '+s[2]),h.m[t]=()=>{throw i},s.p=0},r=(t,e,r,o,a,h)=>{try{var c=t(e,r);if(!c||!c.then)return a(c,o,h);var d=c.then((t=>a(t,o)),n);if(!h)return d;i.push(s.p=d)}catch(t){n(t)}},o=(t,i,n)=>r(i.get,s[1],e,0,c,n),c=i=>{s.p=1,h.m[t]=t=>{t.exports=i()}};r(h,s[2],0,0,((t,i,e)=>t?r(h.I,s[0],0,t,o,e):n()),1)}}))},(()=>{h.S={};var t={},i={};h.I=(e,s)=>{s||(s=[]);var n=i[e];if(n||(n=i[e]={}),!(s.indexOf(n)>=0)){if(s.push(n),t[e])return t[e];h.o(h.S,e)||(h.S[e]={});h.S[e];var r=[];if("default"===e)(t=>{var i=t=>{return i="Initialization of sharing external failed: "+t,void("undefined"!=typeof console&&console.warn&&console.warn(i));var i};try{var n=h(t);if(!n)return;var o=t=>t&&t.init&&t.init(h.S[e],s);if(n.then)return r.push(n.then(o,i));var a=o(n);if(a&&a.then)return r.push(a.catch(i))}catch(t){i(t)}})(9218);return r.length?t[e]=Promise.all(r).then((()=>t[e]=1)):t[e]=1}}})(),(()=>{var t;h.g.importScripts&&(t=h.g.location+"");var i=h.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var e=i.getElementsByTagName("script");if(e.length)for(var s=e.length-1;s>-1&&!t;)t=e[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),h.p=t})(),(()=>{var t={"connatix.playspace":0};h.f.j=(i,e)=>{var s=h.o(t,i)?t[i]:void 0;if(0!==s)if(s)e.push(s[2]);else if("webpack_container_remote_CookieSync_UserSync"!=i){var n=new Promise(((e,n)=>s=t[i]=[e,n]));e.push(s[2]=n);var r=h.p+h.u(i),o=new Error;h.l(r,(e=>{if(h.o(t,i)&&(0!==(s=t[i])&&(t[i]=void 0),s)){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;o.message="Loading chunk "+i+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,s[1](o)}}),"chunk-"+i,i)}else t[i]=0};var i=(i,e)=>{var s,n,[r,o,a]=e,c=0;if(r.some((i=>0!==t[i]))){for(s in o)h.o(o,s)&&(h.m[s]=o[s]);if(a)a(h)}for(i&&i(e);c<r.length;c++)n=r[c],h.o(t,n)&&t[n]&&t[n][0](),t[n]=0},e=self.cnx_webpack_global=self.cnx_webpack_global||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var c={};(()=>{"use strict";h(8660),h(7175);var t=h(6628),i=h(8657);h.p=(0,t.A)(i.o.connatix);var e=h(289),s=h(6174),n=h(5027),r=h(4656),o=h(5650),a=h(4798);class c{static toProtoStandaloneLineItem(t){return{lineItem:c.toProtoLineItem(t.LineItem),bids:t.Bids.map((t=>c.toProtoBid(t)))}}static toProtoLineItem(t){const{PublisherLineItemId:i,AdvertiserLineItemId:s,Url:n,Type:r,RequireSoundOn:o,RequireViewability:a,RemoveOutOfFocus:h,GdprvId:d,Trackers:l,Duration:u,Renditions:p,MediaCreativeId:f,IgnoreFilledRequests:m,RequestsCap:g,ImpressionsCap:v,Priority:y,PbjsTimeout:b,MediaCreativeClickUrl:I,RequestsCapTimeframe:P,ImpressionsCapTimeframe:w,CapType:S,CreativeHlsFileName:A,TimeBetweenRequests:x,MediaTargeting:_,MediaKeywordsTargeting:T,MediaLanguageTargeting:C,AdType:k,OverlayTime:E,FloorPrice:M,AdBreakSettings:L,OutOfViewPauseType:R,MoatTrackingEnabled:B,CreativeId:O,BlockedDomainsRevisionNumber:D,AdvertiserContextualTargeting:N,PublisherContextualTargeting:F,PlayerSizeTargetings:$,AmazonDealId:V,PlayerOrientationTargeting:j,SkipMin:U,Skippability:q,AdOpportunityForceCalling:H,NetworkExpiryTime:z,NonlinearLineItemSettings:W,NewFloorPrices:G,PrebidParams:X,IsPmp:Q,QueryJsTargeting:J,AdxInfoModel:Y,IntentIQ:K,OptimizeFloorPrice:Z,AdvertiserAccountId:tt,ExternallyManaged:it,ShouldThrottlePacing:et,GrossNetPercentageDifference:st}=t,nt={publisherLineItemId:i,advertiserLineItemId:s,adTag:n,creativeType:r,sound:o,viewability:a,removeOutOfFocus:h,vendorId:d,trackers:c.getLineItemTrackers(l),duration:u,renditions:c.getLineItemRenditions(p),mediaCreativeId:f,ignoreFilledRequests:m,requestCap:g,impressionCap:v,lineItemPriority:y,headerBidderTimeout:b,mediaCreativeClickUrl:I,resetRequestsCapTime:P,resetImpressionsCapTime:w,resetCapType:S,creativeHlsFileName:A,timeBetweenRequests:x,mediaIdTargeting:c.getLineItemMediaTargeting(_),mediaKeywordsTargeting:c.getLineItemMediaTargeting(T),mediaLanguageTargeting:c.getLineItemMediaTargeting(C),adType:k,overlayTime:E,floorPrice:M,adBreakSettings:c.getLineItemAdBreakSettings(L),pauseAdOutOfView:R,moatTrackingEnabled:B,cnxCreativeId:O,blockedDomainsRevisionNumber:D,advertiserContextualTargeting:c.getLineItemContextualTargeting(N),publisherContextualTargeting:c.getLineItemContextualTargeting(F),playerSizeTargetings:c.getLineItemPlayerSizeTargetings($),amazonDealId:V,playerOrientationTargeting:j,skipMin:U,skippability:q,forceCallingInEveryAO:H,networkExpiryTimeSeconds:z,nonlinearLineItemSettings:c.getLineItemNonlinearLineItemSettings(W),floorPricesNew:c.getLineItemFloorPricesNew(G),prebidJsBidParamsJSONString:X,isPMP:Q,queryTargeting:c.getLineItemQueryTargeting(J),adxFloorPricePredictionList:c.getLineItemAdxFloorPricePredictionList(Y),protoIntentiqResponseData:c.getLineItemProtoIntentiqResponseData(K),optimizeFloorPrice:Z,advertiserAccountId:tt,externallyManaged:it,shouldThrottlePacing:et,grossNetPercentageDifference:st};return c.applyDefaults(nt,e.ProtoLineItem)}static applyDefaults(t,i){const e=c.generateDefaultObject(i);for(const i in t)!(0,a.Ft)(t[i])&&(0,a.$K)(t[i])||(t[i]=e[i]);return t}static getLineItemTrackers(t){if(!(0,o.BZ)(t))return;const i=t.map((t=>({type:t.Type,trigger:t.Trigger,url:t.Url})));return c.applyDefaults(i,e.CreativeTrackerViewModel)}static getLineItemRenditions(t){if(!(0,o.BZ)(t))return;const i=t.map((t=>({height:t.Height,codec:t.VideoCodec,file:t.FileName})));return c.applyDefaults(i,e.ProtoRendition)}static getLineItemMediaTargeting(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({choiceCriteria:t.Type,items:t.Items},e.ProtoTargetingChoiceModel)}static getLineItemAdBreakSettings(t){var i,s,n;if(!(0,a.$K)(t)||!(0,a.as)(t))return;let r,h;return(0,o.BZ)(t.AdBreakTargeting)&&(r=c.applyDefaults({adBreakTargeting:t.AdBreakTargeting.map((t=>({adRollType:t.AdRollType,adBreakType:t.AdBreakType})))},e.ProtoLineItemAdBreakTargeting)),(0,a.as)(t.AdPodTargeting)&&(h=c.applyDefaults({adPodTargeting:{targetingType:null===(i=null==t?void 0:t.AdPodTargeting)||void 0===i?void 0:i.TargetingType,adSlotPositions:null===(s=null==t?void 0:t.AdPodTargeting)||void 0===s?void 0:s.AdSlotPositions,adSlotTargetingType:null===(n=null==t?void 0:t.AdPodTargeting)||void 0===n?void 0:n.AdSlotTargetingType}},e.ProtoLineItemAdPodTargeting)),Object.assign(Object.assign({},r),h)}static getLineItemContextualTargeting(t){if((0,o.BZ)(t))return t.map((t=>c.applyDefaults({filters:t.Filters.map((t=>c.applyDefaults({type:t.Type,level:t.Level,hashedItemsIds:t.HashedItemsIds},e.ProtoContextualTargetingFilterModel)))},e.ProtoContextualTargetingCaseModel)))}static getLineItemPlayerSizeTargetings(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({sizeChoiceCriteria:t.Type,minWidth:t.MinWidth,maxWidth:t.MaxWidth},e.ProtoPlayerSizeTargetings)}static getLineItemNonlinearLineItemSettings(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({nonLinearRequestType:t.NonlinearRequestType,nonLinearAdTimeSeconds:t.NonlinearAdTimeSeconds},e.ProtoNonlinearLineItemSettings)}static getLineItemFloorPricesNew(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({floorPrices:t.FloorPrices.map((t=>c.applyDefaults({floorPriceBypassReason:t.Reason,floorPrice:t.Reason},e.ProtoFloorPricesData))),recommended:t.Recommended},e.ProtoFloorPricesNewModel)}static getLineItemQueryTargeting(t){if((0,o.BZ)(t))return t.map((t=>c.applyDefaults({rule:t.Type,keyValue:t.Values},e.ProtoLineItemQueryStringTargeting)))}static getLineItemAdxFloorPricePredictionList(t){if((0,o.BZ)(t))return t.map((t=>c.applyDefaults({predictedPriceObfuscated:t.PricePredictionObfuscated,floorPriceObfuscated:t.FloorPriceObfuscated,uprQueryName:t.UprQueryName,uprQueryValue:t.UprQueryValue},e.ProtoAdxFloorPricePrediction)))}static getLineItemProtoIntentiqResponseData(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({vendorName:t.VendorName},e.ProtoIntentIQResponseData)}static toProtoBid(t){const{WinNoticeUrl:i,AdQualityCheckUrl:s,Content:n,EncryptedPrice:r,CustomClientEncryptedPrice:o,CreativeId:a,SeatId:h,Adomain:d,SyncedUser:l,RequestedFloorPrice:u,CampaignId:p,Width:f,Height:m,BillingNoticeUrls:g,Mime:v,BidPrice:y,DspId:b,CnxBidId:I,LogAuctionInformation:P,AuctionBidId:w,BidId:S,FloorPriceInformation:A,Discount:x,LiveRamp:_,ServerBillingNoticeUrls:T,IIQLookup:C,IsLexiconEnabled:k}=t,E={winNoticeUrl:i,adQualityCheckUrl:s,vastTag:n,encryptedPrice:r,customClientEncryptedPrice:o,creativeId:a,seatId:h,adomain:d,syncedUser:l,requestedFloorPrice:u,campaignId:p,width:f,height:m,billingNoticeUrlList:g,mime:v,gtkpbp:y,dspId:b,cnxBidId:I,logAuctionInformation:P,auctionBidId:w,rtbRequestId:S,floorPriceInformation:c.getBidFloorPriceInformation(A),discount:c.getBidDiscount(x),liveRampType:_,serverBillingNoticeUrls:T,hasLexiconEnvelopeBeenUsed:k,hasIIQLookup:C};return c.applyDefaults(E,e.ProtoRtbBid)}static getBidFloorPriceInformation(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({floorPrices:t.FloorPrices,floorPriceIndexUsed:t.FloorPriceIndexUsed,floorPriceBypassReason:t.FloorPriceFactorBypassReason,adxPredictedFloorPrice:t.AdxPredictedFloorPrice},e.ProtoFloorPriceInformation)}static getBidDiscount(t){if((0,a.$K)(t)&&(0,a.as)(t))return c.applyDefaults({id:t.Id,rate:t.Rate},e.ProtoDiscount)}static generateDefaultObject(t){const i=t.encode({}).finish();return t.toObject(t.decode(i),{defaults:!0,arrays:!0,objects:!0})}}class d{constructor(t){this.nV=[],(0,a.$K)(t)&&(0,o.BZ)(t)&&(this.nV=t.map((t=>c.toProtoStandaloneLineItem(t))),this.rV())}get bestStandaloneAd(){if(this.hV())return this.aV}get standaloneLineItemsWithBids(){return this.nV}filterOutDuplicatesForStandalone(t){if(!(0,o.BZ)(this.nV))return t;return this.nV.map((t=>t.lineItem)).reduce(((t,i)=>{const e=t.find((t=>t.advertiserLineItemId===i.advertiserLineItemId));if(e){const s=t.indexOf(e);t[s]=i}else t.push(i);return t}),t)}rV(){let t=Number.MIN_SAFE_INTEGER;this.nV.forEach((i=>{const{lineItem:e}=i;i.bids.forEach((i=>{const s=(0,r.RC)(i.gtkpbp);s>t&&(t=s,this.aV={bid:i,lineItem:e})}))}))}hV(){return(0,o.BZ)(this.nV)}}var l=h(307),u=h(6027),p=(h(7129),h(5742)),f=h(6153),m=h(2859),g=h(4772);class v{constructor(t=!1){this._debugLogging=t,this.cV="eventEmitted",this.Xd=new m.Q}subscribe(t){return this.Xd.on(this.cV,t)}unsubscribe(t){this.Xd.remove(this.cV,t)}emitSessionStart(t){const i={videoMetadata:t};this.dV({metadata:i,name:g.Z.SessionStart})}emitContentComplete(){this.dV({name:g.Z.ContentComplete})}emitSessionEnd(){this.dV({name:g.Z.SessionEnd})}emitPlay(){this.dV({name:g.Z.Play})}emitPause(){this.dV({name:g.Z.Pause})}emitAdPlay(){this.dV({name:g.Z.AdPlay})}emitAdPause(){this.dV({name:g.Z.AdPause})}emitAdPlaying(t){const i={adType:t};this.dV({name:g.Z.AdPlaying,metadata:i})}emitAdPaused(t){const i={adType:t};this.dV({name:g.Z.AdPaused,metadata:i})}emitAdImpression(t,i,e){const s={adMetadata:t,customAdMetadata:i,adType:e};this.dV({metadata:s,name:g.Z.AdImpression})}emitAdComplete(t){const i={adType:t};this.dV({name:g.Z.AdComplete,metadata:i})}emitAdStopped(t){const i={adType:t};this.dV({name:g.Z.AdStopped,metadata:i})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.dV({metadata:i,name:g.Z.AdBreakStart})}emitAdBreakComplete(t){const i={adType:t};this.dV({name:g.Z.AdBreakComplete,metadata:i})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.dV({metadata:i,name:g.Z.PlayerResized})}emitOnEnterFullscreen(){this.dV({name:g.Z.OnEnterFullscreen})}emitOnExitFullscreen(){this.dV({name:g.Z.OnExitFullscreen})}emitOnPlayerCollapsed(){this.dV({name:g.Z.PlayerCollapsed})}emitOnPlayerExpanded(t){const i={playerDimensionsMetadata:t};this.dV({name:g.Z.PlayerExpanded,metadata:i})}emitAdExpandedChange(t){const i={adType:t};this.dV({name:g.Z.AdExpandedChange,metadata:i})}emitAdError(t){const i={adType:t};this.dV({name:g.Z.AdError,metadata:i})}emitPlayError(){this.dV({name:g.Z.PlayError})}emitRenderError(){this.dV({name:g.Z.RenderError})}emitAdClickThru(t){const i={adType:t};this.dV({name:g.Z.AdClickThru,metadata:i})}emitAdInteraction(t){const i={adType:t};this.dV({name:g.Z.AdInteraction,metadata:i})}emitAdVideoStart(t,i){const e={adVideoStartMetadata:t,adType:i};this.dV({metadata:e,name:g.Z.AdVideoStart})}emitAdLoaded(t,i){const e={adLoadedMetadata:t,adType:i};this.lV=t,this.dV({metadata:e,name:g.Z.AdLoaded})}emitAdStateChange(t,i){const e={adStateChangedMetadata:t,adType:i};this.uV=t,this.dV({metadata:e,name:g.Z.AdStateChange})}emitAdVideoFirstQuartile(t){const i={adType:t};this.dV({name:g.Z.AdVideoFirstQuartile,metadata:i})}emitAdVideoMidpoint(t){const i={adType:t};this.dV({name:g.Z.AdVideoMidpoint,metadata:i})}emitAdVideoThirdQuartile(t){const i={adType:t};this.dV({name:g.Z.AdVideoThirdQuartile,metadata:i})}emitAdVideoComplete(t){const i={adType:t};this.dV({name:g.Z.AdVideoComplete,metadata:i})}emitVolumeChange(t){this.dV({name:g.Z.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(t){const i={adType:t};this.dV({name:g.Z.AdVolumeChange,metadata:i})}emitAdSkipped(t){const i={adType:t};this.dV({name:g.Z.AdSkipped,metadata:i})}dV(t){var i;(null===(i=null==t?void 0:t.metadata)||void 0===i?void 0:i.adType)!==e.ProtoAdType.Nonlinear&&(this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.Xd.trigger(this.cV,t))}get adLoadedMetadata(){return this.lV}get adStateMetadata(){return this.uV}destroy(){this.dV({name:g.Z.Destroy}),this.Xd.removeAll()}}var y=h(1553),b=h(3222),I=h(3020),P=h(9791),w=h(2728),S=h(9607),A=h(3003),x=h(7945);const _=`cnx-playspace-css-${x.g.version}`;var T=h(5648),C=h(1280),k=h(8049),E=h(9906);class M{constructor(){this.pV=[],this.fV=0,this.vV=!1,this.mV=t=>{this.pV.forEach((i=>{t&&t!==i.element||this.gV(i,this.fV)}))}}yV(t){let i=this.pV.find((i=>i.element===t));return i||(i={element:t,list:[],cachedPercentInView:0},this.pV.push(i)),i.list}gV(t,i){t.list.forEach((t=>{const e=t.threshold<=i,s=e?t.callbackDelay:0;(t.sentViewabilityValue!==e||t.fireOnBackgroundChange&&t.sentBackgroundValue!==this.vV)&&(!1===e&&clearTimeout(t.timeout),t.sentViewabilityValue=e,t.sentBackgroundValue=this.vV,t.timeout=(0,P.ld)(t.callback,s,e,this.vV))}))}on(t,i,e){this.yV(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i,sentBackgroundValue:!1,sentViewabilityValue:!1,fireOnBackgroundChange:!!e.fireOnInAppBackgroundChange}),this.mV()}off(t,i){const e=this.pV.find((i=>i.element===t));if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this.pV.splice(this.pV.indexOf(e))}}check(t={threshold:.1}){return this.fV>=t.threshold}triggerRecheck(t){this.mV(t)}bV(t){this.vV=t}setViewableThreshold(t){this.fV=t,this.triggerRecheck()}observeOutOfViewDistance(t,i,e){this.PV=new IntersectionObserver((([t])=>{t.isIntersecting&&e()}),{rootMargin:`${i}px`}),this.PV.observe(t)}disconnectOutOfViewObserver(){var t;null===(t=this.PV)||void 0===t||t.disconnect()}subscribe(t,i){}destroy(){for(let t=this.pV.length;t--;){const i=this.pV[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}var L=h(8532),R=h(1783),B=h(4646);const O=[R.li.backgrounded,R.li.notFound,R.li.hidden],D=O.filter((t=>t!==R.li.hidden)),N=["jp.gocro.smartnews","jp.gocro.smartnews.android","cnx.bg.test"];class F extends M{constructor(t,i,e,s,n){super(),this.Th=t,this.Ao=i,this.us=e,N.includes(s)?this.wV=D:this.wV=O;try{this.Xd=new m.Q,this.zT(),this.Ao.isOmsdkFullSupport&&this.Ao.omidAdSessionStart.subscribe((t=>{this.zT()}))}catch(t){(0,S.nF)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:n?S.D_.CRITICAL:S.D_.INFO,sessionId:this.us})}}subscribe(t,i){return this.Xd.on(t,i)}setViewableThreshold(t){}AV(t){super.setViewableThreshold(t)}zT(){const t=B.$.getVerificationClient(this.Th);if(!t)throw new Error("omid_verification_client_not_found");if(this.SV=new t,!this.SV.isSupported())throw new Error("omid_not_implemented");this._V(),this.Pu()}_V(){this.SV.registerSessionObserver((t=>{t&&t.type===R.gC.sessionError&&(0,S.nF)({message:"omid_verification_client_session_error",exception:t.data.message,level:S.D_.WARN,sessionId:this.us})}))}TV(t=[],i){if(0===t.length)return!1;let e;for(const i of this.wV)for(const s of t)if(s===i){e=i;break}return e===R.li.hidden?0===i.x&&0===i.y:!!e}Pu(){this.SV.addEventListener(R.gC.geometryChange,(t=>{try{const{percentageInView:i,reasons:e,geometry:s={}}=t.data.adView;this.bV(this.TV(e,s));const n=i/100;this.AV(n),this.Xd.trigger(L.jJ.OmidViewabilityThreshold,n)}catch(t){(0,S.nF)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:S.D_.CRITICAL,sessionId:this.us},{throttle:1})}}))}}var $;!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}($||($={}));class V{constructor(t,i,e,s=!1){this.Th=t,this.xV=i,this.cl=e,this.pV=[],this.kV=$.none,this.CV={intersectionObserver:!1,fallbackImplementation:!1},this.EV=null,this.LV=[0,.01,.1,.2,.5],this.BV=250,this.RV=t=>{this.cl.isPageInFocus=t,this.mV()},this.mV=()=>{this.pV.forEach((t=>{const i=this.fV(t.element);this.onViewHandle(t,i)}))},this.OV=()=>{null===this.EV&&(this.EV=setTimeout((()=>{this.mV(),clearTimeout(this.EV),this.EV=null}),this.BV))},this.DV=(0,P.pE)(this.Th).topFrame,this.NV(s),this.VV(),this.FV()}FV(){this.xV.on(this.RV),this.cl.isPageInFocus=this.xV.isDocumentVisible()}NV(t){this.Th.IntersectionObserver&&!t?this.CV.intersectionObserver=!0:this.CV.fallbackImplementation=!0,this.Th.self!==this.Th.top?(this.jV=this.UV(this.Th),null!==this.jV?this.kV=$.friendly:this.kV=$.safe):this.jV=this.Th.frameElement}UV(t){let i;try{if(i=t.parent,i===this.Th.top)return t.frameElement}catch(t){return null}return this.UV(i)}VV(){this.CV.intersectionObserver?this.$V=new this.Th.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.LV}):(this.DV.addEventListener("scroll",this.OV),this.DV.addEventListener("load",this.mV),this.DV.addEventListener("resize",this.mV))}qV(t){return this.pV.find((i=>i.element===t))}fV(t){if(this.kV===$.safe){const i=this.qV(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.Th.top.innerHeight-e.top)/e.height,leftRatio:(this.Th.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach((t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])})),i}onObserverEnter(t){t.forEach((t=>{this.pV.filter((i=>i.element===t.target)).forEach((i=>{this.onViewHandle(i,t.intersectionRatio)}))}))}onViewHandle(t,i){t.cachedPercentInView=i;const e=this.cl.isPageInFocus;t.list.forEach((t=>{!t.callbackSent&&t.threshold<=i&&e?(t.callbackSent=!0,t.timeout=(0,P.ld)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!e)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,P.ld)(t.callback,0,!1))}))}on(t,i,e={}){let s=!1;if(this.CV.fallbackImplementation)if(this.kV===$.friendly&&t.ownerDocument.defaultView!==this.Th.top)t=this.jV;else if(this.kV===$.safe)return void(0,P.ld)(i,0,!1);let n=this.pV.find((i=>i.element===t));n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.pV.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.CV.intersectionObserver?(s&&this.$V.unobserve(t),this.$V.observe(t)):this.CV.fallbackImplementation&&this.mV()}off(t,i){const e=this.pV.find((i=>i.element===t));if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.$V&&this.$V.unobserve(t),this.pV.splice(this.pV.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;this.kV===$.friendly&&(i=this.jV);const e=this.cl.isPageInFocus;return this.fV(i)>=t.threshold&&e}triggerRecheck(t){this.CV.fallbackImplementation&&t&&this.pV.forEach((i=>{if(i.element===t){const t=this.fV(i.element);this.onViewHandle(i,t)}}))}setViewableThreshold(t){}observeOutOfViewDistance(t,i,e){this.PV=new IntersectionObserver((([t])=>{t.isIntersecting&&e()}),{rootMargin:`${i}px`}),this.PV.observe(t)}disconnectOutOfViewObserver(){var t;null===(t=this.PV)||void 0===t||t.disconnect()}subscribe(t,i){}destroy(){this.DV.removeEventListener("scroll",this.OV),this.DV.removeEventListener("load",this.mV),this.DV.removeEventListener("resize",this.mV);[].slice.call(this.pV).forEach((t=>{[].slice.call(t.list).forEach((i=>{this.off(t.element,i.callback),this.Th.clearTimeout(i.timeout)}))})),this.xV.off(this.RV),clearTimeout(this.EV)}}var j=h(51);function U(t,i){const s=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),n=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return s.players.push(n),s.browser=e.Browser.toObject(e.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),s.geoLocation=e.GeoLocation.toObject(e.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),s}var q,H=h(6578),z=h(9490);!function(t){t.Float="float",t.Embed="embed"}(q||(q={}));const W={PlaybackModeEnum:{AutoPlay:e.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:e.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:e.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:e.ProtoPlayerSoundMode.On,Off:e.ProtoPlayerSoundMode.Mute,OnHover:e.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:e.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:e.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:e.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:e.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:e.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:e.ProtoPlayerCloseButtonMode.Off,On:e.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:e.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:e.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:e.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:e.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:z.se,LineItemExcludedSlotsEnum:{PreRoll:e.ProtoAdSlotsEnum.PreRoll,MidRoll:e.ProtoAdSlotsEnum.MidRoll,PostRoll:e.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:L.n9.SetupError,NoPlayer:L.n9.NoPlayer},FloatingModeEnum:{Off:e.ProtoPlayerFloatingMode.Off,OnPageLoad:e.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:e.ProtoPlayerFloatingMode.AfterInView,Always:e.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:e.ProtoDeviceType.Desktop,Smartphone:e.ProtoDeviceType.Smartphone,Tablet:e.ProtoDeviceType.Tablet,Other:e.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:e.ProtoFloatingFixedPositionMode.Page,Element:e.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:e.ProtoPositionMode.BottomRight,BottomLeft:e.ProtoPositionMode.BottomLeft,TopRight:e.ProtoPositionMode.TopRight,TopLeft:e.ProtoPositionMode.TopLeft,PinnedTop:e.ProtoPositionMode.PinnedTop,PinnedBottom:e.ProtoPositionMode.PinnedBottom},FloatingStatesEnum:{Float:q.Float,Embed:q.Embed},FloatingAppendLocationEnum:{Above:e.ProtoFloatingAppendLocationEnum.Above,Below:e.ProtoFloatingAppendLocationEnum.Below,Within:e.ProtoFloatingAppendLocationEnum.Within},ImplementationTypeEnum:{Amp:e.ProtoImplementationType.Amp,Web:e.ProtoImplementationType.Web},ImpressionTrackerTypeEnum:{Image:e.ProtoTrackerType.Image,Javascript:e.ProtoTrackerType.Javascript,IAS:e.ProtoTrackerType.IAS}};var G;!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(G||(G={}));const X=G,Q=Object.assign(Object.assign({},W),{EndOfSlideCycleEnum:{Loop:T.ProtoEndOfSlideCycleMode.Loop,Stop:T.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:X.Portrait,Landscape:X.Landscape},OrientationEnum:{Mixed:T.ProtoPlayerOrientationEnum.Mixed,Portrait:T.ProtoPlayerOrientationEnum.Portrait,Landscape:T.ProtoPlayerOrientationEnum.Landscape}});var J=h(5227);const Y={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",GeneralClickInteraction:"generalClickInteraction"},K={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},Z=Object.assign(Object.assign({},J.dP),{ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",ContentStart:"ContentStart",ContentEnd:"ContentEnd"}),tt="slideTransitionStart",it="slideChanged",et="slideTransitionEnd",st="slideTimeUpdate",nt="slideCycleEnd",rt=Object.assign(Object.assign({},K),Y),ot=Object.assign(Object.assign({},L.Km),rt);var at=h(9022),ht=h(9357),ct=h(7423),dt=h(6115);class lt{constructor(t=0){this.vj=t,this.mj=16,this.gj=9}getHeightByRatio(t){return Math.round(t/this.mj*this.gj)+this.vj}setExtraHeight(t){this.vj=t}}const ut=[e.ProtoDeviceType.Smartphone];function pt(t,i){return function(t){return ut.indexOf(t)>-1}(i)&&(t===e.ProtoPositionMode.PinnedBottom||t===e.ProtoPositionMode.PinnedTop)}class ft{constructor(t,i,s={},n){this.extraHeight=i,this.yj=n,this.cachedExtraHeight=0,this.isPinnedFloating=pt(t.floatingScrollPosition,this.yj),this.floatingPosition=(0,a.$K)(s.fixedPosition)?s.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=(0,a.$K)(s.scrollPosition)?s.scrollPosition:t.floatingScrollPosition,this.bj=(0,a.$K)(s.floatingWidth)?s.floatingWidth:t.floatingWidth||400,this.Ij=(0,a.$K)(s.floatingGutterX)?s.floatingGutterX:t.floatingGutterX,this.Pj=(0,a.$K)(s.floatingGutterY)?s.floatingGutterY:t.floatingGutterY,this.hasFloatingTransition=(0,a.$K)(s.hasFloatingTransition)?s.hasFloatingTransition:t.hasFloatingTransition,this.appendLocation=(0,a.$K)(s.floatingAppendLocation)?s.floatingAppendLocation:t.floatingAppendLocation,this.floatingYAxisPadding=(0,a.$K)(s.floatingYAxisPadding)?s.floatingYAxisPadding:t.floatingYAxisPadding,this.setScrollPosition(this.floatingScrollPosition),this.floatingScrollPosition!==e.ProtoPositionMode.PinnedTop&&this.floatingScrollPosition!==e.ProtoPositionMode.PinnedBottom||(this.cachedExtraHeight=i,i=0),this.wj=new lt(i)}setScrollPosition(t){this.floatingScrollPosition=t,this.isPinnedFloating=pt(t,this.yj),this.Aj=t===e.ProtoPositionMode.BottomLeft||t===e.ProtoPositionMode.TopLeft,this.Sj=t===e.ProtoPositionMode.BottomRight||t===e.ProtoPositionMode.TopRight,this._j=t===e.ProtoPositionMode.TopLeft||t===e.ProtoPositionMode.TopRight||t===e.ProtoPositionMode.PinnedTop}get isPositionedLeft(){return this.Aj}get isPositionedRight(){return this.Sj}get isPositionedTop(){return this._j}get gutterX(){return this.isPinnedFloating?0:this.Ij}get gutterY(){return this.Pj}set isPositionedLeft(t){this.Aj=t}set isPositionedRight(t){this.Sj=t}set floatingWidth(t){this.bj=t}set gutterX(t){this.Ij=t}set gutterY(t){this.Pj=t}get floatingWidth(){return this.bj}getHeight(t){if(this.isPinnedFloating){const i=.65*t;t=Math.min(i,435)}return`${this.wj.getHeightByRatio(t)}px`}setExtraHeight(t){this.wj.setExtraHeight(t)}}class mt{constructor(t,i,s={},n){this.extraHeight=i,this.floatingMode=(0,a.$K)(s.mode)?s.mode:t.floatingMode,(0,o.BZ)(s.devices)?this.floatingDeviceMode=s.devices:this.floatingDeviceMode=(0,o.BZ)(t.floatingDeviceMode)?t.floatingDeviceMode:[e.ProtoDeviceType.Desktop],(0,a.$K)(s.closeButton)?this.floatingCloseButtonMode=s.closeButton:(0,a.$K)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=e.ProtoPlayerCloseButtonMode.OnHover,this.pageElement=(0,a.$K)(s.floatingPageElement)?s.floatingPageElement:t.floatingPageElement,this.floatingHelperSettings=new ft(t,i,s,n),this.Tj=this.floatingMode!==e.ProtoPlayerFloatingMode.Off&&this.floatingDeviceMode.includes(n)}setScrollPosition(t){this.floatingHelperSettings.setScrollPosition(t),this.floatingHelperSettings.setExtraHeight(this.floatingHelperSettings.isPinnedFloating?0:this.floatingHelperSettings.cachedExtraHeight)}get isPinnedPlayerFloating(){return this.floatingHelperSettings.isPinnedFloating}get floatingPosition(){return this.floatingHelperSettings.floatingPosition}get floatingScrollPosition(){return this.floatingHelperSettings.floatingScrollPosition}get hasFloatingCapability(){return this.Tj}getFloatingSettings(){return{scrollPosition:this.floatingHelperSettings.floatingScrollPosition,floatingGutterX:this.floatingHelperSettings.gutterX,floatingGutterY:this.floatingHelperSettings.gutterY,floatingWidth:this.floatingHelperSettings.floatingWidth}}}var gt=h(7597),vt=h(5715),yt=h(1310);class bt{constructor(t,i,s,n,r,o,h,c,d,l,u,p,m,g=0,v={}){if(this.global=t,this.targetContainer=i,this.xj=s,this.yj=n,this.secondLevelDomain=r,this.apiConfig=o,this.isServerlessMode=h,this.supplyChainSettings=c,this.isSeoTraffic=d,this.he=l,this.lR=u,this.lineItemAbTestInformation=p,this.videoPosition=m,this.sharingDestinations=[],this.disableAdvertising=!1,this.disablePrefetch=!1,this.disableAdsInBackground=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,this.adsMustBeSkippableIfLongerThan=at.f3,this.skipToNextVideoAfter=0,this.hasAdContentDurationRatio=!1,this.featureFlags={enableAdContentRatioGuardsMechanism:!1,enableAdContentRatioMechanism:!1},(0,a.QM)(s.initializationSettingsJson))try{const t=JSON.parse(s.initializationSettingsJson);this.apiConfig=(0,vt.R)(this.apiConfig,t)}catch(t){(0,S.nF)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:S.D_.CRITICAL,sessionId:this.xj.sessionId})}const y=(0,a.as)(this.apiConfig.settings._connatixInternals.featureFlags)?this.apiConfig.settings._connatixInternals.featureFlags:{};if(this.featureFlags=Object.assign(Object.assign(Object.assign({},this.featureFlags),y),v),(this.apiConfig.playerMode===dt.B.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.queryJsTargeting=this.apiConfig.settings.queryJsTargeting||{},this.kj(this.xj.lineItems),this.soundMode=(0,a.$K)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:s.soundMode,this.playbackMode=(0,a.$K)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:s.playbackMode,this.playbackMode===e.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===e.ProtoPlayerSoundMode.Mute||(0,P.we)()||(this.soundMode=e.ProtoPlayerSoundMode.Mute),this.html=s.html,this.css=s.css,this.floatingSettings=new mt(s,g,this.apiConfig.settings.customization.floating,this.yj),s.logoResource||(0,a.QM)(this.apiConfig.settings.customization.logoUrl)){let t=`${f.n.endPoints.base.image}${s.playerId}/${s.logoResource}`;t=this.he.appendParamsToUrl(t),this.logoUrl=(0,a.QM)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:t}const b=s.amazonTamSlotId;(0,a.QM)(b)&&(this.amazonTamSlotId=b),(0,a.$K)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),this.midRollNumber=(0,a.$K)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:s.midRollNumber,this.adViewabilityPolicy=s.adViewabilityPolicy,this.preRollBreak=this.Cj(),this.postRollBreak=this.Ej(),this.playerId=s.playerId,(0,a.$K)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising,this.disableAdvertising&&(this.preRollBreak=0,this.postRollBreak=0));const{disablePrefetch:I}=this.apiConfig.settings.advertising;(0,a.$K)(I)&&(this.disablePrefetch=I);const{disableAdsInBackground:w}=this.apiConfig.settings.advertising;(0,a.$K)(w)&&(this.disableAdsInBackground=w),this.floatingSettings.floatingMode===e.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingSettings.floatingCloseButtonMode:this.closeButtonMode=(0,a.$K)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:s.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingSettings.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:(0,a.$K)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:s.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=s.adPlaybackMode,(0,a.$K)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skippability:A,skipAdAfter:x,skipMin:_}=o.settings.advertising.skipAdSettings||{};this.skipAdAfter=(0,a.$K)(x)?x:s.skipAdAfter,this.skippability=(0,a.$K)(A)?A:s.skippability,this.skipMin=(0,a.$K)(_)?_:s.skipMin;const{disableTracking:T}=o.settings._connatixInternals;(T||h||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.xj.sessionId,this.videoPlacement=this.xj.videoPlacement,this.preloadFloating=(0,a.Mx)(this.apiConfig.settings.preloadFloating)}setPreRollBreak(t){(0,a.hj)(t)?this.preRollBreak=this.Mj(this.preRollBreak,t):this.preRollBreak=this.Cj()}setPostRollBreak(t){(0,a.hj)(t)?this.postRollBreak=this.Mj(this.postRollBreak,t):this.postRollBreak=this.Ej()}Cj(){return((0,a.$K)(this.apiConfig.settings.advertising.preRollBreak)?(0,yt.qe)(this.apiConfig.settings.advertising.preRollBreak,500):this.xj.preRollBreak)*ht.s_}Ej(){return((0,a.$K)(this.apiConfig.settings.advertising.postRollBreak)?(0,yt.qe)(this.apiConfig.settings.advertising.postRollBreak,500):this.xj.postRollBreak)*ht.s_}Mj(t,i){const e=(0,yt.w4)(i);return null===e?t:e}Lj(t){const i=t.some((t=>t.advertiserAccountId===gt.Ro&&t.advertiserLineItemId!==gt.Eg));return this.Bj(t),i?t:this.Rj(t)}Bj(t){const i=t.find((t=>t.advertiserLineItemId===gt.Eg)),e=t.some((t=>t.advertiserAccountId===gt.Ro&&t.advertiserLineItemId!==gt.Eg));if(i)if(e){const e=t.find((t=>t.advertiserAccountId===gt.Ro&&t.advertiserLineItemId!==gt.Eg&&t.adxFloorPricePredictionList.length>1));(0,a.$K)(e)&&this.Oj(e.advertiserLineItemId),i.adxFloorPricePredictionList.length>1?u.e.setClientAb3(1):u.e.setClientAb3(2)}else i.adxFloorPricePredictionList.length>1?u.e.setClientAb3(3):u.e.setClientAb3(4)}Oj(t){(0,S.nF)({message:"PlayerModel_hasDynamicAdx",exception:t,callStack:`serverAB0: ${u.e.serverAb0}`,level:S.D_.INFO},{pacing:1})}Rj(t){return t.filter((t=>t.advertiserLineItemId!==gt.Eg))}Dj(t=!1){this.Nj(),this.Vj();let i=[...this.Fj(),...this.jj()];i=this.lR.filterOutDuplicatesForStandalone(i),i=this.Lj(i),i.forEach((t=>{t.advertiserLineItemId===gt.Eg&&(t.isAdxLookup=!0)})),i=this.Uj(i),i=this.$j(i,t),t&&(i=this.qj(i));const e=(0,a.$K)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:this.xj.scrollHijackingProtection;this.lineItemSettings={lineItems:i,disableScrollHijackEnforcement:e},this.Hj(this.lineItemSettings)}zj(t){return t*ht.s_}Wj(t,i){i.adTag=(0,a.$K)(t.url)?t.url:i.adTag,i.requestCap=(0,a.$K)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=(0,a.$K)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=(0,a.$K)(t.viewability)?t.viewability:i.viewability,i.sound=(0,a.$K)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=(0,a.$K)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.prebidJsBidParamsJSONString=(0,a.$K)(t.prebidJsBidParamsJSONString)?t.prebidJsBidParamsJSONString:i.prebidJsBidParamsJSONString,i.headerBidderTimeout=(0,a.$K)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=(0,a.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=(0,a.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=(0,a.$K)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=(0,a.$K)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=(0,a.$K)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=(0,a.$K)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=(0,a.$K)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings,i.pauseAdOutOfView=(0,a.$K)(t.pauseAdOutOfView)?t.pauseAdOutOfView:i.pauseAdOutOfView,i.nonlinearLineItemSettings=(0,a.$K)(t.nonlinearLineItemSettings)?this.Qj(t.nonlinearLineItemSettings):i.nonlinearLineItemSettings,i.adType=(0,a.$K)(t.nonlinearLineItemSettings)?e.ProtoAdType.Nonlinear:i.adType}Qj(t){const i={nonLinearRequestType:t.nonLinearRequestType?t.nonLinearRequestType:e.ProtoNonlinearRequestType.Banner,nonLinearAdTimeSeconds:t.nonLinearAdTimeSeconds?t.nonLinearAdTimeSeconds:15};return i.nonLinearAdTimeSeconds<15&&(i.nonLinearAdTimeSeconds=15),i.nonLinearAdTimeSeconds>180&&(i.nonLinearAdTimeSeconds=180),i}Nj(){this.Jj(this.apiConfig.settings.advertising.preRollBreak,e.ProtoAdBreakTypeEnum.PreRoll),this.Jj(this.apiConfig.settings.advertising.postRollBreak,e.ProtoAdBreakTypeEnum.PostRoll),this.Jj(this.apiConfig.settings.advertising.maxNumberOfMidRolls,e.ProtoAdBreakTypeEnum.MidRoll)}Jj(t,i){const e=this.Yj(this.apiConfig.settings.advertising.adBreaks,i),s=this.Yj(this.xj.adBreaks,i),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[i]};e?this.adBreaks.push(e):!(0,a.$K)(t)||e||s?!e&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}Yj(t,i){if(!t)return;let e;return t.forEach((t=>{t.types.includes(i)&&(e=Object.assign({},t),e.types=[i])})),e}qj(t){return(0,r.mn)(t,ct.k.LINEAR)}$j(t,i=!1){const{adBreaks:s}=this;let n=[];(0,o.BZ)(s)||i||t.forEach((t=>{const i=t.adBreakSettings.adBreakTargeting.find((t=>t.adRollType===e.ProtoAdBreakTypeEnum.MidRoll));i||t.adType===e.ProtoAdType.Nonlinear||n.push(t)}));const r=[];return s.forEach((t=>{t.types.forEach((i=>r.push(Object.assign(Object.assign({},t),{types:[i]}))))})),r.forEach((t=>{n=this.removeCompatibleLineItems(t,n)})),t.filter((t=>!n.includes(t)))}removeCompatibleLineItems(t,i){const s=t.types[0],n=t.numberOfAdSlots>1?e.ProtoLineItemAdBreakTypeEnum.AdPod:e.ProtoLineItemAdBreakTypeEnum.SingleAd;return i.filter((t=>!t.adBreakSettings.adBreakTargeting.some((t=>t.adRollType===s&&(t.adBreakTypeEnum===e.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===n)))))}kj(t){t.forEach((t=>{t.adBreakSettings||this.Kj(t),this.Zj(t)}))}Kj(t){t.adBreakSettings={adBreakTargeting:[{adRollType:e.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:e.ProtoLineItemAdBreakTypeEnum.All},{adRollType:e.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:e.ProtoLineItemAdBreakTypeEnum.All},{adRollType:e.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:e.ProtoLineItemAdBreakTypeEnum.All}]}}Zj(t){0===t.requestCap&&(t.requestCap=20)}Vj(){this.adBreaks.forEach((t=>{t.maxAdSlotDuration=this.zj(t.maxAdSlotDuration),t.maxAdPodDuration=this.zj(t.maxAdPodDuration),t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)}))}tU(t,i){const e=Object.assign({},i);return this.Wj(t,e),(0,a.$K)(t.externalMediaFile)&&(e.externalMediaFile=t.externalMediaFile),(0,a.$K)(t.externalHlsFile)&&(e.externalHlsFile=t.externalHlsFile),e.customCpm=t.cpm,e}Fj(){const t=[];if(!(0,o.BZ)(this.apiConfig.settings.advertising.lineItems))return[];const i=this.xj.lineItems.filter((t=>t.creativeType===e.ProtoCreativeTypeEnum.External));return this.apiConfig.settings.advertising.lineItems.forEach((e=>{if(this.Zj(e),this.isServerlessMode){const i=this.iU(),s=this.tU(e,i);t.push(s)}else i.forEach((i=>{if(e.id===i.advertiserLineItemId){const s=this.tU(e,i);t.push(s)}}))})),t}jj(){return!0===this.apiConfig.settings.advertising.blockConnatixDemand?[]:this.xj.lineItems.filter((t=>t.creativeType!==e.ProtoCreativeTypeEnum.External))}Uj(t){return t.forEach((t=>{t.creativeType===e.ProtoCreativeTypeEnum.External&&((0,a.QM)(t.prebidJsBidParamsJSONString)?t.creativeType=e.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=e.ProtoCreativeTypeEnum.MediaFile:t.creativeType=e.ProtoCreativeTypeEnum.ThirdParty,t.isExternal=!0)})),t}iU(){return e.ProtoLineItem.toObject(e.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}Hj(t){this.moatTrackingEnabled=t.lineItems.some((t=>t.moatTrackingEnabled))}}var It=h(6666),Pt=h(1992);class wt extends bt{constructor(t,i,s,n,r,o,h,c,d,l,u,p,f,m,g){super(t,i,s,n,r,o,h,c,m,d,l,u,p,72,g),this.global=t,this.targetContainer=i,this.xj=s,this.he=d,this.lR=l,this.lineItemAbTestInformation=u,this.videoPosition=p,this.storyPosition=f,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.useVideoProgressBar=!1,this.activeVersion=this.xj.activeVersion,this.storyId=this.xj.storyId,this.storyMetadata=this.apiConfig.settings.story,this.sdkVersion=this.apiConfig._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=(0,a.$K)(this.apiConfig.settings.advertising.slidesBeforeFirstAd)?this.apiConfig.settings.advertising.slidesBeforeFirstAd:this.xj.minSlidesBeforeFirstAd,this.slidesBetweenAds=(0,a.$K)(this.apiConfig.settings.advertising.slidesBetweenAds)?this.apiConfig.settings.advertising.slidesBetweenAds:this.xj.slidesBetweenAds,this.xj.floatingMode===T.ProtoPlayerFloatingMode.Always?this.orientation=T.ProtoPlayerOrientationEnum.Landscape:this.orientation=(0,a.$K)(this.apiConfig.settings.customization.orientation)?this.apiConfig.settings.customization.orientation:this.xj.orientation,this.slideOrdering=this.apiConfig.settings.slideOrder,this.orientationBreakpoint=(0,a.$K)(this.apiConfig.settings.customization.orientationBreakpoint)?this.apiConfig.settings.customization.orientationBreakpoint:this.xj.orientationBreakpoint,(0,a.as)(this.apiConfig.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.apiConfig.settings.customization.fontFamilySettings),this.nn(),this.Ih(),this.nu(),this.mg(),this.Ib(),this.YC(),this.useAccentColorForProgressBar=(0,a.$K)(this.apiConfig.settings.customization.useAccentColorForProgressBar)?this.apiConfig.settings.customization.useAccentColorForProgressBar:this.xj.useAccentColorForProgressBar,this.endOfSlideCycleMode=(0,a.$K)(this.apiConfig.settings.endOfSlideCycleMode)?this.apiConfig.settings.endOfSlideCycleMode:this.xj.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=(0,a.$K)(this.apiConfig.settings.disableCTARendering)&&this.apiConfig.settings.disableCTARendering,this.disableStoryProgressBarRendering=(0,a.$K)(this.apiConfig.settings.disableStoryProgressBarRendering)&&this.apiConfig.settings.disableStoryProgressBarRendering,this.disableTitleRendering=(0,a.$K)(this.apiConfig.settings.disableTitleRendering)&&this.apiConfig.settings.disableTitleRendering,this.publisherName=(0,a.QM)(this.apiConfig.settings.customization.publisherName)?this.apiConfig.settings.customization.publisherName:this.xj.publisherName,this.Dj(),this.activeVersionHasInsights=this.xj.activeVersionHasInsights,this.useVideoProgressBar=(0,a.$K)(this.apiConfig.settings.customization.useVideoProgressBar)?this.apiConfig.settings.customization.useVideoProgressBar:this.xj.layout===T.ProtoPlayspaceLayoutEnum.BottomProgressBar,this.activeVersionHasInsights?(0,a.QM)(this.storyId)&&(0,a.QM)(this.activeVersion)&&It.k.loadInsights({insightsInputType:Pt.i.Story,id:this.storyId,versionId:this.activeVersion}):It.k.markAsUnavailable(this.storyId),this.lineItemSettings.lineItems=this.lineItemSettings.lineItems.filter((t=>t.adType!==e.ProtoAdType.Nonlinear))}nn(){this.apiConfig.settings.customization.primaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.apiConfig.settings.customization.primaryColorList.background:this.xj.primaryColorList&&(0,a.QM)(this.xj.primaryColorList.background)&&(this.primaryColorList.background=this.xj.primaryColorList.background)}Ih(){this.apiConfig.settings.customization.primaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.apiConfig.settings.customization.primaryColorList.foreground:this.xj.primaryColorList&&(0,a.QM)(this.xj.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.xj.primaryColorList.foreground)}nu(){this.apiConfig.settings.customization.secondaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.apiConfig.settings.customization.secondaryColorList.background:this.xj.secondaryColorList&&(0,a.QM)(this.xj.secondaryColorList.background)&&(this.secondaryColorList.background=this.xj.secondaryColorList.background)}mg(){this.apiConfig.settings.customization.secondaryColorList&&(0,a.QM)(this.apiConfig.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.apiConfig.settings.customization.secondaryColorList.foreground:this.xj.secondaryColorList&&(0,a.QM)(this.xj.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.xj.secondaryColorList.foreground)}Ib(){this.apiConfig.settings.customization.accentColorList&&(0,a.QM)(this.apiConfig.settings.customization.accentColorList.background)?this.accentColorList.background=this.apiConfig.settings.customization.accentColorList.background:this.xj.accentColorList&&(0,a.QM)(this.xj.accentColorList.background)&&(this.accentColorList.background=this.xj.accentColorList.background)}YC(){this.apiConfig.settings.customization.accentColorList&&(0,a.QM)(this.apiConfig.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.apiConfig.settings.customization.accentColorList.foreground:this.xj.accentColorList&&(0,a.QM)(this.xj.accentColorList.foreground)&&(this.accentColorList.foreground=this.xj.accentColorList.foreground)}}var St=h(6568),At=h(6716),xt=h(751),_t=h(8983),Tt=h(9710),Ct=h(9741),kt=h(5701),Et=h(862),Mt=h(9600);class Lt extends kt.ai{constructor(t,i,s,n,r,o,a,h,c,d){super(),this.mediator=t,this.playerModel=i,this.app=s,this._appSettings=n,this.$L=r,this.su=o,this.lB=a,this.cl=h,this.aU=c,this.cU=d,this.macroElements={player:[]},this.dU=!1,this.uU={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.pU=null,this.fU=500,this.Ui=[],this.vU=new At.x,this.createExperience(i,n),this.gU(i.sessionId),this.bU=new Et.Z(i.global,{heavyAdBlockTypeEnum:e.ProtoHeavyAdBlockTypeEnum.Global},this.su),this.IU=new Et.Z(window,{heavyAdBlockTypeEnum:e.ProtoHeavyAdBlockTypeEnum.Script},this.su)}subscribeToEvents(){this.subscribe(J.Uh.Destroy,this.experience,(()=>{this.destroy()})),this.subscribe(J.Uh.CanStart,this.experience,(()=>{this.experience.start()})),this.subscribe(J.Xh.SessionRendered,this.experience,(()=>{this.$L.sessionRendered.next({isBannerBlocked:Tt.ai.isBannerBlocked,sdkVersion:this._appSettings.sdkVersion,integrationType:this.cl.playerEnvironment}),this.mediator.publish(this,J.Xh.SessionRendered)})),this.subscribe(J.Xh.SessionView,this.experience,(()=>{!this.cl.isSessionViewTracked&&this.cl.isPlayerStartTracked&&(this.$L.sessionView.next(),this.experienceApi.trigger(L.Km.SessionInView),this.mediator.publish(this,J.Xh.SessionView))}));const t=E.h.getSessionChildContainer(this.cl.sessionId).resolve(C.G);this.Ui.push(t.omidAdSessionStart.subscribe((()=>{this.experienceApi.trigger(L.jJ.OmidAdSessionStart)})),t.omidAdSessionFinish.subscribe((()=>{this.experienceApi.trigger(L.jJ.OmidAdSessionFinish)}))),Object.values(this.experience.events).forEach((t=>{this.subscribe(t,this.experience,(i=>{this.experienceApi.trigger(t,i.payload)}))}))}updateMacroContent(t,i){t&&t.forEach((t=>{t.textContent=i}))}gU(t){const i=E.h.getSessionChildContainer(t).resolve(xt.P);this.experienceApi.addService("externalAdService",i)}hT(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}PU(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}wU(){if(this.experienceContainer=this.AU(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.PU(this.playerModel.html));this.SU(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i);(0,o.Sz)(t.children).forEach((t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)}))}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}AU(){const t=this.app.config.isMobile?_t.s6.Mobile:_t.s6.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${_t.sN.MainContainer} ${t} ${this._U}" id="${this.app.config.appId}"></cnx>`)}SU(t){(0,o.Sz)(t.children).forEach((t=>{t.children.length>0&&this.SU(t),Object.keys(this.uU).forEach((i=>{const e=this.uU[i];t.textContent.includes(e)&&this.TU(i,t)}))}))}TU(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}xU(){null!==this.pU&&(clearInterval(this.pU),this.pU=null)}init(t){this.hT(),this.wU();const i=this.app.config.device;return this.isSupportedBreakpoint(i)?(this.subscribeToEvents(),this.experience.renderExperience(this.playerModel,this.app,this.experienceContainer,(()=>{t()})),this.pU=setInterval((()=>{this.dU?this.xU():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.vU.next(!0),(0,S.nF)({message:"player_removed_from_DOM",level:S.D_.INFO,sessionId:this.playerModel.sessionId}))}),this.fU),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}onReady(){return this.experience.onReady()}onDestroy(){return this.vU.asObservable()}destroy(){var t;try{Ct.S.playerDestroyed=!0,this.dU=!0,this.xU(),null===(t=this.cU)||void 0===t||t.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.app.services.UserManagerService.destroy(),this.app.services.UID2Service.destroy(),(0,Mt.i)(this.Ui),this.Ui=[],this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.bU.destroy(this.playerModel.sessionId),this.IU.destroy(this.playerModel.sessionId)}catch(t){(0,S.nF)({callStack:t.stack,level:S.D_.WARN,message:"Renderer_destroy",exception:t.message,sessionId:this.playerModel.sessionId})}}}const Rt={lg:630,md:400,sm:320,xs:0},Bt={[e.ProtoDeviceType.Desktop]:Object.assign({},Rt),[e.ProtoDeviceType.Tablet]:Object.assign({},Rt),[e.ProtoDeviceType.Smartphone]:Object.assign({},Rt)};var Ot=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};var Dt=h(4975),Nt=h(4727),Ft=h(1102),$t=h(5692);class Vt{constructor(t,i,e,s,n=1200){this.kU=t,this.CU=i,this.EU=e,this.MU=s,this.LU=n,this.BU=null,this.RU=!1,this.OU=()=>{if(this.II(),!this.RU&&this.CU&&this.CU.linearAdInWin)return this.RU=!0,void this.DU(this.LU);this.kU.startContent()}}destroy(){this.II()}changeState(t){switch(t){case z.Ez.PrerollState:this.RU=!1,this.DU(this.EU);break;case z.Ez.PostrollState:this.RU=!1,this.DU(this.MU);break;default:this.BU&&this.II()}}setPreRollBreak(t){this.EU=t}setPostRollBreak(t){this.MU=t}II(){clearTimeout(this.BU),this.BU=null}DU(t){this.II(),this.BU=setTimeout(this.OU,t)}}const jt="midRollCapped",Ut="totalAdBreakDurationExpired",qt="enableLinearAds",Ht="disableLinearAds",zt="ForceStopAdSlot",Wt="ForceStopAdPod",Gt="linearAdOpportunity",Xt="AdPodRemainingTime",Qt="disableNonLinearAds",Jt="enableNonLinearAds",Yt="disableAdvertising",Kt="enableAdvertising",Zt="enterCuePoint",ti="exitCuePoint",ii="canPrefetchAds";var ei=h(5106),si=h(8395),ni=h(4065),ri=h(9154);class oi{constructor(t,i){this.zU=t,this.WU=i,this.XU=null,this.QU=null,this.JU=0,this.YU=0,this.KU=!1,this.ZU=!1,this.t$=!1,this.kr=new Map,this.i$=new At.x,this.e$=new At.x,this.s$=new At.x,this.n$=new At.x,this.r$=new At.x,this.o$=new At.x,this.h$=new At.x,this.a$=new At.x,this.c$=new At.x,this.d$=new At.x,this.Ui=[],this.l$={inImpression:!1};const{adBreaks:s}=this.zU.linearAdsControllerData;this.u$=s.some((t=>t.types.includes(e.ProtoAdBreakTypeEnum.PostRoll)))}start(){this.p$();const{totalAdBreakLength:t}=this.zU.linearAdsControllerData;if(t){const i=E.h.getGlobalContainer().resolve(si.f);this.f$=new ni.B(i,t),this.kr.set(this.f$,[this.f$.onTimeElapsed.subscribe((()=>{this.e$.next()}))])}}get currentPlayerAdSlot(){return this.XU}get onExperienceControllerStateChange(){return this.d$.asObservable()}get onCanPrefetchAds(){return this.c$.asObservable()}get onAdSlotDurationElapsed(){return this.i$.asObservable()}get onAdPodDurationElapsed(){return this.s$.asObservable()}get onAdPodTimeUpdate(){return this.n$.asObservable()}get onAdOpportunity(){return this.r$.asObservable()}get onAdsDisabled(){return this.o$.asObservable()}get onAdsEnabled(){return this.h$.asObservable()}get onTotalAdBreakDurationExpired(){return this.e$.asObservable()}get onMidRollCapped(){return this.a$.asObservable()}contentPlaybackStateChanged(t){var i,e;null===(e=(i=this.WU).contentPlaybackStateChanged)||void 0===e||e.call(i,t)}contentTimeUpdate(t){var i,e;null===(e=(i=this.WU).contentTimeUpdate)||void 0===e||e.call(i,t)}slideChanged(t){var i,e;null===(e=(i=this.WU).slideChanged)||void 0===e||e.call(i,t)}updateStoryTimeline(t){var i,e;null===(e=(i=this.WU).updateStoryTimeline)||void 0===e||e.call(i,t)}onAdImpression(t,i){this.WU.onAdImpression(this.XU,i),this.XU===e.ProtoAdSlotsEnum.MidRoll&&(this.t$=!0),this.l$.inImpression=!0,this.v$(),this.g$()}onContentAdDurationElapsed(){this.WU.onContentAdDurationElapsed()}onStayNextButtonsDisplayed(){this.WU.onStayNextButtonsDisplayed()}onContentAdDurationReset(){this.WU.onContentAdDurationReset()}onStayButtonPress(){this.WU.onStayButtonPress()}contentChanged(t){this.WU.contentChanged(this.XU,t),this.YU=0}onAdFinished(t,i,s){this.WU.onAdFinished(this.XU,i,s),this.b$=this.I$(this.b$),this.t$=!1,i||(this.P$=this.I$(this.P$),this.XU===e.ProtoAdSlotsEnum.MidRoll?this.KU||this.YU++:this.JU++),this.w$()&&!i&&this.a$.next(),t&&(this.ZU=!0),this.l$.inImpression=!1}viewabilityStateChanged(t,i){var e,s;null===(s=(e=this.WU).viewabilityStateChanged)||void 0===s||s.call(e,this.XU,t,i)}onStop(){this.XU=null}onAdStateChange(t,i,s,n){this.WU.onAdStateChange(t,s,n),this.zU.linearAdsControllerData.maxAdSlotDuration=i.maxAdSlotDuration,this.zU.linearAdsControllerData.maxAdPodDuration=i.maxAdPodDuration,n||(t!==e.ProtoAdSlotsEnum.MidRoll&&(this.JU=0),null===t&&this.QU===e.ProtoAdSlotsEnum.MidRoll||(this.ZU=!0),this.QU=t,this.XU=t)}canEnableAds(t){const i=this.WU.canEnableAds(this.XU,t);return i.enableAds?this.l$.inImpression?{enableAds:!1,disableReason:ei.m.InImpression}:this.XU===e.ProtoAdSlotsEnum.MidRoll&&this.w$()||null===this.XU||this.XU!==e.ProtoAdSlotsEnum.MidRoll&&this.JU>0?{enableAds:!1,disableReason:ei.m.Unknown}:{enableAds:!0,disableReason:ei.m.Unknown}:i}enableAds(){this.h$.next(),this.f$&&this.f$.start()}disableAds(t,i){const e={disableReason:t,adBreakLength:this.A$(i)};this.o$.next({payload:e}),this.f$&&!this.l$.inImpression&&this.f$.stop()}getTheoreticalDurationUntilNextOpportuinity(t){return this.XU===e.ProtoAdSlotsEnum.MidRoll&&this.w$()?-1:this.WU.getDurationUntilNextOpportunity(t)}onAdPlay(){this.P$&&this.P$.start(),this.b$&&this.b$.start(),this.f$&&this.f$.start()}onAdPause(){this.P$&&this.P$.stop(),this.b$&&this.b$.stop(),this.f$&&this.f$.stop()}triggerAdOpportunity(){this.ZU&&(this.ZU=!1,this.r$.next({payload:{adBreakType:ri.H[this.XU]}}))}startAds(t){var i,e;null===(e=(i=this.WU).startAds)||void 0===e||e.call(i,this.XU,t)}onNewMediaVideo(t){var i,e;const{cuePoints:s,dynamicCuePoints:n,videoDuration:r}=t;this.KU=(0,o.BZ)(s)||Array.isArray(n),this.XU=null,null===(e=(i=this.WU).onNewMediaVideo)||void 0===e||e.call(i,r,s)}setAdHandler(t){this.WU&&this.WU.setAdHandler&&this.WU.setAdHandler(t)}destroy(){(0,Mt.i)(this.Ui),this.f$&&this.f$.disable(),this.b$=this.I$(this.b$),this.P$=this.I$(this.P$),this.WU.destroy()}p$(){var t;this.Ui.push(this.WU.onExperienceControllerStateChange.subscribe((t=>{this.d$.next(t)})),null===(t=this.WU.onCanPrefetchAds)||void 0===t?void 0:t.subscribe((()=>{this.c$.next()}))),this.WU.start()}S$(){const t=this.t$?1:0,{numberOfMidRolls:i}=this.zU.linearAdsControllerData;return this.YU===i-t}A$(t){return this.S$()&&!this.u$?Number.POSITIVE_INFINITY:this.WU.getAdBreakDuration(t)}w$(){if(this.KU)return!1;const{numberOfMidRolls:t}=this.zU.linearAdsControllerData;return this.YU>=t&&-1!==t}I$(t){if(t)return t.stop(),(0,Mt.i)(this.kr.get(t)),this.kr.delete(t),null}v$(){const{maxAdSlotDuration:t}=this.zU.linearAdsControllerData;if(!t||this.b$)return;const i=E.h.getGlobalContainer().resolve(si.f);this.b$=new ni.B(i,t),this.b$.start(),this.kr.set(this.b$,[this.b$.onTimeElapsed.subscribe((()=>{this.i$.next()}))])}g$(){const{maxAdPodDuration:t}=this.zU.linearAdsControllerData;if(!t||this.P$)return;const i=E.h.getGlobalContainer().resolve(si.f);this.P$=new ni.B(i,t),this.P$.start(),this.kr.set(this.P$,[this.P$.onTimeElapsed.subscribe((()=>{this.s$.next()})),this.P$.onTimeUpdate.subscribe((()=>{const t=this.P$.timeRemaining;this.n$.next(t)}))])}}class ai{constructor(t,i){this.zU=t,this._$=i,this.o$=new At.x,this.h$=new At.x,this.x$=0,this.d$=new At.x,this.kr=new Map,this.Ui=[],this.l$={inImpression:!1,linearInImpression:!1,inPrePostRoll:!1,contentPaused:!0,linearInOpportunity:!1},this.C$=!1,this.E$=!0}start(){this.p$(),this.initTimer()}get onExperienceControllerStateChange(){return this.d$.asObservable()}initTimer(){const t=E.h.getGlobalContainer().resolve(si.f);this.M$=new ni.B(t,this.zU.resetNumberOfNonLinearAdsAfter),this.kr.set(this.M$,[this.M$.onTimeElapsed.subscribe((()=>{this.x$=0,this.d$.next()}))])}p$(){this.Ui.push(this._$.onExperienceControllerStateChange.subscribe((()=>{this.d$.next()}))),this._$.start()}get onAdsDisabled(){return this.o$.asObservable()}get onAdsEnabled(){return this.h$.asObservable()}onLinearImpressionStateChange(t){this.l$.linearInImpression=t,t?(this.M$.stop(),this.x$=0):(this.M$.reset(),this.M$.start(),this._$.onLinearAdFinished())}onLinearOpportunityChange(t){this.l$.linearInOpportunity=t}onAdStateChange(t){this.l$.inPrePostRoll=!(t===e.ProtoAdSlotsEnum.MidRoll)}onAdFinished(){this._$.onAdFinished(),this.l$.inImpression=!1,this.x$++}onAdImpression(){this.l$.inImpression=!0,0===this.x$&&(this.M$.reset(),this.M$.start())}canEnableAds(){return!!this._$.canEnableAds()&&(!(this.l$.inImpression||this.l$.inPrePostRoll||this.l$.linearInImpression||this.l$.linearInOpportunity&&this.E$||this.l$.contentPaused&&this.C$)&&!(this.x$>=this.zU.numberOfNonlinearAds&&this.zU.numberOfNonlinearAds>0))}viewabilityStateChanged(t){this.C$=t}onLinearNoDemand(){this.E$=!1}enableAds(){this.h$.next()}disableAds(){this.o$.next()}contentPlaybackStateChanged(t){this.l$.contentPaused=!t,this.d$.next()}destroy(){var t;(0,Mt.i)(this.Ui),null===(t=this._$)||void 0===t||t.destroy()}}class hi{constructor(t,i,e,s,n,r){var o;this.mediator=t,this.zU=i,this.WU=e,this.Ui=[],this.l$={stopped:!1,viewability:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,restrictedOnCurrentMedia:!1,adBlockerActive:!0},this.L$=new oi(i,e),this.B$(e),this.viewabilityStateChanged(s),this.onResize(this.zU.playerDimensions.width,this.zU.playerDimensions.height),this.L$.start(),(0,a.hj)(null===(o=i.nonLinearAdsControllerData)||void 0===o?void 0:o.numberOfNonlinearAds)&&r&&this.R$(i.nonLinearAdsControllerData,r),n&&this.disableAdvertising(),this.onContentStop()}B$(t){this.Ui.push(this.L$.onAdSlotDurationElapsed.subscribe((()=>{this.mediator.publish(this,zt)})),this.L$.onAdPodDurationElapsed.subscribe((()=>{this.mediator.publish(this,Wt)})),this.L$.onAdPodTimeUpdate.subscribe((t=>{this.mediator.publish(this,Xt,{payload:{remainingTime:t}})})),this.L$.onAdOpportunity.subscribe((t=>{var i;null===(i=this.O$)||void 0===i||i.onLinearOpportunityChange(!0),this.mediator.publish(this,Gt,t)})),this.L$.onAdsDisabled.subscribe((t=>{this.mediator.publish(this,Ht,t)})),this.L$.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,qt)})),this.L$.onTotalAdBreakDurationExpired.subscribe((()=>{this.mediator.publish(this,Ut)})),this.L$.onMidRollCapped.subscribe((()=>{this.mediator.publish(this,jt)})),this.L$.onExperienceControllerStateChange.subscribe((t=>{(0,a.$K)(t)&&(t.inCuePoint?this.mediator.publish(this,Zt):(t.cuePointTimedOut&&this.mediator.publish(this,zt),this.mediator.publish(this,ti))),this.D$()})),this.L$.onCanPrefetchAds.subscribe((()=>{this.mediator.publish(this,ii,{payload:{linearity:ct.k.LINEAR}})})))}R$(t,i){this.O$=new ai(t,i),this.Ui.push(this.O$.onAdsDisabled.subscribe((()=>{this.mediator.publish(this,Qt)})),this.O$.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,Jt)})),this.O$.onExperienceControllerStateChange.subscribe((()=>{this.D$()}))),this.O$.start()}slideChanged(t){this.L$.slideChanged(t)}updateStoryTimeline(t){this.L$.updateStoryTimeline(t)}contentPlaybackStateChanged(t){var i;this.L$.contentPlaybackStateChanged(t),null===(i=this.O$)||void 0===i||i.contentPlaybackStateChanged(t)}contentTimeUpdate(t){this.L$.contentTimeUpdate(t)}forceRecheck(){this.D$()}onAdImpression(t,i){var e;switch(i){case ct.k.LINEAR:this.L$.onAdImpression(t,this.N$);const i=!0;null===(e=this.O$)||void 0===e||e.onLinearImpressionStateChange(i);break;case ct.k.NONLINEAR:this.O$.onAdImpression()}this.D$()}getTheoreticalDurationUntilNextOpportuinity(){return this.L$.canEnableAds(this.N$).enableAds?0:this.L$.getTheoreticalDurationUntilNextOpportuinity(this.N$)}onAdFinished(t,i,e=!1){var s,n;switch(i){case ct.k.LINEAR:if(this.L$.onAdFinished(t,e,this.N$),e)this.V$();else{const t=!1;null===(s=this.O$)||void 0===s||s.onLinearImpressionStateChange(t)}break;case ct.k.NONLINEAR:null===(n=this.O$)||void 0===n||n.onAdFinished()}e||this.D$()}onLinearAdPause(){this.L$.onAdPause()}onLinearAdPlay(){this.L$.onAdPlay()}onContentStop(){this.L$.onStop(),this.l$.stopped=!0,this.D$()}onAdStateChange(t,i,s){var n;null===(n=this.O$)||void 0===n||n.onAdStateChange(t);const r=t===this.L$.currentPlayerAdSlot&&t===e.ProtoAdSlotsEnum.MidRoll;r?this.L$.onAdStateChange(t,i,s,r):(this.L$.onAdStateChange(t,i,s,r),this.F$())}adBlockerStatusChange(t){this.l$.adBlockerActive=t,this.D$()}F$(){this.L$.startAds(this.N$),this.l$.stopped=!1,this.D$()}contentChanged(){this.L$.contentChanged(this.N$),this.D$()}viewabilityStateChanged(t,i=!1,s=!1){var n;this.L$.viewabilityStateChanged(t,i),null===(n=this.O$)||void 0===n||n.viewabilityStateChanged(t),this.N$=t,this.zU.viewabilityPolicy===e.ProtoAdViewabilityPolicy.Strict&&(this.l$.viewability=!t),s||this.D$()}setToggleAdsReason({isAppBackgrounded:t}){this.l$.isAppBackgrounded=t,this.D$()}onLinearNoFill(){var t;null===(t=this.O$)||void 0===t||t.onLinearOpportunityChange(!1),this.j$()}onLinearNoDemand(){var t;null===(t=this.O$)||void 0===t||t.onLinearNoDemand(),this.j$()}disableAdvertising(){this.mediator.publish(this,Yt),this.l$.forceDisable=!0,this.D$()}enableAdvertising(){this.mediator.publish(this,Kt),this.l$.forceDisable=!1,this.D$()}updateDynamicCuePoints(t){this.WU.updateDynamicCuePoints(t)}disableAdsInBackground(){this.WU.disableAdsInBackground()}enableAdsInBackground(){this.WU.enableAdsInBackground()}get isAdvertisingDisabled(){return this.l$.forceDisable}get isAdvertisingDisabledForCurrentVideo(){return this.WU.isAdvertisingDisabledForCurrentVideo}get inView(){return this.N$}onResize(t,i){this.l$.zeroDimension=0===t||0===i,this.D$()}onNewMediaVideo(t,i=!1){this.onContentAdDurationReset(),this.L$.onNewMediaVideo(t),this.l$.restrictedOnCurrentMedia=i,this.D$()}onContentAdDurationElapsed(){this.L$.onContentAdDurationElapsed(),this.D$()}onStayNextButtonsDisplayed(){this.L$.onStayNextButtonsDisplayed(),this.D$()}onStayButtonPress(){this.L$.onStayButtonPress(),this.D$()}onContentAdDurationReset(){this.L$.onContentAdDurationReset()}destroy(){(0,Mt.i)(this.Ui),this.L$.destroy()}D$(){const t=this.U$();t.enableAds?(this.$$(),this.j$()):(this.q$(t.disableReason),this.H$())}$$(){const t=this.L$.canEnableAds(this.N$);t.enableAds?this.V$():this.q$(t.disableReason)}j$(){var t;(null===(t=this.O$)||void 0===t?void 0:t.canEnableAds())?this.z$():this.H$()}H$(){var t;null===(t=this.O$)||void 0===t||t.disableAds()}z$(){var t;null===(t=this.O$)||void 0===t||t.enableAds()}q$(t){this.L$.disableAds(t,this.N$)}U$(){return this.l$.forceDisable?{enableAds:!1,disableReason:ei.m.ForceDisable}:Object.keys(this.l$).some((t=>this.l$[t]))?{enableAds:!1,disableReason:ei.m.Unknown}:{enableAds:!0,disableReason:ei.m.Unknown}}setAdHandler(t){this.L$.setAdHandler(t)}V$(){this.L$.triggerAdOpportunity(),this.L$.enableAds()}}var ci=h(6515),di=h(8474),li=h(6798),ui=h(2566),pi=h(278);var fi=h(4978),mi=h(6888),gi=h(1307),vi=h(4793),yi=h(6095),bi=h(9209),Ii=h(8659),Pi=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let wi=class{constructor(){this.du=0,this.X$=new At.x}get onToggleMute(){return this.X$.asObservable()}mute(t){t&&0===this.du&&(this.du=t,this.X$.next(0))}unmute(){if(0===this.du)return;const t=this.du;this.du=0,this.X$.next(t)}};wi=Pi([(0,Ii.b2)(),(0,Ii.Yn)(Ii.Fw.ContainerScoped)],wi);var Si=h(8736),Ai=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};var xi=h(8211),_i=h(7916);const Ti=Object.assign({},L.Km);var Ci=h(5226),ki=h(5356);class Ei{constructor(t,i){this.Q$=t,this.Qu=i,this.J$=null,this.Y$=!1,this.K$=new At.x,this.Z$(e.ProtoAdBreakTypeEnum.PreRoll)?this.setNewBreak(e.ProtoAdSlotsEnum.PreRoll):this.setNewBreak(e.ProtoAdSlotsEnum.MidRoll)}get onAdBreakRemainingTimeUpdate(){return this.K$}setNewBreak(t){const i=(0,ki.gw)(t);this.tq=this.Z$(i)||this.iq(i),this.Y$=!(this.tq.totalNumberOfAdSlots<=1)}adStarted(){this.eq(),0===this.tq.currentPodNumber&&(this.tq.currentPodNumber=this.tq.totalNumberOfAdSlots),this.tq.currentPodNumber--,this.tq.currentPodNumber<=0&&(this.Y$=!1)}endPod(){this.eq(),this.tq.currentPodNumber=0,this.Y$=!1}enterPodTimeout(t){this.eq(),this.J$=setTimeout((()=>{this.eq(),t()}),z.Qg)}isInAdPod(){return this.Y$}isCurrentBreakInPod(){return this.tq.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.tq.maxAdSlotDuration}getMaxAdPodDuration(){return this.tq.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.Q$.length;i++){if(0===this.Q$[i].maxAdSlotDuration)return 0;t=Math.max(t,this.Q$[i].maxAdSlotDuration)}return t||Ci.O.DEFAULT_MAX_AD_DURATION*ht.s_}getCurrentSlotIndex(){return this.tq.totalNumberOfAdSlots-this.tq.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.tq.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.tq.totalNumberOfAdSlots}isInPodTimeout(){return!!this.J$}updatePodRemainingTime(t){this.tq.remainingAdPodDuration=t,this.K$.next()}getAdBreakState(){const t=this.nq(),i=this.rq();return{isAdPodBreak:this.isCurrentBreakInPod(),adPodSlotIndex:this.isCurrentBreakInPod()?this.getNextSlotIndex():0,maxAdDuration:t,remainingAdDuration:i,sessionMaxAdDuration:Math.round(this.getMaxAdSlotPossibleDuration()/ht.s_),adBreakType:this.tq.breakType}}eq(){clearTimeout(this.J$),this.J$=null}iq(t){return{breakType:t,currentPodNumber:0,maxAdSlotDuration:Ci.O.DEFAULT_MAX_AD_DURATION*ht.s_,maxAdPodDuration:0,totalNumberOfAdSlots:0,remainingAdPodDuration:0}}Z$(t){for(const i of this.Q$)if(i.types.includes(t))return{currentPodNumber:i.numberOfAdSlots,maxAdSlotDuration:i.maxAdSlotDuration,maxAdPodDuration:i.maxAdPodDuration,totalNumberOfAdSlots:i.numberOfAdSlots,breakType:t,remainingAdPodDuration:i.maxAdPodDuration};return null}nq(){return Math.round(this.getMaxAdSlotDuration()/ht.s_||Ci.O.DEFAULT_MAX_AD_DURATION)}rq(){const t=this.isCurrentBreakInPod()?this.tq.remainingAdPodDuration/ht.s_:this.nq(),i=this.Qu.getRemainingAdsDurationInMs();return null===i?t:Math.round(Math.min(t,i/ht.s_))}}class Mi{constructor(t,i,e,s){this.oq=t,this.hq=e,this.aq=this.cq(i,s)}cq(t,i){return(0,a.$K)(i)?Object.assign({},t[i]||t[e.ProtoDeviceType.Smartphone]):t}updateWidth(t){const i=this.dq(t);i!==this.currentBreakpointClass&&((0,I.IV)(this.oq,this.currentBreakpointClass),(0,I.cn)(this.oq,i),this.currentBreakpointClass=i)}dq(t){switch(!0){case t>=this.aq.xxl:return this.hq.Xxl;case t>=this.aq.xl:return this.hq.Xl;case t>=this.aq.lg:return this.hq.Lg;case t>=this.aq.md:return this.hq.Md;case t>=this.aq.sm:return this.hq.Sm;case t>=this.aq.xs:return this.hq.Xs;default:return this.hq.Xxs}}}class Li{constructor(t){this.urlSuffixerService=t,this.lq={},this.pq=[]}getImage(t,i,e,s,n="",r=!1){return this.fq=t,this.iF=(0,a.QM)(i)?i:"",this.Ps=e,this.ws=s,this.vq=n,this.mq=r,this.gq()}gq(){const t=this.yq();if(t)return t;const i=this.fq+this.vq,e=new Image;return e.src=this.urlSuffixerService.appendParamsToUrl(i),e.alt=this.iF,this.lq[this.fq]=this.lq[this.fq]||{},this.lq[this.fq][this.Ps]=this.lq[this.fq][this.Ps]||{},this.lq[this.fq][this.Ps][this.ws]=this.lq[this.fq][this.Ps][this.ws]||{},this.lq[this.fq][this.Ps][this.ws][this.vq]=e,e}yq(){const t=this.bq();if(t)return t;if(!this.mq)return;this.Iq();const i=this.Pq();if(i)return i;const e=this.wq();return e||void 0}Iq(){const t=[];if(!this.lq[this.fq])return void(this.pq=[]);const i=this.lq[this.fq],e=this.Ps>this.ws?X.Landscape:X.Portrait;Object.keys(i).forEach((s=>{const n=parseInt(s,10);Object.keys(i[s]).filter((t=>!!i[s][t])).forEach((i=>{const s=parseInt(i,10);if((n>s?X.Landscape:X.Portrait)!==e)return;const r={area:n*s,img:this.Aq(this.fq,n,s)};t.push(r)}))})),this.pq=[...t]}Aq(t,i,e){if(this.lq[t]&&this.lq[t][i]&&this.lq[t][i][e])return this.lq[t][i][e][Object.keys(this.lq[t][i][e])[0]]}bq(){return this.lq[this.fq]&&this.lq[this.fq][this.Ps]&&this.lq[this.fq][this.Ps][this.ws]&&this.lq[this.fq][this.Ps][this.ws][this.vq]}Pq(){if(0===this.pq.length)return;const t=this.Ps*this.ws,i=this.pq.filter((({area:i})=>i>t)).sort(((t,i)=>t.area-i.area));return 0!==i.length?i[0].img:void 0}wq(){if(0===this.pq.length)return;const t=this.Ps*this.ws,i=this.pq.filter((({area:i})=>i<t&&t/i<=1.3)).sort(((t,i)=>i.area-t.area));return 0!==i.length?i[0].img:void 0}}var Ri=h(9762),Bi=h(1703),Oi=h(7332),Di=h(7531),Ni=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};const Fi=["com.accuweather.android"],$i=.05*ht.s_;class Vi extends kt.ai{constructor(t,i,s,n,r,o,h,c){super(),this.mediator=t,this._appSettings=i,this.he=s,this.$L=n,this.su=r,this.lB=o,this.cl=h,this.aU=c,this.Sq=.01,this._q=.5,this.Tq=.5,this.xq=2e3,this.kq=0,this.Cq=!1,this.Eq=!1,this.Mq=!1,this.Lq=!1,this.Bq=!1,this.Dq=!1,this.N$=!1,this.Vq=e.ProtoAdSlotsEnum.PreRoll,this.yS=!1,this.Fq=!1,this.jq=!1,this.$q=!1,this.Hq=!0,this.zq=!1,this.Gq=!0,this.Wq=[],this.Xq=[],this.Jq=[],this.Yq=[],this.Kq=[],this.Zq=[],this.tH=new ci.X(!1),this.iH=0,this.eH=!1,this.nH={[bi.d.togglePlay]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.togglePlay(this.Gq)},[bi.d.toggleMute]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.toggleMute(this.Gq)},[bi.d.increaseVolume]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.increaseVolume(.1,this.Gq)},[bi.d.decreaseVolume]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.decreaseVolume(.1,this.Gq)}},this.rH=t=>{this.Fq=t,t&&(this.oH(),this.hH())},this.aH=t=>{t&&this.adHandler&&!this.zq&&setTimeout((()=>{this.adHandler.resumeWithoutUserInteraction(this.Vq)}),$i)},this.cH=()=>{this.isBelowSmBreakpoint(this.$experienceContainer.clientWidth)?(0,I.cn)(this.$experienceContainer,_t.Gj.NoHeight):(0,I.IV)(this.$experienceContainer,_t.Gj.NoHeight),!this.Eq&&this.dH()&&(this.mediator.publish(this,J.Uh.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.cH))},this.lH=t=>{var i;const{playback:e,isFullscreenClose:s}=t;if(this.uH&&(0,a.$K)(e)&&!s){const t=!e;null===(i=this.uH)||void 0===i||i.setPlaybackPausedByUserInteraction(t)}},this.pH=()=>{this.fH(1)},this.vH=()=>{this.fH(0)},this.mH=t=>{const{playback:i}=t;(0,a.$K)(i)&&(this.lH(t),i?(this.app.services.EventsStorageService.emitAdPlay(),this.zq=!1):(this.app.services.EventsStorageService.emitAdPause(),this.zq=!0))},this.gH=new Li(s),this.yH=E.h.getSessionChildContainer(this.cl.sessionId).resolve(wi)}bH(){}IH(t,i,e){this.app.services.EventsStorageService.emitAdImpression(t,i,e)}PH(t){this.app.services.EventsStorageService.emitAdComplete(t)}wH(){}AH(){}SH(){}_H(){}TH(){}xH(){}kH(){}CH(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}EH(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}MH(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}LH(){this.app.services.EventsStorageService.emitOnExitFullscreen()}BH(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}RH(t){this.app.services.EventsStorageService.emitOnPlayerExpanded(t)}OH(t){this.DH(t),this.NH(t),this.VH(t),this.Vq=t,this.jH(t)}NH(t){this.adHandler&&this.adHandler.adStateChange(t,this.Vq)}VH(t){this.UH.onAdStateChange(t,{maxAdPodDuration:this.$H.getMaxAdPodDuration(),maxAdSlotDuration:this.$H.getMaxAdSlotDuration()})}DH(t){this.$H.setNewBreak(t)}jH(t){this.CH(Bi.V[t])}qH(){var t;null===(t=this.adHandler)||void 0===t||t.contentChanged(),this.UH.contentChanged()}HH(){var t;null===(t=this.adHandler)||void 0===t||t.contentEnded()}zH(){var t,i,e,s,n,r;return Ni(this,void 0,void 0,(function*(){this.adHandler=yield this.GH(),this.XH(),null===(t=this.adHandler)||void 0===t||t.onLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionPrice,{payload:t})})),null===(i=this.adHandler)||void 0===i||i.onNonLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionPrice,{payload:t})})),null===(e=this.adHandler)||void 0===e||e.onLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionRevenue,{payload:t})})),null===(s=this.adHandler)||void 0===s||s.onNonLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,L.Km.ImpressionRevenue,{payload:t})})),null===(n=this.adHandler)||void 0===n||n.onLinearExperienceEvent.subscribe((t=>{J.Uh.UserInteraction===t.type&&this.mH(t.payload)}));const o=()=>{this.$L.adsEnabled.next(),this.jq=!0,this.zq=!1,this.oH(),this.QH.unsubscribe()};this.QH=null===(r=this.adHandler)||void 0===r?void 0:r.onAdsEnable.subscribe((()=>{o()})),this.UH.setAdHandler(this.adHandler),this.VI()}))}Vv(t){this.mediator.publish(this,L.Km.AdImpression,t.payload);const{adSourceData:i,customAdData:e,adType:s}=t.payload.payload;this.IH(i,e,s)}VI(){this.Xq.push(this.su.adBid.subscribe((t=>{const{publisherLineItemId:i,advertiserLineItemId:e,impressionTrackers:s}=t;setTimeout((()=>{this.mediator.publish(this,L.Km.Bid,{payload:{publisherLineItemId:i,advertiserLineItemId:e,impressionTrackers:s}})}),0)})))}XH(){this.JH(),this.YH(),this.KH()}JH(){this.Zq.push(this.adHandler.onVpaidEvent.subscribe((t=>{switch(t.type){case mi.fI.AdStarted:this.mediator.publish(this,L.Km.AdStarted,t.payload);break;case mi.fI.AdImpression:this.Vv(t);break;case mi.fI.AdStopped:{if(this.mediator.publish(this,L.Km.AdStopped,t.payload),this.N$&&this.AH(),!t.payload)return;const{adType:i}=t.payload.payload;this.PH(i),this.app.services.EventsStorageService.emitAdStopped(i);break}case mi.fI.AdError:{const{adType:i}=t.payload;this.mediator.publish(this,L.Km.AdError,t),this.app.services.EventsStorageService.emitAdError(i);break}case mi.fI.AdSkipped:{const{adType:i}=t.payload.payload;this.mediator.publish(this,L.Km.AdSkipped,t.payload),this.app.services.EventsStorageService.emitAdSkipped(i),this.PH(i),this.N$&&this.AH();break}case mi.fI.AdPaused:{const{adType:i}=t.payload.payload;this.$L.sessionPlaybackChanged.next({isPlaying:!1}),this.app.services.EventsStorageService.emitAdPaused(i),this.mediator.publish(this,L.Km.AdPause,t.payload);break}case mi.fI.AdPlaying:{const{adType:i}=t.payload.payload;this.$L.sessionPlaybackChanged.next({isPlaying:!0}),this.app.services.EventsStorageService.emitAdPlaying(i),this.mediator.publish(this,L.Km.AdPlay,t.payload);break}case mi.fI.AdVideoFirstQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted25,t.payload),this.app.services.EventsStorageService.emitAdVideoFirstQuartile(i);break}case mi.fI.AdVideoMidpoint:{const{adType:i}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted50,t.payload),this.app.services.EventsStorageService.emitAdVideoMidpoint(i);break}case mi.fI.AdVideoThirdQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted75,t.payload),this.app.services.EventsStorageService.emitAdVideoThirdQuartile(i);break}case mi.fI.AdVideoComplete:{const{adType:i}=t.payload.payload;this.mediator.publish(this,L.Km.AdCompleted100,t.payload),this.app.services.EventsStorageService.emitAdVideoComplete(i);break}case mi.fI.AdClickThru:{const{adType:i}=t.payload.payload;this.mediator.publish(this,L.Km.AdClick,t.payload),this.app.services.EventsStorageService.emitAdClickThru(i);break}case mi.fI.AdInteraction:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case mi.fI.AdUserAcceptInvitation:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case mi.fI.AdExpandedChange:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdExpandedChange(i);break}case mi.fI.AdUserClose:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case mi.fI.AdUserMinimize:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case mi.fI.AdVideoStart:{const{adSourceData:i,adType:e}=t.payload,{clientWidth:s,clientHeight:n}=this.$playerContainer,r={duration:i&&i.length,mediaPlayerVolume:this.getVolume(),mediaPlayerDimensions:{width:s,height:n}};this.app.services.EventsStorageService.emitAdVideoStart(r,e);break}case mi.fI.AdLoaded:{const{payload:i}=t.payload,{adType:e,adLoadedData:s}=i;this.mediator.publish(this,L.Km.AdLoaded,t.payload),(null==s?void 0:s.skipOffset)<0&&(s.skipOffset=void 0);const n=this.tz(s);this.app.services.EventsStorageService.emitAdLoaded(n,e);break}case mi.fI.AdVolumeChange:{const{adType:i}=t.payload.payload;this.mediator.publish(this,L.Km.AdVolumeChange,t.payload),this.app.services.EventsStorageService.emitAdVolumeChange(i);break}case mi.fI.AdLog:}})),this.adHandler.onPrefetchStart.subscribe((()=>{this.mediator.publish(this,L.Km.PrefetchStart)})))}YH(){this.Zq.push(this.adHandler.onLinearEvent.subscribe((t=>{switch(t.type){case vi.lc.ShowLinearEvent:this.UH.onAdImpression(t.payload,ct.k.LINEAR),this.iz();break;case vi.lc.HideLinearEvent:this.ez(t.forced);break;case vi.lc.PauseLinearEvent:this.UH.onLinearAdPause();break;case vi.lc.ResumeLinearEvent:this.UH.onLinearAdPlay();break;case vi.lc.SkipLinearEvent:const i=!0;this.ez(i)}})))}KH(){this.Zq.push(this.adHandler.onNonLinearEvent.subscribe((t=>{switch(t.type){case vi.gx.ShowNonLinearEvent:this.UH.onAdImpression(t.payload,ct.k.NONLINEAR);break;case vi.gx.HideNonLinearEvent:const i=!1;this.UH.onAdFinished(this.adHandler.nonLinearInImpression,ct.k.NONLINEAR,i)}})))}iz(){this.$H.adStarted(),this.adHandler.showLinear(),(0,I.cn)(this.$playerWrapper,_t.fA.HidePinnedTitle)}sz(){this.adHandler.hideLinear(),(0,I.IV)(this.$playerWrapper,_t.fA.HidePinnedTitle)}ez(t=!1,i=this.$playerContainer){var s,n,r,o;this.aU.processAdUserInteraction(t);let a=this.$H.isInAdPod();t&&(a=!1,this.$H.endPod()),this.UH.onAdFinished(this.adHandler.linearInImpression,ct.k.LINEAR,a),this.sz(),this.nz.isCloseButton&&this.adHandler&&this.adHandler.firstLinearAdShown&&(this.nz.closeButtonMode!==e.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,I.pv)(i,_t.s6.CloseHover)||((0,I.cn)(i,_t.s6.CloseHover),null===(n=null===(s=this.kU)||void 0===s?void 0:s.updateCloseButtonMode)||void 0===n||n.call(s,!1,e.ProtoPlayerCloseButtonMode.OnHover)),this.nz.floatingSettings.floatingCloseButtonMode!==e.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,I.pv)(i,_t.s6.CloseFloatHover)||((0,I.cn)(i,_t.s6.CloseFloatHover),null===(o=null===(r=this.kU)||void 0===r?void 0:r.updateCloseButtonMode)||void 0===o||o.call(r,!0,e.ProtoPlayerCloseButtonMode.OnHover)))}rz(t){this.adHandler.enterAdPodLoadingState(),this.$H.enterPodTimeout((()=>{this.$H.endPod(),t()}))}oz(){(0,o.BZ)((0,r.mn)(this.nz.lineItemSettings.lineItems,ct.k.LINEAR))||this.UH.onLinearNoDemand(),this.subscribe(Jt,this.UH,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(ct.k.NONLINEAR)})),this.subscribe(Qt,this.UH,(t=>{var i;const e=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(ct.k.NONLINEAR,e)})),this.subscribe(qt,this.UH,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(ct.k.LINEAR)})),this.subscribe(Ht,this.UH,(t=>{var i;const e=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(ct.k.LINEAR,e)})),this.subscribe(zt,this.UH,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.stopAd(vi.aB.ForceStopAdSlot)})),this.subscribe(Wt,this.UH,(()=>{if(this.adHandler)if(this.adHandler.linearInImpression)this.$H.endPod(),this.adHandler.stopAd(vi.aB.ForceStopAdPod);else{const t=!0;this.ez(t)}})),this.subscribe(Yt,this.UH,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.disableAdvertising()})),this.subscribe(Kt,this.UH,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAdvertising()})),this.subscribe(Xt,this.UH,(t=>{this.$H.updatePodRemainingTime(t.payload.remainingTime)})),this.subscribe(ii,this.UH,(t=>{var i;const e=t.payload.linearity;null===(i=this.adHandler)||void 0===i||i.canPrefetchAds(e)})),this.subscribe(Gt,this.UH,(t=>{var i,e;this.mediator.publish(this,L.Km.AdOpportunity,t);const s=t.payload.adBreakType,n=null===(i=this.adHandler)||void 0===i?void 0:i.getLinearAdContainerWidth(),r=this.hz(),o=(0,a.$K)(n)?n:this.$playerContainer.clientWidth;this.$L.adOpportunity.next({adBreak:Ft.EN.fromProtoAdBreakType(s),playerWidth:o,opportunityId:r.id}),null===(e=this.adHandler)||void 0===e||e.newLinearAdOpportunity(r)}))}hz(){return(0,a.$K)(this.adHandler)?this.adHandler.getNewLinearAdOpportunity():new gi.qW}cz(){this.app.services.ViewabilityService.on(this.$playerContainer,this.rH,{threshold:this._q,callbackDelay:this.xq}),this.app.services.ViewabilityService.on(this.$playerContainer,(t=>{var i;t&&(null===(i=this.uH)||void 0===i||i.setSessionInView()),this.lB.mediaViewabilityChanged.next({isInView:t})}),{threshold:this.Tq}),this.app.services.ViewabilityService.on(this.$playerContainer,((t,i)=>this.lz(t,i)),{threshold:this.Sq,fireOnInAppBackgroundChange:!0}),this.app.services.ViewabilityService.subscribe(L.jJ.OmidViewabilityThreshold,(t=>{this.mediator.publish(this,L.jJ.OmidViewabilityThreshold,{payload:{threshold:t}})})),this.app.config.os.os===xi.M.Ios&&this.app.services.PageFocusService.on(this.aH)}oH(){this.Fq&&this.jq&&this.mediator.publish(this,J.Xh.SessionView)}uz(){this.Hq?(this.hH(),this.Hq=!1):(0,P.ld)((()=>this.hH()),this.xq)}hH(){this.eH&&this.Fq&&this.$q&&(this.lB.mediaView.next(),this.eH=!1)}lz(t,i=!1){this.UH.setToggleAdsReason({isAppBackgrounded:i}),this.app.config.isInApp&&(this.cl.isPageInFocus=!i,i?this.yH.mute(this.getVolume()):this.yH.unmute()),this.N$=t,this.mediator.publish(this,L.Km.IsViewable,{payload:t}),this.UH.viewabilityStateChanged(this.uH?this.uH.checkFloatingViewability(t):t,this.$H.isInAdPod(),this.$H.isInPodTimeout()),this.$L.sessionViewabilityChanged.next({isInView:t})}AD(){var t,i,e;const s=this.$playerContainer.clientWidth,n=this.$playerContainer.clientHeight;this.cl.playerDimensions={height:n,width:s};const r=this.yS?mi.zc.Fullscreen:mi.zc.Normal;null===(t=this.adHandler)||void 0===t||t.resizeAd(s,n,r,this.Vq);try{null===(i=this.UH)||void 0===i||i.onResize(s,n)}catch(t){(0,S.nF)({message:"BaseExperience_onResize_player",callStack:t.stack,exception:t.message,level:S.D_.WARN,sessionId:this.nz.sessionId})}null===(e=this.adHandler)||void 0===e||e.setPlayerOrientation(this.pz(s,n)),this.fz(),setTimeout((()=>{this.mediator.publish(this,L.Km.SizeChanged,{payload:{width:s,height:n}}),this.vz()}))}isBelowSmBreakpoint(t){return t<this.iH}pz(t,i){return t<i?_i.g.Portrait:t>i?_i.g.Landscape:_i.g.None}vz(){this.yS||this.EH()}mz(){this.app.services.ResizeObserver.on(this.$playerContainer,(()=>{this.AD()}))}dA(){var t;this.yS=!0,this.app.services.InteractionService.disableScrollEvent(),this.MH(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(mi.zc.Fullscreen)}cA(){var t;this.yS=!1,this.app.services.InteractionService.enableScrollEvent(),this.LH(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(mi.zc.Normal)}gz(){const t=`<cnx class='${_t.oV}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.bz(i),i}bz(t){(0,I.T7)(t,{"padding-bottom":`${this.Iz()}%`})}Iz(){return this.nz.playerSize.ratioHeight/this.nz.playerSize.ratioWidth*100}Pz(t){var i;(null===(i=this.adHandler)||void 0===i?void 0:i.linearInImpression)?this.Az(t.action):this._z(t.action)}_z(t){}Az(t){const i=this.nH[t];i&&i()}Tz(){this.Jq.push(this.uH.onFloatingEnterStart.subscribe((()=>{var t,i,e;this.mediator.publish(this,L.Zr.PlayerFloatChanged,{payload:q.Float}),this.mediator.publish(this,L.Zr.FloatingEnterStart,{payload:!0}),null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!0),null===(e=null===(i=this.kU)||void 0===i?void 0:i.updateFloatingState)||void 0===e||e.call(i,!0)})),this.uH.onFloatingExitStart.subscribe((()=>{var t,i;this.mediator.publish(this,L.Zr.FloatingExitStart,{payload:!0}),null===(i=null===(t=this.kU)||void 0===t?void 0:t.updateFloatingState)||void 0===i||i.call(t,!1)})),this.uH.onFloatingExitStop.subscribe((()=>{var t,i,e;this.mediator.publish(this,L.Zr.PlayerFloatChanged,{payload:q.Embed}),this.mediator.publish(this,L.Zr.FloatingExitStop,{payload:!0}),null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!1),null===(e=null===(i=this.kU)||void 0===i?void 0:i.updateFloatingState)||void 0===e||e.call(i,!1)})),this.uH.onFloatingEnterStop.subscribe((()=>{this.mediator.publish(this,L.Zr.FloatingEnterStop,{payload:!0}),this.lz(!0)})))}xz(){this.Jq.push(this.uH.onFloatingEnterStop.subscribe((()=>{var t;null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!0),this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)})))}setNewVolume(t){var i;null===(i=this.adHandler)||void 0===i||i.setLinearVolume(t)}kz(){var t;this.Lz(),null===(t=this.adHandler)||void 0===t||t.onLinearExperienceEvent.subscribe((t=>{var i;t.type===J.Uh.UserInteraction&&(null===(i=t.payload)||void 0===i?void 0:i.volume)&&this.Bz()}))}Rz(t){this.subscribe(J.Uh.UserInteraction,t,(({payload:{volume:t}})=>{t&&this.Bz()}))}gD(t){this.mediator.publish(this,L.Km.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}fH(t){this.getVolume()!==t&&this.setNewVolume(t)}Lz(){this.Cq=!0,this.$playerContainer.addEventListener("mouseover",this.pH),this.$playerContainer.addEventListener("mouseout",this.vH)}Bz(){this.Cq&&(this.Cq=!1,this.$playerContainer.removeEventListener("mouseover",this.pH),this.$playerContainer.removeEventListener("mouseout",this.vH))}Oz(){this.breakPointsHandler=new Mi(this.$playerContainer,this.Dz,this.Nz,this.app.config.device),this.fz()}Vz(t=this.$playerContainer){if(this.nz.isCloseButton){switch(this.adHandler&&this.Kq.push(this.adHandler.onLinearUiComponentEvent.subscribe((t=>{t.type===Ri.C.Close&&(this.mediator.publish(this,Ti.CloseButtonClicked),this.handleClose())}))),this.nz.closeButtonMode){case e.ProtoPlayerCloseButtonMode.AlwaysOn:(0,I.cn)(t,_t.s6.CloseOn);break;case e.ProtoPlayerCloseButtonMode.Off:(0,I.cn)(t,_t.s6.CloseOff);break;case e.ProtoPlayerCloseButtonMode.OnHover:(0,I.cn)(t,_t.s6.CloseHover)}switch(this.nz.floatingSettings.floatingCloseButtonMode){case e.ProtoPlayerCloseButtonMode.AlwaysOn:(0,I.cn)(t,_t.s6.CloseFloatOn);break;case e.ProtoPlayerCloseButtonMode.Off:(0,I.cn)(t,_t.s6.CloseFloatOff);break;case e.ProtoPlayerCloseButtonMode.OnHover:(0,I.cn)(t,_t.s6.CloseFloatHover)}}}tz(t){const{skipOffset:i}=t;return{isAutoPlay:this.nz.playbackMode===e.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:(0,a.hj)(i)}}Fz(){this.$q=!0,this.jq=!0,this.$L.contentStart.next(),this.oH(),this.uz()}fz(){this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}dH(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!(0,Oi.ON)({width:t,height:i})&&!this.isBelowSmBreakpoint(t)||((0,I.cn)(this.$experienceContainer,_t.Gj.NoHeight),this.jz())}jz(){return Fi.includes(this.app.config.bundleID)}Uz(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:o}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:a,height:h}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:a,compHeight:s,boundHeight:h,flex:n,maxWidth:r,minWidth:o};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}$z(){if(!(0,P.Vm)([95,5]))return;const t={parent:this.Uz(this.$experienceContainer.parentElement),main:this.Uz(this.$experienceContainer)};(0,S.nF)({message:"BaseExperience_invalid_dimensions",level:S.D_.INFO,exception:JSON.stringify(t),sessionId:this.nz.sessionId})}qz(){const t=E.h.getSessionChildContainer(this.app.config.sessionId).resolve(yi.U);this.$H=new Ei(this.nz.adBreaks,t)}zz(){(0,I.cn)(this.$experienceContainer,_t.s6.ClickToPlayThumbnail)}Gz(){}Wz(){this.mediator.publish(this,J.Xh.SessionRendered),this.tH.next(!0)}Qz(){return this.nz.floatingSettings.floatingMode===e.ProtoPlayerFloatingMode.Always?this.$experienceContainer:this.$playerContainer}Jz(){return Ni(this,void 0,void 0,(function*(){if(this.uH)return;const t=yield function(){return Ai(this,void 0,void 0,(function*(){return(yield(0,P.Up)((()=>Ai(this,void 0,void 0,(function*(){return h.e("floating").then(h.bind(h,9907))}))))).FloatingModule}))}();this.uH=new t(this.nz.floatingSettings,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.app.services.ViewabilityService,this.Qz(),this.app.config.device,this.cl,this.Yz),this.nz.floatingSettings.floatingMode===e.ProtoPlayerFloatingMode.Always?this.xz():(this.EH(),this.Tz()),this.uH.start()}))}renderExperience(t,i,e,s){this.nz=t,this.app=i,this.$experienceContainer=e,s&&s(),this.bH(),this.app.services.ViewabilityService.setViewableThreshold(this.kq),this.generateHTML(),this.qz(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.cH),this.dH()?this.mediator.publish(this,J.Uh.CanStart):this.$z()}start(){return Ni(this,void 0,void 0,(function*(){if(this.Eq=!0,this.cl.playerDimensions={height:this.$playerContainer.clientHeight,width:this.$playerContainer.clientWidth},(0,I.cn)(this.$experienceContainer,_t.sN.MainContainerFlex),this.Oz(),this.mz(),this.nz.floatingSettings.hasFloatingCapability||this.nz.preloadFloating)try{yield this.Jz()}catch(i){const t=this.nz.floatingSettings.floatingMode===e.ProtoPlayerFloatingMode.Always;if((0,S.nF)({message:"BaseExperience__floating_chunk_request",exception:i.message,callStack:i.stack,level:t?S.D_.CRITICAL:S.D_.INFO,sessionId:this.nz.sessionId}),t)throw i}if((0,I.Tp)(this.$playerContainer),this.UH=this.Zz(),this.nz.disableAdsInBackground&&this.disableAdsInBackground(),(0,o.BZ)(this.nz.lineItemSettings.lineItems))try{yield this.zH()}catch(i){(0,S.nF)({message:"BaseExperience__initAdHandler",exception:i.message,callStack:i.stack,level:S.D_.CRITICAL,sessionId:this.nz.sessionId})}this.nz.disableAdvertising||Tt.ai.isBannerBlocked?this.UH.adBlockerStatusChange(Tt.ai.isBannerBlocked):this.app.config.isOVPDomain?this.Kq.push(Tt.ai.onAdBlockerDetected().subscribe((t=>{this.UH.adBlockerStatusChange(t)}))):this.UH.adBlockerStatusChange(Tt.ai.isBannerBlocked),this.app.config.isMobile||this.nz.soundMode!==e.ProtoPlayerSoundMode.Hover||this.kz(),this.nz.isCloseButton&&this.Vz(),this.nz.displayAdCountdown&&(0,I.cn)(this.$playerContainer,_t.s6.AdShowCountdown),this.nz.playbackMode===e.ProtoPlayerPlaybackModeEnum.ClickToPlay&&this.zz();try{this.oz()}catch(t){(0,S.nF)({message:"BaseExperience_initAdsController",exception:t.message,callStack:t.stack,level:S.D_.INFO,sessionId:this.nz.sessionId})}var t,i,s,n;Tt.ai.isBannerBlocked||Tt.ai.detectUsingScript().then((t=>{t&&(this.$L.sessionAdBlocked.next({adBlockDetectionType:Si.ev.Network}),this.UH.disableAdvertising())})),this.app.config.isMobile||this.Wq.push(this.onReady().pipe((0,Dt.h)((t=>!!t)),(t=()=>{this.Gz()},n=(0,di.m)(t)||i||s?{next:t,error:i,complete:s}:t,n?(0,li.e)((function(t,i){var e;null===(e=n.subscribe)||void 0===e||e.call(n);var s=!0;t.subscribe((0,ui.x)(i,(function(t){var e;null===(e=n.next)||void 0===e||e.call(n,t),i.next(t)}),(function(){var t;s=!1,null===(t=n.complete)||void 0===t||t.call(n),i.complete()}),(function(t){var e;s=!1,null===(e=n.error)||void 0===e||e.call(n,t),i.error(t)}),(function(){var t,i;s&&(null===(t=n.unsubscribe)||void 0===t||t.call(n)),null===(i=n.finalize)||void 0===i||i.call(n)})))})):pi.y),(0,fi.w)((()=>{var t;return null===(t=this.aU)||void 0===t?void 0:t.getShortcutsObservable()}))).subscribe((t=>this.Pz(t)))),this.Yq.push(this.yH.onToggleMute.subscribe((t=>{this.fH(t)})))}))}play(){var t;null===(t=this.adHandler)||void 0===t||t.play()}pause(){var t;null===(t=this.adHandler)||void 0===t||t.pause()}setVolume(t){this.setNewVolume(t),this.Bz()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){(0,Oi.ON)({width:t,height:i})||(0,I.T7)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}updateDynamicCuePoints(t){this.UH.updateDynamicCuePoints(t)}setCustomMacros(t){var i;this.app.services.MacrosService.addExtraMacros(t),null===(i=this.adHandler)||void 0===i||i.setCustomMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.Sq})}setViewableThreshold(t){(0,S.nF)({message:"setViewableThreshold_usage",level:S.D_.INFO,exception:this.app.config.sdkVersion,sessionId:this.nz.sessionId},{throttle:1,shouldSendMaxLog:!1}),this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.kq=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,J.Uh.Destroy)}updateJsQueryTargeting(t){(0,a.$K)(this.adHandler)?this.adHandler.updateJsQueryTargeting(t):this.nz.queryJsTargeting=(0,Di.S1)(this.nz.queryJsTargeting,t)}removeJsQueryTargeting(t){(0,a.$K)(this.adHandler)?this.adHandler.removeJsQueryTargeting(t):this.nz.queryJsTargeting=(0,Di.G_)(this.nz.queryJsTargeting,t)}disableAdvertising(){this.UH.disableAdvertising()}enableAdvertising(){this.UH.enableAdvertising()}disableAdsInBackground(){this.UH.disableAdsInBackground()}enableAdsInBackground(){this.UH.enableAdsInBackground()}enableFloatingMode(){this.uH?this.uH.enableFloatingMode():this.Jz().then((()=>{this.uH.enableFloatingMode()})).catch((t=>{(0,S.nF)({message:"BaseExperience__floating_js_api_chunk_request",exception:t.message,callStack:t.stack,level:S.D_.CRITICAL,sessionId:this.nz.sessionId})}))}disableFloatingMode(){var t;this.uH&&(null===(t=this.uH)||void 0===t||t.disableFloatingMode())}isFloatingModeEnabled(){var t,i;return null!==(i=null===(t=this.uH)||void 0===t?void 0:t.isFloatingModeEnabled())&&void 0!==i&&i}setFloatingSettings(t){this.uH?this.uH.setFloatingSettings(t):this.Jz().then((()=>{this.uH.setFloatingSettings(t)})).catch((t=>{(0,S.nF)({message:"BaseExperience__floating_js_api_chunk_request",exception:t.message,callStack:t.stack,level:S.D_.CRITICAL,sessionId:this.nz.sessionId})}))}getFloatingSettings(){var t;return null===(t=this.uH)||void 0===t?void 0:t.getFloatingSettings()}setLineItemMetadata(t,i){(0,a.$K)(this.adHandler)?this.adHandler.setLineItemMetadata(t,i):i({success:!1,errorReason:dt.q.AdManagerNotInitialized})}startConnatixAuction(t){(0,a.$K)(this.adHandler)?this.adHandler.startConnatixAuction(t):t({success:!1})}onReady(){return this.tH.asObservable()}getApiConfig(){const t=JSON.parse(JSON.stringify(this.nz.apiConfig));return delete t.settings._connatixInternals,t}getSessionDataConfig(){return{playerInstanceID:this.app.config.appId}}destroy(){var t;(0,Mt.i)(this.Wq),(0,Mt.i)(this.Kq),(0,Mt.i)(this.Xq),this.adHandler&&((0,Mt.i)(this.Zq),this.QH.unsubscribe(),this.adHandler.destroy()),this.UH&&this.UH.destroy(),this.uH&&(this.uH.destroy(!0),this.uH=null,(0,Mt.i)(this.Jq)),(0,Mt.i)(this.Yq),null===(t=this.aU)||void 0===t||t.destroy()}}var ji,Ui;!function(t){t[t.PlayerOrientationChange=0]="PlayerOrientationChange",t[t.MainOrientationChange=1]="MainOrientationChange"}(ji||(ji={})),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Ui||(Ui={}));class qi{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.NU=!1,this.VU=!1,this.FU=!1,this.jU=()=>{},i){case e.ProtoPlayerPlaybackModeEnum.Autoplay:this.UU(this.$U);break;case e.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.UU(this.qU);break;case e.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.UU(this.HU)}}UU(t){this.jU=()=>{this.NU||t.call(this)}}$U(){this.FU&&!this.VU&&this.inView&&(this.VU=!0,this.mediator.publish(this,Ui[Ui.Play]))}HU(){this.FU&&(this.inView||this.yS&&!this.inView?this.mediator.publish(this,Ui[Ui.Play]):this.mediator.publish(this,Ui[Ui.Pause]))}qU(){}setViewability(t){this.inView=t,this.jU()}setUserPlayback(t){!this.VU&&t&&(this.VU=t),this.NU=!t}setCanPlay(t){this.FU=t,this.NU||!this.inView&&!this.VU||this.jU()}setIsFullscreen(t){this.yS=t}}var Hi=h(7953);const zi={xl:720,lg:320,md:204,sm:142,xs:0},Wi={[e.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[e.ProtoDeviceType.Tablet]:Object.assign({},zi),[e.ProtoDeviceType.Smartphone]:Object.assign({},zi)},Gi={xl:720,lg:320,md:204,sm:142,xs:0},Xi={[e.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[e.ProtoDeviceType.Tablet]:Object.assign({},Gi),[e.ProtoDeviceType.Smartphone]:Object.assign({},Gi)},Qi=176,Ji=160,Yi=144,Ki=112,Zi={xl:Gi.xl+Qi,lg:Gi.lg+Ji,md:Gi.md+Yi,sm:Gi.sm+Ki},te={[e.ProtoDeviceType.Desktop]:{xl:468+Qi,lg:388+Ji,md:248+Yi,sm:142+Ki,xs:0},[e.ProtoDeviceType.Tablet]:Object.assign({},Zi),[e.ProtoDeviceType.Smartphone]:Object.assign({},Zi)},ie={lg:320,md:204,sm:0},ee={[e.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:0},[e.ProtoDeviceType.Tablet]:Object.assign({},ie),[e.ProtoDeviceType.Smartphone]:Object.assign({},ie)},se={xxl:1080,xl:0},ne={[e.ProtoDeviceType.Desktop]:{xxl:720,xl:0},[e.ProtoDeviceType.Tablet]:Object.assign({},se),[e.ProtoDeviceType.Smartphone]:Object.assign({},se)};Hi.ProtoGalleryOrientationEnum.Landscape,Hi.ProtoGalleryStyleMode.Detailed,Hi.ProtoGalleryStyleMode.Visual,Hi.ProtoGalleryOrientationEnum.Portrait,Hi.ProtoGalleryStyleMode.Detailed,Hi.ProtoGalleryStyleMode.Visual;var re;!function(t){t[t.None=0]="None",t[t.MinSlidesBeforeFirstAd=1]="MinSlidesBeforeFirstAd",t[t.SlidesBetweenAds=2]="SlidesBetweenAds"}(re||(re={}));class oe{constructor(t){this.zU=t,this.SG=!1,this.Yk=0,this.cM=0,this.GL=[],this.tR=0,this.l$={slides:!1},this.d$=new At.x}get onExperienceControllerStateChange(){return this.d$.asObservable()}start(){this.QD()}canEnableAds(t,i){return t===e.ProtoAdSlotsEnum.MidRoll&&this.l$.slides&&i?{enableAds:!1,disableReason:ei.m.TimeoutBetweenAds}:{enableAds:!0,disableReason:ei.m.Unknown}}getAdBreakDuration(t){const i=this.qF();return t&&0!==this.GL.length&&i!==re.None?i===re.MinSlidesBeforeFirstAd?this.mU(this.zU.minSlidesBeforeFirstAd-this.cM):i===re.SlidesBetweenAds?this.mU(this.zU.slidesBetweenAds-this.Yk):0:0}onAdImpression(t,i){this.Yk=0,t===e.ProtoAdSlotsEnum.MidRoll&&(this.SG||(this.SG=!0))}onAdFinished(t,i,e){i||this.QD()}onAdStateChange(t,i,s){t===e.ProtoAdSlotsEnum.MidRoll||s||(this.SG=!1)}contentChanged(t,i){this.QD(),this.SG=!1}slideChanged(t){this.tR=t,this.Yk++,this.cM++,this.QD()}updateStoryTimeline(t){this.GL=t}destroy(){}QD(){this.l$.slides=!1;const t=this.qF();t===re.MinSlidesBeforeFirstAd?this.Nq():t===re.SlidesBetweenAds&&this.iY(),this.d$.next()}Nq(){this.cM<=this.zU.minSlidesBeforeFirstAd&&(this.l$.slides=!0)}iY(){this.Yk<=this.zU.slidesBetweenAds&&(this.l$.slides=!0)}mU(t){let i=0,e=t;for(let t=0;t<this.GL.length&&0!==e;t++)t<this.tR||(i+=this.GL[t],e--);return i}getDurationUntilNextOpportunity(t){return this.getAdBreakDuration(t)}qF(){return!this.SG&&this.zU.minSlidesBeforeFirstAd?re.MinSlidesBeforeFirstAd:this.SG&&this.zU.slidesBetweenAds?re.SlidesBetweenAds:re.None}}var ae,he,ce=h(8021),de=h(6224),le=h(6203),ue=h(8230);!function(t){t[t.VolumeControls=0]="VolumeControls",t[t.PlaybackControls=1]="PlaybackControls",t[t.PlaylistControls=2]="PlaylistControls",t[t.CtaButton=3]="CtaButton",t[t.SlideTitle=4]="SlideTitle",t[t.TopLogo=5]="TopLogo",t[t.TopStoryTitle=6]="TopStoryTitle",t[t.TopSlideTitle=7]="TopSlideTitle",t[t.TextLabel=8]="TextLabel"}(ae||(ae={})),function(t){t[t.Default=0]="Default",t[t.Description=1]="Description",t[t.Quote=2]="Quote",t[t.Bullet=3]="Bullet",t[t.Cover=4]="Cover",t[t.Instagram=5]="Instagram",t[t.Pinned=6]="Pinned"}(he||(he={}));var pe,fe;!function(t){t.Video="VIDEO",t.Audio="AUDIO"}(pe||(pe={})),function(t){t[t.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",t[t.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",t[t.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",t[t.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(fe||(fe={}));const me=[fe.MEDIA_ERR_NETWORK,fe.MEDIA_ERR_DECODE,fe.MEDIA_ERR_SRC_NOT_SUPPORTED];var ge;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(ge||(ge={}));var ve=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class ye{constructor(t,i,e){this.WG=t,this.Mp=e,this.fu=!1,this.VX=!1,this.jX=ge.Hidden,this.UX=!1,this.$X=new At.x,this.qX=!1,this.HX=new Map([[z.wB.Play,()=>this.zX()],[z.wB.Playing,()=>this.WX()],[z.wB.Timeupdate,t=>this.XX(t)],[z.wB.Ended,t=>this.QX(t)],[z.wB.Seeked,t=>this.JX(t)],[z.wB.Error,()=>this.YX()],[z.wB.LoadedMetadata,()=>this.KX()],[z.wB.Pause,()=>this.ZX()],[z.wB.Volumechange,()=>this.tQ()],[z.wB.BufferProgress,()=>this.iQ()]]),this.eQ=t=>{let i=!1;(t.type===z.wB.Timeupdate&&this.sQ()||t.type===z.wB.Seeked)&&(i=this.nQ(z.wB.Timeupdate));const e=this.HX.get(t.type);(0,a.$K)(e)?e(i):this.$X.next({type:t.type})},this.Cn=Object.values(z.wB),this.volume=i,this.MS()}get currentTime(){return this.WG.currentTime}set currentTime(t){this.VX?this.WG.currentTime=t:this.rQ=t}get duration(){return this.WG.duration}get isPlaying(){return this.fu}get videoEvents(){return this.$X.asObservable()}get volume(){return this.du}set volume(t){const i=t?t<=1?t:t/100:t;i!==this.du&&(this.du=i,void 0!==this.du&&(this.WG.volume=this.du,(0,I.Q1)(this.WG,this.du)))}setUnfreeze(){this.qX=!0}play(){return ve(this,void 0,void 0,(function*(){this.UX=!0,this.oQ&&clearTimeout(this.oQ),this.oQ=setTimeout((()=>{this.$X.next({type:z.wB.Error,payload:{errorMessage:"play_timeout"}})}),25e3);const t=this.WG.play();return(0,a.$K)(t)?t.catch((t=>((0,S.nF)({message:"ContentPlayer_play_promise_catch",exception:t,level:S.D_.INFO,sessionId:this.Mp.sessionId},{shouldSendMaxLog:!1,pacing:1}),Promise.reject(t)))):Promise.resolve()}))}pause(){this.oQ&&clearTimeout(this.oQ),this.WG.pause(),this.fu=!1,this.UX=!1}destroy(){this.Cn.forEach((t=>{this.WG.removeEventListener(t,this.eQ)}))}setTrackModes(t){this.jX=t,this.cQ()}setMetaLoaded(t){this.VX=t}setCrossOriginAttribute(){this.WG.getAttribute("crossorigin")||this.WG.setAttribute("crossorigin","anonymous")}setPoster(t){if(this.WG.nodeName!==pe.Video)return;const i=t.getThumbnailUrl(this.WG.clientWidth,this.WG.clientHeight);(0,a.QM)(i)&&(this.WG.poster=i)}getCurrentTrack(){return this.WG.textTracks&&0!==this.WG.textTracks.length?this.WG.textTracks[0]:null}MS(){this.Cn.forEach((t=>{this.WG.addEventListener(t,this.eQ)}))}zX(){this.UX||!this.Mp.isInApp||this.Mp.os!==xi.M.Android?this.fu=!0:this.pause()}WX(){this.oQ&&clearTimeout(this.oQ),this.Mp.os===xi.M.Ios&&this.qX&&((0,I.UR)(this.WG),this.qX=!1),this.cQ(),this.$X.next({type:z.wB.Playing})}tQ(){this.$X.next({type:z.wB.Volumechange,payload:{isMuted:this.WG.muted}})}XX(t){this.$X.next({type:z.wB.Timeupdate,payload:{isPlaying:this.fu,isCorruptedCurrentTime:t}})}iQ(){this.$X.next({type:z.wB.BufferProgress,payload:{bufferRanges:this.WG.buffered}})}ZX(){this.oQ&&clearTimeout(this.oQ),this.$X.next({type:z.wB.Pause})}YX(){this.oQ&&clearTimeout(this.oQ);const t=this.WG.error?this.WG.error.message:"";t&&this.$X.next({type:z.wB.Error,payload:{errorMessage:t,errorCode:this.lQ()}})}KX(){this.VX=!0,(0,a.hj)(this.rQ)&&(this.currentTime=this.rQ,this.rQ=null),this.$X.next({type:z.wB.LoadedMetadata})}JX(t){this.$X.next({type:z.wB.Seeked,payload:{isCorruptedCurrentTime:t}})}QX(t){this.$X.next({type:z.wB.Ended,payload:{isCorruptedCurrentTime:t}})}nQ(t){return this.Mp.os===xi.M.Ios&&this.WG.currentTime>this.WG.duration&&((0,I.UR)(this.WG),(0,S.nF)({message:"ContentPlayer__CorruptedCurrentTime",callStack:`Event type: ${t}`,level:S.D_.WARN,sessionId:this.Mp.sessionId},{throttle:10}),!0)}sQ(){return this.WG.currentTime-this.WG.duration>.1}cQ(){this.WG.textTracks&&0!==this.WG.textTracks.length&&Object.keys(this.WG.textTracks).forEach((t=>{this.jX===this.WG.textTracks[t].mode&&(this.WG.textTracks[t].mode=this.jX===ge.Hidden?ge.Disabled:ge.Hidden),this.WG.textTracks[t].mode=this.jX}))}lQ(){var t,i,e;if((null===(t=this.WG.error)||void 0===t?void 0:t.message.includes("MEDIA_ELEMENT_ERROR"))&&me.includes(null===(i=this.WG.error)||void 0===i?void 0:i.code))return null===(e=this.WG.error)||void 0===e?void 0:e.code}}class be{constructor(t,i,e,s){this.Mp=t,this.BX=i,this.uQ=e,this.nr=s,this.pQ=!1,this.fQ=!1,this.vQ()}get volume(){var t,i;return null!==(i=null===(t=this.mQ)||void 0===t?void 0:t.volume)&&void 0!==i?i:0}set volume(t){this.mQ&&(this.mQ.volume=t,t>0&&this.pQ&&this.play())}start(t){if(!(0,a.QM)(t))throw new Error("AudioHandle no audio url");this.mQ=new ye(this.yQ,this.uQ,this.Mp),this.bQ=t}play(){if(!this.mQ||!(0,a.QM)(this.bQ))throw new Error("AudioHandle error");this.fQ||(0!==this.mQ.volume?(0,a.QM)(this.yQ.src)?(this.mQ.play().catch((()=>{})),this.pQ=!1):(this.fQ=!0,this.yQ.oncanplay=()=>{var t;this.yQ.oncanplay=null,null===(t=this.mQ)||void 0===t||t.play().catch((()=>{})),this.pQ=!1,this.fQ=!1},this.yQ.src=this.bQ):this.pQ=!0)}pause(){this.fQ&&(this.yQ.oncanplay=null,this.fQ=!1),this.mQ&&(this.pQ=!1,this.mQ.pause())}destroy(){var t;this.yQ.oncanplay=null,null===(t=this.mQ)||void 0===t||t.destroy()}vQ(){this.nr?this.yQ=this.nr.createElement("audio"):this.yQ=document.createElement("audio"),this.BX.appendChild(this.yQ)}}var Ie=h(3360);class Pe extends kt.ai{constructor(t,i,e,s,n){super(),this.mediator=t,this.JV=i,this.nr=e,this.SJ=s,this.he=n,this.AW=!1,this.BY=!1,(0,a.QM)(i.imageUrl)||(i.imageUrl=f.n.endPoints.base.image),this.gH=new Li(n),this.d0=this.nr.createElementByString(this.gW()),this.u0()}set isLoaded(t){this.BY=t}get isLoaded(){return this.BY}q0(t,i){const e=t>i?X.Landscape:X.Portrait;return{imageUrl:this.A1[e],altText:(0,a.$K)(this.JV.altText)?this.JV.altText:"",queryParams:this.JV.mediaContext===T.ProtoMediaContextEnum.Logo?Ie.Q.getScaledImageQueryParams(t,i):Ie.Q.getSmartCroppedImageQueryParams(t,i),width:t,height:i}}u0(){const{imageUrl:t,portraitImageUrl:i}=this.JV;this.A1={[X.Landscape]:t,[X.Portrait]:(0,a.QM)(i)?i:t}}get duration(){return this.JV.slideDuration*ht.s_}getThumbnailUrlParams(t,i){return this.q0(t,i)}destroy(){}}class we extends Pe{constructor(t,i,s,n=0){super(t,i,s.services.GlobalDomUtilsService,s.services.ResizeObserver,s.services.UrlSuffixerService),this.Sl=s,this.uQ=n,this.type=e.ProtoMediaTypeEnum.Image,this._1=t=>{t.preventDefault()},this.T1()}T1(){this.JV.mediaContext===T.ProtoMediaContextEnum.Logo&&(0,I.cn)(this.d0,ce.v$.MediaLogo)}C1(){this.E1=this.d0.clientWidth,this.M1=this.d0.clientHeight}L1(){this.R1=setTimeout((()=>{const{clientWidth:t,clientHeight:i}=this.d0.parentElement,{imageUrl:e,altText:s,width:n,height:r,queryParams:o}=this.q0(t,i),a=this.gH.getImage(e,s,n,r,o,!0);this.B1&&this.d0.removeChild(this.B1),a&&(this.d0.appendChild(a),this.B1=a,this.O1(this.B1))}),0)}D1(){this.B1&&(0,a.QM)(this.JV.imageUrl)&&this.L1()}N1(){return(0,a.$K)(this.d0)&&(0,a.$K)(this.E1)&&(0,a.$K)(this.M1)}F1(t){return!!this.N1()&&Math.abs(this.E1-this.d0.clientWidth)>=this.E1/t}V1(t){return!!this.N1()&&Math.abs(this.M1-this.d0.clientHeight)>=this.M1/t}O1(t){t.addEventListener("mousedown",this._1)}j1(t){t.removeEventListener("mousedown",this._1)}U1(t){this.z1=new be({isInApp:this.Sl.config.isInApp,os:this.Sl.config.os.os,sessionId:this.Sl.config.sessionId},t,this.uQ)}gW(){return'<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"></cnx>'}reset(){this.isLoaded&&(this.d0.style.transitionDuration="",this.d0.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.F1(10)||this.V1(10))&&(this.D1(),this.C1())}play(){this.isLoaded&&(this.d0.style.transform="",this.d0.style.transitionDuration=`${this.JV.slideDuration}s`,(0,I.L_)(this.d0,_t.s_.Paused,_t.s_.Playing),this.z1.play())}pause(){this.isLoaded&&(this.d0.style.transitionDuration="",this.d0.style.transform=this.nr.getTransformPropertyValue(this.d0),(0,I.L_)(this.d0,_t.s_.Playing,_t.s_.Paused),this.z1.pause())}load(t){this.isLoaded||(this.U1(this.d0),this.z1.start(this.he.appendParamsToUrl(((t=i.o.connatix)=>`https://vid.${t}/audio/track.mp3`)())),this.isLoaded=!0,t.appendChild(this.d0),this.C1(),this.pause(),this.L1())}destroy(){var t;super.destroy(),this.B1&&this.j1(this.B1),clearTimeout(this.R1),null===(t=this.z1)||void 0===t||t.destroy()}get volume(){return this.isLoaded?this.z1.volume:this.uQ}set volume(t){this.isLoaded?this.z1.volume=t:this.uQ=t}}class Se extends be{constructor(t,i,e,s){super(t,i,e,s),this.rQ=null,this.vQ()}get currentTime(){var t,i;return null!==(i=null===(t=this.mQ)||void 0===t?void 0:t.currentTime)&&void 0!==i?i:0}set currentTime(t){if(this.mQ)if(isNaN(this.mQ.duration))this.rQ=t;else{const i=2;this.mQ.currentTime=parseFloat((t%this.mQ.duration).toFixed(i)),this.rQ=null}}get audioFile(){var t;return null!==(t=this.bQ)&&void 0!==t?t:""}set audioFile(t){this.bQ=t}play(){if(!this.mQ||!(0,a.QM)(this.bQ))throw new Error("AudioHandle error");return this.fQ?Promise.resolve():0===this.mQ.volume?(this.pQ=!0,Promise.resolve()):(0,a.QM)(this.yQ.src)?(this.pQ=!1,this.mQ.play()):new Promise((t=>{if(this.fQ=!0,this.yQ.oncanplay=()=>{var i;this.yQ.oncanplay=null,null===(i=this.mQ)||void 0===i||i.play().then((()=>{(0,a.Ft)(this.rQ)||(this.currentTime=this.rQ,this.rQ=null),t()})).catch((()=>{})),this.pQ=!1,this.fQ=!1},this.yQ.src=this.bQ||"",!(0,a.QM)(this.bQ))throw new Error("AudioHandle error");this.yQ.src=this.bQ||""}))}vQ(){super.vQ(),this.yQ.loop=!0}}var Ae,xe,_e=h(8576),Te=h(7994);!function(t){t.UnexpectedError="unexpectedError",t.BufferingError="bufferingError",t.FragBuffered="fragBuffered",t.ManifestLoaded="manifestLoaded",t.LevelSwitching="levelSwitching",t.LevelSwitched="levelSwitched",t.StreamEnded="streamEnded"}(Ae||(Ae={})),function(t){t.Http="http",t.Https="https"}(xe||(xe={}));const Ce={height:0,quality:z.ZH.Auto};var ke;!function(t){t[t.MP4=0]="MP4",t[t.HLS=1]="HLS"}(ke||(ke={}));var Ee=h(655),Me=h(5720),Le=h(3699),Re=h(8843),Be=h(2457),Oe=h(7845);var De=h(1418),Ne=h.n(De);function Fe(t){const i=new(Ne());return i.push(t),i.end(),i.manifest}var $e=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class Ve{constructor(t,i){this.nr=t,this.en=i,this.IQ=new At.x,this.PQ=new At.x,this.wQ=new At.x,this.onTrackLoaded=this.IQ.asObservable(),this.onQualityChange=this.PQ.asObservable(),this.onCurrentQuality=this.wQ.asObservable(),this.AQ=()=>{this.IQ.next()}}SQ(t){this._Q=t}TQ(t){this.en.innerHTML="",t.forEach((t=>{this.en.appendChild(t)}))}xQ(){return this.kQ}CQ(t){var i;null===(i=this.kQ)||void 0===i||i.remove(),this.kQ=null,this.MQ=t,this._Q&&this._Q.subtitles&&t&&(this.en.childNodes.forEach((t=>{"track"===t.nodeName.toLowerCase()&&t.remove()})),t.isHLSTrack?this.LQ(t.file).then((i=>{this.BQ(t,i)})):this.BQ(t))}BQ(t,i){const e=this.nr.createElement("track");e.src=(0,a.QM)(i)?i:t.file,e.srclang=t.code,e.label=t.title,e.kind="subtitle",e.default=!0,e.addEventListener("load",this.AQ,!1),e.addEventListener("loaded",this.AQ,!1),this.en.appendChild(e),this.kQ=e}LQ(t){return $e(this,void 0,void 0,(function*(){try{const i=yield H.n.fetchXhttpRequest({requestUrl:t,requestType:"GET"});if(!(0,a.QM)(i))return;const e=Fe(i);if(!(0,o.BZ)(e.segments)||!(0,j.jv)(e.segments[0].uri))return;return e.segments[0].uri}catch(t){return}}))}}var je=h(2857);class Ue extends Ve{constructor(t,i,e,s,n,r,o,a,h){super(t,i),this.Zs=e,this.RQ=s,this.OQ=n,this.zD=r,this.he=o,this.us=a,this.DQ=h,this.NQ=new At.x,this.onHlsEvent=this.NQ.asObservable(),this.rn=[],this.VQ=z.ZH.Auto,this.FQ=320,this.jQ=!1,this.UQ=!1,this.$Q=!1,this.handlerType=ke.HLS,this.qQ=new ci.X(0),this.HQ=!1,this.zQ=!1,this.GQ=!1,this.isNativeVideoSrcImplementation=!1,this.WQ=5,this.ln=()=>{this.dn.off(this.Zs.Events.MEDIA_ATTACHED,this.ln);const t=this.QQ(this.JQ);this.dn.loadSource(t),this.dn.once(this.Zs.Events.MANIFEST_PARSED,this.un)},this.un=()=>{this.dn.off(this.Zs.Events.MANIFEST_PARSED,this.un),this.dn.on(this.Zs.Events.LEVEL_SWITCHING,this.YQ),this.dn.on(this.Zs.Events.LEVEL_SWITCHED,this.KQ),this.dn.on(this.Zs.Events.FRAG_BUFFERED,this.ZQ),this.dn.on(this.Zs.Events.FRAG_LOADING,this.tJ),this.dn.on(this.Zs.Events.FRAG_LOADED,this.iJ),this.dn.on(this.Zs.Events.BUFFER_APPENDING,this.eJ),this.dn.on(this.Zs.Events.BUFFER_APPENDED,this.sJ),this.dn.on(this.Zs.Events.BUFFER_EOS,this.nJ),this.JQ=null,this.pn(),this.rJ(),this.oJ(),this.hJ.resolve()},this.aJ=()=>{this.JQ=null,this.en.removeEventListener(z.wB.LoadedMetadata,this.aJ),this.cJ.resolve()},this.rJ=()=>{const t=(0,je.T_)(this.rn).map((t=>({videoHeight:t.height,isHD:t.height>=z.gQ,label:t.level.toString()})));this.NQ.next({type:Ae.ManifestLoaded,payload:{qualityList:t}})},this.ZQ=()=>{this.NQ.next({type:Ae.FragBuffered})},this.tJ=()=>{this.jQ=!0},this.iJ=()=>{this.jQ=!1},this.eJ=()=>{this.UQ=!0},this.sJ=()=>{this.UQ=!1},this.nJ=()=>{this.NQ.next({type:Ae.StreamEnded})},this.hn=(t,i)=>{if(i.details===this.Zs.ErrorDetails.BUFFER_STALLED_ERROR&&(this.jQ||this.UQ?this.NQ.next({type:Ae.BufferingError}):(this.$Q||(this.shouldRecoverMediaError()&&this.dn.recoverMediaError(),this.en.play().then((()=>{this.$Q=!1})).catch((()=>{this.$Q=!1}))),this.$Q=!0)),i.fatal)switch(i.type){case this.Zs.ErrorTypes.NETWORK_ERROR:if(i.details===this.Zs.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.dJ("hls_network_error_manifest_parsing_error_FATAL");if(i.details===this.Zs.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.NQ.next({type:Ae.UnexpectedError});if(i.details===this.Zs.ErrorDetails.LEVEL_LOAD_ERROR&&this.qQ.next(this.qQ.value+1),this.HQ)return this.nJ(),void(this.HQ=!1);this.dn.startLoad();break;case this.Zs.ErrorTypes.MEDIA_ERROR:this.dn.recoverMediaError();break;default:this.dJ("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===this.Zs.ErrorTypes.MEDIA_ERROR&&i.details===this.Zs.ErrorDetails.BUFFER_APPENDING_ERROR&&this.dJ("hls_media_error_buffer_appending_error"),i.type===this.Zs.ErrorTypes.NETWORK_ERROR&&i.details===this.Zs.ErrorDetails.MANIFEST_PARSING_ERROR&&this.dJ("hls_network_error_manifest_parsing_error")},this.lJ=()=>{this.dJ("hls_video_tag_error",`code_${this.en.error.code}_message_${this.en.error.message}`)},this.KQ=(t,i)=>{this.FQ=this.rn.find((t=>t.level===i.level)).height,this.PQ.next(this.currentQualitySettings.height),this.wQ.next(this.currentQualitySettings),this.NQ.next({type:Ae.LevelSwitched})},this.YQ=(t,i)=>{this.dn.autoLevelEnabled||i.level===this.dn.currentLevel||this.NQ.next({type:Ae.LevelSwitching})},(0,je.fh)()?(this.dn=this.uJ(),this.isNativeVideoSrcImplementation=!1):(this.isNativeVideoSrcImplementation=!0,this.OQ={quality:z.ZH.Strict,height:360}),this.FQ=this.OQ.height,this.VQ=this.OQ.quality}start(){}get liveSyncPosition(){if(this.dn)return this.dn.liveSyncPosition}setSource(t,i=!1){this.WQ=5,this.zQ=this.zD&&!t.isExternalSource,this.dn&&this.zQ&&(this.GQ||(this.GQ=!0,this.dn.autoLevelCapping=1)),this.yB=t.id,this.SQ(t),this.JQ=t,this.pJ=t,i&&this.attachMedia()}attachMedia(){return this.hJ?this.hJ.promise:this.cJ?this.cJ.promise:(!this.dn&&(0,je.fh)()&&(this.dn=this.uJ()),new Promise((t=>{if(this.dn?this.dn.on(this.Zs.Events.ERROR,this.hn):this.en.addEventListener(z.wB.Error,this.lJ),this.initLiveStreamRetry(),this.JQ){const i=this.xQ()?[this.xQ()]:[];this.TQ(i),this.dn?this.vJ().then((()=>{t()})):this.mJ().then((()=>{t()}))}else t()})))}detachMedia(){this.rn=[],this.hJ=void 0,this.cJ=void 0,this.dn?(this.dn.detachMedia(),this.destroy()):(this.en.removeAttribute("src"),this.en.removeEventListener(z.wB.LoadedMetadata,this.aJ),this.en.removeEventListener(z.wB.Error,this.lJ))}setQuality(t){this.VQ=t.quality,this.FQ=t.height,this.dn?this.oJ():this.gJ(),this.PQ.next(this.currentQualitySettings.height),this.wQ.next(this.currentQualitySettings)}get currentQualitySettings(){return{quality:this.VQ,height:this.FQ}}onQualityChanged(){return this.isNativeVideoSrcImplementation?this.attachMedia():new Promise((()=>{}))}recoverMedia(){return 0!==this.WQ&&(this.WQ--,this.dn.recoverMediaError(),!0)}shouldRecoverMediaError(){return!this.DQ}destroy(){this.dn?(this.yJ(),this.dn.destroy(),this.dn=null):(this.en.removeEventListener(z.wB.LoadedMetadata,this.aJ),this.en.removeEventListener(z.wB.Error,this.lJ))}updateSubtitleTrackSource(t){this.CQ(t)}getSelectedCaptionTrack(){return this.MQ}vJ(){return this.hJ=new Te.C,this.dn.attachMedia(this.en),this.dn.once(this.Zs.Events.MEDIA_ATTACHED,this.ln),this.hJ.promise}mJ(){return this.cJ=new Te.C,this.IJ(this.pJ.getHlsSource()),this.en.addEventListener(z.wB.LoadedMetadata,this.aJ),this.cJ.promise}yJ(){this.dn.off(this.Zs.Events.MEDIA_ATTACHED,this.ln),this.dn.off(this.Zs.Events.MANIFEST_PARSED,this.un),this.dn.off(this.Zs.Events.ERROR,this.hn),this.dn.off(this.Zs.Events.LEVEL_SWITCHING,this.YQ),this.dn.off(this.Zs.Events.LEVEL_SWITCHED,this.KQ),this.dn.off(this.Zs.Events.FRAG_BUFFERED,this.ZQ),this.dn.off(this.Zs.Events.FRAG_LOADING,this.tJ),this.dn.off(this.Zs.Events.FRAG_LOADED,this.iJ),this.dn.off(this.Zs.Events.BUFFER_APPENDING,this.eJ),this.dn.off(this.Zs.Events.BUFFER_APPENDED,this.sJ),this.dn.off(this.Zs.Events.BUFFER_EOS,this.nJ)}pn(){this.dn.levels.forEach(((t,i)=>{this.zQ&&i>1||this.rn.push({level:i,height:t.height})}))}dJ(t,i){(0,S.nF)({message:t,exception:this.yB,level:S.D_.WARN,callStack:i,sessionId:this.us},{extraLogsPercentage:5}),this.NQ.next({type:Ae.UnexpectedError})}oJ(){if(this.VQ===z.ZH.Auto)-1!==this.dn.currentLevel&&(this.dn.currentLevel=-1);else try{const t=(0,je.VK)(this.rn,this.FQ);t.level!==this.dn.currentLevel&&(this.dn.currentLevel=t.level)}catch(t){(0,S.nF)({message:"HlsSourceHandler_set_quality",exception:t.message,callStack:t.stack,level:S.D_.CRITICAL,sessionId:this.us},{extraLogsPercentage:5})}}gJ(){const t=this.PJ.playlists.findIndex((t=>this.FQ===t.attributes.RESOLUTION.height));if(-1!==t){const i=this.PJ.playlists[t];this.en.src=this.wJ(this.QQ(this.pJ),i.uri)}else this.en.src=this.QQ(this.pJ)}QQ(t){try{const i=t.getHlsSource(),e=(0,P.bx)(i);return e&&e.protocol?this.he.appendParamsToUrl(i):this.he.appendParamsToUrl(`${this.RQ}:${i}`)}catch(t){(0,S.nF)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:S.D_.CRITICAL,callStack:t.stack,sessionId:this.us},{throttle:5,shouldSendMaxLog:!1,extraLogsPercentage:5})}}wJ(t,i){return/^https?:\/\//i.test(i)?i:t.replace(/[^/]+\.m3u8/,i)}IJ(t){try{H.n.fetchXhttpRequest({requestUrl:t,requestType:"GET"}).then((t=>{this.PJ=Fe(t),this.gJ()}))}catch(t){}}uJ(){return new this.Zs(Object.assign({},je.yt))}initLiveStreamRetry(){var t;null===(t=this.AJ)||void 0===t||t.unsubscribe(),this.AJ=this.qQ.pipe(function(t){for(var i,e,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];var r=null!==(i=(0,Be.yG)(s))&&void 0!==i?i:Re.z,o=null!==(e=s[0])&&void 0!==e?e:null,a=s[1]||1/0;return(0,li.e)((function(i,e){var s=[],n=!1,h=function(t){var i=t.buffer;t.subs.unsubscribe(),(0,Le.P)(s,t),e.next(i),n&&c()},c=function(){if(s){var i=new Me.w0;e.add(i);var n={buffer:[],subs:i};s.push(n),(0,Oe.f)(i,r,(function(){return h(n)}),t)}};null!==o&&o>=0?(0,Oe.f)(e,r,c,o,!0):n=!0,c();var d=(0,ui.x)(e,(function(t){var i,e,n=s.slice();try{for(var r=(0,Ee.XA)(n),o=r.next();!o.done;o=r.next()){var c=o.value,d=c.buffer;d.push(t),a<=d.length&&h(c)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(i)throw i.error}}}),(function(){for(;null==s?void 0:s.length;)e.next(s.shift().buffer);null==d||d.unsubscribe(),e.complete(),e.unsubscribe()}),void 0,(function(){return s=null}));i.subscribe(d)}))}(5e3),(0,Dt.h)((t=>t.length<3))).subscribe((()=>{this.HQ=!0,this.qQ.next(0)}))}}class qe{constructor(t){this.cF=[{id:z.L5.H264,extension:"mp4",type:"video/mp4"},{id:z.L5.Hevc,extension:"mp4",type:"video/mp4"}],this.dF=this.cF.find((i=>i.id===t))}get type(){const t=this.dF.codecs?`codecs=${this.dF.codecs}`:"";return`${this.dF.type}; ${t}`}get id(){return this.dF.id}}class He{constructor(t,i){this.SJ=t,this.xS=i,this._J={quality:z.ZH.Auto,height:360},this.resizeObserverBinded=!1,this.PQ=new At.x,this.wQ=new ci.X(this._J),this.TJ=30,this.xJ=()=>{const t=this.xS.clientHeight;if(this.kJ(t)&&this.currentQualitySettings.quality===z.ZH.Auto){const i={height:t,quality:z.ZH.Auto};this.setCurrentQualitySettings(i),this.wQ.next(i)}}}setCurrentQualitySettings(t){this._J.quality=t.quality,this._J.height!==t.height&&(this._J.height=t.height,this.PQ.next())}kJ(t){return!this._J.height||t/this._J.height*100-100>this.TJ}addResizeObserver(){this.resizeObserverBinded=!0,this.SJ.on(this.xS,this.xJ)}removeResizeObserver(){this.resizeObserverBinded=!1,this.SJ.off(this.xS,this.xJ)}setQuality(t){t.quality===z.ZH.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.xJ()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.wQ.next(this._J)}get currentQualitySettings(){return this._J}get onQualityChange(){return this.PQ.asObservable()}get onCurrentQuality(){return this.wQ.asObservable()}destroy(){this.removeResizeObserver()}}class ze extends Ve{constructor(t,i,e,s,n={},r,o){super(t,s),this.SJ=i,this.bl=e,this.OQ=r,this.us=o,this.eX=[],this.mF=null,this.CJ=10.13,this.handlerType=ke.MP4,this.isNativeVideoSrcImplementation=!0,this.EJ=this.MJ(n)}start(){try{this.LJ=new He(this.SJ,this.bl),this.MS(),this.setQuality(this.OQ)}catch(t){(0,S.nF)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:S.D_.CRITICAL,sessionId:this.us},{extraLogsPercentage:5})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.SQ(t),this.BJ(this.RJ(),i)}canUseSource(t){return(0,o.BZ)(t.getSources(this.OQ.quality,this.EJ))}setQuality(t){this.LJ.setQuality(t)}get currentQualitySettings(){return this.LJ.currentQualitySettings}attachMedia(){return new Promise((t=>{this.OJ(),t()}))}detachMedia(){this.en.removeAttribute("src"),this.BJ(null)}destroy(){this.LJ.destroy(),(0,Mt.i)(this.eX)}updateSubtitleTrackSource(t){this.CQ(t)}getSelectedCaptionTrack(){return this.MQ}recoverMedia(){return!1}MS(){const t=this.LJ.onCurrentQuality.subscribe((t=>this.wQ.next(t))),i=this.LJ.onQualityChange.subscribe((()=>this.DJ(this.LJ.currentQualitySettings.height)));this.eX.push(t,i)}DJ(t){this.BJ(this.RJ()),this.PQ.next(t)}NJ(t){this.TQ(t),this.en.load()}RJ(){return[...this.VJ(),...this.xQ()?[this.xQ()]:[]]}VJ(){if(!this.en||!this._Q)return[];const t=[];return this._Q.getSources(this.LJ.currentQualitySettings.height,this.EJ).forEach((i=>{if(i.src){const e=this.nr.createElement("source");e.src=i.src,e.type=i.type,t.push(e)}})),t}OJ(){this.mF&&(this.NJ(this.mF),this.mF=null)}BJ(t,i=!1){this.mF=t,i&&this.OJ()}MJ(t){let i;switch(t.os){case xi.M.Ios:i=[z.L5.Hevc,z.L5.H264];break;case xi.M.Mac:i=t.osVersion>this.CJ&&t.browser===_e.lI.Safari?[z.L5.Hevc,z.L5.H264]:[z.L5.H264];break;default:i=[z.L5.H264]}return i.map((t=>new qe(t)))}}var We=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class Ge extends kt.ai{constructor(t,i,e,s,n,r,o={},h,c,d){super(),this.mediator=t,this.Sl=i,this.nr=e,this.bl=s,this.SJ=n,this.uQ=r,this.dF=o,this.FJ=h,this.UJ=c,this.OQ=d,this.$J=!0,this.tX=!1,this.qJ=!1,this.HJ=!1,this.Fn=new At.x,this.Sq=.01,this.eX=[],this.GJ=t=>{var i;const e={[Ae.LevelSwitching]:z.T$.LevelSwitching,[Ae.LevelSwitched]:z.T$.LevelSwitched,[Ae.StreamEnded]:z.T$.EndOfStream,[Ae.FragBuffered]:z.T$.Buffered,[Ae.BufferingError]:z.T$.Buffering}[t.type];if((0,a.QM)(e))this.mediator.publish(this,e);else{if(t.type===Ae.UnexpectedError)return this.qJ=!0,void this.WJ();if(t.type===Ae.ManifestLoaded){const e=null===(i=t.payload)||void 0===i?void 0:i.qualityList;this.mediator.publish(this,z.XQ.Loaded,{payload:{qualityList:e,videoMeta:this.XJ}}),this.mQ.setMetaLoaded(!0)}}},this.QJ=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.playing&&this.mediator.publish(this,Ri.C[Ri.C.CaptionUpdate],{payload:t})},this.AQ=()=>{this.currentTrack&&(this.currentTrack.mode=this.JJ?ge.Hidden:ge.Disabled,this.currentTrack.oncuechange=this.QJ)},this.YJ(),this.KJ.appendChild(this.en),this.bl.appendChild(this.KJ),this.OQ=this.OQ||Ce,this.tY=new ze(e,this.SJ,this.bl,this.en,this.dF,this.OQ,this.Sl.config.sessionId),this.Sl.config.os.os===xi.M.Ios&&this.Sl.services.ViewabilityService.on(this.en,((t,i)=>{!i&&t||this.mQ.setUnfreeze()}),{threshold:this.Sq})}initHlsSourceHandler(t){const i=this.nr.isHttpsProtocolUsed()?xe.Https:xe.Http,e=(0,a.QM)(this.Sl.config.bundleID);this.Qn=new Ue(this.nr,this.en,t,i,this.OQ,e,this.Sl.services.UrlSuffixerService,this.Sl.config.sessionId,this.Sl.config.browser.browserType===_e.lI.Safari)}blurVideoTag(){this.en.blur()}eY(){return We(this,void 0,void 0,(function*(){if(this.Qn)return!0;const t=yield(0,je.zJ)(this.nr.global,this.Sl.config.sessionId);return(0,je.fh)()||(0,je.vY)(this.en)?(this.initHlsSourceHandler(t),this.sY(),this.nY(),!0):(this.$J=!1,(0,S.nF)({message:"Hls_not_supported",level:S.D_.INFO,sessionId:this.Sl.config.sessionId},{extraLogsPercentage:5}),!1)}))}get onVideoEvents(){return this.Fn.asObservable()}start(){try{this.mQ=new ye(this.en,this.uQ,{isInApp:this.Sl.config.isInApp,os:this.Sl.config.os.os,sessionId:this.Sl.config.sessionId}),this.du=this.volume,this.rY(),this.sY(),this.oY()}catch(t){(0,S.nF)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:S.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{extraLogsPercentage:5})}}WJ(){if(this.hY=this.currentTime,!this.tY.canUseSource(this.XJ))return(0,S.nF)({message:"VideoHandler_no_mp4_fallback_source",level:S.D_.CRITICAL,sessionId:this.Sl.config.sessionId}),void this.Fn.next(z.wB.Error);this.setSource(this.XJ,!0,!0),this.aY.attachMedia().then((()=>{this.cY()})).catch((t=>{this.qJ=!1,this.Fn.next(z.wB.Error),(0,S.nF)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:S.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{extraLogsPercentage:5})}))}nY(){this.eX.push(this.Qn.onHlsEvent.subscribe((t=>this.GJ(t))))}rY(){this.dY(this.tY)}sY(){this.Qn&&this.dY(this.Qn)}dY(t){t.start(),this.lY(t)}oY(){this.mQ.videoEvents.subscribe((t=>{var i,e,s;const n=(null===(i=this.aY)||void 0===i?void 0:i.handlerType)===ke.HLS;if(t.payload&&t.payload.isCorruptedCurrentTime)n&&this.WJ();else{if(t.type===z.wB.Timeupdate&&(this.rQ=this.currentTime),t.type===z.wB.Canplay&&this.UJ&&(this.currentTime=this.UJ,this.UJ=null),this.qJ&&(this.qJ=!1,t.type===z.wB.Playing&&(this.mQ.currentTime=this.hY)),t.type===z.wB.Error){if(n&&(0,a.$K)(t.payload.errorCode)){return this.aY.recoverMedia()?void(this.playing&&this.play()):((0,S.nF)({message:"VideoHandler_unrecoverable_media",exception:t.payload.errorMessage,level:S.D_.WARN,sessionId:this.Sl.config.sessionId},{extraLogsPercentage:100}),void this.mediator.publish(this,z.T$.PlayError,{payload:null===(e=t.payload)||void 0===e?void 0:e.errorMessage}))}return(0,S.nF)({message:"VideoHandler_play_error_event",exception:t.payload.errorMessage,level:S.D_.WARN,sessionId:this.Sl.config.sessionId},{extraLogsPercentage:5}),this.Fn.next(t.type),void this.mediator.publish(this,z.T$.PlayError,{payload:null===(s=t.payload)||void 0===s?void 0:s.errorMessage})}this.Fn.next(t.type),this.mediator.publish(this,t.type,{payload:t.payload})}}))}lY(t){this.eX.push(t.onTrackLoaded.subscribe((()=>this.AQ())),t.onQualityChange.subscribe((t=>this.onQualityChanged(t))),t.onCurrentQuality.subscribe((t=>{this.mediator.publish(this,z.XQ.CurrentQuality,{payload:t})})))}uY(t,i){this.pY=new Se({isInApp:this.Sl.config.isInApp,os:this.Sl.config.os.os,sessionId:this.Sl.config.sessionId},this.KJ,i,this.nr),this.pY.start(t.separateAudioStreamPath)}fY(t,i=!1){return We(this,void 0,void 0,(function*(){if(i)this.mY();else{if(t){if(yield this.eY())return void(this.aY=this.Qn)}this.mY()}}))}get width(){return this.KJ.getBoundingClientRect().width}get height(){return this.KJ.getBoundingClientRect().height}get currentTime(){return this.mQ.currentTime}set currentTime(t){this.mQ.currentTime=t,this.HJ&&(this.pY.currentTime=t)}forceCurrentTime(t){this.mQ.currentTime=t,this.HJ&&(this.pY.currentTime=t),this.UJ=t}get duration(){return this.mQ.duration}get volume(){return this.HJ?this.pY.volume:this.mQ.volume}set volume(t){this.HJ?(0===this.pY.volume&&0!==t&&(this.pY.currentTime=this.mQ.currentTime),this.pY.volume=t):(0,a.$K)(this.mQ)&&(this.mQ.volume=t)}toggleMute(){if(0===this.volume)return this.du=this.du>0?this.du:.2,void(this.volume=this.du);this.du=this.volume,this.volume=0}increaseVolume(t){this.volume+t>1?this.volume=1:this.volume+=t}decreaseVolume(t){this.volume-t<0?this.volume=0:this.volume-=t}get playing(){return this.mQ.isPlaying}get isIosFullscreen(){return this.tX}set isIosFullscreen(t){this.tX=t,this.tX&&this.JJ?this.gY():this.yY()}get currentQualitySettings(){var t;return null===(t=this.aY)||void 0===t?void 0:t.currentQualitySettings}hide(){(0,I.cn)(this.KJ,_t.pT)}show(){(0,I.IV)(this.KJ,_t.pT)}setSource(t,i=!1,e=!1){return We(this,void 0,void 0,(function*(){try{this.XJ=t,this.aY&&this.aY.detachMedia();const s=(0,a.QM)(t.hlsFilePath);if(e&&!this.tY.canUseSource(t))return(0,S.nF)({message:"VideoHandler_no_mp4_fallback_source",level:S.D_.CRITICAL,sessionId:this.Sl.config.sessionId}),void this.Fn.next(z.wB.Error);if(yield this.fY(s,e),t.hasSeparateAudioStream){this.HJ=!0;const i=this.mQ.volume;this.mQ.volume=0,this.pY?(this.pY.volume=i,t.separateAudioStreamPath!==this.pY.audioFile&&(this.pY.audioFile=t.separateAudioStreamPath)):this.uY(t,i)}else this.HJ&&(this.HJ=!1,this.mQ.volume=this.pY.volume,this.pY.volume=0);return t&&t.subtitles&&this.mQ.setCrossOriginAttribute(),this.en.setAttribute("title",t.altText),this.mQ.setPoster(t),this.mQ.setTrackModes(this.JJ?ge.Hidden:ge.Disabled),i&&this.mQ.setMetaLoaded(!1),this.aY.setSource(t,!0),void this.mediator.publish(this,z.T$.NewVideo,{payload:{videoMetadata:t}})}catch(t){return void(0,S.nF)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:S.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{extraLogsPercentage:5})}}))}setQuality(t){this.aY.setQuality(t)}pauseAudio(){var t;this.HJ&&(null===(t=this.pY)||void 0===t||t.pause())}pause(){this.mQ.pause(),this.HJ&&this.pY.pause(),this.Fn.next(z.wB.Pause)}play(){var t;return this.bY=new Te.C,null===(t=this.aY)||void 0===t||t.attachMedia().then((()=>{this.cY()})).catch((t=>{this.Fn.next(z.wB.Error),(0,S.nF)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:S.D_.CRITICAL,sessionId:this.Sl.config.sessionId},{extraLogsPercentage:5})})),this.bY.promise}hasSubtitles(){return(0,o.BZ)(this.XJ.subtitles)}getSubtitles(){return this.XJ.subtitles}toggleCaptions(){this.aY.updateSubtitleTrackSource(this.XJ.getDefaultSubtitle()),this.JJ=!0,this.mQ.setTrackModes(ge.Hidden)}togglePlay(){return this.playing?(this.pause(),!1):(this.play(),!0)}showCaptions(t){var i;void 0===t&&(t=null===(i=this.XJ.getDefaultSubtitle())||void 0===i?void 0:i.file);const e=this.XJ.subtitles.find((i=>i.file===t));this.aY.updateSubtitleTrackSource(e),this.JJ=!0,this.mQ.setTrackModes(ge.Hidden)}hideCaptions(){this.aY.updateSubtitleTrackSource(),this.JJ=!1,this.mQ.setTrackModes(ge.Disabled),this.mediator.publish(this,Ri.C[Ri.C.CaptionUpdate])}get areCaptionsEnabled(){return this.JJ}getSelectedCaption(){return this.aY.getSelectedCaptionTrack()}destroy(){var t;this.aY.destroy(),this.KJ.parentNode.removeChild(this.KJ),null===(t=this.pY)||void 0===t||t.destroy(),this.mQ.destroy()}YJ(){if(this.KJ=this.nr.createElementByString(`<cnx class="${_t.s6.VideoWrapper}"></cnx>`),this.en=this.nr.createElementByString('<video class="cnx-video-tag"></video>'),this.dF.os===xi.M.Ios&&(this.en.setAttribute("playsinline",""),this.en.setAttribute("webkit-playsinline","")),this.Sl.config.isMobile)f.n.defaultVideoPosterURL=Ie.Q.getDefaultPoster(this.Sl.services.UrlSuffixerService),this.en.poster=f.n.defaultVideoPosterURL;else{this.FJ&&(this.en.tabIndex=0,this.en.setAttribute("aria-label","Connatix video player"),this.en.setAttribute("role","application"));const t=this.Sl.services.GlobalDomUtilsService.createElementByString("<cnx class='cnx-border'></cnx>");this.KJ.appendChild(t)}if(this.dF.os===xi.M.Android&&((0,a.QM)(this.Sl.config.bundleID)||(0,P.Qq)())){const t=this.nr.createElementByString('<cnx class="cnx_gpu_fix"></cnx>');this.KJ.appendChild(t)}}mY(){this.aY=this.tY,this.aY.setQuality({quality:z.ZH.Auto,height:0})}onQualityChanged(t){const i=this.mQ.isPlaying;this.aY&&this.aY.isNativeVideoSrcImplementation&&(this.UJ=this.rQ),i&&this.aY.onQualityChanged&&this.aY.onQualityChanged().then((()=>{this.mQ.setMetaLoaded(!1),this.cY()})),this.mediator.publish(this,z.XQ.Change,{payload:t})}get currentTrack(){return this.mQ.getCurrentTrack()}gY(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,Ri.C[Ri.C.CaptionUpdate]),this.currentTrack.mode=ge.Showing)}yY(){if(this.currentTrack){switch(this.currentTrack.mode){case ge.Showing:case ge.Hidden:this.JJ=!0;break;case ge.Disabled:this.JJ=!1}this.mediator.publish(this,this.JJ?Ri.C[Ri.C.CaptionOn]:Ri.C[Ri.C.CaptionOff])}this.AQ()}cY(){this.mQ.play().then((()=>{if(this.HJ)return this.pY.play().then((()=>{this.pY.currentTime=this.mQ.currentTime}))})).catch((()=>{}))}}class Xe{constructor(t,i,e,s,n,r,a){var h;if(this.rh=t,this.he=e,this.XV=s,this.eV=n,this.LF=r,this.tV=a,this.BF=[],this.lF=[],this.RF=[],this.OF=[],this.DF={insights:[]},this.tF=[],this.uF=[],this.pF=i.title,this.iF=i.altText,this.fF=i.description,this.wn=i.clickUrl,this.BF=i.keywordList,this.NF=i.languageId,this.lF=i.trackList,this.VF=i.cuePoints,this.FF=i.multimediaId,this.jF=i.publishDate,this.UF=i.endDate,this.$F=i.contentStudio,this.lF&&this.lF.length>0){this.lF.forEach((t=>{t.file=this.he.appendParamsToUrl(this.HF(f.n.endPoints.base.video,t.file))}));const t=this.lF.findIndex((t=>t.title.indexOf("English")>-1));if(t>-1){const i=this.lF.splice(t,1);this.lF.unshift(...i)}}this.sF=i.thumbnail,this.zF=i.duration,this.OF=i.customFields,this.eF=i.hlsFilePath,this.WF=i.sourceItemId,this.DF.insights=null===(h=this.LF)||void 0===h?void 0:h.insights,this.yF=i.hasSeparateAudioStream,this.gF=i.separateAudioStreamPath,(0,o.BZ)(i.renditionList)&&(this.RF=this.QF(i.renditionList),this.JF(i.renditionList)),this.uF=i.chapters,this.PF=i.ctaButton,this.YF=i.altTitle}QF(t){return t.sort(((t,i)=>t.height-i.height))}setAvailableQualities(t){this.tF=t}JF(t){(0,o.qy)("height",t).forEach(((t,i)=>{this.tF.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=z.gQ})}))}KF(t,i){return this.RF.find((e=>e.codec===t&&e.height===i))}HF(t,i,e=!1){let s=`${t}${this.rh}/`;return(0,a.QM)(this.tV)&&(s+=`${this.tV}/`),e&&(0,a.QM)(this.FF)&&(s+=`mmid-${this.FF}/`),s+=i,s}ZF(t,i){const e=(0,Oi.DE)(t,this.tF.map((t=>t.videoHeight)));return this.KF(i,e)}get hlsFilePath(){return this.eF}get separateAudioStreamPath(){return this.gF}get hasSeparateAudioStream(){return this.yF}getAvailableQualities(){return this.tF}getClosestSourceQuality(t){let i;const e=(0,Oi.DE)(t,this.tF.map((t=>t.videoHeight)));return this.tF.forEach((t=>{t.videoHeight===e&&(i=t)})),i}getSources(t,i){const e=[];return i.forEach((i=>{const s=this.ZF(t,i.id);(0,o.BZ)(e)||s&&e.push({src:this.he.appendParamsToUrl(this.HF(f.n.endPoints.base.video,s.file,true)),type:i.type})})),e}getHlsSource(){return this.HF(f.n.endPoints.base.video,this.eF,!0)}getThumbnailUrl(t,i){const e=this.HF(f.n.endPoints.base.image,this.sF);return Ie.Q.getSmartCroppedImageUrl(e,t,i,this.he)}getDefaultSubtitle(){const t=this.lF.find((t=>t.title.indexOf("English")>-1));return t||this.lF[0]}get title(){return this.pF}get altText(){return(0,a.$K)(this.iF)?this.iF:""}get description(){return this.fF}get clickUrl(){return this.wn}set clickUrl(t){this.wn=t}get keywords(){return this.BF}get languageId(){return this.NF}get sourceItemId(){return this.WF}get subtitles(){return(0,o.BZ)(this.lF)?this.lF:void 0}get spriteSheet(){return this.tj}get duration(){return this.zF}get id(){return this.rh}get customFields(){return this.OF}get insights(){return this.DF}get cuePoints(){return this.VF}get publishDate(){return this.jF}get endDate(){return this.UF}get contentStudio(){return this.$F}get sentimentAnalysis(){var t;return null===(t=this.LF)||void 0===t?void 0:t.sentimentAnalysis}get disableAdvertising(){return this.eV}get isExternalSource(){return!1}get multimediaId(){return this.FF}get revisionNumber(){return this.XV}get contentVersionId(){return this.tV}get chapters(){return this.uF.map((t=>Object.assign({},t)))}get ctaButton(){return this.PF}get altTitle(){return this.YF}}class Qe extends Xe{constructor(t,i){super(null,t,i,null,null),this.he=i}getSources(t,i){return i.map((({id:i,type:e})=>{const s=this.ZF(t,i);if(s)return{type:e,src:this.he.appendParamsToUrl(`${s.file}`)}})).filter((t=>t))}getThumbnailUrl(t,i){return Ie.Q.getSmartCroppedImageUrl(this.sF,t,i,this.he)}}class Je extends Pe{constructor(t,i,s,n=0,r={}){super(t,i,s.services.GlobalDomUtilsService,s.services.ResizeObserver,s.services.UrlSuffixerService),this.Sl=s,this.uQ=n,this.dF=r,this.G1=.1,this.type=e.ProtoMediaTypeEnum.Video,this.X1={[X.Landscape]:{renditionList:[],videoSourceMeta:void 0},[X.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.J1=null,this.getClosestSourceQuality=t=>(this.Y1||this.K1(),this.X1[this.Y1].videoSourceMeta.getClosestSourceQuality(t)),this.Z1(),this.t2()}Z1(){this.JV.videoRendition.renditions.forEach((({codec:t,height:i,width:e,videoUrl:s})=>{const n={codec:T.ProtoPlayspaceCodecEnum[t],height:i,file:s};i<e?this.X1[X.Landscape].renditionList.push(n):this.X1[X.Portrait].renditionList.push(n)}));const t=this.X1[X.Landscape].renditionList,i=this.X1[X.Portrait].renditionList;(0,o.BZ)(t)||(0,o.BZ)(i)?((0,o.BZ)(t)||(this.X1[X.Landscape].renditionList=i),(0,o.BZ)(i)||(this.X1[X.Portrait].renditionList=t)):(0,S.nF)({message:"SlideVideo_no_renditions",level:S.D_.CRITICAL,sessionId:this.Sl.config.sessionId})}t2(){Object.keys(this.X1).forEach((t=>{const i=this.X1[t];i.videoSourceMeta=new Qe({title:this.JV.title,altText:this.JV.altText,clickUrl:this.JV.clickUrl,renditionList:i.renditionList,thumbnail:this.JV.imageUrl,customFields:[],chapters:[]},this.he)}))}mK(t){this.PY=new Ge(this,this.Sl,this.nr,t,this.SJ,this.uQ,this.dF,!1,this.G1)}i2(){this.subscribe(z.XQ.Change,this.PY,(({payload:t})=>{const i=this.getClosestSourceQuality(t);this.mediator.publish(this,z.XQ.Change,{payload:i.videoHeight})}))}K1(){const{clientHeight:t,clientWidth:i}=this.d0;this.Y1=t<i?X.Landscape:X.Portrait}qY(t){let i;this.PY&&(t&&(i=this.PY.currentTime),this.PY.setSource(this.X1[this.Y1].videoSourceMeta,!0).then((()=>{t&&this.PY.forceCurrentTime(i),this.PY.playing&&this.e2()})))}gW(){return'<cnx class="cnx-ui-ps-video-container"></cnx>'}e2(){this.PY.play().catch((()=>{}))}play(){this.isLoaded&&this.e2()}pause(){this.isLoaded&&this.PY.pause()}reset(){this.BY&&(this.PY.currentTime=this.G1)}load(t){this.isLoaded||(t.appendChild(this.d0),this.isLoaded=!0,this.mK(this.d0),this.i2(),this.PY.start(),this.K1(),this.qY(),this.J1&&this.setQuality(this.J1),this.pause())}getAvailableQualities(){return this.X1[this.Y1].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this.PY.currentQualitySettings}get volume(){return this.isLoaded?this.PY.volume:this.uQ}set volume(t){this.isLoaded?this.PY.volume=t:this.uQ=t}setQuality(t){this.PY?this.PY.setQuality(t):this.J1=t}onSlideResizeCallback(){const t=this.Y1;this.nr.cancelRequestAnimationFrame(this.s2),this.s2=this.nr.requestAnimationFrameHelper((()=>{if(this.K1(),t!==this.Y1){const t=!0;this.qY(t)}}))}destroy(){super.destroy(),this.PY&&(this.PY.destroy(),this.unsubscribeAll(this.PY)),this.nr.cancelRequestAnimationFrame(this.s2)}}var Ye=h(2300);class Ke{constructor(t){this.n2=t}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.o2()}\n            </cnx>\n        </cnx>\n        `.trim()}o2(){return this.n2.disableCTARendering?"":`[[${Ye.r.CtaButton}]]`}}var Ze=h(2823),ts=h(4291);class is extends ts.d{enterState(){super.enterState();const t=this.da.getComponent(Ye.r.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.da.getComponent(Ye.r.CtaButton);i&&i.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class es extends is{enterState(){super.enterState()}exitState(){super.exitState()}}var ss=h(2246);class ns extends ss.ai{enterState(){super.enterState();const t=this.da.getComponent(Ye.r.PlayspaceProgressBar);t&&t.startProgress();const i=this.da.getComponent(Ye.r.CtaButton);i&&i.startProgress()}exitState(){super.exitState()}updateDuration(){const t=this.da.getComponent(Ye.r.PlayspaceProgressBar);t&&t.startProgress()}}class rs extends is{enterState(){super.enterState()}exitState(){super.exitState()}}class os extends is{enterState(){super.enterState()}exitState(){super.exitState()}}var as=h(1277),hs=h(9391),cs=h(1612);var ds=h(6019);class ls extends ds.Y{constructor(){super(...arguments),this.eventList=[Ri.C[Ri.C.Play]]}onClickHandler(){this.mediator.publish(this,Ri.C[Ri.C.Play])}}const us="cnx-cta-btn-timer-label",ps="cnx-svg-circle-stroke",fs="cnx-cta-btn-text",ms="cnx-cta-btn-content",gs="cnx-cta-align-with-content";class vs extends ds.Y{constructor(t,i,e,s,n,r,o){super(t,i,e,n.template,r),this.JE=s,this.a2=n,this.h2=o,this.eventList=[Y.CallToAction,le.Z[le.Z.Scroll]],this.c2=!1,this.d2=!1,this.l2=!1,this.yy=()=>{this.u2()},this.KT=()=>{const t=Math.round(this.ts.timeRemaining/ht.s_);this.f2(t.toString())},this.m2=this.Gr.querySelector(".cnx-ui-ps-cta")}startProgress(){this.c2=!0,this.ts&&(this.ts.start(),this.KT())}pauseProgress(){this.c2=!1,this.ts&&(this.ts.stop(),this.KT())}changeLabel(t){(0,a.QM)(t)&&(this.Bk.innerHTML=t.substring(0,16))}initComponent(){super.initComponent(),this.Bk=this.Gr.querySelector(`.${fs}`),this.g2=this.Gr.querySelector(`.${ms}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){if(!(0,o.BZ)(t))return;const i=t.find((({type:t})=>t===ae.CtaButton));if(!i||!i.metadata)return;const{url:e,label:s,duration:n,ctaAlignToContent:r,ctaAlignToFooter:h,title:c}=i.metadata;this.d2=h,this.v2(e,c),this.changeLabel(s);const d=(0,a.r)(n);this.I2(d),this.w2(d,n),this.S2(r),this.A2()}setFooterElement(t){this._2=t,this.A2()}handleCapabilities(t){this.onSlideTransitionStart(t)}hideComponent(){super.hideComponent(),this.T2()}S2(t){t?(0,I.cn)(this.m2,gs):(0,I.IV)(this.m2,gs)}onClickHandler(){const t={payload:null};(0,a.QM)(this.Hv)&&(t.payload=this.Hv),this.mediator.publish(this,Y.CallToAction,t)}A2(){this.l2||this._2&&this.d2&&(this.JE.on(this._2,this.yy),this.l2=!0)}u2(){if(!this._2)return void(0,I.aQ)(this.Gr,"bottom");const t=(this._2.clientHeight-this.Gr.clientHeight)/2*-1;(0,I.T7)(this.Gr,{bottom:`${t}px`})}I2(t){t?this.C2||this.E2():this.M2()}E2(){this.C2=this.ls.createElementByString(this.a2.getTimerTemplate()),(0,I.Vt)(this.g2,this.C2),this.L2(this.C2)}L2(t){this.R2=t.querySelector(`.${us}`),this.B2=t.querySelector(`.${ps}`)}M2(){(0,I.bX)(this.C2),this.C2=null,this.R2=null,this.B2=null}w2(t,i){t?(this.O2(),this.ts.reset(i*ht.s_),this.f2(i.toString()),this.c2&&this.ts.start(),this.D2(),(0,I.T7)(this.B2,{"animation-duration":`${i}s`})):this.T2()}O2(){if(this.ts)return;const t=E.h.getGlobalContainer().resolve(si.f);this.ts=new ni.B(t),this.N2=this.ts.onTimeUpdate.subscribe(this.KT)}T2(){this.ts&&(this.N2.unsubscribe(),this.ts.disable(),this.ts=null)}D2(){(0,I.L_)(this.B2,ps,ps,!0)}f2(t){this.R2&&(0,a.QM)(t)&&(this.R2.innerText=t)}v2(t,i){if(this.Hv=t,t&&(this.m2.title=i,!this.h2)){this.m2.href=t;const i=this.ls.isURLSameDomainToTop(t);this.m2.target=i?_e.bS.Top:_e.bS.Blank,this.m2.rel="nofollow"}}}const ys='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"/></g></svg>\n';class bs{get template(){return'\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"/></svg>\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"/></svg>\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        '.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${ys}\n                    ${ys}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${us}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}var Is=h(7263),Ps=h(9901);class ws extends Ps.N{constructor(){super(...arguments),this.F2=100,this.eventList=[le.Z[le.Z.Scroll]],this.isEndState=!1,this.vW=()=>{this.mediator.publish(this,Y.ProgressBarItemClicked,{payload:this.Gr})},this.V2=t=>{t.stopPropagation()}}j2(){const t=this.ls.getComputedTranslateX(this.Ox),i=this.Cx;return(0,Oi.dQ)(0,i,0,100,t)}U2(t){(0,I.T7)(this.Ox,{transition:`transform ${t}ms linear`})}q2(){(0,I.T7)(this.Ox,{transition:"none"})}startProgress(t){this.U2(t),this.Ox.style.left=null,this.setProgress(this.F2)}pauseProgress(){this.setProgress(this.j2()),this.q2()}forceEndState(){this.q2(),super.forceEndState(),this.Ox.style.left="0",this.Ox.style.transform=null,this.isEndState=!0}forceStartState(){this.q2(),super.forceStartState(),this.Ox.style.left=null,this.Ox.style.transform=null,this.isEndState=!1}initComponent(){super.initComponent();const t={click:this.vW,interactionstart:this.V2};this.oa.register(this.Gr,this,this.oa,t),this.MA&&(this.subscribe(le.Z[le.Z.Click],this.oa,(()=>{this.vW()})),this.relay(le.Z[le.Z.Scroll],this.oa,this,this.mediator))}destroy(){super.destroy()}onResize(t,i){this.setProgress(this.j2()),this.q2(),i&&(this.setProgress(this.F2),this.U2(t))}}class Ss extends Is.P{constructor(){super(...arguments),this.eventList=[Y.ProgressBarItemClicked,le.Z[le.Z.Scroll]],this.H2=[],this.z2=({payload:t})=>{const i=(0,I.oG)(t,this.Gr);this.mediator.publish(this,Y.ProgressBarItemClicked,{payload:i})}}W2(t){const i=this.H2[t];i.forceStartState(),i.startProgress(this.zF)}startProgress(){if((0,a.$K)(this.G2)){for(let t=0;t<this.H2.length;t++)t<this.G2?this.H2[t].forceEndState():(t!==this.G2||this.H2[t].isEndState)&&this.H2[t].forceStartState();this.H2[this.G2].startProgress(this.zF)}}pauseProgress(){this.H2[this.G2]&&this.H2[this.G2].pauseProgress()}resetProgress(){(0,a.$K)(this.G2)&&this.H2.forEach((t=>t.forceStartState()))}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let i=0;i<t;i++){const t=new ws(this,this.ls,this.oa,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-hitarea"></cnx></cnx>',this.MA);this.subscribe(Y.ProgressBarItemClicked,t,this.z2),this.relay(le.Z[le.Z.Scroll],t,this,this.mediator),this.H2.push(t),t.initComponent(),this.Gr.appendChild(t.getContainer())}}setDuration(t){this.zF=t}setCurrentIndex(t){t===this.G2&&this.W2(t),this.G2=t}initComponent(){}destroy(){super.destroy(),this.H2.forEach((t=>t.destroy()))}resizeProgressBar(t,i){this.H2.forEach(((e,s)=>{s<this.G2&&e.forceEndState(),s===this.G2&&e.onResize(t,i)}))}}var As=h(9479);var xs,_s=h(3409);!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(xs||(xs={}));var Ts=h(7405);class Cs extends Is.P{constructor(t,i,e,s,n,r,o,a){super(t,i,e,s,a),this.eventName=n,this.X2=r,this.BX=o,this.Q2=[],this.eventList=[Ri.C[Ri.C.RebindComponent],le.Z[le.Z.HoldStart],le.Z[le.Z.HoldEnd],Ri.C[Ri.C.ContextMenuOpen],Ri.C[Ri.C.ContextMenuClose]],this.J2=!1,this.Y2=10,this.K2=t=>{this.Z2.removeChild(t.target),this.Z2.style.width=`${this.Gr.clientWidth}px`},this.close=t=>{t&&(0,P.Of)(t.target,_t.s6.ContextController,this.Y2)||!1!==this.isOpen&&(this.J2&&(this.mediator.publish(this,le.Z[le.Z.HoldEnd]),(0,I.IV)(this.BX,_t.Gj.OnHold),this.J2=!1),this.isOpen=!1,this.mediator.publish(this,Ri.C[Ri.C.ContextMenuClose],{payload:this.t3}),(0,I.cn)(this.Gr,_t.Gj.Invisible),this.oa.removeGlobalActions(this.Gr),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.Z2=this.Gr.getElementsByClassName(_t.Ng.Container)[0],this.i3=this.ls.createElementByString(`<cnx class="${_t.Ng.Items}" role="group"></cnx>`),this.Z2.appendChild(this.i3),(0,I.cn)(this.Z2,_t.s6.ContextController)}addNewItemsEvent(t){const i=t.filter((t=>!(0,o.d3)(t,this.eventList)));i.length>0&&(this.eventList=[...this.eventList,...i],this.mediator.publish(this,Ri.C[Ri.C.RebindComponent],{payload:this.X2}))}cacheCoordinates(){this.hC=this.ls.getElementCoordinates(this.BX)}positionContextMenu(t){this.cacheCoordinates(),(0,Ts.p)(this.Gr,t,this.hC,{alignMiddle:this.e3,alignTop:this.s3,forceRight:this.n3})}r3(t){switch(t.type){case xs.SimpleMenuItem:this.close();break;case xs.SubmenuMenuItem:this.o3(t)}}a3(t,i){this.mediator.publish(this,t,i)}o3(t){const i=this.Gr.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.K2),this.i3.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.K2),this.Z2.style.width=2*i+"px",this.Z2.appendChild(t.$menuContainer),(0,I.Tp)(this.Z2),this.i3.style.left=-i+"px",t.$menuContainer.style.left=-i+"px",this.iS()),t.isOpen=!t.isOpen}iS(){const t=new Event("cnx-menu-opened");this.BX.dispatchEvent(t)}closeAllSubmenuItems(){this.Q2.forEach((t=>{t.type===xs.SubmenuMenuItem&&t.isOpen&&this.o3(t)}))}buildContextMenu(t){let i=[];this.i3.innerHTML="",this.Gr.clientWidth>0&&(this.Z2.style.width=`${this.Gr.clientWidth}px`),this.Q2.forEach((t=>this.unsubscribeAll(t))),this.Q2=t,this.Q2.forEach((t=>{i=[...i,...t.eventList],t.eventList.forEach((i=>this.subscribe(i,t,(e=>{this.r3(t),this.a3(i,e)})))),t.isInitialized||t.initComponent(),this.i3.appendChild(t.getContainer())})),this.addNewItemsEvent(i)}getAnchorCoordinatesTo(t){return null==t?void 0:t.getCoordinates()}open(t,i=!1,e){this.t3=e,i&&(this.J2=i,this.mediator.publish(this,le.Z[le.Z.HoldStart]),(0,I.cn)(this.BX,_t.Gj.OnHold)),this.isOpen=!0,this.mediator.publish(this,Ri.C[Ri.C.ContextMenuOpen],{payload:e}),this.positionContextMenu(t);const s={interactionend:this.close};this.oa.addGlobalActions(this.Gr,s),(0,I.IV)(this.Gr,_t.Gj.Invisible),this.iS()}get $menuContainer(){return this.Z2}}class ks extends ds.Y{static getTemplate(t){const i=`<cnx class="${_t.Ng.ItemIcon}">${t.icon}</cnx>`,e=`<cnx class="${_t.Ng.ItemExtra}">${t.label}</cnx>`;return`<cnx tabindex="0" role="${t.isTitleOption?"presentation":"button"}" aria-label="${t.name}" class="${_t.Ng.ClickOption} ${t.isTitleOption?"cnx-submenu-title-option":""}">\n                    ${t.icon?i:""}\n                    <cnx class="${_t.Ng.ItemTitle}">${t.name}</cnx>\n                    ${t.label?e:""}\n                </cnx>`}constructor(t,i,e,s,n){super(t,i,e,ks.getTemplate(n),s),this.AW=!1,this.type=xs.SimpleMenuItem,this.eventList=[],this.event=n.activeEvent,this.name=n.name,n.eventList?this.eventList=n.eventList:this.eventList.push(this.event),this.h3=this.Gr.getElementsByClassName(_t.Ng.ItemTitle)[0],this.c3=this.Gr.getElementsByClassName(_t.Ng.ItemIcon)[0]}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.h3.innerHTML=t}changeItemIcon(t){this.c3.innerHTML=t}get isActive(){return this.AW}set isActive(t){this.AW=t,this.AW?((0,I.cn)(this.Gr,_t.Gj.Active,_t.iu.AccentColor),this.Gr.setAttribute("aria-current","true")):((0,I.IV)(this.Gr,_t.Gj.Active,_t.iu.AccentColor),this.Gr.removeAttribute("aria-current"))}}const Es='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"/></svg>\n';var Ms;!function(t){t.MainContainer="cnx-scrollbar",t.Wrapper="cnx-scrollbar-wrapper",t.Content="cnx-scrollbar-content",t.Horizontal="cnx-scrollbar-horizontal",t.Handle="cnx-scrollbar-handle",t.PreventSelect="cnx-scrollbar-prevent-select",t.ShowOnHover="cnx-scrollbar-show-on-hover"}(Ms||(Ms={}));class Ls{constructor(t,i={}){if(this.jA=t,this.Tr=i,this.UA=0,this.$A=t=>{t.preventDefault(),this.qA=t.pageY,this.HA=t.pageX,(0,I.cn)(this.zA,Ms.PreventSelect),(0,I.cn)(this.Th.document.body,Ms.PreventSelect),this.Th.document.addEventListener("mousemove",this.GA),this.Th.document.addEventListener("mouseup",this.WA)},this.GA=t=>{const i=this.Tr.horizontal?t.pageX-this.HA:t.pageY-this.qA;this.qA=t.pageY,this.HA=t.pageX,(0,I.PM)(this.Th,(()=>{this.Tr.horizontal?this.QA.scrollLeft+=i/this.JA:this.QA.scrollTop+=i/this.JA}))},this.WA=t=>{(0,I.IV)(this.zA,Ms.PreventSelect),(0,I.IV)(this.Th.document.body,Ms.PreventSelect),this.Th.document.removeEventListener("mousemove",this.GA),this.Th.document.removeEventListener("mouseup",this.WA)},this.YA=t=>{if(!this.Tr.horizontal)return;const i=t.deltaMode?100*(t.deltaY<0?-1:1):t.deltaY,e=Math.floor(i)/33*20,s=this.UA+e;s>=-1*this.zA.clientWidth&&s<=this.QA.scrollWidth-this.zA.clientWidth&&(this.UA=s),(0,I.PM)(this.Th,(()=>this.QA.scrollLeft=this.UA))},this.KA=()=>{clearTimeout(this.ZA),this.ZA=setTimeout((()=>{this.tS()}),50)},this.tS=()=>{const t=this.Tr.horizontal?this.QA.scrollWidth:this.QA.scrollHeight,i=this.Tr.horizontal?this.jA.clientWidth:this.jA.clientHeight;this.JA=i/t;const e=-1*(this.jA.clientWidth-(this.zA.clientWidth||4)-4),s=this.jA.clientHeight-this.zA.clientHeight-4;(0,I.PM)(this.Th,(()=>{if(this.JA>=1)(0,I.MV)(this.zA);else{if((0,I.Ho)(this.zA),this.Tr.horizontal)return void(0,I.T7)(this.zA,{width:`${Math.max(100*this.JA,10)}%`,height:"",top:`${s}px`,right:"",left:this.QA.scrollLeft/t*100+"%"});(0,I.T7)(this.zA,{width:"",height:`${Math.max(100*this.JA,10)}%`,top:this.QA.scrollTop/t*100+"%",right:`${e}px`,left:""}),this.iS()}}))},this.Th=(0,I.LT)(t),!this.Th)throw new Error("window was not found");this.eS(),this.zA.addEventListener("mousedown",this.$A),this.Tr.overrideNativeHorizontalScroll&&this.QA.addEventListener("wheel",this.YA,{passive:!0}),this.Th.addEventListener("resize",this.KA),this.QA.addEventListener("scroll",this.tS),this.QA.addEventListener("mouseenter",this.tS),(0,I.cn)(this.jA,Ms.MainContainer,this.Tr.horizontal?Ms.Horizontal:void 0,this.Tr.showOnHover?Ms.ShowOnHover:void 0),this.tS();const e=(0,I.Dx)(this.jA,this.Th);"0px"===e.height&&"0px"!==e.maxHeight&&(0,I.T7)(this.jA,{height:e.maxHeight})}eS(){for(this.zA=(0,I.G$)(`<cnx class="${Ms.Handle}">`,this.Th),this.sS=(0,I.G$)(`<cnx class="${Ms.Wrapper}">`,this.Th),this.QA=(0,I.G$)(`<cnx class="${Ms.Content}">`,this.Th),this.sS.appendChild(this.QA);this.jA.firstChild;)this.QA.appendChild(this.jA.firstChild);this.jA.appendChild(this.sS),this.jA.insertAdjacentElement("beforeend",this.zA)}iS(){const t=new Event("cnx-mod-scrollbar");this.jA.dispatchEvent(t)}destroy(){for(this.removeListeners(),(0,I.bX)(this.zA);this.QA.firstChild;)this.jA.appendChild(this.QA.firstChild);(0,I.bX)(this.sS),(0,I.IV)(this.jA,Ms.MainContainer,Ms.Horizontal,Ms.ShowOnHover)}removeListeners(){this.Th.document.removeEventListener("mousemove",this.GA),this.Th.document.removeEventListener("mouseup",this.WA),this.zA.removeEventListener("mousedown",this.$A),this.QA.removeEventListener("wheel",this.YA),this.Th.removeEventListener("resize",this.KA),this.QA.removeEventListener("scroll",this.tS),this.QA.removeEventListener("mouseenter",this.tS)}}class Rs extends ds.Y{static getTemplate(t){const i=`<cnx class="${_t.Ng.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${_t.Ng.SubmenuOption} ${_t.Ng.ClickOption}" tabindex="0" role="button" aria-label="${t.name}" aria-controls=cnx-submenu-${t.event}>\n                    ${t.icon?i:""}\n                    <cnx class="${_t.Ng.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${_t.Ng.ItemExtra} ${_t.iu.AccentColor}">${t.label?t.label:""}${Es}</cnx>\n                </cnx>`}constructor(t,i,e,s,n,r,o){super(t,i,e,Rs.getTemplate(n),s),this.ST=r,this.l3=o,this.Q2=[],this.AW=!1,this.type=xs.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.u3=n.event,this.eventList.push(this.u3),this.m3=new ks(this,i,e,s,{activeEvent:n.event,name:n.name.toUpperCase(),icon:"",isTitleOption:!0}),this.$menuContainer=this.ls.createElementByString(`<cnx class="${_t.Ng.Items}" role="group" data-id=cnx-submenu-${n.event} ></cnx>`),this.g2=this.Gr.getElementsByClassName(_t.Ng.ItemExtra)[0]}onClickHandler(t){this.mediator.publish(this,this.u3)}r3(t){this.mediator.publish(this,this.u3,{payload:t===this.u3?void 0:t})}buildContextMenu(t){this.$menuContainer.innerHTML="",this.Q2.forEach((t=>this.unsubscribeAll(t))),this.Q2=[this.m3,...t],this.Q2.forEach((t=>{t.eventList.forEach((i=>this.subscribe(i,t,(()=>this.r3(i))))),t.isInitialized||t.initComponent(),this.$menuContainer.appendChild(t.getContainer())}))}changeLabel(t){this.g2.innerHTML=`${t}${Es}`}get isActive(){return this.AW}set isActive(t){this.AW=t,this.AW?(0,I.cn)(this.Gr,_t.Gj.Active):(0,I.IV)(this.Gr,_t.Gj.Active)}makeFullHeight(t){if(!this.ST||!this.l3)return;const i=this.ST.clientHeight,e=this.l3.offsetTop;if(t.clientHeight>=i-e&&t.clientHeight<=i)this.l3.style.top="1px";else if(t.clientHeight>i-e){if(this.l3.style.top="1px",(0,I.T7)(t,{height:`${i}px`,bottom:"10px"}),this.LW)return;this.LW=new Ls(t,{horizontal:!1}),(0,I.cn)(t,_t.Gj.HasCustomScrollbar)}}resetScrollbar(){var t;null===(t=this.LW)||void 0===t||t.removeListeners(),this.LW=null}}function Bs(t,i,e){const s=e?z.ZH[z.ZH.Auto]:i.height.toString();t.forEach((t=>t.name.includes(s)?t.isActive=!0:t.isActive=!1));const n=t.find((t=>z.ZH[t.event]===z.ZH.Auto));if(e){const e=t.find((t=>t.event===i.height.toString()));if(e){const t=`${n.name} (${e.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class Os extends Rs{constructor(t,i,e,s,n,r,o,a){super(t,i,e,s,{event:Ri.C[Ri.C.Quality],name:n,icon:'<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable" tabindex="0"\n    aria-label="Settings" role="button" aria-expanded="false" aria-haspopup="true" aria-controls="cnx-quality-menu">\n    <cnx class="cnx-btn-container">\n        <cnx class="cnx-settings-icon">\n        <svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg>\n\n        </cnx>\n        <cnx class="cnx-hd-flag">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 11"><g fill="none"><rect class="cnx-color-accent" width="17" height="11" rx="2" fill="#09F"/><path class="cnx-color-icon" d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg>\n\n        </cnx>\n    </cnx>\n</cnx>',options:[]},o,a),this.mediator=t,this.resizeObserver=r,this.g3={height:360,quality:z.ZH.Auto},this.v3=!0}r3(t){if(t===Ri.C[Ri.C.Quality])return;this.v3=t===z.ZH[z.ZH.Auto];const i={height:this.v3?this.g3.height:parseInt(t,10),quality:this.v3?z.ZH.Auto:z.ZH.Strict};this.mediator.publish(this,this.u3,{payload:i})}y3(){let t=null;if(this.v3)t=z.ZH[z.ZH.Auto];else{const i=this.b3.find((t=>t.event===this.g3.height.toString()));i&&(t=i.name)}t&&this.changeLabel(t),this.resizeObserver&&(this.resizeObserver.off(this.$menuContainer,(t=>this.I3(t))),this.resizeObserver.on(this.$menuContainer,(t=>this.I3(t))))}updateQuality(t,i=!1){(0,o.BZ)(this.tF)&&(this.v3=t.quality===z.ZH.Auto,this.g3.quality=t.quality,this.g3.height=(0,Oi.DE)(t.height,this.tF.map((t=>t.videoHeight))),this.y3(),Bs(this.b3,this.g3,this.v3),this.isActive=i)}updateAvailableQualities(t){this.b3=[],this.tF=t,this.b3=this.tF.map((t=>new ks(this,this.ls,this.oa,this.MA,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))),this.b3.push(new ks(this,this.ls,this.oa,this.MA,{name:z.ZH[z.ZH.Auto],activeEvent:z.ZH[z.ZH.Auto]})),this.y3(),Bs(this.b3,this.g3,this.v3),this.buildContextMenu(this.b3)}I3(t){this.makeFullHeight(t)}}const Ds="About Connatix",Ns="Video Settings",Fs="Full Screen";class $s extends Cs{constructor(){super(...arguments),this.e3=!1,this.s3=!1,this.n3=!1}initComponent(){this.w3=new ks(this,this.ls,this.oa,this.MA,{activeEvent:Ri.C[Ri.C.Expand],eventList:[Ri.C[Ri.C.Expand],Ri.C[Ri.C.Collapse]],icon:_s,name:Fs}),this.S3=new Os(this,this.ls,this.oa,this.MA,Ns),this.S3.getContainer().classList.add("cnx-hide-pinned"),this.buildContextMenu([this.S3,this.w3,new ks(this,this.ls,this.oa,this.MA,{activeEvent:Ri.C[Ri.C.AboutClick],name:Ds,icon:'<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"/><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"/></svg>\n',label:x.g.version?`V${x.g.version}`:"dev"})])}setExpand(){this.w3.event=Ri.C[Ri.C.Collapse],this.w3.changeItemIcon(As)}setCollapse(){this.w3.event=Ri.C[Ri.C.Expand],this.w3.changeItemIcon(_s)}showExpandButton(){this.w3.showComponent()}hideExpandButton(){this.w3.hideComponent()}updateQualityMenu(t){(0,o.BZ)(t)?(this.S3.updateAvailableQualities(t),this.S3.showComponent()):this.S3.hideComponent()}updateQuality(t,i=!1){this.S3.updateQuality(t,i)}}class Vs{constructor(t,i=0,e=true){if(this.A3=t,this.x3=e,!(0,o.BZ)(this.A3))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(i)}setCurrentItem(t){this._3=this.A3[t]}get currentItem(){return this._3}goToNextItem(){this.T3().nextIndex===this.T3().firstIndex&&this.x3?this.setCurrentItem(this.T3().firstIndex):this.setCurrentItem(this.T3().nextIndex)}get listLength(){return this.A3.length}get previousItem(){return this.A3[this.T3().prevIndex]}get currentItemIndex(){return this.T3().currentIndex}T3(t=this.A3.indexOf(this._3)){return(0,ki.QX)(this.A3,t)}}var js,Us,qs;!function(t){t.Wrapper="cnx-ui-ps__wrapper",t.Container="cnx-ui-ps__container",t.Placeholder="cnx-ui-ps__placeholder",t.Text="cnx-ui__span--text",t.Label="cnx-ui__span--label",t.Title="cnx-ui__span--title",t.VerticalLine="cnx-ui-ps__vertical-line",t.Instagram="cnx-ui-ps__slide--instagram",t.Cover="cnx-ui-ps__slide--cover",t.HighlightInner="cnx-top-title-highlight-text-inner-container",t.HighlightText="cnx-ui-ps-highlight-text"}(js||(js={})),function(t){t.Default="cnx-ui-ps__sliding--default",t.Basic="cnx-ui-ps__sliding--basic",t.Cover="cnx-ui-ps__sliding--cover",t.Pinned="cnx-ui-ps__sliding--pinned",t.SlideIn="cnx-title-slide-in",t.SlideOut="cnx-title-slide-out"}(Us||(Us={})),function(t){t.Cover="cnx-ui-ps__title--cover",t.Quote="cnx-ui-ps__title--quote",t.Bullet="cnx-ui-ps__title--bullet",t.Default="cnx-ui-ps__title--default",t.Description="cnx-ui-ps__title--description",t.Instagram="cnx-ui-ps__title--instagram",t.Pinned="cnx-ui-ps__title--pinned"}(qs||(qs={}));const Hs="em";class zs{constructor(t){this.C3=t}getChunks(t){return(0,A.k0)(t)?this.M3(t):this.L3(t)}L3(t){const i=[];let e="";for(let s=0;s<t.length;s++)e+=t[s],this.R3(t[s])&&(i.push(e),e="");return e.length>0&&i.push(e),i}M3(t){try{const i=document.createElement("cnx");i.innerHTML=t;const e=[];return(0,o.Sz)(i.childNodes).forEach((t=>{t.outerHTML?e.push(t.outerHTML):e.push(...this.L3(t.nodeValue))})),e}catch(i){return(0,S.nF)({message:"TextChunker_splitHtmlStringIntoWords",exception:i.message,level:S.D_.INFO,callStack:i.stack},{throttle:1,shouldSendMaxLog:!1}),[t]}}R3(t){return this.C3.some((i=>i(t)))}}const Ws="cnx-aux",Gs="cnx-aux-container",Xs="cnx-ui-lines";class Qs{constructor(t){this.ls=t,this.B3=new zs([t=>/\s/.test(t)])}O3(t,i){const{maxLineWidth:e,maxLines:s,minLines:n}=i,r=[...t],o=[],h=t.map((t=>t.innerHTML)).some((t=>(0,A.Ft)(t)));if(!r.length||!(0,a.r)(e))return o;let c=0,d=-1,l=0;for(;r.length>0;){if(c=0,d++,o[d]=[],l++,l>=250){(0,S.nF)({message:"Split text base line wrap infinite loop",level:S.D_.INFO},{throttle:1,shouldSendMaxLog:!1});break}for(;r[0]&&c+r[0].width<=e;)if(c+=r[0].width,o[d].push(r.shift()),l++,l>=250){(0,S.nF)({message:"Split text base line wrap infinite loop",level:S.D_.INFO},{throttle:1,shouldSendMaxLog:!1});break}if(r[0]&&o.length>=s){o[d].push(...r);break}if(1===r.length&&r[0].width>e){o[d].push(...r);break}}return o.length<n&&o[0].length>4&&(o[1]=o[0].splice(-2,2)),!h&&o[d].length<2&&o.length>1&&o[d].unshift(o[d-1].pop()),o}D3(t){return t.map((t=>({innerHTML:t.nodeName.toLowerCase()===Ws?t.innerHTML:t.outerHTML,width:t.getBoundingClientRect().width,height:t.getBoundingClientRect().height})))}getWordsHtml(t){if(!(0,a.QM)(t))return"";return this.B3.getChunks(t.trim()).map((t=>`<${Ws}>${t.cnx_replaceAll("&#x2011;","-")}</${Ws}>`)).join("")}N3(t,i){const e=t.querySelectorAll(i),s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width;(0,o.Sz)(e).forEach((t=>{const i=(0,o.Sz)(t.querySelectorAll(Ws)),e=t.parentElement;if(!i.length||t.nodeType!==Node.ELEMENT_NODE)return;const n=this.ls.getComputedStyle(t),r=parseInt(this.ls.getComputedStyle(t,"before").getPropertyValue("width"),10),h=parseInt(n.getPropertyValue("--max-title-lines"),10),c=parseInt(n.getPropertyValue("--min-title-lines"),10),d=parseInt(n.getPropertyValue("font-size"),10),l={maxLineWidth:r||t.getBoundingClientRect().width-20,maxLines:h||15,minLines:c||1},u=this.D3(i),p=this.O3(u,l),f=this.ls.createElementByString(`<cnx class='${Xs}'></cnx>`);f.dataset.split=s.toString(),f.dataset.split+=","+d,p.forEach((i=>{const e=t.cloneNode();(0,I.IV)(e,Gs);const s=i.filter((t=>(0,a.as)(t))).map((t=>t.innerHTML));e.innerHTML+=s.join("").trim(),f.dataset.split+=","+i.length,(0,I.jG)(e,f)})),this.F3(f).lines!==this.F3(e).lines?t.classList.contains(Gs)?this.ls.requestAnimationFrameHelper((()=>{null!==e.parentNode&&(0,I.BE)(e,f),(0,I.bX)(e)})):this.ls.requestAnimationFrameHelper((()=>{null!==t.parentNode&&(0,I.BE)(t,f),(0,I.bX)(t)})):(0,I.bX)(t)}))}brakeLongLines(t,i){const e=t.querySelectorAll(i);if(!e.length)return;const s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width,n=this.F3(e[0].parentElement);if(isNaN(n.width))return void this.N3(t,i);if(n.width&&0===Math.abs(n.width-s))return;const r=t.querySelectorAll(`.${Xs}[data-split]`);(0,o.Sz)(r).forEach((t=>{const e=t.querySelectorAll(i),s=e[0].cloneNode(!1),n=(0,o.Sz)(e).map((t=>t.innerHTML)).join("");s.innerHTML=this.getWordsHtml(n),(0,I.cn)(s,Gs),t.prepend(s)})),this.N3(t,i)}F3(t){const i=t.dataset.split?t.dataset.split.split(","):[],e=i.shift();return{width:parseInt(e,10),lines:i.join("")}}}class Js extends ds.Y{get $templateFragment(){return this.V3}constructor(t,i,e,s,n,r){super(t,i,e,r.template,n),this.JE=s,this.j3=r,this.splitTextSelector=`.${js.Text}`,this.yy=()=>{this.ls.requestAnimationFrameHelper((()=>{this.U3.brakeLongLines(this.Gr,this.splitTextSelector)}))},this.V3=i.createDocumentFragment(),this.U3=new Qs(i)}q3(t,i){const e=this.j3.titleTemplate(t,i);return this.ls.createElementByString(e)}z3(t,i){const e=this.j3.labelTemplate(t,i);return this.ls.createElementByString(e)}W3(t,i){const e=this.j3.textTemplate(t,i);return this.ls.createElementByString(e)}G3(){const t=this.j3.placeholderTemplate();return this.ls.createElementByString(t)}u2(){}Q3(){this.resetAnimation(),(0,I.cn)(this.Gr,Us.SlideIn)}J3(){this.resetAnimation(),(0,I.cn)(this.Gr,Us.SlideOut)}onSlideTransitionStart(t){const i=t[0];this.Y3(i.metadata),this.resetAnimation(),this.render()}onSlideTransitionEnd(){this.Q3()}onSlideTimeUpdate(t,i){}resetAnimation(){const t=[Us.SlideIn,Us.SlideOut];(0,I.IV)(this.Gr,...t)}initComponent(t){super.initComponent(),this.K3=t,this.JE.on(this.K3,this.yy)}render(){(0,I.SH)(this.Gr,this.V3),(0,I.jG)(this.Gr,this.K3)}setFooterElement(t){return this._2=t,this.u2(),this._2}destroy(){this.JE.off(this.K3,this.yy),(0,I.bX)(this.Gr),this.Gr=this.ls.createElementByString(this.j3.template),this.unsubscribeAll(this.oa),this.oa.unregisterAll(this)}}class Ys extends Js{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ls=i,this.MA=n,this.j3=r,this.eventList=[],this.className=qs.Bullet}Z3(t){const i=t.map((t=>{if(!(0,a.QM)(t.title))return;const i=this.t5(t);return(0,I.jG)(i,this.$templateFragment),Object.assign(Object.assign({},t),{activated:!1,element:i,titleElement:i.firstChild,containerElement:i.querySelector(`.${js.Container}`)})}));this.i5=new Vs(i)}e5(t){const i=t.element.querySelector(`.${js.Container}`),e=i.querySelectorAll(`.${js.Text}`),s=(0,a.$K)(e)?e.length:0,n=(0,a.$K)(e[0])?e[0].clientHeight:0;(0,I.T7)(i,{"max-height":s*n+"px"}),t.activated=!0,(0,I.L_)(t.titleElement,_t.iu.PrimaryColor,_t.iu.SecondaryColor),(0,I.cn)(t.element,"active")}s5(t){const i=t.element.querySelector(`.${js.Container}`);(0,I.aQ)(i,"max-height"),(0,I.L_)(t.titleElement,_t.iu.SecondaryColor,_t.iu.PrimaryColor),(0,I.IV)(t.element,"active")}n5(t){const i=this.j3.labelTemplate(t);return this.ls.createElementByString(i)}t5(t){const i=this.n5(t.title),e=this.W3(this.U3.getWordsHtml(t.description)),s=this.G3();return(0,I.jG)([i,e],s),s}Y3(t){const{label:i,bulletChunkList:e}=t;(0,a.QM)(i)&&(0,I.jG)(this.q3(i),this.$templateFragment),(0,o.BZ)(e)&&this.Z3(e.slice(0,3))}onSlideTimeUpdate(t,i){const e=this.i5;e&&!e.currentItem.activated&&(0===e.currentItemIndex?t>=1e3&&(this.e5(e.currentItem),e.goToNextItem()):(i-1e3)/e.listLength*e.currentItemIndex+1e3<t&&(this.s5(e.previousItem),this.e5(e.currentItem),e.goToNextItem()))}}class Ks{get template(){return`<cnx class="${_t.iu.TitleComponent}"></cnx>`}titleTemplate(t,i){return`<cnx class="${js.Title} ${i}">${t}</cnx>`}labelTemplate(t,i){return`<cnx class="${js.Label} ${i} ">${t}</cnx>`}textTemplate(t,i){return`<cnx class="${js.Text} ${i}">${t}</cnx>`}containerTemplate(){return`<cnx class="${js.Container}"></cnx>`}placeholderTemplate(){return`<cnx class="${js.Placeholder}"></cnx>`}wrapeprTemplate(){return`<cnx class="${js.Wrapper}"></cnx>`}}class Zs extends Ks{get template(){return`<cnx class="${Us.Basic} ${_t.iu.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${js.Title} ${_t.iu.AccentColor}">${t}</cnx>`}labelTemplate(t){return`<cnx class="${js.Label} ${_t.iu.PrimaryColor}">\n            <cnx class="${js.VerticalLine} ${_t.iu.AccentColor}"></cnx>\n            ${t}\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${js.Container}">\n                    <cnx class="${js.Text}  ${_t.iu.SecondaryColor}">${t}</cnx>\n                </cnx>\n        `.trim()}}function tn(t,i){const e=(0,A.hF)(t);return(0,A.V7)((0,A.J5)(e),i)}class en extends Js{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ls=i,this.MA=n,this.j3=r,this.eventList=[],this.className=qs.Cover,this.splitTextSelector=`.${js.Text}, .${js.Title}`,this.yy=()=>{this.ls.requestAnimationFrameHelper((()=>{if(this.U3.brakeLongLines(this.Gr,this.splitTextSelector),this._2){const t=this._2.clientHeight/2*-1;(0,I.T7)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}}))}}Y3(t){let{coverChunk:{title:i,subtitle:e}}=t;const{label:s}=t;if((0,a.QM)(i)&&(i=tn(i,Hs),(0,I.jG)(this.q3(this.U3.getWordsHtml(i)),this.$templateFragment)),(0,a.QM)(e)&&(e=tn(e,Hs),(0,I.jG)(this.W3(this.U3.getWordsHtml(e)),this.$templateFragment)),(0,a.QM)(s)){if(this.labelElement=this.z3(s),this._2){const t=(this._2.clientHeight-this.Gr.clientHeight)/2*-1;(0,I.T7)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}(0,I.jG)(this.labelElement,this.$templateFragment)}}}class sn extends Ks{get template(){return`<cnx class="${Us.Cover} ${_t.iu.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${js.Placeholder}">\n            <cnx class="${js.Title} ${_t.iu.PrimaryColor}">${t}</cnx>\n        </cnx>`}textTemplate(t){return`<cnx class="${js.Placeholder}">\n            <cnx class="${js.Text} ${_t.iu.SecondaryColor}">${t}</cnx>\n        </cnx>`}labelTemplate(t){return`<cnx class="${js.Placeholder}">\n            <cnx class="${js.Label}">${t}</cnx>\n        </cnx>`}}class nn extends Js{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ls=i,this.MA=n,this.j3=r,this.className=qs.Default,this.r5=!0,this.eventList=[...this.eventList,Y.CallToAction]}Y3(t){const{url:i,label:e}=t;if(i?(this.Gr.setAttribute("title",i),(0,I.cn)(this.Gr,_t.iu.TitleLink)):(this.Gr.removeAttribute("title"),(0,I.IV)(this.Gr,_t.iu.TitleLink)),(0,a.QM)(e)){const t=this.U3.getWordsHtml(tn(e,Hs));(0,I.jG)(this.W3(t),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,Y.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.r5=!0}onSlideTimeUpdate(t,i){this.r5&&i-t<1200&&(this.J3(),this.r5=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.oa),this.oa.unregisterAll(this)}}class rn extends Ks{get template(){return`<cnx class="${Us.Default} ${_t.iu.TitleComponent}">\n            <cnx class="${js.VerticalLine} ${_t.iu.AccentColor}"></cnx>\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${_t.ed.InheritBodyFontFamily} ${js.Text} ${_t.iu.PrimaryColor} ${js.HighlightInner} ${js.HighlightText}">${t}</cnx>`.trim()}}const on={[T.ProtoPlayspaceColorSchemeEnum.Accent]:_t.iu.AccentColor,[T.ProtoPlayspaceColorSchemeEnum.Primary]:_t.iu.PrimaryColor,[T.ProtoPlayspaceColorSchemeEnum.Secondary]:_t.iu.SecondaryColor};class an extends Js{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ls=i,this.MA=n,this.j3=r,this.eventList=[],this.className=qs.Description}o5(t){return t/this.a5.listLength*(this.a5.currentItemIndex+1)}Z3(t){const i=t.map(((t,i)=>{const e=this.ZG(t);return(0,I.jG)(e,this.$templateFragment),0===i&&(0,I.cn)(e,"active"),Object.assign(Object.assign({},t),{shown:!1,element:e})}));this.a5=new Vs(i)}h5(t){return this.z3(t.text,on[t.colorScheme])}ZG(t){return this.W3(this.U3.getWordsHtml(tn(t.text,Hs)),on[t.colorScheme])}Y3(t){const{descriptionChunkList:i,label:e,labelColorScheme:s}=t,n={text:e,colorScheme:s};(0,a.QM)(n.text)&&(0,I.jG)(this.h5(n),this.$templateFragment),(0,o.BZ)(i)&&this.Z3(i)}c5(){this.a5.currentItem.shown=!0,(0,I.IV)(this.a5.currentItem.element,"active"),this.a5.goToNextItem(),this.ls.requestAnimationFrameHelper((()=>{this.resetAnimation(),this.ls.requestAnimationFrameHelper((()=>{(0,I.cn)(this.a5.currentItem.element,"active"),this.Q3()}))}))}onSlideTimeUpdate(t,i){t>=i||t>=this.o5(i)&&!this.a5.currentItem.shown&&this.c5()}}class hn extends Ks{get template(){return`<cnx class="${Us.Basic} ${_t.iu.TitleComponent}"></cnx>`}textTemplate(t,i){return`<cnx class="${js.Placeholder}">\n            <cnx class="${js.Text} ${i}">${t}</cnx>\n        </cnx>`}}class cn extends Js{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ls=i,this.MA=n,this.j3=r,this.eventList=[],this.className=qs.Instagram}Y3(t){const{instagramMetadata:{createdDate:i,comments:e,likes:s},label:n}=t;this.l5({createdDate:i,comments:e,likes:s}),(0,a.QM)(n)&&(0,I.jG)(this.q3(n),this.$templateFragment)}l5(t){const{createdDate:i,comments:e,likes:s}=t,n=this.ls.createElementByString(this.j3.instagramMetaTemplate(i,s,e));if(this.u5(e)&&this.u5(s)){const t=n.querySelector(`.${js.Instagram}-date cnx-span`);(0,I.cn)(t,_t.Gj.Show)}(0,I.jG)(n,this.$templateFragment)}u5(t){return!(0,a.QM)(t)||"0"===t}}class dn extends Ks{get template(){return`<cnx class="${Us.Basic} ${_t.iu.TitleComponent}"></cnx>`.trim()}instagramMetaTemplate(t,i,e){const s=(0,a.QM)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${_t.ed.InheritBodyFontFamily}">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0"d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"/></svg>\n                <cnx-span class="cnx-date-label ${_t.ed.InheritBodyFontFamily}">Posted </cnx-span>${(0,yt.VG)(t)}\n            </cnx-span>`.trim():"",n=(0,a.QM)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${_t.ed.InheritBodyFontFamily}">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"/></svg> ${(0,Oi.uc)(parseInt(i,10))}\n            </cnx-span>`.trim():"",r=(0,a.QM)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${_t.ed.InheritBodyFontFamily}">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"/></svg> ${(0,Oi.uc)(parseInt(e,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${_t.ed.InheritBodyFontFamily}">\n                ${s}\n                ${n}\n                ${r}\n            </cnx>\n        `.trim()}titleTemplate(t){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${js.Instagram}-title ${_t.ed.InheritBodyFontFamily}">\n                ${t}\n            </cnx>\n        `.trim()}}class ln extends Js{constructor(){super(...arguments),this.className=qs.Pinned,this.r5=!0,this.eventList=[...this.eventList,Y.CallToAction]}Y3(t){var i;let e,s="";switch(t.titleType){case he.Default:({url:e,label:s}=t);break;case he.Description:let n=[];({label:s="",descriptionChunkList:n}=t),(0,o.BZ)(n)&&(s+=" "+n[0].text);break;case he.Quote:const{quote:r=""}=t;s=r;break;case he.Bullet:let h=[];({label:s="",bulletChunkList:h}=t),(0,o.BZ)(h)&&(s+=" "+(null===(i=n[0])||void 0===i?void 0:i.title));break;case he.Cover:const{coverChunk:{title:c,subtitle:d}}=t;(0,a.QM)(c)&&(s=tn(c,Hs)),(0,a.QM)(d)&&(s+=" "+tn(d,Hs));break;case he.Instagram:({label:s}=t)}if(e?(this.Gr.setAttribute("title",e),(0,I.cn)(this.Gr,_t.iu.TitleLink)):(this.Gr.removeAttribute("title"),(0,I.IV)(this.Gr,_t.iu.TitleLink)),(0,a.QM)(s)){const t=this.U3.getWordsHtml(tn(s,Hs));(0,I.jG)(this.W3(t),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,Y.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.r5=!0}onSlideTimeUpdate(t,i){this.r5&&i-t<1200&&(this.J3(),this.r5=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.oa),this.oa.unregisterAll(this)}}class un extends Ks{get template(){return`<cnx class="${Us.Pinned}">\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="pinned-title">${t}</cnx>`.trim()}}const pn='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent cnx-quote-icon" width="13" height="10" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"/></svg>\n';class fn extends Js{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.ls=i,this.MA=n,this.j3=r,this.eventList=[],this.className=qs.Quote}Y3(t){const{quote:i,source:e}=t;if((0,a.QM)(i)){const t=this.U3.getWordsHtml(`${pn}${(0,A.J5)(i)}${pn}`);(0,I.jG)(this.W3(t),this.$templateFragment)}(0,a.QM)(e)&&(0,I.jG)(this.z3(e),this.$templateFragment)}}class mn extends Ks{get template(){return`\n            <cnx class="${Us.Basic} ${_t.iu.TitleComponent}"></cnx>\n        `.trim()}textTemplate(t){return`\n        <cnx class="${js.Text} ${_t.iu.PrimaryColor}"> ${t}</cnx>`.trim()}labelTemplate(t){return`<cnx class="${js.Label}">${t}</cnx>`.trim()}}class gn extends Is.P{constructor(t,i,e,s,n,r,o,a){super(t,i,e,s,r),this.JE=n,this.h2=o,this.eventList=[Y.CallToAction],this.p5=new Map,this.f5=[],this.m5(),this.g5=a}setFooterElement(t){this.p5.forEach((i=>{i.setFooterElement(t)}))}setIsPinnedTitle(t){this.g5=t,this.onSlideTransitionStart(this.f5),this.onSlideTransitionEnd()}onSlideTransitionStart(t){this.f5=t,(0,I.Kk)(this.Gr),this.Gr.removeAttribute("title");const i=t.find((({type:t})=>t===ae.SlideTitle));this.v5=i;const e=t.find((({type:t})=>t===ae.CtaButton));if(e&&e.metadata&&e.metadata.url){if(this.y5=e.metadata.url,!this.h2){this.Gr.href=this.y5;const t=this.ls.isURLSameDomainToTop(this.y5);this.Gr.target=t?_e.bS.Top:_e.bS.Blank}this.Gr.title=i.metadata.label,e.metadata.title=i.metadata.label}if((0,a.as)(i)&&(0,a.as)(i.metadata)){if(this.b5(),(0,a.QM)(i.metadata.label)){(0,A.Ft)(i.metadata.label)&&(0,I.cn)(this.Gr,ce.fB)}this.I5.onSlideTransitionStart([i])}}onSlideTransitionEnd(){this.I5&&this.I5.onSlideTransitionEnd()}onSlideTimeUpdate(t,i){this.I5&&this.I5.onSlideTimeUpdate(t,i)}initComponent(){}b5(){let t;t=this.g5?this.p5.get(he.Pinned):this.p5.get(this.v5.metadata.titleType),t&&this.w5(t)}w5(t){this.I5?(this.I5.destroy(),(0,I.L_)(this.Gr,this.S5,t.className)):(0,I.cn)(this.Gr,t.className),this.S5=t.className,this.Gr.innerHTML="",this.I5=t,this.I5.initComponent(this.Gr)}m5(){this.p5.set(he.Pinned,new ln(this,this.ls,this.oa,this.JE,this.MA,new un)),this.p5.set(he.Default,new nn(this,this.ls,this.oa,this.JE,this.MA,new rn)),this.p5.set(he.Description,new an(this,this.ls,this.oa,this.JE,this.MA,new hn)),this.p5.set(he.Quote,new fn(this,this.ls,this.oa,this.JE,this.MA,new mn)),this.p5.set(he.Bullet,new Ys(this,this.ls,this.oa,this.JE,this.MA,new Zs)),this.p5.set(he.Cover,new en(this,this.ls,this.oa,this.JE,this.MA,new sn)),this.p5.set(he.Instagram,new cn(this,this.ls,this.oa,this.JE,this.MA,new dn)),this.p5.forEach((t=>{t.eventList.forEach((i=>{this.subscribe(i,t,(()=>{const t={payload:null};i===Y.CallToAction&&(t.payload=this.y5),this.mediator.publish(this,i,t)}))}))}))}destroy(){super.destroy(),this.I5&&this.I5.destroy()}}class vn{get template(){return`<a class="${js.Wrapper}"></a>`}}class yn extends Is.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){const i=this.A5(t);i&&this.x5(i.metadata.label)}A5(t){return t.find((({type:t,metadata:i})=>t===ae.TextLabel&&(0,a.as)(i)))}x5(t){(0,a.QM)(t)&&(this.Gr.innerText=t)}}class bn extends ds.Y{constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.eventList=[...this.eventList,Ri.C[Ri.C.LogoClicked]],this.hideComponent(!1),this._5=this.Gr.querySelector(`.${ce.tO.Logo}`),this._5.src=`${r}`,this._5.alt="",this._5.onload=()=>{this.T5()}}show(t){this.showComponent(t.useTransition)}hide(t){this.hideComponent(t.useTransition)}update(t){this.showComponent(t.useTransition)}triggerLogoAnimation(){(0,I.cn)(this.Gr,ce.tO.LogoAnimation)}onClickHandler(){this.mediator.publish(this,Ri.C[Ri.C.LogoClicked])}T5(){this._5.naturalHeight>this._5.naturalWidth?this._5.naturalWidth>this._5.parentElement.clientWidth&&this._5.naturalWidth/this._5.naturalHeight>=.8?(0,I.cn)(this._5,ce.tO.LogoLandscape):(0,I.cn)(this._5,ce.tO.LogoPortrait):this._5.naturalHeight>this._5.parentElement.clientHeight&&this._5.naturalHeight/this._5.naturalWidth>=.8?(0,I.cn)(this._5,ce.tO.LogoPortrait):(0,I.cn)(this._5,ce.tO.LogoLandscape)}}class In{get template(){return`\n            <cnx class="${ce.tO.LogoContainer}">\n                <img class="${ce.tO.Logo}" />\n            </cnx>\n        `.trim()}}class Pn extends Is.P{constructor(t,i,e,s,n){super(t,i,e,s,n),this.eventList=[],this.IW=this.Gr.querySelector(`.${ce.tO.TextInnerContainer}`)}show(t){if(!this.IW)return;const{label:i,useTransition:e}=t;(0,a.QM)(i)&&i!==this.h5&&(clearTimeout(this.C5),this.h5=i,this.k5(i),this.Q3(e))}initComponent(){}hide(t){const{useTransition:i}=t;clearTimeout(this.C5),this.J3(i),this.h5=null}update(t){if(!this.IW)return;const{label:i,useTransition:e}=t;(0,a.QM)(i)&&i!==this.h5&&(clearTimeout(this.C5),this.J3(e),this.h5=i,this.C5=setTimeout((()=>{this.k5(i),this.Q3(e)}),600))}k5(t){(0,a.QM)(t)&&(0,A.Ft)(t)&&(0,I.cn)(this.Gr,"cnx-japanese-charset"),this.IW.innerHTML=t}Q3(t=!1){if(t){if((0,I.pv)(this.Gr,ce.tO.SlideIn))return;this.E5(),(0,I.IV)(this.Gr,_t.Gj.Hide,_t.Gj.Active),(0,I.Tp)(this.Gr),(0,I.L_)(this.Gr,ce.tO.SlideOut,ce.tO.SlideIn)}else(0,I.L_)(this.Gr,_t.Gj.Hide,_t.Gj.Active),(0,I.IV)(this.Gr,ce.tO.SlideIn,ce.tO.SlideOut)}J3(t=!1){t?((0,I.IV)(this.Gr,_t.Gj.Hide,_t.Gj.Active),(0,I.L_)(this.Gr,ce.tO.SlideIn,ce.tO.SlideOut)):((0,I.L_)(this.Gr,_t.Gj.Active,_t.Gj.Hide),(0,I.IV)(this.Gr,ce.tO.SlideIn,ce.tO.SlideOut))}E5(){const t=[ce.tO.SlideIn,ce.tO.SlideOut];(0,I.IV)(this.IW,...t),(0,I.Tp)(this.IW)}}class wn{get template(){return`\n            <cnx class="${ce.tO.TopSlideTitle} ${_t.ed.InheritTitleFontFamily}">\n                <cnx class="${ce.tO.TextPlaceholder}">\n                    <cnx class="${ce.tO.Text} ${_t.iu.SecondaryColor}">\n                        <cnx class="${ce.tO.TextOuterContainer}">\n                            <cnx class="${ce.tO.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Sn{get template(){return`\n            <cnx class="${ce.tO.TopStoryTitle} ${_t.ed.InheritTitleFontFamily}">\n                <cnx class="${ce.tO.TextPlaceholder}">\n                    <cnx class="${ce.tO.Text} ${_t.iu.SecondaryColor}">\n                        <cnx class="${ce.tO.TextOuterContainer}">\n                            <cnx class="${ce.tO.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}var An,xn=h(7617);!function(t){t[t.TopLogo=0]="TopLogo",t[t.TopSlideTitle=1]="TopSlideTitle",t[t.TopStoryTitle=2]="TopStoryTitle"}(An||(An={}));const _n={[ae.TopLogo]:An.TopLogo,[ae.TopSlideTitle]:An.TopSlideTitle,[ae.TopStoryTitle]:An.TopStoryTitle},Tn={[An.TopLogo]:ae.TopLogo,[An.TopSlideTitle]:ae.TopSlideTitle,[An.TopStoryTitle]:ae.TopStoryTitle},Cn=[An.TopLogo,An.TopStoryTitle,An.TopSlideTitle];class kn extends xn.E{constructor(){super(...arguments),this.eventList=[Ri.C[Ri.C.LogoClicked],le.Z[le.Z.Scroll]],this.R5=[],this.B5={}}triggerLogoAnimation(){const t=this.getComponent(Ye.r.TopLogo);t&&t.triggerLogoAnimation()}onSlideTransitionStart(t){const i=this.O5(t);this.B5=Object.assign({},i),this.D5(t)}onSlideTransitionEnd(){}onSlideTimeUpdate(){}getComponent(t){return super.getComponent(t)}Aa(t,i,e){this.mediator.publish(this,t,i)}N5(t){return t.map((({type:t})=>_n[t])).filter((t=>(0,a.$K)(t)))}O5(t){return t.reduce(((t,{type:i,metadata:e})=>{switch(i){case Tn[An.TopStoryTitle]:if(!e.label&&!e.useFallbackLabel)return t;const i=e.label||"Top Articles";return Object.assign(Object.assign({},t),{[An[An.TopStoryTitle]]:this.F5(i,e.useTransition)});case Tn[An.TopSlideTitle]:return Object.assign(Object.assign({},t),{[An[An.TopSlideTitle]]:this.F5(e.label,e.useTransition)});case Tn[An.TopLogo]:return Object.assign(Object.assign({},t),{[An[An.TopLogo]]:Object.assign({},e)});default:return t}}),{})}F5(t,i=!1){return{useTransition:i,label:this.V5(t)}}V5(t){if(t)return t.length>36?`${t.substring(0,36)}...`:t}D5(t,i=!1){const e=this.N5(t),s=(0,o.V7)(Cn,e),n=(0,o.V7)(e,this.R5),r=(0,o.tN)(e,this.R5);this.R5=e,s.forEach((t=>this.j5(t,i))),n.forEach((t=>this.U5(t,i))),r.forEach((t=>this.q5(t,i)))}j5(t,i=!1){const e=this.H5(t);if(!e)return;const s=this.z5(t);i&&(s.useTransition=!1),e.hide(s)}U5(t,i=!1){const e=this.H5(t);if(!e)return;const s=this.z5(t);i&&(s.useTransition=!1),e.show(s)}q5(t,i=!1){const e=this.H5(t);if(!e)return;const s=this.z5(t);i&&(s.useTransition=!1),e.update(s)}H5(t){return this.getComponent(Ye.r[An[t]])}z5(t){return this.B5[An[t]]||{}}}class En{constructor(t){this.W5=t}get template(){return`\n            <cnx class="${ce.tO.Main}">\n                ${this.G5()}\n                <cnx class="${ce.tO.TitlesContainer}">\n                    [[${Ye.r.TopStoryTitle}]]\n                    [[${Ye.r.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}G5(){return this.W5?`[[${Ye.r.TopLogo}]]`:""}}class Mn extends cs.A{constructor(t,i,e,s,n){super(t,i,s,n),this.SJ=e,this.ra={[Ye.r.PlayspaceProgressBar]:t=>new Ss(t,this.ls,this.oa,'<cnx class="cnx-slides-progress-bar"></cnx>',this.Tr.isMobile),[Ye.r.PlayspaceSettingsMenu]:t=>new $s(t,this.ls,this.oa,'<cnx class="cnx-ui-cm cnx-ui-cm-settings cnx-menu-popup" data-id="cnx-ui-cm-settings"><cnx class="cnx-cm-container"></cnx></cnx>',Ri.C[Ri.C.SettingsMenu],Ye.r.PlayspaceSettingsMenu,this.Gr,this.Tr.isMobile),[Ye.r.CtaButton]:t=>new vs(t,this.ls,this.oa,this.SJ,new bs,this.Tr.isMobile,this.Tr.disableClickUrl),[Ye.r.ClickToPlayButton]:t=>new ls(t,this.ls,this.oa,'<cnx class="cnx-ui-click-to-play-btn">\n    <cnx class="cnx-ui-click-to-play-btn-content">\n        <svg class="cnx-color-icon cnx-click-to-play-btn-icon cnx-color-accent" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><polygon points="5 1 5 23 23 11.9165764"></polygon></svg>\n\n        <cnx class="cnx-onion-ring"></cnx>\n        <cnx-span class="cnx-click-to-play-btn-text">PLAY</cnx-span>\n    </cnx>\n</cnx>',this.Tr.isMobile),[Ye.r.OverlayComponent]:t=>new ls(t,this.ls,this.oa,'<cnx class="cnx-ui-click-to-play-overlay"></cnx>',this.Tr.isMobile),[Ye.r.TopTitle]:t=>new kn(t,this.ls,new En(this.Tr.logoUrl).template,this),[Ye.r.TopLogo]:t=>new bn(t,this.ls,this.oa,(new In).template,this.Tr.isMobile,this.Tr.logoUrl),[Ye.r.TopSlideTitle]:t=>new Pn(t,this.ls,this.oa,(new wn).template,this.Tr.isMobile),[Ye.r.TopStoryTitle]:t=>new Pn(t,this.ls,this.oa,(new Sn).template,this.Tr.isMobile),[Ye.r.SlideTitle]:t=>new gn(t,this.ls,this.oa,(new vn).template,this.SJ,this.Tr.isMobile,this.Tr.disableClickUrl,this.Tr.isPinned),[Ye.r.VolumeControls]:t=>new as.N(t,this.ls,hs.Z,this),[Ye.r.TextLabel]:t=>new yn(t,this.ls,this.oa,'<cnx class="cnx-button-text-label">1 min. story</cnx>')},this.ha=t=>i=>{const e=this.ra[t];if(e)return e(i)}}createComponent(t,i){return this.ha(t)(i)||super.createComponent(t,i)}}const Ln={[ae.PlaybackControls]:[Ye.r.PlayButton],[ae.VolumeControls]:[Ye.r.VolumeButton],[ae.CtaButton]:[Ye.r.CtaButton],[ae.PlaylistControls]:[Ye.r.UpNextButton,Ye.r.PreviousButton],[ae.SlideTitle]:[Ye.r.SlideTitle],[ae.TextLabel]:[Ye.r.TextLabel]};class Rn{constructor(){this.X5=Object.keys(Ln).reduce(((t,i)=>[...t,...Ln[i]]),[])}setCapabilityList(t){this.Q5=t.map((t=>Ln[t.type])).filter((t=>Array.isArray(t))).reduce(((t,i)=>[...t,...i]),[])}getComponentList(){return{excludedComponents:(0,o.V7)(this.X5,this.Q5),includedComponents:(0,o.tN)(this.X5,this.Q5)}}}class Bn extends Ze.${constructor(t,i,e,s,n,r,o,a,h){super(t,i,e,n,new Mn(e,h,s,i,{isMobile:r})),this.mediator=t,this.$container=i,this.nr=e,this._2=o,this.X5=[Ye.r.CtaButton],this.Y5=new Rn,this.fa={[z.Ez.PlayingState]:new ns(this),[z.Ez.PausedState]:new is(this),[z.Ez.StoppedState]:new os(this),[z.Ez.HiddenState]:new es(this),[z.Ez.PrerollState]:new rs(this),[z.Ez.PostrollState]:new rs(this)},this.K5(),this.fa[a].enterState(),this.Z5(),this.t6(!1)}K5(){const t=this.getComponent(Ye.r.CtaButton);t&&t.setFooterElement(this._2)}Z5(t=[]){this.Y5.setCapabilityList(t)}t6(t=!0){const{excludedComponents:i,includedComponents:e}=this.Y5.getComponentList();i.map((t=>this.getComponent(t))).forEach((i=>i&&i.hideComponent(t))),e.map((t=>this.getComponent(t))).forEach((i=>i&&i.showComponent(t)))}i6(t){switch(t){case Y.CallToAction:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.UrlClick});break;case le.Z[le.Z.Scroll]:return}}Aa(t,i,e){this.i6(t),t===Y.CallToAction?(0,a.QM)(i.payload)?this.mediator.publish(this,Y.CallToAction,i):this.mediator.publish(this,Ri.C[Ri.C.Next]):this.mediator.publish(this,t,i)}handleCapabilityList(t){this.Z5(t),this.t6(),this.X5.forEach((i=>{const e=this.getComponent(i);e&&e.handleCapabilities(t)}))}getComponent(t){return super.getComponent(t)}}class On extends kt.ai{constructor(t,i,e,s,n,r,o,a,h,c){super(),this.mediator=t,this.JV=i,this.nr=e,this.oa=s,this.SJ=n,this.e6=r,this.MA=o,this.n2=a,this._2=h,this.nz=c,this.n6=[{type:ae.TopLogo,metadata:{}}],this.Gr=this.nr.createElementByString(`<cnx class="${ce.v$.Slide}"></cnx>`),this.PK(),this.r6=this.Gr.querySelector(".cnx-ui-ps-slide")}get $container(){return this.Gr}get slideCapabilityList(){return this.n6}get metadata(){return this.JV}get media(){return this.e6}load(){this.e6.load(this.r6)}get clickUrl(){return this.JV.clickUrl}updateCapabilityMetadata(t){if(!(0,o.BZ)(this.n6))return;const i=this.n6.find((({type:i})=>i===t.type));i&&(i.metadata=Object.assign(Object.assign({},i.metadata),t.metadata))}changeState(t){this.DX.changeState(t)}PK(){this.DX=new Bn(this,this.Gr,this.nr,this.SJ,this.gW(),this.MA,this._2,this.nz.playbackMode===T.ProtoPlayerPlaybackModeEnum.ClickToPlay?z.Ez.StoppedState:z.Ez.PausedState,this.oa),this.subscribe(Y.CallToAction,this.DX,(({payload:t})=>{this.mediator.publish(this,Y.CallToAction)})),this.relay(Y.GeneralClickInteraction,this.DX,this,this.mediator),this.subscribe(Ri.C[Ri.C.Next],this.DX,(()=>{this.mediator.publish(this,Ri.C[Ri.C.Next])}))}gW(){return new Ke(this.n2).template}o6(t,i){this.n6.push({type:t,metadata:i})}a6(){const t=this.h6(this.JV);if(!t)return;const i={label:t,useTransition:!0};this.o6(ae.TopSlideTitle,i)}h6(t){const i=t.publisherName||t.title,e=this.nr.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}onSlideTransitionStart(t){this.DX&&this.DX.handleCapabilityList(t)}}class Dn extends On{constructor(t,i,e,s,n,r,h,c,d,l){super(t,i,e,s,n,r,h,c,d,l),this.type=T.ProtoPlayspaceSlideTypeEnum.BulletList,(0,a.as)(i.bulletListMetadata)&&(0,o.BZ)(this.metadata.bulletListMetadata.items)?(this.c6(),this.onSlideTransitionStart(this.n6)):(0,S.nF)({message:"BulletSlide_no_metadata",level:S.D_.CRITICAL})}c6(){this.d6(),this.a6(),this.l6()}d6(){const{title:t,items:i}=this.JV.bulletListMetadata;i.length>4&&(i.length=4);const e=ae.SlideTitle,s={bulletChunkList:i,titleType:he.Bullet};(0,a.QM)(t)&&(s.label=t),this.o6(e,s)}l6(){const t={label:this.JV.storyTitle,useFallbackLabel:!0};this.o6(ae.TopStoryTitle,t)}}class Nn extends On{constructor(t,i,e,s,n,r,o,a,h,c,d){super(t,i,e,s,n,r,a,h,c,d),this.u6=o,this.type=T.ProtoPlayspaceSlideTypeEnum.Cover,this.p6(),this.f6(),this.onSlideTransitionStart(this.n6)}p6(){(0,I.cn)(this.Gr,js.Cover)}f6(){this.m6(),this.g6()}m6(){const t=ae.SlideTitle,i={titleType:he.Cover,coverChunk:this.JV.coverMetadata,label:`${this.u6} min. story`};this.o6(t,i)}g6(){const t={label:"START",duration:this.JV.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.o6(ae.CtaButton,t)}}const Fn={[e.ProtoMediaTypeEnum.Image]:"Read more",[e.ProtoMediaTypeEnum.Video]:"Continue video"};class $n extends On{constructor(t,i,e,s,n,r,o,a,h,c){super(t,i,e,s,n,r,o,a,h,c),this.type=T.ProtoPlayspaceSlideTypeEnum.Default,this.f6(),this.onSlideTransitionStart(this.n6)}f6(){this.m6(),this.v6(),this.y6(),this.b6(),this.g6(),this.l6(),this.JV.publisherName&&this.a6()}m6(){const{clickUrl:t,title:i}=this.JV,e={url:t,label:i,titleType:he.Default};this.o6(ae.SlideTitle,e)}v6(){this.o6(ae.PlaybackControls)}y6(){this.o6(ae.PlaylistControls)}g6(){const{clickUrl:t,title:i}=this.JV;if(!(0,a.QM)(t))return;const e={url:t,label:this.I6(this.JV),title:i,ctaAlignToContent:!0};this.o6(ae.CtaButton,e)}b6(){this.o6(ae.VolumeControls)}l6(){const t=this.nr.stripHtmlTags(this.JV.storyTitle).trim();if(!t)return;const i={label:t,useFallbackLabel:!0};this.o6(ae.TopStoryTitle,i)}I6(t){const{capabilityList:i,mediaType:e}=t;if(!(0,o.BZ)(i))return Fn[e];const s=i.find((({type:t})=>t===T.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton));return s&&s.metadata?s.metadata.label:Fn[e]}}class Vn extends On{constructor(t,i,e,s,n,r,h,c,d,l){super(t,i,e,s,n,r,h,c,d,l),this.type=T.ProtoPlayspaceSlideTypeEnum.Description,(0,a.as)(i.descriptionMetadata)&&(0,o.BZ)(this.metadata.descriptionMetadata.chunkList)?(this.A6(),this.f6(),this.onSlideTransitionStart(this.n6)):(0,S.nF)({message:"DescriptionSlide_no_metadata",level:S.D_.CRITICAL})}A6(){const{chunkList:t,label:i}=this.JV.descriptionMetadata;let e=!1;const s=t=>(0,a.r)(t);(0,a.as)(i)&&(0,a.QM)(i.text)&&(e=!0,i.colorScheme=s(i.colorScheme)?i.colorScheme:T.ProtoPlayspaceColorSchemeEnum.Primary),(0,o.BZ)(t)&&t.forEach(((t,i)=>{t.colorScheme=0!==i||e?s(t.colorScheme)?t.colorScheme:T.ProtoPlayspaceColorSchemeEnum.Secondary:s(t.colorScheme)?t.colorScheme:T.ProtoPlayspaceColorSchemeEnum.Primary}))}f6(){this.x6(),this.l6(),this.a6()}x6(){const{chunkList:t,label:i}=this.JV.descriptionMetadata,e=ae.SlideTitle,s={descriptionChunkList:t,titleType:he.Description};(0,a.as)(i)&&(s.label=i.text,s.labelColorScheme=i.colorScheme),this.o6(e,s)}l6(){const t={label:this.JV.storyTitle,useFallbackLabel:!0};this.o6(ae.TopStoryTitle,t)}}class jn extends On{constructor(t,i,e,s,n,r,o,a,h,c){super(t,i,e,s,n,r,o,a,h,c),this.type=T.ProtoPlayspaceSlideTypeEnum.Instagram,this.p6(),this.f6(),this.onSlideTransitionStart(this.n6)}p6(){(0,I.cn)(this.Gr,js.Instagram)}f6(){this._6(),this.l6(),this.a6(),this.g6()}_6(){const{createdDate:t,comments:i,likes:e}=this.JV.instagramMetadata,s={label:this.JV.title,instagramMetadata:{createdDate:t,comments:i,likes:e},titleType:he.Instagram};this.o6(ae.SlideTitle,s)}l6(){const t={label:this.JV.storyTitle,useFallbackLabel:!0};this.o6(ae.TopStoryTitle,t)}g6(){const{clickUrl:t,title:i}=this.JV;if(!(0,a.QM)(t))return;const e={url:t,label:"VISIT POST",title:i,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.o6(ae.CtaButton,e)}T6(t){const i=this.metadata.instagramMetadata.handle||t.publisherName,e=this.nr.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}a6(){const t=this.T6(this.JV);if(!t)return;const i={label:t,useTransition:!0};this.o6(ae.TopSlideTitle,i)}}class Un extends On{constructor(t,i,e,s,n,r,o,h,c,d){super(t,i,e,s,n,r,o,h,c,d),this.type=T.ProtoPlayspaceSlideTypeEnum.Quote,(0,a.as)(i.quoteMetadata)?(this.f6(),this.onSlideTransitionStart(this.n6)):(0,S.nF)({message:"QuoteSlide_no_metadata",level:S.D_.CRITICAL})}f6(){this.l6(),this.a6(),this.C6()}l6(){const t={label:this.JV.storyTitle,useFallbackLabel:!0};this.o6(ae.TopStoryTitle,t)}C6(){const{text:t,source:i}=this.JV.quoteMetadata,e=ae.SlideTitle,s={quote:t,source:i,titleType:he.Quote};this.o6(e,s)}}class qn{constructor(t,i,e,s,n,r,o,a,h,c){this.Sl=t,this.nr=i,this.oa=e,this.SJ=s,this.uQ=n,this.dF=r,this.MA=o,this._2=a,this.nz=h,this.k6=c,this.E6={[T.ProtoPlayspaceSlideTypeEnum.Description]:Vn,[T.ProtoPlayspaceSlideTypeEnum.Default]:$n,[T.ProtoPlayspaceSlideTypeEnum.Quote]:Un,[T.ProtoPlayspaceSlideTypeEnum.BulletList]:Dn,[T.ProtoPlayspaceSlideTypeEnum.Instagram]:jn}}getSlide(t,i,e,s){const n=this.E6[t.type]||$n,r=this.M6(t,i);return t.type===T.ProtoPlayspaceSlideTypeEnum.Cover?new Nn(i,t,this.nr,this.oa,this.SJ,r,e,this.MA,this.L6(t),this._2,this.nz):new n(i,t,this.nr,this.oa,this.SJ,r,this.MA,this.L6(t),this._2,this.nz)}M6(t,i){if(t.mediaType===e.ProtoMediaTypeEnum.Video)return new Je(i,t,this.Sl,this.uQ,this.dF);if(t.mediaType===e.ProtoMediaTypeEnum.Image)return new we(i,t,this.Sl,this.uQ);throw new Error("Slide not found")}L6(t){const{disableCTARendering:i,useVideoProgressBar:e}=this.nz,s=!this.k6;return{disableCTARendering:i||e&&s}}}class Hn{constructor(t,i=0){this.H2=t,this.setCurrentSlide(i)}T3(t=this.H2.indexOf(this.R6)){return(0,ki.QX)(this.H2,t)}get currentSlide(){return this.R6}getCurrentThumbnailUrlParams(t,i){return this.R6.media.getThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.R6.metadata}setCurrentSlide(t){this.R6=this.H2[t]}get currentSlideIndex(){return this.T3().currentIndex}get nextSlideIndex(){return this.T3().nextIndex}get prevSlideIndex(){return this.T3().prevIndex}get firstSlideIndex(){return this.T3().firstIndex}get lastSlideIndex(){return this.T3().lastIndex}get slides(){return this.H2}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(t=this.T3().currentIndex){const i=[];for(let e=0,s=t,n=t;e<2;e++)s=this.T3(s).nextIndex,n=this.T3(n).prevIndex,i.push(this.H2[n],this.H2[s]);return(0,o.gX)(i)}}var zn;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(zn||(zn={}));class Wn extends kt.ai{constructor(t,i){super(),this.mediator=t,this.B6=i,this.inTransition=!1,this.G2=0,this.O6=null,this.D6=!1,this.N6=400,this.F6=!0,this.V6=()=>{clearTimeout(this.O6),this.O6=null,this.D6=!1,this.q6(),this.G2=this.H6(this.z6),this.mediator.publish(this,et),this.W6()},this.G6=t=>{t.stopPropagation();t.target.parentElement===this.B6&&this.X6()&&(this.O6=setTimeout((()=>{this.D6&&this.Q6()}),this.N6))},this.J6=t=>{t.stopPropagation();t.target.parentElement===this.B6&&this.inTransition&&this.D6&&this.X6()&&this.Q6()},this.Y6=(0,o.Sz)(this.B6.childNodes),this.B6.addEventListener("transitionstart",this.G6),this.B6.addEventListener("transitionend",this.J6)}destroy(){clearTimeout(this.O6),this.O6=null,this.B6.removeEventListener("transitionend",this.J6),this.B6.removeEventListener("transitionstart",this.G6)}setCurrentSlide(t,i,e=!0){this.z6=t,this.F6||(e=!1),e&&!this.K6(this.z6)&&this.Z6()&&this.F6?this.inTransition||(this.G2<this.H6(this.z6)?this.t4(i):this.t4(zn.Left)):this.i4()}offsetSlides(t,i){this.inTransition||((0,I.cn)(i,_t.PK.NextSlide),this.q6(),this.e4(t))}removeNextClass(t){t.forEach((t=>{(0,I.IV)(t,_t.PK.NextSlide)}))}cleanLastSlide(t,i){(0,I.aQ)(t,"transform"),(0,I.IV)(i,_t.PK.NextSlide)}setAnimationAllowed(t){this.F6=t}e4(t){(0,I.T7)(this.s4(),{transform:`translate(${t}px)`})}i4(){(0,I.IV)(this.s4(),_t.PK.CurrentSlide,_t.PK.SlideLeft,_t.PK.SlideRight),this.n4(this.H6(this.z6)),(0,I.cn)(this.z6,_t.PK.CurrentSlide),this.V6()}t4(t){this.n4(this.H6(this.z6)),this.r4(),(0,I.cn)(this.z6,_t.PK.NextSlide),t===zn.Right?((0,I.cn)(this.z6,_t.PK.CurrentSlide),(0,I.cn)(this.s4(),_t.PK.SlideLeft)):t===zn.Left&&((0,I.cn)(this.z6,_t.PK.CurrentSlide),(0,I.cn)(this.s4(),_t.PK.SlideRight)),(0,I.aQ)(this.s4(),"transform")}K6(t){return t===this.s4()}W6(){this.mediator.publish(this,it)}n4(t){this.D6=!0,this.mediator.publish(this,tt,{payload:{nextIndex:t}})}Z6(){return(0,a.$K)(this.s4())}H6(t){return(0,I.oG)(t,this.B6)}s4(){return this.Y6[this.G2]}r4(){this.o4(),this.a4()}q6(){this.h4(),this.c4()}c4(){(0,I.cn)(this.B6,_t.Gj.NoTransition)}o4(){(0,I.IV)(this.B6,_t.Gj.NoTransition)}h4(){this.inTransition=!1}a4(){this.inTransition=!0}d4(){(0,I.IV)(this.s4(),_t.PK.CurrentSlide,_t.PK.SlideLeft,_t.PK.SlideRight),(0,I.L_)(this.z6,_t.PK.NextSlide,_t.PK.CurrentSlide)}Q6(){this.d4(),this.V6()}X6(){return(0,I.pv)(this.s4(),_t.PK.SlideLeft)||(0,I.pv)(this.s4(),_t.PK.SlideRight)}}function Gn(t){return t.type===e.ProtoMediaTypeEnum.Video}function Xn(t){return t.some((t=>t.type!==T.ProtoPlayspaceSlideTypeEnum.Default))}class Qn extends kt.ai{constructor(t,i,e,s,n,r,o=[]){super(),this.mediator=t,this.nr=i,this.xV=e,this.l4=s,this.u4=n,this.f4=r,this.m4=o,this.fu=!1,this.g4=!1,this.v4=()=>{this.goToNextSlide()},this.y4=()=>{this.mediator.publish(this,st,{payload:{elapsedTime:this.ts.timeElapsed,duration:this.b4.currentSlide.media.duration,totalElapsedTime:this.I4()+this.ts.timeElapsed}})},this.S4=this.nr.createElementByString(`<cnx class="${ce.v$.Slider}"></cnx>`),this.l4.appendChild(this.S4),this.Lr()}A4(){this.xV.on((t=>{this.g4=t,this.x4.setAnimationAllowed(t)}))}_4(t=zn.Right){this.x4.setCurrentSlide(this.b4.currentSlide.$container,t)}T4(){let t;this.b4.currentSlide.load(),t=this.f4?[...this.b4.slides]:[...this.b4.getAdjacentSlides()],t.forEach((t=>t.load()))}C4(){this.x4=new Wn(this,this.S4),this.subscribe(tt,this.x4,(({payload:{nextIndex:t}})=>{this.g4&&this.ts.disable(),this.mediator.publish(this,tt,{payload:{nextSlide:this.b4.slides[t]}})})),this.subscribe(it,this.x4,(()=>{this.ts.reset(this.b4.currentSlide.media.duration),this.b4.slides.forEach((t=>t.media.reset()));const t={payload:{index:this.b4.currentSlideIndex}};this.mediator.publish(this,it,t),this.fu?this.b4.currentSlide.media.play():this.pause()})),this.subscribe(et,this.x4,(()=>{this.mediator.publish(this,et)}))}Lr(){const t=E.h.getGlobalContainer().resolve(si.f);this.ts=new ni.B(t,0,100),this.ts.onTimeElapsed.subscribe(this.v4),this.ts.onTimeUpdate.subscribe(this.y4)}E4(){this.M4=this.L4(this.m4);const t=this.R4(this.M4),i=!Xn(this.m4),e=this.m4.map((e=>{const s=this.u4.getSlide(e,this,t,i);return this.subscribe(Y.CallToAction,s,(()=>{this.mediator.publish(this,Y.CallToAction)})),this.relay(Y.GeneralClickInteraction,s,this,this.mediator),this.subscribe(Ri.C[Ri.C.Next],s,(()=>{this.mediator.publish(this,Ri.C[Ri.C.Next])})),s}));this.b4=new Hn(e),this.ts.reset(this.b4.currentSlide.media.duration),this.S4.innerHTML="",this.b4.slides.forEach((t=>{(0,I.jG)(t.$container,this.S4),this.relay(z.XQ.Change,t.media,this,this.mediator)}))}R4(t){return(0,a.r)(t)?Math.ceil(t/ht.Y0):1}L4(t){return t.map((t=>t.slideDuration)).reduce(((t,i)=>t+i),0)}I4(){if(0===this.b4.currentSlideIndex)return 0;const t=this.slidesMetadata.slice(0,this.b4.prevSlideIndex+1).map((t=>t.slideDuration)).reduce(((t,i)=>t+i),0);return(0,yt.w4)(t)}B4(){const t=this.b4.getAdjacentSlides().map((t=>t.$container));this.x4.removeNextClass(t)}O4(t){return(t>0?this.b4.prevSlide:this.b4.nextSlide).$container}getNextSlide(){return this.b4.nextSlide}setCurrentSlide(t,i){this.x4.inTransition||(this.b4.currentSlide&&this.b4.currentSlide.media.pause(),this.b4.setCurrentSlide(t),this.T4(),this._4(i))}getCurrentSlide(){if(this.b4)return this.b4.currentSlide}getCurrentThumbnailUrlParams(t,i){if(this.b4)return this.b4.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){if(this.b4)return this.b4.getCurrentMetadata()}goToNextSlide(){if(this.b4.currentSlideIndex===this.b4.lastSlideIndex)return this.x4.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,nt);this.setCurrentSlide(this.b4.nextSlideIndex,zn.Right)}goToPrevSlide(){this.setCurrentSlide(this.b4.prevSlideIndex,zn.Left)}resetSlider(){this.setCurrentSlide(this.b4.firstSlideIndex)}setVolume(t){this.b4&&this.b4.slides.forEach((i=>{i.media.volume=t}))}play(){this.fu=!0,this.ts.start(),this.b4.currentSlide.media.play()}pause(){this.fu=!1,this.ts.stop(),this.b4.currentSlide.media.pause()}stop(){this.b4.setCurrentSlide(this.b4.firstSlideIndex),this.T4(),this.pause(),this.x4.setCurrentSlide(this.b4.currentSlide.$container,null,!1)}get remainingTime(){return this.ts.timeRemaining}setQuality(t){this.b4.slides.forEach((i=>{if(Gn(i.media)){const e={height:i.media.getClosestSourceQuality(t.height).videoHeight,quality:t.quality};i.media.setQuality(e)}}))}getQuality(){const{currentSlide:t}=this.b4;if(!Gn(t.media))return;const{getClosestSourceQuality:i,currentQuality:e}=t.media;return i(e.height).videoHeight}start(t){try{this.E4(),this.C4(),this.A4()}catch(i){(0,S.nF)({sessionId:t,message:"SlidesManager_start",exception:i.message,callStack:i.stack,level:S.D_.CRITICAL})}}offsetSlides(t){if(this.B4(),0===t)return;const i=this.O4(t);this.x4.offsetSlides(t,i)}destroy(){this.ts.disable(),this.x4&&this.x4.destroy(),this.b4.slides.forEach((t=>t.media.destroy()))}get isPlaying(){return this.fu}onPlayerContainerResize(){(0,a.$K)(this.b4)&&(0,o.BZ)(this.b4.slides)&&this.b4.slides.forEach((t=>t.media.onSlideResizeCallback()))}get slides(){return(0,a.$K)(this.b4)&&(0,o.BZ)(this.b4.slides)?this.b4.slides:[]}get currentSlideIndex(){return(0,a.$K)(this.b4)?this.b4.currentSlideIndex:0}updateCapabilityMetadata(t,i){if(!(0,a.$K)(this.b4)||!(0,o.BZ)(this.b4.slides))return;const e=this.b4.slides[t];e&&e.updateCapabilityMetadata(i)}get slidesMetadata(){return this.m4}get totalSlidesDurationSeconds(){return this.M4}}const Jn="stateChanged",Yn="contentReset";class Kn{constructor(t,i,e,s,n,r,o){this.mediator=t,this.D4=i,this.DX=e,this.wY=s,this.AY=n,this.N4=r,this.F4=o,this._Y=!1,this.V4=!1,this.j4=!1,this.N$=!1,this.kY=!1,this.q4=!0,this.GY=()=>{this._Y=!0,this.WY===z.Ez.PlayingState?this.play(!1):this.pause(!1)},this.ZY=()=>{switch(this.V4=!0,this.N4){case T.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case T.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.RY=null,this.OY=null,this.F4&&(this._Y=!0)}$Y(t){this.RY!==t&&(this.OY=this.RY,this.RY=t,this.mediator.publish(this,Jn,{payload:this.RY}))}H4(t){return this.RY===t}resume(){this.OY&&this.$Y(this.OY)}stop(){this.D4.stop(),this.$Y(z.Ez.StoppedState)}handleSlidesEnd(){this.JY()}zY(){this.$Y(z.Ez.PrerollState)}JY(){this.RY!==z.Ez.PostrollState&&(this.mediator.publish(this,Z.ContentEnd),this.AY?this.$Y(z.Ez.PostrollState):this.ZY())}z4(t){return t===z.Ez.PrerollState||t===z.Ez.PostrollState}W4(t){return t===z.Ez.PrerollState&&this._Y||t===z.Ez.PostrollState&&this.V4}setViewabilityState(t){this.N$=t}play(t){if(this.WY=z.Ez.PlayingState,!(this.H4(z.Ez.PlayingState)||this.H4(z.Ez.HiddenState)&&this.j4||this.z4(this.RY)&&!this.W4(this.RY)||this.H4(z.Ez.StoppedState)&&!t))if(!this.wY||this._Y){if(this.H4(z.Ez.StoppedState))return this._Y=!1,void this.reset();this.DX.setDuration(this.D4.remainingTime),this.D4.play(),this.$Y(z.Ez.PlayingState),this.q4&&(this.q4=!1,this.mediator.publish(this,Z.ContentStart))}else this.zY()}reset(){this.mediator.publish(this,Yn),this.RY=null,this.V4=!1,this.q4=!0,this.D4.resetSlider(),this.play(!1)}pause(t){this.WY=z.Ez.PausedState,this.H4(z.Ez.PausedState)||this.H4(z.Ez.HiddenState)||this.z4(this.RY)&&!this.W4(this.RY)||this.H4(z.Ez.StoppedState)&&!t||(this.D4.pause(),this.$Y(z.Ez.PausedState))}pauseToggle(){if(this.H4(z.Ez.PausedState)||this.H4(z.Ez.PlayingState))return this.H4(z.Ez.PausedState)&&this.kY?(this.kY=!1,void this.play(!1)):this.H4(z.Ez.PlayingState)?(this.kY=!0,void this.pause(!1)):void 0}hide(){this.D4.pause(),this.j4=!0,this.$Y(z.Ez.HiddenState)}show(){this.H4(z.Ez.HiddenState)&&(this.j4=!1,this.OY!==z.Ez.PostrollState?this.OY!==z.Ez.PrerollState?this.N$?this.goToNextSlide():this.WY===z.Ez.PlayingState?this.play(!1):this.pause(!1):this.GY():this.ZY())}setCurrentSlide(t){this.z4(this.RY)&&!this.W4(this.RY)||this.D4.setCurrentSlide(t)}goToNextSlide(){this.z4(this.RY)&&!this.W4(this.RY)||(this.D4.goToNextSlide(),this.H4(z.Ez.StoppedState)||this.play(!1))}goToPrevSlide(){this.z4(this.RY)||(this.play(!1),this.D4.goToPrevSlide())}exitRollBreak(){this.RY!==z.Ez.PostrollState?this.GY():this.ZY()}set hasPreroll(t){this.wY=t,this._Y=!0}set hasPostroll(t){this.AY=t}}class Zn{constructor(t){this.Gr=t,this.G4=!1}isUIHidden(){return this.G4}startAutoHide(){this.X4=setTimeout((()=>{this.Q4()}),3e3)}showUi(){clearTimeout(this.X4),this.J4()}resetAutoHideTimer(){clearTimeout(this.X4),this.J4(),this.startAutoHide()}Q4(){(0,I.cn)(this.Gr,_t.s6.HideUI),this.G4=!0}J4(){(0,I.IV)(this.Gr,_t.s6.HideUI),this.G4=!1}}var tr=h(1191);class ir{constructor(t){this.Y4=t}K4(t){return this.Y4.filter((i=>t.instance!==i.instance))}Z4(t){return this.Y4.find((({name:i})=>t===i))}t9(t){t.forEach((({name:t})=>{this.closeContextMenu(t)}))}toggleContextMenu(t,i={}){const e=this.Z4(t);if(e.instance.isOpen)return this.closeContextMenu(t),!1;{const{targetCoordinates:t,holdPause:s}=i,n=t||e.instance.getAnchorCoordinatesTo(e.linkedComponent);return e.instance.open(n,s,e.linkedComponent),this.t9(this.K4(e)),!0}}isAnyContextMenuOpen(){return!!this.Y4.find((({instance:t})=>t.isOpen))}closeContextMenu(t){const i=this.Z4(t);i.instance.isOpen&&i.instance.close()}closeAllContextMenus(){this.t9(this.Y4)}setCloseAttribute(t){t.getContainer().setAttribute("aria-expanded","false")}setOpenAttribute(t){t.getContainer().setAttribute("aria-expanded","true")}}class er extends ts.d{enterState(){super.enterState();const t=this.da.getComponent(Ye.r.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.da.getComponent(Ye.r.CtaButton);i&&i.pauseProgress(),this.da.interactionService.disableSpecialInteractions(this.da.$container)}exitState(){super.exitState()}updateDuration(){}}class sr extends er{enterState(){super.enterState(),this.da.interactionService.disableSpecialInteractions(this.da.$container)}exitState(){super.exitState()}updateDuration(){const t=this.da.getComponent(Ye.r.PlayspaceProgressBar);t&&t.resetProgress()}}class nr extends ss.ai{enterState(){super.enterState();const t=this.da.getComponent(Ye.r.PlayspaceProgressBar);t&&t.startProgress();const i=this.da.getComponent(Ye.r.CtaButton);i&&i.startProgress(),this.da.interactionService.enableSpecialInteractions(this.da.$container),this.da.autoHideHandler&&this.da.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.da.autoHideHandler&&this.da.autoHideHandler.showUi()}updateDuration(){const t=this.da.getComponent(Ye.r.PlayspaceProgressBar);t&&t.startProgress()}}class rr extends er{enterState(){super.enterState(),(0,I.cn)(this.da.$uiContainer,_t.s_.Preroll);const t=this.da.getComponent(Ye.r.Loader);t&&t.show(),this.da.interactionService.disableSpecialInteractions(this.da.$container)}exitState(){super.exitState(),(0,I.IV)(this.da.$uiContainer,_t.s_.Preroll);const t=this.da.getComponent(Ye.r.Loader);t&&t.hide()}}class or extends er{enterState(){super.enterState(),this.da.interactionService.disableSpecialInteractions(this.da.$container)}exitState(){super.exitState()}}class ar extends Ze.${constructor(t,i,e,s,n,r,o,a,h){super(t,i,e,n,new Mn(e,h,s,i,r)),this.mediator=t,this.$container=i,this.globalDomUtilsService=e,this.settings=r,this.Yr=o,this.interactionService=h,this.i9=80,this.e9=[Ye.r.SlideTitle,Ye.r.CtaButton,Ye.r.TopTitle,Ye.r.TextLabel],this.fa={[z.Ez.PlayingState]:new nr(this),[z.Ez.PausedState]:new er(this),[z.Ez.StoppedState]:new or(this),[z.Ez.HiddenState]:new sr(this),[z.Ez.PrerollState]:new rr(this),[z.Ez.PostrollState]:new rr(this)},this.Y5=new Rn,this._2=this.$container.querySelector(`.${ce.v$.Footer}`),this.s9(),this.r9(),this.o9(),this.a9(),this.fa[a].enterState(),this.Z5(),this.t6(!1),this.h9(),this.d0=this.$uiContainer.querySelector(`.${ce.v$.Content}`)}s9(){const t=this.getComponent(Ye.r.SlideTitle);t&&t.setFooterElement(this.footer)}setIsPinnedTitle(t){const i=this.getComponent(Ye.r.SlideTitle);i&&i.setIsPinnedTitle(t)}c9(t,i){const e=this.getComponent(Ye.r.PlayspaceProgressBar);e&&e.resizeProgressBar(t,i)}Aa(t,i,e){switch(this.i6(t),t){case Ri.C[Ri.C.Mute]:this.mediator.publish(this,Ri.C[Ri.C.Volume],{payload:0});break;case Ri.C[Ri.C.Unmute]:this.mediator.publish(this,Ri.C[Ri.C.Volume],{payload:1});break;case Ye.r[Ye.r.CloseButton]:case Ye.r[Ye.r.PinnedCloseButton]:this.mediator.publish(this,Ri.C[Ri.C.Close]);break;case Ye.r[Ye.r.MoreButton]:const e={holdPause:!0};this.l9.toggleContextMenu(Ye.r.PlayspaceSettingsMenu,e);break;case Ri.C[Ri.C.AboutClick]:this.globalDomUtilsService.open(l.br,_e.bS.Blank);break;case Ri.C[Ri.C.Quality]:i.payload&&this.mediator.publish(this,Ri.C[Ri.C.Quality],{payload:i.payload});break;case Ye.r[Ye.r.UpNextButton]:this.mediator.publish(this,Ri.C[Ri.C.Next]);break;case Ye.r[Ye.r.PreviousButton]:this.mediator.publish(this,Ri.C[Ri.C.Prev]);break;case Y.CallToAction:(0,a.QM)(i.payload)?this.mediator.publish(this,Y.CallToAction,i):this.mediator.publish(this,Ri.C[Ri.C.Next]);break;default:this.mediator.publish(this,t,i)}}i6(t){switch(t){case Y.CallToAction:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.UrlClick});break;case le.Z[le.Z.Scroll]:return;case Ye.r[Ye.r.VolumeButton]:case Ye.r[Ye.r.VolumeProgress]:case Ye.r[Ye.r.VolumeControls]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.VolumeClick});break;case Ye.r[Ye.r.PlayButton]:case Ye.r[Ye.r.BigPlayButton]:case Ye.r[Ye.r.ClickToPlayButton]:case Ri.C[Ri.C.Play]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.PlayClick});break;case Ri.C[Ri.C.Pause]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.PauseClick});break;case Ri.C[Ri.C.Next]:case Ye.r[Ye.r.UpNextButton]:case Ye.r[Ye.r.UpNextBox]:case le.Z[le.Z.TapRight]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.NextClick});break;case Ri.C[Ri.C.Prev]:case Ye.r[Ye.r.PreviousButton]:case le.Z[le.Z.TapLeft]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.PreviousClick});break;case Ri.C[Ri.C.Mute]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.MuteClick});break;case Ri.C[Ri.C.Unmute]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.UnmuteClick});break;case Ri.C[Ri.C.Close]:case Ye.r[Ye.r.CloseButton]:case Ye.r[Ye.r.PinnedCloseButton]:this.mediator.publish(this,Y.GeneralClickInteraction,{payload:e.ProtoMediaClickTypeEnum.CloseClick})}}o9(){const t=[],i=this.u9();i&&t.push({instance:i,linkedComponent:this.getComponent(Ye.r.MoreButton),name:Ye.r.PlayspaceSettingsMenu}),this.l9=new ir(t)}a9(){this.settings.isMobile&&this.p9(),this.interactionService.register(this.$uiContainer,this,this.interactionService,{},[ue.WR.Hold,ue.WR.Swipe]);const t=this.interactionService.getNonInterruptibleInteractions();Object.keys(le.Z).filter((t=>isNaN(parseInt(t,10)))).forEach((i=>{this.subscribe(i,this.interactionService,(e=>{const s=!t.includes(le.Z[i]);if(this.autoHideHandler&&s){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.i6(i),this.mediator.publish(this,i,e)}))}))}p9(){this.autoHideHandler=new Zn(this.$container)}r9(){const t=`id_${this.Yr}`;this.$uiContainer.id=t;const{bodyFontFamily:i,titleFontFamily:e}=this.h1(),s=`\n            #${t} .${_t.iu.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${t} .${_t.iu.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n            #${t} .${_t.iu.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${t} .${_t.iu.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${t} .${_t.iu.TitleComponent}.${_t.iu.TitleLink}:${this.settings.isMobile?"active":"hover"} .${js.Text} {\n                background-color: ${(0,P.Xf)(this.settings.accentColorList.background,this.i9)}\n            }\n            #${t} .${_t.iu.SlideProgressBar} .${_t.iu.ProgressFill}.${_t.iu.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:_t.QO.Icons}\n            }\n            #${t} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${t} .${_t.ed.InheritTitleFontFamily} {\n                font-family: ${e} !important;\n            }\n            #${t} .${_t.ed.InheritBodyFontFamily} {\n                font-family: ${i} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(s)}h1(){const{bodyFontFamily:t,titleFontFamily:i}=this.settings.fontFamilySettings;return(0,a.QM)(t)&&(0,a.QM)(i)?this.settings.fontFamilySettings:{titleFontFamily:(0,I.nw)(this.$container),bodyFontFamily:(0,I.fj)(this.$container)}}h9(){this.f9()&&this.hideExpandButton()}f9(){return this.m9()||!this.g9()}m9(){return this.settings.os===xi.M.Ios}g9(){return!0===this.settings.expandButtonEnabled}v9(t={}){const i=this.getComponent(Ye.r.CtaButton);i&&(0,a.QM)(t.label)&&i.changeLabel(t.label)}hideExpandButton(){this.u9().hideExpandButton()}showExpandButton(){this.u9().showExpandButton()}u9(){return this.getComponent(Ye.r.PlayspaceSettingsMenu)}Z5(t=[]){this.Y5.setCapabilityList(t)}t6(t=!0){const{excludedComponents:i,includedComponents:e}=this.Y5.getComponentList();i.map((t=>this.getComponent(t))).forEach((i=>i&&i.hideComponent(t))),e.map((t=>this.getComponent(t))).forEach((i=>i&&i.showComponent(t)))}updateQualityMenu(t){const i=this.getComponent(Ye.r.PlayspaceSettingsMenu);i&&i.updateQualityMenu(t)}updateQuality(t){const i=this.getComponent(Ye.r.PlayspaceSettingsMenu);i&&i.updateQuality(t)}setTotalSlides(t,i){var e;const s=this.getComponent(Ye.r.PlayspaceProgressBar);s&&s.setSlides(t),null===(e=this.getComponent(Ye.r.TotalDurationLabel))||void 0===e||e.setTime(i)}setDuration(t){const i=this.getComponent(Ye.r.PlayspaceProgressBar);i&&(i.setDuration(t),this.currentState.updateDuration())}setCurrentIndex(t){const i=this.getComponent(Ye.r.PlayspaceProgressBar);i&&i.setCurrentIndex(t)}updateVolume(t){const i=this.getComponent(Ye.r.VolumeButton);i&&i.setState(t>0?tr.u.Unmute:tr.u.Mute)}expand(){this.u9().setExpand()}collapse(){this.u9().setCollapse()}onResizeUi(t,i){this.l9.closeAllContextMenus(),this.c9(t,i)}onFirstTimeInView(){const t=this.getComponent(Ye.r.TopTitle);t&&t.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(t){(0,I.SH)(this.d0,t)}get $mediaContainer(){return this.d0}onSlideTransitionStart(t){const i=this.getComponent(Ye.r.PlayspaceProgressBar);i&&i.pauseProgress(),this.Z5(t),this.t6(),this.e9.forEach((i=>{const e=this.getComponent(i);e&&e.onSlideTransitionStart&&e.onSlideTransitionStart(t)}))}onSlideTransitionEnd(){this.e9.forEach((t=>{const i=this.getComponent(t);i&&i.onSlideTransitionEnd&&i.onSlideTransitionEnd()}))}onSlideTimeUpdate(t,i,e){this.e9.forEach((e=>{const s=this.getComponent(e);s&&s.onSlideTimeUpdate&&s.onSlideTimeUpdate(t,i)}));const s=this.getComponent(Ye.r.ElapsedTimeLabel);null==s||s.setTime(e/ht.s_)}updateCapabilityMetadata(t){if(t.type===ae.CtaButton)this.v9(t.metadata)}get footer(){return this._2}destroy(){this.interactionService.unregisterAll(this),this.unsubscribeAll(this),super.destroy()}getComponent(t){return super.getComponent(t)}}class hr{constructor(t,i){this.n2=t,this.y9=i}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps ${this.b9()}">\n            [[${Ye.r.OverlayComponent}]]\n            <cnx class="${ce.v$.Content}">\n                [[${Ye.r.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                        ${this.I9()}\n                        <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                            <cnx class="cnx-ui-ps-branding">\n                                [[${Ye.r.TopTitle}]]\n                            </cnx>\n                            <cnx class="cnx-ui-ps-btns">\n                                <cnx class="cnx-ui-btn ${_t.s6.ContextController}">[[${Ye.r.MoreButton}]]</cnx>\n                                <cnx class="cnx-ui-btn cnx-close-button">[[${Ye.r.CloseButton}]]</cnx>\n                            </cnx>\n                        </cnx>\n                    </cnx>\n                    <cnx class="cnx-ui-ps-center cnx-ui-ps-side-mg">\n                        ${this.w9()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg">\n                        ${this.S9()}\n                        ${this.A9()}\n                    </cnx>\n                    [[${Ye.r.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${ce.v$.Footer}">\n                ${this.x9()}\n            </cnx>\n            [[${Ye.r.Loader}]]\n        </cnx>\n        `.trim()}I9(){return this.y9?"":this._9()}S9(){if(!this.y9)return"";return this._9(!0)}w9(){if(!this.y9)return"";return this.C9(!1)}A9(){return this.y9?"":this.C9()}_9(t=!1){const i=this.n2.disableStoryProgressBarRendering?"":`[[${Ye.r.PlayspaceProgressBar}]]`,e=t?`<cnx class="cnx-ui-btn">[[${Ye.r.VolumeButton}]]</cnx>`:"";return`<cnx class="cnx-ui-ps-nav ${this.y9?"cnx-ui-ps-video-progress-bar":"cnx-ui-ps-top-progress-bar"}">\n        ${e}\n        ${this.k9(Ye.r.ElapsedTimeLabel)}\n        ${i}\n        ${this.k9(Ye.r.TotalDurationLabel)}\n        </cnx>`}k9(t){return this.n2.disableStoryProgressBarRendering||!this.y9?"":`[[${t}]]`}get E9(){return this.n2.isPinned?`<cnx class="cnx-ui-btn cnx-pinned-close-button">[[${Ye.r.PinnedCloseButton}]]</cnx>`:""}x9(){const t=this.n2.disableTitleRendering?"":`[[${Ye.r.SlideTitle}]]`;return`<cnx class="cnx-ui-ps-content cnx-ui-ps-side-mg">\n            ${this.E9}\n            ${t}\n        </cnx>`}C9(t=!0){const i=t?`<cnx class="cnx-ui-btn">[[${Ye.r.VolumeButton}]]</cnx>`:"";return`<cnx class="cnx-ui-ps-controls--wrapper">\n        <cnx class="cnx-ui-ps-controls">\n            <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${Ye.r.PreviousButton}]]</cnx>\n            <cnx class="cnx-ui-btn">[[${Ye.r.PlayButton}]]</cnx>\n            <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${Ye.r.UpNextButton}]]</cnx>\n            ${i}\n        </cnx>\n    </cnx>`}b9(){return this.y9?ce.w.VideoLayout:""}}var cr=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class dr extends kt.ai{constructor(t,i,e,s,n,r,o){super(),this.mediator=t,this.nr=i,this.SJ=e,this.nz=s,this.Sl=n,this.l4=r,this.M9=o,this.aF=new de.t(T.ProtoPlayspaceMediaMetadataResponse,"PlayspaceContentHandler"),this.L9=0,this.R9=!1,this.fK=new ci.X(!1),this.B9=new ci.X(!1),this.O9=t=>{t&&(this.DX.onFirstTimeInView(),this.Sl.services.ViewabilityService.off(this.l4,this.O9))},this.D9()}KV(t){return new Promise(((i,e)=>{this.aF.fetchMetadata(t).then((t=>{if(window.parent.cnx_ps_slide_list&&(0,j.Ph)("cnx_ps_slide_list",this.Sl.config.pageUrl)&&(t.slides=[...window.parent.cnx_ps_slide_list,...t.slides]),(0,a.$K)(this.nz.slideOrdering)&&(t.order=this.nz.slideOrdering),t.slides=this.reOrderSlides(t.slides,t.order),t.slides=this.N9(t.slides),t.slides=this.F9(t.slides),t.slides.length>=2)i(t);else{if(this.R9)return void e({message:"fallbackstory_already_used"});this.R9=!0,this.V9().then((t=>{const e=this.Sl.services.UrlSuffixerService.appendParamsToUrl(`${f.n.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`);i(this.KV(e))})).catch((t=>{(0,S.nF)({level:S.D_.CRITICAL,message:"PlayspaceContentH_error_getting_default_story",sessionId:this.Sl.config.sessionId}),e(t)}))}})).catch((t=>{e(t)}))}))}V9(){return new Promise(((t,i)=>{this.j9&&t(this.j9),H.n.sendProtoRequest({protoResponse:T.ProtoFallbackStoryResponse,endpoint:f.n.endPoints.api.fallbackstory,queryParams:{[l.cc]:f.n.tier},shouldLogErrors:!0}).then((i=>{this.j9=i,t(i)})).catch((t=>{i(t)}))}))}N9(t){const i=["newsid"],{hostname:e,pathname:s,search:n}=this.U9(this.Sl.config.appPageURL),r={};(0,a.QM)(n)&&i.forEach((t=>{n.indexOf(t)>-1&&(r[t]=(0,j.Ph)(t,n))}));let o=`${e}${s}`;return Object.keys(r).forEach((t=>{o=(0,j.Bp)(o,t,r[t])})),t.filter((t=>{const i=(0,P.bx)(t.clickUrl);return!(i&&i.hostname+i.pathname===o)}))}U9(t){const{hostname:i,pathname:e,search:s}=(0,a.QM)(t)?(0,P.bx)(t):this.nr.getGlobalLocationProperties();return{hostname:i,pathname:e,search:s}}F9(t){return t.filter((t=>t.type!==T.ProtoPlayspaceSlideTypeEnum.Stock))}reOrderSlides(t,i){const e=(t,i)=>t.title.localeCompare(i.title)>=0?1:-1;switch(i){case T.ProtoPlayspaceSlideOrderEnum.Random:return t.map((t=>({value:t,sort:Math.random()}))).sort(((t,i)=>t.sort-i.sort)).map((({value:t})=>t));case T.ProtoPlayspaceSlideOrderEnum.AlphabeticalAscending:return t.sort(((t,i)=>e(t,i)));case T.ProtoPlayspaceSlideOrderEnum.AlphabeticalDescending:return t.sort(((t,i)=>-1*e(t,i)));default:return t}}q9(){const{browserType:t}=this.Sl.config.browser,{os:i,osVersion:s}=this.Sl.config.os;this.D4=new Qn(this,this.nr,this.Sl.services.PageFocusService,this.DX.$mediaContainer,new qn(this.Sl,this.nr,this.Sl.services.InteractionService,this.SJ,this.nz.soundMode===e.ProtoPlayerSoundMode.On?1:0,{browser:t,os:i,osVersion:s},this.Sl.config.isMobile,this.DX.footer,this.nz,Xn(this.H9.slides)),this.nz.isSeoTraffic,this.H9.slides)}D9(){this.z9={logoUrl:this.nz.logoUrl,isMobile:this.Sl.config.isMobile,isPinned:this.nz.floatingSettings.isPinnedPlayerFloating&&this.nz.floatingSettings.floatingMode===e.ProtoPlayerFloatingMode.Always,closeButtonMode:this.nz.closeButtonMode,floatingCloseButtonMode:this.nz.floatingSettings.floatingCloseButtonMode,isCloseButton:this.nz.isCloseButton,sharingDestinations:this.nz.sharingDestinations,os:this.Sl.config.os.os,expandButtonEnabled:this.nz.uiComponentsVisibility.expandButton,primaryColorList:{background:this.nz.primaryColorList.background||_t.QO.PrimaryBackground,foreground:this.nz.primaryColorList.foreground||_t.QO.PrimaryForeground},secondaryColorList:{background:this.nz.secondaryColorList.background||_t.QO.SecondaryBackground,foreground:this.nz.secondaryColorList.foreground||_t.QO.SecondaryForeground},accentColorList:{background:this.nz.accentColorList.background,foreground:this.nz.accentColorList.foreground||_t.QO.AccentForeground},useAccentColorForProgressBar:this.nz.useAccentColorForProgressBar,disableClickUrl:this.nz.disableClickUrl,fontFamilySettings:this.nz.fontFamilySettings}}PK(t){const i=this.nz.useVideoProgressBar&&t,s=new hr({disableStoryProgressBarRendering:this.nz.disableStoryProgressBarRendering,disableTitleRendering:this.nz.disableTitleRendering,isPinned:this.nz.floatingSettings.isPinnedPlayerFloating},i);this.DX=new ar(this,this.l4,this.Sl.services.GlobalDomUtilsService,this.Sl.services.ResizeObserver,s.template,this.z9,this.Sl.config.appId,this.nz.playbackMode===e.ProtoPlayerPlaybackModeEnum.ClickToPlay?z.Ez.StoppedState:z.Ez.PausedState,this.Sl.services.InteractionService),this.B9.next(!0),this.DX.setMediaContainerRatio(this.M9.getContentRatioContainer()),this.DX.show()}Pu(){this.subscribe(tt,this.D4,(({payload:{nextSlide:t}})=>{const i=t;let s=[];i.media.type===e.ProtoMediaTypeEnum.Video&&(s=i.media.getAvailableQualities(),this.DX.updateQuality(i.media.currentQuality)),this.DX.updateQualityMenu(s),this.DX.onSlideTransitionStart(i.slideCapabilityList),i.onSlideTransitionStart(i.slideCapabilityList)})),this.subscribe(et,this.D4,(()=>{this.DX.onSlideTransitionEnd()})),this.subscribe(st,this.D4,(({payload:{elapsedTime:t,duration:i,totalElapsedTime:e}})=>{this.DX.onSlideTimeUpdate(t,i,e)})),this.subscribe(it,this.D4,(({payload:{index:t}})=>{this.DX.setCurrentIndex(t),this.DX.setDuration(this.D4.remainingTime),this.mediator.publish(this,K.ChangeSlide)})),this.subscribe(nt,this.D4,(()=>{this.yK.handleSlidesEnd()})),this.subscribe(z.XQ.Change,this.D4,(({payload:t})=>{const i=this.D4.getCurrentSlide();i&&i.media.type===e.ProtoMediaTypeEnum.Video&&this.DX.updateQuality(i.media.currentQuality),this.mediator.publish(this,z.XQ.Change,{payload:t})})),this.subscribe(Ri.C[Ri.C.Play],this.DX,(()=>{this.mediator.publish(this,J.Uh.UserInteraction,{payload:{playback:!0}});this.play(!0)})),this.subscribe(Ri.C[Ri.C.Pause],this.DX,(()=>{this.mediator.publish(this,J.Uh.UserInteraction,{payload:{playback:!1}});this.pause(!0)})),this.subscribe(Ri.C[Ri.C.Volume],this.DX,(({payload:t})=>{this.volume=t,this.mediator.publish(this,J.Uh.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,Ri.C[Ri.C.Volume],{payload:{volume:t}})})),this.subscribe(Ri.C[Ri.C.Close],this.DX,(()=>{this.mediator.publish(this,J.Uh.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,Ri.C[Ri.C.Close])})),this.subscribe(Ri.C[Ri.C.LogoClicked],this.DX,(()=>{this.mediator.publish(this,Ri.C[Ri.C.LogoClicked])})),this.subscribe(Y.ProgressBarItemClicked,this.DX,(({payload:t})=>{this.mediator.publish(this,J.Uh.UserInteraction,{payload:{playback:!0}}),this.setSlide(t),this.mediator.publish(this,Y.ProgressBarItemClicked,{payload:t})})),this.subscribe(Y.CallToAction,this.D4,(()=>{this.mediator.publish(this,Y.CallToAction)})),this.subscribe(Ri.C[Ri.C.Expand],this.DX,(()=>{this.mediator.publish(this,Ri.C[Ri.C.Expand])})),this.subscribe(Ri.C[Ri.C.Collapse],this.DX,(()=>{this.mediator.publish(this,Ri.C[Ri.C.Collapse])})),this.subscribe(le.Z[le.Z.HoldStart],this.DX,(()=>{this.yK.pauseToggle()})),this.subscribe(le.Z[le.Z.HoldEnd],this.DX,(()=>{this.yK.pauseToggle()})),this.subscribe(le.Z[le.Z.TapLeft],this.DX,(()=>{this.W9(),this.goToPrevSlide()})),this.subscribe(le.Z[le.Z.TapRight],this.DX,(()=>{this.W9(),this.goToNextSlide()})),this.subscribe(le.Z[le.Z.SwipeEnd],this.DX,(({payload:t})=>{t===ue.Av.Left?this.yK.goToNextSlide():this.yK.goToPrevSlide()})),this.subscribe(le.Z[le.Z.SwipeMove],this.DX,(({payload:t})=>{this.D4.offsetSlides(t)})),this.subscribe(Ri.C[Ri.C.Quality],this.DX,(({payload:t})=>{this.D4.setQuality(t)})),this.subscribe(Ri.C[Ri.C.Next],this.DX,(()=>{this.W9(),this.goToNextSlide()})),this.subscribe(Ri.C[Ri.C.Next],this.D4,(()=>{this.W9(),this.goToNextSlide()})),this.subscribe(Ri.C[Ri.C.Prev],this.DX,(()=>{this.W9(),this.goToPrevSlide()})),this.relay(Y.GeneralClickInteraction,this.DX,this,this.mediator),this.relay(Y.GeneralClickInteraction,this.D4,this,this.mediator)}G9(t,i){const e=(0,a.QM)(t)?t:this.nz.storyId,s=(0,a.QM)(i)?i:this.nz.activeVersion;return this.Sl.services.UrlSuffixerService.appendParamsToUrl(`${f.n.endPoints.base.metadata}${e}/${s}.bin`)}X9(){return cr(this,void 0,void 0,(function*(){if((0,a.$K)(this.nz.storyMetadata))return this.nz.storyMetadata;{let{storyId:t,activeVersion:i}=this.nz;const e=(0,j.Ph)("cnx_force_fallback",this.Sl.config.pageUrl);e&&(t="00000000-0000-0000-0000-000000000002",i=e);const s=this.G9(t,i);return(0,a.QM)(i)?this.KV(s).catch((()=>this.Q9())):this.Q9()}}))}Q9(){return cr(this,void 0,void 0,(function*(){return this.V9().then((t=>{const i=this.Sl.services.UrlSuffixerService.appendParamsToUrl(`${f.n.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`);return this.KV(i)})).then((t=>(this.R9=!0,t)))}))}floatingChanged(t){this.DX.setIsPinnedTitle(t)}J9(){this.D4.start(this.Sl.config.sessionId),this.DX.setTotalSlides(this.H9.slides.length,this.D4.totalSlidesDurationSeconds);const t=this.nz.storyPosition&&this.nz.storyPosition<this.H9.slides.length?this.nz.storyPosition:0;this.D4.setCurrentSlide(t),this.mediator.publish(this,Z.ContentHandlerReady),this.fK.next(!0)}Y9(t,i){i.slides=i.slides.map(((t,e)=>Object.assign(Object.assign({},t),{slideIndex:e,storyName:i.storyName,storyTitle:i.storyTitle,publisherName:this.nz.publisherName}))),this.H9=Object.assign(Object.assign({},t),i)}K9(){return cr(this,void 0,void 0,(function*(){try{let t=this.nz.storyId,i=this.nz.activeVersion;if(this.R9){const e=yield this.V9();t=e.storyId,i=e.activeVersionId}const e=yield It.k.loadInsights({insightsInputType:Pt.i.Story,id:t,versionId:i});return{storyId:t,activeVersion:i,insights:e}}catch(t){return{}}}))}xK(){const{preRollBreak:t,postRollBreak:i}=this.nz,e=(0,a.r)(t),s=(0,a.r)(i);this.yK=new Kn(this,this.D4,this.DX,e,s,this.nz.endOfSlideCycleMode,null!==this.nz.storyPosition),this.Z9()}Z9(){this.subscribe(Jn,this.yK,(({payload:t})=>{this.DX.changeState(t);const i=this.D4.getCurrentSlide();i&&i.changeState(t),this.mediator.publish(this,Z.StateChanged,{payload:t})})),this.subscribe(Yn,this.yK,(()=>{this.mediator.publish(this,Z.NewStory)})),this.relay([Z.ContentStart,Z.ContentEnd],this.yK,this,this.mediator)}W9(){this.mediator.publish(this,J.Uh.UserInteraction,{payload:{playback:!0}})}set hasPostroll(t){this.yK.hasPostroll=t}set hasPreroll(t){this.yK.hasPreroll=t}setViewabilityState(t){this.yK.setViewabilityState(t)}goToNextSlide(){this.yK.goToNextSlide()}goToPrevSlide(){this.yK.goToPrevSlide()}getNextSlide(){return this.D4.getNextSlide()}getCurrentThumbnailUrlParams(t,i){return this.D4.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.D4.getCurrentMetadata()}getCurrentStoryMeta(){return this.H9}start(){return cr(this,void 0,void 0,(function*(){try{const t=yield this.X9(),i=yield this.K9();this.Y9(i,t)}catch(t){(0,S.nF)({message:"PlayspaceContentH_error_fetchMetadata",level:S.D_.CRITICAL,exception:t.message,callStack:t.stack,sessionId:this.Sl.config.sessionId})}const t=!Xn(this.H9.slides);this.PK(t),this.q9(),this.xK(),this.volume=this.nz.soundMode===e.ProtoPlayerSoundMode.On?1:0,this.Pu(),this.Sl.services.ViewabilityService.on(this.l4,this.O9,{threshold:.5}),this.J9()}))}get volume(){return this.L9}set volume(t){this.L9=t,this.D4.setVolume(t),this.DX.updateVolume(t)}play(t){this.yK.play(t)}pause(t){this.yK.pause(t)}show(){this.yK.show()}hide(){this.yK.hide()}enterFullscreen(){this.DX.expand()}exitFullscreen(){this.DX.collapse()}setSlide(t){this.play(!1),this.yK.setCurrentSlide(t)}onResize(){this.D4.onPlayerContainerResize(),this.DX.onResizeUi(this.D4.remainingTime,this.D4.isPlaying)}get currentSlideIndex(){return this.D4.currentSlideIndex}get slides(){return this.D4.slides}updateCtaLabel(t,i){const e={type:ae.CtaButton,metadata:{label:i}};this.D4.updateCapabilityMetadata(t,e),t===this.D4.currentSlideIndex&&this.DX.updateCapabilityMetadata(e)}get storyName(){return this.D4.slidesMetadata[0].storyName}get slidesMetadata(){return this.D4.slidesMetadata}toggleExpandButton(t){t?this.DX.showExpandButton():this.DX.hideExpandButton()}getQuality(){return this.D4.getQuality()}setQuality(t){const i={height:t,quality:z.ZH.Strict};this.D4.setQuality(i)}stop(){this.yK&&this.yK.stop()}resume(){this.yK&&this.yK.resume()}startContent(){this.yK.exitRollBreak()}canPlay(){return this.fK.asObservable()}onReady(){return this.B9.asObservable()}destroy(){this.D4&&this.D4.destroy(),this.DX&&this.DX.destroy()}get mediaContainer(){return this.DX.$mediaContainer}preloadDependencies(){return cr(this,void 0,void 0,(function*(){Promise.resolve()}))}}class lr{constructor(t,i,e,s){this.mediator=t,this.Tr=i,this.t8=e,this.ls=s,this.i8={current:null,previous:null},this.e8={current:null,previous:null},this.s8=!1}setFloatingModule(t){this.n8=t}start(t){this.ST=t,this.r8(this.Tr.orientation),this.o8(this.Tr.orientation)}forceOrientation(t){this.s8=!1,this.setMainOrientation(t),this.setPlayerClassByOrientation(t),this.s8=!0}setPlayerClassByOrientation(t=this.Tr.orientation){this.r8(t),this.i8.previous&&this.i8.current===this.i8.previous||(this.h8(this.t8),this.i8.previous=this.i8.current,this.mediator.publish(this,ji[ji.PlayerOrientationChange],{payload:this.i8.current}))}setMainOrientation(t=this.Tr.orientation){this.o8(t),this.e8.previous&&this.e8.previous===this.e8.current||(this.e8.previous=this.e8.current,this.mediator.publish(this,ji[ji.MainOrientationChange],{payload:this.e8.current}))}get playerOrientation(){return this.i8.current}get mainOrientation(){return this.e8.current}shouldChangeMainOrientation(){return!this.vu()}r8(t){this.i8.current=this.pz(t)}o8(t){this.e8.current=this.c8(t)}pz(t){return this.vu()?T.ProtoPlayerOrientationEnum.Landscape:this.s8?this.e8.current:t===T.ProtoPlayerOrientationEnum.Mixed?this.d8():t}c8(t){return this.s8?this.e8.current:t===T.ProtoPlayerOrientationEnum.Mixed?this.d8():t}vu(){return this.n8&&this.n8.isInFloating}d8(){return this.ls.getViewportWidth()<this.Tr.orientationBreakpoint?T.ProtoPlayerOrientationEnum.Portrait:T.ProtoPlayerOrientationEnum.Landscape}h8(t){this.i8.previous?(0,I.L_)(this.ST,t(this.i8.previous),t(this.i8.current)):(0,I.cn)(this.ST,t(this.i8.current))}}class ur{constructor(t){this.nr=t,this.l8=[]}createRatioContainer(t){const i=this.u8();return this.l8.push(i),this.setRatio(t),i}setRatio(t){this.p8=t,this.f8()}u8(){return this.nr.createElementByString(`<cnx class='${_t.oV}'></cnx>`)}f8(){this.l8.forEach((t=>{(0,I.T7)(t,{"padding-bottom":`${this.p8}%`})}))}}class pr{constructor(t,i){this.m8={width:1,height:1},this.g8=t,this.v8=i}start(t){this.y8(t)}getComputedPlayspaceRatio(t){return this.b8(t)/this.I8(t)*100}getComputedContentRatio(t){return this.w8(t)/this.S8(t)*100}y8(t){this.A8=t}I8(t){if(t===T.ProtoPlayerOrientationEnum.Landscape){if(!this.A8.clientWidth)return this.g8.width;const t=this.x8();return this.A8.clientWidth/t}return this.v8.width}b8(t){if(t===T.ProtoPlayerOrientationEnum.Landscape){if(!this.A8.clientWidth)return this.g8.height;return this._8()/this.x8()}return this.v8.height}_8(){return this.g8.height/this.g8.width*this.A8.clientWidth+72}x8(){const t=this._8();return(0,Oi.aX)(this.A8.clientWidth,t)}S8(t){return t===T.ProtoPlayerOrientationEnum.Landscape?this.g8.width:this.m8.width}w8(t){return t===T.ProtoPlayerOrientationEnum.Landscape?this.g8.height:this.m8.height}}class fr extends kt.ai{constructor(t,i,e,s,n){super(),this.mediator=t,this.Tr=i,this.nr=n,this.T8(),this.C8=new pr(e,s),this.k8=new ur(n),this.E8=new ur(n)}setFloatingModule(t){this.M8.setFloatingModule(t),this.setRatio()}start(t,i){this.M8.start(t),this.C8.start(i)}getPlayspaceRatioContainer(){return this.k8.createRatioContainer(this.L8())}getContentRatioContainer(){return this.E8.createRatioContainer(this.B8())}setRatio(t=!1){this.M8.setPlayerClassByOrientation(),(t||this.M8.shouldChangeMainOrientation())&&(this.M8.setMainOrientation(),this.k8.setRatio(this.L8())),this.E8.setRatio(this.B8())}getOrientation(){return this.M8.playerOrientation}setOrientation(t){this.M8.forceOrientation(t),this.k8.setRatio(this.L8()),this.E8.setRatio(this.B8())}T8(){this.M8=new lr(this,this.Tr,this.t8,this.nr),this.subscribe(ji[ji.PlayerOrientationChange],this.M8,(({payload:t})=>{this.mediator.publish(this,ji[ji.PlayerOrientationChange],{payload:t})})),this.subscribe(ji[ji.MainOrientationChange],this.M8,(({payload:t})=>{this.mediator.publish(this,ji[ji.MainOrientationChange],{payload:t})}))}L8(){const t=this.M8.mainOrientation;return this.C8.getComputedPlayspaceRatio(t)}B8(){const t=this.M8.playerOrientation;return this.C8.getComputedContentRatio(t)}t8(t){return t===T.ProtoPlayerOrientationEnum.Portrait?ce.w.OrientationPortrait:ce.w.OrientationLandscape}}var mr=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,a)}h((s=s.apply(t,i||[])).next())}))};class gr extends Vi{constructor(){super(...arguments),this.eX=[],this.Dz=Bt,this.Nz=_t.vF,this.Yz=288,this.O8=!1,this.D8=!1,this.g8={width:16,height:9},this.v8={width:4,height:5},this.events=Object.assign({},ot),this.N8=()=>{const t=this.F8(this.kU.getCurrentStoryMeta());this.O8=!0,this.V8(t),this.j8(),this.UH.updateStoryTimeline(this.getStoryTimeline()),this.U8(),this.mX(),this.nz.adPlaybackMode===T.ProtoAdPlaybackMode.Autoplay&&this.nz.playbackMode!==T.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.nz.preRollBreak&&this.OH(T.ProtoAdSlotsEnum.MidRoll),this.mediator.publish(this,ot.Ready)},this.j8=()=>{var t;this.D8&&(this.D8=!1,this.AD()),null===(t=this.adHandler)||void 0===t||t.onLinearUiComponentEvent.subscribe((t=>{if(t.type===Ri.C.Volume){const{volume:i}=t.payload;this.gD(i),this.kU.volume=i}}))}}bH(){const t={orientation:this.nz.orientation,orientationBreakpoint:this.nz.orientationBreakpoint};this.z8=new fr(this,t,this.g8,this.v8,this.app.services.GlobalDomUtilsService),this.subscribe(ji[ji.PlayerOrientationChange],this.z8,(({payload:t})=>{this.mediator.publish(this,ot.LayoutChanged,{payload:Q.LayoutEnum[T.ProtoPlayerOrientationEnum[t]]})})),this.subscribe(ji[ji.MainOrientationChange],this.z8,(({payload:t})=>{switch(t){case T.ProtoPlayerOrientationEnum.Landscape:(0,I.aQ)(this.$experienceContainer,"maxWidth");break;case T.ProtoPlayerOrientationEnum.Portrait:(0,I.T7)(this.$experienceContainer,{maxWidth:Bt[this.app.config.device].lg-1+"px"})}}))}W8(t){this.z8.setFloatingModule(t)}setFloatingSettings(t){super.setFloatingSettings(t),this.kU.floatingChanged(this.nz.floatingSettings.isPinnedPlayerFloating)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${_t.sN.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${ce.v$.Container}"></cnx>`),this.z8.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.z8.setRatio(),this.G8()}G8(){this.X8=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${ce.v$.ImageWrapper} ${ce.v$.ImageBackground}"></cnx>`),this.$playerWrapper.appendChild(this.X8)}Q8(){return this.kU.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}J8(){const t=this.Q8();if(!t)return;const{imageUrl:i,altText:e,width:s,height:n,queryParams:r}=t,o=this.gH.getImage(i,e,s,n,r,!0);o&&(o.className=_t.sN.ImagePlaceholder,this.Y8&&this.X8.removeChild(this.Y8),this.X8.appendChild(o),this.Y8=o,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(i))}K8(){this.uH&&this.uH.canFloat()&&this.J8()}Z8(t=!1){this.X8&&(t?(0,I.cn)(this.X8,ce.v$.MediaLogo):(0,I.IV)(this.X8,ce.v$.MediaLogo))}addPlayerSize(){const t=this.z8.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(t),(0,I.cn)(this.$playerWrapper,_t.Ig.Responsive)}handleClose(){this.vu()&&this.nz.floatingSettings.floatingMode!==e.ProtoPlayerFloatingMode.Always?(this.uH.destroy(!0),0!==this.kU.volume&&this.setVolume(0)):this.triggerDestroy()}getVolume(){return this.kU.volume}setNewVolume(t){super.setNewVolume(t),this.kU.volume=t,this.gD(t)}destroy(){var t;super.destroy(),null===(t=this.AX)||void 0===t||t.destroy(),this.kU&&this.kU.destroy(),(0,Mt.i)(this.eX)}dX(){this.kU=new dr(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.nz,this.app,this.$playerContainer,this.z8),this.subscribe(Z.ContentHandlerReady,this.kU,this.N8),this.nz.isCloseButton&&this.subscribe(Ri.C[Ri.C.Close],this.kU,(()=>{this.mediator.publish(this,ot.CloseButtonClicked),this.handleClose()})),this.subscribe(Ri.C[Ri.C.Volume],this.kU,(({payload:{volume:t}})=>{this.gD(t),this.adHandler&&this.adHandler.setLinearVolume(t)})),this.subscribe(Z.StateChanged,this.kU,(({payload:t})=>{var i;this.cl.playerState=t,null===(i=this.AX)||void 0===i||i.changeState(t),this.MX(t),t===z.Ez.PlayingState&&this.Fz(),this.t7(t)})),this.subscribe(K.ChangeSlide,this.kU,(()=>{this.UH.slideChanged(this.getStoryPosition());const t=this.i7();if(this.J8(),this.uH&&this.uH.canFloat()){const i=t&&t.mediaContext===T.ProtoMediaContextEnum.Logo;this.Z8(i)}this.cl.currentMediaMetadata=this.e7(),this.mediator.publish(this,ot.ChangeSlide,{payload:t})})),this.subscribe(Z.NewStory,this.kU,(()=>{this.qH(),this.U8()})),this.subscribe(Z.ContentStart,this.kU,(()=>{this.lB.mediaQuartile.next({quartile:$t.y.Start}),this.mediator.publish(this,ot.ContentStart,{payload:this.getStorySlidesMetadata()})})),this.subscribe(Z.ContentEnd,this.kU,(()=>{this.lB.mediaQuartile.next({quartile:$t.y.Fourth}),this.mediator.publish(this,ot.ContentComplete,{payload:this.getStorySlidesMetadata()})})),this.uH&&this.subscribe(J.Uh.UserInteraction,this.kU,(({payload:t})=>this.lH(t))),this.subscribe(Y.ProgressBarItemClicked,this.kU,(({payload:t})=>{this.mediator.publish(this,ot.ProgressBarItemClicked,{payload:this.s7(t)})})),this.subscribe(Y.CallToAction,this.kU,(()=>{this.mediator.publish(this,ot.CallToAction,{payload:this.i7()})})),this.subscribe(Ri.C[Ri.C.LogoClicked],this.kU,(()=>{this.mediator.publish(this,ot.BrandingClicked)})),this.subscribe(z.XQ.Change,this.kU,(({payload:t})=>{this.J1!==t&&(this.J1=t,this.mediator.publish(this,ot.QualityChanged,{payload:t}))})),this.subscribe(Y.GeneralClickInteraction,this.kU,(({payload:t})=>{this.lB.mediaClick.next({type:Ft.EN.fromProtoGetMediaClickType(t)})}))}pX(t,i){const{preRollBreak:e,postRollBreak:s}=this.nz;this.AX=new Vt(t,i,e,s)}MX(t){switch(t){case z.Ez.PlayingState:this.OH(T.ProtoAdSlotsEnum.MidRoll);break;case z.Ez.PrerollState:this.OH(T.ProtoAdSlotsEnum.PreRoll);break;case z.Ez.PostrollState:this.OH(T.ProtoAdSlotsEnum.PostRoll);break;case z.Ez.PausedState:this.nz.adViewabilityPolicy===e.ProtoAdViewabilityPolicy.Default&&!this._X.inView||this.UH.onContentStop();break;case z.Ez.StoppedState:this.UH.onContentStop()}}t7(t){switch(t){case z.Ez.PlayingState:this.$L.sessionPlaybackChanged.next({isPlaying:!0}),this.mediator.publish(this,ot.Play,{payload:this.i7()});break;case z.Ez.PausedState:this.mediator.publish(this,ot.Pause,{payload:this.i7()}),this.$L.sessionPlaybackChanged.next({isPlaying:!1});break;case z.Ez.StoppedState:this.mediator.publish(this,ot.ContentComplete,{payload:this.getStorySlidesMetadata()}),this.$L.sessionPlaybackChanged.next({isPlaying:!1});break;default:this.$L.sessionPlaybackChanged.next({isPlaying:!0})}}mX(){this._X=new qi(this,this.nz.playbackMode),this.subscribe(Ui[Ui.Play],this._X,(()=>{this.kU.play(!1),this.yH.unmute()})),this.subscribe(Ui[Ui.Pause],this._X,(()=>{this.kU.pause(!1),this.yH.mute(this.getVolume())})),this.subscribe(J.Uh.UserInteraction,this.kU,(({payload:{playback:t}})=>{(0,a.$K)(t)&&this._X.setUserPlayback(t)})),this._X.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.Sq}));const t=this.kU.canPlay().subscribe((t=>{this._X.setCanPlay(t)}));this.eX.push(t)}uX(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.nz.soundMode===T.ProtoPlayerSoundMode.On?1:0,!1,!1),this.UH.forceRecheck())}iz(){const t=this.getNextSlide();this.adHandler.setContinueReadingCard({imageSrc:t.metadata.imageUrl,title:t.metadata.title}),super.iz(),this.kU.hide()}sz(){this.$H.isInAdPod()?this.rz((()=>{this.UH.onAdFinished(this.adHandler.linearInImpression,ct.k.LINEAR,this.$H.isInAdPod()),super.sz(),this.kU.show()})):(super.sz(),this.kU.show())}GH(){var t;return mr(this,void 0,void 0,(function*(){const i=!!(null===(t=this.uH)||void 0===t?void 0:t.isInFloating);return new((yield function(){return Ot(this,void 0,void 0,(function*(){return yield(0,P.Up)((()=>Ot(this,void 0,void 0,(function*(){return yield Promise.resolve().then(h.bind(h,5186))}))))}))}()).PlayspaceAdHandler)(i,this.UH.isAdvertisingDisabled,this.nz,this.cl,this.$playerContainer,this.uH?this.uH.checkFloatingViewability(this.isViewable()):this.isViewable(),this.$H,this.app,this._appSettings,this.he,this.pz(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight))}))}Zz(){const t=new oe({minSlidesBeforeFirstAd:this.nz.minSlidesBeforeFirstAd,slidesBetweenAds:this.nz.slidesBetweenAds});return new hi(this,{linearAdsControllerData:{numberOfMidRolls:this.nz.midRollNumber,adBreaks:this.nz.adBreaks,maxAdSlotDuration:this.$H.getMaxAdSlotDuration(),maxAdPodDuration:this.$H.getMaxAdPodDuration()},viewabilityPolicy:this.nz.adViewabilityPolicy,playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight}},t,this.isViewable(),this.nz.disableAdvertising)}AD(){this.O8?(super.AD(),this.kU&&this.kU.onResize(),this.z8.setRatio(),this.K8(),this.n7.updateWidth(this.$playerContainer.clientWidth)):this.D8=!0}vu(){return this.uH&&this.uH.isInFloating}lz(t,i=!1){super.lz(t,i),this._X&&this._X.setViewability(t),this.kU&&this.kU.setViewabilityState(t)}r7(){const t=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(t,(()=>{this.z8.setRatio(!0)}))}o7(){var t,i;const e=(0,Dt.h)((()=>this.nz.floatingSettings.isPinnedPlayerFloating));if(this.uH){const s=()=>{this.kU.floatingChanged(!0),setTimeout((()=>{this.fz()}),50)};this.uH.isInFloating&&this.nz.floatingSettings.isPinnedPlayerFloating&&s(),this.eX.push(null===(t=this.uH.onFloatingEnterStart)||void 0===t?void 0:t.pipe(e).subscribe(s),null===(i=this.uH.onFloatingExitStop)||void 0===i?void 0:i.pipe(e).subscribe((()=>this.kU.floatingChanged(!1))))}}tz(){return{isAutoPlay:this.nz.playbackMode===T.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}zz(){}start(){const t=Object.create(null,{start:{get:()=>super.start}});return mr(this,void 0,void 0,(function*(){try{yield t.start.call(this),this.W8(this.uH),this.dX(),this.uX(),this.pX(this.kU,this.adHandler),this.Rz(this.kU),this.r7(),this.n7=new Mi(this.$playerContainer,Wi,_t.Rq,this.app.config.device),this.a7(this.$playerContainer),yield this.kU.start(),this.cz(),this.o7(),this.Wz()}catch(t){(0,S.nF)({message:"PlayspaceExperience_start",exception:t.message,callStack:t.stack,level:S.D_.CRITICAL,sessionId:this.nz.sessionId})}}))}setSlide(t){this.kU.setSlide(t)}getNextSlide(){return this.kU.getNextSlide()}play(){super.play();this.kU.play(!1)}pause(){super.pause();this.kU.pause(!1)}getStoryId(){return this.nz.storyId}getStoryName(){return this.kU.storyName}getStoryPosition(){return this.kU.currentSlideIndex}getStoryTimeline(){return this.kU.slides.map((t=>t.media.duration/ht.s_))}updateCtaLabel(t,i){(0,a.hj)(t)&&(0,a.QM)(i)&&this.kU.updateCtaLabel(t,i)}getStorySlidesMetadata(){return this.kU.slidesMetadata.map((({title:t,clickUrl:i,slideDuration:e,keywords:s,language:n,altText:r,customFields:o})=>{const a={title:t,clickUrl:i,duration:e,keywords:s,language:n,altText:r};let h;try{h=JSON.parse(o)}catch(t){return a}return Object.assign(Object.assign({},a),{customFields:h})}))}getQuality(){return this.kU.getQuality()}setQuality(t){this.kU.setQuality(t)}getOrientation(){return this.z8.getOrientation()}setOrientation(t){this.z8.setOrientation(t)}setPreRollBreak(t){var i;this.nz.setPreRollBreak(t),null===(i=this.AX)||void 0===i||i.setPreRollBreak(this.nz.preRollBreak),this.kU.hasPreroll=(0,a.r)(this.nz.preRollBreak)}setPostRollBreak(t){var i;this.nz.setPostRollBreak(t),null===(i=this.AX)||void 0===i||i.setPostRollBreak(this.nz.postRollBreak),this.kU.hasPostroll=(0,a.r)(this.nz.postRollBreak)}disableAdvertising(){this.setPreRollBreak(0),this.setPostRollBreak(0),super.disableAdvertising()}enableAdvertising(){this.setPreRollBreak(null),this.setPostRollBreak(null),super.enableAdvertising()}i7(){return this.kU.getCurrentMetadata()}s7(t){if(!(t<0||this.kU.slidesMetadata.length<t))return this.kU.slidesMetadata[t]}U8(){this.cl.currentMediaMetadata=this.e7()}e7(){const t=this.kU.getCurrentStoryMeta(),i=this.kU.getCurrentMetadata(),e=i.title||i.coverMetadata&&i.coverMetadata.title;return{mediaId:(null==t?void 0:t.storyId)||this.nz.storyId,clickUrl:i.clickUrl,slideTitle:e,slideNumber:this.kU.currentSlideIndex+1,slideMediaType:i.mediaType,insights:(null==t?void 0:t.insights.insights)||[],sentimentAnalysis:(null==t?void 0:t.insights.sentimentAnalysis)||{},mediaRevision:t.activeVersion}}V8(t){this.adHandler&&this.adHandler.setMediaRestrictions(t)}F8(t){return{mediaInsights:{insights:t.insights.insights}}}a7(t){if(!(0,a.QM)(this.nz.sdkVersion)&&(0,a.QM)(this.app.config.bundleID)){const i=this.app.services.GlobalDomUtilsService.querySelector("body");(0,I.T7)(i,{margin:"0"}),t.clientWidth>=300&&((0,I.T7)(t,{"min-height":"250px"}),(0,I.Tp)(t)),(0,P.Vm)([95,5])&&(0,S.nF)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:S.D_.INFO,sessionId:this.nz.sessionId})}}ZZ(){}fz(){var t;this.nz.floatingSettings.isPinnedPlayerFloating&&(null===(t=this.kU)||void 0===t?void 0:t.mediaContainer)&&this.vu()?this.breakPointsHandler.updateWidth(this.kU.mediaContainer.clientWidth):super.fz()}Gz(){var t;null===(t=this.aU)||void 0===t||t.start(this.$playerContainer,!1)}Wz(){this.kU.onReady().pipe((0,Dt.h)((t=>!!t)),(0,Nt.q)(1)).subscribe((()=>{super.Wz()}))}}class vr{constructor(t){this.experience=t,this.Ea={},this.tZ=(t,i)=>this.Xd.on(t,i),this.iZ=(t,i)=>{this.Xd.remove(t,i)},this.eZ=()=>{this.Xd.removeAll()},this.nZ=(t,i)=>{this.Xd.once(t,i)},this.rZ=()=>this.experience.isViewable(),this.oZ=t=>{this.experience.setViewableThreshold(t)},this.hZ=()=>{this.experience.play()},this.aZ=()=>{this.experience.pause()},this.cZ=()=>this.experience.getVolume(),this.uZ=t=>{this.experience.setVolume(t)},this.ce=()=>{this.experience.triggerDestroy()},this.eV=()=>{this.experience.disableAdvertising()},this.pZ=()=>{this.experience.disableAdsInBackground()},this.fZ=()=>{this.experience.enableAdvertising()},this.mZ=()=>{this.experience.enableAdsInBackground()},this.gZ=()=>{this.experience.enableFloatingMode()},this.yZ=()=>{this.experience.disableFloatingMode()},this.IZ=()=>this.experience.isFloatingModeEnabled(),this.PZ=t=>{this.experience.setFloatingSettings(t)},this.wZ=(t,i)=>this.experience.setLineItemMetadata(t,i),this.AZ=t=>this.experience.startConnatixAuction(t),this.getFloatingSettings=()=>this.experience.getFloatingSettings(),this.SZ=t=>{this.experience.setCustomMacros(t)},this._Z=t=>{this.experience.setAmpUserConsent(t)},this.TZ=t=>{n.n.CONNECTION_TYPE=t},this.xZ=t=>{this.experience.updateJsQueryTargeting(t)},this.kZ=t=>{this.experience.removeJsQueryTargeting(t)},this.CZ=()=>n.n.CONNECTION_TYPE,this.EZ=()=>this.experience.getApiConfig(),this.MZ=()=>this.experience.getSessionDataConfig(),this.Xd=new m.Q}trigger(t,i){this.Xd.trigger(t,i)}setDestroyed(){this.trigger(L.Km.Removed)}getApiMethods(){return{_internals:this.Ea,on:this.tZ,remove:this.iZ,removeAll:this.eZ,once:this.nZ,isViewable:this.rZ,setViewableThreshold:this.oZ,play:this.hZ,pause:this.aZ,getVolume:this.cZ,setVolume:this.uZ,disableAdvertising:this.eV,disableAdsInBackground:this.pZ,enableAdvertising:this.fZ,enableAdsInBackground:this.mZ,enableFloatingMode:this.gZ,disableFloatingMode:this.yZ,isFloatingModeEnabled:this.IZ,setFloatingSettings:this.PZ,getFloatingSettings:this.getFloatingSettings,setMacros:this.SZ,setAmpUserConsent:this._Z,destroy:this.ce,updateConnectionType:this.TZ,getConnectionType:this.CZ,updateJsQueryTargeting:this.xZ,removeJsQueryTargeting:this.kZ,setLineItemMetadata:this.wZ,startConnatixAuction:this.AZ,getApiConfig:this.EZ,getSessionDataConfig:this.MZ}}addService(t,i){this.Ea[t]=i}}class yr extends vr{constructor(){super(...arguments),this.h7=()=>this.experience.getStoryPosition(),this.c7=()=>this.experience.getStoryId(),this.d7=()=>this.experience.getStoryName(),this.l7=()=>this.experience.getStoryTimeline(),this.u7=t=>{this.experience.setSlide(t)},this.f7=(t,i)=>{this.experience.updateCtaLabel(t,i)},this.K9=()=>this.experience.getStorySlidesMetadata(),this.g0=()=>this.experience.getQuality(),this.y0=t=>{this.experience.setQuality(t)},this.m7=()=>{const t=this.experience.getOrientation();return Q.LayoutEnum[T.ProtoPlayerOrientationEnum[t]]},this.g7=t=>{const i=Object.keys(Q.LayoutEnum).find((i=>Q.LayoutEnum[i]===t));i&&T.ProtoPlayerOrientationEnum[i]&&this.experience.setOrientation(T.ProtoPlayerOrientationEnum[i])},this.v7=()=>this.experience.getSize(),this._0=t=>{this.experience.setPreRollBreak(t)},this.T0=t=>{this.experience.setPostRollBreak(t)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.h7,setStoryPosition:this.u7,getStoryId:this.c7,getStoryName:this.d7,getStoryTimeline:this.l7,setCtaLabel:this.f7,getStoryMetadata:this.K9,getQuality:this.g0,setQuality:this.y0,getLayout:this.m7,setLayout:this.g7,getPlayerSize:this.v7,setPreRollBreak:this._0,setPostRollBreak:this.T0})}}class br extends Lt{constructor(){super(...arguments),this._U="cnx-ps"}createExperience(t,i){this.experience=new gr(this,i,this.app.services.UrlSuffixerService,this.$L,this.su,this.lB,this.cl,this.aU),this.experienceApi=new yr(this.experience),this.cl.playerType=St.e.Story}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(t){return!(this.experienceContainer.clientWidth<Bt[t].xs)}}class Ir extends k.a{aT(){return{id:_,src:f.n.endPoints.assets.css.playspace}}getDelegateHandler(){return{getCurrentVolume:()=>this.renderer.getApiMethods().getVolume()}}getRendererInstance(t,i,e,s,n,r,o,a,h){return new br(this,t,i,e,s,n,r,o,a,h)}getViewabilityService(t,i,e){if(this.externalAttributes.settings.useExternalViewabilityService)return new M;if(this.WS.isInApp&&!this.WS.isInAppHybrid){const i=E.h.getSessionChildContainer(e.sessionId).resolve(C.G);return new F(window,i,t.sessionId,e.bundleId,this.WS.isInAppSDK)}return new V(t.global,i,e)}getPlayerRequest(t){return(0,P.Up)((()=>H.n.sendProtoRequest({protoResponse:T.ProtoPlayspaceResponse,protoRequest:T.ProtoPlayspaceRequest,requestData:t,endpoint:f.n.endPoints.api.story,hasCredentials:!0,queryParams:Object.assign({[l.Fk]:x.g.version},p.f.getCidKeyValueObject()),shouldLogErrors:!0})),this.PLAYER_REQUEST_RETRIES_NUMBER)}getPlayerResponse(t){return new Promise(((i,e)=>{this.getPlayerRequest(t).then((t=>{f.n.setTier(t.tier),window.parent.connatixDummy&&(0,j.Ph)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),i(t)})).catch((t=>{this.GLOBAL.cnxDummyResponse?i(this.GLOBAL.cnxDummyResponse):e(t)}))}))}getPlayerModel(t,i,e,s){return new wt(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[s],i.browser.device,i.secondLevelDomain,this.externalAttributes,this.isServerlessMode,i.supplyChain,e,this.services.StandaloneService,i.lineItemAbTestInformation,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic,this.g_())}getApiConfigEnums(){return Q}getApiConfigEvents(){return ot}getSpecificRequestData(){const t={};return this.queryParams.cnxStoryId?t.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(t.forceStoryId=this.externalAttributes.storyId),this.queryParams.cnxDebug&&(t.cnxDebug=this.queryParams.cnxDebug),t}defaultInitFromProto(){return U(T.ProtoPlayspaceResponse,T.ProtoPlayspace)}m_(){super.m_(),this.externalAttributes.settings.story=void 0}}const Pr=window.parent,wr=(0,I.bZ)(l.ym,window.document.currentScript);p.f.customerId=wr;const Sr=[];window.addEventListener("unload",(function(t){Sr.forEach((t=>t.destroy()))}));const Ar=(0,P.pE)(Pr).topFrame;u.e.abServiceType=u.j.PlayspaceABService;const xr=function(t,i,r){var o,h,c,l;const u=JSON.parse(JSON.stringify(t));t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t._appSettings.customJsTargetingObject=t.settings.queryJsTargeting||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{};const p=(0,a.hj)(t.settings._connatixInternals.serverAb0),m={environment:{injectedServerAb0:t.settings._connatixInternals.serverAb0},player:{id:t.playerId,advertising:{adBreak:s.V.None},isInView:!1}};[].includes(null===(o=null==t?void 0:t._appSettings)||void 0===o?void 0:o.bundleID)&&(0,S.nF)({level:S.D_.INFO,message:"CNX_INAPP_SETTINGS_PLAYSPACE",exception:JSON.stringify(t._appSettings)}),t=_r(t);const g=w.$.getEnvironment(t._appSettings);if(g.isInAppHybrid&&!w.$.isValidWebviewInApp(g))throw new Error("not a valid in app webview implementation. Missing bundle id or webViewability setting");t.settings.useExternalViewabilityService=!1,g.isInAppSDK&&(t.settings.useExternalViewabilityService=w.$.shouldUseExternalViewabilityService(t._appSettings.sdkVersion));const{cmp:A,tcf:x,usPrivacyString:T,deviceID:C,idfv:k}=t._appSettings,E=((t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===e.ProtoImplementationType.Amp)(t,Pr),{advertising:M,plugins:L}=t.settings,R=M.standaloneLineItems,B={UserManagerService:new b.x(Ar,g.isInApp,E,{cmp:A,tcf:x,usPrivacyString:T,deviceID:C,idfv:k}),EventsStorageService:new v(L._debugLogging),UrlSuffixerService:new y.f,StandaloneService:new d(R)},O=new Ir(B,Pr,g,E,!1,r,m,t.settings._connatixInternals.bundleLoadTimestamp);Sr.push(O);const D=function(){const e={id:_,src:f.n.endPoints.assets.css.playspace};(0,P.Up)((()=>function(t){return new Promise(((i,e)=>{if((0,I.rI)(t.id,Ar))return i();(0,I.NS)(t,Ar.document.head,Ar,(()=>i()),(t=>e(t)))||e()}))}(e))).catch((t=>{throw(0,S.nF)({message:"Prerender_Playspace_Loader_add_css_link",exception:t.message,callStack:t.stack,level:S.D_.INFO,extra:p?m:void 0},{throttle:1e3}),t})).then((()=>{try{(0,I.Nb)(Pr),O.updateQueryParams(),O.loadScriptTag(t,i)&&O.insertRenderer()}catch(t){(0,S.nF)({message:"Prerender_Playspace_main_insertRenderer",exception:t.message,callStack:t.stack,level:S.D_.INFO,extra:p?m:void 0},{throttle:1e3})}})).catch((()=>{}))};g.isInApp?(n.n.CONNECTION_TYPE=null===(h=null==t?void 0:t._appSettings)||void 0===h?void 0:h.connectionType,O.setInappPageUrl(null===(c=null==t?void 0:t._appSettings)||void 0===c?void 0:c.appPageURL),D()):O.findPageUrl(Pr,null===(l=null==t?void 0:t.settings)||void 0===l?void 0:l.ampUrl).then((()=>{D()})).catch((t=>{(0,S.nF)({message:"Prerender_Playspace_main_init",exception:t.message,callStack:t.stack,level:S.D_.INFO,extra:p?m:void 0},{throttle:1e3}),O.registerApiError()})),E||g.isInApp||(0,S.Mn)(u,!!r)},_r=t=>{var i,e,s;const n=Object.assign({},t),r=null===(i=n._appSettings)||void 0===i?void 0:i.cmp;((0,a.QM)(null===(e=n._appSettings)||void 0===e?void 0:e.gdprConsentString)||(0,a.QM)(null===(s=n._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(n._appSettings.cmp={consentString:(0,a.QM)(null==r?void 0:r.consentString)?r.consentString:n._appSettings.gdprConsentString,parsedVendorConsents:(0,a.QM)(null==r?void 0:r.parsedVendorConsents)?r.parsedVendorConsents:n._appSettings.gdprParsedVendorString});const o=Object.assign({},(0,A.EQ)(Object.assign({},n._appSettings.cmp))),h=Object.assign({},(0,A.EQ)(Object.assign({},n._appSettings.tcf))),{usPrivacyString:c,deviceID:d,appPageURL:l}=(0,A.EQ)({usPrivacyString:n._appSettings.usPrivacyString,deviceID:n._appSettings.deviceID,appPageURL:n._appSettings.appPageURL});return n._appSettings=Object.assign(Object.assign({},n._appSettings),{cmp:o,tcf:h,usPrivacyString:c,deviceID:d,appPageURL:l}),n};try{(0,P.oC)()||(f.n.bundleDomain=i.o.connatix,window.initConnatixPlayer=xr)}catch(t){(0,S.nF)({message:"Prerender_Playspace_main",exception:t.message,callStack:t.stack,level:S.D_.INFO},{throttle:1e3})}})()})();