(function(){"use strict";function e(e){}const t=self;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function i(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))}let n;window.setInterval=t.setInterval.bind(t),window.setTimeout=t.setTimeout.bind(t),window.clearInterval=t.clearInterval.bind(t),window.clearTimeout=t.clearTimeout.bind(t),window.addEventListener=t.addEventListener.bind(t),window.encodeURIComponent=t.encodeURIComponent.bind(t),window.decodeURIComponent=t.decodeURIComponent.bind(t),window.JSON=self.JSON,document=window.document,window.window=window,t._onMessage=e,window.workerThread=t,window.VWO.modules={vwoUtils:{cookies:{}},utils:{},tags:{},phoenixPlugins:{events:{predefinedEvents:{}}}};const o={test:e=>{var t;return n=null===(t=window.VWO)||void 0===t?void 0:t.phoenix,window.workerThread&&n&&e===n.store.getters},transformer:function(e){return e===n.store.getters.settings.campaigns||e===n.store.getters.allSettings.dataStore.campaigns?"vwojFnGPlugCamp":e===n.store.getters.allSettings?"vwojFnGPlugAllSet":e},parse:(e,t)=>{if("vwojFnGPlugCamp"===t)return window._vwo_exp;if("vwojFnGPlugAllSet"===t){const e=Object.assign({},window.VWO._.allSettings);return delete e.triggers,delete e.tags,e}return t}},s=[o],r={stringify:function(e,t,i){try{return JSON.stringify(e,(function(e,n){if(!i){const e=s.filter((e=>e.test(n)));if(e.length>0){const i=t=>e.reduce(((e,t)=>t.transformer(e)),t);return JSON.parse(r.stringify(n,t,i))}}i&&(n=i(n));const o=e?this:t;var a;return n instanceof Function||"function"==typeof n?n.type==="vwoWrappedFn_"+(window.mainThread?"WT":"MT")?"_NuPreW"+n.name.slice(0,n.name.indexOf("_")+1):(a=n.toString()).length<8||"function"!==a.substring(0,8)?"_NuFrRa"+window.functionWrapper.wrap(n,o)+"_":"_NuFrNf"+window.functionWrapper.wrap(n,o)+"_":n instanceof RegExp?"_PxEgEr_"+n:n}))}catch(e){return window.VWO&&window.VWO._&&window.VWO._.customError&&window.VWO._.customError({msg:"JSONfn.stringify failed!",url:"jsonFn.ts",lineno:15,colno:16,source:e}),""}},parse:function(e,t){if(!e)return e;function i(e){const t=e+"_wrappedFn",i={[t](...t){const i={type:"callWrappedFunction",id:e,args:r.stringify(t)};return window.fetcher.request(i).send()}}[t];return i.type="vwoWrappedFn_"+(window.mainThread?"WT":"MT"),i}const n=!!t&&/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;return JSON.parse(e,(function(e,t){for(const i of s)t=i.parse(e,t);var o;if("string"!=typeof t)return t;if(t.length<8)return t;if(o=t.substring(0,7),n&&t.match(n))return new Date(t);if("_NuPreW"===o){const e=t.match(/_NuPreW([0-9]*)_/)[1];return window.functionWrapper.unwrap(e)}if("_NuFrNf"===o){const e=t.match(/_NuFrNf([0-9]*)_/)[1];return i(e)}if("_PxEgEr"===o)return eval(t.slice(8));if("_NuFrRa"===o){const e=+t.match(/_NuFrRa([0-9]*)_/)[1];return i(e)}return t}))},clone:function(e,t){return this.parse(this.stringify(e),t)}};let a=0;const l={},c={};function d(e,t,i){var n;const o=this.postMessage.bind(this);if("response"===(null===(n=e)||void 0===n?void 0:n.type)){const t=e;return{resolve:function(e){let i=t.encapsulatedData,n=t.isErrorPresent;i&&(i="function"==typeof e?e(t.encapsulatedData):t.encapsulatedData),n?c[t.twoWayCommId](i):l[t.twoWayCommId](i)}}}{const n={type:"response",encapsulatedData:e,twoWayCommId:t,isErrorPresent:i};return{send:function(){try{return o(n),!0}catch(e){return!1}}}}}function u(e){var t;if(this.sendingLayer=this.postMessage,"request"===(null===(t=e)||void 0===t?void 0:t.type)){const t=e,n=t.encapsulatedData;return{resolve:e=>i(this,void 0,void 0,(function*(){try{const i=yield e(n);return d.call(this,i,t.twoWayCommId).send(),!0}catch(e){const i=r.stringify(e.message);return d.call(this,i,t.twoWayCommId,!0).send(),!1}}))}}{const t={type:"request",encapsulatedData:e,twoWayCommId:++a};return{send:()=>new Promise(((e,i)=>{try{l[t.twoWayCommId]=e,c[t.twoWayCommId]=i,this.sendingLayer(t)}catch(e){console.log(e),i(e)}}))}}}var g;!function(e){e[e.Object=0]="Object",e[e.Property=1]="Property",e[e.Document=2]="Document",e[e.Variable=3]="Variable",e[e.OverWrite=4]="OverWrite",e[e.Delete=5]="Delete"}(g||(g={}));class v{constructor(){this.masterObject={}}static isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}static createProxy(e,t,i){if(e.__isProxy||!this.isObject(e))return e;const n=e;return Object.defineProperty(n,"__transferData",{value:!0,enumerable:!1,writable:!0}),new Proxy(n,{set:(e,n,o)=>{if("__isProxy"===n||e[n]===o)return!0;if(typeof e[n]==typeof o&&"function"!=typeof o&&JSON.stringify(o)===JSON.stringify(e[n]))return!0;if(this.isObject(o)?e[n]=this.proxify(o,t,i+n.toString()+"."):e[n]=o,"__transferData"===n||!e.__transferData)return!0;const s={path:i+n.toString()+".",value:o};return s.value=r.stringify(o,e),t({type:"sync",data:s,syncType:g.Object}),!0},get:(e,t)=>"__isProxy"===t||e[t],deleteProperty:(e,n)=>{if(n in e){if(delete e[n],!e.__transferData)return!0;const o={path:i.toString(),key:n};t({type:"sync",data:JSON.stringify(o),syncType:g.Delete})}return!0}})}isKey(e){return e in this.masterObject}static proxify(e,t,i){return this.isObject(e)?(Object.keys(null!=e?e:{}).forEach((n=>{this.isObject(e[n])&&(e[n]=this.proxify(e[n],t,i+n+"."))})),this.createProxy(e,t,i)):e}register(e,t,i){t in this.masterObject&&console.error("Key already exists!"),null==e&&(e={});const n=v.proxify(e,i,t+".");return this.masterObject[t]={proxy:n},n}append(e,t){return t in this.masterObject||console.error("Key doesn't exist!"),JSON.stringify(e)!==JSON.stringify(this.masterObject[t].proxy)&&console.error(`The object doesn't match the object registered under the key ${t}!`),this.masterObject[t].proxy}static getProxy(e,t,i){return this.proxify(e,t,i+".")}static sync(e,t,i,n,o){if(null==e||!e.__isProxy)return e;let s=null,r=i+".";return 1===n.length?(e.__transferData=!1,e[n[0]]=this.proxify(t,o,r+n[0]+"."),e.__transferData=!0,e):(s=e[n[0]],n.forEach(((e,t)=>{0!==t&&t!==n.length-1&&(r+=e+".",e in s||(s.__transferData=!1,s[e]=this.proxify({},o,r),s.__transferData=!0),s=s[e])})),s.__transferData=!1,s[n.pop()]=this.proxify(t,o,r),s.__transferData=!0,e)}}const{toString:h}=Object.prototype;function p(e){return"[object Object]"===h.call(e)}let w=!1;class f{constructor(){this.operations=[]}getCookieObject(e){const t={};return e.split(";").forEach((e=>{const[i,n=""]=e.split("=").map((e=>e.trim()));t[i]=n})),t}push(e,t){this.operations.push({name:e,value:t})}pop_front(){this.operations.splice(0,1)}fullfil(e,t=!0){const i=this.getCookieObject(e);t&&this.pop_front(),this.operations.forEach((e=>{i[e.name]=e.value}));return Object.entries(i).map((e=>e.join("="))).join("; ")}}class E{static internalUtils(){var e,t;return{isCookiePayloadObject:e=>!(!p(e)||!["value","fromThread","origin"].reduce(((t,i)=>t&&i in e),!0)),isCurrentContextMT:!!(null===(t=null===(e=window)||void 0===e?void 0:e.mainThread)||void 0===t?void 0:t.webWorker),getCookieAttributes:e=>{const t={};return e.split(";").forEach((e=>{const[i,n=""]=e.split("=").map((e=>e.trim()));t[i]=n})),t}}}getSetter(e){let t;return t=new f,i=>{if("string"==typeof i)i={value:i};else if(!E.internalUtils().isCookiePayloadObject(i))return void console.error("Invalid value type!");const{value:n,fromThread:o}=i;let{origin:s}=i,r=!0;if(E.internalUtils().isCurrentContextMT||"MAIN"===o)document.__cookie=n,r="MAIN"!==o;else{{const e=n.indexOf("="),i=n.substring(0,e).trim(),o=E.internalUtils().getCookieAttributes(n);let a=!1;(o.expires&&new Date(o.expires)<new Date(Date.now())||"0"===o["max-age"])&&(a=!0);const l={};document.__cookie.split(";").forEach((e=>{if(!e)return;const[t,i]=e.split("=").map((e=>e.trim()));l[t]=i})),a?i in l?delete l[i]:r=!1:(l[i]=o[i],t.push(i,o[i]),s="WORKER"),document.__cookie=Object.entries(l).map((e=>e.join("="))).join(";")}}return"MAIN"===o&&(document.__cookie=t.fullfil(document.__cookie,"WORKER"===s)),r&&e({type:"sync",data:{propertyName:"cookie",value:{value:E.internalUtils().isCurrentContextMT?document.__cookie:n,fromThread:E.internalUtils().isCurrentContextMT?"MAIN":"WORKER",origin:w?"WORKER":s}},syncType:g.Document}),!0}}}function m(e){if(!E.internalUtils().isCookiePayloadObject(e))return void console.error("Invalid value type!");const{value:t}=e;w=!0,document.cookie=t,w=!1}let _={},O;class S{static register(e,t){switch(e){case"cookie":0;default:this.registerProperty(e,t)}}static registerProperty(e,t){if(document){if(e in window.document){let i;i=Object.getOwnPropertyDescriptor(window.document,e);const n={enumerable:i.enumerable,configurable:i.configurable,get:()=>document["__"+e],set:this.internalUtils.getSetter(e,t)};Object.defineProperty(window.document,"__"+e,i),Object.defineProperty(window.document,e,n)}}else console.error("The property doesn't exist on the `DOCUMENT` object.")}static sync({propertyName:e,value:t}){document[e]=t}}S.internalUtils={getSetter:(e,t)=>{switch(e){case"cookie":return(new E).getSetter(t);default:return i=>(JSON.stringify(document["__"+e])===JSON.stringify(i)||(document["__"+e]=i,t({type:"sync",data:{propertyName:e,value:document["__"+e]},syncType:g.Document})),!0)}},isKeyNonConfigurable:e=>{var t,i,n;const o=[document,null===(t=null===window||void 0===window?void 0:window.Document)||void 0===t?void 0:t.prototype,null===(i=null===window||void 0===window?void 0:window.HTMLDocument)||void 0===i?void 0:i.prototype];for(let t=0;t<o.length;t++)if(!1===(null===(n=Object.getOwnPropertyDescriptor(o[t]||{},e))||void 0===n?void 0:n.configurable))return!0;return!1}};class y{static register(e,t,i,n){i in e?console.error("The property must not pre-exist inside the object."):Object.defineProperty(e,i,{enumerable:!0,configurable:!1,get:()=>e[`__${i}`],set:o=>(e[`__${i}`]=o,n({type:"sync",data:{identifier:t,property:i,value:o},syncType:g.Property}),!0)})}}const T={get:e=>{try{return window.localStorage.getItem(e)}catch(e){return""}},set:(e,t)=>{try{return window.localStorage.setItem(e,t)}catch(e){return""}},remove:e=>{try{return window.localStorage.removeItem(e)}catch(e){return!1}},getItem:function(e){return this.get(e)},setItem:function(e,t){this.set(e,t)},deleteAll:function(){},deleteItem:function(e){this.remove(e)}};function I(e){O=e}function C(){class e{constructor(e){this.__transferData=!0,this.length=(null==e?void 0:e.length)||0,this.value=e||{},this.callback=window.fetcher.postMessage.bind(window.fetcher)}key(e){if(e>=this.length)return null;const t=Object.keys(this.value);for(let i=0;i<t.length;i++)if(i===e)return t[i]}getItem(e){return e in this.value?this.value[e]:null}setItem(e,t){if(e in this.value){if(this.value[e]===t)return}else this.length++;return this.value[e]=t,this.callback({data:{key:e,value:t},type:"sync",syncType:{type:"custom",method:"localStorage",operation:"setItem"}}),null}removeItem(e){return e in this.value?(this.length--,delete this.value[e],this.callback({data:{key:e},type:"sync",syncType:{type:"custom",method:"localStorage",operation:"removeItem"}}),null):null}clear(){return 0===this.length||(this.length=0,this.value={},this.callback({data:{},type:"sync",syncType:{type:"custom",method:"localStorage",operation:"clear"}})),null}}window.localStorage=new e(window.localStorage)}function b(e){if("number"!=typeof e.syncType){switch(window.localStorage.__transferData&&(window.localStorage.__transferData=!1),e.syncType.operation){case"setItem":window.localStorage.setItem(e.data.key,e.data.value);break;case"removeItem":window.localStorage.removeItem(e.data.key);break;case"clear":window.localStorage.clear();break;default:return}window.localStorage.__transferData&&(window.localStorage.__transferData=!0)}}window.VWO._.localStorageService=T;class A{}A.syncLocalStorage=C;class N extends A{constructor(){super(),this.objectSyncer=new v}register(e,t,i={},n="",o=!1){if("object"!=typeof i||Array.isArray(i))return;const s=window.fetcher.postMessage.bind(window.fetcher);switch(e){case"custom":switch(t){case"localStorage":N.syncLocalStorage();break;default:throw new Error("Unknown property name!")}break;case g.Object:{const e=this.objectSyncer.register(i,t,s);return o&&s({data:{value:JSON.stringify(i),path:t},type:"sync",syncType:g.OverWrite}),e}case g.Property:y.register(i,n,t,s);break;case g.Document:S.register(t,s);break;default:console.error("Unknown 'syncAblesEnum' type!")}}append(e,t){return this.objectSyncer.append(e,t)}static sync(e,t){var i;const{data:n}=e;if("object"!=typeof e.syncType||"custom"!==e.syncType.type)switch(e.syncType){case g.Object:{n.value=r.parse(n.value);const e=n.path.substring(0,n.path.lastIndexOf(".")).split(".");window[e[0]]=v.sync(window[e[0]],n.value,e[0],e.splice(1),t);break}case g.Document:S.sync(n);break;case g.Property:case g.Variable:t(n);break;case g.OverWrite:if(!("__transferData"in(null!==(i=window[n.path])&&void 0!==i?i:{})))return void(window[n.path]=JSON.parse(n.value));window[n.path]=v.getProxy(JSON.parse(n.value),t,n.path);break;case g.Delete:{const e=JSON.parse(n),t=e.path.substring(0,e.path.lastIndexOf(".")).split(".").reduce(((e,t)=>Object.keys(e).length?e[t]:window[t]),{}),i=e.key;i in t&&(t.__transferData=!1,delete t[i],t.__transferData=!0);break}default:console.error("Unknown 'syncAblesEnum' type!")}else switch(e.syncType.method){case"localStorage":b(e);break;default:return}}declare(e,t){y.register(window,"window",e,t)}}const V=window.VWOEventsArchInCompatibilityMode,R=(e,t)=>{if(e&&"function"==typeof e&&e.bind)try{e=e.bind(t)}catch(t){if(/(cannot be invoked without 'new')|(Cannot call a class constructor without |new|)/i.test(t.message))return e;console.error(t)}return e};function x(e,t,i={}){if("window"===e)return window;let n=window;const{captureGroups:o=null,filter:s}=i,r=e.split("."),a=r.length;for(let e=0;e<a;e++){let t=r[e];if(t.endsWith(")")){const e=t.substring(0,t.indexOf("("));let i=t.substring(t.indexOf("("));i="["+i.slice(1,i.length-1)+"]";const s=i.slice(1,i.length-1).split(",");s.forEach(((e,t)=>{e.startsWith('"')||(s[t]='"vwoCurrThreadRef'+e+'"')}));const r=JSON.parse(i,((e,t)=>{let i;if("string"==typeof t){if(i=t.match(/\${{([0-9]*)}}/))return o[i[1]-1];if(i=t.match(/vwoCurrThreadRef(.*)/))return x(i[1])}return t}));n=n[e](...r)}else{let e=!1;t.endsWith("?")&&(t=t.slice(0,-1),e=!0);const i=n[t];if(n=R(i,n),e&&null==n)return n}}if(s){const e={};s.forEach((t=>{e[t]=n[t]})),n=e}return n}const P=function(e){return window.functionWrapper.unwrap(e.id)(...r.parse(e.args))},D=function(e){var t,n;return i(this,void 0,void 0,(function*(){switch(e.type){case"callWrappedFunction":{const t=P(e);return r.stringify(t)}case"vwoClassInstanceBridge":{const t=e.path.dest.lastIndexOf(".");let i=window,n=e.path.dest;-1!==t&&(i=x(e.path.dest.slice(0,t)),n=e.path.dest.substr(t+1));const o=i[n],[s,r]=new o(...e.args);return r.otherSide=(...t)=>{const i=e.path.src+"."+s+"."+t[0];return t[0]=i,window.fetcher.getValue(...t)},""+s}default:{let i,o;if("setValue"===(e=r.parse(e)).type){-1==e.path.lastIndexOf(".")&&(e.path="window."+e.path);const t=e.path;e.path=t.slice(0,t.lastIndexOf(".")),i=t.slice(t.lastIndexOf(".")+1)}(null===(t=e.config)||void 0===t?void 0:t.captureGroups)&&(e.config.captureGroups=r.parse(e.config.captureGroups));const s=o=x(e.path,e.args,null==e?void 0:e.config);return(null===(n=e.config)||void 0===n?void 0:n.constructable)?o=new s(...e.args):"function"==typeof s&&(o=s(...e.args||[])),i&&(o=s[i]=e.val),o=yield o,r.stringify(o)}}}))};class L{}class k extends L{init(){var e,t,i;this.thread=(null===(t=null===(e=window)||void 0===e?void 0:e.mainThread)||void 0===t?void 0:t.webWorker)||(null===(i=window)||void 0===i?void 0:i.workerThread),this.request=u,this.response=d,this.thread.onmessage=this.onMessage.bind(this)}onMessage(e){var t,i,n,o;const{data:s}=e;switch(s.type){case"initDone":window.vwo_initDone(s);break;case"request":this.request(s).resolve(D);break;case"response":this.response(s).resolve(r.parse.bind(r));break;case"sync":{let e=e=>null;switch(s.syncType){case g.OverWrite:case g.Object:e=this.postMessage.bind(this);break;case g.Property:case g.Document:case g.Variable:case g.Delete:}N.sync(s,e);break}default:window.VwoUnitTestsRunning&&("unit-test"===s.type?eval(s.code):"unit-test-result"===s.type&&(null===(i=null===(t=window.PromiseResolver)||void 0===t?void 0:t[s.id])||void 0===i||i.resolve(s))),null===(o=(n=this.thread)._onMessage)||void 0===o||o.call(n,e)}}postMessage(e){try{this.thread.postMessage(e)}catch(e){console.error(e)}}getValue(e,t,i={}){let n;(null==i?void 0:i.captureGroups)&&(n=r.stringify(i.captureGroups));const o={path:e,args:t,config:Object.assign(Object.assign({},i),{captureGroups:n})};return this.request(r.stringify(o)).send()}setValue(e,t){const i={type:"setValue",path:e,val:t};return this.request(r.stringify(i)).send()}}class U extends L{init(){}onMessage(){}postMessage(){this.onMessage.apply(this,arguments)}getValue(e,t,i={}){return new Promise((i=>{t?Array.isArray(t)?i(window[e](...t)):t.captureGroups.forEach(((t,i)=>{e.replace(`{{${i}}}`,r.parse(t))})):i(e)}))}setValue(e,t){return window[e]=t}}const W=V?U:k;window.fetcher=new W;class M{constructor(){this.id=0,this.store={}}wrap(e,t){const i=this.id++;return this.store=this.store||{},this.store[i]=t?e.bind(t):e,i}unwrap(e){return this.store[e]}}var G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function F(e){var t={exports:{}};return e(t,t.exports),t.exports}var j=function(e){return e&&e.Math==Math&&e},H=j("object"==typeof globalThis&&globalThis)||j("object"==typeof window&&window)||j("object"==typeof self&&self)||j("object"==typeof G&&G)||function(){return this}()||Function("return this")(),$=function(e){try{return!!e()}catch(e){return!0}},B=!$((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),J={}.propertyIsEnumerable,K=Object.getOwnPropertyDescriptor,z={f:K&&!J.call({1:2},1)?function(e){var t=K(this,e);return!!t&&t.enumerable}:J},Y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},X={}.toString,q="".split,Q=$((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==function(e){return X.call(e).slice(8,-1)}(e)?q.call(e,""):Object(e)}:Object,Z=function(e){return Q(function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}(e))},ee=function(e){return"object"==typeof e?null!==e:"function"==typeof e},te=function(e,t){if(!ee(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!ee(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!ee(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!ee(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")},ie={}.hasOwnProperty,ne=function(e,t){return ie.call(e,t)},oe=H.document,se=ee(oe)&&ee(oe.createElement),re=!B&&!$((function(){return 7!=Object.defineProperty(("div",se?oe.createElement("div"):{}),"a",{get:function(){return 7}}).a})),ae=Object.getOwnPropertyDescriptor,le={f:B?ae:function(e,t){if(e=Z(e),t=te(t,!0),re)try{return ae(e,t)}catch(e){}if(ne(e,t))return Y(!z.f.call(e,t),e[t])}},ce=function(e){if(!ee(e))throw TypeError(String(e)+" is not an object");return e},de=Object.defineProperty,ue={f:B?de:function(e,t,i){if(ce(e),t=te(t,!0),ce(i),re)try{return de(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},ge=B?function(e,t,i){return ue.f(e,t,Y(1,i))}:function(e,t,i){return e[t]=i,e},ve=function(e,t){try{ge(H,e,t)}catch(i){H[e]=t}return t},he=H["__core-js_shared__"]||ve("__core-js_shared__",{}),pe=Function.toString;"function"!=typeof he.inspectSource&&(he.inspectSource=function(e){return pe.call(e)});var we,fe,Ee,me,_e=he.inspectSource,Oe=H.WeakMap,Se="function"==typeof Oe&&/native code/.test(_e(Oe)),ye=F((function(e){(e.exports=function(e,t){return he[e]||(he[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),Te=0,Ie=Math.random(),Ce=ye("keys"),be={},Ae=H.WeakMap;if(Se){var Ne=he.state||(he.state=new Ae),Ve=Ne.get,Re=Ne.has,xe=Ne.set;we=function(e,t){return t.facade=e,xe.call(Ne,e,t),t},fe=function(e){return Ve.call(Ne,e)||{}},Ee=function(e){return Re.call(Ne,e)}}else{var Pe=Ce[me="state"]||(Ce[me]=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Te+Ie).toString(36)}(me));be[Pe]=!0,we=function(e,t){return t.facade=e,ge(e,Pe,t),t},fe=function(e){return ne(e,Pe)?e[Pe]:{}},Ee=function(e){return ne(e,Pe)}}var De={set:we,get:fe,has:Ee,enforce:function(e){return Ee(e)?fe(e):we(e,{})},getterFor:function(e){return function(t){var i;if(!ee(t)||(i=fe(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}},Le=F((function(e){var t=De.get,i=De.enforce,n=String(String).split("String");(e.exports=function(e,t,o,s){var r,a=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,c=!!s&&!!s.noTargetGet;"function"==typeof o&&("string"!=typeof t||ne(o,"name")||ge(o,"name",t),(r=i(o)).source||(r.source=n.join("string"==typeof t?t:""))),e!==H?(a?!c&&e[t]&&(l=!0):delete e[t],l?e[t]=o:ge(e,t,o)):l?e[t]=o:ve(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||_e(this)}))})),ke=H,Ue=function(e){return"function"==typeof e?e:void 0},We=Math.ceil,Me=Math.floor,Ge=function(e){return isNaN(e=+e)?0:(e>0?Me:We)(e)},Fe=Math.min,je=Math.max,He=Math.min,$e=function(e){return function(t,i,n){var o,s,r=Z(t),a=(o=r.length)>0?Fe(Ge(o),9007199254740991):0,l=function(e,t){var i=Ge(e);return i<0?je(i+t,0):He(i,t)}(n,a);if(e&&i!=i){for(;a>l;)if((s=r[l++])!=s)return!0}else for(;a>l;l++)if((e||l in r)&&r[l]===i)return e||l||0;return!e&&-1}},Be=($e(!0),$e(!1)),Je=function(e,t){var i,n=Z(e),o=0,s=[];for(i in n)!ne(be,i)&&ne(n,i)&&s.push(i);for(;t.length>o;)ne(n,i=t[o++])&&(~Be(s,i)||s.push(i));return s},Ke=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ze=Ke.concat("length","prototype"),Ye={f:Object.getOwnPropertyNames||function(e){return Je(e,ze)}},Xe={f:Object.getOwnPropertySymbols},qe=function(e,t){return arguments.length<2?Ue(ke[e])||Ue(H[e]):ke[e]&&ke[e][t]||H[e]&&H[e][t]}("Reflect","ownKeys")||function(e){var t=Ye.f(ce(e)),i=Xe.f;return i?t.concat(i(e)):t},Qe=function(e,t){for(var i=qe(t),n=ue.f,o=le.f,s=0;s<i.length;s++){var r=i[s];ne(e,r)||n(e,r,o(t,r))}},Ze=/#|\.prototype\./,et=function(e,t){var i=it[tt(e)];return i==ot||i!=nt&&("function"==typeof t?$(t):!!t)},tt=et.normalize=function(e){return String(e).replace(Ze,".").toLowerCase()},it=et.data={},nt=et.NATIVE="N",ot=et.POLYFILL="P",st=et,rt=le.f,at=function(e,t){var i,n,o,s,r,a=e.target,l=e.global,c=e.stat;if(i=l?H:c?H[a]||ve(a,{}):(H[a]||{}).prototype)for(n in t){if(s=t[n],o=e.noTargetGet?(r=rt(i,n))&&r.value:i[n],!st(l?n:a+(c?".":"#")+n,e.forced)&&void 0!==o){if(typeof s==typeof o)continue;Qe(s,o)}(e.sham||o&&o.sham)&&ge(s,"sham",!0),Le(i,n,s,e)}},lt=Object.keys||function(e){return Je(e,Ke)},ct=z.f,dt=function(e){return function(t){for(var i,n=Z(t),o=lt(n),s=o.length,r=0,a=[];s>r;)i=o[r++],B&&!ct.call(n,i)||a.push(e?[i,n[i]]:n[i]);return a}},ut=(dt(!0),dt(!1));at({target:"Object",stat:!0},{values:function(e){return ut(e)}}),ke.Object.values;var gt=function(e,t,i){var n=te(t);n in e?ue.f(e,n,Y(0,i)):e[n]=i},vt,ht,pt,wt,ft,Et,mt;at({target:"Object",stat:!0,sham:!B},{getOwnPropertyDescriptors:function(e){for(var t,i,n=Z(e),o=le.f,s=qe(n),r={},a=0;s.length>a;)void 0!==(i=o(n,t=s[a++]))&&gt(r,t,i);return r}}),ke.Object.getOwnPropertyDescriptors,function(e){e.DOM="vwo_dom"}(vt||(vt={})),function(e){e.WILD_CARD="*",e.TRIGGER="trigger",e.POST_INIT="post-init",e.TIMER="vwo_timer"}(ht||(ht={})),function(e){e.URL_CHANGE="vwo_urlChange",e.LEAVE_INTENT="vwo_leaveIntent",e.CLICK_EVENT="vwo_dom_click",e.SUBMIT_EVENT="vwo_dom_submit",e.PAGE_LOAD_EVENT="vwo_page_load"}(pt||(pt={})),function(e){e.PAGE_VIEW="vwo_pageView",e.PAGE_UNLOAD_EVENT="vwo_pageUnload"}(wt||(wt={})),function(e){e.EXIT_CONDITIONS="__exitConditions"}(ft||(ft={})),function(e){e.DOM_CONTENT_LOADED="DOMContentLoaded",e.SCROLL="scroll",e.CLICK="click",e.SUBMIT="submit"}(Et||(Et={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(mt||(mt={}));class _t{constructor(e){this.setLevel(e)}setLevel(e="warn"){this.logLevel=mt[e.toUpperCase()]}info(e,t={}){this.customLog(mt.INFO,e,t)}debug(e,t={}){this.customLog(mt.DEBUG,e,t)}warn(e,t={}){var i,n;this.customLog(mt.WARN,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}error(e,t={}){var i,n;this.customLog(mt.ERROR,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}customLog(e,t,i,n=null){var o,s,r;if(e>=this.logLevel){const a=this.formatMessage(e,t,i);null===(r=null===(s=null===(o=window.VWOEvents)||void 0===o?void 0:o.store)||void 0===s?void 0:s.actions)||void 0===r||r.addLogsForDebugging(a),n?n(a):this.consoleLog(e,[a])}}consoleLog(e,t){switch(e){case mt.INFO:console.info(...t);break;case mt.WARN:console.warn(...t);break;case mt.ERROR:console.error(...t);break;default:console.log(...t)}}formatMessage(e,t,i){var n,o;const s=Object.keys(i).reduce(((e,t)=>e.replace(new RegExp(`{{${t}}}`,"g"),i[t])),t),r=vt.DOM+"_";let a=i;const l=(null===(n=i.data)||void 0===n?void 0:n.vwoEventName)||i.vwoEventName;return l!==r+Et.CLICK&&l!==r+Et.SUBMIT||(a=i.data?null===(o=i.data)||void 0===o?void 0:o.props:a.props,a=a||{name:l}),`VWO: [${mt[e].toUpperCase()}] [${(new Date).toUTCString()}] ${s} ${JSON.stringify(a)}`}}class Ot{static parseUrl(e){try{e=decodeURIComponent(e)}catch(e){console.warn("Not a valid URL.")}const t=/^((((\w+)(:\/\/))?((\w+):(\w+)@)?(www\.)?)([^?#\/:\s]*)?:?([0-9][^?#\/\s]*)?)\/?([^?#\s]*)\??([^#]*)#?(.*)$/.exec(e.trim());if(!t)throw new Error("Not a valid URL.");return t&&{url:t[0],origin:t[1].replace(t[6],""),protocol:t[4]||"",hasWWW:Boolean(t[9]),username:t[7]||"",password:t[8]||"",host:(t[9]||"")+t[10],domain:t[10],port:t[11]||"",path:t[12],query:t[13]||"",queryParams:t[13]?t[13].split("&").reduce(((e,t)=>{const[i,n=""]=t.split("=");return e[i]=n,e}),{}):{},fragment:t[14]||"",urlWithoutProtocol:t[0].replace(t[3],""),urlWithoutProtocolAndWww:t[0].replace(t[2],"")}}}var St=new _t(Ot.parseUrl(window.location.href).queryParams.vwoLogLevel||"error");const{toString:yt}=Object.prototype;function Tt(e){return"[object Object]"===yt.call(e)}function It(e){return"[object Array]"===yt.call(e)}function Ct(e){return"[object Null]"===yt.call(e)}function bt(e){return"[object Undefined]"===yt.call(e)}function At(e){return!bt(e)&&!Ct(e)}function Nt(e){return!Number.isNaN(e)&&"[object Number]"===yt.call(e)}function Vt(e){return"[object String]"===yt.call(e)}function Rt(e){return"[object Boolean]"===yt.call(e)}function xt(e){return"[object Function]"===yt.call(e)}function Pt(e){return"[object AsyncFunction]"===yt.call(e)}function Dt(e){return Tt(e)?"Object":It(e)?"Array":Ct(e)?"Null":bt(e)?"Undefined":function(e){return e!=e}(e)?"NaN":Nt(e)?"Number":Vt(e)?"String":Rt(e)?"Boolean":function(e){return"[object Date]"===yt.call(e)}(e)?"Date":function(e){return"[object RegExp]"===yt.call(e)}(e)?"Regex":xt(e)?"Function":Pt(e)?"AsyncFunction":function(e){return"[object Promise]"===yt.call(e)}(e)?"Promise":"Unknown Type"}var Lt,kt,Ut,Wt,Mt=new class{mergeNestedObjects(...e){return e.reduce(((e,t)=>this.recursivelyMerge(e,t)))}createNestedObjects(e,t){let i=e;return t&&t.split(".").forEach((e=>{Object.prototype.hasOwnProperty.call(i,e)||(i[e]={}),i=i[e]})),i}clearNestedObject(e,t){let i=e;const n=t.split("."),o=n[n.length-1];for(let e=0;e<n.length-1;e++)i=i[n[e]];Tt(i[o])?i[o]={}:delete i[o]}recursivelyMerge(e,t,i={}){if(Tt(e)&&Tt(t)){const n={};Object.keys(e).concat(Object.keys(t)).forEach((e=>{n[e]=1}));const o=Object.getOwnPropertyDescriptors(e),s=Object.getOwnPropertyDescriptors(t);return Object.keys(n).forEach((n=>{s[n]?Object.defineProperty(i,n,s[n]):Object.defineProperty(i,n,o[n]),this.recursivelyMerge(e[n],t[n],i[n])})),i}return t||e}};!function(e){e.SETTINGS="settings",e.CUSTOM="custom",e.TRIGGERS="triggers",e.TAGS="tags",e.EVENTS="events",e.DEBUG="debug",e.ROOT="root"}(Lt||(Lt={})),(kt||(kt={})).HISTORY="history",function(e){e.LOGS="logs"}(Ut||(Ut={})),function(e){e.ALIAS="$alias"}(Wt||(Wt={}));class Gt{constructor(){this.originalValues={[Lt.SETTINGS]:{},[Lt.CUSTOM]:{},[Lt.TRIGGERS]:{},[Lt.EVENTS]:{[kt.HISTORY]:[]},[Lt.DEBUG]:{[Ut.LOGS]:[]}},this.reset()}reset(){this.values=JSON.parse(JSON.stringify(this.originalValues)),this.setValues(this.values)}getValue(e=""){try{return e.split(".").reduce(((e,t)=>e[t]),this.values)}catch(e){return null}}set(e,t,i=""){const n=Mt.createNestedObjects(this.values,i);this.defineProperty(n,e,t)}setValues(e,t=""){const i=this.getNamespace(t);Tt(e)&&Object.keys(e).forEach((t=>{this.set(t,e,i),Tt(e[t])&&this.setValues(e[t],`${i}.${t}`)}))}clear(e){const t=this.getNamespace(e);Mt.clearNestedObject(this.values,t)}defineProperty(e,t,i,n=""){let o=i[t];const s=Object.getOwnPropertyDescriptor(i,t),[r,...a]=Vt(o)?o.split("."):[],l=this;switch(r){case Wt.ALIAS:Object.defineProperty(e,t,{get(){const[e,...t]=(Object.prototype.hasOwnProperty.call(s,"get")?s.get():"").split(".");return l.getValue((t||a).join("."))},configurable:!0});break;default:try{Object.defineProperty(e,t,{get:()=>Object.prototype.hasOwnProperty.call(s,"get")?s.get():o,set(e){var i;JSON.stringify(o)!==JSON.stringify(e)&&(o=e,Object.prototype.hasOwnProperty.call(s,"set")&&(null===(i=s.set)||void 0===i||i.call(s,e)),l.setValues(e,n?`${n}.${t}`:t))},enumerable:!0,configurable:!0})}catch(n){Gt.logger.info(n),Object.prototype.hasOwnProperty.call(e,t)||(e[t]=i[t])}}}getNamespace(e){return(null==e?void 0:e.startsWith("."))?e.substring(1):e}}Gt.logger=new _t("warn");var Ft=new Gt,jt,Ht=new class{constructor(){this.plugins={}}register(e){St.debug(`Registering plugin '${e.pluginName}' in Plugins factory`),this.plugins[e.pluginName]=e}unregister(e){let t;t=Vt(e)?e:e.pluginName,St.debug(`Unregistering plugin '${t}' in Plugins factory`),this.plugins[t].removeAll(),delete this.plugins[t]}unregisterAll(){St.debug("Unregistering all plugins in Plugins factory"),Object.keys(this.plugins).forEach((e=>{this.plugins[e].removeAll(),delete this.plugins[e]}))}clearData(){St.debug("Clearing the data of all the plugins"),Object.keys(this.plugins).forEach((e=>{this.plugins[e].clearData()}))}};!function(e){e.EVENT="event",e.EVENT_PROPS="eventProps",e.STORAGE="storage",e.FORMULA="formula",e.OPERATOR="operator",e.TAG="tag",e.CONDITION_LEVEL_OPERATOR="clOperator"}(jt||(jt={}));var $t,Bt=new class{get(e){return this[e]}set(e,t){this[e]=t}};!function(e){e[e.EXCLUDE_PASSED=1]="EXCLUDE_PASSED",e[e.INCLUDE_PASSED=2]="INCLUDE_PASSED",e[e.INCLUDE_FAILED=3]="INCLUDE_FAILED"}($t||($t={}));var Jt,Kt=$t;!function(e){e.OR="o",e.AND="a"}(Jt||(Jt={}));var zt=Jt;class Yt{constructor(){this.experimentConfig={},this.pageConfig={},this.experimentConfigCache={},this.pageConfigCache={},this.previewParamsCleanedUrlCache={},Yt.cleanerRegex=/(^https?:\/\/)?(w{3}\.)?(.*?)?((?:\/)(?:home|default|index)\.\w{3,4})?(\/)?([?#].*)?$/i,Yt.logicalOperators=[zt.AND,zt.OR]}static get currentUrl(){return window.location.href}add(e,t){if(St.debug("Adding pageGroup config to phoenix"),At(e)&&(Object.hasOwnProperty.call(e,"ec")&&e.ec.forEach((e=>{const t=Object.keys(e)[0];this.experimentConfig[t]||(this.experimentConfig[t]=e[t])})),Object.hasOwnProperty.call(e,"pc")&&e.pc.forEach((e=>{const t=Object.keys(e)[0];this.pageConfig[t]||(this.pageConfig[t]=e[t])}))),At(t)){if(It(t.pc)){const e=this.getCache(Yt.currentUrl,!0);t.pc.forEach((t=>{e[t]={didMatch:!0,reason:Kt.INCLUDE_PASSED,cacheHit:!0}}))}if(It(t.ec)){const e=this.getCache(Yt.currentUrl);t.ec.forEach((t=>{e[t]={didMatch:!0,reason:Kt.INCLUDE_PASSED,cacheHit:!0}}))}}}getCache(e,t){return t?(this.pageConfigCache=this.pageConfigCache||{},this.pageConfigCache[e]=this.pageConfigCache[e]||{},this.pageConfigCache[e]):(this.experimentConfigCache=this.experimentConfigCache||{},this.experimentConfigCache[e]=this.experimentConfigCache[e]||{},this.experimentConfigCache[e])}getPreviewParamsCleanedUrl(e){return e?(this.previewParamsCleanedUrlCache=this.previewParamsCleanedUrlCache||{},this.previewParamsCleanedUrlCache[e]||(this.previewParamsCleanedUrlCache[e]=Bt.get("jsLibUtils").getCleanedUrl(e,!0)),this.previewParamsCleanedUrlCache[e]):e}getIndexFileCleanedUrl(e){return e?(this.indexFileCleanedUrlCache=this.indexFileCleanedUrlCache||{},this.indexFileCleanedUrlCache[e]||(this.indexFileCleanedUrlCache[e]=e.replace(Yt.cleanerRegex,"$1$2$3$5$6")),this.indexFileCleanedUrlCache[e]):e}validatePage(e,t,i,n){const o=t?this.pageConfig[e]:this.experimentConfig[e];if(!o)return St.info(`ConfigId ${e} is not present inside ${t?"pageConfig":"experimentConfig"}`),{didMatch:!1,reason:Kt.INCLUDE_FAILED,cacheHit:!1};const s=i||Yt.currentUrl,r=this.getCache(s,t);if(r&&Object.hasOwnProperty.call(r,e))return St.info(`Fetching value from cache for ${t?"pageConfigId":"experimentConfigId"} = ${e}`),r[e].cacheHit=!0,r[e];let a;const l=o.exc,c=o.inc;if(Array.isArray(l)&&l.length>0){const t=this.evaluateDSL(l,s,n||!1);if(t)return a={didMatch:!t,reason:Kt.EXCLUDE_PASSED,cacheHit:!1},n||(r[e]=a),a}if(Array.isArray(c))if(c.length){const e=this.evaluateDSL(c,s,n||!1);a=e?{didMatch:e,reason:Kt.INCLUDE_PASSED,cacheHit:!1}:{didMatch:e,reason:Kt.INCLUDE_FAILED,cacheHit:!1}}else a={didMatch:!0,reason:Kt.INCLUDE_PASSED,cacheHit:!1};return a=a||{didMatch:!1,reason:Kt.INCLUDE_FAILED,cacheHit:!1},n||(r[e]=a),a}evaluateDSL(e,t,i){if(!It(e)||e.length<2)return St.error("Invalid dsl tree",e),!1;const n=[];return e.forEach((e=>{var o;let s;if(e||(s=!1),Vt(e)&&(s=e),It(e))if(Yt.logicalOperators.includes(e[0]))s=this.evaluateDSL(e,t,i);else{const[n,r,...a]=e,l=null===(o=Ht.plugins[jt.OPERATOR])||void 0===o?void 0:o.get(r);let c;if(n.includes("url"))c=this.getIndexFileCleanedUrl(this.getPreviewParamsCleanedUrl(t));else{const e=a[0];c=this.validatePage(e,!0,t,i).didMatch,a[0]=!0}s=null==l?void 0:l(c,...a,{jsLibUtils:Bt.get("jsLibUtils"),pageUrl:!0})}n.push(s||!1)})),this.evaluateTree(n)}evaluateTree(e){let t=!1;switch(e[0]){case zt.AND:t=!e.includes(!1);break;case zt.OR:t=e.includes(!0)}return t}}var Xt=new Yt,qt=new class{constructor(){const e=function(e,t){Object.defineProperty(this,e,{get:t,enumerable:!0})}.bind(this);e("settings",(()=>Ft.values[Lt.SETTINGS])),e("custom",(()=>Ft.values[Lt.CUSTOM])),e("url",(()=>window.location.href)),e("refUrl",(()=>window.document.referrer))}get triggers(){return Ft.values[Lt.TRIGGERS]}get tags(){return Ft.values[Lt.TAGS]}get pageGroupExperimentConfig(){return Xt.experimentConfig}get pageGroupPageConfig(){return Xt.pageConfig}get events(){return Ft.values[Lt.EVENTS]}get eventsHistory(){return this.events[kt.HISTORY]}get window(){return window}addNameSpace(e=""){const t=e.split(".")[0];t in this||Object.defineProperty(this,t,{get:()=>Ft.values[t],configurable:!0,enumerable:!0})}getValue(e=""){return Ft.getValue(e)}getHistoryEvents(e){var t,i,n;const o=[];null===(t=this.events[kt.HISTORY])||void 0===t||t.forEach((({name:t,event:i})=>{t===e&&o.push(i)}));const s=null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.crossStore;let r=null==s?void 0:s.getLocal({key:kt.HISTORY});return r&&(r=JSON.parse(r)),r&&r.forEach((({name:t,event:i})=>{t===e&&o.push(i)})),o}},Qt={MAX_EVENTS_HISTORY:1e3,MAX_LOGS_HISTORY:1e3,EVENTS_TO_PERSIST:["s.q","s.r"]},Zt=new class{refreshState(e){Ft.setValues(e)}clear(e){Ft.clear(e)}clearAll(){Ft.reset()}addValues(e,t=""){Ft.setValues(e,t),t?qt.addNameSpace(t):Object.keys(e).forEach((e=>{qt.addNameSpace(e)}))}addEventInHistory({name:e,event:t}){const i=Ft.values[Lt.EVENTS][kt.HISTORY];i.push({name:e,event:t}),i.length>Qt.MAX_EVENTS_HISTORY&&i.shift(),Qt.EVENTS_TO_PERSIST.indexOf(e)>-1&&window.fetcher.getValue("VWO._.crossStore.getLocal",[{key:kt.HISTORY}]).then((i=>{let n=i;n?(n=JSON.parse(n),n.push({name:e,event:t})):n=[{name:e,event:t}],window.fetcher.getValue("VWO._.crossStore.set",[kt.HISTORY,JSON.stringify(n)])})).catch((e=>{console.log(e)}))}addLogsForDebugging(e){const t=Ft.values[Lt.DEBUG][Ut.LOGS];t.push(e),t.length>Qt.MAX_LOGS_HISTORY&&t.shift()}};class ei{refreshState(e){Zt.refreshState(e)}addValues(e,t=Lt.CUSTOM){Zt.addValues(e,t===Lt.ROOT?"":t)}set(e,t,i=Lt.CUSTOM){this.addValues({[e]:t},i)}clear(e){Zt.clear(e)}clearAll(){Zt.clearAll()}updateSettings(e,t=""){this.addValues(e,t?`${Lt.SETTINGS}.${t}`:Lt.SETTINGS)}addEventInHistory({name:e,event:t}){Zt.addEventInHistory({name:e,event:t})}addLogsForDebugging(e){Zt.addLogsForDebugging(e)}updateTriggerState(e,t){Zt.addValues({state:t},`${Lt.TRIGGERS}.${e}`)}updateTriggerLastMetTS(e,t){Zt.addValues({lastMetTS:t},`${Lt.TRIGGERS}.${e}`)}updateTagState(e,t){ei.logger.debug(`Updating tag ${e} in store' with `,t),Zt.addValues(t,`${Lt.TAGS}.${e}`)}clearTriggerState(e=""){this.clear(e?`${Lt.TRIGGERS}.${e}`:Lt.TRIGGERS)}updateTriggerExecutionCount(e,t){Zt.addValues({executionCount:t},`${Lt.TRIGGERS}.${e}`)}}ei.logger=new _t("warn");var ti=new ei,ii=new class{setStoragePlugin(e){this.storagePlugin=e}reInitialize(){const e=this.storagePlugin.get();ti.refreshState(e)}};const ni="{{survey_id}}";function oi(e,t){if(e.filters)for(let i=0;i<e.filters.length;i++)if("string"!=typeof e.filters[i])for(let n=0;n<e.filters[i].length;n++)e.filters[i][n]===ni&&(e.filters[i][n]=t);return e}var si=new class{async execute({callbacks:e,data:t,eventName:i}){let n=t;for(let t=0;t<e.length;t++)if(xt(e[t])||Pt(e[t])){const o=await e[t](n,i);o&&(n=o)}}};const ri=function(){var e,t;return(null===(t=null===(e=window.VWO)||void 0===e?void 0:e._)||void 0===t?void 0:t.performance)||window.performance};function ai(e){const t=e;return t.VWO=t.VWO||{firedTime:Date.now()},t.VWO.firedTime=t.VWO.firedTime||Date.now(),t}var li,ci=new class{constructor(){this.events={},this.eventIdsMapping={},this.globalInterceptors={},this.eventId=0,this.eventsFrequencyManager={}}setGlobalInterceptors(e={}){this.globalInterceptors=e}async trigger(e,t={},i={}){const n=ai(t);e!==ht.TIMER&&St.info(`Triggering event '${e}'`,{data:n,event:this.events[e]}),ri().mark("event-"+e),Object.values(ht).every((t=>!e.startsWith(t)))&&(this.addComputedEventProps(e,n),await this.trigger(ht.WILD_CARD,n,{eventName:e}),ti.addEventInHistory({name:e,event:n}));const o=this.events[e];let s;s=this.eventsFrequencyManager[e]?this.eventsFrequencyManager[e].then((()=>this.executeListeners(e,n,i,o))):this.executeListeners(e,n,i,o),this.eventsFrequencyManager[e]=s,await s}async executeListeners(e,t,i={},n){const o=null==n?void 0:n.length;if(o){const s=[],r=n.push;n.push=o=>{r.call(n,o),s.push(new Promise((n=>{queueMicrotask((async()=>{await si.execute({callbacks:[this.globalInterceptors.before,o.before,o.fn,this.globalInterceptors.after,o.after],data:t,eventName:i.eventName||e}),this.eventIdsMapping[o.id].executionCount++,n(null)}))})))};for(let r=0;r<o;++r){const o=n[r];St.debug(`Synchronously executing listener for event '${o.id}' with event name '${e}'`),s.push(si.execute({callbacks:[this.globalInterceptors.before,o.before,o.fn,this.globalInterceptors.after,o.after],data:t,eventName:i.eventName||e}).then((()=>{this.eventIdsMapping[o.id].executionCount++})))}await Promise.all(s),n.push=r}else e!==ht.TIMER&&St.debug(`No callbacks for the event ${e}. Events List in eventBus is`,this.events)}on(e,t,{before:i,after:n}={}){var o;St.debug(`Attaching listener for event name '${e}'`);const s=++this.eventId,r=Object.assign(Object.assign({id:s,fn:t},i&&{before:i}),n&&{after:n});return this.events[e]=this.events[e]||[],this.events[e].push(r),this.eventIdsMapping[s]={executionCount:0,event:r},null===(o=Ht.plugins[jt.EVENT])||void 0===o||o.addDomEvent(e),this.eventId}off(e,t){var i,n;St.debug(`Removing a listener for event '${e}'`,{reference:t});const o=null===(i=this.events[e])||void 0===i?void 0:i.push;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter((e=>xt(t)?e.fn!==t:e.id!==Number(t))),o&&(this.events[e].push=o)}remove(e){St.debug(`Removing all the listener for event '${e}'`),this.events[e]=[]}removeAll(){St.debug("Removing all the listener for every event"),this.events={},this.eventIdsMapping={}}event(e){return{register(t,i){St.debug(`Registering hooks for event ID '${e}'`,{hook:t}),this.eventIdsMapping[e][t]=i},get executionCount(){return this.eventIdsMapping[e].executionCount},get hasExecuted(){return Boolean(this.eventIdsMapping[e].executionCount)}}}addComputedEventProps(e,t){var i,n;const o=(null===(i=Ht.plugins[jt.EVENT_PROPS])||void 0===i?void 0:i.get("*"))||{},s=(null===(n=Ht.plugins[jt.EVENT_PROPS])||void 0===n?void 0:n.get(e))||{},r=Object.assign(Object.assign({},o),s);Object.keys(r).forEach((i=>{t[i]=r[i](t,e)}))}};!function(e){e.AND="a",e.OR="o"}(li||(li={}));var di,ui=new class{evaluateExpression(e){return e&&this.recursivelyEvaluateTree(0,e)}recursivelyEvaluateTree(e,t){const i=t[e];if(Rt(i))return Boolean(t[e]);if(It(i))return Boolean(i[0]);if(!At(i))return!0;const n=2*(e+1)-1,o=2*(e+1);return this.isValid(Vt(i)?i:JSON.parse(JSON.stringify(i)),this.recursivelyEvaluateTree(n,t),this.recursivelyEvaluateTree(o,t))}isValid(e,t,i){switch(e){case li.AND:return t&&i;case li.OR:return t||i;default:throw new Error(e)}}};class gi{clearData(){}}!function(e){e.EVENT="event",e.FORMULA="formula",e.CUSTOM="custom",e.SETTINGS="settings",e.DEFAULT="default",e.STORAGE="storage",e.WINDOW="window",e.TAGS="tags"}(di||(di={}));var vi=new class{async getValue({event:e,variableName:t,formulaValues:i}){return St.debug(`Extracting value of variable '${t}'`),It(t)?Promise.all(t.map((async t=>await this.extractVariableValue({event:e,variableName:t,formulaValues:i})))):this.extractVariableValue({event:e,variableName:t,formulaValues:i})}async extractVariableValue({event:e,variableName:t,formulaValues:i}){var n,o;St.debug(`Extracting value of variable '${t}'`);const{type:s,key:r}=this.getVariableTypeAndKey(t);let a,l=!1;switch(St.debug(`Evaluated type and key of variable '${t}' are `,{type:s,key:r}),s){case di.EVENT:a=e;break;case di.FORMULA:a=i;break;case di.CUSTOM:a=qt.custom;break;case di.SETTINGS:a=qt.settings;break;case di.WINDOW:a=this.getValueFromMtWindow(r);break;case di.TAGS:try{a=r.startsWith("js")?await(null===(n=Ht.plugins[jt.TAG])||void 0===n?void 0:n.get(r).fn()):null===(o=Ht.plugins[jt.TAG])||void 0===o?void 0:o.get(r).fn}catch(e){}break;case di.STORAGE:{const e=Ht.plugins[jt.STORAGE],t=r.split("."),[i,n,o]=t,s=null==e?void 0:e.get(i);a="includes"===n?await(s&&s.includes?s.includes(o,"cookies"===i):void 0):await(s&&s.getItem?s.getItem(n,"cookies"===i):void 0);break}default:a=qt,l=!0}let c=s===di.STORAGE||s===di.WINDOW?a:this.extractValue(a,r);return c=s===di.TAGS?a:c,l&&bt(c)&&(c=this.getValueFromMtWindow(r)),St.debug(`Evaluated value of variable '${t}' is '${c}'`),c}async getValueFromMtWindow(e){const t=window.fetcher||{getValue:e=>Promise.resolve(window[e])};let i;try{i=await t.getValue(e)}catch(e){}return i}getVariableTypeAndKey(e){var t;St.debug(`Getting type and key of variable '${e}'`);const i=e.split("."),n=null===(t=i.splice(0,1)[0])||void 0===t?void 0:t.toLowerCase();return Object.values(di).includes(n)?{type:n,key:i.join(".")}:{type:di.DEFAULT,key:e}}extractValue(e,t){try{return e[t]||t.split(".").reduce(((e,t)=>e[t]),e)}catch(e){return}}},hi=new class{sum(e,t){return e.reduce(((e,i)=>e+t.reduce(((e,t)=>e+(Number(i[t])||0)),0)),0)}multiply(e,t){return e.reduce(((e,i)=>e+t.reduce(((e,t)=>e*(Number(i[t])||1)),1)),1)}};class pi{static ordered(e,t){const i=pi.getTriggerConditionsOrderState(e.id);for(let n=0;n<t.length;n++){const o=t[n];if(!i[o]&&!e.currentSatisfiedConditions[o])return!1;i[o]=!0,ti.updateTriggerState(pi.generateTriggerOrderingNamespace(e.id),i)}return!0}static strict(e,t){const i=Object.keys(pi.getTriggerConditionsOrderState(e.id)).map((e=>Number(e))).sort(((e,i)=>t.indexOf(e)-t.indexOf(i))),n=Object.keys(e.currentSatisfiedConditions).filter((t=>Boolean(e.currentSatisfiedConditions[t]))).map((e=>Number(e))).sort(((e,i)=>t.indexOf(e)-t.indexOf(i))),o=[...i,...n].slice(0,t.length);let s={};for(let i=0;i<o.length;i++){if(t[i]!==o[i]){s={};for(let e=0;e<n.length&&t[e]===n[e];e++)s[n[e]]=!0;return ti.updateTriggerState(pi.generateTriggerOrderingNamespace(e.id),s),!1}s[o[i]]=!0}return ti.updateTriggerState(pi.generateTriggerOrderingNamespace(e.id),s),o.length===t.length}static generateTriggerOrderingNamespace(e){return e+".order"}static getTriggerConditionsOrderState(e){return qt.getValue(`${Lt.TRIGGERS}.${this.generateTriggerOrderingNamespace(e)}.state`)||{}}}var wi={sum:hi.sum,multiply:hi.multiply,ordered:pi.ordered,strict:pi.strict};const fi={UNKNOWN_SET_API_TYPE:"Unknown type '{{type}}' found in set API.",EVENTS:{ALREADY_EXISTS:"Event with name '{{eventName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Event with name '{{eventName}}' has not been registered yet. Please use 'add' API to register it."},OPERATORS:{ALREADY_EXISTS:"Operator with name '{{operatorName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Operator with name '{{operatorName}}' has not been registered yet. Please use 'add' API to register it."},FORMULAS:{ALREADY_EXISTS:"Formula with name '{{formulaName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Formula with name '{{formulaName}}' has not been registered yet. Please use 'add' API to register it."},STORAGES:{ALREADY_EXISTS:"Storage with name '{{storageName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Storage with name '{{storageName}}' has not been registered yet. Please use 'add' API to register it."},TAGS:{ALREADY_EXISTS:"Tag with name '{{tagName}}' already exists. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Tag with name '{{tagName}}' has not been registered yet. Please use 'add' API to register it."},EVENT_PROP:{ALREADY_EXISTS:"Event property with name '{{propName}}' already exists for event '{{eventName}}'. Please use 'update' API if you want to override it.",NOT_REGISTERED:"Event property with name '{{propName}}' has not been registered yet for event '{{eventName}}'. Please use 'add' API to register it."}},Ei={EVENTS:{NO_EVENT_TO_REMOVE:"Unable to remove Event '{{eventName}}' as it's not been registered."},OPERATORS:{NO_OPERATOR_TO_REMOVE:"Unable to remove Operator '{{operatorName}}' as it's not been registered."},FORMULAS:{NO_FORMULA_TO_REMOVE:"Unable to remove Formula '{{formulaName}}' as it's not been registered."},STORAGES:{NO_STORAGE_TO_REMOVE:"Unable to remove Storage '{{storageName}}' as it's not been registered."},TAGS:{NO_TAG_TO_REMOVE:"Unable to remove Tag '{{tagName}}' as it's not been registered."},EVENT_PROP:{NO_EVENT_PROP_TO_REMOVE:"Unable to remove Event property '{{propName}}' for event '{{eventName}}' as it's not been registered."}};class mi extends gi{constructor(){super(),this.pluginName=jt.FORMULA,this.formulas={},this.initialize()}add(e,t){St.debug(`Adding formula '${e}' in FormulasManager`),this.formulas[e]?St.error(fi.FORMULAS.ALREADY_EXISTS,{formulaName:e}):this.formulas[e]=t}update(e,t){St.debug(`Updating formula '${e}' in FormulasManager`),this.formulas[e]=t}get(e){return St.debug(`Getting formula '${e}' in FormulasManager`),this.formulas[e]?this.formulas[e]:(St.error(fi.FORMULAS.NOT_REGISTERED,{formulaName:e}),null)}remove(e){St.debug(`Removing formula '${e}' in FormulasManager`),this.formulas[e]?delete this.formulas[e]:St.warn(Ei.FORMULAS.NO_FORMULA_TO_REMOVE,{formulaName:e})}removeAll(){St.debug("Removing all formulas in FormulasManager"),this.formulas={}}initialize(){Object.keys(wi).forEach((e=>{this.add(e,wi[e])}))}}var _i=new class{evaluate(e=[],t){const i={};return e.forEach((e=>{const n=this.evaluateFormulaExpression(e,t);i[e.id]=n})),i}evaluateFilter(e,t){return e.reduce(((e,t)=>this.evaluateFormulaExpression(t,e)),t)}evaluateArgs(e,t){return e.map((e=>this.evaluateFormulaExpression(e,t)))}evaluateFormulaExpression(e,t){var i;return(e.fn||(null===(i=Ht.plugins[jt.FORMULA])||void 0===i?void 0:i.get(e.type)))(At(e.filters)?this.evaluateFilter(e.filters,t):t,At(e.args)?e.args.map((e=>Tt(e)?this.evaluateArgs([e],t)[0]:e)):e.args)}};class Oi{clearData(){}get persistedState(){return""}}function Si(e){return e&&e instanceof Oi}function yi(e){return Tt(e)&&!Si(e)}var Ti=new class{constructor(){this.serializeValidationQueue={}}async isValid(e,t,i,n,o={},s=!1){St.debug(`Checking validity of trigger '${e}'`,{trigger:t,event:i,eventName:n}),this.saveEventState(e,n,!0);const{isValid:r,shouldRemoveEventListener:a}=await this.validateTrigger(t,i,{eventName:n,triggerName:e,exitTriggersMet:o,validateFromState:s});return this.saveTriggerState(e,this.hasTriggerMetBefore(e)||r),{isValid:r,shouldRemoveEventListener:a}}async validateTrigger(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r,validateFromState:a}={},l){return n?(this.serializeValidationQueue[n]=this.serializeValidationQueue[n]||Promise.resolve(),this.serializeValidationQueue[n]=this.serializeValidationQueue[n].then((()=>a?this.validateFromState(e,{triggerName:n,exitTriggersMet:s}):this.validateTriggerHandler(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r},l))),this.serializeValidationQueue[n]):this.validateTriggerHandler(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r},l)}async validateFromState(e,{triggerName:t}={}){const i={},n=e=>{const o=e=>()=>It(e)?n(e):e?!1!==e.persistState&&this.hasConditionMetBefore(t,e.id)?(i[e.id]=!0,Promise.resolve([!0,this.getTimeStampForConditionMet(t,e.id)])):Promise.resolve([!1,0]):null;return Si(e[0])?e[0].fn({},...e.slice(1).map(o)):o(e[0])()};let o=e.cnds;e.dslv&&1!==e.dslv||(o=this.convertLevelOrderToTree(e.cnds,0),o=It(o)?o:[o]);const s=(await n(o))[0];return{isValid:(!e.formula||e.formula.every((e=>{var n,o;return null===(o=null===(n=Ht.plugins[jt.FORMULA])||void 0===n?void 0:n.get(e.type))||void 0===o?void 0:o({id:t,currentSatisfiedConditions:i},e.args)})))&&s,shouldRemoveEventListener:!1}}iterateAndValidate(e,t,i,n,o,s,r={}){const a=e=>async(r={})=>{if(It(e))return this.iterateAndValidate(e,t,i,n,o,s,r);let a=!0,l=!1;if(i){if((!r.doNotUseCache||n!==e.event)&&!1!==e.persistState&&this.hasConditionMetBefore(i,e.id))return St.debug("Trigger condition already met before. Skipping it's validation.",{triggerName:i,conditionId:e.id}),[!0,this.getTimeStampForConditionMet(i,e.id)];a=this.hasEventOccurred(i,e.event),e.hist&&e.event!==n&&(l=!0),a||St.debug("Event hasn't occurred before. Skipping it's validation.",{triggerName:i,event:e.event})}if(n&&e.event!==n)return[!1,0];const c=(a||l)&&await this.validateTriggerOperand(e,e.event===n?t:{fromLocalStorage:!0},{eventName:e.event,skipEventProps:o,triggerName:i});return!c&&!1!==e.persistState&&this.hasConditionMetBefore(i,e.id)?[!0,this.getTimeStampForConditionMet(i,e.id)]:(i&&this.saveConditionState(i,e.id,c,n===e.event?t.VWO.firedTime:null),c&&!1!==e.persistState&&(s[e.id]=!0),[c,c?this.getTimeStampForConditionMet(i,e.id):0])};return Si(e[0])?e[0].fn(r,...e.slice(1).map(a)):a(e[0])()}convertLevelOrderToTree(e,t){if(!e[t])return null;if(Vt(e[t])||Si(e[t])){const i=[e[t]],n=this.convertLevelOrderToTree(e,2*(t+1)-1);n&&i.push(n);const o=this.convertLevelOrderToTree(e,2*(t+1));return o&&i.push(o),i}return e[t]}async validateTriggerHandler(e,t,{eventName:i,triggerName:n,skipEventProps:o,exitTriggersMet:s,skipValidationIfTimer:r}={},a){try{if(!e||!Tt(e))return{isValid:!0,shouldRemoveEventListener:!1};if(r){const{cnds:t}=e,i=e=>It(e)?e.some(i):!(!yi(e)||e.event!==ht.TIMER);if(t.some(i))return{isValid:!0,shouldRemoveEventListener:!1}}const l={};let c=!1;if(i){const{cnds:s}=e,r=s.length,l=async e=>{if(It(e))return void await Promise.all(e.map(l));a&&yi(e)&&oi(e,a);let s=!1;if(yi(e)&&e.event===i){let r=!0;(e.filters||[]).forEach((async e=>{Vt(e)||"exec"===e[1]&&(r=!1)})),r&&(s=await this.validateTriggerOperand(e,t,{eventName:i,triggerName:n,skipEventProps:o}))}s&&(c=!0)};for(let e=0;e<r;++e)await l(s[e])}else c=!0;let d=null==e?void 0:e.cnds;e.dslv&&1!==e.dslv||(d=this.convertLevelOrderToTree(d,0),d=It(d)?d:[d]);const u=(await this.iterateAndValidate(d,t,n,i,o,l,{}))[0];St.debug("Generated tree conditions for trigger",{triggerName:n,treeConditions:u});const g=!e.formula||e.formula.every((e=>{var t,i;return null===(i=null===(t=Ht.plugins[jt.FORMULA])||void 0===t?void 0:t.get(e.type))||void 0===i?void 0:i({id:n,currentSatisfiedConditions:l},e.args)})),v=this.shouldRemoveEventListener(i,d,l,s);return{isValid:c&&g&&u,shouldRemoveEventListener:v}}catch(t){let i;throw(null==e?void 0:e.cnds)||(i="Empty Triggger Present - "+n),new Error(i||t)}}async validateTriggerOperand({filters:e,formula:t,id:i,hist:n},o,{eventName:s,triggerName:r,skipEventProps:a=!1}={}){var l;const c=_i.evaluate(t,[o]);if(n&&Object.keys(n).length&&s&&o){const e=window.VWO.modules.eventHistHandler.getEventsByDate(s,n.dr,o);let t;if(null===(l=n.pf)||void 0===l?void 0:l.length){const i=this.evaluateDSL.bind(this),o=null==e?void 0:e.map((async e=>i(n.pf,{triggerName:r,eventName:s,event:e,formulaValues:c})));t=o&&await Promise.all(o),t=e.filter(((e,i)=>t[i]))}else t=e;Object.keys(n.data).length&&(o._meta=window.VWO.modules.eventHistHandler.getCumulativeData(t,n.data))}const d=null==e?void 0:e.map((async(e,t)=>{var n,l,d,u,g;if(Vt(e))return e;const v=null===(u=null===(d=null===(l=null===(n=o)||void 0===n?void 0:n.preComputedConds)||void 0===l?void 0:l[r])||void 0===d?void 0:d[i])||void 0===u?void 0:u[t];if("boolean"==typeof v)return v;const[h,p,...w]=e;if(a&&h.startsWith(di.EVENT+"."))return!0;const f=await vi.getValue({event:o,variableName:h,formulaValues:c}),E=null===(g=Ht.plugins[jt.OPERATOR])||void 0===g?void 0:g.get(p);return await(null==E?void 0:E(f,...w,{eventName:s,triggerName:r,jsLibUtils:Bt.get("jsLibUtils")}))||!1})),u=d&&await Promise.all(d);return!u||this.evaluateFilterExpression(u)}evaluateFilterExpression(e){if(!Rt(e[0]))return ui.evaluateExpression(e);for(let t=e.length-1;t>=0;--t)if(!e[t])return!1;return!0}hasEventOccurred(e,t){return Boolean(qt.getValue(`${Lt.TRIGGERS}.${this.generateTriggerEventId(e,t)}.state`))}hasConditionMetBefore(e,t){return Boolean(qt.getValue(`${Lt.TRIGGERS}.${this.generateTriggerConditionId(e,t)}.state`))}getTimeStampForConditionMet(e,t){return Number(qt.getValue(`${Lt.TRIGGERS}.${this.generateTriggerConditionId(e,t)}.lastMetTS`))}hasTriggerMetBefore(e){return Boolean(qt.getValue(`${Lt.TRIGGERS}.${e}.state`))}saveTriggerState(e,t){ti.updateTriggerState(e,t)}saveEventState(e,t,i){St.debug("Saving trigger event's state i.e. it's event occurred or not.",{triggerName:e,eventName:t,state:i}),ti.updateTriggerState(this.generateTriggerEventId(e,t),i)}saveConditionState(e,t,i,n){St.debug("Saving trigger condition's state i.e. it's condition satisfied or not.",{triggerName:e,conditionId:t,state:i}),ti.updateTriggerState(this.generateTriggerConditionId(e,t),i),i&&ti.updateTriggerLastMetTS(this.generateTriggerConditionId(e,t),n)}generateTriggerConditionId(e,t){return`${e}.trigger.${t}`}generateTriggerEventId(e,t){return`${e}.event.${t}`}shouldRemoveEventListener(e,t,i,n){if(e===ht.TIMER){const e=t=>It(t)?t.every(e):!(yi(t)&&t.event===ht.TIMER&&!n[t.exitTrigger]&&!i[t.id]);return t.every(e)}return!1}async evaluateDSL(e,{triggerName:t,eventName:i,event:n,formulaValues:o}){if(It(e)&&e.length>1){const s=e.map((async e=>{var s;let r;if(e||(r=!1),Vt(e)&&(r=e),It(e))if([zt.AND,zt.OR].includes(e[0]))r=this.evaluateDSL(e,{triggerName:t,eventName:i,event:n,formulaValues:o});else{const[a,l,...c]=e,d=null===(s=Ht.plugins[jt.OPERATOR])||void 0===s?void 0:s.get(l),u=await vi.getValue({event:n,variableName:a,formulaValues:o});r=await(null==d?void 0:d(u,...c,{eventName:i,triggerName:t,jsLibUtils:Bt.get("jsLibUtils")}))||!1}return r})),r=s&&await Promise.all(s);return this.evaluateTree(r)}return!1}evaluateTree(e){let t=!1;switch(e[0]){case zt.AND:t=!e.includes(!1);break;case zt.OR:t=e.includes(!0)}return t}},Ii=new class{constructor(){this.triggerEventListeners={}}initialize(e){Object.keys(e).forEach((t=>{this.triggerEventListeners[t]?ti.updateTriggerExecutionCount(t,0):this.add(t,e[t])}))}add(e,t,i){var n;St.debug(`Attaching event listeners for all the events using in '${e}' trigger conditions.`);const o={};this.triggerEventListeners[e]=this.triggerEventListeners[e]||{};const s=n=>{var r;if(It(n))n.forEach(s);else if(yi(n)){if(i&&oi(n,i),!this.triggerEventListeners[e][n.event]){null===(r=Ht.plugins[jt.EVENT])||void 0===r||r.updateConditions(n.event,[this.extractDomEventFromCondition(e,n)]),n.persistState&&this.executeTriggerValidatorOfHistoryEvents(e,t,n.event),n.hist&&(window.VWO.modules.eventHistHandler.triggerEvents.push({triggerName:e,trigger:t,eventName:n.event}),this.validateEventFromHistHandler(e,t,n.event));const i=ci.on(n.event,(async(n,o)=>{await this.validateAndDispatchTriggerEvent(e,t,n,o,i)}));this.triggerEventListeners[e][n.event]=i}if(n.exitTrigger){const i=this.getTriggerEventName(n.exitTrigger),s=ci.on(i,(r=>{o[n.exitTrigger]=1;const a=this.triggerEventListeners[e][n.event];this.validateAndDispatchTriggerEvent(e,t,r,n.event,a,o),ci.off(i,s)}));this.triggerEventListeners[e][i]=s}}};null===(n=null==t?void 0:t.cnds)||void 0===n||n.forEach(s)}async validateTriggerFromHistory(e,t){var i;const n=null===(i=null==t?void 0:t.cnds)||void 0===i?void 0:i.map((async i=>{var n;if(null===(n=i)||void 0===n?void 0:n.event){const n=qt.getHistoryEvents(i.event);let o=!1;const s=n.map((async n=>{const{isValid:s}=await Ti.isValid(e,t,n,i.event);s&&(o=s)}));return await Promise.all(s),o}return i})),o=await Promise.all(n);return ui.evaluateExpression(o)}executeTriggerValidatorOfHistoryEvents(e,t,i){qt.getHistoryEvents(i).forEach((n=>this.validateAndDispatchTriggerEvent(e,t,n,i)))}async validateEventFromHistHandler(e,t,i){const n=window.VWO.modules.eventHistHandler.eventHist[i],o=window.VWO.modules.eventHistHandler.eventHistForCurrentSession[i];(n||o)&&await Ti.isValid(e,t,ai({isCustomEvent:!0,fromLocalStorage:!0}),i)}async validateAndDispatchTriggerEvent(e,t,i,n,o,s,r=!1){let a=this.getExecutionCount(e)||0;if(t.occurrence&&t.occurrence<=a)return;const{isValid:l,shouldRemoveEventListener:c}=await Ti.isValid(e,t,i,n,s,r);if(c&&ci.off(n,o),l){if(a=this.getExecutionCount(e)||0,t.occurrence&&t.occurrence<=a)return;ti.updateTriggerExecutionCount(e,a+1),await ci.trigger(this.getTriggerEventName(e),i)}}remove(e){St.debug(`Removing event listeners of trigger '${e}'`),Object.entries(this.triggerEventListeners[e]).forEach((([e,t])=>{ci.off(e,t)})),delete this.triggerEventListeners[e]}removeAll(){Object.keys(this.triggerEventListeners).forEach((e=>{this.remove(e)}))}extractDomEvents(e){St.debug("Extracting DOM events from triggers config");const t={};return Object.keys(e).forEach((i=>{var n,o;null===(o=null===(n=e[i])||void 0===n?void 0:n.cnds)||void 0===o||o.forEach((e=>{yi(e)&&this.extractDomEventFromCondition(i,e)&&(t[e.event]=t[e.event]||[],t[e.event].push(Object.assign(Object.assign({},e),{triggerName:i})))}))})),t}extractDomEventFromCondition(e,t){if(t.event===wt.PAGE_UNLOAD_EVENT)this.setPageUnloadTrigger(e);else if(t.event.toLowerCase().includes(vt.DOM+"_"))return Object.assign(Object.assign({},t),{triggerName:e});return null}setPageUnloadTrigger(e){window.VWO._.pageUnloadTriggers=window.VWO._.pageUnloadTriggers||{},window.VWO._.pageUnloadTriggers[e]=!0}getTriggerEventName(e){return`${ht.TRIGGER}.${e}`}getExecutionCount(e){const t=qt.getValue(`${Lt.TRIGGERS}.${e}.executionCount`);return null!=t?t:0}},Ci={log:(new class{log({event:e,data:t,getters:i,actions:n,vwoEvents:o}){console.log(e,t,i,n,o)}}).log},bi=Object.freeze({__proto__:null,default:Ci});class Ai extends gi{constructor(){super(),this.pluginName=jt.TAG,this.tags={},this.initialize()}add(e,t,{occurrence:i,scope:n,sync:o}={}){St.debug(`Adding tag '${e}' in TagsManager`),this.tags[e]?St.error(fi.TAGS.ALREADY_EXISTS,{tagName:e}):this.tags[e]={fn:t,occurrence:i,scope:n,sync:o}}update(e,t,{occurrence:i,scope:n,sync:o,fireUniquelyForEveryEvent:s}={}){St.debug(`Updating tag '${e}' in TagsManager`),this.tags[e]={fn:t,occurrence:i,scope:n,sync:o,fireUniquelyForEveryEvent:s}}get(e){return St.debug(`Getting tag '${e}' in TagsManager`),this.tags[e]?this.tags[e]:(St.error(fi.TAGS.NOT_REGISTERED,{tagName:e}),null)}remove(e){St.debug(`Removing tag '${e}' in TagsManager`),this.tags[e]?delete this.tags[e]:St.warn(Ei.TAGS.NO_TAG_TO_REMOVE,{tagName:e})}removeAll(){St.debug("Removing all tags in TagsManager"),this.tags={}}initialize(){Object.keys(bi).forEach((e=>{this.add(e,bi[e])}))}}var Ni=new class{flushTagData(e){delete this._vwoEventsInstance[e]}getVwoInstanceObject(){return this._vwoEventsInstance}async executeTagUniquelyForEveryEvent(e){if(!e||!e.tags)return;const t=[];Object.keys(e.tags).forEach((i=>{const n=e.tags[i];if(n){const o=n.data,s=this.getTagDetails(i).fn({data:o,event:e.event,getters:qt,actions:ti,vwoEvents:this._vwoEventsInstance});t.push(s)}})),await Promise.all(t)}async execute(e,t,i,n,o){var s,r;this._vwoEventsInstance=o;const a="metric"===t.id?t.data:await vi.getValue({variableName:`${Lt.SETTINGS}.${t.data}`}),l=this.generateTagId(t.id),c=qt.tags[l].executionCount||0,d=this.getTagDetails(t.id);if(!Nt(d.occurrence)||c<d.occurrence){St.info(`Started executing tag '${t.id}' because of:`,i),ti.updateTagState(l,{hasExecuted:!0,executionCount:(qt.tags[l].executionCount||0)+1,stoppedByExitCondition:!1}),ri().mark("tag-"+t.id);const o=i.name;if(this._vwoEventsInstance[o]=this._vwoEventsInstance[o]||{},o&&n.fireUniquelyForEveryEvent)return this._vwoEventsInstance[o].event=this._vwoEventsInstance[o].event||i,this._vwoEventsInstance[o].tags=this._vwoEventsInstance[o].tags||{},this._vwoEventsInstance[o].tags[t.id]=this._vwoEventsInstance[o].tags[t.id]||{},this._vwoEventsInstance[o].tags[t.id].data=this._vwoEventsInstance[o].tags[t.id].data||[],void this._vwoEventsInstance[o].tags[t.id].data.push(a);n.sync||await Promise.resolve();const c=null===(r=null===(s=d.fn)||void 0===s?void 0:s.type)||void 0===r?void 0:r.startsWith("vwoWrappedFn");i.executingTagTrigger=n.triggerName,await d.fn({data:a,event:i,getters:qt,actions:ti,vwoEvents:c?null:e})}else St.info(`Maximum occurrence of ${d.occurrence} has reached. Skipping executing tag '${t.id}'`)}generateTagId(e){return""+e}getTagDetails(e){var t;return null===(t=Ht.plugins[jt.TAG])||void 0===t?void 0:t.get(e)}};let Vi=0;var Ri=new class{constructor(){this.rulesMap={}}initialize(e,t){this.vwoEventsInstance=e,Object.keys(t).forEach((e=>{this.remove(e),this.add(t[e],e)}))}add(e,t){(It(e.triggers)?e.triggers:[e.triggers]).forEach((i=>{this.rulesMap[i]?St.debug(`Skipping adding the listeners for trigger ${i} as rulesMap exist`):this.attachTriggersListeners(this.vwoEventsInstance,i),this.rulesMap[i]=this.rulesMap[i]||[],e.tags.forEach((n=>{this.rulesMap[i].push(Object.assign(Object.assign({},e),{id:t,tags:[n]}))})),this.sortPriorityRuleTags(i)}))}remove(e){St.debug(`Removing all event listeners of rule '${e}'`),Object.keys(this.rulesMap).forEach((t=>{this.rulesMap[t]=this.rulesMap[t].filter((t=>t.id!==e))}))}removeAll(){Object.keys(this.rulesMap).forEach((e=>{ci.remove(Ii.getTriggerEventName(e)),delete this.rulesMap[e]}))}generateRandomRuleId(){return Vi++,"rule_"+Vi}attachTriggersListeners(e,t){ci.on(Ii.getTriggerEventName(t),(async i=>{const n=this.rulesMap[t].map((n=>n.tags.map((async o=>{var s,r,a;const l=At(o.shouldConsiderParentExitCondition)?o.shouldConsiderParentExitCondition:n.shouldConsiderParentExitCondition,c=this.getExitConditions(i,n.exitCondition,o.exitCondition,l),d=await this.shouldExit(i,c),u=Ni.generateTagId(o.id);if(ti.updateTagState(u,{stoppedByExitCondition:d,lastExitConditions:c}),d)St.info(`Exit condition(s) met. Not executing tag '${o.id}'`,c);else{const n=null===(r=null===(s=this.vwoEventsInstance.tags)||void 0===s?void 0:s.tags)||void 0===r?void 0:r[o.id];await Ni.execute(Object.assign(Object.assign({},e),{[ft.EXIT_CONDITIONS]:c,clearData:e.clearData.bind(e)}),o,i,{sync:n.sync||(null===(a=i.props)||void 0===a?void 0:a.fireLinkedTagSync),fireUniquelyForEveryEvent:n.fireUniquelyForEveryEvent,triggerName:t},e)}}))));await Promise.all(Array.prototype.concat.apply([],n))}))}sortPriorityRuleTags(e){this.rulesMap[e].sort(((e,t)=>{const i=e.tags[0],n=t.tags[0];return(At(i.priority)&&-1!==i.priority?i.priority:1/0)-(At(n.priority)&&-1!==n.priority?n.priority:1/0)}))}assignExecutionProperty(e){const t=this.rulesMap[e],i={},n=["sync","fireUniquelyForEveryEvent"];for(let e=t.length-1;e>=0;e--){const o=t[e].tags[0],s=i[o.id]||Ni.getTagDetails(o.id);Object.keys(n).forEach((e=>{const t=n[e];o[t]=s[t]})),i[o.id]=s}}getExitConditions(e,t,i,n=!0){const o=n?[...e[ft.EXIT_CONDITIONS]||[]]:[];return t&&o.push(t),i&&o.push(i),o}async shouldExit(e,t=[]){const i=t.length;for(let n=0;n<i;++n){const i=t[n];if(await Ti.validateTriggerOperand({filters:i},e))return!0}return!1}};class xi{static get(e){const t=document.cookie.split("; ").find((t=>t.startsWith(e+"=")));return(null==t?void 0:t.split("=")[1])||""}static expire(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}}class Pi{static init(){Pi.actualReferrer=xi.get("_vwo_referrer"),xi.expire("_vwo_referrer"),"string"!=typeof Pi.actualReferrer&&(Pi.actualReferrer=document.referrer)}static get(){return-1===window.location.search.search("_vwo_test_ref")?document.referrer:Pi.actualReferrer}}Pi.actualReferrer="";class Di{static get(){const{queryParams:e}=Ot.parseUrl(document.URL);let t,i;const n=Pi.get();if(/facebook\.com|quora\.com|reddit\.com|imgur\.com|tapiture\.com|disqus\.com|9gag\.com|tumblr\.com|plus\.google|stumbleupon\.com|twitter\.com|linkedin|del\.icio\.us|delicious\.com|technorati|digg\.com| hootsuite|stumbleupon|myspace|bit\.ly|tr\.im|tinyurl|ow\.ly|reddit|m\.facebook\.com|youtube|flickr|pinterest\.com|^https:\/\/t\.co\/|tweetdeck/.test(n))return"soc";Di.organicReferralSource()&&(t=!0);const{gclid:o,utm_medium:s}=e;if(n&&(i=!0),t&&o)return"pst";if(s){if("email"===(null==s?void 0:s.toString().toLowerCase()))return"eml";if(null==s?void 0:s.toString().match(new RegExp("^(?:cpc|ppc|cpa|cpm|cpv|cpp)$","i")))return"pst"}else if(t)return"org";return i?"ref":"dir"}static organicReferralSource(){for(let e=0;e<Di.organicReferrals.length;e++)if(-1!==Pi.get().indexOf(Di.organicReferrals[e].s))return Di.organicReferrals[e].i;return 0}}Di.organicReferrals=[{s:"search.yahoo.com/",p:"p",i:1},{s:"www.google.",p:"q",i:2},{s:"www.bing.com/",p:"q",i:3},{s:".ask.com/",p:"q",i:4},{s:"www.search.com/",p:"q",i:5},{s:"www.baidu.com/",p:"wd",i:6},{s:"search.aol.com/",p:"q",i:7},{s:"duckduckgo.com/",p:"q",i:8}];const Li={get url(){return window.location.href},get refUrl(){return Pi.get()},get trafficSource(){return Di.get()},get queryParams(){return Ot.parseUrl(window.location.href).queryParams},get timeSpent(){const e=Date.now();return Math.floor((Date.now()-e)/1e3)},get scroll(){var e,t;const{scrollY:i,innerHeight:n}=window,o=100*i/((null===(e=document.body)||void 0===e?void 0:e.offsetHeight)-n);return{pxTop:i,pxBottom:(null===(t=document.body)||void 0===t?void 0:t.offsetHeight)-n-i,top:o,bottom:100-o}},get operatingSystem(){var e;const{visitorDetails:t}=Li;if(null===(e=null==t?void 0:t.UA)||void 0===e?void 0:e.os)return t.UA.os;const{appVersion:i}=window.navigator;return i.includes("Win")?"windows":i.includes("Mac")?"macOS":i.includes("X11")?"unix":i.includes("Linux")?"linux":""},get browser(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.UA)||void 0===t?void 0:t.br},get visitorDetails(){var e,t,i,n;return(null===(n=null===(i=null===(t=null===(e=window.VWO)||void 0===e?void 0:e._)||void 0===t?void 0:t.allSettings)||void 0===i?void 0:i.dataStore)||void 0===n?void 0:n.plugins)||{}},get userAgent(){return navigator.userAgent},get deviceType(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.UA)||void 0===t?void 0:t.dt},get deviceName(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.UA)||void 0===t?void 0:t.de},get day(){return(new Date).getDay().toString()},get hour(){return(new Date).getHours()},get visitorType(){var e,t;const i=null===(t=null===(e=window.VWO)||void 0===e?void 0:e.data)||void 0===t?void 0:t.vi;return(null==i?void 0:i.vt)||"new"},get oldVisitorType(){var e,t;const i=null===(t=null===(e=window.VWO)||void 0===e?void 0:e.data)||void 0===t?void 0:t.vi;return(null==i?void 0:i.vt)||"new"},get ip(){var e;return null===(e=Li.visitorDetails)||void 0===e?void 0:e.IP},get country(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.cn},get countryCode(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.cc},get city(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.c},get region(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.r},get gpc(){var e,t;return null===(t=null===(e=Li.visitorDetails)||void 0===e?void 0:e.GEO)||void 0===t?void 0:t.p},get loc(){var e,t,i;const{visitorDetails:n}=Li;return{countryCode:null===(e=null==n?void 0:n.GEO)||void 0===e?void 0:e.cc,city:null===(t=null==n?void 0:n.GEO)||void 0===t?void 0:t.c,region:null===(i=null==n?void 0:n.GEO)||void 0===i?void 0:i.r}}};var ki;!function(e){e.LOCAL_STORAGE="localStorage",e.LOCAL_STORAGE_SERVICE="localStorageService"}(ki||(ki={}));var Ui=new class extends class{}{constructor(){super(),this.storageName=ki.LOCAL_STORAGE}get(){return window.localStorage}getItem(e){return window.localStorage.getItem(e)}set(e){Object.keys(e).forEach((t=>{window.localStorage.setItem(t,e[t])}))}setItem(e,t){window.localStorage.setItem(e,t)}deleteAll(){window.localStorage.clear()}deleteItem(e){window.localStorage.removeItem(e)}includes(){return 0}},Wi=Object.freeze({__proto__:null,localStorage:Ui});class Mi extends gi{constructor(){super(),this.pluginName=jt.STORAGE,this.storages={},this.initialize()}add(e,t){St.debug(`Adding storage plugin '${t.storageName}' in StoragesManager`),this.storages[e]?St.error(fi.STORAGES.ALREADY_EXISTS,{storageName:e}):this.storages[e]=t}update(e,t){St.debug(`Updating storage plugin '${e}' in StoragesManager`),this.storages[e]=t}get(e){return St.debug(`Getting storage plugin '${e}' in StoragesManager`),this.storages[e]?this.storages[e]:(St.error(fi.STORAGES.NOT_REGISTERED,{storageName:e}),null)}remove(e){St.debug(`Removing storage plugin '${e}' in StoragesManager`),this.storages[e]?delete this.storages[e]:St.warn(Ei.STORAGES.NO_STORAGE_TO_REMOVE,{storageName:e})}removeAll(){St.debug("Removing all storage plugins in StoragesManager"),this.storages={}}initialize(){Object.keys(Wi).forEach((e=>{this.add(e,Wi[e])}))}}var Gi,Fi,ji=new class extends gi{constructor(){super(),this.pluginName=jt.OPERATOR,this.operators={}}add(e,t){St.debug(`Adding operator '${e}' in OperatorsManager`),this.operators[e]?St.error(fi.OPERATORS.ALREADY_EXISTS,{operatorName:e}):this.operators[e]=t}update(e,t){St.debug(`Updating operator '${e}' in OperatorsManager`),this.operators[e]=t}get(e){return St.debug(`Getting operator '${e}' in OperatorsManager`),this.operators[e]?this.operators[e]:(St.error(fi.OPERATORS.NOT_REGISTERED,{operatorName:e}),null)}remove(e){St.debug(`Removing operator '${e}' in OperatorsManager`),this.operators[e]?delete this.operators[e]:St.warn(Ei.OPERATORS.NO_OPERATOR_TO_REMOVE,{operatorName:e})}removeAll(){St.debug("Removing all operators in OperatorsManager"),this.operators={}}initialize(e){Object.assign(this.operators,e)}};!function(e){e.EQUAL="eq",e.NOT_EQUAL="neq",e.EQUAL_CASE_SENSITIVE="eqs",e.NOT_EQUAL_CASE_SENSITIVE="neqs",e.REGEX="reg",e.REGEX_CASE_SENSITIVE="regs",e.CONTAINS="cn",e.NOT_CONTAINS="ncn",e.BLANK="bl",e.NOT_BLANK="nbl",e.GREATER_THAN="gt",e.LESS_THAN="lt",e.GREATER_THAN_EQUAL="gte",e.LESS_THAN_EQUAL="lte",e.IN="in",e.NOT_IN="nin",e.EXEC="exec",e.SELECTOR="sel",e.IN_LOCATION="inloc",e.NOT_IN_LOCATION="ninloc",e.URL_REGEX="urlReg",e.NOT_URL_REGEX="nUrlReg",e.RANGE_COMPARISON="rg",e.PAGE_CONFIG_EVALUATION="pgc"}(Gi||(Gi={})),function(e){e.PAGE="PAGE",e.EVENT="EVENT",e.JS_VARIABLE="JS_VARIABLE"}(Fi||(Fi={}));class Hi extends gi{constructor(e,{globals:t={}}={}){super(),this.pluginName=jt.EVENT,this.vwoEventsInstance=e,this.config={domEventsDebounceTime:t.domEventsDebounceTime},this.events={},this.initialize()}add(...e){var t,i;let n,o,s,r;Tt(e[0])?([{eventName:n}]=e,o=e[0].on.bind(e[0]),s=null===(t=e[0].off)||void 0===t?void 0:t.bind(e[0]),r=null===(i=e[0].eventConditionsUpdate)||void 0===i?void 0:i.bind(e[0])):[n,o,s,r]=e,St.debug(`Adding event listener '${n}' in EventsManager`),this.events[n]?St.error(fi.EVENTS.ALREADY_EXISTS,{eventName:n}):(this.events[n]={on:o,off:s,eventConditionsUpdate:r},o((e=>this.triggerCustomEvent(n,e)),{vwoEvents:this.vwoEventsInstance}))}updateCustomEvents(...e){var t;let i,n,o;Tt(e[0])?([{eventName:i}]=e,n=e[0].on.bind(e[0]),o=null===(t=e[0].off)||void 0===t?void 0:t.bind(e[0])):[i,n,o]=e,St.debug(`Updating event listener '${i}' in EventsManager`),this.events[i]={on:n,off:o},n((e=>this.triggerCustomEvent(i,e)),{vwoEvents:this.vwoEventsInstance})}update(e,t){Object.keys(e).forEach((t=>{this.updateCustomEvents(t,e[t].fn)})),Object.keys(t).forEach((e=>{if(this.events[e]){const{eventConditionsUpdate:i}=this.events[e];i&&i(t[e])}else this.addDomEvent(e,t[e])}))}get(e){return St.debug(`Getting event listener '${e}' definition from EventsManager`),this.events[e]?this.events[e]:(St.error(fi.EVENTS.NOT_REGISTERED,{eventName:e}),null)}remove(e){var t,i;St.debug(`Removing event listener '${e}' from EventsManager`),this.events[e]?(null===(i=(t=this.events[e]).off)||void 0===i||i.call(t),delete this.events[e],ci.remove(e)):St.warn(Ei.EVENTS.NO_EVENT_TO_REMOVE,{eventName:e})}removeAll(){St.debug("Removing all event listeners from EventsManager"),Object.keys(this.events).forEach((e=>{var t,i;null===(i=(t=this.events[e]).off)||void 0===i||i.call(t)})),ci.removeAll(),this.events={}}addDomEvent(e,t){const{preDefinedEvents:i}=this.vwoEventsInstance;!this.events[e]&&e.toLowerCase().includes(vt.DOM+"_")&&(e===vt.DOM+"_click"?this.add(new i.ClickDomEvent(t)):e===vt.DOM+"_submit"?this.add(new i.SubmitDomEvent(t)):this.add(new i.GenericDomEvent(e,t,this.config.domEventsDebounceTime)))}updateConditions(e,t){if(this.events[e]){if(e.toLowerCase().includes(vt.DOM+"_")){const{eventConditionsUpdate:i}=this.events[e];i&&Array.isArray(t)&&i(t)}}else this.addDomEvent(e,t)}triggerCustomEvent(e,t){ci.trigger(e,t)}initialize(){const{preDefinedEvents:e}=this.vwoEventsInstance;Object.keys(e).forEach((t=>{t.endsWith("DomEvent")||this.add(new e[t])}))}}const $i={[Gi.EQUAL]:(e,t)=>String(e).toLowerCase()===String(t).toLowerCase(),[Gi.NOT_EQUAL]:(e,t)=>!$i[Gi.EQUAL](e,t),[Gi.EQUAL_CASE_SENSITIVE]:(e,t)=>String(e)===String(t),[Gi.NOT_EQUAL_CASE_SENSITIVE]:(e,t)=>!$i[Gi.EQUAL_CASE_SENSITIVE](e,t),[Gi.REGEX](e,t){try{return new RegExp(t,"i").test(String(e))}catch(e){return!1}},[Gi.URL_REGEX](e,t,i){const n=null==i?void 0:i.jsLibUtils;return n?n.verifyUrl(e,t,null,null==i?void 0:i.pageUrl):$i[Gi.REGEX](e,t)},[Gi.NOT_URL_REGEX]:(e,t,i)=>!$i[Gi.URL_REGEX](e,t,i),[Gi.REGEX_CASE_SENSITIVE](e,t){try{return new RegExp(t).test(String(e))}catch(e){return!1}},[Gi.CONTAINS]:(e,t)=>String(e).toLowerCase().includes(String(t).toLowerCase()),[Gi.NOT_CONTAINS]:(e,t)=>!$i[Gi.CONTAINS](e,t),[Gi.BLANK]:e=>!e,[Gi.NOT_BLANK]:e=>!$i[Gi.BLANK](e),[Gi.GREATER_THAN](e,t){if(!At(e)||!At(t))return!1;const i=+e,n=+t;return Nt(i)&&Nt(n)&&i>n},[Gi.GREATER_THAN_EQUAL](e,t){if(!At(e)||!At(t))return!1;const i=+e,n=+t;return Nt(i)&&Nt(n)&&i>=n},[Gi.LESS_THAN](e,t){if(!At(e)||!At(t))return!1;const i=+e,n=+t;return Nt(i)&&Nt(n)&&i<n},[Gi.LESS_THAN_EQUAL](e,t){if(!At(e)||!At(t))return!1;const i=+e,n=+t;return Nt(i)&&Nt(n)&&i<=n},[Gi.NOT_IN_LOCATION](e,t){let i=!1;if(!t||0===t.length)return!1;for(let n=0;n<t.length;n++){const o=t[n];if(o===e.countryCode||o===`${e.countryCode}-${e.region}`||o===`${e.countryCode}-${e.region}-${e.city}`){i=!1;break}i=!0}return i},[Gi.IN_LOCATION](e,t){let i=!1;if(!t||0===t.length)return!1;for(let n=0;n<t.length;n++){const o=t[n];if(o===e.countryCode||o===`${e.countryCode}-${e.region}`||o===`${e.countryCode}-${e.region}-${e.city}`){i=!0;break}}return i},[Gi.IN]:(e,t)=>t.map((e=>String(e).toLowerCase())).includes(String(e).toLowerCase()),[Gi.NOT_IN]:(e,t)=>!$i[Gi.IN](e,t),[Gi.RANGE_COMPARISON](e,t){try{const i=JSON.parse(e),n=t.split("'")[1].split("-"),o=n[0],s=n[1];return $i[Gi.GREATER_THAN_EQUAL](i[0],parseInt(o,10))&&$i[Gi.LESS_THAN_EQUAL](i[0],parseInt(s,10))}catch(e){return St.info("RANGE OPERATOR ERROR: "+(e&&e.stack)),!1}},[Gi.PAGE_CONFIG_EVALUATION]:(e,t)=>Xt.validatePage(t,!1,e).didMatch};var Bi=Object.assign($i,{[Gi.EXEC](e,{triggerName:t=""}={}){if(!e)return!1;for(let i=0;i<e.length;i++){const n=e[i];if(!n)break;window.VWO._.pageNo=window.VWO._.pageNo||0;const{pageNo:o}=window.VWO._,s=()=>{o===window.VWO._.pageNo&&ci.trigger(Ii.getTriggerEventName(t))};try{n(s,window.vwo_$)}catch(e){St.warn("Issue with custom trigger "+(null==n?void 0:n.toString()))}}return!1}});ji.initialize(Bi);const Ji={};class Ki extends gi{constructor(){super(),this.pluginName=jt.EVENT_PROPS,this.eventsProps={},this.initialize()}add(e,t,i){St.debug(`Adding computed prop '${t}' of event '${e}'.`),this.eventsProps[e]=this.eventsProps[e]||{},this.eventsProps[e][t]?St.error(fi.EVENT_PROP.ALREADY_EXISTS,{propName:t,eventName:e}):this.eventsProps[e][t]=i}update(e,t,i){St.debug(`Updating computed prop '${t}' of event '${e}'.`),this.eventsProps[e]=this.eventsProps[e]||{},this.eventsProps[e][t]=i}get(e,t){var i;return St.debug(`Getting '${t||"all"}' computed prop of event '${e}'.`),t?(null===(i=this.eventsProps[e])||void 0===i?void 0:i[t])?this.eventsProps[e][t]:(St.error(fi.EVENT_PROP.NOT_REGISTERED,{eventName:e,propName:t}),null):this.eventsProps[e]||{}}remove(e,t){var i;St.debug(`Removing '${t||"all"}' computed prop of event '${e}'.`),t?(null===(i=this.eventsProps[e])||void 0===i?void 0:i[t])?delete this.eventsProps[e][t]:St.warn(Ei.EVENT_PROP.NO_EVENT_PROP_TO_REMOVE,{eventName:e,propName:t}):this.eventsProps[e]={}}removeAll(){St.debug("Removing all computed props of all events"),this.eventsProps={}}initialize(){Object.keys(Ji).forEach((e=>{Object.keys(Ji[e]).forEach((t=>{this.add(e,t,Ji[e][t])}))}))}}var zi=Object.freeze({__proto__:null,A:class extends Oi{async fn(e,...t){const i=await Promise.all(t.map((t=>t(e))));let n=0;for(let e=i.length-1;e>=0;--e){const t=i[e];if(!t[0])return[!1,0];n=t[1]>n?t[1]:n}return[!0,n]}toJSON(){return"a"}},O:class extends Oi{async fn(e,...t){const i=await Promise.all(t.map((t=>t(e))));let n=1/0,o=!1;for(let e=i.length-1;e>=0;--e){const t=i[e];t[0]&&(o=!0,n=t[1]<n?t[1]:n)}return[o,o?n:0]}toJSON(){return"o"}},TS:class extends Oi{constructor({data:e},{trigger:t,triggerName:i}){super(),[this.op]=e;const n=e[1];this.threshold="INF"===n?1/0:1e3*n,this.validateFromStateAndDispatchTriggerEvent=()=>Ii.validateAndDispatchTriggerEvent(i,t,{},"",null,null,!0),this.isTimeoutCompleted=!1}lt(e,t){if(e[0]&&t[0]){this.previousLHS=e[1];const i=t[1]-e[1];if(i>=0&&i<=this.threshold)return[!0,t[1]]}return[!1,0]}gtn(e,t){if(!e[0])return[!1,0];if(this.isTimeoutCompleted)return[!0,e[1]+this.threshold];if(this.threshold===1/0)return[!1,0];if(t[1]>e[1])return this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.lt(e,t)[0]?[!1,0]:[!0,e[1]+this.threshold];if(!this.timeout||this.previousLHS!==e[1]){this.previousLHS=e[1],this.isTimeoutCompleted=!1;const t=e[1]+this.threshold-Date.now();this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.isTimeoutCompleted=!0,this.validateFromStateAndDispatchTriggerEvent()}),t>0?t:0)}return[!1,0]}async fn(e,t,i){const n=await t({doNotUseCache:e.doNotUseCache||!this._persistedState}),o=i?await i({doNotUseCache:e.doNotUseCache||!this._persistedState}):[!1,0];if(n[0]&&!n[1])return[!0,0];if(!e.doNotUseCache&&this._persistedState)return this._persistedState;const s=this[this.op](n,o);return s[0]&&(this._persistedState=s),s}get persistedData(){var e;return null!==(e=JSON.stringify(this._persistedState))&&void 0!==e?e:""}toJSON(){return{op:"ts",data:[this.op,this.threshold/1e3]}}clearData(){clearTimeout(this.timeout),this.timeout=void 0,this.isTimeoutCompleted=!1,this._persistedState=null}}});class Yi extends gi{constructor(){super(),this.pluginName=jt.CONDITION_LEVEL_OPERATOR,this.operators={},this.initialize()}add(e,t){St.debug(`Adding Condition Level operator '${e}' in CLOperatorsManager`),this.operators[e]?St.error(fi.OPERATORS.ALREADY_EXISTS,{operatorName:e}):this.operators[e]={definition:t,instances:[]}}update(e,t){St.debug(`Updating operator '${e}' in CLOperatorsManager`),this.operators[e].definition=t}get(e,t,{trigger:i,triggerName:n}){St.debug(`Getting operator '${e}' in CLOperatorsManager`);const o=this.operators[e.toUpperCase()];if(!o)return St.error(fi.OPERATORS.NOT_REGISTERED,{operatorName:e}),null;const s=new o.definition(t,{trigger:i,triggerName:n});return o.instances.push(s),s}remove(e){St.debug(`Removing operator '${e}' in CLOperatorsManager`),this.operators[e]?delete this.operators[e]:St.warn(Ei.OPERATORS.NO_OPERATOR_TO_REMOVE,{operatorName:e})}removeAll(){St.debug("Removing all operators in CLOperatorsManager"),this.operators={}}initialize(){Object.keys(zi).forEach((e=>{this.add(e,zi[e])}))}clearData(){Object.keys(this.operators).forEach((e=>{this.operators[e].instances.forEach((e=>{e.clearData()}))}))}}var Xi,qi,Qi=new class{execute(e,t){this.initializeStore(t.dataStore,t.storages,t.props),this.initializeOperators(t.operators),this.initializeFormulas(),this.initializeTags(t.tags),this.initializeEventsProps(t.eventsProps),this.initializeEvents(e,t.events,t.triggers,t.globals),this.initializeTriggers(t.triggers),this.initializePages(t.pages,t.pagesEval),this.initializeRules(e,t.rules)}clear(){Ht.unregisterAll(),Ii.removeAll(),Ri.removeAll(),ci.removeAll(),ti.clearAll()}initializeOperators(e){St.debug("Initializing Operators");const t=Ht.plugins[jt.OPERATOR]||ji;Object.keys(e).forEach((i=>{t.update(i,e[i])})),Ht.register(t)}initializeFormulas(){St.debug("Initializing Formulas"),Ht.register(Ht.plugins[jt.FORMULA]||new mi)}initializeStore(e,t,i){St.debug("Initializing Store");const n=Ht.plugins[jt.STORAGE]||new Mi;Object.keys(t).forEach((e=>{n.update(e,t[e]),ii.setStoragePlugin(n.get(e))})),ti.addValues(e,Lt.SETTINGS),ti.set("storages",n,Lt.ROOT),class{static initialize(e){ti.addValues(e,Lt.ROOT),ti.addValues(Li,Lt.ROOT)}}.initialize(i),Ht.register(n)}initializeEventsProps(e){St.debug("Initializing Events computed props");const t=Ht.plugins[jt.EVENT_PROPS]||new Ki;Object.keys(e).forEach((i=>{Object.keys(e[i]).forEach((n=>{t.update(i,n,e[i][n])}))})),Ht.register(t)}initializeEvents(e,t,i,n){St.debug("Initializing Events");const o=Ii.extractDomEvents(i),s=Ht.plugins[jt.EVENT]||new Hi(e,{globals:n});s.update(t,o),Ht.register(s)}initializeTriggers(e){St.debug("Initializing Triggers"),Ii.initialize(e)}initializePages(e,t){St.debug("Initializing Pages"),Xt.add(e,t)}initializeTags(e){St.debug("Initializing Tags");const t=Ht.plugins[jt.TAG]||new Ai;Object.keys(e).forEach((i=>{const n=e[i];t.update(i,n.fn,{occurrence:n.occurrence,scope:n.scope,sync:n.sync,fireUniquelyForEveryEvent:n.fireUniquelyForEveryEvent})})),Ht.register(t)}initializeRules(e,t){St.debug("Initializing Rules",t),Ri.initialize(e,t)}initializeCLOperators(){St.debug("Initializing CL_Operators");const e=Ht.plugins[jt.CONDITION_LEVEL_OPERATOR]||new Yi;Ht.register(e)}};!function(e){e.OR="OR"}(Xi||(Xi={})),function(e){e.ALL="*"}(qi||(qi={}));class Zi{static or(...e){return e._validationType=Xi.OR,e}static validateJSON(e,t,i="settings"){try{if(e){const n=e._validationType===Xi.OR&&It(e)?e:[e],o=e._validationType===Xi.OR&&It(e)?e.find((e=>Dt(e)===Dt(t))):e;if(!Zi.isSchemaMatching(n,t))return Zi.logger.info(`Settings schema validation failed for '${i}'.`,{expectedSchema:Zi.getStringifiedSchemaValues(e),actualValue:t}),Zi.getNewInitializedValue(e);if(Tt(o))Object.keys(t).forEach((e=>{t[e]=Zi.validateJSON(o[e]||o[qi.ALL],t[e],`${i}.${e}`)}));else if(It(o))return t.map(((e,t)=>Zi.validateJSON(o[0]===Zi.RECURSION?n:o[0],e,`${i}.${t}`)))}return t}catch(e){return Zi.logger.error("Got exception while validating settings schema",{err:e}),t}}static isSchemaMatching(e,t){return e.some((e=>Dt(t)===Dt(e)||Dt(t)===(null==e?void 0:e.name)))}static getNewInitializedValue(e){if(xt(e))return new e;let t=e;return e._validationType===Xi.OR&&It(e)&&(t=e.find((e=>Zi.isArraySchema(e)||Zi.isObjectSchema(e)))||e[0]),Zi.isObjectSchema(t)?{}:Zi.isArraySchema(t)?[]:void 0}static isArraySchema(e){return"Array"===e.name||It(e)}static isObjectSchema(e){return"Object"===e.name||Tt(e)}static getStringifiedSchemaValues(e){return xt(e)?e.name:It(e)?e.map((e=>Zi.getStringifiedSchemaValues(e))):Tt(e)?Object.keys(e).reduce(((t,i)=>Object.assign(Object.assign({},t),{[i]:Zi.getStringifiedSchemaValues(e[i])})),{}):e}}Zi.logger=new _t("warn"),Zi.RECURSION="r";class en{constructor(e,...t){var i;this.vwoEventsInstance=e,this.currentSettings={},this.baseSettings={globals:{},dataStore:{},props:{},operators:{},eventsProps:{},events:{},triggers:{},pages:{ec:[],pc:[]},pagesEval:{ec:[],pc:[]},tags:{},rules:{},storages:{},jsLibUtils:{}},this.replace(...t),Bt.set("jsLibUtils",null===(i=this.currentSettings)||void 0===i?void 0:i.jsLibUtils)}add(...e){Qi.initializeCLOperators();const t=this.preProcessSettings(e);return this.currentSettings.pagesEval={},this.currentSettings=Mt.mergeNestedObjects(this.currentSettings,...t),this.initialize(),this.currentSettings}replace(...e){return this.resetSettings(),this.add(...e)}remove(){this.resetSettings(),Qi.clear()}initialize(){Qi.execute(this.vwoEventsInstance,this.currentSettings)}resetSettings(){this.currentSettings=Object.assign({},this.baseSettings)}preProcessSettings(e){let t=this.preProcessRules(e);for(let e=this.preProcessSettings.length-1;e>=0;--e){const i=t[e];if(i.triggers){const e={};Object.keys(i.triggers).forEach((t=>{e[t]=this.preProcessTriggers(t,i.triggers[t])})),i.triggers=e}}return t=this.preProcessCampaigns(t),this.getValidatedSettings(t)}getValidatedSettings(e){const t={id:Zi.or(String,Number),type:String,filters:[Zi.or(String,Array)],args:Array,fn:Function},i=[{dataStore:Object,props:Object,operators:{"*":Function},eventsProps:{"*":{"*":Function}},events:{"*":{fn:Function}},triggers:{"*":{cnds:[Zi.or(String,Boolean,null,Array,[Zi.RECURSION],{id:Zi.or(String,Number),event:String,filters:[Zi.or(String,Array)],formula:[t],op:String,data:[Zi.or(String,Number)]})],formula:[t]}},tags:{"*":{fn:Zi.or(Function,Object.getPrototypeOf((async function(){})).constructor),occurrence:Number,scope:String}},rules:{"*":{triggers:Zi.or(String,[String]),tags:[{id:String,priority:Number,exitCondition:[Zi.or(String,Array)],shouldConsiderParentExitCondition:Boolean}],exitCondition:[Zi.or(String,Array)],shouldConsiderParentExitCondition:Boolean}},storages:{"*":Object}}];return Zi.validateJSON(i,e)}preProcessRules(e){const t={},i=this;return Object.keys(this.currentSettings.rules).forEach((e=>{const n=this.currentSettings.rules[e],o=[];n.tags.forEach((e=>{o.push(JSON.stringify(i.sortTag(e)))})),t[n.triggers[0]]=o})),e.map((e=>{let{rules:n}=e;if(n=n||[],It(n)){const e={};n.forEach((n=>{let o=!1;const s=[],r=Ri.generateRandomRuleId(),a={triggers:n.triggers,tags:[]};n.tags.forEach((e=>{const r=n.triggers[0],a=JSON.stringify(i.sortTag(e));t[r]=t[r]||[],t[r].includes(a)||(o=!0,t[r].push(a),s.push(e))})),o&&(a.tags=s,e[r]=a)})),n=e}return Object.assign(Object.assign({},e),{rules:n})}))}sortTag(e){return Object.keys(e).sort().reduce(((t,i)=>(t[i]=e[i],t)),{})}preProcessCampaigns(e){return e.map((e=>{if(Tt(e.triggers)&&At(e.triggers)&&Tt(e.dataStore)&&At(e.dataStore)){const{triggers:t}=e,{campaigns:i}=e.dataStore;Object.keys(i).forEach((e=>{const n=i[e].triggers[0];Tt(t[n])&&At(t[n])&&(t[n].occurrence=1)}))}return e}))}preProcessTriggers(e,t){var i;if(t&&t.cnds&&t.cnds.length>=0){const n=(i,o,s)=>{if(It(i))i.forEach(n);else if(i){if(Vt(i)||At(i.op)){const n=Vt(i)?i:i.op;s[o]=Ht.plugins[jt.CONDITION_LEVEL_OPERATOR].get(n,i,{trigger:t,triggerName:e})}At(i.persistState)||("pageView"===i.event?i.persistState=!1:"vwo_postInit"===i.event&&(i.persistState=!0))}};null===(i=t.cnds)||void 0===i||i.forEach(n)}return t}}class tn{static getTriggersConditionInfo(e,t){const i=t=>It(t)?t.map(i):yi(t)?Object.assign(Object.assign({},t),{hasEventFired:Ti.hasEventOccurred(e,t.event),arePartialConditionsMet:Ti.hasConditionMetBefore(e,t.id)}):Si(t)?`${JSON.stringify(t)} -> ${t.persistedState}`:"string"==typeof t?t:JSON.stringify(t);return t.map(i)}static tag(e,t){var i;const n=Ni.generateTagId(t),o=qt.tags[n],s=null===(i=Ht.plugins[jt.TAG])||void 0===i?void 0:i.get(t),r=Object.values(e.currentSettings.rules).filter((e=>e.tags.some((e=>e.id===t)))).reduce(((e,t)=>{const i=It(t.triggers)?t.triggers:[t.triggers];return e.push(...i),e}),[]).reduce(((t,i)=>{const n=qt.triggers[i];return Object.assign(Object.assign({},t),{[i]:{areConditionsMet:n.state,cndsState:this.getTriggersConditionInfo(i,e.currentSettings.triggers[i].cnds)}})}),{});return{hasExecuted:o.hasExecuted||!1,executionCount:o.executionCount||0,fn:s.fn,occurrence:s.occurrence||null,scope:s.scope||null,stoppedByExitCondition:o.stoppedByExitCondition,lastExitConditions:o.lastExitConditions,dependentTriggers:r}}static trigger(e,t){return{areConditionsMet:qt.triggers[t].state,cndsState:this.getTriggersConditionInfo(t,e.currentSettings.triggers[t].cnds)}}static page(e,t,i){const n=Xt.validatePage(e,t,i,!0);let o=t?"pageConfig":"experimentConfig";if(n){switch(n.reason){case Kt.EXCLUDE_PASSED:o="Url matches the excludes of "+o;break;case Kt.INCLUDE_FAILED:o="Url does not match the includes of "+o;break;case Kt.INCLUDE_PASSED:o="Url matches the includes of "+o}return delete n.reason,Object.assign(Object.assign({},n),{brief:o})}}}const nn=function(){};class on{constructor(e,t){this.toJSON=()=>{const e=Object.assign({},this);return delete e.preDefinedEvents,e},this.store={state:Ft,getters:qt,mutations:Zt,actions:ti},this.eventBus=ci,this.preDefinedEvents=null==t?void 0:t.preDefinedEvents,this.debug={tag:e=>tn.tag(this.settings,e),trigger:e=>tn.trigger(this.settings,e),page:(e,t,i)=>tn.page(e,t,i)},this.rules=Ri,this.triggers=Ii,this.pageGroup=Xt,Object.assign(this,this.getEventMethods()),Pi.init(),this.activate(e)}get version(){return"1.1.22"}add(...e){this.settings.add(...e),ci.trigger(ht.POST_INIT)}replace(...e){this.settings.replace(...e),ci.trigger(ht.POST_INIT)}on(e,t,{before:i,after:n}={}){if(Vt(e))return ci.on(e,t,{before:i,after:n});const o=Date.now()*Math.floor(1e3*Math.random());this.tags.add(o,t),this.rules.add({triggers:[o.toString()],tags:[{id:o.toString()}]},this.rules.generateRandomRuleId());const s=this.settings.preProcessTriggers(o.toString(),e);return Ii.add(o.toString(),s),o}async validateTrigger(e,t={},i,n){return St.info("Validating Trigger conditions through API",{trigger:e,event:t}),(await Ti.validateTrigger(e,t,i,n)).isValid}validateTriggerFromHistory(e,t){return Ii.validateTriggerFromHistory(e,t)}destroy(){this.settings.remove()}async isValid(e,t,i){await Ti.isValid(e,t,ai({isCustomEvent:!0,fromLocalStorage:!0}),i)}activate(e){St.info("Activating Phoenix!"),this.settings=new en(this,...e),this.initializeValues(),ci.trigger(ht.POST_INIT)}getEventMethods(){return{on:this.on,off:ci.off.bind(ci),async trigger(e,t={},i){if(Object.defineProperty(t,ft.EXIT_CONDITIONS,{value:this[ft.EXIT_CONDITIONS],enumerable:!1,writable:!0}),await ci.trigger(e,t),e&&Ni.getVwoInstanceObject()&&Ni.getVwoInstanceObject()[e]){const t=Ni.getVwoInstanceObject()[e];Ni.flushTagData(e),await Ni.executeTagUniquelyForEveryEvent(t)}(xt(i)||Pt(i))&&await i(t)},getEvent:ci.event.bind(ci)}}initializeValues(){this.operators=Ht.plugins[jt.OPERATOR],this.formulas=Ht.plugins[jt.FORMULA],this.events=Ht.plugins[jt.EVENT],this.storages=Ht.plugins[jt.STORAGE],this.tags=Ht.plugins[jt.TAG],this.eventsProps=Ht.plugins[jt.EVENT_PROPS]}deactivate(){this.trigger=nn,this.add=nn}clearData(){Ht.clearData()}}on.version="1.1.22";class sn{constructor(){this.storageLookUpKey="_vwo_store_content"}otherSide(...e){return e[0]="VWO.modules.vwoUtils.contentSync."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}}const rn={SET_COOKIE:"sC",GET_COOKIE:"gC",ERASE_COOKIE:"eC",SET_THIRD_PARTY_COOKIE:"sTPC",SET_THIRD_PARTY_COOKIE_ERROR:"sTPCE"},an=function(...e){window.fetcher.getValue("VWO._.triggerEvent",e)};let ln;function cn(e){ln=e}function dn(e){window.VWO=null!=e?e:ln}const un=window.VWO._&&window.VWO._.customError||function(){},gn=window.encodeURIComponent,vn=window.decodeURIComponent,hn=function(e){return btoa&&ln._.ac&&ln._.ac.bsECJ?btoa(e):gn(e)},pn=function(e){if(atob)try{return atob(e)}catch(e){}return vn(e)},wn=T.set,fn=T.get,En=window.clearTimeout,mn=window.setTimeout,_n=Math.floor,On=Math.pow,Sn="(",yn=")",Tn="_vis_opt_",In="_vwo_",Cn="_vis_",bn=864e5,An={[Tn+"out"]:0,[Tn+"exp_*_combi"]:10,[Tn+"exp_*_combi_choose"]:11,[Tn+"exp_*_goal_*"]:12,[Tn+"exp_*_exclude"]:13,[Tn+"exp_*_split"]:14,[Tn+"test_cookie"]:20,[Tn+"s"]:21,[In+"ds"]:22,[In+"sn"]:23,[In+"referrer"]:24,[In+"uuid"]:30,[In+"uuid_*"]:31,[In+"uuid_v2"]:32,[In+"app_version_*_*"]:40,[Cn+"preview_*"]:41,[Cn+"editor"]:42,[Cn+"heatmap_*"]:43};let Nn;for(const e in An)An[e]=Un(An[e]),An["debug"+e]="d"+An[e];function Vn(){for(var e=document.cookie.split(/; ?/),t={},i=0;i<e.length;i++){var n=e[i].split("=");try{const e=vn(n[0]);let i;i="_vwo"===e?pn(n[1]):vn(n[1]),t[e]=i}catch(e){}}return t}function Rn(e){return["_vis_opt_out","_vwo_ssm","_vwo_ss","_vwo_global_opt_out"].indexOf(e)<0&&(e.indexOf("_vis_opt_")>-1||e.indexOf("_vwo_")>-1||e.indexOf("_vis_")>-1)}function xn(e){let t,i;return()=>(i=i||mn((()=>{i=t=void 0}),1),t=t||e())}let Pn=xn(Vn);function Dn(e){return Pn()[vn(e)]}function Ln(e,t,i,n=4e12){t="_vwo"===e?hn(t):gn(t);let o=gn(e)+"="+t+"; ";i&&(o+="domain="+i+"; "),n&&(o+="expires="+new Date(n).toUTCString()+"; "),o+="path=/",window.VWO._=window.VWO._||{},window.VWO._.ss&&(o+="; secure; samesite=none"),document.cookie=o,Pn=xn(Vn)}function kn(){Pn=xn(Vn)}function Un(e){"string"==typeof e&&(e=+e),e<0&&(e=0);let t="";for(;e;){const i=e%64;let n=i.toString(36);i>=36&&(n=String.fromCharCode(i+29)),62===i&&(n="_"),63===i&&(n="-"),t=n+t,e=_n(e/64)}return t||e+""}function Wn(e){let t=0,i=0;for(;e;){const n=e.slice(-1);let o=26*+/[A-Z]/.test(n)+parseInt(n,36);"_"===n&&(o=62),"-"===n&&(o=63),t+=o*On(64,i++),e=e.slice(0,-1)}return t}function Mn(e,t){return!e||"number"!=typeof e[2]||Date.now()>t+e[2]*bn}class Gn{constructor(e,t,i="cookie",n=!0,o,s,r){var a,l,c,d;this.threadInstanceSync=!1,this.defaultDelim1=(null===(l=null===(a=window._vwoCc)||void 0===a?void 0:a.cJ)||void 0===l?void 0:l.pd)||"~",this.delim1=(null===(d=null===(c=window._vwoCc)||void 0===c?void 0:c.cJ)||void 0===d?void 0:d.cd)||this.defaultDelim1,this.backwardCompatible=n,this.cookieSyncUrl=o,this.jarName=e,this.cookieStorageStrategy=i,this.domain=t,this.syncingOff=s,this.strategyConfig=r,this.syncingOff?this.cookies=this.syncFromTPCValue():this.cookies=this.syncFromCookies(),this.strategyConfig&&(this.strategyConfig.callback=this.strategyConfig.callback||function(){},this.strategyConfig.cookieJarValue=this.strategyConfig.cookieJarValue||""),Nn=Wn(this.getInJar("ts")||"0")||Date.now(),this.setInJar("ts",Un(Nn),2e3),this.backwardCompatible&&this.getAll(!1,!0),this.backwardCompatible||this.syncingOff||"custom"===i||this.syncCookiesToJar(),this.threadInstanceSync=!0}syncCookiesToJar(){const e=document.cookie.split(/; ?/),t=this.getAll();for(var i=0;i<e.length;i++){const n=e[i].split("="),o=t[n[0]];Rn(n[0])&&!o&&(this.setInJar(vn(n[0]),vn(n[1]),100),window.VWO._.cookies.create(n[0],n[1],void 0,void 0,-1,!0))}}getInJar(e,t=!1){if(e=this.mapKey(e),!this.cookies)return;const i=this.cookies[e];return Mn(i,Nn)?(delete this.cookies[e],void(this.syncingOff||this.syncToCookies())):t?i.slice(1):i[1]}expired(e){e=this.mapKey(e);const t=this.cookies[e];if(t)return Mn(t,Nn)}setInJar(e,t,i){return e=this.mapKey(e),this.cookies[e]=[e,t,i+(Date.now()-Nn)/bn],this.threadInstanceSync&&this.otherSide("updateJarMemory",[e,this.cookies[e]]),this.syncingOff||this.syncToCookies(),this.getInJar(e)}syncToCookies(){let e="";for(const t in this.cookies){const i=this.cookies[t];e+=(e?yn:"")+this.encodeCookie(...i)}if("custom"===this.cookieStorageStrategy)return kn(),e=hn(e),void this.strategyConfig.callback(e);"ls"!==this.cookieStorageStrategy&&"both"!==this.cookieStorageStrategy||wn(this.jarName,e),"cookie"!==this.cookieStorageStrategy&&"both"!==this.cookieStorageStrategy||Ln(this.jarName,e,this.domain)}getStoredJarValue(e){let t="";for(const e in this.cookies){const i=this.cookies[e];t+=(t?yn:"")+this.encodeCookie(...i)}return e?hn(t):t}syncFromTPCValue(){let e=window.VWO.data.tpc?window.VWO.data.tpc._vwo:void 0;const t={};if(!e)return t;e=e.split(yn);for(let i=0;i<e.length;i++){const n=this.decodeCookie(e[i],this.cookieStorageStrategy);n&&(t[n[0]]=n)}return t}syncFromCookies(){let e="";this.cookies={},"custom"===this.cookieStorageStrategy?e=pn(this.strategyConfig.cookieJarValue):"ls"===this.cookieStorageStrategy?e=fn(this.jarName):"cookie"===this.cookieStorageStrategy?e=Dn(this.jarName):"both"===this.cookieStorageStrategy&&(e=Dn(this.jarName)||fn(this.jarName)),e=e||"";const t=e.split(yn);for(let i=0;e&&i<t.length;i++){const e=this.decodeCookie(t[i],this.cookieStorageStrategy);e&&(this.cookies[e[0]]=e)}return this.cookies}encodeCookie(e,t,i){return`${e}${this.delim1}${t}${Sn}${Un(_n(100*i))}`}decodeCookie(e,t){try{let t;const i=e.indexOf(this.delim1)>-1?this.delim1:this.defaultDelim1;if(e.indexOf(i)>-1)t=e.split(i);else{const i=/ts(.)/.exec(e),n=i&&i[1];n&&(t=e.split(n),this.delim1=n)}const n=t[1].split(Sn);return[t[0],n[0],Wn(n[1])/100]}catch(i){const n=`Error occurred while decoding the cookie in cookieJar for strategy: ${t}. Cookie Value to be decoded: ${e}. ${i}`;return void un({msg:n,url:"cookie-jar.js",lineno:257,colno:26,source:gn(n)})}}mapKey(e){if(An[e])return An[e];const t=/([0-9]+)/g,i=e.replace(t,"*");if(An[i]){const n=e.match(t)||[];return An[i]+"*"+n.map(Un).join("*")}return e}unmapKey(e){const t=e.split("*"),i=t[0];let n="";for(const e in An)if(An[e]===i){n=e;break}for(let e=1;e<t.length;e++)n=n.replace("*",""+Wn(t[e]));return(n||"ts"===e)&&n||e}getAll(e=!1,t=!1){const i={};for(const n in this.cookies){const o=this.unmapKey(n);let s=this.cookies[n][1];"ts"!==n&&(s=this.get(o,t)),!1===this.expired(n)&&(i[o]=e?[s,new Date(this.cookies[n][2]*bn+Nn)]:s)}return i}get(e,t=!1){const i=this.expired(e),n=this.getInJar(e,!0);let o,s;n&&([o,s]=n);const r="*"===o;if("custom"!==this.cookieStorageStrategy&&r){const t=Dn(e);return!t&&o&&this.setInJar(e,"",-1),t}if(this.backwardCompatible){const n=Dn(e);return n&&i?void Ln(e,"",this.domain,-1):(!t||!o||"ts"===e||n&&n!==o||Ln(e,o,this.domain,Nn+s*bn),n||!o||t||"ts"===e?(n&&o&&n!==o&&this.setInJar(e,n,s-(Date.now()-Nn)/bn),n||o):void this.setInJar(e,"",-1))}return this.getInJar(e)}xmlSuccess(){window.VWO._.cookies.create("_vis_opt_test_cookie",1,void 0,void 0,void 0,!0)}set(e,t,i){if(t+="","number"==typeof i?this.setInJar(e,t,i):this.setInJar(e,"*",2e3),"custom"!==this.cookieStorageStrategy&&(this.backwardCompatible||"number"!=typeof i)){let n;n=null===i?null:Date.now()+i*bn,Ln(e,t,this.domain,n)}this.cookieSyncUrl&&(En(this.cookieSyncTimeout),this.cookieSyncTimeout=mn((()=>{this.syncViaXML(this.xmlSuccess)}),1e3))}updateJarMemory(e,t){this.cookies[e]=t}otherSide(...e){e[0]="VWO.modules.vwoUtils.cookies.CookieJar."+e[0],window.fetcher.getValue(...e)}}const Fn={primary:(e,t,i=!1,n,o)=>new Proxy(t,{construct(t,s){this.store=this.store||["1"];const r=new t(...s),a=this.store.length;this.store.push(r);let l=s;i&&(l=n(r)),Object.defineProperty(r,"otherSideCreated",{value:!1,enumerable:!1,writable:!0}),r.otherSide=(...e)=>r.otherSideCreated.then((()=>r.otherSide(...e).then((e=>e))));const c={type:"vwoClassInstanceBridge",id:a,args:l,path:e};return r.otherSideCreated=new Promise((t=>{window.fetcher.request(c).send().then((i=>{r.otherSide=(...t)=>{const n=e.dest+"."+i+"."+t[0];return t[0]=n,window.fetcher.getValue(...t)},t(null),o&&o(i)}))})),r},get(e,t){return"symbol"==typeof t||isNaN(+t)?e:this.store[t]}}),secondary:(e,t,i)=>new Proxy(t,{construct(e,t){this.store=this.store||["1"];const n=new e(...t),o=this.store.length;return this.store.push(n),i&&i(n),[o,n]},get(e,t){return"symbol"==typeof t||isNaN(+t)?e:this.store[t]}})};class jn extends Gn{syncViaXML(e){this.otherSide("syncViaXML",[e])}}function Hn(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}function $n(e,t){window.fetcher.getValue("VWO.modules.vwoUtils.urlUtils.customEvent",[e,t])}window.VWO.modules.vwoUtils.cookies.CookieJar=Fn.secondary("VWO.modules.vwoUtils.cookies.CookieJar",jn,(e=>{"_vwo"===e.jarName&&window.VWO._.cookieInitWT(e)}));var Bn=window._vis_opt_cookieDays,Jn=window._vwo_exp||{},Kn,zn=window._vwo_acc_id,Yn=[],Xn=0,qn,Qn=function(){for(var e=0;e<Yn.length;e++)Yn[e].d||(Yn[e].c(),Yn[e].d=!0)};function Zn(){return window._vis_debug}function eo(e){const t=window.VWO;return t._.cLFE||!t.data.cj||Object.values(t.data.cj).every((e=>void 0===e))||(e.backwardCompatible=t.data.cj.bc||!1,e.strategy=e.strategy||t.data.cj.s),e}const to={domain:void 0,_create:function(e,t,i,n,o,s,r){var a,l;Zn()&&0!==e.indexOf("debug")&&(e="debug"+e),window.VWO._.cLFE,"_vwo_sn"!==e&&"_vwo_ds"!==e&&"_vis_opt_test_cookie"!==e&&!isNaN(Bn=parseFloat(Bn))&&isFinite(Bn)&&(i=Bn);var c="";if(o?c+="; expires="+new Date(o).toGMTString():i?c+="; expires="+new Date((new Date).getTime()+864e5*i).toGMTString():!1===i&&(c="; expires=Thu, 01 Jan 1970 00:00:01 GMT"),n||(n=to.domain),void 0!==n){n=(null===(l=null===(a=window.VWO._.allSettings.dataStore.plugins.DACDNCONFIG)||void 0===a?void 0:a.jsConfig)||void 0===l?void 0:l.dNISD)&&!window._vis_opt_domain?"":"; domain=."+n}const d=e+"="+encodeURIComponent(t)+c+(n||"")+"; path=/";window.VWO._.ss&&!r?document.cookie=d+"; secure; samesite=none; Partitioned;":document.cookie=d},create:function(e,t,i,n,o,s,r){this._create(e,t,i,n,o,s,r),an(rn.SET_COOKIE,e,t,i,o),$n("meta",{ckName:e,ckValue:t,ckDays:i,ckExpiryTs:o})},get:function(e,t,i){var n;e=e.trim(),!i&&Zn()&&(e="debug"+e),window.VWO._.cLFE;var o=document.cookie.match(new RegExp("(?:^|;)\\s*"+e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")+"=(.*?)(?:;|$)","i"));return n=o&&decodeURIComponent(o[1]),an(rn.GET_COOKIE,e,n),n},erase:function(e,t,i){this.create(e,"",!1,t,1,i),an(rn.ERASE_COOKIE,e)},mergeInFPJar:function(){if(window.VWO._.cLFE)return;const e=this.createThirdPartyJar().getAll(!0);for(const t in e){if("ts"===t)continue;const i=e[t][1],n=e[t][0];window.VWO._.jar.set(t,n,(i-Date.now())/864e5)}},createThirdPartyJar:function(){return Kn||(Kn=new jn("_vwo_third_party",to.domain,void 0,!1,void 0,!0),window.VWO._.tpj=Kn,Kn)},setThirdPartyCookiesInJar:function(e,t,i,n){const o=this.createThirdPartyJar(),s=n?(n-Date.now())/864e5:i;o.set(e,t,s)},getThirdPartyJarValue:function(){const e=Kn.getStoredJarValue();return e.length?e:null},createThirdParty:function(e,t,i,n,o,s,r){if(!window.mainThread)return window.fetcher.getValue("VWO._.cookies.createThirdParty",[e,t,i,n,o,s,r]);var a,l,c,d;let u=!1;if(o&&(u=r?r.multiple_domains:Jn[o].multiple_domains),"_vwo"!==e&&this._create(e,t,i,n),Zn()&&0!==e.indexOf("debug")&&(e="debug"+e),!((d=window.vwo_$)&&o&&u||s||"_vwo"===e))return void an(rn.SET_THIRD_PARTY_COOKIE_ERROR,e,t,i,n);a=d("<iframe>").attr({height:"1px",width:"1px",border:"0",class:"vwo_iframe",name:"vwo_"+Math.random(),style:"position: absolute; left: -2000px; display: none"}).appendTo("head").load((function(){-1!==e.indexOf("split")&&this.parentNode.removeChild(this),--Xn||Qn()})),Xn++;const g=window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com";l=g+"/ping_tpc.php?account="+zn+"&name="+encodeURIComponent(e)+"&value="+encodeURIComponent(t)+"&days="+i+"&random="+Math.random(),/MSIE (\d+\.\d+);/.test(navigator.userAgent)?a.attr("src",l):767218===window._vwo_acc_id||window.VWO._.lastPageUnloadURL?window.VWO.modules.tags.dataSync.utils.sendCall(null,{url:"/ping_tpc.php?account="+zn+"&name="+encodeURIComponent(e)+"&value="+encodeURIComponent(t)+"&days="+i+"&random="+Math.random()},null,Qn,!0):((c=d("<form>").attr({action:g+"/ping_tpc.php","accept-charset":"UTF-8",target:a.attr("name"),enctype:"application/x-www-form-urlencoded",method:"post",id:"vwo_form",style:"display:none"}).appendTo("head")).attr("action",l).submit(),c.remove()),an(rn.SET_COOKIE,e,t,i,o,!0)},waitForThirdPartySync:function(e){return i(this,void 0,void 0,(function*(){window.mainThread?Yn.push({c:e}):yield window.fetcher.getValue('VWO._.cookies.waitForThirdPartySync("${{1}}")',null,{captureGroups:[e]})}))},setJar(e){window.VWO._.jar=qn=e},init:function(e){window.VWO._.jar=null},getAll:function(e=!1){if(e&&window.VWO._.isCookieFallbackEnabled)return window.fetcher.getValue("window.VWO._.cookies.getAll");const t=document.cookie.split(/; ?/),i={};for(let e=0;e<t.length;e++){const n=t[e].split("="),o=n[0],s=n[1];try{i[o]=s}catch(e){}}return i},getItem:function(e,t=!1){return t&&window.VWO._.isCookieFallbackEnabled?window.fetcher.getValue("window.VWO._.cookies.getItem",[e]):e.indexOf("_vis_opt_")>-1||e.indexOf("_vwo_")>-1?this.get(e)||this.get(e,!0):this.get(e,!0,!0)},setItem:function(e,t){this.create(e,t)},deleteAll:function(){},deleteItem:function(){},includes:function(e,t=!1){if(t&&window.VWO._.isCookieFallbackEnabled)return window.fetcher.getValue("window.VWO._.cookies.includes",[e]);const i=new RegExp(e),n=Object.keys(to.getAll());for(let e=0;e<n.length;e++)if(i.test(n[e]))return 1;return 0}};window.VWO._.cookies=to;class io{constructor(e){this.storageConfig=e}getValWithPref(e){const{prefer:t,cookieExpDays:i}=this.storageConfig,n=T.get(e),o=T.get(e);return"cookie"==t?T.set(e,n):"ls"==t&&to.create(e,o,i),{cookie:JSON.parse(n),ls:JSON.parse(o)}}getVal(e){const{strategy:t,prefer:i}=this.storageConfig;for(const n of t)return"all"==n?this.getValWithPref(e)[i]:"ls"==n?JSON.parse(T.get(e)):to.get(e)}setVal(e,t){const{strategy:i,cookieExpDays:n}=this.storageConfig;for(const o of i)"all"==o?(T.set(e,t),to.create(e,t,n)):"cookie"==o?to.create(e,t,n):T.set(e,t)}}class no extends sn{constructor(e,t,i){super(),this.contentSyncLocation="VWO._.contentSyncService",this.url=t,this.globalLookupContext=i,this.storageObj=new io(e)}parseStorageInfo(e,t,i){if(!e)return;const[n,o]=t.split(".");return e[n]=e[n]||{},e[n][o]=e[n][o]||{},e[n][o][i]}getInfoFromGlobalObject(e,t){if(!e)return;const[i,n]=t.split(".");return e[i]=e[i]||{},e[i][n]=e[i][n]||{},{argVn:e[i][n].args||{},vn:e[i][n].vn}}fixResponse(e){const t={fns:{}};e.fns=e.fns||{};for(const i in e.fns)for(const n in e.fns[i]){const o=e.fns[i][n],s=JSON.stringify(JSON.parse(n));t.fns[i]=t.fns[i]||{},t.fns[i][s]=o}return t}syncGet(e,t,i=!0){if(!this.storageObj)return{dataPresent:!1};const n=this.storageObj.getVal(this.storageLookUpKey),o=JSON.stringify(t),s=this.getInfoFromGlobalObject(this.globalLookupContext,e),r=s&&s.vn,a=s&&s.argVn,l=this.parseStorageInfo(n,e,o);if(l&&i){const i=l;let n=!1;for(const s in a)for(const r in a[s])if(i.argVn[s]&&i.argVn[s][r]&&parseInt(i.argVn[s][r])<parseInt(a[s][r])){n=!0,this.syncFromBackend(e,t,o,this.url);break}return r&&parseInt(r)>parseInt(i.vn)&&!n&&this.syncFromBackend(e,t,o,this.url),{dataPresent:!0,val:i.val}}return this.syncFromBackend(e,t,o,this.url),{dataPresent:!1}}syncFromBackend(e,t,n,o){return i(this,void 0,void 0,(function*(){yield this.otherSide("syncFromBackend",[e,t,n,o])}))}updateStorage(e){return i(this,void 0,void 0,(function*(){const t=window.VWO._.contentSyncService,i=t.storageObj.getVal(t.storageLookUpKey);let n={};(i||!1)&&(n=i);const o=(e=t.fixResponse(e)).fns;for(const e in o){const t=o[e];for(const i in t){n.fns=n.fns||{},n.fns[e]=n.fns[e]||{};const o=n.fns[e][i];if(o)if(parseInt(o.vn)==parseInt(t[i].vn)){const o=n.fns[e][i].argVn;let s=!0;for(const e in o){if(!t[i].argVn[e]||!s){s=!1;break}for(const n in o[e]){const r=t[i].argVn[e][n],a=o[e][n];if(!r||parseInt(a)<=parseInt(r)){s=!1;break}}}!s&&(n.fns[e][i]=t[i])}else parseInt(o.vn)<parseInt(t[i].vn)&&(n.fns[e][i]=t[i]);else n.fns[e][i]=t[i]}}t.storageObj.setVal(t.storageLookUpKey,JSON.stringify(n))}))}}window.VWO.modules.tags={};class oo{otherSide(...e){e[0]="VWO.modules.tags.checkEnvironment."+e[0],window.fetcher.getValue(...e)}}window.VWO.modules.tags.checkEnvironment={};const so="lT",ro="sT",ao="ivp",lo="gp",co="ca",uo=10,go=2,vo=function(){},ho="w",po=[739074,714884,708439,765649],wo=window.VWO.TRACK_SESSION_COOKIE_EXPIRY_CUSTOM||1/48,fo="_vis_opt_",Eo="_vwo_",mo={TRACK_GLOBAL_COOKIE_NAME:"_vwo_ds",TRACK_SESSION_COOKIE_NAME:"_vwo_sn",TRACK_SESSION_COOKIE_EXPIRY:wo,SESSION_TIMER_EXPIRE:60*wo*60*1e3*24,COOKIE_VERSION:3,COOKIE_TS_INDEX:1,COOKIE_VERSION_INDEX:0,FIRST_SESSION_ID_INDEX:0,PC_TRAFFIC_INDEX:1,RELATIVE_SESSION_ID_INDEX:0,PAGE_ID_INFORMATION_INDEX:1,SESSION_SYNCED_STATE_INDEX:4,PAGE_ID_EXPIRY:15,GLOBAL_OPT_OUT:"_vwo_global_opt_out",OPT_OUT:"_vis_opt_out",TEST_COOKIE:"_vis_opt_test_cookie",COOKIE_JAR:"_vwo",SAME_SITE:"_vwo_ssm",UUID:"uuid",UUID_V2:"uuid_v2",DEFAULT_EXPIRY:100,UUID_COOKIE_EXPIRY:3650};function _o(){return Math.min(window.VWO.TRACK_GLOBAL_COOKIE_EXPIRY_CUSTOM||window.VWO.data.rp||90,90)}function Oo(){return{[fo+"test_cookie"]:0,[Eo+"ds"]:_o(),[Eo+"sn"]:wo,[Eo+"referrer"]:18e-5,[Eo+"uuid"]:3650,[Eo+"uuid_v2"]:366,[mo.SAME_SITE]:3650}}const So={CAMPAIGN_FLOW_START:"cFS",TEST_NOT_RUNNING:"tNR",CAMPAIGN_FLOW_END:"cFE",REGISTER_CONVERSION:"vwo_rC",CONVERT_GOAL_FOR_ALL_EXPERIMENTS:"cGFAE",UNHIDE_ALL_VARIATIONS:"uAV",DIMENSION_TAG_PUSHED:"dTP",CONVERT_VISIT_GOAL_FOR_EXPERIMENT:"cVGFE",UNHIDE_SECTION:"uS",EXCLUDE_URL:"eURL",BEFORE_REDIRECT_TO_URL:"bRTR",URL_CHANGED:"uC",HIDE_ELEMENTS:"hE",ELEMENT_LOAD_ERROR:"eLTTE",NOT_REDIRECTING:"vwo_notRedirecting",VISIBILITY_TRIGGERED:"vwo_visibilityTriggered",VARIATION_APPLIED:"vwo_vA",ELEMENT_LOAD_TIMER_STOP:"eLTSt",SEND_NEW_VISITOR_CALL:"sNVC",CONVERT_REVENUE_GOALS_FOR_EXPERIMENT:"cRGFE",CHOOSE_COMBINATION:"cC",START_APPLY_CHANGES:"sAC",END_APPLY_CHANGES:"eAC",CAMPAIGN_COMBI_CREATED:"cCC",ELEMENT_LOADED:"eL",ELEMENT_NOT_LOADED:"eNL",MATCH_WILDCARD:"mW",DELETE_CSS_RULE:"dCSSR",SPLIT_READY_TO_REDIRECT:"sURL",SESSION:"vwo_session",NEW_SESSION:"newSession",UNHIDE_VARIATION:"uV",NEW_SESSION_CREATED:"newSessionCreated",PAUSE:"pause",SPLIT_URL:"sURL",SHOULD_EXECUTE_LIB_ERROR:"shouldExecLib",UPDATE_SETTINGS_CALL:"uSC",EXCLUDE_GOAL_URL:"eGURL",HEATMAP_CLICK:"hCl",POST_URL_CHANGE:"hC",CONVERT_ALL_VISIT_GOALS_FOR_EXPERIMENT:"cAVGFE",OPT_OUT:"oO",POST_INIT:"vwo_postInit",PAGE_VIEW:"vwo_pageView",ELEMENT_CHANGES_APPLIED:"elementChangesApplied",REGISTER_HIT:"registerHit",REDIRECT_DECISION:"rD",RETRACK_VISITOR:"retrackVisitor",CAMPAIGN_NOT_ELIGIBLE:"runCampaign.notEligible",UNHIDE_ELEMENT:"unhideElement",TOGGLE_VISIBILITY_LOCK:"runCampaign.toggleVisibilityLock",CAMPAIGN_READY:"runCampaign.campaignReady",MODIFIED_ELEMENT:"runTestCampaign.modifiedEl",ERROR:"error",SSR_COMPLETE:"vwo_mutationObserved",SET_ENV:"setEnvironment",ACTIVATED:"vwo_activated",_ACTIVATED:"vwo__activated",RECORDING_NOT_ELIGIBLE:"rNE",VARIATION_SHOWN:"vwo_variationShown",NEW_SURVEY_FOUND:"nSF",SYNC_VISITOR_PROP:"vwo_syncVisitorProp",EXECUTE_FUNNEL_FOR_GOAL_CAMPAIGN:"executeFunnelCampForGoalCampaign",EDITOR_APPLY_CHANGES_COMPLETE:"editorApplyChangesComplete",INIT_VWO_INTERNALS:"initVWOInternals",SET_CAMPAIGN_TO_OBSERVE:"setCampaignToObserve",SEGMENTATION_EVALUATED:"sE",ELEMENTS_SHOWN_WITHOUT_CHANGES:"eSWC",CUSTOM_CONVERSION:"vwo_conversion",REVENUE_CONVERSION:"vwo_revenue",DOM_SUBMIT:"vwo_dom_submit",DOM_CLICK:"vwo_dom_click",GOAL_CONVERTED:"vwo_goalConverted",GOAL_VISIT:"vwo_goalVisit",EVALUATE_GOAL_PAGE_FOR_PREJS:"vwo_evalPreCampJs",GROUP_WINNER_CHOOSEN:"vwo_groupWinnerChosen",CHECK_SEGMENTATION:"checkSegmentation",TRACK_NEW_SESSION_CREATED:"tnSC",TRACK_SESSION_CREATED:"tSC",PAGE_UNLOAD:"vwo_pageUnload",SPA_VISIBILITY_SERVICE:"visibilityForSpa",SESSION_INIT_COMPLETE:"vwo_sessionInitComplete",TIB_DONE:"vwo_topInitializeBeginDone",TOGGLE_MUT_OBSERVER:"toggleMutationObserver",DOM_CONTENTLOADED:"vwo_dom_DOMContentLoaded",SPLIT_VARIATION_SHOWN:"splitVariationShown",VWO_EXECUTED:"vwo_executed",ACTIVATE_API_TRIGGERED:"aAT"};class yo{otherSide(...e){return e[0]="window.VWO.modules.utils.campaignUtils."+e[0],window.fetcher.getValue(...e)}}let To;function Io(e){if(!e)return e;try{e=window.decodeURIComponent(e)}catch(e){}return e}const Co=function(){if(void 0!==To)return To;const e=[],t=window.VWO._.allSettings.dataStore.campaigns;let i,n;for(let i in t)e.push(i);return To=!!(i=(window.location.search+window.location.hash).match(/.*_vis_test_id=(.*?)&.*_vis_opt_preview_combination=(.*)$/))&&(!(!e.includes(i[1])||!t[i[1]]||void 0===t[i[1]].combs[n=Io(i[2])])&&n),To},bo=Object.keys;function Ao(e,t){if(!(e instanceof Array))return-1;for(var i=0;i<e.length;i++)if(t===e[i])return i;return-1}function No(e,t,i){var n,o,s,r=!1;return-1===t||i?(o=requestAnimationFrame,s=cancelAnimationFrame):(o=setTimeout,s=clearTimeout),function(...i){r&&(s(n),n=null),n=o((function(){e.apply(this,i)}),t),r=!0}}function Vo(e,t){return e.length>t?e.slice(0,t-1)+"...":e}const Ro={};function xo(e){const[t,i]=e.split(":tm(");return[t,i.substring(1,i.lastIndexOf(i[0]))]}function Po(e){if(Array.isArray(Ro[e]))return Ro[e];const t=e.split("<vwo_sep>");return 1===t.length?Ro[e]=[{sel:e,isTxtSel:!0}]:Ro[e]=t.map((e=>({sel:e.trim(),isTxtSel:e.indexOf(":tm(")>-1})))}class Do{constructor(){this.uuid="",this.TPJarExpiry=730,this.preview=Co,this.hideElExpression="{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}"}otherSide(...e){return e[0]="VWO.modules.utils.libUtils."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}isDomDependent(e){return"VISUAL_AB"===e||"VISUAL"===e}isTestingCampaign(e){return this.isDomDependent(e)||"SPLIT_URL"===e}generateUUID(){return"Jxxxxxxxxxxx4xxxyxxxxxx5xxxxxxxx9".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16).toUpperCase()}))}isDomIndependentCampaign(e){return"ANALYSIS"===e||"SURVEY"===e||"ANALYZE_RECORDING"===e||"ANALYZE_HEATMAP"===e||"ANALYZE_FORM"===e||"TRACK"===e||"FUNNEL"===e}isSessionBasedCampaign2(e){const t=e.type;return"ANALYZE_RECORDING"===t||"ANALYZE_HEATMAP"===t||"ANALYZE_FORM"===t||"TRACK"===t||"FUNNEL"===t}isBot2(){return window.navigator.userAgent.toLowerCase().indexOf("bot")>=0||window.navigator.userAgent.toLowerCase().indexOf("spider")>=0||window.navigator.userAgent.toLowerCase().indexOf("preview")>=0}isPageBasedGoal(e){return"SEPARATE_PAGE"===e||"CUSTOM_GOAL"===e||"REVENUE_TRACKING"===e}isSplitVariation(e){return"SPLIT_URL"===e.type&&e[ao]}shouldTrackUserForCampaign(e){return"number"==typeof e&&(e=window._vwo_exp[e]),!e||!window._vwo_code||!window._vwo_code[so]&&!window._vwo_code[ro]||(this.isDomIndependentCampaign(e.type)||this.isSplitVariation(e))}getUUIDString(e){return e?"&u="+e:""}isAnalyzeCampaign(e){return"ANALYZE_RECORDING"===e||"ANALYZE_HEATMAP"===e||"ANALYZE_FORM"===e}updateGoalsKind(e){const t={};Object.keys(e).forEach((i=>{const n=e[i],o=e[i].mt;o&&Object.keys(n.goals).length&&Object.entries(o).forEach((([e,n])=>{const o=this.getGoalKind(n);o&&(t[i]=t[i]||{},t[i][e]=o)}))})),window.VWO._.goalsToBeConvertedSynchronously=t}getGoalKind(e){let t;const i=window.VWO._.allSettings.triggers[e];if(i)if("object"==typeof i.cnds[0]){switch(i.cnds[0].event){case So.DOM_CLICK:t="CLICK_ELEMENT";break;case So.DOM_SUBMIT:t="FORM_SUBMIT";break;case So.PAGE_UNLOAD:t="PAGE_UNLOAD"}}else{switch(i.cnds[1].event){case So.DOM_SUBMIT:case So.DOM_CLICK:t="ENGAGEMENT"}}return t}isEligibleToSendCall(e,t){return!Co()&&(t&&!t.visDebug||!window._vis_debug)&&this.shouldTrackUserForCampaign(e)&&(t&&t.vwoInternalProperties.shouldExecuteLib||window.VWO._.shouldExecuteLib)}isPersonalizeCampaign(e){var t;return"TARGETING"===(null===(t=e.iType)||void 0===t?void 0:t.type)}doNotHideElements(e){return e&&"boolean"==typeof e}getMatchedCookies(e){let t=[];return document.cookie&&(t=document.cookie.match(e)||[]),t}getCombinationCookie(){let e=this.getMatchedCookies(/(?:^|;)\s?(_vis_opt_exp_\d+_combi=[^;$]*)/gi);e=e.map((function(e){try{const t=decodeURIComponent(e);return/_vis_opt_exp_\d+_combi=(?:\d+,?)+\s*$/.test(t)?t:""}catch(e){return""}}));const t=[];return e.forEach((function(e){const i=e.match(/([\d,]+)/g);i&&t.push(i.join("-"))})),t.join("|")}getSelectorPath(e,t){let i="",n=t.sections[1].variations[e];const o=window.VWO._.txtCfg&&window.VWO._.txtCfg.mp||{};if("string"==typeof n&&(n=vwo_$.parseJSON(n)),n){for(let e=0;e<n.length;e++){let s=n[e].xpath;if(s)if(n[e].dHE)t.dHE=!0;else if(t.mSP&&(s=s.replace(/html\.vwo_p_s_\w+\s*/g,"")),s.indexOf(":tm(")>-1){const e=Po(s),t=window.VWO._.txtCfg&&window.VWO._.txtCfg.t||[];for(const n of e)if(n.isTxtSel)if(o[n.sel])i+=o[n.sel]+",";else{const[e,s]=xo(n.sel);for(let r=0;r<t.length;r++)if((!t[r].e||e==t[r].e)&&t[r].t===s){const e="."+t[r].s;i+=e+",",o[n.sel]=e;break}}else i+=n.sel+","}else i+=s+","}Object.keys(o).length>0&&(window.fetcher.setValue("window.VWO._.txtCfg.mp",o),window.VWO._.txtCfg.mp=o)}return i}getCampaignXPath(e){const t={selector:"",selectorPerVariation:{}};if(e.xPath)return t.selector=e.xPath,t;if(!this.isDomDependent(e.type))return t;let i=e.combination_chosen||e.cc;const n=e.sections;if("VISUAL_AB"===e.type)if(i)1!=i&&(t.selector=this.getSelectorPath(i,e));else{let n;for(i in e.combs)if(e.combs.hasOwnProperty(i)){const o=this.getSelectorPath(i,e);"head,"===o.toLowerCase()?(n||(t.selector+=o),n=!0):t.selector+=o,t.selectorPerVariation[i]=o.substr(0,o.length-1)}}else{const e=bo(n);let i=e.length;for(;i--;)n[e[i]].path&&(t.selector+=n[e[i]].path+",")}return e.dHE&&!t.selector&&(t.selector=".vwo_dummy_selector,"),t.selector?(t.selector=t.selector.substr(0,t.selector.length-1),t):{selector:"",selectorPerVariation:{}}}}function Lo(e,t){window.fetcher.getValue('VWO.modules.utils.helperFunctions.onUrlChange("${{1}}", "${{2}}")',null,{captureGroups:[e,t]})}function ko(e,t){let i,n=!1;return function(...o){n&&(clearTimeout(i),i=null),i=setTimeout((function(){e.apply(null,o)}),t),n=!0}}class Uo{otherSide(...e){return e[0]="VWO.modules.tags.dataSync."+e[0],window.fetcher.getValue(...e)}}var Wo={PARSE_TLD:"pTLD"},Mo=["co","org","com","net","edu","au","ac"],Go;function Fo(e){var t,i=e.split("."),n=i.length,o=i[n-2];return o&&Mo.includes(o)?(t=i[n-3]+"."+o+"."+i[n-1],an(Wo.PARSE_TLD,e,t),t):(t=o+"."+i[n-1],an(Wo.PARSE_TLD,e,t),t)}const jo={init:function(){Go=to.get("_vwo_referrer"),to.erase("_vwo_referrer"),"string"!=typeof Go&&(Go=document.referrer)},get:function(){return-1!==location.search.search("_vwo_test_ref")?document.referrer:Go},set:function(){to.create("_vwo_referrer",Go,18e-5)}};window.VWO.modules.vwoUtils.referrer=jo;const Ho={get navigator(){return navigator},get pageTitle(){return document.title},get doNotTrack(){return window.doNotTrack},get windowName(){return window.name},get currentUrl(){return window._vis_opt_url||window.location.href},get location(){return window.location},get document(){return window.location},get history(){return window.history},get accountId(){return window._vwo_acc_id},get smartCodeVersion(){return window._vwo_code_version},get serverUrl(){return window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com/"},get vwoText(){return window._vwo_text},get vwoCode(){return window._vwo_code},get MutationObserver(){let e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return window.Zone&&window.Zone.__symbol__&&(e=window[window.Zone.__symbol__("MutationObserver")]),e},get vwoInternalProperties(){return window.VWO._},get cookie(){return document.cookie},get visDebug(){return window._vis_debug},get cookieDomain(){return window._vis_opt_domain||window._vwo_cookieDomain||Fo(location.host)},get vwoStyle(){return window._vwo_style},get screen(){return window.screen},get vwoCss(){return window._vwo_css},get visOptUrl(){return window._vis_opt_url},get allSettings(){return window.VWO._.allSettings},get apiSectionCallback(){return window._vwo_api_section_callback},get encodeURIComponent(){return window.encodeURIComponent},get page(){return{title:Ho.pageTitle,url:Ho.currentUrl,referrerUrl:jo.get()}},get timeSpentInASession(){var e,t,i,n,o,s;return+Date.now()-1e3*+(null===(i=null===(t=null===(e=window.VWO.phoenix)||void 0===e?void 0:e.store)||void 0===t?void 0:t.getters)||void 0===i?void 0:i.sessionStart)?(+Date.now()-1e3*+(null===(s=null===(o=null===(n=window.VWO.phoenix)||void 0===n?void 0:n.store)||void 0===o?void 0:o.getters)||void 0===s?void 0:s.sessionStart))/1e3:0},get vwoUUID(){return window._vwo_uuid}};class $o{constructor(){this.vwoEventsToBeSynced={[So.VARIATION_SHOWN]:{ignoreMetricDataCheck:!0},[So.PAGE_VIEW]:{},[So.DOM_CLICK]:{},[So.DOM_SUBMIT]:{},[So.CUSTOM_CONVERSION]:{},[So.REVENUE_CONVERSION]:{},[So.SYNC_VISITOR_PROP]:{ignoreMetricDataCheck:!0},[So.PAGE_UNLOAD]:{}},this.allowedMetaDataProps={ogName:!0,source:!0}}otherSide(...e){return e[0]="VWO.modules.tags.dataSync.utils."+e[0],window.fetcher.getValue(...e)}shouldSendEventCall(e,t){var i;const n=t.name;if(!n)return!1;const o=this.vwoEventsToBeSynced[t.name];if(void 0===o&&!t.props.isCustomEvent)return!1;if(!window.VWO._.allSettings.dataStore.events[n]){let e;try{e=JSON.parse(window.localStorage.getItem($o.UNREG_EVENT_LOCAL_STORAGE_NAME))||{}}catch(t){e={}}if(e[n])return!1;{e[n]=!0;const t=JSON.stringify(e);window.localStorage.setItem($o.UNREG_EVENT_LOCAL_STORAGE_NAME,t)}}if(t.props.isCustomEvent)return!0;if(!o||!o.ignoreMetricDataCheck){const e=null===(i=t._vwo)||void 0===i?void 0:i.eventDataConfig;if(!e||Object.keys(e).length<=0)return!1}if(t.name!==So.VARIATION_SHOWN)return!0;let s="non-analytics";location.href.includes("jsMode=Any")&&(s="analytics");const r=null==t?void 0:t.props,a=null==r?void 0:r.id;if(!r||!a)return!1;const l=e.currentSettings.dataStore.campaigns[a]||window._vwo_exp[a],c=window.VWO.modules.utils.libUtils.isSessionBasedCampaign2(l),d="SURVEY"===l.type;return!(!("analytics"===s||"non-analytics"===s&&r.isFirst)||c||d)}evaluateDataForEventsCall(e,t,i){var n;let o=!0;this.syncAdditionalDataWithEventsData(null===(n=i._vwo)||void 0===n?void 0:n.eventDataConfig,i);const s={d:{}};if(s.d.msgId=`${t}-${+new Date}`,s.d.visId=t,s.d.event={props:this.excludeEventPropsNotToBeSynced(e,i.name,i.props),name:i.name,time:i.time},i.props.$metaData){const e={},t=i.props.$metaData;for(const i in t)Object.prototype.hasOwnProperty.call(this.allowedMetaDataProps,i)&&(e[i]=t[i]);Object.keys(e).length>0&&(s.d.event.props.vwoMeta=s.d.event.props.vwoMeta||{},Object.assign(s.d.event.props.vwoMeta,e)),delete s.d.event.props.$metaData}return i.props.$visitor&&(s.d.visitor=i.props.$visitor,delete i.props.$visitor,Object.keys(s.d.visitor.props).length<=0&&(o=!1)),s.d.event.props.page=i.page||this.getPageInfo(),this.resetDataForCurrentEvent(i),{payload:s,shouldSyncCall:o}}getPageInfo(){return Ho.page}syncAdditionalDataWithEventsData(e,t){if(e)for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&"shouldSyncData"!==i){const n=e[i];if(void 0===n)continue;t.props?t.props[i]=n:t[i]=n}}resetDataForCurrentEvent(e){var t;let i=(null===(t=e._vwo)||void 0===t?void 0:t.eventDataConfig)||{};(i||e.props)&&(i={},e.props={})}excludeEventPropsNotToBeSynced(e,t,i){var n,o,s,r,a,l,c;const d=["fireLinkedTagSync","isTrusted","page","$visitor","isCustomEvent","VWO"];if(!i.isCustomEvent){const i=(null===(r=null===(s=null===(o=null===(n=e.currentSettings)||void 0===n?void 0:n.dataStore)||void 0===o?void 0:o.events)||void 0===s?void 0:s[t])||void 0===r?void 0:r.nS)||(null===(c=null===(l=null===(a=window.VWO._.allSettings.dataStore)||void 0===a?void 0:a.events)||void 0===l?void 0:l[t])||void 0===c?void 0:c.nS)||[];Array.prototype.push.apply(d,i)}if(!d||!d.length)return i;const u={},g=window.VWO._.allSettings.dataStore.events[t];for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e];d.indexOf(e)>-1?delete u[e]:u[e]=!g&&t?Vo(t,100):t}return u}}$o.UNREG_EVENT_LOCAL_STORAGE_NAME="vwoUnregEvents";class Bo extends $o{sendCall(e,t,i,n,o,s,r){return this.otherSide("sendCall",[e,t,i,n,o,s,r])}addDataFromMTAndSend(e,t,i,n,o,s,r,a){return this.otherSide("addDataFromMTAndSend",[e,t,i,n,o,s,r,a])}getDataForEventsCall(e,t,n){return i(this,void 0,void 0,(function*(){const i=window.VWO.modules.tags.sessionInfoService;let{payload:o,shouldSyncCall:s}=this.evaluateDataForEventsCall(e,t,n);return o.d.sessionId=yield i.getSessionId(),{data:o,shouldSyncCall:s}}))}}var Jo=new Bo;class Ko extends Uo{execute({event:e,getters:t},n,o,s,r){return i(this,void 0,void 0,(function*(){if(t.visDebug)(o=o||vo)(s);else if(Jo.shouldSendEventCall(t,e)){r=r||(yield Ns.createUUIDCookie2(t,n));const{data:i,shouldSyncCall:a}=yield Jo.getDataForEventsCall(t,r,e);a&&(yield Jo.addDataFromMTAndSend(t,null,i,o,!0,s,e,null==n?void 0:n.id))}else(o=o||vo)(s)}))}}const zo=new Ko,Yo=zo.execute.bind(zo);function Xo(e,t){var i;const n=e.conflictingPropsData||{};if(!e.props){e.props={};const i=["name","props","_vwo","_meta","conflictingPropsData"];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i.includes(t)||(e.props[t]=e[t]));Object.assign(e.props,n),Object.keys(t).forEach((i=>{e.props[i]=t[i]}))}e.time=e.time||(null===(i=e.VWO)||void 0===i?void 0:i.firedTime)||+new Date}const qo={};function Qo({vwoEvents:e,getters:t,data:n,actions:o,event:s},r,a={},l=null){var c,d;return i(this,void 0,void 0,(function*(){if(s.name=r||s.name,null===(c=qo[s.name])||void 0===c?void 0:c.shouldWaitForCallbackExecution)return;let i;Xo(s,a),s.name===So.VARIATION_SHOWN&&(i=t.settings.campaigns[s.props.id]);const u=null===(d=s._vwo)||void 0===d?void 0:d.eventDataConfig;if(u){const i=Object.keys(u);for(let r=i.length-1;r>=0;--r){const a=i[r];s._vwo.eventDataConfig=u[a],delete u[a],yield Yo({getters:t,event:s,data:n,actions:o,vwoEvents:e},null,l,null,a)}}else yield Yo({getters:t,event:s,data:n,actions:o,vwoEvents:e},i,l)}))}function Zo(e,t,n,o=null){const s=window.phoenix;return n.name=n.name||t,qo[t]=qo[t]||{},qo[t].shouldWaitForCallbackExecution=!0,(e=e||s).trigger(t,n,(function(e){return i(this,void 0,void 0,(function*(){const i=s.store,n=i.getters;qo[t].shouldWaitForCallbackExecution=!1,yield Qo({getters:n,actions:i.actions,event:e,vwoEvents:s,data:{}},t,{},o)}))}))}function es(e,t,i,n={}){return Zo(e,t,Object.assign({name:t,time:+new Date,props:i},n))}const ts={variationShown(e,t,n){return i(this,void 0,void 0,(function*(){e=e||window.phoenix,n&&void 0===n.isFirst&&(n.isFirst=t.isFirst),yield es(e,So.VARIATION_SHOWN,t)}))},dimensionTagPushed(e,t){es(e=e||window.phoenix,So.DIMENSION_TAG_PUSHED,t)},unhideElement(e,t,i){i||es(e,So.UNHIDE_ELEMENT,void 0,t)}};window.VWO.modules.events={syncEventsDataToDataLayer:Qo,fireEventAndSyncData:Zo,events:ts};const is={VISITOR_IS_NOT_OPTED_OUT:"visitorIsNotOptedOut",VISITOR_IS_OPTED_OUT_COMPLETELY:"visitorIsOptedOutCompletely",VISITOR_IS_OPTED_OUT:"visitorIsOptedOut"};var ns;!function(e){e[e.OPTED_OUT_WITH_EXPERIENCE=0]="OPTED_OUT_WITH_EXPERIENCE",e[e.OPTED_OUT_PARTIALLY=1]="OPTED_OUT_PARTIALLY",e[e.OPTED_OUT_COMPLETELY=2]="OPTED_OUT_COMPLETELY"}(ns||(ns={}));class os{setOptOutStateConfig(){let e,t,i,n;switch(e=window.VWO._.isWorkerThread?window.phoenix.storages.storages.cookies.get("_vis_opt_out",!0):window.VWO._.cookies.get("_vis_opt_out",!0),e&&(e=Number(e)),e){case 0:t=is.VISITOR_IS_OPTED_OUT,i=!0,n=!1;break;case 1:case 2:t=is.VISITOR_IS_OPTED_OUT_COMPLETELY,i=!1,n=!1;break;default:t=is.VISITOR_IS_NOT_OPTED_OUT,i=!0,n=!0}window.VWO.phoenix&&window.fetcher.setValue("window.VWO._.optOutStates",{state:t,executeLib:i,shouldWeTrackVisitor:n}),window.VWO._.optOutStates={state:t,executeLib:i,shouldWeTrackVisitor:n}}callStopAnalyzeAndSurvey(){window.VWO._.optOutStates.shouldWeTrackVisitor||(window.VWO._.isWorkerThread?window.fetcher.getValue("window.VWO.modules.otherLibDeps.stopAnalyzeAndSurvey"):window.VWO.modules.otherLibDeps.stopAnalyzeAndSurvey())}getOptOutStateConfig(){return window.VWO._.optOutStates}shouldExecuteLibOnBasisOfCurrentOptOutState(){return!(!Co()&&!window._vis_debug)||(this.getOptOutStateConfig().executeLib||window._removeVwoGlobalStyle(),this.getOptOutStateConfig().executeLib)}shouldWeTrackVisitor(){return!(!Co()&&!window._vis_debug)||this.getOptOutStateConfig().shouldWeTrackVisitor}isVisitorOptedOut(){return!Co()&&!window._vis_debug&&this.getOptOutStateConfig().state!==is.VISITOR_IS_NOT_OPTED_OUT}}const ss=new os;function rs(e){const t=e.storages.storages.cookies.get("_vis_opt_out",!0);return!!(t||window.location.href.indexOf("vwo_opt_out=1")>-1)&&("0"!==t&&("2"!==t&&window.fetcher.getValue("window.VWO.optOut.process",[{accountId:e.accountId,domain:e.cookieDomain}]),!0))}var as,ls,cs,ds,us,gs,vs;!function(e){e.DOM="vwo_dom"}(as||(as={})),function(e){e.WILD_CARD="*",e.TRIGGER="trigger",e.POST_INIT="post-init",e.TIMER="vwo_timer"}(ls||(ls={})),function(e){e.URL_CHANGE="vwo_urlChange",e.LEAVE_INTENT="vwo_leaveIntent",e.CLICK_EVENT="vwo_dom_click",e.SUBMIT_EVENT="vwo_dom_submit",e.PAGE_LOAD_EVENT="vwo_page_load"}(cs||(cs={})),function(e){e.PAGE_VIEW="vwo_pageView",e.PAGE_UNLOAD_EVENT="vwo_pageUnload"}(ds||(ds={})),function(e){e.EXIT_CONDITIONS="__exitConditions"}(us||(us={})),function(e){e.DOM_CONTENT_LOADED="DOMContentLoaded",e.SCROLL="scroll",e.CLICK="click",e.SUBMIT="submit"}(gs||(gs={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(vs||(vs={}));class hs{constructor(e){this.setLevel(e)}setLevel(e="warn"){this.logLevel=vs[e.toUpperCase()]}info(e,t={}){this.customLog(vs.INFO,e,t)}debug(e,t={}){this.customLog(vs.DEBUG,e,t)}warn(e,t={}){var i,n;this.customLog(vs.WARN,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}error(e,t={}){var i,n;this.customLog(vs.ERROR,e,t,null===(n=null===(i=window.VWO)||void 0===i?void 0:i._)||void 0===n?void 0:n.customError)}customLog(e,t,i,n=null){var o,s,r;if(e>=this.logLevel){const a=this.formatMessage(e,t,i);null===(r=null===(s=null===(o=window.VWOEvents)||void 0===o?void 0:o.store)||void 0===s?void 0:s.actions)||void 0===r||r.addLogsForDebugging(a),n?n(a):this.consoleLog(e,[a])}}consoleLog(e,t){switch(e){case vs.INFO:console.info(...t);break;case vs.WARN:console.warn(...t);break;case vs.ERROR:console.error(...t);break;default:console.log(...t)}}formatMessage(e,t,i){var n,o;const s=Object.keys(i).reduce(((e,t)=>e.replace(new RegExp(`{{${t}}}`,"g"),i[t])),t),r=`${as.DOM}_`;let a=i;const l=(null===(n=i.data)||void 0===n?void 0:n.vwoEventName)||i.vwoEventName;return l!==r+gs.CLICK&&l!==r+gs.SUBMIT||(a=i.data?null===(o=i.data)||void 0===o?void 0:o.props:a.props,a=a||{name:l}),`VWO: [${vs[e].toUpperCase()}] [${(new Date).toUTCString()}] ${s} ${JSON.stringify(a)}`}}var ps=new hs("warn");class ws{toAbsURL(e){return new URL(e,document.baseURI).href}isHashPresent(e){return-1!==e.indexOf("#")}isQueryParamPresent(e,t){var i=e.indexOf("#"),n=e.indexOf("?"),o=t?-1:e.indexOf("=");return-1===i?-1!==n||-1!==o:-1!==n&&i>n||-1!==o&&i>o}otherSide(...e){return e[0]="VWO.modules.vwoUtils.urlUtils."+e[0],window.fetcher.getValue(...e)}}var fs=function(e){return e.replace(/^(https?:\/\/)(?:w{3}\.)?(.*?)(?:\/(?:home|default|index)\..{3,4}|\/$)?(?:\/)?([\?#].*)?$/i,"$1$2$3")},Es=function(e){return e.replace(/^(https?:\/\/)(?:w{3}\.)?(.*?)(?:(?:home|default|index)\..{3,4})?([\?#].*)?$/i,"$1$2$3")},ms=function(e){return Es(e).replace(/\/\?/gi,"?")},_s=window._vis_opt_url,Os;class Ss{constructor(){Os=this}regexEscape(e){return e.replace(/[\-\[\]{}()*+?.,\/\\^$|#\s]/g,"\\$&")}cleanURL(e,t){return _s&&!t?_s:e.replace(/^(.*[^\*])(\/(home|default|index)\..{3,4})((\?|#).*)*$/i,"$1$4")}removeWWW(e,t){return e=e.replace(/^(https?:\/\/)(www\.)?(.*)$/i,"$1$3"),t&&(e=e.replace(/(^\*?|\/\/)www\./i,"$1")),e}stripSlashes(e,t,i){if(e=e.replace(/\/$/,""),t){var n=e.indexOf("/?");e.indexOf("?")-1===n&&(e=e.replace(/\/\?([^\?]*)(.*)/,"?$1$2"))}if(i){var o=e.indexOf("/#");e.indexOf("#")-1===o&&(e=e.replace(/\/#([^#]*)(.*)/,"#$1$2"))}return e}cleanPattern(e){let t="";return{regex:e.replace(/\(\?([a-zA-Z])\)/g,((...e)=>(e[1]&&(t+=e[1]),""))),flags:t}}matchRegex(e,t,i,n){if("string"!=typeof e||"string"!=typeof t)return!1;let o="ig";if(n){const{regex:i,flags:n}=Os.cleanPattern(t);o=n||"g";try{return new RegExp(i,o).exec(e)||Os.matchRelativeUrl(e,i,o)}catch(e){const n="Failed to create regex for the pattern: "+t+", the cleaned regex derived from the pattern is: "+i+" and regexFlag is: "+o;return ps.error(n),!1}}var s=function(i){return new RegExp(t,o).exec(e)||new RegExp(t,o).exec(i(e))||Os.matchRelativeUrl(e,t,o,i)};let r=fs,a=!1;390187==window._vwo_acc_id&&(a=!0),a&&(r=ms);var l=s(r);return l&&!a?(r=Es,i&&s(r)||l):l}matchRelativeUrl(e,t,i,n){if(0===e.indexOf("http"))return!1;const o=(new ws).toAbsURL(e);var s=new RegExp(t,i).exec(o);return n&&!s&&(s=new RegExp(t,i).exec(n(o))),!!s}matchWildcard(e,t,i){if("string"!=typeof e||"string"!=typeof t)return!1;const n=new ws;var o=n.isQueryParamPresent(t),s=n.isHashPresent(t),r=n.isQueryParamPresent(e),a=n.isHashPresent(e);o||(r&&a?e=e.replace(/^(.*?)(\?[^#]*)(#?.*)$/,"$1$3"):r&&!a&&(e=e.replace(/^(.*)(\?.*)$/,"$1"))),s||a&&(e=e.replace(/^(.*?)(#.*)$/,"$1")),"/"!==e&&(e=Os.stripSlashes(e,r,a)),"/"!==t&&(t=Os.stripSlashes(t,o,s));var l,c,d=new RegExp("^"+Os.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi");return d.test(e)?(d=new RegExp("^"+Os.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi"),!i||d.exec(e)):(e=Os.removeWWW(e),t=Os.removeWWW(t,!0),(d=new RegExp("^"+Os.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi")).test(e)?(d=new RegExp("^"+Os.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi"),!i||d.exec(e)):(l=Os.cleanURL(t,!0),-1===t.indexOf("*")&&((c=Os.removeWWW(n.toAbsURL(e)).replace(/\/$/,"").replace(/\/\?/,"?"))===t||c===l)||(e=Os.cleanURL(e),t=l,!!(d=new RegExp("^"+Os.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi")).test(e)&&(d=new RegExp("^"+Os.regexEscape(t).replace(/\\\*/g,"(.*)")+"$","gi"),!i||d.exec(e)))))}}const ys=new Ss;window.VWO.modules.vwoUtils.url=ys,window.VWO._.matchRegex=ys.matchRegex;class Ts{verifyUrl(e,t,i,n){let o=!1;const s=n?e:this.getCleanedUrl(e);if(t)if(n)o=!!ys.matchRegex(s,t,null,n);else{const i=this.getCleanedUrl(e,!0);o=!(!ys.matchRegex(s,t,null,n)&&!ys.matchRegex(i,t,!0,n))}else o=ys.matchWildcard(s,i)||ys.matchWildcard(e,i);return o}getCleanedUrl(e,t){if(!e)return;let i;return-1!==e.search(/_vis_(test_id|hash|opt_(preview_combination|random))=[a-z\.\d,]+&?/)?(i=e.replace(/_vis_(test_id|hash|opt_(preview_combination|random))=[a-z\.\d,]+&?/g,""),i=t?i.replace(/(\??&?)$/,""):i.replace(/(\/?\??&?)$/,"")):i=t?e:e.replace(/\/$/,""),i}compareUrlWithIncludeExcludeRegex(e,t,i,n){const o={};return i&&ys.matchRegex(e,i)?(o.didMatch=!1,o.reason=1,o):(o.didMatch=this.verifyUrl(e,t,n),o.reason=o.didMatch?2:3,o)}}const Is=new Ts;class Cs extends Ts{compareUrlWithIncludeExcludeRegex(e,t,n,o){return i(this,void 0,void 0,(function*(){return window.fetcher.getValue('VWO.modules.utils.urlUtils.compareUrlWithIncludeExcludeRegex("${{1}}", "${{2}}", "${{3}}", "${{4}}")',null,{captureGroups:[e,t,n,o]})}))}}const bs=new Cs;window.VWO.modules.utils.urlUtils=bs;class As extends Do{constructor(){super(...arguments),this.loadScriptLoadedScripts={},this.thirdPartyCookiesSuccess={},this.TPJarExpiry=730,this.urlCache={},this.additionalStyle=window._vwo_acc_id>742099||718480===window._vwo_acc_id?"-webkit-transform:none;-ms-transform:none;transform:none;":"",this.hideElExpression=`{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;${this.additionalStyle}}`,this.validateWithSkipEventPropAndSkipValidationIfTimer=function(e){return window.VWO.phoenix.validateTrigger(e,null,{skipEventProps:!0,skipValidationIfTimer:!0})}}isGloballyOptedOut(e){return!!parseInt(e.storages.storages.cookies.get(mo.GLOBAL_OPT_OUT,!0),10)}getSettings(e,t){return i(this,void 0,void 0,(function*(){if(window._vis_debug||Co())return;const i=[],n=t.vwoInternalProperties.experimentIds,o=t.settings.campaigns,s=t.serverUrl;let r=!1;const a=t.pageGroupPageConfig,l=t.pageGroupExperimentConfig,c=[],d=[];for(const e in a)Object.hasOwnProperty.call(a,e)&&c.push(e);for(const e in l)Object.hasOwnProperty.call(l,e)&&d.push(e);const u=[];for(let e=0;e<n.length;e++)o[n[e]]?("ANALYZE_RECORDING"===o[n[e]].type&&(r=!0),i.push(n[e])):u.push(n[e]);let g=yield t.storages.storages.cookies.get("wgs_uuid");g=g||"";let v=s+"settings.js?a="+t.accountId+"&settings_type="+e+"&vn=&eventArch=1&uuid="+g;if(1==e&&window.VWO._.txtCfg&&(v+="&tS=1"),2!==e&&3!==e||(v=v+"&u="+encodeURIComponent(t.currentUrl)),d.length){v+="&ec="+d.join("|")}if(c.length){v+="&pc="+c.join("|")}if(r&&(v+="&rc=1"),t.smartCodeVersion>=1.4&&t.smartCodeVersion<2){let e;if(ln._.jar){const t=ln._.jar.getAll();e=t&&Object.keys(t).filter((function(e){return e.match(/(vis_opt_exp_\d*._combi+)/g)})).map((function(e){return(e+"="+t[e]).match(/([\d,]+)/g).join("-")})).join("|")}else e=window._vwo_code.getCombinationCookie&&this.getCombinationCookie();e&&(v+="&c="+e)}if(4!==e&&i.length){const e="&exc="+i.join("|");v.length+e.length<2e3&&(v+=e)}this.loadScript(v,this.firePageViewEvent,(()=>{}),{defer:!0})}))}firePageViewEvent(e={}){return i(this,void 0,void 0,(function*(){const t=window.VWO.phoenix,i=window.VWO.phoenix.store.getters;yield window.VWO._.session_init_complete,t.trigger(So.START_APPLY_CHANGES),Zo(t,So.PAGE_VIEW,{name:So.PAGE_VIEW,time:+new Date,props:{url:i.currentUrl}},(()=>{t.trigger(So.END_APPLY_CHANGES),window.fetcher.getValue("VWO._.phoenixMT.trigger",[So.END_APPLY_CHANGES]),e.shouldFireDomLoad&&t.trigger(So.DOM_CONTENTLOADED)}))}))}doNotTrack(e){if(e.settings.vwoData.dntEnabled)return"yes"===e.navigator.doNotTrack||"1"==e.navigator.doNotTrack||"1"==e.navigator.msDoNotTrack||"1"==e.doNotTrack}_optOut(e,t){return rs(e)?(t.trigger(So.OPT_OUT,{oldArgs:[!0]}),!0):(t.trigger(So.OPT_OUT,{oldArgs:[!1]}),!1)}setTPCJarValue(e,t,n,o,s,r,a){return i(this,void 0,void 0,(function*(){const i=e.storages.storages.cookies;yield i.setThirdPartyCookiesInJar(t,n,o,r),this.__vwoCookie=yield i.getThirdPartyJarValue(),this.dTP=this.dTP||ko((()=>window.VWO.phoenix.storages.get("cookies").createThirdParty.call(window.VWO.phoenix.storages.get("cookies"),"_vwo",this.__vwoCookie,this.TPJarExpiry,void 0,void 0,void 0,a)),50),this.__vwoCookie&&this.dTP()}))}setCampaignIds(e){return i(this,void 0,void 0,(function*(){this.otherSide('setCampaignIds("${{1}}", "${{2}}")',null,[e]);const{actions:t,getters:i}=ln.phoenix.store,n=i.vwoInternalProperties.experimentIds||[];e.forEach((e=>n.push(+e))),t.addValues({experimentIds:n},"vwoInternalProperties")}))}isCustomTrigger(e){var t;return null===(t=e.cnds)||void 0===t?void 0:t.some((function(e){var t;return"object"==typeof e&&null!==e&&(null===(t=e.filters)||void 0===t?void 0:t.some((function(e){return e instanceof Array&&e.indexOf("exec")>=0})))}))}addListener(e,t,i,n){if(!i||!Object.keys(i).length)return;let o;const s=i.eventName,r=i.triggerID,a=i.trigger;if(r){const t=e.currentSettings.triggers[r];o=t&&this.isCustomTrigger(t)?`trigger.${r}`:t}if(o=o||s||a,o){return[o,t.on(o,n)]}}extraData2(e){return i(this,void 0,void 0,(function*(){return this.otherSide('extraData2("${{1}}")',null,[e])}))}isBotScreen(){return i(this,void 0,void 0,(function*(){return this.otherSide("isBotScreen")}))}shouldTrackUserForCampaign(e){return"number"==typeof e&&(e=window._vwo_exp[e]),!e||!window._vwo_code||!window._vwo_code[so]&&!window._vwo_code[ro]||(this.isDomIndependentCampaign(e.type)||this.isSplitVariation(e))}createCookie(e,t,n,o,s){return i(this,void 0,void 0,(function*(){const i=(e=e||ln.phoenix.store.getters).storages.storages.cookies;this.shouldTrackUserForCampaign(s)&&(s&&s.multiple_domains?yield i.createThirdParty(t,n,o,void 0,s.id,void 0,s):i.create(t,n,o))}))}createUUIDCookie2(e,t){return i(this,void 0,void 0,(function*(){if(ss.isVisitorOptedOut())return;e=e||window.VWO.phoenix.store.getters;const i=yield this.getUUID(e,t),n=t&&t.id&&t.multiple_domains?"_"+t.id:"";return(yield e.storages.storages.cookies.get("_vwo_uuid"+n))||(yield this.createCookie(e,"_vwo_uuid"+n,i,mo.UUID_COOKIE_EXPIRY,t)),ln.data=ln.data||{},ln.data.vin=ln.data.vin||{},ln.data.vin.uuid=i,yield window.fetcher.setValue("VWO.data.vin",ln.data.vin),i}))}getUUID(e,t){return i(this,void 0,void 0,(function*(){e=e||ln.phoenix.store.getters,t=t||{},this.uuid=e.vwoUUID;const i=t&&t.id&&t.multiple_domains&&(yield e.storages.storages.cookies.get("_vwo_uuid_"+t.id))||(yield e.storages.storages.cookies.get("_vwo_uuid"));return this.uuid=i||this.uuid||this.generateUUID()}))}getSplitDecision(e,t){return window._vis_debug||Co()?this.otherSide("getSplitDecision",[t]):e.storages.storages.cookies.get("_vis_opt_exp_"+t+"_split")}loadWithDelay(e,t){t?setTimeout(e,t):e()}loadScript(e,t,i,n={}){this.loadScriptLoadedScripts[e]?null==t||t():(this.loadScriptLoadedScripts[e]=1,window.fetcher.getValue('VWO.modules.utils.loadScript("${{1}}", "${{2}}", "${{3}}", "${{4}}")',null,{captureGroups:[e,t,i,n]}))}loadNonTestingLibraries(e,t,i){var n,o,s,r,a,l,c;const d=e.serverUrl,u=null===(o=null===(n=e.settings)||void 0===n?void 0:n.plugins)||void 0===o?void 0:o.LIBINFO,g=e.vwoInternalProperties.dtcTimer,v=null===(s=null==u?void 0:u.TRACK)||void 0===s?void 0:s.HASH,h=null===(r=null==u?void 0:u.OPA)||void 0===r?void 0:r.HASH,p=null===(a=null==u?void 0:u.OPA)||void 0===a?void 0:a.PATH,w=null===(l=null==u?void 0:u.SURVEY)||void 0===l?void 0:l.HASH;let f=!1,E=!1;const m=null===(c=e.vwoInternalProperties)||void 0===c?void 0:c.loadPC;let _=!1,O=window._vis_apm_lib;const S=[];for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const i=t[e];if("ANALYSIS"!==i.type&&"ANALYZE_FORM"!==i.type&&"ANALYZE_HEATMAP"!==i.type&&"ANALYZE_RECORDING"!==i.type||(f=!0,E=!0),"FUNNEL"!==i.type&&"TRACK"!==i.type||(E=!0),"SURVEY"===i.type||i.survey&&i.survey.id)for(var y in E=!0,_=!0,i.survey)Object.prototype.hasOwnProperty.call(i.survey,y)&&S.push(y)}m&&this.loadWithDelay((()=>{this.loadScript(`${d}web/djIkcGM6MS4w/tag-1a6cb79d9b921e9f733a3a9f91c43b90.js`,null,(function(){}))}),g),E&&!ln.v_t&&this.loadWithDelay((()=>{this.loadScript(`${d}7.0/track-${v}.js`)}),g),f&&!ln.nls&&(ln.v_t||this.loadWithDelay((()=>{this.loadScript(`${d}7.0/track-${v}.js`)}),g),this.loadWithDelay((()=>{this.loadScript(`${d}analysis${p}/opa-${h}.js`,null,(function(){ss.callStopAnalyzeAndSurvey()}))}),g)),_&&!ln.survey&&(ln.v_t||this.loadWithDelay((()=>{this.loadScript(`${d}7.0/track-${v}.js`)}),g),ln._.allSettings.dataStore.previewExtraSettings||this.loadWithDelay((()=>{this.loadScript(`${d}va_survey-${w}.js`,null,(function(){ss.callStopAnalyzeAndSurvey()}))}),g)),O&&!ln.apm&&this.loadWithDelay((()=>{this.loadScript(`${d}${window._vis_apm_lib}`,null,(()=>{}),{defer:!0})}),g),_&&i&&ln.phoenix.trigger(So.NEW_SURVEY_FOUND,{oldArgs:[S]})}checkForWrongConsent(e,t){return t&&"http:"===e.location.protocol}setThirdPartyCookiesForApplicableCamps(e){if(p(e.settings.crossDomain)&&!e.flags.cookieLessModeEnabled){const t=Object.keys(e.settings.crossDomain);for(let i=0;i<t.length;i++){const n=t[i];if(this.thirdPartyCookiesSuccess[n])continue;const o=e.settings.crossDomain[n];let s=Object.keys(o).length-1;for(;s>=0;){const t=o[s];"_vwo_uuid_"===t.name.substring(0,10)?this.createCookie(e,t.name,t.value,mo.UUID_COOKIE_EXPIRY):this.createCookie(e,t.name,t.value,100),s--}this.thirdPartyCookiesSuccess[n]=!0}}}shouldExecuteLib({getters:e,actions:t,vwoEvents:n}){return i(this,void 0,void 0,(function*(){const{doCookiesMatter:i,areCookiesDisabled:o,shouldStopExecWhenSsmNotFound:s,isSSApp:r}=window.VWO._.envUtils;if(i){const i=this.checkForWrongConsent(e,r);if(i||s){e.vwoCode&&e.vwoCode.finish(),Zo(n,So.SHOULD_EXECUTE_LIB_ERROR,i?{message:"SameSite;Secure enabled but visitor landed on HTTP page and thus cookies can't be created",oldArgs:[void 0,void 0,void 0,void 0,void 0,void 0,1]}:{message:"Visitor has been to HTTPS page when SameSite and Secure cookies were dropped",oldArgs:[void 0,!0,void 0,void 0,void 0,void 0,2]});const o=[{shouldExecuteLib:!1,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,o,"vwoInternalProperties")}}if(this.isTrackingNotPossible){const e=[{shouldExecuteLib:!this.isTrackingNotPossible,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,e,"vwoInternalProperties")}if(!o){if(this.preview()||e.visDebug){const e=[{shouldExecuteLib:!0,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,e,"vwoInternalProperties")}if(this.doNotTrack(e)||this.isGloballyOptedOut(e)||this._optOut(e,n)){e.vwoCode&&e.vwoCode.finish(),Zo(n,So.SHOULD_EXECUTE_LIB_ERROR,{message:"User has opted out"}),this.isTrackingNotPossible=!0,t.addValues({optOut:!0},"vwoInternalProperties");const i=[{shouldExecuteLib:!1,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,i,"vwoInternalProperties")}const i=[{shouldExecuteLib:!0,destinationMT:"VWO._.shouldExecuteLib"}];return this.setPropertiesToBothThreads(t,i,"vwoInternalProperties")}t.addValues({cookiesDisabled:!0},"vwoInternalProperties"),Zo(n,So.SHOULD_EXECUTE_LIB_ERROR,{message:"Cookies disabled",oldArgs:[void 0,o]}),this.isTrackingNotPossible=!0;return this.setPropertiesToBothThreads(t,[{shouldExecuteLib:!1,destinationMT:"VWO._.shouldExecuteLib"}],"vwoInternalProperties")}))}insertCSS(e,t){this.otherSide("insertCSS",[e,t])}unhideCampaignLevelStyle(e){window.fetcher.getValue("VWO.modules.utils.libUtils.removeCampaignLevelStyleTag",[e])}setXpathAndHideEl(e,t,n,o=!0){var s;const r=this;let a,l,c;const d=[e.id],u=this.isPersonalizeCampaign(e),g=e.sen,{visibilityServiceCache:v}=window.VWO._;if(e.id)for(l=d.length;l--;){c=d[l];let{selector:h,selectorPerVariation:p}=v&&(null===(s=v[c])||void 0===s?void 0:s.xpath)||this.getCampaignXPath(e);if(h=h||n||"",h.split(",").forEach((function(e){performance.mark(`el-${e}-hidden`)})),e.xPath=h,window.VWO._.ac&&window.VWO._.ac.PRTHD||window.VWO._.preventHidingInSPA||!o)return;if(u&&Object.keys(p).forEach((function(n){return i(this,void 0,void 0,(function*(){const i=e.sections[1].triggers[n],o=t.currentSettings.triggers[i],s=e.sections[1].sen;if((!s||!r.doNotHideElements(s[n]))&&p[n]&&(yield r.validateWithSkipEventPropAndSkipValidationIfTimer(o))){const e=p[n]+r.hideElExpression;r.insertCSS("_vis_opt_path_hides_"+c+"_"+n,e)}}))})),this.doNotHideElements(g))return;a=h?h+this.hideElExpression:"",a&&this.insertCSS("_vis_opt_path_hides_"+c,a)}else a=t.vwoText||"",this.insertCSS("_vis_opt_path_hides",a)}setPropertiesToBothThreads(e,t,i){let n={};t.forEach((e=>{const t=Object.keys(e)[0],i=e[t];n=Object.assign(Object.assign({},n),{[t]:i}),window.fetcher.setValue(e.destinationMT,i)})),e.addValues(n,i)}checkAndInitializeClickClass(){if(!window.VWO.isVwoClickClassInitialized){const e=window.VWO._.allSettings.dataStore.campaigns;let t=!1;for(const i in e)if(e[i].clickmap){t=!0;break}if(t){const e=window.VWO.modules.phoenixPlugins.events.predefinedEvents;window.VWO.phoenix.events.add(new e.ClickDomEvent)}}}areSettingsCached(){return!1}setFlagForCachingIfEnabled(e,t){try{const e=window.VWO._.allSettings.dataStore.plugins.DACDNCONFIG,i=((null==e?void 0:e.SCC)&&JSON.parse(e.SCC),[{isSettingsCachingEnabled:!1,destinationMT:"VWO._.isSettingsCachingEnabled"}]);this.setPropertiesToBothThreads(t,i,"vwoInternalProperties")}catch(e){}}addListenerForSessionInitComplete(){ln._.session_init_complete=new Promise((e=>{const t=window.VWO.phoenix.on(So.SESSION_INIT_COMPLETE,(()=>{window.VWO.phoenix.off(So.SESSION_INIT_COMPLETE,t),e()}))}))}isCurrentURLSplitVariation({chosenVariation:e,getters:t,campaignData:i}){if("SPLIT_URL"!==i.type)return!1;let n="";const o=bs.getCleanedUrl(t.currentUrl),s=this.urlCache[o]||this.urlCache[t.currentUrl];if(void 0!==s)return s;let r=!1,a=t.currentUrl;const l=i.sections;return l[1].variationsRegex?(n=l[1].variationsRegex[e],r=bs.verifyUrl(t.currentUrl,n,null)):(n=l[1].variations[e],r=ys.matchWildcard(o,n),a=o),this.urlCache[a]=!!r}}const Ns=new As;var Vs;window.VWO.modules.utils.libUtils=Ns,function(e){e.ANALYSIS="r",e.ANALYZE_FORM="a",e.ANALYZE_HEATMAP="a",e.ANALYZE_RECORDING="a",e.FUNNEL="t",e.SURVEY="s",e.TRACK="t"}(Vs||(Vs={}));const Rs=function(e,t){let i=0;for(let t=e.length-1;t>=0;t--)i+=e.charCodeAt(t);let n=i+t;for(let e=0;e<19;e++)n=(9301*n+49297)%233280;return n/233280},xs=function(e,t){return e/(t/100)},Ps={getRandom:function(e,t){return window.VWO._.allSettings.dataStore.CIF?Rs(e,t):Math.random()},getRandomForVariation:function(e,t){return e&&t&&window.VWO._.allSettings.dataStore.CIF?xs(e,t):Math.random()}};class Ds extends yo{constructor(){super(...arguments),this.campaignsInternalMap=window.VWO._.campaignsInternalMap={}}markGoalTriggered(e,t,n){var o,s;return i(this,void 0,void 0,(function*(){if("TRACK"===e.type)yield null===(s=(o=window.tracklib).markGoalTriggered)||void 0===s?void 0:s.call(o,e.id,t);else{let i=n.storages.storages.cookies.get("_vis_opt_exp_"+e.id+"_goal_"+t);e.goals[t].mca&&i&&(i=+i+1),yield Ns.createCookie(n,"_vis_opt_exp_"+e.id+"_goal_"+t,String(null!=i?i:1),100,e)}}))}isGoalTriggered(e,t,n){var o,s;return i(this,void 0,void 0,(function*(){if("TRACK"===e.type){return!(yield null===(s=(o=window.tracklib).shouldTriggerGoal)||void 0===s?void 0:s.call(o,e.id,t))}return e.goals[t].mca?null:n.storages.storages.cookies.get("_vis_opt_exp_"+e.id+"_goal_"+t)}))}clearTimeouts(e){return i(this,void 0,void 0,(function*(){yield this.otherSide("clearTimeoutsHandler",[e]),delete e.timeout}))}clearTimerAfterTimeout(e,t){return i(this,void 0,void 0,(function*(){clearTimeout(e[ho]),e[ho]=setTimeout((()=>{this.clearTimeouts(e)}),(yield t.vwoInternalProperties.SPA_ELEMENT_WAIT_TIMEOUT)||2e3)}))}getTrackGoalIdFromExp(e,t){return Hn(t.settings.campaigns[e].goals)[0]}isExcluded(e,t){const i=window.tracklib;return"TRACK"===t.type?i.isGoalExcluded(this.getTrackGoalIdFromExp(t.id,e)):"FUNNEL"===t.type?i.isFunnelExcluded(t.id):Ns.isAnalyzeCampaign(t.type)?i.isAnalyzeCampaignExcluded(t.id):!!e.storages.storages.cookies.get("_vis_opt_exp_"+t.id+"_exclude")}getCombi(e,t,n){return i(this,void 0,void 0,(function*(){e=e||ln.phoenix.store.getters;const i=window.tracklib;return"TRACK"===t.type?(null==i?void 0:i.isGoalIncluded)?yield i.isGoalIncluded(this.getTrackGoalIdFromExp(t.id,e)):void(n||(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["track.delayedGoalConversion",{campaignId:t.id,type:"TRACK",goalId:this.getTrackGoalIdFromExp(t.id,e)}]]}))):"FUNNEL"===t.type?(null==i?void 0:i.isFunnelIncluded)?yield i.isFunnelIncluded(t.id):void(n||(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["track.delayedGoalConversion",{campaignId:t.id,type:"FUNNEL"}]]}))):(null==Ns?void 0:Ns.isAnalyzeCampaign(t.type))?i.isAnalyzeCampaignIncluded?yield i.isAnalyzeCampaignIncluded(t.id):void(n||(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["track.delayedGoalConversion",{campaignId:t.id,type:t.type}]]}))):this.getCombiCookie(e,t.id)}))}getCombiCookie(e,t){return i(this,void 0,void 0,(function*(){return(e.visDebug||Co())&&(yield window.VWO._.previewDebuggerBooted),e.storages.storages.cookies.get("_vis_opt_exp_"+t+"_combi")}))}getCombiCookieFromMT(e){return this.otherSide("getCombiCookie",[e])}exclude(e,t){return i(this,void 0,void 0,(function*(){const i=window.tracklib;"TRACK"===t.type?yield i.excludeGoal(this.getTrackGoalIdFromExp(t.id,e)):"FUNNEL"===t.type?yield i.excludeFunnel(t.id):Ns.isAnalyzeCampaign(t.type)?yield i.excludeAnalyzeCampaign(t.id):yield Ns.createCookie(e,"_vis_opt_exp_"+t.id+"_exclude","1",100,t)}))}include(e,t,n,o){return i(this,void 0,void 0,(function*(){let i=!1;const s=window.tracklib;return"TRACK"===o.type?yield s.includeGoal(this.getTrackGoalIdFromExp(o.id,e)):"FUNNEL"===o.type?yield s.includeFunnel(t):Ns.isAnalyzeCampaign(o.type)?yield s.includeAnalyzeCampaign(t):(yield Ns.createCookie(e,"_vis_opt_exp_"+t+"_combi",n,100,o),i=!0),{isCookieCreated:i}}))}isLogged(e,t){return e.storages.storages.cookies.get("_vis_opt_exp_"+t+"_combi_choose")}isBucketed(e,t,n){return i(this,void 0,void 0,(function*(){return!!(yield this.getCombi(e,t,n))}))}shouldBucket(e,t){return i(this,void 0,void 0,(function*(){const i=t.type,n=window.tracklib,o=void 0!==ln.data.pc[Vs[i]];let s,r=t.pc_traffic;if(r=void 0===r?100:r,!r)return!1;this.campaignsInternalMap[t.id]&&this.campaignsInternalMap[t.id].r?s=this.campaignsInternalMap[t.id].r:(this.campaignsInternalMap[t.id]={},s=this.campaignsInternalMap[t.id].r=Ps.getRandom(e.vwoUUID,t.id));const a=Ns.isSessionBasedCampaign2(t)?yield ln._.sessionInfoService.getPcTraffic():100*s,l=n.isFeatureBucketed&&Number(yield n.isFeatureBucketed(Vs[i]));return(!o||l)&&a<=r}))}chooseCombination(e,t,n){var o,s,r;return i(this,void 0,void 0,(function*(){let i;if(ss.isVisitorOptedOut())return;const a=t&&t.id&&(t.combination_chosen||t.cc);if(t&&Ns.isPersonalizeCampaign(t)){if(a&&"0"!==a&&!t.debug)return a}else if(a&&"0"!==a)return a;if(window.chooseCombinationPersonalisation&&window.vwoPersonalisationCampaigns&&window.vwoPersonalisationCampaigns.indexOf&&-1!==window.vwoPersonalisationCampaigns.indexOf(+t.id)&&(i=window.chooseCombinationPersonalisation(t.id),0!=i)){return""+(parseInt(i.split(":")[1],10)+1)}const l=!!window.VWO._.allSettings.dataStore.CIF,c=n&&n.scaleInfo||t.combs,d={},u={};let g,v,h,p=Ps.getRandomForVariation(null===(o=this.campaignsInternalMap[null==t?void 0:t.id])||void 0===o?void 0:o.r,null==t?void 0:t.pc_traffic),w=l?Hn(c).sort():Hn(c),f=w.length,E=0,m=!1,_=!1;for(h=0;h<f;h++){i=w[h];const o=n?i:t.id;if(v=e.settings.campaigns[o].type,!isNaN(parseFloat(c[i]))&&0!=c[i])if("VISUAL_AB"===v||"SPLIT_URL"===v){g=n?n.segmentInfo:t.sections[1].triggers;const o=g[i];0===g.length||!1===(null===(s=e.currentSettings.triggers[o])||void 0===s?void 0:s.cnds[0])?(_=!0,u[i]=c[i]):(n?yield window.VWO.phoenix.validateTrigger(e.currentSettings.triggers[g[i]],null,{skipEventProps:!0,skipValidationIfTimer:!0}):e.triggers[o]?e.triggers[o].state:yield window.VWO.phoenix.validateTrigger(e.currentSettings.triggers[o],null))&&(1!=g[i]&&(m=!0),d[i]=E+c[i],E+=c[i])}else d[i]=E+c[i],E+=c[i]}if(!m&&_)for(w=Hn(u),f=w.length,h=0;h<f;h++)i=w[h],d[i]=E+u[i],E+=u[i];let O=-1,S=null===(r=null==t?void 0:t.sections[1])||void 0===r?void 0:r.priority;if(S)for(f=S.length,h=0;h<f;h++)if(d[S[h]]){O=h;break}if(O>=0)return S[O]+"";for(0<E&&1!==E&&(p*=E),w=l?Hn(d).sort():Hn(d),f=w.length,h=0;h<f;h++)if(i=w[h],!isNaN(parseFloat(c[i]))&&p<=d[i])return i}))}getGroupBasedCampaigns({getters:e}){var t,i;let n=[],o=null===(i=null===(t=e.settings.vwoData)||void 0===t?void 0:t.gC)||void 0===i?void 0:i.map((e=>e.c));o=o||[];for(const e of o)n=n.concat(e);return n.map((e=>""+e))}firePatternMatchingEvent(e,t,i,n,o,s){1===i?e.trigger(So.EXCLUDE_URL,{oldArgs:[t]}):e.trigger(So.MATCH_WILDCARD,{oldArgs:[t,n,o,s]})}doExperimentHere(e,t,i,n={}){let o;if(t.pg_config){const n=t.pg_config[0];o=i.pageGroup.validatePage(n,null,e.currentUrl)}else o=Is.compareUrlWithIncludeExcludeRegex(e.currentUrl,n.urlRegex||t.urlRegex,n.excludeUrl||t.exclude_url,n.urlPattern||t.url_pattern);return[o.didMatch,o.reason]}checkForVariationTargeting(e){const t=e.sections[1].triggers;return!(!t||0===t.length)}executeCampaignJS(e,t){const i=e.id,n=e.combination_chosen||e.cc,o=`${t}Executed`;if(e.globalCode[t]&&!e.globalCode[o])try{window.VWO.phoenix.settings.currentSettings.tags[e.globalCode[t]].fn(i,n),e.globalCode[o]=!0}catch(e){}}}const Ls=new Ds;window.VWO.modules.utils.campaignUtils=Ls;class ks{otherSide(...e){e[0]="VWO.modules.tags.checkEnvironment.utils."+e[0],window.fetcher.getValue(...e)}}class Us extends ks{checkCookieJarMismatch({getters:e,vwoEvents:t}){const i=e.storages.storages,n=i.localStorageService,o=i.cookies;let s;!(s=o.get(mo.COOKIE_JAR,!0))&&!(s=n.get(mo.COOKIE_JAR))||e.vwoInternalProperties.jar||(o.create(mo.COOKIE_JAR,s,!1),n.remove(mo.COOKIE_JAR),t.trigger(So.ERROR,{error:`_vwo(value = ${s}) cookie found but Cookie jar is not created. Deleting it.`}))}checkForTimeout({getters:e,actions:t,vwoEvents:i}){if(e.vwoCode&&window.vwoCodeEndBeforeVA&&!e.vwoCode[ro]){i.trigger(So.SHOULD_EXECUTE_LIB_ERROR,{message:"SSM cookie found",oldArgs:[null,void 0,void 0,void 0,!0]});const e=[{[so]:1,destinationMT:"window._vwo_code.lT"}];Ns.setPropertiesToBothThreads(t,e,"vwoCode")}}addDomListenerForTimeout(e){this.otherSide('addDomListenerForTimeout("${{1}}")',null,{captureGroups:[function(){window.VWO.phoenix.store.getters.vwoInternalProperties.willRedirectionOccur||window._vwo_code&&window._vwo_code.finish();for(const t in window.VWO.phoenix.store.getters.settings.campaigns){const i=window.VWO.phoenix.store.getters.settings.campaigns[t];i.dontKillTimer?Ls.clearTimerAfterTimeout(i,e):setTimeout((()=>{Ls.clearTimeouts(i)}),500)}window.VWO._.coreLib.finished=1,window.vwo_libExecuted=!0,window.fetcher.setValue("vwo_libExecuted",!0)}]})}}var Ws=new Us;class Ms{migrateCookiesToSSM({getters:e}){const t=Oo(),i=e.storages.storages.cookies,n=i.getAll();if(e.vwoInternalProperties.ss&&!n[mo.SAME_SITE]){for(const e in n)e!==Eo+mo.UUID_V2&&(e.indexOf(fo)>=0||e.indexOf(Eo)>=0)&&(Object.prototype.hasOwnProperty.call(t,e)?i.create(e,decodeURIComponent(n[e]),t[e],void 0,void 0,!0):i.create(e,decodeURIComponent(n[e]),mo.DEFAULT_EXPIRY,void 0,void 0,!0));i.create(mo.SAME_SITE,1,t[mo.SAME_SITE],void 0,void 0,!0)}}unhideIfNoCampaignsRunning({getters:e}){const t=e.settings.campaigns;0!==Object.keys(t).length||t.constructor}mergeThirdPartyCookiesInFirstPartyJar({getters:e,vwoEvents:t}){e.settings.vwoData.tpc&&e.settings.vwoData.tpc._vwo&&(e.vwoInternalProperties.jar?e.storages.storages.cookies.mergeInFPJar():t.trigger(So.ERROR,{data:`TPC._vwo (value = ${e.settings.vwoData.tpc._vwo}) value found but cookie jar not available. Value of CJ is ${e.settings.vwoData.cj}.`}))}setListenerForCustomAndDomEvents({vwoEvents:e,getters:t,data:i,actions:n}){Ns.addListener(t,e,{eventName:"*"},((o,s)=>{o.name=o.name||s,Qo({vwoEvents:e,getters:t,data:i,actions:n,event:o},s)}))}updateGlobalOptOutCookie(e,t){const i=e.storages.storages.cookies;t?i._create(mo.GLOBAL_OPT_OUT,1,mo.DEFAULT_EXPIRY):i.erase(mo.GLOBAL_OPT_OUT)}}var Gs=new Ms;function Fs({event:e,data:t,getters:i,actions:n,vwoEvents:o}){if(Lo(!1,(function(){o.trigger("hashchange")})),ss.shouldWeTrackVisitor()){const e=i.storages.get("cookies");if(!e.get("_vis_opt_test_cookie")){const t=e.get("_vis_opt_s");t?e.create("_vis_opt_s",parseInt(t.split("|")[0],10)+1+"|",100):e.create("_vis_opt_s","1|",100)}e.create("_vis_opt_test_cookie",1)}Gs.migrateCookiesToSSM({event:e,data:t,getters:i,actions:n,vwoEvents:o}),Gs.unhideIfNoCampaignsRunning({event:e,data:t,getters:i,actions:n,vwoEvents:o}),Gs.mergeThirdPartyCookiesInFirstPartyJar({event:e,data:t,getters:i,actions:n,vwoEvents:o}),Gs.setListenerForCustomAndDomEvents({event:e,data:t,getters:i,actions:n,vwoEvents:o});const s=Object.keys(i.settings.campaigns);Ns.setCampaignIds(s);Ns.setPropertiesToBothThreads(n,[{willRedirectionOccur:!1,destinationMT:"VWO._.willRedirectionOccur"}],"vwoInternalProperties"),n.addValues({waitingForThirdPartySync:!1},"vwoInternalProperties"),i.vwoCode&&Ns.setFlagForCachingIfEnabled(i,n)}class js{otherSide(...e){return e[0]="VWO.modules.tags.setSession."+e[0],window.fetcher.getValue(...e)}}class Hs{otherSide(...e){return e[0]="VWO.modules.tags.sessionInfoService."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}}let $s;Hs.LOCAL_STORAGE_SESSION_EXPIRY=30,Hs.LOCAL_STORAGE_NAME=window._vis_debug?"debug_vwoSn":"vwoSn",Hs.ACCOUNT_ID=window._vwo_acc_id;class Bs extends Hs{constructor(e,t){super(),$s=this,this.visitorInformation=window.VWO.data.vi=window.VWO.data.vi||{},Ns.addListener(e,t,{eventName:So.NEW_SESSION},(function(){return i(this,void 0,void 0,(function*(){yield $s.otherSide("eraseSessionCookie()",null,[])}))})),Ns.addListener(e,t,{eventName:So.REDIRECT_DECISION},(function(t){return i(this,void 0,void 0,(function*(){const i=e.allSettings.dataStore.campaigns[t.oldArgs[1]];Ns.isSessionBasedCampaign2(i)&&(yield $s.otherSide("markPageIdSessionExpiry()"))}))}))}getSessionId(){return this.otherSide("getSessionId()")}shouldSendSessionInfoInCall(){return!0}setSNCookieValueByIndex2(e,t){return this.otherSide("setSNCookieValueByIndex2",[e,t])}getPcTraffic(){return this.otherSide("getPcTraffic()")}setPageIdValue(e){window.phoenix.store.actions.addValues({pageId:e},"vwoInternalProperties"),window.phoenix.store.actions.addValues({pageViewCount:e},"root")}}class Js extends js{execute({getters:e,actions:t,vwoEvents:i}){let n;window.VWO.modules.tags.sessionInfoService?n=window.VWO.modules.tags.sessionInfoService:(n=new Bs(e,i),window.VWO.modules.tags.sessionInfoService=n,t.addValues({sessionInfoService:n},"vwoInternalProperties"))}}const Ks=new Js,zs=Ks.execute.bind(Ks);window.VWO.modules.tags.setSession=zs;const Ys=window.performance||window.workerThread.performance,Xs={mark:(e="")=>{e="vwo-"+e,Ys.mark&&Ys.mark(e)},measure:(e,t,i)=>{t="vwo-"+t,i="vwo-"+i;try{Ys.measure&&Ys.measure(e,t,i)}catch(e){ps.debug(e)}}};class qs{}class Qs extends qs{shouldFetchTestingCampaigns(e,t){return 1!=e||!t.vwoInternalProperties.disableAutofetchSettings}fetchSettings(e,t,i){this.shouldFetchTestingCampaigns(e,t)&&No((()=>{this.shouldFetchTestingCampaigns(e,t)&&Ns.getSettings(e,t)}),+i||0)()}execute({getters:e}){if(!Ns.areSettingsCached()&&!e.visDebug&&!Co()&&e.vwoInternalProperties.isSpaEnabled)if(e.vwoCode){const t=window.VWO._.isSettingsCachingEnabled?4:1;this.fetchSettings(t,e,e.vwoInternalProperties.SPA_SETTINGS_DELAY)}else this.fetchSettings(2,e,e.vwoInternalProperties.SPA_NEW_PAGE_SETTINGS_DELAY)}}const Zs=new Qs,er=Zs.execute.bind(Zs);class tr extends oo{constructor(){super(...arguments),this.checkEnvironmentInitialized=!1}execute({event:e,data:t,getters:n,actions:o,vwoEvents:s}){return i(this,void 0,void 0,(function*(){if(!this.checkEnvironmentInitialized&&(this.checkEnvironmentInitialized=!0,zs({event:e,data:t,getters:n,actions:o,vwoEvents:s}),Fs({event:e,data:t,getters:n,actions:o,vwoEvents:s}),Ns.shouldExecuteLib({event:e,data:t,getters:n,actions:o,vwoEvents:s}),Ws.checkCookieJarMismatch({event:e,data:t,getters:n,actions:o,vwoEvents:s}),Ws.checkForTimeout({event:e,data:t,getters:n,actions:o,vwoEvents:s}),Ws.addDomListenerForTimeout(n),n.vwoInternalProperties.shouldExecuteLib)){if(Ns.setThirdPartyCookiesForApplicableCamps(n),window._vis_debug||window._vis_heatmap){const e=n.vwoInternalProperties.experimentIds;yield s.trigger(So.CAMPAIGN_FLOW_START,{oldArgs:[e[0]]})}Xs.mark("event-"+So.PAGE_VIEW),yield Ns.firePageViewEvent(),er({event:e,data:t,getters:n,actions:o,vwoEvents:s}),s.trigger(So.UPDATE_SETTINGS_CALL)}}))}}const ir=new tr,nr=ir.execute.bind(ir);window.VWO.modules.tags.checkEnvironment.fn=ir;const or=function(...e){return e[0]="VWO.modules.tags.visibilityService."+e[0],window.fetcher.getValue(...e)};let sr=!1;function rr({getters:e,vwoEvents:t}){sr||(Ns.addListener(e,t,{eventName:So.UNHIDE_ELEMENT},(function(e){const{ruleName:t,campaignData:i,variation:n}=e;let o;i&&(o={id:i.id,variation:n}),window.fetcher.getValue("VWO.modules.utils.libUtils.delCSS",[{ruleName:t,campaignData:o}])})),sr=!0)}function ar({vwoEvents:e},t){var i,n,o,s,r,a,l,c,d=Hn(t.sections),u=d.length,g=t.type;if("VISUAL_AB"===g)for(;u--;)if(i=d[u],(n=t.sections[i]).variations)for(s=(o=Hn(n.variations)).length,e.trigger(So.UNHIDE_SECTION,{id:t.id,key:i},i);s--;)if(r=o[s],l=n.variations[r],n.variations[r]=l="string"==typeof l?l&&vwo_$.parseJSON(l):l,l)for(a=l.length,e.trigger(So.UNHIDE_VARIATION,{id:t.id,key:i});a--;)c=l[a].xpath,ts.unhideElement(e,{ruleName:c,campaignData:t});else e.trigger(So.UNHIDE_VARIATION,{id:t.id,key:i},i);else e.trigger(So.UNHIDE_SECTION,{id:t.id,key:i});else if("VISUAL"===g)for(;u--;)i=d[u],c=t.sections[i].path,ts.unhideElement(e,{ruleName:c,campaignData:t});else"SPLIT_URL"===g&&ts.unhideElement(e,{ruleName:"*",campaignData:t})}function lr({event:e,data:t,getters:i,actions:n,vwoEvents:o},s){const r=[],a=i.settings.campaigns;for(const l in a){const c=a[l],d=c.sen,u=c.sections[1],g=u.sen;if(Object.prototype.hasOwnProperty.call(a,l)){if(d&&!Ns.doNotHideElements(d)){const c=Ns.addListener(i,o,{triggerID:d},(()=>{ar({event:e,data:t,getters:i,actions:n,vwoEvents:o},a[l]),o.trigger(So.CHECK_SEGMENTATION,s)}));c&&r.push(c)}if(g){const e=u.variations;for(const t in e){const n=e[t],s=g[t];n&&!Ns.doNotHideElements(s)&&Ns.addListener(i,o,{triggerID:s},(()=>{for(const e of n){const i=e.xpath;o.trigger(So.UNHIDE_ELEMENT,{ruleName:i,campaignData:c,variation:t})}}))}}}}return r}function cr({vwoEvents:e},t,i){return t.forEach((t=>{e.off.apply(t)})),or("unhideElementsAfterTimer",[i])}class dr{modifyTriggerConditions(e,t){const i=[];return Array.isArray(e)?(e.forEach((e=>{if(Array.isArray(e))i.push(this.modifyTriggerConditions(e,t));else{const n=t(e);i.push(n)}})),i):e}getExitTrigger(e){for(let t=0;t<e.length;t++){if(Array.isArray(e[t])){const i=this.getExitTrigger(e[t]);if(i)return i}if("object"==typeof e[t]&&null!==e[t]&&e[t].exitTrigger)return e[t].exitTrigger}}}var ur=new dr;const gr=function(e){return window.VWO.phoenix.validateTrigger(e,null,{skipEventProps:!0,skipValidationIfTimer:!0})},vr=function(e){return window.VWO.phoenix.validateTrigger(e,null,{skipEventProps:!0})},hr=function({event:e,data:t,getters:n,actions:o,vwoEvents:s}){return i(this,void 0,void 0,(function*(){if(n.vwoCode&&(n.vwoCode[so]||n.vwoCode[ro]))return void s.trigger(So.VISIBILITY_TRIGGERED);const r=[],{visibilityServiceCache:a}=window.VWO._,l=n.settings.campaigns;let c=!1;const d={hideElementsTriggered:!1,segmentCndsSatisfied:void 0},u=[],g=Ls.getGroupBasedCampaigns({event:e,data:t,getters:n,actions:o,vwoEvents:s});yield Promise.all(Object.keys(l).map((t=>i(this,void 0,void 0,(function*(){var i,v,h,p,w,f;const E=l[t],m=l[t].type;if("FUNNEL"===m||E.ready)return;const _=null===(i=E.triggers)||void 0===i?void 0:i[0],O=_&&s.settings.currentSettings.triggers[_];let S;const y="SPLIT_URL"===m,T=null!==(h=null===(v=null==a?void 0:a[t])||void 0===v?void 0:v.dEH)&&void 0!==h?h:null!==(f=null===(w=null===(p=e)||void 0===p?void 0:p._vwo)||void 0===w?void 0:w.doExperimentHere)&&void 0!==f?f:Ls.doExperimentHere(n,E,s)[0];if(y&&T&&(c=!0,O&&(S=yield vr(O))&&u.push(t)),!T)return void((Co()||window._vis_debug)&&O&&((null!=S?S:yield gr(O))||(d.segmentCndsSatisfied=!1,s.trigger(So.CHECK_SEGMENTATION,d))));r.push(t);const I=-1===g.indexOf(t)||g.indexOf(t)>=0&&E.shouldHideElement,C=y?window.VWO._.bodyPath:void 0;O&&(null!=S?S:yield gr(O))?(d.segmentCndsSatisfied=!0,I&&!E.manual?("DEPLOY"===E.type&&(E.type="VISUAL_AB"),Ns.setXpathAndHideEl(E,n,C),y||(s.trigger(So.HIDE_ELEMENTS,{oldArgs:[E.id,E.cc]}),d.hideElementsTriggered=!0)):Ns.setXpathAndHideEl(E,n,C,!1)):(d.segmentCndsSatisfied=!1,s.trigger(So.CHECK_SEGMENTATION,d));const b=ur.getExitTrigger(O.cnds);O&&b&&!y&&Ns.addListener(n,s,{triggerID:b},(()=>{E.ready||("SPLIT_URL"===m&&s.trigger(So.NOT_REDIRECTING),ar({event:e,data:E,getters:n,actions:o,vwoEvents:s},E),s.trigger(So.CHECK_SEGMENTATION,d))})),E.debug&&o.updateSettings({cc:E.debug.v},`campaigns.${t}`),Xs.mark("tag-visibilityService")}))))),c&&0!==u.length||s.trigger(So.NOT_REDIRECTING),window.VWO._.executableCampaignsOnCurrentPage=r,window.fetcher.getValue("VWO.modules.utils.libUtils.delCSS",[{ruleName:"*",campaignData:t}]),rr({event:e,data:t,getters:n,actions:o,vwoEvents:s});const v=lr({event:e,data:t,getters:n,actions:o,vwoEvents:s},d);cr({event:e,data:t,getters:n,actions:o,vwoEvents:s},v,d),s.trigger(So.VISIBILITY_TRIGGERED)}))};class pr{}class wr{}class fr extends wr{constructor(){super(...arguments),this.preview=Co,this.noopFn=function(){}}isTimedOut(e){return e.vwoCode&&(e.vwoCode[so]||e.vwoCode[ro])}unhideElForCombinationsToNotUse(e,t,i,n){if("VISUAL_AB"!==i.type)return;Ns.isPersonalizeCampaign(i)&&Ns.unhideCampaignLevelStyle(i.id);const o=i.sections[1].variations,s=bo(o);for(let e=0;e<s.length;e++)if(s[e]!==t){let t=o[s[e]];if("object"!=typeof t&&(t=JSON.parse(t)),!t)continue;for(let o=0;o<t.length;o++)ts.unhideElement(n,{ruleName:t[o].xpath,campaignData:i,variation:Ns.isPersonalizeCampaign(i)?s[e]:null},t[o].dHE)}}unhideVariationIfNotSplit(e,t,i){"SPLIT_URL"!==t.type&&this.unhideVariation(e,t,i)}unhideVariation(e,t,i){const n=bo(t.sections);let o,s,r,a,l,c,d,u,g=n.length;const v=t.type;if("VISUAL_AB"===v)for(;g--;)if(o=n[g],s=t.sections[o],s.variations)for(r=bo(s.variations),a=r.length,i.trigger(So.UNHIDE_SECTION,{oldArgs:[t.id,o,!a]});a--;)if(l=r[a],d=s.variations[l],s.variations[l]=d="string"==typeof d?d&&JSON.parse(d):d,d)for(c=d.length,i.trigger(So.UNHIDE_VARIATION,{oldArgs:[t.id,o,l,!c]});c--;)u=d[c].xpath,ts.unhideElement(i,{ruleName:u,campaignData:t,key:o,oldArgs:[t.id,o,l,u]},d[c].dHE);else i.trigger(So.UNHIDE_VARIATION,{oldArgs:[t.id,o,l,!d]});else i.trigger(So.UNHIDE_SECTION,{oldArgs:[t.id,o,!0]});else if("VISUAL"===v)for(;g--;)o=n[g],u=t.sections[o].path,i.trigger(So.UNHIDE_ELEMENT,{ruleName:u,campaignData:t,key:o,oldArgs:[t.id,o,void 0,u]});else"SPLIT_URL"===v&&(i.trigger(So.UNHIDE_ELEMENT,{ruleName:"*",campaignData:t,oldArgs:[t.id,void 0,void 0,"*"]}),i.trigger(So.UNHIDE_ELEMENT,{ruleName:"body",campaignData:t,oldArgs:[t.id,void 0,void 0,"body"]}))}isSplit(e,t,n){return i(this,void 0,void 0,(function*(){if("SPLIT_URL"===t.type&&("RUNNING"===t.status||this.preview()||window._vis_debug)){let i;const o=yield Ns.getSplitDecision(e,t.id);if(!o)return!1;if(Ns.isCurrentURLSplitVariation({chosenVariation:o,getters:e,campaignData:t})){if(i=yield Ls.getCombi(e,t),t.combination_chosen=o,t[ao]=1,n.trigger(So.CHOOSE_COMBINATION,{oldArgs:[t.id,o,!0]}),i||this.preview())this.preview()||(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["tag",t.id,o,"session",!0]]}),n.trigger(So.SPLIT_VARIATION_SHOWN,{oldArgs:[""+t.id,i]}),Zo(n,So.CAMPAIGN_READY,{id:t.id,combination:i}));else{i=o;const s=window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["tag",t.id,i,"session",!0]]});t&&void 0===t.isFirst&&(t.isFirst=1),yield Ls.include(e,t.id,i,t),yield s,n.trigger(So.REGISTER_HIT,{oldArgs:[""+t.id,i]}),Zo(n,So.CAMPAIGN_READY,{id:t.id,combination:i})}return window.fetcher.getValue("VWO.modules.utils.collectAndSendDataForGA",[t.id,i]),!0}}return!1}))}checkSplitVariationAndMarkReady(e,t,n){return i(this,void 0,void 0,(function*(){if(yield this.isSplit(e,t,n))return n.trigger(So.NOT_REDIRECTING),ts.unhideElement(n,{ruleName:"*",campaignData:t,oldArgs:[t.id,void 0,void 0,"*"]}),this.unhideVariationIfNotSplit(e,t,n),t.ready=!0,!0}))}getCombination(e,t,n){return i(this,void 0,void 0,(function*(){let i=!1,o=this.preview()||(yield Ls.getCombi(e,t));return(o||t.combination_chosen)&&(i=!0),o=o||Ls.isLogged(e,t.id)||!n&&(yield Ls.chooseCombination(e,t)),{alreadyChosen:i,combi:o}}))}registerHit(e,t,n,o,s,r,a){var l,c;return i(this,void 0,void 0,(function*(){if(r=r||this.noopFn,(yield Ls.isBucketed(e,n))||Ns.isBot2()||!Ns.shouldTrackUserForCampaign(n))return r(a);if("TRACK"===n.type){var i=Ls.getTrackGoalIdFromExp(n.id,e);yield window.fetcher.getValue('VWO.push("${{1}}", "${{2}}")',null,{captureGroups:[["tag",n.id,t,"session",!0],["tag",i,null,"eg"]]});try{if(6===window._vwo_acc_id&&10===n.id){const t={current:{uuid:e.vwoUUID,sId:yield e.vwoInternalProperties.sessionInfoService.getSessionId(),sn:window.VWO._.cookies.get(mo.TRACK_SESSION_COOKIE_NAME),ds:window.VWO._.cookies.get(mo.TRACK_GLOBAL_COOKIE_NAME),r:null===(c=null===(l=window.VWO.data)||void 0===l?void 0:l.vi)||void 0===c?void 0:c.vt},cURL:e.currentUrl};window.VWO._.customError&&window.VWO._.customError({msg:"STATE AFTER TAG PUSH",url:"runCampaign/utilsWT.ts",lineno:846,colno:23,source:JSON.stringify(t)}),window.fetcher.setValue("VWO.eLog",!0)}}catch(e){}}o.trigger(So.SEND_NEW_VISITOR_CALL,{combination:t,campaignData:n,function(){}}),yield Yo({getters:e,event:{time:+new Date,name:So.REGISTER_HIT,props:{id:""+n.id,combination:t}},actions:{},vwoEvents:{},data:{}},n,r,a),s||o.trigger(So.REGISTER_HIT,{oldArgs:[""+n.id,t]}),Zo(o,So.CAMPAIGN_READY,{id:n.id,combination:t})}))}createTempCombiCookie(e,t,n){return i(this,void 0,void 0,(function*(){yield Ns.createCookie(e,"_vis_opt_exp_"+t.id+"_combi_choose",n,100,t)}))}recordVisitor(e,t,n,o,s){return i(this,void 0,void 0,(function*(){if(!t)return;const i=n.type;o&&!(yield Ls.isLogged(e,n.id))?(yield this.registerHit(e,t,n,s),Ns.isDomDependent(i)&&(yield this.createTempCombiCookie(e,n,t))):Zo(s,So.CAMPAIGN_READY,{id:n.id,combination:t}),(Ns.isDomDependent(i)||"SPLIT_URL"===i)&&(yield window.fetcher.getValue('VWO.push("${{1}}")',null,{captureGroups:[["tag",n.id,t,"session",!0]]})),window.fetcher.getValue("VWO.modules.utils.collectAndSendDataForGA",[n.id,t])}))}deleteCampaignParams(e){delete e.ready,delete e.timedout,delete e[ao]}setMutsData(e){e.muts=e.muts||{},e.muts.pre=e.muts.pre||{},e.muts.post=e.muts.post||{},e.muts.pre.enabled&&(e.manual=!0)}handleDeployCampaign(e){"DEPLOY"===e.type&&(e.type="VISUAL_AB")}handlePCTraffic(e){e.pc_traffic=void 0===e.pc_traffic?100:e.pc_traffic}preProcessCampaignData({data:e}){this.setMutsData(e),this.handleDeployCampaign(e),this.handlePCTraffic(e),e.globalCode=e.globalCode||{},e.goals||(e.goals={}),Ns.isDomIndependentCampaign(e.type)&&(e.clickmap=0),"FUNNEL"===e.type?(e.g=e.g||e.goals,e.goals={},e.segment_code=void 0===e.segment_code?"true":e.segment_code,e.manual=!0,e.v=e.v||1):e.manual=!!e.manual}processCampaign({data:e,event:t,actions:n,getters:o,vwoEvents:s,executingTagTrigger:r}){var a,l;return i(this,void 0,void 0,(function*(){let i,c;const d="SPLIT_URL"===e.type;if(!this.preview()&&(yield Ls.isExcluded(o,e)))return s.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,!0,!0]}),d&&(s.trigger(So.NOT_REDIRECTING),ts.unhideElement(s,{ruleName:"*",campaignData:e})),void this.unhideVariationIfNotSplit(o,e,s);if(this.deleteCampaignParams(e),d&&(yield this.checkSplitVariationAndMarkReady(o,e,s)))return void s.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,!0]});if(!Ns.shouldTrackUserForCampaign(e))return e.timedout=!0,d&&(s.trigger(So.NOT_REDIRECTING),ts.unhideElement(s,{ruleName:"*",campaignData:e})),void this.unhideVariation(o,e,s);const u=Ls.doExperimentHere(o,e,s)[0];if(u){const t=(Ns.isPersonalizeCampaign(e)&&e.sections[1].triggers[null===(a=e.debug)||void 0===a?void 0:a.v])===r;if(s.trigger(So.SEGMENTATION_EVALUATED,{oldArgs:[e.id,u,t,!0]}),Ns.isDomDependent(e.type)&&(i=yield this.getCombination(o,e,!0),c=i.alreadyChosen,i.combi&&(e.cc=i.combi)),!this.preview()&&!(yield Ls.isBucketed(o,e))&&!(yield Ls.shouldBucket(o,e)))return s.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,!0,void 0,void 0,!0]}),yield Ls.exclude(o,e),"SPLIT_URL"===e.type&&(s.trigger(So.NOT_REDIRECTING),ts.unhideElement(s,{ruleName:"*",campaignData:e})),void this.unhideVariationIfNotSplit(o,e,s);if(Ns.shouldTrackUserForCampaign(e)?e.ready=!0:e.timedout=!0,d)if(this.isTimedOut(o))s.trigger(So.NOT_REDIRECTING),ts.unhideElement(s,{ruleName:"*",campaignData:e});else{i=yield this.getCombination(o,e),c=i.alreadyChosen,e.combination_chosen=i.combi;const t=[{willRedirectionOccur:!0,destinationMT:"VWO._.willRedirectionOccur"}];"1"!==e.combination_chosen&&Ns.setPropertiesToBothThreads(n,t,"vwoInternalProperties");const r=yield Ns.isBotScreen();Ls.executeCampaignJS(e,"pre"),yield ts.variationShown(s,Object.assign(Object.assign({id:e.id,variation:e.combination_chosen,isFirst:c?0:1,isSplitVariation:"1"!==e.combination_chosen},r&&{vwoMeta:{isBot:r}}),{fireLinkedTagSync:"FUNNEL"===e.type}),e)}else{i=yield this.getCombination(o,e);const t=e.combination_chosen=i.combi;if(c=i.alreadyChosen,delete e.cc,!t)return s.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,void 0,void 0,!0,Ns.isPersonalizeCampaign(e)]}),this.unhideVariationIfNotSplit(o,e,s),o.vwoInternalProperties.isSpaEnabled&&s.trigger(So.TEST_NOT_RUNNING,{oldArgs:[e.id]}),void(e.ready=!1);s.trigger(So.CHOOSE_COMBINATION,{oldArgs:[e.id,t,c,Ns.isPersonalizeCampaign(e)?c:void 0]}),this.recordVisitor(o,t,e,!c,s),this.unhideElForCombinationsToNotUse(o,t,e,s),"VISUAL_AB"===e.type&&1==t&&(s.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,void 0,void 0,void 0,!0]}),this.unhideVariationIfNotSplit(o,e,s)),Ls.executeCampaignJS(e,"pre");const n=yield Ns.isBotScreen();yield ts.variationShown(s,Object.assign(Object.assign({id:e.id,variation:i.combi,isFirst:c?0:1},n&&{vwoMeta:{isBot:n}}),{fireLinkedTagSync:"FUNNEL"===e.type}),e)}}else o.vwoInternalProperties.isSpaEnabled&&s.trigger(So.TEST_NOT_RUNNING,{oldArgs:[e.id]}),Ns.shouldTrackUserForCampaign(e)&&(s.trigger(So.GOAL_VISIT,{expId:e.id}),(null===(l=null==e?void 0:e.globalCode)||void 0===l?void 0:l.pre)&&s.trigger(`${So.EVALUATE_GOAL_PAGE_FOR_PREJS}_${e.id}`)),ar({data:e,event:t,getters:o,actions:n,vwoEvents:s},e),this.unhideVariationIfNotSplit(o,e,s)}))}}var Er=new fr;class mr extends pr{constructor(){super(...arguments),this.listenerAdded=!1,this.runCampaignSync={}}executeWrapper(e,t){return i(this,void 0,void 0,(function*(){const n=e.data.id;this.runCampaignSync[n]?this.runCampaignSync[n]=this.runCampaignSync[n].then((()=>i(this,void 0,void 0,(function*(){try{yield this.execute(e,t)}catch(e){ps.error(e)}})))):this.runCampaignSync[n]=this.execute(e,t),yield this.runCampaignSync[n],delete this.runCampaignSync[n]}))}execute({event:e,data:t,actions:n,getters:o,vwoEvents:s},r){return i(this,void 0,void 0,(function*(){"SURVEY"===t.type&&(yield ln._.insightsOnConsentPromise);const{executingTagTrigger:a}=e;if(delete e.executingTagTrigger,t.ready)return;if(o=o||ln.phoenix.store.getters,n=n||ln.phoenix.store.actions,t.isTriggerValidated=!0,!r&&"FUNNEL"===t.type)return;if(Xs.mark(`runCampaignStart-${t.id}`),!o.vwoInternalProperties.shouldExecuteLib)return"SPLIT_URL"===t.type&&s.trigger(So.NOT_REDIRECTING),void ts.unhideElement(s,{ruleName:"*",campaignData:t});if(o.vwoInternalProperties.willRedirectionOccur)return;"TRACK"===t.type&&(yield this.processFunnelCampaign({getters:o,actions:n,vwoEvents:s,data:t,event:e})),this.listenerAdded||(s.on(So.EXECUTE_FUNNEL_FOR_GOAL_CAMPAIGN,(t=>i(this,void 0,void 0,(function*(){yield this.processFunnelCampaign({getters:o,actions:n,vwoEvents:s,data:t.campaign,event:e})})))),this.listenerAdded=!0),Er.preProcessCampaignData({event:e,data:t,actions:n,getters:o,vwoEvents:s});const l=yield Ls.getCombiCookie(o,t.id);yield window.VWO._.visibilityTriggered,yield Er.processCampaign({event:e,data:t,actions:n,getters:o,vwoEvents:s,executingTagTrigger:a}),t.ready&&!l&&(e._vwo=e._vwo||{campaignsConverted:[]},e._vwo.campaignsConverted.push(t.id)),s.trigger(So.CAMPAIGN_FLOW_END)}))}processFunnelCampaign({getters:e,actions:t,vwoEvents:n,data:o,event:s}){return i(this,void 0,void 0,(function*(){if(!o.funnel)return;const r=yield window.fetcher.getValue("VWO._.commonCookieHandler.getDataStore()"),a=o.funnel.map((a=>i(this,void 0,void 0,(function*(){const i=r.split(":")[go].split(",");let l,c,d,u=i.length;const g=e.settings.campaigns[a.id].g[0].id===parseInt(Object.keys(o.goals)[0],uo),v=a.triggers[0],h=yield window.VWO.phoenix.validateTrigger(window.VWO.phoenix.settings.currentSettings.triggers[v],null,{triggerName:v});for(;u--;)l=i[u].split("_"),c=l[0],parseInt(c,uo)===parseInt(a.id,uo)&&(d=!0);h&&g&&!d&&(yield this.execute({event:s,data:e.settings.campaigns[a.id],actions:t,getters:e,vwoEvents:n},!0))}))));yield Promise.all(a)}))}}const _r=new mr,Or=_r.executeWrapper.bind(_r);class Sr extends fr{constructor(){super(...arguments),this.preview=Co,this.currentCombinationXPaths={}}checkAndApplyChanges(e,t,n,o,s){return i(this,void 0,void 0,(function*(){if(!t||!t.ready)return;let i,r=!1;if(i="","SPLIT_URL"===t.type)this.runSplitCampaign(t,e,o,n);else{if(i=this.preview()||(yield Ls.getCombi(e,t)),!i&&(r=!0,i=yield Ls.chooseCombination(e,t),!i))return;n.trigger(So.ELEMENT_LOAD_TIMER_STOP,{oldArgs:[t.id,i]}),e.vwoInternalProperties.isSpaEnabled&&void 0===t.dontKillTimer&&(t.dontKillTimer=!0),this.otherSide("tryApplyingChanges",[i,t,null,s]),yield this.record(e,i,t,r,n),Ns.isDomIndependentCampaign(t.type)&&Ns.shouldTrackUserForCampaign(t)&&n.trigger(So.GOAL_VISIT,{expId:t.id});for(const e in this.currentCombinationXPaths)Object.prototype.hasOwnProperty.call(this.currentCombinationXPaths,e)&&n.trigger(So.ELEMENT_NOT_LOADED,{oldArgs:[t.id,this.currentCombinationXPaths[e][0],this.currentCombinationXPaths[e][1],e]})}}))}record(e,t,n,o,s){var r,a;return i(this,void 0,void 0,(function*(){if(!o||!t)return;const i=yield Ls.include(e,n.id,t,n);try{if(6===window._vwo_acc_id&&10===n.id){const t={current:{uuid:e.vwoUUID,sId:yield e.vwoInternalProperties.sessionInfoService.getSessionId(),sn:window.VWO._.cookies.get(mo.TRACK_SESSION_COOKIE_NAME),ds:window.VWO._.cookies.get(mo.TRACK_GLOBAL_COOKIE_NAME),r:null===(a=null===(r=window.VWO.data)||void 0===r?void 0:r.vi)||void 0===a?void 0:a.vt},cURL:e.currentUrl};window.VWO._.customError&&window.VWO._.customError({msg:"STATE AFTER DS COOKIE UPDATION",url:"runTestCampaign/utilsWT.ts",lineno:87,colno:5,source:JSON.stringify(t)})}}catch(e){}i.isCookieCreated&&s.trigger(So.CAMPAIGN_COMBI_CREATED),e.storages.storages.cookies.erase("_vis_opt_exp_"+n.id+"_combi_choose"),n.id&&n.multiple_domains}))}runSplitCampaign(e,t,n,o){return i(this,void 0,void 0,(function*(){let s;window._vis_debug||(s=Co()||(yield Ls.getCombi(t,e))||(yield Ns.getSplitDecision(t,e.id)));const r=e.sections[1].variations,a=t.storages.storages.cookies;if(s=parseInt(s,uo),s)1===s?(ts.unhideElement(o,{ruleName:"*",campaignData:e,oldArgs:[e.id,void 0,void 0,"*"]}),o.trigger(So.NOT_REDIRECTING),o.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,!0]}),e.combination_chosen=s,o.trigger(So.CHOOSE_COMBINATION,{oldArgs:[e.id,s,!0]}),this.recordVisitor(t,s,e,!1,o)):(Ns.createCookie(t,"_vis_opt_exp_"+e.id+"_split",s,100,e),jo.set(),o.trigger(So.SPLIT_URL,{oldArgs:[e.id]}),this.redirectToURL(t,n,e,r[s],s,o));else{if(isNaN(s=parseInt(yield Ls.chooseCombination(t,e),uo)))return o.trigger(So.CHOOSE_COMBINATION,{oldArgs:[e.id,void 0,!1]}),void o.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,!0]});if(e.multiple_domains&&1!==s){Ns.createCookie(t,"_vis_opt_exp_"+e.id+"_split",s,100,e),jo.set(),o.trigger(So.SPLIT_URL,{oldArgs:[e.id]});const l=[{willRedirectionOccur:!0,destinationMT:"VWO._.willRedirectionOccur"}];Ns.setPropertiesToBothThreads(n,l,"vwoInternalProperties"),n.addValues({waitingForThirdPartySync:!0},"vwoInternalProperties"),a.waitForThirdPartySync((()=>i(this,void 0,void 0,(function*(){n.addValues({waitingForThirdPartySync:!1},"vwoInternalProperties"),this.redirectToURL(t,n,e,r[s],s,o,!0)}))))}else 1!==s?(Ns.createCookie(t,"_vis_opt_exp_"+e.id+"_split",s,100,e),jo.set(),o.trigger(So.SPLIT_URL,{oldArgs:[e.id]}),this.redirectToURL(t,n,e,r[s],s,o,!0)):(o.trigger(So.NOT_REDIRECTING),ts.unhideElement(o,{ruleName:"*",campaignData:e,oldArgs:[e.id,void 0,void 0,"*"]}),e.combination_chosen=s,o.trigger(So.CHOOSE_COMBINATION,{oldArgs:[e.id,s,!1]}),o.trigger(So.UNHIDE_ALL_VARIATIONS,{oldArgs:[e.id,void 0,void 0,void 0,!0]}),yield this.recordVisitor(t,"1",e,!0,o),this.record(t,"1",e,!0,o))}}))}redirectToURL(e,t,i,n,o,s,r){if(this.isTimedOut(e))return;Ns.setPropertiesToBothThreads(t,[{willRedirectionOccur:!0,destinationMT:"VWO._.willRedirectionOccur"}],"vwoInternalProperties"),s.trigger(So.REDIRECT_DECISION,{oldArgs:[!0,i.id]}),r?this.registerHit(e,o,i,s,!0,this.processRedirect.bind(this),{getters:e,campaignData:i,redirectURL:n,isNewVisitor:r,context:this}):this.processRedirect({getters:e,campaignData:i,redirectURL:n,isNewVisitor:r,context:this})}processRedirect({getters:e,campaignData:t,redirectURL:i,isNewVisitor:n}){this.otherSide("processRedirect",[{getters:e,campaignData:t,redirectURL:i,isNewVisitor:n}])}otherSide(...e){e[0]="VWO.modules.tags.runTestCampaign.utils."+e[0],window.fetcher.getValue(...e)}}var yr=new Sr;const Tr=function({event:e,getters:t,actions:n,vwoEvents:o}){return i(this,void 0,void 0,(function*(){Xs.mark(`runTestCampaignStart-${e.props.id}`),Xs.measure(`runCampaignMinusRunTestCampaignStart-${e.props.id}`,`runCampaignStart-${e.props.id}`,`runTestCampaignStart-${e.props.id}`),Xs.measure(`vwo-campaign-execution-${e.props.id}`,"tag-visibilityService",`runTestCampaignStart-${e.props.id}`);const i=t.settings.campaigns[e.props.id];yield yr.checkAndApplyChanges(t,i,o,n),Ls.executeCampaignJS(i,"post")}))};class Ir{serializeNonGoalData(e){Ns.isDomIndependentCampaign(e.type)&&(e.clickmap=0),("ANALYSIS"===e.type||Ns.isAnalyzeCampaign(e.type))&&(e.goals={})}serializeData(e){this.serializeNonGoalData(e);const t=e.goals;for(const e in t)Ns.isPageBasedGoal(t[e].type)?(t[e].pUrl=t[e].pUrl||t[e].urlRegex,t[e].pExcludeUrl=t[e].pExcludeUrl||t[e].excludeUrl):t[e].pUrl=t[e].pUrl||".*"}isGoalEligible(e,t,i){i=i||window.VWO.phoenix;const n=(t=t||i.store.getters).currentUrl;return e.pExcludeUrl&&ys.matchRegex(n,e.pExcludeUrl)?(i.trigger(So.EXCLUDE_GOAL_URL),!1):e.pUrl?bs.verifyUrl(n,e.pUrl,null):bs.verifyUrl(n,null,e.urlRegex)}registerConversion(e,t,n,o,s,r,a){return i(this,void 0,void 0,(function*(){if(!ss.shouldWeTrackVisitor())return;t=t||1;const i=window.VWO.phoenix;e=e||i.store.getters,yield this._triggerGoalConversion(i,e,t,n,o,s,Object.assign(Object.assign({},a||{}),{combination:(null==a?void 0:a.combination)||(yield Ls.getCombi(e,n,r))}))}))}getImgUrlForConversion(e,t,n,o,s,r){return i(this,void 0,void 0,(function*(){var i,a;const l=e.id;if(a="c.gif?account_id="+o.accountId+"&experiment_id="+l+"&goal_id="+t+"&ru="+encodeURIComponent(yield jo.get())+(void 0===s?"":"&r="+s)+Ns.getUUIDString((null==r?void 0:r.uuid)||(yield Ns.getUUID(o,e))),"TRACK"===e.type){i=(null==r?void 0:r.sId)||(yield o.vwoInternalProperties.sessionInfoService.getSessionId()),yield window.VWO.phoenix.trigger(So.EXECUTE_FUNNEL_FOR_GOAL_CAMPAIGN,{campaign:e});let n=null==r?void 0:r.gtAndF;n||(n=yield window.tracklib.getGtAndF(t));try{if(6===window._vwo_acc_id){a+=`&_debug=${yield window.VWO._.commonCookieHandler.getDataStore()}`}}catch(e){}if(n){return a+"&s="+i+"&ifs="+ +(i===((null==r?void 0:r.sId)||(yield o.vwoInternalProperties.sessionInfoService.getSessionId())))+"&t=1&cu="+encodeURIComponent((null==r?void 0:r.pageUrl)||o.currentUrl)+n}return""}return(yield o.vwoInternalProperties.sessionInfoService.shouldSendSessionInfoInCall())&&(i=yield o.vwoInternalProperties.sessionInfoService.getSessionId()),a+"&combination="+n+(i=i?"&sId="+i:"")}))}_triggerGoalConversion(e,t,n,o,s,r,a){var l,c;return i(this,void 0,void 0,(function*(){const i=a.combination;if(!r&&(!i||(yield Ls.isGoalTriggered(o,n,t))||Ns.isBot2())){yield e.trigger(So.REGISTER_CONVERSION,{oldArgs:[o.id,n,s,!1],campaignId:o.id,goalId:n});try{if(6===window._vwo_acc_id&&10===o.id){const e={current:{uuid:t.vwoUUID,sId:yield t.vwoInternalProperties.sessionInfoService.getSessionId(),sn:window.VWO._.cookies.get(mo.TRACK_SESSION_COOKIE_NAME),ds:window.VWO._.cookies.get(mo.TRACK_GLOBAL_COOKIE_NAME),r:null===(c=null===(l=window.VWO.data)||void 0===l?void 0:l.vi)||void 0===c?void 0:c.vt},cURL:t.currentUrl};window.VWO._.customError&&window.VWO._.customError({msg:"GOAL ALREADY TRIGGERED C.GIF",url:"runCampaign/utilsWT.ts",lineno:846,colno:23,source:JSON.stringify(e)})}}catch(e){}return}"REVENUE_TRACKING"!==o.goals[n].type&&(s=void 0);const d=yield this.getImgUrlForConversion(o,n,i,t,s,{uuid:a.uuid,gtAndF:a.gtAndF,sId:a.sId,pageUrl:a.pageUrl});try{if(6===window._vwo_acc_id&&10===o.id){const e={current:{uuid:t.vwoUUID,sId:yield t.vwoInternalProperties.sessionInfoService.getSessionId(),sn:window.VWO._.cookies.get(mo.TRACK_SESSION_COOKIE_NAME),ds:window.VWO._.cookies.get(mo.TRACK_GLOBAL_COOKIE_NAME)},cURL:t.currentUrl};window.VWO._.customError&&window.VWO._.customError({msg:"STATE BEFORE SENDING C.GIF",url:"runCampaign/utilsWT.ts",lineno:846,colno:23,source:JSON.stringify(e)})}}catch(e){}d&&((yield Ns.isEligibleToSendCall(o.id,t))&&(yield Jo.sendCall(t,{url:d},null,null)),yield Ls.markGoalTriggered(o,n,t)),yield e.trigger(So.REGISTER_CONVERSION,{oldArgs:[o.id,n,s,!!d],campaignId:o.id,goalId:n})}))}}const Cr=new Ir;class br{}class Ar extends br{shouldWeTriggerMetric(e,t,i,n,o){const s=n.isFirst,{excludeUrl:r,pExcludeUrl:a,urlRegex:l,pUrl:c}=o;let d;d=!(r||a||l||c)||Cr.isGoalEligible(o,e,t);return!(!Ns.isSessionBasedCampaign2(n)&&s&&i.name===So.PAGE_VIEW&&"CUSTOM_GOAL"===o.type)&&d}isItCustomConversionEvent(e){return e.name===So.CUSTOM_CONVERSION}}var Nr=new Ar;class Vr{getCurrentEventData(e,t){const i={};if(!(Object.keys(e).length<=0))return Object.keys(e).forEach((n=>{var o;i[n]=i[n]||{},i[n]={vwoMeta:{metric:e[n].metrics}},e[n].comb&&(i[n].vwoMeta.vS=e[n].comb),(null===(o=t[n])||void 0===o?void 0:o.length)>0&&(i[n].matchedSelectors=t[n])})),i}}class Rr extends Vr{constructor(){super(...arguments),this.mutex={}}execute({data:e,vwoEvents:t,getters:n,event:o}){var s;return i(this,void 0,void 0,(function*(){if([So.DOM_CLICK,So.DOM_SUBMIT,So.PAGE_UNLOAD].includes(o.name))return;if(n.vwoInternalProperties.willRedirectionOccur)return;if(Ns.isBot2())return;const r={},a={};for(const s of e)for(const e of s.campaigns){const s=e.c,l=e.g;let c,d,u=s&&n.currentSettings.dataStore.campaigns[s],g=!1;const v=s+"-"+l;this.mutex[v]||(this.mutex[v]=Promise.resolve()),this.mutex[v]&&(d=this.mutex[v].then((()=>i(this,void 0,void 0,(function*(){var i,d,v,h,p,w;if(!s||!l||(null===(d=null===(i=o._vwo)||void 0===i?void 0:i.campaignsConverted)||void 0===d?void 0:d.includes(s))||!u)return;if(c=u.goals[l],!c)return;g=Ns.isSessionBasedCampaign2(u);const f="SEPARATE_PAGE"===c.type;if(g&&!f)return;const E=u.triggers[0];if(!g&&(null===(v=null==u?void 0:u.ss)||void 0===v?void 0:v.csa)&&!(yield t.validateTrigger(n.currentSettings.triggers[E],null,{triggerName:E})))return;if(!Ns.shouldTrackUserForCampaign(u)||!(yield Ls.isBucketed(n,u,!f))||!Nr.shouldWeTriggerMetric(n,t,o,u,c)){try{if(6===window._vwo_acc_id&&10===u.id&&(null===(h=window.tracklib)||void 0===h?void 0:h.includeGoal)){const e={current:{uuid:n.vwoUUID,sId:yield n.vwoInternalProperties.sessionInfoService.getSessionId(),sn:window.VWO._.cookies.get(mo.TRACK_SESSION_COOKIE_NAME),ds:window.VWO._.cookies.get(mo.TRACK_GLOBAL_COOKIE_NAME),r:null===(w=null===(p=window.VWO.data)||void 0===p?void 0:p.vi)||void 0===w?void 0:w.vt},cURL:n.currentUrl};window.VWO._.customError&&window.VWO._.customError({msg:"RETURNED IN METRICWT",url:"metricWT.ts",lineno:846,colno:23,source:JSON.stringify(e)})}}catch(e){}return}if(f&&delete c.pageVisited,yield Ls.isGoalTriggered(u,l,n))return;u||(u={id:s,goals:{[l]:{}},type:e.sess});const m=e.uuid||(yield Ns.createUUIDCookie2(n,u));if(!g){if("CUSTOM_GOAL"===(null==c?void 0:c.type)&&(null==c?void 0:c.url)){const e=c.url;r[m]=r[m]||[],r[m].indexOf(e)<0&&r[m].push(e)}a[m]=a[m]||{};const e="id_"+s;a[m].metrics=a[m].metrics||{},a[m].metrics[e]=a[m].metrics[e]||[],a[m].metrics[e].push("g_"+l),u.isEventMigrated&&!o.isCustomEvent&&(a[m].comb=a[m].comb||{},a[m].comb[e]=yield Ls.getCombi(n,u,!0))}var _=!0;window.VWO._.isBeaconAvailable=o.isBeaconAvailable,window.VWO._.isLinkRedirecting=o.isLinkRedirecting;yield Cr.registerConversion(n,l,u,o.revenue,!0,!0,{combination:e.combination,uuid:m,gtAndF:e.gtAndF,sId:e.sId,pageUrl:e.pageUrl}),t.trigger(So.GOAL_CONVERTED,{campaignId:u.id,goalId:l}),window.VWO._.isLinkRedirecting=!1,_=_&&window.VWO._.isBeaconAvailable}))))),this.mutex[v]=d,yield d}const l=this.getCurrentEventData(a,r);o._vwo=(null==o?void 0:o._vwo)||{},o._vwo.eventDataConfig=(null===(s=o._vwo)||void 0===s?void 0:s.eventDataConfig)||{},o._vwo.eventDataConfig=l}))}}const xr=new Rr,Pr=xr.execute.bind(xr);window.VWO.modules.tags.metricWT=Pr;class Dr{otherSide(...e){return e[0]="VWO.modules.tags.prePostMutation.fn."+e[0],window.fetcher.getValue(...e)}}window.VWO.modules.tags.prePostMutation={};class Lr{otherSide(...e){return e[0]="VWO.modules.tags.prePostMutation.utils."+e[0],window.fetcher.getValue(...e)}}class kr extends Lr{isMonitorPageChangesRequired(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];if(i.muts&&i.muts.post&&i.muts.post.enabled)return!0}return!1}getWaitForDOMRenderingConfigAndHideElements(e){let t=!1,i=10,n=1e3;for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o],r=s.muts&&s.muts.pre;r&&r.enabled&&(t=!0,r.timer&&r.timer>i&&(i=r.timer),r.timeout&&r.timeout>n&&(n=r.timeout))}return{enabled:t,timer:i,timeout:n}}waitForDOMRenderingAndExecuteCampaign(e){return this.otherSide("waitForDOMRenderingAndExecuteCampaign",[e])}monitorPageForChanges(){return this.otherSide("monitorPageForChanges")}}const Ur=new kr;function Wr(){Mr("attachEditorChangeObserverEvents")}function Mr(...e){return e[0]="VWO.modules.tags.prePostMutation.editorChangesObserver."+e[0],window.fetcher.getValue(...e)}window.VWO.modules.tags.prePostMutation.utils=Ur;class Gr extends Dr{constructor(){super(...arguments),this.editorChangeObserverEventsAttached=!1}execute({data:e,getters:t,vwoEvents:n}){return i(this,void 0,void 0,(function*(){e=t.settings.campaigns;const i=t.MutationObserver;let o,s=Promise.resolve();if(i){const t=Ur.getWaitForDOMRenderingConfigAndHideElements(e);t.enabled?s=Ur.waitForDOMRenderingAndExecuteCampaign(t):n.trigger(So.SSR_COMPLETE)}Ur.isMonitorPageChangesRequired(e)&&(o=Ur.monitorPageForChanges(),this.editorChangeObserverEventsAttached||(Wr(),this.editorChangeObserverEventsAttached=!0)),yield Promise.all([s,o])}))}}const Fr=new Gr,jr=Fr.execute.bind(Fr);window.VWO.modules.tags.prePostMutation.fn=Fr;class Hr{formatErrorObject(e){return"string"==typeof e&&(e={msg:e}),e}setCustomError(e){const t=this;window.VWO._.customError=function(i){i=t.formatErrorObject(i),e(i)}}}class $r extends Hr{errorTracking({getters:e}){return i(this,void 0,void 0,(function*(){const t=yield window.fetcher.getValue('VWO.modules.tags.errorTrackingCallback("${{1}}")',null,{captureGroups:[e]});this.setCustomError(t)}))}}const Br=new $r,Jr=Br.errorTracking;class Kr{}class zr extends Kr{constructor(e,t){super(),this.flattenedGroup=[],this.groupsConfig=e,this.campaigns=t,this.expPossibleToRunMap={}}flattenGroupsData(){if(this.groupsConfig)for(let e=0;e<this.groupsConfig.length;e++){if(this.groupsConfig[e].c instanceof Array)for(let t=0;t<this.groupsConfig[e].c.length;t++)this.groupsConfig[e].c[t]=this.groupsConfig[e].c[t].toString();this.flattenedGroup=this.flattenedGroup.concat(this.groupsConfig[e].c)}}isExperimentReadyToRun(e,t,n){return i(this,void 0,void 0,(function*(){const i=t.triggers[0];return Ls.doExperimentHere(e,t,n)[0]&&(yield window.VWO.phoenix.validateTrigger(e.currentSettings.triggers[i],null,{skipEventProps:!0,skipValidationIfTimer:!0}))}))}checkForExistingWinner(e,t){return i(this,void 0,void 0,(function*(){return e=e||window.phoenix.store.getters,!!((yield Ls.getCombiCookie(e,t))||Ls.isLogged(e,t)||"SPLIT_URL"===this.campaigns[t].type&&(yield Ns.getSplitDecision(e,t))||1===this.expPossibleToRunMap[t])}))}checkWinnerAlreadyExists(e){for(let t=0;t<e.length;t++){const i=parseInt(e[t],10);if(1===this.expPossibleToRunMap[i])return i}}checkIfStringArray(e){return!!Array.isArray(e)}processExperimentsOnBasisOfRandomness(e,t){return i(this,void 0,void 0,(function*(){const n={},o={},s=t.c;let r=0;if(!this.checkIfStringArray(s))return;let a=this.checkWinnerAlreadyExists(s);if(!a){for(let e=0;e<s.length;e++)2===this.expPossibleToRunMap[s[e]]&&(r+=1,o[s[e]]=this.campaigns[s[e]].triggers);if(!r){const t=s.map((t=>i(this,void 0,void 0,(function*(){4===this.expPossibleToRunMap[t]&&(yield Ls.exclude(e,this.campaigns[t]))}))));return void(yield Promise.all(t))}for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&(n[e]=+(100/r).toFixed(2));a=yield Ls.chooseCombination(e,null,{scaleInfo:n,segmentInfo:o}),this.expPossibleToRunMap[a]=1}}))}processExperimentsOnBasisOfPriorityAndWeight(e,t){return i(this,void 0,void 0,(function*(){const n=t.c,o=t.p,s=t.wt;if(!this.checkIfStringArray(n))return;let r=this.checkWinnerAlreadyExists(n);if(!r){if(o&&o.length)for(let e=0;e<o.length;e++)if(2===this.expPossibleToRunMap[o[e]]){r=o[e],this.expPossibleToRunMap[r]=1;break}if(!r&&s){let t={},i={},n=0,o=0;const a=Object.keys(s);for(let e=0;e<a.length;e++)2===this.expPossibleToRunMap[a[e]]&&(n+=1,i[a[e]]=this.campaigns[a[e]].triggers,o+=s[a[e]]);if(n){for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=+(100*s[e]/o).toFixed(2));r=yield Ls.chooseCombination(e,null,{scaleInfo:t,segmentInfo:i}),this.expPossibleToRunMap[r]=1}}if(!r){const t=n.map((t=>i(this,void 0,void 0,(function*(){4===this.expPossibleToRunMap[t]&&(yield Ls.exclude(e,this.campaigns[t]))}))));yield Promise.all(t)}}}))}updateExperiments(e){return i(this,void 0,void 0,(function*(){let t,n=!1,o=!1,s=!1;const r=Object.keys(this.campaigns).map((r=>i(this,void 0,void 0,(function*(){if(Object.prototype.hasOwnProperty.call(this.campaigns,r)){const i=e.settings.currentSettings.triggers[window._vwo_exp[r].triggers[0]],a="SPLIT_URL"===this.campaigns[r].type;let l;0!==this.expPossibleToRunMap[r]&&1!==this.expPossibleToRunMap[r]||(this.campaigns[r].shouldHideElement=1),1===this.expPossibleToRunMap[r]&&(e.trigger(So.GROUP_WINNER_CHOOSEN,{groupWinner:parseInt(r,uo)}),a&&(n=!0,(l=yield window.VWO.phoenix.validateTrigger(i,null,{skipEventProps:!0}))&&(s=!0))),!a||o&&t||(this.flattenedGroup.indexOf(r)<0?l&&Ls.doExperimentHere(e.store.getters,window._vwo_exp[r],e)[0]&&(t=!0):o=!0)}}))));yield Promise.all(r),n&&s||!o||t||e.trigger(So.NOT_REDIRECTING)}))}filterByGroupType(e){const t=this.groupsConfig.map((t=>1==t.et?this.processExperimentsOnBasisOfRandomness(e,t):2==t.et?this.processExperimentsOnBasisOfPriorityAndWeight(e,t):void 0));return Promise.all(t)}filterExperimentsFromGroups({getters:e,vwoEvents:t}){var n;return i(this,void 0,void 0,(function*(){if(!(null===(n=this.groupsConfig)||void 0===n?void 0:n.length)){for(const e in this.campaigns)Object.prototype.hasOwnProperty.call(this.campaigns,e)&&t.trigger(So.GROUP_WINNER_CHOOSEN,{groupWinner:parseInt(e,uo)});return}let o=!1;const s=Object.keys(this.campaigns).map((n=>i(this,void 0,void 0,(function*(){n=n.toString();const i=this.campaigns[n];if(Ao(this.flattenedGroup,n)<0)this.expPossibleToRunMap[n]=0;else if(yield Ls.isExcluded(e,i))this.expPossibleToRunMap[n]=3;else{o=!0;const s=this.checkForExistingWinner(e,i.id),r=this.isExperimentReadyToRun(e,i,t);(yield s)?this.expPossibleToRunMap[n]=1:1!==this.expPossibleToRunMap[n]&&(yield r)&&((yield Ls.shouldBucket(e,i))?this.expPossibleToRunMap[n]=2:this.expPossibleToRunMap[n]=4)}}))));return yield Promise.all(s),o&&(yield this.filterByGroupType(e)),this.updateExperiments(t)}))}}class Yr{}class Xr extends Yr{constructor(){super(),this.campaignsData={}}processCampaigns({event:e,getters:t,actions:i,vwoEvents:n,data:o}){const s=t.settings.vwoData.gC,r=t.settings.campaigns,a=new zr(s,r);return a.flattenGroupsData(),a.filterExperimentsFromGroups({actions:i,getters:t,event:e,vwoEvents:n,data:o})}processGroupCampaigns({event:e,data:t,getters:i,actions:n,vwoEvents:o}){if(window.VWO._.pageData=window.VWO._.pageData||{},window.fetcher.setValue("VWO._.pageData",window.VWO._.pageData),window.VWO._.pageData._grp_campaign_called)return void o.trigger("vwo_groupCampTriggered");window.VWO._.pageData._grp_campaign_called=!0,window.fetcher.setValue("VWO._.pageData._grp_campaign_called",!0);const s=Ls.getGroupBasedCampaigns({event:e,data:t,getters:i,actions:n,vwoEvents:o});if(s.length){for(const e of s)this.campaignsData[e]=i.settings.campaigns[e];return this.processCampaigns({event:e,getters:i,actions:n,vwoEvents:o,data:this.campaignsData}).then((()=>{o.trigger("vwo_groupCampTriggered")}))}o.trigger("vwo_groupCampTriggered")}}const qr=new Xr,Qr=qr.processGroupCampaigns.bind(qr);window.VWO.modules.tags.groupCampaigns=Qr;class Zr{}class ea{}class ta extends ea{debounceGetSettings({getters:e}){No(Ns.getSettings(2,e),e.vwoInternalProperties.SPA_NEW_PAGE_SETTINGS_DELAY)}resetTriggerStates(){var e,t,i,n;const o=ln.phoenix;ln._.pageNo="number"==typeof ln._.pageNo?ln._.pageNo+1:0;const s="vwo_timer",r=null===(i=null===(t=null===(e=o.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.values)||void 0===i?void 0:i.triggers,a=o.settings.currentSettings.triggers,l=o.triggers.triggerEventListeners;Zo(o,So.POST_INIT,{}),o.eventBus.remove(s);for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e)){const t=null===(n=a[e])||void 0===n?void 0:n.cnds;let i,c;r[e]&&(i=r[e].event,c=r[e].trigger);let d,u=!1;if(t){const e=t=>{if(t&&"string"!=typeof t){if(Array.isArray(t))return t.forEach(e);if("[object Object]"===t.toString()&&void 0!==t.id){c&&c[t.id]&&(c[t.id].state=!1);t.event===s&&(u=!0,d=t.exitTrigger)}}};t.forEach(e)}if(i){r[e].state=!1;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&delete i[e]}u&&(d&&(o.eventBus.remove(o.triggers.getTriggerEventName(d)),d=null),delete l[e].vwo_timer,o.triggers.add(e,a[e]),u=!1)}o.events.events.vwo_timer.eventConditionsUpdate()}resetExpParams(e,t){const i=e.currentSettings.dataStore.campaigns;for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e];t[co]=0,delete t[ao],delete t[lo],delete t.clicks,delete t.combination_chosen,delete t.segment_eligble,delete t.isFirst,delete t.ready,delete t.timedout,delete t.processed,delete t[ao],Ls.checkForVariationTargeting(t)&&delete t.xPath,clearTimeout(t[ho]),delete t[ho],delete t.globalCode.preExecuted,delete t.globalCode.postExecuted;for(var n=bo(t.sections),o=0;o<n.length;o++)delete t.sections[n[o]].loaded}if(window._vis_debug){e.getValue("tags.segmentEligibilityTest")&&t.addValues({executionCount:0},"tags.segmentEligibilityTest")}}resetTriggerExecutionCount(e){const t=e.triggers;Object.keys(t).forEach((e=>{t[e].executionCount=0}))}}var ia=new ta;class na extends Zr{constructor(){super(...arguments),this.lastExecutedForUrl=window.location.href}execute({event:e,data:t,getters:n,actions:o,vwoEvents:s}){var r,a,l,c;return i(this,void 0,void 0,(function*(){Object.assign(window.location,(null==e?void 0:e.location)||{});const i=window.location.href=(null===(r=null==e?void 0:e.props)||void 0===r?void 0:r.virtualPageUrl)||(null===(a=null==e?void 0:e.location)||void 0===a?void 0:a.href)||(yield window.fetcher.getValue("location.href"));if(n.previousUrl=this.lastExecutedForUrl,window._vis_opt_url=void 0,this.lastExecutedForUrl===i||n.vwoInternalProperties.waitingForThirdPartySync)return;if(n.vwoInternalProperties.willRedirectionOccur)return;(null===(l=null==e?void 0:e.props)||void 0===l?void 0:l.virtualPageUrl)||(this.lastExecutedForUrl=i),s.clearData(),ia.resetTriggerStates(),ia.resetExpParams(s.store.getters,o),ia.resetTriggerExecutionCount(s.store.getters),s.trigger(So.URL_CHANGED);if(Ns.setPropertiesToBothThreads(o,[{willRedirectionOccur:!1,destinationMT:"VWO._.willRedirectionOccur"}],"vwoInternalProperties"),Ns.addListenerForSessionInitComplete(),zs({event:e,data:t,getters:n,actions:o,vwoEvents:s}),n.accountId,window.VWO._.campaignsInternalMap={},window.VWO._.preventHidingInSPA=null===(c=window.VWO.featureInfo)||void 0===c?void 0:c.dNHEL,window.VWO._.pageData=window.VWO._.pageData||{},delete window.VWO._.pageData._grp_campaign_called,yield Ns.shouldExecuteLib({event:e,data:t,getters:n,actions:o,vwoEvents:s}),n.vwoInternalProperties.shouldExecuteLib){if(window._vis_debug||window._vis_heatmap){const e=n.vwoInternalProperties.experimentIds;s.trigger(So.CAMPAIGN_FLOW_START,{oldArgs:[e[0]]})}n.vwoCode&&(n.vwoCode[so]=!1,n.vwoCode[ro]=!1),window.VWO._.visibilityTriggered=new Promise((e=>{const t=s.on(So.VISIBILITY_TRIGGERED,(()=>{s.off(t),e()}))})),(n.visDebug||Co())&&(yield Ns.firePageViewEvent({shouldFireDomLoad:!0})),window.VWO._.isSettingsCachingEnabled?(window.VWO._.updateSettingsSuccess||Ns.areSettingsCached())&&(s.trigger(cs.PAGE_LOAD_EVENT),yield Ns.firePageViewEvent({shouldFireDomLoad:!0})):ia.debounceGetSettings({event:e,data:t,getters:n,actions:o,vwoEvents:s}),s.trigger(So.POST_URL_CHANGE,{oldArgs:[bs.getCleanedUrl(i),n.vwoInternalProperties.willRedirectionOccur]})}}))}}const oa=new na,sa=oa.execute.bind(oa);function ra({data:e,event:t,getters:i,vwoEvents:n}){const o=t.props;!1===o.segmentCndsSatisfied?n.trigger(So.SEGMENTATION_EVALUATED,{oldArgs:[e.id,o.segmentCndsSatisfied,!0]}):o.hideElementsTriggered&&n.trigger(So.ELEMENTS_SHOWN_WITHOUT_CHANGES,{oldArgs:[e.id]})}const aa=function({getters:e,vwoEvents:t}){return i(this,void 0,void 0,(function*(){const i=Object.keys(e.settings.campaigns||{});for(const n of i){const i=e.settings.campaigns[n],o=Is.getCleanedUrl(e.currentUrl),s=i.urlRegex,r=i.url_pattern;let a=!1;if("SPLIT_URL"===i.type){const t=yield Ns.getSplitDecision(e,i.id);t&&Ns.isCurrentURLSplitVariation({chosenVariation:t,getters:e,campaignData:i})&&(a=!0)}const[l,c]=a?[!0,2]:Ls.doExperimentHere(e,i,t,{urlRegex:s,urlPattern:r});Ls.firePatternMatchingEvent(t,i.id,c,o,s||r,l),t.trigger("executePatternMatching",{_vwo:{doExperimentHere:"SPLIT_URL"===i.type?null:l}})}}))};function la(e){const{executableCampaignsOnCurrentPage:t}=window.VWO._,i=e.settings.campaigns,n=[{},[]];if(null==t?void 0:t.length)for(const e of t){const t=i[e];Ns.isTestingCampaign(t.type)&&(t.ready?n[0][e]=t.combination_chosen:n[1].push(e))}return e.vwoCode&&(e.vwoCode[so]||e.vwoCode[ro])&&n.push({timeout:!0}),n}class ca{constructor(){this.vwoExecutedTriggeredOnce=!1,this.vwoOSCTriggeredOnce=!1,this.vwoDebouncedTimer=null}_debouncedEvent(e){this.vwoDebouncedTimer&&clearTimeout(this.vwoDebouncedTimer),this.vwoDebouncedTimer=setTimeout((()=>this._sendCampaignsLoaded(e)),ca.CAMPAIGNS_LOADED_DELAY)}_sendCampaignsLoaded(e){window.fetcher.getValue("VWO._.phoenixMT.trigger",["vwo_campaignsLoaded"]),e.off(this.vwoCookieListenerId),this.vwoCookieListenerId=null}_attachCombiListener(e){this.vwoCookieListenerId=e.on(So.CAMPAIGN_COMBI_CREATED,(()=>this._debouncedEvent(e)))}_canAttachCombiListenerOnce(e){return this.vwoExecutedTriggeredOnce?e||this.vwoOSCTriggeredOnce:!e}_attachCombiListenerOnce(e,t){this._canAttachCombiListenerOnce(t)&&(this._debouncedEvent(e),this._attachCombiListener(e))}execute({getters:e,vwoEvents:t}){const i=!!e.vwoCode;if(this._attachCombiListenerOnce(t,i),this.vwoExecutedTriggeredOnce)return void(this.vwoOSCTriggeredOnce=!0);const n=la(e);t.trigger(So.VWO_EXECUTED,{oldArgs:[n]}),this.vwoExecutedTriggeredOnce=!0}}ca.CAMPAIGNS_LOADED_DELAY=200;const da=new ca,ua=da.execute.bind(da);window.VWO.modules.tags.vwoExecuted=da;const ga={init:function(e,t){window.fetcher.getValue("VWO._.vwoLib.initTrack",[e,t])},processEvent:function(e,t,i,n,o){if("[object Array]"!==Object.prototype.toString.call(e))return 0;try{var s,r,a,l=e[0],c=e.slice(1),d=-1!==l.indexOf(".");return d&&0===l.indexOf(t)||!d?(d?(s=i[(r=l.split("."))[0]][r[1]],a=i[r[0]]):(s=i[l],a=i),s?(window.VWO._.prVWO=window.VWO._.prVWO.concat(o.queue?o.splice(n,1):o.queue),s.apply(a,c),1):0):0}catch(t){return console.log("Error occured in VWO Process Event ("+(e&&e[0])+"): ",t),0}}};class va{constructor(){this.noOp=function(){}}getPhoenixConfig(){const e={tags:{checkEnvironment:{fn:nr,sync:!0},prePostMutation:{fn:jr,sync:!0},visibilityService:{fn:hr,sync:!0},groupCampaigns:{fn:Qr,sync:!0},runCampaign:{fn:Or,sync:!0},metric:{fn:Pr,sync:!0,fireUniquelyForEveryEvent:!0},runTestCampaign:{fn:Tr,sync:!0},errorTracking:{fn:Jr,sync:!0},urlChange:{fn:sa,sync:!0},executePreCampJsForGoalsPage:{fn:({data:e})=>{Ls.executeCampaignJS(e,"pre")},sync:!0},vwoExecuted:{fn:ua,sync:!0}},storages:{localStorageService:T,cookies:to},jsLibUtils:{verifyUrl:function(){return bs.verifyUrl.apply(bs,arguments)},getCleanedUrl:function(){return bs.getCleanedUrl.apply(bs,arguments)}}};return window._vis_debug&&(e.tags.segmentEligibilityTest={fn:ra,sync:!1,occurrence:1},e.tags.compareUrlAndFireResultantEvent={fn:aa,sync:!0}),e}setFunnelExps(e){var t,i;const n=null===(t=null==e?void 0:e.settings)||void 0===t?void 0:t.campaigns,o=[];for(const e in window._vwo_exp)if(window._vwo_exp[e].funnel)for(const t of window._vwo_exp[e].funnel){const e=t;(null===(i=window._vwo_exp[e.id])||void 0===i?void 0:i.g)||(window._vwo_exp[e.id]=e,window._vwo_exp[e.id].g=e.goals,window._vwo_exp[e.id].goals={},o.push(e.id+""),n&&(n[e.id]=window._vwo_exp[e.id]))}return o}sendMessageToParentFrame(e){return window.fetcher.getValue("VWO.modules.utils.initUtils.sendMessageToParentFrame",[e])}initializeCookieJar(e="ignoreCustomConfig"){for(var t,i=Array.prototype.slice.apply(ln).length,n=0;n<i;n++)if("config"===ln[n][0]){t=n;break}"number"==typeof t&&ga.processEvent(["config",ln[t][1]],"jslib",ln,t,ln);var o=ln.config();"ignoreCustomConfig"!==e&&((o=o||{}).storage={strategy:"custom",backwardCompatible:!1,strategyConfig:{callback:this.sendMessageToParentFrame,cookieJarValue:this.getCookieJarValidValue(e)}}),to.init(o&&o.storage)}getCookieJarValidValue(e){return["null",null,void 0,"undefined"].indexOf(e)>-1?"":e}setupCookieJar(e){let t;e&&(t=location.search.match(/.*_vwo_store=([^&]*)/),t=t?t[1]:""),this.initializeCookieJar(t)}}var ha=new va;class pa{mergeNestedObjects(...e){return e.reduce(((e,t)=>this.recursivelyMerge(e,t)))}createNestedObjects(e,t){let i=e;return t&&t.split(".").forEach((e=>{Object.prototype.hasOwnProperty.call(i,e)||(i[e]={}),i=i[e]})),i}clearNestedObject(e,t){let i=e;const n=t.split("."),o=n[n.length-1];for(let e=0;e<n.length-1;e++)i=i[n[e]];p(i[o])?i[o]={}:delete i[o]}recursivelyMerge(e,t,i={}){if(p(e)&&p(t)){const n={};Object.keys(e).concat(Object.keys(t)).forEach((e=>{n[e]=1}));const o=Object.getOwnPropertyDescriptors(e),s=Object.getOwnPropertyDescriptors(t);return Object.keys(n).forEach((n=>{s[n]?Object.defineProperty(i,n,s[n]):Object.defineProperty(i,n,o[n]),this.recursivelyMerge(e[n],t[n],i[n])})),i}return t||e}}var wa=new pa,fa,Ea,ma;function _a(...e){return e[0]="VWO.modules.otherLibDeps."+e[0],window.fetcher.getValue(...e)}function Oa(e){return _a('storeSurveyDataInVWOSurveySettings("${{1}}")',null,{captureGroups:[e]})}function Sa(e){return _a('setOtherLibrariesDeps("${{1}}")',null,{captureGroups:[e.store.getters.vwoUUID]})}!function(e){e.SUM="sum",e.COUNT="count",e.AVG="avg",e.MIN="min",e.MAX="max",e.FIRST_VALUE="first",e.LAST_VALUE="last",e.MEAN="mean",e.MEDIAN="median"}(fa||(fa={})),function(e){e.SINCE="s",e.WITHIN="w",e.FROM="f"}(Ea||(Ea={})),function(e){e.DAYS="d",e.WEEKS="w",e.MONTHS="m",e.YEARS="y"}(ma||(ma={}));class ya{setItem(e,t){e=this.getKeyBasedOnMode(e),T.set(e,JSON.stringify(t))}getItem(e){return e=this.getKeyBasedOnMode(e),T.get(e)}removeItem(e){e=this.getKeyBasedOnMode(e),T.remove(e)}getKeyBasedOnMode(e){if(!window._vis_debug)return e;return"debug"+e+"_"+Object.keys(window._vwo_exp||{}).join("_")}}class Ta extends ya{constructor(){super(...arguments),this.isStorageSyncerForCurrentSessionEnabled=!1,this.areEventHistSessionListenersAttached=!1,this.areUrlChangeListenersAttached=!1,this.areEventHistListenersAttached=!1}initialize(){this.eventHist=JSON.parse(this.getItem("_vwo_eventHist")||"{}"),this.eventHistForCurrentSession=JSON.parse(this.getItem("_vwo_eventHistSession")||"{}"),this.currentSessionEvents=window.VWO._.allSettings.dataStore.cSE||{},this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.syncEventsConfig=window.VWO._.allSettings.dataStore.syncEvent||"sessionCreated",this.triggerEvents=[]}clearHistEventData(){window.VWO._.ac.cSHS?Ca.clearsyE():(Co()||window._vis_heatmap||!Object.keys(this.syncEvents).length)&&Ca.clearHistoricalDataOfType(ba.Events)}addEventHistSessionListeners(){(window.VWO._.ac.cSHS||Object.keys(this.currentSessionEvents).length||Object.keys(this.eventHistForCurrentSession).length)&&(this.isStorageSyncerForCurrentSessionEnabled||!Object.keys(this.currentSessionEvents).length&&!window.VWO._.ac.cSHS||(this.isStorageSyncerForCurrentSessionEnabled=!0,window.VWO.modules.utils.storageSyncer.add(this.getKeyBasedOnMode("_vwo_eventHistSession"),(e=>{try{this.eventHistForCurrentSession=JSON.parse(e)||{}}catch(e){}}))),this.areEventHistSessionListenersAttached||(window.VWO.phoenix.on(So.NEW_SESSION_CREATED,(()=>{this.clearEventHistSessionData()})),window.VWO.phoenix.on(So.TRACK_NEW_SESSION_CREATED,(()=>{this.clearEventHistSessionData()})),this.areEventHistSessionListenersAttached=!0))}clearEventHistSessionData(){this.eventHistForCurrentSession={},Ca.clearHistoricalDataOfType(ba.SessionEvents)}addUrlChangeListener(){Co()||window._vis_heatmap||!Object.keys(this.syncEvents).length&&!Object.keys(this.currentSessionEvents).length||this.areUrlChangeListenersAttached||(window.VWO.phoenix.on(So.URL_CHANGED,(()=>{this.triggerEvents.forEach((e=>i(this,void 0,void 0,(function*(){(this.eventHist[e.eventName]||this.eventHistForCurrentSession[e.eventName])&&(yield window.VWO.phoenix.isValid(e.triggerName,e.trigger,e.eventName))})))),this.shouldSyncEvents=!window.VWO._.ac.cSHS&&!!Object.keys(this.syncEvents).length})),this.areUrlChangeListenersAttached=!0)}addEventHistListeners(){if(!Co()&&!window._vis_heatmap&&(window.VWO._.ac.cSHS||Object.keys(this.syncEvents).length)&&!this.areEventHistListenersAttached){if(this.areEventHistListenersAttached=!0,window.VWO.modules.utils.storageSyncer.add(this.getKeyBasedOnMode("_vwo_eventHist"),(e=>{try{this.eventHist=JSON.parse(e)||{}}catch(e){}})),window.VWO._.ac.cSHS)return void this.addListenerForSyEUpdation();if(this.shouldSyncEvents=!0,window._vis_debug)return void this.addListenerForSyEUpdation();"pageView"===this.syncEventsConfig?window.VWO.phoenix.on(So.PAGE_VIEW,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)})):"sessionCreated"===this.syncEventsConfig&&(window.VWO.phoenix.on(So.NEW_SESSION_CREATED,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)})),window.VWO.phoenix.on(So.TRACK_NEW_SESSION_CREATED,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)})),this.addListenerForSyEUpdation())}}addListenersForHistoricalEvents(){this.addEventHistListeners(),this.addEventHistSessionListeners(),this.addUrlChangeListener()}addListenerForSyEUpdation(){const e=window.VWO.phoenix.on(So.PAGE_VIEW,(()=>{this.syncEvents=window.VWO._.allSettings.dataStore.syE||{},window.VWO._.ac.cSHS||(JSON.stringify(this.syncEvents)!==this.getItem("_vwo_syE")&&(Object.keys(this.syncEvents).length&&this.setItem("_vwo_syE",this.syncEvents),this.shouldSyncEvents&&(this.syncEventsData(),this.shouldSyncEvents=!1)),window._vis_debug&&window.VWO.phoenix.off(So.PAGE_VIEW,e))}))}setEventHistInLS(e){this.eventHist[e].length?this.setItem("_vwo_eventHist",this.eventHist):delete this.eventHist[e]}setSessionEventHistInLS(e){this.eventHistForCurrentSession[e].length?this.setItem("_vwo_eventHistSession",this.eventHistForCurrentSession):delete this.eventHistForCurrentSession[e]}deleteUncessaryProps(e){const t=Object.assign({},e);return delete t.name,delete t.props,delete t._meta,delete t.time,delete t.page,delete t.isCustomEvent,delete t.executingTagTrigger,delete t._vwo,t}updateEventHist(e,t){if(!Co()&&!window._vis_heatmap&&(window.VWO._.ac.cSHS||Object.keys(this.syncEvents).length||Object.keys(this.currentSessionEvents).length))if(window.VWO._.ac.cSHS){this.eventHist[e]=this.eventHist[e]||[],this.eventHistForCurrentSession[e]=this.eventHistForCurrentSession[e]||[];const i=this.deleteUncessaryProps(t);this.eventHistForCurrentSession[e].push(Object.assign({},i)),this.setSessionEventHistInLS(e),i.ts=t.time,this.eventHist[e].push(i),this.setEventHistInLS(e)}else{if(Object.keys(this.syncEvents).length){if(this.eventHist[e]=this.eventHist[e]||[],Object.prototype.hasOwnProperty.call(this.syncEvents,"*")){const i=this.deleteUncessaryProps(t);i.ts=t.time,this.eventHist[e].push(i)}else if(Object.prototype.hasOwnProperty.call(this.syncEvents,e)){const i={};if(Array.isArray(this.syncEvents[e]))for(let n of this.syncEvents[e])void 0!==t[n]&&(i[n]=t[n]);i.ts=t.time,this.eventHist[e].push(i)}this.setEventHistInLS(e)}if(Object.keys(this.currentSessionEvents).length){if(this.eventHistForCurrentSession[e]=this.eventHistForCurrentSession[e]||[],Object.prototype.hasOwnProperty.call(this.currentSessionEvents,"*")){const i=this.deleteUncessaryProps(t);this.eventHistForCurrentSession[e].push(i)}else if(Object.prototype.hasOwnProperty.call(this.currentSessionEvents,e)){const i={};if(Array.isArray(this.currentSessionEvents[e]))for(let n of this.currentSessionEvents[e])void 0!==t[n]&&(i[n]=t[n]);this.eventHistForCurrentSession[e].push(i)}this.setSessionEventHistInLS(e)}}}syncEventsData(){return i(this,void 0,void 0,(function*(){if(Co()||window._vis_heatmap||!Object.keys(this.syncEvents).length)return;let e=yield Ns.getUUID(window.VWO.phoenix.store.getters),t="";if(window._vis_debug){const i=to.get("_vwo_uuid",!1,!0);if(!i)return;window._vwo_exp&&Object.keys(window._vwo_exp).length&&(e=i,t="&cId="+Object.keys(window._vwo_exp).join("|"))}const i=window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com/",n="sync/events?a="+window._vwo_acc_id+"&uuid="+e+t;try{const e=yield fetch(i+n),t=yield e.json();this.eventHist=t,this.eventHist&&Object.keys(this.eventHist).length?this.setItem("_vwo_eventHist",this.eventHist):this.removeItem("_vwo_eventHist")}catch(e){ps.warn("Error in syncing historical Events Data.")}}))}getEventsByDate(e,t,i){const n=Object.assign({},i);let o;if(delete n.page,delete n.isCustomEvent,delete n.name,"cs"===t)return o=[...this.eventHistForCurrentSession[e]||[],n],n.fromLocalStorage&&(o=[...this.eventHistForCurrentSession[e]||[]]),o;{o=[...this.eventHist[e]||[],Object.assign(Object.assign({},n),{ts:+new Date})],n.fromLocalStorage&&(o=[...this.eventHist[e]||[]]);let{firstDate:i,lastDate:s}=this.getDateRange(t,o);const r=this.binSearchFirstIndex(i,o),a=this.binSearchLastIndex(s,o);return-1===r||-1===a?[]:o.slice(r,a+1)}}getDateRange(e,t){let i,n;const o=e.split("-"),s=o[0],r=o[1];return s===Ea.SINCE?(n=new Date,i=new Date,r[r.length-1]===ma.DAYS?i.setDate(i.getDate()-Number(r.slice(0,r.length-1))):r[r.length-1]===ma.WEEKS?i.setDate(i.getDate()-7*Number(r.slice(0,r.length-1))):r[r.length-1]===ma.MONTHS?i.setMonth(i.getMonth()-Number(r.slice(0,r.length-1))):r[r.length-1]===ma.YEARS?i.setFullYear(i.getFullYear()-Number(r.slice(0,r.length-1))):i=new Date(r)):s===Ea.FROM?(i=new Date(o[1]),n=new Date(o[2])):s===Ea.WITHIN&&(i=new Date(t[0].ts),n=new Date(i),r[r.length-1]===ma.DAYS?n.setDate(i.getDate()+Number(r.slice(0,r.length-1))):r[r.length-1]===ma.WEEKS?n.setDate(i.getDate()+7*Number(r.slice(0,r.length-1))):r[r.length-1]===ma.MONTHS?n.setMonth(i.getMonth()+Number(r.slice(0,r.length-1))):r[r.length-1]===ma.YEARS?n.setFullYear(i.getFullYear()+Number(r.slice(0,r.length-1))):n=new Date(r)),i.setHours(0,0,0,0),n.setHours(23,59,59,59),i=+i,n=+n,{firstDate:i,lastDate:n}}binSearchFirstIndex(e,t){let i,n,o=0,s=t.length-1;for(;o<=s;)i=Math.floor((o-s)/2+s),n=t[i].ts,n>=e?s=i-1:o=i+1;return o>=t.length?-1:o}binSearchLastIndex(e,t){let i,n,o=0,s=t.length-1;for(;o<=s;)i=Math.floor((o-s)/2+s),n=t[i].ts,n>e?s=i-1:o=i+1;return s<0?-1:s}getCumulativeData(e,t){const i={};if(0===e.length)return i;for(let n in t){for(let o of e)i[n]=i[n]||{},"*"===n?(i[n].count=i[n].count||0,i["*"].count++):Object.prototype.hasOwnProperty.call(o,n)&&this.handleOps(o[n],t[n],i[n]);if(t[n].includes(fa.AVG)&&void 0!==i[n][fa.AVG]&&(i[n][fa.AVG]=i[n][fa.AVG].sum/i[n][fa.AVG].count),t[n].includes(fa.MEDIAN)&&void 0!==i[n][fa.MEDIAN]){const e=i[n][fa.MEDIAN],t=Math.floor(e.length/2),o=[...e].sort(((e,t)=>e-t));i[n][fa.MEDIAN]=e.length%2!=0?o[t]:(o[t-1]+o[t])/2}}return i}handleOps(e,t,i){e=+e;for(let n of t)switch(n){case fa.COUNT:i.count=i.count||0,i.count++;break;case fa.SUM:i.sum=i.sum||0,i.sum+=e;break;case fa.MIN:i.min=Math.min(e,i.min||e);break;case fa.MAX:i.max=Math.max(e,i.max||e);break;case fa.FIRST_VALUE:void 0===i.first&&(i.first=e);break;case fa.LAST_VALUE:i.last=e;break;case fa.AVG:i.avg=i.avg||{},i.avg.sum=i.avg.sum||0,i.avg.sum+=e,i.avg.count=i.avg.count||0,i.avg.count++;break;case fa.MEDIAN:i.median=i.median||[],i.median.push(e)}}}const Ia=new Ta,Ca={get syncEvents(){return Ia.syncEvents},get syncAttributes(){return Na.syncVisAttrs},get eventHistory(){return Ia.eventHist},get visitorProperties(){return Na.visitorAttrs},clearHistoricalDataOfType(e){e===ba.Attributes?(T.remove(Na.getKeyBasedOnMode("_vwo_syV")),T.remove(Na.getKeyBasedOnMode("_vwo_visProps"))):e===ba.Events?(T.remove(Ia.getKeyBasedOnMode("_vwo_syE")),T.remove(Ia.getKeyBasedOnMode("_vwo_eventHist"))):e===ba.SessionEvents&&T.remove(Ia.getKeyBasedOnMode("_vwo_eventHistSession"))},clearHistoricalData(e,t){window.VWO._.ac.cSHS||(Object.keys(t).length||(T.remove(Ia.getKeyBasedOnMode("_vwo_syE")),T.remove(Ia.getKeyBasedOnMode("_vwo_eventHist"))),Array.isArray(e)&&(null==e?void 0:e.length)||(T.remove(Na.getKeyBasedOnMode("_vwo_syV")),T.remove(Na.getKeyBasedOnMode("_vwo_visProps"))))},clearsyE(){T.remove(Ia.getKeyBasedOnMode("_vwo_syE"))},clearsyV(){T.remove(Na.getKeyBasedOnMode("_vwo_syV"))}};var ba;!function(e){e[e.Attributes=0]="Attributes",e[e.Events=1]="Events",e[e.SessionEvents=2]="SessionEvents"}(ba||(ba={}));class Aa extends ya{constructor(){super(...arguments),this.areListenersAttachedAndStorageSyncerEnabled=!1}initialize(){var e;this.visitorAttrs=JSON.parse(this.getItem("_vwo_visProps")||"{}"),this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV||{},this.syncAttrConfig=window.VWO._.allSettings.dataStore.syncAttr||"sessionCreated",Co()||window._vis_heatmap||!(window.VWO._.ac.cSHS||Array.isArray(this.syncVisAttrs)&&(null===(e=this.syncVisAttrs)||void 0===e?void 0:e.length))?Ca.clearHistoricalDataOfType(ba.Attributes):(this.addListenerAndEnableStorageSyncer(),this.visitorAttrs&&Object.keys(this.visitorAttrs).length&&this.addAttrToGetters())}addListenerAndEnableStorageSyncer(){this.areListenersAttachedAndStorageSyncerEnabled||(window.VWO._.ac.cSHS?Ca.clearsyV():(this.shouldSyncAttr=!0,this.addVisAttrListeners()),this.storageSyncAcrossTabs(),this.areListenersAttachedAndStorageSyncerEnabled=!0)}storageSyncAcrossTabs(){window.VWO.modules.utils.storageSyncer.add(this.getKeyBasedOnMode("_vwo_visProps"),(e=>{try{this.visitorAttrs=JSON.parse(e)||{}}catch(e){}}))}addVisAttrListeners(){window._vis_debug?this.addListenerForSyVUpdation():("pageView"===this.syncAttrConfig?window.VWO.phoenix.on(So.PAGE_VIEW,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)})):"sessionCreated"===this.syncAttrConfig&&(window.VWO.phoenix.on(So.NEW_SESSION_CREATED,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)})),window.VWO.phoenix.on(So.TRACK_NEW_SESSION_CREATED,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)})),this.addListenerForSyVUpdation()),window.VWO.phoenix.on(So.URL_CHANGED,(()=>{this.shouldSyncAttr=!0})))}addListenerForSyVUpdation(){const e=window.VWO.phoenix.on(So.PAGE_VIEW,(()=>{this.syncVisAttrs=window.VWO._.allSettings.dataStore.syV,JSON.stringify(this.syncVisAttrs)!==this.getItem("_vwo_syV")&&(Array.isArray(this.syncVisAttrs)&&this.syncVisAttrs.length&&this.setItem("_vwo_syV",this.syncVisAttrs),this.shouldSyncAttr&&(this.syncVisData(),this.shouldSyncAttr=!1)),window._vis_debug&&window.VWO.phoenix.off(So.PAGE_VIEW,e)}))}updateVisAttr(e){var t;if(!Co()&&!window._vis_heatmap&&(window.VWO._.ac.cSHS||Array.isArray(this.syncVisAttrs)&&(null===(t=this.syncVisAttrs)||void 0===t?void 0:t.length))){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(window.VWO._.ac.cSHS||this.syncVisAttrs.includes("*")||this.syncVisAttrs.includes(t))&&(this.visitorAttrs[t]=e[t]);try{Object.keys(this.visitorAttrs).length&&this.setItem("_vwo_visProps",this.visitorAttrs)}catch(e){}}}syncVisData(){var e;return i(this,void 0,void 0,(function*(){if(Co()||window._vis_heatmap||window.VWO._.ac.cSHS||!Array.isArray(this.syncVisAttrs)||!(null===(e=this.syncVisAttrs)||void 0===e?void 0:e.length))return;let t=yield Ns.getUUID(window.VWO.phoenix.store.getters),i="";if(window._vis_debug){const e=to.get("_vwo_uuid",!1,!0);if(!e)return;Object.keys(window._vwo_exp||{}).length&&(t=e,i="&cId="+Object.keys(window._vwo_exp).join("|"))}const n=window._vwo_server_url||"https://dev.visualwebsiteoptimizer.com/",o="sync/attributes?a="+window._vwo_acc_id+"&uuid="+t+i;try{const e=yield fetch(n+o),t=yield e.json();this.visitorAttrs=t,this.visitorAttrs&&Object.keys(this.visitorAttrs).length?(this.setItem("_vwo_visProps",this.visitorAttrs),this.addAttrToGetters()):this.removeItem("_vwo_visProps")}catch(e){ps.warn("Error in syncing Historical Attributes Data.")}}))}addAttrToGetters(){for(const e in this.visitorAttrs)Object.prototype.hasOwnProperty.call(this.visitorAttrs,e)&&window.VWO.phoenix.store.actions.set(e,this.visitorAttrs[e],"")}}const Na=new Aa;function Va(e,t,i){const n=window.VWO;switch(e.toLowerCase()){case"tags":n.phoenix.tags.add(t,i.fn);break;case"operators":n.phoenix.operators.add(i.fn);break;case"storages":n.phoenix.storages.add(i);break;case"store":n.phoenix.store.actions.addValues(i)}}class Ra{constructor(e){this.toJSON=function(){const e=Object.assign({},this);return delete e.modules,e},Object.keys(e).forEach((t=>{this[t]=e[t]}))}config(e){return e&&(this.configSettings=e),this.configSettings}definePlugin(e,t={}){const i=e.split(".")[0],n=e.split(".")[1],o=window.VWO;o.phoenix?Va(i,n,t):(o.pluginStorage=o.pluginStorage||{},o.pluginStorage[i]=o.pluginStorage[i]||{},n?(o.pluginStorage[i][n]=o.pluginStorage[i][n]||{},o.pluginStorage[i][n]=wa.mergeNestedObjects(o.pluginStorage[i][n],t)):o.pluginStorage[i]=wa.mergeNestedObjects(o.pluginStorage[i],t))}updateSettings(e,t,n){var o,s,r,a;return i(this,void 0,void 0,(function*(){const i=window.VWO._.allSettings.dataStore.campaigns,l=this.phoenix.store.getters,c=null===(o=t.dataStore)||void 0===o?void 0:o.campaigns;if(c)for(const e in c)i[e]&&delete c[e];const d=JSON.parse(JSON.stringify(c)),u=JSON.parse(JSON.stringify((null===(s=t.dataStore)||void 0===s?void 0:s.syE)||{})),g=JSON.parse(JSON.stringify((null===(r=t.dataStore)||void 0===r?void 0:r.syV)||{})),v=JSON.parse(JSON.stringify((null===(a=t.dataStore)||void 0===a?void 0:a.cSE)||{})),h=Object.keys(d);for(var p in c)window.VWO._.allSettings.dataStore.campaigns[p]=c[p],c[p]=window.VWO._.allSettings.dataStore.campaigns[p];this.phoenix.add(t),1===n&&window.fetcher.getValue("VWO._.phoenixMT.trigger",["vwo_campaignsLoaded"]),Ns.checkAndInitializeClickClass(),this.phoenix.store.actions.addValues({currentSettings:this.phoenix.settings.currentSettings},"root"),window.VWO._.allSettings.dataStore.syE=u,window.VWO._.allSettings.dataStore.syV=g,window.VWO._.allSettings.dataStore.cSE=v,window.VWO.modules.eventHistHandler.syncEvents=u,window.VWO.modules.eventHistHandler.currentSessionEvents=v,window.VWO.modules.eventHistHandler.addListenersForHistoricalEvents(),(window.VWO._.ac.cSHS||Array.isArray(g)&&(null==g?void 0:g.length))&&Na.addListenerAndEnableStorageSyncer(),Ca.clearHistoricalData(g,u),Oa(d);const w=ha.setFunnelExps(this.phoenix.store.getters);h.push(...w),Ns.setCampaignIds(h),Ns.setThirdPartyCookiesForApplicableCamps(this.phoenix.store.getters);for(const e in window.VWO._.allSettings.dataStore.campaigns)Object.prototype.hasOwnProperty.call(window.VWO._.allSettings.dataStore.campaigns,e)&&Cr.serializeData(window.VWO._.allSettings.dataStore.campaigns[e]);if(Ns.loadNonTestingLibraries(this.phoenix.store.getters,d,n),(2==n||4===n&&l.previousUrl&&l.previousUrl!==l.currentUrl)&&(this.phoenix.trigger(cs.PAGE_LOAD_EVENT),yield Ns.firePageViewEvent({shouldFireDomLoad:!0})),(4===n||2==n)&&e)for(var p in d)Ns.isSessionBasedCampaign2(d[p])&&(yield Zo(this.phoenix,So._ACTIVATED,{id:p}));window.VWO.push(["setVariation"]),window.VWO._.updateSettingsSuccess=1}))}addPhoenix(e){this.event=function(t,i,n){(i=i||{}).isCustomEvent=!0,i.page=Ho.page,Zo(e,t,i,(()=>{window.VWO.modules.eventHistHandler.updateEventHist(t,i),null==n||n()}))},this.phoenix=e}splice(...e){const t=this.queue.splice.apply(this.queue,e);return this.length=this.queue.length,t}push(...e){const t=this.queue.push.apply(this.queue,e);return this.length=this.queue.length,this[this.length-1]=this.queue[this.queue.length-1],t}sort(...e){return this.queue.sort.apply(this.queue,e)}visitor(e){if(!e)return;const t=e.$metaData;delete e.$metaData;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.phoenix.store.actions.set(t,e[t],"");Zo(this.phoenix,So.SYNC_VISITOR_PROP,{$visitor:{props:e},$metaData:t,isCustomEvent:!0},(()=>{Na.updateVisAttr(e)}))}syncAttributes(){Na.syncVisData()}syncEvents(){window.VWO.modules.eventHistHandler.syncEventsData()}}class xa{otherSide(...e){return e[0]="VWO.modules.tags.backwardCompatibilityUtils."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}}class Pa{}function Da(e){const t=[];return e.forEach((e=>{var i;null===(i=e.filters)||void 0===i||i.forEach(((i,n)=>{const o=i[0].substring(0,i[0].indexOf("."));if("event"===o||"page"===o){const o=JSON.parse(JSON.stringify(i));t.push({condition:o,triggerName:e.triggerName,condId:e.id,filterId:n})}}))})),t}let La,ka={promise:new Promise((function(e){La=e})),resolve:La};class Ua extends Pa{constructor(e){super(),this.eventName=cs.CLICK_EVENT,this.attachedFilters=e&&Da(e)||[],window.VWO.isVwoClickClassInitialized=!0}initializeMT(){return[this.attachedFilters]}eventConditionsUpdate(e){e&&(this.attachedFilters=[...this.attachedFilters,...Da(e)],this.otherSide("eventConditionsUpdate",[this.attachedFilters]))}isGoalEligible(e,t,i){return Cr.isGoalEligible(e,window.VWO.phoenix.store.getters,window.VWO.phoenix)}registerConversion(e,t,n){return i(this,void 0,void 0,(function*(){yield Cr.registerConversion(window.VWO.phoenix.store.getters,t,n)}))}on(e){ka.promise.then((t=>{this.otherSide("on",[e,{serverUrl:t.serverUrl,vwoUUID:t.vwoUUID,useCapturePhase:t.settings.plugins.DACDNCONFIG.UCP}])}))}off(){}otherSide(...e){throw new Error("entered into outdated otherSide")}}const Wa=Fn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.ClickDomEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.ClickDomEvent"},Ua,!0,(e=>e.initializeMT()));let Ma;window.VWO.modules.phoenixPlugins.events.predefinedEvents.ClickDomEvent=Wa;let Ga={promise:new Promise((e=>{Ma=e})),resolve:Ma};class Fa extends Pa{constructor(e){super(),this.eventName=So.DOM_SUBMIT,this.attachedFilters=Da(e)}initializeMT(){return[this.attachedFilters]}eventConditionsUpdate(e){e&&(this.attachedFilters=[...this.attachedFilters,...Da(e)],this.otherSide("eventConditionsUpdate",[this.attachedFilters]))}isGoalEligible(e,t,i){return Cr.isGoalEligible(e,window.VWO.phoenix.store.getters,window.VWO.phoenix)}registerConversion(e,t,n){return i(this,void 0,void 0,(function*(){yield Cr.registerConversion(window.VWO.phoenix.store.getters,t,n)}))}on(e){Ga.promise.then((t=>{this.otherSide("on",[e,{vwoUUID:t.vwoUUID,useCapturePhase:t.settings.plugins.DACDNCONFIG.UCP}])}))}off(){}otherSide(...e){throw new Error("entered into outdated otherSide")}}const ja=Fn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.SubmitDomEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.SubmitDomEvent"},Fa,!0,(e=>e.initializeMT()));window.VWO.modules.phoenixPlugins.events.predefinedEvents.SubmitDomEvent=ja;const Ha=function(){};class $a extends xa{sendRegisterCall(e,t,n,o,s){return i(this,void 0,void 0,(function*(){if(o=o||Ha,s.visDebug||Co())return o(),!0;var i,r,a=yield Ns.createUUIDCookie2(s,n),l=yield Ns.extraData2(),c="",d=null;if((yield s.vwoInternalProperties.sessionInfoService.shouldSendSessionInfoInCall())&&(c="&sId="+(d=yield s.vwoInternalProperties.sessionInfoService.getSessionId()),yield s.vwoInternalProperties.sessionInfoService.setSNCookieValueByIndex2(mo.SESSION_SYNCED_STATE_INDEX,1)),po.includes(window._vwo_acc_id)&&"l.gif"==e){let e=window.localStorage.getItem("vwo_newSessionCreated");try{e=JSON.parse(e)||{}}catch(t){e={}}const t="new"==e.user;if(null==e||delete e.user,t){const t=0==Object.keys(e).length,i=!t&&(null==e?void 0:e.sessionId)!=d,o=!t&&(null==e?void 0:e.uuid)!=a;if(i||o||t){let r="Session didn't create properly due to";t&&(r+=" session call failure"),i&&(r+=" session id mismatch"),o&&(r+=" uuid mismatch"),window.VWO._.customError&&window.VWO._.customError({msg:r,url:"utilsWT.ts",lineno:71,colno:5,source:JSON.stringify({lastSessionData:e,current:{uuid:a,sessionIdStore:d,sessionCookie:window.VWO._.cookies.get(mo.TRACK_SESSION_COOKIE_NAME)},expId:(null==n?void 0:n.id)||"not-found",cURL:s.currentUrl})})}}}const u=encodeURIComponent(l),g=l;l=n.ps||void 0===n.ps?"&ed="+u:"",i="&s="+(n.version>=4?ln.data.vi&&"new"===ln.data.vi.vt?1:2:parseInt(((yield s.storages.storages.cookies.get("_vis_opt_s"))||"").split("|")[0],10)),r=e+"?experiment_id="+n.id+"&account_id="+s.accountId+"&cu="+encodeURIComponent(s.currentUrl)+"&combination="+t+i+c+Ns.getUUIDString(a)+l;try{l&&JSON.parse(decodeURIComponent(u)).lt}catch(t){window.VWO._.customError&&window.VWO._.customError({msg:`extraData(ed) is not a JSON string [while sending call for '${e}']`,url:"utilsWT.ts",lineno:101,colno:5,source:JSON.stringify({extraData:g,lt:(new Date).getTime(),referrer:jo.get(),requestURL:r})})}Ns.isSessionBasedCampaign2(n)||"SURVEY"===n.type||(yield this.otherSide('sendRegisterCall("${{1}}", "${{2}}", "${{3}}")',null,[s,r,o]))}))}markRevenueGoal(e,t,n){return i(this,void 0,void 0,(function*(){if(void 0!==(yield window.fetcher.getValue("_vis_opt_revenue"))){n.trigger(So.CONVERT_REVENUE_GOALS_FOR_EXPERIMENT,{oldArgs:[e.id,window._vis_opt_revenue]});const i=bo(e.goals);let o,s=i.length;for(;s--;)o=i[s],"REVENUE_TRACKING"===e.goals[o].type&&Cr.isGoalEligible(e.goals[o],t,n)&&(yield Cr.registerConversion(t,o,e,window._vis_opt_revenue))}}))}pollForNewVisitor({vwoEvents:e,getters:t}){const n=this;Ns.addListener(t,e,{eventName:So.SEND_NEW_VISITOR_CALL},(function(e){return i(this,void 0,void 0,(function*(){const{combination:i,campaignData:o,callbackFn:s}=e;yield n.sendRegisterCall("l.gif",i,o,s,t)}))}))}goalRevenuePoll({vwoEvents:e,getters:t}){const n=this;Ns.addListener(t,e,{eventName:So.VARIATION_SHOWN},(function(o){return i(this,void 0,void 0,(function*(){const i=t.settings.campaigns[o.props.id];yield n.markRevenueGoal(i,t,e)}))}))}customGoalConversion(e,t){return i(this,void 0,void 0,(function*(){const i=ln.phoenix.store.getters;if(isNaN(parseInt(e,10)))return;ln.phoenix.trigger(So.CONVERT_GOAL_FOR_ALL_EXPERIMENTS,{oldArgs:[e]});var n,o=bo(i.settings.campaigns);let s=o.length;for(;s--;)n=o[s],"object"==typeof i.settings.campaigns[n].goals[e]&&"TRACK"===i.settings.campaigns[n].type===t&&Cr.isGoalEligible(i.settings.campaigns[n].goals[e],ln.phoenix.store.getters,ln.phoenix)&&(yield Cr.registerConversion(ln.phoenix.store.getters,e,i.settings.campaigns[n]))}))}customRevenueConversion(e,t){return i(this,void 0,void 0,(function*(){const i=ln.phoenix.store.getters;if(isNaN(parseFloat(e)))return;var n,o,s;ln.phoenix.trigger(So.CONVERT_ALL_VISIT_GOALS_FOR_EXPERIMENT,{oldArgs:[e]});var r,a=bo(i.settings.campaigns);let l=a.length;for(;l--;)if(r=a[l],"TRACK"===i.settings.campaigns[r].type===t)for(s=(o=bo(i.settings.campaigns[r].goals)).length;s--;)n=o[s],"REVENUE_TRACKING"===i.settings.campaigns[r].goals[n].type&&Cr.isGoalEligible(i.settings.campaigns[r].goals[n],window.VWO.phoenix.store.getters,window.VWO.phoenix)&&(yield Cr.registerConversion(window.VWO.phoenix.store.getters,n,i.settings.campaigns[r],e))}))}delayedGoalConversion(e){return i(this,void 0,void 0,(function*(){let t;const i=ln.phoenix,n=i.store.getters,o=n.settings.campaigns[e.campaignId];e=e||{};const s=window.tracklib;"TRACK"===e.type?t=yield s.isGoalIncluded(e.goalId):"FUNNEL"===e.type?t=yield s.isFunnelIncluded(e.campaignId):Ns.isAnalyzeCampaign(e.type)&&(t=yield s.isAnalyzeCampaignIncluded(e.campaignId)),Cr._triggerGoalConversion(i,n,e.goalId,o,e.revenue,!1,{combination:t})}))}makeSessionAndTagCall(e,t){const n=this;Ns.addListener(e,t,{eventName:So.DIMENSION_TAG_PUSHED},(function(e){return i(this,void 0,void 0,(function*(){const{props:t}=e;yield n.otherSide('makeCallForTagsAndSession("${{1}}", "${{2}}")',null,[t,"sessionUpdate"])}))}))}initialise({event:e,actions:t,vwoEvents:n,data:o,getters:s}){return i(this,void 0,void 0,(function*(){for(const e in s.settings.campaigns)Object.prototype.hasOwnProperty.call(s.settings.campaigns,e)&&Cr.serializeData(s.settings.campaigns[e]);this.attachEventListeners(s),this.pollForNewVisitor({event:e,actions:t,vwoEvents:n,data:o,getters:s}),this.goalRevenuePoll({event:e,actions:t,vwoEvents:n,data:o,getters:s}),yield this.declareVWOAPI(),this.makeSessionAndTagCall(s,n)}))}attachEventListeners(e){ka.resolve(e),Ga.resolve(e)}declareVWOAPI(){return i(this,void 0,void 0,(function*(){yield this.otherSide("declareVWOAPI()",null,[])}))}}window.VWO.modules.tags.activate=function(){return i(this,void 0,void 0,(function*(){const{getters:e,actions:t}=window.VWO.phoenix.store;ia.resetTriggerStates(),ia.resetExpParams(e,t),ia.resetTriggerExecutionCount(e),Ns.firePageViewEvent()}))};const Ba=new $a;window.VWO.modules.tags.backwardCompatibilityUtils=Ba;class Ja{}function Ka(...e){return e[0]="VWO.modules.tags."+e[0],e[2]&&(e[2]={captureGroups:e[2]}),window.fetcher.getValue(...e)}class za extends Ja{execute({event:e,actions:t,vwoEvents:n,data:o,getters:s}){return i(this,void 0,void 0,(function*(){Ns.addListener(s,n,{eventName:"*"},(function(e,t){Ka('wildCardCallback("${{1}}", "${{2}}")',null,[e,t])}));const i=Ba.initialise({event:e,actions:t,vwoEvents:n,data:o,getters:s}),r=window.fetcher.getValue("VWO.modules.tags.backwardCompatibility");yield Promise.all([i,r])}))}}const Ya=new za,Xa=Ya.execute;window.VWO.modules.tags.backwardCompatibility=Xa;class qa extends Pa{constructor(e,t,i){super();const n=`${as.DOM}_`;this.eventName=e,this.domEventsDebounceTime=i,this.domEventName=e.includes(n)?e.substr(n.length):e,this.attachedFilters=Da(t)}initializeMT(){return[this.eventName,this.domEventName,this.domEventsDebounceTime,this.attachedFilters]}eventConditionsUpdate(e){e&&(this.attachedFilters=[...this.attachedFilters,...Da(e)],this.otherSide("eventConditionsUpdate",[this.attachedFilters]))}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const Qa=Fn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.GenericDOMEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.GenericDOMEvent"},qa,!0,(e=>e.initializeMT()));window.VWO.modules.phoenixPlugins.events.predefinedEvents.GenericDOMEvent=Qa;class Za extends Pa{constructor({occurrence:e=1e3}={}){super(),this.eventName=ls.TIMER,this.occurrence=e,this.start=Date.now()}eventConditionsUpdate(){this.start=Date.now()}on(e){this.interval=window.setInterval((()=>{const t={time:Date.now(),timeSpent:Math.floor((Date.now()-this.start)/1e3)};e(t)}),this.occurrence)}off(){window.clearInterval(this.interval)}}class el extends Pa{constructor(e){super(),this.eventName=cs.URL_CHANGE,this.events=e||["pushState","replaceState","hashchange","popstate"]}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const tl=Fn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.UrlChangeEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.UrlChangeEvent"},el);window.VWO.modules.phoenixPlugins.events.predefinedEvents.UrlChangeEvent=tl;class il extends Pa{constructor(){super(...arguments),this.eventName=cs.LEAVE_INTENT}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const nl=Fn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.LeaveIntentEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.LeaveIntentEvent"},il);window.VWO.modules.phoenixPlugins.events.predefinedEvents.LeaveIntentEvent=nl;class ol extends Pa{constructor(){super(...arguments),this.eventName=cs.PAGE_LOAD_EVENT}on(e){this.otherSide("on",[e])}off(){this.otherSide("off",[null])}otherSide(...e){throw new Error("entered into outdated otherSide")}}const sl=Fn.primary({src:"VWO.modules.phoenixPlugins.events.predefinedEvents.PageLoadEvent",dest:"VWO.modules.phoenixPlugins.events.predefinedEvents.PageLoadEvent"},ol);window.VWO.modules.phoenixPlugins.events.predefinedEvents.PageLoadEvent=sl;var rl=Object.freeze({__proto__:null,GenericDomEvent:Qa,TimeEvent:Za,UrlChangeEvent:tl,LeaveIntentEvent:nl,ClickDomEvent:Wa,SubmitDomEvent:ja,PageLoadEvent:sl});const al=e=>!!e,ll=function(e,t,i){if(e&&t){const n=e.countryCode,o=e.city,s=e.region;return gl.f_in_list(n,t,i)||gl.f_in_list(`${n}-${s}`,t,i)||gl.f_in_list(`${n}-${s}-${o}`,t,i)}},cl=function(e,t,i){if(e&&t){const n=e.countryCode,o=e.city,s=e.region;return gl.f_nin_list(n,t,i)&&gl.f_nin_list(`${n}-${s}`,t,i)&&gl.f_nin_list(`${n}-${s}-${o}`,t,i)}},dl=(e,t,i)=>{if(!al(e))return!1;const n=i.syncGet("fns.list",[e,t]);return!!n.dataPresent&&n.val},ul=(e,t,i)=>{if(""===e)return!0;if(!al(e))return!1;const n=i.syncGet("fns.list",[e,t]);return!!n.dataPresent&&!n.val},gl={f_in_list:dl,f_nin_list:ul,f_in_loc:ll,f_nin_loc:cl};class vl{constructor(e){window.VWO._.contentSyncService=new no({strategy:["ls"]},e,window.VWO.data.content)}}function hl(){var e,t;const i=null===(t=null===(e=ln.phoenix.store.getters.settings.plugins)||void 0===e?void 0:e.DACDNCONFIG)||void 0===t?void 0:t.DT;if(i){const e={mobile:["mobile"],desktop:["desktop"],both:["desktop","mobile"]},t=ln.phoenix.store.getters.deviceType+"";e[i.DEVICE].includes(t)&&ln.phoenix.store.actions.addValues({dtcTimer:i.DELAYAFTERTRIGGER},"vwoInternalProperties")}}class pl{constructor(){this.queue={}}add(e,t){this.queue[e]=this.queue[e]||[],this.queue[e].push(t),this.otherSide("addListener",[e])}processQueue(e,t){this.queue[e]&&this.queue[e].length&&this.queue[e].forEach((e=>{e(t)}))}otherSide(...e){e[0]="VWO.modules.utils.storageSyncer."+e[0],window.fetcher.getValue(...e)}}const wl=new pl;function fl(...e){return e[0]="VWO.modules.settingsCaching."+e[0],window.fetcher.getValue(...e)}function El(e){return i(this,void 0,void 0,(function*(){e.vwoCode&&fl("initializeCaching")}))}function ml(){window.VWO.phoenix.on(So.CAMPAIGN_FLOW_START,(()=>{window.VWO._.previewDebuggerBooted=new Promise((e=>{const t=window.VWO.phoenix.on(So.TIB_DONE,(()=>{window.VWO.phoenix.off(So.TIB_DONE,t),e()}))}))}))}window.VWO.modules.utils.storageSyncer=wl,window.functionWrapper=new M,window.fetcher.init();const _l=window.VWO;window.VWO._.cookieInitWT=e=>{to.setJar(e)},window.setVWO=e=>{const t=new Ra(e);cn(t),dn(t),window.VWO.modules=_l.modules,Object.assign(window.VWO._,_l._)},window.phoenixInstantiate=()=>{var e;try{window=Object.assign(window,window.fakeWindow),delete window.fakeWindow,window.window=window,document=window.document;const t=window.VWO;window.VWO._.isWorkerThread=!0;const i=window.VWOSettings;i[1]=Object.assign(i[1],ha.getPhoenixConfig()),i[1].storages.cookies=to;const n=new N;window._vwo_exp=window.VWO._.allSettings.dataStore.campaigns,window._vwo_exp=n.register(g.Object,"_vwo_exp",window._vwo_exp),window.VWO._.allSettings.dataStore.campaigns=window._vwo_exp,n.register(g.Document,"cookie"),window._vwo_surveySettings=n.register(g.Object,"_vwo_surveySettings",window._vwo_surveySettings),window.tracklib=n.register(g.Object,"",{},"",!1),n.register("custom","localStorage"),i[0]=window.VWO._.allSettings,t.definePlugin("props",Ho),i[2]=t.pluginStorage,window.VWO.modules.eventHistHandler=Ia,window.VWO.modules.eventHistHandler.initialize(),window.phoenix=new on(i,{preDefinedEvents:rl});new vl(window.phoenix.store.getters.serverUrl);window.phoenix.store.actions.addValues({currentSettings:window.phoenix.settings.currentSettings},"root"),window.VWO.addPhoenix(window.phoenix),Ns.addListenerForSessionInitComplete(),Ns.checkAndInitializeClickClass(),window.phoenix.store.getters.flags=window.phoenix.store.getters.flags||{},window.phoenix.store.getters.flags.cookieLessModeEnabled=!!window.VWO._.cLFE,Na.initialize(),window.VWO.modules.eventHistHandler.clearHistEventData(),window.VWO.modules.eventHistHandler.addListenersForHistoricalEvents(),Xa({event:void 0,data:void 0,getters:window.phoenix.store.getters,actions:window.phoenix.store.actions,vwoEvents:window.phoenix}),t.phoenix.operators.add("inlist",(function(e,t){return!!gl.f_in_list(e,t,window.VWO._.contentSyncService)})),t.phoenix.operators.add("ninlist",(function(e,t){return!!gl.f_nin_list(e,t,window.VWO._.contentSyncService)})),t.phoenix.operators.add("inloclist",(function(e,t){return!!gl.f_in_loc(e,t,window.VWO._.contentSyncService)})),t.phoenix.operators.add("ninloclist",(function(e,t){return!gl.f_nin_loc(e,t,window.VWO._.contentSyncService)})),window.isInsightsOnConsentEnabled&&(t._.insightsOnConsentPromise=new Promise((e=>{t.phoenix.on("trigger.InsightsOnConsentTrigger",e)}))),hl(),window._vis_heatmap||Ns.loadNonTestingLibraries(window.phoenix.store.getters,window.phoenix.store.getters.settings.campaigns),window.VWO.phoenix.store.getters.settings.campaigns=window._vwo_exp,i[1].storages.cookies.domain=window.VWO.phoenix.store.getters.cookieDomain;const o=window.phoenix.store.getters,s=o.settings.plugins,r={vwoData:{accountJSInfo:null===(e=o.settings.vwoData)||void 0===e?void 0:e.accountJSInfo}};return s&&(r.plugins={DACDNCONFIG:s.DACDNCONFIG}),queueMicrotask((()=>{ml(),window.VWO._.visibilityTriggered=new Promise((e=>{const t=window.phoenix.on(So.VISIBILITY_TRIGGERED,(()=>{window.phoenix.off(t),e()}))})),Zo(t.phoenix,So.POST_INIT,{}).then((()=>{Sa(t.phoenix),El(o)}))})),{cookieDomain:o.cookieDomain,accountId:o.accountId,flags:o.flags,vwoInternalProperties:{},settings:r}}catch(e){window.vwo_libExecuted=!0,window.fetcher.setValue("vwo_libExecuted",!0),ps.error("Error in phoenix initialization at worker:",e.stack)}}})();
ch((e=\u003e{let[t,n]=e;c[t]?c[t].forEach((e=\u003e{n?(0,i.p)(\"feat-\"+t,[],void 0,e,r):(0,i.p)(\"block-\"+t,[],void 0,e,r),(0,i.p)(\"rumresp-\"+t,[Boolean(n)],void 0,e,r)})):n\u0026\u0026(0,i.p)(\"feat-\"+t,[],void 0,void 0,r),l[t]=Boolean(n)})),Object.keys(c).forEach((e=\u003e{void 0===l[e]\u0026\u0026(c[e]?.forEach((t=\u003e(0,i.p)(\"rumresp-\"+e,[!1],void 0,t,r))),l[e]=!1)})),u.add(t),function(){let e=arguments.length\u003e0\u0026\u0026void 0!==arguments[0]?arguments[0]:{};try{a._A.dispatchEvent(new CustomEvent(s,{detail:e}))}catch(e){}}({loaded:!0})))}const l={}},2210:(e,t,r)=\u003e{\"use strict\";r.d(t,{X:()=\u003ei});var n=Object.prototype.hasOwnProperty;function i(e,t,r){if(n.call(e,t))return e[t];var i=r();if(Object.defineProperty\u0026\u0026Object.keys)try{return Object.defineProperty(e,t,{value:i,writable:!0,enumerable:!1}),i}catch(e){}return e[t]=i,i}},1284:(e,t,r)=\u003e{\"use strict\";r.d(t,{D:()=\u003en});const n=(e,t)=\u003eObject.entries(e||{}).map((e=\u003e{let[r,n]=e;return t(r,n)}))},4351:(e,t,r)=\u003e{\"use strict\";r.d(t,{P:()=\u003eo});var n=r(8325);const i=()=\u003e{const e=new WeakSet;return(t,r)=\u003e{if(\"object\"==typeof r\u0026\u0026null!==r){if(e.has(r))return;e.add(r)}return r}};function o(e){try{return JSON.stringify(e,i())}catch(e){try{n.ee.emit(\"internal-error\",[e])}catch(e){}}}},3960:(e,t,r)=\u003e{\"use strict\";r.d(t,{KB:()=\u003ea,b2:()=\u003eo});var n=r(3239);function i(){return\"undefined\"==typeof document||\"complete\"===document.readyState}function o(e,t){if(i())return e();(0,n.bP)(\"load\",e,t)}function a(e){if(i())return e();(0,n.iz)(\"DOMContentLoaded\",e)}},8632:(e,t,r)=\u003e{\"use strict\";r.d(t,{EZ:()=\u003ed,ce:()=\u003eo,ek:()=\u003eu,fP:()=\u003ea,gG:()=\u003el,h5:()=\u003ec,mF:()=\u003es});var n=r(7894),i=r(385);const o={beacon:\"bam.nr-data.net\",errorBeacon:\"bam.nr-data.net\"};function a(){return i._A.NREUM||(i._A.NREUM={}),void 0===i._A.newrelic\u0026\u0026(i._A.newrelic=i._A.NREUM),i._A.NREUM}function s(){let e=a();return e.o||(e.o={ST:i._A.setTimeout,SI:i._A.setImmediate,CT:i._A.clearTimeout,XHR:i._A.XMLHttpRequest,REQ:i._A.Request,EV:i._A.Event,PR:i._A.Promise,MO:i._A.MutationObserver,FETCH:i._A.fetch}),e}function c(e,t){let r=a();r.initializedAgents??={},t.initializedAt={ms:(0,n.z)(),date:new Date},r.initializedAgents[e]=t}function u(e){let t=a();return t.initializedAgents?.[e]}function d(e,t){a()[e]=t}function l(){return function(){let e=a();const t=e.info||{};e.info={beacon:o.beacon,errorBeacon:o.errorBeacon,...t}}(),function(){let e=a();const t=e.init||{};e.init={...t}}(),s(),function(){let e=a();const t=e.loader_config||{};e.loader_config={...t}}(),a()}},7956:(e,t,r)=\u003e{\"use strict\";r.d(t,{N:()=\u003ei});var n=r(3239);function i(e){let t=arguments.length\u003e1\u0026\u0026void 0!==arguments[1]\u0026\u0026arguments[1],r=arguments.length\u003e2?arguments[2]:void 0,i=arguments.length\u003e3?arguments[3]:void 0;(0,n.iz)(\"visibilitychange\",(function(){if(t)return void(\"hidden\"===document.visibilityState\u0026\u0026e());e(document.visibilityState)}),r,i)}},1214:(e,t,r)=\u003e{\"use strict\";r.d(t,{em:()=\u003eb,u5:()=\u003eR,QU:()=\u003eO,_L:()=\u003eC,Gm:()=\u003eM,Lg:()=\u003eL,BV:()=\u003eZ,Kf:()=\u003eY});var n=r(8325),i=r(3117);const o=\"nr@original:\".concat(i.a);var a=Object.prototype.hasOwnProperty,s=!1;function c(e,t){return e||(e=n.ee),r.inPlace=function(e,t,n,i,o){n||(n=\"\");const a=\"-\"===n.charAt(0);for(let s=0;s\u003ct.length;s++){const c=t[s],u=e[c];d(u)||(e[c]=r(u,a?c+n:n,i,c,o))}},r.flag=o,r;function r(t,r,n,s,c){return d(t)?t:(r||(r=\"\"),nrWrapper[o]=t,function(e,t,r){if(Object.defineProperty\u0026\u0026Object.keys)try{return Object.keys(e).forEach((function(r){Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){return e[r]=t,t}})})),t}catch(e){u([e],r)}for(var n in e)a.call(e,n)\u0026\u0026(t[n]=e[n])}(t,nrWrapper,e),nrWrapper);function nrWrapper(){var o,a,d,l;try{a=this,o=[...arguments],d=\"function\"==typeof n?n(o,a):n||{}}catch(t){u([t,\"\",[o,a,s],d],e)}i(r+\"start\",[o,a,s],d,c);try{return l=t.apply(a,o)}catch(e){throw i(r+\"err\",[o,a,e],d,c),e}finally{i(r+\"end\",[o,a,l],d,c)}}}function i(r,n,i,o){if(!s||t){var a=s;s=!0;try{e.emit(r,n,i,t,o)}catch(t){u([t,r,n,i],e)}s=a}}}function u(e,t){t||(t=n.ee);try{t.emit(\"internal-error\",e)}catch(e){}}function d(e){return!(e\u0026\u0026\"function\"==typeof e\u0026\u0026e.apply\u0026\u0026!e[o])}var l=r(2210),f=r(385);const h={},p=f._A.XMLHttpRequest,g=\"addEventListener\",m=\"removeEventListener\",v=\"nr@wrapped:\".concat(n.A);function b(e){var t=function(e){return(e||n.ee).get(\"events\")}(e);if(h[t.debugId]++)return t;h[t.debugId]=1;var r=c(t,!0);function i(e){r.inPlace(e,[g,m],\"-\",o)}function o(e,t){return e[1]}return\"getPrototypeOf\"in Object\u0026\u0026(f.il\u0026\u0026y(document,i),y(f._A,i),y(p.prototype,i)),t.on(g+\"-start\",(function(e,t){var n=e[1];if(null!==n\u0026\u0026(\"function\"==typeof n||\"object\"==typeof n)){var i=(0,l.X)(n,v,(function(){var e={object:function(){if(\"function\"!=typeof n.handleEvent)return;return n.handleEvent.apply(n,arguments)},function:n}[typeof n];return e?r(e,\"fn-\",null,e.name||\"anonymous\"):n}));this.wrapped=e[1]=i}})),t.on(m+\"-start\",(function(e){e[1]=this.wrapped||e[1]})),t}function y(e,t){let r=e;for(;\"object\"==typeof r\u0026\u0026!Object.prototype.hasOwnProperty.call(r,g);)r=Object.getPrototypeOf(r);for(var n=arguments.length,i=new Array(n\u003e2?n-2:0),o=2;o\u003cn;o++)i[o-2]=arguments[o];r\u0026\u0026t(r,...i)}var A=\"fetch-\",w=A+\"body-\",x=[\"arrayBuffer\",\"blob\",\"json\",\"text\",\"formData\"],E=f._A.Request,_=f._A.Response,T=\"prototype\";const S={};function R(e){const t=function(e){return(e||n.ee).get(\"fetch\")}(e);if(!(E\u0026\u0026_\u0026\u0026f._A.fetch))return t;if(S[t.debugId]++)return t;function r(e,r,i){var o=e[r];\"function\"==typeof o\u0026\u0026(e[r]=function(){var e,r=[...arguments],a={};t.emit(i+\"before-start\",[r],a),a[n.A]\u0026\u0026a[n.A].dt\u0026\u0026(e=a[n.A].dt);var s=o.apply(this,r);return t.emit(i+\"start\",[r,e],s),s.then((function(e){return t.emit(i+\"end\",[null,e],s),e}),(function(e){throw t.emit(i+\"end\",[e],s),e}))})}return S[t.debugId]=1,x.forEach((e=\u003e{r(E[T],e,w),r(_[T],e,w)})),r(f._A,\"fetch\",A),t.on(A+\"end\",(function(e,r){var n=this;if(r){var i=r.headers.get(\"content-length\");null!==i\u0026\u0026(n.rxSize=i),t.emit(A+\"done\",[null,r],n)}else t.emit(A+\"done\",[e],n)})),t}const D={},N=[\"pushState\",\"replaceState\"];function O(e){const t=function(e){return(e||n.ee).get(\"history\")}(e);return!f.il||D[t.debugId]++||(D[t.debugId]=1,c(t).inPlace(window.history,N,\"-\")),t}var I=r(3239);const j={},P=[\"appendChild\",\"insertBefore\",\"replaceChild\"];function C(e){const t=function(e){return(e||n.ee).get(\"jsonp\")}(e);if(!f.il||j[t.debugId])return t;j[t.debugId]=!0;var r=c(t),i=/[?\u0026](?:callback|cb)=([^\u0026#]+)/,o=/(.*)\\.([^.]+)/,a=/^(\\w+)(\\.|$)(.*)$/;function s(e,t){if(!e)return t;const r=e.match(a),n=r[1];return s(r[3],t[n])}return r.inPlace(Node.prototype,P,\"dom-\"),t.on(\"dom-start\",(function(e){!function(e){if(!e||\"string\"!=typeof e.nodeName||\"script\"!==e.nodeName.toLowerCase())return;if(\"function\"!=typeof e.addEventListener)return;var n=(a=e.src,c=a.match(i),c?c[1]:null);var a,c;if(!n)return;var u=function(e){var t=e.match(o);if(t\u0026\u0026t.length\u003e=3)return{key:t[2],parent:s(t[1],window)};return{key:e,parent:window}}(n);if(\"function\"!=typeof u.parent[u.key])return;var d={};function l(){t.emit(\"jsonp-end\",[],d),e.removeEventListener(\"load\",l,(0,I.m$)(!1)),e.removeEventListener(\"error\",f,(0,I.m$)(!1))}function f(){t.emit(\"jsonp-error\",[],d),t.emit(\"jsonp-end\",[],d),e.removeEventListener(\"load\",l,(0,I.m$)(!1)),e.removeEventListener(\"error\",f,(0,I.m$)(!1))}r.inPlace(u.parent,[u.key],\"cb-\",d),e.addEventListener(\"load\",l,(0,I.m$)(!1)),e.addEventListener(\"error\",f,(0,I.m$)(!1)),t.emit(\"new-jsonp\",[e.src],d)}(e[0])})),t}const k={};function M(e){const t=function(e){return(e||n.ee).get(\"mutation\")}(e);if(!f.il||k[t.debugId])return t;k[t.debugId]=!0;var r=c(t),i=f._A.MutationObserver;return i\u0026\u0026(window.MutationObserver=function(e){return this instanceof i?new i(r(e,\"fn-\")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype),t}const H={};function L(e){const t=function(e){return(e||n.ee).get(\"promise\")}(e);if(H[t.debugId])return t;H[t.debugId]=!0;var r=t.context,i=c(t),a=f._A.Promise;return a\u0026\u0026function(){function e(r){var n=t.context(),o=i(r,\"executor-\",n,null,!1);const s=Reflect.construct(a,[o],e);return t.context(s).getCtx=function(){return n},s}f._A.Promise=e,Object.defineProperty(e,\"name\",{value:\"Promise\"}),e.toString=function(){return a.toString()},Object.setPrototypeOf(e,a),[\"all\",\"race\"].forEach((function(r){const n=a[r];e[r]=function(e){let i=!1;[...e||[]].forEach((e=\u003e{this.resolve(e).then(a(\"all\"===r),a(!1))}));const o=n.apply(this,arguments);return o;function a(e){return function(){t.emit(\"propagate\",[null,!i],o,!1,!1),i=i||!e}}}})),[\"resolve\",\"reject\"].forEach((function(r){const n=a[r];e[r]=function(e){const r=n.apply(this,arguments);return e!==r\u0026\u0026t.emit(\"propagate\",[e,!0],r,!1,!1),r}})),e.prototype=a.prototype;const n=a.prototype.then;a.prototype.then=function(){var e=this,o=r(e);o.promise=e;for(var a=arguments.length,s=new Array(a),c=0;c\u003ca;c++)s[c]=arguments[c];s[0]=i(s[0],\"cb-\",o,null,!1),s[1]=i(s[1],\"cb-\",o,null,!1);const u=n.apply(this,s);return o.nextPromise=u,t.emit(\"propagate\",[e,!0],u,!1,!1),u},a.prototype.then[o]=n,t.on(\"executor-start\",(function(e){e[0]=i(e[0],\"resolve-\",this,null,!1),e[1]=i(e[1],\"resolve-\",this,null,!1)})),t.on(\"executor-err\",(function(e,t,r){e[1](r)})),t.on(\"cb-end\",(function(e,r,n){t.emit(\"propagate\",[n,!0],this.nextPromise,!1,!1)})),t.on(\"propagate\",(function(e,r,n){this.getCtx\u0026\u0026!r||(this.getCtx=function(){if(e instanceof Promise)var r=t.context(e);return r\u0026\u0026r.getCtx?r.getCtx():this})}))}(),t}const z={},F=\"setTimeout\",B=\"setInterval\",U=\"clearTimeout\",V=\"-start\",q=\"-\",G=[F,\"setImmediate\",B,U,\"clearImmediate\"];function Z(e){const t=function(e){return(e||n.ee).get(\"timer\")}(e);if(z[t.debugId]++)return t;z[t.debugId]=1;var r=c(t);return r.inPlace(f._A,G.slice(0,2),F+q),r.inPlace(f._A,G.slice(2,3),B+q),r.inPlace(f._A,G.slice(3),U+q),t.on(B+V,(function(e,t,n){e[0]=r(e[0],\"fn-\",null,n)})),t.on(F+V,(function(e,t,n){this.method=n,this.timerDuration=isNaN(e[1])?0:+e[1],e[0]=r(e[0],\"fn-\",this,n)})),t}var W=r(50);const X={},K=[\"open\",\"send\"];function Y(e){var t=e||n.ee;const r=function(e){return(e||n.ee).get(\"xhr\")}(t);if(X[r.debugId]++)return r;X[r.debugId]=1,b(t);var i=c(r),o=f._A.XMLHttpRequest,a=f._A.MutationObserver,s=f._A.Promise,u=f._A.setInterval,d=\"readystatechange\",l=[\"onload\",\"onerror\",\"onabort\",\"onloadstart\",\"onloadend\",\"onprogress\",\"ontimeout\"],h=[],p=f._A.XMLHttpRequest=function(e){const t=new o(e),n=r.context(t);try{r.emit(\"new-xhr\",[t],n),t.addEventListener(d,(a=n,function(){var e=this;e.readyState\u003e3\u0026\u0026!a.resolved\u0026\u0026(a.resolved=!0,r.emit(\"xhr-resolved\",[],e)),i.inPlace(e,l,\"fn-\",w)}),(0,I.m$)(!1))}catch(e){(0,W.Z)(\"An error occurred while intercepting XHR\",e);try{r.emit(\"internal-error\",[e])}catch(e){}}var a;return t};function g(e,t){i.inPlace(t,[\"onreadystatechange\"],\"fn-\",w)}if(function(e,t){for(var r in e)t[r]=e[r]}(o,p),p.prototype=o.prototype,i.inPlace(p.prototype,K,\"-xhr-\",w),r.on(\"send-xhr-start\",(function(e,t){g(e,t),function(e){h.push(e),a\u0026\u0026(m?m.then(A):u?u(A):(v=-v,y.data=v))}(t)})),r.on(\"open-xhr-start\",g),a){var m=s\u0026\u0026s.resolve();if(!u\u0026\u0026!s){var v=1,y=document.createTextNode(v);new a(A).observe(y,{characterData:!0})}}else t.on(\"fn-end\",(function(e){e[0]\u0026\u0026e[0].type===d||A()}));function A(){for(var e=0;e\u003ch.length;e++)g(0,h[e]);h.length\u0026\u0026(h=[])}function w(e,t){return t}return r}},7825:(e,t,r)=\u003e{\"use strict\";r.d(t,{t:()=\u003en});const n=r(3325).D.ajax},6660:(e,t,r)=\u003e{\"use strict\";r.d(t,{t:()=\u003en});const n=r(3325).D.jserrors},3081:(e,t,r)=\u003e{\"use strict\";r.d(t,{gF:()=\u003eo,mY:()=\u003ei,t9:()=\u003en,vz:()=\u003es,xS:()=\u003ea});const n=r(3325).D.metrics,i=\"sm\",o=\"cm\",a=\"storeSupportabilityMetrics\",s=\"storeEventMetrics\"},4649:(e,t,r)=\u003e{\"use strict\";r.d(t,{t:()=\u003en});const n=r(3325).D.pageAction},7633:(e,t,r)=\u003e{\"use strict\";r.d(t,{t:()=\u003en});const n=r(3325).D.pageViewEvent},9251:(e,t,r)=\u003e{\"use strict\";r.d(t,{t:()=\u003en});const n=r(3325).D.pageViewTiming},7144:(e,t,r)=\u003e{\"use strict\";r.d(t,{J0:()=\u003el,Mi:()=\u003ed,Vb:()=\u003eo,Ye:()=\u003es,fm:()=\u003ec,i9:()=\u003ea,t9:()=\u003ei,u0:()=\u003eu});var n=r(7056);const i=r(3325).D.sessionReplay,o=.12,a={DomContentLoaded:0,Load:1,FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Custom:5},s=1e6,c=64e3,u={[n.IK.ERROR]:15e3,[n.IK.FULL]:3e5,[n.IK.OFF]:0},d={RESET:{message:\"Session was reset\",sm:\"Reset\"},IMPORT:{message:\"Recorder failed to import\",sm:\"Import\"},TOO_MANY:{message:\"429: Too Many Requests\",sm:\"Too-Many\"},TOO_BIG:{message:\"Payload was too large\",sm:\"Too-Big\"},CROSS_TAB:{message:\"Session Entity was set to OFF on another tab\",sm:\"Cross-Tab\"},ENTITLEMENTS:{message:\"Session Replay is not allowed and will not be started\",sm:\"Entitlement\"}},l=5e3},3614:(e,t,r)=\u003e{\"use strict\";r.d(t,{BST_RESOURCE:()=\u003ei,END:()=\u003es,FEATURE_NAME:()=\u003en,FN_END:()=\u003eu,FN_START:()=\u003ec,PUSH_STATE:()=\u003ed,RESOURCE:()=\u003eo,START:()=\u003ea});const n=r(3325).D.sessionTrace,i=\"bstResource\",o=\"resource\",a=\"-start\",s=\"-end\",c=\"fn\"+a,u=\"fn\"+s,d=\"pushState\"},7836:(e,t,r)=\u003e{\"use strict\";r.d(t,{BODY:()=\u003ex,CB_END:()=\u003eE,CB_START:()=\u003eu,END:()=\u003ew,FEATURE_NAME:()=\u003ei,FETCH:()=\u003eT,FETCH_BODY:()=\u003ev,FETCH_DONE:()=\u003em,FETCH_START:()=\u003eg,FN_END:()=\u003ec,FN_START:()=\u003es,INTERACTION:()=\u003ef,INTERACTION_API:()=\u003ed,INTERACTION_EVENTS:()=\u003eo,JSONP_END:()=\u003eb,JSONP_NODE:()=\u003ep,JS_TIME:()=\u003e_,MAX_TIMER_BUDGET:()=\u003ea,REMAINING:()=\u003el,SPA_NODE:()=\u003eh,START:()=\u003eA,originalSetTimeout:()=\u003ey});var n=r(234);const i=r(3325).D.spa,o=[\"click\",\"submit\",\"keypress\",\"keydown\",\"keyup\",\"change\"],a=999,s=\"fn-start\",c=\"fn-end\",u=\"cb-start\",d=\"api-ixn-\",l=\"remaining\",f=\"interaction\",h=\"spaNode\",p=\"jsonpNode\",g=\"fetch-start\",m=\"fetch-done\",v=\"fetch-body-\",b=\"jsonp-end\",y=n.Yu.ST,A=\"-start\",w=\"-end\",x=\"-body\",E=\"cb\"+w,_=\"jsTime\",T=\"fetch\"},5938:(e,t,r)=\u003e{\"use strict\";r.d(t,{W:()=\u003ei});var n=r(8325);class i{constructor(e,t,r){this.agentIdentifier=e,this.aggregator=t,this.ee=n.ee.get(e),this.featureName=r,this.blocked=!1}}},7530:(e,t,r)=\u003e{\"use strict\";r.d(t,{j:()=\u003eb});var n=r(3325),i=r(234),o=r(5546),a=r(8325),s=r(7894),c=r(8e3),u=r(3960),d=r(385),l=r(50),f=r(3081),h=r(8632);function p(){const e=(0,h.gG)();[\"setErrorHandler\",\"finished\",\"addToTrace\",\"addRelease\",\"addPageAction\",\"setCurrentRouteName\",\"setPageViewName\",\"setCustomAttribute\",\"interaction\",\"noticeError\",\"setUserId\",\"setApplicationVersion\",\"start\",\"recordReplay\",\"pauseReplay\"].forEach((t=\u003e{e[t]=function(){for(var r=arguments.length,n=new Array(r),i=0;i\u003cr;i++)n[i]=arguments[i];return function(t){for(var r=arguments.length,n=new Array(r\u003e1?r-1:0),i=1;i\u003cr;i++)n[i-1]=arguments[i];let o=[];return Object.values(e.initializedAgents).forEach((e=\u003e{e.exposed\u0026\u0026e.api[t]\u0026\u0026o.push(e.api[t](...n))})),o.length\u003e1?o:o[0]}(t,...n)}}))}var g=r(2825);const m=e=\u003e{const t=e.startsWith(\"http\");e+=\"/\",r.p=t?e:\"https://\"+e};let v=!1;function b(e){let t=arguments.length\u003e1\u0026\u0026void 0!==arguments[1]?arguments[1]:{},b=arguments.length\u003e2?arguments[2]:void 0,y=arguments.length\u003e3?arguments[3]:void 0,{init:A,info:w,loader_config:x,runtime:E={loaderType:b},exposed:_=!0}=t;const T=(0,h.gG)();w||(A=T.init,w=T.info,x=T.loader_config),(0,i.Dg)(e.agentIdentifier,A||{}),(0,i.GE)(e.agentIdentifier,x||{}),w.jsAttributes??={},d.v6\u0026\u0026(w.jsAttributes.isWorker=!0),(0,i.CX)(e.agentIdentifier,w);const S=(0,i.P_)(e.agentIdentifier),R=[w.beacon,w.errorBeacon];v||(S.proxy.assets\u0026\u0026(m(S.proxy.assets),R.push(S.proxy.assets)),S.proxy.beacon\u0026\u0026R.push(S.proxy.beacon),p(),(0,h.EZ)(\"activatedFeatures\",g.T)),E.denyList=[...S.ajax.deny_list||[],...S.ajax.block_internal?R:[]],(0,i.sU)(e.agentIdentifier,E),void 0===e.api\u0026\u0026(e.api=function(e,t){t||(0,c.R)(e,\"api\");const h={};var p=a.ee.get(e),g=p.get(\"tracer\"),m=\"api-\",v=m+\"ixn-\";function b(t,r,n,o){const a=(0,i.C5)(e);return null===r?delete a.jsAttributes[t]:(0,i.CX)(e,{...a,jsAttributes:{...a.jsAttributes,[t]:r}}),w(m,n,!0,o||null===r?\"session\":void 0)(t,r)}function y(){}[\"setErrorHandler\",\"finished\",\"addToTrace\",\"addRelease\"].forEach((e=\u003e{h[e]=w(m,e,!0,\"api\")})),h.addPageAction=w(m,\"addPageAction\",!0,n.D.pageAction),h.setCurrentRouteName=w(m,\"routeName\",!0,n.D.spa),h.setPageViewName=function(t,r){if(\"string\"==typeof t)return\"/\"!==t.charAt(0)\u0026\u0026(t=\"/\"+t),(0,i.OP)(e).customTransaction=(r||\"http://custom.transaction\")+t,w(m,\"setPageViewName\",!0)()},h.setCustomAttribute=function(e,t){let r=arguments.length\u003e2\u0026\u0026void 0!==arguments[2]\u0026\u0026arguments[2];if(\"string\"==typeof e){if([\"string\",\"number\",\"boolean\"].includes(typeof t)||null===t)return b(e,t,\"setCustomAttribute\",r);(0,l.Z)(\"Failed to execute setCustomAttribute.\\nNon-null value must be a string, number or boolean type, but a type of \u003c\".concat(typeof t,\"\u003e was provided.\"))}else(0,l.Z)(\"Failed to execute setCustomAttribute.\\nName must be a string type, but a type of \u003c\".concat(typeof e,\"\u003e was provided.\"))},h.setUserId=function(e){if(\"string\"==typeof e||null===e)return b(\"enduser.id\",e,\"setUserId\",!0);(0,l.Z)(\"Failed to execute setUserId.\\nNon-null value must be a string type, but a type of \u003c\".concat(typeof e,\"\u003e was provided.\"))},h.setApplicationVersion=function(e){if(\"string\"==typeof e||null===e)return b(\"application.version\",e,\"setApplicationVersion\",!1);(0,l.Z)(\"Failed to execute setApplicationVersion. Expected \u003cString | null\u003e, but got \u003c\".concat(typeof e,\"\u003e.\"))},h.start=e=\u003e{try{const t=e?\"defined\":\"undefined\";(0,o.p)(f.xS,[\"API/start/\".concat(t,\"/called\")],void 0,n.D.metrics,p);const r=Object.values(n.D);if(void 0===e)e=r;else{if((e=Array.isArray(e)\u0026\u0026e.length?e:[e]).some((e=\u003e!r.includes(e))))return(0,l.Z)(\"Invalid feature name supplied. Acceptable feature names are: \".concat(r));e.includes(n.D.pageViewEvent)||e.push(n.D.pageViewEvent)}e.forEach((e=\u003e{p.emit(\"\".concat(e,\"-opt-in\"))}))}catch(e){(0,l.Z)(\"An unexpected issue occurred\",e)}},h.recordReplay=function(){(0,o.p)(f.xS,[\"API/recordReplay/called\"],void 0,n.D.metrics,p),(0,o.p)(\"recordReplay\",[],void 0,n.D.sessionReplay,p)},h.pauseReplay=function(){(0,o.p)(f.xS,[\"API/pauseReplay/called\"],void 0,n.D.metrics,p),(0,o.p)(\"pauseReplay\",[],void 0,n.D.sessionReplay,p)},h.interaction=function(){return(new y).get()};var A=y.prototype={createTracer:function(e,t){var r={},i=this,a=\"function\"==typeof t;return(0,o.p)(f.xS,[\"API/createTracer/called\"],void 0,n.D.metrics,p),(0,o.p)(v+\"tracer\",[(0,s.z)(),e,r],i,n.D.spa,p),function(){if(g.emit((a?\"\":\"no-\")+\"fn-start\",[(0,s.z)(),i,a],r),a)try{return t.apply(this,arguments)}catch(e){throw g.emit(\"fn-err\",[arguments,this,e],r),e}finally{g.emit(\"fn-end\",[(0,s.z)()],r)}}}};function w(e,t,r,i){return function(){return(0,o.p)(f.xS,[\"API/\"+t+\"/called\"],void 0,n.D.metrics,p),i\u0026\u0026(0,o.p)(e+t,[(0,s.z)(),...arguments],r?null:this,i,p),r?void 0:this}}function x(){r.e(111).then(r.bind(r,7438)).then((t=\u003e{let{setAPI:r}=t;r(e),(0,c.L)(e,\"api\")})).catch((()=\u003e(0,l.Z)(\"Downloading runtime APIs failed...\")))}return[\"actionText\",\"setName\",\"setAttribute\",\"save\",\"ignore\",\"onEnd\",\"getContext\",\"end\",\"get\"].forEach((e=\u003e{A[e]=w(v,e,void 0,n.D.spa)})),h.noticeError=function(e,t){\"string\"==typeof e\u0026\u0026(e=new Error(e)),(0,o.p)(f.xS,[\"API/noticeError/called\"],void 0,n.D.metrics,p),(0,o.p)(\"err\",[e,(0,s.z)(),!1,t],void 0,n.D.jserrors,p)},d.il?(0,u.b2)((()=\u003ex()),!0):x(),h}(e.agentIdentifier,y)),void 0===e.exposed\u0026\u0026(e.exposed=_),v=!0}},1926:(e,t,r)=\u003e{r.nc=(()=\u003e{try{return document?.currentScript?.nonce}catch(e){}return\"\"})()},3325:(e,t,r)=\u003e{\"use strict\";r.d(t,{D:()=\u003en,p:()=\u003ei});const n={ajax:\"ajax\",jserrors:\"jserrors\",metrics:\"metrics\",pageAction:\"page_action\",pageViewEvent:\"page_view_event\",pageViewTiming:\"page_view_timing\",sessionReplay:\"session_replay\",sessionTrace:\"session_trace\",spa:\"spa\"},i={[n.pageViewEvent]:1,[n.pageViewTiming]:2,[n.metrics]:3,[n.jserrors]:4,[n.ajax]:5,[n.sessionTrace]:6,[n.pageAction]:7,[n.spa]:8,[n.sessionReplay]:9}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e](o,o.exports,i),o.exports}i.m=r,i.d=(e,t)=\u003e{for(var r in t)i.o(t,r)\u0026\u0026!i.o(e,r)\u0026\u0026Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=\u003ePromise.all(Object.keys(i.f).reduce(((t,r)=\u003e(i.f[r](e,t),t)),[])),i.u=e=\u003e({111:\"nr-spa\",164:\"nr-spa-compressor\",433:\"nr-spa-recorder\"}[e]+\"-1.251.1.min.js\"),i.o=(e,t)=\u003eObject.prototype.hasOwnProperty.call(e,t),e={},t=\"NRBA-1.251.1.PROD:\",i.l=(r,n,o,a)=\u003e{if(e[r])e[r].push(n);else{var s,c;if(void 0!==o)for(var u=document.getElementsByTagName(\"script\"),d=0;d\u003cu.length;d++){var l=u[d];if(l.getAttribute(\"src\")==r||l.getAttribute(\"data-webpack\")==t+o){s=l;break}}if(!s){c=!0;var f={111:\"sha512-lCY4+B0gOT0jVtMbaDU0ri7coukTGr4YSIrFnYCbNcvlKoBWZ5lEMC3pnQbfFRHmqU9ClOHO1zeM7zl3Bpi8lg==\",433:\"sha512-uSk6ex6Q5btbEC3Fd9ucXsXT/MfYs9nSwrApEySzfsKG5WHfu74lzjBZOw2ou+AfTHUFLXX7zUhG8T18KvZDQQ==\",164:\"sha512-69slZTW/5YZ/pY5zE0I3TCiV/tXwxGlT/pOzl7BgweR1maJ+C+doWoTbPHgKP1SrTS/0sZHb5fgMScLDwVDkqw==\"};(s=document.createElement(\"script\")).charset=\"utf-8\",s.timeout=120,i.nc\u0026\u0026s.setAttribute(\"nonce\",i.nc),s.setAttribute(\"data-webpack\",t+o),s.src=r,0!==s.src.indexOf(window.location.origin+\"/\")\u0026\u0026(s.crossOrigin=\"anonymous\"),f[a]\u0026\u0026(s.integrity=f[a])}e[r]=[n];var h=(t,n)=\u003e{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode\u0026\u0026s.parentNode.removeChild(s),i\u0026\u0026i.forEach((e=\u003ee(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:\"timeout\",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c\u0026\u0026document.head.appendChild(s)}},i.r=e=\u003e{\"undefined\"!=typeof Symbol\u0026\u0026Symbol.toStringTag\u0026\u0026Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.p=\"https://js-agent.newrelic.com/\",(()=\u003e{var e={801:0,92:0};i.f.j=(t,r)=\u003e{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,i)=\u003en=e[t]=[r,i]));r.push(n[2]=o);var a=i.p+i.u(t),s=new Error;i.l(a,(r=\u003e{if(i.o(e,t)\u0026\u0026(0!==(n=e[t])\u0026\u0026(e[t]=void 0),n)){var o=r\u0026\u0026(\"load\"===r.type?\"missing\":r.type),a=r\u0026\u0026r.target\u0026\u0026r.target.src;s.message=\"Loading chunk \"+t+\" failed.\\n(\"+o+\": \"+a+\")\",s.name=\"ChunkLoadError\",s.type=o,s.request=a,n[1](s)}}),\"chunk-\"+t,t)}};var t=(t,r)=\u003e{var n,o,[a,s,c]=r,u=0;if(a.some((t=\u003e0!==e[t]))){for(n in s)i.o(s,n)\u0026\u0026(i.m[n]=s[n]);if(c)c(i)}for(t\u0026\u0026t(r);u\u003ca.length;u++)o=a[u],i.o(e,o)\u0026\u0026e[o]\u0026\u0026e[o][0](),e[o]=0},r=self[\"webpackChunk:NRBA-1.251.1.PROD\"]=self[\"webpackChunk:NRBA-1.251.1.PROD\"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=\u003e{\"use strict\";i(1926);var e=i(50);class t{#e(t){for(var r=arguments.length,n=new Array(r\u003e1?r-1:0),i=1;i\u003cr;i++)n[i-1]=arguments[i];if(\"function\"==typeof this.api?.[t])return this.api[t](...n);(0,e.Z)(\"Call to agent api \".concat(t,\" failed. The API is not currently initialized.\"))}addPageAction(e,t){return this.#e(\"addPageAction\",e,t)}setPageViewName(e,t){return this.#e(\"setPageViewName\",e,t)}setCustomAttribute(e,t,r){return this.#e(\"setCustomAttribute\",e,t,r)}noticeError(e,t){return this.#e(\"noticeError\",e,t)}setUserId(e){return this.#e(\"setUserId\",e)}setApplicationVersion(e){return this.#e(\"setApplicationVersion\",e)}setErrorHandler(e){return this.#e(\"setErrorHandler\",e)}finished(e){return this.#e(\"finished\",e)}addRelease(e,t){return this.#e(\"addRelease\",e,t)}start(e){return this.#e(\"start\",e)}recordReplay(){return this.#e(\"recordReplay\")}pauseReplay(){return this.#e(\"pauseReplay\")}addToTrace(e){return this.#e(\"addToTrace\",e)}setCurrentRouteName(e){return this.#e(\"setCurrentRouteName\",e)}interaction(){return this.#e(\"interaction\")}}var r=i(3325),n=i(234);const o=Object.values(r.D);function a(e){const t={};return o.forEach((r=\u003e{t[r]=function(e,t){return!1!==(0,n.Mt)(t,\"\".concat(e,\".enabled\"))}(r,e)})),t}var s=i(7530);var c=i(8e3),u=i(5938),d=i(3960),l=i(385);class f extends u.W{constructor(e,t,r){let i=!(arguments.length\u003e3\u0026\u0026void 0!==arguments[3])||arguments[3];super(e,t,r),this.auto=i,this.abortHandler=void 0,this.featAggregate=void 0,this.onAggregateImported=void 0,!1===(0,n.Mt)(this.agentIdentifier,\"\".concat(this.featureName,\".autoStart\"))\u0026\u0026(this.auto=!1),this.auto\u0026\u0026(0,c.R)(e,r)}importAggregator(){let t=arguments.length\u003e0\u0026\u0026void 0!==arguments[0]?arguments[0]:{};if(this.featAggregate)return;if(!this.auto)return void this.ee.on(\"\".concat(this.featureName,\"-opt-in\"),(()=\u003e{(0,c.R)(this.agentIdentifier,this.featureName),this.auto=!0,this.importAggregator()}));const r=l.il\u0026\u0026!0===(0,n.Mt)(this.agentIdentifier,\"privacy.cookies_enabled\");let o;this.onAggregateImported=new Promise((e=\u003e{o=e}));const a=async()=\u003e{let n;try{if(r){const{setupAgentSession:e}=await i.e(111).then(i.bind(i,1656));n=e(this.agentIdentifier)}}catch(t){(0,e.Z)(\"A problem occurred when starting up session manager. This page will not start or extend any session.\",t)}try{if(!this.shouldImportAgg(this.featureName,n))return(0,c.L)(this.agentIdentifier,this.featureName),void o(!1);const{lazyFeatureLoader:e}=await i.e(111).then(i.bind(i,8582)),{Aggregate:r}=await e(this.featureName,\"aggregate\");this.featAggregate=new r(this.agentIdentifier,this.aggregator,t),o(!0)}catch(t){(0,e.Z)(\"Downloading and initializing \".concat(this.featureName,\" failed...\"),t),this.abortHandler?.(),(0,c.L)(this.agentIdentifier,this.featureName),o(!1)}};l.il?(0,d.b2)((()=\u003ea()),!0):a()}shouldImportAgg(e,t){return e!==r.D.sessionReplay||!!n.Yu.MO\u0026\u0026(!1!==(0,n.Mt)(this.agentIdentifier,\"session_trace.enabled\")\u0026\u0026(!!t?.isNew||!!t?.state.sessionReplayMode))}}var h=i(7633);class p extends f{static featureName=h.t;constructor(e,t){let r=!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2];super(e,t,h.t,r),this.importAggregator()}}var g=i(1117),m=i(1284);class v extends g.w{constructor(e){super(e),this.aggregatedData={}}store(e,t,r,n,i){var o=this.getBucket(e,t,r,i);return o.metrics=function(e,t){t||(t={count:0});return t.count+=1,(0,m.D)(e,(function(e,r){t[e]=b(r,t[e])})),t}(n,o.metrics),o}merge(e,t,r,n,i){var o=this.getBucket(e,t,n,i);if(o.metrics){var a=o.metrics;a.count+=r.count,(0,m.D)(r,(function(e,t){if(\"count\"!==e){var n=a[e],i=r[e];i\u0026\u0026!i.c?a[e]=b(i.t,n):a[e]=function(e,t){if(!t)return e;t.c||(t=y(t.t));return t.min=Math.min(e.min,t.min),t.max=Math.max(e.max,t.max),t.t+=e.t,t.sos+=e.sos,t.c+=e.c,t}(i,a[e])}}))}else o.metrics=r}storeMetric(e,t,r,n){var i=this.getBucket(e,t,r);return i.stats=b(n,i.stats),i}getBucket(e,t,r,n){this.aggregatedData[e]||(this.aggregatedData[e]={});var i=this.aggregatedData[e][t];return i||(i=this.aggregatedData[e][t]={params:r||{}},n\u0026\u0026(i.custom=n)),i}get(e,t){return t?this.aggregatedData[e]\u0026\u0026this.aggregatedData[e][t]:this.aggregatedData[e]}take(e){for(var t={},r=\"\",n=!1,i=0;i\u003ce.length;i++)t[r=e[i]]=A(this.aggregatedData[r]),t[r].length\u0026\u0026(n=!0),delete this.aggregatedData[r];return n?t:null}}function b(e,t){return null==e?function(e){e?e.c++:e={c:1};return e}(t):t?(t.c||(t=y(t.t)),t.c+=1,t.t+=e,t.sos+=e*e,e\u003et.max\u0026\u0026(t.max=e),e\u003ct.min\u0026\u0026(t.min=e),t):{t:e}}function y(e){return{t:e,min:e,max:e,sos:e*e,c:1}}function A(e){return\"object\"!=typeof e?[]:(0,m.D)(e,w)}function w(e,t){return t}var x=i(8632),E=i(4402),_=i(4351);var T=i(5546),S=i(7956),R=i(3239),D=i(7894),N=i(9251);class O extends f{static featureName=N.t;constructor(e,t){let r=!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2];super(e,t,N.t,r),l.il\u0026\u0026((0,S.N)((()=\u003e(0,T.p)(\"docHidden\",[(0,D.z)()],void 0,N.t,this.ee)),!0),(0,R.bP)(\"pagehide\",(()=\u003e(0,T.p)(\"winPagehide\",[(0,D.z)()],void 0,N.t,this.ee))),this.importAggregator())}}var I=i(3081);class j extends f{static featureName=I.t9;constructor(e,t){let r=!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2];super(e,t,I.t9,r),this.importAggregator()}}var P=i(6660);class C{constructor(e,t,r,n){this.name=\"UncaughtError\",this.message=e,this.sourceURL=t,this.line=r,this.column=n}}class k extends f{static featureName=P.t;#t=new Set;constructor(e,t){let n=!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2];super(e,t,P.t,n);try{this.removeOnAbort=new AbortController}catch(e){}this.ee.on(\"fn-err\",((e,t,n)=\u003e{this.abortHandler\u0026\u0026!this.#t.has(n)\u0026\u0026(this.#t.add(n),(0,T.p)(\"err\",[this.#r(n),(0,D.z)()],void 0,r.D.jserrors,this.ee))})),this.ee.on(\"internal-error\",(e=\u003e{this.abortHandler\u0026\u0026(0,T.p)(\"ierr\",[this.#r(e),(0,D.z)(),!0],void 0,r.D.jserrors,this.ee)})),l._A.addEventListener(\"unhandledrejection\",(e=\u003e{this.abortHandler\u0026\u0026(0,T.p)(\"err\",[this.#n(e),(0,D.z)(),!1,{unhandledPromiseRejection:1}],void 0,r.D.jserrors,this.ee)}),(0,R.m$)(!1,this.removeOnAbort?.signal)),l._A.addEventListener(\"error\",(e=\u003e{this.abortHandler\u0026\u0026(this.#t.has(e.error)?this.#t.delete(e.error):(0,T.p)(\"err\",[this.#i(e),(0,D.z)()],void 0,r.D.jserrors,this.ee))}),(0,R.m$)(!1,this.removeOnAbort?.signal)),this.abortHandler=this.#o,this.importAggregator()}#o(){this.removeOnAbort?.abort(),this.#t.clear(),this.abortHandler=void 0}#r(e){return e instanceof Error?e:void 0!==e?.message?new C(e.message,e.filename||e.sourceURL,e.lineno||e.line,e.colno||e.col):new C(\"string\"==typeof e?e:(0,_.P)(e))}#n(e){let t=\"Unhandled Promise Rejection: \";if(e?.reason instanceof Error)try{return e.reason.message=t+e.reason.message,e.reason}catch(t){return e.reason}if(void 0===e.reason)return new C(t);const r=this.#r(e.reason);return r.message=t+r.message,r}#i(e){return e.error instanceof Error?e.error:new C(e.message,e.filename,e.lineno,e.colno)}}var M=i(2210);let H=1;const L=\"nr@id\";function z(e){const t=typeof e;return!e||\"object\"!==t\u0026\u0026\"function\"!==t?-1:e===l._A?0:(0,M.X)(e,L,(function(){return H++}))}function F(e){if(\"string\"==typeof e\u0026\u0026e.length)return e.length;if(\"object\"==typeof e){if(\"undefined\"!=typeof ArrayBuffer\u0026\u0026e instanceof ArrayBuffer\u0026\u0026e.byteLength)return e.byteLength;if(\"undefined\"!=typeof Blob\u0026\u0026e instanceof Blob\u0026\u0026e.size)return e.size;if(!(\"undefined\"!=typeof FormData\u0026\u0026e instanceof FormData))try{return(0,_.P)(e).length}catch(e){return}}}var B=i(1214),U=i(7243);class V{constructor(e){this.agentIdentifier=e}generateTracePayload(e){if(!this.shouldGenerateTrace(e))return null;var t=(0,n.DL)(this.agentIdentifier);if(!t)return null;var r=(t.accountID||\"\").toString()||null,i=(t.agentID||\"\").toString()||null,o=(t.trustKey||\"\").toString()||null;if(!r||!i)return null;var a=(0,E.M)(),s=(0,E.Ht)(),c=Date.now(),u={spanId:a,traceId:s,timestamp:c};return(e.sameOrigin||this.isAllowedOrigin(e)\u0026\u0026this.useTraceContextHeadersForCors())\u0026\u0026(u.traceContextParentHeader=this.generateTraceContextParentHeader(a,s),u.traceContextStateHeader=this.generateTraceContextStateHeader(a,c,r,i,o)),(e.sameOrigin\u0026\u0026!this.excludeNewrelicHeader()||!e.sameOrigin\u0026\u0026this.isAllowedOrigin(e)\u0026\u0026this.useNewrelicHeaderForCors())\u0026\u0026(u.newrelicHeader=this.generateTraceHeader(a,s,c,r,i,o)),u}generateTraceContextParentHeader(e,t){return\"00-\"+t+\"-\"+e+\"-01\"}generateTraceContextStateHeader(e,t,r,n,i){return i+\"@nr=0-1-\"+r+\"-\"+n+\"-\"+e+\"----\"+t}generateTraceHeader(e,t,r,n,i,o){if(!(\"function\"==typeof l._A?.btoa))return null;var a={v:[0,1],d:{ty:\"Browser\",ac:n,ap:i,id:e,tr:t,ti:r}};return o\u0026\u0026n!==o\u0026\u0026(a.d.tk=o),btoa((0,_.P)(a))}shouldGenerateTrace(e){return this.isDtEnabled()\u0026\u0026this.isAllowedOrigin(e)}isAllowedOrigin(e){var t=!1,r={};if((0,n.Mt)(this.agentIdentifier,\"distributed_tracing\")\u0026\u0026(r=(0,n.P_)(this.agentIdentifier).distributed_tracing),e.sameOrigin)t=!0;else if(r.allowed_origins instanceof Array)for(var i=0;i\u003cr.allowed_origins.length;i++){var o=(0,U.e)(r.allowed_origins[i]);if(e.hostname===o.hostname\u0026\u0026e.protocol===o.protocol\u0026\u0026e.port===o.port){t=!0;break}}return t}isDtEnabled(){var e=(0,n.Mt)(this.agentIdentifier,\"distributed_tracing\");return!!e\u0026\u0026!!e.enabled}excludeNewrelicHeader(){var e=(0,n.Mt)(this.agentIdentifier,\"distributed_tracing\");return!!e\u0026\u0026!!e.exclude_newrelic_header}useNewrelicHeaderForCors(){var e=(0,n.Mt)(this.agentIdentifier,\"distributed_tracing\");return!!e\u0026\u0026!1!==e.cors_use_newrelic_header}useTraceContextHeadersForCors(){var e=(0,n.Mt)(this.agentIdentifier,\"distributed_tracing\");return!!e\u0026\u0026!!e.cors_use_tracecontext_headers}}var q=i(7825),G=[\"load\",\"error\",\"abort\",\"timeout\"],Z=G.length,W=n.Yu.REQ,X=n.Yu.XHR;class K extends f{static featureName=q.t;constructor(e,t){let i=!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2];if(super(e,t,q.t,i),(0,n.OP)(e).xhrWrappable){this.dt=new V(e),this.handler=(e,t,r,n)=\u003e(0,T.p)(e,t,r,n,this.ee);try{const e={xmlhttprequest:\"xhr\",fetch:\"fetch\",beacon:\"beacon\"};l._A?.performance?.getEntriesByType(\"resource\").forEach((t=\u003e{if(t.initiatorType in e\u0026\u00260!==t.responseStatus){const n={status:t.responseStatus},i={rxSize:t.transferSize,duration:Math.floor(t.duration),cbTime:0};Y(n,t.name),this.handler(\"xhr\",[n,i,t.startTime,t.responseEnd,e[t.initiatorType]],void 0,r.D.ajax)}}))}catch(e){}(0,B.u5)(this.ee),(0,B.Kf)(this.ee),function(e,t,i,o){function a(e){var t=this;t.totalCbs=0,t.called=0,t.cbTime=0,t.end=x,t.ended=!1,t.xhrGuids={},t.lastSize=null,t.loadCaptureCalled=!1,t.params=this.params||{},t.metrics=this.metrics||{},e.addEventListener(\"load\",(function(r){E(t,e)}),(0,R.m$)(!1)),l.IF||e.addEventListener(\"progress\",(function(e){t.lastSize=e.loaded}),(0,R.m$)(!1))}function s(e){this.params={method:e[0]},Y(this,e[1]),this.metrics={}}function c(t,r){var i=(0,n.DL)(e);i.xpid\u0026\u0026this.sameOrigin\u0026\u0026r.setRequestHeader(\"X-NewRelic-ID\",i.xpid);var a=o.generateTracePayload(this.parsedOrigin);if(a){var s=!1;a.newrelicHeader\u0026\u0026(r.setRequestHeader(\"newrelic\",a.newrelicHeader),s=!0),a.traceContextParentHeader\u0026\u0026(r.setRequestHeader(\"traceparent\",a.traceContextParentHeader),a.traceContextStateHeader\u0026\u0026r.setRequestHeader(\"tracestate\",a.traceContextStateHeader),s=!0),s\u0026\u0026(this.dt=a)}}function u(e,r){var n=this.metrics,i=e[0],o=this;if(n\u0026\u0026i){var a=F(i);a\u0026\u0026(n.txSize=a)}this.startTime=(0,D.z)(),this.body=i,this.listener=function(e){try{\"abort\"!==e.type||o.loadCaptureCalled||(o.params.aborted=!0),(\"load\"!==e.type||o.called===o.totalCbs\u0026\u0026(o.onloadCalled||\"function\"!=typeof r.onload)\u0026\u0026\"function\"==typeof o.end)\u0026\u0026o.end(r)}catch(e){try{t.emit(\"internal-error\",[e])}catch(e){}}};for(var s=0;s\u003cZ;s++)r.addEventListener(G[s],this.listener,(0,R.m$)(!1))}function d(e,t,r){this.cbTime+=e,t?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled\u0026\u0026\"function\"==typeof r.onload||\"function\"!=typeof this.end||this.end(r)}function f(e,t){var r=\"\"+z(e)+!!t;this.xhrGuids\u0026\u0026!this.xhrGuids[r]\u0026\u0026(this.xhrGuids[r]=!0,this.totalCbs+=1)}function h(e,t){var r=\"\"+z(e)+!!t;this.xhrGuids\u0026\u0026this.xhrGuids[r]\u0026\u0026(delete this.xhrGuids[r],this.totalCbs-=1)}function p(){this.endTime=(0,D.z)()}function g(e,r){r instanceof X\u0026\u0026\"load\"===e[0]\u0026\u0026t.emit(\"xhr-load-added\",[e[1],e[2]],r)}function m(e,r){r instanceof X\u0026\u0026\"load\"===e[0]\u0026\u0026t.emit(\"xhr-load-removed\",[e[1],e[2]],r)}function v(e,t,r){t instanceof X\u0026\u0026(\"onload\"===r\u0026\u0026(this.onload=!0),(\"load\"===(e[0]\u0026\u0026e[0].type)||this.onload)\u0026\u0026(this.xhrCbStart=(0,D.z)()))}function b(e,r){this.xhrCbStart\u0026\u0026t.emit(\"xhr-cb-time\",[(0,D.z)()-this.xhrCbStart,this.onload,r],r)}function y(e){var t,r=e[1]||{};if(\"string\"==typeof e[0]?0===(t=e[0]).length\u0026\u0026l.il\u0026\u0026(t=\"\"+l._A.location.href):e[0]\u0026\u0026e[0].url?t=e[0].url:l._A?.URL\u0026\u0026e[0]\u0026\u0026e[0]instanceof URL?t=e[0].href:\"function\"==typeof e[0].toString\u0026\u0026(t=e[0].toString()),\"string\"==typeof t\u0026\u00260!==t.length){t\u0026\u0026(this.parsedOrigin=(0,U.e)(t),this.sameOrigin=this.parsedOrigin.sameOrigin);var n=o.generateTracePayload(this.parsedOrigin);if(n\u0026\u0026(n.newrelicHeader||n.traceContextParentHeader))if(e[0]\u0026\u0026e[0].headers)s(e[0].headers,n)\u0026\u0026(this.dt=n);else{var i={};for(var a in r)i[a]=r[a];i.headers=new Headers(r.headers||{}),s(i.headers,n)\u0026\u0026(this.dt=n),e.length\u003e1?e[1]=i:e.push(i)}}function s(e,t){var r=!1;return t.newrelicHeader\u0026\u0026(e.set(\"newrelic\",t.newrelicHeader),r=!0),t.traceContextParentHeader\u0026\u0026(e.set(\"traceparent\",t.traceContextParentHeader),t.traceContextStateHeader\u0026\u0026e.set(\"tracestate\",t.traceContextStateHeader),r=!0),r}}function A(e,t){this.params={},this.metrics={},this.startTime=(0,D.z)(),this.dt=t,e.length\u003e=1\u0026\u0026(this.target=e[0]),e.length\u003e=2\u0026\u0026(this.opts=e[1]);var r,n=this.opts||{},i=this.target;\"string\"==typeof i?r=i:\"object\"==typeof i\u0026\u0026i instanceof W?r=i.url:l._A?.URL\u0026\u0026\"object\"==typeof i\u0026\u0026i instanceof URL\u0026\u0026(r=i.href),Y(this,r);var o=(\"\"+(i\u0026\u0026i instanceof W\u0026\u0026i.method||n.method||\"GET\")).toUpperCase();this.params.method=o,this.body=n.body,this.txSize=F(n.body)||0}function w(e,t){var n;this.endTime=(0,D.z)(),this.params||(this.params={}),this.params.status=t?t.status:0,\"string\"==typeof this.rxSize\u0026\u0026this.rxSize.length\u003e0\u0026\u0026(n=+this.rxSize);var o={txSize:this.txSize,rxSize:n,duration:(0,D.z)()-this.startTime};i(\"xhr\",[this.params,o,this.startTime,this.endTime,\"fetch\"],this,r.D.ajax)}function x(e){var t=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var o=0;o\u003cZ;o++)e.removeEventListener(G[o],this.listener,!1);t.aborted||(n.duration=(0,D.z)()-this.startTime,this.loadCaptureCalled||4!==e.readyState?null==t.status\u0026\u0026(t.status=0):E(this,e),n.cbTime=this.cbTime,i(\"xhr\",[t,n,this.startTime,this.endTime,\"xhr\"],this,r.D.ajax))}}function E(e,t){e.params.status=t.status;var r=function(e,t){var r=e.responseType;return\"json\"===r\u0026\u0026null!==t?t:\"arraybuffer\"===r||\"blob\"===r||\"json\"===r?F(e.response):\"text\"===r||\"\"===r||void 0===r?F(e.responseText):void 0}(t,e.lastSize);if(r\u0026\u0026(e.metrics.rxSize=r),e.sameOrigin){var n=t.getResponseHeader(\"X-NewRelic-App-Data\");n\u0026\u0026(e.params.cat=n.split(\", \").pop())}e.loadCaptureCalled=!0}t.on(\"new-xhr\",a),t.on(\"open-xhr-start\",s),t.on(\"open-xhr-end\",c),t.on(\"send-xhr-start\",u),t.on(\"xhr-cb-time\",d),t.on(\"xhr-load-added\",f),t.on(\"xhr-load-removed\",h),t.on(\"xhr-resolved\",p),t.on(\"addEventListener-end\",g),t.on(\"removeEventListener-end\",m),t.on(\"fn-end\",b),t.on(\"fetch-before-start\",y),t.on(\"fetch-start\",A),t.on(\"fn-start\",v),t.on(\"fetch-done\",w)}(e,this.ee,this.handler,this.dt),this.importAggregator()}}}function Y(e,t){var r=(0,U.e)(t),n=e.params||e;n.hostname=r.hostname,n.port=r.port,n.protocol=r.protocol,n.host=r.hostname+\":\"+r.port,n.pathname=r.pathname,e.parsedOrigin=r,e.sameOrigin=r.sameOrigin}var J=i(3614);const{BST_RESOURCE:Q,RESOURCE:ee,START:te,END:re,FEATURE_NAME:ne,FN_END:ie,FN_START:oe,PUSH_STATE:ae}=J;var se=i(7056),ce=i(7144);class ue extends f{static featureName=ce.t9;constructor(e,t){let r=!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2];super(e,t,ce.t9,r);try{const e=JSON.parse(localStorage.getItem(\"NRBA_SESSION\"));e.sessionReplayMode!==se.IK.OFF?this.#a(e.sessionReplayMode):this.importAggregator({})}catch(e){this.importAggregator({})}}async#a(e){const{Recorder:t}=await Promise.all([i.e(111),i.e(433)]).then(i.bind(i,4136));this.recorder=new t({mode:e,agentIdentifier:this.agentIdentifier}),this.recorder.startRecording(),this.importAggregator({recorder:this.recorder})}}var de=i(7836);const{FEATURE_NAME:le,START:fe,END:he,BODY:pe,CB_END:ge,JS_TIME:me,FETCH:ve,FN_START:be,CB_START:ye,FN_END:Ae}=de;var we=i(4649);class xe extends f{static featureName=we.t;constructor(e,t){let r=!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2];super(e,t,we.t,r),this.importAggregator()}}new class extends t{constructor(t){let r=arguments.length\u003e1\u0026\u0026void 0!==arguments[1]?arguments[1]:(0,E.ky)(16);super(),l._A?(this.agentIdentifier=r,this.sharedAggregator=new v({agentIdentifier:this.agentIdentifier}),this.features={},(0,x.h5)(r,this),this.desiredFeatures=new Set(t.features||[]),this.desiredFeatures.add(p),(0,s.j)(this,t,t.loaderType||\"agent\"),this.run()):(0,e.Z)(\"Failed to initial the agent. Could not determine the runtime environment.\")}get config(){return{info:(0,n.C5)(this.agentIdentifier),init:(0,n.P_)(this.agentIdentifier),loader_config:(0,n.DL)(this.agentIdentifier),runtime:(0,n.OP)(this.agentIdentifier)}}run(){try{const t=a(this.agentIdentifier),n=[...this.desiredFeatures];n.sort(((e,t)=\u003er.p[e.featureName]-r.p[t.featureName])),n.forEach((n=\u003e{if(t[n.featureName]||n.featureName===r.D.pageViewEvent){const i=function(e){switch(e){case r.D.ajax:return[r.D.jserrors];case r.D.sessionTrace:return[r.D.ajax,r.D.pageViewEvent];case r.D.sessionReplay:return[r.D.sessionTrace];case r.D.pageViewTiming:return[r.D.pageViewEvent];default:return[]}}(n.featureName);i.every((e=\u003et[e]))||(0,e.Z)(\"\".concat(n.featureName,\" is enabled but one or more dependent features has been disabled (\").concat((0,_.P)(i),\"). This may cause unintended consequences or missing data...\")),this.features[n.featureName]=new n(this.agentIdentifier,this.sharedAggregator)}}))}catch(t){(0,e.Z)(\"Failed to initialize all enabled instrument classes (agent aborted) -\",t);for(const e in this.features)this.features[e].abortHandler?.();const r=(0,x.fP)();return delete r.initializedAgents[this.agentIdentifier]?.api,delete r.initializedAgents[this.agentIdentifier]?.features,delete this.sharedAggregator,r.ee?.abort(),delete r.ee?.get(this.agentIdentifier),!1}}}({features:[K,p,O,class extends f{static featureName=ne;constructor(e,t){if(super(e,t,ne,!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2]),!l.il)return;const n=this.ee;let i;(0,B.QU)(n),this.eventsEE=(0,B.em)(n),this.eventsEE.on(oe,(function(e,t){this.bstStart=(0,D.z)()})),this.eventsEE.on(ie,(function(e,t){(0,T.p)(\"bst\",[e[0],t,this.bstStart,(0,D.z)()],void 0,r.D.sessionTrace,n)})),n.on(ae+te,(function(e){this.time=(0,D.z)(),this.startPath=location.pathname+location.hash})),n.on(ae+re,(function(e){(0,T.p)(\"bstHist\",[location.pathname+location.hash,this.startPath,this.time],void 0,r.D.sessionTrace,n)}));try{i=new PerformanceObserver((e=\u003e{const t=e.getEntries();(0,T.p)(Q,[t],void 0,r.D.sessionTrace,n)})),i.observe({type:ee,buffered:!0})}catch(e){}this.importAggregator({resourceObserver:i})}},ue,j,xe,k,class extends f{static featureName=le;constructor(e,t){if(super(e,t,le,!(arguments.length\u003e2\u0026\u0026void 0!==arguments[2])||arguments[2]),!l.il)return;if(!(0,n.OP)(e).xhrWrappable)return;try{this.removeOnAbort=new AbortController}catch(e){}let r,i=0;const o=this.ee.get(\"tracer\"),a=(0,B._L)(this.ee),s=(0,B.Lg)(this.ee),c=(0,B.BV)(this.ee),u=(0,B.Kf)(this.ee),d=this.ee.get(\"events\"),f=(0,B.u5)(this.ee),h=(0,B.QU)(this.ee),p=(0,B.Gm)(this.ee);function g(e,t){h.emit(\"newURL\",[\"\"+window.location,t])}function m(){i++,r=window.location.hash,this[be]=(0,D.z)()}function v(){i--,window.location.hash!==r\u0026\u0026g(0,!0);var e=(0,D.z)();this[me]=~~this[me]+e-this[be],this[Ae]=e}function b(e,t){e.on(t,(function(){this[t]=(0,D.z)()}))}this.ee.on(be,m),s.on(ye,m),a.on(ye,m),this.ee.on(Ae,v),s.on(ge,v),a.on(ge,v),this.ee.buffer([be,Ae,\"xhr-resolved\"],this.featureName),d.buffer([be],this.featureName),c.buffer([\"setTimeout\"+he,\"clearTimeout\"+fe,be],this.featureName),u.buffer([be,\"new-xhr\",\"send-xhr\"+fe],this.featureName),f.buffer([ve+fe,ve+\"-done\",ve+pe+fe,ve+pe+he],this.featureName),h.buffer([\"newURL\"],this.featureName),p.buffer([be],this.featureName),s.buffer([\"propagate\",ye,ge,\"executor-err\",\"resolve\"+fe],this.featureName),o.buffer([be,\"no-\"+be],this.featureName),a.buffer([\"new-jsonp\",\"cb-start\",\"jsonp-error\",\"jsonp-end\"],this.featureName),b(f,ve+fe),b(f,ve+\"-done\"),b(a,\"new-jsonp\"),b(a,\"jsonp-end\"),b(a,\"cb-start\"),h.on(\"pushState-end\",g),h.on(\"replaceState-end\",g),window.addEventListener(\"hashchange\",g,(0,R.m$)(!0,this.removeOnAbort?.signal)),window.addEventListener(\"load\",g,(0,R.m$)(!0,this.removeOnAbort?.signal)),window.addEventListener(\"popstate\",(function(){g(0,i\u003e1)}),(0,R.m$)(!0,this.removeOnAbort?.signal)),this.abortHandler=this.#o,this.importAggregator()}#o(){this.removeOnAbort?.abort(),this.abortHandler=void 0}}],loaderType:\"spa\"})})()})();","siteSetting":{"placeholderImages":{"brand":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/bltc0182b2356ae8eed/64b83949410a1b4c0bd7459b/IW_generic_image.png","contributor":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/bltd227769938aa3739/64b55d4d33298f5b051a72d5/Contributor_Avatar.png"},"defaultGatingTitle":"","defaultGatingDescriptionMessage":""},"isAuthenticated":false,"testAutomationFlags":{"disableAds":false,"disableIirisAuth":false,"disableWelcomeAd":false,"disableBigskyAd":false,"disableIirisRecommend":false,"disableDcts":false,"disableWeatherWidget":false,"disableCashGrainWidget":false,"disableCommoditiesWidget":false}},"routes/$topic.$slug":{"isRequestedByGoogleBot":false,"isAuthenticated":false,"iirisRecommendationConfig":{"id":"widget-1689347359875","division":"it","brandFamily":"enterpriseit","entityTagBackground":"#333333BF","dateFormat":"Month DD, YYYY","showBy":"","showTime":"","borderRadius":"5","imageWidth":"324","imageHeight":"182","dateTimeBgcolor":"#ffffff","dateTimeFontColor":"#767676","imagePosition":"vertical","dropShadow":"","dateTimeFontsize":"12","entityTagBorderColor":"#333333BF","borderColor":"#e6e6e6","showdate":"","redirectMode":"same","recipe":"related-items"},"ignoreNoindexSponsored":true,"metadata":{"type":"podcast","uid":"blt63cb6ba76e748322","aid":"297865","reg":"anonymous"},"template":{"breadcrumbs":[{"url":"/","title":"Home"},{"url":"/machine-learning-ai","title":"Machine Learning \u0026 AI"}],"topics":[{"__typename":"TopicPrimary","title":"Machine Learning \u0026 AI","url":"/machine-learning-ai"},{"__typename":"TopicPrimary","title":"Data Management","url":"/data-management"},{"__typename":"TopicSecondary","title":"Data Privacy","url":"/data-management/data-privacy","parentTopic":{"title":"Data Management"}},{"__typename":"TopicSecondary","title":"AI Innovations","url":"/machine-learning-ai/ai-innovations","parentTopic":{"title":"Machine Learning \u0026 AI"}}],"subBrand":null,"searchParams":{},"summary":"With attention on software that can âpoisonâ content to make it harder for AI models to interpret, the debate on fair use and copyright intensifies.","title":"A Bitter Pill for GenAI as Nightshade Takes the Spotlight","mobileHeadline":"A Bitter Pill for GenAI as Nightshade Takes the Spotlight","authoredBy":"","authoredOn":"","oldUrl":"","buyersJourney":"","contributors":[{"title":"Joao-Pierre S. Ruth","name":"Joao-Pierre S. Ruth","companyName":"","role":"Senior Editor","avatar":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blt7f004b6f174043df/64bfdc879bc48c25c32d4ad9/Joao-Pierre-S-Ruth.png","link":"/author/joao-pierre-s-ruth","tagLine":"Senior Editor","summary":[{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","text":"Joao-Pierre S. Ruth covers tech policy, including ethics, privacy, legislation, and risk; fintech; code strategy; and cloud \u0026 edge computing for InformationWeek. He has been a journalist for more than 25 years, reporting on business and technology first in New Jersey, then covering the New York tech startup community, and later as a freelancer for such outlets as TheStreet, Investopedia, and Street Fight. Follow him on Twitter: @jpruth."}]},{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"hardBreak"}]}]}],"readTime":0,"newsletterSignUpPromo":{"title":"Never Miss a Beat: Get a snapshot of the issues affecting the IT industry straight to your inbox.","message":"","newsletterId":"blt8d3a84e50fd3381c","buttonText":"SIGN-UP","variant":"vertical","mode":"light"},"resourcesModule":{"title":"More Insights","linkLists":[{"listOption":"External Feed","listTitle":"Webinars","icon":"ChalkBoard","externalFeed":"https://smartbox.techweb.com/smartbox/externalsmartbox?site_id=300001\u0026taxonomy_ids=\u0026num_display=3\u0026article_type=upcoming_webinars","ctaButton":{"ctaButtonLink":"https://iw-resources.informationweek.com/?pt=dir\u0026page=iw-resources\u0026ch=iwkmorewebinars","ctaButtonText":"More Webinars"},"openInNewTab":true,"articles":[{"title":"Unleashing AI for cybersecurity: Empowering non-experts to take action","publishedDate":"Jan 16, 2024","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_defa5736\u0026ch=sbx\u0026cid=_upcoming_webinars_8.500001394\u0026_mc=_upcoming_webinars_8.500001394","eventDate":"Feb 15, 2024"},{"title":"OSINT Unveiled: Decoding Hacker Tactics for Organizational Defense","publishedDate":"Jan 23, 2024","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_knoc94\u0026ch=sbx\u0026cid=_upcoming_webinars_8.500001395\u0026_mc=_upcoming_webinars_8.500001395","eventDate":"Feb 20, 2024"},{"title":"Modernizing Observability in Complex Cloud Environments","publishedDate":"Jan 23, 2024","url":"https://nc-resources.networkcomputing.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_ingg213\u0026ch=sbx\u0026cid=_upcoming_webinars_8.500001393\u0026_mc=_upcoming_webinars_8.500001393","eventDate":"Feb 27, 2024"}]},{"listOption":"External Feed","listTitle":"Reports","icon":"Document","externalFeed":"https://smartbox.techweb.com/smartbox/externalsmartbox?site_id=300001\u0026taxonomy_ids=\u0026num_display=5\u0026article_type=analytics","ctaButton":{"ctaButtonLink":"https://iw-resources.informationweek.com/?pt=adv\u0026page=InformationWeek\u0026ch=iwkheadtllnk","ctaButtonText":"More Reports"},"openInNewTab":true,"articles":[{"title":"*State of ITSM in Retail","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026pc=w_tean226\u0026ch=sbx\u0026cid=_analytics_7.300006005\u0026_mc=_analytics_7.300006005","eventDate":""},{"title":"Using Security Automation to Solve Workforce Shortages, Alert Fatigue, and More","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_ingg210\u0026ch=sbx\u0026cid=_analytics_7.300006002\u0026_mc=_analytics_7.300006002","eventDate":""},{"title":"Cloud Crisis Management: Tech Insights Report","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026pc=w_forq261\u0026ch=sbx\u0026cid=_analytics_7.300006001\u0026_mc=_analytics_7.300006001","eventDate":""},{"title":"You've Been Attacked Now What?","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_ingg68\u0026ch=sbx\u0026cid=_analytics_7.300005995\u0026_mc=_analytics_7.300005995","eventDate":""},{"title":"2022 Retrospective: The Emergence of the Next Gen of Wi-Fi","publishedDate":"","url":"https://networkcomputing.tradepub.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_neua33\u0026ch=sbx\u0026cid=_analytics_7.300005976\u0026_mc=_analytics_7.300005976","eventDate":""}]}],"dateDisplay":"show"},"socialShare":[{"type":"Linkedin","url":"https://www.linkedin.com/sharing/share-offsite/?url=https://www.informationweek.com/machine-learning-ai/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight"},{"type":"Facebook","url":"http://www.facebook.com/sharer/sharer.php?u=https://www.informationweek.com/machine-learning-ai/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight"},{"type":"Twitter","url":"http://www.twitter.com/intent/tweet?url=https://www.informationweek.com/machine-learning-ai/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight"},{"type":"Email","url":"mailto:?subject=A Bitter Pill for GenAI as Nightshade Takes the Spotlight\u0026body=I%20thought%20the%20following%20from%20InformationWeek%20might%20interest%20you.%0D%0A%0D%0A%20A%20Bitter%20Pill%20for%20GenAI%20as%20Nightshade%20Takes%20the%20Spotlight%0D%0Ahttps%3A%2F%2Fwww.informationweek.com%2Fmachine-learning-ai%2Fa-bitter-pill-for-genai-as-nightshade-takes-the-spotlight"},{"type":"Reddit","url":"https://www.reddit.com/submit?url=https://www.informationweek.com/machine-learning-ai/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight\u0026title=A%20Bitter%20Pill%20for%20GenAI%20as%20Nightshade%20Takes%20the%20Spotlight"}],"publishedDate":"2024-01-24T14:45:00.000Z","keywords":[],"atAGlance":[],"bodyJson":[{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","text":"Litigation and regulation of AI are still in their early days, but some parties are already going on active offense to protect materials they do not want scraped to train models to emulate their work."}]},{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","text":"Momentum continues to build across social media and in news headlines for a heated discussion about software such as Nightshade, which introduces elements in content to disrupt AIâs ability to understand what it is looking at. This free software has been "},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://nightshade.cs.uchicago.edu/whatis.html","target":"_blank","rel":null,"class":null}}],"text":"made available for artists to use"},{"type":"text","text":", offering them a way to âpoisonâ their own work and discourage GenAI from training on their creations."}]},{"type":"ad","pos":"300_1v_article"},{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"https://venturebeat.com/ai/nightshade-the-free-tool-that-poisons-ai-models-is-now-available-for-artists-to-use/","target":"_blank","rel":null,"class":null}}],"text":"According to VentureBeat"},{"type":"text","text":", this project out of the "},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://sandlab.cs.uchicago.edu/","target":"_blank","rel":null,"class":null}}],"text":"SAND Lab"},{"type":"text","text":" at the University of Chicago leverages its own AI to thwart GenAI by adding a tag to images that spoofs AI models into believing they see something different."}]},{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","text":"Certain supporters of content produced via AI naturally cried foul about what they view as harm to their space. Meanwhile creatives who do not want their works to be mimicked by AI pointed out that they are making changes to their own materials -- that it is their choice to add such elements to their images."}]},{"type":"ad","pos":"native_1v"},{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","text":"Debate over the use of original works to train GenAI includes the recent "},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://www.informationweek.com/machine-learning-ai/what-the-nyt-case-against-openai-microsoft-could-mean-for-ai-and-its-users","target":"_blank","rel":null,"class":null}}],"text":"lawsuit brought by The New York Times against OpenAI and Microsoft"},{"type":"text","text":", where intellectual property and copyright law may be hashed out. There is speculation the lawsuit might stall, if not kill OpenAI. In response, OpenAI wrote in a blogpost that it supports journalism but it "},{"type":"text","marks":[{"type":"link","attrs":{"href":"https://openai.com/blog/openai-and-journalism","target":"_blank","rel":null,"class":null}}],"text":"did not believe the litigation had merit"},{"type":"text","text":"."}]},{"type":"ad","pos":"video_v"},{"type":"relatedArticle","content":[{"title":"Neil deGrasse Tyson on Calling Out Bad Data and Appreciating AI","url":"/data-management/neil-degrasse-tyson-on-calling-out-bad-data-and-appreciating-ai","target":"_self"}],"title":"Related"},{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","text":"This episode of DOS Wonât Hunt takes a look at proactive efforts to interfere with AI, what is at stake for opposing parties, and how data privacy may also be part of the discussion."}]},{"type":"paragraph","attrs":{"textAlign":"left"}},{"type":"paragraph","attrs":{"textAlign":"left"},"content":[{"type":"text","marks":[{"type":"link","attrs":{"href":"https://www.spreaker.com/episode/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight--58431987","target":"_blank","rel":null,"class":null}}],"text":"Listen to the full podcast here."}]}],"contentType":"Podcast","uid":"blt63cb6ba76e748322","sponsored":{"logoUrl":"","url":"","alt":"","title":"","campaignURL":"","isSponsored":false,"gateWithSiteReg":false,"gateWithExternalForm":"None","externalFormID":""},"featuredImage":{"src":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/bltd6242041d6ef228a/65b0454abc4376040a01472e/AIcircuit_ChrisMerriam-AlamyStockPhoto.jpg","alt":"AI rendered in vibrant copper circuits on a turquoise motherboard, symbolizing the melding of artificial intelligent technology with intellect","caption":"","creditTo":"Chris Merriam via Alamy Stock Photo"},"contentFormat":{"title":"Commentary"},"seriesTaxonomy":[],"programTaxonomy":[],"sidebarModules":[{"type":"module_content_cards","data":{"title":"Editor's Choice","variant":"column","contents":[{"type":"contentPreview","data":{"contentType":"Article","variant":"card-vertical","thumbnail":{"src":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/bltd2615cb401b2d8ee/65b96832572551040a6d88b2/conquer-Brain_light_-alamy.jpg","alt":"Business fight conflict concept with a blue boxing glove confronting and challenging a giant mechanical gear"},"articleName":"4 Top Data Management Challenges (And How to Conquer Them)","mobileHeadline":"4 Top Data Management Challenges (And How to Conquer Them)","articleUrl":"/data-management/4-top-data-management-challenges-and-how-to-conquer-them-","listPageUrl":"/data-management/4-top-data-management-challenges-and-how-to-conquer-them-","linkAttrs":{},"date":"Feb 1, 2024","webinarStartTime":"","categoryName":"Data Management","categoryUrl":"/data-management","contributors":[{"name":"John Edwards","link":"/author/john-edwards","avatar":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blte185e89eb327a1c3/64bbfbd29a2908fafb14d71d/John-Edwards-125x125.jpg"}],"timeRead":4}},{"type":"contentPreview","data":{"contentType":"Article","variant":"card-vertical","thumbnail":{"src":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blt847991dd0f2def27/65bd4852b43a90040ab522f2/machine_customer--Sean_Prior-alamy.jpg","alt":"Digital composite of Android hand pointing with online shopping drawings graphics"},"articleName":"What to Know About Machine Customers","mobileHeadline":"What to Know About Machine Customers ","articleUrl":"/machine-learning-ai/what-to-know-about-machine-customers-","listPageUrl":"/machine-learning-ai/what-to-know-about-machine-customers-","linkAttrs":{},"date":"Feb 6, 2024","webinarStartTime":"","categoryName":"Machine Learning \u0026 AI","categoryUrl":"/machine-learning-ai","contributors":[{"name":"Nathan Eddy","link":"/author/nathan-eddy","avatar":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/bltffb02052df0e7c0f/64bf3f85d8102a1de1f9b9a4/nathan-eddy-new.jpg"}],"timeRead":4}},{"type":"contentPreview","data":{"contentType":"Podcast","variant":"card-vertical","thumbnail":{"src":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blt472e032643ca1869/65c0f0e8c6f7cc040a01f256/US_Senate_Building-MarekSlusarczyk-AlamyStockPhoto.jpg","alt":"US National Capitol in Washington, DC. American landmark. United States Capitol - US Senate wing."},"articleName":"Senate Hearing and Big Techâs Social Media Responsibility","mobileHeadline":"Senate Hearing and Big Techâs Social Media Responsibility","articleUrl":"/data-management/senate-hearing-and-big-tech-s-social-media-responsibility","listPageUrl":"/data-management/senate-hearing-and-big-tech-s-social-media-responsibility","linkAttrs":{},"date":"Feb 5, 2024","webinarStartTime":"","categoryName":"Data Management","categoryUrl":"/data-management","contributors":[{"name":"Joao-Pierre S. Ruth","link":"/author/joao-pierre-s-ruth","avatar":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blt7f004b6f174043df/64bfdc879bc48c25c32d4ad9/Joao-Pierre-S-Ruth.png"}],"timeRead":0}},{"type":"contentPreview","data":{"contentType":"Article","variant":"card-vertical","thumbnail":{"src":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blte2e105bbac572313/6598687e36bc74040ac31c40/New_York_Times-Michele_D_Ottavio_-alamy.jpg","alt":"The New York Times daily newspaper skyscraper in Midtown Manhattan in New York"},"articleName":"What the NYT Case Against OpenAI, Microsoft Could Mean for AI and Its Users","mobileHeadline":"What the NYT Case Against OpenAI, Microsoft Could Mean for AI and Its Users","articleUrl":"/machine-learning-ai/what-the-nyt-case-against-openai-microsoft-could-mean-for-ai-and-its-users","listPageUrl":"/machine-learning-ai/what-the-nyt-case-against-openai-microsoft-could-mean-for-ai-and-its-users","linkAttrs":{},"date":"Jan 5, 2024","webinarStartTime":"","categoryName":"Machine Learning \u0026 AI","categoryUrl":"/machine-learning-ai","contributors":[{"name":"Carrie Pallardy","link":"/author/carrie-pallardy","avatar":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blta2ac0cf507deba77/64bf49006c654daed172bbba/CarriePallardy_Head_Shot.gif"}],"timeRead":9}},{"type":"contentPreview","data":{"contentType":"Article","variant":"card-vertical","thumbnail":{"src":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/blt0d7c1e14968fbd41/65b2e05ffb5ad7040a994aeb/signup1.jpg","alt":"Computer mouse and Words 'Sign up' drawn in white chalk on a gray chalkboard"},"articleName":"Sign Up for InformationWeek's New Cyber Resilience Newsletter","mobileHeadline":"InformationWeek is Launching a New Cyber Resilience Newsletter ","articleUrl":"/cyber-resilience/sign-up-for-informationweek-s-new-cyber-resilience-newsletter","listPageUrl":"/cyber-resilience/sign-up-for-informationweek-s-new-cyber-resilience-newsletter","linkAttrs":{},"date":"Jan 25, 2024","webinarStartTime":"","categoryName":"Cyber Resilience","categoryUrl":"/cyber-resilience","contributors":[{"name":"InformationWeek Staff","link":"/author/informationweek-staff","avatar":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/bltf6866111140df5bb/6515ef45f3d316b9fb5271a6/IWK23_1000x1000_solid.png"}],"timeRead":3}}],"dateDisplay":"show","contributorDisplay":"show"},"adConfig":{"nativeAdOption":false}},{"type":"module_link_list","data":{"listOption":"External Feed","listTitle":"Webinars","icon":"ChalkBoard","externalFeed":"https://smartbox.techweb.com/smartbox/externalsmartbox?site_id=300001\u0026taxonomy_ids=\u0026num_display=3\u0026article_type=upcoming_webinars","ctaButton":{"ctaButtonLink":"https://iw-resources.informationweek.com/?pt=dir\u0026page=iw-resources\u0026ch=iwkmorewebinars","ctaButtonText":"More Webinars"},"openInNewTab":true,"articles":[{"title":"Unleashing AI for cybersecurity: Empowering non-experts to take action","publishedDate":"Jan 16, 2024","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_defa5736\u0026ch=sbx\u0026cid=_upcoming_webinars_8.500001394\u0026_mc=_upcoming_webinars_8.500001394","eventDate":"Feb 15, 2024"},{"title":"OSINT Unveiled: Decoding Hacker Tactics for Organizational Defense","publishedDate":"Jan 23, 2024","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_knoc94\u0026ch=sbx\u0026cid=_upcoming_webinars_8.500001395\u0026_mc=_upcoming_webinars_8.500001395","eventDate":"Feb 20, 2024"},{"title":"Modernizing Observability in Complex Cloud Environments","publishedDate":"Jan 23, 2024","url":"https://nc-resources.networkcomputing.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_ingg213\u0026ch=sbx\u0026cid=_upcoming_webinars_8.500001393\u0026_mc=_upcoming_webinars_8.500001393","eventDate":"Feb 27, 2024"}]}},{"type":"module_link_list","data":{"listOption":"External Feed","listTitle":"White Papers","icon":"Document","externalFeed":"https://smartbox.techweb.com/smartbox/externalsmartbox?site_id=300001\u0026taxonomy_ids=\u0026num_display=\u0026article_type=whitepaper","ctaButton":{"ctaButtonLink":"https://iw-resources.informationweek.com/?pt=dir\u0026page=iw-resources\u0026ch=iwkmorewps","ctaButtonText":"More White Papers"},"openInNewTab":true,"articles":[{"title":"Hybrid Mesh Firewall: An Essential Solution for Today's Distributed Enterprise","publishedDate":"","url":"https://nc-resources.networkcomputing.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_forq269\u0026ch=SBX\u0026cid=_whitepaper_14.500005549\u0026_mc=_whitepaper_14.500005549","eventDate":""},{"title":"Keeping Hackers Off Every Edge","publishedDate":"","url":"https://nc-resources.networkcomputing.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_forq268\u0026ch=SBX\u0026cid=_whitepaper_14.500005548\u0026_mc=_whitepaper_14.500005548","eventDate":""},{"title":"MontanaPBS Shifts to Agile Broadcasting With Help from Raritan KVM Solutions","publishedDate":"","url":"https://nc-resources.networkcomputing.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026pc=w_defa5813\u0026ch=SBX\u0026cid=_whitepaper_14.500005547\u0026_mc=_whitepaper_14.500005547","eventDate":""},{"title":"KVM SwitchÃÂ High Performance Applications with Dominion KX III","publishedDate":"","url":"https://techlibrary.tradepub.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026pc=w_rari16\u0026ch=sbx\u0026cid=_whitepaper_14.500005492\u0026_mc=_whitepaper_14.500005492","eventDate":""},{"title":"Solution Brief: Fortinet FortiFlex Delivers Usage-Based Security Licensing That Moves at the Speed of Digital AccelerationÃ¢â¬â¹","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026pc=w_forq264\u0026ch=SBX\u0026cid=_whitepaper_14.500005469\u0026_mc=_whitepaper_14.500005469","eventDate":""}]}},{"type":"module_link_list","data":{"listOption":"External Feed","listTitle":"Live Events","icon":"Date","externalFeed":"https://smartbox.techweb.com/smartbox/externalsmartbox?site_id=300001\u0026taxonomy_ids=\u0026num_display=3\u0026article_type=session","ctaButton":{"ctaButtonLink":"https://www.informationweek.com/upcoming-events","ctaButtonText":"More Live Events"},"openInNewTab":true,"articles":[{"title":"[Live Event] Data Center World 4/15 - 4/18","publishedDate":"Apr 15, 2024","url":"https://datacenterworld.com/why-attend?_mc=we_dcw_dcw_le_x_netline_2024\u0026utm_source=housead\u0026utm_medium=we_\u0026utm_campaign=netline\u0026utm_content=le_sbx\u0026cid=_session_16.500315","eventDate":""},{"title":"[Virtual Event] Strategies for Maximizing IT Automation","publishedDate":"Mar 28, 2024","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_defa5726\u0026ch=iwksbx\u0026cid=_session_16.500314\u0026_mc=_session_16.500314","eventDate":""},{"title":"Cyber Resiliency 2023: How to Keep IT Operations Running, No Matter What","publishedDate":"Aug 24, 2023","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_defa4728\u0026ch=sbx\u0026cid=_session_16.500301\u0026_mc=_session_16.500301","eventDate":""}]}},{"type":"module_link_list","data":{"listOption":"External Feed","listTitle":"Reports","icon":"Document","externalFeed":"https://smartbox.techweb.com/smartbox/externalsmartbox?site_id=300001\u0026taxonomy_ids=\u0026num_display=5\u0026article_type=analytics","ctaButton":{"ctaButtonLink":"https://iw-resources.informationweek.com/?pt=adv\u0026page=InformationWeek\u0026ch=iwkheadtllnk","ctaButtonText":"More Reports"},"openInNewTab":true,"articles":[{"title":"*State of ITSM in Retail","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026pc=w_tean226\u0026ch=sbx\u0026cid=_analytics_7.300006005\u0026_mc=_analytics_7.300006005","eventDate":""},{"title":"Using Security Automation to Solve Workforce Shortages, Alert Fatigue, and More","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_ingg210\u0026ch=sbx\u0026cid=_analytics_7.300006002\u0026_mc=_analytics_7.300006002","eventDate":""},{"title":"Cloud Crisis Management: Tech Insights Report","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026pc=w_forq261\u0026ch=sbx\u0026cid=_analytics_7.300006001\u0026_mc=_analytics_7.300006001","eventDate":""},{"title":"You've Been Attacked Now What?","publishedDate":"","url":"https://iw-resources.informationweek.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_ingg68\u0026ch=sbx\u0026cid=_analytics_7.300005995\u0026_mc=_analytics_7.300005995","eventDate":""},{"title":"2022 Retrospective: The Emergence of the Next Gen of Wi-Fi","publishedDate":"","url":"https://networkcomputing.tradepub.com/c/pubRD.mpl?secure=1\u0026sr=pp\u0026_t=pp:\u0026qf=w_neua33\u0026ch=sbx\u0026cid=_analytics_7.300005976\u0026_mc=_analytics_7.300005976","eventDate":""}]}}],"relatedEvents":[],"topicSelector":{"mainTopic":{"type":"TopicPrimary","title":"Machine Learning \u0026 AI","url":"/machine-learning-ai"},"additionalTopics":[{"type":"TopicPrimary","title":"Data Management","url":"/data-management"},{"type":"TopicSecondary","title":"Data Privacy","url":"/data-management/data-privacy","parentTopic":{"type":"TopicPrimary","title":"Data Management"}},{"type":"TopicSecondary","title":"AI Innovations","url":"/machine-learning-ai/ai-innovations","parentTopic":{"type":"TopicPrimary","title":"Machine Learning \u0026 AI"}}]},"print":true,"podcast":{"podcastId":"https://api.spreaker.com/episode/58431987","podcastService":"embed","podcastLink":"https://www.spreaker.com/episode/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight--58431987","podcastEmbed":"\u003ciframe src=\"https://widget.spreaker.com/player?episode_id=58431987\u0026theme=light\u0026playlist=false\u0026playlist-continuous=false\u0026chapters-image=true\u0026episode_image_position=right\u0026hide-logo=false\u0026hide-likes=false\u0026hide-comments=false\u0026hide-sharing=false\u0026hide-download=true\" width=\"100%\" height=\"200px\" frameborder=\"0\"\u003e\u003c/iframe\u003e","duration":{"duration":"00:00:00"}}},"schema":[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://www.informationweek.com"},{"@type":"ListItem","position":2,"name":"Machine Learning \u0026 AI","item":"https://www.informationweek.com/machine-learning-ai"}]}],"seo":{"canonicalUrl":"https://www.informationweek.com/machine-learning-ai/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight","metaDescription":"With attention on software that can âpoisonâ content to make it harder for AI models to interpret, the debate on fair use and copyright intensifies.","metaTitle":"A Bitter Pill for GenAI as Nightshade Takes the Spotlight","noIndex":false,"imageUrl":"https://eu-images.contentstack.com/v3/assets/blt69509c9116440be8/bltd6242041d6ef228a/65b0454abc4376040a01472e/AIcircuit_ChrisMerriam-AlamyStockPhoto.jpg?disable=upscale\u0026width=1200\u0026height=630\u0026fit=crop","brand":"informationweek","keywords":"Machine Learning \u0026 AI, Data Management, Data Privacy, AI Innovations"},"gtm":{"loadEvent":{"attributes":{"events":[],"subBrand":"","seo":{"canonicalURL":"https://www.informationweek.com/machine-learning-ai/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight","hideFromSearchEngines":false},"sponsored":{"name":"","campaignURL":"","isSponsored":false,"gateWithSiteReg":false,"gateWithExternalForm":"None","externalFormID":""},"legacy":{"destinationPath":"","issueDate":"","contributor":""}},"category":{"buyerJourney":"","contentFormat":"Commentary","pageType":"podcast","keyword":[],"series":[],"primaryTerm":{"parent":"Machine Learning \u0026 AI","child":"","grandchild":""},"secondaryTerm":[{"parent":"Data Management","child":"","grandchild":""},{"parent":"Data Management","child":"Data Privacy","grandchild":""},{"parent":"Machine Learning \u0026 AI","child":"AI Innovations","grandchild":""}]},"pageInfo":{"pageID":"blt63cb6ba76e748322","pageName":"A Bitter Pill for GenAI as Nightshade Takes the Spotlight","destinationURL":"https://www.informationweek.com/machine-learning-ai/a-bitter-pill-for-genai-as-nightshade-takes-the-spotlight","issueDate":"Jan 24, 2024","contributor":[{"companyName":"","displayName":"Joao-Pierre S. Ruth","jobTitle":"Senior Editor","name":"Joao-Pierre S. Ruth"}]}}}}}};</script><script type="module" async>import "/build/manifest-B097BBFD.js";
import * as route0 from "/build/root-WMZKY4HO.js";
import "/build/manifest-B097BBFD.js";
import * as route1 from "/build/routes/$topic.$slug-ST5QLQLE.js";
window.__remixRouteModules = {"root":route0,"routes/$topic.$slug":route1};

import("/build/entry.client-VOU2QAI4.js");</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://www.informationweek.com"},{"@type":"ListItem","position":2,"name":"Machine Learning & AI","item":"https://www.informationweek.com/machine-learning-ai"}]}</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317" integrity="sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==" data-cf-beacon='{"rayId":"854f30b6aa1b0c4b","b":1,"version":"2024.2.0","token":"983df0875983496a9be88792e1eb4931"}' crossorigin="anonymous"></script>
</body></html>