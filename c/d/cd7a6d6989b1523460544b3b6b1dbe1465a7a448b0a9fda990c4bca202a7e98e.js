/*! @license iono.Player v0.12.0 | (c) iono.fm 2023 | ISC */
var iono="object"==typeof iono?iono:{};iono.Player=[function(t,e,n){"use strict";var r;n.d(e,"lc",(function(){return i})),n.d(e,"hc",(function(){return o})),n.d(e,"jc",(function(){return a})),n.d(e,"kc",(function(){return s})),n.d(e,"mc",(function(){return u})),n.d(e,"nc",(function(){return c})),n.d(e,"oc",(function(){return l})),n.d(e,"ic",(function(){return d})),n.d(e,"gc",(function(){return f})),n.d(e,"G",(function(){return h})),n.d(e,"T",(function(){return p})),n.d(e,"db",(function(){return g})),n.d(e,"R",(function(){return y})),n.d(e,"V",(function(){return m})),n.d(e,"Z",(function(){return v})),n.d(e,"N",(function(){return b})),n.d(e,"L",(function(){return _})),n.d(e,"M",(function(){return A})),n.d(e,"Ab",(function(){return T})),n.d(e,"P",(function(){return w})),n.d(e,"zb",(function(){return x})),n.d(e,"z",(function(){return k})),n.d(e,"ib",(function(){return P})),n.d(e,"yb",(function(){return E})),n.d(e,"E",(function(){return S})),n.d(e,"ab",(function(){return O})),n.d(e,"Bb",(function(){return j})),n.d(e,"A",(function(){return C})),n.d(e,"eb",(function(){return I})),n.d(e,"fb",(function(){return L})),n.d(e,"U",(function(){return R})),n.d(e,"hb",(function(){return M})),n.d(e,"bb",(function(){return D})),n.d(e,"C",(function(){return N})),n.d(e,"gb",(function(){return B})),n.d(e,"O",(function(){return U})),n.d(e,"cb",(function(){return z})),n.d(e,"I",(function(){return H})),n.d(e,"H",(function(){return V})),n.d(e,"F",(function(){return F})),n.d(e,"S",(function(){return q})),n.d(e,"D",(function(){return W})),n.d(e,"Y",(function(){return G})),n.d(e,"W",(function(){return Q})),n.d(e,"X",(function(){return X})),n.d(e,"dc",(function(){return Y})),n.d(e,"fc",(function(){return Z})),n.d(e,"ec",(function(){return J})),n.d(e,"K",(function(){return K})),n.d(e,"J",(function(){return $})),n.d(e,"w",(function(){return tt})),n.d(e,"s",(function(){return et})),n.d(e,"r",(function(){return nt})),n.d(e,"y",(function(){return rt})),n.d(e,"v",(function(){return it})),n.d(e,"x",(function(){return ot})),n.d(e,"u",(function(){return at})),n.d(e,"t",(function(){return st})),n.d(e,"B",(function(){return ut})),n.d(e,"wb",(function(){return ct})),n.d(e,"xb",(function(){return lt})),n.d(e,"jb",(function(){return dt})),n.d(e,"vb",(function(){return ft})),n.d(e,"kb",(function(){return ht})),n.d(e,"tb",(function(){return pt})),n.d(e,"mb",(function(){return gt})),n.d(e,"qb",(function(){return yt})),n.d(e,"pb",(function(){return mt})),n.d(e,"rb",(function(){return vt})),n.d(e,"ob",(function(){return bt})),n.d(e,"ub",(function(){return _t})),n.d(e,"sb",(function(){return At})),n.d(e,"lb",(function(){return Tt})),n.d(e,"nb",(function(){return wt})),n.d(e,"Q",(function(){return xt})),n.d(e,"c",(function(){return kt})),n.d(e,"g",(function(){return Pt})),n.d(e,"e",(function(){return Et})),n.d(e,"n",(function(){return St})),n.d(e,"l",(function(){return Ot})),n.d(e,"i",(function(){return jt})),n.d(e,"p",(function(){return Ct})),n.d(e,"k",(function(){return It})),n.d(e,"d",(function(){return Lt})),n.d(e,"o",(function(){return Rt})),n.d(e,"f",(function(){return Mt})),n.d(e,"h",(function(){return Dt})),n.d(e,"q",(function(){return Nt})),n.d(e,"m",(function(){return Bt})),n.d(e,"j",(function(){return Ut})),n.d(e,"Ub",(function(){return zt})),n.d(e,"Tb",(function(){return Ht})),n.d(e,"Vb",(function(){return Vt})),n.d(e,"Yb",(function(){return Ft})),n.d(e,"Zb",(function(){return qt})),n.d(e,"Wb",(function(){return Wt})),n.d(e,"Xb",(function(){return Gt})),n.d(e,"Sb",(function(){return Qt})),n.d(e,"Rb",(function(){return Xt})),n.d(e,"Qb",(function(){return Yt})),n.d(e,"Nb",(function(){return Zt})),n.d(e,"Gb",(function(){return Jt})),n.d(e,"Eb",(function(){return Kt})),n.d(e,"Fb",(function(){return $t})),n.d(e,"Cb",(function(){return te})),n.d(e,"Ib",(function(){return ee})),n.d(e,"Jb",(function(){return ne})),n.d(e,"Mb",(function(){return re})),n.d(e,"Kb",(function(){return ie})),n.d(e,"Db",(function(){return oe})),n.d(e,"Hb",(function(){return ae})),n.d(e,"Lb",(function(){return se})),n.d(e,"Pb",(function(){return ue})),n.d(e,"bc",(function(){return ce})),n.d(e,"cc",(function(){return le})),n.d(e,"ac",(function(){return de})),n.d(e,"Ob",(function(){return fe})),n.d(e,"a",(function(){return he})),n.d(e,"pc",(function(){return pe})),n.d(e,"b",(function(){return ge}));var i="notready",o="empty",a="idle",s="loading",u="paused",c="playing",l="waiting",d="error",f="adplaying",h="error",p="play",g="resume",y="pause",m="playing",v="timeupdate",b="loading",_="loaded",A="loadedmetadata",T="volumechange",w="mute",x="unmute",k="canplay",P="stop",E="unload",S="durationchange",O="progress",j="waiting",C="ended",I="seeking",L="seeked",R="ratechange",M="state",D="ready",N="destroy",B="sourcechange",U="loadstart",z="repeatchange",H="languagechange",V="languageschange",F="empty",q="paused",W="download",G="playlistload",Q="playlistchange",X="playlistselect",Y="none",Z="single",J="playlist",K="levelchange",$="levelschange",tt="adskip",et="adbreakstart",nt="adbreakend",rt="adstart",it="adend",ot="adskippable",at="adcompanionstart",st="adcompanionend",ut="textcuechange",ct="texttrackschange",lt="texttrackload",dt="tracking",ft="position",ht="action",pt="start",gt="complete",yt="progress",mt="pause",vt="resume",bt="mute",_t="unmute",At="seek",Tt="adskip",wt="download",xt="nowplayingchange",kt=1,Pt=2,Et=3,St=4,Ot=5,jt=6,Ct=7,It=8,Lt="The fetching of the associated resource was aborted at the user's request.",Rt="Source not supported.",Mt="Source could not be decoded.",Dt="Unable to access source, the network may be down or the source no longer exists.",Nt="An unknown error ocurred.",Bt="Invalid playlist source.",Ut="No playable sources.",zt="ad-server",Ht="ad-client",Vt="ad-vast",Ft="podcast",qt="stream",Wt="metadata",Gt="playlist",Qt="adswizz-stream",Xt="adswizz-podcast",Yt="adswizz-ad",Zt="nowplaying",Jt="mp4",Kt="m4a",$t="mp3",te="aac",ee="oga",ne="ogg",re="webm",ie="opus",oe="m3u8",ae="audio/mpeg",se=((r={})[Jt]=["audio/mp4",'audio/mp4; codecs="mp4a.40.2"','audio/mp4; codecs="mp4a.40.5"','audio/mp4; codecs="mp4a.40.29"'],r[Kt]=["audio/mp4",'audio/mp4; codecs="mp4a.40.2"','audio/mp4; codecs="mp4a.40.5"','audio/mp4; codecs="mp4a.40.29"'],r[oe]=["application/x-mpegURL","application/vnd.apple.mpegurl"],r[$t]=[ae,"audio/mp3"],r[te]=["audio/aac"],r.adts=["video/MP2T"],r.ts=["video/MP2T"],r[ee]=['audio/ogg; codecs="vorbis"'],r[ne]=['audio/ogg; codecs="vorbis"'],r[re]=['audio/webm; codecs="vorbis"'],r[ie]=['audio/ogg; codecs="opus"'],r),ue=[Jt,Kt,$t,te,ee,ne,re,ie,oe,"adts","ts"],ce="low",le="medium",de="high",fe=3e4,he="https://iframe.iono.fm/ads/request?uid=<uid>&slot=<adslot>",pe="0.12.0",ge="https://edge.iono.fm/artwork?title=<title>"},function(t,e,n){"use strict";.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r={log:logException:function(t,e){var n;return n="function"==typeof t.getMessage?t.getMessage():t.message,this.log(e.ERROR,n,e)}},i=Object.create(r);i.log=function(t,e,n){if("console"in window)switch(t){case n.DEBUG:return console.debug(e);case n.INFO:return console.info(e);case n.WARN:return console.warn(e);case n.ERROR:case n.FATAL:return console.error(e)}};var o=n(36),a=n.n(o),s={level:0,drivers:[],context:{}},u={DEBUG:0,INFO:1,WARN:2,ERROR:3,_level:1,_drivers:[],_context:{},addDriver:setContext:function(t){return this._context=a()(t),this},getContext:withContext:function(t){var e=a()(this._context);return t(this._context),this._context=e,this},setLevel:create:function(t){t=Object.assign({level:this._level,context:Object.assign({},this._context),drivers:this._drivers.slice(0)},t);var e=Object.create(this);return e._level=1,e._context={},e._drivers=[],e.configure(t),e},configure:function(t){return t=Object.assign({},s,t),this.setLevel(t.level),this.setContext(t.context),t.drivers.forEach((,this),this},log:function(t,e){return void 0===e&&(e=this.INFO),e<this._level||this._drivers.forEach((,this),this},logException:function(t){return this._drivers.forEach((,this),this},wrap:function(t,e){void 0===e&&(e=null);var n=this;return ,debug:function(t){return this.log(t,this.DEBUG)},info:function(t){return this.log(t,this.INFO)},warn:function(t){return this.log(t,this.WARN)},error:;u.addDriver(i)},function(t,e,n){var r=n(68);t.exports=function(t){return r(t,5)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(10),i=n(2);function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if("string"==typeof t&&(t={type:t}),Object(i.a)(t.preventDefault)){var e=!1;Object.defineProperties(t,{defaultPrevented:{get:function(){return e}},preventDefault:{value:function(){e=!0}}})}return t}var s=function(t){var e,n;function r(){var e;return(e=t.call(this)||this)._observers=[],e._asyncEventQueue=[],e._asyncEventQueueTimeout=null,e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var i=r.prototype;return i.emit=function(e){e=a(e),t.prototype.emit.call(this,e);for(var n=this._observers||[],r=0,i=n.length;r<i;r++)n[r](e);return e},i.emitAsync=function(t){var e=this;return t=a(t),setTimeout((function(n){e.emit(t)}),0),t},i.observe=function(t){this._observers.push(t)},i.unobserve=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},r}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){this._listeners={}}var e=t.prototype;return e.on=function(t,e,n){if(void 0===n&&(n={context:null,once:!1}),this._listeners[t]||(this._listeners[t]=[]),"function"==typeof e){var r={context:n.context,callback:e,once:n.once};return this._listeners[t].push(r),this.off.bind(this,t,e)}},e.one=function(t,e,n){return void 0===n&&(n={context:null}),n.once=!0,this.on(t,e,n)},e.off=function(t,e,n){void 0===n&&(n={once:!1,context:null}),this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(())},e.emit=function(t){for(var e=(this._listeners[t.type]||[]).concat(this._listeners.all||[]),n=0,r=e.length;n<r;n++){var i=e[n];i.once&&this.off(t.type,i.callback),i.callback.call(i.context,t)}return t},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r={};function i(t){return void 0===t&&(t="__default__"),r[t]||(r[t]=1),"__default__"!==t?t+":"+r[t]++:(r[t]++).toString()}},function(t,e,n){var r=n(133),i=n(134),o=n(135),a=n(136),s=n(137);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){on a(e){txt="";var n,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)t(i,s(e.substring(n-64,n)));e=e.substring(n-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(i,o),n=0;16>n;n++)o[n]=0;return o[14]=8*r,t(i,o),i}unction u(t){for(var e="",n=0;4>n;n++)e+=d[t>>8*n+4&15]+d[t>>8*n&15];return e}function c(t){return a(t))}r d="0123456789abcdef".split("");return c("hello"),c})?r.call(e,n,e,t):r)||(t.exports=i)},,function(t,e,n){var r=n(12)(n(6),"Map");t.exports=r},function(t,e,n){var r=n(6).Symbol;t.exports=r},function(t,e,n){var r=n(78)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return A}));var r=n(13),i=n(3),o=n(0),a=n(21),s=n(87),u=n(7),c=n(57);function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)function f(t,e){var n;n=t===o.B?{type:t,track:e,currentCues:e.activeCues||[]}:t===o.wb?{type:t,tracks:this.textTracks}:{type:t,track:e},this.emit(n)}function h(t){var e=this;this.textTracks.forEach())}function p(t,e){if("disabled"!==t.mode){var n=d(e),r=(t.index.byPosition[n]||[]).reduce((function(n,r){var i=t.cues[r];return i?(e>=i.startTime&&e<i.endTime&&(n.activeCues.push(i),n.activeCuesHash=n.activeCuesHash?n.activeCuesHash+","+r:r.toString()),n):n}),{activeCues:[],activeCuesHash:""});if(t.activeCuesHash!==r.activeCuesHash){for(var i=t.activeCues,a=0,s=i.length;a<s;a++)-1===r.activeCues.indexOf(i[a])&&i[a].onexit();t.activeCues=r.activeCues,t.activeCuesHash=r.activeCuesHash;for(var u=0,c=r.activeCues.length;u<c;u++)-1===i.indexOf(r.activeCues[u])&&r.activeCues[u].onenter();f.call(this,o.B,t)}}}function g(t){var e=this;return this.logger.debug("TextTracks: loading text track data from the remote source '"+t.url+"'"),new Promise((function(n,r){var i=new window.XMLHttpRequest;i.open("GET",t.url,!0),i.onload=function(r){e.logger.debug("TextTracks: text track data has finished loading from the remote source '"+t.url+"'"),n(i.responseText)},i.onerror=function(n){e.logger.debug("TextTracks: error while loading text track data from the remote source '"+t.url+"'"),r(new Error("the remote text track failed to load"))},i.ontimeout=function(n){e.logger.debug("TextTracks: loading of text track data timed out for the remote source '"+t.url+"'"),r(new Error("the remote text track timed out"))},i.onabort=function(n){e.logger.debug("TextTracks: loading of text track data has been aborted for the remote source '"+t.url+"'"),r(new Error("loading of the remote text track has been aborted"))},i.send()}))}function y(e){var n=this;return this.logger.debug("TextTracks: parsing text track data"),new Promise((function(i,o){var a=new r.WebVTT.Parser(window,r.WebVTT.StringDecoder()),s=[];a.oncue,a.onflush,a.onparsingerror;var u=t.VTTCue;try{t.VTTCue=r.VTTCue,a.parse(e),a.flush()}finally{t.VTTCue=u}}))}function m(t){return t.url&&0===t.cues.length&&("showing"===t.mode||"hidden"===t.mode)}function v(t){return t instanceof T||(t=this.createTextTrack(t)),"metadata"===t.kind&&"disabled"!==t.mode?t.mode="hidden":this.activeTracks[t.kind]||t.language!==this.options.language?t.mode="disabled":(t.mode="showing",this.activeTracks[t.kind]=t),this.textTracks.push(t),t}function b(t,e){if(e instanceof w||(e=this.createTextTrackCue(e)),!(e.startTime>e.endTime)){if("metadata"===t.kind){var n=JSON.parse(e.text);Object.defineProperties(e,{text:{get},metadata:{get:function(){return n}}})}return t.cues.push(e),t.reindex(),e}this.logger.warn("Invalid cue on text track '"+t.url+"': the start time '"+e.startTime+"' is greater than the end time '"+e.endTime+"'")}function _(t,e){t.cues=[],t.activeCues=[];for(var n=0,r=e.length;n<r;n++)b.call(this,t,e[n])}var A=function(t){var e,n;function a(e,n){var r;return void 0===n&&(n={}),(r=t.call(this)||this).player=e,r.options=n,r.textTracks=[],r.logger=n.logger||i.a,r.activeTracks={captions:null,subtitles:null,chapters:null},r.ontimeupdate=r.ontimeupdate.bind(r)),r.player.on(o.Z,r.ontimeupdate),r}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,l(e,n);var s=a.prototype;return s.ontimeupdate,s.addTextTrack=function(t){var e=this;if(t=v.call(this,t),this.logger.debug("TextTracks: added text track '"+t.id+"'"),m.call(this,t)){this.loadRemoteTextTrack(t).then())}else f.call(this,o.wb);return t},s.createTextTrack=function(t){return new T(t)},s.createTextTrackCue,s.clearTextTracks=function(){this.textTracks.length>0&&(this.logger.debug("TextTracks: Clearing "+this.textTracks.length+" text tracks"),this.textTracks=[],f.call(this,o.wb))},s.removeTextTrack=function(t){var e=this.textTracks.indexOf(t);-1!==e&&(this.logger.debug("TextTracks: removing text track '"+t.id+"'"),this.textTracks.splice(e,1),f.call(this,o.wb))},s.getTextTrackById=function(t){for(var e=0,n=this.textTracks.length;e<n;e++)if(this.textTracks[e].id===t)return this.textTracks[e]},s.setTextTrackMode=function(t,e){var n=this;if(t&&t.mode!==e){this.logger.debug("TextTracks: updating track '"+t.id+"' mode to '"+e+"'"),t.mode=e,"showing"===e?(this.activeTracks[t.kind]&&this.setTextTrackMode(this.activeTracks[t.kind],"disabled"),this.activeTracks[t.kind]=t):this.activeTracks[t.kind]===t&&(this.activeTracks[t.kind]=null);var r=function(e){f.call(n,o.wb),p.call(n,t,n.player.getPosition())};m.call(this,t)?this.loadRemoteTextTrack(t).then(r):r()}return t},s.loadRemoteTextTrack=function(t){var e=this;return g.call(this,t).then(y.bind(this)).then((function(n){_.call(e,t,n),f.call(e,o.xb,t)})).catch((function(t){e.logger.logException(t)}))},s.getTextTrackCueById=function(t,e){for(var n,r=0,i=t.cues.length;r<i;r++)if(t.cues[r].id===e){n=t.cues[r];break}return n},s.getTextTrackCueAsHTML,s.addTextTrackCue=function(t,e){if(t)return e=b.call(this,t,e),this.logger.debug("TextTracks: added cue to track '"+t.id+"'"),f.call(this,o.wb),p.call(this,t,this.player.getPosition()),e},s.clearTextTrackCues=function(t){if(t){this.logger.debug("TextTracks: clearing all cues from the track '"+t.id+"'");var e=t.activeCues.length>0;t.cues=[],t.activeCues=[],f.call(this,o.wb),t.reindex(),e&&f.call(this,o.B,t)}},s.removeTextTrackCue=function(t,e){var n=this.getTextTrackCueById(t,e);if(t&&n){this.logger.debug("TextTracks: removing cue '"+e+"' from the track '"+t.id+"'");var r=t.cues.indexOf(n);t.cues.splice(r,1),t.reindex(),f.call(this,o.wb),p.call(this,t,this.player.getPosition())}},s.getTextTracks,s.getTextTrackCuesAtPosition=function(t,e){return(t.index.byPosition[d(e)]||[]).reduce((function(n,r){var i=t.cues[r];return i&&e>=i.startTime&&e<=i.endTime&&n.push(i),n}),[])},s.setTextTracks=function(t){var e=this;this.textTracks=[],this.activeTracks={captions:null,subtitles:null,chapters:null};for(var n=[],r=0,i=t.length;r<i;r++){var a=v.call(this,t[r]);m.call(this,a)?n.push(this.loadRemoteTextTrack(a)):a.url||f.call(this,o.xb,a)}if(0===n.length)return f.call(this,o.wb);Promise.all(n).then((function(t){f.call(e,o.wb),h.call(e,e.player.getPosition())}),))},s.setTextTrackCues=function(t,e){_.call(this,t,e),f.call(this,o.wb),h.call(this,t)},s.destroy=function(){this.logger.debug("TextTracks: destroying all text tracks"),this.clearTextTracks(),this.player.off(o.Z,this.ontimeupdate)},a}(u.a),T=function(){function t(t){this.cues=[],this.activeCues=[],this.id=t.id||Object(a.a)("texttracks"),this.label=t.label,this.kind=t.kind||"metadata",this.mode="metadata"===this.kind?"hidden":"disabled",this.language=t.language||"en",t.src&&(this.url=t.src),t.url&&(this.url=t.url),this.activeCuesHash="",this.index={byPosition:{}}}return t.prototype.reindex=function(){for(var t=this.index,e=this.cues,n=e.length,r={},i=0;i<n;i++){var o=e[i];if(o)for(var a=Object(s.a)(d(o.startTime),d(o.endTime)),u=0,c=a.length;u<c;u++){var l=a[u];r[l]||(r[l]=[]),r[l].push(i)}}Object.keys(r).forEach())},t}(),w=function(){function t(t){this.id=t.id||Object(a.a)("texttrackcues"),this.startTime=t.startTime,this.endTime=t.endTime,this.text=t.text,Object(c.a)(t.onenter)&&(this.onenter=t.onenter),Object(c.a)(t.onexit)&&(this.onexit=t.onexit)}var e=t.prototype;return e.onenter=function(){},e.onexit=function(){},t}()}).call(this,n(16))},function(t,e,n){"use strict";e.a=function(t,e,n){void 0===n&&(n=1);for(var r=Math.ceil((e-t)/n),i=new Array(r),o=0;o<r;o++)i[o]=t+n*o;return i}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e,n){var r=n(150),i=n(157),o=n(159),a=n(160),s=n(161);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(31);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(32),i=n(47);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(29),i=n(20);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e,n){var r=n(171),i=n(50),o=n(51),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(32),i=n(54);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(84),i=n(54),o=n(47);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(12)(n(6),"DataView");t.exports=r},function(t,e,n){var r=n(12)(n(6),"Promise");t.exports=r},function(t,e,n){var r=n(12)(n(6),"Set");t.exports=r},function(t,e,n){var r=n(56);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e,n){var r=n(198),i=n(50),o=n(51),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(55),i=n(20);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e){var n=Object.create|()ototype=n(Error.prototype),r.prototype.constructor=r,r.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.prototype={set,get,has,alt,integer,percent};var u={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},l={v:"title",lang:"lang"},d={rt:"rrn h}var h=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114tr"}function{}y.prototype.applyS[n])},y.prototype.format:t+e},m.prototype=n(y.prototype),m.prototype.constructor=m,v.prototype-=e}},v.prototype.ove.top},v.prototype.overlarn!1},v.prototype.wight},v.prototype.overlapsOpposittom}},v.prototype.intersectPercedth)},v.prototype.toCSSCompatVdth}},v.getSimpleBoxPos||n}},_.StringDe))}}},_.convertCueToDOnull};_.procesate)},_.Pt=[]},_.Parser.prototype={reportOrThrowr(t)},this},this}},t.exports=_},function(t,e){var n={"":1,lr:1,rl:1},r={start:1,middle:1,end:1,left:1,rige())}function o(t,e,r){this.hasBeenReset=!1;var o="",a=!1,s=t,u=e,c=r,l=null,d="",f=!0,h="auto",p="start",g=50,y="middle",m=50,v="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o""+t}},pauseOnExit:{enumerable:!0,get:function(){return a=!!t}},startTime:{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");s=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return ut=!0}},text:{enumerable:!0,get:function(){return ct=!0}},region:{enumerable:!0,get:function(){return lt=!0}},vertical:{enumerable:!0,get:function(){return dt=!0}},snapToLines:{enumerable:!0,get:function(){return ft=!0}},line:{enumerable:!0,get:function(){return ht=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return g},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");g=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return mt=!0}},align:{enumerable:!0,get:function(){return vt=!0}}}),this.displayState=void 0}o.prototype.getCueAext)},t.exports=o},function(t,e){var n={"":!0,u=100}t.ex}}})}},function(t,e,n){"use strict";n.r(e),n.d(e,"players",(function(){return Ir}));n(88),n(100),n(107),n(112),n(115),n(116),n(117),n(119),n(120),n(124),n(126),n(128);var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"n!1}}(),s="FormData"in r,u="ArrayBuffer"in r;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isrototype.a+e:e},p.prototype.d(t)]},p.prototypnull},p.prototype.has=function(t){return this.map.hasOwnProperty(d(t))},p.prototype.set=function(t,e){this.map[d(t)]=f(e)},p.prototype.fohis)},p.prototypeh(t)},p.prototype.vh(t)},p.prototype.enh(t)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","t)}A.prototype.it})},b.call(A.prototype),b.call(w.prototype),w.prototype.rl})},w.r",t};var x=[301,302,303,307,308];w.redt}})};var k=r.DOMException;try{new k}catch(tack}).prototype=Object.create(Error.prototype),k.prototype.construc)}))}P.polyfill=!0,r.fetch||(r.fetch=P,r.Headers=p,r.Request=A,r.Response=w);var E=n(3),S=n(0),O=n(1),j={data:null,url:"",async:!0,timeout:5e3,method:"GET",username:void 0,password:void 0,headers:{},withCredentials:!1},C=window.DOMException;try{throw new C}catch(t){(C=function(t,e){this.message=t,this.name=e;var n=new Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),C.prototype.construc(t)}function R(t,e){void 0===e&&(e={}),e=Object.assign({},j,e);var n=new O.XMLHttpRequest,r=new Promise((function(r,i){n.onload=function(){var t,e;r({status:n.status||200,statusText:n.statusText||"OK",headers:(t=n.getAllResponseHeaders(),e={map:{},append:function(t,e){t=I(t),e=L(e),this.map[t]?this.map[t]+=", "+e:this.map[t]=e(t)]L(e)(t))}},t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();r&&e.append(r,n.join(":").trim())})),e),url:n.responseURL||n.getResponseHeader("X-Request-URL")||"",ok:n.status>=200&&n.status<300,xml:function(){if(n.responseXML)return Promise.resolve(n.responseXML);var t=new O.DOMParser;return Promise.resolve(t.parseFromString(n.responseText,"application/xml"))}ext)},json:function(){return Promise.resolve(this.text().then(JSON.parse))}})},n.onerror=function(){var t=new TypeError("Network request failed");t.name="Network",i(t)},n.ontii(t)},n.onr"))};try{n.open(e.method,t||e.url,e.async,e.username,e.password),n.timeout=e.timeout,Object.keys(e.headers).for[t])})),e.withCredentials&&(n.withCredentials=!0),n.send(e.data)}catch(t){i(t)}}));return r.crt()},r}var M=n(7),D=n(4),N=n.n(D);function B(t,e,n){if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)B(t,e[r],n);else{if(t.addEventListener)return t.addEventListener(e,n);if(t.on)return t.on(e,n)}}function U(t,e,n){if(1===arguments.length&&t.off)t._events={};else if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)U(t,e[r],n);else{if(t.removeEventListener)return t.removeEventListener(e,n);if(t.off)return t.off(e,n)}}function z(t,e){return t.dispatchEvent?t.dispatchEvent(e):t.trigger?t.trigger(e):t.emit?t.emit(e):void 0}function H(t,e,n){void 0===n&&(n="");var r=N()(e),i=""+n+e.type,o=e instanceof window.Event?new e.constructor(i,r):Object.assign(r,{type:i});return Object.defineProperty(o,"originalEvent"rn e}}),z(t,o)}function V(t,e){e.cancelBubble=!0,e.isImmediatePropagationStopped=function(){return!0},e.isPropagationStrn!0}}var F={off:U,on:B,once:function t(e,n,r){if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);else{B(e,n,(function t(i){U(e,n,t),r.call(this,i)}))}},redispatch:H,prefix:function(t,e){return V(0,e),H(t,e)},cancel:V,trigger:z},q=functs={}}var e=t.prototype;return e.on=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)this.on(t[n],e);else this._events[t]||(this._events[t]=[]),this._events[t].push(e)},e.off=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)this.off(t[n],e);else{if(!this._events[t])return;var i=this._events[t],o=i.indexOf(e);o>-1&&(i.splice(o,1),0===i.length&&delete this._events[t])}},t,e)},e.trigger=function(t){"string"==typeof t&&(t={type:t});for(var e=this._events[t.type]||[],n=0,r=(e=(e=e.concat(this._events.all||[])).slice(0)).length;n<r;n++)e[n].call(this,t)},t}();function W(t){void 0===t&&(t="");var e=t.replace(/([?|#].+$)/,"").match(/\.(\w+)$/);return e&&e[1]?e[1]:null}function G(t){for(var e in S.Lb)if(-1!==S.Lb[e].indexOf(t))return e;retof t}var X=n(2);function Y(t){return Object(X.a)(t)?"":Q(t)?W(t):t.type?G(t.type):W(t.url)}function Z(t,e){return void 0===e&&(e=navigator.userAgent),null!==e.match(t)}function J(t){return void 0===t&&(t=navigator.userAgent),Z(/\sEdge\/d+/i,t)}function K(t){return void 0===t&&(t=navigator.userAgent),Z(/iP(?:hone|ad|od)/i,t)}function $(t){return void 0===t&&(t=navigator.userAgent),Z(/gecko\//i,t)}function tt(t){return void 0===t&&(t=navigator.userAgent),Z(/\s(?:(?:Headless)?Chrome|CriOS)\//i,t)&&!st(t)&&!J(t)&&!Z(/UCBrowser/i,t)}function et(t){return void 0===t&&(t=navigator.userAgent),Z(/safari/i,t)&&!Z(/(?:Chrome|CriOS|chromium|android|phantom)/i,t)}function nt(t){return void 0===t&&(t=navigator.userAgent),Z(/Android/i,t)&&!Z(/Windows Phone/i,t)}function rt(t){return void 0===t&&(t=navigator.userAgent),!(!Z(/chrome\/[1-9]/i,t)||Z(/chrome\/18/i,t)||$)&&nt}function it(t){return void 0===t&&(t=navigator.userAgent),Z(/msie/i,t)||Z(/trident\/.+rv:\s*11/i)}function ot(t){return void 0===t&&(t=navigator.userAgent),J(t)||it(t)}function at(t){return void 0===t&&(t=navigator.userAgent),Z(/Macintosh/i,t)}function st(t){return void 0===t&&(t=navigator.userAgent),Z(/^Opera\/[._\d]+|Opera [._\d]+$|OPR\/[._\d]+/,t)}var ut,ct={isIn!0}}(),isMobile:(void 0===ut&&(ut=navigator.userAgent),K(ut)||nt(ut)||Z(/Windows Phone/i,ut)),browser:{name:function(t){switch(void 0===t&&(t=navigator.userAgent),!0){case tt(t):return"chrome";case $(t):return"firefox";case et(t):return"safari";case J(t):return"edge";case st(t):return"opera";case it(t):return"internet_explorer";case rt(t):return"android_native";default:return"unknown"}}(),version:function(t){var e,n,r,i;if(void 0===t&&(t=navigator.userAgent),tt(t)){var o=t.indexOf("Chrome");e=-1!==o?t.substring(o+7):t.substring(t.indexOf("CriOS")+6)}if(et(t)&&(e=t.substring(t.indexOf("Version")+8)),$(t)&&(e=t.substring(t.indexOf("Firefox")+8)),J(t)&&(e=t.substring(t.indexOf("Edge")+5)),it(t)&&(e=-1!==t.indexOf("rv:")?t.substring(t.indexOf("rv:")+3):t.substring(t.indexOf("MSIE")+5)),st(t)){var a=/^Opera\/([._\d]+)|Opera ([._\d]+)$|OPR\/([._\d]+)/.exec(t);e=a[1]||a[2]||a[3]}return e&&(-1!==(i=e.indexOf(";"))&&(e=e.substring(0,i)),-1!==(i=e.indexOf(" "))&&(e=e.substring(0,i)),-1!==(i=e.indexOf(")"))&&(e=e.substring(0,i)),n=parseInt(e,10),r=parseInt(e.split(".")[1],10)),{major:n,minor:r}}(),isIE:it(),isEdge:J(),isOpera:st(),isChrome:tt(),isSafari:et(),isFirefox:$(),isAndroidNative:rt()},platform:{name:function(t){switch(void 0===t&&(t=navigator.userAgent),!0){case nt(t):return"android";case K(t):return"ios";case at(t):return"mac";case ot(t):return"win";default:return"unknown"}}(),version:function(t){var e,n,r;if(void 0===t&&(t=navigator.userAgent),ot(t)){var i=/Windows(?: NT|)? ([._\d]+)/.exec(t);i&&("6.1"===(r=i[1])&&(r="7.0"),"6.2"===r&&(r="8.0"),"6.3"===r&&(r="8.1"))}if(nt(t)){var o=/Android ([._\d]+)/.exec(t);o&&(r=o[1])}if(K(t)){var a=/OS ([._\d]+)/.exec(t);a&&(r=a[1])}if(at(t)){var s=/Mac OS X ([._\d]+)/.exec(t);s&&(r=s[1])}if(r){var u=r.split(/[._]/);u.length>1?(e=parseInt(u[0],10),n=parseInt(u[1],10)):(e=parseInt(r,10),n=0)}return{major:e,minor:n}}(),isAndroid:nt(),isWindows:ot(),isIOS:K(),isMacintosh:at()},network:function(t){void 0===t&&(t=navigator.connection||navigator.mozConnection||navigator.webkitConnection);var e=!1,n="",r="",i="",o="";return t&&(e=!0,n=t.effectiveType,r=t.downlink,i=t.downlinkMax,o=t.rtt),{isAvailable:e,effectiveType:n,downlink:r,downlinkMax:i,rtt:ot,e)}S.cc;var dt=[S.ac,S.cc,S.bc],ft=ct.platform.isIOS?[S.Db,S.Cb,S.Kb,S.Mb,S.Ib,S.Jb,S.Fb,S.Gb,S.Eb]:[S.Db,S.Cb,S.Gb,S.Eb,S.Kb,S.Mb,S.Ib,S.Jb,S.Fb];function ht(t,e){var n=Y(t),r=Y(e),i=ft.indexOf(n),o=ft.indexOf(r);return-1===i||i>o?1:i<o?-1:0}var pt=function(t){var e=this,n=t.reduce((function(t,n){return e.player.canPlaySource(n)&&t.push(n),t}),[]);return n.sort(ht),n},gt=function(t){var e={};return t.reduce((function(t,n){var r=n.quality;return void 0===e[r]?e[r]=t.push({label:n.quality,bitrate:n.bitrate,sources:[n]})-1:t[e[r]].sources.push(n),t}),[])},yt=function(t){var e,n;function r(e,n){var r;return void 0===n&&(n={}),(r=t.call(this)||this).player=e,r.options=n,r.logger=n.logger||E.a,r.currentQualityLevels=[],r.currentQualityIndex=-1,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,lt(e,n);var i=r.prototype;return i.destroy=function(){this.clearLevels()},i.clearLx=-1},i.getCurrentLevel=function(){return this.currentQualityLevels[this.currentQualityIndex]},i.getQualityLevel=function(){return-1!==this.currentQualityIndex?this.currentQualityLevels[this.currentQualityIndex].label:this.options.qualityLevel},i.getQualityLevelIndex=function(){return this.currentQualityIndex},i.getQualityLl}))},i.setQualityLevel=function(t){if(this.getQualityLevel()!==t){for(var e=-1,n=0,i=this.currentQualityLevels.length;n<i;n++)if(this.currentQualityLevels[n].label===t){e=n;break}if(-1===e)return this.logger.warn("Levels: The change in quality could not be completed, there are no sources for the quality '"+t+"'"),!1;this.currentQualityIndex=e,this.trigger({type:r.EVENT_SELECT,level:this.currentQualityLevels[this.currentQualityIndex]})}},i.setQualityLevels=function(t){for(var e,n=this.getQualityLevel(),i=(e=dt,function(t,n){var r=t.label,i=n.label,o=t.bitrate,a=n.bitrate,s=e.indexOf(r),u=e.indexOf(i);if(-1!==s&&-1!==u){if(s>u)return 1;if(s<u)return-1}return a-o}),o=t.slice(0).sort(i),a=-1,s=0,u=o.length;s<u;s++)if(o[s].label===n&&o[s].sources&&o[s].sources.length>0){a=s;break}if(-1===a)for(var c=0,l=o.length;c<l;c++)if(o[c].sources&&o[c].sources.length>0){var d=o[c].label;a=c,this.logger.warn("Levels: The new levels list does not have a level for the current quality level setting '"+n+"', falling back to '"+d+"'");break}this.currentQualityLevels=o,this.currentQualityIndex=a,this.trigger({type:r.EVENT_CHANGE,levels:this.getQualityLevels(),level:this.currentQualityLevels[this.currentQualityIndex]})},i.setQualityLevelsFromPlaylistItem=function(t){var e=pt.call(this,t.audio);0===e.length&&(this.logger.warn("Levels: Unable to find any supported sources, using the sources as they appear in the playlist item"),e=t.audio);var n=gt.call(this,e);this.setQualityLevels(n)},r}(q);function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}yt.EVENT_CHANGE="change",yt.EVENT_SELECT="select";var vt=0,bt=function(){function t(t){this.id=++vt,this.metadata=t.metadata,this.ads=t.ads,this.text=t.text,this.audio=t.audio,this.links=t.links,this.tags=t.tags,this.syndicators=t.syndicators}return t.create=function(e){return new t(e)},t}(),_t=function(t){var e,n;function r(e,n){var r;return(r=t.call(this)||this).player=e,r.logger=n.logger||E.a,r.playlist=[],r.playlistIndex=-1,r.uidIndex={},r.repeat_=n.repeat||S.dc,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,mt(e,n);var i=r.prototype;return i.setRt_=t},i.setPlaylist=function(t){this.logger.debug("Playlist: Changing the active playlist"),t.items=t.items.map(bt.create),this.playlist=t,this.playlistIndex=-1,this.reIndex(),this.trigger({type:"change",added:0,loaded:t.items.length,total:this.playlist.items.length})},i.reIndex=function(){this.uidIndex=this.playlist.items.re=n,t}),{})},i.addPlaylistItems=function(t){this.playlist.items=this.playlist.items.concat(t.items.map(bt.create)),this.reIndex(),this.trigger({type:"change",added:t.items.length,loaded:0,total:this.playlist.items.length})},i.getPlaylist=function(t){return void 0===t&&(t=!1),t?this.playlist:this.playlist.items},i.getPlaylistItem=function(t){return Object(X.a)(t)&&(t=this.playlistIndex),Q(t)&&(t=this.getPlaylistIndexByUid(t)),!Object(X.a)(this.playlist.items)&&!Object(X.a)(this.playlist.items[t])&&this.playlist.items[t]},i.getPlaylistIndex=function(){return-1!==this.playlistIndex&&this.playlistIndex},i.getPlaylistIndexByUid=function(t){if(!Object(X.a)(this.uidIndex[t]))return this.uidIndex[t];for(var e=0,n=this.playlist.items.length;e<n;e++)if(this.playlist.items[e].metadata.uid===t)return e;return-1},i.getPlaylistMetadata=function(){return this.playlist&&this.playlist.metadata||null},i.nextPlaylistItem=function(){var t=this.playlistIndex+1;return t>=this.playlist.items.length?this.repeat_===S.ec?this.selectPlaylistItem(0):-1:this.selectPlaylistItem(t)},i.previousPlaylistItem=function(){var t=this.playlistIndex-1;return t<0?this.repeat_===S.ec?this.selectPlaylistItem(this.playlist.items.length-1):-1:this.selectPlaylistItem(t)},i.hasPlayliss[t]},i.selectPlaylistItem=function(t){return Object(X.a)(t)?-1:(Q(t)&&(t=this.getPlaylistIndexByUid(t)),t===this.playlistIndex||Object(X.a)(this.playlist.items[t])?-1:(this.logger.debug("Playlist: Changing the active playlist item to "+t),this.playlistIndex=t,this.trigger({type:"select",playlistItem:this.getPlaylistItem(),playlistIndex:this.playlistIndex}),t))},i.destroy=function(){this.clearPlaylist()},i.clearPlaylist=function(){this.playlist=[],this.playlistIndex=-1,this.uidIndex={}},i.deselectPlaylisx=-1},r}(q);_t.EVENT_CHANGE="change",_t.EVENT_SELECT="select";var At=n(86);function Tt(t,e,n){this.type=S.jb,this.originalEvent=n||null,this.details=e||{},this.details.event=t}function wt(t){return[S.Zb,S.Sb].includes(t.playlistItem.metadata.contentType)}function xt(t,e,n){return void 0!==e.position?e.position:void 0!==n.position?n.position:t.player.getPosition()}function kt(t,e,n){return wt(t)?-1:void 0!==e.duration?e.duration:void 0!==n.duration?n.duration:t.player.getDuration()}function Pt(t,e,n){if(wt(t))return 0;var r=xt(t,e,n),i=kt(t,e,n);return Math.floor(r/(i*t.percentileRatio))*(100*t.percentileRatio)}var Et={};function St(t,e){switch(e.metadata.contentType){case S.Ub:case S.Tb:case S.Vb:this.aduid=e.metadata.uid,this.percentileRatio=.25,this.percentileSeconds=0;break;case S.Zb:case S.Sb:this.uid=e.metadata.uid,this.percentileRatio=0,this.percentileSeconds=60;break;default:this.uid=e.metadata.uid,this.percentileRatio=.1,this.percentileSeconds=0}this.player=t,this.percentiles={},this.interrupted=!1,this.started=!1,this.completed=!1,this.playlistItem=e}Et.start=function(t,e,n){return void 0===n&&(n=null),t.started?null:(t.started=!0,e.position=0,e.percent=0,new Tt(S.tb,{uid:t.uid,aduid:t.aduid,position:0,percent:0,playlistItem:t.playlistItem},n))},Et.complete=function(t,e,n){if(void 0===n&&(n=null),t.completed||wt(t))return null;var r=kt(t,e,n);return e.duration=r,e.position=r,e.percent=100,t.completed=!0,new Tt(S.mb,{uid:t.uid,aduid:t.aduid,position:r,duration:r,percent:100,playlistItem:t.playlistItem},n)},Et.position=function(t,e,n){void 0===n&&(n=null);var r=xt(t,e,n);if(wt(t))return e.position=r=Math.floor(r/t.percentileSeconds)*t.percentileSeconds,0===r||t.percentiles[r]?null:(t.percentiles[r]=!0,new Tt(S.qb,{uid:t.uid,aduid:t.aduid,position:r,percent:0,playlistItem:t.playlistItem},n));var i=Pt(t,e,n);return t.percentiles[i]?null:0===i?Et.start(t,e,n):100===i?Et.complete(t,e,n):i<0||i>100?null:(e.percent=i,e.position=r,t.percentiles[i]=!0,new Tt(S.qb,{uid:t.uid,aduid:t.aduid,position:r,percent:i,playlistItem:t.playlistItem},n))},Et.pause=function(t,e,n){return void 0===n&&(n=null),t.interrupted=!0,new Tt(S.pb,{uid:t.uid,aduid:t.aduid,position:xt(t,e,n),percent:Pt(t,e,n),playlistItem:t.playlistItem},n)},Et.resume=function(t,e,n){if(void 0===n&&(n=null),t.started)return new Tt(S.rb,{uid:t.uid,aduid:t.aduid,position:xt(t,e,n),percent:Pt(t,e,n),playlistItem:t.playlistItem},n)},Et.mute=function(t,e,n){return void 0===n&&(n=null),t.interrupted=!0,new Tt(S.ob,{uid:t.uid,aduid:t.aduid,position:xt(t,e,n),percent:Pt(t,e,n),playlistItem:t.playlistItem},n)},Et.unmute=function(t,e,n){return void 0===n&&(n=null),new Tt(S.ub,{uid:t.uid,aduid:t.aduid,position:xt(t,e,n),percent:Pt(t,e,n),playlistItem:t.playlistItem},n)},Et.seek=function(t,e,n){return void 0===n&&(n=null),t.interrupted=!0,new Tt(S.sb,{uid:t.uid,aduid:t.aduid,position:xt(t,e,n),percent:Pt(t,e,n),playlistItem:t.playlistItem},n)},Et.adskip=function(t,e,n){return void 0===n&&(n=null),t.interrupted=!0,new Tt(S.lb,{uid:t.uid,aduid:t.aduid,position:xt(t,e,n),percent:Pt(t,e,n),playlistItem:t.playlistItem},n)},Et.download=function(t,e,n){return void 0===n&&(n=null),new Tt(S.nb,{uid:t.uid,aduid:t.aduid,position:xt(t,e,n),percent:Pt(t,e,n),playlistItem:t.playlistItem},n)},St.prototype.track=function(t,e){var n;switch(t.type){case S.V:n=Et.start(this,e,t);break;case S.A:n=Et.complete(this,e,t);break;case S.Z:n=Et.position(this,e,t);break;case S.eb:this.player._isStopping||(n=Et.seek(this,e,t));break;case S.w:n=Et.adskip(this,e,t);break;case S.P:n=Et.mute(this,e,t);break;case S.zb:n=Et.unmute(this,e,t);break;case S.R:n=Et.pause(this,e,t);break;case S.db:n=Et.resume(this,e,t);break;case S.D:n=Et.download(this,e,t)}n&&n.details.position>=0&&(n.details.isLive=wt(this),n.context=e,n.context.event=n.details.event,void 0===n.context.percent&&(n.context.percent=Pt(this,e,t)),this.player.emitt,0)}var jt,Ct,It=0,Lt=function(){function t(t,e){void 0===e&&(e={}),this.player=t,this.settings=Object.assign({},e),this.tracker=null,this.contentTracker=null,this.trackers={},this.logger=e.logger||E.a,this.handleEvent=this.handleEvent.bind(this),this.bindEvents()}var e=t.prototype;return e.getTrackingContext=function(){var t=Object.create(null);t.position=this.player.getPosition(),t.duration=this.player.getDuration(),t.muted=this.player.getMute(),t.volume=this.player.getVolume(),t.playbackRate=this.player.getPlaybackRate();var e=this.player.getSource();t.quality=e.quality,t.format=e.format,t.bitrate=e.bitrate,t.source=e.url;var n=this.player.playlist.getPlaylistItem(),r=n&&n.metadata||{};return t.contentType=r.contentType,t.uid=r.uid||e.url,t.creator=r.creator,t.grouping=r.grouping,t.publishDate=r.publishDate,t.title=r.title,t.tags=n&&n.tags||[],t},e.getTracker=function(t){return void 0===t?this.getTracker(this.tracker):this.trackers[t]?this.trackers[t]:null},e.getTrackerId=function(t){return t.id},e.addTracker=function(t){t.id=++It,this.trackers[t.id]=t},e.setTracker=function(t){if(null!==t){var e=this.getTrackerId(t);this.trackers[e]||this.addTracker(t),this.tracker=t.id}else this.tracker=null},e.createTrr,t)},e.setContentTracker=function(t){var e=this.getTrackerId(t);this.trackers[e]||this.addTracker(t),this.contentTracker=t.id},e.restoreContentTracker=function(){var t=this;this.tracker!==this.contentTrackerer))}))},e.bindEvents=function(){F.on(this.player,[S.db,S.R,S.ib,S.P,S.zb,S.Z,S.eb,S.M,S.X,S.E,S.V,S.A,S.Ab,S.w,S.v,S.D],this.handleEvent)},e.unbindEvents=function(){F.off(this.player,[S.db,S.R,S.ib,S.P,S.zb,S.Z,S.eb,S.M,S.X,S.E,S.V,S.A,S.Ab,S.w,S.v,S.D],this.handleEvent)},e.handleEvent=function(t){return t.type===S.X||t.type===S.E?null:t.type===S.w?(this.track(t),null):t.type===S.v||t.type===S.eb&&this.player.isLive()?null:(this.track(t),void(t.type===S.ib&&this.player.isLive()&&this.reset()))},e.track=function(t){var e=this.getTracker();if(e){var n=this.getTrackingContext();e.track(t,n)}},e.reset=function(){this.clear();var t=this.player.playlist.getPlaylistItem();if(t){var e=new St(this.player,t);this.setContentTracker(e),this.setTracker(e)}},e.null},e.denull},t}();function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(t){var e="function"==typeof Map?new Map:void 0;return(Mt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Dt(t,arguments,Ut(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bt(r,t)})(t)}function Dt(t,e,n){return(Dt=Nt()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Bt(i,n.prototype),i}).apply(null,arguments)}function Nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zt=((jt={})[S.c]=S.d,jt[S.g]=S.h,jt[S.e]=S.f,jt[S.n]=S.o,jt[S.l]=S.m,jt[S.p]=S.q,jt[S.i]=S.j,jt),Ht=((Ct={})[S.c]="aborted",Ct[S.g]="network",Ct[S.e]="decode",Ct[S.n]="notsupported",Ct[S.l]="invalid_source",Ct[S.p]="unknown",Ct[S.i]="no_source",Ct),Vt=[S.e,S.l,S.i,S.k],Ft=function(t){var e,n;function r(e,n){var i;void 0===e&&(e=S.p),void 0===n&&(n=null),n=n||zt[e]&&zt[e]||S.q;for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return i=t.call.apply(t,[this,n].concat(a))||this,Error.captureStackTrace&&Error.captureStackTrace(Rt(i),r),i.code=e,i.fatal=-1!==Vt.indexOf(e),i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Bt(e,n),r.prototype.getLocaleMessage=function(t){var e=Ht[this.code];return e&&t.error&&t.error[e]?t.error[e]:this.message},r.fromMediaError=function(t){switch(t.code){case O.MediaError.MEDIA_ERR_ABORTED:return new r(S.c,t.message,t.fileName,t.lineNumber);case O.MediaError.MEDIA_ERR_DECODE:return new r(S.e,t.message,t.fileName,t.lineNumber);case O.MediaError.MEDIA_ERR_NETWORK:return new r(S.g,t.message,t.fileName,t.lineNumber);case O.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:case O.DOMException.NOT_SUPPORTED_ERR:return new r(S.n,t.message,t.fileName,t.lineNumber);default:return new r(S.p,t.message,t.fileName,t.lineNumber)}},r}(Mt(Error));function qt(t){return null!==t&&"object"==typeof t&&"[object Object]"===t.toString()}function Wt(t){return S.Lb[t]&&S.Lb[t][0]||!1}function Gt(t){return-1!==S.Lb[S.Db].indexOf(t)}function Qt(t){return Array.isArray(t)}Ft.ABORTED=S.c,Ft.NETWORK=S.g,Ft.DECODE=S.e,Ft.UNKNOWN=S.p,Ft.SRC_NOT_SUPPORTED=S.n,Ft.SRC_INVALID=S.l,Ft.NO_PLAYABLE_SOURCES=S.i,Ft.PLAYLIST=S.k;var Xt=n(13),Yt=null;function Zt(t){return null===Yt&&(Yt=document.createElement("textarea")),Yt.innerHTML=t,Yt.value}function Jt(t){var e=t&&t.icons||[],n=t&&t.banners||[],r=t&&t.contentType||S.Yb,i=t&&t.duration||0,o=t&&t.publishDate||null;!o||o instanceof Date||(o=new Date(o));var a=Object.assign({uid:null,url:"",title:"",creator:"",grouping:"",description:"",language:"en"},t,{contentType:r,duration:r===S.Zb?-1:i,icons:e.map(Kt),banners:n.map(Kt),publishDate:o});return a.title=Zt(a.title),a.creator=Zt(a.creator),a.grouping=Zt(a.grouping),a.description=Zt(a.description),a}function Kt(t){return{size:t.size,url:t.url}}function $t(t){var e=Object.assign({contentType:S.Tb},t.metadata||{}),n=Object.assign({position:0,metadata:{},audio:[],companions:[],links:[],tags:[]},t,{metadata:Jt(e),played:!1,interrupted:!1,skipped:!1,complete:!1,loaded:!1});return e.contentType===S.Tb&&t.audio&&(n.audio=t.audio.map(ie)),"pre"===n.slot?n.position=0:"post"===n.slot&&(n.position=-1),0===n.position?n.slot="pre":-1===n.position?n.slot="post":n.slot="mid",n}function te(t){return{service:t.service||"all",name:t.name,value:t.value}}function ee(t){switch(t.kind){case"tracking":case"impression":case"error":return t;default:return{title:t.title,kind:t.kind||t.type,url:t.url,mime:t.mime,size:t.surl}}function re(t){Q(t)&&(t={audio:[ie(t)]});var e=Object.assign({metadata:{},ads:[],audio:[],text:[],tags:[],links:[],syndicators:[]},t);return e.metadata=Jt(t.metadata),e.ads=e.ads.map($t),e.audio=e.audio.map(ie),e.text=e.text.map(oe),e.tags=e.tags.map(te),e.links=e.links.map(ee),e.syndicators=e.syndicators.map(ne),e}function ie(t){Q(t)&&(t={url:t});var e=Object.assign({url:"",quality:!1,bitrate:0,filesize:0,mime:!1,format:!1,download:""},t);return e.url||(E.a.warn("Invalid audio source, missing required url"),e.url=""),e.format||(e.format=W(e.url)||G(e.mime)),e.mime||(e.mime=Wt(e.format)),e}function oe(t){var e=t.kind||"subtitles";-1===["subtitles","captions","chapters","metadata","descriptions"].indexOf(t.kind)&&(e="metadata");var n=t.mode||("metadata"===e?"hidden":"disabled");return{label:t.label||"",kind:e,mode:n,language:t.language||"en",url:t.src||t.url||""}}function ae(t){return{startTime:t.startTime,endTime:t.endTime,text:Xt.WebVTT.convertCueToDOMTree(window,t.text).inner||0}}var ue=n(21);function ce(t,e){E.a.debug("[RssParser] Parsing RSS");try{var n=(new DOMParser).parseFromString(t.trim(),"text/xml");if(n.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse rss feed contents");var r=function t(e){var n={};if(e.attributes&&e.attributes.length>0){n["@attributes"]={};for(var r=0;r<e.attributes.length;r++)n["@attributes"][e.attributes[r].nodeName]=e.attributes[r].nodeValue}for(var i=0;i<e.childNodes.length;i++)3!==e.childNodes[i].nodeType&&4!==e.childNodes[i].nodeType?void 0!==n[e.childNodes[i].tagName]?(Array.isArray(n[e.childNodes[i].tagName])||(n[e.childNodes[i].tagName]=[n[e.childNodes[i].tagName]]),n[e.childNodes[i].tagName].push(t(e.childNodes[i]))):n[e.childNodes[i].tagName]=t(e.childNodes[i]):""!==e.childNodes[i].textContent.trim()&&(n["#text"]=e.childNodes[i].textContent.trim());return n}(n.documentElement),i={title:r.channel.title["#text"],contentType:S.Xb,icons:[]},o=null,a=null,s=null;!Object(X.a)(r.channel["ionofm:coverart"])&&r.channel["ionofm:coverart"]["@attributes"].href&&(o=r.channel["ionofm:coverart"]["@attributes"].href,i.icons.push({size:"small",url:o})),!Object(X.a)(r.channel["ionofm:thumbnail"])&&r.channel["ionofm:thumbnail"]["@attributes"].href&&(a=r.channel["ionofm:thumbnail"]["@attributes"].href,i.icons.push({size:"medium",url:a})),!Object(X.a)(r.channel.image)&&r.channel.image.url["#text"]?(s=r.channel.image.url["#text"],i.icons.push({size:"large",url:s})):!Object(X.a)(r.channel["itunes:image"])&&r.channel["itunes:image"]["@attributes"].href&&(s=r.channel["itunes:image"]["@attributes"].href,i.icons.push({size:"large",url:s})),e(!1,{metadata:i,items:r.channel.item.reduce((function(t,e){if(Object(X.a)(e.enclosure))return E.a.warn("[RssParser] Ignoring RSS feed item because it has no enclosure"),t;if(Object(X.a)(e.title))return E.a.warn("[RssParser] Ignoring RSS feed item because it has no title"),t;var n,i,u={uid:e.guid["#text"]||Object(ue.a)(),title:e.title["#text"],description:Object(X.a)(e["itunes:summary"])?e.description["#text"]:e["itunes:summary"]["#text"],icons:[],url:Object(X.a)(e.link)?"":e.link["#text"],duration:Object(X.a)(e["itunes:duration"])?0:(n=e["itunes:duration"]["#text"],i=n.split(":").reverse(),parseInt(i.shift(),10)+60*(i[0]?parseInt(i.shift(),10):0)+60*(i[0]?parseInt(i.shift(),10):0)*60),publishDate:Object(X.a)(e.pubDate)?null:e.pubDate["#text"],creator:Object(X.a)(e["itunes:author"])?"":e["itunes:author"]["#text"]};!Object(X.a)(e["ionofm:coverart"])&&e["ionofm:coverart"]["@attributes"].href?u.icons.push({size:"small",url:e["ionofm:coverart"]["@attributes"].href}):o&&u.icons.push({size:"small",url:o}),!Object(X.a)(e["ionofm:thumbnail"])&&e["ionofm:thumbnail"]["@attributes"].href?u.icons.push({size:"medium",url:e["ionofm:thumbnail"]["@attributes"].href}):a&&u.icons.push({size:"medium",url:a}),!Object(X.a)(e.image)&&e.image.url["#text"]?u.icons.push({size:"large",url:e.image.url["#text"]}):!Object(X.a)(e["itunes:image"])&&e["itunes:image"]["@attributes"].href?u.icons.push({size:"large",url:e["itunes:image"]["@attributes"].href}):s&&u.icons.push({size:"large",url:s}),Object(X.a)(r.channel.language["#text"])||(u.language=r.channel.language["#text"]);var c=[{url:e.enclosure["@attributes"].url,filesize:parseInt(e.enclosure["@attributes"].length,10),mime:e.enclosure["@attributes"].type}];return u.download=e.enclosure["@attributes"].url,t.push({metadata:u,audio:c}),t}),[])})}catch(t){e(t,!1)}}function le(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");ret}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t}))(t)}var me=function(t){function e(e,n,r){var i;return void 0===r&&(r=!0),i=t.call(this,e)||this,Object.defineProperty(le(i),"code",{get:function(){return n}}),Object.defineProperty(le(i),"fatal",{get:function(){return r}}),i}return de(e,t),e}(fe(Error)),ve=function(t){function e(){return t.call(this,"Failed to parse playlist data","parse")||this}return de(e,t),e}(me),be=function(t){function e(){return t.call(this,"Network error while loading playlist url","network")||this}return de(e,t),e}(me),_e=function(t){function e(){return t.call(this,"Timeout while loading playlist URL","timeout")||this}return de(e,t),e}(me),Ae=function(t){function e(){return t.call(this,"Playlist loading has been cancelled by the user","abort",!1)||this}return de(e,t),e}(me),Te=functithis}return de(e,t),e}(me),we=function(t){function e(e,n){var r;return void 0===n&&(n={}),(r=t.call(this)||this).player=e,r.pending=null,r.logger=n.logger||E.a,r}de(e,t);var n=e.prototype;return n.load=function(t,e){var n=this;if(void 0===e&&(e={}),this.pending){var r=function(r){return n.load(t,e)};return this.pending.then(r,r)}this.trigger("loading");var i={},o=this.pending=new Proct=e})),a=function(t){t=function(t){var e={metadata:{uid:null,title:"",contentType:S.Xb,url:"",icons:[]},links:[],items:[]};return Qt(t)?e.items=t:qt(t)&&t.metadata&&t.metadata.contentType===S.Xb?(Object.assign(e.metadata,t.metadata),e.items=t.items):qt(t)&&t.url?e.items=[{audio:[t]}]:qt(t)&&t.audio?e.items=[t]:Q(t)&&(e.items=[{audio:[{url:t}]}]),e.items=e.items.map((function(t){return re(t)})),e.syndicators=(t.syndicators||[]).map((function(t){return ne(t)})),e}(t),n.logger.debug("SourceLoader: Source has been loaded",t),n.trigger("loaded"),i.resolve(t)},s=function(e){"abort"===e.code?(n.logger.warn("SourceLoader: Playlist loading has been cancelled by the user"),n.trigger("cancel")):"timeout"===e.code?(n.logger.warn("SourceLoader: Timeout while loading playlist URL",{source:t,error:e}),n.trigger("timeout")):"network"===e.code?(n.logger.warn("SourceLoader: Network error while loading playlist URL",{source:t,error:e}),n.trigger("error")):"parse"===e.code?(n.logger.warn("SourceLoader: Failed to parse playlist URL response"),n.trigger("error")):(n.logger.warn("SourceLoader: Unrecognized error while loading playlist URL"),n.trigger("error")),i.reject(e)};o.c Ae)},o.then((function(t){n.pending=nunull}));try{Q(t)?this.loadFromString(t,e).then(a,s):Qt(t)||qt(t)?a(t):s(new Te)}catch(t){s(t)}return o},n.c=!1)},n.loadFromString=function(t,n){var r=W(t);if(n&&n.input_type===e.TYPE_RSS||"rss"===r)return this.loadRss(t,n);if(n&&n.input_type===e.TYPE_PLAYLIST||"json"=f(t)}(r))return this.loadJson(t,n);this.logger.debug("SourceLoader: Loading direct source",t);var i=re(t);return n&&n.input_type&&i.metadata.contentType!==n.input_type&&(i.metadata.contentType=n.input_type),Promise.resolve(i)},n.loadUrl=function(t,e){var n=this;this.logger.debug("SourceLoader: Loading URL: "+t);var r=this.player.computed.replace(t,encodeURIComponent,e);return new Promise((function(t,e){R(r,{timeout:S.Ob}).then((function(r){if(!r.ok)return n.logger.debug("SourceLoader: URL returned error status code ["+r.status+"]"),e(new be);n.logger.debug("SourceLoader: URL loaded",r),t(r.text())}),(function(t){return"Abort"===t.name?e(new Ae):"Timeout"===t.name?e(new _e):e(new be)}))}))},n.loadRss=function(t,e){var n=this;return this.logger.debug("SourceLoader: Loading RSS feed: "+t),new Promise((function(r,i){n.loadUrl(t,e).then((function(e){ce(e,(function(e,o){e?(n.logger.error("SourceLoader: Error parsing RSS feed: "+e.message),i(new ve)):(o.metadata.url=t,r(o))}))}),i)}))},n.loadJson=function(t,e){var n=this,r=this;return this.logger.debug("SourceLoader: Loading JSON url: "+t),new Promise((function(i,o){n.loadUrl(t,e).then((function(e){r.logger.debug("SourceLoader: Parsing JSON object");try{var n=JSON.parse(e);Qt(n)?n={metadata:{contentType:S.Xb,url:t},items:n}:qt(n)&&n.metadata&&n.metadata.contentType===S.Xb&&!n.metadata.url&&(n.metadata.url=t),i(n)}catch(t){o(new ve)}}),o)}))},e}(q);we.TYPE_PLAYLIST="playlist",we.TYPE_STREAM="stream",we.TYPE_PODCAST="podcast",we.TYPE_RSS="rss";var xe=!1;function ke(){if(!1!==xe)return xe;var t={},e={},n=new Audio,r=function(t){return void 0!==e[t]||(e[t]=!1,null!==n.canPlayType(t).match(/probably|maybe/)&&(e[t]=!0),null!==t.match(S.Hb.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))&&ct.browser.isOpera&&ct.browser.version.major<33&&(e[t]=!1),Gt(t)&&window.Hls&&window.Hls.isSupported()&&(e[t]=!0)),e[t]};return Object.keys(S.Lb).forEach((function(e){t[e]=!1,S.Lb[e].for=!0)}))})),xe={formats:t,mimes:e,canPlayType:r}}function Pe(t){return ke().formats[te(t)}function Se(t,e){void 0===e&&(e=3);var n=Math.pow(10,e);return Math.round(tn)/n}var je=Se,Ce={},Ie={};Ce.init=function(t){if(Ce.isSupported()){var e=Object.assign({},Ie,t._options.hlsjs);e instanceof O.Hls?t._hlsjs=e:O.Hls&&(t._hlsjs=new O.Hls(e)),t._hlsjs.on(O.Hls.Events.LEVEL_LOlive})),t._hlsjs.on(O.Hls.Events.ERROR,(function(e,n){var r=n.type,i=n.details,o=n.fatal,a=n.err&&n.err.message;if(t._logger.warn("[Player] HLS Error: "+r+" ("+i+") - "+a),o){var s;switch(r){case O.Hls.ErrorTypes.NETWORK_ERROR:s=new Ft(Ft.NETWORK);break;default:s=new Ft(Ft.SRC_NOT_SUPPORTED)}t.handleEvent({type:S.G,error:s}),Ce.stopLoad(t)}}))}},Ce.loadSource=function(t,e,n){void 0===n&&(n=!1),Ce.stopLoad(t),n&&Ce.startLoad(t)},Ce.startLoad=function(t){Ce.existsOn(t)&&(Ce.destroy(t),Ce.init(t)),Ce.attach(t),t._hlsjs.once(O.Hls.Events.MEDIA_ATTACHED,(function(){var e=t.computed.replace(t.getCurrentSource(),encodeURIComponent);t._hlsjs.loadSource(e),t._hlsjs.startLoad()}))},Ce.emptySource=function(t){Ce.stopLoad(t)},Ce.stopLoad=function(t){t._hlsjs.stopLoad(),Ce.isAttached(t)&&Ce.detach(t)},Ce.adia)},Ce.dia()},Ce.isAttedia},Ce.exilsjs},Ce.destroy=function(t){Ce.existsOn(t)&&(t._hlsjs.destroy(),t._hlsjs=!1)},Ce.isSupported=function(){return!document.createElement("audio").canPlayType("application/vnd.apple.mpegurl").match(/probably|maybe/)&&!(!O.Hls||!O.Hls.isSupported())};var Le=Ce;function Re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(t,e){return(Me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var De=["loadstart","loadeddata","loadedmetadata","waiting","stalled","suspend","play","pause","playing","seeking","seeked","ratechange","volumechange","durationchange","timeupdate","progress","error","ended","canplay","canplaythrough","emptied"],Ne="data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAAABmYWN0BAAAAAAAAABkYXRhAAAAAA==",Be=function(t){return Q(t)?Gt(Wt(W(t))):qt(t)&&t.type?Gt(t.type):qt(t)&&t.url?Gt(Wt(W(t.url))):void ==Ne},ze=function(){He.call(this),this.playlist.deselectPlaylistItem(),this.textTracks.clearTextTracks(),this.tracking.clear(),this.levels.clearLevels(),this._readyQueue=[],this._isLive=!1,this._streamStartTime=null,this._hasLoadedSource=!1,this._supportedSources=!1,this._hasPlayed=!1,this._seekOnLoad=0,this._model.duration=0,this._model.currentTime=0,this._model.paused=this._media.paused,this._durationChangeThreshold=2},He=function(){Le.existsOn(this)&&Be(this._model.currentSource)?Le.emptySource(this):this._media&&this._media.src&&!Ue(this._media.src)&&this.stopLoad(),this._model.source=!1,this._model.currentSource=null,this._model.error=!1,this._model.duration=0,this._model.buffered=!1,this._model.paused=!0},Ve=function(){var t=this,e=function(e){t._hasPlayed?t.emit(S.db):t._hasPlayed=!0},n=this._media.play();void 0!==n?n.then(e).catch((function(e){t._logger.warn("Player: Error in play promise while starting playback: "+e.message),t.setState(t._canPlay?S.mc:S.jc)})):e()},Fe=function(){try{this.emit(S.R),this._state===S.nc&&this.setState(S.mc),this._model.paused=!0,this._media.pause()}catch(t){this._logger.warn("Player: Error attempting to pause playback: "+t.message)}},qe=function(){if(this._streamReconnectAttempts++>=3)return this._streamReconnectAttempts=0,void this.setError(new Ft(Ft.NETWORK));var t=!this.isPaused();this.stopLoad(),this.startLoad(),t&&this.play()},We=function(t){var e,n;function r(e){var n;return(n=t.call(this)||this).computed=e.computed,n._state=S.hc,n._media=null,n._readyQueue=[],n._isLive=!1,n._hasLoadedSource=!1,n._canPlay=!1,n._supportedSources=!1,n._playOnLoad=!1,n._hasPlayed=!1,n._seekOnLoad=0,n._streamStartTime=null,n._streamReconnectAttempts=0,n._logger=E.a,n._loader=new we(Re(n),{logger:E.a}),n._model={paused:!0,autoplay:!1,preload:!1,playbackRate:1,volume:1,muted:!1,duration:0,currentTime:0,source:!1,currentSource:null,error:null},Object.defineProperty(Re(n),"loaded"tate},enumerable:!1,configurable:!1}),n.setup(e),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Me(e,n);var i=r.prototype;return i.setup=function(t){var e=this;this._options=t,this._logger=t.logger||E.a,this._model.autoplay=t.autoplay,this._model.preload=t.preload,this._model.playbackRate=t.playbackRate,this._model.volume=t.volume,this._model.muted=t.muted,this.textTracks=new At.a(this,t),this.textTracks._listeners=this._listeners,this.textTracks._observers=this._observers,this.playlist=new _t(this,t),this.tracking=new Lt(this,t),this.levels=new yt(this,t);F.on(this.playlist,[_t.EVENT_CHANGE,_t.EVENT_SELECT],(function(t){var n=e.playlist.getPlaylistIndex(),r=e.playlist.getPlaylistItem();e._hasPlayed=!1,t.type===_t.EVENT_CHANGE&&e.emit({type:S.W,added:t.added,loaded:t.loaded,total:t.total}),e._addingPlaylistItems?e._addingPlaylistItems=!1:(t.type===_t.EVENT_SELECT&&e.emit({type:S.X,playlistItem:r,playlistIndex:n}),!1!==n?e.loadSource(r):He.call(e))})),F.on(this.levels,[yt.EVENT_CHANGE,yt.EVENT_SELECT],(function(t){if(t.type===yt.EVENT_CHANGE)e.emit({type:S.J,levels:t.levels,level:t.level}),t.level?e.setSource(t.level.sources[0]):e.setError(new Ft(Ft.NO_PLAYABLE_SOURCES));else if(t.type===yt.EVENT_SELECT){if(t.level){var n=!e.isPaused(),r=e.getPosition();e.setSource(t.level.sources[0]),e.emit({type:S.K,level:t.level}),n&&(e.startLoad(),e._media.play()),r>0&&e.setPosition(r)}}else He.call(e)})),this.setupAudio(t),this.setupHls(t)},i.setupAudio=function(t){var e=this,n=t.media||document.createElement("audio");return n.autoplay=t.autoplay,n.preload=t.preload,n.defaultPlaybackRate=n.playbackRate=t.playbackRate,n.volume=t.volume,n.muted=t.muted,F.on(n,De,this._logger.wrap((function(t){e.handleEvent(t)}))),this._media=n,n},i.setupHls=function(t){!1!==t.hlsjs&&Le.isSupported()&&Le.init(this,t.hlsjs)},i.load=function(t,e){var n=this;this._addingPlaylistItems=!1,ze.call(this),this.setState(S.kc),this.emit({type:S.Y,mode:"load"});this._loader.load(t,e).then((function(t){if(!1===t)return n.setError(new Ft(Ft.SRC_INVALID));n.playlist.setPlaylist(t),n.playlist.selectPlaylistItem(0),n.emit(S.L),n._playOnLoad&&(n._logger.log("Player: Start playback once playlist item has loaded","debug2"),n._playOnLoad=!1,n.play(ge))}))},i.add=function(t,e){var n=this;this._addingPlaylistItems=!0;var r=this.getState();this.emit({type:S.Y,mode:"add"});this._loader.load(t,e).then((function(t){n.playlist.addPlaylistItems(t),n._playOnLoad?(n._playOnLoad=!1,n.play()):n.setState(r)})).ce(r)}))},i.unload=function(){He.call(this),this.playlist.clearPlaylist(),this.levels.clearLevels(),this.textTracks.clearTextTracks(),this.tracking.clear(),this._state=S.hc,this._hasPlayed=!1,this._model.position=0,this._model.duration=0,this.emit(S.yb)},i.loadSource=function(t){this._logger.log("Player: loading a playlistItem object into the player","debug2");var e=this.tracking.createTracker(t);this.tracking.clear(),this.tracking.setTracker(e),He.call(this),this.textTracks.setTextTracks(t.text),this.levels.setQualityLevelsFromPlaylistItem(t),this._isLive=!1,t.metadata.contentType===S.Sb||t.metadata.contentType===S.Zb||t.metadata.duration<0?this._isLive=!0:"number"==typeof t.metadata.duration&&(this._model.duration=t.metadata.duration,this.emit({type:S.E,duration:this._model.duration}))},i.startLoad=function(){if(this._state===S.jc||this._state===S.ic){this.setState(S.oc);var t=this._model.source,e=this._model.currentSource;if(Be(t)&&Le.existsOn(this))Le.startLoad(this);else{this._logger.log("Player: Begin loading audio source '"+e+"'","debug2");var n=this.computed.replace(e,encodeURIComponent);this._media.src=n,this._media.load()}}},i.getSource=function(){return this._model.source},i.getCurrentSource=function(){return this._model.currentSource},i.setSource=function(t){var e=this.getSource();if(!e||t.url!==e.url){if(e&&He.call(this),this._model.source=t,this._model.currentSource=t.url,this.emit({type:S.gb,source:t,currentSource:t.url}),t.mime){if(!this.canPlaySource(t))return this.setError(new Ft(Ft.SRC_NOT_SUPPORTED))}else this._logger.warn("[Player] Loading potentially unsupported playback source, a mime type could not be determined");this.setState(S.jc),this._options.preload&&this.startLoad()}},i.destroy=function(){this._logger.log("Player: Destroying player instance","debug2"),He.call(this),this.textTracks.destroy(),this.playlist.destroy(),this.tracking.destroy(),this.levels.destroy(),this._media&&(F.off(this._media,De,this),this._media=null),F.off(this),this.setState(S.hc),this.emit(S.C)},i.canPlayFormat=function(t){return Pe(t)},i.canPlaySource=function(t){return function t(e){if(qt(e))return e.mime?Ee(e.mime):e.format?Pe(e.format):!!e.url&&t(e.url);if("string"==typeof e){var n=W(e);if(n)return Pe(n)}return!1}(t)},i.canPlayType=function(t){return Ee(t)},i.isEnded=function(){return this._media.ended},i.isPaused=function(){return this._model.paused},i.isLive=function(){return this._isLive||this._media&&this._hasLoadedSource&&(-1===this._media.duration||this._media.duration===1/0)},i.isSeekable=function(t){if(this.isLive())return!1;var e=this.getSeekable();return 0!==e.length&&(t>=e.start(0)&&t<=e.end(e.length-1))},i.getPosition=function(){return this._model.currentTime},i.getDuration=function(){return this.isLive()?-1:this._model.duration},i.play=function(){try{if(this._state===S.kc)return void(this._playOnLoad=!0);if(this._model.paused=!1,this._state===S.jc||this._state===S.ic)return void this.startLoad();this._canPlay&&(this._stalled&&this.isLive()&&qe.call(this),Ve.call(this))}catch(t){this._logger.warn("Player: Error attempting to start playback: "+t.message)}},i.pause=function(){Fe.call(this),this.isLive()&&(Le.isAttached(this)?Le.stopLoad(this):this.stopLoad(),this._canPlay=!1,this.setState(S.jc))},i.stop=function(){var t=this;this._isStopping=!0,this.isPaused()||Fe.call(this),setTimeout((function(e){t._isStopping=!1,t.emit(S.ib),t._isLive&&(Le.isAttached(t)?Le.stopLoad(t):t.stopLoad(),t._canPlay=!1,t._hasPlayed=!1,t.setState(S.jc)),t._canPlay&&(t._media.currentTime=0)}),1)},i.stopLoad=function(){this._media.src=Ne,this._media.load()},i.getPlaybackRate=function(){return this._model.playbackRate},i.setPlaybacte=t},i.getBuffered=function(){return this._model.buffered&&this._model.buffered.length>0?this._model.buffered:[]},i.getBufferedPercentage=function(){var t=this.getBuffered(),e=this.getDuration();if(t.length>0&&e>0){var n=t.end(t.length-1)/e*100;return Math.min(100,Math.max(0,n))}return 0},i.getSeeable},i.bac)-t)},i.fo)+t)},i.setPosition=function(t){return this._state===S.hc?-3:this._isLive?-1:this._state===S.jc?(this.startLoad(),void(this._seekOnLoad=t)):this._state!==S.oc||this._canPlay?t>this.getDuration()?-2:(this._media.currentTime=t,t):void(this._seekOnLoad=t)},i.getMute=function(){return this._model.muted},i.seed=t},i.setVolume=function(t){this._media.volume=je(t,2),this._media.muted&&this.setMute(!1)},i.getVe||1},i.getPreload=function(){return this._options.preload},i.setPreload=function(t){var e=t;this._options.preload=t,!0===e?e="auto":!1===e&&(e="none"),this._media.preload=e,"none"!==e&&this.startLoad()},i.getMedia=function(){return this._media},i.getrror},i.setError=function(t){this._model.error=t,this._model.paused=!0,this.setState(S.ic),this.emit({type:S.G,error:t})},i.getState=function(){return this._state},i.setState=function(t){if(this._state!==t){var e=this._state;switch(this._state=t,this.emit({type:S.hb,previousState:e,currentState:t}),t){case S.hc:this._canPlay=!1,this.emit(S.F);break;case S.kc:this._canPlay=!1,this.emit(S.N);break;case S.nc:this._canPlay=!0,this._model.paused=!1,this.emit(S.V);break;case S.mc:this._canPlay=!0,this._model.paused=!0,this.emit(S.S);break;case S.oc:this._canPlay=!1,this.emit(S.Bb)}}},i.getEnvironment=function(){return ct},i.handleEvent=function(t){var e=this._media?this._media.currentSrc:"";if(!Ue(e)&&this._state!==S.hc){if(this._logger.log("Player: HTML5 Event: "+t.type,"debug2"),this.isLive()&&("seeking"===t.type||"seeked"===t.type))return!1;if("stalled"===t.type&&(this._stalled=!0),"playing"!==t.type&&"error"!==t.type&&"suspend"!==t.type||(this._stalled=!1),"error"===t.type){if(this._state===S.hc||Ue(e))return;var n=this.levels.getCurrentLevel(),r=!0,i=t.error||new Ft(Ft.UNKNOWN);if(this._state!==S.kc&&n&&n.sources&&n.sources.length>0){var o=this.getSource(),a=n.sources.indexOf(o)+1;if(a<n.sources.length){this._logger.warn("Player: Playback error while buffering audio source, trying the next supported source."),r=!1;var s=n.sources[a],u=this._seekOnLoad||this.getPosition(),c=this._playOnLoad||!this.isPaused();return this.stopLoad(),this.setSource(s),this.startLoad(),this._playOnLoad=c,void(this._seekOnLoad=u)}}return this._media.error&&(this._logger.warn("Player: HTML5 playback error: ["+this._media.error.code+"] "+this._media.error.message),i=Ft.fromMediaError(this._media.error)),void(r&&this.setError(i))}if("pause"===t.type)return this._model.paused=!0,this.getState()===S.nc?this.setState(S.mc):void 0;if("play"===t.type)return this._model.paused=!1,void this.emit(S.T);if("volumechange"===t.type)return this._model.volume=this._media.volume,this._model.muted!==this._media.muted&&(this._model.muted=this._media.muted,this.emit(this._model.muted?S.P:S.zb)),this.emit({type:S.Ab,volume:this._model.volume,muted:this._model.muted});if("durationchange"===t.type){var l=this._media?this._media.duration:0,d=this._model.duration,f=this.playlist.getPlaylistItem(),h=je(d,3),p=je(l,3);if((isNaN(l)||l===1/0||this.isLive())&&(p=-1),f.metadata.duration>0&&p<=0)return;if(p===h)return;if(this._model.duration=p,-1!==p&&Math.abs(h-p)<=this._durationChangeThreshold)return;return this._logger.log("Player: Duration has changed to: "+p,"debug2"),f&&(f.metadata.duration=p),this._media&&this._hasLoadedSource&&-1===p&&(this._logger.log("Player: New duration indicates a live stream","debug2"),this._isLive=!0),this.emit({type:S.E,duration:this._model.duration})}if("seeking"===t.type)return this.emit({type:S.eb,position:this._media.currentTime});if("timeupdate"===t.type){if(this._media){var g=0,y=this._model.currentTime;if(this.isLive()?(null===this._streamStartTime&&(this._streamStartTime=this._media.currentTime),g=je(this._media.currentTime-this._streamStartTime,2)):g=je(this._media.currentTime,2),g===y)return;this._model.currentTime=Math.max(0,g)}else this._model.currentTime=0;return this.emit({type:S.Z,position:this.getPosition(),duration:this.getDuration()})}if("ratechange"===t.type)return this._model.playbackRate=this._media.playbackRate,this.emit({type:S.U,playbackRate:this._model.playbackRate});if("waiting"===t.type&&"loading"!==this._state)return this.setState(S.oc);if("canplay"!==t.type&&"canplaythrough"!==t.type||(this._canPlay=!0,this._streamReconnectAttempts=0),"loadeddata"!==t.type&&"loadedmetadata"!==t.type||(this._canPlay||(this._canPlay=!0),this._state===S.oc&&((this._playOnLoad||!this._model.paused&&this._model.paused!==this._media.paused)&&(this._playOnLoad=!1,Ve.call(this)),this._model.paused&&this.setState(S.mc),this._seekOnLoad>0&&(this.setPosition(this._seekOnLoad),this._seekOnLoad=0))),"playing"===t.type)return this.setState(S.nc);if("emptied"!==t.type){if("loadstart"===t.type){if(!this._media||Ue(this._media.src))return;return this._canPlay=!1,this._stalled=!1,this._model.error=!1,this.emit({type:S.O,source:this.getSource().url}),this.setState(S.oc)}if("progress"===t.type)return this._model.buffered=!!(this._media&&this._media.buffered.length>0)&&this._media.buffered,this.emit({type:S.ab,buffered:this.getBuffered(),bufferedPercentage:this.getBufferedPercentage()});if("ended"===t.type){if(this._model.paused=!0,this.isLive())return;return this.emit({type:S.A,position:this.getPosition(),duration:this.getDuration()})}this.emit(t.type)}else this._model.currentTime=0}},r}(M.a);function Ge(t,e,n){var r=t.includes("?");if(t.includes(e+"=")){var i=new RegExp(e+"=[^&?]+","i");return t.replace(i,e+"="+n)}return t+(r?"&":"?")+e+"="+n}function Qe(t,e){var n=new RegExp(e+"=([^&?]+)","i"),r=t.match(n);return r&&r[1]?r[1]:null}var Xe=function(){function t(e){if(!t.isSupported())throw new Error("Cannot start the IMA ad provider: IMA SDK not loaded or not supported");this.logger=e.logger,this._advertising=e,this._contentPlayer=e.content,this._inAdBreak=!1,this._initialized=!1,this._schedule=[],this.onContentComplete=this.onContentComplete.bind(this)}var e=t.prototype;return e.inAdBreak=function(){return this._inAdBreak},e.init=function(){if(!this._initialized){this._initialized=!0;try{var t=this._advertising.getAdContainer(),e=this._advertising.getAdCustomClickTracker();this._adContainer=t,this._adClickTracker=e,this._adDisplayContainer=new O.google.ima.AdDisplayContainer(t,this._contentPlayer.getMedia()),this._adDisplayContainer.initialize(),this._adsLoader=new O.google.ima.AdsLoader(this._adDisplayContainer),this._adsManager=null,this._adsLoader.getSettings().setVpaidMode(O.google.ima.ImaSdkSettings.VpaidMode.ENABLED),this._adsLoader.getSettings().setPlayerType("iono-player"),this._adsLoader.getSettings().setPlayerVersion(S.pc),this._adsLoader.getSettings().setAutoPlayAdBreaks(!0),this._adsLoader.addEventListener(O.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1,this),this._adsLoader.addEventListener(O.google.ima.AdsManagerLoadedEvent.Type.AD_ERROR,this.onAdError,!1,this),this._contentPlayer.on(S.A,this.onContentComplete)}catch(t){this.logger.warn("Failed to initialize IMA SDK: "+t.getMessage())}}},eer()},e.destroy=function(){this._contentPlayer.off(S.A,this.onContentComplete),this.destroyAdsManager(),this._adsLoader&&(this._adsLoader.removeEventListener(O.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1,this),this._adsLoader.removeEventListener(O.google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError,!1,this),this._adsLoader.destroy(),this._adsLoader=null),this._adDisplayContainer&&(this._adDisplayContainer.destroy(),this._adDisplayContainer=null,this._adDisplayContainerInitialized=!1),this._adClickTracker=null,this._currentAd=null,this._currentPlayerAd=null,this._inAdBreak=!1,this._initialized=!1},e.startPreroll=function(){var t=this;return 0===this._schedule.length?Promise.resolve(!1):(this.init(),this._adsLoader?(this._currentPlayerAd=this._schedule[0],this.requestAds(this._currentPlayerAd.metadata.url),new Promise((function(e,n){var r=function(e){t._adsLoader.removeEventListener(O.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i,!1,t),t._adsLoader.removeEventListener(O.google.ima.AdErrorEvent.Type.AD_ERROR,o,!1,t)},i=function(n){r(),-1!==t._adsManager.getCuePoints().indexOf(0)?(t.onAdBreakStart(),e(!0)):e(!1)};t._adsLoader.addEventListener(O.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i,!1,t);(!1)};t._adsLoader.addEventListener(O.google.ima.AdErrorEvent.Type.AD_ERROR,o,!1,t)}))):Promise.resolve(!1))},e.startPostroll=function(){return-1!==(this._adsManager&&this._adsManager.getCuePoints()||[]).indexOf(-1)?(this.onAdBreakStart(),Promise.resolve(!0)):Promise.resolve(!1)},e.getCurrentAd=function(){return this._currentAd},e.getCurrentPlayerAd=function(){return this._currentPlayerAd},e.getDur():0},e.getRemaininon()},e.getPosition=function(){var t=this.getRemainingTime();return t<0?0:this.getDuration()-t},e.getSkipO):-1},e.getSource=function(){if(this._currentPlayerAd)return this._currentPlayerAd.audio[0]},e.isSkipte()},e.requestAds=function(t){this.init(),this.logger.debug("IMA: requesting ad from '"+t+"'"),"audio"!==Qe(t,"ad_type")&&this.logger.warn("IMA: loading an adTagUrl that does NOT specify ad_type=audio, if this ads creative has visuals they may not be visible"),this._contentCompletedCalled=!1,this._allAdsCompeleted=!1,this._adTagUrl=t;var e=new O.google.ima.AdsRequest;e.adTagUrl=t,e.vastLoadTimeout=this._advertising.options.timeout,e.linearAdSlotWidth=this._adContainer.clientWidth,e.linearAdSlotHeight=this._adContainer.clientHeight,e.nonLinearAdSlotWidth=e.linearAdSlotWidth,e.nonLinearAdSlotHeight=e.linearAdSlotHeight,e.setContinuousPlayback(!0),this._adsLoader.requestAds(e)},e.pause=function(){this._adsManager&&this._adsManager.pause()},e.resume=function(){this._adsManager&&this._adsManager.resume()},e.resize=function(t,e){this._adsManager&&this._adsManager.resize(t,e,O.google.ima.ViewMode.NORMAL)},eip()},e.destroyAdsMaull)},e.startAdsManager=function(t){this.logger.debug("IMA: starting ads manager"),t.addEventListener(O.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),t.addEventListener(O.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),t.addEventListener(O.google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,!0),t.addEventListener(O.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted,!1,this),t.addEventListener(O.google.ima.AdEvent.Type.COMPLETE,this.onAdComplete,!1,this),t.addEventListener(O.google.ima.AdEvent.Type.LOADED,this.onAdLoaded,!1,this),t.addEventListener(O.google.ima.AdEvent.Type.STARTED,this.onAdStarted,!1,this),t.addEventListener(O.google.ima.AdEvent.Type.AD_PROGRESS,this.onAdProgress,!1,this),t.addEventListener(O.google.ima.AdEvent.Type.SKIPPED,this.onAdSkipped,!1,this),t.addEventListener(O.google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onAdSkipStateChanged,!1,this),t.init(this._adContainer.clientWidth,this._adContainer.clientHeight,O.google.ima.ViewMode.NORMAL),t.start()},e.onAdBreakStart=function(){this.logger.debug("IMA: ad break started"),this._inAdBreak=!0,this._advertising.onAdBreakStart()},e.onAdBreakEnd=function(){this.logger.debug("IMA: ad break ended"),this._inAdBreak=!1,this._advertising.onAdBreakEnd()},e.onAdError=function(t){this.logger.error("IMA: "+t.getError().getMessage()),this.destroyAdsManager(),this._inAdBreak=!1,this._contentPlayer.play()},e.onAdLoaded=function(t){this.logger.debug("IMA: ad loaded"),t.getAd().isLinear()||this.onContentResumeRequested()},e.onAdSkipped=function(t){this.logger.debug("IMA: ad skipped");var e=this._currentPlayerAd;this._currentAd=null,this._currentPlayerAd=null,this._currentPlayerTracker=null,this._advertising.onAdSkip(e)},e.onAdSkipStateChanged=function(t){this._adsManager&&this._adsManager.getAdSkippableState()&&(this.logger.debug("IMA: ad became skippable"),this._advertising.onAdSkippable())},e.onAdComplete=function(t){this.logger.debug("IMA: ad complete");var e=t.getAd().getAdPodInfo(),n=this._currentPlayerAd;this._currentAd=null,this._currentPlayerAd=null,this._currentPlayerTracker=null,this._advertising.onAdEnd(n);var r=e.getIsBumper(),i=e.getAdPosition()===e.getTotalAds();(r||i)&&this.onAdBreakEnd()},e.onAdProte()},e.onAdStarted=function(t){this.inAdBreak()||this.onAdBreakStart(),this.logger.debug("IMA: ad started"),this._currentAd=t.getAd(),this._currentPlayerAd=function(t){var e={uid:t.getAdId(),contentType:S.Vb,creator:t.getAdvertiserName(),title:t.getTitle(),description:t.getDescription(),duration:t.getDuration(),vastCreativeId:t.getCreativeId(),url:t.g.clickThroughUrl},n=new O.google.ima.CompanionAdSelectionSettings;n.creativeType=O.google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE,n.resourceType=O.google.ima.CompanionAdSelectionSettings.ResourceType.STATIC,n.sizeCriteria=O.google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;var r=[];try{r=t.getCompanionAds(0,0,n).map((function(t){return{type:t.g.resourceType.toLowerCase(),url:t.g.resourceValue,content:t.getContent(),width:t.getWidth(),height:t.getHeight()}}))}catch(t){r=[]}return $t({metadata:e,audio:[{url:t.getMediaUrl(),bitrate:t.getVastMediaBitrate(),mime:t.getContentType()}],companions:r,links:[]})}(this._currentAd),this._advertising.onAdStart(this._currentPlayerAd),this._currentPlayerTracker=new St(this._advertising,this._currentPlayerAd);var e=this._advertising.getTrackingContext();e.adcid=this._currentAd.getCreativeId(),e.event=S.tb,this._currentPlayerTracker.track({type:S.V},e)},e.onAdsManagerLoaded=function(t){this.logger.debug("IMA: ads manager loaded");try{var e=new O.google.ima.AdsRenderingSettings;e.restoreCustomPlaybackStateOnAdBreakComplete=!0,this._adsManager=t.getAdsManager(this._contentPlayer.getMedia(),e),this.startAdsManager(this._adsManager)}catch(t){this.logger.error("IMA: Failed to start ads manager: "+t.getMessage()),this._adsManager&&this.destroyAdsManager(),this._contentPlayer.play()}},e.onAllAdsCompd=!0},e.onContentComte()},e.onContentPauseRequested=function(){this.logger.debug("IMA: content pause requested"),this._linearAdPlaying=!0,this._contentPlayer.pause()},e.onContentResumeRequested=function(){this.logger.debug("IMA: content resume requested"),this._linearAdPlaying=!1,this._contentCompletedCalled||this._contentPlayer.play()},t.isSuppima)},t}();function Ye(t){var e=t<0,n=Math.abs(Math.round(t)),r=Math.floor(n/3600);n-=3600*r;var i=Math.floor(n/60);n-=60*i,i=("00"+i).substr(-2),n=("00"+n).substr(-2);var o="";return o=r>0?r+":"+i+":"+n:i+":"+n,e?"-"+o:o}var Ze=n(10);function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $e=function(t){var e,n;function r(e){var n;return n=t.call(this)||this,e=Object.assign({},r.defaultOptions,e),n._logger=e.logger,n._index=null,n._entries=[],n._position=0,n._duration=1/0,n._threshold=1.5,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Ke(e,n);var i,o,a,s=r.prototype;return e(0)},s.cudex]},s.insert=function(t){for(var e=0,n=this._entries.length;e<n;e++){var r=this._entries[e];if((-1===t.startTime?this._duration:t.startTime)<(-1===r.startTime?this._duration:r.startTime))return void this._entries.splice(e,0,t)}this._entries.push(t)},s.re,1)},s.s=[]},s.reset=function(){this._index=null,this._position=0,this._duration=1/0},s.setDuration=function(t){this._duration=t<=0?1/0:t},s.setPoste()},s._compare=function(t,e){if(!e)return!1;if(t.metadata&&e.metadata){if(t.metadata.title&&t.metadata.title===e.metadata.title)return!0;if(t.metadata.adId&&t.metadata.adId===e.metadata.adId)return!0}return!(!t.action||!e.action)&&(t.action===e.action&&t.startTime===e.startTime)},s._isActiveEntry=function(t){var e=t.startTime,n=t.metadata&&t.metadata.duration;return-1===e&&(e=this._duration),t.action?Math.abs(e-this._position)<=this._threshold:(n||(n=this._duration||1/0),e<=this._position&&(n>this._position||n>=this._duration))},s._update=function(){for(var t=null,e=[],n=0,i=this._entries.length;n<i;n++){var o=this._entries[n];if(this._isActiveEntry(o))o.action?(e.push(o),this._entries.splice(n--,1),i--):t=n;else if(o.startTime>this._position+this._threshold)break}for(var a=0,s=e.length;a<s;a++){var u=e[a];switch(u.action){case r.ACTION_AD_STOP:this.emit({type:r.EVENT_ACTION,entry:u});break;case r.ACTION_AD_START:case r.ACTION_CLEAR:case r.ACTION_AD_REQUEST:this.emit({type:r.EVENT_ACTION,entry:u})}}var c=this._entries[t],l=this.current();t!==this._index&&(this._index=t,c!==l&&this.emit({type:r.EVENT_CHANGE,entry:null===t?null:this._entries[t]}))},i=r,a=[{key:"defaultOptionsE.a}}}],(o=null)&&Je(i.prototype,o),a&&Je(i,a),r}(n r}function nn(){return(nn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function rn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}$e.EVENT_ACTION="action",$e.EVENT_CHANGE="change",$e.ACTION_AD_START="AD_START",$e.ACTION_AD_STOP="AD_STOP",$e.ACTION_AD_REQUEST="AD_REQUEST",$e.ACTION_CLEAR="CLEAR";var an={enabled:!1,timeout:5e3,skipOffset:10,rerollTimeout:480,adContainer:null},sn=function(t){var e,n;function r(e,n,r){var i;return(i=t.call(this)||this).options=Object.assign({},an,r),i.options.serverURL=S.a,i.api=e,i.logger=r.logger||E.a,i.player=new We(nn({},n._options,{logger:i.logger})),i.player.tracking.getTrackingContext=function(t){return i.getTrackingContext()},i.playlist=i.player.playlist,i.content=n,i._computedValues=i.options.computed,Object.defineProperty(i._computedValues.context,"adToken",{get:function(t){return i.getAdToken()}}),i.ads=[],i.adBreakAds=[],i.currentAd=null,i._isSkippable=!1,i._settings=r.settings,i._timeline=r.timeline,i._adContainer=r.adContainer,i._currentAdToken=null,Xe.isSupported()&&(i._ima=new Xe(rn(i))),i._contentTracking=new Lt(rn(i)),i._contentTracking.getTrackingCoxt()},void 0===i._settings.get("last_adroll_time")&&i._setLastAdRollTime(0),i.setState("BeforePreRoll"),i._playerEventHandler=i._playerEventHandler.bind(rn(i)),i._contentEventHandler=i._contentEventHandler.bind(rn(i)),i.player.observe(i._playerEventHandler),i.content.observe(i._contentEventHandler),i._timeline.on($e.EVENT_ACTION,i._timelineHandler,{context:rn(i)}),i}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,on(e,n);var i=r.prototype;return i.getAdToken=function(){return this._currentAdToken},i.getAdContainer=function(){return this.api&&this.api.layout&&this.api.layout.getAdContainer()||this._adContainer},i.getAdCustomClickTrer()},i.getTrackingContext=function(){var t=this.getCurrentAd(),e=this.getSource(),n=t&&t.metadata||{},r=this.content.tracking.getTrackingContext();return t&&(r.ad=t),r.contentType=n.contentType,r.aduid=n.uid||e.url,r.adsource=e.url,r.tags=t&&t.tags||[],r.position=this.getPosition(),r.duration=this.getDuration(),r},i.inAdtate},i.inImaAdak()},i.isLive=function(){return!1},i.isSkippable=function(){return this.inImaAdBreak()?this._ima.isSkippable():this._isSkippable},i.onAdCompanionStart=function(t){this.logger.debug("Advertising: ad companion has started"),this.emit({type:S.u,companion:t})},i.onAdCompanionEnd=function(t){this.logger.debug("Advertising: ad companion has ended"),this.emit({type:S.t,companion:t})},i.onAdBreakStart=function(){this.logger.debug("Advertising: ad break has started"),this._inAdBreak=!0,this.setState("AdPlaying"),this.emit(S.s)},i.onAdBreakEnd=function(){this.logger.debug("Advertising: ad break has ended"),this._inAdBreak=!1,this._isSkippable=!1,this.setState("ContentPlaying"),this.emit(S.r)},i.onAdStart=function(t){if(this.logger.debug("Advertising: ad has started"),this._currentAd=t,t.token&&(this._currentAdToken=t.token),this.emit({type:S.y,ad:t}),t.companions)for(var e,n=tn(t.companions);!(e=n()).done;){var r=e.value;this.onAdCompanionStart(r)}},i.onAdEnd=function(t){if(t.companions)for(var e,n=tn(t.companions);!(e=n()).done;){var r=e.value;this.onAdCompanionEnd(r)}this.emit({type:S.v,ad:t}),this._currentAd===t&&(this._currentAd=null)},i.onAdSkip=function(t){this.emit({type:S.w,ad:t}),this.onAdEnd(t),this.onAdBreakEnd()},i.onAdSkippable=function(){this._isSkippable=!0,this.emit({type:S.x,position:this.getPosition(),duration:this.getDuration()})},i.onAdTimeUS.Z)},i.oncontent(t){},i.oncontentdurationchange=function(t){this._scheduled||this._scheduleAdBreaks(),this._isPlayingServerSideAd()&&this.emit({type:S.E,duration:this.currentAd.metadata.duration})},i.oncontenttimeupdate=function(t){if(this._isPlayingServerSideAd()){var e=this.getPosition(),n=this.getDuration();this.emit({type:S.Z,position:e,duration:n}),e>=n?this.onadcomplete({type:S.A,position:e,duration:n}):!this.isSkippable()&&this.getSkipOffset()>=0&&e>=this.getSkipOffset()&&(this._isSkippable=!0,this.emit({type:S.x,position:e,duration:n}))}},i.oncontentcomplete=function(t){if(this._isPlayingServerSideAd()){var e=this.getPosition(),n=this.getDuration();this.onadcomplete({type:S.A,position:e,duration:n})}},i.onadtimeupdate=function(t){if(this.emit(t),!this.isSkippable()&&this.getSkipOffset()>=0&&t.position>=this.getSkipOffset()){var e=this.getPosition(),n=this.getDuration();this._isSkippable=!0,this.emit({type:S.x,position:e,duration:n})}},i.onaderror=function(t){this.logger.warn("Advertising: Error playing advert: "+t.error.message),"AdPlaying"===this.state&&this.adBreakAds.length>0?this.startAd(this.adBreakAds.shift()):this.endAdBreak()},i.onadcomplete=function(t){var e=this;this.currentAd.complete=!0,this.emit(t),Ot((function(t){e.endAd(e.currentAd)}))},i.onplaylistselect=function(t){this.setState("BeforePreRoll"),this.adBreakAds=[],this.currentAd=null;var e=this.content.playlist.getPlaylistItem();e?e.metadata.contentType!==S.Sb&&e.metadata.contentType!==S.Rb&&this.load(e.ads):this.clear()},i.onaddurationchange=function(t){if(!this.isSkippable()&&this.getSkipOffset()>=0&&t.duration<=this.getSkipOffset()){var e=this.getPosition(),n=this.getDuration();this._isSkippable=!0,this.emit({type:S.x,position:e,duration:n})}this.emit(t)},i.destroy=function(){this._ima&&this._ima.destroy(),this.player.unobserve(this._playerEventHandler),this.content.unobserve(this._contentEventHandler)},i.setState=function(t){if(t!==this.state){var e=this.state;this.state=t,this.emit({type:S.hb,previousState:e,currentState:t})}},i.load=function(t){this.logger.debug("Advertising: loading "+t.length+" advertisements from playlist item"),this.player.unload(),this.ads=t,this.currentAd=null,this.adBreakAds=[],this._isSkippable=!1,this._scheduled=!1,this._scheduleAdBreaks()},i.uar()},i.play=function(){if("ContentPlaying"===this.state||this._isServerSideAd())return this.content.play();!(this.content.isEnded()||this.content.isPaused())&&this.content.pause(),this.player.play()},i.pause=function(){if("ContentPlaying"===this.state||this._isServerSideAd())return this.content.pause();this.player.pause()},i.stop=function(){if("ContentPlaying"===this.state||this._isServerSideAd())return this.content.stop();this.player.stop()},i.clear=function(){this.player.stop(),this.ads=[],this.currentAd=null,this.adBreakAds=[],this._isSkippable=!1,this.setState("BeforePreRoll")},i.getCurrentAd=function(){if(this.inAdBreak())return this.inImaAdBreak()?this._ima.getCurrentPlayerAd():this.currentAd},i.getScheduledAds=function(t){var e=this;return this.options.enabled?this._findAdsByPosition(t).filter((function(t){return t.metadata.contentType!==S.Vb&&(!!e._hasRerollExpired(t)||(e.logger.debug("Advertising: filtered out ad from schedule, reroll timeout has not expired"),!1))})):[]},i.getAdvertisementByUid=function(t){for(var e=0,n=this.ads.length;e<n;e++)if(this.ads[e].metadata.uid===t)return this.ads[e];return!1},i.getRemainingSkipOffset=function(){var t=this.getSkipOffset(),e=t>0?Math.ceil(t-this.getPosition()):0;return Math.max(0,Math.min(t,e))},i.getSkipOffset=function(){return this.inImaAdBreak()?this._ima.getSkipOffset():this._isPlayingServerSideAd()&&this.content.isLive()?-1:this.options.skipOffset},i.getRequestUrl=function(t){return this._computedValues.replace(this.options.serverURL,encodeURIComponent,{ad:t})},i.playPreroll=function(){return"BeforePreRoll"===this.state?this._ima?this._playImaPreroll():this._playIonoPreroll():(this.setState("ContentPlaying"),!this.content.isEnded()&&this.content.isPaused()&&this.content.play(),Promise.resolve(!1))},i._playImaPreroll=function(){var t=this;return this._ima.startPreroll().then((function(e){return e?(t._contentTracking.setTracker(null),e):t._playIonoPreroll()}))},i._playIonoPreroll=function(){var t=this.getScheduledAds(0);return t.length>0?this.startAdBreak(t):(this.setState("ContentPlaying"),Promise.resolve(!1))},i.startPostroll=function(){return"ContentPlaying"===this.state?this._ima?this._startImaPostroll():this._startIonoPostroll():Promise.resolve(!1)},i._startImaPostroll=function(){var t=this;return this._ima.startPostroll().then((function(e){return e?(t._contentTracking.setTracker(null),e):t._startIonoPostroll()}))},i._startIonoPostroll=function(){var t=this.getScheduledAds(-1);return t.length>0?this.startAdBreak(t):Promise.resolve(!1)},i.startAdBreak=function(t){var e=this;if("AdPlaying"!==this.state)return this.adBreakAds=[],this.currentAd=null,this._isSkippable=0===this.getSkipOffset(),t.length<=0?Promise.resolve(!1):this._loadAdvertisements(t).then((function(t){return t.length>0?(e.adBreakAds=t,e.logger.debug("Advertising: Starting ad break"),e.onAdBreakStart(),e.startAd(e.adBreakAds.shift()),!0):(e.setState("ContentPlaying"),!e.content.isEnded()&&e.content.isPaused()&&e.content.play(),!1)}),(function(t){return e.logger.warn("Advertising: Failed to start ad break, there were one or more ads that failed to load"),e.setState("ContentPlaying"),!e.content.isEnded()&&e.content.isPaused()&&e.content.play(),!1}))},i.startAd=function(t){var e=this;if(this._hasRerollExpired(t)){if(!this.inAdBreak())return this.startAdBreak([t]);this.currentAd=t,this._loadAdvertisement(t).then((function(t){return t?(e._startAd(t),t):e.nextAd()})).catch((function(t){return e.logger.debug("Advertising: Failed to load advertisement: "+t.message),e.nextAd()}))}else this.logger.debug("Advertising: Skipped ad, the reroll timeout has not expired yet")},i.endAdBreak=function(){"AdPlaying"===this.state&&(this.adBreakAds=[],this.player.unload(),this.onAdBreakEnd(),!this.content.isEnded()&&this.content.isPaused()&&this.content.play())},i.endAd=function(){if("AdPlaying"===this.state){var t=this.getCurrentAd();this.onAdEnd(t);var e=this.adBreakAds.shift();e?this.startAd(e):this._isServerSideAd(t)?(this._contentTracking.setTracker(null),this.endAdBreak()):this.endAdBreak()}},i.nextAd=function(){var t=this.adBreakAds.shift();if(!t)return this.endAdBreak();this.startAd(t)},i.skip=function(){var t=this;if("AdPlaying"===this.state){if(this.inImaAdBreak())return this._ima.skip();if(this.isSkippable()){var e=this.currentAd,n=(e.metadata.contentType,this.getPosition()),r=this.getDuration();this.currentAd.skipped=!0,e.metadata.contentType===S.Ub?this.content.emit({type:S.w,ad:e,position:n,duration:r}):this.player.emit({type:S.w,ad:e,position:n,duration:r}),Ot((function(n){t.endAdBreak(),e.metadata.contentType===S.Ub&&t.content.setPosition(e.position+e.metadata.duration)}))}}},i.getDuration=function(){return this.inImaAdBreak()?this._ima.getDuration():!!this.currentAd&&(this._isServerSideAd()?Se(this.currentAd.metadata.duration,2):this.player.getDuration())},i.getPosition=function(){return this.inImaAdBreak()?this._ima.getPosition():!!this.currentAd&&(this._isServerSideAd()?Se(this.content.getPosition()-this.currentAd.position,2):this.player.getPosition())},i.getSource=function(){return this.inImaAdBreak()?this._ima.getSource():!!this.currentAd&&(this._isPlayingServerSideAd()?this.content.getSource():this.player.getSource())},i._adBreakSorter=function(t,e){return t.metadata.contentType===S.Ub&&e.metadata.contentType!==S.Ub?1:e.metadata.contentType===S.Ub&&t.metadata.contentType!==S.Ub?-1:0},i._contentEventHandler=function(t){switch(t.type){case S.jb:case S.V:return;case S.Z:return this.oncontenttimeupdate(t);case S.E:return this.oncontentdurationchange(t);case S.X:return this.onplaylistselect(t);case S.R:this.oncontentpause(t);break;case S.A:return this.oncontentcomplete(t);case S.P:this.player.setMute(!0);break;case S.zb:this.player.setMute(!1);break;case S.Ab:this.player.setVolume(t.volume)}if(this._isPlayingServerSideAd())return this.logger.debug("Advertising: Redispatching "+t.type+" event during server-side ad playback"),F.redispatch(this,t)},i._isPlayingServerSideAd=function(){return"AdPlaying"===this.state&&this._isServerSideAd()},i._isServerSideAd=function(t){return void 0===t&&(t=this.currentAd),!!t&&[S.Ub,S.Qb].includes(t.metadata.contentType)},i._playerEventHandler=function(t){if(!this.inAdBreak())return null;if(!this.currentAd)return this.endAdBreak();switch(t.type){case S.Z:return this.onadtimeupdate(t);case S.A:return this.onadcomplete(t);case S.G:return this.onaderror(t);case S.E:return this.onaddurationchange(t);default:return this.emit(t)}},i._hasRerollExpired=function(t){return t.metadata.contentType!==S.Tb||!t.played||Date.now()-t.played>1e3*this.options.rerollTimeout},i._setLastAdRolve()},i._startAd=function(t){if(this._isServerSideAd(t)){this.logger.debug("Advertising: Starting server-side advertisement "+t.metadata.uid+" ("+t.metadata.duration+")"),this._isSkippable=!1,this.emit({type:S.X,playlistIndex:0,playlistItem:t});var e=this._contentTracking.createTracker(t);this._contentTracking.setTracker(e),this.content.isPaused()&&this.content.play()}else this.logger.debug("Advertising: Starting "+t.metadata.contentType+" advertisement "+t.metadata.uid),this.player.load(t),this.play(),this._setLastAdRollTime(Date.now());if(t.played=new Date,this.currentAd=t,t.token&&(this._currentAdToken=t.token),this.emit(S.y),t.companions)for(var n,r=tn(t.companions);!(n=r()).done;){var i=n.value;this.emit({type:S.u,companion:i})}},i._timelineHandler=function(t){var e=this,n=t.entry||this._timeline.current();t.type===$e.EVENT_ACTION&&n.action===$e.ACTION_AD_REQUEST?(this.logger.debug("Advertising: Requesting an ad from the ad server"),this._loadAdvertisement(n.ad).d(t)})).catch((function(t){e.logger.warn("Advertising: Failed to request an ad from the ad server - "+t.message)}))):t.type===$e.EVENT_ACTION&&n.action===$e.ACTION_AD_START&&(this.logger.debug("Advertising: Timeline indicates an ad has started at "+Ye(n.startTime)),this.startAd(n.ad))},i._parseClientAdResponse=function(t){var e=this,n=parseInt(t.headers.get("content-length"),10);return 204===t.status||0===n?(e.logger.debug("Advertising: ad response does not contain any ads"),Promise.resolve(null)):t.status>=400?(e.logger.debug("Advertising: ad response returned an error code ["+t.status+"]"),Promise.resolve(null)):t.json()."),t}))},i._loadClientAdvertisement=function(t){var e=this;return this._hasRerollExpired(t)?t.audio.length>0?Promise.resolve(t):R(this.getRequestUrl(t)).then(this._parseClientAdResponse.bind(this)).then((function(e){return e&&(e.position=t.position,e.slot=t.slot,Object.defineProperties(e,{skipped:{get:function(){return t.skipped},set:function(e){t.skipped=e}},interrupted:{get:function(){return t.interrupted},set:function(e){t.interrupted=e}},complete:{get:function(){return t.complete},set:function(e){t.complete=e}},loaded:{get:function(){return t.loaded},set:function(e){t.loaded=e}},playedayed},set:function(e){t.played=e}}})),e})).catch((function(t){return e.logger.debug("Advertising: ad server returned an error status"),Promise.resolve(null)})):(this.logger.debug("Advertising: Skipping loading of advertisement, the reroll timeout has not expired"),Promise.resolve(null))},i._loadServerAdvertisement=function(t){return Promise.resolve(t)},i._loadAdvertisement=function(t){switch(this.logger.debug("Advertisement: Loading advertisement"),t.metadata.contentType){case S.Ub:case S.Qb:return this._loadServerAdvertisement(t);case S.Tb:return this._loadClientAdvertisement(t);default:throw new Error("Unrecognized ad content type '"+t.metadata.contentType+"'")}},i._loadAdvertisements=function(t){var e=this,n=t.map((function(t){return e._loadAdvertisement(t)}));return Promise.all(n).then((function(t){return Array.from(t).ree):t}),[])})).ter)}))},i._findAdsByPosition=function(t){return this.ads.filter((function(e){return 0===t&&0===e.position||(-1===t&&-1===e.position||Math.abs(e.position-t)<=.5)}))},i._scheduleAd=function(t){if(0!==t.position&&"pre"!==t.slot&&-1!==t.position&&"post"!==t.slot)if(t.metadata.contentType===S.Tb&&0===t.audio.length){var e=Math.max(0,t.position-this.options.timeout/1e3);(-1===t.position||t.position>=this.content.getDuration())&&(e=this.content.getDuration()-this.options.timeout/1e3),this._timeline.insert({action:$e.ACTION_AD_REQUEST,ad:t,startTime:e})}else t.position>0&&(t.position<this.content.getDuration()||this.content.isLive())&&(this.logger.debug("Advertising: scheduling an ad to play at "+t.position),this._timeline.insert({action:$e.ACTION_AD_START,ad:t,startTime:t.position}))},i._scheduleAdBreaks=function(t){if(void 0===t&&(t=!0),this.options.enabled&&!this._scheduled&&0!==this.content.getDuration()){this._scheduled=!0;for(var e=this.ads.reduce((function(t,e){var n=e.metadata.contentType;return void 0===t[n]&&(t[n]=[]),t[n].push(e),t}),{}),n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],a=i[1];if(o===S.Vb)t&&this._ima&&this._ima.load(a);else for(var s,u=tn(a);!(s=u()).done;){var c=s.value;this._scheduleAd(c)}}}},r}(M.a);function un(t){return"number"==typeof t?je(t,0):0}function cn(t,e,n){return n.event?n.event:t.type===S.jb?t.details.event===S.kb?t.details.action:t.details.event:t.type}function ln(t,e,n,r,i){function o(t,n,i){var o=cn(t,0,n),a=function(t,e,n,r){return n.category?e.parse(n.category,r):e.get("contentType",r)}(0,e,r,n),s=function(t,e,n,r){return n.label?String(e.parse(n.label,r)):cn(t,e,r)===S.qb?t.details.isLive?String(je(e.get("position",r)/60,0)):String(e.get("percent",r)):String(e.get("title",r)||e.get("source",r))}(t,e,r,n),u=function(t,e,n,r){var i=cn(t,e,r);return-1!==[S.sb,S.lb].indexOf(i)?un(e.get("percent",r)):un(e.get("position",r))}(t,e,0,n),c=o===S.qb;return"GTAG"===i?Object.assign({event_action:o,event_category:a,event_label:s,value:u,non_interaction:c},n):"GA"===i?Object.assign({eventAction:o,eventCategory:a,eventLabel:s,eventValue:u,nonInteraction:c},n):n}return void 0===r&&(r={}),void 0===i&&(i={}),{name:"google",send:function(t,e){if("undefined"!=typeof gtag){var n=o(t,e,"GTAG");gtag("event",n.event_action,n)}if("undefined"!=typeof ga){var r=o(t,e,"GA");ga("send","event",r)}}}}function dn(t,e,n,r){(new O.Image).src=function(t,e,n,r){return e.replace(t,(function(t){return Object(X.a)(t)?"":encodeURIComponent(t)}),r)}(t,e,0,r)}sn.STATE_BEFORE_PREROLL="BeforePreRoll",sn.STATE_CONTENT_PLAYING="ContentPlaying",sn.STATE_AD_PLAYING="AdPlaying";var fn={category:!1,label:!1,url:"",events:{start:!0,complete:!0,progress:!0,adskip:!0,download:!0,pause:!1,resume:!0,mute:!1,unmute:!1,seek:!1}};function hn(t,e,n,r){var i=r.analytics;i=Object.assign({},fn,i),Object.assign(i,fn.events,i.events);var o={};function a(t){var e=t.context;return e.event=function(t){if(t.details.event===S.vb)return S.qb;if(t.details.event===S.kb)return String(t.details.action);return String(t.details.event)}(t),e}function s(t){var r=a(t);i.events[r.event]&&Object.keys(o).forEach((function(i){if(o[i]){var a=o[i],s=function(t,e,r){return(r.tags||[]).reduce((function(e,i){return i.service!==t&&"all"!==i.service||(e[i.name]=n.parse(i.value,r)),e}),{})}(i,0,r),u=Object.assign({},s,r);e.debug("Analytics: sending analytics to "+i),a.send(t,u)}}))}return"string"==typeof i.url&&(o.custom=function(t,e,n,r){return void 0===r&&(r={}),{name:"custom",send:function(t,n){r.url&&dn(r.url,e,0,n)}}}(0,n,0,i)),r.googleAnalytics.enabled&&(o.google=ln(0,n,0,i,r.googleAnalytics)),t.on("tracking",s),{services:o,options:i,send:s}}var pn={};function gn(t){if(pn[t=t||"global"])return pn[t];if(!(this instanceof gn))return new gn(t);var e=pn[t]=this,n={};Object.defineProperties(e,{id:{value:t,enumerable:!0,configurable:!0},length:{enumerable:!0,configurable:!ngth}},ownKeys:{enumerable:!1,configurable:!0,get:function(){return Object.keys(n)}}}),e.genull},e.set]=e},e.removn[t]},e.key=function(t){var e=Object.keys(n);return t>=0&&t<e.length?e[t]:null},e.clear=function(){for(var t=0,e=Object.keys(n);t<e.length;t++){var r=e[t];delete n[r]}}}var yn=function(){try{if("localStorage"in window&&null!==window.localStorage)return window.localStorage}catch(t){return new gn}}();function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vn=function(){function t(e){e=Object.assign({},t.defaultOptions,e),this._afrUrl=e.afrUrl,this._zoneAlias=null,e.zoneAlias&&(this._zoneAlias=Array.isArray(e.zoneAlias)?e.zoneAlias:[e.zoneAlias])}var e,n,r,i=t.prototype;return i.setGDPR=function(t){var e=this._afrUrl;!0===t?e=Ge(e,"aw_0_req.gdpr","true"):t&&t.userConsent&&(e=Ge(e,"aw_0_req.userConsent",t.userConsent)),this._afrUrl=e},i.parse=function(t){for(var e,n=[],r=t.split("\n"),i=0;i<r.length;i++){var o=r[i].trim();if(o.match(/^[0-9]+$/))e=Number(o);else{var a=this.parseLine(o);switch(a){case"CLEAR":n.push({action:$e.ACTION_CLEAR,startTime:e/1e3});break;case"AD_STOP":n.push({action:$e.ACTION_AD_STOP,startTime:e/1e3});break;case"AD_START":n.push({action:$e.ACTION_AD_START,startTime:e/1e3});break;default:n.push(this.createMetadata(e,a))}}}return n},i.parseLine=function(t){if(""===t||"CLEAR"===t)return $e.ACTION_CLEAR;if("AD_STOP"===t)return $e.ACTION_AD_STOP;if("AD_START"===t)return $e.ACTION_AD_START;var e={},n=new RegExp(',?([^ ]+)=("([^"]+)"|([^ ]+))',"g"),r=n.exec(t);do{e[r[1]]=(r[4]||r[3]).trim(),r=n.exec(t)}while(r);return"AD_STOP"===e.title?$e.ACTION_AD_STOP:"AD_START"===e.title?$e.ACTION_AD_START:e},i.createMetadata=function(t,e){var n=this,r={startTime:t/1e3};if(e.adw_ad){var i={position:r.startTime,slot:"mid",metadata:Jt({contentType:S.Qb,uid:e.adId}),companions:[]};e.durationMilliseconds&&(i.metadata.duration=Number(e.durationMilliseconds)/1e3),"preroll"===e.insertionType?i.slot="pre":"postroll"===e.insertionType&&(i.slot="post"),this._afrUrl&&this._zoneAlias&&e.adswizzContext&&this._zoneAlias.forEach((function(t){var r=n._afrUrl;r=Ge(r,"zone_alias",t),r=Ge(r,"context",e.adswizzContext),r=Ge(r,"cb",Date.now()),i.companions.push({type:"iframe",url:r,zoneAlias:t})})),r.action=$e.ACTION_AD_START,r.ad=i}else e.contentType=S.Wb,e.durationMilliseconds&&(e.duration=Number(e.durationMilliseconds)/1e3,delete r.metadata.durationMilliseconds),r.metadata=Jt(e);return r},e=t,r=[{key:"defaultOptionsne"}}}],(n=null)&&mn(e.prototype,n),r&&mn(e,r),t}(),bn={url:null,interval:100,withCredentials:!0};var _n=function(t){if((t=Object.assign({},bn,t)).interval<100)throw new Error("Cannot create poller: interval must be greater than or equal to 100");var e,n,r,i=!1,o=t.url,a=[],s=function(t,e){a.forEach((function(n){n.callback.call(n.context,t,e)}))},u=function(t){n=null,t.ok?(r=t.headers.get("Last-Modified"),d(),s(!1,t)):(d(),s({name:"Network",message:t.statusText},!1))},c=function(t){n=null,d(),s(t,!1)},l=function(){if(i&&!n){var e={headers:[]};t.withCredentials&&(e.withCredentials=!0),r&&e.headers.push("If-Modified-Since: "+r),(n=R(o,e)).then(u),n.catch(c)}},d=function(){i&&!n&&(e=setTimeout(l,t.interval))};return{subscribe:function(t,e){return void 0===e&&(e=null),a.push({callback:t,context:e})-1},start:function(){if(!i){if(!o)throw new Error("Cannot start polling: missing url");i=!0,l()}},stop:function(){i&&(i=!1,n&&n.cancel(),n=null,clearTimeout(e))},sthis}}};function An(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tn="EventSource"in window,wn=function(){function t(e){var n=this;e=Object.assign({},t.defaultOptions,e),this._url=e.url,this._started=!1,this._eventSource=null,this._withCredentials=e.withCredentials,this._subscribers=[],this._parser=e.parser,this._logger=e.logger;var r={url:e.url,withCredentials:e.withCredentials};e.interval&&(r.interval=e.interval),this._poller=new _n(r),this._poller.subscribe(this._logger.wrap((function(t,e){t?n._notify(t,null):e.text().then((function(t){n._messageHandler(t)}))})))}var e,n,r,i=t.prototype;return i.start=function(){var t=this;if(!this._started){if(this._started=!0,!Tn)return this._logger.debug("AdsWizzMetadata: EventSource not supported on this browser, falling back to long-polling"),void this._poller.start();var e=this._eventSource=new O.EventSource(this._url,{withCredentials:this._withCredentials}),n=this._logger.wrap((function(i){e.removeEventListener("open",n),e.removeEventListener("error",r),t._logger.debug('AdsWizzMetadata: Established EventSource connection to "'+t._url+'"')})),r=this._logger.wrap((function(i){e.removeEventListener("open",n),e.removeEventListener("error",r),e.close(),t._logger.debug('AdsWizzMetadata: Unable to establish EventSource connection to "'+t._url+'", falling back to long-polling'),t._poller.start()})),i=this._logger.ata)}));e.addEventListener("open",n),e.addEventListener("message",i),e.addEventListener("error",r)}},i.stop=function(){this._eventSource&&(this._eventSource.close(),this._eventSource=null,this._logger.debug('AdsWizzMetadata: Closed EventSource connection to "'+this._url+'"')),this._poller.stop(),this._started=!1},i.subscribe=function(t,e){return void 0===e&&(e=this),this._subscribers.push({callback:t,context:e})-1},i.setUrl=function(t){this._started&&this.stop(),this._url=t,this._poller.setUrl(t),this.start()},i._n)}))},i._messageHandler=function(t){for(var e=this._parser.parse(t),n=[],r=0;r<e.length;r++){var i=n[n.length-1],o=e[r];(!i||o.metadata&&i.metadata&&(o.metadata.adId&&o.metadata.adId!==i.metadata.adId||o.metadata.title&&o.metadata.title!==i.metadata.title))&&n.push(o)}n.length>0&&(this._logger.debug("AdsWizzMetadata: Received metadata entries"),this._notify(null,n))},e=t,r=[{key:"defaultOptions",get:function(){return{url:null,withCredentials:!0,parser:new vn}}}],(n=null)&&An(e.prototype,n),r&&An(e,r),t}();function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pn(t,e){return(Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=[S.Sb,S.Rb,S.Qb],Sn=function(t){var e,n;function r(e){var n;if(n=t.call(this)||this,!(e=Object.assign({},r.defaultOptions,e)).timeline)throw new Error("Cannot create an AdsWizz instance without supplying a timeline controller");if(e.interval<1||e.interval>60)throw new Error("Invalid AdsWizz interval '"+e.interval+"', expected a value between 1 and 60");return n._timeline=e.timeline,n._logger=e.logger,n._player=e.player,n._zoneAlias=e.zoneAlias,n._poller=null,n._parser=null,n._parser=new vn({afrUrl:e.afrUrl,zoneAlias:e.zoneAlias}),e.gdpr&&n.setGDPR(e.gdpr),e.metadataUrl&&(n._poller=new wn({url:e.metadataUrl,interval:1e3*e.interval,withCredentials:!0,logger:e.logger,parser:n._parser}),n._poller.subscribe(n._pollerHandler,kn(n)),n._player.on("playing",n.startPolling,{context:kn(n)}),n._player.on("pause",n.stopPolling,{context:kn(n)}),n._player.on("stop",n.stopPolling,{context:kn(n)}),n._player.on("error",n.stopPolling,{context:kn(n)})),n._player.on("playlistselect",n.decoratePlaylistItem,{context:kn(n)}),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Pn(e,n);var i,o,a,s=r.prototype;return s.decoratePlaylistItem=function(t){var e=this,n=t.playlistItem;En.includes(n.metadata.contentType)&&(n.audio=n.audiol),t})))},s.decorateUrl=function(t){return"function"!=typeof O.com_adswizz_synchro_decorateUrl?t:Ge(Qe(t,"listenerid")?t:this._zoneAlias?Object(O.com_adswizz_synchro_decorateUrl)(t):Object(O.com_adswizz_synchro_decoratePlaylistUrl)(t),"aw_0_1st.ri","iono")},s.seR(t)},s.startPolling=function(){var t=this._player.playlist.getPlaylistItem();this._poller&&t.metadata.contentType===S.Sb&&!this._poller._started&&(this._poller.start(),this._logger.debug("Started polling the AdsWizz metadata stream"))},s.stopPolling=function(){var t=this._player.playlist.getPlaylistItem();this._poller&&t&&t.metadata.contentType===S.Sb&&(this._poller.stop(),this._logger.debug("Stopped polling the AdsWizz metadata stream"))},s._pollerHandler=function(t,e){var n=this;t?this._logger.warn("AdsWizz: failed to poll for metadata - "+t.message):e.forEach((function(t){n._timeline.insert(t),t.metadata&&t.metadata.adswizzContext&&n._logger.debug("AdsWizz: new adswizzContext '"+t.metadata.adswizzContext+"' received at "+n._player.getPosition()+" for ad '"+t.metadata.uid+"' starting at position "+t.startTime)}))},i=r,a=[{key:"defaultOptionsull}}}],(o=null)&&xn(i.prototype,o),a&&xn(i,a),r}( t}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ln=function(t){var e,n;function r(e){var n;return n=t.call(this)||this,e=Object.assign({},r.defaultOptions,e),n._history=[],n._logger=e.logger,n._timeline=e.timeline,n._player=e.player,n._currentEntry=null,n._maxHistory=e.maxHistory,n._currentPollEntry=null,n._fetchArtworkEnabled=e.fetchArtwork,n._artworkApiUrl=e.artworkApiUrl,n._poller=new _n({interval:e.interval,withCredentials:!1}),n._poller.subscribe(n._pollerHandler,Cn(n)),n._timeline.on("change",n._timelineHandler,{context:Cn(n)}),n._player.on("loadedmetadata",n.startPolling,{context:Cn(n)}),n._player.on("play",n.startPolling,{context:Cn(n)}),n._player.on("pause",n.stopPolling,{context:Cn(n)}),n._player.on("stop",n.stopPolling,{context:Cn(n)}),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,In(e,n);var i,o,a,s=r.prototype;return s.getCurrentEntry=function(){return this._currentEntry},s.getHistory=function(){return this._history.slice(0)},s.setCurrentEntry=function(t){var e=this;return this.isNewEntry(t)?(this._currentEntry=t,null===t?(this.emit({type:"change",metadata:null}),this._logger.debug("NowPlaying: cleared current now playing data"),this):(this._history.push(t),this._history.length>this._maxHistory&&(this._history=this._history.slice(-this._maxHistory)),this.emit({type:"change",metadata:t}),this._logger.debug("NowPlaying: updated current now playing data"),!this._fetchArtworkEnabled||"metadata"!==t.contentType||t.icons&&0!==t.icons.length||(this._logger.debug("NowPlaying: requesting artwork from artwork service"),this._fetchArtwork(t).then((function(n){n&&n.artwork&&n.artwork.length>0&&(e._logger.debug("NowPlaying: received artwork from artwork service"),t.icons=n.artwork,e.emit({type:"change",metadata:t}))})).catch((function(t){t.message?e._logger.warn("NowPlaying: failed to retrieve artwork from artwork service - "+t.message):e._logger.warn("NowPlaying: failed to retrieve artwork from artwork service")}))),this)):this},s.isNewEntry=function(t){var e=this._currentEntry;return!!(!t&&e||t&&!e)||this.createEntryHash(t)!==this.createEntryHash(e)},s.createEntryHash=function(t){var e=[];return t?(t.contentType&&e.push(t.contentType),t.title&&e.push(t.title),(t.creator||t.artist)&&e.push(t.creator||t.artist),t.publishDate&&e.push(new Date(t.publishDate).getTime()),e.join(":")):null},s.startPolling=function(){var t=this._player.playlist.getPlaylistItem();if(t.metadata.contentType===S.Zb){var e=this._getNowPlayingUrl(t);e&&(this._poller.setUrl(e),this._poller.start())}},s.stopPoop()},s._fetchArtwork=function(t){var e=Object.create(null),n=t.artist||t.creator||"",r=t.title;if(!n&&!r)return Promise.resolve(null);var i=(n+" - "+r).toLowerCase(),o=this._artworkApiUrl.replace("<title>",encodeURIComponent(i)),a=new Promise((function(t,n){e.resolve=t,e.reject=n}));return Object(O.fetch)(o,{credentials:"omit"}).then((function(t){if(t.status>=200&&t.status<300)return t.json();var e=new Error(t.statusText);throw e.response=t,e})).then((function(t){e.resolve(t)})).catch((function(t){e.reject(t)})),a},s._getNowPlayingUrl=function(t){for(var e=0,n=t.links.length;e<n;e++)if(t.links[e].kind===S.Nb)return t.links[e].url},s._pollerHandler=function(t,e){var n=this;if(t)throw t;e.json().then(this._logger.wrap((function(t){var e=null;Array.isArray(t)?t.length>=1&&(e=Jt(On({},t[0].metadata,{contentType:S.Wb}))):e=Jt(On({},t.metadata,{contentType:S.Wb})),n.isNewEntry(e)&&(n._currentPollEntry=e,n.setCurrentEntry(e))}))).catch((function(t){n._logger.logException(new Error("Failed to parse nowplaying data: "+t.message))}))},s._timelineHandler=function(t){var e=this._timeline.current();e?e.metadata&&e.metadata.contentType===S.Wb?this.setCurrentEntry(e.metadata):e.action&&"CLEAR"===e.action&&this.setCurrentEntry(null):this.setCurrentEntry(null)},i=r,a=[{key:"defaultOptions",get:function(){return{logger:E.a,maxHistory:20,interval:5e3,artworkApiUrl:S.b,fetchArtwork:!1}}}],(o=null)&&jn(i.prototype,o),a&&jn(i,a),r}(Ze.a),Rn={storageKey:"iono-player-settings",storage:null,settings:{}},Mn=function(t,e){try{if(t&&"function"==typeof t.getItem)return t.getItem(e)}catch(t){}},Dn=function(t,e,n){try{t&&"function"==typeof t.setItem&&t.setItem(e,n)}catch(t){}},Nn=function(){function t(t){void 0===t&&(t={}),(t=Object.assign({},Rn,t)).settings=Object.assign({},Rn.settings,t.settings),this.storageKey=t.storageKey,this.storage=t.storage;var e=JSON.parse(Mn(this.storage,this.storageKey)||"{}");this.settings=Object.assign({},t.settings,e)}var e=t.prototype;return s[t]},t]=e},e.s[t]},e.s={}},e.save=function(){Dn(this.storage,this.storageKey,JSON.stringify({last_adroll_time:this.settings.last_adroll_time,qualityLevel:this.settings.qualityLevel}))},t}(),Bn=n(35),Un=n.n(Bn);function zn(){try{var t=yn.getItem("iono-uuid");return t&&32===t.length||(t=Un()((e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,n=e?(""+e.effectiveType+e.downlink+e.rtt).replace(/\D+/g,""):"",r=Date.now(),i=1e5*Math.random()+1,n+r+Math.round(i))),yn.setItem("iono-uuid",t)),t}catch(t){}var e,n,r,i}function Hn(){return window.parent===window?window.location.href:document.referrer}function Vn(t,e,n){return e&&"function"==typeof e[t]?e[t](n):e&&void 0!==e[t]?e[t]:n&&void 0!==n[t]?n[t]:""}function Fn(t,e,n){return"<"===t[0]&&">"===t[t.length-1]?Vn(t.substr(1,t.length-2),e,n):void 0===t?"":t}function qn(t){return{get:function(e,n){return Vn(e,t,n)},replace:function(e,n,r){return function(t,e,n,r){return t.replace(/<.*?>/g,(function(t){var i=Fn(t,e,r);return"function"==typeof n?n(i):i}))}(e,t,n,r)},t,n)}}}function Wn(t,e){var n=Object(X.a)(e)||Object(X.a)(e.playlistItem)?t.getPlaylistItem():e.playlistItem;return n&&n.metadata||{}}function Gn(t,e){return e&&e.ad||t.getCurrendata}var Xn={aduid:function(){return""},adslot:function(){return""},contentType:function(t,e){return Wn(t,e).contentType||""},creator:function(t,e){return Wn(t,e).creator||""},duration:function(t,e){return t.getDuration()},format:function(t,e){return Y(t.getSource())||""},grouping:function(t,e){return Wn(t,e).grouping||""},percent:function(t,e){if(t.getDuration()<=0)return 0;if(e&&void 0!==e.percent)return e.percent;var n=Oe(t.getPosition()/t.getDuration()*100,0);return Math.max(0,Math.min(100,n))},playbackRate:function(t,e){return t.getPlaybackRate()},position:function(t,e){return e&&void 0!==e.position?Math.max(0,e.position):Math.max(0,t.getPosition())},publishDate:function(t,e){var n=Wn(t,e).publishDate;return n instanceof Date?n.toISOString():""},quality:function(t,e){return t.getQualityLevel()||""},title:function(t,e){return Wn(t,e).title||""},url:function(t,e){return t.getSource().url||""},vme()}},Yn=Object.assign({},Xn,{aduid:function(t,e){var n=Qn(t,e);return n&&n.uid||""},adslot:function(t,e){var n=Gn(t,e);return n&&n.slot||""},contentType:function(t,e){var n=Qn(t,e);return n&&n.contentType||""},creator:function(t,e){var n=Qn(t,e);return n&&n.creator||""},duration:function(t,e){return Math.max(0,t.getAdDuration())},format:function(t,e){return Y(t.getAdSource())||""},grouping:function(t,e){var n=Qn(t,e);return n&&n.grouping||""},percent:function(t,e){if(t.getAdDuration()<=0)return 0;if(e&&void 0!==e.percent)return Math.max(0,Math.min(100,e.percent));var n=Oe(t.getAdPosition()/t.getAdDuration()*100,0);return Math.max(0,Math.min(100,n))},position:function(t,e){return e&&void 0!==e.position?Math.max(0,e.position):Math.max(0,t.getAdPosition())},publishDate:function(t,e){var n=Qn(t,e),r=n&&n.publishDate;return r instanceof Date?r.toISOString():""},quality:function(t,e){return t.getAdSource().quality||""},title:function(t,e){var n=Qn(t,e);return n&&n.title||""||""}}),Zn=[S.Ub,S.Tb],Jn=[S.gc];function Kn(t,e){return function(n){var r=function(t,e){return e&&e.ad?Yn:e&&e.contentType?-1!==Zn.indexOf(e.contentType)?Yn:Xn:-1!==Jn.indexOf(t.getState())?Yn:Xn}(t,n);return Object(X.a)(r[e])?n&&!Object(X.a)(n[e])?n[e]:"":r[e](t,n)}}var $n={debug:0,preload:!1,autoplay:!1,playbackRate:1,volume:1,muted:!1,qualityLevel:"medium",repeat:"none",language:"en",source:null,sourceOptions:null,license:null,nowPlaying:{interval:2e4,maxHistory:20,fetchArtwork:!0},analytics:{label:null,category:null,url:null},googleAnalytics:{enabled:!1},ads:{enabled:!1,requestTimeout:5e3,skipOffset:10,rerollTimeout:480},adswizz:{metadataUrl:null,afrUrl:null,zoneAlias:null},gdpr:!1,ui:{layout:"legacy",language:"en",contentType:"podcast",sharing:!1,artwork:!0,playlist:!0,download:!1,description:!1,branding:!0,waveform:!0,dateTimeFormat:"j M ga",theme:{rounded:0,text:"444444",background:"ffffff",accent:"ee3b96",border:null}},hlsjs:{}},tr={type:"object",properties:{debug:{type:"number",default:0,max:2},preload:{type:"boolean",default:!1},autoplay:{type:"boolean",default:!1},playbackRate:{type:"number",default:1,min:.4,max:3},volume:{type:"number",default:1,min:0,max:1},muted:{type:"boolean",default:!1},qualityLevel:{type:"string",default:"medium"},repeat:{type:"string",default:"none",enum:["none","single","playlist"]},language:{type:"string",default:"en"},license:{type:"string"},source:{oneOf:[{type:"null"},{type:"string",format:"uri"},{type:"array",items:{oneOf:[{type:"string",format:"uri"},{type:"object",properties:{}}]}},{type:"object",properties:{}}]},gdpr:{oneOf:[{type:"boolean",default:!1},{type:"object",required:["userConsent"],properties:{userConsent:{type:"string"}}}]},nowPlaying:{type:"object",properties:{interval:{type:"number",default:2e4},maxHistory:{type:"number",default:20},fetchArtwork:{type:"boolean",default:$n.nowPlaying.fetchArtwork}}},analytics:{type:"object",properties:{label:{type:["string","null"]},category:{type:["string","null"]},url:{type:["string","null"],format:"uri"}}},googleAnalytics:{type:"object",properties:{enabled:{type:"boolean",default:$n.googleAnalytics.enabled}}},ads:{type:"object",properties:{enabled:{type:"boolean",default:!1},requestTimeout:{type:"number",default:5e3},skipOffset:{type:"number",default:10},rerollTimeout:{type:"number",default:480,min:120}}},adswizz:{type:"object",properties:{metadataUrl:{type:"string",default:$n.adswizz.metadataUrl},afrUrl:{type:"string",default:$n.adswizz.afrUrl},zoneAlias:{oneOf:[{type:"string",default:$n.adswizz.zoneAlias},{type:"array",minItems:1,items:{type:"string",default:$n.adswizz.zoneAlias}}]}}},ui:{type:"object",additionalFields:!1,properties:{layout:{type:"string",default:"legacy"},language:{type:"string",default:"en"},contentType:{type:"string",default:"podcast",enum:["podcast","stream"]},sharing:{type:"boolean",default:!1},artwork:{type:"boolean",default:!0},branding:{oneOf:[{type:"boolean",default:!1},{type:"string"}]},playlist:{type:"boolean",default:!0},download:{type:"boolean",default:!1},description:{type:"boolean",default:!1},waveform:{type:"boolean",default:!0},dateTimeFormat:{type:"string",default:$n.ui.dateTimeFormat},theme:{type:"object",additionalFields:!1,properties:{text:{type:"string",format:"color-hex",default:$n.ui.theme.text},background:{type:"string",format:"color-hex",default:$n.ui.theme.background},accent:{type:"string",format:"color-hex",default:$n.ui.theme.accent},border:{type:["string","null"],format:"color-hex",default:$n.ui.theme.border},rounded:{type:"number",default:$n.ui.theme.rounded,min:0,max:40}}}}}}};function er(t){return void 0===t?"undefined":"object"!=typeof t||t?{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function nr(t,e,n,r){if(void 0===r&&(r=[]),null===t)return!0;if(Array.isArray(e.type)){if(-1===e.type.indexOf(er(t))){var i=e.type.slice(0,-1).join(", ")+" or "+e.type.slice(-1);return r.push("Invalid type for '"+n+"', expected one of "+i+" but got '"+er(t)+"'"),!1}return!0}return er(t)===e.type||(r.push("Invalid type for '"+n+"', expected a "+e.type+" but got '"+er(t)+"'"),!1)}function rr(t,e,n,r){if(void 0===n&&(n=""),void 0===r&&(r=[]),Array.isArray(e.oneOf))return function(t,e,n,r){void 0===r&&(r=[]);for(var i=0;i<e.oneOf.length;i++)if(nr(t,e.oneOf[i],n))return rr(t,e.oneOf[i],n,r);var o=e.oneOf.ree),t}),[]);return o=o.slice(0,-1).join(", ")+" or "+o.slice(-1),r.push("Invalid type for '"+n+"', expected one of "+o+" but got '"+er(t)+"'"),!1}(t,e,n,r);if(nr(t,e,n,r))switch(er(t)){case"object":return function(t,e,n,r){void 0===r&&(r=[]);var i=!0;if(Array.isArray(e.required))for(var o=0;o<e.required.length;o++)if(void 0===t[e.required[o]]){r.push("Invalid value for '"+n+"', missing required field '"+e.required[o]+"'"),i=!1;break}var a=!0;return Object.keys(t).forEach((function(i){var o=n?n+"."+i:i;void 0===e.properties[i]?!1===e.additionalFields&&E.a.warn("Unrecognized option '"+o+"'"):rr(t[i],e.properties[i],o,r)||(a=!1)})),i&&a}(t,e,n,r);case"string":return function(t,e,n,r){if(void 0===r&&(r=[]),Array.isArray(e.enum)&&-1===e.enum.indexOf(t)){var i=e.enum.slice(0,-1).join(", ")+" or "+e.enum.slice(-1);return r.push("Invalid value for '"+n+"', expected one of "+i+" but got '"+t.toString()+"'"),!1}return!e.format||!t||function(t,e,n,r){switch(void 0===r&&(r=[]),e.format){case"color-hex":if(null===t.match(/^#?([0-9a-fA-F]{3}){1,2}$/))return r.push("Invalid format for '"+n+"', expected a valid hexidecimal colour but got '"+t+"'"),!1}return!0}(t,e,n,r)}(t,e,n,r);case"number":return function(t,e,n,r){return void 0===r&&(r=[]),void 0!==e.min&&t<e.min?(r.push("Invalid value for '"+n+"', expected a number greater than "+e.min+" but got '"+t+"'"),!1):!(void 0!==e.max&&t>e.max)||(r.push("Invalid value for '"+n+"', expected a number less than "+e.max+" but got '"+t+"'"),!1)}(t,e,n,r);case"array":return function(t,e,n,r){if(void 0===r&&(r=[]),e.minItems&&t.length<e.minItems)return r.push("Invalid value for '"+n+"', expected an array with at least "+e.minItems+" but got '"+t.length+"'"),!1;for(var i=!0,o=0;o<t.length;o++)rr(t[0],e.items,n+"[0]",r)||(i=!1);return i}(t,e,n,r)}return!0}function ir(t){var e=[];return{valid:rr(t,tr,"",e),errors:e}}function or(){for(var t={},e=0;e<arguments.length;e++)for(var n=0,r=Object.entries(arguments[e]);n<r.length;n++){var i=r[n],o=i[0],a=i[1];"object"===er(a)&&t[o]?t[o]=or(t[o],a):t[o]=a}return t}function ar(){return or.apply(void 0,[$n].concat(Array.prototype.slice.call(arguments)))}function sr(t,e){var n=t,r=Object.freeze(e||{});Object.defineProperties(this,{key:{get:function(){return n}},data:{get:function(){return r}}})}function ur(){return(ur=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}sr.prototype.hasEntitlement=function(t){var e=ta[t]};if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)if(!1===n(t[r]))return!1;return!0}return n(t)};function cr(t,e){return ur({},e,{type:t+"."+e.type})}var lr=cr.bind(null,"adverts"),dr=cr.bind(null,"content");function fr(t,e,n){if(e===t.state)return t.state;var r=t.state,i=t.states[t.state],o=t.states[e];if(!o)throw new Error("Failed to transition states: Invalid state '"+e+"'");return"function"==typeof i.onExit&&i.onExit.call(t,t.context,n),t.state=e,"function"==typeof o.onEnter&&o.onEnter.call(t,t.context,n),t.emit({type:jr.Transition,currentState:t.state,previousState:r}),t.state}function hr(t,e){"string"==typeof e&&(e={type:e});var n,r=t.states[t.state];if(!r)throw new Error("Unrecognized state '"+t.state+"'");return r.events&&r.events[e.type]?n=r.events[e.type]:t.events&&t.events[e.type]&&(n=t.events[e.type]),"string"==typeof n?t.transition(n,e):"function"==typeof n?n.call(t,t.context,e):void 0}var pr="api.action_play",gr="api.action_pause",yr="api.action_stop",mr="api.action_load",vr="api.action_load_more",br="api.action_add",_r="api.action_unload",Ar="api.action_mute",Tr="api.action_unmute",wr="api.action_set_position",xr="api.action_set_playback_rate",kr="api.action_set_volume",Pr="api.action_set_quality_level",Er="api.action_skip",Sr={Loading:"content."+S.N,Waiting:"content."+S.Bb,Playing:"content."+S.V,Error:"content."+S.G,LoadStart:"content."+S.O,Ended:"content."+S.A,TimeUpdate:"content."+S.Z,Progress:"content."+S.ab,DurationChange:"content."+S.E,Tracking:"content."+S.jb,Play:"content."+S.T,Pause:"content."+S.R,Stop:"content."+S.ib,CanPlay:"content."+S.z,RateChange:"content."+S.U,PlaylistSelect:"content."+S.X,PlaylistChange:"content."+S.W,PlaylistLoad:"content."+S.Y,SourceChange:"content."+S.gb,LevelsChange:"content."+S.J,LevelChange:"content."+S.K,TextTrackLoad:"content."+S.xb,TextTracksChange:"content."+S.wb,TextTrackCueChange:"content."+S.B,LanguageChange:"content."+S.I,LanguagesChange:"content."+S.H,LoadedMetadata:"content."+S.M,VolumeChange:"content."+S.Ab,Seeking:"content."+S.eb,Seeked:"content."+S.fb,Paused:"content."+S.S,Resume:"content."+S.db,Loaded:"content."+S.L,NowPlayingChange:"content."+S.Q,Destroy:"content."+S.C},Or={Loading:"adverts."+S.N,Waiting:"adverts."+S.Bb,Playing:"adverts."+S.V,Error:"adverts."+S.G,LoadStart:"adverts."+S.O,Ended:"adverts."+S.A,TimeUpdate:"adverts."+S.Z,Progress:"adverts."+S.ab,DurationChange:"adverts."+S.E,Tracking:"adverts."+S.jb,Start:"adverts."+S.y,End:"adverts."+S.v,Skip:"adverts."+S.w,Skippable:"adverts."+S.x,Play:"adverts."+S.T,Pause:"adverts."+S.R,CanPlay:"adverts."+S.z,PlaylistLoad:"adverts."+S.Y,PlaylistSelect:"adverts."+S.X,PlaylistChange:"adverts."+S.W,SourceChange:"adverts."+S.gb,CompanionStart:"adverts."+S.u,CompanionEnd:"adverts."+S.t,BreakStart:"adverts."+S.s,BreakEnd:"adverts."+S.r},jr={Transition:"transition"},Cr=0,Ir={};function Lr(t){var e,n,r,i,o,a,s,u,c,l,d;if(Lr.supported()){var f=ir(t=ar(t||{}));if(!f.valid)throw new Error("Unable to create player instance, one or more options are invalid: \n * "+f.errors.join("\n * "));this.id=++Cr,Ir[this.id]=this,this.options=t;var h,p,g,y=this,m=Un()(window.navigator.userAgent+Hn()+Date.now()+Math.random()),v=new M.a,b=(w())},gdpr:function(){var t=h.options;return"boolean"==typeof t.gdpr&&t.gdpr?"true":"false"},userConsent:function(){var t=h.options;return"object"==typeof t.gdpr?t.gdpr.userConsent:""},re||""||""},uuid:function(t){return zn()||""},veS.pc},uid:function(t){return t&&t.uid||Wn(h,t).uid||""},muted:function(t){var e=Object(X.a)(t)||Object(X.a)(t.muted)?h.getMute():t.muted;return e?"1":"0"},ad||""},aduid:Kn(h=this,"aduid"),adslot:Kn(h,"adslot"),contentType:Kn(h,"contentType"),creator:Kn(h,"creator"),duration:Kn(h,"duration"),format:Kn(h,"format"),grouping:Kn(h,"grouping"),percent:Kn(h,"percent"),playbackRate:Kn(h,"playbackRate"),position:Kn(h,"position"),publishDate:Kn(h,"publishDate"),quality:Kn(h,"quality"),title:Kn(h,"title"),url:Kn(h,"url"),volume:Kn(h,"volume")},(p=qn(g)).context={},p),_=E.a.create({level:E.a.DEBUG});_.log=function(t,e){var n=null;"string"==typeof e&&"debug"===e.substr(0,5)?(n=""!==e.substr(5)?parseInt(e.substr(5),10):1,e=_.DEBUG):e===_.DEBUG&&(n=1),null!==n&&n>y.options.debug||_.withContext((function(n){ut(n),E.a.log.call(_,"[iono.Player:"+y.id+"] "+t,e)}))},_.logException=function(t){_.withContext((function(e){ut(e),E.a.logException.call(_,t)}))};var A=new Nn({storageKey:"iono-player-settings",storage:yn,settings:t});t.qualityLevel=A.get("qualityLevel")||t.qualityLevel,t.volume=A.get("volume")||t.volume,t.computed=b;var T=null,w=new sr(null,{}),x=new We(ur({logger:_},t)),k=new $e({logger:_,player:x}),P=new Ln({logger:_,maxHistory:t.nowPlaying.maxHistory,timeline:k,player:x,fetchArtwork:t.nowPlaying.fetchArtwork,interval:t.nowPlaying.interval}),O=new Sn(ur({},t.adswizz,{logger:_,timeline:k,player:x,gdpr:t.gdpr})),j=[];v.emit=function(t){if("string"==typeof t&&(t={type:t}),"state"===t.type)_.log("State: "+t.previousState+" => "+t.currentState,"debug1");else if("tracking"===t.type)if("progress"===t.details.event){var e=t.details.playlistItem;(e&&e.metadata||{}).contentType===S.Zb?_.log("Tracking: progress:"+t.details.position+"s","debug1"):_.log("Tracking: progress:"+t.details.percent+"%","debug1")}else _.log("Tracking: "+t.details.event,"debug1");else _.log("Event: "+t.type,"debug"+("timeupdate"!==t.type&&"adtimeupdate"!==t.type?1:2));if(t.uid=null,t.type!==S.W){var n=y.getMetadata();t.uid=n&&n.uid||null}return M.a.prototype.emit.call(v,t)};var C=function(t,e){if(lt(t),t.beforePlay&&(t.beforePlay=!1,T))return this.transition(S.oc,e),T.playPreroll().ay()}),(function(){x.play()}));x.play()},I=function(t,e){x.pause()},L=function(t,e){t.paused=t.content.paused=!1,v.emitAsync(S.T)},D=function(t,e){x.isLive()&&(t.timeline.clear(),T&&T._scheduleAdBreaks()),t.paused=t.content.paused=!0,v.emitAsync(S.R)},B=function(t,e){t.paused=t.content.paused=!1,v.emitAsync(S.db)},U=function(t,e){var n={type:S.jb,details:{event:e.context.event,contentType:e.context.contentType,uid:e.context.uid,position:e.context.position,interrupted:e.details.interrupted||!1}};void 0!==e.details.action&&(n.details.action=e.details.action),void 0!==e.context.percent&&(n.details.percent=e.context.percent),v.emitAsync(n)},z=function(t,e){x.isLive()&&(t.timeline.clear(),T&&T._scheduleAdBreaks()),t.paused=t.content.paused=!0,v.emitAsync(S.ib)},H=function(t,e){t.position=x.getPosition(),t.content.position=x.getPosition(),t.timeline.setPosition(t.position),v.emitAsync({type:S.Z,position:t.content.position});var n=x.getBufferedPercentage();t.bufferedPercentage!==n&&this.send({type:Sr.Progress,buffered:x.getBuffered(),bufferedPercentage:n})},V=function(t,e){v.emitAsync({type:S.eb,uid:null,position:0})},F=function(t,e){v.emitAsync({type:S.fb,uid:null,position:0})},q=function(t,e){t.textTracks=x.textTracks.getTextTracks().reduce((function(t,e){return"hidden"===e.mode||"chapters"!==e.kind&&"subtitles"!==e.kind&&"captions"!==e.kind||t.push(oe(e)),t}),[]),W.call(this,t,e),G.call(this,t,e),Y.call(this,t,e),Z.call(this,t,e),this.state!==S.hc&&this.state!==S.lc&&v.emitAsync({type:S.wb,tracks:t.textTracks})},W=function(t,e){var n=y.getTextTracks().ree),t}),[]);t.languages.join(".")!==n.join(".")&&(t.languages=n,v.emitAsync({type:S.H,languages:t.languages}))},G=function(t,e){var n=x.textTracks.getTextTracks().fikind}));n&&n[0]?t.chapters=n[0].cues.map(ae):t.chapters=[]},Y=function(t,e){t.captions=y.getTextTracks("captionses")},J=function(t,e){var n=A.get("language"),r={};x.textTracks.getTextTracks().forEach((function(t){"captions"!==t.kind&&"subtitles"!==t.kind&&"chapters"!==t.kind||(t.language!==n||r[t.kind]?x.textTracks.setTextTrackMode(t,"disabled"):(r[t.kind]=t.id,x.textTracks.setTextTrackMode(t,"showing")))}))},K=function(t,e){t.qualityLevels=e.levels.map(se),t.qualityLevel=!!e.level&&se(e.level),v.emitAsync({type:S.J,levels:t.qualityLevels,level:t.qualityLevel})},$=function(t,e){var n=this;if((t.playlistItem.metadata||{}).contentType!==S.Zb)if(T){if(T.inAdBreak())return void T.one(S.r,(function(r){tt.call(n,t,e)}));T.startPostroll().then((function(r){r?T.one(S.r,(function(r){tt.call(n,t,e)})):tt.call(n,t,e)}),(function(r){tt.call(n,t,e)}))}else tt.call(this,t,e)},tt=function(t,e){if(t.paused=t.content.paused=!0,t.position=t.content.position=0,this.transition(S.mc),v.emitAsync(S.A),A.get("repeat")===S.fc)return y.setPosition(0),y.play();var n=y.getPlaylistIndex(),r=y.getPlaylist().length-1;return A.get("repeat")===S.ec&&n>=r?(y.selectPlaylistItem(0),y.play()):n<r?(y.nextPlaylistItem(),y.play()):void 0},et=function(t,e){e=Object.assign({skip:0,limit:20},e);var n=null;return Q(t)&&(n=t),{url:n,source:t,options:e}},nt=Object.assign(new M.a,{context:{ready:!1,loading:!1,paused:!0,error:!1,position:0,duration:0,preload:A.get("preload"),autoplay:A.get("autoplay"),playlist:!1,playlistItem:!1,playlistIndex:!1,playOnLoad:!1,quality:A.get("qualityLevel"),qualityLevels:[],source:!1,volume:A.get("volume"),playbackRate:A.get("playbackRate"),isLive:!1,isMute:A.get("muted"),buffered:[],bufferedPercentage:0,repeat:A.get("repeat"),playbackReady:!1,language:A.get("language"),languages:[],textTracks:[],captions:[],activeCaptions:[],subtitles:[],activeSubtitles:[],chapters:[],activeChapter:!1,currentAd:!1,content:{position:0,duration:0,paused:!0},advert:{position:0,duration:0,paused:!0},timeline:k},events:(e={},e[brons)})),e[vr]=function(t,e){if(t.canLoadMore&&!x._addingPlaylistItems){var n=Object.assign({skip:t.playlistSkip,limit:t.playlistLimit},e.options),r=et(t.playlistUrl,n);x.add(r.source,r.options)}},e[mr]=ft((function(t,e){this.transition(S.hc,e),this.send(e)})),e[_r]=ft((function(t,e){x.unload(),T&&T.unload(),v.emitAsync(S.yb),this.transition(S.hc,e)})),e[Ar]=function(t,e){t.isMute=!0,x.setMute(!0)},(!1)},e[xr]=function(t,e){x.setPlaybackRate(e.playbackRate)},e[Pr]=function(t,e){t.quality=e.level,x.levels.setQualityLevel(e.level)},e[kr]=function(t,e){t.volume=e.volume,x.setVolume(e.volume)},e[Sr.VolumeChange]=function(t,e){t.volume=e.volume,t.isMute=e.muted,v.emitAsync({type:S.Ab,volume:t.volume,muted:t.isMute})},e[Sr.LanguagesChange]=function(t,e){t.languages=e.languages},e[Sr.TextTrackCueChange]=function(t,e){var n=oe(e.track),r=e.currentCues.map(ae);switch(n.kind){case"chapters":t.activeChapter=r[0]||!1;break;case"captions":t.activeCaptions=r;break;case"subtitles":t.activeSubtitles=r;break;default:return}v.emitAsync({type:S.B,track:n,currentCues:r})},e[Sr.LevelChange]=function(t,e){t.qualityLevel=se(e.level),t.quality=t.qualityLevel.label,v.emitAsync({type:S.K,level:t.qualityLevel})},e[Sr.Loading]=S.kc,e[Sr.PlaylistSelect]=function(t,e){t.duration=t.content.duration=x.getDuration(),t.playlistItem=x.playlist.getPlaylistItem(),t.playlistIndex=x.playlist.getPlaylistIndex(),t.beforePlay=!0,this.transition(S.jc,e),v.emitAsync({type:S.X,playlistIndex:t.playlistIndex,playlistItem:t.playlistItem})},e[Sr.PlaylistChange]=function(t,e){t.playlist=x.playlist.getPlaylist(),t.playlistIndex=x.playlist.getPlaylistIndex(),t.playlistItem=x.playlist.getPlaylistItem(),t.playlistSkip=t.playlist.length;var n=x.playlist.getPlaylistMetadata();n.url&&null!==n.url.match(/<(skip|limit)>/)?t.playlistUrl=n.url:t.playlistUrl&&null===t.playlistUrl.match(/<(skip|limit)>/)&&(t.playlistUrl=null),!t.playlistUrl||e.added>0&&e.added!==t.playlistLimit||e.loaded>0&&e.loaded!==t.playlistLimit||0===e.loaded&&0===e.added?t.canLoadMore=!1:t.canLoadMore=!0,v.emitAsync(ur({},e,{type:S.W}))},e[Sr.TextTracksChange]=q,e[Sr.SourceChange]=function(t,e){t.source=e.source,v.emitAsync(S.gb)},e[Sr.RateChange]=function(t,e){t.playbackRate!==e.playbackRate&&(t.playbackRate=e.playbackRate,v.emitAsync({type:S.U,playbackRate:t.playbackRate}))},e[Sr.DurationChange]=function(t,e){t.duration=t.content.duration=x.getDuration(),t.timeline.setDuration(t.duration),v.emitAsync({type:S.E,duration:t.duration})},e[Sr.Progress]=function(t,e){t.bufferedPercentage!==e.bufferedPercentage&&(t.buffered=e.buffered,t.bufferedPercentage=e.bufferedPercentage,v.emitAsync({type:S.ab,buffered:t.buffered,bufferedPercentage:t.bufferedPercentage}))},e[Sr.Error]=function(t,e){t.error=e.error instanceof Ft?e.error:Ft.fromMediaError(e.error),t.content.paused=t.paused=!0,this.transition(S.ic)},e[Sr.PlaylistLoad]=function(t,e){v.emitAsync(ur({},e,{type:S.Y}))},e[Sr.Ended]=$,e[Sr.NowPlayingChange]=function(t,e){y.isLive()&&(e.metadata&&e.metadata.contentType===S.Wb||null===e.metadata)&&v.emitAsync({type:S.Q,metadata:e.metadata})},e[Sr.Stop]=z,e[Sr.Destroy]=function(t,e){this.transition(S.lc),v.emitAsync({type:S.C})},e),state:S.lc,states:(d={},d[S.lc]={onEnter:function(t){t.ready=!1},onExit:function(t){t.ready=!0,setTimeout((function(){j.forEach((function(t){t.call(y)})),v.emitAsync(S.bb)}),0)},events:(n={},n[pr]=ft((function(t,e){nt.send(e)})),n[gr]=ft((function(t,e){nt.send(e)})),n)},d[S.hc]={onEnter:function(t,e){t.paused=t.content.paused=!0,t.playlist=!1,t.playlistIndex=!1,t.playlistItem=!1,t.position=t.content.position=x.getPosition(),t.duration=t.content.duration=x.getDuration(),t.content.canPlay=!1,t.source=x.getSource(),t.qualityLevel=!1,t.qualityLevels=[],q.call(this,t,e),v.emitAsync(S.F)},events:(r={},r[mr]=function(t,e){var n=et(e.source,e.options);t.playlistUrl=n.url,t.playlistLimit=n.options.limit,t.playlistSkip=n.options.skip,x.load(n.source,n.options)},r)},d[S.kc]={onEnter:function(t,e){t.loading=!0,t.paused=t.content.paused=!0,t.playlist=!1,t.playlistIndex=!1,t.playlistItem=!1,t.position=t.content.position=x.getPosition(),t.duration=t.content.duration=x.getDuration(),t.content.canPlay=!1,t.source=x.getSource(),t.playOnLoad=!1,t.beforePlay=!0,t.timeline.clear(),v.emitAsync(S.N)},onExit:function(t){t.loading=!1},events:(i={},i[Sr.PlaylistLoad]=function(t,e){v.emitAsync(ur({},e,{type:S.Y}))},d=!0},i[gr]=function(t){t.playOnLoad=!1},i[yr]=function(t){t.playOnLoad=!1},i[Sr.Resume]=B,i[Sr.Loaded]=S.jc,i[Sr.LevelsChange]=K,i[Sr.Seeking]=V,i[Sr.Seeked]=F,i)},d[S.jc]={onEnter:function(t,e){t.source=x.getSource(),t.paused=t.content.paused=!0,t.content.canPlay=!1,t.playOnLoad&&(t.playOnLoad=!1,this.send(pr))},events:(o={},o[pr]=C,o[Or.BreakStart]=S.gc,o[Sr.Waiting]=S.oc,o[Sr.Tracking]=U,o[Sr.Resume]=B,o[Sr.LevelsChange]=K,o[Sr.Play]=L,o[Sr.TimeUpdate]=H,o[Sr.LoadStart]=S.oc,o[Sr.Seeking]=V,o[Sr.Seeked]=F,o[Sr.PlaylistLoad]=function(t,e){"add"!==e.mode&&this.transition(S.kc,e),v.emitAsync(ur({},e,{type:S.Y}))},o)},d[S.oc]={onEnter:function(t,e){v.emitAsync(S.Bb)},events:(a={},a[pr]=function(t,e){dt()||C.call(this,t,e)},a[gr]=function(t,e){dt()||I.call(this,t,e)},a[yr]=function(t,e){dt()||(this.transition(x.isLive()?S.jc:S.mc,e),v.emitAsync(S.ib))},a[wr]=function(t,e){dt()||x.setPosition(e.position)},a[Sr.Error]=function(t,e){t.error=e.error,this.transition(S.ic,e)},a[Sr.Tracking]=U,a[Sr.Stop]=z,a[Sr.Play]=L,a[Sr.Pause]=D,a[Sr.Resume]=B,a[Sr.TimeUpdate]=H,a[Sr.Playing]=S.nc,a[Sr.Paused]=S.mc,a[Sr.Seeking]=V,a[Sr.Seeked]=F,a[Or.BreakStart]=S.gc,a)},d[S.nc]={onEnter:function(t){t.paused=t.content.paused=!1,t.content.canPlay=!0,v.emitAsync(S.V)},events:(s={},s[gr]=I,s[yr]=function(t,e){x.stop()},s[wr]=function(t,e){x.setPosition(e.position)},s[Or.BreakStart]=S.gc,s[Sr.Stop]=function(t,e){t.paused=t.content.paused=!0,v.emitAsync(S.ib)},s[Sr.Tracking]=U,s[Sr.TimeUpdate]=H,s[Sr.Waiting]=S.oc,s[Sr.Ended]=$,s[Sr.Pause]=D,s[Sr.Paused]=function(t,e){this.transition(x.isLive()?S.jc:S.mc,e)},s[Sr.Seeking]=V,s[Sr.Seeked]=F,s)},d[S.mc]={onEnter:function(t){t.paused=t.content.paused=!0,t.content.canPlay=!0,this.emitAsync(S.S)},events:(u={},u[pr]=C,u[yr]=function(t,e){x.stop()},ion)},u[Or.BreakStart]=S.gc,u[Sr.Tracking]=U,u[Sr.TimeUpdate]=H,u[Sr.Stop]=function(t,e){t.paused=t.content.paused=!0,this.transition(x.isLive()?S.jc:S.mc,e),v.emitAsync(S.ib)},u[Sr.Play]=function(t,e){t.paused=t.content.paused=!1,v.emitAsync(S.T)},u[Sr.Resume]=B,u[Sr.Playing]=S.nc,u[Sr.Seeking]=V,u[Sr.Seeked]=F,u)},d[S.gc]={onEnter:function(t){v.emitAsync({type:S.s})},o.r})},events:(c={},c[Or.Breae())},c[Or.Start]=function(t,e){v.emitAsync({type:S.y,ad:N()(T.getCurrentAd()),position:x.getPosition()})},c[Or.End]=function(t,e){t.advert.paused=!0,t.advert.position=0,t.advert.duration=0,v.emitAsync({type:S.v,ad:N()(T.getCurrentAd())})},c[yr]=function(t,e){T.stop()},ip()},c[Or.Playing]=function(t,e){v.emitAsync({type:"ad"+S.V,ad:N()(T.getCurrentAd())})},c[Or.Tracking]=function(t,e){if(void 0===e.details.aduid)return U(0,e);var n=y.getCurrentAd(),r=n&&n.metadata||{},i={type:S.jb,details:{event:e.details.event,contentType:r.contentType,uid:r.uid,position:e.details.position,interrupted:r.interrupted||!1}};void 0!==e.details.action&&(i.details.action=e.details.action),void 0!==e.details.percent&&(i.details.percent=e.details.percent),v.emitAsync(i)},c[Or.Play]=function(t,e){t.paused=t.advert.paused=!1},c[Or.Pause]=function(t,e){t.paused=t.advert.paused=!0},c[Or.Resume]=function(t,e){t.paused=t.advert.paused=!1},c[Or.DurationChange]=function(t,e){t.advert.duration=e.duration,v.emitAsync({type:"ad"+S.E,duration:e.duration,ad:N()(T.getCurrentAd())})},c[Or.TimeUpdate]=function(t,e){t.advert.position=e.position,v.emitAsync({type:"ad"+S.Z,ad:N()(T.getCurrentAd()),position:e.position})},c[Or.Skip]=function(t,e){v.emitAsync({type:S.w,ad:N()(T.getCurrentAd()),position:T.getPosition()})},c[Or.Skippable]=function(t,e){v.emitAsync({type:S.x,ad:N()(T.getCurrentAd())})},c[Or.CompanionStart]=function(t,e){var n=N()(e.companion);n.url=b.replace(n.url,encodeURIComponent,e),n.clickthrough&&(n.clickthrough=b.replace(n.clickthrough,encodeURIComponent,e)),v.emitAsync({type:S.u,ad:N()(T.getCurrentAd()),companion:n,position:T.getPosition()})},c[Or.CompanionEnd]=function(t,e){var n=N()(e.companion);n.url=b.replace(n.url,encodeURIComponent,e),n.clickthrough&&(n.clickthrough=b.replace(n.clickthrough,encodeURIComponent,e)),v.emitAsync({type:S.t,ad:N()(T.getCurrentAd()),companion:n,position:T.getPosition()})},c[Sr.Play]=function(t,e){T._isPlayingServerSideAd()&&L(t)},c[Sr.Tracking]=U,c[Sr.TimeUpdate]=H,c)},d[S.ic]={onEnter:function(t){t.paused=t.content.paused=x.isPaused(),v.emitAsync({type:S.G,error:t.error})},or=!1},events:(l={},l[pr]=function(t,e){t.error.fatal||x.play()},l[Sr.SourceChange]=S.jc,l[Sr.LoadStart]=S.oc,l[Sr.Waiting]=S.oc,l)},d),transition:function(t,e){return fr.call(y,this,t,e)}s,t)}});P.on("chata})})),this.getRepeat=function(){return nt.context.repeat},this.setGDPR=function(t){if("boolean"!=typeof t&&"object"!=typeof t)throw new TypeError("Invalid GDPR value, expected a boolean or object but got '"+t+"'");if("object"==typeof t&&"string"!=typeof t.userConsent)throw new TypeError("Invalid user consent value, expected a string but got '"+t+"'");this.options.gdpr=t,O&&O.setGDPR(t)},this.setRepeat=function(t){if("string"!=typeof t)throw new TypeError("Invalid value for 'mode', expected a string but got '"+t+"'");if(-1===[S.dc,S.ec,S.fc].indexOf(t))throw new Error("Invalid repeat mode '"+t+"'");_.log("Action: setRepeat("+JSON.stringify(t)+")","debug2"),nt.context.repeat=t,x.playlist.setRepeat(t),v.emitAsync({type:S.cb,repeat:t})},this.getPreload=function(){return nt.context.preload},this.setPreload=function(t){if("boolean"!=typeof t)throw new TypeError("Invalid value for 'preload', expected boolean but got '"+t+"'");_.log("Action: setPreload("+JSON.stringify(t)+")","debug2"),nt.context.preload=t,x.setPreload(t)},this.getMute=function(){return nt.context.isMute},this.setMute=function(t){if(void 0===t&&(t=!0),"boolean"!=typeof t)throw new TypeError("Invalid value for 'muted', expected boolean but got '"+t+"'");_.log("Action: setMute("+JSON.stringify(t)+")","debug2"),A.set("muted",t),nt.send(t?Ar:Tr)},this.getVolume=function(){return nt.context.volume},this.setVolume=function(t){if("number"!=typeof t)throw new TypeError("Invalid value for 'volume', expected a number but got '"+t+"'");if(t>1||t<0)throw new RangeError("Invalid value for 'volume', expected a number between 0.0 and 1.0, but got '"+t+"'");_.log("Action: setVolume("+JSON.stringify(t)+")","debug2"),nt.send({type:kr,volume:t})},this.getPlaybackRate=function(){return nt.context.playbackRate},this.setPlaybackRate=function(t){if("number"!=typeof t)throw new TypeError("Invalid value for 'rate', expected number but got '"+t+"'");if(t>3||t<.4)throw new RangeError("Invalid value for 'rate', expected a number between 0.4 and 3.0, but got '"+t+"'");_.log("Action: setPlaybackRate("+JSON.stringify(t)+")","debug2"),nt.context.playbackRate=t,nt.send({type:xr,playbackRate:t})},this.getLanguage=function(){return nt.context.language},this.getLanguages=function(){return nt.context.languages},this.setLanguage=function(t){if("string"!=typeof t)throw new TypeError("Invalid value for 'lang', expected a string but got '"+t+"'");if(-1===this.getLanguages().indexOf(t))throw new Error("Unsupported language '"+t+"'");_.log("Action: setLanguage("+JSON.stringify(t)+")","debug2"),nt.context.language=t,J.call(nt,nt.context),v.emit({type:S.I,language:this.getLanguage()})},this.getQualityLevel=function(){return nt.context.quality},this.getQualityLevels=function(){return nt.context.qualityLevels},this.setQualityLevel=function(t){if("string"!=typeof t)throw new TypeError("Invalid value for 'label', expected string but got '"+t+"'");_.log("Action: setQualityLevel("+JSON.stringify(t)+")","debug2"),A.set("qualityLevel",t),A.save(),nt.send({type:Pr,level:t})},this.unload=function(){_.log("Action: unload()","debug2"),nt.send(_r)},this.play=function(){_.log("Action: play()","debug2"),nt.send(pr)},this.pause=function(){_.log("Action: pause()","debug2"),nt.send(gr)},this.stop=function(){_.log("Action: stop()","debug2"),nt.send(yr)},this.togglePlay=function(){return _.log("Action: togglePlay()","debug2"),nt.send(x.isPaused()?pr:gr)},this.toggleMute=function(){return _.log("Action: toggleMute()","debug2"),nt.send(x.getMute()?Tr:Ar)},this.isPaused=function(){return nt.context.paused},this.getDuration=function(){return x.getDuration()},this.getPosition=function(){return x.getPosition()},this.setPosition=function(t){return _.log("Action: setPosition("+JSON.stringify(t)+")","debug2"),nt.send({type:wr,position:t})},this.getBuffered=function(){return nt.context.buffered},this.getBufferedPercentage=function(){return x.getBufferedPercentage()},this.load=function(t,e){void 0===e&&(e={}),_.log("Action: load()",{source:t,options:e},"debug2"),nt.send({type:mr,source:t,options:e})},this.loadMore=function(t){void 0===t&&(t={}),_.log("Action: loadMore()",{options:t},"debug"),nt.send({type:vr,options:t})},this.canLoaMore},this.add=function(t,e){void 0===e&&(e={}),Q(t)&&(t=b.replace(t,encodeURIComponent)),_.log("Action: add()",{source:t,options:e},"debug2"),nt.send({type:br,source:t,options:e})},this.getPlat(t)},this.getPlaylistItem=function(t){var e="number"==typeof t?nt.context.playlist[t]:nt.context.playlistItem;return e||!1},this.getPlaylistIndex=function(){return nt.context.playlistIndex},this.getPlaylistMetta()},this.nextPlaylistItem=function(){_.log("Action: nextPlaylistItem()","debug2");var t=!this.isPaused(),e=x.playlist.nextPlaylistItem();return!1!==e&&t&&this.play(),e},this.previousPlaylistItem=function(){_.log("Action: previousPlaylistItem()","debug2");var t=!this.isPaused(),e=x.playlist.previousPlaylistItem();return!1!==e&&t&&this.play(),e},this.selectPlaylistItem=function(t){return _.log("Action: selectPlaylistItem("+JSON.stringify(t)+")","debug2"),x.playlist.hasPlaylistItem(t)?(k.clear(),x.playlist.selectPlaylistItem(t),t):(this.log('Failed to change playlist item: could not find a playlist item matching the identifier "'+JSON.stringify(t)+'"',E.a.WARN),-1)},this.getTextTracks=function(t){return void 0!==t?nt.context.textTracks.fi===t})):nt.context.textTracks},this.getChapters=function(){return nt.context.chapters},this.getCurrentChapter=function(){return nt.context.activeChapter},this.getCaptions=function(){return nt.context.captions},this.getCurrentCaptions=function(){return nt.context.activeCaptions},this.getSubtitles=function(){return nt.context.subtitles},this.getCurrentSubtitles=function(){return nt.context.activeSubtitles},this.getCurrentAd=function(){return T?T.getCurrentAd():null},this.getAdPosition=function(){return T?T.getPosition():0},this.getAdDuration=function(){return T?T.getDuration():0},this.getAdSnull},this.s(Er)},this.getAdSkipOffset=function(){return T?T.getSkipOffset():$n.ads.skipOffset},this.isAdSkiple()},this.getAdSkipOffsetRemaining=function(){return T?T.getRemainingSkipOffset():$n.ads.skipOffset},this.log=_.log;var rt=[S.Sb,S.Zb];this.isLive=function(){return y.getState()!==S.hc&&(x.isLive()||nt.context.playlistItem&&rt.includes(nt.context.playlistItem.metadata.contentType))},this.getBie||0},this.getMetadata=function(){return nt.context.playlistItem&&nt.context.playlistItem.metadata||!1},this.getNowPlayingItem=function(){return P.getCurrentEntry()},this.getNowPlayingHistory=function(){return P.getHistory()},this.getSce()},this.getState=function(){return nt.state},this.getrror},this.getSID=function(){return m},this.ready=function(t){if(nt.context.ready)return t.call(this);j.push(t)},this.destroy=function(){_.log("Action: destroy()","debug2"),T&&T.destroy(),x.destroy()},this.download=function(){var t="",e=this.getSource();if(e&&(t=e.download||e.url),t){var n=document.createElement("a");!1===ct.platform.isIOS&&void 0!==n.download?(n.setAttribute("href",t),n.setAttribute("target","_blank"),n.setAttribute("download",t.replace(/^.+\/(.+?)((\?|#).+)?$/,"$1")),n.click()):window.open(t,"_blank"),x.emit({type:S.D})}},this.on=function(t,e){return Array.isArray(t)&&t.forEach((function(t){return v.on(t,e)})),v.on(t,e)},this.off=function(t,e){return Array.isArray(t)&&t.forEach((function(t){return v.off(t,e)})),v.off(t,e)},this.one=function(t,e){if(!Array.isArray(t))return v.one(t,e);t.forEach((function(t){return v.one(t,e)}))};hn(x,_,b,t);Object.defineProperties(this,{license:{get:function(){return w}}});var it,ot,at=[];if("string"==typeof t.license){var st=(it=t.license,ot="https://iframe.iono.fm/license?key="+it,new Promise((function(t,e){R(ot,{timeout:5e3}).then((function(t){return t.json()})).,e))})).cge))}))}))).then((function(t){_.log("License data retrieved","debug1"),w=t}),(function(t){_.warn(t.message)}));at.push(st)}Promise.all(at).then(_.wrap((function(){nt.on(jr.Transite})})),x.observe((function(t){_.log("ContentEvent: "+t.type+" ("+nt.state+")","debug2"),nt.send(dr(t))})),nt.transition(S.hc)}))),this.ready((function(){if(w.data.ads_enabled){x.tracking.settings.trackStaticAds=!0;hn(T=new sn(y,x,{logger:_,enabled:t.ads.enabled,serverURL:t.ads.requestURL,timeout:t.ads.requestTimeout,skipOffset:t.ads.skipOffset,rerollTimeout:Math.max(120,t.ads.rerollTimeout),computed:b,timeline:k,settings:A,adContainer:t.ads.adContainer}),_,b,t);T.observe((function(t){_.log("AdvertsEvent: "+t.type+" ("+nt.state+")","debug2"),nt.send(lr(t))}))}t.source&&y.load(t.source,t.sourceOptions)}))}else E.a.warn("Playback not supported in this environment, please try a different browser");function ut(t){t.tags="0.12.0,player",t.player_version="0.12.0",t.referrer=Hn(),nt&&nt.state!==S.lc&&(t.tags+=","+b.get("contentType")+","+b.get("format"),t.content_type=b.get("contentType"),t.format=b.get("format"))}function lt(t){t.userInteracted||(_.log("Priming content and advertising players","debug2"),t.userInteracted=!0,T&&T.player.getMedia().load(),x.getMedia().loak()}function ft(t){return function(){var e=arguments,n=this;return y.ready((function(){t.apply(n,e)}))}}}Lr.supported=function(){var t=document.createElement("audio");return t&&!!t.canPlayType},Lr.version=function(){return S.pc},Lr.getEnvironment=function(){return ct},Lr.getUUID=function(){return zn()},Lr.getReHn()},Lr.formatSeconds=Ye,Lr.Error=Ft,E.a.log("[iono.Player] Player version "+Lr.version());e.default=Lr}]).default;
//# sourceMappingURL=player.js.map