(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{DQPw:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return A}));var r=n("o0o1"),a=n.n(r),c=n("HaE+"),o=n("RvRI"),i=n.n(o),u=n("vDqi"),s=n.n(u),l=n("j8cX"),_=n("sfCa"),p=n("5/KZ"),d=n.n(p),f=n("EJIG"),O=n("8rN0"),v=function(){var e=Object(c.a)(a.a.mark((function _callee(){var e,t,n,r,c,o,u=arguments;return a.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(n=u.length>0&&void 0!==u[0]?u[0]:"/",r=u.length>1&&void 0!==u[1]?u[1]:null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.href){a.next=4;break}return a.abrupt("return",void 0);case 4:return a.prev=4,a.next=7,s.a.get("/api/payment/generate-hash?".concat(l.QUERY_PARAMS.REDIRECT_URI,"=").concat(r));case 7:return c=a.sent,o=c.data.hash,a.next=11,i.a.generatePaymentUrl(n,Object(f.a)(),r,o);case 11:return a.abrupt("return",a.sent);case 14:a.prev=14,a.t0=a.catch(4),Object(O.N)()&&console.error(a.t0),d()().captureException(a.t0);case 18:return a.abrupt("return",void 0);case 19:case"end":return a.stop()}}),_callee,null,[[4,14]])})));return function generatePaymentUrl(){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function _callee2(){var e,t,n,r,c=arguments;return a.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:"/",t=c.length>1?c[1]:void 0,n=c.length>2&&void 0!==c[2]&&c[2],a.next=5,v(e,t);case 5:(r=a.sent)&&(n?window.location.replace(r):window.location.href=r);case 7:case"end":return a.stop()}}),_callee2)})));return function openPaymentUrl(){return e.apply(this,arguments)}}(),A=function getPaymentRedirectUrl(e){var t,n=localStorage.getItem(l.PREV_PAGE_URL_LOCAL_STORAGE_KEY),r=Object(_.c)(e);if(n)return n;if((null===(t=document)||void 0===t?void 0:t.referrer)&&document.referrer!==window.location.href&&r===Object(_.c)(document.referrer))return document.referrer;return"".concat(r,"/").concat(l.TVN_24_GO,"/")}},EJIG:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("j8cX"),a=n("8rN0"),c=o=function handleStore(){var e=c();return e||(e=function getStore(){return a.C?r.PWA_APP_TYPE_IOS:r.PWA_DEFAULT.toUpperCase()}(),sessionStorage.setItem(r.PWA_SESSION_STORAGE_PARAM_APP_TYPE,e),e)},i=function getSubscriptionStore(){var e=c();return e||o()}},yQXD:function(e,t,n){"use strict";n.d(t,"g",(function(){return L})),n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return D})),n.d(t,"d",(function(){return V})),n.d(t,"i",(function(){return Y})),n.d(t,"h",(function(){return x})),n.d(t,"f",(function(){return G})),n.d(t,"e",(function(){return H})),n.d(t,"c",();var r=n("o0o1"),a=n.n(r),c=n("HaE+"),o=n("WSEr"),i=n("V5lV"),u=n("RvRI"),s=n.n(u),l=n("9+fb"),_=n("APM2"),p=n("Ut6x"),d=n("j8cX"),f=n("u5e/"),O=n("Yj6t"),v=n("IvEv"),b=n("7sc4"),A=function createHash(e){var t=JSON.stringify(e);return"".concat("m=").concat(btoa(t))},N=n("5/KZ"),T=n.n(N),E=n("8rN0"),I=n("G3k1"),g=n("Fg0N"),C=n("KQm4"),S=n("rePB"),j=n("ODXe"),h=n("8+Au"),R=n("sMdi");r U=function parseCookieValue(e){return e.split("/").reduce((function(e,t){var n=t.split("="),r=Object(j.a)(n,2),a=r[0],c=r[1];return a&&c?_objectSpread(_objectSpread({},e),{},Object(S.a)({},a,function normalizeEntryValue(e,t){return"visited"===e?t.split("|"):"origin"===e?decodeURIComponent(t):t}(a,c))):e}),{})},m=function setUserVisitedPublications(e){var t=function serializeCookieValue(e){var t=e.origin,n=void 0===t?"":t,r=e.visited,a=void 0===r?[]:r;return"".concat("origin").concat("=").concat(n).concat("/").concat("visited").concat("=").concat(a.join("|"))}(e);Object(h.setCookie)("user_visited_publications",t,!1,void 0,".".concat(Object(E.p)("TVN24_WAITER_HOST")))},P=function setInitialValue(e,t){var n=encodeURIComponent(t);return m({origin:n,visited:[e]}),t},w="".concat(window.location.origin,"/authenticate"),L=function setup(){var e=Object(p.getPublication)(),t=e===d.TVN_24_GO?"TVN24_WAITER_ACCOUNT_GO_CONFIG_HASH":"TVN24_WAITER_ACCOUNT_CONFIG_HASH";s.a.setup({profileUrl:Object(I.a)("TVN24_WAITER_ACCOUNT_PROFILE_URL"),oauthBaseUrl:Object(I.a)("TVN24_WAITER_ACCOUNT_BASE_OAUTH_URL"),oauthClientId:Object(I.a)("TVN24_WAITER_ACCOUNT_OAUTH_CLIENT_ID"),oauthScope:"/pub-api/user/me /pub-api/user/update-personal-data",portalApiUrl:Object(I.a)("TVN24_WAITER_ACCOUNT_PORTAL_API_URL"),configHash:Object(I.a)(t),cookieSSOSessionIsLoggedDomain:Object(I.a)("TVN24_WAITER_ACCOUNT_SSO_COOKIE_DOMAIN"),basicConnectRedirectUrl:w,logServiceOptions:{outputToConsole:Object(E.N)()},authCallbacks:{tokenSetupCallback:function tokenSetupCallback(){var t=window.performance.getEntriesByName(window.location.href)[0],n=t instanceof PerformanceNavigationTiming&&"navigate"===t.type,r=document.referrer.startsWith(w)&&n?d.ANALYTICS_INTENTIONAL_LOGIN:d.ANALYTICS_NON_INTENTIONAL_LOGIN,a=window.location.href,c=function trackUserVisitedPublications(e,t,n){var r=Object(h.getCookie)("user_visited_publications");if(!r||t===R.ANALYTICS_INTENTIONAL_LOGIN)return P(e,n);try{var a=U(r),c=a.origin,o=a.visited;if(!c||!Array.isArray(o))return P(e,n);if(o.includes(e))return;return m({origin:encodeURIComponent(c),visited:[].concat(Object(C.a)(o),[e])}),c}catch(e){var i="error";e instanceof Error&&(i=e.message),Object(l.getLogger)().error("trackUserVisitedPublications",i)}}(e,r,a);c&&Object(E.L)(d.ANALYTICS_ACCOUNT,{site_action:r,log_url:c})}},paymentConfig:{host:Object(I.a)("TVN24_WAITER_PAYMENT_URL"),clientId:Object(I.a)("TVN24_WAITER_PAYMENT_CLIENT_ID"),configHash:Object(I.a)("TVN24_WAITER_PAYMENT_CONFIG_HASH")},sentry:{client:o}})},y=function calculateHash(){var e,t;return(null===(e=(new i.BrowserDetector).parseUserAgent(navigator.userAgent))||void 0===e?void 0:e.os)===f.DETECTOR_OS_IOS&&(t=A({type:"startLogin"})),t},k=function(){var e=Object(c.a)(a.a.mark((function _callee2(e,t,n){return a.a.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:try{L()}catch(e){}if(s.a.isConnected()){r.next=5;break}return s.a.subscribe(function(){var r=Object(c.a)(a.a.mark((function _callee(r){var c,o,i,u,s,_,p,d,f,b;return a.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:i=r.type,u=r.payload,s=Object(v.getStore)(),a.t0=i,a.next="ACTION_UPDATE_DATA"===a.t0?5:"ACTION_CLEAR_DATA"===a.t0?8:"ACTION_TOKEN_REFRESH_FAILED"===a.t0?10:"ACTION_TOKEN_REFRESHED"===a.t0?12:17;break;case 5:return(_=null==u?void 0:u.accountData)&&(e(_.nick,_.firstName,_.lastName,_.fullName,_.avatar50,_.id,null===(d=_)||void 0===d||null===(f=d.externalData)||void 0===f||null===(b=f.IPRESSO_TVN24)||void 0===b?void 0:b.monitoringLink,_.birthYear,_.askBirthYear),Object(l.sendPermutiveIdentify)()),a.abrupt("break",19);case 8:return t(),a.abrupt("break",19);case 10:return s.dispatch(Object(O.j)()),a.abrupt("break",19);case 12:return a.next=14,Object(g.c)("/priv-data");case 14:return p=a.sent,200===(null===(c=p)||void 0===c||null===(o=c.response)||void 0===o?void 0:o.status)&&n(p.response.data),a.abrupt("break",19);case 17:return T()().captureException(new Error("Undefined portal account action.")),a.abrupt("break",19);case 19:case"end":return a.stop()}}),_callee)})));return function(e){return r.apply(this,arguments)}}()),r.next=5,s.a.connect();case 5:case"end":return r.stop()}}),_callee2)})));return (),D=function(){var e=Object(c.a)(a.a.mark((function _callee3(){return a.a.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(),e.next=4,s.a.basicConnect();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),Object(E.N)()&&console.error(e.t0),T()().captureException(e.t0);case 10:case"end":return e.stop()}}),_callee3,null,[[0,6]])})));return function basicConnect(){return e.apply(this,arguments)}}(),V=function login(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventName,r=void 0===n?d.ANALYTICS_MENU_LOGIN:n,a=t.params,c=void 0===a?{site_action:d.ANALYTICS_MENU_LOGIN}:a;Object(_.saveReferrer)(null===(e=document)||void 0===e?void 0:e.referrer),Object(E.L)(r,c),s.a.login(y())},Y=x=G=function register(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventName,r=void 0===n?d.ANALYTICS_MENU_REGISTER:n,a=t.params,c=void 0===a?{site_action:d.ANALYTICS_MENU_REGISTER}:a;Object(_.saveReferrer)(null===(e=document)||void 0===e?void 0:e.referrer),Object(E.L)(r,c),s.a.register(y())},H=function(){var e=Object(c.a)(a.a.mark((function _callee4(){return a.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return Object(E.L)(d.ANALYTICS_MENU_USER_CENTER,{in:d.LOGOUT,site_action:d.ANALYTICS_MENU_USER_CENTER}),e.next=3,b.a.stop();case 3:s.a.logout();case 4:case"end":return e.stop()}}),_callee4)})));return (),W=}]);