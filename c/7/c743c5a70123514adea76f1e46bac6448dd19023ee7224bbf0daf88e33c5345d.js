import{h as j,j as k,ac as A,p as b,ai as p,u as v,aj as $,q,z}from"./index-aa05d19d.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const g=(r,f,c)=>{const d=new Map;for(let e=f;e<=c;e++)d.set(r[e],e);return d},D=j(class extends k{constructor(r){if(super(r),r.type!==A.CHILD)throw Error("repeat() can only be used in text expressions")}ht(r,f,c){let d;c===void 0?c=f:f!==void 0&&(d=f);const e=[],i=[];let l=0;for(const a of r)e[l]=d?d(a,l):l,i[l]=c(a,l),l++;return{values:i,keys:e}}render(r,f,c){return this.ht(r,f,c).values}update(r,[f,c,d]){const e=b(r),{values:i,keys:l}=this.ht(f,c,d);if(!Array.isArray(e))return this.dt=l,i;const a=this.dt??=[],u=[];let y,m,t=0,n=e.length-1,s=0,o=i.length-1;for(;t<=n&&s<=o;)if(e[t]===null)t++;else if(e[n]===null)n--;else if(a[t]===l[s])u[s]=p(e[t],i[s]),t++,s++;else if(a[n]===l[o])u[o]=p(e[n],i[o]),n--,o--;else if(a[t]===l[o])u[o]=p(e[t],i[o]),v(r,u[o+1],e[t]),t++,o--;else if(a[n]===l[s])u[s]=p(e[n],i[s]),v(r,e[t],e[n]),n--,s++;else if(y===void 0&&(y=g(l,s,o),m=g(a,t,n)),y.has(a[t]))if(y.has(a[n])){const h=m.get(l[s]),x=h!==void 0?e[h]:null;if(x===null){const w=v(r,e[t]);p(w,i[s]),u[s]=w}else u[s]=p(x,i[s]),v(r,e[t],x),e[h]=null;s++}else $(e[n]),n--;else $(e[t]),t++;for(;s<=o;){const h=v(r,u[o+1]);p(h,i[s]),u[s++]=h}for(;t<=n;){const h=e[t++];h!==null&&$(h)}return this.dt=l,q(r,u),z}});export{D as c};
