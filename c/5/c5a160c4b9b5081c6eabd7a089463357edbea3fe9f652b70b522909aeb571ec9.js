/**/_xdc_._x8h432 && _xdc_._x8h432( [1,null,0,null,null,[1]] )fe=Object.defineProperties,he=Object.getOwnPropertyDescriptor,Se=Object.getOwnPropertyDescriptors;var Nt=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var Tt=(o,t,e)=>t in o?vt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,M=(o,t)=>{for(var e in t||(t={}))Te.call(t,e)&&Tt(o,e,t[e]);if(Nt)for(var e of Nt(t))ve.call(t,e)&&Tt(o,e,t[e]);return o},k=(o,t)=>fe(o,Se(t)),i=(o,t)=>vt(o,"name",{value:t,configurable:!0});var u=(o,t,e,r)=>{for(var n=r>1?void 0:r?he(t,e):t,s=o.length-1,a;s>=0;s--)(a=o[s])&&(n=(r?a(t,e,n):a(n))||n);return r&&n&&vt(t,e,n),n};var l=(o,t,e)=>(Tt(o,typeof t!="symbol"?t+"":t,e),e);var v=(o,t,e)=>new Promise((r,n)=>{var s=d=>{try{g(e.next(d))}catch(f){n(f)}},a=d=>{try{g(e.throw(d))}catch(f){n(f)}},g=d=>d.done?r(d.value):Promise.resolve(d.value).then(s,a);g((e=e.apply(o,t)).next())});var c={modules:["SignalsIds","SignalsBsc","SignalsVlp","SignalsAbs","LegacyLayer","SignalsAutoInsertion","GptMeasurement","VoxMediaConfig","SignalsTvp","TimeConfig","EverydayHealthConfig","PrisaConfig"],configs:{"RFY0NjQwNDE=":[0,1,2,3,4,5,6,7],"RFY5NDIxOTY=":[0,1,2,3,4,5,8],RFYxMDcwMjkx:[0,1,2,3,4,5,8],"RFY2NzUwMzg=":[0,1,2,4,5,8],"RFY2NjkzNjE=":[0,1,2,4,5,8],"RFY3NTk1MjA=":[0,1,2,3,4,5,6,8,9],RFYxMjQ2NzA1:[0,1,4,5],RFYxMTkzODQ2:[0,1,4,5],"RFY5NDA4NDg=":[0,1,2,4,5,8],RFYxMDEyNjAw:[3,4],RFYxMjAwOTM3:[0,1,4,5],RFYxMTA2NjUz:[0,1,2,3,4,5,8],"RFYzMTIwNDg=":[0,1,2,4,5],RFYxMTA2NzY0:[0,1,2,3,4,5,8],"RFYxMTExMTE=":[0,1,2,4,5,8],RFYxMTA4MDIy:[0,1,4,5],"RFY4MzIzNDY=":[0,1,4,5],"RFY2NzM2NzI=":[0,1,2,3,4,5,8],"RFY4NjYwMjU=":[0,1,2,4,5,8],"RFY0NjQwMzM=":[0,1,2,4,5],RFYxMTEwOTk0:[0,1,2,3,4,5,8],RFYxMTMwNzQ4:[0,1,4,5],RFYxMDI2NTMx:[0,1,2,4,5,8],"RFY3OTc2ODY=":[0,1,2,4,5,8],RFYxMDcxNDY3:[0,1,2,3,4,5,8],"RFY2NDcwODg=":[0,1,2,4,5,8],RFYxMDgwMjEy:[3,4,5],RFYxMTQ4MjYx:[0,1,2,3,4,5,8],"RFY5ODk2NzI=":[3,4,5],RFYxMTQwNjg5:[5],RFYxMjA4OTc5:[0,1,2,3,4,8],RFYxMTYxMjU5:[],RFYxMTIyMjY4:[0,1,4,5],"RFY5NzI5MzU=":[5],"RFY5NzQ3MzI=":[],"RFY0MjQ5NDA=":[0,1,2,4,5],RFYxMjA4ODI5:[0,1,2,3,4,5,8],RFYxMDExNDU1:[0,1,2,3,4,5,8],RFYxMDgzNzg4:[0,1,2,4,5,8],RFYxMDU4Nzk0:[0,1,10,2,4,5,6,8],RFYxMDM2Nzc2:[0,1,3,4],RFYxMDIzOTQ1:[3,4,5],"RFY4NDQ0Njg=":[0,1,2,3,4,5,8],RFYxMTU3NzY0:[0,1,2,4,5,8],"RFYzNzU5MzU=":[0,1,2,4,5],"RFY3Nzc4ODU=":[0,1,2,4,5,8],"RFY5Nzg2NjI=":[5],"RFY3NTc3MzA=":[0,1,2,4,5,8],RFYxMTgwNTQx:[0,1,4,5],"RFY3OTI4NTU=":[0,2,4,5],"RFY5NzQ3MzE=":[0,1,2,4,8],RFYxMTg3NDkx:[0,1,2,4,5,8],"RFY3Nzc1NzY=":[0,1,2,4,5,8],RFYxMDEwNzI4:[0,1,2,4,8],RFYxMDQ0MzMw:[0,1,11,2,3,4,5,6,8],"RFY2NTE3NDQ=":[0,1,2,3,4,5,8],"RFY4OTMwNTY=":[0,1,2,4,8],"RFY5NzQ3MzA=":[0,1,2,4,8],RFYxMTUzNjQ1:[0,1,4,5],"RFY0NjQwMjE=":[0,1,2,3,4,5,8],"RFY5MTA2Mzg=":[0,1,4],"RFY4MDU2MDE=":[0,2,4,8],RFYxMTM2MTU2:[0,1,4,5],RFYxMjAzNDUy:[0,1,2,4,5,8],"RFY4MzIzNTM=":[0,1,4,5],"RFY2ODQzNDg=":[0,1,2,3,4,5,8],"RFY1ODc0MTQ=":[0,1,2,3,4,5,8],RFYxMTY4NjQ0:[0,1,2,4,5,8],"RFY3MTg2ODU=":[0,4],RFYxMDE2NjU2:[0,1,2,3,4,5,8],RFYxMjQwMTY0:[0,1,4,5],RFYxMDAxNjU0:[0,1,2,3,4,5,8],"RFY4OTY3MTQ=":[0,1,2,3,4,5,8],"RFY3MzQzNDI=":[0,1,2,3,4,5,8],"RFY4MjE5MTg=":[0,1,2,4,5,8],"RFY5NDMzOTk=":[0,1,2,3,4,5,8],"RFYzNzQxNTg=":[0,1,2,4,5],"MTc0OTI1Mjg=":[0,1,2,4,5],RFYxMTcyOTg1:[0,1,2,3,4,5,8],RFYxMTQ1NzI5:[0,1,4,5],"RFY3MTA4Nzg=":[0,1,2,4,5,8],"RFY5MDI5MjM=":[0,1,2,4,5,8],"RFY2NzI1MjE=":[0,1,2,4,5,8],"RFY4NDY4Mjc=":[3,4,5],RFYxMTA2MDA5:[0,1,2,3,4,5,8],RFYxMTgwNTc5:[0,1,4,5],RFYxMjIzMzY5:[0,1,4,5],RFYxMTQ3ODUx:[0,1,2,4,5,8],"RFY5NDU5ODg=":[0,1,2,3,4,5,8],"RFY4MDkxOTk=":[0,1,2,4,5,8],"RFY4NjQ3ODc=":[3,4,5],RFYxMjUwMjAy:[0,1,2,3,4,5,8],"RFY0NjUxNTc=":[0,1,2,4,5],RFYxMTQ5Mzg3:[0,1,4,5],RFYxMTYyMjEy:[0,1,4,5],RFYxMTA4MTY0:[0,1,2,3,4,5,8],"RFY3NDg3MjI=":[0,1,2,4,5,8],RFYxMjUzMzI1:[0,1,2,3,4,5,8]}};var U={TYPE:"b1",COMMIT_HASH:"b2",ENTRY_MODULES:"b3",HOSTNAME:"b4",CTX:"b5",CMP:"b6",VISIT_ID:"b7",FEATURE_FLAGS:"b8",SAMPLE_INTERVAL:"d1",FLUSH_TO_PXSRV:"d2",_PLACEHOLDER_BLOB_9:"b9",_PLACEHOLDER_BLOB_10:"b10",_PLACEHOLDER_DOUBLE_3:"d3",_PLACEHOLDER_DOUBLE_4:"d4",_PLACEHOLDER_DOUBLE_5:"d5"},lt=k(M({},U),{LOG_LEVEL:"b11",MESSAGE:"b12",TRACE:"b13"}),Q=k(M({},U),{AD_REQUEST_STATUS:"b11",AD_REQUEST_INDEX:"d6",AD_REQUEST_DELAY:"d7"});var ut={queueAdRequest:o=>{var t;try{(t=o.callback)==null||t.call(o),o.callback=null}catch(e){}},defineSlot:(o,t)=>{},getTargeting:o=>({})};var Et=class Et{constructor(t,e){l(this,"window");l(this,"dvtag");l(this,"modules",new Map);l(this,"errorHandlers",[]);l(this,"errors",[]);var r;this.window=e,this.window.dvtag=(r=this.window.dvtag)!=null?r:{},this.dvtag=this.window.dvtag,this.dvtag._core=this;for(let[n,s]of Object.entries(ut))this.dvtag[n]=s;for(let n of t)this.createModule(n);for(let n of this.modules.values())this.applyModuleDecoration(n);for(let n of this.modules.values())this.applyErrorDecoration(n);for(let n of this.modules.values())this.applyPluginDecoration(n);for(let n of this.modules.values())this.applyApiDecoration(n);for(let n of this.modules.values())this.applyExecuteDecoration(n)}get moduleList(){return[...this.modules.keys()].map(t=>t.name)}get(t){return this.getModule(t).gateway}getByName(t){let e=[...this.modules.keys()].find(r=>r.name===t);return e!=null?this.get(e):null}getModule(t){let e=this.modules.get(t);if(e==null)throw new Error(`module not in core: ${t.name}`);return e}createModule(t){if(t.prototype.moduleConfig==null)throw new Error(`not a module: ${t.name}`);let e=new t;e.core=this,e.gateway={module:e},this.modules.set(t,e)}applyModuleDecoration(t){var n,s,a,g,d,f;let e=t.constructor.prototype.moduleConfig,r=t.constructor.name;for(let{method:p}of e){let S=t[p].bind(t),h=(a=(s=(n=this.dvtag._hooks)==null?void 0:n.interceptModule)==null?void 0:s[r])==null?void 0:a[p],T=h==null?S:h.bind(t),A=(f=(d=(g=this.dvtag._hooks)==null?void 0:g.inspectModule)==null?void 0:d[r])==null?void 0:f[p],R=A==null?T:(...w)=>{let b=T(...w);return A(w,b),b},Y=i((...w)=>{let b;try{b=R(...w)}catch(E){throw this.traceMethodError(t,p,w,E)}return b instanceof Promise?b.catch(E=>{throw this.traceMethodError(t,p,w,E),E}):b},"traced");t.gateway[p]=Y}if(t.plugins!=null){t.pluginFunctions={};for(let p of Object.keys(t.plugins)){t.pluginFunctions[p]=[];let S=t.pluginFunctions[p];t.plugins[p]=(...h)=>{let T=[];for(let A of S)try{T.push(A(...h))}catch(R){this.tracePluginError(t,p,R)}return T}}}}traceMethodError(t,e,r,n){var s;return n.dvtagTrace=(s=n.dvtagTrace)!=null?s:[],n.dvtagTrace.unshift(`${t.constructor.name}.${e}(${r.map(a=>typeof a).join(",")})`),n}traceExecuteError(t){var e;return t.dvtagTrace=(e=t.dvtagTrace)!=null?e:[],t.dvtagTrace.unshift("@execute"),this.handleSevereError(t),t}tracePluginError(t,e,r){var n;return r.dvtagTrace=(n=r.dvtagTrace)!=null?n:[],r.dvtagTrace.unshift(`@plugin(${t.constructor.name}, '${e}')`),this.handleSevereError(r),r}traceApiError(t,e){var r;return e.dvtagTrace=(r=e.dvtagTrace)!=null?r:[],e.dvtagTrace.unshift(`@api('${t}')`),this.handleSevereError(e),e}handleSevereError(t){var e;for(let r of this.errorHandlers)try{r(t)}catch(n){}this.errors.length>10||this.errors.push({message:t.message,trace:(e=t.dvtagTrace)!=null?e:[]})}applyErrorDecoration(t){var r;let e=(r=t.constructor.prototype.errorConfig)!=null?r:[];for(let{method:n}of e)this.errorHandlers.push(t.gateway[n])}applyPluginDecoration(t){var r;let e=(r=t.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:n,category:s,method:a}of e)this.getModule(n).pluginFunctions[s].push(t.gateway[a])}applyApiDecoration(t){var r;let e=(r=t.constructor.prototype.apiConfig)!=null?r:[];for(let{api:n,method:s}of e)Object.defineProperty(this.dvtag,n,{value:(...a)=>{var d,f;let g;try{g=t.gateway[s](...a)}catch(p){return this.traceApiError(n,p),(f=(d=ut)[n])==null?void 0:f.call(d,...a)}return g instanceof Promise?g.catch(p=>{var S,h;return this.traceApiError(n,p),(h=(S=ut)[n])==null?void 0:h.call(S,...a)}):g},writable:!1})}applyExecuteDecoration(t){return v(this,null,function*(){var r;let e=(r=t.constructor.prototype.executeConfig)!=null?r:[];for(let{method:n}of e)try{yield t.gateway[n]()}catch(s){this.traceExecuteError(s)}})}};i(Et,"Core");var st=Et;var yt=[],_t=yt;var m=i(o=>{let t=o.prototype,e=Object.getOwnPropertyNames(t).filter(r=>{var n;return r!=="constructor"&&((n=Object.getOwnPropertyDescriptor(t,r))==null?void 0:n.value)instanceof Function});t.moduleConfig=e.map(r=>({method:r})),yt.push(o)},"moduleClass"),tt=i(o=>t=>{},"attachModule"),J=i((o,t)=>{var e;o.executeConfig=(e=o.executeConfig)!=null?e:[],o.executeConfig.push({method:t})},"executeMethod"),at=i((o,t)=>(e,r)=>{var n;e.pluginConfig=(n=e.pluginConfig)!=null?n:[],e.pluginConfig.push({PluggableClass:o,category:t,method:r})},"pluginMethod"),X=i(o=>(t,e)=>{var r;t.apiConfig=(r=t.apiConfig)!=null?r:[],t.apiConfig.push({api:o,method:e})},"apiMethod"),Gt=i((o,t)=>{var e;o.errorConfig=(e=o.errorConfig)!=null?e:[],o.errorConfig.push({method:t})},"errorMethod");var ye=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],_e=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],qt=i((o,t)=>{for(let[e,r]of o)t=t.replace(e,r);return t},"replaceByRules"),zt=i(o=>{let t=qt(ye,o);return qt(_e,t)},"normalizeUrl");var Vt=i(o=>o.split("?",1)[0].split("#",1)[0],"stripUrlQuery");var dt,Ae=new Uint8Array(16);function At(){if(!dt&&(dt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dt(Ae)}i(At,"rng");var _=[];for(let o=0;o<256;++o)_.push((o+256).toString(16).slice(1));function jt(o,t=0){return _[o[t+0]]+_[o[t+1]]+_[o[t+2]]+_[o[t+3]]+"-"+_[o[t+4]]+_[o[t+5]]+"-"+_[o[t+6]]+_[o[t+7]]+"-"+_[o[t+8]]+_[o[t+9]]+"-"+_[o[t+10]]+_[o[t+11]]+_[o[t+12]]+_[o[t+13]]+_[o[t+14]]+_[o[t+15]]}i(jt,"unsafeStringify");var Re=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rt={randomUUID:Re};function be(o,t,e){if(Rt.randomUUID&&!t&&!o)return Rt.randomUUID();o=o||{};let r=o.random||(o.rng||At)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(let n=0;n<16;++n)t[e+n]=r[n];return t}return jt(r)}i(be,"v4");var bt=be;var P=i(()=>bt(),"uuid");var Ft=i((o,t)=>{try{let e=new URLSearchParams(o),r=e.get("ctx"),n=e.get("cmp");if(r!=null&&n!=null)return{ctx:r,cmp:n,prefetch:t}}catch(e){}return null},"parseInfo"),Qt=i(o=>{var t;return o.pathname!=="/signals/pub.js"?null:(t=Ft(o.search,!0))!=null?t:Ft(o.hash.substring(1),!1)},"parseLegacyPagetagUrl");var Ue=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,y=class{constructor(){l(this,"visitUuid",P());l(this,"tagInfo");l(this,"normalizedUrl")}_initialize(){this.getTagInfo()}getTagInfo(){var t;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(e){}(t=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"})}return this.tagInfo}getVisitUuid(){return this.visitUuid}_parseTagInfo(){let t=this.getCurrentScriptSrc();if(t==null)return null;let e=new URL(t,"https://pub.doubleverify.com"),r=e.pathname,n=Ue.exec(r);if(n!=null){let[,s,a]=n;return{ctx:s,cmp:a}}return Qt(e)}getCurrentScriptSrc(){var t,e;return(e=(t=this.core.window.document.currentScript)==null?void 0:t.getAttribute("src"))!=null?e:null}getStrippedPageUrl(){return Vt(this.core.window.location.href)}getNormalizedPageUrl(){var e;let t=this.getStrippedPageUrl();return((e=this.normalizedUrl)==null?void 0:e.stripped)!==t&&(this.normalizedUrl={stripped:t,normalized:zt(this.core.window.location.href)}),this.normalizedUrl.normalized}};i(y,"Context"),u([J],y.prototype,"_initialize",1),y=u([m],y);var I=class{getShortCommitId(){return"7bfcbe1"}getBuildTimestamp(){return 1706914814207}getAuthToken(){return typeof AUTH_TOKEN=="undefined"?"default":AUTH_TOKEN}};i(I,"DefinedVariables"),I=u([m],I);var D=class{getWindow(){return this.core.window}getDocument(){return this.getWindow().document}getUserAgent(){var t,e;return(e=(t=this.getWindow().navigator)==null?void 0:t.userAgent)!=null?e:""}getPageUrl(){var t,e;return(e=(t=this.getWindow().location)==null?void 0:t.href)!=null?e:""}getHostname(){return new URL(this.getPageUrl()).hostname}getNavigator(){return this.getWindow().navigator}getPerformance(){var t;return(t=this.getWindow().performance)!=null?t:{}}getPerformanceTimeMs(){var t,e,r;return Math.floor((r=(e=(t=this.getPerformance()).now)==null?void 0:e.call(t))!=null?r:null)}};i(D,"Environment"),D=u([m],D);var Ut=class Ut{constructor(){l(this,"pending",[]);l(this,"flushing",!1)}push(t){this.pending.push(t),this.flush()}flush(){return v(this,null,function*(){var e;if(this.flushing)return;this.flushing=!0;let t=this.pending.shift();for(;t!=null;){try{yield t.promise}catch(r){}try{(e=t.callback)==null||e.call(t)}catch(r){}t=this.pending.shift()}this.flushing=!1})}};i(Ut,"AsyncQueue");var pt=Ut;var x=class{constructor(){l(this,"plugins",{adRequestQueued:t=>[],adRequestCompleted:t=>[]});l(this,"queue",new pt);l(this,"adRequestCounter",0)}_queueAdRequest(t){return v(this,null,function*(){if(t==null)return;let e={index:this.adRequestCounter++,status:"queued",timeoutValue:t.timeout,onDvtagReadyCalled:t.timestamp,waitingStarted:new Date().getTime(),internal:t.internal};this.plugins.adRequestQueued(e);let r=t.callback;r==null?e.status="tag-timeout":t.callback=()=>{e.status="queue-timeout",e.callbackCalled=new Date().getTime(),t.callback=null;try{r()}catch(s){}};let n=i(()=>{if(t.callback!=null){t.callback=null,e.status="success",e.callbackCalled=new Date().getTime();try{r==null||r()}catch(s){}}e.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(e)},"onAsyncOperationsCompleted");this.queue.push({callback:n})})}delayAdRequests(t){this.queue.push({promise:t})}};i(x,"AdRequestQueue"),u([X("queueAdRequest")],x.prototype,"_queueAdRequest",1),x=u([m],x);var De="https://pub.doubleverify.com/dvtag/metrics/event.png",we=1,Dt=1,C=class{constructor(){l(this,"sharedDataPoints");l(this,"sampleInterval",Dt)}_onAdRequestCompleted(t){if(t.index!==0)return;let{timeoutValue:e,onDvtagReadyCalled:r,callbackCalled:n}=t,s=n!=null?n-r:e;this.fireEvent("ad-request",{[Q.AD_REQUEST_STATUS]:t.status,[Q.AD_REQUEST_INDEX]:t.index,[Q.AD_REQUEST_DELAY]:s},{sampleInterval:this.sampleInterval,flushToPxsrv:1})}_handleError(t){var n,s;let e=(n=t.message)!=null?n:"unknown",r=((s=t.dvtagTrace)!=null?s:[]).join("=>");this.fireEvent("log",{[lt.LOG_LEVEL]:"error",[lt.MESSAGE]:e,[lt.TRACE]:r},{sampleInterval:we,flushToPxsrv:0})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let t=this.core.get(y),e=this.core.get(I),r=this.core.get(D),{ctx:n,cmp:s}=t.getTagInfo(),a=r.getHostname(),g=t.getVisitUuid(),d=e.getShortCommitId();this.sharedDataPoints={[U.COMMIT_HASH]:d,[U.ENTRY_MODULES]:"",[U.VISIT_ID]:g,[U.FEATURE_FLAGS]:"",[U.CTX]:n,[U.CMP]:s,[U.HOSTNAME]:a}}return this.sharedDataPoints}fireEvent(t,e,{sampleInterval:r=1,flushToPxsrv:n=0}={}){if(Math.random()>=1/r)return;e=k(M(M({},e),this._getSharedDataPoints()),{[U.TYPE]:t,[U.SAMPLE_INTERVAL]:r,[U.FLUSH_TO_PXSRV]:n});let s=new URL(De);for(let[a,g]of Object.entries(e))s.searchParams.set(a,g.toString());this._sendBeacon(s.href)}_sendBeacon(t){try{typeof(navigator==null?void 0:navigator.sendBeacon)=="function"?navigator.sendBeacon(t):new Image().src=t}catch(e){}}};i(C,"Events"),u([at(x,"adRequestCompleted")],C.prototype,"_onAdRequestCompleted",1),u([Gt],C.prototype,"_handleError",1),C=u([m],C);var mt=["BSC","ABS"],Kt=["IDS"],et=["VLP","TVP"],Z=[...mt,...Kt,...et],wt=i(o=>Z.includes(o.toUpperCase()),"isSignal"),ft=i(o=>et.includes(o.toUpperCase()),"isSlotSignal"),$t=i(o=>Kt.includes(o.toUpperCase()),"isUserSignal"),Ht=i(o=>mt.includes(o.toUpperCase()),"isPageSignal"),Wt=i(o=>o.map(t=>t.toUpperCase()).filter(wt),"asSignals");var O=class{constructor(){l(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){return this.getPq().PTS}setApi(t){let e=this.getPq();e!=null&&(e.init=()=>{},e.loadSignals=t.loadSignals,e.loadSignalsForSlots=t.loadSignalsForSlots,e.getTargeting=t.getTargeting)}_pushToDvtagCmd(...t){var e;this.core.dvtag.cmd=(e=this.core.dvtag.cmd)!=null?e:[],this.core.dvtag.cmd.push(...t)}_initialize(){var r,n;this.core.window.PQ=(r=this.core.window.PQ)!=null?r:{};let t=this.core.window.PQ;if(t.loaded)return{cmd:[],PTS:{}};t.loaded=!0,t.PTS=(n=t.PTS)!=null?n:{};let e=t.cmd;return t.cmd={push:s=>this._pushToDvtagCmd(s)},Array.isArray(e)&&this._pushToDvtagCmd(...e),t}};i(O,"LegacyPq"),O=u([m],O);var Yt=i(o=>o==null?"":`@${o}`,"getPositionSuffix");var Ie=/^(\d+)x(\d+)$/,Jt=i(o=>o==="all"?[]:o.split(",").map(t=>{let e=t.match(Ie);return e==null?{label:t}:{width:parseInt(e[1],10),height:parseInt(e[2],10)}}),"stringToSlotSizes"),gt=i(o=>o.length===0?"all":o.map(({width:t,height:e,label:r})=>r!=null?r:`${t}x${e}`).join(","),"slotSizesToString"),Xt=i(o=>o==null?"":o.length>0&&o.every(({label:r})=>r==null)?gt(o):"","slotSizesToStringIfSpecific");var It="https://pub.doubleverify.com/dvtag/signals/",B=class{_getBaseUrl(t){let e=this.core.get(y),{ctx:r,cmp:n}=e.getTagInfo(),s=e.getNormalizedPageUrl();try{s=new URL(s).origin}catch(g){}let a=new URL(t,It);return a.searchParams.set("ctx",r),a.searchParams.set("cmp",n),a.searchParams.set("url",s),a}getUserTargetingUrl(t){let e=this._getBaseUrl("ids/pub.json");return t.includes("IDS")&&e.searchParams.set("ids","1"),e.href}getPageTargetingUrl(t,e){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",e),t.includes("BSC")&&r.searchParams.set("bsc","1"),t.includes("ABS")&&r.searchParams.set("abs","1"),r.href}getSlotTargetingUrl(t,e){var s;let r=this._getBaseUrl("vlp/pub.json");t.includes("VLP")&&r.searchParams.set("vlp","1"),t.includes("TVP")&&r.searchParams.set("tvp","1");let n=0;for(let a of e){let{id:g,position:d,sizes:f}=(s=a.adUnit)!=null?s:{},p=g+Yt(d);r.searchParams.set(`slot-${n++}-${p}`,Xt(f))}return r.href}};i(B,"SignalsUrlBuilder"),B=u([m],B);var Zt="https://vtrk.doubleverify.com";var te=i(()=>Math.floor(1e12*Math.random()),"randomInt");var nt="qt_loaded",ee="pts_pid",re="pts_sid",Ct=class Ct extends Error{constructor(e,r){super(r);this.code=e}};i(Ct,"QtError");var rt=Ct;var ne=i(o=>{var e,r;let t={};for(let[n,s]of o.entries())for(let a of et){let g=s[a];g==null||g.length<1||((r=t[e=n.uuid])!=null||(t[e]={}),t[n.uuid][a]=g[0])}return t},"formatSlotTargetingForTracking");var oe=i(({transferSize:o,decodedBodySize:t})=>o>0?"network":t>0?"cache":"unknown","getCacheStatus");var Mt=i((o,t)=>o.reduce((e,r)=>{var s,a,g;let n=Number.parseInt((g=(a=(s=r[t])==null?void 0:s[0])==null?void 0:a.split)==null?void 0:g.call(a,"-")[0],10);return Number.isNaN(n)||(e+=n),e},0),"summarizeSlotTargeting");var K=i((o,t)=>o!=null&&t!=null?Math.round(t-o):void 0,"timeSpan");var xt=class xt{constructor(t,e,r,n,s,a,g,d,f,p,S,h=1e3){l(this,"data");l(this,"start");l(this,"flushed",!1);l(this,"getPerformanceTimeMs");l(this,"sendPixel");l(this,"disabled");this.getPerformanceTimeMs=f,this.sendPixel=p,this.disabled=S,this.start=this.getPerformanceTimeMs(),this.data={t:"event",ec:"page",ea:"unknown",v:"1",ctx:r,cmp:n,cid:e,z:te(),cd105:g,cd160:P(),cd161:a,cd50:"upt",cd51:t,cd180:"no-fetches"},s&&(this.data.cd55="1"),d!=null&&(this.data.cd52=d),setTimeout(()=>this.fireEvent(),h)}setEventAction(t){this.addData({ea:t})}addRequestedSignals(t){let e=i(r=>r?"1":void 0,"toString");this.addData({cm56:e(t.includes("IDS")),cm57:e(t.includes("BSC")),cm58:e(t.includes("ABS")),cm59:e(t.includes("VLP")),cm60:e(t.includes("TVP"))})}setAutoInsertionEnabled(){this.addData({cd68:"1"})}addResultsData(t,e,r){if(t.IDS!=null&&this.addData({cm170:t.IDS[0],cm61:t.IDS[0]}),e.BSC!=null&&this.addData({cd171:e.BSC.join(","),cm62:e.BSC.length}),e.ABS!=null&&this.addData({cm63:e.ABS.length}),r.size===0)return;this.addData({cd175:JSON.stringify(ne(r))});let n=[...r.values()];n[0].VLP!=null&&this.addData({cm66:r.size,cm64:Mt(n,"VLP")}),n[0].TVP!=null&&this.addData({cm67:r.size,cm65:Mt(n,"TVP")})}setRequestSuccess(){let t=this.getPerformanceTimeMs(),e;this.start!=null&&t!=null&&(e=Math.round(t-this.start)),this.addData({cd53:"1",cm54:e})}addFetchPerformanceData(t,e,r){var d;if(t==null){this.data.cd180==="no-fetches"&&(this.data.cd180=(r==null?void 0:r.getEntriesByName)==null?"no-api":"no-entry");return}e==="ids"&&this.addData({cm187:Math.round(t.duration)}),e==="bsc"&&this.addData({cm188:Math.round(t.duration)}),e==="vlp"&&this.addData({cm189:Math.round(t.duration)});let n=this.getPerformanceTimeMs(),s=K(t.fetchStart,n),a=this.data.cm186;if(s==null||a>s)return;let g=(d=t.secureConnectionStart)!=null?d:t.connectEnd;this.addData({cd180:oe(t),cm180:K(t.fetchStart,t.responseEnd),cm181:K(t.domainLookupStart,t.domainLookupEnd),cm182:K(t.connectStart,g),cm183:K(g,t.connectEnd),cm184:K(t.requestStart,t.responseStart),cm185:K(t.responseStart,t.responseEnd),cm186:s})}trackError(t){var e;this.addData({ea:"error",cd110:(e=t==null?void 0:t.message)!=null?e:"unknown error",cd111:t instanceof rt?t.code:void 0}),this.fireEvent()}addData(t){Object.assign(this.data,t)}fireEvent(){let t=Object.keys(this.data).filter(r=>this.data[r]!=null).map(r=>`${r}=${encodeURIComponent(this.data[r])}`),e=`${Zt}?${t.join("&")}`;return!this.flushed&&!this.disabled&&this.sendPixel(e),this.flushed=!0,e}};i(xt,"PendingEvent");var St=xt;var Ce=5,Me=["ids","bsc","vlp"],L=class{constructor(){l(this,"plugins",{getLegacyType:()=>[],isTrackingDisabled:()=>[]});l(this,"eventCount",0)}createPendingEvent(t,e=!0){var w;let r=this.core.get(I),n=this.core.get(y),s=this.core.get(D),a=(w=this.plugins.getLegacyType()[0])!=null?w:"unknown",g=r.getShortCommitId(),d=n.getVisitUuid(),f=n.getNormalizedPageUrl(),{ctx:p,cmp:S,prefetch:h}=n.getTagInfo(),T=s.getNavigator(),A=i(()=>s.getPerformanceTimeMs(),"getPerformanceTimeMs"),R=i(b=>{try{typeof(T==null?void 0:T.sendBeacon)=="function"?T.sendBeacon(b):new Image().src=b}catch(E){}},"sendPixel"),Y=this.eventCount>=Ce||this.plugins.isTrackingDisabled().length>0;return e&&this.eventCount++,new St(g,d,p,S,h,f,a,t,A,R,Y)}findPerformanceEntries(){var e,r;let t=this.core.get(D).getPerformance();return(r=(e=t.getEntriesByType)==null?void 0:e.call(t,"resource").filter(n=>n.name.startsWith(It)).map(n=>{var a;return{type:(a=Me.find(g=>n.name.includes(g)))!=null?a:"unknown",entry:n,performance:t}}))!=null?r:[]}};i(L,"LegacyTracking"),L=u([m],L);var ot=i(o=>{if(o==null)return[];let t=ie(o);return t!=null?[t]:Array.isArray(o)?o.map(ie).filter(e=>e!=null):[]},"parseSlotSizes"),ie=i(o=>{if(o==null)return null;if(typeof o=="string")return{label:o};if(Array.isArray(o)){if(o.length===1&&typeof o[0]=="string")return{label:o[0]};if(o.length===2&&typeof o[0]=="number"&&typeof o[1]=="number")return{width:o[0],height:o[1]}}if(typeof o=="object"){let{label:t,width:e,height:r}=o;if(typeof e=="number"&&typeof r=="number")return{width:e,height:r};if(typeof t=="string")return{label:t}}return null},"parseSlotSize");var se=i(o=>{var r,n,s;let t=P(),e={id:(n=(r=o.adUnitPath)!=null?r:o.invCode)!=null?n:o.tagId,sizes:ot(Jt((s=o.sizes)!=null?s:"all")),position:o.position};return{elementId:t,adUnit:e}},"parseLegacyAdUnit");var ae=i(o=>{try{return o.getSizes()}catch(t){return[]}},"getGptSlotSize");var ge=i(o=>({elementId:o.getSlotElementId(),adUnit:{id:o.getAdUnitPath(),sizes:ot(ae(o)),position:o.getTargeting("dvp_spos")[0]}}),"parseLegacyGptSlot");var ce=i((o,t)=>(t==null?void 0:t.structuredClone)!=null?t.structuredClone(o):JSON.parse(JSON.stringify(o)),"deepClone");var le=i((o,t)=>o.map((e,r)=>[e,t[r]]),"zip");var ue=i((o,t)=>{var n;let e=(n=o.IDS)==null?void 0:n[0];if(e==null)return;let r=parseInt(e);isNaN(r)||(t.IDS=r)},"setUserTargetingOnPts"),de=i((o,t)=>{for(let e of mt)o[e]!=null&&(t[e]=o[e])},"setPageTargetingOnPts"),pe=i((o,t,e)=>{var g,d,f,p,S,h;let{adUnit:r}=o;if((r==null?void 0:r.id)==null)return;let n=r.id,s=gt((g=r.sizes)!=null?g:[]),a=r.position;for(let T of et){let A=t[T];A!=null&&((d=e[T])!=null||(e[T]={}),(p=(f=e[T])[n])!=null||(f[n]={}),e[T][n][s]=A[0],a!=null&&((h=(S=e[T][n])[a])!=null||(S[a]={}),e[T][n][a][s]=A[0]))}},"setSlotTargetingOnPts");var Lt=i(o=>[...new Set(o.filter(wt).map(t=>t.toLowerCase()))],"getGreenlightSignal");var $=class{autoInsertPageId(){let e=this.core.get(y).getVisitUuid();this._onPubadsReady(r=>{r.setTargeting(ee,e)})}autoInsertGlobalTargeting(t){this._onPubadsReady(e=>{for(let[r,n]of Object.entries(t))e.setTargeting(r,n);e.setTargeting(nt,Lt([...e.getTargeting(nt),...Object.keys(t)]))})}autoInsertSlotId(t){this._onPubadsReady(e=>{let r=e.getSlots().find(n=>n.getSlotElementId()===t.elementId);r!=null&&r.setTargeting(re,t.uuid)})}autoInsertSlotTargeting(t,e){this._onPubadsReady(r=>{let n=r.getSlots().find(s=>s.getSlotElementId()===t.elementId);if(n!=null){for(let[s,a]of Object.entries(e))n.setTargeting(s,a);n.setTargeting(nt,Lt([...r.getTargeting(nt),...n.getTargeting(nt),...Object.keys(e)]))}})}_onPubadsReady(t){var r,n;let e=this.core.window;e.googletag=(r=e.googletag)!=null?r:{},e.googletag.cmd=(n=e.googletag.cmd)!=null?n:[],e.googletag.cmd.push(()=>{t(e.googletag.pubads())})}};i($,"LegacyModeAutoInsertion"),$=u([m],$);var N=class{constructor(){l(this,"cache",{})}_performFetchJson(t,e){return v(this,null,function*(){let r=t;if(e!=null&&e.authToken){let a=this.core.get(I).getAuthToken(),g=new URL(t);g.searchParams.set("token",a),r=g.href}let n=yield this.core.window.fetch(r);return{json:yield n.json(),headers:n.headers}})}fetchJson(t,e){return v(this,null,function*(){let r=this.cache[t];return r==null&&(r=this._performFetchJson(t,e).then(n=>n.json),this.cache[t]=r),r})}fetchJsonWithHeaders(t,e){return v(this,null,function*(){let r=this.cache[t];if(r!=null)return{data:yield r};let n=this._performFetchJson(t,e);this.cache[t]=n.then(g=>g.json);let{json:s,headers:a}=yield n;return{data:s,headers:a}})}};i(N,"Fetch"),N=u([m],N);var H=class{_reportPerformance(t,e,r,n){try{let s=this.core.get(D).getPerformance(),a=s.getEntriesByType("resource").find(g=>g.name.startsWith(t)&&g.name.slice(t.length+1).startsWith("token="));n.addFetchPerformanceData(a,r,s)}catch(s){}}_getUserTargeting(t,e){return v(this,null,function*(){if(!t.some($t))return{};let r=this.core.get(B).getUserTargetingUrl(t);try{let{data:n,headers:s}=yield this.core.get(N).fetchJsonWithHeaders(r,{authToken:!0});return this._reportPerformance(r,s,"ids",e),n}catch(n){return e.trackError(n),{}}})}_getPageTargeting(t,e){return v(this,null,function*(){if(!t.some(Ht))return{};let r=this.core.get(y).getNormalizedPageUrl(),n=this.core.get(B).getPageTargetingUrl(t,r);try{let{data:s,headers:a}=yield this.core.get(N).fetchJsonWithHeaders(n,{authToken:!0});return this._reportPerformance(n,a,"bsc",e),s}catch(s){return e.trackError(s),{}}})}_getSlotTargeting(t,e,r){return v(this,null,function*(){if(!t.some(ft)||e.length===0)return new Array(e.length).fill({});let n=this.core.get(B).getSlotTargetingUrl(t,e);try{let{data:s,headers:a}=yield this.core.get(N).fetchJsonWithHeaders(n,{authToken:!0});return this._reportPerformance(n,a,"vlp",r),s.length!==e.length?new Array(e.length).fill({}):s.map(g=>Object.fromEntries(Object.entries(g).map(([d,f])=>[d,[f[0]]])))}catch(s){return r.trackError(s),new Array(e.length).fill({})}})}getTargeting(t,e,r){return v(this,null,function*(){let[n,s,a]=yield Promise.all([this._getUserTargeting(t,r),this._getPageTargeting(t,r),this._getSlotTargeting(t,e,r)]);return{userTargeting:n,pageTargeting:s,slotTargeting:a}})}};i(H,"LegacyModeFetchTargeting"),H=u([m],H);var xe={SignalsIds:"IDS",SignalsBsc:"BSC",SignalsAbs:"ABS",SignalsVlp:"VLP",SignalsTvp:"TVP"},Le="SignalsAutoInsertion",G=class{constructor(){l(this,"validConfigFound");l(this,"enabledSignals");l(this,"autoInsertionEnabled")}isValidConfigFound(){return this._initialize(),this.validConfigFound}isSignalEnabled(t){return this._initialize(),t!=null&&this.enabledSignals.includes(t)}isAutoInsertionEnabled(){return this._initialize(),this.autoInsertionEnabled}_initialize(){if(this.validConfigFound!=null)return;let t;try{t=this._getEntryModules()}catch(e){this.validConfigFound=!0,this.enabledSignals=Z,this.autoInsertionEnabled=!0;return}if(t==null){this.validConfigFound=!1,this.enabledSignals=[],this.autoInsertionEnabled=!1;return}this.validConfigFound=!0,this.enabledSignals=t.map(e=>xe[e]).filter(e=>e!=null),this.autoInsertionEnabled=t.includes(Le)}_getEntryModules(){let{cmp:t}=this.core.get(y).getTagInfo(),e=btoa(t),{modules:r,configs:n}=c,s=n[e];return s==null?null:s.map(a=>r[a])}};i(G,"TagConfig"),G=u([m],G);var me=i((o,t)=>{var s,a,g,d;let e=[],r=[],n=[];if(t.VLP==null)return{newSlots:o,existingSlots:r,existingTargeting:n};for(let f of o){let{id:p,sizes:S}=f.adUnit,h=gt(S),T=(a=(s=t.VLP)==null?void 0:s[p])==null?void 0:a[h];if(T==null){e.push(f);continue}r.push(f);let A=(d=(g=t.TVP)==null?void 0:g[p])==null?void 0:d[h],R={};T!=null&&(R.VLP=[T]),A!=null&&(R.TVP=[A]),n.push(R)}return{newSlots:e,existingSlots:r,existingTargeting:n}},"processNewSlots");var q=class{performFetches(t,e,r,n,s){return v(this,null,function*(){let a=this.core.get(H),g=this.core.get($),d=this.core.get(G),p=this.core.get(O).getPts();if(!d.isValidConfigFound())throw new rt("404","Config not found!");let S=Wt(t).filter(E=>d.isSignalEnabled(E)).filter(E=>ft(E)||p[E]==null);s.addRequestedSignals(S);let{newSlots:h,existingSlots:T,existingTargeting:A}=n?me(e,p):{newSlots:e,existingSlots:[],existingTargeting:[]};e=[...h,...T],s.setEventAction("request-timeout");let{userTargeting:R,pageTargeting:Y,slotTargeting:w}=yield a.getTargeting(S,h,s);s.setEventAction("unknown");let b=[...w,...A];ue(R,p),de(Y,p);for(let E=0;E<e.length;E++)pe(e[E],b[E],p);if(r&&d.isAutoInsertionEnabled()){g.autoInsertPageId(),g.autoInsertGlobalTargeting(R),g.autoInsertGlobalTargeting(Y);for(let E=0;E<e.length;E++)g.autoInsertSlotId(e[E]),g.autoInsertSlotTargeting(e[E],b[E])}return s.addResultsData(R,Y,new Map(le(h,w))),ce(p,this.core.window)})}};i(q,"LegacyModePerformFetches"),q=u([m],q);var kt="legacy-success",Pt="legacy-error",W=class{constructor(){l(this,"_slotUuids",{});l(this,"_metricEventCount",0)}_initialize(){this.core.get(O).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}_getLegacyType(){return"mode"}loadSignals(t,e){return v(this,null,function*(){let r=this.core.get(L),n=this.core.get(q),s=this.core.get(G),a=this._prepareMetricEvent(),g=r.createPendingEvent("loadSignals");g.setEventAction("slot-timeout");let f=s.isSignalEnabled("VLP")||s.isSignalEnabled("TVP")?yield this._getSlots():[];g.setEventAction("unknown");let p=!0,S=!1;try{yield n.performFetches(Z,f,p,S,g),g.setRequestSuccess(),g.setEventAction("load-signals");try{e==null||e()}catch(h){}a(kt)}catch(h){try{e==null||e(h)}catch(T){}g.trackError(h),a(Pt)}finally{g.fireEvent()}})}loadSignalsForSlots(t,e,r){return v(this,null,function*(){let n=this.core.get(L),s=this.core.get(q),a=this._prepareMetricEvent(),g=n.createPendingEvent("loadSignalsForSlots"),d=t.map(S=>this._parseGptSlot(S)),f=!0,p=!0;r=typeof e=="function"?e:r;try{yield s.performFetches(Z,d,f,p,g),g.setRequestSuccess(),g.setEventAction("load-signals-slots");try{r==null||r()}catch(S){}a(kt)}catch(S){try{r==null||r(S)}catch(h){}g.trackError(S),a(Pt)}finally{g.fireEvent()}})}getTargeting(t,e){return v(this,null,function*(){var p,S;let r=this.core.get(L),n=this.core.get(q),s=this._prepareMetricEvent(),a=r.createPendingEvent("getTargeting"),g=(S=(p=t.adUnits)==null?void 0:p.map(h=>this._parseAdUnit(h)))!=null?S:[],d=!1,f=!1;try{let h=yield n.performFetches(Z,g,d,f,a);a.setRequestSuccess(),a.setEventAction("load-signals");try{e==null||e(void 0,h)}catch(T){}s(kt)}catch(h){try{e==null||e(h)}catch(T){}a.trackError(h),s(Pt)}finally{a.fireEvent()}})}_getSlots(){return v(this,null,function*(){var n,s;let t=this.core.window;t.googletag=(n=t.googletag)!=null?n:{},t.googletag.cmd=(s=t.googletag.cmd)!=null?s:[];let e=t.googletag;return(yield new Promise(a=>e.cmd.push(()=>{a(e.pubads().getSlots())}))).map(a=>this._parseGptSlot(a))})}_getSlotUuid(t){let e=this._slotUuids[t];return e==null&&(e=P(),this._slotUuids[t]=e),e}_parseGptSlot(t){let{elementId:e,adUnit:r}=ge(t);return{elementId:e,uuid:this._getSlotUuid(r.id),adUnit:k(M({},r),{position:null})}}_parseAdUnit(t){let{adUnit:e}=se(t);return{elementId:e.id,uuid:this._getSlotUuid(e.id),adUnit:k(M({},e),{position:null})}}_prepareMetricEvent(){let t=this.core.get(C);if(this._metricEventCount>0)return()=>{};this._metricEventCount++;let e=new Date().getTime();return r=>t.fireEvent("ad-request",{[Q.AD_REQUEST_STATUS]:r,[Q.AD_REQUEST_INDEX]:0,[Q.AD_REQUEST_DELAY]:new Date().getTime()-e},{sampleInterval:Dt,flushToPxsrv:1})}};i(W,"LegacyMode"),u([J],W.prototype,"_initialize",1),u([at(L,"getLegacyType")],W.prototype,"_getLegacyType",1),W=u([m],W);var V=class{constructor(){l(this,"initialized",!1);l(this,"size",0)}_initialize(){return v(this,null,function*(){if(yield Promise.resolve(),this.initialized)return;this.initialized=!0;let t=this.core.dvtag.cmd instanceof Array?this.core.dvtag.cmd:[];this.core.dvtag.cmd=t,t.push=(...e)=>{for(let r of e)try{r()}catch(n){}return this.size+=e.length,this.size};for(let e of t)try{e()}catch(r){}this.size=t.length,t.length=0})}};i(V,"CommandBuffer"),u([J],V.prototype,"_initialize",1),V=u([m],V);var Ot=class Ot{constructor(t,e,r,n,s){this._slotStore=t;this.source=e;this.elementId=r;this.adUnit=n;this._targetable=s;l(this,"uuid");l(this,"_variables",{});l(this,"_targeting",{});l(this,"_flushedTargeting",{});this.uuid=P()}setVariable(t,e){this._variables[t]=e}getVariable(t){return this._variables[t]}getUptTargetingKeys(){return[...new Set([...Object.keys(this._targeting),...this._slotStore.getUptPageTargetingKeys()])]}getUptTargetingForKey(t){var e;return[...new Set([...(e=this._targeting[t])!=null?e:[],...this._slotStore.getUptPageTargetingForKey(t)])]}getUptTargeting(){let t={};for(let e of this.getUptTargetingKeys())t[e]=this.getUptTargetingForKey(e);return t}setUptSlotTargeting(t){for(let[e,r]of Object.entries(t))this._targeting[e]=[...new Set(r)],this.flushUptTargetingToAdServer(e)}addUptSlotTargeting(t){var e;for(let[r,n]of Object.entries(t))this._targeting[r]=[...new Set([...(e=this._targeting[r])!=null?e:[],...n])],this.flushUptTargetingToAdServer(r)}getAdServerTargeting(t){var e;return(e=this._targetable.getTargeting(t))!=null?e:[]}flushUptTargetingToAdServer(t){var n;let e=(n=this._flushedTargeting[t])!=null?n:[],r=this.getUptTargetingForKey(t);(e.length!==r.length||r.sort().some((s,a)=>e[a]!==s))&&(this._targetable.setTargeting(t,this.getUptTargetingForKey(t)),this._flushedTargeting[t]=r)}validateAdServerTargeting(){return this.getUptTargetingKeys().every(t=>{let e=this.getUptTargetingForKey(t),r=this.getAdServerTargeting(t);return e.length!==r.length?!1:(e.sort(),r.sort().every((n,s)=>n===e[s]))})}};i(Ot,"Slot");var ct=Ot;var Pe={getTargeting:()=>[],setTargeting:()=>{}},z=class{constructor(){l(this,"plugins",{slotScanned:(t,e)=>[],slotDiscovered:t=>[],slotRequested:t=>[],slotDestroyed:t=>[]});l(this,"_slots",{});l(this,"_pageTargeting",{})}getSlot(t,e){var r;return(r=this._slots[t])==null?void 0:r[e]}getSlots(t){var e;return t==null?Object.values(this._slots).flatMap(r=>Object.values(r)):Object.values((e=this._slots[t])!=null?e:{})}createSlot(t,e,r,n=Pe){var g,d;let s=this.getSlot(t,e);s!=null&&this.plugins.slotDestroyed(s);let a=new ct(this,t,e,r,n);(d=(g=this._slots)[t])!=null||(g[t]={}),this._slots[t][e]=a;for(let f of Object.keys(this._pageTargeting))a.flushUptTargetingToAdServer(f);return this.plugins.slotDiscovered(a),a}notifySlotScanned(t,e){this.plugins.slotScanned(t,e)}notifyAdRequested(t){this.plugins.slotRequested(t)}getUptPageTargetingKeys(){return Object.keys(this._pageTargeting)}getUptPageTargetingForKey(t){var e;return(e=this._pageTargeting[t])!=null?e:[]}getUptPageTargeting(){let t={};for(let[e,r]of Object.entries(this._pageTargeting))t[e]=[...r];return t}setUptPageTargeting(t){for(let[e,r]of Object.entries(t))this._pageTargeting[e]=[...new Set(r)];this._flushUptPageTargetingToAdServer(Object.keys(t))}addUptPageTargeting(t){var e;for(let[r,n]of Object.entries(t))this._pageTargeting[r]=[...new Set([...(e=this._pageTargeting[r])!=null?e:[],...n])];this._flushUptPageTargetingToAdServer(Object.keys(t))}_flushUptPageTargetingToAdServer(t){for(let e of Object.values(this._slots))for(let r of Object.values(e))for(let n of t)r==null||r.flushUptTargetingToAdServer(n)}};i(z,"SlotStore"),z=u([m],z);var Bt="api",j=class{_defineSlot(t,e={}){this.core.get(z).createSlot(Bt,t,k(M({},e),{sizes:ot(e.sizes)}))}};i(j,"DefineSlot"),u([X("defineSlot")],j.prototype,"_defineSlot",1),j=u([m],j);var F=class{_getTargeting(t){var r;let e=this.core.get(z);if(t==null)return e.getUptPageTargeting();{let n=e.getSlot(Bt,t);return(r=n==null?void 0:n.getUptTargeting())!=null?r:e.getUptPageTargeting()}}};i(F,"GetTargeting"),u([X("getTargeting")],F.prototype,"_getTargeting",1),F=u([m],F);var it=class{};i(it,"HouseHold"),it=u([m,tt(x),tt(V),tt(j),tt(F),tt(C)],it);if(window.dvtag==null||window.dvtag._core==null)try{new st(_t,window)}catch(o){}})();
