(window.webpackJsonp=window.webpackJsonp||[]).push([[211],{1358:function(e,n,t){"use strict";t.r(n);var a=t(0),s=t.n(a),d=(t(873),t(12));const{wereContentsSaved:o}=d.a.config("moderation/wysiwyg");s()((()=>{function e(){document.querySelector(".js-moderationWysiwyg")&&window.parent.postMessage("pepper_embed resize","*")}s()(".js-hide-wysiwyg-only").hide(),e(),s()(window).on("resize domUpdate",e),s()(window).on("load",(function(){o&&window.parent.postMessage("pepper_embed saved","*")}))}));var i=t(242),r=t(849);i.a.add(r.a);var c={render:()=>null},l=t(44),u=Object(l.a)(c,undefined,undefined,!1,null,null,null);n.default=u.exports},849:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));const a={GenericWysiwygImageUpload:(async()=>new Promise(((e,n)=>{document.addEventListener("redactor-init",(async()=>{try{const n=await Promise.all([t.e(167),t.e(1),t.e(10),t.e(88)]).then(t.bind(null,947));e(n.default)}catch(e){n()}}))})))()}},873:function(e,n,t){"use strict";var a=t(2),s=t(3),d={handler:function(e,n,t,a){const d=s.a.findTargets(e,n.target),o=e[0].files[0];!n.empty&&a&&(n.empty=d.html()),o?d.text(o.name).addClass(n.selectedClass):d.html(n.empty).removeClass(n.selectedClass)}};a.a.add("file-text","change",d.handler)}}]);return t||0===t}))))},hide(e){let{commit:t}=e;t("UPDATE_IS_VISIBLE",!1)},showOnVote(e){let{commit:t,dispatch:o,getters:s}=e;d.isEnabledOnThreadVoting&&(o("increaseThreadVotes"),s.firstTime?s.firstTimeForVoting&&t("UPDATE_IS_VISIBLE",!0):s.shouldShowNextTimesForVoting&&t("UPDATE_IS_VISIBLE",!0))},showOnClickout(e){let{commit:t,dispatch:o,state:s,getters:a}=e;s.isEnabledOnClickout&&(a.firstTime?t("UPDATE_IS_VISIBLE",!0):(o("increaseCouldShowOnClickout"),a.shouldShowNextTimesForClickout&&t("UPDATE_IS_VISIBLE",!0)))},show(e,t){let{commit:o,dispatch:s,state:a}=e,{source:i="clickout",isThreadExpired:r=!1,threadTypeId:d=n.m[n.a]}=t;if(a.isUserEligible)switch(o("UPDATE_THREAD_PROPS",{threadTypeId:d,isThreadExpired:r,source:i}),i){case"clickout":s("showOnClickout");break;case"vote":s("showOnVote")}},increaseShown(e){let{state:t,dispatch:o}=e;o("writeStorage",{shown:t.shown+1,couldShowOnClickout:0,threadVotes:0})},increaseCouldShowOnClickout(e){let{state:t,dispatch:o}=e;o("writeStorage",{couldShowOnClickout:t.couldShowOnClickout+1})},increaseThreadVotes(e){let{state:t,dispatch:o}=e;o("writeStorage",{threadVotes:t.threadVotes+1})},merge(e,t){let{commit:o}=e;o("MERGE",t)}},h={UPDATE_IS_VISIBLE(e,t){e.isVisible=t},UPDATE_THREAD_PROPS(e,t){let{threadTypeId:o,isThreadExpired:s,source:a}=t;e.threadTypeId=o,e.isThreadExpired=s,e.source=a},MERGE(e,t){Object.assign(e,t)}};var p=o(522),w=Object(p.b)("appDownloadMessage",{create:()=>({namespaced:!0,state:d,getters:l,mutations:h,actions:c})}),u=o(2),g=o(573),m=o(71),S=o(4);const T={mixins:[w]};var E=Object(s.defineComponent)(Object.assign({},T,{__name:"app-download-message",props:{data:null},setup(e){var t,a;const i=e,n=Object(m.c)();S.a.dispatch("appDownloadMessage/merge",{isEnabledOnClickout:i.data.features.promotionTools.appDownloadMessage,isEnabledOnThreadVoting:i.data.features.promotionTools.appDownloadMessageForThreadVoting,isUserEligible:null!==(t=null===(a=i.data.me)||void 0===a?void 0:a.isEligibleForShowingAppDownloadMessage)&&void 0!==t&&t});const r=Object(s.computed)((()=>S.a.state.appDownloadMessage.isVisible)),d=Object(s.computed)((()=>r.value&&n.smAndDown)),l=()=>S.a.dispatch("appDownloadMessage/increaseShown"),c=e=>S.a.dispatch("appDownloadMessage/show",e);return u.a.add("show-app-download-message-onclick","click",((e,t)=>c(t)),{events:["click"],preventDefault:!1}),u.a.add("show-app-download-message-ondestroy","destroy",((e,t)=>c(t))),{__sfc:!0,MessageInfo:()=>o.e(197).then(o.bind(null,1248)),breakpoints:n,props:i,isVisible:r,isActive:d,increaseShown:l,show:c,hide:()=>S.a.dispatch("appDownloadMessage/hide"),onActivation:e=>{e&&l()},BaseModal:g.a}}})),b=o(44),D=Object(b.a)(E,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return o.isActive?t(o.BaseModal,{attrs:{layout:"bottomCenter"},on:{"update:active":o.onActivation}},[t(o.MessageInfo,{staticClass:"overflow--scrollY",on:{hide:o.hide}})],1):e._e()}),[],!1,null,null,null);t.default=D.exports}}]);