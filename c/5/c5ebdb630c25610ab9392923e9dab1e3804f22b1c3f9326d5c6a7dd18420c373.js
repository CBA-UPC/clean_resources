"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[6243],{26934:function(e,l,i){i.r(l),i.d(l,{default:);var t=i(93433),o=i(1413),n=i(29439),d=i(61511),u=i(96420),a=i(72668),r=i(16031),s=i(47313),c=i(58467),v=i(2135),f=i(39837),m=i(28422),b=i(91345),g=i(76391),h=i(39437),p=i(32756),Z=i(46171),y=i(94849),A=i(4587),x=i(52442),j=i(11149),I=i(46417);function M(){var e,l,i,M,k,w,C,E=(0,d.x)(),V=(0,c.s0)(),B=(0,b.at)(),P=(0,j.Z)().settings,S=(0,h.Z)().createAlert,F=(0,v.lr)(),G="slideshow"===(0,n.Z)(F,1)[0].get("mode"),H=(0,c.UO)(),T=H.albumId,U=H.userId,z=H.mediaId,O=T===(null===B||void 0===B||null===(e=B.profile)||void 0===e?void 0:e.defaultAlbum)||T===(null===B||void 0===B||null===(l=B.profile)||void 0===l?void 0:l.mobileAlbum),_=P.layout!==g.sH.Grid,q={field:null===P||void 0===P||null===(i=P.sortBy)||void 0===i?void 0:i.field,desc:null===P||void 0===P||null===(M=P.sortBy)||void 0===M?void 0:M.desc},D=(0,u.t)(m.yMU,{onCompleted:function(e){var l=e.image;l&&E.cache.updateQuery({query:m.b6e,variables:{albumId:T,sortBy:q,pageSize:40}},(function(e){if(!e)return null;var i=null===e||void 0===e?void 0:e.getAlbumImagesV2;return{getAlbumImagesV2:(0,o.Z)((0,o.Z)({},i),{},{items:[].concat((0,t.Z)(i.items),[l])})}}))}}),K=(0,n.Z)(D,1)[0],N=(0,a.a)(m.b6e,{skip:!T,variables:{albumId:T,sortBy:q,pageSize:40},notifyOnNetworkStatusChange:!0,onError:),Q=(null===(k=N.data)||void 0===k?void 0:k.getAlbumImagesV2.items)||[],R=null===(w=N.data)||void 0===w?void 0:w.getAlbumImagesV2.scrollPointer,J=E.readFragment({id:"AlbumV2:".concat(T),fragment:m.KPs}),L=null===J||void 0===J?void 0:J.counters.imageCount,W=Q.find((),X=(0,s.useRef)(K);(0,s.useEffect)((function(){z&&N.called&&!N.loading&&!W&&X.current({variables:{id:z}})}),[N,z,W]),(0,s.useEffect)((function(){G&&V("/u/".concat(U,"/a/").concat(T,"/slideshow"))}),[G,V,U,T]),(0,s.useEffect)((function(){var e,l={};T===(null===B||void 0===B||null===(e=B.profile)||void 0===e?void 0:e.defaultAlbum)&&(l.overridenAlbumTitle="Unsorted Media",l.overridenImageCount=L,l.isSubAlbumChipHidden=!0),(0,b.sE)((0,o.Z)({isCropModeHidden:_,isTitleMenuEditDisabled:O},l))}),[T,L,_,O,null===B||void 0===B||null===(C=B.profile)||void 0===C?void 0:C.defaultAlbum]);var Y=(0,r.debounce)((function(){R&&N.fetchMore({variables:{scrollPointer:R}})}),500,{leading:!0});return N.data||N.error?(0,r.isEmpty)(Q)?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.Z,{title:"Gallery"}),(0,I.jsx)(x.Z,{}),(0,I.jsxs)("div",{style:{position:"relative"},children:[(0,I.jsx)(A.Z,{}),(0,I.jsx)(y.Z,{defaultAlbum:T})]})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.Z,{title:"Gallery"}),(0,I.jsx)(x.Z,{}),(0,I.jsx)(Z.Z,{items:Q,fetchMore:Y,hasMore:!!R,loading:N.loading}),(!z||W)&&(0,I.jsx)(p.Z,{items:Q,fetchMore:Y,hasMore:!!R})]}):null}}}]);