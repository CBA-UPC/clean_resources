/* HouseHold LegacyLayer SignalsAbs SignalsAutoInsertion SignalsBsc SignalsIds SignalsTvp SignalsVlp */
(()=>{var At=Object.defineProperty,Te=Object.defineProperties,_e=Object.getOwnPropertyDescriptor,Re=Object.getOwnPropertyDescriptors;var jt=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var Dt=Q=J=i=var a=var d=var m=var ut={queueAdRequest:defineSlot:getTargeting:;var Ut=i(Ut,"Core");var lt=Ut;var wt=[],xt=wt;var u=i("moduleClass"),V=i("attachModule"),A=i((n,t)=>{var e;n.executeConfig=(e=n.executeConfig)!=null?e:[],n.executeConfig.push({method:t})},"executeMethod"),S=i("pluginMethod"),X=i("apiMethod"),Qt=i("errorMethod");var pt=["BSC","ABS"],Vt=["IDS"],it=["VLP","TVP"],Ee=[...pt,...Vt,...it],$t=i(n=>Ee.includes(n.toUpperCase()),"isSignal"),Kt=i(n=>it.includes(n.toUpperCase()),"isSlotSignal"),Ht=i(n=>Vt.includes(n.toUpperCase()),"isUserSignal"),Yt=i("isPageSignal");var Ct=i(Ct,"AsyncQueue");var mt=Ct;var v=i(v,"AdRequestQueue"),a([X("queueAdRequest")],v.prototype,"_queueAdRequest",1),v=a([u],v);var ht,ye=new Uint8Array(16);(Mt,"rng");var E=[];for(let n=0;n<256;++n)E.push((n+256).toString(16).slice(1));(Wt,"unsafeStringify");var De=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),It={randomUUID:De};(Ae,"v4");var kt=Ae;var $=i("uuid");var Ot=i(Ot,"Slot");var dt=Ot;var Ue={getTargeting:()=>[],setTargeting:()=>{}},_=i(_,"SlotStore"),_=a([u],_);var we=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],xe=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],Jt=i("replaceByRules"),Xt=i("normalizeUrl");var Zt=i("stripUrlQuery");var te=i("parseInfo"),ee=i("parseLegacyPagetagUrl");var Ce=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,b=i(b,"Context"),a([A],b.prototype,"_initialize",1),b=a([u],b);var w=i(w,"DefinedVariables"),w=a([u],w);var x=i(x,"Fetch"),x=a([u],x);var ft=i("getPositionSuffix");var Me=/^(\d+)x(\d+)$/,re=i("stringToSlotSizes"),Pt=i("slotSizesToString"),oe=i("slotSizesToStringIfSpecific");var Lt="https://pub.doubleverify.com/dvtag/signals/",C=i(C,"SignalsUrlBuilder"),C=a([u],C);var K=i(K,"PageSignals"),K=a([u],K);var H=i(H,"SlotSignals"),H=a([u],H);var Y=i(Y,"UserSignals"),Y=a([u],Y);var T=i(T,"Signals"),a([A],T.prototype,"_initialize",1),a([S(v,"adRequestQueued")],T.prototype,"_onAdRequestQueued",1),a([S(_,"slotDiscovered")],T.prototype,"_onSlotDiscovered",1),T=a([u],T);var tt=class{_getEnabledSignals(){return"IDS"}};i(tt,"SignalsIds"),a([S(T,"getEnabledSignals")],tt.prototype,"_getEnabledSignals",1),tt=a([u],tt);var et=class{_getEnabledSignals(){return"BSC"}};i(et,"SignalsBsc"),a([S(T,"getEnabledSignals")],et.prototype,"_getEnabledSignals",1),et=a([u],et);var rt=class{_getEnabledSignals(){return"VLP"}};i(rt,"SignalsVlp"),a([S(T,"getEnabledSignals")],rt.prototype,"_getEnabledSignals",1),rt=a([u],rt);var ot=class{_getEnabledSignals(){return"TVP"}};i(ot,"SignalsTvp"),a([S(T,"getEnabledSignals")],ot.prototype,"_getEnabledSignals",1),ot=a([u],ot);var nt=i(nt,"SignalsAbs"),a([S(T,"getEnabledSignals")],nt.prototype,"_getEnabledSignals",1),nt=a([u],nt);var st=i("parseSlotSizes"),ne=i("parseSlotSize");var ie=i("getGptSlotSize");var Ie="dvp_spos",St=i("gptSlotToAdUnit");var Tt=i("gptSlotToTargetable");var M=i(M,"LegacyPq"),M=a([u],M);var k=i(k,"Environment"),k=a([u],k);var se="https://vtrk.doubleverify.com";var ae=i("randomInt");var Bt="qt_loaded",ge="pts_pid",ce="pts_sid",Nt=i(Nt,"QtError");var _t=Nt;var le=i("formatSlotTargetingForTracking");var de=i("getCacheStatus");var qt=i("summarizeSlotTargeting");var W=i("timeSpan");var Ft=i(Ft,"PendingEvent");var Rt=Ft;var ke=5,Oe=["ids","bsc","vlp"],F=i(F,"LegacyTracking"),F=a([u],F);var ue=i("parseLegacyAdUnit");var pe=i("setUserTargetingOnPts"),me=i("setPageTargetingOnPts"),he=i("setSlotTargetingOnPts");var Pe={loadSignals:"load-signals",getTargeting:"load-signals",loadSignalsForSlots:"load-signals-slots"},Le="legacy-api",fe="gpt",O=i(O,"LegacyLayer"),a([A],O.prototype,"_initialize",1),a([S(F,"getLegacyType")],O.prototype,"_getLegacyType",1),a([S(T,"userTargetingUpdated")],O.prototype,"_setUserTargetingOnPts",1),a([S(T,"pageTargetingUpdated")],O.prototype,"_setPageTargetingOnPts",1),a([S(T,"slotTargetingUpdated")],O.prototype,"_setSlotTargetingOnPts",1),O=a([u],O);var vt="gpt",Se="gpt-slot-reference",Be=["impressionViewable","slotOnload","slotVisibilityChanged","rewardedSlotGranted","rewardedSlotClosed","rewardedSlotReady","slotRequested","slotRenderEnded","slotResponseReceived"],I=i(I,"Googletag"),a([A],I.prototype,"_initialize",1),a([S(v,"adRequestQueued")],I.prototype,"_onAdRequestQueued",1),a([S(_,"slotDiscovered")],I.prototype,"_onSlotDiscovered",1),a([S(_,"slotDestroyed")],I.prototype,"_onSlotDestroyed",1),I=a([u],I);var Gt=i("getGreenlightSignal");var B=i(B,"SignalsAutoInsertion"),a([A],B.prototype,"_autoInsertPageId",1),a([S(_,"slotDiscovered")],B.prototype,"_autoInsertSlotId",1),a([S(T,"userTargetingUpdated"),S(T,"pageTargetingUpdated")],B.prototype,"_autoInsertGlobalTargeting",1),a([S(T,"slotTargetingUpdated")],B.prototype,"_autoInsertSlotTargeting",1),B=a([u,V(I)],B);var G=i(G,"CommandBuffer"),a([A],G.prototype,"_initialize",1),G=a([u],G);var zt="api",z=i(z,"DefineSlot"),a([X("defineSlot")],z.prototype,"_defineSlot",1),z=a([u],z);var U={TYPE:"b1",COMMIT_HASH:"b2",ENTRY_MODULES:"b3",HOSTNAME:"b4",CTX:"b5",CMP:"b6",VISIT_ID:"b7",FEATURE_FLAGS:"b8",SAMPLE_INTERVAL:"d1",FLUSH_TO_PXSRV:"d2",_PLACEHOLDER_BLOB_9:"b9",_PLACEHOLDER_BLOB_10:"b10",_PLACEHOLDER_DOUBLE_3:"d3",_PLACEHOLDER_DOUBLE_4:"d4",_PLACEHOLDER_DOUBLE_5:"d5"},bt=J(Q({},U),{LOG_LEVEL:"b11",MESSAGE:"b12",TRACE:"b13"}),Et=J(Q({},U),{AD_REQUEST_STATUS:"b11",AD_REQUEST_INDEX:"d6",AD_REQUEST_DELAY:"d7"});var Ne="https://pub.doubleverify.com/dvtag/metrics/event.png",qe=1,Fe=1,N=i(N,"Events"),a([S(v,"adRequestCompleted")],N.prototype,"_onAdRequestCompleted",1),a([Qt],N.prototype,"_handleError",1),N=a([u],N);var j=i(j,"GetTargeting"),a([X("getTargeting")],j.prototype,"_getTargeting",1),j=a([u],j);var at=i(at,"HouseHold"),at=a([u,V(v),V(G),V(z),V(j),V(N)],at);if(window.dvtag==null||window.dvtag._core==null)try{new lt(xt,window)}catch(n){}})();
