"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8838],{21254:81021:64147:53260:function(e,t,i){i.d(t,{x0:function(){return a},P1:function(){return mergeAttributes},ht:function(){return projectReducer},PB:function(){return pushReducerState},sh:function(){return wrapProjectReducerDispatch}});var r,n,o,a,l=i(47330),s=i(42906),d=i(21254),u=i(81021),c=i(30555),m=i(47147),v=i(1991),p=i(3583),g=i(98751),h=i(31683);let f=new p.ci,sendTimeMeasurements=T=(0,g.Ds)(sendTimeMeasurements,1e3),enqueueTimeMeasurement=pushTimeMeasurement=e=>{enqueueTimeMeasurement(e),T()},pushTimeMeasurementAndSendAll=var E=i(47277),w=i(2701);(r=o||(o={})).BLACK="\x1b[30m",r.RED="\x1b[31m",r.GREEN="\x1b[32m",r.YELLOW="\x1b[33m",r.BLUE="\x1b[34m",r.MAGENTA="\x1b[35m",r.CYAN="\x1b[36m",r.WHITE="\x1b[37m",r.RESET="\x1b[0m";let S=!0;try{S=(0,w.g)()}catch(e){}let I=S?I.bind(void 0,"\x1b[35m"),I.bind(void 0,"\x1b[30m"),I.bind(void 0,"\x1b[31m");let y=I.bind(void 0,"\x1b[32m"),b=I.bind(void 0,"\x1b[33m"),_=I.bind(void 0,"\x1b[34m");I.bind(void 0,"\x1b[36m"),I.bind(void 0,"\x1b[37m");var k=i(20851),x=i(83408),O=i(15628),A=i(6676),C=i.n(A);let P=(0,x.hu)("debug:navattic:react"),j="undefined"!=typeof document?new {doc:document}):void 0;n=a||(a={}))[n.RESET_FLOW=0]="RESET_FLOW",n[n.TOGGLE_CHECKLIST=1]="TOGGLE_CHECKLIST",n[n.SET_SHOW_ESCAPE_VIEW=2]="SET_SHOW_ESCAPE_VIEW",n[n.GO_TO_PROJECT=3]="GO_TO_PROJECT",n[n.GO_TO_GUIDE=4]="GO_TO_GUIDE",n[n.GO_TO_STEP=5]="GO_TO_STEP",n[n.ACTIVATE_PROJECT=6]="ACTIVATE_PROJECT",n[n.ACTIVATE_GUIDE=7]="ACTIVATE_GUIDE",n[n.COMPLETE_TASK=8]="COMPLETE_TASK",n[n.COMPLETE_FLOW=9]="COMPLETE_FLOW",n[n.MARK_AS_COMPLETED=10]="MARK_AS_COMPLETED",n[n.UPDATE_CUSTOMER=11]="UPDATE_CUSTOMER",n[n.SET_LOADING=12]="SET_LOADING",n[n.SET_TRANSITIONING=13]="SET_TRANSITIONING",n[n.SET_CAPTURE_BUILT=14]="SET_CAPTURE_BUILT",n[n.SET_IS_PREVIEW=15]="SET_IS_PREVIEW",n[n.SET_IS_INITIAL_LOAD=16]="SET_IS_INITIAL_LOAD",n[n.RESTORE_STEP=17]="RESTORE_STEP",n[n.PUSH_STATE=18]="PUSH_STATE",n[n.STORE_ATTRIBUTES=19]="STORE_ATTRIBUTES";let wrapProjectReducerDispatch=R=new Set(["p","g","s"]),getQueryParamsExcludeOurs=inVanityUrl=previewingProject=function reducerStateToEvent(e){var t,i,r,n,o,a,l,s,d,u;return{id:C()(),createdAt:new Date,projectVersionId:e.projectVersionId,customerId:e.customerId||"",sessionId:e.sessionId||"",uniqueDeviceId:e.customerId||"",projectShareLinkId:e.projectShareLinkId,path:window.location.pathname,project:{id:(null===(t=e.project)||void 0===t?void 0:t.id)||"",name:(null===(i=e.project)||void 0===i?void 0:i.name)||""},checklist:e.checklist?{id:e.checklist.id||"",name:e.checklist.name||""}:void 0,flow:{id:(null===(r=e.flow)||void 0===r?void 0:r.id)||"",name:(null===(n=e.flow)||void 0===n?void 0:n.name)||""},step:{id:(null===(l=e.flow)||void 0===l?void 0:null===(a=l.published.steps)||void 0===a?void 0:null===(o=a[e.stepIndex])||void 0===o?void 0:o.id)||"",name:(null===(u=e.flow)||void 0===u?void 0:null===(d=u.published.steps)||void 0===d?void 0:null===(s=d[e.stepIndex])||void 0===s?void 0:s.name)||"",indx:e.stepIndex},completions:e.completedTaskIds,clientSideMetadata:(0,h.bG)(),eventAttributes:e.attributes}}let pushReducerState=unction projectReducer(e,t){P.group("Running projectReducer");let end=i=!1,r=!1,n=!1,o=!1,markAsEngaged=()=>{let t=(0,E.bu)();t||(0,E.FF)({type:l.tw.Engage,...reducerStateToEvent(e)})},getValidState=pushTimeMeasurementWithStateImmediately=e=>{let t=getValidState();t&&pushTimeMeasurementAndSendAll({...t,duration:e,createdAt:new Date})},pushTimeMeasurementWithState=e=>{let t=getValidState();t&&pushTimeMeasurement({...t,duration:e,createdAt:new Date})};j.registerEventHandlers({onBlur:pushTimeMeasurementWithStateImmediately});let s={transitioning:stepIndex:checklist:flow:project:guideId:;et u={0:1:3:t=>{mutate("projectId",resolveToValue(e.projectId,t))},4:5:6:(t,i)=>{var r,n;if(mutate("project",t),(0,x.ZP)("Fetched project",t.id),!e.project)return;let o=e.project.id,{checklist:a,flow:l}=e.project;!a&&"initialChecklist"in e.project&&(a=e.project.initialChecklist),!l&&"initialFlow"in e.project&&(l=e.project.initialFlow),(0,x.ZP)("Activating project",o),(null===(r=e.checklist)||void 0===r?void 0:r.id)!==(null==a?void 0:a.id)&&((0,x.ZP)("Setting checklist",a),(0,m.r1)(e.project.checklist),mutate("checklist",a)),l&&(null===(n=e.flow)||void 0===n?void 0:n.id)!==(null==l?void 0:l.id)&&!i&&callHandler(7,{...l,type:"FLOW"})},7:10:8:9:19:11:async t=>{if(e._queuedEventOverrides.enqueue(t),e.flow&&e.project&&!e.isPreview){let t=e._queuedEventOverrides.drain();for(let i of t){let t=reducerStateToEvent(e);(0,E.FF)({...t,...i,project:i.project||t.project,flow:i.flow||t.flow})}}},12:t=>{mutate("loading",resolveToValue(e.loading,t))},13:t=>{mutate("transitioning",resolveToValue(e.transitioning,t))},14:t=>{mutate("captureBuilt",resolveToValue(e.captureBuilt,t))},15:t=>{mutate("isPreview",resolveToValue(e.isPreview,t))},16:t=>{mutate("isInitialLoad",resolveToValue(e.isInitialLoad,t))},2:18:17:;eturn t?(callHandler(t.type,...t.args),end(),i)?(r&&!o&&pushReducerState(e,n),{...e}):e:(end(),e)}},18838:47277:89747:31683:]);
//# sourceMappingURL=8838-cd9ebe875868268a.js.map