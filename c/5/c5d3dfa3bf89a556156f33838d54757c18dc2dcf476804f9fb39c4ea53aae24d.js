.mc-text--color-lvl1{color:#bfc3c8}.mc-text--color-lvl2{color:#a0afb4}.mc-text--color-lvl3{color:#cc9d19}.mc-text--color-primary{color:#e00034}.mc-text--color-shadow{color:#94001f}.mc-text--color-foreground{color:#00294e}.mc-btn,.mc-btn--primary,.mc-btn:active,.mc-btn:focus,.mc-btn:hover{background-color:#e00034;color:#fff}.mc-btn--inverse:disabled,.mc-btn:disabled{background-color:#94001f;color:#e00034}.mc-btn--inverse,.mc-btn--inverse:active,.mc-btn--inverse:focus,.mc-btn--inverse:hover,.mc-btn--primary:active,.mc-btn--primary:focus,.mc-btn--primary:hover{background-color:#fff;color:#bf0930}.mc-background--modal{background-size:100% auto;background-repeat:no-repeat;background-image:url(/assets/img/mascotcards/theme-xmas/modal-bg--wide_ae130.png)}@media (min-width:30em){.mc-background--modal{background-image:url(/assets/img/mascotcards/theme-xmas/modal-bg_0647e.png)}}.mc-bg--color-modal-t{background-color:#c5e1f6}.mc-background--primary{background-color:#e00034!important}.mc-background--shade{background-color:#bf0930!important}.mc-background--shadow{background-color:#94001f!important}.mc-background--grey{background:linear-gradient(-180deg,#727272,#4b4b4b)}.mc-background--lvl1{background:#e9eaed!important}.mc-background--lvl2{background:linear-gradient(135deg,#dae7ec,#a0afb4 53%,#dae7ec)!important}.mc-background--lvl3{background:linear-gradient(135deg,#f5d57a,#cc9d19 53%,#f5d57a)!important}.mc-supportImage--mascot{background-image:url(/assets/img/mascotcards/theme-xmas/modal-logo_c2249.png);width:12.5em;padding-top:106%}.mc-notification{margin:0 auto;max-width:90%;position:fixed;bottom:0;right:0;left:0;height:0;transform:translateZ(0)}.mc-notification-character--peek,.mc-notification-character--win{pointer-events:none}.mc-notification-character--peek{position:absolute;top:-125px;right:0;left:0;margin:0 auto;z-index:-1}.mc-notification-character--win{position:relative}.mc-notification-inner{width:510px;position:absolute;right:0;bottom:0;top:110px;border:solid #fff;border-width:4px 4px 0;transition-property:top;transition-duration:.45s;transition-timing-function:cubic-bezier(1,.3,.6,1.2)}.mc-notification-inner--peek{top:-100px!important;width:420px}.mc-notification-inner--reveal{top:-200px!important}.mc-notification-inner--reveal-lvl3{top:-270px!important}.mc-notification-inner--hide{top:110px!important}@media (min-width:48em){.mc-notification{right:20px;max-width:unset}.mc-notification-character--peek,.mc-notification-character--win{position:absolute;margin:auto;left:auto}.mc-notification-character--peek{top:-60px;right:3px;z-index:0}.mc-notification-character--win{bottom:-20px;right:10px;z-index:0}}@media (max-width:47.99688em){.mc-notification-btn{position:relative;top:-20px}.mc-notification-inner{transition-duration:.35s;width:100%;top:110px}.mc-notification-inner--peek{width:100%}.mc-notification-inner--reveal{top:-460px!important}.mc-notification-inner--reveal-lvl3{top:-500px!important}}@media screen and (max-height:550px) and (max-width:768px){.mc-notification-character--win{width:120px!important}}.mc-notification-shadow{box-shadow:0 2px 3px 0 rgba(0,0,0,.4)}@media screen and (max-height:550px) and (max-width:768px){.mc-notification-inner--reveal{top:-380px!important}}@media screen and (max-height:550px) and (max-width:768px){.mc-notification-inner--reveal-lvl3{top:-440px!important}}.mc-notification-inner--reveal-miss{top:-150px}.mc-notification-close{position:absolute;top:-15px;right:-15px;width:30px;height:30px}.mc-notification-effect--tada{animation-duration:1s;animation-fill-mode:both;animation-timing-function:ease-in-out;animation-iteration-count:1;animation-name:tada}@keyframes tada{0%{transform:scale(1)}10%,20%{transform:scale(.9) rotate(-3deg)}30%,50%,70%,90%{transform:scale(1.1) rotate(3deg)}40%,60%,80%{transform:scale(1.1) rotate(-3deg)}to{transform:scale(1) rotate(0)}}.mc-supportImage--campaign{background-image:url(/assets/img/mascotcards/theme-xmas/modal-logo--campaign_ce1b8.png);width:13.75em;padding-top:69.09091%}.mc-modal--mascot{width:12.5em;padding-top:106%;position:relative}.mc-modal--img{width:100%;position:absolute;top:0;left:0}atures,messages:e.messages},scopedSlots:e._u([{key:"actions",fn:function({submitButtonText:n}){return[t("BaseButton",{staticClass:"width--all-12 width--fromW2-auto",attrs:{variant:"secondary",mode:"brand",type:"submit"}},[e._v(" "+e._s(n)+" ")])]}}]),model:{value:e.thread,callback:function(t){e.thread=t},expression:"thread"}},"ThreadForm",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null).exports,p=n(523),h=n(807),m=n(17),f=Object(p.b)("threadForm",{create:e=>{let{thread:t,currentUser:n,features:r}=e;return Object(h.a)({formId:"threadEditDescription",threadType:t.type||m.a,thread:t,currentUser:n||void 0,features:r&&r.threadForm||void 0})}}),g=n(6),v=n(616),b=n(567),y=n(812),w={components:{ThreadSubmissionLoader:i.a,ThreadDescriptionEditForm:d},mixins:[f],props:y.b,setup:()=>({thread:Object(b.j)(),loader:Object(b.h)()}),data(){return{submission:{},validationMessages:[],formOptions:{wysiwyg:{config:{minHeight:"480px"},plugins:Object(b.m)()}},translations:Object.assign({},this.i18n||{},{form:Object.assign({},(this.i18n||{}).form)})}},computed:{form(){return this.$refs.form},inIframe:()=>!!window.parent,formFeatures(){const e=this.$store.state.threadForm.features||{};return e.groups=!1,e.title=!1,e}},mounted(){const e=this.form.$el,t=new ResizeObserver((()=>{this.resizeParent(e.offsetHeight)}));t.observe(e),this.$once("hook:beforeDestroy",(()=>{t.unobserve(e)})),this.inIframe&&document.body.classList.add("overflow--hidden")},methods:{async submitForm(){if(this.loader.isLoading())return;let e=null;try{this.loader.add(new Promise((t=>{e=t}))),this.form.updateShortcodes(),this.submission=Object(g.b)({req:v.e,params:{threadData:this.thread,mentions:this.formOptions.wysiwyg.plugins.mentions,token:this.$store.state.threadForm.token,descriptionEditOnly:!0}});const{thread:t}=Object(b.a)(await this.loader.add(this.submission.request));if(!t||!t.threadId)throw new Error("Error with submitting form. Thread or thread id is missing");this.form.clearRestore(),this.postMessage("pepper_embed saved","*"),this.$store.commit("threadForm/UPDATE_TOKEN")}catch(e){console.error(e),this.postMessage("pepper_embed error","*"),Object(b.a)(e)}finally{var t;null===(t=e)||void 0===t||t(),this.loader.reset()}},resizeParent(e){this.postMessage("pepper_embed resize ".concat(e),"*")},postMessage(e,t){this.inIframe&&window.parent.postMessage(e,t)}}},x=Object(u.a)(w,(function(){var e=this,t=e._self._c;return t("ThreadSubmissionLoader",[t("ThreadDescriptionEditForm",{ref:"form",staticClass:"space--h-3",attrs:{id:"threadDescriptionEdit",features:e.formFeatures,wysiwyg:e.formOptions.wysiwyg,messages:e.validationMessages},on:{"form-submit":e.submitForm},model:{value:e.thread,callback:function(t){e.thread=t},expression:"thread"}})],1)}),[],!1,null,null,null).exports;r.a.add({ThreadDescriptionEdit:x});var O={name:"ThreadDescriptionEditPage",render:()=>null},k=Object(u.a)(O,undefined,undefined,!1,null,null,null);t.default=k.exports},132:function(e,t,n){"use strict";var r=n(19),i=n(179);let o={};const a="scroll-vector";o.on=(e,t)=>{let n=e.data(a);if(!n){const t=new i.a.Speed(e.scrollTop());let o,s;e[0]===window?(o=(e,n)=>{t.set(n.scrollTop)},s="throttledScroll"):(o=r.a.rafThrottle((()=>{t.set(e.scrollTop())})),s="scroll"),n={speed:t,handler:o,eventName:s},e.on(s,o),e.data(a,n)}return n.speed.observe(t),n.speed},o.off=(e,t)=>{const n=e.data(a);n&&(n.speed.detach(t),n.speed.callbacks.length||e.off(n.eventName,n.handler).data(a,null))},t.a=o},179:function(e,t,n){"use strict";var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s={},l=1e3,c=6e4,u=36e5,d=24*u;s.remaining=function(e){var t=new Date(e)-Date.now();return t<0&&(t=0),{days1:Math.floor(t/d/10),days2:Math.floor(t/d)%10,hours1:Math.floor(t%d/u/10),hours2:Math.floor(t%d/u)%10,minutes1:Math.floor(t%u/c/10),minutes2:Math.floor(t%u/c)%10,seconds1:Math.floor(t%c/l/10),seconds2:Math.floor(t%c/l)%10}},s.Speed=function(){function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;i()(this,e),this.factor=n,this.time=Date.now(),this.value=t,this.speed=0,this.callbacks=[]}return a()(e,[{key:"set",value:function(e){if(this.value!==e){const t=Date.now();this.speed=this.factor*(e-this.value)/(t-this.time),this.time=t,this.value=e,this.callbacks.forEach(this.trigger,this)}return this}},{key:"trigger",value:function(e){return e(this.speed,this),this}},{key:"observe",value:function(e){return this.callbacks.push(e),this}},{key:"detach",value:function(e){const t=this.callbacks.indexOf(e);return t>-1&&this.callbacks.splice(t,1),this}}]),e}(),t.a=s},180:function(e,t,n){"use strict";var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s=n(3);let l=function(){function e(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a.cachedRect(t[0],!0);i()(this,e),this.$elem=t,this.set(r,n)}return a()(e,[{key:"set",value:function(e,t){this.rect=e.move(0,t)}},{key:"get",value:function(e){const t=s.a.cachedRect(this.$elem[0]);return t.cached||this.set(t,e),this.rect.move(0,-e)}}]),e}();t.a={ScrollRect:l}},181:function(e,t,n){"use strict";var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s=n(0),l=n.n(s),c=n(3),u=n(89),d=n(132),p=n(180),h=n(30),m=n(2);const f="scroll-trigger",g="js-".concat(f),v="".concat(f,"-instance"),b=[];let y=function(){function e(t){i()(this,e);let n=t.data(v);return n||(n=this,n.$elem=t,n.elem=t[0],n.cache=n.elem===window,n.elemRect=(n.cache?c.a.cachedRect:c.a.rect).bind(null,n.elem),t.data(v,n),this.destroyed=!0),n.destroyed&&(b.push(n),n.destroyed=!1,n.ungrouped=[],n.grouped={},n.scrollSpeed=d.a.on(n.$elem,u.a.boundMethod(n,"scrollHandler"))),n}return a()(e,[{key:"add",value:function(e){const t=e.options.group;t?(this.grouped[t]||(this.grouped[t]=[])).push(e):this.ungrouped.push(e)}},{key:"remove",value:function(e){const t=e.options.group?this.grouped[e.options.group]||[]:this.ungrouped,n=t.indexOf(e);n>-1&&t.splice(n,1)}},{key:"destroy",value:function(){b.splice(b.indexOf(this),1),d.a.off(this.$elem,u.a.boundMethod(this,"scrollHandler")),this.destroyed=!0}},{key:"scrollHandler",value:function(){this.scrollUpdate()}},{key:"scrollUpdate",value:function(){const t=this.elemRect();this.ungrouped.slice().forEach((n=>{e.conditions[n.options.condition](n,t)})),Object.keys(this.grouped).forEach((n=>{const r=this.grouped[n];r.length&&e.conditions[r[0].options.condition](r,t)}))}}]),e}();y.conditions={inView(e,t){const{duration:n=.5,limit:r=2500}=e.options.args,i=e.rect(),o=e.container.scrollSpeed.speed,a=Math.min(o*n,r),s=t.add(a<0?a:0,0,a>0?a:0,0);e.setActive(Boolean(s.intersection(i).area()))},closest(e,t){const{boundary:n=0}=e[0].options.args,r=t.top+n*t.height()/100;let i=1/0,o=-1/0,a=null;e.forEach((e=>{const t=r-e.rect().top;t<i&&(t>0?(i=t,a=e):i===1/0&&t>o&&(o=t,a=e))})),a.active||e.forEach((e=>{e.setActive(e===a)}))},inArea(e){Array.isArray(e)||(e=[e]);const{top:t=0,bottom:n=0}=e[0].options.args;e.forEach((e=>{const{top:r}=e.elem.getBoundingClientRect();!e.active&&r>t&&r<n?e.setActive(!0):e.setActive(!1)}))},wrapsArea(e){Array.isArray(e)||(e=[e]);let{top:t=0,bottom:n}=e[0].options.args;n||(n=t),e.forEach((e=>{const{top:r,bottom:i}=e.rect();e.setActive(i>t&&r<n)}))}};let w=function(){function e(t){i()(this,e);let n=t.data(v);if(!n){n=this;const r=m.a.params(f,t);n.$elem=t,n.elem=t[0],n.active=!1,n.destroyed=!1,n.options=l.a.extend(!0,{},e.defaults,r);const i=n.options;i.container&&(i.$container=c.a.findTargets(t,i.container),delete i.container),t.data(v,n)}return n.container=new y(n.options.$container),n.container.add(n),n.container.cache&&(n.scrollRect=new p.a.ScrollRect(n.$elem,n.container.scrollSpeed.value)),n}return a()(e,[{key:"rect",value:function(){return this.container.cache?this.scrollRect.get(this.container.scrollSpeed.value):c.a.rect(this.elem)}},{key:"destroy",value:function(){this.container.remove(this),this.$elem.removeClass(g),this.$elem.data(v,null),this.$elem=null,this.elem=null,this.destroyed=!0}},{key:"setActive",value:function(e){if(!this.destroyed&&this.active!==e){const t=this.options,n=t[e?"onEvent":"offEvent"];t.onClass&&this.$elem.toggleClass(t.onClass,e),t.offClass&&this.$elem.toggleClass(t.offClass,!e),n&&c.a.findTargets(this.$elem,t.target).triggerAll(n,t.eventParams),e&&t.oneOff&&this.destroy(),this.active=e}}},{key:"scrollUpdate",value:function(){y.conditions[this.options.condition](this,this.container.elemRect())}}]),e}();function x(){if(!h.a.badScrollPerformance()){const e=l()(".".concat(g));e.toArray().forEach((e=>new w(l()(e)))),e.removeClass(g),setTimeout((()=>{b.forEach((e=>{e.scrollUpdate()}))}),0)}}w.defaults={$container:c.a.$win,target:"$self",condition:"inView",args:{},eventParams:{}},c.a.$win.on("debouncedDomChanged",x),t.a={initAll:x,ScrollTrigger:w,DIRECTIVE_NAME:f}},241:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return l}));const r=e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()},i=(e,t,n)=>{new IntersectionObserver(((e,n)=>{e.forEach((e=>{e.isIntersecting&&(n.unobserve(e.target),t(e.target))}))}),n).observe(e)},o=(e,t,n)=>(e.addEventListener(t,n),()=>e.removeEventListener(t,n));let a=0;function s(e){a+=e?1:-1,1===a&&document.body.classList.add("overflow--hidden"),0===a&&document.body.classList.remove("overflow--hidden")}function l(e,t){const n=document.createElement(t);for(const t of e.attributes)n.setAttributeNS(null,t.name,t.value);for(;e.firstChild;)n.appendChild(e.firstChild);return e.replaceWith(n),n}},242:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return k}));var r=n(5),i=n(4),o=n(64),a=n(207),s=n.n(a),l=n(21),c=n(0),u=n.n(c),d=n(2),p=n(181),h=n(65);const m=(()=>{let e=0,t=null;function n(){e>0||(t=setTimeout((()=>{window.prerenderReady=!0}),1e3))}return{add(){e+=1,clearTimeout(t)},remove(){e-=1,n()},checkReady:n}})();document.addEventListener("DOMContentLoaded",m.checkReady);var f=n(28),g=n(87);const v="vue2",b=o.a.get(),y=(()=>{let e={};const t=new h.a;return{add:n=>{Object.keys(n).forEach((r=>{r in e||(e[r]=n[r],t.fire(r))}))},get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e4;return n in e?(i=e[n],"function"!=typeof i||i.extend?Promise.resolve(i):i().then((e=>e.default))).then((e=>Object(f.c)().then((()=>e)))):new Promise(((e,i)=>{setTimeout(i,r),t.one(n,(()=>e(y.get(n))))}));var i},reset:()=>e={}}})(),w=e=>e.data("vue-instance"),x=e=>{if(w(e))return;const{id:t,name:n,attrs:o,props:a,domProps:c,mapState:p,class:h,useStoreProps:f,vModel:x}=d.a.params(v,e),O=t||n;f&&!(O in i.a.state.component.state)&&i.a.dispatch("component/update",{id:O,props:a});const k=e=>p?Object.entries(p).reduce(((e,t)=>{let[n,r]=t;const i=s()(b,r);return void 0!==i&&(e[n]=i),e}),e||{}):e,j=y.get(n);j.catch((()=>{throw Error("Missing embed: ".concat(n))})),j.finally(m.remove);const _=j.then((t=>new r.default({el:e[0],name:"Wrapper:".concat(n),mixins:[f?{data:()=>({storeProps:Object.keys(a).reduce(((e,t)=>{const n="string"==typeof a[t]&&a[t]?a[t]:t;return Object.defineProperty(e,t,{get:()=>Object(g.c)(i.a.state.component.state[O].props)(n),set(e){i.a.commit("component/MERGE_FIELD",{path:"state.".concat(O,".props.").concat(n),value:e})},configurable:!0,enumerable:!0}),e}),{})})}:{}],store:i.a,router:l.l,async mounted(){u()(this.$el).trigger("domChanged")},render(e){const n=this;return e(t,{props:f?n.storeProps:k(a),attrs:o,domProps:c,class:h,on:f&&x?{update(e){n.storeProps[x]=e}}:{}})}})));e.data("vue-instance",_)},O=async e=>{if(e.data("vue-initialised"))return;const{lazy:t}=d.a.params(v,e);t?((e=>{d.a.updateParams(p.a.DIRECTIVE_NAME,e,{oneOff:!0,onEvent:"vueCreate"}),new p.a.ScrollTrigger(e).scrollUpdate()})(e),await Object(f.b)(),x(e)):x(e),m.add(),e.data("vue-initialised",!0)},k=()=>{u()(".js-vue2").toArray().map((e=>u()(e))).forEach(O)};document.addEventListener("DOMContentLoaded",k),d.a.add(v,"init",O),d.a.add(v,"vueCreate",x),d.a.add(v,"destroy",(async e=>{const t=await w(e);t&&t.$destroy()}))},312:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(0),i=n.n(r),o=(n(316),n(317),n(12)),a=n(2),s=n(34),l=n(45),c=n(3),u=n(106),d=n(52),p=n(7),h=n(19);const m="wysiwyg",f="."+("js-"+m),g=m+"-prepared",v=m+"-promise",b=".redactor",y={},w=[],x={get:e=>w[e]()};y.defaultParams=i.a.extend({emojiTpl:'<i class="emoji emoji--type-{{name}}" title="{{text}}" contenteditable="false"><br></i>',emojiClass:"emoji",placeholderClass:"userHtml-placeholder seal",imageTargetUrl:"ul/.js-imagePopover-url",imageTargetFile:"ul/.js-imagePopover-file",rootElementInactiveClass:"redactor--inactive",lazy:!1,focus:!1,events:"click focus",spinnerClass:"spinner--size-big",imagePlaceholderClass:"userHtml-placeholder",getButton:function(e){return c.a.findTargets(this.$element,s.a.render(this.opts.buttonTarget,{key:e}))}},o.a.config("directives/wysiwyg")),y.prepareRedactors=()=>{i()(f).each((function(){const e=i()(this);if(!e.data(g)){const t=i.a.extend({},y.defaultParams,a.a.params(m,e));t.lazy?y.getEditor(e).one(t.events,y.initRedactor.bind(null,e)):y.initRedactor(e),e.data(g,!0)}}))},y.initRedactor=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e=e.data?e:i()(e)).data(v);if(!r){const o=i.a.Deferred(),s=y.getEditor(e);t=i.a.extend({},y.defaultParams,a.a.params(m,e),t);const c=l.a.init(s,{spinnerClass:t.spinnerClass});n.e(136).then(n.bind(null,505)).then((n=>{let{emojiConfig:r,mentions:a}=n;t=i.a.extend({},{emojiMappings:r},t);const l=h.a.rafThrottle((function(){i()(this.$editor).trigger("layer-height-dimensions")}));t.changeCallback=l,t.mentions&&(t.initCallback=a(e,t)),e.redactor(t);let u=e.data("redactor");w[t.instanceKey]=()=>e.data("redactor"),e[0].dispatchEvent(new Event("redactor-init",{bubbles:!0})),u.observe.addButton("a","link"),u.link.show=()=>null,(t.lazy||t.focus)&&(u.$editor.blur(),u.$editor.focus()),c(),s.closest(b).removeClass(t.rootElementInactiveClass),o.resolve(u)})),r=o.promise(),e.data(v,r)}return r},y.getTextarea=e=>e.closest(b).find(f),y.getEditor=e=>e.closest(b).find(".redactor-editor"),y.preserveSelection=function(e){e&&!e.isSelectionStored&&(e.selection.save(),e.isSelectionStored=!0,e.$editor.one("focusin",(function(){e.selection.restore(),e.isSelectionStored=!1})))};const O=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return n.e(137).then(n.bind(null,504)).then((n=>{let{default:a}=n;if(e||(e=x.get(o)),r.file){let n;a.insertCursorFix(e,i()(a.createPlaceholder(e))),n=e.replacer.getNewPlaceholders(e.imagify.replaceConfig.id)[0][0].prop("id"),p.a.process(d.a.sendJson({image:r.file,return_urls:[e.opts.imageFormat],attributes:{section:e.opts.imageType}},e.opts.imageUploadEndpoint).always(a.replacePlaceholder.bind(null,e,n,t)),r.trigger)}else a.insertImage(e,r.url,t)}))};a.a.add("wysiwyg-button","click",(function(e,t){var n=c.a.findTargets(e,t.target).data("redactor");n&&n[t.module][t.fn].apply(n[t.module],t.args)}),{target:".redactor/textarea",args:[]}),a.a.add("wysiwyg-popover","click",(function(e,t){y.preserveSelection(c.a.findTargets(e,t.target).data("redactor"))}),{target:".redactor/textarea"}),a.a.add("wysiwyg-link-popover","click",(function(e,t,n){var r,o=c.a.findTargets(e,t.target).data("redactor");if(o){if(o.selection.getNodes().find((e=>e.hasAttribute("data-animated-gif"))))return void n.stopImmediatePropagation();const t=u.a.escapeHtml(o.selection.getText()),a=o.utils.isCurrentOrParent("A"),s="object"==typeof o.selection.getNodes().find((e=>"IMG"===e.nodeName))||i()(o.selection.getCurrent()).find("img").length;y.preserveSelection(o),e.data("popover",i.a.extend(!0,e.data("popover"),{tplData:a?{href:(r=a.href,r.replace(location.href.replace(/#.*$/,""),"")),content:u.a.escapeHtml(a.textContent||a.innerText),showContent:!s}:{href:"",content:t,showContent:!s}}))}}),{target:".redactor/textarea"}),a.a.add("wysiwyg-link-update","submit",(function(e,t){var n,r=c.a.findTargets(e,t.target).data("redactor"),o=e.prop("href").value,a=e.prop("content"),s=!!a&&a.value;r&&o&&(e.trigger("layer-destroy"),r.$editor.focus(),s||(s=r.selection.getHtml()||r.selection.getCurrent().innerHTML||o),n=r.utils.isCurrentOrParent("A"),e.prop("unlink")?n&&(r.buffer.set(),i()(n).replaceWith(i()(n).contents())):(r.buffer.set(),n||(n=r.insert.node(document.createElement("a"))),n&&(n.href=/^https?:\/\//.test(o)?o:"https://"+o,n.innerHTML=s,n.target="_blank")),r.code.sync())}),{target:".redactor/textarea"}),a.a.add("wysiwyg-code","click",(function(e,t){var n=c.a.findTargets(e,t.target).data("redactor"),r=c.a.findTargets(e,t.textarea).val();n&&r&&(e.trigger("layer-destroy"),n.insert.htmlWithoutClean(r))}),{target:".redactor/textarea"}),a.a.add("wysiwyg-image","click change",(function(e,t){const n=c.a.findTargets(e,t.target).data("redactor"),r=c.a.findTargets(e,n.opts.imageTargetUrl).val(),o=c.a.findTargets(e,t.file)[0].files[0];if(n&&(o||r)){let a={};if(t.dataControlTargets){let n;t.dataControlTargets.forEach((function(t){n=c.a.findTargets(e,t)[0],n.checked&&(a[n.name]=n.value)}))}e.trigger("layer-destroy"),O(n,a,Object.assign({},t,{file:o,url:r,trigger:{$trigger:t.trigger?i()(t.trigger):e}}))}}),{target:".redactor/textarea",events:["click"]}),y.prepareRedactors(),a.a.add("wysiwyg","init",y.prepareRedactors),i()(document).on("wysiwyg-update",(function(){setTimeout(y.prepareRedactors,0)})),t.b=y},316:function(e,t,n){var r,i,o;o=this,r=[n(0)],void 0===(i=function(e){return o.returnExportsGlobal=function(e){"use strict";var t,n,r,i,o,a,s,l;t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(e){var t,n,r,i;return(i=s.getSelection())&&(r=0,n=!1,(t=function(e,o){var s,l,c,u,d,p;for(p=[],c=0,u=(d=o.childNodes).length;c<u&&(s=d[c],!n);c++)if(3===s.nodeType){if(r+s.length>=e){n=!0,(l=a.createRange()).setStart(s,e-r),i.removeAllRanges(),i.addRange(l);break}p.push(r+=s.length)}else p.push(t(e,s));return p})(e,this.domInputor)),this.domInputor},t.prototype.getIEPosition=function(){return this.getPosition()},t.prototype.getPosition=function(){var e,t;return t=this.getOffset(),e=this.$inputor.offset(),t.left-=e.left,t.top-=e.top,t},t.prototype.getOldIEPos=function(){var e,t;return t=a.selection.createRange(),(e=a.body.createTextRange()).moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length},t.prototype.getPos=function(){var e,t,n;return(n=this.range())?((e=n.cloneRange()).selectNodeContents(this.domInputor),e.setEnd(n.endContainer,n.endOffset),t=e.toString().length,e.detach(),t):a.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return(e=a.selection.createRange().duplicate()).moveStart("character",-1),{height:(t=e.getBoundingClientRect()).bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(t){var n,r,i,o,l;return s.getSelection&&(i=this.range())?(i.endOffset-1>0&&i.endContainer!==this.domInputor&&((n=i.cloneRange()).setStart(i.endContainer,i.endOffset-1),n.setEnd(i.endContainer,i.endOffset),r={height:(o=n.getBoundingClientRect()).height,left:o.left+o.width,top:o.top},n.detach()),r&&0!==(null!=r?r.height:void 0)||(n=i.cloneRange(),l=e(a.createTextNode("|")),n.insertNode(l[0]),n.selectNode(l[0]),r={height:(o=n.getBoundingClientRect()).height,left:o.left,top:o.top},l.remove(),n.detach())):a.selection&&(r=this.getOldIEOffset()),r&&(r.top+=e(s).scrollTop(),r.left+=e(s).scrollLeft()),r},t.prototype.range=function(){var e;if(s.getSelection)return(e=s.getSelection()).rangeCount>0?e.getRangeAt(0):null},t}(),n=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,n,r,i,o;return t=this.domInputor,r=0,(i=a.selection.createRange())&&i.parentElement()===t&&(n=t.value.replace(/\r\n/g,"\n").length,(o=t.createTextRange()).moveToBookmark(i.getBookmark()),(e=t.createTextRange()).collapse(!1),r=o.compareEndPoints("StartToEnd",e)>-1?n:-o.moveStart("character",-n)),r},t.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,a.selection?((n=t.createTextRange()).move("character",e),n.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t;return t=this.domInputor.createTextRange(),e||(e=this.getPos()),t.move("character",e),{left:t.boundingLeft,top:t.boundingTop,height:t.boundingHeight}},t.prototype.getOffset=function(t){var n,r,i;return n=this.$inputor,a.selection?((r=this.getIEOffset(t)).top+=e(s).scrollTop()+n.scrollTop(),r.left+=e(s).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),i=this.getPosition(t),{left:r.left+i.left-n.scrollLeft(),top:r.top+i.top-n.scrollTop(),height:i.height})},t.prototype.getPosition=function(e){var t,n,i,o,a;return t=this.$inputor,i=function(e){return e=e.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(e=e.replace(/\s/g,"&nbsp;")),e},void 0===e&&(e=this.getPos()),a=t.val().slice(0,e),n=t.val().slice(e),o="<span style='position: relative; display: inline;'>"+i(a)+"</span>",o+="<span id='caret' style='position: relative; display: inline;'>|</span>",o+="<span style='position: relative; display: inline;'>"+i(n)+"</span>",new r(t).create(o).rect()},t.prototype.getIEPosition=function(e){var t,n;return n=this.getIEOffset(e),t=this.$inputor.offset(),{left:n.left-t.left,top:n.top-t.top,height:n.height}},t}(),r=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),e.each(this.css_attr,(function(e,r){return t[r]=n.$inputor.css(r)})),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return n={left:(t=(e=this.$mirror.find("#caret")).position()).left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),i={contentEditable:function(e){return!(!e[0].contentEditable||"true"!==e[0].contentEditable)}},o={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return a.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(e){return this.getOffset(e)}},a=null,s=null,l=function(e){var t;return(t=null!=e?e.iframe:void 0)?(s=t.contentWindow,a=t.contentDocument||s.document):(s=window,a=document)},e.fn.caret=function(r,a,s){var c;return o[r]?(e.isPlainObject(a)?(l(a),a=void 0):l(s),c=i.contentEditable(this)?new t(this):new n(this),o[r].apply(c,[a])):e.error("Method "+r+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=n,e.fn.caret.Utils=i,e.fn.caret.apis=o}(e)}.apply(t,r))||(e.exports=i)},317:function(e,t,n){var r,i;r=[n(0)],i=function(e){return u=[].slice,d={}.hasOwnProperty,p=function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=$(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){return this.$el=this.$inputor.parents(".redactor-box").find(".atwho-container")},e.prototype.setupRootElement=function(e,t){if(null==t&&(t=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(e){throw this.iframe=null,new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.")}}return this.createContainer((this.iframeAsRoot=t)?this.document:document)},e.prototype.controller=function(e){var t,n,r,i;if(this.aliasMaps[e])n=this.controllers[this.aliasMaps[e]];else for(r in i=this.controllers)if(t=i[r],r===e){n=t;break}return n||this.controllers[this.currentFlag]},e.prototype.setContextFor=function(e){return this.currentFlag=e,this},e.prototype.reg=function(e,t){var n,r;return n=(r=this.controllers)[e]||(r[e]=this.$inputor.is("[contentEditable]")?new o(this,e):new l(this,e)),t.alias&&(this.aliasMaps[t.alias]=e),n.init(t),this},e.prototype.listen=function(){return this.$inputor.on("compositionstart",(e=this,function(t){var n;return null!=(n=e.controller())&&n.view.hide(),e.isComposing=!0})).on("compositionend",function(e){return function(t){return e.isComposing=!1}}(this)).on("keyup.atwhoInner",function(e){return function(t){return e.onKeyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.onKeydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this)).on("blur.atwhoInner",function(e){return function(t){var n;if(n=e.controller())return n.view.hide(t,n.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(e){return function(t){return e.dispatch(t)}}(this));var e},e.prototype.shutdown=function(){var e,t;for(e in t=this.controllers)t[e].destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner"),this.$el.remove()},e.prototype.dispatch=function(e){return $.map(this.controllers,(t=this,function(n){var r;return(r=n.getOpt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout((function(){if(n.lookUp(e))return t.setContextFor(n.at)}),r)):n.lookUp(e)?t.setContextFor(n.at):void 0}));var t},e.prototype.onKeyup=function(e){var t;switch(e.keyCode){case a.ESC:e.preventDefault(),null!=(t=this.controller())&&t.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:$.noop();break;case a.P:case a.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var t,n;if((t=null!=(n=this.controller())?n.view:void 0)&&t.visible())switch(e.keyCode){case a.ESC:e.preventDefault(),t.hide(e);break;case a.UP:e.preventDefault(),t.prev();break;case a.DOWN:e.preventDefault(),t.next();break;case a.P:if(!e.ctrlKey)return;e.preventDefault(),t.prev();break;case a.N:if(!e.ctrlKey)return;e.preventDefault(),t.next();break;case a.TAB:case a.ENTER:case a.SPACE:if(!t.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&e.keyCode===a.SPACE)return;e.preventDefault(),t.choose(e);break;default:$.noop()}},e}(),r=function(){function e(e,t){this.app=e,this.at=t,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=$("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=$("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new s(this),this.view=new c(this)}return e.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},e.prototype.init=function(e){return this.setting=$.extend({},this.setting||$.fn.atwho.default,e),this.view.init(),this.model.reload(this.setting.data)},e.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},e.prototype.callDefault=function(){var e,t,n;n=arguments[0],e=2<=arguments.length?u.call(arguments,1):[];try{return i[n].apply(this,e)}catch(e){return t=e,$.error(t+" Or maybe At.js doesn't have function "+n)}},e.prototype.trigger=function(e,t){var n,r;return null==t&&(t=[]),t.push(this),r=(n=this.getOpt("alias"))?e+"-"+n+".atwho":e+".atwho",this.$inputor.trigger(r,t)},e.prototype.callbacks=function(e){return this.getOpt("callbacks")[e]||i[e]},e.prototype.getOpt=function(e,t){try{return this.setting[e]}catch(e){return null}},e.prototype.insertContentFor=function(e){var t,n;return n=this.getOpt("insertTpl"),t=$.extend({},e.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,n,t)},e.prototype.renderView=function(e){var t;return t=this.getOpt("searchKey"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.getOpt("limit")))},e.arrayToDefaultHash=function(e){var t,n,r,i;if(!$.isArray(e))return e;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],$.isPlainObject(t)?i.push(t):i.push({name:t});return i},e.prototype.lookUp=function(e){var t,n;if(t=this.catchQuery(e))return n=function(e){return e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide()},this.model.query(t.text,$.proxy(n,this)),t},e}(),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.catchQuery=function(){var e,t,n,r,i,o;return t=this.$inputor.val(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),o=t.slice(0,e),"string"==typeof(r=this.callbacks("matcher").call(this,this.at,o,this.getOpt("startWithSpace")))&&r.length<=this.getOpt("maxLen",20)?(n=(i=e-r.length)+r.length,this.pos=i,r={text:r,headPos:i,endPos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},t.prototype.insert=function(e,t){var n,r,i,o,a;return a=""+(i=(r=(n=this.$inputor).val()).slice(0,Math.max(this.query.headPos-this.at.length,0)))+(e+=o=""===(o=this.getOpt("suffix"))?o:o||" ")+r.slice(this.query.endPos||0),n.val(a),n.caret("pos",i.length+e.length,{iframe:this.app.iframe}),n.is(":focus")||n.focus(),n.change()},t}(r),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype._getRange=function(){var e;if((e=this.app.window.getSelection()).rangeCount>0)return e.getRangeAt(0)},t.prototype._setRange=function(e,t,n){if(null==n&&(n=this._getRange()),n)return t=$(t)[0],"after"===e?(n.setEndAfter(t),n.setStartAfter(t)):(n.setEndBefore(t),n.setStartBefore(t)),n.collapse(!1),this._clearRange(n)},t.prototype._clearRange=function(e){var t;return null==e&&(e=this._getRange()),(t=this.app.window.getSelection()).removeAllRanges(),t.addRange(e)},t.prototype._movingEvent=function(e){var t;return"click"===e.type||(t=e.which)===a.RIGHT||t===a.LEFT||t===a.UP||t===a.DOWN},t.prototype._unwrap=function(e){var t;return(t=(e=$(e).unwrap().get(0)).nextSibling)&&t.nodeValue&&(e.nodeValue+=t.nodeValue,$(t).remove()),e},t.prototype.catchQuery=function(e){var t,n,r,i,o,s,l,c,u,d;if(!this.app.isComposing&&(u=this._getRange())&&u.commonAncestorContainer.nodeType===Node.TEXT_NODE){if(e.which===a.ENTER)return(n=$(u.startContainer).closest(".atwho-query")).contents().unwrap(),n.is(":empty")&&n.remove(),(n=$(".atwho-query",this.app.document)).text(n.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if($(u.startContainer).is(this.$inputor))return void this._clearRange();e.which===a.BACKSPACE&&u.startContainer.nodeType===document.ELEMENT_NODE&&(l=u.startOffset-1)>=0?((d=u.cloneRange()).setStart(u.startContainer,l),$(d.cloneContents()).contents().last().is(".atwho-inserted")&&(i=$(u.startContainer).contents().get(l),this._setRange("after",$(i).contents().last()))):e.which===a.LEFT&&u.startContainer.nodeType===document.TEXT_NODE&&(t=$(u.startContainer.previousSibling)).is(".atwho-inserted")&&0===u.startOffset&&this._setRange("after",t.contents().last())}return $(u.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(n=$(".atwho-query",this.app.document)).length>0&&n.is(":empty")&&0===n.text().length&&n.remove(),this._movingEvent(e)||n.removeClass("atwho-inserted"),(d=u.cloneRange()).setStart(u.startContainer,0),s=this.callbacks("matcher").call(this,this.at,d.toString(),this.getOpt("startWithSpace")),0===n.length&&"string"==typeof s&&(r=u.startOffset-this.at.length-s.length)>=0&&(u.setStart(u.startContainer,r),n=$("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),u.surroundContents(n.get(0)),o=n.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(u.setStart(o,o.length),u.setEnd(o,o.length),this._clearRange(u)):this._setRange("after",o,u)),"string"==typeof s&&s.length<=this.getOpt("maxLen",20)?(c={text:s,el:n},this.trigger("matched",[this.at,c.text]),this.query=c):(this.view.hide(),this.query={el:n},n.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&n.hasClass("atwho-inserted")?n.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,n)&&this._setRange("after",this._unwrap(n.text(n.text()).contents().first()))),null)}},t.prototype.insert=function(e,t){var n,r,i;return r=(r=this.getOpt("suffix"))?r:r||" ",this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(e),(n=this._getRange())&&(n.setEndAfter(this.query.el[0]),n.collapse(!1),n.insertNode(i=this.app.document.createTextNode(r)),this._setRange("after",i,n)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()},t}(r),s=function(){function e(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(e,t){var n,r,i;return n=this.fetch(),r=this.context.getOpt("searchKey"),n=this.context.callbacks("filter").call(this.context,e,n,r)||[],i=this.context.callbacks("remoteFilter"),n.length>0||!i&&0===n.length?t(n):i.call(this.context,e,t)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,e||[]))},e.prototype.load=function(e){if(!this.saved()&&e)return this._load(e)},e.prototype.reload=function(e){return this._load(e)},e.prototype._load=function(e){return"string"==typeof e?$.ajax(e,{dataType:"json"}).done((t=this,function(e){return t.save(e)})):this.save(e);var t},e}(),c=function(){function e(e){this.context=e,this.$el=$(this.context.$el).parents(".atwho-container").find(".atwho-view"),this.timeoutID=null,this.bindEvent()}return e.prototype.init=function(){var e;return e=this.context.getOpt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,t;return(e=this.$el).on("mouseenter.atwho-view","li",(function(t){return e.find(".cur").removeClass("cur"),$(t.currentTarget).addClass("cur")})).on("click.atwho-view","li",(t=this,function(n){return e.find(".cur").removeClass("cur"),$(n.currentTarget).addClass("cur"),t.choose(n),n.preventDefault()}))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(e){var t,n;if((t=this.$el.find(".cur")).length&&(n=this.context.insertContentFor(t),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,n,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0},e.prototype.next=function(){var e;return(e=this.$el.find(".cur").removeClass("cur").next()).length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var e;return(e=this.$el.find(".cur").removeClass("cur").prev()).length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){if(!this.stopShowing)return this.visible()?void 0:(this.$el.show(),this.$el.parent(".atwho-container").show(),this.context.trigger("shown"));this.stopShowing=!1},e.prototype.hide=function(e,t){var n,r;if(this.visible())return isNaN(t)?(this.$el.parent(".atwho-container").hide(),this.$el.hide(),this.context.trigger("hidden",[e])):(r=this,n=function(){return r.hide()},clearTimeout(this.timeoutID),this.timeoutID=setTimeout(n,t))},e.prototype.render=function(e){var t,n,r,i,o,a,s;if($.isArray(e)&&e.length>0){for(this.$el.empty(),n=this.$el,o=this.context.getOpt("displayTpl"),a=0,s=e.length;a<s;a++)r=e[a],r=$.extend({},r,{"atwho-at":this.context.at}),i=this.context.callbacks("tplEval").call(this.context,o,r),(t=$(this.context.callbacks("highlighter").call(this.context,i,this.context.query.text))).data("item-data",r),n.append(t);return this.show(),this.context.getOpt("highlightFirst")?n.find("li:first").addClass("cur"):void 0}this.hide()},e}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},i={beforeSave:function(e){return r.arrayToDefaultHash(e)},matcher:function(e,t,n){var r,i,o;return r="A-Za-z0-9_."+(i="\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f")+"가-하|@+-",e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),(o=new RegExp(e+"(["+r+"]*)$|"+e+"([^"+i+"]*)$","gi").exec(t))?o[2]||o[1]:null},filter:function(e,t,n){var r,i,o,a;for(a=[],i=0,o=t.length;i<o;i++)r=t[i],~new String(r[n]).toLowerCase().indexOf(e.toLowerCase())&&a.push(r);return a},remoteFilter:null,sorter:function(e,t,n){var r,i,o,a;if(!e)return t;for(a=[],i=0,o=t.length;i<o;i++)(r=t[i]).atwho_order=new String(r[n]).toLowerCase().indexOf(e.toLowerCase()),r.atwho_order>-1&&a.push(r);return a.sort((function(e,t){return e.atwho_order-t.atwho_order}))},tplEval:function(e,t){var n;n=e;try{return"string"!=typeof e&&(n=e(t)),n.replace(/\$\{([^\}]*)\}/g,(function(e,n,r){return t[n]}))}catch(e){return""}},highlighter:function(e,t){var n,r;return n="A-Za-z0-9_.\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f가-하",t?(r=new RegExp(">\\s*(["+n+"]*?)("+t.replace("+","\\+")+")(["+n+"]*?)\\s*<","ig"),e.replace(r,(function(e,t,n,r){return"> "+t+"<strong>"+n+"</strong>"+r+" <"}))):e},beforeInsert:function(e,t){return e},beforeReposition:function(e){return e},afterMatchFailed:function(e,t){}},t={load:function(e,t){var n;if(n=this.controller(e))return n.model.load(t)},isSelecting:function(){var e;return null!=(e=this.controller())?e.view.visible():void 0},hide:function(){var e;return null!=(e=this.controller())?e.view.hide():void 0},setIframe:function(e,t){return this.setupRootElement(e,t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},$.fn.atwho=function(e){var r,i;return i=arguments,r=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each((function(){var o,a;return(a=(o=$(this)).data("atwho"))||o.data("atwho",a=new n(this)),"object"!=typeof e&&e?t[e]&&a?r=t[e].apply(a,Array.prototype.slice.call(i,1)):$.error("Method "+e+" does not exist on jQuery.caret"):a.reg(e.at,e)})),r||this},void($.fn.atwho.default={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:i,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,displayTimeout:300,delay:null,spaceSelectsMatch:!1,editableAtwhoQueryAttrs:{}});var t,n,r,i,o,a,s,l,c,u,d,p}.apply(t,r),void 0===i||(e.exports=i)},507:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return u}));var r=n(510),i=n(5),o=n(511),a={__name:"notification-button",props:{count:{type:Number,default:0},square:Boolean,selected:Boolean,countTop:Boolean},setup(e){const t=e,n=Object(i.computed)((()=>({"button--square":t.square,"button--selected":t.selected})));return{__sfc:!0,props:t,buttonClasses:n,CircleLabel:o.a,BaseButton:r.a}}},s=n(44);Object(s.a)(a,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BaseButton,e._g({staticClass:"overflow--visible",class:n.buttonClasses,attrs:{variant:"secondary",mode:"default"}},e.$listeners),[e._t("default"),e.count&&e.countTop||e.count&&e.square?t(n.CircleLabel,{staticClass:"text--b button--square space--h-0 aGrid-item aGrid-item--r-n7 aGrid-item--t-n7",attrs:{size:"xs",mode:"primary"}},[e._v(" "+e._s(e.count)+" ")]):e.count?t(n.CircleLabel,{staticClass:"text--b button--square space--h-0 space--ml-2",attrs:{size:"m",mode:"primary"}},[e._v(" "+e._s(e.count)+" ")]):e._e()],2)}),[],!1,null,null,null).exports;const l={brand:"button--mode-brand",white:"button--mode-white"};var c={__name:"segmented-button",props:{mode:{type:String,default:"brand",validate:e=>e in l},name:{type:String,required:!1},selectedValue:{type:String,required:!1},mandatory:Boolean},emits:["update:selectedValue"],setup(e,t){let{emit:n}=t;const r=e,o=Object(i.computed)((()=>l[r.mode])),a=Object(i.computed)((()=>r.name===r.selectedValue));return{__sfc:!0,modes:l,emit:n,props:r,mode:o,selected:a,toggle:function(){n("update:selectedValue",a.value&&!r.mandatory?null:r.name)}}}},u=Object(s.a)(c,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("button",{staticClass:"button button--type-segmented",class:[n.mode,{"button--selected zIndex--atopNormal":n.selected}],attrs:{type:"button"},on:{click:n.toggle}},[e._t("default")],2)}),[],!1,null,null,null).exports},510:function(e,t,n){"use strict";var r=n(32),i=n.n(r),o=n(5),a=n(541),s=n(515);const l=["tag"];var c=Object(o.defineComponent)({__name:"base-button",props:{variant:{default:"none"},mode:{default:"none"},size:{default:"none"},loading:{type:Boolean},selected:{type:Boolean},square:{type:Boolean},seal:{type:Boolean},disabled:{type:Boolean},ellipsis:{type:Boolean},wrap:{type:Boolean}},emits:["click","mousedown"],setup(e,t){let{emit:n}=t;const r=e,c=Object(o.ref)(null),u=Object(o.useAttrs)(),d=Object(a.a)(u),p=Object(o.computed)((()=>{const e=d.value;return i()(e,l)})),h=Object(o.computed)((()=>a.d[r.variant])),m=Object(o.computed)((()=>Object(a.b)(r.variant,r.mode)[r.mode])),f=Object(o.computed)((()=>a.c[r.size])),g=Object(o.computed)((()=>({"button--disabled":r.disabled,"button--sealed":r.seal||r.loading,"button--square":r.square,"button--selected":r.selected,"seal--cover aGrid":r.loading&&"none"===r.variant})));return{__sfc:!0,emit:n,props:r,buttonRef:c,attrs:u,config:d,computedConfig:p,variantClasses:h,modeClasses:m,sizeClasses:f,buttonClasses:g,handleClick:function(e){r.disabled||n("click",e)},BaseSpinner:s.a}}}),u=n(44),d=Object(u.a)(c,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.config.tag,e._b({ref:"buttonRef",tag:"Component",class:[n.variantClasses,n.modeClasses,n.sizeClasses,n.buttonClasses],attrs:{disabled:e.disabled},on:{click:n.handleClick,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:n.handleClick.apply(null,arguments)},mousedown:function(t){return e.$emit("mousedown",t)}}},"Component",n.computedConfig,!1),[e.loading?t(n.BaseSpinner,{staticClass:"spinner--centered"}):e._e(),t("span",{staticClass:"flex--inline boxAlign-ai--all-c",class:{"mute--opacity-0":e.loading,"flex--width-calc-fix":e.ellipsis,"flex--wrap":e.wrap}},[e.ellipsis?t("span",{staticClass:"overflow--ellipsis"},[e._t("default")],2):e._t("default")],2),e._t("postfix")],2)}),[],!1,null,null,null);t.a=d.exports},511:function(e,t,n){"use strict";var r={props:{size:{type:String,required:!1,default:"m"},mode:{type:String,required:!1,default:"primary"}},computed:{sizeClasses(){return this.$options.classes.sizes[this.size]},modeClasses(){return this.$options.classes.modes[this.mode]}},classes:{sizes:{xs:"circle--xs",s:"circle--s",m:"circle--m",l:"circle--l"},modes:{alert:"bg--color-red",primary:"bg--color-brandPrimary","primary-inverted":"bg--color-white text--color-brandPrimary"}}},i=n(44),o=Object(i.a)(r,(function(){var e=this;return(0,e._self._c)("span",{class:[e.sizeClasses,e.modeClasses]},[e._t("default")],2)}),[],!1,null,null,null);t.a=o.exports},515:function(e,t,n){"use strict";var r=n(44),i=Object(r.a)({},(function(e,t){return e("svg",{staticClass:"spinner",class:t.data.staticClass,attrs:{viewBox:"0 0 66 66"}},[e("circle",{staticClass:"spinner-background",attrs:{cx:"33",cy:"33",r:"30"}}),e("circle",{staticClass:"spinner-bar",attrs:{cx:"33",cy:"33",r:"30"}})])}),[],!0,null,null,null);t.a=i.exports},516:function(e,t,n){"use strict";var r=n(525),i=n(522),o=n(519),a=n(517),s=n(512),l=n(520);t.a={name:"popoverMixin",components:{BasePopover:i.a,PopoverHead:o.a,PopoverBody:a.a,PopoverClose:s.a,PopoverAsync:l.a},directives:{popover:r.a}}},52:function(e,t,n){"use strict";var r=n(0),i=n.n(r),o={};o.legacyUpload=!(window.File&&window.FileList&&window.Blob&&window.FormData),o.inputToJson=function(e,t,n){var r,i,a=e.match(/^(\w+|\[(\w*)])(.*$)/),s=n;return a?(r=void 0===a[2]?a[1]:a[2],i=a[3],r?(s||(s={}),s[r]?o.inputToJson(i,t,s[r]):s[r]=o.inputToJson(i,t)):(s||(s=[]),s.push(o.inputToJson(i,t)))):s=t,s},o.toJson=function(e,t){var n={};return e.serializeArray().forEach((function(e){o.inputToJson(e.name,e.value,n)})),t&&(o.legacyUpload&&new Error("browser does not support file api or FormData"),e.find("input[type=file][name]").each((function(e,t){o.getFiles(i()(t)).forEach((function(e){o.inputToJson(t.name,e,n)}))}))),n},o.jsonToInputs=function(e,t,n){return t||(t=[]),i.a.each(e,(function(e,r){var a=n?n+"["+e+"]":e;r&&"object"==typeof r?o.jsonToInputs(r,t,a):t.push(i()('<input type="hidden"/>').prop("name",a).prop("value",r))})),t},o.formData=function(e){var t;return window.FormData||new Error("browser does not support FormData"),t=new window.FormData,function e(n,r){var o;return i.a.each(n,(function(n,i){o=r?r+"["+n+"]":n,!i||"object"!=typeof i||i instanceof window.File||i instanceof window.Blob?t.append(o,i):e(i,o)})),t}(e)},o.sendJson=function(e,t,n){const r=i.a.Deferred(),a=i.a.ajax(t,{type:n||"POST",xhr:function(){const e=i.a.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",(function(e){e.lengthComputable&&r.notify(e.loaded,e.total)})),e},data:"string"==typeof e?e:o.formData(e),success:r.resolve,error:r.reject,cache:!1,contentType:!1,processData:!1}),s=r.promise();return s.abort=function(){a.abort()},s},o.send=function(e,t){return"multipart/form-data"===e.attr("enctype")?o.legacyUpload?function(e){return e.submit(),i.a.Deferred().promise()}(e):o.sendJson(o.toJson(e,!0),e.attr("action"),e.attr("method")):i.a.ajax(e.attr("action"),{type:e.attr("method"),data:t?e.serialize().concat("&",i.a.param(t)):e.serialize(),beforeSend:(e,t)=>{e.requestUrl=t.url}})},o.resetFile=function(e){try{e.val(""),e.val()&&e.prop("type","text").prop("type","file")}catch(e){}return e.data("imageControlExcludes",[])},o.excludeFile=function(e,t){var n=e.data("imageControlExcludes")||[];return-1===n.indexOf(t)&&n.push(t),e.data("imageControlExcludes",n)},o.unExcludeFile=function(e,t){var n=e.data("imageControlExcludes")||[],r=n.indexOf(t);return-1!==r&&n.splice(r,1),e.data("imageControlExcludes",n)},o.getFiles=function(e){const t=e.data("imageControlExcludes"),n=[];for(let t=0;t<e[0].files.length;t+=1)n.push(e[0].files[t]);return n.filter((function(e,n){return!t||-1===t.indexOf(n)}))},o.postStatic=function(e,t){i()("<form/>").attr("method","post").attr("action",t).append(o.jsonToInputs(e)).appendTo(document.body).submit()},t.a=o},521:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(10),i=n.n(r),o=n(11),a=n.n(o);let s=function(e){return e.CROP="cp",e.RESIZE="re",e.BLUR="bl",e.FIT="fi",e.FIT_BY_SIZE="fs",e.QUALITY="qt",e.FILE_TYPE="ft",e}({}),l=function(e){return e.ANIMATED_SOURCE="as",e}({});const c={[s.CROP]:"crop",[s.RESIZE]:"resize",[s.BLUR]:"blur",[s.FIT]:"fit",[s.FIT_BY_SIZE]:"fitBySize",[s.QUALITY]:"quality",[s.FILE_TYPE]:"fileType"};let u=function(){function e(t,n){if(i()(this,e),t){if("object"==typeof t){const{path:e,name:r}=t;if(!e||!r)throw Error("Invalid picsy image object");const i=t.animated?"".concat(l.ANIMATED_SOURCE,"/"):"",{name:o=r,ext:a="jpg"}=n||{},s=t.ext||a;this.path="".concat("https://static.preisjaeger.at","/").concat(e,"/").concat(r,"/").concat(i),this.file="".concat(o,".").concat(s)}else{if("string"!=typeof t)throw Error("Expected picsy image path, but received: ".concat(t));if("string"!=typeof n)throw Error("Expected picsy image file name, but received: ".concat(n));this.path=t,this.file=n}Object.freeze(this)}}return a()(e,[{key:"blur",value:function(e){return e>0&&e<=100?this.addOperation(s.BLUR,e):this}},{key:"quality",value:function(e){return e>=0&&e<=100?this.addOperation(s.QUALITY,e):this}},{key:"resize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(s.RESIZE,...t)}},{key:"fit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(s.FIT,...t)}},{key:"fitBySize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(s.FIT_BY_SIZE,...t)}},{key:"crop",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.dimOperation(s.CROP,...t)}},{key:"fileType",value:function(t){if(!t||!this.file)return this;const n="".concat(this.file.substr(0,this.file.lastIndexOf(".")),".").concat(t);return new e(this.path,n)}},{key:"toString",value:function(){return this.path?this.path+this.file:""}},{key:"apply",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{let[n,...r]=t;const i=c[n];return i?e[i](...r):e}),this)}},{key:"dimOperation",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=Math.round(t)||"",o=Math.round(n)||"";return i||o?this.addOperation(e,"".concat(i).concat(o?"x"+o:"").concat(r?"w":"")):this}},{key:"addOperation",value:function(t,n){return this.path?new e("".concat(this.path).concat(t,"/").concat(n,"/"),this.file):this}}]),e}();const d=e=>{const t=[s.CROP,s.RESIZE,s.FIT,s.FIT_BY_SIZE];for(const[n,r,i]of e)if(t.includes(n))return{width:r,height:i};return{width:0,height:0}}},523:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(4),i=n(64);const o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.a,o=0;return{beforeCreate(){++o>1||(r.a.registerModule(e,t.create.call(this,n.get())),t.update&&n.sub(t.update))},destroyed(){if(--o>0)return;t.update&&n.unsub(t.update),t.destroy&&t.destroy();const i="".concat(e,"/tearDown");i in r.a._actions&&r.a.dispatch(i),r.a.unregisterModule(e)}}},a=(e,t)=>o(e,{create:n=>{if(!(e in n))throw Error("Missing initial state for: ".concat(e));return t(n[e])},update:t=>{const n="".concat(e,"/replace");e in t&&n in r.a._actions&&r.a.dispatch(n,t[e])}})},525:function(e,t,n){"use strict";var r=n(32),i=n.n(r),o=n(241),a=n(533);const s=["focus","hover","click","fixed"],l=!0;function c(e,t,n){const{arg:r,modifiers:{focus:a,hover:c,click:p=!a&&!c,fixed:h},value:m}=t,f=i()(t.modifiers,s),g=!Array.isArray(m),v=t=>{if(g&&null!=m&&m.disabled)return;const i=(g?null==m?void 0:m.layouts:m)||Object.keys(f).map((e=>({preset:e,fixed:h})));if(!(l||null!=i&&i.length))throw Error("Missing layout for v-popover");return u(e,n.context,r).activate(i,{type:t.type,target:t.currentTarget})},b=[];if(p&&b.push(Object(o.a)(e,"click",v)),a&&b.push(Object(o.a)(e,"focus",v)),c&&b.push(Object(o.a)(e,"mouseenter",v)),!l&&p&&a)throw Error("Invalid v-popover event modifiers: there should be no reason to combine click & focus");d.set(e,b)}const u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===n){const t=e.querySelector(".popover-origin");if(!l&&!t&&!r)throw Error("Couldn't find nested popover inside v-popover trigger");return null==t?void 0:t.__vue__}let i=t.$refs[n];if(Array.isArray(i)&&(i=i[0]),!l&&!i&&!r)throw Error("Invalid v-popover name: ".concat(n,", please verify ref"));for(;i&&i.$options.name!==a.a.name;)i=i.$children[0];if(!l&&!i&&!r)throw Error("Component linked via v-popover is not a popover: ".concat(n));return i},d=new WeakMap;t.a={bind:c,update:function(e,t,n){const{arg:r,value:i,oldValue:o}=t,a=Array.isArray(i)?i:null==i?void 0:i.layouts;if(a===(Array.isArray(o)?o:null==o?void 0:o.layouts))return;d.get(e).forEach((e=>e())),c(e,t,n);const s=u(e,n.context,r);s.active&&s.currentActivation.trigger.target===e&&s.updateLayouts(a)},unbind:function(e,t,n){let{arg:r}=t;d.get(e).forEach((e=>e()));const i=u(e,n.context,r,!0);i&&i.active&&i.currentActivation.trigger.target===e&&i.close()}}},526:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(633),i=n.n(r),o=n(636),a=n.n(o),s=n(49);const l=["uuid","userId"],c={set(e){return Object.assign(this.payload,e),this},record(e,t){if(this.enabled){const n=this.sanitizePayload(Object.assign({},this.payload,e));this.track(this.validPayload(n),t)}},validPayload(e){return a()(e,this.whiteList)},sanitizePayload:e=>Object(s.a)()?e:i()(e,l)},u=Object.assign(Object.create(c),{enabled:!0,whiteList:["category","action","label","value"],track(e,t){const n=t&&t.nonInteraction;window.gtag&&e.category&&e.action&&window.gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value,non_interaction:n?1:0})}}),d=()=>Object.assign(Object.create(u),{payload:{}})},533:function(e,t,n){"use strict";var r=n(525);n.d(t,"e",(function(){return r.a}));var i=n(522);n.d(t,"a",(function(){return i.a}));var o=n(519);n.d(t,"d",(function(){return o.a}));var a=n(517);n.d(t,"b",(function(){return a.a}));n(524);var s=n(512);n.d(t,"c",(function(){return s.a}));n(520)},538:function(e,t,n){"use strict";var r=n(5),i=n(522),o=n(550);const a={center:o.e,bottomSheet:o.b,bottomCenter:o.c,bottomRight:o.d,fullscreen:o.f,absolute:o.a},s=Object(r.defineComponent)({name:"BaseModal"});var l=Object(r.defineComponent)(Object.assign({},s,{props:{layout:{type:[String,Object],default:"center",validator:e=>"string"!=typeof e||e in a},backdrop:{type:Boolean,default:!0},mobileSheet:{type:Boolean,default:!0},contentRepos:{type:Boolean,default:!1},scrollRepos:{type:Boolean,default:!1}},setup(e,t){let{expose:n}=t;const o=e,s=Object(r.computed)((()=>{const e="string"==typeof o.layout?a[o.layout]:o.layout;return[Object.assign({},e,{backdrop:o.backdrop})]})),l=Object(r.ref)(),c=()=>l.value.close();return Object(r.onMounted)((()=>l.value.activate(s))),Object(r.watch)(s,(()=>l.value.updateLayouts(s))),n({close:c}),{__sfc:!0,layoutPresets:a,props:o,popoverLayouts:s,popover:l,close:c,BasePopover:i.a}}})),c=n(44),u=Object(c.a)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BasePopover,e._g(e._b({ref:"popover",attrs:{"scroll-repos":e.scrollRepos,"content-repos":e.contentRepos,"mobile-sheet":e.mobileSheet&&"fullscreen"!==e.layout},scopedSlots:e._u([{key:"default",fn:function({}){return[e._t("default",null,{close:n.close})]}}],null,!0)},"BasePopover",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=u.exports},541:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(5);const i={none:"",s:"button--size-s",m:"button--size-m",l:"button--size-l"},o={none:"",primary:"button button--shape-circle button--type-primary",secondary:"button button--shape-circle button--type-secondary",tertiary:"button button--shape-circle button--type-tertiary",text:"button button--type-text",tag:"button button--type-tag"},a={base:{brand:"button--mode-brand",success:"button--mode-success",danger:"button--mode-danger",info:"button--mode-info",warning:"button--mode-warning",white:"button--mode-white"},primary:{dark:"button--mode-dark",expired:"button--mode-expired"},secondary:{default:"button--mode-default"},tertiary:{default:"button--mode-default"},text:{primary:"button--mode-primary",secondary:"button--mode-secondary",white:"button--mode-white"},tag:{dark:"button--mode-dark",light:"button--mode-light"}};function s(e){const t=function(e){return"primary"===e||"secondary"===e||"tertiary"===e?a.base:{}}(e);return Object.assign({},t,a[e])}function l(e){return e.href?function(e){return Object(r.computed)((()=>({tag:"a",href:e.disabled?null:e.href})))}(e):e.to?function(e){return Object(r.computed)((()=>({tag:"router-link",to:e.to})))}(e):function(e){return Object(r.computed)((()=>({tag:"button",type:e.type||"button"})))}(e)}function c(e,t){return s(e)}},564:function(e,t,n){"use strict";n.d(t,"o",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return g})),n.d(t,"i",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return w})),n.d(t,"n",(function(){return x})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return k})),n.d(t,"h",(function(){return j})),n.d(t,"e",(function(){return _}));var r=n(642),i=n(1),o=n(6);const a={startWithProtocol:["^","(?:(?:(?:https?):)?\\/\\/)"],makeProtocolOptional:["?"],continue:["(?:\\S+(?::\\S*)?@)?","(?:","(?!(?:10|127)(?:\\.\\d{1,3}){3})","(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})","(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})","(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])","(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}","(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))","|","(?:","(?:","[a-z0-9\\p{L}]","[a-z0-9\\p{L}-]{0,62}",")?","[a-z0-9\\p{L}]\\.",")+","(?:[a-z\\p{L}]{2,}\\.?)",")","(?::\\d{2,5})?","(?:[/?#]\\S*)?","$"]};var s=n(5),l=n(579);const c=function(e,t,n,i){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"value";return r.b.withParams({type:t,validationData:{},field:e},(async t=>{if(a&&Object(r.d)(t))return!0;const l={remote:!0,messages:[],valid:!0};try{var c;l._data=await Object(o.b)({req:n,params:{field:e,[s]:t,validations:i}}).request,l.messages=null!==(c=l._data.validation)&&void 0!==c?c:[],l.valid=0===l.messages.length}catch(e){l.messages=e.validation,l.valid=!1}return l}))},u=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return c(e,"validRemoteField",i.md,n,t)},d=e=>r.b.withParams({type:"validRemoteFields",validationData:{},fields:e},(async()=>{const t={remote:!0,multiple:!0,messages:[],valid:!0};try{var n;t._data=await Object(o.b)({req:i.nd,params:{fields:e}}).request,t.messages=null!==(n=t._data.validation)&&void 0!==n?n:[],t.valid=0===t.messages.length}catch(e){t.messages=e.validation,t.valid=!1}return t})),p=(e,t,n)=>r.b.withParams({type:"betweenNumeric",validationData:Object.assign({min:e,max:t},n)},(n=>Object(r.a)(n)||n>=e&&n<=t)),h=(e,t,n)=>r.b.withParams({type:"betweenString",validationData:Object.assign({min:e,max:t},n)},(n=>Object(r.d)(n)||"string"==typeof n&&n.length>=e&&n.length<=t)),m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.b.withParams({type:"maxArray",validationData:Object.assign({max:e},t)},(t=>{const i=n?t.filter(n):t;return Object(r.c)(i)||Array.isArray(i)&&i.length<=e}))},f=(e,t)=>r.b.withParams({type:"maxString",validationData:Object.assign({max:e},t)},(t=>Object(r.d)(t)||"string"==typeof t&&t.length<=e)),g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.b.withParams({type:"minArray",validationData:Object.assign({min:e},t)},(t=>{const i=n?t.filter(n):t;return Object(r.c)(i)||Array.isArray(i)&&i.length>=e}))},v=(e,t)=>r.b.withParams({type:"minNumeric",validationData:Object.assign({min:e},t)},(t=>Object(r.a)(t)||"number"==typeof t&&t>=Object(s.unref)(e))),b=e=>r.b.withParams({type:"localNumeric",validationData:Object.assign({},e)},(e=>Object(r.a)(e)||/^[0-9,. ]+$/.test(e))),y=e=>r.b.withParams({type:"required",validationData:Object.assign({},e)},r.b.req),w=(e,t)=>r.b.withParams({type:"required",validationData:Object.assign({},t)},(t=>{let n=!1;if("function"==typeof e)n=e.call(void 0,t);else{const t=Object(s.unref)(e);n=t&&0!==t}return!n||r.b.req(t)})),x=(e,t)=>r.b.withParams({type:"url",validationData:Object.assign({},t)},(t=>Object(r.d)(t)||"string"==typeof t&&function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new RegExp(a.startWithProtocol.concat(e?a.makeProtocolOptional:[]).concat(a.continue).join(""),"iu")}(e).test(t))),O=e=>r.b.withParams({type:"sameOriginUrl",validationData:Object.assign({},e)},(e=>Object(r.d)(e)||"string"==typeof e&&new URL(e).origin===window.location.origin)),k=(e,t)=>r.b.withParams({type:"treeSelectRequiredWith",validationData:Object.assign({},t)},(t=>{const n=Object(l.a)(t);return!Object(s.unref)(e)||n.length>0})),j=(e,t)=>r.b.withParams({type:"minDatetime",validationData:Object.assign({minDate:e},t)},(t=>{var n;const i=null===(n=Object(s.unref)(e))||void 0===n?void 0:n.timestamp;return Object(r.a)(t.timestamp)||Object(r.a)(i)||t.timestamp>=i})),_=(e,t)=>r.b.withParams({type:"maxDatetime",validationData:Object.assign({maxDate:e},t)},(t=>{var n;const i=null===(n=Object(s.unref)(e))||void 0===n?void 0:n.timestamp;return Object(r.a)(t.timestamp)||t.timestamp<=i}))},566:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n(680),i=n.n(r);const o=e=>e.files&&e.files.length?i()(e.files):null,a=6144,s=e=>e.size>6291456,l=e=>{const t=new Image;return new Promise(((n,r)=>{t.addEventListener("load",(()=>{n({width:t.naturalWidth,height:t.naturalHeight})})),t.addEventListener("error",r),t.src=e}))}},567:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"j",(function(){return S})),n.d(t,"m",(function(){return _})),n.d(t,"e",(function(){return C})),n.d(t,"g",(function(){return $})),n.d(t,"f",(function(){return j})),n.d(t,"l",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return x})),n.d(t,"i",(function(){return I})),n.d(t,"k",(function(){return E}));var r=n(32),i=n.n(r),o=n(5),a=n(87),s=n(4),l=n(104),c=n(616),u=n(6),d=n(611),p=n(513),h=n(1),m=n(21),f=n(653);const g=["wysiwyg"];function v(){const e=S(),t=Object(p.b)(),n=Object(o.ref)(!!e.value.threadId||function(e){return e.type===h.Ab.Deal&&Boolean(e.link||e.title||e.price||e.scheduledReleaseDate.date||e.endDate.date)}(e.value));return Object(m.j)(["thread_created_location"]),{isFullForm:n,showFullForm:function(){n.value=!0,t.replace({query:Object.assign({},t.currentRoute.query),hash:"#thread-details"})}}}const b=()=>{const e=S(),t=Object(o.ref)(null);Object(o.onUnmounted)((()=>{y().value.destroy()}));const{submitForm:n,validationMessages:r}=w({form:t,route:Object(p.a)()});return{form:t,thread:e,formOptions:j(),submitForm:n,validationMessages:r}},y=()=>Object(o.computed)((()=>l.b.create("threadSubmit"))),w=e=>{let{form:t,route:n}=e;const r=Object(o.ref)([]);return{submitForm:async function(){const e=y();if(e.value.isLoading())return;let i=null;try{var a;await Object(d.a)(),e.value.reset(),e.value.add(new Promise((e=>{i=e}))),t&&t.value.updateShortcodes();const l=j(),p=(e=>{const t={threadCreatedLocation:{name:"thread_created_location",data:e.query.thread_created_location}};return Object(o.ref)(t)})(n),h=S();h.value.isLocal&&(h.value.dispatchedFrom=null);const m="thread-desc-".concat(null!==(a=h.value.threadId)&&void 0!==a?a:"new"),g=Object(u.b)({req:c.e,params:{threadData:h.value,mentions:l.wysiwyg.plugins.mentions,morph:"threads.switch"===n.name,token:s.a.state.threadForm.token,ocular:p.value.threadCreatedLocation.data?p.value:null}}),v=await e.value.add(g.request),{thread:b,validation:y,responseMessages:w=[]}=x(v);if(r.value=y,!b)return i(),{responseMessages:w};Object(f.a)(m),window.onbeforeunload=()=>null,window.onunload=()=>null,window.location.href=null==b?void 0:b.url}catch(t){var l;console.error(t),null===(l=i)||void 0===l||l();const{validation:n,responseMessages:o}=x(t);return r.value=n,e.value.reset(),{responseMessages:o}}},validationMessages:r}};function x(e){if(e.errors&&e.errors.length)return{thread:null,validation:[],responseMessages:[]};const{messages:t}=e,{thread:n,validation:r}=e.persistThread||{};if(r&&r.length)return{thread:null,validation:r,responseMessages:[]};return(null!=t?t:[]).some((e=>"error"===e.type))?{thread:null,validation:[],responseMessages:t}:{thread:n,validation:[],responseMessages:t}}const O=async(e,t)=>{var n;const{submitForm:r,validationMessages:i}=w({route:e}),{responseMessages:o}=null!==(n=await r())&&void 0!==n?n:{};s.a.dispatch("pageMsgs/set",o),Object(c.d)(t,i.value)},k=()=>{const e=new URLSearchParams(window.location.search).get("imageurl");e&&s.a.dispatch("threadForm/addGalleryImages",[{remoteUrl:e}])},j=()=>{const e=Object(a.d)({countries:{namespace:"threadForm",path:"countries"},groups:{namespace:"threadForm",path:"groups"},locations:{namespace:"threadForm",path:"locations"},events:{namespace:"threadForm",path:"events"}});return e.wysiwyg={plugins:_()},e},_=()=>{const e=Object(a.d)({mentions:{namespace:"threadForm",path:"mentions"},shortcodes:{namespace:"threadForm",path:"thread.shortcodes"}});return e.link={href:"",content:""},e.emoji=!0,e},C=()=>{const e=j(),t=S();return Object(o.computed)((()=>{var n;const r=s.a.state.threadForm.features||{},{wysiwyg:o={}}=r,a=i()(r,g),l=o.html&&(!t.value.threadId||(null===(n=t.value.user)||void 0===n?void 0:n.userId)===s.a.getters["auth/me"].userId);return Object.assign({},a,{wysiwyg:Object.assign({},o,{html:l}),dispatchedFrom:a.dispatchedFrom&&e.countries.length,locations:a.locations&&!!e.locations.id,events:a.events&&e.events.length,groups:a.groups&&e.groups.length})}))},$=e=>{const t=j();return Object(o.computed)((()=>({groups:t.groups,max:e})))},S=()=>{const{thread:e}=Object(a.d)({thread:{namespace:"threadForm",path:"thread",deep:!0}});return Object(o.ref)(e)},I=e=>{const t=S(),n=Object(o.watch)(t,(r=>{r&&(window.onbeforeunload=()=>"Es gibt noch nicht gespeicherte Änderungen!",((e,t)=>{const n=t?"MultiStep":"SinglePage",r=["THREAD_SUBMISSION"],i=[h.Ab.Deal].includes(e.value.type)?"".concat(n).concat(e.value.type,"Abandoned"):null;window.onunload=()=>{i&&r.includes(h.q[i])&&e.value.link&&!e.value.threadId&&(localStorage.setItem("formAbandoned",h.q[i]),localStorage.setItem("formAbandonedTimer",String(Date.now())))}})(t,e),n())}),{deep:!0})},E=()=>{const t=S(),n=Object(o.computed)((()=>t.value.locations.checked));return Object(o.computed)((()=>{if(!t.value.isLocal)return null;if(n.value)return"Ort";if(!t.value.locations||!t.value.locations.items)return null;const r=t.value.locations.items.filter((e=>e.checked)),i=t.value.locations.items.reduce(((e,t)=>(t.items&&!t.checked&&e.push(...t.items.filter((e=>e.checked))),e)),[]);return[r.length?e("{1} :count Region| {2}:count Regionen|[3,*] :count Regionen",{count:r.length}):"",i.length?e("{1} :count Standort|{2} :count Standorte|[3,*] :count Standorte",{count:i.length}):""].filter((e=>e)).join(" / ")}))}}).call(this,n(70).translation)},569:function(e,t,n){"use strict";var r=n(5),i=n(16);r.default.directive("click-outside",{bind(e,t,n){const r=n.context,{handler:o,isActive:a}=function(e){const t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,isActive:!(!1===e.isActive)}}(t.value);a&&(e.clickOutsideEvent=function(t){Object(i.b)(e,t.target)&&o.call(r,t)},document.body.addEventListener("mousedown",e.clickOutsideEvent))},unbind(e){document.body.removeEventListener("mousedown",e.clickOutsideEvent)}})},577:function(e,t,n){"use strict";n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"h",(function(){return b})),n.d(t,"b",(function(){return y}));var r,i=n(134),o=n.n(i),a=n(8),s=n.n(a),l=n(20),c=n(6),u=n(1);const d={getSuggestions:"/search/users",getProfile:(e,t)=>Object(l.b)(r||(r=o()(["/profile/","/","?"])),e,t),profileRedirect:"/profile/prg",postSocialTerms:e=>"user/social/provider/".concat(e,"/terms")},p=(e,t,n)=>s.a.post(d.postSocialTerms(e),{username:n,termsConditionsAndPrivacy:t?"on":"off"}),h=e=>Object(c.a)({req:u.kd,params:{id:e}}).then((e=>{let{user:t}=e;return(null==t?void 0:t.lastAddress)||null})),m=()=>Object(c.a)({req:u.oc}).then((e=>e.infractions)),f=(e,t)=>Object(c.a)({req:u.nc,params:{typeId:e,placeholder:t}}).then((e=>e.infraction)),g=e=>Object(c.a)({req:u.jd,params:{id:e}}).then((e=>e.user.infractions.points.active)),v=e=>Object(c.a)({req:u.mc,params:{infraction:e}}),b=()=>Object(c.a)({req:u.Oc}).then((e=>e.resentEmailConfirmationToCurrentUser.result)),y=(e,t)=>Object(c.a)({req:u.fc,params:{userId:e,follow:t}}).then((e=>{let{followUser:t}=e;return t.follow}))},579:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>{const t=[];return function e(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!n)return;if(n.checked)return void t.push(n.id);if(!n.items)return;n.items.map(e)}(e),t}},587:function(e,t,n){"use strict";var r=n(676),i=n.n(r);const o={default:()=>n.e(203).then(n.bind(null,1272)),soft:()=>n.e(208).then(n.bind(null,1273)),admin:()=>n.e(202).then(n.bind(null,1271))};var a={components:o,inheritAttrs:!1,model:{event:"update"},props:{value:{type:Array,default:()=>[]},target:{type:String,default:""}},computed:{groupedNotifications(){return i()(this.notifications,(e=>e.context||"default"))},notificatonsByContext(){return e=this.groupedNotifications,Object.keys(e).map((t=>({context:t,messages:e[t]})));var e},notifications:{get(){return this.value},set(e){this.$emit("update",e)}}},methods:{contextComponent:e=>(e=e.replace(":",""))in o?e:"default",updateNotifications(e,t){var n;this.groupedNotifications[e]=t,this.notifications=(n=this.groupedNotifications,[].concat(...Object.values(n)))}}},s=n(44),l={components:{NotificationMessages:Object(s.a)(a,(function(){var e=this,t=e._self._c;return t("div",e._l(e.notificatonsByContext,(function(n){return t(e.contextComponent(n.context),{key:n.context,tag:"Component",attrs:{messages:n.messages},on:{"update-messages":function(t){return e.updateNotifications(n.context,t)}}})})),1)}),[],!1,null,null,null).exports},computed:{notifications:{get(){return this.$store.state.pageMsgs.messages},set(e){return this.$store.dispatch("pageMsgs/set",e)}}}},c=Object(s.a)(l,(function(){var e=this;return(0,e._self._c)("NotificationMessages",{model:{value:e.notifications,callback:function(t){e.notifications=t},expression:"notifications"}})}),[],!1,null,null,null);t.a=c.exports},589:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return w}));var r=n(32),i=n.n(r),o=n(10),a=n.n(o),s=n(11),l=n.n(s),c=n(5);n(667);const u=(e,t)=>{const n=Object.assign({},t.validationData,{attribute:t.attribute});return e.replace(/:(\w+)/gi,(e=>n[e.substring(1)]||""))},d=(e,t)=>{const{translation:n}=t.validationData;return u(n||h[e]||m[e],t)},p="Das Datum und die Uhrzeit sind erforderlich oder das Format ist falsch.",h={},m={accepted:"Dieses Feld muss akzeptiert werden.",alpha:"Nur Buchstaben sind erlaubt.",alphaDash:"Buchstaben, Zahlen und Striche sind erlaubt.",alphaNum:"Buchstaben und Zahlen sind erlaubt.",array:"Nur arrays sind erlaubt.",betweenArray:"Muss aus ziwschen :min und :max Einzelteilen bestehen.",betweenNumeric:"Muss zwischen :min und :max liegen.",betweenString:"Muss mindestens :min und maximal :max Zeichen lang sein.",different:"Muss sich von :other unterschieden.",digits:"Muss as :digits Zeichen bestehen.",digitsBetween:"Muss zwischen :min und :max Zeichen liegen.",email:"Bitte gib eine gültige E-Mail-Adresse an.",inArray:"Deine Auswahl ist ungültig.",integer:"Nur ganze Zahlen sind erlaubt.",maxArray:"Maximal :max Elemente sind erlaubt.",maxNumeric:"Nichts größer als :max ist erlaubt.",maxString:"Maximal :max Zeichen sind erlaubt.",maxFile:"Nichts größer als :max Kilobytes ist erlaubt.",minArray:"Muss mindestens :min Elemente besitzen.",minNumeric:"Muss mindestens :min groß sein.",minString:"Muss aus mindestens :min Zeichen bestehen.",notInArray:"Deine Auswahl ist ungültig.",numeric:"Muss eine Zahl sein.",localNumeric:"Nur Zahlen, Kommata und Punkte sind erlaubt.",regex:"Das Format ist ungültig.",required:"Ups, hast du wohl vergessen auszufüllen.",same:"Dieses Feld und :other müssen übereinstimmen.",sizeArray:"Muss :size Elemente enthalten.",sizeNumeric:"Muss :size sein.",sizeString:"Muss :size Zeichen lang sein.",url:"Das Format ist ungültig.",sameOriginUrl:"Der Link muss von Preisjäger stammen.",minDatetime:p,maxDatetime:p},f=["valid","remote","multiple","messages"],g=e=>e.reduce(((e,t)=>[...e,...t.translations.map((e=>{let{body:t}=e;return{text:t}}))]),[]),v=(e,t)=>t.reduce(((e,t)=>{const n=e[t.path]||[];return e[t.path]=[...n,...t.translations.map((e=>{let{body:t}=e;return{text:t}}))],e}),e);let b=function(){function e(t){a()(this,e),this._validators={},this.error={},this.anyError=!1,this.messages={},this.check=this.check.bind(this),this.clear=this.clear.bind(this),this.invalid=this.invalid.bind(this),this.validate=this.validate.bind(this),this.resolve={},this.setup(t)}return l()(e,[{key:"setup",value:function(e){Object.keys(this._validators).forEach((t=>{t in e||(delete this._validators[t],delete this.error[t],delete this.messages[t])}));for(const[t,n]of Object.entries(e))this.set(t,n),t in this.messages||this.clear(t);this.check()}},{key:"destroy",value:function(){this.resolve={}}},{key:"errors",value:function(e){return this.messages[e]||[]}},{key:"invalid",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.error[e]:Object.keys(this.messages).some(this.invalid)}},{key:"clear",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)return c.default.set(this.error,e,!1),void c.default.set(this.messages,e,[]);Object.keys(this.messages).map(this.clear)}},{key:"add",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._validators[e]=t.reduce(((t,n)=>(t.indexOf(n)<0&&(t.push(n),this.clear(e)),t)),this._validators[e]||[])}},{key:"set",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._validators[e]=t}},{key:"check",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.error[e]=!!this.errors(e).length:this.anyError=!!Object.keys(this.messages).filter(this.check).length}},{key:"resolvePending",value:function(e){var t,n;null===(t=(n=this.resolve)[e])||void 0===t||t.call(n),delete this.resolve[e]}},{key:"hasValidator",value:function(e){return e in this._validators}},{key:"setMessages",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.hasValidator(e)&&(this.messages[e].splice(0,this.messages[e].length,...t),this.check())}},{key:"validate",value:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var r=arguments.length,o=new Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];this.clear(e),this.hasValidator(e)&&(this.resolvePending(e),await new Promise((async r=>{this.resolve[e]=r;for(const r of this._validators[e]){let a=await r(t,...o),{valid:s,remote:l,multiple:c,messages:p}=a,h=i()(a,f);if(!s){if(Array.isArray(p))l&&c?this.messages=v(this.messages,p):(p=l?g(p):p.map((e=>({text:e}))),this.messages[e].push(...p));else{const t=Object.assign({attribute:e},h);this.messages[e].push({text:n?u(n,t):d(h.type,t)})}break}}this.resolvePending(e)})),this.check(e))}}]),e}();const y={data(){return this.$options.validations&&c.default.util.defineReactive(this,"_validate",null),{}},beforeCreate(){const e=this.$options,t=e.validations;t&&(e.computed||(e.computed={}),e.computed.$validators||(e.computed.$validators="function"==typeof t?t:function(){return t},e.computed.$v||(e.computed.$v=function(){return null===this._validate&&(this._validate=new b("function"==typeof t?t.call(this):t),this.$once("hook:beforeDestroy",this.$watch("$validators",(e=>{this._validate.setup(e)})))),this._validate?this._validate:null})))},beforeDestroy(){this._validate&&(this._validate.destroy(),this._validate=null)},provide(){return{$v:this.$v}}},w=e=>{if(!e)return;const t=Object(c.ref)(new b(e));return Object(c.provide)("$v",t.value),Object(c.onBeforeUnmount)((()=>{t.value.destroy(),t.value=null})),t}},597:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return{params:Object.keys(e).reduce(((n,r)=>(t.push(r),n[r]=JSON.stringify(e[r]),n)),{}),handlers:t.join(" ")}};t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{computed:{$d(){return r(Object.assign({},e,this.$directives||{}))}}}}},610:function(e,t,n){"use strict";t.a=window.RedactorPlugins||(window.RedactorPlugins={})},611:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(4),i=n(1),o=n(682),a=n(60),s=n(17),l=n(324);const c=e=>e.groups.some((e=>e.source===a.b)),u=n.n(l)()((async e=>await Object(i.Nb)({filter:e})),(e=>{var t,n;return"".concat(e.terms.join("_"),"_").concat(null!==(t=null===(n=e.price)||void 0===n?void 0:n.eq)&&void 0!==t?t:"")})),d=async()=>{if(!r.a.getters["threadForm/canAutoAssignGroups"])return;const e=r.a.state.threadForm.thread;if(![s.f,s.g].includes(e.type))try{var t;const n=r.a.state.threadForm.groups,i=null!==(t=r.a.state.threadForm.fetchedFromUrl.title)&&void 0!==t?t:"",l={threadId:{eq:e.threadId},threadUrl:{eq:e.link},threadTypeName:{eq:e.type},terms:[e.title,i]};null!==e.price&&void 0!==e.price&&""!==e.price&&(l.price={eq:e.price});const{data:{groups:d}}=await u(l),p=e.type===s.e;if(d.length<1)return r.a.commit("threadForm/UPDATE_FIELD",{path:"thread.groups",value:e.groups.filter((e=>!e.assignedBySystem))}),void r.a.commit("threadForm/UPDATE_FIELD",{path:"groups",value:n.filter((e=>Object(o.g)(e,p)!==a.a||!e.assignedBySystem)).map((e=>Object.assign({},e,{matchesAutoAssignment:!1})))});if(c(e)&&!p||c(e)&&(e=>e.groups.some((e=>e.source===a.c)))(e))return;const h=d.map((e=>Object.assign({},e,{assignedBySystem:!0}))),m=h.reduce(((e,t)=>(e.primary||Object(o.g)(t,p)!==a.b||(e.groups.push(t),e.primary=!0),e.secondary||Object(o.g)(t,p)!==a.c||(e.groups.push(t),e.secondary=!0),Object(o.g)(t)===a.a&&e.groups.push(t),e)),{primary:!1,secondary:!1,groups:[]}),f=[...n.filter((e=>!h.some((t=>t.threadGroupId===e.threadGroupId)))).map((e=>Object.assign({},e,{matchesAutoAssignment:!1}))),...h.filter((e=>Object(o.g)(e,p)!==a.a)).map((e=>Object.assign({},e,{matchesAutoAssignment:!0})))],g=[...e.groups.filter((e=>!e.assignedBySystem)),...m.groups];r.a.commit("threadForm/UPDATE_FIELD",{path:"groups",value:f}),r.a.commit("threadForm/UPDATE_FIELD",{path:"thread.groups",value:g})}catch(e){}},p=e=>{const{cpcLink:t,claimCodeCampaignId:n,isExclusive:i,nsfw:o,scheduledReleaseDate:a,events:l,disclaimers:c,uploadImage:u}=r.a.state.threadForm.features,d=t||n||i||o||a||l||c;return e.type===s.e?d||u:d}},616:function(e,t,n){"use strict";n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return k}));var r=n(32),i=n.n(r),o=n(1),a=n(642),s=n(753);var l=n(107),c=n(6),u=n(120),d=n(724),p=n(17);const h=["merchant","morphsTo","user","shippingPrice","freeShipping","events","groups","images","imageSuggestions","mainImage","galleryImages","disclaimers","titleSlug","threadTypeId","preparedHtmlDescription"],m=["isSelected","source","matchesAutoAssignment"],f=["checked"],g=(e,t)=>{let{mentions:n,morph:r}=t;const{merchant:{merchantId:o,merchantName:c}={},shippingPrice:u,freeShipping:d,events:g,groups:v,galleryImages:b,disclaimers:y}=e,w=i()(e,h);switch(w.mentions=n,r&&(w.morph=w.type),o&&(w.merchant={merchantId:o,merchantName:c}),w.groups=v.map((e=>i()(e,m))),w.events=g.map((e=>i()(e,f))),w.locations.id||delete w.locations,w.startDate.timestamp||(w.startDate=null),w.endDate.timestamp||(w.endDate=null),w.scheduledReleaseDate.timestamp||(w.scheduledReleaseDate=null),Object(a.a)(d)&&Object(a.a)(u)||(w.shipping={isFree:!!d,price:u||0}),[p.o,p.a,p.g].includes(w.type)?((w.type===p.a&&!w.price&&!Object(s.b)(w.price)||[p.o,p.g].includes(w.type)&&Object(s.a)(w.price))&&(w.price=""),w.percentage||(w.percentage=0)):(delete w.price,delete w.percentage,delete w.isLocal),w.discountType){case p.c:delete w.price;break;case p.d:delete w.percentage;break;case p.b:delete w.price,delete w.percentage}return w.type===p.a?w.nextBestPrice||(w.nextBestPrice=0):w.nextBestPrice||delete w.nextBestPrice,w.disclaimers=y.map((e=>{let{threadDisclaimerId:t}=e;return{threadDisclaimerId:t}})),Object.assign({},w,"locations"in w&&{locations:(x=w.locations,"1"===x.id&&x.checked&&delete x.items,x)},{galleryImages:{bucket:"threads",slots:b.map((e=>{const t={remoteUrl:e.remoteUrl||"",slotData:null};return e.remoteUrl||(t.slotData=Object(l.d)(e)?Object.assign({},e.slots[0]):Object.assign({},e)),t}))}});var x},v=function(){let{threadData:e,mentions:t="",morph:n=!1,token:r=null,ocular:i=null,descriptionEditOnly:a=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.Ac)({payload:{thread:g(e,{mentions:t,morph:n}),token:r,ocular:i,descriptionEditOnly:a}})},b=e=>{const t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;if(Array.isArray(r)&&r.length){const e=r[0].translations[0];t.push({title:e.title,text:e.body,type:n})}})),t},y=async function(e){const t=await Object(d.f)(e);return{request:t.request.then(b),cancel:t.cancel}},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object(c.d)(Object(d.a)(e,t),11e3);return{request:n.request.then((e=>{var t;let{duplicates:n}=e;return null!=n&&null!==(t=n.threads)&&void 0!==t&&t.length?n:null})),cancel:n.cancel}},x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Object(c.d)(Object(d.b)(e,t,n),5e3);return{request:r.request.then((e=>{let{duplicates:t}=e;return null!=t&&t.length?t:[]})),cancel:r.cancel}},O=()=>Object(u.c)(),k=(e,t)=>{t.map((t=>{let n=t.path;return"threadLocationSelected"===n&&(n="locations"),e.setMessages(n,t.translations.map((e=>({text:e.body}))))}))}},628:function(e,t,n){},631:function(e,t,n){"use strict";var r=n(597),i=n(71),o={name:"WysiwygButton",components:{BaseButton:n(507).a},mixins:[Object(r.a)(),Object(i.a)({button:{any:!0,smAndDown:!0,mdAndDown:!0,lgAndDown:!0},text:{any:!0,smAndDown:!0,mdAndDown:!0,lgAndDown:!0}})],props:{action:{type:Object,default:()=>({})},target:{type:String,required:!0}},computed:{$directives(){return{"wysiwyg-button":Object.assign({},this.action,{target:this.target}),"popover-close":null}}}},a=n(44),s=Object(a.a)(o,(function(){var e=this,t=e._self._c;return t("BaseButton",{class:["space--mr-1",`button--${e.action.key}`],attrs:{variant:"tag",mode:"light",square:"",title:e.action.title,"data-handler":e.$d.handlers,"data-wysiwyg-button":e.$d.params["wysiwyg-button"]}},[t("BaseIcon",{attrs:{name:e.action.icon}})],1)}),[],!1,null,null,null);t.a=s.exports},637:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return v}));var r=n(749),i=n.n(r),o=n(107),a=n(1),s=n(521),l=n(566),c=n(4);const u=(e,t)=>{let{variation:n}=t;try{if(!e)return"";if(i()(e))return e;if(Object(o.d)(e))return Object(o.e)(e,e.slots[0].name,n);const t=[["re",300,300],["ft","jpg"],["qt",60]];return new s.a(e).apply(t).toString()}catch(e){}return null},d=e=>{try{return!(!e||i()(e))&&(Object(o.d)(e)?!!Object(o.f)(e,e.slots[0].name,{}).isPoorQuality:e.isPoorQuality)}catch(e){}return!1},p=async e=>{let{bucket:t,value:n,fileName:r}=e;return"string"==typeof n?await Object(a.hd)({url:n,bucket:t}):await Object(a.gd)({file:n,bucket:t,fileName:r})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["image/jpg","image/jpeg","image/png","image/gif","image/webp"];return(null==e?void 0:e.type)&&t.includes(e.type)};function m(e){c.a.dispatch("pageMsgs/set",[Object.assign({type:"error",priority:"low"},e)])}function f(){m({body:e("Nichts größer als :max Kilobytes ist erlaubt.",{replaces:{attribute:"image",max:l.d}})})}function g(t){m({body:e("{1} Die erlaubte Anzahl an Bildern liegt bei :max_allowed|{2} Die erlaubte Anzahl an Bildern liegt bei :max_allowed|[3,*] Die erlaubte Anzahl an Bildern liegt bei :max_allowed|",{replaces:{max_allowed:t},count:t})})}function v(e){m({title:"paste-local-file"===e?"Das Einfügen lokaler Bilder (aus der Zwischenablage) ist nicht möglich.":"Das Hineinziehen lokaler Bilder ist nicht möglich.",body:"Bitte verwende stattdessen den Upload-Button."})}}).call(this,n(70).translation)},642:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a}));n(315);const r={req:e=>{if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"==typeof e){for(let t in e)return!0;return!1}return!!String(e).length},withParams:(e,t)=>async function(){const n=await t(...arguments);return"object"==typeof n?e=Object.assign({},e,n):e.valid=n,e}},i=e=>null==e||""===e,o=e=>i(e)||""===e,a=e=>i(e)||Array.isArray(e)&&0===e.length},643:function(e,t,n){"use strict";(function(e){var r=n(5);t.a=Object(r.defineComponent)({__name:"character-counter",props:{value:null,maxCharacters:{default:140}},setup(t){const n=t,i=Object(r.computed)((()=>n.value.length>n.maxCharacters?"text--color-red":"")),o=Object(r.computed)((()=>n.maxCharacters-n.value.length)),a=Object(r.computed)((()=>e("1 character remaining|:count characters remaining",{replaces:{remaining:o.value},count:o.value})));return{__sfc:!0,props:n,textColor:i,remaining:o,remainingLabel:a}}})}).call(this,n(70).translation)},653:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(14);t.b={created(){this.markForRestore=this.markForRestore.bind(this),this.undoRestore=this.undoRestore.bind(this),this.clearRestore=this.clearRestore.bind(this),this.restoreStorage=new r.a("redactor-restore")},data:()=>({restoredContent:"",initialContent:"",restoreId:""}),watch:{restoredContent(e){this.$emit("canRestore",Boolean(e))}},methods:{restoreConfig(){return{markForRestore:this.markForRestore}},markForRestore(e){let{restoreId:t,restoredContent:n,initialContent:r}=e;this.restoreId=t,this.restoredContent=n||"",this.initialContent=r||""},undoRestore(){this.$editor.code.set(this.initialContent,!0),this.clearRestore()},clearRestore(){this.restoreStorage.del(this.restoreId),this.restoredContent=""}}};const i=e=>{new r.a("redactor-restore").del(e)}},666:function(e,t,n){"use strict";var r=n(538),i=n(519),o=n(517),a=n(524),s=n(512),l=n(520);t.a={components:{BaseModal:r.a,ModalHead:i.a,ModalBody:o.a,ModalFooter:a.a,ModalClose:s.a,ModalAsync:l.a}}},673:function(e,t,n){"use strict";var r=n(677),i=n.n(r);const o={angel:"Engel",annoyed:"Verärgert",blank:"Blank",cheeky:"Frech",confused:"Verwirrt",cool:"Cool",creep:"Widerlich",cry:"Weinen",devil:"Teufel",embarrassed:"Peinlich",excited:"Begeistert",fierce:"Grimmig",flirt:"Flirten",football:"Fußball",happy:"Glücklich",highfive:"High Five",horror:"Erschrocken",kitty:"Kitty",laugh:"Lachen",lipstick:"Lippenstift",lol:"Lustig",love:"Liebe",lucha:"",mad:"Böse",nerd:"Nerd",ninja:"Ninja",nutella:"Nutella",onion:"",party:"Party",pirate:"Pirat",police:"",poo:"Mist",popcorn:"Popcorn",rainbow:"Regenbogen",relieved:"Erleichtert",sad:"Traurig",shock:"Schock",sir:"Sir",skeptical:"Skeptisch",smiley:"Smiley",strong:"Stark",superfunny:"Lustig",thumb:"Daumen hoch",tongue:"Zunge",unicorn:"Einhorn",wink:"Zwinkern",woot:"Wie bitte?",worldcup:"WM",worried:"Besorgt",zombie:"Zombie"};t.a=Object.freeze(Object.keys(i.a).map((e=>Object.assign({name:e,label:o[e]},i.a[e]))))},677:function(e,t,n){e.exports=n(678)},678:function(e,t,n){const r=n(679);e.exports=Object.assign(r,{excited:{text:"(excited)",availableIn:["emoticon-popover"],order:15},flirt:{text:"(flirt)",availableIn:["emoticon-popover"],order:27},football:{text:"(football)",availableIn:[],order:47},lipstick:{text:"(lipstick)",availableIn:["emoticon-popover"],order:45},strong:{text:"(strong)",availableIn:["emoticon-popover"],order:44},unicorn:{text:"(unicorn)",availableIn:["emoticon-popover"],order:25},worldcup:{text:"(worldcup)",availableIn:[],order:46}})},679:function(e,t){e.exports={angel:{text:"(angel)",availableIn:["emoticon-popover"],order:10},annoyed:{text:"(annoyed)",availableIn:["emoticon-popover"],order:31},blank:{text:":|",availableIn:["emoticon-popover"],order:28},cheeky:{text:"(cheeky)",availableIn:["emoticon-popover"],order:12},confused:{text:"(confused)",availableIn:["emoticon-popover"],order:29},cool:{text:"8)",availableIn:["emoticon-popover"],order:19},cry:{text:";(",availableIn:["emoticon-popover"],order:38},devil:{text:"(devil)",availableIn:["emoticon-popover"],order:42},embarrassed:{text:"(embarrassed)",availableIn:["emoticon-popover"],order:13},fierce:{text:"(fierce)",availableIn:["emoticon-popover"],order:34},happy:{text:":D",availableIn:["emoticon-popover"],order:3},highfive:{text:"(highfive)",availableIn:["emoticon-popover"],order:18},horror:{text:"(horror)",availableIn:["emoticon-popover"],order:36},kitty:{text:":3",availableIn:["emoticon-popover"],order:43},laugh:{text:"XD",availableIn:["emoticon-popover"],order:5},lol:{text:"(lol)",availableIn:["emoticon-popover"],order:6},love:{text:"<3",availableIn:["emoticon-popover"],order:14},mad:{text:"(mad)",availableIn:["emoticon-popover"],order:33},nerd:{text:"(nerd)",availableIn:["emoticon-popover"],order:21},ninja:{text:"(ninja)",availableIn:["emoticon-popover"],order:22},party:{text:"(party)",availableIn:["emoticon-popover"],order:16},pirate:{text:"(pirate)",availableIn:["emoticon-popover"],order:24},poo:{text:"(poo)",availableIn:["emoticon-popover"],order:41},popcorn:{text:"(popcorn)",availableIn:["emoticon-popover"],order:7},relieved:{text:"(:I",availableIn:["emoticon-popover"],order:9},sad:{text:":(",availableIn:["emoticon-popover"],order:32},shock:{text:"(shock)",availableIn:["emoticon-popover"],order:35},sir:{text:":{",availableIn:["emoticon-popover"],order:20},skeptical:{text:"(skeptical)",availableIn:["emoticon-popover"],order:30},smiley:{text:":)",availableIn:["emoticon-popover"],order:1},thumb:{text:"(y)",availableIn:["emoticon-popover"],order:2},tongue:{text:":p",availableIn:["emoticon-popover"],order:17},wink:{text:";)",availableIn:["emoticon-popover"],order:11},woot:{text:":o",availableIn:["emoticon-popover"],order:39},worried:{text:":S",availableIn:["emoticon-popover"],order:37},zombie:{text:"(zombie)",availableIn:["emoticon-popover"],order:47}}},680:function(e,t,n){e.exports=n(681)},681:function(e,t){e.exports=function(e){return e&&e.length?e[0]:void 0}},682:function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return m}));var r=n(60),i=n(17),o=n(564);const a=function(e){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.isDefault&&e.isDiscussion:e.isDefault&&!e.isDiscussion)},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.source?e.source:a(e,t)?"primary":e.isDefault&&t?"secondary":e.isDefault?"tertiary":"other"},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((e=>Object.assign({},e,{source:s(e,t)})))},c=e=>!!e.isSelected,u=e=>!(!e.assignedBySystem||!e.matchesAutoAssignment),d=(e,t)=>{const n=[...t],r=n.findIndex((t=>t.threadGroupId===e.threadGroupId));return r>-1&&n.splice(r,1),c(e)&&n.push(e),n},p=(e,t,n)=>{const i=((e,t)=>{const n=e.find((e=>e.threadGroupId===t.id));return n?(n.isSelected=t.isSelected,n.source=n.source||r.a,n):null})(t,n);return i?d(i,e):null},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n={threadGroups:[],systemAssignedGroups:[]},r=e===i.e,s=r?"discussionThreadGroups":"threadGroups",l=e=>a(e,r);return r&&(n.discussionThreadGroups=[]),n[s].push(Object(o.j)({translation:"Bitte wähle eine passende Kategorie"}),Object(o.g)(1,{},l)),t&&n[s].push(Object(o.d)(t,{},l)),n};function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"groups";const n=Object.assign({},e);return Object.keys(n).forEach((e=>{n[e]={fieldName:t,rules:n[e]}})),n}},698:function(e,t,n){"use strict";n(628)},699:function(e,t,n){"use strict";t.a={methods:{preserveSelection(){const e=this.$editor;e&&!e.isSelectionStored&&(e.selection.save(),e.isSelectionStored=!0,e.$editor.one("focusin",(()=>{e.selection.restore(),e.isSelectionStored=!1})))}}}},700:function(e,t,n){"use strict";var r=n(0),i=n.n(r),o=n(106);t.a={created(){this.registerHandler("link","handleLink"),this.registerWriter("updateLink","updateLink"),this.registerWriter("removeLink","removeLink")},methods:{captureLinkSelection(){if(!this.$editor)return{href:"",content:""};const e=this.$editor.utils.isCurrentOrParent("A"),t=e?e.href:"",n=e?e.innerHTML:this.$editor.selection.getHtml()||this.$editor.selection.getCurrent().innerHTML;return{href:t,content:n?Object(o.c)(n):""}},handleLink(e){if(!this.pluginEnabled("link"))return;const{href:t,content:n}=e;void 0!==t&&(this.plugins.link.href=t),void 0!==n&&(this.plugins.link.content=n)},updateLink(e){let{href:t,content:n}=e;if(!this.$editor)return;this.$editor.$editor.focus(),n||(n=this.$editor.selection.getHtml()||this.$editor.selection.getCurrent().innerHTML||t);let r=this.$editor.utils.isCurrentOrParent("A");this.$editor.buffer.set(),r||(r=this.$editor.insert.node(document.createElement("a"))),r&&(r.href=/^https?:\/\//.test(t)?t:"https://"+t,r.innerHTML=n,r.target="_blank"),this.$editor.code.sync()},updateLinkSelection(){"link"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)&&this.handleLink(this.captureLinkSelection())},removeLink(){if(!this.$editor)return;this.$editor.$editor.focus();const e=this.$editor.utils.isCurrentOrParent("A");e&&(this.$editor.buffer.set(),i()(e).replaceWith(i()(e).contents()),this.$editor.code.sync())}}}},701:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e.vue)return e.vue(t)}},702:function(e,t,n){"use strict";var r=n(10),i=n.n(r),o=n(11),a=n.n(o),s=n(0),l=n.n(s),c=n(610),u=n(106),d=n(52);const p={};c.a.shortcode=function(){return{instance:null,init:function(){this.shortcode.instance=new p.Shortcode(this)}}},p.Shortcode=function(){function e(t){i()(this,e);const n=this;let r;n.redactor=t,n.namespace=t.opts.shortcodeNamespace,"function"==typeof t.opts.markForShortcodes?t.opts.markForShortcodes(n.updateForm.bind(n)):(n.$form=l()(t.$element[0].form),n.$form.on("submit",n.updateForm.bind(n))),r=n.readForm(),n.types={},t.replacer.add({regexp:/\[shortcode id="([^"]+)"\/]/g,replacer:function(e,t,i,o){return n.html(r[o])}}),t.code.syncTransformers.push((function(e){return e.find("[data-embed]").each((function(){const e=l()(this);e.replaceWith(n.marker(e.data("embed")))})),e})),t.$editor.on("click","[data-embed]",(function(){const e=l()(this),r=n.data(e),i=n.getType(r);i.onClick&&i.onClick(r,e,t)}))}return a()(e,[{key:"readForm",value:function(){return this.redactor.opts.formatShortcodes?this.redactor.opts.formatShortcodes():this.$form.find('input[name^="'+this.namespace+'["]').get().reduce((function(e,t){return d.a.inputToJson(t.name,t.value,e)}),{})[this.namespace]||{}}},{key:"updateForm",value:function(){const e=this.embeds().get().map((function(e){return this.data(l()(e))}),this);if(this.redactor.opts.vue)return e;this.$form.find('input[name^="'+this.namespace+'["]').remove(),e.length&&this.$form.append(e.reduce(function(e,t){return e.concat(d.a.jsonToInputs(t,[],this.namespace+"["+t.id+"]"))}.bind(this),[]))}},{key:"registerType",value:function(e){this.types[e.name]=e}},{key:"getType",value:function(e){return e&&this.types[e.type]||null}},{key:"add",value:function(e){return e.id="new".concat(Date.now()),l()(this.redactor.insert.node(l()(this.html(e))))}},{key:"set",value:function(e){this.embed(e.id).replaceWith(this.html(e)),this.redactor.replacer.format("shortcode"),this.redactor.code.sync()}},{key:"del",value:function(e){this.embed(e).remove(),this.redactor.code.sync()}},{key:"marker",value:function(e){return'[shortcode id="'+e+'"/]'}},{key:"html",value:function(e){const t=this.getType(e);return t?t.html(this.redactor,l.a.extend({attr:' data-embed="'+e.id+'" data-embed-obj="'+u.a.escapeHtml(JSON.stringify(e))+'" contenteditable="false"'},e)):""}},{key:"embed",value:function(e){return this.redactor.$editor.find('[data-embed="'+e+'"]')}},{key:"embeds",value:function(){return this.redactor.$editor.find("[data-embed]")}},{key:"data",value:function(e){return e.data("embed-obj")}}]),e}(),p.find=function(e){const t=l()('[data-embed="'+e+'"]').closest(".redactor").find("textarea").data("redactor");return t?t.shortcode.instance:null},p.isChild=function(e){return Boolean(l()(e).closest("[data-embed]").length)},t.a=p},704:function(e,t,n){"use strict";var r=n(673),i={props:{filter:{type:String,default:"emoticon-popover"},mode:{type:String,default:"default"}},data:()=>({emojis:r.a,selected:null}),computed:{availableEmojis(){return this.emojis.filter((e=>e.availableIn.includes(this.filter))).sort(((e,t)=>e.order-t.order))}},methods:{emojiType:e=>"emoji--type-".concat(e.name),preview(e){this.selected=e,this.$emit("preview",{emoji:"&nbsp;".concat(e.text,"&nbsp;")})},insert(e,t){t.stopImmediatePropagation(),t.preventDefault(),this.$emit("insert",{emoji:"&nbsp;".concat(e.text,"&nbsp;"),event:t})}}},o=(n(698),n(44)),a=Object(o.a)(i,(function(){var e=this,t=e._self._c;return t("div",[t("ul",{staticClass:"emojiSelector-list cGrid boxAlign-jc--all-sb"},e._l(e.availableEmojis,(function(n){return t("li",{key:n.name,staticClass:"box--all-i hAlign--all-c"},[t("button",{staticClass:"button button--emoji button--shape-circle button--square space--h-1 space--v-1",class:{"button--selected":n===e.selected},attrs:{type:"button",title:n.text},on:{mouseenter:function(t){return e.preview(n)},touchstart:function(t){return e.insert(n,t)},click:function(t){return e.insert(n,t)}}},[t("span",{class:["emoji",e.emojiType(n)]})])])})),0)])}),[],!1,null,null,null);t.a=a.exports},705:function(e,t,n){"use strict";var r=n(564),i=n(509),o=n(589),a={components:{BaseButton:n(507).a,FormList:i.l,FormRow:i.o,FormLabel:i.k,FormMessageList:i.m,FormContent:i.c,FormInput:i.e},mixins:[o.b],model:{event:"update",prop:"link"},props:{id:{type:String,default:"insertLink"},link:{type:Object,default:()=>({href:"",content:""})},i18n:{type:Object,default:()=>({insertButtonText:"Einfügen",updateButtonText:"Updaten",unlinkButtonText:"Entfernen",urlLabel:"URL",contentLabel:"Text"})},mode:{type:String,default:"default"}},data(){return{linkUrl:this.link.href,formName:this.id,updating:!!this.link.href}},computed:{buttonDisabled(){return!this.linkUrl.length}},watch:{"$v.$invalid"(e){this.$emit("invalid",e)}},validations:{href:[Object(r.j)(),Object(r.n)()]},methods:{setLinkUrl(e){this.linkUrl=e},remove(e){this.$emit("remove",{event:e})},insert(e){this.$v.$invalid||this.$emit("insert",{link:this.link,event:e})}}},s=n(44),l=Object(s.a)(a,(function(){var e=this,t=e._self._c;return t("div",{},[e.$v.error[e.id]?t("FormMessageList",{staticClass:"text--b space--b-2",attrs:{messages:e.$v.messages[e.id]}}):e._e(),t("FormList",[t("FormRow",{attrs:{error:e.$v.error.href}},[t("FormLabel",[e._v(e._s(e.i18n.urlLabel))]),t("FormContent",[t("FormInput",{attrs:{name:"href"},on:{change:function(t){return e.$v.validate("href",e.link.href)},update:function(t){return e.setLinkUrl(e.link.href)}},model:{value:e.link.href,callback:function(t){e.$set(e.link,"href",t)},expression:"link.href"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.href}})],1)],1),t("FormRow",{attrs:{error:e.$v.error.content}},[t("FormLabel",[e._v(e._s(e.i18n.contentLabel))]),t("FormContent",[t("FormInput",{attrs:{name:"content"},model:{value:e.link.content,callback:function(t){e.$set(e.link,"content",t)},expression:"link.content"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.content}})],1)],1),t("FormRow",[t("FormContent",{staticClass:"flex",class:{"boxAlign-jc--all-sb":e.updating}},[e.updating?t("BaseButton",{staticClass:"flex--shrink-0 space--mr-2",attrs:{variant:"tertiary",mode:"default"},on:{click:e.remove}},[e._v(" "+e._s(e.i18n.unlinkButtonText)+" ")]):e._e(),t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:e.buttonDisabled},on:{click:e.insert}},[e._v(" "+e._s(e.updating?e.i18n.updateButtonText:e.i18n.insertButtonText)+" ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=l.exports},707:function(e,t,n){"use strict";var r=n(516),i=n(631),o=n(704),a=n(705),s=n(564),l=n(509),c=n(589),u=n(507),d={components:{BaseButton:u.a,FormList:l.l,FormRow:l.o,FormMessageList:l.m,FormContent:l.c,FormTextarea:l.s},mixins:[c.b],model:{event:"update"},props:{id:{type:String,default:"insertCode"},i18n:{type:Object,default:()=>({buttonText:"Einfügen"})},mode:{type:String,default:"default",validators:e=>-1!==["primary","default"].indexOf(e)}},validations:{code:[Object(s.j)()]},data(){return{formName:this.id,code:""}}},p=n(44),h=Object(p.a)(d,(function(){var e=this,t=e._self._c;return t("FormList",[t("FormRow",{attrs:{error:e.$v.error.code}},[t("FormContent",[t("FormTextarea",{staticClass:"space--mt-1",attrs:{id:"codePopover-code",rows:"5",placeholder:"HTML Code",name:"code"},on:{change:function(t){return e.$v.validate("code",e.code)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),t("FormMessageList",{attrs:{messages:e.$v.messages.code}})],1)],1),t("FormRow",[t("FormContent",[t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:!e.code},on:{click:function(t){return e.$emit("insert",e.code)}}},[e._v(" "+e._s(e.i18n.buttonText)+" ")])],1)],1)],1)}),[],!1,null,null,null).exports,m=n(71),f=n(597),g={components:{InsertLink:a.a,InsertCode:h,EmojiSelector:o.a,WysiwygButton:i.a,BaseButton:u.a},mixins:[r.a,Object(m.a)({button:{any:!0,smAndDown:!0},buttonText:{any:!0,smAndDown:!0,mdAndDown:!0},primaryButton:{any:!0,smAndDown:!0},primaryButtonText:{any:!0,smAndDown:!0},toolbarActions:{xsOnly:!0,smAndDown:!0},toolbarCompactButton:{smAndUp:!0}})],props:{target:{type:String,required:!0},directives:{type:Object,default:()=>({})},expanded:{type:Boolean,default:!1},plugins:{type:Object,default:()=>({})}},data:()=>({actionsPopoverActive:!1,emojiPopoverActive:!1,linkPopoverActive:!1,imageUploadPopoverActive:!1,htmlPopoverActive:!1}),computed:{popoverLayouts(){const e={preset:"s",right:{target:".redactor"},left:{target:".redactor"},classes:"zIndex--modal"};return[e,Object.assign({},e,{preset:"n"})]},imageUploadAvailable(){return(!!this.$slots["image-upload"]||!!this.$scopedSlots["image-upload"])&&this.plugins.image},toggleExpandedText(){return this.expanded?"Verkleinern":"Vergrößern"},$d(){return Object.assign({expandEditor:Object(f.b)({toggle:{toggles:[{target:".redactor",className:"aGrid redactor--height-full bg--main"}]}})},this.directives)}},methods:{updatePlugin(e,t){this.$emit("plugin-update",{key:e,value:t})},toggleExpandEditor(){this.$emit("editor-expand",!this.expanded)},captureFocus(e){this.$emit("editor-capture",e)}}},v={components:{WysiwygToolbarBase:Object(p.a)(g,(function(){var e=this,t=e._self._c;return t("div",e._g(e._b({staticClass:"toolbar space--h-2 width--all-12"},"div",e.$attrs,!1),e.$listeners),[e._t("before"),e.$scopedSlots.actions?t("div",[t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",class:[e.toolbarCompactButtonResponsive],attrs:{variant:"tag",mode:"light",selected:e.actionsPopoverActive,title:"Text"}},[t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"format-text"}}),t("BaseIcon",{staticClass:"button-dropdown-icon",attrs:{name:"dropdown"}}),t("BasePopover",{attrs:{active:e.actionsPopoverActive},on:{"update:active":function(t){e.actionsPopoverActive=t},open:function(t){return e.captureFocus("formatText")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"format-text"}},[e._v(e._s("Text"))]),t("PopoverBody",[e._t("actions",null,{close:n})],2)]}}],null,!0)})],1),t("span",{class:e.toolbarActionsResponsive},[e._t("actions",null,{close:()=>null})],2)],1):e._e(),e.plugins&&e.plugins.line?t("WysiwygButton",{attrs:{action:e.plugins.line,target:e.target,breakpoints:e.plugins.line.breakpoints}}):e._e(),e.plugins.emoji?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Emoji",selected:e.emojiPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"smiley"}}),t("BasePopover",{attrs:{active:e.emojiPopoverActive,width:"300","mobile-sheet":""},on:{"update:active":function(t){e.emojiPopoverActive=t},open:function(t){return e.captureFocus("emoji")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"smiley"}},[e._v(e._s("Emoticons"))]),t("PopoverBody",[t("EmojiSelector",{on:{insert:function(t){e.$emit("editor-insert",{content:t.emoji}),n()}}})],1)]}}],null,!1,1470812403)})],1):e._e(),e.plugins.link?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Link",selected:e.linkPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"link"}}),t("BasePopover",{attrs:{active:e.linkPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.linkPopoverActive=t},open:function(t){return e.captureFocus("link")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"link"}},[e._v(e._s("Link"))]),t("PopoverBody",[t("InsertLink",{attrs:{link:{...e.plugins.link}},on:{remove:function(t){e.$emit("editor-insert",{method:"removeLink"}),n()},insert:function(t){e.$emit("editor-insert",{content:t.link,method:"updateLink"}),n()},update:function(t){return e.updatePlugin("link",t)}}})],1)]}}],null,!1,541552780)})],1):e._e(),e.imageUploadAvailable?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"Bild",selected:e.imageUploadPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"image"}}),t("BasePopover",{attrs:{active:e.imageUploadPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.imageUploadPopoverActive=t},open:function(t){return e.captureFocus("image")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"image"}},[e._v(e._s("Bild hinzufügen"))]),t("PopoverBody",[e._t("image-upload",null,{close:n})],2)]}}],null,!0)})],1):e._e(),e.plugins.html?t("BaseButton",{directives:[{name:"popover",rawName:"v-popover",value:e.popoverLayouts,expression:"popoverLayouts"}],staticClass:"space--mr-1",attrs:{variant:"tag",mode:"light",square:"",title:"HTML",selected:e.htmlPopoverActive}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:"code"}}),t("BasePopover",{attrs:{active:e.htmlPopoverActive,width:"340","mobile-sheet":""},on:{"update:active":function(t){e.htmlPopoverActive=t},open:function(t){return e.captureFocus("html")}},scopedSlots:e._u([{key:"default",fn:function({close:n}){return[t("PopoverHead",{attrs:{icon:"code"}},[e._v(e._s("HTML Code einfügen"))]),t("PopoverBody",[t("InsertCode",{on:{insert:function(t){e.$emit("editor-insert",{content:t}),n()}}})],1)]}}],null,!1,2657945495)})],1):e._e(),e.plugins.expand?t("BaseButton",{class:{"button-expand--selected":e.expanded},attrs:{variant:"tag",mode:"light",square:"","data-handler":e.$d.expandEditor.handlers,"data-toggle":e.$d.expandEditor.params.toggle,title:e.toggleExpandedText},on:{click:e.toggleExpandEditor}},[t("BaseIcon",{attrs:{width:"20",height:"20",name:e.expanded?"contract":"expand"}})],1):e._e(),e._t("after")],2)}),[],!1,null,null,null).exports,WysiwygButton:i.a},props:{target:{type:String,required:!0},plugins:{type:Object,default:()=>({})},breakpoints:{type:Object,default:()=>({toolbarActions:{xsOnly:"hide"},toolbarCompactButton:{smAndUp:"hide"}})}},computed:{hasActions(){return this.plugins.bold||this.plugins.strike||this.plugins.italic||this.plugins.list}}},b=Object(p.a)(v,(function(){var e=this,t=e._self._c;return t("WysiwygToolbarBase",e._g(e._b({attrs:{target:e.target,plugins:e.plugins,breakpoints:e.breakpoints},scopedSlots:e._u([{key:"before",fn:function(){return[e._t("before")]},proxy:!0},e.hasActions?{key:"actions",fn:function({close:n}){return[t("span",{staticClass:"flex"},[e.plugins.bold?t("WysiwygButton",{attrs:{action:e.plugins.bold,target:e.target,breakpoints:e.plugins.bold.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e(),e.plugins.strike?t("WysiwygButton",{attrs:{action:e.plugins.strike,target:e.target,breakpoints:e.plugins.strike.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e(),e.plugins.italic?t("WysiwygButton",{attrs:{action:e.plugins.italic,target:e.target,breakpoints:e.plugins.italic.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e(),e.plugins.list?t("WysiwygButton",{attrs:{action:e.plugins.list,target:e.target,breakpoints:e.plugins.list.breakpoints},nativeOn:{click:function(e){return n.apply(null,arguments)}}}):e._e()],1)]}}:null,{key:"image-upload",fn:function({close:t}){return[e._t("image-upload",null,{close:t})]}},{key:"after",fn:function(){return[e._t("after")]},proxy:!0}],null,!0)},"WysiwygToolbarBase",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=b.exports},708:function(e,t,n){"use strict";var r={components:{ImageUploadForm:n(725).a},props:{bucket:{type:String},variation:{type:String,default:"content"},mode:{type:String,default:"default"}},methods:{async handleSubmit(e){this.$emit("upload",e)}}},i=n(44),o=Object(i.a)(r,(function(){var e=this;return(0,e._self._c)("ImageUploadForm",{attrs:{mode:e.mode,"has-alignment-selector":"","has-url-input":"","show-file-name":"","is-loading":!1},on:{submit:e.handleSubmit}})}),[],!1,null,null,null);t.a=o.exports},716:function(e,t,n){"use strict";var r=n(312),i=n(597),o=n(707),a=n(708),s=n(699);let l=null;var c,u,d={created(){this.$on("focus",(()=>{l=this.name}))}},p={methods:{textConfig(e){let{breakpoints:t={button:{any:"btn--square"},text:{any:"hide"}}}=e;return{bold:{module:"inline",fn:"format",args:["strong"],title:"Fett",key:"bold",icon:"bold",breakpoints:t},strike:{module:"inline",fn:"format",args:["del"],title:"Gelöscht",key:"deleted",icon:"strike",breakpoints:t},italic:{module:"inline",fn:"format",args:["em"],title:"Kursiv",key:"italic",icon:"italic",breakpoints:t},list:{module:"list",fn:"toggle",args:["unorderedlist"],title:"Liste",key:"unorderedlist",icon:"bullet-list",breakpoints:t},blockquote:{breakpoints:t},line:{module:"line",fn:"insert",title:"Trennlinie",key:"line",icon:"line",breakpoints:t,showOnExpand:!0}}}}},h=n(700),m=n(32),f=n.n(m),g=n(134),v=n.n(g),b=(n(8),n(20));const y=e=>Object(b.b)(c||(c=v()(["/image/upload/","?"])),e),w=e=>Object(b.b)(u||(u=v()(["/image/upload-from-uri/","?"])),e),x=["type","value"];var O={created(){this.registerWriter("insertImage","insertImage")},computed:{imageUploadAvailable(){return(!!this.$slots["image-upload"]||!!this.$scopedSlots["image-upload"])&&this.pluginConfig.plugins.image}},methods:{insertImage(e){this.$editor.$editor.focus();const{type:t,value:n}=e,i=f()(e,x);Object(r.a)(this.$editor,i,{[t.toLowerCase()]:n})},imageConfig(e){return{image:Object.assign({bucket:e.imageBucket,variation:e.imageVariation},this.plugins.image||{})}},imageUploadConfig(e){let{imageVariation:t="content",imageBucket:n="threads"}=e;return{imageFormat:t,imageType:t,imageUploadEndpoint:y(n),imageLinkEndpoint:w(n),imageVariation:t,imageBucket:n}}}},k={methods:{htmlConfig:()=>({html:!0})}},j={inheritAttrs:!1},_=n(44),C=Object(_.a)(j,(function(){var e=this,t=e._self._c;return t("div",[t("input",e._g(e._b({staticClass:"mentionList",attrs:{name:"mentionsList",type:"hidden"}},"input",e.$attrs,!1),e.$listeners)),e._m(0)])}),[function(){var e=this._self._c;return e("div",{staticClass:"mentions atwho-container space--t-2 space--h-2"},[e("span",{staticClass:"atwho-at mute--text lbox--v-2"},[this._v("@")]),e("ul",{staticClass:"atwho-view fGrid"})])}],!1,null,null,null).exports,$=n(577);var S={components:{Mentions:C},data:()=>({currentMentions:""}),created(){this.handleMentions=this.handleMentions.bind(this),this.updateMentions=this.updateMentions.bind(this),this.registerHandler("mentions","handleMentions")},methods:{handleMentions(e){this.plugins.mentions=e,this.currentMentions=e},updateMentions(){return this.currentMentions},mentionsConfig:()=>({searchUrl:$.i.getSuggestions,mentionInputSelector:".mentionList",profileUrl:"".concat("https://www.preisjaeger.at").concat($.i.getProfile("==NameReplace==")),replacementKey:"==NameReplace=="})}};const I=["id","type"],E=["shortcode"],T=["shortcode","shortcode_id"];var F={created(){this.markForShortcodes=this.markForShortcodes.bind(this),this.updateShortcodes=this.updateShortcodes.bind(this),this.formatShortcodes=this.formatShortcodes.bind(this)},methods:{shortcodeConfig(){return{markForShortcodes:this.markForShortcodes,formatShortcodes:this.formatShortcodes}},markForShortcodes(e){this.redactorShortcode=e},updateShortcodes(){const e=this.plugins.shortcodes;return this.plugins.shortcodes=this.redactorShortcode().map((t=>{const{id:n,type:r}=t,i=f()(t,I),o=e.find((e=>e.shortcode_id===n))||{},{shortcode:a={}}=o,s=f()(o,E);return Object.assign({},s,{shortcode_id:n,type:r,shortcode:Object.assign({},a,i)})})),this.plugins.shortcodes},formatShortcodes(){var e;return null===(e=this.plugins.shortcodes)||void 0===e?void 0:e.reduce(((e,t)=>{let{shortcode:n,shortcode_id:r}=t,i=f()(t,T);return e[r]=Object.assign({id:r},i,n),e}),{})}}},P=n(653),L={methods:{expandEditor(e){this.expanded=e},expandConfig:()=>({expand:!0})}},A=n(5),B=n(0),D=n.n(B),R=n(2),M=n(7),U=n(45),N=n(3),q=n(106);const z={history:[],max:100};D()(document).on("focusin",(e=>{z.history.unshift(e)>z.max&&(z.history.length=z.max)}));var H=e=>{var t=null;return z.history.some((n=>{var r;return!(!D.a.contains(document,n.target)||!(r=D()(n.target)).is(e))&&(t=r,!0)})),t},W=n(610),G=n(701),Q=n(43),V=n(23),Z=n(702);function K(e,t,n){t=D()(t),M.a.process(D.a.get(n.endpoint),{$trigger:t}).always(U.a.init(t,n.seal)).always(N.a.tmpClass(t,n.className)).done((function(t){const n=t.data.shortcode,r=e.shortcode.instance.add(n);e.$editor.scrollTop(r.position().top),e.caret.setAfter(D()("<br><br>").insertAfter(r)[1])}))}function J(e,t){e=D()(e);const n=Z.a.find(t.id),r=n.data(n.embed(t.id));if(r){const i=void 0!==t.content?t.content:N.a.findTargets(e,t.textarea).val();r.content=q.a.escapeHtml(i),n.set(r)}e.trigger("layer-destroy")}function Y(e,t){e=D()(e);const n=Z.a.find(t.id);n&&n.del(t.id),e.trigger("layer-destroy")}W.a.quote=function(){return{init:function(){const e=this.opts,t={name:"quote",html:function(e,t){return t.content=q.a.escapeHtml(t.content),(e=>{let{attr:t,content:n,original_comment_username:r,original_comment_created_at_formatted:i}=e;return'\n\t<blockquote class="userHtml-quote" '.concat(t,'>\n\t\t<span class="userHtml-quote-author">').concat(r,'</span>\n\t\t<span class="userHtml-quote-time">').concat(i,'</span>\n\t\t<p class="userHtml-quote-content">').concat(n,"</p>\n\t</blockquote>\n")})(t)},onClick:function(t,n){Object(G.a)(e,{key:"editQuote",value:t}),Q.a.clickHandler(n,D.a.extend({},N.a.$win.height()<600?V.a.defaults:{layout:[{preset:"n",x:0},{preset:"s",x:0}],close:!1,reTrigger:"ignore"},{target:"#template-quotePopover",tplData:t}))}};this.shortcode.instance.registerType(t),this.shortcode.instance.registerType(D.a.extend({},t,{name:"legacy_quote"}))}}},R.a.add("quote-add","click",(function(e,t){const n=H(".redactor-editor")||D()(".redactor-editor"),i=r.b.getTextarea(n);r.b.initRedactor(i).then((n=>{K(n,e,t)}))}),{className:"",seal:{cover:!1}}),R.a.add("quote-update","click",J),R.a.add("quote-del","click",Y);const X=new A.default({data:()=>({shortcodeId:null}),methods:{triggerQuote(e,t){this.$emit("triggerQuote",{event:e,entityId:t})},addQuote(e,t){this.$emit("addQuote",{event:e,entityId:t})},editQuote(e){this.shortcodeId=e},updateQuote(e,t){this.$emit("updateQuote",{event:e,content:t,shortcodeId:this.shortcodeId}),this.shortcodeId=null},deleteQuote(e,t){this.$emit("deleteQuote",{event:e,shortcodeId:t})}}});var ee={created(){this.registerHandler("editQuote","editQuote"),this.addQuote=this.addQuote.bind(this),this.editQuote=this.editQuote.bind(this),this.updateQuote=this.updateQuote.bind(this),this.deleteQuote=this.deleteQuote.bind(this),X.$on("addQuote",this.addQuote),X.$on("updateQuote",this.updateQuote),X.$on("deleteQuote",this.deleteQuote),this.$once("hook:beforeDestroy",(()=>{X.$off("addQuote",this.addQuote),X.$off("updateQuote",this.updateQuote),X.$off("deleteQuote",this.deleteQuote)}))},methods:{addQuote(e){let{event:t,entityKey:n="comment_id",entityId:r}=e;this.name===l&&K(this.$editor,t.target,{endpoint:"/shortcodes/template/quote?".concat(n,"=").concat(r),seal:{cover:!1},className:""})},updateQuote(e){let{event:t,shortcodeId:n,content:r}=e;this.name===l&&J(t.target,{id:n,content:r})},deleteQuote(e){let{event:t,shortcodeId:n}=e;this.name===l&&Y(t.target,{id:n})},editQuote(e){X.editQuote(e)}}},te=n(637),ne=n(566),re=n(120),ie=(n(569),n(719));const oe={allowedTags:["ul","li","a","strong","em","del","br","span","div","img","iframe","hr","blockquote"],plugins:["emoji","imagify","shortcode","video","linkify","restore","quote"],buttonActiveClass:"button--selected",buttonTarget:".redactor/.button{% if key %}--{{key}}{% endif %}",forceReplaceDivsOnPaste:!0,linebreaks:!0,imageEditable:!1,imageUrl:"url",replaceDivs:!1,staticDom:!0,maxImages:null};var ae={components:{SlideUpDown:ie.a,WysiwygToolbar:o.a,EditorImageUpload:a.a},mixins:[Object(i.a)(),d,s.a,L,k,P.b,p,h.a,O,S,F,ee],inheritAttrs:!1,model:{event:"update"},props:{name:{type:String,required:!0},value:{type:String,default:""},disabled:{type:Boolean,default:!1},directives:{type:Object,default:()=>({})},features:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},plugins:{type:Object,default:()=>({})},mode:{type:String,default:"default",validators:e=>-1!==["brand","default"].indexOf(e)},hasError:{type:Boolean,default:!1}},data(){return{wysiwygConfig:Object.assign({},oe,{mentions:this.mentionsConfig&&this.mentionsConfig()},this.restoreConfig?this.restoreConfig():{},this.imageUploadConfig?this.imageUploadConfig(this.config):{},this.shortcodeConfig?this.shortcodeConfig():{},this.config),isTipVisible:!1,expanded:!1}},computed:{redactorStyles(){return this.config.minHeight?{"min-height":this.config.minHeight}:null},pluginConfig(){const e=this.mapPlugins();return{target:"#".concat(this.name),plugins:e}},redactorValue:{get(){return this.value},set(e){this.syncFromEditor(Object(re.d)(e))}},$directives(){return Object.assign({"focus-toggle":{toggles:[{className:"redactor--focus",target:".redactor"}]}},this.directives)},editorClassList(){return{"redactor-editor--small":this.config.small,"redactor-editor--admin":this.config.admin}}},async mounted(){this.$editor=await r.b.initRedactor(this.$refs.input,Object.assign({},this.wysiwygConfig,{vue:this.updatePlugin.bind(this)}));const e=e=>this.$emit("change",e),t=e=>this.$emit("focus",e),n=e=>{if(e.data){const e=this.$refs.editor.innerHTML;this.syncFromEditor(e)}};this.$refs.editor.addEventListener("blur",e),this.$refs.editor.addEventListener("focus",t),this.$refs.editor.addEventListener("input",n),this.$once("hook:beforeDestroy",(()=>{this.$refs.editor.removeEventListener("blur",e),this.$refs.editor.removeEventListener("focus",t),this.$refs.editor.removeEventListener("input",n)})),setTimeout((()=>this.$emit("ready")))},destroyed(){this.handlers={},this.writers={},this.$editor=null},methods:{mapPlugins(){const e={},t=this.wysiwygConfig,n=Object.assign({},this.textConfig?this.textConfig(t):{},this.imageConfig?this.imageConfig(t):{},this.expandConfig?this.expandConfig(t):{},this.htmlConfig?this.htmlConfig(t):{},this.plugins);for(const[t,r]of Object.entries(n))(t in this.features&&this.features[t]||void 0===this.features[t])&&(e[t]=r);return e},registerHandler(e,t){this.handlers=this.handlers||{value:"syncToEditor"},this.handlers[e]=t},registerWriter(e,t){this.writers=this.writers||{},this.writers[e]=t},pluginEnabled(e){return!1!==this.plugins[e]},updatePlugin(e){let{key:t,value:n}=e;if(t in this.handlers)return this[this.handlers[t]](n)},syncFromEditor(e){this.$emit("update",e)},syncToEditor(e){this.redactorValue!==e&&(this.redactorValue=e)},async syncRedactor(){await this.$nextTick(),this.$refs.editor.innerHTML=this.redactorValue},captureEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.preserveSelection(),this.updateLinkSelection&&this.updateLinkSelection(e)},insertEditor(e){let{content:t,method:n="htmlWithoutClean"}=e;n in this.writers?this[this.writers[n]](t):this.$editor.insert[n](t)},showTip(){this.$scopedSlots.tip&&(this.isTipVisible=!0)},hideTip(){this.isTipVisible=!1},dropLocalImages(e){const{maxImages:t,dragImageUpload:n}=this.wysiwygConfig,r=Array.from((null==e?void 0:e.detail.files)||[]),i=this.getNumberOfImgToUpload();if(!n)return void Object(te.f)(e.type);if(0===r.length)return;let o=r.filter((e=>Object(te.a)(e))).filter((e=>{const t=!Object(ne.a)(e);return t||Object(te.d)(),t}));t&&o.length>i&&(Object(te.e)(t),o=o.slice(0,i)),o.forEach((e=>{this.insertEditor({content:{alignment:"left",type:"FILE",value:e},method:"insertImage"})}))},insertLocalImage(e){const{maxImages:t}=this.wysiwygConfig;0!==this.getNumberOfImgToUpload()?this.insertEditor({content:e,method:"insertImage"}):Object(te.e)(t)},getNumberOfImgToUpload(){const e=(this.$refs.editor.innerHTML.match(/<img/g)||[]).length,{maxImages:t}=this.wysiwygConfig;return t?t-e:t}}},se=ae,le=Object(_.a)(se,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{isActive:e.$slots.tip,handler:e.hideTip},expression:"{ isActive: $slots.tip, handler: hideTip }"}],staticClass:"redactor redactor-box aGrid",class:{"redactor--hasError":e.hasError},attrs:{disabled:e.disabled},on:{click:e.showTip}},[t("div",{ref:"editor",staticClass:"redactor-editor redactor-placeholder size--all-m border--b-r width--all-12 overflow--scrollX-raw overflow--scrollY-raw userHtml userHtml--wysiwyg overflow--wrap-break hide--js-off",class:e.editorClassList,style:e.redactorStyles,attrs:{"data-handler":e.$d.handlers,"data-focus-toggle":e.$d.params["focus-toggle"],"data-field-name":e.name,tabindex:"0"}}),t("div",{staticClass:"redactor-tips",class:{"space--h-2 space--v-2":e.$slots.tip}},[t("SlideUpDown",[e.isTipVisible?t("div",[e._t("tip")],2):e._e()])],1),t("textarea",e._g(e._b({ref:"input",staticClass:"width--all-12 hide--js-on",attrs:{id:e.name,name:e.name},domProps:{value:e.redactorValue},on:{"paste-local-file":e.dropLocalImages,"drop-local-file":e.dropLocalImages}},"textarea",e.$attrs,!1),e.$listeners)),e.pluginEnabled("mentions")?t("Mentions",{attrs:{value:e.plugins.mentions}}):e._e(),e._t("default",(function(){return[t("WysiwygToolbar",e._b({attrs:{expanded:e.expanded},on:{"plugin-update":e.updatePlugin,"editor-insert":e.insertEditor,"editor-capture":e.captureEditor,"editor-expand":e.expandEditor},scopedSlots:e._u([e.pluginEnabled("image")?{key:"image-upload",fn:function({close:n}){return[t("EditorImageUpload",e._b({attrs:{mode:"brand"},on:{upload:function(t){e.insertLocalImage(t),n()}}},"EditorImageUpload",e.pluginConfig.plugins.image,!1))]}}:null],null,!0)},"WysiwygToolbar",e.pluginConfig,!1))]}),{pluginConfig:e.pluginConfig,pluginEnabled:e.pluginEnabled,updatePlugin:e.updatePlugin,insertEditor:e.insertEditor,captureEditor:e.captureEditor,expandEditor:e.expandEditor})],2)}),[],!1,null,null,null);t.a=le.exports},724:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u}));var r=n(1),i=n(6);const o=async e=>{const t=[r.h,r.g,r.Hb,r.f,r.e],n={url:e,field:"link",value:e},o=await Object(i.c)({queries:t});return await o(n)},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(i.b)({req:r.bc,params:{url:e,filter:t},options:n})},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(i.b)({req:r.cc,params:{url:e,voucherCode:t,filter:n},options:o})},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.b)({req:r.Yc,params:e,options:t})},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.b)({req:r.Xc,params:e,options:t})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.b)({req:r.uc,params:{url:e},options:t})}},725:function(e,t,n){"use strict";var r=n(526),i=n(509),o=n(566),a={components:{FormInput:i.e},props:{showFileName:{required:!0,type:Boolean,default:!1},disableControl:{type:Boolean,default:!1},value:{required:!1},mode:{type:String,default:"default"}},computed:{selectedFileName(){return this.value?this.value.name:"Keins ausgewählt"},labelMode(){return"brand"===this.mode?"button--mode-brand":"button--mode-default"}},methods:{selectFile(){this.$emit("input",Object(o.b)(this.$refs.file.$el))}}},s=n(44),l=Object(s.a)(a,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"tGrid tGrid--auto width--all-12 hide--js-off"},[t("span",{staticClass:"tGrid-cell tGrid-cell--shrink"},[t("label",{staticClass:"button button--type-secondary button--shape-circle width--all-12",class:[e.labelMode,{"button--disabled":e.disableControl}]},[e._v(" "+e._s("Auswählen")+" "),t("FormInput",{ref:"file",staticClass:"hide",attrs:{disabled:e.disableControl,type:"file",accept:".jpg, .jpeg, .png, .gif, .webp",name:"file"},on:{change:e.selectFile}})],1)]),e.showFileName?t("span",{staticClass:"tGrid-cell vAlign--all-m space--l-2"},[t("span",{staticClass:"mute--text size--all-m box--all-b overflow--ellipsis-tableFix"},[e._v(e._s(e.selectedFileName))])]):e._e()])}),[],!1,null,null,null).exports,c=n(507),u={__name:"alignment-selector-control",setup:e=>({__sfc:!0,alignments:[{name:"left",icon:"align-left",label:"Links"},{name:"center",icon:"align-center",label:"Zentriert"}],SegmentedButton:c.b})},d=Object(s.a)(u,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"flex"},e._l(n.alignments,(function(r){return t(n.SegmentedButton,e._g(e._b({key:r.name,staticClass:"width--all-6",attrs:{name:r.name,mandatory:""}},"SegmentedButton",e.$attrs,!1),e.$listeners),[t("BaseIcon",{attrs:{name:r.icon,left:""}}),e._v(" "+e._s(r.label)+" ")],1)})),1)}),[],!1,null,null,null).exports,p=n(637);const h=Object(r.a)().set({label:"engagement"});var m={components:{BaseButton:c.a,FormList:i.l,FormRow:i.o,FormLabel:i.k,FormContent:i.c,FormInput:i.e,FileUploadControl:l,AlignmentSelectorControl:d},inheritAttrs:!1,props:{isLoading:{type:Boolean,required:!0},hasAlignmentSelector:{type:Boolean,default:!1},hasUrlInput:{type:Boolean,default:!1},immediateUpload:{type:Boolean,default:!1},showFileName:{type:Boolean,default:!1},mode:{type:String,default:"default"}},data:()=>({file:null,url:null,alignment:"left"}),computed:{noSelectionMade(){return!this.file&&!this.url},shouldDisableFileControl(){return!(!this.isLoading&&!this.url)},shouldDisableURLControl(){return!(!this.isLoading&&!this.file)},shouldDisableSubmitControl(){return!(!this.isLoading&&!this.noSelectionMade)}},methods:{submit(){const e=this.file?"FILE":"URL",t=this.file?this.file:this.url;if("FILE"===e&&Object(o.a)(t))return void Object(p.d)();let n={type:e,value:t};this.hasAlignmentSelector&&(n=Object.assign(n,{alignment:this.alignment})),this.$emit("submit",n)},handleURL(){h.record({action:"add_image_url"})},handleFile(){h.record({action:"add_image"}),this.immediateUpload&&this.submit()}}},f=Object(s.a)(m,(function(){var e=this,t=e._self._c;return t("FormList",[e._t("above"),t("FormRow",{attrs:{disabled:e.shouldDisableFileControl}},[t("FormLabel",[e._v(e._s("Bild hochladen"))]),t("FormContent",[t("FileUploadControl",{attrs:{mode:e.mode,"disable-control":e.shouldDisableFileControl,"show-file-name":e.showFileName},on:{input:e.handleFile},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),e.hasUrlInput?t("FormRow",{attrs:{disabled:e.shouldDisableURLControl}},[t("FormLabel",[e._v(e._s("Bild von URL hinzufügen"))]),t("FormContent",[t("FormInput",{attrs:{name:"url",placeholder:"Bild-URL",disabled:e.shouldDisableURLControl},on:{input:e.handleURL},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)],1):e._e(),e.hasAlignmentSelector?t("FormRow",[t("FormLabel",[e._v(e._s("Ausrichtung"))]),t("FormContent",[t("AlignmentSelectorControl",{attrs:{"selected-value":e.alignment},on:{"update:selectedValue":function(t){e.alignment=t},"update:selected-value":function(t){e.alignment=t}}})],1)],1):e._e(),t("FormRow",[t("FormContent",[t("BaseButton",{staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",disabled:e.shouldDisableSubmitControl},on:{click:function(t){return e.submit()}}},[e._v(" "+e._s("Bild hinzufügen")+" ")])],1)],1),e._t("default")],2)}),[],!1,null,null,null);t.a=f.exports},728:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={images:"getImageSuggestions",price:"getPriceSuggestion",shippingPrice:"getShippingPriceSuggestion",specification:"getSpecificationSuggestion",title:"getTitleSuggestion"}},734:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(107),i=n(611);const o={model:{event:"update"},props:{value:{type:Object,default:()=>({})},i18n:{type:Object,default:()=>({})},features:{type:Object,default:()=>({})},wysiwyg:{type:Object,default:()=>({})},messages:{type:Array,default:()=>[]},groupOptions:{type:Object,default:()=>({groups:[],max:1})}},methods:{autoAssignGroups:i.a,clearRestore(){return this.$refs.form.clearRestore()},updateShortcodes(){return this.$refs.form.updateShortcodes()}},computed:{wysiwygConfig(){return Object.assign({restoreId:"thread-desc-".concat(this.hasThread?this.thread.threadId:"new")},this.wysiwyg.config)},thread:{get(){return this.value},set(e){this.$emit("update",e)}},hasThread(){return this.thread&&this.thread.threadId},hasImage(){return this.thread&&Object(r.d)(this.thread.images)&&Object(r.c)(this.thread.images,"default")},hasMerchant(){return!(!this.thread||!this.thread.merchant)},hasMerchantImage(){return!(!this.hasMerchant||!Object(r.b)(this.thread.merchant))},merchantImageUrl(){return this.hasMerchantImage?Object(r.e)(this.thread.merchant.images,"avatar","10241X","/assets/img/default-merchant_d651c.png"):""},isShowAdminSection(){return Object(i.b)(this.thread)}},watch:{"thread.link":{handler(e){this.features.preSelectIsLocal&&null===this.thread.threadId&&(this.thread.isLocal=!(e&&e.trim()))},immediate:!0}}}},736:function(e,t,n){"use strict";var r=n(109),i=n(564),o=n(509),a=n(734),s=n(589),l=n(754),c=n(774),u=n(616),d=n(507),p=n(5),h=n(17),m=Object(p.defineComponent)({__name:"form-thread-morph-link",props:{morph:null,threadId:null},setup(e){const t=e,n={[h.a]:"",[h.o]:"",[h.e]:"",[h.f]:""},r=Object(p.computed)((()=>Object.keys(h.n).find((e=>h.n[e]===t.morph.type)))),i=Object(p.computed)((()=>"threads.switch.to.".concat(r.value.toLocaleLowerCase())));return{__sfc:!0,props:t,ceptClass:n,threadType:r,routeName:i}}}),f=n(44),g=Object(f.a)(m,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("RouterLink",{staticClass:"thread-link linkPlain mute--text space--ml-3",class:n.ceptClass[n.threadType],attrs:{to:{name:n.routeName,params:{threadId:e.threadId}}}},[e._v(" "+e._s(e.morph.translation)+" ")])}),[],!1,null,null,null).exports;const v={titleLabel:"",titlePlaceholder:"",descriptionLabel:"",descriptionPlaceholder:"",groupsLabel:"",groupsSublabel:"Bitte wähle mindestens eine der folgenden Kategorien:",submitButtonText:"Deinen Deal einstellen"};var b={components:{BaseButton:d.a,FormList:o.l,FormMessageList:o.m,Portal:r.Portal,FormRowTitle:l.a,FormRowDescription:c.a,FormThreadMorphLink:g},mixins:[s.b,a.a],inheritAttrs:!1,props:{id:{type:String,default:"threadForm"},validations:{type:Object,default:()=>({})},portalGroups:{type:String,default:""},validateOnSubmit:{type:String,default:""}},data(){return{formName:this.id,translations:Object.assign({},v,this.i18n)}},watch:{messages(e){Object(u.d)(this.$v,e)}},validations(){return Object.assign({title:[Object(i.j)(),Object(i.b)(4,140)],description:[Object(i.j)(),Object(i.f)(65535)]},this.validations)},methods:{async submitForm(e){e.preventDefault(),this.validateOnSubmit&&await this.$v.validate(this.validateOnSubmit),await this.$v.check(),this.$v.anyError||this.$emit("form-submit",e)},clearRestore(){return this.$refs.wysiwygField.$refs.wysiwygComponent.markForRestore({restoreId:this.wysiwygConfig.restoreId}),this.$refs.wysiwygField.$refs.wysiwygComponent.clearRestore()},updateShortcodes(){return this.$refs.wysiwygField.$refs.wysiwygComponent.updateShortcodes()}}},y=Object(f.a)(b,(function(){var e=this,t=e._self._c;return t("form",e._g(e._b({staticClass:"width--all-12",attrs:{id:e.id,name:e.id},on:{submit:e.submitForm}},"form",e.$attrs,!1),e.$listeners),[e.$v.error[e.id]?t("FormMessageList",{staticClass:"text--b space--b-2",attrs:{messages:e.$v.messages[e.id]}}):e._e(),t("FormList",{attrs:{wide:""}},[e._t("title"),e.hasThread&&e.features.morphThread?t("p",{staticClass:"bg--em bRad--a space--h-3 space--v-3 space--mt-2"},e._l(e.thread.morphsTo,(function(n){return t("FormThreadMorphLink",{key:n.type,attrs:{morph:n,"thread-id":e.thread.threadId}})})),1):e._e(),e._t("prepend",null,{v:e.$v}),e.features.title?t("FormRowTitle",{attrs:{placeholder:e.translations.titlePlaceholder,"tips-feature":e.features.tips,"only-number":!1},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.translations.titleLabel))]},proxy:!0}],null,!1,1023730630),model:{value:e.thread.title,callback:function(t){e.$set(e.thread,"title",t)},expression:"thread.title"}}):e._e(),t("FormRowDescription",{ref:"wysiwygField",attrs:{"tips-feature":e.features.tips,"wysiwyg-features":e.features.wysiwyg,"wysiwyg-config":e.wysiwyg.config,"entity-id":e.thread.threadId,placeholder:e.translations.descriptionPlaceholder},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s("Beschreibung"))]},proxy:!0}]),model:{value:e.thread.description,callback:function(t){e.$set(e.thread,"description",t)},expression:"thread.description"}}),e._t("default",null,{v:e.$v}),e._t("actions",(function(){return[t("Portal",{attrs:{to:"submit"}},[t("BaseButton",{staticClass:"width--all-12 width--fromW2-auto",attrs:{form:e.id,type:"submit",variant:"primary",mode:"brand"},on:{click:e.submitForm}},[e._v(" "+e._s(e.translations.submitButtonText)+" ")])],1)]}),{submitButtonText:e.translations.submitButtonText})],2)],1)}),[],!1,null,null,null);t.a=y.exports},750:function(e,t,n){"use strict";var r={components:{BaseSpinner:n(515).a},props:{title:{type:String,default:""},progress:{type:Number,default:0},error:{type:[Boolean,String],default:!1},size:{type:String,default:"xxl"},i18n:{type:Object,default:()=>({})},hasBar:{type:Boolean,default:!0}},computed:{progressClassList(){return{"vote-temp--burn":!!this.error,"vote-temp--cold":!this.error}},progressStyleList(){return{width:"".concat(this.progress,"%")}},textClassList(){return{"size--all-m":"sm"===this.size,"size--all-xxl":"sm"!==this.size}},contentClassList(){return{"vote-temp--burn":!!this.error,"progress--title":!this.error}}},methods:{retry(){this.$emit("retry")},cancel(){this.$emit("cancel")}}},i=n(44),o=Object(i.a)(r,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"js-progress--cover progress--cover progress--cover-fullscreen"},[t("span",{staticClass:"progress--content-align"},[t("span",{staticClass:"progress--content"},[t("div",{staticClass:"text--b vAlign--all-m space--b-1",class:e.contentClassList},[e.error?e._e():t("BaseSpinner",{staticClass:"vAlign--all-m"}),t("span",{staticClass:"space--l-1 vAlign--all-m",class:e.textClassList},[e._v(" "+e._s(e.title)+" ")])],1),e.hasBar?t("div",{staticClass:"progress--bar"},[t("div",{staticClass:"js-progress--indicator progress--indicator",class:e.progressClassList,style:e.progressStyleList})]):e._e(),t("div",[e.error?t("button",{staticClass:"js-progress--retry progress--retry text--b link link--type-default space--t-1",attrs:{type:"button"}},[t("span",{staticClass:"flex boxAlign-ai--all-c space--b-1"},[t("BaseIcon",{attrs:{name:"refresh"}}),t("span",{staticClass:"space--l-2 vAlign--all-m",class:e.textClassList,on:{click:e.retry}},[e._v(" "+e._s(e.i18n.retry)+" ")])],1)]):e._e(),t("button",{staticClass:"js-progress--cancel progress--cancel text--b mute--text space--t-1",attrs:{type:"button"},on:{click:e.cancel}},[e._v(" "+e._s(e.i18n.cancel)+" ")])])])])])}),[],!1,null,null,null).exports,a=n(104),s=n(567),l={__name:"thread-submission-loader",props:{hasBar:{type:Boolean}},setup:e=>({__sfc:!0,loader:Object(s.h)(),ProgressOverlay:o,BaseLoader:a.a})},c=Object(i.a)(l,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.BaseLoader,e._g(e._b({staticClass:"width--all-12",attrs:{mode:"hidden","linked-to":n.loader},scopedSlots:e._u([{key:"default",fn:function({loading:r,error:i}){return[e._t("default"),r||i?t(n.ProgressOverlay,{attrs:{error:i,"has-bar":e.hasBar}}):e._e()]}}],null,!0)},"BaseLoader",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=c.exports},753:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(548);const i=e=>("string"==typeof e?""!==e.trim():null!=e)&&0===Number(Object(r.b)(e)),o=e=>!Number(Object(r.b)(e))},754:function(e,t,n){"use strict";var r=n(5),i=n(509),o=n(643).a,a=n(44),s=Object(a.a)(o,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("p",{staticClass:"formList-info",class:n.textColor},[e._t("default",(function(){return[e._v(" "+e._s(n.remainingLabel)+" ")]}),{remaining:n.remaining})],2)}),[],!1,null,null,null).exports,l=n(611),c={__name:"form-row-title",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},fieldName:{type:String,default:"title"},tipsFeature:{type:Boolean,default:!1},required:{type:Boolean,default:!1},onlyNumber:{type:Boolean,default:!0}},emits:["input"],setup(e,t){let{emit:n}=t;const o=e,a=Object(r.inject)("$v"),c=Object(r.computed)({get:()=>o.value,set(e){n("input",e)}}),u=e=>{a.validate(o.fieldName,e)};return{__sfc:!0,$v:a,props:o,emit:n,localValue:c,validate:u,changeTitle:async()=>{await u(c.value),a.error.title||Object(l.a)()},FormRow:i.o,FormLabel:i.k,FormInput:i.e,FormContent:i.c,FormMessageList:i.m,FormTip:i.t,CharacterCounter:s}}},u=Object(a.a)(c,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.FormRow,{directives:[{name:"track",rawName:"v-track:formField",value:{name:e.fieldName},expression:"{ name: fieldName }",arg:"formField"}],attrs:{error:n.$v.error.title}},[t("div",{staticClass:"flex boxAlign-jc--all-sb"},[t(n.FormLabel,{attrs:{required:e.required}},[e._t("label")],2),t(n.CharacterCounter,{attrs:{value:n.localValue},scopedSlots:e._u([e.onlyNumber?{key:"default",fn:function({remaining:t}){return[e._v(" "+e._s(t)+" ")]}}:null],null,!0)})],1),t(n.FormContent,[t(n.FormTip,{attrs:{available:e.tipsFeature,title:"Hebe Deinen Titel hervor",descr:"Vergiss im Titel nicht auf die Marke, den Produkttyp, die Farbe oder das Modell (zB: adidas Ultraboost schwarz)"},scopedSlots:e._u([{key:"default",fn:function({toggleFormTip:r}){return[t(n.FormInput,{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],staticClass:"input--mode-primary width--all-12",attrs:{name:e.fieldName,placeholder:e.placeholder},on:{change:n.changeTitle,focus:r,blur:r},model:{value:n.localValue,callback:function(e){n.localValue=e},expression:"localValue"}})]}}])}),t(n.FormMessageList,{attrs:{messages:n.$v.messages.title}})],1)],1)}),[],!1,null,null,null);t.a=u.exports},774:function(e,t,n){"use strict";var r=n(509),i=n(716),o=n(567),a=n(5),s={__name:"form-row-description",props:{value:{type:String,default:""},entityId:{type:[Number,String],default:"new"},fieldName:{type:String,default:"description"},wysiwygFeatures:{type:Object,default:()=>({})},wysiwygConfig:{type:Object,default:()=>({})},tipsFeature:{type:Boolean,default:!1},required:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["input","update:preparedHtmlDescription"],setup(e,t){let{emit:n}=t;const s=e,l=Object(o.m)(),c=Object(a.ref)(!1),u=Object(a.inject)("$v"),d=Object(a.ref)(null),p=Object(a.computed)({get:()=>s.value,set(e){n("input",e),u.validate(s.fieldName,e)}}),h=Object(a.computed)((()=>{var e;return Object.assign({restoreId:"thread-desc-".concat(null!==(e=s.entityId)&&void 0!==e?e:"new")},s.wysiwygConfig)})),m=Object(a.computed)((()=>u.messages[s.fieldName]&&u.messages[s.fieldName].length>0));return{__sfc:!0,wysiwygPlugins:l,canRestore:c,$v:u,emit:n,props:s,wysiwygComponent:d,localValue:p,wysiwygConfigOverridden:h,hasError:m,update:function(){n("update:preparedHtmlDescription",d.value.$editor.$editor.html()),d.value.updateShortcodes()},FormTipLabel:r.u,WysiwygEditor:i.a,FormRow:r.o,FormLabel:r.k,FormContent:r.c,FormMessageList:r.m}}},l=n(44),c=Object(l.a)(s,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t(n.FormRow,{directives:[{name:"track",rawName:"v-track:formField",value:{name:e.fieldName},expression:"{ name: fieldName }",arg:"formField"}],attrs:{error:n.$v.error[e.fieldName]}},[t(n.FormLabel,{staticClass:"flex",attrs:{required:e.required},scopedSlots:e._u([{key:"end",fn:function(){return[n.canRestore?t("button",{staticClass:"link text--color-brandPrimary",attrs:{type:"button"},on:{click:e.$refs.wysiwygComponent.undoRestore}},[e._v(" "+e._s("Gespeicherte Beschreibung verwerfen")+" ")]):e._e()]},proxy:!0}])},[e._t("label")],2),t(n.FormContent,[t(n.WysiwygEditor,{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],ref:"wysiwygComponent",staticClass:"redactor--mode-primary width--all-12",attrs:{"has-error":n.hasError,name:e.fieldName,placeholder:e.placeholder,config:n.wysiwygConfigOverridden,plugins:n.wysiwygPlugins,features:e.wysiwygFeatures},on:{canRestore:e=>n.canRestore=e,update:n.update},scopedSlots:e._u([{key:"tip",fn:function(){return[e._t("descTip",(function(){return[e.tipsFeature?t(n.FormTipLabel,{attrs:{title:"Erzähle uns etwas von Deinem Deal.",descr:"Füge Details zum Produkt, Links zu relevanten Info oder Bewertungen hinzu und sag uns, warum es sich lohnt, das Angebot zu teilen"}}):e._e()]}))]},proxy:!0}],null,!0),model:{value:n.localValue,callback:function(e){n.localValue=e},expression:"localValue"}}),n.$v.messages[e.fieldName]&&n.$v.messages[e.fieldName].length?t(n.FormMessageList,{attrs:{messages:n.$v.messages[e.fieldName]}}):e._e()],1)],1)}),[],!1,null,null,null);t.a=c.exports},782:function(e,t,n){"use strict";var r=n(17);const i={[r.a]:"ThreadPreviewDeal",[r.o]:"ThreadPreviewVoucher",[r.e]:"ThreadPreviewDiscussion",[r.f]:"ThreadPreviewFeedback"};var o={components:{ThreadPreviewDeal:()=>Promise.all([n.e(13),n.e(36),n.e(234)]).then(n.bind(null,1275)),ThreadPreviewVoucher:()=>Promise.all([n.e(13),n.e(36),n.e(236)]).then(n.bind(null,1335)),ThreadPreviewDiscussion:()=>Promise.all([n.e(13),n.e(207)]).then(n.bind(null,1336)),ThreadPreviewFeedback:()=>Promise.all([n.e(13),n.e(213)]).then(n.bind(null,1337))},props:{thread:{type:Object,required:!0},imagePlaceholder:{type:String,default:""},layout:{type:String,default:"list"},i18n:{type:Object,default:()=>({})},features:{type:Object,default:()=>({})}},computed:{previewType(){return i[this.thread.type]},imageUrl(){return this.$store.getters["threadForm/getGalleryImageUrl"](0)}}},a=n(44),s=Object(a.a)(o,(function(){var e=this;return(0,e._self._c)(e.previewType,{tag:"Component",staticClass:"threadPreview",attrs:{layout:e.layout,thread:e.thread,image:e.imageUrl,i18n:e.i18n,features:e.features}})}),[],!1,null,null,null);t.a=s.exports},807:function(e,t,n){"use strict";var r=n(540),i=n.n(r),o=n(17),a=n(87),s=n(682),l=n(107),c=n(521),u=n(566),d=n(42),p=n(728),h=n(724),m=n(6),f=n(616);const g=function(e,t,n){var r,i,a,c;let u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const d=e.shipping||{isFree:null,price:null},p=d.isFree,h=d.price,m=null!=e&&null!==(r=e.startDate)&&void 0!==r&&r.timestamp?e.startDate:{},f=null!=e&&null!==(i=e.endDate)&&void 0!==i&&i.timestamp?e.endDate:{},g=null!=e&&null!==(a=e.scheduledReleaseDate)&&void 0!==a&&a.timestamp?e.scheduledReleaseDate:{},v=e.type||t||"";return{threadId:e.threadId||null,type:v,images:Object(l.d)(e.images)?e.images:{bucket:"threads",slots:[]},link:e.link||"",galleryImages:e.galleryImages||[],user:e.user||null,claimCodeCampaignId:e.claimCodeCampaignId||"",discountType:e.discountType||null,disclaimers:e.disclaimers||[],cpcLink:e.cpcLink||"",price:e.price||null,percentage:e.percentage||null,nextBestPrice:e.nextBestPrice||null,title:e.title||"",titleSlug:e.titleSlug||"",threadTypeId:e.threadTypeId||null,description:e.description||"",groups:e.groups?Object(s.d)(e.groups,v===o.e):[],freeShipping:p,shippingPrice:h,startDate:m,endDate:f,scheduledReleaseDate:g,voucherCode:e.voucherCode||"",isLocal:!!(e.isLocal||!e.threadId&&u.preSelectIsLocal),isExclusive:!!e.isExclusive,locations:e.locations||n,dispatchedFrom:e.dispatchedFrom||null,nsfw:!!e.nsfw,events:e.events||[],eventOnly:!!e.eventOnly,merchant:e.merchant||{},morphsTo:e.morphsTo||[],shortcodes:e.shortcodes||[],imageSuggestions:e.imageSuggestions||[],preparedHtmlDescription:(null===(c=e.threadDetails)||void 0===c?void 0:c.preparedHtmlDescription)||null}},v=function(){let{formId:e="threadForm",thread:t={},locations:n={id:null},countries:r=[],events:i=[],groups:o=[],mentions:a="",threadType:s="",features:l={},imageSuggestions:c=[],fetchedFromUrl:u={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d={formId:e,thread:g(t,s,n,l),locations:n,countries:r,events:i,groups:o,mentions:a,features:l,imageSuggestions:c,fetchedFromUrl:u};return Object.assign({},d,{token:Object(f.c)()})},b={getField:a.c,getGalleryImageUrl:e=>function(t){let{pixVariant:n="thread_medium",picsyVariant:r=[["re",300,300],["ft","jpg"],["qt",60]]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.thread.galleryImages[t];return i?"remoteUrl"in i?i.remoteUrl:Object(l.d)(i)?Object(l.e)(i,i.slots[0].name,n):new c.a(i).apply(r).toString():""},isShowGalleryImageSizeWarning:e=>t=>{const n=e.thread.galleryImages[t];return!!n&&("remoteUrl"in n?n.isPoorQuality:Object(l.d)(n)?!!Object(l.f)(n,n.slots[0].name,{}).isPoorQuality:n.isPoorQuality)},isAnyGalleryImageSizeWarning:(e,t)=>e.thread.galleryImages.some(((e,n)=>t.isShowGalleryImageSizeWarning(n))),canAutoAssignGroups:e=>{if(0===e.groups.length)return!0;return!e.thread.groups.some((e=>!e.assignedBySystem))}},y={clearFormSuggestionsFromLink(e){let{commit:t}=e;t("UPDATE_FIELD",{path:"fetchedFromUrl",value:{}})},getFormSuggestionsFromLink(e,t){let{dispatch:n,commit:r,state:i}=e,{url:o}=t;if(!o)return;const a={},s=e=>{var t;return!(null===(t=a[e])||void 0===t||!t.isLoading())},{thread:l}=i,c={images:0===l.galleryImages.length,price:!l.price,shippingPrice:!0,title:!0};Object.keys(c).forEach((e=>c[e]&&(e=>{const t=d.b.create(p.a[e]);a[e]=t,t.startLoading()})(e)));const u=Object(m.d)(Object(h.c)(Object.assign({url:o},c)),11e3);return u.request.then((e=>{let{submissionSuggestion:t}=e;const{images:o,price:a,title:l}=t.external,{shippingCosts:c}=t.internal;var u,d;s("images")&&null!=o&&o.length&&n("addGalleryImages",o.slice(0,8).map((e=>({remoteUrl:e.url})))),u="price",d=a.value,s(u)&&d&&r("UPDATE_FIELD",{path:"thread.".concat(u),value:d}),r("UPDATE_FIELD",{path:"fetchedFromUrl",value:Object.assign({},i.fetchedFromUrl,{title:l,price:a.value,shippingCosts:null==c?void 0:c.map((e=>e.price))})})})).finally((()=>{Object.keys(a).forEach((e=>{a[e].stopLoading()}))})),u},addGalleryImages(e){let{state:t,commit:n,dispatch:r}=e;const a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((e=>Object.assign({},e,{id:i()("gallery_")})));n("UPDATE_FIELD",{path:"thread.galleryImages",value:t.thread.galleryImages.concat(a)}),a.forEach((e=>{e.remoteUrl&&Object(u.c)(e.remoteUrl).then((t=>{let{width:n,height:i}=t;r("updateGalleryImageById",{id:e.id,data:Object.assign({},e,{isPoorQuality:Object(o.x)(n,i)})})})).catch((()=>{}))}))},removeGalleryImage(e,t){let{state:n,commit:r}=e;const i=[...n.thread.galleryImages];i.splice(t,1),r("UPDATE_FIELD",{path:"thread.galleryImages",value:i})},removeAllGalleryImages(e){let{commit:t}=e;t("UPDATE_FIELD",{path:"thread.galleryImages",value:[]})},changeGalleryImagesOrder(e,t){let{state:n,commit:r}=e,{from:i,to:o}=t;const a=[...n.thread.galleryImages],s=a.splice(i,1)[0];a.splice(o,0,s),r("UPDATE_FIELD",{path:"thread.galleryImages",value:a})},updateGalleryImageById(e,t){let{state:n,commit:r}=e,{id:i,data:o}=t;const a=[...n.thread.galleryImages],s=a.findIndex((e=>e.id===i));s>=0&&(a[s]=o,r("UPDATE_FIELD",{path:"thread.galleryImages",value:a}))},getMerchantFromThreadLink(e,t){let{commit:n}=e;const r=Object(h.d)(t);return r.request.then((e=>{let{merchant:t}=e;return n("UPDATE_FIELD",{path:"thread.merchant",value:t||{}}),t})),r},getProductSpecificationFromLink(e,t){let{state:n,commit:r}=e;const{thread:i,features:o}=n;function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r("UPDATE_FIELD",{path:"fetchedFromUrl",value:Object.assign({},n.fetchedFromUrl,{specification:e})})}if(!(o.specification&&!i.title&&!i.description&&!i.threadId))return;a("");const s=d.b.create(p.a.specification);s.startLoading();const l=Object(h.e)(t);return l.request.then((e=>{let{submissionSuggestion:t}=e;const{specification:n}=t.external;a(n)})).finally((()=>{s.stopLoading()})),l}},w={UPDATE_FIELD:a.b,UPDATE_TOKEN(e){e.token=Object(f.c)()}};t.a=e=>({namespaced:!0,state:v(e),getters:b,actions:y,mutations:w})},812:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var r=n(509),i=n(736),o=n(782),a=n(109),s=n(666),l={components:{BaseButton:n(507).a,PortalTarget:a.PortalTarget},mixins:[s.a],props:{i18n:{type:Object,default:()=>({})},preview:{type:Boolean,default:!0}},data(){return{isModalOpen:!1,translations:Object.assign({previewTitle:"Vorschau"},this.i18n)}}},c=n(44),u=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"page-center tGrid tGrid--auto height--all-full"},[e._t("messages"),t("div",{staticClass:"width--fromW4-8 box--fromW3-c vAlign--all-t"},[t("div",{staticClass:"page-content page-content--persistent page-space--v-l bg--main"},[e._t("form")],2),t("div",{staticClass:"page-content page-content--persistent page-space--v-l bg--color-greyPanel"},[t("div",{staticClass:"flex flex--wrap flex--dir-row-reverse boxAlign-jc--all-fs space--mb-n2"},[t("PortalTarget",{staticClass:"space--fromW2-ml-3 space--mb-2 width--all-12 width--fromW2-auto",attrs:{name:"submit"}}),e.preview?t("BaseButton",{directives:[{name:"track",rawName:"v-track:previewButton.click",arg:"previewButton",modifiers:{click:!0}}],staticClass:"space--mb-2 width--all-12 width--fromW2-auto",attrs:{variant:"secondary",mode:"default"},on:{click:function(t){e.isModalOpen=!0}}},[e._v(" "+e._s(e.translations.previewTitle)+" ")]):e._e()],1)])]),e.isModalOpen?t("BaseModal",{attrs:{active:e.isModalOpen,"max-width":"540","content-class":"space--h-3 space--v-3"},on:{"update:active":function(t){e.isModalOpen=t}}},[t("ModalClose",{staticClass:"aGrid-close space--mt-2 space--mr-2"}),e._t("preview")],2):e._e(),e._t("loader")],2)}),[],!1,null,null,null).exports,d=n(750),p=n(587),h=n(21),m=n(567);const f={formId:{type:String,default:"threadForm"},maxGroups:{type:Number,default:1},i18n:{type:Object,default:()=>({})}};t.a=function(){let{i18n:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{components:{FormRow:r.o,FormContent:r.c,PageMessages:p.a,ThreadForm:i.a,ThreadPreview:o.a,ThreadSubmissionLayout:u,ThreadSubmissionLoader:d.a},props:f,setup(t){const{thread:n,formOptions:r,submitForm:i,form:o,validationMessages:a}=Object(m.l)(),s=Object(m.g)(t.maxGroups),l=Object(m.e)(),c=Object.assign({},e,t.i18n||{},{form:Object.assign({},e.form,(t.i18n||{}).form)});return Object(h.j)(["thread_created_location"]),Object(m.b)(),Object(m.i)(!1),{thread:n,formOptions:r,formFeatures:l,groupOptions:s,submitForm:i,form:o,validationMessages:a,translations:c}}}}},89:function(e,t,n){"use strict";function r(e){const t=Object.prototype.toString;let n=e.length;const o=new Array(n);for(;n;)switch(n-=1,t.call(e[n])){case"[object Object]":o[n]=i({},e[n]);break;case"[object Array]":o[n]=r(e[n]);break;default:o[n]=e[n]}return o}function i(e,t){const n=Object.prototype.toString;let o;for(o in t)if(t.hasOwnProperty(o))switch(n.call(t[o])){case"[object Object]":e[o]=i("[object Object]"===n.call(e[o])?e[o]:{},t[o]);break;case"[object Array]":e[o]=r(t[o]);break;default:e[o]=t[o]}return e}t.a={boundMethod:function(e,t){return e[""+t]||(e[""+t]=e[t].bind(e))},deepCloneArray:r,deepMerge:i,uniqueArray:function(e){return e.filter(((t,n)=>e.indexOf(t)===n))}}}}]);