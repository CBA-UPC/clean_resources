!function(e){function t(t){for(var n,i,o=t[0],a=t[1],s=0,c=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(l&&l(t);c.length;)c.shift()()}var n={},r={8:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({}[e]||e)+".js"}(e);var l=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,n[1](l)}r[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.wpJsonpExCoAdPlayer=window.wpJsonpExCoAdPlayer||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var l=a;i(i.s=25)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s}));var r,i=n(4),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=o(o({},{AD:{ANY:"ad.*",INIT:"ad.init",STARTED:"ad.started",PLAYING:"ad.playing",TIME_UPDATE:"ad.time-update",IMPRESSION:"ad.impression",PROGRESS:"ad.progress",FIRST_QUARTILE:"ad.first-quartile",MIDPOINT:"ad.midpoint",THIRD_QUARTILE:"ad.third-quartile",COMPLETED:"ad.completed",CLICKED:"ad.clicked",SKIPPED:"ad.skipped",VIDEO_CLICKED:"ad.video-clicked",ERROR:"ad.error",VIEWABILITY:"ad.viewability",XML_PARSED:"ad.xml-parsed"},CONTENT:{ANY:"content.*",START:"content.start",RESUMED:"content.resumed",SKIPPED:"content.skipped",COMPLETED:"content.completed"},PLAYER:{ANY:"player.*",INIT:"player.init",LOAD:"player.load",MUTED:"player.muted",UNMUTED:"player.unmuted",PLAYING:"player.playing",PAUSED:"plauer.paused",CLOSED:"player.closed",SLOT_START:"player.slot-start",SLOT_END:"player.slot-end",IN_VIEW:"player.in-view",OUT_OF_VIEW:"player.out-of-view",FIRST_VIEW:"player.first-view",CTA_CLICKED:"player.cta-clicked",AUTOPLAY_BLOCKED:"player.autoplay-blocked",ACTION:{CLOSE:"player.action.close",PAUSE:"player.action.pause",PLAY:"player.action.play"}},STICKY:{CLOSED:"sticky.closed",OPENED:"sticky.opened",ACTION:{CLOSE:"sticky.action.close",HIDE:"sticky.action.hide"}},PLUGIN:{ANY:"plugin.*",EVENT:"plugin.event",ENABLED:"plugin.enabled",AUCTION:"plugin.auction",ACTION:{AUCTION:"plugin.action.auction"}}}),{INTERNAL:i.a,EXTERNAL:{CONTENT:{START:"external.content.start"},AD:{INIT:"external.ad.init"}}}),s=function(e){return r||(r=e),r}},function(e,t,n){(function(r){var i;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(o){var a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function u(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}function d(e,t,n,r){if(!n)return[];var i,o,a,s,l,c,u,p=[],h=t.length,f=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(p=p.concat(d(e,t,n[a],r+1)));return p}if("**"===f){for(a in(u=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(p=p.concat(d(e,t,n,h))),n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!u&&(p=p.concat(d(e,t,n[a],h))),p=p.concat(d(e,t,n[a],r))):p=a===v?p.concat(d(e,t,n[a],r+2)):p.concat(d(e,t,n[a],r)));return p}p=p.concat(d(e,t,n[f],r+1))}if((s=n["*"])&&d(e,t,s,r+1),l=n["**"])if(r<h)for(a in l._listeners&&d(e,t,l,h),l)"_listeners"!==a&&l.hasOwnProperty(a)&&(a===v?d(e,t,l[a],r+2):a===f?d(e,t,l[a],r+1):((c={})[a]=l[a],d(e,t,{"**":c},r+1)));else l._listeners?d(e,t,l,h):l["*"]&&l["*"]._listeners&&d(e,t,l["*"],h);return p}function p(e,t){for(var n=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();void 0!==o;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}u.EventEmitter2=u,u.prototype.delimiter=".",u.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},u.prototype.event="",u.prototype.once=function(e,t){return this._once(e,t,!1)},u.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},u.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},u.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},u.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},u.prototype._many=function(e,t,n,r){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&i.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r),i},u.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,l,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},u.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,o,a=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),i=1;i<l;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,l){case 1:a.push(this._all[r].call(this,e));break;case 2:a.push(this._all[r].call(this,e,arguments[1]));break;case 3:a.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[r].apply(this,t))}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,c,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,l){case 1:a.push(o.call(this));break;case 2:a.push(o.call(this,arguments[1]));break;case 3:a.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];a.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),l>3)for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,l){case 1:a.push(o[r].call(this));break;case 2:a.push(o[r].call(this,arguments[1]));break;case 3:a.push(o[r].call(this,arguments[1],arguments[2]));break;default:a.push(o[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},u.prototype.on=function(e,t){return this._on(e,t,!1)},u.prototype.prependListener=function(e,t){return this._on(e,t,!0)},u.prototype.onAny=function(e){return this._onAny(e,!1)},u.prototype.prependAny=function(e){return this._onAny(e,!0)},u.prototype.addListener=u.prototype.on,u.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},u.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(p.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},u.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();r=d.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var s=r[o];if(n=s._listeners,a(n)){for(var l=-1,c=0,u=n.length;c<u;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){l=c;break}if(l<0)continue;return this.wildcard?s._listeners.splice(l,1):this._events[e].splice(l,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var r in n){var i=n[r],o=t[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&e(t[i]),0===Object.keys(o).length&&delete t[i])}}}(this.listenerTree),this},u.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(e){if(void 0===e)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){n[r]._listeners=null}else this._events&&(this._events[e]=null);return this},u.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},u.prototype.eventNames=function(){return Object.keys(this._events)},u.prototype.listenerCount=function(e){return this.listeners(e).length},u.prototype.listenersAny=function(){return this._all?this._all:[]},void 0===(i=function(){return u}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(19))},function(e,t,n){"use strict";n.r(t),n.d(t,"PLUGINS",(function(){return a}));var r,i=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a={TABOOLA:"tbla"},s=Object.values(a).reduce((function(e,t){return e[t]="./".concat(t),e}),{}),l=((r={})[a.TABOOLA]=function(e){return"0010J00001s1b0MQAQ"===(null==e?void 0:e.sellerId)},r),c=function(){function e(){this._loadedPlugins={}}return e.prototype.get=function(e,t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return this._loadedPlugins[e]?[2,this._loadedPlugins[e]]:[2,this.load(e,t)]}))}))},e.prototype.load=function(e,t){return i(this,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return!s[e]||this._loadedPlugins[e]?[3,2]:[4,n(22)("".concat(s[e]))];case 1:r=i.sent().default,this._loadedPlugins[e]=new r(t),i.label=2;case 2:return[2,this._loadedPlugins[e]]}}))}))},e.prototype.isEnabled=function(e,t){var n=l[t];return!(!n||!n(e))},e}();t.default=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b64Utils=t.decompressStr=t.decompressObj=t.compressStr=t.compressObj=void 0;var r=n(20);Object.defineProperty(t,"compressObj",{enumerable:!0,get:function(){return r.compressObj}}),Object.defineProperty(t,"compressStr",{enumerable:!0,get:function(){return r.compressStr}}),Object.defineProperty(t,"decompressObj",{enumerable:!0,get:function(){return r.decompressObj}}),Object.defineProperty(t,"decompressStr",{enumerable:!0,get:function(){return r.decompressStr}}),t.b64Utils=n(21)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={USER:{CONSENT:"internal.user.consent"},CONTENT:{START:"internal.content.start",PLAYING:"internal.content.playing"},AD:{INIT:"internal.ad.init",SLOT_END:"internal.ad.slot-end",UPCOMING_SLOT:"internal.ad.upcoming-slot",PAUSE_FOR_CONTENT:"internal.ad.pause-for-content",RESET_BREAKING_ADS_TIMER:"internal.ad.reset-breaking-ads-timer"},AUCTION:{END:"internal.auction.end"}}},,,function(e,t,n){var r,i=document.currentScript;n.p=(r=(null==i?void 0:i.src)||"/").includes("localhost")?r.replace("https:","http:").replace(/\?exng|player\.js/g,""):r.replace(/http:|https:|player\.js/g,"")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONparse=t.JSONstringify=void 0;t.JSONstringify=e=>{try{return JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t&&(e=>{if(e.constructor&&e.constructor.name){const t=e.constructor.name.toLowerCase();return t&&t.includes("html")&&t.includes("node")}return!1})(t)?"[Circular]":t)}catch(e){}return""};t.JSONparse=e=>{try{return JSON.parse(e)}catch(e){}}},,,,,,,,function(e,t,n){var r=n(17);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},function(e,t,n){(t=n(18)(!1)).push([e.i,'/* TBD - Opacity only? */\n.__exco_flexbox {\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: flex;\n}\n.__exco_full_size,\n.__exco_ad_container,\n.__exco_ad_ima_slot,\n.__exco_content_poster,\n.__exco_content_container {\n  width: 100%;\n  height: 100% !important;\n  position: absolute;\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  padding: 0;\n  margin: 0;\n}\n.__exco_visible {\n  opacity: 1;\n}\n.__exco_hidden {\n  opacity: 0;\n}\n/* Internal not for user override */\n.__exco_root_container,\n#__exco_root_container {\n  background-color: #000;\n  border: 0 none;\n  display: block;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  top: 0;\n  width: 100%;\n}\n.__exco_root_container *,\n#__exco_root_container * {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.__exco_root_container .__exco_hidden,\n#__exco_root_container .__exco_hidden {\n  display: none;\n}\n.__exco_ad_container {\n  background-color: #000;\n  z-index: -1;\n}\n.__exco_content_video,\n.__exco_video_element,\n#__exco_content_video,\n#__exco_video_element {\n  height: 100% !important;\n  width: 100%;\n  position: relative;\n  top: 0;\n  left: 0;\n  display: block;\n}\n.__exco_content_poster {\n  z-index: 1;\n  background: #000 center center no-repeat;\n}\n.__exco_content_container {\n  background: #000;\n  z-index: 10001;\n}\n.__exco_content_container .__exco_content_video {\n  z-index: 0;\n}\n.__exco_video_element {\n  background-color: #000;\n}\n.__exco_jsv_marker::before {\n  content: "JSV";\n  display: block;\n  color: #fff;\n  background: #333;\n  top: 0;\n  left: 0;\n  position: absolute;\n  padding: 10px;\n  -webkit-box-shadow: 0 0 7px #fff;\n  -moz-box-shadow: 0 0 7px #fff;\n  box-shadow: 0 0 7px #fff;\n}\n',""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompressObj=t.compressObj=t.decompressStr=t.compressStr=void 0;const r=n(8);t.compressStr=e=>{if(!e)return"";const t={},n=e.split(""),r=[];let i=256,o=n.shift()||"";for(;n.length;){const e=n.shift();null!=t[o+e]?o+=e:(r.push(o.length>1?t[o]:o.charCodeAt(0)),t[o+e]=i++,o=e||"")}r.push(o.length>1?t[o]:o.charCodeAt(0));const a=new Uint32Array(r.length).length;for(let e=0;e<a;++e)r[e]=String.fromCharCode(r[e]);return r.join("")};t.decompressStr=e=>{if(!e)return"";const t={},n=e.split(""),r=[n.shift()],i=new Uint32Array(n.length).length;let o=256,a=r[0],s=a||"";for(let e=0;e<i;++e){const i=n[e].charCodeAt(0),l=i<256?n[e]:t[i]?t[i]:s+a;r.push(l),a=l.charAt(0),t[o++]=s+a,s=l}return r.join("")};t.compressObj=e=>(0,t.compressStr)((0,r.JSONstringify)(e));t.decompressObj=e=>(0,r.JSONparse)((0,t.decompressStr)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeDecodeStr=t.safeEncodeStr=t.safeDecodeJson=t.safeEncodeJson=t.decodeJson=t.encodeJson=t.decodeStr=t.encodeStr=void 0;const r=n(8),i=[["+","-"],["/","_"],["=","~"]];t.encodeStr=e=>Buffer?Buffer.from(e).toString("base64"):btoa(e);t.decodeStr=e=>Buffer?Buffer.from(e,"base64").toString():atob(e);t.encodeJson=e=>(0,t.encodeStr)((0,r.JSONstringify)(e));t.decodeJson=e=>(0,r.JSONparse)((0,t.decodeStr)(e));t.safeEncodeJson=e=>(0,t.safeEncodeStr)((0,r.JSONstringify)(e));t.safeDecodeJson=e=>(0,r.JSONparse)((0,t.safeDecodeStr)(e));t.safeEncodeStr=e=>i.reduce((e,[t,n])=>e.replace(new RegExp("\\"+t,"g"),n),(0,t.encodeStr)(e));t.safeDecodeStr=e=>(0,t.decodeStr)(i.reduce((e,[t,n])=>e.replace(new RegExp("\\"+n,"g"),t),e))},function(e,t,n){var r={".":[2,9],"./":[2,9],"./index":[2,9],"./index.ts":[2,9],"./public-path":[7,7],"./public-path.ts":[7,7],"./tbla":[6,9,0],"./tbla/":[6,9,0],"./tbla/index":[6,9,0],"./tbla/index.ts":[6,9,0],"./tbla/src/api":[14,9,1],"./tbla/src/api.ts":[14,9,1],"./tbla/src/callbacks":[10,9,4],"./tbla/src/callbacks.ts":[10,9,4],"./tbla/src/constants":[5,9,2],"./tbla/src/constants/":[5,9,2],"./tbla/src/constants/api.constants":[11,9,5],"./tbla/src/constants/api.constants.ts":[11,9,5],"./tbla/src/constants/demand.constants":[9,9,6],"./tbla/src/constants/demand.constants.ts":[9,9,6],"./tbla/src/constants/events.constants":[12,9,7],"./tbla/src/constants/events.constants.ts":[12,9,7],"./tbla/src/constants/index":[5,9,2],"./tbla/src/constants/index.ts":[5,9,2],"./tbla/src/events":[13,9,1],"./tbla/src/events.ts":[13,9,1],"./tbla/src/moat":[15,9,3],"./tbla/src/moat.ts":[15,9,3]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(i,t[1])}))}i.keys=function(){return Object.keys(r)},i.id=22,e.exports=i},function(e,t,n){!function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function h(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var m=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=E(e);for(var o in!t.ERRORCODE||n.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=w(Math.round(1e8*Math.random())),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[o]=_(t[o]);for(var a in i){var s=i[a];"string"==typeof s&&r.push(y(s,t))}return r}function y(e,t){var n=(e=g(e,t)).match(/[^[\]]+(?=])/g);if(!n)return e;var r=n.filter((function(e){return m.indexOf(e)>-1}));return 0===r.length?e:g(e,r=r.reduce((function(e,t){return e[t]=-1,e}),{}))}function g(e,t){var n=e;for(var r in t){var i=t[r];n=n.replace(new RegExp("(?:\\[|%%)(".concat(r,")(?:\\]|%%)"),"g"),i)}return n}function E(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty("url")?e.url:e})):e}function b(e,t){for(var n=0;n<t.length;n++)if(T(t[n],e))return!0;return!1}function T(e,t){if(e&&t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);return n.length===r.length&&e.id===t.id&&e.url===t.url}return!1}function _(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,"0")}var S={track:function(e,t,n){A(e,t,n).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:A,extractURLsFromTemplates:E,containsTemplateObject:b,isTemplateObjectEqual:T,encodeURIComponentRFC3986:_,replaceUrlMacros:y,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(e)?e:[],r=Array.isArray(t)?t:[],i=n.concat(r);return i.reduce((function(e,t){return b(t,e)||e.push(t),e}),[])},isValidTimeValue:function(e){return Number.isFinite(e)&&e>=-2},addLeadingZeros:w};function I(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var C={childByName:function(e,t){var n=e.childNodes;for(var r in n){var i=n[r];if(i.nodeName===t)return i}},childrenByName:function(e,t){var n=[],r=e.childNodes;for(var i in r){var o=r[i];o.nodeName===t&&n.push(o)}return n},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var n=location.protocol;return"".concat(n).concat(e)}if(-1===e.indexOf("://")){var r=t.slice(0,t.lastIndexOf("/"));return"".concat(r,"/").concat(e)}return e},parseBoolean:I,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,n){var r=t.getAttribute(e);r&&n.setAttribute(e,r)},parseAttributes:function(e){for(var t=e.attributes,n={},r=0;r<t.length;r++)n[t[r].nodeName]=t[r].nodeValue;return n},parseDuration:function(e){if(null==e)return-1;if(S.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var n=t[2].split("."),r=parseInt(n[0]);2===n.length&&(r+=parseFloat("0.".concat(n[1])));var i=parseInt(60*t[1]),o=parseInt(60*t[0]*60);return isNaN(o)||isNaN(i)||isNaN(r)||i>3600||r>60?-1:o+i+r},splitVAST:function(e){var t=[],n=null;return e.forEach((function(r,i){if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),r.sequence>1){var o=e[i-1];if(o&&o.sequence===r.sequence-1)return void(n&&n.push(r));delete r.sequence}n=[r],t.push(n)})),t},assignAttributes:function(e,t){if(e)for(var n in e){var r=e[n];if(r.nodeName&&r.nodeValue&&t.hasOwnProperty(r.nodeName)){var i=r.nodeValue;"boolean"==typeof t[r.nodeName]&&(i=I(i)),t[r.nodeName]=i}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[].concat(h(e.viewableImpression),h(t.viewableImpression))),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var n=(t.creatives||[]).filter((function(e){return e&&"companion"===e.type})),r=n.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){S.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=n.concat(e.creatives);var i=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,o=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var n in t.trackingEvents[e.type]){var a=t.trackingEvents[e.type][n];Array.isArray(e.trackingEvents[n])||(e.trackingEvents[n]=[]),e.trackingEvents[n]=e.trackingEvents[n].concat(a)}"linear"===e.type&&(i&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),o&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&r.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=S.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,r)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function R(e,t){var n=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,n=e.adId,r=e.sequence,i=e.apiFramework;return{id:t,adId:n,sequence:r,apiFramework:i,type:"companion",required:null,variations:[]}}(t);return n.required=e.getAttribute("required")||null,n.variations=C.childrenByName(e,"Companion").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(C.parseAttributes(e));t.htmlResources=C.childrenByName(e,"HTMLResource").reduce((function(e,t){var n=C.parseNodeText(t);return n?e.concat(n):e}),[]),t.iframeResources=C.childrenByName(e,"IFrameResource").reduce((function(e,t){var n=C.parseNodeText(t);return n?e.concat(n):e}),[]),t.staticResources=C.childrenByName(e,"StaticResource").reduce((function(e,t){var n=C.parseNodeText(t);return n?e.concat({url:n,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=C.parseNodeText(C.childByName(e,"AltText"))||null;var n=C.childByName(e,"TrackingEvents");n&&C.childrenByName(n,"Tracking").forEach((function(e){var n=e.getAttribute("event"),r=C.parseNodeText(e);n&&r&&(Array.isArray(t.trackingEvents[n])||(t.trackingEvents[n]=[]),t.trackingEvents[n].push(r))})),t.companionClickTrackingURLTemplates=C.childrenByName(e,"CompanionClickTracking").map((function(e){return{id:e.getAttribute("id")||null,url:C.parseNodeText(e)}})),t.companionClickThroughURLTemplate=C.parseNodeText(C.childByName(e,"CompanionClickThrough"))||null;var r=C.childByName(e,"AdParameters");return r&&(t.adParameters=C.parseNodeText(r),t.xmlEncoded=r.getAttribute("xmlEncoded")||null),t})),n}function P(e){return"linear"===e.type}function D(e,t){var n,r=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,n=e.adId,r=e.sequence,i=e.apiFramework;return{id:t,adId:n,sequence:r,apiFramework:i,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);r.duration=C.parseDuration(C.parseNodeText(C.childByName(e,"Duration")));var i=e.getAttribute("skipoffset");if(null==i)r.skipDelay=null;else if("%"===i.charAt(i.length-1)&&-1!==r.duration){var o=parseInt(i,10);r.skipDelay=r.duration*(o/100)}else r.skipDelay=C.parseDuration(i);var a=C.childByName(e,"VideoClicks");if(a){var s=C.childByName(a,"ClickThrough");r.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:C.parseNodeText(s)}:null,C.childrenByName(a,"ClickTracking").forEach((function(e){r.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})})),C.childrenByName(a,"CustomClick").forEach((function(e){r.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})}))}var l=C.childByName(e,"AdParameters");l&&(r.adParameters=C.parseNodeText(l)),C.childrenByName(e,"TrackingEvents").forEach((function(e){C.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),i=C.parseNodeText(e);if(t&&i){if("progress"===t){if(!(n=e.getAttribute("offset")))return;t="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(C.parseDuration(n)))}Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i)}}))})),C.childrenByName(e,"MediaFiles").forEach((function(e){C.childrenByName(e,"MediaFile").forEach((function(e){r.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=C.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var n=e.getAttribute("scalable");n&&"string"==typeof n&&(t.scalable=C.parseBoolean(n));var r=e.getAttribute("maintainAspectRatio");return r&&"string"==typeof r&&(t.maintainAspectRatio=C.parseBoolean(r)),t}(e))}));var t=C.childByName(e,"InteractiveCreativeFile");t&&(r.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:C.parseBoolean(e.variableDuration),fileURL:null}}(C.parseAttributes(e));return t.fileURL=C.parseNodeText(e),t}(t));var n=C.childByName(e,"ClosedCaptionFiles");n&&C.childrenByName(n,"ClosedCaptionFile").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(C.parseAttributes(e));t.fileURL=C.parseNodeText(e),r.closedCaptionFiles.push(t)}));var i,o,a,s=C.childByName(e,"Mezzanine"),l=(i=s,o={},a=!1,["delivery","type","width","height"].forEach((function(e){i&&i.getAttribute(e)?o[e]=i.getAttribute(e):a=!0})),a?null:o);if(l){var c={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};c.id=s.getAttribute("id"),c.fileURL=C.parseNodeText(s),c.delivery=l.delivery,c.codec=s.getAttribute("codec"),c.type=l.type,c.width=parseInt(l.width,10),c.height=parseInt(l.height,10),c.fileSize=parseInt(s.getAttribute("fileSize"),10),c.mediaType=s.getAttribute("mediaType")||"2D",r.mezzanine=c}}));var c=C.childByName(e,"Icons");return c&&C.childrenByName(c,"Icon").forEach((function(e){r.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=C.parseDuration(e.getAttribute("offset")),t.duration=C.parseDuration(e.getAttribute("duration")),C.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=C.parseNodeText(e)})),C.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=C.parseNodeText(e)})),C.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=C.parseNodeText(e)}));var n=C.childByName(e,"IconClicks");return n&&(t.iconClickThroughURLTemplate=C.parseNodeText(C.childByName(n,"IconClickThrough")),C.childrenByName(n,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})}))),t.iconViewTrackingURLTemplate=C.parseNodeText(C.childByName(e,"IconViewTracking")),t}(e))})),r}function k(e,t){var n=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,n=e.adId,r=e.sequence,i=e.apiFramework;return{id:t,adId:n,sequence:r,apiFramework:i,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return C.childrenByName(e,"TrackingEvents").forEach((function(e){var t,r;C.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),r=C.parseNodeText(e),t&&r&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(r))}))})),C.childrenByName(e,"NonLinear").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=C.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=C.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=C.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),C.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=C.parseNodeText(e)})),C.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=C.parseNodeText(e)})),C.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=C.parseNodeText(e)}));var r=C.childByName(e,"AdParameters");r&&(t.adParameters=C.parseNodeText(r)),t.nonlinearClickThroughURLTemplate=C.parseNodeText(C.childByName(e,"NonLinearClickThrough")),C.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:C.parseNodeText(e)})})),n.variations.push(t)})),n}function L(e){var t=[];return e.forEach((function(e){var n=function e(t){if("#comment"===t.nodeName)return null;var n,r={name:null,value:null,attributes:{},children:[]},i=t.attributes,o=t.childNodes;if(r.name=t.nodeName,t.attributes)for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];s.nodeName&&s.nodeValue&&(r.attributes[s.nodeName]=s.nodeValue)}for(var l in o)if(o.hasOwnProperty(l)){var c=e(o[l]);c&&r.children.push(c)}if(0===r.children.length||1===r.children.length&&["#cdata-section","#text"].indexOf(r.children[0].name)>=0){var u=C.parseNodeText(t);""!==u&&(r.value=u),r.children=[]}return null===(n=r).value&&0===Object.keys(n.attributes).length&&0===n.children.length?null:r}(e);n&&t.push(n)})),t}function O(e){var t=[];return e.forEach((function(e){var n,r={id:e.getAttribute("id")||null,adId:x(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},i=[];C.childrenByName(e,"UniversalAdId").forEach((function(e){var t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:C.parseNodeText(e)};i.push(t)}));var o=C.childByName(e,"CreativeExtensions");for(var a in o&&(n=L(C.childrenByName(o,"CreativeExtension"))),e.childNodes){var s=e.childNodes[a],l=void 0;switch(s.nodeName){case"Linear":l=D(s,r);break;case"NonLinearAds":l=k(s,r);break;case"CompanionAds":l=R(s,r)}l&&(i&&(l.universalAdIds=i),n&&(l.creativeExtensions=n),t.push(l))}})),t}function x(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var V={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function N(e,t){if(V[e.nodeName]&&V[e.nodeName].attributes){var n=V[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));n.length>0&&j({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:n},t)}}function U(e,t,n){var r=V[e.nodeName],i=!n&&"Wrapper"!==e.nodeName;if(r&&!i){if(r.subElements){var o=r.subElements.filter((function(t){return!C.childByName(e,t)}));o.length>0&&j({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:o},t)}n&&r.oneOfinLineResources&&(r.oneOfinLineResources.some((function(t){return C.childByName(e,t)}))||j({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},t))}}function M(e){return e.children&&0!==e.children.length}function j(e,t){var n=e.name,r=e.parentName,i=e.attributes,o=e.subElements,a=e.oneOfResources,s="Element '".concat(n,"'");t("VAST-warning",{message:s+=i?" missing required attribute(s) '".concat(i.join(", "),"' "):o?" missing required sub element(s) '".concat(o.join(", "),"' "):a?" must provide one of the following '".concat(a.join(", "),"' "):" is empty",parentElement:r,specVersion:4.1})}var F=function e(t,n,r){if(t&&t.nodeName)if("InLine"===t.nodeName&&(r=!0),N(t,n),M(t)){U(t,n,r);for(var i=0;i<t.children.length;i++)e(t.children[i],n,r)}else 0===C.parseNodeText(t).length&&j({name:t.nodeName,parentName:t.parentNode.nodeName},n)};function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.allowMultipleAds,i=n.followAdditionalWrappers,o=e.childNodes;for(var a in o){var s=o[a];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==i)){if(C.copyNodeAttribute("id",e,s),C.copyNodeAttribute("sequence",e,s),C.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:H(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:q(s,t,{allowMultipleAds:r}),type:"INLINE"}}}}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.allowMultipleAds;return!1===r&&e.getAttribute("sequence")?null:W(e,t)}function W(e,t){var n=[];t&&F(e,t);var r=e.childNodes,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(C.parseAttributes(e));for(var o in r){var a=r[o];switch(a.nodeName){case"Error":i.errorURLTemplates.push(C.parseNodeText(a));break;case"Impression":i.impressionURLTemplates.push({id:a.getAttribute("id")||null,url:C.parseNodeText(a)});break;case"Creatives":i.creatives=O(C.childrenByName(a,"Creative"));break;case"Extensions":var s=C.childrenByName(a,"Extension");i.extensions=L(s),i.adVerifications.length||(n=G(s));break;case"AdVerifications":i.adVerifications=J(C.childrenByName(a,"Verification"));break;case"AdSystem":i.system={value:C.parseNodeText(a),version:a.getAttribute("version")||null};break;case"AdTitle":i.title=C.parseNodeText(a);break;case"AdServingId":i.adServingId=C.parseNodeText(a);break;case"Category":i.categories.push({authority:a.getAttribute("authority")||null,value:C.parseNodeText(a)});break;case"Expires":i.expires=parseInt(C.parseNodeText(a),10);break;case"ViewableImpression":i.viewableImpression.push(Y(a));break;case"Description":i.description=C.parseNodeText(a);break;case"Advertiser":i.advertiser={id:a.getAttribute("id")||null,value:C.parseNodeText(a)};break;case"Pricing":i.pricing={value:C.parseNodeText(a),model:a.getAttribute("model")||null,currency:a.getAttribute("currency")||null};break;case"Survey":i.survey=C.parseNodeText(a);break;case"BlockedAdCategories":i.blockedAdCategories.push({authority:a.getAttribute("authority")||null,value:C.parseNodeText(a)})}}return n.length&&(i.adVerifications=i.adVerifications.concat(n)),i}function H(e,t){var n=W(e,t),r=e.getAttribute("followAdditionalWrappers"),i=e.getAttribute("allowMultipleAds"),o=e.getAttribute("fallbackOnNoAd");n.followAdditionalWrappers=!r||C.parseBoolean(r),n.allowMultipleAds=!!i&&C.parseBoolean(i),n.fallbackOnNoAd=o?C.parseBoolean(o):null;var a=C.childByName(e,"VASTAdTagURI");if(a?n.nextWrapperURL=C.parseNodeText(a):(a=C.childByName(e,"VASTAdTagURL"))&&(n.nextWrapperURL=C.parseNodeText(C.childByName(a,"URL"))),n.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){n.trackingEvents||(n.trackingEvents={}),n.trackingEvents[e.type]||(n.trackingEvents[e.type]={});var t=function(t){var r=e.trackingEvents[t];Array.isArray(n.trackingEvents[e.type][t])||(n.trackingEvents[e.type][t]=[]),r.forEach((function(r){n.trackingEvents[e.type][t].push(r)}))};for(var r in e.trackingEvents)t(r)}e.videoClickTrackingURLTemplates&&(Array.isArray(n.videoClickTrackingURLTemplates)||(n.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){n.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(n.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(n.videoCustomClickURLTemplates)||(n.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){n.videoCustomClickURLTemplates.push(e)})))}})),n.nextWrapperURL)return n}function J(e){var t=[];return e.forEach((function(e){var n={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},r=e.childNodes;for(var i in C.assignAttributes(e.attributes,n),r){var o=r[i];switch(o.nodeName){case"JavaScriptResource":case"ExecutableResource":n.resource=C.parseNodeText(o),C.assignAttributes(o.attributes,n);break;case"VerificationParameters":n.parameters=C.parseNodeText(o)}}var a=C.childByName(e,"TrackingEvents");a&&C.childrenByName(a,"Tracking").forEach((function(e){var t=e.getAttribute("event"),r=C.parseNodeText(e);t&&r&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(r))})),t.push(n)})),t}function G(e){var t=null,n=[];return e.some((function(e){return t=C.childByName(e,"AdVerifications")})),t&&(n=J(C.childrenByName(t,"Verification"))),n}function Y(e){var t={};t.id=e.getAttribute("id")||null;var n=e.childNodes;for(var r in n){var i=n[r],o=i.nodeName,a=C.parseNodeText(i);if(("Viewable"===o||"NotViewable"===o||"ViewUndetermined"===o)&&a){var s=o.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(a)}}return t}var z=function(){function e(){i(this,e),this._handlers=[]}return a(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(r(t)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(r(e)));return this._handlers.push({event:e,handler:t}),this}},{key:"once",value:function(e,t){return this.on(e,function(e,t,n){var r={fired:!1,wrapFn:void 0};function i(){r.fired||(e.off(t,r.wrapFn),r.fired=!0,n.bind(e).apply(void 0,arguments))}return r.wrapFn=i,i}(this,e,t))}},{key:"off",value:function(e,t){return this._handlers=this._handlers.filter((function(n){return n.event!==e||n.handler!==t})),this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!1;return this._handlers.forEach((function(t){"*"===t.event&&(i=!0,t.handler.apply(t,[e].concat(n))),t.event===e&&(i=!0,t.handler.apply(t,n))})),i}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:"listeners",value:function(e){return this._handlers.reduce((function(t,n){return n.event===e&&t.push(n.handler),t}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}(),X=function(e,t,n){n(new Error("Please bundle the library for node to use the node urlHandler"))},K=12e4;function Q(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function Z(e,t,n){var r=n?408:e.status,i=n?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms (").concat(r,")"):"XHRURLHandler: ".concat(e.statusText," (").concat(r,")");t(new Error(i),null,{statusCode:r})}var $=function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=Q();r.open("GET",e),r.timeout=t.timeout||K,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):Z(e,t,!1)}(r,n)},r.onerror=function(){return Z(r,n,!1)},r.onabort=function(){return Z(r,n,!1)},r.ontimeout=function(){return Z(r,n,!0)},r.send()}catch(e){n(new Error("XHRURLHandler: Unexpected error"))}},ee=function(){return!!Q()},te={get:function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),"undefined"==typeof window||null===window?X(e,t,n):ee()?$(e,t,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},ne=0,re=0,ie=function(e,t){!e||!t||e<=0||t<=0||(re=(re*ne+8*e/t)/++ne)},oe={ERRORCODE:900,extensions:[]},ae=function(e){l(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return a(n,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.emit("VAST-error",Object.assign.apply(Object,[{},oe,t].concat(r))),S.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return re}},{key:"fetchVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(o,a){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var s=Date.now();t.emit("VAST-resolving",{url:e,previousUrl:r,wrapperDepth:n,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout,wrapperAd:i}),t.urlHandler.get(e,t.fetchingOptions,(function(i,l){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Math.round(Date.now()-s),d=Object.assign({url:e,previousUrl:r,wrapperDepth:n,error:i,duration:u},c);t.emit("VAST-resolved",d),ie(c.byteLength,u),i?a(i):o(l)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||K,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||te,this.vastVersion=null,ie(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var n=e?S.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(n,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(r){return n.previousUrl=e,n.isRootVAST=!0,n.url=e,t.parse(r,n).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),n.isRootVAST=!0,this.parse(e,n).then((function(e){return t.buildVASTResponse(e)}))}},{key:"buildVASTResponse",value:function(e){var t,n={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(n),n}},{key:"parseVastXml",value:function(e,t){var n=t.isRootVAST,r=void 0!==n&&n,i=t.url,o=void 0===i?null:i,a=t.wrapperDepth,s=void 0===a?0:a,l=t.allowMultipleAds,c=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:o,wrapperDepth:s}),new Error("Invalid VAST XMLDocument");var u=[],d=e.documentElement.childNodes,p=e.documentElement.getAttribute("version");for(var h in r&&p&&(this.vastVersion=p),d){var f=d[h];if("Error"===f.nodeName){var v=C.parseNodeText(f);r?this.rootErrorURLTemplates.push(v):this.errorURLTemplates.push(v)}else if("Ad"===f.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&u.length>1)break;var m=B(f,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:c});m.ad?(u.push(m.ad),this.emit("VAST-ad-parsed",{type:m.type,url:o,wrapperDepth:s,adIndex:u.length-1,vastVersion:p})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return u}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,r=void 0===n?null:n,i=t.resolveAll,o=void 0===i||i,a=t.wrapperSequence,s=void 0===a?null:a,l=t.previousUrl,c=void 0===l?null:l,u=t.wrapperDepth,d=void 0===u?0:u,p=t.isRootVAST,h=void 0!==p&&p,f=t.followAdditionalWrappers,v=t.allowMultipleAds,m=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&h&&(v=!0);try{m=this.parseVastXml(e,{isRootVAST:h,url:r,wrapperDepth:d,allowMultipleAds:v,followAdditionalWrappers:f})}catch(e){return Promise.reject(e)}return 1===m.length&&null!=s&&(m[0].sequence=s),!1===o&&(this.remainingAds=C.splitVAST(m),m=this.remainingAds.shift()),this.resolveAds(m,{wrapperDepth:d,previousUrl:c,url:r})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=n.wrapperDepth,i=n.previousUrl,o=n.url,a=[];return i=o,t.forEach((function(t){var n=e.resolveWrappers(t,r,i);a.push(n)})),Promise.all(a).then((function(t){var n=S.flatten(t);if(!n&&e.remainingAds.length>0){var a=e.remainingAds.shift();return e.resolveAds(a,{wrapperDepth:r,previousUrl:i,url:o})}return n}))}},{key:"resolveWrappers",value:function(e,t,n){var r=this;return new Promise((function(i){var o;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,i(e);if(t>=r.maxWrapperDepth||-1!==r.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,i(e);e.nextWrapperURL=C.resolveVastAdTagURI(e.nextWrapperURL,n),r.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var a=null!==(o=r.parsingOptions.allowMultipleAds)&&void 0!==o?o:e.allowMultipleAds,s=e.sequence;r.fetchVAST(e.nextWrapperURL,t,n,e).then((function(o){return r.parse(o,{url:e.nextWrapperURL,previousUrl:n,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:a}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],i(e);t.forEach((function(t){t&&C.mergeWrapperAdData(t,e)})),i(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,i(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var n=e.ads[t];(n.errorCode||0===n.creatives.length)&&(this.trackVastError(n.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}}]),n}(z),se=null,le={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ce=function(){function e(){i(this,e),this.storage=this.initStorage()}return a(e,[{key:"initStorage",value:function(){if(se)return se;try{se="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){se=null}return se&&!this.isStorageDisabled(se)||(se=le).clear(),se}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),ue=function(){function e(t,n,r){i(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=n||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new ae,this.storage=r||new ce,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return a(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();return(n=Object.assign({},this.defaultOptions,n)).hasOwnProperty("resolveAll")||(n.resolveAll=!1),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,new Promise((function(i,o){if(t.cappingFreeLunch>=t.totalCalls)return o(new Error("VAST call canceled  FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var a=r-t.lastSuccessfulAd;if(a<0)t.lastSuccessfulAd=0;else if(a<t.cappingMinimumTimeInterval)return o(new Error("VAST call canceled  (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,n).then((function(e){return i(e)})).catch((function(e){return o(e)}))}))}}]),e}(),de=function(e){l(o,e);var t=p(o);function o(e,n,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l in i(this,o),(a=t.call(this)).ad=n,a.creative=r,a.variation=s,a.muted=!1,a.impressed=!1,a.skippable=!1,a.trackingEvents={},a.lastPercentage=0,a._alreadyTriggeredQuartiles={},a.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],a.creative.trackingEvents){var c=a.creative.trackingEvents[l];a.trackingEvents[l]=c.slice(0)}return P(a.creative)?a._initLinearTracking():a._initVariationTracking(),e&&a.on("start",(function(){e.lastSuccessfulAd=Date.now()})),a}return a(o,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return"companionAd"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){S.isValidTimeValue(e)&&(this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(S.isValidTimeValue(e)&&"object"===r(n)){var i=this.skipDelay||-1;if(-1===i||this.skippable||(i>e?this.emit("skip-countdown",i-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var o=Math.round(e/this.assetDuration*100),a=[];if(e>0){a.push("start");for(var s=this.lastPercentage;s<o;s++)a.push("progress-".concat(s+1,"%"));for(var l in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(l,this.quartiles[l],e)&&(a.push(l),this._alreadyTriggeredQuartiles[l]=!0);this.lastPercentage=o}a.forEach((function(e){t.track(e,{macros:n,once:!0})})),e<this.progress&&this.track("rewind",{macros:n})}this.progress=e}}},{key:"isQuartileReached",value:function(e,t,n){var r=!1;return t<=n&&!this._alreadyTriggeredQuartiles[e]&&(r=!0),r}},{key:"setMuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e)}},{key:"setPaused",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e)}},{key:"setFullscreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e)}},{key:"setExpand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e)}},{key:"setSkipDelay",value:function(e){S.isValidTimeValue(e)&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&(this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e})))}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"object"===r(e)&&"boolean"==typeof t&&this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&"boolean"==typeof t&&(this.error({ERRORCODE:e},t),console.log("The method errorWithCode is deprecated, please use vast tracker error method instead"))}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&(this.track("notUsed",{macros:e}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e&&"object"===r(t)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var n=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!n)throw new Error("No associated verification element found for vendor: ".concat(e));var i=n.trackingEvents;if(i&&i.verificationNotExecuted){var o=i.verificationNotExecuted;this.trackURLs(o,t),this.emit("verificationNotExecuted",{trackingURLTemplates:o})}}}},{key:"overlayViewDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&"object"===r(t)&&(t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t}))}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("skip",{macros:e})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null===e||"string"==typeof e)&&"object"===r(t)){this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var i=this.clickThroughURLTemplate||e,o=n({},t);if(i){this.progress&&(o.ADPLAYHEAD=this.progressFormatted());var a=S.resolveURLTemplates([i],o)[0];this.emit("clickthrough",a)}}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.macros,i=void 0===n?{}:n,o=t.once,a=void 0!==o&&o;if("object"===r(i)){"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var s=this.trackingEvents[e],l=this.emitAlwaysEvents.indexOf(e)>-1;s?(this.emit(e,{trackingURLTemplates:s}),this.trackURLs(s,i)):l&&this.emit(e,null),a&&(delete this.trackingEvents[e],l&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}}},{key:"trackURLs",value:function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n({},i);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(a.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(a.ADPLAYHEAD=this.progressFormatted())),null!==(t=this.creative)&&void 0!==t&&null!==(r=t.universalAdIds)&&void 0!==r&&r.length&&(a.UNIVERSALADID=this.creative.universalAdIds.map((function(e){return e.idRegistry.concat(" ",e.value)})).join(",")),this.ad&&(this.ad.sequence&&(a.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(a.ADTYPE=this.ad.adType),this.ad.adServingId&&(a.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(a.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(a.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),S.track(e,a,o)}},{key:"convertToTimecode",value:function(e){if(!S.isValidTimeValue(e))return"";var t=1e3*e,n=Math.floor(t/36e5),r=Math.floor(t/6e4%60),i=Math.floor(t/1e3%60),o=Math.floor(t%1e3);return"".concat(S.addLeadingZeros(n,2),":").concat(S.addLeadingZeros(r,2),":").concat(S.addLeadingZeros(i,2),".").concat(S.addLeadingZeros(o,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),o}(z);e.VASTClient=ue,e.VASTParser=ae,e.VASTTracker=de,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t){t.getDeviceInfo=function(){var e,t,n={os:"",osv:"0",make:"",model:"",mobile:!1};try{(e=navigator.userAgent)||(e=window.navigator.userAgent)}catch(t){e=window.navigator.userAgent}if(/iPod/i.test(e))n.os="iOS",n.osv=(e.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPod",n.mobile=!0;else if(/iPhone/i.test(e))n.os="iOS",n.osv=(e.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPhone",n.mobile=!0;else if(/iPad/i.test(e))n.os="iOS",n.osv=(e.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPad",n.mobile=!0;else if(/Android/i.test(e)){if(n.os="Android",n.mobile=!0,t=/\Android.([\d\.]+).*;\s(\w*;\s)?(.*)\sBuild.*\)/i.exec(e)){n.osv=t[1]||"0";var r=t[3]||"";/HTC/i.test(r)?(n.make="HTC",t=/HTC\s(.*)/i.exec(r),n.model=t?t[1]:""):/ASUS/i.test(r)?(n.make="ASUS",t=/ASUS\s(.*)/i.exec(r),n.model=t?t[1]:""):/ALCATEL/i.test(r)?(n.make="ALCATEL",t=/ALCATEL\s(.*)/i.exec(r),n.model=t?t[1]:""):/BLU/i.test(r)?(n.make="BLU",t=/BLU\s(.*)/i.exec(r),n.model=t?t[1]:""):/ME17\d/i.test(r)?(n.make="ASUS",n.model=r):/Nexus/i.test(r)?(n.make="Google",n.model=r):/Lenovo/i.test(r)?(n.make="Lenovo",/Lenovo\s(.*)/i):/IdeaTab/i.test(r)?(n.make="Lenovo",n.model=r):/Huawei/i.test(e)?(n.make="Huawei",n.model=r):/SGP\d/i.test(r)||/LT[1-9]\d/i.test(r)?(n.make="Sony",n.model=r):/HP/i.test(r)?(n.make="HP",t=/HP\s(.*)/i.exec(r),n.model=t?t[1]:""):/A1-/i.test(r)||/B11-/i.test(r)?(n.make="Acer",n.model=r):/GT-/i.test(r)?(n.make="Samsung",t=/(GT-.*)/i.exec(r),n.model=t?t[1]:""):/SM-/i.test(r)?(n.make="Samsung",t=/(SM-.*)/i.exec(r),n.model=t?t[1]:""):/SPH-/i.test(r)?(n.make="Samsung",t=/(SPH-.*)/i.exec(r),n.model=t?t[1]:""):/SCH-/i.test(r)?(n.make="Samsung",t=/(SCH-.*)/i.exec(r),n.model=t?t[1]:""):/SGH-/i.test(r)?(n.make="Samsung",t=/(SGH-.*)/i.exec(r),n.model=t?t[1]:""):/DROID/i.test(r)?(n.make="Motorola",t=/(DROID.*)/i.exec(r),n.model=t?t[1]:""):/XT/i.test(r)?(n.make="Motorola",t=/(XT.*)/i.exec(r),n.model=t?t[1]:""):/LG-/i.test(r)?(n.make="LG",t=/(LG-.*)/i.exec(r),n.model=t?t[1]:""):/VS/i.test(r)?(n.make="LG",t=/(VS.*)/i.exec(r),n.model=t?t[1]:""):/Z[1-9]/i.test(r)?(n.make="ZTE",t=/(Z[1-9].*)/i.exec(r),n.model=t?t[1]:""):/NX[1-9]/i.test(r)?(n.make="NEXTBOOK",t=/(NX[1-9].*)/i.exec(r),n.model=t?t[1]:""):/C5[1-9]/i.test(r)?(n.make="Kyocera",t=/(C5[1-9].*)/i.exec(r),n.model=t?t[1]:""):n.model=r}}else/Windows.Phone/i.test(e)||/WPDesktop/i.test(e)?(n.os="WindowsPhone",n.osv=(e.match(/Windows.Phone\s([0-9]+\.[0-9])/)||[""])[1]||8,n.mobile=!0,/NOKIA/i.test(e)&&(n.make="Nokia",t=/NOKIA;\s(.*?)(;|\))/i.exec(e),n.model=t?t[1]:"")):/BlackBerry/i.test(e)||navigator.userAgent.match(/BB10/i)?(n.os="BlackBerry",e.indexOf("Version/")>=0?(t=/Version\/(.*?)\s/i.exec(e),n.osv=t?t[1]:""):(t=/BlackBerry.*\/(.*?)\s/i.exec(e),n.osv=t?t[1]:""),n.mobile=!0):/Windows/i.test(e)?(n.os="Windows",t=/Windows\sNT\s(.*?)(;|\)|\s)/i.exec(e),n.osv=t?t[1]:""):/Mac\sOS/i.test(e)&&(n.os="MacOS",t=/Mac\sOS\sX\s(.*?)(;|\)|\s)/i.exec(e),n.osv=t?t[1]:"");return n}},function(e,t,n){"use strict";n.r(t);n(7);var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function i(e,t,n){return null!=e?e:null!=t?t:n}function o(e,t,n){return void 0!==e?e:void 0!==t?t:n}function a(e,t){return null!=e?t(e):e}function s(e,t){if(Array.isArray(e))return e.length>0;if(e&&"object"==typeof e){var n=!1;return d((function(){return n=!0}),e),n}if("string"==typeof e){if(!isNaN(e))return!!+e;if(t)switch(e.toLowerCase()){case"true":return!0;case"false":return!1;default:return null}}return!!e}var l=function(e){return null!=e},c=function(e){return void 0!==e},u=function(e){return s(e)};function d(e,t){if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function p(e,t,n,r){if(null==n||null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),o=0,a=Array.isArray(r)?r:[r];o<a.length;o++){d((function(n,r){(!0===t||t(n,r,i))&&(!0===e||e.indexOf(r)>=0)&&(i[r]=n)}),a[o])}return i}function h(e,t,n){return p(!0,e,t,n)}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return p(!0,!0,e,t)}function v(e,t){return null==e||""===e?o(t,c(e)?null:void 0):i(s(e,!0),t,null)}function m(e,t){return null==e||""===e?o(t,c(e)?null:void 0):isNaN(e)?o(t,null):+e}function A(e,t){return null==e?o(t,e):""+e}function y(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i={},o=0,a=n;o<a.length;o++)for(var s=a[o],l=0,c=s;l<c.length;l++){var u=c[l],d="function"==typeof t?t(u):u[t];null!=d&&(i[d]=h(e,i[d]||{},u))}return Object.keys(i).map((function(e){return i[e]}))}var g=function(){function e(e){void 0===e&&(e=1/0),this.msec=e,this.startedAt=null,this.elapsed=null}return e.delay=function(t,n){void 0===t&&(t=0);var r=0;return"function"==typeof t?n=t:r=t,new e(r).start(n)},e.Seconds=function(t){return new e(1e3*t)},e.prototype.cancel=function(){this.resolve=null,this.pause(),this.reject&&(this.reject({cancelled:!0}),this.reject=null)},e.prototype.reset=function(e){return this.pause(),this.msec=e,this},e.prototype.Seconds=function(e){return this.reset(1e3*e)},e.prototype.start=function(e){this.cancel();var t=this.hold(e);return this.timerId=setTimeout(this.resolve,this.msec),this.startedAt=Date.now(),this.elapsed=0,t},e.prototype.pause=function(){null!=this.timerId&&(clearTimeout(this.timerId),this.timerId=null,null!=this.startedAt&&(this.elapsed=(this.elapsed||0)+Math.max(0,Date.now()-this.startedAt)),this.startedAt=null)},e.prototype.resume=function(){this.rewind(Math.max(0,this.msec-(this.elapsed||0)))},e.prototype.hold=function(e){var t=this,n=new Promise((function(e,n){t.resolve=e,t.reject=n})).then((function(){return t.pause()}));return e?n.then(e):n},e.prototype.rewind=function(e){this.pause(),this.resolve&&(this.timerId=setTimeout(this.resolve,null!=e?e:this.msec),this.startedAt=Date.now())},e.prototype.trigger=function(){this.reject=null,this.resolve&&this.resolve(),this.cancel()},e}(),E=function(){this.demandMaxAdStarts=null,this.initVpaidOnStart=!1,this.expectedSureFastStart=null,this.iframeSlot=!0,this.impressionOnlyWithVideoStart=!1,this.suggestedDuration=10,this.useIMA=null,this.isVidible=!1,this.vastPreferType=null,this.vpaidUseJSV=!0,this.moat=null,this.intent=!1},b=function(e,t,n,r){void 0===r&&(r=l),this.parser=e,this.parName=t,this.prio=n,this.filter=r},T={type:new b(A,"type"),originalType:new b(A,"originalType"),adContent:new b((function(e){return e}),"adContent"),allowLongImpressions:new b(v,"ali",(function(e,t){return e&&t})),clickText:new b(A,"actext"),clickTextEnabled:new b(v,"actcall"),controlBar:new b(v,"co"),initVpaidOnStart:new b(v,"initVpaidOnStart"),demandMaxAdStarts:new b(m,"dmas",Math.min),enableAdUI:new b(v,"adui"),expectedSureFastStart:new b(v,"sff"),iframeSlot:new b(v,"ifsl"),impressionOnlyWithVideoStart:new b(v,"strictImp"),interactive:new b(v,"interactive"),isVidible:new b(v,"vidible"),keepAlive:new b(m,"ka",Math.min),sandbox:new b(v,"sb"),skipOffset:new b(m,"skipOffset",Math.min),suggestedDuration:new b(m,"sdur",Math.min),useIMA:new b(v,"IMA"),vastPreferType:new b(m,"vt"),viewableOnStart:new b(v,"vos"),vpaidUseJSV:new b(v,"vjsv"),moat:new b((function(e){return e}),"moat",(function(e,t){return f({},t,e)})),impDetail:new b(v,"impDetail"),reqLimit:new b(m,"reqLimit"),stopAdsOnImpression:new b(v,"stopAdsOnImpression"),requireViewability:new b(v,"vb")};function _(e){return"[object String]"===Object.prototype.toString.call(e)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function S(e){return w(e)?e.slice():e?[e]:[]}function I(e){return"object"==typeof e&&null!==e&&!1===w(e)&&e.constructor&&"Object"===e.constructor.name}function C(e){return e&&(((new Date).getTime()-e)/1e3).toFixed(1)}function R(e,t,n){try{var r=document.createElement("script"),i=document.getElementsByTagName("head")[0]||document.documentElement;r.setAttribute("type","text/javascript"),t&&(r.async=!0),r.src=e,n&&r.addEventListener("load",n),i.appendChild(r)}catch(e){}}function P(e,t){return void 0===e&&(e=null),void 0===t&&(t=1),new Promise((function(n,r){try{var i=document.createElement("iframe");i.style.display="none",e&&(i.src=e),i.onerror=function(e){return r(e)};var o=setTimeout((function(){return n(i)}),1e3*t);i.onload=function(){clearTimeout(o),n(i)},document.body.appendChild(i)}catch(e){r(e)}}))}var D,k={onLoadedFuncs:[]};function L(e,t,n,r){void 0===r&&(r=!1);var i=document.getElementsByTagName("head")[0]||document.documentElement;if(!r||(k.onLoadedFuncs[e]=k.onLoadedFuncs[e]||[],n&&k.onLoadedFuncs[e].push(n),!document.getElementById(e))){var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.id=e,o.onload=function(){if(r)for(;k.onLoadedFuncs[e].length;)k.onLoadedFuncs[e].shift()();else n()},o.src=t(),i.appendChild(o)}}function O(e){if(e.length>1)for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[n];e[n]=e[t],e[t]=r}return e}function x(e,t){if(e.find)return e.find(t);for(var n=0,r=e;n<r.length;n++){var i=r[n];if(t(i))return i}}function V(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function N(e,t,n){try{var r=new URL(e);return null===n?r.searchParams.delete(t):r.searchParams.set(t,n),r.toString()}catch(e){}return e}function U(e,t){return Object.keys(t).forEach((function(n){I(e[n])&&I(t[n])?U(e[n],t[n]):e[n]=t[n]})),e}function M(e){return null==e}function j(e){try{if(e&&0===e.protocol.indexOf("file"))return!0;if(document&&document.location&&0===document.location.protocol.indexOf("file"))return!0;if(window.location&&0===window.location.protocol.indexOf("file"))return!0;if(location&&0===location.protocol.indexOf("file"))return!0}catch(e){return!0}return!1}function F(){var e="";try{if(parent!==window){e=document.referrer;var t=window.location.ancestorOrigins;if(t){var n=t[t.length-1];n&&e.substring(0,n.length)!=n&&(e=n)}}else e=top.location.href}catch(e){}return e}function B(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)&&void 0!==e[r]&&"function"!=typeof e[r]){var i=String(e[r]);r&&r.length&&i.length?n.push([r,H(i)].join("=")):r&&r.length?n.push(r+"="):i&&i.length&&n.push(i)}return t||n.push("cb="+(new Date).getTime().toFixed(0)),n.join("&")}function q(e,t){var n=B(t),r=-1==e.indexOf("?")&&n.length>0?"?":"";return[e,r,n].join("")}function W(e){try{e=decodeURIComponent(e)}catch(t){try{e=unescape(e)}catch(e){}}return e}function H(e){try{e=encodeURIComponent(e)}catch(t){try{e=escape(e)}catch(e){}}return e}function J(e,t,n){return t&&t.trim&&t.replace?(t=t.trim(),"https:"==e.toLowerCase()&&(t=t.replace(/^http:/i,"https:")),j(n)&&(t=t.replace(/^\/\//,e+"//")),t):t}function G(e,t){if(void 0===t&&(t=window),!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function Y(e,t){var n=void 0===t?{}:t,r=n.noLeadingWww,i=void 0!==r&&r,o=n.noPort,a=void 0!==o&&o;try{e=new URL(G(e))}catch(e){return}return e=a?e.hostname:e.host,i&&e.startsWith("www.")&&(e=e.substring(4)),e}function z(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}function X(e,t){return e.context&&e.context.sourceUrl&&(t=!0),t}function K(e,t){return e&&(t=e),t}function Q(e,t,n,r){return $(e,t)&&(n=!0,r=function(e,t){return t=K(function(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}(e.document),t)}(e,r)),{reachedTop:n,bestCanonicalUrl:r}}function Z(e,t,n){return e&&!t&&(n=e),n}function $(e,t){return e===t.top}function ee(e,t,n,r,i,o){return!e&&t&&t[n-1]&&(e=t[n-1],r=$(i,o)),{foundLocation:e,hasTopLocation:r}}function te(e,t){var n=new URL(e);return Object.entries(t).forEach((function(e){var t=e[0],r=e[1];n.searchParams.append(t,r)})),n.toString()}var ne,re,ie=7e3;!function(e){e[e.E_REQUEST=1]="E_REQUEST",e[e.E_LOADED=2]="E_LOADED",e[e.E_MIDS=3]="E_MIDS",e[e.E_END=4]="E_END",e[e.E_ADSTART=5]="E_ADSTART",e[e.E_ADSTART_WO_IMPRESSION=6]="E_ADSTART_WO_IMPRESSION",e[e.E_CLICK=7]="E_CLICK",e[e.E_VAST_ERROR=8]="E_VAST_ERROR",e[e.E_ACTUAL_REQUEST=9]="E_ACTUAL_REQUEST",e[e.E_START=10]="E_START",e[e.E_SERVED_AND_START=11]="E_SERVED_AND_START",e[e.E_CONTENT_CLICK=12]="E_CONTENT_CLICK",e[e.E_ADPLAYED=13]="E_ADPLAYED",e[e.E_SCHEDULED=14]="E_SCHEDULED",e[e.E_DETECTED=15]="E_DETECTED",e[e.E_PLAYER_ERROR=16]="E_PLAYER_ERROR",e[e.E_SUBMIT_DEBUG_LOG=17]="E_SUBMIT_DEBUG_LOG",e[e.E_CLIENT_EVENT=18]="E_CLIENT_EVENT",e[e.E_AD_SKIPPED=19]="E_AD_SKIPPED"}(ne||(ne={})),function(e){e[e.Video=0]="Video",e[e.FlashVpaid=1]="FlashVpaid",e[e.JsVpaid=3]="JsVpaid",e[e.ImaJs=4]="ImaJs",e[e.FlashJsVpaid=5]="FlashJsVpaid",e[e.Spotx=6]="Spotx"}(re||(re={}));var oe=((D={})[ne.E_REQUEST]={url:"/vpx/requesti"},D[ne.E_LOADED]={url:"/vpx/loadedi"},D[ne.E_MIDS]={url:"/vpx/midsi"},D[ne.E_END]={url:"/vpx/endi",immediate:!0},D[ne.E_ADSTART]={url:"/vpx/starti",immediate:!0},D[ne.E_ADSTART_WO_IMPRESSION]={url:null,immediate:!0},D[ne.E_CLICK]={url:"/vpx/click",immediate:!0},D[ne.E_VAST_ERROR]={url:"/vpx/errori",immediate:!1},D[ne.E_START]={url:"/ppx/starti"},D[ne.E_SERVED_AND_START]={url:"/ppx/served_and_starti"},D[ne.E_ADPLAYED]={url:"/ppx/adplayedi"},D[ne.E_SCHEDULED]={url:null},D[ne.E_DETECTED]={url:null},D[ne.E_PLAYER_ERROR]={url:"/ppx/errori"},D[ne.E_CONTENT_CLICK]={url:null},D[ne.E_ACTUAL_REQUEST]={exclude:!0,server:"a",url:"/areq"},D[ne.E_SUBMIT_DEBUG_LOG]={exclude:!0,url:"sdl"},D[ne.E_CLIENT_EVENT]={exclude:!0,url:"/lpx/v1"},D);var ae={subid:"sid",domain:"domain",domainDetected:"dd",widthDetected:"wd",heightDetected:"hd",sessionId:"se",playerVersion:"pv",timeFromStart:"s",flashSupport:"f",detect:"sa",vastId:"v",playerId:"p",demandId:"dmid",memUsed:"m",time:"t",time2:"t2",duration:"d",quartile:"qd",gpvTime:"gt",fpwReadyTime:"ft",domReadyTime:"dt",gpvM:"gm",roundNo:"r",gpvOrdNo:"gpvn",totalMemS:"tm",vastType:"y",actualVastType:"yy",state:"st",gpvAttempt:"ga",errorCode:"en",errorMessage:"em",mediaURL:"mu",logStartRequest:"ls",logLoadRequest:"lr",cedatoxPlayerId:"cxp",cedatoxVastId:"cxv",chosenVastId:"cv",parentPlayerId:"pp",retryTestGroup:"rtg",gpvCookie:"gpvck",cookie:"ck",eventCookie:"evck",pricing:"pricing",currency:"currency",impType:"impType"},se=["playerId","vastId","demandId"],le=["cedatoxPlayerId","cedatoxVastId","chosenVastId","parentPlayerId"],ce=["eventCookie","subid","domain","sessionId","playerVersion","domainDetected","gpvCookie","detect"],ue=ce.concat(["timeFromStart"]);function de(e,t,n){for(var r=0,i=e.length;r<i;r++)if(void 0!==t[e[r]]&&null!==t[e[r]])switch(e[r]){case"flashSupport":n[e[r]]=t[e[r]]?"1":"0";break;default:n[e[r]]=t[e[r]]}}function pe(e,t,n,r){de(e,t,r),de(e,n,r)}function he(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==ae[n]&&"function"!=typeof ae[n]&&(t[ae[n]]=e[n]);return t}function fe(e,t){for(var n in t)t.hasOwnProperty(n)&&null!=ae[n]&&"function"!=typeof ae[n]&&e.push([n,String(t[n])].join("="))}function ve(e,t,n,r){if(t&&ne[t]){var i=oe[t];i&&i.url&&!i.exclude&&function(e,t,n,r,i){var o=n.url,a=n.immediate,s=n.server;try{var l=a,c=e||{};r=r||{},i=i||{};var u=[];fe(u,c),fe(u,r),fe(u,i);var d=C(e.startTime),p={name:o.substring(o.lastIndexOf("/")+1),common:{},extra:{}};switch(pe(ue,c,{},p.common),p.common.timeFromStart=d,t){case ne.E_REQUEST:pe(se.concat(le),r,i,p.extra);break;case ne.E_LOADED:pe(["memUsed","time","vastType","actualVastType"].concat(se,le),r,i,p.extra),l=l||null!=r&&null!=r.chosenVastId;break;case ne.E_MIDS:pe(["duration","quartile"].concat(se,le),r,i,p.extra);break;case ne.E_END:pe(["duration"].concat(se,le),r,i,p.extra);break;case ne.E_CLICK:pe(se.concat(le),r,i,p.extra);break;case ne.E_ADSTART:pe(["time","roundNo","gpvOrdNo","vastType","actualVastType","retryTestGroup","cookie","widthDetected","heightDetected","pricing","currency","impType"].concat(se,le),r,i,p.extra);break;case ne.E_ADSTART_WO_IMPRESSION:pe(se.concat(le),r,i,p.extra);break;case ne.E_VAST_ERROR:pe(["errorCode","errorMessage","mediaURL","logStartRequest","logLoadRequest","time"].concat(se,le),r,i,p.extra);break;case ne.E_START:case ne.E_SERVED_AND_START:pe(["playerId"],c,i,p.extra);break;case ne.E_SCHEDULED:pe(["playerId","fpwReadyTime","gpvTime","domReadyTime","gpvM","gpvAttempt"],c,i,p.extra),p.extra.time=d;break;case ne.E_DETECTED:pe(["playerId","widthDetected","heightDetected"],c,i,p.extra);break;case ne.E_ADPLAYED:pe(["playerId","gpvOrdNo"],c,i,p.extra),p.extra.time=d;break;case ne.E_CONTENT_CLICK:pe(["playerId"],c,i,p.extra);break;case ne.E_PLAYER_ERROR:pe(["playerId"],c,i,p.extra),pe(["errorCode","errorMessage"],r,i,p.extra)}var h=o.substring(0,o.lastIndexOf("/")),f=e.serverHost(s||e.eventServer)+h;if("/ppx"==h)return void me(e,f,p);if("/vpx"!=h)return;var v=function(){return function e(t,n){if(n){var r=t.eventsQueue[n].events;if(r.length){r.length;try{t.sendStringParams({url:[n,"/multiple-events"].join(""),params:Ae(r),usePost:1==t.multipleEventMethod})}catch(e){}}t.eventsQueue[n].events=[]}else for(var i in t.eventsQueue)t.eventsQueue.hasOwnProperty(i)&&e(t,i)}(e,f)};e.eventsQueue[f]?(e.eventsQueue[f].events.length>=7&&(e.eventsQueue[f].timer.cancel(),v()),e.eventsQueue[f].events.push(p)):e.eventsQueue[f]={timer:new g(ie),events:[p]},1==e.eventsQueue[f].events.length&&e.eventsQueue[f].timer.start().then(v).catch((function(){})),l&&(e.eventsQueue[f].timer.trigger(),e.areqEntryCount>0&&ge(e))}catch(e){}}(e,t,i,n,r),e.playerEvents&&e.playerEvents.emit(ne[t],e,n,r)}}function me(e,t,n){try{var r=[t,"/",n.name,"?"].join("");t=q(r,he(f({},n.common,n.extra))),e.sendPixel(t)}catch(e){}}function Ae(e){for(var t={common:{},eventsList:[],eventsData:[]},n=0,r=e.length;n<r;n++){var i={},o=e[n];if(0==n)t.common=o.common;else for(var a in o.common)o.common.hasOwnProperty(a)&&o.common[a]!=t.common[a]&&(i[a]=o.common[a]);for(var a in o.extra)o.extra.hasOwnProperty(a)&&(i[a]=o.extra[a]);t.eventsList.push(o.name),t.eventsData.push(he(i))}var s=t.eventsList.join(","),l=[];for(n=0;n<t.eventsData.length;n++){var c=t.eventsData[n],u=[];for(var d in c)c.hasOwnProperty(d)&&u.push([d,c[d]].join(":"));l.push(u.join(",").replace(new RegExp("\\|","g"),""))}return f({events:s,data:l.join("|")},he(t.common))}function ye(e,t,n,r){try{if(e.areqEntryCount>=10?ge(e):0==e.areqEntryCount&&(e.areqTimer=setTimeout((function(){return ge(e)}),ie)),r)null==e.areqEventsQueue[r]&&(e.areqEventsQueue[r]=0,e.areqEntryCount+=1),e.areqEventsQueue[r]+=1;else{var i=e.areqEventsQueue[t];null==i&&(i=e.areqEventsQueue[t]={}),null==i[n]&&(i[n]=0,e.areqEntryCount+=1),i[n]+=1}}catch(e){}}function ge(e){Re("flushActualRequests",{players:e},(function(){var t={};pe(ce,e,{},t);var n=he(t),r=1,i=function(e,t){return n[e+r]=t},o=function(e){1!=e&&i("c",e),r++};for(var a in e.areqEventsQueue)if(e.areqEventsQueue.hasOwnProperty(a))if("number"==typeof e.areqEventsQueue[a]){(c=e.areqEventsQueue[a])>0&&(i("dmid",a),o(c))}else{var s=e.areqEventsQueue[a];for(var l in s){var c;if(s.hasOwnProperty(l))(c=s[l])>0&&(i("p",a),i("v",l),o(c))}}var u=oe[ne.E_ACTUAL_REQUEST];e.sendStringParams({url:e.serverHost(u.server)+u.url,params:n,usePost:1==e.areqMethod}),clearTimeout(e.areqTimer),e.areqEntryCount=0,e.areqEventsQueue={}}))}function Ee(e,t,n){e.serverEvents.supplyEvent({name:"SupplyError",errorCode:t,message:n}),ve(e,ne.E_PLAYER_ERROR,{errorCode:t,errorMessage:n},{})}function be(e,t,n){void 0===n&&(n=1)}var Te,_e=function(){function e(){this._loggers=[]}return e.prototype.addLogger=function(e){var t;Array.isArray(e)?(t=this._loggers).push.apply(t,e):this._loggers.push(e)},e.prototype.removeLogger=function(e){var t=this._loggers.indexOf(e);t>-1&&this._loggers.splice(t,1)},e.prototype.log=function(e,t){this._loggers.forEach((function(n){return n.log(e,t)}))},e.prototype.error=function(e,t,n){this._loggers.forEach((function(r){return r.error(e,t,n)}))},e.prototype.remote=function(e,t){this._loggers.forEach((function(n){return null==n?void 0:n.remote(e,t)}))},e.prototype.info=function(e,t){this._loggers.forEach((function(n){return n.info(e,t)}))},e.prototype.warn=function(e,t){this._loggers.forEach((function(n){return n.warn(e,t)}))},e.prototype.debug=function(e,t){this._loggers.forEach((function(n){return n.debug(e,t)}))},e.prototype.trace=function(e,t){this._loggers.forEach((function(n){return n.trace(e,t)}))},e.prototype.hasLoggers=function(){return this._loggers.length>0},e}();!function(e){e[e.NONE=-1]="NONE",e[e.ERROR=0]="ERROR",e[e.REMOTE=1]="REMOTE",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.LOG=4]="LOG",e[e.DEBUG=5]="DEBUG",e[e.TRACE=6]="TRACE",e[e.ALL=7]="ALL"}(Te||(Te={}));var we=function(){return(we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Se=function(){function e(e){var t=(void 0===e?{}:e).level;this.PREFIX="[exco:ap]",this._level=Te.NONE,this._level=null!=t?t:Te.NONE}return e.prototype.error=function(e,t,n){this._level>=Te.ERROR&&this._print("error",e||(null==t?void 0:t.message),we({error:t},n))},e.prototype.remote=function(e,t){this._level>=Te.REMOTE&&this._print("log",e,t)},e.prototype.warn=function(e,t){this._level>=Te.WARN&&this._print("warn",e,t)},e.prototype.log=function(e,t){this._level>=Te.LOG&&this._print("log",e,t||{})},e.prototype.info=function(e,t){this._level>=Te.INFO&&this._print("info",e,t)},e.prototype.debug=function(e,t){this._level>=Te.DEBUG&&this._print("debug",e,t)},e.prototype.trace=function(e,t){this._level>=Te.TRACE&&this._print("trace",e,t)},e.prototype._print=function(e,t,n){window.console[e]("".concat(this.PREFIX," ").concat(t),n)},e}(),Ie=new _e;var Ce=Ie;function Re(e,t,n,r,i){for(var o=t.players,a=[],s=5;s<arguments.length;s++)a[s-5]=arguments[s];try{return n.apply(i,a)}catch(t){return Ee(o,3,e+" - JS exception: "+t.message),Ce.error("Safeguard: ".concat(e),t),r&&r(t)}}function Pe(e,t,n,r,i){for(var o=function(r){var o=function(e,t){return t.playerDataAction?function(n){return t.playerDataAction(e.players,e.playerData,n)}:t.playerAction?function(n){return t.playerAction(e.players,n)}:function(e){return t.action(e)}}(n,r);e.addEventListener(r.type,(function(i){return Re("".concat(t," ").concat(r.type),n,o,r.catcher,e,i)}),i)},a=0,s=r;a<s.length;a++){o(s[a])}}function De(e,t){return function(n){n&&!0!==n.cancelled&&(e&&Ee(e,3,t+" - JS exception: "+n.message),Ce.error("Safecatch: ".concat(t),n))}}var ke=function(){return(ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Le(e){return/.+\.m3u8$/.test(e)}function Oe(e){return e.canPlayType("application/vnd.apple.mpegurl")}function xe(){return new Promise((function(e,t){var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.src="https://cdn.ex.co/player/hls/".concat("1.4.10","-exco/hls.min.js"),r.onload=function(){return e()},r.onerror=function(e){return t(e)},n.appendChild(r)}))}function Ve(){try{if(Hls&&Hls.isSupported())return function(){try{for(var e=Hls.version.split("."),t="1.4.10".split("."),n=!0,r=0;r<e.length;r++)n&&(n=parseInt(e[r],10)>=parseInt(t[r],10));return n}catch(e){}return!1}()}catch(e){}return!1}var Ne,Ue,Me=function(){function e(e){var t=this;this.subscriber={},this.started=!1,this.baseUrl="",this.getSubtitleList=function(){return t.hls.subtitleTracks||[]},this.getSubtitle=function(){return t.hls.subtitleTrack},this.setSubtitle=function(e){null!=e&&t.hls.subtitleTrack!==e&&(t.hls.subtitleTrack=e)},this.getLevelList=function(){return t.hls.levels||[]},this.getLevel=function(){return t.hls.currentLevel},this.setLevel=function(e){null!=e&&t.hls.currentLevel!==e&&(t.hls.currentLevel=e)},this.getAudioList=function(){return t.hls.audioTracks||[]},this.getAudio=function(){return t.hls.audioTrack},this.setAudio=function(e){null!=e&&t.hls.audioTrack!==e&&(t.hls.audioTrack=e)},this.config=ke({},e),e.autoStartLoad=!1,this.hls=new Hls(ke({enableWorker:!0,startLevel:-1,capLevelToPlayerSize:!0,autoLevelEnabled:!0,maxBufferLength:10,maxMaxBufferLength:20},e)),this.hls.on(Hls.Events.MANIFEST_PARSED,(function(){var e,n,r;(null===(e=t.config)||void 0===e?void 0:e.forceHighestQuality)&&(t.hls.nextLevel=t.getLevelList().length-1),(null===(n=t.config)||void 0===n?void 0:n.autoStartLoad)&&(t.hls.startLoad(-1),t.started=null===(r=t.config)||void 0===r?void 0:r.autoStartLoad)})),this.hls.on(Hls.Events.ERROR,(function(e,n){var r=t.subscriber[Hls.Events.ERROR];"function"==typeof r&&r("HLS error",n)})),this.hls.on(Hls.Events.LEVEL_LOADED,(function(e,n){t.baseUrl=n.details.url,t.started||(t.started=!0,t.hls.startLoad(-1))}))}return e.prototype.init=function(e,t){var n=this;this.hls.once(Hls.Events.FRAG_LOADING,(function(e,t){try{var r=t.frag.baseUrl;n.baseUrl&&r&&r!==n.baseUrl&&(n.hls.stopLoad(),n.started=!1)}catch(e){}})),this.hls.loadSource(t),this.hls.attachMedia(e)},e.prototype.onError=function(e){this.subscriber[Hls.Events.ERROR]=e},e.prototype.recoverMediaError=function(){this.hls.recoverMediaError()},e.prototype.destroy=function(){this.hls.destroy()},e.prototype.play=function(){this.started||(this.started=!0,this.hls.startLoad(-1))},e.prototype.setEnded=function(){this.started=!1},e}(),je=function(){function e(){var e=this;this.subtitleTrack=-1,this.subtitleTracks=[],this.audioTrack=0,this.audioTracks=[],this.subscriber={},this.onErrorEvent=function(t){var n=e.subscriber.error;n&&n(t.message)},this.onLoadedEvent=function(){try{if(e.video.textTracks)for(var t=0;t<e.video.textTracks.length;t++){"captions"!=(n=e.video.textTracks[t]).kind&&"subtitles"!=n.kind||(e.subtitleTracks.push(ke(ke({},n),{name:n.label})),n.mode="disabled")}if(e.video.audioTracks)for(t=0;t<e.video.audioTracks.length;t++){var n=e.video.audioTracks[t];e.audioTracks.push(ke(ke({},n),{name:n.label}))}}catch(t){e.onErrorEvent(t)}e.video.removeEventListener("loadeddata",e.onLoadedEvent)},this.getSubtitleList=function(){return e.subtitleTracks},this.getSubtitle=function(){return e.subtitleTrack},this.setSubtitle=function(t){if(null!=t&&e.subtitleTrack!==t){for(var n=0;n<e.video.textTracks.length;n++){var r=e.video.textTracks[n];"captions"!=r.kind&&"subtitles"!=r.kind||(r.mode=t>=0&&t==n?"showing":"disabled")}e.subtitleTrack=t}},this.getLevelList=function(){return[]},this.getLevel=function(){return-1},this.setLevel=function(e){},this.getAudioList=function(){return e.audioTracks},this.getAudio=function(){return e.audioTrack},this.setAudio=function(t){e.audioTracks.map((function(e,n){return e.enabled=t==n})),e.audioTrack=t},this.play=function(){},this.setEnded=function(){}}return e.prototype.init=function(e,t){this.video=e,this.video.addEventListener("loadeddata",this.onLoadedEvent),this.video.addEventListener("error",this.onErrorEvent),this.video.src=t},e.prototype.recoverMediaError=function(){},e.prototype.onError=function(e){this.subscriber.error=e},e.prototype.destroy=function(){this.video.removeEventListener("loadeddata",this.onLoadedEvent),this.video.removeEventListener("error",this.onErrorEvent)},e}();!function(e){e.RSS="rss",e.SPLIT_RSS="split-rss"}(Ne||(Ne={})),function(e){e.INSTREAM="instream",e.OUTSTREAM="outstream"}(Ue||(Ue={}));var Fe=function(e){return"function"==typeof e?e:A(e)},Be={video:{url:[A],clickUrl:Fe,list:[{mas:m,url:A,fallbackUrl:A,title:A,type:A,id:A,duration:m,clickUrl:Fe,formattedUrls:{mp4:A,hls:A},adContent:v,fetchingErrorCount:m,categories:[A],keywords:[A],tags:[A]}],start:m,shuffle:v,loop:v,controlBar:v},image:{url:A,position:A},variants:{list:[{label:A,file:A}],selected:m,searchPattern:function(e){return e instanceof RegExp?e:e?e+"":null}},wait:v,external:o};function qe(e,t,n,r){if(e.contentDefinition||(e.contentDefinition=t?function(e,t){var n;return{video:{url:t.url,clickUrl:t.click,loop:!!t.cl,shuffle:null!=t.shuffle?!!t.shuffle:null,controlBar:null!=t.co?t.co:e.controlBar},image:{url:t.loader_image_url,position:null!==(n=t.loader_image_position)&&void 0!==n?n:""},variants:t.variants,wait:t.wait}}(e,t):{video:{controlBar:e.controlBar},image:{},wait:!1}),n&&We(e,n),r)try{h(l,e.contentDefinition.video,{url:r.Url,clickUrl:r.ClickUrl}),h(l,e.contentDefinition.image,{url:r.Image,position:r.ImagePosition}),r.External&&(e.contentDefinition.external=r.External)}catch(e){}}function We(e,t){var n=e.contentDefinition;(function(t){return t&&Je(t)&&!Oe(document.createElement("video"))&&!e.isAmp})(t)&&xe().catch((function(e){Ce.error("Failed to load hls script",e)}));try{h(l,n,function e(t,n){var r;if(t instanceof Function)return t(n);if(Array.isArray(t))return Array.isArray(n)?n.map((function(n){return e(t[0],n)})):void 0===n?t.length>1?[]:n:[e(t[0],n)];if(null==n)return n;if(Array.isArray(n)||"object"!=typeof n){var i=t[""]||Object.keys(t)[0];(r={})[i]=e(t[i],n),n=r}var o={};return Object.keys(t).forEach((function(r){var i=e(t[r],n[r]);void 0!==i&&(o[r]=i)})),o}(Be,t))}catch(e){}}function He(e){return Re("createContentPlayer",{players:e,log:!0},(function(){e.content=new Za(e,e.contentDefinition)})),e.content}var Je=function(e){var t=e.video,n=void 0===t?{}:t;return null==n?void 0:n.list.some((function(e){var t;return null===(t=e.url)||void 0===t?void 0:t.includes(".m3u8")}))},Ge=n(16);function Ye(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}var ze="__exco_";function Xe(e,t){return void 0===t&&(t=ze),w(e)?e.filter((function(e){return!!e})).map((function(e){return t+e})).join(" "):t+e}function Ke(e,t,n){void 0===n&&(n=ze),e.id=n+t,Qe(e,t,n)}function Qe(e,t,n){void 0===n&&(n=ze);var r=Xe(t,n);Ye(r).test(e.className)||(e.className+=" "+r)}var Ze,$e=n(1);!function(e){e.AD_STARTED="ad.started",e.AD_PLAYING="ad.playing",e.AD_PROGRESS="ad.progress",e.AD_COMPLETE="ad.completed",e.AD_SKIPPED="ad.skipped",e.AD_ERROR="ad.error",e.SLOT_START="player.slot-start",e.SLOT_END="player.slot-end",e.CONTENT_COMPLETED="content.completed",e.CONTENT_START="content.start",e.CONTENT_RESUMED="content.resumed",e.CONTENT_SKIPPED="content.skipped",e.PLAYER_IN_VIEW="player.in-view",e.PLAYER_OUT_OF_VIEW="player.out-of-view",e.PLAYER_FIRST_VIEW="player.first-view"}(Ze||(Ze={}));var et=new $e.EventEmitter2;function tt(e,t){var n,r,i,o=null;return(o=e?e():document.createElement("video")).preload=(null==t?void 0:t.preload)||"auto",o.muted=null===(n=null==t?void 0:t.muted)||void 0===n||n,o.volume=null!==(r=null==t?void 0:t.volume)&&void 0!==r?r:0,o.playsInline=null===(i=null==t?void 0:t.playsInline)||void 0===i||i,o}function nt(e){return e&&e.canvas}function rt(e,t,n){t&&n&&(nt(t)?t.setAttribute("src",n):t.src=J(e.protocol,n))}function it(e){var t=e.error,n="";switch(t.code){case t.MEDIA_ERR_ABORTED:n="Video playback aborted.";break;case t.MEDIA_ERR_NETWORK:n="A network error.";break;case t.MEDIA_ERR_DECODE:n="The video playback decode error.";break;case t.MEDIA_ERR_SRC_NOT_SUPPORTED:n="The video format is not supported.";break;default:n="An unknown error occurred."}return n}var ot=null;var at,st=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},lt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function ct(){try{return new XMLHttpRequest}catch(e){return null}}function ut(e){return(window.DOMParser?function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}:"undefined"!=typeof ActiveXObject&&new ActiveXObject("Microsoft.XMLDOM")?function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}:function(){return null})(e)}function dt(e,t){return ht({url:e,method:"POST",postData:B(t,!0),contentType:"application/x-www-form-urlencoded"})}function pt(e){var t=e.url,n=void 0===t?"":t,r=e.params,i=void 0===r?null:r,o=e.usePost;void 0!==o&&o?dt(n,i):(new Image).src=q(n,i)}function ht(e){var t=e.url,n=void 0===t?"":t,r=e.withCredentials,i=void 0!==r&&r,o=e.method,a=void 0===o?"GET":o,s=e.postData,l=void 0===s?null:s,c=e.contentType,u=e.timeout,d=void 0===u?0:u,p=e.xhrObject;return new Promise((function(e,t){var r=p||ct(),o=function(i,o){var s=!1;if(!r)return t({xhr:r,code:at.NO_XHR_SUPPORT,data:{message:"no supported xhr object"}}),null;try{r.open(a,n,!0)}catch(e){return t({xhr:r,code:at.OPEN,data:e}),null}"withCredentials"in r&&(r.withCredentials=i),"timeout"in r&&(r.timeout=d,r.ontimeout=function(){t({xhr:r,code:at.TIMEOUT,data:{message:"no response from xhr within ".concat(d/1e3," sec.")}})}),r.onload=function(){s||(r.status>=400?t({xhr:r,code:at.STATUS,data:{message:r.statusText,status:r.status}}):e(r))},r.onerror=function(){s=!0},r.onloadend=function(){o(s)},l&&r.setRequestHeader&&c&&r.setRequestHeader("Content-type",c);try{r.send(l)}catch(e){t({xhr:r,code:at.SEND,data:e})}};o(i,(function(e){i&&e?o(!1,(function(e){e&&t({xhr:r,code:at.CORS,data:{result:-1,message:"cross origin exception"}})})):t({xhr:r,code:at.CORS,data:{result:-1,message:"cross origin exception"}})}))}))}function ft(e){return st(this,void 0,void 0,(function(){var t,n;return lt(this,(function(r){switch(r.label){case 0:t="",r.label=1;case 1:return r.trys.push([1,3,,5]),[4,e.json()];case 2:return n=r.sent(),t=null==n?void 0:n.error,[3,5];case 3:return r.sent(),[4,e.text()];case 4:return t=r.sent(),[3,5];case 5:return[2,t]}}))}))}!function(e){e[e.NO_XHR_SUPPORT=1]="NO_XHR_SUPPORT",e[e.OPEN=2]="OPEN",e[e.SEND=3]="SEND",e[e.CORS=4]="CORS",e[e.STATUS=5]="STATUS",e[e.TIMEOUT=6]="TIMEOUT",e[e.UNKNOWN=7]="UNKNOWN",e[e.LAST=10]="LAST"}(at||(at={}));var vt,mt=function(e){var t;return null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json")};function At(e){return st(this,void 0,void 0,(function(){var t,n,r,i;return lt(this,(function(o){switch(o.label){case 0:return[4,fetch(e)];case 1:return(t=o.sent()).ok?[3,3]:(n=Error.bind,i=(r="Error @http#fetchJSON: status code ".concat(t.status,", message: ")).concat,[4,ft(t)]);case 2:throw new(n.apply(Error,[void 0,i.apply(r,[o.sent()])]));case 3:return[2,t.text()]}}))}))}function yt(e){return st(this,void 0,void 0,(function(){var t,n,r,i;return lt(this,(function(o){switch(o.label){case 0:return[4,fetch(e)];case 1:return(t=o.sent()).ok&&mt(t)?[3,3]:(n=Error.bind,i=(r="Error @http#fetchJSON: status code ".concat(t.status,", message: ")).concat,[4,ft(t)]);case 2:throw new(n.apply(Error,[void 0,i.apply(r,[o.sent()])]));case 3:return[2,t.json()]}}))}))}!function(e){e[e.None=0]="None",e[e.ScheduledFetch=1]="ScheduledFetch",e[e.Prefetching=2]="Prefetching",e[e.Fetching=3]="Fetching",e[e.Fetched=4]="Fetched",e[e.Loading=5]="Loading",e[e.Initing=6]="Initing",e[e.Pending=7]="Pending",e[e.Ready=8]="Ready",e[e.Started=9]="Started",e[e.Playing=10]="Playing",e[e.Completed=11]="Completed",e[e.Finished=12]="Finished",e[e.Error=13]="Error"}(vt||(vt={}));var gt,Et,bt=n(0),Tt=function(){return(Tt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};!function(e){e[e.VIDEO_ONLY=0]="VIDEO_ONLY",e[e.VPAID_FLV_DEFAULT=1]="VPAID_FLV_DEFAULT",e[e.VPAID_JS_DEFAULT=2]="VPAID_JS_DEFAULT",e[e.VPAID_FLV_ONLY=3]="VPAID_FLV_ONLY",e[e.VPAID_JS_ONLY=4]="VPAID_JS_ONLY"}(gt||(gt={})),function(e){e[e.VPAID_UNKNOWN_ERROR=1]="VPAID_UNKNOWN_ERROR",e[e.VPAID_TIMEOUT=2]="VPAID_TIMEOUT",e[e.VPAID_EMPTY_VAST=3]="VPAID_EMPTY_VAST",e[e.VPAID_EMPTY_BLOCKED_DOMAIN=4]="VPAID_EMPTY_BLOCKED_DOMAIN",e[e.VPAID_NO_AVAILABLE_ADS=5]="VPAID_NO_AVAILABLE_ADS",e[e.VPAID_VAST_ERROR=6]="VPAID_VAST_ERROR",e[e.VPAID_SECURITY_ERROR=7]="VPAID_SECURITY_ERROR",e[e.VPAID_STREAM_ERROR=8]="VPAID_STREAM_ERROR",e[e.VPAID_START_TIMEOUTED=9]="VPAID_START_TIMEOUTED",e[e.VPAID_INTERNAL_VPAID_ERROR=10]="VPAID_INTERNAL_VPAID_ERROR",e[e.VPAID_IMA_NON_LINEAR=11]="VPAID_IMA_NON_LINEAR",e[e.VPAID_VOLUME_VIOLATION=12]="VPAID_VOLUME_VIOLATION",e[e.VPAID_INNER_VPW_EXCEPTION=13]="VPAID_INNER_VPW_EXCEPTION",e[e.VPAID_VIDIBLE_CONTENT=14]="VPAID_VIDIBLE_CONTENT"}(Et||(Et={}));var _t,wt=[20,21,10],St=[60];!function(e){e[e.FIRST=1]="FIRST",e[e.MIDPOINT=2]="MIDPOINT",e[e.THIRD=3]="THIRD",e[e.COMPLETE=4]="COMPLETE"}(_t||(_t={}));var It=[null,"firstQuartile","midpoint","thirdQuartile","complete"];function Ct(e,t,n,r,i,o,a,s,l){if(e){if("function"==typeof e.vastError)return e.vastError(t,n,r,i,o,a,s,l);if(92!=n){var c,u="";if(void 0!==o&&o){if(3!=n&&o.vastErrorWasReported)return;c=o.mediaURL,c="",u=(o.state>=vt.Started?((new Date).getTime()-o.startAdTime)/1e3:((new Date).getTime()-o.loadAdTime)/1e3).toFixed(1)}else c="";void 0===a&&(a=!1),void 0===s&&(s=!1);var d="";if(Ce.hasLoggers())try{d=(new XMLSerializer).serializeToString(o.vastResponseXML)}catch(e){Ce.error("Could not serialize vastResponseXML",e)}var p={errorCode:n,errorMessage:r,mediaURL:c,vastXml:d};a&&!o.logStartWasDone&&(p.logStartRequest=1,o.logStartWasDone=!0),s&&!o.logLoadWasDone&&(p.logLoadRequest=1,o.logLoadWasDone=!0),""!=u&&(p.time=u),o.vastErrorWasReported=!0,St.includes(n)?Ce.warn("VAST Warning: ".concat(o.vastId," - ").concat(n," - ").concat(r),p):wt.includes(n)||Ce.error("VAST Error: ".concat(o.vastId," - ").concat(n," - ").concat(r),i||new Error(r),p),St.includes(n)||e.eventDispatcher.sendErrorEvent(o,r,e)}}}var Rt=document.createElement("video");function Pt(e){try{var t=e.split("/"),n=t[0],r=t[1];switch(n){case"video":return["video",r];case"application":if(-1!=r.indexOf("javascript"))return["jsvpaid"];if(-1!=r.indexOf("shockwave-flash"))return["flvpaid"];default:return[null]}}catch(e){return[null]}}function Dt(e,t){return t?t.fromUrlHandler?function(e){var t=null;switch(e.code){case at.NO_XHR_SUPPORT:t={reason:24,code:91,message:"no supported xhr object"};break;case at.OPEN:t={reason:23,code:95,message:"xhr error on open"};break;case at.SEND:t={reason:23,code:96,message:"xhr error on send"};break;case at.CORS:t={reason:24,code:93,message:"xhr cross origin exception"};break;case at.STATUS:t={reason:24,code:94,message:"xhr status error"};break;case at.TIMEOUT:t={reason:23,code:97,message:"xhr timeout error"};break;default:case at.UNKNOWN:t={reason:23,code:98,message:"xhr js exception"}}return t}(t):{reason:25,code:25,message:t.message}:function(e){for(var t=!1,n=e.documentElement.childNodes,r=0,i=n.length;r<i;r++)"Ad"===n[r].nodeName&&(t=!0);if(!t)return{reason:26,code:21,message:"no <Ad> element"};return null}(e.vastResponseXML)}function kt(e,t,n){if(!n||!n.ads||!n.ads.length)return{reason:27,code:20,message:"empty response"};var r=n.ads[0];return r.creatives&&r.creatives.length?Re("chooseAdCreative",{players:e,playerData:t},(function(){return function(e,t,n){for(var r,i=null,o=null,a=["",""],s=a[0],l=a[1],c="",u=0,d=n.creatives;u<d.length;u++){var p=d[u];if("linear"==p.type)for(var h=p,f=0,v=h.mediaFiles;f<v.length;f++){var m=v[f],A=Pt(m.mimeType),y=A[0],g=A[1];switch(y){case"video":if(!Lt(e,m,g))continue;break;case"jsvpaid":t.hasJSVPAID=!0;break;default:continue}if(t.vastPreferType!=gt.VIDEO_ONLY||"video"==y){if("video"==y){if("video"==s&&!Ot(o,l,m,g))continue}else if("video"==s)continue;s=(r=[y,h,m,g])[0],i=r[1],o=r[2],l=r[3]}}else"companion"==p.type&&(c=xt(e,p,c))}if(!o)return{reason:5,code:22,message:"no suitable media"};return Re("chooseAdCreative",{players:e,playerData:t,log:!0},(function(){t.adParameters=i.adParameters,n.impressionURLTemplates&&(1!=n.impressionURLTemplates.length||n.impressionURLTemplates[0])||(n.impressionURLTemplates=[]),t.ad=n,t.creative=i,function(e){var t=e.ad.extensions;if(!t||0==t.length)return;for(var n=!1,r=0,i=t;r<i.length;r++){var o=i[r];if(o.attributes&&"CedatoParams"==o.attributes.type&&o.children)for(var a=0,s=o.children;a<s.length;a++){var l=s[a];if("Cookie"==l.name&&l.value&&!n){e.cookie=l.value;var c=l.attributes.price?+l.attributes.price:void 0;e.apiImpressionData=Tt(Tt(Tt({},l.attributes),{price:c}),e.apiImpressionData),e.impressionData=Tt(Tt(Tt({},e.impressionData),l.attributes),{pricing:c}),n=!0}}}}(t),t.adType="jsvpaid"==s?t.isVidible?"jsvidible":"jsvpaid":"video",t.mediaURL=o.fileURL,t.mediaURL.trim&&(t.mediaURL=t.mediaURL.trim()),t.companionHTML=c,bt.b.emit(bt.a.AD.XML_PARSED,{demand:t})}),(function(){return{reason:28,code:3,message:"js exception"}}))}(e,t,r)}),(function(){return{reason:28,code:3,message:"js exception"}})):{reason:7,code:23,message:"no valid creatives"}}function Lt(e,t,n){if(e.usejsv){if(["webm","mp4","wmv","flv"].indexOf(n)<0)return!1;if(t.deliveryType&&"streaming"==t.deliveryType||function(e){var t=e.split("/")[0].toLowerCase(),n=!("rtsp:"!==t&&"rtp:"!==t);if(!n){var r=function(e){return e.split(".").pop().split(/\#|\?/)[0]}(e);"m3u8"!==r&&"m3u"!==r&&"swf"!==r||(n=!0)}return n}(t.fileURL)||t.fileURL.length<8)return!1}else try{if(!Rt.canPlayType(t.mimeType))return!1}catch(e){}return!0}function Ot(e,t,n,r){if("mp4"!==t&&"mp4"==r)return!0;if("mp4"!=r&&"mp4"==t)return!1;var i=!0;if(n.bitrate&&e.bitrate){if(i=!1,e.bitrate&&n.bitrate>e.bitrate)return!1;n.bitrate==e.bitrate&&(i=!0)}else if(e.width&&n.width){i=!1;var o=e.width*e.height,a=n.width*n.height;if(o&&a>o)return!1;a==o&&(i=!0)}return!i||!t||"mp4"!=t&&"webm"!=t&&("mp4"!=r||"ogg"!=t&&"3gp"!=t)}function xt(e,t,n){for(var r=0,i=t.variations;r<i.length;r++){var o=i[r];o.width==e.width&&o.height==e.height&&("image/jpeg"==o.type||(n=o.htmlResource))}return n}var Vt=function(){function e(e,t){this.DELAY=2e3,this._element=null,this._timerId=null,this._visible=!1,this._onChange=function(){},this._element=e,this._threshold=(null==t?void 0:t.threshold)||0}return e.prototype.observe=function(e,t){var n=this;this._element=e,this._onChange=function(e){var r=n._getEntryState(e),i=r.state,o=r.entry;t({visible:"in"===i,entry:o,observer:n})},this._observer=new IntersectionObserver(this._onChange,{threshold:this._threshold}),this._observer.observe(this._element)},e.prototype.disconnect=function(){this._observer.disconnect()},e.prototype._getEntryState=function(e){var t=[e.find((function(e){return e.isIntersecting})),e.find((function(e){return!e.isIntersecting}))],n=t[0]||t[1],r="";return n&&(r=n.intersectionRatio<this._threshold?"out":"in"),{entry:n,state:r}},e.prototype.on=function(e){var t=this;this._onChange=function(n){n.filter((function(e){return e.target==t._element})).forEach((function(e){return t._lastRatio=e.intersectionRatio}));var r=t._lastRatio>t._threshold;!t._timerId||null!==t._visible&&t._visible!==r||(clearTimeout(t._timerId),t._timerId=null),t._visible!==r&&(t._timerId=setTimeout((function(){e(r?"viewable":"notviewable"),t._visible=r,t._timerId=null}),t.DELAY))},this._observer=new IntersectionObserver(this._onChange,{threshold:this._threshold}),this._observer.observe(this._element)},e.prototype.off=function(){this._timerId&&(clearTimeout(this._timerId),this._timerId=null),this._observer.unobserve(this._element)},e.isAvailable=function(e){return!!e.IntersectionObserver},e}();function Nt(e){var t=e.isInView?1:0;return null!=t?{viewability:t}:{}}var Ut=function(){return(Ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Mt(e){return null!=e.cxpid&&null!=e.cxvid}function jt(e){return"jsima"==e.adType?re.ImaJs:"jsvpaid"==e.adType?re.JsVpaid:re.Video}function Ft(e){return jt(e)}function Bt(e,t,n){if(!(n<=0)){var r=((t.duration||0)/4).toFixed(2),i=n/4;if(t.quartile!==n)t.quartile!==n&&function(e,t){switch(e){case _t.FIRST:bt.b.emit(bt.a.AD.FIRST_QUARTILE,{demand:t});break;case _t.MIDPOINT:bt.b.emit(bt.a.AD.MIDPOINT,{demand:t});break;case _t.THIRD:bt.b.emit(bt.a.AD.THIRD_QUARTILE,{demand:t})}}(n,t),t.quartile=n,e.serverEvents.demandEvent(t,Ut({name:"AdProgress",progress:i,duration:parseFloat(r)*n,durationDelta:parseFloat(r)},Nt(e))),1===i?e.eventDispatcher.sendAdCompleteEvent(t,e):(e.eventDispatcher.sendAdProgressEvent(t,i,e),bt.b.emit(bt.a.AD.PROGRESS,{demand:t,quartile:n,progress:i}))}}function qt(e,t,n,r){Mt(n)?(n.cedatoxPlayerId=null,n.cedatoxVastId=n.cxvid,n.chosenVastId=null,n.parentPlayerId=n.cxpid,ve(e,t,n,r),n.cedatoxPlayerId=n.playerId,n.cedatoxVastId=null,n.chosenVastId=n.vastId,n.parentPlayerId=null,r.playerId=n.cxpid,r.vastId=n.cxvid,ve(e,t,n,r)):ve(e,t,n,r)}var Wt,Ht=function(e,t){var n=t-e;return n/=1e3,Math.round(n)};!function(e){e.VAST="vast",e.PREBID="prebid",e.RTB="rtb",e.GAM="gam",e.TAM="tam"}(Wt||(Wt={}));function Jt(e){return Yt(e)}var Gt=function(e){return!0===(null==e?void 0:e.isPubDemand)};function Yt(e){var t;return zt(e)&&function(e){var t;return"google"===(null===(t=e.bidder)||void 0===t?void 0:t.toLowerCase())}(e)&&!Gt(e)&&!function(e){var t;return null===(t=e.demandId)||void 0===t?void 0:t.includes("456669857")}(e)&&(null===(t=e.vastURL)||void 0===t?void 0:t.includes("94166617"))}function zt(e){return(null==e?void 0:e.type)===Wt.GAM}function Xt(e){var t,n;return!!(null===(n=null===(t=e.priceTables)||void 0===t?void 0:t.exco)||void 0===n?void 0:n.length)}function Kt(e){var t,n;return!!(null===(n=null===(t=e.priceTables)||void 0===t?void 0:t.publisher)||void 0===n?void 0:n.length)}function Qt(e){return zt(e)&&Gt(e)}function Zt(e){return Qt(e)&&function(e){return e.keyValueEnabled}(e)}function $t(e,t){return Xt(e)&&Yt(t)||Kt(e)&&Qt(t)}var en,tn,nn,rn=function(e){void 0===e&&(e={demandId:""});var t=e.demandId,n=(void 0===t?"":t).split("-");return{supplyId:n[0]||null,demandId:n[1]||null,supplyIdX:n[2]||null,demandIdX:n[3]||null,supplyIdDX:n[4]||null,demandIdDX:n[5]||null}},on=function(e){return e.filter((function(e){return"c"!==e.id}))},an=function(e){return Ht(e.cacheEntryTime,new Date)>20};function sn(e,t,n){return function(r){var i,o,a,s,l,c=(new Date).getTime().toFixed(0),u=((null===(i=e.content)||void 0===i?void 0:i.currentItem)||{}).id,d=e.content instanceof Za?e.content.getUrl():"",p=(null===(o=e.content)||void 0===o?void 0:o.getRelevantCategories())||[],h=(null===(a=e.content)||void 0===a?void 0:a.getRelevantKeywords())||[],f=(null===(s=e.content)||void 0===s?void 0:s.getRelevantTags())||[];return r=function(e,t){var n,r;return e=(e=e.replace(/\-GPV_GDPR\-/g,(null===(n=t.consentData)||void 0===n?void 0:n.gdpr)?"1":"0").replace(/\-GPV_GDPR_CONSENT\-/g,(null===(r=t.consentData)||void 0===r?void 0:r.gdpr_consent)||"")).replace(/\-GPV_US_PRIVACY\-/g,t.usPrivacy||"")}(r=r.replace(/\[(CB|CACHE_BUSTER|CACHEBUSTING)\]/g,c).replace(/\[(WIDTH|CONTAINER_WIDTH)\]/g,e.width?e.width.toFixed():"").replace(/\[(HEIGHT|CONTAINER_HEIGHT)\]/g,e.height?e.height.toFixed():"").replace(/\[UA\]/g,encodeURIComponent(navigator.userAgent)).replace(/\[SUBID\]/g,encodeURIComponent(e.subid)).replace(/\[URL\]/g,encodeURIComponent(e.domain)).replace(/\[URL_DETECTED\]/g,encodeURIComponent(e.domainDetected)).replace(/\[EX_VIDEO_ID\]/g,u).replace(/\[VIDEO_CATEGORIES\]/g,encodeURIComponent(null==p?void 0:p.join(","))).replace(/\[EX_CNT_TAGS\]/g,encodeURIComponent(null==p?void 0:p.join(","))).replace(/\[VIDEO_KEYWORDS\]/g,encodeURIComponent(null==h?void 0:h.join(","))).replace(/\[VIDEO_TAGS\]/g,encodeURIComponent(null==f?void 0:f.join(","))).replace(/\[VIDEO_FILE_URL\]/g,encodeURIComponent(d)).replace(/\[AUTOPLAY\]/g,"1").replace(/\[MUTED\]/g,"1").replace(/\[GPD_ID\]/g,(null===(l=e.publisher)||void 0===l?void 0:l.googlePublisherId)||""),e),e.info&&(r=function(e,t){return(e=(e=(e=e.replace(/\[DEVICEOS\]/gi,encodeURIComponent(t.info.os))).replace(/\[DEVICEOSV\]/gi,encodeURIComponent(t.info.osv))).replace(/\[DEVICEMAKE\]/gi,encodeURIComponent(t.info.make))).replace(/\[DEVICEMODEL\]/gi,encodeURIComponent(t.info.model))}(r,e)),e.isApp&&(r=function(e,t,n){var r=t&&zt(t);return(null==n?void 0:n.name)&&(e=e.replace(/\[APP_NAME\]/g,encodeURIComponent(n.name)),r&&(e=N(e,tn.APP_NAME,n.name))),(null==n?void 0:n.bundle)&&(e=e.replace(/\[APP_BUNDLE\]/g,encodeURIComponent(n.bundle)),r&&(e=N(e,tn.APP_BUNDLE,n.bundle))),e}(r,t,e.appParams)),n&&(r=r.replace(/\[CLICK_URL\]/g,encodeURIComponent(n.clickUrl))),t&&(r=function(e,t){var n,r,i=t.playerId,o=t.cxvid||t.vastId,a=t.vastId;return e=e.replace(/\[DMID\]/g,t.demandId).replace(/\[XSUPPLY_ID\]/g,i.toFixed()).replace(/\[DEMAND_ID\]/g,o).replace(/\[XDEMAND_ID\]/g,a),t.customVars&&(e=e.replace(/\[XRPM\]/g,t.customVars.rpm||"").replace(/\[RPM\]/g,(t.cxvid?t.customVars.cxrpm:t.customVars.rpm)||"")),t.impressionData&&(e=e.replace(/\[PRICE\]/g,(null!==(n=t.impressionData.pricing)&&void 0!==n?n:"")+"").replace(/\[CURRENCY\]/g,null!==(r=t.impressionData.currency)&&void 0!==r?r:"")),e}(r,t)),e.customVars&&(r=function(e,t){for(var n in e.customVars)e.customVars.hasOwnProperty(n)&&(t=t.replace(new RegExp("\\["+n+"\\]","g"),encodeURIComponent(e.customVars[n])));return t}(e,r)),e.customParams&&(r=function(e,t){return Object.entries(e.customParams).forEach((function(e){var n=e[0],r=e[1];t=t.replace("[EX_".concat(n.toUpperCase(),"]"),encodeURIComponent(r))})),t=t.replace(/\[EX_([A-Z0-9_]+)\]/g,"")}(e,r)),r}}function ln(e,t,n,r){try{for(var i={},o=[],a=e&&e.beacons&&e.beacons[n]||[],s=t&&t.beacons&&t.beacons[n]||[],l=0,c=0,u=s;c<u.length;c++){var p=u[c];i[p.id||"__u"+l++]=p}for(var h=0,v=a;h<v.length;h++){var m=v[h],A=i[m.id];i[(A=A?f({},m,A):m).id||"__u"+l++]=A}if(d((function(e){return o.push(e)}),i),o&&o.length>0){var y=sn(e,null,r);!function(e,t,n,r){if("function"==typeof e.triggerAll)return e.triggerAll(t,n,r);n=S(n);for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a.url&&(null==a.rate||Math.random()<a.rate)){var s=a.url;r&&(s=r(s)),s=J(e.protocol,s),a.type&&"script"===a.type?e.injectScript(s,!0):a.type&&"iframe"===a.type?e.injectIframe(s):e.sendPixel(s)}}}(e,t,o,y)}}catch(e){}}function cn(e,t,n){return e.beacons=e.beacons||{},e.beacons[t]=e.beacons[t]||[],!1===function(e,t){return-1!==e.findIndex((function(e){return e.url===t.url&&e.rate===t.rate}))}(e.beacons[t],n)&&e.beacons[t].push(n),e.beacons[t]}function un(e,t,n){return function(e,t){if(void 0===t&&(t=window),!e)return e;try{var n=new URL(e),r=t.top.location.host||t.location.host;if(n.host===r)return e}catch(e){}return null}(G(e,t))||n}function dn(e,t){var n,r=function(e){var t=e.currentWindow,n=void 0===t?{}:t,r=e.inAmpFrame,i=void 0!==r&&r,o=e.win,a=void 0===o?window:o,s=e.bestLocation,l=void 0===s?"":s,c=e.hasTopLocation,u=void 0!==c&&c,d=e.valuesFromAmp,p=void 0!==d&&d,h=e.reachedTop,f=void 0!==h&&h,v=e.bestCanonicalUrl,m=void 0===v?"":v,A=e.level,y=void 0===A?0:A,g=e.maxNestedIframes,E=void 0===g?10:g;do{var b=n,T=i,_=void 0,w=!1,S=null,I=z(a);i=!1,n=n?n.parent:a;try{_=n.location.href||null}catch(e){w=!0}if(w)if(T){var C=b.context;try{l=S=null==C?void 0:C.sourceUrl,u=!0,p=!0,f=$(n,a),m=K(C.canonicalUrl,m)}catch(e){}}else{try{var R=b.document.referrer;R&&(S=R,f=$(n,a))}catch(e){}var P=ee(S,I,y,u,n,a);S=P.foundLocation,u=P.hasTopLocation,l=Z(S,p,l)}else{if(_){l=S=_,p=!1;var D=Q(n,a,f,m);f=D.reachedTop,m=D.bestCanonicalUrl}i=X(n,i)}y++}while(n!==a.top&&y<E);return{bestLocation:l,hasTopLocation:u,reachedTop:f,bestCanonicalUrl:m}}({win:e,inAmpFrame:t.isAmp}),i=r.bestLocation,o=r.hasTopLocation,a=r.reachedTop,s=r.bestCanonicalUrl;try{n=function(e){return e.top.document.referrer}(e)}catch(e){}var l=function(e,t,n){return e||t?n:null}(a,o,i),c=function(e){return e||null}(s),u=un(c,e,l);return nn={ref:n,canonicalUrl:c,page:u,domain:Y(u)||null}}!function(e){e.APP_BUNDLE="appb",e.APP_CATEGORY="appc",e.APP_NAME="appn",e.APP_STORE_ID="appsi",e.APP_STORE_URL="appsu",e.APP_VERSION="appv",e.DEVICE_ID="deviceid",e.IFA="ifa"}(en||(en={})),function(e){e.APP_NAME="an",e.APP_BUNDLE="msid"}(tn||(tn={}));var pn=function(e){return function(e,t){return nn||dn(e,t),nn}(window,e)},hn=function(){return(hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},fn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},vn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},mn={partner:1181347726,timeoutInMillis:3e3,manualWinReportEnabled:!0,ABTestingConfigurationSource:"percentage"},An=function(){var e=function(){var e;return null===(e=null===window||void 0===window?void 0:window.__EXCO)||void 0===e?void 0:e.IntentIqObject},t=e();return t?Promise.resolve(t):new Promise((function(t){return L("iiq-script",(function(){return"//cdn.ex.co/player/vendor/iiqs_0.0.1.js"}),(function(){return t(e())}),!0)}))},yn=function(e){return new Promise((function(t){return fn(void 0,void 0,void 0,(function(){var n,r,i,o;return vn(this,(function(a){switch(a.label){case 0:if(!1===function(e){return!0===e.iiqEnabled&&("US"===e.country||"CA"===e.country)}(e))return[2,t(null)];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,An()];case 2:return n=a.sent(),r=e.iiqPercentage,i=e.domain,o=e.prebidJS,e.iiq=new n(hn({callback:function(e){var n=(void 0===e?{}:e).eids;return t({provider:"iiq",eids:n})},abPercentage:r,domainName:i,pbjs:o},mn)),[3,4];case 3:return a.sent(),t(null),[3,4];case 4:return[2]}}))}))}))},gn=function(e,t){var n=function(e){if(e){return{prebid:1,tam:2,gam:3,rtb:4,vast:5}[e]}}(t.adType);return{currency:"USD",cpm:t.price,bidderCode:t.bidder||t.adType,biddingPlatformId:n,domainName:e.domain}};var En=function(e,t,n){return void 0===n&&(n=null),Promise.race([e,(r=t,i=n,void 0===i&&(i=null),new Promise((function(e){return setTimeout((function(){return e(i)}),r)})))]);var r,i},bn=function(e){var t=e.domain,n=e.customVars,r="8=".concat(t,"&10=").concat(n.IP,"&12=").concat(window.navigator.userAgent),i=encodeURI(r);return btoa(i)},Tn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},_n=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},wn=function(e){return Tn(void 0,void 0,void 0,(function(){var t,n;return _n(this,(function(r){switch(r.label){case 0:return t=In(),[4,Promise.all(t.map((function(t){return En(t(e),1e3)})))];case 1:return n=r.sent(),e.eids=Cn(n,e),function(e){(function(e){return!!e.iiq})(e)&&e.eventDispatcher.send("mcd_iiq_init",function(e){return{extraData:{abTestGroup:e.iiq.intentIqConfig.abTesting.currentTestGroup,percentage:e.iiqPercentage}}}(e))}(e),[2]}}))}))},Sn=function(e){return function(e){var t=[{name:"lotamePanoramaId"},{name:"pubCommonId",storage:{name:"pubCommonId",type:"html5"}},{name:"sharedId",storage:{name:"_sharedID",type:"html5"}},{name:"identityLink",params:{pid:"13963",notUse3P:!1},storage:{type:"cookie",name:"idl_env",expires:15,refreshInSeconds:1800}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=343asog&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"id5Id",partnerId:1235,params:{partner:1235,pd:bn(e),abTesting:{enabled:!0,controlGroupPct:0}},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:7200}}];return["US","CA"].includes(e.country)&&t.push({name:"33acrossId",params:{pid:"0015a00003EkOH8AAN"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}}),t}(e)},In=function(){return[yn]},Cn=function(e,t){if(e){var n=function(e,t){return e.find((function(e){return e&&e.provider===t}))||{provider:t,eids:[]}}(e,"iiq");return t.iiq&&(n.abTestGroup=t.iiq.intentIqConfig.abTesting.currentTestGroup),{iiq:n}}},Rn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function Pn(e){void 0===e&&(e="");var t=e.split(",");return t.length&&t.length>3?t[2]:""}var Dn=function(e){try{var t=e.split("!"),n=t.splice(1),r=t[0].split(","),i=r[0],o=r[1];return{ver:i,nodes:n.map((function(e){var t=e.split(",");return function(e){var t=e.asi,n=e.sid,r=e.hp,i=e.rid,o=e.name,a=e.domain,s={};return t&&(s.asi=t),n&&(s.sid=n),r&&(s.hp=parseInt(r,10)||r),i&&(s.rid=i),o&&(s.name=o),a&&(s.domain=a),s}({asi:t[0],sid:t[1],hp:t[2],rid:t[3],name:t[4],domain:t[5]})})),complete:parseInt(o,10)}}catch(e){}};function kn(e){return"playbuzz.com"===e.asi}var Ln,On=function(e,t){var n,r,i={config:Dn((null===(n=e.tagConfig)||void 0===n?void 0:n.schain)||"")||{complete:1,nodes:[{asi:"playbuzz.com",hp:1,sid:Pn(null===(r=e.tagConfig)||void 0===r?void 0:r.schain)}],ver:"1.0"},validation:"relaxed"};return t?i.config.nodes=i.config.nodes.filter((function(e){return!kn(e)})):e.resellersJSONDomain&&(i.config.nodes=i.config.nodes.filter((function(e){return kn(e)}))),!t&&e.domainDetected&&e.domainDetected.includes("playbuzz.com")&&(i.config.nodes=i.config.nodes.filter((function(e){return!kn(e)}))),0===i.config.nodes.length?null:i},xn=function(){return(xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Vn(e){var t,n=null===(t=null==e?void 0:e.content)||void 0===t?void 0:t.currentContext;return{context:n,placement:3,plcmt:n===Ue.INSTREAM?2:4}}!function(e){e.PLAYER_START="playerStart",e.PRE_ROLL="preRoll",e.BREAKING_ADS="breakingAds"}(Ln||(Ln={}));var Nn,Un=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Mn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},jn="userId",Fn="exco-uids",Bn="exco-user-sync",qn="user-sync-done",Wn="user-ids-updated",Hn={},Jn=function(e,t){window.addEventListener("message",(function(n){var r=n.data;r&&r.type===Bn&&r.eventName===e&&t(r.metadata)}))},Gn=function(e){return Un(void 0,void 0,void 0,(function(){var t;return Mn(this,(function(n){return t=function(e){var t=e.network,n=e.gdpr,r=e.gdpr_consent;try{var i=new URL(window.location.protocol+"//cdn.ex.co/sync/0.0.1-7abf705/cookie_sync.html"),o=["368531133"];return t&&o.push(t),i.searchParams.set("network",o.join(",")),i.searchParams.set("gdpr",(Number(n)||0).toString()),i.searchParams.set("gdpr_consent",r||""),i.toString()}catch(e){}return null}(e),[2,new Promise((function(e){t||e(),Jn(qn,(function(){return e()})),setTimeout((function(){return e()}),6e3),P(t)}))]}))}))},Yn=function(){return(Yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function zn(e){var t=pn(e),n=t.page,r=t.domain;return{site:{ref:_(n)?n:String(n),domain:_(r)?r:String(r),page:_(n)?n:String(n)}}}function Xn(e){return[[Math.floor(e.width),Math.floor(e.height)]]}!function(e){e.IAB="iab",e.STATIC="static"}(Nn||(Nn={}));function Kn(e){return{config:{cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{userIds:Sn(e),filterSettings:{iframe:{bidders:"*",filter:"include"}}}},src:"https://cdn.ex.co/player/prebid/latest/pb-7.2.0.js"}}function Qn(e,t){var n,r=(null===(n=null==e?void 0:e.content)||void 0===n?void 0:n.currentItem)||{},i=r.id,o=void 0===i?"":i,a=r.title,s=void 0===a?"":a,l=r.url,c=void 0===l?"":l,u={site:{content:{id:_(o)?o:String(o),title:_(s)?s:String(s),url:_(c)?c:String(c)}}};if("rtb"===t.originalType){var d=Hn;d&&(d.excoCookie&&(u.user=u.user||{},u.user.id="".concat(d.excoCookie)),d.syncCookie&&(u.user=u.user||{},u.user.ext=u.user.ext||{},u.user.ext.exco=u.user.ext.exco||{},u.user.ext.exco=d.syncCookie)),u.ext=u.ext||{},u.ext.exco=u.ext.exco||{},e.initialWidth&&e.initialHeight&&(u.ext.exco.width=e.initialWidth,u.ext.exco.height=e.initialHeight),e.pageLoadUid&&(u.ext.exco.sid=e.pageLoadUid),e.version&&(u.ext.exco.pv=e.version)}return u}var Zn,$n=function(e){return void 0===e&&(e=0),!(e<0||e>100)&&100*Math.random()<e},er=function(e,t){return e.reduce((function(e,n){return e[+!t(n)].push(n),e}),[[],[]])},tr=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},nr=function(e){return e.filter((function(e){return!e.isPubDemand}))},rr=function(e){return e.filter((function(e){return e.isPubDemand}))},ir=function(e,t){void 0===t&&(t=0);var n=e;if(t>0){var r=function(e){var t=[];return er(e,(function(e){return!t.includes(e.prebidConfig.bidder)&&(t.push(e.prebidConfig.bidder),!0)}))}(e),i=r[0],o=r[1];n=$n(50)?i:o}var a=function(e){return e.reduce((function(e,t){var n,r,i=(null===(r=null===(n=t.prebidConfig)||void 0===n?void 0:n.ext)||void 0===r?void 0:r.name)||t.prebidConfig.bidder;return e[i]=++e[i]||0,e}),{})}(n),s=n.filter((function(e){var t,n;return a[(null===(n=null===(t=e.prebidConfig)||void 0===t?void 0:t.ext)||void 0===n?void 0:n.name)||e.prebidConfig.bidder]>0}));if(0===s.length)return n;var l=n.filter((function(e){return 0===a[e.prebidConfig.bidder]}));return tr(tr([],l,!0),ir(s,t+1),!0)},or=function(e,t){var n,r,i,o=function(e){return e.filter((function(e){return"prebid"===e.type}))}(t),a=(n=nr(o),r=rr(o),i=[],n.map((function(e){var t;return null===(t=e.prebidConfig)||void 0===t?void 0:t.bidder})).forEach((function(e){r.some((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e}))&&!i.some((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e}))&&(i=tr(tr(tr([],i,!0),n.filter((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e})),!0),r.filter((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e})),!0))})),i),s=nr(a),l=rr(a),c=o.filter((function(e){return!a.includes(e)})),u=e.isPrebidPDSession?tr(tr([],c,!0),l,!0):tr(tr([],c,!0),s,!0),d=er(u,(function(e){return e.originalType===Wt.RTB})),p=d[0],h=d[1],f=ir(h);return tr(tr([],p,!0),f,!0)};!function(e){e.YIELDMO="yieldmo",e.PULSEPOINT="pulsepoint",e.YAHOO="yahooAds"}(Zn||(Zn={}));var ar=function(){return(ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function sr(e,t){var n,r=function(e){var t=Vn(e);return{video:Yn({playerSize:Xn(e),context:e.isOutstream?"outstream":t.context,api:[1,2],mimes:["video/mp4","video/webm","application/javascript"],protocols:[2,3,5,6,7,8],playbackmethod:[2,6],placement:t.placement,plcmt:t.plcmt,linearity:1,minduration:1,startdelay:0,maxduration:60},e.skipParams)}}(e),i=ar(ar({code:"ad_unit_".concat(t.vastId.toString()),renderer:{url:"example.com/publishersCustomRenderer.js",render:function(){}},mediaTypes:r},e.prebidConfig.unit||{}),{ortb2Imp:{ext:{gpid:"ad_unit_".concat(t.vastId.toString())}},bids:[]});return"outstream"===(null===(n=null==r?void 0:r.video)||void 0===n?void 0:n.context)&&(i.renderer={url:"",render:function(){}}),i}var lr=function(e,t){var n=t.prebidConfig.params,r=n.config,i=void 0===r?{}:r,o=n.schain;return i.schain=o?{validation:"relaxed",config:o}:function(e,t){return On(e,t)}(e,t.isPubDemand),t.isPubDemand&&(t.prebidConfig.params.pubDemand=!0),function(e,t){var n;e.bidder===Zn.YIELDMO?e.params.video={protocols:[2,3,5,6]}:e.bidder===Zn.PULSEPOINT?(e.params.video={},e.params.schain={ver:"1.0",nodes:[],complete:0}):e.bidder===Zn.YAHOO?t.yahooAds={mode:"video"}:(null===(n=e.params)||void 0===n?void 0:n.video)&&delete e.params.video}(t.prebidConfig,i),function(e){if(null!==e.prebidMaxDuration&&void 0!==e.prebidMaxDuration&&0!==e.prebidMaxDuration){var t={maxduration:e.prebidMaxDuration};e.prebidConfig.params.video=Yn(Yn({},e.prebidConfig.params.video),t)}}(t),i.ortb2=Qn(e,t),i};function cr(e,t){var n=or(e,t);return hr(e).then((function(t){var r={},i=function(e,t,n){var r=[];return t.forEach((function(t){var i,o,a;if((null===(i=t.prebidConfig)||void 0===i?void 0:i.bidder)&&!((null===(o=t.prebidConfig)||void 0===o?void 0:o.bidder)in n)){var s=ar({},t.prebidConfig),l=sr(e,t);n["ad_unit_".concat(t.vastId.toString())]=t,s.getFloor=(a=t.floorPrice,function(){return{floor:a,currency:"USD"}}),s.floorPrice=t.floorPrice,vr(s),l.bids.push(s),r.push(l)}})),e.prebidJSAdUnitCode++,e.prebidJS.que.push((function(){return e.prebidJS.addAdUnits(r)})),r}(e,n,r);return i.length?new Promise((function(n){if(!e.prebidJS.configWasSet)try{pr(t,e)}catch(e){}t.que.push((function(){return t.setConfig(ur(e))})),Object.values(r).forEach((function(n){t.que.push((function(){var r;t.setBidderConfig({bidders:[null===(r=n.prebidConfig)||void 0===r?void 0:r.bidder],config:ar({},lr(e,n))})}))})),t.que.push((function(){t.requestBids({adUnits:i,timeout:1e3*e.prebidConfig.timeout,bidsBackHandler:function(t){var i=[];e.prebidActiveAuctions--,t&&Object.values(t).forEach((function(e){Object.values(e).forEach((function(e){!function(e,t){var n;if(isNaN(+t.cpm))throw new Error("no pricing provided in the bid");t.playerData=e,t.vast=t.vastXml?"data:;base64,".concat(btoa(t.vastXml)):t.vastUrl,e.vastURL=t.vast,e.prebidConfig.floorPrice=e.floorPrice,e.advertiserDomains=null===(n=t.meta)||void 0===n?void 0:n.advertiserDomains,e.impressionData={currency:t.currency,impType:t.bidder,pricing:+t.cpm},"exco"===t.bidder&&dr(e,t)}(r[e[0].adUnitCode],e[0]),i.push(e[0])}))})),n(i)}})}))})):Promise.resolve([])}))}function ur(e){var t={};return function(e){var t;return"gpp"===(null===(t=e.consentData)||void 0===t?void 0:t.consentType)}(e)&&(t.consentManagement=function(e){return{gpp:{cmpApi:Nn.STATIC,consentData:{gppString:e.consentData.gpp_consent}}}}(e)),function(e){var t;return"gdpr"===(null===(t=e.consentData)||void 0===t?void 0:t.consentType)}(e)&&(t.consentManagement=ar(ar({},t.consentManagement),function(e){return{gdpr:{cmpApi:Nn.STATIC,consentData:{getTCData:{tcString:e.consentData.gdpr_consent,gdprApplies:e.consentData.gdpr}}}}}(e))),t}var dr=function(e,t){t.nurl&&cn(e,"adstart",{url:t.nurl,rate:null}),t.burl&&cn(e,"adstart",{url:t.burl,rate:null})},pr=function(e,t){e.que.push((function(){return e.setConfig(function(e){return ar(ar(ar({bidderTimeout:3e3},e.prebidConfig.config),ur(e)),{ortb2:zn(e),pageUrl:pn(e).page,realTimeData:{dataProviders:[{name:"excoPublisherDemandRtdProvider",waitForIt:!0}]},minBidCacheTTL:0,eventHistoryTTL:0,enableTIDs:!0,performanceMetrics:!1})}(t))})),e.que.push((function(){return e.refreshUserIds()})),e.que.push((function(){return t.prebidJS.configWasSet=!0}))},hr=function(e){var t,n=function(t){e.prebidJS.initialized=!0,t.pbjs.setConfig&&pr(t.pbjs,e)};return(null===(t=e.prebidJS)||void 0===t?void 0:t.initialized)?Promise.resolve(e.prebidJS):new Promise((function(t,r){(function(e){var t=e.src,n=e.target,r=void 0===n?document.body:n,i=e.inIframe,o=void 0===i||i,a=e.windowRefs,s=e.timeout;return new Promise((function(e,n){var i=document.createElement("script");i.src=t,i.setAttribute("type","text/javascript");var l=window;if(o){var c=document.createElement("iframe");c.src="about:blank",c.style.display="none",r.appendChild(c),setTimeout((function(){l=c.contentWindow,Object.assign(l,a||{}),l.document.body.appendChild(i),l.document.open(),l.document.write("<html></html>"),l.document.close()}))}else r.appendChild(i);var u=s&&setTimeout((function(){return n({win:l,msg:"timeout"})}),1e3*s);i.onload=function(){clearTimeout(u),e(l)},i.onerror=function(e){clearTimeout(u),n({win:l,error:e,msg:"script.error"})}}))})({src:e.prebidConfig.src,target:e.rootDivElem,timeout:3,windowRefs:{pbjs:e.prebidJS}}).then((function(e){n(e),t(e.pbjs)})).catch((function(e){e.win&&e.win.pbjs?(n(e.win),t(e.win.pbjs)):r(null)}))}))};var fr,vr=function(e){Object.entries(e.params).forEach((function(t){var n=t[0],r=t[1];r&&_(r)&&(e.params[n]=r.trim())}))},mr=(fr=function(e,t){return(fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}fr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ar=function(){return(Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},yr=function(e){function t(t){var n,r,i,o,a=e.call(this)||this;if(a._emitter=new $e.EventEmitter2,a.requireViewability=!1,a.maxFailedVastRetries=0,a.maxAdStarts=0,a.lastChanceRetry=!1,a.vastErrorWasReported=!1,a.adType=null,a.curAdStarts=0,a.errorCount=0,a.totalRoundNo=0,a.retryCount=0,a.rotationNo=0,a.durationKnown=!1,a.wasDuplicated=!1,a.viewable=!1,a.priority=0,a.priorityTieBreaker=0,a.requireSound=!1,a.requireVisibility=!1,a.fill={rate:1,offset:0},a.video=null,a.initVpaidOnStartDone=!1,a.clickTextEnabled=!1,a.prebidMaxDuration=0,a.logStartWasDone=!1,a.logLoadWasDone=!1,a.vastResponseXML=null,a.delay={},a.skippable=!1,a.unlocked=!1,a.firedEvents={},a.impressionData={},a.apiImpressionData={},a.finishPromiseResolve=function(){},a.finishPromise=new Promise((function(e){a.finishPromiseResolve=e})),a.timers=null,a.flowTimeout=new g,a.impressionAfterStartTimeout=new g,a.requeryTimeout=null,a.callPauseTimer=new g(100),a.viewabilityTimer=new g(2e3),a.failSkipTimer=new g(300),a.keepAliveTimer=new g(500),a.nonLinearCompleteTimer=new g,a._state=vt.None,a.videoElement=null,a.companionsElementDiv=null,a.moatAPI=null,a._adCompleteListeners=[],a._adStartListeneres=[],a.gpvDemand=t,a.applyPubDemandFields(t),h(l,a,{cxvid:m(t.cxvid),cxpid:m(t.cxpid),demandId:A(t.dmid),group:m(t.group,1),vastId:m(t.id,NaN),vastURL:A(t.url),playerId:m(t.pid,ot.playerId),bidder:A(t.dp),maxAdStarts:m(t.mas),priority:m(t.priority),requireVisibility:v(t.rv),video:t.video,prebidMaxDuration:t.maxduration,vastXml:t.vastXml,apiImpressionData:t.impressionData,cookie:A(t.ck),cookieJson:t.cookieJson,delay:t.delay,beacons:t.callbacks,demandAdSlots:t.adSlots,tam:t.tam,ivtBlock:v(t.ivtb),extraData:t.extraData,title:t.title,flamingoDemand:t.fl,capping:t.capping}),a.vastXml&&(a.vastURL=""),a.requireSound=null!=ot.requireSound?ot.requireSound:v(t.rs),null!=t.fill&&(a.fill=f(a.fill,t.fill)),a.uniqId=++ot.curUniq,n=ot,r=a,i=t,o={},d((function(e,t){var a=e.parser(i[e.parName]),s=[a,n[t]].filter(e.filter);s.length>1&&e.prio?r[t]=e.prio(s[0],s[1]):s.length>0&&(r[t]=s[0],a||"type"!==t||(r[t]="vast")),o[t]=r[t]}),T),a.timers=f({},ot.timers,t.timers),a.impressionAfterStartTimeout.Seconds(a.timers.impressionAfterStart),t.mvr&&(a.maxFailedVastRetries=m(t.mvr),a.maxFailedVastRetries>1&&a.maxFailedVastRetries<50&&(a.maxFailedVastRetries=2*a.maxFailedVastRetries)),a.customVars={rpm:t.rpm,cxrpm:t.cxrpm},t.prebid)try{var s;if(null==t.prebid.params._comment)if(a.prebidConfig=t.prebid,!ot.prebidConfig)null==ot.gdprConsentString&&null==ot.gdprConsentApplies||(s={consentString:ot.gdprConsentString,gdprApplies:ot.gdprConsentApplies}),a.prefetch=function(e){return function(e,t,n){var r=t.prebidConfig,i=Date.now(),o=new Promise((function(e,t){var n=setInterval((function(){window.CEDATO_BID&&(clearInterval(n),e()),(Date.now()-i)/1e3>=10&&t({message:"gave up on waiting prebid script"})}),250)})),a={width:e.width,height:e.height,domain:e.domain,playerData:t,gdprConsent:n};return o.then((function(){return window.CEDATO_BID.requestBid(r,a)}))}(ot,e,s)}}catch(e){}return a.vastURL&&a.vastURL.includes("schain")&&(a.vastURL=N(a.vastURL,"schain",function(e,t){var n=On(e,t);if(!n)return"";var r=n.config;return Rn(["".concat(r.ver,",").concat(r.complete)],r.nodes.map((function(e){return[e.asi,e.sid,e.hp,e.rid,e.name,e.domain].join(",")})),!0).join("!")}(ot,a.isPubDemand))),a}return mr(t,e),Object.defineProperty(t.prototype,"viewability",{get:function(){return(null==ot?void 0:ot.isInView)?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,this._emitter.emit("state-change",e)},enumerable:!1,configurable:!0}),t.prototype.onStateChange=function(e){this._emitter.on("state-change",e)},Object.defineProperty(t.prototype,"progress",{get:function(){return null==this?void 0:this.getProgress()},enumerable:!1,configurable:!0}),t.prototype.onAdStart=function(e){this._adStartListeneres.push(e)},t.prototype.triggerAdPlayingCallback=function(){this._adStartListeneres.forEach((function(e){return e()}))},t.prototype.onAdEnded=function(e){this._adCompleteListeners.push(e)},Object.defineProperty(t.prototype,"floorPrice",{get:function(){return this._floorPrice},set:function(e){this._floorPrice=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyValueEnabled",{get:function(){var e;return!0===(null===(e=this.gpvDemand)||void 0===e?void 0:e.gkv)},enumerable:!1,configurable:!0}),t.prototype.applyPubDemandFields=function(e){h(l,this,{isPubDemand:v(e.gtag)}),this.utag=this.isPubDemand?"true":null},t.prototype.getDemandMaxAdStarts=function(){var e,t;return null!==(t=null!==(e=this.demandMaxAdStarts)&&void 0!==e?e:this.getDefaultDmasByType())&&void 0!==t?t:null},t.prototype.getDefaultDmasByType=function(){return this.isPubDemand?null:{gam:4}[this.type]||null},t.prototype.isNonLinear=function(){return!1},t.prototype.initNonLinearCompleter=function(){},t.prototype.unlockAdSlot=function(){!this.unlocked&&this.videoElement&&this.state<vt.Started&&(this.unlocked=!0,this.videoElement.load())},t.prototype.allowedDueToSound=function(e){return!this.requireSound||!ot.started||(!ot.muteToPlay||e)&&!ot.muted&&ot.volume},t.prototype.allowedDueToVisibility=function(){return!this.requireVisibility||ot.isInView},t.prototype.fetchAdUrl=function(e,t){},t.prototype.initCompanion=function(e){if(void 0===e&&(e=document),this.companionHTML)try{this.companionsElementDiv||(this.companionsElementDiv=e.createElement("div"),this.companionsElementDiv.setAttribute("style","width:100%;height:100%;position:relative;top:-"+ot.height+"px;z-index:0;"),this.insertCompanion()),this.companionsElementDiv&&(this.companionsElementDiv.innerHTML=this.companionHTML)}catch(e){}},t.prototype.insertCompanion=function(){ot.divElem.appendChild(this.companionsElementDiv)},t.prototype.initMedia=function(){return this.state=vt.Loading,ot.eventDispatcher.sendInitAdEvent(this,ot),bt.b.emit(bt.a.AD.INIT,{demand:this}),this.adContainersReady.then((function(){}))},t.prototype.onAdResponse=function(){var e,t;return ye(e=ot,(t=this).playerId,t.vastId,t.demandId),Mt(t)&&ye(e,t.cxpid,t.cxvid),!Sr(this)},t.prototype.syncVolume=function(e){this.setAdVolume&&this.setAdVolume(ot.volume,ot.muted,e)},t.prototype.getSkipOffset=function(){return this.skipOffset},t.prototype.getAdSkippableState=function(){var e=this.getSkipOffset();if(e>0){var t=this.getProgress(),n=t&&t.time>0&&t.time||this.playsForSeconds();if(n>=0){var r=Math.floor(n)-e;return!(r<0)||r}}return!1},t.prototype.isSkippable=function(){var e=this.getAdSkippableState();return"number"==typeof e?e<0:e},t.prototype.skipAd=function(){this.onSkip()},t.prototype.onSkip=function(){Xa(ot,this,"ad.skipped",{progress:this.getProgress()}),ot.serverEvents.demandEvent(this,{name:"AdSkipped"}),qt(ot,ne.E_AD_SKIPPED,this,{}),!this.skipVastTracker&&this.vastTracker&&this.vastTracker.skip(),ot.beingVpaid&&ka(ot,"jsAdSkipped",{}),this.failSkipTimer.cancel(),ot.emit(Ze.AD_SKIPPED,this),ot.eventDispatcher.sendAdSkipEvent(this,ot),bt.b.emit(bt.a.AD.SKIPPED,{demand:this}),ot.anyPlaying=!1,Ca(ot,this,2)},t.prototype.getVastXmlString=function(){return this.vastResponseXML instanceof Node?(e=this.vastResponseXML,(new XMLSerializer).serializeToString(e)):this.vastResponseXML;var e},t.prototype.showAdUI=function(){return null==this.enableAdUI||this.enableAdUI},t.prototype.showAd=function(){this.adContainer&&(this.adContainer.style.zIndex="10000",this.adContainer.style.position="absolute")},t.prototype.hideAd=function(){this.adContainer&&(this.adContainer.style.zIndex=(-this.uniqId).toString())},t.prototype.destroyAd=function(){this.adContainer&&this.adContainer.parentNode&&(this.adContainer.parentNode.removeChild(this.adContainer),this.adContainer=null)},t.prototype.verifyVastTrackerProgress=function(e){this.skipVastTracker||this.vastTracker&&(!function e(t,n,r){if(n&&r&&r.vastTracker.quartiles){var i=r.vastTracker.quartiles,o=i[It[t]];if(t==_t.COMPLETE&&(o=r.vastTracker.assetDuration),o){for(var a in i)a&&i.hasOwnProperty(a)&&(!r.vastTracker.progress||r.vastTracker.progress<i[a])&&i[a]<o&&e(Object.keys(i).indexOf(a)+1,n,r);(!r.vastTracker.progress||r.vastTracker.progress<=o)&&r.vastTracker.setProgress(o)}}}(e,ot,this),e==_t.COMPLETE&&this.vastTracker.complete())},t.prototype.onQuartile=function(e){if(this.state==vt.Playing){var t=It[e];this.verifyVastTrackerProgress(e),ot.beingVpaid&&ka(ot,"jsAd".concat(t&&t[0].toUpperCase()+t.slice(1)),{}),Bt(ot,this,e),Xa(ot,this,"ad.".concat(t),{listCompleted:ot.frozen})}},t.prototype.onComplete=function(){this.verifyVastTrackerProgress(_t.COMPLETE),Bt(ot,this,_t.COMPLETE),ln(ot,this,"adcomplete"),this.skippable=!1,bt.b.emit(bt.a.AD.COMPLETED,{demand:this}),ot.emit(Ze.AD_COMPLETE)},t.prototype.viewableForSeconds=function(){return this.viewable&&this.viewableAt?(Date.now()-this.viewableAt)/1e3:-1},t.prototype.playsForSeconds=function(){return this.playedAt?(Date.now()-this.playedAt)/1e3:-1},t.prototype.getErrorEvent=function(e){var t={name:"AdError",errorCode:10,message:e.message},n=!1;return this.state==vt.Prefetching?(t=Ar({name:"VastPrefetchError",errorCode:e.code,message:e.message,retryCount:e.retryCount},this.impressionData&&{pricing:this.impressionData.pricing,currency:this.impressionData.currency}),n=!0):this.state==vt.Started?71==e.code||70==e.code?t={name:"AdParallelStartedError",errorCode:e.code,message:e.message}:41==e.code?(t={name:"AdImpressionError",errorCode:e.code,message:e.message,timeout:!0},n=!0):(t={name:"AdImpressionError",errorCode:10==e.code?40:e.code,message:e.message},n=!0):this.state==vt.Playing&&(60==e.code?(t={name:"AdLongImpressionError",errorCode:e.code,message:e.message,timeout:!0},n=!0):(t={name:"AdImpressionError",errorCode:e.code,message:e.message},n=!0)),{event:t,timed:n}},t}(E);function gr(){console.error("Abstract function call",(new Error).stack)}var Er=function(e){function t(t){return e.call(this,t)||this}return mr(t,e),t.prototype.initAd=function(){gr()},t.prototype.pauseAd=function(){gr()},t.prototype.resumeAd=function(){gr()},t.prototype.showAd=function(){gr()},t.prototype.hideAd=function(){},t.prototype.startAd=function(){gr()},t.prototype.stopAd=function(){},t.prototype.clearAd=function(){},t.prototype.destroyAd=function(){},t.prototype.resizeAd=function(e,t,n){},t.prototype.setAdVolume=function(e,t,n){},t.prototype.getAdVolume=function(){return null},t.prototype.getProgress=function(){return null},t.prototype.getAdRemainingTime=function(){return null},t.prototype.showControlBar=function(){return!0},t.prototype.showAdUI=function(){return!0},t}(yr),br=function(){function e(e){this.playerData=e}return e.prototype.xhr=function(){return ct()},e.prototype.supported=function(){return!!this.xhr()},e.prototype.get=function(e,t,n){var r=this;ht({timeout:t.timeout,url:e,withCredentials:t.withCredentials,xhrObject:this.xhr()}).then((function(e){try{r.playerData.vastResponseXML=function(e){return(null==e.responseXML||e.responseXML.xml)&&e.responseText?ut(e.responseText):e.responseXML}(e),n(null,r.playerData.vastResponseXML)}catch(r){var t={xhr:e,code:at.UNKNOWN,message:r.message,fromUrlHandler:!0};-1!==t.message.indexOf("cross-origin")&&(t.code=at.CORS),n(t,null)}}),(function(e){var t={xhr:e.xhr,code:e.code,fromUrlHandler:!0,message:e.data&&e.data.message,status:e.data&&e.data.status};n(t,null)}))},e}(),Tr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tr(t,e),t.prototype.getErrorEvent=function(t){if(this.state==vt.Fetching){var n={};return 20==t.code||21==t.code||22==t.code||24==t.code||23==t.code||25==t.code?n={name:"VastError",errorCode:t.code,message:t.message,retryCount:t.retryCount}:99==t.code?n={name:"VastFetchError",errorCode:t.code,message:t.message,retryCount:t.retryCount,credentials:t.credentials,timeout:!0}:90!=t.code&&91!=t.code&&92!=t.code&&93!=t.code&&94!=t.code&&95!=t.code&&96!=t.code&&97!=t.code&&98!=t.code||(n={name:"VastFetchError",errorCode:t.code,message:t.message,retryCount:t.retryCount,credentials:t.credentials}),t.status&&(n.status=t.status),{event:n,timed:!0}}return e.prototype.getErrorEvent.call(this,t)},t.prototype.fetchAdUrl=function(e,t){var n=this;this.vastResponseXML=null;var r=function(e,t,n){var r=null,i=n&&n.match(/^data:(.*?)(;base64)?,(.*)$/);if(t.vastXml)try{t.vastResponseXML=ut(t.vastXml)}catch(e){r="Inline VAST failed: "+e.message}else if(i)try{var o=";base64"==i[2]?atob(i[3]):decodeURIComponent(i[3]);t.vastResponseXML=ut(o)}catch(e){r="Inline VAST failed: "+e.message}else n&&-1!==n.indexOf("noad.xml")?r="No Ads expected":(n=J(e.protocol,n))||(r="Invalid VAST url");return{error:r,vastUrl:n}}(ot,this,e),i=r.error,o=r.vastUrl;if(!i){var a,s,l={withCredentials:(s=a||location||window.location||document.location,!(j(a)||s&&(-1!=s.host.indexOf("localhost")||-1!=s.host.indexOf("127.0.0.1")||s.port&&"80"!=s.port))),timeout:12e4,urlhandler:new br(this),response:this.vastResponseXML,wrapperLimit:10};return ot.DMVAST.client.totalCalls=0,o||(l.followAdditionalWrappers=!0),(/^https/.test(o)?ot.DMVAST.client.get(o,l):/^data:;base64/.test(o)?ot.DMVAST.parser.parseVAST(this.vastResponseXML,l):o?ot.DMVAST.client.get(o,l):ot.DMVAST.parser.parseVAST(this.vastResponseXML,l)).then((function(e){return n.onVastResponse(e,null,l,t)})).catch((function(e){return n.onVastResponse(null,e,l,t)}))}},t.prototype.onVastResponse=function(t,n,r,i){e.prototype.onAdResponse.call(this)&&this.handleVastResponse(t,n,r,i)},t.prototype.handleVastResponse=function(e,t,n,r){var i=this,o=Dt(this,t);o||(o=kt(ot,this,e))||Re("initMedia",{players:ot,playerData:this,log:!0},(function(){va(i),ot.serverEvents.demandTimedEvent(i,{name:"VastFetched",credentials:null==n?void 0:n.withCredentials,retryCount:i.retryCount}),r(ot,i)}),(function(){o={reason:28,code:3,message:"initMedia js exception"}})),o&&o.reason&&(Ct(ot,this.vastId,o.code,o.message,null,this,!1,!0),Ca(ot,this,o.reason,{code:o.code,message:o.message,credentials:null==n?void 0:n.withCredentials,retryCount:this.retryCount,status:t&&t.status}))},t}(yr),wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tr(t,e),t.prototype.destroyAd=function(){var t=this;setTimeout((function(){return e.prototype.destroyAd.call(t)}),5e3)},t}(_r);function Sr(e){return!!ot.chilled||e&&ot.isAdContent()}function Ir(e,t,n){t.mediaURL,t.vastId;be(0,0,.01)}var Cr,Rr=function(e){return"mobile"===e.device},Pr=n(3),Dr=function(e){return Math.round(100*e)/100},kr=function(e){var t;return"prebid"===e.type?null===(t=e.prebidConfig)||void 0===t?void 0:t.floorPrice:Lr(e)},Lr=function(e){var t,n;return(null===(t=e.impressionData)||void 0===t?void 0:t.pricing)||(null===(n=e.apiImpressionData)||void 0===n?void 0:n.price)},Or=function(){function e(e,t){this._secondPrice=null,this._players=e,this._startingPrice=t.startingPrice,this._startingPricePub=t.startingPricePub,this._secondaryPriceMultiplier=1.15,this._currFloor=this._startingPrice,this._listen()}return e.prototype.getFloor=function(e){return this._getFloorByDemandType(e)},e.prototype.setSecondPrice=function(e){Ce.debug("Second price set to: ".concat(e)),this._secondPrice=e},e.prototype.resetSecondPrice=function(){Ce.debug("Second price reset, price set to: ".concat(this._currFloor)),this._secondPrice=null},e.prototype.getFactoredSecondaryPrice=function(e){var t=e?Lr(e)*this._secondaryPriceMultiplier:this._currFloor;return Dr(t)},e.prototype._listen=function(){},e.prototype._getFloorByDemandType=function(e){var t=this._secondPrice?Math.max(this._secondPrice,this._currFloor):this._currFloor;return e.isPubDemand&&(t=Math.max(t,this._startingPricePub)),this._isOverrideFloorPrice(e,t)&&t||kr(e)},e.prototype._isOverrideFloorPrice=function(e,t){return!(!Yt(e)||!Xt(this._players))||(Zt(e)&&Kt(this._players)?t>kr(e):!!(this._players.globalPricing&&e.isPubDemand&&t>kr(e))||!(this._players.isFlamingoOn||e.isPubDemand||!e.prebidConfig&&"rtb"!==e.type))},e}(),xr=function(e){return function(e,t){return Boolean(e&&t&&e instanceof t)}(e,Function)||"function"==typeof e},Vr=function(e){return{prebid:60,rtb:60,vast:0,tam:0,gam:e.isPubDemand?0:60}},Nr=function(){return(Nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ur="publisher",Mr="network",jr="mcd_server_error",Fr="mcd_ivt_opportunity",Br="mcd_opportunity",qr="mcd_auction",Wr="mcd_ad_clicked",Hr="mcd_ad_complete",Jr="mcd_ad_error",Gr="mcd_ad_request",Yr="mcd_ad_response",zr="mcd_init_ad",Xr="mcd_start_ad",Kr="mcd_player_ad_impression",Qr="mcd_ad_progress",Zr="mcd_player_ad_skipped",$r=((Cr={})[Gr]=10,Cr[Jr]=10,Cr.DEFAULT_SAMPLE=100,Cr),ei=["no <Ad> element","The VAST response document is empty."],ti=function(e,t){return function(e){return e===Gr}(e)?t.floorPrice:Lr(t)},ni=function(e,t,n){var r,i,o,a,s,l,c,u=rn({demandId:e.demandId});return{demandId:u.demandId,supplyId:u.supplyId,demandIdX:u.demandIdX,supplyIdX:u.supplyIdX,demandIdDX:u.demandIdDX,supplyIdDX:u.supplyIdDX,cpm:ti(n,e),adSourceOwner:e.isPubDemand?Ur:Mr,rollType:t.adSlotCurrentType,vb:t.isInView,mv:null===(r=null==t?void 0:t.flamingoModule)||void 0===r?void 0:r.name,arsAbTest:null===(o=null===(i=null==t?void 0:t.flamingoModule)||void 0===i?void 0:i.ab)||void 0===o?void 0:o.name,mcdContentId:"preRoll"===t.adSlotCurrentType?null===(s=null===(a=null==t?void 0:t.content)||void 0===a?void 0:a.getNextContent())||void 0===s?void 0:s.id:null===(c=null===(l=null==t?void 0:t.content)||void 0===l?void 0:l.currentItem)||void 0===c?void 0:c.id}},ri=function(){function e(e){var t,n=this;this.URL="https://pe.ex.co/events?v=2",this._newEndPointEvents=[qr],this._config=e,this._externalEventDispatcher=e.overrides.eventDispatcher,t=function(e){var t,r;n._ids=e,n._externalEventDispatcher.updateBaseAttributes(((t={})[jn]=null===(r=n._ids)||void 0===r?void 0:r.excoCookie,t))},Object.keys(Hn).length&&t(Hn),Jn(Wn,(function(e){Object.assign(Hn,e),t(e)}))}return e.prototype.send=function(e,t){void 0===t&&(t={}),this._newEndPointEvents.includes(e)?this._sendToNewEndPoint(e,t):this._externalEventDispatcher.send(e,t)},e.prototype._sendToNewEndPoint=function(e,t){var n,r=this._externalEventDispatcher._buildEventPayload(e,t);(function(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),st(this,void 0,void 0,(function(){var n,r,i,o;return lt(this,(function(a){switch(a.label){case 0:return[4,fetch(e,{method:"POST",mode:"cors",body:t})];case 1:return(n=a.sent()).ok?[3,3]:(r=Error.bind,o=(i="Error @http#postJSON: status code ".concat(n.status,", message: ")).concat,[4,ft(n)]);case 2:throw new(r.apply(Error,[void 0,o.apply(i,[a.sent()])]));case 3:return[2,mt(n)?n.json():n.text()]}}))}))})(this.URL,(n=this._config,"safari"===n.browser?JSON.stringify(r):Object(Pr.compressObj)(r))).then((function(){}))},e.prototype.addBaseAttribute=function(e,t){xr(this._externalEventDispatcher.addBaseAttribute)&&this._externalEventDispatcher.addBaseAttribute(e,t)},e.prototype.sendRequestEvent=function(e,t){this.sendDemandEvent(Gr,e,t)},e.prototype.sendResponseEvent=function(e,t){this.sendDemandEvent(Yr,e,t)},e.prototype.sendErrorEvent=function(e,t,n){ei.includes(t)||this.sendDemandEvent(Jr,e,n,{msg:t})},e.prototype.sendInitAdEvent=function(e,t){this.sendDemandEvent(zr,e,t)},e.prototype.sendStartAdEvent=function(e,t){this.sendDemandEvent(Xr,e,t)},e.prototype.sendAdCompleteEvent=function(e,t){this.sendDemandEvent(Hr,e,t)},e.prototype.sendAdClickedEvent=function(e,t){this.sendDemandEvent(Wr,e,t)},e.prototype.sendAdProgressEvent=function(e,t,n){this.sendDemandEvent(Qr,e,n,{progress:t})},e.prototype.sendAdImpressionEvent=function(e,t){this.sendDemandEvent(Kr,e,t)},e.prototype.sendAdSkipEvent=function(e,t){this.sendDemandEvent(Zr,e,t)},e.prototype.getDemandExtraData=function(e,t,n){var r,i;return void 0===n&&(n={}),Nr(Nr(Nr(Nr({},function(e,t){return{id:e.vastId,type:e.originalType||e.type,bidder:e.bidder,duration:e.duration,sampling:$r[t],did:e.demandId,transactionId:e.transactionId,maxDuration:Vr(e)[e.type],flamingoScore:e.flamingoDemand}}(e,t)),function(e){var t;return{cache:an(e),mediaType:e.adType,buyer:null===(t=e.ad)||void 0===t?void 0:t.system,advertiserDomains:e.advertiserDomains}}(e)),n),((r={})[Fn]=null===(i=this._ids)||void 0===i?void 0:i.syncCookie,r))},e.prototype.sendDemandEvent=function(e,t,n,r){var i;void 0===r&&(r={}),!this._config.reqSampled&&(i=e,Object.keys($r).includes(i))||this.send(e,{extraData:this.getDemandExtraData(t,e,r),enrichedData:ni(t,n,e)})},e}(),ii=function(e,t){return{adSourceId:t.vastId,host:F(),isMobile:Rr(e),pageLoadUid:e.pageLoadUid,pv:e.whiteOpsId,to:e.whiteOpsState}};function oi(e,t){var n=function(e,t){var n=sn(e),r={viewable:[],notviewable:[],viewundetermined:[]};return t.ad.viewableImpression.forEach((function(e){var t,i,o;(null===(t=null==e?void 0:e.viewable)||void 0===t?void 0:t.length)>0&&(r.viewable=e.viewable.map((function(e){return n(e)}))),(null===(i=null==e?void 0:e.notviewable)||void 0===i?void 0:i.length)>0&&(r.notviewable=e.notviewable.map((function(e){return n(e)}))),(null===(o=null==e?void 0:e.viewundetermined)||void 0===o?void 0:o.length)>0&&(r.viewundetermined=e.viewundetermined.map((function(e){return n(e)})))})),r}(e,t),r=function(e){return R(e)};if(Vt.isAvailable(window)){var i=new Vt(e.divElem);i.on((function(i){n[i].forEach(r),Xa(e,t,"viewable"===i?"viewable":"nonViewable")})),t.vastTracker.on("complete",(function(){i.off()}))}else n.viewundetermined.forEach(r)}function ai(e,t){null==t.creative.trackingEvents&&(t.creative.trackingEvents=[]),t.vastTracker=new e.DMVAST.VASTTracker(e.DMVAST.client,t.ad,t.creative),function(e,t){var n,r;e.reportViewability&&(null===(r=null===(n=t.ad)||void 0===n?void 0:n.viewableImpression)||void 0===r?void 0:r.length)>0&&oi(e,t)}(e,t),function(e){!e.durationKnown&&e.vastTracker.duration&&e.vastTracker.duration>0&&(e.duration=e.vastTracker.duration);e.vastTracker.duration=e.duration,e.vastTracker.setDuration(e.duration)}(t),t.vastTracker.playerId=e.playerId,t.vastTracker.subid=e.subid,t.vastTracker.domain=e.domain,t.vastTracker.vastId=t.vastId,t.vastTracker.on("clickthrough",(function(e){t.adClickUrl=e})),e.skipOffset&&(t.vastTracker.skipDelay=e.skipOffset)}var si=function(){return(si=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function li(e,t){t.adStartCount++,e.beingVpaid&&ka(e,"jsAdStarted",{}),t.viewableOnStart&&ma(e,t)}function ci(e,t){if(t.gotAdImpression)return!0;if(t.skipVastTracker||(ai(e,t),function(e){var t;null===(t=e.vastTracker)||void 0===t||t.trackImpression()}(t)),function(e,t){if(e.info.mobile){e.usejsv;be(0,0,.005)}}(e,t.adType),t.state==vt.Finished)return!1;if(e.paused&&!e.allowPausedImpressions)return ga(e,t),Ct(e,t.vastId,61,"impression on paused",null,t),Ca(e,t,4,{code:61,message:"impression on paused"}),!1;e.anyPlaying=!0,t.state=vt.Playing,t.gotAdImpression=!0,t.triggerAdPlayingCallback(),ma(e,t),t.initNonLinearCompleter(),t.viewabilityTimer.start().then((function(){e.serverEvents.demandEvent(t,si(si({name:"AdProgress"},Nt(e)),{progress:0,duration:2,durationDelta:0}))})).catch((function(){}));var n=t.utag,r=n&&!e.usableTagsSent[n]?(e.usableTagsSent[n]=!0,{utag:n}):{},i=Nt(e);setTimeout((function(){e.eventDispatcher.sendAdImpressionEvent(t,e),e.serverEvents.demandTimedEvent(t,si(si(si({name:"AdImpression"},Nt(e)),t.impressionData),r))}),e.adViewabilityDelay),function(e,t){var n=((new Date).getTime()-t.startAdTime)/1e3;qt(e,ne.E_ADSTART,t,si({time:n.toFixed(1),gpvOrdNo:t.uniqId,retryTestGroup:e.retryTestGroup,widthDetected:e.widthDetected,heightDetected:e.heightDetected,vastType:Ft(t),actualVastType:jt(t)},t.impressionData))}(e,t);var o=function(e,t){return t.impDetail?si({},t.impressionData&&si(si(si(si({price:t.impressionData.pricing||t.apiImpressionData.price,currency:t.impressionData.currency||t.apiImpressionData.currency,bidder:null==t?void 0:t.bidder,publisherDemand:null==t?void 0:t.isPubDemand,adType:t.type},e.sessionConfig),{eids:e.eids}),rn({demandId:t.demandId})),{adDuration:t.duration,title:t.title,transactionId:t.transactionId})):null}(e,t);o.viewability=i;try{bt.b.emit(bt.a.AD.IMPRESSION,{demand:t}),e.emit(Ze.AD_STARTED,{apiImpressionData:o,playerData:t})}catch(e){Ce.error("ad.started emit failed",e)}if(!t.isPubDemand&&("prebid"===t.type||"rtb"===t.type))try{!function(e,t){e.iiq&&e.iiq.reportExternalWin(gn(e,t))}(e,o)}catch(e){Ce.error("send iiq pixel failed",e)}try{ln(e,t,"adstart")}catch(e){Ce.error("trigger beacon failed",e)}if($n(20))try{e.sendPixel(function(e,t){var n=ii(e,t),r=n.adSourceId,i=n.pageLoadUid,o=n.host,a=n.isMobile,s=n.to,l=n.pv;return q("https://s.admthop.com/2/193913/analytics.gif?dt=1939131609254688303000",{di:o,ui:i,pp:"0012000001fxZm9AAE",si:r,md:2,ti:Math.floor(1e20*Math.random()),de:a?2:4,sr:"ex.co",pv:l,to:s})}(e,o))}catch(e){Ce.error("send white ops pixel failed",e)}if(!t.skipVastTracker)try{t.vastTracker.load()}catch(e){Ce.error("load vast tracker failed",e)}if(e.beingVpaid)try{ka(e,"jsAdImpression",{})}catch(e){Ce.error("calling vpaid impression event failed",e)}e.curAdStarts++,t.curAdStarts++;var a=e.rollAdStarts||e.maxAdStarts;if(a&&e.curAdStarts>=a)try{Ra(e,t)}catch(e){Ce.error("freeze players failed",e)}try{!function(e,t){if(t.keepAlive){var n=null,r=0,i=function(){t.keepAliveTimer.start().then((function(){var o=t.getAdRemainingTime();null!=n&&o==n||(n=o,r=Date.now()),Date.now()-r>=1e3*t.keepAlive?(ga(e,t),Ca(e,t,30,{code:62,message:"Time stuck on state ".concat(vt[t.state])})):i()})).catch((function(){}))};i()}}(e,t)}catch(e){Ce.error("keep alive failed",e)}if(t.allowLongImpressions||t.flowTimeout.Seconds(t.timers.longImpression).start((function(){Ct(e,t.vastId,60,"long impression",null,t),Re("longImpression",{players:e,log:!0},(function(){Ca(e,t,3,{code:60,message:""}),e.beingVpaid&&ka(e,"jsAdSkipped",{})}))})).catch((function(){})),e.paused&&!t.isPaused)try{Va(e,t)}catch(e){Ce.error("pause player data failed",e)}return!0}var ui=function(){return(ui=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},di=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},pi=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function hi(e){return di(this,void 0,void 0,(function(){var t,n,r;return pi(this,(function(i){switch(i.label){case 0:return t=e.pubId,(r=function(e){var t=document.getElementById((n=e,"".concat(ze).concat(n)));var n;return t?fi(t.contentWindow):null}(t))?[3,2]:[4,vi(e)];case 1:r=i.sent(),i.label=2;case 2:if(!(n=r))throw new Error("Error loading the TAM API for pubId: ".concat(t));return[2,n]}}))}))}function fi(e){return e.apstag}function vi(e){return di(this,void 0,void 0,(function(){var t,n,r;return pi(this,(function(i){switch(i.label){case 0:return t=e.tamConfig,[4,P()];case 1:return(n=i.sent())?(r=n.contentWindow,Ke(n,t.pubId),function(e){(function(e){var t=e.document.getElementsByTagName("link");return Array.from(t).some((function(e){return"https://c.amazon-adsystem.com"===e.href}))})(e)||mi(e)}(window),mi(r),function(e){e.__tcfapi=window.__tcfapi}(r),function(e){Object.defineProperty(e,"innerWidth",{writable:!0,configurable:!0,value:window.innerWidth}),Object.defineProperty(e,"innerHeight",{writable:!0,configurable:!0,value:window.innerHeight})}(r),ot.isAmp&&function(e){try{window.name&&(e.context=ui(ui({},JSON.parse(window.name)),{tagName:"AMP-AD"}))}catch(e){}}(r),(o=r).apstag=o.apstag||{_Q:[],init:function(){o.apstag._Q.push(["i",arguments,(new Date).getTime()])},fetchBids:function(){o.apstag._Q.push(["f",arguments,(new Date).getTime()])}},function(e,t){var n;e.__EXCO=e.__EXCO||{tamInitialized:!1},e.__EXCO.tamInitialized||(e.__EXCO.tamInitialized=!0,e.apstag.init({pubID:t.pubId,deals:null===(n=t.deals)||void 0===n||n,videoAdServer:"EX.CO",bidTimeout:8e3}))}(r,t),[4,Ai(r)]):[3,3];case 2:return i.sent(),[2,fi(r)];case 3:return[2]}var o}))}))}function mi(e){var t=e.document,n=t.createElement("link");n.rel="dns-prefetch",n.href="https://c.amazon-adsystem.com",t.head.appendChild(n);var r=document.createElement("link");r.rel="preconnect",r.href="https://c.amazon-adsystem.com",t.head.appendChild(r)}function Ai(e){return new Promise((function(t,n){try{var r=e.document,i=r.createElement("script");i.src="https://c.amazon-adsystem.com/aax2/apstag.js",i.async=!0,i.onload=function(){return t()},r.head.appendChild(i)}catch(e){n()}}))}var yi=function(){return(yi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},gi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Ei=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function bi(e){return gi(this,void 0,void 0,(function(){var t,n,r,i,o;return Ei(this,(function(a){switch(a.label){case 0:return e.state=vt.Prefetching,[4,Ti(e)];case 1:return[4,_i(a.sent(),e)];case 2:return(t=a.sent()).length>0?(n=function(e,t){var n=e.slotId;return t.find((function(e){return e.slotID===n}))||null}(e,t),(r=function(e){var t,n,r=e.targeting,i=null;i=r&&!Array.isArray(r)?r.amzniid||r.amzniid_sp?{iid:r.amzniid||r.amzniid_sp,bid:r.amznbid||r.amznbid_sp,pmp:!!r.amznbid_sp}:null:e.amzniid||e.amzniid_sp?{iid:e.amzniid||e.amzniid_sp,bid:e.amznbid||e.amznbid_sp,pmp:!!e.amznbid_sp}:null;i&&(null===(n=null===(t=window.location)||void 0===t?void 0:t.href)||void 0===n?void 0:n.includes("amzn_debug_mode=1"))&&(i.debug=1);return i}(n))?[4,Si(e,r)]:(Ce.error("TAM bid did not contain targeting",new Error,{demand:e,bid:n}),[2,!1])):[3,4];case 3:return i=a.sent(),o=function(e){return"https://aax.amazon-adsystem.com/e/dtb/vast?b=".concat(e.iid).concat(e.pmp?"":"&pp=".concat(e.bid),"&rnd=").concat(Math.round((new Date).getTime()/1e3))}(r),function(e,t){var n=t.vastURL,r=t.priority,i=void 0===r?0:r;e.vastURL=n,e.impressionData={pricing:+i,currency:"USD",impType:"TAM"}}(e,{vastURL:o,priority:i}),[2,!0];case 4:return e.state=vt.Finished,[2,!1]}}))}))}function Ti(e){return gi(this,void 0,void 0,(function(){return Ei(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,hi(e)];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}}))}))}function _i(e,t){return gi(this,void 0,void 0,(function(){return Ei(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){try{e.fetchBids(function(e){var t=e.slotId,n=e.floorPrice;return{slots:[yi({slotID:t,mediaType:"video",timeout:"8000"},wi(n))]}}(t),(function(e){return n(e)}))}catch(e){r([])}}))];case 1:return[2,n.sent()]}}))}))}function wi(e){return void 0===e&&(e=null),e&&e>.01?{floor:{value:Math.floor(100*e),currency:"USD"}}:{}}function Si(e,t){return gi(this,void 0,void 0,(function(){var n;return Ei(this,(function(r){return n={amznbid:t.bid,debug:t.debug},[2,Ii(te(e.tamProxy,n),e)]}))}))}function Ii(e,t){return gi(this,void 0,void 0,(function(){var n;return Ei(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,yt(e)];case 1:return[2,r.sent().cpm];case 2:return n=r.sent(),Ce.error("TAM mapping error: ".concat(n.message),n,{vastId:t.vastId}),[2,t.floorPrice];case 3:return[2]}}))}))}function Ci(e,t){t.filter((function(e){return"rtb"===e.type})).forEach((function(t){t.vastURL=function(e,t){var n=e.consentData,r=void 0===n?{}:n,i=t;return"boolean"==typeof r.gdpr&&(i=N(i,"gdpr",r.gdpr?"1":"0")),"string"==typeof r.gdpr_consent&&(i=N(i,"gdpr_consent",r.gdpr_consent)),i}(e,t.vastURL),t.vastURL=function(e,t){var n=Vn(e),r=N(t,"placement",n.placement);return N(r,"plcmt",n.plcmt)}(e,t.vastURL),t.vastURL=function(e,t){var n=t;return Object.entries(e.skipParams).forEach((function(e){var t=e[0],r=e[1];n=N(n,t,r)})),n}(e,t.vastURL)}))}var Ri=function(e,t){var n=function(e){var t=Math.max.apply(Math,e.map((function(e){return e.priority||0})));return e.filter((function(e){return(e.priority||0)===t}))}(t);return n=function(e,t){return t.filter((function(t){return!t.requireViewability||e.partiallyInView}))}(e,n)},Pi=function(e){var t=e[0];return e.forEach((function(e){Lr(e)>Lr(t)&&(t=e)})),t},Di=function(e,t){var n=t.filter((function(e){return Yt(e)})),r=n.length>0?n:t;return Pi(Ri(e,r))};function ki(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ki)}var Li=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Oi=[],xi=null;function Vi(e,t){return(null===Oi||(null==t?void 0:t.override))&&(Oi=null!==xi?Li([xi],e,!0):e),Oi}function Ni(e){return xi=e,e}var Ui=function(){return(Ui=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Mi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},ji=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Fi=function(){function e(e,t){this._ads=[],this._demandList=[],this._isFetching=!1,this._refreshIntervalRef=null,this._auctionId=0,this._players=e,this._priceService=t}return Object.defineProperty(e.prototype,"pending",{get:function(){return this.getAdsByState(this._ads,vt.Fetched)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this._refreshIntervalRef=setInterval(this._refresh.bind(this),1e3)},e.prototype.fetchAds=function(e){var t=e.exclude,n=void 0===t?[]:t,r=e.timeoutInSeconds;return Mi(this,void 0,void 0,(function(){var e,t,i,o,a,s,l,c,u,d,p,h;return ji(this,(function(f){switch(f.label){case 0:return this._shouldDoAuction()?(e=new Date,this._auctionId++,t=this,[4,this._getDemandsToFetch(n)]):(Ce.log("Fetching ads aborted - fetch is already in progress"),[2]);case 1:return t._demandList=f.sent(),this._isFetching=!0,this._players.fetchTime=Date.now(),this._destroyAllSpentPlayerData(),Vi(this._demandList,{override:!0}),Ce.log("Fetching ".concat(this._demandList.length," new demands"),this._demandList.map((function(e){return e.vastId}))),i=this._separateGroups(this._demandList),o=i[0],a=i[1],s=i[2],l=a.length>0,c=s.length>0,u=this._getGroupTimeouts(r,l,c),d=u[0],p=u[1],h=u[2],[4,En(this._fetchPrimaryDemands(o),d)];case 2:return f.sent(),l?[4,En(this._fetchSecondaryDemands(a),p)]:[3,4];case 3:f.sent(),f.label=4;case 4:return!c||this.pending.find(Jt)?[3,6]:[4,En(this._fetchSecondaryDemands(s),h)];case 5:f.sent(),f.label=6;case 6:return this._isFetching=!1,Ce.info("Auction ended",{auctionId:this._auctionId,pending:this.pending,time:(new Date).getTime()-e.getTime()}),bt.b.emit(bt.a.INTERNAL.AUCTION.END,{auctionId:this._auctionId,pending:this.pending}),[2,this.pending]}}))}))},e.prototype._allFetchedPromise=function(e){return new Promise((function(t){var n=new Set;e.forEach((function(r){return r.onStateChange((function(){var i;i=r,vt.ScheduledFetch<=i.state&&i.state<vt.Fetched||n.has(r)||(n.add(r),n.size===e.length&&t(Array.from(n).filter((function(e){return e.state===vt.Fetched}))))}))}))}))},e.prototype._destroyAllSpentPlayerData=function(){Oi.filter((function(e){return e.state>vt.Playing})).forEach((function(e){return e.destroyAd()})),Vi(Oi.filter((function(e){return e.state>vt.Playing})),{override:!0})},e.prototype._separateGroups=function(e){var t=er(e,(function(e){return Jt(e)})),n=t[0],r=t[1],i=er(r,(function(e){return!function(e){return Zt(e)}(e)}));return[i[0],n,i[1]]},e.prototype._getGroupTimeouts=function(e,t,n){var r=1e3*e;return t?n?[.6*r,.2*r,.2*r]:[.75*r,.25*r,0]:n?[.75*r,0,.25*r]:[r,0,0]},e.prototype._fetchPrimaryDemands=function(e){return Mi(this,void 0,void 0,(function(){var t,n,r;return ji(this,(function(i){return Ce.log("Primary Fetch",e.map((function(e){return{id:e.vastId,bidder:e.bidder,type:e.type,debug:e.gpvDemand}}))),this._initDemands(e),t=er(e,(function(e){return function(e){return e.type===Wt.PREBID}(e)})),n=t[0],r=t[1],this._fetchVasts(this._players,r),this._fetchPrebids(this._players,n),[2,this._allFetchedPromise(e)]}))}))},e.prototype._fetchSecondaryDemands=function(e){return Mi(this,void 0,void 0,(function(){var t,n;return ji(this,(function(r){return t=this._priceService.getFactoredSecondaryPrice(Di(this._players,this._ads)),n=this._filterSecondaryDemands(e,t),this._initDemands(n,t),Ce.log("Secondary Fetch: floorPrice ".concat(t),{fetching:n.map((function(e){return{id:e.vastId,type:e.type}})),cached:this.pending.map((function(e){return{id:e.vastId,type:e.type}}))}),this._fetchVasts(this._players,n),[2,this._allFetchedPromise(n)]}))}))},e.prototype._filterSecondaryDemands=function(e,t){var n=this;return e.filter((function(e){return $t(n._players,e)||kr(e)>=t}))},e.prototype._initDemands=function(e,t){this._setFloorPrice(e,t),this._setRtbParams(this._players,e)},e.prototype._refresh=function(){this._isFetching&&this._isDoneFetching()&&(this._isFetching=!1,this._refreshIntervalRef&&clearInterval(this._refreshIntervalRef))},e.prototype._isGpvDataEmpty=function(){return 0===on(this._players.gpvData).length},e.prototype._isDoneFetching=function(){return!this._demandList.some((function(e){return function(e){return vt.ScheduledFetch<=e.state&&e.state<vt.Fetched}(e)}))},e.prototype.getAdsByState=function(e,t){return e.filter((function(e){return e.state===t}))},e.prototype._addAdToStack=function(e){this._ads.push(e),this._stampCashEntry(e)},e.prototype._getDemandsToFetch=function(e){return void 0===e&&(e=[]),Mi(this,void 0,void 0,(function(){var t,n,r;return ji(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._createNewFetchList()];case 1:return t=i.sent(),n=this._filterCappedAds(this._filterNonCachedDemands(this._filterExcludedDemands(t,e))),[2,(o=this._players,a=n,o.isIvt&&(a=a.filter((function(e){return!e.ivtBlock}))),a)];case 2:return r=i.sent(),Ce.error("Failed to create new fetch list",r),[2,[]];case 3:return[2]}var o,a}))}))},e.prototype._filterNonCachedDemands=function(e){var t=this.pending.map((function(e){return e.vastId}));return e.filter((function(e){return!t.includes(e.vastId)}))},e.prototype._filterExcludedDemands=function(e,t){void 0===t&&(t=[]);var n=t.map((function(e){return e.vastId}));return e.filter((function(e){return!n.includes(e.vastId)}))},e.prototype._filterCappedAds=function(e){return e.filter((function(e){if(!e.capping)return!0;var t=e.capping,n=t.current,r=t.imp;return(null==n?void 0:n.imp)<r}))},e.prototype._createNewFetchList=function(){return Mi(this,void 0,void 0,(function(){var e=this;return ji(this,(function(t){switch(t.label){case 0:return[4,bt.b.emitAsync(bt.a.PLUGIN.ACTION.AUCTION,{players:this._players})];case 1:return t.sent(),[2,on(this._players.gpvData).map((function(t){return e._initPlayerData(new Er(t),e._players)}))]}}))}))},e.prototype._shouldDoAuction=function(){return this._players.monetize&&!this._isFetching&&!this._isGpvDataEmpty()&&!this._isConsentRequired()},e.prototype._fetchPrebids=function(e,t){var n=this;if(t.length>0)return t.forEach((function(t){va(t),e.serverEvents.demandEvent(t,{name:"startVastPrefetch"}),e.eventDispatcher.sendRequestEvent(t,e)})),cr(e,this._demandList).then((function(e){return n.onPrebidAuctionSuccess(e)}),this.onPrebidAuctionError.bind(this))},e.prototype.onPrebidAuctionError=function(){},e.prototype.onPrebidAuctionSuccess=function(e){var t=this;void 0===e&&(e=[]);var n=e.map((function(e){return e.playerData.vastId}));this._demandList.filter((function(e){return t._isPrebid(e)&&!n.includes(e.vastId)})).forEach((function(e){e.state=vt.Finished}));for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.playerData;if(a.flowTimeout.cancel(),!1===o.vast||null===o.vast)return void Ca(this._players,a,34,{code:80,message:"prefetch - no vast",retryCount:a.retryCount});this._players.serverEvents.demandTimedEvent(a,Ui({name:"VastPrefetched",retryCount:a.retryCount},a.impressionData&&{pricing:a.impressionData.pricing,currency:a.impressionData.currency})),this._fetchVast(this._players,a)}},e.prototype._fetchVasts=function(e,t){var n=this;t.forEach((function(t){return n._resolveVast(e,t)}))},e.prototype._resolveVast=function(e,t){(function(e,t){if(!t.video)return!1;return t.skipVastTracker=!0,t.creative={},t.adType="video",t.mediaURL=t.video.url,t.adClickUrl=t.video.click,va(t),!0})(0,t)||(e.eventDispatcher.sendRequestEvent(t,e),this._isTAM(t)?(t.prefetch=function(){return e.serverEvents.demandEvent(t,{name:"startVastPrefetch"}),bi(t)},this._prefetchVast(e,t)):this._fetchVast(e,t))},e.prototype._isPrebid=function(e){return!!e.prebidConfig},e.prototype._setRtbParams=function(e,t){Ci(e,t)},e.prototype._isTAM=function(e){return"tam"===e.type},e.prototype._prefetchVast=function(e,t){var n=this;va(t);var r=t.prefetch(t),i=r,o=function(r,i){t.state==vt.Prefetching&&(t.flowTimeout.cancel(),!1!==r&&null!==r&&("string"==typeof r&&(t.vastURL=r),i&&e.serverEvents.demandTimedEvent(t,Ui({name:"VastPrefetched",retryCount:t.retryCount},t.impressionData&&{pricing:t.impressionData.pricing,currency:t.impressionData.currency})),n._fetchVast(e,t)))};(null==i?void 0:i.then)?i.then((function(e){return o(e,!0)})):o(r)},e.prototype._fetchVast=function(e,t){t.state=vt.Fetching;var n,r=t.vastXml,i=t.vastURL;if(!r){if(!i||"#"==i[0]||!i.trim())return;!function(e,t){(function(e,t){return null!=e.useIMA?e.useIMA:function(e){return null!=e.match(/\/\/[^/]*g\.doubleclick\.net/)}(t)})(e,t)&&function(e,t){e.vastURL=t,e.mediaURL=t,e.adType="jsima"}(e,t)}(t,n=sn(e,t)(i))}va(t),t.fetchAdUrl(n,this._handleAdFetched.bind(this))},e.prototype._handleAdFetched=function(e,t){if(ya(e,t),this._addAdToStack(t),t.state=vt.Fetched,e.eventDispatcher.sendResponseEvent(t,e),Ce.hasLoggers()){var n={vastId:t.vastId,bidder:t.bidder,cpm:Lr(t),vastXml:t.getVastXmlString()||t.vastXml};Ce.remote("Vast fetched",n)}},e.prototype._stampCashEntry=function(e){e.cacheEntryTime=new Date},e.prototype._isRTB=function(e){return"rtb"===e.type},e.prototype._setFloorPrice=function(e,t){var n=this;e.forEach((function(e){var r,i;e.floorPrice=t||n._priceService.getFloor(e),n._isRTB(e)&&function(e,t){e.vastURL=N(e.vastURL,"nfcpm",t)}(e,e.floorPrice),n._isPrebid(e)&&(r=e,i=e.floorPrice,r.floorPrice=r.isPubDemand?i:Math.max(i||0,.3))}))},e.prototype._isConsentRequired=function(){return M(this._players.consentData.gdpr)&&M(this._players.consentData.gdpr_consent)&&this._players.waitForUserConsent},e.prototype.removeAdFromCache=function(e){e.state=vt.Finished;var t=this._ads.indexOf(e);-1!==t&&this._ads.splice(t,1),Ce.log("Removing ".concat(e.vastId," from cache"),{id:e.vastId,type:e.type})},e.prototype._initPlayerData=function(e,t){return e.state=vt.Prefetching,e.guid=ki(!1),e.loadAdTime=Date.now(),e.retryCount++,e.totalRoundNo++,t.totalVastRetries++,e.ad=null,e.creative=null,e.mediaURL="",e.adType=null,e.firedEvents={},e.vastTracker=null,e.skipVastTracker=!1,e.hasJSVPAID=!1,e.initVpaidOnStartDone=!1,e.transactionId=this._auctionId,function(e){return"tam"===e.type}(e)&&function(e){e.adType="tam"}(e),e},e}();var Bi,qi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Wi=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Hi=function(){function e(e,t){var n=this;this.MINIMUM_TIME_TO_WAIT_FROM_SESSION_START=2,this._upcomingSlotTime=5,this._currentSlotImpCount=0,this._isActiveSlot=!1,this._currentSlotType=Ln.PLAYER_START,this._initializedPromised=null,this._paused=!1,this._started=!1,this._config=function(e){var t,n=e.schedule,r=function(e){var t,r;return(null===(t=n[e])||void 0===t?void 0:t.maxImpressions)||(null===(r=n.content)||void 0===r?void 0:r.mas)||2},i=function(t){var r,i;return{slotImpTimeout:e.info.mobile?null===(r=n[t])||void 0===r?void 0:r.slotImpTimeout:null===(i=n[t])||void 0===i?void 0:i.slotImpTimeoutMobile}},o={enabled:!0,maxImpressions:r(Ln.PLAYER_START),timeout:7,slotImpTimeout:3,slotImpTimeoutMobile:3},a={enabled:!0,maxImpressions:r(Ln.PRE_ROLL),slotImpTimeout:3,slotImpTimeoutMobile:3},s={enabled:!0,maxImpressions:1,interval:(null===(t=n.breakingAds)||void 0===t?void 0:t.interval)||function(){var e,t,r;return Array.isArray(null===(e=null==n?void 0:n.time)||void 0===e?void 0:e.start)?null===(t=null==n?void 0:n.time)||void 0===t?void 0:t.start[0]:null===(r=null==n?void 0:n.time)||void 0===r?void 0:r.start}()||15};return{startingPrice:e.sessionTarget,startingPricePub:e.globalPricing&&e.sessionTargetPub?e.sessionTargetPub:e.sessionTarget,timeToFetchAdsBeforeSlot:7,playerStart:xn(xn(xn({},o),n.playerStart||{}),i(Ln.PLAYER_START)),preRoll:xn(xn(xn({},a),n.preRoll||{}),i(Ln.PRE_ROLL)),breakingAds:xn(xn({},s),n.breakingAds)}}(e),this._players=e,this._content=t,this._startTime=new Date,this._priceService=new Or(e,{startingPrice:this._config.startingPrice,startingPricePub:this._config.startingPricePub,rangeFactor:.5}),this._adsManager=new Fi(e,this._priceService),e.apiInterface.on("closed",(function(){n._timerId&&clearInterval(n._timerId)}))}return e.prototype.init=function(){if(this._players.monetize)return this._adsManager.init(),this._listen(),this._isSlotEnabled(Ln.PLAYER_START)&&this._isTheSessionJustStarted()?(this._players.adSlotCurrentType=this._currentSlotType,this._initializedPromised=this._adsManager.fetchAds({timeoutInSeconds:this._config.playerStart.timeout})):this._initializedPromised=Promise.resolve([]),this._initializedPromised},e.prototype.start=function(){var e,t=this;null===(e=this._initializedPromised)||void 0===e||e.then((function(){t._started?t.resumeSchedule():(t._started=!0,t._isSlotEnabled(Ln.PLAYER_START)?t._startSlot({slotType:Ln.PLAYER_START}):t._endSlot({playAdContent:!1}))}))},e.prototype.pauseSchedule=function(){this._paused=!0,this._players.autoplay=!1,this._players.paused=!0},e.prototype.resumeSchedule=function(){this._paused=!1,this._players.autoplay=!0,this._players.paused=!1},Object.defineProperty(e.prototype,"isAdPlaying",{get:function(){return!!this._playingAd},enumerable:!1,configurable:!0}),e.prototype._listen=function(){var e=this;this._players.on(Ze.AD_STARTED,this._onAdStart.bind(this)),this._players.on(Ze.AD_COMPLETE,(function(){return e._onAdComplete({playAdContent:!0})})),this._players.on(Ze.AD_ERROR,this._onAdError.bind(this)),this._players.on(Ze.AD_SKIPPED,this._onAdSkipped.bind(this)),this._players.on(Ze.CONTENT_COMPLETED,this._onContentComplete.bind(this)),this._players.on(Ze.CONTENT_SKIPPED,this._onContentSkipped.bind(this)),bt.b.on(bt.a.INTERNAL.AD.PAUSE_FOR_CONTENT,this._migrateBreakingAdsToPreRoll.bind(this)),bt.b.on(bt.a.INTERNAL.AD.RESET_BREAKING_ADS_TIMER,this._resetBreakingAdsTimer.bind(this))},e.prototype._startTimer=function(){var e=this;this._timerId=setInterval((function(){e._refresh()}),1e3)},e.prototype._startInSlotTimer=function(){var e=this;this._inSlotRefreshTimerId=setInterval((function(){e._inSlotRefresh()}),1e3)},e.prototype._refresh=function(){this._paused||(this._shouldFetchAds()&&(Ce.log("Fetching ads ".concat(this._config.timeToFetchAdsBeforeSlot,"s before slot")),this._adsManager.fetchAds({timeoutInSeconds:this._config.timeToFetchAdsBeforeSlot})),this._shouldNotifyUpcomingSlot()&&bt.b.emit(bt.a.INTERNAL.AD.UPCOMING_SLOT,{time:this._upcomingSlotTime,slotType:this._currentSlotType}),this._shouldStartBreakingAdsSlot()&&this._startSlot({slotType:Ln.BREAKING_ADS}))},e.prototype._isSlotImpressionTimeoutPassed=function(){return(this._currentSlotType===Ln.PLAYER_START||this._currentSlotType===Ln.PRE_ROLL)&&0===this._currentSlotImpCount&&Ht(this._slotStartTime,new Date)>this._config[this._currentSlotType].slotImpTimeout},e.prototype._inSlotRefresh=function(){if(this._shouldFetchAdsBeforeAdEnd()){Ce.log("Fetching ads ".concat(this._config.timeToFetchAdsBeforeSlot,"s before ad end"));var e=Yt(this._playingAd)?[this._playingAd]:[],t=(r=this._adsManager.pending,i=Pi(r),Pi(r.filter((function(e){return e!==i})))||i),n=t?.9*Lr(t):null;n&&this._priceService.setSecondPrice(n),this._adsManager.fetchAds({exclude:e,timeoutInSeconds:this._config.timeToFetchAdsBeforeSlot})}var r,i;this._isSlotImpressionTimeoutPassed()&&(this._playingAd&&(Ct(this._players,this._playingAd.vastId,63,"slot impression timeout",null,this._playingAd),Ca(this._players,this._playingAd,37)),this._endSlot({playAdContent:!1}))},e.prototype._shouldFetchAds=function(){return!this._isPlayerPaused()&&(this._isFetchAdsIntervalPassed()||this._shouldFetchAdsBeforeContentChange())},e.prototype._isFetchAdsIntervalPassed=function(){var e=this._config,t=e.breakingAds,n=t.enabled,r=t.interval,i=e.timeToFetchAdsBeforeSlot;if(!n)return!1;var o=Ht(this._slotEndTime,new Date),a=r-i;return a-1<o&&o<=a},e.prototype._shouldFetchAdsBeforeContentChange=function(){var e=this._config,t=e.timeToFetchAdsBeforeSlot;if(!e.preRoll.enabled)return!1;if(!this._isIntervalSmallerThenDuration())return!1;var n=this._content.getProgress(),r=n.time,i=n.duration-r;return i<=t&&i>t-1},e.prototype._shouldFetchAdsBeforeAdEnd=function(){if(!this._playingAd)return!1;var e=this._playingAd.getAdRemainingTime();if(!e)return!1;var t=!1;return this._config.timeToFetchAdsBeforeSlot<e&&e<=this._config.timeToFetchAdsBeforeSlot+1&&(t=this._currentSlotImpCount<=this._getCurrentSlotMaxImps()),t},e.prototype._shouldNotifyUpcomingSlot=function(){if(this._isPlayerPaused()||!this._content.shouldMonetize())return!1;var e=this._config.breakingAds.interval,t=Ht(this._slotEndTime,new Date),n=e-this._upcomingSlotTime;return n-1<t&&t<=n},e.prototype._shouldStartBreakingAdsSlot=function(){var e=Ht(this._slotEndTime,new Date)>=this._config.breakingAds.interval;return this._isSlotEnabled(Ln.BREAKING_ADS)&&!this._players.paused&&!this._isActiveSlot&&e&&!this._isPlayerPaused()},e.prototype._endTimer=function(){clearInterval(this._timerId)},e.prototype._endSlotTimer=function(){clearInterval(this._inSlotRefreshTimerId)},e.prototype._isTheSessionJustStarted=function(){return Ht(this._startTime,new Date)<=this.MINIMUM_TIME_TO_WAIT_FROM_SESSION_START},e.prototype._onAdStart=function(e){var t=e.apiImpressionData,n=e.playerData;this._currentSlotImpCount++,Xa(this._players,n,"ad.start",this._enrichAPIImpressionData(t,n))},e.prototype._enrichAPIImpressionData=function(e,t){return e.slotType=this._currentSlotType===Ln.PLAYER_START?Ln.PRE_ROLL:this._currentSlotType,e.hasUI=zt(t),e},e.prototype._onAdError=function(e){var t=e.error,n=e.playerData,r=n.getErrorEvent(t);this._playingAd&&this._playingAd===n&&(Ce.error("Ad Error ".concat(r.event.name,": vastId - ").concat(n.vastId,"; error - ").concat(t.message),t,n),this._onAdComplete({playAdContent:!1}))},e.prototype._onAdSkipped=function(e){Ce.log("Ad Skipped: vastId - ".concat(e.vastId)),this._adsManager.removeAdFromCache(e),this._onAdComplete({playAdContent:!1})},e.prototype._onAdComplete=function(e){this._endSlotTimer(),this._playingAd&&(this._playingAd.flowTimeout.cancel(),this._playingAd.destroyAd()),Ni(null),this._shouldEndSlot()?this._endSlot(e):this._playNextAd()},e.prototype._onContentComplete=function(){this._shouldStartPreRollSlot()&&this._startSlot({slotType:Ln.PRE_ROLL})},e.prototype._onContentSkipped=function(){this._onContentComplete()},e.prototype._migrateBreakingAdsToPreRoll=function(){var e=this;this._isSlotEnabled(Ln.BREAKING_ADS)&&(e._config.breakingAds.enabled=!1,e._config.preRoll.enabled=!0,e._config.preRoll.maxImpressions=e._config.breakingAds.maxImpressions,this._players.once(Ze.CONTENT_START,(function(){return e._config.breakingAds.enabled=!0,void(e._config.preRoll.enabled=!1)})))},e.prototype._resetBreakingAdsTimer=function(){this._isSlotEnabled(Ln.BREAKING_ADS)&&(this._slotEndTime=new Date)},e.prototype._shouldStartPreRollSlot=function(){return this._isSlotEnabled(Ln.PRE_ROLL)&&!this._isActiveSlot&&this._isIntervalSmallerThenDuration()},e.prototype._isIntervalSmallerThenDuration=function(){var e=this._config.breakingAds,t=this._content.currentItem;return!(t&&e.enabled&&t.duration)||e.interval<t.duration},e.prototype._shouldEndSlot=function(){return this._currentSlotImpCount===this._getCurrentSlotMaxImps()},e.prototype._startSlot=function(e){if(this._endTimer(),this._startInSlotTimer(),this._players.closed)return!1;this._currentSlotType=e.slotType,this._isActiveSlot=!0,this._slotStartTime=new Date,Ce.log("Starting Slot - ".concat(this._currentSlotType)),this._players.adSlotCurrentType=this._currentSlotType,this._players.emit(Ze.SLOT_START,{slotType:this._currentSlotType}),Xa(this._players,null,"ad.slot.start"),this._playNextAd()},e.prototype._playNextAd=function(){return qi(this,void 0,void 0,(function(){var e,t;return Wi(this,(function(n){return e=this._adsManager.pending,this._logAdsInCache("Play Next Ad"),(t=this._selectAd(e))?(Ce.log("Chosen Ad - ".concat(t.type," - ").concat(t.vastId," - price ").concat(Lr(t)),t),this._playAd(t)):(Ce.log("No ad cached - ending slot"),this._endSlot({playAdContent:!1})),[2]}))}))},e.prototype._playAd=function(e){var t=Lr(e),n=kr(e);t<n&&Ce.log("Playing bid lower than floor price",{vastId:e.vastId,responseCPM:t,floor:n}),this._playingAd=Ni(e),this._adsManager.removeAdFromCache(e),e.initMedia()},e.prototype._endSlot=function(e){var t;this._logAdsInCache("Ending slot ".concat(this._currentSlotType)),this._isActiveSlot=!1,this._slotEndTime=new Date,(null===(t=this._playingAd)||void 0===t?void 0:t.adContent)&&e.playAdContent&&this._insertAdContent(),this._playingAd=null,this._priceService.resetSecondPrice(),this._endSlotTimer(),this._startTimer(),this._players.emit(Ze.SLOT_END,{numOfImps:this._currentSlotImpCount}),bt.b.emit(bt.a.INTERNAL.AD.SLOT_END,{slotType:this._currentSlotType,numOfImps:this._currentSlotImpCount}),this._currentSlotImpCount=0},e.prototype._insertAdContent=function(){var e=O(S(this._playingAd.adContent))[0];this._content.insertAdContent({url:e})},e.prototype._isLastAdInSlot=function(){return this._currentSlotImpCount===this._getCurrentSlotMaxImps()-1},e.prototype._getCurrentSlotMaxImps=function(){var e;return null===(e=this._config[this._currentSlotType])||void 0===e?void 0:e.maxImpressions},e.prototype._isSlotEnabled=function(e){return this._config[e].enabled},e.prototype._selectAd=function(e){var t=this._getEligibleAdsForSlot(e);return Di(this._players,t)},e.prototype._getEligibleAdsForSlot=function(e){return 1===e.length||this._isLastAdInSlot()?e:e.filter((function(e){return!e.adContent}))},e.prototype._logAdsInCache=function(e){void 0===e&&(e="");var t=this._adsManager.pending;Ce.log("".concat(e," - Ads in cache - ").concat(t.length),t.map((function(e){return{id:e.vastId,type:e.type,bidder:e.bidder,price:Lr(e),state:vt[e.state],priority:e.priority}})))},e.prototype._isPlayerPaused=function(){var e;return!(!this._content.paused&&!(null===(e=this._playingAd)||void 0===e?void 0:e.isPaused))},e}();function Ji(e){setTimeout((function(){e.pause()}),10)}function Gi(e){e.hide()}function Yi(e){setTimeout((function(){e.play(),e.show()}),10)}function zi(e){var t=e.players,n=e.content;if(!t.monetize)return Yi(n),void no(n);Qi(e)}function Xi(e){var t=e.players,n=e.content,r=e.ads;if(t.autoplay=!1,!t.monetize)return Ji(n),void no(n);t.content.paused=!0,bt.b.once(bt.a.PLAYER.ACTION.PLAY,(function(){Qi({players:t,content:n,ads:r})}))}function Ki(e,t,n){e.wasInView?Yi(t.content):e.once(Ze.PLAYER_FIRST_VIEW,(function(){Yi(t.content)})),bt.b.on(bt.a.PLAYER.ACTION.PLAY,(function(){Yi(n)})),bt.b.on(bt.a.PLAYER.ACTION.PAUSE,(function(){Ji(n)}))}function Qi(e,t){var n=e.players,r=e.content,i=e.ads,o=!1!==(null==t?void 0:t.handleSlotEnd);i.start(),Ji(r),n.on(Ze.SLOT_START,(function(e){e.slotType===Ln.PRE_ROLL&&(Ji(r),Gi(r))})),n.on(Ze.AD_STARTED,(function(){Ji(r),Gi(r)})),o&&n.on(Ze.SLOT_END,(function(){Yi(r)})),bt.b.on(bt.a.PLAYER.ACTION.PLAY,(function(){Yi(r),i.resumeSchedule()})),bt.b.on(bt.a.PLAYER.ACTION.PAUSE,(function(){Ji(r),i.pauseSchedule()}))}function Zi(e){var t=e.players,n=e.content;Ji(n),t.monetize?t.wasInView?Qi(e):t.once(Ze.PLAYER_FIRST_VIEW,(function(){Qi(e)})):Ki(t,e,n)}function $i(e){var t=e.players;t.monetize?(Qi(e,{handleSlotEnd:!1}),t.wasInView?to(e):t.once(Ze.PLAYER_FIRST_VIEW,(function(){to(e)}))):Ki(t,e,e.content)}function eo(e){var t=e.players;t.monetize?t.wasInView?(Qi(e,{handleSlotEnd:!1}),to(e)):t.once(Ze.PLAYER_FIRST_VIEW,(function(){Qi(e,{handleSlotEnd:!1}),to(e)})):Ki(t,e,e.content)}function to(e){var t=e.players,n=e.content,r=e.ads;t.on(Ze.PLAYER_OUT_OF_VIEW,(function(){r.pauseSchedule(),Ji(n)})),t.once(Ze.PLAYER_IN_VIEW,(function(){r.resumeSchedule(),t.on(Ze.PLAYER_IN_VIEW,(function(){r.resumeSchedule(),!r.isAdPlaying&&Yi(n)}))})),t.on(Ze.SLOT_END,(function(){!function(e){e.show()}(n),t.isInView&&Yi(n)}))}function no(e){bt.b.on(bt.a.PLAYER.ACTION.PLAY,(function(){Yi(e)})),bt.b.on(bt.a.PLAYER.ACTION.PAUSE,(function(){Ji(e)}))}function ro(e){var t=Re("PCount",{players:e},(function(){var t,n,r;return null===(r=null===(n=null===(t=e.ioc)||void 0===t?void 0:t.tag)||void 0===n?void 0:n.players)||void 0===r?void 0:r.length}));!function(e){var t=io(e);if(!t)return;e.widthDetected=t.width,e.heightDetected=t.height,ve(e,ne.E_DETECTED,{},{})}(e),e.serverEvents.supplyEvent({name:"SupplyLoaded",instanceCount:t}),function(e){e.serverEvents.serverEventUrl=-1===e.eventServer2.indexOf("//")?e.serverHost(e.eventServer2)+e.serverEvents.serverEventRoute:(t=e.protocol,n=e.eventServer2,n.indexOf("//")>0?J(t,n):t+(0==n.indexOf("//")?"":"//")+n),e.serverEvents.DryRun=!1;var t,n}(e),function(e){if(Ge){var t=e.ownerDocument.createElement("style");t.type="text/css",t.innerHTML=Ge,function(){var t=e.ownerDocument;try{if(e&&e.getRootNode&&(t=e.getRootNode()),t!==e.ownerDocument)return t}catch(e){}return t.getElementsByTagName("head")[0]}().appendChild(t),Ge=null}}(e.rootDivElem),function(e){e.widthOverwrite&&e.heightOverwrite?(e.width=e.widthOverwrite,e.height=e.heightOverwrite,e.rootDivElem.style.width=e.width+"px",e.rootDivElem.style.height=e.height+"px"):e.widthDetected&&e.heightDetected&&0!==e.widthDetected&&0!==e.heightDetected&&(!e.sizeTolerance||Math.abs(e.width-e.widthDetected)>e.sizeTolerance||Math.abs(e.height-e.heightDetected)>e.sizeTolerance)&&(e.width=e.widthDetected,e.height=e.heightDetected,e.initialWidth=e.widthDetected,e.initialHeight=e.heightDetected);!function(e){e.initialWidth||(e.initialWidth=e.widthDetected);e.initialHeight||(e.initialHeight=e.heightDetected)}(e)}(e),function(e){e.divElem=document.createElement("div"),e.rootDivElem.appendChild(e.divElem),Ke(e.divElem,"root_container"),Qe(e.divElem,e.info.mobile?"mobile":"desktop"),e.controlsTouch&&Qe(e.divElem,"new_ui");e.divElem.id="__exco_root_container"}(e);var n=He(e);if(e.playerReadyResolve(),Xa(e,null,"player.ready",{rootDiv:e.rootDivElem}),e.started=!0,e.autoplay=!0,e.paused=!1,e.content.setVolume(e.volume,e.muted,!1),e.serverEvents.supplyEvent({name:"SupplyStarted"}),e.clickToPlay&&(e.chilled=!0),e.closed)return!1;!function(e){var t=new Vt(e.divElem,{threshold:[.1,.5]}),n=function(e){return e.visible&&e.entry.intersectionRatio>=.5},r=!1;t.observe(e.divElem,(function(t){e.partiallyInView=function(e){return e.visible&&e.entry.intersectionRatio>.1}(t),n(t)&&!r&&(r=!0,e.wasInView=!0,e.emit(Ze.PLAYER_FIRST_VIEW),Xa(e,null,Ze.PLAYER_FIRST_VIEW)),n(t)?(e.isInView=!0,e.emit(Ze.PLAYER_IN_VIEW),Xa(e,null,Ze.PLAYER_IN_VIEW)):(e.isInView=!1,e.emit(Ze.PLAYER_OUT_OF_VIEW),Xa(e,null,Ze.PLAYER_OUT_OF_VIEW))}))}(e);var r=new Hi(e,n);r.init(),function(e){var t,n=e.players.playbackMode;Ce.info("Starting Playback: ".concat(n));var r=((t={})[Bi.AUTO_PLAY]=zi,t[Bi.AD_TO_PLAY]=zi,t[Bi.CLICK_TO_PLAY]=Xi,t[Bi.AUTO_PLAY_IN_VIEW]=Zi,t[Bi.AUTO_PLAY_PAUSE_OUT_OF_VIEW]=$i,t[Bi.PLAY_IN_VIEW_PAUSE_OUT_OF_VIEW]=eo,t),i=r[n];i?i(e):r[Bi.AUTO_PLAY](e)}({players:e,content:n,ads:r}),Xa(e,null,"player.started")}function io(e){if(e.rootDivElem){var t=e.rootDivElem.offsetWidth,n=e.rootDivElem.offsetHeight;if(t&&n&&0!==t&&0!==n||(t=e.rootDivElem.clientWidth,n=e.rootDivElem.clientHeight),!t||!n||0===t||0===n){var r=e.rootDivElem.getBoundingClientRect();t=r.width,n=r.height}return{width:t,height:n}}}!function(e){e.AUTO_PLAY="auto-play",e.AD_TO_PLAY="ad-to-play",e.CLICK_TO_PLAY="click-to-play",e.AUTO_PLAY_IN_VIEW="auto-play-in-view",e.AUTO_PLAY_PAUSE_OUT_OF_VIEW="auto-play-pause-out",e.PLAY_IN_VIEW_PAUSE_OUT_OF_VIEW="play-in-view-pause"}(Bi||(Bi={}));var oo,ao=function(){return(ao=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function so(e,t,n,r){return Re("playPlayer",{players:e,playerData:t,log:!0},(function(){if(!t.allowedDueToSound(n))return!1;var i;!function(e,t){if(!t.durationKnown)if("jsvpaid"==t.adType)t.duration=t.suggestedDuration;else if("video"==t.adType){t.durationKnown=!0;try{t.duration=t.videoElement.duration}catch(e){}}}(0,t),t.gotAdImpression=!1,t.adStartCount=0,t.startAdTime=Date.now(),t.state=vt.Started;try{e.serverEvents.demandEvent(t,ao({name:"startAd"},r));var o=io(e);o&&e.width!==o.width&&e.height!==o.height&&Fa(e,"normal"),e.eventDispatcher.sendStartAdEvent(t,e),bt.b.emit(bt.a.AD.STARTED,{demand:t}),i=t.startAd(n)}catch(e){i=e.message}return i&&(Ct(e,t.vastId,42,i,null,t,!1),Ca(e,t,17,{code:42,message:i})),!i}),(function(){return!1}))}function lo(e,t,n){t.duration=n,t.initNonLinearCompleter(),t.durationKnown=!0,t.vastTracker&&(t.vastTracker.duration=t.duration,t.vastTracker.setDuration(t.duration)),xi==t&&(Xa(e,t,"player.durationChange"),e.beingVpaid&&(ka(e,"jsAdDurationChange",{duration:n}),ka(e,"jsAdRemainingTimeChange",{remainingTime:n})))}function co(e,t,n){t.nonLinearCompleteTimer.cancel(),t.nonLinearCompleteTimer=g.Seconds(n),t.nonLinearCompleteTimer.start().then((function(){t.state==vt.Playing&&ko(e,t)})).catch((function(){}))}function uo(e,t){var n;e.serverEvents.demandEvent(t,{name:"initAd"}),t.flowTimeout.Seconds(t.timers.loadAd).start().then((function(){Ct(e,t.vastId,31,"",null,t,!1),Ca(e,t,31,{code:31,message:""})})).catch((function(){}));try{t.state=vt.Initing,n=t.initAd()}catch(e){n=e.message}n&&(Ct(e,t.vastId,32,n,null,t,!1,!0),Ca(e,t,16,{code:32,message:n}))}function po(e,t){t.flowTimeout.Seconds(t.timers.startAd).start().then((function(){ga(e,t),Ct(e,t.vastId,41,"",null,t,!1),Ca(e,t,18,{code:41,message:""})})).catch((function(){}))}function ho(e,t){t.firedEvents.AdLoaded||(t.firedEvents.AdLoaded=!0,null!=t.requeryTimeout&&(clearTimeout(t.requeryTimeout),t.requeryTimeout=null),t.state<vt.Loading||t.state==vt.Error||t.state>vt.Initing&&t.state<vt.Error||(t.flowTimeout.cancel(),t.state=e.intent?vt.Pending:vt.Ready,t.priorityTieBreaker++,e.serverEvents.demandTimedEvent(t,{name:"AdLoaded"}),function(e,t){var n=(((new Date).getTime()-t.loadAdTime)/1e3).toFixed(1);qt(e,ne.E_LOADED,t,{time:n,memUsed:null,vastType:Ft(t),actualVastType:jt(t)}),Mt(t)&&ve(e,ne.E_SERVED_AND_START,{},{playerId:t.playerId})}(e,t),Xa(e,t,"ad.loaded",e.mediaPreview?{mediaUrl:t.vpaidJsIframeVideo&&t.vpaidJsIframeVideo.src||""}:null),e.beingVpaid&&ka(e,"jsAdReadyToStart",{}),so(e,t,!1)))}function fo(e,t,n){var r=n.errorMsg;if(t.firedEvents.AdError=!0,!(t.state<=vt.Loading&&"jsima"!=t.adType||t.state==vt.Finished)){var i=function(e){var t=Et.VPAID_UNKNOWN_ERROR,n="";try{n=e.toLowerCase()}catch(e){}-1==n.indexOf("timeout")&&-1==n.indexOf("timed out")||(t=Et.VPAID_TIMEOUT);-1==n.indexOf("empty")&&-1==n.indexOf("3403")||(t=Et.VPAID_EMPTY_VAST);-1!=n.indexOf("domain")&&-1!=n.indexOf("block")&&(t=Et.VPAID_EMPTY_BLOCKED_DOMAIN);-1==n.indexOf("no ad")&&-1==n.indexOf("there was an error parsing the ad tag response - null, errno: 0")||(t=Et.VPAID_NO_AVAILABLE_ADS);-1==n.indexOf("but the server returned a vast error")&&-1==n.indexOf("failed to parse liverail xml response")&&-1==n.indexOf("unknown liverail xml response type")||(t=Et.VPAID_VAST_ERROR);-1==n.indexOf("security error")&&-1==n.indexOf("2048")||(t=Et.VPAID_SECURITY_ERROR);-1==n.indexOf("2032")&&-1==n.indexOf("9408")&&-1==n.indexOf("error loading asset : ioerror")||(t=Et.VPAID_STREAM_ERROR);-1!=n.indexOf("1903")&&(t=Et.VPAID_START_TIMEOUTED);-1!=n.indexOf("1902")&&(t=Et.VPAID_INTERNAL_VPAID_ERROR);-1!=n.indexOf("volume violation")&&(t=Et.VPAID_VOLUME_VIOLATION);-1!=n.indexOf("non linear ads")&&(t=Et.VPAID_IMA_NON_LINEAR);-1!=n.indexOf("adstart exception")&&(t=Et.VPAID_INNER_VPW_EXCEPTION);return t}(r);Xa(e,t,"aderror"),Xa(e,t,"ad.error"),t.state>=vt.Started&&t.flowTimeout.cancel();var o=!1;t.state==vt.Initing&&(o=!0),Ct(e,t.vastId,10,r,null,t,!1,o,null),Ca(e,t,t.state>vt.Initing?20:t.state>vt.Fetched?19:27,{code:10,message:r,vpaidError:i})}}function vo(e,t){if(!t.firedEvents.AdImpression&&!t.firedEvents.AdStarted){if(t.firedEvents.AdLoaded||ho(e,t),t.firedEvents.AdStarted=!0,t.state<vt.Started||t.state>vt.Playing)return Ct(e,t.vastId,110,"unrequested start on state ".concat(vt[t.state]),null,t,!1,!0),ga(e,t),void Ca(e,t,12,{code:110,message:"unrequested start on state ".concat(vt[t.state])});li(e,t),t.firedEvents.AdImpression||t.impressionAfterStartTimeout.start().then((function(){qt(e,ne.E_ADSTART_WO_IMPRESSION,t,{}),t.viewableOnStart&&Aa(e,t)})).catch((function(){}))}}function mo(e,t){t.firedEvents.AdImpression||(t.firedEvents.AdImpression=!0,t.firedEvents.AdStarted||vo(e,t),t.state<vt.Started||t.state>vt.Playing||(t.flowTimeout.cancel(),t.impressionAfterStartTimeout.cancel(),t.errorCount=0,t.impressionOnlyWithVideoStart&&!t.firedEvents.AdVideoStart||ci(e,t)))}function Ao(e,t){t.firedEvents.AdVideoStart||(t.firedEvents.AdVideoStart=!0,e.beingVpaid&&ka(e,"jsAdVideoStart",{}),t.impressionOnlyWithVideoStart&&t.firedEvents.AdImpression&&ci(e,t))}function yo(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.onQuartile(_t.FIRST)}function go(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.onQuartile(_t.MIDPOINT)}function Eo(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.onQuartile(_t.THIRD)}function bo(e,t){t.firedEvents.AdImpression&&(t.state!=vt.Playing&&t.state!=vt.Finished||(t.onComplete(),t.callPauseTimer.cancel(),Ca(e,t,1)))}function To(e,t){t.firedEvents.AdStopped=!0,t.state==vt.Playing&&bo(e,t)}function _o(e,t,n){Ta(e,t,n.url,!1===n.playerHandles)}function wo(e,t,n){var r=n.t;null!=r&&lo(e,t,r)}function So(e,t,n){var r=n.t;null!=r&&(t.lastRemainingTime&&t.lastRemainingTime<r&&t.nonLinearCompleteTimer.cancel(),t.lastRemainingTime=r,!t.durationKnown||t.state<vt.Playing?lo(e,t,r):(!t.skipVastTracker&&t.vastTracker&&t.vastTracker.setProgress(t.duration-r),e.beingVpaid&&ka(e,"jsAdRemainingTimeChange",{remainingTime:r})))}function Io(e,t){t.interactive&&t.state==vt.Playing&&(Oa(e,t),e.beingVpaid&&ka(e,"jsAdPaused",{}))}function Co(e,t){t.interactive&&t.state==vt.Playing&&(e.paused?ja(e,t):(xa(e,t),e.beingVpaid&&ka(e,"jsAdPlaying",{})))}function Ro(e,t){var n=t.getAdVolume();if(n){var r=n.volume,i=n.muted;!t.interactive||t.viewableForSeconds()<1||Ba(e,r,i,t)}}function Po(e,t){t.onSkip()}function Do(e,t){t.state==vt.Playing&&_a(e,t)}function ko(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.state!=vt.Playing&&t.state!=vt.Finished||(e.beingVpaid&&ka(e,"jsAdUserClose",{}),t.callPauseTimer.cancel(),Ca(e,t,1))}var Lo=function(){function e(e){this.players=e,this._on={},this.vastId="static_ima",this.uniqId=0,this.loaded=Promise.all([ya(e,this),this.loadSDK()])}return Object.defineProperty(e.prototype,"displayContainer",{get:function(){return this._adDisplayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.adContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loader",{get:function(){return this._adsLoader},enumerable:!1,configurable:!0}),e.prototype.createAdContainer=function(){return this._adDisplayContainer||(this._imaAdSlot||(this._imaAdSlot=document.createElement("div"),this._imaAdSlot.className="__exco_ad_ima_slot",this.adContainer.appendChild(this._imaAdSlot)),this._adDisplayContainer=new google.ima.AdDisplayContainer(this._imaAdSlot),this._adDisplayContainer.initialize()),this._adDisplayContainer},e.prototype.createLoader=function(){return this._adsLoader||(this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.getSettings().setAutoPlayAdBreaks(!1),this._adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.players.secureIMA||this._adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE)),this._adsLoader},e.prototype.loadSDK=function(){if("undefined"==typeof google||void 0===google.ima)return new Promise((function(e){return L("google-ima-script-new",(function(){return"//imasdk.googleapis.com/js/sdkloader/ima3.js"}),(function(){return e()}),!0)}))},e.prototype.on=function(e,t,n){this._on["".concat(e,"_").concat(t)]=n,this._sub(e,t,this._adsLoader)},e.prototype.off=function(e,t){this._unsub(e,t,this._adsLoader)},e.prototype._sub=function(e,t,n){n&&n.addEventListener(t,this._on["".concat(e,"_").concat(t)])},e.prototype._unsub=function(e,t,n){n&&n.removeEventListener(t,this._on["".concat(e,"_").concat(t)])},e}(),Oo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xo=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};var Vo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.forceVolume=!1,t}return Oo(t,e),t.prototype.fetchAdUrl=function(e,t){var n,r=this;n=ot,oo||(oo=new Lo(n)),this._ref=oo,this.uniqueId=+new Date+this.vastId,this._fetchAdUrlCallback=t,this.state=vt.Fetching,this.skipVastTracker=!0,this.vastPreferType!=gt.VIDEO_ONLY?ya(ot,this,{ignoreAdContainer:!0}).then((function(){r._ref.loaded.then((function(){r.adDisplayContainer=r._ref.createAdContainer(),r.adsLoader=r._ref.createLoader(),r.adContainer=r._ref.container,r.init(),r.requestAd()}))})):(Ct(ot,this.vastId,22,"no suitable media: "+this.adType,null,this,!1,!0),Ca(ot,this,5,{code:22,message:"no suitable media: "+this.adType}))},t.prototype.emitEvent=function(e,t){var n=this;switch(e){case this.AdsManagerLoadedEvent:case this.AdErrorLoadedEvent:this.flowTimeout.cancel(),this.onAdsRequested(t),this.isAdsRequested=!0;break;case this.AdErrorEvent:fo(ot,this,{errorMsg:t&&t.msg});break;case this.AdEvent.AD_BREAK_READY:case this.AdEvent.AD_METADATA:case this.AdEvent.ALL_ADS_COMPLETED:break;case this.AdEvent.CLICK:_o(ot,this,{url:null,id:null,playerHandles:!1});break;case this.AdEvent.DURATION_CHANGE:wo(ot,this,{t:t.ad&&t.ad.getDuration()||null});break;case this.AdEvent.STARTED:vo(ot,this);break;case this.AdEvent.IMPRESSION:mo(ot,this);break;case this.AdEvent.FIRST_QUARTILE:yo(0,this);break;case this.AdEvent.MIDPOINT:go(0,this);break;case this.AdEvent.THIRD_QUARTILE:Eo(0,this);break;case this.AdEvent.COMPLETE:this.adsLoader.contentComplete(),setTimeout((function(){return bo(ot,n)}),50);break;case this.AdEvent.LOADED:t&&t.ad&&this.initLoadedAd(t.ad),ho(ot,this);break;case this.AdEvent.LINEAR_CHANGED:t&&t.ad&&this.initLoadedAd(t.ad),this.isNonLinear()||this.nonLinearCompleteTimer.cancel();break;case this.AdEvent.LOG:case this.AdEvent.CONTENT_PAUSE_REQUESTED:break;case this.AdEvent.CONTENT_RESUME_REQUESTED:this.state<=vt.Playing&&this.priority>0?fo(ot,this,{errorMsg:t&&t.msg||"IMA Content Resume"}):ko(ot,this),this.clearSDK();break;case this.AdEvent.SKIPPABLE_STATE_CHANGED:Do(ot,this);break;case this.AdEvent.SKIPPED:Po(0,this);break;case this.AdEvent.USER_CLOSE:ko(ot,this);break;case this.AdEvent.VOLUME_CHANGED:Ro(ot,this);break;case this.AdEvent.VOLUME_MUTED:break;case this.AdEvent.PAUSED:Io(ot,this);break;case this.AdEvent.RESUMED:Co(ot,this)}},t.prototype.init=function(){var e,t;ot.content instanceof Za?this.contentVideoElement=ot.content.getHTMLVideoElement()||this.videoElement:this.contentVideoElement=this.videoElement,nt(this.contentVideoElement)&&(this.contentVideoElement=(e=ot,(t=document.createElement("video")).muted=!0,t.volume=e.volume,t.playsInline=!0,t)),this.AdEvent=google.ima.AdEvent.Type,this.AdErrorCode=google.ima.AdError.ErrorCode,this.AdsManagerLoadedEvent=google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.AdErrorLoadedEvent=google.ima.AdError.Type.AD_LOAD,this.AdErrorEvent=google.ima.AdErrorEvent.Type.AD_ERROR,this.isStarted=!1,this.isAdsRequested=!1,this.width=ot.width,this.height=ot.height,this._ref.on(this.uniqueId,this.AdsManagerLoadedEvent,this.onAdsManagerLoaded.bind(this)),this._ref.on(this.uniqueId,this.AdErrorEvent,this.onAdError.bind(this))},t.prototype.getCustomParams=function(e){return e.map((function(e){return"".concat(e.key,"=").concat(e.value)})).join("&")},t.prototype.getTargetings=function(){var e,t,n,r,i=[],o=ot.priceTables;if($t(ot,this)){var a=Yt(this)?o.exco:o.publisher,s=(e=this.floorPrice,r=(t=a).filter((function(t){return+t.k>=e})),(n=r.length?r[0]:t[t.length-1])||(n=t[0]),n);Ce.log("GAM price targeting: key: ".concat(s.k," value: ").concat(s.v,", floorPrice: ").concat(this.floorPrice)),i.push({key:this.keyValueParamName,value:s.v})}return i},t.prototype.addCustomParam=function(e,t){try{var n="cust_params",r=new URL(e),i=new URLSearchParams(r.search),o=i.get(n);return o?(i.delete(n),i.set(n,"".concat(o,"&").concat(t))):i.set(n,t),r.search="?".concat(i),r.toString()}catch(e){}return e},t.prototype.addTargeting=function(e){var t=this.getTargetings();return t.length?this.addCustomParam(e,this.getCustomParams(t)):e},t.prototype.requestAd=function(){this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.contentComplete(),ot.serverEvents.demandEvent(this,{name:"requestAds"}),this.adsRequest=new google.ima.AdsRequest,this.adsRequest.adTagUrl=this.addTargeting(this.mediaURL),this.adsRequest.linearAdSlotWidth=this.width,this.adsRequest.linearAdSlotHeight=this.height,this.adsRequest.forceNonLinearFullSlot=!0,this.adsLoader.requestAds(this.adsRequest,{id:this.uniqueId,element:this.contentVideoElement})},t.prototype.getSuggestedDuration=function(){if(this.ad){var e=this.ad.getDuration();return e<=0&&(e=this.ad.getMinSuggestedDuration()),e<=0&&(e=this.suggestedDuration),e}},t.prototype.getSuggestedRemainingTime=function(){var e=this.getAdRemainingTime();return null==e&&(e=this.duration-(Date.now()-this.nonLinearCompleteTimer.startedAt)/1e3),e>=0?e:0},t.prototype.getAdRemainingTime=function(){if(!this.adsManager)return null;var e=this.adsManager.getRemainingTime();return e<0?null:e},t.prototype.initLoadedAd=function(e){this.ad=e,this.duration=this.getSuggestedDuration(),this.durationKnown=!0,this.advertiserDomains=[null==e?void 0:e.getAdvertiserName()]},t.prototype.initNonLinearCompleter=function(){this.isNonLinear()&&co(ot,this,this.duration)},t.prototype.getSkipOffset=function(){var t=this.ad?this.ad.getSkipTimeOffset():-1;return e.prototype.getSkipOffset.call(this)>0&&(t=t>0?Math.min(e.prototype.getSkipOffset.call(this),t):e.prototype.getSkipOffset.call(this)),t},t.prototype.getAdSkippableState=function(){return this.adsManager.getAdSkippableState()||e.prototype.getAdSkippableState.call(this)},t.prototype.unlockAdSlot=function(){!this.unlocked&&this.adDisplayContainer&&this.state<vt.Started&&(this.adDisplayContainer.initialize(),this.unlocked=!0)},t.prototype.onAdsRequested=function(e){this.onAdResponse()&&(e?(-1==[this.AdErrorCode.VAST_EMPTY_RESPONSE,this.AdErrorCode.VAST_ASSET_NOT_FOUND,this.AdErrorCode.VAST_NO_ADS_AFTER_WRAPPER,this.AdErrorCode.UNKNOWN_AD_RESPONSE].indexOf(e.code)&&(this.state=vt.Started),this.emitEvent(this.AdErrorEvent,e)):(ot.serverEvents.demandTimedEvent(this,{name:"AdsRequested",retryCount:this.retryCount}),this._fetchAdUrlCallback(ot,this)))},t.prototype.clearAd=function(){this.lastError=null;try{this.clearSDK()}catch(e){}},t.prototype.destroy=function(){this.lastError=null;try{this.clearSDK()}catch(e){}},t.prototype.clearSDK=function(){try{this._ref.off(this.uniqueId,this.AdsManagerLoadedEvent),this._ref.off(this.uniqueId,this.AdErrorEvent),this.adsManager.destroy()}catch(e){}},t.prototype.initMedia=function(){var t=this;return e.prototype.initMedia.call(this).then((function(){uo(ot,t)}))},t.prototype.initAd=function(){var e=this;this.transferError((function(){e.adsManager.init(e.width,e.height,google.ima.ViewMode.NORMAL)}))},t.prototype.startAd=function(e){var t,n=this;this.isStarted||(this.forceVolume=!0,this.syncVolume(e),this.adsManager&&this.adsManager.start&&(this.transferError((function(){n.adsManager.start()})),this.sureFastStart=null===(t=this.expectedSureFastStart)||void 0===t||t,po(ot,this),this.isStarted=!0))},t.prototype.stopAd=function(){var e=this;this.adsManager&&this.adsManager.stop&&this.transferError((function(){return e.adsManager.stop()}))},t.prototype.destroyAd=function(){},t.prototype.resizeAd=function(e,t){var n=this;this.width===e&&this.height===t||(this.width=e,this.height=t,this.adsManager&&this.adsManager.resize&&this.transferError((function(){return n.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)})))},t.prototype.setAdVolume=function(e,t,n,r){var i=this;this.adsManager&&(this.muted==t&&this.viewable||(this.muted=t,e=t?0:e,(this.forceVolume&&!r||this.adsManager.getVolume()!=e)&&(this.transferError((function(){return i.adsManager.setVolume(e)})),this.forceVolume=!1)))},t.prototype.getAdVolume=function(){return this.adsManager&&{volume:this.adsManager.getVolume()}},t.prototype.isNonLinear=function(){return!!this.ad&&!this.ad.isLinear()},t.prototype.showControlBar=function(){return null!=this.controlBar&&this.controlBar},t.prototype.showAdUI=function(){return null!=this.enableAdUI&&this.enableAdUI},t.prototype.getClickText=function(){return ot.info.mobile?null:this.clickTextEnabled?this.clickText||"Learn More":null},t.prototype.getProgress=function(){if(this.ad){var e=this.getSuggestedDuration(),t=Math.ceil(e-this.getSuggestedRemainingTime());return{time:t=t>0?t:0,duration:e}}return null},t.prototype.pauseAd=function(){var e=this;this.transferError((function(){e.adsManager.pause()}))},t.prototype.resumeAd=function(){var e=this;this.transferError((function(){e.adsManager.resume()}))},t.prototype.skipAd=function(){var e=this;this.getAdSkippableState()?(this.adsManager.skip(),this.failSkipTimer.start().then((function(){e.onSkip()})).catch((function(){}))):this.onSkip()},t.prototype.transferError=function(e){try{e&&e()}catch(e){throw new Error(e.getMessage&&e.getMessage()||e.message||"Unknown error")}},t.prototype.onAdsManagerLoaded=function(e){var t=this,n=e.getUserRequestContext();if(!n||this.uniqueId===n.id){if(this.adsManager)return this.adsLoader.contentComplete(),void this.emitEvent(this.AdsManagerLoadedEvent);var r=new google.ima.AdsRenderingSettings;r.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=e.getAdsManager((null==n?void 0:n.element)||this.contentVideoElement,r),zt(xi)||!ot.muted&&!ot.muteToPlay||(this.forceVolume=!0,this.setAdVolume(0,!0));var i=this.onAdEvent.bind(this),o=this.onAdProgressEvent.bind(this),a=this.onAdUserEvent.bind(this),s=this.onAdError.bind(this),l=this.adBreakReadyHandler.bind(this),c=function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.apply(void 0,xo([t.uniqueId],n,!1))}};this.adsManager.addEventListener(this.AdErrorEvent,c(s)),this.adsManager.addEventListener(this.AdEvent.AD_BREAK_READY,c(l)),this.adsManager.addEventListener(this.AdEvent.AD_METADATA,c(i)),this.adsManager.addEventListener(this.AdEvent.ALL_ADS_COMPLETED,c(i)),this.adsManager.addEventListener(this.AdEvent.DURATION_CHANGE,c(i)),this.adsManager.addEventListener(this.AdEvent.IMPRESSION,c(i)),this.adsManager.addEventListener(this.AdEvent.LINEAR_CHANGED,c(i)),this.adsManager.addEventListener(this.AdEvent.LOADED,c(i)),this.adsManager.addEventListener(this.AdEvent.LOG,c(i)),this.adsManager.addEventListener(this.AdEvent.SKIPPABLE_STATE_CHANGED,c(i)),this.adsManager.addEventListener(this.AdEvent.CONTENT_RESUME_REQUESTED,c(i)),this.adsManager.addEventListener(this.AdEvent.CONTENT_PAUSE_REQUESTED,c(i)),this.adsManager.addEventListener(this.AdEvent.STARTED,c(o)),this.adsManager.addEventListener(this.AdEvent.FIRST_QUARTILE,c(o)),this.adsManager.addEventListener(this.AdEvent.MIDPOINT,c(o)),this.adsManager.addEventListener(this.AdEvent.THIRD_QUARTILE,c(o)),this.adsManager.addEventListener(this.AdEvent.COMPLETE,c(o)),this.adsManager.addEventListener(this.AdEvent.CLICK,c(a)),this.adsManager.addEventListener(this.AdEvent.PAUSED,c(a)),this.adsManager.addEventListener(this.AdEvent.RESUMED,c(a)),this.adsManager.addEventListener(this.AdEvent.SKIPPED,c(a)),this.adsManager.addEventListener(this.AdEvent.USER_CLOSE,c(a)),this.adsManager.addEventListener(this.AdEvent.VOLUME_CHANGED,c(a)),this.adsManager.addEventListener(this.AdEvent.VOLUME_MUTED,c(a)),this.emitEvent(this.AdsManagerLoadedEvent)}},t.prototype.onAdEvent=function(e,t){var n=this;this.uniqueId===e&&this.delayEvent(t,(function(){n.emitEvent(t.type,{ad:t.getAd()})}))},t.prototype.onAdProgressEvent=function(e,t){var n=this;this.uniqueId===e&&this.delayEvent(t,(function(){n.emitEvent(t.type,{ad:t.getAd()})}))},t.prototype.delayEvent=function(e,t){var n="Ad"+e.type.charAt(0).toUpperCase()+e.type.slice(1);setTimeout(t,this.delay[n]||0)},t.prototype.onAdUserEvent=function(e,t){this.uniqueId===e&&this.emitEvent(t.type)},t.prototype.onAdError=function(e,t){if(this.uniqueId===e){var n=t.getError();this.lastError={msg:n.getMessage(),code:n.getErrorCode()},n.getType()==this.AdErrorLoadedEvent?this.emitEvent(this.AdErrorLoadedEvent,this.lastError):this.emitEvent(this.AdErrorEvent,this.lastError),this.clearSDK()}},t.prototype.getErrorEvent=function(t){var n={event:{},timed:!1};return this.isAdsRequested?this.state==vt.Initing?(n.event={name:"AdLoadError",errorCode:10==t.code?30:t.code,message:t.message},31==t.code&&(n.event.timeout=!0),n.timed=!0):n=e.prototype.getErrorEvent.call(this,t):(10==t.code?n.event={name:"AdsRequestError",errorCode:200,message:t.message,retryCount:this.retryCount}:201==t.code&&(n.event={name:"AdsRequestError",errorCode:t.code,message:t.message,retryCount:this.retryCount,timeout:!0}),n.timed=!0),this.lastError&&null!=this.lastError.code&&(n.event.imaError=this.lastError.code),n},t.prototype.adBreakReadyHandler=function(){},Object.defineProperty(t.prototype,"keyValueParamName",{get:function(){var e;return(null===(e=this.gpvDemand)||void 0===e?void 0:e.gkvp)||"pf"},enumerable:!1,configurable:!0}),t}(yr),No=function(){function e(){}return e.prototype.AdLoaded=function(){},e.prototype.AdError=function(e){},e.prototype.AdStarted=function(){},e.prototype.AdVideoStart=function(){},e.prototype.AdVideoFirstQuartile=function(){},e.prototype.AdVideoMidpoint=function(){},e.prototype.AdVideoThirdQuartile=function(){},e.prototype.AdVideoComplete=function(){},e.prototype.AdImpression=function(e){},e.prototype.AdDurationChange=function(){},e.prototype.AdVolumeChange=function(){},e.prototype.AdClickThru=function(e,t,n){},e.prototype.AdSkipped=function(){},e.prototype.AdSkippableStateChange=function(){},e.prototype.AdUserClose=function(){},e.prototype.AdStopped=function(){},e.prototype.AdPaused=function(){},e.prototype.AdPlaying=function(){},e.prototype.AdSizeChange=function(){},e.prototype.AdExpandedChange=function(){},e.prototype.AdRemainingTimeChange=function(){},e}();function Uo(e,t){for(var n in t)t.hasOwnProperty(n)&&null!=t[n]&&!1!==t[n]&&e.setAttribute(n,!0===t[n]?n:t[n]);return e}function Mo(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var jo="margin:0;padding:0;top:0px;left:0px;position:absolute;width:100%;height:100%;";function Fo(e,t,n){return new Promise((function(r,i){var o=n.createElement("script");o.setAttribute("type","text/javascript");var a=t.mediaURL;a.match(/^http.*\/player\/(.*_)?vpaid_\d+\.\d+.*\.js/)&&e.playerUrl&&(a=a.replace(/^http.*\.js/,e.playerUrl.replace("player","vpaid"))),o.src=J(e.protocol,a),o.addEventListener("load",(function(){Re("jsVpaidLoaded",{players:e,playerData:t},(function(){!function(e,t){if("function"==typeof e.jsVpaidLoaded)return e.jsVpaidLoaded(t);var n=t.jsVpaidFrame;if(!n||!n.contentWindow||!n.contentWindow.getVPAIDAd)throw new Error("couldn't find js vpaid module");nt(t.videoElement)&&!t.vpaidUseJSV?(t.videoElement.style.display="none",t.vpaidJsIframeVideo=document.createElement("video"),t.adContainer.insertBefore(t.vpaidJsIframeVideo,t.adContainer.firstChild)):t.vpaidJsIframeVideo=t.videoElement;if(t.vpaidJsIframeVideo.setAttribute("style",jo),t.vpaidJsIframeVideo.volume=0,t.vpaidJsIframeVideo.muted=!0,t.vpaidJs=n.contentWindow.getVPAIDAd(),!t.vpaidJs)throw new Error("failed to create js vpaid module");t.vpaidJs.handshakeVersion&&t.vpaidJs.handshakeVersion("2.0")}(e,t),r(o)}),i)})),n.body.appendChild(o)}))}function Bo(e,t){var n=function(e,t){return!!e.htmlOnly||void 0!==t.sandbox&&t.sandbox}(e,t);return function(e,t){return new Promise((function(n,r){var i=document.createElement("iframe");Mo(i,{onload:function(){return n(i)},onerror:r,id:"vjs"+Math.floor(5e3*Math.random()),src:"about:blank",width:"100%",height:"100%",marginWidth:"0",marginHeight:"0"}),Uo(i,{style:jo,frameBorder:"0",scrolling:"no",sandbox:t&&"allow-scripts allow-same-origin allow-popups"}),e.appendChild(i)}))}(t.adContainer,n).then((function(r){t.jsVpaidFrame=r;var i=r.contentWindow&&r.contentWindow.document;if(!i)throw new Error("loadJSVpaid frame document not defined");i.body.setAttribute("style","margin:0;padding:0;"),i.head.appendChild(i.createElement("meta")).setAttribute("charset","UTF-8"),"https:"==e.protocol&&i.head.appendChild(Uo(i.createElement("meta"),{"http-equiv":"Content-Security-Policy",content:"upgrade-insecure-requests;"}));var o=Mo(i.createElement("div"),{id:"vpaid-js-ad-elem",className:"vpaid-ad-slot"});return o.setAttribute("style",jo),t.vpaidJsIframeAdElem=o,(t.iframeSlot||n?i.body:t.adContainer).appendChild(o),t.initCompanion(i),Fo(e,t,i)}))}var qo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wo=function(){return(Wo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ho=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Jo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstQuartile=!1,t.isPotentiallyNonLinear=!1,t}return qo(t,e),t.prototype.getAdRemainingTime=function(){var e;try{e=(e=this.vpaidJs.getAdRemainingTime())<0?null:e}catch(e){}return e},t.prototype.getAdDuration=function(){var e;try{e=(e=this.vpaidJs.getAdDuration())<0?null:e}catch(e){}return e},t.prototype.verifyDuration=function(){if(!this.durationKnown){var e=this.getAdDuration();e&&(this.duration=e,this.durationKnown=!0)}},t.prototype.isNonLinear=function(){return this.vpaidJs.getAdLinear&&!this.vpaidJs.getAdLinear()},t.prototype.initNonLinearCompleter=function(){this.isNonLinear()&&co(ot,this,this.duration)},t.guessError=function(e){return void 0===e?e="unknown error":"string"!=typeof e&&(e=e.message?e.message:e.data&&e.data.message?e.data.message:"Couldnt extract error message"),{errorMsg:e}},t.clickData=function(e,t,n){return Array.isArray(e)?{url:e[0]||"",id:e[1],playerHandles:e[2]}:{url:e||"",id:t,playerHandles:n}},t.prototype.considerVolumeChange=function(){if(!ot.dynamicSound){var e,t,n=!1,r=!1;try{if(0==this.vpaidJs.getAdVolume())return;this.viewable?this.viewableForSeconds()<1?"JS VPAID - AdVolume change too soon after adStarted":(n=!0,"JS VPAID - AdVolume change allowed"):"JS VPAID - AdVolume change before viewable",n||(this.vpaidJs.setAdVolume(0),0==this.vpaidJs.getAdVolume()&&(r=!0,"JS VPAID - AdVolume change reverted"))}catch(e){"JS VPAID - AdVolumeChanged exception"+(e&&e.message?e.message:"")}t=n||r,(e=this).mediaURL,e.vastId,be(0,0,t?.01:.1)}},t.prototype.event=function(e,t){var n=this,r=void 0===t?{}:t,i=r.data,o=r.setVolume,a=void 0!==o&&o,s=this.vpaidEvents.currentEvent;try{g.delay(this.delay[s]||0).then((function(){e(ot,n,i)})).catch(De(ot,"jsvpaid event ".concat(s))),a&&this.syncVolume()}catch(e){Ee(ot,3,"jsVpaid"+s+" hanlder JS exception: "),e&&e.terminateVpaid&&Ca(ot,this,9,{code:10,message:"volume violation",vpaidError:Et.VPAID_VOLUME_VIOLATION})}},t.prototype.AdLoaded=function(){this.initVpaidOnStart?this.startAd(!1):this.event(ho,{setVolume:!0})},t.prototype.AdError=function(e){this.event(fo,{data:t.guessError(e)})},t.prototype.AdStarted=function(){this.verifyDuration(),this.event(vo,{setVolume:!0})},t.prototype.AdStopped=function(){this.event(To)},t.prototype.AdPlaying=function(){this.event(Co)},t.prototype.AdPaused=function(){this.event(Io)},t.prototype.AdVideoStart=function(){this.verifyDuration(),this.nonLinearCompleteTimer.cancel(),this.event(Ao,{setVolume:!0})},t.prototype.AdVideoFirstQuartile=function(){this.firstQuartile=!0,this.event(yo)},t.prototype.AdVideoMidpoint=function(){this.event(go)},t.prototype.AdVideoThirdQuartile=function(){this.event(Eo)},t.prototype.AdVideoComplete=function(){this.event(bo)},t.prototype.AdImpression=function(){var e=this.vpaidJs.cedatoAdInfo&&this.vpaidJs.cedatoAdInfo();e&&(this.impressionData=Wo(Wo(Wo({},e.pricing&&{pricing:e.pricing}),e.currency&&{currency:e.currency}),e.impType&&{impType:e.impType}),null!=e.adui&&(this.enableAdUI=e.adui),null!=e.controlBar&&(this.controlBar=e.controlBar)),this.event(mo,{setVolume:!0})},t.prototype.AdRemainingTimeChange=function(){var e={t:null};if(this.state==vt.Playing){var t=this.getAdRemainingTime();null!=t&&t>0||this.firstQuartile?this.nonLinearCompleteTimer.cancel():null!=this.lastRemainingTime||this.isPotentiallyNonLinear||this.durationKnown?this.lastRemainingTime&&this.lastRemainingTime<1&&(co(ot,this,.5),this.isPotentiallyNonLinear=!0,this.lastRemainingTime=null):(this.isPotentiallyNonLinear=!0,co(ot,this,this.duration)),e={t:t}}this.event(So,{data:e,log:!1})},t.prototype.AdDurationChange=function(){this.event(wo,{data:{t:this.getAdDuration()}})},t.prototype.AdVolumeChange=function(){this.considerVolumeChange(),this.event(Ro)},t.prototype.AdClickThru=function(e,n,r){this.event(_o,{data:t.clickData(e,n,r)})},t.prototype.AdSkipped=function(){this.event(Po)},t.prototype.AdSkippableStateChange=function(){this.event(Do)},t.prototype.AdUserClose=function(){this.event(ko)},t.prototype.AdSizeChange=function(){},t.prototype.AdExpandedChange=function(){},t.prototype.insertCompanion=function(){this.vpaidJsIframeAdElem.appendChild(this.companionsElementDiv)},t.prototype.isUnlocked=function(){return!ot.info.mobile&&ot.hadUserInteraction},t.prototype.unlockAdSlot=function(){!this.unlocked&&this.videoElement&&this.state<vt.Initing&&(this.unlocked=!0,this.videoElement.load())},t.prototype.initMedia=function(){var t=this;return this.vpaidJs=null,e.prototype.initMedia.call(this).then((function(){return Bo(ot,t).then((function(){t.vpaidEvents=new Go(t),t.initVpaidOnStart?(t.state=vt.Ready,so(ot,t,!1)):uo(ot,t)})).catch((function(e){Ct(ot,t.vastId,100,e.message,null,t),Ca(ot,t,15,{code:100,message:e.message})}))}))},t.prototype.initAd=function(){var e={AdParameters:this.adParameters||""},t={slot:this.vpaidJsIframeAdElem,videoSlot:this.vpaidJsIframeVideo,videoSlotCanAutoPlay:!0===ot.mainAutoplay};if(this.mediaURL.indexOf("moatwrapper.js")>=0){var n=this.vpaidJsIframeVideo.canPlayType.bind(this.vpaidJsIframeVideo);this.vpaidJsIframeVideo.canPlayType=function(e){return"video/3gpp"!=e?n(e):""}}var r=this.vpaidJs.initAd(ot.widthOverwrite||ot.width,ot.heightOverwrite||ot.height,"normal",400,e,t);if(!r&&void 0!==r)return"jsVpaid error"},t.prototype.startAd=function(e){var t;if(ot.rootDivElem.style.top="0px",this.syncVolume(e),this.initVpaidOnStart&&!this.initVpaidOnStartDone)return this.initVpaidOnStartDone=!0,void this.initAd();try{this.vpaidJs.startAd(),this.sureFastStart=null!==(t=this.expectedSureFastStart)&&void 0!==t&&t,po(ot,this)}catch(e){return"jsVpaid start error"}return null},t.prototype.pauseAd=function(){this.vpaidJs&&this.vpaidJs.pauseAd&&this.vpaidJs.pauseAd()},t.prototype.resumeAd=function(){this.vpaidJs&&this.vpaidJs.resumeAd&&this.vpaidJs.resumeAd()},t.prototype.stopAd=function(){this.vpaidJs&&(this.vpaidJs.stopAd&&this.vpaidJs.stopAd(),this.vpaidJs.pauseAd&&this.vpaidJs.pauseAd())},t.prototype.showAd=function(){e.prototype.showAd.call(this),this.vpaidJsIframeAdElem&&(this.vpaidJsIframeAdElem.style.zIndex="10000"),this.vpaidJsIframeVideo&&(this.vpaidJsIframeVideo.style.margin="0",this.vpaidJsIframeVideo.style.padding="0",this.vpaidJsIframeVideo.style.top="0px",this.vpaidJsIframeVideo.style.left="0px",this.vpaidJsIframeVideo.style.position="absolute")},t.prototype.clearAd=function(){try{this.vpaidJs&&(this.firedEvents.AdError||this.firedEvents.AdStopped||this.vpaidJs.stopAd(),this.vpaidEvents.unsubscribe()),this.jsVpaidFrame.parentNode.removeChild(this.jsVpaidFrame)}catch(e){}this.initialSound=!1,this.jsVpaidFrame=null,this.vpaidJsIframeAdElem=null,this.vpaidJsIframeVideo=null,this.vpaidJsIframeVideoCanvas=null,this.vpaidJs=null},t.prototype.resizeAd=function(e,t,n){this.vpaidJs&&this.vpaidJs.resizeAd&&this.vpaidJs.resizeAd(e,t,n)},t.prototype.setAdVolume=function(e,t,n,r){if(this.vpaidJs&&this.vpaidJs.setAdVolume){if(!this.requireSound&&ot.muteToPlay&&!t&&!n&&!this.isUnlocked()){if(this.initialSound)return;t=!0}if(this.muted=t,e=t?0:e,!r)try{this.vpaidJsIframeVideo.volume=e,this.vpaidJsIframeVideo.muted=t,this.initialSound&&this.vpaidJs.getAdVolume&&this.vpaidJs.getAdVolume()===e||this.vpaidJs.setAdVolume(e),this.initialSound=!0}catch(e){}}},t.prototype.getAdVolume=function(){return this.vpaidJs&&this.vpaidJs.getAdVolume&&{volume:this.vpaidJs.getAdVolume()}},t.prototype.showAdUI=function(){return null!=this.enableAdUI&&this.enableAdUI},t.prototype.getProgress=function(){this.verifyDuration();var e=this.duration;return{time:e-this.getAdRemainingTime(),duration:e}},t.prototype.getAdSkippableState=function(){var t,n;return(null===(t=this.vpaidJs)||void 0===t?void 0:t.getAdSkippableState)&&(null===(n=this.vpaidJs)||void 0===n?void 0:n.getAdSkippableState())||e.prototype.getAdSkippableState.call(this)},t.prototype.skipAd=function(){var e=this;this.vpaidJs.getAdSkippableState&&this.vpaidJs.getAdSkippableState()?(this.vpaidJs.skipAd(),this.failSkipTimer.start().then((function(){e.onSkip()})).catch((function(){}))):this.onSkip()},t.prototype.getErrorEvent=function(t){var n={event:{},timed:!0};return this.state==vt.Initing?(n.event={name:"AdLoadError",errorCode:10==t.code?30:t.code,message:t.message},31==t.code&&(n.event.timeout=!0)):n=e.prototype.getErrorEvent.call(this,t),t.vpaidError&&(n.event.vpaidError=t.vpaidError),n},t}(_r),Go=function(e){function t(t){var n=e.call(this)||this;return n.playerData=t,n.subscribe(),n}return qo(t,e),t.prototype.subscribe=function(){var e=this;V(No.prototype,(function(t){e[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e.currentEvent=t,e.playerData.vpaidJs){var i=e.playerData[t];i&&i.apply(e.playerData,Ho([],n,!0))}else Ir(0,e.playerData,t)},e.playerData.vpaidJs.subscribe(e[t],t)}))},t.prototype.unsubscribe=function(){var e=this;try{V(No.prototype,(function(t,n){n&&e.playerData.vpaidJs.unsubscribe(n,t)}))}catch(e){}},t}(No),Yo=function(){function e(){}return e.HAVE_NOTHING=0,e.HAVE_METADATA=1,e.HAVE_CURRENT_DATA=2,e.HAVE_FUTURE_DATA=3,e.HAVE_ENOUGH_DATA=4,e}();function zo(e){return new Promise((function(t,n){var r=function(){var r=function(){(function(e){return!e.paused})(e)||e.play().then((function(){document.body.removeEventListener("gesturechange",r),document.body.removeEventListener("touchstart",r),document.body.removeEventListener("touchmove",r),document.body.removeEventListener("touchend",r),document.body.removeEventListener("scroll",r),document.body.removeEventListener("click",r),t()}))};e.play().then((function(){return t()})).catch((function(){document.body.addEventListener("gesturechange",r),document.body.addEventListener("touchstart",r),document.body.addEventListener("touchmove",r),document.body.addEventListener("touchend",r),document.body.addEventListener("scroll",r),document.body.addEventListener("click",r),n()}))};!function(e){return e.readyState>=Yo.HAVE_FUTURE_DATA}(e)?e.addEventListener("canplay",(function(){return r()})):r()}))}var Xo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ko=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstPlayEventTriggered=!1,t.completed=!1,t}return Xo(t,e),t.prototype.initMedia=function(){var t=this;return e.prototype.initMedia.call(this).then((function(){t.initCompanion(),function(e,t){if(t.videoElementPrepared)return;Re("prepareVideoElem",{players:e,playerData:t,log:!0},(function(){Ke(t.videoElement,"video_element"),t.videoElement.style.zIndex=(9994-t.uniqId).toString(),t.firstPlayEventTriggered=!1,Pe(t.videoElement,"ad video event",{players:e,playerData:t},[{type:"canplay",playerDataAction:$o},{type:"play",playerDataAction:Zo},{type:"pause",playerDataAction:Qo},{type:"ended",playerDataAction:ea},{type:"timeupdate",playerDataAction:ra},{type:"volumechange",playerDataAction:ia},{type:"error",playerDataAction:ta},{type:"click",playerDataAction:na}]),t.videoElementPrepared=!0}))}(ot,t),rt(ot,t.videoElement,t.mediaURL),nt(t.videoElement)||(t.videoElement.autoplay=!1,t.videoElement.controls=ot.controlBar&&"native"==ot.controlBarType,t.videoElement.loop=!1,t.videoElement.load())})).catch(De(ot,"initMedia"))},t.prototype.getSkipOffset=function(){var t=this.creative.skipDelay||-1;return e.prototype.getSkipOffset.call(this)>0&&(t=t>0?Math.min(e.prototype.getSkipOffset.call(this),t):e.prototype.getSkipOffset.call(this)),t},t.prototype.initAd=function(){},t.prototype.startAd=function(e){this.showAd(),this.sureFastStart=!0,this.syncVolume(e);var t=zo(this.videoElement);t&&t.then&&t.catch((function(){bt.b.emit(bt.a.PLAYER.AUTOPLAY_BLOCKED)})),function(e,t,n,r){if(!e.usejsv&&e.info.mobile){var i={category:"autoplay",label:r,domain:e.domain,videoSrc:t.currentSrc};n&&n.then?n.then((function(){i.event="OK",be(0,0,.01)}),(function(e){var t=e.name,n=e.message;i.error=t,i.message=n,i.event="AbortError"!==t?"Failed":"Aborted",be(0,0,"AbortError"!==t?.1:.01)})):(i.event="Unknown",be(0,0,.01))}}(ot,this.videoElement,t,"vast")},t.prototype.pauseAd=function(){this.videoElement.pause()},t.prototype.resumeAd=function(){this.videoElement.play()},t.prototype.stopAd=function(){this.videoElement.pause()},t.prototype.clearAd=function(){this.videoElement&&this.videoElement.pause()},t.prototype.destroyAd=function(){this.clearAd(),e.prototype.destroyAd.call(this)},t.prototype.resizeAd=function(e,t,n){},t.prototype.setAdVolume=function(e,t,n,r){this.requireSound||!ot.muteToPlay||t||n?(this.muted=t,r||this.videoElement&&(this.videoElement.muted!==t&&(this.videoElement.muted=t),this.videoElement.volume!==e&&(this.videoElement.volume=e))):!this.muted&&this.state<=vt.Started&&this.setAdVolume(e,!0,!1)},t.prototype.getAdVolume=function(){return this.videoElement&&{volume:this.videoElement.volume,muted:this.videoElement.muted}},t.prototype.getProgress=function(){if(!this.videoElement)return{time:0,duration:0};var e=this.videoElement.duration||0;return{time:Math.min(this.videoElement.currentTime,e),duration:e}},t.prototype.getAdRemainingTime=function(){var e=this.getProgress();return e.duration-e.time},t.prototype.getErrorEvent=function(t){var n=e.prototype.getErrorEvent.call(this,t);return t.videoError&&(n.event.videoError=t.videoError),n},t}(_r);function Qo(e,t){t.videoElement.duration>0&&t.videoElement.duration>t.videoElement.currentTime&&Ma(e,t)}function Zo(e,t){ja(e,t),t.firstPlayEventTriggered||(t.firstPlayEventTriggered=!0,t.state==vt.Started&&(li(e,t),ci(e,t)&&(e.beingVpaid&&(ka(e,"jsAdDurationChange",{duration:t.duration|t.videoElement.duration}),ka(e,"jsAdVideoStart",{})),t.errorCount=0)))}function $o(e,t){"video"==t.adType&&(t.state>=vt.Ready||function(e,t){t.durationKnown=!0;try{t.duration=t.videoElement.duration,t.syncVolume(),t.vastTracker&&(t.vastTracker.duration=t.duration,t.vastTracker.setDuration(t.duration))}catch(e){t.durationKnown=!1}var n=Math.floor(e.height),r=(e.height-n)/2;r=Math.floor(r),t.videoElement.style.cssText="background-color: black; width:100%; height:100%; position: relative; top: "+r+"px",t.state=vt.Ready,so(e,t,!1)}(e,t))}function ea(e,t){t.completed||(t.completed=!0,t.onComplete(),Ca(e,t,1))}function ta(e,t,n){if(t.state!=vt.Error&&"video"==t.adType){Xa(e,t,"aderror"),Xa(e,t,"ad.error");var r=n.target.error.code;Ct(e,t.vastId,10,"video player error code: "+r,null,t,!1),Ca(e,t,21,{code:10,message:it(n.target),videoError:r})}}function na(e,t){Ta(e,t,null)}function ra(e,t){if(!(t.state<vt.Initing||t.state==vt.Error||"video"!=t.adType)){var n=t.videoElement;t.vastTracker&&(t.vastTracker.setProgress(n.currentTime),t.vastTracker.skippable!==t.skippable&&_a(e,t,t.vastTracker.skippable)),e.beingVpaid&&ka(e,"jsAdRemainingTimeChange",{remainingTime:n.duration-n.currentTime});var r=Math.floor(n.currentTime/n.duration*4);r>0&&r<4&&t.quartile!=r&&t.onQuartile(r)}}function ia(e,t){t.viewable&&t.videoElement.controls&&Ba(e,t.videoElement.volume,t.videoElement.muted,t)}var oa=function(){return(oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},aa=[/^Intent/,/^Custom/],sa=function(){function e(e,t){var n,r=this;this.players=e,this.postData=t,this.EventDeferTime=((n={}).AdImpression=50,n.SupplyStarted=500,n.VastFetched=500,n.startAd=500,n.default=2500,n),this.EventSendRate={default:1},this.LowPriorityEvents=["VastFetched","VastError","VastFetchError","AdError","AdLoadError","AdImpressionError","startVastPrefetch","VastPrefetchError"],this.DryRun=!1,this.serverEventUrl="https://e.channelexco.com/events",this.serverEventRoute="/events",this.firstEvent=!0,this.supplyEvents=[],this.customSupplyEvents=[],this.demandEvents=[],this.emitter=new $e.EventEmitter2({wildcard:!0,maxListeners:5}),this.scheduledTimer=new g,null!=e.event2RateLow&&this.LowPriorityEvents.forEach((function(t){return r.EventSendRate[t]=e.event2RateLow/100}))}return e.prototype.isDryRun=function(e){var t=i(this.EventSendRate[e],this.EventSendRate.default);return this.DryRun||Math.random()>t},e.prototype.isExternalEvent=function(e){for(var t=0,n=aa;t<n.length;t++){var r=n[t];if(e.match(r))return!0}},e.prototype.supplyEvent=function(e,t){var n=this.isDryRun(e.name);this.extractSupplyParams();var r=this.stamp(e,t);n||this.supplyEvents.push(r),this.postEvent(e.name,n,r)},e.prototype.demandEvent=function(e,t){try{this._demandEvent(e,t)}catch(e){}},e.prototype.demandTimedEvent=function(e,t){this._demandEvent(e,t,e.flowTimeout)},e.prototype._demandEvent=function(e,t,n){var r=this.isDryRun(t.name);this.extractSupplyParams();var i=x(this.demandEvents,(function(t){return t.playerData==e}));i||(i={playerData:e,demandData:la(e),events:[]},r||this.demandEvents.push(i));var o=this.stamp(t,n);r||i.events.push(o),this.postEvent(t.name,r,o,i.demandData)},e.prototype.stamp=function(e,t){var n=m(this.EventSendRate[e.name]);return f({},e,{ts:this.fromStartNow()},null!=n&&n<1&&{rate:n},t&&{elapsed:this.toSeconds(t.elapsed)})},e.prototype.toSeconds=function(e){return parseFloat((e/1e3).toFixed(2))},e.prototype.fromStartNow=function(){return parseFloat(((Date.now()-this.players.startTime)/1e3).toFixed(2))},e.prototype.extractSupplyParams=function(){this.supplyData||(this.supplyData=function(e){var t=function(e){return+e.toFixed(1)},n={supplyId:e.playerId,subid:e.subid,domain:e.domain,sessionId:e.sessionId,playerVersion:e.playerVersion,detect:e.detect,cookieJson:e.supplyCookieJson,gpvCookie:e.gpvCookie,detectedDomain:ca(e.domainDetected),width:e.width,height:e.height,detectedWidth:null!=e.widthDetected?t(e.widthDetected):null,detectedHeight:null!=e.heightDetected?t(e.heightDetected):null,startTime:Math.floor(e.startTime/1e3)};if(e.isApp)return oa(oa({},n),e.appParams);return n}(this.players))},e.prototype.postEvent=function(e,t,n,r){var o=this;try{this.emitter.emit(e,n,t,this.supplyData,r)}catch(e){}if(!t){var a=function(){o.sendStoredEvent()};this.firstEvent&&(this.firstEvent=!1,window.addEventListener("pagehide",a,!1),window.addEventListener("visibilitychange",a,!1));var s=i(this.EventDeferTime[e],this.EventDeferTime.default);null!=this.scheduledTime&&Date.now()+s>this.scheduledTime||(this.scheduledTime=Date.now()+s,this.scheduledTimer.reset(s).start().then((function(){o.scheduledTime=null,o.sendStoredEvent()})).catch((function(){})))}},e.prototype.sendStoredEvent=function(){var e={supply:{},demand:[]};if(![this.supplyEvents,this.customSupplyEvents,this.demandEvents].every((function(e){return 0==e.length}))){if(h(l,e.supply,this.supplyData),this.supplyEvents.length&&(e.supply.e=this.supplyEvents),this.customSupplyEvents.length&&(e.supply.c=this.customSupplyEvents),this.demandEvents.forEach((function(t){var n={e:[]};h(l,n,t.demandData),n.e=t.events,e.demand.push(n)})),e.demand.length||delete e.demand,this.serverEventUrl){var t=JSON.stringify(e,null,2);this.postData(this.serverEventUrl,t)}this.demandEvents=[],this.supplyEvents=[],this.customSupplyEvents=[]}},e}();function la(e){return{uniqId:e.uniqId,vastId:e.vastId,demandId:e.demandId,adType:e.adType,rotationNo:e.rotationNo,gpvNo:e.uniqId,group:e.group,cookie:e.cookie,cookieJson:e.cookieJson}}function ca(e){return"string"==typeof e&&(e.match(/^data:/)&&(e=e.split(";")[0]),e.length>256&&(e.match(/^[\/|http:]/)&&(e=e.split("?")[0]),e=e.slice(0,256))),e}var ua=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),da=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentlyPlaying=1,t}return ua(t,e),t.prototype.AdLoaded=function(){var t=this,n=this.vpaidJsIframeAdElem.vdb_Player;if(n){var r=this.jsVpaidFrame.contentWindow.vidible;r&&(n.addEventListener(r.AD_START,(function(){t.currentlyPlaying=3})),n.addEventListener(r.VIDEO_START,(function(){3!=t.currentlyPlaying&&(t.currentlyPlaying=2,Ca(ot,t,36,{code:300,message:"vidible content exception",vpaidError:Et.VPAID_VIDIBLE_CONTENT}))})))}e.prototype.AdLoaded.call(this)},t.prototype.AdVideoComplete=function(){2!=this.currentlyPlaying&&e.prototype.AdVideoComplete.call(this)},t}(Jo),pa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ha=function(e){function t(t){var n=e.call(this,t)||this;return n.proxy=null,n.proxy=n.vastURL,n}return pa(t,e),Object.defineProperty(t.prototype,"tamProxy",{get:function(){return this.proxy||(this.proxy=this.vastURL),this.proxy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tamConfig",{get:function(){return this.gpvDemand.tam||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slotId",{get:function(){return this.tamConfig.slotId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pubId",{get:function(){return this.tamConfig.pubId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deals",{get:function(){return this.tamConfig.deals||!1},enumerable:!1,configurable:!0}),t}(Ko);var fa={video:Ko.prototype,jsvpaid:Jo.prototype,jsvidible:da.prototype,jsima:Vo.prototype,vast:_r.prototype,prebidAdapter:wr.prototype,tam:ha.prototype};function va(e){!function(e,t){if(Object.setPrototypeOf)Object.setPrototypeOf(e,t);else if({__proto__:[]}instanceof Array)e.__proto__=t;else for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(e,fa[e.adType||"vast"])}function ma(e,t){var n;if(!t.viewable){t.viewable=!0,t.viewableAt=t.playedAt=Date.now();try{t.showAd()}catch(e){}e.content&&(null===(n=e.getContentElement())||void 0===n||n.hadAd(),e.content.hide())}}function Aa(e,t){t.viewable&&(Ea(e,t),t.viewable=!1,t.viewableAt=t.playedAt=null)}function ya(e,t,n){return void 0===n&&(n={}),t.adContainersReady=t.adContainersReady||e.playerReady.then((function(){e.unlockedVideos.length>0?(t.reusableVideoTrace=e.unlockedVideos.pop(),t.videoElement=t.reusableVideoTrace.target,t.unlocked=!0):(t.videoElement=tt(),t.reusableVideoTrace=function(e,t){var n=e.addEventListener,r=e.removeEventListener,i=[],o={},a=e;for(var s in a)"on"==s.substr(0,2)&&a[s]&&(o[s]=a[s]);return a.addEventListener=function(e,t,r){i.push({type:e,listener:t,options:r}),n.call(this,e,t,r)},a.removeEventListener=function(e,n,o){if(t)for(var a=0;a!=i.length;a++){var s=i[a];e==s.type&&n==s.listener&&o==s.options&&i.splice(a,1)}r.call(this,e,n,o)},{target:a,activeListeners:i,storedOns:o,reset:function(){for(var e in a)"on"==e.substr(0,2)&&(a[e]=o[e]||null);for(var t=0;t!=i.length;t++){var n=i[t],s=n.type,l=n.listener,c=n.options;r.call(a,s,l,c)}i.splice(0,i.length)}}}(t.videoElement)),!0!==n.ignoreAdContainer&&(t.adContainer=function(e){var t=document.createElement("div");return t.id="__exco_ad_container_".concat(e.vastId,"_").concat(e.uniqId),t.className="__exco_ad_container",t}(t),t.adContainer.appendChild(t.videoElement),e.divElem.appendChild(t.adContainer))})).catch(De(e,"prepareAdContainers"))}function ga(e,t){try{t.stopAd&&t.stopAd()}catch(e){}}function Ea(e,t){t.viewable=!1;try{t.hideAd&&t.hideAd()}catch(e){}}function ba(e,t){Re("destroyPlayerData",{players:e,playerData:t,log:!0},(function(){if(-1===Oi.indexOf(t))return!1;if(t.state==vt.Finished&&null==t.requeryTimeout)return!1;t.state=vt.Finished,null!=t.requeryTimeout&&(clearTimeout(t.requeryTimeout),t.requeryTimeout=null),t.flowTimeout.cancel(),t.viewabilityTimer.cancel(),t.keepAliveTimer.cancel(),Ea(0,t),-1!==Oi.indexOf(t)&&Oi.splice(Oi.indexOf(t),1);try{setTimeout((function(){!function(e,t){try{t.clearAd&&t.clearAd(),t.companionsElementDiv&&(t.companionsElementDiv.parentNode.removeChild(t.companionsElementDiv),t.companionsElementDiv.innerHTML="",t.companionsElementDiv=null),t.reusableVideoTrace&&t.videoElement&&(t.reusableVideoTrace.reset(),t.videoElement.pause(),t.videoElement.removeAttribute("src"),t.videoElement.removeAttribute("style"),t.videoElement.removeAttribute("autoplay"))}catch(e){}}(0,t),t.reusableVideoTrace&&t.unlocked&&t.videoElement&&!nt(t.videoElement)&&(e.unlockedVideos.push(t.reusableVideoTrace),t.videoElement.parentNode&&t.videoElement.parentNode.removeChild(t.videoElement),t.videoElement=null),t.destroyAd&&t.destroyAd()}),200)}catch(e){}}))}function Ta(e,t,n,r){void 0===r&&(r=!1),!t.skipVastTracker&&t.vastTracker?t.vastTracker.click():t.skipVastTracker||Ee(e,6,"no vastTracker for click"),ln(e,t,"adclick",{clickUrl:n=n||t.adClickUrl}),e.serverEvents.demandEvent(t,{name:"AdClick",clickUrl:ca(n)}),e.eventDispatcher.sendAdClickedEvent(t,e),bt.b.emit(bt.a.AD.CLICKED,{demand:t}),e.beingVpaid&&ka(e,"jsAdClickthrough",{url:n}),r||n&&"string"==typeof n&&window.open(n,"_blank")}function _a(e,t,n){var r=null!==n?n:t.isSkippable();t.skippable!=r&&(t.skippable=!!r,e.beingVpaid&&ka(e,"jsAdSkippableStateChange",{skippableState:t.skippable}),Xa(e,t,"ad.skippableStateChanged",{skippable:t.skippable}))}var wa={error:1},Sa=[{action:{terminate:!0},reasons:[2,1,5,7,8,3,9,21,20,17,24,30,31,12,22,35]},{action:{error:0},reasons:[10,11,4]},{action:{error:100},reasons:[18]},{action:{error:105,maxRetries:3},reasons:[6]},{action:{error:105},reasons:[19,36]}];function Ia(e,t){return null!=e.findPlayerData((function(e){return e!=t&&e.state==vt.Playing}))}function Ca(e,t,n,r){if(void 0===n&&(n=29),"function"==typeof e.finishPlayerData)return e.finishPlayerData(t,n,r);if(t.state!=vt.Error&&t.state!=vt.Finished){if(e.anyPlaying=e.anyPlaying&&Ia(e,t),Aa(e,t),t.flowTimeout.cancel(),r&&(e.emit(Ze.AD_ERROR,{error:r,playerData:t}),function(e,t,n){if(3!=n.code){var r=t.getErrorEvent(n);r&&(r.timed?e.serverEvents.demandTimedEvent(t,r.event):e.serverEvents.demandEvent(t,r.event))}}(e,t,r),t.state=vt.Error,60===r.code&&(t.skippable=!1,Xa(e,t,"ad.complete",{error:r,playerData:t}))),t.state==vt.Playing){e.adFinishedAt=e.now();var i={listCompleted:e.frozen,skipped:2==n,error:!!r,tooLong:3==n};t.skippable=!1,Xa(e,t,"adcomplete",i),Xa(e,t,"ad.complete",i),t.finishPromiseResolve()}return Sr(t)||function(e,t){for(var n=wa,r=0,i=Sa;r<i.length;r++){var o=i[r];if(o.reasons.indexOf(t)>=0){n=o.action;break}}if(n.terminate)return!0;n.error&&n.error>=1&&(e.state=vt.Error,e.errorCount=e.errorCount+n.error);n.maxRetries&&(e.maxFailedVastRetries=Math.min(n.maxRetries,e.maxFailedVastRetries));return!function(e){var t=0;e.maxFailedVastRetries>0&&(t=e.maxFailedVastRetries);ot.maxFailedVastRetries>0&&(0==t||ot.maxFailedVastRetries<t)&&(t=ot.maxFailedVastRetries);if((t>0&&e.retryCount+1>t||ot.maxTotalVastRetries>0&&ot.totalVastRetries+1>ot.maxTotalVastRetries)&&!(e.lastChanceRetry&&e.retryCount<2))return!1;return!0}(e)}(t,n)?(ba(e,t),void(2==n&&e.paused?ja(e,"ui"):function(e){if(0==Oi.length&&!e.waitingForAds)e.beingVpaid&&Ra(e).then((function(){}))}(e))):void 0}}function Ra(e,t){e.frozen=!0,e.playNextRepeatTimer.cancel();var n=0==Oi.length;return function(e,t){if(Oi.length)for(var n=Oi.length-1;n>=0;n--)Oi[n]!==t&&ba(e,Oi[n])}(e,t),Xa(e,null,"player.adspaused"),t||(e.anyPlaying=!1,e.beingVpaid&&!e.vpaidContent&&ka(e,"jsAdError",{error:"no ads"})),t?t.finishPromise:n?Promise.resolve():g.delay(1e3)}var Pa="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";function Da(e){if(e.beingVpaid){var t,n,r=new $e.EventEmitter2;r.on("inPlayAd",(function(){e.anvato&&n&&(n.src=Pa,n.muted=!0,n.play());var r=e.playerReady;e.trySound&&(r=function(e){var t=void 0===e?{muted:!0}:e,n=t.muted,r=t.slot;try{var i=document.createElement("video");i.src=Pa,i.muted=n,i.playsInline=!0,i.style.display="none";var o=null,a=null;i.addEventListener("playing",(function(){o&&o(!0)})),i.addEventListener("error",(function(){a&&a()})),(r||document.body).appendChild(i),i.load();var s=i.play();return s&&s.then?s:new Promise((function(e,t){o=e,a=t,setTimeout(a,100)}))}catch(e){}return Promise.reject(null)}({muted:!1,slot:t}).then((function(){e.muteToPlay=!1,e.hadUserInteraction=!0}),(function(){e.muteToPlay=!0,e.hadUserInteraction=!1})).then((function(){return e.playerReady}))),r.then((function(){return function(e){e.started=!0,e.autoplay=!0,e.paused=!1}(e)}))})),r.on("inStopAd",(function(){return setTimeout((function(){e.autoplay=!1,Ra(e),ka(e,"jsAdStopped",{})}),0)})),r.on("inPauseAd",(function(){return setTimeout((function(){e.vpaidContent||(e.autoplay=!1),Ma(e,"vpaidplayer")}),0)})),r.on("inResumeAd",(function(){return setTimeout((function(){ja(e,"vpaidplayer")}),0)})),r.on("inSetAdVolume",(function(t){return setTimeout((function(){Ba(e,t&&t.volume,void 0,null,e.allowSound)}),0)})),r.on("inResizeAd",(function(t){return setTimeout((function(){Fa(e,t.viewMode,t.width,t.height)}),0)})),r.on("inGetProgress",(function(t){var n=Wa(e);n&&t.callback(n)})),r.on("inInitAd",(function(r){t=r.slot;var i=e.beingVpaidUseSlot;if(t&&!1!==i){var o=e.rootDivElem;o.parentNode.removeChild(o),t.parentNode.style.margin=0,t.parentNode.style.padding=0,(Math.abs(t.offsetTop)>50||Math.abs(t.offsetLeft)>50)&&(t.style.position="fixed",t.style.top="0",t.style.left="0"),t.appendChild(o)}n=r.videoSlot,setTimeout((function(){!e.info.mobile&&e.trySound&&(!r.videoSlot||null==r.videoSlot.volume&&null==r.videoSlot.muted?e.allowSound&&(e.hadUserInteraction=!0,Ba(e,1,!1)):(r.videoSlot.volume&&!r.videoSlot.muted&&(e.hadUserInteraction=!0),Ba(e,r.videoSlot.volume,r.videoSlot.muted))),Fa(e,r.viewMode,r.width||e.width,r.height||e.height),ka(e,"jsAdReadyToStart",{})}),0)}));var i=document.createElement("div");i.setAttribute("id",e.divId);var o=e.widthOverwrite||e.width,a=e.heightOverwrite||e.height;if(i.setAttribute("style","width:"+o+"px;height:"+a+"px;position:relative;top:0px;"),e.rootDivElem=i,e.jsCallingVpaid)document.querySelector("body").appendChild(i),e.callingJSVpaid.handshake((function(e,t){return r.emit(e,t)}));if(e.companionsRootDivElem=document.createElement("div"),e.companionsDivElem=document.createElement("div"),e.companionsDivElem.setAttribute("style","width:100%;height:100%;position:relative;top:0px; display: block;"),e.companionsRootDivElem.appendChild(e.companionsDivElem),e.jsCallingVpaid)document.querySelector("body").appendChild(e.companionsRootDivElem);return!0}}function ka(e,t,n){if(e.jsCallingVpaid){Re(t,{players:e,log:-1==["jsAdRemainingTimeChange"].indexOf(t)},(function(){e.callingJSVpaid.pEvent(t,n)}))}}var La=function(){return(La=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Oa(e,t){t.isPaused||Xa(e,t,"adpause"),t.isPaused=!0,t.playedAt=null,t.viewabilityTimer.pause(),t.flowTimeout.pause(),t.keepAliveTimer.pause()}function xa(e,t){t.isPaused&&Xa(e,t,"adplay"),t.isPaused=!1,t.playedAt=Date.now(),t.viewabilityTimer.resume(),t.allowLongImpressions||t.flowTimeout.resume(),t.keepAliveTimer.rewind()}function Va(e,t){Oa(e,t),t.vastTracker&&t.vastTracker.setPaused(!0);try{t.pauseAd()}catch(e){}}function Na(e,t){try{t.resumeAd(),t.vastTracker&&t.vastTracker.setPaused(!1)}catch(e){}}function Ua(e,t,n,r){return n||r instanceof yr&&r!==xi||"content"==r&&xi?{allowed:!1,playerData:xi}:{allowed:!0,playerData:xi}}function Ma(e,t){var n=Ua(0,0,e.paused,t),r=n.playerData;n.allowed&&("content"==t&&!e.interactive||t instanceof yr&&!t.interactive||(e.autoplay=!1,e.paused=!0,r?(Oa(e,r),t!=r&&Va(e,r)):"content"!==t&&e.content instanceof Za&&e.content.isVisible()&&bt.b.emit(bt.a.PLAYER.ACTION.PAUSE),setTimeout((function(){Xa(e,null,"player.paused")}),0),e.beingVpaid&&ka(e,"jsAdPaused",{})))}function ja(e,t,n,r){var i;if(!1===e.paused&&xi&&xi.isPaused)return xa(e,xi),void Na(0,xi);var o=Ua(0,0,!r&&!0===e.started&&!e.paused&&e.autoplay,t),a=o.playerData;o.allowed&&(e.paused=!1,e.autoplay=!(r||e.playingVastId),a?(xa(e,a),t!=a&&Na(0,a)):n&&bt.b.emit(bt.a.PLAYER.ACTION.PLAY),Xa(e,null,"player.resumed"),e.beingVpaid&&ka(e,"jsAdPlaying",{}),e.waitForResumePromise=null,null===(i=e.waitForResumeResolve)||void 0===i||i.call(e))}function Fa(e,t,n,r){if((e.width!=n||e.height!=r)&&e.rootDivElem){var i=!1;if(void 0===n&&void 0===r){var o=io(e);if(!o)return;n=o.width,r=o.height}else i=!0,n=Number(n),r=Number(r);if(n>=0&&r>=0){e.width=n,e.height=r,i&&(e.widthOverwrite=n,e.heightOverwrite=r,e.rootDivElem.style.width=n+"px",e.rootDivElem.style.height=r+"px");for(var a=0,s=Oi;a<s.length;a++){var l=s[a];try{l.resizeAd&&l.resizeAd(n,r,t)}catch(e){}}if(xi)try{xi.resizeAd&&xi.resizeAd(n,r,t)}catch(e){}}}}function Ba(e,t,n,r,i){void 0===t&&(t=e.volume),void 0===i&&(i=!1);var o=null!=n?n:0==t;if(i&&function(e){e.info.mobile||(e.hadUserInteraction=!0),e.content instanceof Za&&e.content.unlockSlot();for(var t=0,n=Oi;t<n.length;t++){var r=n[t];zt(xi)&&zt(r)||r.unlockAdSlot()}}(e),function(e,t,n,r){xi&&xi.setAdVolume(e,t,r,n==xi)}(t,o,r,i),e.content instanceof Za&&e.content.setVolume(t,o,i),!(e.volume==t&&e.muted==o||e.muted&&o)){t>0&&(e.dynamicSound=!0),o&&null==n||(e.volume=t),e.muted=o;for(var a=0,s=Oi;a<s.length;a++){var l=s[a];try{l.syncVolume(i),l.vastTracker&&l.vastTracker.setMuted(o)}catch(e){}}e.beingVpaid&&ka(e,"jsAdVolumeChange",{volume:t,muted:o}),Xa(e,null,"player.volumeChanged",{volume:e.volume,muted:e.muted})}}function qa(){xi&&xi.skipAd()}function Wa(e){if(xi){(!xi.skippableLastCheck||Date.now()-xi.skippableLastCheck>=1e3)&&(xi.skippableLastCheck=Date.now(),xi.skippableChecked=xi.getAdSkippableState());var t=xi.showAdUI();return La(La({content:!1,paused:e.paused||xi.isPaused},xi.getProgress()),{adUI:t,skippable:xi.skippableChecked,volume:e.volume,muted:null!=xi.muted?xi.muted:e.muted})}return e.content instanceof Za?La(La({content:!0,paused:e.paused},e.content.getProgress()),{adUI:!1,skippable:!1,volume:e.volume,muted:e.content.video.muted}):null}function Ha(e,t){e.content&&function(e,t){e.contentDefinition.external=t,e.content&&He(e)}(e,t)}function Ja(e,t){e.content&&function(e,t){e.content instanceof Za&&e.content.setCurrentVideo(t)}(e,t)}var Ga=function(){function e(e){this.players=e}return e.prototype.pause=function(){Ma(this.players,"api")},e.prototype.play=function(e){void 0===e&&(e={userInteraction:!0}),ja(this.players,"api",e.userInteraction,e.vastId),this.sound(null,e.userInteraction)},e.prototype.overrideInitParams=function(e){if(!1===this.players.gpvConfLoaded)for(var t in e)e.hasOwnProperty(t)&&this.players.initOverrides.push({name:t,value:e[t]});else void 0!==e.allowSound&&this.players.allowSound!=e.allowSound&&Ba(this.players,e.allowSound?1:0,!e.allowSound)},e.prototype.setContentVariant=function(e){var t,n;!0===this.players.gpvConfLoaded&&(t=this.players,n=e,t.content instanceof Za&&t.content.setVideoVariant(n))},e.prototype.setVideoFormat=function(e){!function(e,t){e.content instanceof Za&&e.content.setVideoFormat(t)}(this.players,e)},e.prototype.seekContent=function(e){var t,n;!0===this.players.gpvConfLoaded&&(t=this.players,n=e,t.content instanceof Za&&t.content.seekContent(n))},e.prototype.setCurrentContent=function(e){Ja(this.players,e)},e.prototype.setContent=function(e){var t;!1===this.players.gpvConfLoaded?this.players.initOverrides.push({name:"content",value:e}):(We(t=this.players,e),t.content instanceof Za&&t.content.setContent(t.contentDefinition))},e.prototype.setExtContent=function(e){!1===this.players.gpvConfLoaded?this.players.initOverrides.push({name:"contentExternal",value:e}):Ha(this.players,e)},e.prototype.setPausable=function(e){this.players.initOverrides.push({name:"pausable",value:e})},e.prototype.setConsentData=function(e){this.players.consentData=e},e.prototype.sound=function(e,t){if(void 0===t&&(t=!0),!1===this.players.gpvConfLoaded)this.players.initOverrides.push({name:"sound",value:e});else{var n=ds(e);null!=n?(void 0===n.volume&&!1===n.muted&&(n.volume=this.players.volume||1),Ba(this.players,n.volume,n.muted,null,t)):Ba(this.players,this.players.volume,this.players.muted,null,t)}},e.prototype.resize=function(e,t){Fa(this.players,"normal",e,t)},e.prototype.skip=function(){qa()},e.prototype.close=function(e,t){!function(e,t,n){if(!e.closed){e.serverEvents.supplyEvent({name:"SupplyClosed",reason:n}),Xa(e,null,"closed",{preserveDiv:t,reason:n}),e.closed=!0,Ra(e),null!=e.viewStartPlayerInterval&&(clearInterval(e.viewStartPlayerInterval),e.viewStartPlayerInterval=null),null!=e.viewCheckPlayerInterval&&(clearInterval(e.viewCheckPlayerInterval),e.viewCheckPlayerInterval=null);var r=t?e.divElem:e.rootDivElem;r&&r.parentNode&&r.parentNode.removeChild(r)}}(this.players,e,t)},e.prototype.pauseAds=function(){var e;(e=this.players).autoplay=!1,xi&&Ra(e,xi)},e.prototype.show=function(){!function(e,t,n){void 0===n&&(n=ze);var r=Ye(Xe(t,n)),i=e.className.replace(r,"");e.className!=i&&(e.className=i)}(this.players.rootDivElem,"hidden")},e.prototype.hide=function(){Qe(this.players.rootDivElem,"hidden")},e.prototype.sendDemandEvent=function(e,t){!function(e,t,n){var r=e.findPlayerData((function(e){return e.vastId==t}));r&&e.serverEvents.isExternalEvent(n.name)&&e.serverEvents.demandEvent(r,n)}(this.players,e,t)},e.prototype.sendSupplyEvent=function(e){this.players.serverEvents.isExternalEvent(e.name)&&this.players.serverEvents.supplyEvent(e)},e.prototype.getPlayerVersion=function(){return this.players.playerVersion},e.prototype.getProgress=function(){return Wa(this.players)},e.prototype.getSessionTargetConfig=function(){var e,t;return this.players.isFlamingoOn?null===(t=null===(e=this.players)||void 0===e?void 0:e.flamingoModule)||void 0===t?void 0:t.name:this.players.sessionConfig},e.prototype.hasPubDemand=function(){return this.players.hasPublisherDemand},e.prototype.isIvtSession=function(){return this.players.isIvt},e}();function Ya(e){return e.filter((function(e){return"c"!==e.id})).map((function(e){return{id:e.id,type:e.type}}))}function za(e,t,n){e.apiInterface=t.registerPlayer(e.rootDivElem.id,[""+e.playerId]);var r=new Ga(e);for(var i in r){var o=i,a=r;"function"==typeof a[o]&&(e.apiInterface[o]=a[o].bind(r))}if("function"==typeof e.apiInterface.init)try{var s=e.apiInterface.init(e.rootDivElem.id,La({playerEvents:e.playerEvents,serverEvents:e.serverEvents.emitter,dlist:Ya(n)},n.find((function(e){return"c"===e.id}))));if(s&&"function"==typeof s.then)return s}catch(e){}return Promise.resolve(e.apiInterface)}function Xa(e,t,n,r){var i={playerId:e.playerId,subid:e.subid};t&&(i.vastId=t.cxvid||t.vastId,h(l,i,t.customVars)),h(l,i,r),t&&t.moat;try{e.apiInterface.trigger(n,i)}catch(e){}}var Ka,Qa=function(){return(Qa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Za=function(){function e(e,t){var n=this;this.list=[],this.currentVideoIndex=0,this.loop=!1,this.visible=!0,this.started=!1,this.paused=!1,this.unlocked=!1,this.playing=!1,this.playable=!1,this.completed=!1,this.variantsList=[],this.selectedVariant=0,this.variantSearchPattern=/(?=\.mp4$)/,this.waitForSchedule=!1,this.waitForAd=!1,this.hadAd=function(){return n.waitForAd=!1},this.blocked=function(){return n.waitForSchedule||n.waitForAd},this.videoChanged=!1,this.isRetry=!1,this.forcedPlayed=!1,this.hls=null,this.isLoaded=!1,this.playOnHLSScriptLoaded=!1,this.onLoadedMetaData=function(){n.isLoaded=!0,n.savedTime&&(n.video.currentTime=n.savedTime,n.savedTime=null)},this.onCanplay=function(){n.playable=!0,n.blocked()||(n.videoChanged=!1);var e=nt(n.video);return e&&(e.style.width="100%",e.style.height="0",setTimeout((function(){e.style.height="100%"}),0),n.paused&&n.pause()),!0},this.onPlaying=function(){n.resetFetchingErrorCount();var e=n.currentVideoSrc;n.playing?(n.players.emit(Ze.CONTENT_RESUMED,n.currentItem),Xa(n.players,null,"content.resumed",{source:e})):(n.players.emit(Ze.CONTENT_START,n.currentItem),Xa(n.players,null,"content.started",{source:e})),n.videoChanged=!1,n.playing=!0},this.onPlay=function(){ja(n.players,"content"),n.players.beingVpaid&&n.players.vpaidContent&&!n.started&&(n.video.duration&&ka(n.players,"jsAdDurationChange",{duration:n.video.duration}),ka(n.players,"jsAdSkippableStateChange",{skippableState:!0}),n.onTimeUpdate()),n.started?n.paused&&(n.paused=!1):(n.started=!0,n.paused=!1)},this.onEnded=function(){var e;null===(e=n.hls)||void 0===e||e.setEnded(),n.playNextVideo(null)},this.onError=function(e){n.currentItem.fetchingErrorCount+=1,n.players.emit(Ze.CONTENT_COMPLETED,n.currentItem);var t=it(e.currentTarget);Xa(n.players,null,"content.completed",{src:n.video.src,withErrors:!0,errorMsg:t}),3===n.currentItem.fetchingErrorCount&&(n.removeAt(n.currentVideoIndex),n.currentVideoIndex=0===n.currentVideoIndex?n.list.length:n.currentVideoIndex-1),n.next()},this.onPause=function(){n.video.readyState>0&&!(n.video.duration>0&&n.video.duration>n.video.currentTime)||(n.paused||(Xa(n.players,null,"content.paused"),n.paused=!0),n.callPauseTimer=setTimeout((function(){n.nativeContolsVisible()&&Ma(n.players,"content")}),n.players.info.mobile?1e3:0))},this.onVolumeChange=function(){n.nativeContolsVisible()&&Ba(n.players,n.video.volume,n.video.muted)},this.onTimeUpdate=function(){n.players.beingVpaid&&n.players.vpaidContent&&!n.paused&&ka(n.players,"jsAdRemainingTimeChange",{remainingTime:n.video.duration-n.video.currentTime})},this.onDurationChange=function(){n.players.beingVpaid&&n.players.vpaidContent&&!n.paused&&ka(n.players,"jsAdDurationChange",{duration:n.video.duration})},this.onSeeked=function(){0==n.video.currentTime||nt(n.video)||Xa(n.players,null,"content.seeked",{time:n.video.currentTime})},this.onClick=function(){var e=n.getClickData(),t=e.targetUrl,r=e.clickUrl;Xa(n.players,null,"ui.contentClick",{url:t,clickUrl:r,variant:n.selectedVariant,index:n.currentVideoIndex,time:n.video.currentTime}),r&&(Xa(n.players,null,"click",{url:r}),window.open(r,"_blank"))},this.setVideoVariant=function(e){null!=e&&n.selectedVariant!==e&&(n.savedTime=n.video.currentTime,n.selectedVariant=e,n.setVideoSrc(n.currentVideoIndex),n.start())},this.getVideoVariant=function(){return n.selectedVariant},this.getVideoVariantList=function(){return n.variantsList},this.players=e,this.selectedFormat="hls",this.init(t),this.create()}return Object.defineProperty(e.prototype,"relevantContentItem",{get:function(){return this._isContentAboutToChange()?this.getNextContent():this.getCurrentItem()},enumerable:!1,configurable:!0}),e.prototype.getRelevantCategories=function(){var e;return null===(e=this.relevantContentItem)||void 0===e?void 0:e.categories},e.prototype.getRelevantKeywords=function(){var e;return null===(e=this.relevantContentItem)||void 0===e?void 0:e.keywords},e.prototype.getRelevantTags=function(){var e;return null===(e=this.relevantContentItem)||void 0===e?void 0:e.tags},e.prototype.getNextContent=function(){var e=this.list;return e[this.currentVideoIndex+1]||e[0]},e.prototype._isContentAboutToChange=function(){var e=this.getProgress(),t=e.time,n=e.duration;return!(!n||!t)&&n-t<=8},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.players.isOutstream?Ue.OUTSTREAM:Ue.INSTREAM},enumerable:!1,configurable:!0}),e.prototype.init=function(e){null!=e.video.shuffle&&(this.shuffle=e.video.shuffle),null!=e.video.loop&&(this.loop=e.video.loop),this.list=this.getList(e.video),this.clickUrl=e.video.clickUrl,e.variants&&!this.players.usejsv&&(this.variantsList=e.variants.list||this.variantsList,this.selectedVariant=e.variants.selected||this.selectedVariant,this.variantSearchPattern=e.variants.searchPattern||this.variantSearchPattern),this.waitForAd=e.wait,this.list.length>0?this.videoChanged=!0:this.completed=!0,this.players.schedule.content.skipContent&&this.setMasPerContent(this.players,this.list)},e.prototype.getList=function(t){var n=[];t.list?n=t.list:t.url&&(n=e.getListFromUrls(t.url)),this.initFetchingErrorCount(n);var r=null!=t.start&&t.start<n.length?t.start:0;if(this.shuffle)if(null!=t.start){var i=n[r];n.splice(r,1),(n=O(n)).splice(r,0,i)}else n=O(n);return this.currentVideoIndex=r,n},e.prototype.initFetchingErrorCount=function(e){e.forEach((function(e){e.fetchingErrorCount=0}))},e.prototype.create=function(){this.container=document.createElement("div"),Qe(this.container,"content_container"),this.players.divElem&&this.players.divElem.appendChild(this.container),Pe(this.container,"contentClick",{players:this.players},[{type:"click",action:this.onClick}]);var e=this.players.contentDefinition.external,t="function"==typeof e?e:void 0,n=this.players.playbackMode===Bi.CLICK_TO_PLAY?"none":"metadata";this.video=tt(t,{volume:this.players.volume,preload:n}),this.video.controls=!1,this.video.autoplay=!1,this.video.loop=!1,this.video.muted=this.players.muted,Ke(this.video,"content_video"),Pe(this.video,"content video event",{players:this.players},[{type:"loadedmetadata",action:this.onLoadedMetaData},{type:"canplay",action:this.onCanplay},{type:"play",action:this.onPlay},{type:"playing",action:this.onPlaying},{type:"pause",action:this.onPause},{type:"ended",action:this.onEnded},{type:"error",action:this.onError},{type:"seeked",action:this.onSeeked},{type:"volumechange",action:this.onVolumeChange},{type:"timeupdate",action:this.onTimeUpdate},{type:"durationchange",action:this.onDurationChange}]),this.container&&this.container.appendChild(this.video),this.setVideoSrc(),this.videoChanged=!1,"none"!==n&&this.load()},e.prototype.setMasPerContent=function(e,t){t.length>0&&(this.setDefaultMas(t),this.setMasForFirstContent(t,e),this.setMasForMidContent(e,t))},e.prototype.setMasForMidContent=function(e,t){for(var n=e.schedule.content.skipContent;n<t.length;)t[n].mas=e.schedule.content.midContentImp,n+=e.schedule.content.skipContent},e.prototype.setMasForFirstContent=function(e,t){e[0].mas=t.schedule.content.firstContentImp},e.prototype.setVideoSrc=function(e){var t=this;void 0===e&&(e=this.currentVideoIndex),this.currentVideoIndex=e;var n=this.getCurrentItem(),r=this.variantsList[this.selectedVariant];if(n){var i=this.getVideoSrc(n);i?(this.currentItem=n,this.currentVariant=r,Le(i)?Oe(this.video)||Ve()?this.setHLSVideoSrc():xe().then((function(){return t.setHLSVideoSrc()})):this.setMP4VideoSrc()):(this.currentItem=null,this.currentVariant=null)}},e.prototype.getVideoSrc=function(e){return e.url||e.fallbackUrl||this.getHLSVideoSrc()||this.getMP4VideoSrc()},e.prototype.getHLSVideoSrc=function(){var e,t,n=this.currentItem;return[n.url,n.fallbackUrl,null===(e=n.formattedUrls)||void 0===e?void 0:e.hls,null===(t=n.formattedUrls)||void 0===t?void 0:t.mp4].find((function(e){return Le(e)}))||null},e.prototype.getMP4VideoSrc=function(){var e,t,n=this,r=this.currentItem;return[r.url,r.fallbackUrl,null===(e=r.formattedUrls)||void 0===e?void 0:e.mp4,null===(t=r.formattedUrls)||void 0===t?void 0:t.hls].find((function(e){return n.isMp4(e)}))||null},e.prototype.isMp4=function(e){return e&&e.endsWith(".mp4")},e.prototype.setHLSVideoSrc=function(){var e=this.getHLSVideoSrc();this.hls=this.hls||this.createHLSManager(e),this.hls?this.hls.init(this.video,e):(this.setMP4VideoSrc(),Xa(this.players,null,"content.error",{src:e,errorMsg:"hls is not supported"})),this.currentVideoSrc=e,Xa(this.players,null,"content.changed",{url:e,clickUrl:this.currentItem.clickUrl||this.clickUrl,index:this.currentVideoIndex,variant:this.selectedVariant,time:this.video.currentTime,adContent:this.isAdContent()}),this.videoChanged=!0,this.playOnHLSScriptLoaded&&(this.playOnHLSScriptLoaded=!1)},e.prototype.createHLSManager=function(e){var t=this,n=null;return Ve()?n=new Me(Qa({autoStartLoad:!0===this.players.started},this.players.hlsConfig)):Oe(this.video)&&(n=new je),null==n||n.onError((function(n){return t.onHLSError(n,e)})),n},e.prototype.onHLSError=function(e,t){this.isMp4(this.currentItem.url)||(this.destroyHls(),this.useFallback(t),Xa(this.players,null,"content.error",{src:t,errorMsg:e}),this.isRetry?(this.play(),this.isRetry=!1):this.next())},e.prototype.setMP4VideoSrc=function(){var e=this.getMP4VideoSrc();rt(this.players,this.video,e),this.currentVideoSrc=e,Xa(this.players,null,"content.changed",{url:e,clickUrl:this.currentItem.clickUrl||this.clickUrl,index:this.currentVideoIndex,variant:this.selectedVariant,time:this.video.currentTime,adContent:this.isAdContent()}),this.videoChanged=!0},e.prototype.nativeContolsVisible=function(){return this.visible&&this.video.controls},e.prototype.resetFetchingErrorCount=function(){this.currentItem.fetchingErrorCount=0},e.prototype.playNextVideo=function(e){this.video.pause();var t=this.getCurrentItem(),n=this.isAdContent(),r=this.video,i=r.currentTime,o=r.duration,a=this.getNextIndex(e);n&&(a=this.removeAdContent(t,a));var s=null==a,l=null!=a&&this.list[a];if(this.isRetry=!1,i>0&&(this.players.emit(Ze.CONTENT_SKIPPED,this.currentItem),i===o)){this.players.emit(Ze.CONTENT_COMPLETED,this.currentItem);var c=this.currentVideoIndex==this.list.length-1&&(0==this.currentVideoIndex||s);Xa(this.players,null,"content.completed",{src:t.url,withErrors:!1,skippedAt:i,listCompleted:c,loopCompeleted:s})}if(this.nextVideo(a),this.completed=s,this.playing=!1,!(null==l?void 0:l.adContent)&&this.adContentInterrupt){var u=this.adContentInterrupt,d=u.item,p=u.wasPlaying,h=u.timestamp,f=u.done;d!=l||f?this.adContentInterrupt=null:(this.playing=p,this.playing&&this.seekContent(h),this.adContentInterrupt.done=!0)}this.start()},e.prototype.removeAdContent=function(e,t){var n=this.list.indexOf(e);return n>-1&&t!=n&&(this.removeAt(n),n<t&&(t-=1)),t},e.prototype.getCurrentTime=function(){if(this.video)return+(this.video.currentTime||0).toFixed(2)},e.prototype.getCurrentVariantLabel=function(){return(this.variantsList[this.selectedVariant]||{}).label},e.prototype.getDuration=function(){if(this.video)return+this.video.duration.toFixed(2)},e.prototype.getClickData=function(){var e=this.list[this.currentVideoIndex],t=e&&e.clickUrl||this.clickUrl;return"function"==typeof t&&(t=t()),{targetUrl:this.video.src,clickUrl:t}},e.prototype.destroyHls=function(){try{this.hls&&(this.hls.destroy(),this.hls=null)}catch(e){}},e.prototype.nextVideo=function(e){var t=this;this.started=!1;var n=this.getNextIndex(e);null!=n&&(this.currentVideoIndex=n,t.loop&&1==t.list.length?t.video.currentTime=0:this.setVideoSrc(n),this.isRetry=!1)},e.prototype.getNextIndex=function(e){return null!=e?e:this.currentVideoIndex<this.list.length-1?this.currentVideoIndex+1:this.loop?0:null},e.prototype.next=function(){var e=this.currentVideoIndex+1>=this.list.length?0:this.currentVideoIndex+1;this.playNextVideo(e)},e.prototype.prev=function(){var e=this.currentVideoIndex-1<0?this.list.length-1:this.currentVideoIndex-1;this.playNextVideo(e)},e.prototype.load=function(){this.isLoaded||this.video.load()},e.prototype.play=function(){var e;!Le(this.currentVideoSrc)||Ve()||document.createElement("video").canPlayType("application/vnd.apple.mpegURL")?(this.completed=!1,null===(e=this.hls)||void 0===e||e.play(),this.forcedPlayed?this.video.play().catch((function(){})):(this.forcedPlayed=!0,zo(this.video).then((function(){bt.b.emit(bt.a.INTERNAL.CONTENT.PLAYING)})).catch((function(){bt.b.emit(bt.a.PLAYER.AUTOPLAY_BLOCKED)})))):this.playOnHLSScriptLoaded=!0},e.prototype.getCurrentItem=function(){return this.list[this.currentVideoIndex]},e.prototype.isAdContent=function(){return(this.getCurrentItem()||{}).adContent},e.prototype.canPreroll=function(){return!this.adContentInterrupt||this.adContentInterrupt.item!=this.getCurrentItem()},e.prototype.shouldMonetize=function(){return!this.currentItem||!this.currentItem.adContent},e.prototype.insertAdContent=function(e){this.adContentInterrupt={item:this.getCurrentItem(),timestamp:this.getCurrentTime(),adContentItem:Qa(Qa({},e),{adContent:!0}),wasPlaying:this.playing},this.setWait(!1),this.insertAt(this.currentVideoIndex,this.adContentInterrupt.adContentItem),this.currentVideoIndex+=1,this.playNextVideo(this.currentVideoIndex-1)},e.prototype.insertAt=function(e,t){this.list.splice(e,0,Qa(Qa({},t),{adContent:!0})),Xa(this.players,null,"content.listUpdated",{list:this.list})},e.prototype.removeAt=function(e){this.list.splice(e,1),Xa(this.players,null,"content.listUpdated",{list:this.list})},e.prototype.pause=function(){this.video&&this.video.pause()},e.prototype.showContent=function(){this.container&&!this.visible&&(this.visible=!0,this.container.style.zIndex="10001",this.container.style.display="")},e.prototype.hideContent=function(){var e=this;this.container&&this.visible&&(this.visible=!1,this.container.style.zIndex="1",this.container.style.display="none"),(void 0===document.fullscreenElement&&this.video.webkitDisplayingFullscreen||document.fullscreenElement==this.video)&&(document.exitFullscreen?document.exitFullscreen():this.video.webkitExitFullScreen&&this.video.webkitExitFullScreen(),setTimeout((function(){return Fa(e.players,"normal")}),250))},e.prototype.setContent=function(e){this.init(e),this.video&&this.setVideoSrc(0),this.start()},e.prototype.setVideoFormat=function(e){this.selectedFormat=e,this.savedTime=this.video.currentTime,this.setVideoSrc(),this.start()},e.prototype.seekContent=function(e){this.video&&(this.video.currentTime=e)},e.prototype.setCurrentVideo=function(e){null!=e.index&&(this.playNextVideo(e.index),e.allowAdBreak&&qa())},e.prototype.isVisible=function(){return this.visible},e.prototype.removeContent=function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)},e.prototype.setVolume=function(e,t,n){this.video&&(this.players.muteToPlay&&!t&&(n||this.isUnlocked()||(t=!0)),void 0!==t&&this.video.muted!==t&&(this.video.muted=t),this.video.volume!==e&&(this.video.volume=e))},e.prototype.shouldPlay=function(){return this.isAdContent()||!0===this.players.started&&!this.blocked()},e.prototype.start=function(){var e=this;this.players.closed||Re("startContent",{players:this.players,log:!0},(function(){e.players.anyPlaying||(e.players.paused||!e.shouldPlay()||e.completed?e.videoChanged?e.load():e.pause():e.play())}))},e.prototype.hide=function(){this.hideContent()},e.prototype.show=function(){this.showContent()},e.prototype.pauseContent=function(){this.pause()},e.prototype.setWait=function(e){this.waitForSchedule=e},e.prototype.isUnlocked=function(){return this.players.info.mobile?this.unlocked:this.players.hadUserInteraction},e.prototype.unlockSlot=function(){!this.unlocked&&this.video&&(this.unlocked=!0,this.started||this.load())},e.prototype.getUrl=function(){return this.list.length>0?this.list[this.currentVideoIndex]&&this.list[this.currentVideoIndex].url:""},e.prototype.getHTMLVideoElement=function(){return this.video&&!nt(this.video)?this.video:null},e.prototype.getProgress=function(){var e=this.video.duration;return{time:Math.min(this.video.currentTime,e),duration:e}},e.prototype.useFallback=function(e){this.isRetry?this.next():(this.isRetry=!0,Le(e)?this.setMP4VideoSrc():this.setHLSVideoSrc())},e.prototype.setDefaultMas=function(e){e.forEach((function(e){e.mas=-1}))},e.getListFromUrls=function(e){return("string"==typeof e?e.split(","):e).map((function(e){return{url:e}}))},e}(),$a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.ACTIVE=1]="ACTIVE",e[e.FROZEN=2]="FROZEN",e[e.DEACTIVATED=3]="DEACTIVATED"}(Ka||(Ka={}));var es=function(e){function t(){var t=e.call(this)||this;return t._internalEventsEmitter=et,t.isInView=!1,t.wasInView=!1,t.partiallyInView=!1,t.isOutstream=!1,t.globalPricing=!1,t.consentData={},t.monetize=!0,t.beingVpaid=!1,t.trySound=!1,t.anvato=!1,t.jwplayer=!1,t.checkDomPresence=!0,t.checkDetectedSize=!1,t.vpaidContent=!1,t.curUniq=0,t.freqRetry=!1,t.anyPlaying=!1,t.allowSound=!1,t.allowPausedImpressions=!0,t.usejsv=!1,t.hadUserInteraction=!1,t.areqMethod=0,t.multipleEventMethod=0,t.mediaPreview=!1,t.intent=!1,t.controlsTouch=!1,t.secureIMA=!1,t.videoPreload="metadata",t.clickText=null,t.clickTextEnabled=!1,t.iframe=!1,t.areqEventsQueue={},t.areqEntryCount=0,t.areqTimer=null,t.eventsQueue={},t.gpvExtraParams={},t.gpvMethod=0,t.prebidJS={initialized:!1,que:[]},t.prebidActiveAuctions=0,t.prebidJSAdUnitCode=1,t.requeryPrebidTimer=null,t.requeryPrebidPromise=null,t.gpvAttempt=0,t.waitingForAds=!1,t.debug={},t.conf={},t.initOverrides=[],t.gpvConfLoaded=!1,t.timers=null,t.iiq=null,t.vastWaitFactor=1,t.totalVastRetries=null,t.maxTotalVastRetries=null,t.maxFailedVastRetries=null,t.maxAdStarts=null,t.rollAdStarts=null,t.restTime=null,t.vpaidInitLimit=3,t.autoScheduleReset=!1,t.sizeTolerance=null,t.widthOverwrite=null,t.heightOverwrite=null,t.rawSchedule=null,t.nullSchedule={api:!1,content:{wait:0,mas:0},time:{start:9e9,mas:0},auto:null},t.sessionConfig={tc:null,tcp:null,mv:"default",pt:null,grh:null},t.eventDispatcher=null,t.flamingoModule=null,t.postRoll=!1,t.roll=0,t.noAdRounds=0,t.mainAutoplay=!0,t.viewAutoplay=0,t.controlBarType=null,t.clickToPlay=!1,t.vastList={},t.playNextRepeatTimer=new g,t.viewStartPlayerInterval=null,t.viewCheckPlayerInterval=null,t.externalViewabilityFunction=null,t.debugLogReason="gpv",t.debugLog="",t.debugLogBuffer="",t.logToHTML=!1,t.submitDebugLogOnPlayerError=!1,t.submitDebugLogOnVastError=!1,t.submitDebugLogForVastId=null,t.unlockedVideos=[],t.domIsReady=!1,t.started=!1,t.paused=!1,t.scheduledPixelSent=!1,t.showBrandMenu=!1,t.demandTypeThrottleMap={},t.sendStringParams=pt,t.anyAdPlayed=!1,t.usableTagsSent={},t.curAdStarts=0,t.reqThrottleMap={},t.hlsConfig={},t.iiqPercentage=0,t.iiqEnabled=!1,t.now=Date.now,t.startTime=(new Date).getTime(),t.playerReady=new Promise((function(e){t.playerReadyResolve=function(){return t.domIsReady=!0,e()}})),t}return $a(t,e),t.prototype.on=function(e,t){this._internalEventsEmitter.on(e,t)},t.prototype.off=function(e,t){this._internalEventsEmitter.off(e,t)},t.prototype.once=function(e,t){this._internalEventsEmitter.once(e,t)},t.prototype.emit=function(e,t){this._internalEventsEmitter.emit(e,t)},Object.defineProperty(t.prototype,"sessionTarget",{get:function(){return this.sessionConfig.tc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionTargetPub",{get:function(){return this.sessionConfig.tcp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.sessionTarget||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetPub",{get:function(){return this.sessionTargetPub||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priceTables",{get:function(){var e;return(null===(e=this.sessionConfig)||void 0===e?void 0:e.pt)||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schedule",{get:function(){return this.monetize?this.rawSchedule:this.nullSchedule},set:function(e){e.content&&(e.content.type="preRoll"),e.time&&(e.time.type="midRoll"),this.rawSchedule=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPublisherDemand",{get:function(){return this.gpvData.filter((function(e){return e.gtag})).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isIvt",{get:function(){var e,t;return null===(t=null===(e=this.sessionConfig)||void 0===e?void 0:e.grh)||void 0===t?void 0:t.woiv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteOpsId",{get:function(){var e,t;return null===(t=null===(e=this.sessionConfig)||void 0===e?void 0:e.grh)||void 0===t?void 0:t.wolud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFlamingoOn",{get:function(){return this.isFlamingoActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteOpsState",{get:function(){var e,t;return null===(t=null===(e=this.sessionConfig)||void 0===e?void 0:e.grh)||void 0===t?void 0:t.wopt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skipParams",{get:function(){return this.skipOffset?{skip:1,skipafter:this.skipOffset}:{skip:0}},enumerable:!1,configurable:!0}),t.prototype.findPlayerData=function(e){return x(Oi,e)},t.prototype.reachedDemandMaxAdStarts=function(e){var t,n=e.demandId||e.vastId;return((null===(t=this.vastList[n])||void 0===t?void 0:t.starts)||0)>=(e.getDemandMaxAdStarts()||1/0)},t.prototype.isAdContent=function(){var e=this.getContentElement();return e&&e.isAdContent()},t.prototype.getContentElement=function(){return this.content instanceof Za&&this.content},t}(E);function ts(e){var t=m(e.p);if(!t)return null;var n=new es;f(n,{playerId:t,isApp:v(e.app,!1),domain:A(e.d,""),cacheBuster:A(e.cb,""),networkId:m(e.ni),userId:A(e.ui,"")}),f(n,{divId:A(e.did,"video"+t+n.cacheBuster),sessionId:A(e.se,is()),width:m(e.w),height:m(e.h),subid:A(e.sid,""),htmlOnly:v(e.ho,n.isApp),isDebugVersion:!0,playerVersion:A(e.pv||e.playerVersion,"100.0"),playerUrl:A(e.playerUrl)});var r=v(e.ssl),i=A(e.mid),o=A(e.sd,i.split(".").slice(1).join("."));i=i.split(".")[0],f(n,{machineId:i,serverDomain:o,keepDetailedDebugLog:3==m(e.sl),logDebugToConsole:2==m(e.cnl),eventConsoleLog:m(e.cnl)>0,keepDebugLog:2==m(e.sdl),logVastResponse:v(e.lvr,!1),jsCallingVpaid:A(e.job),beingVpaidUseSlot:v(e.vslot),vpaidContent:v(e.vcontent),pageLoadUid:A(e.puid),country:A(e.geo),os:A(e.os),browser:A(e.browser),isAmp:v(e.isAmp),reportViewability:v(e.rv,!1)}),n.tagConfig=e,rs(n,e);var a={},s={d:!0,sid:!0,did:!0,p:!0,cb:!0,playerVersion:!0,mid:!0,cnl:!0,sv:!0,ap:!0,sdl:!0,se:!0,w:!0,h:!0,lvr:!0,app:!0,jsv:!0,ob:!0,pv:!0},l={};for(var c in e)isNaN(c)&&!s[c]&&e.hasOwnProperty(c)&&(a[c]||(a[c]=e[c]));n.gpvExtraParams=a,n.customParams=Object.keys(l).length?l:null,n.logDebugToConsole=n.logDebugToConsole||n.keepDetailedDebugLog;var u=F();if(n.domain||(n.domain=u),n.domainDetected=function(e){try{var t=document.createElement("a");return t.href=e,t.host}catch(t){return e}}(u).substr(0,100),n.protocol=function(e,t){if(null!=e)return e?"https:":"http:";try{var n=t||window.location||document.location;if(n&&"http:"==n.protocol)return"http:"}catch(e){}return"https:"}(r),n.serverHost=function(e){return n.protocol+"//"+(e||n.machineId)+"."+n.serverDomain},n.conf.sUrl=n.serverHost("c"),n.conf.pJsvUrl=n.conf.sUrl+"/player/jsv_pure_2.js",n.conf.maxDomLoadTimes=60,n.conf.domLoadRetryTimeout=200,n.conf.domLoadInitTimeout=500,e.is){var d=J(n.protocol,e.is),p=(new Date).getTime().toString();R(d=d.replace(/\[CB\]/g,p))}return n}function ns(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e===o)return o}return v(e)}function rs(e,t){h(l,e,{allowLongImpressions:v(t.ali),allowPausedImpressions:v(t.pausedImpressions),allowSound:v(t.as)||a(v(t.muted),(function(e){return!e})),anvato:v(t.anvato),autoScheduleReset:v(t.asr),blackListName:A(t.bl),checkDomPresence:v(t.checkdom),checkDetectedSize:v(t.checkdetected),clickText:A(t.actext),clickTextEnabled:v(t.actcall),closeButton:v(t.scb),controlBar:v(t.co),controlBarMaybe:v(t.com),controlBarType:A(t.cotype),controlsTouch:v(t.cot),enableAdUI:v(t.adui),event2RateLow:m(t.erate_low),eventCookie:A(t.evck),eventServer:A(t.esrv),eventServer2:A(t.esrv2),hadUserInteraction:v(t.husi),iframe:v(t.iframe),interactive:v(t.interactive),jwplayer:v(t.jwplayer),mainAutoplay:ns(t.ap,"ads"),maxAdStarts:m(t.mas),maxFailedVastRetries:m(t.mvr),maxTotalVastRetries:m(t.tvr),mediaPreview:v(t.mediaPreview),prerollTimeout:m(t.pretime),restTime:m(t.rest),requireSound:v(t.rs),secureIMA:v(t.secureima),showBrandMenu:v(t.showBrandMenu),showNextNavigation:v(t.showNextNavigation),sizeTolerance:m(t.sizeTol),trySound:v(t.trySound),videoPreload:A(t.vp),viewAutoplay:m(t.apv,0),vpaidInitLimit:m(t.vpl),flamingoModule:t.fl,location:t.loc,isFlamingoActive:v(t.isPriceCalc)})}function is(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var os=function(e,t){this.duplicate=10,this.requestAds=60,this.prefetchVast=86400,this.fetchVast=86400,this.prebidReauction=3,this.loadAd=60,this.impressionAfterStart=3,this.longImpression=70,this.startMore=3,this.startAdParallel=70,this.startAdNonParallel=20,this.startAd=20,this.auction=9,this.waitHigherGroup=[5,12,12,0],e&&f(this,e),this.startAd=t?this.startAdParallel:this.startAdNonParallel,this.requestAds=this.prefetchVast=this.fetchVast=this.loadAd=this.startAd=this.auction,e&&f(this,e)},as=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};window.CEDATO_API=window.CEDATO_API||{registerPlayer:function(e,t){ls[e]=ls[e]||new ss,ls[e]._ready=!0;var n=function(e){var t=window.CEDATO_INIT;if(t){if("function"==typeof t)return t;if("object"==typeof t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if("function"==typeof t[i])return t[i]}}return null}(as([e],t||[],!0));n&&(ls[e].init=n);return setTimeout((function(){ls[e].trigger("ready")}),0),ls[e]},getPlayer:function(e){void 0===ls[e]&&(ls[e]=new ss);return ls[e]}};var ss=function(){function e(){this._ready=!1,this.eventEmitter=new $e.EventEmitter2({wildcard:!0,maxListeners:20})}return e.prototype.on=function(e,t){var n=this,r=e.toLowerCase();if("ready"!==r||!this._ready)return this.eventEmitter.on(r,t),this;setTimeout((function(){return t({name:"ready",player:n})}),0)},e.prototype.off=function(e,t){var n=e.toLowerCase();return t?this.eventEmitter.off(n,t):this.eventEmitter.removeAllListeners(n),this},e.prototype.trigger=function(e,t){var n=e.toLowerCase();return this.eventEmitter.emit(n,{name:n,player:this,data:null==t?{}:t}),this},e}(),ls={};var cs=function(){return(cs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},us=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function ds(e){switch(typeof e){case"boolean":return{muted:!e};case"number":if(e>=0&&e<=1)return{volume:e};break;case"string":if("on"===e||"off"===e)return{muted:"on"===e}}return null}function ps(e,t){for(var n=[],r=0,i=Oi;r<i.length;r++){var o=i[r];o.demandId?o.demandId==t&&n.push(o):(o.vastId==t||o.cxvid&&o.cxvid==t)&&n.push(o)}e.anyPlaying=n.length>0||e.anyPlaying;for(var a=0,s=n;a<s.length;a++){var l=s[a];e.anyPlaying=e.anyPlaying&&Ia(e,l),ba(e,l)}return n.length}function hs(e,t){if(rs(e,t),rs(e,e.tagConfig),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};d((function(n,i){var o=t.map((function(e){return n.parser(e[n.parName])})).filter(n.filter);o.length?e[i]=r[i]=o[0]:e[i]=void 0}),T)}(e,e.tagConfig,t),h(l,e,{beacons:t.callbacks,moat:t.moat,customVars:t.cvars,gpvCookie:t.gpvck,supplyCookieJson:t.cookieJson,gpvUrl:t.gpvurl,networkId:m(t.ni),retryTestGroup:m(t.rtg),vastWaitFactor:m(t.vwf,1),gpvMethod:m(t.gpvm),areqMethod:m(t.areqm),multipleEventMethod:m(t.multim),reportViewability:v(t.rv,e.reportViewability),ivtBlock:v(t.ivtb),adServerError:v(t.adServerError)}),e.prebidConfig=Kn(e),e.timers=new os(t.timers,!1),h(u,e,{keepDebugLog:v(t.sdl),debugLogReason:A(t.sdlr),logVastResponse:v(t.lvr),submitDebugLogOnPlayerError:v(t.sdlpe),submitDebugLogOnVastError:v(t.sdlve),submitDebugLogForVastId:m(t.vd)}),t.rvu&&(e.urlReplacer=[],e.urlReplacer.vastId=t.rvu.v,e.urlReplacer.searchFor=t.rvu.s,e.urlReplacer.replaceWith=t.rvu.r),t.ho&&1==t.ho&&(e.htmlOnly=!0),!e.gpvConfLoaded){e.vastWaitFactor=e.vastWaitFactor/2,e.maxFailedVastRetries>1&&e.maxFailedVastRetries<50&&(e.maxFailedVastRetries=2*e.maxFailedVastRetries);for(var n,r,i={},o=function(t){var o=t.name,a=t.value;switch(o){case"monetize":e.monetize=a;break;case"autoplay":e.mainAutoplay=ns(a,"ads");break;case"interactive":e.interactive=!!a;break;case"content":n=a;break;case"schedule":r=a;break;case"moat":e.moat=a;break;case"contentUrl":case"contentClickUrl":case"contentImage":case"contentImagePosition":case"contentExternal":i[o.substr(7)]=a;break;case"rotate":switch(a){case!0:a=null;break;case!1:a=1;break;default:a*=1}e.maxAdStarts=a;break;case"sound":var s=ds(a);null!=s&&(e.volume=null!=s.volume?s.volume:s.muted?0:1,e.muted=null!=s.muted?s.muted:!s.volume);break;case"allowSound":"must"==a?(a=!0,!e.info.mobile&&e.hadUserInteraction||(e.mainAutoplay=!1)):"dynamic"==a&&(e.dynamicSound=!0,a=!1);case"trySound":case"closeButton":null!=a&&(e[o]=a);break;case"injectScript":!function(e,t){t=S(t);for(var n=0,r=t;n<r.length;n++){var i=r[n],o=J(e.protocol,i),a=(new Date).getTime().toString();R(o=o.replace(/\[CB\]/g,a).replace(/\[DIVID\]/g,e.divId))}}(e,a);break;case"prebid":e.prebidConfig="function"==typeof a?a(Kn(e)):a;break;case"viewability":e.externalViewabilityFunction="function"==typeof a?a:function(){return a};break;case"gpvExtraParams":e.gpvExtraParams=f(e.gpvExtraParams,a);break;case"hlsConfig":e.hlsConfig=a;break;case"customParams":e.customParams=f(e.customParams,a);break;case"adViewabilityDelay":e.adViewabilityDelay=a;break;case"iiqPercentage":e.iiqPercentage=a;break;case"eventDispatcher":e.eventDispatcher=new ri(a)}if(e.isDebugVersion)switch(o){case"timers":e.timers=f(e.timers,a);break;case"callbacks":e.beacons=a;break;case"debug":case"customVars":h(l,e[o],a)}},a=0,s=e.initOverrides;a<s.length;a++){o(s[a])}e.initOverrides=us([],e.initOverrides.filter((function(e){return"demands"===e.name})),!0),e.gpvConfLoaded=!0,e.viewAutoplay&&(e.mainAutoplay=!1),e.beingVpaid?e.mainAutoplay=!1:(e.clickToPlay&&(e.mainAutoplay=!1),e.mainAutoplay||(e.usejsv=!1)),e.volume=null!=e.volume?e.volume:e.allowSound?1:0,e.muted=null!=e.muted?e.muted:!e.allowSound,e.dynamicSound=null!=e.dynamicSound?e.dynamicSound:!e.muted,e.controlBar&&e.usejsv&&"native"==e.controlBarType&&(e.controlBar=!1),e.interactive=null!=e.interactive?e.interactive:e.controlBar,qe(e,t.content,n,i),function(e,t,n,r){!n&&t&&(e.postRoll=!!t.cpf);var i=f({},n,e.prerollTimeout?{content:{wait:e.prerollTimeout}}:{},r);i.api=!!i.api,(i.time||i.content||i.api||i.auto)&&(e.schedule=i)}(e,t.content,t.schedule,r),e.autoplay=!1,e.paused=!0,e.beingVpaid&&(e.contentDefinition.wait=!0)}}function fs(e,t,n){var i,o,a,s,l;if(w(t)){e.waitingForAds=!1,e.gpvTime=C(e.startTime),function(e){var t=[""+e.playerId];e.cacheBuster&&t.push(e.cacheBuster);var n=function(e){var t=window.CEDATO_PARAM,n=null;if(t&&"object"==typeof t)for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o&&null!=t[o]){n=t[o];break}}var a=[];if(n)for(var s in n)n.hasOwnProperty(s)&&a.push({name:s,value:n[s]});return a}(t);e.initOverrides=us(us([],e.initOverrides,!0),n,!0)}(e),(e.initOverrides||n)&&(t=function(e,t,n){var r=e.find((function(e){return"config"==e.name})),i={};r&&r.value&&(i=U(r.value,{id:"c"}));n&&(i=U(i,n));return t.map((function(e){return"c"===e.id?U(e,i):e}))}(e.initOverrides||[],t,n),t=function(e,t){var n,i,o=function(){var e,t,n,r;if(null===(t=null===(e=window.__EXCO)||void 0===e?void 0:e.SIM)||void 0===t?void 0:t.DEMANDS)return{value:null===(r=null===(n=window.__EXCO)||void 0===n?void 0:n.SIM)||void 0===r?void 0:r.DEMANDS};return null}()||e.find((function(e){return"demands"==e.name}));if(!o)return t;if("function"==typeof o.value)return o.value(t);var a=function(e){return S(e).map((function(e,t){if("string"==typeof e&&(e={url:e}),"delete"==e.$op||"reset"==e.$op)return e;var n=e.dmid||""+(10000000001+t),r=e.id||n.split("-").slice(-1)[0];return cs({$op:"upsert",id:r,dmid:n},e)}))}(o.value),s=t.filter((function(e){return"c"==e.id}));if(null===(i=null===(n=window.__EXCO)||void 0===n?void 0:n.SIM)||void 0===i?void 0:i.DEMANDS)return us(us([],a,!0),s,!0);a.find((function(e){return"reset"==e.$op}))&&(t=s);var l=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return y.apply(void 0,r([!0,e],t,!1))}((function(e){return"c"==e.id||"delete"==e.$op||"reset"==e.$op?null:("update"!=e.$op||t.find((function(t){return t.dmid==e.dmid})))&&e.dmid}),t=t.filter((function(e){return!a.find((function(t){return"delete"==t.$op&&t.dmid==e.dmid}))})),a);return us(us([],l,!0),s,!0)}(e.initOverrides||[],t)),e.urlReplacer=null;for(var c=0,u=t;c<u.length;c++){if("c"===(h=u[c]).id&&"d"===h.c)return void Ra(e);"c"===h.id?hs(e,h):"d"===h.c&&ps(e,h.id)}for(var d=0,p=t;d<p.length;d++){var h;if((h=p[d]).id&&"c"!==h.id&&"d"!==h.c){vs(h);var f=new Er(h);Oi.push(f)}}return(null===(i=window.__EXCO)||void 0===i?void 0:i.SIM)&&(null===(a=null===(o=window.__EXCO)||void 0===o?void 0:o.SIM)||void 0===a?void 0:a.DEMANDS_CB)&&(null===(l=null===(s=window.__EXCO)||void 0===s?void 0:s.SIM)||void 0===l||l.DEMANDS_CB(t)),t}}function vs(e){var t;try{if("rtb"===e.type){var n=new URL(e.url);e.gtag=!1,e.originalType=e.type,e.type="prebid",e.prebid={bidder:"exco",floorPrice:(null===(t=null==e?void 0:e.impressionData)||void 0===t?void 0:t.price)||.3,params:{},ext:{ap:n.searchParams.get("ap"),name:e.dp}}}}catch(e){}return e}var ms=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},As=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function ys(e){var t=e.get,n=e.data,r=void 0===n?{}:n,i=e.compress,o=e.decompress;return ms(this,void 0,void 0,(function(){var e;return As(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,En(t("https://gpv.ex.co/player/d?v=2&b=".concat(i(r))),2e3)];case 1:return e=n.sent(),[2,o(e)];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))}var gs={cvars:{IP:"",DNT:"0"},ap:!0,id:"c",vwf:1,as:!1,mvr:1.01,ho:!1,adServerError:!0,esrv2:"https://e.channelexco.com/event",schedule:{initialPreRollTimeout:10,minSecondsBetweenFetch:0,slots:{interval:15},content:{limit:60,mas:2,wait:10},time:{wait:10,limit:60,mas:1,start:15}},co:!1,impDetail:!0,moat:{ids:{level3:"[DMID]",level2:"",level4:"",level1:"",slicer1:""},partnerCode:"cedatojsvideo958042602703",rate:0}},Es=[];var bs=new Set(["20","21","22","23","24","25","26"]),Ts=function(){return"s-".concat((e=Array.from(bs))[Math.floor(Math.random()*e.length)]);var e},_s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},ws=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ss=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function Is(e,t){return _s(this,void 0,void 0,(function(){return ws(this,(function(n){return[2,new Promise((function(n){var r,i,o=(r=e.adServerURL,(i=new URLSearchParams(r)).get("p")+i.get("cb"));e.isApp&&function(e){var t=new URL(e.adServerURL);t.searchParams.set(en.APP_BUNDLE,e.appParams.bundle),t.searchParams.set(en.APP_NAME,e.appParams.name),e.appParams.category&&t.searchParams.set(en.APP_CATEGORY,e.appParams.category),e.appParams.storeId&&t.searchParams.set(en.APP_STORE_ID,e.appParams.storeId),e.appParams.storeUrl&&t.searchParams.set(en.APP_STORE_URL,e.appParams.storeUrl),e.appParams.version&&t.searchParams.set(en.APP_VERSION,e.appParams.version),e.appParams.deviceId&&t.searchParams.set(en.DEVICE_ID,e.appParams.deviceId),e.appParams.ifa&&t.searchParams.set(en.IFA,e.appParams.ifa),e.adServerURL=t.toString()}(e),window.__EXCO.CDT_TAG_CB=window.__EXCO.CDT_TAG_CB||{},window.__EXCO.CDT_TAG_CB[o]=window.__EXCO.CDT_TAG_CB[o]||function(e){return n(e)},window.CEDATO_TAG=window.CEDATO_TAG||{players:[],version:"-NA-",init:function(){var t,n,r=window.CEDATO_TAG.players.pop()||{},i=r.gpvData,o=r.params,a=r.id;window.__EXCO.CDT_TAG_CB[a]&&window.__EXCO.CDT_TAG_CB[a]({gpv:i,params:o}),t=e.playerId,n=i,window.__EXCO.AP=window.__EXCO.AP||{},window.__EXCO.AP[t]=window.__EXCO.AP[t]||{},window.__EXCO.AP[t].gpv=n}},e.adServerURL=function(e,t){void 0===t&&(t={});try{return te(e,t)}catch(n){return Ce.error("Failed to append additional params to url - ".concat(e),n,t),e}}(e.adServerURL,{pub:1,pageLoadUid:e.pageLoadUid}),function(e,t){return void 0===t&&(t={}),new Promise((function(n,r){var i=document,o=i.getElementsByTagName("head")[0],a=i.createElement("script");a.src=e,a.onload=function(){return n()},a.onerror=function(e){return r(e)};var s=t.async,l=t.defer;s&&(a.async=!0),l&&(a.defer=!0),o.appendChild(a)}))}(e.adServerURL).catch((function(){var r,i=(r=e.adServerURL,{gpv:Ss([gs],Es,!0),params:new URL(r).searchParams.toString()+"&mid=".concat(Ts(),"&sd=channelexco.com")});t.send(jr,{extraData:{defaults:i}}),n(i)}))}))]}))}))}function Cs(e){return _s(this,void 0,void 0,(function(){var t,n;return ws(this,(function(r){switch(r.label){case 0:return[4,ys({get:At,compress:Pr.compressObj,decompress:Pr.decompressObj,data:Rs(e)})];case 1:return t=r.sent(),n=t?function(e){"default"===(null==e?void 0:e.mv)&&(e.tc=null);return e.tc&&(e.tc=Dr(e.tc)),e.tcp&&(e.tcp=Dr(e.tcp)),e}(t):null,Ce.log("GPV service response",n),[2,n]}}))}))}function Rs(e){return{pageLoadUid:e.pageLoadUid,country:e.country,browser:e.browser,os:e.os,networkId:e.networkId,hu:!0,p:e.playerId,d:e.domain,userId:e.userId}}var Ps=n(2),Ds=n(4),ks=function(){return(ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ls=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Os=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xs=n(23),Vs=n(24);var Ns=function(e){return Ls(void 0,void 0,void 0,(function(){var t,n,r,i,o,a,s,l,c;return Os(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),Object(bt.c)(e.NgEvents),function(e){window.location.search.includes("expd=1")&&Ie.addLogger(new Se({level:Te.ALL})),e.logger&&Ie.addLogger(e.logger)}(e),M(null==e?void 0:e.gdprConsentApplies)&&e.waitForUserConsent?bt.b.once(Ds.a.USER.CONSENT,(function(){Gn({network:null==e?void 0:e.networkId,gdpr:null==e?void 0:e.gdprConsentApplies,gdpr_consent:null==e?void 0:e.gdprConsentString})})):Gn({network:null==e?void 0:e.networkId,gdpr:null==e?void 0:e.gdprConsentApplies,gdpr_consent:null==e?void 0:e.gdprConsentString}),(t=function(e){e.reqSampled=$n(10);var t=new ri(e);return t.addBaseAttribute("reqSampled",e.reqSampled),t}(e)).send(Br),[4,Promise.all([Is(e,t),Cs(e)])];case 1:return n=u.sent(),r=n[0],i=n[1],Ps.default.isEnabled(e,Ps.PLUGINS.TABOOLA)?[4,Ps.default.load(Ps.PLUGINS.TABOOLA,{callbacks:e.callbacks})]:[3,4];case 2:return o=u.sent(),a=r,[4,o.apply(r.gpv)];case 3:a.gpv=u.sent(),u.label=4;case 4:return s=function(e,t,n,r){var i,o,a,s,l,c,u,d=e.adServerURL,p=e.overrides,h=t.gpv,f=function(e,t){var n;n=t?{}:[];try{for(var r=e.slice(e.indexOf("?")+1).split("&"),i=0,o=r;i<o.length;i++){var a=o[i].split("=");t||n.push(a[0]);var s=a[1];t&&(s=W(s)),n[a[0]]||(n[a[0]]=s)}}catch(e){n={}}return n}(t.params,!0),v=ts(f);m=v,void(null!==ot&&!0!==(null==A?void 0:A.override)||(ot=m)),v.version=f.sid4,v.renderingContext=e.renderingContext||document,v.sessionConfig=n||v.sessionConfig,v.publisher=e.publisher,v.networkId=+(null===(i=e.publisher.seat)||void 0===i?void 0:i.id)||+e.networkId,v.userId=e.userId,v.pageLoadUid=e.pageLoadUid,v.country=e.country,v.browser=e.browser,v.os=e.os,v.rootDivElem=function(e){return e.renderingContext.querySelectorAll("[id='"+e.divId+"']:not([data-exco-used])")[0]}(v),v.info=Vs.getDeviceInfo(),v.isAmp=e.isAmp,v.src=d,v.autoplay=![Bi.CLICK_TO_PLAY].includes(e.playbackMode),v.mainAutoplay="ads",v.hlsConfig=p.hlsConfig,v.allowSound="must"===p.allowSound,v.customParams=p.customParams,v.adViewabilityDelay=p.adViewabilityDelay,v.eventDispatcher=r,v.iiqPercentage=p.iiqPercentage,v.iiqEnabled=e.iiqEnabled,v.externalViewabilityFunction=p.viewability,v.sendRemoteLogs=e.sendRemoteLogs,v.adServerURL=d,!1===p.monetize&&(v.monetize=!1),v.gpvData=fs(v,h,e.supplyExtraParams),v.prebidConfig=function(e,t){var n=Kn(e);return n.src=t.prebidBundleURL||"https://cdn.ex.co/player/pb/2.6.0/expb.js",n}(v,e),v.playbackMode=e.playbackMode||Bi.AUTO_PLAY,v.isOutstream=e.isOutstream,v.plugins=e.plugins,v.callbacks=e.callbacks,v.waitForUserConsent=e.waitForUserConsent,v.consentData=e.consentData||{},(null===(o=e.skipButton)||void 0===o?void 0:o.enabled)&&(v.skipOffset=5);var m,A;v.globalPricing=e.globalPricing,v.isApp=e.isApp,v.isApp&&(v.appParams=e.appParams,!v.domain&&(null===(a=v.appParams)||void 0===a?void 0:a.name)&&(v.domain="app://".concat(encodeURIComponent(v.appParams.name))));v.resellersJSONDomain=e.publisher.resellersJSONDomain||e.resellersJSONDomain,v.isPrebidPDSession=$n(50),v.sessionConfig.pt=v.sessionConfig.pt||{},v.sessionConfig.pt.exco=(null===(l=null===(s=null==e?void 0:e.publisher)||void 0===s?void 0:s.pt)||void 0===l?void 0:l.exco)||[],v.sessionConfig.pt.publisher=(null===(u=null===(c=null==e?void 0:e.publisher)||void 0===c?void 0:c.pt)||void 0===u?void 0:u.publisher)||[],v.sessionConfig.pt.publisher.length>0&&Ce.info("Has publisher price table with ".concat(e.publisher.pt.publisher.length," entries"));return v}(e,r,i,t),function(e,t){var n,r,i,o;e.addBaseAttribute("flamingo",t.isFlamingoOn),t.isFlamingoOn&&e.addBaseAttribute("mv",null===(n=null==t?void 0:t.flamingoModule)||void 0===n?void 0:n.name),e.addBaseAttribute("state",null===(r=t.location)||void 0===r?void 0:r.state),e.addBaseAttribute("dma",null===(i=t.location)||void 0===i?void 0:i.dma),e.addBaseAttribute("city",null===(o=t.location)||void 0===o?void 0:o.city),e.addBaseAttribute("app",t.isApp),t.isApp&&e.addBaseAttribute("appParams",t.appParams)}(t,s),s.isIvt&&function(e){var t;null===(t=e.eventDispatcher)||void 0===t||t.send(Fr,{})}(s),qe(s,null,e.contents),[4,za(s,window.CEDATO_API,r.gpv)];case 5:return l=u.sent(),Ms(s),[2,Us(l)];case 6:return c=u.sent(),De(null,"Player init error")(c),[3,7];case 7:return[2]}}))}))},Us=function(e){return new Promise((function(t){e.on("player.ready",(function(){return t(e)}))}))};var Ms=function(e){return Ls(void 0,void 0,void 0,(function(){return Os(this,(function(t){switch(t.label){case 0:return e.DMVAST=ks(ks({},xs),{client:new xs.VASTClient,parser:new xs.VASTParser}),function(e){e.sendPixel=function(e){(new Image).src=e},e.injectScript=function(e){R(e)},e.injectIframe=function(e){P(e)},e.playerEvents=new $e.EventEmitter2({wildcard:!0,maxListeners:20}),e.serverEvents=new sa(e,(function(e,t){var n;null===(n=navigator.sendBeacon)||void 0===n||n.call(navigator,e,t)}))}(e),e.jsCallingVpaid&&(e.beingVpaid=!0,e.vpaidContent||(e.maxAdStarts=1),function(e){if(e.jsCallingVpaid){var t=window;if(!t[e.jsCallingVpaid]||!t[e.jsCallingVpaid].pEvent)return Ee(e,6,"vpaid parent not found in post calling js obj: "+e.jsCallingVpaid),!1;e.callingJSVpaid=t[e.jsCallingVpaid]}}(e)),e.detect=function(e){var t="h";e.beingVpaid&&(t="j");var n="d";e.info&&e.info.mobile&&(n="m");e.isApp&&(n="a");return"s"+t+n}(e),e.info.mobile&&(e.freqRetry=!0),e.muteToPlay=!0,ve(e,ne.E_START,{},{}),Da(e),[4,wn(e)];case 1:return t.sent(),ro(e),[2]}}))}))};var js,Fs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Bs=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},qs=document.currentScript,Ws=null===(js=null==qs?void 0:qs.dataset)||void 0===js?void 0:js.id;window.__EXCO=window.__EXCO||{},Ws&&(window.__EXCO[Ws]=window.__EXCO[Ws]||{}),(window.__EXCO[Ws]||window.__EXCO).AP_INIT=function(e){return Fs(void 0,void 0,void 0,(function(){return Bs(this,(function(t){switch(t.label){case 0:return[4,Ns(e)];case 1:return[2,t.sent()]}}))}))}}]);(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){return(function(e){if(Array.isArray(e))return e})(e)||(function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}})(e,t)||(function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}})(e,t)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=(e,t)=>{var n=t.type,r=t.value;switch(n){case"SET_STATUS":return"open"===e.status&&"hidden"===r?e:_(_({},e),{},{hasOpened:e.hasOpened||"open"===r,status:"open"!==r||e.hasOpened?r:"loading"});case"SET_LAZY_NAVIGATE":return _(_({},e),{},{lazyNavigate:r});case"SET_MENU_URL":return _(_({},e),{},{menuURL:r});case"SET_TRANSACT_URL":return _(_({},e),{},{transactURL:r});case"SET_SIZE":return _(_({},e),{},{width:r.width,height:r.height});case"CLEANUP_BEFORE_UNMOUNT":return _(_({},e),{},{cleanup:r});case"READY":return _(_({},e),{},{ready:!0});case"MAYBE_HIDE_BUBBLE":return _(_({},e),{},{lastVisibleScrollTop:void 0,status:M({hasOpened:e.hasOpened},r)?"closed":"hidden"});case"MAYBE_UNHIDE_BUBBLE":if(M(e,r)){if("hidden"===e.status)return _(_({},e),{},{lastVisibleScrollTop:window.scrollY||window.pageYOffset,status:"closed"})}else if("closed"===e.status)return _(_({},e),{},{lastVisibleScrollTop:void 0,status:"hidden"});return e;case"SET_WELCOME_STATUS":return _(_({},e),{},{welcomeStatus:r});case"RENDER":return _(_({},e),{},{renderCandidates:null!=e&&e.renderCandidates?e.renderCandidates.concat(r):r});case"RESET_RENDER":return _(_({},e),{},{renderCandidates:null})}},k=e=>{var t=e.hideUntilScrollThreshold;return{width:0,height:0,menuURL:void 0,transactURL:void 0,lastVisibleScrollTop:void 0,hasOpened:!1,lazyNavigate:null,cleanup:[],status:M({},t)?"closed":"hidden",welcomeStatus:"closed"}},M=(e,t)=>{var n=e.lastVisibleScrollTop;if(e.hasOpened)return!0;if(!t)return!0;var r=window.scrollY||window.pageYOffset,i=(r+(window.innerHeight||document.documentElement.clientHeight))/document.body.scrollHeight>=t;return void 0!==n&&r>=n||i},T=e=>{Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener noreferrer",href:e}).click()},F=e=>{var t=e.message,n=void 0===t?"":t,r=e.horizontalAlign,a=void 0===r?"right":r,o=e.verticalAlign,c=void 0===o?"bottom":o,s=e.bubbleBgColor,l=void 0===s?"0,0,238,1":s,d=e.bubbleIconColor,u=void 0===d?"255,255,255,1":d,p=e.onCloseClick,v=void 0===p?()=>{}:p,b={[a]:-18,[c]:"40%",["border-".concat("bottom"===c?"top":"bottom")]:"8px solid rgba(".concat(l,")"),transform:"rotate(-90deg)"},f={[c]:-4,[a]:70,"background-color":l?"rgba(".concat(l,")"):"#2962ff",color:u?"rgba(".concat(u,")"):"#FFFFFF"};return Object(i.g)("div",{id:S.a.welcomeTooltip,style:f},Object(i.g)(g.a,{content:n,setDangerously:!0},Object(i.g)("div",null)),Object(i.g)("div",{className:S.a.closeIcon,onClick:v},Object(i.g)("div",null),Object(i.g)("div",null)),Object(i.g)("div",{style:b,className:S.a.caret}))},A=e=>{var t=e.candidate,n=t.candidateID,r=t.fillables,l=(r=void 0===r?{}:r).privacyPolicyURL,y=void 0===l?"":l,g=r.propertyFiles,m=void 0===g?[]:g,O=e.options,L=void 0===O?{}:O,j=e.env,E=(j=void 0===j?{}:j).propertyID,D=j.defaultStickyWebURL,M=j.defaultTransactURL,A=j.realmSessionID,I=void 0===A?"":A,H=e.dataCandidates,C=void 0===H?[]:H,Q=e.onRendered,B=void 0===Q?()=>{}:Q,N=e.registerProvider,P=void 0===N?()=>{}:N,R=L.disabledFeatures,Z=void 0===R?[]:R,z=L.verticalAlign,W=void 0===z?"bottom":z,Y=L.horizontalAlign,V=void 0===Y?"right":Y,q=L.verticalMargin,G=void 0===q?"16px":q,X=L.horizontalMargin,J=void 0===X?"16px":X,K=L.bubbleBgColor,$=void 0===K?"0,0,238,1":K,ee=L.bubbleIconColor,te=void 0===ee?"255,255,255,1":ee,ne=L.hideUntilScrollThreshold,re=void 0===ne?.8:ne,ie=L.welcomeTooltipMsg,ae=void 0===ie?"":ie,oe=L.openForOffer,ce=void 0!==oe&&oe,se=L.offerID,le=void 0===se?null:se,de=U(Object(a.j)(x,{hideUntilScrollThreshold:re},k),2),ue=de[0],pe=ue.status,ve=ue.lazyNavigate,be=ue.hasOpened,fe=ue.menuURL,ye=ue.transactURL,he=ue.width,ge=ue.height,me=ue.cleanup,Oe=ue.welcomeStatus,we=ue.ready,Le=ue.renderCandidates,Se=de[1],je=h(),_e=Object(a.k)(pe),Ee=U(Object(a.l)(null),2),Ue=Ee[0],De=Ee[1],xe=U(Object(a.l)(!1),2),ke=xe[0],Me=xe[1];!(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enabled,r=void 0!==n&&n,i=t.ready;Object(f.a)({"admiral.sticky.webNotifications.userEnabled":e=>{var t=e.value;"undefined"!=typeof OneSignal&&OneSignal.push((()=>{OneSignal.setSubscription(t)}))},"admiral.sticky.webNotifications.showPrompt":()=>{"undefined"!=typeof OneSignal&&OneSignal.push((()=>{OneSignal.showSlidedownPrompt()}))}}),Object(a.d)((()=>{if(i&&e&&r&&"undefined"!=typeof OneSignal){var t=!1,n=n=>{t||e.contentWindow.postMessage(n,Object(b.a)(e.src))},a=setTimeout((()=>{n({type:"admiral.sticky.webNotifications.status",value:"timedOut"})}),5e3);return OneSignal.push(["getNotificationPermission",function(e){n({type:"admiral.sticky.webNotifications.status",value:"ready"}),n({type:"admiral.sticky.webNotifications.permission",value:e}),clearTimeout(a)}],["isPushNotificationsEnabled",function(e){n({type:"admiral.sticky.webNotifications.enabled",value:e})}]),OneSignal.push((()=>{OneSignal.on("subscriptionChange",(e=>{n({type:"admiral.sticky.webNotifications.enabled",value:e})}))})),OneSignal.push((()=>{OneSignal.on("notificationPermissionChange",(e=>{n({type:"admiral.sticky.webNotifications.permission",value:e.to})}))})),()=>{t=!0,clearTimeout(a)}}}),[e,i])})(be&&Ue,{enabled:!Z.includes("webNotifications"),ready:we});var Te=Object(o.a)(Object(c.a)("open"!==_e.current&&"open"===pe),Object(s.a)({27:()=>{Se({type:"SET_STATUS",value:"closed"})}})),Fe=Object(a.k)(null),Ae=Object(o.a)(Fe,Object(c.a)("open"===_e.current&&"closed"===pe)),Ie=(function(e,t){void 0===t&&(t=null);var n=u(!1),r=e.onClick||p;return d({role:"button",tabIndex:0},e,{onTouchStart:function(t){n.current=!0,null==e.onTouchStart||e.onTouchStart(t)},onMouseDown:function(t){n.current=!0,null==e.onMouseDown||e.onMouseDown(t)},onClick:function(e){n.current&&r(e),n.current=!1},ref:Object(o.a)(t,Object(s.a)({13:r,32:r}))})})({id:S.a.bubble,className:S.a[pe],"aria-expanded":String("open"===pe),"aria-haspopup":"true","aria-controls":S.a.menu,style:{color:"rgba(".concat(te,")"),backgroundColor:"rgba(".concat($,")")},onClick:()=>{be?He.current({type:"open"===pe?"admiral.sticky.requestClose":"admiral.sticky.requestOpen"}):Se({type:"SET_STATUS",value:"open"})}},Ae),He=Object(a.k)();He.current=e=>{Ue.contentWindow.postMessage(e,Object(b.a)(Ue.src))},Object(a.d)((()=>{_e.current=pe}),[pe]),Object(a.d)((()=>{Object(v.a)("get","sticky.web.url",(e=>{Se({type:"SET_MENU_URL",value:e||D})})),Object(v.a)("get","transact.url",(e=>{Se({type:"SET_TRANSACT_URL",value:e||M})}))}),[D,M]),Object(f.a)({"admiral.sticky.open":()=>{if(Se({type:"SET_STATUS",value:"open"}),!ke){var e=C.find((e=>"ccpa"===e.payloadType)),t=[];e&&t.push(e),B(t),Me(!0)}},"admiral.sticky.close":()=>Se({type:"SET_STATUS",value:"closed"}),"admiral.sticky.help":()=>T("".concat(ye,"faq")),"admiral.sticky.forgotPassword":()=>T("".concat(ye,"forgot-password")),"admiral.sticky.queue":e=>{var t=e.args;return Object(v.a)(...t)},"admiral.sticky.updateSize":e=>Se({type:"SET_SIZE",value:e}),"admiral.sticky.ready":()=>{He.current({type:"admiral.sticky.configure",payload:_(_({},L),{},{realmSessionID:I,propertyID:E,disabledFeatures:Z,propertyFiles:m,privacyPolicyURL:y,candidateID:n})}),Se({type:"READY"});var e=[],t=()=>He.current({type:"admiral.sticky.reloadUser"});Object(v.a)("after","transact.loggedIn",t),Object(v.a)("after","transact.loggedOut",t),Object(v.a)("after","transact.subscribe",t),e.push((()=>{Object(v.a)("removeEventListener","transact.loggedIn",t),Object(v.a)("removeEventListener","transact.loggedOut",t),Object(v.a)("removeEventListener","transact.subscribe",t)}));var r=C.find((e=>"ccpa"===e.payloadType));if(r){var i=e=>{var t=e.optedOut,n=e.applies;He.current({type:"admiral.sticky.ccpaLoaded",settings:_({optedOut:t,applies:n},r.payload||{})})};Object(v.a)("after","ccpa.loaded",i),e.push((()=>{Object(v.a)("removeEventListener","ccpa.loaded",i)}))}var a=e=>{var t=e.tcData,n=void 0===t?{}:t;He.current({type:"admiral.sticky.cmpLoaded",settings:{gdprApplies:!!n.gdprApplies}})};Object(v.a)("after","cmp.loaded",a),e.push((()=>{Object(v.a)("removeEventListener","cmp.loaded",a)})),Object(v.a)("after","usnat.loaded",(e=>{var t=e.applies;He.current({type:"admiral.sticky.usnat.loaded",settings:{usnatApplies:t}})})),Se({type:"CLEANUP_BEFORE_UNMOUNT",cleanup:e}),Object(v.a)("storageSet",{renderedStickyOnce:"true"})}},[pe,ke,L,m,I,y,ye,Z]),Object(a.d)((()=>{Object(v.a)("storageGet",(e=>{ce&&le&&!be&&!e.renderedStickyOnce&&Se({type:"SET_STATUS",value:"open"})}))}),[be,ce,le,n]),Object(a.d)((()=>{var e=()=>Se({type:"SET_STATUS",value:"open"});Object(v.a)("registerView","Sticky.menu",e),Object(v.a)("registerView","sticky.menu",e)}),[]),Object(a.d)((()=>{if(C.find((e=>"ccpa"===e.payloadType))){var e=()=>{Object(v.a)("registerView","ccpa.main",(()=>{Ue?(He.current({type:"admiral.sticky.requestOpen"}),He.current({type:"admiral.sticky.navigate",path:"ccpa"})):(Se({type:"SET_STATUS",value:"open"}),Se({type:"SET_LAZY_NAVIGATE",value:"ccpa"}))}))};return Object(v.a)("after","ccpa.loaded",e),()=>{Object(v.a)("removeEventListener","ccpa.loaded",e)}}}),[C,Ue]),Object(a.d)((()=>{be&&"open"===pe&&ve&&(He.current({type:"admiral.sticky.navigate",path:ve}),Se({type:"SET_LAZY_NAVIGATE",value:null}))}),[be,pe,ve]),Object(a.d)((()=>()=>{null==me||me.forEach((e=>e()))}),[me]),Object(a.h)((()=>{if(re){var e=!0,t=(function(e){var t=0,n=1e3/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:30);return function r(i){var a=Date.now();a-t>n?(t=a,e()):window.requestAnimationFrame(r)}})((()=>{e&&Se({type:"MAYBE_UNHIDE_BUBBLE",value:re})}),10);return window.addEventListener("scroll",t,!1),()=>{e=!1,window.removeEventListener("scroll",t,!1)}}}),[re]),Object(a.h)((()=>{var e=!1;["pushState","replaceState"].forEach((t=>{var n=history[t];history[t]=function(){var t=n.apply(this,arguments);return e||Se({type:"MAYBE_HIDE_BUBBLE",value:re}),t}}));var t=()=>{e||Se({type:"MAYBE_HIDE_BUBBLE",value:re})};return window.addEventListener("popstate",t),()=>{e=!0,window.removeEventListener("popstate",t)}}),[re]);var Ce=()=>{Object(v.a)("storageSet",{hasClosedStickyWelcomeTooltip:"true"}),Se({type:"SET_WELCOME_STATUS",value:"closed"})};Object(a.d)((()=>{Object(v.a)("storageGet",(e=>{ae&&"true"!==e.hasClosedStickyWelcomeTooltip&&Se({type:"SET_WELCOME_STATUS",value:"open"})}))}),[ae]),Object(a.d)((()=>{"open"===pe&&"open"===Oe&&Ce()}),[pe,Oe]),Object(a.d)((()=>{P((e=>{var t=e.candidate,n=e.templateCandidate;t||(t=n);try{He.current({type:"admiral.sticky.requestOpen"})}catch(e){Se({type:"SET_STATUS",value:"open"})}Se({type:"RENDER",value:[t]})}))}),[P]),Object(a.d)((()=>{be&&"open"===pe&&we&&Le&&(He.current({type:"admiral.sticky.render",candidates:{templateCandidates:Le,dataCandidates:C}}),Se({type:"RESET_RENDER"}))}),[be,pe,we,Le,C,E]);var Qe={};"hidden"===pe?(Qe.width="0px",Qe.height="0px"):ge&&(Qe.width=he+"px",Qe.height=ge+"px");var Be=m.filter((e=>"squareLogo"===e.type));return fe?Object(i.g)("div",{id:S.a.stickyContainer,className:"\n        ".concat(S.a[W],"\n        ").concat(S.a[V],"\n        ").concat(je?S.a.usingKeyboard:"","\n      "),style:{["margin-".concat(W)]:G,["margin-".concat(V)]:J}},"open"===Oe&&"hidden"!==pe&&Object(i.g)(F,{message:ae,onCloseClick:Ce,horizontalAlign:V,verticalAlign:W,bubbleBgColor:$,bubbleIconColor:te}),Object(i.g)("div",{id:S.a.menu,className:S.a[pe],"aria-hidden":String("open"!==pe),style:Qe,ref:Te,tabIndex:0},be&&Object(i.g)("iframe",{ref:De,src:fe,title:"Manage account, subscriptions, and privacy settings menu"})),Object(i.g)("div",Ie,Be.length>0?Object(i.g)("img",{id:S.a.propertyLogo,srcSet:"\n              https://".concat(Be.find((e=>"64"===e.name)).url," 1x,\n              https://").concat(Be.find((e=>"128"===e.name)).url," 2x\n            "),src:"https://".concat(Be.find((e=>"64"===e.name)).url),width:56,height:56,alt:"Logo"}):Object(i.g)(w,{width:44,height:44,id:S.a.admiralLogo}),Object(i.g)("div",{id:S.a.spinnerContainer},Object(i.g)("div",{id:S.a.spinner})),Object(i.g)("div",{id:S.a.closeIcon},Object(i.g)("div",null),Object(i.g)("div",null)))):null}},"Sticky2/index.less":function(e,t,n){var r=n("injectStylesIntoStyleTag"),i=n("!Sticky2/index.less");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},"buoy/hooks/useFocus":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("preact/compat"),i='input,select,textarea,a[href],button,[tabindex],audio[controls],video[controls],[contenteditable]:not([contenteditable="false"])',a="undefined"==typeof Element?()=>!1:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function o(e){return e.node}var c=e=>!(e.disabled||d(e)&&"hidden"===e.type||null===e.offsetParent||"hidden"===getComputedStyle(e).visibility),s=e=>{var t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?"true"===e.contentEditable?0:e.tabIndex:t},l=(e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex,d=e=>"INPUT"===e.tagName,u=e=>{if(!e.name)return!0;if(e.ownerDocument){for(var t=e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'),n=0;n<t.length;n++)if(t[n].checked)return t[n]===e;return!0}return!1},p=r.default,v=p.useRef,b=p.useEffect,f=p.useLayoutEffect,y=function(e,t){void 0===e&&(e=!1),void 0===t&&(t={});var n=v(null),r=function(){var r=n.current;if(r&&e){var d=(function(e){var t,n,r,d,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],v=[],b=[],f=e.querySelectorAll(i);for(p&&a.call(e,i)&&(f=Array.prototype.slice.apply(f)).unshift(e),t=0;t<f.length;t++)n=f[t],!(!c(d=n)||"INPUT"===d.tagName&&"radio"===d.type&&!u(d)||s(d)<0)&&(0===(r=s(n))?v.push(n):b.push({documentOrder:t,tabIndex:r,node:n}));return b.sort(l).map(o).concat(v)})(r,!0);d.length>0&&d[0].focus({preventScroll:t.preventScroll})}},d=v(r);function p(e){e.target===n.current&&d.current()}return d.current=r,b((function(){d.current()}),[e]),f((function(){var e=n.current;if(e){var t=p;return e.addEventListener("transitionend",t),function(){return e.removeEventListener("transitionend",t)}}}),[]),n}},"buoy/hooks/useKeycodes":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("preact/compat"),i=r.default.useLayoutEffect,a=r.default.useRef,o=function(e){var t=a(null),n=a(e);function r(e){null==n.current[e.which]||n.current[e.which](e)}return n.current=e,i((function(){var e=t.current;if(e){var n=r;return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}}),[]),t}},"buoy/hooks/useMergeRefs":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("preact/compat").default.useCallback,i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r((function(e){t.forEach((function(t){return a(t,e)}))}),t)},a=function(e,t){"function"==typeof e?e(t):e&&"object"==typeof e&&(e.current=t)}},"components/DangerZone.tsx":function(e,t,n){"use strict";var r=n("preact");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=e=>{var t=e.setDangerously,n=e.children,i=e.content;return t?Object(r.g)(n.type,a(a({},n.props),{},{dangerouslySetInnerHTML:{__html:i}})):Object(r.g)(n.type,n.props,i)}},getOrigin:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=null,i=(function(){var e=window.URL||window.webkitURL,t=null;if(e&&"function"==typeof e){t=function(t){return new e(t,window.location)};try{t("/")}catch(e){t=null}}return t})(),a=window.location;function o(e){var t="";return(function(e,t){if(i)t(i(e));else{r||(r=document.createElement("div")),r.innerHTML="<a></a>";var n=r.firstChild;n.href=e,t(n),r.innerHTML=""}})(e,(n=>{if("null"===(t=n.origin||""))t="";else if(!t&&("http"===e.substr(0,4)||"/"===e.substr(0,1))){var r=n.protocol;n.protocol&&":"!==n.protocol||(r=a.protocol);var i=n.host||a.host;("https:"===r&&":443"===i.substr(i.length-4)||"http:"===r&&":80"===i.substr(i.length-3))&&(i=n.hostname||a.hostname),t=r+"//"+i}})),t}},"hooks/useStickyMessages":function(e,t,n){"use strict";var r=n("preact/hooks");t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(r.h)((()=>{var t=t=>{var n,r=t.origin,i=t.data;r&&/https:\/\/(?:[a-z.0-9A-Z-]+\.)?my.getadmiral.com$/.test(r)&&(null===(n=e[null==i?void 0:i.type])||void 0===n||n.call(e,i))};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}),t)}}}]);