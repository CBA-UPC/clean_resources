(;align-itar("MSIE ")||0<=a.indexOf("Trident/")&&0<=a.indexOf("Windows NT 6")?!0:!1Delay||(a.maxDelay=250);var f=0,.substr":e="lon";break;case"resolution":e="s";break;case"colorDepth":ep);if(m)for(k=g.split(","),g="",f=0;f<k.length;f++)l=k[f],h=l.indexOf("="),0<=h&&(l=l.substring(0,h)),h=l.indexOf(":"),0<=h&&(l=l.substring(0,h)),0<=m.indexOf(","+l+",")&&(g+=(g?",":"")+k[f]);break;case"events2":g="";break;case"contextData":c+=a.o("c",a[e],n,e);g="";break;case"lightProfileID":e="mtp";break;case"lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case"lightIncrementBy":e="mti";a.lightProfileID||(g="");break;case"retrieveLightProfiles":e="mtsr";break;case"deleteLightProfiles":e="mtsd";break;case"retrieveLightData":a.retrieveLightProfiles&&(c+=a.o("mts",a[e],n,e));g="";break;default:a.Ra(k)&&("prop"==f?e="c"+k:"eVar"==f?e="v"+k:"list"==f?e="l"+k:"hier"==f&&(e="h"+k,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}a.ka&&(c+="&lrt="+a.ka,a.ka=null);return c};a.B=function(a){var b=a.tagName;if("undefined"!=""+a.lc||"undefined"!=""+a.Zb&&"HTML"!=(""+a.Zb).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.Na=function(a){var b=h.location,d=a.href?a.href:"",f,e,g;f=d.indexOf(":");e=d.indexOf("?");g=d.indexOf("/");d&&(0>f||0<=e&&f>e||0<=g&&f>g)&&(e=a.protocol&&1<a.protocol.length?a.protocol:b.protocol?b.protocol:"",f=b.pathname.lastIndexOf("/"),d=(e?e+"//":"")+(a.host?a.host:b.host?b.host:"")+("/"!=d.substring(0,1)?b.pathname.substring(0,0>f?0:f)+"/":"")+d);return d};a.L=function(c){var b=a.B(c),d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):"IMAGE"==b&&c.src&&(e=c.src):e=a.Na(c),e)?{id:e.substring(0,100),type:g}:0};a.jc=function(c){for(var b=a.B(c),d=a.L(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=a.B(c),d=a.L(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0);return c};a.Yb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,k;a.ma=1;d||(a.ma=0,d=a.clickObject);if(d){c=a.B(d);for(b=a.L(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.B(d),b=a.L(d);b&&"BODY"!=c||(d=0);if(d&&!a.linkObject){var l=d.onclick?""+d.onclick:"";if(0<=l.indexOf(".tl(")||0<=l.indexOf(".trackLink("))d=0}}else a.ma=1;!e&&d&&(e=a.Na(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var m=0,n=0,p;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(l=e.toLowerCase(),g=l.indexOf("?"),k=l.indexOf("#"),0<=g?0<=k&&k<g&&(g=k):g=k,0<=g&&(l=l.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),k=0;k<g.length;k++)(p=g[k])&&l.substring(l.length-(p.length+1))=="."+p&&(f="d");if(a.trackExternalLinks&&!f&&(l=e.toLowerCase(),a.Qa(l)&&(a.linkInternalFilters||(a.linkInternalFilters=h.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),m=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(k=0;k<g.length;k++)p=g[k],0<=l.indexOf(p)&&(n=1);n?m&&(f="e"):m||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),h.s_objectID&&(b.id=h.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substrifor(k=0;k<g.length;k++)l=g[k].s};for(h in a.cona.account&&||(d=1);if(d){e="";k=2;!c&&a.e&&(e=a.escape(f.a.w.innerWidth:t){}a.resolut)a[c+"_onLo]=b,a.fa(c+"_onLoad",.random()),b=a.visitorSampling==e&&"purchaseID"!==&"bodyClic;if(a&&255<a.length&&(,ie,start,search_kebstring(0,d+(0<d?g.substrisibilityState);if(b&&"prerender"==b){if(c)f.d.webkitVisibilityStBlob=c.MCAa.isReadyTbe.optIn:null};a.Y=!0;a.qb=function(){var c=a.T();if(!c||!c.getVisitorValues)rec[b];a.callbackEF".substrintion(c,b){b&Data.excCodes?a.conID=a.pe=a.pev1d]);"function"e.unshift(b);if("ckTarget=c,a.bodyC://"+c+"/b/ss/"+.i.shift()};a.Xb=fuation);d=d?d:"&";if(!c||!b)return g;b=""+b;e=b.indexOf("?");if(0>e)return g;b=d+b.substring(e+1)+d;if(!f||!(0<=b.indexOf(d+c+d)||0<=b.indexOf(d+c+"="+d))){e=b.indexOf("#");0<=e&&(b=b.substr(0,e)+d);e=b.indNamespace cookieDomrnalLinks trackClickMap trlf"==d||"_top"==d||"_parent"==d||h.name&&d==h.name))){try{b=a.d.createEvent("MouseEvents")}catch(l){b=new h.MouseEvent}if(b){try{b.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(m){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.bodyClickTarget=c.target,a.J=b)}}}}}catch(n){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.r):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&h.MouseEvent)&&(a.Ia=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.r,!0)),a.b.addEventListener("click",a.r,!1))):setTimeout(a.Xa,30)};a.fc=a.ya();a.Kb();a.mc||(r?a.setAccount(r):a.C("Error, missing Report Suite ID in AppMeasurement initialization"),a.Xa(),a.loadModule("ActivityMap"))}function s_gi(r){var a,h=window.s_c_il,q,p,m=r.split(","),s,u,t=0;if(h)for(q=0;!t&&q<h.length;){a=h[q];if("s_c"==a._c&&(a.account||a.oun))if(a.account&&a.account==r)t=1;else for(p=a.account?a.account:a.oun,p=a.allAccounts?a.allAccounts:p.split(","),s=0;s<m.length;s++)for(u=0;u<p.length;u++)m[s]==p[u]&&(t=1);q++}t?a.setAccount&&a.setAccount(r):a=new AppMeasurement(r);return a}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);function s_pgicq(){var r=window,a=r.s_giq,h,q,p;if(a)for(h=0;h<a.length;h++)q=a[h],p=s_ainerName);r.s_giq=0}s_pgicq();var CryptoJS=CryptoJS||function(h,s){var f={},t=f.lib={},g=function(){},j=t.Base={extend:function(a){g.prototype=this;var c=new g;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},q=t.WordArray=j.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=s?c:4*a.length},toString:function(a){return(a||u).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;a=a.sigBytes;this.clamp();if(b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((b+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=h.ceil(c/4)},clone:function(){var a=j.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new q.init(c,a)}}),v=f.enc={},u=v.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-8*(b%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,2),16)<<24-4*(b%8);return new q.init(d,c/2)}},k=v.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-8*(b%4)&255));return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(a.charCodeAt(b)&255)<<24-8*(b%4);return new q.init(d,c)}},l=v.Utf8={stringify:function(a){try{return decodeURIComponent(escape(k.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data")}},parse:function(a){return k.parse(unescape(encodeURIComponent(a)))}},x=t.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(a){"stri((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&j^~p&k)+q[n]+a[n];g=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&m^f&m);l=k;k=j;j=p;p=h+r|0;h=m;m=f;f=e;e=r+g|0}b[0]=b[0]+e|0;b[1]=b[1]+f|0;b[2]=b[2]+m|0;b[3]=b[3]+h|0;b[4]=b[4]+p|0;b[5]=b[5]+j|0;b[6]=b[6]+k|0;b[7]=b[7]+4C98A6@AdobeOretWindowEnv==="function"?aws_sc.getWindowEnv():window;aws_sc.cookieNames=["awsd2c-token","awsd2c-token-c","s_campaign","s_cc","s_depth","s_dslv","s_dslv_s","s_eVar60","s_fid","s_sq","s_vi","s_ecid","AMCV_"+aws_sc.marketingCloudOrgID,"AMCVS_"+aws_sc.marketingCloudOrgID,"demdex","dextp","dst","dp"];aws_sc.consentStatusVar="eVar69";aws_sc.vidVar="eVar160";aws_sc.vidErrorNameVar="eVar161";aws_sc.vidErrorMsgVar="eVar163";aws_sc.vidTypeVar="eVar164";aws_sc.vidTimeVar="eVar162";aws_sc.defaultLinkVars=[aws_sc.consentStatusVar,aws_sc.vidVar].join(",")+",prop12,prop29,prop39,prop41,prop50,prop61,prop62,eVar12,eVar23,eVar28,eVar29,eVar33,eVar39,eVar41,eVar45,eVar50,eVar61,eVar62";aws_sc.reportSuites={DEV:"awsamazonalldev2",PROD:"awsamazonallprod1,awsamazonallprodcopy1,awsamazonallprodcopy2"amazon.com","protectconnect.com","quicksight.aws","qwiklab.com","qwiklabs.com","reinvent.awsevents.cn","reinvent.awslivestream.com","remars.amazonevents.com","repost.aws","ruby.awsblog.com","sagemaker.readthedocs.io","sagemaker-examples.readthedocs.io","sagemaker-jumpstart-industry-pack.readthedocs.io","sesblog.amazon.com","skillbuilder.aws","smithy.io","startups.aws",")|ckDownloadLinks=true;tracker.trackExternalLinks=true;tracker.trackInlineStats=true;tracker.linkDownloadFileTypescker.linkInternalNone";tracker.useForcedefPath.split("/")[0];if(domain[0]}returnl"}return stres=["ar","en","es","de","fr","id","it","jp","ko","pt","ru","th","tr","vi","cn","tw"];for(var i=0;iturn"en"},isValidUrl:function(str){if(/^http(s)?:\/\/([\w\d]+\.\S)*([\w\d\S])*$/.test(str)){return true}return false},isReadyForVid:function(hostname){var domains=aws_sc.noVidDomains.filter(function(domain){return hostname.endsWith(domain)});return domains.length===0}};aws_sc.CookieUtils={getCookieDomainPeriods:function(hostname){if(aws_sc.customCookieDomains.indexOf(hostname)>-1){return"3"}return"2"},getCookieWriteDomain:function(hostname){var customDomains=["amazonaws.cn"];var domain=hostname||"aws.amazon.com";var dparts=domain.split(".");while(dparts.length>2){dparts.shift()}var domainStr=dparts.join(".");return"."+(customDomains.indexOf(domainStr)>-1?domainStr:"amazon.com")},getCookie:function(cn){if(aws_sc.CookieConsent.hasConsent(cn)){var v=document.cookie.split(cn+"=")[1];if(v){v=decodeURIComponent(v.split(";")[0])}if(v&&v.length>0){return v}}return null},setCookie:function(cookie,value,expireDays,isSecure){if(aws_sc.CookieConsent.hasConsent(cookie)){var secure=isSecure||false;var expire=expireDays||0;var cookieVal=cookie+"="+value+"; domain="+aws_sc.CookieUtils.getCookieWriteDomain(aws_sc.window.location.hostname)+"; path=/";if(expire>0){var date=new Date;date.setTime(date.getTime()+expire*24*3600*1e3);var expirationDate="expires="+date.toUTCString();cookieVal+="; "+expirationDate}if(secure){cookieVal+="; secure"}document.cookie=cookieVal}}};aws_sc.setCookie=aws_sc.CookieUtils.setCookie;aws_sc.VarsUtils={setStaticVars:function(tracker){tracker.prop71=navigator.userAgent;tracker.eVar71=tracker.prop71||"";tracker.prop50="D=s_vi";tracker.eVar50=tracker.prop50;tracker.prop11=aws_sc.awsSCVersion;if(aws_sc.isFromConsole){tracker.eVar2=aws_sc.PathUtils.getDocumentReferrer(aws_sc.window.document.referrer,aws_sc.awsPublicDomains)}if(!aws_sc.initialized){aws_sc.VarsUtils.setReferrer(tracker)}if(aws_sc.isDocsPage){if(awsdocs.prop66){tracker.prop66=awsdocs.prop66;tracker.eVar66="D=c66"}if(awsdocs.prop65){tracker.prop65=awsdocs.prop65;tracker.eVar65="D=c65"}}if(aws_sc.isBlogsPage){tracker.eVar97=AWS.PageSettings.blogPageTitle;tracker.prop97=tracker.eVar97}},setDynamicVars:function(tracker,consentStatus,vid){tracker[aws_sc.consentStatusVar]=consentStatus;tracker.eVar23=tracker.visitor?tracker.visitor.getMarketingCloudVisitorID():"";tracker.eVar33=tracker.visitor?tracker.visitor.getAnalyticsVisitorID():"";tracker[aws_sc.vidVar]=vid},setPageVars:function(tracker,location){tracker.pageURL=aws_sc.PathUtils.getPageURL(tracker.pageURL||aws_sc.window.location.href);tracker.eVar61=tracker.eVar61||tracker.pageURL.toLowerCase();if(tracker.eVar61!==tracker.pageURL.toLowerCase()){tracker.eVar61=tracker.pageURL.toLowerCase()}tracker.prop61=tracker.prop61||tracker.eVar61;tracker.prop39=tracker.prop39||aws_sc.PathUtils.cleanPath(tracker.pageURL);tracker.eVar39=tracker.eVar39||tracker.prop39;tracker.pageName=tracker.pageName||aws_sc.PathUtils.cleanNonLocalizedPath(tracker.pageURL,aws_sc.isRegistration).toLowerCase();tracker.eVar80=tracker.pageName;if(!aws_sc.pageviewTracked&&aws_sc.VarsUtils.needCustomReferrer(tracker.pageURL,aws_sc.window.location.href,aws_sc.window.document.referrer)){aws_sc.VarsUtils.setReferrer(tracker,tracker.pageURL)}tracker.pageType=tracker.pageType||AWSMA.config.pageType||"";if(aws_sc.isRegistration){tracker.prop41=aws_sc.CookieUtils.getCookie("aws_sup_lang")||"en"}else{tracker.prop41=aws_sc.PathUtils.getLocCodeFromPath(location.href)}tracker.eVar41=tracker.prop41;if(aws_sc.eVar85){tracker.eVar85=aws_sc.eVar85}if(aws_sc.events){tracker.events=aws_sc.AnalyticsUtils.appendToList(aws_sc.events,tracker.events)}},setReferrer:function(tracker,customReferrer){tracker.referrer=customReferrer||aws_sc.PathUtils.getDocumentReferrer(aws_sc.window.document.referrer,aws_sc.awsPublicDomains);tracker.eVar82=tracker.referrer},needCustomReferrer:function(pageURL,locationURL,referrer){if(pageURL===locationURL||!referrer){return false}if(decodeURIComponent(locationURL).indexOf(decodeURIComponent(referrer))===0){return true}return false},setCustomVars:function(tracker,opt){if(!aws_sc.ObjectUtils.isObject(opt)){return}if(aws_sc.ObjectUtils.isObject(opt.page)){Object.keys(opt.page).forEach(function(k){tracker[k]=opt.page[k]})}tracker.contextData={};tracker.contextData=aws_sc.ObjectUtils.getFlattenedObj(opt.event,tracker.contextData,"event.");if(aws_sc.ObjectUtils.isObject(opt.data)){tracker.contextData=aws_sc.ObjectUtils.getFlattenedObj(opt.data,tracker.contextData)}if(aws_sc.isRegistration){tracker.events=opt.events||tracker.events||""}},getVarsToPass:function(tracker){if(!tracker.contextData){return tracker.defaultLinkVars}var strVars=Object.keys(tracker.contextData).map(function(k){return"contextData."+k}).join(",");return aws_sc.AnalyticsUtils.appendToList(strVars,tracker.defaultLinkVars)},getCookieConsent:function(consent){return{e:consent&&consent.essential||true,f:consent&&consent.functional||false,p:consent&&consent.performance||false,a:consent&&consent.advertising||false}},setDataLayerProps:function(tracker){var eventData={event:{type:"dlPageview",name:"Data layer pageview"},data:{pageURL:tracker.pageURL,pageName:tracker.pageName,pageType:tracker.pageType,pageLocale:document.documentElement.lang,browserViewPortHeight:window.innerHeight,browserViewPortWidth:window.innerWidth,browserColorDepth:window.screen.colorDepth,cookieConsent:aws_sc.VarsUtils.getCookieConsent(aws_sc.CookieConsent._shortbread.getConsentCookie()),visitorId:aws_sc.vid,regStatus:aws_sc.registrationStatus,eventType:"pageview",eventName:"Data layer pageview",pageReferrer:tracker.referrer||"",eventTimestamp:Date.now()}};aws_sc.VarsUtils.setCustomVars(tracker,eventData);tracker.linkTrackVars=aws_sc.VarsUtils.getVarsToPass(tracker)},setCampaignVars:function(s){if(s.Util.getQueryParam("sc_channel")){s.campaign=aws_sc.AnalyticsUtils.getConcatQueryParams(s,["sc_channel","sc_campaign","sc_publisher","sc_medium","sc_content","sc_detail","sc_segment","sc_category","sc_place","sc_keyword","sc_brand","sc_outcome","sc_matchtype","sc_country","sc_geo","trk"],"|");s.campaign=aws_sc.AnalyticsUtils.getValOnce(s,s.campaign,"s_campaign",0);s.eVar45=s.Util.getQueryParam("sc_channel");if(s.eVar45)s.prop45=s.eVar45;if(s.campaign&&s.campaign.length>0){s.prop63=s.campaign;s.eVar32=s.Util.getQueryParam("sc_geo");if(s.eVar32)s.prop32=s.eVar32;s.eVar51=s.Util.getQueryParam("sc_campaign");if(s.eVar51)s.prop51=s.eVar51;s.eVar52=s.Util.getQueryParam("sc_publisher");if(s.eVar52)s.prop52=s.eVar52;s.eVar53=s.Util.getQueryParam("sc_medium");if(s.eVar53)s.prop53=s.eVar53;s.eVar54=s.Util.getQueryParam("sc_content");if(s.eVar54)s.prop54=s.eVar54;s.eVar55=s.Util.getQueryParam("sc_detail");if(s.eVar55)s.prop55=s.eVar55;s.eVar20=s.Util.getQueryParam("sc_segment");if(s.eVar20)s.prop20=s.eVar20;s.eVar21=s.Util.getQueryParam("sc_category");if(s.eVar21)s.prop21=s.eVar21;s.eVar36=s.Util.getQueryParam("sc_brand");if(s.eVar36)s.prop36=s.eVar36;s.eVar37=s.Util.getQueryParam("sc_matchtype");if(s.eVar37)s.prop37=s.eVar37;s.eVar38=s.Util.getQueryParam("sc_country");if(s.eVar38)s.prop38=s.eVar38;s.eVar34=s.Util.getQueryParam("sc_outcome");if(s.eVar34)s.prop31=s.eVar34;s.eVar5=s.Util.getQueryParam("trk");if(s.eVar5)s.prop30=s.eVar5}}if(!s.campaign){s.eVar60=aws_sc.AnalyticsUtils.getConcatQueryParams(s,["sc_ichannel","sc_icampaign","sc_icontent","sc_iplace","sc_idetail","sc_ipage","sc_isegment","sc_icountry","sc_iproduct","sc_icategory","sc_icampaigntype","trk"],"|");s.eVar60=aws_sc.AnalyticsUtils.getValOnce(s,s.eVar60,"s_eVar60",0)}if(s.eVar60){s.prop60=s.eVar60;s.eVar24=s.Util.getQueryParam("sc_ichannel");if(s.eVar24)s.prop24=s.eVar24;s.eVar56=s.Util.getQueryParam("sc_icampaign");if(s.eVar56)s.prop56=s.eVar56;s.eVar57=s.Util.getQueryParam("sc_icontent");if(s.eVar57)s.prop57=s.eVar57;s.eVar58=s.Util.getQueryParam("sc_iplace");if(s.eVar58)s.prop58=s.eVar58;s.eVar59=s.Util.getQueryParam("sc_idetail");if(s.eVar59)s.prop59=s.eVar59;s.eVar14=s.Util.getQueryParam("sc_ipage");if(s.eVar14)s.prop14=s.eVar14;s.eVar15=s.Util.getQueryParam("sc_isegment");if(s.eVar15)s.prop15=s.eVar15;s.eVar16=s.Util.getQueryParam("sc_icountry");if(s.eVar16)s.prop16=s.eVar16;s.eVar17=s.Util.getQueryParam("sc_iproduct");if(s.eVar17)s.prop17=s.eVar17;s.eVar18=s.Util.getQueryParam("sc_icategory");if(s.eVar18)s.prop18=s.eVar18;s.eVar19=s.Util.getQueryParam("sc_icampaigntype");if(s.eVar19)s.prop19=s.eVar19;s.eVar5=s.Util.getQueryParam("trk");if(s.eVar5)s.prop30=s.eVar5}}};aws_sc.EventUtils=function(){var eventsTriggered=[];var sequence={};var curPageURL="";var vidEventCount=0;function triggerCustomEvent(evt){var e;if(typeof window.CustomEvent==="function"){e=new CustomEvent(evt)}else{e=document.createEvent("CustomEvent");e.initCustomEvent(evt,false,false,null)}document.dispatchEvent(e)}function ready(callback,statusVar){var varName=statusVar||"initialized";if(aws_sc[varName]){callback()}else{if(!sequence[varName]){sequence[varName]=[]}sequence[varName].push(callback)}}function invokeReady(statusVar){if(!sequence[statusVar]){return}if(aws_sc[statusVar]){while(sequence[statusVar].length){var callback=sequence[statusVar].shift();if(callback){callback()}}}}function callPageview(tracker,opt,vidUtils){if(aws_sc.ObjectUtils.isObject(opt)){if(!opt.page||!opt.page.pageURL){throw new Error("AWSMA: The pageview call event detail must includes the pageURL.")}if(opt.page.pageURL===curPageURL){throw new Error("AWSMA: The pageview call cannot be made with the pageURL identical with the current page URL.")}if(!aws_sc.PathUtils.isValidUrl(opt.page.pageURL)){throw new Error("AWSMA: The pageURL should be a valid URL including the protocol (http: or https:).")}if(opt.page.pageName&&!aws_sc.isRegistration){throw new Error("AWSMA: The pageName cannot be overriden.")}curPageURL=opt.page.pageURL}tracker.clearVars();aws_sc.ObjectUtils.removeKeys(tracker,"pageName");if(vidUtils){vidEventCount=0;if(!vidUtils.hasValidVid()&&aws_sc.consentStatus==="cookie"){vidUtils.getAWSVid({mid:s.visitor.getMarketingCloudVisitorID(),aid:s.visitor.getAnalyticsVisitorID()},function(vidType,e){triggerPageview();triggerVidEvent(vidType,e)})}else{triggerPageview();triggerVidEvent("existing")}}else{triggerPageview()}function triggerPageview(){aws_sc.VarsUtils.setStaticVars(tracker);aws_sc.VarsUtils.setCustomVars(tracker,opt);tracker.linkTrackVars=aws_sc.VarsUtils.getVarsToPass(tracker);tracker.t();aws_sc.ObjectUtils.removeKeys(tracker.contextData);AWSMA.eventsTriggered.push(opt);if(!aws_sc.pageviewTracked){aws_sc.pageviewTracked=true;aws_sc.EventUtils.invokeReady("pageviewTracked");aws_sc.EventUtils.triggerCustomEvent("custom_aws_s_code-loaded")}}}function callEventTrack(tracker,opt){if(opt.page){throw new Error("AWSMA: The event call cannot pass custom page variables.")}ready(function(){var LINK_TYPE="o";aws_sc.VarsUtils.setCustomVars(tracker,opt);tracker.linkTrackVars=aws_sc.VarsUtils.getVarsToPass(s);tracker.tl(tracker,LINK_TYPE,opt.event.name);aws_sc.ObjectUtils.removeKeys(tracker.contextData);AWSMA.eventsTriggered.push(opt)},"pageviewTracked")}function triggerEventHandler(tracker,detail,vidUtils){if(!detail||!detail.event||!detail.event.name||!detail.event.type){throw new Error("AWSMA: The event detail must includes the event name and type.")}if(detail.event.type==="pageview"){callPageview(tracker,detail,vidUtils)}else{callEventTrack(tracker,detail)}}function triggerVidEvent(vidType,error){s[aws_sc.vidVar]=aws_sc.vid||"default";ready(function(){if(vidEventCount>0){return}var timeFromPageview="before pageview";if(aws_sc.pageviewTimestamp){timeFromPageview=Date.now()-aws_sc.pageviewTimestamp}vidEventCount++;s[aws_sc.vidTimeVar]=timeFromPageview;s[aws_sc.vidTypeVar]=vidType;s.events="event160";s.linkTrackEvents=s.events;s.linkTrackVars=[aws_sc.vidVar,aws_sc.vidTimeVar,aws_sc.vidTypeVar].join(",")+","+s.defaultLinkVars;if(error){s[aws_sc.vidErrorNameVar]=error.name;s[aws_sc.vidErrorMsgVar]=error.message;s.linkTrackVars+=","+[aws_sc.vidErrorNameVar,aws_sc.vidErrorMsgVar].join(",")}s.tl(s,"o","vidTest");s.linkTrackVars=s.defaultLinkVars;s.clearVars()},"pageviewTracked")}function isPageViewEvent(tracker){return tracker.eVar78!=="video"&&(tracker.linkType===undefined||tracker.linkType===0)}return{eventsTriggered:eventsTriggered,triggerEventHandler:triggerEventHandler,triggerCustomEvent:triggerCustomEvent,invokeReady:invokeReady,ready:ready,triggerVidEvent:triggerVidEvent,isPageViewEvent:isPageViewEvent}}();AWSMA.ready=aws_sc.EventUtils.ready;AWSMA.TRIGGER_EVENT="custom_awsma_trigger";AWSMA.eventsTriggered=aws_sc.EventUtils.eventsTriggered;aws_sc.ready=aws_sc.EventUtils.ready;aws_sc.SearchUtils={initSearch:function(tracker,data){var internalSearchQuery=data.query;var internalSearchCount=data.numSearchResults;var internalSearchSource=location.hostname.substring(0,location.hostname.indexOf("."));var internalSearchTerm=internalSearchQuery+"|"+internalSearchSource+"|"+data.language+"|"+data.facet+"|"+data.product+"|"+data.guide;tracker.eVar26="";tracker.eVar27="";if(internalSearchQuery){var eventName=internalSearchCount===0?"event2":"event1";tracker.eVar26=internalSearchTerm;tracker.eVar27=internalSearchCount.toString();tracker.events=aws_sc.AnalyticsUtils.appendToList(eventName,tracker.events);tracker.linkTrackEvents=aws_sc.AnalyticsUtils.appendToList(eventName,tracker.linkTrackEvents)}tracker.prop26=tracker.eVar26;tracker.prop27=tracker.eVar27;tracker.linkTrackVars=tracker.defaultLinkVars+",events,prop26,eVar26,prop27,eVar27";tracker.tl(this,"o","Internal Search Call");tracker.linkTrackVars="None";tracker.linkTrackEvents="None"},attachSearchEvents:function(tracker){if(typeof jQuery!=="undefined"){if(jQuery.fn.on){jQuery(document).on("custom_aws_search_after-display-results","#aws-search-result, #withScriptBody",function(e,data){aws_sc.SearchUtils.initSearch(tracker,data)})}else if(jQuery.fn.bind){jQuery("#withScriptBody").bind("custom_aws_search_after-display-results",function(e,data){aws_sc.SearchUtils.initSearch(tracker,data)})}}}};(function(){"use strict";function init(vidUtils){function setVisitor(){if(s.visitor){return}s.visitor=Visitor.getInstance(aws_sc.marketingCloudOrgID,{trackingServerSecure:aws_sc.trackingServer});if(vidUtils){s.visitor.getVisitorValues(function(value){vidUtils.initVidClient();if(vidUtils.hasValidVid()){var token=vidUtils.getVisitorToken();vidUtils.setVisitorId(token.vid);aws_sc.EventUtils.triggerVidEvent("existing")}else if(!AWSMA.config.customPageview){vidUtils.getAWSVid({mid:value.MCMID,aid:value.MCAID},aws_sc.EventUtils.triggerVidEvent)}});invokeInitialize()}}function unsetVisitor(){s.visitor=null;if(vidUtils){vidUtils.setVisitorId("no user consent")}}function invokeInitialize(){aws_sc.initialized=true;aws_sc.EventUtils.invokeReady("initialized")}function resetConsentStatus(allowSCookies){aws_sc.consentStatus=allowSCookies?"cookie":"no-cookie";s.cookieLifetime=aws_sc.consentStatus==="cookie"?"31536000":"NONE"}function initAnalytics(allowSCookies){if(aws_sc.initialized){return}resetConsentStatus(allowSCookies);s.doPlugins=aws_sc.s_doPlugins;AWSMA.ready(triggerDefaultPageview,"initialized");if(allowSCookies){setVisitor()}else{unsetVisitor()}if(!vidUtils||!allowSCookies){invokeInitialize()}if(vidUtils&&!allowSCookies){aws_sc.EventUtils.triggerVidEvent()}}function triggerDefaultPageview(){aws_sc.pageviewTimestamp=Date.now();if(!aws_sc.isRegistration&&!AWSMA.config.customPageview){s.t();aws_sc.pageviewTracked=true;aws_sc.EventUtils.invokeReady("pageviewTracked");aws_sc.EventUtils.triggerCustomEvent("custom_aws_s_code-loaded")}}aws_sc.VarsUtils.setStaticVars(s);s.linkTrackVars=aws_sc.VarsUtils.getVarsToPass(s);if(aws_sc.CookieConsent.isConsentSet()){initAnalytics(aws_sc.CookieConsent.hasConsent(aws_sc.cookieNames))}else if(aws_sc.regionStatus){initAnalytics(aws_sc.regionStatus!=="EU"&&aws_sc.CookieConsent.isConsentSet())}else{document.addEventListener("custom_cookie_consent-region-ready",function(e){var allowSCookies=false;if(e.detail&&e.detail.region){allowSCookies=e.detail.region!=="EU"}if(!aws_sc.CookieConsent.isConsentSet()){allowSCookies=false}initAnalytics(allowSCookies)})}aws_sc.CookieConsent.access(aws_sc.cookieNames,function(){resetConsentStatus(true);if(aws_sc.initialized){setVisitor()}},function(){resetConsentStatus(false);unsetVisitor()});document.addEventListener(AWSMA.TRIGGER_EVENT,function(e){aws_sc.EventUtils.triggerEventHandler(s,e.detail,vidUtils)},false)}function sCodeReg(vidUtils){aws_sc.isRegistration=true;aws_sc.regPages={"#/start":{pageName:"Reg Start",regStatus:"registering",events:"event74,event98:"},"#/start/email":{pageName:"Reg Start",regStatus:"registering",events:"event74,event98:"},"#/start/otp":{pageName:"Verification Code",regStatus:"registering",events:"event67,event90:"},"#/start/password":{pageName:"Create Password",regStatus:"registering",events:"event68,event91:"},"#/account":{pageName:"Signup",regStatus:"registering",events:"event62,event92:",businessEvents:"event58,event99:"},"#/paymentinformation":{pageName:"Payment Information",regStatus:"registering",events:"event63,event93:",passAccoountID:true},"#/identityverification":{pageName:"Identity Verification",regStatus:"registering",events:"event64,event94:",passAccoountID:true},"#/support":{pageName:"Support",regStatus:"registering",events:"event73,event95:",passAccoountID:true},"#/confirmation":{pageName:"Registration Confirmation",regStatus:"registered",events:"event65,event96:",businessEvents:"event59,event100:",passAccoountID:true},"#/resubscribed":{pageName:"Subscription Confirmation",regStatus:"registered",events:"event66,event97:",passAccoountID:true}};var s_reportSuite=aws_sc.AnalyticsUtils.getReportSuite(aws_sc.window.location.hostname,aws_sc.env);window.s=s_gi(s_reportSuite);aws_sc.AnalyticsUtils.setAnalyticsVariables(s,aws_sc.window.location.hostname);s.defaultLinkVars=aws_sc.defaultLinkVars;aws_sc.setRegPageVars=function(isEnterprise){var pages=Object.keys(aws_sc.regPages).filter(function(key){return aws_sc.window.location.hash===key});if(pages.length===0){return}var page=aws_sc.regPages[pages[0]];s.pageName=page.pageName;s.events=page.events+aws_sc.customerID;isEnterprise&&page.businessEvents&&(s.events+=page.businessEvents+aws_sc.customerID);s.eVar62=page.regStatus;if(page.passAccoountID){s.prop1=aws_sc.accountID}if(page.pageName==="Support"){aws_sc.CookieUtils.setCookie("aws-reg-aid",aws_sc.accountID,0,true);aws_sc.CookieUtils.setCookie("aws-reg-guid",aws_sc.accountID,0,true)}s.pageURL=aws_sc.PathUtils.getPageURL(aws_sc.window.location.href);s.prop61=s.pageURL.toLowerCase();s.eVar61=s.prop61};s.registerPostTrackCallback(function(requestUrl){if(aws_sc.requestUrl!==requestUrl&&requestUrl.indexOf("&pe=")===-1){aws_sc.pageviewTracked=true;aws_sc.EventUtils.invokeReady("pageviewTracked");aws_sc.requestUrl=requestUrl}});aws_sc.s_doPlugins=function(){s.plugins="";aws_sc.VarsUtils.setDynamicVars(s,aws_sc.consentStatus,aws_sc.vid);aws_sc.VarsUtils.setPageVars(s,aws_sc.window.location);var aidEl=document.getElementById("accountId");if(aidEl&&aidEl.value){aws_sc.accountID=CryptoJS.SHA256(aidEl.value);s.prop1=aws_sc.accountID}var cidEl=document.getElementById("customerId");if(cidEl&&cidEl.value){aws_sc.customerID=CryptoJS.SHA256(cidEl.value);s.prop2=aws_sc.customerID}if(aws_sc.window.location.href.indexOf("signup")>-1&&!AWSMA.config.customPageview&&!s[aws_sc.vidTypeVar]){aws_sc.setRegPageVars(aws_sc.window.location.href.indexOf("type=enterprise")>-1)}if(s.linkType===undefined||s.linkType===0){aws_sc.VarsUtils.setDataLayerProps(s)}if(s.eVar62){aws_sc.CookieUtils.setCookie("regStatus",s.eVar62,365,true);s.prop62=s.eVar62}if(aws_sc.window.location.href.indexOf("/registration-confirmation")>-1&&aws_sc.CookieUtils.getCookie("regStatus")==="registering"){s.pageName="Registration Confirmation";s.events="event65,event96:"+aws_sc.customerID;s.eVar62="registered"}aws_sc.VarsUtils.setCampaignVars(s);var sFidCookie=aws_sc.CookieUtils.getCookie("s_fid");if(sFidCookie){s.prop29=sFidCookie;s.eVar29=s.prop29}var sTidCookie=aws_sc.CookieUtils.getCookie("aws-target-visitor-id");if(sTidCookie){s.prop12=sTidCookie;s.eVar12=s.prop12}aws_sc.munchkinID=aws_sc.CookieUtils.getCookie("_mkto_trk");if(aws_sc.munchkinID){s.eVar28=aws_sc.munchkinID}};init(vidUtils)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}var defaultOptions={expires:31536e3,path:"/",secure:true,domain:window.location.hostname,samesite:"Lax"};var ERR_NO_PARAMS="No params were passed";var regReserved=/^(?:expires|max-age|path|domain|secure)$/i;var ERR_RESERVED_WORD="Name cannot contain reserved cookie property names";function cookie(name,value,opts){if(!name){throw new Error(ERR_NO_PARAMS)}var options=Object.assign({},defaultOptions,opts);if(value||value===""){return set(name,value,options)}return get(name)}function set(name,value){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(regReserved.test(name)){throw new Error(ERR_RESERVED_WORD)}var expiresStr="";if(options.expires){var date=new Date;date.setTime(date.getTime()+options.expires*1e3);expiresStr=";expires="+date.toUTCString()}document.cookie="".concat(name,"=").concat(value).concat(expiresStr,";domain=").concat(options.domain,";path=").concat(options.path,";samesite:").concat(options.samesite,";").concat(options.secure?";secure":"")}function get(name){var regSpecial=/[.*+?^${}()|[\]\\]/g;var value=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+name.replace(regSpecial,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null;return value}var Environment;(function(Environment){Environment["ALPHA"]="ALPHA";Environment["BETA"]="BETA";Environment["GAMMA"]="GAMMA";Environment["PROD"]="PROD";Environment["DEV"]="DEV";Environment["INT_TEST"]="INT_TEST"})(Environment||(Environment={}));var VISITOR_API={ALPHA:"https://vs-alpha.aws.amazon.com/token",BETA:"https://vs-beta.aws.amazon.com/token",GAMMA:"https://vs-gamma.aws.amazon.com/token",PROD:"https://vs.aws.amazon.com/token",DEV:"https://vs-alpha.aws.amazon.com/token",INT_TEST:"https://vs-beta.aws.amazon.com/token"};var CN_VISITOR_API={ALPHA:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",BETA:"https://beta.d2c.marketing.aws.a2z.org.cn/vs/token",GAMMA:"https://gamma.d2c.marketing.aws.a2z.org.cn/vs/token",PROD:"https://d2c.amazonaws.cn/vs/token",DEV:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",INT_TEST:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token"};var VISITOR_API_MAP={"aws-cn":CN_VISITOR_API,aws:VISITOR_API};var _excluded=["timeout"];var DEFAULT_TIMEOUT=2e3;function fetchWithTimeout(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{timeout:DEFAULT_TIMEOUT};var timeout=options.timeout,fetchOptions=_objectWithoutProperties(options,_excluded);return Promise.race([fetch(url,fetchOptions),new Promise(function(resolve,reject){setTimeout(function(){var e=new Error("Request for ".concat(url," timed out after ").concat(timeout," milliseconds."));e.name="TimeoutError";return reject(e)},timeout)})])}function getVisitorServiceEndpoint(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var domain=opts.domain||window.location.hostname;var env=opts.env||Environment.DEV;if(domain!==null&&domain!==void 0&&domain.endsWith(".cn")){return VISITOR_API_MAP["aws-cn"][env]}return VISITOR_API_MAP["aws"][env]}function callAPI(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var url=opts.api||getVisitorServiceEndpoint(opts);var data={};if(opts.mid){data.mid=opts.mid}if(opts.aid){data.aid=opts.aid}if(opts.token){data.token=opts.token}return fetchWithTimeout(url,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(data),credentials:"include",timeout:3e3}).then(function(response){var res=response;if(!res.ok){var e=new Error("VisitorID service responses with the error status.");e.name=res.status.toString();throw e}return response.json()}).then(function(data){return data})}var COOKIE_DOMAINS=["aws.amazon.com","awsevents.com","amplify.aws","amazonaws.cn","amazoncloud.cn","awsevents.cn","webchat-aws.clink.cn"];var VID_COOKIE_NAME="awsd2c-token-c";var SHORTBREAD_COOKIE_NAME="awsccc";var ERR_SHORTBREAD="It does not seem your site has onboarded to Shortbread. Onboarding to Shortbread is required for using Visitor ID Service.";var VisitorIdCookie=function(){function VisitorIdCookie(){_classCallCheck(this,VisitorIdCookie);_defineProperty(this,"cookieValue",void 0);_defineProperty(this,"payload",void 0);_defineProperty(this,"tokenExpiry",void 0);_defineProperty(this,"vid",void 0);this.cookieValue=cookie(VID_COOKIE_NAME)||"";this.payload=this.getPayload();this.vid=this.payload.vid||"";this.tokenExpiry=this.payload.exp||0}_createClass(VisitorIdCookie,[{key:"getValue",value:function getValue(){return this.cookieValue}},{key:"getPayload",value:function getPayload(){if(this.cookieValue){return decode(this.cookieValue)}return{}}},{key:"hasValidValue",value:function hasValidValue(){return this.vid.length>0&&!isTokenExpired(this.tokenExpiry)}},{key:"set",value:function set(data,domain){var options={domain:domain||getCookieDomain(window.location.hostname),expires:31536e3};cookie(VID_COOKIE_NAME,data,options);this.cookieValue=cookie(VID_COOKIE_NAME)||"";this.payload=this.getPayload();this.vid=this.payload.vid||this.vid;this.tokenExpiry=this.payload.exp||this.tokenExpiry}}]);return VisitorIdCookie}();function getCookieDomain(url){var hostname=url.replace(/(^\w+:|^)\/\//,"").split(/[/?#]/)[0];var domainFound=COOKIE_DOMAINS.filter(function(domain){if(hostname===domain){return true}var regex=new RegExp("(\\.?\\W|^)\\b".concat(domain,"\\b$"),"gi");return regex.test(hostname)});if(domainFound.length>0){return domainFound[0]}return hostname}function decode(value){var jwsParts=value.split(".");if(jwsParts.length<3){return{}}var payload=value.split(".")[1];try{return JSON.parse(atob(payload))}catch(_unused){return{}}}function isTokenExpired(timestamp){if(!timestamp){return true}var expMillisec=timestamp*1e3;if(Date.now()>=expMillisec){return true}return false}window.AWSMA=window.AWSMA||{};var vidCallbackQueue=[];var tokenCallbackQueue=[];var vidCookie;AWSMA.visitorIdReady=function(cb){if(vidCookie&&vidCookie.hasValidValue()){cb(vidCookie.getPayload().vid||"")}else{vidCallbackQueue.push(cb)}};AWSMA.tokenReady=function(cb){if(vidCookie&&vidCookie.hasValidValue()&&vidCookie.getValue()){cb(vidCookie.getValue()||"")}else{tokenCallbackQueue.push(cb)}};var AWSVisitorIdClient=function(){function AWSVisitorIdClient(opts){_classCallCheck(this,AWSVisitorIdClient);_defineProperty(this,"vidCookie",void 0);_defineProperty(this,"visitorId",void 0);_defineProperty(this,"visitorToken",void 0);_defineProperty(this,"options",void 0);if(cookie(SHORTBREAD_COOKIE_NAME)===null){console.error(ERR_SHORTBREAD);throw new Error(ERR_SHORTBREAD)}this.options=opts;this.vidCookie=new VisitorIdCookie;vidCookie=this.vidCookie;this.visitorId="";this.visitorToken={};if(!opts.cookieAllowed){this.invokeVisitorIdReady();this.invokeTokenReady();return}this.setVisitorId()}_createClass(AWSVisitorIdClient,[{key:"getVisitorId",value:function getVisitorId(opts){var _this=this;this.getVisitorToken({domain:opts.domain,onError:opts.onError,onSuccess:function onSuccess(data){if(data.vid&&typeof opts.onSuccess==="function"){opts.onSuccess(data.vid);_this.invokeVisitorIdReady()}}})}},{key:"getVisitorToken",value:function getVisitorToken(opts){var _this2=this;if(this.vidCookie.getValue()&&this.hasValidVisitorId()){if(typeof opts.onSuccess==="function"){opts.onSuccess(this.visitorToken)}return}callAPI({mid:opts.mid,aid:opts.aid,token:this.vidCookie.getValue(),env:this.options.env,domain:opts.domain}).then(function(data){if(data.token){_this2.vidCookie.set(data.token,opts.domain);_this2.setVisitorId();_this2.invokeVisitorIdReady();_this2.invokeTokenReady()}if(typeof opts.onSuccess==="function"){opts.onSuccess(_this2.visitorToken)}})["catch"](function(e){_this2.invokeVisitorIdReady();_this2.invokeTokenReady();if(typeof opts.onError==="function"){opts.onError(e)}})}},{key:"setVisitorId",value:function setVisitorId(){var vidPayload=this.vidCookie.getPayload();this.visitorToken=vidPayload||{};this.visitorId=vidPayload.vid||""}},{key:"hasValidVisitorId",value:function hasValidVisitorId(){return this.vidCookie.hasValidValue()}},{key:"getExistingVisitorId",value:function getExistingVisitorId(){return this.visitorId}},{key:"getExistingVisitorToken",value:function getExistingVisitorToken(){return this.visitorToken}},{key:"getExistingToken",value:function getExistingToken(){return this.vidCookie.getValue()}},{key:"invokeVisitorIdReady",value:function invokeVisitorIdReady(){while(vidCallbackQueue.length>0){var cb=vidCallbackQueue.shift();if(typeof cb==="function"){cb(this.visitorId)}}}},{key:"invokeTokenReady",value:function invokeTokenReady(){while(tokenCallbackQueue.length>0){var cb=tokenCallbackQueue.shift();if(typeof cb==="function"){cb(this.vidCookie.getValue())}}}}]);return AWSVisitorIdClient}();var vidUtils={initVidClient:function(){this.vidClient=new AWSVisitorIdClient({cookieAllowed:true,env:aws_sc.env})},getAWSVid:function(ids,cb){if(!this.vidClient){this.initVidClient()}var currentVid=this.vidClient.getExistingVisitorId();var vidType=currentVid===""?"new":"refreshed";this.vidClient.getVisitorToken({mid:ids.mid,aid:ids.aid,onSuccess:function(data){this.setVisitorId(data.vid||currentVid);return cb(vidType)}.bind(this),onError:function(e){this.setVisitorId(currentVid);return cb(vidType,e)}.bind(this)})},setVisitorId:function(vid){aws_sc.vid=vid||"no AWSVID"},hasValidVid:function(){return this.vidClient&&this.vidClient.hasValidVisitorId()},getVisitorToken:function(){return this.vidClient&&this.vidClient.getExistingVisitorToken()}};if(aws_sc.PathUtils.isReadyForVid(aws_sc.window.location.hostname)){sCodeReg(vidUtils)}else{aws_sc.vid="not on AWSVID";sCodeReg()}})();