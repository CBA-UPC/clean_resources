/*!
 * @sentry-internal/tracing@7.47.0 (MIT)
 *   author: Sentry
 *   url: git://github.com/getsentry/sentry-javascript.git
 *
 *   Copyright (c) 2020 Sentry (https://sentry.io) and individual contributors. All rights reserved.
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 *   documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 *   rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
 *   persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 *   Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 *   WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 *   COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 *   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *
 * @sentry/core@7.47.0 (MIT)
 *   author: Sentry
 *   url: git://github.com/getsentry/sentry-javascript.git
 *
 *   Copyright (c) 2019 Sentry (https://sentry.io) and individual contributors. All rights reserved.
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 *   documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 *   rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
 *   persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 *   Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 *   WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 *   COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 *   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *
 * @sentry/utils@7.47.0 (MIT)
 *   author: Sentry
 *   url: git://github.com/getsentry/sentry-javascript.git
 *
 *   Copyright (c) 2019 Sentry (https://sentry.io) and individual contributors. All rights reserved.
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 *   documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 *   rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
 *   persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 *   Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 *   WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 *   COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 *   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *
 * bowser@2.11.0 (MIT)
 *   author: Dustin Diaz <dustin@dustindiaz.com> (http://dustindiaz.com)
 *   url: git+https://github.com/lancedikson/bowser.git
 *   contributors:
 *     Denis Demchenko (http://twitter.com/lancedikson)
 *
 *   Copyright 2015, Dustin Diaz (the "Original Author")
 *   All rights reserved.
 *
 *   MIT License
 *
 *   Permission is hereby granted, free of charge, to any person
 *   obtaining a copy of this software and associated documentation
 *   files (the "Software"), to deal in the Software without
 *   restriction, including without limitation the rights to use,
 *   copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the
 *   Software is furnished to do so, subject to the following
 *   conditions:
 *
 *   The above copyright notice and this permission notice shall be
 *   included in all copies or substantial portions of the Software.
 *
 *   Distributions of all or part of the Software intended to be used
 *   by the recipients as they would use the unmodified Software,
 *   containing modifications that substantially alter, remove, or
 *   disable functionality of the Software, outside of the documented
 *   configuration mechanisms provided by the Software, shall be
 *   modified such that the Original Author's bug reporting email
 *   addresses and urls are either replaced with the contact information
 *   of the parties responsible for the changes, or removed entirely.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 *   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 *   OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *   HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 *   WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 *   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 *   OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *   Except where noted, this license applies to any and all software
 *   programs and associated documentation files created by the
 *   Original Author, when distributed with the Software.
 *
 *
 *
 * dayjs@1.11.7 (MIT)
 *   author: iamkun
 *   url: https://github.com/iamkun/dayjs.git
 *
 *   MIT License
 *
 *   Copyright (c) 2018-present, iamkun
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all
 *   copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *   SOFTWARE.
 *
 *
 *
 * js-cookie@3.0.5 (MIT)
 *   author: Klaus Hartl
 *   url: git://github.com/js-cookie/js-cookie.git
 *
 *   MIT License
 *
 *   Copyright (c) 2018 Copyright 2018 Klaus Hartl, Fagner Brack, GitHub Contributors
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all
 *   copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *   SOFTWARE.
 *
 *
 *
 * lottie-web@5.10.2 (MIT)
 *   url: https://github.com/airbnb/lottie-web.git
 *
 *   The MIT License (MIT)
 *   
 *   Copyright (c) 2015 Bodymovin
 *   
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *   
 *   The above copyright notice and this permission notice shall be included in all
 *   copies or substantial portions of the Software.
 *   
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 *   SOFTWARE.
 *
 *
 * mustache@4.2.0 (MIT)
 *   author: mustache.js Authors <http://github.com/janl/mustache.js>
 *   url: https://github.com/janl/mustache.js.git
 *
 *   The MIT License
 *
 *   Copyright (c) 2009 Chris Wanstrath (Ruby)
 *   Copyright (c) 2010-2014 Jan Lehnardt (JavaScript)
 *   Copyright (c) 2010-2015 The mustache.js community
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *
 * pikaday@1.8.2 ((0BSD OR MIT))
 *   url: https://github.com/Pikaday/Pikaday.git
 *
 *   Copyright (c) 2014 David Bushell BSD & MIT license
 *
 *   The MIT License (MIT)
 *
 *   Copyright (c) 2014 David Bushell
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in
 *   all copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 *   THE SOFTWARE.
 *
 *   The BSD License
 *
 *   Copyright (c) 2014 David Bushell
 *   All rights reserved.
 *
 *   Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
 *
 *   1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 *
 *   2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 *
 *   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 *
 * textarea-caret@3.1.0 (MIT)
 *   url: component/textarea-caret-position
 *
 *   The MIT License (MIT)
 *
 *   Copyright (c) 2015 Jonathan Ong me@jongleberry.com
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *
 * urijs@1.19.11 (MIT)
 *   author: Rodney Rehm (http://rodneyrehm.de)
 *   url: https://github.com/medialize/URI.js.git
 *   contributors:
 *     Francois-Guillaume Ribreau <npm@fgribreau.com> (http://fgribreau.com)
 *     Justin Chase <justin.m.chase@gmail.com> (http://justinmchase.com)
 *
 *   The MIT License (MIT)
 *
 *   Copyright (c) 2011 Rodney Rehm
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy
 *   of this software and associated documentation files (the "Software"), to deal
 *   in the Software without restriction, including without limitation the rights
 *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *   copies of the Software, and to permit persons to whom the Software is
 *   furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in
 *   all copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 *   THE SOFTWARE.
 *
 *
 * whatwg-fetch@3.6.2 (MIT)
 *   url: github/fetch
 *
 *   Copyright (c) 2014-2016 GitHub, Inc.
 *
 *   Permission is hereby granted, free of charge, to any person obtaining
 *   a copy of this software and associated documentation files (the
 *   "Software"), to deal in the Software without restriction, including
 *   without limitation the rights to use, copy, modify, merge, publish,
 *   distribute, sublicense, and/or sell copies of the Software, and to
 *   permit persons to whom the Software is furnished to do so, subject to
 *   the following conditions:
 *
 *   The above copyright notice and this permission notice shall be
 *   included in all copies or substantial portions of the Software.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 *   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *   NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 *   LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *   OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 *   WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 *
 */
(()=>{var __webpack_modules__={9553:(t,e,i)=>{"use strict";i.d(e,{N:()=>F,gE:()=>N});var r=i(5544),s=i(6890),n=i(7638),o=i(9791),a=i(2343),l=i(9181),c=i(8464);const h=i(1235).n2;var d=i(1170);const u=p=m=f=g=y=_=let v=-1;const b=w=k={},S=A,P,M=0,B={}; L=i(516),O=i(2533);const F="BrowserTracing",V={...r.AT,markBackgroundTransactions:!0,routingInstrumentation:function(t,e=!0,i=!0){if(!h||!h.location)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn("Could not initialize routing instrumentation due to invalid location"));let r,s=h.location.href;e&&(r=t({name:h.location.pathname,startTimestamp:d.Z1,op:"pageload",metadata:{source:"url"}})),i&&(0,O.o)("history",()},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...L.k3};class N{__init(){this.name=F}reateRouteTransaction(t){if(!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`));const{beforeNavigate:e,idleTimeout:i,finalTimeout:r,heartbeatInterval:o}=this.options,c="pageload"===t.op,d=c?U("sentry-trace"):null,u=c?U("baggage"):null,p=d?(0,n.q)(d):void 0,m=u?(0,l.EN)(u):void 0,f={...t,...p,metadata:{...t.metadata,dynamicSamplingContext:p&&!m?{}:m},trimEnd:!0},g="function"==typeof e?e(f):f,y=void 0===g?{...f,sampled:!1}:g;y.metadata=y.name!==f.name?{...y.metadata,source:"custom"}:y.metadata,this._latestRouteName=y.name,this._latestRouteSource=y.metadata&&y.metadata.source,!1===y.sampled&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log(`[Tracing] Will not send ${y.op} transaction because of beforeNavigate.`),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log(`[Tracing] Starting ${y.op} transaction on scope`);const _=this._getCurrentHub(),{location:v}=h,b=(0,s.l)(_,y,i,r,!0,{location:v},o);return b.registerBeforeFinishCallback((),b},516:(t,e,i)=>{"use strict";i.d(e,{L7:()=>d,k3:()=>h});var r=i(7522),s=i(5659),n=i(2533),o=i(7321),a=i(9181),l=i(7597);const c=["localhost",/^\//],h={traceFetch:!0,traceXHR:!0,tracingOrigins:c,tracePropagationTargets:c};function d(t){const{traceFetch:e,traceXHR:i,tracePropagationTargets:d,tracingOrigins:u,shouldCreateSpanForRequest:p}={traceFetch:h.traceFetch,traceXHR:h.traceXHR,...t},m="function"==typeof p?p:f=g={};e&&(0,n.o)("fetch",(t=>{!function(t,e,i,n){if(!(0,r.z)()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp){const e=t.fetchData.__span;if(!e)return;const i=n[e];return void(i&&(t.response?i.setHttpStatus(t.response.status):t.error&&i.setStatus("internal_error"),i.finish(),delete n[e]))}const o=(0,s.Gd)().getScope(),c=o&&o.getSpan(),h=c&&c.transaction;if(c&&h){const e=c.startChild({data:{...t.fetchData,type:"fetch"},description:`${t.fetchData.method} ${t.fetchData.url}`,op:"http.client"});t.fetchData.__span=e.spanId,n[e.spanId]=e;const r=t.args[0];t.args[1]=t.args[1]||{};const s=t.args[1];i(t.fetchData.url)&&(s.headers=r,h.getDynamicSamplingContext(),e,s))}}(t,m,f,g)})),i&&(0,n.o)("xhr",(t=>{!function(t,e,i,n){if(!(0,r.z)()||t.xhr&&t.xhr.__sentry_own_request__||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))return;const o=t.xhr.__sentry_xhr__;if(t.endTimestamp){const e=t.xhr.__sentry_xhr_span_id__;if(!e)return;const i=n[e];return void(i&&(i.setHttpStatus(o.status_code),i.finish(),delete n[e]))}const l=(0,s.Gd)().getScope(),c=l&&l.getSpan(),h=c&&c.transaction;if(c&&h){const e=c.startChild({data:{...o.data,type:"xhr",method:o.method,url:o.url},description:`${o.method} ${o.url}`,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=e.spanId,n[t.xhr.__sentry_xhr_span_id__]=e,t.xhr.setRequestHeader&&i(t.xhr.__sentry_xhr__.url))try{t.xhr.setRequestHeader("sentry-trace",e.toTraceparent());const i=h.getDynamicSamplingContext(),r=(0,a.IQ)(i);r&&t.xhr.setRequestHeader(a.bU,r)}catch(t){}}}(t,m,f,g)}))}},758:(t,e,i)=>{"use strict";i.d(e,{r:()=>o});var r=i(5659),s=i(6890),n=i(1422);function o(){(0,s.T)(),(0,n.KV)()&&)}t=i.hmd(t)},505:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Breadcrumbs:()=>zt,BrowserClient:()=>Jt,BrowserProfilingIntegration:()=>yn,BrowserTracing:()=>Us.gE,Dedupe:()=>Ie,FunctionToString:()=>a,GlobalHandlers:()=>ve,HttpContext:()=>De,Hub:()=>f.Xb,InboundFilters:()=>u,Integrations:()=>vn,LinkedErrors:()=>Be,Replay:()=>Ns,SDK_VERSION:()=>m,Scope:()=>rt.s,TryCatch:()=>xe,WINDOW:()=>ct,addBreadcrumb:()=>b,addGlobalEventProcessor:()=>rt.c,addTracingExtensions:()=>st.T,captureEvent:()=>_,captureException:()=>g,captureMessage:()=>y,captureUserFeedback:()=>Ke,chromeStackLineParser:()=>oe,close:()=>Ye,configureScope:()=>v,createTransport:()=>tt,createUserFeedbackEnvelope:()=>Kt,defaultIntegrations:()=>Ne,defaultRequestInstrumentationOptions:()=>js.k3,defaultStackLineParsers:()=>ge,defaultStackParser:()=>ye,eventFromException:()=>Dt,eventFromMessage:()=>It,extractTraceparentData:()=>nt.q,flush:()=>$e,forceLoad:()=>Ge,geckoStackLineParser:()=>ce,getActiveTransaction:()=>ot.x1,getCurrentHub:()=>f.Gd,getHubFromCarrier:()=>f.vi,init:()=>Ue,lastEventId:()=>qe,makeBrowserOfflineTransport:()=>Js,makeFetchTransport:()=>Xt,makeMain:()=>f.pj,makeXHRTransport:()=>ee,onLoad:()=>ze,onProfilingStartRouteTransaction:()=>mn,opera10StackLineParser:()=>pe,opera11StackLineParser:()=>fe,setContext:()=>w,setExtra:()=>S,setExtras:()=>k,setTag:()=>T,setTags:()=>E,setUser:()=>x,showReportDialog:()=>je,spanStatusfromHttpCode:()=>at.Zd,startTransaction:()=>A,trace:()=>it,winjsStackLineParser:()=>de,withScope:()=>C,wrap:()=>He});var r={};i.r(r),i.d(r,{FunctionToString:()=>a,InboundFilters:()=>u});var s={};i.r(s),i.d(s,{Breadcrumbs:()=>zt,Dedupe:()=>Ie,GlobalHandlers:()=>ve,HttpContext:()=>De,LinkedErrors:()=>Be,TryCatch:()=>xe});var n=i(535);let o;.__initStatic();var l=i(2343),c=i(2844),h=i(7321);const d=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class u{static __initStatic(){this.id="InboundFilters"}__init(){this.name=u.id}etupOnce(t,e){const i=t=>{const i=e();if(i){const e=i.getIntegration(u);if(e){const r=i.getClient(),s=r?r.getOptions():{},n=e._options,s);return function(t,e){if(e.ignoreInternal&&t))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${(0,c.jH)(t)}`),!0;if(function(t,e){if(t.type||!e||!e.length)return!1;return t).some(()}(t,e.ignoreErrors))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,c.jH)(t)}`),!0;if(t,e.ignoreTransactions))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${(0,c.jH)(t)}`),!0;if(t,e.denyUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,c.jH)(t)}.\nUrl: ${p(t)}`),!0;if(!t,e.allowUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,c.jH)(t)}.\nUrl: ${p(t)}`),!0;return!1}(t,n)?null:t}}return t};i.id=this.name,t(i)}}.__initStatic();const m="7.47.0";var f=i(5659);ction v(t){(0,f.Gd)().configureScope(t)}function b(t){(0,f.Gd)().addBreadcrumb(t)}function w(t,e){(0,f.Gd)().setContext(t,e)}function k(t){(0,f.Gd)().setExtras(t)}function S(t,e){(0,f.Gd)().setExtra(t,e)}function E(t){(0,f.Gd)().setTags(t)}unction x(t){(0,f.Gd)().setUser(t)} M=i(6893);onst R=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/; O=i(7597);var F=i(360);nction U(t,e,r=1/0,s=1/0,o=)){const[a,l]=o;if(null===e||["number","boolean","string"].includes(typeof e)&&!(0,O.i2)(e))return e;const c=t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;let h=r;if("number"==typeof e.__sentry_override_normalization_depth__&&(h=e.__sentry_override_normalization_depth__),0===h)return c.replace("object ","");if(a(e))return"[Circular ~]";const d=e;if(d&&"function"==typeof d.toJSON)try{return U("",d.toJSON(),h-1,s,o)}catch(t){}const u=Array.isArray(e)?[]:{};let p=0;const m=(0,n.Sh)(e);for(const t in m){if(!Object.prototype.hasOwnProperty.call(m,t))continue;if(p>=s){u[t]="[MaxProperties ~]";break}const e=m[t];u[t]=U(t,e,h-1,s,o),p++}return l(e),u}H={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay"};function W(t){return H[t]}nst Z=6e4;onst X=30;function tt(t,e,i=B(t.bufferSize||X)){let r={};function s(s){const n=[];if(G(s,(),0===n.length)return(0,M.WD)();const o=j(s[0],n),a=return i.add((()=>e({body:$(o,t.textEncoder)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=r,t),t)),())).then((,()}return s.__sentry__baseTransport__=!0,{send:s,flush:t=>i.drain(t)}}r rt=i(350),st=i(6890),nt=i(7638),ot=i(9791),at=i(8903),lt=i(1235);const ct=lt.n2;let ht=0;unction ut(t,e={},i){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if((0,n.HK)(t))return t}catch(e){return t}const r=try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}catch(t){}(0,n.$Q)(r,t),(0,n.xp)(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:)}catch(t){}return r}const pt="7";nst gt=[];r vt=i(9015),bt=i(1170),wt=i(1131);function kt(t,e,i,r){const{normalizeDepth:s=3,normalizeMaxBreadth:n=1e3}=t,o={...e,event_id:e.event_id||i.event_id||(0,c.DM)(),timestamp:e.timestamp||(0,bt.yW)()},a=i.integrations||t.integrations.map((t=>t.name));!o,t),o,a),function(t,e){const i=lt.n2._sentryDebugIds;if(!i)return;const r=Object.keys(i).reduce((,{}),s=new Set;try{t.exception.values.forEach(()}catch(t){}t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;s.forEach(()}(o,t.stackParser);let l=r;i.captureContext&&(l=rt.s.clone(l).update(i.captureContext));let d=(0,M.WD)(o);if(l){if(l.getAttachments){const t=[...i.attachments||[],...l.getAttachments()];t.length&&(i.attachments=t)}d=l.applyToEvent(o,i)}return d.then(()}const St="Not capturing exception because it's already been captured.";class Et{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(t){if(Et.prototype.__init.call(this),Et.prototype.__init2.call(this),Et.prototype.__init3.call(this),Et.prototype.__init4.call(this),Et.prototype.__init5.call(this),this._options=t,t.dsn){this._dsn=L(t.dsn);const e=ft(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("No DSN provided, client will not do anything.")}sn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}/Minified React error #\d+;/i;t=i(2533),Vt=i(8464);const Nt=["fatal","error","warning","log","info","debug"];ar jt=i(6956);const qt=1024,Gt="Breadcrumbs";nitStatic();class Jt extends Et{=i(8823);let Qt;onst te=4;onst ie="?";onst se=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?(?:async )?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ne=/\((\S*)(?::(\d+))(?::(\d+))\)/,oe=[30,,ae=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,le=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ce=[50,,he=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,de=[40,,ue=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,pe=[10,,me=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,fe=[20,,ge=[oe,ce,de],ye=(0,F.pE)(...ge),_e=nitStatic();const Te=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];initStatic();.__initStatic();e.__initStatic();initStatic();const Ne=[new u,new a,new xe,new zt,new ve,new Be,new Ie,new De];unction je(t={},e=(0,f.Gd)()){if(!ct.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("Global document not defined in showReportDialog call"));const{client:i,scope:r}=e.getStackTop(),s=t.dsn||i&&i.getDsn();if(!s)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("DSN not configured for showReportDialog call"));r&&(t.user={...r.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const n=ct.document.createElement("script");n.async=!0,n.src=s,t),t.onLoad&&(n.onload=t.onLoad);const o=ct.document.head||ct.document.body;o?o.appendChild(n):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("Not injecting report dialog. No injection point found in HTML")}unction Ge(){}unction $e(t){const e=(0,f.Gd)().getClient();return e?e.flush(t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Cannot flush events. No client defined."),(0,M.WD)(!1))}Je=i(1422);const Ze=lt.n2,Qe="sentryReplaySession",Xe="replay_event",ti="Unable to send Replay",ei=3e5;var ii;||(ii={}));const oi="__rrweb_original__";let ai=1;const li=new RegExp("[^a-z0-9-_:]"),ci=-2; pi,mi;const fi=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,gi=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,yi=/^(data:)([^,]*),(.*)/i;onst vi=/^[^ \t\n\r\u000c]+/,bi=/^[, \t\n\r\u000c]+/;tion Ti(t,e){var i;const{doc:r,blockClass:s,blockSelector:n,unblockSelector:o,maskTextClass:a,maskTextSelector:l,unmaskTextSelector:c,inlineStylesheet:h,maskInputSelector:d,unmaskInputSelector:u,maskAllText:p,maskInputOptions:m={},maskTextFn:f,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b}=e;let w;if(r.__sn){const t=r.__sn.id;w=1===t?void 0:t}switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:ii.Document,childNodes:[],compatMode:t.compatMode,rootId:w}:{type:ii.Document,childNodes:[],rootId:w};case t.DOCUMENT_TYPE_NODE:return{type:ii.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:w};case t.ELEMENT_NODE:const e=t,s,n,o),E=t);let T={};for(const{name:e,value:i}of Array.from(t.attributes))Ai(E,e)||(T[e]=Si(r,t,E,e,i,p,c,f));if("link"===E&&h){const e=Array.from(r.styleSheets).find((e=>e.href===t.href));let i=null;e&&(i=di(e)),i&&(delete T.rel,delete T.href,T._cssText=_i(i,e.href))}if("style"===E&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const e=di(t.sheet);e&&(T._cssText=_i(e,ki()))}if("input"===E||"textarea"===E||"select"===E||"option"===E){const e=t,i=E,e,T),r=t.checked;"submit"!==T.type&&"button"!==T.type&&i&&(T.value=ni({input:e,type:T.type,tagName:E,value:i,maskInputSelector:d,unmaskInputSelector:u,maskInputOptions:m,maskInputFn:g})),r&&(T.checked=r)}if("option"===E&&(t.selected&&!m.select?T.selected=!0:delete T.selected),"canvas"===E&&v)if("2d"===t.__context)((t)||(T.rr_dataURL=t.toDataURL(y.type,y.quality));else if(!("__context"in t)){const e=t.toDataURL(y.type,y.quality),i=document.createElement("canvas");i.width=t.width,i.height=t.height;e!==i.toDataURL(y.type,y.quality)&&(T.rr_dataURL=e)}if("img"===E&&_){pi||(pi=r.createElement("canvas"),mi=pi.getContext("2d"));const e=t,i=e.crossOrigin;e.crossOrigin="anonymous";const s=e.complete&&0!==e.naturalWidth?s():e.onload=s}if("audio"!==E&&"video"!==E||(T.rr_mediaState=t.paused?"paused":"played",T.rr_mediaCurrentTime=t.currentTime),t.scrollLeft&&(T.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(T.rr_scrollTop=t.scrollTop),e){const{width:e,height:i}=t.getBoundingClientRect();T={class:T.class,rr_width:`${e}px`,rr_height:`${i}px`}}return"iframe"!==E||b(T.src)||(t.contentDocument||(T.rr_src=T.src),delete T.src),{type:ii.Element,tagName:E,attributes:T,childNodes:[],isSVG:(S=t,Boolean("svg"===S.tagName||S.ownerSVGElement)||void 0),needBlock:e,rootId:w};case t.TEXT_NODE:const x=t.parentNode&&t.parentNode.tagName;let C=t.textContent;const A="STYLE"===x||void 0,P="SCRIPT"===x||void 0;if(A&&C){try{t.nextSibling||t.previousSibling||(null===(i=t.parentNode.sheet)||void 0===i?void 0:i.cssRules)&&(C=(k=t.parentNode.sheet).cssRules?Array.from(k.cssRules).map(().join(""):"")}catch(e){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${e}`,t)}C=_i(C,ki())}if(P&&(C="SCRIPT_PLACEHOLDER"),"TEXTAREA"===x&&C)C="";else if("OPTION"===x&&C){C=ni({input:t.parentNode,type:null,tagName:x,value:C,maskInputSelector:d,unmaskInputSelector:u,maskInputOptions:m,maskInputFn:g})}else!A&&!P&&Ei(t,a,l,c,p)&&C&&(C=f?f(C):hi(C));return{type:ii.Text,textContent:C||"",isStyle:A,rootId:w};case t.CDATA_SECTION_NODE:return{type:ii.CDATA,textContent:"",rootId:w};case t.COMMENT_NODE:return{type:ii.Comment,textContent:t.textContent||"",rootId:w};default:return!1}var k,S} Pi,Mi,Bi,Ri,Di,Ii;Pi||(Pi={})),Mi||(Mi={})),Bi||(Bi={})),Ri||(Ri={})),Di||(Di={})),Ii||(Ii={}));const Oi="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Fi={map:{},getId:getNode:removeNodeFromMap(){console.error(Oi)},has:reset;ction ji(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}n Ki(t){return"__ln"in t}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Fi=new Proxy(Fi,{get:));onst Zi= rr=sr=[]; hr=["INPUT","TEXTAREA","SELECT"],dr=new WeakMap; vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",br="undefined"==typeof Uint8Array?[]:new Uint8Array(256),wr=0;wr<64;wr++)br[vr.charCodeAt(wr)]=wr;const kr=new Map;const Sr=onst Tr=xr= Mr,Br;const Rr={map:{},getId:getNoderemoveNodeFromMaphasreset;r.addCustomEvent=Dr.freezePage=Dr.takeFullSnapshot=Dr.mirror=Rr;const Ir=["name","type","startTime","transferSize","duration"];nst Fr='/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\nfunction t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},U=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let S=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var T=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},O={_tr_init:t=>{S||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),S=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:T,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const L=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var N=(t,e,a,i)=>{const n=L,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=O,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:W,Z_OK:q,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=F(t.adler,e,n,a):2===t.state.wrap&&(t.adler=N(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),q},Zt=t=>{const e=Rt(t);var a;return e===q&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Ut=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var St={deflateInit:(t,e)=>Ut(t,e,ot,15,8,st),deflateInit2:Ut,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,q),deflate:(t,e)=>{if(Et(t)||e>W||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,q}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,q;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,q;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),q;if(2===i&&(e===Y?K(a):e!==W&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,q}return e!==X?q:a.wrap<=0?J:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?q:J)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):q},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=F(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,q},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Tt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Ot=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ft=!1}const Lt=new Uint8Array(256);for(let t=0;t<256;t++)Lt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Lt[254]=Lt[254]=1;var Nt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Lt[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ft)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Lt[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:qt}=B;function Jt(t){this.options=Tt({level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=St.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&St.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Nt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=St.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new Jt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}Jt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Nt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=St.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=St.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===Yt&&(this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:Jt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(U=0,S=r[m]):r[m]>=u?(U=D[r[m]-u],S=A[r[m]-u]):(U=96,S=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Ue={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=N(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,r-f):F(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,t.next_out-f):F(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=F(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_FINISH:Oe,Z_OK:Fe,Z_STREAM_END:Le,Z_NEED_DICT:Ne,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Tt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ue.inflateInit2(this.strm,e.windowBits);if(a!==Fe)throw new Error(I[a]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Nt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ue.inflateSetDictionary(this.strm,e.dictionary),a!==Fe)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Ue.inflate(a,r),s===Ne&&n&&(s=Ue.inflateSetDictionary(a,n),s===Fe?s=Ue.inflate(a,r):s===Be&&(s=Ne));a.avail_in>0&&s===Le&&a.state.wrap>0&&0!==t[a.next_in];)Ue.inflateReset(a),s=Ue.inflate(a,r);switch(s){case Ie:case Be:case Ne:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Le))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Fe||0!==o){if(s===Le)return s=Ue.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=je,Xe=B;const We=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const e=this._hasEvents?",":"";this.deflate.push(e+t,Xe.Z_SYNC_FLUSH),this._hasEvents=!0}finish(){if(this.deflate.push("]",Xe.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this._init(),t}_init(){this._hasEvents=!1,this.deflate=new Ye,this.deflate.push("[",Xe.Z_NO_FLUSH)}},qe={clear:()=>{We.clear()},addEvent:t=>We.addEvent(t),finish:()=>We.finish(),compress:t=>function(t){return Ge(t)}(t)};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,i=t.data.arg;if(e in qe&&"function"==typeof qe[e])try{const t=qe[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';tion qr({useCompression:t}){if(t&&window.Worker)try{const t=);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Replay] Using compression worker");const e=new Worker(t);return new jr(e)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Replay] Failed to create compression worker")}return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Replay] Using simple buffer"),new Vr}unction Jr(t,e,i){if(!t.eventBuffer)return null;if(t.isPaused())return null;const r=e.timestamp>9999999999?e.timestamp:1e3*e.timestamp;if(r+t.timeouts.sessionIdle<Date.now())return null;const s=t.getContext().earliestEvent;t.session&&0===t.session.segmentId&&(!s||r<s)&&(t.getContext().earliestEvent=r);try{return await t.eventBuffer.addEvent(e,i)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error(e),t.stop("addEvent");const i=(0,f.Gd)().getClient();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}unction Qr(t){return"transaction"===t.type}function Xr(t){const e=);returnvar ts;unction is(t,e){"sentry.transaction"!==e.category&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate((()=>(Jr(t,{type:Pi.Custom,timestamp:1e3*(e.timestamp||0),data:{tag:"breadcrumb",payload:V(e)}}),"console"===e.category))))}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(ts||(ts={}));const rs=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid"]);onst ns=t=>e=>{if(!t.isEnabled())return;const i=function(t){let e,i;try{i=t),e=(0,Vt.Rt)(i)}catch(t){e="<unknown>"}const r=i&&"__sn"in i&&i.__sn.type===ts.Element?i.__sn:null;return es({category:`ui.${t.name}`,message:e,data:r?{nodeId:r.id,node:{id:r.id,tagName:r.tagName,textContent:i?Array.from(i.childNodes).map(().filter(Boolean).map((t=>t.trim())).join(""):"",attributes:ss(r.attributes)}}:{}})}(e);i&&is(t,i)};function os(t,e=!1){const i=e?Xr(t):void 0;return(e,r)=>{if(function(t){return"replay_event"===t.type}(e))return delete e.breadcrumbs,e;if(!Zr(e)&&!Qr(e))return e;if(e,r)&&!t.getOptions()._experiments.captureExceptions)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Replay] Ignoring error from rrweb internals",e),null;if((Zr(e)||Qr(e)&&"session"===t.recordingMode)&&(e.tags={...e.tags,replayId:t.getSessionId()}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&t.getOptions()._experiments.traceInternals&&Zr(e)){const t=e);!{message:`Tagging event (${e.event_id}) - ${e.message} - ${t.type}: ${t.value}`})}return i&&i(e,{statusCode:200}),e}}nction cs(t,e){return("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||!t.getOptions()._experiments.traceInternals)&&e)}ion fs(t){if(t){try{return JSON.parse(t)}catch(t){}return t}}function gs(t,e){if(!t)return;if(!e)return{size:t};const i={size:t};return t<ei?i.body=e:i._meta={errors:["MAX_BODY_SIZE_EXCEEDED"]},i}sync function _s(t,e,i){try{const r=await async function(t,e,i){const{startTimestamp:r,endTimestamp:s}=e,{url:n,method:o,status_code:a,request_body_size:l,response_body_size:c}=t.data,h=function({captureBodies:t},e,i){if(!t)return gs(i,void 0);const r=fs(ps(vs(e)));return gs(i,r)}(i,e.input,l),d=await async function({captureBodies:t,textEncoder:e},i,r){if(!t&&void 0!==r)return gs(r,void 0);try{const s=i.clone(),{body:n,bodyText:o}=await async function(t){let e;try{e=await t.text()}catch(t){return{}}try{return{body:JSON.parse(e),bodyText:e}}catch(t){}return{bodyText:e,body:e}}(s),a=o&&o.length&&void 0===r?ds(o,e):r;return gs(a,t?n:void 0)}catch(t){return gs(r,void 0)}}(i,e.response,c);return{startTimestamp:r,endTimestamp:s,url:n,method:o,statusCode:a||0,request:h,response:d}}(t,e,i),s=ms("resource.fetch",r);hs(i.replay,s)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("[Replay] Failed to capture fetch breadcrumb",t)}}sync function bs(t,e,i){try{const r=function(t,e,i){const{startTimestamp:r,endTimestamp:s,input:n}=e,{url:o,method:a,status_code:l,request_body_size:c,response_body_size:h}=t.data;if(!o)return null;const d=gs(c,i.captureBodies?fs(ps(n)):void 0),u=gs(h,i.captureBodies?fs(e.xhr.responseText):void 0);return{startTimestamp:r,endTimestamp:s,url:o,method:a,statusCode:l||0,request:d,response:u}}(t,e,i),s=ms("resource.xhr",r);hs(i.replay,s)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("[Replay] Failed to capture fetch breadcrumb",t)}}function ws(t){const e=(0,f.Gd)().getClient();try{const i={replay:t,textEncoder:new TextEncoder,captureBodies:t.getOptions()._experiments.captureNetworkBodies||!1};e&&e.on?e.on("beforeAddBreadcrumb",():((0,Ft.o)("fetch",t)),(0,Ft.o)("xhr",function(t){return e=>{if(!t.isEnabled())return;const i=function(t){const{startTimestamp:e,endTimestamp:i,xhr:r}=t;if(!e||!i||!r.__sentry_xhr__)return null;const{method:s,url:n,status_code:o}=r.__sentry_xhr__;return void 0===n?null:{type:"resource.xhr",name:n,start:e/1e3,end:i/1e3,data:{method:s,statusCode:o}}}(e);hs(t,i)}}(t)))}catch(t){}}let ks=null;const Ss=nst xs={resource:paint:navigation:"largest-contentful-paint":;nc function Ms({recordingData:t,replayId:e,segmentId:i,includeReplayStartTimestamp:r,eventContext:s,timestamp:n,session:o,options:a}){const c={recordingData:t,headers:{segment_id:i}}),{urls:h,errorIds:d,traceIds:u,initialTimestamp:p}=s,m=(0,f.Gd)(),g=m.getClient(),y=m.getScope(),_=g&&g.getTransport(),v=g&&g.getDsn();if(!(g&&y&&_&&v&&o.sampled))return;const b={type:Xe,...r?{replay_start_timestamp:p/1e3}:{},timestamp:n/1e3,error_ids:d,trace_ids:u,urls:h,replay_id:e,segment_id:i,replay_type:o.sampled},w=await {scope:y,client:g,replayId:e,event:b});if(!w)return g.recordDroppedEvent("event_processor","replay",b),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("An event processor returned `null`, will not send event."));w.contexts={...w.contexts,replay:{...w.contexts&&w.contexts.replay,session_sample_rate:a.sessionSampleRate,error_sample_rate:a.errorSampleRate}};const k=w,c,v,g.getOptions().tunnel);let S;try{S=await _.send(k)}catch(t){const e=new Error(ti);try{e.cause=t}catch(t){}throw e}if(!S)return S;if("number"==typeof S.statusCode&&(S.statusCode<200||S.statusCode>=300))throw new Bs(S.statusCode);return S}sync function Rs(t,e={count:0,interval:5e3}){const{recordingData:i,options:r}=t;if(i.length)try{return await Ms(t),!0}catch(i){if(i instanceof Bs)throw i;if(w("Replays",{_retryCount:e.count}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r._experiments&&r._experiments.captureExceptions&&g(i),e.count>=3){const t=new Error(`${ti} - max retries exceeded`);try{t.cause=i}catch(t){}throw t}return e.interval*=++e.count,await new Promise(()}}class Ds{__init(){this.eventBuffer=null}__init2(){this.performanceEvents=[]}__init3(){this.recordingMode="session"}_init5(){this._performanceObserver=null}__init6(){this._flushLock=null}_init8(){this._isEnabled=!1}__init9(){this._isPaused=!1}__init10(){this._hasInitializedCoreListeners=!1}__init11(){this._stopRecording=null}tContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}){try{Ze.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ze.addEventListener("blur",this._handleWindowBlur),Ze.addEventListener("focus",this._handleWindowFocus),this._hasInitializedCoreListeners||(!function(t){const e=(0,f.Gd)().getScope(),i=(0,f.Gd)().getClient();e&&e.addScopeListener(Ss(t)),(0,Ft.o)("dom",ns(t)),(0,Ft.o)("history",ls(t)),ws(t),(0,rt.c)(os(t,!Es(i))),Es(i)&&(i.on("afterSendEvent",Xr(t)),i.on("createDsc",())}(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}"PerformanceObserver"in Ze&&(this._performanceObserver=Or(this))}init14(){this._handleWindowBlur=()=>{const t=es({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}lush(){if(this.session&&this.eventBuffer){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await this),this.eventBuffer))try{const t=await this.eventBuffer.finish(),e=this.session.id,i=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession(),await Rs({replayId:e,recordingData:t,segmentId:r,includeReplayStartTimestamp:0===r,eventContext:i,session:this.session,options:this.getOptions(),timestamp:Date.now()})}catch(t){this._handleException(t),this.stop("sendReplay");const e=(0,f.Gd)().getClient();e&&e.recordDroppedEvent("send_error","replay")}}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("[Replay] No session or eventBuffer found to flush.")} Fs='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]';let Vs=!1;class Ns{static __initStatic(){this.id="Replay"}__init(){this.name=Ns.id}t(){this._replay&&this._replay.start()}.__initStatic();var Us=i(9553),js=i(516);const qs=100,Gs=5e3,zs=36e5;Zs=20),Qs=1e6,Xs=String(0),tn="main";let en="",rn="",sn="",nn=ct.navigator&&ct.navigator.userAgent||"",on="";const an=ct.navigator&&ct.navigator.language||ct.navigator&&ct.navigator.languages&&ct.navigator.languages[0]||"";const ln=ct.navigator&&ct.navigator.userAgentData;var cn;unction dn(t,e,i,r){if("transaction"!==t.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");const s=t.sdkProcessingMetadata.profile;if(null==s)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${s} instead.`);if(!s.profile_id)throw new TypeError("Profile is missing profile_id");if(s.samples.length<=1)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] Discarding profile because it contains less than 2 samples"),null;const o=t),a=i);!t,i&&i.sdk);const h=t,a,r,e),d=hn(s),u="number"==typeof t.start_timestamp?1e3*t.start_timestamp:Date.now(),p="number"==typeof t.timestamp?1e3*t.timestamp:Date.now();return j(h,[[{type:"profile"},{event_id:s.profile_id,timestamp:new Date(u).toISOString(),platform:"javascript",version:"1",release:t.release||"",environment:t.environment||wt.J,runtime:{name:"javascript",version:ct.navigator.userAgent},os:{name:en,version:rn,build_number:nn},device:{locale:an,model:on,manufacturer:nn,architecture:sn,is_emulator:!1},profile:d,transactions:[{name:t.transaction||"",id:t.event_id||(0,c.DM)(),trace_id:o,active_thread_id:Xs,relative_start_ns:"0",relative_end_ns:(1e6*(p-u)).toFixed(0)}]}]])}"object"==typeof(cn=ln)&&null!==cn&&"getHighEntropyValues"in cn&&ln.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(().catch((t=>{}));const un=3e4;let pn=!1;unction fn(t){const e=ct.Profiler;if("function"!=typeof e)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."),t;if(!t.sampled)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] Transaction is not sampled, skipping profiling"),t;if(pn)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] Profiling has been disabled for the duration of the current user session."),t;const i=(0,f.Gd)().getClient(),r=i&&i.getOptions(),s=r&&r.profilesSampleRate||0;if(void 0===s)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] Profiling disabled, enable it by setting `profilesSampleRate` option to SDK init call."),t;if(Math.random()>s)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] Skip profiling transaction due to sampling."),t;const n=Math.floor(un/10);let o;try{o=new e({sampleInterval:10,maxBufferSize:n})}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(l.kg.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),l.kg.log("[Profiling] Disabling profiling for current user session.")),pn=!0}if(!o)return t;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(`[Profiling] started profiling transaction: ${t.name||t.description}`);const a=(0,c.DM)();let h=null;function d(){t&&o&&(h?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] profile for:",t.name||t.description,"already exists, returning early"):o.stop().then((e=>{u&&(ct.clearTimeout(u),u=void 0),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(`[Profiling] stopped profiling of transaction: ${t.name||t.description}`),e?e.samples.length<2||(h={...e,profile_id:a},a,h)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(`[Profiling] profiler returned null profile for: ${t.name||t.description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started")})).catch(())}let u=ct.setTimeout((,un);const p=t.finish.bind(t);return t.finish=t}function gn(){const t=(0,f.cu)();t.__SENTRY__?(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] startTransaction exists, patching it with profiling functionality..."),t.__SENTRY__.extensions.startTransaction=function(t){return (t.__SENTRY__.extensions.startTransaction)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] startTransaction does not exists, profiling will not work. Make sure you import @sentry/tracing package before @sentry/profiling-node as import order matters.")):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("[Profiling] Can't find main carrier, profiling won't work.")}class yn{constructor(){yn.prototype.__init.call(this)}__init(){this.name="BrowserProfilingIntegration"}et _n={};ct.Sentry&&ct.Sentry.Integrations&&(_n=ct.Sentry.Integrations);const vn={..._n,...r,...s}},1131:5659:(t,e,i)=>{"use strict";i.d(e,{Gd:()=>g,Xb:()=>p,cu:()=>m,pj:()=>f,vi:()=>_});var r=i(2844),s=i(1170),n=i(2343),o=i(1235),a=i(1422),l=i(1131),c=i(350),h=i(9015);const d=4,u=100;class p{ent(){return this.getStackTop().client}etStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}tEventId(){return this._lastEventId}etUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}etTag(t,e){this.getScope().setTag(t,e)}setExtra(t,e){this.getScope().setExtra(t,e)},e,i)=>{"use strict";i.d(e,{T:()=>y,l:()=>g});var r=i(2343),s=i(7597),n=i(5659),o=i(7522),a=i(2533),l=i(9791);let c=!1;.tag="sentry_tracingErrorCallback";var d=i(5544),u=i(8069);4:(t,e,i)=>{"use strict";i.d(e,{AT:()=>a,io:()=>h});var r=i(1170),s=i(2343),n=i(8903),o=i(8069);const a={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},l=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];8903:(t,e,i)=>{"use strict";i.d(e,{Dr:()=>l,Zd:()=>c,gB:()=>a});var r=i(2844),s=i(1170),n=i(2343),o=i(535);069:(t,e,i)=>{"use strict";i.d(e,{Y:()=>l});var r=i(2343),s=i(535),n=i(1131),o=i(5659),a=i(8903);,9791:7522:9867:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BROWSER_TRACING_INTEGRATION_ID:()=>j,BrowserTracing:()=>I,IdleTransaction:()=>Y,Integrations:()=>J,Span:()=>U,SpanStatus:()=>K,TRACEPARENT_REGEXP:()=>$,Transaction:()=>N,addExtensionMethods:()=>L,defaultRequestInstrumentationOptions:()=>q,extractTraceparentData:()=>F,getActiveTransaction:()=>O,hasTracingEnabled:()=>G,instrumentOutgoingRequests:()=>H,spanStatusfromHttpCode:()=>V,startIdleTransaction:()=>W,stripUrlQueryAndFragment:()=>z});var r,s=i(9553),n=i(758),o=i(9791),a=i(7638),l=i(8903),c=i(8069),h=i(516),d=i(7522),u=i(6956),p=i(5544),m=i(6890);r||(r={}));var g=i(1422),y=i(2343),_=i(535),v=i(2844),b=i(7597);_initStatic();lass T{static __initStatic(){this.id="Express"}__init(){this.name=T.id}etupOnce(t,e){this._router?w(e)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.log("Express Integration is skipped because of instrumenter configuration."):(this._router,this._methods),function(t){const e="settings"in t;e&&void 0===t._router&&t.lazyrouter&&t.lazyrouter();const i=e?t._router:t;if(!i)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.debug("Routing instrumentation is currently only supported in Express 4."));const r=Object.getPrototypeOf(i),s=r.process_params;r.process_params=function(t,e,i,r,n){i._reconstructedRoute||(i._reconstructedRoute="");const{layerRoutePath:o,isRegex:a,isArray:l,numExtraSegments:c}=t);(o||a||l)&&(i._hasParameters=!0);const h=(o||t.path||"").split("/").filter(().join("/");h&&h.length>0&&(i._reconstructedRoute+=`/${h}${a?"/":""}`);if((0,u.$A)(i.originalUrl||"")+c===(0,u.$A)(i._reconstructedRoute)){i._hasParameters||i._reconstructedRoute!==i.originalUrl&&(i._reconstructedRoute=i.originalUrl);const t=r.__sentry_transaction;if(t&&"custom"!==t.metadata.source){const e=i._reconstructedRoute||"/";t.setName(...E(i,{path:!0,method:!0,customRoute:e}))}}return s.call(this,t,e,i,r,n)}}(this._router)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.error("ExpressIntegration is missing an Express instance")}}.__initStatic();.__initStatic();const A=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],P={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class M{static __initStatic(){this.id="Mongo"}__init(){this.name=M.id}nitStatic();class B{tatic __initStatic(){this.id="Mysql"}__init(){this.name=B.id}loadDependency(){return this._module=this._module||(0,g.$y)("mysql/lib/Connection.js")}setupOnce(t,e){if(w(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.log("Mysql Integration is skipped because of instrumenter configuration."));const i=this.loadDependency();i?(0,_.hl)(i,"createQuery",(function(t){return function(i,r,s){const n=f([e().getScope(),"optionalAccess",t=>t.getSpan,"call",t=>t()]),o=f([n,"optionalAccess",t=>t.startChild,"call",t=>t({description:"string"==typeof i?i:i.sql,op:"db"})]);return"function"==typeof s?t.call(this,i,r,(function(t,e,i){f([o,"optionalAccess",t=>t.finish,"call",t=>t()]),s(t,e,i)})):"function"==typeof r?t.call(this,i,():t.call(this,i,r,s)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.error("Mysql Integration was unable to require `mysql` package.")}}B.__initStatic();class R{static __initStatic(){this.id="Postgres"}__init(){this.name=R.id}tupOnce(t,e){if(w(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.log("Postgres Integration is skipped because of instrumenter configuration."));const i=this.loadDependency();if(!i)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!f([i,"access",t=>t.native,"optionalAccess",t=>t.Client]))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:r}=this._usePgNative?i.native:i;(0,_.hl)(r.prototype,"query",(function(t){return function(i,r,s){const n=f([e().getScope(),"optionalAccess",t=>t.getSpan,"call",t=>t()]),o=f([n,"optionalAccess",t=>t.startChild,"call",);if("function"==typeof s)return t.call(this,i,r,(function(t,e){f([o,"optionalAccess",t=>t.finish,"call",t=>t()]),s(t,e)}));if("function"==typeof r)return t.call(this,i,();const a=void 0!==r?t.call(this,i,r):t.call(this,i);return(0,b.J8)(a)?a.then((t=>(f([o,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):(f([o,"optionalAccess",t=>t.finish,"call",t=>t()]),a)}}))}}R.__initStatic();class D{upOnce(t,e){this._client?w(e)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.log("Prisma Integration is skipped because of instrumenter configuration."):this._client.$use(((t,i)=>{const r=f([e().getScope(),"optionalAccess",t=>t.getSpan,"call",t=>t()]),s=t.action,n=t.model,o=f([r,"optionalAccess",t=>t.startChild,"call",),a=i(t);return(0,b.J8)(a)?a.then(():(f([o,"optionalAccess",t=>t.finish,"call",t=>t()]),a)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&y.kg.error("PrismaIntegration is missing a Prisma Client Instance")}}D.__initStatic();const I=s.gE,L=n.r,O=o.x1,F=a.q,V=l.Zd,N=c.Y,U=l.Dr,j=s.N,q=h.k3,G=d.z,z=u.rt,$=a.K,Y=p.io,H=h.L7,W=m.l,K=r,J={BrowserTracing:I,Apollo:k,Express:T,GraphQL:C,Mongo:M,Mysql:B,Postgres:R,Prisma:D};("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,n.r)()},9181:(t,e,i)=>{"use strict";i.d(e,{EN:()=>c,IQ:()=>h,bU:()=>n});var r=i(7597),s=i(2343);const n="baggage",o="sentry-",a=/^sentry-/,l=8192;464:8518:2533:(t,e,i)=>{"use strict";i.d(e,{o:()=>m});var r=i(7597),s=i(2343),n=i(535),o=i(360),a=i(8823),l=i(1235);const c=(0,l.Rf)();const h=(0,l.Rf)(),d={},u={};function p(t){if(!u[t])switch(u[t]=!0,t){case"console":!);break;case"dom":!);break;case"xhr":!function(){if(!("XMLHttpRequest"in h))return;const t=XMLHttpRequest.prototype;(0,n.hl)(t,"open",(),(0,n.hl)(t,"send",()}();break;case"fetch":!);break;case"history":!);break;case"error":S=h.onerror,h.onerror=h.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":E=h.onunhandledrejection,h.onunhandledrejection=h.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.warn("unknown instrumentation type:",t))}}_;const v=1e3;let b,w;et S=null;let E=null},7597:2343:2844:1422:535:360:(t,e,i)=>{"use strict";i.d(e,{$P:()=>l,Sq:()=>o,pE:()=>n});const r=50,s=/\(error: (.*)\)/;function n(...t){const e=t.sort(().map(();return(t,i=0)=>{const n=[],o=t.split("\n");for(let t=i;t<o.length;t++){const i=o[t];if(i.length>1024)continue;const a=s.test(i)?i.replace(s,"$1"):i;for(const t of e){const e=t(a);if(e){n.push(e);break}}if(n.length>=r)break}return n)}}onst a="<anonymous>";,7321:8823:6893:1170:7638:(t,e,i)=>{"use strict";i.d(e,{K:()=>r,q:()=>s});const r=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");,6956:1235:1206:7484:9387:178:646:1248:function(module,exports,__webpack_require__){var factory;"undefined"!=typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};nction getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}ar audioControllerFactory=),createTypedArray=);unction _typeof$6(t){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};),BMMath.random=Math.random,BMMath.abs=var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;ction BMEnterFrameEvent(t,e,i,r){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=r<0?-1:1}ction BMDestroyEvent(t,e){this.type=t,this.target=e}nction BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}var createElementID=(_count=0,,_count;gbToHex=),setSubframeEnabled=getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=getIdPrefix=function(){return idPrefix$1};unction _typeof$5(t){return _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(t)}var dataManager=),ImagePreloader=);function BaseEvent(){}BaseEvent.prototype={triggerEvent:addEventListener:removeEventListener:;var markerParser=),ProjectInterface=),renderers={},registerRenderer=unction _typeof$4(t){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(t)}var AnimationItem=extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=AnimationItem.prototype.setData=AnimationItem.prototype.includeLayers=AnimationItem.prototype.onSegmentComplete=AnimationItem.prototype.loadNextSegment=AnimationItem.prototype.loadSegments=AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=AnimationItem.prototype.configAnimation=AnimationItem.prototype.waitForFontsLoaded=AnimationItem.prototype.checkLoaded=AnimationItem.prototype.resize=AnimationItem.prototype.setSubframe=AnimationItem.prototype.gotoFrame=AnimationItem.prototype.renderFrame=AnimationItem.prototype.play=AnimationItem.prototype.pause=AnimationItem.prototype.togglePause=AnimationItem.prototype.stop=AnimationItem.prototype.getMarkerData=AnimationItem.prototype.goToAndStop=AnimationItem.prototype.goToAndPlay=AnimationItem.prototype.advanceTime=AnimationItem.prototype.adjustSegment=AnimationItem.prototype.setSegment=AnimationItem.prototype.playSegments=AnimationItem.prototype.resetSegments=AnimationItem.prototype.checkSegments=AnimationItem.prototype.destroy=AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=AnimationItem.prototype.updaFrameModifier=AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=AnimationItem.prototype.getAssetData=AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=AnimationItem.prototype.updateDocumentData=AnimationItem.prototype.trigger=AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=var animationManager=),BezierFactory=),pooling={double:,poolFactory=bezierLengthPool=poolFactory(8,(),segmentsLengthPool=poolFactory(8,(,();ar bez=bezFunction(),PropertyFactory=);function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:iterateDynamicProperties:initDynamicPropertyContainer:;var pointPool=poolFactory(8,();hapePath.prototype.setPathData=ShapePath.prototype.setLength=ShapePath.prototype.doubleArrayLength=ShapePath.prototype.setXYAt=ShapePath.prototype.setTripleAt=ShapePath.prototype.reverse=ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(,(),factory.clone=factory),factory;hapeCollection.prototype.addShape=ShapeCollection.prototype.releaseShapes=var shapeCollectionPool=(ob={newShapeCollection:release:,_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=),Matrix=);ar lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(t){setLocationHref(t)}unction setSubframeRendering(t){setSubframeEnabled(t)}lay=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.10.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(t){}var ShapeModifiers=);function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=ShapeModifier.prototype.init=ShapeModifier.prototype.processKeys=extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=TrimModifier.prototype.addShapeToModifier=TrimModifier.prototype.calculateShapeEdges=TrimModifier.prototype.releasePathsData=TrimModifier.prototype.processShapes=TrimModifier.prototype.addPaths=TrimModifier.prototype.addSegment=TrimModifier.prototype.addSegmentFromArray=TrimModifier.prototype.addShapes=extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=PuckerAndBloatModifier.prototype.processShapes=function(t){var e,i,r,s,n,o,a=this.shapes.length,l=this.amount.v;if(0!==l)for(i=0;i<a;i+=1){if(o=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(o.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,s=n.shape.paths._length,r=0;r<s;r+=1)o.addShape(this.processPath(e[r],l));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=);function RepeaterModifier(){}function RoundCornersModifier(){}ifier(){}setPathModifier(){}xtendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=RepeaterModifier.prototype.applyTransforms=RepeaterModifier.prototype.init=RepeaterModifier.prototype.resetElements=RepeaterModifier.prototype.cloneElements=RepeaterModifier.prototype.changeGroupRender=RepeaterModifier.prototype.processShapes=RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=RoundCornersModifier.prototype.processPath=RoundCornersModifier.prototype.processShapes=PolynomialBezier.prototype.point=PolynomialBezier.prototype.derivative=PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=PolynomialBezier.prototype.inflectionPoints=PolynomialBezier.prototype.split=PolynomialBezier.prototype.bounds=PolynomialBezier.prototype.boundingBox=PolynomialBezier.prototype.intersections=PolynomialBezier.shapeSegment=function(t,e){var i=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[i],t.v[i],!0)},PolynomialBezier.shapeSegmentInverted=extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=ZigZagModifier.prototype.processPath=ZigZagModifier.prototype.processShapes=extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=OffsetPathModifier.prototype.processPath=OffsetPathModifier.prototype.processShapes=var FontManager=);function RenderableElement(){}RenderableElement.prototype={initRenderable:addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:prepareRenderableFrame:checkTransparency:checkLayerLimits:renderRenderable:sourceRectAtTime:getLayerSize:;var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},,blendModeEnums;function SliderEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function AngleEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function ColorEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function PointEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function LayerIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function MaskIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}tion BaseElement(){}function FrameElement(){}nction BaseRenderer(){}tendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=BaseElement.prototype={checkMasks:initExpressions:setBlendMode:initBaseData:getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:prepareProperties:addDynamicProperty:,FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=FootageElement.prototype.getFootageData=AudioElement.prototype.prepareFrame=extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=AudioElement.prototype.show=AudioElement.prototype.hide=AudioElement.prototype.pause=AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=BaseRenderer.prototype.createItem=BaseRenderer.prototype.createCamera=BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=BaseRenderer.prototype.includeLayers=BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=BaseRenderer.prototype.buildElementParenting=BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=BaseRenderer.prototype.getElementById=BaseRenderer.prototype.getElementByPath=BaseRenderer.prototype.setupGlobalData=TransformElement.prototype={initTransform:renderTransform:globalToLocal:mHelper:new Matrix},MaskElement.prototype.getMaskProperty=MaskElement.prototype.renderFrame=MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=MaskElement.prototype.drawPath=MaskElement.prototype.destroy=var filtersFactory=),featureSupport=),registeredEffects={},idPrefix="filter_result_";nction SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}unction ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},SVGBaseElement.prototype={initRendererElement:createContainerElements:renderElement:destroyBaseElement:getBaseElement:createRenderableComponents:getMatte:setMatte:,HierarchyElement.prototype={initHierarchy:setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:,extendPrototype([RenderableElement,createProxyFunction({initElement:hide:show:renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:renderModifiers:searchProcessedElement:addProcessedElement:prepareFrame:;var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};a.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=DashProperty.prototype.getValue=extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=GradientProperty.prototype.checkCollapsable=GradientProperty.prototype.getValue=extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=SVGGradientFillStyleData.prototype.setGradientData=SVGGradientFillStyleData.prototype.setGradientOpacity=extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=SVGElementsRenderer=);endPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=SVGShapeElement.prototype.filterUniqueShapes=SVGShapeElement.prototype.setShapesAsAnimated=SVGShapeElement.prototype.createStyleElement=SVGShapeElement.prototype.createGroupElement=SVGShapeElement.prototype.createTransformElement=SVGShapeElement.prototype.createShapeElement=SVGShapeElement.prototype.addToAnimatedContents=SVGShapeElement.prototype.setElementStyles=SVGShapeElement.prototype.reloadShapes=SVGShapeElement.prototype.searchShapes=SVGShapeElement.prototype.renderInnerContent=SVGShapeElement.prototype.renderShape=SVGShapeElement.prototype.destroy=LetterProps.prototype.update=TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=TextProperty.prototype.setCurrentData=TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=TextProperty.prototype.addEffect=TextProperty.prototype.getValue=TextProperty.prototype.getKeyframeValue=TextProperty.prototype.buildFinalText=TextProperty.prototype.completeTextData=TextProperty.prototype.updateDocumentData=TextProperty.prototype.recalculate=TextProperty.prototype.canResizeFont=TextProperty.prototype.setMinimumFontSize=var TextSelectorProp=);nction ITextElement(){}TextAnimatorProperty.prototype.searchProperties=TextAnimatorProperty.prototype.getMeasures=TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=ITextElement.prototype.prepareFrame=ITextElement.prototype.createPathShape=ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=ITextElement.prototype.buildColor=ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};unction ISolidElement(t,e,i){this.initElement(t,e,i)}unction SVGRendererBase(){}function ICompElement(){}ndPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=SVGTextLottieElement.prototype.buildTextContents=SVGTextLottieElement.prototype.buildShapeData=SVGTextLottieElement.prototype.buildNewText=SVGTextLottieElement.prototype.sourceRectAtTime=SVGTextLottieElement.prototype.getValue=SVGTextLottieElement.prototype.renderInnerContent=extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=SVGRendererBase.prototype.destroy=SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=SVGRendererBase.prototype.buildItem=SVGRendererBase.prototype.checkPendingElements=SVGRendererBase.prototype.renderFrame=SVGRendererBase.prototype.appendElementInPos=SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=ICompElement.prototype.prepareFrame=ICompElement.prototype.renderInnerContent=ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=ICompElement.prototype.destroy=extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},CVContextData.prototype.duplicate=CVContextData.prototype.reset=CVContextData.prototype.popTransform=CVContextData.prototype.popOpacity=CVContextData.prototype.pop=CVContextData.prototype.push=CVContextData.prototype.getTransform=function(){return this.cTr},CVContextData.prototype.getOpacity=function(){return this.cO},CVContextData.prototype.setOpacity=function(t){this.cO=t},ShapeTransformManager.prototype={addTransformSequence:processSequence:processSequences:getNewKey:;var lumaLoader=ar assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas};function CVEffects(){}unction CVBaseElement(){}CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};tion CVSolidElement(t,e,i){this.initElement(t,e,i)}ction HBaseElement(){}ement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:createContent:function(){},setBlendMode:createRenderableComponents:hideElement:showElement:clearCanvas:prepareLayer:exitLayer:renderFrame:destroy:mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=CVShapeElement.prototype.createStyleElement=CVShapeElement.prototype.createGroupElement=CVShapeElement.prototype.createTransformElement=CVShapeElement.prototype.createShapeElement=CVShapeElement.prototype.reloadShapes=CVShapeElement.prototype.addTransformToStyleList=CVShapeElement.prototype.removeTransformFromStyleList=CVShapeElement.prototype.closeStyles=CVShapeElement.prototype.searchShapes=CVShapeElement.prototype.renderInnerContent=CVShapeElement.prototype.renderShapeTransform=CVShapeElement.prototype.drawLayer=CVShapeElement.prototype.renderShape=CVShapeElement.prototype.renderStyledShape=CVShapeElement.prototype.renderPath=CVShapeElement.prototype.renderFill=CVShapeElement.prototype.renderGradientFill=CVShapeElement.prototype.renderStroke=CVShapeElement.prototype.destroy=extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=CVTextElement.prototype.renderInnerContent=extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=CVImageElement.prototype.renderInnerContent=CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=CanvasRendererBase.prototype.ctxOpacity=CanvasRendererBase.prototype.reset=CanvasRendererBase.prototype.save=CanvasRendererBase.prototype.restore=CanvasRendererBase.prototype.configAnimation=CanvasRendererBase.prototype.updateContainerSize=CanvasRendererBase.prototype.destroy=CanvasRendererBase.prototype.renderFrame=CanvasRendererBase.prototype.buildItem=CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=CVCompElement.prototype.destroy=CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:createContainerElements:renderElement:renderFrame:destroy:createRenderableComponents:addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=HShapeElement.prototype.getTransformedPoint=HShapeElement.prototype.calculateShapeBoundingBox=HShapeElement.prototype.checkBounds=HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=HShapeElement.prototype.calculateF=HShapeElement.prototype.calculateBoundingBox=HShapeElement.prototype.expandStrokeBoundingBox=HShapeElement.prototype.currentBoxContains=HShapeElement.prototype.renderInnerContent=extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=HTextElement.prototype.buildNewText=HTextElement.prototype.renderInnerContent=extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=HCameraElement.prototype.prepareFrame=HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=HybridRendererBase.prototype.appendElementInPos=HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=HybridRendererBase.prototype.createThreeDContainer=HybridRendererBase.prototype.build3dContainers=HybridRendererBase.prototype.addTo3dContainer=HybridRendererBase.prototype.configAnimation=HybridRendererBase.prototype.destroy=HybridRendererBase.prototype.updateContainerSize=HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=HybridRendererBase.prototype.initItems=HybridRendererBase.prototype.searchExtraCompositions=extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=HCompElement.prototype.addTo3dContainer=HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=var CompExpressionInterface=Expressions=),MaskManagerInterface=),ExpressionPropertyInterface=),TransformExpressionInterface=LayerExpressionInterface=),propertyGroupFactory=PropertyInterface=EffectsExpressionInterface=),ShapePathInterface=ShapeExpressionInterface=),TextExpressionInterface=function _typeof$2(t){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(t)}var FootageInterface=(dataInterfaceFactory=,dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};unction _typeof$1(t){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(t)}r propTypes={SHAPE:"shape"};function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var ExpressionManager=),expressionHelpers={searchExpressions:getSpeedAtTime:getVelocityAtTime:getValueAtTime:getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};unction initialize$1(){addPropertyDecorator()}nction SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:;var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";Prototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=SVGFillFilter.prototype.renderFrame=SVGStrokeEffect.prototype.initialize=SVGStrokeEffect.prototype.renderFrame=SVGTritoneFilter.prototype.renderFrame=SVGProLevelsFilter.prototype.createFeFunc=SVGProLevelsFilter.prototype.getTableValue=SVGProLevelsFilter.prototype.renderFrame=extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=var _svgMatteSymbols=[];turn SVGMatte3Effect.prototype.findSymbol=SVGMatte3Effect.prototype.replaceInParent=SVGMatte3Effect.prototype.setElementAsMask=SVGMatte3Effect.prototype.initialize=SVGMatte3Effect.prototype.renderFrame=SVGGaussianBlurEffect.prototype.renderFrame=registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie},module.exports=factory())},466:4319:function(t,e,i){!function(e,r){"use strict";var s;try{s=i(Object()))}catch(t){}t.exports=s)}()},6496:t=>{!function(){var e=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],i="undefined"!=typeof window,r=i&&null!=window.mozInnerScreenX;oid 0!==t.exports?t.exports=s:i&&(window.getCaretCoordinates=s)}()},8694:2505:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=,2738:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(7147);const r={accept:!0,"accept-language":!0,"content-language":!0,"content-type":!0};function s(t,e={}){return"cors"===e.mode?function(t,e={}){let i=e.headers||{};return Object.keys(i).forEach((t=>{const s=t.toLowerCase();r[s]||delete i[t],"GET"!==e.method&&"HEAD"!==e.method||"content-type"===s&&delete i[t]})),e.headers=i,e.mode="cors",e.credentials=e.credentials||"same-origin",n(t,e)}(t,e):function(t,e={}){return e.headers=e.headers||{},e.headers["X-Requested-With"]="XMLHttpRequest",e.mode="same-origin",e.credentials="same-origin",n(t,e)}(t,e)}function n(t,e){const i=Object.assign(Object.assign({},e),{headers:new Headers(e.headers)});return fetch(t,i).then((t=>{if(t.status<400)return t;throw t}))}function o(t){return function(e,i={}){return i.headers=i.headers||{},i.headers.Accept="application/json",i.headers["Content-Type"]="application/json",t(e,i).then((t=>204===t.status?{}:t.json()))}}function a(t,e={}){return e.method="GET",s(t,e)}function l(t,e={}){return e.method="POST",s(t,e)}function c(t,e={}){return e.method="PUT",s(t,e)}function h(t,e={}){return e.method="DELETE",s(t,e)}const d={get:a,post:l,put:c,delete:h,request:s,JSON:{get:o(a),post:o(l),put:o(c),delete:o(h),request:o(s)}};e.default=d},7998:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(1248);e.default=r},8160:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0;const r=i(466);e.Template=class{static render(t,e){if("TEMPLATE"===t.tagName)throw new Error(`Cannot use template tag: ${t.id}.`);const i=document.createElement("div");return i.innerHTML=r.render(t.innerHTML,e),Array.prototype.slice.call(i.childNodes)}static renderElement(t,e){const i=this.render(t,e).filter((t=>t.nodeType===Node.ELEMENT_NODE));if(1!==i.length)throw new Error("Must give single Element template to Template.renderElement");return i[0]}static renderTo(t,e,i){this.render(t,e).forEach((t=>i.appendChild(t)))}static renderArrayTo(t,e,i){const r=document.createDocumentFragment();e.map((e=>{this.render(t,e).forEach((t=>r.appendChild(t)))})),i.appendChild(r)}}},8747:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initSentry=void 0;const r=i(505),s=i(505),n=i(9867),o=i(8694),a=i(5457),l="sentry_user_key",c=[/.*Non-Error promise rejection captured with (keys|value).*/,/.*TypeError.*forEach is not a function.*/,/.*TypeError.*this.watchCallback is not a function.*/];e.initSentry=function(){r.init({dsn:"https://cbbc3ab77bbb42fa8c09ca0f1b7dc3cb@o148425.ingest.sentry.io/4504286861066240",release:"84fdd1a6a56049798313195c1c65fd7fac93021e",integrations:[new n.BrowserTracing],environment:(0,a.getSentryEnv)()||"local",sampleRate:Number((0,a.getSentrySampleRate)()),tracesSampleRate:Number((0,a.getSentrySampleRate)()),ignoreErrors:c,beforeSend:t=>(0,a.isProduction)()||(0,a.isStaging)()?navigator.userAgent.includes("Yeti")?null:o.default.test(navigator.userAgent)?t:null:null}),function(){let t=localStorage.getItem(l);t||(t=[...Array(16)].map(().join(""),localStorage.setItem(l,t));(0,s.setUser)({id:t})}()}},3274:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDateTime=e.formatDateTimeInJST=e.formatDateTime=void 0;const r=i(7484),s=i(9387),n=i(178);r.extend(s),r.extend(n),e.formatDateTime=e.formatDateTimeInJST=function(t,e){return r.utc(t).tz("Asia/Tokyo").format(e)},e.parseDateTime=,5457:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.getSentrySampleRate=e.isLocal=e.isStaging=e.isProduction=e.getSentryEnv=e.detectSentryEnv=e.datasetFromHtml=e.SentryEnv=void 0,i=e.SentryEnv||(e.SentryEnv={}));e.datasetFromHtml=()=>{var t;return null===(t=document.querySelector("html"))||void 0===t?void 0:t.dataset};e.detectSentryEnv=e.getSentryEnv=()=>{var t;return null===(t=(0,e.datasetFromHtml)())||void 0===t?void 0:t.sentryEnvironment};e.isProduction=()=>(0,e.detectSentryEnv)((0,e.getSentryEnv)())===i.PRODUCTION;e.isStaging=()=>(0,e.detectSentryEnv)((0,e.getSentryEnv)())===i.STAGING;e.isLocal=()=>(0,e.detectSentryEnv)((0,e.getSentryEnv)())===i.LOCAL;e.getSentrySampleRate=,194:function(t,e,i){"use strict";var r=this&&this.__awaiter||Object.defineProperty(e,"__esModule",{value:!0}),e.UserRepository=void 0;const s=i(2738),n=i(8642),o=i(5468);class a extends n.Observable{tatic getInstance(){return this.instance||(this.instance=new a),this.instance}fetchMyProfile(){return s.default.JSON.get("/api/my/profile").then((t=>{this.fire("my_profile:fetched",t)})).catch(()}fetchMyFrequentTags(t,e){return s.default.JSON.get(`/api/my/frequent_tags?limit=${e}`).catch(()}fetchMyRecommendedTags(t){return s.default.JSON.get(`/api/my/recommended_tags?url=${encodeURIComponent(t)}`).catch((t=>({recommended_tags:[],frequent_tags:[]})))}fetchExternalShareConfig(){return s.default.JSON.get("/api/my/external/share_config").then((t=>this.fire("my_share_config:fetched",{shareEnabled:t.share_enabled,shareDisabledReason:"my_bookmark_private"===t.share_disabled_reason?o.ShareDisabledReason.MyBookmarkPrivate:null,services:t.services}))).catch((t=>this.fire("my_share_config:fetched",{})))}fetchShareText(t,e){return r(this,void 0,void 0,(function*(){const i=new URL(`${this.B_ORIGIN}/api/my/bookmark/${encodeURIComponent(t)}/share`);return e&&i.searchParams.append("activity_pub_user_id",e),s.default.JSON.get(i.toString()).then((e=>this.fire("my_share_text:fetched",Object.assign({bookmarkedURL:t},e)))).catch((t=>{throw console.error(t),new Error("share url fetch failed.")}))}))}}e.UserRepository=a,a.instance=null},8642:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;e.Observable=class{clusiveOn(t,e){return this.handler[t]=[],this.on(t,e)}fire(t,...e){this.WARN_ORPHAN_EVENT&&!this.handler[t]&&console.log("Orphan event: "+t),(this.handler[t]||[]).forEach(()}bubble(t,e){t.on(e,()}firing(t,...e){return}},71:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispatch=e.connect=void 0;const i=[];.connect=e.dispatch=function(t){i.forEach(()}},2704:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBrowserName=e.setActivityPubUserId=e.getActivityPubUserId=e.notEmpty=e.throttle=e.debounce=e.closest=e.delegate=e.toStringWithUserPostfix=e.isAndroid=e.isIOS=e.isMobileWidth=e.isMobile=e.countBookmarkComment=e.truncateText=e.escapeHTML=e.stringToArray=e.smallProfileImageURL=e.largeProfileImageURL=e.profileImageURL=e.serializeAsFormUrlEncoded=e.chunk=e.difference=e.merge=void 0;const r=i(1206);unction n(){return 480>=window.innerWidth}function o(t,e){return t.matches||(t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||,t.matches(e)}e.merge=function(...t){var e={};return t.forEach((t=>{null!==t&&Object.keys(t).forEach(()})),e},e.difference=function(t,e){if(0===e.length)return t;const i=new Set(e);return t.filter(()},e.chunk=e.serializeAsFormUrlEncoded=function(t){eturn Object.keys(t).map((i=>{const r=t[i];return Array.isArray(r)?r.map(().join("&"):e(i,r)})).join("&")},e.profileImageURL=function(t){return`https://cdn.profile-image.st-hatena.com/users/${t}/profile.png`},e.largeProfileImageURL=function(t){return`https://cdn.profile-image.st-hatena.com/users/${t}/profile.png`},e.smallProfileImageURL=e.stringToArray=s,e.escapeHTML=function(t){return t&&/[&<>"']/.test(t)?t.replace(/[&<>"']/g,():t},e.truncateText=function(t,e){let i=0,r="";const n=s(t);for(let t=0;t<n.length;t++){if(i+=n[t].charCodeAt(0)<256?1:2,i>e){r+="...";break}r+=n[t]}return r},e.countBookmarkComment=function(t){let e=0;const i=s(t);for(let t=0;t<i.length;t++){e+=i[t].charCodeAt(0)<256?1:3}return Math.ceil(e/3)},e.isMobile=function(){const t=document.documentElement.dataset.deviceType||"";return t.length>0?"MOBILE"===t:n()},e.isMobileWidth=n,e.isIOS=function(){const t=window.navigator.userAgent.toLowerCase();return/\b(?:iphone|ipad)\b/.test(t)},e.isAndroid=e.toStringWithUserPostfix=e.delegate=function(t,e){return function(i){i&&i.target&&o(i.target,t+","+t+" *")&&e.apply(this,arguments)}},e.closest=function t(e,i){if(o(e,i))return e;const r=e.parentNode;return null!==r&&r!==document?t(r,i):void 0},e.debounce=function(t,e){let i;return function(){const r=this,s=arguments;window.clearTimeout(i),i=window.setTimeout((,e)}},e.throttle=function(t,e){let i=0;return function(){const r=Date.now();r-i>=e&&(t.apply(this,arguments),i=r)}},e.notEmpty=const a="activity_pub_user_id";e.getActivityPubUserId=e.setActivityPubUserId=e.getBrowserName=function(){return(0,r.getParser)(window.navigator.userAgent).getBrowserName().toLowerCase()}},9042:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=e.Presenter=void 0;e.Presenter=class{constructor(t){this.view=t,this.lastError=null}setup(){}e.View=class{constructor(...t){this.initMembers(...t),this.presenter=this.createPresenter(),this.registerEvents(),this.presenter.setup()}egisterEvents(){}updateError(){}}},8925:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlogToBookmarkModalController=void 0;const r=i(1153),s=i(8682);class n extends s.OnlyOnce{constructor(t){super(n.COOKIE_KEY,t),this.view=t,this.registerEvents()}registerEvents(){this.view.on(r.ModalView.EVENT_MODAL_CLOSE,(()=>this.hide(400)))}e.BlogToBookmarkModalController=n,n.COOKIE_KEY="202104_blog_header_guide_modal_shown"},3486:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkAutoLoaderController=void 0;e.BookmarkAutoLoaderController=class{constructor(t,e,i,r,s){this.onLabelShown=()=>{this.loadRestBookmarks()},this.expandCommentList=this.view=t,this.entryUrl=t.getUrl(),this.cursor=t.getCursor(),this.commentedOnly=s.commentedOnly,this.bookmarkRepository=e,this.initialLoad=s.initialLoad,this.collapseLimit=s.collapseLimit,this.excludeOwner=s.excludeOwner,this.registerEvents(),i.on("my_profile:fetched",(),r.on("following_bookmarks:fetched",(t=>{const e=t.map((t=>t.user.name));this.view.followingBookmarkers=e,this.view.setFollowed()})),this.initialLoad?this.loadInitialBookmarks(this.initialLoad):this.collapseCommentList()}registerEvents(){this.view.on("bookmark_autoloader:shown",this.onLabelShown),this.view.on("bookmark_autoloader:expand_comment_list",this.expandCommentList)}loadInitialBookmarks(t){this.bookmarkRepository.findAllBookmarksByUrl(this.entryUrl,this.commentedOnly,t,this.excludeOwner).then((t=>{const e=t.bookmarks,i=t.cursor;this.onRestBookmarksArrived(e,i),this.collapseCommentList()}),(t=>{this.onRestBookmarksError(t)}))}loadRestBookmarks(){this.view.setLoadingFace(),this.bookmarkRepository.findAllBookmarksByUrl(this.entryUrl,this.commentedOnly,500,this.excludeOwner,this.cursor).then((t=>{const e=t.bookmarks,i=t.cursor;this.onRestBookmarksArrived(e,i)}),(t=>{this.onRestBookmarksError(t)}))}onRestBookmarksArrived(t,e){this.view.appendBookmarks(t),e?(this.cursor=e,this.view.setReadyFace()):this.view.terminate()}ollapseCommentList(){void 0!==this.collapseLimit&&this.view.bookmarksCount>this.collapseLimit&&this.view.collapse(this.collapseLimit)}}},1718:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkItemMenuController=void 0;e.BookmarkItemMenuController=class{constructor(t,e,i,r,s){this.view=t,this.ignoreUserRepo=e,this.followUserRepo=i,this.followingBookmarksRepo=r,this.visitor=s,this.view.on("bookmark_item_menu:ignore",(t=>{this.ignore(t)})),this.view.on("bookmark_item_menu:unignore",(t=>{this.unignore(t)})),this.view.on("bookmark_item_menu:follow",(t=>{this.follow(t)})),this.view.on("bookmark_item_menu:unfollow",(t=>{this.unfollow(t)})),this.followingBookmarksRepo.on("following_bookmarks:fetched",()}setFollowed(t){const e=t.map(();this.view.setFollowed(e)}ignore(t){this.visitor&&this.ignoreUserRepo.ignoreLegacy(this.visitor,t)}unignore(t){this.visitor&&this.ignoreUserRepo.unignoreLegacy(this.visitor,t)}follow(t){this.visitor&&this.followUserRepo.followLegacy(this.visitor,t)}unfollow},6866:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkPanelController=void 0;const r=i(646),s=i(2704),n=i(430);e.BookmarkPanelController=class{constructor(t,e,i,r,s,o){this.canonicalURL=t,this.view=e,this.deleteButton=i,this.bookmarkRepo=r,this.userRepo=s,this.source=o,this.bookmarkedURL=null,this.bookmark=null,this.onSubmit=t=>{this.bookmarkRepo.addToLegacyBookmark({user:this.user,url:t.url||this.url,annotation:new n.Annotation(t.annotation),is_private:!!t.privacy,post_twitter:t.post_twitter,from:t.from,is_new:null===this.bookmark,source:this.source}).then(().catch((t=>{t.json().then(().catch(()}))},this.onDeleteBookmark=()=>{this.bookmarkRepo.deleteLegacy(this.user,this.url).then((t=>{null!==this.deleteButton&&this.deleteButton.onCompleteDeleteBookmark()})).catch(()},this.onShareConfigFetched=this.onProfileFetched=t=>{this.user=t,this.loadMyBookmark(t),this.setupTags()},this.registerEvents()}egisterEvents(){this.userRepo.on("my_profile:fetched",this.onProfileFetched),this.userRepo.on("my_share_config:fetched",this.onShareConfigFetched),this.view.on("bookmark:add_request",this.onSubmit),null!==this.deleteButton&&this.deleteButton.on("bookmark:delete_request",this.onDeleteBookmark);const t=()=>{(0,s.isMobile)()?window.location.href=this.canonicalURL:window.location.href=`/entry?url=${encodeURIComponent(this.canonicalURL)}`};this.view.on("bookmark:complete",(()=>{r.set("bookmark_url",this.canonicalURL,{expires:1/24/2}),t()})),null!==this.deleteButton&&this.deleteButton.on("bookmark:complete",t)}setupTags(){this.userRepo.fetchMyRecommendedTags(this.url).then(()}setupRecommendedTags(t){this.view.setRecommendedTags(t)}oadMyBookmark(t){this.bookmarkRepo.findMyBookmarkByUrl(this.canonicalURL).then((t=>{this.view.setup(t),this.bookmark=t,this.bookmarkedURL=t.url}),()}}},1579:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkSortTabController=void 0;const r=i(508),s=i(8205);class n{nit(){const t=this.loadSavedTab();this.swtichTab(this.canSwitch(t)?t:"recent"),this.registerEvents()}registerEvents(){this.view.on(r.BookmarkSortTabView.EVENT_CLICK,this.clickTab.bind(this)),this.scrollView.on(s.ScrollView.EVENT_SCROLL,(t=>{if(!(this.view.lastCommentOffsetTop<=0))if(t.y>=this.view.offsetTop){if(this.view.isTabPositionFixed){const e=t.y+this.view.tabHeight-this.view.lastCommentOffsetTop;this.view.scrollTab(e)}else this.view.fixTabPosition();this.scrollPosition[this.currentTab]=t}else this.view.unfixTabPosition(),delete this.scrollPosition[this.currentTab]}))}clickTab(t,e){(0,r.isSortTab)(t)&&this.canSwitch(t)&&(e?this.view.isTabPositionFixed&&this.scrollToTabTop():(this.swtichTab(t),this.saveTab(t),this.scrollToPreviousPosition()))}anSwitch(t){return"popular"!==t||this.view.popularCount>0}scrollToPreviousPosition(){const t=this.scrollPosition[this.currentTab];t?this.scrollView.scrollTo(t):this.view.isTabPositionFixed&&this.scrollToTabTop()}oadSavedTab.BookmarkSortTabController=n,n.LAST_TAB_KEY="bookmark_sort_tab"},7187:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonUserEventController=void 0;const r=i(646);class s{egisterEvents(){this.repo.on("my_profile:fetched",(),this.repo.on("my_profile:fetch_failed",()}}e.CommonUserEventController=s,s.GA_USER_ID_COOKIE_KEY="ga_user_id"},2808:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DownvoteButtonController=e.DownvoteController=void 0;const r=i(8642),s=i(1271),n=i(7354);class o extends r.Observable{constructor(t){super(),this.view=t,this.repository=s.DownvoteRepository.getInstance(),this.buttons=new Map,this.onBookmarksLoaded(),this.view.on(n.DownvoteView.bookmarkLoadedEvent,(),this.repository.on(s.DownvoteRepository.voteUpdatedEvent,((t,e)=>{const i=this.buttons.get(t);void 0!==i&&i.syncVoteStatus(e)}))}onBookmarksLoaded(){this.view.getUninitializedCheckboxes().forEach((t=>{const e=new a(t);this.buttons.set(t.voteSubjectKey,e),e.on("downvotebutton:voted",(()=>this.fire("downvote:voted"))),e.on("downvotebutton:unvoted",()}))}}e.DownvoteController=o;class a extends r.Observable{constructor(t){super(),this.view=t,this.repository=s.DownvoteRepository.getInstance(),this.syncVoteStatus(this.isVoted),this.view.on(n.DownvoteCheckboxView.changeEvent,()}get voteSubjectKey(){return this.view.voteSubjectKey}te(){this.repository.vote(this.voteSubjectKey),this.view.makeVoted(),this.fire("downvotebutton:voted")}unvote(){this.repository.unvote(this.voteSubjectKey),this.view.makeUnvoted(),this.fire("downvotebutton:unvoted")}}e.DownvoteButtonController=a},4782:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawerMenuController=void 0;const r=i(7450),s=i(3890);e.DrawerMenuController=class{constructor(t,e){this.onUserFetched=t=>{this.view.renderBody(t);{const e=new s.DrawerMenuNotificationView(this.view.container.querySelectorAll(".js-notify-count"),this.view.container.querySelector(".js-notify-list-button"),this.view.container.querySelector(".js-drawer-notify-list"),"synmenu"),i=new r.NotificationRepository(t);i.on("notification:count_fetched",(t=>e.updateCount(t))),i.fetchCount()}},this.onUserFetchFailed=t=>{this.view.renderBody(null)},this.view=t,e.on("my_profile:fetched",this.onUserFetched),e.on("my_profile:fetch_failed",this.onUserFetchFailed)}}},8341:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicLinkAppBannerController=void 0;const r=i(2704),s=i(81),n=i(8682);class o extends n.OnlyOnce{constructor(t){super("app_banner_explicitly_hidden",t),this.showIfAvailable(),this.view.on(s.DynamicLinkAppBannerView.closeEvent,(()=>{this.hide(30)}))}canShow(){return((0,r.isIOS)()||(0,r.isAndroid)())&&(0,r.isMobileWidth)()&&super.canShow()}}e.DynamicLinkAppBannerController=o},5737:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryInfoEditorController=void 0;e.EntryInfoEditorController=class{constructor(t,e,i,r){this.permissions=void 0,this.onClickEditButton=()=>{this.view.openModal(),void 0===this.permissions?(this.view.makeBusy(),this.permissionRepo.fetchAllowedItems(this.url).then(().catch((t=>{this.view.showMessage("\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))):this.view.activate(this.permissions)},this.onClickDecisionButton=()=>{const t=this.view.title;this.view.makeBusy(),this.infoRepo.commitEntryInfo(this.url,t).then((()=>{this.view.closeModal(),location.reload()})).catch((t=>{console.log(t),this.view.showMessage("\u30a8\u30f3\u30c8\u30ea\u60c5\u5831\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))},this.onClickRefreshButton=()=>{this.view.makeBusy(),this.permissionRepo.fetchAllowedItems(this.url).then((t=>{t.includes("refresh")?this.infoRepo.enqueueRefresh(this.url).then((t=>{this.view.showMessage("\u66f4\u65b0\u8981\u6c42\u3092\u53d7\u3051\u4ed8\u3051\u307e\u3057\u305f\u3002\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u306e\u30bf\u30a4\u30c8\u30eb\u3001\u672c\u6587\u3001\u30ad\u30fc\u30ef\u30fc\u30c9\u306a\u3069\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\u3053\u306e\u66f4\u65b0\u306f\u6570\u5206\u5f8c\u306b\u5b8c\u4e86\u3057\u307e\u3059\u3002")})).catch((t=>{this.view.showMessage("\u66f4\u65b0\u8981\u6c42\u3092\u9001\u4fe1\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3057\u3070\u3089\u304f\u6642\u9593\u3092\u304a\u3044\u3066\u304b\u3089\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002")})):this.view.showMessage("\u66f4\u65b0\u8981\u6c42\u3092\u9001\u4fe1\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}))},this.view=t,this.infoRepo=e,this.permissionRepo=i,this.url=r,this.registerEvents()}},4831:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryListFollowingBookmarksController=void 0;e.EntryListFollowingBookmarksController=class{constructor(t,e){this.onFetched=t=>{this.views.forEach((e=>{const i=t[e.entryURL];i&&e.showFollowingBookmarks(i)}))},this.views=t,this.repository=e,this.repository.on("all_following_bookmarks:fetched",this.onFetched)}get entryURLs(){return this.views.map((t=>t.entryURL))}}},2683:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryListLayoutSwitcherController=void 0;e.EntryListLayoutSwitcherController=class{constructor(t,e){this.onEntryListLayoutChanged=this.view=t,this.layoutRepository=e,this.view.on("entrylist_layout:changed",this.onEntryListLayoutChanged)}}},5270:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryMyBookmarkController=void 0;const r=i(2704),s=i(430),n=i(4269),o=i(955);e.EntryMyBookmarkController=class{constructor(t,e,i,r,s,n,a,l,c){this.canonicalURL=t,this.view=e,this.mobileView=i,this.bookmarkRepo=r,this.userRepo=s,this.afterRegistered=n,this.isMobile=a,this.defaultComment=l,this.source=c,this.user=null,this.bookmarkedURL=null,this.onProfileFetched=t=>{this.user=t,this.loadMyBookmark(t),this.view.renderEditorProfileImage(t),this.setupTags(),this.afterRegistered&&(this.isMobile?this.mobileView.openBookmmarkEditor():this.view.openBookmarkEditor())},this.onProfileFetchFailed=this.onShareConfigFetched=t=>{this.isMobile?this.mobileView.setShareConfig(t):this.view.setShareConfig(t)},this.onShareTextFetched=t=>{this.isMobile?this.mobileView.setShareText(t):this.view.setShareText(t)},this.onBookmarkDeleteRequest=()=>{null!==this.user&&this.bookmarkRepo.deleteLegacy(this.user,this.url).then((t=>{this.isMobile?(this.mobileView.hideMyBookmark(),this.mobileView.setupEditor(null),this.mobileView.clearEditor(),this.mobileView.showModalButton()):(this.view.hideMyBookmark(),this.view.setupEditor(null),this.view.clearBookmarkEditor(),this.view.showEditor()),this.bookmarkedURL=null}),(t=>{alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))},s.on("my_profile:fetched",this.onProfileFetched),s.on("my_profile:fetch_failed",this.onProfileFetchFailed),s.on("my_share_config:fetched",this.onShareConfigFetched),s.on("my_share_text:fetched",this.onShareTextFetched),this.isMobile?(this.mobileView.on("bookmark:add_request",(t=>{this.putBookmark(t)})),this.mobileView.on("bookmark:delete_request",this.onBookmarkDeleteRequest),this.mobileView.on(o.IntentShareComponentView.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL,(t=>{this.fetchShareText(t)}))):(this.view.on("bookmark:add_request",(t=>{this.putBookmark(t)})),this.view.on("bookmark:delete_request",this.onBookmarkDeleteRequest),this.view.on(o.IntentShareComponentView.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL,(t=>{this.fetchShareText(t)})))}get url(){return this.bookmarkedURL||this.canonicalURL}putBookmark(t){if(null===this.user)return;const e=this.user,i=this.url;this.bookmarkRepo.addToLegacyBookmark({user:e,url:i,annotation:new s.Annotation(t.annotation),is_private:!!t.privacy,post_twitter:t.post_twitter,from:"entry",is_new:null===this.bookmarkedURL,source:this.source}).then((i=>{this.update(i,e),this.userRepo.fetchShareText(i.url,(0,r.getActivityPubUserId)()),this.view.setTwitterShareEnabled(t.post_twitter),this.mobileView.setTwitterShareEnabled(t.post_twitter)})).catch((t=>{t.json().then((t=>alert(t.reason))).catch((t=>alert("URL\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f")))}))}setupTags(){this.userRepo.fetchMyRecommendedTags(this.url).then((t=>{this.setupRecommendedTags(t.recommended_tags),this.setupFrequentTags(t.frequent_tags)}))}setupRecommendedTags(t){this.view.setRecommendedTags(t),this.mobileView.setRecommendedTags(t)}etchShareText(t){this.userRepo.fetchShareText(t,(0,r.getActivityPubUserId)())}loadMyBookmark(t){this.bookmarkRepo.findMyBookmarkByUrl(this.canonicalURL).then((e=>{this.update(e,t)}),(t=>{const e=this.defaultComment?new s.Annotation(this.defaultComment):null,i=e?{comment:e.comment,tags:e.tags,status:n.BookmarkStatus.Public}:null;this.isMobile?(this.mobileView.setupEditor(i),this.mobileView.showModalButton()):(this.view.setupEditor(i),this.view.hideMyBookmark(),this.view.showEditor())}))}update(t,e){this.bookmarkedURL=t.url,this.updateView(t,e)}updateView(t,e){this.isMobile?(this.mobileView.renderMyBookmark(t,e),this.mobileView.closeModalWindow(),this.mobileView.hideModalButton(),this.mobileView.setupEditor(t),this.mobileView.initShareButton(t)):(this.view.renderMyBookmark(t,e),this.view.hideEditor(),this.view.showMyBookmark(),this.view.setupEditor(t),this.view.initShareButton(t))}}},5574:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntrySubmenuController=void 0;e.EntrySubmenuController=class{constructor(t,e){e.on("my_profile:fetched",(()=>{t.show()}))}}},2960:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FirstBookmarkNotificationModalController=void 0;const r=i(9998),s=i(2481);class n extends s.GenericModalController{constructor(t,e,i,s){super(t);(new r.EntryRepository).firstBookmark(e,i).then((t=>{(t.bookmark.user.name===s.name||this.view.isDebug())&&(this.view.setFirstBookmark(t),this.open(),(window.dataLayer=window.dataLayer||[]).push({event:"boston:first_bookmark_notification_modal:show",boston:{first_bookmark_notification_modal:{total_bookmarks_achievement:t.total_bookmarks_achievement,bookmark_url:t.bookmark.url}}}),this.view.loadAnimation(t.animation_json_url))}))}}e.FirstBookmarkNotificationModalController=n},3697:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingBookmarksController=void 0;e.FollowingBookmarksController=class{constructor(t,e){this.onFetched=t=>{this.followingBookmarksView.showFollowingBookmarks(t)},this.followingBookmarksView=t,this.followingBookmarksRepository=e,e.on("following_bookmarks:fetched",this.onFetched)}}},9450:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalHeaderController=void 0;e.GlobalHeaderController=class{constructor(t,e){this.onMyProfileFetched=t=>{this.view.update(t)},this.onMyProfileFetchFailed=t=>{this.view.updateAsGuest(t)},this.view=t,this.userRepository=e,this.userRepository.on("my_profile:fetched",this.onMyProfileFetched),this.userRepository.on("my_profile:fetch_failed",this.onMyProfileFetchFailed)}}},6949:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalNavigationController=void 0;e.GlobalNavigationController=class{constructor(t,e,i=!1,r){this.naviView=t,this.scrollView=e,i&&(e.onScrollTo(r,(t=>{this.naviView.fixHeader()})),e.onScrollUntil(r,())}}},615:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalMaintenanceNotificationController=e.GlobalNotificationController=void 0;class i{constructor(t){this.view=t}notify(t){this.view.update(t),this.view.show()}hide(){this.view.hide()}}e.GlobalNotificationController=i;e.GlobalMaintenanceNotificationController=class extends i{constructor(t,e){super(t),e.on("my_profile:fetched",(t=>{this.hide()})),e.on("my_profile:fetch_failed",()}notify(){const t=document.createElement("a");t.href="https://maintenance.hatena.ne.jp/",t.target="_blank",t.textContent="\u30b5\u30fc\u30d3\u30b9\u306e\u6a5f\u80fd\u304c\u4e00\u90e8\u505c\u6b62\u3057\u3066\u3044\u307e\u3059",super.notify(t)}}},2700:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreUserController=void 0;e.IgnoreUserController=class{constructor(t,e){this.onFetched=t=>{this.ignoreUserRepository.saveToLocal(t.users),this.ignoreUserView.hideIgnoredUsers(t.users)},this.ignoreUserView=t,this.ignoreUserRepository=e,e.on("ignore_users:fetched",this.onFetched)}}},5450:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestTagListController=void 0;e.InterestTagListController=class{d(t){this.repository.subscribe(t).then(().catch((t=>t.json())).then(()}remove(t){this.repository.unsubscribe(t).then((e=>{this.view.removeTag(t)})).catch(()}}},6794:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestedTagsController=void 0;const r=i(4101);e.InterestedTagsController=class{constructor(t,e){this.views={},this.onSubscribe=t=>{this.repository.subscribe(t).then((()=>{this.views[t].setStatusRegistered()})).catch((()=>this.views[t].setStatusNotRegistered()))},this.onUnsubscribe=t=>{this.repository.unsubscribe(t).then(().catch(()},Object.values(t).forEach((t=>{this.registerEvents(t)})),this.views=t,this.repository=e}registerEvents},1989:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardShortcutController=void 0;e.KeyboardShortcutController=class{tartWatching(){window.addEventListener("keydown",(t=>{if(!(this.isIgnoreElement(t.target)||("?"===t.key&&this.toggleHelp(),t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)))switch(t.key){case"j":this.moveDown();break;case"k":this.moveUp();break;case"l":this.stock();break;case"o":case"Enter":this.open();break;case"e":this.openEntryPage()}}))}isIgnoreElement(t){return null!==t&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)}moveDown(){this.view.itemLength-1>this.index&&(this.index+=1,this.view.setIndex(this.index))}moveUp(){this.index>=0&&(this.index-=1,this.view.setIndex(this.index))}stock(){this.view.stock(this.index)}open(){this.view.open(this.index)}oggleHelp(){this.view.toggleHelp()}}},6592:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageModalController=void 0;const r=i(6291);e.MessageModalController=class{constructor(t){this.view=t,this.registerEvents();const e=r.ModalMessageRepository.getInstance().getAndRemoveMessage();null!==e&&(this.view.update(e),this.view.show(),this.startHideTimer())}registerEvents(){this.view.on(this.view.EVENT_MODAL_CLOSE,(()=>{this.view.hide()}))}startHideTimer(){window.setTimeout((()=>{this.view.hide()}),16e3)}},2481:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptInModalController=e.ModalController=e.GenericModalController=void 0;const r=i(1153),s=i(8642);class n extends s.Observable{constructor(t){super(),this.view=t,this.registerEvents()}open(){this.view.open()}close(){this.view.close()}get isOpen(){return this.view.isOpen}registerEvents(){this.view.on(r.ModalView.EVENT_MODAL_OPENED,(()=>{this.fire(n.EVENT_MODAL_OPENED)})),this.view.on(r.ModalView.EVENT_MODAL_CLOSE,(()=>{this.view.close()}))}}e.GenericModalController=n,n.EVENT_MODAL_OPENED="modal:opened";e.ModalController=class extends n{};e.OptInModalController=class extends n{open(){this.view.isEnabled&&super.open()}}},8682:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnlyOnce=void 0;const r=i(646);e.OnlyOnce=class{constructor(t,e){this.cookieKey=t,this.view=e}isViewLike(t){return"show"in t}arkAsExplicitlyHidden(t=30){r.set(this.cookieKey,"1",{expires:t})}canShow(){return!(void 0!==r.get(this.cookieKey))}showIfAvailable(){if(this.canShow())if(this.isViewLike(this.view))this.view.show();else{if(!this.isViewLikeOpenClose(this.view))throw"unreachable";this.view.open()}else this.hide()}hide(t=void 0){this.isViewLike(this.view)?this.view.hide():this.isViewLikeOpenClose(this.view)&&this.view.close(),t&&this.markAsExplicitlyHidden(t)}}},6660:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RelatedEntryController=void 0;e.RelatedEntryController=class{constructor(t,e){this.RELATED_ENTRIES=3,this.onFetched=t=>{this.view.renderRelatedEntries(t.slice(0,this.RELATED_ENTRIES))},this.repository=t,this.view=e,this.repository.on("related_entrylist:fetched",this.onFetched)}}},653:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShortURLController=void 0;e.ShortURLController=class{constructor(t,e){this.loadShortURLClicks=t=>{this.repository.fetchTweetUrl(t).then((t=>{this.view.setShortURLClicks(t)}))},this.view=t,this.repository=e,this.view.on("short_url_clicks_param:loaded",this.loadShortURLClicks)}}},5063:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserConfigController=void 0;e.UserConfigController=class{constructor(t,e){this.onSubmit=t=>{let e=null;switch(t.kind){case"profile":e=this.repository.putProfileSetting(t);break;case"bookmark":e=this.repository.putBookmarkSetting(t);break;case"display":e=this.repository.putDisplaySetting(t);break;case"notification":e=this.repository.putNotificationSetting(t);break;case"twitter-share":e=this.repository.putTwitterShareSetting(t)}e&&e.then((()=>{this.view.showCompleteNotification("\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3057\u305f\u3002")})).catch((()=>{this.view.showAlert("\u8a2d\u5b9a\u3092\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}))},this.view=t,this.repository=e,this.view.on("config:submit",this.onSubmit)}}},8010:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserMenuController=void 0;e.UserMenuController=class{constructor(t,e,i){this.onFetchedIgnore=this.view=t,this.ignoreUserRepo=e,this.visitor=i,this.view.on("user_menu:ignore",(t=>this.ignore(t))),this.view.on("user_menu:unignore",(t=>this.unignore(t))),this.ignoreUserRepo.on("ignore_users:fetched",this.onFetchedIgnore)}ignore(t){this.ignoreUserRepo.ignoreLegacy(this.visitor,t)}unignore(t){this.ignoreUserRepo.unignoreLegacy(this.visitor,t)}}},1361:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VisibilityLinkController=void 0;e.VisibilityLinkController=class{constructor(t,e,i){this.onFetchPermission=t=>{t.includes("visibility")&&this.view.render(this.visitor.name)},this.visitor=t,this.view=e,this.permissionRepository=i}updateVisibilityLink(){const t=this.view.getEntryURL();this.permissionRepository.fetchAllowedItems(t).then(this.onFetchPermission).catch((t=>{}))}}},5179:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntrySearchFollowingBookmarksController=void 0;e.EntrySearchFollowingBookmarksController=class{constructor(t,e){this.onFetched=t=>{this.views.forEach((e=>{const i=t[e.entryURL];i&&e.showFollowingBookmarks(i)}))},this.views=t,this.repository=e,this.repository.on("all_following_bookmarks:fetched",this.onFetched)}},9482:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntrySearchForm=void 0;const r=i(4998);e.EntrySearchForm=class{constructor(t){this.formElem=t;const e=t.querySelector(".js-entrysearch-form-text-input"),i=t.querySelector(".js-entrysearch-form-button");e&&i&&i.addEventListener("click",(()=>{var i;t.action=r("/").segment(["q",null!==(i=e.value)&&void 0!==i?i:""]).toString()}))}}},3789:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MobileEntrySearchFilterController=void 0;const r=i(4998);class s{constructor(t){this.view=t,this.registerEvents()}lear(){this.view.setTarget(s.DEFAULT_TARGET),this.view.setUsers(s.DEFAULT_USERS),this.view.setDateRange(s.DEFAULT_DATE_RANGE),this.view.setSafeSearch(s.DEFAULT_SAFE_SEARCH)}search(){var t,e,i,n,o={target:null!==(t=this.view.getTarget())&&void 0!==t?t:s.DEFAULT_TARGET,users:null!==(e=this.view.getUsers())&&void 0!==e?e:s.DEFAULT_USERS,date_range:null!==(i=this.view.getDateRange())&&void 0!==i?i:s.DEFAULT_DATE_RANGE,sort:null!==(n=this.view.getSort())&&void 0!==n?n:s.DEFAULT_SORT,safe:this.view.getSafeSearch()?"on":"off"};window.location.href=r("/").segment(["q",this.view.getText()]).query(o).toString()}}e.MobileEntrySearchFilterController=s,s.DEFAULT_TARGET="all",s.DEFAULT_USERS="1",s.DEFAULT_DATE_RANGE="all",s.DEFAULT_SAFE_SEARCH=!0,s.DEFAULT_SORT="popular"},9928:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetStartedMyHotEntryInterestController=void 0;e.GetStartedMyHotEntryInterestController=class{constructor(t,e){this.selectedTags=[],this.view=t,this.repository=e,this.registerEvents()}registerEvents(){this.view.on("interest_tag:add",(t=>this.add(t))),this.view.on("interest_tag:remove",(t=>this.remove(t))),this.view.on("interest_tag:click_goto_next",(()=>this.onClickGotoNext()))}onClickGotoNext(){let t=this.selectedTags.map((t=>this.repository.subscribe(t).catch((()=>{}))));Promise.all(t).then((()=>{this.view.gotoNextPage()})).catch(()}add(t){this.selectedTags.indexOf(t)>=0||(this.selectedTags.push(t),this.view.updateSelectedTags(this.selectedTags))}remove(t){this.selectedTags.indexOf(t)<0||(this.selectedTags=this.selectedTags.filter((),this.view.updateSelectedTags(this.selectedTags))}}},402:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TwitterShareModalController=e.AUTO_REDIRECT_FLAG_KEY=void 0;const r=i(1206),s=i(2481);e.AUTO_REDIRECT_FLAG_KEY="twitter_share_auto_redirect";class n extends s.GenericModalController{constructor(t){var e,i;super(t),this.modal=t;"safari"!==(0,r.getParser)(window.navigator.userAgent).getBrowserName().toLowerCase()&&(this.modal.showRedirectSwitch(),null===(i=null===(e=this.modal.autoRedirectSwitch)||void 0===e?void 0:e.querySelector("input"))||void 0===i||i.addEventListener("change",this.onChange.bind(this)))}onChange(t){t.target.checked?localStorage.setItem(e.AUTO_REDIRECT_FLAG_KEY,"true"):localStorage.removeItem(e.AUTO_REDIRECT_FLAG_KEY)}setShareText(t){this.modal.setShareText(t)}setShareLink(t){this.modal.setShareLink(t)}}e.TwitterShareModalController=n},7773:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DatePageBookmarkController=void 0;const r=i(430),s=i(3452),n=i(6340);e.DatePageBookmarkController=class{constructor(t,e,i){this.bookmarked_url=null,this.onShareConfigFetched=t=>{this.view.setShareConfig(t)},this.visitor=t,this.view=e,this.bookmarked_url=this.view.getUrl(),i.on("my_share_config:fetched",this.onShareConfigFetched),this.view.on(n.DatePageBookmarkView.EVENT_ADD_BOOKMARK,(t=>this.putBookmark(t))),this.view.on(n.DatePageBookmarkView.EVENT_DELETE_BOOKMARK,((t,e)=>this.deleteBookmark(t,e))),this.view.on(n.DatePageBookmarkView.EVENT_DELETE_BOOKMARK_BY_LOCATION_ID,()}putBookmark(t){if(null===this.visitor)return;const e=null===this.bookmarked_url;s.BookmarkRepository.getInstance().addToLegacyBookmark({user:this.visitor,url:t.url,annotation:new r.Annotation(t.annotation),is_private:!!t.privacy,post_twitter:t.post_twitter,from:"inplace",is_new:e}).then((t=>{this.view.renderComment(t,this.visitor,e),this.bookmarked_url=t.url})).catch((t=>{alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u8ffd\u52a0\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}deleteBookmark(t,e){s.BookmarkRepository.getInstance().deleteLegacy(this.visitor,t).then((t=>{this.view.remove(e),this.view.showGuide(),this.view.setupEditor(),this.bookmarked_url=null})).catch((t=>{alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}deleteBookmarkByLocationId(t,e){s.BookmarkRepository.getInstance().deleteLegacyByLocationId(this.visitor,t).then((t=>{this.view.remove(e),this.view.showGuide(),this.view.setupEditor(),this.bookmarked_url=null})).catch((t=>{alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}}},2730:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeedDigestAutoLoaderController=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e,i){super(),this.onBookmarksArrived=t=>{const e=t.items,i=t.pager;this.targetView.append(e),this.targetView.setPager(i),this.updateViewStatus(i),this.viewUpdated()},this.repository=e,this.targetView=t,this.pager=i}loadDigest(){this.pager.next&&(this.targetView.setLoadingFace(),this.repository.fetchFeedDigest(this.pager.next).then(this.onBookmarksArrived))}updateViewStatus(t){null===t.next?this.targetView.terminate():this.targetView.setReadyFace(),this.pager=t}setVisitor(t){}startWatching(){this.targetView.on("user_auto_loader:reach_readmore",(()=>this.loadDigest())),this.targetView.touch()}viewUpdated(){this.fire("user_bookmark_item:next_page_loaded"),this.targetView.touch()}}e.FeedDigestAutoLoaderController=s},3625:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowButtonController=void 0;e.FollowButtonController=class{constructor(t,e){this.view=t,this.followUserRepo=e,this.view.on("follow_button:follow",(t=>{this.follow(t)})),this.view.on("follow_button:unfollow",(t=>{this.unfollow(t)}))}setVisitor(t){this.visitor=t}follow(t){this.visitor&&this.followUserRepo.followLegacy(this.visitor,t).then((t=>{t.ok&&this.view.setFollowingInfo(!0)})).catch((t=>{console.log(t)}))}unfollow(t){this.visitor&&this.followUserRepo.unfollowLegacy(this.visitor,t).then((t=>{t.ok&&this.view.setFollowingInfo(!1)})).catch((t=>{console.log(t)}))}}},8726:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingFeedAutoLoaderController=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e,i){super(),this.loadFollowingFeed=()=>{null!==this.nextCursor&&(this.view.setLoadingFace(),this.repository.fetchFollowingFeed(this.nextCursor).then((t=>{this.onFollowingFeedArrived(t)})))},this.view=t,this.repository=e,this.nextCursor=i}onFollowingFeedArrived({items:t,nextCursor:e}){this.view.append(t),this.nextCursor=e,null===this.nextCursor?this.view.terminate():this.view.setReadyFace(),this.viewUpdated()}setVisitor(t){}startWatching(){this.view.on("user_auto_loader:reach_readmore",(()=>this.loadFollowingFeed())),this.view.touch()}viewUpdated(){this.fire("user_bookmark_item:next_page_loaded"),this.view.touch()}}e.FollowingFeedAutoLoaderController=s},3062:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingUsersButtonController=void 0;e.FollowingUsersButtonController=class{constructor(t,e,i){this.onFollowButtonClicked=t=>{this.repo.followLegacy(this.visitor,t).then((()=>{this.view.onCompleteFollowing(t)})).catch((()=>{this.view.onCompleteUnfollowing(t)}))},this.onUnfollowButtonClicked=t=>{this.repo.unfollowLegacy(this.visitor,t).then((()=>{this.view.onCompleteUnfollowing(t)})).catch((()=>{this.view.onCompleteFollowing(t)}))},this.visitor=t,this.view=e,this.repo=i,this.view.on("follow_button:clicked",this.onFollowButtonClicked),this.view.on("unfollow_button:clicked",this.onUnfollowButtonClicked)}}},3120:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingUsersListAutoLoaderController=void 0;e.FollowingUsersListAutoLoaderController=class{constructor(t,e,i,r){this.FOLLOWING_USERS_PER_PAGE=50,this.offset=0,this.terminated=!1,this.watching=!1,this.loadFollowingUsers=()=>{this.terminated||(this.view.setLoadingFace(),this.followingUserRepository.fetchRemote(this.user,this.FOLLOWING_USERS_PER_PAGE,this.offset).then((t=>{const e=!!t[0];this.profileRepository.fetchUserInfos(t.map((t=>t.name))).then(().catch((()=>{this.onFollowingUsersArrived(t,{},e)}))})))},this.user=t,this.view=e,this.followingUserRepository=i,this.profileRepository=r,this.offset=0,this.view.on("user_auto_loader:ready",(()=>{this.watching||(this.watching=!0,this.view.on("user_auto_loader:reach_readmore",this.loadFollowingUsers))}))}loadAndStartWatching(){this.loadFollowingUsers()}onFollowingUsersArrived(t,e,i){this.watching||0!==t.length||this.view.showNotFound(),0!==t.length&&this.view.append(t,e),this.offset=this.offset+this.FOLLOWING_USERS_PER_PAGE,i?this.view.setReadyFace():(this.view.terminate(),this.terminated=!0)}}},5307:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreUsersButtonController=void 0;e.IgnoreUsersButtonController=class{constructor(t,e,i){this.onIgnoreButtonClicked=t=>{this.repo.ignoreLegacy(this.visitor,t).then((()=>{this.view.onCompleteIgnored(t)})).catch((()=>{this.view.onCompleteUnignored(t)}))},this.onUnignoreButtonClicked=t=>{this.repo.unignoreLegacy(this.visitor,t).then((()=>{this.view.onCompleteUnignored(t)})).catch(()},this.visitor=t,this.view=e,this.repo=i,this.view.on("ignore_button:clicked",this.onIgnoreButtonClicked),this.view.on("unignore_button:clicked",this.onUnignoreButtonClicked)}}},7936:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreUsersListAutoLoaderController=void 0;e.IgnoreUsersListAutoLoaderController=class{constructor(t,e,i,r){this.IGNORE_USERS_PER_PAGE=50,this.terminated=!1,this.watching=!1,this.loadIgnoreUsers=()=>{this.terminated||(this.view.setLoadingFace(),this.ignoreUserRepository.fetchRemote(this.IGNORE_USERS_PER_PAGE,this.nextCursor).then((t=>{const e=t.users;this.profileRepository.fetchUserInfos(e).then((e=>{this.onIgnoreUsersArrived(t,e)})).catch((()=>{this.onIgnoreUsersArrived(t,{})}))})))},this.view=t,this.ignoreUserRepository=e,this.profileRepository=i,this.nextCursor=r,this.view.on("user_auto_loader:ready",(()=>{this.watching||(this.watching=!0,this.view.on("user_auto_loader:reach_readmore",this.loadIgnoreUsers))}))}loadAndStartWatching(){this.loadIgnoreUsers()}onIgnoreUsersArrived(t,e){this.watching||0!==t.users.length||this.view.showNotFound(),this.view.append(t.users,e),this.nextCursor=t.cursor,void 0===this.nextCursor?(this.view.terminate(),this.terminated=!0):this.view.setReadyFace()}}},6616:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultipleInterestTagTimeline=void 0;e.MultipleInterestTagTimeline=class{constructor(t,e,i,r,s){this.cursor=0,this.repository=e,this.view=t,this.interestTags=i,this.timelineLimit=r,this.entryLimit=s,this.view.on("interest_tags:show_more",()}loadTimelines(t,e){const i=this.interestTags.slice(this.cursor,this.cursor+t);this.view.setLoading(),this.fetchFeeds(i,e).then((()=>{this.cursor+=t,this.view.setLoaded(),this.cursor>=this.interestTags.length&&this.view.hideMoreButton()})).catch((()=>{this.view.setLoaded()}))}fetchFeeds(t,e){const i=t.map((t=>this.repository.fetchFeed(t,e,0).then(()));return Promise.all(i).then((t=>{const e={};t.forEach((t=>{const i=t.tag,r=t.entries;e[i]=r})),this.view.showTimelines(e)}))}}},1547:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestTagTimelineAutoLoaderController=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e,i,r,s,n,o){super(),this.loadInterestFeed=()=>{null!==this.cursor&&(this.view.setLoadingFace(),this.repository.fetchFeed(this.tag,this.limit,this.cursor).then(().catch((()=>{this.view.setReadyFace()})))},this.visitor=t,this.tag=e,this.limit=i,this.view=r,this.repository=s,this.followingBookmarksRepo=n,this.cursor=o}onFeedArrived(t,e){this.followingBookmarksRepo.fetchRemoteByURLs(this.visitor,t.map((t=>t.url))).then(().catch((()=>{this.view.append(t,{})})).finally((()=>{this.cursor=e,null===this.cursor?this.view.terminate():this.view.setReadyFace(),this.viewUpdated()}))}setVisitor(t){}startWatching(){this.view.on("user_auto_loader:reach_readmore",(()=>this.loadInterestFeed())),this.view.touch()}viewUpdated(){this.fire("user_bookmark_item:next_page_loaded"),this.view.touch()}}e.InterestTagTimelineAutoLoaderController=s},745:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBookmarkItemAutoLoaderController=void 0;const r=i(69);class s extends r.UserBookmarksAutoLoaderController{fetchBookmarks(t){return this.pagingRepository.fetchBookmarks(t)}}e.UserBookmarkItemAutoLoaderController=s},7844:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBookmarkItemMenuController=void 0;const r=i(2704),s=i(430),n=i(3452),o=i(955);e.UserBookmarkItemMenuController=class{constructor(t,e,i){this.userRepo=i,this.onShareTextFetched=t=>{this.view.setShareText(t)},this.visitor=e,i.on("my_share_text:fetched",this.onShareTextFetched),this.view=t,this.view.on("bookmark:add",((t,e)=>{this.putBookmark(t,e)})),this.view.on("bookmark:delete",((t,e)=>{this.deleteBookmark(t,e)})),this.view.on("bookmark:delete-by-location-id",(),this.view.on(o.IntentShareComponentView.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL,(t=>{this.userRepo.fetchShareText(t,(0,r.getActivityPubUserId)())})),this.view.initShareButtonAll()}putBookmark(t,e){n.BookmarkRepository.getInstance().addToLegacyBookmark({user:this.visitor,url:t.url,annotation:new s.Annotation(t.annotation),is_private:!!t.privacy,post_twitter:!1,from:"inplace",is_new:!1}).then((t=>{this.view.renderBookmark(t,e),this.userRepo.fetchShareText(t.url,(0,r.getActivityPubUserId)())})).catch((t=>{t.json().then((t=>alert(t.reason))).catch((t=>alert("URL\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f")))}))}deleteBookmark(t,e){n.BookmarkRepository.getInstance().deleteLegacy(this.visitor,t).then((t=>{this.view.remove(e)})).catch((t=>{alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}deleteBookmarkByLocationId(t,e){n.BookmarkRepository.getInstance().deleteLegacyByLocationId(this.visitor,t).then((t=>{this.view.remove(e)})).catch((t=>{alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))}}},1010:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBookmarkStockListAutoLoaderController=void 0;e.UserBookmarkStockListAutoLoaderController=class{constructor(t,e,i){this.loadBookmarkStocks=()=>{null!==this.nextCursor&&(this.view.setLoadingFace(),this.bookmarkStockListRepository.fetchUnreadBookmarkStocks(this.nextCursor).then((t=>{this.onBookmarkStocksArrived(t)})))},this.view=t,this.bookmarkStockListRepository=e,this.nextCursor=i,this.view.on("user_auto_loader:reach_readmore",this.loadBookmarkStocks),this.view.touch()}onBookmarkStocksArrived(t){this.view.append(t.bookmarkStocks),this.nextCursor=t.nextCursor,null===this.nextCursor?this.view.terminate():this.view.setReadyFace(),this.view.updatePager(this.nextCursor),this.view.touch()}}},69:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBookmarksAutoLoaderController=void 0;const r=i(8642),s=i(7508);class n extends r.Observable{constructor(t,e,i,r){super(),this.visitor=null,this.repository=e,this.followingBookmarksRepository=new s.FollowingBookmarksRepository,this.targetView=t,this.pager=i,this.userRepository=r}get pagingRepository(){return this.repository}loadBookmarks(){this.pager.next&&(this.targetView.setLoadingFace(),this.fetchBookmarks(this.pager.next).then((t=>{this.onBookmarksArrived(t)})))}onBookmarksArrived(t){this.visitor?this.followingBookmarksRepository.fetchRemoteByURLs(this.visitor,t.item.bookmarks.map((t=>t.url))).then(():this.updateView(t,{})}updateView(t,e){this.updateList(t.item.bookmarks,e),this.updatePager(t.pager),this.updateViewStatus(t.pager),this.viewUpdated()}updateViewStatus(t){null===t.next?this.targetView.terminate():this.targetView.setReadyFace(),this.pager=t}pdatePager(t){this.targetView.setPager(t)}setVisitor(t){this.visitor=t}startWatching(){this.targetView.on("user_auto_loader:reach_readmore",(()=>this.loadBookmarks())),this.targetView.touch()}e.UserBookmarksAutoLoaderController=n},7427:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBookmarksByDateAutoLoaderController=void 0;const r=i(69);class s extends r.UserBookmarksAutoLoaderController{e.UserBookmarksByDateAutoLoaderController=s},6174:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkTagProcessController=void 0;const r=i(2796),s=i(2389),n=i(8459),o=i(170),a=i(6592);class l{constructor(t,e,i,r,s,n,o,a){this.visitor=t,this.buttonView=e,this.editFormView=i,this.deleteFormView=r,this.progressView=s,this.editModal=n,this.progressModal=o,this.repository=a,this.buttonView.tag?(this.registerEvents(),this.updateUI(),this.statusPolling()):this.buttonView.hide()}statusPolling(){setInterval((()=>{this.updateUI()}),1e3*l.POLLING_INTERVAL_SEC)}updateUI(){this.repository.status().then((t=>{this.progressModal.isOpen&&(null!==t&&this.progressView.fromTag===t.from_tag&&this.progressView.toTag===t.to_tag||this.completed(this.progressView.fromTag,this.progressView.toTag)),null!==t?(this.buttonView.disable(),this.hideForm(),t.from_tag===this.buttonView.tag?this.updateProgress(t):this.hideProgress()):this.buttonView.enable()}))}showForm(){this.editFormView.updateSubmitButton(),this.deleteFormView.updateSubmitButton(),this.editModal.open()}howProgressdeProgress(){this.progressModal.close(),this.progressView.reset()}completed(t,e){const i=null!==e?"\u30bf\u30b0\u3092\u7f6e\u63db\u3057\u307e\u3057\u305f\u3002\u5909\u66f4\u7d50\u679c\u304c\u8868\u793a\u306b\u53cd\u6620\u3055\u308c\u308b\u307e\u3067\u6642\u9593\u304c\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002":"\u30bf\u30b0\u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002\u5909\u66f4\u7d50\u679c\u304c\u8868\u793a\u306b\u53cd\u6620\u3055\u308c\u308b\u307e\u3067\u6642\u9593\u304c\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002";a.MessageModalController.setMessage(i),location.href=`/${this.visitor.name}/bookmark`}andleStartProcessError(t){409===t.status?(alert("\u5225\u306e\u30bf\u30b0\u3092\u7de8\u96c6\u4e2d\u3067\u3059\u3002\u5b8c\u4e86\u5f8c\u306b\u518d\u5ea6\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044"),this.buttonView.disable(),this.hideForm()):t.json().then((t=>{"code"in t&&"invalid_to_tag"===t.code?alert("\u6587\u5b57\u6570\u304c\u4e0a\u9650\u3092\u8d85\u3048\u3066\u3044\u308b\u305f\u3081\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"):alert("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u3001\u30bf\u30b0\u306e\u7de8\u96c6\u3092\u4e2d\u6b62\u3057\u307e\u3057\u305f")})).catch(().finally((()=>{this.showForm()}))}startEdit(t,e){this.repository.startEdit(this.visitor,t,e).then((()=>{this.buttonView.disable(),this.hideForm(),this.showProgress(t,e)})).catch((t=>{this.handleStartProcessError(t)}))}startDeletion(t){this.repository.startDeletion(this.visitor,t).then((()=>{this.buttonView.disable(),this.hideForm(),this.showProgress(t,null)})).catch((t=>{this.handleStartProcessError(t)}))}abort(){this.repository.abort(this.visitor).then((()=>{this.aborted()})).catch((t=>{alert("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u3001\u30bf\u30b0\u306e\u7de8\u96c6\u3092\u4e2d\u6b62\u51fa\u6765\u307e\u305b\u3093\u3067\u3057\u305f")}))}registerEvents(){this.buttonView.on(n.BulkTagProcessButtonView.EVENT_PROCESS_MODAL_OPEN,(()=>{this.showForm()})),this.editFormView.on(s.BulkTagEditFormView.EVENT_START_PROCESS,(t=>{t.fromTag.toUpperCase()===t.toTag.toUpperCase()?this.startEdit(t.fromTag,t.toTag):this.repository.checkConflict(t.toTag).then((e=>{!e.conflict||confirm("\u3059\u3067\u306b\u540c\u3058\u540d\u79f0\u306e\u30bf\u30b0\u304c\u3042\u308b\u305f\u3081\u7d71\u5408\u3055\u308c\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")?this.startEdit(t.fromTag,t.toTag):this.editFormView.updateSubmitButton()}))})),this.deleteFormView.on(r.BulkTagDeleteFormView.EVENT_START_PROCESS,(t=>{confirm("\u524a\u9664\u3055\u308c\u305f\u30bf\u30b0\u306f\u5143\u306b\u623b\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")?this.startDeletion(t.tag):this.deleteFormView.updateSubmitButton()})),this.progressView.on(o.BulkTagProcessProgressView.EVENT_ABORT,(()=>{this.abort()}))}}e.BulkTagProcessController=l,l.POLLING_INTERVAL_SEC=10},8562:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkDeletionController=void 0;e.BulkDeletionController=class{constructor(t,e,i,r){this.onBulkDeletionStartButtonClicked=()=>{this.repo.start(this.visitor).then(().catch((()=>{this.buttonView.ready()}))},this.onBulkDeletionAbortButtonClicked=()=>{this.repo.abort(this.visitor).then((()=>{this.buttonView.onAborted()})).catch((()=>{this.buttonView.processing()}))},this.visitor=t,this.buttonView=e,this.statusView=i,this.repo=r,this.buttonView.on("bulk_deletion_start_button:clicked",this.onBulkDeletionStartButtonClicked),this.buttonView.on("bulk_deletion_abort_button:clicked",this.onBulkDeletionAbortButtonClicked),this.repo.status().then((t=>{t?(this.buttonView.processing(),this.watchStatus()):this.buttonView.ready()}))}watchStatus(){this.timerId=window.setInterval((()=>{this.repo.status().then((t=>{t?this.statusView.update(t):(window.clearInterval(this.timerId),this.buttonView.ready())}))}),500)}}},7710:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkContainerController=void 0;const r=i(8642),s=i(2481);class n extends r.Observable{constructor(t){super(),this.view=t;const e=new s.ModalController(t.modalView);this.view.on("open_delete_modal",(()=>e.open())),this.bubble(this.view,"start_bookmark_edit"),this.bubble(this.view,"bookmark:delete")}}e.BookmarkContainerController=n},9941:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkEditorController=void 0;const r=i(8642),s=i(3452),n=i(6683);class o extends r.Observable{constructor(t){super(),this.view=t,this.TAG_LIMIT=10,this.onSubmit=()=>{this.fire("bookmark:add_request",this.view.getInput())},this.onActiveTagsUpdated=t=>{this.view.stockButtonView.toggleByTags(t),this.view.tagListView.activeTags=t},this.onTagExceedingLimit=t=>{this.view.errorMessageView.show(),this.view.buttonsView.disable(t)},this.onExceedingLimit=this.onSafeLimit=()=>{this.view.annotationBoxView.exceeding||(this.view.buttonsView.enable(),this.view.errorMessageView.hide())},this.onShortcutSubmit=new n.TagAddFormController(t.tagAddTextBoxView,t.tagListView,t.tagAddButtonView).on("tag_add_form:submit",t.toggleTag),t.buttonsView.on("submit_button:clicked",this.onSubmit),t.annotationBoxView.on("bookmark_panel:tag_exceeding_limit",this.onTagExceedingLimit),t.annotationBoxView.on("bookmark_panel:comment_exceeding_limit",this.onExceedingLimit),t.annotationBoxView.on("bookmark_panel:safe_limit",this.onSafeLimit),t.annotationBoxView.on("annotation_box_tags:updated",this.onActiveTagsUpdated),t.annotationBoxView.on("bookmark_panel:shortcut_submit",this.onShortcutSubmit),t.stockButtonView.on("stock_button:clicked",(t=>{t?this.view.annotationBoxView.addTags([s.STOCK_TAG]):this.view.annotationBoxView.removeTags([s.STOCK_TAG])})),t.visibilityButtonView.on("visibility_input:changed",(t=>{this.view.shareButtonsView&&this.view.shareButtonsView.onChangeBookmarkVisibilityToPrivate(t)})),this.view.isShown()&&this.view.focusToAnnotationBox()}}e.BookmarkEditorController=o},4669:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkPanelController=void 0;const r=i(430),s=i(7710),n=i(9941),o=i(853);e.BookmarkPanelController=class{constructor(t,e,i,a){this.targetURL=t,this.view=e,this.bookmarkRepo=i,this.userRepo=a,this.bookmarkedURL=null,this.bookmark=null,this.onSubmit=t=>{const e=document.documentElement.dataset.browser||"unknown";this.view.showProgressIndicator(),this.bookmarkRepo.addToLegacyBookmark({user:this.user,url:t.url||this.url,annotation:new r.Annotation(t.annotation),is_private:!!t.privacy,post_twitter:t.post_twitter,from:`webextension-add-${e}`,is_new:null===this.bookmark}).then((e=>{if((0,o.postMessageToExtension)("bookmarked",{url:e.url}),null===this.bookmark){const e=t.post_twitter;window.location.href=e?`./sharing?url=${encodeURIComponent(this.targetURL)}`:`./added?url=${encodeURIComponent(this.targetURL)}`}else this.bookmark=e,this.view.setup(e),this.view.showContainer();this.view.hideProgressIndicator()})).catch((t=>{this.view.hideProgressIndicator(),t.json().then((t=>{"url_not_allowed"===t.type?this.view.showUrlNotAllowedAlert():alert(t.reason)})).catch((t=>alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u8ffd\u52a0\u306b\u5931\u6557\u3057\u307e\u3057\u305f")))}))},this.onEditButtonClicked=()=>{this.view.showEditor()},this.onDeleteBookmark=()=>{this.bookmarkRepo.deleteLegacy(this.user,this.url).then((()=>{window.location.href=`./deleted?url=${encodeURIComponent(this.targetURL)}`})).catch((t=>{alert("\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}))},this.onShareConfigFetched=t=>{this.view.setShareConfig(t)},this.onProfileFetched=this.editor=new n.BookmarkEditorController(e.editorView),this.bookmarkContainer=new s.BookmarkContainerController(e.containerView),this.registerEvents(),this.setupTags()}get url(){return this.bookmarkedURL||this.targetURL}etupTags(){this.userRepo.fetchMyRecommendedTags(this.url).then((t=>{let e=t.recommended_tags;const i=t.frequent_tags.filter((t=>!e.includes(t)));e.push(...i),this.view.setTags(e)})).catch((()=>{}))}loadMyBookmark(t){this.bookmarkRepo.findMyBookmarkByUrl(this.targetURL).then((t=>{this.view.setup(t),this.bookmark=t,this.bookmarkedURL=t.url,(0,o.postMessageToExtension)("bookmarked",{url:this.bookmarkedURL})}),(()=>{this.view.setup(null)}))}}},1327:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompletePanelController=void 0;const r=i(194),s=i(2704),n=i(853);e.CompletePanelController=class{constructor(t){this.view=t;const e=s.getBrowserName();let i="uk";"chrome"===e?i="ch":"firefox"===e&&(i="ff"),this.view.injectGTMClickLabel(i)}postCompleteMessage(){const t=document.querySelector("html").dataset.pageSubtype;(0,n.postMessageToExtension)(t,{})}beginEnablingShareButtons(){const t=this.getActivityPubId();this.retrieveShareText(t).then((t=>{t.mastodon&&this.view.activityPubAnchor?this.view.activityPubAnchor.href=t.mastodon.intent_url:this.view.activityPubAnchor&&(this.view.activityPubAnchor.href=this.cushionPageUrl(this.shareTargetUrl())),t.twitter&&this.view.twitterAnchor&&(this.view.twitterAnchor.href=t.twitter.intent_url),(t.twitter||t.mastodon)&&this.view.activateShareButtons()}))}cushionPageUrl(t){const e=new URL(window.location.href);return e.pathname="/-/share/setting/mastodon",e.searchParams.set("url",t),e.toString()}etrieveShareText(t){const e=this.shareTargetUrl();return new Promise(((i,s)=>{const n=new r.UserRepository;n.on("my_share_text:fetched",i),n.fetchShareText(e,t),window.setTimeout(s,5e3)}))}shareTargetUrl(){return new URLSearchParams(window.location.search).get("url")}}},853:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postMessageToExtension=void 0;e.postMessageToExtension=(t,e)=>{window.parent.postMessage({eventName:t,payload:e},"*")}},5125:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizablePanelController=void 0;const r=i(853);e.ResizablePanelController=class{constructor(t){this.view=t,new ResizeObserver((()=>this.postResizeMessage())).observe(this.view.wrapper)}postResizeMessage(){(0,r.postMessageToExtension)("resize",this.view.getSize())}}},780:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharingPanelController=void 0;const r=i(194),s=i(2704),n=i(853);e.SharingPanelController=class{constructor(t){if(this.LOCAL_STORAGE_AUTO_REDIRECT_KEY="should_webextension_redirect_on_bookmark_with_twitter_sharing",this.view=t,this.registerEvents(),this.loadAutoRedirectionSetting(),this.retrieveShareText().then((t=>{t.twitter&&(this.view.shareWithTwitterButtonAnchor.href=t.twitter.intent_url,this.view.activateShareWithTwitterButton(),this.shouldAutoRedirect()&&""!==document.referrer&&this.view.redirect())})),!this.shouldAutoRedirect()){const t=s.getBrowserName();let e="uk";"chrome"===t?e="ch":"firefox"===t&&(e="ff"),this.view.injectGTMClickLabel(e)}}postCompleteMessage(){const t=document.querySelector("html").dataset.pageSubtype;(0,n.postMessageToExtension)(t,{})}registerEvents(){this.view.on(this.view.EV_CHANGED_AUTO_REDIRECT,(t=>this.saveAutoRedirectionSetting(t)))}shouldAutoRedirectoadAutoRedirectionSetting(){this.shouldAutoRedirect()?this.view.setAutomaticRedirection(!0):this.view.setAutomaticRedirection(!1)}saveAutoRedirectionSetting(t){t?window.localStorage.setItem(this.LOCAL_STORAGE_AUTO_REDIRECT_KEY,"1"):window.localStorage.removeItem(this.LOCAL_STORAGE_AUTO_REDIRECT_KEY)}retrieveShareText(){const t=this.shareTargetUrl(),e=new Promise(((e,i)=>{const s=new r.UserRepository;s.on("my_share_text:fetched",e),s.fetchShareText(t,null)})),i=new Promise(();return Promise.race([e,i])}shareTargetUrl},6683:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagAddFormController=void 0;const r=i(8642),s=i(8083);class n extends r.Observable{constructor(t,e,i){super(),this.tagAddTextbox=t,this.tagListView=e,this.tagAddButton=i,this.rawInput="",this.onTextboxUpdated=t=>{(""===t||s.validTagRegexp.test(t))&&(0===t.length?this.resetForm():(this.rawInput=t,this.tagAddButton.updateTagAddButtonLabel(this.rawInput),this.tagAddButton.show(),this.tagListView.query=this.rawInput))},this.onTextboxEnter=()=>{const t=this.normalizeTags(this.rawInput);t.every(s.isValidTag)&&(t.forEach((t=>{(0,s.isValidTag)(t)&&this.fire("tag_add_form:submit",t)})),this.resetForm())},this.onTagButtonClicked=this.onAddButtonClicked=()=>{const t=this.normalizeTags(this.rawInput);t.every(s.isValidTag)&&(t.forEach((t=>{(0,s.isValidTag)(t)&&this.fire("tag_add_form:submit",t)})),this.resetForm())},this.tagAddTextbox.on("tag_add_textbox:value_updated",this.onTextboxUpdated),this.tagAddTextbox.on("tag_add_textbox:enter",this.onTextboxEnter),this.tagListView.on("tag_list:clicked",this.onTagButtonClicked),this.tagAddButton.on("tag_add_button:clicked",this.onAddButtonClicked)}resetForm(){this.rawInput="",this.tagAddTextbox.clearTagAddBox(),this.tagListView.reset(),this.tagAddButton.reset()}normalizeTags(t){const e=/[\s\uFEFF\xA0]+$/g,i=t.replace(e,"").replace(/[\u0000-\u001F\u007F]/g," ");if(/^(?:\[[^\:\[\]\/\?%]+\])+$/.test(i)){const t=i.match(/\[[^\:\[\]\/\?%]+\]/g);if(null!==t)return t.map((t=>t.replace(/\[(.+)\]/,"$1").replace(e,"")))}return[i]}}e.TagAddFormController=n},430:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Annotation=void 0;const r=i(8083);e.Annotation=class{constructor(t,e){if(this.comment="",this.tags=[],e)this.tags=e,this.comment=t;else{t=t.replace(/[\u0000-\u001F\u007F-\u00A0\uFFFD\uFFFF]/g," ");let e=[],i=null;for(;null!==(i=/^\[([^\:\[\]\/\?%]+)\]/.exec(t));){let s=i[1].replace(/\s+$/,"");if(!(0,r.isValidTag)(s))break;t=t.slice(i[0].length),e=[...new Set([...e,s])]}this.tags=e,this.comment=t}}get tagString(){return this.tags.map(().join("")}},4269:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.anchorPath=e.FollowingBookmark=e.BookmarkWithEntry=e.Bookmark=e.BookmarkComment=e.BookmarkStatus=void 0;const r=i(3274);!function(t){t.Public="public",t.Private="private"}(e.BookmarkStatus||(e.BookmarkStatus={}));.BookmarkComment=s;.Bookmark=n;e.BookmarkWithEntry=e.FollowingBookmark=e.anchorPath=function(t){return`/${t.user.name}/${(0,r.formatDateTimeInJST)(t.created,"YYYYMMDD")}#bookmark-${"locationId"in t?t.locationId:t.location_id}`}},960:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Category=void 0;class i{static get uncategorizedCategory=i},5280:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Entry=void 0;e.Entry=class{constructor(t){this.title=t.title,this.root_url=t.root_url,this.url=t.url,this.image=t.image,this.total_bookmarks=t.total_bookmarks,this.total_bookmarks_with_user_postfix=t.total_bookmarks_with_user_postfix,this.summary=t.summary,this.summary_with_keyword_links=t.summary_with_keyword_links,this.category=t.category?t.category:null,this.is_wiped=!!t.is_wiped&&t.is_wiped}faviconURLntryURL(){return function(t){const e=new URL(t),i=e.protocol;if("http:"!==i&&"https:"!==i)return"/entry/"+e.href;let r="";return""!==e.username&&(r=""!==e.password?`${e.username}:${e.password}@`:`${e.username}@`),`/entry/${"https:"===i?"s/":""}${r}${e.host}${e.pathname}${e.search}`}(this.url)}hostname(){return new URL(this.url).host||""}rootTitle(){const t=new URL(this.root_url);return(t.host||"")+t.pathname.replace(/\/$/,"")}siteSearchUrl(){const t=new URL(this.root_url),e=t.host;if(!e)return"/entrylist?url="+encodeURIComponent(this.root_url);return`/site/${e}${/\/$/.test(this.root_url)?t.pathname:t.pathname.replace(/\/$/,"")}`}}},5468:2163:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DayOfWeek=e.CheckboxDefaultState=e.UrlClicksVisibility=e.UserPrivacy=void 0,function(t){t.Public="public",t.Private="private"}(e.UserPrivacy||(e.UserPrivacy={})),function(t){t.Public="public",t.Private="private"}(e.UrlClicksVisibility||(e.UrlClicksVisibility={})),e.CheckboxDefaultState||(e.CheckboxDefaultState={})),e.DayOfWeek||(e.DayOfWeek={}))},3452:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkRepository=e.STOCK_TAG=void 0;const r=i(2738),s=i(3274),n=i(2704),o=i(4269),a=i(960),l=i(5280);e.STOCK_TAG="\u3042\u3068\u3067\u8aad\u3080";class c{static getInstance(){return this.instance||(this.instance=new c),this.instance}constructor(){}add(t,e,i,s){const o={url:t,private:i?1:0,annotation:e.comment,tags:e.tagString,bookmark_stock:s?1:0};return r.default.post("/my/bookmark",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(o)})}addToLegacyBookmark(t){const e={rks:t.user.rks,url:t.url,private:t.is_private?1:0,comment:t.annotation.toString(),post_twitter:t.post_twitter?1:0,with_status_op:1,from:t.from},i=`/${t.user.name}/add.edit.json`,s=t.source?`${i}?source=${encodeURIComponent(t.source)}`:i;return r.default.post(s,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(e)}).then((t=>t.json())).then((e=>({user:t.user,url:t.url,locationId:e.eid,status:e.private?o.BookmarkStatus.Private:o.BookmarkStatus.Public,comment:t.annotation.comment,comment_expanded:e.comment_expanded,tags:t.annotation.tags,created:e.timestamp.replace(/\//g,"-")})))}delete(t){return r.default.post("/my/bookmark.delete",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)({url:t})})}deleteLegacy(t,e){return this.deleteBookmarkLegacy(t,{url:e,rks:t.rks})}deleteLegacyByLocationId(t,e){return this.deleteBookmarkLegacy(t,{location_id:e,rks:t.rks})}deleteBookmarkLegacy(t,e){return r.default.post(`/${t.name}/api.delete_bookmark.json`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(e)}).then((t=>new Promise(((e,i)=>{(window.dataLayer=window.dataLayer||[]).push({event:"boston:bookmark:delete"}),e(t)}))))}findMyBookmarkByUrl(t){const e=encodeURIComponent(t);return r.default.JSON.get(`/api/my/bookmark/${e}`).then((t=>{if(0===Object.keys(t).length)throw"Bookmark Not Found";return{user:t.user,url:t.url,locationId:t.location_id,status:t.status,comment:t.comment,comment_expanded:t.comment_expanded,tags:t.tags,created:t.created}}))}findAllBookmarksByUserName(t,e=1,i=[]){const s=i.length<=0?"":"&"+i.map(().join("&");return r.default.JSON.get(`/api/users/${t}/bookmarks?page=${e}${s}`).then((t=>t.bookmarks.map((t=>{const e=t.entry,i=t.entry.category;return{user:t.user,url:t.url,locationId:t.location_id,status:t.status,comment:t.comment,comment_expanded:t.comment_expanded,tags:t.tags,created:t.created,entry:new l.Entry({title:e.title,root_url:e.root_url,url:e.canonical_url,image:e.image,total_bookmarks:e.total_bookmarks,total_bookmarks_with_user_postfix:e.total_bookmarks_with_user_postfix,summary:e.summary,summary_with_keyword_links:e.summary_with_keyword_links,category:new a.Category({title:i.title,top_page_path:i.top_page_path,path:i.path})})}}))))}findAllBookmarksByUserNameAndDate(t,e){return r.default.JSON.get(`/api/users/${t}/bookmarks/${(0,s.formatDateTime)(e.toISOString(),"YYYYMMDD")}`).then((t=>({bookmarks:t.bookmarks.map((t=>{const e=t.entry,i=t.entry.category;return{user:t.user,url:t.url,locationId:t.location_id,status:t.status,comment:t.comment,comment_expanded:t.comment_expanded,tags:t.tags,created:t.created,entry:new l.Entry({title:e.title,root_url:e.root_url,url:e.canonical_url,image:e.image,total_bookmarks:e.total_bookmarks,total_bookmarks_with_user_postfix:e.total_bookmarks_with_user_postfix,summary:e.summary,summary_with_keyword_links:e.summary_with_keyword_links,category:new a.Category({title:i.title,top_page_path:i.top_page_path,path:i.path})})}})),nextCursor:t.next_cursor?new Date(t.next_cursor):null,previousCursor:t.previous_cursor?new Date(t.previous_cursor):null})))}findAllBookmarksByUrl(t,e=!1,i=500,s=!1,n){const o=encodeURIComponent(t),a=e?1:0,l=s?1:0;let c;return c=n?r.default.JSON.get(`/api/entry/${o}/bookmarks?cursor=${n}&limit=${i}&commented_only=${a}&exclude_owner=${l}`):r.default.JSON.get(`/api/entry/${o}/bookmarks?limit=${i}&commented_only=${a}&exclude_owner=${l}`),c.then((t=>({bookmarks:t.bookmarks.map((),cursor:t.cursor})))}}e.BookmarkRepository=c,c.instance=null},7688:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkSearchRepository=void 0;const r=i(2738),s=i(8642),n=i(2704),o=i(5280);class a{constructor(t,e,i=-1){this.lines=t,this.query=e,this.position=i}next(){const t=this.lines.indexOf(this.query,this.position);return t<0?null:new a(this.lines,this.query,this.lines.indexOf("\n",t))}}class l{ext(){let t,e=this.position+1,i=this.lines.length;const r=this.streams.concat([]);for(;i!==e;)for(i=e,t=0;t<r.length;t++){let s=r[t];if(s.position<e&&(s=s.next()),!s)return null;e<s.position&&(e=s.position),s.position<i&&(i=s.position),r[t]=s}return new l(this.lines,r,e)}result(){const t=this.lines.lastIndexOf("\n",this.position-1)+1;return this.lines.substring(t,this.position)}}class c extends s.Observable{load(t){const e=c.LOCAL_STORAGE_KEY;try{const i=JSON.parse(window.localStorage.getItem(e)||"{}");return i.index?i.username!==t||Date.now()-i.lastUpdatedAt>864e5?this.update(t):Date.now()-i.lastUpdatedAt>18e5?(this.save(i),this.fetch(t,0,1).then((e=>i.latest!==(e.split("\n")[3]||"").split("\t")[1]?this.update(t):i.index))):Promise.resolve(i.index):this.update(t)}catch(t){return Promise.reject("Failed to load bookmark search index from local storage")}}update(t){return this.indexLoadingCount+=1,this.fire("bookmark_incremental_search:index_update_started",this.indexLoadingCount),this.fetch(t).then((e=>{const i=e.split("\n"),r=i.splice(0,3*i.length/4),s=i[0].split("\t")[1],n=[];for(let t=0;t<r.length;t+=3)n.push([r[t].trim(),r[t+1].trim(),r[t+2].trim(),i[t/3]].join("\t"));const o={username:t,latest:s,index:n.join("\n")+"\n",lastUpdatedAt:0};return this.save(o),o.index})).catch(().then((t=>(this.indexLoadingCount-=1,this.fire("bookmark_incremental_search:index_update_finished",this.indexLoadingCount),t)))}fetch(t,e=void 0,i=c.INDEX_LIMIT){const s=[];void 0!==e&&s.push(["offset",e]),i>c.INDEX_LIMIT&&(i=c.INDEX_LIMIT),s.push(["limit",i]);const n=`/${t}/search.data?`+s.map(().join("&");return r.default.get(n).then((t=>t.text()))}save(t){const e=c.LOCAL_STORAGE_KEY;t.lastUpdatedAt=Date.now();try{window.localStorage.setItem(e,JSON.stringify(t))}catch(t){}}constructor(t){super(),this.results={},this.indexLoadingCount=0,this.username=t}etchIncrementalSearchResult(t,e=1,i=-1){const r=this.username;this.lastQuery=t;const s=[r,t].join(":");if(s in this.results&&this.results[s][i]){const t=this.results[s][i];return this.fire("bookmark_incremental_search:fetched",t),Promise.resolve(this.results[s][i])}return this.load(r).then((h=>{const d=c.SEARCH_LIMIT,u=h.toLowerCase(),p=t.split(/\s+/).filter((),m=p.map((t=>new a(u,t.toLowerCase(),i)));let f=new l(h,m,i);const g=[];for(;(f=f.next())&&g.length<d;){const t=f.result().split("\t"),e=t[1].match(new RegExp("^((?:\\[[^\\:[\\]\\/\\?%]+\\])+)?(.*)$"))||{},i=Array.from(t[4].match(new RegExp("^(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})$"))||[]).slice(1),s=parseInt(t[3],10)||0;g.push({url:t[2],tags:(e[1]||"").substring(1,(e[1]||"").length-1).split("]["),comment:(e[2]||"").trim(),created:`${i.slice(0,3).join("-")}T${i.slice(3,6).join(":")}+09:00`,user:{name:r},entry:new o.Entry({url:t[2],title:t[0],root_url:"",total_bookmarks:s,total_bookmarks_with_user_postfix:(0,n.toStringWithUserPostfix)(s),image:null,summary:"",summary_with_keyword_links:""})})}let y;null!==f&&(y=f.position);const _=null!==f&&null!==f.next(),v={words:p,bookmarks:g,page:e,cursor:i,nextCursor:y,hasNext:_};return s in this.results||(this.results[s]=[]),this.results[s][i]=v,this.fire("bookmark_incremental_search:fetched",v),v}))}e.BookmarkSearchRepository=c,c.LOCAL_STORAGE_KEY="bstn.bookmarksearch.index",c.INDEX_LIMIT=2e4,c.SEARCH_LIMIT=5},6723:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkStockListRepository=void 0;const r=i(2738),s=i(960),n=i(5280);e.BookmarkStockListRepository=class{etchUnreadBookmarkStocks(t=null){const e="/api/my/unread_bookmarks"+(t?`?cursor=${t}`:"");return r.default.JSON.get(e).then((t=>({bookmarkStocks:t.bookmark_stocks.map((t=>{const e=t.entry,i=e.category;return{url:t.url,is_read:t.is_read,created:t.created,entry:new n.Entry({title:e.title,root_url:e.root_url,url:e.canonical_url,image:e.image,total_bookmarks:e.total_bookmarks,total_bookmarks_with_user_postfix:e.total_bookmarks_with_user_postfix,summary:e.summary,summary_with_keyword_links:e.summary_with_keyword_links,category:new s.Category({title:i.title,top_page_path:i.top_page_path,path:i.path})})}})),nextCursor:t.next_cursor||null})))}}},7174:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkStockRepository=void 0;const r=i(2505),s=i(2738),n=i(2704);class o{static getInstance(){return this.instance||(this.instance=new o),this.instance}constructorsStocked(t){if(this.stockDeferreds[t])return this.stockDeferreds[t].promise;const e=new r.default;return this.pendingLocations.push(t),this.stockDeferreds[t]=e,this.resolvePendingLocations(),e.promise}resolvePendingLocations(){0!==this.pendingLocations.length&&null===this.pendingTimer&&(this.pendingTimer=window.setTimeout(this.doResolve.bind(this),50))}doResolve(){if(0===this.pendingLocations.length)return;const t=this.pendingLocations;this.pendingLocations=[],s.default.JSON.post("/api/bookmark_stocks/resolve",{body:JSON.stringify({urls:t})}).then((e=>{const i=e.filter(().map((t=>t.url));i.forEach((t=>{const e=this.stockDeferreds[t];e&&e.resolve(!0)})),(0,n.difference)(t,i).forEach((t=>{const e=this.stockDeferreds[t];e&&e.resolve(!1)}))})).catch((e=>{t.forEach((t=>{const e=this.stockDeferreds[t];e&&e.reject()}))})).then(()}addToStock(t,e){return s.default.put(`/api/bookmark_stock/${encodeURIComponent(e)}`,{headers:{"X-HATENA-RKS":t.rks}}).then(().catch((()=>Promise.reject()))}read(t,e){return s.default.post(`/api/bookmark_stock/${encodeURIComponent(e)}/read`,{headers:{"X-HATENA-RKS":t.rks}}).catch(()}}e.BookmarkStockRepository=o,o.instance=null},3325:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkDeletionRepository=void 0;const r=i(2738),s=i(8642),n=i(2704);class o extends s.Observable{status(){return r.default.get("/api/my/bookmarks/bulk-deletion").then((t=>(this.fire("bulk_deletion_status:fetched",t),204===t.status?null:t.json())))}start(t){const e={rks:t.rks};return r.default.post("/api/my/bookmarks/bulk-deletion/start",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(e)})}abort(t){const e={rks:t.rks};return r.default.post("/api/my/bookmarks/bulk-deletion/abort",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(e)})}}e.BulkDeletionRepository=o},4650:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkTagProcessRepository=void 0;const r=i(2738),s=i(8642),n=i(2704);class o extends s.Observable{heckConflict(t){const e=`/api/my/bookmarks/bulk-tag-process/edit/check_conflict?to_tag=${encodeURIComponent(t)}`;return r.default.get(e).then((t=>t.json()))}startEdit(t,e,i){this.ignoreSavedStatus();const s={rks:t.rks,from_tag:e,to_tag:i};return r.default.post("/api/my/bookmarks/bulk-tag-process/edit/start",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(s)}).then((t=>t.json()))}startDeletion(t,e){this.ignoreSavedStatus();const i={rks:t.rks,tag:e};return r.default.post("/api/my/bookmarks/bulk-tag-process/delete/start",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(i)}).then((t=>t.json()))}abort(t){this.ignoreSavedStatus();const e={rks:t.rks};return r.default.post("/api/my/bookmarks/bulk-tag-process/abort",{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(e)}).then((t=>t.json()))}status(){const[t,e]=this.loadSavedStatus();return e?Promise.resolve(t):r.default.get("/api/my/bookmarks/bulk-tag-process").then((t=>204===t.status?null:t.json())).then(()}loadSavedStatus(){if(this.ignoreCache)return[null,!1];try{const t=JSON.parse(window.localStorage.getItem(o.BULK_TAG_PROCESS_STATUS_KEY)||"{}"),e=Date.now()-o.BULK_TAG_PROCESS_STATUS_CACHE_EXPIRATION;if(t&&t.savedAt&&e<t.savedAt&&t.savedAt<=Date.now())return[t.status,!0]}catch(t){}return[null,!1]}saveStatus(t){try{const e=Date.now();window.localStorage.setItem(o.BULK_TAG_PROCESS_STATUS_KEY,JSON.stringify({status:t,savedAt:e})),this.ignoreCache=!1}catch(t){}}e.BulkTagProcessRepository=o,o.BULK_TAG_PROCESS_STATUS_KEY="bstn.bulk_tag_process_status",o.BULK_TAG_PROCESS_STATUS_CACHE_EXPIRATION=1e4},1271:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DownvoteRepository=void 0;const r=i(8642);class s extends r.Observable{static getInstance(){return this.instance||(this.instance=new s),this.instance}sVotedote(t){localStorage.setItem(t,""),this.fire(s.voteUpdatedEvent,t,!0)}unvote(t){localStorage.removeItem(t),this.fire(s.voteUpdatedEvent,t,!1)}}e.DownvoteRepository=s,s.voteUpdatedEvent="downvote_repository:vote_updated",s.instance=null},4759:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryInfoEditingRepository=void 0;const r=i(2738),s=i(2704);class n{constructor(t){this.rks=t}static getInstance(t){return void 0===this.instance&&(this.instance=new n(t)),this.instance}commitEntryInfo(t,e){const i={url:t,title:e};return r.default.post("/api/entry/info",{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Hatena-Rks":this.rks},body:(0,s.serializeAsFormUrlEncoded)(i)})}enqueueRefresh(t){const e={url:t};return r.default.post("/api/entry/info/refresh",{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Hatena-Rks":this.rks},body:(0,s.serializeAsFormUrlEncoded)(e)})}}e.EntryInfoEditingRepository=n,n.instance=void 0},3170:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryInfoEditingPermissionRepository=void 0;const r=i(2738);class s{etchAllowedItems(t){return r.default.JSON.get(`/api/entry/${encodeURIComponent(t)}/editing_ability`)}}e.EntryInfoEditingPermissionRepository=s,s.instance=void 0},8399:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryListLayoutRepository=void 0;class i{pdateLayout(t){try{window.localStorage.setItem(i.LOCAL_STORAGE_KEY,t)}catch(t){console.log("failed to update local storage")}}}e.EntryListLayoutRepository=i,i.LOCAL_STORAGE_KEY="bstn.entrylist.layout",i.instance=null},9998:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryRepository=void 0;const r=i(2738);e.EntryRepository=class{irstBookmark(t,e){return e?r.default.JSON.get(`/api/entry/${encodeURIComponent(t)}/first_bookmark?users=${e}`):r.default.JSON.get(`/api/entry/${encodeURIComponent(t)}/first_bookmark`)}}},8315:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntrylistRepository=void 0;const r=i(2738),s=i(8642),n=i(5280);class o extends s.Observable{etchRelatedEntrylist(){return r.default.get(`/api/related_entries/${encodeURIComponent(this.url)}`).then((t=>t.json())).then((t=>{const e=t.related_entries.map((t=>new n.Entry({title:t.title,root_url:t.root_url,url:t.canonical_url,image:t.image,total_bookmarks:t.total_bookmarks,total_bookmarks_with_user_postfix:t.total_bookmarks_with_user_postfix,summary:t.summary,summary_with_keyword_links:t.summary_with_keyword_links,category:t.category})));this.fire("related_entrylist:fetched",e)}))}}e.EntrylistRepository=o},5564:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowUserRepository=void 0;const r=i(2738),s=i(2704);e.FollowUserRepository=class{followLegacy(t,e){const i={username:e,rks:t.rks};return r.default.post(`/${t.name}/api.follow.json`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,s.serializeAsFormUrlEncoded)(i)})}unfollowLegacy(t,e){const i={username:e,rks:t.rks};return r.default.post(`/${t.name}/api.unfollow.json`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,s.serializeAsFormUrlEncoded)(i)})}}},3533:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowerRepository=void 0;const r=i(2738),s=i(8642);class n extends s.Observable{fetchRemote(t,e,i){const s=`/api/internal/user/${t}/followers?limit=${e}&of=${i}`;return r.default.JSON.get(s).then((t=>(this.fire("following_users:fetched",t),t.followers.map((t=>({name:t.name,following:t.followed_by_visitor}))))))}}e.FollowerRepository=n},7508:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingBookmarksRepository=void 0;const r=i(2738),s=i(8642),n=i(2704),o=i(5280);class a extends s.Observable{fetchFollowingFeed(t){const e="/api/my/following_feed"+(t?`?offset=${t}`:"");return r.default.JSON.get(e).then((t=>({items:t.items.map((t=>{const e=t.entry,i=t.own_bookmark,r=t.reaction,s=t.reactions,a=new URL(e.url),l=`${a.protocol||"http:"}//${a.host||""}/`;return{entry:new o.Entry({title:e.title,url:e.url,root_url:l,image:e.image_url,summary:e.content,summary_with_keyword_links:(0,n.escapeHTML)(e.content),total_bookmarks:e.count,total_bookmarks_with_user_postfix:(0,n.toStringWithUserPostfix)(e.count)}),ownBookmark:i,reaction:r,reactions:s}})),nextCursor:t.next_cursor})))}fetchRemote(t,e,i=!1){return this.fetchRemoteByURLs(t,[e],i).then((t=>{const i=t[e]?t[e]:[];return this.fire("following_bookmarks:fetched",i),i}))}fetchRemoteByURLs(t,e,i=!1){return e.length<=0?(this.fire("all_following_bookmarks:fetched",{}),Promise.resolve({})):r.default.JSON.post("/api/my/following_bookmarks",{body:JSON.stringify({urls:e,include_own_bookmarks:i})}).then((t=>(this.fire("all_following_bookmarks:fetched",t),Promise.resolve(t)))).catch(()}}e.FollowingBookmarksRepository=a},9358:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingUserRepository=void 0;const r=i(2738),s=i(8642);class n extends s.Observable{fetchRemote(t,e,i){const s=`/api/internal/user/${t}/followings?limit=${e}&offset=${i}`;return r.default.JSON.get(s).then((t=>(this.fire("following_users:fetched",t),t.followings.map(())))}}e.FollowingUserRepository=n},5360:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreUserRepository=void 0;const r=i(2738),s=i(8642),n=i(2704);class o extends s.Observable{etchRemote(t,e){const i=e?`/api/my/ignore_users?limit=${t}&cursor=${e}`:`/api/my/ignore_users?limit=${t}`;return r.default.JSON.get(i).then((t=>(this.fire("ignore_users:fetched",t),t)))}getIgnoreUsers(t){if(this.storage)return JSON.parse(this.storage.getItem("bstn.ignored_users"))}saveToLocal(t){this.storage&&this.storage.setItem("bstn.ignored_users",JSON.stringify(t))}add(t){return r.default.JSON.put(`/api/my/ignore/${t}`)}ignoreLegacy(t,e){const i={username:e,rks:t.rks};return r.default.post(`/${t.name}/api.ignore.json`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(i)})}unignoreLegacy(t,e){const i={username:e,rks:t.rks};return r.default.post(`/${t.name}/api.unignore.json`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,n.serializeAsFormUrlEncoded)(i)})}}e.IgnoreUserRepository=o},8840:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestTagTimelineRepository=void 0;const r=i(2738),s=i(960),n=i(5280);class o{static getInstance(){return this.instance||(this.instance=new o),this.instance}fetchFeed(t,e,i=0){return r.default.JSON.get(`/api/interest/${encodeURIComponent(t)}?limit=${e}&offset=${i}`).then((t=>({entries:t.entries.map((t=>{const e=t.category;return new n.Entry({title:t.title,root_url:t.root_url,url:t.canonical_url,image:t.image,total_bookmarks:t.total_bookmarks,total_bookmarks_with_user_postfix:t.total_bookmarks_with_user_postfix,summary:t.summary,summary_with_keyword_links:t.summary_with_keyword_links,category:new s.Category({title:e.title,top_page_path:e.top_page_path,path:e.path})})})),cursor:t.cursor})))}}e.InterestTagTimelineRepository=o,o.instance=null},4395:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestedTagsRepository=void 0;const r=i(2738);e.InterestedTagsRepository=class{constructor(t){this.visitor=t}subscribe(t){return r.default.JSON.post(`/-/my/interest_tag/${encodeURIComponent(t)}`,{headers:{"X-HATENA-RKS":this.visitor.rks}})}unsubscribe(t){return r.default.JSON.post(`/-/my/interest_tag/${encodeURIComponent(t)}/delete`,{headers:{"X-HATENA-RKS":this.visitor.rks}})}}},6291:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModalMessageRepository=void 0;class i{static getInstance(){return this.instance||(this.instance=new i),this.instance}getAndRemoveMessage(){const t=window.localStorage.getItem(i.LOCAL_STORAGE_KEY_PREFIX);return window.localStorage.removeItem(i.LOCAL_STORAGE_KEY_PREFIX),t}setMessage(t){try{window.localStorage.setItem(i.LOCAL_STORAGE_KEY_PREFIX,t)}catch(t){console.log("failed to update local storage")}}}e.ModalMessageRepository=i,i.LOCAL_STORAGE_KEY_PREFIX="bstn.modal.message:",i.instance=null},7450:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotificationRepository=void 0;const r=i(2738),s=i(8642);class n extends s.Observable{constructor(t){super(),this.user=t}fetchCount(){return r.default.JSON.get("https://www.hatena.ne.jp/notify/notices.count.json",{credentials:"include",mode:"cors"}).then(().catch((t=>this.fire("notification:count_fetch_failed",t)))}}e.NotificationRepository=n},8729:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PagingRepository=void 0;const r=i(2738),s=i(2704),n=i(960),o=i(5280);e.PagingRepository=class{fetchBookmarks(t){return this.fetchRemote(t)}etchRemote(t){return r.default.JSON.get(t.xhr_path).then((t=>({item:{bookmarks:t.item.bookmarks.map((t=>{const e=t.entry;return{user:t.user,url:t.url,locationId:t.location_id,status:t.status,comment:t.comment,comment_expanded:t.comment_expanded,tags:t.tags,created:t.created,entry:new o.Entry({title:e.title,root_url:e.root_url,url:e.canonical_url,image:e.image,total_bookmarks:e.total_bookmarks,total_bookmarks_with_user_postfix:e.total_bookmarks_with_user_postfix,summary:e.summary,summary_with_keyword_links:e.summary_with_keyword_links,category:new n.Category(e.category),is_wiped:e.is_wiped||!1})}}))},pager:{next:t.pager.next||null,previous:t.pager.previous||null,pages:t.pager.pages||[]}})))}fetchFeedDigest(t){return r.default.JSON.get(t.xhr_path).then((t=>({items:t.item.map((t=>{const e=t.entry,i=t.reactions,r=new URL(e.url),n=`${r.protocol||"http:"}//${r.host||""}/`;return{entry:new o.Entry({title:e.title,url:e.url,root_url:n,image:e.image_url,summary:e.content,summary_with_keyword_links:(0,s.escapeHTML)(e.content),total_bookmarks:e.count,total_bookmarks_with_user_postfix:(0,s.toStringWithUserPostfix)(e.count)}),reactions:i}})),pager:t.pager})))}}},2435:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileRepository=void 0;const r=i(2738);e.ProfileRepository=class{constructor(){}fetchProfile(t){return r.default.JSON.get(`https://pf-api.hatena.com/profile/profiles?name=${t}`,{mode:"cors"}).then((e=>e[t])).then((t=>t||Promise.reject("Not found")))}fetchUserInfo(t){return r.default.JSON.get(`/api/internal/cambridge/user/${t}`).then((t=>t.user)).then((e=>e||Promise.reject(`${t} not found`)))}fetchUserInfos(t){return r.default.JSON.post("/api/user_info_list",{body:JSON.stringify({users:t})}).then((t=>t))}}},5161:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShortURLRepository=void 0;const r=i(2738);class s{static getInstance(){return this.instance||(this.instance=new s),this.instance}constructor(){}fetchTweetUrl(t){return r.default.JSON.post("/api/internal/bookmarks/shares_and_clicks",{body:JSON.stringify({bookmarks:t})})}}e.ShortURLRepository=s,s.instance=null},7656:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserConfigRepository=void 0;const r=i(2738);e.UserConfigRepository=class{constructor(t){this.user=t}putProfileSetting(t){const e={rks:this.user.rks,status:t.privacy};return r.default.JSON.put("/api/my/config/profile",{headers:{"X-HATENA-RKS":this.user.rks},body:JSON.stringify(e)})}putBookmarkSetting(t){const e={bookmark_status_on_stock:t.bookmarkStatusOnStock,remove_on_read:t.removeReadlaterTagOnRead};return r.default.JSON.put("/api/my/config/bookmark_stock",{headers:{"X-HATENA-RKS":this.user.rks},body:JSON.stringify(e)})}putDisplaySetting(t){const e={url_clicks_visibility:t.urlClicksVisibility};return r.default.JSON.put("/api/my/config/display",{headers:{"X-HATENA-RKS":this.user.rks},body:JSON.stringify(e)})}putNotificationSetting(t){const e={rks:this.user.rks,hour:t.hour,days_of_week:t.daysOfWeek};return r.default.JSON.put("/api/my/config/notification/bookmark_stock",{headers:{"X-HATENA-RKS":this.user.rks},body:JSON.stringify(e)})}putTwitterShareSetting(t){const e={checkbox_default_state:t.checkboxDefaultState,with_title:t.withTitle,with_tags:t.withTags,with_total_bookmarks:t.withTotalBookmarks,with_comment_list_url:t.withCommentListUrl};return r.default.JSON.put("/api/my/config/application/twitter",{headers:{"X-HATENA-RKS":this.user.rks},body:JSON.stringify(e)})}}},2803:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704);e.init=function(){const t=document.querySelector(".js-activitypub-user-id-input"),e=document.querySelector(".js-submit"),i=(0,s.getActivityPubUserId)();null!==i&&(t.value=i);const n=new r.UserRepository;n.on("my_share_text:fetched",(t=>{t.mastodon&&(location.href=t.mastodon.intent_url)})),e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault();const i=t.value;(0,s.setActivityPubUserId)(i);const r=new URLSearchParams(location.search).get("url");r?n.fetchShareText(r,i):window.location.href="/-/my/config/applications"}))}},6659:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(4782),o=i(9450),a=i(1989),l=i(8547),c=i(2109),h=i(5252);e.init=function(){const t=r.UserRepository.getInstance();if(new o.GlobalHeaderController(new c.GlobalHeaderView(document.querySelector("#global-header")),t),(0,s.isMobile)()){const e=document.querySelector(".js-drawer-menu"),i=document.querySelector(".js-drawer-menu-button"),r=new l.DrawerMenuView(e,i);new n.DrawerMenuController(r,t)}if(!(0,s.isMobile)()){const t=new h.KeyboardShortcutView(document.body,".js-keyboard-selectable-item",94);new a.KeyboardShortcutController(t).startWatching()}}},6769:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(9450),n=i(615),o=i(2109),a=i(7897);e.init=function(){const t=r.UserRepository.getInstance(),e=document.querySelector("#global-header");e&&new s.GlobalHeaderController(new o.GlobalHeaderView(e),t);const i=document.querySelector(".js-global-notification");i&&new n.GlobalMaintenanceNotificationController(new a.GlobalNotificationView(i),t)}},2523:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(8925),o=i(3486),a=i(1718),l=i(1579),c=i(4782),h=i(5737),d=i(5270),u=i(5574),p=i(3697),m=i(9450),f=i(615),g=i(2700),y=i(6592),_=i(6660),v=i(653),b=i(1361),w=i(3452),k=i(4759),S=i(3170),E=i(8315),T=i(5564),x=i(7508),C=i(5360),A=i(5161),P=i(7109),M=i(2226),B=i(3089),R=i(3857),D=i(508),I=i(6324),L=i(8547),O=i(6253),F=i(8141),V=i(375),N=i(701),U=i(5886),j=i(3808),q=i(418),G=i(5287),z=i(2109),$=i(7897),Y=i(4899),H=i(1543),W=i(1233),K=i(6320),J=i(1153),Z=i(341),Q=i(8205),X=i(6984),tt=i(730),et=i(2808),it=i(2960),rt=i(7354),st=i(9897);e.init=function(){const t=new x.FollowingBookmarksRepository,e=new T.FollowUserRepository,i=new C.IgnoreUserRepository(localStorage),nt=r.UserRepository.getInstance();new m.GlobalHeaderController(new z.GlobalHeaderView(document.querySelector("#global-header")),nt);{const t=new H.IgnoreUserView(document.getElementById("ignore-user-style"));new g.IgnoreUserController(t,i)}!function(t,e,i,r){const n=document.querySelector("#autoloader-bookmark-item"),c=document.querySelector("#template-short-url-click"),h=document.querySelector("#container"),d=(null==h?void 0:h.offsetTop)||0,u=new Q.ScrollView(window,{x:0,y:d}),p=new D.BookmarkSortTabView(document.querySelector(".js-bookmarks-sort-tabs-group")),m=new l.BookmarkSortTabController(p,u),f=t=>{const e=new et.DownvoteController(new rt.DownvoteView(t)),i=document.querySelector(".js-message-modal");i&&e.exclusiveOn("downvote:voted",(()=>{y.MessageModalController.setMessage("\u30b3\u30e1\u30f3\u30c8\u3078\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u53d7\u3051\u4ed8\u3051\u307e\u3057\u305f\u3002\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u306f\u30b5\u30fc\u30d3\u30b9\u6539\u5584\u306b\u6d3b\u7528\u3044\u305f\u3057\u307e\u3059\u3002"),new y.MessageModalController(new K.MessageModalView(i))}))};{let g=null;const _=document.querySelector(".js-all-bookmarkers-modal"),b=document.querySelector(".js-all-bookmarkers-modal-open");_&&b&&(g=new P.AllBookmarkersModalView(_,b));const k=document.querySelector(".js-bookmarker-icons");k&&new I.BookmarkerView(k);const S=document.querySelector(".js-bookmarks-all");if(S){const x=new X.ShortURLView(S,c);new v.ShortURLController(x,A.ShortURLRepository.getInstance()),g&&g.on("modal:opened",(()=>{x.initialLoad()})),r.on("my_profile:fetched",(()=>{f(S)}))}const E=document.querySelector("#autoloader-bookmark-item"),T=document.querySelector(".js-bookmark-autoloader-all");E&&T&&new o.BookmarkAutoLoaderController(new B.BookmarkAutoLoaderView(T,E,!0),w.BookmarkRepository.getInstance(),r,t,{commentedOnly:!1,initialLoad:18,collapseLimit:void 0,excludeOwner:!1})}{const C=document.querySelector(".js-bookmarks-popular");if(C){const M=new X.ShortURLView(C,c);new v.ShortURLController(M,A.ShortURLRepository.getInstance()),p.on(D.BookmarkSortTabView.EVENT_TAB_DISPLAYED,(t=>{"popular"===t&&M.initialLoad()})),r.on("my_profile:fetched",(()=>{f(C)}))}}{const L=document.querySelector(".js-bookmark-autoloader-recent");n&&L&&new o.BookmarkAutoLoaderController(new B.BookmarkAutoLoaderView(L,n),w.BookmarkRepository.getInstance(),r,t,{commentedOnly:!0,initialLoad:void 0,collapseLimit:(0,s.isMobile)()?10:void 0,excludeOwner:!0});const O=document.querySelector(".js-bookmarks-recent");if(O){const F=new X.ShortURLView(O,c);new v.ShortURLController(F,A.ShortURLRepository.getInstance()),p.on(D.BookmarkSortTabView.EVENT_TAB_DISPLAYED,(),r.on("my_profile:fetched",()}}m.init();{function V(r){const n=void 0===r;[document.querySelector(".js-bookmarks-sort-panels"),document.querySelector(".js-all-bookmarkers-modal-window")].filter(s.notEmpty).forEach((s=>{var o;new a.BookmarkItemMenuController(new R.BookmarkItemMenuView(s,null!==(o=null==r?void 0:r.name)&&void 0!==o?o:"",n),i,e,t,r)}))}r.on("my_profile:fetched",(t=>{V(t)})),r.on("my_profile:fetch_failed",()}}(t,e,i,nt);const ot=document.querySelector(".js-following-bookmarks-container"),at=new G.FollowingBookmarksView(ot);new p.FollowingBookmarksController(at,t);{const t=document.querySelector(".js-entry-embed-modal"),e=document.querySelector(".js-entry-subMenu-embed");new F.EntryEmbedLinkView(t,e)}{const t=document.querySelector(".js-entry-about-description");new O.EntryDescriptionView(t)}{const t=document.querySelector(".js-entry-myBookmark"),e=t.dataset.entryCanonicalUrl,i=t.dataset.defaultComment,r=t.dataset.bookmarkSource,n=[].slice.apply(document.querySelectorAll(".js-entry-myBookmark-form-button")),o=document.querySelector(".js-entry-comment-guest"),a=!!new URL(location.href).searchParams.get("registered_from");new d.EntryMyBookmarkController(e,new U.EntryMyBookmarkView(t),new j.MobileEntryMyBookmarkView(t,n,o),w.BookmarkRepository.getInstance(),nt,a,(0,s.isMobile)(),""!==i?i:void 0,""!==r?r:void 0)}if((0,s.isMobile)()){const t=document.querySelector(".js-entry-info-title"),e=t.querySelector(".js-entry-info-title-text");new W.LimitedHeightBoxView(t,e,100).applyLimit()}if("hatenablog-header-202104"===new URLSearchParams(window.location.search).get("source")){const t=document.querySelector(".js-blogtobookmark-modal");if(t){new n.BlogToBookmarkModalController(new J.ModalView(t)).open()}}nt.on("my_profile:fetched",(t=>{const e=S.EntryInfoEditingPermissionRepository.getInstance(),i=document.querySelector(".js-entry-edit-button"),r=if((0,s.isMobile)())r();else{const s=document.querySelector(".js-entry-edit-modal"),n=s.dataset.url,o=()=>{const r=new V.EntryInfoEditorView(s,i),o=k.EntryInfoEditingRepository.getInstance(t.rks);new h.EntryInfoEditorController(r,o,e,n),i.classList.add("is-permitted")};e.fetchAllowedItems(n).then((t=>{t.length>0?o():r()}))}const n=document.querySelector(".js-entry-info");new N.EntryInfoMenuView(n,t.name),document.querySelectorAll(".js-bookmark-menu-button").forEach((t=>t.classList.add("is-enabled")));{const i=new tt.VisibilityLinkView(document.querySelector("#owner-bookmark-visibility"),document.querySelector("#owner-bookmark-visibility-template"));new b.VisibilityLinkController(t,i,e).updateVisibilityLink()}const o=document.querySelector(".js-first-bookmark-modal");if(o.classList.contains("js-first-bookmark-notifiable")){const e=document.querySelector(".js-entry-wrapper").getAttribute("data-entry-url"),i=new URLSearchParams(window.location.search).get("users");new it.FirstBookmarkNotificationModalController(new st.FirstBookmarkNotificationModalView(o),e,i,t)}})),nt.on("my_profile:fetch_failed",(t=>{const e=document.querySelector(".js-entry-edit-button");e.parentNode.removeChild(e);const i=document.querySelector(".js-entry-info");new N.EntryInfoMenuView(i,"");{const t=document.querySelector(".js-bookmark-guest-register-modal"),e=document.querySelectorAll(".js-register-modal-link");new Y.GuestRegisterModalView(t,[].slice.call(e))}}));{const t=document.querySelector(".js-entry-submenu-only-logged-in");t&&new u.EntrySubmenuController(new q.EntrySubmenuView(t),nt)}{const t=document.querySelector(".js-entry-wrapper").dataset.entryUrl,e=new E.EntrylistRepository(t),i=document.querySelector(".js-entry-relationContents-list"),r=new Z.RelatedEntryView(i);new _.RelatedEntryController(e,r),e.fetchRelatedEntrylist()}if((0,s.isMobile)()){const t=document.querySelector(".js-drawer-menu"),e=document.querySelector(".js-drawer-menu-button"),i=new L.DrawerMenuView(t,e);new c.DrawerMenuController(i,nt)}{const t=document.querySelector(".js-global-notification");t&&new f.GlobalMaintenanceNotificationController(new $.GlobalNotificationView(t),nt)}if((0,s.isMobile)()){const t=document.querySelector(".js-app-banner-container");if(t){new M.AppBannerView(t).show()}}nt.on("my_profile:fetched",(e=>{i.fetchRemote(1e4),t.fetchRemote(e,at.entryURL),nt.fetchExternalShareConfig()}))}},8029:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(5457),s=i(194),n=i(2704),o=i(4782),a=i(3697),l=i(9450),c=i(615),h=i(7508),d=i(627),u=i(8547),p=i(5671),m=i(920),f=i(5287),g=i(2109),y=i(7897);e.init=function(){const t=s.UserRepository.getInstance();new l.GlobalHeaderController(new g.GlobalHeaderView(document.querySelector("#global-header")),t);{const t=document.querySelector(".js-comment-menu-code"),e=document.querySelector(".js-comment-code");new p.EntryCommentEmbedButtonView(t,e)}document.querySelectorAll(".js-comment-page-bbutton").forEach(();const e=new h.FollowingBookmarksRepository,i=document.querySelector(".js-following-bookmarks-container"),_=new f.FollowingBookmarksView(i);new a.FollowingBookmarksController(_,e);{const t=document.querySelector(".js-comment-menu-violation");new m.EntryCommentReportViolationButtonView(t)}if((0,n.isMobile)()){const e=document.querySelector(".js-drawer-menu"),i=document.querySelector(".js-drawer-menu-button"),r=new u.DrawerMenuView(e,i);new o.DrawerMenuController(r,t)}if((0,r.isStaging)()){const t=document.querySelector("bad-selector");console.log(t.id)}{const e=document.querySelector(".js-global-notification");e&&new c.GlobalMaintenanceNotificationController(new y.GlobalNotificationView(e),t)}t.on("my_profile:fetched",()}},5863:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(9450),n=i(615),o=i(2109),a=i(7897);e.init=function(){const t=r.UserRepository.getInstance(),e=document.querySelector("#global-header");e&&new s.GlobalHeaderController(new o.GlobalHeaderView(e),t);{const e=document.querySelector(".js-global-notification");e&&new n.GlobalMaintenanceNotificationController(new a.GlobalNotificationView(e),t)}const i=new URL(location.href);let l="";if(i.pathname.match(/^\/entry\/?$/))l=i.searchParams.get("url")||"";else if(i.pathname.match(/^\/entry\//)){const t=i.pathname.substr(7)+i.search+i.hash;l=/^https?%3a%2f%2f/i.test(t)?decodeURIComponent(t):/^https?:\/\//i.test(t)?t:/^s\//.test(t)?"https://"+t.substr(2):"http://"+t,l=l.replace(/%23/g,"#")}if(l){document.querySelector(".js-entry-notfound-input").value=l;{const t=document.querySelector(".js-entry-notfound-form");if(t){const e=new URLSearchParams(location.search);for(const i of["comment","source"]){const r=e.get(i);if(null===r)continue;const s=document.createElement("input");s.type="text",s.name=i,s.value=r,s.classList.add("is-hidden"),t.appendChild(s)}}}{const t=new URL(l),e=`/entrylist?sort=count&url=${encodeURIComponent(t.host)}`,i=document.querySelector(".js-entry-notfound-domain-link"),r=i.querySelector("a"),s=r.querySelector(".js-entry-notfound-domain-text");i.classList.remove("is-hidden"),r.setAttribute("href",e),s.innerText=t.host}}}},5020:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(9450),o=i(615),a=i(1989),l=i(5179),c=i(9482),h=i(3789),d=i(7508),u=i(6994),p=i(5287),m=i(2109),f=i(7897),g=i(5252),y=i(5748),_=i(1911),v=i(690);e.init=function(){const t=document.querySelector("#global-header"),e=r.UserRepository.getInstance();t&&new n.GlobalHeaderController(new m.GlobalHeaderView(t),e);const i=document.querySelector(".js-entrysearch-date");new y.EntrySearchDateView(i);const b=new d.FollowingBookmarksRepository;let w;{const t=Array.from(document.querySelectorAll(".js-following-bookmarks-container")).map((t=>new p.FollowingBookmarksView(t)));w=new l.EntrySearchFollowingBookmarksController(t,b)}const k=document.querySelector(".js-entrysearch-form");k&&new c.EntrySearchForm(k);const S=document.querySelector(".js-entrysearch-datepicker-form");S&&new c.EntrySearchForm(S);const E=document.querySelector(".js-entrysearch-filter-btn"),T=document.querySelector(".js-entrysearch-filter");if(E&&T&&k&&new h.MobileEntrySearchFilterController(new _.MobileEntrySearchFilterView(k,E,T)),!(0,s.isMobile)()){const t=new g.KeyboardShortcutView(document.body,".js-keyboard-selectable-item",94);new a.KeyboardShortcutController(t).startWatching()}{const t=document.querySelector(".js-global-notification");t&&new o.GlobalMaintenanceNotificationController(new f.GlobalNotificationView(t),e)}e.on("my_profile:fetched",(t=>{document.querySelectorAll(".js-bookmark-stock-button:not([data-initialized])").forEach((e=>{new u.BookmarkStockButtonView(t,e)})),b.fetchRemoteByURLs(t,w.entryURLs);document.querySelectorAll(".js-safe-search-div").forEach(()}))}},1485:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(4782),o=i(4831),a=i(2683),l=i(9450),c=i(6949),h=i(615),d=i(1989),u=i(8399),p=i(7508),m=i(6994),f=i(8547),g=i(6112),y=i(8234),_=i(5287),v=i(2109),b=i(2499),w=i(7897),k=i(5252),S=i(8205),E=i(2481);e.init=function(){const t=r.UserRepository.getInstance();if(new l.GlobalHeaderController(new v.GlobalHeaderView(document.querySelector("#global-header")),t),new c.GlobalNavigationController(new b.GlobalNavigationView(document.querySelector(".js-navi-category-wrapper")),new S.ScrollView(window),document.body.classList.contains("fixed-header"),document.querySelector(".js-branding").offsetHeight),!(0,s.isMobile)()){const t=document.querySelector(".js-entrylist-layout-switcher");t&&new a.EntryListLayoutSwitcherController(new g.EntryListLayoutSwitcherView(t,document.body.getAttribute("data-entrylist-layout")),u.EntryListLayoutRepository.getInstance())}const e=new p.FollowingBookmarksRepository;let i;{const t=Array.from(document.querySelectorAll(".js-following-bookmarks-container")).map((t=>new _.FollowingBookmarksView(t)));i=new o.EntryListFollowingBookmarksController(t,e)}{const t=document.querySelector(".js-entry-notfound-modal"),e=window.location.hash.split("#bookmark_url=")[1];if(t&&e){document.querySelector(".js-entry-notfound-input").value=decodeURIComponent(e);const i=t.querySelector(".js-entry-notfound-entrylist-link");new E.ModalController(new y.EntryNotFoundModalView(t,i)).open()}}if((0,s.isMobile)()){const e=document.querySelector(".js-drawer-menu"),i=document.querySelector(".js-drawer-menu-button"),r=new f.DrawerMenuView(e,i);new n.DrawerMenuController(r,t)}if(!(0,s.isMobile)()){const t=new k.KeyboardShortcutView(document.body,".js-keyboard-selectable-item",94);new d.KeyboardShortcutController(t).startWatching()}{const e=document.querySelector(".js-global-notification");e&&new h.GlobalMaintenanceNotificationController(new w.GlobalNotificationView(e),t)}t.on("my_profile:fetched",(t=>{document.querySelectorAll(".js-bookmark-stock-button:not([data-initialized])").forEach((e=>{new m.BookmarkStockButtonView(t,e)})),e.fetchRemoteByURLs(t,i.entryURLs,!0)}))}},6841:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(9450),n=i(615),o=i(2109),a=i(7897);e.init=function(){const t=r.UserRepository.getInstance(),e=document.querySelector("#global-header");e&&new s.GlobalHeaderController(new o.GlobalHeaderView(e),t);{const e=document.querySelector(".js-global-notification");e&&new n.GlobalMaintenanceNotificationController(new a.GlobalNotificationView(e),t)}}},9274:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(9450),n=i(615),o=i(9928),a=i(4395),l=i(2109),c=i(7897),h=i(8566);e.init=function(){const t=r.UserRepository.getInstance();new s.GlobalHeaderController(new l.GlobalHeaderView(document.querySelector("#global-header")),t);const e=document.querySelector(".js-global-notification");e&&new n.GlobalMaintenanceNotificationController(new c.GlobalNotificationView(e),t),t.on("my_profile:fetched",(t=>{{const e=document.querySelector(".js-interest-container");if(e){const i=new h.GetStartedMyHotEntryInterestView(e);new o.GetStartedMyHotEntryInterestController(i,new a.InterestedTagsRepository(t))}}}))}},8524:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(9450),n=i(615),o=i(2109),a=i(7897);e.init=function(){const t=r.UserRepository.getInstance();new s.GlobalHeaderController(new o.GlobalHeaderView(document.querySelector("#global-header")),t);const e=document.querySelector(".js-global-notification");e&&new n.GlobalMaintenanceNotificationController(new a.GlobalNotificationView(e),t)}},4685:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(4782),o=i(9450),a=i(615),l=i(8547),c=i(2109),h=i(7897);e.init=function(){const t=r.UserRepository.getInstance();if(new o.GlobalHeaderController(new c.GlobalHeaderView(document.querySelector("#global-header")),t),(0,s.isMobile)()){const e=document.querySelector(".js-drawer-menu"),i=document.querySelector(".js-drawer-menu-button"),r=new l.DrawerMenuView(e,i);new n.DrawerMenuController(r,t)}{const e=document.querySelector(".js-global-notification");e&&new a.GlobalMaintenanceNotificationController(new h.GlobalNotificationView(e),t)}}},7004:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(6866),n=i(9450),o=i(615),a=i(3452),l=i(548),c=i(5140),h=i(2109),d=i(7897);e.init=function(){const t=r.UserRepository.getInstance();new n.GlobalHeaderController(new h.GlobalHeaderView(document.querySelector("#global-header")),t);let e=null;const i=document.querySelector(".js-bookmark-delete-button");i&&(e=new l.BookmarkDeleteButtonView(i));const u=document.querySelector(".js-bookmark-panel");if(u){const i=u.dataset.url,r=new c.BookmarkPanelView(u);new s.BookmarkPanelController(i,r,e,a.BookmarkRepository.getInstance(),t)}{const e=document.querySelector(".js-global-notification");e&&new o.GlobalMaintenanceNotificationController(new d.GlobalNotificationView(e),t)}t.on("my_profile:fetched",(e=>{t.fetchExternalShareConfig()}))}},8587:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(4782),o=i(4831),a=i(9450),l=i(6949),c=i(615),h=i(1989),d=i(7508),u=i(6994),p=i(8547),m=i(5287),f=i(2109),g=i(2499),y=i(7897),_=i(5252),v=i(8205);e.init=function(){const t=r.UserRepository.getInstance();if(new a.GlobalHeaderController(new f.GlobalHeaderView(document.querySelector("#global-header")),t),(0,s.isMobile)()){const e=document.querySelector(".js-drawer-menu"),i=document.querySelector(".js-drawer-menu-button"),r=new p.DrawerMenuView(e,i);new n.DrawerMenuController(r,t)}else new l.GlobalNavigationController(new g.GlobalNavigationView(document.querySelector(".js-navi-category-wrapper")),new v.ScrollView(window),document.body.classList.contains("fixed-header"),document.querySelector(".js-branding").offsetHeight);const e=new d.FollowingBookmarksRepository;let i;{const t=Array.from(document.querySelectorAll(".js-following-bookmarks-container")).map(();i=new o.EntryListFollowingBookmarksController(t,e)}if(!(0,s.isMobile)()){const t=new _.KeyboardShortcutView(document.body,".js-keyboard-selectable-item",94);new h.KeyboardShortcutController(t).startWatching()}{const e=document.querySelector(".js-global-notification");e&&new c.GlobalMaintenanceNotificationController(new y.GlobalNotificationView(e),t)}t.on("my_profile:fetched",(t=>{document.querySelectorAll(".js-bookmark-stock-button:not([data-initialized])").forEach((e=>{new u.BookmarkStockButtonView(t,e)})),e.fetchRemoteByURLs(t,i.entryURLs,!0)}))}},5718:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(4782),o=i(9450),a=i(615),l=i(5450),c=i(6794),h=i(1989),d=i(6592),u=i(2481),p=i(653),m=i(8010),f=i(7773),g=i(2730),y=i(3625),_=i(8726),v=i(3062),b=i(3120),w=i(6616),k=i(1547),S=i(745),E=i(7844),T=i(1010),x=i(7427),C=i(6174),A=i(7688),P=i(6723),M=i(4650),B=i(5564),R=i(3533),D=i(7508),I=i(9358),L=i(5360),O=i(8840),F=i(4395),V=i(8729),N=i(2435),U=i(5161),j=i(2226),q=i(6803),G=i(3751),z=i(6135),$=i(7798),Y=i(6994),H=i(8547),W=i(2109),K=i(7897),J=i(8578),Z=i(4101),Q=i(5252),X=i(6320),tt=i(1153),et=i(6984),it=i(1679),rt=i(800),st=i(4823),nt=i(6340),ot=i(3665),at=i(4366),lt=i(9742),ct=i(5993),ht=i(9110),dt=i(2185),ut=i(8009),pt=i(2811),mt=i(7685),ft=i(9012),gt=i(6014),yt=i(2796),_t=i(2389),vt=i(8459),bt=i(170),wt=i(4580);e.init=function(){const t=document.querySelector(".js-user-page-container"),e=t.hasAttribute("data-editable"),i=t.dataset.authorName,kt=r.UserRepository.getInstance();new o.GlobalHeaderController(new W.GlobalHeaderView(document.querySelector("#global-header")),kt),kt.on("my_profile:fetched",(t=>{{const t=document.querySelector(".js-bookmarksearch-sort-menu"),e=document.querySelector(".js-bookmarksearch-target-menu");if(t&&e){const i=document.querySelector(".js-bookmarksearch-sort-menu-button"),r=document.querySelector(".js-bookmarksearch-target-menu-button");new z.BookmarkSearchDropdownView(t,e,i,r)}}const e=new L.IgnoreUserRepository(localStorage);{const i=document.querySelector(".js-user-menu");if(i){const r=document.querySelector(".js-user-menu-button"),s=new rt.UserMenuView(r,i);new m.UserMenuController(s,e,t)}}e.fetchRemote(1e4);{const e=document.querySelector(".js-interest-tags");if(e){const i=new J.InterestTagListView(e);new l.InterestTagListController(i,new F.InterestedTagsRepository(t))}}{const e={};document.querySelectorAll(".js-interest-tag-add-button").forEach((t=>{const i=new Z.InterestedTagView(t);e[i.tag]=i})),new c.InterestedTagsController(e,new F.InterestedTagsRepository(t))}}));const St=document.querySelector(".js-user-tags");St&&new st.UserTagListView(St);{const t=3,e=4,i=document.querySelector(".js-multiple-interest-tag-timelines-container");if(i){const r=Array.from(document.querySelectorAll(".js-recently-updated-tags")).map((t=>t.textContent)),s=Array.from(document.querySelectorAll(".js-user-interest-tags")).map((t=>t.textContent)),n=document.querySelector(".js-interest-feeds-show-more-button"),o=document.querySelector("#template-tag-timeline-container"),a=document.querySelector("#template-tag-timeline-entry"),l=new pt.InterestTagTimelineTopView(i,n,o,a),c=O.InterestTagTimelineRepository.getInstance();new w.MultipleInterestTagTimeline(l,c,[...new Set([...r,...s])],e,t).loadTimelines(e,t)}}{const t=document.querySelector(".js-bookmark-incremental-search-field");if(t){const e=new $.BookmarkSearchFieldView(t),r=new G.BookmarkIncrementalSearchResultView(document.querySelector(".js-bookmark-incremental-search-result"),document.querySelector("#bookmark-incremental-search-result-item")),n=new A.BookmarkSearchRepository(i);t.addEventListener("focus",(()=>{n.initialize()})),e.on("bookmark_search_field:updated",(0,s.throttle)((t=>{t.length>0?n.fetchIncrementalSearchResult(t).then((()=>r.open())):r.close()}),500)),n.on("bookmark_incremental_search:fetched",(t=>{r.setResult(t)})),r.on("bookmark_incremental_search:goto",();const o=function(e){e>0?t.classList.add("is-loading"):t.classList.remove("is-loading")};n.on("bookmark_incremental_search:index_update_started",o),n.on("bookmark_incremental_search:index_update_finished",o);const a=new URL(location.href).searchParams.get("q");a&&e.setFieldValue(a)}}let Et=null,Tt=null;const xt=document.querySelector(".js-user-follow-btn-container");xt&&(Et=new at.FollowButtonView(xt)),Et&&(Tt=new y.FollowButtonController(Et,new B.FollowUserRepository));const Ct=new N.ProfileRepository;if((0,s.isMobile)()){const t=document.querySelector(".js-user-info-touch"),e=new it.UserInfoView(t);Ct.fetchUserInfo(i).then((t=>{e.setFollowingsAndFollowers(t),Et&&Et.setFollowingInfo(t.followed_by_visitor)})).catch((t=>{}))}else{const t=document.querySelector(".js-user-info"),e=new it.UserInfoView(t);Ct.fetchProfile(i).then((t=>e.setProfile(t))).catch((t=>{})),Ct.fetchUserInfo(i).then((t=>{e.setFollowingsAndFollowers(t),Et&&Et.setFollowingInfo(t.followed_by_visitor)})).catch((t=>{}))}if((0,s.isMobile)()){const t=document.querySelector(".js-drawer-menu"),e=document.querySelector(".js-drawer-menu-button"),i=new H.DrawerMenuView(t,e);new n.DrawerMenuController(i,kt)}let At=null;const Pt=document.querySelector("#template-bookmark-item");{const t=document.querySelector(".js-user-bookmark-item-autoload-container");if(t){const i={next:{page_path:t.dataset.nextPagePath,xhr_path:t.dataset.nextXhrPath,label:t.dataset.nextLabel},previous:null,pages:[]},r=new gt.UserPageBookmarksAutoloader(t,Pt,e);At=new S.UserBookmarkItemAutoLoaderController(r,new V.PagingRepository,i,kt)}}{const t=document.querySelector(".js-user-bookmarks-by-date-autoload-container");if(t){const i={next:{page_path:t.dataset.nextPagePath,xhr_path:t.dataset.nextXhrPath,label:t.dataset.nextLabel},previous:null,pages:[]},r=new gt.UserPageBookmarksAutoloader(t,Pt,e);At=new x.UserBookmarksByDateAutoLoaderController(r,new V.PagingRepository,i,kt)}}{const t=document.querySelector(".js-user-feed-digest-autoload-container");t&&(At=new g.FeedDigestAutoLoaderController(new ot.FeedDigestAutoLoaderView(t,t.querySelector(".js-user-bookmark-item-list"),t.querySelector("#template-feed-digest-item"),t.querySelector("#template-bookmark-pager")),new V.PagingRepository,{next:{page_path:t.dataset.nextPagePath,xhr_path:t.dataset.nextXhrPath,label:t.dataset.nextLabel},previous:null,pages:[]}))}{const t=document.querySelector(".js-following-users-list-autoload-container");if(t){const e=document.querySelector("#template-following-user-item");new b.FollowingUsersListAutoLoaderController(i,new dt.FollowingUsersListAutoLoaderView(t,e),new I.FollowingUserRepository,new N.ProfileRepository).loadAndStartWatching()}}{const t=document.querySelector(".js-followers-list-autoload-container");if(t){const e=document.querySelector("#template-following-user-item");new b.FollowingUsersListAutoLoaderController(i,new dt.FollowingUsersListAutoLoaderView(t,e),new R.FollowerRepository,new N.ProfileRepository).loadAndStartWatching()}}if((0,s.isMobile)()){const t=document.querySelector(".js-app-banner-container");if(t){new j.AppBannerView(t).show()}}{const t=document.querySelector(".js-keyboard-controllable-container");if(t){const e=new Q.KeyboardShortcutView(t,".js-user-bookmark-item",8);new h.KeyboardShortcutController(e).startWatching()}}{const t=document.querySelector(".js-global-notification");t&&new a.GlobalMaintenanceNotificationController(new K.GlobalNotificationView(t),kt)}{const t=document.querySelector(".js-message-modal");t&&new d.MessageModalController(new X.MessageModalView(t))}kt.on("my_profile:fetched",(t=>{Tt&&Tt.setVisitor(t),wt.init(t);{const e=document.querySelector(".js-following-users-list-autoload-container");e&&new v.FollowingUsersButtonController(t,new ht.FollowingUsersButtonView(e),new B.FollowUserRepository)}{const e=document.querySelector(".js-followers-list-autoload-container");e&&new v.FollowingUsersButtonController(t,new ht.FollowingUsersButtonView(e),new B.FollowUserRepository)}{const e=document.querySelector(".js-user-bookmark-stock-list-autoload-container");if(e){const i=e.dataset.nextCursor;if(i){const r=document.querySelector("#template-bookmark-stock-item");new T.UserBookmarkStockListAutoLoaderController(new ft.UserBookmarkStockListAutoLoaderView(e,r),new P.BookmarkStockListRepository(t),i)}}}{const t=document.querySelector(".js-user-following-feed-autoload-container");if(t){const e=t.dataset.nextCursor;if(e){const i=document.querySelector("#template-following-feed-item");At=new _.FollowingFeedAutoLoaderController(new ct.FollowingFeedAutoLoaderView(t,i),new D.FollowingBookmarksRepository,e)}}}{const e=document.querySelector(".js-user-interest-feed-autoload-container");if(e){const i=e.dataset.nextCursor,r=e.dataset.interestTag;if(i&&r){const s=document.querySelector("#template-interest-feed-item");At=new k.InterestTagTimelineAutoLoaderController(t,r,20,new ut.InterestTagTimelineAutoLoaderView(e,s),O.InterestTagTimelineRepository.getInstance(),new D.FollowingBookmarksRepository,parseInt(i))}}}const i=document.querySelector(".js-user-bookmark-item-list");i&&new lt.FollowingBookmarkView(i);const r=document.querySelector("#template-short-url-click");if(i&&r){const t=new et.ShortURLView(i,r);new p.ShortURLController(t,U.ShortURLRepository.getInstance()),t.initialLoad()}{const e=document.querySelector(".js-bulk-tag-process-button"),i=document.querySelector(".js-edit-tag-modal"),r=document.querySelector(".js-progress-modal");if(null!==e&&null!==i&&null!==r){const s=new u.ModalController(new tt.ModalView(i)),n=new u.ModalController(new tt.ModalView(r)),o=new vt.BulkTagProcessButtonView(e),a=i.querySelector(".js-bulk-tag-edit-form"),l=new _t.BulkTagEditFormView(a),c=i.querySelector(".js-bulk-tag-delete-form"),h=new yt.BulkTagDeleteFormView(c),d=r.querySelector(".js-progress-message"),p=r.querySelector(".js-cancel-button"),m=new bt.BulkTagProcessProgressView(d,p),f=new M.BulkTagProcessRepository;new C.BulkTagProcessController(t,o,l,h,m,s,n,f)}}if(e){if(i){{const e=new mt.UserBookmarkItemMenuView(i);new E.UserBookmarkItemMenuController(e,t,kt),kt.fetchMyFrequentTags(t,500).then((t=>{e.setRecommendedTags(t)})),At&&At.on("user_bookmark_item:next_page_loaded",e.initShareButtonAll.bind(e))}new q.BookmarkClickView(t,i)}{const e=document.querySelector(".js-date-page-bookmark-container");if(e){const i=new nt.DatePageBookmarkView(e);new f.DatePageBookmarkController(t,i,kt)}}}else{const e=()=>{document.querySelectorAll(".js-bookmark-stock-button:not([data-initialized])").forEach(()};e(),At&&At.on("user_bookmark_item:next_page_loaded",e)}At&&(At.setVisitor(t),At.startWatching()),kt.fetchExternalShareConfig()})),kt.on("my_profile:fetch_failed",()}},4580:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(5307),s=i(7936),n=i(5360),o=i(2435),a=i(5208),l=i(267);e.init=function(t){const e=document.querySelector(".js-ignore-users-list-autoload-container");if(e){const i=document.querySelector("#template-ignore-user-item");new s.IgnoreUsersListAutoLoaderController(new l.IgnoreUsersListAutoLoaderView(e,i),new n.IgnoreUserRepository,new o.ProfileRepository,void 0).loadAndStartWatching(),new r.IgnoreUsersButtonController(t,new a.IgnoreUsersButtonView(e),new n.IgnoreUserRepository)}}},8987:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(2704),n=i(4782),o=i(9450),a=i(615),l=i(5063),c=i(8562),h=i(3325),d=i(2435),u=i(7656),p=i(8547),m=i(2109),f=i(7897),g=i(1679),y=i(6373),_=i(3916),v=i(3193),b=i(9334),w=i(8061),k=i(4074),S=i(442);e.init=function(){const t=r.UserRepository.getInstance();if(new o.GlobalHeaderController(new m.GlobalHeaderView(document.querySelector("#global-header")),t),(0,s.isMobile)()){const e=document.querySelector(".js-drawer-menu"),i=document.querySelector(".js-drawer-menu-button"),r=new p.DrawerMenuView(e,i);new n.DrawerMenuController(r,t)}{const e=document.querySelector(".js-global-notification");e&&new a.GlobalMaintenanceNotificationController(new f.GlobalNotificationView(e),t)}t.on("my_profile:fetched",(t=>{const e=document.querySelector(".js-config-form"),i=document.querySelector(".js-head-notify");if(e){let r=null;switch(e.getAttribute("name")){case"profile":r=new k.ProfileView(e,i);break;case"bookmark":r=new y.BookmarkView(e,i);break;case"display":r=new b.DisplayView(e,i);break;case"notifications":r=new w.NotificationView(e,i);break;case"applications":r=new S.TwitterShareView(e,i)}r&&new l.UserConfigController(r,new u.UserConfigRepository(t))}{const e=document.querySelector(".js-user-info");if(e){const i=new d.ProfileRepository,r=new g.UserInfoView(e);i.fetchProfile(t.name).then((t=>{r.setProfile(t)}))}}{const e=document.querySelector(".js-bulk-deletion");if(e){const i=new _.BulkDeletionButtonView(e),r=new v.BulkDeletionStatusView(e),s=new h.BulkDeletionRepository;new c.BulkDeletionController(t,i,r,s)}}}))}},6093:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(4669),s=i(853),n=i(5125),o=i(3452),a=i(6459),l=i(8921),c=i(194);e.init=function(){const t=document.querySelector(".js-webextension-wrapper"),e=document.querySelector(".js-bookmark-editor-container"),i=new l.ResizablePanelView(t);new n.ResizablePanelController(i).postResizeMessage();const h=c.UserRepository.getInstance(),d=new a.BookmarkPanelView(e);new r.BookmarkPanelController(e.dataset.url,d,o.BookmarkRepository.getInstance(),h),h.on("my_profile:fetched",(()=>{h.fetchExternalShareConfig()}));{const t=document.querySelector(".js-webextension-total-bookmarks");if(t){const e=t.dataset.totalBookmarks;(0,s.postMessageToExtension)("entry-total-bookmarks",{totalBookmarks:e})}}}},9622:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(1327),s=i(5125),n=i(9836),o=i(8921);e.init=function(){const t=new o.ResizablePanelView(document.querySelector(".js-webextension-complete"));new s.ResizablePanelController(t).postResizeMessage();const e=new r.CompletePanelController(new n.CompletePanelView);e.postCompleteMessage(),"added"===document.querySelector("html").dataset.pageSubtype&&e.beginEnablingShareButtons()}},3954:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(194),s=i(1579),n=i(2700),o=i(853),a=i(5125),l=i(5360),c=i(508),h=i(1543),d=i(8205),u=i(8921);e.init=function(){const t=document.querySelector(".js-webextension-wrapper"),e=r.UserRepository.getInstance();{const e=new u.ResizablePanelView(t);new a.ResizablePanelController(e).postResizeMessage()}{const e=(null==t?void 0:t.offsetTop)||0,i=new d.ScrollView(window,{x:0,y:e}),r=new c.BookmarkSortTabView(document.querySelector(".js-bookmarks-sort-tabs-group"));new s.BookmarkSortTabController(r,i).init()}{const t=document.querySelector(".js-webextension-total-comments");if(t){const e=t.dataset.totalComments;(0,o.postMessageToExtension)("entry-total-comments",{totalComments:e})}}{const t=document.querySelector(".js-webextension-first-comment");null==t||t.addEventListener("click",(()=>{(0,o.postMessageToExtension)("first-comment",{})}))}const i=new l.IgnoreUserRepository(localStorage);{const t=new h.IgnoreUserView(document.getElementById("ignore-user-style"));new n.IgnoreUserController(t,i)}e.on("my_profile:fetched",()}},255:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(853),s=i(5125),n=i(8921);e.init=function(){const t=new n.ResizablePanelView(document.querySelector(".js-guest-body")),e=new s.ResizablePanelController(t);{const t=document.querySelector(".js-webextension-total-bookmarks");if(t){const e=t.dataset.totalBookmarks;(0,r.postMessageToExtension)("entry-total-bookmarks",{totalBookmarks:e})}}e.postResizeMessage()}},4351:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const r=i(5125),s=i(780),n=i(8921),o=i(2571);e.init=function(){const t=new n.ResizablePanelView(document.querySelector(".js-webextension-complete"));new r.ResizablePanelController(t).postResizeMessage(),new s.SharingPanelController(new o.SharingPanelView).postCompleteMessage()}},7109:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AllBookmarkersModalView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t,e){super(),this.opened=!1,this.onClickOpenButton=t=>{this.openModal()},this.onClickModal=t=>{if(!(0,s.closest)(t.target,".js-all-bookmarkers-modal-window"))return this.closeModal()},this.onClickCloseButton=t=>this.closeModal(),this.modalElem=t,this.openButtonElem=e,this.closeButtonElem=t.querySelector(".js-all-bookmarkers-modal-close"),this.openButtonElem.addEventListener("click",this.onClickOpenButton),this.modalElem.addEventListener("click",this.onClickModal),this.closeButtonElem.addEventListener("click",this.onClickCloseButton)}openModal(){document.body.classList.add("is-overlay"),this.modalElem.classList.remove("is-hidden"),this.opened||(this.opened=!0,this.fire("modal:opened"))}closeModal(){this.modalElem.classList.add("is-hidden"),document.body.classList.remove("is-overlay")}}e.AllBookmarkersModalView=n},2226:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AppBannerView=void 0;e.AppBannerView=class{constructor(t){this.container=t}show(){this.isAndroid?this.showAndroidBanner():this.isIPhone&&this.showiOSBanner(),this.container.classList.remove("is-hidden")}get isAndroid(){return-1!==navigator.userAgent.indexOf("Android ")&&-1!==navigator.userAgent.indexOf("Mobile")}get isIPhonehowAndroidBanner(){this.showBanner(".js-android-app-banner")}showiOSBanner(){this.showBanner(".js-ios-app-banner")}showBanner(t){this.container.querySelector(t).classList.remove("is-hidden")}}},627:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BButtonView=void 0;e.BButtonView=class{constructor(t){this.script=null,this.onButtonClick=t=>{t.preventDefault(),this.openPanel()},this.button=t,this.url=this.button.dataset.url,this.button.addEventListener("click",this.onButtonClick)}openPanel(){const t=document.getElementsByTagName("head")[0];null!==this.script&&t.removeChild(this.script),this.script=document.createElement("script"),this.script.src="https://b.st-hatena.com/js/bookmark_button.js",this.script.charset="utf8",this.script.type="text/javascript",this.script.onload=()=>{Hatena.Bookmark.BookmarkPanel.openPopup(this.url,"")},t.appendChild(this.script)}}},3089:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkAutoLoaderView=void 0;const r=i(8160),s=i(3274),n=i(8642),o=i(2704),a=i(4269);var l;!function(t){t[t.Ready=0]="Ready",t[t.Waiting=1]="Waiting",t[t.Paused=2]="Paused",t[t.Terminated=3]="Terminated"}(l||(l={}));class c extends n.Observable{constructor(t,e,i=!1){super(),this.status=l.Ready,this.visitorName=null,this.followingBookmarkers=[],this.onScroll=()=>{this.elem.classList.contains("is-active")&&this.status===l.Ready&&window.pageYOffset+window.innerHeight>=this.getLabelHeight()&&this.fire("bookmark_autoloader:shown")},this.elem=t,this.template=e,this.timeDetailed=i,this.bookmarkArea=t.querySelector(".js-bookmarks"),this.scrollArea=(0,o.closest)(this.bookmarkArea,".js-scrollable")||window,this.readMoreArea=t.querySelector(".js-read-more"),this.readMoreButton=t.querySelector(".js-read-more-button"),this.collapseArea=this.elem.querySelector(".js-comment-list-collaplse"),this.registerExpandEvent(),this.getCursor()?(this.allReadMoreLabel=this.readMoreButton.querySelectorAll(".js-read-more-label"),this.sort=this.elem.dataset.sort,this.registerScrollEvent()):this.terminate()}registerExpandEvent(){if(null!==this.collapseArea){this.collapseArea.querySelector(".js-comment-list-expand-button").addEventListener("click",(()=>this.fire("bookmark_autoloader:expand_comment_list")))}}registerScrollEvent(){this.scrollArea.addEventListener("scroll",(0,o.throttle)(this.onScroll,50))}setVisitor(){if(null===this.visitorName)return;const t=this.bookmarkArea.querySelector(`[data-user-name="${this.visitorName}"]`);null!==t&&t.classList.add("is-my-bookmark")}setFollowed(){this.followingBookmarkers.forEach((t=>{const e=this.bookmarkArea.querySelector(`[data-user-name="${t}"]`);null!==e&&(e.querySelector(".js-entry-comment-unfollowuser").classList.remove("is-hidden"),e.querySelector(".js-entry-comment-followuser").classList.add("is-hidden"))}))}setLoadingFace(){var t;this.status===l.Ready&&(null===(t=this.allReadMoreLabel)||void 0===t||t.forEach((t=>{t.classList.add("is-hidden")})),this.readMoreButton.querySelector(".js-read-more-waiting").classList.remove("is-hidden"),this.status=l.Waiting)}setErrorFace(){var t;null===(t=this.allReadMoreLabel)||void 0===t||t.forEach((t=>{t.classList.add("is-hidden")})),this.readMoreButton.querySelector(".js-read-more-error").classList.remove("is-hidden"),this.status=l.Terminated}setReadyFace(){var t;this.getCursor()||this.terminate(),null===(t=this.allReadMoreLabel)||void 0===t||t.forEach((t=>{t.classList.add("is-hidden")})),this.readMoreButton.querySelector(".js-read-more-ready").classList.remove("is-hidden"),this.status=l.Ready}pause(){this.readMoreArea.classList.add("is-hidden"),this.status=l.Paused}terminate(){this.readMoreArea.classList.add("is-hidden"),this.status=l.Terminated}appendBookmarks(t){const e=t.map((t=>{const e=t.tags.map((e=>`<li><a href="/${t.user.name}/${encodeURIComponent(e)}/" data-gtm-label="entry-${this.sort}-tags">${(0,o.escapeHTML)(e)}</a></li>`)).join("");return{enable_button:!(null===this.visitorName),user_name:t.user.name,profile_image_url:t.user.image.image_url,user_page_path:`/${t.user.name}/`,anchor_path:(0,a.anchorPath)(t),tags:e,comment:t.comment,comment_expanded:t.comment_expanded,comment_page_path:`/entry/${t.locationId}/comment/${t.user.name}`,created:this.timeDetailed?(0,s.formatDateTime)(t.created,"YYYY/MM/DD HH:mm"):(0,s.formatDateTime)(t.created,"YYYY/MM/DD"),location_id:t.locationId,bookmarked_url:t.url,is_public:"public"===t.status,should_nofollow:this.considerNoFollow(t),sort:this.sort}}));r.Template.renderArrayTo(this.template,e,this.bookmarkArea),this.setVisitor(),this.setFollowed()}considerNoFollowetUrl(){return this.elem.dataset.autoloadUrl}getCursor(){return this.elem.dataset.nextCursor}getLabelHeight(){return this.readMoreButton.getBoundingClientRect().top}collapse(t){null!==this.collapseArea&&this.collapseArea.classList.contains("is-hidden")&&(this.pause(),this.bookmarkElements().splice(t).forEach((t=>t.classList.add("is-hidden"))),this.collapseArea.classList.remove("is-hidden"))}expand(){null===this.collapseArea||this.collapseArea.classList.contains("is-hidden")||(this.bookmarkElements().forEach((t=>t.classList.remove("is-hidden"))),this.collapseArea.classList.add("is-hidden"),this.setReadyFace())}get bookmarksCount(){return this.bookmarkArea.childElementCount}bookmarkElements(){return[].map.call(this.bookmarkArea.querySelectorAll(".js-bookmark-item"),(t=>t))}}e.BookmarkAutoLoaderView=c},6803:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkClickView=void 0;const r=i(2704),s=i(7174);e.BookmarkClickView=class{constructor(t,e){const i=(0,r.delegate)(".js-clickable-link",(e=>{const i=s.BookmarkStockRepository.getInstance(),r=e.target;r.href&&i.read(t,r.href)}));e.addEventListener("click",i)}}},548:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkDeleteButtonView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.onSubmit=t=>{t.preventDefault(),this.fire("bookmark:delete_request")},this.onCompleteDeleteBookmark=()=>{this.fire("bookmark:complete")},this.button=t,this.button.addEventListener("click",this.onSubmit)}}e.BookmarkDeleteButtonView=s},8194:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkEditorView=void 0;const r=i(8642),s=i(430),n=i(4269),o=i(3452),a=i(6167),l=i(4764),c=i(2778),h=i(561),d=i(4508),u=i(4573),p=i(6644);class m extends r.Observable{constructor({element:t,doesCompleteTags:e,showRecommendedTagList:i,showRecommendedTagListByDefault:r,showExternalServiceShareButton:s,defaultVisibility:m=n.BookmarkStatus.Public}){var f;super(),this.TAG_LIMIT=10,this.editing=!1,this.originalBookmark=null,this.toggleTag=t=>{this.annotationBoxView.toggleTag(t)},this.onSubmit=()=>{this.fire("bookmark:add_request",this.getInput())},this.onShortcutSubmit=this.onActiveTagsUpdated=t=>{t.indexOf(o.STOCK_TAG)>=0?this.stockButtonView.check():this.stockButtonView.uncheck(),t.length>this.TAG_LIMIT?this.onExceedingLimit("\u30bf\u30b0\u3092\u3064\u3051\u3089\u308c\u308b\u306e\u306f10\u500b\u307e\u3067\u3067\u3059"):this.onSafeLimit(),this.tagShowCaseView.activeTags=t,this.recommendedTagListView&&(this.recommendedTagListView.activeTags=t)},this.onExceedingLimit=t=>{this.submitAndCancelButtonView.disable(t)},this.onSafeLimit=this.showRecommendedTags=this.element=t;const g=t.querySelector(".js-annotation-component"),y=t.querySelector(".js-buttons-container"),_=t.querySelector(".js-bookmarkadd-tags"),v=t.querySelector(".js-bookmarkadd-share-block");if(this.form=t.querySelector(".js-add-form"),this.annotationBoxView=new a.AnnotationBoxView(g,new a.BookmarkCommentCounterComponent(t.querySelector(".js-bookmarkadd-comment-count"),t.querySelector(".js-bookmarkadd-comment-limit")),e),this.submitAndCancelButtonView=new d.SubmitAndCancelButtonView(y),this.tagShowCaseView=new u.TagAddTextboxView(_,e),s&&(v.classList.remove("is-hidden"),this.shareButtonsView=new c.ShareButtonsView(this.form)),this.stockButtonView=new h.StockButtonView(this.form),this.visibilityButtonView=new p.VisibilityButtonView(this.form),this.defaultVisibility=m,this.defaultVisibility===n.BookmarkStatus.Private&&(this.visibilityButtonView.check(),null===(f=this.shareButtonsView)||void 0===f||f.onChangeBookmarkVisibilityToPrivate(!0)),i){const e=t.querySelector(".js-bookmarkadd-tagList");e&&(this.recommendedTagListView=new l.RecommendedTagListView(e,r),this.recommendedTagListView.on("recommended_tags:tag_toggled",this.toggleTag))}this.submitAndCancelButtonView.on("submit_button:clicked",this.onSubmit),this.bubble(this.submitAndCancelButtonView,"cancel_button:clicked"),this.annotationBoxView.on("bookmark_panel:comment_exceeding_limit",this.onExceedingLimit),this.annotationBoxView.on("bookmark_panel:tag_exceeding_limit",this.onExceedingLimit),this.annotationBoxView.on("bookmark_panel:safe_limit",this.onSafeLimit),this.annotationBoxView.on("bookmark_panel:annotation_box_focused",this.showRecommendedTags),this.annotationBoxView.on("annotation_box_tags:updated",this.onActiveTagsUpdated),this.annotationBoxView.on("bookmark_panel:shortcut_submit",this.onShortcutSubmit),this.stockButtonView.on("stock_button:clicked",(t=>{t?this.annotationBoxView.addTags([o.STOCK_TAG]):this.annotationBoxView.removeTags([o.STOCK_TAG])})),this.tagShowCaseView.on("bookmark_panel:tag_toggled",this.toggleTag),this.tagShowCaseView.on("tag_add_box:focused",this.showRecommendedTags),this.visibilityButtonView.on("visibility_input:changed",()}show(){this.element.classList.remove("is-hidden")}hide(){this.element.classList.add("is-hidden")}getAnnotation(){return this.annotationBoxView.getAnnotation()}setShareConfig(t){this.shareButtonsView&&(this.shareButtonsView.setShareConfig(t),this.shareButtonsView.onChangeBookmarkVisibilityToPrivate(this.visibilityButtonView.isChecked()))}setup(t){if(null!==t){this.editing=!0;const e=new s.Annotation(t.comment,t.tags);this.annotationBoxView.setAnnotation(e.toString()),this.shareButtonsView&&this.shareButtonsView.bookmarked(!0),this.submitAndCancelButtonView.bookmarked(!0),"private"===t.status?this.visibilityButtonView.check():this.visibilityButtonView.uncheck(),t.tags.indexOf(o.STOCK_TAG)>=0?this.stockButtonView.check():this.stockButtonView.uncheck(),this.onActiveTagsUpdated(t.tags)}this.originalBookmark=JSON.parse(JSON.stringify(t))}clear(){var t;null!==this.originalBookmark?this.setup(this.originalBookmark):(this.editing=!1,this.annotationBoxView.setAnnotation(""),this.shareButtonsView&&this.shareButtonsView.show(),this.shareButtonsView&&this.shareButtonsView.bookmarked(!1),this.submitAndCancelButtonView.bookmarked(!1),this.defaultVisibility===n.BookmarkStatus.Private?(this.visibilityButtonView.check(),null===(t=this.shareButtonsView)||void 0===t||t.onChangeBookmarkVisibilityToPrivate(!0)):this.visibilityButtonView.uncheck(),this.stockButtonView.uncheck(),this.onActiveTagsUpdated([]))}focusToAnnotationBox(){this.annotationBoxView.focus()}getInput(){const t=this.form.querySelectorAll("input"),e=this.form.querySelector("textarea");let i={};i=Array.from(t).reduce(((t,e)=>e.name?(("checkbox"!==e.type||e.checked&&!e.disabled)&&(t[e.name]=e.value),t):t),i);const r=new s.Annotation(e.value);return i[e.name]=r.toString(),i}setFrequentTags(t){var e;this.annotationBoxView.setCompletionTags(t),this.tagShowCaseView.setCompletionTags(t),null===(e=this.recommendedTagListView)||void 0===e||e.setRecommendedFrequentTags(t)}e.BookmarkEditorView=m},6167:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationBoxView=e.BookmarkCommentCounterComponent=void 0;const r=i(8642),s=i(2704),n=i(430),o=i(4642);class a extends r.Observable{constructor(t,e,i,r=10){super(),this.onInput=()=>{const t=new n.Annotation(this.textArea.value),e=(0,s.countBookmarkComment)(t.comment);this.commentCountComponent.updateCount(e),this.tagsCountComponent.updateTags(t.tags)},this.addTagFromCompletion=t=>{const e=this.getAnnotation(),i=this.cursorPosition,r=e.toString().lastIndexOf("[",i);if(this.textArea===document.activeElement&&r>=0){const s=e.toString().substring(0,r).trim(),n=e.toString().slice(i).trim();this.setAnnotation(`${s}[${t}]${n}`);const o=this.getAnnotation(),a=o.toString().indexOf("]",i);this.cursorPosition=a+1,this.fire("annotation_box_tags:updated",o.tags),this.controlCompletionView&&(this.controlCompletionView.activeTags=o.tags)}else this.addTags([t])},this.onAnnotationBoxFocused=this.element=t,this.textArea=this.element.querySelector("textarea"),this.commentCountComponent=e,this.tagsCountComponent=new c(r),i&&(this.controlCompletionView=new o.ControlCompletion(this.textArea,this.element)),this.registerEvents()}registerEvents(){this.textArea.addEventListener("focus",this.onAnnotationBoxFocused),this.textArea.addEventListener("input",this.onInput),this.controlCompletionView&&(this.tagsCountComponent.on("annotation_box_tags:updated",(),this.controlCompletionView.on("bookmark_panel:shortcut_submit",(),this.controlCompletionView.on("tag_completion:commit",this.addTagFromCompletion)),this.bubble(this.commentCountComponent,"bookmark_panel:comment_exceeding_limit"),this.bubble(this.commentCountComponent,"bookmark_panel:safe_limit"),this.bubble(this.tagsCountComponent,"bookmark_panel:tag_exceeding_limit"),this.bubble(this.tagsCountComponent,"bookmark_panel:safe_limit"),this.bubble(this.tagsCountComponent,"annotation_box_tags:updated")}setCompletionTags(t){this.controlCompletionView&&this.controlCompletionView.setCompletionTags(t)}addTags(t){const e=new n.Annotation(this.textArea.value),i=[...new Set([...e.tags,...t])];e.tags=i,this.setAnnotation(e.toString()),this.fire("annotation_box_tags:updated",i),this.controlCompletionView&&(this.controlCompletionView.activeTags=i)}toggleTag(t){const e=this.getAnnotation(),i=e.tags.includes(t)?e.tags.filter((e=>e!==t)):e.tags.concat([t]);e.tags=i,this.setAnnotation(e.toString()),this.fire("annotation_box_tags:updated",i),this.controlCompletionView&&(this.controlCompletionView.activeTags=i)}removeTags(t){const e=this.getAnnotation(),i=(0,s.difference)(e.tags,t);e.tags=i,this.setAnnotation(e.toString()),this.fire("annotation_box_tags:updated",i),this.controlCompletionView&&(this.controlCompletionView.activeTags=i)}getAnnotation(){return new n.Annotation(this.textArea.value)}setAnnotation(t){this.textArea.value=t;const e=document.createEvent("Event");e.initEvent("input",!0,!1),this.textArea.dispatchEvent(e)}focus(){this.textArea.focus()}updateCount(t){this.commentCountComponent.updateCount(t)}et cursorPosition(){return this.textArea.selectionEnd}e.AnnotationBoxView=a,a.exceedingClass="is-exceeding";class l extends r.Observable{constructor(t,e,i=100){super(),this.count=0,this.EXCEEDING_CLASS="is-exceeding",this.counterElem=t,this.limitElem=e,this.limit=i,this.counterElem.textContent=this.count.toString(),this.limitElem.textContent=this.limit.toString()}updateCount(t){this.count=t,this.counterElem.textContent=this.count.toString(),this.count>this.limit?(this.fire("bookmark_panel:comment_exceeding_limit","\u30b3\u30e1\u30f3\u30c8\u304c\u6587\u5b57\u6570\u5236\u9650\u3092\u8d85\u904e\u3057\u3066\u3044\u307e\u3059"),this.counterElem.classList.add(this.EXCEEDING_CLASS)):(this.fire("bookmark_panel:safe_limit"),this.counterElem.classList.remove(this.EXCEEDING_CLASS))}e.BookmarkCommentCounterComponent=l;class c extends r.Observable{constructor(t){super(),this.tags=[],this.TAGS_LIMIT=t}updateTags(t){const e=this.tags.length;this.tags=t;const i=this.tags.length;e!==i&&this.fire("annotation_box_tags:updated",t),i>this.TAGS_LIMIT?this.fire("bookmark_panel:tag_exceeding_limit","\u30bf\u30b0\u3092\u3064\u3051\u3089\u308c\u308b\u306e\u306f10\u500b\u307e\u3067\u3067\u3059"):this.fire("bookmark_panel:safe_limit")}getTags(){return this.tags}},4642:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlCompletion=void 0;const r=i(6496),s=i(8642),n=i(430),o=i(1449),a=i(8083);class l extends s.Observable{constructor(t,e){super(),this.isComposing=!1,this.hasCompositionJustEnded=!1,this._activeTags=[],this.onKeyDown=t=>{if(this.tagCompletionView.isShown&&(0,a.preventReservedKeyboardEvent)(t),229!==t.keyCode&&(this.hasCompositionJustEnded=!1),"Enter"===t.key){if(t.preventDefault(),this.isComposing||this.hasCompositionJustEnded)return;if(this.tagCompletionView.isShown){const t=this.tagCompletionView.index;this.tagCompletionView.clickSelectedTag(t)}else this.fire("bookmark_panel:shortcut_submit")}else"Tab"===t.key&&this.tagCompletionView.isShown&&1===this.tagCompletionView.availableTags.length&&this.tagCompletionView.clickSelectedTag(0)},this.onKeyUp=t=>{if(this.isComposing||this.hasCompositionJustEnded)return void(this.hasCompositionJustEnded=!1);const e=this.getAnnotation(),i=this.cursorPosition;if(this._shouldStartCompletion(e,i)){const r=e.toString().lastIndexOf("[",i);if(r<0)return;const s=this.getCaretPositionOf(r),n=this.getRect(),o={left:n.left+s.left,top:n.top+s.top+20},a=this.tagCompletionView.setNewIndexOn(t),l={query:e.toString().substring(r+1,i),coordinate:o};this.tagCompletionView.render(l,this._activeTags,a)}else this.terminateTagCompletion();"]"===t.key&&this.terminateTagCompletion()},this.onInput=t=>{const e=this.getAnnotation(),i=this.cursorPosition;if(this._shouldStartCompletion(e,i)){const t=e.toString().lastIndexOf("[",i);if(t<0)return;const r=this.getCaretPositionOf(t),s=this.getRect(),n={left:s.left+r.left,top:s.top+r.top+20},o={query:e.toString().substring(t+1,i),coordinate:n},a=this.tagCompletionView.index;this.tagCompletionView.render(o,this._activeTags,a)}},this.onBlurred=()=>{this.terminateTagCompletion()},this.onCompositionStart=t=>{this.isComposing=!0},this.onCompositionEnd=t=>{this.isComposing=!1,this.hasCompositionJustEnded=!0},this.textArea=t,this.tagCompletionView=new o.TagCompletionView(e),this.textArea.addEventListener("keydown",this.onKeyDown),this.textArea.addEventListener("keyup",this.onKeyUp),this.textArea.addEventListener("input",this.onInput),this.textArea.addEventListener("blur",this.onBlurred),this.textArea.addEventListener("compositionstart",this.onCompositionStart),this.textArea.addEventListener("compositionend",this.onCompositionEnd),this.bubble(this.tagCompletionView,"tag_completion:commit")}set activeTags(t){this._activeTags=t}_shouldStartCompletion(t,e){const i=t.toString().lastIndexOf("[",e);if(i<0)return!1;const r=t.toString().substring(i+1,e);return!!a.validTagRegexp.test(r)}getAnnotationet cursorPosition(){return this.textArea.selectionEnd}getRect(){return this.textArea.getBoundingClientRect()}getCaretPositionOferminateTagCompletion(){window.setTimeout((()=>{this.tagCompletionView.terminate()}),200)}setCompletionTags(t){this.tagCompletionView.setCompletionTags(t)}}e.ControlCompletion=l},4764:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RecommendedTagListView=void 0;const r=i(8642),s=i(2704);var n;!function(t){t.All="all",t.Partial="partial"}(n||(n={}));class o extends r.Observable{constructor(t,e,i){super(),this._activeTags=[],this.onClickTag=e&&t.classList.remove("is-hidden"),t.classList.add("bookmarkadd-tagList"),this.recommendedTagsArea=t,this.tagStateStorage=new a(i||localStorage),this.recommendedTagsTitle=t.querySelector(".js-bookmarkadd-recommended-tagList-title"),this.recommendedTagList=t.querySelector(".js-bookmarkadd-recommended-tagList-contents"),this.frequentTagsTitle=t.querySelector(".js-bookmarkadd-frequent-tagList-title"),this.frequentTagsShowingStateButton=t.querySelector(".js-bookmarkadd-frequent-tagList-button"),this.frequentTagList=t.querySelector(".js-bookmarkadd-frequent-tagList-contents"),this.changeFrequentTagsShowingState(this.tagStateStorage.getState()),this.recommendedTagsArea.addEventListener("click",(0,s.delegate)(".js-tag",(t=>this.onClickTag(t)))),this.frequentTagsShowingStateButton.addEventListener("click",(()=>{this.tagStateStorage.getState()===n.All?this.changeFrequentTagsShowingState(n.Partial):this.changeFrequentTagsShowingState(n.All)}))}setRecommendedTags(t){if(0===t.length)this.recommendedTagsTitle.classList.add("is-hidden");else{this.recommendedTagsTitle.classList.remove("is-hidden");const e=document.createDocumentFragment();t.forEach((t=>{const i=this.createTagElem(t);e.appendChild(i)})),this.recommendedTagList.appendChild(e),this.markSelectedActiveTags()}}setRecommendedFrequentTags(t){if(0===t.length)this.frequentTagsTitle.classList.add("is-hidden");else{this.frequentTagsTitle.classList.remove("is-hidden");const e=document.createDocumentFragment();t.forEach((),this.frequentTagList.appendChild(e),this.markSelectedActiveTags()}}show(){this.recommendedTagsArea.classList.remove("is-hidden")}set activeTags(t){this._activeTags=t,this.markSelectedActiveTags()}markSelectedActiveTags(){this.recommendedTagsArea.querySelectorAll(".js-tag").forEach((t=>{t.classList.remove("is-selected"),this._activeTags.indexOf(t.textContent)>=0&&t.classList.add("is-selected")}))}changeFrequentTagsShowingState(t){switch(t){case n.All:this.frequentTagList.classList.add("is-showall"),this.frequentTagsShowingStateButton.textContent="\u4e00\u90e8\u306e\u30bf\u30b0\u3092\u8868\u793a";break;case n.Partial:this.frequentTagList.classList.remove("is-showall"),this.frequentTagsShowingStateButton.textContent="\u3059\u3079\u3066\u306e\u30bf\u30b0\u3092\u8868\u793a"}this.tagStateStorage.setState(t)}reateTagElem(t){const e=document.createElement("li");return e.classList.add("js-tag"),e.textContent=t,e}createTitleOfRecommendedTags(){const t=document.createElement("h3");t.classList.add("bookmarkadd-tagList-title"),t.classList.add("is-hidden");const e=document.createElement("span");e.textContent="\u304a\u3059\u3059\u3081\u30bf\u30b0";const i=document.createElement("a");return i.textContent="\u30bf\u30b0\u306b\u3064\u3044\u3066",i.setAttribute("href","/help/entry/tag"),i.setAttribute("target","_blank"),t.appendChild(e),t.appendChild(i),t}createTitleOfFrequentTags(){const t=document.createElement("h3");t.classList.add("bookmarkadd-tagList-title"),t.classList.add("is-hidden");const e=document.createElement("span");return e.textContent="\u3088\u304f\u4f7f\u3046\u30bf\u30b0",t.appendChild(e),t}createTagListContainer(){const t=document.createElement("ul");return t.classList.add("bookmarkadd-tagList-contents"),t}createTagStateToggleButtone.RecommendedTagListView=o;class a{etState,2778:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShareButtonsView=void 0;const r=i(5468);var s;!function(t){t.Twitter="twitter"}(s||(s={}));e.ShareButtonsView=class{constructor(t){this.onClickShareConfigCheck=t=>{this.shareConfig&&(this.shareConfig.shareEnabled||null===this.shareConfig.shareDisabledReason||this.toggleGeneralHelpPost(this.shareConfig.shareDisabledReason))},this.container=t;const e=t.querySelector(".js-bookmarkadd-share-label-twitter");this.twitterInput=e.querySelector("input"),this.twitterInput.disabled=!0,this.myBookmarkPrivateHelpPost=t.querySelector(".js-bookmarkadd-externalHelp-general-myBookmarkPrivate"),e.addEventListener("click",(t=>{this.onClickShareConfigCheck(s.Twitter)}))}setShareConfig(t){this.shareConfig=t,this.setDefaultDisabledValue(s.Twitter),this.twitterInput.checked=this.shareConfig.services[s.Twitter]}bookmarked(t){t?this.disable(s.Twitter):this.setDefaultDisabledValue(s.Twitter)}onChangeBookmarkVisibilityToPrivate(t){t?(this.twitterInput.checked=!1,this.disable(s.Twitter)):this.setDefaultDisabledValue(s.Twitter)}hide(){this.container.classList.add("is-hidden")}show(){this.container.classList.remove("is-hidden")}setDefaultDisabledValue(t){if(this.shareConfig&&t===s.Twitter){const t=this.shareConfig.shareEnabled;this.twitterInput.disabled=!t}}disable(t){this.shareConfig&&t===s.Twitter&&(this.twitterInput.disabled=!0)}toggleGeneralHelpPost(t){t===r.ShareDisabledReason.MyBookmarkPrivate&&this.myBookmarkPrivateHelpPost.classList.remove("is-hidden")}}},561:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StockButtonView=void 0;const r=i(8642),s=i(3452);class n extends r.Observable{constructor(t){super(),this.onClick=()=>{this.fire("stock_button:clicked",this.input.checked)},this.container=t,this.input=this.container.querySelector(".js-bookmarkadd-readlater"),this.input.addEventListener("click",this.onClick)}check(){this.input.checked=!0}uncheck(){this.input.checked=!1}toggleByTags(t){t.indexOf(s.STOCK_TAG)>=0?this.check():this.uncheck()}}e.StockButtonView=n},4508:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SubmitAndCancelButtonView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.createBookmarkButtonMessage="\u30d6\u30c3\u30af\u30de\u30fc\u30af",this.updateBookmarkButtonMessage="\u4fdd\u5b58\u3059\u308b",this.onSubmitButtonClicked=t=>{t.preventDefault(),this.fire("submit_button:clicked")},this.onCancelButtonClicked=this.submitButton=t.querySelector(".js-bookmarkadd-submit-btn"),this.submitButton.addEventListener("click",this.onSubmitButtonClicked),this.cancelButton=t.querySelector(".js-bookmarkadd-cancel-btn"),null!==this.cancelButton&&(this.cancelButton.classList.add("is-hidden"),this.cancelButton.addEventListener("click",this.onCancelButtonClicked))}bookmarked(t){var e;t?(null===(e=this.cancelButton)||void 0===e||e.classList.remove("is-hidden"),this.submitButton.value=this.updateBookmarkButtonMessage):this.submitButton.value=this.createBookmarkButtonMessage}disable(t){this.submitButton.classList.add("is-disabled"),this.submitButton.setAttribute("disabled","disabled"),this.submitButton.setAttribute("title",t)}enable(){this.submitButton.classList.remove("is-disabled"),this.submitButton.removeAttribute("disabled"),this.submitButton.removeAttribute("title")}}e.SubmitAndCancelButtonView=s},4573:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagAddTextboxView=void 0;const r=i(8642),s=i(1449),n=i(8083);class o extends r.Observable{constructor(t,e){super(),this.isComposing=!1,this.hasCompositionJustEnded=!1,this._activeTags=[],this.onCompositionStart=this.onCompositionEnd=this.onKeyDownAddBox=t=>{if(this.tagCompletionView&&this.tagCompletionView.isShown&&(0,n.preventReservedKeyboardEvent)(t),229!==t.keyCode&&(this.hasCompositionJustEnded=!1),"Enter"===t.key){if(t.preventDefault(),this.isComposing||this.hasCompositionJustEnded)return;if(this.tagCompletionView&&this.tagCompletionView.isShown){const t=this.tagCompletionView.index;this.tagCompletionView.clickSelectedTag(t)}else this.addTagFromTagAddBox(),this.terminateTagCompletion()}else"Tab"===t.key&&this.tagCompletionView&&this.tagCompletionView.isShown&&1===this.tagCompletionView.availableTags.length&&this.tagCompletionView.clickSelectedTag(0)},this.onKeyUpAddBox=t=>{if(this.isComposing||this.hasCompositionJustEnded)return void(this.hasCompositionJustEnded=!1);if(""===this.tagAddBox.value)this.terminateTagCompletion();else if(this.tagCompletionView){const e=this.tagAddBox.value,i=this.tagAddBox.getBoundingClientRect(),r={left:i.left-3,top:i.top+20};if(n.validTagRegexp.test(e)){const i={query:e,coordinate:r},s=this.tagCompletionView.setNewIndexOn(t);this.tagCompletionView.render(i,this._activeTags,s)}}},this.onInputAddBox=t=>{if(this.tagAddBox.value.length>0?this.showTagAddButton():this.hideTagAddButton(),!this.tagCompletionView)return;const e=this.tagAddBox.value,i=this.tagAddBox.getBoundingClientRect(),r={left:i.left-3,top:i.top+20};if(n.validTagRegexp.test(e)){const t={query:e,coordinate:r},i=this.tagCompletionView.index;this.tagCompletionView.render(t,this._activeTags,i)}},this.onTagAddButtonClicked=this.onBlurredAddBox=t=>{this.terminateTagCompletion()},this.onCompletionCommitted=e&&(this.tagCompletionView=new s.TagCompletionView(t)),this.tagAddBox=t.querySelector(".js-bookmarkadd-tags-textbox"),this.tagAddButton=t.querySelector(".js-bookmarkadd-tags-btn"),this.registerEvents()}set activeTags(t){this._activeTags=t}egisterEvents(){this.tagAddBox.addEventListener("focus",(()=>{this.fire("tag_add_box:focused")})),this.tagAddBox.addEventListener("keydown",this.onKeyDownAddBox),this.tagAddBox.addEventListener("keyup",this.onKeyUpAddBox),this.tagAddBox.addEventListener("input",this.onInputAddBox),this.tagAddBox.addEventListener("blur",this.onBlurredAddBox),this.tagAddBox.addEventListener("compositionstart",this.onCompositionStart),this.tagAddBox.addEventListener("compositionend",this.onCompositionEnd),this.tagAddButton.addEventListener("click",this.onTagAddButtonClicked),this.tagCompletionView&&this.tagCompletionView.on("tag_completion:commit",this.onCompletionCommitted)}addTagFromTagAddBox(){const t=this.tagAddBox.value,e=this.normalizeTags(t);e.every(n.isValidTag)&&(e.forEach((t=>this.submitTag(t))),this.clearTagAddBox())}howTagAddButton(){this.tagAddButton.classList.remove("is-hidden")}hideTagAddButton(){this.tagAddButton.classList.add("is-hidden")}ormalizeTags(t){const e=/[\s\uFEFF\xA0]+$/g,i=t.replace(e,"").replace(/[\u0000-\u001F\u007F]/g," ");if(/^(?:\[[^\:\[\]\/\?%]+\])+$/.test(i)){const t=i.match(/\[[^\:\[\]\/\?%]+\]/g);if(null!==t)return t.map((t=>t.replace(/\[(.+)\]/,"$1").replace(e,"")))}return[i]}terminateTagCompletion(){this.tagCompletionView&&window.setTimeout((()=>{this.tagCompletionView.terminate()}),200)}}e.TagAddTextboxView=o},1449:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCompletionView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{setCompletionTags(t){this.completionTags=t}static createTagElemonstructor(t){super(),this.completionTags=[],this.MaxAvailableTags=10,this._availableTags=[],this.selectedIndex=0,this.parentElement=t,this.completionPopup=this.createCompletionPopupElem(),this.completionList=this.createCompletionList(),this.completionPopup.appendChild(this.completionList),this.parentElement.appendChild(this.completionPopup),this.completionList.addEventListener("click",(0,s.delegate)(".js-tag",(t=>this.onClickTag(t)))),this.completionList.addEventListener("mouseover",this.onMouseOver.bind(this))}createCompletionPopupElemt index(){return this.selectedIndex}onClickTag(t){this.savedFocus&&this.savedFocus.focus(),this.commitCompletion(t.target.innerText)}ender(t,e,i){if(!this.completionList)return;if(this._availableTags=this.applyFilter([e=>e.substr(0,t.query.length).toLowerCase()===t.query.toLowerCase(),t=>!e.includes(t)],this.MaxAvailableTags),this.availableTags.length<=0)return void this.terminate();this.completionList.innerHTML="";const r=document.createDocumentFragment();this.availableTags.forEach((),this.completionList.appendChild(r),this.setPosition(t.coordinate),this.completionList.querySelectorAll(".js-tag").forEach((t=>{t.classList.remove("is-selected")}));const s=this.completionList.querySelector(`.js-tag:nth-child(${i+1})`);s&&s.classList.add("is-selected"),this.show()}setNewIndexOn(t){let e=this.selectedIndex;const i=this.availableTags.length;if(i<=0)return 0;"ArrowUp"===t.key||"Up"===t.key||"p"===t.key&&t.ctrlKey||"Tab"===t.key&&t.shiftKey?e-=1:("ArrowDown"===t.key||"Down"===t.key||"n"===t.key&&t.ctrlKey||"Tab"===t.key)&&(e+=1);const r=(e+i)%i;return this.selectedIndex=r,r}clickSelectedTaget availableTags(){return this._availableTags}et isShown(){return!this.completionPopup.classList.contains("is-hidden")}hide(){this.completionPopup.classList.add("is-hidden")}show(){this.completionPopup.classList.remove("is-hidden")}applyFilter(t,e){let i=[];for(let r=0;r<this.completionTags.length;r++){const s=this.completionTags[r];if(t.every((t=>t(s)))&&i.push(s),i.length>=e)break}return i}setPosition(t){const e=this.parentElement.getBoundingClientRect();this.completionPopup.style.top=t.top-e.top+"px",this.completionPopup.style.left=t.left-e.left+"px"}terminate(){this.hide()}}e.TagCompletionView=n},6644:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VisibilityButtonView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.onClick=this.container=t,this.input=this.container.querySelector(".js-bookmarkadd-private"),this.input.addEventListener("click",this.onClick)}check(){this.input.checked=!0}uncheck(){this.input.checked=!1}isChecked(){return this.input.checked}}e.VisibilityButtonView=s},8083:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isValidTag=e.validTagRegexp=e.preventReservedKeyboardEvent=void 0,e.preventReservedKeyboardEvent=function(t){("Enter"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"p"===t.key&&t.ctrlKey||"n"===t.key&&t.ctrlKey||"Tab"===t.key&&t.shiftKey||"Tab"===t.key)&&(t.preventDefault(),t.stopPropagation())},e.validTagRegexp=/^[^\:\[\]\/\?%]+$/,e.isValidTag=,3751:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkIncrementalSearchResultView=void 0;const r=i(8160),s=i(3274),n=i(8642),o=i(2704);class a extends n.Observable{constructor(t,e){super(),this.pages=[],this.indexLoadingCount=0,this.shortUrlLength=40,this.shortTitleLength=50,this.view=t,this.list=t.querySelector(".js-user-bookmark-list");const i=t.querySelector(".js-pager");this.pagerPrev=i.querySelector(".js-prev"),this.pagerNext=i.querySelector(".js-next"),this.template=e,this.closeButton=t.querySelector(".js-close-button"),this.message=t.querySelector(".js-message"),this.fulltextSearchLink=this.message.querySelector(".js-fulltext-search-link"),this.globalSearchLink=this.message.querySelector(".js-global-search-link"),this.linkQueries=this.message.querySelectorAll(".js-query"),this.pagerPrev.addEventListener("click",this.onPagerClick.bind(this)),this.pagerNext.addEventListener("click",this.onPagerClick.bind(this)),this.closeButton.addEventListener("click",this.onCloseButtonClick.bind(this))}onPagerClick(t){t.stopPropagation(),t.preventDefault();const e=t.target,i=e.getAttribute("data-cursor");if(!i)return;const r=parseInt(e.getAttribute("data-page")||"1",10),s=parseInt(i||"-1",10);this.fire("bookmark_incremental_search:goto",r,s)}pen(){this.view.classList.add("is-active")}close(){this.view.classList.remove("is-active")}setResult(t){const e=t.bookmarks.map((t=>{const e=t.tags.map((e=>`<li><a href="/${t.user.name}/${encodeURIComponent(e)}/">${(0,o.escapeHTML)(e)}</a></li>`)).join(""),i=t.url.replace(new RegExp("^[^:]+:[/]*"),"");return{url:t.url,url_short:(0,o.truncateText)(i,this.shortUrlLength),favicon_url:t.entry.faviconURL(),entry_url:t.entry.entryURL(),url_encoded:encodeURIComponent(t.entry.url),title:t.entry.title,title_short:(0,o.truncateText)(t.entry.title,this.shortTitleLength),total_bookmarks:t.entry.total_bookmarks,total_bookmarks_with_user_postfix:t.entry.total_bookmarks_with_user_postfix,tags:e,comment:t.comment,created:(0,s.formatDateTime)(t.created,"YYYY/MM/DD")}}));for(;this.list.firstChild;)this.list.removeChild(this.list.firstChild);r.Template.renderArrayTo(this.template,e,this.list),this.setPager(t),this.setMessage(t)}setPager(t){this.pages[t.page]=t.cursor;const e=this.pages[t.page-1];void 0!==e?(this.pagerPrev.classList.add("is-clickable"),this.pagerPrev.setAttribute("data-page",t.page-1+""),this.pagerPrev.setAttribute("data-cursor",e+"")):(this.pagerPrev.classList.remove("is-clickable"),this.pagerPrev.setAttribute("data-page",""),this.pagerPrev.setAttribute("data-cursor","")),t.hasNext?(this.pagerNext.classList.add("is-clickable"),this.pagerNext.setAttribute("data-page",t.page+1+""),this.pagerNext.setAttribute("data-cursor",t.nextCursor+"")):(this.pagerNext.classList.remove("is-clickable"),this.pagerNext.setAttribute("data-page",""),this.pagerNext.setAttribute("data-cursor",""))}setMessage(t){1===t.page&&t.bookmarks.length<=0?this.view.classList.add("is-empty"):this.view.classList.remove("is-empty");const e=t.words.join(" ");encodeURIComponent(e);this.fulltextSearchLink.href="/my/search?q="+encodeURIComponent(e),this.globalSearchLink.href="/q/"+encodeURIComponent(e),this.linkQueries.forEach(()}}e.BookmarkIncrementalSearchResultView=a},3857:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkItemMenuView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t,e,i){super(),this.onClickReportButton=t=>{t.preventDefault();const e=t.target,i=(0,s.closest)(e,".js-bookmark-item"),r=i.dataset.userName,n=i.dataset.url,o=`/-/report/bookmark?url=${encodeURIComponent(n)}&user_name=${r}`;window.location.href=o},this.onClickFollowButton=t=>{if(t.preventDefault(),this.isVisitorGuest)return;const e=(0,s.closest)(t.target,".js-bookmark-item"),i=e.dataset.userName;this.fire("bookmark_item_menu:follow",i),e.querySelector(".js-entry-comment-followuser").classList.add("is-hidden"),e.querySelector(".js-entry-comment-unfollowuser").classList.remove("is-hidden"),e.querySelector(".js-entry-comment-unfollowuser").focus()},this.onClickUnfollowButton=t=>{if(t.preventDefault(),this.isVisitorGuest)return;const e=(0,s.closest)(t.target,".js-bookmark-item"),i=e.dataset.userName;this.fire("bookmark_item_menu:unfollow",i),e.querySelector(".js-entry-comment-followuser").classList.remove("is-hidden"),e.querySelector(".js-entry-comment-unfollowuser").classList.add("is-hidden"),e.querySelector(".js-entry-comment-followuser").focus()},this.onClickIgnoreButton=t=>{if(t.preventDefault(),this.isVisitorGuest)return;const e=(0,s.closest)(t.target,".js-bookmark-item"),i=e.dataset.userName;this.fire("bookmark_item_menu:ignore",i),e.querySelector(".js-entry-comment-ignoreuser").classList.add("is-hidden"),e.querySelector(".js-entry-comment-unignoreuser").classList.remove("is-hidden"),e.querySelector(".js-entry-comment-unignoreuser").focus()},this.onClickUnignoreButton=t=>{if(t.preventDefault(),this.isVisitorGuest)return;const e=(0,s.closest)(t.target,".js-bookmark-item"),i=e.dataset.userName;this.fire("bookmark_item_menu:unignore",i),e.querySelector(".js-entry-comment-unignoreuser").classList.add("is-hidden"),e.querySelector(".js-entry-comment-ignoreuser").classList.remove("is-hidden"),e.querySelector(".js-entry-comment-ignoreuser").focus()},this.elem=t,this.isVisitorGuest=i,this.visitorName=e,this.elem.addEventListener("click",(0,s.delegate)(".js-bookmark-report-violation-button",this.onClickReportButton)),this.elem.addEventListener("click",(0,s.delegate)(".js-entry-comment-followuser",this.onClickFollowButton)),this.elem.addEventListener("click",(0,s.delegate)(".js-entry-comment-unfollowuser",this.onClickUnfollowButton)),this.elem.addEventListener("click",(0,s.delegate)(".js-entry-comment-ignoreuser",this.onClickIgnoreButton)),this.elem.addEventListener("click",(0,s.delegate)(".js-entry-comment-unignoreuser",this.onClickUnignoreButton)),i||this.setVisitor(e)}setVisitor(t){const e=this.elem.querySelector(`[data-user-name="${t}"]`);null!==e&&e.classList.add("is-my-bookmark")}setFollowed(t){t.forEach((t=>{const e=this.elem.querySelector(`[data-user-name="${t}"]`);e&&(e.querySelector(".js-entry-comment-unfollowuser").classList.remove("is-hidden"),e.querySelector(".js-entry-comment-followuser").classList.add("is-hidden"))}))}}e.BookmarkItemMenuView=n},5140:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkPanelView=void 0;const r=i(8642),s=i(8194);class n extends r.Observable{constructor(t,e=!0,i=!0,r=!0,n=!0){super(),this.onSubmit=t=>{this.fire("bookmark:add_request",t)},this.onCompleteBookmark=t=>{this.fire("bookmark:complete",t)},this.element=t;const o=this.element.querySelector(".js-bookmark-editor");this.editorView=new s.BookmarkEditorView({element:o,doesCompleteTags:e,showRecommendedTagList:i,showRecommendedTagListByDefault:r,showExternalServiceShareButton:n}),this.editorView.on("bookmark:add_request",this.onSubmit),this.editorView.on("bookmark_panel:shortcut_submit",this.onSubmit)}setRecommendedTags(t){this.editorView.setRecommendedTags(t)}setFrequentTags(t){this.editorView.setFrequentTags(t)}setShareConfig(t){this.editorView.setShareConfig(t)}setup(t){this.editorView.setup(t)}}e.BookmarkPanelView=n},6135:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkSearchDropdownView=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e,i,r){super(),this.onClickSortMenuButton=t=>{const e=this.sortMenuElem.classList.contains("is-hidden");this.closeAllMenu(),e&&this.openSortMenu()},this.onClickTargetMenuButton=t=>{const e=this.targetMenuElem.classList.contains("is-hidden");this.closeAllMenu(),e&&this.openTargetMenu()},this.onPageClick=t=>{const e=t.target;if(this.sortMenuButtonElem.contains(e))return;this.targetMenuButtonElem.contains(e)||this.closeAllMenu()},this.sortMenuButtonElem=i,this.targetMenuButtonElem=r,this.sortMenuElem=t,this.targetMenuElem=e,this.sortMenuButtonElem.addEventListener("click",this.onClickSortMenuButton),this.targetMenuButtonElem.addEventListener("click",this.onClickTargetMenuButton)}openSortMenu(){this.sortMenuElem.classList.remove("is-hidden"),document.body.addEventListener("click",this.onPageClick)}openTargetMenu(){this.targetMenuElem.classList.remove("is-hidden"),document.body.addEventListener("click",this.onPageClick)}closeAllMenu(){document.body.removeEventListener("click",this.onPageClick),this.sortMenuElem.classList.add("is-hidden"),this.targetMenuElem.classList.add("is-hidden")}}e.BookmarkSearchDropdownView=s},7798:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkSearchFieldView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.field=t,t.addEventListener("input",(t=>{const e=t.target;this.fire("bookmark_search_field:updated",e.value)}))}setFieldValuee.BookmarkSearchFieldView=s},508:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SortTabs=e.BookmarkSortTabView=e.isSortTab=void 0;const r=i(8642),s=i(2704),n=["popular","recent"];e.SortTabs=n,e.isSortTab=class o extends r.Observable{constructor(t){super(),this.displayedTabs=[],this.element=t,this.tabs=this.element.querySelector(".js-bookmarks-sort-tabs"),this.panels=this.element.querySelector(".js-bookmarks-sort-panels"),this.registerEvents()}changeActiveSort(t){this.tabs.querySelectorAll(".js-bookmarks-sort-tab").forEach((e=>{e.dataset.sort===t?e.classList.add("is-active"):e.classList.remove("is-active")})),this.panels.querySelectorAll(".js-bookmarks-sort-panel").forEach((e=>{e.dataset.sort===t?e.classList.add("is-active"):e.classList.remove("is-active")})),this.displayedTabs.indexOf(t)<0&&(this.displayedTabs.push(t),this.fire(o.EVENT_TAB_DISPLAYED,t))}fixTabPositionrollTab(t){this.tabs.style.transform=t<=0?"":`translate3D(0, -${t}px, 0)`}get isTabPositionFixed(){return this.tabs.classList.contains("is-fixed")}et tabHeight(){return this.tabs.offsetHeight}et lastCommentOffsetTop(){const t=this.lastCcommentElement;return null!==t?this.calcOffsetTop(t):0}get lastCcommentElement(){const t=[].slice.call(this.element.querySelectorAll(".js-bookmarks-sort-panel.is-active > .js-bookmarks > .js-bookmark-item:not(.is-hidden)"));return t[t.length-1]||null}calcOffsetTop(t){return t.offsetTop+(t.offsetParent?this.calcOffsetTop(t.offsetParent):0)}registerEvents(){this.tabs.addEventListener("click",(0,s.delegate)(".js-bookmarks-sort-tab",(t=>{const e=t.target,i=e.dataset.sort||"",r=e.classList.contains("is-active");this.fire(o.EVENT_CLICK,i,r)})))}}e.BookmarkSortTabView=o,o.EVENT_CLICK="bookmark_sort_tab:click_tab",o.EVENT_TAB_DISPLAYED="tab:displayed"},6994:function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(s,n){function o(t){try{l(r.next(t))}catch(t){n(t)}}function a(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkStockButtonView=e.BookmarkStockButtonPresenter=void 0;const s=i(9042),n=i(3452),o=i(7174);class a extends s.Presenter{constructor(t,e){super(t),this.visitor=e.visitor,this.location=e.location,this.isStocked=!1,this.isRequesting=!1}setup(){this.setupPromise=o.BookmarkStockRepository.getInstance().isStocked(this.location).then(()}handleClick(){return this.isRequesting?Promise.resolve():(this.resetError(),this.isStocked?this.view.confirmDelete((()=>this.deleteStock())):this.addStock())}addStock(){return this.isRequesting=!0,this.isStocked=!0,this.view.updateButtonIndicator(),o.BookmarkStockRepository.getInstance().addToStock(this.visitor,this.location).then((()=>{this.isStocked=!0})).catch((t=>{this.isStocked=!1,this.setError(new Error("\u3042\u3068\u3067\u8aad\u3080\u306e\u8ffd\u52a0\u306b\u5931\u6557\u3057\u307e\u3057\u305f"))})).then((()=>{this.isRequesting=!1,this.view.updateButtonIndicator()}))}deleteStock(){return this.isRequesting=!0,this.isStocked=!1,this.view.updateButtonIndicator(),n.BookmarkRepository.getInstance().deleteLegacy(this.visitor,this.location).then(().catch((t=>{this.isStocked=!0,this.setError(new Error("\u3042\u3068\u3067\u8aad\u3080\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f"))})).then(()}}e.BookmarkStockButtonPresenter=a;class l extends s.View{constructor(t,e){super(t,e),e.setAttribute("data-initialized",""),e.classList.remove("is-hidden")}reatePresenter(){return new a(this,{visitor:this.visitor,location:this.button.getAttribute("data-href")})}nClickButton(t){return r(this,void 0,void 0,()}confirmDelete(t){return confirm("\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\u3002\n\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u306b\u5bfe\u3059\u308b\u30d6\u30c3\u30af\u30de\u30fc\u30af\u3082\u524a\u9664\u3055\u308c\u307e\u3059\u3002")?t():Promise.resolve()}updateButtonIndicator(){this.presenter.isStocked?(this.buttonPart.setAttribute("is-active",""),this.button.classList.add("is-active")):(this.buttonPart.removeAttribute("is-active"),this.button.classList.remove("is-active"))}updateError(){const t=this.presenter.lastError;t&&alert(t.message)}}e.BookmarkStockButtonView=l},6324:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkerView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t){super(),this.onBookmarkerClicked=t=>{const e=(0,s.closest)(t.target,".js-bookmarker"),i=e.dataset.userName,r=e.dataset.created,n=e.dataset.locationId;if(void 0!==i&&void 0!==r&&void 0!==n){const e=`/${i}/${r}#bookmark-${n}`;t.ctrlKey||t.metaKey||t.shiftKey?window.open(e,"_blank"):window.location.href=e}},this.elem=t,this.bookmarkerArea=t.querySelector(".js-bookmarkers"),this.bookmarkerArea.addEventListener("click",(0,s.delegate)(".js-bookmarker",this.onBookmarkerClicked))}}e.BookmarkerView=n},7354:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DownvoteCheckboxView=e.DownvoteView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.bookmarksContainer=t,new MutationObserver((()=>{this.fire(s.bookmarkLoadedEvent)})).observe(this.bookmarksContainer,{childList:!0})}getUninitializedCheckboxes(){return[...this.bookmarksContainer.querySelectorAll(`${s.containerSelector}:not(.${s.loadedClass})`)].map(()}}e.DownvoteView=s,s.containerSelector=".js-bookmark-downvote-container",s.checkboxSelector=".js-bookmark-downvote-checkbox",s.loadedClass="js-bookmark-downvote-loaded",s.bookmarkLoadedEvent="downvote:bookmark_loaded";class n extends r.Observable{constructor(t){var e,i;super(),t.classList.remove("is-hidden"),t.classList.add(s.loadedClass),this.checkbox=t.querySelector(s.checkboxSelector),this.locationId=null!==(e=t.dataset.locationId)&&void 0!==e?e:"",this.userName=null!==(i=t.dataset.userName)&&void 0!==i?i:"",this.checkbox.dataset.gtmClickLabel=this.voteSubjectKey,this.checkbox.addEventListener("change",(t=>{this.fire(n.changeEvent,this.checkbox.checked)}))}keVoted(){this.checkbox.checked=!0}makeUnvoted(){this.checkbox.checked=!1}}e.DownvoteCheckboxView=n,n.changeEvent="downvote_checkbox:changed"},8547:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawerMenuView=void 0;const r=i(8160),s=i(2704);e.DrawerMenuView=class{constructor(t,e){this.onToggleButtonClicked=t=>{this.isOpen?this.closeDrawer():this.openDrawer()},this.onDrawerMenuClicked=t=>{if((0,s.closest)(t.target,".js-drawer-menu-button"))return;if(!(0,s.closest)(t.target,".js-drawer-body-container"))return void(this.isOpen&&this.closeDrawer());const e=(0,s.closest)(t.target,".js-drawer-submenu");void 0!==e&&(e.classList.contains("is-open")?this.closeSubMenu(e):this.openSubMenu(e))},this.drawerMenu=t,this.toggleButton=e,this.bodyContainer=this.drawerMenu.querySelector(".js-drawer-body-container"),this.bodyTemplate=this.drawerMenu.querySelector("#template-drawer-body"),this.toggleButton.addEventListener("click",this.onToggleButtonClicked),this.drawerMenu.addEventListener("click",this.onDrawerMenuClicked)}get container(){return this.drawerMenu}get isOpen(){return this.drawerMenu.classList.contains("is-open")}renderBody(t){let e={is_login_user:null!==t,is_guest_user:null===t,is_app_target:(0,s.isIOS)()||(0,s.isAndroid)(),is_ios:(0,s.isIOS)(),is_android:(0,s.isAndroid)()};if(null===t){const t=document.documentElement.getAttribute("data-stable-request-url")||"https://b.hatena.ne.jp/",i=encodeURIComponent(t);e.login_url=`https://www.hatena.ne.jp/login?location=${i}`}else e.user_name=t&&t.name,e.profile_image=t.image.image_url;r.Template.renderTo(this.bodyTemplate,e,this.bodyContainer)}openDrawer(){document.body.classList.add("is-overlay"),this.drawerMenu.classList.add("is-open")}closeDrawer(){this.drawerMenu.classList.remove("is-open"),document.body.classList.remove("is-overlay")}openSubMenu(t){t.classList.add("is-open")}},3890:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawerMenuNotificationView=void 0;e.DrawerMenuNotificationView=class{constructor(t,e,i,r){this.onListButtonClicked=t=>{this.isListOpen&&!this.isListLoaded||(this.isListOpen?this.closeList():this.openList())},this.countElements=t,this.listButton=e,this.listContainer=i,this.via=r,this.listButton.addEventListener("click",this.onListButtonClicked)}et isListLoaded(){return!this.listContainer.classList.contains("is-loading")}updateCount(t){this.countElements.forEach((e=>{e.textContent=t>0?`${t}`:""}))}openList(){this.listContainer.classList.add("is-open"),this.isListLoaded||this.loadList(this.via)}loadList(t){const e=`//www.hatena.ne.jp/notify/notices.iframe?via=${t}&${(new Date).getTime()}`,i=this.listContainer.querySelector(".js-notify-list"),r=()=>{delete i.onload,delete i.onerror,delete i.onreadystatechange,this.updateCount(0),this.listContainer.classList.remove("is-loading")};i.onload=r,i.onerror=()=>{delete i.onload,delete i.onerror,delete i.onreadystatechange,this.closeList()},i.onreadystatechange=i.src=e}closeList(){this.listContainer.classList.remove("is-open")}}},81:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicLinkAppBannerView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.elem=t,this.closeButtonSelector=".js-dynamic-link-app-banner-close-button",this.hiddenIndicatorClass="is-hidden";t.querySelector(this.closeButtonSelector).addEventListener("click",()}show(){this.elem.classList.remove(this.hiddenIndicatorClass)}hide(){this.elem.classList.add(this.hiddenIndicatorClass)}}e.DynamicLinkAppBannerView=s,s.closeEvent="dynamic_link_app_banner:click_close_button"},5671:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryCommentEmbedButtonView=void 0;e.EntryCommentEmbedButtonView=class{constructor(t,e){this.expandedClassName="is-expanded",this.onClickToggleButton=t=>{this.toggleWidgetCode()},this.onClickCodePartsTextarea=this.toggleWidgetCode=()=>{this.isExpanded?this.codePartsElem.classList.remove(this.expandedClassName):this.codePartsElem.classList.add(this.expandedClassName)},this.codePartsElem=e,t.addEventListener("click",this.onClickToggleButton);this.codePartsElem.querySelector("textarea").addEventListener("click",this.onClickCodePartsTextarea)}},920:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryCommentReportViolationButtonView=void 0;e.EntryCommentReportViolationButtonView=class{constructor(t){this.onClickReportViolationButton=t=>{t.preventDefault();const e=t.target,i=e.dataset.userName,r=e.dataset.url;if(r&&i){const t=`/-/report/bookmark?url=${encodeURIComponent(r)}&user_name=${i}`;window.location.href=t}},t.addEventListener("click",this.onClickReportViolationButton)}}},6253:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryDescriptionView=void 0;e.EntryDescriptionView=class{constructor(t){this.onClickDisplayAll=t=>{t.preventDefault(),this.descriptionShort.classList.add("is-hidden"),this.descriptionAll.classList.remove("is-hidden")},this.container=t,this.descriptionShort=this.container.querySelector(".js-entry-description-short"),this.descriptionAll=this.container.querySelector(".js-entry-description-all");const e=this.container.querySelector(".js-entry-about-description-readmore");e&&e.addEventListener("click",this.onClickDisplayAll)}}},8141:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryEmbedLinkView=void 0;const r=i(2704);e.EntryEmbedLinkView=class{constructor(t,e){this.onMousedownOpenButton=this.onMousedownModal=t=>{if(!(0,r.closest)(t.target,".js-entry-embed-modal-window"))return this.closeModal()},this.onFocusSource=this.onMousedownCloseButton=t=>this.closeModal(),this.modalElem=t,this.openButtonElem=e,this.sourceElem=t.querySelector(".js-entry-embed-textarea"),this.previewElem=t.querySelector(".js-entry-embed-modal-preview"),this.closeButtonElem=t.querySelector(".js-entry-embed-modal-close"),this.openButtonElem.addEventListener("mousedown",this.onMousedownOpenButton),this.modalElem.addEventListener("mousedown",this.onMousedownModal),this.closeButtonElem.addEventListener("mousedown",this.onMousedownCloseButton),this.sourceElem.addEventListener("focus",this.onFocusSource)}applySource(){this.previewElem.querySelector("iframe").src=this.previewElem.dataset.srcUrl}openModal(){document.body.classList.add("is-overlay"),this.modalElem.classList.remove("is-hidden")}closeModal(){this.modalElem.classList.add("is-hidden"),document.body.classList.remove("is-overlay")}}},375:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryInfoEditorView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t,e){super(),this.onClickEditButton=this.onClickModal=t=>{(0,s.closest)(t.target,".js-entry-edit-modal-window")||this.closeModal()},this.onClickDecisionButton=t=>{t.preventDefault(),this.showSpinner(),this.hideButtons(),this.fire("entry_info_editor:decision_button_clicked")},this.onClickCancelButton=t=>{t.preventDefault(),this.closeModal()},this.onClickRefreshButton=t=>{this.showSpinner(),this.hideButtons(),this.fire("entry_info_editor:refresh_button_clicked")},this.onClickCloseButton=t=>{this.closeModal()},this.modalElem=t,this.editButtonElem=e,this.spinner=t.querySelector(".js-entry-edit-modal-spinner"),this.decisionButtonElem=t.querySelector(".js-entry-edit-modal-decision-button"),this.cancelButtonElem=t.querySelector(".js-entry-edit-modal-cancel-button"),this.descriptionElem=t.querySelector(".js-entry-edit-modal-description"),this.modalWindowElem=t.querySelector(".js-entry-edit-modal-window"),this.generalPanel=t.querySelector(".js-entry-edit-modal-general"),this.titlePanel=t.querySelector(".js-entry-edit-modal-title"),this.ownerPanel=t.querySelector(".js-entry-edit-modal-owner"),this.refreshPanel=t.querySelector(".js-entry-edit-modal-refresh"),this.visibilityPanel=t.querySelector(".js-entry-edit-modal-visibility"),this.closeButton=t.querySelector(".js-entry-edit-modal-close-button"),this.registerEvents()}registerEvents(){this.editButtonElem.addEventListener("click",this.onClickEditButton),this.modalElem.addEventListener("click",this.onClickModal),this.decisionButtonElem.addEventListener("click",this.onClickDecisionButton),this.cancelButtonElem.addEventListener("click",this.onClickCancelButton),this.refreshPanel.querySelector("button").addEventListener("click",this.onClickRefreshButton),this.closeButton.addEventListener("click",this.onClickCloseButton)}owMessage(t){this.setModalItemVisibility([]),this.setDescription(t),this.hideSpinner(),this.hideButtons()}makeBusy(){this.setModalItemVisibility([]),this.showSpinner(),this.hideButtons()}openModal(){document.body.classList.add("is-overlay"),this.modalElem.classList.remove("is-hidden")}closeModalhowSpinner(){this.spinner.classList.remove("is-hidden")}hideSpinner(){this.spinner.classList.add("is-hidden")}showButtons(t){t.includes("title")?(this.decisionButtonElem.classList.remove("is-hidden"),this.cancelButtonElem.classList.remove("is-hidden")):this.hideButtons()}hideButtons(){this.decisionButtonElem.classList.add("is-hidden"),this.cancelButtonElem.classList.add("is-hidden")}setDescription(t){this.descriptionElem.classList.remove("is-hidden"),this.descriptionElem.innerText=t}setModalItemVisibility(t){const e=t.includes("title");e?this.generalPanel.classList.remove("is-hidden"):this.generalPanel.classList.add("is-hidden"),e?this.titlePanel.classList.remove("is-hidden"):this.titlePanel.classList.add("is-hidden");const i=t.includes("refresh"),r=t.includes("visibility");i||r?this.ownerPanel.classList.remove("is-hidden"):this.ownerPanel.classList.add("is-hidden"),i?this.refreshPanel.classList.remove("is-hidden"):this.refreshPanel.classList.add("is-hidden"),r?this.visibilityPanel.classList.remove("is-hidden"):this.visibilityPanel.classList.add("is-hidden")}}e.EntryInfoEditorView=n},701:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryInfoMenuView=void 0;const r=i(2704);e.EntryInfoMenuView=class{constructor(t,e){this.onClickButton=t=>{this.menu.classList.contains("is-hidden")?this.openMenu():this.closeMenu()},this.onMousedownMenu=t=>t.preventDefault(),this.onBlurred=this.elem=t,this.menu=this.elem.querySelector(".js-entry-menu"),this.visitorName=e,this.elem.addEventListener("click",(0,r.delegate)(".js-entry-menu-button",this.onClickButton)),this.elem.addEventListener("mousedown",(0,r.delegate)(".js-entry-menu",this.onMousedownMenu)),this.elem.addEventListener("blur",(0,r.delegate)(".js-entry-menu-button",this.onBlurred),!0)}openMenu(){this.menu.classList.add("is-owned"),this.menu.classList.remove("is-hidden")}closeMenu(){this.menu.classList.add("is-hidden")}}},6112:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryListLayoutSwitcherView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t,e){super(),this.onClickSwitcherItem=t=>{this.fire("entrylist_layout:changed",t.target.dataset.layout)},this.switcher=t,this.updateSwitcher(e),this.switcher.addEventListener("click",(0,s.delegate)(".js-entrylist-layout-switcher-item",this.onClickSwitcherItem))}updateSwitcher(t){const e=this.switcher.querySelectorAll("[data-layout]"),i=this.switcher.querySelector(`[data-layout=${t}]`);e.forEach((t=>t.classList.remove("is-active"))),i.classList.add("is-active")}e.EntryListLayoutSwitcherView=n},5886:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryMyBookmarkView=void 0;const r=i(466),s=i(8160),n=i(3274),o=i(8642),a=i(402),l=i(4269),c=i(8194),h=i(955),d=i(9832);class u extends o.Observable{constructor(t){super(),this.onClickBookmarkEditButton=t=>{this.openBookmarkEditor()},this.onClickBookmarkDeleteButton=()=>{const t=this.myBookmarkContainer.querySelector(".js-inplace-delete").dataset.confirmMessage;confirm(t)&&this.fire("bookmark:delete_request")},this.onClickCancelButton=this.container=t,this.myBookmarkTemplate=this.container.querySelector("#entry-myBookmark-template"),this.myBookmarkContainer=this.container.querySelector(".js-entry-myBookmark-container"),this.editor=this.container.querySelector(".js-user-bookmark-edit"),this.form=this.editor.querySelector(".js-add-form"),this.editorView=new c.BookmarkEditorView({element:this.editor,doesCompleteTags:!0,showRecommendedTagList:!0,showRecommendedTagListByDefault:!1,showExternalServiceShareButton:!0}),this.editorView.on("bookmark_panel:shortcut_submit",(),this.editorView.on("cancel_button:clicked",this.onClickCancelButton),this.bubble(this.editorView,"bookmark:add_request")}renderEditorProfileImage(t){const e=this.editor.querySelector("#template-user-profile-image"),i=this.editor.querySelector(".js-profile-image-container");s.Template.renderTo(e,{user_name:t.name,profile_image_url:t.image.image_url},i)}renderMyBookmark(t,e){const i=r.render(this.myBookmarkTemplate.innerHTML,{user_name:e.name,profile_image_url:e.image.image_url,anchor_path:(0,l.anchorPath)(t),comment:t.comment,comment_expanded:t.comment_expanded,is_public:"public"===t.status,tags:t.tags.map((t=>({tag:t,tag_escaped:encodeURIComponent(t)}))),timestamp:(0,n.formatDateTime)(t.created,"YYYY/MM/DD"),url:t.url});this.myBookmarkContainer.innerHTML=i;this.myBookmarkContainer.querySelector(".js-inplace-edit").addEventListener("click",this.onClickBookmarkEditButton);this.myBookmarkContainer.querySelector(".js-inplace-delete").addEventListener("click",this.onClickBookmarkDeleteButton)}setupEditor(t){this.editorView.setup(t)}clearBookmarkEditor(){this.editorView.clear()}showMyBookmark(){this.myBookmarkContainer.classList.remove("is-hidden")}hideMyBookmark(){this.myBookmarkContainer.classList.add("is-hidden")}showEditor(){this.editor.classList.remove("is-hidden")}hideEditor(){this.editor.classList.add("is-hidden")}etFrequentTags(t){this.editorView.setFrequentTags(t)}setRecommendedTags(t){this.editorView.setRecommendedTags(t)}setShareConfig(t){this.editorView.setShareConfig(t)}setShareText(t){this.initShareButton(),this.intentShareComponentView.setShareURLs(t),this.twitterShareEnabled&&this.initShareModal(t)}setTwitterShareEnabled(t){this.twitterShareEnabled=t}nitShareButton(){const t=this.myBookmarkContainer.querySelector(".js-intent-share-button"),e=this.myBookmarkContainer.querySelector(".js-intent-share-container"),i=this.myBookmarkContainer.querySelector(".js-intent-share-tooltip");if(t&&e){const r=Object.assign({intentShareButton:t,intentShareContainer:e},i?{hintTooltip:i}:{});this.intentShareComponentView=new h.IntentShareComponentView(r),this.bubble(this.intentShareComponentView,h.IntentShareComponentView.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL)}}initShareModal(t){const e=document.querySelector(".js-twitter-share-modal");if(t.twitter&&e)if(localStorage.getItem(a.AUTO_REDIRECT_FLAG_KEY))window.open(t.twitter.intent_url,"_blank");else{if(!this.twitterShareModalController){const t=new d.TwitterShareModalView(e);this.twitterShareModalController=new a.TwitterShareModalController(t)}this.twitterShareModalController.setShareLink(t.twitter.intent_url),this.twitterShareModalController.setShareText(t.twitter.html),this.twitterShareModalController.open()}}}e.EntryMyBookmarkView=u},3808:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MobileEntryMyBookmarkView=void 0;const r=i(466),s=i(3274),n=i(8642),o=i(402),a=i(4269),l=i(4253),c=i(955),h=i(9832);class d extends n.Observable{constructor(t,e,i){super(),this.onClickModalButton=this.onClickBookmarkEditButton=this.onClickBookmarkDeleteButton=()=>{const t=this.myBookmarkContainer.querySelector(".js-inplace-delete").dataset.confirmMessage;confirm(t)&&this.fire("bookmark:delete_request")},this.container=t,this.myBookmarkTemplate=this.container.querySelector("#entry-myBookmark-template"),this.myBookmarkContainer=this.container.querySelector(".js-entry-myBookmark-container"),this.modalButtons=e;const r=this.container.querySelector(".js-bookmark-modal");this.modalBookmarkEditorView=new l.ModalBookmarkEditorView(r,!0,!0),this.modalButtons.forEach((),this.bubble(this.modalBookmarkEditorView,"bookmark:add_request"),this.commentBoxGuest=i}openBookmmarkEditor(){this.modalBookmarkEditorView.show()}setFrequentTags(t){this.modalBookmarkEditorView.setFrequentTags(t)}setRecommendedTags(t){this.modalBookmarkEditorView.setRecommendedTags(t)}renderMyBookmark(t,e){const i=r.render(this.myBookmarkTemplate.innerHTML,{user_name:e.name,profile_image_url:e.image.image_url,anchor_path:(0,a.anchorPath)(t),comment:t.comment,comment_expanded:t.comment_expanded,is_public:"public"===t.status,tags:t.tags.map((),timestamp:(0,s.formatDateTime)(t.created,"YYYY/MM/DD"),url:t.url});this.myBookmarkContainer.innerHTML=i;this.myBookmarkContainer.querySelector(".js-inplace-edit").addEventListener("click",this.onClickBookmarkEditButton);this.myBookmarkContainer.querySelector(".js-inplace-delete").addEventListener("click",this.onClickBookmarkDeleteButton)}setupEditor(t){this.modalBookmarkEditorView.setup(t)}clearEditor(){this.modalBookmarkEditorView.clearEditor()}closeModalWindow(){this.modalBookmarkEditorView.hide()}showModalButton(){this.modalButtons.forEach((t=>t.classList.remove("is-hidden")))}ideMyBookmark(){this.myBookmarkContainer.classList.add("is-hidden")}showGuestView(){this.commentBoxGuest.classList.remove("is-hidden")}setShareConfig(t){this.modalBookmarkEditorView.setShareConfig(t)}setShareText(t){this.initShareButton(),this.intentShareComponentView.setShareURLs(t),this.twitterShareEnabled&&this.initShareModal(t)}nitShareButton(){const t=this.myBookmarkContainer.querySelector(".js-intent-share-button"),e=this.myBookmarkContainer.querySelector(".js-intent-share-container"),i=this.myBookmarkContainer.querySelector(".js-intent-share-tooltip");if(t&&e){const r=Object.assign({intentShareButton:t,intentShareContainer:e},i?{hintTooltip:i}:{});this.intentShareComponentView=new c.IntentShareComponentView(r),this.bubble(this.intentShareComponentView,c.IntentShareComponentView.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL)}}initShareModal(t){const e=document.querySelector(".js-twitter-share-modal");if(t.twitter&&e)if(localStorage.getItem(o.AUTO_REDIRECT_FLAG_KEY))window.open(t.twitter.intent_url,"_blank");else{const i=new h.TwitterShareModalView(e);i.setShareLink(t.twitter.intent_url),i.setShareText(t.twitter.html),i.open(),new o.TwitterShareModalController(i)}}}e.MobileEntryMyBookmarkView=d},8234:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntryNotFoundModalView=void 0;const r=i(1153);class s extends r.ModalView{constructor(t,e){super(t),this.closeModal=t=>{t.ctrlKey||t.metaKey||t.shiftKey||(t.preventDefault(),this.close())},e.addEventListener("click",this.closeModal)}}e.EntryNotFoundModalView=s},418:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntrySubmenuView=void 0;e.EntrySubmenuView=class{egisterReportButtonEvents(){const t=this.elem.dataset.url;this.reportButton.addEventListener("click",(e=>{e.preventDefault(),window.location.href=`/-/report/entry?url=${encodeURIComponent(t)}`}))}show(){this.elem.classList.remove("is-hidden")}}},9897:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FirstBookmarkNotificationModalView=void 0;const r=i(7998),s=i(1153);class n extends s.ModalView{constructor(t){super(t),this.elem=t,this.userCountElem=t.querySelector("span.js-first-bookmark-count"),this.userNameElem=t.querySelector("span.js-first-bookmarker-name"),this.twitterShareButton=t.querySelector("a.js-entry-notificationModal-share-button")}loadAnimation(t){const e=r.default.loadAnimation({container:this.elem.querySelector(".js-first-bookmark-animation"),renderer:"svg",loop:!1,autoplay:!1,path:t});setTimeout((,2e3)}setFirstBookmark(t){this.userCountElem.innerText=t.total_bookmarks_achievement.toString(),this.userNameElem.innerText=t.bookmark.user.name,this.twitterShareButton.href=t.twitter_url}e.FirstBookmarkNotificationModalView=n},5287:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingBookmarksView=void 0;const r=i(8160),s=i(3274),n=i(8642),o=i(4269);class a extends n.Observable{onstructor(t,e){super(),this.url=t.getAttribute("data-entry-url"),this.followingBookmarksList=t.querySelector(".js-following-bookmarks"),this.followingUserTemplate=e||t.querySelector("#template-following-bookmark")}showFollowingBookmarks(t){const e=document.createDocumentFragment();t.forEach((t=>{const i=r.Template.renderElement(this.followingUserTemplate,{user_name:t.user.name,comment:t.comment,tags:t.tags.map((),profile_image_url:t.user.image.image_url,anchor_path:(0,o.anchorPath)(t),created:(0,s.formatDateTime)(t.created,"YYYY/MM/DD")});e.appendChild(i)})),this.followingBookmarksList.appendChild(e)}}e.FollowingBookmarksView=a},2109:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalHeaderView=void 0;const r=i(8160);e.GlobalHeaderView=class{constructor(t){this.header=t,this.template=this.header.querySelector("#template-menu-hatena-user"),this.portalStaticOrigin=this.header.getAttribute("data-portal-static-origin")||"",this.headerInner=this.header.querySelector(".js-global-header-inner")}update(t){r.Template.renderTo(this.template,{username:t.name,user_image_url:t.image.small_thumbnail_url,hotentry_url:`/${t.name}/hotentry`,add_bookmark_url:`/${t.name}/add`,bookmark_url:`/${t.name}/bookmark`,bookmark_stock_url:`/${t.name}/unread_bookmark`},this.headerInner),this.insertScript(this.portalStaticOrigin+"/js/header.ja.js")}insertScript(t){const e=document.createElement("script");e.src=t,e.charset="utf-8",e.type="text/javascript",this.headerInner.appendChild(e)}updateAsGuest(t){this.header.querySelector(".js-guest").classList.remove("is-hidden")}}},2499:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalNavigationView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t){super(),this.onPageClick=t=>{const e=t.target,i=this.globalNavigation.querySelectorAll(".js-navi-item-detail-inner");for(const t of i){if(t.contains(e))return}const r=this.globalNavigation.querySelectorAll(".js-navi-link");for(const t of r){if(t.contains(e))return}this.hideCategory()},this.initMembers(t),this.registerEvents()}initMembers(t){this.globalNavigation=t,this.globalNavigation.classList.remove("noscript")}registerEvents(){this.globalNavigation.addEventListener("click",(0,s.delegate)(".js-gnavi-button",this.onCategoryClick.bind(this)))}onCategoryClick(t){const e=t.target.parentNode.parentNode.getAttribute("data-category-name");this.hideCategory(),this.openingCategory!==e?(this.openingCategory=e,this.showCategory(e)):this.openingCategory=""}fixHeader(){this.globalNavigation.classList.add("is-scrolled"),this.globalNavigation.classList.remove("is-unscrolled")}unfixHeader(){this.globalNavigation.classList.add("is-unscrolled"),this.globalNavigation.classList.remove("is-scrolled")}showCategory(t){const e=this.globalNavigation.querySelector(`[data-category-name="${t}"]`),i=e.querySelector(".js-navi-item-detail");e.classList.add("is-current"),i.classList.remove("is-hidden"),document.body.addEventListener("click",this.onPageClick)}hideCategory(){document.body.removeEventListener("click",this.onPageClick);const t=this.globalNavigation.querySelector(".js-navi-category-item.is-current");if(!t)return;const e=t.querySelector(".js-navi-item-detail");t.classList.remove("is-current"),e.classList.add("is-hidden")}}e.GlobalNavigationView=n},7897:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalNotificationView=void 0;e.GlobalNotificationView=class{constructor(t){this.container=t}update(t){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.container.appendChild(t)}show(){this.container.classList.remove("is-hidden")}hide(){this.container.classList.add("is-hidden")}toggle(){this.isHidden?this.show():this.hide()}get isHidden(){return this.container.classList.contains("is-hidden")}}},4899:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GuestRegisterModalView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t,e){super(),this.onClickModal=t=>{if(!(0,s.closest)(t.target,".js-modal-inner"))return this.closeModal()},this.modalElem=t,this.linkElems=e,this.closeButtonElem=t.querySelector(".js-modal-close-button"),this.registerLinkElem=t.querySelector(".js-register-link"),this.registerEvents()}openModal(t){this.isOpened||(this.registerLinkElem.href=t,document.body.classList.add("is-overlay"),this.modalElem.classList.remove("is-hidden"),this.fire(n.EVENT_OPEND))}closeModal(){this.isOpened&&(this.registerLinkElem.href="#",this.modalElem.classList.add("is-hidden"),document.body.classList.remove("is-overlay"),this.fire(n.EVENT_CLOSED))}get isOpened(){return!this.modalElem.classList.contains("is-hidden")}registerEvents(){this.linkElems.forEach((t=>{t.addEventListener("click",()})),this.modalElem.addEventListener("click",this.onClickModal.bind(this)),this.closeButtonElem.addEventListener("click",this.closeModal.bind(this))}}e.GuestRegisterModalView=n,n.EVENT_OPEND="modal:opened",n.EVENT_CLOSED="modal:closed"},1543:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreUserView=void 0;e.IgnoreUserView=class{constructor(t){this.style=t}hideIgnoredUsers(t){if(0===t.length)return;let e="";for(let i=0;i<t.length;i+=1e3)e+=t.slice(i,i+1e3).map((t=>`.js-ignorable-user-content[data-user-name="${t}"]`)).join(",")+"{ display: none; }\n";this.style.textContent=e}}},8578:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestTagItemView=e.InterestTagListView=void 0;const r=i(8160),s=i(8642),n=i(2704);class o extends s.Observable{constructor(t){super(),this.itemViews={},this.initMembers(t),this.registerEvents()}initMembers(t){this.container=t,this.addTagInput=this.container.querySelector(".js-add-tag-input"),this.addTagForm=this.container.querySelector(".js-add-tag-form"),this.interestTagList=this.container.querySelector(".js-tag-list"),this.errorMessage=this.container.querySelector(".js-error-message"),this.tagTemplate=this.container.querySelector("#template-tag"),this.container.querySelectorAll(".js-interest-tag-item").forEach(()}registerEvents(){this.addTagForm.addEventListener("submit",this.onAddTagSubmit.bind(this)),this.interestTagList.addEventListener("click",(0,n.delegate)(".js-tag-delete-button",(t=>this.onTagDeleteButtonClicked(t))))}nAddTagSubmit(t){t.preventDefault();const e=this.addTagInput.value;""!==e&&(this.tags().includes(e)?this.showErrorMessage("\u3059\u3067\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059"):this.fire("interest_tag:add",e))}onTagDeleteButtonClicked(t){t.preventDefault();const e=t.target.parentNode.dataset.tag;this.fire("interest_tag:delete",e)}addTag(t){const e=r.Template.renderElement(this.tagTemplate,{interest_tag:t});this.itemViews[t]=new a(e),this.interestTagList.appendChild(e)}removeTaghowErrorMessage(t){this.errorMessage.innerHTML=t,this.errorMessage.classList.remove("is-hidden")}hideErrorMessage(){this.errorMessage.classList.add("is-hidden")}}e.InterestTagListView=o;class a{constructor(t){this.initMembers(t)}emove(){this.tagUnit.parentNode.removeChild(this.tagUnit)}}e.InterestTagItemView=a},4101:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestedTagView=e.InterestedTagsViewEvents=void 0;const r=i(8642);class s{}e.InterestedTagsViewEvents=s,s.subscribe="interested_tags:subscribe",s.unsubscribe="interested_tags:unsubscribe";class n extends r.Observable{constructor(t){super(),this.button=t,this.button.addEventListener("click",this.onButtonClicked.bind(this))}get tag(){return this.button.dataset.tagLabel}setStatusRegistered(){this.button.disabled=!1,this.button.classList.add("is-registered")}setStatusNotRegisterednButtonClicked(t){t.stopPropagation(),t.preventDefault(),this.button.disabled=!0,this.isRegitered?this.fire(s.unsubscribe,this.tag):this.fire(s.subscribe,this.tag)}get isRegitered(){return this.button.classList.contains("is-registered")}}e.InterestedTagView=n},5252:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardShortcutView=void 0;class i{constructor(t,e,i){this.helpElement=null,this.container=t,this.itemSelector=e,this.topMargin=i;const r=document.getElementById("keyboard-shortcut-help");if(r){this.helpElement=r;this.helpElement.querySelector(".js-close-button").addEventListener("click",()}}get itemLength(){return this.items.length}get items(){const t=this.container.querySelectorAll(this.itemSelector);return Array.from(t).filter(()}setIndex(t){this.container.querySelectorAll(`${this.itemSelector}.is-keyboard-selected`).forEach(();const e=this.items[t];e&&e.classList.add(i.SELECTED_CLASS),this.focus(e)}focus(t){if(t){const e=this.topMargin+34;window.scrollTo(0,this.offsetTop(t)-e)}else window.scrollTo(0,0)}offsetTop(t){return t.offsetTop+(t.offsetParent?this.offsetTop(t.offsetParent):0)}stock(t){const e=this.items[t];if(e){const t=e.querySelector(".js-bookmark-stock-button-ready");t&&this.clickElement(t)}}open(t){const e=this.items[t];e&&this.openLinkInNewTabWithSelector(e,".js-keyboard-openable")}openEntryPage(t){const e=this.items[t];e&&this.openLinkInNewTabWithSelector(e,".js-keyboard-entry-page-openable")}toggleHelp(){this.helpElement&&this.helpElement.classList.toggle("is-hidden")}openLinkInNewTabWithSelector(t,e){const i=t.querySelector(e);i&&this.openLinkInNewTab(i)}openLinkInNewTab(t){const e=t.target;t.target="_blank",window.setTimeout((,4),this.clickElement(t)}clickElement(t){try{t.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}catch(e){const i={bubbles:!0,cancelable:!1},r=document.createEvent("MouseEvent");r.initMouseEvent("click",i.bubbles,i.cancelable,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}}e.KeyboardShortcutView=i,i.SELECTED_CLASS="is-keyboard-selected"},1233:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LimitedHeightBoxView=void 0;const r=i(2704);e.LimitedHeightBoxView=class{pplyLimit(){if(this.container.offsetHeight<=this.maxHeight)return;let t=(0,r.stringToArray)(this.textElem.innerText);for(;this.container.offsetHeight>this.maxHeight&&t.length>0;)t.splice(t.length-1),this.textElem.innerText=t.join("")+"..."}}},6320:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageModalView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.EVENT_MODAL_CLOSE="message_modal:close",this.container=t,this.closeButton=this.container.querySelector(".js-message-modal-close-button"),this.registerEvents()}how(){this.container.classList.remove("is-hidden")}hide(){this.container.classList.add("is-hidden")}egisterEvents(){var t;null===(t=this.closeButton)||void 0===t||t.addEventListener("click",()}get isHidden(){return this.container.classList.contains("is-hidden")}}e.MessageModalView=s},1153:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptInModalView=e.ModalView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t){super(),this.modal=t,this.closeButton=this.modal.querySelector(".js-modal-close-button"),this.registerEvents(),this.close()}open(){this.isClose&&(document.body.classList.add("is-overlay"),this.modal.classList.remove("is-hidden"),this.fire(n.EVENT_MODAL_OPENED))}close(){this.isOpen&&(this.modal.classList.add("is-hidden"),document.body.classList.remove("is-overlay"))}get isClose(){return this.modal.classList.contains("is-hidden")}egisterEvents(){var t;this.modal.querySelector(".js-modal-content")&&this.modal.addEventListener("click",(t=>{const e=t.target;(0,s.closest)(e,".js-modal-content")||this.fire(n.EVENT_MODAL_CLOSE)})),null===(t=this.closeButton)||void 0===t||t.addEventListener("click",(t=>{this.fire(n.EVENT_MODAL_CLOSE)}))}}e.ModalView=n,n.EVENT_MODAL_OPENED="modal:opened",n.EVENT_MODAL_CLOSE="modal:close";e.OptInModalView=class extends n{get isEnabled(){return this.modal.classList.contains("js-modal-enabled")}}},4253:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModalBookmarkEditorView=void 0;const r=i(8642),s=i(2704),n=i(4269),o=i(8194);class a extends r.Observable{constructor(t,e,i,r=n.BookmarkStatus.Public){super(),this.onClickModal=t=>{(0,s.closest)(t.target,".js-bookmark-modal-inner")||this.hide()},this.container=t,this.modalWindow=this.container.querySelector(".js-bookmark-modal-inner"),this.container.addEventListener("click",this.onClickModal,!0),this.editorView=new o.BookmarkEditorView({element:this.modalWindow,doesCompleteTags:!1,showRecommendedTagList:e,showRecommendedTagListByDefault:!0,showExternalServiceShareButton:i,defaultVisibility:r}),this.editorView.on("bookmark_panel:shortcut_submit",(t=>{this.fire("bookmark:add_request",t)})),this.bubble(this.editorView,"bookmark:add_request")}show(){this.container.classList.remove("is-hidden"),document.body.classList.add("is-overlay")}hide(){this.container.classList.add("is-hidden"),document.body.classList.remove("is-overlay"),this.clear()}setup(t){this.editorView.setup(t)}clear(){this.editorView.clear()}clearEditor(){this.editorView.clear()}focusToAnnotationBox(){this.editorView.focusToAnnotationBox()}setShareConfig(t){this.editorView.setShareConfig(t)}setFrequentTags(t){this.editorView.setFrequentTags(t)}setRecommendedTags(t){this.editorView.setRecommendedTags(t)}}e.ModalBookmarkEditorView=a},341:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RelatedEntryView=void 0;const r=i(8160),s=i(2704);e.RelatedEntryView=class{constructor(t){this.container=t,this.relatedEntryTemplate=this.container.querySelector("#entry-relationContents-template")}renderRelatedEntries(t){const e=document.createDocumentFragment();t.forEach((t=>{document.createElement("a").href=t.url;const i=r.Template.renderElement(this.relatedEntryTemplate,{title:t.title,truncated_title:(0,s.truncateText)(t.title,150),root_title:t.rootTitle(),site_search_url:t.siteSearchUrl(),url:t.url,entry_url:t.entryURL(),favicon_url:t.faviconURL(),image_url:t.image,total_bookmarks:t.total_bookmarks,total_bookmarks_with_user_postfix:t.total_bookmarks_with_user_postfix});e.appendChild(i)})),this.container.appendChild(e)}}},8205:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollView=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e={x:0,y:0}){super(),this.onScroll=t=>{this.fire(s.EVENT_SCROLL,{x:this.window.pageXOffset+this.defualtOffset.x,y:this.window.pageYOffset+this.defualtOffset.y})},this.window=t,this.defualtOffset=e,t.addEventListener("scroll",this.throttle(this.onScroll),{passive:!0,capture:!0})}throttle(t){let e=!0;return i=>{e&&(e=!1,requestAnimationFrame(())}}onScrollTo(t,e){this.on(s.EVENT_SCROLL,(i=>{i.y>t&&e(i)}))}onScrollUntil(t,e){this.on(s.EVENT_SCROLL,(i=>{i.y<=t&&e(i)}))}scrollTo(t){this.window.scrollTo(t.x-this.defualtOffset.x,t.y-this.defualtOffset.y)}}e.ScrollView=s,s.EVENT_SCROLL="bookmark:scroll"},6984:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShortURLView=void 0;const r=i(8160),s=i(8642);class n extends s.Observable{nitialLoad(){this.onBookmarksLoaded(),new MutationObserver((()=>{this.onBookmarksLoaded()})).observe(this.container,{childList:!0})}setShortURLClicks(t){t.forEach((t=>{const e=this.container.querySelector(`.js-user-bookmark-comment[data-url="${t.bookmarked_url}"][data-user-name="${t.user_name}"]`).querySelector(".js-short-url-clicks");if(e&&t.count>0){const i=r.Template.renderElement(this.shortURLTemplate,{count:t.count,tweet_url:t.tweet_url});e.appendChild(i)}}))}onBookmarksLoaded(){const t=this.container.querySelectorAll(`.js-user-bookmark-comment:not(.${n.clicksLoadedClass})`),e=[];t.forEach((t=>{const i=t;i.classList.add(n.clicksLoadedClass);const r={url:i.dataset.url,user:i.dataset.userName};e.push(r)})),this.fire("short_url_clicks_param:loaded",e)}}e.ShortURLView=n,n.clicksLoadedClass="is-short-url-clicks-loaded"},1679:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserInfoView=void 0;e.UserInfoView=class{constructor(t){this.container=t}setProfileetFollowingsAndFollowers(t){const e=this.container.querySelector(".js-total-followings"),i=this.container.querySelector(".js-total-followers");e.innerText=t.total_followings.toString(),i.innerText=t.total_followers.toString()}},800:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserMenuView=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e){super(),this.onClickToggleButton=t=>{this.menuElem.classList.contains("is-hidden")?this.openMenu():this.closeMenu()},this.onClickIgnoreButton=t=>{t.preventDefault(),this.fire("user_menu:ignore",this.authorName),this.ignoreuserElem.classList.add("is-hidden"),this.unignoreuserElem.classList.remove("is-hidden")},this.onClickUnignoreButton=t=>{t.preventDefault(),this.fire("user_menu:unignore",this.authorName),this.unignoreuserElem.classList.add("is-hidden"),this.ignoreuserElem.classList.remove("is-hidden")},this.onClickReportButton=t=>{t.preventDefault(),window.location.href=`/-/report/user?user_name=${encodeURIComponent(this.authorName)}`},this.toggleButtonElem=t,this.menuElem=e,this.authorName=this.menuElem.dataset.authorName,this.ignoreuserElem=this.menuElem.querySelector(".js-user-menu-ignore"),this.unignoreuserElem=this.menuElem.querySelector(".js-user-menu-unignore"),this.reportElem=this.menuElem.querySelector(".js-user-menu-report"),this.toggleButtonElem.addEventListener("click",this.onClickToggleButton),this.ignoreuserElem.addEventListener("click",this.onClickIgnoreButton),this.unignoreuserElem.addEventListener("click",this.onClickUnignoreButton),this.reportElem.addEventListener("click",this.onClickReportButton)}setAlreadyIgnore(t){t.includes(this.authorName)&&(this.ignoreuserElem.classList.add("is-hidden"),this.unignoreuserElem.classList.remove("is-hidden"))}openMenu(){this.menuElem.classList.remove("is-hidden")}closeMenu(){this.menuElem.classList.add("is-hidden")}}e.UserMenuView=s},4823:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserTagListView=void 0;e.UserTagListView=class{gisterEventsnClickDisplayAll(){this.container.querySelectorAll(".js-frequent-tag").forEach((t=>t.classList.remove("is-hidden"))),this.container.querySelectorAll(".js-most-frequent-tag").forEach((t=>t.classList.add("is-hidden"))),this.displayAllButton.parentNode.removeChild(this.displayAllButton)}}},730:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VisibilityLinkView=void 0;const r=i(466),s=i(2704);e.VisibilityLinkView=class{constructor(t,e){this.element=t,this.template=e}render(t){if(/[<>\/]/.test(t))throw new Error(`Invalid character in visitor name: ${t}`);const e=(0,s.smallProfileImageURL)(t),i=r.render(this.template.innerHTML,{name:t,thumbnailHref:e});this.element.innerHTML=i}},5748:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntrySearchDateView=void 0;const r=i(4319),s=i(3274);e.EntrySearchDateView=class{constructor(t){this.internationalization={previousMonth:"\u5148\u6708",nextMonth:"\u7fcc\u6708",months:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],weekdays:["\u65e5\u66dc","\u6708\u66dc","\u706b\u66dc","\u6c34\u66dc","\u6728\u66dc","\u91d1\u66dc","\u571f\u66dc"],weekdaysShort:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"]},this.container=t,this.dateBegin=t.querySelector(".js-entrysearch-datepicker-start"),this.dateEnd=t.querySelector(".js-entrysearch-datepicker-end"),this.createPicker()}createPicker(){new r({field:this.dateBegin,position:"top right",i18n:this.internationalization,format:"YYYY-MM-DD",theme:"triangle-theme",showMonthAfterYear:!0,toString:(t,e)=>(0,s.formatDateTime)(t.toISOString(),e||"YYYY-MM-DD"),parse:(t,e)=>(0,s.parseDateTime)(t)}),new r({field:this.dateEnd,position:"top right",i18n:this.internationalization,format:"YYYY-MM-DD",theme:"triangle-theme",showMonthAfterYear:!0,toString:(t,e)=>(0,s.formatDateTime)(t.toISOString(),e||"YYYY-MM-DD"),parse:)}}},1911:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MobileEntrySearchFilterView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t,e,i){super(),this.formElem=t,this.filterButton=e,this.container=i,this.closeButton=this.container.querySelector(".js-entrysearch-filter-close"),this.targetSelection=this.container.querySelector(".js-entrysearch-filter-target"),this.userSelection=this.container.querySelector(".js-entrysearch-filter-users"),this.dateRangeSelection=this.container.querySelector(".js-entrysearch-filter-daterange"),this.safeSearchCheck=this.container.querySelector(".js-entryseach-safesearch"),this.searchButton=this.container.querySelector(".js-entrysearch-filter-search-btn"),this.clearButton=this.container.querySelector(".js-entrysearch-filter-clear-btn"),this.registerEvents()}registerEvents(){this.filterButton.addEventListener("click",this.openFilter.bind(this)),this.closeButton.addEventListener("click",this.closeFilter.bind(this)),this.formElem.addEventListener("submit",(t=>{(0,s.isMobileWidth)()&&(this.fireSearchEvent(),t.stopPropagation(),t.preventDefault())})),this.clearButton.addEventListener("click",this.fireClearEvent.bind(this)),this.searchButton.addEventListener("click",this.fireSearchEvent.bind(this))}openFilter(){this.container.classList.remove("is-hidden")}closeFilter(){this.container.classList.add("is-hidden")}fireClearEvent(){this.fire("mobile_entry_search_filter:clear")}fireSearchEvent(){this.fire("mobile_entry_search_filter:search")}getText(){const t=this.formElem.querySelector(".js-entrysearch-form-text-input");return t?t.value:""}getSortetTarget(){return this.targetSelection.value}getUsers(){return this.userSelection.value}getDateRange(){return this.dateRangeSelection.value}getSafeSearch(){return this.safeSearchCheck.checked}setTarget(t){this.targetSelection.value=t}setUsers(t){this.userSelection.value=t}setDateRange(t){this.dateRangeSelection.value=t}setSafeSearch(t){this.safeSearchCheck.checked=t}}e.MobileEntrySearchFilterView=n},690:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SafeSearchSwitchView=void 0;e.SafeSearchSwitchView=class{constructor(t){this.container=t}showOptOutSwitch(){this.container.classList.remove("is-hidden")}}},8566:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetStartedMyHotEntryInterestView=void 0;const r=i(8160),s=i(8642);class n extends s.Observable{constructor(t){super(),this.tagListItemViews=[],this.initMembers(t),this.registerEvents()}initMembers(t){this.container=t,this.selectedTagList=this.container.querySelector(".js-selected-tag-list"),this.selctedTagTemplate=this.container.querySelector("#template-selected-tag"),this.tagListContainer=this.container.querySelector(".js-taglist-container"),this.tagListContainer.querySelectorAll(".js-tag-list-item").forEach(();const e=document.querySelector(".js-add-interest-tag-form");e.addEventListener("submit",(t=>{t.preventDefault(),this.addTag(e.tag.value)})),this.gotoNextButton=document.querySelector(".js-goto-next-button")}registerEvents(){this.gotoNextButton.addEventListener("click",(t=>{this.gotoNextButton.disabled=!0,this.fire("interest_tag:click_goto_next")})),this.tagListItemViews.forEach(()}addTag(t){""!==t&&this.fire("interest_tag:add",t)}onClickRemoveTag(t){this.fire("interest_tag:remove",t)}onClickInterestTagItemView(t){const e=t.selected?"interest_tag:remove":"interest_tag:add";this.fire(e,t.tag)}updateSelectedTags(t){this.selectedTagList.querySelectorAll(".js-selected-tag-list-item").forEach((),t.forEach((t=>{const e=r.Template.renderElement(this.selctedTagTemplate,{interest_tag:t});this.selectedTagList.appendChild(e);e.querySelector(".js-selected-tag-list-item-button").addEventListener("click",(e=>{this.onClickRemoveTag(t)}))})),this.tagListItemViews.forEach((e=>{e.selected=t.indexOf(e.tag)>=0}))}gotoNextPage(){this.gotoNextButton.disabled=!1,window.location.href="/getstarted/myhotentry/done"}}e.GetStartedMyHotEntryInterestView=n;class o extends s.Observable{constructor(t){super(),this.initMembers(t),this.registerEvents()}initMembers(t){this.tagUnit=t,this.tag=t.dataset.tag,this.button=t.querySelector(".js-tag-list-item-button")}registerEvents(){this.button.addEventListener("click",this.onClickButton.bind(this))}onClickButtonet selected(){return this.button.classList.contains("selected")}emove(){this.tagUnit.remove()}}},955:function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(s,n){function o(t){try{l(r.next(t))}catch(t){n(t)}}function a(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.IntentShareComponentView=void 0;const s=i(8642),n=i(2704);class o extends s.Observable{constructor(t){var e,i;super(),this.TOOLTIP_KEY="closed_tooltip",this.shareButton=t.intentShareButton,this.shareContainer=t.intentShareContainer,this.hintTooltip=t.hintTooltip,this.shareButton.addEventListener("focus",this.onFocus.bind(this)),null===(i=null===(e=this.hintTooltip)||void 0===e?void 0:e.querySelector(".js-tooltip-close"))||void 0===i||i.addEventListener("click",this.hideTooltip.bind(this)),localStorage.getItem(this.TOOLTIP_KEY)||this.showTooltip()}onFocus(t){this.shownTooltip()&&this.hideTooltip();const e=this.getBookmarkURL(t);this.isShareContainerEnabled()||null===e||this.fire(o.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL,e)}getBookmarkURL(t){const e=(0,n.closest)(t.target,".js-intent-share-bookmark");if(e)return e.getAttribute("data-target-url")}setShareURLs(t){return r(this,void 0,void 0,(function*(){try{const e=this.shareContainer.querySelector(".js-intent-share-twitter-link");e&&t.twitter&&(e.href=t.twitter.intent_url);const i=this.shareContainer.querySelector(".js-intent-share-mastodon-link");i&&(i.href=t.mastodon?t.mastodon.intent_url:`/-/share/setting/mastodon?url=${t.bookmarkedURL.toString()}`),this.enableShareContainer()}catch(t){console.error(t)}}))}shownTooltip(){var t;return!!(null===(t=this.hintTooltip)||void 0===t?void 0:t.classList.contains("is-visible"))}showTooltip(){var t,e;null===(t=this.hintTooltip)||void 0===t||t.classList.remove("is-invisible"),null===(e=this.hintTooltip)||void 0===e||e.classList.add("is-visible")}hideTooltip(){var t,e;null===(t=this.hintTooltip)||void 0===t||t.classList.remove("is-visible"),null===(e=this.hintTooltip)||void 0===e||e.classList.add("is-invisible"),localStorage.getItem(this.TOOLTIP_KEY)||localStorage.setItem(this.TOOLTIP_KEY,"true")}enableShareContainer(){var t=this.shareContainer.firstElementChild;null!==t&&t.classList.remove("is-disabled")}disableShareContainer(){var t=this.shareContainer.firstElementChild;null!==t&&t.classList.add("is-disabled")}isShareContainerEnabled(){var t=this.shareContainer.firstElementChild;return null!==t&&!t.classList.contains("is-disabled")}}e.IntentShareComponentView=o,o.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL="share-btn:click-without-init-url"},9832:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TwitterShareModalView=void 0;const r=i(1153);class s extends r.ModalView{constructor(t){super(t),this.container=t,this.shareLink=this.container.querySelector(".js-twitter-share-modal-share-link"),this.shareText=this.container.querySelector(".js-twitter-share-modal-text"),this.autoRedirectSwitch=this.container.querySelector(".js-twitter-share-modal-auto-redirect")}setShareText(t){this.shareText.innerHTML=t}setShareLink(t){this.shareLink.href=t}showRedirectSwitch(){var t;null===(t=this.container.querySelector(".js-twitter-share-modal-auto-redirect-note"))||void 0===t||t.classList.remove("is-hidden"),this.autoRedirectSwitch.classList.remove("is-hidden")}}e.TwitterShareModalView=s},6340:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DatePageBookmarkView=void 0;const r=i(8160),s=i(3274),n=i(8642),o=i(2704),a=i(4269),l=i(8194),c=i(4253),h=i(7685);class d extends n.Observable{constructor(t){super(),this.onClickEditButton=t=>{this.showEditor()},this.onClickCancelButton=t=>{this.showGuide()},this.guideContainer=t.querySelector(".js-date-page-bookmark-guide-container"),this.editButton=this.guideContainer.querySelector(".js-date-page-bookmark-button"),this.commentContainer=t.querySelector(".js-date-page-bookmark-comment-container"),this.commentTemplate=t.querySelector("#template-date-page-bookmark-comment"),this.innerCommentContainer=this.commentContainer.querySelector(".js-date-page-bookmark"),this.userBookmarkItemMenuView=new h.UserBookmarkItemMenuView(this.innerCommentContainer,!0),this.userBookmarkItemMenuView.on("bookmark:add",((t,e)=>this.fire(d.EVENT_ADD_BOOKMARK,t))),this.bubble(this.userBookmarkItemMenuView,d.EVENT_DELETE_BOOKMARK),this.bubble(this.userBookmarkItemMenuView,d.EVENT_DELETE_BOOKMARK_BY_LOCATION_ID);const e=t.querySelector(".js-date-page-bookmark-editor");if(e)if((0,o.isMobile)()){const t=e.querySelector(".js-bookmark-modal");this.editorView=new c.ModalBookmarkEditorView(t,!1,!0,a.BookmarkStatus.Private)}else{const t=e.querySelector(".js-user-bookmark-edit");this.editorView=new l.BookmarkEditorView({element:t,doesCompleteTags:!0,showRecommendedTagList:!1,showRecommendedTagListByDefault:!1,showExternalServiceShareButton:!0,defaultVisibility:a.BookmarkStatus.Private})}this.bubble(this.editorView,d.EVENT_ADD_BOOKMARK),this.editorView.on("bookmark_panel:shortcut_submit",(),this.editorView.on("cancel_button:clicked",this.onClickCancelButton),this.setupEditor(),this.editButton.addEventListener("click",this.onClickEditButton)}getUrl(){const t=this.innerCommentContainer.querySelector(".js-user-bookmark-comment"),e=null==t?void 0:t.dataset.url;return e||null}showGuide(){this.guideContainer.classList.remove("is-hidden"),this.commentContainer.classList.add("is-hidden"),this.editorView.hide()}showComment(){this.guideContainer.classList.add("is-hidden"),this.commentContainer.classList.remove("is-hidden"),this.editorView.hide()}showEditor(){(0,o.isMobile)()||this.guideContainer.classList.add("is-hidden"),this.commentContainer.classList.add("is-hidden"),this.editorView.show()}setupEditor(){this.editorView.clear()}setShareConfig(t){this.editorView.setShareConfig(t)}renderComment(t,e,i){if(i){const i={anchor_path:(0,a.anchorPath)(t),author_name:e.name,comment:t.comment,comment_expanded:t.comment_expanded,created:(0,s.formatDateTime)(t.created,"YYYY/MM/DD"),editable:!0,is_public:"public"===t.status,location_id:t.locationId,tags:t.tags.map((t=>({label:t,escaped_label:encodeURIComponent(t)}))),url:t.url},n=r.Template.renderElement(this.commentTemplate,Object.assign(Object.assign({},i),(0,o.isMobile)()?this.extractEntryInfo():{}));this.innerCommentContainer.appendChild(n),this.showComment()}else this.userBookmarkItemMenuView.renderBookmark(t,`bookmark-${t.locationId}`)}extractEntryInfo(){const t=document.querySelector(".js-date-page-bookmark-editor"),e=t.querySelector(".entry-users").textContent,i=t.querySelector(".entry-info-domain"),r=i.querySelector("img").src,s=i.querySelector("a"),n=s.href,o=s.textContent;return{favicon_url:r,title:document.title,total_bookmarks_with_user_postfix:e,root_title:o,site_search_url:n}}remove(t){const e=this.innerCommentContainer.querySelector(`#${t}`);if(!e)return;const i=e.parentNode;this.userBookmarkItemMenuView.deleteEditor(t),i.parentNode.removeChild(i)}}e.DatePageBookmarkView=d,d.EVENT_ADD_BOOKMARK="bookmark:add_request",d.EVENT_DELETE_BOOKMARK="bookmark:delete",d.EVENT_DELETE_BOOKMARK_BY_LOCATION_ID="bookmark:delete-by-location-id"},3665:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeedDigestAutoLoaderView=void 0;const r=i(8160),s=i(3274),n=i(2704),o=i(6014);class a extends o.UserPageAutoloader{ppend(t){const e=t.map((t=>{const e=t.entry,i=t.reactions.map((t=>{const e=t.comment.tags.map((t=>({label:t,escaped_label:encodeURIComponent(t)}))),i="bookmark"===t.type?`/${t.user.name}/`:`https://twitter.com/${t.user.name}`,r="bookmark"===t.type?`/entry/${t.url.split("-").pop()}/comment/${t.user.name}`:t.url;return{author_name:t.user.name,profile_icon_url:t.user.profile_image_url,is_public:!0,anchor_url:t.url,top_page_path:i,tags:e,comment:t.comment.body,comment_expanded:(0,n.escapeHTML)(t.comment.body),comment_page_path:r,should_nofollow:this.considerNoFollow(t),created:(0,s.formatDateTime)(t.created_at,"YYYY/MM/DD"),badge_icon:`${t.type}-badge`,is_bookmark:"bookmark"===t.type}})),r=[],o=[];for(const t of i)t.comment&&r.length<2?r.push(t):o.push(t);return{url:e.url,has_image:!!e.image,favicon_url:e.faviconURL(),canonical_url:e.url,page_url:e.entryURL(),title:e.title,root_title:e.rootTitle(),total_bookmarks:e.total_bookmarks,total_bookmarks_with_user_postfix:e.total_bookmarks_with_user_postfix,image_url:e.image,url_query:`?url=${encodeURIComponent(e.root_url)}`,summary_with_keyword_links:(0,n.truncateText)(e.summary_with_keyword_links,190),top_commented_list:r,following_bookmarks:o}}));r.Template.renderArrayTo(this.itemTemplate,e,this.listArea)}setPager(t){r.Template.renderTo(this.pagerTemplate,{previous:t.previous,next:t.next,pages:t.pages},this.listArea)}considerNoFollow(t){return"bookmark"===t.type&&t.comment.body.length<20}}e.FeedDigestAutoLoaderView=a},4366:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowButtonView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.followButton=t.querySelector(".js-follow-button"),this.unfollowButton=t.querySelector(".js-unfollow-button"),this.author=t.getAttribute("data-author"),this.followButton.addEventListener("click",(()=>{this.author&&this.fire("follow_button:follow",this.author)})),this.unfollowButton.addEventListener("click",(()=>{this.author&&this.fire("follow_button:unfollow",this.author)}))}etFollowing(){this.followButton.classList.add("is-hidden"),this.unfollowButton.classList.remove("is-hidden")}setUnfollowing(){this.unfollowButton.classList.add("is-hidden"),this.followButton.classList.remove("is-hidden")}}e.FollowButtonView=s},9742:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingBookmarkView=void 0;const r=i(2704);e.FollowingBookmarkView=class{constructor(t){this.onClickShowAllFollowingBookmarks=t=>{const e=(0,r.closest)(t.target,".js-user-bookmark-item"),i=e.querySelector(".js-user-following-bookmarks-icon"),s=e.querySelector(".js-user-following-bookmarks-detail");i.classList.add("is-hidden"),s.classList.remove("is-hidden")},this.container=t,this.container.addEventListener("click",(0,r.delegate)(".js-show-all-following-bookmarks",this.onClickShowAllFollowingBookmarks))}}},5993:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingFeedAutoLoaderView=void 0;const r=i(4998),s=i(1950),n=i(8160),o=i(3274),a=i(2704),l=i(6014);class c extends l.UserPageAutoloader{constructor(t,e){super(t,e),this.pagerArea=t.querySelector(".js-pager")}append(t){const e=this,i=t.map((t=>{function i(t){const i=t.comment.tags.map((t=>({label:t,escaped_label:encodeURIComponent(t)}))),n="bookmark"===t.type?s("/{user_name}/").expand({user_name:t.user.name}).toString():r("https://twitter.com/").path(t.user.name).toString(),l="bookmark"===t.type?s("/entry/{entry_number}/comment/{user_name}").expand({entry_number:t.url.split("-").pop(),user_name:t.user.name}).toString():t.url;return{author_name:t.user.name,profile_icon_url:t.user.profile_image_url,is_public:!0,anchor_url:t.url,top_page_path:n,tags:i,comment:t.comment.body,comment_expanded:(0,a.escapeHTML)(t.comment.body),comment_page_path:l,should_nofollow:e.considerNoFollow(t.comment.body),created:(0,o.formatDateTime)(t.created_at,"YYYY/MM/DD"),badge_icon:`${t.type}-badge`,is_bookmark:"bookmark"===t.type}}const n=t.entry,l=i(t.reaction),c=t.reactions.map(i),h=[l];t.ownBookmark&&h.unshift(i(t.ownBookmark));const d=[];for(const t of c)t.comment&&h.length<4?h.push(t):d.push(t);return{url:n.url,has_image:!!n.image,favicon_url:n.faviconURL(),canonical_url:n.url,page_url:n.entryURL(),title:n.title,root_title:n.rootTitle(),total_bookmarks:n.total_bookmarks,total_bookmarks_with_user_postfix:n.total_bookmarks_with_user_postfix,image_url:n.image,url_query:`?url=${encodeURIComponent(n.root_url)}`,summary_with_keyword_links:(0,a.truncateText)(n.summary_with_keyword_links,190),top_commented_list:h,following_bookmarks:d}}));n.Template.renderArrayTo(this.itemTemplate,i,this.listArea)}considerNoFollow(t){return t.length<20}}e.FollowingFeedAutoLoaderView=c},9110:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingUsersButtonView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t){super(),this.onClickFollowButton=t=>{const e=(0,s.closest)(t.target,".js-user-manage-btn");e.classList.add("is-in-progress");const i=e.dataset.userName;this.fire("follow_button:clicked",i)},this.onClickUnfollowButton=t=>{const e=(0,s.closest)(t.target,".js-user-manage-btn");e.classList.add("is-in-progress");const i=e.dataset.userName;this.fire("unfollow_button:clicked",i)},this.container=t,this.container.addEventListener("click",(0,s.delegate)(".js-follow-button",this.onClickFollowButton)),this.container.addEventListener("click",(0,s.delegate)(".js-unfollow-button",this.onClickUnfollowButton))}onCompleteUnfollowing(t){const e=this.container.querySelector(`.js-user-manage-btn[data-user-name="${t}"]`);e.classList.remove("is-in-progress"),e.classList.remove("is-active")}onCompleteFollowing(t){const e=this.container.querySelector(`.js-user-manage-btn[data-user-name="${t}"]`);e.classList.remove("is-in-progress"),e.classList.add("is-active")}}e.FollowingUsersButtonView=n},2185:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FollowingUsersListAutoLoaderView=void 0;const r=i(8160),s=i(2704),n=i(6014);class o extends n.UserPageAutoloader{constructor(t,e){super(t,e),this.pagerArea=t.querySelector(".js-pager"),this.notFound=t.querySelector(".js-user-bookmark-item-not-found")}append(t,e){const i=t.map((t=>{const i=e[t.name],r=i?i.frequent_tags:[];return{name:t.name,following:t.following,tags:r.map((t=>t.tag)),icon_url:(0,s.profileImageURL)(t.name)}}));r.Template.renderArrayTo(this.itemTemplate,i,this.listArea)}showNotFound(){this.notFound&&this.notFound.classList.remove("is-hidden")}}e.FollowingUsersListAutoLoaderView=o},5208:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreUsersButtonView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t){super(),this.onClickIgnoreButton=t=>{const e=(0,s.closest)(t.target,".js-user-manage-btn");e.classList.add("is-in-progress");const i=e.dataset.userName;this.fire("ignore_button:clicked",i)},this.onClickUnignoreButton=t=>{const e=(0,s.closest)(t.target,".js-user-manage-btn");e.classList.add("is-in-progress");const i=e.dataset.userName;this.fire("unignore_button:clicked",i)},this.container=t,this.container.addEventListener("click",(0,s.delegate)(".js-user-manage-btn-ignore",this.onClickIgnoreButton)),this.container.addEventListener("click",(0,s.delegate)(".js-user-manage-btn-unignore",this.onClickUnignoreButton))}onCompleteUnignored(t){const e=this.container.querySelector(`.js-user-manage-btn[data-user-name="${t}"]`);e.classList.remove("is-in-progress"),e.classList.remove("is-active")}onCompleteIgnored(t){const e=this.container.querySelector(`.js-user-manage-btn[data-user-name="${t}"]`);e.classList.remove("is-in-progress"),e.classList.add("is-active")}}e.IgnoreUsersButtonView=n},267:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreUsersListAutoLoaderView=void 0;const r=i(8160),s=i(2704),n=i(6014);class o extends n.UserPageAutoloader{constructor(t,e){super(t,e),this.pagerArea=t.querySelector(".js-pager"),this.notFound=t.querySelector(".js-user-bookmark-item-not-found")}append(t,e){const i=t.map((t=>{const i=e[t];return{name:t,tags:(i?i.frequent_tags:[]).map((t=>t.tag)),icon_url:(0,s.profileImageURL)(t)}}));r.Template.renderArrayTo(this.itemTemplate,i,this.listArea)}showNotFound(){this.notFound&&this.notFound.classList.remove("is-hidden")}}e.IgnoreUsersListAutoLoaderView=o},8009:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestTagTimelineAutoLoaderView=void 0;const r=i(8160),s=i(3274),n=i(2704),o=i(4269),a=i(960),l=i(6014);class c extends l.UserPageAutoloader{ppend(t,e){const i=t.map((t=>{const i=t.category?t.category:a.Category.uncategorized;let r=e[t.url];r||(r=[]);const l=r.map((e=>({author_name:e.user.name,comment:e.comment,comment_expanded:e.comment_expanded,tags:e.tags.map((t=>({label:t,escaped_label:encodeURIComponent(t)}))),profile_icon_url:e.user.image.image_url,comment_page_path:`/entry/${e.location_id}/comment/${e.user.name}`,should_nofollow:this.considerNoFollow(e.comment),anchor_url:(0,o.anchorPath)(e),top_page_path:`/${e.user.name}/`,created:(0,s.formatDateTime)(e.created,"YYYY/MM/DD"),is_public:!0,editable:!1,url:t.url,is_bookmark:!0})));return{url:t.url,has_image:null!==t.image,favicon_url:t.faviconURL(),canonical_url:t.url,page_url:t.entryURL(),title:(0,n.truncateText)(t.title,150),root_title:t.rootTitle(),total_bookmarks:t.total_bookmarks,total_bookmarks_with_user_postfix:t.total_bookmarks_with_user_postfix,image_url:t.image,url_query:`?url=${encodeURIComponent(t.root_url)}`,summary_with_keyword_links:(0,n.truncateText)(t.summary_with_keyword_links,200),is_categorized:i.is_categorized()?1:0,category_path:i.top_page_path,category_title:i.title,following_bookmarks:l,editable:!1}}));r.Template.renderArrayTo(this.itemTemplate,i,this.listArea)}considerNoFollow(t){return t.length<20}}e.InterestTagTimelineAutoLoaderView=c},2811:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InterestTagTimelineTopView=void 0;const r=i(8160),s=i(8642),n=i(960);class o extends s.Observable{constructor(t,e,i,r){super(),this.onClickShowMoreButton=t=>{this.fire("interest_tags:show_more")},this.timelinesContainer=t,this.showMoreButton=e,this.timelineTemplate=i,this.entryTemplate=r,this.showMoreButton.addEventListener("click",this.onClickShowMoreButton)}hideMoreButton(){this.showMoreButton.classList.add("is-hidden")}setLoadingetLoadedhowTimelines(t){for(let e in t){const i=t[e],s=r.Template.renderElement(this.timelineTemplate,{interest_tag:e,interest_tag_path:`/my/interest/${encodeURIComponent(e)}`}),n=s.querySelector(".js-interest-tag-timeline-container");this.setEntries(i,n),this.timelinesContainer.appendChild(s)}}setEntries(t,e){const i=t.map((t=>{const e=t.category?t.category:n.Category.uncategorized;return{has_image:null!==t.image,favicon_url:t.faviconURL(),canonical_url:t.url,page_url:t.entryURL(),title:t.title,root_title:t.rootTitle(),total_bookmarks:t.total_bookmarks,total_bookmarks_with_user_postfix:t.total_bookmarks_with_user_postfix,image_url:t.image,url_query:`?url=${encodeURIComponent(t.root_url)}`,summary_with_keyword_links:t.summary_with_keyword_links,is_categorized:e.is_categorized()?1:0,category_path:e.top_page_path,category_title:e.title,url:t.url}}));r.Template.renderArrayTo(this.entryTemplate,i,e)}}e.InterestTagTimelineTopView=o},7685:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBookmarkItemMenuView=void 0;const r=i(8642),s=i(2704),n=i(4269),o=i(8194),a=i(1449),l=i(4253),c=i(955);class h extends r.Observable{constructor(t,e=!0){super(),this.recommendedFrequentTags=[],this.intentShareComponentViewDict={},this.editorViewDict={},this.onClickOpenEditorButton=t=>{const e=(0,s.closest)(t.target,".js-user-bookmark-item"),i=e.querySelector(".js-user-bookmark-comment"),r=this.extractBookmarkComment(i),n=e.querySelector(".js-user-bookmark-id-container").getAttribute("id");let o=this.editorViewDict[n];if(!o){if((0,s.isMobile)()){const t=e.querySelector(".js-bookmark-modal");o=this.createModalBookmarkEditorView(n,t)}else{const t=e.querySelector(".js-user-bookmark-edit");o=this.createBookmarkEditorView(n,t)}this.editorViewDict[n]=o}o.setup(r),(0,s.isMobile)()||i.classList.add("is-hidden"),o.show(),o.focusToAnnotationBox()},this.onClickDeleteButton=t=>{const e=(0,s.closest)(t.target,".js-user-bookmark-item"),i=e.querySelector(".js-inplace-delete"),r=i.dataset.confirmMessage,n=i.dataset.url,o=i.dataset.locationId;if(confirm(r)){const t=e.querySelector(".js-user-bookmark-id-container").getAttribute("id");n?this.fire("bookmark:delete",n,t):this.fire("bookmark:delete-by-location-id",o,t)}},this.onClickCancelButton=t=>{const e=(0,s.closest)(t.target,".js-user-bookmark-item"),i=e.querySelector(".js-user-bookmark-id-container").getAttribute("id"),r=e.querySelector(".js-user-bookmark-comment"),n=this.editorViewDict[i];n&&r&&(n.hide(),n.clear(),r.classList.remove("is-hidden"))},this.container=t,this.showExternalServiceShareButton=e,this.container.addEventListener("click",(0,s.delegate)(".js-inplace-edit",this.onClickOpenEditorButton)),this.container.addEventListener("click",(0,s.delegate)(".js-inplace-delete",this.onClickDeleteButton))}initShareButtonAll(){this.container.querySelectorAll(".js-user-bookmark-item:not([share-btn-initialized]").forEach((t=>{const e=t.dataset.targetUrl;t.setAttribute("share-btn-initialized",""),e&&this.initShareButton(e)}))}setRecommendedTags(t){this.recommendedFrequentTags=t;Object.keys(this.editorViewDict).map(().forEach(()}extractBookmarkComment(t){const e=t.querySelector(".js-comment"),i=e.textContent?e.textContent:"",r=t.querySelector(".js-tag-text"),s=[];for(const t of r.children)t.textContent&&s.push(t.textContent);return{comment:i,tags:s,status:t.querySelector(".js-private-icon").classList.contains("is-hidden")?n.BookmarkStatus.Public:n.BookmarkStatus.Private}}createBookmarkEditorView(t,e){new a.TagCompletionView(e);const i=new o.BookmarkEditorView({element:e,doesCompleteTags:!0,showRecommendedTagList:!1,showRecommendedTagListByDefault:!1,showExternalServiceShareButton:this.showExternalServiceShareButton});return this.recommendedFrequentTags.length>0&&i.setFrequentTags(this.recommendedFrequentTags),i.on("bookmark_panel:shortcut_submit",(e=>{this.fire("bookmark:add",e,t)})),i.on("bookmark:add_request",(e=>{this.fire("bookmark:add",e,t)})),i.on("cancel_button:clicked",this.onClickCancelButton),i}createModalBookmarkEditorView(t,e){const i=new l.ModalBookmarkEditorView(e,!0,this.showExternalServiceShareButton);return this.recommendedFrequentTags.length>0&&i.setFrequentTags(this.recommendedFrequentTags),i.on("bookmark:add_request",(),i}renderBookmark(t,e){const i=this.container.querySelector(`#${e}`);if(!i)return;const r=t.tags.map((e=>`<li><a href="/${t.user.name}/${encodeURIComponent(e)}/">${(0,s.escapeHTML)(e)}</a></li>`)).join("\n");i.querySelector(".js-comment").innerHTML=t.comment_expanded,i.querySelector(".js-tag-text").innerHTML=r,"private"===t.status?i.querySelector(".js-private-icon").classList.remove("is-hidden"):i.querySelector(".js-private-icon").classList.add("is-hidden"),t.comment?i.querySelector(".js-comment-permalink").classList.remove("is-hidden"):i.querySelector(".js-comment-permalink").classList.add("is-hidden");const n=i.querySelector(".js-user-bookmark-comment"),o=this.editorViewDict[e];o&&n&&(o.hide(),n.classList.remove("is-hidden"))}emove(t){const e=this.container.querySelector(`#${t}`);if(!e)return;const i=e.parentNode;this.deleteEditor(t),i.parentNode.removeChild(i)}setShareText(t){var e;null===(e=this.intentShareComponentViewDict[t.bookmarkedURL])||void 0===e||e.setShareURLs(t)}initShareButton(t){const e=this.container.querySelector(`.js-user-bookmark-item[data-target-url="${t}"]`),i=null==e?void 0:e.querySelector(".js-intent-share-button"),r=null==e?void 0:e.querySelector(".js-intent-share-container"),s=null==e?void 0:e.querySelector(".js-intent-share-tooltip");if(i&&r){const e=Object.assign({intentShareButton:i,intentShareContainer:r},s?{hintTooltip:s}:{});this.intentShareComponentViewDict[t]=new c.IntentShareComponentView(e),this.bubble(this.intentShareComponentViewDict[t],c.IntentShareComponentView.EVENT_FOCUS_SHARE_BUTTON_WITHOUT_INIT_URL)}}}e.UserBookmarkItemMenuView=h},9012:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBookmarkStockListAutoLoaderView=void 0;const r=i(8160),s=i(960),n=i(6014);class o extends n.UserPageAutoloader{ppend(t){const e=t.map((t=>{const e=t.entry,i=t.entry.category?t.entry.category:s.Category.uncategorized;return{has_image:null!==e.image,favicon_url:e.faviconURL(),canonical_url:e.url,page_url:e.entryURL(),title:e.title,root_title:e.rootTitle(),total_bookmarks:e.total_bookmarks,total_bookmarks_with_user_postfix:e.total_bookmarks_with_user_postfix,image_url:e.image,url_query:`?url=${encodeURIComponent(e.root_url)}`,summary_with_keyword_links:e.summary_with_keyword_links,is_categorized:i.is_categorized()?1:0,category_path:i.top_page_path,category_title:i.title,url:t.url}}));r.Template.renderArrayTo(this.itemTemplate,e,this.listArea)}updatePager(t){if(null===this.pagerArea)return;const e=this.pagerArea.querySelector(".js-recent"),i=this.pagerArea.querySelector(".js-next");null===t?i.classList.add("is-hidden"):i.href="?cursor="+t,e.classList.remove("is-hidden")}}e.UserBookmarkStockListAutoLoaderView=o},6014:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserPageBookmarksAutoloader=e.UserPageAutoloader=e.AutoLoaderStatus=void 0;const r=i(8160),s=i(3274),n=i(8642),o=i(2704),a=i(4269),l=i(960);var c;!function(t){t[t.Ready=0]="Ready",t[t.Waiting=1]="Waiting",t[t.Terminated=2]="Terminated"}(c=e.AutoLoaderStatus||(e.AutoLoaderStatus={}));class h extends n.Observable{constructor(t,e){super(),this.status=c.Ready,this.onScroll=()=>{this.status===c.Ready&&window.innerHeight>=this.getListAreaBottomHeight()&&this.fire("user_auto_loader:reach_readmore")},this.container=t,this.itemTemplate=e,this.listArea=t.querySelector(".js-user-bookmark-item-list"),window.addEventListener("scroll",(0,o.throttle)(this.onScroll,50))}touch(){this.onScroll()}etLoadingFace(){if(this.status!==c.Ready)return;const t=this.container.querySelectorAll(".js-read-more-waiting"),e=t[t.length-1];e&&e.classList.remove("is-hidden"),this.status=c.Waiting}setReadyFace(){this.container.querySelectorAll(".js-read-more-waiting").forEach((t=>{t.classList.add("is-hidden")})),this.fire("user_auto_loader:ready"),this.status=c.Ready}terminate(){this.container.querySelectorAll(".js-read-more-waiting").forEach((),this.status=c.Terminated}}e.UserPageAutoloader=h;e.UserPageBookmarksAutoloader=class extends h{constructor(t,e,i){super(t,e),this.pagerTemplate=t.querySelector("#template-bookmark-pager"),this.editable=i}append(t,e){const i=t.map((t=>{const i=t.entry,r=t.entry.category?t.entry.category:l.Category.uncategorized;let n=e[t.url];n||(n=[]);const o=n.filter(().map((e=>({author_name:e.user.name,comment:e.comment,comment_expanded:e.comment_expanded,tags:e.tags.map((t=>({label:t,escaped_label:encodeURIComponent(t)}))),profile_icon_url:e.user.image.image_url,comment_page_path:`/entry/${e.location_id}/comment/${e.user.name}`,should_nofollow:this.considerNoFollow(e.comment),anchor_url:(0,a.anchorPath)(e),top_page_path:`/${e.user.name}/`,created:(0,s.formatDateTime)(e.created,"YYYY/MM/DD"),is_public:!0,editable:!1,url:t.url,it_bookmark:!0})));return{has_image:null!==i.image,favicon_url:i.faviconURL(),canonical_url:i.url,page_url:i.entryURL(),title:i.title,root_title:i.rootTitle(),total_bookmarks:i.total_bookmarks,total_bookmarks_with_user_postfix:i.total_bookmarks_with_user_postfix,image_url:i.image,url_query:`?url=${encodeURIComponent(i.root_url)}`,summary_with_keyword_links:i.summary_with_keyword_links,is_wiped:i.is_wiped,is_categorized:r.is_categorized()?1:0,category_path:r.top_page_path,category_title:r.title,locadion_id:t.locationId,author_name:t.user.name,profile_icon_url:t.user.image.image_url,top_page_path:`/${t.user.name}/`,location_id:t.locationId,is_public:"public"===t.status,anchor_url:(0,a.anchorPath)(t),tags:t.tags.map((t=>({label:t,escaped_label:encodeURIComponent(t)}))),comment:t.comment,comment_expanded:t.comment_expanded,comment_page_path:`/entry/${t.locationId}/comment/${t.user.name}`,should_nofollow:this.considerNoFollow(t.comment),created:(0,s.formatDateTime)(t.created,"YYYY/MM/DD"),url:t.url,is_bookmark:!0,following_bookmarks:o,editable:this.editable,noreferrer:"public"!==t.status}}));r.Template.renderArrayTo(this.itemTemplate,i,this.listArea)}etPager(t){r.Template.renderTo(this.pagerTemplate,{previous:t.previous,next:t.next,pages:t.pages},this.listArea)}}},2796:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkTagDeleteFormView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.form=t,this.tagInput=this.form.querySelector("input[name=tag]"),this.submitButton=this.form.querySelector("button[type=submit]"),this.updateSubmitButton(),this.registerEvents()}reset(){this.updateSubmitButton()}updateSubmitButton(){this.enableSubmitButton()}get tag(){return this.tagInput.value||null}enableSubmitButton(){this.submitButton.disabled=!1}disableSubmitButton(){this.submitButton.disabled=!0}registerEvents(){this.form.addEventListener("submit",(t=>{if(t.preventDefault(),null===this.tag)return;this.disableSubmitButton();const e={tag:this.tag};this.fire(s.EVENT_START_PROCESS,e)}))}}e.BulkTagDeleteFormView=s,s.EVENT_START_PROCESS="bulk_tag_process:delete_start"},2389:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkTagEditFormView=void 0;const r=i(8642),s=i(8083);class n extends r.Observable{constructor(t){super(),this.form=t,this.fromTagInput=this.form.querySelector("input[name=from_tag]"),this.toTagInput=this.form.querySelector("input[name=to_tag]"),this.submitButton=this.form.querySelector("button[type=submit]"),this.invalidTagAlert=this.form.querySelector(".js-invalid-tag-alert"),this.readLaterTagAlert=this.form.querySelector(".js-read-later-tag-alert"),this.updateSubmitButton(),this.registerEvents()}get fromTag(){return this.fromTagInput.value||null}dateSubmitButton(){this.toTag&&this.fromTag!==this.toTag&&!/\s+$/.test(this.toTag)&&(0,s.isValidTag)(this.toTag)?this.enableSubmitButton():this.disableSubmitButton()}updateInvalidTagAlert(){!this.toTag||/^\s*$/.test(this.toTag)||(0,s.isValidTag)(this.toTag.replace(/\s+$/,""))?this.hideInvalidTagAlert():this.showInvalidTagAlert()}showInvalidTagAlert(){this.invalidTagAlert.classList.remove("is-hidden")}hideInvalidTagAlert(){this.invalidTagAlert.classList.add("is-hidden")}updateReadLaterTagAlert(){const t=/^(?:\u3042\u3068|\u5f8c)\u3067\u8aad\u3080$/;this.fromTag&&t.test(this.fromTag)||this.toTag&&t.test(this.toTag)?this.showReadLaterTagAlert():this.hideReadLaterTagAlert()}showReadLaterTagAlert(){this.readLaterTagAlert.classList.remove("is-hidden")}hideReadLaterTagAlert(){this.readLaterTagAlert.classList.add("is-hidden")}enableSubmitButton(){this.submitButton.disabled=!1}disableSubmitButton(){this.submitButton.disabled=!0}registerEvents(){this.toTagInput.addEventListener("input",(),this.form.addEventListener("submit",(t=>{if(t.preventDefault(),null===this.fromTag||null===this.toTag)return;this.disableSubmitButton();const e={fromTag:this.fromTag,toTag:this.toTag};this.fire(n.EVENT_START_PROCESS,e)}))}}e.BulkTagEditFormView=n,n.EVENT_START_PROCESS="bulk_tag_process:edit_start"},8459:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkTagProcessButtonView=void 0;const r=i(8642);class s extends r.Observable{nable(){this.button.disabled=!1}ide(){this.button.classList.add("is-hidden")}egisterEvents(){this.button.addEventListener("click",(t=>{this.fire(s.EVENT_PROCESS_MODAL_OPEN)}))}}e.BulkTagProcessButtonView=s,s.EVENT_PROCESS_MODAL_OPEN="bulk_tag_process:modal_open"},170:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkTagProcessProgressView=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e){super(),this.from=null,this.to=null,this.progressMessage=t,this.abortButton=e,this.registerEvents()}get fromTag(){return this.from}get toTag(){return this.to}setup(t,e){this.from=t,this.to=e,this.updateMessage(s.DEFAULT_MESSAGE+"(0%)")}update(t){this.from=t.from_tag,this.to=t.to_tag;const e=Math.round(t.total_processed/t.total_bookmarks*99);this.updateMessage(s.DEFAULT_MESSAGE+`(${e}%)`)}reset(){this.from=null,this.to=null,this.updateMessage(s.DEFAULT_MESSAGE)}updateMessage(t){this.progressMessage.textContent=t}registerEvents(){this.abortButton.addEventListener("click",()}}e.BulkTagProcessProgressView=s,s.EVENT_ABORT="progress_view:abort",s.DEFAULT_MESSAGE="\u51e6\u7406\u3092\u5b9f\u884c\u4e2d\u3067\u3059"},6373:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkView=void 0;const r=i(4269),s=i(1614);class n extends s.UserConfigView{collectInput(){return{kind:"bookmark",bookmarkStatusOnStock:this.form.bookmark_status_on_stock.checked?r.BookmarkStatus.Private:r.BookmarkStatus.Public,removeReadlaterTagOnRead:this.form.remove_on_read.checked}}}e.BookmarkView=n},3916:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkDeletionButtonView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t){super(),this.onClickStartButton=t=>{const e=this.startButton().getAttribute("data-confirm-message");window.confirm(e)&&(this.disable(),this.fire("bulk_deletion_start_button:clicked"))},this.onClickAbortButton=this.container=t,this.container.addEventListener("click",(0,s.delegate)(".js-bulk-deletion-start-button",this.onClickStartButton)),this.container.addEventListener("click",(0,s.delegate)(".js-bulk-deletion-abort-button",this.onClickAbortButton))}startButton(){return this.container.querySelector(".js-bulk-deletion-start-button")}nable(){this.startButton().classList.remove("is-disabled"),this.abortButton().classList.remove("is-disabled")}disable(){this.startButton().classList.add("is-disabled"),this.abortButton().classList.add("is-disabled")}processing(){this.enable();const t=this.container.querySelector(".js-bulk-deletion-ready"),e=this.container.querySelector(".js-bulk-deletion-processing");t.classList.add("is-hidden"),e.classList.remove("is-hidden")}ready(){this.enable();const t=this.container.querySelector(".js-bulk-deletion-ready"),e=this.container.querySelector(".js-bulk-deletion-processing");t.classList.remove("is-hidden"),e.classList.add("is-hidden")}onStarted(){this.processing()}onAborted(){this.ready()}}e.BulkDeletionButtonView=n},3193:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BulkDeletionStatusView=void 0;e.BulkDeletionStatusView=class{constructor(t){this.container=t,this.update({started:"",total_processed:0,total_bookmarks:0})}update(t){const e=t.total_processed/(t.total_bookmarks||1);this.container.querySelector(".js-bulk-deletion-progress").textContent=Math.floor(e)+""}}},9334:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayView=void 0;const r=i(2163),s=i(1614);class n extends s.UserConfigView{collectInput(){return{kind:"display",urlClicksVisibility:"public"===this.form.querySelector('input[name="url_clicks_visibility"]:checked').value?r.UrlClicksVisibility.Public:r.UrlClicksVisibility.Private}}}e.DisplayView=n},8061:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotificationView=void 0;const r=i(2163),s=i(1614);class n extends s.UserConfigView{collectInput(){const t=[];this.form.sunday.checked&&t.push(r.DayOfWeek.Sunday),this.form.monday.checked&&t.push(r.DayOfWeek.Monday),this.form.tuesday.checked&&t.push(r.DayOfWeek.Tuesday),this.form.wednesday.checked&&t.push(r.DayOfWeek.Wednesday),this.form.thursday.checked&&t.push(r.DayOfWeek.Thursday),this.form.friday.checked&&t.push(r.DayOfWeek.Friday),this.form.saturday.checked&&t.push(r.DayOfWeek.Saturday);return{kind:"notification",daysOfWeek:t,hour:/^([0-9]|1[0-9]|2[0-3])$/.test(this.form.notification_hour.value)?Number(this.form.notification_hour.value):0}}}e.NotificationView=n},4074:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileView=void 0;const r=i(2163),s=i(1614);class n extends s.UserConfigView{collectInput(){return{kind:"profile",privacy:"public"===this.form.querySelector('input[name="status"]:checked').value?r.UserPrivacy.Public:r.UserPrivacy.Private}}}e.ProfileView=n},442:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TwitterShareView=void 0;const r=i(2163),s=i(1614);class n extends s.UserConfigView{collectInput(){return{kind:"twitter-share",checkboxDefaultState:this.form.checkbox_default_state.checked?r.CheckboxDefaultState.On:r.CheckboxDefaultState.Off,withTitle:this.form.with_title.checked,withTags:this.form.with_tags.checked,withTotalBookmarks:this.form.with_total_bookmarks.checked,withCommentListUrl:this.form.with_comment_list_url.checked}}}e.TwitterShareView=n},1614:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserConfigView=void 0;const r=i(8642);class s extends r.Observable{constructor(t,e){super(),this.onSubmit=t=>{t.preventDefault();const e=this.collectInput();this.fire("config:submit",e)},this.onClickCloseButton=this.form=t,this.notifyElem=e,this.form.addEventListener("submit",this.onSubmit),this.notifyContent=this.notifyElem.querySelector(".js-head-notify-content");this.notifyElem.querySelector(".js-head-notify-close-button").addEventListener("click",this.onClickCloseButton)}showCompleteNotification(t){this.notifyContent.textContent=t,this.notifyElem.classList.remove("is-hidden")}e.UserConfigView=s},230:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkContainerView=void 0;const r=i(3274),s=i(4269),n=i(8642),o=i(1153);class a extends n.Observable{constructor(t){var e,i,r;super(),this.containerElem=t,this.modalView=new o.ModalView(t.querySelector(".js-delete-modal")),null===(e=t.querySelector(".js-inplace-edit-button"))||void 0===e||e.addEventListener("click",(()=>this.fire("start_bookmark_edit"))),null===(i=t.querySelector(".js-inplace-delete-button"))||void 0===i||i.addEventListener("click",(()=>this.fire("open_delete_modal"))),null===(r=t.querySelector(".js-delete-submit-button"))||void 0===r||r.addEventListener("click",(()=>this.fire("bookmark:delete"))),this.timeStampElem=t.querySelector(".js-bookmark-container-timestamp"),this.commentElem=t.querySelector(".js-bookmark-container-comment"),this.tagsElem=t.querySelector(".js-bookmark-container-tags"),this.privateIconElem=t.querySelector(".js-private-icon")}setup(t){this.timeStampElem.textContent=(0,r.formatDateTime)(t.created,"YYYY/MM/DD HH:mm"),this.commentElem.innerHTML=t.comment_expanded;const e=document.createDocumentFragment();for(const i of t.tags){const r=document.createElement("li"),s=document.createElement("a");s.href=encodeURI(`/${t.user.name}/${i}/`),s.target="_blank",s.dataset.gtmLabel="entry-tags",s.textContent=i,r.appendChild(s),e.appendChild(r)}this.tagsElem.replaceChildren(e),t.status===s.BookmarkStatus.Public?this.privateIconElem.classList.add("is-hidden"):this.privateIconElem.classList.remove("is-hidden")}show(){this.containerElem.classList.remove("is-hidden")}hide(){this.containerElem.classList.add("is-hidden")}}e.BookmarkContainerView=a},3199:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkEditorView=void 0;const r=i(8642),s=i(430),n=i(4269),o=i(6167),a=i(561),l=i(4508),c=i(6644),h=i(2354),d=i(6351),u=i(3143),p=i(8930),m=i(3785);class f extends r.Observable{constructor(t,e=n.BookmarkStatus.Public){var i;super(),this.element=t,this.defaultVisibility=e,this.originalBookmark=null,this.toggleTag=t=>{this.annotationBoxView.toggleTag(t)},this.element=t,this.tagListView=new m.TagListView(t.querySelector(".js-bookmarkadd-tagList-contents")),this.tagAddTextBoxView=new p.TagAddTextboxView(t.querySelector(".js-bookmarkadd-tags-textbox")),this.tagAddButtonView=new u.TagAddButtonView(t.querySelector(".js-bookmarkadd-tags-btn"));const r=t.querySelector(".js-annotation-component"),s=t.querySelector(".js-buttons-container"),f=t.querySelector(".js-bookmarkadd-share-block");this.form=t.querySelector(".js-add-form"),this.annotationBoxView=new o.AnnotationBoxView(r,new o.BookmarkCommentCounterComponent(t.querySelector(".js-bookmarkadd-comment-count"),t.querySelector(".js-bookmarkadd-comment-limit")),!0),this.buttonsView=new l.SubmitAndCancelButtonView(s),f.classList.remove("is-hidden"),this.shareButtonsView=new d.ShareButtonsView(this.form),this.stockButtonView=new a.StockButtonView(this.form),this.visibilityButtonView=new c.VisibilityButtonView(this.form),e===n.BookmarkStatus.Private&&(this.visibilityButtonView.check(),null===(i=this.shareButtonsView)||void 0===i||i.onChangeBookmarkVisibilityToPrivate(!0)),this.errorMessageView=new h.ErrorMessageView(this.form)}show(){this.element.classList.remove("is-hidden")}hide(){this.element.classList.add("is-hidden")}etAnnotation(){return this.annotationBoxView.getAnnotation()}setShareConfig(t){this.shareButtonsView&&(this.shareButtonsView.setShareConfig(t),this.shareButtonsView.onChangeBookmarkVisibilityToPrivate(this.visibilityButtonView.isChecked()))}setup(t){if(null!==t){const e=new s.Annotation(t.comment,t.tags);this.annotationBoxView.setAnnotation(e.toString()),this.shareButtonsView&&this.shareButtonsView.bookmarked(!0),this.buttonsView.bookmarked(!0),"private"===t.status?this.visibilityButtonView.check():this.visibilityButtonView.uncheck(),this.stockButtonView.toggleByTags(t.tags)}this.originalBookmark=JSON.parse(JSON.stringify(t))}clear(){var t;null!==this.originalBookmark?this.setup(this.originalBookmark):(this.annotationBoxView.setAnnotation(""),this.shareButtonsView&&this.shareButtonsView.show(),this.shareButtonsView&&this.shareButtonsView.bookmarked(!1),this.buttonsView.bookmarked(!1),this.defaultVisibility===n.BookmarkStatus.Private?(this.visibilityButtonView.check(),null===(t=this.shareButtonsView)||void 0===t||t.onChangeBookmarkVisibilityToPrivate(!0)):this.visibilityButtonView.uncheck(),this.stockButtonView.uncheck(),this.tagListView.activeTags=[])}focusToAnnotationBox(){this.annotationBoxView.focus()}getInput(){const t=this.form.querySelectorAll("input"),e=this.form.querySelector("textarea");let i={};i=Array.from(t).reduce(((t,e)=>e.name?(("checkbox"!==e.type||e.checked&&!e.disabled)&&(t[e.name]=e.value),t):t),i);const r=new s.Annotation(e.value);return i[e.name]=r.toString(),i}setTags(t){this.tagListView.tags=t}renderTags(){this.tagListView.renderTags()}}e.BookmarkEditorView=f},6459:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BookmarkPanelView=void 0;const r=i(8642),s=i(230),n=i(3199),o=i(809);class a extends r.Observable{constructor(t){super(),this.showProgressIndicator=()=>{this.progressIndicatorView.show()},this.hideProgressIndicator=()=>{this.progressIndicatorView.hide()},this.onDelete=const e=t.querySelector(".js-bookmark-editor");this.editorView=new n.BookmarkEditorView(e);const i=t.querySelector(".js-bookmark-container");this.containerView=new s.BookmarkContainerView(i),this.containerView.on("bookmark:delete",this.onDelete),this.alertElem=t.querySelector(".js-bookmark-not-allowed-alert"),this.progressIndicatorView=new o.ProgressIndicatorView(t)}setTags(t){this.editorView.setTags(t)}setShareConfig(t){this.editorView.setShareConfig(t)}setup(t){this.editorView.setup(t),null!==t&&this.containerView.setup(t)}owUrlNotAllowedAlert(){this.alertElem.classList.remove("is-hidden")}}e.BookmarkPanelView=a},9836:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompletePanelView=void 0;e.CompletePanelView=class{ctivateShareButtons(){const t=document.querySelector(".js-webextension-complete-share-list");null==t||t.classList.remove("is-disabled")}injectGTMClickLabel(t){var e,i;null===(e=this.twitterAnchor)||void 0===e||e.setAttribute("data-gtm-click-label",`share-button-twitter-${t}ext`),null===(i=this.activityPubAnchor)||void 0===i||i.setAttribute("data-gtm-click-label",`share-button-mastodon-${t}ext`)}}},2354:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorMessageView=void 0;e.ErrorMessageView=class{constructor(t){this.errorPanel=t.querySelector(".js-bookmarkadd-error"),this.closeButton=t.querySelector(".js-bookmarkadd-error-close"),this.closeButton.addEventListener("click",(t=>{this.hide()}))}hide(){this.errorPanel.classList.add("is-hidden"),this.errorPanel.classList.remove("is-show")}show(){this.errorPanel.classList.remove("is-hidden"),this.errorPanel.classList.add("is-show")}}},809:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressIndicatorView=void 0;e.ProgressIndicatorView=class{how(){this.element.classList.add(this.indicatorClass)}},8921:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizablePanelView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.wrapper=t}getSize(){return{target:this.wrapper.dataset.sizeTarget,width:this.wrapper.clientWidth,height:this.wrapper.clientHeight}}}e.ResizablePanelView=s},6351:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.ShareButtonsView=void 0,i||(i={}));e.ShareButtonsView=class{constructor(t){this.onClickShareConfigCheck=t=>{this.shareConfig&&(this.shareConfig.shareEnabled||this.shareConfig.shareDisabledReason)},this.container=t;const e=t.querySelector(".js-bookmarkadd-share-label-twitter");this.twitterInput=e.querySelector("input"),this.twitterInput.disabled=!0,this.twitterHelpPost=t.querySelector(".js-bookmarkadd-share-notice"),this.shareNoticeCloseButton=t.querySelector(".js-bookmarkadd-notice-close"),e.addEventListener("click",(),this.shareNoticeCloseButton.addEventListener("click",()}setShareConfig(t){this.shareConfig=t,this.setDefaultDisabledValue(i.Twitter),this.twitterInput.checked=this.shareConfig.services[i.Twitter]}nChangeBookmarkVisibilityToPrivate(t){t?(this.twitterInput.checked=!1,this.disable(i.Twitter)):this.setDefaultDisabledValue(i.Twitter)}hide(){this.container.classList.add("is-hidden")}show(){this.container.classList.remove("is-hidden")}setDefaultDisabledValue(t){if(this.shareConfig&&t===i.Twitter){const t=this.shareConfig.shareEnabled;this.twitterInput.disabled=!t}}disable(t){this.shareConfig&&t===i.Twitter&&(this.twitterInput.disabled=!0)}},2571:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharingPanelView=void 0;const r=i(8642);class s extends r.Observable{constructor(){super(),this.EV_CHANGED_AUTO_REDIRECT="auto_redirect_changed",this.shareWithTwitterButtonAnchor=document.querySelector(".js-webextension-twitter-share"),this.whetherRedirectAutomaticallyCheckBox=document.querySelector(".js-webextension-automatic-redirect"),this.registerEvents()}ctivateShareWithTwitterButton(){this.shareWithTwitterButtonAnchor.classList.remove("is-disabled")}redirect(){this.shareWithTwitterButtonAnchor.click()}injectGTMClickLabel(t){this.shareWithTwitterButtonAnchor.setAttribute("data-gtm-click-label",`share-modal-twitter-${t}ext`),this.whetherRedirectAutomaticallyCheckBox.setAttribute("data-gtm-click-label",`share-checkbox-twitter-${t}ext`)}ireCheckBoxValuee.SharingPanelView=s},3143:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagAddButtonView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.tagAddButton=t,this.onTagAddButtonClicked=this.updateTagAddButtonLabel=t=>{this.tagAddButton.querySelector(".js-bookmarkadd-tags-btn-label").textContent=t},this.tagAddButton.addEventListener("click",this.onTagAddButtonClicked)}show(){this.tagAddButton.classList.remove("is-hidden")}.TagAddButtonView=s},8930:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagAddTextboxView=void 0;const r=i(8642);class s extends r.Observable{constructor(t){super(),this.tagAddTextbox=t,this.onKeyDownAddBox=t=>{if("Enter"===t.key){if(t.preventDefault(),t.isComposing)return;this.fire("tag_add_textbox:enter")}},this.onInputAddBox=t=>{this.fire("tag_add_textbox:value_updated",this.tagAddTextbox.value)},this.registerEvents()}.TagAddTextboxView=s},3785:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagListView=void 0;const r=i(8642),s=i(2704);class n extends r.Observable{constructor(t){super(),this.tagList=t,this._tags=[],this._activeTags=[],this._query="",this.displayedTags=[],this.onClickTag=this.tagList.addEventListener("click",(0,s.delegate)(".js-tag",())}set tags(t){this._tags=t,this.renderTags()}set query(t){this._query=t,this.renderTags()}set activeTags(t){this._activeTags=t,this.renderActiveTags()}enderTags(){this.tagList.style.visibility="collapse";const t=this.tagList.style.maxHeight;this.tagList.style.maxHeight="none",this.removeTagElems(),this.updateDisplayedTags(),this.tagList.prepend(this.createTagListFragment(this.displayedTags)),this.renderActiveTags(),this.tagList.style.maxHeight=t,this.tagList.style.visibility="visible"}updateDisplayedTags(){const t=""===this._query?this._tags:this._tags.filter((t=>t.substring(0,this._query.length).toLowerCase()===this._query.toLowerCase()&&!this._activeTags.includes(t)));let e=3,i=Math.max(t.length+1,40),r=[];for(;i-e>1;){const s=Math.floor((i+e)/2);r=t.slice(0,s),this.tagList.prepend(this.createTagListFragment(r)),this.tagList.clientHeight<=60?e=s:i=s,this.removeTagElems()}this.displayedTags=t.slice(0,e)}renderActiveTags(){this.tagList.querySelectorAll(".js-tag").forEach((t=>{t.classList.remove("is-selected"),this._activeTags.indexOf(t.textContent)>=0&&t.classList.add("is-selected")}))}createTagListFragment(t){const e=document.createDocumentFragment();return t.forEach((t=>{const i=document.createElement("li");i.classList.add("webextension-tagList-item"),i.classList.add("js-tag");const r=document.createElement("button");r.type="button",r.textContent=t,i.appendChild(r),e.appendChild(i)})),e}removeTagElems(){this.tagList.querySelectorAll(".js-tag").forEach(()}}e.TagListView=n},2251:6106:4998:function(t,e,i){var r,s,n;!0,(function(t,e,i,r){"use strict";var s=r&&r.URI;.version="1.19.11";var o=n.prototype,a=Object.prototype.hasOwnProperty;function l(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}=n.preventInvalidHostname=!1,n.duplicateQueryParameters=!1,n.escapeQuerySpace=!0,n.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,n.idn_expression=/[^a-z0-9\._-]/i,n.punycode_expression=/(xn--)/i,n.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,n.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},n.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,n.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},n.hostProtocols=["http","https"],n.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,n.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},n.getDomAttribute=n.encode=g,n.decode=decodeURIComponent,n.iso8859=function(){n.encode=escape,n.decode=unescape},n.unicode=n.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},n.encodeQuery=n.decodeQuery=var y,_={encode:"encode",decode:"decode"},v=for(y in _)n[y+"PathSegment"]=v("pathname",_[y]),n[y+"UrnPathSegment"]=v("urnpath",_[y]);var b=decodePath=b("/","decodePathSegment"),n.decodeUrnPath=b(":","decodeUrnPathSegment"),n.recodePath=b("/","encodePathSegment","decode"),n.recodeUrnPath=b(":","encodeUrnPathSegment","decode"),n.encodeReserved=v("reserved","encode"),n.parse=n.parseHost=n.parseAuthority=n.parseUserinfo=n.parseQuery=n.build=n.buildHost=n.buildAuthority=n.buildUserinfo=n.buildQuery=n.buildQueryParameter=n.addQuery=n.setQuery=n.removeQuery=n.hasQuery=n.joinPaths=n.commonPath=n.withinString=n.ensureValidHostname=n.ensureValidPort=n.noConflict=o.build=o.clone=o.valueOf=o.toString=o.protocol=w("protocol"),o.username=w("username"),o.password=w("password"),o.hostname=w("hostname"),o.port=w("port"),o.query=k("query","?"),o.fragment=k("fragment","#"),o.search=function(t,e){var i=this.query(t,e);return"string"==typeof i&&i.length?"?"+i:i},o.hash=o.pathname=o.path=o.pathname,o.href=o.is=var S=o.protocol,E=o.port,T=o.hostname;o.protocol=o.scheme=o.protocol,o.port=o.hostname=o.origin=o.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?n.buildHost(this._parts):"";if("/"!==n.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},o.authority=o.userinfo=o.resource=o.subdomain=o.domain=o.tld=o.directory=o.filename=o.suffix=o.segment=o.segmentCoded=var x=o.query;return o.query=o.setQuery=o.addQuery=o.removeQuery=o.hasQuery=o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.hasSearch=o.hasQuery,o.normalize=o.normalizeProtocol=o.normalizeHostname=o.normalizePort=o.normalizePath=o.normalizePathname=o.normalizePath,o.normalizeQuery=o.normalizeFragment=o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var t=n.encode,e=n.decode;n.encode=escape,n.decode=decodeURIComponent;try{this.normalize()}finally{n.encode=t,n.decode=e}return this},o.unicode=o.readable=o.absoluteTo=o.relativeTo=o.equals=o.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},o.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},o.escapeQuerySpace=n}))},1950:function(t,e,i){var r,s,n;!0,(function(t,e){"use strict";var i=e&&e.URITemplate,r=Object.prototype.hasOwnProperty;r o=s.prototype,a={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return s._cache={},s.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,s.VARIABLE_PATTERN=/^([^*:.](?:\.?[^*:.])*)((\*)|:(\d+))?$/,s.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_.]/,s.LITERAL_PATTERN=/[<>{}"`^| \\]/,s.expand=function(t,e,i){var r,n,o,l=a[t.operator],c=l.named?"Named":"Unnamed",h=t.variables,d=[];for(o=0;n=h[o];o++){if(0===(r=e.get(n.name)).type&&i&&i.strict)throw new Error('Missing expansion value for variable "'+n.name+'"');if(r.val.length){if(r.type>1&&n.maxlength)throw new Error('Invalid expression: Prefix modifier not applicable to variable "'+n.name+'"');d.push(s["expand"+c](r,l,n.explode,n.explode&&l.separator||",",n.maxlength,n.name))}else r.type&&d.push("")}return d.length?l.prefix+d.join(l.separator):""},s.expandNamed=function(e,i,r,s,n,o){var a,l,c,h="",d=i.encode,u=i.empty_name_separator,p=!e[d].length,m=2===e.type?"":t[d](o);for(l=0,c=e.val.length;l<c;l++)n?(a=t[d](e.val[l][1].substring(0,n)),2===e.type&&(m=t[d](e.val[l][0].substring(0,n)))):p?(a=t[d](e.val[l][1]),2===e.type?(m=t[d](e.val[l][0]),e[d].push([m,a])):e[d].push([void 0,a])):(a=e[d][l][1],2===e.type&&(m=e[d][l][0])),h&&(h+=s),r?h+=m+(u||a?"=":"")+a:(l||(h+=t[d](o)+(u||a?"=":"")),2===e.type&&(h+=m+","),h+=a);return h},s.expandUnnamed=function(e,i,r,s,n){var o,a,l,c="",h=i.encode,d=i.empty_name_separator,u=!e[h].length;for(a=0,l=e.val.length;a<l;a++)n?o=t[h](e.val[a][1].substring(0,n)):u?(o=t[h](e.val[a][1]),e[h].push([2===e.type?t[h](e.val[a][0]):void 0,o])):o=e[h][a][1],c&&(c+=s),2===e.type&&(c+=n?t[h](e.val[a][0].substring(0,n)):e[h][a][0],c+=r?d||o?"=":"":","),c+=o;return c},s.noConflict=o.expand=function(t,e){var i="";this.parts&&this.parts.length||this.parse(),t instanceof n||(t=new n(t));for(var r=0,o=this.parts.length;r<o;r++)i+="string"==typeof this.parts[r]?this.parts[r]:s.expand(this.parts[r],t,e);return i},o.parse=function(){var t,e,i,r=this.expression,n=s.EXPRESSION_PATTERN,o=s.VARIABLE_PATTERN,l=s.VARIABLE_NAME_PATTERN,c=s.LITERAL_PATTERN,h=[],d=0,u=function(t){if(t.match(c))throw new Error('Invalid Literal "'+t+'"');return t};for(n.lastIndex=0;;){if(null===(e=n.exec(r))){h.push(u(r.substring(d)));break}if(h.push(u(r.substring(d,e.index))),d=e.index+e[0].length,!a[e[1]])throw new Error('Unknown Operator "'+e[1]+'" in "'+e[0]+'"');if(!e[3])throw new Error('Unclosed Expression "'+e[0]+'"');for(var p=0,m=(t=e[2].split(",")).length;p<m;p++){if(null===(i=t[p].match(o)))throw new Error('Invalid Variable "'+t[p]+'" in "'+e[0]+'"');if(i[1].match(l))throw new Error('Invalid Variable Name "'+i[1]+'" in "'+e[0]+'"');t[p]={name:i[1],explode:!!i[3],maxlength:i[4]&&parseInt(i[4],10)}}if(!t.length)throw new Error('Expression Missing Variable(s) "'+e[0]+'"');h.push({expression:e[0],operator:e[1],variables:t})}return h.length||h.push(u(r)),this.parts=h,this},n.prototype.get=function(t){var e,i,s,n=this.data,o={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[t])return this.cache[t];if(this.cache[t]=o,null==(s="[object Function]"===String(Object.prototype.toString.call(n))?n(t):"[object Function]"===String(Object.prototype.toString.call(n[t]))?n[t](t):n[t]))return o;if("[object Array]"===String(Object.prototype.toString.call(s))){for(e=0,i=s.length;e<i;e++)void 0!==s[e]&&null!==s[e]&&o.val.push([void 0,String(s[e])]);o.val.length&&(o.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(s))){for(e in s)r.call(s,e)&&void 0!==s[e]&&null!==s[e]&&o.val.push([e,String(s[e])]);o.val.length&&(o.type=2)}else o.type=1,o.val.push([void 0,String(s)]);return o},t.expand=s}))},3132:7147:,__webpack_module_cache__={};_webpack_require__.amdO={},__webpack_require__.d=__webpack_require__.g=),__webpack_require__.hmd=__webpack_require__.o=__webpack_require__.r=__webpack_require__.nmd=var __webpack_exports__={};(()=>{"use strict";const t=__webpack_require__(1206),e=__webpack_require__(8747),i=__webpack_require__(71),r=__webpack_require__(194),s=__webpack_require__(7187),n=__webpack_require__(8341),o=__webpack_require__(2803),a=__webpack_require__(6659),l=__webpack_require__(6769),c=__webpack_require__(2523),h=__webpack_require__(8029),d=__webpack_require__(5863),u=__webpack_require__(5020),p=__webpack_require__(1485),m=__webpack_require__(6841),f=__webpack_require__(9274),g=__webpack_require__(8524),y=__webpack_require__(4685),_=__webpack_require__(7004),v=__webpack_require__(8587),b=__webpack_require__(5718),w=__webpack_require__(8987),k=__webpack_require__(6093),S=__webpack_require__(9622),E=__webpack_require__(3954),T=__webpack_require__(255),x=__webpack_require__(4351),C=__webpack_require__(81);function A(){const e=r.UserRepository.getInstance();new s.CommonUserEventController(e);const o=document.documentElement.getAttribute("data-page-scope")||"Default";i.dispatch(o),e.fetchMyProfile();const a=t.getParser(window.navigator.userAgent),l=document.querySelector("safari"===a.getBrowserName().toLowerCase()?".js-dynamic-link-app-banner-safari":".js-dynamic-link-app-banner");null!==l&&new n.DynamicLinkAppBannerController(new C.DynamicLinkAppBannerView(l))}(0,e.initSentry)(),i.connect("Campaign20th",a.init),i.connect("Default",l.init),i.connect("Entry",c.init),i.connect("EntryComment",h.init),i.connect("EntryList",p.init),i.connect("EntryNotfound",d.init),i.connect("Error",m.init),i.connect("EntrySearch",u.init),i.connect("GetStartedMyHotentry",f.init),i.connect("Guide",g.init),i.connect("MyAdd",y.init),i.connect("OperationPanel",_.init),i.connect("Top",v.init),i.connect("User",b.init),i.connect("UserConfig",w.init),i.connect("WebExtensionGuest",T.init),i.connect("WebExtensionBookmarkEditor",k.init),i.connect("WebExtensionComplete",S.init),i.connect("WebExtensionEntryComment",E.init),i.connect("WebExtensionSharing",x.init),i.connect("ActivityPubShare",o.init),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",A):A()})()})();