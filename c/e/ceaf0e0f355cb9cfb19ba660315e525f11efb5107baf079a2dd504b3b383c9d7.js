(function(){function s(e){this.conf=t(e,i),n(this)}var e=1,t=qboot.mix,n=qboot.createEvents,r=qboot.jsonp,i={jsonp:"_callback",threshold:6e5,timeout:3e4};s.prototype={addFilter:get:function(e,n){typeof e=="function"&&(n=e,e={});var i=t({params:e||{}},this.conf),s=n,o=this.conf.filter,u=this.conf.setup,a=this.conf.teardown,f=this;o&&s&&(s=function(e){e=o.call(f,e),n(e)}),t(i,{callback:s}),this.fire("setup",i)&&u&&u(i),this.fire("request",i)&&r(i.host,i.params,{jsonp:i.jsonp,timeout:i.timeout,threshold:i.threshold,cb:i.cb}),this.fire("teardown",i)&&a&&a(i)}},window.JsonpProvider=s})();(function(){function t(e,t,n,r){t instanceof AppData?this.appData=t:this.appData=new AppData(t,n,r),this.key=e}var e=qboot.mix;t.prototype={set:get:flush:function(){this.appData.remove(this.key)}},e(t,{NORMAL:0,FLUSH:1,QUITE:2}),window.DataCache=t})();(function(){.prototype={update:function(e,t,n,r){typeof e=="function"&&(r=n,n=t,t=e,e={});var i=this.provider,s=this.cache,o;s&&DataCache.FLUSH==n&&s.flush(),o=s&&s.get(),s&&DataCache.QUITE==n&&i.get(e,function(e){s.set(e,r)}),o==null?i.get(e,function(e){s&&s.set(e,r),t(e)}):t(o)}},window.DataAdapter=e})();(function(e){"use strict";{return unescape(encodeURIComponent(e))}function v(e){return c(d(e))}of define=="function"&&define.amd?define(function(){return b}):e.md5=b})(hao360);(function(){function a(r){u&&clearInterval(u),e(t,function(e){e||(e=(new Date).getTime()),i=(new Date(e)).getTime(),o=s=(new Date).getTime(),f(r),u=setInterval(function(){f(null)},n)})}function f(e){var t=(new Date).getTime();!o||Math.abs(t-o)>n*3?a(e):(o=t,Math.abs(i-s)>r&&(t=i-s+t)),e&&e(new Date(t))}var e=qboot.jsonp,t=HAO_CONFIG.timeSVC.host,n=6e4,r=3e5,i=null,s=null,o=null,u=null,l={getTime:f};window.TimeSVC=l})();/*!
 * artTemplate - Template Engine
 * https://github.com/aui/artTemplate
 * Released under the MIT, BSD, and GPL Licenses
 */!function(){nction T(e,t){unction k(e){var r=a;s?e=s(e,t):n&&(e=e.replace(/\n/g,);if(e.indexOf("=")===0){var i=u&&!/^=[=#]/.test(e);e=e.replace(/^=[=#]?|[\s;]*$/g,"");if(i){var o=e.replace(/\s*\([^\)]+\)/,"");!l[o]&&!/^(include|print)$/.test(o)&&(e="$escape("+e+")")}else e="$string("+e+")";e=p[1]+e+p[2]}return n&&(e="$line="+r+";"+e),d(S(e),function(e){if(!e||f[e])return;var t;e==="print"?t=m:e==="include"?t=g:l[e]?t="$utils."+e:c[e]?t="$helpers."+e:t="$data."+e,y+=e+"="+t+",",f[e]=!0}),e+"\n"}var n=t.debug,r=t.openTag,i=t.closeTag,s=t.parser,o=t.compress,u=t.escape,a=1,f={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},h="".trim,p=h?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=h?"$out+=text;return $out;":"$out.push(text);",m="function(){var text=''.concat.apply('',arguments);"+v+"}",g="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+v+"}",y="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(n?"$line=0,":""),b=p[0],w="return new String("+p[3]+");";d(e.split(r),function(e){e=e.split(i);var t=e[0],n=e[1];e.length===1?b+=C(t):(b+=k(t),n&&(b+=C(n)))});var E=y+b+w;n&&(E="try{"+E+"}catch(e){"+"throw {"+"filename:$filename,"+"name:'Render Error',"+"message:e.message,"+"line:$line,"+"source:"+x(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')"+"};"+"}");try{var T=new Function("$data","$filename",E);return T.prototype=l,T}catch(N){throw N.temp="function anonymous($data,$filename) {"+E+"}",N}}var e=function(e,t){return typeof t=="string"?p(t,{filename:e}):r(e,t)};e.version="3.0.0",e.config=function(e,n){t[e]=n};var t=e.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},n=e.cache={};e.render=var r=e.renderFile=e.get=function(e){var t;if(n[e])t=n[e];else if(typeof document=="object"){var r=document.getElementById(e);if(r){var i=(r.value||r.innerHTML).replace(/^\s*|\s*$/g,"");t=p(i,{filename:e})}}return t};var i=function(e,t){return typeof e!="string"&&(t=typeof e,t==="number"?e+="":t==="function"?e=i(e.call(e)):e=""),e},s={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},o=function(e){return s[e]},u=a=Array.isArray||f=function(e,t){var n,r;if(a(e))for(n=0,r=e.length;n<r;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},l=e.utils={$helpers:{},$include:r,$string:i,$escape:u,$each:f};e.helper=function(e,t){c[e]=t};var c=e.helpers=l.$helpers;e.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n"};var h=p=e.compile=function(e,r){=r||{};for(var i in t)r[i]===undefined&&(r[i]=t[i]);var s=r.filename;try{var o=T(e,r)}catch(u){return u.filename=s||"anonymous",u.name="Syntax Error",h(u)}return a.prototype=o.prototype,a.toString=s&&r.cache&&(n[s]=a),a},d=l.$each,v="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",m=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,g=/[^\w$]+/g,y=new RegExp(["\\b"+v.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),b=/^\d[^,]*|,\d[^,]*/g,w=/^,+|,+$/g,E=/^$|,+/;t.openTag="{{",t.closeTag="}}";var N=t.parser=function(t,n){t=t.replace(/^\s/,"");var r=t.split(" "),i=r.shift(),s=r.join(" ");switch(i){case"if":t="if("+s+"){";break;case"else":r.shift()==="if"?r=" if("+r.join(" ")+")":r="",t="}else"+r+"{";break;case"/if":t="}";break;case"each":var o=r[0]||"$data",u=r[1]||"as",a=r[2]||"$value",f=r[3]||"$index",l=a+","+f;u!=="as"&&(o="[]"),t="$each("+o+",function("+l+"){";break;case"/each":t="});";break;case"echo":t="print("+s+");";break;case"print":case"include":t=i+"("+r.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(s)){var c=!0;t.indexOf("#")===0&&(t=t.substr(1),c=!1);var h=0,p=t.split("|"),d=p.length,v=p[h++];for(;h<d;h++)v=N(v,p[h]);t=(c?"=":"=#")+v}else e.helpers[i]?t="=#"+i+"("+r.join(",")+");":t="="+t}return t},typeof define=="function"?define(function(){return e}):typeof exports!="undefined"?module.exports=e:this.template=e}();(function(){var e=STATIC_CONFIG.mysite.favicon+"?domain={domain}",t=function(e,t,n){this.name=e,this.url=t,this.id=n&&n.id,this.domain=n&&n.domain,this.type=n&&n.type;if(!t)return;this.init()};qboot.mix(t.prototype,{clearUrl:function(){var e=this.url,t=document.createElement("div");t.innerHTML=e.replace(/<[^>]*>/gi,""),e=t.childNodes[0]?t.childNodes[0].nodeValue||"":"",this.getUriData("protocol")||(e="http://"+e),this.getUriData("path")||(e+="/"),e=e.replace(/[\"\<\>\']/g,""),this.url=e;var n=this.name.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,""),r=document.createElement("pre"),i=document.createTextNode(n);r.appendChild(i),this.name=r.innerHTML},buildSid:function(){var e=this.url;try{e=decodeURI(e)}catch(t){}e=encodeURI(e),this.sid=hao360.md5(e)},getFavicon:function(){return e.replace("{domain}",this.domain||this.getUriData("domain"))},getUriData:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","domain","port","relative","path","directory","file","query","anchor"],r=t.exec(this.url||""),i={};for(var s=0,o=n.length;s<o;s++){var u=n[s];i[u]=r[s]||""}return e?i[e]:i},init:function(){this.clearUrl(),!this.domain&&(this.domain=this.getUriData("domain")),this.favicon=this.getFavicon(),this.buildSid(),this.status=""}}),qboot.mix(t,{getSid:function(e){return(new t("",e)).sid}}),window.SiteEnt=t})();(function(){var e=function(e,t,n){var r;if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},t=n=function(e){if(!e||!t(e))e=function(){};var n=this;return function(t,n){var r={errCode:t,res:n||null};e(r)}},r={map:{},order:[]};window.MysiteCacheData=r;var i=new AppData("api.hao.360.cn",HAO_CONFIG.mysite.r),s=function(){var e=[];for(var t=0,n=r.order.length;t<n;t++){var s=r.map[r.order[t]],o={id:s.id,name:s.name,url:s.url,domain:s.domain,type:s.type||0};e.push(o)}i.set(HAO_CONFIG.mysite.api,e)},o=function(e,t){t?r.order.unshift(e.sid):r.order.push(e.sid),r.map[e.sid]=e,s()},u=function(){s()},a=function(e){r.map[e.sid]=e,s()},f=function(){return i.get(HAO_CONFIG.mysite.api)||[]},l=!1,c=29,h={NoError:0,NameIsNull:1001,UrlIsNull:1002,NameLengthErr:1003,UrlLengthErr:1004,SiteIsExist:1005,SidIsNull:1006,SiteIsNotExist:1007},p=function(){var e=this;e.ERRORCODE=h,e.init=function(){if(l)return;var t=f();for(var n=0,r=t.length;n<r;n++){var i=t[n];e.add(new SiteEnt(i.name,i.url,{id:i.id||0,domain:i.domain,type:i.type}))}l=!0},e.init()},d=function(e,t,i){var s=e&&e.name,u=e&&e.url,a=qboot.mix({},e),f=new SiteEnt(s,u,a);i=n(i);if(!f.name){i(h.NameIsNull);return}if(!f.url){i(h.UrlIsNull);return}if(!f.sid){i(h.SidIsNull);return}if(r.map[f.sid]){i(h.SiteIsExist);return}if(f.name.length>36){i(h.NameLengthErr);return}if(f.url.length>247){i(h.UrlLengthErr);return}o(f,t),i&&i(h.NoError,f)};p.prototype.add=function(e,t){d(e,!1,t)},p.prototype.unshift=p.prototype.getOne=function(e,t){t=n(t);if(!e){t(h.SidIsNull);return}if(!r.map[e]){t(h.SiteIsNotExist);return}t&&t(h.NoError,r.map[e]);return},p.prototype.getAll=function(e){e=n(e);var t=[],i;for(var s=0,o=r.order.length;s<o;s++)i=r.map[r.order[s]]||null,i&&t.push(i);e&&e(h.NoError,t);return},p.prototype.remove=function(t,i){i=n(i);if(!t){i(h.SidIsNull);return}if(!r.map[t]){i(h.SiteIsNotExist);return}var s=r.map[t],o=e(t,r.order);s&&o>-1&&(delete r.map[t],r.order.splice(o,1)),u(),i&&i(h.NoError,s);return},p.prototype.modify=function(e,t,i){i=n(i);if(!e){i(h.SidIsNull);return}if(!r.map[e]){i(h.SiteIsNotExist);return}var s=r.map[e];s&&(t.name&&(s.name=t.name),t.url&&(s.url=t.url),t.id&&(s.id=t.id),t.type&&(s.type=t.type),a(s),i&&i(h.NoError,s));return},p.prototype.isSiteFull=function(){var e=r.order.length;return e>=c},p.siteCount=p.prototype.pushToMemory=p.prototype.log=function(){console.log(r)},window.MysiteCache=p})();(function(){var e=new MysiteCache,t=qboot.mix,n=qboot.when,r={getCustomSites:function(){var t=[],r=n.defer();return e.getAll(function(e){if(e.errCode=="0"){var t=e.res;r.resolve(t)}else r.reject()}),r.promise},getRecommendSites:function(e){var r=n.defer(),i=Bus.register({},t({jsonp:"_callback",filter:function(e){return e}},HAO_CONFIG.mysite)),s={key:e,ver:HAO_CONFIG.mysite.v};return i.request(s,function(e){e?r.resolve(e):r.reject()}),r.promise},getCommonUseSites:function(){var e=n.defer(),r=Bus.register({},t({jsonp:"_callback",filter:function(e){return e}},HAO_CONFIG.mysiteTweet)),i=hao360.queryUrl(location.href,"guid"),s="";!i||i&&i=="1"?s=qboot.cookie.get("__guid"):s=i;var o={guid:s,nm:5,ver:HAO_CONFIG.mysiteTweet.v};return r.request(o,,e.promise}};window.mysiteService=r})();(function(){var e=qboot.mix,t=qboot.jsonp,n={jsonp:"_callback",cluster:!1,cache:!1,storeObj:null,appData:"all"},r={_requests:{},_task:null,prepare:function(e){var t=this._requests;t[e.host]=t[e.host]||[],t[e.host].push(e);if(!this._task){var n=this;this._task=setTimeout(function(){n.send()})}},send:function(){var r=this._requests,i=[];for(var s in r){var o=r[s]||[],u=[],a={},f={};for(var l=0;l<o.length;l++){var c=o[l];u.push(c.api),c.api in f?i.push(c):(e(a,c.params,function(e,t){return e==null&&(e=[]),e instanceof Array||(e=[e]),e.concat([t])}),f[c.api]=c.callback)}u.length&&function(e,r,i){t(e,r,function(e){for(var t in i){var n=i[t];n&&e&&n(e[t])}},{jsonp:n.jsonp})}(s,a,f)}delete this._requests,this._requests={},clearTimeout(this._task),delete this._task;while(i.length)this.prepare(i.shift())}},i={register:function(t,i){if(i==null)throw new Error("call unknown api:"+apiconf);typeof i=="string"?i={host:i,api:arguments[2]}:i=e({},i),e(i,n);var s=new JsonpProvider(i);s.on("request",function(t){var n=t.params;t.api&&t.cluster&&e(t.params,{m:[t.api,t.v,t.r]}),t.cluster&&(r.prepare(t),t.preventDefault())});var o;i.cache&&(o=new DataCache(i.api,"api.hao.360.cn",i.r,i.storeObj));var u=new DataAdapter(s,o);return t.request=t.getApi=function(){return u},t.getCache=function(){return o},t.getDataProvider=t}};e(i,{CACHE_QUIET:DataCache.QUIET,CACHE_FLUSH:DataCache.FLUSH,CACHE_NORMAL:DataCache.NORMAL}),window.Bus=i})();(function(){ar e=qboot.mix,t=HAO_CONFIG.feedsConfig;e(n,{get:function(r,i,s,o,u){var a=t[r];a.cluster=!0,a.cache=!0,conf=e(a,s,!0);var r=new n(conf);r.expires=u||(new Date).getTime()+a.expires;var f=conf.params||{};r.get(f,i,o)}}),e(n.prototype,{get:function(e,t,n){this.request(e,t,n,this.expires)},init:),qboot.mix(n,t,function(e,t,r){return e?e:function(e){return function(){var t=Array.prototype.slice.call(arguments);return n.get.apply(null,[e].concat(t))}}(r)}),window.Feed=n})();(function(){function s(e,t,n,r,i){if(n.length===2&&parseInt(n[0])>parseInt(n[1])){var s=n[0];n[0]=n[1],n[1]=s}var o=[r||"\u98ce\u5411\u4e0d\u5b9a",i||"\u5fae\u98ce"].join("\uff1a");return{icoCode:e,weather:t.length!==1?t:"&nbsp;&nbsp;"+t,c:n.join("~"),wind:o}}var e=qboot.mix,t=HAO_CONFIG.weather,n={province:[],city:{},town:{}},r=!1,i=function(e){var n=e.params,r=n.code,i=n.grade;r=r||hao360.cityCode.get(),e.host=r||i?t.cnd_host:t.host,e.host+=i?t.area.path:t.weather.path,n.app="hao360"},o=["\u4f18","\u826f","\u8f7b\u5ea6\u6c61\u67d3","\u4e2d\u5ea6\u6c61\u67d3","\u91cd\u5ea6\u6c61\u67d3","\u4e25\u91cd\u6c61\u67d3"],u=[0,1,2,3,4,4,5,5,5,5];hao360.project==="cube"&&(o=["\u4f18","\u826f","\u8f7b\u5ea6","\u4e2d\u5ea6","\u91cd\u5ea6","\u4e25\u91cd"]);var a={getWeather:function(e,n,r){var o=Bus.register({},{jsonp:"_jsonp",setup:i,filter:function(e){if(!e||!e.area||!e.area[0])return{};var t=null,n={area:"\u5317\u4eac",weather:{today:{},tomorrow:{}},pm25:e.pm25},r=function(){return e.time?new Date(e.time*1e3):hao360.todayObj||new Date}(),i=r.getUTCFullYear(),o=r.getUTCMonth(),u=r.getUTCDate(),a=r.getUTCHours(),f=(a+8)%24,l=Date.UTC(i,o,u)+(a>=16?864e5:0),c=l+864e5;n.area=e.area,n.code=e.area[2][1];var h={prov:e.area[0][1],city:e.area[1][1],town:e.area[2][1]},p=!1,d=!1;for(var v=0,m=e.weather.length;v<m;v++){var g=e.weather[v],y=g.date.split("-"),b=Date.UTC(y[0],y[1]-1,y[2]);if(b==l||b==c){if(!g.info)return hao360.errMsg.push("weather no info. "+n.code),{};g.info.dawn||(g.info.dawn=["0","\u6674","0"],hao360.errMsg.push("weather no info dawn. "+n.code)),g.info.day||(g.info.day=["0","\u6674","0"],hao360.errMsg.push("weather no info day. "+n.code)),g.info.night||(g.info.night=["0","\u6674","0"],hao360.errMsg.push("weather no info night. "+n.code))}b==l&&(p=p||!0,f>=18?(n.weather.today=s(g.info.night[0],g.info.night[1],[g.info.night[2]],g.info.night[3],g.info.night[4]),t=c):f<6?(n.weather.today=s(g.info.dawn[0],g.info.dawn[1],[g.info.dawn[2],g.info.day[2]],g.info.dawn[3],g.info.dawn[4]),t=l+216e5):(n.weather.today=s(g.info.day[0],g.info.day[1],[g.info.day[2],g.info.night[2]],g.info.day[3],g.info.day[4]),t=l+648e5)),b==c&&(d=d||!0,n.weather.tomorrow=s(g.info.day[0],g.info.day[1],[g.info.day[2],g.info.night[2]]))}if(!p||!d)n=null;return{a:h,d:n,e:t}}}),u=function(n){var r=new AppData("api.hao.360.cn",t.weather.r);r.set(t.weather.api,n.d,Math.min(n.e,(new Date).getTime()+t.weather.expires)),a.setArea(n.a),e(n.d)},f=0,l=function(e){o.request({code:e,v:t.weather.v,param:"weather"},function(e){if((!e||!e.d)&&!f){l("101010100"),f=1;return}u(e)},r)};l(n)},getArea:function(e,t,r,s){e=e||"province";if(e!="province"&&r&&n[e][r]){t(n[e][r]);return}if(e=="province"&&n[e].length>0){t(n[e]);return}var o=Bus.register({},{jsonp:"_jsonp",setup:i});o.request({grade:e,code:r},t,s)},getPm25:function(e,n,r){var i=function(t){var n=null;if(t){var r=t.aqi[1].toString(),i=/^(\d{4})(\d{2})(\d{2})(\d{2})/.exec(r),s=(new Date(i[1],i[2]-1,i[3],i[4])).getTime(),a=t.aqi[0],f=Math.floor(Math.max(0,a-1)/50),l=typeof u[f]!="undefined"?u[f]:u[u.length-1]++,c=o[l]||o[o.length-1];if(+(new Date)-s<144e5)var n={code:t.area[1],level:c,step:l,pm25:a}}e(n)},s=(new AppData("api.hao.360.cn",t.weather.r)).get(t.weather.api);s&&s.pm25&&s.pm25.pm25&&s.pm25.pm25.length==2?i(s.pm25):a.getWeather(n,r)},getProvince:function(e,t){!r&&a.loadChinaArea(),setTimeout(r?0:100)},getCity:function(e,t,n){a.getArea("city",e,t,n)},getTown:loadChinaArea:function(){if(r)return;qboot.load("chinaAreaMap",function(){qboot.await(function(){var e,t,i,s;for(var o=0,u=chinaAreaMap.length;o<u;o++){e=chinaAreaMap[o][1],t=chinaAreaMap[o][0],n.city[e]=[];for(var a=0,f=chinaAreaMap[o][2].length;a<f;a++){i=chinaAreaMap[o][2][a][1],s=chinaAreaMap[o][2][a][0],n.town[i]=[];for(var l=0,c=chinaAreaMap[o][2][a][2].length;l<c;l++)townName=chinaAreaMap[o][2][a][2][l][0],townCode="101"+chinaAreaMap[o][2][a][2][l][1],n.town[i].push([townName,townCode]);n.city[e].push([s,i])}n.province.push([t,e])}r=!0},null,100,50)})},setCode:local:{},setArea:;window.Weather=a})();(function(){function e(e){var t=typeof e=="string"?document.getElementById(e):e;return t?(t.status=0|t.getAttribute("data-rstatus"),t.eid=e.replace(/\-(\w)/ig,,t):null}function o(e,n,i){var s=e.callback;if(typeof s=="function")s(n.eid,n,i);else{if(i==r)return;var o=s.func,u=s.argv;for(var a=0,f=u.length;a<f;a++)u[a]=="callback"&&(u[a]=function(e){i==t&&R(n).setData(e)}),u[a]=="status"&&(u[a]=i);typeof o=="function"&&(o=[o,window]),o[0].apply(o[1],u)}}var t=DataCache.FLUSH,n=DataCache.QUITE,r=DataCache.NORMAL,i=hao360.cityCode.get(),s={"weather-inner":{dataconf:HAO_CONFIG.weather.weather,callback:{func:Weather.getWeather,argv:["callback",i,"status"]}},"iguess-wrap":{callback:{func:window.IGuess&&IGuess.get,argv:["callback"]}}},u=(new Date).getTime();TimeSVC.getTime(function(e){var t=e.getTime(),n=new AppData("api.hao.360.cn");Math.abs(u-t)>3e5?(hao360.todayObj=e,n.set("timeOffset",u-t)):n.remove("timeOffset")}),setTimeout(function(){for(var i in s){if(!e(i))continue;var u=e(i),a=s[i];if(a.callback){var f=r;if(u.status!=R.STATUS_OK)f=t;else if(a.dataconf&&a.dataconf.quietUpdateTime){var l=(new Date).getTime(),c=new AppData("api.hao.360.cn",a.dataconf.r),h=c.getUpdatedTime(a.dataconf.api);h+a.dataconf.quietUpdateTime<l&&(f=n)}if(f==r)continue;(function(e,t,n){e.requires?qboot.load.apply(null,e.requires.concat():o(e,t,n)})(a,u,f)}}},20)})();(function(){function XPC(e){var t={isParent:parent==window,iframeName:"XPC_IFRAME"};this.options=mix(e||{},t,!1),this._initialize()}var JSON;JSON||(JSON={}),);var mix=function(e,t,n){n=n||function(t,n,r){return e[r]||r in e?t:n},n===!0&&(n=;for(var r in t)e[r]=n(e[r],t[r],r,e,t),e[r]===undefined&&delete e[r];return e},createEvents=function(e){var t={};return mix(e,{on:fire:function(n,r){r=r||{},mix(r,{type:n,target:e,preventDefault:);var i=t[n]||[];for(var s=0;s<i.length;s++)i[s](r);return r.returnValue!==!1}}),e},addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e.attachEvent("on"+t,function(){e["e"+t+n].call(e,window.event)}))},usePM=typeof window.postMessage!="undefined";mix(XPC.prototype,{_initialize:function(){function t(t){var n={};try{n=JSON.parse(t)}catch(r){}e.fire("message",n)}var e=this;createEvents(this);if(usePM)addEvent(window,"message",function(n){n.origin===e.options.origin&&t(n.data)});else{var n=window.name;setInterval(function(){window.name!=n&&window.name!=""&&(n=window.name,t(n))},50)}},send:function(e){var t=this.options,n=t.win||(t.isParent?window.frames[t.iframeName]:parent);if(!n)throw new Error("XPC","can not find window!");var r={data:e,ts:(+(new Date)).toString(36)};r=JSON.stringify(r),usePM?n.postMessage(r,t.origin):n.name=r}},!0),window.XPC=XPC})();(function e(){var t=QW.loadJs,n=window.LogHub,r=window.XPC,i="//s.ssl.qhimg.com/pkg/quc/qhuc1.1.js",s={origin:location.protocol+"//"+location.hostname,name:"login-proxy"},e=function(){var e,o=!1,u=!1,a=!1,f=new r({origin:s.origin||"*",iframeName:s.name}),l=qboot.createEvents({userInfo:null,getUserInfo:function(){v().then(},login:function(){v().then(function(){g(),f.send({action:"login"})},function(){window.open("//i.360.cn/login?src=pcw_socube&destUrl="+encodeURIComponent(location.href))})},fastLogin:signUp:function(){v().then(function(){window.open("//i.360.cn/reg?src=pcw_socube&destUrl="+encodeURIComponent(location.href))})},logout:function(){a=!0,window.QHUC?QHUC.signOut():f.send({action:"logout"})}}),c=h=function(){if(!qboot.cookie.get("Q")){l.fire("NoLog");return}l.getUserInfo()},p=function(){t(i,function(){if(!window.QHUC){h();return}QHUC.on("ready",function(e){l.fire("QHUCReady",e)}),QHUC.on("signOut",function(){a&&(l.userInfo=null,l.fire("Logout"),a=!1)}),QHUC.on("fastSignIn",function(e){e.err||l.fire("UserInfo",l.userInfo)}),c()})},d=function(t){if(u)return;u=!0;var n=document.getElementById("outer-extra"),r=document.createElement("iframe");r.src="./sync.html",r.id="login-proxy-iframe",r.name="login-proxy",r.scrolling="no",r.frameborder="0",r.style.height="100%",r.style.width="100%",r.attachEvent?r.attachEvent("onload",function(){u=!1,t&&t()}):r.onload=e=document.createElement("div"),e.id="login-mask",e.style.position="fixed",e.style.top=0,e.style.left="100%",e.style.width="100%",e.style.height="100%",e.appendChild(r),n.appendChild(e)},v=function(){var e=qboot.when.defer();if(o)e.resolve();else{var t=setTimeout(function(){e.reject()},1e3);l.on("QHPass:ready",,d()}return e.promise},m=function(){e.style.left="100%"},g=y=function(){var e={ready:userinfo:panelHide:nologin:logout:;return function(t){e[t.action].call(this,t.data)}}(),b=function(){l.on("QHUCReady",function(e){e.mid&&hao360.mid===""&&(new AppData("api.hao.360.cn")).set("mid",e.mid);if(e.qid){var t={qid:e.qid,nickname:e.nickName,username:e.userName,avatar:e.avatar};l.fire("UserInfo",t),e.isLogin||l.fire("FastReady",t)}else h()}),l.on("UserInfo",,f.on("message",,W(window).on("load",function(){!hao360.mid||!qboot.cookie.get("Q")?p():h()})};return b(),l};window.haoUser=e()})();var SoUtils={encp:function(e){var t=function(e){var t="";for(var n=0,r=e.length;n<r;n++)t+=("0000"+parseInt(e[n],16).toString(2)).substr(-4);return t},n=function(e,t){var n="";e=e.substr(t)+e.substr(0,t);if(/^\d{28}$/.test(e)){for(var r=0,i=e.length;r<i;r+=4)n+=parseInt(e.substr(r,4),2).toString(16);return n}return""},r="1",i="U@2@l1*e0=",s=+(new Date)-PAGE_START_TIME;s=s<0?0:s;var o=Math.floor(Math.log(s));o=(o>15?15:o).toString(16);var u="000";e=e||"000";var a=hao360.md5(u+e+o+i).substr(-2),f=parseInt(a.substr(-1),16);return r+a+n(t(u)+t(e)+t(o),f)}};window.SoUtils=SoUtils;(function(e){if(!e)return;var t=function(){var t=e.Browser,n=navigator.userAgent.toLowerCase(),r=n.match(/edge\/([0-9.]+)/),i=/(msie|trident)[ \/os]*([\d_.]+)/ig;r&&(t.edge=r[1]),n.replace(i,,!t.msie&&t.trident&&n.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/ig,;if(t.msie){t.ie=t.msie;var s=parseInt(t.msie,10);t["ie"+s]=!0}};t()})(QW);(function(){function n(){var e=window.document.referrer||"";return e.indexOf("pass")>-1||e.indexOf("pwd")>-1?"403":e}function i(e){var t=document.createElement("a");t.href=e;var n=t.search.toString();if(!/[?&](asc|asc2)=\w+/i.test(n))return e;var r=n.replace("?","").split("&"),i=["asc=","asc2=","mid=","m2="];for(var s=0,o=r.length;s<o;s++){var u=r[s];/^asc=.+/i.test(u)?i[0]=u:/^asc2=.+/i.test(u)?i[1]=u:/^(mid|__hmid)=.+/i.test(u)?i[2]=u:/^(m2|_m2|__m2)=.+/i.test(u)?i[3]=u:i.push(u)}return t.search="?"+i.join("&"),t.href.toString()}function H(e,t){var n={};if(t==="suggest-container"||t==="suggest-container-top"){e.getAttribute("href")||(logf=m("https://www.so.com/s"),n.logf=logf);var r=L()?"-top":"",i=e.getAttribute("data-label"),s=e.getAttribute("data-src");i&&A[i]&&(s==="suggest_history"?t=A[i]+"-his"+r:t=A[i]+r,n.contId=t)}return n}function B(t){t=t||event;var n=t.target||t.srcElement,i,s,o,u=0,a;for(var f=0,l;l=g[f++];)if(l.contains?l.contains(n):!!(l.compareDocumentPosition(n)&16)){s=l.id,L()&&O[l.id]&&(s=O[l.id]);break}if(/^(A|IMG)$/.test(n.tagName)){if(n.tagName=="IMG"){o=n;while(n=n.parentNode){if(u++>3)return;if(n.tagName=="A")break}}var c=H(n,s),h=c.logf||m(r(n));s=c.contId||s,a=n.getAttribute("text")||n.innerHTML,S(e+"/haoclk.gif?t="+ +(new Date)+"&u="+m(p)+"&f="+h+"&c="+m(o?o.src.match(/[^\/]+$/):a)+"&cId="+s+"&id="+y+"&guid="+b+"&b="+T())}else{if(n.tagName=="BUTTON"&&n.type=="submit"||n.tagName=="INPUT"&&n.type=="submit"){if(n.id=="searchBtn"||n.id=="search-btn")i=P?P.value:"";while(n=n.parentNode)if(n.tagName=="FORM"){n.id=="search-form"||n.id=="searchForm"?x("u="+m(p)+"&w="+m(i)+"&f="+m(n.action)+"&c=form:"+(n.name||n.id)+"&cId="+s+"&id="+y+"&guid="+b):x("u="+m(p)+"&f="+m(n.action)+"&c=form:"+(n.name||n.id)+"&cId="+s+"&id="+y+"&guid="+b);break}return}if(n.tagName=="AREA"){S(e+"/haoclk.gif?t="+ +(new Date)+"&u="+m(p)+"&f="+m(r(n))+"&c=area:"+m(n.parentNode.name)+"&cId="+s+"&id="+y+"&guid="+b+"&b="+T());return}u=0;while(n=n.parentNode){if(u++>3)return;if(n.tagName=="A"){var c=H(n,s),h=c.logf||m(r(n));s=c.contId||s,a=n.getAttribute("text")||n.innerHTML,S(e+"/haoclk.gif?t="+ +(new Date)+"&u="+m(p)+"&f="+h+"&c="+m(a)+"&cId="+s+"&id="+y+"&guid="+b+"&b="+T());break}}}}function j(e){e=arguments[0]||event;var t=e.target||e.srcElement,n,r;for(var i=0,s;s=g[i++];)if(s.contains?s.contains(t):!!(s.compareDocumentPosition(t)&16)){n=s.id,L()&&O[s.id]&&(n=O[s.id]);break}if(e.keyCode==13){if(t.id=="kw"||t.id=="search-kw"||t.id=="kw1")r=t.value;if(t.tagName=="INPUT")while(t=t.parentNode)if(t.tagName=="FORM"){t.id=="search-form"||t.id=="searchForm"?x("u="+m(p)+"&w="+m(r)+"&f="+m(t.action)+"&c=form:"+(t.name||t.id)+"&cId="+n+"&id="+y+"&guid="+b):x("u="+m(p)+"&f="+m(t.action)+"&c=form:"+(t.name||t.id)+"&cId="+n+"&id="+y+"&guid="+b);break}}}var e="http://haostat.qihoo.com";window.location.protocol.toLowerCase()=="https:"&&(e="https://s.360.cn/haostat"),window.logimgs={};var t=function(e){var t=new RegExp("(\\?|#|&)"+e+"=([^&#]*)(&|#|$)"),n=(document.location+"").match(t);return n?n[2]:""},r=function(e){try{return e.getAttribute("data-href")||e.href||""}catch(t){return""}},s=window,o=window.screen,u=document,a=u.cookie,f=n(),l=u.domain.toLowerCase(),c=navigator,h=c.userAgent.toLowerCase(),p=location.href.split("?")[0],d=t("ls"),v,m=encodeURIComponent,g=[],y,b,w,E={"360se-ua":"360se","360ee":"360ee",QQ:"qqbrowser",UC:"ubrowser",2345:"2345explorer",Sogou:"metasr",TheWorld:"theworld",Maxthon:"maxthon",Liebao:"lbbrowser",Edge:"edge",Maxthon:"maxthon",Baidu:"bidubrowser",Edg:"edg/",YiDian:" ed","TT/GreenBrowser":"tencenttraveler"},S=function(e){var t="log_"+(new Date).getTime(),n=window.logimgs[t]=new Image;n.onload=n.onerror=function(){window.logimgs[t]=null,delete window.logimgs[t]},d=window.lmls||d,d&&(e+="&ls="+d),window.custom_monitor&&(e+=custom_monitor),e=e.replace(/(password|pass|pwd)/i,"--"),e=i(e),n.src=e},x=function(){var t="";return function(n){if(n===t)return;t=n,S(e+"/haoclk.gif?t="+ +(new Date)+"&"+n+"&b="+T()),setTimeout(500)}}(),T=function(){if(window.hao360&&hao360.is360se){if(hao360.is360se())return"360se";if(hao360.is360se6())return"360se6";if(hao360.is360ee())return"360ee"}for(var e in E)if(h.indexOf(E[e])>-1)return e;var t=h.match(/(msie|chrome|safari|firefox|opera|trident)/);return t=t?t[0]:"",t=="msie"?t=h.match(/msie[^;]+/)+"":t=="trident"&&h.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/ig,,t},N=function(e){var t=0,n=0;for(var r=e.length-1;r>=0;r--){var i=parseInt(e.charCodeAt(r));t=(t<<6&268435455)+i+(i<<14),(n=t&266338304)!=0&&(t^=n>>21)}return t},C=function(){var e=[c.appName,c.version,c.language||c.browserLanguage,c.platform,c.userAgent,o.width,"x",o.height,o.colorDepth,n()].join(""),t=e.length,r=history.length;while(r>0)e+=r--^t++;return(Math.round(Math.random()*2147483647)^N(e))*2147483647},k=function(){var e=a.match(/count=(\d+)/),t=+M.get("count")||0;return t++,M.set("count",t,{expires:864e5}),t},L=A={history:"so-hotbox-his",business:"so-hotbox-ad",news:"so-hotbox-hot",suggest:"suggest-container",personal:"so-hotbox-per"},O={"search-frame":"search-frame-top","so-hotword":"so-hotword-top","so-hotword-action":"so-hotword-action-top","so-hotword-backup":"so-hotword-backup-top","suggest-container":"suggest-container-top"},M={getRaw:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie);return n?n[2]||null:null},get:function(e){var t=M.getRaw(e);return"string"==typeof t?(t=decodeURIComponent(t),t):null},setRaw:function(e,t,n){n=n||{};var r=n.expires;"number"==typeof n.expires&&(r=new Date,r.setTime(r.getTime()+n.expires)),document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(r?"; expires="+r.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")},set:remove:function(e,t){t=t||{},t.expires=new Date(0),M.setRaw(e,"",t)}};v=k(),y=M.get("sessionID"),w=M.get("__guid"),y||(y=[N(l),C(),+(new Date)+Math.random()+Math.random()].join("."),M.set("sessionID",y,{expires:864e5}));if(!w){b=M.get("guid"),b?(w=b,M.remove("guid")):w=[N(l),C(),+(new Date)+Math.random()+Math.random()].join(".");var _={expires:432e8,path:"/"},D="360.cn";hao360.host==="hao.360.com"&&(D="360.com");if(l.indexOf(D)>0&&l.lastIndexOf(D)==l.length-D.length||l===D)_.domain="."+D;M.set("__guid",w,_)}b=w,p=/\.(s?htm|php)/.test(p)?p:p.replace(/\/$/,"")+"/index.html";var P=u.getElementById("kw")||u.getElementById("search-kw")||u.getElementById("kw1");u.attachEvent?u.attachEvent("onclick",B):u.addEventListener("click",B,!1),u.attachEvent?u.attachEvent("onkeydown",j):u.addEventListener("keydown",j,!1),window.moniter={setUrl:getTrack:function(t){return S(e+"/haopv.gif?b="+T()+"&a="+(t===undefined?1:t)+"&u="+m(p)+"&id="+y+"&c="+v+"&r="+m(f)+"&t="+ +(new Date)),S(e+"/haouv.gif?b="+T()+"&a="+(t===undefined?1:t)+"&u="+m(p)+"&id="+b+"&c="+v+"&r="+m(f)+"&t="+ +(new Date)),this},setId:function(e){for(var t=0,n;n=e[t++];)n=document.getElementById(n),n&&g.push(n);return this},setIdBefore:function(e,t){var n=[],r;for(var i=0,s;s=e[i++];)s=document.getElementById(s),s&&n.push(s);for(var o=0;o<g.length;o++)if(g[o].id===t){r=o;break}return r&&g.splice.apply(g,[r,0].concat(n)),this},sendClklog:function(t,n,r){return S(e+"/haoclk.gif?t="+ +(new Date)+"&u="+m(p)+"&f="+m(n)+"&c="+m(t)+"&cId="+r+"&id="+y+"&guid="+b+"&b="+T()),this},updateCustomMonitor:function(e,t){if(typeof window.custom_monitor!="string")return;var n=window.custom_monitor,r=hao360.queryUrl(n),i="";e in r&&(r[e]=t);if(n[0]==="?"||n[0]==="&")i=n[0];return window.custom_monitor=i+qboot.encodeURIJson(r)},getBrowser:T}})();~function(){var e=QW.CustEvent.createEvents({Interface_RequestComplete:"Interface:RequestComplete"});window.CustomEventHub=e}();(function(){var e=function(e){this.init(e)};e.getInstance=function(t){return new AppData(e.prototype.defaultOptions.namespace,t)},e.prototype.constructor=e,e.prototype.defaultOptions={namespace:"api.hao.360.cn",key:"setStorage",maxlen:100,expire:31536e6},e.prototype.init=function(e){this.options=qboot.mix(e||{},this.defaultOptions),this.maxlen=this.options.maxlen,this.expire=this.options.expire,this.key=this.options.key,this.namespace=this.options.namespace,this.appData=new AppData(this.namespace)},e.prototype.add=function(e){var t=this.get(),n=QW.ArrayH.indexOf(t,e);n>-1&&t.splice(n,1),t.unshift(e),t.length>this.maxlen&&t.pop(),this.save(t)},e.prototype.del=function(e,t){var n=this.get();for(var r=0,i=n.length;r<i;r++)if(e==n[r]||t&&e==n[r][t]){n.splice(r,1);break}this.save(n)},e.prototype.get=function(e,t){var n=this.appData.get(this.key,t)||[];return n.slice(0,e||n.length)},e.prototype.save=function(e){this.appData.set(this.key,e,+(new Date)+this.expire)},e.prototype.clean=var t=function(e){this.init(e)};t.getInstance=function(e){return new AppData(t.prototype.defaultOptions.namespace,e)},t.prototype.constructor=t,t.prototype.defaultOptions={namespace:"api.hao.360.cn",key:"mapStorage",maxlen:100,expire:31536e6},t.prototype.init=function(e){this.options=qboot.mix(e||{},this.defaultOptions),this.maxlen=this.options.maxlen,this.expire=this.options.expire,this.key=this.options.key,this.namespace=this.options.namespace,this.appData=new AppData(this.namespace)},t.prototype.set=function(e,t){var n=this.appData.get(this.key);typeof n!="object"&&(n={}),n[e]=t,this.save(n)},t.prototype.getAll=function(e){return this.appData.get(this.key,e)||{}},t.prototype.get=function(e,t){return(this.appData.get(this.key,t)||{})[e]},t.prototype.remove=t.prototype.save=function(e){this.appData.set(this.key,e,+(new Date)+this.expire)},t.prototype.clean=window.MapStorage=t,window.SetStorage=e})();~function(){var e=function(e){this.init(e)};e.prototype.constructor=e,e.prototype.defaultOptions={namespace:"",host:"",cache:!0,cacheTime:6e5,timeout:3e4,jsonpName:"__callback",callbackName:"",baseParams:{}},e.prototype.apis={},e.prototype.init=function(e){var t=qboot.mix({},this.defaultOptions);this.options=qboot.mix(t,e||{},!0),this.baseParams=this.options.baseParams,this.namespace=this.options.namespace,this.host=this.options.host,this.adds(this.options.apiMap)},e.prototype.adds=function(e){var t=this;for(var n in e)t.add(n,e[n])},e.prototype.add=function(e,t){typeof t=="string"&&(t={url:t}),this.apis[e]=qboot.mix(t,this.options)},e.prototype.excute=function(e,t,n){typeof t=="function"&&(n=t,t={}),this.__request(e,t,n,this.apis[e])},e.prototype.getApi=function(e){var t=this.host||"",n=this.apis[e].api||"",r=this.apis[e].url||"";return r?r:n.indexOf(this.host)>-1?n:t+n},e.prototype.format=function(e,t){var n=qboot.mix({},this.baseParams,!0),r=qboot.mix({},this.apis[e].params||{},!0),i=qboot.mix(r,t||{},!0);return qboot.mix(n,i)},e.prototype.__request=function(e,t,n,r){var i=this.namespace,s=this.getApi(e),t=this.format(e,t),o=r.cache,u=r.cacheTime,a=r.timeout,f=r.jsonpName,l=r.callbackName,c=+(new Date),h;qboot.jsonp(s,t,function(r,o){h=+(new Date),CustomEventHub&&CustomEventHub.fire&&CustomEventHub.fire(CustomEventHub.Interface_RequestComplete,{data:{key:e,api:s,startMark:c,endMark:h,consume:h-c,params:t,timeout:a,jsonName:f,callbackName:l,response:r,status:o.status,reason:o.reason,namespace:i}}),n.apply(null,arguments)},{jsonp:f,cb:l,timeout:a,threshold:o?u:1})},window.Interface=e}();~function(){var e=function(e){this.init(e)};e.prototype.constructor=e,e.prototype.defaultOptions={},e.prototype.init=function(e){this.options=qboot.mix(e||{},this.defaultOptions),this.filters={},this.rules={},this.addFilters(this.options.filters),this.addRules(this.options.rules)},e.prototype.addFilters=function(e){var t=this;for(var n in e)t.addFilter(n,e[n])},e.prototype.addFilter=function(e,t){typeof t=="function"&&(this.filters[e]=t)},e.prototype.addRules=function(e){var t=this;for(var n in e)t.addRule(n,e[n])},e.prototype.addRule=function(e,t){var n=this;this.rules[e]=QW.ArrayH.reduce(t,function(e,t){return typeof t=="string"&&(t=n.filters[t]),typeof t!="function"&&(t=function(e){return e}),,},e.prototype.excute=function(e,t){var n=this.rules[e]||this.filters[e];return n?n(t):t},window.FilterHandler=e}();(function(){var e=STATIC_CONFIG.monitor.haoMonitor,t=document.createElement("a"),n=ObjectH.values(hao360.area.get()).join(),r={report:function(t,r){var i,s=qboot.mix,o=qboot.encodeURIJson,u=s({cc:n},r,!0),a={hao360:1,hao360i:8};if(a[t])u=s({appid:a[t]},u,!0),i=e+"stat.gif",f=i+"?"+o(u),logSender(f);else{i=e+(t||"unknow")+".gif";var f=i+"?"+o(u);logSender(f)}},reportJsError:function(e,t,n,i,s){return;var o},reportApiError:function(e){var t=.1;hao360.isHttps()&&(t=1);if(Math.random()>t)return;r.report("apierror",{apiurl:e,url:location.href})}};window.HaoMonit=r})();(function(){function r(e){return Object.prototype.toString.call(e)==="[object Object]"}function i(e){return Object.prototype.toString.call(e)==="[object Function]"}function s(e){qboot.jsonp("https://gw.dhrest.com/hao360com/user/attr",{m:hao360.mid,asc:hao360.asc},function(t){t&&t.errno===0&&t.data&&r(t.data)&&(n=t.data,e&&e())},{jsonp:"callback",timeout:5e3})}var e=!1,t=[],n=null;window.cidInfoV2={get:function(r,o){if(n){o&&o(n[r]);return}var u={};u[r]=o,t.push(u),e||(s(function(){t.forEach(function(e,t){var r=Object.keys(e)[0],s=e[r];s&&i(s)&&s(n[r])}),t=[]}),e=!0)}}})();(function(){function r(e){return Object.prototype.toString.call(e)==="[object Object]"}unction s(t){var i="https://papi.look.360.cn/user-feature",s={uid:hao360.mid||qboot.cookie.get("__guid")||qboot.cookie.get("__huid"),tags:["dul","dsc","ver","nad_mem"].join(","),f:"jsonp"},o=hao360.queryUrl(location.href,"__user_feature__");qboot.jsonp(i,s,function(i){i&&i.errno===0&&i.data&&r(i.data)?(o&&(i.data.dsc=o),n=i.data):e=!1,t&&t()},{jsonp:"callback",timeout:5e3,threshold:1e3})}function o(){e||(s(function(){t.forEach(function(e,t){if(r(e)&&n){var s=Object.keys(e)[0],o=e[s];return o&&i(o)&&n.dsc&&n.dsc===s&&o(n)}if(i(e))return e(n)}),t=[]}),e=!0)}var e=!1,t=[],n=null;window.userFeature={is:function(e,r){if(n){r&&n.dsc&&n.dsc===e&&r(n);return}var i={};i[e]=r,t.push(i),o()},getResult:function(e){if(n&&e)return e(n);t.push(e),o()}}})();(function(){function e(e){if(!Browser.ie&&qboot.cookie.get("page")===null){var t=VersionHub.is("v2023","to2023")||VersionHub.is("v2023","to2023_news")||VersionHub.is("v2023","to2023_merge");t?n(function(){e("edge")},64):window.userFeature&&userFeature.getResult(}}function t(e){e==="edge"&&n(function(){location.reload()},64)}function n(e,t){var n=Browser.chrome;if(typeof n=="string"&&!Browser.edge){var r=parseInt(n.split(".")[0],10);r>=t&&e()}}function r(){qboot.cookie.get("page")==="2023"&&LogHub.behavior("page","2023"),e(function(e){var n={edge:"news",shop:"mall",tour:"tour",game:"game"};e in n&&(qboot.cookie.set("page","2023",{expires:31536e6,secure:!0}),(new AppData("api.hao.360.cn")).set("page_category",n[e]),t(e))})}r()})();(function(){var e=QW.ObjectH.mix,t=QW.CustEvent,n=QW.DomU.g,r=QW.StringH.trim,i=t.createEvents({},[]),s={"*":[]};i.on("*",function(t){var n=t.type,r=t.sender,i=(s[n]||[]).concat(s["*"]);for(var o=0,u=i.length;o<u;o++){var a=i[o];e(t,{target:a.receiver,receiver:a.receiver,type:t.trueType},!0),a.callback.call(a.receiver,t)}});var o={tweet:function(e,t,n,s){var o=t.split(",");for(var u=0;u<o.length;u++){t=r(o[u]);var a={data:n,sender:e,trueType:t};i.createEvents([t]),i.fire(t,a)}QW.Async&&s&&QW.Async.wait("twitter."+t,function(){i.fire(t,a)})},receive:function(e,t,n){typeof t=="function"&&(n=t,t="@"+e.id);if(typeof t!="string")for(var r in t)o.receive(e,r,t[r]);var i=s[t]=s[t]||[];i.push({receiver:e,callback:n}),QW.Async&&QW.Async.signal("twitter."+t,!0)},unreceive:function(e,t){var n=s[t];for(var r=0;r<n.length;r++)n[r].receiver==e&&n.splice(r,1)}};QW.provide("TweetH",o)})();(function(){var e=QW.TweetH;QW.NodeW.pluginHelper(e,"operator")})();var Page=function(){function r(e,n,r){r=t({tabs:".tabview-tabs>*",conts:".tabview-cont",links:".tabview-cont a",event:"click",tabsOnClass:"on",contsOnClass:"on",playTime:25e3,delayTime:0},r,!0);var i=-1,s=[],o=0,u=null,a=function(t,u){if(i===t)return;clearTimeout(o),t=t!==undefined?t:(i+1)%s.length,QW.TweetH.tweet(document,"tabview-change",{channelName:W(r.conts,e).item(t).parentNode()[0].id.split("-")[1],prevTabIndex:i,currentTabIndex:t});var f=W(r.conts,e).item(t);f?(W(r.tabs,e).removeClass(r.tabsOnClass),W(r.tabs,e).item(t).addClass(r.tabsOnClass),W(r.conts,e).removeClass(r.contsOnClass),f.addClass(r.contsOnClass)):u&&window.open(W(r.tabs,e).item(t).query("a").attr("href")),i=t,n&&(o=setTimeout(a,r.playTime))};W(r.tabs,e).forEach(function(t,n){var t=W(t),i=W(r.conts,e).item(n),o=[];s[n]={tab:t,view:i},t.on(r.event,function(e){QW.TweetH.tweet(document,"tabview-"+r.event,{self:this}),W(this).hasClass(r.tabsOnClass)||(e.preventDefault(),a(n,!0),clearTimeout(u))})}),n?u=setTimeout(r.delayTime):a(0)}function i(){W(".tabview-tabs>li").hover(}unction a(){W(document).tweet("page-size-changed",{spaceWidth:u()})}var e={},t=ObjectH.mix,n=function(){var e="placeholder"in document.createElement("input"),t="placeholder";if(!e){var n=function(e){var n=W(e),r=n.attr("placeholder");n.val()==""&&r&&!e.__focused&&n.val(r).addClass(t)};W("input[placeholder]").attr("autocomplete","off").focus(function(){var e=W(this);this.__focused=!0,e.val()===e.attr("placeholder")&&e.hasClass(t)&&e.val("").removeClass(t).select()}).blur(,setTimeout(function(){W("input[placeholder]").forEach(function(e){W(e).val()===W(e).attr("placeholder")&&W(e).val(""),n(e)})},0),W("input[placeholder]").parentNode("form").submit(function(){W("input[placeholder]",W(this)).forEach(function(e){var r=W(e);r.val()===r.attr("placeholder")&&r.hasClass(t)&&(r.val("").removeClass(t),setTimeout(function(){n(e)},150))})})}var r=function(e){if(!(this instanceof r))return new r(e);this.elem=null,QW.DomU.isElement(e)&&(this.elem=e)};r.prototype.getVal=function(){return this.elem?!e&&W(this.elem).hasClass(t)?"":this.elem.value:""},r.prototype.setVal=function(r){this.elem&&(r=r||"",r==""&&!e?(this.elem.value="",this.elem!==this.elem.ownerDocument.activeElement&&n&&n(this.elem)):W(this.elem).val(r).removeClass(t))},window.placeholderHook=r},o=W("body"),u=function(){var e=W("#doc-main").getSize().width;return(o.getSize().width-e)/2};return e.spaceWidth=u,e.init=function(){n(),i();var e={tabview:r};QW.NodeW.pluginHelper(e,"operator"),W(window).on("resize",a).on("load",a),s()},e}();Page.init();(function(){if(!window.personalization)return;var e={$view:W("#doc-view-front"),init:function(){var e=this.getHTML();qboot.load.css(this.getCSS()),this.$container=W(e),this.$save=this.$container.query(".personalization-save"),this.$items=this.$container.query(".body-right"),this.currentData={},this.bindEvents()},bindEvents:function(){var e=this;e.$container.query(".icon-close").on("click",function(){personalization.hide()}),e.$container.query(".switch-btn-open").on("click",function(){var t=W(this).parentNode();W(this).addClass("active"),t.query(".switch-btn-close").removeClass("active"),t.attr("data-open","1"),e.checkChange()}),e.$container.query(".switch-btn-close").on("click",function(){var t=W(this).parentNode();W(this).addClass("active"),t.query(".switch-btn-open").removeClass("active"),t.attr("data-open","0"),e.checkChange()}),e.$save.on("click",function(){W(this).hasClass("disable")||(personalization.setData(e.currentData),window.location.reload())})},render:show:function(){this.$container.show()},hide:function(){this.$container.hide()},checkChange:function(){var e=this;e.$items.forEach(function(t){var n=W(t).attr("data-name"),r=W(t).attr("data-open");e.currentData[n]=r==="1"}),personalization.checkData(e.currentData)?e.$save.addClass("disable"):e.$save.removeClass("disable")},getCSS:function(){return["#personalization-container {width: 460px;border: 1px solid #E3E4E7;position: fixed;z-index: 400;background: #ffffff;left: 50%;margin-left: -230px;top: 256px;box-shadow: 0 4px 4px 0px rgba(0,0,0,.1);}","#personalization-container .personalization-header {font-size: 14px;margin: 0 10px;padding: 5px 0;border-bottom: 1px solid #E3E4E7;}","#personalization-container .icon {width: 14px;height: 14px;display: inline-block;}","#personalization-container .icon img {width: 100%;height: 100%;display: block;margin-top: 2px;}","#personalization-container .icon.icon-close {float: right;}","#personalization-container .icon.icon-close:hover {cursor: pointer;}","#personalization-container .icon.icon-close img {margin-top: 4px;}","#personalization-container .label {margin-left: 6px;}","#personalization-container .personalization-body ul {margin: 0 10px 20px;font-size: 14px;}","#personalization-container .personalization-body li {margin-top: 20px;padding-left: 20px;overflow: hidden;position: relative;}",'#personalization-container .personalization-body li::before {content: "";width: 5px;height: 5px;background: #E3E4E7;border-radius: 50%;position: absolute;left: 0;top: 8px;}',"#personalization-container .personalization-body .body-left {width: 336px;float: left;}","#personalization-container .personalization-body .body-left .des {font-size: 12px;color: #999999;}","#personalization-container .personalization-body .body-left a {color: #00C13C;}","#personalization-container .personalization-body .body-right {float: left;width: 80px;font-size: 12px;height: 20px;border: 1px solid #E3E4E7;border-radius: 4px;background: #f5f5f5;line-height: 20px;overflow: hidden;}","#personalization-container .personalization-body .body-right:hover {cursor: pointer;}","#personalization-container .personalization-body .body-right span {display: inline-block;width: 40px;text-align: center;}","#personalization-container .personalization-body .body-right span.active {background: #ffffff;color: #00C13C;}","#personalization-container .personalization-save {width: 200px;height: 36px;margin: 0 auto 20px;background: #00C13C;font-size: 14px;color: #ffffff;line-height: 36px;text-align: center;border-radius: 3px;}","#personalization-container .personalization-save:hover {cursor: pointer;}","#personalization-container .personalization-save.disable {background: #DDDDDD;}","#personalization-container .personalization-save.disable:hover {cursor: not-allowed;}"].join("")},getHTML:function(){function t(e,t){return e.map(.join("")}var e=[{name:"content",title:"\u4e2a\u6027\u5316\u5185\u5bb9\u63a8\u8350",des:"\u5173\u95ed\u540e\uff0c\u4f60\u770b\u5230\u7684\u5185\u5bb9\u76f8\u5173\u5ea6\u4f1a\u964d\u4f4e",link:"https://hao.360.com/personalize.html",open:personalization.getData("content")},{name:"ad",title:"\u4e2a\u6027\u5316\u5e7f\u544a\u63a8\u8350",des:"\u5173\u95ed\u540e\uff0c\u4f60\u770b\u5230\u7684\u5e7f\u544a\u76f8\u5173\u5ea6\u4f1a\u964d\u4f4e",link:"https://hao.360.com/personalize.html",open:personalization.getData("ad")}];return['<div id="personalization-container">','<div class="personalization-header">','<b class="icon"><img src="https://p1.ssl.qhimg.com/t01b686732123e95c99.png" /></b>','<span class="label">\u4e2a\u6027\u5316\u8bbe\u7f6e</span>','<b class="icon icon-close"><img src="https://p1.ssl.qhimg.com/t0103e848f440d010cd.png" /></b>',"</div>",'<div class="personalization-body">',"<ul>",t(e,["<li>",'<div class="body-left">','<p class="title">{title}</p>','<p class="des">{des} <a href="{link}">\u4e86\u89e3\u8be6\u60c5></a></p>',"</div>",'<div class="body-right" data-name="{name}" data-open="{open ? "1" : "0"}">','<span class="switch-btn switch-btn-open {open ? "active" : ""}">\u5f00\u542f</span>','<span class="switch-btn switch-btn-close {open ? "" : "active"}">\u5173\u95ed</span>',"</div>","</li>"]),"</ul>",'<div class="personalization-save disable">\u4fdd\u5b58\u8bbe\u7f6e\uff0c\u5e76\u5237\u65b0\u9875\u9762</div>',"</div>","</div>"].join("")}};window.personalization&&(window.personalization.initView(e),W("#js-personalization-btn").on("click",)})();~function(){var e=VersionHub.is("search","search_hotword")||VersionHub.is("search","input_hotword"),t=QW.ArrayH.reduce,n=QW.ArrayH.filter,r=QW.ArrayH.forEach,i=QW.ArrayH.map,s=QW.ArrayH.some,o=function(){var e=["","webkit-","Moz-","ms-","o-"];for(var t in e){var n=e[t]+"transform";if(n in document.documentElement.style)return!0}return!1}(),u=function(){var e={},t=0,n=["ms","moz","webkit","o"];for(var r=0;r<n.length&&!window.requestAnimationFrame;++r)e.requestAnimationFrame=window[n[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=window[n[r]+"CancelAnimationFrame"]||window[n[r]+"CancelRequestAnimationFrame"];return e.requestAnimationFrame||(e.requestAnimationFrame=,e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),e}(),a=function(e){if(e=="")return e;var t=0,n="",r=+(new Date),i="qiho3600com",s=Math.floor(Math.random()*15),o;while(t<2)n+=i.charAt(Math.floor(Math.random()*8)),t++;return o=e.substr(s,r.length),e=e.replace(o,r),e=n+e+o+"."+s,e},f=function(e){return/^ad_\d+$/.test(e)},l=c=function(){try{return configHuodong.hotword_tip}catch(e){return{}}}(),h=a(location.href.queryUrl("mid")||hao360.mid||""),p=location.href.queryUrl("percent")||20,d="a%&k*b",v=qboot.mix(CustomEventHub,{SoView_AllKwDelete:"SoView:AllKwDelete",SoView_ToggleBackupListState:"SoView:ToggleBackupListState",SoView_DeleteKw:"SoView:DeleteKw",SoView_ToggleToolboxState:"SoView:ToggleToolboxState",SoView_QuitEdit:"SoView:QuitEdit",SoView_Edit:"SoView:Edit",SoView_CloseClosePrompt:"SoView:HideClosePrompt",SoView_OpenClosePrompt:"SoView:ShowClosePromp",SoView_Close:"SoView:Close",SoView_Open:"SoView:Open",SoView_NeverRemind:"SoView:NeverRemind",SoView_ClickItem:"SoView:ClickItem",SoView_RenderComplete:"SoView:RenderComplete",SoModel_CheckForceRemind:"SoView:CheckForceRemind",SoModel_GetRecommendData_NoData:"SoModel:GetRecommendData:NoData",SoModel_GetRecommendData_Stop:"SoModel:GetRecommendData:Stop",SoModel_GetRecommendData_Normal:"SoModel:GetRecommendData:Normal",SoModel_GetRecommendData_AllDelete:"SoModel:GetRecommendData:AllDelete",SoSystem_NotRecommend:"SoSystem:NotRecommend",SoSystem_Recommend:"SoSystem:Recommend"}),m=function(){var e=qboot.cookie.get("__huid"),t=STATIC_CONFIG.soHotWord.log+"?{query}&huid="+e+"&_t={rand}",n={src:"hao",mid:h,cate:"query"},r={},i=function(){try{return performance.now()}catch(e){return+Date}},s=o=u=function(e){e=qboot.mix(e,{rand:+(new Date)+Math.random(),delay:100,query:""}),e.logUrl=e.logUrl||R.tmpl(t,e),setTimeout(function(){var t="slog"+e.rand,n=window[t]=new Image;n.src=e.logUrl,n.onload=n.onerror=,e.delay)},a=function(e){u({query:qboot.encodeURIJson(qboot.mix(e,n))})},f=function(e,t,n){a({type:"delay",cate:"query",delay:e,status:t,reason:n})},l=function(e){a({type:"recommend",status:e})},c=function(e){a({type:"show-ad",kw:e})},p=d=function(e){(e||[]).forEach(function(e){if(!e)return;hao360.isHttps()&&(e=e.replace(/^http:/,"https:")),e&&u({logUrl:e+"&_r="+(new Date).getTime()})})},v=function(e,t,n,r){a({type:"show",count:e.length,kwlist:e.join("|"),queryAttrlist:t.join("|"),tstag:n,real:r})},m=g=function(e,t,n,r){a({type:"del",kw:e,wtype:t,queryAttr:n,tstag:r})},y=b=function(e){e&&(hao360.isHttps()&&(e=e.replace(/^http:/,"https:")),u({logUrl:e+"&_r="+(new Date).getTime()}))},w=function(e,t,n,r,i,s,o){a({type:"click",kw:e,wtype:t,area:n,from:r,queryAttr:i,eng:s,tstag:o})},E=function(){a({type:"showremind"})},S=function(){a({type:"noremind"})},x=function(){a({type:"open"})},T=function(){a({type:"close"})},N=function(){a({type:"expand"})},C=function(){a({type:"collapse"})},k=function(){a({type:"edit"})},L=A=function(e,t){typeof t=="string"&&(t={action:t}),t.type=e,a(t)},O=function(e,t){t=t||"consume";switch(e){case"start":r[t]=i();break;case"stop":var n=r[t],s=r[t]=i(),o=s-n;a({type:"timer",consume:o})}};return{broadcast:s,setBase:o,monitor:a,recommend:l,success:f,showAd:c,showAds:p,showAdUnions:d,show:v,delAd:m,del:g,clkAd:y,clkAdUnion:b,clk:w,remind:E,noRemind:S,open:x,close:T,expand:N,collapse:C,edit:k,quitEdit:L,behavior:A,timer:O}}(),g=function(){var e="remindHotword",t=n=r=i=function(e){if(parseInt(c.isOn)){var t=+hao360.todayObj,n=+(new Date(c.startTime)),i=+(new Date(c.endTime)),s=365-e/86400>c.days;if(n<t&&t<i&&s)return r(),!0}return!1};return{needRemind:t,closeRemind:n,openRemind:r,checkForceRemind:i}}(),y=function(e){this.init(e)},b=!0;y.hook=function(e){return function(){b&&arguments[1]&&arguments[1].length&&(b=!1,e&&e.apply(null,arguments))}},y.prototype.constructor=y,y.prototype.defaultOptions={},y.prototype.init=function(e){this.options=qboot.mix(e||{},this.defaultOptions),this.soNeverShowStorage=SetStorage.getInstance(),this.soSearchEngStorage=SetStorage.getInstance(HAO_CONFIG.search.r),this.soFRecDataStorage=new SetStorage(this.options.fRecDataStorage),this.soBRecDataStorage=new SetStorage(this.options.bRecDataStorage),this.soBlacklistStorage=new SetStorage(this.options.blacklistStorage),this.soInterface=new Interface(this.options.interface),this.soFilterHandler=new FilterHandler(this.options.filterHandler),this.soTipManage=g},y.prototype.openRemind=function(){this.soTipManage.openRemind()},y.prototype.closeRemind=function(){this.soTipManage.closeRemind()},y.prototype.needRemind=y.prototype.checkForceRemind=y.prototype.isRecommendUser=y.prototype.prepareParams=function(){var e=+(new Date);return{oa:hao360.md5(h+e+d),_t:e}},y.prototype.prepareDelKwParams=function(e,t){var n=+(new Date),r={del_kw:e,oa:hao360.md5(h+e+n+d),_t:n};return f(t)&&(r.tp="ad"),r},y.prototype.loadRecommendData=function(e){var t=this,n=y.hook(e),r=this.soFRecDataStorage.get(),i=this.soBRecDataStorage.get();n(null,r,i),this.getRecommendData(function(e){if(!e){var r=t.soFRecDataStorage.get(0,!0),i=t.soBRecDataStorage.get(0,!0);n(null,r,i)}else n.apply(null,arguments)})},y.prototype.dumpRecommendData=function(e,t,n){this.soFRecDataStorage.save(t),this.soBRecDataStorage.save(n)},y.prototype.cleanRecommendData=y.prototype.getRecommendData=function(e){var t=this;this.soInterface.excute("getRecommendData",function(n){n?n.status&&n.status.data=="stopped"?(t.checkForceRemind(n.data.stime)&&v.fire(v.SoModel_CheckForceRemind),v.fire(v.SoModel_GetRecommendData_Stop)):(n.forEach(function(e,t){e.icon&&(n[t].icon=e.icon.clipImage({whq:"24_24_75",webp:!0}))}),t.filterRecommendData(n,function(r){r.length>0?(e.apply(t,arguments),v.fire(v.SoModel_GetRecommendData_Normal,{contentType:r.contentType,orginData:n,recData:arguments[0],fRecData:arguments[1],bRecData:arguments[2],kwlist:arguments[3],adKwlist:arguments[4],queryAttrlist:arguments[5],tstag:arguments[6]}),r.contentType==E.SoHotwordsType&&t.dumpRecommendData(r,arguments[1],arguments[2])):v.fire(v.SoModel_GetRecommendData_AllDelete)})):(v.fire(v.SoModel_GetRecommendData_NoData),e(!1))})},y.prototype.filterRecommendData=function(e,t){var n=this.soFilterHandler.excute("filterRecommendData",{blacklist:this.soBlacklistStorage.get(),recData:e});t.apply(this,[n,this.soFilterHandler.excute("formatFirstScreenData",n),this.soFilterHandler.excute("formatBackupScreenData",n),this.soFilterHandler.excute("filterRecommendDataToKwlist",n),this.soFilterHandler.excute("filterRecommendDataToAdKwlist",n),this.soFilterHandler.excute("filterRecommendDdataToQueryAttrlist",n),this.soFilterHandler.excute("filterRecommendDataTstag",n)])},y.prototype.deleteKw=function(e,t){var n=this.prepareDelKwParams(e,t);this.soInterface.excute("deleteKw",n,function(e){e&&e.status&&e.status.error==0}),this.soBlacklistStorage.add(e),this.soFRecDataStorage.del(e,"md5"),this.soBRecDataStorage.del(e,"md5"),this.deleteCacheItem(this.fRecCacheData,e),this.deleteCacheItem(this.bRecCacheData,e)},y.prototype.deleteCacheItem=function(e,t){if(e&&e.length>0)for(var n=0,r=e.length;n<r;n++)if(e[n].kw===t){e.splice(n,1);break}},y.prototype.close=function(){var e=this.prepareParams();this.isRecommendUser()&&this.soInterface.excute("close",e,function(e){e&&e.status&&e.status.error==0}),this.soNeverShowStorage.set("neverShow",!0),this.cleanRecommendData()},y.prototype.open=function(e){var t=this,n=this.prepareParams();this.isRecommendUser()?this.soInterface.excute("open",n,function(n){n&&n.status&&n.status.error==0&&e&&e.call(t,n)}):e&&e.call(this,null),this.soNeverShowStorage.set("neverShow",!1)},y.prototype.isLocalClose=y.prototype.getSearchEng=var w=function(e){this.init(e)};w.prototype.constructor=w,w.prototype.defaultOptions={itemTpl:'<li data-from="{from}" data-m="{md5}" data-t="{type}" data-href="{url}" data-queryattr="{query_attr}" class="{className}" data-clk="{clk}" data-asin="{asin}" data-tstag="{tstag}">                 <a class="item" href="{url}" target="_blank" title="{title}" data-src="{src}">{icon}<span>{kw}</span>{ellipsis}{attr}</a>                 <a href="javascript:void(0);" class="del" title="\u5220\u9664" text="del"></a>             </li>',fWrapTpl:(e?'<div class="list-overflow"><ul>{content}</ul></div>':"<ul>{content}</ul>")+'<a href="javascript:void(0);" data-state="expand" class="change"><i class="icon-hao360 down">&#xe903;</i><i class="icon-hao360 up">&#xe904;</i></a>',bWrapTpl:function(){var e=hao360.project==="cube"?'<span class="line line1"></span><span class="line line2"></span><span class="line line3"></span><span class="line line4"></span>':"";return"<ul>{content}</ul>"+e}(),rowHeight:20,container:document},w.prototype.init=function(t){this.options=qboot.mix(t||{},this.defaultOptions),this.rowHeight=this.options.rowHeight,this.fWrapTpl=this.options.fWrapTpl,this.bWrapTpl=this.options.bWrapTpl,this.itemTpl=this.options.itemTpl,this.searchWrap=this.options.searchWrap,this.$searchWrap=W(this.searchWrap),this.container=this.options.container,this.$container=W(this.container),this.soList=this.options.soList,this.$soList=this.$container.query(this.soList),this.firstScreenList=this.options.firstScreenList,this.$firstScreenList=this.$container.query(this.firstScreenList),this.backupList=this.options.backupList,this.$backupList=this.$container.query(this.backupList),this.changeBtn=this.options.changeBtn,this.toolbox=this.options.toolbox,this.$toolbox=this.$container.query(this.toolbox),this.toolboxPanel=this.options.toolboxPanel,this.$toolboxPanel=this.$toolbox.query(this.toolboxPanel),this.closePrompt=this.options.closePrompt,this.$closePrompt=this.$toolbox.query(this.closePrompt),this.stateBtn=this.options.stateBtn,this.$stateBtn=this.$toolbox.query(this.stateBtn),this.remindTip=this.options.remindTip,this.$remindTip=this.$container.query(this.remindTip),this.search=this.options.search,this.$search=this.$container.query(this.search),this.delBtn=this.options.delBtn,this.editBtn=this.options.editBtn,this.closeBtn=this.options.closeBtn,this.noshowBtn=this.options.noshowBtn,this.continueBtn=this.options.continueBtn,this.openBtn=this.options.openBtn,this.neverRemindBtn=this.options.neverRemindBtn,this.link=this.options.link,e&&this.$firstScreenList.addClass("hit-test"),this.bindEvt()},w.prototype.bindEvt=function(){var t=this,n=W(document),r=this.$container,i=this.$firstScreenList,s=this.$backupList,o=this.$toolbox,u=this.$remindTip,a=this.closePrompt,f=this.changeBtn,l=this.stateBtn,c=this.delBtn,h=this.editBtn,p=this.closeBtn,d=this.noshowBtn,m=this.continueBtn,g=this.openBtn,y=this.neverRemindBtn,b=this.link;n.on("click",function(e){var n=t.checkOuterAreaClick(e.target);n.stateEdit||n.isBackup||n.isFirst||t.collapse(),n.isAction||t.closeToolboxPanel()}),i.delegate(f,"click",function(e){t.preventDefault(e),v.fire(v.SoView_ToggleBackupListState,{state:W(this).attr("data-state"),adUnionList:t.getBackScreenAdUnionList()})}).delegate(c,"click",function(e){t.preventDefault(e),t.triggerDelete(W(this))}).delegate(b,"click",function(e){t.triggerClick(W(this))}),s.delegate(c,"click",function(e){t.preventDefault(e),t.triggerDelete(W(this))}).delegate(c,"mouseenter",function(e){t.preventDefault(e),W(this).parentNode(".so_hotwords").addClass("focus")}).delegate(c,"mouseleave",function(e){t.preventDefault(e),W(this).parentNode(".so_hotwords").removeClass("focus")}).delegate(b,"click",,o.delegate(l,"click",function(e){t.preventDefault(e),t.$stateBtn.hasClass("gear")?v.fire(v.SoView_ToggleToolboxState):v.fire(v.SoView_QuitEdit)}).delegate(h,"click",function(e){t.preventDefault(e),v.fire(v.SoView_Edit)}).delegate(d,"click",function(e){t.preventDefault(e),W(this).parentNode(a).length>0?v.fire(v.SoView_Close):v.fire(v.SoView_OpenClosePrompt)}).delegate(m,"click",function(e){t.preventDefault(e),v.fire(v.SoView_CloseClosePrompt)}).delegate(p,"click",function(e){t.preventDefault(e),v.fire(v.SoView_CloseClosePrompt)}),u.delegate(g,"click",function(e){t.preventDefault(e),v.fire(v.SoView_Open)}).delegate(y,"click",,e&&i.delegate("ul li a","mouseover",function(e){t.clearTimers()}).delegate("ul li a","mouseout",function(e){i.query("ul").hasClass("edit")||(t.mouseTimer=setTimeout(function(){t.animateLoop()},100))})},w.prototype.preventDefault=w.prototype.triggerDelete=function(e){var t=e.parentNode("li");v.fire(v.SoView_DeleteKw,{kw:t.attr("data-m"),from:t.attr("data-from"),wtype:t.attr("data-t"),queryAttr:t.attr("data-queryattr"),tstag:t.attr("data-tstag")||""})},w.prototype.triggerClick=function(e){var t=e.parentNode("li");v.fire(v.SoView_ClickItem,{kw:t.attr("data-m"),wtype:t.attr("data-t"),queryAttr:t.attr("data-queryattr"),from:t.attr("data-from")||"",asin:t.attr("data-asin")||"",clk:t.attr("data-clk")||"",area:t.hasClass("first")?"default":"expand",tstag:t.attr("data-tstag")||""}),this.updateHref(e)},w.prototype.updateHref=function(e){var t=SoUtils.encp(""),n=e.attr("href"),r=n.split("?")[0],i=n.indexOf("#")>-1?"#"+n.split("#")[1]:"",s=hao360.queryUrl(location.href,"ls"),o=hao360.queryUrl(n);o.cp=t,o.src&&!/^dlm_/.test(o.src)&&(o.src=(hao360.channel.lm?"dlm_":"")+o.src),s&&(o.ls=s),n=r+"?"+qboot.encodeURIJson(o)+i,e[0].href=n},w.prototype.toggleBackupListState=function(e){var t=this.$backupList,n=this.$firstScreenList,r=n.query(this.changeBtn);e=e||r.attr("data-state");switch(e){case"expand":t.css("visibility","visible"),r.attr("data-state","collapse").addClass("expand");break;case"collapse":t.css("visibility","hidden"),r.attr("data-state","expand").removeClass("expand")}},w.prototype.expand=function(){this.toggleBackupListState("expand")},w.prototype.collapse=function(){this.toggleBackupListState("collapse")},w.prototype.openRemind=function(){this.$remindTip.show()},w.prototype.closeRemind=function(){this.$remindTip.hide()},w.prototype.toggleToolboxState=function(e){var t=this.$toolboxPanel,n=this.$stateBtn;e=e||n.attr("data-state");switch(e){case"open":t.show(),n.attr("data-state","close");break;case"close":t.hide(),n.attr("data-state","open")}},w.prototype.openToolboxPanel=function(){this.toggleToolboxState("open")},w.prototype.closeToolboxPanel=w.prototype.edit=function(){this.$stateBtn.replaceClass("gear","reset"),this.$soList.query("li").addClass("hover"),this.$firstScreenList.query("ul").addClass("edit"),this.$firstScreenList.query(this.changeBtn).hide(),this.expand(),this.closeToolboxPanel()},w.prototype.quitEdit=function(){this.$stateBtn.replaceClass("reset","gear"),this.$soList.query("li").removeClass("hover"),this.$firstScreenList.query("ul").removeClass("edit"),this.$firstScreenList.query(this.changeBtn).show(),this.collapse()},w.prototype.openClosePrompt=function(){this.$closePrompt.show()},w.prototype.closeClosePrompt=w.prototype.checkOuterAreaClick=function(e){var t=W(e),n=this.toolbox,r=this.firstScreenList,i=this.backupList,s=t.parentNode(r).length||e.id==r.replace("#",""),o=t.parentNode(i).length||e.id==i.replace("#",""),u=t.parentNode(n).length||e.id==n.replace("#",""),a=this.$stateBtn.hasClass("reset");return{isFirst:s,isBackup:o,isAction:u,stateEdit:a}},w.prototype.closeBackupList=w.prototype.isNoBackupListKw=function(){return this.$backupList.getRect().height<=this.rowHeight},w.prototype.checkBackupListState=w.prototype.resetFirstScreenList=w.prototype.getFirstScreenRealShowCount=w.prototype.getItemWidth=function(e){var t=0,n=e[0];return n&&(t=n.offsetWidth||0),t+9},w.prototype.getLineWidth=function(){return this.$firstScreenList.query("ul").length&&this.$firstScreenList.query("ul").getRect().width-3},w.prototype.adjustPosition=function(){var t=this,n=this.resetFirstScreenList(),r=this.$backupList.query("li"),i=n.length,s=this.getLineWidth(),o=0,u=!0,a=10,f=0,l=0;e?(n.forEach(function(e,n){var r=W(e),i=r.hasClass("del-hidden"),s=i?0:t.getItemWidth(r);f<a?(i||(f++,r.addClass("first")),l+=s):r.addClass("fix-hidden"),r.attr("data-width",s)}).forEach(function(e,t){var n=W(e);n.hasClass("first")||n.hasClass("del-hidden")?r.item(t).addClass("del-hidden"):r.item(t).removeClass("del-hidden")}),t.$firstScreenList.query("ul").setSize(l+a)):n.forEach(function(e,n){var r=W(e),a=r.hasClass("del-hidden"),f=a?0:t.getItemWidth(r);o+f<s?(o+=f,a||r.addClass("first"),u=u&&a,n+1==i&&u&&v.fire(v.SoView_AllKwDelete)):r.addClass("fix-hidden")}).forEach(function(e,t){var n=W(e);n.hasClass("first")||n.hasClass("del-hidden")?r.item(t).addClass("del-hidden"):r.item(t).removeClass("del-hidden")})},w.prototype.deleteKw=w.prototype.deleteKwFrom=function(e,t){var n=-1;return e.query("li").forEach(function(e,r){var i=W(e);i.attr("data-m")==t&&(n=r,i.addClass("del-hidden"))}),n},w.prototype.isShow=w.prototype.close=function(){this.$container.removeAttr("status"),this.$closePrompt.hide(),this.$firstScreenList.hide(),this.$backupList.hide(),this.$toolbox.hide(),this.$search.addClass("so-hotword-hide"),this.$searchWrap.parentNode().addClass("sohotword-hide"),qboot.events.fire("sohotword:close")},w.prototype.show=function(){this.$container.attr("status","show"),this.$firstScreenList.show(),this.$backupList.show(),this.$toolbox.show(),this.$search.removeClass("so-hotword-hide"),this.$searchWrap.parentNode().removeClass("sohotword-hide")},w.prototype.buildFragement=function(e,t){var n=this;return R.tmpl(e,{content:i(t,function(e){return e.icon=hao360.isHttps()?hao360.convertHttpToHttps(e.icon):e.icon,e.kw=e.kw.encode4Html(),e.md5=e.md5.encode4Html(),e.title=e.title.encode4Html(),R.tmpl(n.itemTpl,e)}).join("")})},w.prototype.renderFirstScreenList=function(e){var t=this.buildFragement(this.fWrapTpl,e);this.$firstScreenList.html(t)},w.prototype.renderBackupList=function(e){var t=this.buildFragement(this.bWrapTpl,e);this.$backupList.html(t)},w.prototype.renderComplete=function(){var e=[],t=[];this.$firstScreenList.query("li.first").forEach(function(n){var r=W(n),i=r.attr("data-from"),s=r.attr("data-m"),o=r.attr("data-asin");f(i)&&e.push(s),l(i)&&t.push(o)}),v.fire(v.SoView_RenderComplete,{adKwlist:e,adUnionList:t})},w.prototype.getBackScreenAdUnionList=function(){var e=[];return this.$backupList.forEach(function(t){var n=W(t);!n.hasClass("del-hidden")&&l(n.attr("data-from"))&&e.push(n.attr("data-asin"))}),e},w.prototype.animate=function(){if(!e)return;var t=this,n=t.$firstScreenList.query("ul"),r=0,i,s,a=100,f=.5;t.animateLoop=function(){if(!t.isScrollList)return;t.timer=window.requestAnimationFrame?window.requestAnimationFrame(t.animateLoop):u.requestAnimationFrame(t.animateLoop),s=Date.now(),i||(i=s);if(s-i>1e3/a){i=s,n.setStyle(o?{transform:"translateX(-"+Math.floor(r)+"px)"}:{left:"-"+Math.floor(r)+"px",position:"absolute"}),r+=f;var e=W(n.query("li.first")[0]);r>e.attr("data-width")&&(n.appendChild(e.cloneNode(!0)),e.removeNode(),n.setStyle(o?{transform:"translateX(0px)"}:{left:"0px",position:"absolute"}),r=0)}},t.checkScrollList(),t.animateLoop()},w.prototype.clearTimers=function(){window.cancelAnimationFrame?window.cancelAnimationFrame(this.timer):u.cancelAnimationFrame(this.timer),clearTimeout(this.mouseTimer)},w.prototype.checkScrollList=function(){var e=this,t=e.$firstScreenList,n=e.$firstScreenList.query("ul");e.isScrollList=n.getRect().width>t.getRect().width};var E=function(e){this.init(e)};E.SoHotwordsType=1,E.SoSearchwordsType=2,E.CateDef={1:"so_hotwords",2:"so_searchwords"},E.prototype.constructor=E,E.prototype.defaultOptions={},E.prototype.init=function(e){this.options=qboot.mix(e||{},this.defaultOptions),this.model=new y({blacklistStorage:{key:"soHotwords-blacklist"},fRecDataStorage:{key:"soHotwords-fRecData",expire:144e5},bRecDataStorage:{key:"soHotwords-bRecData",expire:144e5},"interface":{host:STATIC_CONFIG.soHotWord.apiHost,baseParams:{mid:h,asc:hao360.asc||""},apiMap:{getRecommendData:{timeout:1e4,params:{src:1,guid:qboot.cookie.get("__huid")||"",req:"kw",secure:hao360.isHttps()?1:0,crec:function(){var e=window.personalization;return e?e.getData("content")?0:1:0}()}},deleteKw:{params:{action:"del",src:"del",oa:"",_t:"",del_kw:""}},close:{params:{action:"off",src:1,"switch":"off",oa:"",_t:""}},open:{params:{action:"reset",src:1,oa:"",_t:""}}}},filterHandler:{filters:{filterByBlacklist:function(e){var t=e.blacklist,n=e.recData,r=[];for(var i=0,s=n.length;i<s;i++){var o=n[i],u=!1;for(var a=0;a<t.length;a++){var f=t[a];if(o.kw==f){u=!0;break}}u||r.push(o)}return r},limitLen:function(e){return function(t){return(t||[]).splice(0,e)}}(30),formatSrc:function(e){e.src="hao_isearch2";var t="";return hao360.project==="cube"&&(t=hao360.project),t&&(e.src+="_"+t),hao360.channel.hj&&(e.src=hao360.channel.hj+"_"+e.src),s(e,function(t){if(f(t.from))return e.src+="_"+t.from.match(/^ad_\d+$/)[0],!0}),e},formatFirstScreenData:function(e){return i(e,function(t){var n={ie:"utf-8",src:e.src,q:t.kw||"",eci:t.eci||"",nlpv:t.ver||""};l(t.from)&&(n=qboot.mix(n,{ls:t.ls||"",lmsid:t.lmsid||"",lm_extend:decodeURIComponent(t.lm_extend)||""},!0));var r=qboot.encodeURIJson(n);return{url:"https://www.so.com/s?"+r,attr:t.attr?'<span class="info">('+t.attr+")</span>":"",icon:t.icon&&t["icon_gw"]==0?'<img loading="lazy" src="'+t.icon+'">':"",md5:t.kw||"",kw:t.kw||"",ellipsis:"",type:t.type||"",title:t.kw,from:t.from,query_attr:t.query_attr,src:e.src,className:"",clk:t.clk||"",asin:t.asin||"",tstag:t.tstag||""}})},formatBackupScreenData:function(e){var t=e.contentType,n=[,13,18][t]||13;return W("body").hasClass("w-lg")&&(n=[,25,30][t]||25,hao360.project==="cube"&&(n=[,17,22][t]||17)),hao360.project==="cube"&&(n=[,16,18][t]||16),i(e,function(r){var i="https://hao1.qhimg.com/t01ea21e45b675cb24a.png",s=r.kw.byteLen()+r.attr.byteLen<=n,o=t==E.SoSearchwordsType?"<em  style='padding: 0 3px;font-size: 10px;'>\u2022</em>":'<img loading="lazy" src="{icon}">'.replace("{icon}",r.icon||i),u={ie:"utf-8",src:e.src,q:r.kw||"",eci:r.eci||"",nlpv:r.ver||""};l(r.from)&&(u=qboot.mix(u,{ls:r.ls||"",lmsid:r.lmsid||"",lm_extend:decodeURIComponent(r.lm_extend)||""},!0));var a=qboot.encodeURIJson(u);return{url:"https://www.so.com/s?"+a,attr:s&&r.attr?'<span class="info">('+r.attr+")</span>":"",icon:o,md5:r.kw||"",kw:r.kw.subByte(n,"")||"",ellipsis:r.kw.byteLen()>n?'<em style="font-family: Microsoft YaHei;">\u2026</em>':"",type:r.type||"",title:r.kw,from:r.from,query_attr:r.query_attr,src:e.src,className:E.CateDef[t],clk:r.clk||"",asin:r.asin||"",tstag:r.tstag||""}})},convertRecommendDataToKwlist:function(e){return i(e,function(e){return e.kw})},convertRecDataToQueryAttrList:filterAdRecommendData:function(e){return n(e,function(e,t){return f(e.from)?!0:!1})},markRecommendDataCType:function(e){return e.contentType=t(e,E.SoHotwordsType),e},filterRecommendDataToTstag:function(e){var t="";for(var n=0,r=e.length;n<r;n++)if(e[n].tstag){t=e[n].tstag;break}return t}},rules:{filterRecommendData:["filterByBlacklist","limitLen","markRecommendDataCType"],formatFirstScreenData:["formatSrc","formatFirstScreenData"],formatBackupScreenData:["formatSrc","formatBackupScreenData"],filterRecommendDdataToQueryAttrlist:["convertRecDataToQueryAttrList"],filterRecommendDataToKwlist:["convertRecommendDataToKwlist"],filterRecommendDataToAdKwlist:["filterAdRecommendData","convertRecommendDataToKwlist"],markRecommendDataCType:["markRecommendDataCType"],filterRecommendDataTstag:["filterRecommendDataToTstag"]}}}),this.view=new w({searchWrap:"#search-wrap",container:"#search",soList:".so-hotword-list",firstScreenList:"#so-hotword",backupList:"#so-hotword-backup",toolbox:"#so-hotword-action",toolboxPanel:".action-content-wrap",closePrompt:"#so-hotword-prompt",remindTip:"#so-hotword-tip",search:"#search",changeBtn:".change",stateBtn:".state-button",delBtn:".del",editBtn:".edit",closeBtn:".close",noshowBtn:".noshow",continueBtn:".continue-use",openBtn:".open",neverRemindBtn:".remind",link:".item"}),this.bindEvt()},E.prototype.bindEvt=function(){var t=this,n=this.model,r=this.view;hao360.project==="cube"&&qboot.events.on("screen",function(){r.adjustPosition()}),v.on(v.SoView_ToggleBackupListState,function(e){var t=e.state;r.toggleBackupListState(t),m.broadcast("toggleHotwordsPanelState",t),m[t](),t=="expand"&&m.showAdUnions(e.adUnionList)}),v.on(v.SoView_ClickItem,function(e){var t=e.kw,r=e.from,i=e.wtype,s=e.area,o=e.queryAttr,u=e.clk,a=n.getSearchEng(),c=e.tstag;f(r)&&m.clkAd(t),l(r)&&m.clkAdUnion(u),m.clk(t,i,s,r,o,a,c)}),v.on(v.SoView_DeleteKw,function(e){var t=e.kw,i=e.from,s=e.wtype,o=e.queryAttr,u=e.tstag;r.deleteKw(t),r.adjustPosition(),r.checkBackupListState(),n.deleteKw(t,i),m.del(t,s,o,u),f(i)&&m.delAd(t,o,u)}),v.on(v.SoView_AllKwDelete,,v.on(v.SoView_ToggleToolboxState,function(e){r.toggleToolboxState()}),v.on(v.SoView_QuitEdit,function(e){r.quitEdit(),r.adjustPosition(),r.checkBackupListState(),r.animate(),m.quitEdit()}),v.on(v.SoView_Edit,function(t){e&&(r.clearTimers(),r.renderFirstScreenList(n.fRecCacheData),r.renderBackupList(n.bRecCacheData)),r.edit(),r.adjustPosition(),m.edit()}),v.on(v.SoView_Close,function(e){r.clearTimers(),r.quitEdit(),r.close(),n.close(),m.close(),m.broadcast("so-hotword-hide")}),v.on(v.SoView_Open,function(e){r.closeRemind(),n.closeRemind(),n.open(function(){t.recommend()}),m.open()}),v.on(v.SoView_CloseClosePrompt,,v.on(v.SoView_OpenClosePrompt,function(e){r.openClosePrompt(),r.closeToolboxPanel()}),v.on(v.SoModel_CheckForceRemind,,v.on(v.SoView_NeverRemind,,v.on(v.SoView_RenderComplete,function(e){m.showAds(e.adKwlist),m.showAdUnions(e.adUnionList),m.timer("stop")}),v.on(v.Interface_RequestComplete,function(e){var t=e.data,n=t.key,r=t.consume,i=t.status,s=t.reason;n==="getRecommendData"&&m.success(r,i,s)}),v.on(v.SoModel_GetRecommendData_Normal,function(e){var t=r.getFirstScreenRealShowCount();m.setBase({cate:E.CateDef[e.contentType]}),m.show(e.kwlist,e.queryAttrlist,e.tstag,t),m.behavior("getRecommendData","normal")}),v.on(v.SoModel_GetRecommendData_NoData,function(e){r.isShow()||r.close(),m.behavior("getRecommendData","noData")}),v.on(v.SoModel_GetRecommendData_AllDelete,,v.on(v.SoModel_GetRecommendData_Stop,function(e){n.cleanRecommendData(),r.close(),t.triggerRemind(),m.behavior("getRecommendData","stop")}),v.on(v.SoSystem_NotRecommend,,v.on(v.SoSystem_Recommend,},E.prototype.triggerRemind=function(){var e=this.view,t=this.model;t.needRemind()&&(e.openRemind(),m.remind())},E.prototype.recommend=function(){var e=this.model,t=this.view;e.loadRecommendData(function(n,r,i){e.fRecCacheData=r,e.bRecCacheData=i,t.show(),t.renderFirstScreenList(r),t.renderBackupList(i),t.adjustPosition(),t.checkBackupListState(),t.renderComplete(),t.animate()})},E.prototype.setup=function(){var e=this.model;return e.isRecommendUser()||!e.isLocalClose()?v.fire(v.SoSystem_Recommend):v.fire(v.SoSystem_NotRecommend),this},window.soSystem=(new E).setup()}();window.qSuggest=window.qSuggest||{},function(){var e=function(){var e=return function(){e([].slice.call(arguments))}}(),t=QW.CustEvent.createEvents,n=QW.ObjectH.mix,r=document.body,i=QW.DomU.isElement,s=function(e){return this._config={recAllTimeout:150},n(this._config,e,!0),this._handler={},this._recAllStarted=!1,this._recAllTimer=null,this._recData={},this._init()};s.prototype={},s.prototype._init=function(){var e=this;return t(e,["receiveAll","receiveOne"]),!0},s.prototype.setOne=function(e,t,n){var r=this;t=t.toLowerCase(),r._recData[t]||(r._recData[t]={}),r._recData[t][e]=n},s.prototype.setAll=s.prototype.cleanAll=s.prototype.getAll=function(e){var t=this;return e=e.toLowerCase(),this._requestAll(e)},s.prototype.getOne=function(e,t){var n=this;return t=t.toLowerCase(),n._recData[t]&&n._recData[t][e]?(n.fire("receiveOne",{name:e,query:t,data:n._recData[t][e]}),!0):this._requestOne(e,t)},s.prototype.bindGroupHandler=function(e,t){this._handler[e]=t},s.prototype._requestAll=function(e){var t=this;e=e.toLowerCase(),t._recAllStarted&&(t._recAllStarted=!1,clearTimeout(t._recAllTimer)),t._recData[e]||(t._recData[e]={});var n;for(n in t._handler)t._handler[n].request&&function(n){t._recData[e]&&t._recData[e][n]?(t._recAllStarted||(t._recAllStarted=!0,t._recAllTimer=setTimeout(function(){t.fire("receiveAll",{query:e,data:t._recData[e]})},t._config.recAllTimeout)),t._receiveOne(n,t._recData[e][n])):t._handler[n].request(e,function(r){t._recAllStarted||(t._recAllStarted=!0,t._recAllTimer=setTimeout(t._config.recAllTimeout)),t._receiveOne(n,r)})}(n);return!0},s.prototype._requestOne=function(e,t){var n=this;return t=t.toLowerCase(),n._recData[t]||(n._recData[t]={}),n._handler[e]&&n._handler[e].request&&function(e){n._handler[e].request(t,}(e),!0},s.prototype._receiveOne=function(e,t){var n=this,r;return n._handler[e]&&n._handler[e].receive&&(r=n._handler[e].receive(t),r&&r.query&&(r.query=r.query.toLowerCase(),n._recData[r.query]||(n._recData[r.query]={})),r&&r.query&&r.data&&(n._recData[r.query][e]=r.data,n._recData[r.query][e+"_cp"]=r.sp,n.fire("receiveOne",{name:e,query:r.query,data:r.data}))),!0};var o=function(e){e.style.visibility=""},u=a={DOWN:40,UP:38,ESC:27,ENTER:13,BACKSPACE:8},f=[40,39,38,37,27,13,18,17,16],l=function(e,t){return this._config={uiReferElem:null,uiContainerElem:null,posAdjust:{}},n(this._config,t,!0),this.container=null,this.searchForm=null,this.isWatching=!1,this._groupHandlerNames=[],this._groupHandler={},this._groupTotal={},this._focusedItemIndex={},this._focusedGroupIndex=-1,this.textInput=null,this.query="",this.lastInputVal="",this._init(e)};l.prototype={config:function(){var e=[].slice.call(arguments);if(e.length===1)return this._config[e[0]]||null;if(e.length===2)return this._config[e[0]]=e[1],e[1]}},l.prototype._init=function(n){t(this);var r=this,s=r.setupTextInput(n);return s?r.config("uiReferElem")&&!i(r.config("uiReferElem"))?(e.error("uiReferElem is not exist"),!1):(r.config("uiReferElem")||r.config("uiReferElem",n),r.config("uiContainerElem")&&!i(r.config("uiContainerElem"))?(e.error("uiContainerElem is not exist"),!1):r.config("uiWrapElem")&&!i(r.config("uiWrapElem"))?(e.error("uiWrapElem is not exist"),!1):(r.config("uiWrapElem")||r.config("uiWrapElem",r.config("uiContainerElem")),r.searchForm=W(n.form),r.wrap=W(r.config("uiWrapElem")),r.container=W(r.config("uiContainerElem")),this._initSuggest())):(e.error("setup textInput["+n+"] error"),!1)},l.prototype.setupTextInput=function(t){return!t||!i(t)?(e.error("textInput["+t+"] is not exist"),!1):(this.textInput=W(t),this.query="",this.lastInputVal="",this.container&&this.fillContent(),W(t).attr("qsugInited")==1?!0:this._initTextInput()&&this.textInput.attr("qsugInited",1))},l.prototype.focusTextInput=function(){var e=this;setTimeout(0)},l.prototype.setLastInputVal=l.prototype.setTextInputVal=l.prototype.getTextInputVal=l.prototype.resetTextInput=function(){this.query="",this.lastInputVal="",this.container&&this.fillContent()},l.prototype._initTextInput=function(){var t=this,n,r=function(){var e=t.getTextInputVal(),n=e.trim();if(e===t.lastInputVal)return;t.lastInputVal=e,t.query=n,n||(t.fillContent(""),t.hide()),t.fire("change",{query:t.query})},i=function(){if(t.isWatching)return;n=setTimeout(function(){r(),n=setTimeout(arguments.callee,200)},100),t.isWatching=!0},s=function(){n&&clearTimeout(n),t.isWatching=!1};return t.textInput.attr("autocomplete","off").on("blur",.on("paste",.on("keydown",function(e){t.keyEventHandler(e)}),t.on("startWatch",i),t.on("stopWatch",s),t.on("restoreQuery",,e("initTextInput finished"),!0},l.prototype.keyEventHandler=function(){var e=return function(t){var n=this,r="",i={trigger:"keyboard"};switch(t.keyCode){case a.UP:r="up",n.isVisible()&&n.previous(),t.preventDefault&&t.preventDefault(),n.fire("stopWatch");break;case a.DOWN:r="down",n.isVisible()?n.next():n.displayContainer(),t.preventDefault&&t.preventDefault(),n.fire("stopWatch");break;case a.ESC:r="esc",n.hide(),n.fire("stopWatch");break;case a.BACKSPACE:r="backspace",n.fire("startWatch");break;case a.ENTER:n.isVisible()&&(r="itemSelect",i.group=n.getFocusedGroup(),i.index=n._focusedItemIndex[i.group]),n.fire("stopWatch");break;default:e(t.keyCode)&&n.fire("startWatch")}r!=""&&n.fire(r,i)}}(),l.prototype._initSuggest=function(){var t=this;return t.fillContent(),t.on("enter",function(n){t.fire("stopWatch");if(n.trigger==="mouse"){var r=t.searchForm[0],i=!0,s=window.document;if(!r)return;if(s.createEvent){var o=s.createEvent("MouseEvents");o.initEvent("submit",!0,!0),i=r.dispatchEvent(o)}else s.createEventObject&&(i=r.fireEvent("onsubmit"));i&&r.submit()}e("enter with:"+t.getTextInputVal())}),t.on("itemFocus",function(){var e="";return function(n){if(n.group!=e){var r=t._groupHandlerNames;for(var i=r.length-1;i>=0;i--)r[i]!=n.group&&t.restoreGroup(r[i]);e=n.group}}}()),W(window).on("resize",,t.container.on("mousedown",function(e){var n=t.textInput[0];n.onbeforedeactivate=function(e){return window.event.returnValue=!1,n.onbeforedeactivate=null,!1}}),e("initEvent finished"),!0},l.prototype.setFocusedGroup=function(e){this._focusedGroupIndex=this._groupHandlerNames.indexOf(e||"")},l.prototype.getFocusedGroup=l.prototype.bindGroupHandler=function(e,t){var n=this;n._groupHandlerNames.push(e),n._groupHandler[e]=t,n._focusedItemIndex[e]=-1,t.init&&t.init()},l.prototype.restoreGroup=function(e){var t=this;t.fire("itemBlur",{group:e,index:t._focusedItemIndex[e]}),t._focusedItemIndex[e]=-1,t._groupHandlerNames[t._focusedGroupIndex]&&(t._focusedGroupIndex=-1)},l.prototype.initGroupMouseBehavior=function(e,t){var n=this;n.container.delegate(t,"mouseover",function(r){var i=W(this).attr("data-index"),s=i===null?W(t,n.container).core.indexOf(this):i,o=n._groupHandlerNames;for(var u=o.length-1;u>=0;u--)n.fire("itemBlur",{group:o[u],index:n._focusedItemIndex[o[u]],trigger:"mouse"});n.fire("itemFocus",{group:e,index:s,trigger:"mouse"}),n.setFocusedGroup(e,s),n._focusedItemIndex[e]=s}),n.container.delegate(t,"click",function(r){var i=W(this).attr("data-index"),s=i===null?W(t,n.container).core.indexOf(this):i;n.fire("itemSelect",{group:e,index:s,trigger:"mouse"}),n.setLastInputVal()})},l.prototype.render=function(t){var n=this,r,i,s=[],o,u;t=t||{};for(o=0,u=n._groupHandlerNames.length;o<u;o++)r=n._groupHandlerNames[o],i=n._groupHandler[r],i&&i.render&&(i.render.setup&&(i.render.setup(),n.setGroupTotal(r,0),n.restoreGroup(r),e("Render setup ["+r+"]")),i.render.build&&(s.push(i.render.build(t[r])),e("Render buildui ["+r+"]:",t[r])));n.fillContent(s.join(""));for(o=0,u=n._groupHandlerNames.length;o<u;o++)r=n._groupHandlerNames[o],i=n._groupHandler[r],i&&i.render&&i.render.teardown&&(i.render.teardown(),e("Render teardown ["+r+"]"))},l.prototype.setGroupTotal=l.prototype.groupPrevious=function(e){var t=this,n=t._groupTotal[e],r=t._focusedItemIndex[e],i=-1;return n>0&&(r<=-1?r=n-1:r>=0&&(i=r,r--)),t.fire("itemBlur",{group:e,index:i,trigger:"keyboard",triggerType:"up"}),t.fire("itemFocus",{group:e,index:r,trigger:"keyboard",triggerType:"up",_cb:function(e){r=e}}),t._focusedItemIndex[e]=r,t.setLastInputVal(),r},l.prototype.groupNext=function(e){var t=this,n=t._groupTotal[e],r=t._focusedItemIndex[e],i=-1;return n>0&&(r<=-1?r=0:r<n&&(i=r,r++),r>=n&&(r=-1)),t.fire("itemBlur",{group:e,index:i,trigger:"keyboard",triggerType:"down"}),t.fire("itemFocus",{group:e,index:r,trigger:"keyboard",triggerType:"down",_cb:),t._focusedItemIndex[e]=r,t.setLastInputVal(),r},l.prototype.displayContainer=function(){var e=this;e.container.html().trim()?e.show():e.hide()},l.prototype.fillContent=function(t){var n=this;n.container.html(t||""),n.displayContainer(),n.isVisible(),e("fillContent :"+t)},l.prototype.setContainerRegion=function(){var e=this,t=W(e.config("uiReferElem")).getRect(),n=e.config("posAdjust"),r=e.wrap.attr("width")?parseInt(e.wrap.attr("width"),10):t.width;e.wrap.css({position:"absolute",top:(n.top?n.top+t.bottom:t.bottom)+"px",left:(n.left?n.left+t.left:t.left)+"px",width:(n.width?n.width+r:r)+"px","z-index":n["z-index"]?n["z-index"]:99},1)},l.prototype.isVisible=l.prototype.show=function(){var e=this;e.fire("show");if(e.isVisible())return;e.setContainerRegion(),e.fire("resetPos"),o(e.wrap[0])},l.prototype.hide=function(){var e=this;e.fire("hide");if(!e.isVisible())return;u(e.wrap[0])},l.prototype.previous=function(){var t=this,n=t._focusedGroupIndex,r=t._groupHandlerNames[n],i=t._groupHandlerNames.length,s=-1;n<=-1&&(n=i-1,r=t._groupHandlerNames[n]);while(s===-1&&n>-1)t._groupHandler[r]&&(s=t.groupPrevious(r)),s===-1&&(n>0?(n--,r=t._groupHandlerNames[n]):(n=-1,r=""),e("changeGroup",n));n===-1&&s===-1&&t.fire("restoreQuery"),t._focusedGroupIndex=n,e(r+" previous:"+s)},l.prototype.next=function(){var t=this,n=t._focusedGroupIndex,r=t._groupHandlerNames[n],i=t._groupHandlerNames.length,s=-1;n>=i&&(n=-1),n<=-1&&(n=0,r=t._groupHandlerNames[n]);while(s===-1&&n<i)t._groupHandler[r]&&(s=t.groupNext(r)),s===-1&&(n<i?(n++,r=t._groupHandlerNames[n]):(n=-1,r=""),e("changeGroup",n));n===i&&s===-1&&t.fire("restoreQuery"),t._focusedGroupIndex=n,e(r+" next:"+s)};var c=function(e,t){var r=this;if(!(r instanceof c))return new c(e,t);r._config={ui:null,data:null},n(r._config,t,!0),r.query="",r.renderQuery="",r.ui=null,r.data=null,r.disabled=!1,r._init(e,t)};c.prototype={config:function(){var e=[].slice.call(arguments);if(e.length===1)return this._config[e[0]]||null;if(e.length===2)return this._config[e[0]]=e[1],e[1]}},c.prototype._init=function(n,r){var i=this;return i.isWatching=!1,i.ui=i.config("ui")||i.config("ui",new l(n,r)),i.ui?(i.data=i.config("data")||i.config("data",new s(r)),i.data?(t(i),i._initEvent()):(e.error("init data error"),!1)):(e.error("init ui error"),!1)},c.prototype._initEvent=function(){var t=this,n=t.data,r=t.ui;return r.on("change",function(r){var i=t.query=r.query.toLowerCase();i&&!t.disabled&&(n.getAll(i),e("input query:"+i))}),n.on("receiveAll",function(e){e.query.toLowerCase()===t.query&&(t.renderQuery=e.query.toLowerCase(),n.suggestCp=e.data.suggest_cp,r.render(e.data))}),!0},c.prototype.disable=function(){this.disabled=!0},c.prototype.enable=window.qSuggest=c,window.qSuggest.log=e,window.qSuggest.log.error=e}();(function(){function e(e,t){function i(e){return typeof e=="string"&&!/^</.test(e)?n.query(e):W(e)}typeof e=="string"&&(e={container:e});var n=W(e.container),r=e.requires;if(!n[0])return;r?qboot.load.apply(null,r.concat():t(i,n)}window.M=e})();(function(){function h(e,t){var n=this;n.host=e,c.call(n,t),this.items=u(e,this.tabSelector)||[],this.views=this.views||this.viewSelector&&u(e,this.viewSelector)||[];var r=-1,a=this.items;for(var h=0;h<a.length;h++)if(i(a[h],this.selectedClass)){r=h;break}r>-1&&this.switchTo(r);if(n.autoPlay){var p=0;function d(){clearInterval(p),p=setInterval(n.autoPlayTime||3e3)}d(),l(e,"mouseenter",,l(e,"mouseleave",d)}this.pageUpSelector&&f(e,this.pageUpSelector,"click",function(e){n.previous(),e.preventDefault()}),this.pageDownSelector&&f(e,this.pageDownSelector,"click",;if(this.tabSelector){if(n.supportMouseenter){var v=0;f(e,n.tabSelector,"mouseenter",function(e){var t=this;s(t,n.preselectedClass),n.mouseenterSwitchTime!=null&&(clearTimeout(v),v=setTimeout(n.mouseenterSwitchTime|0)),e.preventDefault()}),f(e,n.tabSelector,"mouseleave",function(e){o(this,n.preselectedClass),clearTimeout(v),e.preventDefault()})}var m=this.switchEvents||this.defaultSwitchEvents;f(e,n.tabSelector,String(m),function(e){n.switchToItem(this),e.preventDefault()})}}var e=QW.ArrayH.indexOf,t=QW.ObjectH.mix,n=QW.CustEvent,r=QW.NodeH,i=r.hasClass,s=r.addClass,o=r.removeClass,u=r.query,a=QW.EventTargetH,f=a.delegate,l=a.on,c=function(e){t(this,e||{},!0),this.items=this.items||[],n.createEvents(this,c.EVENTS)};c.EVENTS=["beforeswitch","afterswitch"],t(c.prototype,{selectedIndex:-1,isSwitching:!1,switchTo:switchToItem:function(t){var n=e(this.items,t);return this.switchTo(n)},next:function(){var e=(this.selectedIndex+1)%(this.items.length||this.views.length);this.direction="next",this.switchTo(e)},previous:function(){var e=this.selectedIndex-1;this.direction="prev",e<0&&(e=(this.items.length||this.views.length)-1),this.switchTo(e)}}),t(h.prototype,[{tabSelector:".slide-nav li",viewSelector:".slide-content li",pageDownSelector:".slide-pagedown",pageUpSelector:".slide-pageup",selectedClass:"selected",preselectedClass:"preselected",selectedViewClass:"selected",defaultSwitchEvents:["click"],switchTo:function(e){var t=this.selectedIndex,n={fromIndex:t,toIndex:e,fromItem:this.items[t],toItem:this.items[e],fromView:this.views[t],toView:this.views[e],direction:this.direction};if(e==t)return;if(!this.fire("beforeswitch",n))return;this.isSwitching=!0,this.selectedIndex=e,this.switchAnim(n)},switchAnim:function(e){ar t=this;e.fromItem&&o(e.fromItem,this.selectedClass),e.toItem&&s(e.toItem,this.selectedClass);switch(this.animType){case"fade":var r=QW.NodeW(e.toView),i=t.animDur||500;if(e.fromView){var u=QW.NodeW(e.fromView);u.animate({opacity:{from:1,to:0}},i,function(){u.removeClass(t.selectedViewClass)},t.animEasing)}return r.addClass(t.selectedViewClass).animate({opacity:{from:0,to:1}},i,n,t.animEasing);case"scroll":if(e.fromView)for(var a=0,f;f=t.views[a++];)QW.NodeH[f==e.fromView||f==e.toView?"show":"hide"](f);var l=e.toView.parentNode,c=4;while(c--){if(l.scrollWidth>1.5*l.offsetWidth)return e.fromView&&(l.scrollLeft=e.fromView.offsetLeft),QW.NodeW(l).animate({scrollLeft:{to:e.toView.offsetLeft}},this.animDur||500,n,this.animEasing);if(l.scrollHeight>1.5*l.offsetHeight)return e.fromView&&(l.scrollTop=e.fromView.offsetTop),QW.NodeW(l).animate({scrollTop:{to:e.toView.offsetTop}},this.animDur||500,n,this.animEasing);l=l.parentNode};default:e.fromView&&o(e.fromView,this.selectedViewClass),e.toView&&s(e.toView,this.selectedViewClass),n()}},switchDone:function(e){this.isSwitching=!1,this.selectedIndex=e.toIndex,this.fire("afterswitch",e)}},c.prototype]),QW.provide({TabView:h,Slide:h})})(),function(){var e=QW.ObjectH.mix,t=QW.NodeH,n=t.g,r=QW.Jss,i=QW.JssTargetH,s=i.getJss;r.addRules({".widget-slide":{tabSelector:".slide-nav li",viewSelector:".slide-content li",pageUpSelector:".slide-pageup",pageDownSelector:".slide-pagedown",autoPlay:!0,supportMouseenter:!0,mouseenterSwitchTime:300}});var o={switchable:function(t,r){t=n(t);var i={},o="tabSelector viewSelector pageUpSelector pageDownSelector selectedClass preselectedClass selectedViewClass autoPlay autoPlayPausing autoPlayTime supportMouseenter mouseenterSwitchTime switchEvents animType animDur switchEvents onbeforeswitch onafterswitch".split(" ");for(var u=0;u<o.length;u++){var a=s(t,o[u]);a!=null&&(i[o[u]]=a)}e(i,r),t.__slide=new QW.Slide(t,i)}};QW.NodeW.pluginHelper(o,"operator"),QW.Dom&&QW.ObjectH.mix(QW.Dom,o),QW.DomU.ready(}();var ScrollBar=ScrollBar.prototype.constructor=ScrollBar,ScrollBar.prototype._init=function(e){this.options=e,this.mainBox=this.options.mainBox,this.contentBox=this.options.contentBox,this.scrollBarClass=this.options.scrollBarClass,this.scrollBarBoxClass=this.options.scrollBarBoxClass,this.mouseoverBarBg=this.options.mouseoverBarBg,this.scrollBarBg=this.options.scrollBarBg,this.scrollBarHoverBg=this.options.scrollBarHoverBg,this.$mainBox=W(this.mainBox),this.$contentBox=W(this.contentBox),this.$scrollBar=this._createScrollDom(this.$mainBox,this.scrollBarClass,this.scrollBarBoxClass),this.scrollCallBack=this.CV={mainBoxTop:this.$mainBox.getRect().top,mainBoxWidth:this.$mainBox.getRect().width,mainBoxHeight:this.$mainBox.getRect().height||300,scrollBarWidth:this.$scrollBar.getRect().width},this.setCancelWheelFlag(!0),this.setOnMouseWheelEv(!1),this.setScrollStyle(),this._bindEvent()},ScrollBar.prototype._setScrollBarBg=ScrollBar.prototype._bindEvent=function(){var e=this,t=4,n=W(document),r=this.$scrollBar.parentNode(),i=!1,s=!1,o=!1;r.on("click",,this.$scrollBar.on("mouseenter",,this.$mainBox.on("mouseenter",function(){var t=o?e.scrollBarHoverBg:e.mouseoverBarBg;i=!0,e._setScrollBarBg(t)}),this.$mainBox.on("mouseleave",function(){var t=o?e.scrollBarHoverBg:e.scrollBarBg;i=!1,e._setScrollBarBg(t)}),this.$scrollBar.on("mouseleave",function(){var t=i?e.mouseoverBarBg:e.scrollBarBg;s=!1;if(o){e._setScrollBarBg(e.scrollBarHoverBg);return}e._setScrollBarBg(t)}),this.$scrollBar.on("mousedown",function(t){t.preventDefault(),o=!0,s=!0,e._dragScroll(t),e._setScrollBarBg(e.scrollBarHoverBg)}),n.on("mouseup",function(t){var r=i?e.mouseoverBarBg:e.scrollBarBg;n.un("mousemove"),o=!1;if(s){e._setScrollBarBg(e.scrollBarHoverBg);return}e._setScrollBarBg(r)}),this.mouseWheel(e.$mainBox,function(n){var r=e.$mainBox.getRect(),i=e.$contentBox.getRect(),s=-parseInt(e.$contentBox.css("top"))||0,o=s*t+n,u=o/t<0?0:o/t;o=u<=0?0:o,u>=i.height-r.height&&(u=i.height-r.height,o=(i.height-r.height)*t),e.setScrollTop({top:u,type:"wheelScroll"})})},ScrollBar.prototype._createScrollDom=function(e,t,n){var r=W("<div></div>"),i=W("<div></div>"),s=W(i);return r.appendChild(s),s.addClass(t),r.addClass(n),e.appendChild(r),s},ScrollBar.prototype.setScrollStyle=function(){var e=this.CV,t=this.$scrollBar.parentNode(),n=this.$contentBox.getRect().height||1,r=parseInt(this.$contentBox.css("top"))||0,i=e.mainBoxWidth,s=e.mainBoxHeight,o=e.scrollBarWidth,u=i-o,a=parseInt(s*(s/n)),f=-r/n,l=Math.ceil(f*s);t.css({width:o+2+"px",height:s+"px",left:u-2+"px",position:"absolute"}),this.$mainBox.css({position:"relative"}),this.$contentBox.css({position:"absolute",width:i-o+"px"}),this.$scrollBar.css({position:"absolute",height:a+"px",top:l+"px"})},ScrollBar.prototype.resetScrollStyle=function(){this.CV={mainBoxTop:this.$mainBox.getRect().top,mainBoxWidth:this.$mainBox.getRect().width,mainBoxHeight:this.$mainBox.getRect().height||300,scrollBarWidth:this.$scrollBar.getRect().width};var e=this.CV,t=e.mainBoxWidth,n=e.scrollBarWidth,r=t-n,i=this.$scrollBar.parentNode();i.css({left:r-2+"px"}),this.$contentBox.css({width:t-n+"px"});var s=parseInt(this.$contentBox.css("top")),o=this.$contentBox.getRect().height||1,u=e.mainBoxHeight,a=parseInt(u*(u/o)),f=-s/o,l=Math.ceil(f*u);this.$scrollBar.css({height:a+"px",top:l+"px"})},ScrollBar.prototype._dragScroll=function(e){var t=this,n=this.CV,r=W(document),i=e.clientY,s=this.$scrollBar.getRect().top-this.$mainBox.getRect().top,o=function(e){e.preventDefault();var n=e.clientY,r=n-i+s,o=t._getScrollBarBoundary(r);t.setScrollTop({top:o,type:"dragScroll"})};r.on("mousemove",},ScrollBar.prototype._getScrollBarBoundary=function(e){var t=this.CV.mainBoxHeight,n=this.$scrollBar.getRect().height;return e=e>t-n?t-n:e,e=e<=0?0:e,e},ScrollBar.prototype.scroll=ScrollBar.prototype.mouseWheel=function(e,t){var n=this,r=function(e){return e.wheelDelta?e.wheelDelta:e.detail*40},i=function(e){return n.onMouseWheelEv||n.isBoundary(e)&&n.cancelWheelFlag};e.on("mousewheel, DOMMouseScroll",function(e){var n=e.type==="mousewheel"?-r(e):r(e);if(i(e))return;t(n),e.preventDefault()})},ScrollBar.prototype.onMouseWheelDir=function(e){var t=e.wheelDelta?e.wheelDelta<0:e.detail>0;return t?"down":"up"},ScrollBar.prototype.isBoundary=function(e){var t=parseInt(this.$contentBox.css("top")),n=this.$contentBox.getRect().height,r=this.onMouseWheelDir(e),i=-t>=n-this.$mainBox.getRect().height,s=t>=0,o=r==="down"&&i||r==="up"&&s;return o||e.preventDefault(),o},ScrollBar.prototype.setCancelWheelFlag=function(e){this.cancelWheelFlag=e},ScrollBar.prototype.setOnMouseWheelEv=ScrollBar.prototype.clickScroll=function(e){var t=W(e.target),n=Dom.getDocRect().scrollY,r=this.$mainBox.getRect().top,i=parseInt(this.$scrollBar.css("top")),s=this.$scrollBar.getRect().height,o=e.clientY+n-r-s/2;o=this._getScrollBarBoundary(o),o=o-i<0?i-s:i+s;if(t.hasClass(this.scrollBarClass))return;this.setScrollTop({top:o,type:"animateScroll"})},ScrollBar.prototype.setScrollTop=function(e){var t=this.CV,n=e.top,r=e.type,i=this._getPos(n);switch(r){case"dragScroll":this._setPosition(i);break;case"animateScroll":this._setAniPos(r,i);break;case"wheelScroll":var s=this._getWheelPos(n);this._setPosition(s)}var o=this._getScrollParams(r);this.scrollCallBack(o)},ScrollBar.prototype._setPosition=function(e){this.$scrollBar.css({top:e.SBT+"px"}),this.$contentBox.css({top:e.CBT+"px"})},ScrollBar.prototype._setAniPos=function(e,t){var n=this;this.$scrollBar.animate({top:{to:t.SBT+"px"}},200),this.$contentBox.animate({top:{to:Math.ceil(t.CBT)+"px"}},200,},ScrollBar.prototype._getWheelPos=function(e){var t=this.CV.mainBoxHeight,n=this.$contentBox.getRect().height,r=e/n,i=-e<t-n?t-n:-e,s=Math.ceil(r*t);return s=this._getScrollBarBoundary(s),{SBT:s,CBT:i>0?0:i}},ScrollBar.prototype._getPos=function(e){var t=this.$scrollBar.getRect().height,n=this.$contentBox.getRect().height,r=this.CV.mainBoxHeight,i=r-this.$scrollBar.getRect().height||1,s=e/i,o=e+t>r?r-t:e,u=-(n-r)*s,a=u<r-n?r-n:u;return e+t>=r?(o=r-t,a=r-n):o<0&&(o=0),{SBT:o,CBT:a>0?0:a}},ScrollBar.prototype._getScrollParams=function(e){var t=this.CV,n=this.$scrollBar,r=this.$contentBox;return{type:e,mainBoxWidth:t.mainBoxWidth,mainBoxHeight:t.mainBoxHeight,contentBoxHeight:r.getRect().height,contentBoxTop:parseInt(r.css("top")),scrollBarHeight:n.getRect().height,scrollBarTop:parseInt(n.css("top"))}};(function(){var e=function(e){return this.options=e||{},this.key=this.options.key,this.directOnceRender=this.options.directOnceRender,this.model=null,this.view=null,this.currentIndex=-1,this.init(),this.load(),this};e.prototype.constructor=e,e.prototype.init=function(){this.model=new t({key:this.key,format:this.options.format}),this.view=new f({key:this.key,parent:this.options.parent,aContainer:this.options.aContainer,imgSelector:this.options.imgSelector,textSelector:this.options.textSelector,directPv:this.options.directPv,directPvObserver:this.options.directPvObserver,perRender:this.options.perRender}),this.bindEvt()},e.prototype.bindEvt=function(){var e=this;this.model.on("model:dataLoaded",,this.model.on("model:dataFailed",,this.view.on("view:renderedPerData",function(t){var n=e.options.afterRenderData,r=t.data;n&&n(r.dom,r.data,r.index)}),this.view.on("view:renderEnd",function(){var t=e.options.onScreenChange;t&&qboot.events.on("screen",;var n=e.options.onSuccessEnd;n&&n(e)})},e.prototype.load=function(e){var t=this,n=this.options.params||{};this.model.loadData(n,function(n){t.view.addData(n),e&&e(),t.directOnceRender&&t.render()})},e.prototype.render=e.prototype.stepRender=function(){var e=this,t=this.view.getData();this.currentIndex++;if(this.currentIndex<t.length){this.view.stepRender(this.currentIndex);return}this.freshParams(),this.load(},e.prototype.freshParams=function(){var e=this.options.params;if(!e)return;for(var t in e)e[t]++},e.prototype.destroy=window.AdSvc=e;var t=function(e){return qboot.createEvents(this),this.options=e,this.key=e.key,this.urlConfig=MEDIAV_CONFIG[e.key],this.baseParams=MEDIAV_CONFIG.base,this.format=e.format,this.interface=null,this.data={},this.init(),this};t.prototype.constructor=t,t.prototype.init=t.prototype.initRequestConfig=function(){var e={cache:!0,cacheTime:6e5,timeout:3e4,jsonpName:"jsonp"};qboot.mix(this.urlConfig,e),this.formatParams()},t.prototype.formatParams=function(){var e=qboot.mix(this.urlConfig.params,this.baseParams);e.showids&&Object.prototype.toString.call(e.showids)==="[object Array]"&&(e.showids=e.showids.join("_")),e.mid=hao360.mid||e.mid||"",e.scheme=hao360.isHttps()?"https":"http",e.uid=qboot.cookie.get("__guid")||"123231123",this.urlConfig.params=e},t.prototype.initInterface=function(){var e=qboot.mix({},this.urlConfig,!0),t={host:e.host,apiMap:{}},n=0;window.personalization&&!window.personalization.getData("ad")&&(n=1),e.checkRecommend&&n&&(e.params.crec=1),t.apiMap["get"+this.key]=e,this.interface=new Interface(t)};var n=1,r=2,i=0;t.prototype.supportFormat=function(){var e=this.urlConfig.params;return e.showid?n:e.showids?r:i},t.prototype.formatData=function(){var e=this.supportFormat();if(e===i&&!this.format)return;if(this.format){this.data=this.format(this.data);return}e===n?this.dealOneShowId():this.dealMutiShowId()},t.prototype.dealOneShowId=function(){var e=this.data.ads,t=this.data.impurl,n=this.data.adstk;if(!e){this.data=[];return}this.data=e.map(function(e,r){return t&&(e.impurl=t),n&&(e.adstk=n),e})},t.prototype.dealMutiShowId=function(){var e=this,t=this.data.adspaces,n=this.data.impurl;if(!t){this.data=[];return}var r=this.getShowids();this.data=r.map(function(e,r){var i=t[e];return i&&i.ads&&i.ads.length&&(i=i.ads[0]),!i||!i.img?{}:(n&&(i.impurl=n),i)})},t.prototype.getShowids=function(){var e=this.urlConfig.params;return e.showids?e.showids.split("_"):[]},t.prototype.loadData=function(e,t){var n=this;this.data={},this.interface.excute("get"+this.key,e,function(e){e&&JSON.stringify(e)!=="{}"?(n.data=e,n.formatData(),t&&t(n.data),n.fire("model:dataLoaded",{data:n.data})):n.fire("model:dataFailed")})},t.prototype.clearData=function(){this.data={}};var s=function(e,t){if(!t)return[];if(Object.prototype.toString.call(t)==="[object Array]"){var n=[];return t.forEach(function(t,r){n=n.concat(W(e).query(t).toArray())}),n}return W(e).query(t).toArray()},o=function(e){var t=!1;return{pv:function(n){if(!t){t=!0;var r=e.imptk;while(r&&r.length)logPureSender(r.shift());n&n(e)}},replay:},u=function(e,t){var n=e.pageX,r=e.pageY,i=W(t).getXY()||[],s=i[0],o=i[1];return[parseInt(n-s),parseInt(r-o)]},a=function(e,t,n,r){var i=[],s="",o=W(t).attr("href")?W(t):W(t).query("a");if(!n.clktk||!n.curl)return;var a=(new Date).getTime(),f=u(e,t),l=f[0],c=f[1];if(r==="start"){var h=o.getRect(),p=o.query("img").getRect()||h,d=p&&p.width?p.width:h.width?h.width:"__ADSPACE_W__",v=p&&p.height?p.height:h.height?h.height:"__ADSPACE_H__";n.clktk[0]&&n.clktk.forEach(function(e){i.push(e.replace(/__EVENT_TIME_START__/g,a).replace(/__OFFSET_X__/g,l).replace(/__OFFSET_Y__/g,c).replace(/__ADSPACE_W__/g,d).replace(/__ADSPACE_H__/g,v))}),s=n.curl.replace(/__EVENT_TIME_START__/g,a).replace(/__OFFSET_X__/g,l).replace(/__OFFSET_Y__/g,c).replace(/__ADSPACE_W__/g,d).replace(/__ADSPACE_H__/g,v)}else if(r==="end"){var m=W(t).attr("data-clktk").split("|");m[0]&&m.forEach(,s=o.attr("href").replace(/__EVENT_TIME_END__/,a)}else i=n.clktk,s=n.curl;W(t).attr("data-clktk",i.join("|")),o.attr("href",s)},f=function(e){return qboot.createEvents(this),this.key=e.key,this.options=e,this.needtoFilterSource=MEDIAV_CONFIG[e.key].needtoFilterSource||!1,this.parent=e.parent||window.body,this.aContainer=e.aContainer,this.imgSelector=e.imgSelector||"img",this.textSelector=e.textSelector||"span",this.perRender=e.perRender,this.directPv=e.directPv,this.directPvObserver=e.directPvObserver,this.monitorMap={},this.data=[],this.removeAdIconSource=["360\u641c\u7d22"],this.isAdstkMonitor=!1,this};f.prototype.addData=f.prototype.clearData=f.prototype.getData=f.prototype.renderOnce=function(){var e=s(this.parent,this.aContainer);for(var t=0;t<e.length;t++)this.stepRender(t,e[t]);if(this.directPv){var n=[];if(this.directPv==="all")n=e;else if(Object.prototype.toString.call(this.directPv)=="[object Array]")while(this.directPv.length&&this.directPv.length%2==0){var r=e.slice(this.directPv.shift(),this.directPv.shift());n=n.concat(r)}else n=e.slice(0,this.directPv);this.sendJointPv(n)}return this.fire("view:renderEnd"),e.length-1},f.prototype.stepRender=function(e,t){t||(t=s(this.parent,this.aContainer)[e]);if(!t)return;var n=W(t).query(this.imgSelector),r=W(t).query(this.textSelector),i=this.data[e],o=n.attr("data-whq"),u=n.attr("data-clipRule");if(!i||!i.curl)return;if(o){var a={whq:o,webp:!0};u&&(a.rule=u),i.img=i.img.clipImage(a)}this.perRender?(this.perRender(t,i),this.needtoFilterSource&&this.removeAdIcon(t,i)):(W(t).attr("href",i.curl).attr("title",i.desc),n&&n.attr("src",i.img),r&&r.html(i.desc)),this.setMonitor(t,i),this.fire("view:renderedPerData",{data:{dom:t,data:i,index:e}})},f.prototype.removeAdIcon=function(e,t){this.removeAdIconSource.indexOf(t.src)>-1&&W(e).query("span").toArray().forEach(function(e){e.className==="ad"&&W(e).attr("style","display:none")})},f.prototype.setMonitor=function(e,t){var n=this,r=hao360.md5(t.curl),i=o(t),s=W(e).attr("href")?W(e):W(e).query("a");this.monitorMap[r]=i,W(e).attr("data-monitor",r),W(e).attr("data-clktk",t.clktk.join("|")),s.on("mousedown",function(n){a(n,e,t,"start")}),s.on("mouseup",,s.on("click",function(){var t=W(e).attr("data-clktk").split("|");t&&t.length&&t.forEach(function(e){logPureSender(e)})});if(!n.directPv&&!n.directPvObserver){var u=VisibleObserver(function(){n.sendJointPv([e]),u.unobserve(e)});u.observe(e)}},f.prototype.sendJointPv=function(e){if(Object.prototype.toString.call(e)!="[object Array]"||e.length<1)return;var t=[],n="",r="",i=this;e.forEach(function(e,s){var o=W(e).attr("data-monitor");if(!o)return;var u=i.monitorMap[o];if(!u)return;u.pv(function(e){t.push(e.imparg),n=e.impurl,r=e.adstk})}),t.length&&n&&logPureSender(n+t.join("."));if(r&&!i.isAdstkMonitor){i.isAdstkMonitor=!0;while(r&&r.length)logPureSender(r.shift())}},f.prototype.IntersectionObserver=function(e,t){function n(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:0}function r(){return document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body&&document.body.clientHeight?document.body.clientHeight:0}function o(t){if(i[t])return;i[t]=setInterval(function(){var i=W(t).isVisible(),o=W(t).getRect(),u=r(),a=n(),f=a+u,l=o.top,c=o.top+o.height,h=l>=a&&c<=f;i&&h&&e.call(s,[t])},100)}function u(e){clearInterval(i[e]),delete i[e]}var i={},s=this;return{observe:o,unobserve:u,disconnect:}})(),function(){var e=QW.ObjectH.mix,t={loadMediav:function(e,t,n){Object.prototype.toString.call(t)==="[object Object]"&&(n=t,t=n.key);if(!e||!t)return;n.key=t,n.parent=e;var r=new AdSvc(n);return e.adSvc=r,r}};QW.NodeW.pluginHelper(t,"operator"),QW.Dom&&e(QW.Dom,t)}();(function(){ar t=e.prototype;t.init=function(e){var t=this;t.$options=e,t.initMediav(),t.initStyle()},t.initMediav=function(){var e=this,t=e.$options,n=t.adSelector,r=t.containerSelector,i=t.adKey,s=t.render,o=t.onSuccessEnd;W(r).loadMediav(i,{aContainer:n,perRender:e.bind(s,e),directOnceRender:!0,onSuccessEnd:o})},t.initStyle=function(){var e="ad-textlink",t=document.getElementById(e),n=[".ad-textlink {","white-space: nowrap;","text-overflow: ellipsis;","overflow:hidden;","width:auto;","max-width:202px;","padding-right: 23px;","background: url(https://hao4.qhimg.com/t01372e78d70909cda9.png) no-repeat center right;","}"].join("");t||qboot.load.css(n,e)},t.bind=t.$textCut=function(e,t){var n=t||13,r=0,i=0,s=/([a-zA-Z0-9,\.;+=\-_ ])/;do s.test(e.charAt(r))?i+=.5:i+=1,i<=n&&r++;while(r<e.length&&i<n);return e.substring(0,r)},window.ChannelTextlinkAd=e})();(function(){function e(e,t){t=t||{},this.el=e,this.logUrl=t.logUrl||[],this.namespace=t.namespace,this.menus=t.menus||this.model.menus,this.onClick=t.onClick||this.onClick,this.afterClick=t.afterClick||function(){},this.afterRemove=t.afterRemove||this.init()}e.prototype.model={menuTriggerClass:"menu-trigger",menuInsertWrap:"#doc-view-front",menuClass:"defaul-menu",menuIndex:"menu-index",menuStyle:"            .{ns}{position:fixed;top:-999em;left:-999em;background:#fff;border:solid 1px #e4e4e4;border-bottom:none;text-align:center;z-index:430;margin:1px;_position:absolute;}            .{ns} li{border-bottom:solid 1px #e4e4e4;width:103px;height:32px;line-height:32px;cursor:pointer;_width:103px;_height:auto;_padding:8px 0;}            .{ns} li:hover{background:#e4e4e4}",menus:[{title:"\u4e0d\u611f\u5174\u8da3",attr:{"dislike-rule":5},onClick:function(e,t){}},{title:"\u5185\u5bb9\u4e0d\u5b9c",attr:{"dislike-rule":1},onClick:function(e,t){}},{title:"\u906e\u6321\u5e72\u6270",attr:{"dislike-rule":4},onClick:function(e,t){}},{title:"\u5c4f\u853d\u6b64\u7c7b\u5e7f\u544a",attr:{"dislike-rule":2},onClick:],menuPosition:{rightbottom:righttop:function(e,t){return[e,t-this.rect.height]},leftbottom:function(e,t){return[e-this.rect.width,t]},lefttop:function(e,t){return[e-this.rect.width,t-this.rect.height]}}},e.prototype.onClick=function(e,t){var n=W(t).attr("data-dislike-rule"),r=W(t).html(),i=parseInt(W(t).attr(this.model.menuIndex),10)+1;this.logUrl&&this.logUrl.length&&this.logUrl.forEach(function(e){e=e.replace("__DISLIKE_RULE_ID__",n).replace("__DISLIKE_TAG__",encodeURIComponent(r)),logPureSender(e)}),this.namespace&&LogHub&&LogHub.behavior(this.namespace,"click-menu-"+i),this.removeView()},e.prototype.loadStyle=function(){if(!e.prototype._styleLoaded){var t=this.model.menuStyle;t=R.tmpl(t,{ns:this.model.menuClass}),qboot.load.css(t,this.model.menuClass),e.prototype._styleLoaded=!0}},e.prototype.insertView=e.prototype.removeView=function(){this.view&&(W(this.view).removeNode(),this.view=null,this.afterRemove.call(this))},e.prototype.buildView=function(){var e=document.createElement("ul"),t,n;e.className=this.model.menuClass;for(var r=0;r<this.menus.length;r++){t=document.createElement("li"),n=this.menus[r].attr,t.setAttribute(this.model.menuIndex,r);for(var i in n)t.setAttribute("data-"+i,n[i]);t.innerHTML=this.menus[r].title,e.appendChild(t)}this.view=e},e.prototype.getRect=function(){this.rect||(this.rect=W(this.view).getSize())},e.prototype.computeStyle=function(e){var t=e.clientX,n=e.clientY,r=this.rect.width;menuHeight=this.rect.height,docRect=Dom.getDocRect(),docWidth=docRect.width,docHeight=docRect.height,wrapRect=W(this.model.menuInsertWrap).getRect(),positionX="right",positionY="bottom",t+r>docWidth&&t-r>=0&&(positionX="left"),n+menuHeight>docHeight&&n-menuHeight>=0&&(positionY="top"),Browser.ie6&&(t+=docRect.scrollX-wrapRect.left,n+=docRect.scrollY-wrapRect.top);var i=positionX+positionY,s=this.model.menuPosition[positionX+positionY].call(this,t,n);W(this.view).setXY(s[0],s[1])},e.prototype.buildEvent=function(){if(!this._eventBuilded){var e=this;this._scrollHandler=function(){W(window).un("scroll",e._scrollHandler),e.removeView()},this._clickHandler=function(t){var n=parseInt(W(this).attr(e.model.menuIndex),10);e.menus[n].onClick&&e.menus[n].onClick.call(e,t,this),e.onClick.call(e,t,this),e.afterClick.call(e)},this._eventBuilded=!0}},e.prototype.bindEvent=function(){var e=this;W(e.view).delegate("li","click",e._clickHandler),W(e.view).on("mouseleave",function(){e.removeView()}),W(window).on("scroll",e._scrollHandler)},e.prototype.controller=function(e){this.removeView(),this.loadStyle(),this.buildView(),this.insertView(),this.getRect(),this.computeStyle(e),this.buildEvent(),this.bindEvent()},e.prototype.init=function(){this.el._menu=this,W(this.el).addClass(this.model.menuTriggerClass),e.prototype._isDelegated||(W(document).delegate("."+this.model.menuTriggerClass,"click",,e.prototype._isDelegated=!0)},QW.NodeW.pluginHelper({menu:function(t,n){if(Dom.isElement(t))return new e(t,n)}},"opreator")})();(function(){window.hao360=hao360||{},hao360.throttle=function(e,t,n){var r=t||200,i,s=this;return function(t){i||(e.apply(s,[t]),i=setTimeout(function(){i=null,n&&e.apply(s,[t])},r))}},hao360.debounce=function(e,t){var n=null,r=this;return ,qboot.events=qboot.events||{},qboot.createEvents(qboot.events),window.addEventListener("scroll",hao360.debounce(function(){qboot.events.fire("system:scroll")},100)),window.addEventListener("resize",hao360.debounce(100))})();(function(e){window.hao360=hao360||{},hao360.adIconShow=function(t){var n=!0;if(t&&e)for(var r=0;r<e.length;r++)if(t.indexOf(e[r])>=0){n=!1;break}return n}})(window.adSrcRule);(function(){function s(e){qboot.jsonp("//mbsug.ssl.so.com/sug-hot",{channel:"type_news",realhot_limit:16},function(t){t&&t.errno===0&&t.data&&r(t.data)?(n=t.data,n.length>0?LogHub.behavior("sohot","req_times"):LogHub.behavior("sohot","req_nodata")):LogHub.behavior("sohot","req_error"),e&&e()},{jsonp:"callback",timeout:5e3})}var e=!1,t=[],n=null,r=Object.isArray,i=Object.isFunction;window.soHotSdk={get:function(r){if(!r||!i(r))return;if(n){r(n);return}t.push(r),e||(s(function(){t.forEach(,t=[]}),e=!0)}}})();(function(){function t(e){if(e<0)return"";var t=[{second:0,text:"\u521a\u521a"},{second:6e4,text:"xx\u5206\u949f\u524d"},{second:36e5,text:"xx\u5c0f\u65f6\u524d"},{second:864e5,text:"xx\u5929\u524d"},{second:6048e5,text:"\u4e00\u5468\u524d"},{second:2592e6,text:"\u4e00\u4e2a\u6708\u524d"},{second:31536e6,text:"\u4e00\u5e74\u524d"}],n;for(var r=0;r<t.length;r++){if(!(e>=t[r].second))break;n=t[r]}if(n){var i=n.text;if(i.indexOf("xx")>=0){var s=Math.floor(e/n.second);i=i.replace("xx",s)}return i+"\u66f4\u65b0"}return""}function n(n,r){if(!r||!e(r))return;if(!n){r("");return}window.TimeSVC.getTime(function(e){var i=e||new Date,s=i.getTime(),o=n.replace(/-/g,"/"),u=(new Date(o)).getTime();diffTime=s-u;var a=t(diffTime);r(a)})}var e=Object.isFunction;window.soHotUtils={timeConvert:n}})();(function(){var e="visibilitychange",t="Hidden",n={prefix:null,doc:document,prefixes:["webkit","ms","moz"],onceVisibleCallbacks:[],onceHiddenCallbacks:[],visibleCallbacks:[],hiddenCallbacks:[],onOnceVisible:function(e){this.onceVisibleCallbacks.push(e)},onOnceHidden:function(e){this.onceHiddenCallbacks.push(e)},onVisible:function(e){this.visibleCallbacks.push(e)},offVisible:function(e){for(var t=0,n=this.visibleCallbacks.length;t<n;t++)if(this.visibleCallbacks[t]===e){this.visibleCallbacks.splice(t,1);break}},onHidden:offHidden:function(e){for(var t=0,n=this.hiddenCallbacks.length;t<n;t++)if(this.hiddenCallbacks[t]===e){this.hiddenCallbacks.splice(t,1);break}},supportHidden:function(){var e=this;return e.supportPrefixes=e.prefixes.filter(,e.supportPrefixes.length>0},checkHidden:function(e){return e+t in this.doc},getHiddenValue:function(){if(this.supportPrefixes&&this.supportPrefixes[0])return this.doc[this.supportPrefixes[0]+t]},runCallbacks:function(e){if(e)for(var t=0;t<e.length;t++)e[t]()},consumeCallbacks:function(e){if(e)while(e.length>0){var t=e.shift();t()}},_visible:function(){n.runCallbacks(this.visibleCallbacks),n.consumeCallbacks(this.onceVisibleCallbacks)},_hidden:_nativeSwitch:function(){this.doc[this.prefix+t]===!0?this._hidden():this._visible()},listen:function(){try{this.supportHidden()?(this.prefix=this.supportPrefixes[0],this.doc.addEventListener(this.prefix+e,1)):(window.addEventListener("focus",this._visible,1),window.addEventListener("blur",this._hidden,1))}catch(t){}},init:;n.init(),window.BrowserTabVisibility=n})();(function(){window.useOnOff&&window.useOnOff.hotSiteSoReturn==="on"&&qboot.load("hotSiteSoReturn")})();;qboot.load("infoflowRightMvSdk");