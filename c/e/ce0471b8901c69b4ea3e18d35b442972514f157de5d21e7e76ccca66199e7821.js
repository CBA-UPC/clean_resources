"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[1629],{39837:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(90182),i=n(28297),o=n(46417);function a(e){return(0,o.jsxs)(r.Z,{children:[(0,o.jsx)("title",{children:"".concat(i.ZP.siteTitle," | ").concat(e.title)}),(0,o.jsx)("meta",{name:"description",content:e.description})]})}a.defaultProps={description:""}},81629:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(29439),i=n(94149),o=n(16031),a=n.n(o),d=n(2135),l=n(39837),c=n(63065),s=n(4176),u=n(12990),h=n(15861),f=n(1413),v=n(64687),g=n.n(v),p=n(36241),b=n(47313),m=n(58467),x=n(8566),Z=n(17189),k=n(72657),w=n(28422),M=n(91345),y=n(46663),j=n(91443),T=n(4942),I=n(68728),S=n(19989),R=n(57829),C=n(7003),D=n(20201),E=n(71651),N=n(18140),P=n(60250),q=n(7564),z=n(62606),A=n(59824),O=n(33317),U=n(44368),G=n(46417);function B(e){var t,n=e.data,r=e.rowIndex,i=e.columnIndex,a=e.style,d=(0,D.Z)(),l=(0,q.Z)().uploadsInProgress,s=(0,y.Z)().settings,u=s.zoom,h=s.cropMode,v=(0,P.Z)(),g=v.selectedMedia,x=v.toggleSelectMedia,Z=v.toggleBulkSelectMedia,k=v.selectedModeEnabled,w=(0,m.s0)(),M=(0,N.Z)(),j=M.getDragMedia,B=M.removeDragMedia,H=(0,b.useRef)(null),L=(0,E.Z)(H),W=r*u+i,_=n[W],F=_&&!!g.get(_.id),K=(0,m.UO)().albumId,X="small";u<4&&(X="medium");var Y=(0,c.Z)().query,J=l.get(null===_||void 0===_?void 0:_.id)&&"COMPLETE"!==l.get(null===_||void 0===_?void 0:_.id),Q=(0,z.Z)(_,Number(a.width)),V=null!==_&&void 0!==_&&null!==(t=_.imageUrl)&&void 0!==t&&t.includes("blob")?_.imageUrl:Q,$=_&&l.get(_.id);return _?"ERROR"===$?(0,G.jsx)("div",{style:(0,f.Z)((0,f.Z)({},a),{},{top:Number(a.top)+84}),"data-test":"cell-".concat(W),ref:H,children:(0,G.jsx)(R.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:a.width,height:a.height,background:"rgba(220, 54, 46, 0.1)",padding:"10px",textAlign:"center",top:Number(a.top)+84,borderStyle:"solid",borderWidth:3,borderColor:"transparent"},children:"There was an issue uploading your media. Please try again."})}):(0,G.jsxs)("div",{style:(0,f.Z)((0,f.Z)({},a),{},{top:Number(a.top)+84}),"data-test":"cell-".concat(W),ref:H,children:[(0,G.jsxs)(O.Z,{isActive:!J&&(k||F||L),onClick:function(e){_&&(e.shiftKey?Z(_.id,n):x(_.id))},sx:{top:8,left:8,zIndex:1,backgroundColor:F?d.palette.primary.main:"rgba(71,85,105,0.5)","&:hover":{backgroundColor:F?"white":"rgba(71,85,105,0.9)"}},"data-test":F?"deselect":"select",children:[F&&(0,G.jsx)(I.Z,{color:"inherit",fontSize:X,sx:{background:d.palette.primary.main,borderRadius:"50%",padding:"2px"}}),!F&&(0,G.jsx)(I.Z,{color:"inherit",fontSize:X,sx:{background:"transparent",color:"white",borderRadius:"50%",padding:"2px"}})]}),_.mediaType.includes("video")&&(0,G.jsx)(S.Z,{"data-test":"media-".concat(W),sx:(0,T.Z)({color:"white",opacity:"0.8",position:"absolute",top:8,right:12},d.breakpoints.down("sm"),{fontSize:"large"})}),(0,G.jsx)(U.Z,{id:_.id}),(0,G.jsx)("img",{"data-test":"media-".concat(W),alt:_.id,role:"presentation",src:V,srcSet:V,onClick:function(){var e="/bucket/".concat(_.bucketId);e+=K?"/album/".concat(K,"/media/").concat(_.id,"?search=true&q=").concat(Y):"/media/".concat(_.id,"?search=true&q=").concat(Y),w(e)},onError:function(e){e.currentTarget.src=_.mediaType.includes("video")?A.h:A.N,e.currentTarget.srcset=_.mediaType.includes("video")?A.h:A.N},onDragStart:function(e){e.stopPropagation();var t=j(_,!!F),n=F?"all":_.id;return e.dataTransfer.setData("id",n),e.dataTransfer.setDragImage(t,0,0),!1},onDragEnd:style:{borderStyle:"solid",borderWidth:3,borderColor:"transparent",filter:"none",width:a.width,height:a.height,objectFit:h?"contain":"cover",display:"flex",opacity:"IN_PROGRESS"===$||(0,o.isNumber)($)?"0.3":"1"}}),(null===s||void 0===s?void 0:s.showImageTitle)&&!p.isMobile&&(0,G.jsx)(C.Z,{title:_.title,position:"bottom"})]}):null}var H=(0,b.forwardRef)((function(e,t){var n=e.children,r=e.style,i=e.onScroll,o=(0,b.useRef)(0);return(0,G.jsx)("div",{id:"gallery","data-test":"grid",style:(0,f.Z)((0,f.Z)({},r),{},{overflowX:"hidden"}),onScroll:function(e){var t=e.currentTarget.scrollTop;t>100&&t>o.current?(0,M.MD)("down"):(0,M.MD)("up"),o.current=e.currentTarget.scrollTop,i(e)},ref:t,children:n})})),L=(0,b.forwardRef)((function(e,t){var n=e.style,r=e.children;return(0,G.jsx)("div",{ref:t,style:(0,f.Z)((0,f.Z)({},n),{},{height:Number(n.height)+84}),children:r})}));function W(e){var t=e.items,n=e.fetchMore,r=e.hasMore,i=(0,y.Z)().settings,o=i.zoom,a=i.sortBy,d=p.isMobile?0:14,l=c=(0,b.useRef)(null),s=(0,m.UO)().albumId;(0,b.useEffect)((function(){return(0,M.MD)(null),(0,M.eG)({}),(0,M.nt)(null),function(){(0,M.MD)(null),(0,M.eG)({}),(0,M.nt)(null)}}),[s]);var u=function(){var e=(0,h.Z)(g().mark((function e(r,i){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[i]||n();case 1:case"end":return e.stop()}}),e)})));return ();return(0,G.jsxs)("div",{"data-test":"drag-and-drop",style:{flex:1,position:"relative"},children:[(0,G.jsx)(j.Z,{}),(0,G.jsx)(x.Z,{children:function(e){var n=e.height,i=e.width;return i&&n?(0,G.jsx)(k.Z,{isItemLoaded:l,itemCount:t.length+Number(r),loadMoreItems:u,children:function(e){var r=e.onItemsRendered,l=e.ref;return(0,G.jsx)(Z.Ym,{columnCount:o,columnWidth:Math.floor(i/o)-Math.floor(d/o),height:n,innerElementType:L,itemData:t,ref:outerElementType:H,rowCount:Math.ceil(t.length/o),rowHeight:Math.floor(i/o)-Math.floor(d/o),width:i,onItemsRendered:function(e){var n=e.overscanRowStartIndex*o,i=e.overscanRowStopIndex*o,d=e.visibleRowStartIndex*o,l=e.visibleRowStopIndex*o,c=(null===a||void 0===a?void 0:a.field)===w.g7C.DateTaken?t[d].dateTaken:t[d].createdAt,s=(null===a||void 0===a?void 0:a.field)===w.g7C.DateTaken?t[l].dateTaken:t[l].createdAt;r({overscanStartIndex:n,overscanStopIndex:i,visibleStartIndex:d,visibleStopIndex:l}),c&&s&&(0,M.eG)({startDate:c,endDate:s})},children:B})}}):(0,G.jsx)("div",{})}})]})}function _(){var e=(0,u.Z)().bucket,t=(0,d.lr)(),n=(0,r.Z)(t,1)[0].get("q"),o=(0,c.Z)(),h=o.images,f=o.total,v=o.hasMore,g=o.fetchMore,p="Results: ".concat(a().capitalize(n||"")),b=h||[];return null===f?(0,G.jsx)(i.Z,{sx:{px:"10px",width:"100%"}}):h?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(l.Z,{title:p}),(0,G.jsx)(s.Z,{title:"Search: ".concat(n),bucketTitle:null===e||void 0===e?void 0:e.title,mediaCount:f,disableEditTitle:!0,hideSubAlbumsChip:!0}),(0,G.jsx)(W,{items:b,fetchMore:g,hasMore:!!v})]}):null}var F=n(31805);,63065:function(e,t,n){n.d(t,{Z:);var r=n(72668),i=n(16031),o=n(58467),a=n(28422),d=n(25258),l=n(80082);function c(){var e,t,n,c,s,u,h,f,v,g=(0,o.UO)().bucketId,p=void 0===g?"":g,b=(0,l.Z)().createAlert,m=(0,o.TH)(),x=new URLSearchParams(m.search).get("q")||"",Z={bucketId:p,query:x,nextToken:null!==""?"":null},k=(0,r.a)(a.Nsg,{variables:Z,onError:function(e){p||d.Z.error("Invalid bucketId in search",{bucketId:p}),d.Z.error("Error occured while searching images: ",e),b("Error while searching for images.")}}),w=(null===(e=k.data)||void 0===e||null===(t=e.bucketMediaSearch)||void 0===t?void 0:t.items)||[],M=Boolean(null===(n=k.data)||void 0===n||null===(c=n.bucketMediaSearch)||void 0===c?void 0:c.nextToken),y=(null===(s=k.data)||void 0===s||null===(u=s.bucketMediaSearch)||void 0===u?void 0:u.items.length)||0,j=null!==(h=null===(f=k.data)||void 0===f||null===(v=f.bucketMediaSearch)||void 0===v?void 0:v.nextToken)&&void 0!==h?h:null,T=(0,i.debounce)((function(){j&&k.fetchMore({variables:{nextToken:j}})}),500,{leading:!0});return{bucketId:p,query:x,nextToken:j,images:w,loading:k.loading,total:y,hasMore:M,fetchMore:T}}}}]);