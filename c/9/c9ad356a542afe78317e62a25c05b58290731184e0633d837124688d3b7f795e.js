;
(self.AMP=self.AMP||[]).push({m:0,v:"2401191523000",n:"amp-vimeo",ev:"0.1",l:!0,f:function(n,t){!function(){o=Array.isArray; f=Object.prototype,c=f.hasOwnProperty,h=f.toString;ction m(n,t,i,r,e,o,u,a,s,f,c){return n}r b,w={bubbles:!0,cancelable:!0};G=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var Y,z=self.__AMP_LOG;=ction(n){return V(n,"action")},K=function(n){return F(n,"platform")},Q=function(n){return F(n,"preconnect")},X=function(n){return $(n,"timer")},nn=function(n){return V(n,"url")},tn=rn="autoplay",en="registered",on="load",un="playing",an="pause",sn="ended",fn="muted",cn="unmuted",hn="ad_start",ln="ad_end",vn="playing_manual",dn="paused",mn="video-play",pn="user-interacted";ar bn=["<iframe frameborder=0 allowfullscreen></iframe>"];function wn(n,t){var i;null==n||null===(i=n.contentWindow)||void 0===i||i.postMessage(t,"*")}var gn,kn={"play":un,"pause":an,"ended":sn,"volumechange":null};function qn(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return JSON.stringify({"method":n,"value":t})}var jn=["Webkit","webkit","Moz","moz","ms","O","o"],xn={"getPropertyPriority":function(){return""},"getPropertyValue":function(){return""}};unction On(n){return null==n.__AMP_AUTOPLAY&&(n.__AMP_AUTOPLAY=function(n){var t,i=n.document.createElement("video");return i.setAttribute("muted",""),i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.setAttribute("height","0"),i.setAttribute("width","0"),i.muted=!0,i.playsInline=!0,i.playsinline=!0,i.webkitPlaysinline=!0,i,{position:"fixed",top:"0",width:"0",height:"0",opacity:"0"}),t=i,W((function(){return t.play()})).catch((function(){})),Promise.resolve(!i.paused)}(n)),n.__AMP_AUTOPLAY}r En=/vertical/,Pn=new WeakMap,An=new WeakMap,Rn=new WeakMap; In,_n,Un,Ln=);=['<button aria-label="Unmute video" class="i-amphtml-video-mask i-amphtml-fill-content" tabindex=0></button>'],$n=["<i-amphtml-video-icon class=amp-video-eq><div class=amp-video-eq-col><div class=amp-video-eq-filler></div><div class=amp-video-eq-filler></div></div></i-amphtml-video-icon>"];ar Zn=),Gn=),Kn={"title":"","artist":"","album":"","artwork":[{"src":""}]},Qn="video-manager",Xn=),nt=tt=function(){function n(n,t){var i=this;this.$w=n,this.wi=n.ampdoc,this.video=t,this.Gw=!0,this.Kw=!1,this.ob=!1,this.Qw=!1,this.Fi=!1,this.Xw=new Gn,this.Xw.onSessionEnd((function(){return at(i,"video-session")})),this.tx=new Gn,this.tx.onSessionEnd((),this.nx=R((),this.ix=!1,this.ox=!1,this.ux=null,this.G=!1,this.sx=!1,this.hasAutoplay=t.element.hasAttribute(rn),this.hasAutoplay&&this.$w.installAutoplayStyles(),this.hx=Kn,this.lx=this.vx=Vn(t.element,on,(function(){return i.videoLoaded()})),Vn(t.element,an,(function(){return i.mx()})),Vn(t.element,"play",(),Vn(t.element,un,(function(){return i.yx()})),Vn(t.element,fn,(),Vn(t.element,cn,(),Vn(t.element,"amp:video:tick",(),Vn(t.element,sn,(function(){i.Qw=!1,at(i,"video-ended")})),Vn(t.element,hn,(function(){i.Qw=!0,at(i,"video-ad-start")})),Vn(t.element,ln,(),t.signals().whenSignal(en).then((function(){return i.wx()})),this.gx=R((),this.xx()}var t=n.prototype;return t.dispose=t.bx=function(n,t){var i,r,e,o=(e=n,(r="__amp:eventType")in(i={})?Object.defineProperty(i,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[r]=e,i);Object.keys(t).forEach((),at(this,"video-hosted-custom",o)},t.xx=t.isMuted=function(){return this.G},t.isPlaybackManaged=function(){return this.Gw},t.wx=t.qx=t.yx=t.mx=t.videoLoaded=t.jx=t.Ox=t.Sx=t.kx=t.Tx=t.Mx=t.Px=t.updateVisibility=t.getPlayingState=t.isRollingAd=t.userInteracted=t.getAnalyticsDetails=n}(),it=);r ot=ut=);ar st="amp-vimeo",ft=function(n){!c,n);var r,a,f=(r=c,a=),;function c(n){var t;return(t=f.call(this,n)).fb=null,t.ik=R((function(){return t.rk()})),t.G=!1,t.lk=t.fk=null,t.Rb=new Ln(t.element),t}var h=c.prototype;return h.preconnectCallback=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Q(this.win),i=this.getAmpDoc();t.url(i,"https://player.vimeo.com",n),t.url(i,"https://i.vimeocdn.com",n),t.url(i,"https://f.vimeocdn.com",n)},h.isLayoutSupported=h.buildCallback=function(){var n,t,i,r;n=this.getAmpDoc(),t="video-manager",i=Xn,D(r=B(n)),r,t,i)},h.layoutCallback=function(){var n=this,t=this.element,i=U(t.getAttribute("data-videoid"),"The data-videoid attribute is required for <amp-vimeo> %s",t);return this.Wq().then((function(t){return n.Vq(function(n,t,i){return "https://player.vimeo.com/video/".concat(encodeURIComponent(n)),{"dnt":i?"1":void 0,"muted":t?"1":void 0}))}(i,t,n.element.hasAttribute("do-not-track")))}))},h.Vq=function(n){var t=function(n,t,i,r){var e=n.element,o=x(e)(bn);return function(n,t,i,r){for(var e,o=s(u(["referrerpolicy"]),!0);!(e=o()).done;){var a=e.value,f=t.getAttribute(a);null!==f&&i.setAttribute(a,f)}}(0,n.element,o),o.src=nn(e).assertHttpsUrl(t,e),o),e.appendChild(o),o}(this,n);return this.fb=t,this.fk=Vn(this.win,"message",this.lk),this.fq("ping"),this.loadPromise(t)},h.unlayoutCallback=function(){return this.pk(),this.Rb.updatePlaying(!1),!0},h.pk=function(){this.fb&&(g(this.fb),this.fb=null),this.fk&&(this.fk(),this.fk=null)},h.Wq=function(){return this.element.hasAttribute(rn)?On(this.win):Promise.resolve(!1)},h.rk=function(){var n,t,i=this.element;n=this.fb,Object.keys(kn).forEach((function(t){wn(n,qn("addEventListener",t))})),(t=i,J(t,"video-manager")).register(this),j(i,on)},h.B=function(n){if(function(n,t,i){return!(!t||n.source!=t.contentWindow)&&("string"==typeof i?i==n.origin:i.test(n.origin))}(n,this.fb,/^(https?:)?\/\/((player|www)\.)?vimeo.com(?=$|\/)/)){var t=Bn(n);if((i=t)&&(l(i)||i.startsWith("{"))){var i,r,e=l(r=t)?r:p(r);if(null!=e)if("ready"!=e.event&&"ping"!=e.method){var u,a=this.element;switch(e.event){case"play":this.Rb.updatePlaying(!0);break;case"pause":case"ended":this.Rb.updatePlaying(!1)}if(!function(n,t,i){if(null==i[t])return!1;var r=i[t];return(o(r)?r:[r]).forEach((),!0}(a,e.event,kn)&&"volumechange"==e.event){var s=e.data&&e.data.volume;if(!s)return;var f=s<=0;if(f==this.G)return;return this.G=f,void j(a,(u=f,u?fn:cn))}}else this.ik()}}},h.pauseCallback=h.pause=function(){this.fq("pause")},h.play=h.mute=h.unmute=h.isInteractive=function(){return!0},h.supportsPlatform=function(){return!0},h.preimplementsMediaSessionAPI=function(){return!0},h.preimplementsAutoFullscreen=function(){return!1},h.fullscreenEnter=function(){},h.fullscreenExit=function(){},h.isFullscreen=h.showControls=function(){},h.hideControls=function(){},h.getMetadata=h.getDuration=function(){return 0},h.getCurrentTime=h.getPlayedRanges=h.fq=function(n,t){wn(this.fb,qn(n,t))},h.seekTo=c}(n.BaseElement);n.registerElement(st,ft)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-vimeo-0.1.js.map