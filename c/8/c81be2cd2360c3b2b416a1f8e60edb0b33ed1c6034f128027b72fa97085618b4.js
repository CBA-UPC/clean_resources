"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1963],{59121:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>Xe,TEST_IDS:()=>qe});var l=i(50959),r=i(82187),n=i.n(r),a=i(27517),s=i(10226),o=i(42811),c=i(85648),u=i(87562);const d="AFZj_hxk7gFsvDDwhsHA",m="UJwngpM5puDW7Frkha4F",x="fZA1mqxFFXYzdoCs87uS",g="hVA5A4j0Jk84rRzVPic6",h="IAd52FjnzrHlY7BuFfXL",f="x34LUemkmouEY9yiADrQ",k="Xu6ZnDJTHWNZ4oCozM1c",p="ktiXGqfcVuegTncUQJim",v="u7pi5kPx9ekghoqH8RcS",y="EzVSQ6md_ZPcpGd373uw",C="xM5DXnNVIBKl0D8KmkKr",j="xZLIxv5s2tm_tmFk3WK8",A="X_fBDy8Kj2NkVB4npQT3",b="kzwtCUYq1juDuoGKeOEJ",w="L7VQQwyM5o9cLd2rtIl_",N="yMMglN43dvX2QKTUoivA",S="D0BU1OBnl1EjBDosrWXn",E="tKfqdd6glswVG49yHgiT",R="Hbbk972I34uVuWeqBn2Q",B="C6EYDB6Ad1ITBH4MMhyM",T="xI3ObXOh1ql5ZWoAUyff";var L=i(64111),M=i(67625),P=i(17676),F=i(33598),I=i(85039),V=i(19617),_=i(92432),z=i(95812),O=i(5380),D=i(4572),W=i(60046),H=i(11527);const U=e=>{let{item:t,imageUrl:i}=e;const l=(0,D.B7)(t),r=(0,H.jsx)(I.Ee,{className:N,src:i,loading:"eager",testid:qe.COVER_ART,children:(0,H.jsx)("div",{className:S,children:(0,H.jsx)(F.t,{size:"xlarge",type:t.type,"data-testid":qe.COVER_ART_PLACEHOLDER})})});return l.url?(0,H.jsx)(W.default,{className:w,to:l.url,children:r}):r},Y=()=>{const{item:e,context:t}=(0,u.x)()??{},i=L.Yw,r=(0,l.useMemo)((()=>(0,O.o)((null==e?void 0:e.images)??void 0,{desiredSize:i})),[null==e?void 0:e.images,i]),{isPlayingRemotely:n}=(0,_.H)(),a=(0,s.W6)(P.YZd),{isYourDJNarrator:o}=(0,M.NV)(),c=(0,l.useRef)(null),d=(0,l.useCallback)((()=>{var e;if(!c.current)return;const{offsetWidth:t,offsetHeight:i}=c.current,l=Math.min(640,Math.min(t,i)),r=null===(e=c.current)||void 0===e?void 0:e.children[0];r&&(r.width=r.height=l)}),[]),m=(0,V.zY)();if((0,l.useEffect)((()=>(null==m||m.addEventListener("resize",d),()=>{null==m||m.removeEventListener("resize",d)})),[d,m]),!e||!t)return null;const x=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(e);let g,h=!x;return!x||!n&&a||(h=!0),h?(g=o?(0,H.jsx)(M.r_,{}):(0,z.k6)(e)?(0,H.jsx)(U,{item:e,imageUrl:r}):(0,H.jsx)(I.Ee,{className:N,src:r,loading:"eager",testid:qe.COVER_ART,children:(0,H.jsx)("div",{className:S,children:(0,H.jsx)(F.t,{size:"xlarge",type:e.type,"data-testid":qe.COVER_ART_PLACEHOLDER})})}),(0,H.jsx)("div",{className:b,ref:e=>{c.current=e,d()},children:g})):null};i(35084),i(9393),i(75930),i(92027);var q=i(10761),X=i(80626),Z=i(69736),G=i(64961),K=i(22889),Q=i(73862),J=i(98037),$=i(24982),ee=i(82523);const te="gXC4vnPDiiiiawwnDN6i",ie="HGOZPJuKeigRY5I0vqQw",le="AZLdtyFhMa1Aqml2YhF2",re="QfiWYSeXiPwGYmKED38q";const ne=e=>{let{item:t,onClick:i,className:l}=e;const r=(0,K.QR)(t),a=(0,z.k6)(t)?null==r?void 0:r.title:t.name,s=(0,z.k6)(t)?null==r?void 0:r.subtitle:t.name,o=(0,G.G)(),c="SMALL"===(u=o.vertical)?{title:"bodySmall",subtitle:"marginal"}:"MEDIUM"===u?{title:"bodyMedium",subtitle:"bodySmall"}:{title:"titleSmall",subtitle:"bodySmall"};var u;return(0,H.jsxs)("div",{className:n()(te,l),children:[(0,H.jsx)("div",{className:ie,children:(0,H.jsx)($.R,{title:a,children:(0,H.jsx)(Z.x,{"data-testid":"context-item-info-title",as:"div",variant:c.title,className:ie,dir:"auto",children:(0,H.jsx)(J.b,{item:t,onClick:i,adUrl:null==r?void 0:r.url,children:a})})},t.uri)}),(0,H.jsx)(ee.t,{className:re,item:t,size:"DEFAULT"===o.vertical?"small":"xsmall"}),(0,H.jsx)("div",{className:le,children:(0,H.jsx)($.R,{title:s,children:(0,H.jsx)(Z.x,{"data-testid":"context-item-info-subtitles",as:"div",variant:c.subtitle,className:le,semanticColor:"textSubdued",children:(0,H.jsx)(Q._,{item:t,onClick:i})})},t.uri)})]})};var ae=i(43286),se=i(81995),oe=i(86337),ce=i(55378);const ue="yGrUaUzhqIFvdg5zlVYX",de="NSayKQ_soKzuAAg2YhAq",me="eF7BXmqMaY8xVdOtoH1Z",xe="UgnljPH_Vf14LZWb1jBu",ge={title:"bodyMediumBold",subtitle:"bodySmall"},he={title:"titleSmall",subtitle:"bodyMedium"},fe=l.memo((()=>{const{openURLWithSessionTransfer:e}=(0,oe.e)(),t="SMALL"===(0,G.G)().vertical?ge:he,i=(0,s.W6)(P.yaB),r=(0,ce.d)("loggedin_upgrade_button"),a=(0,l.useCallback)((()=>{e(r(se.IT),"_blank")}),[r,e]);return(0,H.jsx)("div",{className:ue,children:(0,H.jsxs)("div",{className:n()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":i},de),children:[(0,H.jsx)(Z.x,{variant:t.title,dir:"auto",className:me,children:c.ag.get("web-player.pip-mini-player.upsell.title")}),(0,H.jsx)(Z.x,{variant:t.subtitle,semanticColor:"textSubdued",children:c.ag.get("web-player.pip-mini-player.upsell.subtitle")}),(0,H.jsx)("div",{className:xe,children:(0,H.jsx)(ae.D,{onClick:a,size:"small",children:c.ag.get("web-player.pip-mini-player.upsell.cta-button")})})]})})}));var ke=i(7863),pe=i(24071),ve=i(15448),ye=i(89029),Ce=i(39378),je=i(14413);const Ae=()=>(0,H.jsx)("svg",{width:"7",height:"8",viewBox:"0 0 7 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:f,children:(0,H.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.37397 1.94965C6.60829 1.71534 6.60829 1.33544 6.37397 1.10113C6.13966 0.866812 5.75976 0.866812 5.52544 1.10113L3.47461 3.15196L1.42422 1.10157C1.18991 0.86726 0.81001 0.86726 0.575695 1.10158C0.341381 1.33589 0.341381 1.71579 0.575695 1.9501L2.62608 4.00049L0.575696 6.05087C0.341381 6.28519 0.341381 6.66509 0.575696 6.8994C0.81001 7.13372 1.18991 7.13372 1.42422 6.8994L3.47461 4.84902L5.52544 6.89985C5.75976 7.13416 6.13966 7.13416 6.37397 6.89985C6.60829 6.66554 6.60829 6.28564 6.37397 6.05132L4.32314 4.00049L6.37397 1.94965Z",fill:"#912616"})}),be=l.memo((()=>"SMALL"!==(0,G.G)().vertical?(0,H.jsxs)("svg",{className:g,width:"14",height:"6",viewBox:"0 0 14 6",fill:"none",children:[(0,H.jsx)("circle",{cx:"1",cy:"5",r:"1",transform:"rotate(-90 1 5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"1",cy:"1",r:"1",transform:"rotate(-90 1 1)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"5",cy:"5",r:"1",transform:"rotate(-90 5 5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"5",cy:"1",r:"1",transform:"rotate(-90 5 1)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"9",cy:"5",r:"1",transform:"rotate(-90 9 5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"9",cy:"1",r:"1",transform:"rotate(-90 9 1)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"13",cy:"5",r:"1",transform:"rotate(-90 13 5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"13",cy:"1",r:"1",transform:"rotate(-90 13 1)",fill:"#A7A7A7"})]}):(0,H.jsxs)("svg",{className:g,width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",children:[(0,H.jsx)("circle",{cx:"4.5",cy:"10.5",r:"0.75",transform:"rotate(180 4.5 10.5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"1.5",cy:"10.5",r:"0.75",transform:"rotate(180 1.5 10.5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"4.5",cy:"7.5",r:"0.75",transform:"rotate(180 4.5 7.5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"1.5",cy:"7.5",r:"0.75",transform:"rotate(180 1.5 7.5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"4.5",cy:"4.5",r:"0.75",transform:"rotate(180 4.5 4.5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"1.5",cy:"4.5",r:"0.75",transform:"rotate(180 1.5 4.5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"4.5",cy:"1.5",r:"0.75",transform:"rotate(180 4.5 1.5)",fill:"#A7A7A7"}),(0,H.jsx)("circle",{cx:"1.5",cy:"1.5",r:"0.75",transform:"rotate(180 1.5 1.5)",fill:"#A7A7A7"})]}))),we=e=>{let{className:t}=e;const{setVideoPlayerUIFlag:i}=(0,ve.l)(),{onClick:r}=(0,Ce.r)({}),a=(0,l.useCallback)((()=>{i(je.x.documentPip,!1),r()}),[i,r]),s=(0,pe.tc)();return(0,H.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:n()(t,x),children:[(0,H.jsx)("button",{className:h,onClick:a,children:s.operatingSystem===ye.U.macOS?(0,H.jsx)(Ae,{}):(0,H.jsx)(ke.k,{size:"xsmall",className:f})}),(0,H.jsx)(be,{}),(0,H.jsx)("div",{className:k})]})};var Ne=i(78928),Se=i(49857),Ee=i(5245),Re=i(36054),Be=i(6056),Te=i(1082),Le=i(21177),Me=i(59404),Pe=i(8570),Fe=i(43806),Ie=i(70526);function Ve(e){var t;return{itemToBeSkipped:(null===(t=e.item)||void 0===t?void 0:t.uri)||"",positionMs:(0,Fe.k)(e)??-1,totalContentMs:e.duration??-1}}function _e(e){return Math.floor(100*e)}const ze="E7rR1kkQFoqCTrZAxs8l",Oe="I2v17dp_FDztHzG7CZy9",De="H5VJw6yCxUOoh88LJ42y",We=l.memo((e=>{let{item:t,spec:i,logger:r}=e;const n=t.uri,{onClickPlayPause:a,onClickLike:s,onClickSkipPrevious:o,onClickSkipNext:c,onClickRepeat:u,onClickShuffle:d,onClickVolumeButton:m,onClickVolumeBar:x,onDragVolumeBar:g,onClickSeekBack:h,onClickSeekForward:f}=(e=>{let{uri:t,spec:i,logger:r}=e;const n=(0,l.useRef)(t);n.current=t;const a=(0,Pe.g)(),s=(0,l.useMemo)((()=>i.playerControlsFactory()),[i]),o=(0,l.useCallback)((e=>{let t=null;n.current&&("pause"===e?t=s.playPauseButtonFactory().hitPause({itemToBePaused:n.current}):"resume"===e&&(t=s.playPauseButtonFactory().hitResume({itemToBeResumed:n.current})),t&&r.logInteraction(t))}),[r,s]),c=(0,l.useCallback)((e=>{if(!n.current)return;const t=s.likeButtonFactory(),i=e?t.hitLike({itemToBeLiked:n.current}):t.hitRemoveLike({itemNoLongerLiked:n.current});r.logInteraction(i)}),[r,s]),u=(0,l.useCallback)((()=>{const e=a.getState();if(!e)return;const t=s.previousButtonFactory().hitSkipToPrevious(Ve(e));r.logInteraction(t)}),[r,a,s]),d=(0,l.useCallback)((()=>{const e=a.getState();if(!e)return;const t=s.nextButtonFactory().hitSkipToNext(Ve(e));r.logInteraction(t)}),[r,a,s]),m=(0,l.useCallback)((e=>{const t=s.repeatButtonFactory();let i=null;switch(e){case z.zq.REPEAT_TRACK:i=t.hitRepeatOneEnable();break;case z.zq.REPEAT_CONTEXT:i=t.hitRepeatEnable();break;case z.zq.REPEAT_NONE:i=t.hitRepeatDisable();break;default:(0,Ie._)(e)}i&&r.logInteraction(i)}),[r,s]),x=(0,l.useCallback)((e=>{if(!n.current)return;const t=e?"shuffle":"linear",i=e?"linear":"shuffle",l=s.shuffleButtonFactory({uri:n.current}).hitSelectShuffleMode({previousMode:i,selectedMode:t});r.logInteraction(l)}),[r,s]),g=(0,l.useCallback)((e=>{const t=s.volumeMuteButtonFactory();r.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[r,s]),h=(0,l.useCallback)((e=>{const t=s.volumeBarFactory();r.logInteraction(t.hitSetVolume({newVolumePercentage:_e(e)}))}),[r,s]),f=(0,l.useCallback)((e=>{const t=s.volumeBarFactory();r.logInteraction(t.dragSetVolume({newVolumePercentage:_e(e)}))}),[r,s]),k=(0,l.useCallback)((e=>{const t=s.seekBackwardButtonFactory();r.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[r,s]);return{onClickSeekForward:(0,l.useCallback)((e=>{const t=s.seekForwardButtonFactory();r.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[r,s]),onClickSeekBack:k,onClickPlayPause:o,onClickLike:c,onClickSkipPrevious:u,onClickSkipNext:d,onClickRepeat:m,onClickShuffle:x,onClickVolumeButton:g,onClickVolumeBar:h,onDragVolumeBar:f}})({uri:n,spec:i,logger:r}),k=(0,G.G)(),p=(0,Se.y1)(g,500,{leading:!1,trailing:!0});if(!n)return null;const v=(0,Re.G)(t),y=(0,Ee.i)(t),C=(0,z.k6)(t),j=function(e){if((0,Ee.i)(e)||(0,z.G7)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(t),A="SMALL"===k.horizontal,b="SMALL"===k.vertical,w="MEDIUM"===k.vertical;return b?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Le.IF,{onClick:a}),j||C?(0,H.jsx)(Le.Of,{onClick:f}):(0,H.jsx)(Le.C$,{onClick:c})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:ze,children:[v&&(0,H.jsx)(Te.B,{uri:n,onClick:s,className:Oe}),y&&(0,H.jsx)(Be.w,{uri:n,onClick:s,className:Oe})]}),j||C?(0,H.jsx)(Le.FP,{onClick:h}):(0,H.jsx)(Le.P4,{onClick:d}),!C&&(0,H.jsx)(Le.Wu,{onClick:o}),(0,H.jsx)(Le.IF,{iconSize:A||w?"small":"medium",onClick:a,className:De}),!C&&(0,H.jsx)(Le.C$,{onClick:c}),j||C?(0,H.jsx)(Le.Of,{onClick:f}):(0,H.jsx)(Le.$Z,{onClick:u}),(0,H.jsx)(Me.h,{mode:Me.R.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:m,onVolumeBarClick:x,onVolumeBarDrag:p})]})}));var He=i(28369),Ue=i(23153);var Ye=i(65019);const qe={HOVER_CONTAINER:"document-pip-hover-element",COVER_ART:"document-pip-cover-art",COVER_ART_PLACEHOLDER:"document-pip-cover-art-placeholder"},Xe=l.memo((()=>{var e;const{item:t,context:i}=(0,u.x)()??{},[r,x]=(0,l.useState)(!1),g=L.Yw,h=(0,s.W6)(P.nN2),f=(0,s.W6)(P.yaB),k=(0,l.useMemo)((()=>(0,O.o)((null==t?void 0:t.images)??void 0,{desiredSize:g})),[null==t?void 0:t.images,g]),b=(0,q.b)(k,L.XW),w=(0,s.W6)(P.YZd);((e,t)=>{const i=(0,Ye.Y)((e=>{var t;return null==e||null===(t=e.nextItems)||void 0===t?void 0:t[0]}),((e,t)=>(null==e?void 0:e.uri)===(null==t?void 0:t.uri))),r=(0,l.useMemo)((()=>(0,O.o)((null==i?void 0:i.images)??void 0,{desiredSize:e})),[null==i?void 0:i.images,e]);(0,q.b)(r,t)})(g,L.XW);const{spec:N,logger:S}=(0,X.fU)(o.O,{});(e=>{let{spec:t,logger:i}=e;const r=(0,V.zY)(),n=(0,l.useRef)(null);null===n.current&&(n.current=(0,Ue.b)(r)),(0,He.a)((()=>{const e=(0,Ue.b)(r);null!==e&&null!==n.current&&(i.logInteraction(t.dragUiResize2d({startWidthPx:n.current.width,startHeightPx:n.current.height,endWidthPx:e.width,endHeightPx:e.height})),n.current=e)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:S,spec:N}),(e=>{let{spec:t,logger:i,pipWindow:r}=e;(0,l.useEffect)((()=>{if(!r)return;const e=e=>{if(e.currentTarget===r){const e=t.windowControlsFactory().closeButtonFactory().hitUiHide();i.logInteraction(e)}};return r.addEventListener("pagehide",e),()=>{r.removeEventListener("pagehide",e)}}),[i,r,t])})({logger:S,spec:N,pipWindow:(null===(e=window.documentPictureInPicture)||void 0===e?void 0:e.window)??null});const{setVideoPlayerUIFlag:M}=(0,ve.l)(),[F,I]=(0,l.useState)("");(0,l.useLayoutEffect)((()=>{I(m)}),[]);const _=function(){const e=(0,V.zY)(),[t,i]=(0,l.useState)(!1);return(0,He.a)((()=>{const t=(0,Ue.b)(e);null!==t&&(t.width<=300&&t.height<=300?i(!0):i(!1))}),{throttleTime:500,leading:!1,trailing:!0}),t}();(0,l.useEffect)((()=>{w&&M(je.x.documentPip,!0)}),[w,M]);const D=(0,l.useCallback)((e=>{var t,i,l;(l=e.target)&&"object"==typeof l&&"nodeName"in l&&"A"===l.nodeName&&("_blank"!==e.target.target&&("showMainWindow"in window?null===(t=(i=window).showMainWindow)||void 0===t||t.call(i):x(!0)))}),[]);((e,t)=>{const i=(0,V.zY)(),r=t??i;(0,l.useEffect)((()=>{e&&r&&(r.document.title=e)}),[e,r])})(c.ag.get("web-player.pip-mini-player.window-title")),(0,l.useEffect)((()=>{if(r){const e=setTimeout((()=>{x(!1)}),3e3);return()=>{clearTimeout(e)}}}),[r]);const W=(0,l.useRef)(null),[U,Z]=(0,l.useState)(!1),G=(0,l.useRef)(null),K=(0,l.useRef)(null),Q=(0,l.useCallback)((()=>{Z(!0),G.current&&clearTimeout(G.current),G.current=setTimeout((()=>{Z(!1);const e=function(e,t,i,l){try{if(!e)return i;const r=getComputedStyle(e);if(!r)return i;const n=r.getPropertyValue(t),a=parseInt(n.replace(l,""),10);return isNaN(a)?i:a}catch(r){return i}}(W.current,"--mouse-active-over-controls-fadeout-timeout",300,"ms");K.current&&clearTimeout(K.current),K.current=setTimeout((()=>{K.current=null}),e)}),1e3)}),[]),J=(0,l.useCallback)((()=>{K.current||Z(!1)}),[]);if(!t||!i)return null;const $={"--background-color":b,"--background-image-url":`url(${k})`,"--background-image-width":`${g}px`,"--background-image-height":`${g}px`,display:"var(--mini-player-display)"},ee=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(t),te=(0,z.k6)(t);return!h&&!te&&_?(0,H.jsx)(fe,{}):(0,H.jsxs)("div",{ref:W,className:n()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":f},d),style:{"--mini-player-display":"none","--mini-player-drag-display":"none"},children:[(0,H.jsx)(we,{}),(0,H.jsxs)("div",{className:n()(p,v),style:$,children:[(0,H.jsx)("div",{className:n()(C,{[j]:!ee}),"data-testid":"pip-hover-element",children:(0,H.jsx)("div",{className:A,id:"document-pip-main-container",children:(0,H.jsx)(Y,{})})}),(0,H.jsx)(ne,{item:t,className:T,onClick:D}),(0,H.jsx)("div",{className:n()("encore-over-media-set",E,{[B]:U,[R]:!(0,z.k6)(t)}),dir:"ltr","data-testid":qe.HOVER_CONTAINER,onMouseEnter:Q,onMouseMove:Q,onMouseLeave:J,children:(0,H.jsx)(We,{item:t,spec:N,logger:S})})]}),(0,H.jsx)("div",{className:F,children:(0,H.jsx)(Ne.E,{fadeIn:!1})}),(0,H.jsx)(a.A9,{colorSet:"invertedLight",showSnackbar:r,className:y,children:c.ag.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")})]})}))},23153:(e,t,i)=>{function l(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}i.d(t,{b:()=>l})},64111:(e,t,i)=>{i.d(t,{XW:()=>r,Yw:()=>l});const l=640,r="transparent"}}]);
//# sourceMappingURL=xpui-pip-mini-player.fbc08bf1.js.map