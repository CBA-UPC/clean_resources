var _RFE_module_custom_print=webpackJsonp_RFE_module__name_([48],{154:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reflectForm=function(){for(var e,i,n=0;n<t.checkbox.length;n++)if(i=document.querySelectorAll(t.opts[n]),e=t.toHideSel.indexOf(t.opts[n]),t.checkbox[n].checked){t.toHideSel.splice(e,1);for(var o=0;o<i.length;o++)$dom.removeClass(i[o],t.prevPrintEl)}else if(e<0){t.toHideSel.push(t.opts[n]);for(var o=0;o<i.length;o++)$dom.addClass(i[o],t.prevPrintEl)}},t.printWraps=function(){if(document.querySelectorAll(".wsw__print-wrap").length<1)for(var e=document.querySelectorAll(".wsw__h1,.wsw__h2,.wsw__h3,.wsw__h4,.wsw__h5,.wsw__h6"),t=0;t<e.length;t++){var i=e[t].nextElementSibling;if(i&&i!==e[t+1]){var n=document.createElement("div");n.className="wsw__print-wrap",e[t].parentNode.insertBefore(n,e[t]),n.appendChild(e[t]),n.appendChild(i)}}},t.showDialogue=function(){$dom.hasClass(t.body,t.prevPrint)||($dom.removeClass(t.body,t.stdPrint),$dom.addClass(t.body,t.prevPrint),t.hdrInner&&$dom.addClass(t.hdrInner,"container"),t.printWraps(),t.reflectForm(),setTimeout(function(){t.body.style.paddingTop=t.dialogue.getBoundingClientRect().height+20+"px"},100))},t.exitDialogue=function(){if($dom.hasClass(t.body,t.prevPrint)){$dom.removeClass(t.body,t.prevPrint),t.hdrInner&&$dom.removeClass(t.hdrInner,"container"),$dom.addClass(t.body,t.stdPrint);for(var e=document.querySelectorAll(t.prevPrintEl),i=0;i<e.length;i++)$dom.removeClass(e[i],t.prevPrintEl);t.body.style.paddingTop="0",RFE.triggerCustomEvent(document,"printDialogueClose")}},t.keyHandler=function(e){27===e.keyCode&&t.exitDialogue()},t.printHandler=function(){window.print()},t}return o(t,e),t.prototype.initGlobal=function(){this.printButton=document.querySelectorAll(".btn-print"),this.closeButton=document.querySelector(".close-button"),this.custPrintButton=document.querySelector(".btn-cust-print"),this.body=document.body,this.dialogue=document.querySelector(".print-dialogue "),this.hdrInner=document.querySelector(".hdr-20__inner"),this.stdPrint="print-lay-article",this.prevPrint="print-preview",this.prevPrintEl="print-preview__el",this.images=".img-wrap,.img-wrap + figcaption,.quiz,.infographic,.content-map,.col-multimedia .cover-media,.photogallery,.featured-article__header .caption",this.multimedia=".media-pholder--video,.media-pholder--audio,.wsw__embed .flexible-iframe",this.embedded=".infgraphicsAttach,.externalMedia,.also-read",this.comments=".comments, #comments",this.toHideSel=[],this.checkbox=[document.getElementById("checkboxImages"),document.getElementById("checkboxMultimedia"),document.getElementById("checkboxEmbedded"),document.getElementById("checkboxComments")],this.opts=[this.images,this.multimedia,this.embedded,this.comments];for(var e=0;e<this.checkbox.length;e++)this.checkbox[e].addEventListener("change",this.reflectForm);for(var e=0;e<this.printButton.length;e++)this.printButton[e].addEventListener("click",this.showDialogue);return this.closeButton.addEventListener("click",this.exitDialogue),this.custPrintButton.addEventListener("click",this.printHandler),window.addEventListener("keydown",this.keyHandler),!0},t.prototype.deinitGlobal=function(){this.body=null,this.stdPrint="",this.prevPrint="",this.prevPrintEl="",this.images="",this.multimedia="",this.embedded="",this.comments="",this.toHideSel=[],this.checkbox=[],this.opts=[];for(var e=0;e<this.checkbox.length;e++)this.checkbox[e].removeEventListener("change",this.reflectForm);for(var e=0;e<this.printButton.length;e++)this.printButton[e].removeEventListener("click",this.showDialogue);this.closeButton.removeEventListener("click",this.exitDialogue),this.custPrintButton.removeEventListener("click",this.printHandler),window.removeEventListener("keydown",this.keyHandler),this.printButton=null,this.closeButton=null,this.custPrintButton=null,this.dialogue=null},t}(n.a);t.default=r}},[154]);
_resourceLoaderReceiver_1();ticstag_event=webpackJsonp_RFE_module__name_([67],{118:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=a(0),n=this&&this.__extends||function(){var t=function(i,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])})(i,a)};return function(i,a){function o(){this.constructor=i}t(i,a),i.prototype=null===a?Object.create(a):(o.prototype=a.prototype,new o)}}(),e=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.onHeaderNavigationClick=function(t){i.onNavigationClick(t,"Top Navigation")},i.onFooterNavigationClick=function(t){i.onNavigationClick(t,"Footer Navigation")},i.onNavigationClick=function(t,i){var a=window._satellite,o=window.digitalData,n=window.s;void 0!==o&&o&&void 0!==a&&a&&(o.page&&(o.navInfo={linkPage:n&&n.pageName||t.target.innerHTML,linkName:t.target.innerHTML,linkPosition:i}),a.track("Navigation"))},i.socialFollowClick=function(t){var i=$dom.hasClass(t.target,"js-social-btn")?t.target:$dom.ancestor(t.target,".js-social-btn"),a=i?i.getAttribute("data-analytics-text"):null;if(i&&a){var o={share_type:a,on_page_event:a,tealium_event:"social media",link_category:"social media",link_url:i.href,link_text:i.title,content_type:window.utag_data.content_type,subcontent_type:window.utag_data.subcontent_type,section:window.utag_data.section,page_type:window.utag_data.page_type,language:window.utag_data.language,language_service:window.utag_data.language_service,short_language_service:window.utag_data.short_language_service,platform:window.utag_data.platform,platform_short:window.utag_data.platform_short,entity:window.utag_data.entity,pangea_version:window.utag_data.pangea_version,property_id:window.utag_data.property_id,enviro_type:window.utag_data.enviro_type,page_name:window.utag_data.page_name};window.FireAnalyticsTagEvent(o)}var n=window._satellite,e=window.digitalData,l=window.s;void 0!==e&&e&&void 0!==n&&n&&e.page&&(e.page.social={social:{socialFollowPage:l.pageName,socialFollowPlatform:t.target.className.replace("ico ico-","")}},n.track("socialFollow"))},i}return n(i,t),i.prototype.initGlobal=function(){return this.initNavigation(),this.initSocial(),!0},i.prototype.deinitGlobal=function(){this.deinitNavigation(),this.deinitSocial()},i.prototype.initNavigation=function(){this.navigationLinksHeader=document.querySelectorAll("div#navigation a.handler");for(var t=0;t<this.navigationLinksHeader.length;t++)this.navigationLinksHeader[t].addEventListener("click",this.onHeaderNavigationClick);this.navigationLinksFooter=document.querySelectorAll("div#foot-nav a.handler");for(var t=0;t<this.navigationLinksFooter.length;t++)this.navigationLinksFooter[t].addEventListener("click",this.onFooterNavigationClick)},i.prototype.deinitNavigation=function(){for(var t=0;t<this.navigationLinksHeader.length;t++)this.navigationLinksHeader[t].removeEventListener("click",this.onHeaderNavigationClick);for(var t=0;t<this.navigationLinksFooter.length;t++)this.navigationLinksFooter[t].removeEventListener("click",this.onFooterNavigationClick)},i.prototype.initSocial=function(){this.socialFollowLinks=document.querySelectorAll(".js-social-btn");for(var t=0;t<this.socialFollowLinks.length;t++)this.socialFollowLinks[t].addEventListener("click",this.socialFollowClick)},i.prototype.deinitSocial=function(){for(var t=0;t<this.socialFollowLinks.length;t++)this.socialFollowLinks[t].removeEventListener("click",this.socialFollowClick)},i}(o.a);i.default=e}},[118]);
var _RFE_module_whatsapp_share_button=webpackJsonp_RFE_module__name_([70],{593:function(t,e){RFE.Module.extend({name:"WhatsApp share button",loadable:!0,lazyLoadable:!1,init:function(t,e){var n=this,o=function(){this.buttons=[],!0===this.isIos&&this.cntLdd(window,this.crBtn)};o.prototype.isIos=!(!navigator.userAgent.match(/Android|iPhone/i)||navigator.userAgent.match(/iPod|iPad/i)),o.prototype.cntLdd=function(t,e){var n=!1,o=!0,i=t.document,a=i.documentElement,r=i.addEventListener?"addEventListener":"attachEvent",d=i.addEventListener?"removeEventListener":"detachEvent",c=i.addEventListener?"":"on",s=function(o){"readystatechange"===o.type&&"complete"!==i.readyState||(("load"===o.type?t:i)[d](c+o.type,s,!1),!n&&(n=!0)&&e.call(t,o.type||o))},l=function(){try{a.doScroll("left")}catch(t){return void setTimeout(l,50)}s("poll")};if(a.initHandler=s,"complete"===i.readyState)e.call(t,"lazy");else{if(i.createEventObject&&a.doScroll){try{o=!t.frameElement}catch(t){}o&&l()}i[r](c+"DOMContentLoaded",s,!1),i[r](c+"readystatechange",s,!1),t[r](c+"load",s,!1)}},o.prototype.addStyling=function(){var t=document.createElement("style"),e="[[minified_css]]";return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),t},o.prototype.setButtonAttributes=function(t){var e=t.getAttribute("data-href"),n="?text="+encodeURIComponent(t.getAttribute("data-text"))+(t.getAttribute("data-text")?"%20":"");return n+=e?encodeURIComponent(e):encodeURIComponent(document.URL),t.setAttribute("target","_top"),t.setAttribute("href",t.getAttribute("href")+n),t.setAttribute("onclick","window.parent."+t.getAttribute("onclick")),t},o.prototype.setIframeAttributes=function(t){var e=document.createElement("iframe");return e.width=1,e.height=1,e.button=t,e.style.border=0,e.style.overflow="hidden",e.border=0,e.setAttribute("scrolling","no"),e.addEventListener("load",n.WASHAREBTN.iFrameOnload()),e},o.prototype.iFrameOnload=function(){return function(){this.contentDocument.body.appendChild(this.button),this.contentDocument.getElementsByTagName("head")[0].appendChild(n.WASHAREBTN.addStyling());var t=document.createElement("meta");t.setAttribute("charset","utf-8"),this.contentDocument.getElementsByTagName("head")[0].appendChild(t),this.width=Math.ceil(this.contentDocument.getElementsByTagName("a")[0].getBoundingClientRect().width),this.height=Math.ceil(this.contentDocument.getElementsByTagName("a")[0].getBoundingClientRect().height)}},o.prototype.crBtn=function(){for(var t=[].slice.call(document.querySelectorAll(".wa_btn")),e=[],o=0;o<t.length;o++)n.WASHAREBTN.buttons.push(t[o]),t[o]=n.WASHAREBTN.setButtonAttributes(t[o]),e[o]=n.WASHAREBTN.setIframeAttributes(t[o]),t[o].parentNode.insertBefore(e[o],t[o])},n.WASHAREBTN=new o},deinit:function(t){document.removeEventListener("DOMContentLoaded",this.initHandler,!1),document.removeEventListener("readystatechange",this.initHandler,!1),window.removeEventListener("load",this.initHandler,!1)}})}},[593]);
var _RFE_module_multimedia_player_utils=webpackJsonp_RFE_module__name_([90],{547:function(e,t){!function(e){e.multimediaPlayerUtils={},e.multimediaPlayerUtils.getMediaElement=function(t){if(t)return e.select("video, audio",t)[0]},e.multimediaPlayerUtils.toHms=function(e){var t=function(e){return e<10?"0"+e:e};return e>3600?Math.floor(e/3600)+":"+t(Math.floor(e%3600/60))+":"+t(Math.floor(e%3600%60)):Math.floor(e%3600/60)+":"+t(Math.floor(e%3600%60))},e.multimediaPlayerUtils.hmsToS=function(e){if(e){for(var t=e.split(":"),i=0,o=1;t.length>0;)i+=o*parseInt(t.pop(),10),o*=60;return i}},e.multimediaPlayerUtils.copyToClipboard=function(t,i){t.focus(),t.setSelectionRange(0,t.value.length);var o;try{o=document.execCommand("copy")}catch(e){o=!1}if(o&&i){e.addClass("c-mmp__status-msg--displayed",i),clearTimeout("copiedTimeout");setTimeout(function(){e.removeClass("c-mmp__status-msg--displayed",i)},1e4)}},e.multimediaPlayerUtils.getEmbedCode=function(t){var i=e.hasClass("c-mmp--audio",t),o=e.select(".js-tab-embed-overlay",t)[0],a=e.data(o,"embed-source"),l=i?"100%":e.select(".js-video-embed-width",o)[0].value,r=i?"144":e.select(".js-video-embed-height",o)[0].value;return'<iframe src="'+location.protocol+a+'" frameborder="0" scrolling="no" width="'+l+'" height="'+r+'" allowfullscreen></iframe>'}}(window.RFE)}},[547]);
var _RFE_module_multimedia_player_mpd=webpackJsonp_RFE_module__name_([92],{545:function(module,exports){function mpegDash(playerApi){this.playerApi=playerApi,this.oPl=this.playerApi.oPlayer,this.oMedia=this.playerApi.oMedia,this.type=this.playerApi.mediaType,this.dashMediaSource,this.mpd,this.dashAutoPreload=""===RFE.data(this.oMedia,"preload"),this.dashAutoPaused=!1,this.throughputArray=[],this.latencyArray=[],this.debug=""===RFE.data(this.oMedia,"debug"),this.bufferAheadLimit=30,this.defaultAudioBandwidth=100,this.defaultVideoBandwidth=1e3,this.bufFeedingTimer=this.loadingIndicatorTimer=null,this.scheduleLoadNextSegmentTimeout=500,this.preloadAheadInterval=this.preloadAheadCooldown=10,this.preloadAheadActive=!0,this.preloadAheadIntervalPaused=30,this.xhrWithCredentials=!1,this.bufferHealthHistory=[],this.playReady=!0,this.mpdUrl="",this.mpdSrc=null,this.mpdPlaybackEnded=!1,this.mpdInitCache={},this.dataSources=eval(RFE.data(this.oMedia,"sources")),this.cancelSeekRebuffer=!1,this.bufferHolesJumpSafeguardTime=5,this.isDynamic=!1,this.seekTarget=null,this.clientServerTimeShift=null,this.manifestRefreshTimer=null,this.manifestRefreshTimeout=6e3,this.forcedDynamicVideoRepresentationId=null,this.originalDynamicVideoRepresentation=null,this.adaptiveVideoEnabled=!0,this.backupMpdUrl=RFE.data(this.oMedia,"backup"),this.isBackup=!1,this.loadAttemptCount=0,this.initSegmentLoaded=this.initSegmentLoaded.bind(this),this.dataSources&&(this.mpdSrc=RFE.filter(this.dataSources,function(e,t){return"application/dash+xml"===e.Type})),this.mpdSrc&&this.mpdSrc.length>0&&(this.mpdUrl=this.mpdSrc[0].Src)}mpegDash.prototype.parseMpd=function(e){var t=function(e,t,a,i){var n=a.getAttribute(e);n&&(i[e]=t?t(n):n)},a=function(e,t,a,i,n){var r=[];if(null==a)return r;for(var s=a.firstElementChild;null!=s;s=s.nextElementSibling)if(s.nodeName==e)if(t){var d=t(s);i&&"object"==typeof d&&(d[n]=i),r.push(d)}else r.push(s.textContent);return r},i=function(e,t,i,n,r){var s=a(e,t,i,n,r);return s&&s.length>0?s[0]:null},n=function(e){var t=/PT(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?/,a=t.exec(e);return a?3600*parseFloat(a[2]||0)+60*parseFloat(a[4]||0)+parseFloat(a[6]||0):parseFloat(e)},r=function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var a=parseInt(t[1]),i=parseInt(t[2]);return{start:a,end:i,length:i-a+1}},s=function(e){var t=/([0-9]+)(\/([0-9]+))?/.exec(e);return t?t[3]?parseFloat(t[1])/(parseFloat(t[3])||1):parseFloat(t[1]):1},d=function(e){return new Date(Date.parse(e))},o=function(e){var a={};return t("schemeIdUri",null,e,a),t("value",d,e,a),a},u=function(e){var i={};return t("id",parseInt,e,i),t("start",n,e,i),t("duration",n,e,i),i.adaptationSets=a("AdaptationSet",l,e,i,"period"),i},l=function(e){var i={};return t("mimeType",null,e,i),i.segmentTemplate=a("SegmentTemplate",p,e)[0],i.representations=a("Representation",m,e,i,"adaptationSet"),i},p=function(e){var a={};return t("duration",parseInt,e,a),t("initialization",null,e,a),t("media",null,e,a),t("presentationTimeOffset",parseInt,e,a),t("startNumber",parseInt,e,a),t("timescale",parseInt,e,a),a},m=function(e){var i={};return t("id",null,e,i),t("profiles",null,e,i),t("width",parseInt,e,i),t("height",parseInt,e,i),t("frameRate",s,e,i),t("audioSamplingRate",parseInt,e,i),t("mimeType",null,e,i),t("codecs",null,e,i),t("bandwidth",parseInt,e,i),t("qualityRanking",parseInt,e,i),i.baseURLs=a("BaseURL",null,e),i.segmentBase=a("SegmentBase",h,e)[0],i.segmentList=a("SegmentList",f,e)[0],i},f=function(e){var t=h(e);return t.durationSeconds=t.timescale&&t.duration?t.duration/t.timescale:t.duration,t.initialization=a("Initialization",c,e)[0],t.segmentURLs=a("SegmentURL",g,e),t},g=function(e){var a={};return t("media",null,e,a),t("mediaRange",r,e,a),t("index",null,e,a),t("indexRange",r,e,a),a},h=function(e){var i={};return t("timescale",parseInt,e,i),t("duration",parseInt,e,i),t("indexRange",r,e,i),t("presentationTimeOffset",parseInt,e,i),t("startNumber",parseInt,e,i),i.initialization=a("Initialization",c,e)[0],i},c=function(e){return r(e.attributes.range.value)},y=(new DOMParser).parseFromString(e,"text/xml"),v=y.getElementsByTagName("MPD")[0];return this.mpd={manifestUrl:this.oMedia.src},t("mediaPresentationDuration",n,v,this.mpd),t("type",null,v,this.mpd),t("minBufferTime",n,v,this.mpd),t("suggestedPresentationDelay",n,v,this.mpd),t("availabilityStartTime",d,v,this.mpd),t("timeShiftBufferDepth",n,v,this.mpd),this.mpd.baseUrl=i("BaseURL",null,v),this.mpd.utcTiming=i("UTCTiming",o,v),this.mpd.periods=a("Period",u,v),this.mpd},mpegDash.prototype.log=function(){if(this.debug&&console)try{console.log.apply(this,arguments)}catch(e){console.log(arguments)}},mpegDash.prototype.normalizeRepresentationForBuffer=function(e){var t=this,a=e.baseURLs[0],i=t.mpd.baseUrl?t.mpd.baseUrl:t.mpd.manifestUrl;a.match(/^[a-z]*:\/\//)||(a=("/"===a[0]?i.match(/^[a-z]*:\/\/[^\/]*/)[0]:i.replace(/\/[^\/]*$/,"/"))+a);var n={url:a,bandwidth:e.bandwidth,duration:t.getDuration(),adaptationSet:e.adaptationSet,id:e.id,height:e.height},r=null,s=null;if(null!=e.segmentBase){var d=e.segmentBase;r=d.initialization,null!=d.indexRange&&(s=d.indexRange)}else null!=e.segmentList&&(r=e.segmentList.initialization);if(n.initialization={start:null,end:null,path:null,value:null},t.isDynamic)n.initialization.path=e.adaptationSet.segmentTemplate.initialization.split("$Bandwidth$").join(n.bandwidth).split("$RepresentationID$").join(e.id),n.segmentDuration=e.adaptationSet.segmentTemplate.duration/e.adaptationSet.segmentTemplate.timescale,n.startNumber=e.adaptationSet.segmentTemplate.startNumber;else if(n.initialization.start=r.start,n.initialization.end=r.end,s)n.indexRange={start:s.start,end:s.end};else{var o=e.segmentList.segmentURLs.length,u=o+1,l={count:0,offsets:new Float64Array(u),startTimes:new Float32Array(u),isCapped:!0},p=e.segmentList.durationSeconds;n.index=l;for(var m=0;m<o;m++){var f=e.segmentList.segmentURLs[m];l.count++,l.offsets[m]=f.mediaRange.start,l.startTimes[m]=m>0?l.startTimes[m-1]+p:0,m===e.segmentList.segmentURLs.length-1&&(l.offsets[m+1]=f.mediaRange.end+1,l.startTimes[m+1]=t.dashMediaSource.duration)}}return n},mpegDash.prototype.getDuration=function(){return this.mpd.periods[0].duration||this.mpd.mediaPresentationDuration||Number.MAX_VALUE},mpegDash.prototype.getRangeForTime=function(e,t){for(var a=e.buffered,i=0;i<a.length;i++)if(a.start(i)<=t&&a.end(i)>=t)return{start:a.start(i),end:a.end(i),index:i}},mpegDash.prototype.appendToBuffer=function(e,t){try{e.appendBuffer?e.appendBuffer(t):e.append(new Uint8Array(t)),e.lastAppendFailed=!1,this.preloadAheadActive=!0}catch(t){e.lastAppendFailed=!0,this.preloadAheadActive=!1,this.debug&&this.log("Append Buffer error",t)}},mpegDash.prototype.storeLastRequestThroughputByType=function(e,t){this.throughputArray[e]=this.throughputArray[e]||[],this.throughputArray[e].push(t)},mpegDash.prototype.storeLatency=function(e,t){var a=this;return a.latencyArray[e]||(a.latencyArray[e]=[]),a.latencyArray[e].push(t),a.latencyArray[e].length>4?a.latencyArray[e].shift():null},mpegDash.prototype.getAverageThroughput=function(e){var t=this,a=Math.min(t.throughputArray[e].length,4),i=t.throughputArray[e].slice(-1*a,t.throughputArray[e].length);i.length>1&&i.reduce(function(e,t){return(1.3*e<=t||e>=1.3*t)&&a++,t}),a=Math.min(t.throughputArray[e].length,a);var n=t.throughputArray[e].slice(-1*a,t.throughputArray[e].length),r=0;if(n.length>0){r=n.reduce(function(e,t){return e+t},0)/n.length}return t.throughputArray[e].length>=20&&t.throughputArray[e].shift(),r/1e3*.9},mpegDash.prototype.getAverageLatency=function(e){var t,a=this;return a.latencyArray[e]&&a.latencyArray[e].length>0&&(t=a.latencyArray[e].reduce(function(e,t){return e+t})/a.latencyArray[e].length),t},mpegDash.prototype.getRepresentationIndexForThroughput=function(e,t){for(var a=e.representations.length-1;a>=0;a--)if(1e3*t>=e.representations[a].bandwidth)return a;return 0},mpegDash.prototype.selectSourceBufferByMimeType=function(e){for(var t=this,a=0;a<t.dashMediaSource.sourceBuffers.length;a++){var i=t.dashMediaSource.sourceBuffers[a];if(i.mime===e)return i}return null},mpegDash.prototype.isBufferHealthy=function(e){return e>=2},mpegDash.prototype.arrFind=function(e,t){if(e.find)return e.find(t);for(i=0;i<e.length;i++){var a=e[i];if(!0===t(a))return a}},mpegDash.prototype.dashSetup=function(e){var t=function(){!a.isBackup&&a.backupMpdUrl?(a.isBackup=!0,a.dashSetup(e)):a.playerApi.setupFallbackForNonPlayableMedia()},a=this,i=new XMLHttpRequest;a.isBackup&&(this.oMedia.src=this.mpdUrl=a.backupMpdUrl);var n=this.oMedia.src.match(/fake.*?Url/gm)?this.oMedia.src.match(/fake.*?Url/gm).length:null;a.debug&&a.log("Loading"+(a.isBackup?" backup ":" ")+"mpd: "+this.oMedia.src),i.open("GET",this.oMedia.src),i.withCredentials=this.xhrWithCredentials,i.onload=function(){if(i.status>=200&&i.status<400){var r=null;try{r=a.parseMpd(i.responseText)}catch(e){a.debug&&a.log("Error parsing mpd file. Trying this one again or going for backup.\n",e)}}if(i.status>=200&&i.status<400&&r){a.mpd=r,a.dashMediaSource=new MediaSource,a.dashMediaSource.mpd=a.mpd,a.isDynamic="dynamic"===a.mpd.type,a.dashMediaSource.addEventListener("sourceopen",function(){a.initialize(a)}),a.dashMediaSource.addEventListener("webkitsourceopen",function(){a.initialize(a)});var s=URL.createObjectURL(a.dashMediaSource);RFE.data(a.oMedia,"primarysrc",a.oMedia.src),a.oMedia.src=s,RFE.removeClass("c-mmp--loading",a.oPl),e&&a.playerApi.setupPlayerForPlayableMedia()}else a.loadAttemptCount<21&&!n&&(!a.backupMpdUrl||a.isBackup)?(RFE.addClass("c-mmp--loading",a.oPl),setTimeout(function(){a.loadAttemptCount++,i.open("GET",a.oMedia.src),i.send()},a.manifestRefreshTimeout)):(a.loadAttemptCount=0,t())},i.onerror=t,i.send()},mpegDash.prototype.initialize=function(e,t){var a=!(t||e.dashMediaSource.duration>0);if(a&&(e.seekingHandler=function(){if(e.cancelSeekRebuffer)return e.cancelSeekRebuffer=!1,void(e.debug&&e.log("Re-buffering on seek skipped"));var t=!1;if(e.dashMediaSource&&"ended"===e.dashMediaSource.readyState)for(var a=0;a<e.dashMediaSource.sourceBuffers.length;a++)e.dashMediaSource.sourceBuffers[a].buffered.length>1&&e.debug&&e.log("Buffer hole(s) found! Re-buffering is needed on seek on ended video, otherwise player might freeze"),t=!0;if(t||e.dashMediaSource&&"open"===e.dashMediaSource.readyState){e.scheduleLoadNextSegment();for(var i=!1,n=e.oMedia.currentTime,a=0;a<e.dashMediaSource.sourceBuffers.length;a++)e.getRangeForTime(e.dashMediaSource.sourceBuffers[a],n)||(i=!0);if(i){e.debug&&e.log("Reseting buffer because user seeked into non-buffered area");for(var a=0;a<e.dashMediaSource.sourceBuffers.length;a++){var r=e.dashMediaSource.sourceBuffers[a];r.enoughBuffered=r.ended=!1,e.abortBufferingAndReset(r);try{r.remove(0,e.dashMediaSource.duration)}catch(t){r.onupdateend=function(){r.remove(0,e.dashMediaSource.duration),r.onupdateend=null}}e.bufferHealthHistory&&e.bufferHealthHistory[r.mediaType]&&(e.bufferHealthHistory[r.mediaType]=null)}}e.mpdPlaybackEnded=!1}},!e.isDynamic&&e.oMedia.addEventListener("seeking",e.seekingHandler),e.playHandler=function(t){if(e.mpdPlaybackEnded&&(e.oMedia.currentTime=0,e.mpdPlaybackEnded=!1),e.isDynamic&&0!==e.oMedia.readyState){e.scheduleManifestRefresh();for(var a,i=e.oMedia.currentTime,n=0;n<e.dashMediaSource.sourceBuffers.length;n++){var r=e.dashMediaSource.sourceBuffers[n];if(r.isVideo){a=r;break}}a||(a=e.dashMediaSource.sourceBuffers[0]);var s=a.representations[a.currentRepresentationIndex],d=s.segmentAvailabilityRange;if(a.indexHandlerTime=null,i>d.end){var o=Math.max(d.end-2*e.mpd.minBufferTime,d.start);e.debug&&e.log("Seeking to live edge on play "+o),e.oMedia.currentTime=o}else i<d.start&&(e.debug&&e.log("Seeking to availability range start on play "+d.start),e.oMedia.currentTime=d.start)}},e.oMedia.addEventListener("play",e.playHandler),e.pauseHandler=function(t){Math.round(e.oMedia.currentTime)===Math.round(e.oMedia.duration)&&(e.mpdPlaybackEnded=!0,e.playerApi._onPlaybackEnded(),e.debug&&e.log("Video reached its end and paused")),e.isDynamic&&(e.manifestRefreshTimer=window.clearTimeout(e.manifestRefreshTimer))},e.oMedia.addEventListener("pause",e.pauseHandler),e.timeupdateHandler=function(t){for(var a=0;a<e.dashMediaSource.sourceBuffers.length;a++)e.calculateSegmentAvailabilityRangeForCurrentRep(e.dashMediaSource.sourceBuffers[a])},e.isDynamic&&e.oMedia.addEventListener("timeupdate",e.timeupdateHandler),e.waitingHandler=function(t){var a="",i=e.oMedia.currentTime,n=0;if(e.dashMediaSource)for(var r=0;r<e.dashMediaSource.sourceBuffers.length;r++){var s=e.dashMediaSource.sourceBuffers[r],d=s.buffered;if(d.length>1){var o=e.getRangeForTime(s,i);if(o){var u=o.index+1;if(u<d.length&&o.end-i<=e.bufferHolesJumpSafeguardTime){var l={start:d.start(u),end:d.end(u),index:u};l.start>i&&(a+="Buffer hole encountered in "+s.mime+" buffer from "+o.end+"s to "+l.start+"s. ",l.start>n&&(n=l.start))}}}n>0&&(e.debug&&e.log("Warning: "+a+"Jumping over buffer hole(s) from "+i+" to "+n),e.cancelSeekRebuffer=!0,e.oMedia.currentTime=n)}},e.oMedia.addEventListener("waiting",e.waitingHandler),e.loadedMetadataHandler=function(t){e.seekTarget&&(e.oMedia.currentTime=e.seekTarget,e.debug&&e.log("Seeking to start "+e.seekTarget),e.seekTarget=null)},e.isDynamic&&e.oMedia.addEventListener("loadedmetadata",e.loadedMetadataHandler),e.dashMediaSource.duration=e.getDuration(),e.debug&&e.log("Duration set to "+e.dashMediaSource.duration),e.isDynamic&&(RFE.hide(RFE.select(".js-current-time",this.oPl)[0]),RFE.hide(RFE.select(".js-duration",this.oPl)[0]),e.playerApi.isVideo&&(RFE.removeClass("c-mmp__cpanel-btn--disabled",this.playerApi.oSettingsExpandBtn),RFE.removeClass("c-mmp__cpanel-btn--disabled",this.playerApi.oSettingsOverlayBtn)))),!t)var i=e.playerApi.core.localStorageOperation("mediaPlayerBandwidth-audio")||e.defaultAudioBandwidth,n=e.playerApi.core.localStorageOperation("mediaPlayerBandwidth-video")||e.defaultVideoBandwidth;if(e.isDynamic){var r=(new Date).getTime(),s=e.mpd.utcTiming.value,d=s-r;e.clientServerTimeShift=d/1e3,e.debug&&e.log("Synchronizing. Device time "+new Date(r)+", server time "+new Date(s)+", difference "+d)}for(var o=0;o<e.mpd.periods[0].adaptationSets.length;o++){var u,l=e.mpd.periods[0].adaptationSets[o],p=l.representations.map(function(t){return e.normalizeRepresentationForBuffer(t,l)}).sort(function(e,t){return e.bandwidth-t.bandwidth}),m=l.representations[0].mimeType||l.mimeType,f=l.representations[0].codecs||l.codecs;if(a){var g=function(t){try{return u=e.dashMediaSource.addSourceBuffer(t),e.debug&&e.log("Attempt to create buffer for '"+t+"' successful"),!0}catch(a){return e.debug&&e.log("Attempt to create buffer for '"+t+"' unsuccessful",a),!1}};if(!g(m+'; codecs="'+f+'"')&&!g(m+'; codecs="'+f.replace(",tmcd","")+'"')&&!g("video/mp4"))throw"All attempts to create buffer failed";e.isDynamic&&u.addEventListener("updateend",function(t){e.calculateSegmentAvailabilityRangeForCurrentRep(t.target)},!1)}else if(!(u=e.selectSourceBufferByMimeType(m)))throw"SourceBuffer with mime type "+m+" not found";if(u.representations=p,!t){u.currentRepresentationIndex=0,u.mime=m,u.isVideo=-1!==m.indexOf("video"),u.mediaType=e.playerApi.isVideo?"video":"audio",u.segmentIndex=u.lastInitialization=null,u.initLoaded=u.ended=u.enoughBuffered=u.lastAppendFailed=u.criticalMode=!1;var h=-1!==m.indexOf("video")?n:i;u.currentRepresentationIndex=e.getRepresentationIndexForThroughput(u,h),e.debug&&e.log("Initial "+u.mime+" quality index "+u.currentRepresentationIndex+" selected for initial bitrate "+h)}for(var c=0;c<p.length;c++){var y=p[c];if(e.isDynamic){e.calculateSegmentAvailabilityRange(y),e.generateSegmentsFromTemplate(y,-1)}t||y.index||e.isDynamic||e.loadSegmentIntoBuffer(u,!1,!0,c)}if(!t&&e.isDynamic){var v=u.representations[u.currentRepresentationIndex],b=v.segmentAvailabilityRange.end,S=this.mpd.timeShiftBufferDepth/2,T=4*v.segmentDuration,M=Math.max(S-10,S);T=Math.min(T,M);var R=b-T,x=e.getSegmentForTime(R,v);u.segmentIndex=x.availabilityIdx,e.seekTarget=x.presentationStartTime,e.debug&&e.log("Seg. index "+u.segmentIndex+" for live start time "+R+" (live edge "+b+", delay "+T+"), seg. start time "+e.seekTarget+", for "+u.mime+" representation "+u.currentRepresentationIndex)}}!t&&e.loadInitsIfAllIndexesParsed()},mpegDash.prototype.deinit=function(){var e=this;e.manifestRefreshTimer=window.clearTimeout(e.manifestRefreshTimer),e.bufFeedingTimer=window.clearTimeout(e.bufFeedingTimer),e.oMedia.removeEventListener("seeking",e.seekingHandler),e.oMedia.removeEventListener("play",e.playHandler),e.oMedia.removeEventListener("pause",e.pauseHandler),e.oMedia.removeEventListener("timeupdate",e.timeupdateHandler),e.oMedia.removeEventListener("waiting",e.waitingHandler),e.oMedia.removeEventListener("loadedmetadata",e.loadedMetadataHandler)},mpegDash.prototype.getSegmentForTime=function(e,t){var a,i,n,r,s;for(k=0;k<t.segments.length;k++)if(a=t.segments[k],i=a.presentationStartTime,n=t.segmentDuration,r=n/2,e+r>=i&&e-r<i+n){s=a;break}return s},mpegDash.prototype.calculateSegmentAvailabilityRange=function(e){var t=this,a=(new Date).getTime(),i=e.adaptationSet.period,n=(a-t.getMpdAvailabilityStartTime()+1e3*t.clientServerTimeShift)/1e3,r=i.duration>0?i.duration:1/0,s=i.start+r;e.segmentAvailabilityRange={start:Math.max(n-t.mpd.timeShiftBufferDepth,i.start),end:n>=s&&n-e.segmentDuration<s?s-e.segmentDuration:n-e.segmentDuration}},mpegDash.prototype.calculateSegmentAvailabilityRangeForCurrentRep=function(e){var t=e.representations[e.currentRepresentationIndex];this.calculateSegmentAvailabilityRange(t)},mpegDash.prototype.getSegmentByIndex=function(e,t){return this.arrFind(t.segments,function(t){return t.availabilityIdx===e})},mpegDash.prototype.getMpdAvailabilityStartTime=function(){return this.mpd.availabilityStartTime.getTime()},mpegDash.prototype.generateSegmentsFromTemplate=function(e,t){if(!(e.segments&&e.segments.length>0&&e.segments[e.segments.length-1].availabilityIdx>=t)){var a=this,i=e.adaptationSet.period,n=a.getMpdAvailabilityStartTime(),r=e.segmentAvailabilityRange,s={start:Math.max(r.start-i.start,0),end:r.end-i.start},d=2*e.segmentDuration,o=Math.max(2*a.mpd.minBufferTime,10*e.segmentDuration),u=t>0?t*e.segmentDuration:s.end,l={};l.start=Math.floor(Math.max(u-d,s.start)/e.segmentDuration),l.end=Math.floor(Math.min(l.start+o/e.segmentDuration,s.end/e.segmentDuration));var p=[];for(periodSegIdx=l.start;periodSegIdx<=l.end;periodSegIdx++){var m={};m.availabilityIdx=periodSegIdx,m.presentationStartTime=i.start+periodSegIdx*e.segmentDuration,m.mediaStartTime=m.presentationStartTime-e.adaptationSet.period.start+e.adaptationSet.segmentTemplate.presentationOffset,m.availabilityStartTime=new Date(n+1e3*(m.presentationStartTime-a.clientServerTimeShift));var f=m.presentationStartTime+e.segmentDuration;m.availabilityEndTime=new Date(n+1e3*(f-a.clientServerTimeShift));var g=m.presentationStartTime+a.mpd.suggestedPresentationDelay;m.wallStartTime=new Date(m.availabilityStartTime.getTime()+1e3*g),m.replacementTime=(e.startNumber+periodSegIdx-1)*e.segmentDuration,m.replacementNumber=e.startNumber+periodSegIdx,m.mediaUrl=e.adaptationSet.segmentTemplate.media.replace("$Number$",m.replacementNumber).replace("$Time$",m.replacementTime).replace("$RepresentationID$",e.id),p.push(m)}e.segments=p}},mpegDash.prototype.forceDynamicVideoRepresentation=function(e){this.forcedDynamicVideoRepresentationId=e||0},mpegDash.prototype.abortBufferingAndReset=function(e){var t=this;e.xhr&&("XHR request "+e.xhr.url+" aborted",e.xhr.abort(),e.xhr=null),e.url=null,t.isDynamic||(e.segmentIndex=null)},mpegDash.prototype.loadSegmentIntoBuffer=function(e,t,a,i){var n,r,s,d=this,o="No last request metrics",u="",l="",p="",m="",f=void 0!==i?i:e.currentRepresentationIndex,g=e.representations[f];if(t)n=g.initialization.start,r=g.initialization.end,d.isDynamic&&(p=g.initialization.path),d.debug&&(s="Request reason: Init segment load is required.");else if(a)n=g.indexRange.start,r=g.indexRange.end,d.debug&&(s="Request reason: Index (SIDX) segment load is required.");else{if(e.updating||!d.isDynamic&&!g.index)return;var h=d.seekTarget?d.seekTarget:d.oMedia.currentTime,c=d.isDynamic?g.segmentDuration:g.index.startTimes[1]-g.index.startTimes[0],y=0,v=e.buffered;if(v.length>0){var n=d.isDynamic?v.start(v.length-1):v.start(0);n>h&&(d.debug&&d.log("Warning: Buffer starts "+(n-h)+"s later than current time is (buffer start: "+n+"s, current time: "+h+"s). Need to adjust current time to buffer start"),d.oMedia.currentTime=h=n)}var b=d.getRangeForTime(e,h),S=e.isVideo,T=e.mediaType;d.debug&&(s="Request reason: Nothing buffered for playtime "+h+"s");var M=function(){d.abortBufferingAndReset(e);var t=d.mpdInitCache[e.mime][e.currentRepresentationIndex];d.appendToBuffer(e,t);var a=function(){e.removeEventListener("update",a),d.debug&&d.log("Init segment for new quality added to buffer from Init Cache for "+e.mime+" representation index "+e.currentRepresentationIndex),d.loadSegmentIntoBuffer(e,!1,!1)};e.addEventListener("update",a,!1)};if(b){if(v.length>1){var R=v.length-1;b={start:v.start(R),end:v.end(R),index:R},l="Warning: More than one buffer range ("+v.length+") found, which indicate buffer hole(s). Using last buffer range for preloading ("+b.start+"s-"+b.end+"s)"}var x=b.end-d.bufferAheadLimit,D=d.playerApi.core.isPaused()?d.preloadAheadIntervalPaused:d.preloadAheadInterval;if(y=(b.end-h)/c,e.enoughBuffered=b.end>=h+1,h<x){if(d.preloadAheadCooldown)return void d.preloadAheadCooldown--;var I=d.debug?"Periodical "+D*d.scheduleLoadNextSegmentTimeout/1e3+"s non-limted preload ahead request. "+l:"";if(d.debug&&(s="Request reason: "+I),d.preloadAheadCooldown=D,!d.preloadAheadActive)return void(d.debug&&d.log(I+" cancelled because it is disabled"))}else d.preloadAheadCooldown=D,d.debug&&(s="Request reason: Range at play pos. "+b.start+"-"+b.end+"s ends in ~"+Math.round(b.end-h)+"s, which is less than "+d.bufferAheadLimit+"s for playtime "+h+"s. "+l)}if(S&&null!==d.forcedDynamicVideoRepresentationId){var A=null;if(0===d.forcedDynamicVideoRepresentationId)null!==d.originalDynamicVideoRepresentation?(A=d.originalDynamicVideoRepresentation,d.debug&&d.log("Manual switch rule resetting "+e.mime+" auto quality "+d.originalDynamicVideoRepresentation+" saved before first manual switch from auto")):d.debug&&d.log("Manual switch rule error. Original representation index was not saved"),d.adaptiveVideoEnabled=!0;else{var B=d.arrFind(e.representations,function(e){return e.id===d.forcedDynamicVideoRepresentationId});B?(A=e.representations.indexOf(B),d.adaptiveVideoEnabled=!1,d.debug&&d.log("Manual switch rule forcing "+e.mime+" manual quality "+A),null===d.originalDynamicVideoRepresentation&&(d.originalDynamicVideoRepresentation=e.currentRepresentationIndex)):d.debug&&d.log("Manual switch rule error. Representation ID "+d.forcedDynamicVideoRepresentationId+" not found")}if(d.forcedDynamicVideoRepresentationId=null,null!==A&&A!==e.currentRepresentationIndex)return e.currentRepresentationIndex=A,void M()}var w=!S||d.adaptiveVideoEnabled;if(1===e.representations.length&&(w=!1),e.xhr){var L=null;if(d.bufferHealthHistory[T]&&(L=d.arrFind(d.bufferHealthHistory[T],d.isBufferHealthy)),w&&!e.criticalMode&&y>0&&e.currentRepresentationIndex>0&&y<1&&L){d.debug&&d.log("Critical buffer health rule (buffered only "+y+" of segment ahead and next still not loaded) reseting "+e.mime+" lowest quality. Locking quality switching temporary"),d.throughputArray[T]=d.latencyArray[T]=e.lastRequestMetrics=null,e.currentRepresentationIndex=0;var k=e.representations[e.currentRepresentationIndex];d.playerApi.core.localStorageOperation("mediaPlayerBandwidth-"+T,k.bandwidth),e.criticalMode=!0,M()}return}if(e.criticalMode&&b&&b.end-h>=12&&(e.criticalMode=!1,d.debug&&d.log("Releasing critical mode lock at "+(b.end-h)+" seconds buffered ahead")),e.lastRequestMetrics&&w&&!e.criticalMode){var E,F,H=0,P=e.lastRequestMetrics.latencyTimeInMilliseconds,C=e.lastRequestMetrics.downloadTimeInMilliseconds,U=e.lastRequestMetrics.loaded,q=Math.round(8*U/(C/1e3)),z=P<50||C<(S?50:5);z?d.throughputArray[T]&&d.latencyArray[T]?(E=d.getAverageThroughput(T),F=d.getAverageLatency(T)):(E=q/1e3,F=P):(d.storeLastRequestThroughputByType(T,q),E=d.getAverageThroughput(T),d.storeLatency(T,P),F=d.getAverageLatency(T));var N=F/1e3;if(N<=c){var V=N/c;E*=1-V,H=d.getRepresentationIndexForThroughput(e,E)}if(d.debug&&(o="Metrics: Last request: From cache:"+z+" latency:"+P+"ms download time:"+C+"ms throughput:"+E+", average: latency:"+F+"ms throughput:"+E),e.lastRequestMetrics=null,H!==e.currentRepresentationIndex){var k=e.representations[H];return d.debug&&d.log("Throughput rule "+(H>e.currentRepresentationIndex?"increasing":"decreasing")+" "+e.mime+" quality. Representation index from "+e.currentRepresentationIndex+" ("+g.bandwidth+") to "+H+" ("+k.bandwidth+") for avg. measured throughput "+E+"kbps"),d.playerApi.core.localStorageOperation("mediaPlayerBandwidth-"+T,k.bandwidth),e.currentRepresentationIndex=H,void M()}d.bufferHealthHistory[T]||(d.bufferHealthHistory[T]=[]),d.bufferHealthHistory[T].push(y),d.bufferHealthHistory[T].length>20&&d.bufferHealthHistory[T].shift()}if(d.isDynamic){var O=e.indexHandlerTime||h;b&&b.end&&(O=b.end,m+="Aligning append time to buffer end "+O+" ");var _=e.segmentIndex,$=!!d.seekTarget;d.generateSegmentsFromTemplate(g,_),g.segments&&g.segments.length>0&&O<g.segments[0].presentationStartTime&&(d.debug&&d.log("Warning: Current time "+O+" is lower than available "+g.segments[0].presentationStartTime+". Adjusting to first available segment start time"),d.oMedia.currentTime=O=g.segments[0].presentationStartTime,e.enoughBuffered=!1,d.abortBufferingAndReset(e));var j=$?d.getSegmentByIndex(_,g):d.getSegmentForTime(O,g);if(!j)return;if(!$&&j.availabilityIdx<=_){var W=_+1;d.generateSegmentsFromTemplate(g,W),j=d.getSegmentByIndex(W,g)}if(!j)return;e.segmentIndex=j.availabilityIdx,e.indexHandlerTime=j.presentationStartTime+g.segmentDuration,m+="Start "+j.presentationStartTime+", end "+e.indexHandlerTime+", time "+O+", availability idx range "+g.segmentAvailabilityRange.start/6+"-"+g.segmentAvailabilityRange.end/6,p=j.mediaUrl}else{if(null==e.segmentIndex){for(var O=b&&b.end||h,X=g.index.count-1,G=0;G<g.index.count;G++)if(g.index.startTimes[G]>O){X=G-1;break}e.segmentIndex=Math.max(0,X)}else if(e.lastAppendFailed&&(e.lastAppendFailed=!1,e.segmentIndex=Math.max(0,e.segmentIndex-1),d.debug&&(u=", repeated because last append buffer failed")),!d.isDynamic&&e.segmentIndex>=g.index.count)return void(e.ended=!0);var J=g.index.offsets[e.segmentIndex],K=e.segmentIndex+1<g.index.count||g.index.isCapped?g.index.offsets[e.segmentIndex+1]-g.index.offsets[e.segmentIndex]:-1;n=J,r=J+K-1}}var Q=new XMLHttpRequest;Q.representationIndex=f,Q.isInitialization=t,Q.isIndex=a,Q.buf=e,e.xhr=Q,Q.firstProgress=!0,Q.traces=[],Q.lastTraceReceivedCount=0,Q.withCredentials=d.xhrWithCredentials;var Y=g.url+p;if(Q.open("GET",Y),Q.responseType="arraybuffer",!d.isDynamic){Q.startByte=n;var Z="bytes="+n+"-"+r;Q.setRequestHeader("Range",Z)}if(Q.addEventListener("progress",function(e){d.segmentLoadProgress(e,d)}),Q.addEventListener("load",function(e){d.segmentLoaded(e,d)}),Q.addEventListener("error",function(e){e.target.buf.xhr=null}),Q.addEventListener("abort",function(e){e.target.buf.xhr=null}),Q.requestStartDate=Q.firstByteDate=Q.lastTraceTime=new Date,Q.send(),d.debug){var ee=!t&&g.index?g.index.startTimes[e.segmentIndex]+"-"+g.index.startTimes[e.segmentIndex+1]:"N/A",te="No ranges buffered.";if(e.buffered.length>0){for(var G=0,te="Buffered range(s):";G<e.buffered.length;G++)te+="#"+G+":"+e.buffered.start(G)+"-"+e.buffered.end(G)+",";te=te.replace(/.$/,".")}d.log(Y+" range:"+Z+" time:"+ee+"s type:"+e.mime+" purpose:"+(t?"init":a?"index":"content")+". Representation: selected:"+f+" best:"+(e.representations.length-1)+" segment#"+(e.segmentIndex?e.segmentIndex:0)+u+". "+s+" "+te+" "+o+" "+m)}t||a||d.isDynamic||e.segmentIndex++},mpegDash.prototype.segmentLoadProgress=function(e,t){var a=new Date,i=e.target;i.firstProgress&&(i.firstProgress=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(i.firstByteDate=a)),e.lengthComputable&&(i.bytesLoaded=e.loaded,i.bytesTotal=e.total),i.lastTraceTime=a,i.lastTraceReceivedCount=e.loaded},mpegDash.prototype.segmentLoaded=function(e,t){var a=e.target;a.requestEndDate=new Date;var i=a.buf;i.xhr=null;var n=i.representations[a.representationIndex];if(a.readyState==a.DONE){if(a.status>=300){if(t.isBackup||!t.backupMpdUrl)throw"Segment "+a.responseURL+" load failed with status "+a.status;var r=t.oMedia.paused;t.debug&&t.log("Segment "+a.responseURL+" loadashsetupd failed with status "+a.status+". Full reset to backup "+t.backupMpdUrl);for(var s=0;s<t.dashMediaSource.sourceBuffers.length;s++){var i=t.dashMediaSource.sourceBuffers[s];t.abortBufferingAndReset(i)}t.deinit(),t.isBackup=!0,t.playReady=!1,r||(t.dashAutoPaused=!0),t.dashSetup(!1)}if(a.isInitialization){n.initialization.value=new Uint8Array(a.response);var d=a.representationIndex===i.currentRepresentationIndex;d&&(t.appendToBuffer(i,a.response),i.addEventListener("update",this.initSegmentLoaded,!1)),t.mpdInitCache[i.mime]=t.mpdInitCache[i.mime]||{},t.mpdInitCache[i.mime][a.representationIndex]=a.response,t.debug&&t.log("Init segment added to "+(d?"buffer and":"")+" Init Cache for "+i.mime+" representation index "+a.representationIndex)}else i.lastRequestMetrics={latencyTimeInMilliseconds:a.firstByteDate.getTime()-a.requestStartDate.getTime()||1,downloadTimeInMilliseconds:a.requestEndDate.getTime()-a.firstByteDate.getTime()||1,loaded:e.loaded},t.appendToBuffer(i,a.response)}},mpegDash.prototype.loadInitsIfAllIndexesParsed=function(){var e=this,t=!0;e:for(var a=0;a<e.dashMediaSource.sourceBuffers.length;a++)for(var i=e.dashMediaSource.sourceBuffers[a].representations,n=0;n<i.length;n++){var r=i[n];if(!r.index&&!e.isDynamic){t=!1;break e}}if(t)for(var a=0;a<e.dashMediaSource.sourceBuffers.length;a++)for(var s=e.dashMediaSource.sourceBuffers[a],i=s.representations,n=0;n<i.length;n++)e.loadSegmentIntoBuffer(e.dashMediaSource.sourceBuffers[a],!0,!1,n)},mpegDash.prototype.initSegmentLoaded=function(e){var t=e.target;t.initLoaded=!0;for(var a=!0,i=0;i<this.dashMediaSource.sourceBuffers.length;i++)if(!this.dashMediaSource.sourceBuffers[i].initLoaded){a=!1;break}a&&(this.debug&&this.log("Regular media segments loading start"),this.loadNextSegment(),this.isDynamic&&this.scheduleManifestRefresh()),t.removeEventListener("update",this.initSegmentLoaded)},mpegDash.prototype.scheduleManifestRefresh=function(){var e=this;e.manifestRefreshTimer=window.clearTimeout(e.manifestRefreshTimer),e.oMedia.paused||(e.manifestRefreshTimer=window.setTimeout(function(){var t=new XMLHttpRequest;t.open("GET",RFE.data(e.oMedia,"primarysrc")),t.withCredentials=e.xhrWithCredentials,t.onload=function(){t.status>=200&&t.status<400&&(e.mpd=e.parseMpd(t.responseText),e.initialize(e,!0),e.debug&&e.log("Mainfest refreshed")),e.scheduleManifestRefresh()},t.onerror=function(t){e.debug&&e.log("Mnifest refresh XHR load error "+t),e.scheduleManifestRefresh()},t.send()},e.manifestRefreshTimeout),e.debug&&e.log("Mainfest refresh scheduled in "+e.manifestRefreshTimeout/1e3+"s"))},mpegDash.prototype.scheduleLoadNextSegment=function(){var e=this;e.bufFeedingTimer=window.clearTimeout(e.bufFeedingTimer),e.dashMediaSource&&"open"===e.dashMediaSource.readyState&&(e.bufFeedingTimer=window.setTimeout(function(){e.loadNextSegment()},e.scheduleLoadNextSegmentTimeout))},mpegDash.prototype.loadNextSegment=function(){if(!window.isPreviewPage){for(var e=this,t=e.dashMediaSource.sourceBuffers,a=!0,i=0;i<t.length;i++){var n=t[i];e.loadSegmentIntoBuffer(n,!1,!1),(!n.ended||0===n.buffered.length||n.buffered.start(0)>0)&&(a=!1)}if(a)return e.dashMediaSource.endOfStream(),e.playReady=!0,void(e.debug&&e.log("Buffering complete. Stream ended"));for(var r=!0,i=0;i<t.length;i++)if(!t[i].enoughBuffered){r=!1;break}!r||!e.dashAutoPaused&&e.playReady?!e.oMedia.paused&&!r&&e.oMedia.currentTime<e.oMedia.duration-2&&(e.playReady=!1,e.dashAutoPaused=!0,e.debug&&e.log("Not enough buffered. Stalling, buffering")):(e.playReady=!0,e.dashAutoPaused?(e.dashAutoPaused=!1,e.playerApi.core.autoPlay(e.oPl),RFE.removeClass("c-mmp--waiting",e.oPl),e.debug&&e.log("Enough buffered. Start/Continue playing")):e.debug&&e.log("Enough buffered. User can start playing")),e.scheduleLoadNextSegment()}},window.mpegDash=mpegDash}},[545]);
var _RFE_module_multimedia_player_analytics=webpackJsonp_RFE_module__name_([94],{543:function(e,t,a){"use strict";function i(e){if(!e)throw{name:"ArgumentNullException",message:"Argument param cannot be null",stack:(new Error).stack};return this.playerApi=e,this.debug=!1,this.GAEvent_AlreadyStarted=!1,this.GAEvent_AlreadyFinished=!1,this.GAEvent_StartPlayingTime=0,this.GAEvent_PauseTime=0,this.GAEvent_PlaybackTime=0,this.GAEvent_CurrentMediaName="",this.TaEvent_StartPlayingTime=0,this.TaEvent_PauseTime=0,this.TaEvent_PlayedTime=0,this.TaEvent_10PTime=0,this.TaEvent_10PPlayedTimeout,this.TaEvent_50PTime=0,this.TaEvent_50PPlayedTimeout,this.TaEvent_90PTime=0,this.TaEvent_90PPlayedTimeout,this.TaPulseInterval=3e5,this}Object.defineProperty(t,"__esModule",{value:!0});var n=a(5);i.prototype.GATrackEvent=function(e){var t=t||[];this.debug&&console&&console.log("GATrackEvent",this.playerApi.mediaType,e,this.GAEvent_CurrentMediaName),t.push(["_trackEvent",this.playerApi.mediaType,e,this.GAEvent_CurrentMediaName])},i.prototype.AnalyticsTagTrackEvent=function(e){if(n.b){var t=RFE.data(this.playerApi.oPlayer,"id"),a=this.playerApi.isVideo?"video":"audio";e[a+"_position"]=Math.floor(this.playerApi.core.getCurrentTime(this.playerApi.oPlayer)).toString();var i=this.playerApi.core.getDuration(this.playerApi.oPlayer);e[a+"_length"]=this.playerApi.isLive()?"0.0":Math.floor(i).toString(),e[a+"_name"]=RFE.data(this.playerApi.oPlayer,"title"),t&&(e[a+"_id"]=t.toString());var r=window.utag_data;r&&(e.content_type=r.content_type,e.subcontent_type=r.subcontent_type,e.section=r.section,e.page_type=r.page_type,e.media_type=this.playerApi.isLive()?"live "+a+" stream":a,e.pub_day=r.pub_day,e.pub_month=r.pub_month,e.pub_year=r.pub_year,e.pub_hour=r.pub_hour,e.article_uid=r.article_uid,e.language=r.language,e.language_service=r.language_service,e.short_language_service=r.short_language_service,e.platform=r.platform,e.platform_short=r.platform_short,e.entity=r.entity,e.pangea_version=r.pangea_version,e.property_id=r.property_id,e.runs_js=r.runs_js,e.enviro_type=r.enviro_type,e.slug=r.slug,e.tags=r.tags);try{this.debug&&console&&console.log("FireAnalyticsTagEvent",e),Object(n.b)(e)}catch(e){console&&console.log("Analytics Tag Management track event error",e)}}},i.prototype.TaPulseStartPlInterval=function(){var e=this;e._TaEvent_PulseInterval=setInterval(function(){e.TaPulse()},e.TaPulseInterval)},i.prototype.TaPulse=function(){this.TaEvent_PlayedTime=0,this.TaEvent_StartPlayingTime=(new Date).getTime()},i.prototype.TaStopPulse=function(){this.TaEvent_PauseTime=(new Date).getTime(),this.TaStopInterval()},i.prototype.TaStopInterval=function(){clearInterval(this._TaEvent_PulseInterval),clearTimeout(this._TaEvent_PulseDelayTimeout)},i.prototype.GAStartPlInterval=function(){var e=this;e._GAEvent_15SPlayedInterval=setInterval(function(){e.GA15SPlayed()},15e3)},i.prototype.GA15SPlayed=function(){this.GAEvent_PlaybackTime=0,this.GAEvent_StartPlayingTime=(new Date).getTime(),this.GATrackEvent("15s_played")},i.prototype.GA15SStopPlInterval=function(){this.GAEvent_PauseTime=(new Date).getTime(),clearInterval(this._GAEvent_15SPlayedInterval),clearTimeout(this._GAEvent_15SDelaytimeout)},window.multimediaPlayerAnalytics=i}},[543]);
var _RFE_module_multimedia_player_core=webpackJsonp_RFE_module__name_([93],{544:function(e,t){function a(e){if(!e)throw{name:"ArgumentNullException",message:"Argument param cannot be null",stack:(new Error).stack};return this.ui=e,this.mimeType=RFE.data(this.ui.oMedia,"type"),this.isInFullscreen=!1,this.fullscreenClassName="c-mmp--fullscreen",this.playingClassName="c-mmp--playing",this.pausedClassName="c-mmp--paused",this.defaultVolume=.75,this.beforeMuteVolumeLevel=null,this.eventCallbacks={onDocumentClick:new Array,beforePlaybackPlay:new Array,onPlaybackPlay:new Array,onPlaybackPlaying:new Array,onPlaybackWaiting:new Array,onPlaybackPause:new Array,onPlaybackEnded:new Array,onPlaybackProgress:new Array,onPlaybackTimeUpdate:new Array,onPlaybackLoadedData:new Array,onPlaybackLoadedMetaData:new Array,onPlaybackDurationChange:new Array,onVolumeChange:new Array,onFullscreenChange:new Array},this._attachGlobalEvents(),this}a.prototype.addEventListener=function(e,t){return e?t&&"function"==typeof t?this.eventCallbacks.hasOwnProperty(e)?void this.eventCallbacks[e].push(t):void(console&&console.error("Event "+e+" is not supported")):void(console&&console.error("Listener for event "+e+" is not defined")):void(console&&console.error("Event for this listener is not defined",t))},a.prototype.removeEventListener=function(e,t){if(!e)return void(console&&console.error("Event for this listener is not defined",t));if(!t||"function"!=typeof t)return void(console&&console.error("Listener for event "+e+" is not defined"));if(!this.eventCallbacks.hasOwnProperty(e))return void(console&&console.error("Event "+e+" is not supported"));try{this.eventCallbacks[e].splice(this.eventCallbacks[e].indexOf(t),1)}catch(e){console&&console.error("Cannot remove event listener! ",e)}},a.prototype.canPlayType=function(){return!(!this.ui.oMedia.canPlayType||!this.ui.oMedia.canPlayType(this.mimeType))},a.prototype.playHelper=function(e){this.ui.shouldMute&&(this.beforeMuteVolumeLevel=e.volume,this.setVolume(0)),this.playPromise=e.play()},a.prototype.play=function(e){if(!window.isPreviewPage){var t;e&&e!==this.ui.oPlayer?t=RFE.multimediaPlayerUtils.getMediaElement(e):(e=this.ui.oPlayer,t=this.ui.oMedia);var a=document.querySelector(".c-mmp--playing");if(a&&a.querySelector("audio, video")!==t&&this.pause(a),this._callEvent.call(this,"beforePlaybackPlay"),t){var l=e.querySelector(".c-mmp__poster--video");if(l&&RFE.hide(l),t.readyState>0||this.ui.dash&&this.ui.dash.playReady||this.ui.isLive(e))this.playHelper(t);else if(this.ui.dash)this.ui.dash.dashAutoPaused=!0,this.ui.shouldAutoplay&&this.playHelper(t),this.ui.dash.debug&&this.ui.dash.log("Play skipped because player is not ready. Scheduled playback start as soon as possible");else if(0===t.readyState)var n=this,i=window.setInterval(function(){t.readyState>0&&(n.playHelper(t),clearInterval(i))},500);void 0!==this.playPromise&&this.playPromise.catch(function(e){})}}},a.prototype.autoPlay=function(e){document.querySelector(".c-mmp--playing")||this.play(this.ui.oPlayer)},a.prototype.pause=function(e){var t;e&&e!==this.ui.oPlayer?t=RFE.multimediaPlayerUtils.getMediaElement(e):(e=this.ui.oPlayer,t=this.ui.oMedia);try{t&&(this.playPromise?this.playPromise.then(function(){t.pause()}):t.pause()),this.ui.dash&&this.ui.dash.dashAutoPaused&&(this.ui.dash.debug&&this.ui.dash.log("User paused stalling player. Not playing until user click play"),this.ui.dash&&(this.ui.dash.dashAutoPaused=!1))}catch(e){console&&console.warn("Cannot pause media ",e)}},a.prototype.togglePlayPause=function(e){return e||(e=this.ui.oPlayer),this.isPaused(e)?this.play(e):this.pause(e)},a.prototype.isPaused=function(e){var t;if(t=e&&e!==this.ui.oPlayer?RFE.multimediaPlayerUtils.getMediaElement(e):this.ui.oMedia)return t.paused},a.prototype.getDuration=function(e){return this.ui.oMedia.duration},a.prototype.getCurrentTime=function(e){var t;if(t=e&&e!==this.ui.oPlayer?RFE.multimediaPlayerUtils.getMediaElement(e):this.ui.oMedia)return Math.round(1e6*t.currentTime)/1e6},a.prototype.setCurrentTime=function(e,t){var a;a=t&&t!==this.ui.oPlayer?RFE.multimediaPlayerUtils.getMediaElement(t):this.ui.oMedia,isNaN(e)||a&&(a.currentTime=e)},a.prototype.getBuffered=function(e){var t;if(t=e&&e!==this.ui.oPlayer?RFE.multimediaPlayerUtils.getMediaElement(e):this.ui.oMedia)return t.buffered},a.prototype.load=function(e){var t;if(t=e&&e!==this.ui.oPlayer?RFE.multimediaPlayerUtils.getMediaElement(e):this.ui.oMedia)return t.load()},a.prototype.getVolume=function(){return this.ui.oMedia.volume},a.prototype.getStoredOrDefaultVolume=function(){var e=this.localStorageOperation("mediaPlayerVolume");return e>0?e:this.defaultVolume},a.prototype.setVolume=function(e){this.ui.oMedia.volume=e,0===e?this.localStorageOperation("mediaPlayerMuted",1,!0):(e!==this.defaultVolume?this.localStorageOperation("mediaPlayerVolume",e,!0):localStorage.removeItem("mediaPlayerVolume"),localStorage.removeItem("mediaPlayerMuted"))},a.prototype.toggleVolume=function(){var e=this.ui.oMedia;if(0===e.volume){var t=this.beforeMuteVolumeLevel||this.getStoredOrDefaultVolume();this.setVolume(t)}else this.beforeMuteVolumeLevel=e.volume,this.setVolume(0)},a.prototype.localStorageOperation=function(e,t,a){try{if(localStorage){if(!t){var l=JSON.parse(localStorage.getItem(e))||{},n=l.timestamp&&(new Date).getTime()-parseInt(l.timestamp,10)>=36e4||!1,i=l.settings;return n&&(localStorage.removeItem(e),i=null),i}if(a)localStorage.setItem(e,JSON.stringify({settings:t}));else{var o=6e5*Math.round((new Date).getTime()/6e5);localStorage.setItem(e,JSON.stringify({settings:t,timestamp:o}))}}}catch(e){console.error("Local storage operation error",e)}return null},a.prototype.enableFullscreen=function(e){var t=this.ui.oPlayer;t.requestFullScreen?(t.requestFullScreen(),e&&e.preventDefault()):t.mozRequestFullScreen?(t.mozRequestFullScreen(),e&&e.preventDefault()):t.webkitRequestFullScreen?(t.webkitRequestFullScreen(),e&&e.preventDefault()):this.ui.oMedia.webkitRequestFullScreen?(this.ui.oMedia.webkitRequestFullScreen(),e&&e.preventDefault()):t.webkitEnterFullscreen?(t.webkitEnterFullscreen(),e&&e.preventDefault()):this.ui.oMedia.webkitEnterFullscreen?(this.ui.oMedia.webkitEnterFullscreen(),e&&e.preventDefault()):t.msRequestFullscreen?(t.msRequestFullscreen(),e&&e.preventDefault()):e&&this.pause(this.ui.oPlayer)},a.prototype.disableFullscreen=function(e){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():window.exitFullscreen?window.exitFullscreen():window.cancelFullScreen?window.cancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),e&&e.preventDefault()},a.prototype.toggleFullscreen=function(e){RFE.hasClass(this.fullscreenClassName,this.ui.oPlayer)?this.disableFullscreen(e):this.enableFullscreen(e),e.stopPropagation()},a.prototype._callEvent=function(e,t){if(!this.eventCallbacks.hasOwnProperty(e))return void(console&&console.error("Callbacks for event "+e+" are not supported"));if(this.eventCallbacks[e]&&this.eventCallbacks[e].length)for(var a=0;a<this.eventCallbacks[e].length;a++)try{this.eventCallbacks[e][a].call(this,t)}catch(t){console.error("Event callback ("+e+") failed",t)}},a.prototype._attachGlobalEvents=function(){var e=this;e.clickHandler=function(t){e._callEvent.call(e,"onDocumentClick",t)},document.addEventListener("click",e.clickHandler),e.fullscreenChangeHandler=function(t){e._onFullscreenChange.call(e,t),e._callEvent.call(e,"onFullscreenChange",t)},document.addEventListener("webkitfullscreenchange",e.fullscreenChangeHandler),document.addEventListener("mozfullscreenchange",e.fullscreenChangeHandler),document.addEventListener("fullscreenchange",e.fullscreenChangeHandler),document.addEventListener("MSFullscreenChange",e.fullscreenChangeHandler)},a.prototype.attachEventsForPlayableMedia=function(){var e=this;e.ui.oMedia&&e.ui.oMedia.addEventListener("play",function(t){e._onPlay.call(e,t),e._callEvent.call(e,"onPlaybackPlay",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("playing",function(t){e._callEvent.call(e,"onPlaybackPlaying",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("waiting",function(t){e._callEvent.call(e,"onPlaybackWaiting",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("pause",function(t){e._onPause.call(e,t),e._callEvent.call(e,"onPlaybackPause",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("ended",function(t){e._callEvent.call(e,"onPlaybackEnded",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("progress",function(t){e._callEvent.call(e,"onPlaybackProgress",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("timeupdate",function(t){e._callEvent.call(e,"onPlaybackTimeUpdate",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("loadeddata",function(t){e._callEvent.call(e,"onPlaybackLoadedData",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("loadedmetadata",function(t){e._callEvent.call(e,"onPlaybackLoadedMetaData",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("durationchange",function(t){e._callEvent.call(e,"onPlaybackDurationChange",t)}),e.ui.oMedia&&e.ui.oMedia.addEventListener("volumechange",function(t){e._callEvent.call(e,"onVolumeChange",t)})},a.prototype._onFullscreenChange=function(e){document.fullScreen||window.fullScreen||document.webkitIsFullScreen||document.mozFullScreenElement||document.msFullscreenElement?(this.isInFullscreen=!0,RFE.addClass(this.fullscreenClassName,this.ui.oPlayer)):(this.isInFullscreen=!1,RFE.removeClass(this.fullscreenClassName,this.ui.oPlayer))},a.prototype._onPlay=function(e){RFE.addClass(this.playingClassName,this.ui.oPlayer),RFE.removeClass(this.pausedClassName,this.ui.oPlayer)},a.prototype._onPause=function(e){RFE.addClass(this.pausedClassName,this.ui.oPlayer),RFE.removeClass(this.playingClassName,this.ui.oPlayer)},window.multimediaPlayerCore=a}},[544]);
var _RFE_module_multimedia_player_ui=webpackJsonp_RFE_module__name_([91],{546:function(module,exports){function multimediaPlayer(e){if(!e)throw{name:"ArgumentNullException",message:"Argument param cannot be null",stack:(new Error).stack};if(!e.player)throw{name:"ArgumentNullException",message:"Argument param.player cannot be null",stack:(new Error).stack};if(this.dashSetupOnPlay=this.dashSetupOnPlay.bind(this),this.emdedBtnHandler=this.emdedBtnHandler.bind(this),this.param=e,this.module=e.module,this.oPlayer=e.player,this.playerId=e.player_id,this.isEnabled=this.isEnabled(),this.mediaType=this.getMediaType(),this.isVideo="video"===this.mediaType,this.playerHeight=this.oPlayer.offsetHeight,this.oMedia=RFE.multimediaPlayerUtils.getMediaElement(this.oPlayer),this.debug=""===RFE.data(this.oMedia,"debug"),!this.oMedia)return void console.error("NO MEDIA FOUND. Can not initialize multimedia player component.");this.sourceElements=this.oMedia.querySelectorAll("source"),this.sourceElements.length&&!RFE.data(this.oMedia,"type")&&RFE.data(this.oMedia,"type",this.sourceElements[0].type);var t="true"===RFE.data(this.oPlayer,"bypass-dash-for-vod")&&this.isVideo&&!this.isLive(),a="true"===RFE.data(this.oPlayer,"bypass-dash-for-live-video")&&this.isVideo&&this.isLive(),i="true"===RFE.data(this.oPlayer,"bypass-dash-for-live-audio")&&!this.isVideo&&this.isLive();this.forceHLS=window.location.search.includes("disableMpegDashAndUseHlsJs=1")||t||a||i,this.debugHLS=window.location.search.includes("debugLogHlsJs=1"),this.oDisabledOverlay=RFE.select(".js-c-mmp__disabled-overlay",this.oPlayer)[0],this.prerollSourcesJSON=this.oMedia.getAttribute("data-preroll"),this.prerollSources=this.prerollSourcesJSON?JSON.parse(this.prerollSourcesJSON):[],this.hasPreroll=!!this.prerollSourcesJSON,this.isPrerollOver=!this.hasPreroll,this.waitingInLastSecondHappened=!1,this.oTitleLink=RFE.select(".js-media-title-link",this.oPlayer)[0],this.oMedia.getAttribute("data-originalsite")&&this.patchFromCanonical(),this.core=new multimediaPlayerCore(this),this.dash=this.forceHLS?null:new mpegDash(this),this.analytics=new multimediaPlayerAnalytics(this),this.isEnabled?this.setupEnabledPlayer():this.setupDisabledPlayer(),this._updatePlayerDimensions(),this.setPlayerSizeClasses(),this._resizeControlPanel(),this._resizeOverlayTitle(),this._attachGlobalUIEvents(),RFE.removeClass("c-mmp--loading",this.oPlayer),RFE.addClass("c-mmp--rendered",this.oPlayer);var s=this;if(this.isLive(this.oPlayer)){var o=pangeaConfiguration.AppSet.Responsive&&pangeaConfiguration.AppSet.Responsive.DedicatedLive&&pangeaConfiguration.AppSet.Responsive.DedicatedLive.Player.Interval.ExpiresSeconds?pangeaConfiguration.AppSet.Responsive.DedicatedLive.Player.Interval.ExpiresSeconds:20;s.checkNextShowInterval=function(){s.checkNextShow()},setInterval(s.checkNextShowInterval,1e3*o)}return this}multimediaPlayer.prototype.setupDisabledPlayer=function(){this.oDisabledOverlay?this.openOverlay(this.oDisabledOverlay):console&&console.error("Unable to display player status message. ")},multimediaPlayer.prototype.setupEnabledPlayer=function(){this.isPrerollOver?this.hasPreroll&&(this.oMedia.src=this.oMedia.getAttribute("data-preroll-temp-src"),this.core.mimeType=this.oMedia.getAttribute("data-preroll-temp-type")):(RFE.addClass("c-mmp--has-preroll",this.oPlayer),this.oMedia.setAttribute("data-preroll-temp-src",this.oMedia.src),this.oMedia.setAttribute("data-preroll-temp-type",this.core.mimeType),this.oMedia.src=this.prerollSources[0].Src,this.core.mimeType=this.prerollSources[0].Type),this.initialHashStartTime=0,this.shouldContinue=-1!==window.location.hash.indexOf("#player-start-time"),this.shouldAutoplay=""===RFE.data(this.oMedia,"autoplay")||this.shouldContinue,this.shouldMute=""===RFE.data(this.oMedia,"muted"),this.shouldPreload=this.shouldAutoplay||this.initialHashStartTime>0,this.hlsJs,this.hlsJsEnabled=this.forceHLS;//!this.isLive();
var e=this;if(this.oPoster=RFE.select(".js-poster",this.oPlayer)[0],-1!==window.location.hash.indexOf("#player-"))try{this.initialHashStartTime=parseFloat(window.location.hash.replace(/#player-(set|start)-time=/gi,"")),this.initialHashStartTime>0&&(this.shouldPreload=!0)}catch(e){}this.playerId&&RFE.data(this.oPlayer,"player_id",this.playerId);var t=RFE.multimediaPlayerUtils.getMediaElement(this.oPlayer);if(t&&t.setAttribute("webkit-playsinline",!0),t&&t.setAttribute("playsinline",!0),this.core.canPlayType()||this.sourceElements.length&&t.canPlayType(this.sourceElements[0].type))if(this.sourceElements.length&&"application/x-mpegURL"===this.sourceElements[0].type){e=this;var a=e.sourceElements.length?e.sourceElements[0].src:t.src,i=new XMLHttpRequest;i.open("GET",a,!0),i.onload=function(){i.status>=200&&i.status<400?(RFE.data(t,"primarysrc",a),t.src=a,e.setupPlayerForPlayableMedia()):e.sourceElements.length?(RFE.data(t,"primarysrc",e.sourceElements[1].src),t.src=e.sourceElements[1].src,e.setupPlayerForPlayableMedia()):e.setupFallbackForNonPlayableMedia()},i.send()}else this.setupPlayerForPlayableMedia();else if(this.dash&&""!==this.dash.mpdUrl&&this.isPrerollOver)null!=window.MediaSource||null!=window.webkitMediaSource?(t.src=this.dash.mpdUrl,this.core.mimeType="application/dash+xml",RFE.data(t,"type",this.core.mimeType),this.dash.playReady=!1,this.dash.dashAutoPreload||this.shouldAutoplay?(this.dash.dashAutoPaused=this.shouldAutoplay,this.dash.dashSetup(!0)):(this.core.addEventListener("beforePlaybackPlay",e.dashSetupOnPlay),this.setupPlayerForPlayableMedia())):(this.dash.debug&&this.dash.log("Mpeg-Dash required MediaSource API is not supported"),this.setupFallbackForNonPlayableMedia());else if(!this.hlsJsEnabled||"application/x-mpegURL"!==this.core.mimeType&&"vnd.apple.mpegURL"!==this.core.mimeType)this.setupFallbackForNonPlayableMedia();else{var s=document.createElement("script");s.src=RFE.data(this.oPlayer,"hlsjs-src"),s.addEventListener("load",function(){try{if(window.Hls&&Hls.isSupported()||RFE.isMobile.iOS()){var a=e.sourceElements.length?e.sourceElements[0].src:t.src,i=new XMLHttpRequest;i.open("GET",a,!0),i.onload=function(){i.status>=200&&i.status<400?(RFE.data(t,"primarysrc",a),t.src=a,!RFE.isMobile.iOS()&&e._createHlsJs(!0,a,!0),e.setupPlayerForPlayableMedia()):e.sourceElements.length?(RFE.data(t,"primarysrc",e.sourceElements[1].src),t.src=e.sourceElements[1].src,!RFE.isMobile.iOS()&&e._createHlsJs(!0,e.sourceElements[1].src,!0),e.setupPlayerForPlayableMedia()):e.setupFallbackForNonPlayableMedia()},i.send()}else e.setupFallbackForNonPlayableMedia()}catch(t){console&&console.log("hls.js evaluation error",t),e.setupFallbackForNonPlayableMedia()}}),document.body.append(s)}},multimediaPlayer.prototype.html5PlayerSetAndPlay=function(e,t){var a=this;this.oMedia.innerHTML="",RFE.removeClass("c-mmp--has-intro",this.oMedia),this.oMedia.setAttribute("poster",""),e.source&&(RFE.data(this.oMedia,"primarysrc")||RFE.data(this.oMedia,"primarysrc",this.oMedia.src),this.oMedia.src=e.source.Src,RFE.data(this.oPlayer,"id",e.contentId),RFE.data(this.oPlayer,"title",e.name),this.core.pause(),window.setTimeout(function(){a.oMedia.load(),a.hlsJsEnabled&&-1!==a.oMedia.src.indexOf(".m3u8")&&!a.oMedia.canPlayType("application/x-mpegURL")&&window.Hls&&a.Hls.isSupported()&&a._createHlsJs(!0,a.oMedia.src,!0),e.currentTime>0&&RFE.data(a.oMedia,"starttime",e.currentTime),e.playMode&&"user"===e.playMode||a.core.play(),t&&t()},10))},multimediaPlayer.prototype.setupPlayerForPlayableMedia=function(){var self=this;this.oPlayBtn=RFE.select(".js-btn-play",this.oPlayer)[0],this.oBigPlayBtn=RFE.select(".js-btn-play-big",this.oPlayer)[0],this.oPauseBtn=RFE.select(".js-btn-pause",this.oPlayer)[0],this.oVolumeBtn=RFE.select(".js-btn-volume",this.oPlayer)[0],this.oVolumeControls=RFE.select(".js-volume-controls",this.oPlayer)[0],this.oSettingsControls=RFE.select(".js-settings-controls",this.oPlayer)[0],this.oSettingsOverlayBtn=RFE.select(".js-btn-settings-overlay",this.oPlayer)[0],this.oSettingsExpandBtn=RFE.select(".js-btn-settings-expand",this.oPlayer)[0],this.oFullscreenBtn=RFE.select(".js-btn-fullscreen",this.oPlayer)[0],this.oTitleOverlay=RFE.select(".js-c-mmp__title-overlay",this.oPlayer)[0],this.oSharingOverlay=RFE.select(".js-c-mmp__sharing-overlay",this.oPlayer)[0],this.oSettingsOverlay=RFE.select(".js-c-mmp__settings-overlay",this.oPlayer)[0],this.oEmbedBtns=RFE.select(".js-btn-embed-overlay",this.oPlayer),this.oSharingBtns=RFE.select(".js-btn-sharing-overlay",this.oPlayer),this.oEmbedCode=RFE.select(".js-embed-code",this.oSharingOverlay)[0],this.oEmbedWidth=RFE.select(".js-video-embed-width",this.oSharingOverlay)[0],this.oEmbedHeight=RFE.select(".js-video-embed-height",this.oSharingOverlay)[0],this.oPlaybackIndicatorBuffered=RFE.select(".js-playback-buffered",this.oPlayer),this.oPlaybackIndicatorTracked=RFE.select(".js-playback-tracked",this.oPlayer)[0],this.oControlPanelContainer=RFE.select(".js-cpanel-container",this.oPlayer)[0],this.loadPosition=0,this.oCurrentTime=RFE.select(".js-current-time",this.oPlayer)[0],this.oDuration=RFE.select(".js-duration",this.oPlayer)[0],this.onPlayTriggered=!1,this.onPlayingTriggered=!1,this.progressbarSliding=!1,this.volumebarSliding=!1,this.trackMouseMoving=!1,this.panelHiddenByMouseTracking=!1,this.touchStarted=!1,this.lastTouchMove=null,this.slideButtonOffset=0,this.slideButtonVerticalOffset=0,this.slideStarted=0,this.slidePaused=!0,this.progressbarButtonRelativePosition=0,this.volumebarButtonRelativePosition=0,this.oProgressbar=RFE.select(".js-progressbar",this.oPlayer)[0],this.oProgressbarButton=RFE.select(".js-progressbar-btn",this.oPlayer)[0],this.oVolumebar=RFE.select(".js-volumebar",this.oPlayer)[0],this.oVolumebarButton=RFE.select(".js-volumebar-btn",this.oPlayer)[0],this.oPlaybackTimeBadge=RFE.select(".js-progressbar-indicator-badge",this.oPlayer)[0],this.oPlaybackTimeBadgeText=RFE.select(".js-progressbar-indicator-badge-text",this.oPlaybackTimeBadge)[0],this._indicatorBadgeTimeout=null,this.oDurationBadge=RFE.select(".js-duration-badge",this.oPlayer)[0],this.oDurationBadgeText=RFE.select(".js-duration-badge-text",this.oDurationBadge)[0],this.isPrerollOver&&this.hasPreroll||(this.core.attachEventsForPlayableMedia(),this._attachUIEventsForPlayableMedia());var muted=1===this.core.localStorageOperation("mediaPlayerMuted");this.core.setVolume(muted?0:this.core.getStoredOrDefaultVolume()),this._updateVolumeSlider(this.core.getVolume()),RFE.isMobile.iOS()&&this.oVolumeBtn&&RFE.addClass("c-mmp__cpanel-btn--disabled",this.oVolumeBtn),this.isLive()?RFE.hide(this.oDuration):this.core.getDuration()&&this._onPlaybackDurationChange(),RFE.addClass("c-mmp--paused",this.oPlayer),RFE.removeClass("c-mmp--cannot-play",this.oPlayer),RFE.addClass("c-mmp--can-play",this.oPlayer),!this.oTitleOverlay||!this.isTitleOverlayAvailable(this.oTitleOverlay)||this.isPrerollOver&&this.hasPreroll||this.openOverlay(this.oTitleOverlay),this.oDurationBadge&&RFE.removeClass("c-mmp__badge--hidden",this.oDurationBadge),this.focusHandler=function(){window.setTimeout(function(){self.oPlayer&&self.core.autoPlay(),window.removeEventListener("focus",self.focusHandler)},10)},!self.onPlayTriggered&&this.shouldAutoplay&&!document.hasFocus()&&window.addEventListener("focus",this.focusHandler),this.shouldAutoplay&&document.hasFocus()&&window.setTimeout(function(){self.oPlayer&&self.core.autoPlay()},10),this.initialHashStartTime>0&&(this.core.setCurrentTime(this.initialHashStartTime),this.core.load(this.oPlayer)),RFE.data(this.oMedia,"sources")&&eval(RFE.data(this.oMedia,"sources"))&&JSON.parse(RFE.data(this.oMedia,"sources")).find(function(e){return e.DataInfo})||(RFE.addClass("c-mmp__cpanel-btn--disabled",this.oSettingsExpandBtn),RFE.addClass("c-mmp__cpanel-btn--disabled",this.oSettingsOverlayBtn),this._resizeControlPanel());var manifest=self.oMedia.src;if(-1!==manifest.indexOf(".m3u8",manifest.length-".m3u8".length)){var manifest=self.oMedia.src;RFE.addClass("c-mmp__cpanel-btn--disabled",this.oSettingsExpandBtn),RFE.addClass("c-mmp__cpanel-btn--disabled",this.oSettingsOverlayBtn);var xhrObj=new XMLHttpRequest;xhrObj.open("GET",manifest,!0),xhrObj.onload=function(){if(xhrObj.status>=200&&xhrObj.status<400){var e,t=[],a=/^#EXT-X-STREAM-INF:(?:([A-Z_-]*)=((?:[^\"][^,\n]*)|(?:\"[^\"]*\")))?,?(?:([A-Z_-]*)=((?:[^\"][^,\n]*)|(?:\"[^\"]*\")))?,?(?:([A-Z_-]*)=((?:[^\"][^,\n]*)|(?:\"[^\"]*\")))?,?(?:([A-Z_-]*)=((?:[^\"][^,\n]*)|(?:\"[^\"]*\")))?,?(?:([A-Z_-]*)=((?:[^\"][^,\n]*)|(?:\"[^\"]*\")))?,?(?:([A-Z_-]*)=((?:[^\"][^,\n]*)|(?:\"[^\"]*\")))?,?(?:([A-Z_-]*)=((?:[^\"][^,\n]*)|(?:\"[^\"]*\")))?\n([^\n]*)/gim;e:for(;e=a.exec(xhrObj.responseText);){for(var i={},s=1;s<e.length;s++)i[e[s]]=e[s+1],s++;if(i.url=e[15],t.length>0)for(var o=0;o<t.length;o++)if(t[o].BANDWIDTH===i.BANDWIDTH&&t[o].RESOLUTION===i.RESOLUTION)continue e;t.push(i)}if(t.length>1){for(var r=function(e,t,a){var i=document.createElement("li");RFE.addClass("c-mmp__sources-item",i),RFE.data(i,"level",-1===e?self.oMedia.src:t),i.addEventListener("click",function(e){var t=RFE.select("li.c-mmp__sources-item",self.oPlayer);RFE.removeClass("c-mmp__sources-item--selected",t);var a=RFE.select("li.c-mmp__sources-item[data-level='"+RFE.data(this,"level")+"']",self.oPlayer);RFE.addClass("c-mmp__sources-item--selected",a),self.html5PlayerSetAndPlay({source:{Type:"video/mp4",Src:RFE.data(this,"level")}},function(){self.hideSourcesExpander(),self.oSettingsOverlay&&self.closeOverlay(self.oSettingsOverlay)})}),i.textContent=-1===e?"Auto":a,d.appendChild(i),-1===e&&RFE.addClass("c-mmp__sources-item--selected",i)},l=RFE.select(".js-sources",self.oPlayer),n=0;n<l.length;n++){var d=document.createElement("ul");RFE.addClass("c-mmp__sources",d),r(-1);for(var o=0;o<t.length;o++){var c=t[o].url.replace(/\?.*$/gi,"").replace("\r","");-1===c.indexOf("http")&&(c=manifest.substr(0,manifest.lastIndexOf("/")+1)+c);r(o,c,t[o].RESOLUTION.replace(/[0-9]+x/gi,"")+"p")}l[n].appendChild(d)}RFE.removeClass("c-mmp__cpanel-btn--disabled",self.oSettingsExpandBtn),RFE.removeClass("c-mmp__cpanel-btn--disabled",self.oSettingsOverlayBtn),self._resizeControlPanel()}}},xhrObj.send()}this.isPrerollOver&&this.hasPreroll||this.showControlPanel(this.oPlayer)},multimediaPlayer.prototype.setupFallbackForNonPlayableMedia=function(){this.tryReplaceHlsWithMpeg()},multimediaPlayer.prototype.tryReplaceHlsWithMpeg=function(){var isLiveAudio=this.isLive()&&!this.isVideo;RFE.removeClass("c-mmp--waiting",this.oPlayer),RFE.removeClass("c-mmp--loading",this.oPlayer);var fallbackMimeType=isLiveAudio?"audio/mpeg":"video/mp4";if(this.oMedia&&this.oMedia.canPlayType(fallbackMimeType)){var fallbackSrc=null;if(RFE.data(self.oMedia,"fallbacksrc")&&RFE.data(this.oMedia,"fallbacktype")&&(fallbackSrc={Src:RFE.data(this.oMedia,"fallbacksrc"),Type:RFE.data(this.oMedia,"fallbacktype")}),!this.isPrerollOver&&this.prerollSources.length>1){var medHeight=this.oPlayer.getBoundingClientRect().height,preroll;for(a=1;a<this.prerollSources.length;a++)if(parseFloat(this.prerollSources[a].DataInfo)>medHeight){preroll=this.prerollSources[a];break}return this.oMedia.src=preroll.Src,this.core.mimeType=preroll.Type,this.core.load(this.oPlayer),void this.setupPlayerForPlayableMedia()}var dataSources=eval(RFE.data(this.oMedia,"sources"));if(!fallbackSrc&&dataSources)if(isLiveAudio){var mp3StreamSrc=RFE.filter(dataSources,function(e,t){return"audio/mpeg"===e.Type});mp3StreamSrc&&mp3StreamSrc.length>0&&(fallbackSrc=mp3StreamSrc[0])}else{var src360p=RFE.filter(dataSources,function(e,t){return-1!==e.DataInfo.indexOf("360p")});if(src360p&&src360p.length>0&&(fallbackSrc=src360p[0]),!fallbackSrc){var anySrc=RFE.filter(dataSources,function(e,t){return-1!==e.Src.indexOf(".mp4")});anySrc&&anySrc.length>0&&(fallbackSrc=anySrc[0])}}if(fallbackSrc)return this.oMedia.src=fallbackSrc.Src,this.core.mimeType=fallbackSrc.Type,this.core.load(this.oPlayer),void this.setupPlayerForPlayableMedia();RFE.removeClass("c-mmp--can-play",this.oPlayer),RFE.addClass("c-mmp--cannot-play",this.oPlayer),RFE.removeClass("c-mmp__overlay--disabled",this.oDisabledOverlay),RFE.hide(this.oPoster)}},multimediaPlayer.prototype._createHlsJs=function(e,t,a){var i=this,s=this.oMedia;this.hlsJs&&this.hlsJs.destroy(),this.hlsJs=new Hls({debug:this.debugHLS,autoStartLoad:e,maxBufferSize:10,maxBufferLength:10,maxBufferHole:5}),this.hlsJsLoaded=e,this.hlsJs.startLevel=1,this.hlsJs.loadSource(t),this.hlsJs.attachMedia(s),a&&this.hlsJs.on(Hls.Events.MANIFEST_PARSED,function(e,t){if(t&&t.levels&&t.levels.length>1)for(var a=function(e){var a=document.createElement("li");RFE.addClass("c-mmp__sources-item",a),RFE.data(a,"level",-1===e?RFE.data(s,"primarysrc"):t.levels[e].url[0]),a.addEventListener("click",function(){var t=RFE.select("li.c-mmp__sources-item",i.oPlayer);RFE.removeClass("c-mmp__sources-item--selected",t);var a=RFE.select("li.c-mmp__sources-item[data-level='"+RFE.data(this,"level")+"']",i.oPlayer);RFE.addClass("c-mmp__sources-item--selected",a),i.hlsJs.currentLevel=e,i.core.play(i.oPlayer)}),a.textContent=-1===e?"Auto":t.levels[e].height+"p",l.appendChild(a),-1===e&&RFE.addClass("c-mmp__sources-item--selected",a)},o=RFE.select(".js-sources",i.oPlayer),r=0;r<o.length;r++){var l=document.createElement("ul");RFE.addClass("c-mmp__sources",l),a(-1);for(var n=0;n<t.levels.length;n++)a(n);o[r].appendChild(l)}}),this.hlsJs.on(Hls.Events.ERROR,function(e,t){t.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&console&&console.log("FRAG_LOOP_LOADING_ERROR hls.js seems stuck in endless data loading loop. Possible keyframe issues.")})},multimediaPlayer.prototype._attachGlobalUIEvents=function(){var e=this;this.resizeHandler=function(){e._updatePlayerDimensions(),e.setPlayerSizeClasses()},window.addEventListener("resize",this.resizeHandler),e.core.addEventListener("onFullscreenChange",function(t){e._onFullscreenChange(t)});for(var t=RFE.select(".js-btn-close-overlay",e.oPlayer),a=0;a<t.length;a++)t[a]&&t[a].addEventListener("click",function(){var t=RFE.selectParent(this,"c-mmp__overlay");t&&e.closeOverlay(t)});var i=RFE.select("body")[0];if(this.keyupHandler=function(t){e._onKeyPress(t)},i.addEventListener?(i.addEventListener("keyup",this.keyupHandler),i.addEventListener("keypress",this.keyupHandler)):i.attachEvent&&(i.attachEvent("keyup",this.keyupHandler),i.attachEvent("keypress",this.keyupHandler)),pangeaConfiguration&&pangeaConfiguration.UISet&&pangeaConfiguration.UISet.Analytics&&pangeaConfiguration.UISet.Analytics.AkamaiMediaAnalytics)try{setAkamaiMediaAnalyticsData("contentType",e.mediaType),setAkamaiMediaAnalyticsData("pageUrl",document.URL)}catch(e){console.error("Beaconing framework call error:"+e)}},multimediaPlayer.prototype._attachUIEventsForPlayableMedia=function(){var e=this;if(this.resizeHanderUi=function(){e._resizeControlPanel(),e._resizeOverlayTitle();var t=parseInt(RFE.select(".js-playback-played",e.oPlayer)[0].style.width)/100;e._updateProgressbarSlider(t)},window.addEventListener("resize",this.resizeHanderUi),e.core.addEventListener("onPlaybackProgress",function(t){e._onPlaybackProgress(t)}),e.core.addEventListener("onPlaybackLoadedData",function(t){e._onPlaybackLoadedData(t)}),e.core.addEventListener("onPlaybackTimeUpdate",function(t){e._onPlaybackTimeUpdate(t)}),e.core.addEventListener("onPlaybackEnded",function(t){e._onPlaybackEnded(t)}),e.core.addEventListener("onPlaybackPause",function(t){e._onPlaybackPause(t)}),e.core.addEventListener("onPlaybackPlay",function(t){e._onPlaybackPlay(t)}),e.core.addEventListener("onPlaybackPlaying",function(t){e._onPlaybackPlaying(t)}),e.core.addEventListener("onPlaybackWaiting",function(t){e._onPlaybackWaiting(t)}),e.core.addEventListener("onVolumeChange",function(t){e._updateVolumeSlider(t)}),e.core.addEventListener("onPlaybackDurationChange",function(t){e._onPlaybackDurationChange(t)}),e.core.addEventListener("onPlaybackLoadedMetaData",function(t){e._onPlaybackLoadedMetaData(t)}),e.oPlayBtn&&e.oPlayBtn.addEventListener("click",function(){e.core.togglePlayPause(e.oPlayer)}),e.oBigPlayBtn&&e.oBigPlayBtn.addEventListener("click",function(t){e.core.togglePlayPause(e.oPlayer),t.stopPropagation()}),!e.isVideo||"ontouchstart"in document.documentElement?e.isVideo||e.oPoster&&e.oPoster.addEventListener("click",function(){e.core.togglePlayPause()}):(e.oMedia&&e.oMedia.addEventListener("click",function(){e.isStickyPlayerEnabled(e.oPlayer)||e.core.togglePlayPause()}),e.oTitleOverlay&&e.oTitleOverlay.addEventListener("click",function(){e.core.togglePlayPause()})),e.isVideo&&e.oPlayer.addEventListener("touchstart",function(){e.touchStarted=!0,e.autoHideControlPanel(e.oPlayer)}),e.oPauseBtn&&e.oPauseBtn.addEventListener("click",function(){e.core.togglePlayPause(e.oPlayer)}),"video"===e.mediaType&&e.oPlayer.addEventListener("mouseenter",function(){e.trackMouseMoving=!0,e.autoHideControlPanel(e.oPlayer)}),"video"===e.mediaType&&e.oPlayer.addEventListener("mouseleave",function(){e.trackMouseMoving=!1,e.core.isPaused(e.oPlayer)||e.autoHideControlPanel(e.oPlayer)}),e.oControlPanelContainer&&e.oControlPanelContainer.addEventListener("touchstart",function(){e.autoHideControlPanel(e.oPlayer)}),e.oControlPanelContainer&&e.oControlPanelContainer.addEventListener("touchmove",function(){e.autoHideControlPanel(e.oPlayer)}),e.oControlPanelContainer&&e.oControlPanelContainer.addEventListener("touchend",function(){e.autoHideControlPanel(e.oPlayer)}),e.oMedia&&e.oMedia.addEventListener("touchstart",function(){e.touchStarted=!0,e.autoHideControlPanel(e.oPlayer)}),e.oMedia&&e.oMedia.addEventListener("touchmove",function(){e.autoHideControlPanel(e.oPlayer)}),e.oMedia&&e.oMedia.addEventListener("touchend",function(){e.autoHideControlPanel(e.oPlayer)}),e.oProgressbar&&e.oProgressbar.addEventListener("mousemove",function(t){var a=e._getSlideBarClickPosition(t,e.oProgressbar,!1),i=e.core.getDuration();if(!i&&e.oDuration&&e.oDuration.textContent){var s=RFE.multimediaPlayerUtils.hmsToS(e.oDuration.textContent);isFinite(s)&&(i=s)}!i||RFE.isMobile.any()?RFE.addClass("c-mmp__badge--hidden",e.oPlaybackTimeBadge):(RFE.removeClass("c-mmp__badge--hidden",e.oPlaybackTimeBadge),e.oPlaybackTimeBadgeText.textContent=RFE.multimediaPlayerUtils.toHms(a*i),e.oPlaybackTimeBadge.style.left=100*a+"%",e.oPlaybackIndicatorTracked.style.width=100*a+"%",clearTimeout(e._indicatorBadgeTimeout),e._indicatorBadgeTimeout=setTimeout(function(){RFE.addClass("c-mmp__badge--hidden",e.oPlaybackTimeBadge),e.oPlaybackIndicatorTracked.style.width=0},5e3))}),e.oProgressbar&&e.oProgressbar.addEventListener("mouseleave",function(){RFE.addClass("c-mmp__badge--hidden",e.oPlaybackTimeBadge),e.oPlaybackIndicatorTracked.style.width=0}),e.oPlaybackTimeBadge&&e.oPlaybackTimeBadge.addEventListener("mousemove",function(e){e.stopPropagation()}),e.oPlaybackTimeBadge&&e.oPlaybackTimeBadge.addEventListener("mouseleave",function(e){e.stopPropagation()}),e.mouseUpHandler=function(t){!0!==e.progressbarSliding&&!0!==e.volumebarSliding||e._eventSliderTouchEnd(t)},document.addEventListener("mouseup",e.mouseUpHandler),e.mouseMoveHandler=function(t){e._eventSliderTouchMove(t)},document.addEventListener("mousemove",e.mouseMoveHandler),e.oProgressbar&&e.oProgressbar.addEventListener("mousedown",function(t){e.progressbarSliding=!0,e.slideButtonOffset=e.oProgressbarButton.offsetWidth/2,e.slideStarted=t.pageX,e.slidePaused=e.core.isPaused(e.oPlayer),e.core.pause(e.oPlayer),RFE.addClass("c-mmp--loading",e.oPlayer);var a=e._getSlideBarClickPosition(t,e.oProgressbar,!1),i=e.core.getDuration();i>0?e.core.setCurrentTime(a*i,e.oPlayer):(e.loadPosition=a,e.core.load(e.oPlayer)),e._updateProgressbarSlider(a),e._updateBufferedRangeBar()}),e.oVolumebarButton&&e.oVolumebarButton.addEventListener("mousedown",function(t){e.volumebarSliding=!0,e.slideButtonOffset=e.oVolumebarButton.offsetHeight/2,e.slideButtonVerticalOffset=RFE.offset(e.oVolumebar).top+e.oVolumebar.offsetHeight-(RFE.offset(e.oVolumebarButton).top+e.oVolumebarButton.offsetHeight),e.slideStarted=t.pageY}),e.oProgressbar&&e.oProgressbar.addEventListener("click",function(t){e._eventSliderClick(t)}),e.oProgressbar&&e.oProgressbar.addEventListener("mouseup",function(t){e._eventSliderTouchEnd(),e._eventSliderClick(t)}),e.oProgressbar&&e.oProgressbar.addEventListener("touchstart",function(t){e.progressbarSliding=!0,e.slideButtonOffset=e.oProgressbarButton.offsetWidth/2,e.slideStarted=t.targetTouches[0].pageX,e.slidePaused=e.core.isPaused(e.oPlayer),e.core.pause(e.oPlayer),t.preventDefault(),t.stopPropagation()},!0),e.oProgressbar&&e.oProgressbar.addEventListener("touchmove",function(t){e._eventSliderTouchMove(t),t.preventDefault(),t.stopPropagation()},!0),e.oProgressbar&&e.oProgressbar.addEventListener("touchend",function(t){e._eventSliderTouchMove(t),e._eventSliderTouchEnd(t),t.preventDefault(),t.stopPropagation()},!0),e.oVolumeBtn&&e.oVolumeBtn.addEventListener("click",function(){e.core.toggleVolume(),e._updateVolumeSlider(e.core.getVolume())}),e.oVolumeControls&&e.oVolumeControls.addEventListener("mouseover",function(){e.openVolumeBar()}),e.oVolumeControls&&e.oVolumeControls.addEventListener("mouseout",function(){e.hideVolumeBar()}),e.oVolumebar&&e.oVolumebar.addEventListener("click",function(t){var a=e._getSlideBarClickPosition(t,e.oVolumebar,!0);e.core.setVolume(a),e._updateVolumeSlider(e.core.getVolume())}),e.oVolumebarButton&&e.oVolumebarButton.addEventListener("touchstart",function(t){e.volumebarSliding=!0,e.slideButtonOffset=e.oVolumebarButton.offsetHeight/2,e.slideButtonVerticalOffset=RFE.offset(e.oVolumebar).top+e.oVolumebar.offsetHeight-(RFE.offset(e.oVolumebarButton).top+e.oVolumebarButton.offsetHeight),e.slideStarted=t.targetTouches[0].pageY,t.preventDefault()}),e.oVolumebarButton&&e.oVolumebarButton.addEventListener("touchmove",function(t){e._eventSliderTouchMove(t),t.preventDefault()}),e.oVolumebarButton&&e.oVolumebarButton.addEventListener("touchend",function(t){e._eventSliderTouchEnd(t),t.preventDefault()}),e.oSettingsOverlayBtn&&e.oSettingsOverlayBtn.addEventListener("click",function(){e._renderSources(e.oPlayer),e.oSettingsOverlay&&e.openOverlay(e.oSettingsOverlay,null),RFE.addClass("btn--active",this)}),e.oSettingsExpandBtn&&e.oSettingsExpandBtn.addEventListener("click",function(){e.toggleSourcesExpander()}),e.oFullscreenBtn&&e.oFullscreenBtn.addEventListener("click",function(t){e.core.toggleFullscreen(t)}),e.oTitleLink&&e.oTitleLink.addEventListener("click",function(t){t.stopPropagation();var a=e.core.getCurrentTime(e.oPlayer);if(a>0)if(e.oTitleLink.setAttribute("href",e.oTitleLink.getAttribute("href").replace(/#.+/gi,"")+"#player-"+(e.core.isPaused(e.oPlayer)?"set":"start")+"-time="+a),e.pausePlayingPlayers(),e.isStickyPlayerEnabled(e.oPlayer)){var i=e.getStickyPlayerId(e.oPlayer);i&&RFE.stickyPlayers&&RFE.stickyPlayers[i]?RFE.stickyPlayers[i].disableStickyMode(!0,RFE.isRTL()?"left":"right"):e.core.pause(e.oPlayer)}else e.core.pause(e.oPlayer)}),e.oEmbedBtns&&e.oEmbedBtns.length)for(var t=0;t<e.oEmbedBtns.length;t++)e.oEmbedBtns[t]&&e.oEmbedBtns[t].addEventListener("click",e.emdedBtnHandler);if(e.oSharingBtns&&e.oSharingBtns.length)for(var t=0;t<e.oSharingBtns.length;t++)e.oSharingBtns[t]&&e.oSharingBtns[t].addEventListener("click",function(t){if(e.oSharingOverlay){var a=RFE.select(".js-tab-sharing-overlay",e.oSharingOverlay)[0];RFE.hasClass("c-mmp__overlay--enabled",e.oSharingOverlay)?e.selectOverlayTab(e.oSharingOverlay,a,!0):e.openOverlay(e.oSharingOverlay,a)}e.hideSourcesExpander(),t.stopPropagation()});var a=RFE.select(".js-btn-copy-share-url",e.oPlayer)[0],i=RFE.select(".js-share-url",e.oPlayer)[0],s=RFE.select(".js-message-share-url-copied",e.oPlayer)[0];a&&a.addEventListener("click",function(){i&&RFE.multimediaPlayerUtils.copyToClipboard(i,s)}),i&&i.addEventListener("click",function(){i&&RFE.multimediaPlayerUtils.copyToClipboard(i,s)});var o=RFE.select(".js-btn-copy-embed-code",e.oPlayer)[0],r=RFE.select(".js-message-embed-code-copied",e.oPlayer)[0];o&&o.addEventListener("click",function(){e.oEmbedCode&&RFE.multimediaPlayerUtils.copyToClipboard(e.oEmbedCode,r)}),e.oEmbedCode&&e.oEmbedCode.addEventListener("click",function(){e.oEmbedCode&&RFE.multimediaPlayerUtils.copyToClipboard(e.oEmbedCode,r)}),e.oEmbedWidth&&e.oEmbedWidth.addEventListener("change",function(){var t=e.oEmbedWidth.value;isNaN(t)||t<=0?(t=RFE.data(e.oEmbedWidth,"default"),e.oEmbedWidth.value=t):parseInt(t)!==t&&(t=parseInt(t),e.oEmbedWidth.value=t);var a=Math.round(t/(16/9))+3;e.oEmbedHeight&&(e.oEmbedHeight.value=a),e.oEmbedCode&&(e.oEmbedCode.value=RFE.multimediaPlayerUtils.getEmbedCode(e.oPlayer))}),e.oEmbedHeight&&e.oEmbedHeight.addEventListener("change",function(){var t=e.oEmbedHeight.value;isNaN(t)||t<=0?(t=RFE.data(e.oEmbedHeight,"default"),e.oEmbedHeight.value=t):parseInt(t)!==t&&(t=parseInt(t),e.oEmbedHeight.value=t);var a=Math.round(16/9*(t-3));e.oEmbedWidth&&(e.oEmbedWidth.value=a),e.oEmbedCode&&(e.oEmbedCode.value=RFE.multimediaPlayerUtils.getEmbedCode(e.oPlayer))}),e.oEmbedCode&&(e.oEmbedCode.value=RFE.multimediaPlayerUtils.getEmbedCode(e.oPlayer))},multimediaPlayer.prototype.emdedBtnHandler=function(e){var t=this;if(t.oSharingOverlay){var a=RFE.select(".js-tab-embed-overlay",t.oSharingOverlay)[0];RFE.hasClass("c-mmp__overlay--enabled",t.oSharingOverlay)?t.selectOverlayTab(t.oSharingOverlay,a,!0):t.openOverlay(t.oSharingOverlay,a)}t.hideSourcesExpander(),e.stopPropagation()},multimediaPlayer.prototype.showControlPanel=function(e){e||(e=this.oPlayer);var t=RFE.select(".c-mmp__cpanel",e);t&&(RFE.addClass("c-mmp__cpanel--displayed",t),RFE.removeClass("c-mmp__cpanel--hidden",t),this.panelHiddenByMouseTracking=!1)},multimediaPlayer.prototype.hideControlPanel=function(e){e||(e=this.oPlayer);var t=RFE.select(".c-mmp__cpanel",e)[0];t&&(RFE.addClass("c-mmp__cpanel--hidden",t),RFE.removeClass("c-mmp__cpanel--displayed",t),this.hideSourcesExpander(e),this.panelHiddenByMouseTracking=!0,this.hideVolumeBar(e))},multimediaPlayer.prototype.autoHideControlPanelInner=function(e,t,a,i){var s=this,o=!a||!s.trackMouseMoving;!0===s.panelHiddenByMouseTracking&&i?(s.showControlPanel(e),s.oTitleOverlay&&s.isTitleOverlayAvailable(s.oTitleOverlay)&&!s.isAnotherOverlayOpened(s.oTitleOverlay)&&s.openOverlay(s.oTitleOverlay)):(clearTimeout(s._multimediaPlayerControlPanelAutohideTimeout),s._multimediaPlayerControlPanelAutohideTimeout=setTimeout(function(){!s.core.isPaused(s.oPlayer)&&o&&(s.hideControlPanel(e),s.oTitleOverlay&&s.closeOverlay(s.oTitleOverlay))},t))},multimediaPlayer.prototype.autoHideControlPanel=function(e){var t=this;t.isVideo&&(e||(e=t.oPlayer),t.touchStarted?t.autoHideControlPanelInner(e,5e3,!1,!0):t.trackMouseMoving?t.autoHideControlPanelInner(e,50,!0,!0):t.autoHideControlPanelInner(e,50,!0,!1))},multimediaPlayer.prototype.openVolumeBar=function(e){e||(e=this.oPlayer);var t=RFE.select(".js-volume-panel",e)[0];t&&RFE.addClass("c-mmp__indicator--expanded",t);var a=RFE.select(".js-btn-volume",e)[0];a&&RFE.addClass("btn--active",a);var i=this;setTimeout(function(){i._updateVolumeSlider(i.core.getVolume())},500)},multimediaPlayer.prototype.hideVolumeBar=function(e){e||(e=this.oPlayer);var t=RFE.select(".js-volume-panel",e)[0];t&&RFE.removeClass("c-mmp__indicator--expanded",t);var a=RFE.select(".js-btn-volume",e)[0];a&&RFE.removeClass("btn--active",a)},multimediaPlayer.prototype.toggleSourcesExpander=function(e){e||(e=this.oPlayer);var t=RFE.select(".js-c-mmp__expander--sources",e)[0];RFE.hasClass("c-mmp__expander--opened",t)?this.hideSourcesExpander(e):this.openSourcesExpander(e)},multimediaPlayer.prototype.openSourcesExpander=function(e){e||(e=this.oPlayer),this._renderSources(e);var t=RFE.select(".js-c-mmp__expander--sources",e)[0];t&&RFE.addClass("c-mmp__expander--opened",t);var a=RFE.select(".js-btn-settings-expand",e)[0];a&&RFE.addClass("btn--active",a);var i=e.offsetHeight-50,s=RFE.select(".js-sources",t)[0].offsetHeight;t.style.height=(s<i?s:i)+"px",t.style.maxHeight=i+"px",s<i?RFE.removeClass("c-mmp__expander--scrollable",t):RFE.addClass("c-mmp__expander--scrollable",t);var o=this;o.core.addEventListener("onDocumentClick",function(e){o.hideSourcesExpanderOnOutsideClick(e)})},multimediaPlayer.prototype.hideSourcesExpander=function(e){e||(e=this.oPlayer);var t=RFE.select(".js-c-mmp__expander--sources",e)[0];t&&RFE.removeClass("c-mmp__expander--opened",t);var a=RFE.select(".js-btn-settings-expand",e)[0];a&&RFE.removeClass("btn--active",a),t.style.height=0;var i=this;i.core.removeEventListener("onDocumentClick",function(e){i.hideSourcesExpanderOnOutsideClick(e)})},multimediaPlayer.prototype.hideSourcesExpanderOnOutsideClick=function(e){if(this.oSettingsControls){var t=e.target||e.srcElement;t===this.oSettingsControls||RFE.isChildOf(t,this.oSettingsControls)||this.hideSourcesExpander()}},multimediaPlayer.prototype.isTitleOverlayAvailable=function(e){return!!e&&(!!RFE.select(".js-btn-sharing-overlay",e)[0]||!!this.isStickyPlayerEnabled(this.oPlayer)||!this.isPlayerExtraSmall()&&!this.isPlayerSmall())},multimediaPlayer.prototype.isAnotherOverlayOpened=function(e){if(e){var t=RFE.selectParent(e,"c-mmp"),a=RFE.select(".c-mmp__overlay--enabled",t);if(!a)return!1;for(var i=0;i<a.length;i++)if(a[i]!==e)return!0;return!1}},multimediaPlayer.prototype.openOverlay=function(e,t){if(e){var a=RFE.selectParent(e,"c-mmp");t&&this.selectOverlayTab(e,t,!1),RFE.addClass("c-mmp__overlay--enabled",e),RFE.removeClass("c-mmp__overlay--disabled",e);for(var i=RFE.select(".c-mmp__overlay--enabled",a),s=this,o=0;o<i.length;o++)i[o]!==e&&s.closeOverlay(i[o])}},multimediaPlayer.prototype.closeOverlay=function(e){if(e){RFE.removeClass("c-mmp__overlay--enabled",e),RFE.addClass("c-mmp__overlay--disabled",e);var t=RFE.selectParent(e,"c-mmp");if(0==RFE.select(".c-mmp__overlay--enabled",t).length&&("audio"==this.getMediaType(t)||!this.isPlaying(t)||this.trackMouseMoving&&!this.panelHiddenByMouseTracking)){var a=RFE.select(".js-c-mmp__title-overlay",t)[0];a&&this.isTitleOverlayAvailable(a)&&this.openOverlay(a)}if(e===RFE.select(".js-c-mmp__settings-overlay",t)[0])var i=RFE.select(".js-btn-settings-overlay",t)[0];i&&RFE.removeClass("btn--active",i)}},multimediaPlayer.prototype.toggleOverlay=function(e){e&&(RFE.hasClass("c-mmp__overlay--disabled",e)?this.openOverlay(e):this.closeOverlay(e))},multimediaPlayer.prototype.selectOverlayTab=function(e,t,a){if(e&&t){var i=RFE.select(".c-mmp__overlay-tab--enabled",e);if(!i||1!==i.length||i[0]!==t){var s=function(){for(var t=RFE.select(".c-mmp__overlay-tab",e),a=0;a<t.length;a++)RFE.removeClass("c-mmp__overlay-tab--animated",t[a])};if(t){if(a&&function(){for(var t=RFE.select(".c-mmp__overlay-tab",e),a=0;a<t.length;a++)RFE.addClass("c-mmp__overlay-tab--animated",t[a])}(),i)for(var o=0;o<i.length;o++){RFE.removeClass("c-mmp__overlay-tab--enabled",i[o]),RFE.addClass("c-mmp__overlay-tab--disabled",i[o]);var r=RFE.select("."+RFE.data(i[o],"trigger"),e);if(r)for(var l=0;l<r.length;l++)RFE.removeClass("c-mmp__overlay-actions-link--active",r[l])}RFE.addClass("c-mmp__overlay-tab--enabled",t),RFE.removeClass("c-mmp__overlay-tab--disabled",t);var r=RFE.select("."+RFE.data(t,"trigger"),e);if(r)for(var o=0;o<r.length;o++)RFE.addClass("c-mmp__overlay-actions-link--active",r[o]);a&&(window.overlayTabsAnimationTimer=setTimeout(function(){s()},500))}}}},multimediaPlayer.prototype.isLive=function(e){return e||(e=this.oPlayer),RFE.hasClass("c-mmp--live",e)},multimediaPlayer.prototype.isEnabled=function(e){return e||(e=this.oPlayer),RFE.hasClass("c-mmp--enabled",e)},multimediaPlayer.prototype.getMediaType=function(e){return e||(e=this.oPlayer),RFE.hasClass("c-mmp--video",e)?"video":"audio"},multimediaPlayer.prototype.isPlaying=function(e){return e||(e=this.oPlayer),RFE.hasClass("c-mmp--playing",e)},multimediaPlayer.prototype.hasIntroVideo=function(e){return e||(e=this.oPlayer),RFE.hasClass("c-mmp--has-intro",e)},multimediaPlayer.prototype.hasPosterImage=function(e){return e||(e=this.oPlayer),RFE.hasClass("c-mmp--has-poster",e)},multimediaPlayer.prototype.isPlayerExtraSmall=function(e){return e||(e=this.oPlayer),e.offsetWidth<=parseInt(RFE.data(e,"breakpoint_s"))},multimediaPlayer.prototype.isPlayerSmall=function(e){return e||(e=this.oPlayer),e.offsetWidth>=parseInt(RFE.data(e,"breakpoint_s"))&&e.offsetWidth<parseInt(RFE.data(e,"breakpoint_m"))},multimediaPlayer.prototype.isPlayerMedium=function(e){return e||(e=this.oPlayer),e.offsetWidth>=parseInt(RFE.data(e,"breakpoint_m"))&&e.offsetWidth<parseInt(RFE.data(e,"breakpoint_l"))},multimediaPlayer.prototype.isPlayerLarge=function(e){return e||(e=this.oPlayer),e.offsetWidth>=parseInt(RFE.data(e,"breakpoint_l"))},multimediaPlayer.prototype.setPlayerSizeClasses=function(e){e||(e=this.oPlayer),this.isPlayerExtraSmall(e)?RFE.addClass("c-mmp--xs",e):RFE.removeClass("c-mmp--xs",e),this.isPlayerSmall(e)?RFE.addClass("c-mmp--s",e):RFE.removeClass("c-mmp--s",e),this.isPlayerMedium(e)?RFE.addClass("c-mmp--m",e):RFE.removeClass("c-mmp--m",e),this.isPlayerLarge(e)?RFE.addClass("c-mmp--l",e):RFE.removeClass("c-mmp--l",e)},multimediaPlayer.prototype.isStickyPlayerEnabled=function(e){e||(e=this.oPlayer);var t=e.parentNode;return t&&RFE.hasClass("c-sticky-element",t)&&RFE.hasClass("c-sticky-element--sticked",t)},multimediaPlayer.prototype.pausePlayingPlayers=function(){for(var e=this,t=RFE.select(".c-mmp--playing"),a=0;a<t.length;a++)e.core.pause(t[a])},multimediaPlayer.prototype.patchFromCanonical=function(){var e=document.querySelector('link[rel="canonical"]'),t=e&&e.href?e.href:null;if(!e||!t)return void(this.debug&&console.warn('No link[rel="canonical"] found while data-originalsite is. Patching from canonical abborted'));var i=new RegExp(/https:\/\/.*?\//),s=window.location.protocol+"//"+window.location.host,o=t.match(i)[0].slice(0,t.match(i)[0].length-1);this.oTitleLink.href.indexOf(s)>-1?this.oTitleLink.href=this.oTitleLink.href.replace(s,o):this.oTitleLink.href=o+this.oTitleLink.href;var r=this.oPlayer.querySelector(".js-tab-embed-overlay"),l=r?r.getAttribute("data-embed-source"):null;if(l){var n=(o+"/"+l.replace(/\/\/.*?\//,"")).replace("https:","");r.setAttribute("data-embed-source",n)}var d=this.oPlayer.querySelector(".js-share-url");if(d&&d.value){var c=d.value.replace("http:","https:").replace(s,o);d.value=c}var h=this.oPlayer.querySelectorAll(".js-social-btn");for(a=0;a<h.length;a++){var u=decodeURIComponent(h[a].href),m=u.replace("http:","https:").replace(s,o);h[a].href=m}},multimediaPlayer.prototype.getStickyPlayerId=function(e){e||(e=this.oPlayer);var t=e.parentNode;return!(!t||!RFE.hasClass("c-sticky-element",t))&&RFE.data(t,"sp_instance_id")},multimediaPlayer.prototype.checkNextShow=function(){var e=RFE.select(".playlist__items .playlist__item.invisible")[0];if(e&&!this.isStickyPlayerEnabled(this.oPlayer)&&!window.location.search.includes("withmediaplayer=1")){var t=RFE.data(e,"next-title"),a=RFE.data(e,"next-link"),i=RFE.data(e,"next-type"),s=document.querySelector("title");if(t&&(this.oTitleLink&&(this.oTitleLink.innerHTML=t,this.oTitleLink.title=t),s&&(s.innerHTML=t),this.oPoster&&(this.oPoster.title=t),this.oMedia&&(this.oMedia.title=t,this.oMedia.setAttribute("data-sdktitle",t)),this.oPlayer&&this.oPlayer.setAttribute("data-title",t)),"recorded"===i&&a){for(var o=RFE.select(".c-mmp"),r=0;r<o.length;r++)RFE.addClass("c-mmp--loading",o[r]);setTimeout(function(){window.location.replace(a)},5e3)}}},multimediaPlayer.prototype.dashSetupOnPlay=function(){var e=this;e.dash.dashAutoPaused=!0,e.dash.dashSetup(),e.core.removeEventListener("beforePlaybackPlay",e.dashSetupOnPlay)},multimediaPlayer.prototype._renderSources=function(e){var t=this;e||(e=this.oPlayer);var a=RFE.multimediaPlayerUtils.getMediaElement(e),i=RFE.select(".js-sources",e);if(!i[0].hasChildNodes()||!RFE.select("ul",i[0])){var s=[],o=t.isPrerollOver?a.src:""!==t.dash.mpdUrl?t.dash.mpdUrl:a.getAttribute("data-preroll-temp-src"),r=t.isPrerollOver?RFE.data(a,"type"):""!==t.dash.mpdUrl?"application/dash+xml":a.getAttribute("data-preroll-temp-type");if(!this.hasIntroVideo(e)&&o){var l=RFE.data(a,"primarysrc"),n=RFE.data(a,"info");n||(n="Auto"),s.push({Src:l||o,Type:r,DataInfo:n,Selected:!0})}var d=RFE.data(a,"sources");if(d&&(d=JSON.parse(d)))for(var c=0,h=d.length;c<h;++c){var u=d[c],m=u.Src;u.DataInfo!==n&&u.DataInfo&&"auto"!==u.DataInfo.toLowerCase()&&s.push({Src:m,Type:d[c].Type,DataInfo:d[c].DataInfo})}s.sort(function(e,t){return parseInt(e.DataInfo)-parseInt(t.DataInfo)});var y=function(e){for(var a=RFE.selectParent(e,"c-mmp"),i=RFE.select("li",a),s=RFE.data(e,"type"),o="application/dash+xml"===s,r=t.core.getCurrentTime(a),l=0;l<i.length;l++)i[l]&&RFE.data(i[l],"id")==RFE.data(e,"id")?RFE.addClass("c-mmp__sources-item--selected",i[l]):RFE.removeClass("c-mmp__sources-item--selected",i[l]);if(t.dash){if(t.dash.dashMediaSource){if(t.dash.isDynamic)return void t.dash.forceDynamicVideoRepresentation(RFE.data(e,"representation"));if(o)return;if("open"===t.dash.dashMediaSource.readyState){t.dash.bufFeedingTimer=clearTimeout(t.dash.bufFeedingTimer);for(var l=0;l<t.dash.dashMediaSource.sourceBuffers.length;l++)t.dash.abortBufferingAndReset(t.dash.dashMediaSource.sourceBuffers[l]);t.dash.dashMediaSource.endOfStream()}}t.dash.dashMediaSource=null,t.dash.bufferHealthHistory=[]}t.isPrerollOver?t.html5PlayerSetAndPlay({source:{Src:RFE.data(e,"src"),Type:s,DataInfo:RFE.data(e,"info")},currentTime:r,playMode:o?"user":t.isPlaying(a)?"":"user"},function(){t.hideSourcesExpander(a),o&&t.dash&&(t.dash.dashAutoPaused=!0,t.dash.dashSetup())}):(t.oMedia.setAttribute("data-preroll-temp-src",RFE.data(e,"src")),t.oMedia.setAttribute("data-preroll-temp-type",s),t.hideSourcesExpander(a))},p=document.createElement("ul");RFE.addClass("c-mmp__sources",p);for(var c=0,h=s.length;c<h;++c){var v=document.createElement("li"),P=s[c];RFE.data(v,"src",P.Src),RFE.data(v,"type",P.Type),RFE.data(v,"info",P.DataInfo),RFE.data(v,"id",c+1),RFE.addClass("c-mmp__sources-item",v),v.textContent=s[c].DataInfo,s[c].Selected&&RFE.addClass("c-mmp__sources-item--selected",v),p.appendChild(v)}if(t.dash&&t.dash.isDynamic){for(var E,c=0;c<t.dash.dashMediaSource.sourceBuffers.length;c++){var f=t.dash.dashMediaSource.sourceBuffers[c];if(f.isVideo){E=f;break}}if(E&&E.representations)for(var c=0;c<E.representations.length;c++){var g=E.representations[c],v=document.createElement("li");RFE.data(v,"representation",g.id),RFE.data(v,"id",g.id),RFE.data(v,"type","application/dash+xml"),RFE.addClass("c-mmp__sources-item",v),v.textContent=g.id.match(/[0-9]+p/)?g.id.match(/[0-9]+p/):g.height+"p",p.appendChild(v)}}for(var b=RFE.select(".js-sources",e),_=0;_<b.length;_++){var F=p.cloneNode(!0);b[_].appendChild(F)}for(var R=RFE.select(".c-mmp__sources-item",e),c=0;c<R.length;c++)R[c].addEventListener("click",function(){y(this);var a=RFE.select(".js-c-mmp__settings-overlay",e)[0];RFE.hasClass("c-mmp__overlay--enabled",a)&&t.closeOverlay(a);var i=RFE.select(".js-c-mmp__expander--sources",e)[0];RFE.hasClass("c-mmp__expander--opened",i)&&t.hideSourcesExpander(e)})}},multimediaPlayer.prototype._updatePlayerDimensions=function(e){if(e||(e=this.oPlayer),"video"===this.getMediaType(e)){var t=Math.ceil(e.offsetWidth/16*9);e.style.height=this.core.isInFullscreen?"100%":t+"px",this.core.isInFullscreen&&(e.style.width="");var a=RFE.multimediaPlayerUtils.getMediaElement(e);a&&(a.style.height=this.core.isInFullscreen?"100%":t+"px",a.style.width="100%"),e===this.oPlayer&&(this.playerHeight=this.oPlayer.offsetHeight)}},multimediaPlayer.prototype._resizeControlPanel=function(e){e||(e=this.oPlayer);var t=RFE.select(".js-progressbar",e)[0],a=RFE.select(".js-current-time",e)[0],i=RFE.select(".js-duration",e)[0];(a.offsetWidth&&i.offsetWidth||RFE.hasClass("c-mmp--xs",e))&&(t.style.marginLeft=a.offsetWidth+10+"px",t.style.marginRight=i.offsetWidth+10+"px");var s=RFE.select(".c-mmp__cpanel",e)[0],o=RFE.select(".c-mmp__cpanel-playback-controls",e)[0],r=RFE.select(".c-mmp__cpanel-progress-controls",e)[0],l=RFE.select(".c-mmp__cpanel-additional-controls",e)[0];this.isVideo||!RFE.closest(this.oPlayer,".c-sticky-element--sticked")&&!RFE.closest(this.oPlayer,".c-sticky-element--unsticking")?(r.style.width=s.offsetWidth-o.offsetWidth-l.offsetWidth-1+"px",r.style.minWidth=0):r.style.width=""},multimediaPlayer.prototype._resizeOverlayTitle=function(e){e||(e=this.oPlayer);var t=RFE.select(".js-c-mmp__title-overlay",e)[0];if(t){var a=RFE.select(".js-overlay-title",t)[0];if(a){var i=RFE.select(".js-overlay-actions",t)[0];if(i){var s="audio"===this.getMediaType(e)&&!this.isPlayerSmall(e)&&this.hasPosterImage(e)?RFE.select(".js-poster",e)[0]:0,o=s?s.offsetWidth:0;a.style.width=t.offsetWidth-i.offsetWidth-o-40+"px"}}}},multimediaPlayer.prototype._updateBufferedRangeBar=function(e){var t=this;e||(e=this.oPlayer);for(var a=this.core.getBuffered(e),i=this.core.getCurrentTime(e),s=this.core.getDuration(e),o=0;o<a.length;o++){var r=a.start(o),l=a.end(o);if(r<=i&&l>=i)for(var n=0;n<t.oPlaybackIndicatorBuffered.length;n++)t.oPlaybackIndicatorBuffered[n].style.marginLeft=Math.round(100*r/s)+"%",t.oPlaybackIndicatorBuffered[n].style.width=Math.round(100*(l-r)/s)+"%"}},multimediaPlayer.prototype._updateSlider=function(e,t,a){var i=this;if(!isNaN(e)){for(var s=RFE.hasClass("c-mmp__indicator--vertical",RFE.selectParent(t[0],"c-mmp__indicator")),o=0;o<t.length;o++)s?t[o].style.height=Math.round(100*e)+"%":t[o].style.width=Math.round(100*e)+"%";if(a)for(var r=a.length?a:new Array(a),o=0;o<r.length;o++)s?r[o].style.bottom=Math.round(e*i.oVolumebar.offsetHeight-r[o].offsetHeight/2)+"px":r[o].style.left=Math.round(e*i.oProgressbar.offsetWidth-r[o].offsetWidth/2)+"px",RFE.hasClass("c-mmp__indicator-button--hidden",r[o])||RFE.isVisible(r[o])||RFE.show(r[o])}},multimediaPlayer.prototype._updateProgressbarSlider=function(e){this._updateSlider(e,RFE.select(".js-playback-played",this.oPlayer),RFE.select(".js-progressbar-btn",this.oPlayer))},multimediaPlayer.prototype._updateVolumeSlider=function(e){e||(e=this.core.getVolume()),this._updateSlider(e,RFE.select(".js-volume-level",this.oPlayer),this.oVolumebarButton);var t=RFE.select(".js-btn-volume .ico",this.oPlayer);this.core.getVolume()>0?(RFE.removeClass("ico-volume-muted",t),RFE.addClass("ico-volume-unmuted",t)):(RFE.removeClass("ico-volume-unmuted",t),RFE.addClass("ico-volume-muted",t))},multimediaPlayer.prototype._eventSliderClick=function(e){this.progressbarSliding=!1,RFE.addClass("c-mmp--loading",this.oPlayer);var t=this._getSlideBarClickPosition(e,this.oProgressbar,!1),a=this.core.getDuration();a>0?this.core.setCurrentTime(t*a,this.oPlayer):(this.loadPosition=t,this.core.load(this.oPlayer)),this._updateProgressbarSlider(t),this._updateBufferedRangeBar()},multimediaPlayer.prototype._eventSliderTouchMove=function(e){if(this.lastTouchMove=e,!0===this.progressbarSliding){var t=this._getSlideBarButtonPosition(this.oProgressbar,this.oProgressbarButton,!1);this._setSlideBarButtonPosition(this.oProgressbarButton,t,!1),this.progressbarButtonRelativePosition=(Math.round(t)+this.oProgressbarButton.offsetWidth/2)/this.oProgressbar.offsetWidth,this._updateProgressbarSlider(this._getSlideBarClickPosition(e,this.oProgressbar,!1));var a=this.core.getDuration();if(!a&&this.oDuration&&this.oDuration.textContent){var i=RFE.multimediaPlayerUtils.hmsToS(this.oDuration.textContent);isFinite(i)&&(a=i)}if(a&&this.oCurrentTime){var s=RFE.multimediaPlayerUtils.toHms(this.progressbarButtonRelativePosition*a);this.oCurrentTime.textContent=s,this.oPlaybackTimeBadgeText&&(this.oPlaybackTimeBadgeText.textContent=s),this._resizeControlPanel()}}if(!0===this.volumebarSliding){var t=this._getSlideBarButtonPosition(this.oVolumebar,this.oVolumebarButton,!0);this._setSlideBarButtonPosition(this.oVolumebarButton,t,!0),this.volumebarButtonRelativePosition=(Math.round(t)+this.oVolumebarButton.offsetHeight/2)/this.oVolumebar.offsetHeight,this._updateVolumeSlider(this._getSlideBarClickPosition(e,this.oVolumebar,!0))}this.core.isPaused(this.oPlayer)||this.autoHideControlPanel(this.oPlayer)},multimediaPlayer.prototype._eventSliderTouchEnd=function(){if(!0===this.progressbarSliding){var e=this.progressbarButtonRelativePosition,t=this.core.getDuration();t?(this.core.setCurrentTime(e*t),!this.slidePaused&&this.core.play(this.oPlayer)):(this.loadPosition=e,this.core.load(this.oPlayer))}if(!0===this.volumebarSliding){var e=this.volumebarButtonRelativePosition;this.core.setVolume(e)}this.progressbarSliding=this.volumebarSliding=!1},multimediaPlayer.prototype._getSlideBarButtonPosition=function(e,t,a){var i=this.lastTouchMove,s=i.touches&&i.touches.length?i.touches[0].pageX:i.changedTouches&&i.changedTouches.length?i.changedTouches[0].pageX:i.pageX,o=i.touches&&i.touches.length?i.touches[0].pageY:i.changedTouches&&i.changedTouches.length?i.changedTouches[0].pageY:i.pageY;if(a)var r=Math.min(e.offsetHeight-t.offsetHeight/2,Math.max(0-t.offsetHeight/2,this.slideButtonVerticalOffset+(this.slideStarted-o)));else var r=Math.min(e.offsetWidth-t.offsetWidth/2,Math.max(0-t.offsetWidth/2,s-RFE.offset(e).left-this.slideButtonOffset));return r},multimediaPlayer.prototype._setSlideBarButtonPosition=function(e,t,a){a?e.style.bottom=Math.round(t)+"px":e.style.left=Math.round(t)+"px"},multimediaPlayer.prototype._getSlideBarClickPosition=function(e,t,a){var i,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0].pageX:e.pageX,o=e.changedTouches&&e.changedTouches.length?e.changedTouches[0].pageY:e.pageY;if(a){var r=t.getBoundingClientRect(),l=void 0!==window.scrollY?window.scrollY:window.pageYOffset;i=(t.offsetHeight-(o-r.top-l))/t.offsetHeight}else i=(s-RFE.offset(t).left)/t.offsetWidth;return i=Math.min(1,i),i=Math.max(0,i)},multimediaPlayer.prototype._onKeyPress=function(e){var t=this;switch(e.keyCode){case 9:var a=RFE.selectParent(e.target,"c-mmp__overlay-tab");if(a&&!RFE.isChildOf(e.target,RFE.select(".c-mmp__overlay-tab--enabled",t.oPlayer)[0])){var i=RFE.selectParent(a,"c-mmp__overlay");t.selectOverlayTab(i,a,!0)}break;case 27:for(var s=RFE.select(".c-mmp__overlay--enabled",t.oPlayer),o=0;o<s.length;o++)RFE.hasClass("c-mmp__title-overlay",s[o])||t.closeOverlay(s[o])}},multimediaPlayer.prototype._onFullscreenChange=function(e){var t=0,a=this.playerHeight;if(this.core.isInFullscreen)t=40,a=this.oPlayer.offsetHeight,this.oPlayer.style.width="";else{var i=RFE.selectParent(this.oPlayer,"c-sticky-element");i&&(RFE.removeClass("c-sticky-element--sticked",i),RFE.removeClass("c-sticky-element--fullscreen",i))}this.oMedia.style.height=a-t+"px",this._updatePlayerDimensions(),this.setPlayerSizeClasses(),this._resizeControlPanel(),this._resizeOverlayTitle(),this._updateProgressbarSlider(RFE.select(".js-playback-played")[0].offsetWidth/RFE.select(".js-playback-range")[0].offsetWidth)},multimediaPlayer.prototype._onPlaybackProgress=function(e){this._updateBufferedRangeBar()},multimediaPlayer.prototype._onPlaybackLoadedData=function(e){this.loadPosition>0?this.core.setCurrentTime(this.loadPosition*this.core.getDuration()):this.initialHashStartTime>0&&this.core.setCurrentTime(this.initialHashStartTime)},multimediaPlayer.prototype._onPlaybackTimeUpdate=function(e){if(isNaN(this.core.getDuration()))return void RFE.removeClass("c-mmp--loading",this.oPlayer);this._updateSlider(this.core.getCurrentTime()/this.core.getDuration(),RFE.select(".js-playback-played",this.oPlayer),RFE.select(".js-progressbar-btn",this.oPlayer)),this.oCurrentTime.textContent=RFE.multimediaPlayerUtils.toHms(this.waitingInLastSecondHappened&&this.isTheLastSecond()?this.core.getDuration():this.core.getCurrentTime()),this._resizeControlPanel(),RFE.removeClass("c-mmp--loading",this.oPlayer)},multimediaPlayer.prototype._onPlaybackEnded=function(e){if(!this.isPrerollOver)if(this.isPrerollOver=!0,this.setupEnabledPlayer(),this.oMedia.readyState||""!==this.dash.mpdUrl)this.core.play();else var t=this,a=setInterval(function(){t.oMedia.readyState&&(t.core.play(),clearInterval(a))},10);!RFE.hasClass("j_intro",this.oMedia)&&this.isPrerollOver&&(this.analytics.GAEvent_AlreadyFinished||(this.analytics.GATrackEvent("finish"),this.analytics.AnalyticsTagTrackEvent(this.isVideo?{video_event:"video_complete"}:{audio_event:"audio_complete"}),this.analytics.GAEvent_AlreadyFinished=!0),this.analytics.GA15SStopPlInterval(),this.isLive(this.oPlayer)&&this.analytics.TaStopPulse()),!this.oTitleOverlay||!this.isTitleOverlayAvailable(this.oTitleOverlay)||this.isAnotherOverlayOpened(this.oTitleOverlay)||this.isPrerollOver&&this.hasPreroll||this.openOverlay(this.oTitleOverlay),this.oDurationBadge&&RFE.removeClass("c-mmp__badge--hidden",this.oDurationBadge),this.checkNextShow()},multimediaPlayer.prototype._onPlaybackPause=function(e){var t=this;this.isPrerollOver&&(this.analytics.GA15SStopPlInterval(),this.isLive(this.oPlayer)&&this.analytics.TaStopPulse(),this.analytics.TaEvent_PauseTime=(new Date).getTime(),clearTimeout(t.analytics.TaEvent_10PPlayedTimeout),clearTimeout(t.analytics.TaEvent_50PPlayedTime