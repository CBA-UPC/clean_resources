(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[598],{4772:3722:5339:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Bg});const r=window,i=r.pbjs=r.pbjs||{};d=i.cmd||[],i.que=i.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("pbjs"));const c=2,l={buckets:[{max:5,increment:.5}]},u={buckets:[{max:20,increment:.1}]},p={buckets:[{max:20,increment:.01}]},f={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},g={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function m(e,t,n){let r="";if(!b(t))return r;const i=t.buckets.reduce((,{max:0});let o=0,s=d(t.buckets,();return s&&(r=function(e,t,n){const r=void 0!==t.precision?t.precision:c,i=t.increment*n,o=t.min*n;let s=Math.floor,a=O.getConfig("cpmRoundingFunction");"function"==typeof a&&(s=a);let d,l,u=Math.pow(10,r+2),p=(e*u-o*u)/(i*u);try{d=s(p)*i+o}catch(e){l=!0}return(l||"number"!=typeof d)&&(ve("Invalid rounding function passed in config"),d=Math.floor(p)*i+o),d=Number(d.toFixed(10)),d.toFixed(r)}(e,s,n)),r}function b(e){if(Re(e)||!e.buckets||!Array.isArray(e.buckets))return!1;let t=!0;return e.buckets.forEach((),t}onst y=JSON.parse('{"k2":{"xn":"adserverTargeting","zF":"standard"},"f":"pbjs_debug","Q_":{"Q":1},"EVENTS":{"AUCTION_INIT":"auctionInit","AUCTION_TIMEOUT":"auctionTimeout","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","BID_REJECTED":"bidRejected","NO_BID":"noBid","SEAT_NON_BID":"seatNonBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent","BID_ACCEPTED":"bidAccepted"},"q_":{"Sn":"preventWritingOnMainDocument","Ex":"noAd","XW":"exception","WT":"cannotFindAd","mb":"missingDocOrAdid"},"aI":{"bidWon":"adUnitCode"},"Ql":{"yE":"low","M2":"medium","lj":"high","B7":"auto","uN":"dense","qN":"custom"},"TD":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain","ACAT":"hb_acat","CRID":"hb_crid","DSP":"hb_dsp"},"kF":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"NATIVE_KEYS":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"os":{"YZ":"s2s"},"UE":{"CK":"targetingSet","fe":"rendered"},"Gw":{"UI":"Bid has missing or invalid properties","Gp":"Invalid request ID","Dg":"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes","pe":"Bid does not meet price floor"},"PREBID_NATIVE_DATA_KEYS_TO_ORTB":{"body":"desc","body2":"desc2","sponsoredBy":"sponsored","cta":"ctatext","rating":"rating","address":"address","downloads":"downloads","likes":"likes","phone":"phone","price":"price","salePrice":"saleprice","displayUrl":"displayurl"},"NATIVE_ASSET_TYPES":{"sponsored":1,"desc":2,"rating":3,"likes":4,"downloads":5,"price":6,"saleprice":7,"phone":8,"address":9,"desc2":10,"displayurl":11,"ctatext":12},"NATIVE_IMAGE_TYPES":{"ICON":1,"MAIN":3},"NATIVE_KEYS_THAT_ARE_NOT_ASSETS":["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"]}');var v=Object.defineProperty,I=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const E="TRUE"===Ee(y.f).toUpperCase(),S="random",x={};x[S]=!0,x.fixed=!0;const A=S,_={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},O=function(){let e,t,n,r=[],i=null;function o(){{};const o={publisherDomain:{set,priceGranularity:{val:_.MEDIUM,set,customPriceBucket:{val:{},set(){}},mediaTypePriceGranularity:{val:{},set(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce(((t,n)=>(c(e[n])?"string"==typeof e?t[n]=a(e[n])?e[n]:r("priceGranularity"):ke(e)&&(t[n]=e[n],he(`Using custom price granularity for ${n}`)):ve(`Invalid price granularity for media type: ${n}`),t)),{}))}},bidderSequence:{val:A,set,auctionOptions:{val:{},set(e){(function(e){if(!ke(e))return ve("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t)return ve(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!_e(e[t]))return ve(`Auction Options ${t} must be of type Array`),!1;if(!e[t].every(Ae))return ve(`Auction Options ${t} must be only string`),!1}else if("suppressStaleRender"===t&&!Se(e[t],X))return ve(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&i("auctionOptions",e)}}};let s={debug:E,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10};ject.defineProperties(s,Object.fromEntries(Object.entries(o).map(())),t&&g(Object.keys(t).reduce((,{})),t=s,n={}}function s(){if(i&&n&&ke(n[i])){let e=n[i];return new Set(Object.keys(t).concat(Object.keys(e)))).reduce(((n,r)=>(void 0===e[r]?n[r]=t[r]:void 0===t[r]?n[r]=e[r]:ke(e[r])?n[r]=gt({},t[r],e[r]):n[r]=e[r],n)),{})}return Object.assign({},t)}const[c,l]=[s,.map((e=>function(...t){if(t.length<=1&&"function"!=typeof t[0]){const n=t[0];return n?h(e(),n):s()}return function(e,t,n={}){let i=t;if("string"!=typeof e&&(i=e,e="*",n=t||{}),"function"!=typeof i)return void Ie("listener must be a function");const o={topic:e,callback:i};return r.push(o),n.init&&i("*"===e?l():{[e]:l(e)}),(...t)})),[u,p]=[l,c].map((e=>function(...t){let n=e(...t);return n&&"object"==typeof n&&(n=We(n)),n}));function f(n){if(!ke(n))return void Ie("setConfig options must be an object");let r=Object.keys(n),i={};r.forEach((),g(i)}function g(e){const t=Object.keys(e);r.filter((e=>a(t,e.topic))).forEach((),r.filter(().forEach((t=>t.callback(e)))}function m(e,t=!1){try{!function(e){if(!ke(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!ke(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach(()}catch(e){Ie(e)}}turn o(),{getCurrentBidder:function(){return i},resetBidder:v,getConfig:l,getAnyConfig:c,readConfig:u,readAnyConfig:p,setConfig:f,mergeConfig:function(e){if(!ke(e))return void Ie("mergeConfig input must be an object");const t=gt(s(),e);return f(((e,t)=>{for(var n in t||(t={}))w.call(t,n)&&T(e,n,t[n]);if(I)for(var n of I(t))C.call(t,n)&&T(e,n,t[n]);return e})({},t)),t},setDefaults:resetConfig:o,runWithBidder:y,callbackWithBidder:function(e){return function(t){return function(...n){if("function"==typeof t)return y(e,t.bind(this,...n));ve("config.callbackWithBidder callback is not a function")}}},setBidderConfig:m,getBidderConfig:function(){return n},mergeBidderConfig:}();var k,R,B,D,U=n(3722),j=n.n(U),P=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},N=(e,t,n)=>(P(e,t,"read from private field"),n?n.call(e):t.get(e)),$=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},q=(e,t,n,r)=>(P(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),M=(e,t,n)=>(P(e,t,"access private method"),n);const F=0,L=1,V=class e{constructor(e){if($(this,k,void 0),$(this,R,void 0),"function"!=typeof e)throw new Error("resolver not a function");const t=[],n=[];let[r,i]=[F,L].map(();try{e(r,i)}catch(e){i(e)}q(this,k,t),q(this,R,n)}static timeout(t=0){return new e(()}then(e,t){const n=N(this,k);return new this.constructor(((r,i)=>{const o=n.length?o():N(this,R).push(o)}))} WeakMap,R=new WeakMap,B=new WeakSet,D=function(e,t,n){let r=e.length;===e.length&&n?n():e.forEach(()},$(V,B);let z=V;ar W="String",H="Function",K="Number",J="Object",X="Boolean",Y=Object.prototype.toString;let Q,Z=Boolean(window.console),ee=Boolean(Z&&window.console.log),te=Boolean(Z&&window.console.info),ne=Boolean(Z&&window.console.warn),re=Boolean(Z&&window.console.error);const ie=o();function oe(...e){null!=Q&&Q(...e)}const se={checkCookieSupport:Qe,createTrackPixelIframeHtml:function(e,t=!0,n=""){return e?(t&&(e=encodeURI(e)),n&&(n=`sandbox="${n}"`),`<iframe ${n} id="${ce()}"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="${e}">\n    </iframe>`):""},getWindowSelf:me,getWindowTop:ge,getWindowLocation:be,insertUserSyncIframe:$e,insertElement:je,isFn:xe,triggerPixel:Ne,logError:Ie,logWarn:ve,logMessage:he,logInfo:ye,parseQS:ct,formatQS:lt,deepEqual:ft};let ae={};var de=);unction le(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,le)}unction pe(e){return"string"==typeof e?e.split(",").filter((e=>e.match(/^(\d)+x(\d)+$/i))):"object"==typeof e?2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[fe(e)]:e.map(fe):[]}unction ge(){return window.top}function me(){return window.self}unction he(){Te()&&ee&&console.log.apply(console,Ce(arguments,"MESSAGE:"))}unction ve(){Te()&&ne&&console.warn.apply(console,Ce(arguments,"WARNING:")),oe(y.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments})}ction Te(){return!!O.getConfig("debug")}nction xe(e){return Se(e,H)}function Ae(e){return Se(e,W)}const _e=Array.isArray.bind(Array);function Oe(e){return Se(e,K)}ction De(e,t){if(xe(null==e?void 0:e.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach(()}nction Pe(e,t){let n=null;return new z(()}on Ve(e=ie.adUnits){return e.map(().reduce(Fe,[]).filter(().filter(Me)}tion Ke(e,t){if(e)return Object.entries(t).reduce(((e,[t,n])=>e.replace(new RegExp("\\$\\{"+t+"\\}","g"),n||"")),e)}nction Ye(){return!1!==O.getConfig("deviceAccess")}it=onst st=Number.isInteger.bind(Number); mt(e,t=0){let n=r=3735928559^t,i=1103547991^t;for(let t,o=0;o<e.length;o++)t=e.charCodeAt(o),r=n(r^t,2654435761),i=n(i^t,1597334677);return r=n(r^r>>>16,2246822507)^n(i^i>>>13,3266489909),i=n(i^i>>>16,2246822507)^n(r^r>>>13,3266489909),(4294967296*(2097151&i)+(r>>>0)).toString()}nst yt={fetch:window.fetch.bind(window),makeRequest:timeout(e,t){const n=new AbortController;let r=setTimeout((,e);return{signal:n.signal,done}},vt="GET",It="POST",wt="Content-Type";function Ct(e=3e3,{request:t,done:n}={}){let r=(t,n)=>{let r;null==e||null!=(null==n?void 0:n.signal)||O.getConfig("disableAjaxTimeout")||(r=yt.timeout(e,t),n=Object.assign({signal:r.signal},n));let i=yt.fetch(t,n);return null!=(null==r?void 0:r.done)&&(i=i.finally(r.done)),i};return null==t&&null==n||(r=(e=>function(r,i){const o=new URL(null==(null==r?void 0:r.url)?r:r.url,document.location).origin;let s=e(r,i);return t&&t(o),n&&(s=s.finally(()),s})(r)),r}function Tt({status:e,statusText:t="",headers:n,url:r},i){let o=0;function s(e){var t,r;if(0===o)try{o=(new DOMParser).parseFromString(i,null==(r=null==(t=null==n?void 0:n.get(wt))?void 0:t.split(";"))?void 0:r[0])}catch(t){o=null,e&&e(t)}return o}return{readyState:XMLHttpRequest.DONE,status:e,statusText:t,responseText:i,response:i,responseType:"",responseURL:r,get responseXMLgetResponseHeader:e=>(null==n?void 0:n.has(e))?n.get(e):null,toJSON}function Et(e=3e3,{request:t,done:n}={}){const r=Ct(e,{request:t,done:n});return function(e,t,n,i={}){!function(e,t){const{success:n,error:r}="object"==typeof t&&null!=t?t:{success:"function"==typeof t?t:()=>null,error:;e.then(().then((([e,t])=>{const i=Tt(e,t);e.ok||304===e.status?n(t,i):r(e.statusText,i)}),()}(r(function(e,t,n={}){const r=n.method||(t?It:vt);if(r===vt&&t){const r=ut(e,n);Object.assign(r.search,t),e=pt(r)}const i=new Headers(n.customHeaders);i.set(wt,n.contentType||"text/plain");const o={method:r,headers:i};return r!==vt&&t&&(o.body=t),n.withCredentials&&(o.credentials="include"),n.browsingTopics&&isSecureContext&&(o.browsingTopics=!0),yt.makeRequest(e,o)}(e,n,i)),t)}}const St=Et(),xt=(Ct(),15);function At(e,{index:t=yo.index}={}){const n=e.vastXml?e.vastXml:`<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA[${e.vastUrl}]]></VASTAdTagURI>\n        <Impression>${(r=e.vastImpUrl)?`<![CDATA[${r}]]>`:""}</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>`;var r;const i=t.getAuction(e);let o={type:"xml",value:n,ttlseconds:Number(e.ttl)+xt};return O.getConfig("cache.vasttrack")&&(o.bidder=e.bidder,o.bidid=e.requestId,o.aid=e.auctionId),null!=i&&(o.timestamp=i.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(o.key=e.customCacheKey),o}const _t=new WeakMap,Ot=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","aaxBlockmeter","confiant","arcspan","airgrid","clean.io","a1Media","geoedge","mediafilter","qortex","dynamicAdBoost","contxtful"];function kt(e,t,n,r,i){if(!t||!e)return void Ie("cannot load external script without url and moduleCode");if(!a(Ot,t))return void Ie(`${t} not whitelisted for loading external JavaScript`);r||(r=document);const o=c(r,e);if(o)return n&&"function"==typeof n&&(o.loaded?n():o.callbacks.push(n)),o.tag;const s=_t.get(r)||{},d={loaded:!1,tag:null,callbacks:[]};return s[e]=d,_t.set(r,s),n&&"function"==typeof n&&d.callbacks.push(n),ve(`module ${t} is loading external JavaScript`),function(t,n,r,i){r||(r=document);var o=r.createElement("script");o.type="text/javascript",o.async=!0;const s=c(r,e);return s&&(s.tag=o),o.readyState?o.onreadystatechange=o.onload=o.src=t,i&&function(e,t){Object.entries(t).forEach((([t,n])=>e.setAttribute(t,n)))}(o,i),je(o,r),o}(e,(,r,i);const Rt=o(),Bt="outstream";function Dt(e){const{url:t,config:n,id:r,callback:i,loaded:o,adUnitCode:s,renderNow:a}=e;this.url=t,this.config=n,this.handlers={},this.id=r,this.renderNow=a,this.loaded=o,this.cmd=[],this.push=e=>{"function"==typeof e?this.loaded?e.call():this.cmd.push(e):Ie("Commands given to Renderer.push must be wrapped in a function")},this.callback=i||(,this.render=function(){const e=arguments,n=!function(e){const t=d(Rt.adUnits,(t=>t.code===e));if(!t)return!1;const n=h(t,"renderer"),r=!!(n&&n.url&&n.render),i=h(t,"mediaTypes.video.renderer"),o=!!(i&&i.url&&i.render);return!!(r&&!0!==n.backupOnly||o&&!0!==i.backupOnly)}(s)?a?n():(this.cmd.unshift(n),kt(t,Bt,this.callback,this.documentContext)):(ve(`External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ${s}`),n())}.bind(this)}Dt.install=Dt.prototype.getConfig=Dt.prototype.setRender=function(e){this._render=e},Dt.prototype.setEventHandlers=Dt.prototype.handleVideoEvent=function({id:e,eventName:t}){"function"==typeof this.handlers[t]&&this.handlers[t](),he(`Prebid Renderer event for id ${e} type ${t}`)},Dt.prototype.process=var Ut,jt,Pt=(e,t,n)=>(((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot access private method")})(e,t),n);Ut=new WeakSet,jt=const Nt=new class{constructor(e,t){((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,void 0)})(this,Ut),this.getSettings=e,this.defaultScope=t}.k2.zF),$t="prebid",qt="bidder",Mt="userId",Ft="analytics";var Lt=n(4772),Vt=n.n(Lt);let zt=Vt()({ready:Vt().SYNC|Vt().ASYNC|Vt().QUEUE});const Gt=G();zt.ready=(();const Wt=Gt.promise,Ht=zt.get,Kt={};nst Yt="component",Qt=Yt+"Type",Zt=Yt+"Name",en="adapterCode",tn="storageType",nn="syncType";onst on=zt("sync",(e=>e)),[sn,an]=function(e=we("Activity control:")){const t={};nst i={};function o({activity:t,name:n,allow:r,reason:o,component:s}){const a=`${n} ${r?"allowed":"denied"} '${t}' for '${s}'${o?":":""}`,d=i.hasOwnProperty(a);if(d&&clearTimeout(i[a]),i[a]=setTimeout((,1e3),!d){const t=[a];o&&t.push(o),(r?e.logInfo:e.logWarn).apply(e,t)}}return[}(),dn="accessDevice",cn="syncUser",ln="enrichUfpd",un="enrichEids",pn="fetchBids",fn="transmitEids",gn="transmitUfpd",mn="transmitPreciseGeo",bn="transmitTid";unction yn(e,{src:t="client",bidder:n="",bidId:r,transactionId:i,auctionId:o}={}){var s=t,a=e||0;this.bidderCode=n,this.width=0,this.height=0,this.statusMessage=),this.adId=ce(),this.requestId=r,this.transactionId=i,this.auctionId=o,this.mediaType="banner",this.source=s,this.getStatusCode=function(){return a},this.getSize=this.getIdentifiers=onst In="outstream",wn="instream",Cn=zt("sync",(function(e,t,n,r,i){return n&&(i||r!==In)?O.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(Ie('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(r===In&&!i&&!(e.renderer||t&&t.renderer||n.renderer))}),"checkVideoBidSetup");function Tn({startTime:e=Xe,ttl:t=(()=>null),monotonic:n=!1,slack:r=5e3}={}){const i=new Map,o=[],s=n?e=>o.push(e):e=>o.splice(function(e,t,n=(e=>e)){let r=0,i=e.length&&e.length-1;const o=n(t);for(;i-r>1;){const t=r+Math.round((i-r)/2);o>n(e[t])?r=t:i=t}for(;e.length>r&&o>n(e[r]);)r++;return r}(o,e,(e=>e.expiry)),0,e);let a,d;function c(){if(d&&clearTimeout(d),o.length>0){const e=Xe();a=Math.max(e,o[0].expiry+r),d=setTimeout((()=>{const e=Xe();let t=0;for(const n of o){if(n.expiry>e)break;i.delete(n.item),t++}o.splice(0,t),d=null,c()}),a-e)}else d=null}let l={};return{[Symbol.iterator]:()=>i.keys(),add(n){!i.has(n)&&i.set(n,function(n){const i={},o=l;let u;const[p,f]=Object.entries({start:e,delta:t}).map((([e,t])=>{let p;return function(){const f=p={};z.resolve(t(n)).then((t=>{f===p&&(i[e]=t,o===l&&null!=i.start&&null!=i.delta&&(u=i.start+i.delta,s(g),(null==d||a>u+r)&&c()))}))}})),g={item:n,refresh:f,get expiry(){return u}};return p(),f(),g}(n))},cleartoArray:refresh}const En="eventHistoryTTL";let Sn=null;const xn=Tn({monotonic:!0,ttl:()=>Sn});O.getConfig(En,(e=>{const t=Sn;e=null==e?void 0:e[En],Sn="number"==typeof e?1e3*e:null,t!==Sn&&xn.refresh()}));let An=Array.prototype.slice,_n=Array.prototype.push,On=Object.values(y.EVENTS);const kn=y.aI,Rn=function(){let e={},t={};eturn t.has=n,t.on=t.emit=function(t){!function(t,n){he("Emitting event for: "+t);let r=n[0]||{},i=r[kn[t]],o=e[t]||{que:[]};var s=Object.keys(o);let a=[];xn.add({eventType:t,args:r,id:i,elapsedTime:window.performance&&window.performance.now&&window.performance.now()||0}),i&&s.includes(i)&&_n.apply(a,o[i].que),_n.apply(a,o.que),(a||[]).forEach((function(e){if(e)try{e.apply(null,n)}catch(e){Ie("Error executing handler:","events.js",e,t)}}))}(t,An.call(arguments,1))},t.off=t.get=t.addEvents=function(e){On=On.concat(e)},t.getEvents=t}();var Bn;Bn=Rn.emit.bind(Rn),Q=Bn;const{on:Dn,off:Un,get:jn,getEvents:Pn,emit:Nn,addEvents:$n,has:qn}=Rn,Mn="performanceMetrics",Fn=window.performance&&window.performance.now?()=>Date.now(),Ln=new WeakMap;function Vn({now:e=Fn,mkNode:t=Wn,mkTimer:n=Gn,mkRenamer:r=(e=>e),nodes:i=Ln}={}){return function(){return function o(s,a=(){a=r(a);const d=("timestamps",;st p={startTiming:l,measureTime:measureHookTime:checkpoint:timeSince:timeBetween:setMetric:c,getMetrics:u,fork:function({propagate:e=!0,stopPropagation:n=!1,includeGroups:r=!1}={}){return o(t([[s,{propagate:e,stopPropagation:n,includeGroups:r}]]),a)},join:function(e,{propagate:t=!0,stopPropagation:n=!1,includeGroups:r=!1}={}){const o=i.get(e);null!=o&&o.addParent(s,{propagate:t,stopPropagation:n,includeGroups:r})},newMetrics:renameWith:function(e){return o(s,e)},toJSON:()=>u()};return i.set(p,s),p}(t([]))}}nction Wn(e){return{metrics:{},timestamps:{},groups:{},addParentnewSibling:dfWalk({visit:t,follow:n=(,visited:r=new Set,inEdge:i}={}){let o;if(!r.has(this)){if(r.add(this),o=t(i,this),null!=o)return o;for(const[s,a]of e)if(n(i,a)&&(o=s.dfWalk({visit:t,follow:n,visited:r,inEdge:a}),null!=o))return o}}}}const Hn=(();let Kn=!0;.getConfig(Mn,();const Xn=(();onst Qn=Yn("requestBids.",(e=>e.metrics)),Zn=Yn("addBidResponse.",(),er=rn((e=>Si.resolveAlias(e))),tr=["cpm","ttl","creativeId","netRevenue","currency"],nr=["auctionId","transactionId"];function rr(e){const t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;(e),Array.isArray(e.aliases)&&e.aliases.forEach((t=>{let r,i,o=t;ke(t)&&(o=t.code,r=t.gvlid,i=t.skipPbsAliasing),Si.aliasRegistry[o]=e.code,n(Object.assign({},e,{code:o,gvlid:r,skipPbsAliasing:i}))}))}function ir(e){return Object.assign(new hn(e.code),{getSpec:registerSyncs:t,callBids:function(n,r,i,o,s,d){if(!Array.isArray(n.bids))return;const c=function(e){if(an(bn,er(qt,e)))return{bidRequest:e=>e,bidderRequest:e=>e};unction n(e,t){const n=new Proxy(e,t);return Object.entries(e).filter((([e,t])=>"function"==typeof t)).forEach((),n}const r=bt((,(e=>e.bidId));return{bidRequest:r,bidderRequest:}(n.bidderCode),l={};const u=[];onst f=dr(n).measureTime("validate",(()=>n.bids.filter((t=>{return n=c.bidRequest(t),!!e.isBidRequestValid(n)||(ve(`Invalid bid sent to bidder ${e.code}: ${JSON.stringify(n)}`),!1);var n}))));if(0===f.length)return void p();const g={};f.forEach((),or(e,f.map(c.bidRequest),c.bidderRequest(n),o,d,{onRequest:onResponse:onFledgeAuctionConfigs:e=>{e.forEach((e=>{const t=g[e.bidId];t?ar(t,e.config):ve("Received fledge auction configuration for an unknown bidId",e)}))},onError:onBid:t=>{const n=g[t.requestId];if(n){if(t.adapterCode=n.bidder,function(e,t){let n=Nt.get(t,"allowAlternateBidderCodes")||!1,r=Nt.get(t,"allowedAlternateBidderCodes");return!!(e&&t&&t!==e&&(r=_e(r)?r.map(().filter(().filter(Me):r,!n||_e(r)&&"*"!==r[0]&&!r.includes(e)))}(t.bidderCode,n.bidder))return ve(`${t.bidderCode} is not a registered partner or known bidder of ${n.bidder}, hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.`),void r.reject(n.adUnitCode,t,y.Gw.Dg);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[n.bidder]);const e=Object.assign(vn(y.Q_.Q,n),t,at(n,nr));!function(e,t){const n=Jn(t.metrics);n.checkpoint("addBidResponse"),l[e]=!0,n.measureTime("addBidResponse.validate",(()=>function(e,t,{index:n=yo.index}={}){eturn e?t?function(){let e=Object.keys(t);return tr.every(()}()?"video"!==t.mediaType||function(e,{index:t=yo.index}={}){const n=h(t.getMediaTypes(e),"video"),r=n&&h(n,"context"),i=n&&h(n,"useCacheKey"),o=t.getAdUnit(e);return Cn(e,o,n,r,i)}(t,{index:n})?!("banner"===t.mediaType&&!function(e,t,{index:n=yo.index}={}){if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;const r=n.getBidRequest(t),i=n.getMediaTypes(t),o=pe(r&&r.sizes||i&&i.banner&&i.banner.sizes);if(1===o.length){const[e,n]=o[0].split("x");return t.width=parseInt(e,10),t.height=parseInt(n,10),!0}return!1}(0,t,{index:n})&&(Ie(r("Banner bids require a width and height")),1)):(Ie(r("Video bid does not have required vastUrl or renderer property")),!1):(Ie(r(`Bidder ${t.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`)),!1):(ve(`Some adapter tried to add an undefined bid for ${e}.`),!1):(ve("No adUnitCode was supplied to addBidResponse."),!1)}(e,t)))?r(e,t):r.reject(e,t,y.Gw.UI)}(n.adUnitCode,e)}else ve(`Bidder ${e.code} made bid for unknown request ID: ${t.requestId}. Ignoring.`),r.reject(null,t,y.Gw.Gp)},onCompletion:p})}});const or=zt("sync",(function(e,t,n,r,i,{onRequest:o,onResponse:s,onFledgeAuctionConfigs:a,onError:d,onBid:c,onCompletion:l}){const u=dr(n);l=u.startTiming("total").stopBefore(l);let p=u.measureTime("buildRequests",(()=>e.buildRequests(t,n)));if(!p||0===p.length)return void l();Array.isArray(p)||(p=[p]);const f=Ze(l,p.length);p.forEach((t=>{const n=u.fork();onst p=i((function(r,i){m();try{r=JSON.parse(r)}catch(e){}r={body:r,headers:{get:i.getResponseHeader.bind(i)}},s(r);try{r=n.measureTime("interpretResponse",()}catch(t){return Ie(`Bidder ${e.code} failed to interpret the server's response. Continuing without bids`,null,t),void f()}let o;r&&_e(r.fledgeAuctionConfigs)?(a(r.fledgeAuctionConfigs),o=r.bids):o=r,o&&(_e(o)?o.forEach(l):l(o)),f()})),g=i(();o(t);const m=n.startTiming("net");function b(n){var r;const i=t.options;return Object.assign(n,i,{browsingTopics:!((null==i?void 0:i.hasOwnProperty("browsingTopics"))&&!i.browsingTopics)&&(null==(r=Nt.get(e.code,"topicsHeader"))||r)&&an(gn,er(qt,e.code))})}switch(t.method){case"GET":r(`${t.url}${h=t.data,h?`?${"object"==typeof h?function(e){let t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t=t.replace(/&$/,""),t}(h):h}`:""}`,{success:p,error:g},void 0,b({method:"GET",withCredentials:!0}));break;case"POST":r(t.url,{success:p,error:g},"string"==typeof t.data?t.data:JSON.stringify(t.data),b({method:"POST",contentType:"text/plain",withCredentials:!0}));break;default:ve(`Skipping invalid request from ${e.code}. Request type ${t.type} must be GET or POST`),f()}var h}))}),"processBidderRequests"),sr=zt("async",(function(e,t,n,r,i){const o=O.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!Si.aliasRegistry[e.code])){let o=O.getConfig("userSync.filterSettings"),s=e.getUserSyncs({iframeEnabled:!(!o||!o.iframe&&!o.all),pixelEnabled:!(!o||!o.image&&!o.all)},t,n,r,i);s&&(Array.isArray(s)||(s=[s]),s.forEach((),Di.bidderDone(e.code))}}),"registerSyncs"),ar=zt("sync",(,"addComponentAuction");et cr={};et ur=pr=function(e,t){return lr(e,"requestsCounter",t)},fr=gr=function(e){return h(cr,`${e}.requestsCounter`)||0},mr=function(e,t){return h(cr,`${e}.bidders.${t}.requestsCounter`)||0},br=function(e,t){return h(cr,`${e}.bidders.${t}.winsCounter`)||0};function hr(e,t=window){if(!e)return e;if(/\w+:\/\//.exec(e))return e;let n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:`${n}//${e}`}nst Ir=function(e,t=window){if(t.top!==t)return e;let n,r,i;return ((wr=window,function(){const e=[],t=wr),n=O.getConfig("maxNestedIframes");let r,i,o,s,a=!1,d=0,c=!1,l=!1,u=!1;do{const n=r,s=l;let p,f=!1,g=null;l=!1,r=r?r.parent:wr;try{p=r.location.href||null}catch(e){f=!0}if(f)if(s){const e=n.context;try{g=e.sourceUrl,i=g,u=!0,c=!0,r===wr.top&&(a=!0),e.canonicalUrl&&(o=e.canonicalUrl)}catch(e){}}else{ve("Trying to access cross domain iframe. Continuing without referrer and location");try{const e=n.document.referrer;e&&(g=e,r===wr.top&&(a=!0))}catch(e){}!g&&t&&t[d-1]&&(g=t[d-1],r===wr.top&&(u=!0)),g&&!c&&(i=g)}else{if(p&&(g=p,i=g,c=!1,r===wr.top)){a=!0;const e=vr(r.document);e&&(o=e)}r.context&&r.context.sourceUrl&&(l=!0)}e.push(g),d++}while(r!==wr.top&&d<n);e.reverse();try{s=wr.top.document.referrer}catch(e){}const p=a||u?i:null,f=O.getConfig("pageUrl")||o||null;let g=O.getConfig("pageUrl")||p||hr(f,wr);return p&&p.indexOf("?")>-1&&-1===g.indexOf("?")&&(g=`${g}${p.substring(p.indexOf("?"))}`),{reachedTop:a,isAmp:c,numIframes:d-1,stack:e,topmostLocation:i||null,location:p,canonicalUrl:f,page:g,domain:yr(g)||null,ref:s||null,legacy:{reachedTop:a,isAmp:c,numIframes:d-1,stack:e,referer:i||null,canonicalUrl:f}}}));var wr,Cr,Tr,Er,Sr,xr,Ar,_r,Or,kr=Object.defineProperty,Rr=(e,t,n)=>(((e,t,n)=>{t in e?kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Br=Dr=Ur=jr=Pr=Object.freeze({}),Object.freeze({});class Nr{constructor(){Ur(this,_r),Ur(this,Cr,void 0),Ur(this,Tr,void 0),Ur(this,Er,void 0),Ur(this,Sr,void 0),Ur(this,xr,!0),Ur(this,Ar,void 0),Rr(this,"generatedTime"),Rr(this,"hashFields"),this.reset()}t enabled(){return Dr(this,Cr)}get ready(){return Dr(this,Sr)}new WeakMap,Tr=new WeakMap,Er=new WeakMap,Sr=new WeakMap,xr=new WeakMap,Ar=new WeakMap,_r=new WeakSet,Or=const $r=new class extends Nr{constructor(){super(...arguments),Rr(this,"hashFields",["gdprApplies","consentString"])},qr=new Mr=new class extends Nr{constructor(){super(...arguments),Rr(this,"hashFields",["applicableSections","gppString"])},Fr=((),Lr=),Vr={gdpr:$r,usp:qr,gpp:Mr,coppa:Fr},zr=function(e=Vr){return e=Object.entries(e),Object.assign({get promiseget hash,Object.fromEntries(["getConsentData","getConsentMeta","reset"].map((t=>{return[t,(n=t,];var n}))))}(),Gr=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map(().concat("device.ext.cdep"),Wr=["user.eids","user.ext.eids"],Hr=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"];unction Jr(e){return e.forEach((),function(t,n,...r){const i=[],o=Xr(t,...r);return e.forEach((e=>{if(!1!==t[e.name])for(const[r,s]of e.paths){const a=null==r?n:h(n,r);if(i.push(e.run(n,r,a,s,o.bind(null,e))),!1===t[e.name])return}})),i.filter((e=>null!=e))}}unction Yr(e){return null!=e&&("object"!=typeof e||Object.keys(e).length>0)}unction Zr(e=an){return[{name:gn,paths:Gr,applies:Qr(gn,e)},{name:fn,paths:Wr,applies:Qr(fn,e)},{name:mn,paths:Hr,applies:Qr(mn,e),get:,{name:bn,paths:["source.tid"],applies:Qr(bn,e)}].map(Kr)}const ei=function(e=an){const t=Jr(Zr(e)),n=Jr(function(e=an){return[{name:fn,paths:["userId","userIdAsEids"],applies:Qr(fn,e)},{name:bn,paths:["ortb2Imp.ext.tid"],applies:Qr(bn,e)}].map(Kr)}(e));return ();sn(bn,"enableTIDs config",();var ti=Object.defineProperty,ni=Object.defineProperties,ri=Object.getOwnPropertyDescriptors,ii=Object.getOwnPropertySymbols,oi=Object.prototype.hasOwnProperty,si=Object.prototype.propertyIsEnumerable,ai=(e,t,n)=>t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const di="pbsBidAdapter",ci={CLIENT:"client",SERVER:"server"},li={isAllowed:an,redact:ei};let ui={},pi=ui.bidderRegistry={},fi=ui.aliasRegistry={},gi=[];O.getConfig("s2sConfig",();var mi={};const bi=rn((e=>ui.resolveAlias(e))),hi=zt("sync",(function({bidderCode:e,auctionId:t,bidderRequestId:n,adUnits:r,src:i,metrics:o}){return r.reduce(((r,s)=>{const d=s.bids.filter((t=>t.bidder===e));return null==e&&0===d.length&&null!=s.s2sBid&&d.push({bidder:null}),r.push(d.reduce(((e,r)=>{const d=null==(r=Object.assign({},r,{ortb2Imp:gt({},s.ortb2Imp,r.ortb2Imp)},tt(s,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?s.mediaTypes:r.mediaTypes;return function(e){const t=["banner","native","video"];return!!Object.keys(e).every(()&&(!e.video||!e.video.context||a(["instream","outstream","adpod"],e.video.context))}(d)?r=Object.assign({},r,{mediaTypes:d}):Ie(`mediaTypes is not correctly configured for adunit ${s.code}`),e.push(Object.assign({},r,{adUnitCode:s.code,transactionId:s.transactionId,sizes:h(d,"banner.sizes")||h(d,"video.playerSize")||[],bidId:r.bid_id||ce(),bidderRequestId:n,auctionId:t,src:i,metrics:o,bidRequestsCount:gr(s.code),bidderRequestsCount:mr(s.code,r.bidder),bidderWinsCount:br(s.code,r.bidder)})),e}),[])),r}),[]).reduce(Fe,[]).filter((e=>""!==e))}),"getBids"),yi=zt("sync",(function(e,t,{getS2SBidders:n=Ii}={}){if(null==t)return e;{const r=n(t);return e.filter((e=>r.has(e.bidder)))}}),"filterBidsForAdUnit"),vi=zt("sync",(,"setupAdUnitMediaTypes");onst wi=zt("sync",(function(e,t,{getS2SBidders:n=Ii}={}){const r=n(t);return Ve(e).reduce((,{[ci.CLIENT]:[],[ci.SERVER]:[]})}),"partitionBidders");makeBidRequests=zt("sync",(function(e,t,n,r,i,o={},s){s=Jn(s),Nn(y.EVENTS.BEFORE_REQUEST_BIDS,e),e.forEach((),e=vi(e,i);let{[ci.CLIENT]:a,[ci.SERVER]:c}=wi(e,gi);O.getConfig("bidderSequence")===S&&(a=Ge(a));const l=Ir();let u=[];const p=o.global||{},f=o.bidder||{};function g(e,t){const r=li.redact(null!=t?t:bi(qt,e.bidderCode)),i=Object.freeze(r.ortb2(gt({source:{tid:n}},p,f[e.bidderCode])));return e.ortb2=i,e.bids=e.bids.map((),e}gi.forEach((r=>{const i=r);if(r&&r.enabled&&li.isAllowed(pn,i)){let{adUnits:o,hasModuleBids:a}=function(e,t){let n=We(e),r=!1;return n.forEach((e=>{const n=e.bids.filter((e=>{var n;return e.module===di&&(null==(n=e.params)?void 0:n.configName)===t.configName}));1===n.length?(e.s2sBid=n[0],r=!0,e.ortb2Imp=gt({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&ve('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=yi(e.bids,t).map(()})),n=n.filter((),{adUnits:n,hasModuleBids:r}}(e,r),p=le();(0===c.length&&a?[null]:c).forEach((e=>{const a=ce(),d=s.fork(),c=g({bidderCode:e,auctionId:n,bidderRequestId:a,uniquePbsTid:p,bids:hi({bidderCode:e,auctionId:n,bidderRequestId:a,adUnits:We(o),src:y.os.YZ,metrics:d}),auctionStart:t,timeout:r.timeout,src:y.os.YZ,refererInfo:l,metrics:d},i);0!==c.bids.length&&u.push(c)})),o.forEach((),u.forEach(()}}));let m=function(e){let t=We(e);return t.forEach((),t=t.filter((),t}(e);return a.forEach((e=>{const o=ce(),a=s.fork(),d=g({bidderCode:e,auctionId:n,bidderRequestId:o,bids:hi({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:We(m),labels:i,src:"client",metrics:a}),auctionStart:t,timeout:r,refererInfo:l,metrics:a}),c=pi[e];c||Ie(`Trying to make a request for bidder that does not exist: ${e}`),c&&d.bids&&0!==d.bids.length&&u.push(d)})),u.forEach((),u}),"makeBidRequests"),ui.callBids=(e,t,n,r,i,o,s,a={})=>{if(!t.length)return void ve("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");let[d,c]=t.reduce((,[[],[]]);var l=[];c.forEach(();let u=0;gi.forEach((e=>{if(e&&l[u]&&Ii(e).has(l[u].bidderCode)){const t=Et(o,i?{request:i.request.bind(null,"s2s"),done:i.done}:void 0);let d=e.bidders;const p=pi[e.adapter];let f=l[u].uniquePbsTid,g=l[u].adUnitsS2SCopy,m=c.filter((e=>e.uniquePbsTid===f));if(p){let i={ad_units:g,s2sConfig:e,ortb2Fragments:a};if(i.ad_units.length){let e=m.map(();const o=Ve(i.ad_units).filter((e=>d.includes(e)));he(`CALLING S2S HEADER BIDDERS ==== ${o.length>0?o.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only'}`),m.forEach((e=>{var t,n;Nn(y.EVENTS.BID_REQUESTED,(t=((e,t)=>{for(var n in t||(t={}))oi.call(t,n)&&ai(e,n,t[n]);if(ii)for(var n of ii(t))si.call(t,n)&&ai(e,n,t[n]);return e})({},e),n={tid:e.auctionId},ni(t,ri(n))))})),p.callBids(i,c,n,(,t)}}else Ie("missing "+e.adapter);u++}})),d.forEach((e=>{e.start=Xe();const t=pi[e.bidderCode];O.runWithBidder(e.bidderCode,();let a=Et(o,i?{request:i.request.bind(null,e.bidderCode),done:i.done}:void 0);const d=r.bind(e);try{O.runWithBidder(e.bidderCode,t.callBids.bind(t,e,n,d,a,(,O.callbackWithBidder(e.bidderCode)))}catch(t){Ie(`${e.bidderCode} Bid Adapter emitted an uncaught error when parsing their bidRequest`,{e:t,bidRequest:e}),d()}}))},ui.videoAdapters=[],ui.registerBidAdapter=function(e,t,{supportedMediaTypes:n=[]}={}){var r;e&&t?"function"==typeof e.callBids?(pi[t]=e,Lr.register(qt,t,null==(r=e.getSpec)?void 0:r.call(e).gvlid),a(n,"video")&&ui.videoAdapters.push(t)):Ie("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):Ie("bidAdapter or bidderCode not specified")},ui.aliasBidAdapter=function(e,t,n){if(void 0===pi[t]){let r=pi[e];if(void 0===r){const n=[];gi.forEach((),n.forEach(()}else try{let i,o=function(e){let t=[];return a(ui.videoAdapters,e)&&t.push("video"),t}(e);if(r.constructor.prototype!=Object.prototype)i=new r.constructor,i.setBidderCode(t);else{let o=r.getSpec(),s=n&&n.gvlid;null!=o.gvlid&&null==s&&ve(`Alias '${t}' will NOT re-use the GVL ID of the original adapter ('${o.code}', gvlid: ${o.gvlid}). Functionality that requires TCF consent may not work as expected.`);let a=n&&n.skipPbsAliasing;i=ir(Object.assign({},o,{code:t,gvlid:s,skipPbsAliasing:a})),fi[t]=e}ui.registerBidAdapter(i,t,{supportedMediaTypes:o})}catch(t){Ie(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else he('alias name "'+t+'" has been already specified.')},ui.resolveAlias=ui.registerAnalyticsAdapter=function({adapter:e,code:t,gvlid:n}){e&&t?"function"==typeof e.enableAnalytics?(e.code=t,mi[t]={adapter:e,gvlid:n},Lr.register(Ft,t,n)):Ie(`Prebid Error: Analytics adaptor error for analytics "${t}"\n        analytics adapter must implement an enableAnalytics() function`):Ie("Prebid Error: analyticsAdapter or analyticsCode not specified")},ui.enableAnalytics=function(e){_e(e)||(e=[e]),e.forEach((e=>{const t=mi[e.provider];t&&t.adapter?li.isAllowed("reportAnalytics",bi(Ft,e.provider,{_config:e}))&&t.adapter.enableAnalytics(e):Ie(`Prebid Error: no analytics adapter found in registry for '${e.provider}'.`)}))},ui.getBidAdapter=function(e){return pi[e]},ui.getAnalyticsAdapter=ui.callTimedOutBidders=function(e,t,n){t=et(t=t.map((),"bidder"),Object.keys(t).forEach(()},ui.callBidWonBidder=function(e,t,n){t.params=nt(n,t.adUnitCode,t.bidder),fr(t.adUnitCode,t.bidder),Ei(e,"onBidWon",t)},ui.callBidBillableBidder=ui.callSetTargetingBidder=function(e,t){Ei(e,"onSetTargeting",t)},ui.callBidViewableBidder=ui.callBidderError=ui.callDataDeletionRequest=zt("sync",(function(...e){const t="onDataDeletionRequest";Object.keys(pi).filter((e=>!fi.hasOwnProperty(e))).forEach((n=>{const r=Ci(n,t);if(null!=r){const i=yo.getBidsRequested().filter(();Ti(n,t,...r,i,...e)}})),Object.entries(mi).forEach((([n,r])=>{var i;const o=null==(i=null==r?void 0:r.adapter)?void 0:i[t];if("function"==typeof o)try{o.apply(r.adapter,e)}catch(e){Ie(`error calling ${t} of ${n}`,e)}}))}));const Si=ui,xi="html5",Ai="cookie";let _i=[];function Oi({moduleName:e,moduleType:t}={},{isAllowed:n=an}={}){function r(r,i){let o=e;const s=O.getCurrentBidder();return s&&t===qt&&Si.aliasRegistry[s]===e&&(o=s),r({valid:n(dn,er(t,o,{[tn]:i}))})}onst o=return{setCookie:function(e,t,n,r,o,s){return i((function(i){if(i&&i.valid){const i=o&&""!==o?` ;domain=${encodeURIComponent(o)}`:"",s=n&&""!==n?` ;expires=${n}`:"",a=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie=`${e}=${encodeURIComponent(t)}${s}; path=/${i}${r?`; SameSite=${r}`:""}${a}`}}),Ai,s)},getCookie:localStorageIsEnabled:cookiesAreEnabled:function(e){return i((function(e){return!(!e||!e.valid)&&Qe()}),Ai,e)},setDataInLocalStorage:getDataFromLocalStorage:removeDataFromLocalStorage:hasLocalStorage:o,findSimilarCookies:function(e,t){return i((function(t){if(t&&t.valid){const t=[];if(Ye()){const n=document.cookie.split(";");for(;n.length;){const r=n.pop();let i=r.indexOf("=");i=i<0?r.length:i,decodeURIComponent(r.slice(0,i).replace(/^\s+/,"")).indexOf(e)>=0&&t.push(decodeURIComponent(r.slice(i+1)))}}return t}}),Ai,t)}}}function ki({moduleType:e,moduleName:t,bidderCode:n}={}){eturn n?((e&&e!==qt||t)&&r(),e=qt,t=n):t&&e||r(),Oi({moduleType:e,moduleName:t})}n(dn,"deviceAccess config",(function(){if(!Ye())return{allow:!1}})),sn(dn,"bidderSettings.*.storageAllowed",(function(e,t=Nt){if(e[Qt]!==qt)return;let n=t.get(e[en],"storageAllowed");if(n&&!0!==n){const t=e[tn];n=Array.isArray(n)?n.some(():n===t}else n=!!n;return n?void 0:{allow:n}})),O.setDefaults({userSync:We({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});const Bi=Ri("usersync"),Di=function(e){let t={},n={image:[],iframe:[]},r=new Set,i={},o={image:!0,iframe:!1},s=e.config;function d(){if(s.syncEnabled&&e.browserSupportsCookies){try{o.iframe&&c(n.iframe,(e=>{let[t,r]=e;var i,o;he(`Invoking iframe user sync for bidder: ${t}`),$e(r),o=t,(i=n).image=i.image.filter(()})),o.image&&c(n.image,()}catch(e){return Ie("Error firing user syncs",e)}n={image:[],iframe:[]}}}eturn O.getConfig("userSync",(e=>{if(e.userSync){let t=e.userSync.filterSettings;ke(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}s=Object.assign(s,e.userSync)})),e.regRule(cn,"userSync config",(),t.registerSync=(t,o,a)=>r.has(o)?he(`already fired syncs for "${o}", ignoring registerSync call`):s.syncEnabled&&_e(n[t])?o?0!==s.syncsPerBidder&&Number(i[o])>=s.syncsPerBidder?ve(`Number of user syncs exceeded for "${o}"`):void(e.isAllowed(cn,er(qt,o,{[nn]:t,syncUrl:a}))&&(n[t].push([o,a]),i=i,o))):ve("Bidder is required for registering sync"):ve(`User sync type "${t}" not supported`),t.bidderDone=r.add.bind(r),t.syncUsers=t.triggerUserSyncs=t.canBidderRegisterSync=(e,t)=>!s.filterSettings||!function(e,t){let n=s.filterSettings;if(function(e,t){if(e.all&&e[t])return ve(`Detected presence of the "filterSettings.all" and "filterSettings.${t}" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.`),!1;let n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;let i=n.filter,o=n.bidders;return i&&"include"!==i&&"exclude"!==i?(ve(`UserSync "filterSettings.${r}.filter" setting '${i}' is not a valid option; use either 'include' or 'exclude'.`),!1):!!("*"===o||Array.isArray(o)&&o.length>0&&o.every(())||(ve(`Detected an invalid setup in userSync "filterSettings.${r}.bidders"; use either '*' (to represent all bidders) or an array of bidders.`),!1)}(n,e)){o[e]=!0;let r=n.all?n.all:n[e],i="*"===r.bidders?[t]:r.bidders;return{include:exclude:[r.filter||"include"](i,t)}return!o[e]}(e,t),t}(Object.defineProperties({config:O.getConfig("userSync"),isAllowed:an,regRule:sn},{browserSupportsCookies:{get:function(){return!/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&Bi.cookiesAreEnabled()}}})),Ui="native",ji="video",Pi="banner",Ni="adpod";function $i(e,t,n,{index:r=yo.index,bs:i=Nt}={}){n=n||r.getBidRequest(t);const o=null==t?void 0:t.adapterCode,s=(null==t?void 0:t.bidderCode)||(null==n?void 0:n.bidder),a=i.get(null==t?void 0:t.adapterCode,"adjustAlternateBids"),d=i.getOwn(s,"bidCpmAdjustment")||i.get(a?o:s,"bidCpmAdjustment");if(d&&"function"==typeof d)try{return d(e,Object.assign({},t),n)}catch(e){Ie("Error during bid adjustment",e)}return e}const{syncUsers:qi}=Di,Mi="completed";Dn(y.EVENTS.BID_ADJUSTMENT,(function(e){!function(e){let t=$i(e.cpm,e);t>=0&&(e.cpm=t)}(e)}));const Fi={},Li={},Vi=[],zi=o();function Gi({adUnits:e,adUnitCodes:t,callback:n,cbTimeout:r,labels:i,auctionId:o,ortb2Fragments:s,metrics:d}){d=Jn(d);const c=e,b=i,v=t,I=o||le(),w=r,C=new Set,T=G();let E,S,x,A,_=[],k=n,R=[],B=[],D=[],U=[],j=[];unction N(t){if(t?Nn(y.EVENTS.AUCTION_TIMEOUT,P()):clearTimeout(x),void 0===S){let n=[];t&&(he(`Auction ${I} timedOut`),n=R.filter(().flatMap((e=>e.bids)),n.length&&Nn(y.EVENTS.BID_TIMEOUT,n)),A=Mi,S=Date.now(),d.checkpoint("auctionEnd"),d.timeBetween("requestBids","auctionEnd","requestBids.total"),d.timeBetween("callBids","auctionEnd","requestBids.callBids"),T.resolve(),Nn(y.EVENTS.AUCTION_END,P()),Ji(c,(function(){try{if(null!=k){const e=B.filter(().reduce(po,{});k.apply(zi,[e,t,I]),k=null}}catch(e){Ie("Error executing bidsBackHandler",null,e)}finally{n.length&&Si.callTimedOutBidders(e,n,w);let t=O.getConfig("userSync")||{};t.enableOverride||qi(t.syncDelay)}}))}}nction M(e){e.forEach(();let t={},n={bidRequests:e,run:()=>{x=setTimeout((,w),A="inProgress",Nn(y.EVENTS.AUCTION_INIT,P());let n=function(e,t,{index:n=yo.index}={}){let r=0,i=!1,o=new Set,s={};unction c(e,t,n){return s[t.requestId]=!0,function(e,t,{index:n=yo.index}={}){const r=n.getBidderRequest(e),i=n.getAdUnit(e),o=r&&r.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||Xe(),requestTimestamp:e.requestTimestamp||o,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==i?void 0:i.ttlBuffer)&&(e.ttlBuffer=i.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),r++,n(d)}function b(e,n){c(e,n,(e=>{let r=function(e,{index:t=yo.index}={}){var n;Nn(y.EVENTS.BID_ADJUSTMENT,e);const r=(null==(n=t.getBidRequest(e))?void 0:n.renderer)||t.getAdUnit(e).renderer,i=e.mediaType,o=t.getMediaTypes(e),s=o&&o[i];var a=s&&s.renderer,d=null;a&&a.url&&a.render&&(!0!==a.backupOnly||!e.renderer)?d=a:r&&r.url&&r.render&&(!0!==r.backupOnly||!e.renderer)&&(d=r),d&&(e.renderer=Dt.install({url:d.url,config:d.options}),e.renderer.setRender(d.render));const c=no(e.mediaType,o,O.getConfig("mediaTypePriceGranularity")),b=function(e,t,n=1){let r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":m(e,l,n),med:""===r?"":m(e,u,n),high:""===r?"":m(e,p,n),auto:""===r?"":m(e,g,n),dense:""===r?"":m(e,f,n),custom:""===r?"":m(e,t,n)}}(e.cpm,"object"==typeof c?c:O.getConfig("customPriceBucket"),O.getConfig("currency.granularityMultiplier"));return e.pbLg=b.low,e.pbMg=b.med,e.pbHg=b.high,e.pbAg=b.auto,e.pbDg=b.dense,e.pbCg=b.custom,e}(n);Nn(y.EVENTS.BID_ACCEPTED,r),r.mediaType===ji?function(e,t,n,{index:r=yo.index}={}){let i=!0;const o=h(r.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),s=o&&h(o,"context"),a=o&&h(o,"useCacheKey");O.getConfig("cache.url")&&(a||s!==In)&&(!t.videoCacheKey||O.getConfig("cache.ignoreBidderCacheKey")?(i=!1,to(e,t,n,o)):t.vastUrl||(Ie("videoCacheKey specified but not required vastUrl for video bid"),i=!1)),i&&(Xi(e,t),n())}(t,r,e):(Xi(t,r),e())}))}unction I(){let n=t.getBidRequests();const d=O.getConfig("auctionOptions");if(o.add(this),d&&!Re(d)){const e=d.secondaryBidders;e&&!n.every((t=>a(e,t.bidderCode)))&&(n=n.filter(())}i=n.every((e=>o.has(e))),this.bids.forEach((),i&&0===r&&e()}return{addBidResponse:),adapterDone:}($,this);Si.callBids(c,e,n.addBidResponse,n.adapterDone,{requestdone,w,q,s)}};function r(e){let t=!0,n=O.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((),t&&e.run(),t}(n)||(ve("queueing auction due to limited endpoint capacity"),Vi.push(n))}return Dn(y.EVENTS.SEAT_NON_BID,(),{addBidReceived:function(e){B=B.concat(e)},addBidRejected:function(e){_=_.concat(e)},addNoBid:callBids:function(){A="started",E=Date.now();let e=d.measureTime("requestBids.makeRequests",();ye(`Bids Requested for Auction with id: ${I}`,e),d.checkpoint("callBids"),e.length<1?(ve("No valid bid requests returned for auction"),$()):Ki.call({dispatch:M,context:this},e)},addWinningBid:function(t){const n=e.find((e=>e.transactionId===t.transactionId));U=U.concat(t),function({source:e,burl:t}){e===y.os.YZ&&t&&se.triggerPixel(t)}(t),Si.callBidWonBidder(t.adapterCode||t.bidder,t,e),n&&!n.deferBilling&&Si.callBidBillableBidder(t)},setBidTargeting:function(e){Si.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:()=>U,getAuctionStart:()=>E,getAuctionEnd:()=>S,getTimeout:()=>w,getAuctionId:()=>I,getAuctionStatus:()=>A,getAdUnits:()=>c,getAdUnitCodes:()=>v,getBidRequests:()=>R,getBidsReceived:()=>B,getNoBids:()=>D,getNonBids:()=>j,getFPD:()=>s,getMetrics:end:T.promise}}const Wi=zt("sync",(,"addBidResponse"),Hi=zt("sync",(e=>e),"responsesReady"),Ki=zt("sync",(,"addBidderRequests"),Ji=zt("async",(,"bidsBackCallback");function Xi(e,t){!function(e){let t;const n=!0===Nt.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(n||e.dealId)&&(t=function(e,t,{index:n=yo.index}={}){if(!t)return{};const r=n.getBidRequest(t);var i={};return uo(i,lo(t.mediaType,e),t,r),e&&Nt.getOwn(e,y.k2.xn)&&(uo(i,Nt.ownSettingsFor(e),t,r),t.sendStandardTargeting=Nt.get(e,"sendStandardTargeting")),i}(e.bidderCode,e)),e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)}(t),Jn(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),Nn(y.EVENTS.BID_RESPONSE,t)}const Yi=e=>{!function(e,t,n=Et){const r={puts:e.map(At)};n(O.getConfig("cache.timeout"))(O.getConfig("cache.url"),function(e){return{success:error:}(t),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})}(e.map((e=>e.bidResponse)),(function(t,n){n.forEach(((n,r)=>{const{auctionInstance:i,bidResponse:o,afterBidAdded:s}=e[r];var a;t?ve(`Failed to save to the video cache: ${t}. Video bid must be discarded.`):""===n.uuid?ve("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(o.videoCacheKey=n.uuid,o.vastUrl||(o.vastUrl=(a=o.videoCacheKey,`${O.getConfig("cache.url")}?uuid=${a}`)),Xi(i,o),s())}))}))};let Qi,Zi;O.getConfig("cache",();const eo=((e=setTimeout,t=Yi)=>{let n=[[]],r=!1;const i=return )(),to=zt("async",(,"callPrebidCache");onst ro=e=>t=>{const n=e||((e,{index:t=yo.index}={})=>{const n=no(e.mediaType,t.getMediaTypes(e),O.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&n?"string"==typeof n?n:"custom":O.getConfig("priceGranularity")})(t);return n===y.Ql.B7?t.pbAg:n===y.Ql.uN?t.pbDg:n===y.Ql.yE?t.pbLg:n===y.Ql.M2?t.pbMg:n===y.Ql.lj?t.pbHg:n===y.Ql.qN?t.pbCg:void 0},io=oo=so=ao=function co(e,t){return{key:e,val:"function"==typeof t?}function lo(e,t){const n=y.TD,r=Object.assign({},Nt.settingsFor(null));if(r[y.k2.xn]||(r[y.k2.xn]=)),"video"===e){const e=r[y.k2.xn].slice();if(r[y.k2.xn]=e,[n.UUID,n.CACHE_ID].forEach((t=>{void 0===d(e,(e=>e.key===t))&&e.push(co(t,"videoCacheKey"))})),O.getConfig("cache.url")&&(!t||!1!==Nt.get(t,"sendStandardTargeting"))){const t=ut(O.getConfig("cache.url"));void 0===d(e,(e=>e.key===n.CACHE_HOST))&&e.push(co(n.CACHE_HOST,())}}return r}function uo(e,t,n,r){var i=t[y.k2.xn];return n.size=n.getSize(),(i||[]).forEach((function(i){var o=i.key,s=i.val;if(e[o]&&ve("The key: "+o+" is being overwritten"),xe(s))try{s=s(n,r)}catch(e){Ie("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==y.TD.DEAL&&o!==y.TD.ACAT&&o!==y.TD.DSP&&o!==y.TD.CRID||!Be(s)&&null!=s?e[o]=s:ye("suppressing empty key '"+o+"' from adserver targeting")})),e}unction fo(e){Object.assign(this,{getAuction({auctionId:t}){if(null!=t)return e().find((e=>e.getAuctionId()===t))},getAdUnit({transactionId:t}){if(null!=t)return e().flatMap((e=>e.getAdUnits())).find((e=>e.transactionId===t))},getMediaTypes({transactionId:e,requestId:t}){if(null!=t){const n=this.getBidRequest({requestId:t});if(null!=n&&(null==e||n.transactionId===e))return n.mediaTypes}else if(null!=e){const t=this.getAdUnit({transactionId:e});if(null!=t)return t.mediaTypes}},getBidderRequest({requestId:t,bidderRequestId:n}){if(null!=t||null!=n){let r=e().flatMap((e=>e.getBidRequests()));return null!=n&&(r=r.filter((e=>e.bidderRequestId===n))),null==t?r[0]:r.find(()}},getBidRequest({requestId:t}){if(null!=t)return e().flatMap((e=>e.getBidRequests())).flatMap((e=>e.bids)).find((e=>e&&e.bidId===t))}})}let go=1;const mo=[];.getConfig("ttlBuffer",(e=>{if("number"==typeof e.ttlBuffer){const t=go;go=e.ttlBuffer,t!==go&&mo.forEach(()}else Ie("Invalid value for ttlBuffer",e.ttlBuffer)}));const ho="minBidCacheTTL",yo=function(){let e=null;const t=Tn({startTime:ttl:t=>null==e?null:t.end.then((()=>1e3*Math.max(e,...t.getBidsReceived().map(bo))))});var n;n=mo.push(n),O.getConfig(ho,(n=>{const r=e;e=null==n?void 0:n[ho],e="number"==typeof e?e:null,r!==e&&t.refresh()}));const r={};turn r.addWinningBid=Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:,getAdUnitCodes:{post:Me}}).forEach((([e,{name:n=e,pre:i,post:o}])=>{const s=null==i?e=>e[n]():a=null==o?e=>e:r[e]=)),r.getAllBidsForAdUnitCode=r.createAuction=r.findBidByAdId=r.getStandardBidderAdServerTargeting=r.setStatusForBids=r.getLastAuctionId=r.clearAllAuctions=r.index=new fo((),r}(),{AD_RENDER_FAILED:vo,AD_RENDER_SUCCEEDED:Io,STALE_RENDER:wo,BID_WON:Co}=y.EVENTS;function To({reason:e,message:t,bid:n,id:r}){const i={reason:e,message:t};n&&(i.bid=n),r&&(i.adId=r),Ie(`Error rendering ad (id: ${r}): ${t}`),Nn(vo,i)}unction So(e,{adId:t,options:n,bidResponse:r}){if(null!=r){if(r.status!==y.UE.fe||(ve(`Ad id ${t} has been rendered before`),Nn(wo,r),!h(O.getConfig("auctionOptions"),"suppressStaleRender"))){try{const{adId:t,ad:i,adUrl:o,width:s,height:a,renderer:d,cpm:c,originalCpm:l,mediaType:u}=r;if(d))!function(e,t,n){let r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,void 0)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)}(d,r);else if(t){if(u===ji)return void To({reason:y.q_.Sn,message:"Cannot render video ad",bid:r,id:t});const d={AUCTION_PRICE:l||c,CLICKTHROUGH:(null==n?void 0:n.clickUrl)||""};e({ad:Ke(i,d),adUrl:Ke(o,d),adId:t,width:s,height:a})}}catch(e){return void To({reason:y.q_.XW,message:e.message,id:t,bid:r})}yo.addWinningBid(r),Nn(Co,r)}}else To({reason:y.q_.WT,message:`Cannot find ad '${t}'`,id:t})}y.EVENTS.AD_RENDER_SUCCEEDED,y.EVENTS.AD_RENDER_FAILED;const xo=y.q_.Ex,Ao=y.q_.XW,_o=(y.EVENTS.BID_WON,{"Prebid Request":function(e,t,n){So((function(t){(function({adId:e,adUnitCode:t,width:n,height:r}){["div","iframe"].forEach((i=>{let o=function(n){let r=(o=e,s=t,ze()?function(e){const t=d(window.googletag.pubads().getSlots(),();return t?t.getSlotElementId():null}(o):)?s):s),i=document.getElementById(r);var o,s;return i&&i.querySelector(n)}(i+':not([style*="display: none"])');if(o){let e=o.style;e.width=n?n+"px":"100%",e.height=r+"px"}else ve(`Unable to locate matching page element for adUnitCode ${t}.  Can't resize it to ad's dimensions.  Please review setup.`)}))})(n),e(Object.assign({message:"Prebid Response"},t))}),{options:t.options,adId:t.adId,bidResponse:n})},"Prebid Event":function(e,t,n){if(null!=n)if(n.status===y.UE.fe)switch(t.event){case y.EVENTS.AD_RENDER_FAILED:To({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case y.EVENTS.AD_RENDER_SUCCEEDED:Eo({doc:null,bid:n,id:t.adId});break;default:Ie(`Received x-origin event request for unsupported event: '${t.event}' (adId: '${t.adId}')`)}else ve(`Received x-origin event request without corresponding render request for ad '${t.adId}'`);else Ie(`Cannot find ad '${t.adId}' for x-origin event request`)}});function Oo(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){const t=d(yo.getBidsReceived(),();_o.hasOwnProperty(n.message)&&_o[n.message](function(e){return null==e.origin&&0===e.ports.length?e.ports.length>0?(e),n,t)}}ction Do(...e){return function(t,n){for(const r of e){const e=r(t,n);if(0!==e)return e}return 0}}function Uo(e=ko){return function(e=ko){return(Bo(e))}const jo=Ro((e=>e.cpm)),Po=Ro((e=>e.responseTimestamp)),No=Uo(Do(jo,Bo(Ro((e=>e.timeToRespond))))),$o=Uo(Do(jo,Bo(Po)));Uo(Do(jo,Po));var qo=[];const Mo="targetingControls.allowTargetingKeys",Fo="targetingControls.addTargetingKeys",Lo=`Only one of "${Mo}" or "${Fo}" can be set`,Vo=Object.keys(y.TD).map((e=>y.TD[e]));let zo={isActualBid:isBidNotExpired:e=>e.responseTimestamp+1e3*bo(e)>Xe(),isUnusedBid:;onst Wo=zt("sync",(function(e,t,n=0,r=!1){if(!r){const r=[],i=O.getConfig("sendBidsControl.dealPrioritization");let o=et(e,"adUnitCode");return Object.keys(o).forEach((),r}return e}));function Ho(e=!1){return const Ko=function(e){let t={},n={};function r(e,t){return e.adserverTargeting&&t&&(_e(t)&&a(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function i(t){return"string"==typeof t?[t]:_e(t)?t:e.getAdUnitCodes()||[]}function o(){let t=e.getBidsReceived();if(O.getConfig("useBidCache")){const e=O.getConfig("bidCacheFilterFunction");"function"==typeof e&&(t=t.filter(())}else t=t.filter(();return t=t.filter(().filter(Go),t.forEach((),Wo(t,$o)}unction c(e,t,n,r){return Object.keys(t.adserverTargeting).filter(l()).forEach((n=>{e.length&&e.filter(n)).forEach(function(e){return (n))})),e.push(t),e}nction p(e,t){return t.map((t=>({[`${t}_${e.bidderCode}`.substring(0,20)]:[e.adserverTargeting[t]]})))}return t.setLatestAuctionForAdUnit=t.resetPresetTargeting=function(t,n){if(ze()){const r=i(t),o=e.getAdUnits().filter((e=>a(r,e.code)));let s=qo.reduce((,{});window.googletag.pubads().getSlots().forEach(()}},t.resetPresetTargetingAST=t.getAllTargeting=function(n,l=o()){const f=i(n);var g=function(e,n){let r=t.getWinningBids(e,n),i=s();return r=r.map((e=>({[e.adUnitCode]:Object.keys(e.adserverTargeting).filter(().reduce(((t,n)=>{const r=[e.adserverTargeting[n]],i={[n.substring(0,20)]:r};if(n===y.TD.DEAL){const o={[`${n}_${e.bidderCode}`.substring(0,20)]:r};return[...t,i,o]}return[...t,i]}),[])}))),r}(f,l).concat(function(e,t){return t.filter(().map(().reduce(c,[]).map(u).filter((e=>e))}(f,l)).concat(O.getConfig("enableSendAllBids")?function(e,t){const n=Vo.slice(),i=O.getConfig("sendBidsControl.bidLimit"),o=Wo(t,No,i),s=O.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),a=s?s.map(():n;return o.map(().filter((e=>e))}(f,l):function(e,t){if(!0===O.getConfig("targetingControls.alwaysIncludeDeals")){const n=Vo.slice();return Wo(t,No).map(().filter(()}return[]}(f,l)).concat(function(t){turn e.getAdUnits().filter(().map(()}(f));g.map(();const m=Object.keys(Object.assign({},y.kF,y.NATIVE_KEYS));let b=O.getConfig(Mo);const v=O.getConfig(Fo);if(null!=v&&null!=b)throw new Error(Lo);b=null!=v?m.concat(v):b||m,Array.isArray(b)&&b.length>0&&(g=function(e,t){const n=Object.assign({},y.TD,y.NATIVE_KEYS),r=Object.keys(n),i={};return ye(`allowTargetingKeys - allowed keys [ ${t.map((e=>n[e])).join(", ")} ]`),e.map((e=>{const o=Object.keys(e)[0],s=e[o].filter((e=>{const o=Object.keys(e)[0],s=0===r.filter(().length||d(t,();return i[o]=!s,s}));e[o]=s})),ye(`allowTargetingKeys - removed keys [ ${Object.keys(i).filter((e=>i[e])).join(", ")} ]`),e.filter(()}(g,b)),g=function(e){return e.map(().reduce((,{})}(g);const I=O.getConfig("targetingControls.auctionKeyMaxChars");return I&&(ye(`Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ${I} characters.  Running checks on auction keys...`),g=function(e,t){let n=We(e),r=Object.keys(n).map((e=>({adUnitCode:e,adserverTargeting:n[e]}))).sort(Ho());return r.reduce((function(e,r,i,o){let s=(a=r.adserverTargeting,Object.keys(a).reduce((function(e,t){return e+`${t}%3d${encodeURIComponent(a[t])}%26`}),""));var a;i+1===o.length&&(s=s.slice(0,-3));let d=r.adUnitCode,c=s.length;return c<=t?(ye(`AdUnit '${d}' auction keys comprised of ${c} characters.  Deducted from running threshold; new limit is ${t-=c}`,n[d]),e[d]=n[d]):ve(`The following keys for adUnitCode '${d}' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ${c}, the current allotted amount was ${t}.\n`,n[d]),i+1===o.length&&0===Object.keys(e).length&&Ie("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(g,I)),f.forEach((),g},O.getConfig("targetingControls",(function(e){null!=h(e,Mo)&&null!=h(e,Fo)&&Ie(Lo)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((n=>{Object.keys(e).filter(t?t(n):ot(n)).forEach((t=>{Object.keys(e[t]).forEach((),he(`Attempting to set targeting-map for slot: ${n.getSlotElementId()} with targeting-map:`,e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e,t=o()){const n=i(e);return t.filter((e=>a(n,e.adUnitCode))).filter((e=>!0===Nt.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0)).map((e=>e.adUnitCode)).filter(Me).map(()},t.setTargetingForAst=t.isApntagDefined=function(){if(window.apntag&&xe(window.apntag.setKeywords))return!0},t}(yo),Jo="__pbjs_debugging__";nction Qo({alreadyInstalled:e=Xo,script:t=Yo}={}){let n=null;return function(){return null==n&&(n=new z(()),n}}const Zo=function({load:e=Qo(),hook:t=Ht("requestBids")}={}){let n=null,r=!1;turn{enable:disable:o,reset:}();Zo.reset,O.getConfig("debugging",(function({debugging:e}){(null==e?void 0:e.enabled)?Zo.enable():Zo.disable()}));const es=Ri("fpdEnrichment"),ts=bt((function(e=window.location.host){if(!es.cookiesAreEnabled())return e;const t=e.split(".");if(2===t.length)return e;let n,r,i=-2;const o=`_rdc${Date.now()}`,s="writeable";do{n=t.slice(i).join(".");let e=new Date(Xe()+1e4).toUTCString();es.setCookie(o,s,e,"Lax",n,void 0),es.getCookie(o,void 0)===s?(r=!1,es.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,n,void 0)):(i+=-1,r=Math.abs(i)<=t.length)}while(r);return n})),ns=["architecture","bitness","model","platformVersion","fullVersionList"],rs=["brands","mobile","platform"],is=function(e=(e=>null==(e=window.navigator)?void 0:e.userAgentData)()){const t=e&&rs.some(()?Object.freeze(ss(1,e)):null;return function(){return t}}(),os=function(e=(e=>null==(e=window.navigator)?void 0:e.userAgentData)()){const t={},n=new WeakMap;return function(r=ns){if(!n.has(r)){const e=Array.from(r);e.sort(),n.set(r,e.join("|"))}const i=n.get(r);if(!t.hasOwnProperty(i))try{t[i]=e.getHighEntropyValues(r).then((e=>Re(e)?null:Object.freeze(ss(2,e)))).catch((()=>null))}catch(e){t[i]=z.resolve(null)}return t[i]}}();function ss(e,t){onst r={source:e};return t.platform&&(r.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map(()),void 0!==t.mobile&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((),r}const as=["dooh","app","site"];function ds(e){return function(t){return as.reduce(((n,r)=>(cs(t,r)&&(null!=n?(ve(`${e} specifies both '${n}' and '${r}'; dropping the latter.`),delete t[r]):n=r),n)),null),t}}onst ls={getRefererInfo:Ir,findRootDomain:ts,getWindowTop:ge,getWindowSelf:me,getHighEntropySUA:os,getLowEntropySUA:is},us=ds("FPD"),ps=zt("sync",(e=>{const t=[e,gs().catch((()=>null)),z.resolve("cookieDeprecationLabel"in navigator&&an(dn,er($t,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch((()=>null))];return z.all(t).then((([e,t,n])=>{const r=ls.getRefererInfo();if(function(e){["app","site","device"].forEach((t=>{const n=O.getConfig(t);null!=n&&(e[t]=gt({},n,e[t]))}))}(e),Object.entries(bs).forEach((),t&&ht(e,"device.sua",Object.assign({},t,e.device.sua)),n){const t={cdep:n};ht(e,"device.ext",Object.assign({},t,e.device.ext))}e=us(e);for(let t of as)if(cs(e,t)){e[t]=gt({},hs(0,r),e[t]);break}return e}))}));unction gs(){const e=O.getConfig("firstPartyData.uaHints");return Array.isArray(e)&&0!==e.length?ls.getHighEntropySUA(e):z.resolve(ls.getLowEntropySUA())}onst bs={site(e,t){if(!as.filter((e=>"site"!==e)).some(cs.bind(null,e)))return ms({page:t.page,ref:t.ref})},device:()=>fs((e=>({w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:rt()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}))),regs(){const e={};fs((e=>e.navigator.globalPrivacyControl))&&ht(e,"ext.gpc",1);const t=O.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function hs(e,t){var n,r,i;const o=yr(t.page,{noLeadingWww:!0}),s=null==(i=null==(r=null==(n=fs(())?void 0:n.content)?void 0:r.replace)?void 0:i.call(r,/\s/g,"");return ms({domain:o,keywords:s,publisher:ms({domain:ls.findRootDomain(o)})})}const ys={frameBorder:0,scrolling:"no",marginHeight:0,marginWidth:0,topMargin:0,leftMargin:0,allowTransparency:"true"};const vs=o(),{triggerUserSyncs:Is}=Di,{ADD_AD_UNITS:ws,REQUEST_BIDS:Cs,SET_TARGETING:Ts}=y.EVENTS,Es={bidWon:function(e){if(yo.getBidsRequested().map(().reduce(Fe).filter(Me).includes(e))return!0;Ie('The "'+e+'" placement is not defined.')}};nction As(e){const t=We(e),n=t.mediaTypes.video;if(n.playerSize){let e="number"==typeof n.playerSize[0]?2:1;const r=Ss(n.playerSize,e);r.length>0?(2===e&&ye("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=r,t.sizes=r):(Ie("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}unction Os(e){const t=n=e.mediaTypes,r=e.bids;return null==r||_e(r)?null==r&&null==e.ortb2Imp?(Ie(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],he(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(Ie(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(Ie(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!),vs.bidderSettings=vs.bidderSettings||{},vs.libLoaded=!0,vs.version="v8.31.0",ye("Prebid.js v8.31.0 loaded"),vs.installedModules=vs.installedModules||[],vs.adUnits=vs.adUnits||[],vs.triggerUserSyncs=Is;const ks={validateAdUnit:Os,validateBannerMediaType:xs,validateSizes:Ss};Object.assign(ks,{validateVideoMediaType:As});const Rs=zt("sync",(function(e){const t=[];return e.forEach((e=>{if(null==(e=Os(e)))return;const n=e.mediaTypes;let r,i;n.banner&&(r=xs(e),n.banner.hasOwnProperty("pos")&&(r=_s(r,"banner"))),n.video&&(i=As(r||e),n.video.hasOwnProperty("pos")&&(i=_s(i,"video")));const o=Object.assign({},r,i,void 0);t.push(o)})),t}),"checkAdUnitSetup");s.getAdserverTargetingForAdUnitCodeStr=function(e){if(ye("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e)return function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map(().join("&"):""}(vs.getAdserverTargetingForAdUnitCode(e));he("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},vs.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){const t=yo.getAllBidsForAdUnitCode(e).filter(Go);return t.length?t.reduce(No):{}}he("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},vs.getAdserverTargetingForAdUnitCode=vs.getAdserverTargeting=vs.getConsentMetadata=vs.getNoBids=function(){return ye("Invoking pbjs.getNoBids",arguments),Bs("getNoBids")},vs.getNoBidsForAdUnitCode=function(e){return{bids:yo.getNoBids().filter((t=>t.adUnitCode===e))}},vs.getBidResponses=vs.getBidResponsesForAdUnitCode=vs.setTargetingForGPTAsync=function(e,t){if(ye("Invoking pbjs.setTargetingForGPTAsync",arguments),!ze())return void Ie("window.googletag is not defined on the page");let n=Ko.getAllTargeting(e);Ko.resetPresetTargeting(e,t),Ko.setTargetingForGPT(n,t),Object.keys(n).forEach((e=>{Object.keys(n[e]).forEach((t=>{"hb_adid"===t&&yo.setStatusForBids(n[e][t],y.UE.CK)}))})),Nn(Ts,n)},vs.setTargetingForAst=function(e){ye("Invoking pbjs.setTargetingForAn",arguments),Ko.isApntagDefined()?(Ko.setTargetingForAst(e),Nn(Ts,Ko.getAllTargeting())):Ie("window.apntag is not defined on the page")},vs.renderAd=zt("async",(function(e,t,n){ye("Invoking pbjs.renderAd",arguments),he("Calling renderAd with adId :"+t),function(e,t,n){let r;ry{if(t&&e){r=yo.findBidByAdId(t);{const e=r&&yo.index.getAdUnit(r),t=o().videoModule;if((null==e?void 0:e.video)&&t)return void t.renderBid(e.video.divId,r)}e!==document||He()?So((function(t){(function({ad:e,adUrl:t,width:n,height:r},i,o=document){e||t?(t&&!e?function(e,t){const n=e.createElement("iframe");t=Object.assign({},t,ys),Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),e.body.appendChild(n)}(o,{width:n,height:r,src:t}):(o.write(e),o.close()),i()):i({reason:xo,message:"Missing ad markup or URL"})})(t,i,e),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t.width,e.defaultView.frameElement.height=t.height),je(document.createComment(`Creative ${r.creativeId} served by ${r.bidder} Prebid.js Header Bidding`),e,"html")}),{adId:t,options:{clickUrl:null==n?void 0:n.clickThrough},bidResponse:r}):i({reason:y.q_.Sn,message:"renderAd was prevented from writing to the main document."})}else i({reason:y.q_.mb,message:"missing "+(t?"doc":"adId")})}catch(e){i({reason:Ao,message:e.message})}}(e,t,n)})),vs.removeAdUnit=function(e){if(ye("Invoking pbjs.removeAdUnit",arguments),!e)return void(vs.adUnits=[]);let t;t=_e(e)?e:[e],t.forEach(()},vs.requestBids=function(){const e=zt("async",(function({bidsBackHandler:e,timeout:t,adUnits:n,adUnitCodes:r,labels:i,auctionId:o,ttlBuffer:s,ortb2:d,metrics:c,defer:l}={}){Nn(Cs);const u=t||O.getConfig("bidderTimeout");ye("Invoking pbjs.requestBids",arguments),r&&r.length?n=n.filter((e=>a(r,e.code))):r=n&&n.map((e=>e.code));const p={global:gt({},O.getAnyConfig("ortb2")||{},d||{}),bidder:Object.fromEntries(Object.entries(O.getBidderConfig()).map((([e,t])=>[e,t.ortb2])).filter(())};return ps(z.resolve(p.global)).then(()}),"requestBids");return t=e,n=Object.defineProperties(n,Object.fromEntries(["before","after","getHooks","removeAll"].map(())),n;var t,n}();const Ds=zt("async",(function({bidsBackHandler:e,timeout:t,adUnits:n,ttlBuffer:r,adUnitCodes:i,labels:o,auctionId:s,ortb2Fragments:d,metrics:c,defer:l}={}){const u=Ii(O.getConfig("s2sConfig")||[]);function p(t,n,r){if("function"==typeof e)try{e(t,n,r)}catch(e){Ie("Error executing bidsBackHandler",null,e)}l.resolve({bids:t,timedOut:n,auctionId:r})}if(function(e){e.forEach((e=>function(e){var t;const n=null==(t=null==e?void 0:e.mediaTypes)?void 0:t.video;null!=n&&null==n.plcmt&&(n.context===In||[2,3,4].includes(n.placement)?n.plcmt=4:n.context!==In&&[2,6].includes(n.playbackmethod)&&(n.plcmt=2))}(e)))}(n),(n=Jn(c).measureTime("requestBids.validate",(()=>Rs(n)))).forEach((e=>{var t,n;const i=Object.keys(e.mediaTypes||{banner:"banner"}),o=e.bids.map((e=>e.bidder)),s=Si.bidderRegistry,d=o.filter((e=>!u.has(e))),c=(null==(n=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:n.tid)||le();e.transactionId=c,null==r||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=r),ht(e,"ortb2Imp.ext.tid",c),d.forEach((t=>{const n=s[t],r=n&&n.getSpec&&n.getSpec(),o=r&&r.supportedMediaTypes||["banner"];i.some((e=>a(o,e)))?pr(e.code,t):(ve(function(e,t){const n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return`\n    ${e.code} is a ${n} ad unit\n    containing bidders that don't support ${n}: ${t}.\n    This bidder won't fetch demand.\n  `}(e,t)),e.bids=e.bids.filter(())})),ur(e.code)})),n&&0!==n.length){const e=yo.createAuction({adUnits:n,adUnitCodes:i,callback:p,cbTimeout:t,labels:o,auctionId:s,ortb2Fragments:d,metrics:c});let r=n.length;r>15&&ye(`Current auction ${e.getAuctionId()} contains ${r} adUnits.`,n),i.forEach((),e.callBids()}else he("No adUnits configured. No bids requested."),p()}),"startAuction");vs.requestBids.before((function(e,t){(_i),n(Us),e.call(this,t)}),49),vs.addAdUnits=vs.onEvent=function(e,t,n){ye("Invoking pbjs.onEvent",arguments),xe(t)?!n||Es[e].call(null,n)?Dn(e,t,n):Ie('The id provided is not valid for event "'+e+'" and no handler was set.'):Ie('The event handler provided is not a function and was not set on event "'+e+'".')},vs.offEvent=function(e,t,n){ye("Invoking pbjs.offEvent",arguments),n&&!Es[e].call(null,n)||Un(e,t,n)},vs.getEvents=vs.registerBidAdapter=vs.registerAnalyticsAdapter=vs.createBid=const Us=[],js=zt("async",(,"enableAnalyticsCb");vs.enableAnalytics=vs.aliasBidder=vs.aliasRegistry=Si.aliasRegistry,O.getConfig("aliasRegistry",(),vs.getAllWinningBids=vs.getAllPrebidWinningBids=vs.getHighestCpmBids=vs.markWinningBidAsUsed=const Ps=function Ns(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){Ie("Error processing command :","prebid.js",e)}}))}vs.getConfig=O.getAnyConfig,vs.readConfig=O.readAnyConfig,vs.mergeConfig=O.mergeConfig,vs.mergeBidderConfig=O.mergeBidderConfig,vs.setConfig=O.setConfig,vs.setBidderConfig=O.setBidderConfig,vs.que.push((),vs.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){Ie("Error processing command :",e.message,e.stack)}else Ie("Commands written into pbjs.cmd.push must be wrapped in a function")},vs.que.push=vs.cmd.push,vs.processQueue=vs.triggerBilling=const $s=vs;function qs(e){return!(null==e?void 0:e.gdprApplies)||!0===h(e,"vendorData.purpose.consents.1")}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.keys(y.NATIVE_KEYS).map((e=>y.NATIVE_KEYS[e]));const{NATIVE_ASSET_TYPES:Ms,NATIVE_IMAGE_TYPES:Fs,PREBID_NATIVE_DATA_KEYS_TO_ORTB:Ls,NATIVE_KEYS_THAT_ARE_NOT_ASSETS:Vs,NATIVE_KEYS:zs}=y;s(Ls),Gs(Ms),Object.fromEntries(Object.entries(y.NATIVE_KEYS).map(());const Ws={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"},Hs=["user.keywords"].concat(as.flatMap(());function Ks(e,...t){return function(...e){const t=new Set;return e.filter((e=>e)).flatMap(().map(().filter((e=>e)).forEach((e=>t.add(e))),Array.from(t.keys())}(...Hs.map((t=>h(e,t))),...t)}const Js={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid"},Xs=["user.data"].concat(as.map((e=>`${e}.content.data`)));function Ys(e,t,n){return null==t?n:Ae(t)?t:Oe(t)?t.toString():void ve("Unsuported type for param: "+e+" required type: String")}function Qs(e,t="keywords"){const n=[];return De(e,((e,r)=>{if(_e(e)){let n=[];De(e,(),e=n}else{if(!Ae(e=Ys(t+"."+r,e)))return;e=[e]}e=e.filter((e=>""!==e));const i={key:r};e.length>0&&(i.value=e),n.push(i)})),n} ia="appnexus",oa=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],sa=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],aa=["age","externalUid","external_uid","segments","gender","dnt","language"],da=["geo","device_id"],ca=["enabled","dongle","member_id","debug_timeout"],la={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},ua={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},pa=ki({bidderCode:ia}),fa={code:ia,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"uol",gvlid:32},{code:"adzymic",gvlid:32}],supportedMediaTypes:[Pi,ji,Ui],isBidRequestValid:buildRequests:function(e,t){var n,r;const i=e.map(ga),o=d(e,ba);let s={};!0===O.getConfig("coppa")&&(s={coppa:!0}),o&&Object.keys(o.params.user).filter((e=>a(aa,e))).forEach((e=>{let t=ta(e);if("segments"===e&&_e(o.params.user[e])){let n=[];o.params.user[e].forEach((),s[t]=n}else"segments"!==e&&(s[t]=o.params.user[e])}));const c=d(e,ya);let l;c&&c.params&&c.params.app&&(l={},Object.keys(c.params.app).filter((e=>a(da,e))).forEach(());const u=d(e,va);let p;u&&u.params&&c.params.app&&c.params.app.id&&(p={appid:u.params.app.id});let f={},g={};const m=pa.getCookie("apn_prebid_debug")||null;if(m)try{f=JSON.parse(m)}catch(e){Ie("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(la).forEach((e=>{let t=Ee(e);Ae(t)&&""!==t&&(f[la[e]]=t,f.enabled=!0)})),f=na({member_id:"number",debug_timeout:"number"},f);const t=d(e,Ia);t&&t.debug&&(f=t.debug)}f&&f.enabled&&Object.keys(f).filter((e=>a(ca,e))).forEach(();const b=d(e,ha),y=b?parseInt(b.params.member,10):0,v=e[0].schain,I=d(e,Ca),w={tags:[...i],user:s,sdk:{source:"pbjs",version:"8.31.0"},schain:v};I&&(w.iab_support={omidpn:"Appnexus",omidpv:"8.31.0"}),y>0&&(w.member_id=y),c&&(w.device=l),u&&(w.app=p);let C=function(e,...t){return ea(e),function(e){let t={};return Xs.forEach((),t}(e),...t)}(We(t&&t.ortb2),We(O.getConfig("appnexusAuctionKeywords"))||{});if(C.length>0&&(w.keywords=C),O.getConfig("adpod.brandCategoryExclusion")&&(w.brand_category_uniqueness=!0),g.enabled&&(w.debug=g,ye("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(g,null,4))),t&&t.gdprConsent&&(w.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){let e=t.gdprConsent.addtlConsent,n=e.substring(e.indexOf("~")+1);w.gdpr_consent.addtl_consent=n.split(".").map(()}if(t&&t.uspConsent&&(w.us_privacy=t.uspConsent),(null==t?void 0:t.gppConsent)?w.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:(null==(r=null==(n=null==t?void 0:t.ortb2)?void 0:n.regs)?void 0:r.gpp)&&(w.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){let e={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((e=>encodeURIComponent(e))).join(",")},n=t.refererInfo.canonicalUrl;Ae(n)&&""!==n&&(e.rd_can=n),w.referrer_detection=e}if(d(e,wa)&&e.filter(wa).forEach((e=>{const t=function(e,t){const{durationRangeSec:n,requireExactDuration:r}=t.mediaTypes.video,i=function(e){const{adPodDurationSec:t,durationRangeSec:n,requireExactDuration:r}=e,i=Math.min(...n),o=Math.floor(t/i);return r?Math.max(o,n.length):o}(t.mediaTypes.video),o=Math.max(...n);let s=function(e,t){let n=[];for(let r=0;r<t;r++){let t=ke(e)?We(e):e;n.push(t)}return n}(...e.filter((e=>e.uuid===t.bidId)),i);if(r){const e=ra(s,Math.ceil(i/n.length));n.forEach(()}else s.map((e=>Ta(e,"maxduration",o)));return s}(i,e),n=w.tags.filter(();w.tags=[...n,...t]})),e[0].userId){let t=[];e[0].userIdAsEids.forEach((),t.length&&(w.eids=t)}i[0].publisher_id&&(w.publisher_id=i[0].publisher_id);const T=function(e,t){let n=[],r={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";if(qs(null==t?void 0:t.gdprConsent)||(i="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==Ee("apn_test").toUpperCase()&&!0!==O.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1}),e.tags.length>15){const o=We(e);ra(e.tags,15).forEach(()}else{const o=JSON.stringify(e);n={method:"POST",url:i,data:o,bidderRequest:t,options:r}}return n}(w,t);return T},interpretResponse:function(e,{bidderRequest:t}){e=e.body;const n=[];if(!e||e.error){let r=`in response for ${t.bidderCode} adapter`;return e&&e.error&&(r+=`: ${e.error}`),Ie(r),n}if(e.tags&&e.tags.forEach((e=>{const r=(i=e)&&i.ads&&i.ads.length&&d(i.ads,(e=>e.rtb));var i;if(r&&(!0===Nt.get(t.bidderCode,"allowZeroCpmBids")?r.cpm>=0:r.cpm>0)&&a(this.supportedMediaTypes,r.ad_type)){const i=function(e,t,n){const r=function(e,t){if(e)return t.flatMap((e=>e.bids)).find(()}(e.uuid,[n]),i={adId:ce(),requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};var o;if(t.adomain&&(i.meta=Object.assign({},i.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(i.meta=Object.assign({},i.meta,{advertiserId:t.advertiser_id})),t.buyer_member_id&&(i.meta=Object.assign({},i.meta,{dchain:(o=t,{ver:"1.0",complete:0,nodes:[{bsid:o.buyer_member_id.toString()}]})})),t.brand_id&&(i.meta=Object.assign({},i.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(i,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),h(r,"mediaTypes.video.context")){case Ni:const r=Ws[t.brand_category_id]?Ws[t.brand_category_id]:null;i.meta=Object.assign({},i.meta,{primaryCatId:r});const o=t.deal_priority;i.video={context:Ni,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:o},i.vastUrl=t.rtb.video.asset_url;break;case In:if(i.adResponse=e,i.adResponse.ad=i.adResponse.ads[0],i.adResponse.ad.video=i.adResponse.ad.rtb.video,i.vastXml=t.rtb.video.content,t.renderer_url){const r=d(n.bids,(t=>t.bidId===e.uuid));let o=h(r,"mediaTypes.video.renderer.options");o||(o=h(r,"renderer.options")),i.renderer=function(e,t,n={}){const r=Dt.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{r.setRender(Ea)}catch(e){ve("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:()=>he("AppNexus outstream video impression event"),loaded:ended:),r}(i.adUnitCode,t,o)}break;case wn:i.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else{Object.assign(i,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(let e=0;e<t.rtb.trackers[0].impression_urls.length;e++){const n=qe(t.rtb.trackers[0].impression_urls[e]);i.ad+=n}}catch(e){Ie("Error appending tracking pixel",e)}}return i}(e,r,t);i.mediaType=r),n.push(i)}})),e.debug&&e.debug.debug_info){let t="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;t=t.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),he("https://console.appnexus.com/docs/understanding-the-debug-auction"),he(t)}return n},getUserSyncs:function(e,t,n,r,i){if(e.iframeEnabled&&qs(n)&&(!(o=i)||!Array.isArray(o.applicableSections)||o.applicableSections.every(()))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}];var o},transformBidParams:function(e,t,n,r){let i=Qs;if(!0===t){let e=null,t=O.getConfig("s2sConfig");ke(t)?e=h(t,"endpoint.p1Consent"):_e(t)&&t.forEach((),e&&e.match("/openrtb2/prebid")&&(i=xa)}return e=na({member:"string",invCode:"string",placementId:"number",keywords:i,publisherId:"number"},e),t&&(Object.keys(e).forEach((),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}};function ga(e){var t;const n={};Object.keys(e.params).forEach((),n.sizes=ma(e.sizes),n.primary_size=n.sizes[0],n.ad_types=[],n.uuid=e.bidId,e.params.placement_id?n.id=parseInt(e.params.placement_id,10):n.code=e.params.inv_code,n.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,n.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,n.prebid=!0,n.disable_psa=!0;let r=function(e){if(!xe(e.getFloor))return e.params.reserve?e.params.reserve:null;let t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return ke(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(r&&(n.reserve=r),e.params.position)n.position={above:1,below:2}[e.params.position]||0;else{let t=h(e,"mediaTypes.banner.pos")||h(e,"mediaTypes.video.pos");0!==t&&1!==t&&3!==t||(n.position=3===t?2:t)}e.params.traffic_source_code&&(n.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(n.private_sizes=ma(e.params.private_sizes)),e.params.supply_type&&(n.supply_type=e.params.supply_type),e.params.pub_click&&(n.pubclick=e.params.pub_click),e.params.ext_inv_code&&(n.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(n.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(n.external_imp_id=e.params.external_imp_id);const i=ea(Ae(o=h(e,"ortb2Imp.ext.data.keywords"))&&""!==o?Zs(o.split(/\s*(?:,)\s*/)):{},null==(t=e.params)?void 0:t.keywords);var o;i.length>0&&(n.keywords=i);let s=h(e,"ortb2Imp.ext.gpid")||h(e,"ortb2Imp.ext.data.pbadslot");s&&(n.gpid=s);{const t=h(e,`mediaTypes.${ji}`),r=h(e,"mediaTypes.video.context");n.hb_source=t&&"adpod"===r?7:1,(e.mediaType===ji||t)&&n.ad_types.push(ji),(e.mediaType===ji||t&&"outstream"!==r)&&(n.require_asset_url=!0),e.params.video&&(n.video={},Object.keys(e.params.video).filter((e=>a(oa,e))).forEach((),e.params.video.frameworks&&_e(e.params.video.frameworks)&&(n.video_frameworks=e.params.video.frameworks)),t&&(n.video=n.video||{},Object.keys(t).filter((e=>a(sa,e))).forEach((e=>{switch(e){case"minduration":case"maxduration":"number"!=typeof n.video[e]&&(n.video[e]=t[e]);break;case"skip":"boolean"!=typeof n.video.skippable&&(n.video.skippable=1===t[e]);break;case"skipafter":"number"!=typeof n.video.skipoffset&&(n.video.skippoffset=t[e]);break;case"playbackmethod":if("number"!=typeof n.video.playback_method){let r=t[e];r=_e(r)?r[0]:r,r>=1&&r<=4&&(n.video.playback_method=r)}break;case"api":if(!n.video_frameworks&&_e(t[e])){let r=t[e].map(().filter((e=>e));n.video_frameworks=r}break;case"startdelay":case"placement":const r="context";if("number"!=typeof n.video[r]){const e=t.placement,i=t.startdelay,o=e)||i);n.video[r]=ua[r][o]}}}))),e.renderer&&(n.video=Object.assign({},n.video,{custom_renderer_present:!0}))}return e.params.frameworks&&_e(e.params.frameworks)&&(n.banner_frameworks=e.params.frameworks),h(e,`mediaTypes.${Pi}`)&&n.ad_types.push(Pi),0===n.ad_types.length&&delete n.ad_types,n}function ma(e){let t=[],n={};if(_e(e)&&2===e.length&&!_e(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"==typeof e)for(let r=0;r<e.length;r++){let i=e[r];n={},n.width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}on Ca(e){let t=!1;const n=e.params,r=e.params.video;return n.frameworks&&_e(n.frameworks)&&(t=a(e.params.frameworks,6)),!t&&r&&r.frameworks&&_e(r.frameworks)&&(t=a(e.params.video.frameworks,6)),t}unction Ea(e,t){!e.adUnitCode),e.adUnitCode),e.renderer.push((()=>{((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Sa.bind(null,e))}))}unction xa(e){let t="";return Object.keys(e).forEach((n=>{Ae(e[n])?""!==e[n]?t+=`${n}=${e[n]},`:t+=`${n},`:_e(e[n])&&(""===e[n][0]?t+=`${n},`:e[n].forEach(())})),t=t.substring(0,t.length-1),t}rr(fa),s("appnexusBidAdapter");const Aa="concert";rr({code:Aa,isBidRequestValid:function(e){return!!e.params.partnerId||(ve("Missing partnerId bid parameter"),!1)},buildRequests:function(e,t){var n,r;he(e),he(t);const i=[];let o={meta:{prebidVersion:"8.31.0",pageUrl:t.refererInfo.page,screen:[window.screen.width,window.screen.height].join("x"),browserLanguage:window.navigator.language,debug:Te(),uid:Oa(t,e),optedOut:ka(),adapterVersion:"1.2.0",uspConsent:t.uspConsent,gdprConsent:t.gdprConsent,gppConsent:t.gppConsent,tdid:Ba(t,e)}};return!o.meta.gppConsent&&(null==(r=null==(n=t.ortb2)?void 0:n.regs)?void 0:r.gpp)&&(o.meta.gppConsent={gppString:t.ortb2.regs.gpp,applicableSections:t.ortb2.regs.gpp_sid}),o.slots=e.map((e=>{var n,r;!function(e,t){if(t.userId){const n=function(e,t,n,r){if(e){const t={id:e,atype:3};return{source:"uidapi.com",uids:[t]}}}(t.userId.uid2&&t.userId.uid2.id);e.push(n)}}(i,e);const o=document.getElementById(e.adUnitCode));return{name:e.adUnitCode,bidId:e.bidId,transactionId:null==(r=null==(n=e.ortb2Imp)?void 0:n.ext)?void 0:r.tid,sizes:e.params.sizes||e.sizes,partnerId:e.params.partnerId,slotType:e.params.slotType,adSlot:e.params.slot||e.adUnitCode,placementId:e.params.placementId||"",site:e.params.site||t.refererInfo.page,ref:t.refererInfo.ref,offsetCoordinates:{x:null==o?void 0:o.left,y:null==o?void 0:o.top}}})),o.meta.eids=i.filter(Boolean),he(o),{method:"POST",url:"https://bids.concert.io/bids/prebid",data:JSON.stringify(o)}},interpretResponse:function(e,t){he(e),he(t);const n=e.body;if(!n||"object"!=typeof n)return[];let r=[];return r=n.bids.map((e=>({requestId:e.bidId,cpm:e.cpm,width:e.width,height:e.height,ad:e.ad,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},creativeId:e.creativeId,netRevenue:e.netRevenue,currency:e.currency}))),Te()&&n.debug&&he("CONCERT",n.debug),he(r),r},onTimeout:function(e){he("concert bidder timed out"),he(e)},onBidWon:);const _a=ki({bidderCode:Aa});function Oa(e,t){if(ka()||!Ra(e))return!1;const n=h(t[0],"userId.sharedid.id")||h(t[0],"userId.pubcid"),r=h(t[0],"crumbs.pubcid");if(n)return n;if(r)return r;const i="c_uid",o="vmconcert_uid",s=_a.getDataFromLocalStorage(i);let a=_a.getDataFromLocalStorage(o);return s&&(a=s,_a.setDataInLocalStorage(o,a),_a.removeDataFromLocalStorage(i)),a||(a=le(),_a.setDataInLocalStorage(o,a)),a}unction Ra(e){let t=!0;"string"==typeof(null==e?void 0:e.uspConsent)&&"1"===(null==e?void 0:e.uspConsent[0])&&"Y"===(null==e?void 0:e.uspConsent[2].toUpperCase())&&(t=!1);const n=qs(null==e?void 0:e.gdprConsent);return t&&n}function Ba(e,t){return ka()||!Ra(e)?null:h(t[0],"userId.tdid")||null}s("concertBidAdapter");var Da=Object.defineProperty,Ua=Object.defineProperties,ja=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,$a=Object.prototype.propertyIsEnumerable,qa=(e,t,n)=>t in e?Da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ma=(e,t)=>{for(var n in t||(t={}))Na.call(t,n)&&qa(e,n,t[n]);if(Pa)for(var n of Pa(t))$a.call(t,n)&&qa(e,n,t[n]);return e};const Fa="gumgum",La=ki({bidderCode:Fa}),Va={t:0,rq:8,pbv:"8.31.0"},za=["dac.co.jp","audigent.com","id5-sync.com","liveramp.com","intentiq.com","liveintent.com","crwdcntrl.net","quantcast.com","adserver.org","yahoo.com"];let Ga={},Wa=null;function Ha(e){const t=let n,r,i,o,s,a,d={};try{n=window.top,r=n.screen,i=e||""}catch(e){return Ie(e),d}return d={vw:n.innerWidth,vh:n.innerHeight,sw:r.width,sh:r.height,pu:function(e){return["ggad","ggdeal"].reduce(((n,r)=>{const i=e.match(t(r));return i?(i[1]&&(n=n.replace(i[1],"")),i[3]&&(n=n.replace(i[3],"")),n):n}),e)}(i),ce:La.cookiesAreEnabled(),dpr:n.devicePixelRatio||1,jcsi:JSON.stringify(Va),ogu:function(){let e="";const t=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']");return e=t?t.content:null,e}()},a=function(){const e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection),t=e&&(e.downlink||e.bandwidth);return t?Math.round(1024*t):null}(),a&&(d.ns=a),o=(i.match(t("ggad"))||[0,0,0])[2],o&&(d[isNaN(o)?"eAdBuyId":"adBuyId"]=o),s=(i.match(t("ggdeal"))||[0,0,0])[2],s&&(d.ggdeal=s),d}unction Ja(e){let t=0,n=0,r=0;return e.forEach((e=>{let[i,o]=e,s=i>o?i:o;(s>r||s===r&&i>=t&&o>=n)&&(r=s,t=i,n=o)})),[t,n]}const Xa={code:Fa,gvlid:61,aliases:["gg"],isBidRequestValid:function(e){const{params:t,adUnitCode:n}=e,r=t.inScreen||t.inScreenPubID||t.inSlot||t.ICV||t.video||t.inVideo||t.slot||t.native||t.zone||t.pubID;if(Ga[r])return ve(`[GumGum] Please check the implementation for ${r} for the placement ${n}`),!1;switch(!0){case!!t.zone:case!!t.pubId:case!!t.inScreen:case!!t.inScreenPubID:case!!t.inSlot:case!!t.ICV:case!!t.video:case!!t.inVideo:case!!t.videoPubID:break;default:return ve(`[GumGum] No product selected for the placement ${n}, please check your implementation.`),!1}return!(t.bidfloor&&("number"!=typeof t.bidfloor||!isFinite(t.bidfloor))&&(ve("[GumGum] bidfloor must be a Number"),1))},buildRequests:function(e,t){const n=[],r=t&&t.gdprConsent,i=t&&t.uspConsent,o=t&&t.gppConsent,s=t&&t.timeout,a=!0===O.getConfig("coppa")?1:0,d=t&&t.refererInfo&&t.refererInfo.page;return De(e,(e=>{var c,l,u;const{bidId:p,mediaTypes:f={},params:g={},schain:m,userId:b={},ortb2Imp:y,adUnitCode:v=""}=e,{currency:I,floor:w}=function(e,t,n){const r=Object.keys(e)[0]||"banner",i={floor:0,currency:"USD"};if("function"==typeof n.getFloor){const{currency:e,floor:o}=n.getFloor({mediaType:r,size:"*"});o&&(i.floor=o),e&&(i.currency=e),t&&o&&"USD"===e&&(i.floor=Math.max(t,parseFloat(o)))}else t&&(i.floor=t);return i}(f,g.bidfloor,e),C=function(e){const t=["uid","eid","lipbid","envelope"];return Object.keys(e).reduce((function(n,r){const i=e[r];switch(typeof i){case"string":n[r]=i;break;case"object":const e=t.filter((e=>i.hasOwnProperty(e)));e.length&&(n[r]=i[e[0]])}return n}),{})}(b),T=h(y,"ext.data.pbadslot")||h(y,"ext.data.adserver.adslot");let E=[1,1],S={};const x=new Date,A=x.getTime(),_=x.getTimezoneOffset();if(S.lt=A,S.to=_,b&&b.pubProvidedId){let e=function(e,t){let n=JSON.stringify(e);if(n.length<=1800)return n;{const t=e.slice(0,Math.floor(e.length*(1800/n.length)));return n=JSON.stringify(t),n}}(b.pubProvidedId.filter((e=>za.includes(e.source))));S.pubProvidedId=e}b&&b.id5id&&b.id5id.uid&&b.id5id.ext&&(S.id5Id=b.id5id.uid||null,S.id5IdLinkType=b.id5id.ext.linkType||null),v&&(S.aun=v);for(const e in C)S[e]=C[e];if(f.banner?E=f.banner.sizes:f.video&&(E=f.video.playerSize,S=function(e){const{minduration:t,maxduration:n,linearity:r,startdelay:i,placement:o,plcmt:s,protocols:a=[],playerSize:d=[]}=e,c=pe(d),[l,u]=c[0]&&c[0].split("x");let p="";a.length&&(p=a.join(","));const f={mind:t,maxd:n,li:r,sd:i,pt:o,pr:p,viw:l,vih:u};return null!=s&&(f.vplcmt=s),f}(f.video)),T&&(S.gpid=T),Wa&&(S.pv=Wa),w&&(S.fp=w,S.fpc=I),g.iriscat&&"string"==typeof g.iriscat&&(S.iriscat=g.iriscat),g.irisid&&"string"==typeof g.irisid&&(S.irisid=g.irisid),g.zone||g.pubId)if(g.zone?S.t=g.zone:S.pubId=g.pubId,S.pi=2,g.slot){const[e,t]=Ja(E);S.maxw=e,S.maxh=t,S.si=g.slot,S.pi=3,S.bf=E.reduce(((e,t)=>`${e}${e&&","}${t[0]}x${t[1]}`),"")}else g.native?(S.ni=g.native,S.pi=5):f.video?S.pi=2===f.video.linearity?6:7:g.product&&"skins"===g.product.toLowerCase()&&(S.pi=8);else S=Ma(Ma({},S),function(e,t){const n={};if(e.inScreenPubID&&(n.pubId=e.inScreenPubID,n.pi=2),e.inScreen&&(n.t=e.inScreen,n.pi=2),e.inSlot){const[r,i]=Ja(t);n.maxw=r,n.maxh=i,n.si=e.inSlot,n.pi=3,n.bf=t.reduce(((e,t)=>`${e}${e&&","}${t[0]}x${t[1]}`),"")}return e.ICV&&(n.ni=e.ICV,n.pi=5),e.videoPubID&&(n.pubId=e.videoPubID,n.pi=7),e.video&&(n.t=e.video,n.pi=7),e.inVideo&&(n.t=e.inVideo,n.pi=6),n}(g,E));r&&(S.gdprApplies=r.gdprApplies?1:0),S.gdprApplies&&(S.gdprConsent=r.consentString),i&&(S.uspConsent=i),o?(S.gppString=t.gppConsent.gppString?t.gppConsent.gppString:"",S.gppSid=Array.isArray(t.gppConsent.applicableSections)?t.gppConsent.applicableSections.join(","):""):!o&&(null==(l=null==(c=null==t?void 0:t.ortb2)?void 0:c.regs)?void 0:l.gpp)&&(S.gppString=t.ortb2.regs.gpp,S.gppSid=Array.isArray(t.ortb2.regs.gpp_sid)?t.ortb2.regs.gpp_sid.join(","):""),a&&(S.coppa=a),m&&m.nodes&&(S.schain=function(e){let t=`${e.ver},${e.complete}`;return e.nodes.map((e=>{t+=`!${encodeURIComponent(e.asi||"")},`,t+=`${encodeURIComponent(e.sid||"")},`,t+=`${encodeURIComponent(e.hp||"")},`,t+=`${encodeURIComponent(e.rid||"")},`,t+=`${encodeURIComponent(e.name||"")},`,t+=`${encodeURIComponent(e.domain||"")}`})),t}(m)),n.push({id:p,tmax:s,tId:null==(u=null==y?void 0:y.ext)?void 0:u.tid,pi:S.pi,selector:g.selector,sizes:E,url:"https://g2.gumgum.com/hbid/imp",method:"GET",data:Object.assign(S,Ha(d))})})),n},interpretResponse:function(e,t){const n=[],r=e.body;if(!r||r.err){const e=t.data||{},n=e.si||e.ni||e.t||e.pubId,i=r?r.err.drt:18e5;Ga[n]={productId:e.pi,timestamp:(new Date).getTime()},setTimeout((,i),ve(`[GumGum] Please check the implementation for ${n}`)}const{ad:{price:i,id:o,markup:s,cur:d,width:c,height:l,maxw:u,maxh:p},cw:f,pag:{pvid:g},jcsi:m,meta:{adomain:b,mediaType:h}}=Object.assign({ad:{price:0,id:0,markup:"",width:0,height:0},pag:{pvid:0},meta:{adomain:[],mediaType:""}},r);let y=t.data||{},v=y.pi,I=6===v||7===v?ji:Pi,w=3===v&&9===y.si,C={advertiserDomains:b||[],mediaType:h||I},T=pe(t.sizes);if(u&&p)T=[`${u}x${p}`];else if(5===v&&a(T,"1x1"))T=["1x1"];else if(2===v&&a(T,"1x1")){const e=t.sizes&&t.sizes.reduce(((e,t)=>{const[n,r]=t;return c!==n&&l!==r||e.push(t.join("x")),e}),[])||[];T=e.length?e:pe(t.sizes)}let[E,S]=T[0].split("x");var x,A;return m&&(r.jcsi=Va),Wa=g,o&&n.push((x=Ma({ad:f?Ka(f,Object.assign({},r,{bidRequest:t})):s},I===ji&&{ad:s,vastXml:s}),A={mediaType:I,cpm:w?.1:i,creativeId:o,currency:d||"USD",height:S,netRevenue:!0,requestId:t.id,ttl:60,width:E,meta:C},Ua(x,ja(A)))),n},getUserSyncs:function(e,t){return t.map((e=>e.body&&e.body.pxs&&e.body.pxs.scr||[])).reduce((,[]).map((e=>({type:"f"===e.t?"iframe":"image",url:e.u})))},supportedMediaTypes:[Pi,ji]};function Ya(e){const t=function(e){let t;return ze()&&(t=d(window.googletag.pubads().getSlots(),e))),t}(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}rr(Xa),s("gumgumBidAdapter");var Qa=Object.defineProperty,Za=Object.getOwnPropertySymbols,ed=Object.prototype.hasOwnProperty,td=Object.prototype.propertyIsEnumerable,nd=(e,t,n)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rd=(e,t)=>{for(var n in t||(t={}))ed.call(t,n)&&nd(e,n,t[n]);if(Za)for(var n of Za(t))td.call(t,n)&&nd(e,n,t[n]);return e};const id="ix",od="roundel",sd=[Pi,ji,Ui],ad=[144,144],dd={JPY:1},cd={PBJS:"p",IX:"x"},ld={BID_SIZE_INVALID_FORMAT:1,BID_SIZE_NOT_INCLUDED:2,PROPERTY_NOT_INCLUDED:3,SITE_ID_INVALID_VALUE:4,BID_FLOOR_INVALID_FORMAT:5,IX_FPD_EXCEEDS_MAX_SIZE:6,EXCEEDS_MAX_SIZE:7,PB_FPD_EXCEEDS_MAX_SIZE:8,VIDEO_DURATION_INVALID:9},ud={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},pd={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","utiq.com":"","criteo.com":"","euid.eu":"","intimatemerger.com":"","33across.com":"","liveintent.indexexchange.com":"","google.com":""},fd=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],gd=["mimes","minduration","maxduration"],md=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],bd="ixdiag",hd=`${id}_features`;let yd=!1;const vd=ki({bidderCode:id}),Id={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat"],featureToggles:{},isFeatureEnabled:getFeatureToggles:function(){if(vd.localStorageIsEnabled()){const e=vd.getDataFromLocalStorage(hd));h(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:clearFeatureToggles:;let wd=0,Cd="",Td="",Ed=!1;function Sd(e){const t=xd(e,ji),n=h(e,"mediaTypes.video"),r=h(e,"params.video");if(Rd(n,r).length)return{};t.video=r?We(e.params.video):{};let i=h(e,"ortb2Imp.ext.tid");i&&ht(t,"ext.tid",i),function(e,t){if(h(t,"mediaTypes.video.context")===In){let n=h(t,"mediaTypes.video.renderer");if(n||(n=h(t,"renderer")),h(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(n&&"object"==typeof n){if(void 0!==n.url){let t="";try{t=new URL(n.url).hostname}catch(e){return}t.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=n.url}}else e.displaymanager="ix"}}(t,e),$d(t,e);for(const e in n)-1===md.indexOf(e)||t.video.hasOwnProperty(e)||(t.video[e]=n[e]);if(t.video.minduration>t.video.maxduration)return Ie(`IX Bid Adapter: video minduration [${t.video.minduration}] cannot be greater than video maxduration [${t.video.maxduration}]`,{bidder:id,code:ld.VIDEO_DURATION_INVALID}),{};const o=r&&r.context||n&&n.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!st(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&(ve(`IX Bid Adapter: video.plcmt [${e.video.plcmt}] must be an integer between 1-4 inclusive`),delete e.video.plcmt)}(t),o&&!t.video.hasOwnProperty("placement")&&(o===wn?t.video.placement=1:o===In?h(r,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,Ed=!0):ve(`IX Bid Adapter: Video context '${o}' is not supported`)),!t.video.w||!t.video.h){const n=Bd(h(t,"video.playerSize"))||Bd(h(e,"params.size"));if(!n)return ve("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=n[0],t.video.h=n[1]}return Ad(e,t,ji),t}function xd(e,t){const n={};if(n.id=e.bidId,Xd()&&h(e,"params.externalId")&&ht(n,"ext.externalID",e.params.externalId),h(e,`params.${t}.siteId`)&&!isNaN(Number(e.params[t].siteId)))switch(t){case Pi:ht(n,"ext.siteID",e.params.banner.siteId.toString());break;case ji:ht(n,"ext.siteID",e.params.video.siteId.toString());break;case Ui:ht(n,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&ht(n,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||ht(n,"ext.sid",String(e.params.id)),n}function Ad(e,t,n){let r=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),xe(e.getFloor)){let r="*",o="*";if(n&&Ue(sd,n)){const{w:e,h:i}=t[n];r=n,o=[e,i]}try{i=e.getFloor({mediaType:r,size:o})}catch(e){ve("priceFloors module call getFloor failed, error : ",e)}}let o=!1;i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,ht(t,"ext.fl",cd.PBJS),o=!0):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,ht(t,"ext.fl",cd.IX),o=!0),o&&(n==Pi?(ht(t,"banner.ext.bidfloor",t.bidfloor),ht(t,"banner.ext.fl",t.ext.fl)):n==ji?(ht(t,"video.ext.bidfloor",t.bidfloor),ht(t,"video.ext.fl",t.ext.fl)):(ht(t,"native.ext.bidfloor",t.bidfloor),ht(t,"native.ext.fl",t.ext.fl)))}function _d(e,t,n){const r={},i=!(!h(e,"exp")||!st(e.exp)),o=h(e,"dealid")||h(e,"ext.dealid");dd.hasOwnProperty(t)?r.cpm=e.price/dd[t]:r.cpm=e.price/100,r.requestId=e.impid,o&&(r.dealId=o),r.netRevenue=!0,r.currency=t,r.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(r.vastUrl=e.ext.vasturl):r.vastXml=e.adm;let s=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{s=JSON.parse(e.adm)}catch(e){ve("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(r.width=n.video.w,r.height=n.video.h,r.mediaType=ji,r.mediaTypes=n.mediaTypes,r.ttl=i?e.exp:3600):s&&s.native?(r.native={ortb:s.native},r.width=e.w?e.w:1,r.height=e.h?e.h:1,r.mediaType=Ui,r.ttl=i?e.exp:3600):(r.ad=e.adm,r.width=e.w,r.height=e.h,r.mediaType=Pi,r.ttl=i?e.exp:300),r.meta={},r.meta.networkId=h(e,"ext.dspid"),r.meta.brandId=h(e,"ext.advbrandid"),r.meta.brandName=h(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(r.meta.advertiserDomains=e.adomain),r}function Od(e){return Array.isArray(e)&&2===e.length&&st(e[0])&&st(e[1])}unction Rd(e,t){const n=[];e||ve("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(let r of gd){const i=e&&e.hasOwnProperty(r),o=t&&t.hasOwnProperty(r);i||o||n.push(`IX Bid Adapter: ${r} is not included in either the adunit or params level`)}const r=e&&e.hasOwnProperty("protocol"),i=e&&e.hasOwnProperty("protocols"),o=t&&t.hasOwnProperty("protocol"),s=t&&t.hasOwnProperty("protocols");return r||i||o||s||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function Bd(e=[]){return Od(e)?e:!!Od(e[0])&&e[0]}function Dd(e,t,n){if(e)return rd(rd({},d(n,(t=>t.bidId===e))),d(t,(t=>t.id===e)))}function Ud(e,t,n,r){let i="https://htlb.casalemedia.com/openrtb/pbjs",o=function(e){let t=[],n={};if(_e(e))for(const r of e)pd.hasOwnProperty(r.source)&&h(r,"uids.0")&&(n[r.source]=!0,""!=pd[r.source]&&(r.uids[0].ext={rtiPartner:pd[r.source]}),delete r.uids[0].atype,t.push(r));return{toSend:t,seenSources:n}}(h(e,"0.userIdAsEids")),s=o.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&s,o),t&&t.bidderCode===od&&!o.seenSources["liveramp.com"])return[];const a=[];let d=e);d=function(e,t){return t.length>0&&(e.ext.features={},t.forEach(()),e}(d,Id.REQUESTED_FEATURE_TOGGLES);let c=function(e,t){var n=e.map((e=>e.adUnitCode)).filter(();let r={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"8.31.0",userIds:Md(e[0]),url:window.location.href.split("?")[0],vpd:Ed,ae:t};for(let t of n){let n=e.filter((e=>e.adUnitCode===t))[0];h(n,"mediaTypes")&&(Object.keys(n.mediaTypes).length>1&&r.mfu++,h(n,"mediaTypes.native")&&r.nu++,h(n,"mediaTypes.banner")&&r.bu++,"outstream"===h(n,"mediaTypes.video.context")&&(r.ou++,Jd(n)&&(r.ren=!0)),"instream"===h(n,"mediaTypes.video.context")&&r.iu++,r.allu++)}return r}(e,h(t,"fledgeEnabled"));for(var l in c)d.ext.ixdiag[l]=c[l];d=function(e,t,n,r,i){var o,s;const a=h(t,"timeout");a&&(e.ext.ixdiag.tmax=a),O.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=O.getConfig("userSync").syncsPerBidder);const d=function(){if(!vd.localStorageIsEnabled())return;const e={};let t;try{t=JSON.parse(vd.getDataFromLocalStorage(bd)||"{}")}catch(e){return Ie("ix can not read ixdiag from localStorage."),null}return Object.keys(t).forEach((),e}();return Re(d)||(e.ext.ixdiag.err=d),e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:null==(s=null==(o=null==t?void 0:t.ortb2)?void 0:o.source)?void 0:s.tid},r[0].schain&&(e.source.ext={},e.source.ext.schain=r[0].schain),i.length>0&&(e.user={},e.user.eids=i),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e}(d,t,n,e,s),d=function(e,t){if(t){t.gdprConsent&&(Cd=t.gdprConsent,Cd.hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:Cd.gdprApplies?1:0}}),Cd.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:Cd.consentString||""},Cd.hasOwnProperty("addtlConsent")&&Cd.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:Cd.addtlConsent}))),t.uspConsent&&(ht(e,"regs.ext.us_privacy",t.uspConsent),Td=t.uspConsent);const n=h(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&(ht(e,"regs.gpp",t.gppConsent.gppString),ht(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return O.getConfig("coppa")&&ht(e,"regs.coppa",1),e}(d,t);let u={};e[0].params.siteId&&(wd=e[0].params.siteId,u.s=wd);const p=Object.keys(n);let f=!1;for(let r=0;r<p.length&&!(a.length>=4);r++){d=jd(n,p,d,r);const o=h(t,"ortb2")||{},s=rd({},o.site||o.context);s.page=Pd(t);const c=rd({},o.user);Re(o)||f||(d=Nd(t,d,o,s,c),d.site=gt({},d.site,s),d.user=gt({},d.user,c),f=!0),d=qd(n,d,p,r);const l=r===p.length-1;if(d=tc(d),d=Qd(d),d=Zd(d),l){let t=`${i}?`;0!==wd&&(t+=`s=${wd}`),Xd()&&(t+=0!==wd?"&":"",t+=`p=${O.getConfig("exchangeId")}`),a.push({method:"POST",url:t,data:We(d),option:{contentType:"text/plain"},validBidRequests:e}),d.imp=[],f=!1}}return a}function jd(e,t,n,r){const i=e[t[r]],{missingImps:o=[],ixImps:s=[]}=i,a={ixImps:s,missingBannerImpressions:o},d=Object.keys(a).map((e=>a[e])).filter((e=>Array.isArray(e))).reduce((,[]),c=e[t[r]].gpid,l=e[t[r]].dfp_ad_unit_code,u=e[t[r]].tid,p=e[t[r]].sid,f=e[t[r]].ae,g=d.filter((),m=d.filter(();if(g.length>0){const i=g.reduce((,{});for(const o in i){const s=i[o],{id:a,banner:{topframe:d}}=s[0];let g=h(s[0],"ext.externalID");const m={id:a,banner:{topframe:d,format:s.map(()}};for(let e=0;e<m.banner.format.length;e++)null!=m.banner.format[e].ext&&(null!=m.banner.format[e].ext.sid&&delete m.banner.format[e].ext.sid,null!=m.banner.format[e].ext.externalID&&delete m.banner.format[e].ext.externalID),"bidfloor"in s[e]&&(m.banner.format[e].ext.bidfloor=s[e].bidfloor),"{}"===JSON.stringify(m.banner.format[e].ext)&&delete m.banner.format[e].ext;const b=e[t[r]].pos;st(b)&&(m.banner.pos=b),(l||c||u||p||f||g)&&(m.ext={},m.ext.dfp_ad_unit_code=l,m.ext.gpid=c,m.ext.tid=u,m.ext.sid=p,m.ext.externalID=g,1==f&&(m.ext.ae=1)),"bidfloor"in s[0]&&(m.bidfloor=s[0].bidfloor),"bidfloorcur"in s[0]&&(m.bidfloorcur=s[0].bidfloorcur);const y=e[t[r]].adUnitFPD;y&&ht(m,"ext.data",y),n.imp.push(m)}}return m.length>0&&m.forEach((e=>{if(c&&ht(e,"ext.gpid",c),n.imp.length>0){let t=!1;n.imp.forEach((),t||n.imp.push(e)}else n.imp.push(e)})),n}function Pd(e){const t=e&&e.bidderCode||"ix",n=O.getConfig(t);let r="";return r=h(e,"ortb2.site.page")?e.ortb2.site.page:h(e,"refererInfo.page"),n&&"object"==typeof n.firstPartyData?function(e,t,n){let r;try{r=new URL(t)}catch(n){ve(`IX Bid Adapter: Invalid URL set in ortb2.site.page: ${t}. Using referer URL instead.`),r=new URL(h(e,"refererInfo.page"))}const i=new URLSearchParams(r.search);for(const[e,t]of Object.entries(n))i.has(e)||i.append(e,t);return r.search=i.toString(),r.toString()}(e,r,n.firstPartyData):r}function Nd(e,t,n,r,i){if(t.ext.ixdiag.fpd=!0,Object.keys(r).forEach((e=>{-1===ud.SITE.indexOf(e)&&delete r[e]})),Object.keys(i).forEach((),n.device){const e=rd({},n.device.sua);Re(e)||ht(t,"device.sua",e)}return n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&ht(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&ht(t,"regs.gpp_sid",n.regs.gpp_sid)),t}tion Ld(e,t){const n=function(e){const t=xd(e,Ui),n=e.nativeOrtbRequest;n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"};let r=h(e,"ortb2Imp.ext.tid");return r&&ht(t,"ext.tid",r),$d(t,e),Ad(e,t,Ui),t}(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=h(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=h(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=h(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=h(e,"params.tagId");const r=e.adUnitCode,i=document.getElementById(r)?r:Ya(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function Vd(e,t){const n=Sd(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=h(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=h(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=h(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=h(e,"params.tagId");const r=e.adUnitCode,i=document.getElementById(r)?r:Ya(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function zd(e,t,n,r){let i=function(e){const t=xd(e,Pi);t.banner={},t.adunitCode=e.adUnitCode;const n=h(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=He()?0:1,Ad(e,t,Pi),t}(e);const o=kd(h(e,"mediaTypes.banner.sizes"),h(e,"params.size"));if(n.hasOwnProperty(e.adUnitCode)||(n[e.adUnitCode]={}),n[e.adUnitCode].gpid=h(e,"ortb2Imp.ext.gpid"),n[e.adUnitCode].dfp_ad_unit_code=h(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.adUnitCode].tid=h(e,"ortb2Imp.ext.tid"),n[e.adUnitCode].pbadslot=h(e,"ortb2Imp.ext.data.pbadslot"),n[e.adUnitCode].tagId=h(e,"params.tagId"),n[e.adUnitCode].pos=h(e,"mediaTypes.banner.pos"),h(r,"fledgeEnabled")){const t=h(e,"ortb2Imp.ext.ae");t?st(t)?n[e.adUnitCode].ae=t:ve("error setting auction environment flag - must be an integer"):1==h(r,"defaultForSlots")&&(n[e.adUnitCode].ae=1)}const s=h(e,"ortb2Imp.ext.data");s&&(n[e.adUnitCode].adUnitFPD=s);const a=h(e,"params.id");!a||"string"!=typeof a&&"number"!=typeof a||(n[e.adUnitCode].sid=String(a));const d=e.adUnitCode,c=document.getElementById(d)?d:Ya(d).divId;n[e.adUnitCode].adUnitCode=d,n[e.adUnitCode].divId=c,o&&(n[e.adUnitCode].hasOwnProperty("ixImps")||(n[e.adUnitCode].ixImps=[]),n[e.adUnitCode].ixImps.push(i)),function(e,t,n){if(t.hasOwnProperty(e.adUnitCode)){let n=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(n=t[e.adUnitCode].missingSizes),Fd(n,e.params.size),t[e.adUnitCode].missingSizes=n}else if(h(e,"mediaTypes.banner.sizes")){let r=We(e.mediaTypes.banner.sizes);Fd(r,e.params.size);let i={missingSizes:r,impression:n};t[e.adUnitCode]=i}}(e,t,i)}unction Wd(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===id&&function(e){if(!vd.localStorageIsEnabled())return;let t;try{t=JSON.parse(vd.getDataFromLocalStorage(bd)||"{}")}catch(e){ve("ix can not read ixdiag from localStorage.")}const n=new Date;if(Object.keys(t).map((),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===id){const r=n.toISOString().slice(0,10),i=e.arguments[1].code;i&&(t[r]=t[r]||{},Number(t[r][i])||(t[r][i]=0),t[r][i]++)}vd.setDataInLocalStorage(bd,JSON.stringify(t))}(e)}function Hd(e){e.renderer.push((function(){const t=e.adUnitCode,n=document.getElementById(t)?t:Ya(t).divId;n?window.createIXPlayer(n,e):ve(`IX Bid Adapter: adUnitCode: ${n} not found on page.`)}))}unction Jd(e){if("outstream"!==h(e,"mediaTypes.video.context"))return!1;let t=h(e,"mediaTypes.video.renderer");return t||(t=h(e,"renderer")),!("object"==typeof t&&t.url&&t.render)||t.backupOnly}function Xd(){let e=O.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}unction Qd(e){return e.imp.forEach(((t,n)=>{const r=t.ext;if(null==r)return e;ec(t)<2||Object.keys(r).forEach((i=>{if(Pi in t){const o=t.banner.ext;if(void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].banner.ext[i],void 0!==t.banner.format)for(let o=0;o<t.banner.format.length;o++)null!=t.banner.format[o].ext&&null!=t.banner.format[o].ext[i]&&t.banner.format[o].ext[i]==r[i]&&delete e.imp[n].banner.format[o].ext[i]}if(ji in t){const o=t.video.ext;void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].video.ext[i]}if(Ui in t){const o=t.native.ext;void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].native.ext[i]}}))})),e}function Zd(e){return e.imp.forEach(((t,n)=>{if(null==t.ext)return e;if(!(ec(t)<2)){if(Pi in t){const r=t.banner.ext;if(void 0!==r&&void 0!==r.siteID&&delete e.imp[n].banner.ext.siteID,void 0!==t.banner.format)for(let r=0;r<t.banner.format.length;r++)void 0!==t.banner.format[r].ext&&void 0!==t.banner.format[r].ext.siteID&&(ht(e.imp[n],"ext.siteID",t.banner.format[r].ext.siteID),ht(e,"ext.ixdiag.usid",!0),delete e.imp[n].banner.format[r].ext.siteID)}if(ji in t){const r=t.video.ext;void 0!==r&&void 0!==r.siteID&&delete e.imp[n].video.ext.siteID}if(Ui in t){const r=t.native.ext;void 0!==r&&void 0!==r.siteID&&delete e.imp[n].native.ext.siteID}}})),e}({code:id,gvlid:10,aliases:[{code:od,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:sd,isBidRequestValid:function(e){yd||(Dn(y.EVENTS.AUCTION_DEBUG,Wd),Dn(y.EVENTS.AD_RENDER_FAILED,Wd),yd=!0);const t=h(e,"params.video"),n=h(e,"params.size"),r=h(e,"mediaTypes.banner.sizes"),i=h(e,"mediaTypes.video"),o=h(e,"mediaTypes.video.playerSize"),s=e.params.hasOwnProperty("bidFloor"),a=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!Ue(sd,e.mediaType))return ve("IX Bid Adapter: media type is not supported."),!1;if(h(e,"mediaTypes.banner")&&!r)return!1;if(n){const t=Bd(n);if(!t)return Ie("IX Bid Adapter: size has invalid format.",{bidder:id,code:ld.BID_SIZE_INVALID_FORMAT}),!1;if(!kd(e.sizes,t)&&!kd(o,t)&&!kd(r,t))return Ie("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:id,code:ld.BID_SIZE_NOT_INCLUDED}),!1}if(!Xd()&&null==e.params.siteId)return Ie("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return Ie("IX Bid Adapter: siteId must be string or number type.",{bidder:id,code:ld.SITE_ID_INVALID_VALUE}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return Ie("IX Bid Adapter: siteId must valid value",{bidder:id,code:ld.SITE_ID_INVALID_VALUE}),!1}if((s||a)&&!(s&&a&&(d=e.params.bidFloor,c=e.params.bidFloorCur,Boolean("number"==typeof d&&"string"==typeof c&&c.match(/^[A-Z]{3}$/)))))return Ie("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:id,code:ld.BID_FLOOR_INVALID_FORMAT}),!1;var d,c;if(i&&t){const n=Sd(e).video,r=Rd(i,t);if(h(e,"mediaTypes.video.context")===In&&Jd(e)&&n){const e=[h(n,"w"),h(n,"h")];if(!(e[0]>=ad[0]&&e[1]>=ad[1]))return Ie(`IX Bid Adapter: ${e} is an invalid size for IX outstream renderer`),!1}if(r.length)return r.forEach((),!1}return function(e){return void 0===h(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},resetSiteID:buildRequests:function(e,t){const n=[],r={},i={},o={},s={};Id.getFeatureToggles(),e.forEach(();for(let t in s)if(s.hasOwnProperty(t)){let n=s[t].missingSizes;r.hasOwnProperty(t)||(r[t]={}),r[t].hasOwnProperty("missingImps")||(r[t].missingImps=[],r[t].missingCount=0);let i=s[t].impression;for(let o=0;o<n.length;o++){let s=Gd(e[0],i,n[o]);r[t].missingImps.push(s),r[t].missingCount++}}let a=[];return Object.keys(r).length>0&&a.push(r),Object.keys(i).length>0&&a.push(i),Object.keys(o).length>0&&a.push(o),Id.isFeatureEnabled("pbjs_enable_multiformat")?n.push(...Ud(e,t,function(e){const t={};return e.forEach((),t}(a))):(Object.keys(r).length>0&&n.push(...Ud(e,t,r)),Object.keys(i).length>0&&n.push(...Ud(e,t,i)),Object.keys(o).length>0&&n.push(...Ud(e,t,o))),n},interpretResponse:function(e,t){const n=[];let r=null,i=h(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(Id.setFeatureToggles(e),!e.hasOwnProperty("body"))return n;const o=e.body,s=o.seatbid||[];for(let e=0;e<s.length;e++){if(!s[e].hasOwnProperty("bid"))continue;const i=s[e].bid,a=t.data;for(let e=0;e<i.length;e++){const s=Dd(i[e].impid,a.imp,t.validBidRequests);if(r=_d(i[e],o.cur,s),r.mediaType===ji&&Jd(s)){const t=h(o,"ext.videoplayerurl");if(r.renderer=Kd(i[e].bidId,t),!r.renderer)continue}n.push(r)}if(h(a,"ext.ixdiag.err")&&vd.localStorageIsEnabled())try{vd.removeDataFromLocalStorage(bd)}catch(e){Ie("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(i)&&i.length>0))return n;i=i.filter((e=>!!e)||(ve("Malformed auction config detected:",e),!1)));try{return{bids:n,fledgeAuctionConfigs:i}}catch(e){return ve("Error attaching AuctionConfigs",e),n}},transformBidParams:getUserSyncs:function(e,t){const n=[];let r=null;if(t.length>0&&(r=h(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{let e=null;O.getConfig("userSync")&&(e=O.getConfig("userSync").syncsPerBidder),0===e&&(e=r),e=r&&(0===e||e)?r>e?e:r:1;for(let t=0;t<e;t++)n.push({type:"image",url:Yd(e,t)})}return n}}),s("ixBidAdapter");const nc=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[Pi,ji]}),rc=ki({bidderCode:nc.CODE}),ic=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),oc=Object.freeze({USER_DATA:"ortb2.user.data",SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),sc=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),ac=[sc.BROWSERS,sc.MOBILE,sc.MODEL,sc.SOURCE,sc.PLATFORM],dc=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&idx={INDEX}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});let cc,lc,uc;ction mc(e,t,n,r,i){const o=bc._getCrb(),s={crbIDs:o.syncIds||{}};e&&(s.tdID=e),!e&&o.tdID&&(s.tdID=o.tdID),t&&(s.usp=t);try{n&&(s.gdpr={consent:n.consentString||"",applies:!!n.gdprApplies})}catch(e){}if(null!=o.lexId&&(s.kargoID=o.lexId),null!=o.clientId&&(s.clientID=o.clientId),null!=o.optOut&&(s.optOut=o.optOut),null!=r&&(s.sharedIDEids=r),i){const e={};i&&i.consentString&&(e.gppString=i.consentString),i&&i.applicableSections&&(e.applicableSections=i.applicableSections),Re(e)||(s.gpp=e)}return s}const bc={gvlid:nc.GVLID,code:nc.CODE,isBidRequestValid:buildRequests:function(e,t){const n=O.getConfig(ic.KEY),r=n&&n.adServerCurrency?n.adServerCurrency:null,i=[];De(e,(e=>{i.push(function(e){var t,n;const r={id:e.bidId,tid:null==(n=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:n.tid,pid:e.params.placementId,code:e.adUnitCode};null!=e.floorData&&e.floorData.floorMin>0&&(r.floor=e.floorData.floorMin),e.bidRequestsCount>0&&(r.bidRequestCount=e.bidRequestsCount),e.bidderRequestsCount>0&&(r.bidderRequestCount=e.bidderRequestsCount),e.bidderWinsCount>0&&(r.bidderWinCount=e.bidderWinsCount);const i=h(e,"ortb2Imp.ext.gpid")||h(e,"ortb2Imp.ext.data.pbadslot");return i&&(r.fpd={gpid:i}),null!=e.mediaTypes&&(null!=e.mediaTypes.banner&&(r.banner=e.mediaTypes.banner),null!=e.mediaTypes.video&&(r.video=e.mediaTypes.video),null!=e.mediaTypes.native&&(r.native=e.mediaTypes.native)),r}(e))}));const o=e[0],s=h(o,oc.TDID_ADAPTER),a=function(e){var t;return{pageURL:null==(t=null==e?void 0:e.refererInfo)?void 0:t.page,rawCRB:rc.getCookie(dc.KEY),rawCRBLocalStorage:gc(dc.KEY)}}(t),d=Object.assign({},{pbv:"8.31.0",aid:o.auctionId,sid:fc(),url:a.pageURL,timeout:t.timeout,ts:(new Date).getTime(),device:{size:[window.screen.width,window.screen.height]},imp:i,user:mc(s,t.uspConsent,t.gdprConsent,o.userIdAsEids,t.gppConsent)});null!=o.ortb2&&(d.site={cat:o.ortb2.site.cat}),o.schain&&o.schain.nodes&&(d.schain=o.schain),d.user.data=h(o,oc.USER_DATA)||[];const c=lc===window.location.pathname?++uc:(lc=window.location.pathname,uc=0);null!=c&&(d.requestCount=c),null!=r&&r!=ic.US_DOLLAR&&(d.cur=r),null!=a.rawCRB&&(d.rawCRB=a.rawCRB),null!=a.rawCRBLocalStorage&&(d.rawCRBLocalStorage=a.rawCRBLocalStorage);const l=h(o,oc.SOCIAL_CANVAS);null!=l&&(d.socan=l);const u=h(o,oc.SUA);if(u){const e=[];ac.forEach((t=>{const n=u[t];if(n&&("string"!=typeof n||""!==n.trim()))switch(t){case sc.MOBILE&&n<1:case sc.SOURCE&&n<1:break;default:e.push(t)}})),d.device.sua=at(u,e)}const p=null!=gc(dc.PAGE_VIEW_ID),f=null!=gc(dc.PAGE_VIEW_TIMESTAMP),g=null!=gc(dc.PAGE_VIEW_URL),m={};return p&&(m.id=gc(dc.PAGE_VIEW_ID)),f&&(m.timestamp=Number(gc(dc.PAGE_VIEW_TIMESTAMP))),g&&(m.url=gc(dc.PAGE_VIEW_URL)),Re(m)||(d.page=m),Object.assign({},t,{method:nc.REQUEST_METHOD,url:`https://${nc.HOST}${nc.REQUEST_ENDPOINT}`,data:d,currency:r})},interpretResponse:function(e,t){let n=e.body;const r=[];return Re(n)||"object"!=typeof n||Object.entries(n).forEach((e=>{const[n,i]=e;let o={mediaType:i.mediaType&&nc.SUPPORTED_MEDIA_TYPES.includes(i.mediaType)?i.mediaType:Pi};i.metadata&&i.metadata.landingPageDomain&&(o.clickUrl=i.metadata.landingPageDomain[0],o.advertiserDomains=i.metadata.landingPageDomain);const s={requestId:n,cpm:Number(i.cpm),width:i.width,height:i.height,ttl:300,creativeId:i.id,dealId:i.targetingCustom,netRevenue:!0,currency:i.currency||t.currency,mediaType:o.mediaType,meta:o};o.mediaType==ji?i.admUrl?s.vastUrl=i.admUrl:s.vastXml=i.adm:s.ad=i.adm,r.push(s)})),r},getUserSyncs:function(e,t,n,r,i){const o=[],s=pc(),a=bc._getCrb().clientId;var d=n&&n.gdprApplies?1:0,c=n&&n.consentString?n.consentString:"",l=i&&i.consentString?i.consentString:"",u=i&&i.applicableSections&&Array.isArray(i.applicableSections)?i.applicableSections.join(","):"";if("string"==typeof r&&4==r.length&&1==r[0]&&"Y"==r[2])return o;if(e.iframeEnabled&&s&&a)for(let e=0;e<dc.SYNC_COUNT;e++)o.push({type:"iframe",url:dc.SYNC_URL.replace("{UUID}",a).replace("{SEED}",s).replace("{INDEX}",e).replace("{GDPR}",d).replace("{GDPR_CONSENT}",c).replace("{US_PRIVACY}",r||"").replace("{GPP_STRING}",l).replace("{GPP_SID}",u)});return o},supportedMediaTypes:nc.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){null!=e&&e.forEach((e=>{!function(e,t){let n={aid:e,ato:t};try{Ne(pt({protocol:"https",hostname:nc.HOST,pathname:nc.TIMEOUT_ENDPOINT,search:n}))}catch(e){}}(e.auctionId,e.timeout)}))},_getCrb:_getSessionId:fc};rr(bc),s("kargoBidAdapter");var hc=Object.defineProperty,yc=Object.getOwnPropertySymbols,vc=Object.prototype.hasOwnProperty,Ic=Object.prototype.propertyIsEnumerable,wc=(e,t,n)=>t in e?hc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cc=(e,t)=>{for(var n in t||(t={}))vc.call(t,n)&&wc(e,n,t[n]);if(yc)for(var n of yc(t))Ic.call(t,n)&&wc(e,n,t[n]);return e};const Tc={code:"pxyz",aliases:["playgroundxyz"],supportedMediaTypes:[Pi],isBidRequestValid:buildRequests:function(e,t){const n=t.refererInfo.page||t.refererInfo.topmostLocation,r=n.split("/");let i,o;r.length>=3&&(i=r[0],o=r[2]);const s={id:t.bidderRequestId,site:{domain:i+"//"+o,name:o,page:n},device:{ua:navigator.userAgent,language:navigator.language,devicetype:/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)?1:/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)?3:2},imp:e.map(Ec),Regs:{ext:{}}};if(t&&t.gdprConsent){const e=t.gdprConsent.gdprApplies?1:0,n=t.gdprConsent.consentString;ye(`PXYZ: GDPR applies ${e}`),ye(`PXYZ: GDPR consent string ${n}`),s.Regs.ext.gdpr=e,s.User={ext:{consent:n}}}return t&&t.uspConsent&&(ye(`PXYZ: USP Consent ${t.uspConsent}`),s.Regs.ext.us_privacy=t.uspConsent),{method:"POST",url:"https://ads.playground.xyz/host-config/prebid?v=2",data:JSON.stringify(s),bidderRequest:t}},interpretResponse:function(e,{bidderRequest:t}){e=e.body;const n=[];if(!e||e.error){let r=`in response for ${t.bidderCode} adapter`;return e&&e.error&&(r+=`: ${e.error}`,Ie(r)),n}if(!_e(e.seatbid)){let e=`in response for ${t.bidderCode} adapter `;return Ie(e+="Malformed seatbid response"),n}if(!e.seatbid)return n;const r=e.cur||"USD";return e.seatbid.forEach((e=>{e.hasOwnProperty("bid")&&e.bid.forEach((e=>{if(0!==e.price){const t=function(e,t){const{adomain:n}=e;return{requestId:e.impid,mediaType:Pi,cpm:e.price,creativeId:e.adid,ad:e.adm,width:e.w,height:e.h,ttl:300,netRevenue:!0,currency:t,meta:Cc({},n&&n.length>0?{advertiserDomains:n}:{})}}(e,r);n.push(t)}}))})),n},getUserSyncs:;nction xc(e){const t=[];return e.forEach((e=>{t.push({w:parseInt(e[0],10),h:parseInt(e[1],10)})})),t}rr(Tc),s("pxyzBidAdapter");const Ac=new WeakMap;function _c(e){return(e=pe(e)).map(()}const Oc=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),kc={instream:1},Rc={1:Pi,2:ji,4:Ui},Bc=["request","imp","bidResponse","response"],[Dc,Uc,jc,Pc]=Bc,[Nc,$c]=["default","pbs"],qc=new Set(Bc),{registerOrtbProcessor:Mc,getProcessors:Fc}=function(){const e={};return{registerOrtbProcessorgetProcessors:}(),Lc={[Dc]:{fpd:{priority:99,fn(e,t){gt(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:ds("ORTB request")},props:{fn},[Uc]:{fpd:{priority:99,fn,id:{fn,banner:{fn:function(e,t,n){if(n.mediaType&&n.mediaType!==Pi)return;const r=h(t,"mediaTypes.banner");if(r){const t={topframe:!0===He()?0:1};r.sizes&&(t.format=_c(r.sizes)),r.hasOwnProperty("pos")&&(t.pos=r.pos),e.banner=gt(t,e.banner)}}},pbadslot:{fn(e){var t,n,r,i;const o=null==(n=null==(t=e.ext)?void 0:t.data)?void 0:n.pbadslot;o&&"string"==typeof o||null==(i=null==(r=e.ext)?void 0:r.data)||delete i.pbadslot}}},[jc]:{mediaType:{priority:99,fn:,banner:{fn:function({createPixel:e=(}={}){return ()},props:{fn(e,t,n){var r;Object.entries({requestId:null==(r=n.bidRequest)?void 0:r.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter(().forEach((),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain)}}}};c[Uc].video={fn:function(e,t,n){if(n.mediaType&&n.mediaType!==ji)return;const r=h(t,"mediaTypes.video");if(!Re(r)){const t=Object.fromEntries(Object.entries(r).filter(());if(r.playerSize){const e=_c(r.playerSize);e.length>1&&ve("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(t,e[0])}const n=kc[r.context];null!=n&&(t.placement=n),e.video=gt(t,e.video)}}},Lc[jc].video={fn:function(e,t,n){e.mediaType===ji&&(h(n.imp,"video.w")&&h(n.imp,"video.h")&&([e.playerWidth,e.playerHeight]=[n.imp.video.w,n.imp.video.h]),t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl))}};const zc=bt((),Gc={[Pi]:"banner",[Ui]:"native",[ji]:"video"},Wc={[Dc]:{extPrebid:{fn:function(e,t){var n;ht(e,"ext.prebid",gt({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null==(n=e.ext)?void 0:n.prebid)),O.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var t,n;ht(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:o().version},null==(n=null==(t=e.ext)?void 0:t.prebid)?void 0:n.channel))}},extPrebidAliases:{fn:function(e,t,n,{am:r=Si}={}){if(r.aliasRegistry[t.bidderCode]){const n=r.bidderRegistry[t.bidderCode];n&&n.getSpec().skipPbsAliasing||ht(e,`ext.prebid.aliases.${t.bidderCode}`,r.aliasRegistry[t.bidderCode])}}}},[Uc]:{params:{fn:function(e,t,n,{adUnit:r,bidderRequests:i,index:o=yo.index,bidderRegistry:s=Si.bidderRegistry}={}){let a=t.params;const d=s[t.bidder];d&&d.getSpec().transformBidParams&&(r=r||o.getAdUnit(t),i=i||[n.bidderRequest],a=d.getSpec().transformBidParams(a,!0,r,i)),a&&ht(e,`ext.prebid.bidder.${t.bidder}`,a)}},adUnitCode:{fn:function(e,t){const n=t.adUnitCode;n&&ht(e,"ext.prebid.adunitcode",n)}}},[jc]:{mediaType:{fn:function(e,t,n){var r,i;let o=n.mediaType;o||(o=Rc.hasOwnProperty(t.mtype)?Rc[t.mtype]:null==(i=null==(r=t.ext)?void 0:r.prebid)?void 0:i.type,Gc.hasOwnProperty(o)||(o=Pi)),e.mediaType=o},priority:99},videoCache:{fn:function(e,t){if(e.mediaType===ji){let{cacheId:n,url:r}=h(t,"ext.prebid.cache.vastXml")||{};if(!n||!r){const{hb_uuid:e,hb_cache_host:i,hb_cache_path:o}=h(t,"ext.prebid.targeting")||{};e&&i&&o&&(n=e,r=`https://${i}${o}?uuid=${e}`)}n&&r&&Object.assign(e,{videoCacheKey:n,vastUrl:r})}},priority:-10},bidderCode:{fn(e,t,n){var r;e.bidderCode=n.seatbid.seat,e.adapterCode=h(t,"ext.prebid.meta.adaptercode")||(null==(r=n.bidRequest)?void 0:r.bidder)||e.bidderCode}},pbsBidId:{fn(e,t){const n=h(t,"ext.prebid.bidid");Ae(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn(e,t){const n=h(t,"ext.prebid.targeting");ke(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn,pbsWurl:{fn},[Pc]:{serverSideStats:{fn}},Hc=bt(();var Kc=Object.defineProperty,Jc=Object.getOwnPropertySymbols,Xc=Object.prototype.hasOwnProperty,Yc=Object.prototype.propertyIsEnumerable,Qc=(e,t,n)=>t in e?Kc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zc=(e,t)=>{for(var n in t||(t={}))Xc.call(t,n)&&Qc(e,n,t[n]);if(Jc)for(var n of Jc(t))Yc.call(t,n)&&Qc(e,n,t[n]);return e};let el=O.getConfig("rubicon")||{};O.getConfig("rubicon",();var tl={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450"};De(tl,();const nl=function({context:e={},processors:t=zc,overrides:n={},imp:r,request:i,bidResponse:o,response:s}={}){const a=new WeakMap;function d(e,r,i,o){let s;return function(){return null==s&&(s=function(){let s=i.bind(this,function(e,t={}){if(!Ac.has(e)){const t=Object.entries(e);t.sort((),Ac.set(e,t.map((([e,t])=>[e,t.fn])))}const n=Ac.get(e).filter(().map(();return (t()[e]||{},n[e]||{}));return r&&(s=r.bind(this,s)),()),s.apply(this,arguments)}}const c=d(Uc,r,(function(e,t,n){const r={};return e(r,t,n),r}),(function(e,t,n){Ie("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),l=d(Dc,i,(function(e,t,n,r){const i={imp:t};return e(i,n,r),i}),(function(e,t,n,r){throw Ie("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:r}),e})),u=d(jc,o,(,(),p=d(Pc,s,(,();return{toORTB({bidderRequest:t,bidRequests:n,context:r={}}){n=n||t.bids;const i={req:Object.assign({bidRequests:n},e,r),imp:{}};i.req.impContext=i.imp;const o=n.map((n=>{const o=Object.assign({bidderRequest:t,reqContext:i.req},e,r),s=c(n,o);if(null!=s){if(s.hasOwnProperty("id"))return Object.assign(o,{bidRequest:n,imp:s}),i.imp[s.id]=o,s;Ie("Converted ORTB imp does not specify an id, ignoring bid request",n,s)}})).filter(Boolean),s=l(o,t,i.req);return i.req.bidderRequest=t,null!=s&&a.set(s,i),s},fromORTB({request:e,response:t}){const n=a.get(e);if(null==n)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");onst i=Object.fromEntries((e.imp||[]).map(()),o=(t.seatbid||[]).flatMap(().filter(Boolean);return p(o,t,r(n.req))}}}({request(e,t,n,r){var i,s;const{bidRequests:a}=r,d=e(t,n,r);var c;d.cur=["USD"],d.test=O.getConfig("debug")?1:0,ht(d,"ext.prebid.cache",{vastxml:{returnCreative:!0===el.returnVast}}),ht(d,"ext.prebid.bidders",{rubicon:{integration:el.int_type||"pbjs"}}),ht(d,"ext.prebid.targeting.pricegranularity",{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:(c=O).getConfig("customPriceBucket")&&c.getConfig("customPriceBucket").buckets}[c.getConfig("priceGranularity")]});let l=o().installedModules;return!l||l.length&&-1===l.indexOf("rubiconAnalyticsAdapter")||ht(d,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t,n){var r,i;let o={};const s=Ks(n,...t.map((e=>e.params.keywords)));t.forEach((t=>{var n,r,i,s,a;const d={user:{ext:{data:Zc({},t.params.visitor)}},site:{ext:{data:Zc({},t.params.inventory)}}},c=e.imp.find((e=>{var t,n,r,i,o;return null==(o=null==(i=null==(r=null==(n=null==(t=e.ext)?void 0:t.prebid)?void 0:n.bidder)?void 0:r.rubicon)?void 0:i.video)?void 0:o.language}));c&&(d.site.content={language:null==(a=null==(s=null==(i=null==(r=null==(n=c.ext)?void 0:n.prebid)?void 0:r.bidder)?void 0:i.rubicon)?void 0:s.video)?void 0:a.language}),o=gt(o,t.ortb2||{},d);const l=O.getConfig("user.id");o.user.id=o.user.id||l})),gt(e,o),s&&s.length&&ht(e,"site.keywords",s.join(",")),null==(i=null==(r=null==e?void 0:e.ext)?void 0:r.prebid)||delete i.storedrequest}(d,a,n.ortb2),null==(s=null==(i=null==d?void 0:d.ext)?void 0:i.prebid)||delete s.storedrequest,!0===el.disableFloors&&delete d.ext.prebid.floors,a.filter(().length>0&&(d.ext.prebid.floors={enabled:!1}),d},imp(e,t,n){var r,i;const o=dl(t);if(o.includes(Pi)&&1==o.length)return;const s=e(t,n);return s.id=t.adUnitCode,delete s.banner,O.getConfig("s2sConfig.defaultTtl")&&(s.exp=O.getConfig("s2sConfig.defaultTtl")),"atf"===t.params.position&&s.video&&(s.video.pos=1),"btf"===t.params.position&&s.video&&(s.video.pos=3),null==(i=null==(r=s.ext)?void 0:r.prebid)||delete i.storedrequest,!0===t.params.bidonmultiformat&&o.length>1&&ht(s,"ext.prebid.bidder.rubicon.formats",o),function(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){let n=parseFloat(h(e,"params.floor"));isNaN(n)||(t.bidfloor=n,t.bidfloorcur="USD")}}(t,s),s},bidResponse(e,t,n){var r;const i=e(t,n);i.meta.mediaType=h(t,"ext.prebid.type");const{bidRequest:o}=n;let[s,a]="outstream"===(null==(r=o.mediaTypes.video)?void 0:r.context)?sl(o,ji):[void 0,void 0];return i.width=t.w||s||i.playerWidth,i.height=t.h||a||i.playerHeight,i.mediaType===ji&&"outstream"===o.mediaTypes.video.context&&(i.renderer=function(e){const t=Dt.install({id:e.adId,url:el.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:el.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(ol)}catch(e){ve("Prebid Error calling setRender on renderer",e)}return t}(i)),h(t,"ext.bidder.rp.advid")&&ht(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==el.netRevenue,ttl:300},processors:Hc}),rl={code:"rubicon",gvlid:52,supportedMediaTypes:[Pi,ji,Ui],isBidRequestValid:function(e){let t=!0;if("object"!=typeof e.params)return!1;for(let t=0,n=["accountId","siteId","zoneId"];t<n.length;t++)if(e.params[n[t]]=parseInt(e.params[n[t]]),isNaN(e.params[n[t]]))return Ie("Rubicon: wrong format of accountId or siteId or zoneId."),!1;let n=dl(e,!0);if(!n.length)return!1;n.includes(ji)&&(t=function(e){let t=!0,n=Object.prototype.toString.call([]);var r={mimes:n,protocols:n,linearity:Object.prototype.toString.call(0)};return Object.keys(r).forEach((),t}(e));const r=[Pi,Ui].filter((e=>n.includes(e))).length>0;return r?t&&r:t},buildRequests:function(e,t){let n,r=[],i=[];if(n=e.filter((e=>{const t=dl(e)||[],{length:n}=t,{bidonmultiformat:r,video:i}=e.params||{};return 1===n&&(t.includes(ji)||t.includes(Ui))||2===n&&!t.includes(Pi)||i&&t.includes(ji)||r&&(t.includes(ji)||t.includes(Ui))})),n&&n.length){const e=nl.toORTB({bidRequests:n,bidderRequest:t});i.push({method:"POST",url:`https://${el.videoHost||"prebid-server"}.rubiconproject.com/openrtb2/auction`,data:e,bidRequest:n})}const o=e.filter((e=>{const t=dl(e)||[],{bidonmultiformat:n,video:r}=e.params||{};return t.includes(Pi)&&(1===t.length||n||!n&&!r||!n&&r&&!t.includes(ji))}));if(!0!==el.singleRequest)r=i.concat(o.map((e=>{const n=rl.createSlotParams(e,t);return{method:"GET",url:`https://${el.bannerHost||"fastlane"}.rubiconproject.com/a/api/fastlane.json`,data:rl.getOrderedParams(n).reduce(((e,t)=>{const r=n[t];return Ae(r)&&""!==r||Oe(r)?`${e}${ll(t,r)}&`:e}),"")+`slots=1&rand=${Math.random()}`,bidRequest:e}})));else{const e=o.reduce((,{}),n=10;r=i.concat(Object.keys(e).reduce(((r,i)=>{var o,s;return(o=e[i],s=n,o.map(().filter((e=>e))).forEach((e=>{const n=rl.combineSlotUrlParams(e.map(());r.push({method:"GET",url:`https://${el.bannerHost||"fastlane"}.rubiconproject.com/a/api/fastlane.json`,data:rl.getOrderedParams(n).reduce(((e,t)=>{const r=n[t];return Ae(r)&&""!==r||Oe(r)?`${e}${ll(t,r)}&`:e}),"")+`slots=${e.length}&rand=${Math.random()}`,bidRequest:e})})),r}),[]))}return r},getOrderedParams:function(e){const t=/^tg_v/,n=/^tg_i/,r=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter((e=>r.test(e)))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((e=>t.test(e)))).concat(Object.keys(e).filter((e=>n.test(e)))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter(())},combineSlotUrlParams:createSlotParams:function(e,t){var n,r,i,o,s,a,c,l,u,p,f,g;e.startTime=(new Date).getTime();const m=e.params,b=sl(e,"banner"),[y,v]=m.latLong||[],I={account_id:m.accountId,site_id:m.siteId,zone_id:m.zoneId,size_id:b[0],alt_size_ids:b.slice(1).join(",")||void 0,rp_floor:(m.floor=parseFloat(m.floor))>=.01?m.floor:void 0,rp_secure:"1",tk_flint:`${el.int_type||"pbjs_lite"}_v8.31.0`,"x_source.tid":null==(r=null==(n=t.ortb2)?void 0:n.source)?void 0:r.tid,"x_imp.ext.tid":null==(o=null==(i=e.ortb2Imp)?void 0:i.ext)?void 0:o.tid,l_pb_bid_id:e.bidId,o_cdep:null==(c=null==(a=null==(s=e.ortb2)?void 0:s.device)?void 0:a.ext)?void 0:c.cdep,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:m.userId,"p_geo.latitude":isNaN(parseFloat(y))?void 0:parseFloat(y).toFixed(4),"p_geo.longitude":isNaN(parseFloat(v))?void 0:parseFloat(v).toFixed(4),"tg_fl.eid":e.code,rf:il(e,t)};if("function"==typeof e.getFloor&&!el.disableFloors){let t;try{t=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){Ie("Rubicon: getFloor threw an error: ",e)}I.rp_hard_floor="object"!=typeof t||"USD"!==t.currency||isNaN(parseInt(t.floor))?void 0:t.floor}!0===m.bidonmultiformat&&h(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(I.p_formats=Object.keys(e.mediaTypes).join(","));let w={1:"atf",3:"btf"}[h(e,"mediaTypes.banner.pos")]||"";I.p_pos="atf"===m.position||"btf"===m.position?m.position:w;const C=O.getConfig("user.id");return C&&(I.ppuid=C),(null==(u=null==(l=null==e?void 0:e.ortb2Imp)?void 0:l.ext)?void 0:u.ae)&&(I.o_ae=1),e.userIdAsEids&&e.userIdAsEids.forEach((e=>{try{if("adserver.org"===e.source)I.tpid_tdid=e.uids[0].id,I["eid_adserver.org"]=e.uids[0].id;else if("liveintent.com"===e.source)I["tpid_liveintent.com"]=e.uids[0].id,I["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(I["tg_v.LIseg"]=e.ext.segments.join(","));else if("liveramp.com"===e.source)I.x_liverampidl=e.uids[0].id;else if("id5-sync.com"===e.source)I["eid_id5-sync.com"]=`${e.uids[0].id}^${e.uids[0].atype}^${e.uids[0].ext&&e.uids[0].ext.linkType||""}`;else{const t="rubiconproject.com"===e.source?e.uids[0].id:`${e.uids[0].id}^${e.uids[0].atype||""}`;I[`eid_${e.source}`]=t}if(!I.ppuid){const t=d(e.uids,();t&&t.id&&(I.ppuid=t.id)}}catch(t){ve("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(I.gdpr=Number(t.gdprConsent.gdprApplies)),I.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(I.us_privacy=encodeURIComponent(t.uspConsent)),(null==(p=t.gppConsent)?void 0:p.gppString)&&(I.gpp=t.gppConsent.gppString,I.gpp_sid=null==(g=null==(f=t.gppConsent)?void 0:f.applicableSections)?void 0:g.toString()),I.rp_maxbids=t.bidLimit||1,function(e,t,n){const r={user:{ext:{data:Zc({},e.params.visitor)}},site:{ext:{data:Zc({},e.params.inventory)}}};e.params.keywords&&(r.site.keywords=_e(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);let i=gt({},e.ortb2||{},r),o=h(e.ortb2Imp,"ext")||{},s=h(e.ortb2Imp,"ext.data")||{};const a=h(e,"ortb2Imp.ext.gpid"),d={user:[4],site:[1,2,5,6]},c={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},l=function(e,t,r,i=!0){let o=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((e=>e.segment&&h(e,"ext.segtax")&&d[n]&&-1!==d[n].indexOf(h(e,"ext.segtax")))).map(().toString():"object"==typeof e&&!Array.isArray(e)||void 0===e?void 0:Array.isArray(e)?e.filter((e=>{if("object"!=typeof e&&void 0!==e)return e.toString();ve("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString()}(e,r,t),s=c[r]&&i?`${c[r]}`:"data"===r?`${c[t]}iab`:`${c[t]}${r}`;n[s]=n[s]?n[s].concat(",",o):o};if(t===Pi){["site","user"].forEach((),Object.keys(s).forEach((),a&&(n.p_gpid=a),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"];const e=h(i,"device.sua");e&&!1!==el.chEnabled&&at(e,["architecture",e=>n.m_ch_arch=e,"bitness",e=>n.m_ch_bitness=e,"browsers",e=>{var t,r;if(!Array.isArray(e))return;const[i,o]=e.reduce(((e,t)=>{var n,r,i;return e[0].push(`"${null==t?void 0:t.brand}"|v="${null==(n=null==t?void 0:t.version)?void 0:n[0]}"`),e[1].push(`"${null==t?void 0:t.brand}"|v="${null==(i=null==(r=null==t?void 0:t.version)?void 0:r.join)?void 0:i.call(r,".")}"`),e}),[[],[]]);n.m_ch_ua=null==(t=null==i?void 0:i.join)?void 0:t.call(i,","),n.m_ch_full_ver=null==(r=null==o?void 0:o.join)?void 0:r.call(o,",")},"mobile","model","platform",e=>{var t,r;n.m_ch_platform=null==e?void 0:e.brand,n.m_ch_platform_ver=null==(r=null==(t=null==e?void 0:e.version)?void 0:t.join)?void 0:r.call(t,".")}])}else Object.keys(o).length&&gt(n.imp[0].ext,o),a&&(n.imp[0].ext.gpid=a),gt(n,i)}(e,Pi,I),!0===O.getConfig("coppa")&&(I.coppa=1),e.schain&&cl(e.schain)&&(I.rp_schain=rl.serializeSupplyChain(e.schain)),I},serializeSupplyChain:serializeSupplyChainNodes:interpretResponse:function(e,t){var n;e=e.body;const{data:r}=t;if(!e||"object"!=typeof e)return[];if(e.seatbid){const t=h(e,"ext.errors.rubicon");return Array.isArray(t)&&t.length>0&&ve("Rubicon: Error in video response"),nl.fromORTB({request:r,response:e}).bids}let i,o=e.ads,s=0;const{bidRequest:a}=t;if("object"==typeof a&&!Array.isArray(a)&&dl(a).includes(ji)&&"object"==typeof o&&(o=o[a.adUnitCode]),!Array.isArray(o)||o.length<1)return[];let d=o.reduce(((t,n,r)=>{if(n.impression_id&&i===n.impression_id?s++:i=n.impression_id,"ok"!==n.status)return t;const o=Array.isArray(a)?a[r-s]:a;if(o&&"object"==typeof o){let e={requestId:o.bidId,currency:"USD",creativeId:n.creative_id||`${n.network||""}-${n.advertiser||""}`,cpm:n.cpm||0,dealId:n.deal,ttl:300,netRevenue:!1!==el.netRevenue,rubicon:{advertiserId:n.advertiser,networkId:n.network},meta:{advertiserId:n.advertiser,networkId:n.network,mediaType:Pi}};n.creative_type&&(e.mediaType=n.creative_type),n.adomain&&(e.meta.advertiserDomains=Array.isArray(n.adomain)?n.adomain:[n.adomain]),n.creative_type===ji?(e.width=o.params.video.playerWidth,e.height=o.params.video.playerHeight,e.vastUrl=n.creative_depot_url,e.impression_id=n.impression_id,e.videoCacheKey=n.impression_id):(e.ad=(d=n.script,`<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='${n.impression_id}'>\n<script type='text/javascript'>${d}<\/script>\n</div>\n</body>\n</html>`),[e.width,e.height]=tl[n.size_id].split("x").map((e=>Number(e)))),e.rubiconTargeting=(Array.isArray(n.targeting)?n.targeting:[]).reduce((,{rpfl_elemid:o.adUnitCode}),t.push(e)}else Ie(`Rubicon: bidRequest undefined at index position:${r}`,a,e);var d;return t}),[]).sort((),c=null==(n=e.component_auction_config)?void 0:n.map(();return c?{bids:d,fledgeAuctionConfigs:c}:d},getUserSyncs:function(e,t,n,r,i){var o;if(!ul&&e.iframeEnabled){let e={};return n&&("boolean"==typeof n.gdprApplies&&(e.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(e.gdpr_consent=n.consentString)),r&&(e.us_privacy=encodeURIComponent(r)),(null==i?void 0:i.gppString)&&(e.gpp=i.gppString,e.gpp_sid=null==(o=i.applicableSections)?void 0:o.toString()),e=Object.keys(e).length?`?${lt(e)}`:"",ul=!0,{type:"iframe",url:`https://${el.syncHost||"eus"}.rubiconproject.com/usync.html`+e}}}};nction sl(e,t){let n=e.params;if(t===ji){let t=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?t=[n.video.playerWidth,n.video.playerHeight]:Array.isArray(h(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?t=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(t=e.sizes[0]),t}let r=[];return Array.isArray(n.sizes)?r=n.sizes:void 0!==h(e,"mediaTypes.banner.sizes")?r=al(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?r=al(e.sizes):ve("Rubicon: no sizes are setup or found"),r)}unction dl(e,t=!1){let n=[];if(function(e){let t=void 0!==h(e,`mediaTypes.${ji}`),n=void 0!==h(e,`mediaTypes.${Pi}`),r=void 0!==h(e,"params.bidonmultiformat"),i="object"!=typeof h(e,"params.video");return!(!t||!r)||(n&&i&&(t=!1),t&&i&&ht(e,"params.video",{}),t)}(e)){if(-1===["outstream","instream"].indexOf(h(e,`mediaTypes.${ji}.context`)))return t&&Ie("Rubicon: mediaTypes.video.context must be outstream or instream"),n;if(sl(e,ji).length<2)return t&&Ie("Rubicon: could not determine the playerSize of the video"),n;t&&he("Rubicon: making video request for adUnit",e.adUnitCode),n.push(ji)}if(void 0!==h(e,`mediaTypes.${Ui}`)&&n.push(Ui),void 0!==h(e,`mediaTypes.${Pi}`)){if(0===sl(e,Pi).length)return t&&Ie("Rubicon: could not determine the sizes for banner request"),n;t&&he("Rubicon: making banner request for adUnit",e.adUnitCode),n.push(Pi)}return n}function cl(e){let t=!1;const n=["asi","sid","hp"];return e.nodes?(t=e.nodes.reduce((,!0),t||Ie("Rubicon: required schain params missing"),t):t}function ll(e,t){return"rp_schain"===e?`rp_schain=${t}`:`${e}=${encodeURIComponent(t)}`}var ul=!1;rr(rl),s("rubiconBidAdapter");var pl=Object.defineProperty,fl=Object.getOwnPropertySymbols,gl=Object.prototype.hasOwnProperty,ml=Object.prototype.propertyIsEnumerable,bl=(e,t,n)=>t in e?pl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hl=(e,t)=>{for(var n in t||(t={}))gl.call(t,n)&&bl(e,n,t[n]);if(fl)for(var n of fl(t))ml.call(t,n)&&bl(e,n,t[n]);return e};const yl="teads",vl=ki({bidderCode:yl}),Il={code:yl,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){let t=!1;if(void 0!==e.params){let n=xl(Le(e.params,"placementId")),r=xl(Le(e.params,"pageId"));t=n&&r}return t||Ie("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var n,r,i,o,s,a;const d=e.map(Sl),c=window.top,l=hl(hl({referrer:wl(t),pageReferrer:document.referrer,pageTitle:Cl().slice(0,300),pageDescription:Tl().slice(0,300),networkBandwidth:(u=window.navigator,u&&u.connection&&u.connection.downlink>=0?u.connection.downlink.toString():""),timeToFirstByte:El(window),data:d,deviceWidth:screen.width,screenOrientation:null==(n=screen.orientation)?void 0:n.type,historyLength:null==(r=c.history)?void 0:r.length,viewportHeight:null==(i=c.visualViewport)?void 0:i.height,viewportWidth:null==(o=c.visualViewport)?void 0:o.width,hardwareConcurrency:null==(s=c.navigator)?void 0:s.hardwareConcurrency,deviceMemory:null==(a=c.navigator)?void 0:a.deviceMemory,hb_version:"8.31.0"},function(e){const t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"};let n={};for(const r in t){const i=h(e,`0.userId.${t[r]}`);i&&(n[r]=i)}return n}(e)),function(e){const t=h(e,"0.userId.teadsId");if(t)return{firstPartyCookieTeadsId:t};if(vl.cookiesAreEnabled(null)){const e=vl.getCookie("_tfpvi",null);if(e)return{firstPartyCookieTeadsId:e}}return{}}(e));var u;const p=e[0];p.schain&&(l.schain=p.schain);let f=t.gdprConsent;if(t&&f){let e="boolean"==typeof f.gdprApplies,t="string"==typeof f.consentString,n=e?f.gdprApplies,f.vendorData):22;l.gdpr_iab={consent:t?f.consentString:"",status:n,apiVersion:f.apiVersion}}t&&t.uspConsent&&(l.us_privacy=t.uspConsent);const g=h(p,"ortb2.device.sua");return g&&(l.userAgentClientHints=g),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(l)}},interpretResponse:;tion Sl(e){var t,n;const r={};let i=Le(e.params,"placementId"),o=Le(e.params,"pageId");const s=h(e,"ortb2Imp.ext.gpid"),a=h(e,"mediaTypes.video.plcmt");return r.sizes=function(e){return pe(function(e){let t=h(e,"mediaTypes.video.playerSize"),n=h(e,"mediaTypes.video.sizes"),r=h(e,"mediaTypes.banner.sizes");return _e(r)||_e(t)||_e(n)?[r,n,t].reduce((,[]):e.sizes}(e))}(e),r.bidId=ue("bidId",e),r.bidderRequestId=ue("bidderRequestId",e),r.placementId=parseInt(i,10),r.pageId=parseInt(o,10),r.adUnitCode=ue("adUnitCode",e),r.transactionId=(null==(n=null==(t=e.ortb2Imp)?void 0:t.ext)?void 0:n.tid)||"",s&&(r.gpid=s),a&&(r.videoPlcmt=a),r}(Il),s("teadsBidAdapter");var _l=Object.defineProperty,Ol=Object.getOwnPropertySymbols,kl=Object.prototype.hasOwnProperty,Rl=Object.prototype.propertyIsEnumerable,Bl=(e,t,n)=>t in e?_l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dl=(e,t)=>{for(var n in t||(t={}))kl.call(t,n)&&Bl(e,n,t[n]);if(Ol)for(var n of Ol(t))Rl.call(t,n)&&Bl(e,n,t[n]);return e};const Ul="triplelift";let jl=null,Pl=null;const Nl=ki({bidderCode:Ul}),$l={gvlid:28,code:Ul,supportedMediaTypes:[Pi,ji],isBidRequestValid:buildRequests:function(e,t){let n="https://tlx.3lift.com/header/auction?",r=function(e,t){var n,r;let i={},{schain:o}=e[0];const s=function(e){const t={},n={},r={},i=e.ortb2||{},o=function(){const e=Nl.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return Ie("Triplelift: error parsing JSON: ",e),null}}(),s=Object.assign({},i.site),a=Object.assign({},i.user);if(o){a.data=a.data||[];try{a.data.push({name:"www.1plusx.com",ext:o})}catch(e){Ie("Triplelift: error adding 1plusX segments: ",e)}}return Vl(n,s),Vl(r,a),Re(n)||(t.context=n),Re(r)||(t.user=r),t}(t);i.imp=e.map((function(e,t){let n={id:t,tagid:e.params.inventoryCode,floor:Ll(e)};return ql(e)&&(n.video=function(e){let t=Dl(Dl({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){ve("Video size not defined",e)}return"instream"===t.context&&(t.placement||(t.placement=1)),"outstream"===t.context&&(t.placement?-1===[3,4,5].indexOf(t.placement)&&(he(`video.placement value of ${t.placement} is invalid for outstream context. Setting placement to 3`),t.placement=3):t.placement=3),t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!Ml(e)&&(n.banner={format:(r=e.sizes,r.filter(Xl).map(())}),Re(e.ortb2Imp)||(n.fpd=function(e){const t={},n={};return Vl(n,e.ext),Re(n)||(t.context=n),t}(e.ortb2Imp),Re(e.ortb2Imp.ext)||(n.ext=Dl({},e.ortb2Imp.ext))),n;var r}));let a=[...(d=[e[0]],Kl(d,"tdid","adserver.org","TDID")),...zl([e[0]]),...Gl([e[0]]),...Wl([e[0]]),...Hl(e[0])];var d;a.length>0&&(i.user={ext:{eids:a}});let c=function(e,t){let n={};return Re(e)||(n.schain=Dl({},e)),Re(t)||(n.fpd=Dl({},t)),n}(o,s);return Re(c)||(i.ext=c),(null==(r=null==(n=null==t?void 0:t.ortb2)?void 0:n.regs)?void 0:r.gpp)&&(i.regs=Object.assign({},t.ortb2.regs)),(null==t?void 0:t.ortb2)&&(i.ext.ortb2=Object.assign({},t.ortb2)),i}(e,t);return n=Al(n,"lib","prebid"),n=Al(n,"v","8.31.0"),t&&t.refererInfo&&(n=Al(n,"referrer",t.refererInfo.page)),t&&t.timeout&&(n=Al(n,"tmax",t.timeout)),t&&t.gdprConsent&&(jl=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies,n=Al(n,"gdpr",jl.toString()),void 0!==t.gdprConsent.consentString&&(Pl=t.gdprConsent.consentString,n=Al(n,"cmp_cs",Pl))),t&&t.uspConsent&&(n=Al(n,"us_privacy",t.uspConsent)),t&&t.fledgeEnabled&&(n=Al(n,"fledge",t.fledgeEnabled)),!0===O.getConfig("coppa")&&(n=Al(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),he("tlCall request built: "+n),{method:"POST",url:n,data:r,bidderRequest:t}},interpretResponse:function(e,{bidderRequest:t}){let n=e.body.bids||[];const r=e.body.paapi||[];if(n=n.map((e=>t,e))),r.length>0){const e=r.map(();return he("Response with FLEDGE:",{bids:n,fledgeAuctionConfigs:e}),{bids:n,fledgeAuctionConfigs:e}}return n},getUserSyncs:function(e,t,n,r,i){let o=e);if(!o)return;let s="https://eb2.3lift.com/sync?";return"image"===o&&(s=Al(s,"px",1),s=Al(s,"src","prebid")),(null!==Pl||jl)&&(s=Al(s,"gdpr",jl),s=Al(s,"cmp_cs",Pl)),r&&(s=Al(s,"us_privacy",r)),i&&(i.gppString&&(s=Al(s,"gpp",i.gppString)),i.applicableSections&&0!==i.applicableSections.length&&(s=Al(s,"gpp_sid",i.applicableSections.filter((e=>Number.isInteger(e))).join(",")))),[{type:o,url:s}]}};ction Ll(e){let t=null;if("function"==typeof e.getFloor)try{const n=e.getFloor({currency:"USD",mediaType:ql(e)?"video":"banner",size:"*"});"object"!=typeof n||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){Ie("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function Vl(e,t){Re(t)||Object.keys(t).forEach(()}function zl(e){return Kl(e,"idl_env","liveramp.com","idl")}function Gl(e){return Kl(e,"criteoId","criteo.com","criteoId")}unction Hl(e){let t=["adserver.org","liveramp.com","criteo.com","pubcid.org"],n=[];return e.userIdAsEids&&e.userIdAsEids.forEach((e=>{try{if(-1===t.indexOf(e.source)){let t=e.uids.map(();n.push({source:e.source,uids:t})}}catch(t){ve(`Triplelift: Error attempting to add ${e} to bid request`,t)}})),n}onst Jl=e=>(t,n,r)=>{let i=!!t&&(Ae(t)?!!t:ke(t)&&!_e(t)&&!Re(t)&&t.id&&Ae(t.id)&&!!t.id);return i||void 0===r[0]||ve(`Triplelift: invalid ${e} userId format`),i};r($l),s("tripleliftBidAdapter");const Yl="ttd";function Ql(e){var t;return{ttdprebid:{ver:"TTD-PREBID-2023.09.05",pbjs:"8.31.0",keywords:(null==(t=e.site)?void 0:t.keywords)?e.site.keywords.split(",").map((e=>e.trim())):[]}}}function Zl(e){var t;let n={};return e.gdprConsent&&"boolean"==typeof e.gdprConsent.gdprApplies&&ht(n,"ext.gdpr",e.gdprConsent.gdprApplies?1:0),e.uspConsent&&ht(n,"ext.us_privacy",e.uspConsent),!0===O.getConfig("coppa")&&(n.coppa=1),(null==(t=e.ortb2)?void 0:t.regs)&&gt(n,e.ortb2.regs),n}function eu(e,t){var n,r;let i={tid:null==(r=null==(n=null==t?void 0:t.ortb2)?void 0:n.source)?void 0:r.tid};return e[0].schain&&ht(i,"ext.schain",e[0].schain),i}function tu(e){const t=navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage;let n={ua:navigator.userAgent,dnt:rt()?1:0,language:t,connectiontype:nu()};return gt(n,e.device),n}unction ru(e,t){let n={};e.gdprConsent&&ht(n,"ext.consent",e.gdprConsent.consentString),Ae(h(e,"bids.0.userId.tdid"))&&(n.buyeruid=e.bids[0].userId.tdid);var r=h(e,"bids.0.userIdAsEids");return r&&r.length&&ht(n,"ext.eids",r),gt(n,t.user),n}function iu(e,t){var n=gt({page:h(e,"refererInfo.page"),ref:h(e,"refererInfo.ref"),publisher:{id:h(e,"bids.0.params.publisherId")}},t.site),r=e.refererInfo.domain;return r&&ht(n,"publisher.domain",r),n}const ou={code:Yl,gvlid:21,aliases:["thetradedesk"],supportedMediaTypes:[Pi,ji],isBidRequestValid:function(e){if(!e||!e.params)return ve(Yl+": Missing bid parameters"),!1;if(!e.params.supplySourceId)return ve(Yl+": Missing required parameter params.supplySourceId"),!1;if(!/^[\w+]+$/.test(e.params.supplySourceId))return ve(Yl+": supplySourceId must only contain alphabetic characters"),!1;if(!e.params.publisherId)return ve(Yl+": Missing required parameter params.publisherId"),!1;if(e.params.publisherId.length>32)return ve(Yl+": params.publisherId must be 32 characters or less"),!1;if(e.params.bidfloor&&isNaN(parseFloat(e.params.bidfloor)))return!1;const t=h(e,"ortb2Imp.ext.gpid");if(!e.params.placementId&&!t)return ve(Yl+": one of params.placementId or gpid (via the GPT module https://docs.prebid.org/dev-docs/modules/gpt-pre-auction.html) must be passed"),!1;const n=h(e,"mediaTypes.banner"),r=h(e,"mediaTypes.video");if(!n&&!r)return ve(Yl+": one of mediaTypes.banner or mediaTypes.video must be passed"),!1;if(r){if(!r.maxduration||!st(r.maxduration))return ve(Yl+": mediaTypes.video.maxduration must be set to the maximum video ad duration in seconds"),!1;if(!r.api||0===r.api.length)return ve(Yl+": mediaTypes.video.api should be an array of supported api frameworks. See the Open RTB v2.5 spec for valid values"),!1;if(!r.mimes||0===r.mimes.length)return ve(Yl+": mediaTypes.video.mimes should be an array of supported mime types"),!1;if(!r.protocols)return ve(Yl+": mediaTypes.video.protocols should be an array of supported protocols. See the Open RTB v2.5 spec for valid values"),!1}return!0},buildRequests:function(e,t){const n=t.ortb2||{};let r={id:t.bidderRequestId,imp:e.map((e=>function(e){let t={id:e.bidId};const n=h(e,"ortb2Imp.ext.gpid")||e.params.placementId;n&&(t.tagid=n);const r=h(e,"mediaTypes.video");let i={};h(e,"mediaTypes.banner")&&(i[Pi]=function(e){const t=function(e){return pe(e).filter((e=>e)).map(().map((e=>({width:parseInt(e[0]),height:parseInt(e[1])})))}(e.mediaTypes.banner.sizes).map((),n=parseInt(h(e,"mediaTypes.banner.pos")),r=h(e,"params.banner.expdir");let i={};n&&(i.pos=n),r&&Array.isArray(r)&&(i.expdir=r);const o=Object.assign({w:t[0].w,h:t[0].h,format:t},i),s=h(e,"ortb2Imp.battr");return s&&(o.battr=s),o}(e)),r&&(i[ji]=function(e){{let t=h(e,"mediaTypes.video.minduration");const n=h(e,"mediaTypes.video.maxduration"),r=h(e,"mediaTypes.video.playerSize"),i=h(e,"mediaTypes.video.api"),o=h(e,"mediaTypes.video.mimes"),s=h(e,"mediaTypes.video.placement"),a=h(e,"mediaTypes.video.plcmt"),d=h(e,"mediaTypes.video.protocols"),c=h(e,"mediaTypes.video.playbackmethod"),l=h(e,"mediaTypes.video.pos"),u=h(e,"mediaTypes.video.startdelay"),p=h(e,"mediaTypes.video.skip"),f=h(e,"mediaTypes.video.skipmin"),g=h(e,"mediaTypes.video.skipafter"),m=h(e,"mediaTypes.video.minbitrate"),b=h(e,"mediaTypes.video.maxbitrate");t&&st(t)||(t=0);let y={minduration:t,maxduration:n,api:i,mimes:o,placement:s,protocols:d};void 0!==r&&(_e(r[0])?(y.w=parseInt(r[0][0]),y.h=parseInt(r[0][1])):Oe(r[0])&&(y.w=parseInt(r[0]),y.h=parseInt(r[1]))),c&&(y.playbackmethod=c),a&&(y.plcmt=a),l&&(y.pos=l),u&&st(u)&&(y.startdelay=u),!p||0!==p&&1!==p||(y.skip=p),f&&st(f)&&(y.skipmin=f),g&&st(g)&&(y.skipafter=g),m&&st(m)&&(y.minbitrate=m),b&&st(b)&&(y.maxbitrate=b);const v=h(e,"ortb2Imp.battr");return v&&(y.battr=v),y}}(e)),Object.assign(t,i);let o=function(e){if(e.params.bidfloor)return e.params.bidfloor;if(!xe(e.getFloor))return null;let t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return ke(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);o&&(t.bidfloor=parseFloat(o),t.bidfloorcur="USD");const s=h(e,"ortb2Imp.secure");return t.secure=Oe(s)?s:1,gt(t,e.ortb2Imp),t}(e))),site:iu(t,n),device:tu(n),user:ru(t,n),at:1,cur:["USD"],regs:Zl(t),source:eu(e,t),ext:Ql(n)};return n&&n.bcat&&(r.bcat=n.bcat),n&&n.badv&&(r.badv=n.badv),n&&n.app&&(r.app=n.app),n&&n.pmp&&(r.pmp=n.pmp),{method:"POST",url:"https://direct.adsrvr.org/bid/bidder/"+t.bids[0].params.supplySourceId,data:r,options:{withCredentials:!0}}},interpretResponse:function(e,t){let n=h(e,"body.seatbid");const r=h(e,"body.cur");if(!n||0===n.length)return[];let i=[],o=h(t,"data.imp");return n.forEach((e=>{e.bid.forEach((e=>{let t=o.find((t=>t.id===e.impid));const n=e.price||0;let s={requestId:e.impid,cpm:n,creativeId:e.crid,dealId:e.dealid||null,currency:r||"USD",netRevenue:!0,ttl:e.ttl||360,meta:{}};e.adomain&&e.adomain.length>0&&(s.meta.advertiserDomains=e.adomain),1===e.ext.mediatype?Object.assign(s,{width:e.w,height:e.h,ad:Je(e.adm,n),mediaType:Pi}):2===e.ext.mediatype&&(Object.assign(s,{width:t.video.w,height:t.video.h,mediaType:ji}),e.nurl?s.vastUrl=Je(e.nurl,n):s.vastXml=Je(e.adm,n)),i.push(s)}))})),i},getUserSyncs:function(e,t,n={},r=""){const i=[];let o=`&gdpr=${n.gdprApplies?1:0}&gdpr_consent=${encodeURIComponent(n.consentString)}`,s=`https://match.adsrvr.org/track/usersync?us_privacy=${encodeURIComponent(r)}${o}`;return e.pixelEnabled?i.push({type:"image",url:s+"&ust=image"}):e.iframeEnabled&&i.push({type:"iframe",url:s+"&ust=iframe"}),i}};rr(ou),s("ttdBidAdapter");var su=Object.defineProperty,au=Object.defineProperties,du=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,lu=Object.prototype.hasOwnProperty,uu=Object.prototype.propertyIsEnumerable,pu=fu=gu=const mu=2;let bu,hu,yu,vu,Iu,wu,Cu=!1;const Tu={iab:function({onSuccess:e,onError:t,onEvent:n}){const r=function({apiName:e,apiVersion:t,apiArgs:n=["command","callback","parameter","version"],callbackArgs:r=["returnValue","success"],mode:i=0},o=window){const s={},a=`${e}Call`,d=`${e}Return`;function c(e){var t;const n="string"==typeof e.data&&e.data.includes(d)?JSON.parse(e.data):e.data;if(null==(t=null==n?void 0:n[d])?void 0:t.callId){const e=n[d];s.hasOwnProperty(e.callId)&&s[e.callId](...r.map((t=>e[t])))}}const[l,u]=function(){let t,n=o,r=!1;for(;null!=n;){try{if("function"==typeof n[e]){t=n,r=!0;break}}catch(e){}try{if(n.frames[`${e}Locator`]){t=n;break}}catch(e){}if(n===o.top)break;n=n.parent}return[t,r]}();if(!l)return;unction f(e,t,n,r){const o="function"==typeof e;return function(s,a){r&&r(),1!==i&&(null==a||a?t:n)(o?void 0:s),o&&e.apply(this,arguments)}}let g;return u?g=function(t={}){return new z(((n,r)=>{const o=l[e](...p(gu(fu({},t),{callback:t.callback||2===i?f(t.callback,n,r):void 0})).map(());(1===i||null==t.callback&&0===i)&&n(o)}))}:(o.addEventListener("message",c,!1),g=function(e,t=!1){return new z(((n,r)=>{const o=Math.random().toString(),d={[a]:gu(fu({},Object.fromEntries(p(e).filter(())),{callId:o})};s[o]=f(null==e?void 0:e.callback,n,r,(t||null==(null==e?void 0:e.callback))&&(),l.postMessage(d,"*"),1===i&&n()}))}),Object.assign(g,{isDirect:u,close)}({apiName:"__tcfapi",apiVersion:mu,apiArgs:["command","version","callback","parameter"]});if(!r)return t("TCF2 CMP not found.");r.isDirect?ye("Detected CMP API is directly accessible, calling it now..."):ye("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),r({command:"addEventListener",callback:function(r,i){ye("Received a response from CMP",r),i?(n(r),!1!==r.gdprApplies&&"tcloaded"!==r.eventStatus&&"useractioncomplete"!==r.eventStatus||xu(r,{onSuccess:e,onError:t})):t("CMP unable to register callback function.  Please check CMP setup.")}})},static:function({onSuccess:e,onError:t}){xu(vu,{onSuccess:e,onError:t})}};function Eu(e){let t,n,r=!1,i=null,o=!1;unction d(t,n,i,...o){s(null),r=!0,$r.setConsentData(t),"function"==typeof e&&e(n,i,...o)}if(!a(Object.keys(Tu),bu))return void d(null,!1,`CMP framework (${bu}) is not a supported framework.  Aborting consentManagement module and resuming auction.`);const c={onSuccess:onError:onEvent:;t=()=>{const e=e=>{d(e,!1,(o?"Timeout waiting for user action on CMP":"CMP did not load")+", continuing auction...")};xu(n,{onSuccess:e,onError:)},Tu[bu](c),null!=Iu&&o||s(hu)}const Su=Qn("gdpr",(function(e,t){var n;n=function(n,r,...i){if(r){let e=ve;n&&(e=Ie,r=`${r} Canceling auction as per consentManagement config.`),e(r,...i)}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():Ie("Error executing bidsBackHandler")):e.call(this,t)},wu?(ye("User consent information already known.  Pulling internally stored information..."),n(!1)):Eu(n)}));function xu(e,{onSuccess:t,onError:n}){!function(){const t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:yu,n=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||n&&Ae(n)))}()?t(Au(e)):n("CMP returned unexpected value during lookup process.",e)}function Au(e){return wu={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:yu},e&&e.addtlConsent&&Ae(e.addtlConsent)&&(wu.addtlConsent=e.addtlConsent),wu.apiVersion=mu,wu}O.getConfig("consentManagement",(e=>function(e){(e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"==typeof e?(Ae(e.cmpApi)?bu=e.cmpApi:(bu="iab",ye("consentManagement config did not specify cmp.  Using system default setting (iab).")),Oe(e.timeout)?hu=e.timeout:(hu=1e4,ye("consentManagement config did not specify timeout.  Using system default setting (10000).")),Iu=Oe(e.actionTimeout)?e.actionTimeout:null,yu=!0===e.defaultGdprScope,ye("consentManagement module has been activated..."),"static"===bu&&(ke(e.consentData)?(vu=e.consentData,null!=(null==vu?void 0:vu.getTCData)&&(vu=vu.getTCData),hu=0):Ie("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Cu||o().requestBids.before(Su,50),Cu=!0,$r.enable(),Eu()):ve("consentManagement (gdpr) config not defined, exiting consent manager")}(e.consentManagement))),ps.before((function(e,t){return e(t.then((e=>{const t=$r.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&ht(e,"regs.ext.gdpr",t.gdprApplies?1:0),ht(e,"user.ext.consent",t.consentString)),e})))})),Mc({type:Dc,name:"gdprAddtlConsent",fn:function(e,t){var n;const r=null==(n=t.gdprConsent)?void 0:n.addtlConsent;r&&"string"==typeof r&&ht(e,"user.ext.ConsentedProvidersSettings.consented_providers",r)}}),s("consentManagement");const _u={ajax:St},Ou=Object.values(y.EVENTS).filter(();const ku=Math.random()<=.01,Ru="https://bids.concert.io/analytics",{EVENTS:{BID_RESPONSE:Bu,BID_WON:Du,AUCTION_END:Uu}}=y;let ju=[],Pu=Object.assign(function({url:e,analyticsType:t,global:n,handler:r}){const i=[];let o,s,a=!1,d=!0;const c=(()=>{let e,t=!1;const n=()=>{if(!t){t=!0;try{let e=0,t=0;for(;i.length>0;){e++;const n=i.length;if(i.shift()(),i.length>=n?t++:t=0,t>=10)return Ie("Detected probable infinite loop, discarding events",i),void(i.length=0)}he(`${s} analytics: processed ${e} events`)}finally{t=!1}}};return )();return Object.defineProperties({track:function({eventType:t,args:i}){"bundle"===this.getAdapterType()&&window[n](r,t,i),"endpoint"===this.getAdapterType()&&function({eventType:t,args:n,callback:r}){_u.ajax(e,r,JSON.stringify({eventType:t,args:n}))}(...arguments)},enqueue:l,enableAnalytics:u,disableAnalytics:function(){Object.entries(o||{}).forEach((),this.enableAnalytics=this._oldEnable?this._oldEnable:u,a=!1},getAdapterType:()=>t,getGlobal:()=>n,getHandler:()=>r,getUrl:()=>e},{enabled:{get:()=>a}});function l({eventType:e,args:t}){i.push((),c()}function u(e){s=null==e?void 0:e.provider;var t=this;if(d="object"!=typeof e||"object"!=typeof e.options||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling),d){const n=(();Pn().forEach((),o=Object.fromEntries(Array.from(n).map((e=>{const t=return Dn(e,t),[e,t]})))}else he(`Analytics adapter for "${n}" disabled by sampling`);this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return he(`Analytics adapter for "${n}" already enabled, unnecessary call to \`enableAnalytics\`.`)},a=!0}}({url:Ru,analyticsType:"endpoint"}),{track({eventType:e,args:t}){switch(e){case Bu:case Du:if("concert"!==t.bidder)break;ju.push(function(e,t){const{adId:n,auctionId:r,cpm:i,creativeId:o,width:s,height:a,timeToRespond:d}=t,[c,l]=function(e){return!e||e.indexOf("|")<0?[null,null]:e.split("|")}(o);return{event:e,concert_rid:l,adId:n,auctionId:r,creativeId:c,position:t.adUnitCode,url:window.location.href,cpm:i,width:s,height:a,timeToRespond:d}}(e,t));break;case Uu:setTimeout((()=>function(){if(Pu.eventsStorage=ju,ju.length)if(ku)try{const e=JSON.stringify(ju);St(Ru,(()=>ju=[]),e,{contentType:"application/json",method:"POST"})}catch(e){he("Concert Analytics error")}else he("Page not included in sample for Concert Analytics")}()),3e3)}}});Pu.originEnableAnalytics=Pu.enableAnalytics,Pu.eventsStorage=[],Pu.enableAnalytics=function(e){Pu.originEnableAnalytics(e)},Si.registerAnalyticsAdapter({adapter:Pu,code:"concert"}),s("concertAnalyticsAdapter");const Nu=new Map;function $u(e){const t={};function n(e){var n;const r=JSON.stringify([null==(n=e.source)?void 0:n.toLowerCase(),e.ext]);t.hasOwnProperty(r)?t[r].uids.push(...e.uids):t[r]=e}return Object.entries(e).forEach((([e,t])=>{t=Array.isArray(t)?t:[t],("pubProvidedId"===e?We(t):t.map((t=>function(e,t){const n=Nu.get(t);if(n&&e){let t={};t.source=xe(n.getSource)?n.getSource(e):n.source;const r=xe(n.getValue)?n.getValue(e):e;if(Ae(r)){const i={id:r,atype:n.atype};if(xe(n.getUidExt)){const t=n.getUidExt(e);t&&(i.ext=t)}if(t.uids=[i],xe(n.getEidExt)){const r=n.getEidExt(e);r&&(t.ext=r)}return t}}return null}(t,e)))).filter(().forEach(n)})),Object.values(t)}const qu=zt("sync",(),Mu="User ID",Fu=Ai,Lu=xi,Vu="_pbjs_id_optout",zu=Ri("userId"),Gu={isAllowed:an};let Wu,Hu,Ku,Ju,Xu,Yu=!1,Qu=[],Zu=[],ep={},tp=[];const np=(()=>{let e;return)();nction op(e,t){const n=e.config.storage,r=e.storageMgr;try{const i=new Date(Date.now()+864e5*n.expires).toUTCString(),o=ke(t)?JSON.stringify(t):t;if(n.type===Fu){const t=ip(e);t(null,o,i),t("_cst",Tp(),i),"number"==typeof n.refreshInSeconds&&t("_last",(new Date).toUTCString(),i)}else n.type===Lu&&(r.setDataInLocalStorage(`${n.name}_exp`,i),r.setDataInLocalStorage(`${n.name}_cst`,Tp()),r.setDataInLocalStorage(n.name,encodeURIComponent(o)),"number"==typeof n.refreshInSeconds&&r.setDataInLocalStorage(`${n.name}_last`,(new Date).toUTCString()))}catch(e){Ie(e)}}function sp(e,t=void 0){const n=e.storageMgr,r=e.config.storage,i=t?`${r.name}_${t}`:r.name;let o;try{if(r.type===Fu)o=n.getCookie(i);else if(r.type===Lu){const e=n.getDataFromLocalStorage(`${r.name}_exp`);""===e?o=n.getDataFromLocalStorage(i):e&&new Date(e).getTime()-Date.now()>0&&(o=decodeURIComponent(n.getDataFromLocalStorage(i)))}"string"==typeof o&&"{"===o.trim().charAt(0)&&(o=JSON.parse(o))}catch(e){Ie(e)}return o}function ap(e,t,n){t=np().fork().startTiming("userId.callbacks.total").stopBefore(t);const r=Ze((,e.length);e.forEach((function(e){const t=rp(e.submodule.name).startTiming("callback").stopBefore(r);try{e.callback((function(r){r?(e.config.storage&&op(e,r),e.idObj=e.submodule.decode(r,e.config),Ep(dp(n))):ye(`${Mu}: ${e.submodule.name} - request id responded with an empty value`),t()}),sp.bind(null,e))}catch(n){Ie(`Error in userID module '${e.submodule.name}':`,n),t()}e.callback=void 0}))}unction cp(e,t,n){return Object.fromEntries(Object.entries(e.reduce(((e,r)=>{const i=t(r);return i&&Object.keys(i).forEach((t=>{var o;const s=null==(o=ep[t])?void 0:o.indexOf(n(r)),a={priority:Oe(s)?s:-1,value:i[t]};if(e[t]){const n=a.priority>e[t].priority?a:e[t];e[t]=n}else e[t]=a})),e}),{})).map(())}onst up={};let pp;function fp(e=bp()||[]){const t=Ju&&e.find((e=>e.source===Ju));if(t&&"string"==typeof h(t,"uids.0.id")){const e=t.uids[0].id.replace(/[\W_]/g,"");if(e.length>=32&&e.length<=150)return e;ve(`User ID - Googletag Publisher Provided ID for ${Ju} is not between 32 and 150 characters - ${e}`)}}const gp=Qn("userId",(function(e,t,{delay:n=z.timeout,getIds:r=Cp}={}){z.race([r().catch((()=>null)),n(Ku)]).then((()=>{(function(e,t){[e].some(()||e.forEach((e=>{e.bids&&_e(e.bids)&&e.bids.forEach((e=>{const n=function(e,t){return Array.isArray(e)&&e.length&&t?lp(e.filter(()):{}}(t,e.bidder);Object.keys(n).length&&(e.userId=n,e.userIdAsEids=$u(n))}))}))})(t.adUnits||o().adUnits,Wu),np().join(Jn(t.metrics),{propagate:!1,includeGroups:!0}),e.call(this,t)}))}));nction hp(e){return $u(function(e,t){if(!Array.isArray(e)||!e.length)return{};const n=lp(e),r=Object.keys(n).find((e=>{const n=Nu.get(e);return(null==n?void 0:n.source)===t||xe(null==n?void 0:n.getSource)&&n.getSource()===t}));return r?{[r]:n[r]}:[]}(Wu,e))[0]}function yp(e,t,n){return pp().then((()=>{let r={};if(xe(n)){ye(`${Mu} - Getting encrypted signal from custom function : ${n.name} & source : ${e} `);const t=n(e);r[e]=t?vp(t):null}else{const n=hp(e);ye(`${Mu} - Getting encrypted signal for eids :${JSON.stringify(n)}`),Re(n)||(r[n.source]=!0===t?vp(n):n.uids[0].id)}return ye(`${Mu} - Fetching encrypted eids: ${r[e]}`),r[e]}))}function vp(e,t=1){let n="";return 1===t&&(n="object"==typeof e?window.btoa(JSON.stringify(e)):window.btoa(e)),`${t}||${n}`}ction Tp(){let e=Number(zr.hash);const t=[];for(;e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}unction Sp(e,t,n=!1){return np().fork().measureTime("userId.init.modules",(function(){if(!t.length)return[];if(t=t.filter((e=>(!e.config.storage||function(e){var t,n;switch(null==(n=null==(t=e.config)?void 0:t.storage)?void 0:n.type){case Lu:if(e.storageMgr.localStorageIsEnabled())return!zu.getDataFromLocalStorage(Vu)||(ye(`${Mu} - opt-out localStorage found, storage disabled`),!1);break;case Fu:if(e.storageMgr.cookiesAreEnabled())return!zu.getCookie(Vu)||(ye(`${Mu} - opt-out cookie found, storage disabled`),!1)}return!1}(e))&&Gu.isAllowed(un,er(Mt,e.config.name)))),!t.length)return ve(`${Mu} - no ID module configured`),[];const r=t.reduce(((e,r)=>rp(r.submodule.name).measureTime("init",(()=>{try{(function(e,t,n){const r=$r.getConsentData();if(e.config.storage){let n,i=sp(e),o=!1;if("number"==typeof e.config.storage.refreshInSeconds){const t=new Date(sp(e,"last"));o=t&&Date.now()-t.getTime()>1e3*e.config.storage.refreshInSeconds}!i||o||t||e)?n=e.submodule.getId(e.config,r,i):"function"==typeof e.submodule.extendId&&(n=e.submodule.extendId(e.config,r,i)),ke(n)&&(n.id&&(op(e,n.id),i=n.id),"function"==typeof n.callback&&(e.callback=n.callback)),i&&(e.idObj=e.submodule.decode(i,e.config))}else if(e.config.value)e.idObj=e.config.value;else{const t=e.submodule.getId(e.config,r,void 0);ke(t)&&("function"==typeof t.callback&&(e.callback=t.callback),t.id&&(e.idObj=e.submodule.decode(t.id,e.config)))}Ep(dp(n))})(r,n,t),e.push(r)}catch(e){Ie(`Error in userID module '${r.submodule.name}':`,e)}return e}))),[]);return r.length&&function(e){let t=ae.setEidPermissions;"function"==typeof t&&_e(e)&&t(function(e){let t=[];return e.filter(().forEach((),t}(e))}(r),r.forEach(xp.bind(null,e)),r}))}onst Ap=new Set([Lu,Fu]);function _p(){var e;e=tp,Nu.clear(),Object.entries(cp(e,(e=>e.eids),(e=>e.name))).forEach(();const t=(n=Zu,Array.isArray(n)?n.reduce(((e,t)=>(!t||Be(t.name)||(t.storage&&!Be(t.storage.type)&&!Be(t.storage.name)&&Ap.has(t.storage.type)||ke(t.value)?e.push(t):t.storage||t.value||e.push(t)),e)),[]):[]);var n;if(!t.length)return;const r=tp.filter(();Qu.splice(0,Qu.length),r.map(().filter(().forEach((e=>Qu.push(e))),!Yu&&Qu.length&&(o().requestBids.before(gp,40),Si.callDataDeletionRequest.before(Op),qu.after((),ye(`${Mu} - usersync config updated for ${Qu.length} submodules: `,Qu.map((e=>e.submodule.name))),Yu=!0)}function Op(e,...t){ye("UserID: received data deletion request; deleting all stored IDs..."),Qu.forEach((e=>{if("function"==typeof e.submodule.onDataDeletionRequest)try{e.submodule.onDataDeletionRequest(e.config,e.idObj,...t)}catch(t){Ie(`Error calling onDataDeletionRequest for ID submodule ${e.submodule.name}`,t)}!function(e){var t,n;let r,i;switch(null==(n=null==(t=e.config)?void 0:t.storage)?void 0:n.type){case Fu:const t=ip(e,zu),n=new Date(Date.now()-864e5).toUTCString();r=i=["","_last","_cst"];break;case Lu:r=i=["","_last","_exp","_cst"]}r&&i.forEach(()}(e)})),e.apply(this,t)}function(e,{delay:t=z.timeout}={}){Ju=void 0,Qu=[],Zu=[],Yu=!1,Wu=[],pp=function({delay:e=z.timeout}={}){const t=G(),n=G();let r,i,o=!1;function s(e){return i=np().fork(),null!=r&&r.reject(up),r=G(),z.race([e,r.promise]).finally(i.startTiming("userId.total"))}let a=Wu,d=Qu;t u=s(z.all([Wt,t.promise]).then(l).then(c(()).then(().then(c(()));return function({refresh:r=!1,submoduleNames:i=null,ready:p=!1}={}){return p&&!o&&(o=!0,t.resolve(),Ku>0?n.resolve():Dn(y.EVENTS.AUCTION_END,()),r&&o&&(u=s(u.catch(().then(l).then(c((()=>{const e=Sp(a,d.filter((),!0).filter(();if(e.length)return new z(()}))))),u}}({delay:t}),null!=Xu&&Xu(),tp=[],Xu=e.getConfig("userSync",(e=>{const t=e.userSync;t&&(Ju=t.ppid,t.userIds&&(Zu=t.userIds,Hu=Oe(t.syncDelay)?t.syncDelay:500,Ku=Oe(t.auctionDelay)?t.auctionDelay:0,_p(),function(e,t){if(e){const n={},r=new Map(t.map(());Object.keys(e).forEach((),ep=n}else ep={}}(t.idPriority,Qu),pp({ready:!0})))})),o().getUserIds=mp,o().getUserIdsAsEids=bp,o().getEncryptedEidsForSource=kp(yp),o().registerSignalSources=Ip,o().refreshUserIds=kp(wp),o().getUserIdsAsync=kp(Cp),o().getUserIdsAsEidBySource=hp}(O),Jt("userId",(function(e){d(tp,()||(tp.push(e),Lr.register(Mt,e.name,e.gvlid),_p(),pp({refresh:!0,submoduleNames:[e.name]}))})),Mc({type:Dc,name:"userExtEids",fn:function(e,t,n){const r=h(n,"bidRequests.0.userIdAsEids");r&&Object.keys(r).length>0&&ht(e,"user.ext.eids",r)}}),s("userId");const Rp="__qca",Bp="11",Dp=["1","10"],Up=["1"],jp=["1"],Pp=$r.getConsentData(),Np=qr.getConsentData(),$p="quantcastId",qp=ki({moduleType:Mt,moduleName:$p});function Mp(e,t=392){if(!window._qevents&&e&&""!=e){var n,r,i=qp.getCookie(Rp),o="0",s=Fp.findRootDomain(),a="";if(!i){var d=(new Date).getTime(),c=new Date(d+864e5*t).toGMTString();i=`B0-${Math.round(2147483647*Math.random())}-${d}`,o="1",qp.setCookie(Rp,i,c,"/",s,null)}n=`&fpan=${o}&fpa=${i}`,r="&gdpr=0",Pp&&"boolean"==typeof Pp.gdprApplies&&Pp.gdprApplies&&(r=`gdpr=1&gdpr_consent=${Pp.consentString}`),Np&&"string"==typeof Np&&(a=`&us_privacy=${Np}`),Ne("https://pixel.quantserve.com/pixel?d="+s+"&client_id="+e+"&a=p-KceJUEvXN48CE"+a+r+n)}}const Fp={name:$p,gvlid:Bp,decode:e=>e,getId(e){let t=qp.getCookie(Rp);if(Fr.getCoppa()||(i=Np)&&"string"==typeof i&&4==i.length&&"Y"==i.charAt(1)&&"Y"==i.charAt(2)||!function(e){return!e||"boolean"!=typeof e.gdprApplies||!e.gdprApplies||!!e.vendorData&&function(e,t=Dp){var n=e.gdprApplies,r=e.purpose,i=e.vendor,o=i&&i.consents&&i.consents[Bp],s=i&&i.legitimateInterests&&i.legitimateInterests[Bp],a=e.publisher?e.publisher.restrictions:{};return!n||t.map(().reduce((,!0)}(e.vendorData)}(Pp)){var n=new Date(0).toUTCString(),r=Fp.findRootDomain();return ye("QuantcastId: Necessary consent not present for Id, exiting QuantcastId"),void qp.setCookie(Rp,"",n,"/",r,null)}var i;const o=e&&e.params||{},s=e&&e.storage||{};var a=o.clientId||"",d=s.expires||392;return"complete"===document.readyState?Mp(a,d):window.addEventListener("load",(),{id:t?{quantcastId:t}:void 0}},eids:{quantcastId:{source:"quantcast.com",atype:1}}};Xt("userId",Fp),s("quantcastIdSystem");const Lp="unifiedId",Vp={name:Lp,gvlid:21,decode:getId(e){const t=e&&e.params||{};if(!t||"string"!=typeof t.partner&&"string"!=typeof t.url)return void Ie("User ID - unifiedId submodule requires either partner or url to be defined");const n=t.url||`https://match.adsrvr.org/track/rid?ttd_pid=${t.partner}&fmt=json`;return{callback:function(e){St(n,{success:t=>{let n;if(t)try{n=JSON.parse(t)}catch(e){Ie(e)}e(n)},error:t=>{Ie(`${Lp}: ID fetch encountered an error`,t),e()}},void 0,{method:"GET",withCredentials:!0})}}},eids:{tdid:{source:"adserver.org",atype:1,getUidExt:}};Xt("userId",Vp),s("unifiedIdSystem");var zp=Object.defineProperty,Gp=Wp=function Hp(e){return!!("object"==typeof e&&null!==e&&e.advertising_token&&e.identity_expires&&e.refresh_from&&e.refresh_token&&e.refresh_expires)}class Kp{sStatusResponsesValidRefreshResponseesponseToRefreshResultallRefreshApi(e){const t=this._baseUrl+"/v2/token/refresh";let n,r;const i=new Promise(();return this._logInfo("Sending refresh request",e),St(t,{success:t=>{try{if(e.refresh_response_key){this._logInfo("Decrypting refresh API response");const i=this.createArrayBuffer(atob(t));window.crypto.subtle.importKey("raw",this.createArrayBuffer(atob(e.refresh_response_key)),{name:"AES-GCM"},!1,["decrypt"]).then((e=>{this._logInfo("Imported decryption key"),window.crypto.subtle.decrypt({name:"AES-GCM",iv:i.slice(0,12),tagLength:128},e,i.slice(12)).then((e=>{const t=String.fromCharCode(...new Uint8Array(e));this._logInfo("Decrypted to:",t);const i=JSON.parse(t),o=this.ResponseToRefreshResult(i);"string"==typeof o?r(o):n(o)}),(e=>this._logWarn("Call to UID2 API failed",e)))}),()}else{this._logInfo("No response decryption key available, assuming unencrypted JSON");const e=JSON.parse(t),i=this.ResponseToRefreshResult(e);"string"==typeof i?r(i):n(i)}}catch(e){r(t)}},error:(e,t)=>{try{this._logInfo("Error status, assuming unencrypted JSON");const e=JSON.parse(t.responseText),i=this.ResponseToRefreshResult(e);"string"==typeof i?r(i):n(i)}catch(t){r(e)}}},e.refresh_token,{method:"POST",customHeaders:{"X-UID2-Client-Version":this._clientVersion}}),i}}class Jp{eadCookie(e){return this._storage.cookiesAreEnabled()?this._storage.getCookie(e):null}eadModuleCookie(){return this.parseIfContainsBraces(this.readCookie(this._storageName))}writeModuleCookieeIfContainsBraces(e){return(null==e?void 0:e.includes("{"))?JSON.parse(e):e}etStoredValueWithFallback(){const e=this._preferLocalStorage?"local storage":"cookie",t=(this._preferLocalStorage?this.readModuleStorage:this.readModuleCookie).bind(this),n=(this._preferLocalStorage?this.writeModuleStorage:this.writeModuleCookie).bind(this),r=(this._preferLocalStorage?this.readModuleCookie:this.readModuleStorage).bind(this),i=t();if(i){if("string"==typeof i){const t=r();if(t&&"object"==typeof t)return this._logInfo(`${e} contained a basic token, but found a refreshable token fallback. Copying the fallback value to ${e}.`),n(t),t}}else{const t=r();if(t)return this._logInfo(`${e} was empty, but found a fallback value.`),"object"==typeof t&&(this._logInfo(`Copying the fallback value to ${e}.`),n(t)),t}return i}}function Xp(e,t,n,r,i,o){return i("UID2 base url provided: ",e),new Kp({baseUrl:e},n,i,o).callRefreshApi(t).then((e=>{i("Refresh endpoint responded with:",e);const n={originalToken:t,latestToken:e.identity};let o=r.getStoredValueWithFallback();return(null==o?void 0:o.originalIdentity)&&(n.originalIdentity=o.originalIdentity),r.storeValue(n),n}))}let Yp;{const e=9;Yp={isCSTGOptionsValid(e,t){if("object"!=typeof e||null===e)return t("CSTG opts must be an object"),!1;const n=e;if("string"!=typeof n.serverPublicKey)return t("CSTG opts.serverPublicKey must be a string"),!1;const r=/^UID2-X-[A-Z]-.+/;return r.test(n.serverPublicKey)?"string"!=typeof n.subscriptionId?(t("CSTG opts.subscriptionId must be a string"),!1):0!==n.subscriptionId.length||(t("CSTG opts.subscriptionId is empty"),!1):(t(`CSTG opts.serverPublicKey must match the regular expression ${r}`),!1)},getValidIdentityisStoredTokenInvalidgenerateTokenAndStore(e,t,r,i,o,s){return Wp(this,null,(function*(){o("UID2 cstg opts provided: ",JSON.stringify(t));const a=new n({baseUrl:e,cstg:t},o,s),d=yield a.generateToken(r);o("CSTG endpoint responded with:",d);const c={originalIdentity:this.encodeOriginalIdentity(r),latestToken:d.identity};return i.storeValue(c),c}))},isStoredTokenFromSameIdentity:(e,t)=>!!e.originalIdentity&&mt(t,e.originalIdentity.salt)===e.originalIdentity.identity,encodeOriginalIdentity(e){const t=Object.values(e)[0],n=Math.floor(Math.random()*Math.pow(2,32));return{identity:mt(t,n),salt:n}}};class t{static isBase64Hashatic normalizeEmail(e){if(!e||!e.length)return;const t=e.trim().toLowerCase();if(t.indexOf(" ")>0)return;const n=this.splitEmailIntoAddressAndDomain(t);if(!n)return;const{address:r,domain:i}=n,o=this.isGmail(i),s=this.normalizeAddressPart(r,o,o);return s?`${s}@${i}`:void 0}static splitEmailIntoAddressAndDomain(e){const t=e.split("@");if(2===t.length&&!t.some(())return{address:t[0],domain:t[1]}}tatic dropExtension(e,t=this.EMAIL_EXTENSION_SYMBOL){return e.split(t)[0]}static normalizeAddressPartGp(t,"EMAIL_EXTENSION_SYMBOL","+"),Gp(t,"EMAIL_DOT","."),Gp(t,"GMAIL_DOMAIN","gmail.com");class n{constructor(e,t,n){this._baseUrl=e.baseUrl,this._serverPublicKey=e.cstg.serverPublicKey,this._subscriptionId=e.cstg.subscriptionId,this._logInfo=t,this._logWarn=n}hasStatusResponse(e){return"object"==typeof e&&e&&e.status}isCstgApiSuccessResponsesCstgApiClientErrorResponse(e){return this.hasStatusResponse(e)&&"client_error"===e.status&&"string"==typeof e.message}isCstgApiForbiddenResponsenerateCstgRequest(e){return Wp(this,null,(function*(){return"email_hash"in e||"phone_hash"in e?e:"email"in e?{email_hash:yield o.hash(e.email)}:"phone"in e?{phone_hash:yield o.hash(e.phone)}:void 0}))}generateToken(e){return Wp(this,null,(function*(){const t=yield this.generateCstgRequest(e);this._logInfo("Building CSTG request for",t);const n=yield i.build(this.stripPublicKeyPrefix(this._serverPublicKey)),r=new TextEncoder,s=Date.now(),{iv:a,ciphertext:d}=yield n.encrypt(r.encode(JSON.stringify(t)),r.encode(JSON.stringify([s]))),c=yield o.exportPublicKey(n.clientPublicKey),l={payload:o.bytesToBase64(new Uint8Array(d)),iv:o.bytesToBase64(new Uint8Array(a)),public_key:o.bytesToBase64(new Uint8Array(c)),timestamp:s,subscription_id:this._subscriptionId};return this.callCstgApi(l,n)}))}callCstgApi(e,t){return Wp(this,null,(function*(){const n=this._baseUrl+"/v2/token/client-generate";let r,i;const s=new Promise(((e,t)=>{r=e,i=t}));return this._logInfo("Sending CSTG request",e),St(n,{success:(e,n)=>Wp(this,null,(function*(){try{const n=o.base64ToBytes(e),s=yield t.decrypt(n.slice(0,12),n.slice(12)),a=(new TextDecoder).decode(s),d=JSON.parse(a);this.isCstgApiSuccessResponse(d)?r({status:"success",identity:d.body}):i(`API error: Response body was invalid for HTTP status 200: ${a}`)}catch(e){i(e)}})),error:(e,t)=>{try{if(400===t.status){const e=JSON.parse(t.responseText);this.isCstgApiClientErrorResponse(e)?i(`Client error: ${e.message}`):i(`API error: Response body was invalid for HTTP status 400: ${t.responseText}`)}else if(403===t.status){const e=JSON.parse(t.responseText);this.isCstgApiForbiddenResponse(t)?i(`Forbidden: ${e.message}`):i(`API error: Response body was invalid for HTTP status 403: ${t.responseText}`)}else i(`API error: Unexpected HTTP status ${t.status}: ${e}`)}catch(t){i(e)}}},JSON.stringify(e),{method:"POST"}),s}))}}const r=class e{tatic build(t){return Wp(this,null,(function*(){const n=yield o.generateKeyPair(e._namedCurve),r=yield o.importPublicKey(t,this._namedCurve),i=yield o.deriveKey(r,n.privateKey);return new e(n.publicKey,i)}))}encrypt(e,t){return Wp(this,null,(function*(){const n=window.crypto.getRandomValues(new Uint8Array(12));return{iv:n,ciphertext:yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:n,additionalData:t},this._sharedKey,e)}}))}decrypt(e,t){return Wp(this,null,(function*(){return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},this._sharedKey,t)}))};Gp(r,"_namedCurve","P-256");let i=r;class o{static base64ToBytes(e){const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)))}static bytesToBase64(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}static generateKeyPair(e){return Wp(this,null,(function*(){const t={name:"ECDH",namedCurve:e};return window.crypto.subtle.generateKey(t,!1,["deriveKey"])}))}static importPublicKey(e,t){return Wp(this,null,(function*(){const n={name:"ECDH",namedCurve:t};return window.crypto.subtle.importKey("spki",this.base64ToBytes(e),n,!1,[])}))}static exportPublicKeytatic deriveKey(e,t){return Wp(this,null,(function*(){return window.crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}))}static hash(e){return Wp(this,null,(function*(){const t=yield window.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return this.bytesToBase64(new Uint8Array(t))}))}}}s("uid2IdSystem_shared");var Qp=Object.defineProperty,Zp=Object.getOwnPropertySymbols,ef=Object.prototype.hasOwnProperty,tf=Object.prototype.propertyIsEnumerable,nf=(e,t,n)=>t in e?Qp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const rf="uid2",of="UID2: ";onst af=sf(ye,of),df=sf(ve,of),cf=ki({moduleType:Mt,moduleName:rf}),lf={name:rf,decodegetId(e,t){var n,r,i,o,s,a,d,c,l,u,p;if(!0===(null==t?void 0:t.gdprApplies))return void df("UID2 is not intended for use where GDPR applies. The UID2 module will not run.");const f={apiBaseUrl:null!=(r=null==(n=null==e?void 0:e.params)?void 0:n.uid2ApiBase)?r:"https://prod.uidapi.com",paramToken:null==(i=null==e?void 0:e.params)?void 0:i.uid2Token,serverCookieName:null!=(a=null==(o=null==e?void 0:e.params)?void 0:o.uid2Cookie)?a:null==(s=null==e?void 0:e.params)?void 0:s.uid2ServerCookie,storage:null!=(c=null==(d=null==e?void 0:e.params)?void 0:d.storage)?c:"localStorage",clientId:"PrebidJS-8.31.0-UID2Module-1.1",internalStorage:"__uid2_advertising_token"};f.cstg=((e,t)=>{for(var n in t||(t={}))ef.call(t,n)&&nf(e,n,t[n]);if(Zp)for(var n of Zp(t))tf.call(t,n)&&nf(e,n,t[n]);return e})({serverPublicKey:null==(l=null==e?void 0:e.params)?void 0:l.serverPublicKey,subscriptionId:null==(u=null==e?void 0:e.params)?void 0:u.subscriptionId},function(e){const t=["emailHash","phoneHash","email","phone"];for(let n of t)if(e.hasOwnProperty(n))return{[n]:e[n]};return{}}(null!=(p=null==e?void 0:e.params)?p:{})),af("UID2 configuration loaded and mapped.",f);const g=function(e,t,n,r){var i,o;let s=null;const a="cookie"!==e.storage,d=new Jp(t,a,e.internalStorage,n);n(`Module is using ${a?"local storage":"cookies"} for internal storage.`);const c=Yp&&Yp.isCSTGOptionsValid(e.cstg,r);c?(n("Module is using client-side token generation."),s=null):e.paramToken?(s=e.paramToken,n("Read token from params",s)):e.serverCookieName&&(s=d.readProvidedCookie(e.serverCookieName),n("Read token from server-supplied cookie",s));let l=d.getStoredValueWithFallback();if(n("Loaded module-stored tokens:",l),l&&"string"==typeof l){if(!s&&!c)return n("Returning legacy cookie value."),{id:l};n("Discarding superseded legacy cookie."),l=null}if(s&&l&&(null==(i=l.originalToken)?void 0:i.advertising_token)!==s.advertising_token&&(n("Server supplied new token - ignoring stored value.",null==(o=l.originalToken)?void 0:o.advertising_token,s.advertising_token),l=null),c){const t=Yp.getValidIdentity(e.cstg,r);if(t&&(l&&Yp.isStoredTokenInvalid(t,l,n,r)&&(l=null),!l||Date.now()>l.latestToken.refresh_expires)){const i=Yp.generateTokenAndStore(e.apiBaseUrl,e.cstg,t,d,n,r);return n("Generate token using CSTG"),{callback:e=>{i.then((t=>{n("Token generation responded, passing the new token on.",t),e(t)}))}}}}const u=!(null==l?void 0:l.latestToken)||s&&s.identity_expires>l.latestToken.identity_expires,p=u?s:l.latestToken;if(n("UID2 module selected latest token",u,p),!p||Date.now()>p.refresh_expires)return n("Newest available token is expired and not refreshable."),{id:null};if(Date.now()>p.identity_expires){const t=Xp(e.apiBaseUrl,p,e.clientId,d,n,r);return n("Token is expired but can be refreshed, attempting refresh."),{callback:}Date.now()>p.refresh_from&&(n("Refreshing token in background with low priority."),Xp(e.apiBaseUrl,p,e.clientId,d,n,r));const f={originalToken:null!=s?s:null==l?void 0:l.originalToken,latestToken:p};return c&&(f.originalIdentity=null==l?void 0:l.originalIdentity),d.storeValue(f),{id:f}}(f,cf,af,df);return af("UID2 getId returned",g),g},eids:{uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id},getUidExt:}};function uf(e){return Object.assign({wp:!0,run(e,t,n,r,i){const o=n&&n.hasOwnProperty(r),s=o?n[r]:void 0,a=o&&null!=s&&"object"==typeof s?We(s):s;return function(){const n=null==t?e:h(e,t),d=n&&Yr(n[r]),c=d?n[r]:void 0;!o&&d&&i()?delete n[r]:o===d&&c===s&&ft(c,a)||!i()||ht(e,(null==t?[]:[t]).concat(r).join("."),a)}}},e)}Xt("userId",lf),s("uid2IdSystem");const pf=function(e=an){return function(e){const t={},n=[];e.forEach((e=>{e.wp&&n.push(e),e.get&&e.paths.forEach((n=>{let r=t;n.split(".").forEach((e=>{r.children=r.children||{},r.children[e]=r.children[e]||{},r=r.children[e]})),r.rule=e}))}));const r=Jr(n);function i(e,t,n){return new Proxy(e,{get(e,r,o){const s=Reflect.get(e,r,o);if(t.hasOwnProperty(r)){const{children:e,rule:o}=t[r];if(e&&null!=s&&"object"==typeof s)return i(s,e,n);if(o&&Yr(s)&&n(o))return o.get(s)}return s}})}return function(e,...n){const o={};return{obj:i(e,t.children||{},Xr(o,...n)),verify:(s=r(o,e,...n),};var s}}(Zr(e).concat(function(e=an){return[{name:un,paths:Wr,applies:Qr(un,e)},{name:ln,paths:Gr,applies:Qr(ln,e)}].map(uf)}(e)))}(),ff=function(e=pf){return function(t,n){t.global=t.global||{},t.bidder=t.bidder||{};const r=new Set(Object.keys(t.bidder)),i=[];onst s={global:o(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map(())};return{obj:s,verify(){Object.entries(s.bidder).filter(().forEach((([r,i])=>{const o={},s=e(o,n);gt(s.obj,i),s.verify(),t.bidder[r]=o})),i.forEach((e=>e()))}}}}();var gf=Object.defineProperty,mf=Object.defineProperties,bf=Object.getOwnPropertyDescriptors,hf=Object.getOwnPropertySymbols,yf=Object.prototype.hasOwnProperty,vf=Object.prototype.propertyIsEnumerable,If=(e,t,n)=>t in e?gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const wf=rn((e=>Si.resolveAlias(e)));let Cf,Tf,Ef=[],Sf=[],xf=[];const Af=function(){let e=!1;return function(){e||(Object.entries({[y.EVENTS.AUCTION_INIT]:["onAuctionInitEvent"],[y.EVENTS.AUCTION_END]:["onAuctionEndEvent",Rf],[y.EVENTS.BID_RESPONSE]:["onBidResponseEvent"],[y.EVENTS.BID_REQUESTED]:["onBidRequestEvent"],[y.EVENTS.BID_ACCEPTED]:["onBidAcceptedEvent"]}).forEach((([e,[t,n]])=>{Dn(e,(e=>{n&&n(e),Sf.forEach((n=>{try{n[t]&&n[t](e,n.config,Tf)}catch(e){Ie(`RTD provider '${n.name}': error in '${t}':`,e)}}))}))})),e=!0)}}();function _f(){return{gdpr:$r.getConsentData(),usp:qr.getConsentData(),gpp:Mr.getConsentData(),coppa:!!O.getConfig("coppa")}}function Of(){Tf=_f();let e=[];xf.forEach((t=>{const n=d(Ef,(e=>e.name===t.name));n&&n.init&&n.init(t,Tf)&&e.push(Object.assign(n,{config:t}))})),Sf=e,ye(`Real time data module enabled, using submodules: ${Sf.map((e=>e.name)).join(", ")}`)}const kf=Qn("rtd",(function(e,t){Tf=_f();const n=[],r=[];Sf.forEach((e=>{if("function"!=typeof e.getBidRequestData)return;n.push(e);const t=e.config;t&&t.waitForIt&&r.push(e)}));const i=r.length&&Cf.auctionDelay&&Cf.auctionDelay>0;let o,s=r.length,a=!1;const d=[];if(!n.length)return l();unction l(){a||(a=!0,clearTimeout(o),d.forEach((e=>e())),e.call(this,t))}o=setTimeout(l,i?Cf.auctionDelay:0),n.forEach((e=>{const n=ff(t.ortb2Fragments||{},wf("rtd",e.name));var r,i;d.push(n.verify),e.getBidRequestData((r=((e,t)=>{for(var n in t||(t={}))yf.call(t,n)&&If(e,n,t[n]);if(hf)for(var n of hf(t))vf.call(t,n)&&If(e,n,t[n]);return e})({},t),i={ortb2Fragments:n.obj},mf(r,bf(i))),c.bind(e),e.config,Tf)}))}));function Rf(e){const t=Sf.filter((e=>"function"==typeof e.getTargetingData));if(!t.length)return;const n=e.adUnitCodes;if(!n)return;let r=[];for(let i=t.length-1;i>=0;i--){const o=t[i].getTargetingData(n,t[i].config,Tf,e);o&&"object"==typeof o?r.push(o):ve("invalid getTargetingData response for sub module",t[i].name)}const i=(o=r,Array.isArray(o)&&o.length?o.reduce(((e,t)=>{for(let n in t)if(t.hasOwnProperty(n))if(e.hasOwnProperty(n)){const r=t[n];for(let t in r)r.hasOwnProperty(t)&&(e[n][t]=r[t])}else e[n]=t[n];return e}),{}):{});var o;return e.adUnits.forEach((e=>{const t=e.code&&i[e.code];t&&(ye("RTD set ad unit targeting of",t,"for",e),e[y.k2.xn]=Object.assign(e[y.k2.xn]||{},t))})),e.adUnits}function Bf(e,...t){Sf.forEach((e=>{if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){Ie(`Error executing ${e.name}.onDataDeletionRequest`,t)}})),e.apply(this,t)}Jt("realTimeData",(function(e){return Ef.push(e),Lr.register("rtd",e.name,e.gvlid),)),function(e){const t=e.getConfig("realTimeData",(({realTimeData:e})=>{e.dataProviders?(t(),Cf=e,xf=e.dataProviders,Af(),Ht("startAuction").before(kf,20),Si.callDataDeletionRequest.before(Bf),Of()):Ie("missing parameters for real time module")}))}(O),s("rtdModule");let Df={},Uf="hb_deal_optimera";const jf={v0:"https://dyv1bugovvq1g.cloudfront.net/",v1:"https://v1.oapi26b.com/"};let Pf,Nf,$f="default",qf="v0",Mf={},Ff=!0;function Lf(){ye("Fetch Optimera score file."),Et()(Pf,{success:(e,t)=>{if(200===t.status)try{!function(e){let t={};try{t=JSON.parse(e),"default"!==$f&&t.device[$f]&&(t=t.device[$f]),ye(t),window.optimera=window.optimera||{},window.optimera.data=window.optimera.data||{},window.optimera.insights=window.optimera.insights||{},Object.keys(t).map((e=>{"insights"!==e&&(window.optimera.data[e]=t[e])})),t.insights&&(window.optimera.insights=t.insights)}catch(e){Ie("Optimera score file could not be parsed.")}Mf=t}(e)}catch(e){Ie("Unable to parse Optimera Score File.",e)}else 403===t.status&&Ie("Unable to fetch the Optimera Score File - 403")},error:)}function Vf(){const e=window.location.host,t=window.location.pathname,n=jf[qf]?jf[qf]:jf.v0;let r;r="v1"===qf?`${n}api/products/scores?c=${Nf}&h=${e}&p=${t}&s=${$f}`:`${n}${Nf}/${e}${t}.js`,Pf!==r?(Pf=r,Ff=!0):Ff=!1}const zf={name:"optimeraRTD",onAuctionInitEvent:getTargetingData:function(e,t){const n={};try{e.forEach((e=>{Mf[e]&&(n[e]={},n[e][Uf]=[Mf[e]])}))}catch(e){Ie("error",e)}return ye("Apply Optimera targeting"),n},init:function(e){return Df=e.params,Df&&Df.clientID?(Nf=Df.clientID,Df.optimeraKeyName&&(Uf=Df.optimeraKeyName),Df.device&&($f=Df.device),Df.apiVersion&&(qf=Df.apiVersion.includes("v1","v0")?Df.apiVersion:"v0"),Vf(),Lf(),!0):(Df.clientID||Ie("Optimera clientID is missing in the Optimera RTD configuration."),!1)}};t("realTimeData",zf),s("optimeraRtdProvider");var Wf=Object.defineProperty,Hf=Object.defineProperties,Kf=Object.getOwnPropertyDescriptors,Jf=Object.getOwnPropertySymbols,Xf=Object.prototype.hasOwnProperty,Yf=Object.prototype.propertyIsEnumerable,Qf=(e,t,n)=>t in e?Wf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zf=(e,t)=>{for(var n in t||(t={}))Xf.call(t,n)&&Qf(e,n,t[n]);if(Jf)for(var n of Jf(t))Yf.call(t,n)&&Qf(e,n,t[n]);return e},eg=(e,t)=>Hf(e,Kf(t)),tg=const ng="Price Floors",rg=Et(1e4),ig=Symbol();let og=[ig,"gptSlot","adUnitCode","size","domain","mediaType"],sg=!1,ag=!1,dg={},cg=[],lg={};function ug(e,t,{index:n=yo.index}={}){return(null==e?void 0:e.adUnitCode)||n.getAdUnit(t).code}let pg={[ig]:()=>"*",size:mediaType:gptSlot:(e,t)=>function(e,{index:t=yo.index}={}){const n=t.getAdUnit({transactionId:e});return"gam"===h(n,"ortb2Imp.ext.data.adserver.name")&&n.ortb2Imp.ext.data.adserver.adslot}((e||t).transactionId)||Ya(ug(e,t)).gptSlot,domain:(()=>{let e;return function(){return null==e&&(e=ut(Ir().topmostLocation,{noDecodeWholeURL:!0}).hostname),e}})(),adUnitCode:(e,t)=>ug(e,t)};function fg(e,t,n={}){var r;let i=function(e,t,n){return e.length?e.reduce((,[]):[]}(h(e,"schema.fields")||[],t,n);if(!i.length)return{matchingFloor:void 0};let o=i.map(().join("-"),s=h(e,`matchingInputs.${o}`);if(s)return Zf({},s);let a=(c=i,l=h(e,"schema.delimiter")||"|",c.reduce(().sort(());var c,l;let u=d(a,(),p={floorMin:e.floorMin||0,floorRuleValue:e.values[u],matchingData:a[0],matchingRule:u===(null==(r=e.meta)?void 0:r.defaultRule)?void 0:u};const f=h(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof f&&(p.floorMin=f),p.matchingFloor=Math.max(p.floorMin,p.floorRuleValue),ht(e,`matchingInputs.${o}`,Zf({},p)),p}onst mg={banner:e=>h(e,"mediaTypes.banner.sizes")||[],video:native:;function bg(e={currency:"USD",mediaType:"*",size:"*"}){let t=this,n=lg[t.auctionId];if(!n||n.skipped)return{};e=t,e);let r=fg(n.data,Zf({},t),{mediaType:e.mediaType,size:e.size}),i=e.currency||n.data.currency;if(r.matchingFloor&&i!==n.data.currency)try{r.matchingFloor=o().convertCurrency(r.matchingFloor,n.data.currency,i)}catch(e){ve(`${ng}: Unable to get currency conversion for getFloor for bidder ${t.bidder}. You must have currency module enabled with defaultRates in your currency config`),i=n.data.currency}if(n.enforcement.bidAdjustment&&r.matchingFloor){const e=Nt.get(t.bidder,"inverseBidAdjustment");if(e)r.matchingFloor=e(r.matchingFloor,t);else{let e=gg(r.matchingFloor,null,t);r.matchingFloor=e?r.matchingFloor,e):r.matchingFloor}}return r.matchingFloor?{floor:(s=r.matchingFloor,4,Math.ceil((parseFloat(s)*Math.pow(10,4)).toFixed(1))/Math.pow(10,4)),currency:i}:{};var s}function hg(e,t){let n=We(e);return n.schema.delimiter=e.schema.delimiter||"|",n.values=function(e,t){let n=e.schema.fields,r=e.schema.delimiter,i=t&&-1===n.indexOf("adUnitCode")&&n.unshift("adUnitCode");return Object.keys(e.values).reduce(((n,o)=>(n[(i?`${t}${r}${o}`:o).toLowerCase()]=e.values[o],n)),{})}(n,t),n.currency=n.currency||"USD",n}function yg(e){e.hasExited||(cg=cg.filter((t=>t.timer!==e.timer)),e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||le(),lg[e.reqBidsConfigObj.auctionId]=function(e,t){var n;let r=We(dg);if(2===h(r,"data.floorsSchemaVersion")){let e=r.data,{modelGroups:t}=e,n=tg(e,["modelGroups"]);r.data=Object.assign(n,t,n.modelWeightSum))}let i=0===Object.keys(h(r,"data.values")||{}).length;if(r.data=i?function(e){const t=e.find((e=>{var t;return null!=(null==(t=e.floors)?void 0:t.schema)}));return e.reduce(((e,n)=>{var r,i;if(null!=(null==(r=n.floors)?void 0:r.schema)&&!ft(n.floors.schema,null==(i=null==t?void 0:t.floors)?void 0:i.schema))return Ie(`${ng}: adUnit '${n.code}' declares a different schema from one previously declared by adUnit '${t.code}'. Floor config for '${n.code}' will be ignored.`),e;const o=Object.assign({},null==t?void 0:t.floors,{values:void 0},n.floors);if(wg(o))if(e.values){let t=hg(o,n.code).values;Object.assign(e.values,t)}else(e=hg(o,n.code)).location="adUnit";else null!=n.floors&&ve(`adUnit '${n.code}' provides an invalid \`floor\` definition, it will be ignored for floor calculations`,n);return e}),{})}(e):hg(r.data),0===Object.keys(h(r,"data.values")||{}).length)r.skipped=!0;else{const e=Ee("pbjs_skipRate")||(null!=(n=h(r,"data.skipRate"))?n:r.skipRate),t=100*Math.random()<parseFloat(e);r.skipped=t}return r.hasOwnProperty("floorMin")&&(r.data.floorMin=r.floorMin),function(e,t,n){const r=function(e){var t,n;const{data:r,enforcement:i}=e;return(null==(t=null==r?void 0:r.noFloorSignalBidders)?void 0:t.length)>0?r.noFloorSignalBidders:(null==(n=null==i?void 0:i.noFloorSignalBidders)?void 0:n.length)>0?i.noFloorSignalBidders:[]}(t);e.forEach((e=>{e.bids.forEach((e=>{var i;const o=r.some(();t.skipped||o?(o&&ye(`noFloorSignal to ${e.bidder}`),delete e.getFloor):e.getFloor=bg,e.auctionId=n,e.floorData={noFloorSignaled:o,skipped:t.skipped,skipRate:null!=(i=h(t,"data.skipRate"))?i:t.skipRate,floorMin:t.floorMin,modelVersion:h(t,"data.modelVersion"),modelWeight:h(t,"data.modelWeight"),modelTimestamp:h(t,"data.modelTimestamp"),location:h(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:dg.fetchStatus}}))}))}(e,r,t),r}(e.reqBidsConfigObj.adUnits||o().adUnits,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0)}function vg(e){return e=function(e){var t,n;if(Oe(e.default)){let r="*";const i=((null==(t=e.schema)?void 0:t.fields)||[]).length;i?r=Array(i).fill("*").join((null==(n=e.schema)?void 0:n.delimiter)||"|"):ht(e,"schema.fields",[ig]),e.values=e.values||{},null==e.values[r]&&(e.values[r]=e.default,e.meta={defaultRule:r})}return e}(e),t=h(e,"schema.fields"),!!(Array.isArray(t)&&t.length>0&&t.every(()||(Ie(`${ng}: Fields received do not match allowed fields`),0))&&(n=e,r=e.schema.fields.length,i=e.schema.delimiter||"|","object"==typeof n.values&&(n.values=Object.keys(n.values).reduce((,{}),Object.keys(n.values).length>0));var t,n,r,i}const Ig={1:e=>vg(e),2:e=>!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every((t=>!("number"!=typeof t.modelWeight||!vg(t)||(e.modelWeightSum+=t.modelWeight,0)))))};function wg(e){return"object"==typeof e&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof Ig[e.floorsSchemaVersion]?(Ie(`${ng}: Unknown floorsSchemaVersion: `,e.floorsSchemaVersion),!1):Ig[e.floorsSchemaVersion](e))}function Cg(e,t){if(e&&"object"==typeof e&&wg(e))return ye(`${ng}: A ${t} set the auction floor data set to `,e),eg(Zf({},e),{location:t});Ie(`${ng}: The floors data did not contain correct values`,e)}const Tg=Qn("priceFloors",();unction Sg(e){let t;sg=!1,dg.fetchStatus="success";try{t=JSON.parse(e)}catch(n){t=e}const n=Cg(t,"fetch");n&&(dg.data=n,dg.skipRate=Oe(n.skipRate)?n.skipRate:dg.skipRate,dg.floorProvider=n.floorProvider||dg.floorProvider),Eg()}onst Ag=Zn("priceFloors",(function(e,t,n,r){var i;let s=lg[n.auctionId];if(!s||!n||s.skipped)return e.call(this,t,n,r);const a=yo.index.getBidRequest(n);let d,c=fg(s.data,a,eg(Zf({},n),{size:[n.width,n.height]}));if(!c.matchingFloor)return 0!==c.matchingFloor&&ve(`${ng}: unable to determine a matching price floor for bidResponse`,n),e.call(this,t,n,r);let l=s.data.currency.toUpperCase(),u=n.currency||"USD";if(l===u.toUpperCase())d=n.cpm;else if(n.originalCurrency&&l===n.originalCurrency.toUpperCase())d=n.originalCpm;else try{d=o().convertCurrency(n.cpm,u.toUpperCase(),l)}catch(i){return Ie(`${ng}: Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ${n}`),e.call(this,t,n,r)}return d=gg(d,n,a),function(e,t,n,r){n.floorData={floorValue:t.matchingFloor,floorRule:t.matchingRule,floorRuleValue:t.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:r,enforcements:Zf({},e.enforcement),matchedFields:{}},e.data.schema.fields.forEach(()}(s,c,n,d),function(e,t,n){let r=!1!==h(e,"enforcement.enforceJS"),i=!0===h(e,"enforcement.floorDeals")||!n.dealId,o=n.floorData.cpmAfterAdjustments<t.matchingFloor;return r&&o&&i}(s,c,n)?(r(y.Gw.pe),void ve(`${ng}: ${n.bidderCode}'s Bid Response for ${t} was rejected due to floor not met (adjusted cpm: ${null==(i=null==n?void 0:n.floorData)?void 0:i.cpmAfterAdjustments}, floor: ${null==c?void 0:c.matchingFloor})`,n)):e.call(this,t,n,r)}));O.getConfig("floors",(e=>function(e){var t;dg=at(e,["floorMin","enabled",e=>!1!==e,"auctionDelay","floorProvider",t=>h(e,"data.floorProvider",t),"endpoint","skipRate","enforcement",e=>at(e||{},["enforceJS",e=>!1!==e,"enforcePBS",e=>!0===e,"floorDeals",e=>!0===e,"bidAdjustment",e=>!1!==e,"noFloorSignalBidders",),"additionalSchemaFields","data",),dg.enabled?((t=dg.endpoint).url&&!sg?"GET"!==(t.method||"GET")?Ie(`${ng}: 'GET' is the only request method supported at this time!`):(rg(t.url,{success:Sg,error:xg},null,{method:"GET"}),sg=!0):sg&&ve(`${ng}: A fetch is already occuring. Skipping.`),ag||(Dn(y.EVENTS.AUCTION_END,(),o().requestBids.before(Tg,50),Ht("addBidResponse").before(Ag,Te()?4:50),ag=!0)):(ye(`${ng}: Turning off module`),dg={},lg={},Ht("addBidResponse").getHooks({hook:Ag}).remove(),o().requestBids.getHooks({hook:Tg}).remove(),ag=!1)}(e.floors))),Mc({type:Uc,name:"bidfloor",fn:function(e,t,n){if("function"==typeof t.getFloor){let r,i;try{({currency:r,floor:i}=t.getFloor({currency:n.currency||O.getConfig("currency.adServerCurrency")||"USD",mediaType:n.mediaType||"*",size:"*"}))}catch(e){return void ve("Cannot compute floor for bid",t)}i=parseFloat(i),null==r||null==i||isNaN(i)||Object.assign(e,{bidfloor:i,bidfloorcur:r})}}}),Mc({type:Uc,name:"extPrebidFloors",fn:function(e,t,n){var r,i,o,s,a,d,c,l,u,p;if(null!=e.bidfloor){let{floorMinCur:t,floorMin:f}=n.reqContext.floorMin||{};null==t&&(t=e.bidfloorcur);const g=(null==(o=null==(i=null==(r=e.ext)?void 0:r.prebid)?void 0:i.floors)?void 0:o.floorMinCur)||(null==(a=null==(s=e.ext)?void 0:s.prebid)?void 0:a.floorMinCur)||t,m=(null==(l=null==(c=null==(d=e.ext)?void 0:d.prebid)?void 0:c.floors)?void 0:l.floorMin)||(null==(p=null==(u=e.ext)?void 0:u.prebid)?void 0:p.floorMin),b=Gf(e.bidfloor,e.bidfloorcur,t),h=!(!m||!g)&&Gf(m,g,t),y=h&&h<b?h:b;ht(e,"ext.prebid.floors.floorMin",y),(null==f||f>y)&&(f=y),n.reqContext.floorMin={floorMin:f,floorMinCur:t}}},dialects:[$c],priority:-1}),Mc({type:Dc,name:"extPrebidFloors",fn:function(e,t,n){var r,i,o;ag&&ht(e,"ext.prebid.floors.enabled",(null==(o=null==(i=null==(r=e.ext)?void 0:r.prebid)?void 0:i.floors)?void 0:o.enabled)||!1),(null==n?void 0:n.floorMin)&&gt(e,{ext:{prebid:{floors:n.floorMin}}})},dialects:[$c]}),s("priceFloors");let _g={},Og=!1;const kg=(e,t,...n)=>{(e=>{const{customGptSlotMatching:t}=_g;if(!ze())return;const n=e.reduce((,{});window.googletag.pubads().getSlots().forEach((e=>{const r=d(Object.keys(n),t?t(e):ot(e));if(r){const t={name:"gam",adslot:(i=e.getAdUnitPath(),(O.getConfig("gptPreAuction")||{}).mcmEnabled?i.replace(/(^\/\d*),\d*\//,"$1/"):i)};n[r].forEach((e=>{var n,r,i;ht(e,"ortb2Imp.ext.data.adserver",Object.assign({},null==(i=null==(r=null==(n=e.ortb2Imp)?void 0:n.ext)?void 0:r.data)?void 0:i.adserver,t))}))}var i}))})(t);const{useDefaultPreAuction:r,customPreAuction:i}=_g;return t.forEach((e=>{e.ortb2Imp=e.ortb2Imp||{},e.ortb2Imp.ext=e.ortb2Imp.ext||{},e.ortb2Imp.ext.data=e.ortb2Imp.ext.data||{};const t=e.ortb2Imp.ext;if(i||r){let n,o=h(t,"data.adserver.adslot");i?n=i(e,o):r&&(n=((e,t)=>{const n=e.ortb2Imp.ext.data;if(n.pbadslot)return n.pbadslot;if(ze()){var r=window.googletag.pubads().getSlots().filter((e=>e.getAdUnitPath()===t));if(0!==r.length)return 1===r.length?t:`${t}#${e.code}`}})(e,o)),n&&(t.gpid=t.data.pbadslot=n)}else{const n=(e=>{const t=e.ortb2Imp.ext.data,{customPbAdSlot:n}=_g;if(!t.pbadslot)if(n)t.pbadslot=n(e.code,h(t,"adserver.adslot"));else{try{const n=document.getElementById(e.code);if(n.dataset.adslotid)return void(t.pbadslot=n.dataset.adslotid)}catch(e){}if(!h(t,"adserver.adslot"))return t.pbadslot=e.code,!0;t.pbadslot=t.adserver.adslot}})(e);t.gpid||n||(t.gpid=t.data.pbadslot)}})),e.call(void 0,t,...n)},Rg=e=>{_g=at(e,["enabled","customGptSlotMatching",e=>"function"==typeof e&&e,"customPbAdSlot",e=>"function"==typeof e&&e,"customPreAuction","useDefaultPreAuction",),_g.enabled?Og||(Ht("makeBidRequests").before(kg),Og=!0):(ye("GPT Pre-Auction: Turning off module"),_g={},Ht("makeBidRequests").getHooks({hook:kg}).remove(),Og=!1)};O.getConfig("gptPreAuction",(e=>Rg(e.gptPreAuction))),Rg({}),s("gptPreAuction"),$s.processQueue();const Bg=$s}}]);