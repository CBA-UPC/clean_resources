![function(e,t,n){"use strict";(function(e){var r,o,i,s;function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var c=null===(r=e.location)||void 0===r||null===(o=r.search)||void 0===o||null===(i=o.substr(1))||void 0===i||null===(s=i.split("&"))||void 0===s?void 0:s.some((function(e){var t=a(e.split("="),2),n=t[0],r=t[1];return"adsDebug"===decodeURIComponent(n)&&(!0===r||"all"===r||decodeURIComponent(r).split(",").includes("tcfv2"))}));).call(this,n(15))},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}unction a(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}unction c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return g}));var d=new WeakMap,f=new WeakMap,h=new WeakMap,v=new WeakMap,y=new WeakSet,m=new WeakSet,g=function(){function e(t){var n=t.vendorList,r=t.consentString,o=t.vendorListVersion;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m.add(this),y.add(this),d.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),u(this,h,n.reduce((,{}));var i=new Set(Object.keys(a(this,h)).map((function(e){return parseInt(e)})));u(this,d,{}),this.updateModel=this.updateModel.bind(this),this.getConsents=this.getConsents.bind(this),u(this,f,"1~".concat(r?r.substr(2).split(".").map((function(e){return parseInt(e)})).filter((function(e){return e})).filter((function(e){return i.has(e)})).join("."):"")),u(this,d,s(this,m,_).call(this)),u(this,v,o)}var t,n,r;return t=e,(n=[{key:"updateModel",value:,{key:"getConsents",value:function(){return a(this,d)}},{key:"getConsentString",value:function(){return a(this,f)}},{key:"consentToAll",value:,{key:"dissentToAll",value:,{key:"hasUserConsentedToAll",value:,{key:"hasUserDissentedToAll",value:,{key:"getUiModel",value:,{key:"getVendors",value:function(){return a(this,h)}},{key:"getVendorListVersion",value:])&&i(t.prototype,n),r&&i(t,r),e}();function b(){var e;if(e=a(this,d),!Object.keys(e).length)return"1~";var t=Object.entries(a(this,d)).filter((function(e){var t=r(e,2);t[0];return t[1].consent})).map(().join(".");return"1~".concat(t)},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),s=n(9),a=i.Command);t.GetTCDataCommand=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(0),o=n(1),i=n(14);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){d(i,r,o,s,a,"next",e)}function a(e){d(i,r,o,s,a,"throw",e)}s(void 0)}))}}var h=Object(o.a)();function v(e){return y.apply(this,arguments)}function y(){return(y=f(regeneratorRuntime.mark((function e(t){var n,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("creating TCModel for new user"),(n=new r.TCModel).cmpId=27,n.cmpVersion=3,n.isServiceSpecific=!0,n.publisherCountryCode="GB",n.gvl=t,n.publisherConsents.set([1,2,3,4,5,6,7,8,9,10]),n.publisherLegitimateInterests.set([5,6,8,10]),e.next=11,n.gvl.readyPromise;case 11:return o=Object.values(n.gvl.vendors).map((),i.a.forEach((function(e){var t=new r.PurposeRestriction;t.purposeId=e,t.restrictionType=r.RestrictionType.REQUIRE_CONSENT,o.forEach(()})),s=Object.values(n.gvl.vendors).filter((function(e){return 0===e.purposes.length&&0===e.legIntPurposes.length&&e.specialPurposes.length>0})),h("specialPurposeOnly",s),e.abrupt("return",new b({gvl:t,model:n,specialPurposeOnlyDeclared:s}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){h("creating TCModel from tcString");var n=r.TCString.decode(t);0===n.consentScreen&&(n.consentScreen=1),n.gvl=e;var o=Object.values(n.gvl.vendors).filter(();return h("specialPurposeOnly",o),[n,o]}function g(e,t){var n=l(m(e,t),2),r=n[0],o=n[1];return new b({gvl:e,model:r,specialPurposeOnlyDeclared:o})}var b=function(){function e(t){var n=t.gvl,r=t.model,o=t.specialPurposeOnlyDeclared,i=void 0===o?[]:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gvl=n,this.model=r,this.specialPurposeOnlyDeclared=i,this.byPurposeVendorMap=this.byPurposeVendorMap.bind(this),this.gvlIsReady=this.gvlIsReady.bind(this),this.updated=this.updated.bind(this),this.tcString=this.tcString.bind(this),this.updateUserPreferences=this.updateUserPreferences.bind(this),this.consentAll=this.consentAll.bind(this),this.dissentAll=this.dissentAll.bind(this),this.hasUserDissentedToAll=this.hasUserDissentedToAll.bind(this),this.hasUserConsentedToAll=this.hasUserConsentedToAll.bind(this),this.consentedVendorCheck=this.consentedVendorCheck.bind(this)}var t,n,o;return t=e,(n=[{key:"reload",value:function(e){var t=l(m(this.gvl,e),2),n=t[0],r=t[1];h("reloading tcModel",e,n),this.model=n,this.specialPurposeOnlyDeclared=r}},{key:"byPurposeVendorMap",value:function(){return this.model.gvl.byPurposeVendorMap}},{key:"gvlIsReady",value:,{key:"updated",value:function(){this.model.updated()}},{key:"tcString",value:function(){return h("encoding",this.model),r.TCString.encode(this.model)}},{key:"updateUserPreferences",value:function(e){var t=e.vendorConsents,n=e.vendorLegitimateInterests,o=e.purposeConsents,i=e.purposeLegitimateInterests,s=e.specialFeatureOptins,a=e.consentScreen;this.model.vendorConsents.empty(),this.model.vendorConsents.set(t),this.model.vendorLegitimateInterests.empty(),this.model.vendorLegitimateInterests.set(n),this.model.vendorLegitimateInterests.set(this.specialPurposeOnlyDeclared.map((function(e){return e.id}))),this.model.purposeConsents.empty(),this.model.purposeConsents.set(o),this.model.purposeLegitimateInterests.empty(),this.model.purposeLegitimateInterests.set(i),this.model.specialFeatureOptins.empty(),this.model.specialFeatureOptins.set(s),this.model.consentScreen=a,this.model.updated(),this.model=r.TCString.decode(r.TCString.encode(this.model)),this.model.gvl=this.gvl}},{key:"consentAll",value:function(e){var t=e.consentScreen;this.model.setAll(),this.model.consentScreen=t,this.model.updated(),this.model=r.TCString.decode(r.TCString.encode(this.model)),this.model.gvl=this.gvl}},{key:"dissentAll",value:function(e){var t=e.consentScreen;this.model.unsetAll(),this.model.setAllPurposeLegitimateInterests(),this.model.setAllVendorLegitimateInterests(),this.model.consentScreen=t,this.model.updated(),this.model=r.TCString.decode(r.TCString.encode(this.model)),this.model.gvl=this.gvl}},{key:"hasUserDissentedToAll",value:,{key:"hasUserConsentedToAll",value:,{key:"consentedVendorCheck",value:function(){var e=this,t=Object.keys(this.model.gvl.purposes).map((function(e){return parseInt(e)})),n=[3,4].map((function(e){var t=new r.PurposeRestriction;return t.purposeId=e,t.restrictionType=r.RestrictionType.REQUIRE_CONSENT,t})),o=r.TCString.decode(r.TCString.encode(this.model));o.gvl=this.gvl;var i=new Set(t.filter(().map(().flat());return Array.from(this.model.gvl.vendorIds).map(()}},{key:"consentedVendors",value:,{key:"consentedVendorsDetails",value:])&&c(t.prototype,n),o&&c(t,o),e}(),_=function(e){return["purposeConsents","purposeLegitimateInterests","specialFeatureOptins","vendorConsents","vendorLegitimateInterests"].reduce((function(t,n){return a(a({},t),u({},n,Array.from(e.model[n].set_).map((function(e){return parseInt(e)}))))}),{vendorConsents:[],vendorLegitimateInterests:[],purposeConsents:[],purposeLegitimateInterests:[],specialFeatureOptins:[],consentScreen:e.model.consentScreen_})};function w(e){return C.apply(this,arguments)}function C(){return(C=f(regeneratorRuntime.mark((function e(t){var n,r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tcString,r=t.gvl,o=t.oldModel,e.next=3,n?g(r,n):v(r);case 3:return i=e.sent,o&&i.updateUserPreferences(_(o)),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.Segment||(t.Segment={})).CORE="core",r.VENDORS_DISCLOSED="vendorsDisclosed",r.VENDORS_ALLOWED="vendorsAllowed",r.PUBLISHER_TC="publisherTC"},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),s=n(11),a=i.Response);t.Disabled=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),u=n(40),c=function(e){function t(t,n){var r=e.call(this)||this;if(r.eventStatus=a.CmpApiModel.eventStatus,r.cmpStatus=a.CmpApiModel.cmpStatus,r.listenerId=n,a.CmpApiModel.gdprApplies){var o=a.CmpApiModel.tcModel,i=u.AdditionalModel.addtlConsent,s=u.AdditionalModel.acmVersion,c=u.AdditionalModel.nrvString,l=u.AdditionalModel.nrvVersion,p=u.AdditionalModel.repromptVersion;r.tcString=a.CmpApiModel.tcString,r.isServiceSpecific=o.isServiceSpecific,r.useNonStandardStacks=o.useNonStandardStacks,r.purposeOneTreatment=o.purposeOneTreatment,r.publisherCC=o.publisherCountryCode,r.addtlConsent=i,r.acmVersion=s,r.nrvString=c,r.nrvVersion=l,r.repromptVersion=p,r.outOfBand={allowedVendors:r.createVectorField(o.vendorsAllowed,t),disclosedVendors:r.createVectorField(o.vendorsDisclosed,t)},r.purpose={consents:r.createVectorField(o.purposeConsents),legitimateInterests:r.createVectorField(o.purposeLegitimateInterests)},r.vendor={consents:r.createVectorField(o.vendorConsents,t),legitimateInterests:r.createVectorField(o.vendorLegitimateInterests,t)},r.specialFeatureOptins=r.createVectorField(o.specialFeatureOptins),r.publisher={consents:r.createVectorField(o.publisherConsents),legitimateInterests:r.createVectorField(o.publisherLegitimateInterests),customPurpose:{consents:r.createVectorField(o.publisherCustomConsents),legitimateInterests:r.createVectorField(o.publisherCustomLegitimateInterests)},restrictions:r.createRestrictions(o.publisherRestrictions)}}return r}return o(t,e),t.prototype.createRestrictions=t.prototype.createVectorField=t}(n(10).Response);t.TCData=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AdditionalModel=function(){}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n(0),o=n(43),i=n(44),s=n.n(i),a=n(1),u=n(20),c=n(8);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){f(i,r,o,s,a,"next",e)}function a(e){f(i,r,o,s,a,"throw",e)}s(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=Object(a.a)(),m=function(){function t(n){var r=this,i=n.tcModel,a=n.cvlJson,u=void 0===a?{}:a,l=n.nrvJson,p=void 0===l?{}:l,d=n.tcString,f=n.addtlConsent,v=n.storeTcString,y=n.persist,m=n.ui,g=n.uuid,b=n.gvlVersion,_=n.gvlUiVersion,w=n.repromptVersion,C=n.nextRepromptVersion,O=n.nrvString,E=n.nrvVersion,S=n.nrvUiVersion,I=n.cvlVersion,V=n.cvlUiVersion;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s()(),this.tcModel=i,this.hasUserSelectedTheirPreference=!!d,this.notifyModelUpdate=this.notifyModelUpdate.bind(this),this.isReady=this.isReady.bind(this),this.openUi=this.openUi.bind(this),this.notifyUsersPreferences=this.notifyUsersPreferences.bind(this),this.hasUserConsentedToAll=this.hasUserConsentedToAll.bind(this),this.getGvl=this.getGvl.bind(this),this.consentToAll=this.consentToAll.bind(this),this.dissentToAll=this.dissentToAll.bind(this),this.updateConsent=this.updateConsent.bind(this),this.reloadTcModel=this.reloadTcModel.bind(this),this.levelChanged=this.levelChanged.bind(this),this.runApiMethod=this.runApiMethod.bind(this),this.getPurposesByVendorMap=this.getPurposesByVendorMap.bind(this),this.getNonRegisteredVendors=this.getNonRegisteredVendors.bind(this),this.storeTcString=v,this.persist=y,this.ui=m,this.uuid=g,this.lastKnownConsentScreen=void 0,this.gvlVersion=b,this.gvlUiVersion=_,this.acmModel=new c.a({vendorList:Object.values(u),consentString:f,vendorListVersion:I}),this.cvlUiVersion=V,this.nrvModel=new c.a({vendorList:Object.values(p),consentString:O,vendorListVersion:E}),this.nrvUiVersion=S,this.repromptVersion=w,this.nextRepromptVersion=C;var P,A,T,L,M,j,R,U;this.api=new o.CmpApi(27,3,!0,{hasUserConsentedToAll:(U=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tcModel.gvlIsReady();case 2:return e.abrupt("return",r.hasUserConsentedToAll());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return U.apply(this,arguments)}),hasUserDissentedToAll:(R=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tcModel.gvlIsReady();case 2:return e.abrupt("return",r.hasUserDissentedToAll());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return R.apply(this,arguments)}),getPurposesByVendorMap:(j=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tcModel.gvlIsReady();case 2:return e.abrupt("return",r.getPurposesByVendorMap());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)}),getCustomVendorsConsents:(M=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tcModel.gvlIsReady();case 2:return e.abrupt("return",r.getCustomVendorsConsents());case 3:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return M.apply(this,arguments)}),getNonRegisteredVendorsConsents:function(e){r.runApiMethod(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((,e)}))),e)},getConsentDegree:(L=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getConsentDegree());case 1:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),setUserId:openUi:getValidTCData:(T=h(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){r.tcModel.gvlIsReady().then((function(){var n=!1,r=e.__tcfapi("addEventListener",2,(function(t){t.tcString.length&&(e.__tcfapi("removeEventListener",2,(function(){}),t.listenerId),r(t))})),e.__tcfapi("getTCData",2,()}))})));case 1:case"end":return t.stop()}}),t)}))),n);case 1:case"end":return t.stop()}}),t)}))),function(e){return T.apply(this,arguments)}),consentedVendors:(A=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.consentedVendors());case 1:case"end":return e.stop()}}),e)}))),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)}),consentedVendorsDetails:(P=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.runApiMethod(h(regeneratorRuntime.mark(()),t);case 1:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)}),getStoredRepromptVersion:getNonRegisteredVendors:)}var n,i,a,d,f,m,g,b,_;return n=t,(i=[{key:"runApiMethod",value:(_=h(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((,e,null,[[0,7]])}))),},{key:"getGvl",value:function(){return this.tcModel.gvl}},{key:"notifyModelUpdate",value:(b=h(regeneratorRuntime.mark((function e(){var t,n,r,o,i,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tcModel.tcString(),this.hasUserSelectedTheirPreference=!0,e.next=4,this.getConsentDegree();case 4:return n=e.sent,r=this.acmModel.getConsentString(),o=this.acmModel.getVendorListVersion(),i=this.nrvModel.getConsentString(),s=this.nrvModel.getVendorListVersion(),a={uuid:this.uuid,tcString:t,consentDegree:n,addtlConsent:r,nrvString:i},e.next=12,this.persist.saveTCString(a);case 12:this.repromptVersion=this.nextRepromptVersion,this.api.update(t,!1,{addtlConsent:r,acmVersion:o,nrvString:i,nrvVersion:s,repromptVersion:this.repromptVersion});case 14:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"updateConsent",value:function(e){y("data",e);var t=n=e.purposes,r=void 0===n?{}:n,o=e.specialFeatures,i=void 0===o?{}:o,s=e.vendors,a=void 0===s?{}:s,u=e.nonTcfVendors,c=void 0===u?{}:u,d=e.nonRegisteredVendors,f=void 0===d?{}:d,h=t(a,"vendor"),v=h.vendorConsents,m=h.vendorLegitimateInterests,g=t(r,"purpose"),b=g.purposeConsents,_=g.purposeLegitimateInterests,w=Object.entries(i).reduce((,[]);this.acmModel.updateModel(c),this.nrvModel.updateModel(f);var C={vendorConsents:v,vendorLegitimateInterests:m,purposeConsents:b,purposeLegitimateInterests:_,specialFeatureOptins:w,consentScreen:this.lastKnownConsentScreen};y("options:",C),this.tcModel.updateUserPreferences(C),this.notifyModelUpdate(),y("model updates",v,m,b,_,this.acmModel.getConsents(),this.nrvModel.getConsents())}},{key:"consentToAll",value:function(){y("user consenting to all"),this.acmModel.consentToAll(),this.nrvModel.consentToAll(),this.tcModel.consentAll({consentScreen:this.lastKnownConsentScreen}),this.notifyModelUpdate()}},{key:"dissentToAll",value:function(){y("user dissenting to all"),this.acmModel.dissentToAll(),this.nrvModel.dissentToAll(),this.tcModel.dissentAll({consentScreen:this.lastKnownConsentScreen}),this.notifyModelUpdate()}},{key:"levelChanged",value:,{key:"setCurrentLevel",value:,{key:"isReady",value:function(){return this.tcModel.gvlIsReady()}},{key:"hasUserConsentedToAll",value:function(){return!!this.hasUserSelectedTheirPreference&&this.tcModel.hasUserConsentedToAll()&&this.acmModel.hasUserConsentedToAll()&&this.nrvModel.hasUserConsentedToAll()}},{key:"hasUserDissentedToAll",value:,{key:"getCustomVendorsConsents",value:function(){return this.acmModel.getConsents()}},{key:"getNonRegisteredVendorsConsents",value:function(){return this.nrvModel.getConsents()}},{key:"getConsentDegree",value:(g=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((,e,this)}))),function(){return g.apply(this,arguments)})},{key:"consentedVendors",value:(m=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tcModel.gvlIsReady();case 2:return e.abrupt("return",this.tcModel.consentedVendors());case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"consentedVendorsDetails",value:(f=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((,e,this)}))),function(){return f.apply(this,arguments)})},{key:"getPurposesByVendorMap",value:,{key:"getNonRegisteredVendors",value:function(){return this.nrvModel.getVendors()}},{key:"openUi",value:(d=h(regeneratorRuntime.mark((function e(t){var n,o,i,s,a,l,p,d,f,h,v,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.gvlVersion===this.gvlUiVersion){e.next=13;break}return n="//cmp.dmgmediaprivacy.co.uk/gvl/".concat(this.gvlUiVersion,"/vendor-list.json"),e.next=4,fetch(n);case 4:return o=e.sent,e.next=7,o.json();case 7:return i=e.sent,e.next=10,Object(u.a)({gvl:new r.GVL(i),oldModel:this.tcModel});case 10:s=e.sent,this.tcModel=s,this.gvlVersion=this.gvlUiVersion;case 13:if(this.acmModel.getVendorListVersion()===this.cvlUiVersion){e.next=22;break}return a="//cmp.dmgmediaprivacy.co.uk/custom/".concat(this.cvlUiVersion,"/vendor-list.json"),e.next=17,fetch(a);case 17:return l=e.sent,e.next=20,l.json();case 20:p=e.sent,this.acmModel=new c.a({vendorList:Object.values(p),consentString:this.acmModel.getConsentString(),vendorListVersion:this.cvlUiVersion});case 22:if(this.nrvModel.getVendorListVersion()===this.nrvUiVersion){e.next=31;break}return d="//cmp.dmgmediaprivacy.co.uk/nrv/".concat(this.nrvUiVersion,"/vendor-list.json"),e.next=26,fetch(d);case 26:return f=e.sent,e.next=29,f.json();case 29:h=e.sent,this.nrvModel=new c.a({vendorList:Object.values(h),consentString:this.nrvModel.getConsentString(),vendorListVersion:this.nrvUiVersion});case 31:v=this.hasUserSelectedTheirPreference?this.tcModel.tcString():"",m={tcModel:this.tcModel.model,hasUserSelectedTheirPreference:this.hasUserSelectedTheirPreference,acmVendors:this.acmModel.getUiModel(),nonRegisteredVendors:this.nrvModel.getUiModel()},g={reloadTcModel:this.reloadTcModel,updateConsent:this.updateConsent,consentToAll:this.consentToAll,dissentToAll:this.dissentToAll,levelChanged:this.levelChanged},y("opening UI"),this.setCurrentLevel(t),this.ui.open(t,{cmpModel:m,cmpUpdateHandlers:g}),this.api.update(v,!0,{addtlConsent:this.acmModel.getConsentString(),acmVersion:this.acmModel.getVendorListVersion(),nrvString:this.nrvModel.getConsentString(),nrvVersion:this.nrvModel.getVendorListVersion(),repromptVersion:this.repromptVersion});case 38:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"notifyUsersPreferences",value:function(){var e=this.hasUserSelectedTheirPreference?this.tcModel.tcString():"";y("notifying users"),this.api.update(e,!1,{addtlConsent:this.acmModel.getConsentString(),acmVersion:this.acmModel.getVendorListVersion(),nrvString:this.nrvModel.getConsentString(),nrvVersion:this.nrvModel.getVendorListVersion(),repromptVersion:this.repromptVersion})}},{key:"reloadTcModel",value:,{key:"setUuid",value:])&&v(n.prototype,i),a&&v(n,a),t}();function g(e){return b.apply(this,arguments)}function b(){return(b=h(regeneratorRuntime.mark((function e(t){var n,o,i,s,a,c,l,p,d,f,h,v,y,g,b,_,w,C,O,E,S,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gvlJson,o=t.cvlJson,i=void 0===o?{}:o,s=t.nrvJson,a=void 0===s?{}:s,c=t.tcString,l=t.addtlConsent,p=t.storeTcString,d=t.persist,f=t.ui,h=t.uuid,v=t.gvlVersion,y=t.gvlUiVersion,g=t.repromptVersion,b=t.nextRepromptVersion,_=t.nrvString,w=t.nrvVersion,C=t.nrvUiVersion,O=t.cvlVersion,E=t.cvlUiVersion,S=new r.GVL(n),e.next=4,Object(u.a)({gvl:S,tcString:c});case 4:return I=e.sent,e.abrupt("return",new m({tcModel:I,cvlJson:i,nrvJson:a,tcString:c,addtlConsent:l,storeTcString:p,persist:d,ui:f,uuid:h,gvlVersion:v,gvlUiVersion:y,repromptVersion:g,nextRepromptVersion:b,nrvString:_,nrvVersion:w,nrvUiVersion:C,cvlVersion:O,cvlUiVersion:E}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(15))},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){for(var e,t=[],n=window,o=window,i=!1;o;){try{if(o.frames.__tcfapiLocator){e=o;break}}catch(e){}if(o===n.top)break;o=o.parent}e||(function e(){var t=n.document;if(!n.frames.__tcfapiLocator)if("interactive"===t.readyState||"complete"===t.readyState){var r=t.createElement("iframe");r.style.display="none",r.name="__tcfapiLocator",t.body.appendChild(r),i&&(t.removeEventListener("readystatechange",e),i=!1)}else"function"==typeof t.addEventListener?(t.addEventListener("readystatechange",e),i=!0):setTimeout(e,5)}(),n.__tcfapi=n.addEventListener("message",(,!1))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="DecodingError",n}return o(t,e),t}(Error);t.DecodingError=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="EncodingError",n}return o(t,e),t}(Error);t.EncodingError=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.DeviceDisclosureStorageAccessType||(t.DeviceDisclosureStorageAccessType={})).COOKIE="cookie",r.WEB="web",r.APP="app"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.DisplayStatus||(t.DisplayStatus={})).VISIBLE="visible",r.HIDDEN="hidden",r.DISABLED="disabled"},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||s=this&&this.__spread||Object.defineProperty(t,"__esModule",{value:!0});var a=n(39).TCData);t.InAppTCData=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(10).Response);t.Ping=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(40),i=n(11),s=n(41),a=n(0),u=function(){eturn e.prototype.throwIfInvalidInt=e.prototype.update=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n={addtlConsent:"",acmVersion:void 0,nrvString:"",nrvVersion:void 0,repromptVersion:1}),r.CmpApiModel.disabled)throw new Error("CmpApi Disabled");r.CmpApiModel.cmpStatus=i.CmpStatus.LOADED,t?(r.CmpApiModel.displayStatus=i.DisplayStatus.VISIBLE,r.CmpApiModel.eventStatus=i.EventStatus.CMP_UI_SHOWN):void 0===r.CmpApiModel.tcModel?(r.CmpApiModel.displayStatus=i.DisplayStatus.DISABLED,r.CmpApiModel.eventStatus=i.EventStatus.TC_LOADED):(r.CmpApiModel.displayStatus=i.DisplayStatus.HIDDEN,r.CmpApiModel.eventStatus=i.EventStatus.USER_ACTION_COMPLETE),r.CmpApiModel.gdprApplies=null!==e,r.CmpApiModel.gdprApplies?(""===e?(r.CmpApiModel.tcModel=new a.TCModel,r.CmpApiModel.tcModel.cmpId=r.CmpApiModel.cmpId,r.CmpApiModel.tcModel.cmpVersion=r.CmpApiModel.cmpVersion):r.CmpApiModel.tcModel=a.TCString.decode(e),r.CmpApiModel.tcModel.isServiceSpecific=this.isServiceSpecific,r.CmpApiModel.tcfPolicyVersion=+r.CmpApiModel.tcModel.policyVersion,r.CmpApiModel.tcString=e,o.AdditionalModel.addtlConsent=n.addtlConsent,o.AdditionalModel.acmVersion=n.acmVersion,o.AdditionalModel.nrvString=n.nrvString,o.AdditionalModel.repromptVersion=n.repromptVersion,o.AdditionalModel.nrvVersion=n.nrvVersion):r.CmpApiModel.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():r.CmpApiModel.eventQueue.exec(),this.numUpdates++},e.prototype.disable=e}();t.CmpApi=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),s=n(13).Command);t.PingCommand=s},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),s=n(9),a=i.GetTCDataCommand);t.GetInAppTCDataCommand=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(13),a=n(0),u=s.Command);t.GetVendorListCommand=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(12).GetTCDataCommand);t.AddEventListenerCommand=s},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=;Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(13).Command);t.RemoveEventListenerCommand=s},function(e,t,n){"use strict";n.r(t);var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,o="URLSearchParams"in r,i="Symbol"in r&&"iterator"in Symbol,s="FileReader"in r&&"Blob"in r&&),a="FormData"in r,u="ArrayBuffer"in r;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||pe.append=h.prototype.delete=h.prototype.get=h.prototype.has=h.prototype.set=h.prototype.forEach=h.prototype.keys=h.prototype.values=h.prototype.entries=i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];rototype.clone=b.call(w.prototype),b.call(O.prototype),O.prototype.clone=O.error=var E=[301,302,303,307,308];O.redirect=var S=r.DOMException;try{new S}catch(e){(S=.prototype=Object.create(Error.prototype),S.prototype.constructor=S}unction V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}I.polyfill=!0,r.fetch||(r.fetch=I,r.Headers=h,r.Request=w,r.Response=O);var A=window,T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"app",r=arguments.length>2?arguments[2]:void 0;V(this,e),this.ns=t,this.id=r&&String(r)||Math.random().toString(36).substring(2),this.sender=n}var t,n,r;return t=e,(n=[{key:"emit",value:,{key:"on",value:,{key:"once",value:])&&P(t.prototype,n),r&&P(t,r),e}(),L=n(42),M=n(1),j=n(0);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e){var t=n=function(e){var n;return(n=e,Array.from(new Set(Object.values(n).map(t).flat()))).reduce((,{})};return Object.entries(e).reduce((,{vendors:{},purposes:{},specialFeatures:{}})}var B=function(e){var t,n,r=e.tcModel,o=r.vendorConsents,i=r.purposeConsents,s=r.specialFeatureOptins,a=(t=e.tcModel,e.hasUserSelectedTheirPreference?{purposeLegitimateInterests:t.purposeLegitimateInterests,vendorLegitimateInterests:t.vendorLegitimateInterests}:function(){var e=new j.Vector;e.setAll(t.gvl.purposes);var n=new j.Vector;return n.setAll(t.gvl.vendors),{vendorLegitimateInterests:n,purposeLegitimateInterests:e}}()),u=a.vendorLegitimateInterests,c=a.purposeLegitimateInterests;return U(U({},F({vendors:{consent:(n={vendorConsents:o,vendorLegitimateInterests:u,purposeConsents:i,purposeLegitimateInterests:c,specialFeatureOptins:s}).vendorConsents,legInterest:n.vendorLegitimateInterests},purposes:{consent:n.purposeConsents,legInterest:n.purposeLegitimateInterests},specialFeatures:{optIn:n.specialFeatureOptins}})),{},{nonTcfVendors:e.acmVendors.consents||{},nonRegisteredVendors:e.nonRegisteredVendors.consents||{}})},N=n(45),G=n.n(N),H=[{type:"purposes",id:1},{type:"stacks",id:42}],J=n(14);ction K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e){var t=e.cmpModel,n=e.currentLevel,r=e.log,o=e.uiLevel,i=t.tcModel.gvl,s=i.purposes,a=i.specialPurposes,u=i.features,c=i.specialFeatures,l=G()(i.stacks,[42]),p=function(e){var t=new Set(W(J.a));return Object.entries(e).reduce((function(e,n){var r=Q(n,2),o=r[0],i=r[1];return i.purposes=Array.from(new Set([].concat(W(i.purposes),W(i.flexiblePurposes.filter(())))),i.legIntPurposes=i.legIntPurposes.filter((),e[o]=i,e}),{})}(JSON.parse(JSON.stringify(i.vendors)),r)),d=B(t);return{config:{hash:{purposes:s,specialPurposes:a,features:u,specialFeatures:c,vendors:p,stacks:l,nonTcfVendors:t.acmVendors.cvl,nonRegisteredVendors:t.nonRegisteredVendors.cvl},userPrefs:d,displayPurposes:H},currentLevel:o||n}}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var te=Object(M.a)();var ne=new WeakMap,re=function(){function e(t){var n=t.brand,r=t.uiScriptUrl,o=t.renderPlatform,i=t.uiLevel,s=t.clientBroker;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ne.set(this,{writable:!0,value:void 0}),this.scriptLoaded=!1,this.brand=n,this.uiScriptUrl=r,this.renderPlatform=o,this.uiLevel=i,this.clientBroker=s,this.brokerId=Math.random().toString(36).substring(2),this.broker=new T("@mol-fe/mol-fe-cmp","@mol-ads/mol-ads-tcf",this.brokerId),this.open=this.open.bind(this),ee(this,ne)}var t,n,r;return t=e,(n=[{key:"open",value:function(e,t){var n=this,r=t.cmpModel,o=t.cmpUpdateHandlers,i=z({cmpModel:r,currentLevel:this.uiLevel,log:te,uiLevel:e});if(te("open",i),function(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,ne,new Promise(()),this.scriptLoaded)this.broker.emit("open",i);else{var s=this.broker,o.reloadTcModel);!this.broker,this.clientBroker,o,s),this.uiScriptUrl,$($({},i),{},{renderPlatform:this.renderPlatform,brand:this.brand,id:this.brokerId})),this.scriptLoaded=!0}}},{key:"close",value:,{key:"notifyUserPreferenceCaptured",value:])&&Z(t.prototype,n),r&&Z(t,r),e}();unction ie(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){ie(i,r,o,s,a,"next",e)}function a(e){ie(i,r,o,s,a,"throw",e)}s(void 0)}))}}var ae=Object(M.a)(),ue=function(e){["complete","loaded","interactive"].includes(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)};unction le(){return(le=se(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var i="".concat(r,"/storage/index.html"),s=M.b?"".concat(i,"?adsDebug=tcfv2"):i,a=document.createElement("iframe");a.style.display="none",a.title="TCFV2 Storage",a.src="".concat(s,"#brokerId=").concat(n);var u=function(){var e=se(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((,e)})));return function(){return e.apply(this,arguments)}}();a.addEventListener("load",u),a.addEventListener("error",o),t.on("storageLoaded",(),ue(()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fe(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function he(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){fe(i,r,o,s,a,"next",e)}function a(e){fe(i,r,o,s,a,"throw",e)}s(void 0)}))}}unction ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}bject(M.a)(),Ie=function(e){!o,e);var t,n,r=(t=o,n=Ce(),;eturn me(o)}(_e(Error)),Ve=Pe=function(){var e=he(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:new Ie(t),e.next=3,Ve(t);case 3:throw n;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return new Promise((function(r,o){var i=Date.now(),s=function(){var a=he(regeneratorRuntime.mark((function a(){var u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e();case 2:(u=a.sent)?r(u):Date.now()-i<n?setTimeout(s,t):o(new Error("Timeout: exceeded ".concat(n,"ms")));case 4:case"end":return a.stop()}}),a)})));return ();s()}))},Te=function(e){var t,n,r="GET",o=3e3,i={};if("string"==typeof e)t=e;else{var s=e.method;r=void 0===s?"GET":s,t=e.url;var a=e.timeout;o=void 0===a?3e3:a;var u=e.headers;i=void 0===u?{}:u,n=e.data}var c=new XMLHttpRequest,l=new Promise((function(e,o){c.onreadystatechange=function(){4===this.readyState&&(this.status>199&&this.status<300?e(this.responseText):o(new Error("Error status ".concat(this.status,": ").concat(this.statusText))))},c.open(r,t,!0),Object.entries(i).forEach((),n?c.send(n):c.send()}));return o?function(e,t,n){return Promise.race([t,Pe(e,n)])}(o,l):l},Le=function(){function e(t){var n=t.backendUrl,r=t.channel,o=t.platform,i=t.domain,s=void 0===i?location.host:i;ge(this,e),this.backendUrl=n,this.channel=r,this.platform=o,this.domain=s||location.host,this.saveTCString=this.saveTCString.bind(this)}var t;return me(e,[{key:"saveTCString",value:(t=he(regeneratorRuntime.mark((function e(t){var n,r,o,i,s,a,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uuid,r=t.tcString,o=t.consentDegree,i=t.nrvString,s=t.addtlConsent,a=function(){var e=he(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Se("trying to send update to backend. payload:",t),e.next=4,Te({method:"POST",url:c.backendUrl,headers:{"Content-Type":"application/json"},data:JSON.stringify(t)});case 4:return Se("update sent to backend successfully"),e.abrupt("return",!0);case 8:e.prev=8,e.t0=e.catch(0),Se("send to backend failed with:",e.t0.message),Se("send to backend rescheduled 5s");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u={addtlConsent:s,consent:o,domain:this.domain,euconsent:r,nrvString:i,platform:this.platform,uuid:n,version:0},this.channel&&(u.channel=this.channel),e.next=6,Ae((,1e4);case 6:case"end":return e.stop()}}),e,this)}))),}]),e}();e=Object(M.a)();var De=new WeakMap,Fe=function(){function e(t){!this,e),De.set(this,{writable:!0,value:void 0}),this,De,t)}var t,n,r;return t=e,(n=[{key:"getGVLVersions",value:function(e){var t=(e&&j.TCString.decode(e)||{}).vendorListVersion;xe("gvlVersion from tcString",t);var n=parseInt(ke(this,De).gvlUiVersion),r=t||n;return n=Math.max(r,n),xe("selected gvlVersions",{gvlVersion:r,gvlUiVersion:n}),{gvlVersion:r,gvlUiVersion:n}}},{key:"getCvlVersions",value:function(e){var t,n=parseInt(ke(this,De).cvlUiVersion);return e&&!Number(e)?t=e:ke(this,De).cvlVersion&&!Number(ke(this,De).cvlVersion)?t=ke(this,De).cvlVersion:n=(t=e?parseInt(e):ke(this,De).cvlVersion?parseInt(ke(this,De).cvlVersion):n)?Math.max(t,n):n,xe("selected cvlVersions",{cvlVersion:t,cvlUiVersion:n}),{cvlVersion:t,cvlUiVersion:n}}},{key:"getNrvVersions",value:function(e){var t=e?parseInt(e):void 0,n=parseInt(ke(this,De).nrvUiVersion);return n=t?Math.max(t,n):n,xe("selected nrvVersions",{nrvVersion:t,nrvUiVersion:n}),{nrvVersion:t,nrvUiVersion:n}}},{key:"getUserPreferences",value:function(e){return je(je({},(t=ke(this,De).tcString,n=ke(this,De).addtlConsent,r=ke(this,De).cvlVersion,o=ke(this,De).nrvString,i=ke(this,De).nrvVersion,a=(s=e||{}).tcString,u=void 0===a?void 0:a,c=s.nrvString,l=void 0===c?void 0:c,p=s.nrvVersion,d=void 0===p?void 0:p,f=s.addtlConsent,h=void 0===f?void 0:f,v=s.acmVersion,y={tcString:u,nrvString:l,nrvVersion:d,addtlConsent:h,cvlVersion:void 0===v?void 0:v},m={tcString:t,nrvString:o,nrvVersion:i,addtlConsent:n,cvlVersion:r},xe("clientString",t),xe("storedString",u),t&&u?function(e,t){var n=j.TCString.decode(e).lastUpdated,r=j.TCString.decode(t).lastUpdated;return xe("stored",n),xe("client",r),n>r?y:m}(u,t):t?m:y)),function(e,t,n){var r=(n||{}).repromptVersion,o=void 0===r?0:r,i=Math.max(e,o),s=Math.max(i,t);return xe("nextRepromptVersion",s),{nextRepromptVersion:s,repromptVersion:i}}(ke(this,De).repromptVersion,ke(this,De).nextRepromptVersion,e));var t,n,r,o,i,s,a,u,c,l,p,d,f,h,v,y,m}},{key:"get",value:])&&Ue(t.prototype,n),r&&Ue(t,r),e}();Je=Object(M.a)();unction We(e){return qe.apply(this,arguments)}function qe(){return(qe=He(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}unction ze(){return(ze=He(regeneratorRuntime.mark((function e(t){var n,r,o,i,s,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gvlVersion,r=t.cvlVersion,o=t.nrvVersion,i="//cmp.dmgmediaprivacy.co.uk/gvl/".concat(n,"/vendor-list.json"),s="//cmp.dmgmediaprivacy.co.uk/custom/".concat(r,"/vendor-list.json"),a="//cmp.dmgmediaprivacy.co.uk/nrv/".concat(o,"/vendor-list.json"),u=[We(i),We(s)],o&&u.push(We(a)),e.abrupt("return",Promise.all(u));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=He(regeneratorRuntime.mark((function e(t,n){var r,o,i,s,a,u,c,l,p,d,f,h,v,y,m,g,b,_,w,C,O,E,S,I,V,P,A,T,M,j,R,U,k,x,D,F,B,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.get(),Je("clientConfig",r),o=r.brokerId,i=r.controllerScriptBase,s=r.backendUrl,a=r.channel,u=r.platform,c=r.renderPlatform,l=r.storeUserPreference,p=r.uuid,e.t0=!!n.get("storeUserPreference"),!e.t0){e.next=8;break}return e.next=7,ce(t,o,i);case 7:e.t0=e.sent;case 8:return d=e.t0,f=d.tcData,h=d.iframe,v=n.getUserPreferences(f),Je("userPreferences",v),y=n.getGVLVersions(v.tcString),m=y.gvlVersion,g=y.gvlUiVersion,b=n.getNrvVersions(v.nrvVersion),_=b.nrvVersion,w=b.nrvUiVersion,C=n.getCvlVersions(v.cvlVersion),O=C.cvlVersion,E=C.cvlUiVersion,e.next=18,Ke({gvlVersion:m,cvlVersion:O,nrvVersion:_});case 18:return S=e.sent,I=Be(S,3),V=I[0],P=I[1],A=I[2],T=new Le({backendUrl:s,channel:a,platform:u||c}),M=Qe(t,n),j=v.addtlConsent,R=v.repromptVersion,U=v.nextRepromptVersion,k=v.nrvString,x=v.tcString,D={gvlJson:V,cvlJson:P,nrvJson:A,storeTcString:l,persist:T,ui:M,uuid:p,gvlVersion:m,gvlUiVersion:g,nrvVersion:_,nrvUiVersion:w,cvlVersion:O,cvlUiVersion:E,addtlConsent:j,repromptVersion:R,nextRepromptVersion:U,nrvString:k,tcString:x},e.next=29,Object(L.a)(D);case 29:return F=e.sent,Je("".concat(v.tcString?"Existing":"New"," User"),F.tcModel),B="true"===r.showUi||!0===r.showUi,t.emit("is_loaded"),N={ns:"@mol-ads/mol-ads-cmp",id:o,sender:"mol-ads/mol-ads-cmp",action:"is_loaded"},h&&h.contentWindow.postMessage(N,"*"),e.next=37,F.isReady();case 37:oe(t,F,M),B?F.openUi(r.uiLevel):F.notifyUsersPreferences(),t.emit("is_ready");case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}setTimeout((function(){var e=function(){var e=document.getElementById("mol-ads-tcfv2-script"),t=JSON.parse((null==e?void 0:e.dataset.opts)||"{}");return xe("config",t),new Fe(t)}(),t=e.get("brokerId");!new T("@mol-ads/mol-ads-cmp","mol-ads-cmp",t),e)}),10)}]);
//# sourceMappingURL=index.js.map