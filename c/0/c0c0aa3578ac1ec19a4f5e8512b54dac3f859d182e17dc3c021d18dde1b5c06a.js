!)({1:[function(e,t,i){!function(){const t=e("./js/ids.js"),i=e("./js/events.js"),n=e("just-detect-adblock"),o={ua:"https://traid.jixie.io/sync/prod",delay:0,bids:!1,tr:!0,up:!1,eidlist:[],uid2:!1,accountid:null,pmids:{},ids:{eids:{}},ab:!1,su:!1};function r(e,t){return e.accountid||t.accountid&&(e.accountid=t.accountid,e.bids&&(window._jxbidsq=window._jxbidsq||[],window._jxbidsq.push(["accountid",e.accountid]))),e.accountid}const s={partner_cookie:"kmps_usrid"};function d(){let d=null,a=window.jixie_o?window.jixie_o:s,c=null;a.logbids&&(a.sha256mail_cookie&&(d=function(e){const t=document.createElement("div");t.style.display="none";const i=document.createElement("iframe");i.height="1",i.frameborder="0",i.src=`https://scripts.jixie.media/jx-load-cookie.html?accountid=${e}`,t.appendChild(i),document.body.append(t)}.bind(null,a.accountid)),c=e("././js/bidsreporter2"));let l=function(e){let i=Object.assign({},o);return window.JXTRTESTENV&&(i.ua="https://traidxxxx.jixie.io/sync/prod"),"9262bf2590d558736cac4fff7978fcb1"==e.accountid&&-1==e.external_ids.indexOf("jxtoko")&&e.external_ids.push("jxtoko"),e.accountID&&(e.accountid=e.accountID),e.accountid&&(i.accountid=e.accountid),void 0!==e.idsonly&&e.idsonly&&(i.idsonly=!0),isNaN(e.delay)||(i.delay=e.delay),(navigator.doNotTrack||window.doNotTrack)&&("1"!==window.doNotTrack&&"1"!==navigator.doNotTrack&&"yes"!==navigator.doNotTrack||(i.tr=!1)),void 0===e.track||e.track||(i.tr=!1),e.userprofile&&(i.up=!0),e.logbids&&(i.bids=!0),i.uid2=t.getDoUid2(e.external_ids),i.tr&&e.external_ids&&e.external_ids.length>0&&(i.eidlist=t.getLegitEids(e.external_ids)),i}(a);l.tr&&(l.pmids=t.getpmidsObj(a.partner_cookie,a.sha256mail_cookie,a.sha256phone_cookie,a.sha256mail,a.md5mail)),d&&setTimeout(6e3),l.uid2?t.u2trigger(l.pmids):setTimeout(t.u2clear,4e3);let u=i.unbProcessEvts.bind(null,l);i.setEvtSendDelaySec(a.delay);let h=a.ad_blocker?n.detectAnyAdblocker():Promise.resolve(!1),f=a.delay?a.delay:0;f>0&&(f=Math.round(1e3*f));f?(p=f,new Promise(function(e){setTimeout(function(){e(!0)},p)})):Promise.resolve(!0);var p;let m=Promise.all([h]);var w=window.jixie_p;window.jixie_p=new function(){this.push=function(){for(var e=0;e<arguments.length;e++)try{let t=arguments[e];m.then(function(e){l.ab=e[0],(l.accountid||r(l,t))&&u(t)})}catch(e){}}};var g=!1;w&&(g=w.length>0,window.jixie_p.push.apply(window.jixie_p,w)),setTimeout(4e3),g||l.idsonly&&t.getGetIdsPromise(l)}var a,c,l,u;a=window,c=document,a.jxtrkr||(a.jxtrkr={},!window.Promise||!window.ActiveXObject&&"ActiveXObject"in window?(l=document.createElement("script"),(u=document.getElementsByTagName("script")[0]).parentNode.insertBefore(l,u),l.src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js",setTimeout(d,3e3)):/comp|inter|loaded/.test(c.readyState)?d():c.addEventListener("DOMContentLoaded",d))}()},{"././js/bidsreporter2":2,"./js/events.js":3,"./js/ids.js":4,"just-detect-adblock":6}],2:[function(e,t,i){!function(){const e=!1,i="2.1",n=3e4;var o="https://trabd.jixie.io/sync/hbbids_t?x=2";e&&(o="http://localhost:3000/sync/hbbids_t?x=2");var r=null;function s(){return r||window.jixie_o&&window.jixie_o.accountid&&(r=window.jixie_o.accountid),r}var d=0,a={},c=[],l={};onst h="requestId",f="nobid_",p="pending_",m="gam_",w="pending2_";function g(e){let t=-1;for(var i=0;i<e.length;i++){let n=e[i];n.v&&(-1==t||e[t].cpm<n.cpm)&&(t=i)}return t>-1?e[t].bidder:null}class v{constructor(e,t,i){this.bidwon0=0,this.bidwon1=0,this.cm=t,this.bidderseq=[],this.ns=e,this.jxonly="owpbjs"==e,this.nsidx=d++,this.numslots=0,this.numvw=0,this.sent=!1,this.gapfilled=!1,this.auctionId=i}fillSomeGaps(){!function(t,i,n,o,r,s){let d=null,a=null;if(e){let e=0,o=0;for(var c in n){e++;let t=n[c];for(var l=0;l<t.bids.length;l++)if(t.bids[l].v){t.dbgHasBid=1,o++;break}}d=window[t].getAllPrebidWinningBids().filter(e=>e.auctionId==i),a=window[t].getAllWinningBids().filter(e=>e.auctionId==i);let h="";for(var c in n)if(n[c].dbgHasBid){var u=document.getElementById(c);h+=" | "+c+":"+(null===u?"no":"yes")}console.log(`JX_ DEEP ns=${t}: loc=${d.length} ovr=${a.length} (bw=${r}, bwcfm=${s}) out of ${e} slots, ${o} with valid bids\n divs:\n${h}`)}for(var c in n){let e=n[c];if(-1==[p,w].indexOf(e.rendered))continue;d||(d=window[t].getAllPrebidWinningBids().filter(e=>e.auctionId==i),a=window[t].getAllWinningBids().filter(e=>e.auctionId==i));let o=a.find(e=>e.adUnitCode==c);if(o){let t=e.bids.find(e=>e.adIds.indexOf(o[h])>-1);t&&(e.winner=t.bidder,e.rendered=t.bidder)}else if(o=d.find(e=>e.adUnitCode==c)){let t=e.bids.find(e=>e.adIds.indexOf(o[h])>-1);t&&(e.winner=t.bidder,e.rendered=m)}}}(this.ns,this.auctionId,this.slots,0,this.bidwon0,this.bidwon1)}sendData(){if(this.sent)return;this.sent=!0,this.fillSomeGaps();let e=a[this.auctionId],t={version:i,accountid:s(),auctionid:e||this.auctionId,group:this.ns+"_"+this.nsidx,debug:"",slots:[],bidderseq:this.jxonly?this.bidderseq.filter(:this.bidderseq};for(var n in this.slots)"owpbjs"==this.ns&&(this.nsidx>20||n.length>50)||(this.jxonly?(0==this.slots[n].partners.length&&(this.slots[n].bids=[{bidder:"jxview",cpm:0,format:"banner",msresp:0,pb:"0.0",sz:"1x1"}]),t.slots.push(this.slots[n])):this.slots[n].bids.length&&t.slots.push(this.slots[n]));t.slots.length&&function(e){if(window&&window.navigator&&"function"==typeof window.navigator.sendBeacon&&"function"==typeof window.Blob)try{if(window.navigator.sendBeacon(o,e))return}catch(e){console.log(e)}fetch(o,{method:"POST",body:e,headers:{"Content-Type":"text/plain"}})}(JSON.stringify(t)),delete l[this.auctionId]}populate(t){for(var i in this.slots=function(t,i,n){let o={};for(var r=0;r<i.adUnitCodes.length;r++){let e=i.adUnitCodes[r];o[e]={slotid:e,partners:[],bids:[],viewable:0,winner:0,rendered:f}}for(r=0;r<i.bidderRequests.length;r++){let e=i.bidderRequests[r],t=e.bidderCode;if(!n||"jixie"==t)for(var s=0;s<e.bids.length;s++)o[e.bids[s].adUnitCode].partners.push(t)}for(r=0;r<i.bidsReceived.length;r++){let e=i.bidsReceived[r];if(n&&"jixie"!=e.bidder)continue;let s=e.adUnitCode;if(e.cpm>0){o[s].rendered=p;let i=t?e.cpm*t:e.cpm,n=o[s].bids.find(t=>t.bidder==e.bidder);n?i>n.cpm&&(n.adIds.push(e[h]),n.cpm=i,n.sz=e.width+"x"+e.height,n.msresp=e.timeToRespond):o[s].bids.push({adIds:[e[h]],bidder:e.bidder,cpm:i,sz:e.width+"x"+e.height,msresp:e.timeToRespond,v:1})}}if(i.bidsRejected)for(r=0;r<i.bidsRejected.length;r++){let s=i.bidsRejected[r];if(n&&"jixie"!=s.bidder)continue;let d=s.adUnitCode;if(o[d]){let i=t?s.cpm*t:s.cpm,n=o[d].bids.find(e=>e.bidder==s.bidder);n?i>n.cpm&&(n.adIds.push(s[h]),n.cpm=i,n.sz=s.width+"x"+s.height,n.msresp=s.timeToRespond,n.rR=e?s.rejectionReason:""):o[d].bids.push({adIds:[s[h]],bidder:s.bidder,cpm:i,sz:s.width+"x"+s.height,msresp:s.timeToRespond,v:0,rR:e?s.rejectionReason:""})}}for(var d in o){let e=o[d];e.partners=e.partners.filter(;let t=g(e.bids);t&&(e.winner=t)}return o}(this.cm,t,this.jxonly),this.slots)this.numslots++;let o=this;setTimeout(function(){o.fillSomeGaps()},5e3),setTimeout(function(){o.sendData()},n)}viss(e){for(var t=0;t<e.length;t++){let i=this.slots[e[t]];i&&!i.viewable&&(i.viewable=1,this.numvw++)}if(this.numvw==this.numslots){let e=this;setTimeout(5e3)}}timeouts(e){let t=this.jxonly;for(var i=0;i<e.length;i++){let n=e[i];if(t&&"jixie"!=n.bidder)continue;let o=this.slots[n.adUnitCode];if(o){o.bids.find(||o.bids.push({bidder:n.bidder,pb:"-1"})}}}addBidRequests(e){for(var t=0;t<e.length;t++)this.bidderseq.push(e[t].bidderCode)}bidWons(e){for(var t=0;t<e.length;t++){this.bidwon0++;let i=e[t],n=this.slots[i.adUnitCode];if(n){n.bids.find(&&(this.bidwon1++,n.winner=i.bidder,n.rendered=i.bidder)}}}}function _(e){try{s();let n=e.auctionId;if(u(n))return;void 0==this.cm&&(this.cm=function(e){try{let t=window[e].getConfig().currency;if(!t)return 0;let i,n=t.adServerCurrency,o=t.rates.USD;if(void 0!==o[n]&&(i=1/o[n]),!isNaN(i))return i}catch(e){}return 0}(this.ns));let o=new v(this.ns,this.cm,n);i=o,l[n]=i,o.populate(e);let r=window[this.ns].getEvents(),d=r.filter(e=>"bidTimeout"==e.eventType&&e.args[0].auctionId==n);if(d)for(var t=0;t<d.length;t++)o.timeouts(d[t].args);let a=(d=r.filter().filter(e=>"bidWon"==e.eventType);a&&o.bidWons(a.map(e=>e.args)),(a=d.filter(e=>"bidRequested"==e.eventType))&&o.addBidRequests(a.map(e=>e.args)),d=c,o.viss(d)}catch(e){console.log("_JX_ EXCEPTION"),console.log(e)}var i}function x(e){let t=u(e.auctionId);t&&t.bidWons([e])}function b(e){let t=u(e.auctionId);t&&t.timeouts([e])}function y(e){let t=e.auctionId,i=function(e){if("function"==typeof window[e].getConfig){let t=window[e].getConfig("jixie");if("object"==typeof t&&"string"==typeof t.aid)return t.aid}return null}(this.ns);i&&(a[t]=i)}function j(e){let t=y.bind({ns:e}),i=_.bind({ns:e,cm:void 0}),n=window[e].getEvents(),o=n.filter(e=>"auctionInit"==e.eventType).map(e=>e.args);1==o.length&&t(o[0]),(o=n.filter(.map().length&&i(o[0]),window[e].onEvent("auctionInit",t),window[e].onEvent("auctionEnd",i),window[e].onEvent("bidWon",x),window[e].onEvent("bidTimeout",b)}function k(e){let t=e.slot.getSlotElementId();for(var i in-1==c.indexOf(t)&&c.push(t),l)l.hasOwnProperty(i)&&l[i].viss([t])}var I=["pbjs","jxpbjs","owpbjs"];function T(e){for(var t in l)l[t]&&l[t].sendData(e)}window&&window.jixie_o&&"jxpbjs"==window.jixie_o.pbjs_name&&(I=["jxpbjs"]),function(){window.googletag=window.googletag||{cmd:[]},googletag.cmd.push(;var e=window._pbjsGlobals,t=[];if(Array.isArray(e)&&e.length)for(var i=0;i<e.length;i++){let n=e[i];I.indexOf(n)>-1&&(t.push(n),window[n].que.push(function(){j(n)}))}for(i=0;i<I.length;i++){let e=I[i];-1==t.indexOf(e)&&(window[e]=window[e]||{},window[e].que=window[e].que||[],window[e].que.push()}}(),document.addEventListener("visibilitychange",,window.addEventListener("pagehide",!1),t.exports.init=function(e,t=null){t&&(r=t)}}()},{}],3:[function(e,t,i){const n=e("./util.js"),o=e("./ids.js"),r={client_id:"00000000-0000-0000-0000-000000000000",sid:"000000000-00000000-0000-0000-0000-000000000000"},s={},d=["visit","viewhome","viewsection","startfunnel","funnelcompleted"],a=["autovisit","visit","viewhome","viewsection"],c=["visit","viewhome","viewsection"],l=["startfunnel","funnelcompleted","addcart","viewitem"],u=Math.floor(9999*Math.random())+1+"-"+Date.now(),h="_jxpitems";var f=0,p=[],m=5,w=0,g=0;t.exports.setEvtSendDelaySec=function(e){e&&0==g&&(m=1,w=1e3*e)},t.exports.unbProcessEvts=function(e,t){if(!("string"==typeof t.action&&t.action.length>4))return;let i=t.sha256mail;o.getGetIdsPromise(e,t.partner_id,i).then(function(i){{let o=!1,v=t.action.toLowerCase();if(a.indexOf(v)>-1&&(e.pubPgEvtSent&&(o=!0),"autovisit"==v&&(v="visit")),d.indexOf(v)>-1&&(e.pubPgEvtSent=!0),o)return;let _=document,x=i?e.ids:r,b=i?e.pmids:s,y={accountid:e.accountid,client_id:x.client_id,sid:x.sid,email:b.mhsha256,adblocker:e.ab,referer:_.location.href,action:v,profile:x.su||e.su};_.referrer&&(y.p_domain=_.referrer);let j=null,k=_.querySelector("link[rel='canonical']");if(k&&(j=k.getAttribute("href")),j&&(y.canonical_url=j),b.pid&&(y.partner_id=b.pid),x.cid&&(y.cid=x.cid),x.cht&&(y.cht=x.cht),x.recoid&&(y.recoid=x.recoid),y.merged=!!x.merged,t.parameters&&(y.payload=function(e,t){var i;switch(e){case"viewsection":i={category:t.category||""};break;case"viewitem":i={itemid:t.parameters.itemid||"",price:t.parameters.price||0,availability:t.parameters.availability||"",currency:t.parameters.currency||""};break;case"viewlist":i={items:t.parameters.items||[],category:t.parameters.category||"",page:t.parameters.page||1};break;case"viewsearch":i={items:t.parameters.items||[],keywords:t.parameters.keywords||[],page:t.parameters.page||1};break;case"viewcart":i={items:t.parameters.items&&Array.isArray(t.parameters.items)?t.parameters.items.map(function(e){return{itemid:e.itemid||"",price:e.price||0,quantity:e.quantity||1,currency:e.currency||""}}):[]};break;case"addcart":i={itemid:t.parameters.itemid||"",price:t.parameters.price||0,quantity:t.parameters.quantity||1,currency:t.parameters.currency||""};break;case"purchase":i={items:t.parameters.items&&Array.isArray(t.parameters.items)?t.parameters.items.map(:[],transactionid:t.parameters.transactionid||""};break;case"visit":if(!(i=t.parameters).keywords||!i.title||!i.description){let e=window.jixie_o;try{["keywords","title","description"].forEach(function(t){if(!i[t]){let n=null;if("title"==t?n=window.document.title:(n=window.document.querySelector('meta[name="'+t+'"]'))&&(n=n.content),!n&&e){let i=e[t+"meta"];i&&(n=window.document.querySelector('meta[name="'+i+'"]'))&&(n=n.content)}n&&(i[t]=n)}})}catch(e){}}break;default:i=t.parameters}return i}(y.action,t)),l.indexOf(v)>-1){let e=y.payload?y.payload:{};l.indexOf(v)>-1&&(e.uniquets=u,e.evtts=Date.now()),y.payload=e}if(c.indexOf(y.action)>-1){let e=function(e=null){let t=n.getLocalStorage(),i=t.getItem(h);if(i)try{i=JSON.parse(i)}catch(e){i=[]}else i=[];if(e){let n=i.indexOf(e);n>-1&&i.splice(n,1),i.push(e),i.length>15&&i.shift(),t.setItem(h,JSON.stringify(i))}return i}(t.parameters&&t.parameters.itemid?t.parameters.itemid:null);e&&e.length>0&&(e.length>10&&e.splice(0,e.length-10),y.history=e)}!function e(t){if(g++,f<m){f++;let i={method:"POST",withCredentials:!0,contentType:"application/json",data:JSON.stringify(t.body)};n.makeJxNwPromise(t.url,i).then(function(){return!w||new Promise(}).finally(function(){f--,p.length&&e.apply(null,p.shift())})}else p.push(arguments)}({url:e.ua,body:y})}})}},{"./ids.js":4,"./util.js":5}],4:[function(e,t,i){const n=e("./util.js"),o=n.consoleLogIt;var r=["_jxx","_jx"],s=["_jxxs","_jxs"],d="_jxx",a="_jxxs",c="_jxrecoid";const l=2592002,u=720;var h=20,f=1200,p=43200;window.JXTRTESTENV&&(h=10,f=60,p=60);var m=86400;window.JXTRTESTENV&&(m=60);window.JXTRTESTENV;const w=86400;window.JXTRTESTENV;var g="https://traid.jixie.io/api/",v="https://traid.jixie.io/api/";window.JXTRTESTENV&&(g="https://traid-dev.jixie.io/id/",v="https://traid-dev.jixie.io/id/");const _="jXc_",x="_",b="jxc_";function y(e){let t=e.find(e=>e.n==a);if(t){let e=n.getCookieRaw_(a);e&&(e=e.split(b)).length>=2&&(t.v=t.v+x+t.d.getTime()+b+e[1],t.d=X())}if(t=e.find(){let e=n.getCookieRaw_(a);e&&(e=e.split(b)),t.n=a,t.v=(e?e[0]:"")+b+t.v}n.writeC_(e)}function j(){let e=n.getParsedCk_();if(e[a]){let t=e[a].split(b);if(t.length>=2&&(e[a]=t[0]),(t=e[a].split(x)).length>=2){let i=parseInt(t[1]);!isNaN(i)&&i<Date.now()?delete e[a]:e[a]=t[0]}}return e}const k={tdid:{u:"https://match.adsrvr.org/track/rid?ttd_pid=xuz42kb&fmt=json",n:"_jxtdid",njxc:"tdid",f:"TDID",t:"ttd"},ghid:{pct_traffic_min:90,withCredentials:!1,u:"https://idm.ghtinc.com/cm?cn=kg&cuid=%%_JX%%",n:"_jxghid",f:"id",t:"gh",lv:365},jxtoko:{method:"POST",u:"https://accounts.tokopedia.com/upkiejson",n:"_jxtoko",njxc:"toko",fcn:function(e){if(e&&"OK"==e.status&&e.data)return e=e.data,{k:"jxtoko",v:btoa(JSON.stringify(e))};return{}},lv:1},ifo:{b:"infomo",u:"https://publisher.torcai.com/audtrack/cookiesync/ckread/write",n:"_jxifo",njxc:"ifo",fcn:function(e){return e&&e.responseCode&&"success"==e.responseCode.status&&e.responseList?{k:"ifo",v:e.responseList.cookieId}:{}}}};function I(e,t,i=null){let o="",r="",s=!0,d=[],a=null;switch(t.action){case"retrieveIdFromCk":o="loaduser",a={error:!0};break;case"retrieveSysIdForEmail":o="findid",r="emailsha="+t.mhsha256,a={error:!0};break;case"getNewId":o="newid",s=!1,a={error:!0};break;case"userProfile":o="userProfile",r="client_id="+t.client_id+"&info=interests-short,intends-short,cohort,encio",t.accountid&&(r+="&accountid="+t.accountid);break;case"syncIds":{o="usersync";let e=[];for(var c in t.newid&&e.push(t.newid+":njx"),t.idlist.forEach(,t.pidlist&&t.pidlist.forEach(,t.mhsha256&&e.push(t.mhsha256+":emailsha"),t.phsha256&&e.push(t.phsha256+":phonesha"),t.mhmd5&&e.push(t.mhmd5+":email"),t.eids)t.eids[c]&&k[c].t&&e.push(t.eids[c]+":"+k[c].t);t.wp&&d.push("info=interests-short,intends-short,cohort,encio"),e.length&&d.push("idlist="+e.join(",")),t.sid&&d.push("sid="+t.sid),t.wp&&t.accountid&&d.push("accountid="+t.accountid),r=d.join("&"),a={}}}let l={method:"GET",withCredentials:s};return""==r?r="accountid="+e:-1==r.indexOf("accountid=")&&(r+="&accountid="+e),n.makeJxNwPromise(v+o+(r?"?"+r:""),l).then(.catch(}const T=["null","undefined"];function N(e){return e&&(T.indexOf(e)>-1&&(e=null),e&&e.length<15&&(e=null)),e}t.exports.getpmidsObj=function(e,t,i,o,r){let s={pids:[]};if(s.pc=e,s.mhc=t,s.phc=i,s.mhmd5=r,s.mhsha256=o,s.pc||s.mhc||s.phc){let e=j(),t=e[s.mhc];(t=N(t))&&(s.mhsha256=t);let i=e[s.pc];i&&(s.pid=i);let n=e[s.phc];n&&(s.phsha256=n)}s.pid&&s.pids.push(s.pid);var d=function(e,t){try{var i=n.getLocalStorage(),o={msha:null,psha:null};return e?o.msha=i.getItem("_jxmsha"):i.removeItem("_jxmsha"),t?o.psha=i.getItem("_jxpsha"):i.removeItem("_jxpsha"),e&&function(e,t){try{var i=n.getLocalStorage();e&&i.setItem("_jxmsha",e),t&&i.setItem("_jxpsha",t)}catch(e){return void console.log("Local storage cannot be accessed: "+e.message)}}(e,null),o}catch(e){return console.log("Local storage cannot be accessed: "+e.message),{msha:null,psha:null}}}(s.mhsha256,s.phsha256);return s.mshals=d.msha,s.pshals=d.psha,s};var E=null,S=!0;function O(e,t){setTimeout(function(){(new Image).src="https://prebid.jixie.io/setuid?bidder=".concat(e,"&uid=").concat(t)},1e3)}function C(e,t,i=!1){if("string"==typeof e){if(!i)return void O(t,e);new Promise(.then(function(e){return n.makeJxNwPromise("https://prebid.jixie.io/cookie_sync",{method:"POST",data:JSON.stringify({limit:1,bidders:[t]}),withCredentials:!0,contentType:"application/json"})}).then(i=>{"ok"==i.status&&i.bidder_status&&i.bidder_status.length>0&&!0===i.bidder_status[0].no_cookie&&O(t,e)}).catch(function(){})}}function D(e){e&&e.client_id&&(e.newid=!0)}unction J(e,t=!1){let i;return I(e,{action:"getNewId"}).then(function(t){return i=t.client_id,I(e,{action:"retrieveIdFromCk"})}).then(function(e){return{client_id:i,client_id_in_cookie:e.client_id,needsync:t,needcookie:!e.client_id,njx:!0}}).catch(}function R(e,t,i){let o=i.mhsha256;t||(t=parseInt(Date.now()/1e3));let r=function(e){let t=function(){let e={};try{let o=n.getLocalStorage();e.id=o.getItem(d),e.sid=o),e.cid=function(e,t,i){try{const n=e.getItem(t);if(!n)return null;if(n&&"string"==typeof n){let e=n.split("-");if(e&&e.length>=2){let t=e.shift();if(!isNaN(t)){let e=parseInt(t),o=Math.round((new Date).getTime()/1e3);if(o>e&&o-e<i)return n}}}return n&&e.removeItem(t),null}catch(e){return null}}(o,"_jxcid",l),e.cht=o.getItem("_jxcht"),"string"==typeof e.cht&&z({cht:e.cht}),e.mts=o.getItem("_jxmu");var t=parseInt(e.mts);isNaN(t)?e.mts=0:(e.mts=t,parseInt(Date.now()/1e3)-t>m&&(e.mts=0)),e.It=o.getItem("_jxIt");var i=parseInt(e.It);isNaN(i)?e.It=0:e.It=i;try{e.itr=JSON.parse(o.getItem("_jxitr")),e.itd=JSON.parse(o.getItem("_jxitd"))}catch(t){e.It=0}!e.itr||Array.isArray(e.itr)&&0!=e.itr.length||(e.itr=null),!e.itd||Array.isArray(e.itd)&&0!=e.itd.length||(e.itd=null);try{e.ids=JSON.parse(o.getItem("_jxids"))}catch(e){}}catch(e){}return e}(),i=function(e){let t=j(),i=function(e){let t={};return t.id=void 0!==e[d]?e[d]:null,t.sid=void 0!==e[a]?e[a]:null,t.cid=void 0!==e._jxcid?e._jxcid:null,t.recoid=void 0!==e[c]?e[c]:null,t}(t);return i.eids={},e.forEach(,e.forEach(function(e){let n=k[e].n;t[n]&&(i.eids[e]=t[n])}),i}(e),o=document,r=[],s=null,u=null;t.id&&t.id!==s&&(r.push(t.id),s||(s=t.id));i.id&&i.id!==s&&(r.push(i.id),s||(s=i.id));let h=parseInt(Date.now()/1e3);t.sid=B(t.sid,h),i.sid=B(i.sid,h);let f=B(M(o.location.href,"jxsid"),h);A(f)?(u=V(f,h))&&!s&&(s=f.client_id,r.push(s)):A(i.sid)?u=V(i.sid,h):A(t.sid)&&(u=V(t.sid,h));s||window.new_client_id_jxads&&(s=window.new_client_id_jxads);if(!u){let e=null;f&&(e=f.client_id),!e&&i.sid&&(e=i.sid.client_id),!e&&t.sid&&(e=t.sid.client_id),!e&&s&&(e=s),e&&(u=F(e))}let p=M(o.location.href,"jxcid");(p=L(p)?(w=p,parseInt(Date.now()/1e3)+"-"+w):null)||(p=t.cid?t.cid:i.cid?i.cid:null);var w;let g=i.recoid;g||(g=M(o.location.href,"jxrecoid"))&&y([{n:c,v:g,d:U()}]);(s||u||p)&&q(s,u,p,null,null,null,null,null);let v={client_id:s,sid:u,cid:function(e){if(e&&"string"==typeof e){let t=e.split("-");if(t&&2==t.length)return t[1];if(t){if(2==t.length)return t[1];if(1==t.length&&L(t[0]))return t[0]}}return null}(p),idlist:r,eids:i.eids,mts:t.mts};i.pid&&(v.pid=i.pid);t.It&&(v.It=t.It);t.itd&&(v.itd=t.itd);t.itr&&(v.itr=t.itr);t.cht&&(v.cht=t.cht);g&&(v.recoid=g);return v}(e.eidlist);window.JXTRTESTENV&&n.addDebug("starter",r);let s=null,u=null,h=!1;return o&&(i.mshals?o!==i.mshals&&(h=!0):h=!0),r.client_id?r.mts&&t-r.mts<m?(P(`has1Party(recentlySynced) -> FOUND! (used threshold = ${m} sec)`),s=Promise.resolve({client_id:r.client_id})):(P(`has1Party(not recentlySync - more than ${m}sec ago)`),s=o?I(e.accountid,{action:"retrieveSysIdForEmail",mhsha256:o}).then(function(t){return t.client_id?(t.encio&&z(t),P(`hasOld1Party -> hasMail (${o}) with jxid (${t.client_id}) -> FOUND!`),{client_id:t.client_id}):t.error?{error:!0}:(P(`hasOld1Party -> hasMail (${o}) no jxid -> MAKING_EXTCK!`),J(e.accountid,!0))}).catch(function(e){return{error:!0}}):I(e.accountid,{action:"retrieveIdFromCk"}).then(function(e){return e.client_id==r.client_id?(P(`hasOld1Party -> noMail -> idInCk is same ${e.client_id} -> FOUND!`),{client_id:r.client_id}):e.error?{error:!0}:e.client_id?(P(`hasOld1Party -> noMail -> found idInCk which is diff from 1p: (${r.client_id} vs ${e.client_id}) -> NEED SYNC!`),{client_id:r.client_id,client_id_in_cookie:e.client_id,needsync:!0}):(P("hasOld1Party -> noMail -> no idInCk found"),{client_id:r.client_id,needcookie:!0})}).catch(function(e){return{error:!0}})):s=o?I(e.accountid,{action:"retrieveSysIdForEmail",mhsha256:o}).then(function(t){return t.client_id?(t.encio&&z(t),P(`No1Party -> hasMail (${o}) with jxid (${t.client_id}) -> FOUND!`),{client_id:t.client_id}):t.error?{error:!0}:(P(`No1Party -> hasMail (${o}) with no jxid -> MAKING_EXTCK!`),J(e.accountid,!0))}).catch(function(e){return{error:!0}}):I(e.accountid,{action:"retrieveIdFromCk"}).then(function(t){return t.client_id?(P(`no1Party -> noMail -> hasCk (${t.client_id}) -> FOUND!`),{client_id:t.client_id}):t.error?void 0:(P("no1Party -> noMail -> noCk -> MAKING NEW!"),I(e.accountid,{action:"getNewId"},D))}).catch(,s.then(function(e){if(u=JSON.parse(JSON.stringify(e)),e.error||!u||!u.client_id)throw new Error("resp.error||idsJob||!idsJob.client_id");e.needsync||u.client_id!=r.client_id&&(r.client_id=u.client_id,r.sid||(r.sid=F(u.client_id)),q(r.client_id,r.sid));let t=[];for(var i in r.eids)"ifo"==i&&r.eids[i]&&C(r.eids[i],k[i].b,!0),!r.eids[i]&&k[i]&&t.push(i);return t.length?function(e,t){let i=[];for(var o=0;o<t.length;o++){let r=t[o],s=k[r];if(!s)continue;let d=!0;!1===s.withCredentials&&(d=!1);let a=s.u;a=a.replace("%%_JX%%",e);let c=n.makeJxNwPromise(a,{method:s.method?s.method:"GET",withCredentials:d,contentType:"POST"!=s.method?"application/json":null}).then(e=>{if(s.fcn){let t=s.fcn(e);return s.b&&C(t.v,s.b),t}if(e[s.f]){let t=e[s.f];return s.b&&C(t,s.b),{k:r,v:t}}return{}}).catch(function(e){return console.log(`e id failure for ${a} ${JSON.stringify(s)}`),console.log(e),{}});i.push(c)}return Promise.all(i)}(r.client_id,t):null}).then(function(n){let s=!1;if(n&&(n=n.filter().length&&(s=!0,function(e,t){let i=[],n=null;t.forEach(function(t){if(t&&t.k){let o=t.k;if(e[o]=t.v,k[o].n){let e=k[o].lv?k[o].lv:60;i.push({n:k[o].n,v:t.v,d:new Date((new Date).setDate((new Date).getDate()+e))})}k[o].njxc&&(n||(n={}),n[k[o].njxc]=t.v)}}),i.length&&y(i);n&&z(n)}(r.eids,n)),P(`need call usersync (any one of 3 condition)? gotIdsToSync=${u.needsync} / need3pCookie=${u.needcookie} newEids=${s}`),u.needsync=u.needsync||u.needcookie||s||h,u.needsync){let t={action:"syncIds",accountid:e.accountid,wp:e.up,idlist:[],eids:r.eids,mhsha256:o,phsha256:i.phsha256,mhmd5:i.mhmd5,pidlist:i.pids};return u.njx?t.newid=u.client_id:t.idlist.push(u.client_id),r.client_id&&-1==t.idlist.indexOf(r.client_id)&&t.idlist.push(r.client_id),u.client_id_in_cookie&&t.idlist.push(u.client_id_in_cookie),r.sid&&(t.sid=r.sid),I(e.accountid,t)}return e.up&&!u.newid&&(!r.It||t-r.It>w)?I(e.accountid,{action:"userProfile",client_id:u.client_id,accountid:e.accountid}):{nocall:!0}}).then(function(i){return i.error?r.client||u.client_id&&(r.client_id=u.client_id,r.sid||(r.sid=F(u.client_id)),q(r.client_id,r.sid)):1==i.nocall?(r.mts=t,q(null,null,null,r.mts)):(u.needsync&&(r.merged=u.client_id!=i.client_id,r.mts=t,r.client_id=i.client_id),e.up&&(r.It=t),r.sid||(i.session_id?r.sid=i.session_id:r.sid=F(r.client_id)),i.encio&&z(i),r.itr=i.interest,r.itd=i.intend,r.cht=i.cohort,"string"==typeof i.cohort&&z({cht:i.cohort}),(r.itr||r.itd)&&(e.su=!0),r.idlist=[r.client_id],q(r.client_id,r.sid,null,r.mts,e.up?r.It:null,i.interest,i.intend,i.cohort)),e.ids=JSON.parse(JSON.stringify(r)),window.JXTRTESTENV&&n.addDebug("final",e.ids),!0}).catch(function(t){return window.JXTRTESTENV&&n.addDebug("final","exception thrown somehow"),e.ids=JSON.parse(JSON.stringify(r)),e.ids.client_id?(window.JXTRTESTENV&&n.addDebug("final","still got some id to salvage. we use it"),!0):(window.JXTRTESTENV&&n.addDebug("final","No ids to salvage. We have no id to use"),!1)})}nction q(e,t,i,o,d,a,c,h){var f=[];if(e&&r.forEach(function(t){f.push({n:t,v:e,d:X()})}),t&&s.forEach(function(e){f.push({n:e,v:t,d:U()})}),i){let e=function(e,t=0){let i=e.split("-");if(i&&i.length>=2&&!isNaN(i[0])){let e=parseInt(i[0])+t;const n=parseInt(Date.now()/1e3);return e>n?e:null}return null}(i,l);e=e?new Date(1e3*e):new Date((new Date).setHours((new Date).getHours()+u)),f.push({n:"_jxcid",v:i,d:e})}return f.length>0&&y(f),function(e,t,i,o,d,a,c,l){try{var u=n.getLocalStorage();if(e&&$(u,r,e),t&&$(u,s,t),i&&u.setItem("_jxcid",i),l&&u.setItem("_jxcht",l),o&&o>0&&u.setItem("_jxmu",o),d&&d>0&&u.setItem("_jxIt",d),a&&a.length>0)try{var h=JSON.parse(u.getItem("_jxitr"));h||(h=[]),h=a.concat(h.filter(e=>a.indexOf(e)<0)),u.setItem("_jxitr",JSON.stringify(h))}catch(e){u.setItem("_jxitr",JSON.stringify(a))}if(c&&c.length>0)try{var f=JSON.parse(u.getItem("_jxitd"));f||(f=[]),f=c.concat(f.filter(),u.setItem("_jxitd",JSON.stringify(f))}catch(e){u.setItem("_jxitd",JSON.stringify(c))}return}catch(e){return void console.log("Local storage cannot be accessed: "+e.message)}}(e,t,i,o,d,a,c,h)}var X=function(){return new Date((new Date).setFullYear((new Date).getFullYear()+1))},U=function(){return new Date((new Date).setMinutes((new Date).getMinutes()+h))};function M(e,t){return e?decodeURIComponent(e.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1")):null}function L(e){var t=Math.floor(Number(e));return t!==1/0&&String(t)===e&&t>0}function B(e,t){if(e&&e.length>46){let i=e,n=i.lastIndexOf("~"),o=0;n==i.length-11&&(o=i.substring(n+1),o=isNaN(o)?0:parseInt(o),i=i.substring(0,n));let r=i.split("-"),s=parseInt(r[0]);if(!isNaN(s)){r.shift();let i=r.join("-"),n=!1;if(i)return t-s<p&&(0==o||t-o<f)&&(n=!0),{ts:s,client_id:i,session_id:e,li:o,fresh:n}}}return null}function V(e,t){return e.ts+"-"+e.client_id+"~"+t}function F(e){let t=1e3*Math.floor(Date.now()/1e6);return window.JXTRTESTENV&&(t=1*Math.floor(Date.now()/1e3)),t+"-"+e+"~"+Math.floor(Date.now()/1e3)}const G="__uid2_advertising_token";function W(e){let t=j(),i=null;if(t._jxu2aux)try{i=JSON.parse(t._jxu2aux),o(`### ck_.jxu2aux ${JSON.stringify(i)}`)}catch(e){o(e.stack)}let n=Date.now();if(!t[G]||!i||i.re<n||1!=i.f)return o(`### | conditions to generate from scratch is true (${!t[G]} || ${!i} || ${i?i.re>n:"u2aux null"})`),void H(e,null);if(i&&1==i.f&&i.re>n){let t=i.rf-n;i.rrk&&t<1e4?(o(`### | conditions to refresh is true curr=${n}, refresh_expires=${i.re}, refresh_from=${t}`),H(null,i)):(o(`### | No need to refresh yet so scheduled next check to ${t} (${i.rf} - ${n})`),setTimeout(W,t,e))}}function H(e,t){let i=e?g+"ugen?mh="+e:g+"ufresh?rt="+encodeURIComponent(t.rt)+"&rrk="+encodeURIComponent(t.rrk);e||t&&t.f&&(i+="&f=1");let o=3e5;return n.makeJxNwPromise(i,{method:"GET",withCredentials:!0}).then(function(t){o="success"!=t.status?6e5:function(e){if("success"!=e.status)return 6e5;let t={rt:(e=e.body).refresh_token,te:e.identity_expires,re:e.refresh_expires,rf:e.refresh_from};e.f&&(t.f=1),e.refresh_response_key&&(t.rrk=e.refresh_response_key);const i=new Date(1*e.identity_expires),n=new Date(1*e.refresh_expires);y([{d:i,n:G,v:e.advertising_token},{d:n,n:"_jxu2aux",v:JSON.stringify(t)}]);let o=e.refresh_from-Date.now()+5e3;return z({uid2:e.advertising_token},e.identity_expires),o}(t),setTimeout(W,o,e)}).catch(function(t){o=3e5,setTimeout(W,o,e)})}function z(e){if(!e.encio&&!e.cht)return;let t=null;try{let e=function(){let e=n.getCookieRaw_(a);if(e){let t=e.split(b);if(2==t.length)return t[1]}return null}();e&&(t=JSON.parse(atob(e)))}catch(e){}t||(t={});try{let n=!1;["encio","cht"].forEach(function(i){e[i]&&(!t[i]||t[i]&&t[i].v!=e[i])&&(n=!0,t[i]={v:e[i]})}),n&&(i=btoa(JSON.stringify(t)),y([{n:_,v:i,d:X()}]))}catch(e){}var i}t.exports.getGetIdsPromise=function(e,t=null,i=null,n=null){if(!e.tr)return e.ids.client_id||(e.ids={client_id:"00000000-0000-0000-0000-000000000000",sid:"000000000-00000000-0000-0000-0000-000000000000~000000000",eids:{}}),Promise.resolve(!0);let o=!1;!function(e,t,i){let n=!1;i&&!e.mhsha256&&(e.mhsha256=i,n=!0),t&&(!e.pid||e.pid&&t!=e.pid)&&e.pids.length<2&&(e.pids.push(t),e.pid=t)}(e.pmids,t,i),S&&(S=!1);let r=null;e.ids.client_id||E||(o=!0),o||e.ids.mts&&(r||(r=parseInt(Date.now()/1e3)),r-e.ids.mts>m&&(o=!0)),o||e.ids.It&&(r||(r=parseInt(Date.now()/1e3)),r-e.ids.It>w&&(o=!0)),o&&(E=E?E.then(function(){return R(e,r,{mhsha256:e.pmids.mhsha256,pids:e.pmids.pids,mhmd5:e.pmids.mhmd5,mshals:e.pmids.mshals})}):R(e,r,{mhsha256:e.pmids.mhsha256,pids:e.pmids.pids,mhmd5:e.pmids.mhmd5,mshals:e.pmids.mshals}));return E||Promise.resolve(!1)},t.exports.getParsedCk=n.getParsedCk,t.exports.u2clear=function(){let e=new Date(Math.round((new Date).getTime())-3e3);y([{d:e,n:G,v:""},{d:e,n:"_jxu2aux",v:""}])},t.exports.u2trigger=function(e){let t=e.mhsha256,i=e.mhc,n=null;if(t&&(n=t),!n&&i){let e=j();e[i]&&(n=e[i])}(n=N(n))&&W(n)},t.exports.getLegitEids=function(e){let t=[];return e&&e.length>0&&e.forEach(function(e){"tdid2"!=e&&k[e]&&-1==t.indexOf(e)&&t.push(e)}),t},t.exports.getDoUid2=function(e){return e&&Array.isArray(e)&&e.indexOf("tdid2")>-1}},{"./util.js":5}],5:[function(e,t,i){var n=-1;function o(e,t){if(-1==n&&(n=document.getElementById("jxdbgtextarea")),!n)return;let i="";"object"==typeof t?i=JSON.stringify(t):"string"==typeof t&&(i=t),-1==e.indexOf("->")&&(e="\n"+e),n.value+=e+":"+i+"\n"}t.exports.consoleLogIt=t.exports.makeJxNwPromise=function(e,t){var i=new XMLHttpRequest;return new Promise(function(n,r){i.onreadystatechange=function(){if(4===i.readyState)if(i.status>=200&&i.status<300){let e;try{e=JSON.parse(i.responseText),window.JXTRTESTENV&&o("   ->network",e),n(e)}catch(e){window.JXTRTESTENV&&o("  ->network","failed1"),n({})}}else window.JXTRTESTENV&&o("   ->network","failed2"),r({status:i.status,statusText:i.statusText})},window.JXTRTESTENV&&o("network",e),i.open(t.method||"GET",e,!0),t.contentType&&i.setRequestHeader("Content-Type",t.contentType),t.timeout&&(i.timeout=t.timeout,i.ontimeout=function(e){window.JXTRTESTENV&&o("   ->network","failed3"),r({status:408,statusText:"Request timeout"})}),i.crossDomain=!0,i.withCredentials=void 0==t.withCredentials||t.withCredentials,i.send("POST"===t.method?t.data:null)})},t.exports.getLocalStorage=t.exports.writeC_=function(e){let t=window,i=document;var n=t.location.hostname.match(/[^.]*\.[^.]{2,3}(?:\.[^.]{2,3})?$/gm);e.forEach(e=>{var t="expires="+e.d.toUTCString(),o=e.n+"="+e.v+";"+t+";secure;";i.cookie=o+"path=/",n&&(i.cookie=o+"domain=."+n+";secure;SameSite=None;path=/")})},t.exports.getCookieRaw_=t.exports.getParsedCk_=function(){let e={},t=document;if(t.cookie&&""!=t.cookie){let o=t.cookie.split(";");for(var i=0;i<o.length;i++){var n=o[i].split("=");n[0]=n[0].replace(/^ /,""),e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])+(n.length>2?"="+n.slice(2).map(.join("="):"")}}return e},t.exports.addDebug=o},{}],6:[function(e,t,i){var n,o;n=this,o="object"==typeof i&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):(n="undefined"!=typeof globalThis?globalThis:n||self).justDetectAdblock=o()},{}]},{},[1]);