!this,(function(){return function(){"use strict";var e={d:o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return f}});var n="data-cl_cl_index",o="data-cl-viewability",i="data-cl-skip",r="data-cl-ignore_click",l={MAX_KEY_LENGTH:8,MAX_VALUE_LENGTH:300,CL_KEY_PREFIX:"_cl_",LINK_TAG_LIST:["a","button","input"],logWarn:function(e){void 0===console.warn&&(console.warn=console.log),console.warn(e)},logErr:function(e){void 0===console.error&&(console.error=console.log),console.error(e)},isDebug:function(){return void 0!==l&&void 0!==l.debug&&l.debug},logDebug:function(e){this.isDebug()&&console.log("CustomLogger : ["+(new Date).getTime()+"]"+e)},logTrace:function(e,t){this.isDebug()&&(console.log("CustomLogger : [TRACELOG]["+(new Date).getTime()+"]"+e),console.log(t))},isFunction:function(e){return"[object Function]"===l.type(e)},isDate:function(e){return"[object Date]"===l.type(e)},isArr:function(e){return"[object Array]"===l.type(e)},isStr:isNum:function(e){return"number"===l.type(e)&&isFinite(e)},isNumeric:function(e){return e-0===e&&(e+"").replace(/^\s+|\s+$/g,"").length>0},isObj:isIE:navigator.userAgent.match(/MSIE\s[^;]*/)||navigator.userAgent.match(/Trident\/[^;]*/)?1:0,isEdge:navigator.userAgent.indexOf(" Edge/")>-1,type:function(e){return null===e?e+"":"object"==typeof e||"function"==typeof e?Object.prototype.toString.call(e)||"object":typeof e},trim:function(e){return(e=null===e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")).replace(/[\u007f-\u00a0]|\s{2,}/g," ").replace(/\ufeff|\uffef|[\u0000-\u001f]|[\ue000-\uf8ff]/g,"")},getScrollBarSize:function(){var e=l.make("div");e.style.overflow="scroll",e.style.visibility="hidden",e.style.position="absolute",e.style.width="100px",e.style.height="100px",document.body.appendChild(e);var t={width:e.offsetWidth-e.clientWidth,height:e.offsetHeight-e.clientHeight};return l.removeElementFromBody(e),t},make:function(e,t){var n=document.createElement(e);if(t&&l.isObj(t))for(var o in t)t.hasOwnProperty(o)&&n.setAttribute(o,t[o]);return n},removeElementFromBody:function(e){document.body.removeChild(e)},prototypeHasOwnProperty:getAttribute:function(e,t){var n="";return document.documentElement.hasAttribute||"class"!==t||(t="className"),e&&e.getAttribute&&(n=e.getAttribute(t,2)),n},cleanReferrer:function(e){return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")?"":e},toJSON:hasInvalidChars:function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<32||"="===n)return!0}return!1},isValidPair:function(e,t){return!(!this.isValidKey(e)||t.length>this.MAX_VALUE_LENGTH)||(l.logWarn("Invalid key/value pair ("+e+"="+t+") Size must be < 8/300 respectively."),!1)},isValidKey:function(e){return e.length<=this.MAX_KEY_LENGTH||0===e.indexOf(this.CL_KEY_PREFIX)},serialize:function(e,t){if(!e)return"";void 0===t&&(t=!0);var n=[],o="";for(var i in e)if(l.prototypeHasOwnProperty(e,i)){var r=i,a=e[i];if(null===r||null===a)continue;if(r+="",(a+="")&&a.length>this.MAX_VALUE_LENGTH&&(a=a.substring(0,this.MAX_VALUE_LENGTH)),!this.isValidPair(r,a))continue;if(!this.hasInvalidChars(r)&&!this.hasInvalidChars(a)){o="",""!==(a=this.trim(a))&&" "!==a||!t||(a="_");try{o=(o=encodeURIComponent(r+""+a)).replace(/'/g,"%27")}catch(e){o="_ERR_ENCODE_",l.logErr(e)}n.push(o)}}return n.join("%04")},removeProtocol:function(e){return e?"http://"===e.substr(0,7)?e.substr(7,e.length):"https://"===e.substr(0,8)?e.substr(8,e.length):e:""},rand:function(){for(var e=0,t="";e++<16;){var n=Math.floor(62*Math.random());t+=n<10?n:String.fromCharCode(n<36?n+55:n+61)}return t+l.timestamp().toString(36)},timestamp:merge:function(e,t,n){if(t)for(var o in t)if(this.prototypeHasOwnProperty(t,o)){if(n&&!n.call(null,o,t[o]))continue;e[o]=t[o]}},getXHR:on:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},off:async:function(e,t){return null==t&&(t=0),setTimeout(e,t)},hasClass:function(e,t){function n(e,n){var o,i=!1;return e&&t&&(o=l.getAttribute(e,"class")||"",i=t.exec?n.test(o):n&&(" "+o+" ").indexOf(" "+n+" ")>-1),i}if(this.isArr(t)){for(var o=0;o<t.length;o++)if(n(e,t[o]))return!0;return!1}return!!this.isStr(t)&&n(e,t)},extractDomain:makeScreenSizeText:function(e){return screen?screen.width+(e||",")+screen.height:""},makeEventCoordinateText:function(e){var t,n,o=null,i=e.pageX,r=e.pageY;return this.isIE&&(t=document.documentElement,n=document.body,o=t&&(t.scrollTop||t.scrollLeft)?[t.scrollTop,t.scrollLeft]:n?[n.scrollTop,n.scrollLeft]:[0,0]),i||0===i||(i=e.clientX||0,this.isIE&&(i+=o[1])),r||0===r||(r=e.clientY||0,this.isIE&&(r+=o[0])),i+","+r},getLinkElements:function(e,t){e||(e=document);for(var n=[],o=0;o<this.LINK_TAG_LIST.length;o++)for(var i=e.getElementsByTagName(this.LINK_TAG_LIST[o]),r=0;r<i.length;r++){var l=i[r];t&&!t.call(0,l)||n.push(l)}return this.sort(n)},getLinkElementsWithSkipAttr:function(e,t,n,o){function r(e){for(var t=0;t<this.LINK_TAG_LIST.length;t++)if(e.tagName&&e.tagName.toLowerCase()===this.LINK_TAG_LIST[t].toLowerCase())return!0;return!1}t||(t=document);var a=n||[],s=t.childNodes;if("true"!==this.getAttribute(t,i))for(var u=0;u<s.length;u++){var c=s[u];r(c)&&(o&&!o.call(0,c)||a.push(c)),"true"!==this.getAttribute(c,i)?a=this.getLinkElementsWithSkipAttr(e,c,a,o):"true"===l.getAttribute(c,i)&&a.push(c)}return this.sort(a)},sort:function(e){var t=e[0];return t?(t.sourceIndex?e.sort(():t.compareDocumentPosition&&e.sort((),e):[]},getLinkContent:getLinkText:function(e,t){if(!e)return"_";var n="";return t=t.toLowerCase(),n="input"===e.nodeName.toLowerCase()?this.getAttribute(e,"value"):"text"===t?/KHTML/.test(navigator.userAgent)?e.textContent:e.innerText?e.innerText:e.textContent:"href"===t?this.removeProtocol(this.getAttribute(e,"href")):this.getAttribute(e,t)||"",""===(n=this.trim(n))&&(n=this.trim(this.getLinkContent(e))),n&&n.length>l.MAX_VALUE_LENGTH&&(n=n.substring(0,l.MAX_VALUE_LENGTH)),""===n?"_":n},getComputedStyle:function(e,t){return void 0!==window.getComputedStyle?window.getComputedStyle(e,t):(this.el=e,this.getPropertyValue=,this)},isElementVisible:function(e,t){var n=this.getComputedStyle(e);if("hidden"===n.getPropertyValue("visibility")||"none"===n.getPropertyValue("display"))return!1;var o,i,r=e.getBoundingClientRect(),l=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth;if(void 0===r.height||void 0===r.width?(o=Math.abs(r.bottom-r.top),i=Math.abs(r.right-r.left)):(o=r.height,i=r.width),document.documentElement.scrollWidth>document.documentElement.clientWidth&&(l-=t.height),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(a-=t.width),r.right<=0||r.bottom<=0||r.left>=a||r.top>=l)return!1;var s={};return s.top=r.top<0?0:r.top,s.left=r.left<0?0:r.left,s.bottom=r.bottom>l?l:r.bottom,s.right=r.right>a?a:r.right,s.width=s.right-s.left,s.height=s.bottom-s.top,i*o/2<=s.width*s.height},getLinkTargetType:function(e,t){return l.hasClass(e,"cl-target_href")?"href":l.hasClass(e,"cl-target_text")?"text":l.hasClass(e,"cl-target_title")?"title":l.hasClass(e,"cl-target_id")?"id":t},isAvailableSendBeacon:function(){return void 0!==window.navigator.sendBeacon&&"undefined"!=typeof Blob}};function a(e,t,a,s,u){function c(e,t){return t>e.links.length?null:e.links[t-1]}function d(t,i,r,a,s,u,c,d){var g="",f=null,m=!c||l.isElementVisible(a,d),_={viewable:m,data:{_cl_module:i,_cl_index:r}};return c&&l.merge(_.data,{_cl_viewable:1}),u?(_.data._cl_link=s||"section",f=e.fn.getNode(a)):(a.setAttribute(n,r),c&&a.setAttribute(o,m?"1":"0"),(g=l.getLinkText(a,t))&&""!==g&&(f=e.fn.getNode(a)),g="_",_.data._cl_link=s||g),null!==f&&l.merge(_.data,f.getAll()),_}function g(t){var n=[];_.linkPosition=_.linkPosition||1;for(var o=null,r=null!==_.moduleNode?_.moduleNode.map._cl_module:null,a=null!==_.moduleNode?_.moduleNode.map._cl_link:null,s=0;s<t.length;s++)if("div"===t[s].tagName.toLowerCase()){var c=t[s],g=e.fn.getNode(c);o=d(l.getLinkTargetType(m,e.conf.link_target_attribute),r||_.moduleName,1,c,g.map._cl_link||a,!0,_.useViewability,u),_.links[0]=o,n.push(o)}else{var f=t[s];o=d(l.getLinkTargetType(m,e.conf.link_target_attribute),r||_.moduleName,_.linkPosition,f,a,0,_.useViewability,u),_.links[_.linkPosition-1]=o,n.push(o),_.linkPosition++}return"true"===l.getAttribute(m,i)&&(o=d(l.getLinkTargetType(m,e.conf.link_target_attribute),r||_.moduleName,1,c,a,!0,_.useViewability,u),_.links[0]=o,n.push(o)),n}function f(t){function o(t,n,o){var i=n.target?n.target.toLowerCase():"_self";return"_self"!==i&&"_top"!==i&&"_parent"!==i&&window.name!==i||2===t.which||4===t.button||t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||"on"===l.getAttribute(n,"data-cl-nofollow")||l.getAttribute(n,"href")&&"javascript:"===l.getAttribute(n,"href").substr(0,11).toLowerCase()||l.hasClass(n,e.conf.nofollow_class)||l.hasClass(o,e.conf.nofollow_class)}var i=function(e){var t=e.target||e.srcElement;for(t&&3===t.nodeType&&(t=t.parentNode);t&&"a"!==t.nodeName.toLowerCase()&&"button"!==t.nodeName.toLowerCase()&&("input"!==t.nodeName.toLowerCase()||"submit"!==l.getAttribute(t,"type"));)t=t.parentNode;return t}(t=t||event);if(i&&!l.hasClass(i,e.conf.noclick_log)){if(e.conf.ignore_click_interval>0){if("1"===i.getAttribute(r))return;i.setAttribute(r,"1"),setTimeout(),e.conf.ignore_click_interval)}var a=i.nodeName.toLowerCase(),s=l.getAttribute(i,n);if(null!==c(_,s)){var u={data:function(){var n=c(_,s).data;if(!n._cl_th){var o=l.getAttribute(i,"href");o&&(n._cl_th=l.extractDomain(o)),o&&n._cl_th||(n._cl_th=l.extractDomain(e.conf.location))}return n._cl_tp||(i.pathname?n._cl_tp=i.pathname.substring(0,l.MAX_VALUE_LENGTH):n._cl_tp=""),n._cl_xy=l.makeEventCoordinateText(t),n._cl_sr=l.makeScreenSizeText(),"contextmenu"===t.type&&(n._cl_clt=3),n}(),event:t,moduleElement:_.moduleElement,targetElement:i,targetObject:_,stop:o(t,i,_.moduleElement)||"input"===a||"button"===a,synch:"input"!==a&&"button"!==a&&!o(t,i,_.moduleElement)&&"contextmenu"!==t.type,targetIsTop:i&&i.target&&"_top"===i.target.toLowerCase(),targetIsParent:i&&i.target&&"_parent"===i.target.toLowerCase()};e.variable.uploader.sendClickLog(u,(function(e){if(l.logTrace("[DSCustomLogger.Uploader.redirect] sender ",e),e.synch){if(e.targetElement)if(l.isIE&&l.ieVersion>=11||l.isEdge)"complete"!==document.readyState&&history.pushState("",document.title),e.targetIsTop?top.document.location=e.targetElement.href:e.targetIsParent?parent.document.location=e.targetElement.href:document.location=e.targetElement.href;else{var t=e.targetElement.cloneNode(!0);if(t.dispatchEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!1),t.dispatchEvent(n)}else t.click()}}else l.logDebug("[DSCustomLogger.Uploader.redirect] synch "+e.synch)}))}}}l.logDebug("[DSCustomLogger.Module]");var m=document.getElementById(a);if(!m)return l.logWarn("Specified module not in DOM: "+a),null;var _={useViewability:s,moduleNode:e.fn.getNode(m),links:[],moduleName:t,targetType:l.getAttribute(m,"data-cl-targettype"),moduleElement:m,clickEvent:f,setLink:g,link:d,linkPosition:1};return l.logTrace("[DSCustomLogger.Module] targetObject ",_),g(e.conf.use_dom_parser?l.getLinkElementsWithSkipAttr(e,m):l.getLinkElements(m)),l.on(m,"click",f),e.conf.target_right_click&&l.on(m,"contextmenu",f),l.logTrace("[DSCustomLogger.Module] targetObject ",_),_ieVersion=l.isIE?document.documentMode?document.documentMode:document.compatMode&&"CSS1Compat"===document.compatMode?7:5:null,a.List=function(e){var t={};return{add,addRange:function(t,n){l.logDebug("[DSCustomLogger.Module.List]");var o=l.isArr(t),i=n?l.getScrollBarSize():{},r=[];for(var a in o||l.isStr(t)&&(t=new Array(t),o=!0),t)if(l.prototypeHasOwnProperty(t,a)){var s=o?t[a]:a,u=l.trim(t[a]);if(this.exists(s))l.logErr('add() called with prev processed id:"'+s+'"');else{var c=d.Module(e,u,s,n,i);c&&(this.add(s,c),r.push(c))}}return r},get:function(){return t},sendViewability:function(){function i(t,i){var r=function(e,t){e||(e=document);for(var n=[],o=e.getElementsByTagName("a"),i=0;i<o.length;i++){var r=o[i];t&&!t.call(0,r)||n.push(r)}return l.sort(n)}(t.moduleElement,(function(r){if(!l.getAttribute(r,n)){t.linkPosition++,r.setAttribute(n,t.linkPosition);var a=t.link(l.getLinkTargetType(r,e.conf.link_target_attribute),t.moduleNode.map._cl_module||s,t.linkPosition,r,t.moduleNode.map._cl_link,0,!1,i);t.links[t.linkPosition-1]=a}return!("1"===l.getAttribute(r,o)||!l.isElementVisible(r,i)||(r.setAttribute(o,"1"),0))}));if(0!==r.length&&e.conf.use_cl){var a=function(o,i){for(var r=[],a=0;a<o.length;a++){var u=o[a],c=l.getAttribute(u,n),d=t.link(l.getLinkTargetType(u,e.conf.link_target_attribute),t.moduleNode.map._cl_module||s,c,u,t.moduleNode.map._cl_link,0,!0,i);r.push(d)}return r}(r,i),u={};l.merge(u,t),u.links=a,e.variable.uploader.sendViewLog([u])}}var r=function(){var e={};for(var n in t){var o=t[n];o.useViewability&&(e[n]=o)}return e}(),a=l.getScrollBarSize();for(var s in r)i(r[s],a)},refresh:function(o,i,r)var s=t[l.trim(o)];if(s){r.isRefreshed=!0;var u=document.getElementById(o),c=e.conf.use_dom_parser?l.getLinkElementsWithSkipAttr(e,u,null,a):l.getLinkElements(u,a),d=0;if(c.length>0){var g=s.setLink(c);if(d=c.length,s.useViewability){d=0;for(var f=0;f<g.length;f++)g[f].viewable&&d++}if(d>0&&(e.conf.use_cl||r.event)){var m={};l.merge(m,s),i&&(m.links=g,e.variable.uploader.sendViewLog([m],r.pagedata))}}}else l.logErr("refreshModule called on unknown section: "+o)},remove:function(e){var n=t[l.trim(e)];n&&(l.off(n.moduleElement,"click",n.clickEvent),delete t[l.trim(e)])},destroy,exists:function(e){return void 0!==t[l.trim(e)]}}},s.prototype={serialize,set:function(e,t){var n=l.trim(t);l.isStr(n)&&(n=n.replace(/\\/g,"\\\\")),n.length>l.MAX_VALUE_LENGTH&&(n=n.substring(0,l.MAX_VALUE_LENGTH)),l.isValidPair(e,n)&&(this.map[l.trim(e)]=n,this.count++)},get,getAll,merge,mergeWithFilter,getSize},u.prototype=new s,u.prototype.constructor=s,c.makeFromPageData=function(){for(var e=new c,t=arguments.length,n=0;n<t;n++)null!=arguments[n]&&e.merge(arguments[n].getAll());return e},c.prototype=new s,c.prototype.constructor=s;var d={Uploader:function(e){var t,n="custom_log",o="web";function i(n,o,i,r,a){function s(t,n){l.logDebug("[DSCustomLogger.Uploader.send.exec] this method is XHR transfer.");var a=l.getXHR();a.open("POST",t,!0),a.withCredentials=!0,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o&&l.isFunction(o)&&(a.timeout=e.conf.click_timeout),a.onload=a.ontimeout=a.onerror=a.onabort=function(){o&&l.isFunction(o)&&o.call(0,i,r)},a.send(n)}!function(n,a){l.isDebug()&&l.logDebug("[DSCustomLogger.Uploader.send.exec] _cl_psid : "+e.conf.keys.get("_cl_psid"));var u,c=(u=["https://",e.conf.clb_host,e.conf.clb_path,"?clSdk=cl-web&clHid=",e.conf.hierarchyid,"&clTs=",(new Date).valueOf(),"&clSdkv=",e.conf.version,"&clRnd=",l.rand(),"&clCmp=0"].join(""),l.logDebug("[DSCustomLogger.Uploader.getURI] result : "+u),u),d(n);a?t=c+"&"+d:e.conf.click_sendbeacon&&l.isAvailableSendBeacon()&&void 0!==r&&function(t,n){l.logDebug("[DSCustomLogger.Uploader.send.exec] this method is sendBeacon transfer.");var o=new Blob([n],{type:"application/x-www-form-urlencoded;charset=UTF-8",host:e.conf.clb_host});return navigator.sendBeacon(t,o)}(c,d)?o.call(0,i):s(c,d)}(n,a)}function r(t){var n={_cl_platform:1,_cl_version:e.conf.version},o=l.trim(l.cleanReferrer(null!==e.conf.referrer?e.conf.referrer:document.referrer));o&&!1!==t&&(n._cl_referer=o),e.conf.extra&&(n._cl_extra=1),n._cl_ln||(n._cl_ln="customlogger-web"),e.conf.disable_fip_key||(n._cl_fip="1");var i=window.location.protocol||"";return i=i.replace(/:$/,""),n._cl_pr=i,n._cl_tzo=(new Date).getTimezoneOffset(),n._cl_tzo=n._cl_tzo?-1*n._cl_tzo/60:0,l.logDebug("[DSCustomLogger.Uploader.createCommondata] result : "+n),n}function a(){var e=Date.now();return{msec:e,secPartText:String(Math.floor(e/1e3))}}return{sendViewLog:function(t,s){l.logDebug("[DSCustomLogger.Uploader.sendViewLog]"),function(t,s){if(l.isIE&&l.ieVersion<=8)l.logDebug("[DSCustomLogger.Uploader.send.exec] did not send. for unsupported browsers");else{l.logDebug("[DSCustomLogger.Uploader._sendViewLog]");var u=function(t,i){l.logTrace("[DSCustomLogger.Uploader.createViewLogJson] Modules ",t),l.logTrace("[DSCustomLogger.Uploader.createViewLogJson] Parameter ",i);var s=a(),u=new d.PageData;u.set("_ts",s.secPartText);var c=d.PageData.makeFromPageData(u,e.conf.keys);i&&c.merge(i);var g=c.getAll();return l.toJSON({commondata:r(),rows:[{p:n,d:"view",hierarchy_id:e.conf.hierarchyid,data_source:o,cs_unixtime_ms:s.msec,pagedata:g,linkdata:function(){var n=[],o=null;for(var i in t)if(l.prototypeHasOwnProperty(t,i)&&(o=t[i])){var r=function(){function t(e,t){var n="_cl_index"===e;return!!n||"_cl_module"===e&&t!==i._cl_module&&t!==u||"_cl_module"!==e&&!n}var i={_cl_module:l.trim(o.moduleName),links:[]};o.moduleNode&&(i.params=o.moduleNode.getAll());var r,a,s,u=n.params&&n.params._cl_module?n.params._cl_module:"",c=o.links;if(c)for(var d=0;d<c.length;d++)if(c[d])if(!e.conf.viewability||c[d].viewable){var g=c[d].data;g.length>l.MAX_VALUE_LENGTH&&(c[d].data=g.substring(0,l.MAX_VALUE_LENGTH));var f=(r=c[d].data,a=t,s={},l.isObj(r)?(l.merge(s,r,a),s):s);i.links.push(f)}else l.logDebug("Skipping not viewable link: "+c[d].data._cl_link);return i}();r.links.length>0?n.push(r):l.logDebug('[DSCustomLogger.Uploader.createViewLogRow] Not capturing 0 links module: "'+o.moduleName+'"')}return n}()}]})}(t,s);l.logTrace("[DSCustomLogger.Uploader._sendViewLog] Json ",u),i(u)}}(t,s)},sendClickLog:function(t,s,u){l.logDebug("[DSCustomLogger.Uploader.sendClickLog]"),function(t,s,u){if(l.isIE&&l.ieVersion<=8)l.logDebug("[DSCustomLogger.Uploader.send.exec] did not send. for unsupported browsers");else{l.logDebug("[DSCustomLogger.Uploader._sendClickLog]");var c,g=function(t){l.logTrace("[DSCustomLogger.Uploader.createClickLogJson] sender ",t);var i=a(),s=new d.PageData;s.set("_ts",i.secPartText);var u=d.PageData.makeFromPageData(s,e.conf.keys).getAll();return l.toJSON({commondata:r(),rows:[{p:n,d:"click",hierarchy_id:e.conf.hierarchyid,data_source:o,cs_unixtime_ms:i.msec,pagedata:u,click:function(){var e={};for(var n in t.targetObject&&t.targetObject.moduleNode&&(e=t.targetObject.moduleNode.getAll()),t.data)if(l.prototypeHasOwnProperty(t.data,n)){var o=t.data[n];null!==o&&o.length>l.MAX_VALUE_LENGTH&&(t.data[n]=o.substring(0,l.MAX_VALUE_LENGTH)),"function"==typeof t.data[n]&&(t.data[n]=t.data[n].toString()),e[n]=t.data[n]}return e}()}]})}(t);l.logTrace("[DSCustomLogger.Uploader._sendClickLog] Json ",g),t.stop||(c=t.event)&&(c.preventDefault?c.preventDefault():c.returnValue=!1),i(g,s,t,t.event?{autoClick:!0}:void 0,u)}}(t,s,u)},sendEventLog:function(t,s,u,c){l.logDebug("[DSCustomLogger.Uploader.sendEventLog]"),function(t,s,u){if(l.isIE&&l.ieVersion<=8)l.logDebug("[DSCustomLogger.Uploader.send.exec] did not send. for unsupported browsers");else{l.logDebug("[DSCustomLogger.Uploader._sendEventLog]");var c=function(t,i,s){var u=a(),c=new d.PageData;c.set("_ts",u.secPartText);var g=d.PageData.makeFromPageData(c,e.conf.keys);for(var f in(i=i||{})._cl_action=t||"_",s&&(i._cl_oc=s),i)if(!l.prototypeHasOwnProperty(i,f)||l.isValidKey(f)){var m=i[f];m.length>l.MAX_VALUE_LENGTH&&(i[f]=m.substring(0,l.MAX_VALUE_LENGTH))}else delete i[f];var _=g.getAll();return l.merge(_,i),l.toJSON({commondata:r(),rows:[{p:n,d:"event",hierarchy_id:e.conf.hierarchyid,data_source:o,cs_unixtime_ms:u.msec,pagedata:_}]})}(t,s,u);l.logTrace("[DSCustomLogger.Uploader._sendEventLog] Json ",c),i(c)}}(t,s,u)},getLogUrl}},Module:a,Node:u,PageData:c,MsgHeader:s,ViewabilityHandler:function(e){function t(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function n(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function o(){var o=t(),i=n(),r=-1===c?o-s:o-c,l=-1===d?i-u:i-d;(Math.abs(r)>e.conf.viewability_distance||Math.abs(l)>e.conf.viewability_distance||g)&&(e.variable.moduleList.sendViewability(),c=o,d=i,g=!1)}function i(){null!==r&&clearTimeout(r),(new Date).getTime()-a<e.conf.viewability_time&&(s=t(),u=n()),r=l.async(o,e.conf.viewability_time)}l.logDebug("[DSCustomLogger.ViewabilityHandler]");var r=null,a=(new Date).getTime(),s=t(),u=n(),c=-1,d=-1,g=!1;return e.variable.moduleList.refreshViewability,l.on(window,"scroll",i),{reInit:function(){s=t(),u=n(),c=-1,d=-1,a=(new Date).getTime()},destroy}},initialize:function(e,t,n){function o(){var e=arguments.length;if(e<2)l.logErr("[DSCustomLogger.CustomLoggerCore.setValue] This parameter length is wrong.");else for(var n=t.conf,o=arguments[1],i=2;i<e;i++)void 0!==arguments[i]&&(n[o]=arguments[i])}e=e||{},t.conf={},function(){var n,i,r=t.conf;for(var a in d.define)null!==a&&""!==a&&o(t,a,d.define[a]);for(a in r)null!==a&&""!==a&&o(t,a,e[a]);o(t,"location",e.location,document.location.href),r.keys=((n=new d.PageData).set("_cl_psid",window.DSCustomLogger.PSID||l.rand()),n.set("_cl_url",l.removeProtocol(r.location).substring(0,l.MAX_VALUE_LENGTH)),e.keys&&n.merge(e.keys),n),o(t,"hierarchyid",r.override.hierarchyid,window.DSCustomLogger.HIERARCHYID)(t),r.use_cl=!1!==e.use_cl,o(t,"noclick_log",e.noclick_log),r.debug_log=e.debug_log>0||null!==(i=function(e){var t=r.location,n=t.indexOf("?")+1,o=t.substring(n);o=o.split("&");for(var i=0;i<o.length;i++){var a=o[i].split("=");if(2===a.length&&"debug_log"===l.trim(a[0]))return l.trim(a[1]).replace(/[!@#$%^&*();:'",./<>?_=¥+¥-]/gi,"")}return null}())&&("true"===i||"1"===i),r.extra=!0===e.extra,r.disable_fip_key=!0===e.disable_fip_key,r.target_right_click=!0===e.target_right_click,r.use_dom_parser=!0===e.use_dom_parser,r.log_view_on_init=!1!==e.log_view_on_init,l.debug=r.debug_log,r.debug_log&&1e4!==r.click_timeout&&l.logWarn("[DSCustomLogger.CustomLoggerCore.initialize] Click timeout set to "+r.click_timeout+"ms (default 10000ms)")}(),l.merge(t,{variable:{moduleList:new d.Module.List(t),uploader:new d.Uploader(t),viewabilityHandler:null},fn:{inlineInit:function(){},inlineLogEve)},inlineLogClick:function(e,n,o,i,r,a,s){var u,c;if(!i&&r&&(i={}),r&&(i._cl_oc=r),t.variable.uploader.sendClickLog((u=i,(c={oc:r,event:null,moduleElement:null,targetElement:null,synch:!1,targetIsTop:!1,targetIsParent:!1}).data={_cl_module:e,_cl_link:n,_cl_index:o},l.merge(c.data,u),c),a,s),!0===s)return t.variable.uploader.getLogUrl()},inlineAddModules:function(e,n,o){var i={_cl_am:1};(o=o||{}).pagedata&&l.merge(i,o.pagedata),o.useViewability=o.useViewability||!1;var r=t.variable.moduleList.addRange(e,o.useViewability);t.conf.use_cl&&r&&r.length>0&&t.variable.uploader.sendViewLog(r,i)},inlineAddModulesWithViewability:function(e,n,o){(o=o||{}).useViewability=t.conf.viewability,this.inlineAddModules(e,n,o)},inlineRefreshModule:function(e,n,o,i){i=i||{};var r=!1!==o;t.variable.moduleList.refresh(e,r,i)},inlineRefreshViewabili)},inlineRemoveModu)},inlineIsTargetModu)},inlineGetModulesIn)},inlineDestroy:function(){t.variable.moduleList.destroy(),t.variable.viewabilityHandler&&t.variable.viewabilityHandler.destroy()},inlineReIn)},inlineSetAttribute:function(e){e.keys&&t.conf.keys.merge(e.keys),e.hierarchyid&&(t.conf.hierarchyid=e.hierarchyid),e.referrer&&(t.conf.referrer=e.referrer.substring(0,l.MAX_VALUE_LENGTH)),e._cl_psid&&t.conf.keys.set("_cl_psid",e._cl_psid),e.location&&(t.conf.location=e.location,t.conf.keys.set("_cl_url",l.removeProtocol(e.location).substring(0,l.MAX_VALUE_LENGTH)))},inlineClearAttribute:function(e){for(var n in e)if("keys"===e[n]){var o=t.conf.keys.get("_cl_url"),i=t.conf.keys.get("_cl_psid");t.conf.keys=new d.PageData,t.conf.keys.set("_cl_url",o),t.conf.keys.set("_cl_psid",i)}else"referrer"===e[n]?t.conf.referrer="":"_cl_psid"===e[n]?t.conf.keys.set("_cl_psid",""):"location"===e[n]&&(t.conf.location="",t.conf.keys.set("_cl_url",""))},inlineGetPs)},inlineLogView:function(e,n,o){var i={};if((n=n||{}).pagedata&&l.merge(i,n.pagedata),0!==e.length||n.event){for(var r=[],a=0;a<e.length;a++){var s=e[a],u=new d.Node;u.mergeWithFilter(e}));for(var c=[],g=1,f=0;f<s.module_links.length;f++){var m=s.module_links[f],_={viewable:!0,data:{_cl_module:s._cl_module,_cl_index:g++,_cl_viewable:2}};l.merge(_.data,m),c.push(_)}var h={moduleName:s._cl_module,moduleNode:u,links:c,identifier:s._cl_module};r.push(h)}t.conf.use_cl&&r&&t.variable.uploader.sendViewLog(r,i),o&&o.call()}},getNode:function(e,n){if(!e)return null;null===n&&(n=!1);var o=new d.Node,i=l.getAttribute(e,"data-cl-oc");i&&o.set("_cl_oc",i);var r=l.getAttribute(e,"data-cl-params");if(null===r||0===r.length)return o;for(var a=r.split(t.conf.params_pair_delimiter),s=0;s<a.length;s++){var u=a[s].split(t.conf.params_kv_delimiter);if(2===u.length){var c=u[0],g=u[1];null!==c&&""!==c&&null!==g&&(g.length>l.MAX_VALUE_LENGTH&&(g=g.substring(0,l.MAX_VALUE_LENGTH)),l.isValidKey(c)&&g.length<=l.MAX_VALUE_LENGTH&&("_cl_index"!==c||n)&&o.set(c,g))}}return o}}}),function(){t.variable.moduleList.destroy();var e=t.variable.moduleList.addRange(t.conf.target_modules,!1),o=t.variable.moduleList.addRange(t.conf.target_modules_viewability,t.conf.viewability);t.conf.use_cl&&t.conf.log_view_on_init&&!n&&t.variable.uploader.sendViewLog(e.concat(o)),function(}l.logDebug("[DSCustomLogger.CustomLoggerCore.setOnloadCallback]");var o=!1;if("complete"===document.readyState)l.async(t);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else{document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t);var i=!1;try{i=null===window.frameElement&&document.documentElement}catch(e){l.logErr("[DSCustomLogger.CustomLoggerCore.setOnloadCallback] e : "+e)}i&&i.doScroll&&function t(){if(!o){try{i.doScroll("left")}catch(e){return void l.async(t,50)}n(),e.call(this)}}()}}((function(){t.variable.viewabilityHandler=new d.ViewabilityHandler(t)})),l.isFunction(t.conf.callback)&&t.conf.callback()}(),l.logTrace("[DSCustomLogger] conf",t.conf)},conf:{},define:{override:{},version:"1.0.0",keys:null,referrer:null,hierarchyid:"0",target_modules:[],target_modules_viewability:[],viewability:!1,viewability_time:300,viewability_distance:50,link_target_attribute:"text",clb_host:"clb.yahoo.co.jp",clb_path:"/api/v1/clb",click_timeout:1e4,nofollow_class:"cl-nofollow",noclick_log:"cl-noclick-log",debug_log:!1,extra:!1,target_right_click:!1,use_dom_parser:!1,log_view_on_init:!1,location:null,callback:null,params_kv_delimiter:":",params_pair_delimiter:";",click_sendbeacon:!1,ignore_click_interval:0}},g={CustomLoggerCore:function(e){var t={};return d.initialize(e,t,!1),{in)},logEvent:function(e,n,o,i){t.fn.inlineLogEvent(e,n,o,i)},logCli)},getClickLogUrl:function(e,n,o,i,r){return t.fn.inlineLogClick(e,n,o,i,r,null,!0)},addModules:function(e,n,o){t.fn.inlineAddModules(e,n,o)},addModulesWithViewabili)},refreshModu)},refreshViewability:function(){t.fn.inlineRefreshViewability()},removeModule:function(e){t.fn.inlineRemoveModule(e)},isTargetModu)},getModulesInfo:function(){return t.fn.inlineGetModulesInfo()},destr)},reInit:function(e){t.fn.inlineReInit(e)},setAttribute:function(e){t.fn.inlineSetAttribute(e)},clearAttribu)},getPs)},logVi)}}},CustomLogger:function(e){e=e||{};var t,n,o,i,r=window,l=document,a=l.location.toString().indexOf("debug_log=1")e}function u(e,t){e=s(e),t=s(t),""!==e&&""!==t&&(o[e]=t)}function c(e,t){var n,i;for(i in e=s(e),t)n=s(t[i]),""!==(i=s(i))&&""!==n&&(o[e][i]=n)}function d(){return g("Object",i)&&"function"==typeof i.ine}function f(e){var t,n,o=[];if(document.getElementsByClassName)o=document.getElementsByClassName(e);else if(g("String",e)){t=document.getElementsByTagName("*");for(var i=0;i<t.length;i++)g("String",n=t[i].className||t[i].getAttribute("class"))&&-1!==(" "+n+" ").indexOf(" "+e+" ")&&o.push(t[i])}return o}function m(e,t){var n;for(n in e)if(e[n]===t)return n;return-1}function _(e,t){var n,i,r={};if(g("Object",t))r=t;else if(g("Array",t))for(i in t)r[t[i]]=t[i];else r[t]=t;for(n in r)o[e][n]=r[n]}function h(e,t){e=s(e),t=s(t),""!==e&&""!==t&&-1!==m(o[e],t)&&o[e].splice(m(o[e],t),1)}function p(){return{target_modules:{},keys:{_cl_cd:r.screen.colorDepth,_cl_ds:r.screen.width+"x"+r.screen.height,enc:(l.characterSet||l.charset).toLowerCase(),os:(e=navigator.userAgent,e.match(/windows\sphone/i)?"windowsphone":e.match(/windows/i)?"windows":e.match(/iphone|ipad/i)?"ios":e.match(/mac|ppc/i)?"mac":e.match(/android/i)?"android":"other"),_sr:(r.innerWidth||l.documentElement.clientWidth)+"x"+(r.innerHeight||l.documentElement.clientHeight)},viewability:!1,viewability_time:1e3,target_modules_viewability:{},click_timeout:1e4};var e}for(t in"undefined"!=typeof console&&void 0!==console.log||(console={l{}}),void 0===console.error&&(console.error=console.log),void 0===console.warn&&(console.warn=console.log),void 0!==(o=p()).keys._do||isNaN(r.orientation)||(o.keys._do=Math.abs(r.orientation)/90%2),void 0!==o.keys.dpr||isNaN(r.devicePixelRatio)||(o.keys.dpr=r.devicePixelRatio),c("keys",{_cl_mk:function(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)if("keywords"===e[t].getAttribute("name")&&"string"==typeof e[t].getAttribute("content"))return e[t].getAttribute("content");return""}()}),e)if("keys"===t)for(n in e.keys)o.keys[n]=e.keys[n];else o[t]=e[t];return{setClickTimeout:function(e){return u("click_timeout",e),this},setModule:function(e){return _("target_modules",e),this},setHierarchyid:function(e){return u("hierarchyid",e),this},startViewable:function(){return u("viewability",!0),this},stopViewable:function(){return u("viewability",!1),this},setViewableModule:function(e){return _("target_modules_viewability",e),this},setViewableTime:function(e){return u("viewability_time",e),this},setCustomLoggerCoreConf:function(e){var t;for(t in e)u(t,e[t]);return this},setActtype:function(e){return c("keys",{acttype:e}),this},setApptype:function(e){return c("keys",{apptype:e}),this},setAuthid:function(e){return c("keys",{_cl_tpid:e}),this},setCategorypath:function(e){return c("keys",{cat_path:e}),this},setContentsid:function(e){return c("keys",{ctsid:e}),this},setConttype:function(e){return c("keys",{conttype:e}),this},setDevice:function(e){return c("keys",{device:e}),this},setMetakeyword:function(e){return c("keys",{_cl_mk:e}),this},setNonepv:function(e){return c("keys",{nonepv:e}),this},setOpttype:function(e){return c("keys",{opttype:e}),this},setPartner:function(e){return c("keys",{prtnr:e}),this},setPagetype:function(e){return c("keys",{pagetype:e}),this},setQuery:function(e){return c("keys",{query:e}),this},setService:function(e){return c("keys",{service:e}),this},setServiceid:function(e){return c("keys",{srvid:e}),this},setStatus:function(e){return c("keys",{status:e}),this},setPg:function(e){return c("keys",{pg:e}),this},setIns:function(e){return c("keys",{ins:e}),this},setUiid:function(e){return c("keys",{uiid:e}),this},setBtid:function(e){return c("keys",{_cl_btid:e}),this},setBtgid:function(e){return c("keys",{_cl_btgid:e}),this},setBtcf:function(e){return c("keys",{_cl_btcf:e}),this},targetClass:function(e){var t,n=[];t=f(e=e||"target_modules");for(var o=0;o<t.length;o++)t[o].getAttribute("id")?n.push(t[o].getAttribute("id")):console.warn("CustomLogger: Not found id to the specified element");return _("target_modules",n),this},targetViewableClass:function(e){var t,n=[];t=f(e=e||"target_modules_viewability");for(var o=0;o<t.length;o++)t[o].getAttribute("id")?n.push(t[o].getAttribute("id")):console.warn("CustomLogger: Not found id to the specified element");return _("target_modules_viewability",n),this},setPageData:function(e){return c("keys",e),this},addPageData:function(e,t){var n={};return g("String",e)&&g("String",t)&&(n[e]=t,c("keys",n)),this},addCustomLoggerCoreCos},deleteCustomLoggerCoreConf:function(e){return function(e){""!==(e=s(e))&&delete o[e]}(e),this},deleteModule:function(e){return h("target_modules",e),this},deleteViewableModus},deletePageData:function(e){return function(e,t){e=s(e),t=s(t),""!==e&&""!==t&&delete o[e][t]}("keys",e),this},setCustomLoggerCore:function(e){return g("Object",e)&&"function"==typeof e.init&&(i=e),this},setCallback:function(e){return"function"==typeof e&&u("callback",e),this},simpleLogClick:function(e,t,n){var o,r,l,a,s,u,c=[];if(d())if(g("Object",e)&&g("String",e._cl_module)){for(l in o=i.getModulesInfo())for(a in o[l].links)o[l].links[a].data._cl_module===e._cl_module&&c.push(o[l].links[a].data);if(0===c.length)u=!1;else for(var f=0;f<c.length;f++){for(s in u=!0,e){if(void 0===c[f][s]){u=!1;break}if(String(c[f][s])!==String(e[s])){u=!1;break}}if(u){for(s in r={},c[f])"_cl_link"!==s&&"_cl_index"!==s&&(r[s]=c[f][s]);i.logClick(e._cl_module,c[f]._cl_link,c[f]._cl_index,r,t,n);break}}!1===u&&console.warn("CustomLogger: undefined link param in link data")}else console.warn("CustomLogger: the simpleLogClick must specify the _cl_module");else console.warn("CustomLogger: undefined CustomLoggerCore instance")},refreshViewability:function(){d()&&"function"==typeof i.refreshViewability&&i.refreshViewability()},destroy:function(){window.DSCustomLogger.restartSession(),o=p(),d()&&"function"==typeof i.destroy&&i.destroy()},initCustomLoggerCore:function(){if(a&&console.log(o),void 0!==window.DSCustomLogger.CustomLoggerCore&&window.DSCustomLogger.CustomLoggerCore)return i=new window.DSCustomLogger.CustomLoggerCore(o)}}},restartSession:function(){g.PSID=function(){for(var e,t=0,n="",o=+new Date;t++<16;)n+=(e=Math.floor(62*Math.random()))<10?e:String.fromCharCode(e<36?e+55:e+61);return n+o.toString(36)}.apply()}};void 0!==g.PSID&&g.PSID||g.restartSession();var f=g;return t.default}()}));