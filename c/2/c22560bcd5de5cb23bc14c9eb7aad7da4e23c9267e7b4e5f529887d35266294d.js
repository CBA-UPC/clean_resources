(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{56698:18406:21215:function(e,t,n){"use strict";n.d(t,{Z:function(){return SettingsHeader}});var a=n(52322);,86045:function(e,t,n){"use strict";n.d(t,{Z:function(){return SettingsTabs}});var a=n(52322),r=n(51830),s=n(47330),i=n(83122),l=n(53954),d=n(5632);,31024:function(e,t,n){"use strict";n.d(t,{Z:function(){return ActionsDropdown}});var a=n(52322),r=n(39708),s=n(99219),i=n(83122);,81291:78066:function(e,t,n){"use strict";n.d(t,{Z:function(){return Modal}});var a=n(52322),r=n(2784),s=n(68810),i=n(64529),l=n(83122),d=n(82002),o=n(89370);}},7652},58072:function(e,t,n){"use strict";n.d(t,{m:function(){return useListTeamsQuery}});var a=n(73235),r=n(66547),s=n(76526),i=n(26806);function _templateObject(){let e=(0,a._)(["\n    query ListTeams($workspaceId: String!) {\n  teams(workspaceId: $workspaceId) {\n    ...Team\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let l=(0,r.ZP)(_templateObject(),s.t);function useListTeamsQuery(e){return i.aM({query:l,...e})}},53515:function(e,t,n){"use strict";n.d(t,{_:function(){return useListWorkspaceMembersQuery}});var a=n(73235),r=n(66547),s=n(36711),i=n(26806}let l=(0,r.ZP)(_templateObject(),s.S}},571:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var a=n(52322),r=n(18406),s=n(97185),i=n(86045),l=n(2784),d=n(97739),o=n(96577),c=n.n(o);function AnnounceTeams(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(d.Z.Root,{children:[(0,a.jsx)(d.Z.Header,{title:"Introducing Teams",description:"Enhance workspace organization and access control with groups of members and managers."}),(0,a.jsx)(d.Z.Body,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"mx-auto flex w-fit rounded-2xl bg-gradient-to-b from-gray-100/50 to-gray-200/50 p-2 ",children:(0,a.jsx)("div",{className:"relative w-full overflow-hidden rounded-lg border",children:(0,a.jsx)("div",{className:"h-[190px] w-[280px]",children:(0,a.jsx)(c(),{alt:"Teams Page",src:"/teams.png",fill:!0,style:{objectFit:"contain"},priority:!0})})})}),(0,a.jsx)("div",{className:"absolute bottom-0 z-10 h-20 w-full bg-gradient-to-t from-white"})]})}),(0,a.jsx)(d.Z.Footer,{children:(0,a.jsx)(d.Z.NextButton,{onClic",children:"Contact us to enable"})})]})})}var m=n(99219),u=n(31024),x=n(73235),h=n(66547),p=n(26806);function _templateObject(){let e=(0,x._)(["\n    mutation DeleteTeam($id: String!) {\n  deleteTeam(id: $id) {\n    id\n  }\n}\n    "]);return _templateObject=function(){return e},e}let b=(0,h.ZP)(_templateObject()}let f=(0,h.ZP)(getWorkspaceTeamLimit_templateObject());var g=n(58072),j=n(47330),v=n(86414),y=n(83122),w=n(53954),N=n(69260),k=n(5632),T=n(56958),_=n(21215),A=n(99083);function MoreActions(e){let{id:t,openEditModal:n}=e,r=(0,k.useRouter)(),{workspace_slug:s}=r.query,[,i]=p.Db(b),handleDelete=async()=>{confirm("Are you sure you want to delete this team?")&&T.A.promise(i({id:t}).then(e=>{let{error:t}=e;if(t)throw t;v.Z.track("team_deleted")}),{loading:"Deleting team...",erro),succes"})},l=[{name:"Edit team",onClic)},{name:"View team",onClick:()=>{r.push({pathname:"/[workspace_slug]/settings/teams/[id]",query:{workspace_slug:s,id:t}})}},{color:"#7f1d1d",name:"Delete",onClick:handleDelete}];return(0,a.jsx)(u.Z,{tabs:l,"data-testid":"team-more-actions"})}let TeamsGrid=e=>{let{teams:t,openEditModal:n,canEdit:r}=e;return(0,a.jsx)("div",{className:"grid auto-rows-auto grid-cols-1 gap-4 lg:grid-cols-2",children:null==t?void 0:t.map(e=>(0,a.jsx)("div",{className:"group relative flex flex-grow cursor-pointer flex-col justify-between",children:(0,a.jsxs)("div",{className:"flex h-full flex-col rounded-lg border",children:[(0,a.jsx)("div",{className:"flex flex-col justify-between space-y-2 px-4 pt-3",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-1 text-base font-semibold",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,a.jsx)("div",{children:r&&(0,a.jsx)(MoreActions,{id:e.id,openEditModal:n})})]})}),(0,a.jsxs)("div",{className:"mb-2 mt-3 grid gap-y-2",children:[(0,a.jsx)(MembersByRole,{filterRole:j.qm.Manager,members:e.members}),(0,a.jsx)(MembersByRole,{filterRole:j.qm.Member,members:e.members})]})]})},e.id))})};function MembersByRole(e){let{filterRole:t,members:n}=e;if(!n)return null;let r=n.filter(e=>e.role===t);if(0===r.length)return null;let s=null==r?void 0:r.slice(0,5),i=((null==r?void 0:r.length)||0)-(null==s?void 0:s.length);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"px-4",children:(0,a.jsxs)("div",{className:"text-sm capitalize text-gray-500",children:[t.toLowerCase()," (",r.length,")"]})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-start gap-1.5 px-4 py-2",children:[null==s?void 0:s.map(e=>{var n;return(0,a.jsx)("div",{className:(0,y.AK)("inline-flex flex-shrink-0 rounded-md border px-2",t===j.qm.Manager?"border-blue-300 bg-blue-50 text-blue-800":"border-gray-300 bg-gray-50 text-gray-600"),children:(0,a.jsx)("div",{className:"text-sm leading-6",children:null===(n=e.user)||void 0===n?void 0:n.email})},e.id)}),i>0&&(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"inline-flex flex-shrink-0 rounded-md border border-gray-300 px-2 py-1",children:(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["+",i]})})})]})]})}function SettingsTeams(){var e;let{currentUser:t}=(0,w.xJ)(),{workspace:n}=(0,w.cF)(),[r,s]=(0,l.useState)(!1),[{data:i,fetching:d,error:o}]=(0,g.m)({variables:{workspaceId:null==n?void 0:n.id},pause:!(null==n?void 0:n.id)}),c=null==i?void 0:i.teams,[{data:u}]=(e={variables:{workspaceId:null==n?void 0:n.id},pause:!(null==n?void 0:n.id)},p.aM({query:f,...e})),x=(0,l.useMemo)(()=>!!c&&!!u&&c.length>=u.workspaceTeamLimit,[c,u]),h=(0,l.useMemo)(()=>!u||u.workspaceTeamLimit>0,[u]),b=(0,w.j_)(j.KG.Team),v=b===j.KA.Edit,y=b===j.KA.None?{}:{"data-testid":"teams-".concat(v?"edit":"view")},N=(null==c?void 0:c.length)===0&&!d,{editTeam:k,updateEditTeam:T,setEditTeam:C}=(0,A.Ry)(),{currentUser:M}=(0,w.xJ)(),handleOpenNewModal=()=>{T({managers:[{id:M.id,name:M.email}]}),s(!0)};return(0,a.jsxs)("div",{className:"mx-auto w-full max-w-4xl",...y,children:[(0,a.jsx)(_.Z,{title:"Teams",description:"Groups of members that can administer workspace items.",Actions:(0,a.jsx)(AddTeamButton,{enabled:v&&h&&!N&&!d&&!x,handleClick:handleOpenNewModal})}),d?(0,a.jsx)("div",{}):N?(0,a.jsx)("div",{className:"flex items-center justify-center rounded-md border p-4 text-center text-gray-500 md:p-6",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl px-6 py-16 text-center",children:[(0,a.jsx)("div",{className:"text-blue m-auto mb-3 inline-block",children:(0,a.jsx)(m.WwQ,{className:"h-8 w-8"})}),(0,a.jsx)("h2",{className:"mb-2 text-lg font-semibold text-gray-800",children:"There are no teams yet in this workspace"}),(0,a.jsx)("div",{className:"mb-7 text-base text-gray-500",children:"Members can be added to teams to administer certain workspace items."}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(AddTeamButton,{enabled:v&&h,handleClick:handleOpenNewModal})})]})}):(0,a.jsxs)(a.Fragment,{children:[x?(0,a.jsx)(ReachedTeamLimitNotice,{}):null,(0,a.jsx)(TeamsGrid,{teams:c,canEdit:v,openEditModal:e=>{let t=null==c?void 0:c.fine);t&&(C(t),s(!0))}})]}),!h&&N?(0,a.jsx)(AnnounceTeams,{}):null,(0,a.jsx)(A.ZP,{editTeam:k,updateEditTeam:T,open:r,handleClos}})]})}let AddTeamButton=e=>{let{enabled:t,handleClick:n}=e;return t?(0,a.jsx)("button",{onClick:n,className:"duration-70 flex items-center justify-between rounded-md border border-zinc-900 bg-zinc-900 px-3 py-2 text-base font-medium text-white transition-all hover:bg-zinc-700 focus:border-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-300",children:(0,a.jsx)("span",{className:"flex-1",children:"Create team"})}):null},ReachedTeamLimitNotice=()=>(0,a.jsxs)("div",{className:"mb-8 rounded-md border bg-gray-50 px-6 py-5 md:flex md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"md:flex md:items-start",children:[(0,a.jsx)(m.WwQ,{className:"mr-3 h-5 w-5 shrink-0 text-slate-600"}),(0,a.jsxs)("div",{className:"mt-3 sm:mt-0",children:[(0,a.jsx)("div",{className:"text-base font-medium text-gray-900",children:"Teams Limit Reached"}),(0,a.jsx)("div",{className:"mt-1 max-w-md text-sm text-gray-600 md:flex md:items-center",children:(0,a.jsx)("div",{children:"Your workspace has reached the maximum number of teams under your current plan. Contact sales for an increased limit."})})]})]}),(0,a.jsx)("div",{className:"mt-4 sm:ml-6 md:mt-0 md:shrink-0",children:(0,a.jsx)("a",{href:"mailto:".concat(N.Xy,"?subject=Team Limit Increase Request"),children:(0,a.jsx)("button",{onClic),className:"focus:border-blue-primary inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-200",children:"Talk to sales"})})})]});var C=n(81291);function TeamPage(){return(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(C.Z,{title:"Team",includeSlug:!0}),(0,a.jsx)(i.Z,{children:(0,a.jsx)(SettingsTeams,{})})]})}TeamPage.getLayou};var M=TeamPage}},function(e){e.O(0,[3211,8426,3265,1617,4637,5837,4054,7330,9219,5306,6870,7156,6456,7185,9083,9774,2888,179}),_N_E=e.O()}]);
//# sourceMappingURL=teams-5e09819416320fa9.js.map