/*! For license information please see 18.144847fd72bc8e3f4ef5.chunk.v7.js.LICENSE.txt */
(window.officehome_webpackJsonp=window.officehome_webpackJsonp||[]).push([[18],{"6IMf":function(e,t,i){"use strict";function s(e,t={}){if(!e)return null;if(!t.skipVirtual){const t=function(e){return e)&&e._virtual.parent||null}(e);if(t)return t}return(null==e?void 0:e.parentNode)||null}i.d(t,"a",(function(){return s}))},"6siq":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("mXGw");const o=e=>{const[t,i]=s.useState((()=>void 0===e.defaultState?e.initialState:function(e){return"function"==typeof e}(e.defaultState)?e.defaultState():e.defaultState)),o=s.useRef(e.state);s.useEffect((,[e.state]);const r=s.useCallback((e=>{((e)&&e(o.current)}),[]);return n(e.state)?[e.state,r]:[t,i]},n=e=>{const[t]=s.useState(();return t}},BoSW:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("SM7n"),o=i("K5Sh");const n=e=>(Object(o.a)(),Object(s.h)(e))},K5Sh:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("mXGw"),o=i("FN6z"),n=i("SM7n"),r=i("6IMf"),l=i("RW7O");const a=()=>{const{targetDocument:e}=Object(o.b)(),t=(null==e?void 0:e.defaultView)||void 0,i=s.useMemo((()=>t?Object(n.b)(t,{autoRoot:{},controlTab:!1,getParent:r.a}):null),[t]);return Object(l.a)((()=>,[i]),i}},SM7n:function(e,t,i){"use strict";i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return Ee})),i.d(t,"c",(function(){return Ie})),i.d(t,"d",(function(){return Te})),i.d(t,"e",(function(){return Fe})),i.d(t,"f",(function(){return ye})),i.d(t,"g",(function(){return we})),i.d(t,"h",();var s=i("zvGb");const o="data-tabster",n="data-tabster-dummy",r="tabster:modalizer:active",l="tabster:modalizer:inactive",a="tabster:mover",u="tabster:focusin",d="tabster:focusout",c={Invisible:0,PartiallyVisible:1,Visible:2},h={Source:0,Target:1},m={Both:0,Vertical:1,Horizontal:2,Grid:3,GridLinear:4},_={Unlimited:0,Limited:1,LimitedTrapFocus:2},f={Auto:0,Inside:1,Outside:2};var b=Object.freeze({__proto__:null,TabsterAttributeName:o,TabsterDummyInputAttributeName:n,DeloserEventName:"tabster:deloser",ModalizerActiveEventName:r,ModalizerInactiveEventName:l,ModalizerFocusInEventName:"tabster:modalizer:focusin",ModalizerFocusOutEventName:"tabster:modalizer:focusout",ModalizerBeforeFocusOutEventName:"tabster:modalizer:beforefocusout",MoverEventName:a,FocusInEventName:u,FocusOutEventName:d,ObservedElementAccesibilities:{Any:0,Accessible:1,Focusable:2},RestoreFocusOrders:{History:0,DeloserDefault:1,RootDefault:2,DeloserFirst:3,RootFirst:4},Visibilities:c,RestorerTypes:h,MoverDirections:m,GroupperTabbabilities:_,SysDummyInputsPositions:f});unction p(e,t,i){var s,n;const r=i||e._noop?void 0:t.getAttribute(o);let l,a=e.storageEntry(t);if(r){if(r===(null===(s=null==a?void 0:a.attr)||void 0===s?void 0:s.string))return;try{const e=JSON.parse(r);if("object"!=typeof e)throw new Error(`Value is not a JSON object, got '${r}'.`);l={string:r,object:e}}catch(e){}}else if(!a)return;a||(a=e.storageEntry(t,!0)),a.tabster||(a.tabster={});const u=a.tabster||{},d=(null===(n=a.attr)||void 0===n?void 0:n.object)||{},c=(null==l?void 0:l.object)||{};for(const i of Object.keys(d))if(!c[i]){if("root"===i){const t=u[i];t&&e.root.onRoot(t,!0)}switch(i){case"deloser":case"root":case"groupper":case"modalizer":case"restorer":case"mover":const s=u[i];s&&(s.dispose(),delete u[i]);break;case"observed":delete u[i],e.observedElement&&e.observedElement.onObservedElementUpdate(t);break;case"focusable":case"outline":case"uncontrolled":case"sys":delete u[i]}}for(const i of Object.keys(c)){const s=c.sys;switch(i){case"deloser":u.deloser?u.deloser.setProps(c.deloser):e.deloser&&(u.deloser=e.deloser.createDeloser(t,c.deloser));break;case"root":u.root?u.root.setProps(c.root):u.root=e.root.createRoot(t,c.root,s),e.root.onRoot(u.root);break;case"modalizer":u.modalizer?u.modalizer.setProps(c.modalizer):e.modalizer&&(u.modalizer=e.modalizer.createModalizer(t,c.modalizer,s));break;case"restorer":u.restorer?u.restorer.setProps(c.restorer):e.restorer&&c.restorer&&(u.restorer=e.restorer.createRestorer(t,c.restorer));break;case"focusable":u.focusable=c.focusable;break;case"groupper":u.groupper?u.groupper.setProps(c.groupper):e.groupper&&(u.groupper=e.groupper.createGroupper(t,c.groupper,s));break;case"mover":u.mover?u.mover.setProps(c.mover):e.mover&&(u.mover=e.mover.createMover(t,c.mover,s));break;case"observed":e.observedElement&&(u.observed=c.observed,e.observedElement.onObservedElementUpdate(t));break;case"uncontrolled":u.uncontrolled=c.uncontrolled;break;case"outline":e.outline&&(u.outline=c.outline);break;case"sys":u.sys=c.sys;break;default:console.error(`Unknown key '${i}' in data-tabster attribute value.`)}}l?a.attr=l:(0===Object.keys(u).length&&(delete a.tabster,delete a.attr),e.storageEntry(t,!1))}let g;const E="undefined"!=typeof DOMRect?DOMRect:class{constructor(e,t,i,s){this.left=e||0,this.top=t||0,this.right=(e||0)+(i||0),this.bottom=(t||0)+(s||0)}};let T=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),g=!1}catch(e){g=!0}function y(e){const t=e();let i=t.__tabsterInstanceContext;return i||(i={elementByUId:{},basics:{Promise:t.Promise||void 0,WeakRef:t.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,fakeWeakRefs:[],fakeWeakRefsStarted:!1},t.__tabsterInstanceContext=i),i}class F{constructor(e){this._target=e}deref(){return this._target}static cleanupclass w{constructor(e,t,i){const s=y(e);let o;s.WeakRef?o=new s.WeakRef(t):(o=new F(t),s.fakeWeakRefs.push(o)),this._ref=o,this._data=i}get(){const e=this._ref;let t;return e&&(t=e.deref(),t||delete this._ref),t}getData(){return this._data}}function I(e,t){const i=y(e);i.fakeWeakRefs=i.fakeWeakRefs.filter(()}function O(e){const t=y(e);t.fakeWeakRefsStarted||(t.fakeWeakRefsStarted=!0,t.WeakRef=t)),t.fakeWeakRefsTimer||(t.fakeWeakRefsTimer=e().setTimeout((()=>{t.fakeWeakRefsTimer=void 0,I(e),O(e)}),12e4))}function k(e,t,i){if(t.nodeType===Node.ELEMENT_NODE)return e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,g?i:{acceptNode:i},!1)}function C(e,t){let i=t.__tabsterCacheId;const s=y(e),o=i?s.containerBoundingRectCache[i]:void 0;if(o)return o.rect;const n=t.ownerDocument&&t.ownerDocument.documentElement;if(!n)return new E;let r=0,l=0,a=n.clientWidth,u=n.clientHeight;if(t!==n){const e=t.getBoundingClientRect();r=Math.max(r,e.left),l=Math.max(l,e.top),a=Math.min(a,e.right),u=Math.min(u,e.bottom)}const d=new E(r<a?r:-1,l<u?l:-1,r<a?a-r:0,l<u?u-l:0);return i||(i="r-"+ ++s.lastContainerBoundingRectCacheId,t.__tabsterCacheId=i),s.containerBoundingRectCache[i]={rect:d,element:t},s.containerBoundingRectCacheTimer||(s.containerBoundingRectCacheTimer=window.setTimeout((()=>{s.containerBoundingRectCacheTimer=void 0;for(const e of Object.keys(s.containerBoundingRectCache))delete s.containerBoundingRectCache[e].element.__tabsterCacheId;s.containerBoundingRectCache={}}),50)),d}tion N(e,t){const i=y(e);let s=t.__tabsterElementUID;return s||(s=t.__tabsterElementUID=function(e){const t=new Uint32Array(4);if(e.crypto&&e.crypto.getRandomValues)e.crypto.getRandomValues(t);else if(e.msCrypto&&e.msCrypto.getRandomValues)e.msCrypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=4294967295*Math.random();const i=[];for(let e=0;e<t.length;e++)i.push(t[e].toString(36));return i.push("|"),i.push((++T).toString(36)),i.push("|"),i.push(Date.now().toString(36)),i.join("")}(e())),!i.elementByUId[s]&&z(t.ownerDocument,t)&&(i.elementByUId[s]=new w(e,t)),s}function x(e,t){const i=y(e);for(const e of Object.keys(i.elementByUId)){const s=i.elementByUId[e],o=s&&s.get();o&&t&&!t.contains(o)||delete i.elementByUId[e]}}function z(e,t){var i;return!!(null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.contains(t))}et W=0;class L{constructor(e,t,i){const s=e.getWindow;this._tabster=e,this._element=new w(s,t),this._props={...i},this.id="i"+ ++W}etProps(){return this._props}class S{constructor(e,t,i,s){var o;this._focusIn=e=>{const t=this.input;if(this.onFocusIn&&t){const i=U.getLastPhantomFrom()||e.relatedTarget;this.onFocusIn(this,this._isBackward(!0,t,i),i)}},this._focusOut=e=>{this.useDefaultAction=!1;const t=this.input;if(this.onFocusOut&&t){const i=e.relatedTarget;this.onFocusOut(this,this._isBackward(!1,t,i),i)}};const r=e(),l=r.document.createElement("i");l.tabIndex=0,l.setAttribute("role","none"),l.setAttribute(n,""),l.setAttribute("aria-hidden","true");const a=l.style;a.position="fixed",a.width=a.height="1px",a.opacity="0.001",a.zIndex="-1",a.setProperty("content-visibility","hidden"),l),this.input=l,this.isFirst=i.isFirst,this.isOutside=t,this._isPhantom=null!==(o=i.isPhantom)&&void 0!==o&&o,l.addEventListener("focusin",this._focusIn),l.addEventListener("focusout",this._focusOut),l.__tabsterDummyContainer=s,this._isPhantom&&(this._disposeTimer=r.setTimeout((()=>{delete this._disposeTimer,this.dispose()}),0),this._clearDisposeTimeout=()=>{this._disposeTimer&&(r.clearTimeout(this._disposeTimer),delete this._disposeTimer),delete this._clearDisposeTimeout})}disposeetTopLeft(e,t){var i;const s=null===(i=this.input)||void 0===i?void 0:i.style;s&&(s.top=`${e}px`,s.left=`${t}px`)}_isBackwardclass U{constructor(e,t,i,s,o,n){this._element=t,this._instance=new V(e,t,this,i,s,o,n)}oveOut(e){var t;null===(t=this._instance)||void 0===t||t.moveOut(e)}posetatic getLastPhantomFromtatic moveWithPhantomDummy(e,t,i,o){const n=new S(e.getWindow,!0,{isPhantom:!0,isFirst:!0}).input;if(n){const r=t.parentElement;if(r){let l=i&&!o||!i&&o?t.nextElementSibling:t;if(l)if(o){const e=l.previousElementSibling;e&&e.__tabsterDummyContainer&&(l=e)}else l.__tabsterDummyContainer&&(l=l.nextElementSibling);r.insertBefore(n,l),U._lastPhantomFrom=t,e.getWindow().setTimeout((,0),Object(s.d)(n)}}}}class B{constructor(e){this._updateQueue=new Set,this._lastUpdateQueueTime=0,this._changedParents=new WeakSet,this._dummyElements=[],this._dummyCallbacks=new WeakMap,this._domChanged=e=>{var t;this._changedParents.has(e)||(this._changedParents.add(e),this._updateDummyInputsTimer||(this._updateDummyInputsTimer=null===(t=this._win)||void 0===t?void 0:t.call(this).setTimeout((()=>{delete this._updateDummyInputsTimer;for(const e of this._dummyElements){const t=e.deref();if(t){const e=this._dummyCallbacks.get(t);if(e){const i=t.parentElement;i&&!this._changedParents.has(i)||e()}}}this._changedParents=new WeakSet}),100)))},this._win=e}addemove(e){this._dummyElements=this._dummyElements.filter((t=>{const i=t.deref();return i&&i!==e})),this._dummyCallbacks.delete(e),0===this._dummyElements.length&&delete this.domChanged}dispose(){var e;const t=null===(e=this._win)||void 0===e?void 0:e.call(this);this._updateTimer&&(null==t||t.clearTimeout(this._updateTimer),delete this._updateTimer),this._updateDummyInputsTimer&&(null==t||t.clearTimeout(this._updateDummyInputsTimer),delete this._updateDummyInputsTimer),this._changedParents=new WeakSet,this._dummyCallbacks=new WeakMap,this._dummyElements=[],this._updateQueue.clear(),delete this.domChanged,delete this._win}updatePositionsscheduledUpdatePositions(){var e;this._updateTimer||(this._updateTimer=null===(e=this._win)||void 0===e?void 0:e.call(this).setTimeout((()=>{if(delete this._updateTimer,this._lastUpdateQueueTime+100<=Date.now()){const e=new Map,t=[];for(const i of this._updateQueue)t.push(i(e));this._updateQueue.clear();for(const e of t)e();e.clear()}else this._scheduledUpdatePositions()}),100))}}class V{constructor(e,t,i,o,n,r,l){this._wrappers=[],this._isOutside=!1,this._transformElements=new Set,this._onFocusIn=(e,t,i)=>{this._onFocus(!0,e,t,i)},this._onFocusOut=(e,t,i)=>{this._onFocus(!1,e,t,i)},this.moveOut=e=>{var t;const i=this._firstDummy,o=this._lastDummy;if(i&&o){this._ensurePosition();const n=i.input,r=o.input,l=null===(t=this._element)||void 0===t?void 0:t.get();if(n&&r&&l){let t;e?(n.tabIndex=0,t=n):(r.tabIndex=0,t=r),t&&Object(s.d)(t)}}},this.moveOutWithDefaultAction=e=>{var t;const i=this._firstDummy,o=this._lastDummy;if(i&&o){this._ensurePosition();const n=i.input,r=o.input,l=null===(t=this._element)||void 0===t?void 0:t.get();if(n&&r&&l){let t;e?!i.isOutside&&this._tabster.focusable.isFocusable(l,!0,!0,!0)?t=l:(i.useDefaultAction=!0,n.tabIndex=0,t=n):(o.useDefaultAction=!0,r.tabIndex=0,t=r),t&&Object(s.d)(t)}}},this.setTabbable=(e,t)=>{var i,s;for(const i of this._wrappers)if(i.manager===e){i.tabbable=t;break}const o=this._getCurrent();if(o){const e=o.tabbable?0:-1;let t=null===(i=this._firstDummy)||void 0===i?void 0:i.input;t&&(t.tabIndex=e),t=null===(s=this._lastDummy)||void 0===s?void 0:s.input,t&&(t.tabIndex=e)}},this._addDummyInputs=()=>{this._addTimer||(this._addTimer=this._getWindow().setTimeout((()=>{delete this._addTimer,this._ensurePosition(),this._addTransformOffsets()}),0))},this._addTransformOffsets=()=>{this._tabster._dummyObserver.updatePositions(this._computeTransformOffsets)},this._computeTransformOffsets=e=>{var t,i;const s=(null===(t=this._firstDummy)||void 0===t?void 0:t.input)||(null===(i=this._lastDummy)||void 0===i?void 0:i.input),o=this._transformElements,n=new Set;let r=0,l=0;const a=this._getWindow();for(let t=s;t&&t.nodeType===Node.ELEMENT_NODE;t=t.parentElement){let i=e.get(t);if(void 0===i){const s=a.getComputedStyle(t).transform;s&&"none"!==s&&(i={scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),e.set(t,i||null)}i&&(n.add(t),o.has(t)||t.addEventListener("scroll",this._addTransformOffsets),r+=i.scrollTop,l+=i.scrollLeft)}for(const e of o)n.has(e)||e.removeEventListener("scroll",this._addTransformOffsets);return this._transformElements=n,()=>{var e,t;null===(e=this._firstDummy)||void 0===e||e.setTopLeft(r,l),null===(t=this._lastDummy)||void 0===t||t.setTopLeft(r,l)}};const a=t.get();if(!a)throw new Error("No element");this._tabster=e,this._getWindow=e.getWindow,this._callForDefaultAction=l;const u=a.__tabsterDummy;if((u||this)._wrappers.push({manager:i,priority:o,tabbable:!0}),u)return u;a.__tabsterDummy=this;const d=null==n?void 0:n.dummyInputsPosition,c=a.tagName;this._isOutside=d?d===f.Outside:(r||"UL"===c||"OL"===c||"TABLE"===c)&&!("LI"===c||"TD"===c||"TH"===c),this._firstDummy=new S(this._getWindow,this._isOutside,{isFirst:!0},t),this._lastDummy=new S(this._getWindow,this._isOutside,{isFirst:!1},t);const h=this._firstDummy.input;h&&e._dummyObserver.add(h,this._addDummyInputs),this._firstDummy.onFocusIn=this._onFocusIn,this._firstDummy.onFocusOut=this._onFocusOut,this._lastDummy.onFocusIn=this._onFocusIn,this._lastDummy.onFocusOut=this._onFocusOut,this._element=t,this._addDummyInputs()}dispose(e,t){var i,s,o,n;if(0===(this._wrappers=this._wrappers.filter((i=>i.manager!==e&&!t))).length){delete(null===(i=this._element)||void 0===i?void 0:i.get()).__tabsterDummy;for(const e of this._transformElements)e.removeEventListener("scroll",this._addTransformOffsets);this._transformElements.clear();const e=this._getWindow();this._addTimer&&(e.clearTimeout(this._addTimer),delete this._addTimer);const t=null===(s=this._firstDummy)||void 0===s?void 0:s.input;t&&this._tabster._dummyObserver.remove(t),null===(o=this._firstDummy)||void 0===o||o.dispose(),null===(n=this._lastDummy)||void 0===n||n.dispose()}}_onFocus(e,t,i,s){var o;const n=this._getCurrent();!n||t.useDefaultAction&&!this._callForDefaultAction||null===(o=n.manager.getHandler(e))||void 0===o||o(t,i,s)}_getCurrent(){return this._wrappers.sort(((e,t)=>e.tabbable!==t.tabbable?e.tabbable?-1:1:e.priority-t.priority)),this._wrappers[0]}_ensurePosition(){var e,t,i;const s=null===(e=this._element)||void 0===e?void 0:e.get(),o=null===(t=this._firstDummy)||void 0===t?void 0:t.input,n=null===(i=this._lastDummy)||void 0===i?void 0:i.input;if(s&&o&&n)if(this._isOutside){const e=s.parentElement;if(e){const t=s.nextElementSibling;t!==n&&e.insertBefore(n,t),s.previousElementSibling!==o&&e.insertBefore(o,s)}}else{s.lastElementChild!==n&&s.appendChild(n);const e=s.firstElementChild;e&&e!==o&&s.insertBefore(o,e)}}}function j(e){let t=null;for(let i=e.lastElementChild;i;i=i.lastElementChild)t=i;return t||void 0}unction G(e,t,i,s){const o=e.storageEntry(t,!0);let n=!1;if(!o.aug){if(void 0===s)return n;o.aug={}}if(void 0===s){if(i in o.aug){const e=o.aug[i];delete o.aug[i],null===e?t.removeAttribute(i):t.setAttribute(i,e),n=!0}}else{let e;i in o.aug||(e=t.getAttribute(i)),void 0!==e&&e!==s&&(o.aug[i]=e,null===s?t.removeAttribute(i):t.setAttribute(i,s),n=!0)}return void 0===s&&0===Object.keys(o.aug).length&&(delete o.aug,e.storageEntry(t,!1)),n}function H(e,t){const i=JSON.stringify(e);return!0===t?i:{[o]:i}}class J extends U{constructor(e,t,i,o){super(e,t,1,o,void 0,!0),this._onDummyInputFocus=e=>{var t;if(e.useDefaultAction)this._setFocused(!1,!0);else{this._tabster.keyboardNavigation.setNavigatingWithKeyboard(!0);const i=this._element.get();if(i){this._setFocused(!0,!0);const t=this._tabster.focusedElement.getFirstOrLastTabbable(e.isFirst,{container:i,ignoreAccessibility:!0});if(t)return void Object(s.d)(t)}null===(t=e.input)||void 0===t||t.blur()}},this._setHandlers(this._onDummyInputFocus),this._tabster=e,this._setFocused=i}}class Q extends L{constructor(e,t,i,s,o){super(e,t,s),this._isFocused=!1,this._setFocused=(e,t)=>{if(this._setFocusedTimer&&(this._tabster.getWindow().clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._isFocused===e)return;const i=this._element.get();i&&(e?(this._isFocused=!0,K(this._tabster.root.eventTarget,"focus",{element:i,fromAdjacent:t})):this._setFocusedTimer=this._tabster.getWindow().setTimeout((()=>{delete this._setFocusedTimer,this._isFocused=!1,K(this._tabster.root.eventTarget,"blur",{element:i,fromAdjacent:t})}),0))},this._onFocus=e=>{var t;const i=this._tabster.getWindow();if(this._setTabbableTimer&&(i.clearTimeout(this._setTabbableTimer),delete this._setTabbableTimer),e){const i=q.getTabsterContext(this._tabster,e);if(i&&this._setFocused(i.root.getElement()===this._element.get()),!i||i.uncontrolled||this._tabster.rootDummyInputs)return void(null===(t=this._dummyManager)||void 0===t||t.setTabbable(!1))}else this._setFocused(!1);this._setTabbableTimer=i.setTimeout((()=>{var e;delete this._setTabbableTimer,null===(e=this._dummyManager)||void 0===e||e.setTabbable(!0)}),0)},this._onDispose=i,this.uid=N(e.getWindow,t),this._sys=o,(e.controlTab||e.rootDummyInputs)&&this.addDummyInputs(),e.focusedElement.subscribe(this._onFocus),this._add()}addDummyInputsisposeoveOutWithDefaultActionadd(){}_remove(){}}class q{constructor(e,t){this._autoRootWaiting=!1,this._roots={},this._forceDummy=!1,this.rootById={},this._autoRootCreate=()=>{var e;const t=this._win().document,i=t.body;if(i){this._autoRootUnwait(t);const s=this._autoRoot;if(s)return function(e,t,i){let s;{const t=e.getAttribute(o);if(t)try{s=JSON.parse(t)}catch(e){}}s||(s={}),function(e,t){for(const i of Object.keys(t)){const s=t[i];s?e[i]=s:delete e[i]}}(s,t),Object.keys(s).length>0?e.setAttribute(o,H(s,!0)):e.removeAttribute(o)}(i,{root:s}),p(this._tabster,i),null===(e=v(this._tabster,i))||void 0===e?void 0:e.root}else this._autoRootWaiting||(this._autoRootWaiting=!0,t.addEventListener("readystatechange",this._autoRootCreate))},this._onRootDispose=e=>{delete this._roots[e.id]},this._tabster=e,this._win=e.getWindow,this._autoRoot=t,this.eventTarget=this._win),e.queueInit(()}_autoRootUnwaitispose(){const e=this._win();this._autoRootUnwait(e.document),delete this._autoRoot,Object.keys(this._roots).forEach((e=>{this._roots[e]&&(this._roots[e].dispose(),delete this._roots[e])})),this.rootById={}}createRootddDummyInputs(){this._forceDummy=!0;const e=this._roots;for(const t of Object.keys(e))e[t].addDummyInputs()}static getRootByUIdtatic getTabsterContext(e,t,i){var s,o,n,r;if(void 0===i&&(i={}),!t.ownerDocument)return;const{checkRtl:l,referenceElement:a}=i,u=e.getParent;let d,c,h,m;e.drainInitQueue();let _,f,b,p,g=!1,E=a||t;const T={};for(;E&&(!d||l);){const i=v(e,E);if(l&&void 0===b){const e=E.dir;e&&(b="rtl"===e.toLowerCase())}if(!i){E=u(E);continue}const r=E.tagName;(i.uncontrolled||"IFRAME"===r||"WEBVIEW"===r)&&(p=E),m||!(null===(s=i.focusable)||void 0===s?void 0:s.excludeFromMover)||h||(g=!0);const a=i.modalizer,y=i.groupper,F=i.mover;!c&&a&&(c=a),h||!y||c&&!a||(c?(!y.isActive()&&y.getProps().tabbability&&c.userId!==(null===(o=e.modalizer)||void 0===o?void 0:o.activeId)&&(c=void 0,h=y),f=y):h=y),m||!F||c&&!a||y&&E===t||(m=F,_=!!h&&h!==y),i.root&&(d=i.root),(null===(n=i.focusable)||void 0===n?void 0:n.ignoreKeydown)&&Object.assign(T,i.focusable.ignoreKeydown),E=u(E)}if(!d){const i=e.root;i._autoRoot&&(null===(r=t.ownerDocument)||void 0===r?void 0:r.body)&&(d=i._autoRootCreate())}return h&&!m&&(_=!0),d?{root:d,modalizer:c,groupper:h,mover:m,isGroupperFirst:_,modalizerInGroupper:f,isRtl:l?!!b:void 0,uncontrolled:p,isExcludedFromMover:g,ignoreKeydown::void 0}static getRoot(e,t){var i;for(let s=t;s;s=s.parentElement){const t=null===(i=v(e,s))||void 0===i?void 0:i.root;if(t)return t}}onRootclass ${isposeubscribeubscribeFirsttValst X=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","*[tabindex]","*[contenteditable]"].join(", ");class Y{ispose(){}getPropssFocusable(e,t,i,s){return!(!P(e,X)||!t&&-1===e.tabIndex)&&(i||this.isVisible(e))&&(s||this.isAccessible(e))}isVisiblesAccessible(e){var t;for(let i=e;i;i=i.parentElement){const e=v(this._tabster,i);if(this._isHidden(i))return!1;if(!(null===(t=null==e?void 0:e.focusable)||void 0===t?void 0:t.ignoreAriaDisabled)&&this._isDisabled(i))return!1}return!0}isHidden(e){var t;const i=e.getAttribute("aria-hidden");return!(!i||"true"!==i.toLowerCase()||(null===(t=this._tabster.modalizer)||void 0===t?void 0:t.isAugmented(e)))}findFirst(e){return this.findElement({...e})}findLast(e){return this.findElement({isBackward:!0,...e})}findNext(e,t){return this.findElement({...e},t)}findPrev(e,t){return this.findElement({...e,isBackward:!0},t)}findDefault(e){return this.findElement({...e,acceptCondition:t=>this._tabster.focusable.isFocusable(t,e.includeProgrammaticallyFocusable)&&!!this.getProps(t).isDefault})||null}findAllindElementfindElements(e,t,i){var s,o,n;const{container:r,currentElement:l=null,includeProgrammaticallyFocusable:a,useActiveModalizer:u,ignoreUncontrolled:d,ignoreAccessibility:c,modalizerId:h,isBackward:m,onUncontrolled:_,onElement:f}=t;i||(i={});const b=[];let{acceptCondition:v}=t;if(!r)return null;v||(v=e=>this._tabster.focusable.isFocusable(e,a,!1,c));const p={container:r,modalizerUserId:void 0===h&&u?null===(s=this._tabster.modalizer)||void 0===s?void 0:s.activeId:h||(null===(n=null===(o=q.getTabsterContext(this._tabster,r))||void 0===o?void 0:o.modalizer)||void 0===n?void 0:n.userId),from:l||r,isBackward:m,acceptCondition:v,includeProgrammaticallyFocusable:a,ignoreUncontrolled:d,ignoreAccessibility:c,cachedGrouppers:{}},g=k(r.ownerDocument,r,();if(!g)return null;const E=t=>{const i=p.foundElement;return i&&b.push(i),e?!(i&&(p.found=!1,delete p.foundElement,delete p.fromCtx,p.from=i,f&&!f(i))||!i&&!t):!(!t||i)};if(l||(i.outOfDOMOrder=!0),l)g.currentNode=l;else if(m){const e=j(r);if(!e)return null;if(this._acceptElement(e,p)===NodeFilter.FILTER_ACCEPT&&!E(!0))return p.skippedFocusable&&(i.outOfDOMOrder=!0),b;g.currentNode=e}let T;do{T=(m?g.previousNode():g.nextNode())||void 0}while(E());if(!e){const e=p.nextUncontrolled;if(e)return _&&_(e),T?void 0:null}return p.skippedFocusable&&(i.outOfDOMOrder=!0),b.length?b:null}_acceptElement(e,t){var i,s,o,n,r;if(t.found)return NodeFilter.FILTER_ACCEPT;const l=t.container;if(e===l)return NodeFilter.FILTER_SKIP;if(!l.contains(e))return NodeFilter.FILTER_REJECT;if(e.__tabsterDummyContainer)return NodeFilter.FILTER_REJECT;let a=t.lastToIgnore;if(a){if(a.contains(e))return NodeFilter.FILTER_REJECT;a=t.lastToIgnore=void 0}const u=t.currentCtx=q.getTabsterContext(this._tabster,e);if(!u)return NodeFilter.FILTER_SKIP;if(t.ignoreUncontrolled){if(A(e))return NodeFilter.FILTER_SKIP}else if(u.uncontrolled&&!t.nextUncontrolled&&this._tabster.focusable.isFocusable(e,void 0,!0,!0)&&!u.groupper&&!u.mover&&(null===(i=u.modalizer)||void 0===i?void 0:i.userId)===(null===(s=this._tabster.modalizer)||void 0===s?void 0:s.activeId))return this.isVisible(u.uncontrolled)&&(t.nextUncontrolled=u.uncontrolled),t.skippedFocusable=!0,NodeFilter.FILTER_REJECT;if("IFRAME"===e.tagName||"WEBVIEW"===e.tagName)return(null===(o=u.modalizer)||void 0===o?void 0:o.userId)===(null===(n=this._tabster.modalizer)||void 0===n?void 0:n.activeId)?(t.found=!0,t.lastToIgnore=t.foundElement=e,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT;if(!t.ignoreAccessibility&&!this.isAccessible(e))return this.isFocusable(e,!1,!0,!0)&&(t.skippedFocusable=!0),NodeFilter.FILTER_REJECT;let d,c=t.fromCtx;c||(c=t.fromCtx=q.getTabsterContext(this._tabster,t.from));const h=null==c?void 0:c.mover;let m=u.groupper,_=u.mover;if(d=null===(r=this._tabster.modalizer)||void 0===r?void 0:r.acceptElement(e,t),void 0!==d&&(t.skippedFocusable=!0),void 0===d&&(m||_||h)){const i=null==m?void 0:m.getElement(),s=null==h?void 0:h.getElement();let o=null==_?void 0:_.getElement();o&&(null==s?void 0:s.contains(o))&&l.contains(s)&&(!i||!_||s.contains(i))&&(_=h,o=s),!i||i!==l&&l.contains(i)||(m=void 0),o&&!l.contains(o)&&(_=void 0),m&&_&&(o&&i&&!i.contains(o)?_=void 0:m=void 0),m&&(d=m.acceptElement(e,t)),_&&(d=_.acceptElement(e,t))}return void 0===d&&(d=t.acceptCondition(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP,d===NodeFilter.FILTER_SKIP&&this.isFocusable(e,!1,!0,!0)&&(t.skippedFocusable=!0)),d!==NodeFilter.FILTER_ACCEPT||t.found||(t.found=!0,t.foundElement=e),d}}const Z=37;class ee extends ${constructor(e,t){super(),this._init=()=>{const e=this._win(),t=e.document;t.addEventListener(s.a,this._onFocusIn,!0),t.addEventListener("focusout",this._onFocusOut,!0),e.addEventListener("keydown",this._onKeyDown,!0);const i=t.activeElement;i&&i!==t.body&&this._setFocusedElement(i),this.subscribe(this._onChanged)},this._onFocusIn=e=>{this._setFocusedElement(e.target,e.details.relatedTarget,e.details.isFocusedProgrammatically)},this._onFocusOut=e=>{this._setFocusedElement(void 0,e.relatedTarget)},this._validateFocusedElement=this._onKeyDown=e=>{var t,i;if(9!==e.keyCode||e.ctrlKey)return;const o=this.getVal();if(!o||!o.ownerDocument||"true"===o.contentEditable)return;const n=this._tabster,r=n.controlTab,l=q.getTabsterContext(n,o);if(!l||l.ignoreKeydown(e))return;const a=e.shiftKey,u=ee.findNextTabbable(n,l,void 0,o,void 0,a,void 0,!0);let d;if(u){let e=u.uncontrolled;if(e){const s=l.isGroupperFirst;let o=!1;if(void 0!==s){const n=null===(t=l.groupper)||void 0===t?void 0:t.getElement(),r=null===(i=l.mover)||void 0===i?void 0:i.getElement();let a;s&&n&&e.contains(n)?a=n:!s&&r&&e.contains(r)&&(a=r),a&&(e=a,o=!0)}return void(e&&l.uncontrolled!==e&&U.moveWithPhantomDummy(this._tabster,e,o,a))}d=u.element}if(d){if("IFRAME"===d.tagName)return void U.moveWithPhantomDummy(this._tabster,d,!1,a);(r||(null==u?void 0:u.outOfDOMOrder))&&(e.preventDefault(),e.stopImmediatePropagation(),Object(s.d)(d))}else l.root.moveOutWithDefaultAction(a)},this._onChanged=(e,t)=>{var i,s;if(e)K(e,u,t);else{const e=null===(i=this._lastVal)||void 0===i?void 0:i.get();if(e){const i={...t},o=q.getTabsterContext(this._tabster,e),n=null===(s=null==o?void 0:o.modalizer)||void 0===s?void 0:s.userId;n&&(i.modalizerId=n),K(e,d,i)}}},this._tabster=e,this._win=t,e.queueInit(this._init)}dispose(){super.dispose();const e=this._win();e.document.removeEventListener(s.a,this._onFocusIn,!0),e.document.removeEventListener("focusout",this._onFocusOut,!0),e.removeEventListener("keydown",this._onKeyDown,!0),this.unsubscribe(this._onChanged),delete ee._lastResetElement,delete this._nextVal,delete this._lastVal}static forgetMemorized(e,t){var i,s;let o=ee._lastResetElement,n=o&&o.get();n&&t.contains(n)&&delete ee._lastResetElement,n=null===(s=null===(i=e._nextVal)||void 0===i?void 0:i.element)||void 0===s?void 0:s.get(),n&&t.contains(n)&&delete e._nextVal,o=e._lastVal,n=o&&o.get(),n&&t.contains(n)&&delete e._lastVal}etLastFocusedElement(){var e;let t=null===(e=this._lastVal)||void 0===e?void 0:e.get();return(!t||t&&!z(t.ownerDocument,t))&&(this._lastVal=t=void 0),t}focusocusDefaultetFirstOrLastTabbable(e,t){const i=this._tabster.focusable,{container:s,ignoreAccessibility:o}=t;let n,r;if(s){const t=q.getTabsterContext(this._tabster,s);if(t){let l=ee.findNextTabbable(this._tabster,t,s,void 0,void 0,!e,void 0,o);if(l)for(r=l.element,n=l.uncontrolled;!r&&n;)r=i.isFocusable(n,!1,!0,!0)?n:i[e?"findFirst":"findLast"]({container:n,ignoreUncontrolled:!0,ignoreAccessibility:o,useActiveModalizer:!0}),r||(l=ee.findNextTabbable(this._tabster,t,n,void 0,void 0,!e,void 0,o),l&&(r=l.element,n=l.uncontrolled))}}return r&&!(null==s?void 0:s.contains(r))&&(r=void 0),r||void 0}_focusFirstOrLastocusFirst(e){return this._focusFirstOrLast(!0,e)}esetFocussetOrRemoveAttributesetFocusedElement(e,t,i){var s,o;if(this._tabster._noop)return;const n={relatedTarget:t};if(e){const t=null===(s=ee._lastResetElement)||void 0===s?void 0:s.get();if(ee._lastResetElement=void 0,t===e||A(e))return;n.isFocusedProgrammatically=i;const r=q.getTabsterContext(this._tabster,e),l=null===(o=null==r?void 0:r.modalizer)||void 0===o?void 0:o.userId;l&&(n.modalizerId=l)}const r=this._nextVal={element:e?new w(this._win,e):void 0,details:n};e&&e!==this._val&&this._validateFocusedElement(e),this._nextVal===r&&this.setVal(e,n),this._nextVal=void 0}setVal(e,t){super.setVal(e,t),e&&(this._lastVal=new w(this._win,e))}static findNextTabbable(e,t,i,s,o,n,r,l){const a=i||t.root.getElement();if(!a)return null;let u=null;const d=ee._isTabbingTimer,c=e.getWindow();d&&c.clearTimeout(d),ee.isTabbing=!0,ee._isTabbingTimer=c.setTimeout((()=>{delete ee._isTabbingTimer,ee.isTabbing=!1}),0);const h=t.modalizer,m=t.groupper,_=t.mover,f=t=>{var a;if(u=t.findNextTabbable(s,o,n,r,l),s&&!(null==u?void 0:u.element)&&!(null==u?void 0:u.uncontrolled)){const o=t!==h&&(null===(a=t.getElement())||void 0===a?void 0:a.parentElement);if(o){const a=q.getTabsterContext(e,s,{referenceElement:o});if(a){const s=t.getElement(),d=n?s:s&&j(s)||s;d&&(u=ee.findNextTabbable(e,a,i,d,o,n,r,l),u&&(u.outOfDOMOrder=!0))}}}};if(m&&_)f(t.isGroupperFirst?m:_);else if(m)f(m);else if(_)f(_);else if(h)f(h);else{let t;const i={},d=e.focusable[n?"findPrev":"findNext"]({container:a,currentElement:s,referenceElement:o,onUncontrolled:e=>{t=e},ignoreUncontrolled:r,ignoreAccessibility:l,useActiveModalizer:!0},i);u={element:t?void 0:d,uncontrolled:t,outOfDOMOrder:i.outOfDOMOrder}}return u}}ee.isTabbing=!1;class te extends U{constructor(e,t,i,o){super(i,e,4,o,!0),this._setHandlers(((o,n,r)=>{var l,a;const u=e.get(),d=o.input;if(u&&d){const e=q.getTabsterContext(i,d);if(e){let c;c=null===(l=t.findNextTabbable(r||void 0,void 0,n,!0,!0))||void 0===l?void 0:l.element,c||(c=null===(a=ee.findNextTabbable(i,e,void 0,o.isOutside?d:function(e,t){let i=e,s=null;for(;i&&!s;)s=t?i.previousElementSibling:i.nextElementSibling,i=i.parentElement;return s||void 0}(u,!n),void 0,n,!0,!0))||void 0===a?void 0:a.element),c&&Object(s.d)(c)}}}))}}class ie extends L{constructor(e,t,i,s,o){super(e,t,s),this._shouldTabInside=!1,this.makeTabbable(!1),this._onDispose=i,e.controlTab||(this.dummyManager=new te(this._element,this,e,o))}dispose(){var e;this._onDispose(this),this._element.get(),null===(e=this.dummyManager)||void 0===e||e.dispose(),delete this.dummyManager,delete this._first}findNextTabbable(e,t,i,s,o){var n;const r=this.getElement();if(!r)return null;const l=(null===(n=null==e?void 0:e.__tabsterDummyContainer)||void 0===n?void 0:n.get())===r;if(!this._shouldTabInside&&e&&r.contains(e)&&!l)return{element:void 0,outOfDOMOrder:!0};const a=this.getFirst(!0);if(!e||!r.contains(e)||l)return{element:a,outOfDOMOrder:!0};const u=this._tabster;let d,c=null,h=!1;if(this._shouldTabInside&&a){const n={};c=u.focusable[i?"findPrev":"findNext"]({container:r,currentElement:e,referenceElement:t,onUncontrolled:e=>{d=e},ignoreUncontrolled:s,ignoreAccessibility:o,useActiveModalizer:!0},n),h=!!n.outOfDOMOrder,d||c||this._props.tabbability!==_.LimitedTrapFocus||(c=i?u.focusable.findLast({container:r,ignoreUncontrolled:!0,ignoreAccessibility:o,useActiveModalizer:!0}):u.focusable.findFirst({container:r,ignoreUncontrolled:!0,ignoreAccessibility:o,useActiveModalizer:!0}),h=!0)}return{element:c,uncontrolled:d,outOfDOMOrder:h}}makeTabbablesActive(e){var t;const i=this.getElement()||null;let s=!0;for(let e=null==i?void 0:i.parentElement;e;e=e.parentElement){const i=null===(t=v(this._tabster,e))||void 0===t?void 0:t.groupper;i&&(i._shouldTabInside||(s=!1))}let o=s?!!this._props.tabbability&&this._shouldTabInside:void 0;if(o&&e){const e=this._tabster.focusedElement.getFocusedElement();e&&(o=e!==this.getFirst(!0))}return o}getFirst(e){var t;const i=this.getElement();let s;if(i){if(e&&this._tabster.focusable.isFocusable(i))return i;s=null===(t=this._first)||void 0===t?void 0:t.get(),s||(s=this._tabster.focusable.findFirst({container:i,ignoreUncontrolled:!0,useActiveModalizer:!0})||void 0,s&&this.setFirst(s))}return s}setFirstcceptElement(e,t){var i;const s=t.cachedGrouppers,o=null===(i=this.getElement())||void 0===i?void 0:i.parentElement,n=o&&q.getTabsterContext(this._tabster,o),r=null==n?void 0:n.groupper,l=(null==n?void 0:n.isGroupperFirst)?r:void 0;let a;const u=e=>{let t,i=s[e.id];return i?t=i.isActive:(t=this.isActive(!0),i=s[e.id]={isActive:t}),t};if(l&&(a=l.getElement(),!u(l)&&a&&t.container!==a&&t.container.contains(a)))return t.skippedFocusable=!0,NodeFilter.FILTER_REJECT;const d=u(this),c=this.getElement();if(c&&!0!==d){if(c===e&&r&&(a||(a=r.getElement()),a&&!u(r)&&t.container.contains(a)&&a!==t.container))return t.skippedFocusable=!0,NodeFilter.FILTER_REJECT;if(c!==e&&c.contains(e))return t.skippedFocusable=!0,NodeFilter.FILTER_REJECT;const i=s[this.id];let o;if(o="first"in i?i.first:i.first=this.getFirst(!0),o&&t.acceptCondition(o))return t.lastToIgnore=c,t.skippedFocusable=!0,o!==t.from?(t.found=!0,t.foundElement=o,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT}}}class se{constructor(e,t){this._current={},this._grouppers={},this._init=()=>{const e=this._win();this._tabster.focusedElement.subscribeFirst(this._onFocus),e.document.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("keydown",this._onKeyDown,!0)},this._onGroupperDispose=e=>{delete this._grouppers[e.id]},this._onFocus=e=>{e&&this._updateCurrent(e,!0,!0)},this._onMouseDown=this._onKeyDown=e=>{if(13!==e.keyCode&&27!==e.keyCode)return;if(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)return;const t=this._tabster.focusedElement.getFocusedElement();t&&this.handleKeyPress(t,e)},this._tabster=e,this._win=t,e.queueInit(this._init)}dispose(){const e=this._win();this._current={},this._updateTimer&&(e.clearTimeout(this._updateTimer),delete this._updateTimer),this._tabster.focusedElement.unsubscribe(this._onFocus),e.document.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._grouppers).forEach((e=>{this._grouppers[e]&&(this._grouppers[e].dispose(),delete this._grouppers[e])}))}createGroupper(e,t,i){const s=new ie(this._tabster,e,this._onGroupperDispose,t,i);this._grouppers[s.id]=s;const o=this._tabster.focusedElement.getFocusedElement();return o&&e.contains(o)&&!this._updateTimer&&(this._updateTimer=this._win().setTimeout((()=>{delete this._updateTimer,o===this._tabster.focusedElement.getFocusedElement()&&this._updateCurrent(o,!0,!0)}),0)),s}updateCurrent(e,t,i){var s;this._updateTimer&&(this._win().clearTimeout(this._updateTimer),delete this._updateTimer);const o={};let n=!0;for(let r=e;r;r=r.parentElement){const l=null===(s=v(this._tabster,r))||void 0===s?void 0:s.groupper;if(l){if(o[l.id]=!0,n&&i&&r!==e&&(n=!1),t||!n){this._current[l.id]=l;const t=l.isActive()||e!==r&&(!l.getProps().delegated||l.getFirst(!1)!==e);l.makeTabbable(t)}n=!1}}for(const e of Object.keys(this._current)){const t=this._current[e];t.id in o||(t.makeTabbable(!1),t.setFirst(void 0),delete this._current[e])}}handleKeyPress(e,t,i){var s;const o=this._tabster,n=q.getTabsterContext(o,e),r=null==n?void 0:n.modalizerInGroupper;let l=(null==n?void 0:n.groupper)||r;if(n&&l){if(n.ignoreKeydown(t))return;let a;const u=l.getElement();if(13===t.keyCode)u&&(e===u||l.getProps().delegated&&e===l.getFirst(!1))&&(a=o.focusable.findNext({container:u,currentElement:e,useActiveModalizer:!0}));else if(27===t.keyCode){if(u&&u.contains(e))if(e!==u||i)a=l.getFirst(!0);else{const e=u.parentElement,t=e?q.getTabsterContext(o,e):void 0;l=null==t?void 0:t.groupper,a=null==l?void 0:l.getFirst(!0)}l&&(l.makeTabbable(!1),r&&(null===(s=o.modalizer)||void 0===s||s.setActive(void 0)))}a&&(t.preventDefault(),t.stopImmediatePropagation(),a.focus())}}}class oe extends ${constructor(e){super(),this._onChange=e=>{this.setVal(e,void 0)},this._keyborg=Object(s.b)(e()),this._keyborg.subscribe(this._onChange)}dispose(){super.dispose(),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),Object(s.c)(this._keyborg),delete this._keyborg)}setNavigatingWithKeyboard(e){var t;null===(t=this._keyborg)||void 0===t||t.setVal(e)}let ne=0;const re="aria-hidden";class le extends U{constructor(e,t,i){super(t,e,2,i),this._setHandlers(((i,o)=>{var n,r,l;const a=e.get(),u=a&&(null===(n=q.getRoot(t,a))||void 0===n?void 0:n.getElement()),d=i.input;let c;if(u&&d){const e=null===(r=d.__tabsterDummyContainer)||void 0===r?void 0:r.get(),i=q.getTabsterContext(t,e||d);i&&(c=null===(l=ee.findNextTabbable(t,i,u,d,void 0,o,!0,!0))||void 0===l?void 0:l.element),c&&Object(s.d)(c)}}))}}class ae extends L{constructor(e,t,i,s,o,n){super(e,t,s),this._wasFocused=0,this.userId=s.id,this._onDispose=i,this._activeElements=n,e.controlTab||(this.dummyManager=new le(this._element,e,o))}makeActive(e){if(this._isActive!==e){this._isActive=e;const t=this.getElement();if(t){const i=this._activeElements,s=i.map((e=>e.deref())).indexOf(t);e?s<0&&i.push(new WeakRef(t)):s>=0&&i.splice(s,1)}this.triggerFocusEvent(e?r:l)}}focused(e){return e||(this._wasFocused=++ne),this._wasFocused}setProps(e){e.id&&(this.userId=e.id),this._props={...e}}dispose(){var e;this.makeActive(!1),this._onDispose(this),null===(e=this.dummyManager)||void 0===e||e.dispose(),delete this.dummyManager,this._activeElements=[],this._remove()}ontainsindNextTabbable(e,t,i,s,o){var n,r;if(!this.getElement())return null;const l=this._tabster;let a,u=null,d=!1;const c=e=>{a=e},h=e&&(null===(n=q.getRoot(l,e))||void 0===n?void 0:n.getElement());if(h){const n={};u=l.focusable[i?"findPrev":"findNext"]({container:h,currentElement:e,referenceElement:t,onUncontrolled:c,ignoreUncontrolled:s,ignoreAccessibility:o,useActiveModalizer:!0},n),!a&&!u&&this._props.isTrapped&&(null===(r=l.modalizer)||void 0===r?void 0:r.activeId)?(u=l.focusable[i?"findLast":"findFirst"]({container:h,ignoreUncontrolled:!0,ignoreAccessibility:o,useActiveModalizer:!0}),d=!0):d=!!n.outOfDOMOrder}return{element:u,uncontrolled:a,outOfDOMOrder:d}}triggerFocusEvent(e,t){const i=this.getElement();let s=!1;if(i){const o=t?this._activeElements.map((e=>e.deref())):[i];for(const t of o)t&&!K(t,e,{id:this.userId,element:i,eventName:e})&&(s=!0)}return s}class ue{constructor(e,t,i){this._onModalizerDispose=e=>{const t=e.id,i=e.userId,s=this._parts[i];delete this._modalizers[t],s&&(delete s[t],0===Object.keys(s).length&&(delete this._parts[i],this.activeId===i&&this.setActive(void 0)))},this._onKeyDown=e=>{var t;if(27!==e.keyCode)return;const i=this._tabster,s=i.focusedElement.getFocusedElement();if(s){const o=q.getTabsterContext(i,s),n=null==o?void 0:o.modalizer;if(o&&!o.groupper&&(null==n?void 0:n.isActive())&&!o.ignoreKeydown(e)){const s=n.userId;if(s){const o=this._parts[s];if(o){const s=Object.keys(o).map((e=>{var t;const i=o[e],s=i.getElement();let n;return s&&(n=null===(t=v(this._tabster,s))||void 0===t?void 0:t.groupper),i&&s&&n?{el:s,focusedSince:i.focused(!0)}:{focusedSince:0}})).filter(().sort(();if(s.length){const o=s[0].el;o&&(null===(t=i.groupper)||void 0===t||t.handleKeyPress(o,e,!0))}}}}}},this._onFocus=(e,t)=>{var i,s;const o=e&&q.getTabsterContext(this._tabster,e);if(!o||!e)return;const n=this._augMap;for(let t=e;t;t=t.parentElement)n.has(t)&&(n.delete(t),G(this._tabster,t,re));const r=o.modalizer;if(null===(s=r||(null===(i=v(this._tabster,e))||void 0===i?void 0:i.modalizer))||void 0===s||s.focused(),(null==r?void 0:r.userId)!==this.activeId)if(t.isFocusedProgrammatically||this.currentIsOthersAccessible||(null==r?void 0:r.getProps().isAlwaysAccessible))this.setActive(r);else{const t=this._win();t.clearTimeout(this._restoreModalizerFocusTimer),this._restoreModalizerFocusTimer=t.setTimeout((,100)}else this.currentIsOthersAccessible=null==r?void 0:r.getProps().isOthersAccessible},this._tabster=e,this._win=e.getWindow,this._modalizers={},this._parts={},this._augMap=new WeakMap,this._aug=[],this._alwaysAccessibleSelector=t,this._accessibleCheck=i,this.activeElements=[],e.controlTab||e.root.addDummyInputs(),this._win().addEventListener("keydown",this._onKeyDown,!0),e.queueInit(()}dispose(){const e=this._win();e.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._modalizers).forEach((e=>{this._modalizers[e]&&(this._modalizers[e].dispose(),delete this._modalizers[e])})),e.clearTimeout(this._restoreModalizerFocusTimer),e.clearTimeout(this._hiddenUpdateTimer),this._parts={},delete this.activeId,this.activeElements=[],this._augMap=new WeakMap,this._aug=[],this._tabster.focusedElement.unsubscribe(this._onFocus)}createModalizer(e,t,i){var s;const o=new ae(this._tabster,e,this._onModalizerDispose,t,i,this.activeElements),n=o.id,r=t.id;this._modalizers[n]=o;let l=this._parts[r];return l||(l=this._parts[r]={}),l[n]=o,e.contains(null!==(s=this._tabster.focusedElement.getFocusedElement())&&void 0!==s?s:null)&&(r!==this.activeId?this.setActive(o):o.makeActive(!0)),o}iddenUpdate(){this._hiddenUpdateTimer||(this._hiddenUpdateTimer=this._win().setTimeout((,250))}setActive(e){const t=null==e?void 0:e.userId,i=this.activeId;if(i!==t){if(this.activeId=t,i){const e=this._parts[i];if(e)for(const t of Object.keys(e))e[t].makeActive(!1)}if(t){const e=this._parts[t];if(e)for(const t of Object.keys(e))e[t].makeActive(!0)}this.currentIsOthersAccessible=null==e?void 0:e.getProps().isOthersAccessible,this.hiddenUpdate()}}focus(e,t,i){const s=q.getTabsterContext(this._tabster,e),o=null==s?void 0:s.modalizer;if(o){this.setActive(o);const e=o.getProps(),s=o.getElement();if(s){if(void 0===t&&(t=e.isNoFocusFirst),!t&&this._tabster.keyboardNavigation.isNavigatingWithKeyboard()&&this._tabster.focusedElement.focusFirst({container:s}))return!0;if(void 0===i&&(i=e.isNoFocusDefault),!i&&this._tabster.focusedElement.focusDefault(s))return!0;this._tabster.focusedElement.resetFocus(s)}}return!1}acceptElement(e,t){var i;const s=t.modalizerUserId,o=null===(i=t.currentCtx)||void 0===i?void 0:i.modalizer;if(s)for(const t of this.activeElements){const i=t.deref();if(i&&(e.contains(i)||i===e))return NodeFilter.FILTER_SKIP}const n=s===(null==o?void 0:o.userId)||!s&&(null==o?void 0:o.getProps().isAlwaysAccessible)?void 0:NodeFilter.FILTER_SKIP;return void 0!==n&&(t.skippedFocusable=!0),n}_hiddenUpdate(){var e;const t=this._tabster,i=t.getWindow().document.body,s=this.activeId,o=this._parts,n=[],r=[],l=this._alwaysAccessibleSelector,a=l?Array.from(i.querySelectorAll(l)):[],u=[];for(const e of Object.keys(o)){const t=o[e];for(const i of Object.keys(t)){const o=t[i],l=o.getElement(),d=o.getProps().isAlwaysAccessible;l&&(e===s?(u.push(l),this.currentIsOthersAccessible||n.push(l)):d?a.push(l):r.push(l))}}const d=this._augMap,c=n.length>0?[...n,...a]:void 0,h=[],m=new WeakMap,_=(e,i)=>{var s;const o=e.tagName;if("SCRIPT"===o||"STYLE"===o)return;let n=!1;d.has(e)?i?n=!0:(d.delete(e),G(t,e,re)):i&&!(null===(s=this._accessibleCheck)||void 0===s?void 0:s.call(this,e,u))&&G(t,e,re,"true")&&(d.set(e,!0),n=!0),n&&(h.push(new WeakRef(e)),m.set(e,!0))},f=e=>{for(let t=e.firstElementChild;t;t=t.nextElementSibling){let e=!1,i=!1;if(c){for(const s of c){if(t===s){e=!0;break}if(t.contains(s)){i=!0;break}}i?f(t):e||_(t,!0)}else _(t,!1)}};c||a.forEach((e=>_(e,!1))),r.forEach((),i&&f(i),null===(e=this._aug)||void 0===e||e.map(().forEach((e=>{e&&!m.get(e)&&_(e,!1)})),this._aug=h,this._augMap=m}_restoreModalizerFocus(e){if(!e||!(null==e?void 0:e.ownerDocument))return;const t=q.getTabsterContext(this._tabster,e),i=null==t?void 0:t.modalizer,s=this.activeId;if(!i&&!s||i&&s===i.userId)return;const o=null==t?void 0:t.root.getElement();if(o){let t=this._tabster.focusable.findFirst({container:o,ignoreUncontrolled:!0,useActiveModalizer:!0});if(t){if(e.compareDocumentPosition(t)&document.DOCUMENT_POSITION_PRECEDING&&(t=this._tabster.focusable.findLast({container:o,ignoreUncontrolled:!0,useActiveModalizer:!0}),!t))throw new Error("Something went wrong.");return void this._tabster.focusedElement.focus(t)}}e.blur()}}const de=["input","textarea","*[contenteditable]"].join(", ");class ce extends U{constructor(e,t,i,o){super(t,e,3,o),this._onFocusDummyInput=e=>{var t,i;const o=this._element.get(),n=e.input;if(o&&n){const r=q.getTabsterContext(this._tabster,o);let l;r&&(l=null===(t=ee.findNextTabbable(this._tabster,r,void 0,n,void 0,!e.isFirst,!0))||void 0===t?void 0:t.element);const a=null===(i=this._getMemorized())||void 0===i?void 0:i.get();a&&(l=a),l&&Object(s.d)(l)}},this._tabster=t,this._getMemorized=i,this._setHandlers(this._onFocusDummyInput)}}class he extends L{constructor(e,t,i,s,o){var n;super(e,t,s),this._visible={},this._onIntersection=e=>{for(const t of e){const e=t.target,i=N(this._win,e);let s,o=this._fullyVisible;if(t.intersectionRatio>=.25?(s=t.intersectionRatio>=.75?c.Visible:c.PartiallyVisible,s===c.Visible&&(o=i)):s=c.Invisible,this._visible[i]!==s){void 0===s?(delete this._visible[i],o===i&&delete this._fullyVisible):(this._visible[i]=s,this._fullyVisible=o);const t=this.getState(e);t&&K(e,a,t)}}},this._win=e.getWindow,this.visibilityTolerance=null!==(n=s.visibilityTolerance)&&void 0!==n?n:.8,(this._props.trackState||this._props.visibilityAware)&&(this._intersectionObserver=new IntersectionObserver(this._onIntersection,{threshold:[0,.25,.5,.75,1]}),this._observeState()),this._onDispose=i,e.controlTab||(this.dummyManager=new ce(this._element,e,(()=>s.memorizeCurrent?this._current:void 0),o))}disposeetCurrent(e){this._current=e?new w(this._win,e):void 0,!this._props.trackState&&!this._props.visibilityAware||this._setCurrentTimer||(this._setCurrentTimer=this._win().setTimeout((()=>{var e;delete this._setCurrentTimer;const t=[];this._current!==this._prevCurrent&&(t.push(this._current),t.push(this._prevCurrent),this._prevCurrent=this._current);for(const i of t){const t=null==i?void 0:i.get();if(t&&(null===(e=this._allElements)||void 0===e?void 0:e.get(t))===this){const e=this._props;if(t&&(void 0!==e.visibilityAware||e.trackState)){const e=this.getState(t);e&&K(t,a,e)}}}})))}indNextTabbable(e,t,i,s,o){var n;const r=this.getElement(),l=r&&(null===(n=null==e?void 0:e.__tabsterDummyContainer)||void 0===n?void 0:n.get())===r;if(!r)return null;const a=this._tabster;let u,d=null,c=!1;const h=if(this._props.tabbable||l||e&&!r.contains(e)){const n={};d=a.focusable[i?"findPrev":"findNext"]({currentElement:e,referenceElement:t,container:r,onUncontrolled:h,ignoreUncontrolled:s,ignoreAccessibility:o,useActiveModalizer:!0},n),c=!!n.outOfDOMOrder}return{element:d,uncontrolled:u,outOfDOMOrder:c}}acceptElement(e,t){var i,s,o;if(!ee.isTabbing)return(null===(i=t.currentCtx)||void 0===i?void 0:i.isExcludedFromMover)?NodeFilter.FILTER_REJECT:void 0;const{memorizeCurrent:n,visibilityAware:r,hasDefault:l=!0}=this._props,a=this.getElement();if(a&&(n||r||l)&&(!a.contains(t.from)||(null===(s=t.from.__tabsterDummyContainer)||void 0===s?void 0:s.get())===a)){let e;if(n){const i=null===(o=this._current)||void 0===o?void 0:o.get();i&&t.acceptCondition(i)&&(e=i)}if(!e&&l&&(e=this._tabster.focusable.findDefault({container:a,ignoreUncontrolled:!0,useActiveModalizer:!0})),!e&&r&&(e=this._tabster.focusable.findElement({container:a,ignoreUncontrolled:!0,useActiveModalizer:!0,isBackward:t.isBackward,acceptCondition:e=>{var i;const s=N(this._win,e),o=this._visible[s];return a!==e&&!!(null===(i=this._allElements)||void 0===i?void 0:i.get(e))&&t.acceptCondition(e)&&(o===c.Visible||o===c.PartiallyVisible&&(r===c.PartiallyVisible||!this._fullyVisible))}})),e)return t.found=!0,t.foundElement=e,t.lastToIgnore=a,t.skippedFocusable=!0,NodeFilter.FILTER_ACCEPT}}_observeState(){const e=this.getElement();if(this._unobserve||!e||"undefined"==typeof MutationObserver)return;const t=this._win(),i=this._allElements=new WeakMap,s=this._tabster.focusable;let o=this._updateQueue=[];const n=new MutationObserver((e=>{for(const t of e){const e=t.target,i=t.removedNodes,s=t.addedNodes;if("attributes"===t.type)"tabindex"===t.attributeName&&o.push({element:e,type:2});else{for(let e=0;e<i.length;e++)o.push({element:i[e],type:3});for(let e=0;e<s.length;e++)o.push({element:s[e],type:1})}}d()})),r=(e,t)=>{var s,o;const n=i.get(e);n&&t&&(null===(s=this._intersectionObserver)||void 0===s||s.unobserve(e),i.delete(e)),n||t||(i.set(e,this),null===(o=this._intersectionObserver)||void 0===o||o.observe(e))},l=e=>{const t=s.isFocusable(e);i.get(e)?t||r(e,!0):t&&r(e)},a=e=>{const{mover:i}=c(e);if(i&&i!==this){if(i.getElement()!==e||!s.isFocusable(e))return;r(e)}const o=k(t.document,e,(e=>{const{mover:t,groupper:i}=c(e);if(t&&t!==this)return NodeFilter.FILTER_REJECT;const o=null==i?void 0:i.getFirst(!0);return i&&i.getElement()!==e&&o&&o!==e?NodeFilter.FILTER_REJECT:(s.isFocusable(e)&&r(e),NodeFilter.FILTER_SKIP)}));if(o)for(o.currentNode=e;o.nextNode(););},u=e=>{i.get(e)&&r(e,!0);for(let t=e.firstElementChild;t;t=t.nextElementSibling)u(t)},d=()=>{!this._updateTimer&&o.length&&(this._updateTimer=t.setTimeout((()=>{delete this._updateTimer;for(const{element:e,type:t}of o)switch(t){case 2:l(e);break;case 1:a(e);break;case 3:u(e)}o=this._updateQueue=[]}),0))},c=e=>{const t={};for(let i=e;i;i=i.parentElement){const e=v(this._tabster,i);if(e&&(e.groupper&&!t.groupper&&(t.groupper=e.groupper),e.mover)){t.mover=e.mover;break}}return t};o.push({element:e,type:1}),d(),n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]}),this._unobserve=getStateclass me{constructor(e,t){this._init=()=>{this._win().addEventListener("keydown",this._onKeyDown,!0),this._tabster.focusedElement.subscribe(this._onFocus)},this._onMoverDispose=e=>{delete this._movers[e.id]},this._onFocus=e=>{var t;for(let i=e;i;i=i.parentElement){const s=null===(t=v(this._tabster,i))||void 0===t?void 0:t.mover;if(s){s.setCurrent(e);break}}},this._onKeyDown=async e=>{var t,i,o,n;this._ignoredInputTimer&&(this._win().clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1);let r=e.keyCode;if(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)return;switch(r){case 40:case 39:case 38:case Z:case 34:case 33:case 36:case 35:break;default:return}const l=this._tabster,a=l.focusedElement.getFocusedElement();if(!a||await this._isIgnoredInput(a,r))return;const u=q.getTabsterContext(l,a,{checkRtl:!0});if(!u||!u.mover||u.isExcludedFromMover||u.ignoreKeydown(e))return;const d=u.mover,c=d.getElement();if(u.isGroupperFirst){const e=u.groupper;if(!e||e.isActive(!0))return;for(let t=null===(i=e.getElement())||void 0===i?void 0:i.parentElement;t&&t!==c;t=t.parentElement)if(null===(n=null===(o=v(l,t))||void 0===o?void 0:o.groupper)||void 0===n?void 0:n.isActive(!0))return}if(!c)return;const h=l.focusable,_=d.getProps(),f=_.direction||m.Both,b=f===m.Both,p=b||f===m.Vertical,g=b||f===m.Horizontal,E=f===m.GridLinear,T=E||f===m.Grid,y=_.cyclic;let F,w,I=0,O=0;if(T&&(w=a.getBoundingClientRect(),I=Math.ceil(w.left),O=Math.floor(w.right)),u.isRtl&&(39===r?r=Z:r===Z&&(r=39)),40===r&&p||39===r&&(g||T))if(F=h.findNext({currentElement:a,container:c,useActiveModalizer:!0}),F&&T){const e=Math.ceil(F.getBoundingClientRect().left);!E&&O>e&&(F=void 0)}else!F&&y&&(F=h.findFirst({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0}));else if(38===r&&p||r===Z&&(g||T))if(F=h.findPrev({currentElement:a,container:c,useActiveModalizer:!0}),F&&T){const e=Math.floor(F.getBoundingClientRect().right);!E&&e>I&&(F=void 0)}else!F&&y&&(F=h.findLast({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0}));else if(36===r)T?h.findElement({container:c,currentElement:a,ignoreUncontrolled:!0,useActiveModalizer:!0,isBackward:!0,acceptCondition:e=>{var t;if(!h.isFocusable(e))return!1;const i=Math.ceil(null!==(t=e.getBoundingClientRect().left)&&void 0!==t?t:0);return e!==a&&I<=i||(F=e,!1)}}):F=h.findFirst({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0});else if(35===r)T?h.findElement({container:c,currentElement:a,ignoreUncontrolled:!0,useActiveModalizer:!0,acceptCondition:e=>{var t;if(!h.isFocusable(e))return!1;const i=Math.ceil(null!==(t=e.getBoundingClientRect().left)&&void 0!==t?t:0);return e!==a&&I>=i||(F=e,!1)}}):F=h.findLast({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0});else if(33===r){if(h.findElement({currentElement:a,container:c,useActiveModalizer:!0,isBackward:!0,acceptCondition:e=>!(!h.isFocusable(e)||D(this._win,e,d.visibilityTolerance)&&(F=e,1))}),T&&F){const e=Math.ceil(F.getBoundingClientRect().left);h.findElement({currentElement:F,container:c,useActiveModalizer:!0,acceptCondition:t=>{if(!h.isFocusable(t))return!1;const i=Math.ceil(t.getBoundingClientRect().left);return I<i||e>=i||(F=t,!1)}})}F&&R(this._win,F,!1)}else if(34===r){if(h.findElement({currentElement:a,container:c,useActiveModalizer:!0,acceptCondition:e=>!(!h.isFocusable(e)||D(this._win,e,d.visibilityTolerance)&&(F=e,1))}),T&&F){const e=Math.ceil(F.getBoundingClientRect().left);h.findElement({currentElement:F,container:c,useActiveModalizer:!0,isBackward:!0,acceptCondition:t=>{if(!h.isFocusable(t))return!1;const i=Math.ceil(t.getBoundingClientRect().left);return I>i||e<=i||(F=t,!1)}})}F&&R(this._win,F,!0)}else if(T){const e=38===r,t=I,i=Math.ceil(w.top),s=O,o=Math.floor(w.bottom);let n,l,u=0;h.findAll({container:c,currentElement:a,isBackward:e,onElement:r=>{const a=r.getBoundingClientRect(),d=Math.ceil(a.left),c=Math.ceil(a.top),h=Math.floor(a.right),m=Math.floor(a.bottom);if(e&&i<m||!e&&o>c)return!0;const _=Math.ceil(Math.min(s,h))-Math.floor(Math.max(t,d)),f=Math.ceil(Math.min(s-t,h-d));if(_>0&&f>=_){const e=_/f;e>u&&(n=r,u=e)}else if(0===u){const e=function(e,t,i,s,o,n,r,l){const a=i<o?o-i:r<e?e-r:0,u=s<n?n-s:l<t?t-l:0;return 0===a?u:0===u?a:Math.sqrt(a*a+u*u)}(t,i,s,o,d,c,h,m);(void 0===l||e<l)&&(l=e,n=r)}else if(u>0)return!1;return!0}}),F=n}F&&(e.preventDefault(),e.stopImmediatePropagation(),Object(s.d)(F))},this._tabster=e,this._win=t,this._movers={},e.queueInit(this._init)}dispose(){var e;const t=this._win();this._tabster.focusedElement.unsubscribe(this._onFocus),null===(e=this._ignoredInputResolve)||void 0===e||e.call(this,!1),this._ignoredInputTimer&&(t.clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),t.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._movers).forEach((e=>{this._movers[e]&&(this._movers[e].dispose(),delete this._movers[e])}))}createMoversync _isIgnoredInput(e,t){var i;if("true"===e.getAttribute("aria-expanded"))return!0;if(P(e,de)){let s,o=0,n=0,r=0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName){const s=e.type;if(r=(e.value||"").length,"email"===s||"number"===s){if(r){const s=null===(i=e.ownerDocument.defaultView)||void 0===i?void 0:i.getSelection();if(s){const e=s.toString().length,i=t===Z||38===t;if(s.modify("extend",i?"backward":"forward","character"),e!==s.toString().length)return s.modify("extend",i?"forward":"backward","character"),!0;r=0}}}else{const t=e.selectionStart;if(null===t)return"hidden"===s;o=t||0,n=e.selectionEnd||0}}else"true"===e.contentEditable&&(s=new(function(e){const t=y(e);if(t.basics.Promise)return t.basics.Promise;throw new Error("No Promise defined.")}(this._win))((t=>{this._ignoredInputResolve=e=>{delete this._ignoredInputResolve,t(e)};const i=this._win();this._ignoredInputTimer&&i.clearTimeout(this._ignoredInputTimer);const{anchorNode:s,focusNode:l,anchorOffset:a,focusOffset:u}=i.getSelection()||{};this._ignoredInputTimer=i.setTimeout((()=>{var t,d,c;delete this._ignoredInputTimer;const{anchorNode:h,focusNode:m,anchorOffset:_,focusOffset:f}=i.getSelection()||{};if(h===s&&m===l&&_===a&&f===u){if(o=_||0,n=f||0,r=(null===(d=e.textContent)||void 0===d?void 0:d.length)||0,h&&m&&e.contains(h)&&e.contains(m)&&h!==e){let t=!1;const i=e=>{if(e===h)t=!0;else if(e===m)return!0;const s=e.textContent;if(s&&!e.firstChild){const e=s.length;t?m!==h&&(n+=e):(o+=e,n+=e)}let r=!1;for(let t=e.firstChild;t&&!r;t=t.nextSibling)r=i(t);return r};i(e)}null===(c=this._ignoredInputResolve)||void 0===c||c.call(this,!0)}else null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1)}),0)})));if(s&&!await s)return!0;if(o!==n)return!0;if(o>0&&(t===Z||38===t||36===t))return!0;if(o<r&&(39===t||40===t||35===t))return!0}return!1}}onst fe="restorer:restorefocus";class be extends L{constructor(e,t,i){var s;if(super(e,t,i),this._hasFocus=!1,this._onFocusOut=e=>{var t;const i=null===(t=this._element)||void 0===t?void 0:t.get();i&&null===e.relatedTarget&&i.dispatchEvent(new Event(fe,{bubbles:!0})),i&&!i.contains(e.relatedTarget)&&(this._hasFocus=!1)},this._onFocusIn=this._props.type===h.Source){const e=null===(s=this._element)||void 0===s?void 0:s.get();null==e||e.addEventListener("focusout",this._onFocusOut),null==e||e.addEventListener("focusin",this._onFocusIn)}}dispose(){var e,t;if(this._props.type===h.Source){const i=null===(e=this._element)||void 0===e?void 0:e.get();null==i||i.removeEventListener("focusout",this._onFocusOut),null==i||i.removeEventListener("focusin",this._onFocusIn),this._hasFocus&&(null===(t=this._tabster.getWindow().document.body)||void 0===t||t.dispatchEvent(new Event(fe,{bubbles:!0})))}}}class ve{constructor(e){this._history=[],this._restoreFocusTimeout=0,this._onRestoreFocus=e=>{const t=this._getWindow();this._restoreFocusTimeout&&t.clearTimeout(this._restoreFocusTimeout),this._restoreFocusTimeout=t.setTimeout(()},this._onFocusIn=e=>{var t;if(!e)return;const i=v(this._tabster,e);(null===(t=null==i?void 0:i.restorer)||void 0===t?void 0:t.getProps().type)===h.Target&&this._addToHistory(e)},this._restoreFocus=e=>{var t,i,s;const o=this._getWindow().document;if(o.activeElement!==o.body)return;if(!this._keyboardNavState.isNavigatingWithKeyboard()&&o.body.contains(e))return;let n=this._history.pop();for(;n&&!o.body.contains(null!==(i=null===(t=n.deref())||void 0===t?void 0:t.parentElement)&&void 0!==i?i:null);)n=this._history.pop();null===(s=null==n?void 0:n.deref())||void 0===s||s.focus()},this._tabster=e,this._getWindow=e.getWindow,this._getWindow().addEventListener(fe,this._onRestoreFocus),this._keyboardNavState=e.keyboardNavigation,this._focusedElementState=e.focusedElement,this._focusedElementState.subscribe(this._onFocusIn)}dispose(){const e=this._getWindow();this._focusedElementState.unsubscribe(this._onFocusIn),e.removeEventListener(fe,this._onRestoreFocus),this._restoreFocusTimeout&&e.clearTimeout(this._restoreFocusTimeout)}_addToHistory(e){var t;(null===(t=this._history[this._history.length-1])||void 0===t?void 0:t.deref())!==e&&(this._history.length>10&&this._history.shift(),this._history.push(new WeakRef(e)))}createRestorer(e,t){const i=new be(this._tabster,e,t);return t.type===h.Target&&e.ownerDocument.activeElement===e&&this._addToHistory(e),i}}class pe{constructor(e){this.keyboardNavigation=e.keyboardNavigation,this.focusedElement=e.focusedElement,this.focusable=e.focusable,this.root=e.root,this.uncontrolled=e.uncontrolled,this.core=e}}class ge{constructor(e,t){var i,s;this._forgetMemorizedElements=[],this._wrappers=new Set,this._initQueue=[],this._version="4.9.0",this._noop=!1,this.getWindow=()=>{if(!this._win)throw new Error("Using disposed Tabster.");return this._win},this._storage=function(e){const t=e.__tabsterInstanceContext;return new((null==t?void 0:t.basics.WeakMap)||WeakMap)}(e),this._win=e;const n=this.getWindow;this.keyboardNavigation=new oe(n),this.focusedElement=new ee(this,n),this.focusable=new Y(this),this.root=new q(this,null==t?void 0:t.autoRoot),this.uncontrolled=new _e,this.controlTab=null===(i=null==t?void 0:t.controlTab)||void 0===i||i,this.rootDummyInputs=!!(null==t?void 0:t.rootDummyInputs),this._dummyObserver=new B(n),this.getParent=null!==(s=null==t?void 0:t.getParent)&&void 0!==s?s:this.internal={stopObserver:()=>{this._unobserve&&(this._unobserve(),delete this._unobserve)},resumeObserver:e=>{if(!this._unobserve){const t=n().document;this._unobserve=function(e,t,i,s){if("undefined"==typeof MutationObserver)returnconst n=t.getWindow;let r;function l(t,i){r||(r=y(n).elementByUId),a(t,i);const s=k(e,t,(e=>a(e,i)));if(s)for(;s.nextNode(););}onst u=new MutationObserver((e=>{var s,n,r,a,u;for(const u of e){const e=u.target,d=u.removedNodes,c=u.addedNodes;if("attributes"===u.type)u.attributeName===o&&i(t,e);else{for(let i=0;i<d.length;i++)l(d[i],!0),null===(n=(s=t._dummyObserver).domChanged)||void 0===n||n.call(s,e);for(let i=0;i<c.length;i++)l(c[i]),null===(a=(r=t._dummyObserver).domChanged)||void 0===a||a.call(r,e)}}null===(u=t.modalizer)||void 0===u||u.hiddenUpdate()}));return s&&l(n().document.body),u.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[o]}),()=>{u.disconnect()}}(t,this,p,e)}}},O(n),this.queueInit(()}_mergePropsreateTabsterisposeTabsterispose(){var e,t,i,s,o,n,r,l;this.internal.stopObserver();const a=this._win;null==a||a.clearTimeout(this._initTimer),delete this._initTimer,this._initQueue=[],this._forgetMemorizedElements=[],a&&this._forgetMemorizedTimer&&(a.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer),null===(e=this.outline)||void 0===e||e.dispose(),null===(t=this.crossOrigin)||void 0===t||t.dispose(),null===(i=this.deloser)||void 0===i||i.dispose(),null===(s=this.groupper)||void 0===s||s.dispose(),null===(o=this.mover)||void 0===o||o.dispose(),null===(n=this.modalizer)||void 0===n||n.dispose(),null===(r=this.observedElement)||void 0===r||r.dispose(),null===(l=this.restorer)||void 0===l||l.dispose(),this.keyboardNavigation.dispose(),this.focusable.dispose(),this.focusedElement.dispose(),this.root.dispose(),this._dummyObserver.dispose(),this.getWindow),x(this.getWindow),this._storage=new WeakMap,this._wrappers.clear(),a&&(a),delete a.__tabsterInstance,delete this._win)}storageEntry(e,t){const i=this._storage;let s=i.get(e);return s?!1===t&&0===Object.keys(s).length&&i.delete(e):!0===t&&(s={},i.set(e,s)),s}forceCleanup(){this._win&&(this._forgetMemorizedElements.push(this._win.document.body),this._forgetMemorizedTimer||(this._forgetMemorizedTimer=this._win.setTimeout((()=>{delete this._forgetMemorizedTimer;for(let e=this._forgetMemorizedElements.shift();e;e=this._forgetMemorizedElements.shift())x(this.getWindow,e),ee.forgetMemorized(this.focusedElement,e)}),0),I(this.getWindow,!0)))}queueInit(e){var t;this._win&&(this._initQueue.push(e),this._initTimer||(this._initTimer=null===(t=this._win)||void 0===t?void 0:t.setTimeout((()=>{delete this._initTimer,this.drainInitQueue()}),0)))}drainInitQueue(){if(!this._win)return;const e=this._initQueue;this._initQueue=[],e.forEach(()}}function Ee(e,t){let i=e);return i?i.createTabster(!1,t):(i=new ge(e,t),e.__tabsterInstance=i,i.createTabster())}function Te(e){const t=e.core;return t.groupper||(t.groupper=new se(t,t.getWindow)),t.groupper}unction Fe(e,t,i){const s=e.core;return s.modalizer||(s.modalizer=new ue(s,t,i)),s.modalizer}function we(e){const t=e.core;return t.restorer||(t.restorer=new ve(t)),t.restorer}}]);
//# sourceMappingURL=18.144847fd72bc8e3f4ef5.chunk.v7.js.map