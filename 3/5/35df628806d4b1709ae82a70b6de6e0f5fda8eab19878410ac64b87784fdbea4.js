(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1074:function(t,e,n){"use strict";n(474)},1075:1163:function(t,e,n){"use strict";n.r(e);var r=n(310),o=(n(10),n(12),n(2)),l=n(352),c=(n(667),{data:function(){return{errors:{},sendStatus:null,sendStatuses:{waiting:"Trwa upload...",success:"Upload zakończony sukcesem",error:"Wystąpił błąd podczas uploadu",errorDuplicated:"Plik o takiej nazwie już istnieje"},fileTip:"Nie wybrano pliku"}},mounted:function(){this.validator=new l.a(this.$el,{upload:{file:{count:{max:1},size:{max:11e7}}}})},methods:{send:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("https://holding.wpcdn.pl/uploader/".concat(t.fileTip)).then((function(e){return 200===e.status&&(t.sendStatus=t.sendStatuses.errorDuplicated),200===e.status})).crn!1}));case 2:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:t.sendStatus=t.sendStatuses.waiting,(n=new FormData).append("file",t.$refs.inputFile.files[0]),t.$axios.post("/upload",n,{headers:{"Content-Type":"multipart/form-data"},maxContentLength:1/0,maxBodyLength:1/0}).then((function(e){200===e.status?(t.sendStatus=t.sendStatuses.success,t.fileTip=e.data.fileName):t.sendStatus=t.sendStatuses.error})).crror}));case 9:case"end":return e.stop()}}),e)})))()},onFileChange:function(t){switch(this.sendStatus=null,t.target.files.length){case 0:this.fileTip="Nie wybrano pliku";break;case 1:this.fileTip=t.target.files[0].name;break;default:this.fileTip="Liczba plików: "+t.target.files.length}},validate:function(t){var e=this;this.errors=this.validator.validate(),this.validator.obate()})),this.validator.isValid()||(t.preventDefault(),t.stopPropagation(),window.jQuery&&this.$el.offsetTop&&$("html, body").animate({scrollTop:$(this.$el).offset().top-100},400))}}}),d=(n(1074),n(4)),m={components:{FormUpload:Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{id:"form-upload",enctype:"multipart/form-data"}},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"form-group col-lg-12 mt-3"},[n("h3",[t._v("Upload plików na holding.wpcdn.pl")]),t._v(" "),n("small",{staticClass:"form-text text-muted mb-3"},[t._v("Możesz dodać 1 plik, do 100 MB.")]),t._v(" "),n("div",{staticClass:"upload-wrapper"},[n("label",{staticClass:"upload-label btn btn-sm mb-0",attrs:{for:"file"}},[t._v("Wybierz plik")]),t._v(" "),n("input",{ref:"inputFile",staticClass:"upload-input",attrs:{name:"upload",id:"file",type:"file",size:"150"},on:{change:t.onFileChange}}),t._v(" "),n("div",{staticClass:"uploadTip"},[t._v(t._s(t.fileTip))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.upload,expression:"errors.upload"}],staticClass:"error"},t._l(t.error_s(e))])})),0)])]),t._v(" "),n("div",{staticClass:"submit btn btn-sm",on:guments)}}},[n("div",{on:{click:t.send}},[t._v("wyślij")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.sendStatus,expression:"sendStatus"}],staticClass:"status",class:{success:t.sendStatus===t.sendStatuses.success,failure:t.sendStatus===t.sendStatuses.error}},[t._v(t._s(t.sendStatus))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.sendStatus===t.sendStatuses.success,expression:"sendStatus === sendStatuses.success"}]},[n("br"),t._v("Plik dostępny pod adresem: \n    "),n("a",{attrs:{href:"https://holding.wpcdn.pl/uploader/"+t.fileTip,target:"_blank"}},[t._v("\n      "+t._s("https://holding.wpcdn.pl/uploader/"+t.fileTip)+"\n    ")])])])}),[],!1,null,"7c9a5a80",null).exports},middleware:["auth"],asyncData:function(t){t.route;return t.store.dispatch("dynamicConfig/updateConfig",{page:{info:{pl:{title:"Dragon Disk Online"}},imgUrl:"https://holding.wpcdn.pl/backgrounds/21.jpg"}})},head:function(){return Object(r.a)(this.$route.path,"Upload","Dragon Disk Online")}},f=(n(1075),Object(d.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"content col-lg-8 center"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("FormUpload")],1)])])])}),[],!1,null,null,null));e.default=f.exports},310:function(t,e,n){"use strict";e.a=function(path,title,t){return{title:title,link:[{rel:"canonical",href:"https://holding.wp.pl"+path}],meta:[{hid:"description",name:"description",content:t},{hid:"og:title",property:"og:title",content:title},{hid:"og:description",property:"og:description",content:t}]}}},352:function(t,e,n){"use strict(){return m}));n(31),n(14),n(25),n(26),n(22),n(104);var r=n(3),o=(n(15),n(5),n(60),n(24),n(30),n(10),n(14];return n}var m=function(){function t(e,n){Object(o.a)(this,t),this.form=void 0,this.options=void 0,this.formData=void 0,this.errors={},this.observing=!1,this.validated=!1,this.ERRORS={required:{text:"To pole jest wymagane",other:"Proszę wybrać jedną z dostępnych opcji"},email:"Niepoprawny adres email",length:{min:"Zbyt mała ilość znaków. Minimum:",max:"Przekroczona maksymalna ilość znaków:"},files:{count:"Zbyt duża ilość załączników. Maksymalna ilość to",name:"Zbyt długa nazwa pliku",size:"Zbyt duży rozmiar pliku. Maksymalny rozmiar to",type:"Niedozwolony typ pliku"}},this.commonMimetypes=["application/pdf","image/jpeg","image/jpg","image/gif","image/png","video/mp4","video/mpeg","video/mkv","video/mov","audio/mp3","application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.template.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],this.form=e,this.options=n,this.defender()}return Object(l.a)(t,[{key:"observe",value:function(t){var e=this;this.validated&&!this.observing&&(this.form.addEventListener("change",(function(n){var r=n.target.name;return"file"===n.target.type?(e.formData.delete(r),Arnction(t){e.formData.append(r,t)}))):"checkbox"===n.target.type?e.formData.set(r,n.target.checked):e.formData.set(r,n.target.value),e.runValidationsForName(r),t&&t(e.errors)})),this.observing=!0)}},{key:"defender",value:function(){var t=this;this.observer=new MutationObserver((function(n){n.forEach((function(n){"attributes"===n.type&&"value"===n.attributeName&&("OPTION"!==n.target.nodeName&&"radio"!==n.target.type||(t.observer.disconnect(),n.target.setAttribute(n.attributeName,n.oldValue),e()))}))}));var e=function(){t.observer.observe(t.form,{attributes:!0,childList:!0,subtree:!0,attributeOldValueion(){this.observer.disconnect()}},{key:"validate",value:function(){var t=this;return this.validated=!0,this.formData=new FormData(this.form),Object.entries(this.options).forEach((function(e){var n=Object(r.a)(e,2),o=n[0];n[1];t.runValidationsForName(o)})),this.gject.entries(this.errors).length}},{key:"runValidationsForName",value:function(t){var e=this;this.resetErrors(t),Object.entries(this.options[t]).forEach((function(n){var o=Object(r.a)(n,2),l=o[0],c=o[1];e[l]&&e[l](t,c)})),this.removeEmptyErrorue:function(t){this.errors[t]=[]}},{key:"getErrors",value:function(){return this.errors}},{key:"setError",value:function(t,e){-1===this.errors[t].indexOf(e)&&this.errors[t].p:function(){return this.formData}},{key:"removeEmptyErrorKey",value:function(t){this.errors[t].length||delete this.errors[t]}},{key:"required",value:function(t){var e=this.formData.get(t);if(null===e){var input=this.form.querySelectorAll('[name="'.concat(t,'"'));1===input.length&&"checkbox"===input[0].type?this.setError(t,this.ERRORS.required.text):this.setError(t,this.ERRORS.required.other)}else("false"===e||"string"==typeof e&&0===e.length)&&this.setError(t,this.ERRORS.required.text)}},{key:"email",value:function(t){var e=this.formData.get(t),n=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);e&&e.length&&!n.test(String(e))&&this.setError(t,this.ERRORS.email)}},{key:"length",value:function(t,e){var n=e.min||0,r=e.max||12e3,o=this.formData.get(t);o&&(o.length>r?this.setError(t,"".concat(this.ERRORS.length.max," ").concat(r)):o.length<n&&this.setError(t,"".concat(this.ERRORS.length.min," ").concat(n)))}},{key:"file",value:function(t,e){var n,r=this,o=[],l=e.count.max||20,d=e.size.max||5e7,m=e.types||this.commonMimetypes,f=c(this.formData);try{for(f.s();!(n=f.n()).done;){var p=n.value;p[0]===t&&o.push(p[1])}}catch(t){f.e(t)}finally{f.f()}o.length&&o[0].size>0&&(o.length>l&&this.setError(t,"".concat(this.ERRORS.files.count," ").concat(l)),Array.from(o).forEach((function(e){e.size>d&&r.setError(t,"".concat(r.ERRORS.files.size," ").concat(l/1e6," mb")),e.name.length>100&&r.setError(t,r.ERRORS.files.name),-1===m.indexOf(e.type)&&r.setError(t,r.ERR)))}}]),t}()},383:functionon(t,e,n){},475:function(t,e,n){}}]);