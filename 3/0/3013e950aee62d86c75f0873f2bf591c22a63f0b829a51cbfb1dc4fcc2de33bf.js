(self._cf=self._cf||[]).push([[63133],{537634:428342:222211:804297:617954:374411:540013:639891:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hasValueAtKey=n.hasPresentKey=n.isFilled=n.isDefined=n.isPresent=void 0,n.isPresent=n.isDefined=n.isFilled=n.hasPresentKey=n.hasValueAtKey=,960691:207029:(e,n,t)=>{"use strict";t.d(n,{Z:()=>jt});var i=t(199009);ar r=t(376894),o=t(293637);const s=Object.freeze({SUCCESS:"SUCCESS",IN_PROGRESS:"IN_PROGRESS"}),l=(e,n)=>60*e*1e3/n;var c=t(872342);const u=["code","message","meta","source"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const m=(e,n)=>{const t=(i=function(i){const a=n?n(i):i,{code:r,message:o,meta:s,source:l}=a,d=(0,c.Z)(a,u);this.code=r,this.message=o,this.id=((9),this.type=e,this.source=l,this.meta=p(p({},s),d),this.toJSON=()=>p({id:this.id,code:this.code,type:this.type,message:this.message,meta:this.meta},this.source&&{source:this.source.toJSON?this.source.toJSON():this.source.message?this.source.message:this.source}),this.toString=Object.prototype.hasOwnProperty.call(Error,"captureStackTrace")?Error.captureStackTrace(this,t):this.stack=new Error(o).stack},new Function("return function (call) {\n         return function ".concat(e,"() {\n           return call(this, arguments)\n         };\n      };"))()(Function.apply.bind(i)));var i;return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,Error.prototype):t.prototype=Object.create(Error.prototype,{constructor:{value:t}}),t},v=m("AppInstallError",(e=>{let{code:n,message:t,addon:i,source:a,requestId:r}=e;return{code:n,message:t,source:a,meta:{addon:i,requestId:r}}})),y=e=>m(e,(e=>{let{source:n,appKey:t,requestId:i}=e;return{code:"FetchError",message:"Failed to fetch app details for ".concat(t),source:n,meta:{appKey:t,requestId:i}}}));var f=t(993623),k=t(844493),g=t(257978),h=t(279675);unction I(e,n){if(e===n||e!=e&&n!=n)return!0;if(!e||!n)return!1;if("function"==typeof e.valueOf&&"function"==typeof n.valueOf){var t=e.valueOf(),i=n.valueOf();if(t===i||t!=t&&i!=i)return!0;if(!t||!i)return!1}return!(!N(e)||!e.equals(n))}function b(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){var n=e.valueOf();if(n!==e)return b(n)}return N(e)?e.hashCode():function(e){var n=0;if(null==e||0===e.length)return n;for(var t=0;t<e.length;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}return n}(String(e))}var S=A=),E=w=O=(function(e){function n(e){S(this,n);var t="",i=!0,a=!1,r=void 0;try{for(var o,s=e.slice(0,2)[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;t+=", "+(l instanceof Error?l.name+"("+l.message+")":""+l)}}catch(d){a=!0,r=d}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}t=t.slice(2),e.length>2&&(t+=", ...");var c=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));c.name="CompositeError",c.errorsRef=e;var u=c;return u.constructor=n,u.__proto__=n.prototype,c}E(n,e),A(n,[{key:"errors",value:])}(Error),function(e){function n(e){S(this,n);var t=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.name="DummyError";var i=t;return i.constructor=n,i.__proto__=n.prototype,t}E(n,e)}(Error),function(e){function n(e){S(this,n);var t=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.name="NoSuchElementError";var i=t;return i.constructor=n,i.__proto__=n.prototype,t}return E(n,e),n}(Error));(function(e){function n(e){S(this,n);var t=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.name="IllegalInheritanceError";var i=t;return i.constructor=n,i.__proto__=n.prototype,t}E(n,e)})(Error),function(e){function n(e){S(this,n);var t=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.name="IllegalStateError";var i=t;return i.constructor=n,i.__proto__=n.prototype,t}E(n,e)}(Error),function(e){function n(e){S(this,n);var t=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.name="IllegalArgumentError";var i=t;return i.constructor=n,i.__proto__=n.prototype,t}E(n,e)}(Error),function(e){function n(e){S(this,n);var t=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.name="NotImplementedError";var i=t;return i.constructor=n,i.__proto__=n.prototype,t}E(n,e)}(Error),function(e){function n(e){S(this,n);var t=w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.name="TimeoutError";var i=t;return i.constructor=n,i.__proto__=n.prototype,t}E(n,e)}(Error);function F(e){return function(){var n=Array.prototype.slice.call(arguments);return n.push(this),e.apply(void 0,n)}}function T(e,n,t){var i=e,a=i.prototype,r="fantasy-land/",o="equals",s=r+o,l="map",c=r+l,u="ap",d=r+u,p=r+"of",m="chain",v=r+m,y="chainRec",f=r+y;a[o]?a[s]=a[o]:t&&(a[s]=F(t.equals)),a[l]?a[c]=a[l]:n&&(a[c]=F(n.map)),a[u]?a[d]=a[u]:n&&(a[d]=F(n.ap)),i.pure?i[p]=i.pure:n&&(i[p]=n.of),a[m]?a[v]=a[m]:n&&(a[v]=F(n.chain)),i[y]?i[f]=i[y]:n&&(i[f]=n.chainRec)}Object.freeze({convertToMethod:F,fantasyLandRegister:T});var x=function(){function e(n,t){S(this,e),this._isRight="right"===t,this.value=n}return A(e,[{key:"isLeft",value:function(){return!this._isRight}},{key:"isRight",value:function(){return this._isRight}},{key:"contains",value:,{key:"exists",value:,{key:"filterOrElse",value:function(e,n){return this._isRight?e(this.value)?this:P(n()):this}},{key:"flatMap",value:,{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var n=this;return e.flatMap((function(e){return n.map(e)}))}},{key:"fold",value:function(e,n){return this._isRight?n(this.value):e(this.value)}},{key:"forAll",value:,{key:"get",value:,{key:"getOrElse",value:function(e){return this._isRight?this.value:e}},{key:"getOrElseL",value:function(e){return this._isRight?this.value:e()}},{key:"map",value:,{key:"forEach",value:function(e){this._isRight&&e(this.value)}},{key:"swap",value:function(){return this._isRight?P(this.value):D(this.value)}},{key:"toOption",value:function(){return this._isRight?L(this.value):V}},{key:"equals",value:function(e){return null!=e&&(this._isRight===e._isRight&&I(this.value,e.value))}},{key:"hashCode",value:function(){return this._isRight?b(this.value)<<2:b(this.value)<<3}}],[{key:"pure",value:function(e){return new _(e)}},{key:"left",value:function(e){return P(e)}},{key:"right",value:function(e){return D(e)}},{key:"map2",value:function(e,n,t){return e.isLeft()?e:n.isLeft()?n:D(t(e.value,n.value))}},{key:"map3",value:function(e,n,t,i){return e.isLeft()?e:n.isLeft()?n:t.isLeft()?t:D(i(e.value,n.value,t.value))}},{key:"map4",value:function(e,n,t,i,a){return e.isLeft()?e:n.isLeft()?n:t.isLeft()?t:i.isLeft()?i:D(a(e.value,n.value,t.value,i.value))}},{key:"map5",value:function(e,n,t,i,a,r){return e.isLeft()?e:n.isLeft()?n:t.isLeft()?t:i.isLeft()?i:a.isLeft()?a:D(r(e.value,n.value,t.value,i.value,a.value))}},{key:"map6",value:function(e,n,t,i,a,r,o){return e.isLeft()?e:n.isLeft()?n:t.isLeft()?t:i.isLeft()?i:a.isLeft()?a:r.isLeft()?r:D(o(e.value,n.value,t.value,i.value,a.value,r.value))}},{key:"tailRecM",value:function(e,n){for(var t=e;;){var i=n(t);if(!i.isRight())return i;var a=i.value;if(a.isRight())return D(a.value);t=a.value}}}]),e}(),C=function(e){function n(e){return S(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"left"))}return E(n,e),n}(x);function P(e){return new C(e)}var _=function(e){function n(e){return S(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"right"))}return E(n,e),n}(x);function D(e){return new _(e)}var j={equals:function(e,n){return e?e.equals(n):!n},map:function(e,n){return n.map(e)},ap:function(e,n){return n.ap(e)},of:x.pure,chain:function(e,n){return n.flatMap(e)},chainRec:function(e,n){return x.tailRecM(n,(function(n){return e(x.left,x.right,n)}))}};T(x,j,j);var R=function(){function e(n,t){S(this,e),this._isEmpty=null!=t?t:null==n,this.value=n}return A(e,[{key:"get",value:function(){if(!this._isEmpty)return this.value;throw new O("Option.get")}},{key:"getOrElse",value:,{key:"orNull",value:,{key:"orUndefined",value:,{key:"getOrElseL",value:,{key:"orElse",value:function(e){return this._isEmpty?e:this}},{key:"orElseL",value:,{key:"isEmpty",value:function(){return this._isEmpty}},{key:"nonEmpty",value:function(){return!this._isEmpty}},{key:"map",value:function(e){return this._isEmpty?V:L(e(this.value))}},{key:"flatMap",value:function(e){return this._isEmpty?V:e(this.value)}},{key:"chain",value:function(e){return this.flatMap(e)}},{key:"ap",value:function(e){var n=this;return e.flatMap((function(e){return n.map(e)}))}},{key:"filter",value:function(e){return this._isEmpty||!e(this.value)?V:this}},{key:"fold",value:function(e,n){return this._isEmpty?e():n(this.value)}},{key:"contains",value:function(e){return!this._isEmpty&&I(this.value,e)}},{key:"exists",value:,{key:"forAll",value:,{key:"forEach",value:,{key:"equals",value:function(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?I(this.value,e.value):this.isEmpty()&&e.isEmpty())}},{key:"hashCode",value:function(){return this._isEmpty?2433880:null==this.value?9735524:b(this.value)<<2}}],[{key:"of",value:,{key:"some",value:,{key:"none",value:function(){return V}},{key:"empty",value:function(){return V}},{key:"pure",value:function(e){return L(e)}},{key:"map2",value:function(e,n,t){return e.nonEmpty()&&n.nonEmpty()?L(t(e.value,n.value)):V}},{key:"map3",value:function(e,n,t,i){return e.nonEmpty()&&n.nonEmpty()&&t.nonEmpty()?L(i(e.value,n.value,t.value)):V}},{key:"map4",value:function(e,n,t,i,a){return e.nonEmpty()&&n.nonEmpty()&&t.nonEmpty()&&i.nonEmpty()?L(a(e.value,n.value,t.value,i.value)):V}},{key:"map5",value:function(e,n,t,i,a,r){return e.nonEmpty()&&n.nonEmpty()&&t.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?L(r(e.value,n.value,t.value,i.value,a.value)):V}},{key:"map6",value:function(e,n,t,i,a,r,o){return e.nonEmpty()&&n.nonEmpty()&&t.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()&&r.nonEmpty()?L(o(e.value,n.value,t.value,i.value,a.value,r.value)):V}},{key:"tailRecM",value:function(e,n){for(var t=e;;){var i=n(t);if(!i.nonEmpty())return V;var a=i.value;if(a.isRight())return L(a.value);t=a.value}}}]),e}(),U=function(e){function n(e){return S(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,!1))}return E(n,e),n}(R);function L(e){return new U(e)}var V=new(function(e){function n(){return S(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,void 0,!0))}return E(n,e),n}(R)),q={equals:function(e,n){return e?e.equals(n):!n},map:function(e,n){return n.map(e)},ap:function(e,n){return n.ap(e)},of:R.pure,chain:function(e,n){return n.flatMap(e)},chainRec:function(e,n){return R.tailRecM(n,(function(n){return e(x.left,x.right,n)}))}};T(R,q,q);var B=function(){function e(n,t){S(this,e),this._isSuccess="success"===t,this.value=n}return A(e,[{key:"isSuccess",value:function(){return this._isSuccess}},{key:"isFailure",value:function(){return!this._isSuccess}},{key:"get",value:function(){if(!this._isSuccess)throw this.value;return this.value}},{key:"getOrElse",value:,{key:"getOrElseL",value:,{key:"orNull",value:,{key:"orUndefined",value:,{key:"orElse",value:,{key:"orElseL",value:,{key:"failed",value:function(){return this._isSuccess?K(new O("try.failed()")):$(this.value)}},{key:"fold",value:,{key:"filter",value:function(e){if(!this._isSuccess)return this;try{return e(this.value)?this:K(new O("Predicate does not hold for "+this.value))}catch(n){return K(n)}}},{key:"flatMap",value:function(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(n){return K(n)}}},{key:"chain",value:,{key:"ap",value:,{key:"map",value:function(n){var t=this;return this._isSuccess?e.of((function(){return n(t.value)})):this}},{key:"forEach",value:,{key:"recover",value:function(n){var t=this;return this._isSuccess?this:e.of(()}},{key:"recoverWith",value:function(e){try{return this._isSuccess?this:e(this.value)}catch(n){return K(n)}}},{key:"toOption",value:,{key:"toEither",value:,{key:"equals",value:function(e){return null!=e&&(this._isSuccess?e._isSuccess&&I(this.value,e.value):!e._isSuccess&&I(this.value,e.value))}},{key:"hashCode",value:function(){return this._isSuccess,b(this.value)}}],[{key:"of",value:,{key:"pure",value:,{key:"unit",value:,{key:"success",value:function(e){return $(e)}},{key:"failure",value:function(e){return K(e)}},{key:"raise",value:,{key:"map2",value:function(e,n,t){if(e.isFailure())return e;if(n.isFailure())return n;try{return $(t(e.value,n.value))}catch(i){return K(i)}}},{key:"map3",value:function(e,n,t,i){if(e.isFailure())return e;if(n.isFailure())return n;if(t.isFailure())return t;try{return $(i(e.value,n.value,t.value))}catch(a){return K(a)}}},{key:"map4",value:function(e,n,t,i,a){if(e.isFailure())return e;if(n.isFailure())return n;if(t.isFailure())return t;if(i.isFailure())return i;try{return $(a(e.value,n.value,t.value,i.value))}catch(r){return K(r)}}},{key:"map5",value:function(e,n,t,i,a,r){if(e.isFailure())return e;if(n.isFailure())return n;if(t.isFailure())return t;if(i.isFailure())return i;if(a.isFailure())return a;try{return $(r(e.value,n.value,t.value,i.value,a.value))}catch(o){return K(o)}}},{key:"map6",value:function(e,n,t,i,a,r,o){if(e.isFailure())return e;if(n.isFailure())return n;if(t.isFailure())return t;if(i.isFailure())return i;if(a.isFailure())return a;if(r.isFailure())return r;try{return $(o(e.value,n.value,t.value,i.value,a.value,r.value))}catch(s){return K(s)}}},{key:"tailRecM",value:function(e,n){for(var t=e;;)try{var i=n(t);if(i.isFailure())return i;var a=i.get();if(a.isRight())return $(a.value);t=a.value}catch(r){return K(r)}}}]),e}(),M=function(e){function n(e){return S(this,n),w(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"success"))}return E(n,e),n}(B);function $(e){return new M(e)}var G=B);ar H={equals:map:function(e,n){return n.map(e)},ap:function(e,n){return n.ap(e)},of:B.pure,chain:chainRec:;T(B,H,H);var Q=$(void 0),J=t(617954);const Z={context:!1,accessToken:!1,enabled:!1};var z=t(445210);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function X(e,n,t){return t.value.returnsPromise=!0,t.enumerable=!0,t}function ee(e,n,t){const i=t.value.name;return t.value=t}function ne(e){const n={},t=Object.getPrototypeOf(e);return Object.keys(t).forEach((i=>{n[i]=t[i].bind(e),n[i].returnsPromise=t[i].returnsPromise})),n}const te=e=>(n,t,i)=>{if(e.key)return n(e);if(e.url)return t(e);if(e.ari)return i(e);throw new Error("Invalid identifier")},ie=(e,n)=>60*e*1e3/n;const ae=(e,n)=>{var t;const{version:i,partner:a}=e,r=(0,h._d)({adminHubBaseUrl:n.adminHubBaseUrl,mpacBaseUrl:n.mpacBaseUrl,mpacCdnBaseUrl:n.mpacCdnBaseUrl,macBaseUrl:n.macBaseUrl,wacBaseUrl:n.wacBaseUrl,atlassianCommunityBaseUrl:n.atlassianCommunityBaseUrl});return W(W(W(W(W(W(W({key:e.appKey,name:e.name,origin:"marketplace",description:e.tagline||""},le("version",null==i?void 0:i.version)),le("vendor",null==a?void 0:a.name)),le("vendorLink",a?r.partnerDetails.expand({id:a.id,slug:a.slug}):void 0)),le("icon",e.logo?r.mediaFile.expand({imageId:(null===(t=e.logo.highResolution)||void 0===t?void 0:t.id)||e.logo.original.id}):void 0)),le("privacyPolicy",e.privacyPolicyUrl)),le("eula",null==i?void 0:i.endUserLicenseAgreementUrl)),{},{vendorType:"ATLASSIAN_INTERNAL"===(null==a?void 0:a.partnerType)?"internal":"thirdParty",metadata:void 0})},re=e=>{var n;const{scopes:t}=(null===(n=e.version)||void 0===n?void 0:n.deployment)||{};return t?t.map((e=>e.id)):[]},oe=e=>{var n,t,i;return W(W(W(W(W(W(W({key:e.key,name:e.name,origin:"marketplace",description:e.summary,version:e.version},le("vendor",null===(n=e.vendor)||void 0===n?void 0:n.name)),le("vendorLink",null===(t=e.vendor)||void 0===t?void 0:t.marketplaceLink)),le("vendorType",e.vendor?e.vendor.isAtlassian?"internal":"thirdParty":void 0)),le("icon",null===(i=e.logo)||void 0===i?void 0:i.link)),le("privacyPolicy",e.links.privacy)),le("eula",e.links.eula)),{},{metadata:void 0})},se=e=>({isEligible:Boolean(e.cmtEligible),btfSenEndDate:e.btfSenEndDate?new Date(e.btfSenEndDate):void 0});function le(e,n){return null!=n?{[e]:n}:{}}function ce(e,n,t,i){var a,r,o;const s=null===(a=n.links)||void 0===a?void 0:a.postInstall,l=null===(r=n.links)||void 0===r?void 0:r.configure,c=null===(o=n.links)||void 0===o?void 0:o.manage;return pe(t,e).map((n=>function(e,n,t,i,a,r){return W(W(W(W({details:ae(e,n),scopes:re(e),enabled:!0,latestVersion:!0,installationId:e.appKey},le("getStartedUrl",t)),le("configureUrl",i)),le("manageAppUrl",a)),{},{paymentModel:r,installTime:new Date,authType:{type:"2LO"},metadata:void 0})}(e,i,s,l,c,n)))}const ue={type:"free"},de=pe=(e,n)=>{var t;const i=null===(t=n.version)||void 0===t?void 0:t.paymentModel;return i?(a=i,(e,n,t)=>{switch(a){case"PAID_VIA_ATLASSIAN":return n();case"FREE":return e();case"PAID_VIA_PARTNER":return t();default:throw z.Z.unexpectedCase(a)}})((,(()=>{var n,t,i;const a=null===(n=e.licenseDetails)||void 0===n?void 0:n.evaluation,r=null===(t=e.licenseDetails)||void 0===t?void 0:t.autoRenewal,o=null===(i=e.licenseDetails)||void 0===i?void 0:i.expiryDate;var s,l,c;return null!=a&&null!=r?a?(l=o,c=r,null!=l?x.right({type:"evaluation",expiry:l,isAutoRenewal:c}):x.left("Unable to get Expiry date for evaluation license")).map(de):((e,n)=>n?x.right({type:"subscription",renewalType:{isAutoRenewal:!0}}):null!=e?x.right({type:"subscription",renewalType:{isAutoRenewal:!1,endDate:e}}):x.left("Unable to get end date for subscription license"))(null===(s=e.licenseDetails)||void 0===s?void 0:s.subscriptionEndDate,r).map(de):x.left("Unable to get subscription information from UPM")}),():x.left("Unable to get payment model from marketplace");var a};onst ve=onst fe=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;onst ge=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];onst Ne=10,Ie=2;ymbol.toStringTag;Symbol.toStringTag;const Se={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Ae=new Set(Object.keys(Se));ar we,Oe;!we||(we={})),Oe||(Oe={}));const Fe=Object.freeze({});unction xe(e){return function(e,n,t=Se){const i=new Map;for(const g of Object.values(Oe))i.set(g,Te(n,g));let a,r,o,s=Array.isArray(e),l=[e],c=-1,u=[],d=e;const p=[],m=[];do{c++;const e=c===l.length,g=e&&0!==u.length;if(e){if(r=0===m.length?void 0:p[p.length-1],d=o,o=m.pop(),g)if(s){d=d.slice();let e=0;for(const[n,t]of u){const i=n-e;null===t?(d.splice(i,1),e++):d[i]=t}}else{d=Object.defineProperties({},Object.getOwnPropertyDescriptors(d));for(const[e,n]of u)d[e]=n}c=a.index,l=a.keys,u=a.edits,s=a.inArray,a=a.prev}else if(o){if(r=s?c:l[c],d=o[r],null==d)continue;p.push(r)}let h;if(!Array.isArray(d)){var v,y;Ee(d)||he(!1,`Invalid AST Node: ${k=d,be(k,[])}.`);const t=e?null===(v=i.get(d.kind))||void 0===v?void 0:v.leave:null===(y=i.get(d.kind))||void 0===y?void 0:y.enter;if(h=null==t?void 0:t.call(n,d,r,o,p,m),h===Fe)break;if(!1===h){if(!e){p.pop();continue}}else if(void 0!==h&&(u.push([r,h]),!e)){if(!Ee(h)){p.pop();continue}d=h}}var f;void 0===h&&g&&u.push([r,d]),e?p.pop():(a={inArray:s,index:c,keys:l,edits:u,prev:a},s=Array.isArray(d),l=s?d:null!==(f=t[d.kind])&&void 0!==f?f:[],c=-1,u=[],o&&m.push(o),o=d)}while(void 0!==a);var k;return 0!==u.length?u[u.length-1][1]:e}(e,Ce)}const Ce={Name:{leave:e=>e.value},Variable:{leave:,Document:{leave:,OperationDefinition:{leave,VariableDefinition:{leave:,SelectionSet:{leave:,Field:{leave,Argument:{leave:({name:e,value:n})=>e+": "+n},FragmentSpread:{leave:,InlineFragment:{leave:,FragmentDefinition:{leave:,IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:,BooleanValue:{leave:,NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+Pe(e,", ")+"]"},ObjectValue:{leave:,ObjectField:{leave:({name:e,value:n})=>e+": "+n},Directive:{leave:,NamedType:{leave:,ListType:{leave:,NonNullType:{leave:,SchemaDefinition:{leave:,OperationTypeDefinition:{leave:,ScalarTypeDefinition:{leave:,ObjectTypeDefinition:{leave:({description:e,name:n,interfaces:t,directives:i,fields:a})=>De("",e,"\n")+Pe(["type",n,De("implements ",Pe(t," & ")),Pe(i," "),_e(a)]," ")},FieldDefinition:{leave:,InputValueDefinition:{leave:,InterfaceTypeDefinition:{leave:,UnionTypeDefinition:{leave:,EnumTypeDefinition:{leave:({description:e,name:n,directives:t,values:i})=>De("",e,"\n")+Pe(["enum",n,Pe(t," "),_e(i)]," ")},EnumValueDefinition:{leave:,InputObjectTypeDefinition:{leave:,DirectiveDefinition:{leave:,SchemaExtension:{leave:,ScalarTypeExtension:{leave:,ObjectTypeExtension:{leave:({name:e,interfaces:n,directives:t,fields:i})=>Pe(["extend type",e,De("implements ",Pe(n," & ")),Pe(t," "),_e(i)]," ")},InterfaceTypeExtension:{leave:,UnionTypeExtension:{leave:,EnumTypeExtension:{leave:({name:e,directives:n,values:t})=>Pe(["extend enum",e,Pe(n," "),_e(t)]," ")},InputObjectTypeExtension:{leave:};e=t(804297),Le=t.n(Ue);const Ve=(e,n,t)=>{const[,i,a]=n.id.split("/");return"".concat(e,"/jira/settings/apps/").concat(t,"/").concat(i,"/").concat(a)};function qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Be(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qe(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Me={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"appInstallationTask"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appInstallationTask"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:571,source:{body:"# If you are making any change here\n# Do thoroughly read our graphql contribution guidelines\n# https://bitbucket.org/atlassian-marketplace/marketplace-frontend/src/master/docs/working-with-graphql.md\n\nmutation ecosystemCloudAppInstall($input: AppInstallationInput!) {\n  installApp(input: $input) {\n    success\n    installationId\n    taskId\n    errors {\n      message\n      extensions {\n        statusCode\n        errorType\n      }\n    }\n  }\n}\n\nquery appInstallationTask($id: ID!) {\n  appInstallationTask(id: $id) {\n    id\n    state\n    errors {\n      message\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};const $e=(e,n,t,i)=>{var a,r,o;const s=null===(a=t.app)||void 0===a?void 0:a.marketplaceApp,l=i.find((e=>{var n;return null===(n=e.properties)||void 0===n?void 0:n.useAsGetStarted})),c=i.find((e=>{var n;return null===(n=e.properties)||void 0===n?void 0:n.useAsConfig})),u=s&&(null===(r=s.versions.edges)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.node);if(s&&u){var d;const i={key:s.appKey,name:s.name,description:s.tagline||"",metadata:void 0},a=u.deployment,r={type:"2LO"},o=((e,n)=>{var t,i;let a={type:"free"};const r=null===(t=n.license)||void 0===t?void 0:t.trialEndDate,o=null===(i=n.license)||void 0===i?void 0:i.isEvaluation;if("PAID_VIA_ATLASSIAN"===e.paymentModel){if(o&&r)return a={type:"paid",licenseType:{type:"evaluation",expiry:Date.parse(r),isAutoRenewal:!0}},a;a={type:"paid",licenseType:{type:"subscription",renewalType:{isAutoRenewal:!0}}}}return a})(u,t),p="".concat(n,"/plugins/servlet/upm#manage/").concat(s.appKey),{getStartedUrl:m,configureUrl:v}=(e=>{let{product:n,baseUrl:t,getStartedExtension:i,configExtension:a}=e;return n===k.N.Confluence?{getStartedUrl:i&&"".concat(t,"/admin/forge?id=").concat(encodeURIComponent(i.id)),configureUrl:a&&"".concat(t,"/admin/forge?id=").concat(encodeURIComponent(a.id))}:n===k.N.Jira?{getStartedUrl:i&&Ve(t,i,"get-started"),configureUrl:a&&Ve(t,a,"configure")}:{}})({product:e,baseUrl:n,getStartedExtension:l,configExtension:c});return Be(Be(Be({authType:r,details:i,installationId:t.id,enabled:!0,manageAppUrl:p},le("getStartedUrl",m)),le("configureUrl",v)),{},{installTime:new Date(t.createdAt),scopes:a.scopes.map((e=>e.capability)),latestVersion:!(null===(d=t.appEnvironmentVersion)||void 0===d||!d.isLatest),paymentModel:o,metadata:void 0})}throw new Error("Marketplace app data not present in installed app ".concat(t.id))},Ge=async(e,n)=>{const{query:t,variables:i,options:a={}}=e,r=Be(Be({},a),{},{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","atl-client-name":"marketplace-amkt-upm-spi-impl"},body:JSON.stringify({query:t,variables:i})});return(await(0,o.ru)(n,r)).json()},Ke=e=>{var n,t;return(null==e||null===(n=e.extensions)||void 0===n||null===(t=n.gateway)||void 0===t?void 0:t.request_id)||""},He=Qe={adminHubBaseUrl:"https://admin.atlassian.com",mpacBaseUrl:"https://marketplace.atlassian.com",mpacCdnBaseUrl:"https://marketplace-cdn.atlassian.com",atlassianCommunityBaseUrl:"https://community.stg.atlassian.com",macBaseUrl:"https://my.atlassian.com",wacBaseUrl:"https://www.atlassian.com",ecosystemCloudEnvKey:"production"},Je={adminHubBaseUrl:"https://admin.stg.atlassian.com",mpacBaseUrl:"https://marketplace.stg.internal.atlassian.com",mpacCdnBaseUrl:"https://marketplace.stg.internal.atlassian.com",macBaseUrl:"https://my.stg.internal.atlassian.com",wacBaseUrl:"https://qa-wac.internal.atlassian.com",atlassianCommunityBaseUrl:"https://community.stg.atlassian.com",ecosystemCloudEnvKey:"production"},Ze={adminHubBaseUrl:"https://admin.stg.atlassian.com",mpacBaseUrl:"https://marketplace.stg.internal.atlassian.com",mpacCdnBaseUrl:"https://marketplace.stg.internal.atlassian.com",macBaseUrl:"https://my.stg.internal.atlassian.com",wacBaseUrl:"https://qa-wac.internal.atlassian.com",atlassianCommunityBaseUrl:"https://community.stg.atlassian.com",ecosystemCloudEnvKey:"production"},ze=e=>{switch(e.environment){case"prod":return Qe;case"staging":return Je;case"local":return Ze;default:return console.error("Unable to configure marketplace env: "+e.environment),Qe}},Ye=["versions"];function We(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Xe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?We(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var en={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ecosystemCloudAppInstall"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"installApp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"taskId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extensions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorType"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:571,source:{body:"# If you are making any change here\n# Do thoroughly read our graphql contribution guidelines\n# https://bitbucket.org/atlassian-marketplace/marketplace-frontend/src/master/docs/working-with-graphql.md\n\nmutation ecosystemCloudAppInstall($input: AppInstallationInput!) {\n  installApp(input: $input) {\n    success\n    installationId\n    taskId\n    errors {\n      message\n      extensions {\n        statusCode\n        errorType\n      }\n    }\n  }\n}\n\nquery appInstallationTask($id: ID!) {\n  appInstallationTask(id: $id) {\n    id\n    state\n    errors {\n      message\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},nn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ecosystemCloudAppSubscribe"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AppSubscribeInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscribeToApp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"taskId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extensions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorType"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:461,source:{body:"# If you are making any change here\n# Do thoroughly read our graphql contribution guidelines\n# https://bitbucket.org/atlassian-marketplace/marketplace-frontend/src/master/docs/working-with-graphql.md\n\nmutation ecosystemCloudAppSubscribe($input: AppSubscribeInput!) {\n  subscribeToApp(input: $input) {\n    success\n    installation {\n      id\n    }\n    taskId\n    errors {\n      message\n      extensions {\n        statusCode\n        errorType\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},tn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEcosystemCloudAppInstallation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"environmentType"}},type:{kind:"NamedType",name:{kind:"Name",value:"AppEnvironmentType"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"useDeprecatedQuery"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extensionContexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contextIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"context"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"appId"},value:{kind:"Variable",name:{kind:"Name",value:"appId"}}},{kind:"ObjectField",name:{kind:"Name",value:"environmentType"},value:{kind:"Variable",name:{kind:"Name",value:"environmentType"}}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"useDeprecatedQuery"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extensionContextsNodes"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"globalSettingsExtensions"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"adminPageExtensions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"ecosystem"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"useDeprecatedQuery"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appInstallationsByContext"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"appInstallations"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"contexts"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"context"}}]}}]}},{kind:"ObjectField",name:{kind:"Name",value:"apps"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"appId"}}]}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"appInstallationsByContextNodes"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"extensionContextsNodes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appEnvironmentVersion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLatest"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"requiresLicense"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceApp"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"productHostingOptions"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"CLOUD"}]}},{kind:"ObjectField",name:{kind:"Name",value:"visibility"},value:{kind:"EnumValue",value:"PUBLIC"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"license"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEntitlementNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trialEndDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEvaluation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"globalSettingsExtensions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ExtensionContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"globalSettingsExtensions"},name:{kind:"Name",value:"extensionsByType"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"confluence:globalSettings",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extensionTypeFields"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"adminPageExtensions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ExtensionContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"adminPageExtensions"},name:{kind:"Name",value:"extensionsByType"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"jira:adminPage",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extensionTypeFields"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"appInstallationsByContextNodes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationByIndexConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appEnvironmentVersion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLatest"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"requiresLicense"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"installationContext"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceApp"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"productHostingOptions"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"CLOUD"}]}},{kind:"ObjectField",name:{kind:"Name",value:"visibility"},value:{kind:"EnumValue",value:"PUBLIC"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"license"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEntitlementNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trialEndDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEvaluation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"extensionTypeFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Extension"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"environmentId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"environmentType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appVersion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installationId"},arguments:[],directives:[]}]}}],loc:{start:0,end:3964,source:{body:'# If you are making any change here\n# Do thoroughly read our graphql contribution guidelines\n# https://bitbucket.org/atlassian-marketplace/marketplace-frontend/src/master/docs/working-with-graphql.md\nquery getEcosystemCloudAppInstallations(\n  $context: ID!\n  $after: String\n  $useDeprecatedQuery: Boolean!\n) {\n  extensionContexts(contextIds: [$context]) {\n    id\n\n    # TODO: MC-3960 - cleanup once migrated\n    # eslint-disable-next-line @graphql-eslint/no-deprecated\n    installations(after: $after) @include(if: $useDeprecatedQuery) {\n      ...extensionContextsNodes\n      ...pageInfo\n    }\n    ...globalSettingsExtensions\n    ...adminPageExtensions\n  }\n  ecosystem @skip(if: $useDeprecatedQuery) {\n    appInstallationsByContext(\n      filter: { appInstallations: { contexts: [$context] } }\n      after: $after\n    ) {\n      ...appInstallationsByContextNodes\n    }\n  }\n}\n\nquery getEcosystemCloudAppInstallation(\n  $context: ID!\n  $appId: ID!\n  $environmentType: AppEnvironmentType\n  $useDeprecatedQuery: Boolean!\n) {\n  extensionContexts(contextIds: [$context]) {\n    id\n\n    # TODO: MC-3960 - cleanup once migrated\n    # eslint-disable-next-line @graphql-eslint/no-deprecated\n    installations(filter: { appId: $appId, environmentType: $environmentType })\n      @include(if: $useDeprecatedQuery) {\n      ...extensionContextsNodes\n    }\n    ...globalSettingsExtensions\n    ...adminPageExtensions\n  }\n  ecosystem @skip(if: $useDeprecatedQuery) {\n    appInstallationsByContext(\n      filter: { appInstallations: { contexts: [$context] }, apps: { ids: [$appId] } }\n    ) {\n      ...appInstallationsByContextNodes\n    }\n  }\n}\n\nfragment extensionContextsNodes on AppInstallationConnection {\n  nodes {\n    id\n    appEnvironmentVersion {\n      isLatest\n      requiresLicense\n    }\n    app {\n      marketplaceApp {\n        appKey\n        name\n        tagline\n        createdAt\n        versions(filter: { productHostingOptions: [CLOUD], visibility: PUBLIC }) {\n          edges {\n            node {\n              paymentModel\n              deployment {\n                ... on MarketplaceCloudAppDeployment {\n                  cloudAppId\n                  scopes {\n                    id\n                    name\n                    capability\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    license {\n      active\n      type\n      supportEntitlementNumber\n      trialEndDate\n      isEvaluation\n    }\n    createdAt\n  }\n}\n\nfragment appInstallationsByContextNodes on AppInstallationByIndexConnection {\n  nodes {\n    id\n    appEnvironmentVersion {\n      isLatest\n      requiresLicense\n    }\n    installationContext\n    app {\n      marketplaceApp {\n        name\n        appKey\n        tagline\n        createdAt\n        versions(filter: { productHostingOptions: [CLOUD], visibility: PUBLIC }) {\n          edges {\n            node {\n              paymentModel\n              deployment {\n                ... on MarketplaceCloudAppDeployment {\n                  cloudAppId\n                  scopes {\n                    id\n                    name\n                    capability\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    license {\n      active\n      type\n      supportEntitlementNumber\n      trialEndDate\n      isEvaluation\n    }\n    createdAt\n  }\n  pageInfo {\n    hasNextPage\n    endCursor\n  }\n}\n\nfragment pageInfo on AppInstallationConnection {\n  pageInfo {\n    hasNextPage\n    endCursor\n  }\n}\n\nfragment globalSettingsExtensions on ExtensionContext {\n  globalSettingsExtensions: extensionsByType(type: "confluence:globalSettings") {\n    ...extensionTypeFields\n  }\n}\n\nfragment adminPageExtensions on ExtensionContext {\n  adminPageExtensions: extensionsByType(type: "jira:adminPage") {\n    ...extensionTypeFields\n  }\n}\n\nfragment extensionTypeFields on Extension {\n  id\n  environmentId\n  environmentType\n  properties\n  type\n  appVersion\n  installationId\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},an={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEcosystemCloudAppInstallations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"useDeprecatedQuery"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extensionContexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contextIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"context"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"useDeprecatedQuery"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extensionContextsNodes"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"pageInfo"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"globalSettingsExtensions"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"adminPageExtensions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"ecosystem"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"useDeprecatedQuery"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appInstallationsByContext"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"appInstallations"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"contexts"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"context"}}]}}]}}]}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"appInstallationsByContextNodes"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"extensionContextsNodes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appEnvironmentVersion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLatest"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"requiresLicense"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceApp"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"productHostingOptions"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"CLOUD"}]}},{kind:"ObjectField",name:{kind:"Name",value:"visibility"},value:{kind:"EnumValue",value:"PUBLIC"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"license"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEntitlementNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trialEndDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEvaluation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"pageInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"globalSettingsExtensions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ExtensionContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"globalSettingsExtensions"},name:{kind:"Name",value:"extensionsByType"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"confluence:globalSettings",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extensionTypeFields"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"adminPageExtensions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ExtensionContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"adminPageExtensions"},name:{kind:"Name",value:"extensionsByType"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"jira:adminPage",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extensionTypeFields"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"appInstallationsByContextNodes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AppInstallationByIndexConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appEnvironmentVersion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLatest"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"requiresLicense"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"installationContext"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceApp"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"productHostingOptions"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"CLOUD"}]}},{kind:"ObjectField",name:{kind:"Name",value:"visibility"},value:{kind:"EnumValue",value:"PUBLIC"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"license"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEntitlementNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trialEndDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEvaluation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"extensionTypeFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Extension"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"environmentId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"environmentType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appVersion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installationId"},arguments:[],directives:[]}]}}],loc:{start:0,end:3964,source:{body:'# If you are making any change here\n# Do thoroughly read our graphql contribution guidelines\n# https://bitbucket.org/atlassian-marketplace/marketplace-frontend/src/master/docs/working-with-graphql.md\nquery getEcosystemCloudAppInstallations(\n  $context: ID!\n  $after: String\n  $useDeprecatedQuery: Boolean!\n) {\n  extensionContexts(contextIds: [$context]) {\n    id\n\n    # TODO: MC-3960 - cleanup once migrated\n    # eslint-disable-next-line @graphql-eslint/no-deprecated\n    installations(after: $after) @include(if: $useDeprecatedQuery) {\n      ...extensionContextsNodes\n      ...pageInfo\n    }\n    ...globalSettingsExtensions\n    ...adminPageExtensions\n  }\n  ecosystem @skip(if: $useDeprecatedQuery) {\n    appInstallationsByContext(\n      filter: { appInstallations: { contexts: [$context] } }\n      after: $after\n    ) {\n      ...appInstallationsByContextNodes\n    }\n  }\n}\n\nquery getEcosystemCloudAppInstallation(\n  $context: ID!\n  $appId: ID!\n  $environmentType: AppEnvironmentType\n  $useDeprecatedQuery: Boolean!\n) {\n  extensionContexts(contextIds: [$context]) {\n    id\n\n    # TODO: MC-3960 - cleanup once migrated\n    # eslint-disable-next-line @graphql-eslint/no-deprecated\n    installations(filter: { appId: $appId, environmentType: $environmentType })\n      @include(if: $useDeprecatedQuery) {\n      ...extensionContextsNodes\n    }\n    ...globalSettingsExtensions\n    ...adminPageExtensions\n  }\n  ecosystem @skip(if: $useDeprecatedQuery) {\n    appInstallationsByContext(\n      filter: { appInstallations: { contexts: [$context] }, apps: { ids: [$appId] } }\n    ) {\n      ...appInstallationsByContextNodes\n    }\n  }\n}\n\nfragment extensionContextsNodes on AppInstallationConnection {\n  nodes {\n    id\n    appEnvironmentVersion {\n      isLatest\n      requiresLicense\n    }\n    app {\n      marketplaceApp {\n        appKey\n        name\n        tagline\n        createdAt\n        versions(filter: { productHostingOptions: [CLOUD], visibility: PUBLIC }) {\n          edges {\n            node {\n              paymentModel\n              deployment {\n                ... on MarketplaceCloudAppDeployment {\n                  cloudAppId\n                  scopes {\n                    id\n                    name\n                    capability\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    license {\n      active\n      type\n      supportEntitlementNumber\n      trialEndDate\n      isEvaluation\n    }\n    createdAt\n  }\n}\n\nfragment appInstallationsByContextNodes on AppInstallationByIndexConnection {\n  nodes {\n    id\n    appEnvironmentVersion {\n      isLatest\n      requiresLicense\n    }\n    installationContext\n    app {\n      marketplaceApp {\n        name\n        appKey\n        tagline\n        createdAt\n        versions(filter: { productHostingOptions: [CLOUD], visibility: PUBLIC }) {\n          edges {\n            node {\n              paymentModel\n              deployment {\n                ... on MarketplaceCloudAppDeployment {\n                  cloudAppId\n                  scopes {\n                    id\n                    name\n                    capability\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    license {\n      active\n      type\n      supportEntitlementNumber\n      trialEndDate\n      isEvaluation\n    }\n    createdAt\n  }\n  pageInfo {\n    hasNextPage\n    endCursor\n  }\n}\n\nfragment pageInfo on AppInstallationConnection {\n  pageInfo {\n    hasNextPage\n    endCursor\n  }\n}\n\nfragment globalSettingsExtensions on ExtensionContext {\n  globalSettingsExtensions: extensionsByType(type: "confluence:globalSettings") {\n    ...extensionTypeFields\n  }\n}\n\nfragment adminPageExtensions on ExtensionContext {\n  adminPageExtensions: extensionsByType(type: "jira:adminPage") {\n    ...extensionTypeFields\n  }\n}\n\nfragment extensionTypeFields on Extension {\n  id\n  environmentId\n  environmentType\n  properties\n  type\n  appVersion\n  installationId\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},rn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMarketplaceAUSIAppByKey"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"appKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceAppByKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"appKey"},value:{kind:"Variable",name:{kind:"Name",value:"appKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIApp"},directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"productHostingOptions"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"CLOUD"}]}},{kind:"ObjectField",name:{kind:"Name",value:"visibility"},value:{kind:"EnumValue",value:"PUBLIC"}}]}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIAppVersion"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIApp"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceApp"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"appId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tagline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"privacyPolicyUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"logo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIAppLogo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"partner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AUSIAppPartner"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIAppVersion"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceAppVersion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"learnMoreUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endUserLicenseAgreementUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"paymentModel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deployment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceConnectAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceCloudAppDeployment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cloudAppId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cloudAppVersionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"capability"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIAppLogo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceListingImage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"original"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"highResolution"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AUSIAppPartner"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplacePartner"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"partnerType"},arguments:[],directives:[]}]}}],loc:{start:0,end:1237,source:{body:"# If you are making any change here\n# Do thoroughly read our graphql contribution guidelines\n# https://bitbucket.org/atlassian-marketplace/marketplace-frontend/src/master/docs/working-with-graphql.md\n\nquery GetMarketplaceAUSIAppByKey($appKey: String!) {\n  marketplaceAppByKey(appKey: $appKey) {\n    ...AUSIApp\n    versions(filter: { productHostingOptions: [CLOUD], visibility: PUBLIC }, first: 1) {\n      edges {\n        node {\n          ...AUSIAppVersion\n        }\n      }\n    }\n  }\n}\n\nfragment AUSIAppPartner on MarketplacePartner {\n  name\n  id\n  slug\n  partnerType\n}\n\nfragment AUSIApp on MarketplaceApp {\n  name\n  appKey\n  appId\n  tagline\n  privacyPolicyUrl\n  createdAt\n  logo {\n    ...AUSIAppLogo\n  }\n  partner {\n    ...AUSIAppPartner\n  }\n}\n\nfragment AUSIAppLogo on MarketplaceListingImage {\n  original {\n    id\n  }\n\n  highResolution {\n    id\n  }\n}\n\nfragment AUSIAppVersion on MarketplaceAppVersion {\n  version\n  learnMoreUrl\n  endUserLicenseAgreementUrl\n  paymentModel\n  deployment {\n    ... on MarketplaceConnectAppDeployment {\n      scopes {\n        id\n      }\n    }\n\n    ... on MarketplaceCloudAppDeployment {\n      cloudAppId\n      cloudAppVersionId\n      scopes {\n        id\n        name\n        capability\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};const on=async(e,n)=>{const t=xe(rn),i={appKey:e};try{const o=await Ge({query:t,variables:i},n),s=o.data;if(s&&s.marketplaceAppByKey){var a,r;const e=s.marketplaceAppByKey,{versions:n}=e,t=Xe(Xe({},(0,c.Z)(e,Ye)),{},{version:null==n||null===(a=n.edges)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.node});return Promise.resolve(t)}throw new Error("No app found for "+e+"and the responseJSON.data is "+JSON.stringify(o.data))}catch(o){throw new(y("MarketplaceAppByKeyError"))({source:o,appKey:e})}},sn=async(e,n,t)=>{const i=xe(tn),a=ze(n),{product:r,cloudId:o,gqlGatewayUrl:s}=n,l=e.ari,c=Boolean(t),u={appId:l,context:He(r,o),environment:a.ecosystemCloudEnvKey,useDeprecatedQuery:c};c&&g.ZP.info("getEcosystemCloudAppInstallation","Requested installations using deprecated query");return await Ge({query:i,variables:u},s)},ln=async(e,n,t)=>{const{product:i,baseUrl:a}=n,r=e.ari,o="No ecosystem cloud app found for appId: ".concat(r);try{var s,l,c,u,d,p;const r=await sn(e,n,null==t?void 0:t.enableDeprecatedInstallationsGQL),y=Ke(r);var m;if(null!==(s=r.errors)&&void 0!==s&&s.length||!r.data.extensionContexts)throw new Error((null===(m=r.errors)||void 0===m?void 0:m[0].message)||o,{cause:y});const g=null!=t&&t.enableDeprecatedInstallationsGQL?null===(l=r.data.extensionContexts)||void 0===l?void 0:l[0].installations:null===(c=r.data)||void 0===c||null===(u=c.ecosystem)||void 0===u?void 0:u.appInstallationsByContext,h=null===(d=r.data.extensionContexts)||void 0===d?void 0:d[0].globalSettingsExtensions,N=null===(p=r.data.extensionContexts)||void 0===p?void 0:p[0].adminPageExtensions,I=i===k.N.Jira?N:h;if(!g.nodes.length)throw new Error("No app installation was found by identifier ".concat(e.ari),{cause:y});let b;if(t&&t.enableReactivateForgeAppFromEmcee){var v,f;const n=null===(v=g.nodes[0].appEnvironmentVersion)||void 0===v?void 0:v.requiresLicense,t=null===(f=g.nodes[0].license)||void 0===f?void 0:f.active;if(!(n&&t||!n))throw new Error("No app subscription was found by identifier ".concat(e.ari),{cause:y});b=g.nodes[0]}else b=g.nodes[0];return $e(i,a,b,I.filter(())}catch(g){throw new(y("MarketplaceAppByAriError"))({source:g,appKey:e.appKey,requestId:null==g?void 0:g.cause})}},cn=async(e,n,t)=>{const{product:i,cloudId:a,baseUrl:r,gqlGatewayUrl:o}=e,s=xe(an),l=Boolean(null==t?void 0:t.enableDeprecatedInstallationsGQL),c={context:He(i,a),after:n,useDeprecatedQuery:l};l&&g.ZP.info("getEcosystemCloudAppInstallations","Requested installations using deprecated query");try{var u,d,p,m,v,y,f,h;const e=await await Ge({query:s,variables:c},o),n=null!=t&&t.enableDeprecatedInstallationsGQL?null===(u=e.data)||void 0===u||null===(d=u.extensionContexts)||void 0===d?void 0:d[0].installations:null===(p=e.data)||void 0===p||null===(m=p.ecosystem)||void 0===m?void 0:m.appInstallationsByContext,a=null===(v=e.data)||void 0===v||null===(y=v.extensionContexts)||void 0===y?void 0:y[0].globalSettingsExtensions,l=null===(f=e.data)||void 0===f||null===(h=f.extensionContexts)||void 0===h?void 0:h[0].adminPageExtensions,g=i===k.N.Jira?l:a;var N;if(!n)throw new Error((null===(N=e.errors)||void 0===N?void 0:N[0].message)||"Failed to fetch installed Ecosystem Cloud Apps");const I=((e,n,t,i)=>{const a=Le()(i,(e=>e.installationId));return t.filter(().map((t=>$e(e,n,t,a[t.id]||[])))})(i,r,t&&t.enableReactivateForgeAppFromEmcee?(n.nodes||[]).filter((e=>{var n,t;const i=null===(n=e.appEnvironmentVersion)||void 0===n?void 0:n.requiresLicense,a=null===(t=e.license)||void 0===t?void 0:t.active;return e.app&&(i&&a||!i)})):(n.nodes||[]).filter((e=>e.app)),g.slice());return{installedAddons:I,hasNextPage:!!n.pageInfo.hasNextPage,endCursor:n.pageInfo.endCursor}}catch(I){return console.error("Failed to fetch installed Ecosystem Cloud Apps:",I),{installedAddons:[],hasNextPage:!1}}},un=async function e(n,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];try{const r=await cn(n,i,t),o=[...a,...r.installedAddons];return r.hasNextPage&&r.endCursor?await e(n,t,r.endCursor,o):o}catch(r){return a}},dn=async(e,n,t,i,a,r,o)=>{const s=await(async(e,n,t,i,a,r)=>{const o=xe(en),{ecosystemCloudEnvKey:s}=i,l={input:{installationContext:t,appId:e.ari,environmentKey:s,async:!0,versionId:n,provisionRequestId:r}},c="Ecosystem cloud app installation failed for appId: ".concat(e.ari);try{var u,d;const e=await Ge({query:o,variables:l},a);var p,m,y;if(null===(u=e.data)||void 0===u||null===(d=u.installApp)||void 0===d||!d.success)throw null===(p=e.data)||void 0===p||null===(m=p.installApp)||void 0===m||null===(y=m.errors)||void 0===y?void 0:y[0];return e.data}catch(k){var f;throw new v({addon:e,code:(null==k||null===(f=k.extensions)||void 0===f?void 0:f.errorType)||"InstallAppFailure",message:(null==k?void 0:k.message)||c,source:k})}})(e,n,a,i,r,o),l=s.installApp,c="Ecosystem cloud app installation failed for appId: ".concat(e.ari);var u,d,p,m;if(l&&!l.success)throw new v({addon:e,code:(null===(u=l.errors)||void 0===u||null===(d=u[0].extensions)||void 0===d?void 0:d.errorType)||"InstallAppFailure",message:(null===(p=l.errors)||void 0===p?void 0:p[0].message)||c,source:null===(m=l.errors)||void 0===m?void 0:m[0]});return l},pn=async(e,n,t,i)=>{const a=await(async(e,n,t,i)=>{const a=xe(nn),{ecosystemCloudEnvKey:r}=t,o={input:{installationContext:n,appId:e.ari,envKey:r}},s="Ecosystem cloud app subscription failed for appId: ".concat(e.ari);try{var l,c;const e=await Ge({query:a,variables:o},i);var u,d,p;if(null===(l=e.data)||void 0===l||null===(c=l.subscribeToApp)||void 0===c||!c.success)throw null===(u=e.data)||void 0===u||null===(d=u.subscribeToApp)||void 0===d||null===(p=d.errors)||void 0===p?void 0:p[0];return e.data}catch(y){var m;throw new v({addon:e,code:(null==y||null===(m=y.extensions)||void 0===m?void 0:m.errorType)||"SubscribeAppFailure",message:(null==y?void 0:y.message)||s,source:y})}})(e,t,n,i),r=a.subscribeToApp,o="Ecosystem cloud app installation failed for appId: ".concat(e.ari);var s,l,c,u;if(r&&!r.success)throw new v({addon:e,code:(null===(s=r.errors)||void 0===s||null===(l=s[0].extensions)||void 0===l?void 0:l.errorType)||"SubscribeAppFailure",message:(null===(c=r.errors)||void 0===c?void 0:c[0].message)||o,source:null===(u=r.errors)||void 0===u?void 0:u[0]});return r},mn=async(e,n,t,i)=>{try{const n=await(async(e,n)=>{const t=xe(Me),i={id:e},a={retries:ie(2,5e3),retryDelay:5e3,accept:e=>e.json().then((e=>{var n,t;const i=null==e||null===(n=e.data)||void 0===n||null===(t=n.appInstallationTask)||void 0===t?void 0:t.state;return"COMPLETE"===i||"FAILED"===i?Promise.resolve():Promise.reject(new Error("Request pending"))}))},r=await Ge({query:t,variables:i,options:a},n),o=Ke(r);if(!r.data){const n=new Error("App Installation Task Failed for taskId: ".concat(e));throw n.cause=o,n}return Be(Be({},r.data),{},{requestId:o})})(e,t),r=n.appInstallationTask;if(r&&"PENDING"===r.state||r&&"RUNNING"===r.state)throw new v({addon:i.addon,code:"EcosystemCloudInstallPollFailure",message:"AppInstallationTask in polling response not completed, current state:".concat(r.state),requestId:null==n?void 0:n.requestId});if(r&&"COMPLETE"===r.state)return!0;throw new v({addon:i.addon,code:"EcosystemCloudInstallPollFailure-".concat((a=null==r?void 0:r.errors,(null==a?void 0:a[0].message)&&{"COFS failure, account pending renewal":"account.pending.renewal","An unexpected error occurred":"unexpected.error","Error sending connect plugin lifecycle event callback: product/site does not exist or has been deactivated":"app.deactivated","Error sending connect plugin lifecycle event callback: A permission sync is already running on the tenant":"app.install.inprogress","Failed to license app for product jira because this app has not been configured to support this product":"app.misconfigured","Failed to license app for product confluence because this app has not been configured to support this product":"app.misconfigured"}[a[0].message]||"unknown.error.code")),message:"AppInstallationTask state is failed due to ".concat(JSON.stringify((null==r?void 0:r.errors)||[])||"unknown reason"),requestId:null==n?void 0:n.requestId})}catch(r){if(r instanceof v)throw r;throw new v({addon:i.addon,code:"AppInstallationTaskFailedError",message:"Failed while polling for app installation status for ".concat(i.addon.toString()),source:r,requestId:null==r?void 0:r.cause})}var a},vn=async(e,n,t)=>{try{return ln(e,n,{enableReactivateForgeAppFromEmcee:t.enableReactivateForgeAppFromEmcee,enableDeprecatedInstallationsGQL:t.enableDeprecatedInstallationsGQL})}catch(a){var i;throw new v({addon:t.addon,code:"EcosystemCloudAppFetchFailed",message:"Unable to fetch ecosystem cloud app with identifier ".concat(e.ari),requestId:null==a||null===(i=a.meta)||void 0===i?void 0:i.requestId})}},yn=async(e,n,t,i)=>{var a;const{baseUrl:r,gqlGatewayUrl:o}=n,s=ze(n),l=null===(a=(await on(e.appKey,o)).version.deployment)||void 0===a?void 0:a.cloudAppVersionId;if(!l)throw new v({addon:t.addon,code:"CloudVersionIdFetchError",message:"CloudVersionId is not present for version specific installation ".concat(t.addon.toString())});if(t.enableReactivateForgeAppFromEmcee){const i=await(async(e,n,t)=>{var i,a,r,o,s;const{baseUrl:l,gqlGatewayUrl:c}=n,u=ze(n),d=await sn(e,n,null==t?void 0:t.enableDeprecatedInstallationsGQL);var p;if(null!==(i=d.errors)&&void 0!==i&&i.length||!d.data.extensionContexts)throw new Error(null===(p=d.errors)||void 0===p?void 0:p[0].message);const m=null!=t&&t.enableDeprecatedInstallationsGQL?null===(a=d.data.extensionContexts)||void 0===a?void 0:a[0].installations:null===(r=d.data)||void 0===r||null===(o=r.ecosystem)||void 0===o?void 0:o.appInstallationsByContext;if(null!==(s=m.nodes)&&void 0!==s&&s.length){var y,f;const i=m.nodes[0],a=null===(y=i.appEnvironmentVersion)||void 0===y?void 0:y.requiresLicense,r=null===(f=i.license)||void 0===f?void 0:f.active;if(a&&!r){const i=await pn(e,u,t.contextId,c);null!=i&&i.taskId&&await mn(i.taskId,l,c,t);try{return await ln(e,n,{enableReactivateForgeAppFromEmcee:t.enableReactivateForgeAppFromEmcee,enableDeprecatedInstallationsGQL:t.enableDeprecatedInstallationsGQL})}catch(g){var k;throw new v({addon:t.addon,code:"EcosystemCloudAppFetchFailed",message:"Unable to fetch ecosystem cloud app with identifier ".concat(e.ari),requestId:null==g||null===(k=g.meta)||void 0===k?void 0:k.requestId})}}}return Promise.resolve()})(e,n,t);if(i)return i}const c=await dn(e,l,r,s,t.contextId,o,i);return null!=c&&c.taskId&&await mn(c.taskId,r,o,t),vn(e,n,t)};var fn=t(523102);let kn=function(e){return e.InvalidInstallationTargetInfo="InvalidInstallationTargetInfo",e.FallbackStoreBFFErrorCode="UnknownErrorInMarketplaceStoreAppInstall",e}({});const gn=hn=(e,n,t,i)=>{const a="trigger"===n?"Failed to trigger installation for app with key ".concat(e):"Unknown error getting installation status for app with key ".concat(e);throw new v({addon:{key:e},code:"GraphQLFetchError",message:gn(a,i),source:t})},Nn=(e,n,t,i,a)=>{var r,o,s;const l=null==t?void 0:t[0],c=(null==l||null===(r=l.extensions)||void 0===r?void 0:r.code)||kn.FallbackStoreBFFErrorCode,u=null==i||null===(o=i.gateway)||void 0===o?void 0:o.request_id,d=null!==(s=null==l?void 0:l.message)&&void 0!==s?s:"trigger"===n?"Error triggering installation for app with key ".concat(e):"Error getting installation status for app with key ".concat(e);throw new v({addon:{key:e},code:c,message:gn(d,a),source:l,requestId:u})};var In={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetInstallStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"taskId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceStore"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"installAppStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"taskId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"optIn"},arguments:[{kind:"Argument",name:{kind:"Name",value:"to"},value:{kind:"StringValue",value:"MarketplaceStoreInstallAppM1",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"InstallResult"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"InstallResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceStoreInstallAppResponse"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"taskId"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}],loc:{start:0,end:458,source:{body:'fragment InstallResult on MarketplaceStoreInstallAppResponse {\n  taskId: id\n  status\n}\n\nmutation InstallApp($input: MarketplaceStoreInstallAppInput!) {\n  marketplaceStore {\n    installApp(input: $input) @optIn(to: "MarketplaceStoreInstallAppM1") {\n      ...InstallResult\n    }\n  }\n}\n\nquery GetInstallStatus($taskId: ID!) {\n  marketplaceStore {\n    installAppStatus(id: $taskId) @optIn(to: "MarketplaceStoreInstallAppM1") {\n      ...InstallResult\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},bn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"InstallApp"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceStoreInstallAppInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"marketplaceStore"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"installApp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"optIn"},arguments:[{kind:"Argument",name:{kind:"Name",value:"to"},value:{kind:"StringValue",value:"MarketplaceStoreInstallAppM1",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"InstallResult"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"InstallResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MarketplaceStoreInstallAppResponse"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"taskId"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}],loc:{start:0,end:458,source:{body:'fragment InstallResult on MarketplaceStoreInstallAppResponse {\n  taskId: id\n  status\n}\n\nmutation InstallApp($input: MarketplaceStoreInstallAppInput!) {\n  marketplaceStore {\n    installApp(input: $input) @optIn(to: "MarketplaceStoreInstallAppM1") {\n      ...InstallResult\n    }\n  }\n}\n\nquery GetInstallStatus($taskId: ID!) {\n  marketplaceStore {\n    installAppStatus(id: $taskId) @optIn(to: "MarketplaceStoreInstallAppM1") {\n      ...InstallResult\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}};const Sn={confluence:fn.ywY.Confluence,jira:fn.ywY.Jira},An=async(e,n)=>{const{gqlGatewayUrl:t}=n,{appKey:i,installationTargetInfo:a}=e,{contextId:o,productName:s}=a,{cloudId:l}=(0,r.parse)(o),c=Sn[s];if(!l)throw new v({addon:{key:i},code:kn.InvalidInstallationTargetInfo,message:"Unable to parse cloudId from installationTargetInfo.contextId: ".concat(o)});if(!c)throw new v({addon:{key:i},code:kn.InvalidInstallationTargetInfo,message:"Invalid productName: ".concat(s)});const{taskId:u}=await(async(e,n)=>{var t,i;const a=xe(bn);let r;const{input:{appKey:o}}=e;try{r=await Ge({query:a,variables:e},n)}catch(d){throw hn(o,"trigger",d)}const{data:s,errors:l,extensions:c}=r;var u;if(null!=s&&null!==(t=s.marketplaceStore)&&void 0!==t&&null!==(i=t.installApp)&&void 0!==i&&i.taskId)return null==s||null===(u=s.marketplaceStore)||void 0===u?void 0:u.installApp;throw Nn(o,"trigger",l,c)})({input:{appKey:i,target:{cloudId:l,product:c}}},t);return(async e=>{var n,t;const{appKey:i,taskId:a,gqlGatewayUrl:r}=e,o=xe(In),s={taskId:a},l={retries:ie(5,5e3),retryDelay:5e3,accept:async e=>{var n,t;const{data:i}=await e.json(),a=null==i||null===(n=i.marketplaceStore)||void 0===n||null===(t=n.installAppStatus)||void 0===t?void 0:t.status;if(a===fn.Xfr.Pending||a===fn.Xfr.InProgress)throw new Error("App install still in progress")}};let c;try{c=await Ge({query:o,variables:s,options:l},r)}catch(v){throw hn(i,"poll",v,a)}const{data:u,errors:d,extensions:p}=c;var m;if((null==u||null===(n=u.marketplaceStore)||void 0===n||null===(t=n.installAppStatus)||void 0===t?void 0:t.status)===fn.Xfr.Success)return null==u||null===(m=u.marketplaceStore)||void 0===m?void 0:m.installAppStatus;throw Nn(i,"poll",d,p,a)})({appKey:i,taskId:u,gqlGatewayUrl:t})},En=wn=(e,n)=>"".concat(e,"/rest/plugins/1.0/").concat(n,"-key"),On=e=>"".concat(e,"/rest/plugins/1.0/");async function Fn(e,n){try{const t=await(0,o.ru)(wn(e,n),En(e)),i=await t.json();return{links:{postInstall:i.links["post-install"],configure:i.links.configure,manage:i.links.manage},key:i.key}}catch(t){throw new(y("InstalledAppFromUPMError"))({source:t,appKey:n})}}const Tn=async(e,n,t)=>{try{const i=((e,n)=>{const t={retries:ie(.16,3e3),retryDelay:3e3,credentials:me(e),accept:e=>e.json().then((e=>{if(void 0===e.licenseDetails)throw g.ZP.info("upmApi","Retries failed for fetching license details of the app : ".concat(e.appKey," ")),new Error("Error in fetching license details")}))},i=En(e);return n?t:i})(e,t),a=await((e,n,t)=>(0,o.ru)(((e,n),t).then((e=>e.json())))(e,n,i);return a}catch(i){throw new(y("InstalledMarketplacePluginUPMError"))({source:i,appKey:n})}},xn=e=>(0,o.ru)(((e),En(e)).then((e=>e.json()));async function Cn(e){const n=await(0,o.ru)(On(e),En(e));return(await n.json()).plugins.filter((e=>(e.userInstalled||e.usesLicensing)&&"Embedded Marketplace"!==e.name)).map((e=>({links:{postInstall:e.links["post-install"],configure:e.links.configure,manage:e.links.manage},key:e.key})))}var Pn;async function _n(e,n,t,i,a){const r=null==a?void 0:a.retryForLicenseDetails,[o,s,l]=await Promise.all([on(e.key,i),Fn(t,e.key),Tn(t,e.key,r)]);return ce(o,s,l,n).fold((e=>Promise.reject(e)),(e=>e))}async function Dn(e,n,t){const[i,a]=await Promise.all([Cn(n),xn(n)]),r=await Promise.all(function(e,n,t){return n.map((e=>on(e.key,t).catch((e=>e))))}(0,i,t)),o=ve(a.plugins,(e=>e.key)),s=ve(r,();return i.reduce(((n,t)=>{const i=o[t.key],a=s[t.key];return a&&i?[...n,...ce(a,t,i,e).map(().getOrElse([])]:(console.error("Marketplace API or Installed Marketplace API didn't return a response for ".concat(t.key)),n)}),[])}let jn=(a((Pn=class{constructor(e){(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"upmBaseUrl",void 0),this.config=e,this.upmBaseUrl=this.config.baseUrl}async getInstalledAddons(e){const n=Dn(ze(this.config),this.upmBaseUrl,this.config.gqlGatewayUrl),t=un(this.config,e.flags);return Promise.allSettled([n,t]).then((e=>{let[n,t]=e;const i=[..."fulfilled"===n.status?n.value:[],..."fulfilled"===t.status?t.value:[]];return{values:i,totalCount:i.length,pageSize:i.length}}))}sync installAddon(e,n,t){const{billing:i}=n,a="free"!==e.paymentModel,c=i.system===f.f.CCP,u=(null==t?void 0:t.useStoreBffForInstallation)&&c&&a,d=c&&a,p={requestAppProvisioning:async t=>{try{return await(i={cloudId:(0,r.parse)(n.contextId).cloudId,appKey:t,productName:n.productName},(0,o.ru)("/gateway/api/marketplace/internal/demand/app-provision",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>e.provisioningRequestId)))}catch(a){let n={};if("string"==typeof a.error)n.error=a.error;else try{n=await a.error.json()}catch(s){g.ZP.error("install-app-parse-error","requestAppProvisioning Failed to parse error",{error:a})}let t="AppProvisioningError";throw"APP_REACTIVATION_NOT_SUPPORTED"===n.error&&(t="APP_REACTIVATION_NOT_SUPPORTED"),new v({addon:e.identifier,code:t,message:"Provisioning of app failed for ".concat(e.identifier.toString()),source:a})}var i},getTokenFromUPM:async()=>{try{return await async function(e){const n={retries:2,retryDelay:3e3,credentials:me(e)};return(await(0,o.ru)("".concat(e,"/rest/plugins/1.0/upm-token"),W({method:"HEAD"},n))).headers.get("upm-token")}(this.upmBaseUrl)}catch(n){throw new v({addon:e.identifier,code:"UPMTokenFetchError",message:"Fetching token from UPM failed for ".concat(e.identifier.toString()),source:n})}},postInstallToUPM:async(n,t,i,a)=>{try{return await async function(e,n,t,i,a){const r={method:"POST",credentials:me(e),headers:new window.Headers({"content-type":"application/vnd.atl.plugins.remote.install+json"})};return(await(0,o.ru)("".concat(e,"/rest/plugins/1.0/apps/install-subscribe?").concat(J.stringify({addonKey:t,token:n,provisioningRequestId:i,cmtEligible:a})),r)).json()}(this.upmBaseUrl,n,t,i,a)}catch(r){let n={};if("string"==typeof r.error)n.errorMessage=r.error;else try{n=await r.error.json()}catch(s){g.ZP.error("install-app-parse-error","postInstallToUPM Failed to parse error",{error:r})}throw new v({addon:e.identifier,code:n.subCode||n.contentType||"UnknownUPMInstallSubscribeError",message:n.errorMessage,source:r})}},waitForPendingUPMTask:async n=>{try{return await async function(e,n,t){const i={retries:ie(4.33,t),retryDelay:t,credentials:me(e),accept:e=>e.json().then((e=>{var n;return null!==(n=e.status)&&void 0!==n&&n.done?Promise.resolve():Promise.reject(new Error("Request pending"))}))},a=await(0,o.ru)(n,i),r=await a.json(),s=a.headers.get("content-type");return-1!==(null==s?void 0:s.indexOf("application/vnd.atl.plugins.install.complete+json"))?r:Promise.reject(W(W({},r.status),{},{contentTypeHeader:s}))}(this.upmBaseUrl,n.links.self,(null==t?void 0:t.pollIntervalForConnectApps)||n.pingAfter)}catch(i){throw new v({addon:e.identifier,code:i.subCode||"UPMInstallPostError",message:i.errorMessage||"Failed while polling for app installation status for ".concat(e.identifier.toString()),source:i})}},getInstalledAddonInternal:async n=>{try{const e=ze(this.config),i={retryForLicenseDetails:a&&(null==t?void 0:t.retryForLicenseDetails)};return await _n(n,e,this.upmBaseUrl,this.config.gqlGatewayUrl,i)}catch(i){throw new v({addon:e.identifier,code:"FetchAddonInternalError",message:"Failed while constructing a app object post installation success for ".concat(e.identifier.toString()),source:i})}},provisionAndInstallAddonByARIViaCCP:async(t,i,a)=>{try{var r,c,u,d,m;const v=await p.requestAppProvisioning(t.appKey),f=await sn(t,i,a),g=a?null===(r=f.data.extensionContexts)||void 0===r||null===(c=r[0].installations.nodes)||void 0===c?void 0:c[0]:null===(u=f.data)||void 0===u||null===(d=u.ecosystem)||void 0===d||null===(m=d.appInstallationsByContext.nodes)||void 0===m?void 0:m[0];if(g){var y;await async function(e){const n={retries:l(4,5e3),retryDelay:5e3,accept:e=>e.json().then((e=>{var n;return(null===(n=e.payload.data.resourcePackages)||void 0===n?void 0:n[0].action.status)===s.IN_PROGRESS?Promise.reject(new Error("Request pending")):Promise.resolve()}))},t=await(0,o.ru)("/gateway/api/marketplace/internal/demand/app-provision/status/".concat(e),n);if((await t.json()).payload.data.resourcePackages[0].action.status===s.SUCCESS)return Promise.resolve(s.SUCCESS);throw new Error("Polling for app provision status failed for provisioningRequestId: ".concat(e))}(v);const e=null===(y=f.data.extensionContexts)||void 0===y?void 0:y[0],n=i.product===k.N.Jira?e.adminPageExtensions:e.globalSettingsExtensions;return $e(i.product,i.baseUrl,g,n.filter((e=>e.installationId===g.id)))}return yn(t,this.config,{addon:e.identifier,contextId:n.contextId,relayState:n.relayState,enableDeprecatedInstallationsGQL:a},v)}catch(f){throw new v({addon:e.identifier,code:(null==f?void 0:f.code)||"AppProvisioningError",message:"Provisioning of app failed for ".concat(t.appKey),source:f})}}};return te(e.identifier)((async e=>{const{key:t}=e;if(u)await An({appKey:t,installationTargetInfo:n},{gqlGatewayUrl:this.config.gqlGatewayUrl});else{const e=d?await p.requestAppProvisioning(t):void 0,i=await p.getTokenFromUPM(),a=await p.postInstallToUPM(i,t,e,n.cmtEligible);await p.waitForPendingUPMTask(a)}return p.getInstalledAddonInternal(e)}),(async function(n){throw new v({message:"Marketplace SPI function [InstallAddon with InstallByUrl] not implemented",addon:e.identifier,code:"MethodNotImplementedError"})}),(async i=>{const a={addon:e.identifier,contextId:n.contextId,relayState:n.relayState,enableReactivateForgeAppFromEmcee:null==t?void 0:t.enableReactivateForgeAppFromEmcee,enableDeprecatedInstallationsGQL:null==t?void 0:t.enableDeprecatedInstallationsGQL};return u?(await An({appKey:i.appKey,installationTargetInfo:n},{gqlGatewayUrl:this.config.gqlGatewayUrl}),vn(i,this.config,a)):d?p.provisionAndInstallAddonByARIViaCCP(i,this.config,null==t?void 0:t.enableDeprecatedInstallationsGQL):yn(i,this.config,a)}))}upgradeAddon(e){return Promise.reject()}uninstallAddonFromSite(e){return Promise.reject()}createContainerToken(e){return Promise.reject()}getInstalledAddon(e){const n=ze(this.config),{gqlGatewayUrl:t}=this.config;return te(e.addon)((async i=>_n(i,n,this.upmBaseUrl,t,e.flags).catch((e=>{if(404===e.source.status)return{status:"NOT_FOUND",error:e};throw e}))),(e=>Promise.reject("Marketplace SPI function [getInstalledAddon with InstallByUrl] not implemented")),(async n=>{try{return await ln(n,this.config,e.flags)}catch(t){return{status:"NOT_FOUND",error:{meta:{appKey:n.appKey}}}}}))}getInstallableAddon(e){const{hostCmtEnabled:n=!1}=e;return te(e.addon)((async e=>{const t=await((e,n,t)=>(0,o.ru)(((e,n,t)=>"".concat(e,"/rest/plugins/1.0/available/").concat(n,"-key").concat(t?"?".concat(t):""))(e,n,J.stringify({hostCmtEnabled:t})),En(e)).then((e=>e.json())))(this.upmBaseUrl,e.key,n);return((t)?(e=>({details:oe(e),preinstalled:e.preinstalled,scopes:(e.permissions||[]).map((e=>e.key)),metadata:void 0,eligibleForFreeOnSandbox:e.eligibleForFreeOnSandbox,cloudMigrationTrial:se(e)}))(t):Promise.reject({upmAvailableApp:t,message:"Requested add-on is not installable"})}),(e=>Promise.reject("Marketplace SPI function [getInstallableAddon with InstallByUrl] not implemented")),(async e=>(e=>{var n;const t=null===(n=e.version)||void 0===n?void 0:n.deployment;return{details:{key:e.appKey,name:e.name,description:e.tagline||"",metadata:{},ecosystemCloudAppId:t.cloudAppId},preinstalled:!1,scopes:t.scopes.map((e=>e.capability)),metadata:void 0,eligibleForFreeOnSandbox:!1,cloudMigrationTrial:{isEligible:!1}}})(await on(e.appKey,this.config.gqlGatewayUrl))))}rotateContainerToken(e){return Promise.reject()}}).prototype,"getInstalledAddons",[X],Object.getOwnPropertyDescriptor(Pn.prototype,"getInstalledAddons"),Pn.prototype),a(Pn.prototype,"uninstallAddon",[X,ee],Object.getOwnPropertyDescriptor(Pn.prototype,"uninstallAddon"),Pn.prototype),a(Pn.prototype,"installAddon",[X,function(e,n,t){const i=t.value;return t.value=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const a=i.apply(this,n);return r=a,Promise.resolve(r)==r?a.then((e=>e)).catch((e=>{throw e.toJSON?e.toJSON():e})):a;var r},t}],Object.getOwnPropertyDescriptor(Pn.prototype,"installAddon"),Pn.prototype),a(Pn.prototype,"upgradeAddon",[X,ee],Object.getOwnPropertyDescriptor(Pn.prototype,"upgradeAddon"),Pn.prototype),a(Pn.prototype,"uninstallAddonFromSite",[X,ee],Object.getOwnPropertyDescriptor(Pn.prototype,"uninstallAddonFromSite"),Pn.prototype),a(Pn.prototype,"createContainerToken",[X,ee],Object.getOwnPropertyDescriptor(Pn.prototype,"createContainerToken"),Pn.prototype),a(Pn.prototype,"getInstalledAddon",[X],Object.getOwnPropertyDescriptor(Pn.prototype,"getInstalledAddon"),Pn.prototype),a(Pn.prototype,"getInstallableAddon",[X],Object.getOwnPropertyDescriptor(Pn.prototype,"getInstallableAddon"),Pn.prototype),a(Pn.prototype,"rotateContainerToken",[X,ee],Object.getOwnPropertyDescriptor(Pn.prototype,"rotateContainerToken"),Pn.prototype),Pn);var Rn;let Un=(a((Rn=class{constructor(e){(0,i.Z)(this,"config",void 0),this.config=e}etContextInstallationForInstalledAddonContext(e){return Promise.reject()}getContextInstallationsForInstalledAddon(e){return Promise.reject()}getContext(e){return Promise.reject()}getContexts(e){return Promise.reject()}}).prototype,"getMostRecentContext",[X,ee],Object.getOwnPropertyDescriptor(Rn.prototype,"getMostRecentContext"),Rn.prototype),a(Rn.prototype,"getContextInstallationForInstalledAddonContext",[X,ee],Object.getOwnPropertyDescriptor(Rn.prototype,"getContextInstallationForInstalledAddonContext"),Rn.prototype),a(Rn.prototype,"getContextInstallationsForInstalledAddon",[X,ee],Object.getOwnPropertyDescriptor(Rn.prototype,"getContextInstallationsForInstalledAddon"),Rn.prototype),a(Rn.prototype,"getContext",[X,ee],Object.getOwnPropertyDescriptor(Rn.prototype,"getContext"),Rn.prototype),a(Rn.prototype,"getContexts",[X,ee],Object.getOwnPropertyDescriptor(Rn.prototype,"getContexts"),Rn.prototype),Rn);var Ln;function Vn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function qn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Vn(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}let Bn=(a((Ln=class{constructor(e){(0,i.Z)(this,"config",void 0),this.config=e}getHostInfo(){return Promise.resolve(qn(qn({supports:Z,product:this.config.product},this.config.subproduct?{subproduct:this.config.subproduct}:{}),{},{baseUrl:this.config.baseUrl,globalContext:(e=this.config,{name:"jira"===e.product?"Jira":"Confluence",type:"application",id:"ari:cloud:".concat(e.product,":").concat(e.cloudId,":/"),orgId:e.orgId,workspaceAri:"ari:cloud:".concat(e.product,":").concat(e.cloudId,":workspace/").concat(e.activationId)})}));var e}async getHostPricingInfo(){const e=await(n=this.config.baseUrl,(0,o.ru)((e=>"".concat(e,"/rest/plugins/1.0/host-status"))(n),En(n)).then((e=>e.json())));var n;return{instanceType:e.instanceType,billingSystem:e.billingSystem,evaluation:e.hostLicense.evaluation,currentLicensedUsers:e.upmLicensedHostUsers,renewalType:e.hostLicense.autoRenewal?"auto":"quote",maximumLicensedUsers:e.hostLicense.maximumNumberOfUsers,billingCurrency:e.billingCurrency,subscriptionPeriod:Object.prototype.hasOwnProperty.call(e.hostLicense,"subscriptionAnnual")&&e.hostLicense.subscriptionAnnual?"annual":"monthly",hostCmtEnabled:Boolean(e.hostCmtEnabled)}}}).prototype,"getHostInfo",[X],Object.getOwnPropertyDescriptor(Ln.prototype,"getHostInfo"),Ln.prototype),a(Ln.prototype,"getHostPricingInfo",[X],Object.getOwnPropertyDescriptor(Ln.prototype,"getHostPricingInfo"),Ln.prototype),Ln);const Mn=Object.freeze({JIRA:"jira",CONFLUENCE:"confluence"}),$n=Object.freeze({CAN_INSTALL_FREE_AND_PAID:"CAN_INSTALL_FREE_AND_PAID",CAN_INSTALL_FREE_ONLY:"CAN_INSTALL_FREE_ONLY",CANNOT_INSTALL:"CANNOT_INSTALL"}),Gn=Object.freeze({HIPCHAT:"hipchat.cloud",JIRA_CORE:"jira-core.ondemand",JIRA_SERVICE_DESK:"jira-servicedesk.ondemand",JIRA_SOFTWARE:"jira-software.ondemand",CONFLUENCE:"confluence.ondemand"}),Kn=Object.freeze({UNAUTHORIZED:"UNAUTHORIZED_ERROR",UNKNOWN:"UNKNOWN_ERROR"}),Hn=Object.freeze({ADD_PRODUCTS:"add-products",ADD_PRODUCT:"addProduct",INVITE_USERS:"invite-users",MANAGE:"manage",WRITE:"write"}),Qn={},Jn=e=>"undefined"!=typeof self&&self&&e in self?self:"undefined"!=typeof window&&window&&e in window?window:void 0!==t.g&&t.g&&e in t.g?t.g:"undefined"!=typeof globalThis&&globalThis?globalThis:void 0,Zn=["Headers","Request","Response","ReadableStream","fetch","AbortController","FormData"];for(const Rt of Zn)Object.defineProperty(Qn,Rt,{get(){const e=Jn(Rt),n=e&&e[Rt];return"function"==typeof n?n.bind(e):n}});const zn=Yn="function"==typeof Qn.AbortController,Wn="function"==typeof Qn.ReadableStream,Xn=(...e)=>{let n={};for(const t of e)if(Array.isArray(t))Array.isArray(n)||(n=[]),n=[...n,...t];else if(zn(t))for(let[e,i]of Object.entries(t))zn(i)&&Reflect.has(n,e)&&(i=Xn(n[e],i)),n={...n,[e]:i};return n},et=["get","post","put","patch","head","delete"],nt={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},tt=[413,429,503],it=Symbol("stop");class at extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}onst ot=st=lt={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:tt},ct=(e={})=>{if("number"==typeof e)return{...lt,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...lt,...e,afterStatusCodes:tt}},ut=2147483647;class dt{constructor(e,n={}){if(this._retryCount=0,this._input=e,this._options={credentials:this._input.credentials||"same-origin",...n,hooks:Xn({beforeRequest:[],beforeRetry:[],afterResponse:[]},n.hooks),method:st(n.method||this._input.method),prefixUrl:String(n.prefixUrl||""),retry:ct(n.retry),throwHttpErrors:!1!==n.throwHttpErrors,timeout:void 0===n.timeout?1e4:n.timeout},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof Qn.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Yn&&(this.abortController=new Qn.AbortController,this._options.signal&&(this._options.signal.addEventListener("abort",(),this._options.signal=this.abortController.signal)),this.request=new Qn.Request(this._input,this._options),this._options.searchParams){const e=new URL(this.request.url);e.search=new URLSearchParams(this._options.searchParams),this.request=new Qn.Request(new Qn.Request(e,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new Qn.Request(this.request,{body:this._options.body}));const t=async()=>{if(this._options.timeout>ut)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await ot(1);let e=await this._fetch();for(const n of this._options.hooks.afterResponse){const t=await n(this.request,this._options,e.clone());t instanceof Qn.Response&&(e=t)}if(!e.ok&&this._options.throwHttpErrors)throw new at(e);if(this._options.onDownloadProgress){if("function"!=typeof this._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!Wn)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(e.clone(),this._options.onDownloadProgress)}return e},i=this._options.retry.methods.includes(this.request.method.toLowerCase())?this._retry(t):t();for(const[a,r]of Object.entries(nt))i[a]=async()=>{this.request.headers.set("accept",this.request.headers.get("accept")||r);const e=(await i).clone();return"json"===a&&204===e.status?"":e[a]()};return i}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof rt)){if(e instanceof at){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const n=e.response.headers.get("Retry-After");if(n&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=Number(n);return Number.isNaN(e)?e=Date.parse(n)-Date.now():e*=1e3,void 0!==this._options.retry.maxRetryAfter&&e>this._options.retry.maxRetryAfter?0:e}if(413===e.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}async _retry(e){try{return await e()}catch(n){const t=Math.min(this._calculateRetryDelay(n),ut);if(0!==t&&this._retryCount>0){await ot(t);for(const e of this._options.hooks.beforeRetry){if(await e(this.request,this._options,n,this._retryCount)===it)return}return this._retry(e)}if(this._options.throwHttpErrors)throw n}}async _fetch(){for(const i of this._options.hooks.beforeRequest){const e=await i(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?Qn.fetch(this.request):(e=Qn.fetch(this.request),n=this._options.timeout,t=this.abortController,new Promise(((i,a)=>{const r=setTimeout((()=>{t&&t.abort(),a(new rt)}),n);e.then(i).catch(a).then(()})));var e,n,t}_stream(e,n){const t=Number(e.headers.get("content-length"))||0;let i=0;return new Qn.Response(new Qn.ReadableStream({start(a){const r=e.body.getReader();n&&n({percent:0,transferredBytes:0,totalBytes:t},new Uint8Array),async function e(){const{done:o,value:s}=await r.read();if(o)a.close();else{if(n){i+=s.byteLength;n({percent:0===t?0:i/t,transferredBytes:i,totalBytes:t},s)}a.enqueue(s),e()}}()}}))}}const pt=(...e)=>{for(const n of e)if((!zn(n)||Array.isArray(n))&&void 0!==n)throw new TypeError("The `options` argument must be an object");return Xn({},...e)},mt=e=>{const n=for(const t of et)n[t]=return n.create=n.extend=n.stop=it,n},vt=mt();async function yt(e){var n;let t;if(e.response)try{t=await e.response.json()}catch(i){try{t=await e.response.text()}catch(a){console.error("parseError: failed to parse response",e)}}return{status:null===(n=e.response)||void 0===n?void 0:n.status,response:t}}function ft(e){let{name:n,code:t,response:i}=e;return new(m(n))({code:t,message:"".concat(n," error"),meta:{response:i}})}const kt=Object.freeze({[Mn.JIRA]:[Gn.JIRA_CORE,Gn.JIRA_SERVICE_DESK,Gn.JIRA_SOFTWARE],[Mn.CONFLUENCE]:[Gn.CONFLUENCE]}),gt=e=>{const n=new Set;return e.forEach((e=>{const t=((e);t&&n.add(t)})),[...n]};function ht(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Nt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ht(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ht(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function It(e){return{async appInstallPermission(n,t){const i=e.permitted(Hn.MANAGE,"ari:cloud:".concat(n,"::site/").concat(t)),a=e.permitted(Hn.MANAGE,"ari:cloud:platform::site/".concat(t)),[r,o]=await Promise.all([i,a]);return o.permitted?$n.CAN_INSTALL_FREE_AND_PAID:r.permitted?$n.CAN_INSTALL_FREE_ONLY:$n.CANNOT_INSTALL},async availableSites(n){const t=n.flatMap((e=>kt[e])).filter(();const{sites:i}=await e.availableSites(t);return{sites:i.map(()}}}}const bt=class{constructor(e){(0,i.Z)(this,"_api",void 0),(0,i.Z)(this,"marketplace",It(this)),this._api=vt.create({prefixUrl:e})}async availableSites(e){try{return await this._api.post("available-sites",{json:{products:e}}).json()}catch(n){const{status:e,response:t}=await yt(n);throw ft({name:"AvailableSitesError",code:401===e?Kn.UNAUTHORIZED:Kn.UNKNOWN,response:t})}}async permitted(e,n){try{return await this._api.post("permissions/permitted",{json:{permissionId:e,resourceId:n}}).json()}catch(t){const{status:e,response:n}=await yt(t);throw ft({name:"PermittedError",code:401===e?Kn.UNAUTHORIZED:Kn.UNKNOWN,response:n})}}};var St;const At=e=>e?{allowed:!0}:{allowed:!1,message:"No addon manage permission",key:"noAddonManagePermission"};let Et=(a((St=class{constructor(e){(0,i.Z)(this,"config",void 0),this.config=e}async hasInstallPermission(e){return(n=e.addon,(e,t)=>n.details.ecosystemCloudAppId?t(n):e(n))((async e=>{const n=await async function(e,n){const t=await(0,o.he)(((e,n)=>"".concat(e,"/rest/plugins/1.0/apps/install-subscribe/permission?addonKey=").concat(n))(e,n),En(e));return t.status>=200&&t.status<=299?Promise.resolve(!0):401===t.status||403===t.status?Promise.resolve(!1):Promise.reject("".concat(t.status,": ").concat(t.statusText))}(this.config.baseUrl,e.details.key);return At(n)}),(async e=>{const{product:n,gqlGatewayUrl:t}=this.config;if("jira"===n||"confluence"===n){const i="local"===this.config.environment?"".concat(this.config.baseUrl,"/gateway/api"):"/gateway/api",[a,r]=await Promise.all([on(e.details.key,t),new bt(i).marketplace.appInstallPermission(n,this.config.cloudId)]),o=((e,n,t)=>{const{product:i}=e;var a;return("jira"===i||"confluence"===i)&&((null===(a=n.version)||void 0===a?void 0:a.paymentModel)===fn.zBC.Free?t!==$n.CANNOT_INSTALL:t===$n.CAN_INSTALL_FREE_AND_PAID)})(this.config,a,r);return At(o)}return At(!1)}));var n}hasUninstallPermission(e){return Promise.reject()}}).prototype,"hasInstallPermission",[X],Object.getOwnPropertyDescriptor(St.prototype,"hasInstallPermission"),St.prototype),a(St.prototype,"hasUninstallPermission",[X,ee],Object.getOwnPropertyDescriptor(St.prototype,"hasUninstallPermission"),St.prototype),St);var wt,Ot=t(960691),Ft=t.n(Ot);const Tt=(e,n)=>"".concat(e,"/gateway/api/marketplace").concat(n);let xt=(a((wt=class{constructor(e){(0,i.Z)(this,"config",void 0),(0,i.Z)(this,"siteBaseUrl",void 0),this.config=e,this.siteBaseUrl=new(Ft())(this.config.baseUrl).origin}async fetchOk(e,n){let t;try{t=await(0,o.ru)(Tt(this.siteBaseUrl,e),n);const i=await t.json();return Promise.resolve(i)}catch(i){return t&&t.ok?Promise.resolve({status:t.status}):Promise.reject(i)}}async fetch).prototype,"fetchOk",[X],Object.getOwnPropertyDescriptor(wt.prototype,"fetchOk"),wt.prototype),a(wt.prototype,"fetch",[X],Object.getOwnPropertyDescriptor(wt.prototype,"fetch"),wt.prototype),wt);var Ct;let Pt=(a((Ct=class{sync getCurrentUser(){const e=await(0,o.ru)("/gateway/api/me"),n=await e.json();return{atlassianAccountId:n.account_id,name:n.name,avatarUrl:n.picture,email:n.email}}revokeUserGrant(e){return Promise.reject()}}).prototype,"getCurrentUser",[X],Object.getOwnPropertyDescriptor(Ct.prototype,"getCurrentUser"),Ct.prototype),a(Ct.prototype,"revokeUserGrant",[X,ee],Object.getOwnPropertyDescriptor(Ct.prototype,"revokeUserGrant"),Ct.prototype),Ct);function _t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Dt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_t(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_t(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const jt=e=>Dt(Dt(Dt(Dt(Dt(Dt({},(e=>ne(new jn(e)))(e)),(e=>ne(new Bn(e)))(e)),(e=>ne(new Un(e)))(e)),(e=>ne(new Et(e)))(e)),(e=>ne(new xt(e)))(e)),((e))},695152:function(e,n,t){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,n,t,i){void 0===i&&(i=t);var a=Object.getOwnPropertyDescriptor(n,t);a&&!("get"in a?!n.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,i,a)}:function(e,n,t,i){void 0===i&&(i=t),e[i]=n[t]}),a=this&&this.__setModuleDefault||(Object.create?,r=this&&this.__importStar||Object.defineProperty(n,"__esModule",{value:!0}),n.AppFamilyAriImpl=void 0;const o=r(t(564637)),s=t(491968),l=t(403746),c=t(94031),u=";v=",d="[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}",p=[(0,l.pattern)(new RegExp(`^${d}$`,"i"))],m=[(0,l.pattern)(new RegExp(`^(${d}|static)$`,"i"))];function v(e){if(!e)return;const n=e.trim();return 0!==n.length?n:void 0}class y{et appId(){return this.json.appId}get environmentId(){return this.json.environmentId}get versionId(){return this.json.versionId}get version(){return this.json.version}get extensionGroupId(){return this.json.extensionGroupId}oJSON(){return this.json}static parse(e){const{resourceOwner:n,resourceType:t,resourceId:i}=e;if(n!==o.resourceOwner)throw new s.NotAppFamilyAriError(e,`resourceOwner (${n}) must be ${o.resourceOwner}`);if(!t||!o.isAppFamilyResourceType(t))throw new s.NotAppFamilyAriError(e,`resourceType must be one of ${o.appFamilyResourceTypes}`);if(!i)throw new s.NotAppFamilyAriError(e,"resourceId is must be provided");const a=i.indexOf(u);if(a>0&&i.lastIndexOf(u)>a)throw new s.NotAppFamilyAriError(e,"can only include one version suffix");const[r,l]=i.split(u),c=r.split("/").map(v);if(c.length>4)throw new s.NotAppFamilyAriError(e,`no path segments can be added after extensionKey ${c.slice(4)}`);const[d,p,m,f]=c,k=t===o.appEnvironmentVersionResourceType?m:void 0;if(!d)throw new s.NotAppFamilyAriError(e,"appId must be included");const g=m||(t===o.extensionGroupResourceType||t===o.extensionResourceType?"static":void 0);if(!(t!==o.extensionResourceType||p&&m&&f))throw new s.NotAppFamilyAriError(e,`environmentId, extensionGroupId, extensionKey must all be provided for resourceType ${o.extensionResourceType}`);if(!(t!==o.extensionGroupResourceType||p&&g&&!f))throw new s.NotAppFamilyAriError(e,`environmentId, extensionGroupId must all be provided for resourceType ${o.extensionGroupResourceType}`);if(t===o.environmentResourceType&&(!p||m||f))throw new s.NotAppFamilyAriError(e,`environmentId must be provided for resourceType ${o.environmentResourceType}`);if(!(t!==o.appEnvironmentVersionResourceType||p&&k&&!f))throw new s.NotAppFamilyAriError(e,`environmentId and versionID must be provided for resourceType ${o.appEnvironmentVersionResourceType}`);if(t===o.appResourceType&&(p||m||f))throw new s.NotAppFamilyAriError(e,`environmentId must be provided for resourceType ${o.environmentResourceType}`);return t===o.appEnvironmentVersionResourceType?new y({appId:d,environmentId:p,versionId:k}):new y({appId:d,environmentId:p,versionId:k,extensionGroupId:g,extensionKey:f,version:l})}asAppAri(){return this.returnIf((()=>this.isAppAri()),"app")}asAppEnvironmentAri(){return this.returnIf((()=>this.isAppEnvironmentAri()),"environment")}asAppEnvironmentVersionAri(){return this.returnIf((()=>this.isAppEnvironmentVersionAri()),"app-environment-version")}asExtensionGroupAri(){return this.returnIf((()=>this.isExtensionGroupAri()),"extension-group")}asExtensionAri(){return this.returnIf((,"extension")}AppEnvironmentVersionAri(){return this.isAtLeastAppEnvironmentVersionAri}sExtensionAri(){return this.isAtLeastExtensionGroupAri&&void 0!==this.extensionKey}returnIf(e,n){if(!e())throw new s.NotExpectedAppFamilyAriTypeError(n,this);return this}get isAtLeastAppEnvironmentAri(){return void 0!==this.environmentId}lidate(){const e=[(0,l.validateField)(this,"environmentId",p),(0,l.validateField)(this,"appId",p),(0,l.validateField)(this,"extensionGroupId",m),(0,l.validateField)(this,"versionId",p)].filter((e=>e));if(e.length>0)throw c.InvalidAriError.withConstraintViolations(this.toString(),e)}toAri(){const e=o.resourceOwner,{versionId:n}=this.toJSON(),{appId:t,environmentId:i,extensionGroupId:a,extensionKey:r,version:s}=this.toJSON();function l(e){const n=e.join("/");return s?`${n}${u}${s}`:n}return this.isExtensionAri()?new c.ResourceIdentifier({resourceOwner:e,resourceType:o.extensionResourceType,resourceId:l([t,i,a,r])}):this.isExtensionGroupAri()?new c.ResourceIdentifier({resourceOwner:e,resourceType:o.extensionGroupResourceType,resourceId:l([t,i,a])}):this.isAppEnvironmentVersionAri()?new c.ResourceIdentifier({resourceOwner:e,resourceType:o.appEnvironmentVersionResourceType,resourceId:[t,i,n].join("/")}):this.isAppEnvironmentAri()?new c.ResourceIdentifier({resourceOwner:e,resourceType:o.environmentResourceType,resourceId:l([t,i])}):new c.ResourceIdentifier({resourceOwner:e,resourceType:o.appResourceType,resourceId:t})}n.AppFamilyAriImpl=y},388266:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createAppAri=n.parseAppAri=void 0;const i=t(695152);n.parseAppAri=function(e){return i.AppFamilyAriImpl.parse(e)},n.createAppAri=,564637:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.appFamilyResourceTypes=n.isAppFamilyResourceType=n.extensionResourceType=n.extensionGroupResourceType=n.appEnvironmentVersionResourceType=n.environmentResourceType=n.appResourceType=n.resourceOwner=void 0,n.resourceOwner="ecosystem",n.appResourceType="app",n.environmentResourceType="environment",n.appEnvironmentVersionResourceType="app-environment-version",n.extensionGroupResourceType="extension-group",n.extensionResourceType="extension";n.isAppFamilyResourceType=function(e){switch(e){case n.resourceOwner:case n.appResourceType:case n.environmentResourceType:case n.appEnvironmentVersionResourceType:case n.extensionGroupResourceType:case n.extensionResourceType:return!0}return!1},n.appFamilyResourceTypes=[n.appResourceType,n.environmentResourceType,n.appEnvironmentVersionResourceType,n.extensionGroupResourceType,n.extensionResourceType]},491968:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NotExpectedAppFamilyAriTypeError=n.NotAppFamilyAriError=n.AppFamilyAriError=void 0;.AppFamilyAriError=t;n.NotAppFamilyAriError=class extends t{constructor(e,n){super(`ari is not a valid App family ari: ${e.toString()} as ${n}`),this.reason=n}};n.NotExpectedAppFamilyAriTypeError=class extends t{constructor(e,n,t){super(`App family ari (${n.toString()}) is not of expected type: ${e}`,t),this.cause=t}}},403746:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateField=n.pattern=n.lengthBetween=n.ConstraintViolation=n.GeneralValidationError=n.RegexConstraint=n.LengthConstraint=void 0;const i=t(639891);class a{Valid(e){return!e||e.length>=this.min&&e.length<=this.max}}n.LengthConstraint=a;class r{constructor(e){this.regex=e}.RegexConstraint=r;n.GeneralValidationError=class o{oString(){const e=this.constraints.map(().join("\n");return`'${this.value}' is not a valid value for ${this.fieldName} as it violates the following constraints:\n${e}`}}n.ConstraintViolation=o,n.lengthBetween=n.pattern=n.validateField=function(e,n,t){const a=e[n],r=t.map((e=>e.isValid(a)?void 0:e)).filter(i.isDefined);return r.length>0?new o(n,a,r):void 0}},376894:function(e,n,t){"use strict";var i=this&&this.__createBinding||(Object.create?,a=this&&this.__exportStar||Object.defineProperty(n,"__esModule",{value:!0}),n.parseEncoded=n.parse=void 0;const r=t(94031);a(t(491968),n),a(t(388266),n),a(t(94031),n),n.parse=function(e){return r.ResourceIdentifier.parse(e)},n.parseEncoded=,94031:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ResourceIdentifier=n.InvalidAriError=void 0;const i=t(403746);class a extends Error{constructor(e,n){super(`Invalid ari string: ${e}${n?". "+n:""}`),this.ariString=e,Object.setPrototypeOf(this,a.prototype)}static withConstraintViolations(e,n){return new a(e,n.map(().join("\n"))}}function r(e,n){return e===n||void 0===e}n.InvalidAriError=a;const o=(0,i.pattern)(/^[a-z][a-z.-]*$/),s=(0,i.pattern)(/^[a-z][a-z.-]*$/i),l=[(0,i.lengthBetween)(3,255),o],c=[(0,i.lengthBetween)(3,255),s],u=[(0,i.lengthBetween)(3,255)],d="site",p=/[\w-._~:@#]/.source,m=[(0,i.pattern)(new RegExp(`^${p}+(/${p}*)*(;v=${p}*)*$`))];class v{get cloudId(){return this.resourceType===d?this.internalCloudId?this.internalCloudId:this.resourceId:this.internalCloudId}constructor(e){const{resourceId:n,resourceOwner:t,resourceType:i,cloudId:a}=function(e){const{resourceId:n,resourceOwner:t,cloudId:i}=e;return!n&&i?{resourceOwner:t,resourceType:d,resourceId:i}:e}(e);this.resourceOwner=t,this.internalCloudId=a,this.resourceType=i,this.resourceId=n,this.validate()}static parse(e){if(!e)throw new a(e);const n=new RegExp(/^ari:cloud:([^:/]+):([^:/]*):([^:/]*)\/(.*)$/).exec(e);if(!n||5!==n.length)throw new a(e);const t=n.map((e=>e&&e.length>0?e:void 0)),i=t[1];if(!i)throw new a(e);return new v({resourceOwner:i,cloudId:t[2],resourceType:t[3],resourceId:t[4]})}oString(){if(!this.ariString){const e=this.resourceType===d&&this.internalCloudId?this.internalCloudId:this.resourceId||"",n=this.resourceType||"",t=this.resourceType===d?"":this.internalCloudId||"";this.ariString=`ari:cloud:${this.resourceOwner}:${t}:${n}/${e}`}return this.ariString}quals(e){return e instanceof v&&this.resourceOwner===e.resourceOwner&&this.cloudId===e.cloudId&&this.resourceType===e.resourceType&&this.resourceId===e.resourceId}atches(e){return r(this.resourceOwner,e.resourceOwner)&&r(this.cloudId,e.cloudId)&&(this.resourceType===d&&!!e.resourceType||r(this.resourceType,e.resourceType))&&(this.resourceType===d&&!!e.resourceType||r(this.resourceId,e.resourceId))}validateSiteWide(){const{resourceType:e,cloudId:n}=this;if(e===d&&!n)return new i.GeneralValidationError("site wide ARIs must have a cloudId")}validate(){const e=[(0,i.validateField)(this,"resourceOwner",l),(0,i.validateField)(this,"resourceType",c),(0,i.validateField)(this,"resourceId",m),(0,i.validateField)(this,"cloudId",u),this.validateSiteWide()].filter(();if(e.length>0)throw a.withConstraintViolations(this.toString(),e);if(void 0!==this.resourceId&&void 0===this.resourceType)throw new a(this.toString(),"The resource type must be specified if the resource id is defined.")}urlEncode(){return encodeURIComponent(this.toString())}n.ResourceIdentifier=v},293637:(e,n,t)=>{"use strict";t.d(n,{he:()=>l,ru:()=>u});var i=t(199009),a=t(872342);const r=["retries","accept","retryDelay"];function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=()=>Promise.resolve(),{retries:i=0,accept:o=t,retryDelay:s=0}=n,l=(0,a.Z)(n,r);return new Promise(((n,t)=>{!function i(a){fetch(e,l).then((e=>o(e.clone()).then(())).catch((n=>{a>0?setTimeout((,s):t({url:e,error:n,status:n.status||"unknown"})}))}(i)}))}const c=e=>!0===e.ok?Promise.resolve():Promise.reject(e);function u(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(e,s(s({},n),{},{accept:e=>c(e).then((()=>{const t=n.accept;return(t||()(e)}))})).catch(()}},993623:844493:(e,n,t)=>{"use strict";t.d(n,{N:()=>i});Object.freeze({JIRA:"JIRA",CONFLUENCE:"CONFLUENCE",CRUCIBLE:"CRUCIBLE",BAMBOO:"BAMBOO",CROWD:"CROWD",BITBUCKET:"BITBUCKET",OPSGENIE:"OPSGENIE",STATUS_PAGE:"STATUS_PAGE",TOWNSQUARE:"TOWNSQUARE"});const i=Object.freeze({Jira:"jira",Confluence:"confluence",Crucible:"crucible",Bamboo:"bamboo",Crowd:"crowd",Bitbucket:"bitbucket",Opsgenie:"opsgenie",StatusPage:"status_page",Townsquare:"townsquare",Hipchat:"hipchat"})},523102:(e,n,t)=>{"use strict";t.d(n,{G2U:()=>d,SOV:()=>c,Tvx:()=>u,W2w:()=>o,X7w:()=>l,Xfr:()=>y,ZSh:()=>m,_OM:()=>r,gXG:()=>s,nSC:()=>p,oIV:()=>v,r8X:()=>i,ywY:()=>f,zBC:()=>a});let i=function(e){return e.Cloud="CLOUD",e.DataCenter="DATA_CENTER",e.Server="SERVER",e}({}),a=function(e){return e.Free="FREE",e.PaidViaAtlassian="PAID_VIA_ATLASSIAN",e.PaidViaPartner="PAID_VIA_PARTNER",e}({}),r=function(e){return e.Private="PRIVATE",e.Public="PUBLIC",e}({}),o=function(e){return e.Annual="ANNUAL",e.Monthly="MONTHLY",e}({}),s=function(e){return e.InProduct="IN_PRODUCT",e.Website="WEBSITE",e}({}),l=function(e){return e.Annual="ANNUAL",e.OneTime="ONE_TIME",e}({}),c={}),u={}),d=function(e){return e.Graduated="GRADUATED",e.Volume="VOLUME",e}({}),p=function(e){return e.Block="BLOCK",e.PerUnit="PER_UNIT",e}({}),m=function(e){return e.RemoteAgentTiered="REMOTE_AGENT_TIERED",e.UserTiered="USER_TIERED",e}({}),v={}),y={}),f={})},445210:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});const i={unexpectedCase:},279675:(e,n,t)=>{"use strict";t.d(n,{_d:()=>d});var i=t(856232),a=t.n(i);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a().parse("".concat(e,"/plugins/{appKey}/overview"))},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a().parse(e+"/plugins/{appKey}/reviews")},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a().parse(e+"/plugins/{appKey}/icon")},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a().parse("".concat(e,"/apps/{appId}/{slug}?hosting={hosting}&tab={tab}"))},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a().parse(e+"/vendors/{id}/{slug}")},u={expand:,d=e=>{let{adminHubBaseUrl:n,mpacBaseUrl:t,mpacCdnBaseUrl:i,macBaseUrl:d,wacBaseUrl:p,atlassianCommunityBaseUrl:m}=e;return{adminHub:a().parse(n),marketplaceTermsOfUse:a().parse(p+"/licensing/marketplace/termsofuse/"),appDetails:r(t),appPricingDetails:a().parse(t+"/plugins/{appKey}/pricing"),mediaFile:a().parse(i+"/files/{imageId}"),mediaImage:a().parse(i+"/files/{imageId}?fileType=image&mode=full-fit"),appHostingDetails:a().parse(t+"/plugins/{appKey}/{hosting}/overview"),appIcon:s(t),appRating:o(t),appManageLink:a().parse(t+"/manage/apps/{appId}"),appShortLink:a().parse(t+"/{appId}"),managePrivateListing:a().parse(t+"/manage/apps/{appId}/private-listings"),partnerDetails:c(t),appCreateCommunityQuestionLink:a().parse("".concat(m,"/t5/custom/page/page-id/create-post-step-1?add-tags=atlassian-marketplace,addon-{appKey},{hosting}")),appVersionHistory:a().parse(t+"/apps/{appId}/{appSlug}/version-history"),artifactDownload:a().parse(t+"/download/apps/{appId}/version/{buildNumber}"),descriptorDownload:a().parse(t+"/download/apps/{appId}/version/{buildNumber}/descriptor"),appListingCanonical:a().parse("".concat(t,"/apps/{appId}/{slug}")),appListing:l(t),trialLicenseActivation:d?a().parse(d+"/addon/try/{hamsAppKey}"):u,licensePurchase:p?a().parse(p+"/purchase/addon/{hamsAppKey}"):u}}},257978:(e,n,t)=>{"use strict";t.d(n,{ZP:()=>u});var i=t(199009);let a=null;function r(){var e;let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=null!==(e=a)&&void 0!==e?e:window.__MARKETPLACE_SENTRY_INSTANCE__;return!t&&n&&console.error("Called sentry method without first calling `init`"),t}nst l={mode:"sentry"},c=(e,n,t,i)=>{const a=i||{},{mode:o,context:c={}}=l;var u;"console"===o?console[e](s(s({},a),{},{location:n,message:t,context:c})):null===(u=r())||void 0===u||u.withScope((i=>{var o;const{tags:s={}}=a;i.clear(),Object.entries(s).forEach(();const l=(()=>{if(window.location.href.includes("emcee"))return window.location.hash.split("#")[1]})();l&&i.setTag("url",l),i.setTag("location",n),i.setTag("structuredLog","true"),i.setExtra("eventData",a),null===(o=r())||void 0===o||o.captureMessage("".concat(n,": ").concat(t),{info:"info",warn:"warning",error:"error"}[e]),console[e]("".concat(n,": ").concat(t))}))},u={info:(e,n,t)=>{c("info",e,n,t)},warn:(e,n,t)=>{c("warn",e,n,t)},error:},867534:]);
//# sourceMappingURL=63133.gJw7YuTxLP.js.map