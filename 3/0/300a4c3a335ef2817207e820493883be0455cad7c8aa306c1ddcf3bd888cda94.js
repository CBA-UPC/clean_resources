/*! 20240204-49-RELEASE */

(e=>{const t=/^(\/react)((\.|-)(.)+)*\.js/;class r{constructor(e){this.trcManager=e}static getInstance(e){return r.instance||(r.instance=new r(e)),r.instance}static detectSpa(){const e=r.detectAngular(),t=r.detectAngularJs(),n=r.detectReact(),a=r.detectVue();return{isSpa:t||e||n||a,isAngularJs:t,isAngular:e,isReact:n,isVue:a}}sendSpaData(){if(!TRC.SpaDetector.dataSent){const e=r.detectSpa();this.sendGenericEvent(e)}}sendGenericEvent(e){if(!this.checkSessionAndUser())return;const t={data:JSON.stringify(e),type:"spa-measurements"};this.trcManager.sendEvent("pubs-generic",{d:JSON.stringify(t)},{}),TRC.SpaDetector.dataSent=!0}checkSessionAndUser(){const e=this.trcManager.response&&this.trcManager.response.trc?this.trcManager.response.trc["session-data"]:null;return TRC.pageManager.getUserId()&&this.trcManager.getSessionData(e)}static detectReact(){return!!(e.React||document.querySelector("[data-react], [data-reactroot], [data-reactid]")||r());function r(){const e=document.querySelectorAll('script[src*="/react"]');if(!e)return!1;const r=Array.prototype.slice.call(e).map(e=>e.src).map(e=>e.substring(e.indexOf("/react"))).filter(e=>t.test(e));return r.length>0}}static detectVue(){return!!(e.Vue||document.querySelector("[v-for], [v-bind], [v-once], [v-on]")||document.querySelector('script[src*="vue.js"]'))}static detectAngularJs(){return!!(e.angular||document.querySelector(".ng-binding, [ng-app], [data-ng-app], [ng-controller], [data-ng-controller], [ng-repeat], [data-ng-repeat]")||document.querySelector('script[src*="angular.js"], script[src*="angular.min.js"]'))}static detectAngular(){return!!(e.getAllAngularRootElements||document.querySelector("[ng-version]")&&document.querySelector("[ng-version]").getAttribute("ng-version")[0]>=2)}}TRC.SpaDetector=r})(window);(;null!==t;){const e=window.getComputedStyle(t).getPropertyValue("position");if("fixed"===e||"sticky"===e)return!0;t=t.parentElement}return!1}}}static getAreaYBorders(e,t){const n=ArticleAndFeedAreaScanner.getAbsoluteTopPosition(e)+e.offsetHeight,r=ArticleAndFeedAreaScanner.getAbsoluteTopPosition(t);return{areaTopY:n,areaBottomY:r}}static getElementYBorders(e){const t=ArticleAndFeedAreaScanner.getAbsoluteTopPosition(e);return{elTopY:t,elBottomY:t+e.offsetHeight}}static isInArea({areaTopY:e,areaBottomY:t},{elTopY:n,elBottomY:r}){return n>=e&&n<=t||r>=e&&r<=t}static getArticleInfo(){const e=TRC.ArticleDetection&&TRC.ArticleDetection.detectArticle&&TRC.ArticleDetection.detectArticle();return e&&e.articleElement?e:{}}static getAbsoluteTopPosition(e){return e.getBoundingClientRect().top+window.pageYOffset}static calculateDistance(e,t){const n=ArticleAndFeedAreaScanner.getAbsoluteTopPosition(e);return n-t}static getClosestContainer(e,t){const n=ArticleAndFeedAreaScanner.getAbsoluteTopPosition(e)+e.offsetHeight;return t.map(e=>({container:e,distance:ArticleAndFeedAreaScanner.calculateDistance(e,n)})).filter(e=>e.distance>=0).sort((e,t)=>e.distance-t.distance).shift()}}ArticleAndFeedAreaScanner.containerTypesMap={share_container:{selector:'[class*="share"], [class*="sharing"], [class*="social"]',isReported:!1,containers:null},tags_container:{selector:'[class*="tag"], [class*="label"]',isReported:!1,containers:null}},ArticleAndFeedAreaScanner.containerTypesMapKeys=Object.keys(ArticleAndFeedAreaScanner.containerTypesMap),TRC.ArticleAndFeedAreaScanner=ArticleAndFeedAreaScanner;