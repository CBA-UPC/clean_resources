!this,(function(){return(()=>{"use strict";var e,n={d:o:,t={};n.d(t,{default:);class o{}e=o,o.GDPR="GDPR",o.LGPD="LGPD",o.LIST=[e.GDPR,e.LGPD];.LOG="[Privacidade] [Cookie Banner]";class a{static log(e,...n){console.log(`${r.LOG} ${e}`,...n)}static info(e,...n){console.info(`${r.LOG} ${e}`,...n)}static warn(e,...n){console.warn(`${r.LOG} ${e}`,...n)}static error(e,...n){console.error(`${r.LOG} ${e}`,...n)}static debug(e,...n){console.debug(`${r.LOG} ${e}`,...n)}}function i(e){return!!e.serviceID||(a.error("A configura√ß√£o ServiceID √© obrigat√≥ria"),!1)}class c extends Error{constructor(){super(`${r.LOG} Configura√ß√£o inv√°lida`)}}const s={dataDomainScript:"09da7b3a-fdeb-49b1-b409-a6ffa268adf9",scriptSource:"https://cdn.cookielaw.org/consent/09da7b3a-fdeb-49b1-b409-a6ffa268adf9/otSDKStub.js"},d=e=>{const n=`; ${document.cookie}`.split(`; ${e}=`);if(2===n.length)return n.pop().split(";").shift()};var u=function(e,n,t,o){return new(t||(t=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}s((o=o.apply(e,n||[])).next())}))};function OptanonWrapper(){function e(){return function(){const{ConsentIntegrationData:e}=window.OneTrust.GetDomainData(),n="BR"===e.consentPayload.dsDataElements.Country;return console.debug("[CookieBanner][isUserFromBrazil] usu√°rio √© do Brasil:",n),n}()?"LGPD":"GDPR"}console.debug("[CookieBanner][OptanonWrapper] Setup do banner"),console.debug("[CookieBanner][setupConsentChangeEvent] criando listener de evento de consentimento onetrust OnConsentChanged"),window.OneTrust.OnConsentChanged((function(n){console.debug("[CookieBanner][OneTrust.OnConsentChanged] evento recebido",n.detail);const t=n.detail,o={strictly:t.includes("C0001"),performance:t.includes("C0002"),functional:t.includes("C0003"),advertising:t.includes("C0004")},r=new CustomEvent("privacidade.cookie-banner.user-consent",{cancelable:!1,detail:o});if(console.debug("[CookieBanner][OneTrust.OnConsentChanged] disparando evento broadcast de consentimento",r),window.dispatchEvent(r),!Boolean(window.OneTrust.dataSubjectParams))return void console.error(new Error("[CookieBanner][OneTrust.OnConsentChanged] usu√°rio n√£o identificado"));const a=(e=>{const n=`; ${document.cookie}`.split(`; ${e}=`);if(2===n.length)return n.pop().split(";").shift()})("GLBID");a?window.fetch("https://globoid-privacidade-cookie-banner-backend.globo.com/consents",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({glbid:a,serviceId:Replace.SERVICE_ID,event:"consent-grant",type:"cookies",jurisdiction:e(),fields:o})}).then((function(e){if(console.debug("[CookieBanner][BFF][POST] Http Success",e),!e.ok)throw new Error(`Wrong status code: ${e.status}`)Error",e)})):console.error(new Error("[CookieBanner][OneTrust.OnConsentChanged] GLBID n√£o encontrado"next())}))};class p{constructor(e,n){if(this.options=e,this.dom=n,this.glbid=d("GLBID"),this.dataSubjectParamsFromCookie=d("CB_Subject"),!i(e))throw new c}show(){return l(this,void 0,void 0,(function*(){let e,n="var OneTrust = {};";if(this.glbid){if(e=this.dataSubjectParamsFromCookie?JSON.parse(atob(this.dataSubjectParamsFromCookie)):null,!e){e=yield(t=this.glbid,u(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`https://globoid-privacidade-cookie-banner-backend.globo.com/consents?glbid=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`BFF return error code: ${e.status}`);const n=yield e.json();return{id:n.id,token:n.token,isAnonymous:!1}}catch(e){return void console.log(e)}})));((e,n)=>{let t=new Date;t.setFullYear(t.getFullYear()+1);const o=`${e}=${n}; expires=${t.toUTCString()}; domain=globo.com;`;document.cookie=o})("CB_Subject",btoa(JSON.stringify(e)))}e&&(n=`var OneTrust = {\n                    dataSubjectParams: { id: '${e.id}', isAnonymous: ${e.isAnonymous}, token: '${e.token}' } \n                };`)}var t;const o=this.dom.createScriptElement(s.scriptSource,!1);o.setAttribute("data-domain-script",s.dataDomainScript),o.setAttribute("charset","UTF-8");const r=this.dom.createScriptElement("",!1),i=this.dom.createScriptElement("",!1),c=this.dom.createScriptElement("",!1),d=this.dom.createScriptElement("",!1);r.innerHTML=`dataLayer = [{\n            'serviceId': ${this.options.serviceID}\n          }];`,i.innerHTML="\x3c!-- Google Tag Manager --\x3e\n(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-WZD6C8J');\n\x3c!-- End Google Tag Manager --\x3e",c.innerHTML=n,d.innerHTML=function GetOptanonWrapper(e){return OptanonWrapper.toString().replace("Replace.SERVICE_ID",e.toString())}(this.options.serviceID),document.head.appendChild(r),document.head.appendChild(i),document.body.appendChild(c),document.body.appendChild(o),document.body.appendChild(d);try{yield new Promise(((e,n)=ror=e=>n(°gina"),e()}}))}catch(e){throw a.error("Banner OneTrust Erro ao carregar script"),e}return Promise.resolve()}))}}class f{createScriptElement(e,n=!0){const t=document.createElement("script");return e&&(t.src=e),t.type="text/javascript",t.async=n,t}cre,n.href=e,n}}const m={Banner:class{static create(e){if(!i(e))throw new c;const n=new f;return a.debug(`[Factory] Construindo banner a partir da configura√ß√£o (${e})`),new p(e,n)}}};return t=t.default})()}));