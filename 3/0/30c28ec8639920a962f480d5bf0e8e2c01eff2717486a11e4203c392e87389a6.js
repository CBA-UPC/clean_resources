"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1324],{51324:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return FetchTopCitiesData}});var topDest,_async_to_generator=__webpack_require__(29485),tslib_es6=__webpack_require__(62831),ClientApiCallerAsync=__webpack_require__(24820),apiDataToJSON=__webpack_require__(12903),TopDestProviderSlice=__webpack_require__(95617);function getTopDestination(){return topDest||(topDest={Hotel:[],Flight:[],DomTrain:[]})}var FetchTopCitiesData=function(type){return function(dispatch,getState){var state=getState(),anyTopCities=!1;if((null==state?void 0:null===(ref=state.topCities)||void 0===ref?void 0:ref.citiesDic)!==void 0){var ref,ref1,topCity=state.topCities.citiesDic[type];if((null==topCity?void 0:topCity.isFromApi)===!0||(null==topCity?void 0:topCity.isLoading)===!0)return;anyTopCities=(null==topCity?void 0:null===(ref1=topCity.data)||void 0===ref1?void 0:ref1.some()===!0}!0!==anyTopCities&&dispatch((0,TopDestProviderSlice.r)().updateStaticData({topDestType:type,data:function(type){switch(type){case"Hotel":return getTopDestination().Hotel;case"Flight":return getTopDestination().Flight;case"DomTrain":return getTopDestination().DomTrain;default:return[]}}(type)})),dispatch((0,TopDestProviderSlice.r)().requestToFetch({topDestType:type})),dispatch,type)}};function _callTopDestinationApiAsync(){return(_callTopDestinationApiAsync=(0,_async_to_generator.Z)(function(dispatch,type){var response;return(0,tslib_es6.__generator)(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,(0,ClientApiCallerAsync.Z)({url:type)})];case 1:if(!(response=_state.sent()).ok)return dispatch((0,TopDestProviderSlice.r)().failedFetch({topDestType:type})),[2];return response.data&&dispatch((0,TopDestProviderSlice.r)().updateData({topDestType:type,data:(0,apiDataToJSON.Z)(response)})),[3,3];case 2:return console.error(_state.sent()),[3,3];case 3:return[2]}})})).apply(this,arguments)}},95617:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return topDestProviderStateSlice},r:);var _swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(23363),_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(73619),store_DynamicReducer_DynamicActionContainer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11245),topDestProviderStateSlice=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_1__.oM)({name:"topCities",initialState:(0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_2__.Z)({},{}),reducers:{updateData:function(state,action){state.citiesDic||(state.citiesDic={}),state.citiesDic[action.payload.topDestType]={data:action.payload.data,isFromApi:!0,isLoading:!1}},failedFetch:function(state,action){state.citiesDic||(state.citiesDic={}),state.citiesDic[action.payload.topDestType]={data:state.citiesDic[action.payload.topDestType].data,isFromApi:!1,isLoading:!1}},updateStaticData:function(state,action){state.citiesDic||(state.citiesDic={}),state.citiesDic[action.payload.topDestType]={data:action.payload.data,isFromApi:!1,isLoading:!1}},requestToFetch:function(state,action){state.citiesDic||(state.citiesDic={}),state.citiesDic[action.payload.topDestType].isFromApi=!1,state.citiesDic[action.payload.topDestType].isLoading=!0}}}),topDestProviderActions=}]);