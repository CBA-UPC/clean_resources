webpackJsonpjwplayer([2],{8:function(e,t,r){var i,a;i=[r(1),r(11),r(2),r(13),r(12)],a=function(e,t,r,i,a){function n(t){if(this._currentTextTrackIndex=-1,t){if(this._textTracks?(this._textTracks=e.reject(this._textTracks,function(e){var t=e._id;if(this.renderNatively&&t&&0===t.indexOf("nativecaptions"))return delete this._tracksById[t],!0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),t.length){var i=0,n=t.length;for(i;i<n;i++){var s=t[i];if(!s._id){if("captions"===s.kind||"metadata"===s.kind){if(s._id="native"+s.kind+i,!s.label&&"captions"===s.kind){var o=a.createLabel(s,this._unknownCount);s.name=o.label,this._unknownCount=o.unknownCount}}else s._id=a.createId(s,this._textTracks.length);if(this._tracksById[s._id])continue;s.inuse=!0}if(s.inuse&&!this._tracksById[s._id])if("metadata"===s.kind)s.mode="hidden",s.oncuechange=D.bind(this),this._tracksById[s._id]=s;else if(R(s.kind)){var l,u=s.mode;if(s.mode="hidden",!s.cues.length&&s.embedded)continue;if(s.mode=u,this._cuesByTrackId[s._id]&&!this._cuesByTrackId[s._id].loaded){for(var d=this._cuesByTrackId[s._id].cues;l=d.shift();)b(this.renderNatively,s,l);s.mode=u,this._cuesByTrackId[s._id].loaded=!0}L.call(this,s)}}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||m.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(r.isEdge()||r.isFF()||r.isSafari())&&(this.addTrackHandler=this.addTrackHandler||T.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function s(e){if(this.renderNatively){var t=e===this._itemTracks;t||i.cancelXhr(this._itemTracks),this._itemTracks=e,e&&(t||(this.disableTextTrack(),w.call(this),this.addTextTracks(e)))}}unction l(t){return this.renderNatively?void(this._textTracks&&(0===t&&e.each(this._textTracks,,this._currentTextTrackIndex!==t-1&&(this.disableTextTrack(),this._currentTextTrackIndex=t-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(t-1))}ion v(){i.cancelXhr(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(_(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),_(this.renderNatively,this.video.textTracks))}function g(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}nction m(){var t=this.video.textTracks,r=e.filter(t,;if(!this._textTracks||I.call(this,r))return void this.setTextTracks(t);for(var i=-1,a=0;a<this._textTracks.length;a++)if("showing"===this._textTracks[a].mode){i=a;break}i!==this._currentTextTrackIndex&&this.setSubtitlesTrack(i+1)}unction E(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var r=e[t];if(!r.kind||R(r.kind)){var a=S.call(this,r);L.call(this,a),r.file&&(r.data=[],i.loadFile(r,this.addVTTCuesToTrack.bind(this,a),C))}}this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}unction b(e,t,i){if(!r.isIE()||!e||!window.TextTrackCue)return void t.addCue(i);var a=new window.TextTrackCue(i.startTime,i.endTime,i.text);t.addCue(a)}function _(t,i){i&&i.length&&e.each(i,function(e){if(!(r.isIE()&&t&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}on O(e,t){var r=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var i,a=this._cachedVTTCues[e._id];switch(r){case"captions":case"subtitles":i=Math.floor(20*t.startTime);var n="_"+t.line,s=Math.floor(20*t.endTime),o=a[i+n]||a[i+1+n]||a[i-1+n];return!(o&&Math.abs(o-s)<=1)&&(a[i+n]=s,!0);case"metadata":var l=t.data?new Uint8Array(t.data).join(""):t.text;return i=t.startTime+l,!a[i]&&(a[i]=t.endTime,!0);default:return!1}}r P={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:A,addTracksListener:f,clearTracks:v,clearCueData:g,disableTextTrack:p,enableTextTrack:y,getSubtitlesTrack:o,removeTracksListener:h,addTextTracks:E,setTextTracks:n,setupSideloadedTracks:s,setSubtitlesTrack:l,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:c,addCaptionsCue:u,addVTTCue:d,addVTTCuesToTrack:k,renderNatively:!1};return P}.apply(t,i),!(void 0!==a&&(e.exports=a))},9:function(e,t){"use strict";bject.defineProperty(t,"__esModule",{value:!0}),t.qualityLevel=r},17:18:19:24:function(e,t,r){var i,a;i=[],a=function(){eturn{endOfRange:e}}.apply(t,i),!(void 0!==a&&(e.exports=a))},30:function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Severity=t.Code=t.Category=t.NetworkError=void 0;var a=r(32);Object.defineProperty(t,"NetworkError",{enumerable:!0,get:function(){return a.NetworkError}});var n=r(17),s=i(n),o=r(18),l=i(o),u=r(19),d=i(u);t.Category=s,t.Code=l,t.Severity=d},31:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.JWError=,32:function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.badStatusMessage=t.networkErrorMessage=t.networkErrorCode=t.NetworkError=void 0;var a=r(17),n=i(a),s=r(18),o=i(s),l=r(19),u=i(l),d=r(31),c=(t.NetworkError=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=c(e,t);return(0,d.JWError)(n.NETWORK,i,u.FATAL,f(i,e,r))},t.networkErrorCode=function(e,t){var r=void 0;return r=e>0?o.BAD_HTTP_STATUS:t&&"http:"===t.substring(0,5)&&"https:"===document.location.protocol?o.BLOCKED_MIXED_CONTENT:o.CROSSDOMAIN_ERROR}),f=t.networkErrorMessage=function(e,t,r){var i="";switch(e){case o.BAD_HTTP_STATUS:i=h(t,r);break;case o.CROSSDOMAIN_ERROR:i="Crossdomain access denied";break;case o.BLOCKED_MIXED_CONTENT:i="Unable to fetch HTTP resource over HTTPS";break;default:i="Unknown Network Error"}return i},h=t.badStatusMessage=,46:function(e,t,r){var i,a;i=[r(2)],a=function(e){return{container:null,volume:function(t){t=e.between(t/100,0,1),this.video.volume=t},mute:resize:function(t,r,i){if(!(t&&r&&this.video.videoWidth&&this.video.videoHeight))return!1;if("uniform"===i){var a=t/r,n=this.video.videoWidth/this.video.videoHeight,s=null;Math.abs(a-n)<.09&&(s="fill"),e.style(this.video,{objectFit:s})}return!1},getContainer:function(){return this.container},setContainer:function(e){this.container=e,e.insertBefore(this.video,e.firstChild)},remove:function(){this.stop(),this.destroy(),this.container===this.video.parentNode&&this.container.removeChild(this.video)},getVideo:function(t,r){var i=r||document.getElementById(t),a=i?i.querySelector("video"):null;return a||(a=document.createElement("video"),e.isMobile()&&a.setAttribute("jw-gesture-required","")),a.className="jw-video jw-reset",this.video=a,a}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},47:function(e,t,r){var i,a;i=[r(3),r(10),r(5),r(1),r(24)],a=function(e,t,r,i,a){var n=256;return{stallCheckTimeout_:-1,lastStalledTime_:NaN,trigger:setState:attachMedia:function(){this.eventsOn_()},detachMedia:stopStallCheck:startStallCheck:function(){this.stopStallCheck(),this.stallCheckTimeout_=setTimeout(this.stalledHandler.bind(this,this.video.currentTime),n)},stalledHandler:function(e){e===this.video.currentTime&&(this.video.paused||this.video.ended||this.state!==r.LOADING&&this.state!==r.ERROR&&(this.seeking||(this.atEdgeOfLiveStream()&&this.setPlaybackRate(1),this.setState(r.STALLED))))},atEdgeOfLiveStream:function(){if(!this.isLive())return!1;var e=2;return a.endOfRange(this.video.buffered)-this.video.currentTime<=e},setAutoplayAttributes:removeAutoplayAttributes:}.apply(t,i),!(void 0!==a&&(e.exports=a))},48:function(e,t,r){var i,a;i=[r(2),r(5)],a=function(e,t){return{seeking:!1,loadedmetadata:function(){var e={duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth},t=this.drmUsed;t&&(e.drm=t),this.trigger("meta",e)},timeupdate:function(){this.stopStallCheck();var e=this.video.videoHeight;e!==this._helperLastVideoHeight&&this.adaptation&&this.adaptation({size:{width:this.video.videoWidth,height:e}}),this._helperLastVideoHeight=e,this.state!==t.STALLED&&this.state!==t.LOADING||this.setState(t.PLAYING),this.startStallCheck();var r=this.getCurrentTime(),i={position:r,duration:this.getDuration()};if(this.getPtsOffset){var a=this.getPtsOffset();a>=0&&(i.metadata={mpegts:a+r})}(this.state===t.PLAYING||this.seeking)&&this.trigger("time",i)},click:volumechange:function(){var e=this.video;this.trigger("volume",{volume:Math.round(100*e.volume)}),this.trigger("mute",{mute:e.muted})},seeked:playing:function(){this.setState(t.PLAYING),this.video.hasAttribute("jw-gesture-required")&&this.video.removeAttribute("jw-gesture-required"),this.trigger("providerFirstFrame")},pause:function(){this.state!==t.COMPLETE&&(this.video.ended||this.video.currentTime!==this.video.duration&&this.setState(t.PAUSED))},progress:function(){var t=this.getDuration();if(!(t<=0||t===1/0)){var r=this.video.buffered;if(r&&0!==r.length){var i=e.between(r.end(r.length-1)/t,0,1);this.trigger("bufferChange",{bufferPercent:100*i,position:this.getCurrentTime(),duration:t})}}},ratechange:ended:function(){this.stopStallCheck(),this._helperLastVideoHeight=0,this.state!==t.IDLE&&this.state!==t.COMPLETE&&this.trigger("complete")},loadeddata:function(){this.renderNatively&&this.setTextTracks(this.video.textTracks),this.video.setAttribute("jw-loaded","data")},error:function(){var e=this.video.error&&this.video.error.code||-1,t={1:"Unknown operation aborted",2:"Unknown network error",3:"Unknown decode error",4:"Source not supported"}[e]||"Unknown";this.trigger("mediaError",{code:e,message:"Error playing file: "+t})}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},76:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=r(182),u=i(l),d=r(167),c=i(d),f=r(165),h=i(f),v=r(168),g=r(163),p=i(g),y=r(164),m=i(y),T=r(170),E=i(T),k=r(9),b=r(166),_=r(1),R=r(48),A=r(5),S=r(4),L=r(2),w=r(16),D=window.VTTCue||window.TextTrackCue,O=function(e){function t(e,r){a(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.bufferFull=!1,i.bufferStallTimeout=1e3,i.currentHlsjsLevel=null,i.currentJwItem=null,i.edgeOfLiveStream=!1,i.staleManifestDurationMultiplier=3e3,i.staleManifestTimeout=null,i.eventHandler=null,i.gestureRequired=M(),i.hlsjs=null,i.hlsjsConfig=null,i.jwConfig=r,i.jwLevels=null,i.lastRecoveryTime=null,i.lastEndSn=null,i.lastPosition=0,i.levelDuration=0,i.live=!1,i.maxRetries=3,i.playerId=e,i.preloaded=!1,i.preloadMetaOnly=!1,i.recoveryInterval=5e3,i.recoveringMediaError=!1,i.recoveringNetworkError=!1,i.renderNatively=x(r.renderCaptionsNatively),i.retryCount=0,i.stale=!1,i.stallTimeout=null,i.state=A.IDLE,i.streamType="VOD",i.supports=t.supports,i.video=i.getVideo(e),i.withCredentials=!1,i.supportsPlaybackRate=!0,i}return s(t,e),o(t,[{key:"initHlsjs",value:function(e){var t=!!(void 0!==this.jwConfig.withCredentials?this.jwConfig.withCredentials:e.withCredentials);if(!this.hlsjs||this.withCredentials!==t){this.video=this.getVideo(this.playerId,this.container),this.restoreVideoProperties(),this.setContainer(this.container),this.withCredentials=t,this.stopStallTimeout(),this.stale=!1;var r=!e.stereomode;this.hlsjsConfig=(0,p["default"])(this.withCredentials,this.jwConfig.aestoken,this.renderNatively,r),this.hlsjs=new u["default"](this.hlsjsConfig),this.eventHandler=new h["default"](this.video,this.createVideoListeners(),this.hlsjs,this.createHlsjsListeners())}}},{key:"init",value:function(e){if(this.video&&this.video.textTracks.length&&(this.saveVideoProperties(),this.remove()),this.initHlsjs(e),"none"!==e.preload&&this.preload(e),this.video.textTracks.length){var t=this.video.textTracks[0];t&&t.textTrack1&&(this.video.textTracks[0].inuse=!0)}e.tracks&&e.tracks.length&&this.setupSideloadedTracks(e.tracks)}},{key:"load",value:function(e,t){if(this.initHlsjs(e),t||this.setState(A.LOADING),this.gestureRequired&&this.triggerBufferFull(),this.preloaded)return this.preloadMetaOnly&&(C("startLoad"),this.hlsjs.startLoad()),void this.resetPreload();C("load",e),this.currentJwItem=e,this.eventsOn_(),this.hlsjs.attachMedia(this.video),this.hlsjs.nextLevel=-1;var r=e.starttime||-1;r<-1&&(r=this.lastPosition),this.hlsjs.config.startPosition=r,this.hlsjs.loadSource(e.sources[0].file)}},{key:"preload",value:function(e){this.preloaded||(C("preload",e),this.preloadMetaOnly="auto"!==e.preload,this.load(e,!0),this.preloaded=!0)}},{key:"play",value:function(){var e=this,t=this.video.play();t&&t["catch"]&&t.then(["catch"](function(t){P(t),e.gestureRequired&&t&&"NotAllowedError"===t.name&&e.pause()})}},{key:"pause",value:,{key:"stop",value:function(){this.video.pause(),this.clearTracks(),this.hlsjs&&(this.eventsOff_(),this.hlsjs.stopLoad())}},{key:"seek",value:function(e){var t=this.video.duration;if(t===1/0)return void P("Returned early from seek","Duration",t);this.stopStallTimeout();var r=e>=0?e:e+t;this.trigger(S.JWPLAYER_MEDIA_SEEK,{position:this.getCurrentTime(),offset:r});var i=this.getDuration();0!==i&&i!==1/0&&(this.seeking=!0,this.video.currentTime=r,this.trigger("time",{duration:i,position:this.getCurrentTime()}))}},{key:"getCurrentQuality",value:function(){var e=0;return this.hlsjs&&!this.hlsjs.autoLevelEnabled&&(e=(0,v.toJwLevel)(this.hlsjs.manualLevel,this.jwLevels)),e}},{key:"getQualityLevels",value:function(){return _.map(this.jwLevels,}},{key:"getCurrentAudioTrack",value:function(){return _.isNumber(this.currentAudioTrackIndex)?this.currentAudioTrackIndex:-1}},{key:"getAudioTracks",value:,{key:"getCurrentTime",value:function(){var e=this.video.currentTime;return this.live&&"DVR"===this.streamType&&(e-=this.video.duration),e}},{key:"getDuration",value:function(){var e=this.currentJwItem.minDvrWindow,t=this.levelDuration,r=this.video.duration;return this.live?L.isDvr(t,e)?(r=-t,this.streamType="DVR"):(r=1/0,this.streamType="LIVE"):this.streamType="VOD",r}},{key:"getCurrentHlsjsLevel",value:,{key:"getName",value:function(){return I()}},{key:"setCurrentQuality",value:function(e){if(!(e<0)){var t=this.hlsjs.levels,r=(0,v.toHlsjsLevel)(e,this.jwLevels);this.hlsjs.nextLevel=r,this.trigger(S.JWPLAYER_MEDIA_LEVEL_CHANGED,{levels:this.jwLevels,currentQuality:e}),this.jwConfig.qualityLabel=this.jwLevels[e].label,C("Setting level to ",r,t[Math.max(r,0)],this.jwLevels[e])}}},{key:"setCurrentAudioTrack",value:function(e){var t=this.getCurrentHlsjsLevel(),r=(0,v.toJwLevel)(t,this.jwLevels);if(this.jwLevels[r]){var i=this.jwLevels[r].audioGroupId;_.size(this.audioTracksMap)&&(this.audioTracks=this.audioTracksMap[i],_.isNumber(e)&&_.size(this.audioTracks)&&this.audioTracks[e]&&this.currentAudioTrackIndex!==e&&(this.trigger(S.JWPLAYER_AUDIO_TRACKS,{tracks:this.audioTracks,currentTrack:e}),null!==this.currentAudioTrackIndex&&this.audioTracks[e].hlsjsIndex!==this.hlsjs.audioTrack&&this.trigger(S.JWPLAYER_AUDIO_TRACK_CHANGED,{tracks:this.audioTracks,currentTrack:e}),this.currentAudioTrackIndex=e,this.hlsjs.audioTrack=this.audioTracks[e].hlsjsIndex,C("Setting audio track to",this.audioTracks[e])))}}},{key:"updateAudioTrack",value:function(e){if(this.hlsjs.audioTracks.length){var t=this.currentAudioTrackIndex;_.isNumber(t)?this.audioTracks[t].hlsjsIndex!==this.hlsjs.audioTrack&&(this.currentAudioTrackIndex=null):t=(0,v.getDefaultJwTrackIndex)(this.audioTracksMap[e.attrs.AUDIO]),this.setCurrentAudioTrack(t)}}},{key:"setCurrentSubtitleTrack",value:function(e){this.hlsjs.subtitleTrack=e}},{key:"setPlaybackRate",value:,{key:"getPlaybackRate",value:function(){return this.video.playbackRate}},{key:"isLive",value:function(){return this.live}},{key:"onAdaptation",value:function(e){var t=this.hlsjs,r=t.levels,i=t.autoLevelEnabled,a=r[e],n=(a?a.width:0)||this.video.videoWidth,s=(a?a.height:0)||this.video.videoHeight,o=a?a.bitrate:0,l=(0,v.toJwLevel)(e,this.jwLevels);this.trigger("visualQuality",{reason:i?"auto":"api",mode:i?"auto":"manual",type:"visualQuality",level:{bitrate:o,index:l,height:s,label:i?"auto":this.jwLevels[l].label,width:n}}),this.triggerMediaType(n,s)}},{key:"triggerMediaType",value:function(e,t){var r="video";e&&t||(r="audio"),C("Media Type",r),this.trigger(S.JWPLAYER_MEDIA_TYPE,{mediaType:r})}},{key:"createVideoListeners",value:function(){var e=this,t={};return _.each(R,function(r,i){"function"==typeof r&&(t[i]=r.bind(e))}),t}},{key:"createHlsjsListeners",value:function(){var e=this,t={};return t[u["default"].Events.MEDIA_ATTACHED]=t[u["default"].Events.MEDIA_DETACHED]=t[u["default"].Events.MANIFEST_LOADED]=function(e,t){C("Manifest loaded",t)},t[u["default"].Events.MANIFEST_PARSED]=function(t,r){C("Manifest parsed",r);var i=r.levels,a=r.firstLevel,n=a,s=0;e.currentHlsjsLevel=null,e.jwLevels=(0,v.formatLevels)(i,e.jwConfig.qualityLabels);var o=_.find(e.jwLevels,function(t){return t.label===e.jwConfig.qualityLabel});o&&o.hlsjsIndex>-1&&(n=o.hlsjsIndex,s=(0,v.toJwLevel)(n,e.jwLevels),e.hlsjs.nextLevel=n),e.hlsjs.startLevel=n,e.preloadMetaOnly||e.hlsjs.startLoad(e.hlsjs.config.startPosition),e.trigger(S.JWPLAYER_MEDIA_LEVELS,{levels:e.jwLevels,currentQuality:s})},t[u["default"].Events.LEVEL_SWITCH]=t[u["default"].Events.LEVEL_LOADED]=t[u["default"].Events.LEVEL_UPDATED]=function(t,r){C("Level updated",r);var i=r.details,a=i.live,n=i.totalduration;e.live=a,e.levelDuration=n},t[u["default"].Events.LEVEL_PTS_UPDATED]=t[u["default"].Events.LEVEL_REMOVED]=function(){e.jwLevels=(0,v.formatLevels)(e.hlsjs.levels,e.jwConfig.qualityLabels),e.trigger(S.JWPLAYER_MEDIA_LEVELS,{levels:e.jwLevels,currentQuality:0})},t[u["default"].Events.FRAG_CHANGED]=function(t,r){C("Frag changed",r);var i=r.frag,a=i.level,n=i.tagList,s=void 0===n?[]:n,o=e.hlsjs.levels,l=o[a];a!==e.currentHlsjsLevel?(C("Level switch complete",a,l),e.currentHlsjsLevel=a,e.onAdaptation(a),e.updateAudioTrack(o[a])):e.video.videoHeight!==e._helperLastVideoHeight&&e.onAdaptation(a);var u=(0,b.findTagInList)(s,"PROGRAM-DATE-TIME");u&&e.trigger("meta",{programDateTime:u[1]})},t[u["default"].Events.FRAG_PARSING_METADATA]=function(t,r){C("Frag metadata parsed",r);var i=e.hlsjs.levels;_.each(r.samples,function(t){var a=t.unit,n=t.data,s=t.pts,o=(0,c["default"])(a||n).cues;if(!o)return void P("No cues found in ID3 byte array");var l=L.parseID3(o);if(!l)return void P("No metadata found in the ID3 cues");var u=i[r.frag.level],d=u&&u.details;if(!d){if(l.PRIV&&"com.apple.streaming.transportStreamTimestamp"in l.PRIV)return;return void P("No matching level found for ID3 metadata")}var f=_.find(u.details.fragments,;if(!f)return void P("No matching fragment found for ID3 level");if(!f.endPTS)return void P("No endPTS found for matching ID3 fragment");var h=Math.max(s,0),v=f.endPTS;if(h<v){var g=new D(h,v,JSON.stringify(l));e.addVTTCue({type:"metadata",cue:g})}})},t[u["default"].Events.BUFFER_APPENDING]=function(e,t){C("Buffer appending",t)},t[u["default"].Events.BUFFER_APPENDED]=t[u["default"].Events.FRAG_BUFFERED]=function(t,r){C("Frag buffered",r),e.triggerBufferFull()},t[u["default"].Events.KEY_LOADING]=function(t,r){C("Key loading",r),e.supports("drm")||e.shutdown("AES decryption not supported with this license")},t[u["default"].Events.SUBTITLE_TRACKS_UPDATED]=this.renderNatively||(t[u["default"].Events.NON_NATIVE_TEXT_TRACKS_FOUND]=t[u["default"].Events.CUES_PARSED]=,t[u["default"].Events.AUDIO_TRACKS_UPDATED]=function(t,r){C("Audio tracks updated");var i=r.audioTracks,a=e.hlsjs.levels,n=e.getCurrentHlsjsLevel();i&&i.length&&(e.currentAudioTrackIndex=null,e.audioTracksMap=(0,v.formatAudioTracks)(i),e.updateAudioTrack(a[n]))},t[u["default"].Events.ERROR]=function(t,r){var i=(0,m["default"])(r),a=r.fatal,n=r.type,s=i.stalling,o=i.recoverable,l=i.message,u=i.doCodecSwap;if(P(i),s&&(e.seeking?e.setState(A.LOADING):e.stallTimeout||e.startStallTimeout()),a){var d=Date.now();o&&e.retryCount<e.maxRetries?d>=e.lastRecoveryTime+e.recoveryInterval?(P("Attempting to recover, retry count:",e.retryCount),"networkError"===n?(e.recoveringNetworkError=!0,e.hlsjs.startLoad()):"mediaError"===n&&(e.recoveringMediaError=!0,u&&e.hlsjs.swapAudioCodec(),e.hlsjs.recoverMediaError()),e.retryCount+=1,e.lastRecoveryTime=d):P("Recovery not attempted - too little time between attempts",d-e.lastRecoveryTime):e.shutdown(l,r)}},t}},{key:"eventsOn_",value:,{key:"eventsOff_",value:function(){C("eventsOff_"),this.disableTextTrack(),this.lastPosition=this.video.currentTime,this.hlsjs.detachMedia(),this.eventHandler.off(),this.resetLifecycleVariables()}},{key:"shutdown",value:,{key:"destroy",value:,{key:"startStallTimeout",value:function(){var e=this;this.stallTimeout||(this.stallTimeout=setTimeout(function(){var t=e.atEdgeOfLiveStream(),r=e.video.ended||t;r?(e.edgeOfLiveStream=!0,e.checkStreamEnded()):(e.setState(A.STALLED),t&&e.setPlaybackRate(1))},this.bufferStallTimeout))}},{key:"stopStallTimeout",value:,{key:"saveVideoProperties",value:function(){this.jwConfig.volume=100*this.video.volume,this.jwConfig.mute=this.video.muted}},{key:"restoreVideoProperties",value:,{key:"resetRecovery",value:,{key:"checkStaleManifest",value:function(e,t,r){var i=this;t&&this.lastEndSn===e?this.staleManifestTimeout||(this.staleManifestTimeout=setTimeout(this.staleManifestDurationMultiplier*r)):(clearTimeout(this.staleManifestTimeout),this.staleManifestTimeout=null,this.stale=!1),this.lastEndSn=e,this.live=t}},{key:"checkStreamEnded",value:,{key:"resetPreload",value:,{key:"resetLifecycleVariables",value:function(){this.resetPreload(),this.resetRecovery(),this.stopStallTimeout(),this.setState(A.IDLE),this.bufferFull=!1,this.currentHlsjsLevel=null,this.currentJwItem=null,this.gestureRequired=M(),this.jwLevels=null,this.lastRecoveryTime=null,this.lastEndSn=null,this.levelDuration=0,this.live=!1,this.recoveringMediaError=!1,this.recoveringNetworkError=!1,this.stale=!1,this.staleManifestTimeout=null,this.streamType="VOD"}},{key:"triggerBufferFull",value:],[{key:"getName",value:,{key:"setEdition",value:]),t}(E["default"]);t["default"]=O;var I=C=function(){if(window.jwplayer.debug){var e;(e=console).info.apply(e,arguments)}},P=x=function(e){return!(!L.isIOS()&&!L.isSafari())||L.isChrome()&&e},M=delete R.error},163:function(e,t,r){"use strict";unction a(e,t,r,i){var a={liveSyncDuration:25,autoStartLoad:!1,maxBufferSize:2e7,
maxMaxBufferLength:90,capLevelToPlayerSize:i,renderNatively:r,debug:o};return(e||t)&&(a=l.extend({},a,n(e,t))),a}function n(e,t){return{xhrSetup:function(r,i){if(e&&(r.withCredentials=!0),t){var a=i.indexOf("?")>0?"&token=":"?token=";r.open("GET",i+a+t,!0)}},fetchSetup:}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=r(169),o=i(s),l=r(1)},164:function(e,t,r){"use strict";function i(e){var t=e.details,r=n.indexOf(s,t)<0,i=n.indexOf(o,t)>=0,a=n.indexOf(l,t)>=0,c=u(e);switch(e.type){case"networkError":c="Cannot load M3U8: "+c;break;case"mediaError":c="Media Error: "+c;break;case"otherError":c="Error: "+c+";"}return d(c,r,i,a,e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var a=r(30),n=r(1),s=["manifestLoadError","manifestParsingError","manifestIncompatibleCodecsError","levelLoadError"],o=["bufferStalledError","bufferSeekOverHole"],l=["fragLoopLoadingError"],u=function(e){var t="";return e&&(t=e.response?(0,a.NetworkError)(e.response.code,e.url,e.response.text).message:e.reason?""+e.reason:""+e.details),t},d=,165:function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(1),s=function(){function e(t,r,a,n){i(this,e),this.video=t,this.hlsjs=a,this.videoListeners=r,this.hlsjsListeners=n}return a(e,[{key:"on",value:function(){var e=this;this.off(),n.each(this.videoListeners,,n.each(this.hlsjsListeners,function(t,r){e.hlsjs.on(r,t)})}},{key:"off",value:function(){var e=this;n.each(this.videoListeners,function(t,r){e.video.removeEventListener(r,t)}),n.each(this.hlsjsListeners,}}]),e}();t["default"]=s},166:function(e,t){"use strict";bject.defineProperty(t,"__esModule",{value:!0}),t.findTagInList=r},167:function(e,t,r){"use strict";function i(e){for(var t=0,r=0,i=10,o=[];t+s<e.length;){var l=n.utf8ArrayToStr(e.subarray(t,t+=3));if("ID3"===l){var u=e.subarray(t,t+=2),d=e.subarray(t,t+=1)[0];if(0!==(128&d)||u[0]<3)break;var c=n.syncSafeInt(e.subarray(t,t+=4));0!==(64&d)&&(i+=n.syncSafeInt(e.subarray(t,t+=4))),o=o.concat(a(e,r+i,c)),t+=c}else{if("3DI"!==l){t-=3;break}t+=7}r=t}return{position:t,cues:o}}function a(e,t,r){for(var i=e.length,a=t,s=[];a<t+r;){if(i-a<8)return s;var o=a;a+=4;var l=n.syncSafeInt(e.subarray(a,a+=4));if(i-a<l+2)return s;var u=e.subarray(a,a+=1)[0];if(u>0)return s;var d=e[a];3!==d&&0!==d||(l-=1,a+=1);var c=e.buffer.slice(o-10,a+l+1);s.push({data:c}),a+=l+1}return s}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var n=r(11),s=9},168:function(e,t,r){"use strict";function i(e,t){var r=u.hasRedundantLevels(e),i=l.map(e,function(e,i){return{label:u.generateLabel(e,t,r),level_id:e.id,hlsjsIndex:i,bitrate:e.bitrate,height:e.height,width:e.width,audioGroupId:e.attrs?e.attrs.AUDIO:void 0}});return i=d(i),i.length>1&&i.unshift({label:"Auto",level_id:"auto",hlsjsIndex:-1}),i}function a(e,t){return Math.max(0,l.indexOf(t,l.find(t,))}unction s(e){var t=l.reduce(e,function(e,t,r){var i=t.groupId;return e[i]=e[i]||[],e[i].push({autoselect:t.autoselect,defaulttrack:t["default"],groupid:i,language:t.lang,name:t.name,hlsjsIndex:r}),e},{});return t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.max(l.indexOf(e,l.find(e,),0)}Object.defineProperty(t,"__esModule",{value:!0}),t.formatLevels=i,t.toJwLevel=a,t.toHlsjsLevel=n,t.formatAudioTracks=s,t.getDefaultJwTrackIndex=o;var l=r(1),u=r(67),d=function(e){return e.sort(function(e,t){var r=void 0;return r=e.height&&t.height?e.height===t.height?t.bitrate-e.bitrate:t.height-e.height:t.bitrate-e.bitrate})}},169:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.debug=function(e){r(console.debug,"debug",e)},t.log=function(e){r(console.log,"log",e)},t.info=function(e){r(console.info,"info",e)},t.warn=function(e){r(console.warn,"warn",e)},t.error=,170:function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=r(46),s=r(47),o=r(8),l=r(3),u=t["default"]=u,u.prototype=a.extend({},l,n,s,o)},182:function(e,t){!function(){var e;return {1:[{}],2:[function(t,r,i){!function(t){var a=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,l={buildAbsoluteURL:parseURL:normalizePath:buildURLFromParts:;"object"==typeof i&&"object"==typeof r?r.exports=l:"function"==typeof e&&e.amd?e([],function(){return l}):"object"==typeof i?i.URLToolkit=l:t.URLToolkit=l}(this)},{}],3:[function(e,t,r){var i=arguments[3],a=arguments[4],n=arguments[5],s=JSON.stringify;t.exports=function(e,t){or(var o,l=Object.keys(n),u=0,d=l.length;u<d;u++){var c=l[u],f=n[c].exports;if(f===e||f&&f["default"]===e){o=c;break}}if(!o){o=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,d=l.length;u<d;u++){var c=l[u];h[c]=c}a[o]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var v=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[o]=o,a[v]=[Function(["require"],"var f = require("+s(o)+");(f.default ? f.default : f)(self);"),g];var p={};r(v);var y="("+i+")({"+Object.keys(p).map(.join(",")+"},{},["+s(v)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,T=new Blob([y],{type:"text/javascript"});if(t&&t.bare)return T;var E=m.createObjectURL(T),k=new Worker(E);return k.objectURL=E,k}},{}],4:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var a=e(5),n=i(a),s=e(8),o=i(s),l=e(9),u=i(l),d=e(10),c=i(d),f=e(56),h=i(f),v=e(7),g=i(v),p=e(6),y=i(p),m=e(47),T=i(m),E=e(15),k=i(E),b=e(14),_=i(b),R=e(13),A=i(R);r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:h["default"],fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:n["default"],bufferController:o["default"],capLevelController:u["default"],fpsController:c["default"],audioStreamController:y["default"],audioTrackController:g["default"],subtitleStreamController:A["default"],subtitleTrackController:_["default"],timelineController:k["default"],cueHandler:T["default"],enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,13:13,14:14,15:15,47:47,5:5,56:56,6:6,7:7,8:8,9:9}],5:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(34),h=i(f),v=e(30),g=e(51),p=e(49),y=i(p),m=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].FRAG_LOADING,u["default"].FRAG_LOADED,u["default"].FRAG_BUFFERED,u["default"].ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.onCheck=r._abandonRulesCheck.bind(r),r}return s(t,e),o(t,[{key:"destroy",value:,{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,i=e.frag.level,a=r.levels[i].details.live,n=r.config,s=void 0,o=void 0;a?(s=n.abrEwmaFastLive,o=n.abrEwmaSlowLive):(s=n.abrEwmaFastVoD,o=n.abrEwmaSlowVoD),this._bwEstimator=new y["default"](r,o,s,n.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,i=r.loader,a=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return g.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var n=i.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var s=performance.now()-n.trequest,o=Math.abs(t.playbackRate);if(s>500*r.duration/o){var l=e.levels,d=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/s),c=l[r.level],f=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,v=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*f/8)),p=t.currentTime,y=(v-n.loaded)/d,m=(h["default"].bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(m<2*r.duration/o&&y>m){var T=void 0,E=void 0;for(E=r.level-1;E>a;E--){var k=l[E].realBitrate?Math.max(l[E].realBitrate,l[E].bitrate):l[E].bitrate;if(T=r.duration*k/(6.4*d),T<m)break}T<y&&(g.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+T.toFixed(1)+"<"+y.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=E,this._bwEstimator.sample(s,n.loaded),i.abort(),this.clearTimer(),e.trigger(u["default"].FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},{key:"onFragLoaded",value:,{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;if(!(t.aborted===!0||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered)){var i=t.tparsed-t.trequest;g.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:,{key:"clearTimer",value:,{key:"_findBestLevel",value:,{key:"nextAutoLevel",get:set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,i=e.config,a=e.minAutoLevel,n=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,u=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,c=(h["default"].bufferInfo(n,l,i.maxBufferHole).end-l)/u,f=this._findBestLevel(s,o,d,a,t,c,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(f>=0)return f;g.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,y=i.abrBandWidthUpFactor;if(0===c){var m=this.bitrateTestDelay;if(m){var T=o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay;v=T-m,g.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),p=y=1}}return f=this._findBestLevel(s,o,d,a,t,c+v,p,y,r),Math.max(f,0)}}]),t}(c["default"]);r["default"]=m},{30:30,31:31,32:32,34:34,49:49,51:51}],6:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(45),u=i(l),d=e(34),c=i(d),f=e(24),h=i(f),v=e(32),g=i(v),p=e(31),y=i(p),m=e(35),T=i(m),E=e(52),k=i(E),b=e(30),_=e(51),R=e(48),A={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},S=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g["default"].MEDIA_ATTACHED,g["default"].MEDIA_DETACHING,g["default"].AUDIO_TRACKS_UPDATED,g["default"].AUDIO_TRACK_SWITCHING,g["default"].AUDIO_TRACK_LOADED,g["default"].KEY_LOADED,g["default"].FRAG_LOADED,g["default"].FRAG_PARSING_INIT_SEGMENT,g["default"].FRAG_PARSING_DATA,g["default"].FRAG_PARSED,g["default"].ERROR,g["default"].BUFFER_CREATED,g["default"].BUFFER_APPENDED,g["default"].BUFFER_FLUSHED,g["default"].INIT_PTS_FOUND));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=A.STOPPED,r.ontick=r.tick.bind(r),r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}return s(t,e),o(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),y["default"].prototype.destroy.call(this),this.state=A.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,r=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[r]=i,this.videoTrackCC=r,_.logger.log("InitPTS for cc:"+r+" found from video track:"+i),this.state===A.WAITING_INIT_PTS&&(_.logger.log("sending pending audio frag to demuxer"),this.state=A.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:,{key:"stopLoad",value:,{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,r,i=this.hls,a=i.config;switch(this.state){case A.ERROR:case A.PAUSED:case A.BUFFER_FLUSHING:break;case A.STARTING:this.state=A.WAITING_TRACK,this.loadedmetadata=!1;break;case A.IDLE:var n=this.tracks;if(!n)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;e=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition?this.nextLoadPosition:0;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=c["default"].bufferInfo(s,e,a.maxBufferHole),l=o.len,d=o.end,f=this.fragPrevious,h=a.maxMaxBufferLength,v=this.audioSwitch,p=this.trackId;if((l<h||v)&&p<n.length){if(r=n[p].details,"undefined"==typeof r){this.state=A.WAITING_TRACK;break}if(!v&&!r.live&&f&&f.sn===r.endSN&&(!this.media.seeking||this.media.duration-d<f.duration/2)){this.hls.trigger(g["default"].BUFFER_EOS,{type:"audio"}),this.state=A.ENDED;break}var y=r.fragments,m=y.length,T=y[0].start,E=y[m-1].start+y[m-1].duration,k=void 0;if(v)if(r.live&&!r.PTSKnown)_.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=e,r.PTSKnown&&e<T){if(!(o.end>T||o.nextStart))return;_.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(r.initSegment&&!r.initSegment.data)k=r.initSegment;else if(d<=T){if(k=y[0],null!==this.videoTrackCC&&k.cc!==this.videoTrackCC&&(k=(0,R.findFragWithCC)(y,this.videoTrackCC)),r.live&&k.loadIdx&&k.loadIdx===this.fragLoadIdx){var S=o.nextStart?o.nextStart:T;return _.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var L=void 0,w=a.maxFragLookUpTolerance,D=f?y[f.sn-y[0].sn+1]:void 0,O=function(e){var t=Math.min(w,e.duration);return e.start+e.duration-t<=d?1:e.start-t>d&&e.start?-1:0};d<E?(d>E-w&&(w=0),L=D&&!O(D)?D:u["default"].search(y,O)):L=y[m-1],L&&(k=L,T=L.start,f&&k.level===f.level&&k.sn===f.sn&&(k.sn<r.endSN?(k=y[k.sn+1-r.startSN],_.logger.log("SN just loaded, load next one: "+k.sn)):k=null))}if(k)if(k.decryptdata&&null!=k.decryptdata.uri&&null==k.decryptdata.key)_.logger.log("Loading key for "+k.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+p),this.state=A.KEY_LOADING,i.trigger(g["default"].KEY_LOADING,{frag:k});else{if(_.logger.log("Loading "+k.sn+", cc: "+k.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+p+", currentTime:"+e+",bufferEnd:"+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,k.loadCounter){k.loadCounter++;var I=a.fragLoadingLoopThreshold;if(k.loadCounter>I&&Math.abs(this.fragLoadIdx-k.loadIdx)<I)return void i.trigger(g["default"].ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:k})}else k.loadCounter=1;k.loadIdx=this.fragLoadIdx,this.fragCurrent=k,this.startFragRequested=!0,isNaN(k.sn)||(this.nextLoadPosition=k.start+k.duration),i.trigger(g["default"].FRAG_LOADING,{frag:k}),this.state=A.FRAG_LOADING}}break;case A.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=A.IDLE);break;case A.FRAG_LOADING_WAITING_RETRY:var C=performance.now(),P=this.retryDate;s=this.media;var x=s&&s.seeking;(!P||C>=P||x)&&(_.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=A.IDLE);break;case A.WAITING_INIT_PTS:if(void 0===this.initPTS[this.videoTrackCC])break;var M=this.waitingFragment;if(M){var N=M.frag.cc;this.videoTrackCC!==N?(_.logger.warn("Waiting fragment CC ("+N+") does not match video track CC ("+this.videoTrackCC+")"),this.waitingFragment=null,this.state=A.IDLE):(this.onFragLoaded(this.waitingFragment),this.state=A.FRAG_LOADING,this.waitingFragment=null)}else this.state=A.IDLE;break;case A.STOPPED:case A.FRAG_LOADING:case A.PARSING:case A.PARSED:case A.ENDED:}}},{key:"onMediaAttached",value:,{key:"onMediaDetaching",value:,{key:"onMediaSeeking",value:,{key:"onMediaEnded",value:,{key:"onAudioTracksUpdated",value:,{key:"onAudioTrackSwitching",value:,{key:"onAudioTrackLoaded",value:function(e){var t=e.details,r=e.id,i=this.tracks[r],a=t.totalduration,n=0;if(_.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=i.details;s&&t.fragments.length>0?(T["default"].mergeDetails(s,t),n=t.fragments[0].start,t.PTSKnown?_.logger.log("live audio playlist sliding:"+n.toFixed(3)):_.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,_.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(this.startPosition===-1){var o=t.startTimeOffset;isNaN(o)?this.startPosition=0:(_.logger.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o)}this.nextLoadPosition=this.startPosition}this.state===A.WAITING_TRACK&&(this.state=A.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===A.KEY_LOADING&&(this.state=A.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===A.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var i=this.tracks[this.trackId],a=i.details,n=a.totalduration,s=t.level,o=t.sn,l=t.cc,u=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===o)this.state=A.IDLE,d.tparsed=d.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(g["default"].FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=A.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new h["default"](this.hls,"audio"));var c=this.initPTS[l],f=a.initSegment?a.initSegment.data:[];if(a.initSegment||void 0!==c){this.pendingBuffering=!0,_.logger.log("Demuxing "+o+" of ["+a.startSN+" ,"+a.endSN+"],track "+s);var v=!1;this.demuxer.push(e.payload,f,u,null,t,n,v,c)}else _.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+o+" of ["+a.startSN+" ,"+a.endSN+"],track "+s),this.waitingFragment=e,this.state=A.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===A.PARSING){var i=e.tracks,a=void 0;if(i.video&&delete i.video,a=i.audio){a.levelCodec="mp4a.40.2",a.id=e.id,this.hls.trigger(g["default"].BUFFER_CODECS,i),_.logger.log("audio track:audio,container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");
var n=a.initSegment;if(n){var s={type:"audio",data:n,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(g["default"].BUFFER_APPENDING,s))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&i.sn===r.sn&&i.level===r.level&&this.state===A.PARSING){var a=this.trackId,n=this.tracks[a],s=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),_.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),T["default"].updateFragPTSDTS(n.details,r.sn,e.startPTS,e.endPTS);var o=this.audioSwitch,l=this.media,u=!1;if(o&&l)if(l.readyState){var d=l.currentTime;_.logger.log("switching audio track : currentTime:"+d),d>=e.startPTS&&(_.logger.log("switching audio track : flushing all audio"),this.state=A.BUFFER_FLUSHING,s.trigger(g["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,s.trigger(g["default"].AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,s.trigger(g["default"].AUDIO_TRACK_SWITCHED,{id:a});var c=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(,!u&&c.length&&(c.forEach(,this.pendingData=[],this.appended=!0)),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===A.PARSING&&(this.stats.tparsed=performance.now(),this.state=A.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:,{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==A.PARSING&&t!==A.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:,{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case b.ErrorDetails.FRAG_LOAD_ERROR:case b.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r,t.loadCounter=0;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);_.logger.warn("audioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.state=A.FRAG_LOADING_WAITING_RETRY}else _.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=A.ERROR}break;case b.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case b.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case b.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case b.ErrorDetails.KEY_LOAD_ERROR:case b.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==A.ERROR&&(this.state=e.fatal?A.ERROR:A.IDLE,_.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case b.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===A.PARSING||this.state===A.PARSED)){var n=this.mediaBuffer,s=this.media.currentTime,o=n&&c["default"].isBuffered(n,s)&&c["default"].isBuffered(n,s+.5);if(o){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,_.logger.warn("audio:reduce max buffer length to "+l.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*l.fragLoadingLoopThreshold),this.state=A.IDLE}else _.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=A.BUFFER_FLUSHING,this.hls.trigger(g["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}}},{key:"onBufferFlushed",value:,{key:"state",set:get:function(){return this._state}}]),t}(y["default"]);r["default"]=S},{24:24,30:30,31:31,32:32,34:34,35:35,45:45,48:48,51:51,52:52}],7:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(51),h=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_LOADED,u["default"].AUDIO_TRACK_LOADED));return r.ticks=0,r.ontick=r.tick.bind(r),r}return s(t,e),o(t,[{key:"destroy",value:function(){c["default"].prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:,{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.audioTracks||[],i=!1;this.tracks=r,this.hls.trigger(u["default"].AUDIO_TRACKS_UPDATED,{audioTracks:r});var a=0;r.forEach(function(e){return e["default"]?(t.audioTrack=a,void(i=!0)):void a++}),i===!1&&r.length&&(f.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:,{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("switching to audioTrack "+e);var t=this.tracks[e],r=this.hls,i=t.type,a=t.url,n={id:e,type:i,url:a};r.trigger(u["default"].AUDIO_TRACK_SWITCH,n),r.trigger(u["default"].AUDIO_TRACK_SWITCHING,n);var s=t.details;!a||void 0!==s&&s.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),r.trigger(u["default"].AUDIO_TRACK_LOADING,{url:a,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("updating audioTrack "+e);var t=this.tracks[e],r=t.url,i=t.details;!r||void 0!==i&&i.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(u["default"].AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:]),t}(c["default"]);r["default"]=h},{31:31,32:32,51:51}],8:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(51),h=e(30),v=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].MEDIA_ATTACHING,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_PARSED,u["default"].BUFFER_RESET,u["default"].BUFFER_APPENDING,u["default"].BUFFER_CODECS,u["default"].BUFFER_EOS,u["default"].BUFFER_FLUSHING,u["default"].LEVEL_PTS_UPDATED,u["default"].LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return s(t,e),o(t,[{key:"destroy",value:function(){c["default"].prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:,{key:"onManifestParsed",value:,{key:"onMediaAttaching",value:,{key:"onMediaDetaching",value:function(){f.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){f.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(u["default"].MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:,{key:"checkPendingTracks",value:,{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:,{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;f.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(0);this.hls.trigger(u["default"].BUFFER_APPENDED,{parent:t,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:,{key:"onBufferReset",value:,{key:"onBufferCodecs",value:,{key:"createSourceBuffers",value:,{key:"onBufferAppending",value:,{key:"onBufferAppendFail",value:,{key:"onBufferEos",value:,{key:"checkEos",value:,{key:"onBufferFlushing",value:,{key:"onLevelUpdated",value:,{key:"updateMediaElementDuration",value:,{key:"doFlush",value:,{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var i=r.shift();try{var a=i.type,n=t[a];n?n.updating?r.unshift(i):(n.ended=!1,this.parent=i.parent,n.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(s){f.logger.error("error while trying to append buffer:"+s.message),r.unshift(i);var o={type:h.ErrorTypes.MEDIA_ERROR,parent:i.parent};if(22===s.code)return this.segments=[],o.details=h.ErrorDetails.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(u["default"].ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=h.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return f.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],o.fatal=!0,void e.trigger(u["default"].ERROR,o);o.fatal=!1,e.trigger(u["default"].ERROR,o)}}}}},{key:"flushBuffer",value:]),t}(c["default"]);r["default"]=v},{30:30,31:31,32:32,51:51}],9:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].FPS_DROP_LEVEL_CAPPING,u["default"].MEDIA_ATTACHING,u["default"].MANIFEST_PARSED))}return s(t,e),o(t,[{key:"destroy",value:,{key:"onFpsDropLevelCapping",value:,{key:"onMediaAttaching",value:,{key:"onManifestParsed",value:,{key:"detectPlayerSize",value:,{key:"getMaxLevel",value:,{key:"mediaWidth",get:function(){var e=void 0,r=this.media;return r&&(e=r.width||r.clientWidth||r.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:],[{key:"isLevelAllowed",value:,{key:"getMaxLevelByMediaSize",value:,{key:"contentScaleFactor",get:]),t}(c["default"]);r["default"]=f},{31:31,32:32}],10:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(51),h=function(e){function t(e){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].MEDIA_ATTACHING))}return s(t,e),o(t,[{key:"destroy",value:,{key:"onMediaAttaching",value:,{key:"checkFPS",value:function(e,t,r){var i=performance.now();if(t){if(this.lastTime){var a=i-this.lastTime,n=r-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*n/a,l=this.hls;if(l.trigger(u["default"].FPS_DROP,{currentDropped:n,currentDecoded:s,totalDroppedFrames:r}),o>0&&n>l.config.fpsDroppedMonitoringThreshold*s){var d=l.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u["default"].FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:]),t}(c["default"]);r["default"]=h},{31:31,32:32,51:51}],11:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(51),h=e(30),v=e(34),g=i(v),p=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].MANIFEST_LOADED,u["default"].LEVEL_LOADED,u["default"].FRAG_LOADED,u["default"].ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=-1,r}return s(t,e),o(t,[{key:"destroy",value:,{key:"startLoad",value:,{key:"stopLoad",value:,{key:"onManifestLoaded",value:function(e){var t,r=[],i=[],a={},n=!1,s=!1,o=this.hls,l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=if(e.levels.forEach(,n&&s?r.forEach(:i=r,i=i.filter(,i.length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var c=0;c<i.length;c++)if(i[c].bitrate===t){this._firstLevel=c,f.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}o.trigger(u["default"].MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:n,altAudio:e.audioTracks.length>0})}else o.trigger(u["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:o.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e){f.logger.log("switching to level "+e),this._level=e;var i=t[e];i.level=e,r.trigger(u["default"].LEVEL_SWITCH,i),r.trigger(u["default"].LEVEL_SWITCHING,i)}var a=t[e],n=a.details;if(!n||n.live===!0){var s=a.urlId;r.trigger(u["default"].LEVEL_LOADING,{url:a.url[s],level:e,id:s})}}else r.trigger(u["default"].ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,r=this.hls,i=void 0,a=void 0,n=!1,s=!1;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:i=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=e.context.level,n=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:i=e.level;break;case h.ErrorDetails.MANIFEST_EMPTY_ERROR:i=e.context.level,n=!0,s=!0}if(void 0!==i){a=this._levels[i],a.loadError?a.loadError++:a.loadError=1;var o=a.url.length;if(o>1&&a.loadError<o)a.urlId=(a.urlId+1)%o,a.details=void 0,f.logger.warn("level controller,"+t+" for level "+i+": switching to redundant stream id "+a.urlId);else{s&&(f.logger.warn("Bad level encountered, removing & forcing to auto mode"),this._levels=this.levels.filter(,r.currentLevel=-1,r.trigger(u["default"].LEVEL_REMOVED,{level:i}));var l=this._manualLevel===-1&&i;if(l)f.logger.warn("level controller,"+t+": switch-down for next fragment"),r.nextAutoLevel=Math.max(0,i-1);else if(a&&a.details&&a.details.live)f.logger.warn("level controller,"+t+" on live stream, discard"),n&&(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var d=r.media,c=d&&g["default"].isBuffered(d,d.currentTime)&&g["default"].isBuffered(d,d.currentTime+.5);if(c){var v=r.config.levelLoadingRetryDelay;f.logger.warn("level controller,"+t+", but media buffered, retry in "+v+"ms"),this.timer=setTimeout(this.ontick,v)}else f.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0}}}}}},{key:"onFragLoaded",value:,{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var r=this._levels[t];r.loadError=0;var i=e.details;if(i.live){var a=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),n=this._levels[e.level],s=n.details;s&&i.endSN===s.endSN&&(a/=2,f.logger.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),f.logger.log("live playlist, reload in "+a+" ms"),this.timer=setTimeout(this.ontick,a)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var r=t.urlId;this.hls.trigger(u["default"].LEVEL_LOADING,{url:t.url[r],level:e,id:r})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:,{key:"manualLevel",get:function(){return this._manualLevel},set:,{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:set:]),t}(c["default"]);r["default"]=p},{30:30,31:31,32:32,34:34,51:51}],12:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(45),u=i(l),d=e(34),c=i(d),f=e(24),h=i(f),v=e(32),g=i(v),p=e(31),y=i(p),m=e(35),T=i(m),E=e(52),k=i(E),b=e(30),_=e(51),R=e(48),A={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},S=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g["default"].MEDIA_ATTACHED,g["default"].MEDIA_DETACHING,g["default"].MANIFEST_LOADING,g["default"].MANIFEST_PARSED,g["default"].LEVEL_LOADED,g["default"].KEY_LOADED,g["default"].FRAG_LOADED,g["default"].FRAG_LOAD_EMERGENCY_ABORTED,g["default"].FRAG_PARSING_INIT_SEGMENT,g["default"].FRAG_PARSING_DATA,g["default"].FRAG_PARSED,g["default"].ERROR,g["default"].AUDIO_TRACK_SWITCHING,g["default"].AUDIO_TRACK_SWITCHED,g["default"].BUFFER_CREATED,g["default"].BUFFER_APPENDED,g["default"].BUFFER_FLUSHED,g["default"].LEVEL_REMOVED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=A.STOPPED,r.ontick=r.tick.bind(r),r}return s(t,e),o(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),y["default"].prototype.destroy.call(this),this.state=A.STOPPED}},{key:"startLoad",value:,{key:"stopLoad",value:,{key:"tick",value:,{key:"doTick",value:function(){switch(this.state){case A.ERROR:break;case A.BUFFER_FLUSHING:this.fragLoadError=0;break;case A.IDLE:if(!this._doTickIdle())return;break;case A.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=A.IDLE);break;case A.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(_.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=A.IDLE);break;case A.ERROR:case A.STOPPED:case A.FRAG_LOADING:case A.PARSING:case A.PARSED:case A.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&!r&&(this.startFragRequested||!t.startFragPrefetch))return!0;var i=0;this.loadedmetadata?i=r.currentTime:this.nextLoadPosition&&(i=this.nextLoadPosition);var a=e.nextLoadLevel,n=this.levels[a],s=n.bitrate,o=void 0;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=c["default"].bufferInfo(this.mediaBuffer?this.mediaBuffer:r,i,t.maxBufferHole),u=l.len;if(u>=o)return!0;_.logger.trace("buffer length of "+u.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=a;var d=n.details;if("undefined"==typeof d||d.live&&this.levelLastLoaded!==a)return this.state=A.WAITING_LEVEL,!0;var f=this.fragPrevious;if(!d.live&&f&&f.sn===d.endSN){var h=Math.min(r.duration,f.start+f.duration);if(h-Math.max(l.end,f.start)<=Math.max(.2,f.duration/2)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(g["default"].BUFFER_EOS,v),this.state=A.ENDED,!0}}return this._fetchPayloadOrEos(i,l,d)}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var i=this.fragPrevious,a=this.level,n=r.fragments,s=n.length;if(0===s)return!1;var o=n[0].start,l=n[s-1].start+n[s-1].duration,u=t.end,d=void 0;if(r.initSegment&&!r.initSegment.data)d=r.initSegment;else if(r.live){var c=this.config.initialLiveManifestSize;if(s<c)return _.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+c),!1;if(d=this._ensureFragmentAtLivePoint(r,u,o,l,i,n,s),null===d)return!1}else u<o&&(d=n[0]);return d||(d=this._findFragment(o,i,s,n,u,l,r)),!d||this._loadFragmentOrKey(d,a,r,e,u)}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,i,a,n,s){var o=this.hls.config,l=this.media,u=void 0,d=void 0!==o.liveMaxLatencyDuration?o.liveMaxLatencyDuration:o.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-o.maxFragLookUpTolerance,i-d)){var c=this.liveSyncPosition=this.computeLivePosition(r,e);_.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c),this.nextLoadPosition=c}if(e.PTSKnown&&t>i&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(a){var f=a.sn+1,h=a.cc+1;f>=e.startSN&&f<=e.endSN?(u=n[f-e.startSN],_.logger.log("live playlist, switching playlist, load frag with next SN: "+u.sn)):h>=e.startCC&&h<=e.endCC&&(u=(0,R.findFirstFragWithCC)(n,h),_.logger.log("Live playlist switch, cannot find frag with target SN. Loading frag with next CC: "+u.cc))}u||(u=n[Math.min(s-1,Math.round(s/2))],_.logger.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u}},{key:"_findFragment",value:function(e,t,r,i,a,n,s){var o=this.hls.config,l=void 0,d=void 0,c=o.maxFragLookUpTolerance,f=t?i[t.sn-i[0].sn+1]:void 0,h=if(a<n?(a>n-c&&(c=0),d=f&&!h(f)?f:u["default"].search(i,h)):d=i[r-1],d){l=d;var v=l.sn-s.startSN,g=t&&l.level===t.level,p=i[v-1],y=i[v+1];if(t&&l.sn===t.sn)if(g&&!l.backtracked)if(l.sn<s.endSN){var m=t.deltaPTS;m&&m>o.maxBufferHole&&t.dropped&&v&&!l.backtracked?(l=p,_.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(l=y,_.logger.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(y&&y.backtracked?(_.logger.warn("Already backtracked from fragment "+y.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+y.sn),l=y):(_.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,p?(p.loadCounter&&p.loadCounter--,l=p,l.backtracked=!0):v&&(l=null)))}return l}},{key:"_loadFragmentOrKey",value:function(e,t,r,i,a){var n=this.hls,s=n.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(_.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+i.toFixed(3)+",bufferEnd:"+a),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var o=s.fragLoadingLoopThreshold;if(e.loadCounter>o&&Math.abs(this.fragLoadIdx-e.loadIdx)<o)return n.trigger(g["default"].ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e}),!1}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=n.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),n.trigger(g["default"].FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new h["default"](n,"main")),this.state=A.FRAG_LOADING,!0}_.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=A.KEY_LOADING,n.trigger(g["default"].KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return u["default"].search(this._bufferedFrags,}},{key:"followingBufferedFrag",value:,{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;if(r&&r.readyState&&r.seeking===!1&&(t=r.currentTime,t>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),c["default"].isBuffered(r,t)?e=this.getBufferedFrag(t):c["default"].isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(g["default"].FRAG_CHANGED,{frag:i});var a=i.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(g["default"].LEVEL_SWITCHED,{level:a}),this.fragPlaying=i}}}},{key:"immediateLevelSwitch",value:,{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,c["default"].isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,r=void 0,i=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,r=this.getBufferedFrag(e.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var a=this.hls.nextLoadLevel,n=this.levels[a],s=this.fragLastKbps;t=s&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*s)+1:0}if(i=this.getBufferedFrag(e.currentTime+t),i&&(i=this.followingBufferedFrag(i))){var o=this.fragCurrent;o&&o.loader&&o.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.startPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=A.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(g["default"].BUFFER_FLUSHING,r)}},{key:"onMediaAttached",value:,{key:"onMediaDetaching",value:,{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;if(_.logger.log("media seeking to "+t.toFixed(3)),this.state===A.FRAG_LOADING){var i=this.mediaBuffer?this.mediaBuffer:e,a=c["default"].bufferInfo(i,t,this.config.maxBufferHole),n=this.fragCurrent;if(0===a.len&&n){var s=r.maxFragLookUpTolerance,o=n.start-s,l=n.start+n.duration+s;t<o||t>l?(n.loader&&(_.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=A.IDLE):_.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===A.ENDED&&(this.state=A.IDLE);e&&(this.lastCurrentTime=t),this.state!==A.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:,{key:"onMediaEnded",value:,{key:"onManifestLoading",value:function(){_.logger.log("trigger BUFFER_RESET"),this.hls.trigger(g["default"].BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,i=!1;e.levels.forEach(,this.audioCodecSwitch=r&&i,this.audioCodecSwitch&&_.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,i=this.levels[this.levelLastLoaded],a=this.levels[r],n=t.totalduration,s=0;if(_.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"], cc ["+t.startCC+", "+t.endCC+"] duration:"+n),t.live){var o=a.details;o&&t.fragments.length>0?(T["default"].mergeDetails(o,t),s=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,o),t.PTSKnown?_.logger.log("live playlist sliding:"+s.toFixed(3)):(_.logger.log("live playlist - outdated PTS, unknown sliding"),(0,R.alignDiscontinuities)(this.fragPrevious,i,t))):(_.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,(0,R.alignDiscontinuities)(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(this.levelLastLoaded=r,a.details=t,this.hls.trigger(g["default"].LEVEL_UPDATED,{details:t,level:r}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var l=t.startTimeOffset;isNaN(l)?t.live?(this.startPosition=this.computeLivePosition(s,t),_.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(_.logger.log("negative start time offset "+l+", count from end of last fragment"),l=s+n+l),_.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===A.WAITING_LEVEL&&(this.state=A.IDLE),this.tick()}},{key:"onKeyLoaded",value:,{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===A.FRAG_LOADING&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var i=e.stats,a=this.levels[t.level],n=a.details;if(_.logger.log("Loaded  "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=i,r.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=A.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(g["default"].FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=A.IDLE,i.tparsed=i.tbuffered=performance.now(),n.initSegment.data=e.payload,this.hls.trigger(g["default"].FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state=A.PARSING;var s=n.totalduration,o=t.level,l=t.sn,u=this.config.defaultAudioCodec||a.audioCodec;this.audioCodecSwap&&(_.logger.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=u.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,_.logger.log("Parsing "+l+" of ["+n.startSN+" ,"+n.endSN+"],level "+o+", cc "+t.cc);var d=this.demuxer;d||(d=this.demuxer=new h["default"](this.hls,"main"));var c=this.media,f=c&&c.seeking,v=!f&&(n.PTSKnown||!n.live),p=n.initSegment?n.initSegment.data:[];d.push(e.payload,p,u,a.videoCodec,t,s,v,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===A.PARSING){var i,a,n=e.tracks;if(n.audio&&this.altAudio&&delete n.audio,a=n.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(_.logger.log("swapping playlist audio codec"),s=s.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&o.indexOf("firefox")===-1&&(s="mp4a.40.5"),o.indexOf("android")!==-1&&"audio/mpeg"!==a.container&&(s="mp4a.40.2",_.logger.log("Android: force audio codec to "+s)),a.levelCodec=s,a.id=e.id}a=n.video,a&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(g["default"].BUFFER_CODECS,n);for(i in n){a=n[i],_.logger.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(g["default"].BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,i=e.frag;if(r&&"main"===e.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===A.PARSING){var a=this.levels[this.level],n=r;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),_.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(n.dropped=e.dropped,n.dropped){if(!n.backtracked)return _.logger.warn("missing video frame(s), backtracking fragment"),n.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=A.IDLE,this.fragPrevious=n,void this.tick();_.logger.warn("Already backtracked on this fragment, appending with the gap")}else n.backtracked=!1;var s=T["default"].updateFragPTSDTS(a.details,n.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),o=this.hls;o.trigger(g["default"].LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(r){r&&r.length&&t.state===A.PARSING&&(t.appended=!0,t.pendingBuffering=!0,o.trigger(g["default"].BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:,{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){_.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(_.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=A.IDLE}var a=this.hls;a.trigger(g["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(g["default"].AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:,{key:"onBufferCreated",value:,{key:"onBufferAppended",value:,{key:"_checkAppendedParsed",value:function(){if(!(this.state!==A.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;_.logger.log("main buffered : "+k["default"].toString(t.buffered));var r=this._bufferedFrags.filter(function(e){return c["default"].isBuffered(t,(e.startPTS+e.endPTS)/2)});r.push(e),this._bufferedFrags=r.sort(,this.fragPrevious=e;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(g["default"].FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.state=A.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=this.media,i=r&&c["default"].isBuffered(r,r.currentTime)&&c["default"].isBuffered(r,r.currentTime+.5);switch(e.details){case b.ErrorDetails.FRAG_LOAD_ERROR:case b.ErrorDetails.FRAG_LOAD_TIMEOUT:case b.ErrorDetails.KEY_LOAD_ERROR:case b.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var a=this.fragLoadError;a?a++:a=1;var n=this.config;if(a<=n.fragLoadingMaxRetry||i||t.autoLevel&&t.level){this.fragLoadError=a,t.loadCounter=0;var s=Math.min(Math.pow(2,a-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);_.logger.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=A.FRAG_LOADING_WAITING_RETRY}else _.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=A.ERROR}break;case b.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(i?(this._reduceMaxBufferLength(t.duration),this.state=A.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=A.ERROR));break;case b.ErrorDetails.LEVEL_LOAD_ERROR:case b.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==A.ERROR&&(e.fatal?(this.state=A.ERROR,_.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):this.state===A.WAITING_LEVEL&&(this.state=A.IDLE));break;case b.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==A.PARSING&&this.state!==A.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=A.IDLE):(_.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:,{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,i=r.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var a=e.seeking?t:this.startPosition,n=c["default"].isBuffered(r,a);t===a&&n||(_.logger.log("target start position:"+a),n||(a=i.start(0),_.logger.log("target start position not buffered, seek to buffered.start(0) "+a)),_.logger.log("adjust currentTime from "+t+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var s=c["default"].bufferInfo(e,t,0),o=!(e.paused||e.ended||0===e.buffered.length),l=.5,u=t!==this.lastCurrentTime,d=this.config;if(u)this.stallReported&&(_.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(o){var f=performance.now(),h=this.hls;if(this.stalled){var v=f-this.stalled,p=s.len,y=this.nudgeRetry||0;if(p<=l&&v>1e3*d.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,_.logger.warn("playback stalling in low buffer @"+t),h.trigger(g["default"].ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:p}));var m=s.nextStart,T=m-t;if(m&&T<d.maxSeekHole&&T>0){this.nudgeRetry=++y;var E=y*d.nudgeOffset;_.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+m+" + nudge "+E),e.currentTime=m+E,this.stalled=void 0,h.trigger(g["default"].ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+E-t})}}else if(p>l&&v>1e3*d.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,_.logger.warn("playback stalling in high buffer @"+t),h.trigger(g["default"].ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:p})),this.stalled=void 0,this.nudgeRetry=++y,y<d.nudgeMaxRetry){var k=e.currentTime,R=k+y*d.nudgeOffset;_.logger.log("adjust currentTime from "+k+" to "+R),e.currentTime=R,h.trigger(g["default"].ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else _.logger.error("still stuck in high buffer @"+t+" after "+d.nudgeMaxRetry+", raise fatal error"),h.trigger(g["default"].ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=f,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",value:,{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return c["default"].isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=A.IDLE,this.fragPrevious=null}},{key:"onLevelRemoved",value:function(e){this.levels=this.levels.filter(}},{key:"swapAudioCodec",value:,{key:"computeLivePosition",value:,{key:"state",set:get:function(){return this._state}},{key:"currentLevel",get:,{key:"nextBufferedFrag",get:,{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(y["default"]);r["default"]=S},{24:24,30:30,31:31,32:32,34:34,35:35,45:45,48:48,51:51,52:52}],13:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(51),h=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].ERROR,u["default"].SUBTITLE_TRACKS_UPDATED,u["default"].SUBTITLE_TRACK_SWITCH,u["default"].SUBTITLE_TRACK_LOADED,u["default"].SUBTITLE_FRAG_PROCESSED));return r.config=e.config,r.vttFragSNsProcessed={},r.vttFragQueues=void 0,r.currentlyProcessing=null,r.currentTrackId=-1,r}return s(t,e),o(t,[{key:"destroy",value:function(){c["default"].prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:,{key:"nextFrag",value:function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(u["default"].FRAG_LOADING,{frag:e})}}},{key:"onSubtitleFragProcessed",value:,{key:"onError",value:,{key:"onSubtitleTracksUpdated",value:,{key:"onSubtitleTrackSwitch",value:,{key:"onSubtitleTrackLoaded",value:]),t}(c["default"]);r["default"]=h},{31:31,32:32,51:51}],14:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(51),h=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].MEDIA_ATTACHED,u["default"].MEDIA_DETACHING,u["default"].MANIFEST_LOADING,u["default"].MANIFEST_LOADED,u["default"].SUBTITLE_TRACK_LOADED));return r.tracks=[],r.trackId=-1,r.media=void 0,r}return s(t,e),o(t,[{key:"destroy",value:function(){c["default"].prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){var t=this;this.media=e.media,
this.media&&this.media.textTracks.addEventListener("change",function(){if(t.media){for(var e=-1,r=t.media.textTracks,i=0;i<r.length;i++)"showing"===r[i].mode&&(e=i);t.subtitleTrack=e}})}},{key:"onMediaDetaching",value:,{key:"onManifestLoading",value:,{key:"onManifestLoaded",value:function(e){var t=this,r=e.subtitles||[],i=!1;this.tracks=r,this.trackId=-1,this.hls.trigger(u["default"].SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e["default"]&&(t.subtitleTrack=e.id,i=!0)})}},{key:"onTick",value:function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;void 0!==r&&r.live!==!0||(f.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(u["default"].SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"onSubtitleTrackLoaded",value:,{key:"setSubtitleTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(u["default"].SUBTITLE_TRACK_SWITCH,{id:e});var r=t.details;void 0!==r&&r.live!==!0||(f.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(u["default"].SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:]),t}(c["default"]);r["default"]=h},{31:31,32:32,51:51}],15:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){if(e){var t=e.mode;for("disabled"===t&&(e.mode="hidden");e.cues.length>0;)e.removeCue(e.cues[0]);e.mode=t}}ject.defineProperty(r,"__esModule",{value:!0});var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=e(32),f=i(c),h=e(31),v=i(h),g=e(46),p=i(g),y=e(55),m=i(y),T=e(51),E=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f["default"].MEDIA_ATTACHING,f["default"].MEDIA_DETACHING,f["default"].FRAG_PARSING_USERDATA,f["default"].MANIFEST_LOADING,f["default"].MANIFEST_LOADED,f["default"].FRAG_LOADED,f["default"].LEVEL_SWITCHING,f["default"].INIT_PTS_FOUND,f["default"].FRAG_PARSING_INIT_SEGMENT));if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=void 0,r.cueRanges=[],r.manifestCaptionsLabels={},r.config.enableCEA708Captions){var i=r,s=r.manifestCaptionsLabels,l={newCue:function(e,t,r){if(!i.textTrack1)if(i.config.renderNatively){var a=i.getExistingTrack("1");if(a){i.textTrack1=a,o(i.textTrack1);var n=new window.Event("addtrack");n.track=i.textTrack1,i.media.dispatchEvent(n)}else i.textTrack1=i.createTextTrack("captions",s.captionsTextTrack1Label,s.captionsTextTrack1LanguageCode),i.textTrack1.textTrack1=!0}else i.textTrack1={_id:"textTrack1",label:s.captionsTextTrack1Label,kind:"captions","default":!1},i.hls.trigger(f["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i.textTrack1]});i.addCues("textTrack1",e,t,r)}},u={newCue:function(e,t,r){if(!i.textTrack2)if(i.config.renderNatively){var a=i.getExistingTrack("2");if(a){i.textTrack2=a,o(i.textTrack2);var n=new window.Event("addtrack");n.track=i.textTrack2,i.media.dispatchEvent(n)}else i.textTrack2=i.createTextTrack("captions",s.captionsTextTrack2Label,s.captionsTextTrack2LanguageCode),i.textTrack2.textTrack2=!0}else i.textTrack2={_id:"textTrack2",label:s.captionsTextTrack2Label,kind:"captions","default":!1},i.hls.trigger(f["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i.textTrack2]});i.addCues("textTrack2",e,t,r)}};r.cea608Parser=new p["default"](0,l,u)}return r}return s(t,e),d(t,[{key:"addCues",value:function(e,t,r,i){for(var a=this,n=this.cueRanges,s=!1,o=n.length;o--;){var l=n[o],d=u(l[0],l[1],t,r);if(d>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],r),s=!0,d/(r-t)>.5))return}s||n.push([t,r]);var c=this.Cues.createCues(t,r,i);this.config.renderNatively?c.forEach(:this.hls.trigger(f["default"].CUES_PARSED,{type:"captions",cues:c,track:e})}},{key:"onInitPtsFound",value:,{key:"getExistingTrack",value:,{key:"createTextTrack",value:,{key:"destroy",value:,{key:"onMediaAttaching",value:,{key:"onMediaDetaching",value:,{key:"onManifestLoading",value:,{key:"onManifestLoaded",value:function(e){var t=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[];var r=this.manifestCaptionsLabels;if(r.captionsTextTrack1Label="Unknown CC",r.captionsTextTrack1LanguageCode="en",r.captionsTextTrack2Label="Unknown CC",r.captionsTextTrack2LanguageCode="es",this.config.enableWebVTT){var i=this.tracks&&e.subtitles&&this.tracks.length===e.subtitles.length;if(this.tracks=e.subtitles||[],this.config.renderNatively){var a=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,r){var i=void 0;if(r<a.length){var n=a[r];l(n,e)&&(i=n)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),i.mode=e["default"]?"showing":"hidden",t.textTracks.push(i)})}else if(!i&&this.tracks&&this.tracks.length){var n=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),"default":e["default"]}});this.hls.trigger(f["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:n})}}if(this.config.enableCEA708Captions&&e.captions){var s=void 0,o=void 0;e.captions.forEach(function(e){o=/(?:CC|SERVICE)([1-2])/.exec(e.instreamId),o&&(s=o[1],r["captionsTextTrack"+s+"Label"]=e.name,e.lang&&(r["captionsTextTrack"+s+"LanguageCode"]=e.lang))})}}},{key:"onLevelSwitching",value:,{key:"onFragLoaded",value:function(e){var t=e.frag,r=e.payload,i=this;if("main"===t.type){var a=t.sn;a!==this.lastSn+1&&this.cea608Parser.reset(),this.lastSn=a}else if("subtitle"===t.type)if(r.byteLength){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(e);var n=this.vttCCs;n[t.cc]||(n[t.cc]={start:t.start,prevCC:this.prevCC,"new":!0},this.prevCC=t.cc);var s=this.hls,o=i.config.renderNatively?this.textTracks:this.tracks;m["default"].parse(r,this.initPTS,n,t.cc,function(e){if(i.config.renderNatively)e.forEach(;else{var r=o[t.trackId],a=r["default"]?"default":"subtitles"+t.trackId;s.trigger(f["default"].CUES_PARSED,{type:"subtitles",cues:e,track:a})}s.trigger(f["default"].SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},}else this.hls.trigger(f["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:"onFragParsingUserdata",value:,{key:"onFragParsingInitSegment",value:function(){"undefined"==typeof this.initPTS&&this.onInitPtsFound({initPTS:9e4})}},{key:"extractCea608Data",value:]),t}(v["default"]);r["default"]=E},{31:31,32:32,46:46,51:51,55:55}],16:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=);r["default"]=n},{}],17:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(){eturn a(e,[{key:"uint8ArrayToUint32Array_",value:,{key:"initTable",value:,{key:"expandKey",value:,{key:"networkToHostOrderSwap",value:,{key:"decrypt",value:,{key:"destroy",value:]),e}();r["default"]=n},{}],18:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(16),o=i(s),l=e(19),u=i(l),d=e(17),c=i(d),f=e(30),h=e(51),v=function(){eturn n(e,[{key:"isSync",value:,{key:"decrypt",value:function(e,t,r,i){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(h.logger.log("JS AES decrypt"),this.logEnabled=!1);var n=this.decryptor;n||(this.decryptor=n=new c["default"]),n.expandKey(t),i(n.decrypt(e,0,r))}else{this.logEnabled&&(h.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var s=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new u["default"](s,t)),this.fastAesKey.expandKey().then(function(n){var l=new o["default"](s,r);l.decrypt(e,n)["catch"](function(n){a.onWebCryptoError(n,e,t,r,i)}).then(})["catch"](}}},{key:"onWebCryptoError",value:,{key:"destroy",value:]),e}();r["default"]=v},{16:16,17:17,19:19,30:30,51:51}],19:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=);r["default"]=n},{}],20:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(21),o=i(s),l=e(51),u=e(26),d=i(u),c=function(){eturn n(e,[{key:"resetInitSegment",value:,{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,i){var a,n,s,u,c,f,h,v,g,p,y,m=new d["default"](e);for(n=m.timeStamp?90*m.timeStamp:9e4*t,a=this._aacTrack,h=m.length||0,p=e.length;h<p-1&&(255!==e[h]||240!==(246&e[h+1]));h++);for(a.samplerate||(s=o["default"].getAudioConfig(this.observer,e,h,a.manifestCodec),a.config=s.config,a.samplerate=s.samplerate,a.channelCount=s.channelCount,a.codec=s.codec,l.logger.log("parsed codec:"+a.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)),f=0,c=9216e4/a.samplerate;h+5<p&&(v=1&e[h+1]?7:9,u=(3&e[h+3])<<11|e[h+4]<<3|(224&e[h+5])>>>5,u-=v,u>0&&h+v+u<=p);)for(g=n+f*c,y={unit:e.subarray(h+v,h+v+u),pts:g,dts:g},a.samples.push(y),a.len+=u,h+=u+v,f++;h<p-1&&(255!==e[h]||240!==(240&e[h+1]));h++);var T=m.payload?{samples:[{pts:n,dts:n,unit:m.payload}],inputTimeScale:9e4}:{samples:[]};this.remuxer.remux(a,{samples:[]},T,{samples:[]},t,r,i)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,i=new d["default"](e);for(t=i.length||0,r=e.length;t<r-1;t++)if(255===e[t]&&240===(246&e[t+1]))return!0;return!1}}]),e}();r["default"]=c},{21:21,26:26,51:51}],21:[function(e,t,r){"use strict";var i=e(51),a=e(30),n={getAudioConfig:function(e,t,r,n){var s,o,l,u,d,c=navigator.userAgent.toLowerCase(),f=n,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return s=((192&t[r+2])>>>6)+1,o=(60&t[r+2])>>>2,o>h.length-1?void e.trigger(Event.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(u=(1&t[r+2])<<2,u|=(192&t[r+3])>>>6,i.logger.log("manifest codec:"+n+",ADTS data:type:"+s+",sampleingIndex:"+o+"["+h[o]+"Hz],channelConfig:"+u),/firefox/i.test(c)?o>=6?(s=5,d=new Array(4),l=o-3):(s=2,d=new Array(2),l=o):c.indexOf("android")!==-1?(s=2,d=new Array(2),l=o):(s=5,d=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&o>=6?l=o-3:((n&&n.indexOf("mp4a.40.2")!==-1&&o>=6&&1===u||!n&&1===u)&&(s=2,d=new Array(2)),l=o)),d[0]=s<<3,d[0]|=(14&o)>>1,d[1]|=(1&o)<<7,d[1]|=u<<3,5===s&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[o],channelCount:u,codec:"mp4a.40."+s,manifestCodec:f})}};t.exports=n},{30:30,51:51}],22:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(32),o=i(s),l=e(30),u=e(18),d=i(u),c=e(20),f=i(c),h=e(27),v=i(h),g=e(29),p=i(g),y=e(42),m=i(y),T=e(43),E=i(T),k=function(){eturn n(e,[{key:"destroy",value:,{key:"push",value:function(e,t,r,i,a,n,s,l,u,c,f,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var v=this.decrypter;null==v&&(v=this.decrypter=new d["default"](this.observer,this.config));var g,p=this;try{g=performance.now()}catch(y){g=Date.now()}v.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var d;try{d=performance.now()}catch(v){d=Date.now()}p.observer.trigger(o["default"].FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:d}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,a,n,s,l,u,c,f,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,a,n,s,l,u,c,f,h)}},{key:"pushDecrypted",value:function(e,t,r,i,a,n,s,u,d,c,h,g){var y=this.demuxer;if(!y||s&&!this.probe(e)){var T=this.observer,k=this.typeSupported,b=this.config,_=[{demux:p["default"],remux:m["default"]},{demux:f["default"],remux:m["default"]},{demux:v["default"],remux:E["default"]}];for(var R in _){var A=_[R],S=A.demux.probe;if(S(e)){var L=this.remuxer=new A.remux(T,b,k,this.vendor);y=new A.demux(T,L,b,k),this.probe=S;break}}if(!y)return void T.trigger(o["default"].ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=y}var w=this.remuxer;(s||u)&&(y.resetInitSegment(r,i,a,c),w.resetInitSegment()),s&&(y.resetTimeStamp(),w.resetTimeStamp(g)),"function"==typeof y.setDecryptData&&y.setDecryptData(t),y.append(e,n,d,h)}}]),e}();r["default"]=k},{18:18,20:20,27:27,29:29,30:30,32:32,42:42,43:43}],23:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e(22),n=i(a),s=e(32),o=i(s),l=e(51),u=e(1),d=i(u),c=function(e){var t=new d["default"];t.trigger=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(i))};var r=e.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new n["default"](t,a.typeSupported,s,a.vendor);try{(0,l.enableLogs)(s.debug===!0)}catch(o){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),t.on(o["default"].FRAG_DECRYPTED,r),t.on(o["default"].FRAG_PARSING_INIT_SEGMENT,r),t.on(o["default"].FRAG_PARSED,r),t.on(o["default"].ERROR,r),t.on(o["default"].FRAG_PARSING_METADATA,r),t.on(o["default"].FRAG_PARSING_USERDATA,r),t.on(o["default"].INIT_PTS_FOUND,r),t.on(o["default"].FRAG_PARSING_DATA,};r["default"]=c},{1:1,22:22,32:32,51:51}],24:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(32),o=i(s),l=e(22),u=i(l),d=e(23),c=i(d),f=e(51),h=e(30),v=e(1),g=i(v),p=function(){function t(r,i){a(this,t),this.hls=r,this.id=i;var n=this.observer=new g["default"],s=r.config;n.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.removeListener.apply(n,[e].concat(r))};var l=bind(this);n.on(o["default"].FRAG_DECRYPTED,l),n.on(o["default"].FRAG_PARSING_INIT_SEGMENT,l),n.on(o["default"].FRAG_PARSING_DATA,l),n.on(o["default"].FRAG_PARSED,l),n.on(o["default"].ERROR,l),n.on(o["default"].FRAG_PARSING_METADATA,l),n.on(o["default"].FRAG_PARSING_USERDATA,l),n.on(o["default"].INIT_PTS_FOUND,l);var d={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(s.enableWorker&&"undefined"!=typeof Worker){f.logger.log("demuxing in webworker");var p=void 0;try{var y=e(3);p=this.w=y(c["default"]),this.onwmsg=this.onWorkerMessage.bind(this),p.addEventListener("message",this.onwmsg),p.onerror=p.postMessage({cmd:"init",typeSupported:d,vendor:v,id:i,config:JSON.stringify(s)})}catch(m){f.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),p&&URL.revokeObjectURL(p.objectURL),this.demuxer=new u["default"](n,d,s,v),this.w=void 0}}else this.demuxer=new u["default"](n,d,s,v)}return n(t,[{key:"destroy",value:,{key:"push",value:,{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case o["default"].FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),t}();r["default"]=p},{1:1,22:22,23:23,3:3,30:30,32:32,51:51}],25:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=e(51),s=function(){eturn a(e,[{key:"loadWord",value:,{key:"skipBits",value:,{key:"readBits",value:,{key:"skipLZ",value:,{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:,{key:"readUEG",value:,{key:"readEG",value:,{key:"readBoolean",value:,{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:,{key:"skipScalingList",value:,{key:"readSPS",value:,{key:"readSliceType",value:]),e}();r["default"]=s},{51:51}],26:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=e(51),s=function(){eturn a(e,[{key:"readUTF",value:function(e,t,r){var i="",a=t,n=t+r;do i+=String.fromCharCode(e[a++]);while(a<n);return i}},{key:"_parseID3Frames",value:function(e,t,r){for(var i,a,s,o,l;t+8<=r;)switch(i=this.readUTF(e,t,4),t+=4,a=e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],o=e[t++]<<8+e[t++],s=t,i){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var u=1&e[t++];this._hasTimeStamp=!0,l=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,u&&(l+=47721858.84),l=Math.round(l),n.logger.trace("ID3 timestamp found: "+l),this._timeStamp=l}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp;
}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();r["default"]=s},{51:51}],27:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(32),o=i(s),l=function(){eturn n(e,[{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(t,r,i,a){var n=this.initData=e.parseInitSegment(t),s={};n.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:t}),n.video&&(s.video={container:"video/mp4",codec:i,initSegment:t}),this.observer.trigger(o["default"].FRAG_PARSING_INIT_SEGMENT,{tracks:s})}},{key:"append",value:,{key:"destroy",value:function(){}}],[{key:"probe",value:,{key:"bin2str",value:,{key:"findBox",value:,{key:"parseInitSegment",value:function(t){var r=[],i=e.findBox(t,["moov","trak"]);return i.forEach(,r}},{key:"startDTS",value:function(t,r){var i,a,n;return i=e.findBox(r,["moof","traf"]),a=[].concat.apply([],i.map(function(r){return e.findBox(r,["tfhd"]).map(function(i){var a,n,s;return a=i[4]<<24|i[5]<<16|i[6]<<8|i[7],n=t[a].timescale||9e4,s=e.findBox(r,["tfdt"]).map([0],s=s||1/0,s/n})})),n=Math.min.apply(null,a),isFinite(n)?n:0}}]),e}();r["default"]=l},{32:32}],28:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(18),o=i(s),l=function(){function e(t,r,i,n){a(this,e),this.decryptdata=i,this.discardEPB=n,this.decrypter=new o["default"](t,r)}return n(e,[{key:"decryptBuffer",value:,{key:"decryptAacSample",value:,{key:"decryptAacSamples",value:,{key:"getAvcEncryptedData",value:,{key:"getAvcDecryptedUnit",value:,{key:"decryptAvcSample",value:,{key:"decryptAvcSamples",value:]),e}();r["default"]=l},{18:18}],29:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(21),o=i(s),l=e(32),u=i(l),d=e(25),c=i(d),f=e(28),h=i(f),v=e(51),g=e(30),p=function(){eturn n(e,[{key:"setDecryptData",value:,{key:"resetInitSegment",value:function(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=i}},{key:"resetTimeStamp",value:,{key:"append",value:function(e,t,r,i){var a,n,s,o,l,d,c=e.length,f=!1;this.contiguous=r;var h=this.pmtParsed,p=this._avcTrack,y=this._audioTrack,m=this._id3Track,T=p.id,E=y.id,k=m.id,b=this._pmtId,_=p.pesData,R=y.pesData,A=m.pesData,S=this._parsePAT,L=this._parsePMT,w=this._parsePES,D=this._parseAVCPES.bind(this),O=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),C=this._parseID3PES.bind(this);for(c-=c%188,a=0;a<c;a+=188)if(71===e[a]){if(n=!!(64&e[a+1]),s=((31&e[a+1])<<8)+e[a+2],o=(48&e[a+3])>>4,o>1){if(l=a+5+e[a+4],l===a+188)continue}else l=a+4;switch(s){case T:n&&(_&&(d=w(_))&&D(d,!1),_={data:[],size:0}),_&&(_.data.push(e.subarray(l,a+188)),_.size+=a+188-l);break;case E:n&&(R&&(d=w(R))&&(y.isAAC?O(d):I(d)),R={data:[],size:0}),R&&(R.data.push(e.subarray(l,a+188)),R.size+=a+188-l);break;case k:n&&(A&&(d=w(A))&&C(d),A={data:[],size:0}),A&&(A.data.push(e.subarray(l,a+188)),A.size+=a+188-l);break;case 0:n&&(l+=e[l]+1),b=this._pmtId=S(e,l);break;case b:n&&(l+=e[l]+1);var P=L(e,l,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);T=P.avc,T>0&&(p.id=T),E=P.audio,E>0&&(y.id=E,y.isAAC=P.isAAC),k=P.id3,k>0&&(m.id=k),f&&!h&&(v.logger.log("reparse from beginning"),f=!1,a=-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(u["default"].ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(d=w(_))?(D(d,!0),p.pesData=null):p.pesData=_,R&&(d=w(R))?(y.isAAC?O(d):I(d),y.pesData=null):(R&&R.size&&v.logger.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=R),A&&(d=w(A))?(C(d),m.pesData=null):m.pesData=A,null==this.sampleAes?this.remuxer.remux(y,p,m,this._txtTrack,t,r,i):this.decryptAndRemux(y,p,m,this._txtTrack,t,r,i)}},{key:"decryptAndRemux",value:,{key:"decryptAndRemuxAvc",value:,{key:"destroy",value:,{key:"_parsePAT",value:,{key:"_parsePMT",value:,{key:"_parsePES",value:,{key:"pushAccesUnit",value:,{key:"_parseAVCPES",value:function(e,t){var r,i,a,n=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),l=!1,u=this.avcSample;e.data=null,o.forEach(function(t){switch(t.type){case 1:i=!0,l&&u&&(u.debug+="NDR "),u.frame=!0;var o=t.data;if(o.length>4){var d=new c["default"](o).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:i=!0,u||(u=n.avcSample=n._createAVCSample(!0,e.pts,e.dts,"")),l&&(u.debug+="IDR "),u.key=!0,u.frame=!0;break;case 6:i=!0,l&&u&&(u.debug+="SEI "),r=new c["default"](n.discardEPB(t.data)),r.readUByte();for(var f=0,h=0,v=!1,g=0;!v&&r.bytesAvailable>1;){f=0;do g=r.readUByte(),f+=g;while(255===g);h=0;do g=r.readUByte(),h+=g;while(255===g);if(4===f&&0!==r.bytesAvailable){v=!0;var p=r.readUByte();if(181===p){var y=r.readUShort();if(49===y){var m=r.readUInt();if(1195456820===m){var T=r.readUByte();if(3===T){var E=r.readUByte(),k=r.readUByte(),b=31&E,_=[E,k];for(a=0;a<b;a++)_.push(r.readUByte()),_.push(r.readUByte()),_.push(r.readUByte());n._insertSampleInOrder(n._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}}}}else if(h<r.bytesAvailable)for(a=0;a<h;a++)r.readUByte()}break;case 7:if(i=!0,l&&u&&(u.debug+="SPS "),!s.sps){r=new c["default"](t.data);var R=r.readSPS();s.width=R.width,s.height=R.height,s.pixelRatio=R.pixelRatio,s.sps=[t.data],s.duration=n._duration;var A=t.data.subarray(1,4),S="avc1.";for(a=0;a<3;a++){var L=A[a].toString(16);L.length<2&&(L="0"+L),S+=L}s.codec=S}break;case 8:i=!0,l&&u&&(u.debug+="PPS "),s.pps||(s.pps=[t.data]);break;case 9:i=!1,u&&n.pushAccesUnit(u,s),u=n.avcSample=n._createAVCSample(!1,e.pts,e.dts,l?"AUD ":"");break;case 12:i=!1;break;default:i=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}if(u&&i){var w=u.units;w.push(t)}}),t&&u&&(this.pushAccesUnit(u,s),this.avcSample=null)}},{key:"_createAVCSample",value:,{key:"_insertSampleInOrder",value:,{key:"_getLastNalUnit",value:,{key:"_parseAVCNALu",value:,{key:"discardEPB",value:,{key:"_parseAACPES",value:function(e){var t,r,i,a,n,s,l,d,c,f=this._audioTrack,h=e.data,p=e.pts,y=0,m=this.aacOverFlow,T=this.aacLastPTS;if(m){var E=new Uint8Array(m.byteLength+h.byteLength);E.set(m,0),E.set(h,m.byteLength),h=E}for(n=y,d=h.length;n<d-1&&(255!==h[n]||240!==(240&h[n+1]));n++);if(n){var k,b;if(n<d-1?(k="AAC PES did not start with ADTS header,offset:"+n,b=!1):(k="no ADTS header found in AAC PES",b=!0),v.logger.warn("parsing error:"+k),this.observer.trigger(u["default"].ERROR,{type:g.ErrorTypes.MEDIA_ERROR,details:g.ErrorDetails.FRAG_PARSING_ERROR,fatal:b,reason:k}),b)return}if(!f.samplerate){var _=this.audioCodec;t=o["default"].getAudioConfig(this.observer,h,n,_),f.config=t.config,f.samplerate=t.samplerate,f.channelCount=t.channelCount,f.codec=t.codec,f.manifestCodec=t.manifestCodec,f.duration=this._duration,v.logger.log("parsed codec:"+f.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)}if(a=0,i=9216e4/f.samplerate,m&&T){var R=T+i;Math.abs(R-p)>1&&(v.logger.log("AAC: align PTS for overlapping frames by "+Math.round((R-p)/90)),p=R)}for(;n+5<d&&(s=1&h[n+1]?7:9,r=(3&h[n+3])<<11|h[n+4]<<3|(224&h[n+5])>>>5,r-=s,r>0&&n+s+r<=d);)for(l=p+a*i,c={unit:h.subarray(n+s,n+s+r),pts:l,dts:l},f.samples.push(c),f.len+=r,n+=r+s,a++;n<d-1&&(255!==h[n]||240!==(240&h[n+1]));n++);m=n<d?h.subarray(n,d):null,this.aacOverFlow=m,this.aacLastPTS=l}},{key:"_parseMPEGPES",value:,{key:"_onMpegFrame",value:,{key:"_onMpegNoise",value:,{key:"_parseMpeg",value:function(e,t,r,i,a){var n=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(t+2>r)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>r)return-1;var o=e[t+1]>>3&3,l=e[t+1]>>1&3,u=e[t+2]>>4&15,d=e[t+2]>>2&3,c=!!(2&e[t+2]);if(1!==o&&0!==u&&15!==u&&3!==d){var f=3===o?3-l:3===l?3:4,h=1e3*n[14*f+u-1],v=3===o?0:2===o?1:2,g=s[3*v+d],p=c?1:0,y=e[t+3]>>6===3?1:2,m=3===l?(3===o?12:6)*h/g+p<<2:(3===o?144:72)*h/g+p|0;return t+m>r?-1:(this._onMpegFrame&&this._onMpegFrame(e.subarray(t,t+m),h,g,y,i,a),m)}}for(var T=t+2;T<r;){if(255===e[T-1]&&224===(224&e[T]))return this._onMpegNoise&&this._onMpegNoise(e.subarray(t,T-1)),T-t-1;T++}return-1}},{key:"_parseID3PES",value:],[{key:"probe",value:]),e}();r["default"]=p},{21:21,25:25,28:28,30:30,32:32,51:51}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",MANIFEST_EMPTY_ERROR:"manifestEmptyError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],31:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e(51),l=e(30),u=e(32),d=i(u),c=function(){eturn s(e,[{key:"destroy",value:,{key:"isEventHandler",value:,{key:"registerListeners",value:,{key:"unregisterListeners",value:,{key:"onEvent",value:,{key:"onEventGeneric",value:function(e,t){var r=try{r.call(this,e,t).call()}catch(i){o.logger.error("internal error happened while processing "+e+":"+i.message),this.hls.trigger(d["default"].ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:i})}}}]),e}();r["default"]=c},{30:30,32:32,51:51}],32:[{}],33:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=);r["default"]=n},{}],34:[function(e,t,r){"use strict";var i={isBuffered:bufferInfo:function(e,t,r){var i={len:0,start:t,end:t,nextStart:void 0};if(!e)return i;try{for(var a=e.buffered,n=[],s=0;s<a.length;s++)n.push({start:a.start(s),end:a.end(s)});return this.bufferedInfo(n,t,r)}catch(o){return i}},bufferedInfo:function(e,t,r){var i,a,n,s,o,l=[];for(e.sort(,o=0;o<e.length;o++){var u=l.length;if(u){var d=l[u-1].end;e[o].start-d<r?e[o].end>d&&(l[u-1].end=e[o].end):l.push(e[o])}else l.push(e[o])}for(o=0,i=0,a=n=t;o<l.length;o++){var c=l[o].start,f=l[o].end;if(t+r>=c&&t<f)a=c,n=f,i=n-t;else if(t+r<c){s=c;break}}return{len:i,start:a||0,end:n||0,nextStart:s}}};t.exports=i},{}],35:[function(e,t,r){"use strict";var i=e(51),a={mergeDetails:function(e,t){var r,n=Math.max(e.startSN,t.startSN)-t.startSN,s=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,l=e.fragments,u=t.fragments,d=0;if(s<n)return void(t.PTSKnown=!1);for(var c=n;c<=s;c++){var f=l[o+c],h=u[c];h&&f&&(d=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,h.backtracked=f.backtracked,h.dropped=f.dropped,r=h))}if(d)for(i.logger.log("discontinuity sliding from playlist, take drift into account"),c=0;c<u.length;c++)u[c].cc+=d;if(r)a.updateFragPTSDTS(t,r.sn,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(o>=0&&o<l.length){var v=l[o].start;for(c=0;c<u.length;c++)u[c].start+=v}t.PTSKnown=e.PTSKnown},updateFragPTSDTS:function(e,t,r,i,n,s){var o,l,u,d;if(!e||t<e.startSN||t>e.endSN)return 0;if(o=t-e.startSN,l=e.fragments,u=l[o],!isNaN(u.startPTS)){var c=Math.abs(u.startPTS-r);isNaN(u.deltaPTS)?u.deltaPTS=c:u.deltaPTS=Math.max(c,u.deltaPTS),r=Math.min(r,u.startPTS),i=Math.max(i,u.endPTS),n=Math.min(n,u.startDTS),s=Math.max(s,u.endDTS)}var f=r-u.start;for(u.start=u.startPTS=r,u.endPTS=i,u.startDTS=n,u.endDTS=s,u.duration=i-r,d=o;d>0;d--)a.updatePTS(l,d,d-1);for(d=o;d<l.length-1;d++)a.updatePTS(l,d,d+1);return e.PTSKnown=!0,f},updatePTS:function(e,t,r){var a=e[t],n=e[r],s=n.startPTS;isNaN(s)?r>t?n.start=a.start+a.duration:n.start=Math.max(a.start-n.duration,0):r>t?(a.duration=s-a.start,a.duration<0&&i.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):(n.duration=a.start-s,n.duration<0&&i.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=a},{51:51}],36:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(2),o=i(s),l=e(32),u=i(l),d=e(30),c=e(40),f=i(c),h=e(38),v=i(h),g=e(39),p=i(g),y=e(12),m=i(y),T=e(11),E=i(T),k=e(51),b=e(1),_=i(b),R=e(4),A=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var i=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var n in i)n in r||(r[n]=i[n]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,k.enableLogs)(r.debug),this.config=r,this._autoLevelCapping=-1;var s=this.observer=new _["default"];s.trigger=s.off=this.on=s.on.bind(s),this.off=s.off.bind(s),this.trigger=s.trigger.bind(s);var o=this.abrController=new r.abrController(this),l=new r.bufferController(this),u=new r.capLevelController(this),d=new r.fpsController(this),c=new f["default"](this),h=new v["default"](this),g=new p["default"](this),y=this.levelController=new E["default"](this),T=this.streamController=new m["default"](this),b=[y,T],R=r.audioStreamController;R&&b.push(new R(this)),this.networkControllers=b;var A=[c,h,g,o,l,u,d];if(R=r.audioTrackController){var S=new R(this);this.audioTrackController=S,A.push(S)}if(R=r.subtitleTrackController){var L=new R(this);this.subtitleTrackController=L,A.push(L)}[r.subtitleStreamController,r.timelineController].forEach(,this.coreComponents=A}return n(e,null,[{key:"isSupported",value:,{key:"version",get:,{key:"Events",get:,{key:"ErrorTypes",get:function(){return d.ErrorTypes}},{key:"ErrorDetails",get:,{key:"DefaultConfig",get:set:]),n(e,[{key:"destroy",value:function(){k.logger.log("destroy"),this.trigger(u["default"].DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:,{key:"detachMedia",value:,{key:"loadSource",value:function(e){e=o["default"].buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),k.logger.log("loadSource:"+e),this.url=e,this.trigger(u["default"].MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:,{key:"stopLoad",value:,{key:"swapAudioCodec",value:,{key:"recoverMediaError",value:,{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:,{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:,{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){k.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:,{key:"firstLevel",get:set:,{key:"startLevel",get:function(){return this.levelController.startLevel},set:,{key:"autoLevelCapping",get:set:,{key:"autoLevelEnabled",get:,{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:,{key:"maxAutoLevel",get:,{key:"nextAutoLevel",get:set:,{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:,{key:"subtitleTracks",get:,{key:"subtitleTrack",get:set:]),e}();r["default"]=A},{1:1,11:11,12:12,2:2,30:30,32:32,38:38,39:39,4:4,40:40,51:51}],37:[{36:36}],38:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(30),h=e(51),v=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].FRAG_LOADING));return r.loaders={},r}return s(t,e),o(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},c["default"].prototype.destroy.call(this)}},{key:"onFragLoading",value:,{key:"loadsuccess",value:function(e,t,r){var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u["default"].FRAG_LOADED,{payload:i,frag:a,stats:t})}},{key:"loaderror",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,r){var i=t.frag;i.loaded=e.loaded,this.hls.trigger(u["default"].FRAG_LOAD_PROGRESS,{frag:i,stats:e})}}]),t}(c["default"]);r["default"]=v},{30:30,31:31,32:32,51:51}],39:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(32),u=i(l),d=e(31),c=i(d),f=e(30),h=e(51),v=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u["default"].KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return s(t,e),o(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c["default"].prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,i=this.loaders[r],a=t.decryptdata,n=a.uri;if(n!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;i&&(h.logger.warn("abort previous key loader for type:"+r),i.abort()),t.loader=this.loaders[r]=new s.loader(s),this.decrypturl=n,this.decryptkey=null;var o=void 0,l=void 0,d=void 0;o={url:n,frag:t,responseType:"arraybuffer"},l={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(o,l,d)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(u["default"].KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){var i=r.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(u["default"].KEY_LOADED,{frag:i})}},{key:"loaderror",value:function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(u["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),t}(c["default"]);r["default"]=v},{30:30,31:31,32:32,51:51}],40:[function(e,t,r){"use strict";ction s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e(2),u=i(l),d=e(32),c=i(d),f=e(31),h=i(f),v=e(30),g=e(44),p=i(g),y=e(51),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,T=/#EXT-X-MEDIA:(.*)/g,E=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,k=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,b=function(){eturn o(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=u["default"].buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),_=function(){eturn o(e,[{key:"createInitializationVector",value:,{key:"fragmentDecryptdataFromLevelkey",value:,{key:"cloneObj",value:,{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=u["default"].buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:,{key:"programDateTime",get:,{key:"byteRange",get:,{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:,{key:"decryptdata",get:]),e}(),R=function(e){function t(e){s(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c["default"].MANIFEST_LOADING,c["default"].LEVEL_LOADING,c["default"].AUDIO_TRACK_LOADING,c["default"].SUBTITLE_TRACK_LOADING));return r.loaders={},r}return n(t,e),o(t,[{key:"destroy",value:,{key:"onManifestLoading",value:,{key:"onLevelLoading",value:,{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:,{key:"load",value:,{key:"resolve",value:function(e,t){return u["default"].buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var r=[],i=void 0;for(m.lastIndex=0;null!=(i=m.exec(e));){var a={},n=a.attrs=new p["default"](i[1]);a.url=this.resolve(i[2],t);var s=n.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),a.name=n.NAME;var o=n.CODECS;if(o){o=o.split(/[ ,]+/);for(var l=0;l<o.length;l++){var u=o[l];u.indexOf("avc1")!==-1?a.videoCodec=this.avc1toavcoti(u):a.audioCodec=u}}r.push(a)}return r}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var i=void 0,a=[],n=0;for(T.lastIndex=0;null!=(i=T.exec(e));){var s={},o=new p["default"](i[1]);o.TYPE===r&&(s.groupId=o["GROUP-ID"],s.instreamId=o["INSTREAM-ID"],s.name=o.NAME,s.type=r,s["default"]="YES"===o.DEFAULT,s.autoselect="YES"===o.AUTOSELECT,s.forced="YES"===o.FORCED,o.URI&&(s.url=this.resolve(o.URI,t)),s.lang=o.LANGUAGE,s.name||(s.name=s.lang),s.id=n++,a.push(s))}return a}},{key:"avc1toavcoti",value:,{key:"parseLevelPlaylist",value:function(e,t,r,i){var a,n,s=0,o=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},u=new b,d=0,c=null,f=new _;for(E.lastIndex=0;null!==(a=E.exec(e));){var h=a[1];if(h){f.duration=parseFloat(h);var v=(" "+a[2]).slice(1);f.title=v?v:null,f.tagList.push(v?["INF",h,v]:["INF",h])}else if(a[3]){if(!isNaN(f.duration)){var g=s++;f.type=i,f.start=o,f.levelkey=u,f.sn=g,f.level=r,f.cc=d,f.baseurl=t,f.relurl=(" "+a[3]).slice(1),l.fragments.push(f),c=f,o+=f.duration,f=new _}}else if(a[4]){if(f.rawByteRange=(" "+a[4]).slice(1),c){var m=c.byteRangeEndOffset;m&&(f.lastByteRangeEndOffset=m)}}else if(a[5])f.rawProgramDateTime=(" "+a[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]);else{for(a=a[0].match(k),n=1;n<a.length&&void 0===a[n];n++);var T=(" "+a[n+1]).slice(1),R=(" "+a[n+2]).slice(1);switch(a[n]){case"#":f.tagList.push(R?[T,R]:[T]);break;case"PLAYLIST-TYPE":l.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":s=l.startSN=parseInt(T);break;case"TARGETDURATION":l.targetduration=parseFloat(T);break;case"VERSION":l.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":d++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(T);break;case"KEY":var A=T,S=new p["default"](A),L=S.enumeratedString("METHOD"),w=S.URI,D=S.hexadecimalInteger("IV");L&&(u=new b,w&&["AES-128","SAMPLE-AES"].indexOf(L)>=0&&(u.method=L,u.baseuri=t,u.reluri=w,u.key=null,u.iv=D));break;case"START":var O=T,I=new p["default"](O),C=I.decimalFloatingPoint("TIME-OFFSET");isNaN(C)||(l.startTimeOffset=C);break;case"MAP":var P=new p["default"](T);f.relurl=P.URI,f.rawByteRange=P.BYTERANGE,f.baseurl=t,f.level=r,f.type=i,f.sn="initSegment",l.initSegment=f,f=new _;break;default:y.logger.warn("line parsed but not handled: "+a)}}}return f=c,f&&!f.relurl&&(l.fragments.pop(),o-=f.duration),l.totalduration=o,l.averagetargetduration=o/l.fragments.length,l.endSN=s-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=d,l}},{key:"loadsuccess",value:function(e,t,r){var i=e.data,a=e.url,n=r.type,s=r.id,o=r.level,l=this.hls;if(this.loaders[n]=void 0,void 0!==a&&0!==a.indexOf("data:")||(a=r.url),t.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var u="audioTrack"!==n&&"subtitleTrack"!==n,d=isNaN(o)?isNaN(s)?0:s:o,f=this.parseLevelPlaylist(i,a,d,"audioTrack"===n?"audio":"subtitleTrack"===n?"subtitle":"main");f.tload=t.tload,"manifest"===n&&l.trigger(c["default"].MANIFEST_LOADED,{levels:[{url:a,details:f}],audioTracks:[],url:a,stats:t}),t.tparsed=performance.now(),f.targetduration?u?l.trigger(c["default"].LEVEL_LOADED,{details:f,level:o||0,id:s||0,stats:t}):"audioTrack"===n?l.trigger(c["default"].AUDIO_TRACK_LOADED,{details:f,id:s,stats:t}):"subtitleTrack"===n&&l.trigger(c["default"].SUBTITLE_TRACK_LOADED,{details:f,id:s,stats:t}):l.trigger(c["default"].ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration"})}else{var h=this.parseMasterPlaylist(i,a);if(h.length){var g=this.parseMasterPlaylistMedia(i,a,"AUDIO"),p=this.parseMasterPlaylistMedia(i,a,"SUBTITLES"),m=this.parseMasterPlaylistMedia(i,a,"CLOSED-CAPTIONS");if(g.length){var T=!1;g.forEach(,T===!1&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(y.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main"}))}l.trigger(c["default"].MANIFEST_LOADED,{levels:h,audioTracks:g,subtitles:p,captions:m,url:a,stats:t})}else"manifest"===n?l.trigger(c["default"].ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest"}):l.trigger(c["default"].ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.MANIFEST_EMPTY_ERROR,fatal:!1,url:a,reason:"no level found in manifest",context:r})}else l.trigger(c["default"].ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:v.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var r,i,a=t.loader;switch(t.type){case"manifest":r=v.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case"level":r=v.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":r=v.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(c["default"].ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:r,fatal:i,url:t.url,loader:a,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var r,i,a=t.loader;switch(t.type){case"manifest":r=v.ErrorDetails.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":r=v.ErrorDetails.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":r=v.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(c["default"].ERROR,{type:v.ErrorTypes.NETWORK_ERROR,details:r,fatal:i,url:t.url,loader:a,context:t})}}]),t}(h["default"]);r["default"]=R},{2:2,30:30,31:31,32:32,44:44,51:51}],41:[function(e,t,r){"use strict";bject.defineProperty(r,"__esModule",{value:!0});var a=),n=Math.pow(2,32)-1,s=);r["default"]=s},{}],42:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(33),o=i(s),l=e(32),u=i(l),d=e(51),c=e(41),f=i(c),h=e(30),v=1e4,g=function(){eturn n(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:,{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,i,a,n,s){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated)if(e.samples.length){var o=this.remuxAudio(e,a,n,s);if(t.samples.length){var l=void 0;o&&(l=o.endPTS-o.startPTS),this.remuxVideo(t,a,n,l)}}else{var d=void 0;t.samples.length&&(d=this.remuxVideo(t,a,n)),d&&e.codec&&this.remuxEmptyAudio(e,a,n,d)}r.samples.length&&this.remuxID3(r,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(u["default"].FRAG_PARSED)}},{key:"generateIS",value:function(e,t,r){var i,a,n=this.observer,s=e.samples,o=t.samples,l=this.typeSupported,c="audio/mp4",v={},g={tracks:v},p=void 0===this._initPTS;if(p&&(i=a=1/0),e.config&&s.length&&(e.timescale=e.samplerate,d.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(c="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),v.audio={container:c,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:f["default"].initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(i=a=s[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&o.length){var y=t.inputTimeScale;t.timescale=y,v.video={container:"video/mp4",codec:t.codec,initSegment:f["default"].initSegment([t]),metadata:{width:t.width,height:t.height}},p&&(i=Math.min(i,o[0].pts-y*r),a=Math.min(a,o[0].dts-y*r),this.observer.trigger(u["default"].INIT_PTS_FOUND,{initPTS:i}))}Object.keys(v).length?(n.trigger(u["default"].FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,p&&(this._initPTS=i,this._initDTS=a)):n.trigger(u["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,i){var a,n,s,o,l,c,v,g,p=8,y=e.timescale,m=e.samples,T=[],E=m.length,k=this._PTSNormalize,b=this._initDTS;m.sort(;var _=m.reduce(0);if(_<0){d.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(_/90)+" ms to overcome this issue");for(var R=0;R<m.length;R++)m[R].dts+=_}var A=void 0;A=r?this.nextAvcDts:t*y;var S=m[0];l=Math.max(k(S.dts-b,A),0),o=Math.max(k(S.pts-b,A),0);var L=Math.round((l-A)/90);r&&L&&(L>1?d.logger.log("AVC:"+L+" ms hole between fragments detected,filling it"):L<-1&&d.logger.log("AVC:"+-L+" ms overlapping between fragments detected"),l=A,m[0].dts=l+b,o=Math.max(o-L,A),m[0].pts=o+b,d.logger.log("Video/PTS/DTS adjusted: "+Math.round(o/90)+"/"+Math.round(l/90)+",delta:"+L+" ms")),c=l,S=m[m.length-1],g=Math.max(k(S.dts-b,A),0),v=Math.max(k(S.pts-b,A),0),v=Math.max(v,g);var w=this.isSafari;w&&(a=Math.round((g-l)/(m.length-1)));for(var D=0,O=0,I=0;I<E;I++){for(var C=m[I],P=C.units,x=P.length,M=0,N=0;N<x;N++)M+=P[N].data.length;O+=M,D+=x,C.length=M,w?C.dts=l+I*a:C.dts=Math.max(k(C.dts-b,A),l),C.pts=Math.max(k(C.pts-b,A),C.dts)}var F=O+4*D+8;try{n=new Uint8Array(F)}catch(U){return void this.observer.trigger(u["default"].ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var B=new DataView(n.buffer);B.setUint32(0,F),n.set(f["default"].types.mdat,4);for(var G=0;G<E;G++){for(var j=m[G],V=j.units,H=0,W=void 0,K=0,Y=V.length;K<Y;K++){var q=V[K],X=q.data,z=q.data.byteLength;B.setUint32(p,z),p+=4,n.set(X,p),p+=z,H+=4+z}if(w)W=Math.max(0,a*Math.round((j.pts-j.dts)/a));else{if(G<E-1)a=m[G+1].dts-j.dts;else{var J=this.config,Q=j.dts-m[G>0?G-1:G].dts;if(J.stretchShortVideoTrack){var Z=J.maxBufferHole,$=J.maxSeekHole,ee=Math.floor(Math.min(Z,$)*y),te=(i?o+i*y:this.nextAudioPts)-j.pts;te>ee?(a=te-Q,a<0&&(a=Q),d.logger.log("It is approximately "+te/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=Q}else a=Q}W=Math.round(j.pts-j.dts)}T.push({size:H,duration:a,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=g+a;var re=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,T.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){
var ie=T[0].flags;ie.dependsOn=2,ie.isNonSync=0}e.samples=T,s=f["default"].moof(e.sequenceNumber++,l,e),e.samples=[];var ae={data1:s,data2:n,startPTS:o/y,endPTS:(v+a)/y,startDTS:l/y,endDTS:this.nextAvcDts/y,type:"video",nb:T.length,dropped:re};return this.observer.trigger(u["default"].FRAG_PARSING_DATA,ae),ae}},{key:"remuxAudio",value:function(e,t,r,i){var a,n,s,l,c,g,p,y,m,T,E,k,b,_,R,A,S=e.inputTimeScale,L=e.timescale,w=S/L,D=e.isAAC?1024:1152,O=D*w,I=this._PTSNormalize,C=this._initDTS,P=!e.isAAC&&this.typeSupported.mpeg,x=P?0:8,M=[],N=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),N=e.samples,A=this.nextAudioPts,r|=N.length&&A&&(Math.abs(t-A/S)<.1||Math.abs(N[0].pts-A-C)<20*O),r||(A=t*S),i&&e.isAAC)for(var F=0,U=A;F<N.length;){var B=N[F],G=I(B.pts-C,A),j=G-U,V=Math.abs(1e3*j/S);if(j<=-O)d.logger.warn("Dropping 1 audio frame @ "+(U/S).toFixed(3)+"s due to "+V+" ms overlap."),N.splice(F,1),e.len-=B.unit.length;else if(j>=O&&V<v&&U){var H=Math.round(j/O);d.logger.warn("Injecting "+H+" audio frame @ "+(U/S).toFixed(3)+"s due to "+1e3*j/S+" ms gap.");for(var W=0;W<H;W++)R=U+C,R=Math.max(R,C),_=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount),_||(d.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),_=B.unit.subarray()),N.splice(F,0,{unit:_,pts:R,dts:R}),e.len+=_.length,U+=O,F+=1;B.pts=B.dts=U+C,U+=O,F+=1}else Math.abs(j)>.1*O,U+=O,0===F?B.pts=B.dts=C+A:B.pts=B.dts=N[F-1].pts+O,F+=1}for(var K=0,Y=N.length;K<Y;K++){if(n=N[K],l=n.unit,T=n.pts-C,E=n.dts-C,void 0!==m)k=I(T,m),b=I(E,m),s.duration=Math.round((b-m)/w);else{k=I(T,A),b=I(E,A);var q=Math.round(1e3*(k-A)/S),X=0;if(r&&e.isAAC&&q){if(q>0&&q<v)X=Math.round((k-A)/O),d.logger.log(q+" ms hole between AAC samples detected,filling it"),X>0&&(_=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount),_||(_=l.subarray()),e.len+=X*_.length);else if(q<-12){d.logger.log(-q+" ms overlapping between AAC samples detected, drop frame"),e.len-=l.byteLength;continue}k=b=A}if(p=Math.max(0,k),y=Math.max(0,b),!(e.len>0))return;var z=P?e.len:e.len+8;try{c=new Uint8Array(z)}catch(J){return void this.observer.trigger(u["default"].ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating audio mdat "+z})}P||(a=new DataView(c.buffer),a.setUint32(0,z),c.set(f["default"].types.mdat,4));for(var Q=0;Q<X;Q++)R=k-(X-Q)*O,_=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount),_||(d.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),_=l.subarray()),c.set(_,x),x+=_.byteLength,s={size:_.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(s)}c.set(l,x);var Z=l.byteLength;x+=Z,s={size:Z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(s),m=b}var $=0,ee=M.length;if(ee>=2&&($=M[ee-2].duration,s.duration=$),ee){this.nextAudioPts=k+w*$,e.len=0,e.samples=M,g=P?new Uint8Array:f["default"].moof(e.sequenceNumber++,y/w,e),e.samples=[];var te={data1:g,data2:c,startPTS:p/S,endPTS:this.nextAudioPts/S,startDTS:y/S,endDTS:(b+w*$)/S,type:"audio",nb:ee};return this.observer.trigger(u["default"].FRAG_PARSING_DATA,te),te}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,i){var a=e.inputTimeScale,n=e.samplerate?e.samplerate:a,s=a/n,l=this.nextAudioPts,u=(void 0!==l?l:i.startDTS*a)+this._initDTS,c=i.endDTS*a+this._initDTS,f=1024,h=s*f,v=Math.ceil((c-u)/h),g=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(d.logger.warn("remux empty Audio"),!g)return void d.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var p=[],y=0;y<v;y++){var m=u+y*h;p.push({unit:g,pts:m,dts:m}),e.len+=g.length}e.samples=p,this.remuxAudio(e,t,r)}},{key:"remuxID3",value:,{key:"remuxText",value:,{key:"_PTSNormalize",value:]),e}();r["default"]=g},{30:30,32:32,33:33,41:41,51:51}],43:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(32),o=i(s),l=function(){eturn n(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,r,i,a,n,s,l){var u=this.observer,d="";e&&(d+="audio"),t&&(d+="video"),u.trigger(o["default"].FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:d,nb:1,dropped:0}),u.trigger(o["default"].FRAG_PARSED)}}]),e}();r["default"]=l},{32:32}],44:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=/^(\d+)x(\d+)$/,s=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,o=function(){eturn a(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:,{key:"hexadecimalIntegerAsNumber",value:,{key:"decimalFloatingPoint",value:,{key:"enumeratedString",value:,{key:"decimalResolution",value:],[{key:"parseAttrList",value:]),e}();r["default"]=o},{}],45:[{}],46:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=o=15,l=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},c={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],v={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:,g=p=),y=),m=function(){eturn a(e,[{key:"equals",value:function(e){for(var t=!0,r=0;r<l;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<l;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:,{key:"moveCursor",value:,{key:"backSpace",value:,{key:"insertChar",value:,{key:"clearFromPos",value:,{key:"clear",value:,{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:,{key:"setPenStyles",value:]),e}(),T=function(){eturn a(e,[{key:"reset",value:,{key:"equals",value:,{key:"copy",value:,{key:"isEmpty",value:,{key:"backSpace",value:function(){var e=this.rows[this.currRow];e.backSpace()}},{key:"clearToEndOfRow",value:,{key:"insertChar",value:function(e){var t=this.rows[this.currRow];t.insertChar(e)}},{key:"setPen",value:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)}},{key:"moveCursor",value:,{key:"setCursor",value:,{key:"setPAC",value:,{key:"setBkgData",value:,{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:,{key:"getDisplayText",value:,{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),E=function(){eturn a(e,[{key:"reset",value:,{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:,{key:"setMode",value:,{key:"insertChars",value:,{key:"ccRCL",value:function(){v.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:,{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){v.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:,{key:"ccFON",value:,{key:"ccRDC",value:function(){v.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){v.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:,{key:"ccEDM",value:,{key:"ccCR",value:,{key:"ccENM",value:,{key:"ccEOC",value:,{key:"ccTO",value:,{key:"ccMIDROW",value:,{key:"outputDataUpdate",value:,{key:"cueSplitAtTime",value:]),e}(),k=function(){function e(t,r,a){i(this,e),this.field=t||1,this.outputs=[r,a],this.channels=[new E(1,r),new E(2,a)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}return a(e,[{key:"getHandler",value:,{key:"setHandler",value:,{key:"addData",value:,{key:"parseCmd",value:,{key:"parseMidrow",value:,{key:"parsePAC",value:,{key:"interpretPAC",value:,{key:"parseChars",value:,{key:"parseBackgroundAttributes",value:,{key:"reset",value:,{key:"cueSplitAtTime",value:]),e}();r["default"]=k},{}],47:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=e(54),n=e(53),s=i(n),o={createCues:function(e,t,r){for(var i,n,o,l,u,d=[],c=0;c<r.rows.length;c++)if(i=r.rows[c],o=!0,l=0,u="",!i.isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&o?l++:(u+=i.chars[f].uchar,o=!1);i.cueStartTime=e,e===t&&(t+=1e-4),n=new s["default"](e,t,(0,a.fixLineBreaks)(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?n.line=c+1:n.line=c>7?c-2:c+1,n.align="left",n.position=Math.max(0,Math.min(100,100*(l/32))),d.push(n)}return d}};t.exports=o},{53:53,54:54}],48:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}tion l(e,t){e&&(t.fragments.forEach(function(t,r){t&&(t.duration=e.duration,t.end=t.endPTS=e.endPTS+t.duration*r,t.start=t.startPTS=e.startPTS+t.start)}),t.PTSKnown=!0)}function u(e,t,r){if(s(e,t,r)){f.logger.log("Adjusting PTS using last level due to CC increase within current level");var i=o(t.details,r);l(i,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.findFirstFragWithCC=a,r.findFragWithCC=n,r.shouldAlignOnDiscontinuities=s,r.findDiscontinuousReferenceFrag=o,r.adjustPtsByReferenceFrag=l,r.alignDiscontinuities=u;var d=e(45),c=i(d),f=e(51)},{45:45,51:51}],49:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e(50),o=i(s),l=function(){function e(t,r,i,n){a(this,e),this.hls=t,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o["default"](r),this.fast_=new o["default"](i)}return n(e,[{key:"sample",value:,{key:"canEstimate",value:,{key:"getEstimate",value:,{key:"destroy",value:function(){}}]),e}();r["default"]=l},{50:50}],50:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=);r["default"]=n},{}],51:[function(e,t,r){"use strict";ct.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={trace:i,debug:i,log:i,warn:i,info:i,error:i},u=l;r.enableLogs=r.logger=u},{}],52:[{}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){function e(e){if("string"!=typeof e)return!1;var t=n[e.toLowerCase()];return!!t&&e.toLowerCase()}nction i(i,n,s){var o=this,l=),u={};l?o=document.createElement("custom"):u.enumerable=!0,o.hasBeenReset=!1;var d="",c=!1,f=i,h=n,v=s,g=null,p="",y=!0,m="auto",T="start",E=50,k=50,b="middle";if(Object.defineProperty(o,"id",r({},u,{get:function(){return d},set:)),Object.defineProperty(o,"pauseOnExit",r({},u,{get:function(){return c},set:)),Object.defineProperty(o,"startTime",r({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},u,{get:function(){return h},set:)),Object.defineProperty(o,"text",r({},u,{get:function(){return v},set:)),Object.defineProperty(o,"region",r({},u,{get:function(){return g},set:)),Object.defineProperty(o,"vertical",r({},u,{get:function(){return p},set:)),Object.defineProperty(o,"snapToLines",r({},u,{get:function(){return y},set:)),Object.defineProperty(o,"line",r({},u,{get:function(){return m},set:)),Object.defineProperty(o,"lineAlign",r({},u,{get:function(){return T},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},u,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},u,{get:function(){return k},set:)),Object.defineProperty(o,"align",r({},u,{get:set:)),o.displayState=void 0,l)return o}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var a="auto",n={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=i}()},{}],54:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}.defineProperty(r,"__esModule",{value:!0}),r.fixLineBreaks=void 0;var d=e(53),c=i(d),f=s.prototype={set:get:has:alt:integer:percent:;var h=new c["default"](0,0,0),v="middle"===h.align?"middle":"center";a.prototype={parse:function(e){r i=this;e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{var a;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;a=t();var n=a.match(/^WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var s=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(s?s=!1:a=t(),i.state){case"HEADER":/:/.test(a)?r(a):a||(i.state="ID");continue;case"NOTE":a||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){i.state="NOTE";break}if(!a)continue;if(i.cue=new c["default"](0,0,""),i.state="CUE",a.indexOf("-->")===-1){i.cue.id=a;continue}case"CUE":try{l(a,i.cue,i.regionList)}catch(d){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var f=a.indexOf("-->")!==-1;if(!a||f&&(s=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=a;continue;case"BADCUE":a||(i.state="ID");continue}}}catch(d){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:,r.fixLineBreaks=u,r["default"]=a},{53:53}],55:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=e(54),n=i(a),s=function(e){for(var t=e.length,r=void 0,i=void 0,a=void 0,n="",s=0;s<t;)if(r=e[s++],0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(r);break;case 12:case 13:i=e[s++],n+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[s++],a=e[s++],n+=String.fromCharCode((15&r)<<12|(63&i)<<6|(63&a)<<0)}return n},o=l=u=d={parse:function(e,t,r,i,a,d){var c=/\r\n|\n\r|\n|\r/g,f=s(new Uint8Array(e)).trim().replace(c,"\n").split("\n"),h="00:00.000",v=0,g=0,p=0,y=[],m=void 0,T=!0,E=new n["default"];E.oncue=function(e){var t=r[i],a=r.ccOffset;t&&t["new"]&&(g?a=r.ccOffset=t.start:u(r,i,p)),p&&!g&&(a=p+r.ccOffset-r.presentationOffset),e.startTime+=a-g,e.endTime+=a-g,e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&y.push(e)},E.onparsingerror=E.onflush=f.forEach(,E.flush()}};t.exports=d},{54:54}],56:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=e(51),s=function(){eturn a(e,[{key:"destroy",value:,{key:"abort",value:,{key:"load",value:,{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(a){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(a){return void this.callbacks.onError({code:e.status,text:a.message},t)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:,{key:"loadtimeout",value:,{key:"loadprogress",value:]),e}();r["default"]=s},{51:51}]},{},[37])(37)})}});