"use strict";(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[8198],{93135:(e,t,a)=>{a.r(t),a.d(t,{default:);var r=a(38241);const n=(0,a(46255).Z)("div",{target:"en7hm9f0"})({name:"1azakc",styles:"text-align:center"});var l=a(32758),o=a(61711),s=a(70515),i=a(63189),c=a(46423),u=a(87805),d=a(97216),m=a(80942),h=a(90758),p=a(54715),g=a(75628),f=a(36599),v=a(10003),C=a(96832),y=a(71130),Z=a(34853),b={name:"1efi8gv",styles:"font-weight:bold"},S={name:"akdqam",styles:"margin-top:1rem"};const N=({close:e,onSuccess:t,saveContactInfo:a,savedName:N,savedPhoneNumber:A,countryPhoneInfo:P})=>{const _=(0,h.Z)(),k=(0,y.useSelector)(g.so),x=(0,y.useSelector)(f.xb),D=(0,y.useSelector)(v._),[w,L]=(0,C.useState)(null),[O,T]=(0,C.useState)(""),[B,E]=(0,C.useState)(""),[F,I]=(0,C.useState)(A),[M,X]=(0,C.useState)(x),[$,z]=(0,C.useState)(!1),[H,K]=(0,C.useState)(!1),U=(0,Z.tZ)("a",{css:b,href:"https://help.iheart.com",rel:"noreferrer",target:"_blank",children:_("Help Center")}),j=(e,t)=>{const{value:a=""}=e.target,r=a.trim();$||r===O&&r===B||z(!0),e.target.value=r,t(r)},q=(0,C.useCallback)((e=>{const t=e.trim(),[a,r]=t.split(/\s/g);return!t||a&&r}),[]);(0,C.useEffect)((()=>{if(q(N)){const e=N.trim(),[t,a]=e.split(/\s/g);T(t),E(a)}}),[N,T,E,q]);const R=Y=(0,C.useCallback)((,[P]),J=(0,C.useCallback)((e=>e.match(D)||!e),[M]);(0,C.useEffect)((()=>{K($&&q(`${O} ${B}`)&&Y(F)&&!w)}),[O,B,$,F,q,Y,w]);const V={color:m.ZP.colors.gray.medium,display:"block",fontSize:"13px",letterSpacing:"2px",marginBottom:"1rem",textTransform:"uppercase",width:"100%"};return(0,Z.BX)("div",{children:[(0,Z.tZ)(s.Z,{css:(0,r.iv)({fontSize:m.ZP.fonts.size.medium,justifyContent:"center",margin:"0 0 1rem",width:"90%"},"",""),children:_("Update Contact Information")}),(0,Z.tZ)("p",{css:(0,r.iv)({display:w?"block":"none",overflow:"auto"},"",""),"data-test":"form-error",children:w}),(0,Z.BX)("form",{css:S,method:"POST",onSubmit:e=>(e.preventDefault(),!e.target.querySelectorAll(".error").length&&(L(""),a({fullName:`${O} ${B}`.trim(),phoneNumber:F,postalCode:M}).then(().catch((e=>{var t,a;const r=null!=(t=null==e||null==(a=e.response)?void 0:a.data)?t:e;c.ZP.error([c.Ke.AUTH,c.Ke.FORM],{},{},new Error(r)),L((e=>{if(!e.errors||!e.errors[0])return _("There was an error updating your email");const{description:t}=e.errors[0];return t||e.errors[0]})(r))})))),children:[(0,Z.tZ)(i.Z,{dataTest:"setting-first-name-input",errorMessage:_("Please enter your first name"),labelStyles:V,name:"firstName",onChange:e=>j(e,T),placeholder:_("Add your first name"),title:_("First Name"),type:"text",validateFn:R,value:O}),(0,Z.tZ)(i.Z,{dataTest:"setting-last-name-input",errorMessage:_("Please enter your last name"),labelStyles:V,name:"lastName",onChange:placeholder:_("Add your last name"),title:_("Last Name"),type:"text",validateFn:R,value:B}),(0,Z.tZ)(i.Z,{dataTest:"setting-phone-number-input",errorMessage:_("Please enter a valid phone number"),labelStyles:V,name:"phoneNumber",onChange:e=>{const{value:t}=e.target,a=t?(0,p.un)(P,t):"";return $||a===A||z(!0),e.target.value=a,I(a)},placeholder:(0,p.J1)(P),title:_("Phone Number"),type:"tel",validateFn:Y,value:F}),(0,Z.tZ)(d.Z,{shouldShow:k===l.Z.CA,children:(0,Z.tZ)(i.Z,{errorMessage:_("Please enter a valid postal code"),labelStyles:V,name:"postalCode",onChange:e=>{const{value:t}=e.target;return e.target.value=t,$||t===x||z(!0),X(t)},placeholder:"Add your postal code",title:_("Postal Code"),type:"string",validateFn:J,value:M})}),(0,Z.BX)(n,{children:[(0,Z.tZ)(o.Z,{"aria-label":_("Confirm"),"data-test":"change-contact-info-confirm-button",disabled:!H,marginRight:"1rem",styleType:"dark",type:"submit",children:_("Confirm")}),(0,Z.tZ)(u.Z,{"aria-label":_("Cancel"),"data-test":"change-contact-info-cancel-button",onClick:children:_("Cancel")})]})]}),(0,Z.BX)("p",{css:(0,r.iv)({color:m.ZP.colors.gray[400],marginTop:"2rem",textAlign:"center"},"",""),children:[(0,Z.tZ)("br",{}),_("Visit Our {helpCenterLink}",{helpCenterLink:U})]})]})};var A=a(29929),P=a(24586),_=a(40887),k={name:"2cobu1",styles:"width:unset;text-align:left"};const x=({modal:e,close:t})=>{var a,r;const n=(0,y.useDispatch)(),o=(0,y.useSelector)(g.Yt),s=(0,y.useSelector)(g.so),i=null!=(a=(0,y.useSelector)(f.oY))?a:"",c=(0,y.useSelector)(f.OD)===i?"":i,u=null!=(r=(0,y.useSelector)(f.ly))?r:"",d=u&&u.length>o.callingCode.length+2?(0,p.un)(o,u):"";return(0,Z.tZ)(e,{children:(0,Z.tZ)(e.Container,{children:(0,Z.BX)(e.Content,{css:k,children:[(0,Z.tZ)(N,{close:t,countryPhoneInfo:o,onSuccess:saveContactInfo:async({fullName:e,phoneNumber:t,postalCode:a})=>{await n((0,_.uF)({name:e||"",phoneNumber:t&&t.length>=o.callingCode.length+2?`+${t.split("").filter(().join("")}`:"",postalCode:s===l.Z.CA?a:null}))},savedName:c,savedPhoneNumber:d}),(0,Z.tZ)(e.Close,{})]})})})}}}]);
//# sourceMappingURL=components-ChangeContactInfoModal.www.js.map