import{r as R,a4 as U,b6 as k,c as z,ac as $,w as q,aa as x,q as B,ap as E}from"./graphql.5cf3693b.js";import{aF as W,a1 as N,ab as O,G as j,bs as F,af as G,b1 as H,ai as J,aC as K,m as V,L as X,l as Q}from"./itinerary-entities.5f897bcd.js";import"./itinerary-modules.2ea32123.js";import"./service-client.4862e840.js";const Y=()=>{const b=R(!1),s=U(),w=W(),o=N(),l=O(),M=j(),I=F(),{isAirplaneTicket:A,isMrbilit:C}=G(),a=H(),{day:u,switchCalendar:m}=Q(),P=J();C.value?k({title:a.seoMeta.title,ogUrl:`https://mrbilit.com${s.fullPath}`,description:a.seoMeta.description,ogDescription:"مِستر بلیط وب سایت و اپلیکیشنی برای خرید ارزان و اینترنتی بلیط هواپیما، بلیط قطار و بلیط اتوبوس به صورت ساده، سریع و ارزان است. کافیست برای رزرو بلیط ، مسیر و تاریخ را مشخص کنید تا مستر بلیط تمام موارد را جستجو کرده و بلیط ارزان به مقصد دلخواه شما را پیشنهاد دهد.",ogTitle:a.seoMeta.title,ogSiteName:"مستر بلیط",ogImage:"https://mrbilit.com/icon.png"}):A.value&&(P.setLocale("apt"),k({title:a.seoMeta.title,ogUrl:`https://airplaneticket.ir${s.fullPath}`,description:a.seoMeta.description,ogDescription:a.seoMeta.description,ogTitle:a.seoMeta.title,ogSiteName:"ایرپلین تیکت",ogImage:"/airplaneticket/apple-touch-icon.png"}));const L=z(()=>o.termsStatus),{open:T}=K({component:$(()=>E(()=>import("./OrganizationalSaleTerms.c13be6f6.js"),["./OrganizationalSaleTerms.c13be6f6.js","./itinerary-entities.5f897bcd.js","./graphql.5cf3693b.js","./itinerary-modules.2ea32123.js","./service-client.4862e840.js","./itinerary-entities.d77bab5d.css"],import.meta.url)),attrs:{permanent:!0}});q(L,r=>{r==="notAccepted"&&T()}),x(()=>{V.interceptors.request.use(t=>{var e,n;if((e=t.url)!=null&&e.split("/")[2].includes("mrbilit")||(n=t.url)!=null&&n.split("/")[2].includes("atighgasht")){const{token:c}=o;c&&!t.headers.Authorization&&(t.headers.Authorization=`Bearer ${c}`);const{uuid:i}=o;i&&(t.headers["X-PlayerID"]=i)}return t},t=>Promise.reject(t)),o.init(),b.value=localStorage.getItem("advertClosed")===null;let r=localStorage.length;for(;r--;){const t=localStorage.key(r);t&&/analytics-*/.test(t)&&localStorage.removeItem(t)}}),B(()=>{var i,d,g,p,h,S,f,_,v;l.mounted=!0,(i=window.webengage)==null||i.onReady(()=>{window.webengage.options("webpush.registerServiceWorker",!1)}),s.path.startsWith("/reserve")||I.resetAutoReserve(),o.loadUser(),o.loadScore(),w.checkHasUnread(),X.revalidateStorage(),l.init();const r=localStorage.getItem("calendar"),t=localStorage.getItem("locale");r&&r!==u.calendar&&m(),t&&t!==u.locale&&m();const{query:e,path:n}=s;e.utm_campaign||e.utm_medium||e.utm_source||e.utm_creative||e.utm_content||e.utm_key||e.utm_service||e.tatoken?o.sendUTM({utmCampaign:((d=e.utm_campaign)==null?void 0:d.toString())||"",utmMedium:((g=e.utm_medium)==null?void 0:g.toString())||"",utmSource:((p=e.utm_source)==null?void 0:p.toString())||"",utmCreative:((h=e.utm_creative)==null?void 0:h.toString())||"",utmContent:((S=e.utm_content)==null?void 0:S.toString())||"",utmKey:((f=e.utm_key)==null?void 0:f.toString())||""||((_=e.tatoken)==null?void 0:_.toString())||"",utmServiceType:((v=e.utm_service_type)==null?void 0:v.toString())||"",url:n,referrer:document.referrer}):e.ezam_auth_token&&(o.loginByThirdParty({whiteLabel:"ezam",token:e.ezam_auth_token.toString()}),history.replaceState({},"",s.path)),M.trackPosthog("user-date-time",{date:new Date().toISOString()});const c=localStorage.getItem("remove-old-cache-checked");caches&&!c&&caches.keys().then(D=>{localStorage.setItem("remove-old-cache-checked","true"),D.forEach(y=>{y==="workbox-runtime-https://mrbilit.com/"&&caches.delete(y)})})})},ae=Y;export{ae as default};
