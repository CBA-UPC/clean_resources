(function($,wxpHelpers,wgsdk){'use strict';var NAV_SUB_MENU_SELECTOR='.js-nav-submenu';var MOBILE_NAV_SUB_MENU_SELECTOR='.js-nav';var CONTAINER_SELECTOR='.js-autocomplete-container';var JS_LAYOUT_SELECTOR='.js-layout';var AUTOCOMPLETE_NAMESPACE='.autocomplete';var AUTOCOMPLITE_LINE_SELECTOR='.js-autocomplete';var AUTOCOMPLITE_LINE_CLASS='js-autocomplete';var AUTOCOMPLITE_ITEM_CLASS='b-autocomplete_item';var AUTOCOMPLITE_ITEM_SELECTOR='.'+AUTOCOMPLITE_ITEM_CLASS;var AUTOCOMPLETE_SELECTED_CLASS='b-autocomplete_item__selected';var AUTOCOMPLETE_SELECTED_SELECTOR='.'+AUTOCOMPLETE_SELECTED_CLASS;var globalAutocompleteCounter=0;var KEY_BACKSPACE=8;var KEY_TAB=9;var KEY_ENTER=13;var KEY_ESCAPE=27;var KEY_DOWN=40;var KEY_UP=38;var ON_BLUR_HIDE_TIMEOUT=50;wxpHelpers.scrollTo=function(target,options){var $target=$(target),targetTopOffset,$navMenu=$(NAV_SUB_MENU_SELECTOR+':visible, '+MOBILE_NAV_SUB_MENU_SELECTOR+':visible'),menuOffset,defaults={scrollDuration:100,scrollTopOffset:0};options=$.extend({},defaults,options);if($navMenu.length&&$target.length){menuOffset=($navMenu.position().top+$navMenu.height());setTimeout(function(){if($.browser.mobile&&$.browser.iemobile){$target.get(0).scrollIntoView();}else{targetTopOffset=($target.offset().top-options.scrollTopOffset);if($navMenu.css('position')==='fixed'){targetTopOffset-=menuOffset;}
$('html,body').stop().animate({scrollTop:targetTopOffset},options.scrollDuration);}},10);}};wxpHelpers.autocomplete=function(inputSelector,url,options){var defaults={'clearSelector':null,'autosubmit':false,'autoApply':true,'autoSelectExactMatch':false,'minlength':0,'preprocessor':function(value,prefix){value=$.trim(value);prefix=$.trim(prefix);var matchedSubstrIndex=value.toLowerCase().indexOf(prefix.toLowerCase());value=value.substr(0,matchedSubstrIndex)+'<span class="b-autocomplete_match">'+value.substr(matchedSubstrIndex,prefix.length)+'</span>'+value.substr(matchedSubstrIndex+prefix.length);return value;},'zindex':null,'customWrapper':null,'itemRenderedHandler':null,'dataprocessor':null,'changeCallback':null,'responseDataPreprocessor':null,'changeLocation':null,'template':$('<div>'),'viewallElement':$(),'noResultsElement':$(),'selectedHandler':null,'clearHandler':null,'platform':null,};options=$.extend({},defaults,options);var autocompleteContainerId='js-autocomplete-container-'+(++globalAutocompleteCounter);var $body=$('body');var $layout=$(JS_LAYOUT_SELECTOR);var $input;var $clear;var $lines;var $wrapper;var $wrapperContainer;var $template;var watcher;var fetcher;var searchValue;var $form;var $window=$(window);var $viewAll=options.viewallElement;var $noResults=options.noResultsElement;var itemRenderedHandler=options.itemRenderedHandler;var selectedHandler=options.selectedHandler;var clearHandler=options.clearHandler;var shouldAttemptAutoSelect=false;var skipFocusHandler=false;var platform=options.platform;$template=defaults.template;function getItemContainer(){if(options.customWrapper===null){return $wrapper;}else{return $wrapperContainer;}}
function updatePosition(){var inputOffset=$input.offset();var ancestorFixed=false;$input.parents().each(function(){ancestorFixed=ancestorFixed||($(this).css('position')=='fixed');});if(ancestorFixed){$wrapper.css({'position':'fixed'});inputOffset.top-=$window.scrollTop();inputOffset.left-=$window.scrollLeft();}
$wrapper.outerWidth($input.outerWidth()).css({'top':inputOffset.top+$input.outerHeight(),'left':inputOffset.left,'width':$input.outerWidth(),});function resizeList(){var $lines=$(AUTOCOMPLITE_LINE_SELECTOR).show();var len=$lines.length;var scrollTop=$body.scrollTop()+$window.scrollTop();var spaceMax=Math.floor((($window.height()-$input.outerHeight()-inputOffset.top+scrollTop))/$lines.first().outerHeight());var settingMax=window.MAX_SUGGESTS_COUNT;var showViewall=false;if(len>=settingMax){showViewall=true;}
if(!showViewall&&len<=spaceMax){showViewall=showViewall||false;}else{showViewall=true;$lines.slice(Math.max(spaceMax-1,0)).hide();}
$viewAll.toggle(showViewall);}
if($lines.first().height()==0){setTimeout(resizeList,0);}else{resizeList();}}
function getSelected(ev){var hovered=$(AUTOCOMPLETE_SELECTED_SELECTOR+':first');if(hovered.length||!ev)
return hovered;else
return $(ev.target).closest(AUTOCOMPLITE_ITEM_SELECTOR);}
function setSelected($sel){getSelected().removeClass(AUTOCOMPLETE_SELECTED_CLASS);if($sel){$sel.addClass(AUTOCOMPLETE_SELECTED_CLASS);}}
function updateInputWithSelected(applyFilter){var $sel=getSelected();if($sel.length){var text=$sel.text();watcher.setValue(text,applyFilter);$input[0].setSelectionRange(0,text.length);if(typeof options.changeCallback==='function'){options.changeCallback();}}}
function restoreInput(){watcher.restoreValue();if(typeof options.changeCallback==='function'){options.changeCallback();}}
function isSuggestionVisible(){return $wrapper.css('display')!=='none';}
function setVisibility(shouldShow){if(!$wrapper)
return;if(shouldShow)
updatePosition();if(shouldShow!==isSuggestionVisible()){if(shouldShow&&(($lines&&$lines.length)||$noResults.length>0)){$wrapper.show();$layout.on('click'+AUTOCOMPLETE_NAMESPACE,function(e){var $clickedElement=$(e.target);if(!$clickedElement.is(inputSelector)){hideAutocomplete();}});$(window).on('resize orientationchange scroll',updatePosition);}else{$wrapper.hide();$layout.off('click'+AUTOCOMPLETE_NAMESPACE);$(window).off('resize orientationchange scroll',updatePosition)}}}
function applySelected(){fetcher.cancelRequest();updateInputWithSelected(true);setVisibility(false);$input.change();}
function hideAutocomplete(){fetcher.cancelRequest();if(isSuggestionVisible()){setTimeout(function(){setVisibility(false);},ON_BLUR_HIDE_TIMEOUT);}}
function onRequestComplete(data){var i;var content;var $newElement;if(typeof options.responseDataPreprocessor==='function'){data=options.responseDataPreprocessor(data);}
if(data&&data.result){getItemContainer().empty();$(AUTOCOMPLITE_LINE_SELECTOR).remove();var len=data.result.length;for(i=0;i<len;++i){content=data.result[i].text;if(typeof options.preprocessor==='function'){content=options.preprocessor(content,searchValue);}
$newElement=$template.clone().addClass(AUTOCOMPLITE_LINE_CLASS+' '+AUTOCOMPLITE_ITEM_CLASS).html(content).show();getItemContainer().append($newElement);if(typeof itemRenderedHandler==='function'){itemRenderedHandler(content,searchValue);}}
$lines=$(AUTOCOMPLITE_LINE_SELECTOR);if(len>0){$lines.hover(function(e){setSelected($(this));},function(e){setSelected(null);});selectExactMatch();var selected=getSelected();if(shouldAttemptAutoSelect){fireSelected(selected);}
shouldAttemptAutoSelect=false;}
setVisibility(len>0||$noResults.length>0);$noResults.toggle(len==0);}}
function preventAutocomplete(){fetcher.cancelRequest();setVisibility(false);}
function destroy(){preventAutocomplete();if($input.length){$wrapper.remove();$input.off(AUTOCOMPLETE_NAMESPACE);$input.parents('form:first').off(AUTOCOMPLETE_NAMESPACE);}
if(watcher){watcher.destroy();}}
var selectExactMatch=function(){if($lines&&$lines.length){var $match=$lines.filter(function(i,e){return $(e).text().trim()==searchValue.trim();}).last();if($match.length)
setSelected($match);}};var fireSelected=function(e){var handled=false;if(typeof(selectedHandler)=='function'){if(selectedHandler(getSelected())){e.preventDefault();handled=true;}}else if(selectedHandler){console.error("selectedHandler must be a function");}
return handled;};function changeLocation(e){var possibleUrl=$(e.currentTarget).find('[data-url]').add(e.currentTarget).filter('[data-url]').data('url');if(possibleUrl){top.location.href=possibleUrl;setTimeout(1);return false;}}
function onValueChange(value,oldValue){var data={'fl':value,'platform':platform};if(value.length===0||value.length<options.minlength){fetcher.cancelRequest();setVisibility(false);return;}
searchValue=value;selectExactMatch();fetcher.cancelRequest();if(typeof options.dataprocessor==='function'){data=options.dataprocessor(data);}
fetcher.sendRequest(data,false);$clear.toggle(value.length!=0);$noResults.hide();$wrapper.css({display:$wrapperContainer.children().length>0?'':'none'});}
function onFocusHandler(e){if(!skipFocusHandler)
onValueChange($input.val());}
function onClickTapHandler(e){if(!isSuggestionVisible())
onValueChange($input.val());}
function onKeydownHandler(e){var $selected;var input=$input[0];if(!isSuggestionVisible()){if(e.keyCode===KEY_ENTER){onValueChange($input.val());shouldAttemptAutoSelect=true;}
return;}
if(e.keyCode===KEY_ESCAPE){restoreInput();setVisibility(false);}
if($lines&&(e.keyCode===KEY_UP||e.keyCode===KEY_DOWN)){$selected=getSelected();if($selected.length){setSelected((e.keyCode===KEY_UP)?$selected.prev(':visible'):$selected.next(':visible'));}else{setSelected((e.keyCode===KEY_UP)?$lines.filter(':visible').last():$lines.filter(':visible').first());}
watcher.stopWatch();if(getSelected().length){updateInputWithSelected(false);}else{restoreInput();input.setSelectionRange(input.value.length,input.value.length);}
watcher.startWatch();input.focus();e.preventDefault();}else if(e.keyCode===KEY_BACKSPACE){setTimeout(function(){$input.trigger('input');},1);}else if(e.keyCode===KEY_ENTER||e.keyCode===KEY_TAB){if(fireSelected(e))
return;if(!options.autosubmit&&isSuggestionVisible()){applySelected();e.preventDefault();}else{fetcher.cancelRequest();}}}
$(function(){$clear=$(options.clearSelector).hide();$input=$(inputSelector);$form=$input.closest('form');$viewAll.on('click',;if($input.length){if(options.customWrapper===null){$wrapper=$('<div class="b-autocomplete"></div>');}else{$wrapper=$(options.customWrapper);$wrapperContainer=$wrapper.find(CONTAINER_SELECTOR);}
if(options.zindex!==null){$wrapper.css('zIndex',options.zindex+globalAutocompleteCounter);}
$wrapper.attr('id',autocompleteContainerId).hide().appendTo('body');$wrapper.trigger('appended');$wrapper.on('click',AUTOCOMPLITE_LINE_SELECTOR,function(ev){if(typeof selectedHandler==='function'){skipFocusHandler=true;setTimeout(function(){skipFocusHandler=false;},1000);if(options.autoApply){selectedHandler(getSelected(ev));applySelected();$input.focus();return;}
if(!selectedHandler(getSelected(ev))){return;}}
if(options.changeLocation===true){changeLocation(ev);}else if(options.autosubmit){$form.submit();}});$input.on('keydown'+AUTOCOMPLETE_NAMESPACE,onKeydownHandler);$input.on('keyup'+AUTOCOMPLETE_NAMESPACE,onKeyupHandler);$input.on('focus'+AUTOCOMPLETE_NAMESPACE,onFocusHandler);$input.on('click tap'+AUTOCOMPLETE_NAMESPACE,onClickTapHandler);$input.on('blur'+AUTOCOMPLETE_NAMESPACE,onBlurHandler);$input.parents('form:first').on('submit'+AUTOCOMPLETE_NAMESPACE,function(e){if(isSuggestionVisible()){applySelected();}});watcher=new wgsdk.InputWatcher($input,null,onValueChange,options.postprocessor);if(typeof(url)==='function'){fetcher=new wgsdk.NoAjaxFetcher(url,null,onRequestComplete);}else{fetcher=new wgsdk.AjaxFetcher({'url':url},null,onRequestComplete,100);}}
$(options.clearSelector).on('click',function(e){e.preventDefault();$input.val('').focus().trigger('input');$clear.hide();setVisibility(false);if(typeof clearHandler==='function'){clearHandler();}});});return{'setVisibility':setVisibility,'preventAutocomplete':preventAutocomplete,'destroy':destroy};};})(jQuery,WXP_HELPERS_MODULE={},wgsdk);;(function($){'use strict';var JS_ALERT_CLOSE_SELECTOR='.js-alert-close';var JS_ALERT_SELECTOR='.js-alert';$(function(){$(JS_ALERT_CLOSE_SELECTOR).on('click',function(e){e.preventDefault();$(this).closest(JS_ALERT_SELECTOR).hide();});});})(jQuery);;(function($){'use strict';var SCROLL_TO_OFFSET=-10;var $navMenu=$('.js-nav-submenu');var jump=function(hash){var result=false;try{var $target=$(hash);$target=$target.length?$target:$('[name="'+hash.slice(1)+'"]');if($target.length&&$navMenu.is(':visible')&&$navMenu.css('position')=='fixed'){result=true;setTimeout(function(){var headerOffset=($navMenu.position().top+$navMenu.height());if($.browser.mobile&&$.browser.iemobile){$target.get(0).scrollIntoView();}else{$('html,body').scrollTop($target.offset().top+SCROLL_TO_OFFSET-headerOffset);}},10);}
if(history){var loc=window.location;history.pushState(null,null,loc.origin+loc.pathname+loc.search+hash);}}
catch(ex){result=false;}
return result;};$(function(){$('a[href*="#"]').click(function(ev){if($navMenu.length&&location.hostname===this.hostname&&location.pathname.replace(/^\//,'')===this.pathname.replace(/^\//,''))
jump(this.hash)&&ev.preventDefault();});});$(window).on('hashchange',function(ev){jump(window.location.hash)&&ev.preventDefault();});if(window.location.hash){jump(window.location.hash);}})(jQuery);;$(function(){'use strict';var $document=$(document);var $window=$(window);var $centermostElement;var centermostElementYProportionalToWindow;var cachedLeaves;var stopUpdates=false;var updatePositionTimer;var oldWidth=$window.width();var DEBUG=false;var isGoodLeaf=function(){if(this instanceof SVGElement)
return false;if(this.children.length)
return false;var $e=$(this);var parents=$e.parents().addBack();for(var i=parents.length-1;i>=0;i--){var p=parents.eq(i);if(p.css('display')=='none')
return false;var position=this.style.position;if(position==='fixed'||position==='sticky')
return false;}
var w=$e.width();var h=$e.height();var windowWidth=$window.width();var windowHeight=$window.height();var windowArea=windowWidth*windowHeight;return(w*h<windowArea&&w*h!==0);};var findElementClosestToCenter=function(){var windowHeight=window.innerHeight,threshold=windowHeight<4,windowCenterY=windowHeight/2,result=document.body,resultCenterY=Number.MAX_VALUE,resultDistance=Number.MAX_VALUE,leaves=getLeaves();for(var i=0;i<leaves.length;i++){var leaf=leaves[i],h=leaf.clientHeight,y=leaf.getBoundingClientRect().top+h/2,leafDistance=Math.abs(windowCenterY-y);if(leafDistance<resultDistance){result=leaf;if(leafDistance<threshold){break;}
resultCenterY=y;resultDistance=leafDistance;}}
return $(result);};var restoreScreenRelativeOffset=function($e,y){$document.css('overflow','hidden');var centermostElementOffset=$centermostElement[0].getBoundingClientRect(),windowHeight=$window.height(),newY=y*windowHeight+windowHeight/2-centermostElementOffset.height/2,scrollTop=$document.scrollTop()+(centermostElementOffset.top-newY);$document.scrollTop(scrollTop);$document.css('overflow','');};var updatePosition=function(){if(!stopUpdates){if(DEBUG&&$centermostElement)
$centermostElement.css({'background':''});$centermostElement=findElementClosestToCenter();var windowHeight=$window.height();var centermostElementOffset=$centermostElement[0].getBoundingClientRect();centermostElementYProportionalToWindow=((centermostElementOffset.top+centermostElementOffset.height/2)-
windowHeight/2)/windowHeight;if(DEBUG)
$centermostElement.css({'background':'blue'});}else{if(DEBUG)
console.log('center element update postponed because user is resizing');scheduleUpdatePosition(200);}};var scheduleUpdatePosition=function(time){if(updatePositionTimer){clearTimeout(updatePositionTimer);}
updatePositionTimer=setTimeout(updatePosition,time);};var getLeaves=function(){if(!cachedLeaves){cachedLeaves=$('.js-layout_main *').filter(isGoodLeaf).toArray();}
return cachedLeaves;};$(document).on('scroll',function(ev){scheduleUpdatePosition(500);});$(window).on('resize',function(ev){var newWidth=$window.width();if(oldWidth!==newWidth){if($centermostElement){stopUpdates=true;setTimeout(0);}
else{scheduleUpdatePosition(500);}}
oldWidth=newWidth;});scheduleUpdatePosition(1000);});;(function(root,factory){if(typeof exports=='object')module.exports=factory()
else if(typeof define=='function'&&define.amd)define(factory)
else root.Spinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations
function createEl(tag,prop){var el=document.createElement(tag||'div'),n
for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}
if(s[prop]!==undefined)return prop}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
function getColor(color,idx){return typeof color=='string'?color:color[idx%color.length]}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'50%',left:'50%',position:'absolute'}
function Spinner(o){this.opts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width
css(el,{left:o.left,top:o.top})
if(target){target.insertBefore(el,target.firstChild||null)}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(getColor(o.color,i),'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:getColor(o.color,i),opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));;var CUSTOM_SPINNER=(function(Spinner){var SHOW_SPINNER_DELAY=350,DEFAULT_SPINNER_CONFIG={lines:9,length:3,width:3,radius:4,corners:1,rotate:5,direction:1,color:'#FFF',speed:0.9,trail:55,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'50%',left:'50%',showSpinnerDelay:SHOW_SPINNER_DELAY};var CustomSpinner=function(options){this.spinners={};this.options=$.extend({},DEFAULT_SPINNER_CONFIG,options);this.showSpinnerTimeout=undefined;this.spinners['common']=this.init(this.options);};CustomSpinner.prototype={init:function(options){var spinner;if(options===undefined){options=DEFAULT_SPINNER_CONFIG;}else{options=$.extend({},DEFAULT_SPINNER_CONFIG,options);}
spinner=new Spinner(options).spin();return spinner;},addNewType:function(type,opts){var spinner;if(type===undefined){type='common';}
spinner=this.init(opts);this.spinners[type]=spinner;return spinner;},show:function($container,type){var defer=$.Deferred();if(type===undefined){type='common';}
clearTimeout(this.showSpinnerTimeout);this.showSpinnerTimeout=setTimeout(_.bind(function(){$container[0].appendChild(this.spinners[type].el);defer.resolve();},this),this.options.showSpinnerDelay);return defer;},hide:;return CustomSpinner;})(Spinner);;var OVERLAY=(function($,CustomSpinner){var TRIGGER_SELECTOR='.js-overlay-trigger',WRAPPER_SELECTOR='.js-overlay-wrapper',CONTENT_SELECTOR='.js-overlay-content',CLOSE_OVERLAY_SELECTOR='.js-close',MODAL_SPINNER_WRAPPER_SELECTOR='.js-modal-spinner',OPEN_OVERLAY_CLASS='overlay-open',NAMESPACE='.wgOverlay',PLUGIN_NAME='wgOverlay';var Overlay=function($element){this.$html=$('html');this.$body=$('body');this.$overlayWrapper=$(WRAPPER_SELECTOR);this.$overlayTrigger=$element;this.loadContentUrl=this.$overlayTrigger.data('contentUrl');this.$overlayContent=this.$overlayWrapper.find(CONTENT_SELECTOR);this.$closeControl=this.$overlayWrapper.find(CLOSE_OVERLAY_SELECTOR).detach();this.$modalSpinner=this.$overlayWrapper.find(MODAL_SPINNER_WRAPPER_SELECTOR).detach();this.initSpinner();this.$overlayTrigger.on('click'+NAMESPACE,$.proxy(function(e){e.preventDefault();e.stopPropagation();this.openOverlay();},this));};Overlay.prototype={openOverlay:function(){var $container=this.$overlayWrapper;this.$overlayContent.append(this.$modalSpinner.clone());this.$html.addClass(OPEN_OVERLAY_CLASS);$container.fadeIn().trigger('overlay_open');this.loadContent(this.loadContentUrl).then(function(data){$container.trigger('content_loaded',data)}).fail(;},activateCloseControl:function($closeControl){var $currentControl=$closeControl.clone();this.$overlayContent.append($currentControl);$currentControl.on('click',$.proxy(this))},closeOverlay:function(){this.$html.removeClass(OPEN_OVERLAY_CLASS);this.$html.css('overflow-y','');return this.$overlayWrapper.fadeOut().promise();},addContent:function(contentHtml){this.$overlayContent.empty();this.activateCloseControl(this.$closeControl);this.$overlayContent.append($(contentHtml));},initSpinner:loadContent:function(url){var plugin=this,$container=this.$overlayWrapper;this.customSpinner.show($container.find(MODAL_SPINNER_WRAPPER_SELECTOR));return $.ajax({url:url}).then(function(data){plugin.addContent(data);});}};$.fn[PLUGIN_NAME]=function(options){return this.each(function(){var element=this,plugin;if(!$.data(element,PLUGIN_NAME)){plugin=new Overlay($(element));$.data(element,PLUGIN_NAME,plugin);}})};$(;return Overlay;})(jQuery,CUSTOM_SPINNER);;$(function(){var isOldIE=($.browser.msie&&$.browser.version<=9),ITEM_OPEN_CLASS='global-nav_item__open',OPEN_ITEM_SELECTOR='.'+ITEM_OPEN_CLASS,SUBMENU_OPEN_CLASS='global-submenu__open',OPEN_SUBMENU_SELECTOR='.'+SUBMENU_OPEN_CLASS,NAV_LINK_SELECTOR='.js-global-nav-opener',JS_SUBMENU_PREFIX='.js-global-submenu',SUBMENU_CONTAINER_SELECTOR='.js-global-nav-submenu-container',MOBILE_MEDIA_QUERY='all and (max-width: 749px)';var $submenuContainer=$(SUBMENU_CONTAINER_SELECTOR);function closeAllMenus($except){$(OPEN_ITEM_SELECTOR).not($except).removeClass(ITEM_OPEN_CLASS);$(OPEN_SUBMENU_SELECTOR).not($except).removeClass(SUBMENU_OPEN_CLASS);$submenuContainer.toggle(false);$('body').off('.globalmenuclear');}
$(NAV_LINK_SELECTOR).each(function(i,item){$(item).on('click',function(e){var selector='.js-global-nav-link-'+$(item).data('link'),$submenuTrigger=$(this).parent('.global-nav_item'),openedClass='global-submenu__open',$submenu=$(JS_SUBMENU_PREFIX+selector);e.stopPropagation();e.preventDefault();if(!$submenu.hasClass(openedClass)){closeAllMenus($submenu);$('body').on('click.globalmenuclear touchstart.globalmenuclear',function(e){if($(e.target).parents().index($('.global-navigation'))===-1){closeAllMenus();}});}
if(!isMobile()){var attr=$submenu.data('positionAttribute')||'left';if(attr==='left'){$submenu.css('right','auto');$submenu.css(attr,($submenuTrigger.position()[attr]||0)+'px');}else if(attr==='right'){$submenu.css('left','auto');$submenu.css(attr,($(window).width()-($submenuTrigger.position().left+$submenuTrigger.width())||0)+'px');}}
$submenu.toggleClass(openedClass);$(item).parent().toggleClass('global-nav_item__open');$submenuContainer.toggle();if($submenu.length!==0){return false;}});});});;(function($,_,Modernizr){'use strict';var LAYOUT_SELECTOR='.js-layout',LAYOUT_MAIN_SELECTOR='.js-layout_main',LAYOUT_OVERLAY_SELECTOR='.js-layout_overlay',GLOBAL_NAV_SELECTOR='.js-global-navigation',INDEX_SLIDER_SELECTOR='.js-index-slider',MENU_ACTION_ATTR='menuAction',BLOCK_PROGRESSION_CLASS='js-no-progression',MIN_HEIGHT_SOURCE_ATTR='minHeightSourceSelector',MIN_HEIGHT_BORDER_SOURCE_ATTR='minHeightBorderSourceSelector',TOGGLE_CLASS_ATTR='toggleClass',TRANSLATE_X_SOURCE_ATTR='translateXSourceSelector',NAMESPACE='mainMenu',ANIMATION_DELAY=0,$html=$('html'),$indexSlider=$(INDEX_SLIDER_SELECTOR);var exports=window,isSafeModeForIOSChrome=navigator.userAgent.match('CriOS'),$window=$(exports),commands=[{selector:'body',filters:['saveScrollPosition','deferredClass']},{selector:LAYOUT_SELECTOR,filters:['saveScrollPosition','deferredClass']},{selector:LAYOUT_MAIN_SELECTOR,filters:[(isSafeModeForIOSChrome?undefined:'translateX'),'negativeTop','deferredClass','deferredResetTop','deferredRepaint']},{selector:GLOBAL_NAV_SELECTOR,filters:['translateX','deferredClass']},{selector:LAYOUT_OVERLAY_SELECTOR,filters:['deferredClass','translateX']}],transitionEnd='t oT msT mozT webkitT '.split(' ').join('ransitionEnd '),lastState=false;function toggleMenu(visible,e){function setMinHeight($element){var sum=function(selector,fn,args){return _.reduce($(selector),function(value,element){var $element=$(element),elementValue=$element[fn].apply($element,args||[]);return value+(elementValue||0);},0);},height=sum($element.data(MIN_HEIGHT_SOURCE_ATTR),'outerHeight',[true]),border=sum($element.data(MIN_HEIGHT_BORDER_SOURCE_ATTR),'css',['borderBottomWidth']),value=height+border,updateHandler=_.debounce(setMinHeight.bind(null,$element),ANIMATION_DELAY/20),previousHandler=$element.data('handler');if(previousHandler){$window.off('click',previousHandler);}
if(visible){$element.data('handler',updateHandler);$window.on('click',updateHandler);}
return $element.css('min-height',value?value:'');}
function prefixProperty(property){var hasPrefixed=(typeof(Modernizr)!=='undefined'&&Modernizr.prefixed);return hasPrefixed&&Modernizr.prefixed(property)||property;}
function saveScrollPosition(){if(visible){$window.data('scrollTop',$window.scrollTop());}}
function setNegativeTop($element,filters){var scrollTop=$window.data('scrollTop');if(visible){$window.data('scrollTop',scrollTop);$element.css('top',visible?-scrollTop:'');}else if($.inArray('deferredResetTop',filters)===-1){$window.scrollTop($window.data('scrollTop'));$element.css('top','');}
return $element;}
function setTranslateX($element){var key=prefixProperty('transform'),value=visible?getMaxValueUsingSelectorEngine($element.data(TRANSLATE_X_SOURCE_ATTR),'width'):0;return $element.css(key,value?'translateX('+value+'px)':'');}
function toggleClass($element){var value=$element.data(TOGGLE_CLASS_ATTR);return value?$element.toggleClass(value,visible):$element;}
function deferredResetTop($element){var handler=(visible)?$.noop:function(){$element.css('top','');$window.scrollTop($window.data('scrollTop'));};return deferredOperation($element,handler,'resetTimer');}
function deferredToggleClass($element){var value=$element.data(TOGGLE_CLASS_ATTR),handler=(visible)?toggleClass:function(){$element.removeClass(value);};return deferredOperation($element,handler,'toggleTimer');}
function deferredRepaint($element){var handler=function(){if(window.wxp!==undefined){$element.toggle();$element.get(0).offsetHeight;$element.toggle();}};return deferredOperation($element,handler,'repaint');}
function deferredOperation($element,handler,dataKey){var callback;clearTimeout($element.data(dataKey));if(visible){return handler($element);}
callback=function(){handler($element);handler=$.noop;$element.off(transitionEnd,callback);};return $element.one(transitionEnd,callback).data(dataKey,setTimeout(callback,ANIMATION_DELAY));}
function getMaxValueUsingSelectorEngine(selector,fn,args){var value=$(selector).map(function(){var $that=$(this),returnValue=$that[fn].apply($that,args||[]);return parseInt(returnValue,10)||0;}).toArray();return value.length>0?Math.max.apply(Math,value):0;}
function processCommands(commands){var $elements,filterMap={'class':toggleClass,'deferredClass':deferredToggleClass,'deferredRepaint':deferredRepaint,'minHeight':setMinHeight,'translateX':setTranslateX,'negativeTop':setNegativeTop,'deferredResetTop':deferredResetTop,'saveScrollPosition':saveScrollPosition};$.each(commands,function(i,instruction){var $element=$(instruction.selector);$elements=$elements?$elements.add($element):$element;$.each(instruction.filters,function(j,filter){var fn=filterMap[filter];if(fn){fn($element,instruction.filters);}});});if($elements){$html.css('overflow','');$indexSlider.removeClass(BLOCK_PROGRESSION_CLASS);setTimeout(function(){if(visible){$html.css('overflow','hidden');$indexSlider.addClass(BLOCK_PROGRESSION_CLASS);}},ANIMATION_DELAY);}}
if(lastState!==visible){processCommands(commands);lastState=visible;}
if(e&&e.preventDefault){e.preventDefault();return false;}}
$(function(){var $window=$(window),actions={hide:toggleMenu.bind(null,false),show:toggleMenu.bind(null,true),toggle:function(e){var $layout=$(LAYOUT_SELECTOR);toggleMenu(!$layout.hasClass($layout.data(TOGGLE_CLASS_ATTR)),e);}},runAction=function(){var actionName=$(this).data(MENU_ACTION_ATTR),fn=actions[actionName];if(fn){return fn.apply(this,arguments);}},widthChangeCallbackHandler=function(callback){var currentWidth=$window.width(),lastWidth;return function(e){lastWidth=$window.width();if(lastWidth!==currentWidth){currentWidth=lastWidth;return callback.apply(this,arguments);}};},widthHandler=widthChangeCallbackHandler(actions.hide);$window.on('resize',widthHandler).on('hide.'+NAMESPACE,actions.hide).on('show.'+NAMESPACE,actions.show);actions.hide();});})(jQuery,window._,window.Modernizr);;wgsdk.showFormFieldError=(function($){var obj=function(form_id){$('input[type=password], input[type=text]',form_id).each(function(){var fieldset=$(this).parents('fieldset');if($('.b-error-text',fieldset).length>0){fieldset.removeClass('accept').addClass('decline');$('.b-decline',fieldset).css({'display':'none'});}})};return obj;})($)
wgsdk.InputLengthValidator=(function($){var obj=function(inputSelector,params){params=params||{};var minValue=params.min;var maxValue=params.max;var required=params.required;var requiredErrorMsg=params.requiredErrorMsg||translate('FORMS_VALIDATION_EMPTY_FIELD_ERROR');var minLengthErrorMsg=params.minLengthErrorMsg||translate('FORMS_VALIDATION_MIN_LENGTH_ERROR');var maxLengthErrorMsg=params.maxLengthErrorMsg||translate('FORMS_VALIDATION_MAX_LENGTH_ERROR');minValue=minValue!==undefined?minValue:-1;maxValue=maxValue!==undefined?maxValue:$(inputSelector).attr('maxlength');return function(value){var length=value.length;var empty=length==0;if(required&&empty){return{'status':'error','error':requiredErrorMsg};}
if(!empty&&length<minValue)
return{'status':'error','error':minLengthErrorMsg};if(maxValue&&maxValue>0){if(length>maxValue)
return{'status':'error','error':maxLengthErrorMsg};}
return{'status':'ok'};};}
return obj;})($)
wgsdk.InputWatcher=(function($){var obj=function($selector,preprocessor,onChange,postprocessor,events){var instance=this,defaultEvents='input.iw propertychange.iw change.iw forceCheck.iw';if(typeof(events)!=='string'||events.length===0){events=defaultEvents;}
this.oldValue='';this.$selector=$selector;this.getValue=function(){return this.$selector.val();};this.setValue=function(value,apply){if(typeof postprocessor==='function'){value=postprocessor(value,apply,this.oldValue);}
this.$selector.val(value);if(apply){instance.oldValue=value;}};this.restoreValue=this.destroy=this.processChange=function(e){var value=instance.getValue(),v;if(preprocessor){v=preprocessor(value);if(v!=value){instance.setValue(v,false);value=instance.getValue();}}
if(value!=instance.oldValue||e.type==='forceCheck'){if(onChange){onChange(value,instance.oldValue);}
instance.oldValue=value;}};this.stopWatch=function(){this.$selector.off(events);};this.startWatch=this.startWatch();}
return obj;})($);wgsdk.removeError=(function($){var obj=function(selector){var fieldset=$(selector).parents('fieldset');$('.b-error',fieldset).remove();$('.b-decline, .b-accept, .b-verification',fieldset).removeAttr('style');};return obj})($)
wgsdk.AjaxFetcher=(function($){var obj=function(defAjaxSettings,requestStarted,requestFinished,delay){var instance=this;var curAjax;var curAjaxTimer;function onError(XMLHttpRequest,textStatus,errorThrown){requestFinished(null);instance.cleanRequest();}
function onSuccess(data,textStatus,XMLHttpRequest){requestFinished(data);instance.cleanRequest();}
this.sendRequest=function(data,instant){instance.cancelRequest();var settings={'dataType':'json','success':onSuccess,'error':onError};$.extend(true,settings,defAjaxSettings,{'data':data});function sendIt(){if(requestStarted)
requestStarted(settings);curAjax=$.ajax(settings);}
if(!instant&&delay&&(delay>0))
curAjaxTimer=window.setTimeout(sendIt,delay);else
sendIt();};this.cancelRequest=function(){if(curAjax||curAjaxTimer)
onError();};this.cleanRequest=function(){if(curAjaxTimer){window.clearTimeout(curAjaxTimer);curAjaxTimer=null;}
if(curAjax){curAjax.abort();curAjax=null;}};}
return obj;})($)
wgsdk.NoAjaxFetcher=(function($){var obj=function(getDataCallback,requestStarted,requestFinished){this.sendRequest=this.cancelRequest=function(){requestFinished(null);};}
return obj})($)
wgsdk.forms=(function($){var obj={auth:function(params){var RELOGIN_FORM_URL=window.RELOGIN_FORM_URL?window.RELOGIN_FORM_URL:"should be defined like global workspace";var submit_params={success:iframeProxy:true};var ext_params={source:RELOGIN_FORM_URL,OnReady:function(dialog){$('.js-cancel-button',dialog).click(;}};wgsdk.forms.submit_from_popup(false,'#js-relogin-form','#js-relogin-form-wrapper',submit_params,ext_params);},auth_dialog:function(){var LOGIN_FORM_URL=window.LOGIN_FORM_URL?window.LOGIN_FORM_URL:'should be defined in global namespace';var submit_params={success:function(data){if(data&&data.redirect_to){location.href=data.redirect_to;}
else{setTimeout(function(){location.reload();},100);}},error:function(data){if(data.enable_captcha){window.wotCaptcha.Enable();$('.fieldset_captcha').show();}
wgsdk.waiting('close');},iframeProxy:true};var ext_params={source:LOGIN_FORM_URL,stayOpened:true,OnSubmitCallback:function(){wgsdk.waiting('open');}};wgsdk.forms.submit_from_popup(false,'#js-auth-popup-form','#js-auth-popup-dialog',submit_params,ext_params);},post:function(params){wgsdk.waiting('open');$.ajax({type:'post',data:params.data||{},url:params.url,dataType:'json',success:function(data,status,request){if(!data){wgsdk.error(translate('FORMS_UNKNOWN_ERROR'));return;}
if(data.error_code==600){wgsdk.forms.auth({success:);return;}
if(data.status=='redirect'){if(data.redirect_url){location.href=data.redirect_url;}
return;}
if(data.error){wgsdk.error(data.error);return;}
if(params.success_replace){$(params.success_replace.hide,selector).hide();$(params.success_replace.show,selector).show();}
if(params.success_add_text){wgsdk.forms.add_text_to_element(params.success_add_text.selector,params.success_add_text.params);}
if(params.success)params.success(data,status,request);},error:params.error||function(request,text,errorThrown){if(wgsdk.dev!=null){wgsdk.dev.ajax_default_error_handler(request,text,errorThrown);}else{wgsdk.error(translate('FORMS_UNKNOWN_ERROR'));return;}},complete:function(){wgsdk.waiting('close');if(params.complete)params.complete();wotUpdateDateTimeFields();}});},hide_errors:function(form_selector){$(form_selector).removeClass('b-error-on-form');$('.b-message-error-text',form_selector).empty();$('.b-error-on-form-field',form_selector).removeClass('b-error-on-form-field');$('.b-error-text',form_selector).empty();},clear_inputs:function(form_selector){$('input[type="password"]',form_selector).val('');$('input[type="text"]',form_selector).val('');},get_next_iframe_number:function(){if(!wgsdk.forms.__iframe_number){wgsdk.forms.__iframe_number=0;}
return++wgsdk.forms.__iframe_number;},submit:function(selector,params){params=params||{};params.after_error='after_error'in params?params.after_error:'focus';var form=$(selector);var MAX_PROCESSING_TIME=10;if(window.PENDING_OPERATION_JAVASCRIPT_TIMEOUT){MAX_PROCESSING_TIME=window.PENDING_OPERATION_JAVASCRIPT_TIMEOUT;}
var processingStartTime=undefined;var onFormErrorHandler=params.onFormError||wgsdk.forms.submit_onFormError;var onFormError=var onFieldErrorHandler=params.onFieldError||wgsdk.forms.submit_onFieldError;var onFieldError=function set_focus(wrapper){window.setTimeout(function(e){wgsdk.set_focus(wrapper);},1000);}
var processing=false;var OnSuccess=function(data,status,request){processing=false;wgsdk.forms.hide_errors(form);if(!data){wgsdk.error(translate('FORMS_UNKNOWN_ERROR'));return;}
if(data.status==='ok'){if(params.success)params.success(data,status,request);if(params.success_replace){$(params.success_replace.hide,selector).hide();$(params.success_replace.show,selector).show();}
if(params.success_add_text){if(params.success_add_text.params.from_server){params.success_add_text.params.text=data.log_message;}
wgsdk.forms.add_text_to_element(params.success_add_text.selector,params.success_add_text.params);}
if(data.success_url)location.href=data.success_url;if(params.success_url)location.href=params.success_url;return;}
if(data.status==='warning'){if(params.warning)params.warning(data,status,request);return;}
if(data.status==='processing'){var date=new Date();if(processingStartTime===undefined){processingStartTime=date.getTime();}
if(date.getTime()-processingStartTime<MAX_PROCESSING_TIME*1000){processing=true;setTimeout(function(){$.ajax({type:'get',url:data.status_url,dataType:'json',success:OnSuccess,error:OnError,complete:OnComplete,cache:false});},1000);return;}
if('onTimeout'in params){params.onTimeout(form);}
if('stop_url'in data&&data['stop_url']){$.ajax({type:'post',url:data.stop_url,dataType:'json'});}
data.status='error';data.error=translate('FORMS_TIMEOUT');}
if(data.status==='redirect'){if(data.redirect_url){location.href=data.redirect_url;}
return;}
if(data.status=='error')
{if(data.error_type=='admin_error'){alert(data.errors['__all__']);}
if(window.wotCaptcha){wotCaptcha.Reload();}
if(data.error_code==600){wgsdk.forms.auth({success:function(){form.submit();},OnCancel:);return;}
if(data.error_code==413){data.error=translate('FORMS_ERROR_413');if(data.data.size_limit){var limit=data.data.size_limit;var size=''+limit+' b';if(limit>1024){limit=limit/1024;size=limit.toFixed(2)+' Kb';}
if(limit>1024){limit=limit/1024;size=limit.toFixed(2)+' Mb';}
data.error=translate('FORMS_ERROR_413_WITH_LIMIT').replace('%(size)i',size);}}
if(data.errors&&data.errors.__all__&&data.errors.__all__.length>0)
onFormError(data.errors.__all__[0]);if(data.error&&data.error.length>0)
onFormError(data.error);if(data.errors)
for(var field in data.errors)
if(field!='__all__'&&data.errors[field]&&data.errors[field].length>0){var prefix=data.form_prefix?data.form_prefix+"-":"";onFieldError('id_'+prefix+field,data.errors[field][0]);}}
else
{onFormError(translate('FORMS_UNKNOWN_ERROR'));}
if(params.error_replace){$(params.error_replace.hide,selector).hide();$(params.error_replace.show,selector).show();}
if(params.success_add_text&&params.success_add_text.params.from_server){wgsdk.forms.add_text_to_element(params.success_add_text.selector,{clear:true});}
if(params.error)params.error(data);if(params.after_error=='focus')set_focus(form);};var OnError=function(request,text,errorThrown){wgsdk.forms.hide_errors(form);onFormError(translate('FORMS_SERVER_UNAVAILABLE'));if(window.wotCaptcha){wotCaptcha.Reload();}
if(params.error)params.error();if(window.ajax_default_error_handler!=null){window.ajax_default_error_handler(request,text,errorThrown);}
if(params.after_error=='focus')set_focus(form);};var OnComplete=function(){if(!processing){wgsdk.waiting('close');wotUpdateDateTimeFields();}};wgsdk.waiting('open');var target=form.attr('target');if(target){var iframe_number=wgsdk.forms.get_next_iframe_number();var iframe_id=target+'-'+iframe_number;var iframe=$('<iframe id="'+iframe_id+'" name="'+iframe_id+'" style="display:none;"></iframe>');iframe.appendTo($('body'));form.attr('target',iframe_id);if(params.action){form.attr('action',params.action);}
function ProcessIframeAnswer(dataString,params){params=params||{};var data=undefined;var status='success';var request={status:200,statusText:'iframe fake status'};try{var text=dataString;if(!text)return;data=JSON.parse(text);}
catch(err){status='error';request.status=404;OnError(request,status,translate('FORMS_WRONG_SERVER_ANSWER'));OnComplete();}
if(data){OnSuccess(data,status,request);OnComplete();}
if(params.OnComplete)params.OnComplete();iframe.remove();}
if(params.iframeProxy){var IFRAME_PROXY=window.IFRAME_PROXY?window.IFRAME_PROXY:"should be defined in global workspace";var proxy=new Porthole.WindowProxy(IFRAME_PROXY,iframe_id);Porthole.proxies[proxy.proxyIFrameName]=proxy;var EventListener=undefined;EventListener=function(messageEvent){ProcessIframeAnswer(messageEvent.data,{OnComplete:function(){proxy.removeEventListener(EventListener);delete Porthole.proxies[iframe_id];}});};proxy.addEventListener(EventListener);}
else{iframe.load(function(e){var dataString='';if($('#json_data',iframe.contents()).length){dataString=$('#json_data',iframe.contents()).text();}else{dataString=$('body',iframe.contents()).text();}
ProcessIframeAnswer(dataString);});}
return false;}
else{var ext_data=params.ext_data||[];if(typeof ext_data==='function'){ext_data=ext_data(selector,params);}
var data=form.serializeArray();$.ajax({type:'post',url:params.action||form.attr('action'),data:data.concat(ext_data),dataType:'json',success:OnSuccess,error:OnError,complete:OnComplete});return true;}},submit_onFormError:function(form,error_message){var block=$('.b-message-error',form);if(!block.length){block=$('<div class="b-message-error b-message-error__none" />').prependTo(form);}
var text=$('.b-message-error-text',block);if(!text.length){text=$('<div class="b-message-error-text" />').prependTo(block);}
text.html(error_message);block.parents('form').addClass('b-error-on-form');},submit_onFieldError:function(element_id,form,error_message){var field=$('#'+element_id,form);if(!field.length){wgsdk.forms.submit_onFormError(form,element_id+': '+error_message);return;}
var block=false;var owner=field.parent();for(var i=0;i<2;++i){block=$('.b-error',owner);if(block.length>0)break;owner=owner.parent();}
if(!block.length){block=$('<div class="b-error" />');var tinymce_object=field.parent().find('#'+element_id+'_parent');if(tinymce_object.length){tinymce_object.after(block);}else{field.after(block);}}
var arrow=$('.arrow',block);if(!arrow.length){arrow=$('<div class="arrow png"><!-- --></div>').appendTo(block);}
var text=$('.b-error-text',block);if(!text.length){text=$('<div class="b-error-text" />').appendTo(block);}
text.html(error_message);block.parents('fieldset').addClass('b-error-on-form-field');},add_text_to_element:function(selector,params){var element=$(selector);if(params.clear&&params.clear==true)element.html('');if(params.text)element.html((element.html()!=""?element.html()+'<br />':'')+params.text);},submit_from_popup:function(popup_selector,form_selector,dialog_id,submit_params,ext_params){var src='';if(ext_params.source){src=ext_params.source;}
var OnClosed=function(e,ui){var dialog=$(dialog_id);var form=$(form_selector,dialog);if(ext_params.OnCloseCallback){ext_params.OnCloseCallback(popup_selector,form_selector,submit_params,ext_params);}
form.unbind();};var OnReady=function(e,ui){var dialog=$(dialog_id);var success=submit_params.success;var OnSuccess=function(data,textStatus,XmlHttpRequest){if(success){success(data,textStatus,XmlHttpRequest);}
if(!ext_params.stayOpened){dialog.dialog('close');}};submit_params.success=OnSuccess;var form=$(form_selector,dialog);if(ext_params.OnOpenCallback){ext_params.OnOpenCallback(popup_selector,form_selector,submit_params,ext_params);}
wgsdk.forms.init_countables();wgsdk.set_focus(dialog);form.submit(function(e){if(ext_params.OnSubmitCallback)
ext_params.OnSubmitCallback();if(wgsdk.forms.submit(form_selector,submit_params)){e.preventDefault();}});dialog.dialog("option","position",'center');if(ext_params.OnReady){ext_params.OnReady(dialog);}
if($('.js-step').length){var IE='\v'=='v';var stepWrap=$(this);if(IE){setTimeout(function(){wgsdk.step(stepWrap);},100);}else{wgsdk.step($(this));}}};var dialog_params={modal:true,open:OnReady,close:OnClosed,type:ext_params.type||"get",resizable:false};if(typeof(ext_params.autoOpen))dialog_params.autoOpen=ext_params.autoOpen;var ShowDialog=function(e){try{$(src).removeClass('js-hidden');}
catch(err){}
if(src){if(typeof ext_params.source==='function'){dialog_params.url=src();}
else{dialog_params.url=src;}}
if(typeof ext_params.buttons!=='undefined'){dialog_params.buttons=ext_params.buttons;}
if(ext_params.data){if(typeof ext_params.data==='function'){dialog_params.ext_data=ext_params.data();}
else{dialog_params.ext_data=ext_params.data;}}
wgsdk.dialog(dialog_id,dialog_params);if(e)e.preventDefault();}
if(popup_selector){$(popup_selector).click(ShowDialog);}
else{ShowDialog();}},init_countables:function(){$(".js-countable-input").add(".js-countable-field input[type=text]").add(".js-countable-field textarea").each(function(idx,field){$(field).closest(".js-countable-field").removeClass('js-countable-field');$(field).closest(".js-countable-input").removeClass('js-countable-input');var fieldset=$(field).closest('fieldset');if(fieldset.length!=1){alert('js-countable: fieldset not found');return;}
var max_value_el=$('.js-countable-max-value',fieldset);if(max_value_el.length!=1){alert('js-countable: max-value not specified');return;}
var focusInColor=max_value_el.data('focusinColor'),focusOutColor=max_value_el.data('focusoutColor'),zeroNumColor=max_value_el.data('zeronumColor'),defaultColor=max_value_el.css('color'),isFocusColorsAvailable=(focusInColor!==undefined&&focusOutColor!==undefined);var addFocusInOutEvents=function(counter){if(isFocusColorsAvailable){var input=$('input',counter.closest('fieldset'));input.focusout(function(){if(counter.text()!=="0"){counter.css('color',focusOutColor);}});input.focusin(function(){if(counter.text()!=="0"){counter.css('color',focusInColor);}});}};var handleCounterColor=function(counter){if(counter.text()==="0"&&zeroNumColor!==undefined){counter.css('color',zeroNumColor);}else{if(isFocusColorsAvailable){if($('input',counter.closest('fieldset')).is(":focus")){counter.css('color',focusInColor);}else{counter.css('color',focusOutColor);}}else{counter.css('color',defaultColor);}}}
var max_value=parseInt(max_value_el.text());$(field).attr('maxlength',max_value);max_value_el.text(wgsdk.thousands(max_value));var curr_number=$('.b-informer .number',fieldset);if(curr_number.length!=1){fieldset.append('<span class="number"></span>');}
var onPress=function(e){var isCharacterKeyPress=function(evt){if(typeof evt.which=="undefined"){return true;}else if(typeof evt.which=="number"&&evt.which>0){return!evt.ctrlKey&&!evt.metaKey&&!evt.altKey&&evt.which!=8;}
return false;};var value=$(field).val();if(!isCharacterKeyPress(e)){return true;}
if(wgsdk.forms.calc_textarea_real_length(value)>=max_value){if('selectionStart'in this){if(this.selectionStart!==this.selectionEnd){return true;}}else if(document.selection.createRange){if(document.selection.createRange().text!==''){return true;}}
return false;}
return true;};var onChange=function(e){var value=$(field).val();if(wgsdk.forms.calc_textarea_real_length(value)>max_value){value=value.substring(0,max_value);$(field).val(value);}
curr_number.text(wgsdk.thousands(max_value-wgsdk.forms.calc_textarea_real_length($(field).val())));handleCounterColor(curr_number);};$(field).change(onChange);$(field).keyup(onChange);$(field).keypress(onPress);addFocusInOutEvents(max_value_el);onChange();})},calc_textarea_real_length:function(str){return(typeof str==='string'||str instanceof String)?str.replace(/\r?\n/gm,"\r\n").length:0;}}
return obj;})($)
$.extend(wgsdk.forms,{validate_input:function(input_selector,options){var defaults={'preprocessor':null,'postprocessor':null,'validator':null,'ajaxValidator':null,'ajaxDelay':0,'ignoreAccept':false,'onStateChange':null,'events':null,'initValue':undefined};options=$.extend({},defaults,options);var input=$(input_selector);var fieldset=input.parents('fieldset:first');var accept=$('.b-accept',fieldset);var decline=$('.b-decline',fieldset);var context={'input':input,'fieldset':fieldset};var ON_BLUR_DELAY=200;var ON_SET_BLUR_CALLBACK_DELAY=125;var onStateChange=options.onStateChange||function(){};var setState=var clearState=function(states){fieldset.removeClass(states||'decline accept verification');onStateChange(context);};var hasAnyOfStates=function(states){states=states.split(' ');for(var i in states){var state=states[i];if(state&&fieldset.hasClass(state))
return true;}
return false;};function cleanResult(){clearState();accept.text('');decline.text('');}
function isFailed(res){return(!res.status||(res.status=='error'));}
function processResult(res){function set_text(el,text){if(text)
el.html(text);else
el.html('&nbsp;');}
cleanResult();if(isFailed(res)){setState('decline');set_text(decline,res.error);return false;}
if(!options.ignoreAccept){setState('accept');set_text(accept,res.text);}
return true;}
function inputEqualInitialValue(value){if(options.initValue!==undefined){return options.initValue===value;}else{return false;}}
function Validate(value,validateStatic,validateAjax,instant){var isInputEqualInitialValue=inputEqualInitialValue(value);if(validateStatic&&options.validator&&!isInputEqualInitialValue){var res=options.validator(value);var failed=isFailed(res);if(failed)
fetcher.cancelRequest();processResult(res);if(failed)
return;}
if(validateAjax&&options.ajaxValidator&&!isInputEqualInitialValue){clearState('accept');fetcher.sendRequest({'value':value},instant);}
if(isInputEqualInitialValue){cleanResult();}}
function onChange(value,old_value){if(value.length){Validate(value,true,true,false);}else{cleanResult();fetcher.cancelRequest();}}
function onRequestStarted(settings){cleanResult();setState('verification');}
function onRequestFinished(data){cleanResult();if(data)
processResult(data);}
setTimeout(function(){input.blur(function(event){setTimeout(function(){if(!hasAnyOfStates('accept decline verification')){var value=watcher.getValue();var validateAjax=value!='';Validate(value,true,validateAjax,true);}},ON_BLUR_DELAY);});},ON_SET_BLUR_CALLBACK_DELAY);var watcher=new wgsdk.InputWatcher(input,options.preprocessor,onChange,options.postprocessor,options.events);var fetcher=new wgsdk.AjaxFetcher(options.ajaxValidator,onRequestStarted,onRequestFinished,options.ajaxDelay);var submitHandler=function(event){if(!hasAnyOfStates('accept error decline verification'))
Validate(watcher.getValue(),true,false,true);if(hasAnyOfStates('error decline verification')){event.preventDefault();event.stopImmediatePropagation();}};input.parents('form:first').submit(submitHandler);input.bind('remove',;},validate_input_size:function(inputSelector,params){this.validate_input(inputSelector,{'validator':wgsdk.InputLengthValidator(inputSelector,params)});}});wgsdk.forms.Forms=(function(){var obj={create:function(method,url,params,target){var form=$('<form>').attr('method',method).attr('action',url);if(target){form.attr('target',target);}
$.each(params,function(key,value){$('<input type="hidden">').attr('name',key).attr('value',value).appendTo(form);});form.appendTo('body');return form;},send:function(method,url,params,target){var form=wgsdk.forms.Forms.create(method,url,params,target);form.submit();},sendGet:function(url,params,target){return wgsdk.forms.Forms.send('GET',url,params,target);},sendPost:function(url,params,target){return wgsdk.forms.Forms.send('POST',url,params,target);}};return obj;})($);wgsdk.autocomplete=(function($,wgsdk){'use strict';var globalAutocompleteCounter=0,KEY_BACKSPACE=8,KEY_ENTER=13,KEY_ESCAPE=27,KEY_DOWN=40,KEY_UP=38,ON_BLUR_HIDE_TIMEOUT=200,CONTAINER_SELECTOR='.js-autocomplete-container';var module=function(inputSelector,url,options){var autocompleteContainerId='js-autocomplete-container-'+(++globalAutocompleteCounter),defaults={'autosubmit':false,'minlength':0,'preprocessor':function(value,prefix){value=$.trim(value);prefix=$.trim(prefix);var matchedSubstrIndex=value.toLowerCase().indexOf(prefix.toLowerCase());value=value.substr(0,matchedSubstrIndex)+'<span class="b-autocomplete_match">'+value.substr(matchedSubstrIndex,prefix.length)+'</span>'+value.substr(matchedSubstrIndex+prefix.length);return value;},'zindex':null,'customWrapper':null,'postprocessor':null,'dataprocessor':null,'changeCallback':null,'responseDataPreprocessor':null},$input,$lines,$wrapper,$wrapperContainer,$template,watcher,fetcher,searchValue,$form;options=$.extend({},defaults,options);function getItemContainer(){if(options.customWrapper===null){return $wrapper;}else{return $wrapperContainer;}}
function updatePosition(){var inputOffset=$input.offset();$wrapper.outerWidth($input.outerWidth()).css({'top':inputOffset.top+$input.outerHeight(),'left':inputOffset.left});}
function hasScroll(){var $container=getItemContainer(),scrollHeight=$container[$.fn.prop?'prop':'attr']('scrollHeight');return $container.height()<scrollHeight;}
function setSelected($sel){getSelected().removeClass('b-autocomplete_item__selected');if($sel&&$sel.length>0){$sel.addClass('b-autocomplete_item__selected');if(hasScroll()){var $container=getItemContainer(),offset=$sel.offset().top-$container.offset().top,scroll=$container.scrollTop(),elementHeight=$container.height();if(offset<0){$container.scrollTop(scroll+offset);}else if(offset>=elementHeight){$container.scrollTop(scroll+offset-elementHeight+$sel.height());}}}}
function updateInputWithSelected(applyFilter){var $sel=getSelected();if($sel.length){watcher.setValue($sel.text(),applyFilter);if(typeof options.changeCallback==='function'){options.changeCallback();}}}
function restoreInput(){watcher.restoreValue();if(typeof options.changeCallback==='function'){options.changeCallback();}}
function isSuggestionVisible(){return $wrapper.css('display')!=='none';}
function setVisibility(show){if(show!==isSuggestionVisible()){if(show&&$lines&&$lines.length){updatePosition();$wrapper.show();}else{$wrapper.hide();}}}
function applySelected(){fetcher.cancelRequest();updateInputWithSelected(true);setVisibility(false);$input.change();}
function onRequestComplete(data){var template,i,len,content,$newElement;if(data&&data.result){if(data.tmpl){template=$(data.tmpl).hide();if($template){$template.replaceWith(template);}else{$input.after(template);$template=template;}}
$lines=undefined;getItemContainer().empty();if($template){$('.js-autocomplete').remove();if(typeof options.responseDataPreprocessor==='function'){data=options.responseDataPreprocessor(data);}
for(i=0,len=data.result.length;i<len;++i){content=data.result[i].text;if(typeof options.preprocessor==='function'){content=options.preprocessor(content,searchValue);}
$newElement=$template.clone().addClass('js-autocomplete b-autocomplete_item').html(content).show();getItemContainer().append($newElement);}
$lines=$('.js-autocomplete');setVisibility(data.result.length>0?true:false);}
$lines.click(function(){applySelected();$input.focus();if(options.autosubmit){$form=$input.closest('form');$form.submit();}}).hover(;}else{setVisibility(false);}}
function preventAutocomplete(){fetcher.cancelRequest();setVisibility(false);}
function destroy(){preventAutocomplete();if($input.length){$wrapper.remove();$input.off('.autocomplete');$input.parents('form:first').off('.autocomplete');}
if(watcher){watcher.destroy();}}
function onValueChange(value,oldValue){var data={'fl':value};if(value.length===0||value.length<options.minlength){fetcher.cancelRequest();setVisibility(false);return;}
searchValue=value;if(!$template){data.tmpl=1;}
if(typeof options.dataprocessor==='function'){data=options.dataprocessor(data);}
fetcher.sendRequest(data,false);}
$(document).ready(function(){$input=$(inputSelector);if($input.length){if(options.customWrapper===null){$wrapper=$('<div class="b-autocomplete"></div>');}else{$wrapper=$(options.customWrapper);$wrapperContainer=$wrapper.find(CONTAINER_SELECTOR);}
if(options.zindex!==null){$wrapper.css('zIndex',options.zindex+globalAutocompleteCounter);}
$wrapper.attr('id',autocompleteContainerId).hide().appendTo('body');$wrapper.trigger('appended');$input.on('keydown.autocomplete',function(event){if(event.keyCode===KEY_BACKSPACE){setTimeout(function(){$input.trigger('input');},1);}
if(event.keyCode===KEY_ENTER){fetcher.cancelRequest();}
if(!options.autosubmit&&isSuggestionVisible()&&event.keyCode===KEY_ENTER){applySelected();event.preventDefault();}});$input.on('keyup.autocomplete',function(event){var $selected;if(!isSuggestionVisible()){return;}
if(event.keyCode===KEY_ESCAPE){restoreInput();setVisibility(false);}
if($lines&&(event.keyCode===KEY_UP||event.keyCode===KEY_DOWN)){$selected=getSelected();if($selected.length){setSelected((event.keyCode===KEY_UP)?$selected.prev():$selected.next());}else{setSelected((event.keyCode===KEY_UP)?$lines.last():$lines.first());}
watcher.stopWatch();if(getSelected().length){updateInputWithSelected(false);}else{restoreInput();}
watcher.startWatch();}});$input.parents('form:first').on('submit.autocomplete',;$input.on('blur.autocomplete',function(event){if(isSuggestionVisible()){setTimeout(ON_BLUR_HIDE_TIMEOUT);}});watcher=new wgsdk.InputWatcher($input,null,onValueChange,options.postprocessor);if(typeof(url)==='function'){fetcher=new wgsdk.NoAjaxFetcher(url,null,onRequestComplete);}else{fetcher=new wgsdk.AjaxFetcher({'url':url},null,onRequestComplete,600);}}});return{'setVisibility':setVisibility,'preventAutocomplete':preventAutocomplete,'destroy':destroy};};return module;})(jQuery,wgsdk);wgsdk.clearer=(function($){'use strict';var module=function(inputSelector,clrSelector,options){var $instance=$(clrSelector),$input=$(inputSelector),defaults={clearCallback:undefined};options=$.extend({},defaults,options);if(!($input.length&&$instance.length)){return;}
function show(){$instance.css('display','block');}
function update(){if($input.val()!==''){show();}else{hide();}}
$input.keyup(update);$instance.click(function(e){$instance.css('display','none');if(typeof options.clearCallback==='function'){options.clearCallback(e);}});return{'update':update,'hide':hide,'show':show};};return module;})(jQuery);$(document).ready(;;var HASH=(function(){var hash={_salt:'wot',_hashValues:{},_insideModification:0,_callback:undefined,_lastHash:"",_getHash:function(){var hashSrc=location.href,idx=hashSrc.indexOf('#'),result={},args,i;hashSrc=(idx!==-1)?hashSrc.substring(idx+1):'';args=hashSrc.split('&');for(i=0;i<args.length;++i){var arg=args[i];var matches=arg.match(/^([\w\d_\-]+)=(.*)/);if(matches){try{result[matches[1]]=decodeURIComponent(matches[2]);}catch(e){try{result[matches[1]]=decodeURIComponent(matches[2].replace(/%([^0-9a-f].)/ig,'%25$1'));}catch(e){result[matches[1]]=matches[2];}}}
else{var matches=arg.match(/^([\w\d_-]+)$/);if(matches){result[matches[1]]=true;}}}
if(this._salt in result){delete result[this._salt];}
return result;},updateFromHash:getHashString:function(){var newHash=this._salt+'&';for(key in this._hashValues){if(this._hashValues[key]===true){newHash+=key+"&";}
else{newHash+=key+"="+encodeURIComponent(this._hashValues[key])+"&";}}
if(newHash[newHash.length-1]=='&'){newHash=newHash.substring(0,newHash.length-1);}
return newHash;},formHash:function(){var changed=false;var oldHash=this._getHash();for(var oldKey in oldHash){if(!(oldKey in this._hashValues)||oldHash[oldKey]!=this._hashValues[oldKey]){changed=true;break;}}
for(var key in this._hashValues){if(!(key in oldHash)){changed=true;break;}}
if(!changed){return;}
var newHash=this.getHashString();if(location.hash!=newHash){this._insideModification+=1;this._lastHash=newHash;location.hash=newHash;}
setTimeout(function(arg){var hash=arg;return }(this),250);},getHash:getHashValuesFor:function(prefix){var result={};for(key in this._hashValues){var matches=key.match(new RegExp("^"+prefix+"_(.+)"),"");if(matches){if(matches[1]!=='limit'){result[matches[1]]=this._hashValues[key];}}}
return result;},setHashValuesFor:function(prefix,values,replace,defaults){if(replace){var to_remove=new Array();for(key in this._hashValues){if(key.match(new RegExp("^"+prefix+"_(.+)"))){to_remove.push(key);}}
for(var i=0;i<to_remove.length;++i){delete this._hashValues[to_remove[i]];}}
for(key in values){if(defaults[key]!=values[key]){this._hashValues[prefix+"_"+key]=values[key];}}},init:function(){this.updateFromHash();},registerCallback:function(hashChangeEventCallback){this._callback=hashChangeEventCallback;},handleEvent:function(event){if(this._insideModification!=0||this._lastHash==location.hash){return;}
this.updateFromHash();this._callback(event,this);this.formHash();},IsNotDefined:function(prefix){for(key in this._hashValues){if(key.match(new RegExp("^"+prefix+"_(.+)"))){return false;}}
return true;}};return hash;})();;(function($,browserDetection){var JS_LAYOUT_SELECTOR='.js-layout',JS_MOBILE_TOOLTIP_SELECTOR='.js-mobile-tooltip',TOOLTIP_TIME_DELAY=300,TOOLTIP_FADE_TIME=100,TOOLTIP_OFFSET_X=15,TOOLTIP_OFFSET_Y=20,POPUP_OFFSET_X=10,POPUP_OFFSET_Y=10;var hl_current_tooltip_id='',isMobileMode=false,$body;function getTooltipId(elem,prefix,id){var tooltip_id='';var cls=elem.prop('className');var patt=/js-tooltip-id_([-\w]+)/;var result=patt.exec(cls);if(result&&result.length>0){tooltip_id=result[1];return tooltip_id;}
if(id!=null)
tooltip_id=id+prefix;else if(elem.prop('id')!='')
tooltip_id=elem.prop('id')+prefix;return tooltip_id;}
$(document).ready(function(){var isMobileBrowser=browserDetection.mobile,$document=$(document);$body=$('body');if(!isMobileBrowser){$document.on('mouseenter','.js-tooltip, '+JS_MOBILE_TOOLTIP_SELECTOR,tooltip).on('mouseenter','.js-popup',popup);}else{ieMobileSlowTooltipFix();isMobileMode=true;$document.on('touchstart',JS_MOBILE_TOOLTIP_SELECTOR,tooltip).on('touchstart','.js-popup',popup).on('scroll',hideTooltipIfAboveMenu);}
if(!$('#js-tooltip-container').length){$body.append('<div id="js-tooltip-container"></div>');}});function ieMobileSlowTooltipFix(){var $mobileTooltips=$(JS_MOBILE_TOOLTIP_SELECTOR);if($.browser.iemobile&&$mobileTooltips.length){$mobileTooltips.css('msTouchAction','none');$body.css('msTouchAction','pan-y');}}
function tooltip(event){tooltipBasic(event,{'popup':false,'target':this});}
function popup(event){tooltipBasic(event,{'popup':true,'target':this});}
function tooltipBind(target_obj,tooltip_obj)
{$(document).on('mouseenter',target_obj,function(event){tooltipBasic(event,{'popup':false,'tooltip':tooltip_obj,'target':this});});$(document).on('mouseenter',target_obj,function(event){tooltipBasic(event,{'popup':true,'tooltip':tooltip_obj,'target':this});});}
function hideTooltipIfAboveMenu(){var $tooltipContainer=$('#js-tooltip-container');var $tooltip=$tooltipContainer.children().first();var $nav=$('.js-nav-submenu:visible');if($tooltip.length&&$nav.length){if($tooltip[0].getBoundingClientRect().top<$nav[0].getBoundingClientRect().top+$nav.height()){$tooltipContainer.empty();}}}
function tooltipBasic(event,param)
{var url=param.url;var id=undefined;var container=$('#js-tooltip-container');var target=$(param.target);if(url!=null)
{id='';var strar=url.substring(0,id.lastIndexOf('?')).split('/');for(var idx in strar){if(strar[idx].length>0)
id=id+strar[idx]+'_';}
id=id.substring(0,id.lastIndexOf('_'));param.id=id;}
else if(param.id!=null)
id=param.id;else
id=target.prop('id');if(param.popup==null)
param.popup=false;var tooltip
if(param.tooltip)
{tooltip=param.tooltip;}else{var tooltip_name=getTooltipId(target,param.popup?'_popup':'_tooltip',id);var tooltip_id='#'+tooltip_name;tooltip=$(tooltip_id).clone();}
container.append(tooltip.detach());tooltip.hide();tooltip.css({'position':'absolute'});if(typeof(id)=='string')
{if(url==null)
{url="";var strar=id.split('_');for(id in strar)
url=url+'/'+strar[id];if(param.popup)
url=url+"/?info=popup";else
url=url+"/?info=tooltip";}}
else
return;var show_tooltip=function(is_loaded)
{if(hl_current_tooltip_id!=""&&hl_current_tooltip_id!=tooltip_id){$(hl_current_tooltip_id).fadeOut(0);}
if($(target).hasClass('js-tooltip-only-overflow')&&target.get(0).offsetWidth>=target.get(0).scrollWidth){return;}
hl_current_tooltip_id=tooltip_id;if(!is_loaded&&!isMobileMode){tooltip.delay(TOOLTIP_TIME_DELAY).fadeIn(TOOLTIP_FADE_TIME,function(){tooltip.css('opacity',1);});}else{tooltip.fadeIn(0,function(){tooltip.css('opacity',1);});}
var tip_size={x:tooltip.innerWidth(),y:tooltip.innerHeight()+15};var set_position=function(event){var $window=$(window);var offset={x:0,y:0};var pointer_coord=isMobileMode?{x:event.originalEvent.touches[0].pageX,y:event.originalEvent.touches[0].pageY}:{x:event.pageX,y:event.pageY};var coord={x:0,y:0};var scroll={x:$window.scrollLeft(),y:$window.scrollTop()};var win_size={x:$window.width(),y:$window.height()};if(param.popup){offset={x:POPUP_OFFSET_X,y:POPUP_OFFSET_Y};}else{offset={x:TOOLTIP_OFFSET_X,y:TOOLTIP_OFFSET_Y};}
var remainedWindowWidth=win_size.x-(tip_size.x+(offset.x*2));var tooltipOffsetX=pointer_coord.x+offset.x;if(pointer_coord.x+tip_size.x+(offset.x*2)>win_size.x+scroll.x){coord.x=pointer_coord.x-tip_size.x-(offset.x*2);if(coord.x<0){coord.x=win_size.x-(tip_size.x+(offset.x*2));}else if(remainedWindowWidth>tooltipOffsetX){coord.x=pointer_coord.x+offset.x;}}else{coord.x=pointer_coord.x+offset.x;}
if(pointer_coord.y+tip_size.y+offset.y>win_size.y+scroll.y){coord.y=pointer_coord.y-offset.y-tip_size.y;}else{coord.y=pointer_coord.y+offset.y;}
tooltip.css({'left':coord.x,'top':coord.y});};set_position(event);target.trigger('tooltipshow',[tooltip]);if(!param.popup)
{if(!isMobileMode){target.bind('mousemove',;}}
var leave=function(event)
{tooltip.clearQueue();if(hl_current_tooltip_id==tooltip_id)
hl_current_tooltip_id="";if(param.popup)
{tooltip.delay(200).fadeOut(0);tooltip.one('mouseenter',function(){tooltip.clearQueue();});tooltip.one('mouseleave',function(){tooltip.fadeOut(0);});}
else
{tooltip.fadeOut(0,function(){tooltip.remove();});}
if(!param.popup){target.unbind('mousemove');}};if(!isMobileMode){target.one('mouseleave',leave);}else{$(JS_LAYOUT_SELECTOR).one('touchstart',leave);}
$(window).one('unload',leave);};if(tooltip.length==0)
{var html="<div class='tooltip' id='"+tooltip_name+"' style='position:absolute;'></div>";var error_text='<span style="color:#cd5c5c;font-weight:bold;">'+translate('TOOLTIP_DOES_NOT_FOUND')+'</span>';$().add(html).appendTo(container).hide();tooltip.text(translate('TOOLTIP_LOADING'));try
{$.ajax({'type':'get','url':url,'success':function(data){if(data&&data!='')
tooltip.html(data);else
tooltip.html(error_text);show_tooltip(true);},'error':);}
catch(er)
{tooltip.html(error_text);show_tooltip(true);}}
else
show_tooltip(false);}
window.tooltipReset=})(jQuery,BROWSER_DETECTION_MODULE);;(function($,undefined){'use strict';var prefix='js-social-links';var socialItemsSelector='.js-social-item';var counterSelector='.js-social-counter';var totalCounterSelector='.js-social-total-counter';var sharesMsgClass='js-shares-msg';var totalCounterVisibleClass='.js-social-total-counter_visible';var counterVisibleClass='js-social-counter_visible';var classPrefix=prefix+'__';var openClass=prefix+'_opened';var protocol=location.protocol==='https:'?'https:':'http:';var services={facebook:{counterUrl:'https://graph.facebook.com/fql?q=SELECT+total_count+FROM+link_stat+WHERE+url%3D%22{url}%22&callback=?',convertNumber:popupUrl:'https://www.facebook.com/sharer/sharer.php?u={url}',popupWidth:600,popupHeight:500},twitter:{counterUrl:'https://cdn.api.twitter.com/1/urls/count.json?url={url}&callback=?',convertNumber:function(data){return data.count;},popupUrl:'https://twitter.com/intent/tweet?url={url}&text={title}',popupWidth:600,popupHeight:450,click:function(){if(!/[\.:\-–—]\s*$/.test(this.options.title))this.options.title+=':';return true;}},vkontakte:{counterUrl:protocol+'//vk.com/share.php?act=count&url={url}&index={index}',counter:function(jsonUrl,deferred){var options=services.vkontakte;if(!options._){options._=[];if(!window.VK)window.VK={};window.VK.Share={co);}};}
var index=options._.length;options._.push(deferred);$.getScript(makeUrl(jsonUrl,{index:index})).fail(deferred.reject);},popupUrl:protocol+'//vk.com/share.php?url={url}&title={title}',popupWidth:550,popupHeight:330},};var counters={promises:{},fetch:function(service,url,extraOptions){if(!counters.promises[service])counters.promises[service]={};var servicePromises=counters.promises[service];if(!extraOptions.forceUpdate&&servicePromises[url]){return servicePromises[url];}
else{var options=$.extend({},services[service],extraOptions);var deferred=$.Deferred();var jsonUrl=options.counterUrl&&makeUrl(options.counterUrl,{url:url});if(jsonUrl&&$.isFunction(options.counter)){options.counter(jsonUrl,deferred);}
else if(options.counterUrl){$.getJSON(jsonUrl).done(function(data){try{var number=data;if($.isFunction(options.convertNumber)){number=options.convertNumber(data);}
deferred.resolve(number);}
catch(e){deferred.reject();}}).fail(deferred.reject);}
else{deferred.reject();}
servicePromises[url]=deferred.promise();return servicePromises[url];}}};$.fn.socialLikes=function(options){return this.each(function(){var elem=$(this);var instance=elem.data(prefix);if(instance){if($.isPlainObject(options)){instance.update(options);}}
else{instance=new SocialLikes(elem,$.extend({},$.fn.socialLikes.defaults,options,dataToOptions(elem)));elem.data(prefix,instance);}});};$.fn.socialLikes.defaults={url:window.location.href.replace(window.location.hash,''),title:document.title,counters:true,zeroes:false,wait:500,popupCheckInterval:500,singleTitle:'Shar);}
SocialLikes.prototype={init:function(){this.container.addClass(prefix);this.single=this.container.find(totalCounterSelector).length;this.initUserButtons();this.countersLeft=0;this.number=0;this.container.on('counter.'+prefix,$.proxy(this.updateCounter,this));counterVisibleClass=this.container.data('counter-visible-class')||counterVisibleClass;totalCounterVisibleClass=this.container.data('total-counter-visible-class')||totalCounterVisibleClass;var buttons=this.container.find(socialItemsSelector);this.buttons=[];buttons.each($.proxy(function(idx,elem){var button=new Button($(elem),this.options,this);this.buttons.push(button);if(button.options.counterUrl)this.countersLeft++;},this));if(this.options.counters){this.timer=setTimeout($.proxy(this.appear,this),this.options.wait);}
else{this.appear();}},initUserButtons:function(){if(!this.userButtonInited&&window.socialLikesButtons){$.extend(true,services,socialLikesButtons);}
this.userButtonInited=true;},makeSingleButton:function(){if(!this.single)return;var container=this.container;container.addClass(prefix+'_vertical');container.wrap($('<div>',{'class':prefix+'_single-w'}));container.wrapInner($('<div>',{'class':prefix+'__single-container'}));var wrapper=container.parent();var widget=$('<div>',{'class':getElementClassNames('widget','single')});var button=$(template('<div class="{buttonCls}">'+'<span class="{iconCls}"></span>'+'{title}'+'</div>',{buttonCls:getElementClassNames('button','single'),iconCls:getElementClassNames('icon','single'),title:this.options.singleTitle}));widget.append(button);wrapper.append(widget);widget.click(function(){var activeClass=prefix+'__widget_active';widget.toggleClass(activeClass);if(widget.hasClass(activeClass)){container.css({left:-(container.width()-widget.width())/2,top:-container.height()});showInViewport(container);closeOnClick(contai);});}
else{container.removeClass(openClass);}
return false;});this.widget=widget;},update:function(options){var button;if(!options.forceUpdate&&options.url===this.options.url)return;this.options.url=this.makeAbsoluteUrl(this.options.url);this.number=0;this.countersLeft=this.buttons.length;$.extend(this.options,options);for(var buttonIdx=0;buttonIdx<this.buttons.length;buttonIdx++){button=this.buttons[buttonIdx];button.widget.removeClass(counterVisibleClass)
button.update(options);}},updateCounter:function(e,service,number){if(number){this.updateTotalCounter();}
this.countersLeft--;if(this.countersLeft===0){this.appear();this.container.addClass(prefix+'_ready');this.container.trigger('ready.'+prefix,this.number);}},updateTotalCounter:function(){if(!this.single)return;var counter=this.container.find(totalCounterSelector),counterSpan=counter.find('span');var total=0;for(var i=0;i<this.buttons.length;i++){total+=this.buttons[i].count;}
counterSpan.text(this.buttons[0].formatNumber(total));if(total>0){counter.addClass(totalCounterVisibleClass);if(counterSpan.hasClass(sharesMsgClass)){counterSpan.text(window.interpolate(window.ngettext('%(counter)s share','%(counter)s shares',total),{counter:total},true));}}else{counter.removeClass(totalCounterVisibleClass);}},app);},makeAbsoluteUrl:function(url){if(url.indexOf('://')===-1){var a=document.createElement("a");a.setAttribute('href',url);url=a.href;}
return url;}};function truncate(string,maxLength){var trimmedString=string.substr(0,maxLength);return trimmedString.substr(0,Math.min(trimmedString.length,trimmedString.lastIndexOf(" ")))};function getShortTitle(title){if(title.length>window.MAX_TITLE_SIZE_FOR_SOCIAL_SHARING){return truncate(title,window.MAX_TITLE_SIZE_FOR_SOCIAL_SHARING)+' ...';}
return title;};function Button(widget,options,plugin){this.plugin=plugin;this.widget=widget;this.options=$.extend({},options);this.detectService();if(this.service){this.init();}}
Button.prototype={count:0,init:function(){this.detectParams();this.initHtml();setTimeout($.proxy(this.initCounter,this),0);},update:function(options){$.extend(this.options,{forceUpdate:false},options);this.initCounter();},detectService:function(){var service=this.widget.data('service');if(!service){var node=this.widget[0];var classes=node.classList||node.className.split(' ');for(var classIdx=0;classIdx<classes.length;classIdx++){var cls=classes[classIdx];if(services[cls]){service=cls;break;}}
if(!service)return;}
this.service=service;$.extend(this.options,services[service]);},detectParams:function(){var data=this.widget.data();if(data.counter){var number=parseInt(data.counter,10);if(isNaN(number)){this.options.counterUrl=data.counter;}
else{this.options.counterNumber=number;}}
if(data.title){this.options.title=data.title;}
if(data.url){this.options.url=data.url;if(this.options.url.indexOf('://')===-1){var a=document.createElement("a");a.setAttribute('href',this.options.url);this.options.url=a.href;}}},initHtml:function(){var options=this.options;var widget=this.widget;if(options.clickUrl){var url=makeUrl(options.clickUrl,{url:options.url,title:options.title});widget.attr('href',url);}else{widget.unbind('click').bind('click',$.proxy(this.click,this));}},initCounter:function(){if(this.service&&this.options.counters){if(this.options.counterNumber){this.updateCounter(this.options.counterNumber);}
else{var extraOptions={counterUrl:this.options.counterUrl,forceUpdate:this.options.forceUpdate};this.number=0;counters.fetch(this.service,this.options.url,extraOptions).always($.proxy(this.updateCounter,this));}}},cloneDataAttrs:function(source,destination){var data=source.data();for(var key in data){if(data.hasOwnProperty(key)){destination.data(key,data[key]);}}},getElementClassNa);},updateCounter:function(number){number=parseInt(number,10)||0;var params={'class':this.getElementClassNames('counter'),'text':number};var counterElem=this.widget.find(counterSelector);if(number&&counterElem.length){counterElem.text(this.formatNumber(number));this.count=number;this.widget.addClass(counterVisibleClass);}else{this.widget.removeClass(counterVisibleClass);}
this.plugin.updateTotalCounter();this.widget.trigger('counter.'+prefix,[this.service,number]);},formatNumber:function(number){if(number>=1000000){return Math.round(number/100000)/10+'M';}else if(number>=10000){return Math.round(number/1000)+'K';}else if(number>=1000){return Math.round(number/100)/10+'K';}
return number;},click:function(e){var options=this.options;var process=true;if($.isFunction(options.click)){process=options.click.call(this,e);}
if(process){var url=makeUrl(options.popupUrl,{url:options.url,title:getShortTitle(options.title)});this.openPopup(url,{width:options.popupWidth,height:options.popupHeight});}
return false;},addAdditionalParamsToUrl:function(url){var params=$.param($.extend(this.widget.data(),this.options.data));if($.isEmptyObject(params))return url;var glue=url.indexOf('?')===-1?'?':'&';return url+glue+params;},openPopup:function(url,params){var left=Math.round(screen.width/2-params.width/2);var top=0;if(screen.height>params.height){top=Math.round(screen.height/3-params.height/2);}
var win=window.open(url,'sl_'+this.service,'left='+left+',top='+top+','+'width='+params.width+',height='+params.height+',personalbar=0,toolbar=0,scrollbars=1,resizable=1');if(win){win.focus();this.widget.trigger('popup_opened.'+prefix,[this.service,win]);var timer=setInterval($.proxy(function(){if(!win.closed)return;clearInterval(timer);this.updateCounter(this.count+1);this.widget.trigger('popup_closed.'+prefix,this.service);},this),this.options.popupCheckInterval);}
else{location.href=url;}}};function dataToOptions(el);}
var options={};var data=elem.data();for(var key in data){var value=data[key];if(value==='yes')value=true;else if(value==='no')value=false;options[key.replace(/-(\w)/g,upper)]=value;}
return optiond;}
function closeOnClick(elem,callback){function handler(e){if((e.type==='keydown'&&e.which!==27)||$(e.target).closest(elem).length)return;elem.removeClass(openClass);doc.off(events,handler);if($.isFunction(callback))callback();}
var doc=$(document);var events='click touchstart keydown';doc.on(events,handler);}
function showInViewport(elem){var offset=10;if(document.documentElement.getBoundingClientRect){var left=parseInt(elem.css('left'),10);var top=parseInt(elem.css('top'),10);var rect=elem[0].getBoundingClientRect();if(rect.left<offset)
elem.css('left',offset-rect.left+left);else if(rect.right>window.innerWidth-offset)
elem.css('left',window.innerWidth-rect.right-offset+left);if(rect.top<offset)
elem.css('top',offset-rect.top+top);else if(rect.bottom>window.innerHeight-offset)
elem.css('top',window.innerHeight-rect.bottom-offset+top);}
elem.addClass(openClass);}}));;(function($){'use strict';var SOCIALS_SELECTOR='.js-social-links',HEADER_ARTICLE_SELECTOR='.header-article',SHOW_MORE_SELECTOR='.social-light_item__show-more',PLUS_ICON_SELECTOR='.social-light_icon',PLUS_ICON_CLOSE_CLASS='social-light_icon__close',BUTTONS_HIDDEN_CLASS='social-light_item__hidden',BUTTONS_SELECTOR='.social-light_item__bottom',LAYOUT_INNER_CLASS='layout_inner',LAYOUT_INNER_OPEN_SOCIALS_CLASS='layout_inner__social-open',SOCIAL_POPUP_INITIATOR_SELECTOR='.js-social-dropdown-open',SOCIAL_POPUP_SELECTOR='.js-social-dropdown';var $bod);});var SocialLinksGAHelper={prefixes:{'about':'GTM_ABOUT_GAME_SHARING_','article':'GTM_ARTICLE_SHARING_','vehicle':'GTM_VEHICLE_SHARING_'},track:function(event){var dataLayer=(window.dataLayer||undefined);if(dataLayer!==undefined&&dataLayer.push!==undefined){dataLayer.push(event);}},trackServiceByPage:function(service,page){var prefix=this.prefixes[page];service=service.toUpperCase();if(prefix&&window[prefix+service]){this.track(window[prefix+service]);}}};function hideSocialPopup(ev){if(ev&&!!$(ev.target).closest(SOCIAL_POPUP_SELECTOR+','+SOCIAL_POPUP_INITIATOR_SELECTOR).length)
return;$(SOCIAL_POPUP_SELECTOR).css({display:""});$body.off('mousedown touchstart',hideSocialPopup);}
function initSocialPlugin(){$(SOCIALS_SELECTOR).socialLikes({counters:false});$(document).on('popup_opened.js-social-links',SOCIALS_SELECTOR,function(e,service){var sharingPage=$(this).data('sharingPage');if(sharingPage){SocialLinksGAHelper.trackServiceByPage(service,sharingPage);}});}
function initSocialTopBlock(){$(SOCIAL_POPUP_INITIATOR_SELECTOR).on('tap',function(e){e.preventDefault();e.stopPropagation();$(SOCIAL_POPUP_SELECTOR).toggle();$body.on('mousedown touchstart',hideSocialPopup);});$(SOCIAL_POPUP_SELECTOR).find('a').on('click t);});}
function initSocialShowMore(){var $header=$(HEADER_ARTICLE_SELECTOR),$headerSocials=$header.find(SOCIALS_SELECTOR),$socialsPlus=$headerSocials.find(SHOW_MORE_SELECTOR),$layout=$header.next();if($headerSocials.length&&$socialsPlus.length){var $buttons=$headerSocials.find(BUTTONS_SELECTOR)
$socialsPlus.click(function(){var $icon=$(this).find(PLUS_ICON_SELECTOR);$icon.toggleClass(PLUS_ICON_CLOSE_CLASS);$buttons.toggleClass(BUTTONS_HIDDEN_CLASS);if($layout.hasClass(LAYOUT_INNER_CLASS)){$layout.toggleClass(LAYOUT_INNER_OPEN_SOCIALS_CLASS)}})}}
$(document).re);});$(window).on("lo);});})(jQuery);;/*! jQuery plugin for Hammer.JS - v1.1.3 - 2014-05-22
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */(function(window,undefined){var Ham);};Hammer.VERSION='1.1.3';Hammer.defaults={behavior:{userSelect:'none',touchAction:'pan-y',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};Hammer.DOCUMENT=document;Hammer.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;Hammer.HAS_TOUCHEVENTS=('ontouchstart'in window);Hammer.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);var match=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase());Hammer.IS_IE_7=match&&(match[1]==='msie')&&(match[2]==='7.0');Hammer.IS_IE_8=match&&(match[1]==='msie')&&(match[2]==='8.0');Hammer.MOUSE_DOWN_BUTTON_CODE=Hammer.IS_IE_8||Hammer.IS_IE_7?1:0;Hammer.NO_MOUSEEVENTS=(Hammer.HAS_TOUCHEVENTS&&Hammer.IS_MOBILE)||Hammer.HAS_POINTEREVENTS;Hammer.CALCULATE_INTERVAL=25;var EVENT_TYPES={};var DIRECTION_DOWN=Hammer.DIRECTION_DOWN='down';var DIRECTION_LEFT=Hammer.DIRECTION_LEFT='left';var DIRECTION_UP=Hammer.DIRECTION_UP='up';var DIRECTION_RIGHT=Hammer.DIRECTION_RIGHT='right';var POINTER_MOUSE=Hammer.POINTER_MOUSE='mouse';var POINTER_TOUCH=Hammer.POINTER_TOUCH='touch';var POINTER_PEN=Hammer.POINTER_PEN='pen';var EVENT_START=Hammer.EVENT_START='start';var EVENT_MOVE=Hammer.EVENT_MOVE='move';var EVENT_END=Hammer.EVENT_END='end';var EVENT_RELEASE=Hammer.EVENT_RELEASE='release';var EVENT_TOUCH=Hammer.EVENT_TOUCH='touch';Hammer.READY=false;Hammer.plugins=Hammer.plugins||{};Hammer.gestures=Hammer.gestures||{};function setup(){if(Hammer.READY){return;}
Event.determineEventTypes();Utils.each(Hammer.gestures,function(gesture){Detection.register(gesture);});Event.onTouch(Hammer.DOCUMENT,EVENT_MOVE,Detection.detect);Event.onTouch(Hammer.DOCUMENT,EVENT_END,Detection.detect);Hammer.READY=true;}
var Utils=Hammer.utils={extend:function extend(dest,src,merge){for(var key in src){if(!src.hasOwnProperty(key)||(dest[key]!==undefined&&merge)){continue;}
dest[key]=src[key];}
return dest;},on:function on(element,type,handler){element.addEventListener(type,handler,false);},off:function off(element,type,handler){element.removeEventListener(type,handler,false);},each:function each(obj,iterator,context){var i,len;if('forEach'in obj){obj.forEach(iterator,context);}else if(obj.length!==undefined){for(i=0,len=obj.length;i<len;i++){if(iterator.call(context,obj[i],i,obj)===false){return;}}}else{for(i in obj){if(obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)===false){return;}}}},in1;},inArray:function inArray(src,find){if(src.indexOf){var index=src.indexOf(find);return(index===-1)?false:index;}else{for(var i=0,len=src.length;i<len;i++){if(src[i]===find){return i;}}
return false;}},toAr);},hasParent:function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;},getCenter:function getCenter(touches){var pageX=[],pageY=[],clientX=[],clientY=[],min=Math.min,max=Math.max;if(touches.length===1){return{pageX:touches[0].pageX,pageY:touches[0].pageY,clientX:touches[0].clientX,clientY:touches[0].clientY};}
Utils.each(touc);});return{pageX:(min.apply(Math,pageX)+max.apply(Math,pageX))/2,pageY:(min.apply(Math,pageY)+max.apply(Math,pageY))/2,clientX:(min.apply(Math,clientX)+max.apply(Math,clientX))/2,clientY:(min.apply(Math,clientY)+max.apply(Math,clientY))/2};},getVelocity:function getVelocity(deltaTime,deltaX,deltaY){return{x:Math.abs(deltaX/deltaTime)||0,y:Math.abs(deltaY/deltaTime)||0};},getAngle:function getAngle(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.atan2(y,x)*180/Math.PI;},getDirection:function getDirection(touch1,touch2){var x=Math.abs(touch1.clientX-touch2.clientX),y=Math.abs(touch1.clientY-touch2.clientY);if(x>=y){return touch1.clientX-touch2.clientX>0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return touch1.clientY-touch2.clientY>0?DIRECTION_UP:DIRECTION_DOWN;},getDistance:function getDistance(touch1,touch2){var x=touch2.clientX-touch1.clientX,y=touch2.clientY-touch1.clientY;return Math.sqrt((x*x)+(y*y));},getScale:function getScale(start,end){if(start.length>=2&&end.length>=2){return this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]);}
return 1;},getRotation:function getRotation(start,end){if(start.length>=2&&end.length>=2){return this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0]);}
return 0;},isVertical:function isVertical(direction){return direction==DIRECTION_UP||direction==DIRECTION_DOWN;},setPrefixedCss:function setPrefixedCss(element,prop,value,toggle){var prefixes=['','Webkit','Moz','O','ms'];prop=Utils.toCamelCase(prop);for(var i=0;i<prefixes.length;i++){var p=prop;if(prefixes[i]){p=prefixes[i]+p.slice(0,1).toUpperCase()+p.slice(1);}
if(p in element.style){element.style[p]=(toggle==null||toggle)&&value||'';break;}}},toggleBehavior:function toggleBehavior(element,props,toggle){if(!props||!element||!element.style){return;}
Utils.each(pr);});var falseFn=togge;};if(props.userSelect=='none'){element.onselectstart=falseFn;}
if(props.userDrag=='none'){element.ondragstart=falseFn;}},toCamelC);}};Hammer.Instance=function(element,options){var self=this;setup();this.element=element;this.enabled=true;Utils.each(options,function(value,name){delete options[name];options[Utils.toCamelCase(name)]=value;});this.options=Utils.extend(Utils.extend({},Hammer.defaults),options||{});if(this.options.behavior){Utils.toggleBehavior(this.element,this.options.behavior,true);}
this.eventStartHandler=Event.onTouch(element,EVENT_START,function(ev){if(self.enabled&&ev.eventType==EVENT_START){Detection.startDetect(self,ev);}else if(ev.eventType==EVENT_TOUCH){Detection.detect(ev);}});this.eventHandlers=[];};Hammer.Instance.prototype={on:function onEvent(gestures,handler){var self=this;Event.on(self.element,gestures,hand);});return self;},off:function offEvent(gestures,handler){var self=this;Event.off(self.element,gestures,handler,function(type){var index=Utils.inArray({gesture:type,handler:handler});if(index!==false){self.eventHandlers.splice(index,1);}});return self;},trigger:function triggerEvent(gesture,eventData){if(!eventData){eventData={};}
var event=Hammer.DOCUMENT.createEvent('Event');event.initEvent(gesture,true,true);event.gesture=eventData;var element=this.element;if(Utils.hasParent(eventData.target,element)){element=eventData.target;}
element.dispatchEvent(event);return this;},enas;},dispose:function dispose(){var i,eh;Utils.toggleBehavior(this.element,this.options.behavior,false);for(i=-1;(eh=this.eventHandlers[++i]);){Utils.off(this.element,eh.gesture,eh.handler);}
this.eventHandlers=[];Event.off(this.element,EVENT_TYPES[EVENT_START],this.eventStartHandler);return null;}};var Event=Hammer.event={preventMouseEvents:false,started:false,shouldDetect:false,on:function on(element,type,handler,hook){var types=type.split(' ');Utils.each(types,function(type){Utils.on(element,type,handler);hook&&hook(type);});},off:function off(element,type,handler,hook){var types=type.split(' ');Utils.each(types,function(type){Utils.off(element,type,handler);hook&&hook(type);});},onTouch:function onTouch(element,eventType,handler){var self=this;var onTouchHandler=function onTouchHandler(ev){var srcType=ev.type.toLowerCase(),isPointer=Hammer.HAS_POINTEREVENTS,isMouse=Utils.inStr(srcType,'mouse'),triggerType;if(isMouse&&self.preventMouseEvents){return;}else if(isMouse&&eventType==EVENT_START&&ev.button===Hammer.MOUSE_DOWN_BUTTON_CODE){self.preventMouseEvents=false;self.shouldDetect=true;}else if(isPointer&&eventType==EVENT_START){self.shouldDetect=(ev.buttons===1||PointerEvent.matchType(POINTER_TOUCH,ev));}else if(!isMouse&&eventType==EVENT_START){self.preventMouseEvents=true;self.shouldDetect=true;}
if(isPointer&&eventType!=EVENT_END){PointerEvent.updatePointer(eventType,ev);}
if(self.shouldDetect){triggerType=self.doDetect.call(self,ev,eventType,element,handler);}
if(triggerType==EVENT_END){self.preventMouseEvents=false;self.shouldDetect=false;PointerEvent.reset();}
if(isPointer&&eventType==EVENT_END){PointerEvent.updatePointer(eventType,ev);}};this.on(element,EVENT_TYPES[eventType],onTouchHandler);return onTouchHandler;},doDetect:function doDetect(ev,eventType,element,handler){var touchList=this.getTouchList(ev,eventType);var touchListLength=touchList.length;var triggerType=eventType;var triggerChange=touchList.trigger;var changedLength=touchListLength;if(eventType==EVENT_START){triggerChange=EVENT_TOUCH;}else if(eventType==EVENT_END){triggerChange=EVENT_RELEASE;changedLength=touchList.length-((ev.changedTouches)?ev.changedTouches.length:1);}
if(changedLength>0&&this.started){triggerType=EVENT_MOVE;}
this.started=true;var evData=this.collectEventData(element,triggerType,touchList,ev);if(eventType!=EVENT_END){handler.call(Detection,evData);}
if(triggerChange){evData.changedLength=changedLength;evData.eventType=triggerChange;handler.call(Detection,evData);evData.eventType=triggerType;delete evData.changedLength;}
if(triggerType==EVENT_END){handler.call(Detection,evData);this.started=false;}
return triggerType;},determineEventTypes:function determineEventTypes(){var types;if(Hammer.HAS_POINTEREVENTS){if(window.PointerEvent){types=['pointerdown','pointermove','pointerup pointercancel lostpointercapture'];}else{types=['MSPointerDown','MSPointerMove','MSPointerUp MSPointerCancel MSLostPointerCapture'];}}else if(Hammer.NO_MOUSEEVENTS){types=['touchstart','touchmove','touchend touchcancel'];}else{types=['touchstart mousedown','touchmove mousemove','touchend touchcancel mouseup'];}
EVENT_TYPES[EVENT_START]=types[0];EVENT_TYPES[EVENT_MOVE]=types[1];EVENT_TYPES[EVENT_END]=types[2];return EVENT_TYPES;},getTouchList:function getTouchList(ev,eventType){if(Hammer.HAS_POINTEREVENTS){return PointerEvent.getTouchList();}
if(ev.touches){if(eventType==EVENT_MOVE){return ev.touches;}
var identifiers=[];var concat=[].concat(Utils.toArray(ev.touches),Utils.toArray(ev.changedTouches));var touchList=[];Utils.each(concat,function(touch){if(Utils.inArray(identifiers,touch.identifier)===false){touchList.push(touch);}
identifiers.push(touch.identifier);});return touchList;}
ev.identifier=1;return[ev];},collectEventData:function collectEventData(element,eventType,touches,ev){var pointerType=POINTER_TOUCH;if(Utils.inStr(ev.type,'mouse')||PointerEvent.matchType(POINTER_MOUSE,ev)){pointerType=POINTER_MOUSE;}else if(PointerEvent.matchType(POINTER_PEN,ev)){pointerType=POINTER_PEN;}
return{center:Utils.getCenter(touches),timeStamp:Date.now(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){var srcEvent=this.srcEvent;srcEvent.preventManipulation&&srcEvent.preventManipulation();srcEvent.preventDefault&&srcEvent.preventDefault();},stopPropagation:function(){this.srcEvent.stopPropagation();},stopDetect:function(){return Detection.stopDetect();}};}};var PointerEvent=Hammer.PointerEvent={pointers:{},getTouchList:function getTouchList(){var touchlist=[];Utils.each(this.pointers,function(pointer){touchlist.push(pointer);});return touchlist;},updatePointer:function updatePointer(eventType,pointerEvent){if(eventType==EVENT_END){delete this.pointers[pointerEvent.pointerId];}else{pointerEvent.identifier=pointerEvent.pointerId;this.pointers[pointerEvent.pointerId]=pointerEvent;}},matchType:function matchType(pointerType,ev){if(!ev.pointerType){return false;}
var pt=ev.pointerType,types={};types[POINTER_MOUSE]=(pt===(ev.MSPOINTER_TYPE_MOUSE||POINTER_MOUSE));types[POINTER_TOUCH]=(pt===(ev.MSPOINTER_TYPE_TOUCH||POINTER_TOUCH));types[POINTER_PEN]=(pt===(ev.MSPOINTER_TYPE_PEN||POINTER_PEN));return types[pointerType];},re};}};var Detection=Hammer.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function startDetect(inst,eventData){if(this.current){return;}
this.stopped=false;this.current={inst:inst,startEvent:Utils.extend({},eventData),lastEvent:false,lastCalcEvent:false,futureCalcEvent:false,lastCalcData:{},name:''};this.detect(eventData);},detect:function detect(eventData){if(!this.current||this.stopped){return;}
eventData=this.extendEventData(eventData);var inst=this.current.inst,instOptions=inst.options;Utils.each(this.gestures,function triggerGesture(gesture){if(!this.stopped&&inst.enabled&&instOptions[gesture.name]){gesture.handler.call(gesture,eventData,inst);}},this);if(this.current){this.current.lastEvent=eventData;}
if(eventData.eventType==EVENT_END){this.stopDetect();}
return eventData;},stopDetect:function stopDetect(){this.previous=Utils.extend({},this.current);this.current=null;this.stopped=true;},getCalculatedData:function getCalculatedData(ev,center,deltaTime,deltaX,deltaY){var cur=this.current,recalc=false,calcEv=cur.lastCalcEvent,calcData=cur.lastCalcData;if(calcEv&&ev.timeStamp-calcEv.timeStamp>Hammer.CALCULATE_INTERVAL){center=calcEv.center;deltaTime=ev.timeStamp-calcEv.timeStamp;deltaX=ev.center.clientX-calcEv.center.clientX;deltaY=ev.center.clientY-calcEv.center.clientY;recalc=true;}
if(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE){cur.futureCalcEvent=ev;}
if(!cur.lastCalcEvent||recalc){calcData.velocity=Utils.getVelocity(deltaTime,deltaX,deltaY);calcData.angle=Utils.getAngle(center,ev.center);calcData.direction=Utils.getDirection(center,ev.center);cur.lastCalcEvent=cur.futureCalcEvent||ev;cur.futureCalcEvent=ev;}
ev.velocityX=calcData.velocity.x;ev.velocityY=calcData.velocity.y;ev.interimAngle=calcData.angle;ev.interimDirection=calcData.direction;},extendEventData:function extendEventData(ev){var cur=this.current,startEv=cur.startEvent,lastEv=cur.lastEvent||startEv;if(ev.eventType==EVENT_TOUCH||ev.eventType==EVENT_RELEASE){startEv.touches=[];Utils.each(ev.touc);});}
var deltaTime=ev.timeStamp-startEv.timeStamp,deltaX=ev.center.clientX-startEv.center.clientX,deltaY=ev.center.clientY-startEv.center.clientY;this.getCalculatedData(ev,lastEv.center,deltaTime,deltaX,deltaY);Utils.extend(ev,{startEvent:startEv,deltaTime:deltaTime,deltaX:deltaX,deltaY:deltaY,distance:Utils.getDistance(startEv.center,ev.center),angle:Utils.getAngle(startEv.center,ev.center),direction:Utils.getDirection(startEv.center,ev.center),scale:Utils.getScale(startEv.touches,ev.touches),rotation:Utils.getRotation(startEv.touches,ev.touches)});return ev;},register:function register(gesture){var options=gesture.defaults||{};if(options[gesture.name]===undefined){options[gesture.name]=true;}
Utils.extend(Hammer.defaults,options,true);gesture.index=gesture.index||1000;this.gestures.push(gesture);this.gestures.s0;});return this.gestures;}};(function(name){var triggered=false;function dragGesture(ev,inst){var cur=Detection.current;if(inst.options.dragMaxTouches>0&&ev.touches.length>inst.options.dragMaxTouches){return;}
switch(ev.eventType){case EVENT_START:triggered=false;break;case EVENT_MOVE:if(ev.distance<inst.options.dragMinDistance&&cur.name!=name){return;}
var startCenter=cur.startEvent.center;if(cur.name!=name){cur.name=name;if(inst.options.dragDistanceCorrection&&ev.distance>0){var factor=Math.abs(inst.options.dragMinDistance/ev.distance);startCenter.pageX+=ev.deltaX*factor;startCenter.pageY+=ev.deltaY*factor;startCenter.clientX+=ev.deltaX*factor;startCenter.clientY+=ev.deltaY*factor;ev=Detection.extendEventData(ev);}}
if(cur.lastEvent.dragLockToAxis||(inst.options.dragLockToAxis&&inst.options.dragLockMinDistance<=ev.distance)){ev.dragLockToAxis=true;}
var lastDirection=cur.lastEvent.direction;if(ev.dragLockToAxis&&lastDirection!==ev.direction){if(Utils.isVertical(lastDirection)){ev.direction=(ev.deltaY<0)?DIRECTION_UP:DIRECTION_DOWN;}else{ev.direction=(ev.deltaX<0)?DIRECTION_LEFT:DIRECTION_RIGHT;}}
if(!triggered){inst.trigger(name+'start',ev);triggered=true;}
inst.trigger(name,ev);inst.trigger(name+ev.direction,ev);var isVertical=Utils.isVertical(ev.direction);if((inst.options.dragBlockVertical&&isVertical)||(inst.options.dragBlockHorizontal&&!isVertical)){ev.preventDefault();}
break;case EVENT_RELEASE:if(triggered&&ev.changedLength<=inst.options.dragMaxTouches){inst.trigger(name+'end',ev);triggered=false;}
break;case EVENT_END:triggered=false;break;}}
Hammer.gestures.Drag={name:name,index:50,handler:dragGesture,defaults:{dragMinDistance:10,dragDistanceCorrection:true,dragMaxTouches:1,dragBlockHorizontal:false,dragBlockVertical:false,dragLockToAxis:false,dragLockMinDistance:25}};})('drag');Hammer.gestures.Gesture={name:'gesture',index:1337,handler:function releaseGesture(ev,inst){inst.trigger(this.name,ev);}};(function(name){var timer;function holdGesture(ev,inst){var options=inst.options,current=Detection.current;switch(ev.eventType){case EVENT_START:clearTimeout(timer);current.name=name;timer=setTimeout(function(){if(current&&current.name==name){inst.trigger(name,ev);}},options.holdTimeout);break;case EVENT_MOVE:if(ev.distance>options.holdThreshold){clearTimeout(timer);}
break;case EVENT_RELEASE:clearTimeout(timer);break;}}
Hammer.gestures.Hold={name:name,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:holdGesture};})('hold');Hammer.gestures.Release={name:'release',index:Infinity,handler:function releaseGesture(ev,inst){if(ev.eventType==EVENT_RELEASE){inst.trigger(this.name,ev);}}};Hammer.gestures.Swipe={name:'swipe',index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:0.6,swipeVelocityY:0.6},handler:function swipeGesture(ev,inst){if(ev.eventType==EVENT_RELEASE){var touches=ev.touches.length,options=inst.options;if(touches<options.swipeMinTouches||touches>options.swipeMaxTouches){return;}
if(ev.velocityX>options.swipeVelocityX||ev.velocityY>options.swipeVelocityY){inst.trigger(this.name,ev);inst.trigger(this.name+ev.direction,ev);}}}};(function(name){var hasMoved=false;function tapGesture(ev,inst){var options=inst.options,current=Detection.current,prev=Detection.previous,sincePrev,didDoubleTap;switch(ev.eventType){case EVENT_START:hasMoved=false;break;case EVENT_MOVE:hasMoved=hasMoved||(ev.distance>options.tapMaxDistance);break;case EVENT_END:if(!Utils.inStr(ev.srcEvent.type,'cancel')&&ev.deltaTime<options.tapMaxTime&&!hasMoved){sincePrev=prev&&prev.lastEvent&&ev.timeStamp-prev.lastEvent.timeStamp;didDoubleTap=false;if(prev&&prev.name==name&&(sincePrev&&sincePrev<options.doubleTapInterval)&&ev.distance<options.doubleTapDistance){inst.trigger('doubletap',ev);didDoubleTap=true;}
if(!didDoubleTap||options.tapAlways){current.name=name;inst.trigger(current.name,ev);}}
break;}}
Hammer.gestures.Tap={name:name,index:100,handler:tapGesture,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:true,doubleTapDistance:20,doubleTapInterval:300}};})('tap');Hammer.gestures.Touch={name:'touch',index:-Infinity,defaults:{preventDefault:false,preventMouse:false},handler:function touchGesture(ev,inst){if(inst.options.preventMouse&&ev.pointerType==POINTER_MOUSE){ev.stopDetect();return;}
if(inst.options.preventDefault){ev.preventDefault();}
if(ev.eventType==EVENT_TOUCH){inst.trigger('touch',ev);}}};(function(name){var triggered=false;function transformGesture(ev,inst){switch(ev.eventType){case EVENT_START:triggered=false;break;case EVENT_MOVE:if(ev.touches.length<2){return;}
var scaleThreshold=Math.abs(1-ev.scale);var rotationThreshold=Math.abs(ev.rotation);if(scaleThreshold<inst.options.transformMinScale&&rotationThreshold<inst.options.transformMinRotation){return;}
Detection.current.name=name;if(!triggered){inst.trigger(name+'start',ev);triggered=true;}
inst.trigger(name,ev);if(rotationThreshold>inst.options.transformMinRotation){inst.trigger('rotate',ev);}
if(scaleThreshold>inst.options.transformMinScale){inst.trigger('pinch',ev);inst.trigger('pinch'+(ev.scale<1?'in':'out'),ev);}
break;case EVENT_RELEASE:if(triggered&&ev.changedLength<2){inst.trigger(name+'end',ev);triggered=false;}
break;}}
Hammer.gestures.Transform={name:name,index:45,defaults:{transformMinScale:0.01,transformMinRotation:1},handler:transformGesture};})('transform');window.Hammer=Hammer;if(typeof module!=='undefined'&&module.exports){module.exports=Hammer;}
function setupPlugin(Hammer,$){if(!Date.now){Date.);};}
Hammer.utils.each(['on','off'],function(method){Hammer.utils[method]=function(element,type,handler){$(element)[method](type,function($ev){var data=$.extend({},$ev.originalEvent,$ev);if(data.button===undefined){data.button=$ev.which-1;}
handler.call(this,data);});};});Hammer.Instance.prototype.trigger=function(gesture,eventData){var el=$(this.element);if(el.has(eventData.target).length){el=$(eventData.target);}
return el.trigger({type:gesture,gesture:eventData});};$.fn.hammer=function(options){return this.each(function(){var el=$(this);var inst=el.data('hammer');if(!inst){el.data('hammer',new Hammer(this,options||{}));}else if(inst&&options){Hammer.utils.extend(inst.options,options);}});};}
if(typeof define=='function'&&define.amd){define(['jquer);});}else{setupPlugin(window.Hammer,window.jQuery||window.Zepto);}})(window);;(function(global,main,modules,modules_options,options){var initialized_modules={},global_eval=function(code){return global.Function('return '+code)();},global_document=global.document,local_undefined,register_module=function(moduleName,module){lmd_trigger('lmd-register:before-register',moduleName,module);var output={'exports':{}};initialized_modules[moduleName]=1;modules[moduleName]=output.exports;if(!module){module=lmd_trigger('js:request-environment-module',moduleName,module)[1]||global[moduleName];}else if(typeof module==='function'){var module_require=lmd_trigger('lmd-register:decorate-require',moduleName,lmd_require)[1];if(modules_options[moduleName]&&modules_options[moduleName].sandbox&&typeof module_require==='function'){module_require=local_undefined;}
module=module(module_require,output.exports,output)||output.exports;}
module=lmd_trigger('lmd-register:after-register',moduleName,module)[1];return modules[moduleName]=module;},lmd_events={},lmd_trigger=function(event,data,data2,data3){var list=lmd_events[event],result;if(list){for(var i=0,c=list.length;i<c;i++){result=list[i](data,data2,data3)||result;if(result){data=result[0]||data;data2=result[1]||data2;data3=result[2]||data3;}}}
return result||[data,data2,data3];},lmd);},lmd_require=function(moduleName){var module=modules[moduleName];var replacement=lmd_trigger('*:rewrite-shortcut',moduleName,module);if(replacement){moduleName=replacement[0];module=replacement[1];}
lmd_trigger('*:before-check',moduleName,module);if(initialized_modules[moduleName]&&module){return module;}
lmd_trigger('*:before-init',moduleName,module);if(typeof module==='string'&&module.indexOf('(function(')===0){module=global_eval(module);}
return register_module(moduleName,module);},output={'exports':{}},sandbox={'global':global,'modules':modules,'modules_options':modules_options,'options':options,'eval':global_eval,'register':register_module,'require':lmd_require,'initialized':initialized_modules,'document':global_document,'on':lmd_on,'trigger':lmd_trigger,'undefined':local_undefined};for(var moduleName in modules){initialized_modules[moduleName]=0;}
main(lmd_trigger('lmd-register:decorate-require','main',lmd_require)[1],output.exports,output);})
(this,(function(require,exports,module){var $=require('jQuery'),Slider=require('slider'),Overlay=require('overlay'),_=require('_');var PLUGIN_NAME='wgSlider',NAMESPACE='.'+PLUGIN_NAME;var publicMethods={'update':'update','addData':'addDataSet','openById':'open'};var processDataFromElement=function(element,overlay){var defaultPicture={type:'picture',created_date:'',popup_src:'',med_popup_src:'',small_popup_src:'',title:'',link:'',category_link:'',category_title:'',description:''};var $element=$(element),url=$element.attr('src'),title=$element.attr('title'),description=$element.attr('alt'),rel=$element.attr('rel'),item;item=$.extend({},defaultPicture,{id:_.uniqueId(),popup_src:url,med_popup_src:url,small_popup_src:url,title:title,description:description,helpersOverride:'simple_picture'});$element.attr('data-slider-id',item.id);overlay.addSeparateItem(item);$element.on('click'+NAMESPACE,function(e){e.preventDefault();e.stopPropagation();var id=$(this).attr('data-slider-id');overlay.openImage(id);});$element.parents('a').on('click'+NAMESPACE,function(e){e.preventDefault();});return{list:[item]};};$.fn[PLUGIN_NAME]=function(options){var otherArguments=Array.prototype.slice.call(arguments,1),bodyEl=document.body,overlay;return this.each(function(){var value=this,overlay=$[PLUGIN_NAME](options),takeDataFromHtml=(window.mediaSliderData===undefined),data,plugin;if(!$.data(value,PLUGIN_NAME)){if(takeDataFromHtml){data=processDataFromElement(value,overlay);}
$.data(value,PLUGIN_NAME,data);return $.data(value,PLUGIN_NAME);}else if(publicMethods[options]){plugin=$.data(value,PLUGIN_NAME);return overlay[publicMethods[options]].apply(plugin,otherArguments);}});};$[PLUGIN_NAME]=function(options){var overlay,bodyEl=document.body;if(!$.data(bodyEl,PLUGIN_NAME)){overlay=new Overlay(options);$.data(bodyEl,PLUGIN_NAME,overlay);}else{overlay=$.data(bodyEl,PLUGIN_NAME);}
return overlay;};$[PLUGIN_NAME].activateOnElements=function(selector,data){var $elements=$(selector),overlay,dataSet;if($elements.length===0){return;}
overlay=$[PLUGIN_NAME](window.wgSliderConfig||{});data=data||{list:window.mediaSliderData};dataSet=overlay.addDataSet(data);$elements.off(NAMESPACE).on('click'+NAMESPACE+' customtap'+NAMESPACE,function(e){var $element=$(this),dataSet=$element.data('dataset');e.preventDefault();var currentSlide=$element.find('.js-image').fil0;}).index();overlay.slider.dataManager.applyDataSet(dataSet);if(currentSlide>=0){overlay.open(overlay.slider.dataManager.getIdByIndex(currentSlide));}else{delete window.wgsliderCurrentItem;overlay.open();}}).attr('data-dataset',dataSet.name);};$[PLUGIN_NAME].activateVideo=function($link,customClass){var defaultVideo={type:'video',videoId:'',created_date:'',title:'',link:'',category_link:'',category_title:'',description:''},videoId=$link.data('videoId'),title=$link.data('videoTitle'),overlay=$.wgSlider(),dataSet,item;item=$.extend({},defaultVideo,{id:videoId,videoId:videoId,title:title,helpersOverride:'simple_picture'});overlay.addSeparateItem(item);$link.on('click'+NAMESPACE,function(e){var $currentLink=$(this),id=$currentLink.data('videoId'),slider=overlay.slider,videoClass=slider.currentSlide.config.videoSlideClass;e.preventDefault();slider.dataManager.applyDataSet(dataSet);overlay.$slider.one('slideactivated',function(e,slideEl){var $slide=$(slideEl);$slide.removeClass(videoClass).addClass(customClass);slider.$date.hide();overlay.$slider.one('slidedeactivated',function(e,slideEl){var $slide=$(slideEl);$slide.addClass(videoClass).removeClass(customClass);slider.$date.show();});});overlay.openSeparateItem(id);});};$(function(){$('.fancybox-image').wgSlider(window.wgSliderConfig||{});});}),{"browsers_detection":(function(require,exports,module){var $=require('jQuery');var IOS_REGEXP=/(i(pod|phone|pad)+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i;var matched,browser={};$.uaMatch=function(ua){var match,browserMatch,webkitMatch,mobileMatch,chromeMatch,androidStandartBrowserMatch,windowsPhoneDesktopMatch,iosMatch;ua=ua.toLowerCase();match=/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(chromium) ((\d+)?[\w\.]+)/.exec(ua)||/(yabrowser)\/((\d+)?[\w\.]+)/.exec(ua)||/(kindle)\/((\d+)?[\w\.]+)/.exec(ua)||ua.indexOf('compatible')<0&&/(firefox)\/((\d+)?[\w\.-]+)/.exec(ua)||/(iemobile)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||/(trident)\/.+rv[^\w]+([\w\.]+)/.exec(ua)||/(android)[\/\s-]?([\w\.]+)/.exec(ua)||/version\/((\d+)?[\w\.]+).+?(mobile)\/\w+\s(safari)/.exec(ua)||/version\/((\d+)?[\w\.]+).+?(safari)/.exec(ua)||/version\/.+?\/\w+\s(safari)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(mozilla)\/((\d+)?[\w\.]+).+gecko/.exec(ua);webkitMatch=/webkit/.exec(ua);mobileMatch=/mobile/.exec(ua);windowsPhoneDesktopMatch=/wpdesktop/.exec(ua);chromeMatch=/(chrome)[ \/]([\w.]+)/.exec(ua);androidStandartBrowserMatch=/(android)[\/\s-]?([\w\.]+).*?version\/([\w\.]+).+?(mobile)*\s+(safari)/.exec(ua);iosMatch=IOS_REGEXP.exec(ua);if(match===null){return{};}
browserMatch={browser:match[1]||'',version:match[2]||'0',mobile:mobileMatch!==null?true:false,webkit:webkitMatch!==null?true:false,ios:(iosMatch!==null&&iosMatch[0]!==undefined)};if(match[1]==='android'){if(chromeMatch!==null&&chromeMatch[1]==='chrome'){browserMatch.browser=chromeMatch[1];browserMatch.version=chromeMatch[2];}else{if(androidStandartBrowserMatch!==null){browserMatch.browser=androidStandartBrowserMatch[5];browserMatch.version=androidStandartBrowserMatch[3];}}
browserMatch.android=true;browserMatch.osVersion=match[2];}else if(match[4]==='safari'){browserMatch.browser=match[4];browserMatch.version=match[1];}else if(match[3]==='safari'){browserMatch.browser=match[3];browserMatch.version=match[1];}else if(browserMatch.browser==='kindle'){browserMatch.mobile=true;}else if(match[1]==='trident'){if(windowsPhoneDesktopMatch!==null){browserMatch.browser='iemobile';browserMatch.mobile=true;}else{browserMatch.browser='msie';}}
return browserMatch;};matched=$.uaMatch(navigator.userAgent);browser=$.extend({},matched);if(matched.browser&&matched.browser!==''){browser[matched.browser]=true;}
if(matched.android){browser.android=true;browser.mobile=true;}
browser.mac=window.navigator&&window.navigator.platform&&window.navigator.platform.toLowerCase().indexOf('mac')!==-1;$.browser=browser;module.exports=browser;}),"css_utils":(function(require,exports,module){var $=require('jQuery'),browserDetection=require('browsers_detection'),Modernizr=require('Modernizr'),console=require('console');var MIN_BUGGY_ANDROID_VERSION=3.0,MAX_BUGGY_ANDROID_VERSION=4.0,TRANSITION_END_FALLING_TIMEOUT=0.5;var touchEventBugDetectionCache;var isAndroidWithTouchEventsBug=function(){var osVersion,isVersionWithBug;if(touchEventBugDetectionCache===undefined){osVersion=parseFloat(browserDetection.osVersion);isVersionWithBug=(osVersion>=MIN_BUGGY_ANDROID_VERSION&&osVersion<=MAX_BUGGY_ANDROID_VERSION);touchEventBugDetectionCache=(browserDetection.android&&isVersionWithBug);}
return touchEventBugDetectionCache;};var whichTransitionEvent=function(){var t,el=document.createElement('fakeelement'),transitions={'transition':'transitionend','OTransition':'oTransitionEnd','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'};for(t in transitions){if(transitions.hasOwnProperty(t)&&el.style[t]!==undefined){return transitions[t];}}};var CSSUtils={parseCssMatrix:function(string){var m=this,type,parts,i;string=String(string).trim();if(string==='none'){return m;}
type=string.slice(0,string.indexOf('('));if(type==='matrix3d'){parts=string.slice(9,-1).split(',');for(i=parts.length;i>0;i--){parts[i]=parseFloat(parts[i]);}
m.m11=m.a=parts[0];m.m12=m.b=parts[1];m.m13=parts[2];m.m14=parts[3];m.m21=m.c=parts[4];m.m22=m.d=parts[5];m.m23=parts[6];m.m24=parts[7];m.m31=parts[8];m.m32=parts[9];m.m33=parts[10];m.m34=parts[11];m.m41=m.e=parts[12];m.m42=m.f=parts[13];m.m43=parts[14];m.m44=parts[15];}else if(type==='matrix'){m.affine=true;parts=string.slice(7,-1).split(',');for(i=parts.length;i>0;i--){parts[i]=parseFloat(parts[i]);}
m.m11=m.a=parts[0];m.m12=m.b=parts[2];m.m41=m.e=parts[4];m.m21=m.c=parts[1];m.m22=m.d=parts[3];m.m42=m.f=parts[5];}else{throw new TypeError('Invalid Matrix Value');}
return m;},prefixWrap:function(property,value,vendors,valuePrefixing){var results={},valueOfProp;vendors=vendors||['-webkit-','-moz-','-ms-','-o-',''];valuePrefixing=valuePrefixing||false;$.each(vendors,function(index,vendor){if(!valuePrefixing){valueOfProp=value;}else{valueOfProp=vendor+value;}
results[vendor+property]=valueOfProp;});return results;},getMatrix3d:function(v){var vendors=['-webkit-','-ms-',''],cssValue,translateValue,matrix,matrixToString;if(v.x===undefined){v.x=0;}
if(v.y===undefined){v.y=0;}
if(v.z===undefined){v.z=0;}
if(v.scale===undefined){v.scale=1;}
matrix=[[v.scale,0,0,0],[0,v.scale,0,0],[0,0,v.scale,0],[v.x,v.y,0,1]];matrixToString=function(m){var result=[];$.eac);});return'matrix3d('+result.join(',')+')';};translateValue=matrixToString(matrix);cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},whichTransitionEvent:whichTransitionEvent,bindTransitionEnd:function($el,callback,options){var transitionEnd=whichTransitionEvent();options=$.extend({},{timeout:TRANSITION_END_FALLING_TIMEOUT},options);$el.one(transitionEnd,function(){if(callback!==undefined){window.clearTimeout($el.data('transitionEndTimeout'));callback.call(this);}});$el.data('transitionEndTimeout',window.setTimeout(function(){if(callback!==undefined){$el.off(transitionEnd);callback.call(this);}},options.timeout));},detectSupportTransition:function(){var prefixes='transition WebkitTransition MozTransition '+'OTransition msTransition KhtmlTransition'.split(' '),i,len;for(i=0,len=prefixes.length;i<len;i++){if(document.createElement('div').style[prefixes[i]]!==undefined){return prefixes[i];}}
return false;},detectSupport3dTransition:function(){var isOldOrBuggyAndroid=browserDetection.android&&parseFloat(browserDetection.osVersion)<4.1&&browserDetection.safari,isOldOpera=browserDetection.opera&&parseFloat(browserDetection.version)<13,isIE9=browserDetection.msie&&parseFloat(browserDetection.version)<10;if(isOldOrBuggyAndroid||isOldOpera||isIE9){return false;}
return Modernizr.csstransforms3d&&Modernizr.csstransforms&&Modernizr.csstransitions;},detectSupport2dTransits;},isTouch:function(){return document.createTouch!==undefined||('ontouchstart'in window)||('onmsgesturechange'in window)||navigator.msMaxTouchPoints;},bindOrientaionChangeToRes);},isAndroidWithTouchEventsBug:isAndroidWithTouchEventsBug,bindPreventClickAndPropagation:function(els){if(!Array.isArray(els)){els=[els];}
$.each();});},preventDefaultAndPropogationOnHammer:function(e){function preventAndStopPropagateOriginalEvent(e){e.preventDefault();e.stopPropagation();if(e.srcEvent!==undefined){e.srcEvent.preventDefault();}}
if(e!==undefined){e.preventDefault();e.stopPropagation();if(e.gesture!==undefined){if(browserDetection.msie&&(browserDetection.version==='7.0'||browserDetection.version==='8.0')){try{preventAndStopPropagateOriginalEvent(e.gesture);}
catch(error){console&&console.error('Incorrect preventing propagation and prevent default '+' in old IE inside jquery');}}else{preventAndStopPropagateOriginalEvent(e.gesture);}}}},getPositionIn3d:function(value){var vendors=['-webkit-','-ms-',''],cssValue,translateValue;value.x=value.x||0;value.y=value.y||0;value.z=value.z||0;translateValue='translate3d('+value.x+'px,'+value.y+'px,'+value.z+'px)';cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},getPositionWithJquery:function(value){var cssValue;if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
cssValue={top:value.y+'px',left:value.x+'px'};return cssValue;},isWideDesktopView:function(){return!browserDetection.mobile&&Modernizr.mq('all and (min-width: 1450px)');},isSmallDesktopView:function(){return!browserDetection.mobile&&Modernizr.mq('all and (max-width: 1449px)');},isTabletRetina:function(){return browserDetection.mobile&&Modernizr.mq('all and (min-width: 800px), (min-width: 800px) and (-webkit-min-device-pixel-ratio: 1.5),(min-width: 800px) and (min-resolution: 144dpi)');},isGeneralTabletView:function(){return browserDetection.mobile&&Modernizr.mq('all and (min-width: 481px) and (max-width: 799px)');},isMobileV);},isDesktopOver1100:function(){return!browserDetection.mobile&&Modernizr.mq('all and (min-width: 1100px)');},isDesktopUnder1100:function(){return!browserDetection.mobile&&Modernizr.mq('all and (max-width: 1099px)');}};module.exports=CSSUtils;}),"data_manager":(function(require,exports,module){var MobilePaginator=require('mobile_paginator'),$=require('jQuery');var defaultConfig={defaultIdForLoadingItem:'loading',usePaginator:false};var DataManager=function(data,options){var self=this;this.config=defaultConfig;this.options=options;this.itemsHash={};this.dataSets={};this.itemsIndex=[];this.currentIndex=0;this.tempItemWithLoader={thumb_src:this.config.thumbSrc,popup_src:this.config.popupSrc,defaultIdForLoadingItem:this.config.id};if(this.config.usePaginator){this.mobilePaginator=new MobilePaginator({'filterParams':this.config.filterParams});this.mobilePaginator.loadD);});}else{setTime);},0);}};DataManager.prototype={init:function(){this.addData(this.data);if(typeof this.options.onReadyHandler==='function'){this.options.onReadyHandler.call(this);}},addData:function(data,needPrepend){var itemList=data.list,i,len;if(!needPrepend){for(i=0,len=itemList.length;i<len;i++){this.addItem(itemList[i]);}}else{this.rebuildIndex(itemList);}},addItem:function(item){if(item.id===undefined){throw new Error('Incorrect item passed into the datamanager!');}
if(typeof item.id!=='string'){item.id=String(item.id);}
if(this.itemsHash[item.id]===undefined){this.itemsHash[item.id]=item;this.itemsIndex.push(item.id);}},setCurrentIndex:function(options){var id;if(typeof options.id!=='string'){id=String(options.id);}else{id=options.id;}
if(id!==undefined&&this.itemsHash[id]!==undefined){this.currentIndex=this.searchIndexById(id);return true;}else if(options.index&&this.itemsIndex[this.currentIndex]!==undefined){this.currentIndex=options.index;return true;}
this.currentIndex=0;return false;},rebuildIndex:function(newItems){var oldCurrentIndex=this.getCurrentIndex(),oldIndexHash=this.itemsIndex,newIndexHash=[],newLength=newItems.length,i,len,newItemId;for(i=0,len=newLength;i<len;i++){newItemId=newItems[i].id;if(typeof newItemId!=='string'){newItemId=String(newItemId);}
newIndexHash.push(newItemId);this.itemsHash[newItemId]=newItems[i];}
newIndexHash=newIndexHash.concat(oldIndexHash);this.itemsIndex=newIndexHash;this.setCurrentIndex({index:oldCurrentIndex+newLength});},next:function(){var currentIndex=this.currentIndex,nextIndex=currentIndex+1,nextItem=this.getNextItem();if(nextItem!==undefined){this.currentIndex=nextIndex;}
return nextItem;},prev:function(){var currentIndex=this.currentIndex,prevIndex=currentIndex-1,prevItem=this.getPrevItem();if(prevItem!==undefined){this.currentIndex=prevIndex;}
return prevItem;},searchIndexById:function(id){var itemsIndex=this.itemsIndex,i,len;for(i=0,len=this.itemsIndex.length;i<len;i++){if(itemsIndex[i]===id){return i;}}
return-1;},getItemById:function(id){if(typeof id!=='string'){id=String(id);}
return this.itemsHash[id];},updateItem:function(item){var id=String(item.id),oldItem;if(this.itemsHash[id]!==undefined){oldItem=this.itemsHash[id];this.itemsHash[id]=$.extend(true,oldItem,item);}else{this.addItem(item);}},getIdByIn];},getCurrentItem:function(){return this.itemsHash[this.itemsIndex[this.currentIndex]];},getNextItem:function(){var currentIndex=this.currentIndex,nextIndex=currentIndex+1,tempItem=this.tempItemWithLoader,self=this;var getNextPage=function(){if(self.config.usePaginator&&self.mobilePaginator.isNextPage()){this.mobilePaginator.loadNextP);});return{thumb_src:tempItem.thumb_src,id:tempItem.id};}else{return undefined;}};if(nextIndex>(this.itemsIndex.length-1)){return getNextPage();}else if(nextIndex===(this.itemsIndex.length-1)){getNextPage();return this.itemsHash[this.itemsIndex[nextIndex]];}else{return this.itemsHash[this.itemsIndex[nextIndex]];}},getPrevItem:function(){var self=this,currentIndex=this.currentIndex,prevIndex=currentIndex-1,mobilePaginator=this.mobilePaginator,tempItem=this.tempItemWithLoader;if(prevIndex<1){if(this.config.usePaginator&&mobilePaginator.isPrevPage()){this.rebuildingIndex=true;this.mobilePaginator.loadPrevPage(function(data){self.addData(data,true);self.onRebuildIndexHandler();this.rebuildingIndex=false;});}}
if(prevIndex>=0){return this.itemsHash[this.itemsIndex[prevIndex]];}else if(this.rebuildingIndex&&prevIndex<0){return{thumb_src:tempItem.thumb_src,id:tempItem.id};}else{return undefined;}},getCurrentIndex:function(){return this.currentIndex;},filterItx;},addDataSet:function(dataSet){if(dataSet!==undefined&&dataSet.name!==undefined&&dataSet.ids!==undefined){this.dataSets[dataSet.name]=dataSet.ids;}},applyData);}};module.exports=DataManager;}),"gallery":(function(require,exports,module){var $=require('jQuery'),CSSUtils=require('css_utils'),templates=require('templates'),_=require('_');var SHOW_ANIMATION_DURATION=200,MOVE_ITEM_ANIMATION_DURATION=200,IMAGE_LOAD_PROCESSING_DEBOUNCE_DELAY=300;var config={galleryListSelector:'.js-gallery-list',galleryNextSelector:'.js-gallery-control-next',galleryPrevSelector:'.js-gallery-control-prev',galleryCurrentSlideClass:'minislider_item__current'};var Gallery=function($element){this.$element=$element;this.config=config;this.init();};Gallery.prototype={init:function(){var $element=this.$element,config=this.config;this.$next=$element.find(config.galleryNextSelector);this.$prev=$element.find(config.galleryPrevSelector);this.$list=$element.find(config.galleryListSelector);this.offset=0;this.$list.css('left',0);this.$list.empty();this.list=[];this.activated=false;this.$imageMiniSlide=$(templates.getTemplate('picture_minislide')());this.$videoMiniSlide=$(templates.getTemplate('video_minislide')());this.bindHandlers();},activate:function(item){var docFragment=document.createDocumentFragment(),self=this,loadHandler=_.debounce(function(){self.updateControlsPosition();},IMAGE_LOAD_PROCESSING_DEBOUNCE_DELAY);if(this.activated){this.deactivate();}
this.parentItem=item;this.list=item.list;this.$list.empty();$.each(this.list,_.bind(function(i,minisliderItem){var $newSlide;if(minisliderItem.type==='gallery-picture'){$newSlide=this.$imageMiniSlide.clone();}else if(minisliderItem.type==='gallery-video'){$newSlide=this.$videoMiniSlide.clone();}
$newSlide.attr('data-index',i).find('img').attr('src',decodeURIComponent(minisliderItem.preview)).on('load',loadHandler);minisliderItem.parentId=self.parentItem.id;docFragment.appendChild($newSlide[0]);},this));this.$list[0].appendChild(docFragment);this.bindActions();this.setCurrentSlide(this.$list.children().eq(item.listCurrentIndex||0),true);this.$element.show(SHOW_ANIMATION_DURATION,_.be;},this));},deactivate:function(){this.activated=false;this.$list.css('left',0);this.$list.children().hammer().off('tap');this.$element.hide();},setupControls:function(){var offset=this.getCurrentOffset();if(this.maxOffset<0){this.$prev.hide();this.$next.hide();}else if(offset===0){this.$prev.hide();this.$next.show();}else if(Math.abs(offset)>=this.maxOffset){this.$prev.show();this.$next.hide();}else{this.$next.show();this.$prev.show();}},updateElementsSize:function(){this.galleryWidth=this.$element.width();this.slidesWidth=this.getSlidesWidth();this.maxOffset=this.slidesWidth-this.galleryWidth;},updateControlsPosition:function(){var offset;if(this.activated){offset=this.getCurrentOffset();this.updateElementsSize();if(this.maxOffset<0){offset=0;}else if(Math.abs(offset)>this.maxOffset){offset=-this.maxOffset;}
this.setupControls();this.$list.stop().animate({left:offset},MOVE_ITEM_ANIMATION_DURATION,'linear');}},isGalleryNeedContr0;},getSlidesWidth:function(){var width=0;this.$list.children().each(function(){var $slide=$(this);width=width+$slide.width();});return width;},getCurrentOffset:function(){var offset=parseInt(this.$list.css('left'),10);this.offset=offset;return offset;},setCurrentOffset:function(value){if(value===this.offset){return value;}
if(value>0){value=0;this.$prev.hide();this.$next.show();}else if(Math.abs(value)>this.maxOffset){value=-this.maxOffset;this.$prev.show();this.$next.hide();}else{this.$next.show();}
if(value<0){this.$prev.show();}
this.$list.css('left',value);this.offset=value;return value;},offsetToPrev:function(){var position=this.getCurrentOffset(),offset=position+this.galleryWidth/2;if(offset>0){offset=0;this.$prev.hide();}
this.$next.show();this.$list.stop().animate({'left':offset},MOVE_ITEM_ANIMATION_DURATION,'linear');this.offset=offset;},offsetToNext:function(){var position=this.getCurrentOffset(),offset=position-this.galleryWidth/2;if(Math.abs(offset)>this.maxOffset){offset=-this.maxOffset;this.$next.hide();}
this.$prev.show();this.$list.stop().animate({'left':offset},MOVE_ITEM_ANIMATION_DURATION,'linear');this.offset=offset;},setCurrentSlide:function($galleryItem,ignoreUpdateImage){var index=$galleryItem.data('index'),item=this.list[index];this.parentItem.listCurrentIndex=index;this.$list.children().removeClass(this.config.galleryCurrentSlideClass);$galleryItem.addClass(this.config.galleryCurrentSlideClass);this.$element.data('current',item.id);this.currentSlideItem=item.id;if(!ignoreUpdateImage){this.setSlideImage(item);}},setSlideIm);},bindHandlers:function(){this.$next.hammer().on('touch.wg',_.bind(function(e){e.preventDefault();e.gesture.preventDefault();e.stopPropagation();e.gesture.stopDetect();this.offsetToNext();},this));this.$prev.hammer().on('touch.wg',_.b);},this));this.$list.hammer().on('dragstart',_.bind(function(e){var offset=this.getCurrentOffset();e.stopPropagation();if(this.isGalleryNeedControls()){this.$list.hammer({preventDefault:true}).on({'drag':_.bind(function(e){var delta=e.gesture.deltaX;CSSUtils.preventDefaultAndPropogationOnHammer(e);this.setCurrentOffset(offset+delta);},this),'dragend':_.bind(function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);this.$list.hammer().off('drag dragend');},this)});}},this));CSSUtils.bindPreventClickAndPropagation([this.$next,this.$prev,this.$list]);$(window).on('resize',_.b);},this));},bindActions:function(){var self=this;this.$list.children().hammer().on('tap.wg',function(e){var $galleryItem=$(this);CSSUtils.preventDefaultAndPropogationOnHammer(e);self.setCurrentSlide($galleryItem);});}};module.exports=Gallery;}),"gestures":(function(require,exports,module){var $=require('jQuery'),CSSUtils=require('css_utils');var TOUCHEND_HANDLER_TIMEOUT=1000,CLICK_MAX_DISTANCE=10,SWIPE_MIN_DISTANCE=100;var defaultOptions={useNativeEvents:false};var CustomGestures=function($target,options){this.options=$.extend({},defaultOptions,options);this.$body=this.options.$body||$('body');this.$target=$target||this.$body;this.initGestures();};CustomGestures.prototype={initGestures:function(){this.gestureState={};this.gestureState.startCoords={};this.gestureState.endCoords={};this.activate();},activate:function(){var self=this;if(this.options.useNativeEvents){this.$target.on({'touchstart.swipebox':function(e){self.touchStartHandler(e);},'touchend.swipebox':function(e){self.touchEndHandler(e);}});}else{this.$target.hammer({dragMinDistance:1}).on('dragstart',function(e){self.hammerStart(e);});}},deactiv);},isCorrectEventData:function(data){if(data&&data.touches&&(data.touches.length===1)){return true;}else{return false;}},hammerStart:function(e){var self=this;if(this.isCorrectEventData(e.gesture)){this.gestureState.endCoords=e.gesture.touches[0]||{pageX:e.gesture.deltaX};this.gestureState.startCoords.pageX=e.gesture.touches[0].pageX||e.gesture.deltaX;this.$body.hammer({prevent_default:true}).on({'drag':function(e){self.hammerTracker(e,function(distance){self.$target.trigger('customswipemovetrack',distance);});},'dragend.swipemoving':function(e){self.hammerEndHandler(e);}});this.hammerEndTimeout=window.setTimeout(function(){self.hammerEndHandler();},TOUCHEND_HANDLER_TIMEOUT);}},hammerTracker:function(e,callback){var self=this;e.preventDefault();e.gesture.preventDefault();this.gestureState.endCoords=e.gesture.touches[0]||{pageX:e.gesture.deltaX};this.gestureState.distance=this.gestureState.endCoords.pageX-this.gestureState.startCoords.pageX;callback.call(this,this.gestureState.distance);window.clearTimeout(this.hammerEndTimeout);this.hammerEndTimeout=window.setTimeout(function(){self.hammerEndHandler();},TOUCHEND_HANDLER_TIMEOUT);},hammerEndHandler:function(e){var gestureState=this.gestureState,distance=gestureState.distance,hammer=this.$body.data('hammer');window.clearTimeout(this.touchEndTimeout);window.clearTimeout(this.hammerEndTimeout);CSSUtils.preventDefaultAndPropogationOnHammer(e);if(e!==undefined&&e.gesture!==undefined){this.gestureState.endCoords=e.gesture.touches[0]||{pageX:e.gesture.deltaX};distance=gestureState.endCoords.pageX-gestureState.startCoords.pageX;this.gestureState.distance=distance;}
this.detectSwipe(distance,e);if(hammer){hammer.off('drag dragend');}},touchStartHandler:function(e){var self=this;this.gestureState.endCoords=e.originalEvent.targetTouches[0];this.gestureState.startCoords.pageX=e.originalEvent.targetTouches[0].pageX;this.$body.on({'touchmove.swipemoving':function(e){self.touchMoveTracke);});},'touchend.swipemovi);}});this.touchEndTimeout=window.setTimeout(function(){self.touchEndHandler();},TOUCHEND_HANDLER_TIMEOUT);},touchMoveTracker:function(e,callback){var self=this;e.preventDefault();this.gestureState.endCoords=e.originalEvent.targetTouches[0];this.gestureState.distance=this.gestureState.endCoords.pageX-this.gestureState.startCoords.pageX;callback.call(this,this.gestureState.distance);window.clearTimeout(this.touchEndTimeout);this.touchEndTimeout=window.setTimeout(function(){self.touchEndHandler();},TOUCHEND_HANDLER_TIMEOUT);},touchEndHandler:function(e){var gestureState=this.gestureState,distance=gestureState.distance;window.clearTimeout(this.touchEndTimeout);if(e!==undefined){this.gestureState.endCoords=e.originalEvent.changedTouches[0];distance=gestureState.endCoords.pageX-gestureState.startCoords.pageX;this.gestureState.distance=distance;}
this.detectSwipe(distance,e);this.$body.off('.swipemoving');},detectSwipe:function(distance,e){var type='noswipe';if(Math.abs(distance)<CLICK_MAX_DISTANCE){type='customtouch';if(distance!==0){this.$target.trigger('customswipeincomplete',e);}}else if(distance>=SWIPE_MIN_DISTANCE){type='customswipeleft';}else if(distance<=-SWIPE_MIN_DISTANCE){type='customswiperight';}else if(distance===undefined||distance<=SWIPE_MIN_DISTANCE&&distance>=-SWIPE_MIN_DISTANCE){type='customswipeincomplete';}
this.gestureState.distance=0;this.gestureState.startCoords={};this.gestureState.endCoords={};this.$target.trigger(type,e);}};module.exports=CustomGestures;}),"gettext":(function(require,exports,module){var stubGettt;};if(window.gettext===undefined){module.exports=stubGettext;}else{module.exports=window.gettext;}}),"key_code};}),"mobile_paginator":(function(require,exports,module){var $=require('jQuery'),console=require('console'),dataLoader;var defaultPaginatorConfig={defaultPage:1,pageSize:50,filterParams:{'content_type':'/pictures/',onPage:50,'approved_status':'approved'},minPageNumber:1};var Paginator=function(config){this.config=$.extend(true,{},defaultPaginatorConfig,config);this.pageSize=this.config.pageSize;this.currentPage=this.config.defaultPage;this.allItemsNumber=0;this.filterParams=this.config.filterParams;};Paginator.prototype={loadData:function(callback){var self=this,allItemsNumber;this.filterParams.page=this.getCurrentPage();dataLoader.setOnPage(this.filterParams.onPage);dataLoader.getFiltredItemsAjax(this.filterParams,function(response){var data,isAllItemFieldCorrect;try{data=JSON.parse(response);}
catch(e){console.log('Error on parsing JSON while loading data by Paginator');console.log(e);}
if(data===undefined){throw new Error('The data for the request is absent. '+'Filter params is '+JSON.stringify(self.filterParams,null,4));}
if(callback!==undefined){callback.call(this,data);}
if(self.allItemsNumber!==0){return true;}
isAllItemFieldCorrect=(data.all_items!==undefined&&(typeof data.all_items==='string'||data.all_items==='number'));if(isAllItemFieldCorrect){allItemsNumber=parseInt(data.all_items,10);if(allItemsNumber>=0){self.allItemsNumber=allItemsNumber;}}else{throw new Error('The requested data is incorrect, the all_items key is absent. '+'The data object is '+JSON.stringify(data,null,4));}});},setCurrentPage:function(curPage){this.currentPage=curPage;},getCurrentPage:function(){return this.currentPage;},loadNextPage:function(callback){if(this.isNextPage()){this.setCurrentPage(this.getCurrentPage()+1);this.loadData(callback);return true;}else{return false;}},loadPrevPage:function(callback){if(this.isPrevPage()){this.setCurrentPage(this.getCurrentPage()-1);this.loadData(callback);return true;}else{return false;}},isNextPage:function(){if(this.getCurrentPage()*this.pageSize<this.allItemsNumber){return true;}else{return false;}},isPrevPage:function(){if(this.getCurrentPage()>this.config.minPageNumber){return true;}else{return false;}}};module.exports=Paginator;}),"mobile_slide_position_manager":(function(require,exports,module){var $=require('jQuery'),CSSUtils=require('css_utils'),_=require('_');var RELOCATE_OFFSET=3000,TRANSITION_END_FALLING_TIMEOUT=600,MOVE_END_ANIMATION_TIMEOUT=700;var defaultOptions={animationClass:'wgslider-slide-animation'};var SliderItem=function($slide,options){this.$slide=$slide;this.options=$.extend({},defaultOptions,options);this.slideWidth=options.width;this.currentOffset={};this.position=options.position;this.number=options.number;this.definePositioningStrategy();this.currentOffset.x=(this.position-this.number)*this.slideWidth;};SliderItem.prototype={definePositioningStrategy:function(){if(this.doCss3dTrans()){this.getSlidePosition=this.getSlidePositionIn3d;this.positionSlide=this.positionSlideWith3d;}else{this.getSlidePosition=this.getSlidePositionWithJquery;this.positionSlide=this.positionSlideWithJquery;}},doCss3dTrans:function(){return CSSUtils.detectSupport3dTransition();},getSlidePositionIn3d:function(value){var vendors=['-webkit-','-ms-',''],cssValue,translateValue;if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
if(value.z===undefined){value.z=0;}
translateValue='translate3d('+value.x+'px,'+value.y+'px,'+value.z+'px)';cssValue=CSSUtils.prefixWrap('transform',translateValue,vendors);return cssValue;},getSlidePositionWithJquery:function(value){var cssValue;if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
cssValue={top:value.y+'px',left:value.x+'px'};return cssValue;},moveToNext:function(callback,options){if(this.position===-1){this.relocate(1);}else{this.position=this.position-1;this.positionSlide(callback,options);}},moveToPrevious:function(callback,options){if(this.position===1){this.relocate(-1);}else{this.position=this.position+1;this.positionSlide(callback,options);}},positionSlideWith3d:function(callback,options){var transXOffset=(this.position-this.number)*this.slideWidth,self=this,isAlreadyAnimating=this.$slide.data('animating');options=options||{animating:true};if(options.animating){if(!isAlreadyAnimating){this.$slide.addClass(this.options.animationClass);this.$slide.data('animating',true);}}else{this.$slide.removeClass(this.options.animationClass);this.$slide.data('animating',false);}
if(this.position===0){var transitionEnd=CSSUtils.whichTransitionEvent();this.$slide.one(transitionEnd,function(){if(callback!==undefined){window.clearTimeout(self.transitionSlideTimeout);callback.call(this);}});this.transitionSlideTimeout=window.setTimeout(function(){if(callback!==undefined){callback.call(this);}},TRANSITION_END_FALLING_TIMEOUT);}
this.$slide.css(this.getSlidePositionIn3d({x:transXOffset}));},positionSlideWithJquery:function(callback,options){var transXOffset=(this.position-this.number)*this.slideWidth,targetCss,animationOptions={duration:400};options=options||{animating:true};if(!options.animating){animationOptions.duration=0;}
if(this.position===0){animationOptions.complete=function(){if(callback!==undefined){callback.call(this);}};}
targetCss=this.getSlidePositionWithJquery({x:transXOffset});this.$slide.animate(targetCss,animationOptions);},relocate:function(newPosition){var positionValue={x:0,y:0},$slide=this.$slide,animationClass=this.options.animationClass;if($slide.hasClass(animationClass)){$slide.removeClass(animationClass);}
positionValue.x=(this.position-this.number)*this.slideWidth;positionValue.y=RELOCATE_OFFSET;$slide.css(this.getSlidePosition(positionValue));this.position=newPosition;positionValue.x=(this.position-this.number)*this.slideWidth;$slide.css(this.getSlidePosition(positionValue));positionValue.y=0;$slide.css(this.getSlidePosition(positionValue));$slide.trigger('relocateslide');},getTranslateValue:function(value){if(value.x===undefined){value.x=0;}
if(value.y===undefined){value.y=0;}
if(value.z===undefined){value.z=0;}
return'translate3d('+value.x+'px,'+value.y+'px,'+value.z+'px)';},offsetSlide:function(distance,options){var currentTranslate3dValue=(this.position-this.number)*this.slideWidth,newPosition=currentTranslate3dValue+distance;if(options&&options.animating){this.$slide.addClass(this.options.animationClass);}else{this.$slide.removeClass(this.options.animationClass);}
this.$slide.css(this.getSlidePosition({x:newPosition}));}};var SlidePositionManager=function($slides,options){var slideWidth=options.width,sliderItems=[];$slides.each(function(index,slide){sliderItems.push(new SliderItem($(slide),{position:index-1,number:index,width:slideWidth,animationClass:options.animationClass}));});this.$slides=$slides;this.sliderItems=sliderItems;this.options=$.extend({},defaultOptions,options);};SlidePositionManager.prototype={orderSlides:function(direction){var orders={'back':[0,-1,1],'forward':[0,1,-1]},sliderItems=this.sliderItems,orderedSliderItems=[],order=orders[direction];$.each(order,function(index,position){$.each(sliderItems,function(i,sliderItem){if(sliderItem.position===position){orderedSliderItems.push(sliderItem);}});});return orderedSliderItems;},moveForward:function(callback){var items=this.orderSlides('forward'),slideReadyCounter=2,self=this;$.each(items,function(index,sliderItem){sliderItem.moveToNext(function(){slideReadyCounter=slideReadyCounter-1;if(slideReadyCounter<0){clearTimeout(self.slidesdeadyTimeout);callback.call(this);this.$slide.trigger('slidesready');}},{animating:true});});this.slidesdeadyTimeout=setTimeout(_.bind(function(){callback.call(this);slideReadyCounter=slideReadyCounter+1;items[items.length-1].$slide.trigger('slidesready');this.$slides.removeClass(this.options.animationClass);},this),MOVE_END_ANIMATION_TIMEOUT);},moveBack:function(callback){var items=this.orderSlides('back'),slideReadyCounter=2,self=this;$.each(items,function(index,sliderItem){sliderItem.moveToPrevious(function(){slideReadyCounter=slideReadyCounter-1;if(slideReadyCounter<0){clearTimeout(self.slidesdeadyTimeout);callback.call(this);this.$slide.trigger('slidesready');}},{animating:true});});this.slidesdeadyTimeout=setTimeout(_.bind(function(){slideReadyCounter=slideReadyCounter+1;callback.call(this);items[items.length-1].$slide.trigger('slidesready');this.$slides.removeClass(this.options.animationClass);},this),MOVE_END_ANIMATION_TIMEOUT);},offsetSlideItems:function(distance,options){$.each(this.sliderIt);});},updatePosition:function(width,options){$.each(this.sliderItems,function(index,sliderItem){sliderItem.slideWidth=width;sliderItem.positionSlide(undefined,options);});}};module.exports={SlidePositionManager:SlidePositionManager,SliderItem:SliderItem};}),"overlay":(function(require,exports,module){var $=require('jQuery'),Slider=require('slider').MobileSlider,templates=require('templates'),gettext=require('gettext'),_=require('_');var config={sliderOverlaySelector:'.js-slider-overlay',sliderSelector:'.js-slider',sliderOverlayVerticalSelector:'.js-overlay-vertical',emulateScrollContainerSelector:'.js-emulate-scroll-on-overlay'};var OPEN_OVERLAY_CLASS='overlay-open';var sliderConfig={useGallery:false,updateUrl:false,translations:{'play_icon_text':gettext('Play')},getCurrentItemByAjaxLink:'',onReady:function(){},activateFullSlider:false,useSvg:false,icons:{close:{src:'',alt:''},prev:{src:'',alt:''},next:{src:'',alt:''}}};var SliderOverlay=function(options){var slider,self=this;this.config=config;this.options=$.extend({},sliderConfig,options);this.init();slider=new Slider(this.options);window.wgSliderInstance=slider;this.slider=slider;window.wgOverlay=this;window.wgSlider=slider;$(config.sliderSelector).on('sliderready',function(){if(!self.options.activateFullSlider){slider.reassignType({picture:['resetSpecialHelpers','title']});slider.$date.hide();slider.$share.hide();}
self.options.onReady.call(self);});this.pageData={};};SliderOverlay.prototype={init:function(){var config=this.config,$overlay;this.$html=$('html');this.$body=$('body');$overlay=this.render();this.$overlay=$overlay;this.$slider=$overlay.find(config.sliderSelector);this.$emulateScrollBlock=$(config.emulateScrollContainerSelector);this.bindHandlers();},render:function(){var $overlay=this.$body.find(config.sliderOverlaySelector),templateData=$.extend(true,{},this.options),$overlayVertical,overlayHtml;if($overlay.length===0){overlayHtml=templates.getTemplate('overlay')(templateData);this.$body.append(overlayHtml);$overlay=this.$body.find(config.sliderOverlaySelector);$overlayVertical=$overlay.find(config.sliderOverlayVerticalSelector);$overlayVertical.css('touch-action','none');}
return $overlay;},open:function(id,isNotActivate){this.bodyScrollTop=this.getPageScroll();this.$overlay.show();this.$slider.css('visibility','visible');this.$html.addClass(OPEN_OVERLAY_CLASS);if(this.$emulateScrollBlock.length){this.$emulateScrollBlock.css('margin-top',(-this.bodyScrollTop)+'px');}
if(!isNotActivate){this.slider.activate(id);}},addDataSet:function(data,dataSetName){var dataSetIds=_.pluck(data.list,'id'),dataSet;if(dataSetName===undefined){dataSetName=_.uniqueId('dataset_');}
dataSet={name:dataSetName,ids:dataSetIds};this.slider.dataManager.addData(data);this.slider.dataManager.addDataSet(dataSet);return dataSet;},getPageScroll:function(){var top=window.pageYOffset||document.documentElement.scrollTop;return top;},close:function(){this.slider.deactivate();},showOver);},hideOverlay:function(){this.$html.removeClass(OPEN_OVERLAY_CLASS);if(this.$emulateScrollBlock.length){this.$emulateScrollBlock.css('margin-top','');this.$body.scrollTop(this.bodyScrollTop);this.$html.scrollTop(this.bodyScrollTop);}
this.$overlay.hide();},openIm);},openSeparateItem:function(id){this.slider.dataManager.filterItems([id]);this.open(id);},addSeparateItem:function(item){this.slider.dataManager.addData({list:[item]});},bindHandlers:function(){var self=this;this.$slider.on({'sliderclose.wgslider':function(){self.hideOverlay();},'slidershow.wgslider':function(){self.showOverlay();}});}};module.exports=SliderOverlay;}),"slider":(function(require,exports,module){var MobileSlidePositionManager=require('mobile_slide_position_manager'),Gestures=require('gestures'),CSSUtils=require('css_utils'),DataManager=require('data_manager'),templatesModule=require('templates'),Slide=require('slide_type').Slide,Gallery=require('gallery'),browserDetection=require('browsers_detection'),Modernizr=require('Modernizr'),keyCodes=require('key_codes'),purl=require('purl'),_=require('_'),$=require('jQuery'),console=require('console');var EXPONENT=6,MULTIPLIER=Math.pow(10,EXPONENT),RESIZE_DEBOUNCE_INTERVAL=400,TAP_DEBOUNCE_INTERVAL=100,MIN_ZOOM=1,MAX_ZOOM=6,MOBILE_CONTENT_UPDATE=1600,DESKTOP_CONTENT_UPDATE=900,MOBILE_ACTIVATION_CONTROLS_TIMEOUT=1700,DESKTOP_ACTIVATION_CONTROLS_TIMEOUT=1150,SPINNER_TIMEOUT=500,DEACTIVATE_SLIDER_TIMEOUT=1000,IOS_LANDSCAPE_FIX_TIMEOUT=400,UNFROZING_PINCH_GESTURE_TIMEOUT=300,TOGGLE_HEADER_FOOTER_TIMEOUT=400,BLOCK_FOR_TOGGLE_HEADER_FOOTER_TIMEOUT=800,NAMESPACE='.wgslider';var defaultConfig={prevBtnClass:'js-overlay_control-prev',nextBtnClass:'js-overlay_control-next',mediaListSelector:'.js-media-list',mediaItemSelector:'.js-media-item',sliderSelector:'.js-slider',currentSlideSelector:'.js-current',clickMaxDistance:10,swipeMinDistance:100,measuringDivSelector:'#mes',animationClass:'wgslider-slide-animation',contentUpdateDelay:MOBILE_CONTENT_UPDATE,emptyImageSrc:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',slideChangeAnimationDuration:400,activationControlsTimeout:MOBILE_ACTIVATION_CONTROLS_TIMEOUT,returnToCurrentPositionDelay:50,sliderOverlaySelector:'.js-slider-overlay',closeControlSelector:'.js-slider-close',controlsClass:'wgslider-controls',headerSelector:'.js-slider-header',footerSelector:'.js-slider-footer',shareContainerSelector:'.js-share',deactivatingControlsClass:'wgslider-deactivating-controls',deactivatedControlsClass:'wgslider-deactivated-controls',titleSelector:'.js-slider-title',dateSelector:'.js-slider-date',descriptionSelector:'.js-slider-description',downloadPanelSelector:'.js-slider-download',downloadMobileButtonSelector:'.js-download-mobile-btn',downloadOtherSelectSelector:'.js-download-other-select',downloadDropdownSelector:'.js-download-dropdown',downloadDropdownListSelector:'.js-download-dropdown-list',downloadDropdownItemSelector:'.js-download-dropdown-item',shareSelector:'.js-share',gallerySelector:'.js-slider-gallery',noTransitionClass:'wgslider-no-transition'};var defaultOptions={translations:{types:{}},getCurrentItemByAjaxLink:'',spinnerSlideItem:{type:'spinner',title:'',created_date:''},closeOnOverlayClick:false,useGallery:true,updateUrl:true,firstLoadByUrl:false};var helpers={ti);},date:function(item){if(this.$dateContainer.datetime){this.$dateContainer.datetime({'style':'relative','HM':false,'timestamp':item.created_date});}
this.$date.text(this.$dateContainer.text()+' / '+this.getCategoryTitle(item));this.$date.show();},hideDate:function(){this.$date.hide();},downl);},gallery:function(item,currentSlide){if(currentSlide===undefined){currentSlide===this.currentSlide;}
if(this.gallery!==undefined){this.gallery.activate(item,currentSlide);}else{console.log('need to init gallery helper in correct way');}},wallpaper:function(){this.$downloadPanel.show();this.adoptScreenSizesToViewport();this.$downloadSelect.on('click.wgslider',_.bind(function(e){e.preventDefault();this.$downloadDropdown.toggle();this.$dropdownList.mCustomScrollbar('update');},this));},resetSpecialHelpers:function(){this.$downloadPanel.hide();if(this.options.useGallery){this.gallery.deactivate();}
if(this.hidedForLoader&&this.isFooterAndHeaderHidden){this.$sliderHeader.fadeIn();if(!this.isFooterPanelHidden){this.$share.fadeIn();}}},share:function(item){var $share=$(this.config.shareSelector),config;$share.replaceWith($('<div class="mediapopup_share js-share"></div>'));config=$.extend(true,{},window.yaShareWidgetConfig,{element:$share[0],image:this.currentSlide.getSlideImage(item),description:item.description,link:window.location.href,title:item.title+' '+document.title});config.hl=config.l10n;if(window.Ya&&window.Ya.share){window.yaShareInstance=new window.Ya.share(config);}
this.isFooterPanelHidden=false;if(this.isFooterAndHeaderHidden){this.$share.fadeIn();}else{this.$share.fadeOut();}},hideHeaderFooter:function(){if(!this.isFooterAndHeaderHidden){this.$sliderHeader.fadeOut();this.$share.fadeOut();}
this.hidedForLoader=true;},hideShare:function(){this.$share.addClass(this.config.noTransitionClass).hide(0,_.b);},this));this.isFooterPanelHidden=true;},showSpinner:function(){},updateUrl:function(item){var link=item.link;if(!this.ignoreHistoryUpdate&&this.options.updateUrl){if(window.history&&window.history.pushState!==undefined){window.history.pushState(item,item.title,link);}
this.ignoreHistoryUpdate=undefined;}}};var slideTypes={spinner:['resetSpecialHelpers','hideShare','updateUrl'],picture:['resetSpecialHelpers','title','date','updateUrl','share'],simple_picture:['resetSpecialHelpers','hideDate','hideShare','title'],video:['resetSpecialHelpers','title','date','updateUrl','share'],wallpaper:['resetSpecialHelpers','title','date','wallpaper','updateUrl','share'],gallery:['resetSpecialHelpers','title','date','gallery','updateUrl','share'],simple_gallery:['resetSpecialHelpers','hideDate','hideShare','title','gallery']};var WgMobile=function(options){var self=this;this.config=defaultConfig;this.options=$.extend(true,{},defaultOptions,options);this.sliderReady=false;this.activated=false;this.initDataManager(function(){self.init();});};WgMobile.prototype={init:function(){var $body=$('body');this.$body=$body;this.$window=$(window);this.$html=$('html');this.hammerOnBodyFromStart=false;this.$overlay=$body.find(this.config.sliderOverlaySelector);this.controls=[];CSSUtils.bindOrientaionChangeToResize(this.$window);this.adaptationToDevices();this.deferredItems=[];if(this.options.useGallery){this.initGallery();}
this.initHelpers(helpers);this.setTypes(slideTypes);this.initControls();this.initSlider();this.bindHandlers();this.initAcceleration();if(this.options.firstLoadByUrl){this.checkUrlForItem();}
this.sliderReady=true;this.$slider.trigger('sliderready');this.isFooterAndHeaderHidden=false;this.isFooterPanelHidden=false;},adaptationToDevices:function(){var isDesktop=!browserDetection.mobile;if(isDesktop){this.config.contentUpdateDelay=DESKTOP_CONTENT_UPDATE;this.config.activationControlsTimeout=DESKTOP_ACTIVATION_CONTROLS_TIMEOUT;}},initAcceleration:function(){var accelerationClass='wgslider-webkit-acceleration';if(this.doCss3dTrans()){this.accelerationElements=[this.$overlay,this.$nextControl,this.$prevControl,this.$sliderHeader,this.$sliderFooter,this.$slides];$.each(this.accelerationEleme);});}},checkUrlForItem:function(){var url,itemId,templateLink,getJSONLink,dataset;if(purl===undefined){console.error('purl library is not loaded.');return;}
url=purl();itemId=url.param('item');templateLink=this.options.getCurrentItemByAjaxLink;getJSONLink=templateLink.substring(0,templateLink.length-2)+itemId+'/';if(itemId!==undefined){this.$slider.trigger('slidershow');this.initSliderManager();if(this.dataManager.getItemById(itemId)===undefined){dataset=$('[data-dataset][data-id='+itemId+']');if(dataset.length){this.dataManager.applyDataSet(dataset.data('dataset'));this.activate(itemId);}else{this.spinnerTimeout=setTimeout(_.bind(function(){this.dataManager.addData({list:[$.extend({},this.options.spinnerSlideItem,{id:-1})]},true);this.activate(-1);},this),SPINNER_TIMEOUT);$.ajax({url:getJSONLink,success:_.bind(function(data){var item;if(data&&data.data){item=data.data;clearTimeout(this.spinnerTimeout);this.dataManager.addData({list:item.length?item:[item]},true);this.dataManager.filterItems(item.length?item.map(function(i){return i.id;}):[item.id]);this.activate(item.length?item[0].id:item.id);}else{setTimeout(_.bind(this.deactivate,this),DEACTIVATE_SLIDER_TIMEOUT);}},this),error:_.bind(function(){setTimeout(_.bind(this.deactivate,this),DEACTIVATE_SLIDER_TIMEOUT);},this),dataType:'json'});}}else{this.activate(itemId);}}},isWideDesktopV);},updateItem:function(item){$.each(this.slides,function(i,slide){if(parseInt(slide.item.id,10)===parseInt(item.id,10)){slide.activated=false;slide.activate(item,true);}});},initOverlay:function(){var config=this.config,$overlay;$overlay=this.$body.find(config.sliderOverlaySelector);this.$overlay=$overlay;this.$mediaList=$(config.mediaListSelector);this.$mediaItems=this.$mediaList.children();this.$mediaItems.on('click',function(e){var $item=$(this),id=$item.data('id'),categoryItems,filteredItems=[];e.preventDefault();e.stopPropagation();$overlay.show();categoryItems=$item.parent().children(':visible');categoryItems.e);});window.mobileSliderInstance.dataManager.filterItems(filteredItems);window.mobileSliderInstance.activate(id);});this.$sliderHeader=$overlay.find(config.headerSelector);this.$sliderFooter=$overlay.find(config.footerSelector);},activate:function(id,ignoreHistoryUpdate){if(this.$body.data('hammer')){this.hammerOnBodyFromStart=true;}
this.blockInsertion=true;if(id!==undefined){window.wgsliderCurrentItem=id;}
if(this.iOSInterval!==undefined){clearTimeout(this.iOSInterval);}
this.iOSInterval=undefined;if(navigator.userAgent.match(/(iPad|iPhone|iPod);.*CPU.*OS 7_\d/i)){this.iOSInterval=setInter);},IOS_LANDSCAPE_FIX_TIMEOUT);}
this.originalPageUrl=this.getPageUrl(purl());this.initSliderManager();this.toggleMobileHeaderFooter(true);this.loadCurrent(id,true,ignoreHistoryUpdate);this.$body.hammer({preventDefault:true}).on({'dr;}},'gesture':function(e){if(e&&e.gesture&&e.gesture.touches.length>1){e.gesture.preventDefault();}}});this.blockInsertion=false;if(this.gestures===undefined){this.initGestures();}
this.bindToBody();this.activated=true;},getPageScroll:function(){var top=window.pageYOffset||document.documentElement.scrollTop;return top;},initSliderManager:function(){this.currentOffset=0;this.sliderWrapWidth=this.currentSlide.getElement().outerWidth();if(this.sliderManager===undefined){this.sliderManager=new MobileSlidePositionManager.SlidePositionManager(this.$slides,{width:this.sliderWrapWidth,animationClass:this.config.animationClass});}else{this.sliderManager.updatePosition(this.sliderWrapWidth);}
this.sliderManager.offsetSlideItems(0,{animating:false});},deactivate:function(ignoreHistoryUpdate){var bodyHammerObj=this.$body.data('hammer')||this.$body.hammer().data('hammer');this.$slider.trigger('sliderdeactivating',{item:this.dataManager.getCurrentItem()});this.zoomOut();if(this.iOSInterval!==undefined){clearInterval(this.iOSInterval);}
this.currentSlide.deactivate();this.updatePageUrl({link:this.originalPageUrl},ignoreHistoryUpdate);if(bodyHammerObj){bodyHammerObj.off('touchstartdrag dragend gesture');}
bodyHammerObj.dispose();this.$body.removeData('hammer');this.$slider.trigger('sliderclose');this.$body.off('drag dragend gesture touchstart mousedown pointerdown keydown'+NAMESPACE);this.activated=false;},getPageUrl:function(purl){var path=purl.attr('path'),page=purl.param('page'),originalUrl;if(page!==undefined){originalUrl=path+'?page='+page;}else{originalUrl=path;}
return originalUrl;},initGestures:function(){var $target=this.$slider.parent();this.gestures=new Gestures($target,{$body:this.body});},initControls:function(){var config=this.config,$overlay=this.$overlay;this.$closeOverlay=$overlay.find(config.closeControlSelector);this.$nextControl=$overlay.find('.'+config.nextBtnClass);this.$prevControl=$overlay.find('.'+config.prevBtnClass);this.$share=$overlay.find('.mediapopup_panel__social');this.activatingTimeout=0;this.controls=[this.$title,this.$date,this.$description,this.$share];if(this.options.useGallery){this.controls.push(this.$gallery);}
$.each(this.controls,function(i,control){control.addClass(config.controlsClass);});},toggleMobileHeaderFooter:function(isShow){var noTransitionClass=this.config.noTransitionClass;if(!this.blockToggle){if(isShow!==undefined){this.isFooterAndHeaderHidden=isShow;}else{this.isFooterAndHeaderHidden=!this.isFooterAndHeaderHidden;}
if(this.isFooterAndHeaderHidden){this.$sliderHeader.fadeIn();this.$closeOverlay.fadeIn();if(!this.isFooterPanelHidden){this.$share.addClass(noTransitionClass).fadeIn(400,_.bind(function(){this.$share.removeClass(noTransitionClass);},this));}}else{this.$sliderHeader.fadeOut();this.$share.addClass(noTransitionClass).fadeOut(400,_.bind(function(){this.$share.removeClass(noTransitionClass);},this));this.$closeOverlay.fadeOut();}}},initGallery:function(){var $overlay=this.$overlay;this.$gallery=$overlay.find(this.config.gallerySelector);this.gallery=new Gallery(this.$gallery);this.$gallery.on('updateslide',_.bind(function(e,item){if(!this.isWideDesktopView()){this.toggleMobileHeaderFooter(false);}
this.currentSlide.activated=false;this.currentSlide.activate(item);},this));},initWallpaperHelperElements:function(){var config=this.config,$downloadPanel=this.$overlay.find(config.downloadPanelSelector);this.$downloadPanel=$downloadPanel;this.$downloadSelect=$downloadPanel.find(config.downloadOtherSelectSelector);this.$downloadDropdown=$downloadPanel.find(config.downloadDropdownSelector);this.$dropdownList=this.$downloadDropdown.find(config.downloadDropdownListSelector);},initHelpers:function(helpers){var $overlay=this.$overlay,config=this.config;this.$sliderHeader=$overlay.find(config.headerSelector);this.$sliderFooter=$overlay.find(config.footerSelector);this.$title=$overlay.find(config.titleSelector);this.$dateContainer=$('<span></span>').hide().appendTo('body');this.$date=$overlay.find(config.dateSelector);this.$description=$overlay.find(config.descriptionSelector);this.initWallpaperHelperElements();this.helpers=helpers;},setTys;},getTypes:function(){return this.types;},reassignT);},adoptScreenSizesToViewport:function(){},getCategoryTie;},deactivateControls:function(){var config=this.config;$.each(this.contr);});this.delayedActivateControls();},activateControls:function(){var self=this;$.each(this.contr);});},delayedActivateControls:function(){var self=this;clearTimeout(this.activatingTimeout);this.activatingTimeout=setTimeout(function(){self.activateControls();self.blockInsertion=false;},this.config.activationControlsTimeout);},moveSl);},getCurrentTransformOffset:function(){return this.currentOffset;},initSlider:function(){var $slide=this.getSlideElement(),config=this.config,$slider,$prevSlide,$nextSlide,$currentSlide;$slider=$(config.sliderSelector);this.blockInsertion=true;$slider.css('visibility','hidden');this.$slider=$slider;$currentSlide=$slide.clone().appendTo($slider);$prevSlide=$slide.clone().insertBefore($currentSlide);$nextSlide=$slide.clone().insertAfter($currentSlide);this.$slides=this.$slider.children();this.prevSlide=new Slide($prevSlide);this.nextSlide=new Slide($nextSlide);this.currentSlide=new Slide($currentSlide);this.slides=[this.prevSlide,this.currentSlide,this.nextSlide];this.pinchState={x:0,y:0,scale:1,initialized:false,activated:false};this.blockInsertion=false;},getSlideElement:function(){var config=this.config,$pictureSlide;$pictureSlide=$(templatesModule.getTemplate('picture_slide')({popup_src:config.emptyImageSrc}));return $pictureSlide;},loadCurrent:function(id,forceUpdate,ignoreHistoryUpdate){var currentItem;if(id===undefined){id=window.wgsliderCurrentItem;}
this.dataManager.setCurrentIndex({'id':id});currentItem=this.dataManager.getCurrentItem();this.currentSlide.setItem(currentItem,forceUpdate);this.ignoreHistoryUpdate=ignoreHistoryUpdate;this.applyHelpers(this.currentSlide,currentItem,true);this.$nextControl.show();this.$prevControl.show();this.$slides.css('visibility','visible');this.preloadPrev();this.preloadNext();},loadDeferredItems:function(){var items=this.deferredItems,dataManager=this.dataManager,self=this,img,neighborId,neighborIndex,curItemId,curItem,i,len,$slideEl,loadItem;loadItem=function(item){$slideEl=item.slide.getElement();img=$slideEl.find('img');if(item.direction==='next'){neighborId=$slideEl.next().data('itemId');neighborIndex=dataManager.searchIndexById(neighborId);curItemId=dataManager.getIdByIndex(neighborIndex-1);}else if(item.direction==='prev'){neighborId=$slideEl.prev().data('itemId');neighborIndex=dataManager.searchIndexById(neighborId);curItemId=dataManager.getIdByIndex(neighborIndex+1);}
curItem=dataManager.getItemById(curItemId);if(curItem!==undefined&&curItem.thumb_src!==undefined){item.slide.setItem(curItem);self.applyHelpers($slideEl,curItem);}};for(i=0,len=items.length;i<len;i++){loadItem(items[i]);}
this.deferredItems=[];},preloadByIndex:function(index){var slide,item;if(index===-1){slide=this.prevSlide;item=this.dataManager.getPrevItem();if(item===undefined){this.$prevControl.hide();this.prevSlide.getElement().css('visibility','hidden');}}else if(index===1){slide=this.nextSlide;item=this.dataManager.getNextItem();if(item===undefined){this.$nextControl.hide();this.nextSlide.getElement().css('visibility','hidden');}}
if(item!==undefined&&item.id==='loading'){item.direction=(index===1)?'prev':'next';item.slide=slide;this.deferredItems.push(item);}
slide.setItem(item);},preloadP);},preloadN);},initDataManager:function(readyCallback){var dataManager,self=this,data=window.sliderData||{list:[]};dataManager=new DataManager(data,{onReadyHandler:function(){if(typeof readyCallback==='function'){readyCallback.call(self);}}});dataManager.onRebuildIndexHandler=function(){self.loadDeferredItems();};this.dataManager=dataManager;},setD);},bindHandlers:function(){var self=this;this.$closeOverlay.hammer().on('tap click',function(e){self.deactivate();});CSSUtils.bindPreventClickAndPropagation(this.$closeOverlay);this.$nextControl.hammer({preventDefault:true}).on({'tap':function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);self.goToNextItemHandler();}});this.$prevControl.hammer().on({'t);}});CSSUtils.bindPreventClickAndPropagation(this.$prevControl);CSSUtils.bindPreventClickAndPropagation(this.$nextControl);this.$overlay.on({'customswipeleft.swipebox':function(){self.goToPrevItemHandler();},'customswiperight.swipebox':function(){self.goToNextItemHandler();},'customswipeincomplete.swipebox':function(){if(!self.isSingleSlide()){self.returnToCurrentPosition();self.delayedActivateControls();}},'customswipemovetrack.swipebox':function(e,distance){if(!self.blockInsertion&&!self.isSingleSlide()){self.moveSlide(distance);}}});this.$overlay.hammer({preventDefault:true}).on({'tap':_.bind(function(e){var $target;if(this.options.closeOnOverlayClick===true){$target=$(e.target);if($target.is('.js-mediapopup-slide')||$target.parents('.js-social-links, .js-mediapopup-slide').length===0){e.preventDefault();e.stopPropagation();if(e.gesture){e.gesture.preventDefault();e.gesture.stopDetect();}
setTimeout(_.bind(this.deactivate,this),300);}}},this),'doubletap':_.bind(function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);clearTimeout(self.toggleHFTimeout);self.blockToggle=true;clearTimeout(self.blockToggleTimout);if(!this.isWideDesktopView()){this.zoomIn();}},this),'pinch':_.bind(function(e){self.pinchState.pinching=true;this.scaleImage(e);clearTimeout(self.pinchTimeout);},this),'transformstart':function(){self.pinchState.pinching=true;self.blockToggle=true;clearTimeout(self.blockToggleTimout);clearTimeout(self.toggleHFTimeout);if(self.pinchState===undefined||!self.pinchState.initialized){self.initZoom(self.currentSlide.getElement().find('img'));}},'transformend':function(){if(self.pinchState.initialized){self.initMovePictureInZoom();self.setScale(self.pinchState.curScale,true);self.checkForDefaultScale(self.pinchState.scale);}
self.pinchTimeout=setTimee;},UNFROZING_PINCH_GESTURE_TIMEOUT);}});if(!this.isWideDesktopView()){this.$slides.hammer({behavior:{touchCallout:'default'}}).on('tap',function(){self.toggleHeaderFooterHandler();});}
this.$window.on({'resize':_.debounce(function(){if(self.activated){self.sliderWrapWidth=self.currentSlide.getElement().outerWidth();self.sliderManager.updatePosition(self.sliderWrapWidth,{animating:false});if(!self.isWideDesktopView()){self.$slides.hammer().off('tap');self.$slides.hammer().on('tap',_.debounce(function(){self.toggleHeaderFooterHandler();},TAP_DEBOUNCE_INTERVAL));}else{self.$slides.hammer().off('tap');self.toggleMobileHeaderFooter(true);}}},RESIZE_DEBOUNCE_INTERVAL),'popstate':function(e){var item=(e&&e.originalEvent)?e.originalEvent.state:undefined;if(!item){return;}
if(self.activated&&(self.prevSlide.item.id===item.id)){self.goToPrevItemHandler(true);}else if(self.activated&&(self.nextSlide.item.id===item.id)){self.goToNextItemHandler(true);}else if(self.activated&&(self.currentSlide.item.id===item.id)){return;}else if(self.activated){self.deactivate(true);}else if(!self.activated&&item.id){self.activate(item.id,true);}}});},bindToBody:function(){var self=this;this.$body.on('keydown'+NAMESPACE,function(e){switch(e.which){case keyCodes.ESCAPE:self.deactivate();break;case keyCodes.RIGHT:case keyCodes.DOWN:case keyCodes.SPACE:case keyCodes.PAGE_DOWN:self.goToNextItemHandler();break;case keyCodes.LEFT:case keyCodes.UP:case keyCodes.PAGE_UP:self.goToPrevItemHandler();break;}});},toggleHeaderFooterHandler:function(){var self=this;clearTimeout(self.toggleHFTimeout);if(!self.pinchState.pinching){self.toggleHFTimeout=setTimeout(function(){self.toggleMobileHeaderFooter();},TOGGLE_HEADER_FOOTER_TIMEOUT);}},scaleImage:function(e,isSave){var curScale,oldScale,resultScale;if(this.currentSlide.item.type==='picture'){curScale=e.gesture.scale;oldScale=this.pinchState.scale||1;resultScale=curScale*oldScale;this.pinchState.curScale=resultScale;this.setScale(resultScale,isSave);}},initZoom:function($img,scale){var self=this,defaultState={x:0,y:0,scale:1,initialized:false,activated:false};if($img===undefined){$img=this.currentSlide.getElement().find('img');}
defaultState.$img=$img;this.pinchState=$.extend({},defaultState,this.pinchState);this.pinchState.scale=scale||1;if(!this.pinchState.initialized&&this.currentSlide.item.type==='picture'){this.pinchState.initialized=true;this.gestures.deactivate();clearTimeout(self.toggleHFTimeout);this.toggleMobileHeaderFooter(false);self.blockToggle=true;clearTimeout(self.blockToggleTimout);self.blockToggleTimout=setTimeout(function(){self.blockToggle=false;},BLOCK_FOR_TOGGLE_HEADER_FOOTER_TIMEOUT);if(!this.pinchState.pinching){this.initMovePictureInZoom();}}
if(this.currentSlide.item.type!=='picture'){this.pinchState.$img=undefined;}
this.setScale(this.pinchState.scale);},initMovePictureInZoom:function(){var $img=this.pinchState.$img,self=this,setTransform;setTransform=function(x,y){var state=self.pinchState,css=CSSUtils.getMatrix3d({x:state.x+x,y:state.y+y,scale:state.scale});if(!self.pinchState.pinching){state.$img.css(css);}};if($img===undefined){$img=this.currentSlide.getElement().find('img');this.pinchState.$img=$img;}
clearTimeout(self.toggleHFTimeout);this.toggleMobileHeaderFooter(false);$img.hammer({behavior:{touchCallout:'default'}}).on({'dragstart':function(e){e.preventDefault();e.stopPropagation();if(e.gesture.touches.length>1){return undefined;}
if(e.gesture){e.gesture.preventDefault();}
if(!self.pinchState.activated){self.pinchState.activated=true;self.pinchState.$img.hammer().on('dr);});self.pinchState.$img.hammer().on('dragend',function(e){var state=self.pinchState;if(!self.pinchState.pinching){self.pinchState=$.extend(state,{x:state.x+e.gesture.deltaX,y:state.y+e.gesture.deltaY});}
if(self.pinchState!==undefined){self.pinchState.activated=false;if(self.pinchState.$img!==undefined&&self.pinchState.$img.length>0){self.pinchState.$img.hammer().off('drag dragend');}}});}},'doubletap':function(e){CSSUtils.preventDefaultAndPropogationOnHammer(e);self.zoomOut(self.pinchState.$img);}});},zoomIn:function(){var $img;clearTimeout(this.toggleHFTimeout);if(this.currentSlide.item.type==='picture'){$img=this.currentSlide.getElement().find('img');this.initZoom($img,2);}},zoomOut:function($img){if(this.pinchState===undefined){return undefined;}
if(this.pinchState.initialized){this.pinchState.x=0;this.pinchState.y=0;this.setScale(1);this.switchOffPinching($img);}},checkForDefaultScale:function(scale){if(scale===MIN_ZOOM){this.pinchState.x=0;this.pinchState.y=0;this.setScale(scale);this.switchOffPinching(this.pinchState.$img);}},switchOffPinching:function($img){var self=this;$img=$img||this.pinchState.$img;this.pinchState.initialized=false;this.pinchState.activated=false;this.pinchState.$img=undefined;clearTimeout(self.toggleHFTimeout);clearTimeout(self.blockToggleTimout);self.blockToggle=true;self.blockToggleTimout=setTimee;},BLOCK_FOR_TOGGLE_HEADER_FOOTER_TIMEOUT);$img.hammer().off('dragstart doubletap');this.gestures.activate();},setScale:function(scale,isSave){var css,defaultValue={scale:1,x:0,y:0},state=this.pinchState;if(isSave){scale=Math.max(MIN_ZOOM,Math.min(this.pinchState.curScale,MAX_ZOOM));this.pinchState.scale=scale;if(scale===MIN_ZOOM){state.x=0;state.y=0;}}
var value=$.extend({},defaultValue,{scale:scale,x:state.x,y:state.y});css=CSSUtils.getMatrix3d(value);state&&state.$img&&state.$img.css(css);},goToNextItemHandler:function(ignoreHistoryUpdate){this.zoomOut();if(!this.blockInsertion&&!this.isSingleSlide()){this.deactivateControls();this.nextItem(ignoreHistoryUpdate);}},goToPrevItemHandler:function(ignoreHistoryUpdate){this.zoomOut();if(!this.blockInsertion&&!this.isSingleSlide()){this.deactivateControls();this.prevItem(ignoreHistoryUpdate);}},isSingleSl);},nextItem:function(ignoreHistoryUpdate){var self=this,dataManager=this.dataManager,tempSlide,$prevControl=this.$prevControl,notLast=dataManager.getCurrentIndex()!==(dataManager.itemsIndex.length-1);if(!this.blockInsertion&&notLast){dataManager.next();this.blockInsertion=true;tempSlide=this.prevSlide;this.prevSlide=this.currentSlide;this.ignoreHistoryUpdate=ignoreHistoryUpdate;this.setCurrentSlide(this.nextSlide);this.nextSlide=tempSlide;if(!$prevControl.is(':visible')){$prevControl.show();if(this.nextSlide.getElement().css('visibility')==='hidden'){this.nextSlide.getElement().css('visibility','visible');}}
if(dataManager.getNextItem()===undefined){this.$nextControl.hide();this.nextSlide.getElement().css('visible','hidden');}
this.currentSlide.reset();this.prevSlide.deactivate();this.$slides.addClass(this.config.animationClass);this.sliderManager.moveForward(function(){self.preloadNext();self.blockInsertion=false;});}else{setTimeout(function(){self.returnToCurrentPosition();},this.config.returnToCurrentPositionDelay);}},updatePageUrl:function(item){var link=item.link;if(window.history&&window.history.pushState!==undefined){window.history.pushState(item,item.title,link);}},prevItem:function(ignoreHistoryUpdate){var self=this,dataManager=this.dataManager,$nextControl=this.$nextControl,tempSlide;if(!this.blockInsertion&&dataManager.getCurrentIndex()!==0){dataManager.prev();this.blockInsertion=true;tempSlide=this.nextSlide;this.nextSlide=this.currentSlide;this.ignoreHistoryUpdate=ignoreHistoryUpdate;this.setCurrentSlide(this.prevSlide);this.prevSlide=tempSlide;if(dataManager.getCurrentIndex()===0&&this.$prevControl.is(':visible')){this.$prevControl.hide();this.prevSlide.getElement().css('visibility','hidden');}
if(!$nextControl.is(':visible')){$nextControl.show();if(this.prevSlide.getElement().css('visibility')==='hidden'){this.prevSlide.getElement().css('visibility','visible');}}
this.currentSlide.reset();this.nextSlide.deactivate();this.$slides.addClass(this.config.animationClass);this.sliderManager.moveBe;});}else{setTime);},this.config.returnToCurrentPositionDelay);}},applyHelpers:function($slide,item,immediately){var type=item&&item.type,self=this,types=this.types,helpers=this.helpers;if(item===undefined){return;}
if(item.helpersOverride){type=item.helpersOverride;}
if(type!==undefined&&types[type.toLowerCase()]!==undefined){window.clearTimeout(this.contentUpdateDelay);this.contentUpdateDelay=window.setTimeout(function(){self.activateControls();$.each(types[type.toLowerCase);});},immediately?0:this.config.contentUpdateDelay);}},setCurrentSlide:function(slide){var curItem=this.dataManager.getCurrentItem();this.currentSlide=slide;this.applyHelpers(slide.getElement(),curItem);return slide;},getNextSlide:function(){return this.nextSlide.getElement();},getPrevSl);},returnToCurrentPosition:function(){this.$slides.addClass(this.config.animationClass);this.sliderManager.offsetSlideItems(0,{animating:true});},doCss3dTr);},get);}};var init=function(options){if(window.initMobileSlider){window.mobileSliderInstance=new WgMobile(options);}};module.exports={init:init,MobileSlider:WgMobile};}),"slide_type":(function(require,exports,module){var $=require('jQuery'),templates=require('templates'),browserDetection=require('browsers_detection'),CSSUtils=require('css_utils'),Spinner=require('spinner'),_=require('_');var EMPTY_IMAGE_BASE64='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';var config={emptyImageSrc:EMPTY_IMAGE_BASE64,gallerySlideClass:'mediapopup_slide__gallery',videoSlideClass:'mediapopup_slide__video',videoPlaceholderSelector:'.js-video-placeholder',playVideoButtonSelector:'.js-video-play',videoThumbnailSelector:'.js-video-thumbnail',pictureImageSelector:'.js-picture-video',fadeVideoThumbnailDuration:400,spinnerOptions:{bigDesktop:{lines:11,length:10,width:6,radius:14,corners:1,rotate:34,direction:1,color:'#FFF',speed:1.2,trail:54,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'50%',left:'50%'},smallDesktops:{lines:11,length:7,width:4,radius:11,corners:1,rotate:34,direction:1,color:'#FFF',speed:1.2,trail:54,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'50%',left:'50%'},mobile:{lines:11,length:6,width:4,radius:9,corners:1,rotate:34,direction:1,color:'#FFF',speed:1.2,trail:54,shadow:false,hwaccel:true,className:'spinner',zIndex:2e9,top:'50%',left:'50%'}}};var emptyItems={'video':{id:'loading',type:'video',created_date:'',popup_src:EMPTY_IMAGE_BASE64,title:'',link:''},'picture':{id:'loading',type:'picture',created_date:'',popup_src:EMPTY_IMAGE_BASE64,title:'',link:''}};var typeHelpers={picture:function($slide,item){var $img=$slide.find('img');if(item===undefined){return $slide;}
$slide.data('url',item.url);window.setTimeout(function(){$img.prop('src',item.popup_src);},0);$slide.data('itemId',item.id);return $slide;},videos:function($slide,item){var $img=$slide.find('img'),$description=$slide.find(this.config.videoDescriptionSelector);if(item===undefined){return $slide;}
$img.data('url',item.url);window.setTime);},0);$slide.data('itemId',item.id);$description.text(item.title);return $slide;}};var Slide=function($element,item){this.$element=$element;if(item===undefined){this.item=emptyItems.picture;}else{this.item=item;}
this.init();};Slide.prototype={init:function(){this.config=config;this.$videoSlide=$(templates.getTemplate('video_slide')({popup_src:config.emptyImageSrc}));this.$imageSlide=$(templates.getTemplate('picture_slide')({popup_src:config.emptyImageSrc}));this.isDesktop=true;this.activated=false;},deactivate:function(){var isGalleryWithVideoMode=(this.$element.find('iframe').length!==0),isItemWithTypeVideo=(this.item.type==='video');this.activated=false;this.$element.trigger('slidedeactivated',this.$element);if(isGalleryWithVideoMode||isItemWithTypeVideo){this.resetVideo();}},resetVideo:function(){var $slide=this.$element,item=this.item,config=this.config,$iframe,$videoPlaceholder,$playVideo,$videoThumbnail;$videoPlaceholder=$slide.find(config.videoPlaceholderSelector);$playVideo=$slide.find(config.playVideoButtonSelector);$videoThumbnail=$slide.find(config.videoThumbnailSelector);$videoThumbnail.show();$playVideo.show();$videoPlaceholder.empty();$iframe=this.resetVideoElement($videoPlaceholder,item.videoId);this.bindOpenEmbeddedVideoHandler($slide,$iframe,item.videoId);},resetVideoElement:function($videoPlaceholder,videoId){var $iframe,$a;if(this.isDesktop){$iframe=this.$videoSlide.find('iframe').clone();$videoPlaceholder.empty();this.updateIframeWithVideoId($iframe,videoId);return $iframe;}else{$a=this.$videoSlide.find('a');$videoPlaceholder.empty();this.updateLinkWithVideoId($a,videoId);return undefined;}},getElemt;},setItem:function(item,forceUpdate){if(item&&(item.id!==this.item.id)){this.activated=false;this.item=item;this.activate(item,forceUpdate);}else if(!this.activated){this.activate(item,forceUpdate);}},reset:function(){var $slide=this.$element,config=this.config,$image=$slide.find(config.pictureImageSelector);this.deactivate();if($image.length){$image.attr('src',this.config.emptyImageSrc);}},updateIframeWithVide);},updateLinkWithVideoId:function($a,videoId){$a.attr('href','https://youtube.com/watch?v='+videoId+'&autoplay=1');$a.hammer().on('touch t);});},getSlideImage:function(item){if(item.type==='picture'){return item.popup_src;}else if(item.type==='video'){return this.getVideoThumbnailImage(item.videoId);}else if(item.type==='gallery'){return this.getSlideImage(item.list[0]);}},updateThumbnail:function($videoThumbnail,videoId){$videoThumbnail.attr('src',this.config.emptyImageSrc);$videoThumbnail.attr('alt',this.item.title);setTimeout(_.bind(function(){$videoThumbnail.attr('src',this.getVideoThumbnailImage(videoId));},this),0);},getVideoThumbnailImage:function(videoId){if(CSSUtils.isMobileView()){return'http://img.youtube.com/vi/'+videoId+'/0.jpg';}else{return'http://img.youtube.com/vi/'+videoId+'/maxresdefault.jpg';}},activate:function(item,forceUpdate){var $slide=this.$element,slideType=$slide.data('type')||'picture',$iframe,$newSlide,$a,imgSrc;if(item===undefined){return $slide;}
if(this.activated){return $slide;}
this.$element.trigger('deactivateslides');if(item.type==='video'||item.type==='gallery-video'){if(forceUpdate||(item.type!==slideType)){$slide.empty();if(!$slide.hasClass(config.videoSlideClass)){$slide.addClass(config.videoSlideClass);}
if(item.type!=='gallery-video'&&$slide.hasClass(config.gallerySlideClass)){$slide.removeClass(config.gallerySlideClass);}
$newSlide=this.$videoSlide.clone();this.updateThumbnail($newSlide.find(config.videoThumbnailSelector),item.videoId);if(this.isDesktop){$iframe=$slide.find('iframe').detach();}else{$a=$newSlide.find('a');this.updateLinkWithVideoId($a,item.videoId);}
this.appendNewSlideContent($slide,$newSlide);$slide.data('type','video');}else{if(this.isDesktop){$iframe=this.resetVideoElement($slide.find('.js-video-placeholder'),item.videoId);}else{$a=$slide.find('a');}
this.updateThumbnail($slide.find(config.videoThumbnailSelector),item.videoId);}
if(this.isDesktop){this.updateIframeWithVideoId($iframe,item.videoId);this.bindOpenEmbeddedVideoHandler($slide,$iframe,item.videoId);}else{this.updateLinkWithVideoId($a,item.videoId);}}else if(item.type==='gallery'){if(!$slide.hasClass(config.gallerySlideClass)){$slide.addClass(config.gallerySlideClass);}
this.convertTypesForMinislider(item);this.activate(item.list[item.listCurrentIndex||0]);}else if(item.type==='spinner'){this.$element.empty();this.$element.append('<div class="slider-spinner">');this.spinner=new Spinner(this.getSpinnerOptions()).spin(this.$element.find('.slider-spinner')[0]);$slide.data('type','spinner');}else if(item.type==='picture'||item.type==='wallpaper'||item.type==='gallery-picture'){$slide.removeClass(config.videoSlideClass);if(forceUpdate||item.type!==slideType){if(item.type!=='gallery-picture'&&$slide.hasClass(config.gallerySlideClass)){$slide.removeClass(config.gallerySlideClass);}
$newSlide=this.$imageSlide.clone();$newSlide.find('img').attr('src',config.emptyImageSrc).attr('alt',item.title);$slide.empty();this.appendNewSlideContent($slide,$newSlide);$slide.data('type',item.type);}else{$slide.find('img').attr('src',config.emptyImageSrc).attr('alt',item.title);}
imgSrc=this.getAdoptedImage(item);window.setTime);},0);}
this.activated=true;this.$element.trigger('slideactivated',this.$element);if(window.wgSliderConfig.autoplayVideos&&forceUpdate){var playButtons=this.$element.find(config.playVideoButtonSelector);playButtons.trigger('tap');}
return $slide;},getSpinnerOptions:function(){var spinnerOpts=this.config.spinnerOptions;if(browserDetection.mobile){return spinnerOpts.mobile;}else if(CSSUtils.isDesktopUnder1100()){return spinnerOpts.smallDesktops;}else{return spinnerOpts.bigDesktop;}},convertTypesForMinislider:function(item){var itemsList=item.list,newList=[];if(item===undefined){return;}
if(!item.converted){$.each(itemsList,function(index,minisliderItem){if(minisliderItem===undefined){return;}
if(minisliderItem.type==='picture'){minisliderItem.type='gallery-picture';}else if(minisliderItem.type==='video'){minisliderItem.type='gallery-video';}
newList.push(minisliderItem);});item.list=newList;item.converted=true;}
return item.list;},getAdoptedImage:function(item){var resultImage;if(CSSUtils.isMobileView()){resultImage=item.small_popup_src;}else if(CSSUtils.isGeneralTabletView()){resultImage=item.med_popup_src;}else if(CSSUtils.isSmallDesktopView()&&CSSUtils.isTabletRetina){resultImage=item.med_popup_src;}else{resultImage=item.popup_src;}
return decodeURIComponent(resultImage);},bindOpenEmbeddedVideoHandler:function($slide,$iframe,videoId){var $videoPlaceholder=$slide.find(config.videoPlaceholderSelector),$playVideo=$slide.find(config.playVideoButtonSelector),$videoThumbnail=$slide.find(config.videoThumbnailSelector);$playVideo.hammer({preventDefault:true}).off('touch tap').on('touch tap',_.bind(function(e){e.preventDefault();e.stopPropagation();$playVideo.hide();$videoThumbnail.fadeOut(config.fadeVideoThumbnailDuration,_.bind(function(){$videoPlaceholder.show().append($iframe);this.updateIframeWithVideoId($videoPlaceholder.find('iframe'),videoId);},this));},this));$playVideo.off('click');CSSUtils.bindPreventClickAndPropagation($playVideo);},appendNewSlideContent:function($slide,$newSlide){var slideEl=$slide[0],$children=$newSlide.children(),docFragment=document.createDocumentFragment();$children.e);});slideEl.appendChild(docFragment);}};module.exports={Slide:Slide,typeHelpers:typeHelpers};}),"templates":(function(require,exports,module){var $=require('jQuery'),_=require('_'),compiledTemplates=require('compiled_templates'),console=require('console');var templates={};function isTemplatesFound(){var prop,hasOwn=Object.prototype.hasOwnProperty;for(prop in templates){if(hasOwn.call(templates,prop)){return true;}}
return false;}
function initTemplatesInDom(){$('template').each(function(i,el){var template=el.innerHTML,id=el.getAttribute('id');templates[id]=_.template(template);});}
function initCompiledTemplates(){_.map(_.keys(compiledTemplates),function(compiledTemplateUrl){var compiledTemplate=compiledTemplates[compiledTemplateUrl],idRegExp=/templates\/(.*)\.html/g,id=idRegExp.exec(compiledTemplateUrl)[1];if(id!==undefined||id!==null){templates[id]=compiledTemplate;}else{console.error('error finding id for template ',compiledTemplateUrl);}});}
function getTemplates(){if(!isTemplatesFound()){if(compiledTemplates===undefined){initTemplatesInDom();}else{initCompiledTemplates();}}
return templates;}
function getTemplate(id){if(!isTemplatesFound()){getTemplates();}
return templates[id];}
module.exports={'getTemplates':getTemplates,'getTemplate':getTemplate};}),"compiled_templates":(function(require){this["JST"]=this["JST"]||{};this["JST"]["src/templates/overlay.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape,__j=Array.prototype.j')}
with(obj){__p+='<div class="overlay js-slider-overlay" style="display: none;" id>\n    <div class="overlay_wrapper">\n        <div class="overlay_horizontal">\n            <div class="overlay_vertical js-overlay-vertical">\n                <div class="mediapopup">\n                    <ul class="mediapopup_slider js-slider">\n\n                    </ul>\n                    <div class="mediapopup_header js-slider-header">\n                        <div class="mediapopup_panel">\n                            <span class="mediapopup_heading js-slider-title"></span>\n                            <span class="mediapopup_date js-slider-date"></span>\n                        </br><span class="mediapopup_description js-slider-description"></span>\n </div>\n                    </div>\n                    <div class="mediapopup_footer js-slider-footer">\n                        <div class="minislider js-slider-gallery" style="display: none;">\n                            <ul class="minislider_list js-gallery-list" style="position: relative;">\n\n                            </ul>\n                            <a href="" class="minislider_control js-gallery-control-prev">';if(useSvg){;__p+='<img class="overlay_arrow js-svg-icon" data-src="'+
((__t=(icons.prev.src))==null?'':__t)+'" alt="'+
((__t=(icons.prev.alt))==null?'':__t)+'">';}else{;__p+='Prev';};__p+='</a>\n                            <a href="" class="minislider_control minislider_control__right js-gallery-control-next">';if(useSvg){;__p+='<img class="overlay_arrow js-svg-icon" data-src="'+
((__t=(icons.next.src))==null?'':__t)+'" alt="'+
((__t=(icons.next.alt))==null?'':__t)+'">';}else{;__p+='Next';};__p+='</a>\n                        </div>\n                        <div class="mediapopup_panel mediapopup_panel__social ">\n                            <div class="media-download js-slider-download" style="display: none;">\n                                <div class="media-download_btn js-download-mobile-btn" style="display: none;">\n                                    <button class="form-button">Download<span class="form-button_txt"> wallpaper</span></button>\n                                </div>\n                                <ul class="media-download_list">\n                                    <li class="media-download_item media-download_item__txt">\n                                        <span class="media-download_txt">Download</span>\n                                        <span class="media-download_info">open in new window</span>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">1024×768</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">1280×1024</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">1366×768</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">1920×1080</a>\n                                    </li>\n                                    <li class="media-download_item js-download-size">\n                                        <a href="" class="media-download_link">Мобильное устройство</a>\n                                    </li>\n                                    <li class="media-download_item media-download_item__dropdown js-download-other-select">\n                                        <a href="" class="link-fake">Другие разрешения</a>\n                                        <div class="dropdown js-download-dropdown" style="display: none; left: 2px;">\n                                            <ul class="link-list js-download-dropdown-list">\n                                                <li class="link-list_item js-download-dropdown-item">\n                                                    <a href=""></a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                            <div class="mediapopup_share js-share">\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <a href="" class="overlay_control js-overlay_control-prev">';if(useSvg){;__p+='<img class="overlay_arrow js-svg-icon" data-src="'+
((__t=(icons.prev.src))==null?'':__t)+'" alt="'+
((__t=(icons.prev.alt))==null?'':__t)+'">';}else{;__p+='Prev';};__p+='</a>\n        <a href="" class="overlay_control overlay_control__right js-overlay_control-next">';if(useSvg){;__p+='<img class="overlay_arrow js-svg-icon" data-src="'+
((__t=(icons.next.src))==null?'':__t)+'" alt="'+
((__t=(icons.next.alt))==null?'':__t)+'">';}else{;__p+='Next';};__p+='</a>\n    </div>\n    <a href="" class="mediapopup-close js-slider-close">\n        <span class="mediapopup-close_ico">';if(useSvg){;__p+='<img class="svg-icon js-svg-icon" data-src="'+
((__t=(icons.close.src))==null?'':__t)+'" alt="'+
((__t=(icons.close.alt))==null?'':__t)+'">';}else{;__p+='Close';};__p+='</span>\n    </a>\n</div>\n';}
return __p};this["JST"]["src/templates/picture_minislide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<li class="minislider_item">\n    <img class="minislider_img" draggable="false" src="" alt="">\n</li>';}
return __p};this["JST"]["src/templates/picture_slide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<li class="mediapopup_slide js-mediapopup-slide" data-type="picture" style="touch-action: none">\n    <img class="mediapopup_item mediapopup_item__img js-picture-image"\n         src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" draggable="false">\n</li>\n';}
return __p};this["JST"]["src/templates/video_minislide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<li class="minislider_item">\n    <img class="minislider_img" draggable="false" src="" alt="">\n    <span class="play-ico">Play</span>\n</li>';}
return __p};this["JST"]["src/templates/video_slide.html"]=function(obj){obj||(obj={});var __t,__p='',__e=_.escape;with(obj){__p+='<li class="mediapopup_slide js-mediapopup-slide" data-type="video" style="touch-action: none">\n    <div class="mediapopup_item mediapopup_item__video js-video-placeholder" style="display: none;">\n        <iframe id="ytplayer" type="text/html" width="100%" height="100%" src="" frameborder="0" frameborder="0" allowfullscreen ></iframe>\n    </div>\n    <img class="mediapopup_item mediapopup_item__trumbnail js-video-thumbnail" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" draggable="false" alt="" >\n    <a class="play-ico play-ico__popup js-video-play">Play</a>\n</li>\n';}
return __p};return JST;}),"purl":(function(require,exports,module){;(function(factory){if(typeof define==='function'&&define.amd){define(factory);}else if(typeof exports=='object'){module.exports=factory();}else{window.purl=factory();}})(function(){var tag2attr={a:'href',img:'src',form:'action',base:'href',script:'src',iframe:'src',link:'href'},key=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','fragment'],aliases={'anchor':'fragment'},parser={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?i]=parent[key][i];parent[key]=t;return t;}
function parse(parts,parent,key,val){var part=parts.shift();if(!part){if(Array.isArray(parent[key])){parent[key].push(val);}else if('object'==typeof parent[key]){parent[key]=val;}else if('undefined'==typeof parent[key]){parent[key]=val;}else{parent[key]=[parent[key],val];}}else{var obj=parent[key]=parent[key]||[];if(']'==part){if(Array.isArray(obj)){if(''!==val)obj.push(val);}else if('object'==typeof obj){obj[keys(obj).length]=val;}else{obj=parent[key]=[parent[key],val];}}else if(~part.indexOf(']')){part=part.substr(0,part.length-1);if(!isint.test(part)&&Array.isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val);}else{if(!isint.test(part)&&Array.isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val);}}}
function merge(parent,key,val){if(~key.indexOf(']')){var parts=key.split('[');parse(parts,parent,'base',val);}else{if(!isint.test(key)&&Array.isArray(parent.base)){var t={};for(var k in parent.base)t[k]=parent.base[k];parent.base=t;}
if(key!==''){surn merge(ret,key,val);},{base:{}}).base;}
function set(obj,key,val){var v=obj[key];if(typeof v==='undefined'){obj[key]=val;}else if(Array.isArray1;return thieturn purl(url,strictMode);};$.url=purl;}};purl.jQuery(window.jQuery);return purl;});}),"sfine(factory)
else root.Spinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Mozt.appendChid')r=='string'?color:color[idx%color.length]}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner'ts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width
css(el,{left:o.left,top:o.top})
if(target){target.insertBefore(el,target.firstChild||null)}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-out=self.el&&setTimeouteChildi),'0 0 leld;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));})},{},{});;(function($){var SHARE_WIDGET_SELECTOR='.js-media-social-links';function shareHelper(item){var $shareContainer=this.$share.find(this.config.shareSelector),origin=window.location.protocol+'//'+window.location.host,shareLink=origin+item.category_link+item.link,noTransitionClass=this.config.noTransitionClass,$shareWidget;if($shareContainer.children().length===0){$shareWidget=$(SHARE_WIDGET_SELECTOR);$shareWidget.show();$shareContainer.append($shareWidget);}
this.$share.find(SHARE_WIDGET_SELECTOR).socialLikes({url:shareLink,title:item.title,counters:true});this.isFooterPanelHidden=false;if(this.isFooterAndHeaderHidden){this.$share.addis.$share.removeClass(noTransitionClass);},this));}}
function itemsNumberHelper(item){var slider=this;function updatePosition(item){var text='',itemsNumber,currentNumber;currentNumber=(item.listCurrentIndex||0)+1;itemsNumber=item.list.length;text=currentNumber+' / '+itemsNumber+' | '+slider.getCategoryTitle(item);slider.$date.text(text);}
if(item.list&&(item.list.length>0)){updatePosition(item);this.$gallery.off('updateslide.xboxhelper')xhelper',function(){updatePosition(item);});}else{this.$date.text(this.getCategoryTitle(item));}
if(item.description)
this.$description.text(item.description);this.$date.show();}
window.wgSliderConfig={useGallery:true,firstLoadByUrl:false,activateFullSlider:true,closeOnOverlayClick:true,autoplayVideos:true,onReady:function(){this.slider.helpers.share=shareHelper;this.slider.helpers.date=itemsNumberHelper;},useSvg:true,icons:{close:{src:STATIC_URL+'portal/img/svg-icons/gallery/close.svg',alt:'close'},prev:{src:STATIC_URL+'portal/img/svg-icons/gallery/arrow-left.svg',alt:'prev'},next:{src:STATIC_URL+'portal/img/svg-icons/gallery/arrow-right.svg',alt:'next'}cument.querySelectorAll('.js-svg-icon'));});$.wgSlider(window.wgSliderConfig);});})(jQuery);;(function(glob){var version="0.5.0",has="hasOwnProperty",separator=/[\.\/]/,comaseparator=/\s*,ion(){},numsort=function(a,b){return a-b;},current_event,stop,events={n:{}},firstDefined=function(){for(var i=0,ii=this.length;i<ii;i++){if(typeof this[i]!="undefined"){return this[i];}}},lastDefined=function(){var i=this.length;while(--i){if(typeof this[i]!="undefined"){return this[i];}}},objtos=Object.prototype.toString,Str=String,isArray=Array.isArray||function(ar){return ar instanceof Array||objtos.call(ar)=="[object Array]";};eve=function(name,scope){var e=events,oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,f=false,l,indexed=[],queue={},out=[],ce=current_event,errors=[];out.firstDefined=firstDefined;out.lastDefined=lastDefined;current_event=name;stop=0;for(var i=0,ii=listeners.length;i<ii;i++)if("zIndex"in listeners[i]){indexed.push(listeners[i].zIndex);if(listeners[i].zIndex<0){queue[listeners[i].zIndex]=listeners[i];}}
indexed.sort(numsort);while(indexed[z]<0){l=queue[indexed[z++]];out.push(l.apply(scope,args));if(stop){stop=oldstop;return out;}}
for(i=0;i<ii;i++){l=listeners[i];if("zIndex"in l){if(l.zIndex==indexed[z]){out.push(l.apply(scope,args));if(stop){break;}
do{z++;l=queue[indexed[z]];l&&out.push(l.apply(scope,args));if(stop){break;}}while(l)}else{queue[l.zIndex]=l;}}else{out.push(l.apply(scope,args));if(stop){break;}}}
stop=oldstop;current_event=ce;return out;};eve._events=events;eve.listeners=function(name){var names=isArray(name)?name:name.split(separator),e=events,item,items,k,i,ii,j,jj,nes,es=[e],out=[];for(i=0,ii=names.length;i<ii;i++){nes=[];for(j=0,jj=es.length;j<jj;j++){e=es[j].n;items=[e[names[i]],e[wildcard]];k=2;while(k--){item=items[k];if(item){nes.push(item);out=out.concat(item.f||[]);}}}
es=nes;}
return out;};eve.separator=function(sep){if(sep){sep=Str(sep).replace(/(?=[\.\^\]\[\-])/g,"\\");sep="["+sep+"]";separator=new RegExp(sep);}else{separator=/[\.\/]/;}};eve.on=functi(typeof f!="function"){return function(){};}
var names=isArray(name)?(isArray(name[0])?name:[name]):Str(name).split(comaseparator);for(var i=0,ii=names.length;i<ii;i++){(function(name){var names=isArray(name)?name:Str(name).split(separator),e=events,exist;for(var i=0,ii=names.length;i<ii;i++){e=e.n;e=e.hasOwnProperty(names[i])&&e[names[i]]||(e[names[i]]={n:{}});}
e.f=e.f||[];for(i=0,ii=e.f.length;i<ii;i++)if(e.f[i]==f){exist=true;break;}
!exist&&e.f.push(f);}(names[i]));}
return function(zIndex){if(+zIs).concatents,0)));};};eve.stop=function(){stop=1;};eve.nt=function(subname){var cur=isArray(current_event)?current_event.join("."):current_event;if(subname){return new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.ent_event:current_event.split(separator);};eve.off=eve.unbind=function(name,f){if(!name){eve._events=events={n:{}};return;}
var names=isArray(name)?(isArray(name[0])?name:[name]):Str(name).split(comaseparator);if(names.length>1){for(var i=0,ii=names.length;i<ii;i++){eve.off(names[i],f);}
return;}
names=isArray(name)?name:Str(name).split(separator);var e,key,splice,i,ii,j,jj,cur=[events],inodes=[];for(i=0,ii=names.length;i<ii;i++){for(j=0;j<cur.length;j+=splice.length-2){splice=[j,1];e=cur[j].n;if(names[i]!=wildcard){if(e[names[i]]){splice.push(e[names[i]]);inodes.unshift({n:e,name:names[i]});}}else{for(key in e)if(e[has](key)){splice.push(e[key]);inodes.unshift({n:e,name:key});}}
cur.splice.apply(cur,splice);}}
for(i=0,ii=cur.length;i<ii;i++){e=cur[i];while(e.n){if(f){if(e.f){for(j=0,jj=e.f.length;j<jj;j++)if(e.f[j]==f){e.f.splice(j,1);break;}
!e.f.length&&delete e.f;}
for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;for(j=0,jj=funcs.length;j<jj;j++)if(funcs[j]==f){funcs.splice(j,1);break;}
!funcs.length&&delete e.n[key].f;}}else{delete e.f;for(key in e.n)if(e.n[has](key)&&e.n[key].f){delete e.n[key].f;}}
e=e.n;}}
prune:for(i=0,ii=inodes.length;i<ii;i++){e=inodes[i];for(key in e.n[e.name].f){continue prune;}
for(key in e.n[e.name].n){continue prune;}
delete e.n[e.name];}};eve.once=function(name,f){var f2=function(){eve.off(name,f2);return f.apply(this,arguments);};return eve.on(nn(){return"You are running Eve "+version;};(typeof module!="undefined"&&module.exports)?(module.exports=eve):(typeof defined?(define("eve",[],function(){return eve;})):(glob.eve=eve));})(this);(function(glob,factory){if(typeof defi],function(eve){return factory(glob,eve);});}else if(typeof exports!="undefined"){var eve=require("eve");module.exports=factory(glob,eve);}else{factory(glob,glob.eve);}}(window||this,function(window,eve){var mina=(function(eve){var animations={},requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16,new Date().getTime());return true;},requestID,isArray=Array.isArray||function(a){return a instanceof Array||Object.prototype.toString.call(a)=="[object Array]";},idgen=){return idprefix+(idgen++).toString(36);},diff=function(a,b,A,B){if(isArray(a)){res=[];for(var i=0,ii=a.length;i<ii;i++){res[i]=diff(a[i],b,A[i],B);return function(bmer=Date.now||function(){return+new Date;},sta=function(val){var a=this;if(val==null){return a.s;}
var ds=a.s-val;a.b+=a.dur*ds;a.B+=a.dur*ds;a.s=val;},speed=function(val){var a=this;if(val==null){return a.spd;}
a.spd=val;},duration=function(val){var a=this;if(val==null){return a.dur;}
a.s=a.s*val/a.dur;a.dur=val;},stopit=function(){var a=this;delete animations[a.id];a.update();eve("mina.stop."+a.id,a);},pause=function(){var a=this;if(a.pdif){return;}
delete animations[a.id];a.update();a.pdif=a.get()-a.b;},resume=function(){var a=this;if(!a.pdif){return;}
a.b=a.get()-a.pdif;delete a.pdif;animations[a.id]=a;frame();},update=function(){var a=this,res;if(isArray(a.start)){res=[];for(var j=0,jj=a.start.length;j<jj;j++){res[j]=+a.start[j]+
(a.end[j]-a.start[j])*a.easing(a.s);}}else{res=+a.start+(a.end-a.start)*a.easing(a.s);}
a.set(res);},frame=function(timeStamp){if(!timeStamp){if(!requestID){requestID=requestAnimFrame(frame);}
return;}
var len=0;for(var i in animations)if(animations.hasOwnProperty(i)){var a=animations[i],b=a.get(),res;len++;a.s=(b-a.b)/(a.dur/a.spd);iffunction(){eve("mina.finish."+a.id,a);});}(a));}
a.update();}
requestID=len?requestAnimFrame(frame):false;},mina=function(a,A,b,B,get,set,easing){var anim={id:ID(),start:a,end:A,b:b,s:0,dur:B-b,spd:1,get:get,set:set,easing:easing||mina.linear,status:sta,speed:speed,duration:duration,stop:stopit,pause:pause,resume:resume,update:update};animations[anim.id]=anim;var len=0,i;for(i in animations)if(animations.hasOwnProperty(i)){len++;if(len==2){break;}}
len==1&&frame();function(id){return animations[id]||null;};mina.linear=function(n){return n;};mina.easeout=functiasein=function(n){return Math.pow(n,.48);};mina.easeinout=function(n){if(n==1){return 1;}
if(n==0){return 0;}
var q=.48-n/1.04,Q=Math.sqrt(.1734+q*q),x=Q-q,X=Math.pow(Math.abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=Math.pow(Math.abs(y),1/3)*(y<0?-1:1),t=X+Y+.5;return(1-t)*3*t*t+t*t*t;};mina.backin=function(n){if(n==1){return 1;}
var s=1.70158;return n*n*((s+1)*n-s);};mina.backout=function(n){if(n==0){return 0;}
n=n-1;var s=1.70158;return n*n*((s+1)*n+s)+1;};mina.elastic=function(n){if(n==!!n){return n;}
return Math.pow(2,-10*n)*Math.si{n-=2.625/p;l=s*n*n+.984375;}}}
return l;};window.mina=mina;return mina;})(typeof eve=="undefined"?function(){}:eve);var Snap=(function(root){Snap.version="0.5.1";function Snap(w,h){if(w){if(w.nodeType){return wrap(w);}
if(is(w,"array")&&Snap.set){return Snap.set.apply(Snap,w);}
if(w instanceof Element){return w;}
if(h==null){try{w=glob.doc.querySelector(String(w));return wrap(w);}catch(e){return null;}}}
w=w==null?"100%":w;h=h==null?"100g=function(){return"Snap v"+this.version;};Snap._={};var glob={win:root.window,doc:root.window.document};Snap._.glob=glob;var has="hasOwnProperty",Str=String,toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,round=math.round,E="",S=" ",objectToString=Object.prototype.toString,ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,colourRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,separator=Snap._.separator=/[,\s]+/,whitespace=/[\s]/g,commaSpaces=/[\s]*,[\s]*/,hsrg={hs:1,rg:1},pathCommand=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,tCommand=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/ig,idgen=.type:E)+idprefix+(idgen++).toString(36);},xlink="http://www.w3.org/1999/xlink",xmlns="http:rl=function(url){return"url('#"+url+"')";};function $(el,attr){if(attr){if(el=="#text"){el=glob.doc.createTextNode(attr.text||attr["#text"]||"");}
if(el=="#comment"){el=glob.doc.createComment(attr.text||attr["#text"]||"");}
if(typeof el=="string"){el=$(el);}
if(typeof attr=="string"){if(el.nodeType==1){if(attr.substring(0,6)=="xlink:"){return el.getAttributeNS(xlink,attr.substring(6));}
if(attr.substring(0,4)=="xml:"){return el.getAttributeNS(xmlns,attr.substring(4));}
return el.getAttribute(attr);}else if(attr=="text"){return el.nodeValue;}else{return null;}}
if(el.nodeType==1){for(var key in attr)if(attr[has](key)){var val=Str(attr[key]);if(val){if(key.substring(0,6)=="xlink:"){el.setAttributeNS(xlink,key.substring(6),val);}else if(key.substring(0,4)=="xml:"){el.setAttributeNS(xmlns,key.substring(4),val);}else{el.setAttribute(key,val);}}else{el.removeAttribute(key);}}}else if("text"in attr){el.nodeValue=attr.text;}}else{el=glob.doc.createElementNS(xmlns,el);}
return el;}
Snap._.$=$;Snap._.id=ID;function getAttrs(el){var attrs=el.attributes,name,out={};for(var i=0;i<attrs.length;i++){if(attrs[i].namespaceURI==xlink){name="xlink:";}else{name="";}
name+=attrs[i].name;out[name]=attrs[i].textContent;}
return out;}
function is(o,type){type=Str.prototype.toLowerCase.call(type);if(type=="finite"){return isFinite(o);}
if(type=="array"&&(o instanceof Array||Array.isArray&&Array.isArray(o))){return true;}
return type=="null"&&o===null||type==typeof o&&o!==null||type=="object"&&o===Object(o)||objectToString.call(o).slice(8,-1).toLowerCase()==type;}
Snap.format=(function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName;if(res){if(name in res){res=res[name];}
typeof res=="function"&&isFunc&&(res=res());}});res=(res==nullall,key){return replacer(all,key,obj);});};})();function clone(obj){if(typeof obj=="function"||Object(obj)!==obj){return obj;}
var res=new obj.constructor;for(var key in obj)if(obj[has](key)){res[key]=clone(obj[key]);}
return res;}
Snap._.clone=clone;function repush(array,item){for(var i=0,ii=array.length;i<ii;i++)if(array[i]===item){return array.push(array.splice(i,1)[0]);}}
function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("\u2400"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];if(cache[has](args)){repush(count,args);return postprocessor?postprocessor(cache[args]):cache[args];}
count.length>=1e3&&delete cache[count.shift()];count.push(args);cache[args]=f.apply(scope,arg);return postprocessor?postprocessor(cache[args]):cache[args];}
return newf;}
Snap._.cacher=cacher;function angle(x1,y1,x2,y2,x3,y3){if(x3==null){var x=x1-x2,y=y1-y2;if(!x&&!y){return 0;}
return(180+math.atan2(-y,-x)*180/PI+360)%360;}else{retur
function rad(deg){return deg%360*PI/180;}this.y+S+this.width+" \xd7 "+this.height;}
Snap.rad=rad;Snap.deg=deg;Snap.sin=function(angle){return math.sin(Snap.rad(angle));};Snap.tan=function(angle){return math.tan(Snap.rad(angle));};Snap.cos=function(angle){return math.cos(Snap.rad(angle));};Snap.asin=function(num){return Snap.deg(math.asin(num));};Snap.acos=function(num){return Snap.deg(math.acos(num));};Snap.atan=function(num){reon(num){return Snap.deg(mareturn Mat2){return(x1-x2)*(x1-x2)+(y1-y2)*(y1-var dx=p.x-x,dy=p.y-y;return dx*dx+dy*dy;}
var pathNode=path.node,pathLength=pathNode.getTotalLength(),precision=pathLength/pathNode.pathSegList.numberOfItems*.125,best,bestLength,bestDistance=Infinity;for(var scan,scanLength=0,scanDistance;scanLength<=pathLength;scanLength+=precision){if((scanDistance=distance2(scan=pathNode.getPointAtLength(scanLength)))<bestDistance){best=scan;bestLength=scanLength;bestDistance=scanDistance;}}
precision*=.5;while(precision>.5){var before,after,beforeLength,afterLength,beforeDistance,afterDistance;if((beforeLength=bestLength-precision)>=0&&(beforeDistance=distance2(before=pathNode.getPointAtLength(beforeLength)))<bestDistance){best=before;bestLength=beforeLength;bestDistance=beforeDistance;}else if((afterLength=bestLength+precision)<=pathLength&&(afterDistance=distance2(after=pathNode.getPointAtLength(afterLength)))<bestDistance){best=after;bestLength=afterLength;bestDistance=afterDistance;}else{precision*=.5;}}
best={x:best.x,y:best.y,length:bestLength,distance:Math.sqrt(bestDistance)};return best;}
Snap.is=is;Snap.snapTo=function(values,value,tolerance){tolerance=is(tolerance,"finite")?tolerance:10;if(is(values,"array")){var i=values.length;while(i--)if(abs(values[i]-value)<=tolerance){return values[i];}}else{values=+values;var rem=value%values;if(rem<tolerance){return value-rem;}
if(rem>values-tolerance){return value-rem+values;}}
return value;};Snap.getRGB=cacher(function(colour){if(!colour||!!((colour=Str(colour)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:rgbtoString};}
if(colour=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:rgbtoString};}
!(hsrg[has](colour.toLowerCase().substring(0,2))||colour.charAt()=="#")&&(colour=toHex(colour));if(!colour){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:rgbtoString};}
var res,red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);if(rgb){if(rgb[2]){blue=toInt(rgb[2].substring(5),16);green=toInt(rgb[2].substring(3,5),16);red=toInt(rgb[2].substring(1,3),16);}
if(rgb[3]){blue=toInt((t=rgb[3].charAt(3))+t,16);green=toInt((t=rgb[3].charAt(2))+t,16);red=toInt((t=rgb[3].charAt(1))+t,16);}
if(rgb[4]){values=rgb[4].split(commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);rgb[1].toLowerCase().slice(0,4)=="rgba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);}
if(rgb[5]){values=rgb[5].split(commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red/=100);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green/=100);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue/=100);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return Snap.hsb2rgb(red,green,blue,opacity);}
if(rgb[6]){values=rgb[6].split(commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red/=100);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green/=100);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue/=100);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsla"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return Snap.hsl2rgb(red,green,blue,opacity);}
red=mmin(math.round(red),255);green=mmin(math.round(green),255);blue=mmin(math.round(blue),255);opacity=mmin(mmax(opacity,0),1);rgb={r:red,g:green,b:blue,toString:rgbtoString};rgb.hex="#"+(16777216|blue|green<<8|red<<16).toString(16).slice(1);rgb.opacity=is(opacity,"finite")?opacity:1;return rgb;}
return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:rgbtoString};},Snap);Snap.hsb=cacher(function(h,s,b){return on(h,s,l){return 7216|b|g<<8|r<<16).toString(16).slice(1);});var toHex=function(color){var i=glob.doc.getElementsByTagName("head")[0]||glob.doc.getElementsByTagName("svg")[0],red="rgb(255, 0, 0)";toHex=cacher(function(color){if(color.toLowerCase()=="red"){return red;}
i.style.color=red;i.style.color=color;var out=glob.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color");return out==red?null:out;});return toHex(color);},hsbtoString=function(){return"hsb({return"hsl("+[this.h,this.s,this.l]+")";},rgbtoString=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")";},prepareRGB=function(r,g,b){if(g==null&&is(r,"object")&&"r"in r&&"g"in r&&"b"in r){b=r.b;g=r.g;r=r.r;}
if(g==null&&is(r,string)){var clr=Snap.getRGB(r);r=clr.r;g=clr.g;b=clr.b;}
if(r>1||g>1||b>1){r/=255;g/=255;b/=255;}
return[r,g,b];},packageRGB=function(r,g,b,o){r=math.round(r*255);g=math.round(g*255);b=math.round(b*255);var rgb={r:r,g:g,b:b,opacity:is(o,"finite")?o:1,hex:Snap.rgb(r,g,b),toString:rgbtoString};is(o,"finite")&&(rgb.opacity=o);return rgb;};Snap.color=function(clr){var rgb;if(is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr){rgb=Snap.hsb2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.opacity=1;clr.hex=rgb.hex;}else if(is(clr,"object")&&"h"in clr&&"s"in clr&&"l"in clr){rgb=Snap.hsl2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.opacity=1;clr.hex=rgb.hex;}else{if(is(clr,"string")){clr=Snap.getRGB(clr);}
if(is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr&&!("error"in clr)){rgb=Snap.rgb2hsl(clr);clr.h=rgb.h;clr.s=rgb.s;clr.l=rgb.l;rgb=Snap.rgb2hsb(clr);clr.v=rgb.b;}else{clr={hex:"none"};clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1;clr.error=1;}}
clr.toString=rgbtoString;return clr;};Snap.hsb2rgb=function(h,s,v,o){if(is(h,"object")&&"h"in h&&"s"in h&&"b"in h){v=h.b;s=h.s;o=h.o;h=h.h;}
h*=360;var R,G,B,X,C;h=h%360/60;C=v*s;X=C*(1-abs(h%2-1));R=G=B=v-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o);};Snap.hsl2rgb=function(h,s,l,o){if(is(h,"object")&&"h"in h&&"s"in h&&"l"in h){l=h.l;s=h.s;h=h.h;}
if(h>1||s>1||l>1){h/=360;s/=100;l/=100;}
h*=360;var R,G,B,X,C;h=h%360/60;C=2*s*(l<.5?l:1-l);X=C*(1-abs(h%2-1));R=G=B=l-C/2;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o);};Snap.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,V,C;V=mmax(r,g,b);C=V-mmin(r,g,b);H=C==0?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4;H=(H+360)%6*60/360;S=C==0?0:C/V;return{h:H,s:S,b:V,toString:hsbtoString};};Snap.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,L,M,m,C;M=mmax(r,g,b);m=mmin(r,g,b);C=M-m;H=C==0?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4;H=(H+360)%6*60/360;L=(M+m)/2;S=C==0?0:L<.5?C/(2*L):C/(2-2*L);return{h:H,s:S,l:L,toString:hsltoString};};Snap.parsePathString=function(pathString){if(!pathString){return null;}
var pth=Snap.path(pathString);if(pth.arr){return Snap.path.clone(pth.arr);}
var paramCounts={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},data=[];if(is(pathString,"array")&&is(pathString[0],"array")){data=Snap.path.clone(pathString);}
if(!data.length){Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();c.replace(pathValues,function(a,b){b&&params.push(+b);});if(name=="m"&&params.length>2){data.push([b].concat(params.splice(0,2)));name="l";b=b=="m"?"l":"L";}
if(name=="o"&&params.length==1){data.push([b,params[0]]);}
if(name=="r"){data.push([b].concat(params));}else while(params.length>=paramCounts[name]){data.push([b].concat(params.splice(0,paramCounts[name])));if(!paramCounts[name]){break;}}});}
data.toString=Snap.path.toString;pth.arr=Snap.path.clone(data);return data;};var parseTransformString=Snap.parseTransformString=function(TString){if(!TString){return null;}
var paramCounts={r:3,s:4,t:2,m:6},data=[];if(is(TString,"array")&&is(TString[0],"array")){data=Snap.path.clone(TString);}
if(!data.length){Str(TString).replace(tCommand,function(a,b,c){var params=[]hValues,function(a,b){b&&params.push(+b);});data.push([b].concat(params));});}
data.toString=Snap.path.toString;return data;};function svgTransform2string(tstr){var res=[];tstr=tstr.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(all,name,params){params=params.split(/\s*,\s*|\s+/);if(name=="rotate"&&params.length==1){params.push(0,0);}
if(name=="scale"){if(params.length>2){params=params.slice(0,2);}else if(params.length==2){params.push(0,0);}
if(params.length==1){params.push(params[0],0,0);}}
if(name=="skewX"){res.push(["m",1,0,math.tan(rad(params[0])),1,0,0]);}else if(name=="skewY"){res.push(["m",1,math.tan(rad(params[0])),0,1,0,0]);}else{res.push([name.charAt(0)].concat(params));}
return all;});return res;}
Snap._.svgTransform2string=svgTransform2string;Snap._.rgTransform=/^[a-z][\s]*-?\.?\d/i;function transform2matrix(tstr,bbox){var tdata=parseTransformString(tstr),m=new Snap.Matrix;if(tdata){for(var i=0,ii=tdata.length;i<ii;i++){var t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0,x1,y1,x2,y2,bb;if(command=="t"&&tlen==2){m.translate(t[1],0);}else if(command=="t"&&tlen==3){if(absolute){x1=inver.x(0,0);y1=inver.y(0,0);x2=inver.x(t[1],t[2]);y2=inver.y(t[1],t[2]);m.translate(x2-x1,y2-y1);}else{m.translate(t[1],t[2]);}}else if(command=="r"){if(tlen==2){bb=bb||bbox;m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2);}else if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.rotate(t[1],x2,y2);}else{m.rotate(t[1],t[2],t[3]);}}}else if(command=="s"){if(tlen==2||tlen==3){bb=bb||bbox;m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2);}else if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.scale(t[1],t[1],x2,y2);}else{m.scale(t[1],t[1],t[2],t[3]);}}else if(tlen==5){if(absolute){x2=inver.x(t[3],t[4]);y2=inver.y(t[3],t[4]);m.scale(t[1],t[2],x2,y2);}else{m.scale(t[1],t[2],t[3],t[4]);}}}else if(command=="m"&&tlen==7){m.add(t[1],t[2],t[3],t[4],t[5],t[6]);}}}
return m;}
Snap._.transform2matrix=transform2matrix;Snap._unit2px=unit2px;var contains=glob.doc.contains||glob.doc.compareDocumentPosition?function(a,b){var adown=a.nodeType==9?a.documentElement:a,bup=b&&b.parentNode;return a==bup||!!(bup&&bup.nodeType==1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while(b){b=b.parentNode;if(b==a){return true;}}}
return false;};function getSomeDefs(el){var p=el.node.ownerSVGElement&&wrap(el.node.ownerSVGElement)||el.node.parentNode&&wrap(el.node.parentNode)||Snap.select("svg")||Snap(0,0),pdefs=p.select("defs"),defs=pdefs==null?false:pdefs.node;if(!defs){defode.ownerSVGElement)||Snap.select("svg");}
Snap._.getSomeDefs=getSomeDefs;Snap._.getSomeSVG=getSomeSVG;function unit2px(el,name,value){var svg=getSomeSVG(el).node,out={},mgr=svg.querySelector(".svg---mgr");if(!mgr){mgr=$("rect");$(mgr,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"});svg.appendChild(mgr);}
function getW(val){if(val==null){return E;}
if(val==+val){return val;}
$(mgr,{width:val});try{return mgr.getBBox().width;}catch(e){return 0;}}
function getH(val){if(val==null){return E;}
if(val==+val){return val;}
$(mgr,{height:val});try{return mgr.getBBox().height;}catch(e){return 0;}}
function set(nam,f){if(name==null){out[nam]=f(el.attr(nam)||0);}else if(nam==name){out=f(value==null?el.attr(nam)||0:value);}}
switch(el.type){case"rect":set("rx",getW);set("ry",getH);case"image":set("width",getW);set("height",getH);case"text":set("x",getW);set("y",getH);break;case"circle":set("cx",getW);set("cy",getH);set("r",getW);break;case"ellipse":set("cx",getW);set("cy",getH);set("rx",getW);set("ry",getH);break;case"line":set("x1",getW);set("x2",getW);set("y1",getH);set("y2",getH);break;case"marker":set("refX",getW);set("markerWidth",getW);set("refY",getH);set("markerHeight",getH);break;case"radialGradient":set("fx",getW);set("fy",getH);break;case"tspan":set("dx",getW);set("dy",getH);break;default:set(name,getW);}
svg.removeChild(mgr);return out;}
Snap.select=function(query){query=Str(query).replace(/([^\\]):/g,"$1\\:");return wrap(glob.doc.querySelector(query));};Snap.selectAll=function(query){var nodelist=glob.doc.querySelectorAll(query),set=(Snap.set||Array)();for(var i=0;i<nodelist.length;i++){set.push(wrap(nodelist[i]));}
return set;};function add2group(list){if(!is(list,"array")){list=Array.prototype.slice.call(arguments,0);}
var i=0,j=0,node=this.node;while(this[i])delete this[i++];for(i=0;i<list.length;i+h(function(el){node.appendChild(el.node);});}else{node.appendChild(list[i].node);}}
var children=node.childNodes;for(i=0;i<children.length;i++){this[j++]=wrap(children[i]);}
return this;}
setInterval(function(){for(var key in hub)if(hub[has](key)){var el=hub[key],node=el.node;if(el.type!="svg"&&!node.ownerSVGElement||el.type=="svg"&&(!node.parentNode||"ownerSVGElement"in node.parentNode&&!node.ownerSVGElement)){delete hub[key];}}},1e4);function Element(el){if(el.snap in hub){return hub[el.snap];}
var svg;try{svg=el.ownerSVGElement;}catch(e){}
this.node=el;if(svg){this.paper=new Paper(svg);}
this.type=el.tagName||el.nodeName;var id=this.id=ID(this);this.anims={};this._={transform:[]};el.snap=id;hub[id]=this;if(this.type=="g"){this.add=add2group;}
if(this.type in{g:1,mask:1,pattern:1,symbol:1}){for(var method in Paper.prototype)if(Paper.prototype[has](method)){this[method]=Paper.prototype[method];}}}
Element.prototype.attr=function(params,value){var el=this,node=el.node;if(!params){if(node.nodeType!=1){return{text:node.nodeValue};}
var attr=node.attributes,out={};for(var i=0,ii=attr.length;i<ii;i++){out[attr[i].nodeName]=attr[i].nodeValue;}
return out;}
if(is(params,"string")){if(arguments.length>1){var json={};json[params]=value;params=json;}else{return eve("snap.util.getattr."+params,el).firstDefined();}}
for(var att in params){if(params[has](att)){eve("snap.util.attr."+att,el,params[att]);}}
return el;};Snap.parse=function(svg){var f=glob.doc.createDocumentFragment(),full=true,div=glob.doc.createElement("div");svg=Str(svg);if(!svg.match(/^\s*<\s*svg(?:\s|>)/)){svg="<svg>"+svg+"</svg>";full=false;}
div.innerHTML=svg;svg=div.getElementsByTagName("svg")[0];if(svg){if(full){f=svg;}else{while(svg.firstChild){f.appendChild(sv};function Fragment(frag){this.node=frag;}
Snap.fragment=function(){var args=Array.prototype.slice.call(arguments,0),f=glob.doc.createDocumentFragment();for(var i=0,ii=args.length;i<ii;i++){var item=args[i];if(item.node&&item.node.nodeType){f.appendChild(item.node);}
if(item.nodeType){f.appendChild(item);}
if(typeof item=="string"){f.appendChild(Snap.parendChild(res);var el=wrap(res);return el;}
function Paper(w,h){var res,desc,defs,proto=Paper.prototype;if(w&&w.tagName&&w.tagName.toLowerCase()=="svg"){if(w.snap in hub){return hub[w.snap];}
var doc=w.ownerDocument;res=new Element(w);desc=w.getElementsByTagName("desc")[0];defs=w.getElementsByTagName("defs")[0];if(!desc){desc=$("desc");desc.appendChild(doc.createTextNode("Created with Snap"));res.node.appendChild(desc);}
if(!defs){defs=$("defs");res.node.appendChild(defs);}
res.defs=defs;for(var key in proto)if(proto[has](key)){res[key]=proto[key];}
res.paper=res.root=res;}else{res=make("svg",glob.doc.body);$(res.node,{height:h,version:1.1,width:w,xmlns:xmlns});}
return res;}
function wrap(dom){if(!dom){return dom;}
if(dom instanceof Element||dom instanceof Fragment){return dom;}
if(dom.tagName&&dom.tagName.toLowerCase()=="svg"){return new Paper(dom);}
if(dom.tagName&&dom.tagName.toLowerCase()=="object"&&dom.type=="image/svg+xml"){return new Paper(dom.contentDocument.getElementsByTagName("svg")[0]);}
return new Element(dom);}
Snap._.make=make;Snap._.wrap=wrap;Paper.prototype.el=function(name,attr){var el=make(name,this.node);attr&&el.attr(attr);return el;};Element.prototype.children=function(){var out=[],ch=this.node.childNodes;for(var i=0,ii=ch.length;i<ii;i++){out[i]=Snap(ch[i]);}
return out;};function jsonFiller(root,o){for(var i=0,ii=root.length;i<ii;i++){var item={type:root[i].type,attr:root[i].attr()},children=root[i].children();o.push(item);if(children.length){jsonFiller(children,item.childNodes=[]);}}}
Element.prototype.toJSON=function(){var out=[];jsonFiller([this],out);return out[0];};eve.on("snap.util.getattr",function(){var att=eve.nt();att=att.substring(att.lastIndexOf(".")+1);var css=att.replace(/[A-Z]/g,function(letter){return"-"+letter.toLowerCase();});if(cssAttr[has](css)){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(css);}else{return $(this.node,att);}});var cssAttr={"alignment-baseline":0,"baseline-shift":0,"clip":0,"clip-path":0,"clip-rule":0,"color":0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,"cursor":0,"direction":0,"display":0,"dominant-baseline":0,"enable-background":0,"fill":0,"fill-opacity":0,"fill-rule":0,"filter":0,"flood-color":0,"flood-opacity":0,"font":0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,"kerning":0,"letter-spacing":0,"lighting-color":0,"marker":0,"marker-end":0,"marker-mid":0,"marker-start":0,"mask":0,"opacity":0,"overflow":0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,"stroke":0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,"visibility":0,"word-spacing":0,"writing-mode":0};eve.on("snap.util.attr",function(value){var att=eve.nt(),attr={};att=att.substring(att.lastIndexOf(".")+1);attr[(all,letter){return lettern(letter){return"-"+letter.toLowerCase();});if(cssAttr[has](css)){this.node.style[style]=value=e{$(this.node,attr);}});(function(proto){}(Paper.prototype));Snap.ajax=function(url,postData,callback,scope){var req=new XMLHttpRequest,id=ID();if(req){if(is(postData,"function")){scope=callback;callback=postData;postData=null;}else if(is(postData,"object")){var pd=[];for(var key in postData)if(postData.hasOwnProperty(key)){pd.push(encodeURIComponent(key)+"="+encodeURIComponent(postData[key]));}
postData=pd.join("&");}
req.open(postData?"POST":"GET",url,true);if(postData){req.setRequestHeader("X-Requested-With","XMLHttpRequest");req.setRequestHeader("Content-type","application/x-www-form-urlencoded");}
if(callback){eve.once("snap.ajax."+id+".0",callback);eve.once("snap.ajax."+id+".200",callback);eve.once("snap.ajax."+id+".304",callback);}
req.onreadystatechange=function(){if(req.readyState!=4)return;eve("snap.ajax."+id+"."+req.status,scope,req);};if(req.readyState==4){return req;}
pe?callback.caollLeft)-clientLeft;return{y:top,x:left};};Snap.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=glob.doc.elementFromPoint(x,y);if(glob.win.opera&&target.tagName=="svg"){var so=getOffset(target),sr=target.createSVGRect();sr.x=x-so.x;sr.y=y-so.y;sr.width=sr.height=1;var hits=target.getIntersectionList(sr,null);if(hits.length){target=hits[hits.length-1];}}
if(!target){return(f){f(Snap,Element,Paper,glob,Fragment);};glob.win.Snap=Snap;return Snap;}(window||this));Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var elproto=Element.prototype,is=Snap.is,Str=String,unit2px=Snap._unit2px,$=Snap._.$,make=Snap._.make,getSomeDefs=Snap._.getSomeDefs,has="hasOwnProperty",wrap=Snap._.wrap;elproto.getBBox=function(isWithoutTransform){if(this.type=="tspan"){return Snap._.box(this.node.getClientRects().item(0));}
if(!Snap.Matrix||!Snap.path){return this.node.getBBox();}
var el=this,m=new Snap.Matrix;if(el.removed){return Snap._.box();}
while(el.type=="use"){if(!isWithoutTransform){m=m.add(el.transform().localMatrix.translate(el.attr("x")||0,el.attr("y")||0));}
if(el.original){el=el.original;}else{var href=el.attr("xlink:href");el=el.original=el.node.ownerDocument.getElementById(href.substring(href.indexOf("#")+1));}}
var _=el._,pathfinder=Snap.path.get[el.type]||Snap.path.get.deflt;try{if(isWithoutTransform){_.bboxwt=pathfinder?Snap.path.getBBox(el.realPath=pathfinder(el)):Snap._.box(el.node.getBBox());return Snap._.box(_.bboxwt);}else{el.realPath=pathfinder(el);el.matrix=el.transform().localMatrix;_.bbox=Snap.path.getBBox(Snap.path.map(el.realPath,m.add(el.matrix)));return Snap._.box(_.bbox);}}catch(e){return Snap._.box();}};var propString=function(){return this.string;};function extractTransform(el,tstr){if(tstr==null){var doReturn=true;if(el.type=="linearGradient"||el.type=="radialGradient"){tstr=el.node.getAttribute("gradientTransform");}else if(el.type=="pattern"){tstr=el.node.getAttribute("patternTransform");}else{tstr=el.node.getAttribute("transform");}
if(!tstr){return new Snap.Matrix;}
tstr=Snap._.svgTransform2string(tstr);}else{if(!Snap._.rgTransform.test(tstr)){tstr=Snap._.svgTransform2string(tstr);}else{tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||"");}
if(is(tstr,"array")){tstr=Snap.path?Snap.path.toString.call(tstr):Str(tstr);}
el._.transform=tstr;}
var m=Snap._.transform2matrix(tstr,el.getBBox(1));if(doReturn){return m;}else{el.matrix=m;}}
elproto.transform=function(tstr){var _=this._;if(tstr==null){var papa=this,global=new Snap.Matrix(this.node.getCTM()),local=extractTransform(this),ms=[local],m=new Snap.Matrix,i,localString=local.toTransformString(),string=Str(local)==Str(this.matrix)?Str(_.transform):localString;while(papa.type!="svg"&&(papa=papa.parent())){ms.push(extractTransform(papa));}
i=ms.length;while(i--){m.add(ms[i]);}
return{string:string,globalMatrix:global,totalMatrix:m,localMatrix:local,diffMatrix:global.clone().add(local.invert()),global:global.toTransformString(),total:m.toTransformString(),local:localString,toString:propString};}
if(tstr instanceof Snap.Matrix){this.matrix=tstr;this._.transform=tstr.toTransformString();}else{extractTransform(this,tstr);}
if(this.node){if(this.type=="linearGradient"||this.type=="radialGradient"){$(this.node,{gradientTransform:this.matrix});}else if(this.type=="pattern"){$(this.node,{patternTransform:this.matrix});}else{$(this.node,{transform:thition(){return wrap(this.node.parentNode);};elproto.append=elproto.add=function(el){if(el){if(el.type=="set"){var it=this;el.forEach(function(el){it.add(el);});return this;}
el=wrap(el);this.node.appendChild(el.node);el.paper=this.paper;}
return this;};elproto.appendTo=function(el){if(el){el=wrap(el);el.append(this);}
return this;};elproto.prepend=function(el){if(el){if(el.type=="set"){var it=this,first;el.forEach(function(el){if(first){first.after(el);}else{it.prepend(el);}
first=el;});return this;}
el=wrap(el);var parent=el.parent();this.node.insertBefore(el.node,this.node.firstChild);this.add&&this.add();el.paper=this.paper;this.parent()&&this.parent().add();parent&&parent.add();}
return this;};elproto.prependTo=function(el){el=wrap(el);el.prepend(this);return this;};elproto.before=function(el){if(el.type=="set"){var it=this;el.forEach(function(el){var parent=el.parent();it.node.parentNode.insertBefore(el.node,it.node);parent&&parent.add();});this.parent().add();return this;}
el=wrap(el);var parent=el.parent();this.node.parentNode.insertBefore(el.node,this.node);this.parent()&&this.parent().add();parent&&parent.add();el.paper=this.paper;return this;};elproto.after=function(el){el=wrap(el);var parent=el.parent();if(this.node.nextSibling){this.node.parentNode.insertBefore(el.node,this.node.nextSibling);}else{this.node.parentNode.appendChild(el.node);}
this.parent()&&this.parent().add();parent&&parent.add();el.paper=this.paper;return this;};elproto.insertBefore=function(el){el=wrap(el);var parent=this.parent();el.node.parentNode.insertBefore(this.node,el.node);this.paper=el.paper;parent&&parent.add();el.parent()&&el.parent().add();return this;};elproto.insertAfter=function(el){el=wrap(el);var parent=this.parent();el.node.parentNode.insertBefore(this.node,el.node.nextSibling);this.paper=el.paper;parent&&parent.add();el.parent()&&el.parent().add();return this;};elproto.remove=function(){var parent=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=true;parent&urn wrap(this.node.querySelector(query));};elproto.selectAll=function(query){var nodelist=this.node.querySelectorAll(query),set=(Snap.set||Array)();for(var i=0;i<nodelist.length;i++){set.push(wrap(nodelist[i]));}
return set;};elproto.asPX=function(attr,value){if(value==null){value=this.attr(attr);}
return+unit2px(this,attr,value);};elproto.use=function(){var use,id=this.node.id;if(!id){id=this.id;$(this.node,{id:id});}
if(this.type=="linearGradient"||this.type=="radialGradient"||this.type=="pattern"){use=make(this.type,this.node.parentNode);}else{use=make("use",this.node.parentNode);}
$(use.node,{"xlink:href":"#"+id});use.original=this;return use;};function fixids(el){var els=el.selectAll("*"),it,url=/^\s*url\(("|'|)(.*)\1\)\s*$/,ids=[],uses={};function urltest(it,name){var val=$(it.node,name);val=val&&val.match(url);val=val&&val[2];if(val&&val.charAt()=="#"){val=val.substring(1);}else{return;}
if(val){uses[val]=(uses[val]||[]).concat(function(id){var attr={};attr[name]=Snap.url(id);$(it.node,attr);});}}
function linktest(it){var val=$(it.node,"xlink:href");if(val&&val.charAt()=="#"){val=val.substring(1);}else{return;unction(id){it.attr("xlink:href","#"+id);});}}
for(var i=0,ii=els.length;i<ii;i++){it=els[i];urltest(it,"fill");urltest(it,"stroke");urltest(it,"filter");urltest(it,"mask");urltest(it,"clip-path");linktest(it);var oldid=$(it.node,"id");if(oldid){$(it.node,{id:it.id});ids.push({old:oldid,id:it.id});}}
for(i=0,ii=ids.length;i<ii;i++){var fs=uses[ids[i].old];if(fs){for(var j=0,jj=fs.length;j<jj;j++){fs[j](ids[i].id);}}}}
elproto.clone=function(){var clone=wrap(this.node.cloneNode(true));if($(clone.node,"id")){$(clone.node,{id:clone.id});}
fixids(clone);clone.insertAfter(this);return clone;};elproto.toDefs=function(){var defs=getSomeDefs(this);defs.appendChild(this.node);return this;};elproto.pattern=elproto.toPattern=function(x,y,width,height){var p=make("pattern",getSomeDefs(this));if(x==null){x=this.getBBox();}
if(is(x,"object")&&"x"in x){y=x.y;width=x.width;height=x.height;x=x.x;}
$(p.node,{x:x,y:y,width:width,height:height,patternUnits:"userSpaceOnUse",id:p.id,viewBox:[x,y,width,height].join(" ")});p.node.appendChild(this.node);return p;};elproto.marker=function(x,y,width,height,refX,refY){var p=make("marker",getSomeDefs(this));if(x==null){x=this.getBBox();}
if(is(x,"object")&&"x"in x){y=x.y;width=x.width;height=x.height;refX=x.refX||x.cx;refY=x.refY||x.cy;x=x.x;}
$(p.node,{viewBox:[x,y,width,height].join(" "),markerWidth:width,markerHeight:height,orient:"auto",refX:refX||0,refY:refY||0,id:p.id});p.node.appendChild(this.node);return p;};var eldata={};elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(arguments.length==0){eve("snap.data.get."+this.id,this,data,null);return data;}
if(arguments.length==1){if(Snap.is(key,"object")){for(var i in key)if(key[has](i)){this.data(i,key[i]);}
return this;}
eve("snap.data.get."+this.id,this,data[key],key);return data[key];}
data[key]=value;eve("snap.data.set."+this.id,this,value,key);return this;};elproto.removeData=function(key){if(key==null){eldata[this.id]={};}else{eldata[this.id]&&delete eldata[this.id][key];}
return this;};elproto.outerSVG=elproto.toString=toString(1);elproto.innerSVG=toString();function toString(type){return function(){var res=type?"<"+this.type:"",attr=this.node.attributes,chld=this.node.childNodes;if(type){for(var i=0,ii=attr.length;i<ii;i++){res+=" "+attr[i].name+'="'+
attr[i].value.replace(/"/g,'\\"')+'"';}}
if(chld.length){type&&(res+=">");for(i=0,ii=chld.length;i<ii;i++){if(chld[i].nodeType==3){res+=chld[i].nodeValue;}else if(chld[i].nodeType==1){res+=wrap(chld[i]).toString();}}
type&&(res+="</"+this.type+">");}else{type&&(resbtoa(unescape(encodeURIComponent(svg)));}};Fragment.prototype.select=elproto.select;Fragment.prototype.selectAll=elproto.selectAll;});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var elproto=Element.prototype,is=Snap.is,Str=String,has="hasOwnProperty";function slice(from,to,f){return function(arr){var res=arr.slice(from,to);if(res.length==1){res=res[0];}
return f?f(res):res;};}
var Animation=function(attr,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
this.attr=attr;this.dur=ms;easing&&(this.easing=easing);callback&&(this.callback=callback);}n new Animation(attr,ms,easing,callback);};elproto.inAnim=function(){var el=this,res=[];foratus(val);},stop:function(){a.stop();}});}(el.anims[id]));}
return res;};Snap.animate=function(from,to,setter,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
var now=mina.time(),anim=mina(from,to,now,now+ms,mina.time,setter,easing);callback&&eve.once("mina.finish."+anim.id,callback);return anim;};elproto.stop=function(){var anims=this.inAnim();for(var i=0,ii=anims.length;i<ii;i++){anims[i].stop();}
return this;};elproto.animate=function(attrs,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
if(attrs instanceof Animation){callback=attrs.callback;easing=attrs.easing;ms=attrs.dur;attrs=attrs.attr;}
var fkeys=[],tkeys=[],keys={},from,to,f,eq,el=this;for(var key in attrs)if(attrs[has](key)){if(el.equal){eq=el.equal(key,Str(attrs[key]));from=eq.from;to=eq.to;f=eq.f;}else{from=+el.attr(key);to=+attrs[key];}
var len=is(from,"array")?from.length:1;keys[key]=slice(fkeys.length,fkeys.length+len,f);fkeys=fkeys.concat(from);tkeys=tkeys.concat(to);}
var now=mina.time(),anim=mina(fkeys,tkeys,now,now+ms,mina.time,function(val){var attr={};for(var key in keys)if(keys[has](key)){attr[key]=keys[key](val);}
el.attr(attr);},easing);el.anims[anim.id]=anim;anim._attrs=attrs;anim._callback=callback;eve("snap.animcreated."+el.id,anim);eve.once("mina.finish."+anim.id,function(){eve.off("mina.*."+anim.id);delete el.anims[anim.id];callback&&callback.call(el);});eve.once("mina.stop."+anim.id,function(){eve.off("mina.*."+anim.id);delete el.anims[anim.id];});return el;};});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var objectToString=Object.prototype.toString,Str=String,math=Math,E="";function Matrix(a,b,c,d,e,f){if(b==null&&objectToString.call(a)=="[object SVGMatrix]"){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.e=a.e;this.f=a.f;return;}
if(a!=null){this.a=+a;this.b=+b;this.c=+c;this.d=+d;this.e=+e;this.f=+f;}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0;}}
(function(matrixproto){matrixproto.add=function(a,b,c,d,e,f){if(a&&a instanceof Matrix){return this.add(a.a,a.b,a.c,a.d,a.e,a.f);}
var aNew=a*this.a+b*this.c,bNew=a*this.b+b*this.d;this.e+=e*this.a+f*this.c;this.f+=e*this.b+f*this.d;this.c=c*this.a+d*this.c;this.d=c*this.b+d*this.d;this.a=aNew;this.b=bNew;return this;};Matrix.prototype.multLeft=function(a,b,c,d,e,f){if(a&&a instanceof Matrix){return this.multLeft(a.a,a.b,a.c,a.d,a.e,a.f);}
var aNew=a*this.a+c*this.b,cNew=a*this.c+c*this.d,eNew=a*this.e+c*this.f+e;this.b=b*this.a+d*this.b;this.d=b*this.c+d*this.d;this.f=b*this.e+d*this.f+f;this.a=aNew;this.c=cNew;th.f-me.d*me.e)/x,(mis.a,this.b,this.c,thi.c;this.f+=x*this.b+y*this.d;return this;};matrixproto.scale=function(x,y,cx,cy){y==null&&(y=x);(cx||cy)&&this.translate(cx,cy);this.a*=x;this.b*=x;this.c*=y;this.d*=y;(cx||cy)&&this.translate(-cx,-cy);return this;};matrixproto.rotate=function(a,x,y){a=Snap.rad(a);x=x||0;y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y);return t.skewX=function(x).skewY=function(y){return this.skew(0,y);};matrixproto.skew=function(x,y){x=x||0;y=y||0;x=Snap.rad(x);y=Snap.rad(y);var c=math.tan(x).toFixed(9);var b=math.tan(y).toFixed(9);return this.add(1,b,c,1,0,0);};matrixproto.x=function(x,y){returion(x,y){return +this[Str.fromCharCodt(3),this.get(4),th(a));a[0]&&(a[0]/=mag);aion(){return this.a*this.d-this.b*this.c;};matrixproto.split=function(){var out={};out.dx=this.e;out.dy=this.f;var row=[[this.a,this.b],[this.c,this.d]];out.scalex=math.sqrt(norm(row[0]));normalize(row[0]);out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1];row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear];out.scaley=math.sqrt(norm(row[1]));normalize(row[1]);out.shear/=out.scaley;if(this.determinant()<0){out.scalex=-out.scalex;}
var sin=row[0][1],cos=row[1][1];if(cos<0){out.rotate=Snap.deg(math.acos(cos));if(sin<0){out.rotate=360-out.rotate;}}else{out.rotate=Snap.deg(math.asin(sin));}
out.isSimple=!+out.shear.toFixed(9)&&(out.scalex.toFixed(9)==out.scaley.toFixed(9)||!out.rotate);out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate;out.noRotation=!+out.shear.toFixed(9)&&!out.rotate;return out;};matrixproto.toTransformString=function(shorter){var s=shorter||this.split();if(!+s.shear.toFixed(9)){s.scalex=+s.scalex.toFixed(4);s.scaley=+s.scaley.toFixed(4);s.rotate=+s.rotate.toFixed(4);return(s.dx||s.dy?"t"+[+s.dx.toFixed(4),+s.dy.toFixed(4)]:E)+
(s.rotate?"r"+[+s.rotate.toFixed(4),0,0]:E)+
(s.scalex!=1||s.scaley!=1?"s"+[s.scalex,s.scaley,0,0]:E);}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];}};})(Matrix,c,d,e,f){return new Matrix(a,b,c,d,e,f);};});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var has="hasOwnProperty",make=Snap._.make,wrap=Snap._.wrap,is=Snap.is,getSomeDefs=Snap._.getSomeDefs,reURLValue=/^url\((['"]?)([^)]+)\1\)$/,$=Snap._.$,URL=Snap.url,Str=String,atch(reURLValue);return res?res[2]:value;}
eve.on("snap.util.attr.mask",function(value){if(value instanceof Element||value instanceof Fragment){eve.stop();if(value instanceof Fragment&&value.node.childNodes.length==1){value=value.node.firstChild;getSomeDefs(this).appendChild(value);value=wrap(value);}
if(value.type=="mask"){var mask=value;}else{mask=make("mask",getSomeDefs(this));mask.node.appendChild(value.node);}
!mask.node.id&&$(mask.node,{id:mask.eve.on("snap.util.attr.clipPath",clipIt);}(function(value){if(value instanceof Element||value instanceof Fragment){eve.stop();var clip,node=value.node;while(node){if(node.nodeName==="clipPath"){clip=new Element(node);break;}
if(node.nodeName==="svg"){clip=undefined;break;}
node=node.parentNode;}
if(!clip){clip=make("clipPath",getSomeDefs(this));clip.node.appendChild(value.node);!clip.node.id&&$(clip.node,{id:clip.id});}
$(this.node,{"clip-path":URL(clip.node.id||clip.id)});}}));function fillStroke(name){return function(value){eve.stop();if(value instanceof Fragment&&value.node.childNodes.length==1&&(value.node.firstChild.tagName=="radialGradient"||value.node.firstChild.tagName=="linearGradient"||value.node.firstChild.tagName=="pattern")){value=value.node.firstChild;getSomeDefs(this).appendChild(value);value=wrap(value);}
if(value instanceof Element){if(value.type=="radialGradient"||value.type=="linearGradient"||value.type=="pattern"){if(!value.node.id){$(value.node,{id:value.id});}
var fill=URL(value.node.id);}else{fill=value.attr(name);}}else{fill=Snap.color(value);if(fill.error){var grad=Snap(getSomeDefs(this).ownerSVGElement).gradient(value);if(grad){if(!grad.node.id){$(grad.node,{id:grad.id});}
fill=URL(grad.node.id);}else{fill=value;}}else{fill=Str(fill);}}
var attrs={};attrs[name]=fill;$(this.node,attrs);this.node.style[name]=E;};}
eve.on("snap.util.attr.fill",fillStroke("fill"));eve.on("snap.util.attr.stroke",fillStroke("stroke"));var gradrg=/^([lr])(?:\(([^)]*)\))?(.*)$/i;eve.on("snap.util.grad.parse",function parseGrad(string){string=Str(string);var tokens=string.match(gradrg);if(!tokens){return null;}
var type=tokens[1],params=tokens[2],stops=to/).map(function(el){return+el==el?+el:el;});if(params.length==1&&params[0]==0){params=[];}
stops=stops.split("-");stops=stops.map(function(el){el=el.split(":");var out={color:el[0]};if(el[1]){out.offset=parseFloat(el[1]);}
return out;});var len=stops.length,start=0,j=0;function seed(i,end){var step=(end-start)/(i-j);for(var k=j;k<i;k++){stops[k].offset=+(+start+step*(k-j)).toFixed(2);}
j=i;start=end;}
len--;for(var i=0;i<len;i++)if("offset"in stops[i]){seed(i,stops[i].offset);}
stops[len].offset=stops[len].offset||100;seed(len,stops[len].offset);return{type:type,params:params,stops:stops};});eve.on("snap.util.attr.d",function(value){eve.stop();if(is(value,"array")&&is(value[0],"array")){value=Snap.path.toString.call(value);}
value=Str(value);if(value.match(/[ruo]/i)){value=Snap.path.toAbsolute(value);}
$(this.node,{d:value});})(-1);eve.on("snap.util.attr.#text",function(value){eve.stop();value=Str(value);var txt=glob.doc.createTextNode(value);while(this.node.firstChild){this.node.removeChild(this.node.firstChild);}
this.node.appendChild(txt);})(-1);eve.on("snap.util.attr.path",function(value){eve.stop();this.attr({d:value});})(-1);eve.on("snap.util.attr.class",function(value){eve.stop();this.node.className.baseVal=value;})(-1);eve.on("snap.util.attr.viewBox",function(value){var vb;if(is(value,"object")&&"x"in value){vb=[value.x,value.y,value.width,value.height].join(" ");}else if(is(value,"array")){vb=value.join(" ");}else{vb=value;}
$(this.node,{viewBox:vb});eve.stop((value){this.transform(value);eve.stop();})(-1);eve.on("snap.util.attr.r",function(value){if(this.type=="rect"){eve.stop();$(this.node,{rx:value,ry:value});}})(-1);eve.on("snap.util.attr.textpath",function(value){eve.stop();if(this.type=="text"){var id,tp,node;if(!value&&this.textPath){tp=this.textPath;while(tp.node.firstChild){this.node.appendChild(tp.node.firstChild);}
tp.remove();delete this.textPath;return;}
if(is(value,"string")){var defs=getSomeDefs(this),path=wrap(defs.parentNode).path(value);defs.appendChild(path.node);id=path.id;path.attr({id:id});}else{value=wrap(value);if(value instanceof Element){id=value.attr("id");if(!id){id=value.id;value.attr({id:id});}}}
if(id){tp=this.textPath;node=this.node;if(tp){tp.attr({"xlink:href":"#"+id});}else{tp=$("textPath",{"xlink:href":"#"+id});while(node.firstChild){tp.appendChild(node.firstChild);}
node.appendChild(tp);this.textPath=wrap(tp);}}}})(-1);eve.on("snap.util.attr.text",function(value){if(this.type=="text"){var i=0,node=this.node,tuner=function(chunk){var out=$("tspan");if(is(chunk,"array")){for(var i=0;i<chunk.length;i++){out.appendChild(tuner(chunk[i]));}}else{out.appendChild(glob.doc.createTextNode(chunk));}
out.normalize&&out.normalize();return out;};while(node.firstChild){node.removeChild(node.firstChild);}
var tuned=tuner(value);while(tuned.firstChild){node.appendChild(tuned.firstChild);}}
eve.stop();})(-1);function setFontSize(value){eve.stop();if(value==+value){value+="px";}
this.node.style.fontSize=value;}
eve.on("snap.util.attr.fontSize",setFontSize)(-1);eve.on("snap.util.attr.font-size",setFontSize)(-1);eve.on("snap.util.getattr.transform",function(){eve.stop();return this.transform();nction(){eve.stop();return this.textPath;})(-1);(function(){function getter(end){return function(){eve.stop();var style=glob.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+end);if(style=="none"){return style;}else{return Snap(glob.doc.getElementById(style.match(reURLValue)[1]));}};}
function setter(end){return function(value){eve.stop();var name="marker"+end.charAt(0).toUpperCase()+end.substring(1);if(value==""||!value){this.node.style[name]="none";return;}
if(value.type=="marker"){var id=value.node.id;if(!id){$(value.node,{id:value.id});}
this.node.style[name]=URL(id);return;}};}
eve.on("snap.util.getattr.marker-end",getter("end"))(-1);eve.on("snap.util.getattr.markerEnd",getter("end"))(-1);eve.on("snap.util.getattr.marker-start",getter("start"))(-1);eve.on("snap.util.getattr.markerStart",getter("start"))(-1);eve.on("snap.util.getattr.marker-mid",getter("mid"))(-1);eve.on("snap.util.getattr.markerMid",getter("mid"))(-1);eve.on("snap.util.attr.marker-end",setter("end"))(-1);eve.on("snap.util.attr.markerEnd",setter("end"))(-1);eve.on("snap.util.attr.marker-start",setter("start"))(-1);eve.on("snap.util.attr.markerStart",setter("start"))(-1);eve.on("snap.util.attr.marker-mid",setter("mid"))(-1);eve.on("snap.util.attr.markerMid",setter("mid"))(-1);}());eve.on("snap.util.getattr.r",function(){if(this.type=="rect"&&$(this.node,"rx")==$(this.node,"ry")){eve.stop();return $(this.node,"rx");}})(-1);function textExtract(node){var out=[];var children=node.childNodes;for(var i=0,ii=children.length;i<ii;i++){var chi=children[i];if(chi.nodeType==3){out.push(chi.nodeValue);}
if(chi.tagName=="tspan"){if(chi.childNodes.length==1&&chi.firstChild.nodeType==3){out.push(chi.firstChild.nodeValue);}else{out.push(textExtract(chi));}}}
return out;}
eve.on("snap.util.getattr.text",function(){if(this.type=="text"||this.type=="tspan"){eve.stop();var out=textExtract(this.node);return out.length==1?out[0]:ou,function(){return this.node.textContent;})(-1);eve.on("snap.util.getattr.fill",function(internal){if(internal){return;}
eve.stop();var value=eve("snap.util.getattr.fill",this,true).firstDefined();return Snap(Snap.deurl(value))||value;})(-1);eve.on("snap.util.getattr.stroke",function(internal){if(internal){return;}
eve.stop();var value=eve("snap.util.getattr.stroke",this,true).firstDefined();return Snap(Snap.deurl(value))||value;})(-1);eve.on("snap.util.getattr.viewBox",function(){eve.stop();var vb=$(this.node,"viewBox");if(vb){vb=vb.split(separator);return Snap._.box(+vb[0],+vb[1],+vb[2],+vb[3]);}else{return;}})(-1);eve.on("snap.util.getattr.points",function(){var p=$(this.node,"points");eve.stop();if(p){return p.split(separator);}else{return;}})(-1);eve.on("snap.util.getattr.path",function(){var p=$(this.node,"d");eve.stop();returnion(){return this.node.className.baseVal;})(-1);function getFontSize(){eve.stop();return this.node.style.fontSize;}
eve.on("snap.util.getattr.fontSize",getFontSize)(-1);eve.on("snap.util.getattr.font-size",getFontSize)(-1);});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var rgNotSpace=/\S+/g,rgBadSpace=/[\t\r\n\f]/g,rgTrim=/(^\s+|\s+$)/g,Str=String,elproto=Element.prototype;elproto.addClass=function(value){var classes=Str(value||"").match(rgNotSpace)||[],elem=this.node,className=elem.className.baseVal,curClasses=className.match(rgNotSpace)||[],j,pos,clazz,finalValue;if(classes.length){j=0;while(clazz=classes[j++]){pos=curClasses.indexOf(clazz);if(!~pos){curClasses.push(clazz);}}
finalValue=curClasses.join(" ");if(className!=finalValue){elem.className.baseVal=finalValue;}}
return this;};elproto.removeClass=function(value){var classes=Str(value||"").match(rgNotSpace)||[],elem=this.node,className=elem.className.baseVal,curClasses=className.match(rgNotSpace)||[],j,pos,clazz,finalValue;if(curClasses.length){j=0;while(clazz=classes[j++]){pos=curClasses.indexOf(clazz);if(~pos){curClasses.splice(pos,1);}}
finalValue=curClasses.join(" ");if(className!=finalValue){elem.className.baseVal=fi)||[];return!!~curClasses.indexOf(value);};elproto.toggleClass=function(value,flag){if(flag!=null){if(flag){return this.addClass(value);}else{return this.removeClass(value);}}
var classes=(value||"").match(rgNotSpace)||[],elem=this.node,className=elem.className.baseVal,curClasses=className.match(rgNotSpace)||[],j,pos,clazz,finalValue;j=0;while(clazz=classes[j++]){pos=curClasses.indexOf(clazz);if(~pos){curClasses.splice(pos,1);}else{curClasses.push(clazz);}}
finalValue=curClasses.join(" ");if(className!=finalValue){elem.className.baseVal=finalValue;}
return this;};});Snap.plugin(function(Snap,Eleme operators={"+":function(x,y){returetureturn x/y;},"*":function(x,y){return x*y;}},Str=String,reUnit=/[a-z]+$/i,reAddon=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;function getNumber(val){return val;}
function getUnit(unit){return function(val){return+val.toFixed(3)+unit;};}
eve.on("snap.util.attr",function(val){var plus=Str(val).match(reAddon);if(plus){var evnt=eve.nt(),name=evnt.substring(evnt.lastIndexOf(".")+1),a=this.attr(name),atr={};eve.stop();var unit=plus[3]||"",aUnit=a.match(reUnit),op=operators[plus[1]];if(aUnit&&aUnit==unit){val=op(parseFloat(a),+plus[2]);}else{a=this.asPX(name);val=op(this.asPX(name),this.asPX(name,plus[2]+unit));}
if(isNaN(a)||isNaN(val)){return;}
atr[name]=val;this.attr(atr);}})(-10);eve.on("snap.util.equal",function(name,b){var A,B,a=Str(this.attr(name)||""),el=this,bplus=Str(b).match(reAddon);if(bplus){eve.stop();var unit=bplus[3]||"",aUnit=a.match(reUnit),op=operators[bplus[1]];if(aUnit&&aUnit==unit){return{from:parseFloat(a),to:op(parseFloat(a),+bplus[2]),f:getUnit(aUnit)};}else{a=this.asPX(name);return{from:a,to:op(a,this.asPX(name,bplus[2]+unit)),f:getNumber};}}})(-10);});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var proto=Paper.prototype,is=Snap.is;proto.rect=function(x,y,w,h,rx,ry){var attr;if(ry==null){ry=rx;}
if(is(x,"object")&&x=="[object Object]"){attr=x;}else if(x!=null){attr={x:x,y:y,width:w,height:h};if(rx!=null){attr.rx=rx;attr.ry=ry;}}
return this.el("rect",attr);};proto.circle=function(cx,cy,r){var attr;if(is(cx,"object")&&cx=="[object Object]"){attr=cx;}else if(cx!=null){attr={cx:cx,cy:cy,r:r};}
return this.error(){this.parentNode.removeChild(this);}
return function(src,f){var img=glob.doc.createElement("img"),body=glob.doc.body;img.style.cssText="position:absolute;left:-9999em;top:-9999em";img.onload=function(){f.call(img);img.onload=img.onerror=null;body.removeChild(img);};img.onerror=onerror;body.appendChild(img);img.src=src;};}());proto.image=function(src,x,y,width,height){var el=this.el("image");if(is(src,"object")&&"src"in src){el.attr(src);}else if(src!=null){var set={"xlink:href":src,preserveAspectRatio:"none"};if(x!=null&&y!=null){set.x=x;set.y=y;}
if(width!=null&&height!=null){set.widths.offsetWidth,height:this.offsetHeight});});}
Snap._.$(el.node,set);}
return el;};proto.ellipse=function(cx,cy,rx,ry){var attr;if(is(cx,"object")&&cx=="[object Object]"){attr=cx;}else if(cx!=null){attr={cx:cx,cy:cy,rx:rx,ry:ry};}
return this.el("ellipse",attr);};proto.path=function(d){var attr;if(is(d,"object")&&!is(d,"array")){attr=d;}else if(d){attr={d:d};}
return this.el("path",attr);};proto.group=proto.g=function(first){var attr,el=this.el("g");if(arguments.length==1&&first&&!first.type){el.attr(first);}else if(arguments.length){el.add(Array.prototype.slice.call(arguments,0));}
return el;};proto.svg=function(x,y,width,height,vbx,vby,vbw,vbh){var attrs={};if(is(x,"object")&&y==null){attrs=x;}else{if(x!=null){attrs.x=x;}
if(y!=null){attrs.y=y;}
if(width!=null){attrs.width=width;}
if(height!=null){attrs.height=height;}
if(vbx!=null&&vby!=null&&vbw!=null&&vbh!=null){attrs.viewBox=[vbx,vby,vbw,vbh];}}
return this.el("svg",attrs);};proto.mask=function(first){var attr,el=this.el("mask");if(arguments.length==1&&first&&!first.type){el.attr(first);}else if(arguments.length){el.add(Array.prototype.slice.call(arguments,0));}
return el;};proto.ptrn=function(x,y,width,height,vx,vy,vw,vh){if(is(x,"object")){var attr=x;}else{attr={patternUnits:"userSpaceOnUse"};if(x){attr.x=x;}
if(y){attr.y=y;}
if(width!=null){attr.width=width;}
if(height!=null){attr.height=height;}
if(vx!=null&&vy!=null&&vw!=null&&vh!=null){attr.viewBox=[vx,vy,vw,vh];}else{attr.viewBox=[x||0,y||0,width||0,height||0];}}
return this.el("pattern",attr);};proto.use=function(id){if(id!=null){if(id instanceof Element){if(!id.attr("id")){id.attr({id:Snap._.id(id)});}
id=id.attr("id");}
if(String(id).charAt()=="#"){id=id.substring(1);}
return this.el("use",{"xlink:href":"#"+id});}else{return Element.prototype.use.call(this);}};proto.symbol=function(vx,vy,vw,vh){var attr={};if(vx!=null&&vy!=null&&vw!=null&&vh!=null){attr.viewBox=[vx,vy,vw,vh];}
return this.el("symbol",attr);};proto.text=function(x,y,text){var attr={};if(is(x,"object")){attr=x;}else if(x!=null){attr={x:x,y:y,text:text||""};}
return this.el("text",attr);};proto.line=function(x1,y1,x2,y2){var attr={};if(is(x1,"object")){attr=x1;}else if(x1!=null){attr={x1:x1,x2:x2,y1:y1,y2:y2};}
return this.el("line",attr);};proto.polyline=function(points){if(arguments.length>1){points=Array.prototype.slice.call(arguments,0);}
var attr={};if(is(points,"object")&&!is(points,"array")){attr=points;}else if(points!=null){attr={points:points};}
return this.el("polyline",attr);};proto.polygon=function(points){if(arguments.length>1){points=Array.prototype.slice.call(arguments,0);}
var attr={};if(is(points,"object")&&!is(points,"array")){attr=points;}else if(points!=null){attr={points:points};}
return this.el("pn Gstops(){return this.selectAll("stop");}
function GaddStop(color,offset){var stop=$("stop"),attr={offset:+offset+"%"};color=Snap.color(color);attr["stop-color"]=color.hex;if(color.opacity<1){attr["stop-opacity"]=color.opacity;}
$(stop,attr);var stops=this.stops(),inserted;for(var i=0;i<stops.length;i++){var stopOffset=parseFloat(stops[i].attr("offset"));if(stopOffset>offset){this.node.insertBefore(stop,stops[i].node);inserted=true;break;}}
if(!inserted){this.node.appendChild(stop);}
return this;}
function GgetBBox(){if(this.type=="linearGradient"){var x1=$(this.node,"x1")||0,x2=$(this.node,"x2")||1,y1=$(this.node,"y1")||0,y2=$(this.node,"y2")||0;return Snap._.box(x1,y1,math.abs(x2-x1),math.abs(y2-y1));}else{var cx=this.node.cx||.5,cy=this.node.cy||.5,r=this.node.r||0;return Snap._.box(cx-r,cy-r,r*2,r*2);}}
function GsetStops(str){var grad=str,stops=this.stops();if(typeof str=="string"){grad=eve("snap.util.grad.parse",null,"l(0,0,0,1)"+str).firstDefined().stops;}
if(!Snap.is(grad,"array")){return;}
for(var i=0;i<stops.length;i++){if(grad[i]){var color=Snap.color(grad[i].color),attr={"offset":grad[i].offset+"%"};attr["stop-color"]=color.hex;if(color.opacity<1){attr["stop-opacity"]=color.opacity;}
stops[i].attr(attr);}else{stops[i].remove();}}
for(i=stops.length;i<grad.length;i++){this.addStop(grad[i].color,grad[i].offset);}
return this;}
function gradient(defs,str){var grad=eve("snap.util.grad.parse",null,str).firstDefined(),el;if(!grad){return null;}
grad.params.unshift(defs);if(grad.type.toLowerCase()=="l"){el=gradientLinear.apply(0,grad.params);}else{el=gradientRadial.apply(0,grad.params);}
if(grad.type!=grad.type.toLowerCase()){$(el.node,{gradientUnits:"userSpaceOnUse"});}
var stops=grad.stops,len=stops.length;for(var i=0;i<len;i++){var stop=stops[i];el.addStop(stop.color,stop.offset);}
return el;}
function gradientLinear(defs,x1,y1,x2,y2){var el=Snap._.make("linearGradient",defs);el.stops=Gstops;el.addStop=GaddStop;el.getBBox=GgetBBox;el.setStops=GsetStops;if(x1!=null){$(el.node,{x1:x1,y1:y1,x2:x2,y2:y2});}
return el;}
function gradientRadial(defs,cx,cy,r,fx,fy){var el=Snap._.make("radialGradient",defs);el.stops=Gstops;el.addStop=GaddStop;el.getBBox=GgetBBox;if(cx!=null){$(el.node,{cx:cx,cy:cy,r:r});}
if(fx!=null&&fy!=null){$(el.node,{tion(str){return gradrn gradientLinear(thi gradientRadial(this.defs,cx,cy,r,fx,fy);};proto.toString=function(){var doc=this.node.ownerDocument,f=doc.createDocumentFragment(),d=doc.createElement("div"),svg=this.node.cloneNode(true),res;f.appendChild(d);d.appendChild(svg);Snap._.$(svg,{xmlns:"http://www.w3.org/2000/svg"});res=d.innerHTML;f.removeChild(f.firstChild);return res;};proto.toDataURL=function(){if(window&&window.btoa){return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)));}};proto.clear=function(){var node=this.node.firstChild,next;while(node){next=node.nextSibling;if(node.tagName!="defs"){node.parentNode.removeChild(node);}else{proto.clear.call({node:node});}
node=next;}};}());});Snap.plugin(function(Snap,Element,Paper,glob){var elproto=Element.prototype,is=Snap.is,clone=Snap._.clone,has="hasOwnProperty",p2s=/,?([a-z]),?/gi,toFloat=parseFloat,math=Math,PI=math.PI,mmin=math.min,mmax=math.max,pow=math.pow,abs=math.abs;function paths(ps){var p=paths.ps=paths.ps||{};if(p[ps]){p[ps].sleep=100;}else{p[ps]={sleep:100};}
setTimeout(function(){for(var key in p)if(p[has](key)&&key!=ps){p[key].sleep--;!p[key].sleep&&delete p[key];}});return p[ps];}
function box(x,y,width,height){if(x==null){x=y=width=height=0;}
if(y==null){y=x.y;width=x.width;height=x.height;x=x.x;}
return{x:x,y:y,width:width,w:width,height:height,h:height,x2:x+width,y2:y+height,cx:x+width/2,cy:y+height/2,r1:math.min(width,height)/2,r2:math.max(width,height)/2,r0:math.sqrt(width*width+height*height)/2,path:rectPath(x,y,width,hArray);res.toString=toString;return res;}
function getPointAtSegmentLength(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){if(length==null){return bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y);}else{return findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTotLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length));}}
function O(val){return+(+val).toFixed(3);}
return Snap._.cacher(function(path,length,onlystart){if(path instanceof Element){path=path.attr("d");}
path=path2curve(path);var x,y,p,l,sp="",subpaths={},point,len=0;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=+p[1];y=+p[2];}else{l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);if(len+l>length){if(subpath&&!subpaths.start){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);sp+=["C"+O(point.start.x),O(point.start.y),O(point.m.x),O(point.m.y),O(point.x),O(point.y)];if(onlystart){return sp;}
subpaths.start=sp;sp=["M"+O(point.x),O(point.y)+"C"+O(point.n.x),O(point.n.y),O(point.end.x),O(point.end.y),O(p[5]),O(p[6])].join();len+=l;x=+p[5];y=+p[6];continue;}
if(!istotal&&!subpath){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);return point;}}
len+=l;x=+p[5];y=+p[6];}
sp+=p.shift()+p;}
subpaths.end=sp;point=istotal?len:subpath?subpaths:findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1);return point;},null,Snap._.clone);}
var getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);function findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+t12*3*t*c1x+t1*3*t*t*c2x+t3*p2x,y=t13*p1y+t12*3*t*c1y+t1*3*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=90-math.atan2(mx-nx,my-ny)*180/PI;return{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha};}
function bezierBBox(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){if(!Snap.is(p1x,"array")){p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y];}
var bbox=curveDim.apply(null,p1x);return box(bbox.min.x,bbox.min.y,bbox.width&&y>=bbox.y&&y<=bbox.y+bbox.height;}
function isBBoxIntersect(bbox1,bbox2){bbox1=box(bbox1);bbox2=box(bbox2);return isPointInsideBBox(bbox2,bbox1.x,bbox1.y)||isPointInsideBBox(bbox2,bbox1.x2,bbox1.y)||isPointInsideBBox(bbox2,bbox1.x,bbox1.y2)||isPointInsideBBox(bbox2,bbox1.x2,bbox1.y2)||isPointInsideBBox(bbox1,bbox2.x,bbox2.y)||isPointInsideBBox(bbox1,bbox2.x2,bbox2.y)||isPointInsideBBox(bbox1,bbox2.x,bbox2.y2)||isPointInsideBBox(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbot1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2;}
function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){if(z==null){z=1;}
z=z>1?1:z<0?0:z;var z2=z/2,n=12,Tvalues=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Cvalues=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],sum=0;for(var i=0;i<n;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb);}
return z2*sum;}
function getTotLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll){return;}
var t=1,step=t/2,t2=t-step,l,e=.01;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);while(abs(l-ll)>e){step/=2;t2+=(l<ll?1:-1)*step;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);}
return t2;}
function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4)){return;}
var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(!denominator){return;}
var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)){return;}
return{x:px,y:py};}
function inter(bez1,bez2){return interHelper(bez1,bez2);}
function interCount(bez1,bez2){return interHelper(bez1,bez2,1);}
function interHelper(bez1,bez2,justCount){var bbox1=bezierBBox(bez1),bbox2=bezierBBox(bez2);if(!isBBoxIntersect(bbox1,bbox2)){return justCount?0:[];}
var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=~~(l1/8),n2=~~(l2/8),dots1=[],dots2=[],xy={},res=justCount?0:[];for(var i=0;i<n1+1;i++){var p=findDotsAtSegment.apply(0,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1});}
for(i=0;i<n2+1;i++){p=findDotsAtSegment.apply(0,bez2.concat(i/n2));dots2.push({x:p.x,y:p.y,t:i/n2});}
for(i=0;i<n1;i++){for(var j=0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<.001?"y":"x",cj=abs(dj1.x-dj.x)<.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4)){continue;}
xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);if(t1>=0&&t1<=1&&t2>=0&&t2<=1){if(justCount){res++;}else{res.push({x:is2){return interPathHelper(path1,path2,1);}
function interPathHelper(path1,path2,justCount){path1=path2curve(path1);path2=path2curve(path2);var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[];for(var i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if(pi[0]=="M"){x1=x1m=pi[1];y1=y1m=pi[2];}else{if(pi[0]=="C"){bez1=[x1,y1].concat(pi.slice(1));x1=bez1[6];y1=bez1[7];}else{bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m];x1=x1m;y1=y1m;}
for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if(pj[0]=="M"){x2=x2m=pj[1];y2=y2m=pj[2];}else{if(pj[0]=="C"){bez2=[x2,y2].concat(pj.slice(1));x2=bez2[6];y2=bez2[7];}else{bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m];x2=x2m;y2=y2m;}
var intr=interHelper(bez1,bez2,justCount);if(justCount){res+=intr;}else{for(var k=0,kk=intr.length;k<kk;k++){intr[k].segment1=i;intr[k].segment2=j;intr[k].bez1=bez1;intr[k].bez2=bez2ath,[["M",x,y],["H",bbox.x2+10]],1)%2==1;}
function pathBBox(path){var pth=paths(path);if(pth.bbox){return clone(pth.bbox);}
if(!path){return box();}
path=path2curve(path);var x=0,y=0,X=[],Y=[],p;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=p[1];y=p[2];X.push(x);Y.push(y);}else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X.concat(dim.min.x,dim.max.x);Y=Y.concat(dim.min.y,dim.max.y);x=p[5];y=p[6];}}
var xmin=mmin.apply(0,X),ymin=mmin.apply(0,Y),xmax=mmax.apply(0,X),ymax=mmax.apply(0,Y),bb=box(xmin,ymin,xmax-xmin,ymax-ymin);pth.bbox=clone(bb);return bb;}
function rectPath(x,y,w,h,r){if(r){return[["M",+x+ +r,y],["l",w-r*2,0],["a",r,r,0,0,1,r,r],["l",0,h-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-w,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-h],["a",r,r,0,0,1,r,-r],["z"]];}
var res=[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]];res.toString=toString;return res;}
function ellipsePath(x,y,rx,ry,a){if(a==null&&ry==null){ry=rx;}
x=+x;y=+y;rx=+rx;ry=+ry;if(a!=null){var rad=Math.PI/180,x1=x+rx*Math.cos(-ry*rad),x2=x+rx*Math.cos(-a*rad),y1=y+rx*Math.sin(-ry*rad),y2=y+rx*Math.sin(-a*rad),res=[["M",x1,y1],["A",rx,rx,0,+(a-ry>180),0,x2,y2]];}else{res=[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]];}
res.toString=toString;return respath:futurn ellipsePath(attr.cx,attr.cy,attr.r);},ellipse:function(el){var attr=unit2px(el);return ellipsePath(att,attr.r.x||tr("y1")|functiontion(eth(bbox.x,bbox.y,bbox.width,bbox.height);}};function pathToRelative(pathArray){var pth=paths(pathArray),lowerCase=String.prototype.toLowerCase;if(pth.rel){return pathClone(pth.rel);}
if(!Snap.is(pathArray,"array")||!Snap.is(pathArray&&pathArray[0],"array")){pathArray=Snap.parsePathString(pathArray);}
var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=pathArray[0][1];y=pathArray[0][2];mx=x;my=y;start++;res.push(["M",x,y]);}
for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0])){r[0]=lowerCase.call(pa[0]);switch(r[0]){case"a":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]-x).toFixed(3);r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1];my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++){r[j]=+(pa[j]-(j%2?x:y)).toFixed(3);}}}else{r=res[i]=[];if(pa[0]=="m"){mx=pa[1]+x;my=pa[2]+y;}
for(var k=0,kk=pa.length;k<kk;k++){res[i][k]=pa[k];}}
var len=res[i].length;switch(res[i][0]){case"z":x=mx;y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2];y+=+res[i][len-1];}}
res.toString=toString;pth.rel=pathClone(res);return res;}
function pathToAbsolute(pathArray){var pth=paths(pathArray);if(pth.abs){return pathClone(pth.abs);}
if(!is(pathArray,"array")||!is(pathArray&&pathArray[0],"array")){pathArray=Snap.parsePathString(pathArray);}
if(!pathArray||!pathArray.length){return[["M",0,0]];}
var res=[],x=0,y=0,mx=0,my=0,start=0,pa0;if(pathArray[0][0]=="M"){x=+pathArray[0][1];y=+pathArray[0][2];mx=x;my=y;start++;res[0]=["M",x,y];}
var crz=pathArray.length==3&&pathArray[0][0]=="M"&&pathArray[1][0].toUpperCase()=="R"&&pathArray[2][0].toUpperCase()=="Z";for(var r,pa,i=start,ii=pathArray.length;i<ii;i++){res.push(r=[]);pa=pathArray[i];pa0=pa[0];if(pa0!=pa0.toUpperCase()){r[0]=pa0.toUpperCase();switch(r[0]){case"A":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+pa[6]+x;r[7]=+pa[7]+y;break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":var dots=[x,y].concat(pa.slice(1));for(var j=2,jj=dots.length;j<jj;j++){dots[j]=+dots[j]+x;dots[++j]=+dots[j]+y;}
res.pop();res=res.concat(catmullRom2bezier(dots,crz));break;case"O":res.pop();dots=ellipsePath(x,y,pa[1],pa[2]);dots.push(dots[0]);res=res.concat(dots);break;case"U":res.pop();res=res.concat(ellipsePath(x,y,pa[1],pa[2],pa[3]));r=["U"].concat(res[res.length-1].slice(-2));break;case"M":mx=+pa[1]+x;my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++){r[j]=+pa[j]+(j%2?x:y);}}}else if(pa0=="R"){dots=[x,y].concat(pa.slice(1));res.pop();res=res.concat(catmullRom2bezier(dots,crz));r=["R"].concat(pa.slice(-2));}else if(pa0=="O"){res.pop();dots=ellipsePath(x,y,pa[1],pa[2]);dots.push(dots[0]);res=res.concat(dots);}else if(pa0=="U"){res.pop();res=res.concat(ellipsePath(x,y,pa[1],pa[2],pa[3]));r=["U"].concat(res[res.length-1].slice(-2));}else{for(var k=0,kk=pa.length;k<kk;k++){r[k]=pa[k];}}
pa0=pa0.toUpperCase();if(pa0!="O"){switch(r[0]){case"Z":x=+mx;y=+my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2];my=r[r.length-1];default:x=r[r.length-2];y=r[r.length-1];}}}
res.toString=to23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2];}
function a2c(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var _120=PI*120/180,rad=PI/180*sin(rad)+y*math.cos(rad);return{x:X,y:Y};});if(!rx||!ry){return[x1,y1,x2,y2,x2,y2];}
if(!recursive){xy=rotate(x1,y1,-rad);x1=xy.x;y1=xy.y;xy=rotate(x2,y2,-rad);x2=xy.x;y2=xy.y;var cos=math.cos(PI/180*angle),sin=math.sin(PI/180*angle),x=(x1-x2)/2,y=(y1-y2)/2;var h=x*x/(rx*rx)+y*y/(ry*ry);if(h>1){h=math.sqrt(h);rx=h*rx;ry=h*ry;}
var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));f1=x1<cx?PI-f1:f1;f2=x2<cx?PI-f2:f2;f1<0&&(f1=PI*2+f1);f2<0&&(f2=PI*2+f2);if(sweep_flag&&f1>f2){f1=f1-PI*2;}
if(!sweep_flag&&f2>f1){f2=f2-PI*2;}}else{f1=recursive[0];f2=recursive[1];cx=recursive[2];cy=recursive[3];}
var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1);x2=cx+rx*math.cos(f2);y2=cy+ry*math.sin(f2);res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy]);}
df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];m2[0]=2*m1[0]-m2[0];m2[1]=2*m1[1]-m2[1];if(recursive){return[m2,m3,m4].concat(res);}else{res=[m2,m3,m4].concat(res).join().split(",");var newres=[];for(var i=0,ii=res.length;i<ii;i++){newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;}
return newres;}}
function findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+pow(t1,2)*3*t*c1x+t1*3*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+pow(t1,2)*3*t*c1y+t1*3*t*t*c2y+pow(t,3)*p2y};}
function curveDim(x0,y0,x1,y1,x2,y2,x3,y3){var tvalues=[],bounds=[[],[]],a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(var i=0;i<2;++i){if(i==0){b=6*x0-12*x1+6*x2;a=-3*x0+9*x1-9*x2+3*x3;c=3*x1-3*x0;}else{b=6*y0-12*y1+6*y2;a=-3*y0+9*y1-9*y2+3*y3;c=3*y1-3*y0;}
if(abs(a)<1e-12){if(abs(b)<1e-12){continue;}
t=-c/b;if(0<t&&t<1){tvalues.push(t);}
continue;}
b2ac=b*b-4*c*a;sqrtb2ac=math.sqrt(b2ac);if(b2ac<0){continue;}
t1=(-b+sqrtb2ac)/(2*a);if(0<t1&&t1<1){tvalues.push(t1);}
t2=(-b-sqrtb2ac)/(2*a);if(0<t2&&t2<1){tvalues.push(t2);}}
var x,y,j=tvalues.length,jlen=j,mt;while(j--){t=tvalues[j];mt=1-t;bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3;bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;}
bounds[0][jlen]=x0;bounds[1][jlen]=y0;bounds[0][jlen+1]=x3;bounds[1][jlen+1]=y3;bounds[0].length=bounds[1].length=jlen+2;return{min:{x:mmin.apply(0,bounds[0]),y:mmin.apply(0,bounds[1])},max:{x:mmax.apply(0,bounds[0]),y:mmax.apply(0,bounds[1])}};}
function path2curve(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve){return pathClone(pth.curve);}
var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d,pcom){var nx,ny;if(!path){return["C",d.x,d.y,d.x,d.y,d.x,d.y];}
!(path[0]in{T:1,Q:1})&&(d.qx=d.qy=null);switch(path[0]){case"M":d.X=path[1];d.Y=path[2];break;case"A":path=["C"].concat(a2c.apply(0,[d.x,d.y].concat(path.slice(1))));break;case"S":if(pcom=="C"||pcom=="S"){nx=d.x*2-d.bx;ny=d.y*2-d.by;}
else{nx=d.x;ny=d.y;}
path=["C",nx,ny].concat(path.slice(1));break;case"T":if(pcom=="Q"||pcom=="T"){d.qx=d.x*2-d.qx;d.qy=d.y*2-d.qy;}
else{d.qx=d.x;d.qy=d.y;}
path=["C"].concat(q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1];d.qy=path[2];path=["C"].concat(q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"].concat(l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"].concat(l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"].concat(l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"].concat(l2c(d.x,d.y,d.X,d.Y));break;}
return path;},fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();var pi=pp[i];while(pi.length){pcoms1[i]="A";p2&&(pcoms2[i]="A");pp.splice(i++,0,["C"].concat(pi.splice(0,6)));}
pp.splice(i,1);][2];ii=mmax(p.length,p2&&p2.length||0);}},pcoms1=[],pcoms2=[],pfirst="",pcom="";for(var i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]&&(pfirst=p[i][0]);if(pfirst!="C")
{pcoms1[i]=pfirst;i&&(pcom=pcoms1[i-1]);}
p[i]=processPath(p[i],attrs,pcom);if(pcoms1[i]!="A"&&pfirst=="C")pcoms1[i]="C";fixArc(p,i);if(p2){p2[i]&&(pfirst=p2[i][0]);if(pfirst!="C"){pcoms2[i]=pfirst;i&&(pcom=pcoms2[i-1]);}
p2[i]=processPath(p2[i],attrs2,pcom);if(pcoms2[i]!="A"&&pfirst=="C"){pcoms2[i]="C";}
fixArc(p2,i);}
fixM(p,p2,attrs,attrs2,i);fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2];attrs.y=seg[seglen-1];attrs.bx=toFloat(seg[seglen-4])||attrs.x;attrs.by=toFloat(seg[seglen-3])||attrs.y;attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x);attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y);attrs2.x=p2&&seg2[seg2len-2];attrs2.y=p2&&seg2[seg2len-1];}
if(!p2){pth.curve=pathClone(p);}
return p2?[p,p2]:p;}
function mapPath(path,matrix){if(!matrix){return path;}
var x,y,i,j,ii,jj,pathi;path=path2curve(path);for(i=0,ii=path.length;i<ii;i++){pathi=path[i];for(j=1,jj=pathi.length;j<jj;j+=2){x=matrix.x(pathi[j],pathi[j+1]);y=matrix.y(pathi[j],pathi[j+1]);pathi[j]=x;pathi[j+1]=y;}}
return path;}
function catmullRom2bezier(crp,z){var d=[];for(var i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];if(z){if(!i){p[0]={x:+crp[iLen-2],y:+crp[iLen-1]};}else if(iLen-4==i){p[3]={x:+crp[0],y:+crp[1]};}else if(iLen-2==i){p[2]={x:+crp[0],y:+crp[1]};p[3]={x:+crp[2],y:+crp[3]};}}else{if(iLen-4==i){p[3]=p[2];}else if(!i){p[0]={x:+crp[i],y:+crp[i+1]};}}
d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y]);}
return d;}
Snap.path=paths;Snap.path.getTotalLength=getTotalLength;Snap.path.getPointAtLength=getPointAtLength;Snap.path.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<1e-6){return getSubpathsAtLength(path,from).end;}
var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a;};elproto.getTotalLength=function(){if(this.node.getTotalLength){return this.node.ge getPointAtLength(t.path.getSubpath(this.attr("d"),from,to);};Snap._.box=box;Snap.path.findDotsAtSegment=findDotsAtSegment;Snap.path.bezierBBox=bezierBBox;Snap.path.isPointInsideBBox=isPointInsideBBox;Snap.closest=function(x,y,X,Y){var r=100,b=box(x-r/2,y-r/2,r,r)].y};}:function(i){return{x:X[i],y:Y[i]};},found=0;while(r<=1e6&&!found){for(var i=0,ii=X.length;i<ii;i++){var xy=getter(i);if(isPointInsideBBox(b,xy.x,xy.y)){found++;inside.push(xy);break;}}
if(!found){r*=2;b=box(x-r/2,y-r/2,r,r)}}
if(r==1e6){return;}
var len=Infinity,res;for(i=0,ii=inside.length;i<ii;i++){var l=Snap.len(x,y,inside[i].x,inside[i].y);if(len>l){len=l;inside[i].len=l;res=inside[i];}}
return res;};Snap.path.isBBoxIntersect=isBBoxIntersect;Snap.path.intersection=pathIntersection;Snap.path.intersectionNumber=pathIntersectionNumber;Snap.path.isPointInside=isPointInsidePath;Snap.path.getBBox=pathBBox;Snap.path.get=getPath;Snap.path.toRelative=pathToRelative;Snap.path.toAbsolute=pathToAbsolute;Snap.path.toCubic=path2curve;Snap.path.map=mapPath;Snap.path.toString=toString;Snap.path.clone=pathClone;});Snap.plugin(function(Snap,Element,Paper,glob){var mmax=Math.max,mmin=Math.min;var Set=function(items){this.items=[];this.bindings={};this.length=0;this.type="set";if(items){for(var i=0,ii=items.length;i<ii;i++){if(items[i]){this[this.items.length]=this.items[this.items.length]=items[i];this.length++;}}}},setproto=Set.prototype;setproto.push=function(){var item,len;for(var i=0,ii=arguments.length;i<ii;i++){item=arguments[i];if(item){len=this.items.length;this[len]=this.items[len]=item;ts[this.length--];return this.items.pop();};setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++){if(callback.call(thisArg,this.items[i],i)===false){return this;}}
return this;};setproto.animate=function(attrs,ms,easing,callback){if(typeof easing=="function"&&!easing.length){callback=easing;easing=mina.linear;}
if(attrs instanceof Snap._.Animation){callback=attrs.callback;easing=attrs.easing;ms=easing.dur;attrs=attrs.attr;}
var args=arguments;if(Snap.is(attrs,"array")&&Snap.is(args[args.length-1],"array")){var each=true;}
var begin,handler=function(){if(begin){this.b=begin;}else{begin=this.b;}},cb=0,set=this,callbacker=callback&&function(){if(++cb==set.length){callback.call(this);}};return this.forEach(function(el,i){eve.once("snap.animcreated."+el.id,handler);if(each){args[i]&&el.animate.apply(el,args[i]);}else{el.animate(attrs,ms,easing,callbacker);}});};setproto.remove=function(){while(this.length){this.pop().remove();}
return this;};setproto.bind=function(attr,a,b){var data={};if(typeof a=="function"){this.bindings[attr]=a;}]=function(v){data[aname]=v;a.attr(data);};}
return this;};setproto.attr=function(value){var unbound={};for(var k in value){if(this.bindings[k]){this.bindings[k](value[k]);}else{unbound[k]=value[k];}}
for(var i=0,ii=this.items.length;i<ii;i++){this.items[i].attr(unbound);}
return this;};setproto.clear=function(){while(this.length){this.pop();}};setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index;count=mmax(0,mmin(this.length-index,count));var tail=[],todel=[],args=[],i;for(i=2;i<arguments.length;i++){args.push(arguments[i]);}
for(i=0;i<count;i++){todel.push(this[index+i]);}
for(;i<this.length-index;i++){tail.push(this[index+i]);}
var arglen=args.length;for(i=0;i<arglen+tail.length;i++){this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen];}
i=this.items.length=this.length-=count-arglen;while(this[i]){delete this[i++];}
return new Set(todel);};setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++)if(this[i]==el){this.splice(i,1);return s.items[i].insertAfter(el);}
return this;};setproto.getBBox=function(){var x=[],y=[],x2=[],y2=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x);y.push(box.y);x2.push(box.x+box.width);y2.push(box.y+box.height);}
x=mmin.apply(0,x);y=mmin.apply(0,y);x2=mmax.apply(0,x2);y2=mmax.apply(0,y2);return{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y,cx:x+(x2-x)/2,cy:y+(y2-y)/2};};setproto.clone=function(s){s=new Set;for(var i=0,ii=this.items.length;i<ii;i++){s.push(this.items[i].clone());}
return s;};setproto.toString=function(){return"Snap\u2018s set";};setproto.type="set";Snap.Set=Set;Snap.set=function(){var set=new Set;if(arguments.length){set.push.apply(set,Array.prototype.slice.call(arguments,0));}
return set;};});Snap.plugin(function(Snap,Element,Paper,glob){var names={},reUnit=/[%a-z]+$/i,Str=String;names.stroke=names.fill="colour";function getEmpty(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":if(item.length==4){return[l,0,item[2],item[3]];}else{return[l,0];}
case"s":if(item.length==5){return[l,1,1,item[3],item[4]];}else if(item.length==3){return[l,1,1];}else{return[l,1];}}}
function equaliseTransform(t1,t2,getBBox){t1=t1||new Snap.Matrix;t2=t2||new Snap.Matrix;t1=Snap.parseTransformString(t1.toTransformString())||[];t2=Snap.parseTransformString(t2.toTransformString())||[];var maxlength=Math.max(t1.length,t2.length),from=[],to=[],i=0,j,jj,tt1,tt2;for(;i<maxlength;i++){tt1=t1[i]||getEmpty(t2[i]);tt2=t2[i]||getEmpty(tt1);if(tt1[0]!=tt2[0]||tt1[0].toLowerCase()=="r"&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3])||tt1[0].toLowerCase()=="s"&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4])){t1=Snap._.transform2matrix(t1,getBBox());t2=Snap._.transform2matrix(t2,getBBox());from=[["m",t1.a,t1.b,t1.c,t1.d,t1.e,t1.f]];to=[["m",t2.a,t2.b,t2.c,t2.d,t2.e,t2.f]];break;}
from[i]=[];to[i]=[];for(j=0,jj=Math.max(tt1.length,tt2.length);j<jj;j++){j in tt1&&(from[i][j]=tt1[j]);j in tt2&&(to[i][j]=tt2[j]);}}
return{from:path2array(rn Snap.rgb(clr[0],clr[1],clr[2],clr[3]);}
function getPath(path){var k=0,i,ii,j,jj,out,a,b=[];for(i=0,ii=path.length;i<ii;i++){out="[";a=['"'+path[i][0]+'"'];for(j=1,jj=path[i].length;j<jj;j++){a[j]="val["+k++ +"]";}
out+=a+"]";b[i]=out;}
return Function("val","return Snap.path.toString.call(["+b+"])");}
function path2array(path){var out=[];for(var i=0,ii=path.length;i<ii;i++){for(var j=1,jj=path[i].length;j<jjtion isNumeric(obj){return isFinite(obj);}
function arrayEqual(arr1,arr2){if(!Snap.is(arr1,"array")||!Snap.is(arr2,"array")){return false;}
return arr1.toString()=.util.equal",this,name,b).firstDefined();};eve.on("snap.util.equal",function(name,b){var A,B,a=Str(this.attr(name)||""),el=this;if(names[name]=="colour"){A=Snap.color(a);B=Snap.color(b);return{from:[A.r,A.g,A.b,A.opacity],to:[B.r,B.g,B.b,B.opacity],f:getColour};}
if(name=="viewBox"){A=this.attr(name).vb.split(" ").map(Number);B=b.split(" ").map(Number);return{from:A,to:B,f:getViewBox};}
if(name=="transform"||name=="gradientTransform"||name=="patternTransform"){if(typeof b=="string"){b=Str(b).replace(/\.{3}|\u2026/g,a);}
a=this.matrix;if(!Snap._.rgTransform.test(b)){b=Snap._.transform2matrix(Snap._.svgTransform2string(b),this.getBBox());}else{b=Snap._.transform2matrix(b,thisform(a,b,function(){return el.getBBox(1);});}
if(name=="d"||name=="path"){A=Snap.path.toCubic(a,b);return{from:path2array(A[0]),to:path2array(A[1]),f:getPath(A[0])};}
if(name=="points"){A=Str(a).split(Snap._.separator);B=Str(b).split(Snap._.separator);return{from:A,to:B,f:function(val){return val;}};}
if(isNumeric(a)&&isNumeric(b)){return{from:parseFloat(a),to:parseFloat(b),f:getNumber};}
var aUnit=a.match(reUnit),bUnit=Str(b).match(reUnit);if(aUnit&&arrayEqual(aUnit,bUnit)){return{from:parseFloat(a),to:parseFloat(b),f:getUnit(aUnit)};}else{return{from:this.asPX(name),to:this.asPX(name,b),f:getNumber};}});});Snap.plugin(function(Snap,Element,Paper,glob){var elproto=Element.prototype,has="hasOwnProperty",supportsTouch="createTouch"in glob.doc,events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},getScroll=function(xy,el){var name=xy=="y"?"scrollTop":"scrollLeft",doc=el&&el.node?el.node.ownerDocument:glob.doc;return doc[name in doc.documentElement?"documentElement":"body"][name];},preventDefault=function(){this.returnValue=false;},preventTouch=function(){return this.origingation=function(){this.cancelBubble=true;},stopTouch=function(){return this.originalEvent.stopPropagation();},addEvent=function(obj,type,fn,element){var realName=supportsTouch&&touchMap[type]?touchMap[type]:type,f=function(e){var scrollY=getScroll("y",element),scrollX=getScroll("x",element);if(supportsTouch&&touchMap[has](type)){for(var i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++){if(e.targetTouches[i].target==obj||obj.contains(e.targetTouches[i].target)){var olde=e;e=e.targetTouches[i];e.originalEvent=olde;e.preventDefault=preventTouch;e.stopPropagation=stopTouch;break;}}}
var x=e.clientX+scrollX,y=e.clientY+scrollY;return fn.call(element,e,x,y);};if(type!==realName){obj.addEventListener(type,f,false);}
obj.addEventListener(realName,f,false);return function(){if(type!==realName){obj.removeEventListener(type,f,false);}
obj.removeEventListener(realName,f,false);return true;};},drag=[],dragMove=function(e){var x=e.clientX,y=e.clientY,scrollY=getScroll("y"),scrollX=getScroll("x"),dragi,j=drag.length;while(j--){dragi=drag[j];if(supportsTouch){var i=e.touches&&e.touches.length,touch;while(i--){touch=e.touches[i];if(touch.identifier==dragi.el._drag.id||dragi.el.node.contains(touch.target)){x=touch.clientX;y=touch.clientY;(e.originalEvent?e.originalEvent:e).preventDefault();break;}}}else{e.preventDefault();}
var node=dragi.el.node,o,next=node.nextSibling,parent=node.parentNode,display=node.style.display;x+=scrollX;y+=scrollY;eve("snap.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e);}},dragUp=function(e){Snap.unmousemove(dragMove).unmouseup(dragUp);var i=drag.length,dragi;while(i--){dragi=drag[i];dragi.el._drag={};eve("snap.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e);eve.off("snap.drag.*."+dragi.el.id);}
drag=[];};for(var i=events.length;i--;){(function(eventName){Snap[eventName]=elproto[eventName]=function(fn,scope){if(Snap.is(fn,"function")){this.events=this.events||[];this.events.push({name:eventName,f:fn,unbind:addEvent(this.node||document,eventName,fn,scope||this)});}else{for(var i=0,ii=this.events.length;i<ii;i++)if(this.events[i].name==eventName){try{this.events[i].f.call(this);}catch(e){}}}
return this;};Snap["un"+eventName]=elproto["un"+eventName]=function(fn){var events=this.events||[],l=events.length;while(l--)if(events[l].name==eventName&&(events[l].f==fn||!fn)){events[l].unbind();events.splice(l,1);!events.length&&delete this.events;return this;}
r_in).mouseout(f_this.unmouseover(f_in).unmouseout(f_out);};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){var el=this;if(!argumentn(){origTransform=this.transform().local;});}
function start(e,x,y){(e.originalEvent||e).preventDefault();el._drag.x=x;el._drag.y=y;el._drag.id=e.identifier;!drag.length&&Snap.mousemove(dragMove).mouseup(dragUp);drag.push({el:el,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope});onstart&&eve.on("snap.drag.start."+el.id,onstart);onmove&&eve.on("snap.drag.move."+el.id,onmove);onend&&eve.on("snap.drag.end."+el.id,onend);eve("snap.drag.start."+,y){eve("snap.draginit."+el.id,el,e,x,y);}
eve.on("snap.draginit."+el.id,start);el._drag={};draggable.push({el:el,start:start,init:init});el.mousedown(init);return el;};elproto.undrag=function(){var i=draggable.length;while(i--)if(draggable[i].el==this){this.unmousedown(draggable[i].init);draggable.splice(i,1);eve.unbind("snap.drag.*."+this.id);eve.unbind("snap.draginit."+this.id);}
!draggable.length&&Snap.unmousemove(dragMove).unmouseup(dragUp);return this;};});Snap.plugin(function(Snap,Element,Paper,glob){var elproto=Element.prototype,pproto=Paper.prototype,rgurl=/^\s*url\((.+)\)/,Str=String,$=Snap._.$;Snap.filter={};pproto.filter=function(filstr){var paper=this;if(paper.type!="svg"){paper=paper.paper;}
var f=Snap.parse(Str(filstr)),id=Snap._.id(),width=paper.node.offsetWidth,height=paper.node.offsetHeight,filter=$("filter");$(filter,{id:id,filterUnits:"userSpaceOnUse"});filter.appendChild(f.node);paper.defs.appendChild(filter);return new Element(frl);return match&&Snap.select(match[1]);}});eve.on("snap.util.attr.filter",function(value){if(value instanceof Element&&value.type=="filter"){eve.stop();var id=value.node.id;if(!id){$(value.node,{id:value.id});id=value.id;}
$(this.node,{filter:Snap.url(id)});}
if(!value||value=="none"){eve.stop();this.node.removeAttribute("filter");}});Snap.filter.blur=function(x,y){if(x==null){x=2;}
var def=y==null?x:[x,y];return Snap.format('\<feGaussianBlur stdDeviation="{def}"/>',{def:def});};Snap.filter.blur.toString=function(){return this();};Snap.filter.shadow=function(dx,dy,blur,color,opacity){if(opacity==null){if(color==null){opacity=blur;blur=4;color="#000";}else{opacity=color;color=blur;blur=4;}}
if(blur==null){blur=4;}
if(opacity==null){opacity=1;}
if(dx==null){dx=0;dy=2;}
if(dy==null){dy=dx;}
color=Snap.color(color);return Snap.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:color,dx:dx,dy:dy,blur:blur,opacity:opacity});};Snap.filter.shadow.toString=function(){return this();};Snap.filter.grayscale=function(amount){if(amount==null){amount=1;}
return Snap.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874*(1-amount),b:0.7152-0.7152*(1-amount),c:0.0722-0.0722*(1-amount),d:0.2126-0.2126*(1-amount),e:0.7152+0.2848*(1-amount),f:0.0722-0.0722*(1-amount),g:0.2126-0.2126*(1-amount),h:0.0722+0.9278*(1-amount)});};Snap.filter.grayscale.toString=function(){return this();};Snap.filter.sepia=function(amount){if(amount==null){amount=1;}
return Snap.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607*(1-amount),b:0.769-0.769*(1-amount),c:0.189-0.189*(1-amount),d:0.349-0.349*(1-amount),e:0.686+0.314*(1-amount),f:0.168-0.168*(1-amount),g:0.272-0.272*(1-amount),h:0.534-0.534*(1-amount),i:0.131+0.869*(1-amount)});};Snap.filter.sepia.toString=function(){return this();};Snap.filter.saturate=function(amount){if(amount==null){amount=1;}
return Snap.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-amount});};Snap.filter.saturate.toString=function(){return this();};Snap.filter.hueRotate=function(angle){angle=angle||0;return Snap.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:angle});};Snap.filter.hueRotate.toString=function(){return this();};Snap.filter.invert=function(amount){if(amount==null){amount=1;}
return Snap.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:amount,amount2:1-amount});};Snap.filter.invert.toString=function(){return this();};Snap.filter.brightness=function(amount){if(amount==null){amount=1;}
return Snap.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:amount});};Snap.filter.brightness.toString=function(){return this();};Snap.filter.contrast=function(amount){if(amount==null){amount=1;}
return Snap.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:amount,amount2:.5-ntrast.toString=function(){return this();};});Snap.plugin(function(Snap,Element,Paper,glob,Fragment){var box=Snap._.box,is=Snap.is,function(){return"T"+this.dx+","+this.dy;};Element.prototype.getAlign=function(el,way){if(way==null&&is(el,"string")){way=el;el=null;}
el=el||this.paper;var bx=el.getBBox?el.getBBox():box(el),bb=this.getBBox(),out={};way=way&&way.match(firstLetter);way=way?way[1].toLowerCase():"c";switch(way){case"t":out.dx=0;out.dy=bx.y-bb.y;break;case"b":out.dx=0;out.dy=bx.y2-bb.y2;break;case"m":out.dx=0;out.dy=bx.cy-bb.cy;break;case"l":out.dx=bx.x-bb.x;out.dy=0;break;case"r":out.dx=bx.x2-bb.x2;out.dy=0;break;default:out.dx=bx.cx-bb.cx;out.dy=0;break;}
out.toString=toSs.transform("..."+this.getAlign(el,way));};});Snap.plugin(function(Snap,Element,Paper,glob){var red="#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000",pink="#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162",purple="#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF",deeppurple="#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA",indigo="#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE",blue="#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF",lightblue="#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA",cyan="#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4",teal="#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5",green="#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853",lightgreen="#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17",lime="#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00",yellow="#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600",amber="#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00",orange="#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00",deeporange="#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00",brown="#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723",grey="#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121",bluegrey="#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238";Snap.mui={};Snap.flat={};function saveColor(colors){colors=colors.split(/(?=#)/);var color=new String(colors[5]);color[50]=colors[0];color[100]=colors[1];color[200]=colors[2];color[300]=colors[3];color[400]=colors[4];color[500]=colors[5];color[600]=colors[6];color[700]=colors[7];color[800]=colors[8];color[900]=colors[9];if(colors[10]){color.A100=colors[10];color.A200=colors[11];color.A400=colors[12];color.A700=colors[13];}
return color;}
Snap.mui.red=saveColor(red);Snap.mui.pink=saveColor(pink);Snap.mui.purple=saveColor(purple);Snap.mui.deeppurple=saveColor(deeppurple);Snap.mui.indigo=saveColor(indigo);Snap.mui.blue=saveColor(blue);Snap.mui.lightblue=saveColor(lightblue);Snap.mui.cyan=saveColor(cyan);Snap.mui.teal=saveColor(teal);Snap.mui.green=saveColor(green);Snap.mui.lightgreen=saveColor(lightgreen);Snap.mui.lime=saveColor(lime);Snap.mui.yellow=saveColor(yellow);Snap.mui.amber=saveColor(amber);Snap.mui.orange=saveColor(orange);Snap.mui.deeporange=saveColor(deeporange);Snap.mui.brown=saveColor(brown);Snap.mui.grey=saveColor(grey);Snap.mui.bluegrey=saveColor(bluegrey);Snap.flat.turquoise="#1abc9c";Snap.flat.greensea="#16a085";Snap.flat.sunflower="#f1c40f";Snap.flat.orange="#f39c12";Snap.flat.emerland="#2ecc71";Snap.flat.nephritis="#27ae60";Snap.flat.carrot="#e67e22";Snap.flat.pumpkin="#d35400";Snap.flat.peterriver="#3498db";Snap.flat.belizehole="#2980b9";Snap.flat.alizarin="#e74c3c";Snap.flat.pomegranate="#c0392b";Snap.flat.amethyst="#9b59b6";Snap.flat.wisteria="#8e44ad";Snap.flat.clouds="#ecf0f1";Snap.flat.silver="#bdc3c7";Snap.flat.wetasphalt="#34495e";Snap.flat.midnightblue="#2c3e50";Snap.flat.concrete="#95a5a6";Snap.flat.asbestos="#7f8c8d";Snap.importMUIColors=function(){for(var color in Snap.mui){if(Snap.mui.hasOwnProperty(color)){window[color]=Snap.mui[color];}}};});return Snap;}));;(function($,Modernizr,_){'use strict';$(function(){var STATE_TOP='top',STATE_FIXED='fixed',STATE_BOTTOM='bottom',FILTER_SELECTOR='.js-filters-menu',FOOTER_SELECTOR='.js-footer',TOP_MENU_OFFSET=100,FILTER_OFFSET=147;var $filter=$(FILTER_SELECTOR),$footer=$(FOOTER_SELECTOR),$window=$(window),startClass=$filter.data('stickyStartClass'),progressClass=$filter.data('stickyProgressClass'),finishClass=$filter.data('stickyFinishClass'),currentState,filterHeight,footerHeight;var resize=function(){filterHeight=$filter.height();footerHeight=$footer.height();$window.trigger('scroll');};if($filter.length&&!Modernizr.csspositionsticky){resize();$window.on('resize.sticky',_.debounce(resize,100));$window.on('scroll.sticky',function(){var scrollTop=$(window).scrollTop(),state;if(scrollTop+TOP_MENU_OFFSET<FILTER_OFFSET){state=STATE_TOP;}else if(scrollTop+TOP_MENU_OFFSET+filterHeight>$(document).height()-footerHeight){state=STATE_BOTTOM;}else{state=STATE_FIXED;}
if(state!==currentState){if(state===STATE_TOP){$filter.removeClass(progressClass).removeClass(finishClass).addClass(startClass);}else if(state===STATE_FIXED){$filter.removeClass(startClass).removeClass(finishClass).addClass(progressClass);}else if(state===STATE_BOTTOM){$filter.removeClass(startClass).removeClass(progressClass).addClass(finishClass);}
currentState=state;}}).trigger('scroll');}});})($,Modernizr,_);;var wg_ui={ENDPOINT_RESULT_SUCCESS:{},ENDPOINT_RESULT_FAILURE:{},};(function($){var ASYNC_AUTO_RETRY_MAX=1;var LONG_POLL_AUTO_RETRY_MAX=2;var RETRY_DELAY=3000;wg_ui.redirect=function(url){wg_modal.disableUnloadBlock();if(window.location==url)
window.location.reloadleUnloadBlock();window.location.reload();};wg_ui.getErrorString=function(asyncData,data){var error=(asyncData&&asyncData.errorText)?asyncData.errorText:null;if(!error)
error=(data&&data.errorText)?data.errorText:gettext("Sorry, an unknown error occurred.");return error;};wg_ui.callEndpoint=function(settings){var endpoint=settings.endpoint;var method=settings.method||'POST';var data=settings.data;var success=settings.success;var failure=settings.failure;var complete=settings.complete;var asyncResultEndpoint=settings.asyncResultEndpoint;var accountId=settings.accountId;var asyncResultHandler=settings.asynodal.THROBBER_SELECTOR).find('p').show();};var callFailureOrShowError=function(xhr,data,asyncData){if(failure){failure(data);}else{var errorString;if(xhr&&xhr.status==0)
errorString=gettext("An error occurred while contacting our server.");else if(asyncData||data)
errorString=wg_ui.getErrorString(asyncData,data);wg_errors.showError(errorString);wg_modal.hiunction(data){if(success){suthing=function(){if(complete)
complete();};var asyncRetryCount=0;var result={xhr:null};var doAsync=function(){result.xhr=$.ajax({url:endpoint,method:method,data:data,success:function(data,status,xhr){if(data.result_key){if(!accountId)
console.error("Can't start long poll without accountId");if(!asyncResultEndpoint)
console.error("Can't start long poll without asyncResultEndpoint");showThisMightTakeAWhile();var longPollRetryCount=0;var doLongPoll=function(){result.xhr=$.ajax({url:asyncResultEndpoint,data:{result_key:data.result_key,account_id:accountId},success:function(asyncData,status,xhr){var handlerResult=asyncResultHandler(asyncData);if(handlerResult==wg_ui.ENDPOINT_RESULT_SUCCESS){if(data.redirectSuccessURL){wg_ui.redirect(data.redirectSuccessURL);}else{callSuccessOrDoNothing(asyncData.result);}}else if(handlerResult==wg_ui.ENDPOINT_RESULT_FAILURE){callFailureOrShowError(xhr,data,asyncData);}else{callFailureOrShowError(xhr,{'errorText':handlerResult});}
callCompleteOrDoNothing();},error:function(xhr,status,error){var asyncData=error;try{asyncData=$.parseJSON(xhr.responseText);}catch(ex){console.log("Error asyncData is not JSON");}
if(data.redirectFailureURL){wg_ui.redirect(data.redirectFailureURL);}else{if(longPollRetryCount++<=LONG_POLL_AUTO_RETRY_MAX){setTimeout(doLongPoll,longPollRetryCount*RETRY_DELAY);}else{callFailureOrShowError(xhr,data,asyncData);callCompleteOrDoNothing();}}},complete:function(xhr,status){}});};doLongPoll();}else{if(data.status=="exception"||data.status=="error"){this.error(xhr,"error",null);}else{if(data&&data.redirectURL){wg_ui.redirect(data.redirectURL);}else{callSuccessOrDoNothing(data.result);callCompleteOrDoNothing();}}}},error:function(xhr,status,error){if(!xhr.responseText&&status=="abort")
return;var data=error;try{data=$.parseJSON(xhr.responseText);}catch(ex){console.log("Error data is not JSON");}
if(data&&data.redirectURL){wg_ui.redirect(data.redirectURL);}else if(data&&data.reloadShouldFix){wg_ui.reload();}else{if(data.retryWontfix&&asyncRetryCount++<=ASYNC_AUTO_RETRY_MAX){showThisMightTakeAWhile();setTimeout(doAsync,asyncRetryCount*RETRY_DELAY);}else{callFailureOrShowError(xhr,dahing();}}},complete:function(xhr,status){}})};doAsync();return result;};wg_ui.setTableColumnHover=function(namespace,columnSelector,tableSelector){$(columnSelector).on('mouseenter'+namespace+' mouseleave'+namespace,function(e){wg_ui.setTableColumnHover.addHover($(this),e,tableSelector);});};wg_ui.setTableColumnHover.addHover=function($headerCell,e,tableSelector){var $header=$headerCell.parent();var headerColumn=0;var $headerCells=$header.children('td, th');var headerCell=$headerCell[0];for(var i=0,cell=$headerCells[i];cell!=headerCell;i++,cell=$headerCells[i]){headerColumn+=cell.colSpan||1;}
$(tableSelector+' tr').not($header).each(function(){var $row=$(this);var rowColumn=0;var i;var cell;for(i=0,cell=$row.children()[i];rowColumn<headerColumn;i++,cell=$row.children()[i]){if(!cell)
return;rowColumn+=cell.colSpan;}
var $cells=$();var span=0;while(span<headerCell.colSpan){$cells=$cells.add($row.children('td, th').eq(i));if(!$cells.length)
return;span+=$cells.last()[0].colSpan;i++;}
var hoveredClass=$cells.data('hovered-class');if(e.type==='mouseenter'){$cells.addClass(hoveredClass)}else if(e.type==='mouseleave'){$cells.removeClass(hoveredClass)}});};$.fn.renderListBoxIcon=function(src,alt,extraClassNames){var $iconItem=this.addClass(extraClassNames);if(/\.svg$/.test(src)){$iconItem.addClass('svg-icon svg-icon__list-box js-svg-icon').attr({'data-src':src,'title':alt});}else{$iconItem.attr({'src':src,'alt':alt});}};})(jQuery);;var wg_modal={THROBBER_CLASS:'wg-modal__throbber',THROBBER_SELECTOR:'.wg-modal__throbber',FIXED_CLASS:'wg-modal__fixed',};(function($){var CANCEL_BUTTON_SELECTOR='.js-wg-modal_button__cancel';var DISABLED_BUTTON_CLASS='forms_button__disabled';var MODAL_CLASS='wg-modal';var OUTER_CLASS='wg-modal_outer';var INNER_CLASS='wg-modal_inner';var LAYOUT_SELECTOR='.js-layout';var THROBBER_ATTACHED_CLASS='throbber-attached';var XBOX_RETURN_URL_SELECTOR='.js-xbox-select';var PS4_RETURN_URL_SELECTOR='.js-ps4-select';var PLATFORM_SELECT_TITLE_SELECTOR='.platformselect_block_title';var $body;var $layout;var $window=$(window);$(function(){$body=$('body');$layon gettext("An operation is in progress.")};var disableBodyScroll=function(){if($layout.length>0){var scrollTop=$body.scrollTop();$layout.css({overflow:'hidden'});$layout.scrollTop(scrollTop);$body.css({'overflow-y':'scroll'});}
else
$body.css({overflow:'hidden'});};var enableBodyScroll=function(){if($layout.length>0){var scrollTop=$layout.scrollTop();$layout.css({overflow:'visible'});$body.css({'overflow-y':'auto'});if(scrollTop!=0)
$body.scrollTop(scrollTop);}
else
$body.css({overfwindow.off("beforeunload",confirmUnload);};wg_modal.showLogIn=function(title,redirectBreadcrumbs){var $loginOptions=$('.js-login-options');if(!redirectBreadcrumbs)
redirectBreadcrumbs='';$loginOptions.find(PLATFORM_SELECT_TITLE_SELECTOR).html(title);$loginOptions.find(XBOX_RETURN_URL_SELECTOR).attr('href',(window.XBOX_LOGIN_URL+encodeURIComponent(redirectBreadcrumbs)));$loginOptions.find(PS4_RETURN_URL_SELECTOR).attr('href',(window.PS4_LOGIN_URL+encodeURIComponent(redirectBreadcrumbs)));$loginOptions.showAsModal({dismissible:true,createClone:true});};wg_modal.createAlertBlock=function(title,contents,buttons){var $div=$('<div>');$div.append($('<h1>').text(title));$div.append(contents);var $buttons=$('<div>').addClass('forms_command-bar');$buttons.append(buttons);$div.append($buttons);return $div;};wg_modal.showAlert=function(title,contents){var $modal;var $okayButton=$('<a>').addClass('forms_button').text(gettext('OK'));$okayButton.on('click tap',function(){$modal.close();});var $div=wg_modal.createAlertBlock(title,contents,$okayButton);$modal=$div.showAsModal({dismissible:true,disposable:true,});};wg_modal.showConfirm=function(title,contents,verb,confirmHandler,dismissHandler){var $modal;var $actionButton=$('<a>').addClass('forms_button js-forms_button__action').text(verb);var $cancelButton=$('<a>').addClass('forms_button js-forms_button__cancel').text(gettext('Cancel'));$actionButton.on('click tap',function(){if(!$(this).hasClass(DISABLED_BUTTON_CLASS)){$modal.close();wg_modal.showThrobber();confirmnction(){$modal.close();dismissHandler();});var $div=wg_modal.createAlertBlock(title,contents,[$actionButton,$cancelButton]);$modal=$div.showAsModal({dismissible:true,disposable:true,onClose:dismissHandler,});};wg_modal.hideThrobber=function($container){$window.off("beforeunload",confirmUnload);if(!$container){$container=$body;enableBodyScroll();}
$container.removeClass(THROBBER_ATTACHED_CLASS).find(wg_modal.THROBBER_SELECTOR).remove();};wg_modal.showThrobber=function($container,passive){wg_modal.hideThrobber($container);if(!passive)
$window.on("beforeunload",confirmUnload);var $message=$('<p>').html("&nbsp;&nbsp;&nbsp;"+gettext('One moment...'));var $throbber=$('<div>').addClass(wg_modal.THROBBER_CLASS).addClass(MODAL_CLASS);$throbber.append($message);if($container){$throbber.appendTo($container.addClass(THROBBER_ATTACHED_CLASS))}else{disableBodyScroll();$throbber.addClass(wg_modal.FIXED_CLASS).appendTo($body);}
return $throbber;};$.fn.showAsModal=function(options){var dismissible=options.dismissible;var onClose=options.onClose;var createClone=options.createClone;var disposable=options.disposable;if(createClone&&disposable)
throw"Modal cannot be both a clone and disposable";var $target=this;if(createClone&&$target.parents().last().is(document.documentElement))
$target=$target.clone(true);$target.css({display:'inline-block'});var $modal=$('<div>').addClass(MODAL_CLASS).addClass(wg_modal.FIXED_CLASS).data('dismissible',dismissible);var $outer=$('<div>').addClass(OUTER_CLASS);var $inner=$('<div>').addClass(INNER_CLASS);disableBodyScroll();$modal.close=function(){if(!onClose||onClose()!==false){enableBodyScroll();if(createClone||disposable)
$modal.remove();else
$modal.hide();}};$modal.add(CANCEL_BUTTON_SELECTOR).on('click tap',function(ev){var $this=$(this);var $target=$(ev.target);var buttonClicked=$target.is(CANCEL_BUTTON_SELECTOR);if(buttonClicked||($this.data('dismissible')&&(ev.target==$modal.get(0)||ev.target==$inner.get(0)))){$modal.close();}});$inner.append($target);$outer.append($inner);$modal.append($outer);$body.append($modal);injectSVGs();return $modal;};})(jQuery);;var wg_errors={ERROR_LIST_SELECTOR:'.js-wg-error-list',ERROR_LIST_ITEMS_SELECTOR:'.js-wg-error-list>.message-box-wrapper',MESSAGE_TEMPLATE_SELECTOR:'.js-message-box-template>:first-child',MESSAGE_TYPE_ERROR:'message-box__error',MESSAGE_TITLE_SELECTOR:'.message-box_title',MESSAGE_CONTENT_SELECTOR:'.message-box_content',MESSAGE_ICON_SELECTOR:'.message-box_icon',MESSAGE_CLOSE_BUTTON_SELECTOR:'.js-message-box_close-btn',};(function($){var $body;$(function(){$body=$('body');$(wg_errors.MESSAGE_CLOSE_BUTTON_SELECTOR).click(function(){var $wrapper=$(this).closest('.message-box-wrapper');per.remove();$(window).trigger('resize');});});});wg_errors.showError=function(message,optionalTitle){var $errorList=$(wg_errors.ERROR_LIST_SELECTOR),optionalTitle=optionalTitle||"";var errorMessage=$($.parseHTML(message));if($errorList.length==0){alert(errorMessage.text());}else{var $message=$errorList.find(wg_errors.MESSAGE_TEMPLATE_SELECTOR).clone(true);$message.find(wg_errors.MESSAGE_CLOSE_BUTTON_SELECTOR).show();$message.children().addClass(wg_errors.MESSAGE_TYPE_ERROR);if(optionalTitle===""){$message.find(wg_errors.MESSAGE_TITLE_SELECTOR).append(gettext("Error"));}else{$message.find(wg_errors.MESSAGE_TITLE_SELECTOR).append(gettext("Error")+": "+optionalTitle);}
$message.find(wg_errors.MESSAGE_CONTENT_SELECTOR).append(errorMessage);$messageIcon=$message.find(wg_errors.MESSAGE_ICON_SELECTOR);$messageIcon.attr('src',STATIC_URL+'portal/img/svg-icons/wg_ui/messages/icon_error.svg').addClass('js-svg-icon');SVGInjector($messageIcon);$errorList.append($message);var scrollTop=$body.scrollTop();var errorlistTop=$errorList.offset().top-120;if(errorlistTop<scrollTop)
$body.scrollTop(errorlistTop);$(window).trigger('resize');}};wg_errors.clearErrors=function(){$(wg_errors.ERROR_LIST_ITEMS_SELECTOR).remove();$(window).trigger('resize');};})(jQuery);;window.onload=function(){setTimeout(function(){let footer_element=document.getElementsByClassName("ot-sdk-show-settings")[0];if(footer_element){let footer_links=document.getElementsByClassName("footermenu_link");let cookie_setting=document.getElementsByClassName("ot-sdk-show-settings");if(footer_links[4].innerText=="DO NOT SELL MY PERSONAL INFORMATION"&&cookie_setting[0].innerText=="COOKIE SETTINGS"){footer_links[4].style.display="none";};}},2000);};let cookie_setting_element=document.getElementsByClassName("ot-sdk-show-settings")[0];if(cookie_setting_element){cookie_setting_element.innerText=gettext("COOKIE SETTINGS")};