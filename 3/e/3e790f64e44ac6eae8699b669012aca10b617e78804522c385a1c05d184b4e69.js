/*! (c) 2024 GMO NIKKO Inc. */
((callback) => {"use strict";window.GMOSSP_DATA=window.GMOSSP_DATA||[];window.GMOSSP_DATA["g938598"]=window.GMOSSP_DATA["g938598"]||{"ni":1,"cdb":[1759281]};var gmosspBastionTag=(function() {
    "use strict";
    
    function getCookieVal(cname) {
        var decodedCookie = decodeURIComponent(document.cookie);
        var carr = decodedCookie.split(";");
        var name = cname + "=";
        for (var i = 0; i < carr.length; i++) {
            var c = carr[i];
            while (" " == c.charAt(0)) c = c.substring(1);
            if (0 == c.indexOf(name)) return c.substring(name.length, c.length);
        }
        return "";
    }
    function isWithinLimit(maxNum, counterNum) {
        var counter = parseInt(getCookieVal(counterNum), 10);
        if (counter > maxNum) return false;
        return true;
    }
    var DAY = 24 * 60 * 60 * 1e3;
    var display_counter_key = "gmossp_y_dc";
    var display_counter_val = "0";
    var display_counter_expire = DAY;
    var display_counter_limit = 1;
    var timer_key = "_gmossp_y_ttl";
    var timer_val = "1";
    var timer_expire = DAY;
    var defaultParam = {
        display_counter_key: display_counter_key,
        display_counter_val: display_counter_val,
        display_counter_expire: display_counter_expire,
        display_counter_limit: display_counter_limit,
        timer_key: timer_key,
        timer_val: timer_val,
        timer_expire: timer_expire
    };
    function initFreqControl(option) {
        if (void 0 === option) option = {};
        var param = Object.assign(defaultParam, option);
        if ("" === getCookieVal(param.timer_key)) {
            setCookie(param.display_counter_key, param.display_counter_val, param.display_counter_expire);
            setCookie(param.timer_key, param.timer_val, param.timer_expire);
        }
        if (isWithinLimit(param.display_counter_limit, param.display_counter_key)) countUpDisplay(param.display_counter_key, param.display_counter_expire);
    }
    function countUpDisplay(counterKey, counterExpire) {
        var counter = parseInt(getCookieVal(counterKey), 10);
        counter++;
        setCookie(counterKey, counter.toString(10), counterExpire);
    }
    function sessionStorage_getSItem(key) {
        if (false === !!window.sessionStorage) return "";
        return sessionStorage.getItem(key);
    }
    function sessionStorage_setSItem(key, value) {
        if (false === !!window.sessionStorage) return false;
        sessionStorage.setItem(key, value);
        return true;
    }
    function rmSItem(key) {
        if (false === !!window.sessionStorage) return false;
        sessionStorage.removeItem(key);
        return true;
    }
    var s_instl = "gmossp_duy";
    function isGInstlStatus() {
        var duy = sessionStorage_getSItem(s_instl);
        if ("1" === duy) {
            rmSItem(s_instl);
            return true;
        }
        return false;
    }
    function ua_isIe() {
        var ua = window.navigator.userAgent.toLowerCase();
        return -1 != ua.indexOf("msie") || -1 != ua.indexOf("trident");
    }
    function getPageNumOnUrlQuery(href, param) {
        var url = href;
        try {
            url = decodeURIComponent(href);
        } catch (e) {}
        var matched = url.match(new RegExp(param + "=(\\d+)", "i"));
        if (null === matched) return "";
        return matched[1];
    }
    function getReferrer(href) {
        if (void 0 === href) href = "";
        var ref = document.referrer;
        if ("" != href) ref = href;
        if (ref) return new URL(ref); else return null;
    }
    function regMatch(str, re) {
        var match = str.match(re);
        return !!match;
    }
    function regUrlPathMatch(re) {
        var urlPath = location.href.replace(/\?.*$/, "");
        return regMatch(urlPath, re);
    }
    function isFromSameHost() {
        var curHost = location.host;
        if (true === ua_isIe()) {
            var ref = document.referrer;
            if (0 == ref.length) return false;
            var rExp = new RegExp("^https?://" + curHost, "i");
            if (ref.match(rExp)) return true;
        } else {
            var referrer = getReferrer();
            if (!referrer) return false;
            var refHost = referrer.host;
            return refHost === curHost;
        }
        return false;
    }
    function isFrontPage() {
        var ARTICLE_PAGE = "/detail/";
        if (false !== regUrlPathMatch(ARTICLE_PAGE)) {
            var pathname = location.pathname;
            if (pathname.match("article")) return false;
        }
        var pageNum = getPageNumOnUrlQuery(location.href, "p");
        if (Number(pageNum) >= 2) return false;
        return true;
    }
    function isPrProjectPage() {
        try {
            var pr = document.querySelector('meta[name="news_keywords"]');
            if (!pr) return false;
            return regMatch(pr.content, "PR企画");
        } catch (e) {}
        return false;
    }
    var FREQUENCY_EXPIRE = 30 * 60 * 1e3;
    window.GmosspEnableAd = false;
    if (false === isGInstlStatus()) {
        window.addEventListener("hashchange", (function() {
            if ("#google_vignette" === location.hash) sessionStorage_setSItem(s_instl, "1");
        }));
        window.GmosspEnableAd = function() {
            if (false === isFromSameHost()) return false;
            if (false === isFrontPage()) return false;
            if (true === isPrProjectPage()) return false;
            initFreqControl({
                display_counter_expire: FREQUENCY_EXPIRE,
                timer_expire: FREQUENCY_EXPIRE
            });
            if (false === isWithinLimit(defaultParam.display_counter_limit, defaultParam.display_counter_key)) return false;
            return true;
        }();
    }
})();callback();})(()=>{"use strict";const e="chromium",t="etc",n="safari",i=1,r=2,o=4;function s(){return screen.width}function c(e){return e.h*s()/nt}function d(){const e=a().toLowerCase();return/iphone|ipad/i.test(e)?i:/android/i.test(e)?r:o}function l(){const i=a().toLowerCase();return i.includes("edg")||i.includes("crios")||i.includes("chrome")?e:i.includes("safari")||i.includes("iphone")||i.includes("ipad")||i.includes("ipod")?n:i.includes("android")?e:t}const u="develop",p="develop2",f="stage",h="production",w="https://dev.sp.gmossp-sp.jp",m="https://dev2.sp.gmossp-sp.jp",g="https://ad.ssp.gcp.gmo-am.dev",_="https://sp.gmossp-sp.jp",v="https://dev.sp.gmossp-sp.jp",b="https://dev2.sp.gmossp-sp.jp",y="https://beacon.ad.ssp.gcp.gmo-am.dev",S="https://beacon.sp.gmossp-sp.jp",x="https://sp-test-cdn.gmossp-sp.jp",$="https://sp-cdn.gmossp-sp.jp",M="https://e.gmossp-sp.jp";const A=16,I=400,C=1,E=4,O=7,P=1;function z(e){let t="";for(let n=0;n<e;n++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(62*Math.random())];retur))}function G(){const e=document.createElement("script");return e.async=!0,e}function U(){const e=document.createElement("iframe");return e.setAttribute("frameborder","0"),e.setAttribute("allowtransparency","true"),e.setAttribute("marginheight","0"),e.setAttribute("marginwidth","0"),e.setAttribute("hspace","0"),e.setAttribute("vspace","0"),e.setAttribute("scrolling","no"),e.setAttribute("title","GMOSSP iframe"),e}function T(e){let t="";return e.forEa>`})),`<div style="position:absolute;left:0px;top:0px;visibility:hidden;">${t}</div>`}const j=10,D={threshold:.5},L=1e3;const R={rootMargin:"800% 0px 800% 0px"};function H(e,t,n){const i=new URLSearchParams({a:e.substring(1),b:d().toString(),c:t});return`${function(e){switch(e){case f:case u:return x}return $}(n)}/datastream/spacetag/spacetag.gif?${i.toString()}`}function N(e,t){return fetch(q(e,t),{method:"GET",mode:"cors",credentials:"include",cache:"no-store"}).thok})).catch((e=>{}))}function q(e,t){const n=new URLSearchParams({a:e,b:t,c:location.href});return`${M}/datastream/e/e.gif?${n.toString()}`}class V{setValue(t,n,i,r){const o=new Date;o.setTime(o.getTime()+i);let s=`${t}=${n};expires=${o.toUTCString()};path=/`;r&&(s+=";domain=.gmossp-sp.jp"),[e].includes(l())&&(s+=";SameSite=None;Secure"),document.cookie=s}getValue(e){const t=decodeURIComponent(document.cookie).split(";"),n=`${e}=`;for(let e=0;e<t.length;e++){let i=t[e];if(i){for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(n))return i.substring(n.length,i.length)}}return""}}class B{setValue(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}getValue(e){try{const t=window.localStorage.getItem(e);if(null!==t&&0<t.length)return t}catch(e){}return""}}class W{setV{}}getValue(e){try{const t=window.sessionStorage.getItem(e);if(null!==t&&0<t.length)return t}catch(e){}return""}}clas W}setValue(e,t,n,i){return e.c&&"boolean"==typeof i&&this.c.setValue(e.c,t,n,i),e.l&&this.l.setValue(e.l,t),e.s&&this.s.setValue(e.s,t),""}getValue(e){let t="";return e.c&&(t=this.c.getValue(e.c),0!=t.length)||e.l&&(t=this.l.getValue(e.l),0!=t.length)||e.s&&(t=this.s.getValue(e.s),0!=t.length)?t:""}}const Y={c:"GMOSSP_USER",l:"gmoam_xid"},X=6,J=8;const K=1010,Q="https://static.criteo.net/js/ld/publishertag.js",Z=200;function ee(e,t){const n={placements:[]};for(let i=0;i<t.length;++i){const r=t[i];r&&n.placements.push({slotid:te(r,e),zoneid:r,nativeCallb>{}})}retur}`}const ne="gmossp-ad-unit",ie="0..1000:1;1000..5000:10",re=1018;const oe=25,se=1000283,ce=`https://dmp.im-apps.net/scripts/im-uid-hook.js?cid=${se}`,ae=`_im_uid.${se}`;var de=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{a(i.next(e))}catch(e){o(e)}}function c(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}a((i=i.apply(e,t||[])).next())}))};const le=11;function ue(e,t){if(!t.result||!t.result.ads)return"";const n=t.result;let i=0,r="";if(t.result.ads.forEach((t=>{if(e.adNum<=i)return;if(!e.ad||0==e.ad.length||!e.imobilePid)return;const o=t.advid?t.advid.toString():"",s=t.eid?t.eid.toString():"",c=n.asid?n.asid.toString():"",a=he(o,s);r+=e.ad.replace("{{ClickUrl}}",pe(e.imobilePid,c,o,t.ctid||"",t.vh||"")).replace("{{ClickUrl_escape}}",fe(e.imobilePid,c,o,t.ctid||"",t.vh||"")).replace("{{title}}",t.title||"").replace("{{description}}",t.description||"").replace("{{ImageUrl}}",a).replace("{{ImageUrl2}}",a).replace("{{ImageUrlSmall}}",a).replace("{{ImageUrl2Small}}",a).replace("{{sponsor_name}}",t.sponsored||"").replace(/{{optout[a-z_]+}}/,"").replace("{{i_png}}","").replace("{{ab_png}}","").replace(/Panel/,""),i++})),0==r.length)return"";let o="";return e.adCss&&0<e.adCss.length&&(o=e.adCss),e.adHeaderTag&&0<e.adHeaderTag.length&&(o+=e.adHeaderTag),o+=r,e.adFooterTag&&0<e.adFooterTag.length&&(o+=e.adFooterTag),o}function pe(e,t,n,i,r){return`https://spsvc3.i-mobile.co.jp/ad_link.ashx?${new URLSearchParams({pid:e,asid:t,advid:n,ctid:i,vh:r}).toString()}`}function fe(e,t,n,i,r){const o=new URLSearchParams({pid:e,asid:t,advid:n,ctid:i,vh:r});return encodeURIComponent(`https://spsvc3.i-mobile.co.jp/ad_link.ashx?${o.toString()}`)}function he(e,t){return`https://spcdnsp.i-mobile.co.jp/ad_creative.ashx?${new URLSearchParams({advid:e,eid:t}).toString()}`}const we=7,me=15,ge="gmoyda";class:0}}const ve="AMP-AD",be="AMP-EMBED";class ye extends _e{setContext(e){return"object"==typeof e.context&&[ve,be].includes(e.context.tagName)?this.context=e.context:"object"==typeof e.AMP_CONTEXT_DATA&&[ve,be].includes(e.AMP_CONTEXT_DATA.tagName)&&(this.context=e.AMP_CONTEXT_DATA),trl}}class Se extends!1}setContext(e){return"object"==typeof e.$sf&&(this.context=e),ter}setRegister(e){if(!D.threshold||!this.context.$sf.ext||"function"!=typeof this.context.$sf.ext.register)return;const t=D.threshold;if(Array.isArray(t))return;let n=0,i=null;this.context.$sf.ext.register(e.ad_size.w,e.ad_size.h,(r=>{if(!this.context.$sf.ext||"function"!=typeof this.context.$sf.ext.inViewPercentage)return;const o=this.context.$sf.ext.inViewPercentage();if(0<o)switch(r){case"expanded":this.expanded=!0;break;case"geom-update":this.delayExpand(e)}!this.inviewed&&!i&&100*t<o?i=setInterval((()=>{if(n+=j,L<=n){e.space_id;const t=this.context.document.querySelector(".GoogleActiveViewElement");t&&t.insertAdjacentHTML("beforebegin",T(e.iv_beacon)),i&&clearInterval(i),this.inviewed=!0}}),j):i&&(clearInterval(i),i=null)}))}delayExpand(e){if(this.expanded||e.mode&&P!==e.mode&&![C,E,O].includes(e.pos))return;if(!this.context.$sf.ext||"function"!=typeof this.context.$sf.ext.collapse||"function"!=typeof this.context.$sf.ext.expand)return;this.context.$sf.ext.collapse();let t=0,n=0;if("function"==typeof this.context.$sf.ext.geom){this.context.$sf.ext.geom();const i=this.context.$sf.ext.geom().exp;t=0<i.r?i.r:0,[C,E,O].includes(e.pos)&&(n=0<i.b?i.b:0)}let i=!1;if("function"==typeof this.context.$sf.ext.supports){i=this.context.$sf.ext.supports()["exp-push"]}const r={l:0,r:t,t:0,b:n,push:i};this.context.$sf.ext.expand(r)}}function xe(){const e=new ye,t=new Se,n={chainWindow:[window],maxTopWindow:window,ancestor:Me(),currentUrl:null,currentReferer:null,amp:e,safeframe:t,metaUrl:null};try{n.currentUrl=new URL(window.location.href)}catch(e){}let i=0,r="",o=window;do{i++;try{if(o.parent.document.body.innerHTML){o=o.parent,n.chainWindow.push(o),n.maxTopWindow=o,n.currentUrl=new URL(o.location.href);const e=Ae(o.document);0<e.length&&(r=e)}}catch(e){try{n.currentUrl=new URL(o.location.href)}catch(e){}break}}while(o!==window.top&&i<$e);return n.currentReferer=function(e){const t=e.maxTopWindow.document.referrer;if(0<t.length)try{return new URL(t)}catch(e){}return null}(n),n.amp.setContext(n.maxTopWindow),n.safeframe.setContext(n.maxTopWindow),0===r.length&&(1===n.amp.isMyself()?r=e.getMetaUrl():1===n.safeframe.isMyself()&&(r=t.getMetaUrl())),n.metaUrl=function(e){if(0<e.length){if(/^\/\//.test(e))try{const t=new URL(window.location.href);e=t.protocol?`${t.protocol}${e}`:`https:${e}`}catch(t){e=`https:${e}`}try{return new URL(e)}catch(e){}}return null}(r),n}const $e=10;function Me(){try{if(!window.location.ancestorOrigins)return window.location.host;const e=window.location.ancestorOrigins.length;if(0<e&&window.location.ancestorOrigins[e-1]){const t=new URL(window.location.ancestorOrigins[e-1]||"");if(0<t.host.length)return t.host}return window.location.host}catch(e){}return window.location.host}function Ae(e){let t=function(e){try{const t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return""}(e);return 0!=t.length?t""}(e),0!=t.length?t:"")}var))};function Ce(){if(!document.body)return!1;const e=new DocumentFragment;return e.appendChild(Oe()),e.appendChild(function(){const e=G();return e.src=Q,e}()),e.appendCh,e}()),document.body.appendChild(e),!0}const Ee="https://cdn.sp.gmossp-sp.jp/view/gmossp_sync.html";function Oe(){const e=function(){const e=U();return e.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttribute("style","height:0px;width:0px;display:none;border:none;"),e}();return e.src=Ee,e}function Pe(e){return Ie(this,void 0,void 0,(function*(){try{let t=null,n=document.querySelectorAll(`div[class=gmossp_core_${e}]`);if(0===n.length&&document.currentScript){const t=document.currentScript;t.parentNode!==document.head&&(t.insertAdjacentHTML("afterend",`<div class="gmossp_core_${e}"></div>`),n=document.querySelectorAll(`div[class=gmossp_core_${e}]`))}let i=1,r="";for(let e=0;e<=n.length;e++){const o=n[e];if(!o)continue;const s=o.getAttribute("data-check");if(!s||!parseInt(s,10)){o.setAttribute("data-check",i.toString()),r=z(24),o.setAttribute("data-tagid",r),t=o;break}i=parseInt(s,10)+1}if(!t)throw new Error("!ad");const o=yield ze(e);if(window.GMOSSP_SYND,window.GMOSSP_SYND&&window.GMOSSP_SYND[e]){const t=window.GMOSSP_SYND[e];if(t&&!t())return}else if(void 0!==window.GmosspEnableAd){const e=window.GmosspEnableAd;if(window.GmosspEnableAd=void 0,!1===e)return}if(function(e,t,n){fetch(H(e,t,n),{method:"GET",mode:"cors",credentials:"include",cache:"no-store"}).then((e=>{if(!e.ok||!e.headers)return;const t=e.headers.get("X-Lat"),n=e.headers.get("X-Lon");t&&n&&(window.GMOSSP_CONFIG=window.GMOSSP_CONFIG||{},window.GMOSSP_CONFIG.geo={lat:t,lon:n})})).cat>{}))}(e,r,o.dev.mode),function(e,t){if(0!==t.cdb.length)try{window.Criteo=window.Criteo||{},window.Criteo.events=window.Criteo.events||[],window.Criteo.events.push((()=>{if("function"!=typeof window.Criteo.SetLineItemRanges||"function"!=typeof window.Criteo.RequestBids)return;if(window.Criteo.SetLineItemRanges(ie),window.pbjs&&"function"==typeof window.pbjs.getUserIdsAsEids){const e=window.pbjs.getUserIdsAsEids();e&&e.forEach((e=>{e.uids&&e.uids.forEach((t=>{e.source&&t.id&&"function"==typeof window.Criteo.SetIdentities&&window.Criteo.SetIdentities([{source:e.source,uids:[{id:t.id,atype:t.atype||1,ext:{stype:"ppuid",persistence:"js"}}]}])}))}))}const n=ee(e,t.cdb);window.Criteo.RequestBids(n,(e=>{0!==e.length?e.forEach((e=>{if(!e.cpm||!e.impressionId||!e.zoneId)return;let t=!1;if(window.GMOSSP_CDBS=window.GMOSSP_CDBS||[],window.GMOSSP_CDBS.forEach((n=>{e.impressionId!=n.impid||(t=!0)})),t)return;let n="",i="",r="",o="",s="",c="",a="",d="",l="";const u=[];if(e.displayUrl)r=e.displayUrl;else{if(!e.nativePayload)return;const t=e.nativePayload;if(!t.products||!t.impression_pixels)return;let r=!0;if(t.products.forEach((e=>{e.click_url?(o=e.click_url,d=e.description||"",l=e.title||"",e.image&&(s=e.image.url||"")):r=!1})),!r)return;if(t.advertiser){const e=t.advertiser;e.description&&(n=e.description),e.domain&&(i=e.domain)}if(t.impression_pixels&&t.impression_pixels.forEal)})),t.privacy){const e=t.privacy;e.optout_click_url&&(c=e.optout_click_url),e.optout_image_url&&(a=e.optout_image_url)}}window.GMOSSP_CDBS.push({impid:e.impressionId,cpm:e.cpm,zoneid:e.zoneId,advertiser_description:n,advertiser_domain:i,click_url:o,displayurl:r,image_url:s,impression_pixels:u,optout_click_url:c,optout_image_url:a,product_description:d,title:l})})):n.placements.forEach((e=>{window.GMOSSP_CDBS=window.GMOSSP_CDBS||[],window.GMOSSP_CDBS.push({impid:e.slotid,cpm:0,zoneid:0,advertiser_description:"",advertiser_domain:"",click_url:"",displayurl:"",image_url:"",impression_pixels:[],optout_click_url:"",optout_image_url:"",product_description:"",title:""})}))}),Z)}))}catch(e){e instanceof Error&&N(e.message,"")}}(i,o),0===o.ni)return void Ge(t,e,o,i,r);!function(e,t,n,i,r){"IntersectionObserver"in window?new IntersectionObserver(((o,s)=>{o.forEach((o=>{o.isIntersecting&&(Ge(e,n,t,i,r),s.unobserve(o.target))}))}),R).observe(e):Ge(e,n,t,i,r)}(t,o,e,i,r)}catch(t){t instanceof Error&&N(t.message,e)}}))}function ze(e){return Ie(this,void 0,void 0,(function*(){const t={ni:0,cdb:[],dev:{test_network_id:[],gmoam_preview:0,mode:h,test_space_id:-1,space_network_id:-1,ad_size_id:-1,rtb_size_id:-1}};for(let n=0;n<30;n++){if(window.GMOSSP_DATA){const n=window.GMOSSP_DATA[e];if(n){const e=n.ni;(e||0===e)&&(t.ni=e);const i=n.cdb;i&&(t.cdb=i);const r=n.dev;if(r){const e=r.test_network_id;e&&(t.dev.test_network_id=e);const n=r.gmoam_preview;(n||0===n)&&(t.dev.gmoam_preview=n);const i=r.mode;i&&(t.dev.mode=i);const o=r.test_space_id;o&&(t.dev.test_space_id=o);const s=r.space_network_id;s&&(t.dev.space_network_id=s);const c=r.ad_size_id;c&&(t.dev.ad_size_id=c);const a=r.rtb_size_id;a&&(t.dev.rtb_size_id=a)}break}}yield k(1)}return t}))}const ke=1;function Ge(e,t,n,i,r){return Ie(this,void 0,void 0,(function*(){const o=xe();try{const s=yield fetch(function(e,t){const n=new URLSearchParams({space_id:e,r:Math.random().toString()});return`${function(e){if(e.mode)switch(e.mode){case f:return g;case u:return w;case p:return m}return _}(t)}/ads/ssp.ad?${n.toString()}`}(t,n.dev),function(e,t,n,i){return{method:"POST",body:JSON.stringify(Ue(e,t,n,i)),mode:"cors",credentials:"include",cache:"no-store"}}(o,n,i,r));if(!s.ok)return;const c=yield s.json();if(!c.ad||0==c.ad.length)return;!function(e,t,n,i,r,o){Ie(this,void 0,void 0,(function*(){const s=[];switch(i.la){case le:if(i.isClientAdCall&&1==i.isClientAdCall){const e=yield function(e){return de(this,void 0,void 0,(function*(){try{const t=yield fetch(e.adCallUrl,{method:"GET",mode:"cors",credentials:"include",cache:"no-store"});if(!t.ok)return"";const n=yield t.json();return ue(e,n)}catch(t){t instanceof Error&&N(t.message,e.space_id.toString())}return""}))}(i);s.push(e)}else s.push(Te(i));break;case K:s.push(function(e,t){if(!e.ad||0==e.ad.length)return"";const n=e.ad,i=[];if(!e.zoneids||0==e.zoneids.length)return"";if(e.zoneids.forEa))})),window.GMOSSP_CDBS=window.GMOSSP_CDBS||[],0===window.GMOSSP_CDBS.length)return"";let r="";return window.GMOSSP_CDBS.forEach((e=>{i.includes(e.impid)&&(e.displayurl?r+=n+"<scri"+`pt src="${e.displayurl}"><\/script>`:(r+=n.replace("{{ClickUrl}}",e.click_url).replace("{{title}}",e.title).replace("{{description}}",e.product_description).replace("{{ImageUrl}}",e.image_url).replace("{{ImageUrl2}}",e.image_url).replace("{{sponsor_name}}",e.advertiser_description).replace("{{optout_click_url}}",e.optout_click_url).replace("{{optout}}",e.optout_image_url).replace(/{{optout[a-z_]+}}/,""),0<e.impression_pixels.length&&(r+=T(e.impression_pixels))))})),r}(i,r));break;default:s.push(Te(i))}try{const r=yield Promise.all(s);!function(e,t,n,i,r,o){const s=i.space_id.toString(),c=`gmossp_${o}`,a=`gmossp_${s}_${o}`;let d="";if(r.forEach((e=>{d+=`<div id="${a}" class="gmossp_adnw_${s} ${a}">${e}</div>`})),0===d.length)return;let l="";i.ext_tag&&0<i.ext_tag.length&&(l=i.ext_tag);let u="",p="width:100%;height:0px;",f="",h="";switch(i.pos){case E:0==t.safeframe.isMyself()&&(u=T(i.iv_beacon)),i.la==J&&(f="<center>",h="</center>"),p+="z-index:2147483647;left:0px;position:fixed;",ke==i.overlay_type?p+="top:0px;":p+="bottom:0px;";break;case O:0==t.safeframe.isMyself()&&(u=T(i.iv_beacon)),f=Ve(i.la),h="</div></div></div></div>",p="width:100%;height:100%;z-index:2147483647;top:0px;left:0px;position:fixed;margin:auto;";break;default:0==t.safeframe.isMyself()&&function(e,t,n){if("IntersectionObserver"in window){let t=0,i=null;new IntersectionObserver(((e,r)=>{e.forEach((e=>{e.isIntersecting?i=setInterval((()=>{t+=j,L<=t&&(e.target.insertAdjacentHTML("beforebegin",T(n)),i&&clearInterval(i),r.unobserve(e.target))}),j):i&&(clearInterval(i),i=null)}))}),D).observe(e)}}(e,0,i.iv_beacon)}const w=function(e,t,n,i,r,o,s,c){return'<!doctype html><html lang="ja"><head><meta charset="UTF-8"><title>GMOSSP iframe</title><script>(()=>{"use strict";window.inDapIF=true;'+He(e,t,n)+"})();<\/script></head>"+`<body ${Re(e)}>`+s+i+c+r+o+"</body></html>"}(i,c,a,d,l,u,f,h);let m=null,g=2;const _=t.chainWindow.length;if(1<_){let n=!0;t.chainWindow.forEach((t=>{t!==window.top&&(n&&(e.setAttribute("style",je),Le(e.parentNode),n=!1),null!==t.frameElement&&(t.frameElement.setAttribute("style",je),g<_&&Le(t.frameElement.parentNode),m=t.frameElement),g++)}))}1==t.safeframe.isMyself()&&t.safeframe.setRegister(i);const v=U();null!==m?v.setAttribute("style",je):v.setAttribute("style",p);let b=!0;if(i.ai){let e=v.getAttribute("style");for(const t in i.ai)e=We(t,i.ai[t]||null,e),"height"==t&&(b=!1),i.ai;null!==e&&v.setAttribute("style",e)}if(e.appendChild(v),null==v.contentWindow)return;const y=v.contentWindow.document;y.open().write(w),y.close(),function(e,t,n,i){let r=null;e instanceof HTMLIFrameElement?e.contentWindow&&(r=e.contentWindow.document.querySelector(`div[id=${t}]`)):r=e.querySelector(`div[id=${t}]`);if(!r)return;switch(i.la){case X:case le:r.addEventListener("mouseover",(()=>{Ye(n,i)}),{once:!0});break;default:r.addEventListener("clici)}),{once:!0})}}(v,a,n,i),Ne(null!==m?m:v,b,c,i);window.addEventListener("pagehide",(t=>{if(t.persisted&&i.pos===O)e.removeChild(v),document.body&&(document.body.style.position="")}))}(e,t,n,i,r,o)}catch(e){}}))}(e,o,n.dev,c,i,r)}catch(e){return}}))}function Ue(e,t,n,i){const r=new F;let o=0,c="";e.metaUrl&&(o=1,c=e.metaUrl.href);let a="";e.currentUrl&&(a=e.currentUrl.href);const d=function(){const e={brands:[],platform:navigator.platform||""},t=navigator.userAgentData;return t?(t.brands&&t.brands.forEa})})),e.platform=t.platform||"",e):e}();let l=r.getValue(Y);0===l.length&&(l=z(A),r.setValue(Y,l,7300,!1));const u={acmp:e.amp.isMyself().toString(),ao:e.ancestor,mpuf:o,np:d.platform||"",pageurl:c,raw_pageurl:a,sc:`${s()}x${screen.height}`,sf:e.safeframe.isMyself(),sti:i,xid:l},p=function(e,t){if(0===t.cdb.length)return[];const n=t.cdb,i=[];if(window.GMOSSP_CDBS=window.GMOSSP_CDBS||[],0<window.GMOSSP_CDBS.length){const t=window.GMOSSP_CDBS;n.forEach((n=>{const r=te(n,e);let o=0,s="";if(t.forEach((e=>{r!=e.impid||0<e.cpm&&(o=e.cpm,s=e.advertiser_domain)})),0===o)return;const c={zoneid:n,cpm_bucket:o};0<s.length&&(c.adomain=s),i.push(c)}))}return i}(n,t);0<p.length&&(u.cdb=p);conse)}(r);0<f.length&&(u.im_uid=f),null!==e.currentReferer&&(u.ref=e.currentReferer.href);const h=window.GMOSSP_CONFIG;if(h){const e=h.geo;e&&(u.geo=e)}return 0<d.brands.length&&(u.ua_ch=d.brands),(window.GmosspYinstl&&1===window.GmosspYinstl||0<t.dev.test_network_id.length&&!0===t.dev.test_network_id.includes(me))&&(u.yinstl=1),0<t.dev.test_network_id.length&&(u.test_network_id=t.dev.test_network_id),0!==t.dev.gmoam_preview&&(u.gmoam_preview=t.dev.gmoam_preview),-1!==t.dev.test_space_id&&(u.test_space_id=t.dev.test_space_id),-1!==t.dev.space_network_id&&(u.spnw_id=t.dev.space_network_id),u}function Te(e){return e.ad&&0!=e.ad.length?e.ad:""}const je="width:100%;height:100%;";const De=10;function Le(e){if(null!==e)for(let t=0;t<=De;t++){if(null===e.parentNode||Node.DOCUMENT_NODE===e.nodeType)return;e.setAttribute("style",je),e=e.parentNode}}function Re(e){if(e.la===J)return'style="text-align:center;"';switch(e.pos){case E:case O:return'style="text-align:center;"'}return e.mode==P?"":'style="text-align:center;"'}function He(e,t,n){switch(e.la){case X:return"";case re:return function(e,t){let n=`window.parent.postMessage(["${e}",h],"*");`;t.pos===O&&(n="");return`let intervalId=null,level=0,h=0;window.addEventListener("load",()=>{intervalId=setInterval(()=>{level++;if(level<=${I}){if(${t.mode}&&${P}===${t.mode}){const b=document.body,e=document.documentElement;h=Math.max(b.scrollHeight,e.scrollHeight,b.offsetHeight,e.offsetHeight,b.clientHeight,e.clientHeight);if(0===h){return;}}else{const c=document.querySelector(".reemoContainer");if(!c){return;}const g=document.querySelector(".reemo_wrap"),j=document.querySelector("video");if(g&&j){if(g.getAttribute("data-width")===g.getAttribute("data-height")){h=screen.width;}else{h=${t.ad_size.h}*screen.width/${t.ad_size.w};}j.height=h;j.width=screen.width;}else{const d=document.querySelector("iframe");if(!d){return;}const c=document.querySelector(".reemoWrapper"),f=d.contentWindow.document.querySelector("body>a>img");if(!f){return;}let w=screen.width;if(f.getAttribute("width")===f.getAttribute("height")){h=w;if(c){const g=window.getComputedStyle(c),z=new DOMMatrix(g.transform);if(z){if(1<z.a){w/=z.a;}else if(0<z.a&&1<z.a){w*=z.a;}}}d.height=w;f.height=w;}else{h=${t.ad_size.h}*screen.width/${t.ad_size.w};let th=h;if(c){const g=window.getComputedStyle(c),z=new DOMMatrix(g.transform);if(z){if(1<z.a){w/=z.a;th/=z.a;}else if(0<z.a&&1<z.a){w*=z.a;th*=z.a;}}}d.height=th;f.height=th;}f.width=w;d.width=w;}}}`+n+"if(intervalId){clearInterval(intervalId);}},5);});"}(t,e)}switch(e.pos){case E:switch(e.la){case we:case le:case oe:return"";case J:return function(e){return`let intervalId=null,level=0,h=0;window.addEventListener("load",()=>{intervalId=setInterval(()=>{level++;if(level<=${I}){const f=document.querySelector(".adsbygoogle");if(f){h=Math.max(f.clientHeight);}}window.parent.postMessage(["${e}",h],"*");if(intervalId){clearInterval(intervalId);}},5);});`}(t);case me:ret;`}(t)}break;case O:return""}return qe(t,`#${n}`)}function Ne(e,t,n,i){const r=Be("height",e.getAttribute("style"));switch(i.pos){case E:switch(i.la){case X:case we:case le:case oe:return c(i.ad_size),void e.setAttribute("style",`${r}height:${c(i.ad_size)}px;`)}return void Fe(e,n,r,i.ad_size);case O:return;default:if(!1===t)return;if(i.mode==P)return void Fe(e,n,r,i.ad_size);if(i.la===X)return c(i.ad_size),void e.setAttribute("style",`${r}height:${c(i.ad_size)}px;`);Fe(e,n,r,i.ad_size)}}function qe(e,t){return`let intervalId=null,level=0,h=0;window.addEventListener("load",()=>{intervalId=setInterval(()=>{level++;if(level<=${I}){const c=document.querySelector("${t}");h=Math.max(c.scrollHeight,c.offsetHeight,c.clientHeight);if(0==h){return;}}window.parent.postMessage(["${e}",h],"*");if(intervalId){clearInterval(intervalId);}},5);});`}function Ve(e){let t="";if(e===me)t=`${ge} `;return`<div class="${t}gmoam_outer_wrapper"><div class="${t}gmoam_inner_wrapper"><div class="${t}gmoam_close"><a class="${t}gmoam_close_button"></a></div><div class="${t}gmoam_container_wrapper"><div class="${t}gmoam_sq1">`}function Be(e,t){if(null===t)return"";let n="";return t.split(";").forEach((t=>{t&&!t.includes(e)&&(n+=`${t};`)})),n}function We(e,t,n){if(null===t)return n||"";if(null===n)return`${e}:${t};`;let i="",r=!1;return n.split(";").forEach((n=>{n&&(n.includes(e)?(i+=`${e}:${t};`,r=!0):i+=`${n};`)})),r||(i+=`${e}:${t};`),i}function Fe(e,t,n,i){window.addEventListener("message",(r=>{if(t==r.data[0])if(0<r.data[1]){const t=r.data[1];e.setAttribute("style",`${n}height:${t}px;`),e.setAttribute("height",t.toString())}else{const t=c(i);e.setAttribute("style",`${n}height:${t}px;`),e.setAttribute("height",t.toString())}}))}function Ye(e,t){const n=Xe(e,t);document.body.insertAdjacentHTML("beforebegin",T([n]))}function Xe(e,t){const n=new URLSearchParams({r:Math.random().toString(),m:t.manager_id,si:t.site_id.toString(),network_id:t.la.toString()});let i="//";return t.campaign_id&&t.advertise_id&&(i=`/${t.campaign_id}/${t.advertise_id}`),`${function(e){if(e.mode)switch(e.mode){case f:return y;case u:return v;case p:return b}return S}(e)}/ads/sspfw.ad/${t.spnw}/${t.q}/${t.space_id}/${t.uid}${i}?${n.toString()))})(void 0,void 0,void 0,(function*(){window.Gmossp=window.Gmossp||{},window.Gmossp.events=window.Gmossp.events||[],window.Gmossp,!Object.getOwnPropertyDescriptor(window.Gmossp.events,"push")&&(Object.defineProperty(window.Gmossp.events,"push",{value:function(e){return e.sid,Pe(e.sid),Array.prototype.push.call(this,e),this.length}}),1)&&(function(){Ie(this,void 0,void 0,(function*(){if(!0!==Ce())if("MutationObserver"in window){const e=new MutationObserver((()=>{!1!==Ce()&&e.disconnect()}));e.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}else for(let e=0;e<3e3;e++){if(!0===Ce())return;yield k(1)}}))}(),0<window.Gmossp.events.length&&window.Gmossp.events.forEach((e=>{e.sid,Pe(e.sid)})))}))});