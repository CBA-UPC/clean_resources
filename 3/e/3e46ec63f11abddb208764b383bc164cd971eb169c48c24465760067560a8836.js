"use strict";var ge=Math.pow;(self.webpackChunk_23universal=self.webpackChunk_23universal||[]).push([[6220],{14642:(Xe,fe,k)=>{k.d(fe,{k:()=>Ht});const{isArray:J}=Array;,11547:(Xe,fe,k)=>{k.d(fe,{l:()=>Qe});var J=k(61855),Ht=k(18666),M=k(22604),Rt=k(87833),Wt=k(66565),t=k(94755);const kt=(ve,ze)=>{var Pt=function Jt(){return{escape:parseExtension:rt,mimeType:function pt(ct){var bt=rt(ct).toLowerCase();return function ht(){var ct="application/font-woff",bt="image/jpeg";return{woff:ct,woff2:ct,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:bt,jpeg:bt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[bt]||""},dataAsUrl:isDataUrl:canvasToBlob:function yt(ct){return ct.toBlob?new Promise(:function Et(ct){return new Promise(}(ct)},resolveUrl:function vt(ct,bt){var Vt=document.implementation.createHTMLDocument(),Kt=Vt.createElement("base");Vt.head.appendChild(Kt);var le=Vt.createElement("a");return Vt.body.appendChild(le),Kt.href=bt,le.href=ct,le.href},getAndEncode:function ne(ct){return qt.impl.options.cacheBust&&(ct+=(/\?/.test(ct)?"&":"?")+(new Date).getTime()),new Promise(function(Vt){ve.get(ct,{responseType:"blob"}).toPromise().then(le=>{var It=new FileReader;It.onloadend=It.readAsDataURL(le)})})},uid:function St(){var ct=0;return function(){return"u"+function bt(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}()+ct++}}(),delay:function se(ct){return ,asArray:function Ut(ct){for(var bt=[],Vt=ct.length,Kt=0;Kt<Vt;Kt++)bt.push(ct[Kt]);return bt},escapeXhtml:makeImage:function Gt(ct){return"data:,"===ct?Promise.resolve():new Promise(function(bt,Vt){var Kt=new Image;qt.impl.options.useCredentials&&(Kt.crossOrigin="use-credentials"),Kt.onload=Kt.onerror=Vt,Kt.src=encodeURI(ct)})},width:function re(ct){var bt=Xt(ct,"border-left-width"),Vt=Xt(ct,"border-right-width");return ct.scrollWidth+bt+Vt},height:function At(ct){var bt=Xt(ct,"border-top-width"),Vt=Xt(ct,"border-bottom-width");return ct.scrollHeight+bt+Vt}};),Ce=function ee(){var ht=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function Et(yt,vt,St){return )?Promise.resolve(yt):Promise.resolve(yt).then(pt).then(},shouldProcess:rt,impl:{readUrls:pt,inline:ft}};nction ft(yt,vt,St,Gt){return Promise.resolve(vt).then(.then(Gt||Pt.getAndEncode).then(.then(function(Qt){return yt.replace(function ne(Qt){return new RegExp("(url\\(['\"]?)("+Pt.escape(Qt)+")(['\"]?\\))","g")}(vt),"$1"+Qt+"$3")})}}(),Le=function jt(){return{resolveAll:function ht(){return rt().then(.then(},impl:{readAll:rt}};function rt(){return Promise.resolve(Pt.asArray(document.styleSheets)).then(function ft(yt){var vt=[];return yt.forEach(function(St){if("cssRules"in St)try{Pt.asArray(St.cssRules||[]).forEach(vt.push.bind(vt))}catch(Gt){console.log("Error while reading CSS rules from "+St.href,Gt.toString())}}),vt}).then(function pt(yt){return yt.filter(.filter(}).then(function(yt){return yt.map(Et)});function Et(yt){return{resolve:function(){return Ce.inlineAll(yt.cssText,(yt.parentStyleSheet||{}).href)},src:}}}(),ke=function Ot(){return{inlineAll:function rt(pt){return pt instanceof Element?function ft(Et){var yt=Et.style.getPropertyValue("background");return yt?Ce.inlineAll(yt).then(.then(function(){return Et}):Promise.resolve(Et)}(pt).then(:Promise.resolve(pt)},impl:{newImage:ht}};function ht(pt){return{inline:function ft(Et){return Pt.isDataUrl(pt.src)?Promise.resolve():Promise.resolve(pt.src).then(Et||Pt.getAndEncode).then(.then(}}}}(),qt={toSvg:gt,toPng:function z(ht,rt){return wt(ht,rt||{}).then(},toJpeg:function K(ht,rt){return wt(ht,rt=rt||{}).then(},toBlob:function Q(ht,rt){return wt(ht,rt||{}).then(Pt.canvasToBlob)},toPixelData:function j(ht,rt){return wt(ht,rt||{}).then(},toCanvas:function it(ht,rt){return wt(ht,rt||{})},impl:{fontFaces:Le,images:ke,util:Pt,inliner:Ce,options:{}}};function gt(ht,rt){return function ot(ht){qt.impl.options.imagePlaceholder=void 0===ht.imagePlaceholder?undefined:ht.imagePlaceholder,qt.impl.options.cacheBust=void 0!==ht.cacheBust&&ht.cacheBust,qt.impl.options.useCredentials=void 0!==ht.useCredentials&&ht.useCredentials}(rt=rt||{}),Promise.resolve(ht).then(.then(oe).then(Nt).then(function pt(ft){return rt.bgcolor&&(ft.style.backgroundColor=rt.bgcolor),rt.width&&(ft.style.width=rt.width+"px"),rt.height&&(ft.style.height=rt.height+"px"),rt.style&&Object.keys(rt.style).forEach(,ft}).then(function(ft){return function te(ht,rt,pt){return Promise.resolve(ht).then(.then(Pt.escapeXhtml).then(.then(.then(}(ft,rt.width||Pt.width(ht),rt.height||Pt.height(ht))})}function wt(ht,rt){return gt(ht,rt).then(Pt.makeImage).then(Pt.delay(100)).then(function(ft){var Et="number"!=typeof rt.scale?1:rt.scale,yt=function pt(ft,Et){var yt=document.createElement("canvas");if(yt.width=(rt.width||Pt.width(ft))*Et,yt.height=(rt.height||Pt.height(ft))*Et,rt.bgcolor){var vt=yt.getContext("2d");vt.fillStyle=rt.bgcolor,vt.fillRect(0,0,yt.width,yt.height)}return yt}(ht,Et),vt=yt.getContext("2d");return ft&&(vt.scale(Et,Et),vt.drawImage(ft,0,0)),yt})}function $t(ht,rt,pt){return pt||!rt||rt(ht)?Promise.resolve(ht).then(function ft(vt){return vt instanceof HTMLCanvasElement?Pt.makeImage(vt.toDataURL()):vt.cloneNode(!1)}).then(function(vt){return function Et(vt,St,Gt){var ne=vt.childNodes;return 0===ne.length?Promise.resolve(St):function Qt(ue,se,Ut){var ae=Promise.resolve();return se.forEach(,ae}(St,Pt.asArray(ne),Gt).then(function(){return St})}(ht,vt,rt)}).then(function(vt){return function yt(vt,St){return St instanceof Element?Promise.resolve().then(function Gt(){!function se(Ut,ae){Ut.cssText?(ae.cssText=Ut.cssText,ae.font=Ut.font):function re(At,Xt){Pt.asArray(At).forEach(}(Ut,ae)}(window.getComputedStyle(vt),St.style)}).then(function ne(){[":before",":after"].forEach(function(Ut){!function se(Ut){var ae=window.getComputedStyle(vt,Ut),re=ae.getPropertyValue("content");if(""!==re&&"none"!==re){var At=Pt.uid(),Xt=St.getAttribute("class");Xt&&St.setAttribute("class",Xt+" "+At);var ct=document.createElement("style");ct.appendChild(function bt(Vt,Kt,le){var It="."+Vt+":"+Kt,en=le.cssText?wn(le):En(le);return document.createTextNode(It+"{"+en+"}");At,Ut,ae)),St.appendChild(ct)}}(Ut)})}).then(function Qt(){vt instanceof HTMLTextAreaElement&&(St.innerHTML=vt.value),vt instanceof HTMLInputElement&&St.setAttribute("value",vt.value)}).then(function ue(){St instanceof SVGElement&&(St.setAttribute("xmlns","http://www.w3.org/2000/svg"),St instanceof SVGRectElement&&["width","height"].forEach(function(se){var Ut=St.getAttribute(se);!Ut||St.style.setProperty(se,Ut)}))}).then(function(){return St}):St}(ht,vt)}):Promise.resolve()}turn qt};kt(void 0);var Ee=k(22173),Ae=k(15218),de=k(48339),_e=k(83034),xt=k(97509),Ve=k(76886),Zt=k(86793),Me=k(91399),Oe=k(2928),Dt=k(24663),ye=k(96012),Te=k(88664),ie=k(74039),me=k(42655),Be=k(12993),Ke=k(43325),tn=k(42577),He=k(74406),Ue=k(90435);const{roundTo:Ge}=Ee.hC;let Qe=(()=>{class ve extends M.K{constructor(Pt,Ce,Le,ke,Pe,qt,gt){super(),this.document=Pt,this.http=Ce,this.messageBus=Le,this.analyticsService=ke,this.notificationService=Pe,this.quillService=qt,this.authQuery=gt,this.contentMap={},this.generatingInProgress=new Ve.X(!1),this.generatingInDone=new Zt.x,this.receiveExportEvent=K=>{},this.saveAsFile=(K,Q,it)=>{try{let ot;"data:"===K.substring(0,5)?(0,Wt.saveAs)(K,Q):(ot=(0,t.Pv)([K],{type:it}),(0,Wt.saveAs)(ot,Q))}catch(ot){console.log("error",ot),window.open("data:"+it+","+encodeURIComponent(K),"_blank","")}},this.openSpinner=K=>{const{content:Q,message:it}=K;this.messageBus.emit(Rt.w3.ShowSpinnerOverlay,["spinneroverlay"],{type:"default",default:{content:Q,preventOverlayClosing:!0,loadingInfo:it||"Your download will be ready soon .."}})},this.closeSpinner=()=>{this.messageBus.emit(Rt.w3.CloseSpinnerOverlay,["spinneroverlay"],{})},this.copyToClipboard=(K,Q="Text")=>{const it=this.document.createElement("textarea");it.value=K,it.readOnly=!1,it.contentEditable="true",it.style.position="absolute",it.style.left="-9001px",this.document.body.appendChild(it);const ot=this.document.getSelection().rangeCount>0&&this.document.getSelection().getRangeAt(0);if(navigator.userAgent.match(/ipad|ipod|iphone/i)){const wt=this.document.createRange();wt.selectNodeContents(it);const $t=this.document.getSelection();$t.removeAllRanges(),$t.addRange(wt),it.focus(),it.setSelectionRange(0,it.value.length)}else it.select();this.document.execCommand("copy"),this.document.body.removeChild(it),ot&&(this.document.getSelection().removeAllRanges(),this.document.getSelection().addRange(ot)),this.notificationService.success(Q,"has been copied to your clipboard!")},this.getFromClipboard=K=>(0,J.mG)(this,void 0,void 0,function*(){let Q="";if(navigator.clipboard)Q=yield navigator.clipboard.readText();else{const it=this.document.createElement("textarea");it.readOnly=!1,it.contentEditable="true",it.style.position="absolute",it.style.left="-9001px",this.document.body.appendChild(it);const ot=this.document.getSelection().rangeCount>0&&this.document.getSelection().getRangeAt(0);if(navigator.userAgent.match(/ipad|ipod|iphone/i)){const wt=this.document.createRange();wt.selectNodeContents(it);const $t=this.document.getSelection();$t.removeAllRanges(),$t.addRange(wt),it.focus()}else it.select();this.document.execCommand("paste"),Q=it.value,this.document.body.removeChild(it),ot&&(this.document.getSelection().removeAllRanges(),this.document.getSelection().addRange(ot))}return Q}),this.downloadCSV=K=>{const{content:Q,data:it}=K,ot=[],wt=[],$t=["miscField","valueField","timeField","isoLabelField"];for(const Jt of Object.keys(Q.typeSpecific.fields)){const ee=Q.typeSpecific.fields[Jt];$t.includes(ee.fieldType)&&(ot.push(ee.title),wt.push(ee.fieldName))}const oe=[];oe.push(ot.join(";"));for(const Jt of it){const ee=[];for(const jt of wt)ee.push(Jt[jt]);oe.push(ee.join(";"))}const Nt=`${Q.slug}.csv`,te=oe.join("\r\n");this.saveAsFile(te,Nt,"data:text/csv;charset=utf-8")},this.downloadGeoJSON=K=>{var Q,it;const{content:ot,data:wt,exportMetaAsProperty:$t}=K,oe=(0,Oe.BT)(null===(Q=null==ot?void 0:ot.typeSpecific)||void 0===Q?void 0:Q.fields),Nt=(0,Oe.KQ)(null===(it=null==ot?void 0:ot.typeSpecific)||void 0===it?void 0:it.dimensions),te=`${ot.slug}.json`;Te.MapTypes.includes(ot.type)&&ot.created_at&&!ot.injected&&!ot.localStorage.unsavedChanges&&"choropleth"===ot.typeSpecific.map.options.displayType&&(this.generatingInProgress.next(!0),this.http.get(`/services/pub/api/v1/content/export/geojson/${ot.slug}`).pipe((0,Ae.q)(1),(0,de.K)(Ot=>(this.notificationService.error("GeoJSON generation failed","Something went wrong!"),(0,Me._)(Ot))),(0,_e.U)(Ot=>{var ht,rt,pt,ft,Et,yt,vt,St,Gt,ne,Qt,ue;if((null==Ot?void 0:Ot.features)&&Ot.features.length>0){for(const At of Ot.features){const Xt=wt.filter(;Xt&&(1===Xt.length?At.properties.value=Xt[0][Nt]:Xt.length>1&&(At.properties.values=Xt.map(ct=>ct[Nt])))}const se=["world_countries","world_countries_de","world_countries_disputed","world_countries_disputed_en","world_countries_tagesschau"],Ut=Object.assign({},Ot);let ae=!1;const re={name:ot.fileName||ot.name,subtitle:ot.subTitle,date:ot.updated_at};ot.description&&(re.description=(0,ye.dw)(ot.description)),!(null===(rt=null===(ht=ot.typeSpecific)||void 0===ht?void 0:ht.data)||void 0===rt)&&rt.publisher&&(re.source=(null===(Et=null===(ft=null===(pt=ot.typeSpecific)||void 0===pt?void 0:pt.data)||void 0===ft?void 0:ft.publisher)||void 0===Et?void 0:Et.name)||""),$t?Ut.properties=Object.assign({},re):Ut.metadata=Object.assign({},re),(null===(vt=null===(yt=ot.typeSpecific)||void 0===yt?void 0:yt.map)||void 0===vt?void 0:vt.sources.length)>0&&(null===(Gt=null===(St=ot.typeSpecific)||void 0===St?void 0:St.map)||void 0===Gt?void 0:Gt.sources[0])&&(ae=se.includes(null===(ue=null===(Qt=null===(ne=ot.typeSpecific)||void 0===ne?void 0:ne.map)||void 0===Qt?void 0:Qt.sources[0])||void 0===ue?void 0:ue.mappingId)),Ut.features=[];for(const At of Ot.features){const Xt=Ut.features.findIndex(;if(Xt>-1){const ct=Ut.features[Xt],bt=JSON.parse(JSON.stringify(ct.geometry));if("Polygon"===bt.type){const Vt={type:"MultiPolygon",coordinates:bt.coordinates};delete ct.geometry,ct.geometry=Vt}ct.geometry.coordinates.push(At.geometry.coordinates)}else{const ct=JSON.parse(JSON.stringify(At.geometry));delete At.geometry,At.geometry=ct,At.properties["ISO-ID"]=null,At.properties.code&&(At.properties.code=At.properties.code.startsWith("G_")?At.properties.code.substring(2):At.properties.code),ae&&(At.properties["ISO-ID"]=At.properties.code,At.properties.code=null),At.properties.label&&(At.properties.name=At.properties.label,delete At.properties.label),Ut.features.push(At)}}return Ut}return Ot}),(0,xt.x)(()=>{this.generatingInDone.next(null),this.generatingInProgress.next(!1)})).subscribe(Ot=>{Ot&&this.saveAsFile(JSON.stringify(Ot),te.replace(".json",".geojson"),"application/geo+json;charset=utf-8")}))},this.downloadPNG=K=>(0,J.mG)(this,void 0,void 0,function*(){const{content:Q}=K,{referenceID:it}=Q.localStorage,ot=Q.slug+".png",wt=this.document.querySelectorAll("#export-"+it)[0],oe=yield this.dom2image.toPng(wt,{filter:);this.saveAsFile(oe,ot,"image/png")}),this.copyEmbedCode=K=>{var Q,it;const{content:ot,type:wt}=K,{slug:$t}=ot,oe=ot.fileName?ot.fileName:this.quillService.deltaToString(ot.name),{embed:Nt}=ot.typeSpecific,te=ot.typeSpecific.style.breakPoints.values,Jt=this.document.URL,ee=Jt.substr(0,Jt.indexOf("/",Jt.indexOf("//")+2)),jt=[];if(!Nt)return;if("responsive"===Nt.mode){const St=JSON.parse(JSON.stringify(te)).reverse().filter(;jt.push(`.responsive23-${$t} { width: 100%; padding-top: 100%; }`);for(const Gt of St){const ne=`@media (max-width: ${Gt.domain}px) { .responsive23-${$t} { padding-top: ${Ge(1/Gt.aspectRatio*100,2)}%; } }`;jt.push(ne)}}"fixed"===Nt.mode&&jt.push(`.fixed23-${$t} { width: ${Nt.width}px !important; height: ${Nt.height}px !important}`),"external"===Nt.mode&&jt.push(`.external23-${$t} { width: 100%; }`);let ft=`<style>${jt.join(" ")}</style>\n<div id="container23-${$t}" class="${Nt.mode}23-${$t}" style="position: relative;"><iframe title="${oe}" src="${ee}/embed/${$t}" allow="fullscreen" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0"></iframe></div>\n<script src="${ee}/services/public/embed-code/${$t}"><\/script>`;const{vUserInfo:Et}=ot,yt=this.authQuery.getValue();if(ft=(null===(it=null===(Q=null==yt?void 0:yt.user)||void 0===Q?void 0:Q.userPreferences)||void 0===it?void 0:it.euOnly)?(0,Dt.replaceAllIOWithEU)(ft):(0,Dt.replaceAllEUWithIO)(ft),Et.euOnly&&(ft=(0,Dt.replaceAllIOWithEU)(ft)),wt&&"get"===wt)return ft;this.copyToClipboard(ft,"Embed Code")},this.copyDirectLink=K=>{var Q,it;const{content:ot,type:wt}=K,$t=this.document.URL;let Nt=`${$t.substr(0,$t.indexOf("/",$t.indexOf("//")+2))}/view/${ot.slug}`;const{vUserInfo:te}=ot,Jt=this.authQuery.getValue();if(Nt=(null===(it=null===(Q=null==Jt?void 0:Jt.user)||void 0===Q?void 0:Q.userPreferences)||void 0===it?void 0:it.euOnly)?(0,Dt.replaceAllIOWithEU)(Nt):(0,Dt.replaceAllEUWithIO)(Nt),te.euOnly&&(Nt=(0,Dt.replaceAllIOWithEU)(Nt)),wt&&"get"===wt)return Nt;this.copyToClipboard(Nt,"Direct Link")},this.copyiFrameCode=K=>{var Q,it;const{content:ot,type:wt}=K,{slug:$t}=ot,oe=ot.fileName?ot.fileName:this.quillService.deltaToString(ot.name),Jt=this.document.URL;let jt=`<iframe title="${oe}" src="${Jt.substr(0,Jt.indexOf("/",Jt.indexOf("//")+2))}/embed/${$t}" allow="fullscreen" style="padding:5px 0!important; width:100%!important; height:85vh!important; min-height:360px!important; max-height:1024px!important" frameborder="0"></iframe>`;const{vUserInfo:Ot}=ot,ht=this.authQuery.getValue();if(jt=(null===(it=null===(Q=null==ht?void 0:ht.user)||void 0===Q?void 0:Q.userPreferences)||void 0===it?void 0:it.euOnly)?(0,Dt.replaceAllIOWithEU)(jt):(0,Dt.replaceAllEUWithIO)(jt),Ot.euOnly&&(jt=(0,Dt.replaceAllIOWithEU)(jt)),wt&&"get"===wt)return jt;this.copyToClipboard(jt,"iFrame Code")},this.copySlug=K=>{const{content:Q,type:it}=K,ot=`${Q.slug}`;if(it&&"get"===it)return ot;this.copyToClipboard(ot,"Slug")};const j=this.document.URL;j.substr(0,j.indexOf("/",j.indexOf("//")+2)),this.dom2image=kt(this.http),this.messageBus.on(Rt.e6.Export,"CATCH_ALL",this.receiveExportEvent,this.componentDestroyed$)}}return ve.\u0275fac=ve.\u0275prov=ie.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})()},94625:(Xe,fe,k)=>{k.d(fe,{Y:()=>M});var J=k(74039),Ht=k(22604);let M=(()=>{class Rt extends Ht.K{constructor(){super(),this.renderEvent=new J.vpe,this.emitRenderStatus=(t="ready")=>{this.renderEvent.emit({type:"renderStatus",status:t,id:this.child.id,childType:this.child.type})}}}return Rt.\u0275fac=function(t){return new(t||Rt)},Rt.\u0275cmp=J.Xpm({type:Rt,selectors:[["layout-element"]],inputs:{child:"child"},outputs:{renderEvent:"renderEvent"},features:[J.qOj],decls:0,vars:0,template:),Rt})()},96220:(Xe,fe,k)=>{k.r(fe),k.d(fe,{SmartModule:()=>va});var J=k(18666),Ht=k(88772),M=k(5523),Rt=k(48934),Wt=k(61855),t=k(74039),kt=k(22604),W=k(87833),w=k(23331);const Ee=(0,w.X$)("tooltipAnimation",[(0,w.eR)("classic => void",[(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({opacity:1}),(0,w.jt)(".15s ease-in",(0,w.oB)({opacity:0}))])]),(0,w.eR)("void => sidebar-move-left",[(0,w.oB)({transform:"translateX(-100%)"}),(0,w.jt)("250ms ease-out",(0,w.oB)({transform:"translateX(0%)"}))]),(0,w.eR)("sidebar-move-left => void",(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({transform:"translateX(0%)"}),(0,w.jt)(".15s ease-in",(0,w.oB)({transform:"translateX(-100%)"}))])),(0,w.eR)("void => sidebar-move-right",[(0,w.oB)({transform:"translateX(100%)"}),(0,w.jt)("250ms ease-out",(0,w.oB)({transform:"translateX(0%)"}))]),(0,w.eR)("sidebar-move-right => void",(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({transform:"translateX(0%)"}),(0,w.jt)(".15s ease-in",(0,w.oB)({transform:"translateX(100%)"}))])),(0,w.eR)("void => sidebar-scale-left",[(0,w.oB)({transform:"rotateY(90deg)",transformOrigin:"left"}),(0,w.jt)("250ms ease-out",(0,w.oB)({transform:"rotateY(0)",transformOrigin:"left"}))]),(0,w.eR)("sidebar-scale-left => void",(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({transform:"rotateY(0)",transformOrigin:"left"}),(0,w.jt)(".15s ease-in",(0,w.oB)({transform:"rotateY(90deg)",transformOrigin:"left"}))])),(0,w.eR)("void => sidebar-scale-right",[(0,w.oB)({transform:"rotateY(-90deg)",transformOrigin:"right"}),(0,w.jt)("250ms ease-out",(0,w.oB)({transform:"rotateY(0)",transformOrigin:"right"}))]),(0,w.eR)("sidebar-scale-right => void",(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({transform:"rotateY(0)",transformOrigin:"right"}),(0,w.jt)(".15s ease-in",(0,w.oB)({transform:"rotateY(-90deg)",transformOrigin:"right"}))])),(0,w.eR)("void => sidebar-fade",[(0,w.oB)({opacity:0}),(0,w.jt)("250ms ease-out",(0,w.oB)({opacity:1}))]),(0,w.eR)("sidebar-fade => void",(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({opacity:1}),(0,w.jt)(".15s ease-in",(0,w.oB)({opacity:0}))])),(0,w.eR)("void => fullscreen-scale",[(0,w.oB)({transform:"scale(.5)",opacity:0}),(0,w.jt)(".25s ease-out",(0,w.oB)({transform:"scale(1)",opacity:1}))]),(0,w.eR)("fullscreen-scale => void",[(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({opacity:1,transform:"scale(1)"}),(0,w.jt)(".15s ease-in",(0,w.oB)({opacity:0,transform:"scale(0.5)"}))])]),(0,w.eR)("void => fullscreen-fade",[(0,w.oB)({opacity:0}),(0,w.jt)(".25s ease-out",(0,w.oB)({opacity:1}))]),(0,w.eR)("fullscreen-fade => void",[(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({opacity:1}),(0,w.jt)(".15s ease-in",(0,w.oB)({opacity:0}))])]),(0,w.eR)("void => fullscreen-move",[(0,w.oB)({transform:"translateY(-120%)"}),(0,w.jt)(".35s ease-out",(0,w.oB)({transform:"translateY(0%)"}))]),(0,w.eR)("fullscreen-move => void",[(0,w.ru)([(0,w.IO)("content-selector2",(0,w.jt)(".45s ease-in",(0,w.oB)({opacity:0})),{optional:!0}),(0,w.oB)({transform:"translateY(0%)"}),(0,w.jt)(".45s ease-in",(0,w.oB)({transform:"translateY(-120%)"}))])])]);var Ae=k(90846),de=k(71461),_e=k(22173),xt=k(5576);const Ve={enabled:!0,content:"",event:"click",type:"classic",position:"global",style:{font:{enabled:!0,position:"left",size:12,weight:"300",color:"#000000",fontFamily:"'Work Sans', sans-serif",letterSpacing:0,shadow:{x:0,y:0,blur:0,spread:0,color:"transparent"},lineheight:{value:"initial",unit:"em"},margin:{top:0,right:0,topUnit:"px",bottom:0,left:0,rightUnit:"px",bottomUnit:"px",leftUnit:"px"},padding:{top:10,right:10,topUnit:"px",bottom:10,left:10,rightUnit:"px",bottomUnit:"px",leftUnit:"px"}},background:{backgroundColor:"#fff"},boxShadow:{x:0,y:2,blur:10,spread:0,color:"rgba(0,0,0,0.4)"},closeButton:{icon:"cancel-1",iconPosition:"left",text:null,borderRadius:100,font:{enabled:!0,position:"left",size:12,weight:"300",color:"#fff",fontFamily:"'Work Sans', sans-serif",letterSpacing:0,shadow:{x:0,y:0,blur:0,spread:0,color:"transparent"},lineheight:{value:1.2,unit:"em"},margin:{top:5,right:5,topUnit:"px",bottom:5,left:5,rightUnit:"px",bottomUnit:"px",leftUnit:"px"},padding:{top:5,right:5,topUnit:"px",bottom:5,left:5,rightUnit:"px",bottomUnit:"px",leftUnit:"px"}},background:{backgroundColor:"#000"},boxShadow:{x:0,y:0,blur:0,spread:0,color:"transparent"},hoverStyle:{icon:"cancel-1",iconPosition:"left",text:null,borderRadius:100,font:{enabled:!0,position:"left",size:12,weight:"300",color:"#000",fontFamily:"'Work Sans', sans-serif",letterSpacing:0,shadow:{x:0,y:0,blur:0,spread:0,color:"transparent"},lineheight:{value:1.2,unit:"em"},margin:{top:5,right:5,topUnit:"px",bottom:5,left:5,rightUnit:"px",bottomUnit:"px",leftUnit:"px"},padding:{top:5,right:5,topUnit:"px",bottom:5,left:5,rightUnit:"px",bottomUnit:"px",leftUnit:"px"}},background:{backgroundColor:"#fff"},boxShadow:{x:0,y:2,blur:4,spread:0,color:"rgba(0,0,0,0.4)"}},position:{vertical:"top",horizontal:"right"},size:{mobile:{unit:"%",value:5},desktop:{unit:"%",value:5}}},animation:"move",scrollable:!0,classic:{theme:"default",maxWidth:{mobile:{unit:"%",value:93},desktop:{unit:"%",value:50}},maxHeight:{mobile:{unit:"%",value:50},desktop:{unit:"%",value:50}}},fullscreen:{background:{backgroundColor:"#fff"},width:{mobile:{unit:"%",value:100},desktop:{unit:"%",value:100}},height:{mobile:{unit:"%",value:100},desktop:{unit:"%",value:100}},content:{width:{mobile:{unit:"%",value:100},desktop:{unit:"%",value:100}},height:{mobile:{unit:"%",value:100},desktop:{unit:"%",value:100}}}},sidebar:{position:"left",overlayType:"overlay",width:{mobile:{unit:"%",value:100},desktop:{unit:"px",value:300}}}}};var Zt=k(16227),Me=k(51230),Oe=k(99933),Dt=k(12993),ye=k(87054),Te=k(74406),ie=k(66856),me=k(23588),Be=k(41312);const Ke=["tooltipWrapper"],tn=["tooltip"],He=["tooltipContent"],Ue=["closeButton"];function Ge(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",15,16),t.NdJ("contentSet",function(){t.CHM(n);const l=t.oxw(4);return t.KtG(l.tooltipContentReady())})("resize",function(l){t.CHM(n);const p=t.oxw(4);return t.KtG(p.resized(l))}),t.qZA()}if(2&o){const n=t.MAs(1),s=t.oxw().$implicit;t.oxw();const l=t.MAs(4),p=t.oxw(2);t.Q6J("deltaContent",p.advancedTooltip.content)("renderData",p.renderData)("preFilterData",p.preFilterData)("ngStyle",p.styleService.convertFontFormat(p.advancedTooltip.style.font))("item",s)("content",p.content)("displayScale",p.displayScale)("advancedTooltip",p.advancedTooltip)("tooltipContainer",l)("wyswigDiv",n)}}unction ve(o,d){if(1&o&&(t.ynx(0),t.YNc(1,Ge,2,10,"div",13),t.YNc(2,Qe,1,0,"hr",14),t.BQk()),2&o){const n=d.$implicit,s=d.last,l=t.oxw(3);t.xp6(1),t.Q6J("ngIf",l.content&&n&&l.doneAnimating&&!l.showDefaultTooltip),t.xp6(1),t.Q6J("ngIf",!s)}}function ze(o,d){if(1&o&&(t.ynx(0),t.TgZ(1,"span",26),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"format"),t.qZA(),t.TgZ(6,"span",26),t._uU(7),t.qZA(),t.BQk()),2&o){const n=t.oxw(4);t.xp6(2),t.hij(" ",n.valueFormat.prefix," "),t.xp6(2),t.Oqu(t.Dn7(5,3,n.value,n.valueFormat,!1)),t.xp6(3),t.hij(" ",n.valueFormat.suffix," ")}}unction Ce(o,d){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const n=t.oxw(4);t.xp6(1),t.Oqu(n.content.typeSpecific.noDataMessages.inline)}}unction ke(o,d){if(1&o&&(t.TgZ(0,"span",35),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit,s=t.oxw(4);t.xp6(1),t.Oqu(s.getFieldFormat(n).prefix)}}function Pe(o,d){if(1&o&&(t.TgZ(0,"span",36),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit,s=t.oxw(4);t.xp6(1),t.Oqu(s.getFieldFormat(n).suffix)}}function qt(o,d){if(1&o&&(t.TgZ(0,"span",31),t.YNc(1,ke,2,1,"span",32),t.ynx(2,33),t._uU(3),t.ALo(4,"format"),t.BQk(),t.YNc(5,Pe,2,1,"span",34),t.qZA()),2&o){const n=t.oxw().$implicit,s=t.oxw(4);t.xp6(1),t.Q6J("ngIf",s.getFieldFormat(n).prefix),t.xp6(1),t.Q6J("ngSwitch",s.getFieldType(n.field)),t.xp6(1),t.Oqu(t.Dn7(4,4,s.getItemValue(n),s.getFieldFormat(n),!1)),t.xp6(2),t.Q6J("ngIf",s.getFieldFormat(n).suffix)}}function gt(o,d){if(1&o&&(t.TgZ(0,"div",27),t.YNc(1,Le,2,1,"span",28),t.YNc(2,qt,6,8,"span",29),t.qZA()),2&o){const n=d.$implicit,s=t.oxw(4);t.Q6J("ngStyle",s.styleService.convertFontFormat(s.defaultTooltip.contentStyle)),t.xp6(1),t.Q6J("ngIf",s.getItemValue(n)&&n.label),t.xp6(1),t.Q6J("ngIf",s.getItemValue(n))}}const j=function(o){return{"additional-fields":o}};function z(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",18)(1,"div",19),t.NdJ("resize",function(l){t.CHM(n);const p=t.oxw(3);return t.KtG(p.resized(l))}),t.TgZ(2,"div",20),t._uU(3),t.qZA(),t.TgZ(4,"div",21)(5,"div",22)(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"div",23),t.YNc(9,ze,8,7,"ng-container",12),t.YNc(10,Pt,2,1,"span",12),t.YNc(11,Ce,2,1,"span",12),t.qZA()(),t.YNc(12,gt,3,3,"div",24),t._UZ(13,"div",25),t.qZA()()}if(2&o){const n=t.oxw(3);t.xp6(2),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.defaultTooltip.titleStyle)),t.xp6(1),t.Oqu(n.name),t.xp6(1),t.Q6J("ngClass",t.VKq(10,j,n.defaultTooltip.fields.length)),t.xp6(1),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.defaultTooltip.valueStyle)),t.xp6(2),t.Oqu(n.defaultTooltip.value.label),t.xp6(1),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.defaultTooltip.valueStyle)),t.xp6(1),t.Q6J("ngIf",null!==n.value&&n.valueFormat),t.xp6(1),t.Q6J("ngIf",null!==n.value&&!n.valueFormat),t.xp6(1),t.Q6J("ngIf",null===n.value),t.xp6(1),t.Q6J("ngForOf",n.defaultTooltip.fields)}}function K(o,d){if(1&o&&(t.TgZ(0,"span",41),t._uU(1),t.qZA()),2&o){const n=t.oxw(4);t.xp6(1),t.hij(" ",n.advancedTooltip.style.closeButton.text," ")}}function Q(o,d){if(1&o&&(t.TgZ(0,"span",41),t._uU(1),t.qZA()),2&o){const n=t.oxw(4);t.xp6(1),t.hij(" ",n.advancedTooltip.style.closeButton.hoverStyle.text," ")}}const it=function(o){return{"icon-only":o}};function ot(o,d){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",37,38),t.NdJ("mouseenter",function(){t.CHM(n);const l=t.oxw(3);return t.KtG(l.hoverCloseButton=!0)})("mouseleave",("click",function(){t.CHM(n);const l=t.oxw(3);return l.hoverCloseButton=!1,t.KtG(l.handleClose())}),t.TgZ(3,"button",39),t._UZ(4,"i"),t.YNc(5,K,2,1,"span",40),t.YNc(6,Q,2,1,"span",40),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw(3);t.xp6(1),t.Q6J("ngClass",n.closeButtonClasses),t.xp6(2),t.Q6J("ngStyle",n.hoverCloseButton?n.closeButtonHoverStyle:n.closeButtonStyle)("ngClass",t.VKq(8,it,!n.hoverCloseButton&&!n.advancedTooltip.style.closeButton.text||n.hoverCloseButton&&!n.advancedTooltip.style.closeButton.hoverStyle.text)),t.xp6(1),t.Gre("icon-",n.hoverCloseButton?n.advancedTooltip.style.closeButton.hoverStyle.icon:n.advancedTooltip.style.closeButton.icon,""),t.xp6(1),t.Q6J("ngIf",n.advancedTooltip.style.closeButton.text&&!n.hoverCloseButton),t.xp6(1),t.Q6J("ngIf",n.advancedTooltip.style.closeButton.hoverStyle.text&&n.hoverCloseButton)}}const wt=function $t(o,d){if(1&o&&(t.TgZ(0,"div",4,5),t._UZ(2,"div",6),t.TgZ(3,"div",7,8)(5,"div",9),t.YNc(6,ve,3,2,"ng-container",10),t.YNc(7,z,14,12,"div",11),t.qZA(),t.YNc(8,ot,7,10,"ng-container",12),t.qZA()()),2&o){const n=t.oxw(2);t.Udp("visibility",n.visible)("pointer-events","click"!==n.source?"none":null),t.Q6J("ngClass",t.l5B(14,wt,n.advancedTooltip.type,n.advancedTooltip.style.classic.theme,n.advancedTooltip.style.sidebar?"sidebar-"+n.advancedTooltip.style.sidebar.position:"",n.positionSet?"":"loading")),t.xp6(2),t.Udp("color",n.advancedTooltip.style.background.backgroundColor),t.Q6J("ngStyle",n.advancedTooltip.style.background),t.xp6(1),t.Udp("pointer-events","click"!==n.source?"none":null),t.Q6J("ngStyle",n.typeStyle),t.xp6(3),t.Q6J("ngForOf",n.context),t.xp6(1),t.Q6J("ngIf",n.content&&n.context&&n.doneAnimating&&n.showDefaultTooltip&&n.defaultTooltip),t.xp6(1),t.Q6J("ngIf","click"===n.source&&n.advancedTooltip.style.closeButton)}}function oe(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",1,2),t.NdJ("@tooltipAnimation.start",function(l){t.CHM(n);const p=t.oxw();return t.KtG(p.animationStart(l))})("@tooltipAnimation.done",function(l){t.CHM(n);const p=t.oxw();return t.KtG(p.animationDone(l))}),t.YNc(2,$t,9,19,"div",3),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("@tooltipAnimation",n.animation)("ngClass",n.tooltipType),t.xp6(2),t.Q6J("ngIf",n.hasContent)}}class te extends kt.K{constructor(d,n,s,l,p,S,L,B,X){super(),this.styleService=d,this.trackerService=n,this.eventBus=s,this.messageBus=l,this.element=p,this.cdr=S,this.renderer=L,this.breakPointManager=B,this.quillRendererService=X,this.visible="hidden",this.oldTooltipType="",this.tooltipType="",this.source="click",this.displayScale=1,this.changes=new t.vpe,this.close=new t.vpe,this.doneAnimating=!1,this.isOpen=!1,this.hasContent=!0,this.positionSet=!1,this.absoluteActive=!1,this.busLoaded=!1,this.typeStyle={},this.closeButtonStyle={},this.closeButtonHoverStyle={},this.closeButtonClasses=[],this.hoverCloseButton=!1,this.showDefaultTooltip=!1,this.defaultTooltipDefinition=Ve,this.tooltipMove=tt=>{if(this.isOpen&&"classic"===this.tooltipType){const{position:Ct}=tt;Ct&&(this.position=Ct),this.hasContent&&this.setPosition(!1)}},this.tooltipOpen=tt=>{const{advTooltip:Ct,context:mt,position:D,container:N}=tt;this.isOpen||(this.visible="hidden"),this.isOpen=!0,this.positionSet=!1,this.context=Array.isArray(mt)?mt:[mt],this.container=N,this.position=D,this.advancedTooltip=Ct,this.showDefaultTooltip=!this.advancedTooltip.enabled,this.trackClickDebounced(),this.isNotEmptyDelta(this.advancedTooltip.content)?(this.hasContent=!0,this.setCloseButtonStyle(),this.cdr.detectChanges(),this.setTypeStyle(),this.eventBus.tooltipChange.next({slug:this.content.slug,context:{active:!0,dataRef:mt}})):(this.hasContent=!1,this.isOpen=!1),this.cdr.detectChanges(),this.changes.emit()},this.tooltipClose=tt=>{this.isOpen=!1,this.visible="hidden",this.hasContent=!1,this.positionSet=!1,this.doneAnimating=!0,null!=tt&&tt.emitClose&&this.close.emit(),this.eventBus.tooltipChange.next({slug:this.content.slug,context:{active:!1,dataRef:null}}),this.messageBus.emit("TOOLTIP_CLOSED",[W.BV.ToolTip],this.content.localStorage.referenceID),this.cdr.detectChanges()},this.handleClose=this.contentUpdate=tt=>{tt.contentUpdate=!0,this.cdr.detectChanges()},this.setPosition=(tt=!1,Ct="click")=>{if("classic"!==this.tooltipType)return void console.log("[tooltip2] ERROR trying to set Position on non classic tooltip");if(!this.tooltipContainer)return;const{nativeElement:mt}=this.tooltipContainer,{clientWidth:D,clientHeight:N}=mt.parentElement.parentElement.parentElement,{maxWidth:Y,maxHeight:q}=this.advancedTooltip.style.classic,at=this.breakPointManager.isMobile(this.content.slug),zt=at?Y.mobile.value>=93?{value:93,unit:"%"}:Y.mobile:Y.desktop.value>=93?{value:93,unit:"%"}:Y.desktop,Tt=at?q.mobile:q.desktop,Yt={width:D,height:N};this.typeStyle=Object.assign(Object.assign({},this.typeStyle),{maxWidth:D/100*zt.value+"px",maxHeight:N/100*Tt.value+"px"}),this.removeAnchorClasses(this.tooltipContainer.nativeElement);const{width:Se,height:qe}=mt.getBoundingClientRect(),_a={width:Se,height:qe};if("click"!==this.source&&this.hasEmptyTooltipTheme){const Pn=mt.parentElement.parentElement.parentElement.getBoundingClientRect(),ya=this.container.getBoundingClientRect(),Ca=Math.abs(ya.bottom-Pn.bottom)+10;this.renderer.setStyle(this.tooltipWrapper.nativeElement,"transform","translate(-50%, 0px"),this.renderer.setStyle(this.tooltipWrapper.nativeElement,"left","50%"),this.renderer.setStyle(this.tooltipWrapper.nativeElement,"top","initial"),this.renderer.setStyle(this.tooltipWrapper.nativeElement,"bottom",`${Ca}px`),this.absoluteActive=!0}else{let Pn=this.getAnchorPosition(Yt,_a,this.position);this.renderer.setStyle(this.tooltipWrapper.nativeElement,"transform",`translate(${this.position.x}px, ${this.position.y}px`),Pn=this.calcOutOfBounds(Pn),this.renderer.addClass(this.tooltipContainer.nativeElement,Pn)}this.positionSet=!0,tt||this.showDefaultTooltip?setTimeout(100):this.cdr.detectChanges()},this.calcOutOfBounds=tt=>{const Ct=this.tooltipContent.nativeElement.getBoundingClientRect(),mt=this.element.nativeElement.parentElement.getBoundingClientRect();if(0===Ct.height||this.position.x<0||this.position.y<0||this.position.x>mt.width||this.position.y>mt.height)return tt;let D,N;const Y=26,q=this.closeButton?this.closeButton.nativeElement.getBoundingClientRect().height/2:0,at=this.closeButton?this.closeButton.nativeElement.getBoundingClientRect().width/2:0,dt=this.position.x<Ct.width/2+at+Y,Mt=this.position.x>mt.width-Ct.width/2-at-Y;return(this.position.x-Ct.width-at-Y<0&&Mt||this.position.x+Ct.width+at+Y>mt.width&&dt)&&(Mt&&(D=mt.width-(this.position.x+Ct.width/2+at)),dt&&(D=-1*(this.position.x-Ct.width/2-at)),tt=this.position.y>mt.height/2?"anchor-bottom":"anchor-top"),this.position.x-Ct.width-at<0&&"anchor-right"===tt&&(D=-1*(this.position.x-Ct.width-at)),Ct.height+this.position.y+Y+q>mt.height&&"anchor-top"===tt&&(N=-1*(Ct.top+Ct.height+Y+q-(mt.top+mt.height))),mt.top+this.position.y-Ct.height-Y-q<mt.top&&"anchor-bottom"===tt&&(N=-1*(mt.top+this.position.y-Ct.height-Y-q-mt.top)),D&&N?this.renderer.setStyle(this.tooltipContent.nativeElement,"transform",`translate(calc(-50% + ${D||0}px), ${N||0}px)`):D?this.renderer.setStyle(this.tooltipContent.nativeElement,"transform",`translateX(calc(-50% + ${D||0}px))`):N&&this.renderer.setStyle(this.tooltipContent.nativeElement,"transform",`translate(-50%, ${N||0}px)`),tt},this.animationStart=tt=>{"void"===tt.fromState&&(this.doneAnimating=!1)},this.animationDone=get animation(){const{type:d,style:n}=this.advancedTooltip;return d&&"classic"!==d?`${d}-${n.animation}${"sidebar"===d&&"fade"!==n.animation?`-${n.sidebar.position}`:""}`:"classic"}get globalPointerEvents(){if(this.source&&"click"!==this.source)return"none"}gOnChanges(d){this.content&&!this.busLoaded&&(this.busLoaded=!0,this.messageBus.on(W.cT.ContentUpdate,W.BV.ToolTip,this.contentUpdate,this.componentDestroyed$,this.content.localStorage.referenceID),this.messageBus.on("TOOLTIP_MOVE",W.BV.ToolTip,this.tooltipMove,this.componentDestroyed$,this.content.localStorage.referenceID),this.messageBus.on("TOOLTIP_OPEN",W.BV.ToolTip,this.tooltipOpen,this.componentDestroyed$,this.content.localStorage.referenceID),this.messageBus.on("TOOLTIP_CLOSE",W.BV.ToolTip,this.tooltipClose,this.componentDestroyed$,this.content.localStorage.referenceID),this.messageBus.on(W.K7.ContentResize,W.BV.Map,this.tooltipClose,this.componentDestroyed$),this.messageBus.on(W.cT.DisplayScale,"CATCH_ALL",this.tooltipClose,this.componentDestroyed$,this.content.localStorage.referenceID))}trackClickDebounced(){this.trackerService.postClickAction("tooltip_open",this.content?this.content.slug:"unknown")}isNotEmptyDelta(d){return this.quillRendererService.deltaToString(d).length>1}tooltipContentReady(){"classic"===this.tooltipType&&this.setPosition(!0)}setCloseButtonStyle(){var d,n;if(null!==(n=null===(d=this.advancedTooltip)||void 0===d?void 0:d.style)&&void 0!==n&&n.closeButton){if(this.closeButtonClasses=[],this.advancedTooltip.style.closeButton.position){const{horizontal:s,vertical:l}=this.advancedTooltip.style.closeButton.position;this.closeButtonClasses=[s,l]}else this.closeButtonClasses=["top","right"];if(this.closeButtonStyle=Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.advancedTooltip.style.closeButton.font)),this.advancedTooltip.style.closeButton.background),{borderRadius:`${this.advancedTooltip.style.closeButton.borderRadius}px`,boxShadow:this.styleService.convertShadow(this.advancedTooltip.style.closeButton.boxShadow),flexDirection:this.resolveFlexDirectionFromPosition(this.advancedTooltip.style.closeButton.iconPosition)}),this.closeButtonHoverStyle=Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.advancedTooltip.style.closeButton.hoverStyle.font)),this.advancedTooltip.style.closeButton.hoverStyle.background),{borderRadius:`${this.advancedTooltip.style.closeButton.hoverStyle.borderRadius}px`,boxShadow:this.styleService.convertShadow(this.advancedTooltip.style.closeButton.hoverStyle.boxShadow),flexDirection:this.resolveFlexDirectionFromPosition(this.advancedTooltip.style.closeButton.hoverStyle.iconPosition)}),!this.advancedTooltip.style.closeButton.text){const{padding:s}=this.advancedTooltip.style.closeButton.font,l=`${s.left}${s.leftUnit}`,p=`${s.top}${s.topUnit}`,S=`${s.bottom}${s.bottomUnit}`,L=`${s.right}${s.rightUnit}`;this.closeButtonStyle=Object.assign(Object.assign({},this.closeButtonStyle),{width:`calc(1em + ${l} + ${L})`,height:`calc(1em + ${p} + ${S})`})}if(!this.advancedTooltip.style.closeButton.hoverStyle.text){const{padding:s}=this.advancedTooltip.style.closeButton.hoverStyle.font,l=`${s.left}${s.leftUnit}`,p=`${s.top}${s.topUnit}`,S=`${s.bottom}${s.bottomUnit}`,L=`${s.right}${s.rightUnit}`;this.closeButtonHoverStyle=Object.assign(Object.assign({},this.closeButtonHoverStyle),{width:`calc(1em + ${l} + ${L})`,height:`calc(1em + ${p} + ${S})`})}}}setTypeStyle(d=!1){if(!this.tooltipWrapper)return;const n=this.tooltipWrapper.nativeElement,{style:s}=this.advancedTooltip;if(this.tooltipType=this.advancedTooltip.type,(this.tooltipType!==this.oldTooltipType||this.absoluteActive&&"click"===this.source)&&(this.resetStyle(n),this.oldTooltipType=this.tooltipType,this.absoluteActive=!1),this.typeStyle=Object.assign(Object.assign({},this.advancedTooltip.style.background),{boxShadow:this.styleService.convertShadow(s.boxShadow)}),"classic"===this.tooltipType)this.setPosition(d);else{this.visible="visible";const l=this.breakPointManager.isMobile(this.content.slug);if("sidebar"===this.tooltipType){const{width:p}=s.sidebar,S=l?p.mobile:p.desktop;this.renderer.setStyle(n,"width",S.value+S.unit),"right"===s.sidebar.position?(this.renderer.setStyle(n,"right","0px"),this.renderer.setStyle(n,"left","initial")):(this.renderer.removeStyle(n,"right"),this.renderer.removeStyle(n,"left"))}if("fullscreen"===this.tooltipType){const{width:p,height:S}=s.fullscreen,X=l?p.mobile:p.desktop,tt=l?S.mobile:S.desktop,Ct={value:100,unit:"%"},mt={value:100,unit:"%"};this.renderer.setStyle(n,"width",X.value+X.unit),this.renderer.setStyle(n,"height",tt.value+tt.unit),this.renderer.setStyle(n,"top",(100-tt.value)/2+"%"),this.renderer.setStyle(n,"left",(100-X.value)/2+"%"),this.typeStyle=Object.assign(Object.assign({},this.typeStyle),{position:"absolute",width:Ct.value+Ct.unit,height:mt.value+mt.unit,top:(100-mt.value)/2+"%",left:(100-Ct.value)/2+"%"})}}this.cdr.markForCheck()}getAnchorPosition(d,n,s){let l=[],p=this.closeButton?this.closeButton.nativeElement.getBoundingClientRect().height/2:0,S=this.closeButton?this.closeButton.nativeElement.getBoundingClientRect().width/2:0,L=[],B=[];s.y-n.height-p<0?L.push("top"):s.y+n.height+p>d.height&&!(s.y+n.height/2+p<d.height)&&L.push("bottom"),s.x-n.width-S<0&&s.x+n.width+S<d.width&&!(s.x-n.width/2-S>0)?B.push("left"):s.x+n.width+S>d.width&&!(s.x+n.width/2+S<d.width)&&B.push("right"),s.y-p-n.height/2>0&&L.includes("top")&&B.length>0&&(L=[]),l=[...L,...B];let X="";return X=0===l.length?"bottom":l.join("-"),`anchor-${X}`}popupClasses(d,n,s){let l,p="";return l=s.y+0<n.height?["top"]:s.y>d.height-n.height?["bottom"]:[],s.x-0<n.width/2?l.push("left"):s.x>d.width-n.width/2&&l.push("right"),2===l.length&&(l.includes("top")&&s.y-0-n.height/2>0&&l.splice(0,1),l.includes("bottom")&&s.y+0+n.height/2<d.height&&l.splice(0,1)),p=0===l.length?"bottom":l.join("-"),`anchor-${p}`}removeAnchorClasses(d){this.renderer.removeStyle(this.tooltipContent.nativeElement,"transform"),this.renderer.removeClass(d,"anchor-top"),this.renderer.removeClass(d,"anchor-top-left"),this.renderer.removeClass(d,"anchor-top-right"),this.renderer.removeClass(d,"anchor-bottom"),this.renderer.removeClass(d,"anchor-bottom-left"),this.renderer.removeClass(d,"anchor-bottom-right"),this.renderer.removeClass(d,"anchor-left"),this.renderer.removeClass(d,"anchor-right")}resetStyle(d){this.renderer.removeStyle(d,"transform"),this.renderer.removeStyle(d,"width"),this.renderer.removeStyle(d,"max-width"),this.renderer.removeStyle(d,"max-height"),this.renderer.removeStyle(d,"height"),this.renderer.removeStyle(d,"top"),this.renderer.removeStyle(d,"left"),this.renderer.removeStyle(d,"bottom"),this.renderer.removeStyle(d,"background-color"),this.renderer.removeStyle(d,"background-image"),this.renderer.removeStyle(d,"box-shadow")}resolveFlexDirectionFromPosition(d){switch(d){case"right":return"row-reverse";case"top":return"column";case"bottom":return"column-reverse"}return null}t valueFormat(){if((0,de.xm)(this.defaultTooltip,"value.format"))return(0,de.xm)(this.defaultTooltip,"value.format")}get value(){let d;return this.defaultTooltip.value&&void 0!==this.easyGetTypeValue(this.defaultTooltip.value.field,this.context)&&(d=this.easyGetTypeValue(this.defaultTooltip.value.field,this.context)),d}easyGetTypeValue(d,n){if(!d)return;d.substring(0,d.indexOf(":"));const l=d.substring(d.indexOf(":")+1);return n[0][l]}get name(){return this.defaultTooltip.name?this.easyGetTypeValue(this.defaultTooltip.name,this.context):""}getItemValue(d){const n=this.easyGetTypeValue(d.field,this.context);return"NA"!==n&&"N/A"!==n&&null!=n&&n}getFieldFormat(d){return d.format||this.content.typeSpecific.fields[(0,de.W7)(d.field)].format}getFieldType(d){return this.content.typeSpecific.fields[(0,de.W7)(d)].dataType}}te.\u0275fac=te.\u0275cmp=t.Xpm({type:te,selectors:[["tooltip2"]],viewQuery:hostVars:2,hostBindings:inputs:{preFilterData:"preFilterData",renderData:"renderData",options:"options",content:"content",displayScale:"displayScale"},outputs:{changes:"changes",close:"close"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["class","tooltip-wrapper",3,"ngClass",4,"ngIf"],[1,"tooltip-wrapper",3,"ngClass"],["tooltipWrapper",""],["class","tooltip",3,"visibility","pointerEvents","ngClass",4,"ngIf"],[1,"tooltip",3,"ngClass"],["tooltip",""],[1,"tip",3,"ngStyle"],[1,"content",3,"ngStyle"],["tooltipContent",""],[1,"tooltip-body","column"],[4,"ngFor","ngForOf"],["class","content-container defaultTooltipcontent",4,"ngIf"],[4,"ngIf"],["class","content-container","style","line-height: initial !important","resizeObserver","",3,"deltaContent","renderData","preFilterData","ngStyle","item","content","displayScale","advancedTooltip","tooltipContainer","wyswigDiv","contentSet","resize",4,"ngIf"],["class","m-1",4,"ngIf"],["resizeObserver","",1,"content-container",2,"line-height","initial !important",3,"deltaContent","renderData","preFilterData","ngStyle","item","content","displayScale","advancedTooltip","tooltipContainer","wyswigDiv","contentSet","resize"],["advancedTooltipWysiwigDiv",""],[1,"m-1"],[1,"content-container","defaultTooltipcontent"],["resizeObserver","",1,"default-tooltip-body","column","fullwidth",3,"resize"],[1,"header","bigger",3,"ngStyle"],[1,"main",3,"ngClass"],[1,"label",3,"ngStyle"],[1,"value","small",3,"ngStyle"],["class","additional",3,"ngStyle",4,"ngFor","ngForOf"],[1,"column","right"],[1,"small","quiet"],[1,"additional",3,"ngStyle"],["class","label",4,"ngIf"],["class","value",4,"ngIf"],[1,"label"],[1,"value"],["class","unit prefix",4,"ngIf"],[3,"ngSwitch"],["class","unit suffix",4,"ngIf"],[1,"unit","prefix"],[1,"unit","suffix"],[1,"close","clickable",3,"ngClass","mouseenter","mouseleave","click"],["closeButton",""],[1,"closer","center",3,"ngStyle","ngClass"],["class","no-shrink",4,"ngIf"],[1,"no-shrink"]],template:function(d,n){1&d&&t.YNc(0,oe,3,3,"div",0),2&d&&t.Q6J("ngIf",n.isOpen)},dependencies:[J.mk,J.sg,J.O5,J.PC,J.RF,ie._,me.P,Be.x],styles:['[_nghost-%COMP%]{--tooltip-spacing: 10px;--sqrt: 1.4142135623730950488016887242097;--tooltip-default-size: 23px;--rotated-tooltip-default-size: calc(var(--tooltip-default-size) / var(--sqrt))}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;pointer-events:none;z-index:5}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip-body[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{word-break:break-word}[_nghost-%COMP%]   .tooltip-wrapper.fullscreen[_ngcontent-%COMP%]{width:100%;height:100%;pointer-events:initial}[_nghost-%COMP%]   .tooltip-wrapper.fullscreen[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%]{position:absolute;top:0;left:0px;width:100%;height:100%;transform:translate(0)!important}[_nghost-%COMP%]   .tooltip-wrapper.fullscreen[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tooltip-wrapper.fullscreen[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .tooltip-wrapper.fullscreen[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .tooltip-body[_ngcontent-%COMP%]{overflow-y:auto;max-height:100%;width:100%}[_nghost-%COMP%]   .tooltip-wrapper.sidebar[_ngcontent-%COMP%]{height:100%;pointer-events:initial;max-height:100%;width:100%}[_nghost-%COMP%]   .tooltip-wrapper.sidebar[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%]{max-height:100%;height:100%;position:absolute;top:0px;left:0px;width:100%}[_nghost-%COMP%]   .tooltip-wrapper.sidebar[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tooltip-wrapper.sidebar[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto;width:100%}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%]{visibility:visible;display:inline-flex}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.loading[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{position:relative;box-shadow:0 2px 10px #0006;pointer-events:auto;display:flex;border-radius:2px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .tooltip-body[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .close.top.right[_ngcontent-%COMP%]{transform:translate(50%) translateY(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .close.bottom.right[_ngcontent-%COMP%]{transform:translate(50%) translateY(50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .close.top.left[_ngcontent-%COMP%]{transform:translate(-50%) translateY(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .close.bottom.left[_ngcontent-%COMP%]{transform:translate(-50%) translateY(50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{width:2px;height:23px;z-index:1;background:#fff;position:relative;box-shadow:0 0 2px #0006}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{content:"";width:10px;height:10px;border-radius:50%;position:absolute;border:0px solid #666;background-color:currentColor;box-shadow:0 0 2px #0006;left:50%;transform:translate(-50%) translateY(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.square[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{width:32px;height:16px;position:relative;z-index:1;transform:translate(-50%);clip-path:polygon(50% 100%,0 0,100% 0);margin-top:-1px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.none[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-left[_ngcontent-%COMP%]{flex-direction:row}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-left[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translateY(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-left.default[_ngcontent-%COMP%]{transform:translateY(-12px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-left.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{width:23px;height:2px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-left.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{left:0px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-left.square[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{width:16px;height:32px;transform:translateY(-50%);clip-path:polygon(100% 0,0 50%,100% 100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-left.none[_ngcontent-%COMP%]{transform:translate(var(--tooltip-spacing))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-right[_ngcontent-%COMP%]{flex-direction:row-reverse;transform:translate(-100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-right[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translateY(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-right.default[_ngcontent-%COMP%]{transform:translate(-100%) translateY(0)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-right.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{width:23px;height:2px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-right.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{left:initial;right:0px;transform:translate(50%) translateY(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-right.square[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{width:16px;height:32px;transform:translateY(-50%);clip-path:polygon(100% 50%,0 0,0 100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-right.none[_ngcontent-%COMP%]{transform:translate(calc(-100% - var(--tooltip-spacing)))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top.default[_ngcontent-%COMP%]{transform:translate(-1px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top.square[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{clip-path:polygon(50% 0,0 100%,100% 100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top.none[_ngcontent-%COMP%]{transform:translateY(var(--tooltip-spacing))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom[_ngcontent-%COMP%]{flex-direction:column-reverse;transform:translateY(-100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(-50%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom.default[_ngcontent-%COMP%]{transform:translateY(-100%) translate(-1px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{transform:translate(-50%) translateY(50%);bottom:0}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom.none[_ngcontent-%COMP%]{transform:translateY(calc(-100% - var(--tooltip-spacing)))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-left[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-left.default[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(var(--rotated-tooltip-default-size)) translateY(-5px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-left.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{transform:rotate(-45deg);left:8px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-left.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{top:-2px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-left.square[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(-16px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-left.square[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{clip-path:polygon(50% 0,0 100%,100% 100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-left.none[_ngcontent-%COMP%]{transform:translateY(var(--tooltip-spacing)) translate(var(--tooltip-spacing))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(-100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right.default[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(calc(-100% - 16px)) translateY(-5px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{transform:rotate(45deg);right:11.5px;top:0px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{top:-2px;bottom:auto}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right.square[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(calc(-100% + 16px))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right.square[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{clip-path:polygon(50% 0,0 100%,100% 100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-top-right.none[_ngcontent-%COMP%]{transform:translateY(var(--tooltip-spacing)) translate(calc(var(--tooltip-spacing) * -1))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-left[_ngcontent-%COMP%]{flex-direction:column-reverse;transform:translateY(-100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-left.default[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(16px) translateY(5px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-left.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{transform:rotate(-135deg);left:8px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-left.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{top:-2px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-left.square[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(-16px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-left.none[_ngcontent-%COMP%]{transform:translateY(calc(-100% - var(--tooltip-spacing))) translate(var(--tooltip-spacing))}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-right[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:flex-end;transform:translate(-100%) translateY(-100%)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-right.default[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(-16px) translateY(5px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-right.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{transform:rotate(135deg);right:8px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-right.default[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]:after{top:-2px}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-right.square[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{transform:translate(16px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-right.square[_ngcontent-%COMP%] > .tip[_ngcontent-%COMP%]{transform:translate(16px)}[_nghost-%COMP%]   .tooltip-wrapper.classic[_ngcontent-%COMP%] > .tooltip.anchor-bottom-right.none[_ngcontent-%COMP%]{transform:translateY(calc(-100% - var(--tooltip-spacing))) translate(calc(-100% - var(--tooltip-spacing)))}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;pointer-events:initial;z-index:1}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close.top[_ngcontent-%COMP%]{top:0px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close.right[_ngcontent-%COMP%]{right:0px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close.bottom[_ngcontent-%COMP%]{bottom:0px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close.left[_ngcontent-%COMP%]{left:0px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .closer[_ngcontent-%COMP%]{display:flex;outline:none;border:0px solid #ffffff;background-color:#000000e0;color:#fff;cursor:pointer;flex-shrink:0;width:max-content;position:relative}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .closer.icon-only[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%) translateY(-50%);color:currentColor}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .closer.icon-only[_ngcontent-%COMP%]:before{content:"";display:block;padding-top:100%}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#fff;z-index:1;background-repeat:no-repeat;background-position:center center;background-size:cover}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]{display:flex;max-width:420px;padding:10px}@media (max-width: 899px){[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]{max-width:100%}}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:1.1em;letter-spacing:.1px;font-weight:500}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .header.bigger[_ngcontent-%COMP%]{font-size:1.3em;padding-bottom:5px;width:100%;font-weight:500}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-bottom:1em}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .main.additional-fields[_ngcontent-%COMP%]{margin-bottom:5px;margin-left:-10px;padding-left:10px;margin-right:-10px;padding-right:10px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .main.additional-fields[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{padding-bottom:5px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:.7em;line-height:.7em;font-weight:400}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:2.5em;font-weight:400}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .value.small[_ngcontent-%COMP%]{font-size:1.5em}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:.7em}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .additional[_ngcontent-%COMP%]{position:relative;padding-bottom:2px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .additional[_ngcontent-%COMP%]:before{content:"";position:absolute;width:0px;border-bottom:1px solid transparent;transition:all .23s ease-out;bottom:1px;opacity:.5;left:50%}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .additional[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{transition:all .23s ease-out;padding-right:8px;padding-bottom:2px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .additional[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:400;transition:all .23s ease-out;display:inline-block}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .additional[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{padding-right:5px}[_nghost-%COMP%]   .tooltip-wrapper[_ngcontent-%COMP%]   .defaultTooltipcontent[_ngcontent-%COMP%]   .additional[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{padding-left:5px}'],data:{animation:[Ee,Ae.BX]},changeDetection:0}),(0,Wt.gn)([(0,xt.T)(300)],te.prototype,"trackClickDebounced",null);var Jt=k(20687),ee=k(96572),jt=k(96669),Ot=k(94625),ht=k(28597),rt=k(2928),pt=k(24663),ft=k(88664),Et=k(37750);const yt=["menuButton"];function vt(o,d){if(1&o&&t._UZ(0,"i"),2&o){const n=t.oxw(2);t.Gre("icon-",n.options.icon,"")}}function St(o,d){if(1&o&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("ngStyle",n.textStyle),t.xp6(1),t.Oqu(n.options.text)}}function Gt(o,d){if(1&o&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("ngStyle",n.textStyle),t.xp6(1),t.Oqu(n.options.hoverText)}}const ne=function(o){return{"icon-only":o}};function Qt(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"a",2),t.NdJ("mouseenter",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.hoverButton=!0)})("mouseleave",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.hoverButton=!1)}),t.YNc(1,vt,1,3,"i",3),t.YNc(2,St,2,2,"span",4),t.YNc(3,Gt,2,2,"span",4),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("href",n.options.link&&n.options.link.length>0?n.options.link:n.viewLink,t.LSH)("ngClass",t.VKq(7,ne,!n.hoverButton&&!n.options.text||n.hoverButton&&!n.options.hoverText))("ngStyle",n.hoverButton?n.buttonHoverStyle:n.buttonStyle),t.uIk("aria-label",n.options.text||n.options.action),t.xp6(1),t.Q6J("ngIf",n.options.icon),t.xp6(1),t.Q6J("ngIf",n.options.text&&!n.hoverButton),t.xp6(1),t.Q6J("ngIf",n.options.hoverText&&n.hoverButton)}}function ue(o,d){if(1&o&&t._UZ(0,"i"),2&o){const n=t.oxw(2);t.Gre("icon-",n.options.icon,"")}}const se=function(o){return[o]};function Ut(o,d){if(1&o&&t._UZ(0,"i",8),2&o){const n=t.oxw(2);t.Q6J("ngClass",t.VKq(1,se,n.menuIconClass(n.config.menuOpen)))}}function ae(o,d){if(1&o&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("ngStyle",n.textStyle),t.xp6(1),t.Oqu(n.options.text)}}function re(o,d){if(1&o&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("ngStyle",n.textStyle),t.xp6(1),t.Oqu(n.options.hoverText)}}const At=function(o,d,n){return{"icon-only":o,"is-active":d,"to-top":n}};function Xt(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.buttonClick())})("mouseenter",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.hoverButton=!0)})("mouseleave",,t.YNc(1,ue,1,3,"i",3),t.YNc(2,Ut,1,3,"i",7),t.YNc(3,ae,2,2,"span",4),t.YNc(4,re,2,2,"span",4),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("ngClass",t.kEZ(7,At,!n.hoverButton&&!n.options.text||n.hoverButton&&!n.options.hoverText,n.config.menuOpen,n.config.menuOpen&&"menu"===n.options.action))("ngStyle",n.hoverButton?n.buttonHoverStyle:n.buttonStyle),t.uIk("aria-label",n.options.text||n.options.action),t.xp6(1),t.Q6J("ngIf",n.options.icon&&"menu"!==n.options.action),t.xp6(1),t.Q6J("ngIf",n.options.icon&&"menu"===n.options.action),t.xp6(1),t.Q6J("ngIf",n.options.text&&!n.hoverButton),t.xp6(1),t.Q6J("ngIf",n.options.hoverText&&n.hoverButton)}}let ct=(()=>{class o extends Ot.Y{constructor(n,s,l,p,S){super(),this.messageBus=n,this.styleService=s,this.trackerService=l,this.sanitizer=p,this.globalService=S,this.buttonEvent=new t.vpe,this.viewLink="https://23degrees.io",this.hoverButton=!1,this.buttonClick=()=>{this.buttonEvent.emit({type:"click",action:this.options.action}),this.options&&"menu"!==this.options.action&&this.trackerService.postClickAction(`button_${this.options.action}`,this.content.slug),this.messageBus.emit("LAYOUT_EVENT",["CHART"],{type:"click",action:this.options.action},this.config.referenceID),"reload"===this.options.action&&this.reloadAnimation()},this.reloadAnimation=()=>{if(ft.ChartTypes.includes(this.content.type)){const{referenceID:L}=this.content.localStorage,B=(0,rt.KQ)(this.content.typeSpecific.dimensions),X=(0,pt.cloneObject)(this.config.data);for(const tt of this.config.data)tt[B]=0;this.content.typeSpecific.chart.animation.enabled=!1,this.messageBus.emit(W.cT.RenderData,[W.BV.Chart],{content:this.content,data:this.config.data,preRenderData:this.config.preRenderData},L),setTimeout(()=>{for(let tt=0;tt<this.config.data.length;tt++)this.config.data[tt][B]=X[tt][B];this.content.typeSpecific.chart.animation.enabled=!0,this.messageBus.emit(W.K7.ReloadContentBySlug,[W.BV.ContentSelector],{slug:this.content.slug,options:{requestRenderData:!0,checkForUpdate:!0}},this.config.referenceID)},0)}else this.messageBus.emit(W.K7.ReloadContentBySlug,[W.BV.ContentSelector],{slug:this.content.slug,options:{requestRenderData:!0,checkForUpdate:!0}},this.config.referenceID)},this.menuIconClass=L=>L?"icon-cancel-1":`icon-${this.options.icon}`,this.baseUrl=this.globalService.baseUrl()}get buttonStyle(){let n=Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.options.font)),this.options.background),{borderRadius:`${this.options.borderRadius}px`,boxShadow:this.styleService.convertShadow(this.options.boxShadow),flexDirection:this.resolveFlexDirectionFromPosition(this.options.iconPosition)});const{padding:s,margin:l}=n,p=`${s.top}${s.topUnit}`,S=`${s.bottom}${s.bottomUnit}`,L=`${l.top}${l.topUnit}`,B=`${l.bottom}${l.bottomUnit}`;return n=Object.assign(Object.assign({},n),{maxHeight:`calc(1em + ${p} + ${S} + ${L} + ${B})`}),(0,ht.R)(n),n}get buttonHoverStyle(){let n=Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.options.hoverFont)),this.options.hoverBackground),{borderRadius:`${this.options.borderRadius}px`,boxShadow:this.styleService.convertShadow(this.options.hoverBoxShadow),flexDirection:this.resolveFlexDirectionFromPosition(this.options.iconPosition)});const{padding:s,margin:l}=n,p=`${s.top}${s.topUnit}`,S=`${s.bottom}${s.bottomUnit}`,L=`${l.top}${l.topUnit}`,B=`${l.bottom}${l.bottomUnit}`;return n=Object.assign(Object.assign({},n),{maxHeight:`calc(1em + ${p} + ${S} + ${L} + ${B})`}),(0,ht.R)(n),n}get textStyle(){return{margin:this.styleService.convertSpacing(this.options.textMargin)}}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){if(this.content){this.styleService.setContent(this.content);const s=this.globalService.getParameters();s.slug?(this.viewLink=`${this.baseUrl}/view/${s.slug}`,s.childSlug&&(this.viewLink=`${this.baseUrl}/viewSub/${s.slug}/${s.childSlug}`)):this.viewLink=`${this.baseUrl}/view/${this.content.slug}`}}resolveFlexDirectionFromPositionreturn o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-button"]],viewQuery:function(n,s){if(1&n&&t.Gf(yt,5),2&n){let l;t.iGM(l=t.CRH())&&(s.menuButton=l.first)}},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{buttonEvent:"buttonEvent"},features:[t.qOj,t.TTD],decls:3,vars:2,consts:[["target","_blank","rel","noopener noreferrer","class","action-button grow",3,"href","ngClass","ngStyle","mouseenter","mouseleave",4,"ngIf"],["class","action-button grow",3,"ngClass","ngStyle","click","mouseenter","mouseleave",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"action-button","grow",3,"href","ngClass","ngStyle","mouseenter","mouseleave"],[3,"class",4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[1,"action-button","grow",3,"ngClass","ngStyle","click","mouseenter","mouseleave"],["class","menu-button",3,"ngClass",4,"ngIf"],[1,"menu-button",3,"ngClass"]],template:function(n,s){1&n&&(t.ynx(0),t.YNc(1,Qt,4,9,"a",0),t.YNc(2,Xt,5,11,"button",1),t.BQk()),2&n&&(t.xp6(1),t.Q6J("ngIf","link"===s.options.action),t.xp6(1),t.Q6J("ngIf","link"!==s.options.action))},dependencies:[J.mk,J.O5,J.PC],styles:['[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   [class^=icon-][_ngcontent-%COMP%]:before, [_nghost-%COMP%]   [class*=" icon-"][_ngcontent-%COMP%]:before{margin:0}[_nghost-%COMP%]   .action-button[_ngcontent-%COMP%]{display:flex;outline:none;border:0;background-color:transparent;color:#fff;cursor:pointer;transition:background-color .2s ease-out;flex-shrink:0;width:max-content;position:relative;align-items:center;white-space:pre}[_nghost-%COMP%]   .action-button[_ngcontent-%COMP%]:hover{color:var(--tt-primary)}[_nghost-%COMP%]   .action-button.icon-only[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%) translateY(-50%)}[_nghost-%COMP%]   .action-button.icon-only[_ngcontent-%COMP%]:before{content:"";display:block;padding-top:100%}[_nghost-%COMP%]   .action-button.to-top[_ngcontent-%COMP%]{z-index:10}[_nghost-%COMP%]   .menu-button[_ngcontent-%COMP%]{display:flex;margin:0;padding:0;border:0;cursor:pointer;z-index:10;background-color:transparent}[_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]{width:16px;height:16px;position:relative;transition-property:opacity,filter;transition-duration:.15s;transition-timing-function:linear}[_nghost-%COMP%]   .menu-icon.is-active[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%], [_nghost-%COMP%]   .menu-icon.is-active[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .menu-icon.is-active[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:after{background-color:var(--button-color)}[_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:block;top:6px;left:0;margin:0!important;padding:0!important}[_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%], [_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:after{width:14px;height:2px;border-radius:1px;position:absolute;background-color:var(--button-color);transition-property:transform;transition-duration:.15s;transition-timing-function:ease}[_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:after{content:"";display:block}[_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:before{top:-4px}[_nghost-%COMP%]   .menu-icon[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:after{bottom:-4px}[_nghost-%COMP%]   .menu-icon.spin[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{transition-duration:.22s;transition-timing-function:cubic-bezier(.55,.055,.675,.19)}[_nghost-%COMP%]   .menu-icon.spin[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:before{transition:top .1s .25s ease-in,opacity .1s ease-in}[_nghost-%COMP%]   .menu-icon.spin[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:after{transition:bottom .1s .25s ease-in,transform .22s cubic-bezier(.55,.055,.675,.19)}[_nghost-%COMP%]   .menu-icon.spin.is-active[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{transform:rotate(225deg);transition-delay:.12s;transition-timing-function:cubic-bezier(.215,.61,.355,1)}[_nghost-%COMP%]   .menu-icon.spin.is-active[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:before{top:0;opacity:0;transition:top .1s ease-out,opacity .1s .12s ease-out}[_nghost-%COMP%]   .menu-icon.spin.is-active[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]:after{bottom:0;transform:rotate(-90deg);transition:bottom .1s ease-out,transform .22s .12s cubic-bezier(.215,.61,.355,1)}']}),o})();var bt=k(15524),Vt=k(39872);const Kt=["element"],le=["chart"];function It(o,d){if(1&o&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Oqu(n.content.typeSpecific.noDataMessages.visual)}}function en(o,d){1&o&&(t.TgZ(0,"div",3),t._uU(1,"Series must contain more than 1 value"),t.qZA())}const wn=function(o,d){return{"hide-chart":o,"loaded-view":d}};let En=(()=>{class o extends Ot.Y{constructor(n,s,l,p){super(),this.chartManager=n,this.messageBus=s,this.cdr=l,this.ngZone=p,this.chartEvent=new t.vpe,this.loadedView=!1,this.chartStyle={},this.chartNewStyle={width:"100%",height:"100%"},this.busLoaded=!1,this.containerCreated=!1,this.isLayoutReadyForChart=!1,this.noData=!1,this.noSeries=!1,this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()},this.receiveLayoutReady=S=>{this.isLayoutReadyForChart=!0,this.updateChartSize(!0,"receiveLayoutReady")},this.resizeChart=S=>{this.updateChartSize(!1,"resizeChart")},this.handleScroll=S=>{this.messageBus.emit("TOOLTIP_CLOSE",[W.BV.ToolTip],{},this.config.referenceID)},this.updateChartSize=(S,L)=>{if(!this.config||!this.chartManager||!this.containerCreated)return;const{offsetWidth:B,offsetHeight:X}=this.chart.nativeElement;if(0===B||0===X||isNaN(B)||isNaN(X))return;const{content:mt,data:D,range:N}=this.config;mt&&D&&N&&(S||B!==this.prevChartWidth||X!==this.prevChartHeight)&&(this.prevChartWidth=B,this.prevChartHeight=X,this.ngZone.runOutsideAngular(()=>{this.chartManager.updateContentData(mt,D,N,B),this.isLayoutReadyForChart&&(this.chartManager.updateChartContainerSize(B,X-1),this.chartManager.updateChart())}),this.safeDetectChanges())}}ngOnInit(){!this.chartManager||this.chartManager.getAction.pipe((0,bt.R)(this.componentDestroyed$)).subscribe(n=>{"animationStart"===n.eventType&&(this.loadedView=!1,this.messageBus.emit("RENDER_START",[W.BV.ContentSelector],{},this.config.referenceID)),"animationDone"===n.eventType&&(this.loadedView=!0,this.messageBus.emit("RENDER_FINISH",[W.BV.ContentSelector,W.BV.Filter],{},this.config.referenceID),this.safeDetectChanges()),"isValid"===n.eventType&&(this.noSeries=!n.item)})}ngAfterViewInit(){this.ngZone.runOutsideAngular(,this.containerCreated=!0,this.updateChartSize(!0,"ngAfterViewInit"),this.emitRenderStatus()}ngOnChanges(n){var s,l;setTimeout(()=>{this.updateChartSize(!0,"ngOnChanges")}),this.busLoaded||(this.busLoaded=!0,this.messageBus.on("LAYOUT_READY_FOR_CHART",W.BV.Chart,this.receiveLayoutReady,this.componentDestroyed$,this.config.referenceID)),this.noData=0===(null===(l=null===(s=this.config)||void 0===s?void 0:s.data)||void 0===l?void 0:l.length)}ngOnDestroy(){this.chartManager&&this.ngZone.runOutsideAngular(,super.ngOnDestroy()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Vt.e,8),t.Y36(Dt.Y),t.Y36(t.sBO),t.Y36(t.R0b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-chart"]],viewQuery:inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{chartEvent:"chartEvent"},features:[t.qOj,t.TTD],decls:4,vars:9,consts:[["resizeObserver","",1,"chart","viz",3,"debounce","caller","ngStyle","ngClass","resize","scroll"],["chart",""],["class","no-data loaded-view",4,"ngIf"],[1,"no-data","loaded-view"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("resize",function(p){return s.resizeChart(p)})("scroll",function(p){return s.handleScroll(p)}),t.qZA(),t.YNc(2,It,2,1,"div",2),t.YNc(3,en,2,0,"div",2)),2&n&&(t.Q6J("debounce",100)("caller","#chart")("ngStyle",s.chartStyle)("ngClass",t.WLB(6,wn,s.noData||s.noSeries,s.loadedView)),t.xp6(2),t.Q6J("ngIf",s.noData),t.xp6(1),t.Q6J("ngIf",s.noSeries))},dependencies:[J.mk,J.O5,J.PC,me.P],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .chart[_ngcontent-%COMP%]{display:flex;flex-grow:1;position:relative;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]   .chart.hide-chart[_ngcontent-%COMP%]{visibility:hidden;opacity:0;pointer-events:none}[_nghost-%COMP%]     svg{display:block;position:absolute}[_nghost-%COMP%]     .chart-overlay{display:block;overflow:hidden;position:absolute;pointer-events:none}[_nghost-%COMP%]     .chart-overlay .overlay-values{display:block;position:absolute;margin:0;padding:0}[_nghost-%COMP%]     .chart-overlay .overlay-labelAxis{display:block;position:absolute;margin:0;padding:0}[_nghost-%COMP%]     .chart-overlay .overlay-labelAxis .quill-container>div{max-width:100%;pointer-events:initial}[_nghost-%COMP%]     .chart-overlay .overlay-valueAxis{display:block;position:absolute;margin:0;padding:0}[_nghost-%COMP%]     .chart-overlay .quill-container{display:flex;position:absolute;top:0;left:0}[_nghost-%COMP%]     .chart-overlay .quill-container.rotate div{text-align:right!important}[_nghost-%COMP%]     .chart-overlay .quill-container.reverse div{flex-direction:column-reverse}[_nghost-%COMP%]     .chart-overlay .quill-container.right div p{text-align:right!important}[_nghost-%COMP%]     .chart-overlay .quill-container.left div p{text-align:left!important}[_nghost-%COMP%]     .chart-overlay .quill-container.grow{flex:1 1 auto}[_nghost-%COMP%]     .chart-overlay .quill-container.grow>div{flex:1 1 auto}[_nghost-%COMP%]     .chart-overlay .quill-container div{display:flex;flex-direction:column;max-width:100%;overflow-wrap:break-word}[_nghost-%COMP%]     .chart-overlay .quill-container p{margin:0;padding:0;width:100%;display:inline-block}[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;justify-content:center;align-items:center}"],changeDetection:0}),o})();var xe=k(86793),nn=k(8212),on=k(36913),eo=k(14642),no=k(31755),io=k(43105),oo=k(12946);function qn(...o){const d=(0,oo.jO)(o);return d?(0,io.z)(qn(...o),(0,no.Z)(d)):(0,on.e)((n,s)=>{(0,nn.l)([n,...(0,eo.k)(o)])(s)})}ar Xn=k(83034),ao=k(26105);const ro=["chartTemplate"],lo=["chartContainer"];function co(o,d){}function uo(o,d){if(1&o&&(t.TgZ(0,"div",4),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Oqu(n.content.typeSpecific.noDataMessages.visual)}}const po=function(o,d){return{"hide-chart":o,"loaded-view":d}};let ho=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.messageBus=n,this.cdr=s,this.toursService=l,this.chartEvent=new t.vpe,this.boundsReady$=new xe.x,this.layoutReady$=new xe.x,this.loadedView=!1,this.loadedChart=!1,this.prevBounds={width:0,height:0},this.busLoaded=!1,this.noData=!1,this.noSeries=!1,this.isLayoutReadyForChart=!1,this.displayScale=1,this.fontScale=1,this.receiveLayoutReady=p=>{this.isLayoutReadyForChart=!0,this.layoutReady$.next(!0)},this.initChart=p=>(0,Wt.mG)(this,void 0,void 0,function*(){const S=yield Promise.all([k.e(3323),k.e(2245)]).then(k.bind(k,32245));this.chartTemplate.clear();const L=this.chartTemplate.createComponent(S.LineChartComponent);this.lineChartComponent=L.instance,this.lineChartComponent.config=this.config,this.lineChartComponent.content=this.content,this.lineChartComponent.options=this.options,this.lineChartComponent.bounds=p,this.emitRenderStatus(),this.loadedChart=!0,this.loadedView=!0,this.cdr.detectChanges()}),this.updateChart=(p="unknown")=>{var S,L;this.noData=!((null===(L=null===(S=this.config)||void 0===S?void 0:S.data)||void 0===L?void 0:L.length)>0),this.noData||this.lineChartComponent.updateChart(p)},this.getContainerSize=(p="")=>{let{offsetWidth:S,offsetHeight:L}=this.chartContainer.nativeElement;return{width:S,height:L}},this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()}}ngOnInit(){this.layoutReady$.pipe((0,bt.R)(this.componentDestroyed$),so(this.boundsReady$),(0,Xn.U)().subscribe(n=>{this.prevBounds=n.bounds,!this.loadedChart&&n.layout?this.initChart(n.bounds):(this.lineChartComponent.bounds=n.bounds,this.updateChart("boundsReady$"))})}ngOnChanges(n){var s,l,p;if(this.busLoaded||(this.busLoaded=!0,this.messageBus.on("LAYOUT_READY_FOR_CHART",W.BV.Chart,this.receiveLayoutReady,this.componentDestroyed$,this.config.referenceID)),this.noData=!((null===(l=null===(s=this.config)||void 0===s?void 0:s.data)||void 0===l?void 0:l.length)>0),null!==(p=this.lineChartComponent)&&void 0!==p&&p.initializedChart){this.lineChartComponent.config=this.config,this.lineChartComponent.content=this.content,this.lineChartComponent.options=this.options;const S=this.getContainerSize("resizeChart");S.width===this.prevBounds.width&&S.height===this.prevBounds.height&&this.updateChart("ngOnChanges")}}ngOnDestroy(){super.ngOnDestroy()}resizeChart(n){const s=this.getContainerSize("resizeChart");this.boundsReady$.next(s)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Dt.Y),t.Y36(t.sBO),t.Y36(ao.T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-tt-charts"]],viewQuery:function(n,s){if(1&n&&(t.Gf(ro,7,t.s_b),t.Gf(lo,5)),2&n){let l;t.iGM(l=t.CRH())&&(s.chartTemplate=l.first),t.iGM(l=t.CRH())&&(s.chartContainer=l.first)}},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{chartEvent:"chartEvent"},features:[t.qOj,t.TTD],decls:5,vars:6,consts:[["resizeObserver","",1,"chartContainer",3,"debounce","ngClass","resize"],["chartContainer",""],["chartTemplate",""],["class","no-data loaded-view",4,"ngIf"],[1,"no-data","loaded-view"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("resize",function(p){return s.resizeChart(p)}),t.YNc(2,co,0,0,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(4,uo,2,1,"div",3)),2&n&&(t.Q6J("debounce",100)("ngClass",t.WLB(3,po,s.noData||s.noSeries,s.loadedView)),t.xp6(4),t.Q6J("ngIf",s.noData))},dependencies:[J.mk,J.O5,me.P],styles:["[_nghost-%COMP%]   .chartContainer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-grow:1}[_nghost-%COMP%]   .chartContainer.hide-chart[_ngcontent-%COMP%]{visibility:hidden;opacity:0;pointer-events:none}[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;justify-content:center;align-items:center}"],changeDetection:0}),o})();var De=k(684),Bt=k(71855),ti=k(15218),mn=k(71628),Fe=k(87338),ei=k(58747),ni=k(7793),sn=k(97530),ii=k(73690);const pe=["gutterEls"];function an(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",2,3),t.NdJ("keydown",function(l){t.CHM(n);const p=t.oxw().index,S=t.oxw();return t.KtG(S.startKeyboardDrag(l,2*p+1,p+1))})("mousedown",function(l){t.CHM(n);const p=t.oxw().index,S=t.oxw();return t.KtG(S.startMouseDrag(l,2*p+1,p+1))})("touchstart",function(l){t.CHM(n);const p=t.oxw().index,S=t.oxw();return t.KtG(S.startMouseDrag(l,2*p+1,p+1))})("mouseup",function(l){t.CHM(n);const p=t.oxw().index,S=t.oxw();return t.KtG(S.clickGutter(l,p+1))})("touchend",function(l){t.CHM(n);const p=t.oxw().index,S=t.oxw();return t.KtG(S.clickGutter(l,p+1))}),t._UZ(2,"div",4),t.qZA()}if(2&o){const n=t.oxw(),s=n.index,l=n.$implicit,p=t.oxw();t.Udp("flex-basis",p.gutterSize,"px")("order",2*s+1),t.uIk("aria-label",p.gutterAriaLabel)("aria-orientation",p.direction)("aria-valuemin",l.minSize)("aria-valuemax",l.maxSize)("aria-valuenow",l.size)("aria-valuetext",p.getAriaAreaSizeText(l.size))}}function An(o,d){1&o&&t.YNc(0,an,3,10,"div",1),2&o&&t.Q6J("ngIf",!1===d.last)}const vn=["*"];function Je(o){if(void 0!==o.changedTouches&&o.changedTouches.length>0)return{x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(void 0!==o.clientX&&void 0!==o.clientY)return{x:o.clientX,y:o.clientY};if(void 0!==o.currentTarget){const d=o.currentTarget;return{x:d.offsetLeft,y:d.offsetTop}}return null}function _n(o,d,n){return Math.abs(o.x-d.x)<=n&&Math.abs(o.y-d.y)<=n}function Ln(o,d){const n=o.nativeElement.getBoundingClientRect();return"horizontal"===d?n.width:n.height}function Ze(o){return"boolean"==typeof o?o:"false"!==o}function be(o,d){return null==o?d:(o=Number(o),!isNaN(o)&&o>=0?o:d)}function kn(o,d){if("percent"===o){const n=d.reduce((s,l)=>null!==l?s+l:s,0);return d.every(&&n>99.9&&n<100.1}if("pixel"===o)return 1===d.filter(.length}function rn(o){return null===o.size?null:!0===o.component.lockSize?o.size:null===o.component.minSize?null:o.component.minSize>o.size?o.size:o.component.minSize}function ln(o){return null===o.size?null:!0===o.component.lockSize?o.size:null===o.component.maxSize?null:o.component.maxSize<o.size?o.size:o.component.maxSize}function Re(o,d,n,s){return d.reduce((l,p)=>{const S=function oi(o,d,n,s){return 0===n?{areaSnapshot:d,pixelAbsorb:0,percentAfterAbsorption:d.sizePercentAtStart,pixelRemain:0}:0===d.sizePixelAtStart&&n<0?{areaSnapshot:d,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:n}:"percent"===o?function si(o,d,n){const l=(o.sizePixelAtStart+d)/n*100;if(d>0){if(null!==o.area.maxSize&&l>o.area.maxSize){const p=o.area.maxSize/100*n;return{areaSnapshot:o,pixelAbsorb:p,percentAfterAbsorption:o.area.maxSize,pixelRemain:o.sizePixelAtStart+d-p}}return{areaSnapshot:o,pixelAbsorb:d,percentAfterAbsorption:l>100?100:l,pixelRemain:0}}if(d<0){if(null!==o.area.minSize&&l<o.area.minSize){const p=o.area.minSize/100*n;return{areaSnapshot:o,pixelAbsorb:p,percentAfterAbsorption:o.area.minSize,pixelRemain:o.sizePixelAtStart+d-p}}return l<0?{areaSnapshot:o,pixelAbsorb:-o.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:d+o.sizePixelAtStart}:{areaSnapshot:o,pixelAbsorb:d,percentAfterAbsorption:l,pixelRemain:0}}}(d,n,s):"pixel"===o?function ai(o,d,n){const s=o.sizePixelAtStart+d;return d>0?null!==o.area.maxSize&&s>o.area.maxSize?{areaSnapshot:o,pixelAbsorb:o.area.maxSize-o.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:s-o.area.maxSize}:{areaSnapshot:o,pixelAbsorb:d,percentAfterAbsorption:-1,pixelRemain:0}:d<0?null!==o.area.minSize&&s<o.area.minSize?{areaSnapshot:o,pixelAbsorb:o.area.minSize+d-s,percentAfterAbsorption:-1,pixelRemain:s-o.area.minSize}:s<0?{areaSnapshot:o,pixelAbsorb:-o.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:d+o.sizePixelAtStart}:{areaSnapshot:o,pixelAbsorb:d,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(d,n):void 0}(o,p,l.remain,s);return l.list.push(S),l.remain=S.pixelRemain,l},{remain:n,list:[]})}function $n(o,d){"percent"===o?d.areaSnapshot.area.size=d.percentAfterAbsorption:"pixel"===o&&null!==d.areaSnapshot.area.size&&(d.areaSnapshot.area.size=d.areaSnapshot.sizePixelAtStart+d.pixelAbsorb)}const ri=new t.OlP("angular-split-global-config");let In=(()=>{class o{set direction(n){this._direction="vertical"===n?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(n){this._unit="pixel"===n?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(n){this._gutterSize=be(n,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(n){this._gutterStep=be(n,1)}get gutterStep(){return this._gutterStep}et restrictMove(){return this._restrictMove}set useTransition(n){this._useTransition=Ze(n),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(n){this._disabled=Ze(n),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(n){this._dir="rtl"===n?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}et gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new sn.y(.pipe((0,ii.b)(20))}constructor(n,s,l,p,S){this.ngZone=n,this.elRef=s,this.cdRef=l,this.renderer=p,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new t.vpe(!1),this.dragEnd=new t.vpe(!1),this.gutterClick=new t.vpe(!1),this.gutterDblClick=new t.vpe(!1),this.dragProgressSubject=new xe.x,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=S?Object.assign(this._config,S):this._config,Object.keys(this._config).forEach(}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}ddArea(n){const s={component:n,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===n.visible?(this.displayedAreas.push(s),this.build(!0,!0)):this.hiddenAreas.push(s)}removeArea(n){if(this.displayedAreas.some(s=>s.component===n)){const s=this.displayedAreas.find(l=>l.component===n);this.displayedAreas.splice(this.displayedAreas.indexOf(s),1),this.build(!0,!0)}else if(this.hiddenAreas.some(s=>s.component===n)){const s=this.hiddenAreas.find(l=>l.component===n);this.hiddenAreas.splice(this.hiddenAreas.indexOf(s),1)}}updateArea(n,s,l){!0===n.visible&&this.build(s,l)}showArea(n){const s=this.hiddenAreas.find(p=>p.component===n);if(void 0===s)return;const l=this.hiddenAreas.splice(this.hiddenAreas.indexOf(s),1);this.displayedAreas.push(...l),this.build(!0,!0)}hideArea(n){const s=this.displayedAreas.find(p=>p.component===n);if(void 0===s)return;const l=this.displayedAreas.splice(this.displayedAreas.indexOf(s),1);l.forEach(,this.hiddenAreas.push(...l),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(}setVisibleAreaSizes(n){if(n.length!==this.displayedAreas.length)return!1;const s=n.map(;return!1!==kn(this.unit,s)&&(this.displayedAreas.forEach((p,S)=>p.component._size=s[S]),this.build(!1,!0),!0)}build(n,s){if(this.stopDragging(),!0===n&&(this.displayedAreas.every(&&this.displayedAreas.sort(,this.displayedAreas.forEach((l,p)=>{l.order=2*p,l.component.setStyleOrder(l.order)})),!0===s){const l=kn(this.unit,this.displayedAreas.map(p=>p.component.size));switch(this.unit){case"percent":{const p=100/this.displayedAreas.length;this.displayedAreas.forEach(S=>{S.size=l?S.component.size:p,S.minSize=rn(S),S.maxSize=ln(S)});break}case"pixel":if(l)this.displayedAreas.forEach(p=>{p.size=p.component.size,p.minSize=rn(p),p.maxSize=ln(p)});else{const p=this.displayedAreas.filter(;if(0===p.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((S,L)=>{S.size=0===L?null:S.component.size,S.minSize=0===L?null:rn(S),S.maxSize=0===L?null:ln(S)});else if(p.length>1){let S=!1;this.displayedAreas.forEach(L=>{null===L.component.size?!1===S?(L.size=null,L.minSize=null,L.maxSize=null,S=!0):(L.size=100,L.minSize=null,L.maxSize=null):(L.size=L.component.size,L.minSize=rn(L),L.maxSize=ln(L))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const n=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(s=>{s.component.setStyleFlex(0,0,`calc( ${s.size}% - ${s.size/100*n}px )`,null!==s.minSize&&s.minSize===s.size,null!==s.maxSize&&s.maxSize===s.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(n=>{null===n.size?n.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?n.component.setStyleFlex(0,0,"100%",!1,!1):n.component.setStyleFlex(0,0,`${n.size}px`,null!==n.minSize&&n.minSize===n.size,null!==n.maxSize&&n.maxSize===n.size)})}clickGutter(n,s){const l=Je(n);this.startPoint&&_n(this.startPoint,l,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",s),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",s),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(n,s,l){if(!0===this.disabled||!0===this.isWaitingClear)return;const p=function yn(o,d){if("horizontal"===d)switch(o.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===d)switch(o.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const n=o.currentTarget,s="PageUp"===o.key||"PageDown"===o.key?500:50;let l=n.offsetLeft,p=n.offsetTop;switch(o.key){case"ArrowLeft":l-=s;break;case"ArrowRight":l+=s;break;case"ArrowUp":p-=s;break;case"ArrowDown":p+=s;break;case"PageUp":"vertical"===d?p-=s:l+=s;break;case"PageDown":"vertical"===d?p+=s:l-=s;break;default:return null}return{x:l,y:p}}(n,this.direction);null!==p&&(this.endPoint=p,this.startPoint=Je(n),n.preventDefault(),n.stopPropagation(),this.setupForDragEvent(s,l),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(n,s,l){n.preventDefault(),n.stopPropagation(),this.startPoint=Je(n),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(s,l),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(n,s){this.snapshot={gutterNum:s,lastSteppedOffset:0,allAreasSizePixel:Ln(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(l=>{const p={area:l,sizePixelAtStart:Ln(l.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?l.size:-1};l.order<n?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[p]:this.snapshot.areasBeforeGutter.unshift(p):l.order>n&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[p]):this.snapshot.areasAfterGutter.push(p))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((l,p)=>l+p.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(n=>n.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(n){n.preventDefault(),n.stopPropagation();const s=Je(n);null!==this._clickTimeout&&!_n(this.startPoint,s,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=Je(n),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let n="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&"horizontal"===this.direction&&(n=-n);const s=Math.round(n/this.gutterStep)*this.gutterStep;if(s===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=s;let l=Re(this.unit,this.snapshot.areasBeforeGutter,-s,this.snapshot.allAreasSizePixel),p=Re(this.unit,this.snapshot.areasAfterGutter,s,this.snapshot.allAreasSizePixel);if(0!==l.remain&&0!==p.remain?Math.abs(l.remain)===Math.abs(p.remain)||(Math.abs(l.remain)>Math.abs(p.remain)?p=Re(this.unit,this.snapshot.areasAfterGutter,s+l.remain,this.snapshot.allAreasSizePixel):l=Re(this.unit,this.snapshot.areasBeforeGutter,-(s-p.remain),this.snapshot.allAreasSizePixel)):0!==l.remain?p=Re(this.unit,this.snapshot.areasAfterGutter,s+l.remain,this.snapshot.allAreasSizePixel):0!==p.remain&&(l=Re(this.unit,this.snapshot.areasBeforeGutter,-(s-p.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const S=[...l.list,...p.list],L=S.find(B=>0!==B.percentAfterAbsorption&&B.percentAfterAbsorption!==B.areaSnapshot.area.minSize&&B.percentAfterAbsorption!==B.areaSnapshot.area.maxSize);L&&(L.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-S.filter(B=>B!==L).reduce(0))}l.list.forEach(S=>$n(this.unit,S)),p.list.forEach(,this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(n){if(n&&(n.preventDefault(),n.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(;this.dragListeners.length>0;){const s=this.dragListeners.pop();s&&s()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(n,s){const l=this.getVisibleAreaSizes();"start"===n?this.dragStart.emit({gutterNum:s,sizes:l}):"end"===n?this.dragEnd.emit({gutterNum:s,sizes:l}):"click"===n?this.gutterClick.emit({gutterNum:s,sizes:l}):"dblclick"===n?this.gutterDblClick.emit({gutterNum:s,sizes:l}):"transitionEnd"===n?this.transitionEndSubscriber&&this.ngZone.run(:"progress"===n&&this.dragProgressSubject.next({gutterNum:s,sizes:l})}ngOnDestroy(){this.stopDragging()}collapseArea(n,s,l){const p=this.displayedAreas.find(B=>B.component===n);if(void 0===p)return;const S="right"===l?1:-1;p.sizeBeforeCollapse||(p.sizeBeforeCollapse=p.size,p.gutterBeforeCollapse=S),p.size=s;const L=this.gutterEls.find(B=>B.nativeElement.style.order===`${p.order+S}`);L&&this.renderer.addClass(L.nativeElement,"as-split-gutter-collapsed"),this.updateArea(n,!1,!1)}expandArea(n){const s=this.displayedAreas.find(p=>p.component===n);if(void 0===s||!s.sizeBeforeCollapse)return;s.size=s.sizeBeforeCollapse,s.sizeBeforeCollapse=null;const l=this.gutterEls.find(p=>p.nativeElement.style.order===`${s.order+s.gutterBeforeCollapse}`);l&&this.renderer.removeClass(l.nativeElement,"as-split-gutter-collapsed"),this.updateArea(n,!1,!1)}getAriaAreaSizeText(n){return null===n?null:n.toFixed(0)+" "+this.unit}}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["as-split"]],viewQuery:function(n,s){if(1&n&&t.Gf(pe,5),2&n){let l;t.iGM(l=t.CRH())&&(s.gutterEls=l)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:vn,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(n,s){1&n&&(t.F$t(),t.Hsn(0),t.YNc(1,An,1,1,"ng-template",0)),2&n&&(t.xp6(1),t.Q6J("ngForOf",s.displayedAreas))},dependencies:[J.sg,J.O5],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),o})(),li=(()=>{class o{set order(n){this._order=be(n,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(n){this._size=be(n,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(n){this._minSize=be(n,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(n){this._maxSize=be(n,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(n){this._lockSize=Ze(n),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(n){this._visible=Ze(n),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}onstructor(n,s,l,p){this.ngZone=n,this.elRef=s,this.renderer=l,this.split=p,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",n=>{"flex-basis"===n.propertyName&&this.split.notify("transitionEnd",-1)})})}etStyleFlex(n,s,l,p,S){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",n),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",s),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",l),!0===p?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===S?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",)})}unlockEvents(){for(;this.lockListeners.length>0;){const n=this.lockListeners.pop();n&&n()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(n=0,s="right"){this.split.collapseArea(this,n,s)}return o.\u0275fac=o.\u0275dir=t.lG2({type:o,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),o})(),ci=(()=>{class o{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:o,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:o,providers:[]}}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[J.ez]}),o})();var Bn=k(21514);function di(o,d){if(1&o&&(t.TgZ(0,"div",16)(1,"span"),t._uU(2),t.qZA()()),2&o){t.oxw();const n=t.MAs(2),s=t.oxw(3);t.xp6(2),t.Oqu(s.getOverlaySize(n))}}function ui(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(),p=l.$implicit,S=l.index,L=t.oxw().index,B=t.oxw(2);return t.KtG(B.handleLockChild(p,L,S))}),t._UZ(1,"i"),t.qZA()}if(2&o){const n=t.oxw().$implicit;t.xp6(1),t.Tol(n.locked?"icon-lock-alt":"icon-lock-open-alt")}}function pi(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(),p=l.$implicit,S=l.index,L=t.oxw().index,B=t.oxw(2);return t.KtG(B.handleEditChild(p,L,S))}),t._UZ(1,"i",18),t.qZA()}}function hi(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(),p=l.$implicit,S=l.index,L=t.oxw().index,B=t.oxw(2);return t.KtG(B.handleRemoveChild(p,L,S))}),t._UZ(1,"i",19),t.qZA()}}unction gi(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(),p=l.$implicit,S=l.index,L=t.oxw().index,B=t.oxw(2);return t.KtG(B.handleInsertChild(p,L,S))}),t._UZ(2,"i",23),t.qZA()()}}const mi=function vi(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"as-split-area",9),t.NdJ("mouseenter",function(l){const S=t.CHM(n).$implicit,L=t.oxw(3);return t.KtG(L.handleMouseEnter(l,S))})("mouseleave",,t.TgZ(1,"div",10,11),t.YNc(3,di,3,1,"div",12),t.YNc(4,ui,2,2,"button",13),t.YNc(5,pi,2,0,"button",13),t.YNc(6,hi,2,0,"button",13),t.qZA(),t.YNc(7,fi,1,1,"content-selector2",14),t.YNc(8,gi,3,0,"div",15),t.qZA()}if(2&o){const n=d.$implicit,s=d.index,l=t.oxw(3);t.Q6J("order",s)("size",n.size)("minSize",8)("maxSize",92),t.xp6(1),t.Q6J("ngClass",t.kEZ(11,mi,l.isDragging,l.editSlug&&l.editSlug===n.slug,l.hoverArea===n)),t.xp6(2),t.Q6J("ngIf",l.isDragging),t.xp6(1),t.Q6J("ngIf",n.slug&&l.hoverArea===n),t.xp6(1),t.Q6J("ngIf",n.slug&&l.hoverArea===n),t.xp6(1),t.Q6J("ngIf",n.slug&&l.hoverArea===n),t.xp6(1),t.Q6J("ngIf",n.slug),t.xp6(1),t.Q6J("ngIf",!l.isDisabled&&!n.slug)}}function _i(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"as-split-area",6)(1,"as-split",7,4),t.NdJ("dragStart",function(l){const S=t.CHM(n).$implicit,L=t.MAs(2),B=t.oxw(2);return t.KtG(B.handleSplitDragStart(l,S.subAreas,L))})("dragEnd",function(l){const S=t.CHM(n).$implicit,L=t.MAs(2),B=t.oxw(2);return t.KtG(B.handleSplitDragEnd(l,S.subAreas,L))})("gutterClick",function(l){const S=t.CHM(n).$implicit,L=t.oxw(2);return t.KtG(L.handleGutterClick(l,S.subAreas))})("gutterDblClick",,t.YNc(3,vi,9,15,"as-split-area",8),t.qZA()()}if(2&o){const n=d.$implicit,s=d.index,l=t.oxw(2);t.Q6J("order",s)("size",n.size)("minSize",8)("maxSize",92),t.xp6(1),t.Q6J("direction",l.dash.settings.isVertical&&!l.isMobile()?"horizontal":"vertical")("disabled",l.isDisabled)("restrictMove",!0)("gutterSize",l.isDisabled?l.dash.settings.gutterSize:l.dash.settings.gutterSize+1)("gutterStep",l.subAreaStep)("gutterDblClickDuration",250)("unit","percent"),t.xp6(2),t.Q6J("ngForOf",n.subAreas)}}function zn(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"as-split",3,4),t.NdJ("dragStart",function(l){t.CHM(n);const p=t.MAs(1),S=t.oxw();return t.KtG(S.handleSplitDragStart(l,S.activeLayout,p))})("dragEnd",function(l){t.CHM(n);const p=t.MAs(1),S=t.oxw();return t.KtG(S.handleSplitDragEnd(l,S.activeLayout,p))})("gutterClick",function(l){t.CHM(n);const p=t.oxw();return t.KtG(p.handleGutterClick(l,p.activeLayout))})("gutterDblClick",,t.YNc(2,_i,4,12,"as-split-area",5),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("direction",n.dash.settings.isVertical&&!n.isMobile()?"vertical":"horizontal")("disabled",n.isDisabled)("restrictMove",!0)("gutterSize",n.isDisabled?n.dash.settings.gutterSize:n.dash.settings.gutterSize+1)("gutterStep",n.areaStep)("gutterDblClickDuration",250),t.xp6(2),t.Q6J("ngForOf",n.activeLayout)}}function yi(o,d){if(1&o&&(t.TgZ(0,"div",24)(1,"span",25),t._uU(2),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(n.isMobile()?"Mobile":"Desktop")}}const Ci=let xi=(()=>{class o extends Ot.Y{constructor(n,s,l,p,S,L,B,X,tt,Ct,mt){super(),this.eventBus=n,this.messageBus=s,this.contentManager=l,this.contentService=p,this.breakPointManager=S,this.trackerService=L,this.route=B,this.router=X,this.elementRef=tt,this.cdr=Ct,this.ngZone=mt,this.activeActions=[],this.isDragging=!1,this.dragEnd=new xe.x,this.wasMobile=!1,this.resizeActive=!1,this.resizeMobileState=!1,this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()},this.getParentContainer=this.calcSizeFactor=D=>{const{breakPoints:N}=this.content.typeSpecific.style;if(!N.enabled)return 1;const Y=N.values.map(dt=>dt.domain),q=N.values.map(dt=>dt.aspectRatio),at=(0,Fe.BYU)().clamp(!0);return at.domain(Y).range(q),(0,pt.roundTo)(at(D))},this.isMobile=()=>this.resizeActive?this.resizeMobileState:this.containerWidth<this.dash.settings.breakpoint,this.updateContainerSize=(D,N)=>{const Y=this.getParentContainer();this.containerWidth=null!=D?D:Y.clientWidth,this.containerHeight=null!=N?N:Y.clientHeight},this.updateLayout=(D=!1)=>{this.updateContainerSize(),!this.resizeActive&&(this.isMobile()?(this.activeLayout=this.dash.layout.mobile,!this.wasMobile||D?this.updateMobileHeight():this.updateMobileRatio()):(this.activeLayout=this.dash.layout.desktop,this.wasMobile||!D?this.updateDesktopHeight():this.updateDesktopRatio()),this.wasMobile=this.isMobile())},this.updateDesktopRatio=()=>{if(this.isDisabled||this.isMobile()||!this.containerWidth||!this.containerHeight)return;const{breakPoints:D}=this.content.typeSpecific.style;for(const N of D.values)N.aspectRatio=(0,pt.roundTo)(this.containerWidth/this.containerHeight,3);console.log("updateDesktopRatio",(0,pt.roundTo)(this.containerWidth/this.containerHeight,3))},this.updateMobileRatio=()=>{var D;if(this.isDisabled||!this.isMobile())return;let q=100,dt=10*(this.dash.layout.mobile[0].subAreas.length-1);const Mt=this.dash.layout.mobile[0].subAreas.filter(Tt=>Tt.locked),zt=this.dash.layout.mobile[0].subAreas.filter(;console.log("updateMobileRatio","locked",Mt.length,"unlocked",zt.length);for(const Tt of Mt){const Yt=this.dash.layout.mobile[0].subAreas.indexOf(Tt),qe=Math.floor(this.containerWidth/(null!==(D=Tt.ratio)&&void 0!==D?D:1))/this.containerHeight*100;Tt.size=(0,pt.roundTo)(0===zt.length&&Yt===this.dash.layout.mobile[0].subAreas.length-1?q:qe<=q-dt?qe:(0,pt.clamp)(qe,dt,q-dt),3),dt-=10,q-=Tt.size}for(const Tt of zt)Tt.size=(0,pt.roundTo)(q/zt.length,3)},this.updateDesktopHeight=()=>{this.isMobile()||requestAnimationFrame(()=>{const D=this.getParentContainer().clientWidth;if(this.containerWidth===D){const N=this.calcSizeFactor(this.containerWidth),Y=Math.floor(this.containerWidth/N);this.messageBus.emit(W.Bd.DisplayUpdate,[W.BV.Editor],{height:Y});try{null!=window&&window.parent&&(this.trackerService.postMessage({action:"dynamicSize",height:Y,contentSlug:this.content.slug,location:document.location.href}),this.trackerService.postMessage({sentinel:"amp",type:"embed-size",desktopHeight:Y}),this.trackerService.postMessage({action:"contentSize",desktopHeight:Y,contentSlug:this.content.slug}))}catch(q){console.log("[Dashboard] postMessage error:",q)}console.log("updateDesktopHeight",this.containerWidth,"x",Y,"aspectRatio",N)}})},this.updateMobileHeight=()=>{!this.isMobile()||requestAnimationFrame(()=>{var D;const N=this.getParentContainer().clientWidth;if(this.containerWidth===N){let Y=0;for(const q of this.dash.layout.mobile[0].subAreas)Y+=Math.floor(this.containerWidth/(null!==(D=q.ratio)&&void 0!==D?D:1));this.messageBus.emit(W.Bd.DisplayUpdate,[W.BV.Editor],{height:Y});try{null!=window&&window.parent&&(this.trackerService.postMessage({action:"dynamicSize",height:Y,contentSlug:this.content.slug,location:document.location.href}),this.trackerService.postMessage({sentinel:"amp",type:"embed-size",mobileHeight:Y}),this.trackerService.postMessage({action:"contentSize",mobileHeight:Y,contentSlug:this.content.slug}))}catch(q){console.log("[Dashboard] postMessage error:",q)}console.log("updateMobileHeight",this.containerWidth,"x",Y)}})},this.getOverlaySize=this.getChildIdx=(D,N)=>Array.from(Array(D).keys()).reduce((q,at)=>q+this.dash.layout.desktop[at].subAreas.length,0)+N,this.getSubAreaDesktop=(D,N)=>{if(this.isMobile()){let Y=0,q=N;for(;q>=this.dash.layout.desktop[Y].subAreas.length;)q-=this.dash.layout.desktop[Y].subAreas.length,Y++;return this.dash.layout.desktop[Y].subAreas[q]}return this.dash.layout.desktop[D].subAreas[N]},this.getSubAreaMobile=(D,N)=>{if(this.isMobile())return this.dash.layout.mobile[0].subAreas[N];{const Y=this.getChildIdx(D,N);return this.dash.layout.mobile[0].subAreas[Y]}},this.cloneChild=D=>(0,Wt.mG)(this,void 0,void 0,function*(){const N=yield(0,mn.z)(this.contentService.cloneItem(D).pipe((0,Xn.U)()),Y=yield this.contentManager.getContentBySlug(N);return Y.injected=!0,Y.typeSpecific.isChild=!0,yield this.contentManager.processContentUpdate({slug:Y.slug,content:Y},[],null),Y}),this.insertChild=(D,N,Y)=>(0,Wt.mG)(this,void 0,void 0,function*(){const q=yield this.cloneChild(D),at=this.getSubAreaDesktop(N,Y),dt=this.getSubAreaMobile(N,Y);at.slug=q.slug,dt.slug=q.slug,this.updateChildren(),this.cdr.detectChanges()}),this.updateChildren=()=>{this.dash.children=[];for(const D of this.dash.layout.desktop)for(const N of D.subAreas)N.slug&&this.dash.children.push({slug:N.slug})},this.resizeDash=this.handleGutterClick=this.handleGutterDoubleClick=(D,N)=>{for(const at of N)at.size=(0,pt.roundTo)(100/N.length,3),at.ratio=(0,pt.roundTo)(this.containerWidth/(this.containerHeight*(at.size/100)),3)},this.handleSplitDragStart=(D,N,Y)=>{this.isDragging=!0,Y.dragProgress$.pipe((0,bt.R)(this.dragEnd)).subscribe(dt=>{this.ngZone.run(})},this.handleSplitDragEnd=(D,N,Y)=>{const{sizes:at}=D;for(let dt=0;dt<at.length;dt++)N[dt].size=(0,pt.roundTo)(at[dt],3),N[dt].ratio=(0,pt.roundTo)(this.containerWidth/(this.containerHeight*(N[dt].size/100)),3),N[dt].locked=!0;this.dragEnd.next(),this.isDragging=!1},this.handleInsertChild=(D,N,Y)=>{const q=(0,pt.uuid)();this.eventBus.contentPicker.pipe((0,Bt.h)(({slug:at,context:{request:dt}})=>!dt&&at===q),(0,ti.q)(1)).subscribe(({context:at})=>{this.insertChild(at.slug,N,Y)}),this.eventBus.contentPicker.next({slug:q,context:{request:!0}})},this.handleLockChild=(D,N,Y)=>{const q=this.getSubAreaDesktop(N,Y),at=this.getSubAreaMobile(N,Y);q.locked=!q.locked,at.locked=!at.locked,at.locked&&(at.ratio=(0,pt.roundTo)(this.containerWidth/(this.containerHeight*(at.size/100)),3)),this.cdr.detectChanges()},this.handleEditChild=(D,N,Y)=>{const{mode:q,slug:at,child:dt,editor:Mt}=this.route.snapshot.params,zt=D.slug,Tt=this.contentManager.getContent(zt);let Yt=q;Yt=["view","edit"].includes(q)||dt!==zt?"editSub":"edit";let Se=Mt;"editSub"===Yt?"edit-dash"===Mt?Se=["map","multimap"].includes(null==Tt?void 0:Tt.type)?"edit-map":"edit-visual":"edit-map"!==Mt||["map","multimap"].includes(null==Tt?void 0:Tt.type)?"edit-visual"===Mt&&["map","multimap"].includes(null==Tt?void 0:Tt.type)?Se="edit-map":"edit-chart"===Mt&&["ttcharts-linechart"].includes(null==Tt?void 0:Tt.type)?Se="edit-linechart":"edit-linechart"===Mt&&!["ttcharts-linechart"].includes(null==Tt?void 0:Tt.type)&&(Se="edit-chart"):Se="edit-visual":Se="edit-dash",this.router.navigate(["/",Yt,at,"editSub"===Yt?zt:void 0,Se].filter(qe=>qe))},this.handleRemoveChild=(D,N,Y)=>{const q=this.getSubAreaDesktop(N,Y),at=this.getSubAreaMobile(N,Y);q.slug=void 0,at.slug=void 0,this.updateChildren(),this.cdr.detectChanges()},this.handleMouseEnter=(D,N)=>{this.isDisabled||this.isDragging||(this.hoverArea=N,this.hoverSlug=N.slug,this.cdr.markForCheck())},this.handleMouseLeave=(D,N)=>{this.isDisabled||(this.hoverArea=void 0,this.hoverSlug=void 0,this.cdr.markForCheck())},this.handleDropListDropped=D=>{D.container===D.previousContainer?(console.log("moveItemInArray",D.previousIndex,"->",D.currentIndex),(0,De.bA)(D.container.data,D.previousIndex,D.currentIndex)):(console.log("exchangeArrayItem",D.previousIndex,"->",D.currentIndex),(0,De.EA)(D.container.data,D.previousContainer.data,D.currentIndex,D.previousIndex),(0,De.EA)(D.previousContainer.data,D.container.data,D.previousIndex+1,D.currentIndex)),this.moveElement&&(this.moveElement.remove(),this.moveElement=null),this.cdr.detectChanges()},this.handleDropListEntered=D=>{const{container:N,currentIndex:q}=D;this.moveElement&&(this.moveElement.remove(),this.moveElement=null),this.moveElement=N.element.nativeElement.children[q].cloneNode(!0),this.moveExitContainer&&this.moveElement&&(this.moveElement.style.top="",this.moveElement.style.left="",this.moveElement.style.opacity="",this.moveElement.style.position="",this.moveExitContainer.element.nativeElement.insertBefore(this.moveElement,this.moveElement.nextSibling))},this.handleDropListExited=this.handleDragStarted=D=>{},this.handleRouteChange=D=>{const{mode:N,child:q}=D;this.editSlug=(null==N?void 0:N.includes("edit"))&&q?q:void 0,this.cdr.markForCheck()},this.updateDataFilter=(D,N,Y)=>{D.typeSpecific.fields[N].selectedValues=[Y].filter(},this.updateInvisualFilter=(D,N,Y,q)=>{var at,dt,Mt,zt;if(!D.typeSpecific.fields[N])return!1;const Yt=D.typeSpecific.inVisualFilter.find(;return!!Yt&&("valueSelector"===Yt.type?("userSelected"===Yt.options.saveState&&!(null!==(at=Yt.localStorage)&&void 0!==at&&at.userValue)&&(Yt.localStorage=null!==(dt=Yt.localStorage)&&void 0!==dt?dt:{},Yt.localStorage.userValue=Yt.selectedValue),Yt.selectedValue=Y||Yt.localStorage.userValue):("userSelected"===Yt.options.saveState&&!(null!==(Mt=Yt.localStorage)&&void 0!==Mt&&Mt.userValues)&&(Yt.localStorage=null!==(zt=Yt.localStorage)&&void 0!==zt?zt:{},Yt.localStorage.userValues=Yt.selectedValues),Yt.selectedValues=q&&q.length>0?(0,pt.cloneObject)(q):Yt.localStorage.userValues),!0)},this.updateHightlight=(D,N)=>{if("choropleth"!==D.type)return!1;const Y=(0,rt.tu)(D.typeSpecific.fields);if(!Y)return!1;D.typeSpecific.map.options.selectedIso=N[Y.fieldName]},this.getMatchingActions=(D,N,Y)=>this.dash.actions.filter(q=>q.type===D&&q.source.slug===N&&(!Y||q.source.fieldName===Y)),this.handleFilter=D=>{const{slug:N,context:Y}=D,q=this.getMatchingActions("filter",N,Y.filter.fieldName);for(const at of q)for(const dt of at.targets){const Mt=this.contentManager.getContent(dt.slug);!Mt||(this.updateInvisualFilter(Mt,dt.fieldName,Y.filter.selectedValue,Y.filter.selectedValues),this.messageBus.emit(W.K7.FilterUpdate,[W.BV.Chart,W.BV.Map,W.BV.Editor],{content:Mt,dataId:Mt.typeSpecific.dataId},Mt.localStorage.referenceID))}},this.handleHighlight=D=>{const{slug:N,context:Y}=D,q=this.getMatchingActions("highlight",N);for(const at of q){if(!Y.active&&!this.activeActions.includes(N))return;Y.active?this.activeActions.push(N):this.activeActions=this.activeActions.filter(dt=>dt!==N);for(const dt of at.targets){let Mt=!1;const zt=this.contentManager.getContent(dt.slug);if(zt){if("filter"===dt.event){const Tt=Y.active?Y.dataRef[at.source.fieldName]:void 0;this.updateInvisualFilter(zt,dt.fieldName,Tt)||(this.updateDataFilter(zt,dt.fieldName,Tt),Mt=!0)}else"highlight"===dt.event&&this.updateHightlight(zt,Y.active?Y.dataRef:{});this.messageBus.emit(Mt?W.K7.RenderData:W.K7.FilterUpdate,[W.BV.Chart,W.BV.Map,W.BV.Editor],{content:zt,dataId:zt.typeSpecific.dataId},zt.localStorage.referenceID)}}}},this.handleTooltip=D=>{const{slug:N,context:Y}=D,q=this.getMatchingActions("tooltip",N);if(0!==q.length)for(const at of q){if(!Y.active&&!this.activeActions.includes(N))return;Y.active?this.activeActions.push(N):this.activeActions=this.activeActions.filter(;for(const dt of at.targets){let Mt=!1;const zt=this.contentManager.getContent(dt.slug);if(zt){if("filter"===dt.event){const Tt=Y.active?Y.dataRef[at.source.fieldName]:void 0;this.updateInvisualFilter(zt,dt.fieldName,Tt,[Tt].filter(Boolean))||(this.updateDataFilter(zt,dt.fieldName,Tt),Mt=!0)}else"highlight"===dt.event&&this.updateHightlight(zt,Y.active?Y.dataRef:{});this.messageBus.emit(Mt?W.K7.RenderData:W.K7.FilterUpdate,[W.BV.Chart,W.BV.Map,W.BV.Editor],{content:zt,dataId:zt.typeSpecific.dataId},zt.localStorage.referenceID)}}}}}et areaStep(){var n,s;if(null===(n=this.dash)||void 0===n||!n.settings.snapToGrid||null===(s=this.elementRef)||void 0===s||!s.nativeElement)return 1;const{clientWidth:l,clientHeight:p}=this.elementRef.nativeElement;return(this.dash.settings.isVertical?p:l)/this.dash.settings.gridColumns}get subAreaStep(){var n,s;if(null===(n=this.dash)||void 0===n||!n.settings.snapToGrid||null===(s=this.elementRef)||void 0===s||!s.nativeElement||this.isMobile())return 1;const{clientWidth:l,clientHeight:p}=this.elementRef.nativeElement;return(this.dash.settings.isVertical?l:p)/this.dash.settings.gridColumns}ngOnInit(){this.dash=this.content.typeSpecific.dash,this.activeActions=[],this.eventBus.filterChange.pipe((0,bt.R)(this.componentDestroyed$)).subscribe(this.handleFilter),this.eventBus.highlightChange.pipe((0,bt.R)(this.componentDestroyed$)).subscribe(this.handleHighlight),this.eventBus.tooltipChange.pipe((0,bt.R)(this.componentDestroyed$)).subscribe(this.handleTooltip),this.eventBus.resizeActive.pipe((0,bt.R)(this.componentDestroyed$)).subscribe(n=>{this.resizeActive=n.context.active,this.resizeActive?this.resizeMobileState=this.containerWidth<this.dash.settings.breakpoint:this.updateLayout(!0)}),this.route.params.pipe((0,bt.R)(this.componentDestroyed$)).subscribe(this.handleRouteChange)}ngAfterViewInit(){this.updateLayout()}ngOnChanges(n){this.dash=this.content.typeSpecific.dash,this.updateLayout()}ngOnDestroy(){super.ngOnDestroy()}}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-dash"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:3,vars:8,consts:[["cdkDropListGroup","","resizeObserver","",1,"flex","grow","drag-container","w-full",3,"useParent","debounce","caller","ngClass","resize"],[3,"direction","disabled","restrictMove","gutterSize","gutterStep","gutterDblClickDuration","dragStart","dragEnd","gutterClick","gutterDblClick",4,"ngIf"],["class","absolute flex center w-full h-4 -top-4 text-sm",4,"ngIf"],[3,"direction","disabled","restrictMove","gutterSize","gutterStep","gutterDblClickDuration","dragStart","dragEnd","gutterClick","gutterDblClick"],["splitComponent",""],["class","drag-area",3,"order","size","minSize","maxSize",4,"ngFor","ngForOf"],[1,"drag-area",3,"order","size","minSize","maxSize"],[3,"direction","disabled","restrictMove","gutterSize","gutterStep","gutterDblClickDuration","unit","dragStart","dragEnd","gutterClick","gutterDblClick"],["class","flex drag-box",3,"order","size","minSize","maxSize","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"flex","drag-box",3,"order","size","minSize","maxSize","mouseenter","mouseleave"],[1,"overlay","flex","flex-col","justify-start","items-end","gap-1","p-2",3,"ngClass"],["editOverlay",""],["class","backdrop-blug-sm bg-white rounded text-xs p-1",4,"ngIf"],["mat-icon-button","","class","tt-mat-button-small backdrop-blur-sm","color","basic",3,"click",4,"ngIf"],[3,"slug",4,"ngIf"],["class","flex grow center",4,"ngIf"],[1,"backdrop-blug-sm","bg-white","rounded","text-xs","p-1"],["mat-icon-button","","color","basic",1,"tt-mat-button-small","backdrop-blur-sm",3,"click"],[1,"icon-pencil-2"],[1,"icon-trash-1"],[3,"slug"],[1,"flex","grow","center"],["mat-icon-button","","color","basic",3,"click"],[1,"icon-insert-viz","text-xl"],[1,"absolute","flex","center","w-full","h-4","-top-4","text-sm"],[1,"bg-gray-300","rounded"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.NdJ("resize",function(p){return s.resizeDash(p)}),t.YNc(1,zn,3,7,"as-split",1),t.qZA(),t.YNc(2,yi,3,1,"div",2)),2&n&&(t.Q6J("useParent",!0)("debounce",100)("caller","#layout-dash")("ngClass",t.VKq(6,Ci,!s.isDisabled&&!s.editSlug)),t.xp6(1),t.Q6J("ngIf",s.dash&&s.activeLayout),t.xp6(1),t.Q6J("ngIf",!s.isDisabled))},dependencies:[J.mk,J.sg,J.O5,me.P,In,li,De.Fd,Bn.lW,Jt.E],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .cdk-drag-preview[_ngcontent-%COMP%]{opacity:.5}[_nghost-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.5;position:absolute}[_nghost-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]     as-split{overflow:visible!important}[_nghost-%COMP%]     as-split-area{overflow:visible!important}[_nghost-%COMP%]   .as-split-area[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .as-split-area[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{width:100%;height:100%;z-index:100;display:none;position:absolute;pointer-events:none}[_nghost-%COMP%]   .as-split-area[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{pointer-events:all}[_nghost-%COMP%]   .as-split-area[_ngcontent-%COMP%]   .overlay.active-drag[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .as-split-area[_ngcontent-%COMP%]   .overlay.active-edit[_ngcontent-%COMP%]{display:flex;outline:1px solid rgba(255,64,64,.8)}[_nghost-%COMP%]   .as-split-area[_ngcontent-%COMP%]   .overlay.active-hover[_ngcontent-%COMP%]{display:flex;outline:1px dashed rgba(255,64,64,.8)}[_nghost-%COMP%]     as-split.as-disabled .as-split-gutter{z-index:10;position:relative;background-color:unset!important}[_nghost-%COMP%]     as-split.as-disabled .as-split-gutter-icon{opacity:0;position:absolute;background:none!important}[_nghost-%COMP%]     as-split:not(.as-disabled) .as-split-gutter{z-index:10;position:relative;background-color:#0003!important}[_nghost-%COMP%]     as-split:not(.as-disabled) .as-split-gutter-icon{opacity:0;position:absolute;transition:opacity .3s;background-color:#000;background-image:none!important}[_nghost-%COMP%]     as-split:not(.as-disabled) .as-split-gutter.as-dragged .as-split-gutter-icon, [_nghost-%COMP%]     as-split:not(.as-disabled) .as-split-gutter-icon:hover{opacity:.1}[_nghost-%COMP%]     as-split.as-horizontal>.as-split-gutter .as-split-gutter-icon{left:-5px;right:5px;width:calc(100% + 10px)!important}[_nghost-%COMP%]     as-split.as-vertical>.as-split-gutter .as-split-gutter-icon{top:-5px;bottom:5px;height:calc(100% + 10px)!important}"]}),o})();const bi=["element"],Si=["chart"],Mi=["echartTemplate"];et Ti=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.messageBus=n,this.cdr=s,this.eventBus=l,this.chartEvent=new t.vpe,this.chartStyle={width:"100%",height:"100%"},this.loadedView=!1,this.busLoaded=!1,this.containerCreated=!1,this.noData=!1,this.noSeries=!1,this.isLayoutReadyForChart=!1,this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()},this.chartInit=this.receiveLayoutReady=p=>{this.isLayoutReadyForChart=!0,Promise.all([k.e(7402),k.e(9138)]).then(k.bind(k,39138)).then(S=>{this.echartTemplateContainer.clear();const L=this.echartTemplateContainer.createComponent(S.EChartComponent,{injector:this.echartTemplateContainer.injector});this.echartComponent=L.instance,this.echartComponent.config=this.config,this.echartComponent.content=this.content,L.changeDetectorRef.detectChanges(),this.echartComponent.openTooltip.subscribe(this.openTooltip),this.updateChart()})},this.receiveRenderData=p=>{const{data:S}=p;this.data=S,this.updateChart()},this.updateChart=()=>{!this.config||!this.echartComponent||(this.echartComponent.config=this.config,this.echartComponent.content=this.content,this.echartComponent.forceUpdate=this.forceUpdate,this.echartComponent.data=this.data,this.echartComponent.render())},this.openTooltip=p=>{this.messageBus.emit("TOOLTIP_OPEN",[W.BV.ToolTip],p,this.content.localStorage.referenceID)},this.closeToolTip=()=>{this.messageBus.emit("TOOLTIP_CLOSE",[W.BV.ToolTip],{},this.content.localStorage.referenceID)}}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(n){var s,l;this.busLoaded||(this.messageBus.on("LAYOUT_READY_FOR_CHART",W.BV.Chart,this.receiveLayoutReady,this.componentDestroyed$,this.config.referenceID),this.messageBus.on(W.cT.RenderData,W.BV.Chart,this.receiveRenderData,this.componentDestroyed$,this.config.referenceID),this.busLoaded=!0),this.noData=0===(null===(l=null===(s=this.config)||void 0===s?void 0:s.data)||void 0===l?void 0:l.length),this.updateChart()}ngOnDestroy(){super.ngOnDestroy()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Dt.Y),t.Y36(t.sBO),t.Y36(Oe.N))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-echarts"]],viewQuery:function(n,s){if(1&n&&(t.Gf(bi,5),t.Gf(Si,5),t.Gf(Mi,7,t.s_b)),2&n){let l;t.iGM(l=t.CRH())&&(s.chartRoot=l.first),t.iGM(l=t.CRH())&&(s.chart=l.first),t.iGM(l=t.CRH())&&(s.echartTemplateContainer=l.first)}},inputs:{config:"config",content:"content",options:"options",data:"data",forceUpdate:"forceUpdate"},outputs:{chartEvent:"chartEvent"},features:[t.qOj,t.TTD],decls:2,vars:0,consts:[["echartTemplate",""]],template:styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .chart[_ngcontent-%COMP%]{display:flex;flex-grow:1;position:relative;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]   .chart.hide-chart[_ngcontent-%COMP%]{visibility:hidden;opacity:0;pointer-events:none}[_nghost-%COMP%]     svg{display:block;position:absolute}[_nghost-%COMP%]     .chart-overlay{display:block;overflow:hidden;position:absolute;pointer-events:none}[_nghost-%COMP%]     .chart-overlay .overlay-values{display:block;position:absolute;margin:0;padding:0}[_nghost-%COMP%]     .chart-overlay .overlay-labelAxis{display:block;position:absolute;margin:0;padding:0}[_nghost-%COMP%]     .chart-overlay .overlay-labelAxis .quill-container>div{max-width:100%;pointer-events:initial}[_nghost-%COMP%]     .chart-overlay .overlay-valueAxis{display:block;position:absolute;margin:0;padding:0}[_nghost-%COMP%]     .chart-overlay .quill-container{display:flex;position:absolute;top:0;left:0}[_nghost-%COMP%]     .chart-overlay .quill-container.rotate div{text-align:right!important}[_nghost-%COMP%]     .chart-overlay .quill-container.reverse div{flex-direction:column-reverse}[_nghost-%COMP%]     .chart-overlay .quill-container.right div p{text-align:right!important}[_nghost-%COMP%]     .chart-overlay .quill-container.left div p{text-align:left!important}[_nghost-%COMP%]     .chart-overlay .quill-container.grow{flex:1 1 auto}[_nghost-%COMP%]     .chart-overlay .quill-container.grow>div{flex:1 1 auto}[_nghost-%COMP%]     .chart-overlay .quill-container div{display:flex;flex-direction:column;max-width:100%;overflow-wrap:break-word}[_nghost-%COMP%]     .chart-overlay .quill-container p{margin:0;padding:0;width:100%;display:inline-block}[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;justify-content:center;align-items:center}"],changeDetection:0}),o})();var je=k(3505);function Pi(o,d){if(1&o&&t._UZ(0,"div",1),2&o){const n=t.oxw();t.Q6J("ngStyle",n.styleService.convertFontFormat(n.content.typeSpecific.style.description))("content",n.content)("deltaContent",n.content.description)("forceUpdate",n.forceUpdate)("renderData",n.config.data)("preFilterData",n.config.preFilterData)("item",n.config.data?n.config.data[0]:null)}}let wi=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.styleService=n,this.cdr=s,this.quillRendererService=l,this.renderData=[],this.isHovering=!1,this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()},this.hasDescriptionText=()=>!!this.content.description&&this.quillRendererService.deltaToString(this.content.description).length>1}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){}onMouseEnter(n){}onMouseLeave(n){}}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-description"]],hostBindings:inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[3,"ngStyle","content","deltaContent","forceUpdate","renderData","preFilterData","item",4,"ngIf"],[3,"ngStyle","content","deltaContent","forceUpdate","renderData","preFilterData","item"]],template:function(n,s){1&n&&t.YNc(0,Pi,1,7,"div",0),2&n&&t.Q6J("ngIf",!s.isHovering&&s.hasDescriptionText())},dependencies:[J.O5,J.PC,ie._],styles:["[_nghost-%COMP%]{display:flex}"]}),o})();var Dn=k(79503),Fn=k(65593),Rn=k(67171),Cn=k(15918);const Ei=function(){return{borderTopLeftRadius:0}},Ai=function(){return{backgroundColor:"transparent"}},Nn=function(o,d){return{backgroundColor:o,color:d}};function Li(o,d){if(1&o){const n=t.EpF();t.ynx(0)(1),t.TgZ(2,"menu-button",6),t.NdJ("isOpen",,t.TgZ(3,"button",7),t.ynx(4),t._uU(5),t.BQk(),t.TgZ(6,"div",8),t._UZ(7,"i",9),t.qZA()(),t.TgZ(8,"div",10,11)(10,"list-selector",12),t.NdJ("newPositions",function(l){t.CHM(n);const p=t.oxw(2).$implicit,S=t.oxw();return t.KtG(S.setPopupPositions(p.categoryId,l))})("ngModelChange",function(l){t.CHM(n);const p=t.oxw(2).$implicit,S=t.oxw();return t.KtG(S.setValues(p,l))}),t.qZA()()(),t.BQk()()}if(2&o){const n=t.oxw(2).$implicit,s=t.MAs(1),l=t.oxw();t.xp6(2),t.Q6J("scrollStrategy","close")("close",l.closeSelect)("withBackdrop",!1)("hideShadow",!0)("autoclose",!0)("overlayStyle",t.DdM(39,Ei))("menuStyle",t.DdM(40,Ai))("originPosition",l.getPopupPosition(n.categoryId).originPosition)("overlayPosition",l.getPopupPosition(n.categoryId).overlayPosition)("showOverflow",!0)("connectToElement",s),t.xp6(3),t.hij(" ",n.options.customLabel||l.categories[n.categoryId].label," "),t.xp6(1),t.ekj("r180",l.activeFilter===n.categoryId),t.xp6(2),t.Udp("min-width",s.clientWidth,"px")("padding",l.styleService.convertSpacing(n.style.dropdown.popup.container.padding))("box-shadow",l.styleService.convertShadow(n.style.dropdown.popup.container.boxShadow))("border-radius",n.style.dropdown.popup.container.borderRadius,"px")("background-color",n.style.dropdown.popup.container.background.backgroundColor),t.xp6(2),t.Q6J("items",n.localStorage.categoryValues)("multiSelect","multi"===n.type)("ngModel",n.localStorage.selectedValueIds)("valueField","id")("labelField","label")("placeholder",n.style.dropdown.popup.search.placeholder)("itemInactiveOpacity",n.style.dropdown.popup.items.inactive.opacity)("itemMouseOver",t.WLB(41,Nn,n.style.dropdown.popup.items.mouseOver.background.backgroundColor,n.style.dropdown.popup.items.mouseOver.color))("itemActive",t.WLB(44,Nn,n.style.dropdown.popup.items.active.background.backgroundColor,n.style.dropdown.popup.items.active.color))("selectAllText",n.style.dropdown.popup.selectAllButton.label)("showSearch",n.style.dropdown.popup.search.enabled)("autoSort",!1)("trackByFn",l.trackByFunction)("itemFont",l.styleService.convertFontFormat(n.style.dropdown.popup.items.font))("measureElement",s)}}function ki(o,d){if(1&o&&(t.ynx(0,4),t.YNc(1,Li,11,47,"ng-container",5),t.BQk()),2&o){const n=t.oxw().$implicit;t.Q6J("ngSwitch",n.options.appearance),t.xp6(1),t.Q6J("ngSwitchCase","dropdown")}}const $i=function(o){return{active:o}};function Ii(o,d){if(1&o&&(t.TgZ(0,"div",1,2),t.YNc(2,ki,2,2,"ng-container",3),t.qZA()),2&o){const n=d.$implicit,s=t.oxw();t.Gre("filter flex ",n.options.appearance,""),t.ekj("multi","multi"===n.type),t.Q6J("ngClass",t.VKq(8,$i,s.activeFilter===n.categoryId))("ngStyle",s.style(n)),t.xp6(2),t.Q6J("ngIf",n.localStorage)}}let Yn=(()=>{class o{constructor(n,s){this.styleService=n,this.messageBus=s,this.closeSelect=!1,this.baseOriginPosition=["start","bottom"],this.baseOverlayPosition=["start","top"],this.popupPositions={},this.trackByFunction=l=>l.value}et filters(){return(0,Dn.Z)(this.content.typeSpecific.map,"annotations.custom.filter")}get categories(){return(0,Dn.Z)(this.content.typeSpecific.map,"annotations.custom.categories")}ngOnChanges(n){if(this.content&&n.forceUpdate&&this.content&&this.content.typeSpecific&&this.content.typeSpecific.map&&this.content.typeSpecific.map.annotations&&this.content.typeSpecific.map.annotations.custom&&this.content.typeSpecific.map.annotations.custom.filter&&this.content.typeSpecific.map.annotations.custom.filter.length>0)for(const s of this.content.typeSpecific.map.annotations.custom.filter){if(s.localStorage||(s.localStorage={}),"asc"===s.options.sort){const l=JSON.parse(JSON.stringify(this.categories[s.categoryId].values));s.localStorage.categoryValues=(0,Fn.Z)(l,["label"],"asc")}if("desc"===s.options.sort){const l=JSON.parse(JSON.stringify(this.categories[s.categoryId].values));s.localStorage.categoryValues=(0,Fn.Z)(l,["label"],"desc")}if("custom"===s.options.sort){const l=JSON.parse(JSON.stringify(this.categories[s.categoryId].values));s.localStorage.categoryValues=l}s.localStorage.allValueIds=s.localStorage.categoryValues.map(l=>l.id),s.localStorage.selectedValueIds||(s.localStorage.selectedValueIds=[],s.localStorage.categoryValues&&s.localStorage.categoryValues.length>0&&("all"===s.options.initialState&&(s.localStorage.selectedValueIds=s.localStorage.categoryValues.map(l=>l.id)),"custom"===s.options.initialState&&(s.localStorage.selectedValueIds=s.selectedValueIds),"first"===s.options.initialState&&(s.localStorage.selectedValueIds=[s.localStorage.categoryValues[0].id]),"last"===s.options.initialState&&(s.localStorage.selectedValueIds=[s.localStorage.categoryValues[s.localStorage.categoryValues.length-1].id])),s.selectedValueIds=s.localStorage.selectedValueIds)}}ngOnInit(){}emitChange(){console.log("[AnnotationFilter] - emitting change",this.content.typeSpecific.map.annotations.custom.filter),this.messageBus.emit(W.NX.DetectChanges,[W.BV.Map],{},this.content.localStorage.referenceID),this.annotations&&this.annotations.custom.cluster.enabled&&this.messageBus.emit(W.NX.ClusterUpdate,[W.BV.Map],{},this.content.localStorage.referenceID),this.messageBus.emit(W.NX.ZoomToMarkers,[W.BV.Map],{},this.content.localStorage.referenceID)}style(n){const s=JSON.parse(JSON.stringify(n.style[n.options.appearance]));n.categoryId===this.activeFilter&&"dropdown"===n.options.appearance&&n.style.dropdown.popup.container.applyStyleToSourceButton&&(s.font.color=n.style.dropdown.popup.items.font.color,s.background=n.style.dropdown.popup.container.background);const l=this.styleService.getHorizontalSpacing(s.font.margin);return Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(s.font)),{maxWidth:`calc(100% - ${l.left} - ${l.right})`,borderRadius:s.borderRadius+"px",backgroundColor:s.background.backgroundColor}),this.styleService.convertBorder(s.border))}filterStylepened(n,s){n?this.activeFilter=s:this.activeFilter===s&&(this.activeFilter=null)}singleOutElement(n,s){n.selectedValueIds=[s.id],n.localStorage.selectedValueIds=[s.id],this.emitChange(),this.messageBus.emit(W.NX.DetectChanges,[W.BV.MapEditor],{},this.content.localStorage.referenceID)}setValues(n,s){n.selectedValueIds=s,n.localStorage.selectedValueIds=s,this.emitChange(),this.messageBus.emit(W.NX.DetectChanges,[W.BV.MapEditor],{},this.content.localStorage.referenceID)}setPopupPositions(n,s){this.popupPositions[n]=s}getPopupPosition(n){return this.popupPositions[n]||{overlayPosition:this.baseOverlayPosition,originPosition:this.baseOriginPosition}}}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["annotation-filter"]],inputs:{content:"content",forceUpdate:"forceUpdate"},features:[t.TTD],decls:1,vars:1,consts:[[3,"class","ngClass","multi","ngStyle",4,"ngFor","ngForOf"],[3,"ngClass","ngStyle"],["element",""],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"scrollStrategy","close","withBackdrop","hideShadow","autoclose","overlayStyle","menuStyle","originPosition","overlayPosition","showOverflow","connectToElement","isOpen"],["button","",1,"title","flex","center"],[1,"open-icon"],[1,"icon-down-open","flex","center"],[1,"list"],["list",""],[3,"items","multiSelect","ngModel","valueField","labelField","placeholder","itemInactiveOpacity","itemMouseOver","itemActive","selectAllText","showSearch","autoSort","trackByFn","itemFont","measureElement","newPositions","ngModelChange"]],template:function(n,s){1&n&&t.YNc(0,Ii,3,10,"div",0),2&n&&t.Q6J("ngForOf",s.filters)},dependencies:[J.mk,J.sg,J.O5,J.PC,J.RF,J.n9,Ht.JJ,Ht.On,Rn.p,Cn.p],styles:['[_nghost-%COMP%]{display:flex;flex-wrap:wrap;flex-grow:1;max-width:100%}[_nghost-%COMP%]   .filter.timeline[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}[_nghost-%COMP%]   .filter.slider[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]{max-width:100%;position:relative;justify-content:center;box-sizing:border-box}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;opacity:0;pointer-events:none;box-shadow:0 0 0 transparent;transition:all .15s ease-out}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:0;font-weight:inherit;cursor:pointer;background:transparent;transition:all .15s ease-out;color:currentColor;justify-content:space-between;border:0px;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:none}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{border-radius:100px;color:#fff;background:#666666;width:1em;height:1em;font-weight:400;font-size:.75em;position:absolute;right:-.5em;top:-.5em;z-index:1;pointer-events:none;padding:.25em}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{border-left:.4em solid transparent;border-right:.4em solid transparent;border-top:.4em solid;margin:0 .4em;opacity:.54;width:0px;height:0px}']}),o})(),Bi=(()=>{class o extends Ot.Y{gOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){}}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-filter-annotation"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:1,vars:2,consts:[[3,"content","forceUpdate"]],template:dependencies:[Yn],styles:["[_nghost-%COMP%]{display:flex;max-width:100%;min-width:0}"]}),o})();var We=k(59713),Vn=k(85633),zi=k(32988);const Hn=["tabsContainer"],Di=["tabsWrapper"],Fi=["tabs"],Un=function(o){return{inactive:o}};function Gn(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.paging(!0))}),t._UZ(1,"i",11),t.qZA()}if(2&o){const n=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Un,n.nextLinkInactive))}}const Ri=function(o){return{active:o}};function Ni(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",12,13),t.NdJ("click",,t.TgZ(2,"span"),t._uU(3),t.qZA()()}if(2&o){const n=d.$implicit,s=t.oxw(2);t.Q6J("ngClass",t.VKq(2,Ri,s.selectedItem===n.value)),t.xp6(3),t.Oqu(n.label)}}function Yi(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",,t._UZ(1,"i",15),t.qZA()}if(2&o){const n=t.oxw(2);t.Q6J("ngClass",t.VKq(1,Un,n.prevLinkInactive))}}function Vi(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",2),t.YNc(1,Gn,2,3,"div",3),t.TgZ(2,"div",4,5),t.NdJ("panstart",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.panStart())})("pan",function(l){t.CHM(n);const p=t.oxw();return t.KtG(p.pan(l))})("panend",,t.TgZ(4,"div",6,7),t.YNc(6,Ni,4,4,"div",8),t.qZA()(),t.YNc(7,Yi,2,3,"div",9),t.qZA()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.oversized),t.xp6(5),t.Q6J("ngForOf",n.items),t.xp6(1),t.Q6J("ngIf",n.oversized)}}class Ne extends kt.K{constructor(d,n,s,l){super(),this.cdr=d,this.renderer=n,this.elemRef=s,this.messageBus=l,this.selectedChange=new t.vpe,this.viewInit=!1,this.activeSwipePosition=0,this.currentSwipePosition=0,this.swipeActive=!1,this.oversized=!1,this.prevLinkInactive=!1,this.nextLinkInactive=!1,this.onMessageBusEvent=p=>{this.oversized=this.tabsContainer.nativeElement.clientWidth>this.tabsWrapper.nativeElement.clientWidth/2,this.swipTabs(),this.cdr.detectChanges()},this.compareObjects=(p,S)=>{if(!p||!S)return!1;for(const L in p)if(p.hasOwnProperty(L)&&p[L]!==S[L])return!1;for(const L in S)if(S.hasOwnProperty(L)&&p[L]!==S[L])return!1;return!0},this.nativeTabbar=this.elemRef.nativeElement}ngOnChanges(d){if(this.selectedItem=this.selected,d.items||d.selected)return this.swipTabs(),void this.cdr.detectChanges();d.style&&(this.compareObjects(d.style.currentValue,d.style.previousValue)||(this.swipTabs(),this.cdr.detectChanges()))}ngOnInit(){this.messageBus.on("RENDER_FINISH",W.BV.Filter,this.onMessageBusEvent,this.componentDestroyed$),this.messageBus.on(W.K7.ContentResize,W.BV.Map,this.onMessageBusEvent,this.componentDestroyed$),this.messageBus.on(W.K7.ContentResize,W.BV.Chart,this.onMessageBusEvent,this.componentDestroyed$)}ngAfterViewInit(){this.viewInit=!0,this.cdr.detach(),this.initView(),this.swipTabs(),this.cdr.detectChanges()}initView(){this.oversized=this.tabsContainer.nativeElement.clientWidth>this.tabsWrapper.nativeElement.clientWidth/2}swipTabs(){if(zi.N.client)try{if(!this.viewInit)return;const d=this.tabsWrapper.nativeElement.clientWidth,n=this.tabsContainer.nativeElement,s=n.querySelector(".active"),l=s.clientWidth,S=s.getBoundingClientRect().left-n.getBoundingClientRect().left+l/2;this.setTabsPosition(d/2-S)}catch(d){console.error("Size could not get evaluated on timeline!",this.selectedItem,d)}}selectItem(d){this.swipeActive||(this.selectedItem=d,this.selectedChange.emit(this.selectedItem),this.cdr.detectChanges(),this.swipTabs(),this.cdr.detectChanges())}paging(d){this.prevLinkInactive=this.nextLinkInactive=!1,this.setTabsPosition(d?this.activeSwipePosition+this.tabsWrapper.nativeElement.clientWidth:this.activeSwipePosition-this.tabsWrapper.nativeElement.clientWidth)}an(d){this.currentSwipePosition=this.activeSwipePosition+d.deltaX,this.setTabsPosition(this.currentSwipePosition,!1)}panEnd(d){this.setTabsTransition(!0),this.activeSwipePosition=this.currentSwipePosition,this.cdr.detectChanges(),setTimeout(}setTabsPosition(d,n=!0){this.prevLinkInactive=this.nextLinkInactive=!1;const s=this.tabsContainer.nativeElement,l=this.tabsWrapper.nativeElement.clientWidth,p=this.tabsContainer.nativeElement.clientWidth,S=this.tabs.toArray(),X=l/2-S[0].nativeElement.clientWidth/2,tt=l/2-p+S[S.length-1].nativeElement.clientWidth/2;d>=X&&(d=X,this.nextLinkInactive=!0),d<=tt&&(d=tt,this.prevLinkInactive=!0),n&&(this.activeSwipePosition=d),this.renderer.setStyle(s,"-webkit-transform",`translateX(${d}px)`),this.renderer.setStyle(s,"-moz-transform",`translateX(${d}px)`),this.renderer.setStyle(s,"transform",`translateX(${d}px)`)}setTabsTransition(d=!0){const n=d?13:0,s=this.tabsContainer.nativeElement;this.renderer.setStyle(s,"-webkit-transition",`transform .${n}s ease-out`),this.renderer.setStyle(s,"-moz-transition",`transform .${n}s ease-out`),this.renderer.setStyle(s,"transition",`transform .${n}s ease-out`)}onResize(d){this.oversized=this.tabsContainer.nativeElement.clientWidth>this.tabsWrapper.nativeElement.clientWidth/2,this.swipTabs(),this.cdr.detectChanges()}}Ne.\u0275fac=function(d){return new(d||Ne)(t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(Dt.Y))},Ne.\u0275cmp=t.Xpm({type:Ne,selectors:[["timeline-control"]],viewQuery:function(d,n){if(1&d&&(t.Gf(Hn,5),t.Gf(Di,5),t.Gf(Fi,5)),2&d){let s;t.iGM(s=t.CRH())&&(n.tabsContainer=s.first),t.iGM(s=t.CRH())&&(n.tabsWrapper=s.first),t.iGM(s=t.CRH())&&(n.tabs=s)}},hostBindings:inputs:{items:"items",selected:"selected",style:"style"},outputs:{selectedChange:"selectedChange"},features:[t.qOj,t.TTD],decls:2,vars:1,consts:[[1,"tab-style"],["class","tab-container",4,"ngIf"],[1,"tab-container"],["class","prev action flex hor-center",3,"ngClass","click",4,"ngIf"],[1,"time-tabs","flex-main",3,"panstart","pan","panend"],["tabsWrapper",""],[1,"tabs"],["tabsContainer",""],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],["class","next action flex hor-center",3,"ngClass","click",4,"ngIf"],[1,"prev","action","flex","hor-center",3,"ngClass","click"],[1,"icon-left-open"],[1,"tab",3,"ngClass","click"],["tabs",""],[1,"next","action","flex","hor-center",3,"ngClass","click"],[1,"icon-right-open"]],template:dependencies:[J.mk,J.sg,J.O5],styles:['[_nghost-%COMP%]{display:flex;overflow:hidden;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]{flex-direction:column;width:100%}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]{display:flex;overflow:hidden}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;will-change:transform;transition:transform .13s ease-out;padding:0 10px 12px;position:relative}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:0 4px;margin:0;display:flex;justify-content:center;align-items:center;will-change:font-size,border-bottom-width;transition:margin .12s,font-size .15s ease-in,border-bottom-color .25s ease-out;cursor:pointer;position:relative;width:max-content;white-space:nowrap}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.6}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:before{content:" ";width:100%;height:1px;opacity:.2;border-bottom:1px solid;left:0;bottom:-7px;position:absolute}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:after{content:" ";opacity:.6;width:5px;height:5px;border:1px solid currentColor;left:50%;bottom:-9px;position:absolute;border-radius:50%;background:currentColor}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:first-child:before{width:calc(50% - 5px);left:calc(50% + 5px)}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:last-child:before{width:50%}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%] > div.tab-style[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .time-tabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]:after{opacity:1;background:currentColor}[_nghost-%COMP%]   .action[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;overflow:hidden;white-space:nowrap;position:relative;transition:border-color .3s}[_nghost-%COMP%]   .action.prev[_ngcontent-%COMP%], [_nghost-%COMP%]   .action.next[_ngcontent-%COMP%]{width:1em}[_nghost-%COMP%]   .action.prev[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before, [_nghost-%COMP%]   .action.next[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{margin:0;width:100%}[_nghost-%COMP%]   .action.prev[_ngcontent-%COMP%]{left:0;justify-content:flex-start;align-items:center}[_nghost-%COMP%]   .action.next[_ngcontent-%COMP%]{justify-content:flex-end;align-items:center;right:0}[_nghost-%COMP%]   .action[_ngcontent-%COMP%]:hover{border-color:#313131}[_nghost-%COMP%]   .action.inactive[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.4}@keyframes pulse{0%{opacity:.1}50%{opacity:1}to{opacity:.1}}'],changeDetection:0}),(0,Wt.gn)([(0,xt.D)(100)],Ne.prototype,"onResize",null);var Hi=k(41218);const Ui=["dropdownMenuButtons"];function Gi(o,d){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"timeline-control",6),t.NdJ("selectedChange",function(l){t.CHM(n);const p=t.oxw().$implicit;return t.KtG(p.selectedValue=l)})("selectedChange",function(){t.CHM(n);const l=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.updateFilter(l))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.Akn(s.style),t.Q6J("items",n.localStorage.filterObjects)("selected",n.selectedValue)}}function Qi(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(2).$implicit,p=t.oxw(2);return t.KtG(p.playButtonClick(l))}),t._UZ(1,"i"),t.qZA()}if(2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Gre("icon-",n.localStorage.playButton.active?"pause":"play","")}}function Ji(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",,t._UZ(1,"i"),t.qZA()}if(2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Gre("icon-",n.localStorage.playButton.active?"pause":"play","")}}function Zi(o,d){if(1&o){const n=t.EpF();t.ynx(0),t.YNc(1,Qi,2,3,"div",7),t.TgZ(2,"items-slider",8),t.NdJ("ngModelChange",("ngModelChange",,t.qZA(),t.YNc(3,Ji,2,3,"div",7),t.BQk()}if(2&o){const n=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.options.playButton.enabled&&"left"===n.options.playButton.position),t.xp6(1),t.Akn(s.style),t.Q6J("ngModel",n.selectedValue)("items",n.localStorage.filterObjects),t.xp6(1),t.Q6J("ngIf",n.options.playButton.enabled&&"right"===n.options.playButton.position)}}function ji(o,d){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw(2).$implicit,s=t.oxw(2);t.xp6(1),t.hij(" ",n.options.titleEnabled?n.options.title+(n.options.showCharacteristic.enabled?n.options.showCharacteristic.prefix+s.formatSelectedValue(n,n.selectedValue)+n.options.showCharacteristic.suffix:""):s.formatSelectedValue(n,n.selectedValue)," ")}}function Qn(o,d){if(1&o&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&o){const n=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",n.selectedValues.length," ")}}function Wi(o,d){if(1&o&&(t._uU(0),t.YNc(1,Qn,2,1,"span",20)),2&o){const n=t.oxw(2).$implicit;t.hij(" ",n.options.title," "),t.xp6(1),t.Q6J("ngIf",n.selectedValues.length>0&&n.selectedValues.length!==n.localStorage.filterObjects.length)}}const xn=function(){return{borderTopLeftRadius:0}},bn=he=function qi(o,d){if(1&o){const n=t.EpF();t.ynx(0)(1),t.TgZ(2,"menu-button",10,11),t.NdJ("isOpen",function(l){t.CHM(n);const p=t.oxw().$implicit,S=t.oxw(2);return t.KtG(S.opened(l,p.localStorage.title))}),t.TgZ(4,"button",12),t.YNc(5,ji,2,1,"ng-container",13),t.YNc(6,Wi,2,2,"ng-template",null,14,t.W1O),t.TgZ(8,"div",15),t._UZ(9,"i",16),t.qZA()(),t.TgZ(10,"div",17,18)(12,"list-selector",19),t.NdJ("newPositions",function(l){t.CHM(n);const p=t.oxw().$implicit,S=t.oxw(2);return t.KtG(S.setPopupPositions(p.localStorage.title,l))})("ngModelChange",,t.qZA()()(),t.BQk()()}if(2&o){const n=t.MAs(7),s=t.oxw().$implicit,l=t.MAs(1),p=t.oxw(2);t.xp6(2),t.Q6J("scrollStrategy","close")("close",p.closeSelect)("hideShadow",!0)("withBackdrop",!1)("autoclose",!0)("overlayStyle",t.DdM(44,xn))("menuStyle",t.DdM(45,bn))("originPosition",p.getPopupPosition(s.localStorage.title).originPosition)("overlayPosition",p.getPopupPosition(s.localStorage.title).overlayPosition)("showOverflow",!0)("connectToElement",l),t.xp6(3),t.Q6J("ngIf","valueSelector"===s.type)("ngIfElse",n),t.xp6(3),t.ekj("r180",p.activeFilter===s.localStorage.title),t.xp6(2),t.Udp("transform",p.editor&&p.displayScale&&1!==p.displayScale?"scale("+p.displayScale+")":null)("transform-origin",p.editor&&p.displayScale&&1!==p.displayScale?"top left":null)("min-width",l.clientWidth,"px")("padding",p.styleService.convertSpacing(p.dropdownStyle.container.padding))("box-shadow",p.styleService.convertShadow(p.dropdownStyle.container.boxShadow))("border-radius",p.dropdownStyle.container.borderRadius,"px")("background-color",p.dropdownStyle.container.background.backgroundColor),t.xp6(2),t.Q6J("items",s.localStorage.filterObjects)("multiSelect","multiValueSelector"===s.type)("ngModel","valueSelector"===s.type?s.selectedValue:s.localStorage.selectedValues)("placeholder",p.dropdownStyle.search.placeholder)("itemFont",p.styleService.convertFontFormat(p.dropdownStyle.items.font))("itemInactiveOpacity",p.dropdownStyle.items.inactive.opacity)("itemMouseOver",t.WLB(46,he,p.dropdownStyle.items.mouseOver.background.backgroundColor,p.dropdownStyle.items.mouseOver.color))("itemActive",t.WLB(49,he,p.dropdownStyle.items.active.background.backgroundColor,p.dropdownStyle.items.active.color))("selectAllText",p.dropdownStyle.selectAllButton.label)("showSearch",p.dropdownStyle.search.enabled)("trackByFn",p.trackByFunction)("autoSort",p.dropdownStyle.items.ordering.enabled)("sortDesc",p.dropdownStyle.items.ordering.desc)("measureElement",l)("sortByField","date"===s.localStorage.type?"dateValue":null)}}const fo=function go(o,d){if(1&o&&(t.TgZ(0,"div",2,3),t.ynx(2,4),t.YNc(3,Gi,2,4,"ng-container",5),t.YNc(4,Zi,4,6,"ng-container",5),t.YNc(5,qi,13,52,"ng-container",5),t.BQk(),t.qZA()),2&o){const n=d.$implicit,s=t.oxw(2);t.Gre("filter flex ",n.options.appearance,""),t.ekj("multi","multiValueSelector"===n.type),t.Q6J("ngClass",t.VKq(11,fo,s.activeFilter===n.localStorage.title))("ngStyle",s.activeFilter===n.localStorage.title?s.openStyle:s.style),t.xp6(2),t.Q6J("ngSwitch",n.options.appearance),t.xp6(1),t.Q6J("ngSwitchCase","timeline"),t.xp6(1),t.Q6J("ngSwitchCase","slider"),t.xp6(1),t.Q6J("ngSwitchCase","dropdown")}}onst{cloneObject:cn}=_e.hC,{MapWithDataTypes:Xi}=_e._G;let Ye=(()=>{class o extends kt.K{constructor(n,s,l,p,S,L){super(),this.styleService=n,this.eventBus=s,this.messageBus=l,this.cdr=p,this.breakPointManager=S,this.breakpointObserver=L,this.filterReady=new t.vpe,this.inVisualFilter=[],this.closeSelect=!1,this.baseOriginPosition=["start","bottom"],this.baseOverlayPosition=["start","top"],this.popupPositions={},this.messageBusLoaded=!1,this.openFirstDropdown=!1,this.detectChanges=()=>{this.cdr.detectChanges(),this.dropdownMenuButtons&&this.dropdownMenuButtons.length>0&&this.dropdownMenuButtons.toArray().filter(B=>B.open).forEach(},this.openDropdown=B=>{if(!this.breakpointObserver.isMatched("(max-width: 900px")&&(this.openFirstDropdown=B,this.dropdownMenuButtons&&this.dropdownMenuButtons.length>0)){const X=this.dropdownMenuButtons.first;this.openFirstDropdown?(X.preventClosing=!0,X.autoclose=!1,X.open||X.openMenu(!0)):(X.preventClosing=!1,X.closeAction(),X.autoclose=!0)}},this.setupLocalStorage=B=>{const{format:X,dataType:tt,title:Ct}=this.content.typeSpecific.fields[B.fieldName];B.localStorage.title=Ct,B.localStorage.type=tt,B.localStorage.filterObjects=B.localStorage.filterValues.map(mt=>{let D=B.selectedValue===mt;if("multiValueSelector"===B.type&&(D=B.selectedValues.includes(mt)||0===B.selectedValues.length),"date"===tt){const N=(0,We.zZ)(mt,X.date.inputFormat,X.locale);return{label:(0,We.rl)(N,X.date.dateFormat,X.locale),value:mt,date:(0,We.rl)(N,X.date.dateFormat,X.locale),dateValue:N.valueOf(),selected:D}}return{label:mt,value:mt,date:mt,selected:D}}),"multiValueSelector"===B.type&&(B.localStorage.selectedValues=cn(B.selectedValues),0===B.localStorage.selectedValues.length&&(B.localStorage.selectedValues=cn(B.localStorage.filterValues))),"valueSelector"===B.type&&(B.localStorage.playButton=B.localStorage.playButton||{active:B.options.playButton.autoStart,timerRef:void 0})},this.formatSelectedValue=(B,X)=>{if(!this.content.typeSpecific.fields[B.fieldName])return X;const{format:tt,dataType:Ct}=this.content.typeSpecific.fields[B.fieldName];if("date"===Ct){const D=(0,We.zZ)(X,tt.date.inputFormat,tt.locale);return(0,We.rl)(D,tt.date.dateFormat,tt.locale)}return X},this.isMobile=()=>!!this.content&&this.breakPointManager.isMobile(this.content.slug),this.updateFilter=(B,X=!0)=>{var tt;!(null===(tt=B.localStorage)||void 0===tt)&&tt.playButton&&(B.localStorage.playButton.active=!X),this.eventBus.filterChange.next({slug:this.content.slug,context:{filter:B}});const{referenceID:Ct}=this.content.localStorage;Xi.includes(this.content.type)?this.messageBus.emit(W.K7.FilterUpdate,[W.BV.Map],{content:this.content,dataId:this.content.typeSpecific.dataId},Ct):this.messageBus.emit(W.K7.FilterUpdate,[W.BV.Chart],{content:this.content,dataId:this.content.typeSpecific.dataId},Ct)},this.trackByFunction=this.playButtonFinish=B=>{for(const X of this.inVisualFilter){if("valueSelector"!==X.type)continue;const{localStorage:tt,options:Ct}=X;Ct.playButton.enabled&&tt.playButton.active&&!tt.playButton.timerRef&&(tt.playButton.timerRef=setTimeout(this.playButtonInterval,Ct.playButton.interval,X))}},this.playButtonClick=B=>{const{localStorage:X}=B;X.playButton.active=!X.playButton.active,X.playButton.timerRef&&(clearTimeout(X.playButton.timerRef),X.playButton.timerRef=void 0),X.playButton.active&&this.playButtonInterval(B,!0)},this.playButtonInterval=(B,X=!1)=>{const{localStorage:tt,selectedValue:Ct,options:mt}=B,{filterValues:D}=tt;if(X=X||mt.playButton.loop,tt.playButton.timerRef&&(clearTimeout(tt.playButton.timerRef),tt.playButton.timerRef=void 0),Ct===D[D.length-1]&&!X)return tt.playButton.active=!1,void this.cdr.detectChanges();const Y=(D.indexOf(Ct)+1)%D.length;B.selectedValue=D[Y],this.updateFilter(B,!1)}}get style(){const n=this.styleService.getHorizontalSpacing(this.content.typeSpecific.style.inVisualFilter.font.margin);return Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.content.typeSpecific.style.inVisualFilter.font)),{maxWidth:`calc(100% - ${n.left} - ${n.right})`,borderRadius:`${this.content.typeSpecific.style.inVisualFilter.borderRadius}px`}),this.content.typeSpecific.style.inVisualFilter.background)}get openStyle(){if(!this.dropdownStyle.container.applyStyleToSourceButton)return this.style;const n={font:JSON.parse(JSON.stringify(this.content.typeSpecific.style.inVisualFilter.font)),background:this.content.typeSpecific.style.inVisualFilter.dropdown.container.background};n.font.color=this.content.typeSpecific.style.inVisualFilter.dropdown.items.font.color;const s=this.styleService.getHorizontalSpacing(this.content.typeSpecific.style.inVisualFilter.font.margin);return Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(n.font)),{maxWidth:`calc(100% - ${s.left} - ${s.right})`,borderRadius:`${this.content.typeSpecific.style.inVisualFilter.borderRadius}px`}),n.background)}gOnInit(){}ngAfterViewInit(){this.messageBus.on(W.Bd.InvisUpdate,W.BV.InvisualFilter,this.detectChanges,this.componentDestroyed$,this.content.localStorage.referenceID),this.messageBus.on(W.Bd.InvisDropdownEditingActive,W.BV.InvisualFilter,this.openDropdown,this.componentDestroyed$,this.content.localStorage.referenceID),this.messageBus.on(W.cT.DisplayScale,"CATCH_ALL",n=>{this.displayScale=this.editor?n.displayScale:void 0},this.componentDestroyed$)}ngOnChanges(n){if(this.content&&n.forceUpdate&&this.content.typeSpecific&&this.content.typeSpecific.inVisualFilter){if(this.content&&!this.messageBusLoaded){this.messageBusLoaded=!0;const{referenceID:s}=this.content.localStorage;this.messageBus.on("RENDER_FINISH",W.BV.Filter,this.playButtonFinish,this.componentDestroyed$,s)}this.styleService.setContent(this.content),this.inVisualFilter=this.content.typeSpecific.inVisualFilter.filter(s=>{var l;return!s.options.hide&&(null===(l=s.localStorage)||void 0===l?void 0:l.filterValues.length)>1}),this.content.localStorage.filterVisual&&(this.inVisualFilter=this.inVisualFilter.filter(s=>s.fieldName!==this.content.localStorage.filterVisual.fieldName));for(const s of this.inVisualFilter)this.setupLocalStorage(s);this.detectChanges(),this.filterReady.emit()}}pened(n,s){n?this.activeFilter=s:this.activeFilter===s&&(this.activeFilter=null)}singleOutElement(n,s){n.selectedValues=[s.value],this.updateFilter(n)}setValues(n,s){"valueSelector"===n.type?(n.selectedValue=s,this.closeSelect=!this.closeSelect):0===s.length?(n.selectedValues=[],n.localStorage.selectedValues=cn(n.localStorage.filterValues)):(n.selectedValues=s,n.localStorage.selectedValues=s),this.updateFilter(n)}etPopupPosition(n){return this.popupPositions[n]||{overlayPosition:this.baseOverlayPosition,originPosition:this.baseOriginPosition}}}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["content-filter"]],viewQuery:inputs:{content:"content",forceUpdate:"forceUpdate",editor:"editor"},outputs:{filterReady:"filterReady"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[3,"class","ngClass","multi","ngStyle",4,"ngFor","ngForOf"],[3,"ngClass","ngStyle"],["element",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"items","selected","selectedChange"],["class","clickable play-button",3,"click",4,"ngIf"],[3,"ngModel","items","ngModelChange"],[1,"clickable","play-button",3,"click"],[3,"scrollStrategy","close","hideShadow","withBackdrop","autoclose","overlayStyle","menuStyle","originPosition","overlayPosition","showOverflow","connectToElement","isOpen"],["dropdownMenuButtons",""],["button","",1,"title","flex","center"],[4,"ngIf","ngIfElse"],["mulitHeader",""],[1,"open-icon"],[1,"icon-down-open","flex","center"],[1,"list"],["list",""],[3,"items","multiSelect","ngModel","placeholder","itemFont","itemInactiveOpacity","itemMouseOver","itemActive","selectAllText","showSearch","trackByFn","autoSort","sortDesc","measureElement","sortByField","newPositions","ngModelChange"],["class","counter flex center",4,"ngIf"],[1,"counter","flex","center"]],template:dependencies:[J.mk,J.sg,J.O5,J.PC,J.RF,J.n9,Ht.JJ,Ht.On,Ne,Rn.p,Cn.p,Hi.F],styles:['[_nghost-%COMP%]{display:flex;flex-wrap:wrap;flex-grow:1;max-width:100%}[_nghost-%COMP%]   .filter.timeline[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}[_nghost-%COMP%]   .filter.slider[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]{max-width:100%;position:relative;justify-content:center;box-sizing:border-box}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;opacity:0;pointer-events:none;box-shadow:0 0 0 transparent;transition:all .15s ease-out}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:0;font-weight:inherit;font-style:inherit;cursor:pointer;background:transparent;color:currentColor;justify-content:space-between;border:0px;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:none;text-align:left}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{border-radius:100px;color:#fff;background:#666666;width:1em;height:1em;font-weight:400;font-size:.75em;position:absolute;right:-.5em;top:-.5em;z-index:1;pointer-events:none;padding:.25em;transform:translate(25%,-25%)}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]   .down-arrow[_ngcontent-%COMP%]{border-left:.4em solid transparent;border-right:.4em solid transparent;border-top:.4em solid;margin:0 .4em;opacity:.54;width:0px;height:0px}[_nghost-%COMP%]   .filter.dropdown[_ngcontent-%COMP%]   .open-icon[_ngcontent-%COMP%]{position:relative;z-index:2}']}),o})();function Ki(o,d){if(1&o&&t._UZ(0,"content-filter",1),2&o){const n=t.oxw();t.Q6J("content",n.content)("forceUpdate",n.forceUpdate)("editor",n.layoutContainer.options.editor)}}let vo=(()=>{class o extends Ot.Y{gOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(je.u))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-filter"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[3,"content","forceUpdate","editor",4,"ngIf"],[3,"content","forceUpdate","editor"]],template:dependencies:[J.O5,Ye],styles:["[_nghost-%COMP%]{display:flex;max-width:100%;min-width:0}"]}),o})();const _o=let yo=(()=>{class o extends kt.K{constructor(n){super(),this.messageBus=n,this.infoOpen=!1,this.switchInfo=()=>{this.infoOpen=!this.infoOpen,this.messageBus.emit("info-modal",["info-modal"],{open:this.infoOpen},this.content.localStorage.referenceID)}}ngOnInit(){}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-info"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:2,vars:5,consts:[[1,"button","icon","clean","round","no-shadow",3,"title","click"],[3,"ngClass"]],template:function(n,s){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",,t._UZ(1,"i",1),t.qZA()),2&n&&(t.Q6J("title",s.infoOpen?"Close":"Show Information"),t.xp6(1),t.Q6J("ngClass",t.WLB(2,_o,s.infoOpen,!s.infoOpen)))},dependencies:[J.mk],styles:["[_nghost-%COMP%]{display:flex}"]}),o})();const Co=["legend"];let xo=(()=>{class o extends Ot.Y{constructor(n,s,l,p){super(),this.chartManager=n,this.breakPointManager=s,this.messageBus=l,this.cdr=p,this.legendEvent=new t.vpe,this.legendStyle={height:"0",overflowX:"hidden",overflowY:"auto"},this.containerCreated=!1,this.safeDetectChanges=this.getStyleScaled=(S,L)=>{let B=1;this.content&&(this.content.typeSpecific.layout.oldLayoutStyle||(B=this.breakPointManager.getSizeFactor(this.content.slug)));let X=S[L];return"%"===S[L+"Unit"]?X:X*B},this.resizeLegend=S=>{this.updateLegendSize(!1,"resizeLegend")},this.updateLegend=this.updateLegendSize=(S,L)=>{if(!this.config||!this.chartManager||!this.containerCreated)return;const{offsetWidth:B,offsetHeight:X}=this.legend.nativeElement;if(isNaN(B)||isNaN(X))return;const{content:mt,data:D,range:N}=this.config;if(mt&&D&&N){if(D&&0===D.length)return void this.emitRenderStatus();if(S||B!==this.prevLegendWidth||X!==this.prevLegendHeight){if(this.prevLegendWidth=B,this.prevLegendHeight=X,this.content.typeSpecific.chart.legend.enabled&&B>0){this.chartManager.updateContentData(mt,D,N,B);const Y=this.chartManager.updateLegendContainerSize(B,X);this.legendStyle.height=Y+"px";const{style:q,scrollable:at,scrollHeight:dt}=this.content.typeSpecific.chart.legend,Mt=this.getStyleScaled(q.margin,"top")+q.margin.topUnit,zt=this.getStyleScaled(q.margin,"bottom")+q.margin.bottomUnit;this.legendStyle.marginTop=Mt,this.legendStyle.marginBottom=zt,this.legendStyle.maxHeight=at?dt+"px":void 0,this.chartManager.updateLegend(),Y>0&&this.emitRenderStatus()}else this.legendStyle.height="0",this.legendStyle.marginTop="0",this.legendStyle.marginBottom="0",this.chartManager.updateLegend(),this.emitRenderStatus();this.safeDetectChanges()}}}}ngOnInit(){if(!this.chartManager)return;const{offsetWidth:n,offsetHeight:s}=this.legend.nativeElement;this.prevLegendWidth=n,this.prevLegendHeight=s,this.chartManager.createLegendContainer(this.legend.nativeElement),this.containerCreated=!0,this.updateLegendSize(!0,"ngOnInit")}ngOnChanges(n){this.updateLegendSize(!0,"ngOnChanges")}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-legend"]],viewQuery:function(n,s){if(1&n&&t.Gf(Co,7),2&n){let l;t.iGM(l=t.CRH())&&(s.legend=l.first)}},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{legendEvent:"legendEvent"},features:[t.qOj,t.TTD],decls:2,vars:3,consts:[["resizeObserver","",1,"legend",3,"debounce","caller","ngStyle","resize"],["legend",""]],template:function(n,s){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("resize",,t.qZA()),2&n&&t.Q6J("debounce",100)("caller","#legend")("ngStyle",s.legendStyle)},dependencies:[J.PC,me.P],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;flex-grow:1;position:relative}[_nghost-%COMP%]     svg{display:block;position:absolute}"]}),o})();var bo=k(92375);const So=["fallbackLogo"];function Mo(o,d){if(1&o&&(t.TgZ(0,"a",2),t._UZ(1,"i",3,4),t.qZA()),2&o){const n=t.oxw();t.Q6J("ngStyle",n.containerStyle()),t.xp6(1),t.Q6J("ngStyle",n.logoStyle())}}function Oo(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",5)(1,"img",6),t.NdJ("error",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.safeDetectChanges())})("load",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.logoReady())}),t.qZA()()}if(2&o){const n=t.oxw();t.Q6J("ngStyle",n.containerStyle()),t.xp6(1),t.Q6J("src",n.bucketUrl+"/"+n.content.vUserInfo.userPreferences.defaultContentLogo,t.LSH)("ngStyle",n.logoStyle())}}function To(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",5)(1,"img",6),t.NdJ("error",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.safeDetectChanges())})("load",,t.qZA()()}if(2&o){const n=t.oxw();t.Q6J("ngStyle",n.containerStyle()),t.xp6(1),t.Q6J("src",n.bucketUrl+"/"+n.content.logo,t.LSH)("ngStyle",n.logoStyle())}}let Po=(()=>{class o extends Ot.Y{constructor(n,s,l,p){super(),this.styleService=n,this.globalService=s,this.breakPointManager=l,this.cdr=p,this.hasLogo=!1,this.hasDefaultLogo=!1,this.timeCache="",this.containerStyle=()=>{const{margin:S,padding:L}=this.options,B={display:"flex",margin:this.styleService.convertSpacing(S),padding:this.styleService.convertSpacing(L)};return(0,ht.R)(B),B},this.logoStyle=()=>{const{height:L,borderRadius:B,boxShadow:X}=this.options;let tt=1;this.content.typeSpecific.layout.oldLayoutStyle||(tt=this.breakPointManager.getSizeFactor(this.content.slug));const Ct=L*tt,mt={display:"inline-flex",maxWidth:"fit-content",height:Ct+"px",borderRadius:B+"px",boxShadow:this.styleService.convertShadow(X)};return this.fallbackLogo&&this.fallbackLogo.nativeElement.style.setProperty("--logo-font-size",Ct+"px"),(0,ht.R)(mt),mt},this.logoReady=this.bucketUrl=this.globalService.getBucketUrl()}ngOnInit(){}ngOnChanges(n){this.safeDetectChanges(),this.timeCache=(0,bo.jq)(15),this.hasLogo=!!this.content.logo,this.hasDefaultLogo=!!this.content.vUserInfo.userPreferences.defaultContentLogo}afeDetectChanges(){this.cdr.destroyed||this.cdr.detectChanges(),this.emitRenderStatus()}}return o.\u0275fac=o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-logo"]],viewQuery:inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:3,vars:3,consts:[["href","https://www.23degrees.io","target","_blank",3,"ngStyle",4,"ngIf"],[3,"ngStyle",4,"ngIf"],["href","https://www.23degrees.io","target","_blank",3,"ngStyle"],[1,"icon-logo","layout-logo",2,"color","#000",3,"ngStyle"],["fallbackLogo",""],[3,"ngStyle"],["alt","Logo",3,"src","ngStyle","error","load"]],template:function(n,s){1&n&&(t.YNc(0,Mo,3,2,"a",0),t.YNc(1,Oo,2,3,"div",1),t.YNc(2,To,2,3,"div",1)),2&n&&(t.Q6J("ngIf",!s.hasLogo&&!s.hasDefaultLogo),t.xp6(1),t.Q6J("ngIf",!s.hasLogo&&s.hasDefaultLogo),t.xp6(1),t.Q6J("ngIf",s.hasLogo))},dependencies:[J.O5,J.PC],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .layout-logo[_ngcontent-%COMP%]:before{margin:0;padding:0;font-size:var(--logo-font-size)}"]}),o})();unction Eo(o,d){if(1&o&&(t.TgZ(0,"div",3),t._UZ(1,"div",4),t.YNc(2,wo,2,0,"div",5),t.qZA()),2&o){const n=d.$implicit,s=d.index,l=t.oxw(2);t.xp6(1),t.Q6J("innerHTML",n,t.oJD),t.xp6(1),t.Q6J("ngIf",s<l.attributions.length-1)}}function Ao(o,d){if(1&o&&(t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,Eo,3,2,"div",2),t.qZA(),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.content.typeSpecific.map.attributions.font)),t.xp6(1),t.Q6J("ngForOf",n.attributions)}}const{MapTypes:Lo}=_e._G;let ko=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.messageBus=n,this.styleService=s,this.cdr=l,this.isMap=!1,this.attributions=[],this.setupAttributions=(p,S)=>{p.map&&this.setup(p.map)}}ngOnInit(){this.messageBus.on(W.NX.SetMapStyle,W.BV.MapAttributor,this.setupAttributions,this.componentDestroyed$,this.content.localStorage.referenceID),this.config&&this.config.content&&this.config.content.typeSpecific.isChild&&this.messageBus.emit(W.NX.RequestMapStyle,[W.BV.Map],{receiver:W.BV.MapAttributor},this.content.localStorage.referenceID)}gOnChanges(n){this.isMap=Lo.includes(this.content.type)}setup(n){const s=[...this.getSourceAttribution()],l=n.style.sourceCaches;for(const p in l){const S=l[p];if(S.used){const L=S.getSource();L.attribution&&s.indexOf(L.attribution)<0&&s.push(L.attribution)}}this.attributions.length!==s.length&&(this.attributions=[...s],this.cdr.detectChanges())}getSourceAttribution(){if(this.content&&this.content.typeSpecific.map&&this.content.typeSpecific.map.sources&&Array.isArray(this.content.typeSpecific.map.sources))return this.content.typeSpecific.map.sources.map(n=>{if(n)return n.attributionLink?`<a href="${n.attributionLink}" target="_blank">${n.attribution}</a>`:`<span class="attribution-style">${n.attribution}</span>`})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Dt.Y),t.Y36(Zt.vr),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-map-attributions"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex",3,"ngStyle"],["class","attribution flex",4,"ngFor","ngForOf"],[1,"attribution","flex"],[3,"innerHTML"],["class","divider",4,"ngIf"],[1,"divider"]],template:function(n,s){1&n&&t.YNc(0,Ao,3,2,"ng-container",0),2&n&&t.Q6J("ngIf",s.content&&s.isMap)},dependencies:[J.sg,J.O5,J.PC],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .attribution[_ngcontent-%COMP%]  a{color:currentColor}[_nghost-%COMP%]   .attribution[_ngcontent-%COMP%]  a:hover{color:currentColor;text-decoration:underline}[_nghost-%COMP%]   .attribution[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin:0 3px}"],data:{animation:[Ae.BX,Ae.Mv]}}),o})();const $o=["map"];function e(o,d){if(1&o&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Oqu(n.content.typeSpecific.noDataMessages.visual)}}const a=function(o){return{"hide-map":o}};let i=(()=>{class o extends kt.K{gAfterViewInitesizeMap(n){this.mapEvent.emit({action:"resize",value:n})}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-map"]],viewQuery:function(n,s){if(1&n&&t.Gf($o,7),2&n){let l;t.iGM(l=t.CRH())&&(s.map=l.first)}},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{mapEvent:"mapEvent"},features:[t._Bn([]),t.qOj],decls:3,vars:6,consts:[["resizeObserver","",1,"map","viz",3,"ngClass","caller","debounce","resize"],["map",""],["class","no-data",4,"ngIf"],[1,"no-data"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("resize",function(p){return s.resizeMap(p)}),t.qZA(),t.YNc(2,e,2,1,"div",2)),2&n&&(t.Q6J("ngClass",t.VKq(4,a,s.config&&s.config.data&&0===s.config.data.length))("caller","[layout-map]")("debounce",200),t.xp6(2),t.Q6J("ngIf",s.config&&s.config.data&&0===s.config.data.length))},dependencies:[J.mk,J.O5,me.P],styles:["[_nghost-%COMP%]{display:flex;z-index:0}[_nghost-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-grow:1;position:relative;overflow:hidden}[_nghost-%COMP%]   .map.hide-map[_ngcontent-%COMP%]{visibility:hidden;opacity:0;pointer-events:none}[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;justify-content:center;align-items:center}"],data:{animation:[]}}),o})();const r=230,u=(0,w.X$)("header",[(0,w.SB)("true",(0,w.oB)({opacity:1,height:"*",padding:"*",margin:"*"})),(0,w.SB)("false",(0,w.oB)({opacity:0,height:"0px",padding:"0",margin:"0"})),(0,w.eR)("1 => 0",(0,w.jt)(r+"ms ease-in")),(0,w.eR)("0 => 1",(0,w.jt)(r+"ms ease-out"))]),v=(0,w.X$)("body",[(0,w.SB)("true",(0,w.oB)({width:"*",padding:"0.5em",margin:"*"})),(0,w.SB)("false",(0,w.oB)({width:"1em",padding:0,margin:0})),(0,w.eR)("1 => 0",(0,w.ru)([(0,w.IO)(".show-nulls",[(0,w.oB)({height:"1.75em",paddingTop:"0.5em",paddingBottom:"0"}),(0,w.jt)(r+"ms ease-in",(0,w.oB)({height:"10px",paddingTop:"0",paddingBottom:"0"}))],{optional:!0}),(0,w.jt)(r+"ms ease-in")])),(0,w.eR)("0 => 1",[(0,w.ru)([(0,w.IO)(".show-nulls",[(0,w.oB)({height:"10px",paddingTop:"0",paddingBottom:"0"}),(0,w.jt)(r+"ms ease-out",(0,w.oB)({height:"1.75em",paddingTop:"0.5em",paddingBottom:"0em"}))],{optional:!0}),(0,w.jt)(r+"ms ease-out")])])]);var y=k(86307),h=k.n(y),m=k(2533),g=k(64565),f=k(35571),_=k(62942),b=k(41021);const O=["colorsContainer"],C=["legendBody"],x=["valuesContainer"];function P(o,d){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const n=t.oxw(4);t.xp6(1),t.Oqu(n.legendTitleFormat.prefix)}}unction E(o,d){if(1&o&&(t.TgZ(0,"div",8),t.YNc(1,P,2,1,"span",0),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"format"),t.qZA(),t.YNc(5,T,2,1,"span",0),t.qZA()),2&o){const n=t.oxw(3);t.Q6J("ngStyle",n.styleService.convertFontFormat(n.legend.titleStyle)),t.xp6(1),t.Q6J("ngIf",n.legendTitleFormat),t.xp6(2),t.Oqu(t.Dn7(4,4,n.headerValue,n.legendTitleFormat,!1)),t.xp6(2),t.Q6J("ngIf",n.legendTitleFormat)}}function U(o,d){if(1&o&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.qZA(),t.YNc(3,E,6,8,"div",7),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("@header",n.active)("ngStyle",n.headerStyle),t.xp6(1),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.legend.titleStyle)),t.xp6(1),t.Oqu(n.legend.title.label),t.xp6(1),t.Q6J("ngIf",n.isValidNumber(n.headerValue))}}function V(o,d){1&o&&t.GkF(0)}const G=function H(o,d){if(1&o&&(t.ynx(0),t.YNc(1,V,1,0,"ng-container",20),t.BQk()),2&o){t.oxw(2);const n=t.MAs(6),s=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,G,s.colors.solid))}}function et(o,d){if(1&o&&(t.ynx(0),t._UZ(1,"gradient-viewer",23),t.BQk()),2&o){const n=t.oxw(4);t.xp6(1),t.Q6J("colors",n.colors.continuous.colors)}}function lt(o,d){1&o&&t.GkF(0)}const Z=function(o,d){return{color:o,index:d}};function I(o,d){if(1&o&&(t.ynx(0),t.YNc(1,lt,1,0,"ng-container",20),t.BQk()),2&o){const n=d.$implicit,s=d.index;t.oxw(4);const l=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.WLB(2,Z,n,s))}}function A(o,d){if(1&o&&t.YNc(0,I,2,5,"ng-container",18),2&o){const n=t.oxw(4);t.Q6J("ngForOf",n.getColors())}}function R(o,d){if(1&o&&(t.ynx(0),t.YNc(1,et,2,1,"ng-container",21),t.YNc(2,A,1,1,"ng-template",null,22,t.W1O),t.BQk()),2&o){const n=t.MAs(3),s=t.oxw(3);t.xp6(1),t.Q6J("ngIf","quantiles"!==s.colors.continuous.scaleType&&"gradient"===s.legend.type&&"bubbles"!==s.displayType)("ngIfElse",n)}}function ut(o,d){if(1&o&&(t.ynx(0),t._UZ(1,"gradient-viewer",23),t.BQk()),2&o){const n=t.oxw(4);t.xp6(1),t.Q6J("colors",n.colors.gradient.values)}}function _t(o,d){1&o&&t.GkF(0)}function F(o,d){if(1&o&&(t.ynx(0),t.YNc(1,_t,1,0,"ng-container",20),t.BQk()),2&o){const n=d.$implicit,s=d.index;t.oxw(4);const l=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.WLB(2,Z,n,s))}}function st(o,d){if(1&o&&t.YNc(0,F,2,5,"ng-container",18),2&o){const n=t.oxw(4);t.Q6J("ngForOf",n.getColors())}}function nt(o,d){if(1&o&&(t.ynx(0),t.YNc(1,ut,2,1,"ng-container",21),t.YNc(2,st,1,1,"ng-template",null,24,t.W1O),t.BQk()),2&o){const n=t.MAs(3),s=t.oxw(3);t.xp6(1),t.Q6J("ngIf","gradient"===s.legend.type&&"bubbles"!==s.displayType)("ngIfElse",n)}}function Lt(o,d){1&o&&t.GkF(0)}function Ft(o,d){if(1&o&&(t.ynx(0),t.YNc(1,Lt,1,0,"ng-container",20),t.BQk()),2&o){const n=d.$implicit,s=d.index;t.oxw(3);const l=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.WLB(2,Z,n,s))}}unction $e(o,d){1&o&&t.GkF(0)}function dn(o,d){if(1&o&&(t.ynx(0),t.YNc(1,$e,1,0,"ng-container",20),t.BQk()),2&o){const n=d.$implicit,s=d.index;t.oxw(3);const l=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.WLB(2,Z,n.color,s))}}ction Jn(o,d){1&o&&t.GkF(0)}const Zn=function(o,d){return{value:o,style:d}};function jn(o,d){if(1&o&&(t.ynx(0),t.YNc(1,Jn,1,0,"ng-container",20),t.BQk()),2&o){const n=d.$implicit;t.oxw(2);const s=t.MAs(4),l=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.WLB(2,Zn,n,l.legend.valueStyle))}}function Wn(o,d){if(1&o&&(t.TgZ(0,"div",27)(1,"div",28),t._UZ(2,"div",29),t.qZA(),t.TgZ(3,"div",30)(4,"div",31),t._uU(5),t.qZA()()()),2&o){const n=t.oxw(3);t.Q6J("ngStyle",n.styleService.convertFontFormat(n.legend.valueStyle,"size","px")),t.xp6(2),t.Q6J("ngStyle",n.categoricalDefaultStyle),t.xp6(1),t.ekj("hor-center",n.active),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.legend.valueStyle)),t.xp6(1),t.Udp("max-width",n.maxNoValueWidth)("word-wrap",n.noValueWrap),t.xp6(1),t.Oqu(n.content.typeSpecific.noDataMessages.legend)}}function pn(o,d){if(1&o&&(t.TgZ(0,"div",27)(1,"div",28),t._UZ(2,"div",29),t.qZA(),t.TgZ(3,"div",32)(4,"div",31),t._uU(5),t.qZA()()()),2&o){const n=t.oxw(3);t.Q6J("ngStyle",n.styleService.convertFontFormat(n.legend.valueStyle,"size","px")),t.xp6(2),t.Q6J("ngStyle",n.noDataStyle),t.xp6(1),t.ekj("hor-center",n.active),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.legend.valueStyle)),t.xp6(1),t.Udp("max-width",n.maxNoValueWidth)("word-wrap",n.noValueWrap),t.xp6(1),t.Oqu(n.content.typeSpecific.noDataMessages.legend)}}const hn=function(o){return{"space-around":o}};function Sn(o,d){if(1&o&&(t.TgZ(0,"div",9)(1,"div",10,11)(3,"div",12,13),t.YNc(5,H,2,4,"ng-container",0),t.YNc(6,R,4,2,"ng-container",0),t.YNc(7,nt,4,2,"ng-container",0),t.YNc(8,ce,2,1,"ng-container",0),t.YNc(9,un,2,1,"ng-container",0),t.YNc(10,Ie,2,1,"div",14),t.qZA(),t.TgZ(11,"div",15,16)(13,"div",17),t.ynx(14),t.YNc(15,jn,2,5,"ng-container",18),t.BQk(),t.qZA()()(),t.YNc(16,Wn,6,10,"div",19),t.YNc(17,pn,6,10,"div",19),t.qZA()),2&o){const n=t.oxw(2);t.Q6J("@body",n.active)("ngStyle",n.bodyStyle),t.xp6(3),t.Udp("margin-right",n.showLines()||"none"===n.legend.colorBoxes.border.type?"0px":n.legend.colorBoxes.border.size.left+n.legend.colorBoxes.border.size.right+"px"),t.ekj("full",!n.showLines())("ranged",n.showRange()),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.legend.valueStyle,"size","px")),t.xp6(2),t.Q6J("ngIf","solid"===n.colors.type),t.xp6(1),t.Q6J("ngIf","continuous"===n.colors.type),t.xp6(1),t.Q6J("ngIf","gradient"===n.colors.type),t.xp6(1),t.Q6J("ngIf","range"===n.colors.type),t.xp6(1),t.Q6J("ngIf","categorical"===n.colors.type),t.xp6(1),t.Q6J("ngIf",n.showLines()),t.xp6(1),t.ekj("hidder",!n.active),t.Q6J("ngClass",n.colors.type),t.xp6(2),t.Q6J("ngClass",t.VKq(22,hn,"static"===n.legend.type||"categorical"===n.colors.type||"bubbles"===n.displayType)),t.xp6(2),t.Q6J("ngForOf",n.values),t.xp6(1),t.Q6J("ngIf",n.showOthers),t.xp6(1),t.Q6J("ngIf",n.showNulls)}}unction On(o,d){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const n=t.oxw(4);t.xp6(1),t.hij("",n.prefix,"\xa0")}}unction Fo(o,d){if(1&o&&(t.ynx(0),t.TgZ(1,"span",34),t.YNc(2,On,2,1,"span",0),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"format"),t.qZA(),t.YNc(6,Tn,2,1,"span",0),t.qZA(),t.BQk()),2&o){const n=t.oxw().value,s=t.oxw(2);t.xp6(2),t.Q6J("ngIf",s.prefix),t.xp6(2),t.Oqu(t.Dn7(5,3,n.value,s.legendValuesFormat,!1)),t.xp6(2),t.Q6J("ngIf",s.suffix)}}function Ro(o,d){if(1&o&&(t.TgZ(0,"div",33),t.YNc(1,Mn,3,1,"ng-container",0),t.YNc(2,Fo,7,7,"ng-container",0),t.qZA()),2&o){const n=d.value,s=d.style,l=t.oxw(2);t.Q6J("ngStyle",l.styleService.convertFontFormat(s)),t.xp6(1),t.Q6J("ngIf",n.override||"categorical"===l.colors.type),t.xp6(1),t.Q6J("ngIf",!n.override&&"categorical"!==l.colors.type)}}const No=function(o){return{borderStyle:o}};function Yo(o,d){if(1&o&&t._UZ(0,"div",37),2&o){const n=t.oxw().color,s=t.oxw(2);t.Udp("background",n),t.Q6J("ngStyle",s.active?s.styleService.convertBorder(s.legend.colorBoxes.border):t.VKq(3,No,s.legend.colorBoxes.border.type))}}const Vo=function(o){return{active:o}};function Ho(o,d){if(1&o&&(t.TgZ(0,"div",38),t._UZ(1,"div",39),t.qZA()),2&o){const n=t.oxw(),s=n.index,l=n.color,p=t.oxw(2);t.Q6J("ngClass",t.VKq(2,Vo,p.active)),t.xp6(1),t.Q6J("ngStyle",p.bubblesStyle(s,l))}}function Uo(o,d){if(1&o&&(t.YNc(0,Yo,1,5,"div",35),t.YNc(1,Ho,2,4,"div",36)),2&o){const n=t.oxw(2);t.Q6J("ngIf","bubbles"!==n.displayType),t.xp6(1),t.Q6J("ngIf","bubbles"===n.displayType)}}function Go(o,d){if(1&o&&(t.ynx(0),t.YNc(1,U,4,5,"div",1),t.YNc(2,Sn,18,24,"div",2),t.YNc(3,Ro,3,3,"ng-template",null,3,t.W1O),t.YNc(5,Uo,2,2,"ng-template",null,4,t.W1O),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.legend.title.label),t.xp6(1),t.Q6J("ngIf",!n.legend.hide)}}let Qo=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.styleService=n,this.colorManager=s,this.cdr=l,this.active=!0,this.mobileView=!1,this.mapWithDataTypes=ft.MapWithDataTypes,this.styleValues=[],this.maxNoValueWidth="100%",this.noValueWrap=void 0,this.changes=new t.vpe,this.values=[],this.showNulls=!1,this.showOthers=!1,this.bubbleSizes=[.4,1],this.configUpdate=(p=!0)=>{p&&(this.active=!this.legend.closed),this.calcValues()},this.calcValues=()=>{var p,S,L,B;let X="";"active"===this.content.typeSpecific.data.valueRange.type&&(X="data"),"full"===this.content.typeSpecific.data.valueRange.type&&(X="preRenderData"),"user"===this.content.typeSpecific.data.valueRange.type&&(X="preRenderData"),this.values=[];let tt=[];this.legend.values.overrides.enabled&&this.legend.values.overrides.values&&this.legend.values.overrides.values.filter(dt=>dt).length&&(tt=this.legend.values.overrides.values);const Ct=(0,rt.BT)(null===(S=null===(p=this.content)||void 0===p?void 0:p.typeSpecific)||void 0===S?void 0:S.fields),mt=(0,rt.KQ)(null===(B=null===(L=this.content)||void 0===L?void 0:L.typeSpecific)||void 0===B?void 0:B.dimensions),D="categorical"===this.colors.type?this.colors.categorical.fieldName:this.colors.fieldName,N=this.data.filter(,Y=N.filter(;let q=this.getSize();if(this.legend.values.overrides.enabled||(q=Math.min(this.getSize(),(0,g.Z)(Y,mt).length)),this.styleValues=this.colorManager.getValues(this.colors,Y,this.valueRange,q,this.legend.values.overrides.enabled),this.showNulls=N.length!==Y.length,this.showOthers=!1,"categorical"===this.colors.type){this.showNulls=!1;const at=this.colors.categorical.values.map(dt=>dt.value);if(this.showOthers=N.filter(.length>0,this.legend.showOnlyOccurrences){const dt=(0,f.Z)(N.map(Mt=>Mt[D]));this.styleValues=this.styleValues.filter(Mt=>dt.includes(Mt))}}0!==Y.length&&(tt.length>0?this.styleValues.forEach((at,dt)=>{let Mt=dt;"categorical"===this.colors.type&&(Mt=this.colors.categorical.values.findIndex(Tt=>Tt.value===at)),this.values.push({override:!!tt[Mt],value:tt[Mt]||at})}):this.values=this.styleValues.map(,this.scale=(0,m.Z)().domain([0,q-1]).range(this.bubbleSizes),this.calcMaxSize(),this.detectChanges())},this.isValidNumber=get alignment(){return"right"===this.options.horizontalAlignment}ngOnInit(){}gOnChanges(n){var s,l,p;if(this.content&&ft.MapWithDataTypes.includes(this.content.type)){if(this.styleService.setContent(this.content),!(null===(s=this.config)||void 0===s)&&s.preRenderData&&(this.preRenderData=this.config.preRenderData),!(null===(l=this.config)||void 0===l)&&l.legendData&&(this.data=this.config.legendData),null!==(p=this.config)&&void 0!==p&&p.range){this.valueRange=this.config.range;const S=JSON.parse(JSON.stringify(this.content.typeSpecific.map.legend.title.format));S.formatType="number",this.legendTitleFormat=S}if(this.valueRange){const S=!(n.forceUpdate&&Object.keys(n).length<2);this.configUpdate(S)}}}get headerValue(){return(0,de.Oq)((0,de.xm)(this.content.typeSpecific,"map.legend.title.value"),this.data,this.content)}get headerStyle(){return{backgroundColor:this.legend.title.background.backgroundColor,backgroundImage:this.legend.title.background.backgroundImage,borderRadius:`${this.legend.title.borderRadius}px`,boxShadow:this.styleService.convertShadow(this.legend.title.shadow)}}get bodyStyle(){const n={backgroundColor:this.legend.values.background.backgroundColor,backgroundImage:this.legend.values.background.backgroundImage,borderRadius:`${this.legend.values.borderRadius}px`,boxShadow:this.styleService.convertShadow(this.legend.values.shadow)};return Object.assign(Object.assign({},this.styleService.convertFontFormat(this.legend.valueStyle,"size","px")),n)}get legend(){return this.content.typeSpecific.map.legend}get colors(){return this.content.typeSpecific.style.colors2}get legendValuesFormatet prefix(){return this.content.typeSpecific.map.legend.values.format.prefix}get suffixet displayType(){return this.content.typeSpecific.map.options.displayType}get noDataStyle(){return Object.assign({background:this.content.typeSpecific.map.options.emptyFeaturesColor},this.active&&"bubbles"!==this.displayType?this.styleService.convertBorder(this.legend.colorBoxes.border):null)}get categoricalDefaultStyle(){return Object.assign({background:this.colors.categorical.fallback},this.active&&"bubbles"!==this.displayType?this.styleService.convertBorder(this.legend.colorBoxes.border):null)}get categoricalColors(){return this.legend.showOnlyOccurrences?this.colors.categorical.values.filter(:this.colors.categorical.values}detectChanges(){this.cdr.destroyed||this.cdr.detectChanges(),this.changes.emit()}getSize(){return"gradient"===this.colors.type?this.colors.gradient.values.length:this.colors.continuous.colors.length}getColors(){const n=this.colorManager.getColors(this.colors);let s=this.values.length;return"quantiles"===this.colors.continuous.scaleType&&s--,h().scale(n).mode("lrgb").colors(s)}toggleLegend(){this.active=!this.active,this.detectChanges(),this.content&&(this.content.localStorage.mapLegendOpen=this.active)}bubblesStyle(n,s){if("function"==typeof this.scale){const l=this.scale(n);return{backgroundColor:s,width:this.active?"1em":null,height:this.active?"1em":null,transform:this.active?`scale(${l})`:null}}return{backgroundColor:s,width:null,height:null,transform:null}}showLines(){return"gradient"===this.legend.type&&"categorical"!==this.colors.type&&"range"!==this.colors.type&&"bubbles"!==this.displayType&&"quantiles"!==this.colors.continuous.scaleType||"range"===this.colors.type&&!this.legend.values.overrides.enabled}showRange(){return"range"===this.colors.type&&!this.legend.values.overrides.enabled}calcMaxSize(){if(this.noValueWrap=void 0,!this.valuesContainer)return void(this.maxNoValueWidth="100%");const n=this.valuesContainer.nativeElement.getBoundingClientRect().width;if(n<80)return this.maxNoValueWidth="6em",void(this.noValueWrap="break-word");this.maxNoValueWidth=`${n}px`,this.detectChanges()}toggleSelf(){this.toggleLegend()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Zt.vr),t.Y36(_.g),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-map-legend"]],viewQuery:function(n,s){if(1&n&&(t.Gf(O,5),t.Gf(C,5),t.Gf(x,5)),2&n){let l;t.iGM(l=t.CRH())&&(s.colorsContainer=l.first),t.iGM(l=t.CRH())&&(s.legendBody=l.first),t.iGM(l=t.CRH())&&(s.valuesContainer=l.first)}},hostVars:6,hostBindings:function(n,s){1&n&&t.NdJ("click",,2&n&&t.ekj("active",s.active)("mobile-view",s.mobileView)("right-view",s.alignment)},inputs:{active:"active",mobileView:"mobileView",config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{changes:"changes"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["class","header flex column",3,"ngStyle",4,"ngIf"],["class","flex column body",3,"ngStyle",4,"ngIf"],["valueRender",""],["colorBox",""],[1,"header","flex","column",3,"ngStyle"],[1,"title",3,"ngStyle"],["class","header-value",3,"ngStyle",4,"ngIf"],[1,"header-value",3,"ngStyle"],[1,"flex","column","body",3,"ngStyle"],[1,"flex"],["legendBody",""],[1,"colors","flex","column-reverse","relative","no-shrink",3,"ngStyle"],["colorsContainer",""],["class","lines flex column space-between",4,"ngIf"],[1,"values","flex","column",3,"ngClass"],["valuesContainer",""],[1,"flex","fullwidth","fullheight","column-reverse","space-between",3,"ngClass"],[4,"ngFor","ngForOf"],["class","flex show-nulls",3,"ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf","ngIfElse"],["colorBoxes",""],[3,"colors"],["gradientBoxes",""],[1,"lines","flex","column","space-between"],[1,"line"],[1,"flex","show-nulls",3,"ngStyle"],[1,"flex","center"],[1,"color",3,"ngStyle"],[1,"item","flex",3,"ngStyle"],[1,"title",2,"min-width","6em"],[1,"flex","item",3,"ngStyle"],[1,"value","flex",3,"ngStyle"],[2,"width","100%"],["class","color-box flex",3,"background","ngStyle",4,"ngIf"],["class","bubble-box flex center",3,"ngClass",4,"ngIf"],[1,"color-box","flex",3,"ngStyle"],[1,"bubble-box","flex","center",3,"ngClass"],[1,"flex",3,"ngStyle"]],template:function(n,s){1&n&&t.YNc(0,Go,7,2,"ng-container",0),2&n&&t.Q6J("ngIf",s.content&&s.mapWithDataTypes.includes(s.content.type)&&s.config.data&&s.config.data.length>0)},dependencies:[J.mk,J.sg,J.O5,J.tP,J.PC,b.l,Be.x],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;cursor:pointer}.active[_nghost-%COMP%]{pointer-events:initial}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]{padding:.5em}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{width:1em}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]:not(.full){margin:.55em 0;min-height:calc(100% - 1.1em);max-height:calc(100% - 1.1em)}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]:not(.full)   .color-box[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]:not(.full).ranged{width:calc(1.25em + 1px)}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]:not(.full).ranged   .color-box[_ngcontent-%COMP%]{height:calc(1.25em + 1px);min-height:calc(1.25em + 1px);max-height:calc(1.25em + 1px)}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{max-height:1em;margin-top:.12em;margin-bottom:.12em}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{line-height:1.25em!important;min-height:1.25em!important}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .show-nulls[_ngcontent-%COMP%]{padding:.5em 0 0;min-height:1.75em}.active[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .show-nulls[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{color:#000;padding:.5em 1em;margin-bottom:10px;background:rgba(255,255,255,.93);border-radius:2px;overflow:hidden;box-shadow:0 2px 12px #00000026;max-width:250px;pointer-events:all;text-align:left}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .header-value[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;font-weight:500;padding-top:.2em}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .header-value[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]{background:rgba(255,255,255,.93);border-radius:2px;box-shadow:0 2px 12px #00000026;align-self:flex-start;overflow:hidden;pointer-events:all}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{width:1em;min-height:100%;max-height:100%;transition:all .23s ease-out;pointer-events:initial;justify-content:space-evenly}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]:not(.full){min-height:100%;max-height:100%}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .color-box[_ngcontent-%COMP%]{width:100%;min-height:1em;flex:1;border-width:0px;transition:all .23s ease-out}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .bubble-box[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .bubble-box.active[_ngcontent-%COMP%]{height:1em}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .bubble-box.active[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .bubble-box[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-radius:0;transition:all .23s ease-out;width:100%;height:100%}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0px;bottom:0px;display:flex}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:calc(100% + .5em);height:1px;background:rgba(0,0,0,.2);opacity:0;transform:translate(-100%);transition:all .23s ease-out}@media (-webkit-max-device-pixel-ratio: .9),(max-resolution: .9dppx){[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:1.1px}}@media (-webkit-max-device-pixel-ratio: .7),(max-resolution: .7dppx){[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:1.2px}}@media (-webkit-max-device-pixel-ratio: .5),(max-resolution: .5dppx){[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:2px}}@media (-webkit-max-device-pixel-ratio: .25),(max-resolution: .25dppx){[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:4px}}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]{transition:all .23s ease-out;opacity:1}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .values[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{min-width:max-content;white-space:nowrap;transition:line-height .23s ease-out;line-height:1em!important;min-height:1em}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .values.hidder[_ngcontent-%COMP%]{visibility:hidden;opacity:0}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .show-nulls[_ngcontent-%COMP%]{overflow:hidden;min-height:10px}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .show-nulls[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:1em;height:10px;border-width:0;border-style:solid;transition:all .23s ease-out}[_nghost-%COMP%]   .body[_ngcontent-%COMP%]   .show-nulls[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:1em!important;font-size:.8em;height:10px}.right-view[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{text-align:right!important}.right-view[_nghost-%COMP%]   .body[_ngcontent-%COMP%]{align-self:flex-end}"],data:{animation:[u,v]}}),o})();k(74226);const Jo=(0,w.X$)("menuAnimation",[(0,w.eR)("void => full",[(0,w.IO)(".fullscreen-wrapper",[(0,w.oB)({transform:"translateY(-100%)"}),(0,w.jt)("0.25s ease-in",(0,w.oB)({transform:"translateY(0%)"}))],{optional:!0})]),(0,w.eR)("full => void",[(0,w.IO)(".fullscreen-wrapper",[(0,w.oB)({transform:"translateY(0%)"}),(0,w.jt)("0.25s ease-out",(0,w.oB)({transform:"translateY(-100%)"}))],{optional:!0})]),(0,w.eR)("void => drawer-left",[(0,w.IO)(".drawer-wrapper",[(0,w.oB)({transform:"translateX(-100%)"}),(0,w.jt)("0.25s ease-in",(0,w.oB)({transform:"translateX(0%)"}))],{optional:!0})]),(0,w.eR)("drawer-left => void",[(0,w.IO)(".drawer-wrapper",[(0,w.oB)({transform:"translateX(0%)"}),(0,w.jt)("0.25s ease-in",(0,w.oB)({transform:"translateX(-100%)"}))],{optional:!0})]),(0,w.eR)("void => drawer-right",[(0,w.IO)(".drawer-wrapper",[(0,w.oB)({transform:"translateX(100%)"}),(0,w.jt)("0.25s ease-in",(0,w.oB)({transform:"translateX(0%)"}))],{optional:!0})]),(0,w.eR)("drawer-right => void",[(0,w.IO)(".drawer-wrapper",[(0,w.oB)({transform:"translateX(0%)"}),(0,w.jt)("0.25s ease-in",(0,w.oB)({transform:"translateX(100%)"}))],{optional:!0})])]),Zo=(0,w.X$)("swiperAnimation",[(0,w.eR)(":enter",[(0,w.oB)({transform:"translateY(100%)",opacity:0}),(0,w.jt)(".3s ease-out",(0,w.oB)({transform:"translateY(0%)",opacity:1}))])]);var jo=k(41708),Wo=k(97697);const qo=["swiperMenu"];function Xo(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"pagination-menu",2),t.NdJ("currentPageChange",("onItemClick",function(l){t.CHM(n);const p=t.oxw(3);return t.KtG(p.childClick(l))}),t.qZA()}if(2&o){const n=t.oxw(3);t.Q6J("@menuAnimation",n.animationState)("content",n.content)("options",n.options)("items",n.children)("currentPage",n.currentPage)}}unction ts(o,d){1&o&&t.GkF(0)}function es(o,d){if(1&o&&(t.ynx(0),t.YNc(1,Ko,2,1,"ng-container",0),t.YNc(2,ts,1,0,"ng-container",0),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf","full"===n.options.type||"drawer"===n.options.type),t.xp6(1),t.Q6J("ngIf",n.children.length&&"swiper"===n.options.type)}}let ns=(()=>{class o extends kt.K{constructor(n,s,l){super(),this.messageBus=n,this.styleService=s,this.trackerService=l,this.currentPage=1,this.menuEvent=new t.vpe,this.children=[],this.activeChild={},this.menuIndex=0,this.pagination={el:".swiper-pagination",type:"progressbar"},this.swiperMenuConfig={loop:!1,direction:"horizontal",slidesPerView:"auto",spaceBetween:10,keyboard:!0,mousewheel:!0,scrollbar:!1,navigation:!0,pagination:this.pagination,centeredSlides:!0,threshold:25},this.updateSwiper=p=>{this.swiperMenu&&this.swiperMenu.directiveRef.instance.update()},this.childClick=p=>{const{idx:S,stayOpen:L}=p;this.trackerService.postClickAction(`atlas_idx_${S}`,this.content?this.content.slug:"unknown"),this.menuIndex=S,this.menuEvent.emit({type:"atlas-idx",idx:S,stayOpen:!!L})},this.cleanImageSlug=get swiperStyle(){return{height:this.options.size.value+this.options.size.unit,position:"overlay"===this.options.overlayType?"absolute":"static",width:"overlay"===this.options.overlayType?"100%":"initial",boxShadow:this.styleService.convertShadow(this.options.style.boxShadow)}}get animationState(){return this.options.type+("drawer"===this.options.type?`-${this.options.position}`:"")}ngOnInit(){this.config.menuOpen=this.options.startOpen,this.messageBus.on(W.K7.ContentUpdate,W.BV.Atlas,this.updateSwiper,this.componentDestroyed$)}ngOnChanges(n){var s,l;this.content&&this.styleService.setContent(this.content),!(null===(s=this.content)||void 0===s)&&s.typeSpecific.atlas&&(this.children=this.content.typeSpecific.atlas.children),null!==(l=this.content)&&void 0!==l&&l.typeSpecific.dash&&(this.children=this.content.typeSpecific.dash.children)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Dt.Y),t.Y36(Zt.vr),t.Y36(Me.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-menu"]],viewQuery:function(n,s){if(1&n&&t.Gf(qo,5),2&n){let l;t.iGM(l=t.CRH())&&(s.swiperMenu=l.first)}},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{menuEvent:"menuEvent"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[3,"content","options","items","currentPage","currentPageChange","onItemClick",4,"ngIf"],[3,"content","options","items","currentPage","currentPageChange","onItemClick"]],template:function(n,s){1&n&&t.YNc(0,es,3,2,"ng-container",0),2&n&&t.Q6J("ngIf",s.content)},dependencies:[J.O5,Wo.P],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;max-width:100%}[_nghost-%COMP%]   .swiper-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;max-width:100%;margin:initial}[_nghost-%COMP%]   .swiper-container[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .swiper-container[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{position:absolute;object-fit:cover;width:100%;height:100%}[_nghost-%COMP%]   .swiper-container[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{z-index:5;width:calc(100% - 10px);min-height:30px;background-color:#00000080;padding:5px;bottom:0;position:absolute}"],data:{animation:[Jo,Zo]}}),o})();var is=k(44527);const os=["navContainer"];function ss(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(l){const p=t.CHM(n),S=p.index,L=p.$implicit,B=t.oxw();return t.KtG(B.navClick({idx:S,child:L,event:l}))})("mouseenter",function(){const p=t.CHM(n).index,S=t.oxw();return t.KtG(S.hoverNav[p]=!0)})("mouseleave",function(){const p=t.CHM(n).index,S=t.oxw();return t.KtG(S.hoverNav[p]=!1)}),t._uU(1),t.qZA()}if(2&o){const n=d.$implicit,s=d.index,l=t.oxw();t.Q6J("ngStyle",l.getNavStyle(s)),t.xp6(1),t.hij(" ",n.fileName," ")}}let as=(()=>{class o extends Ot.Y{constructor(n,s){super(),this.cdr=n,this.styleService=s,this.navEvent=new t.vpe,this.children=[],this.hoverNav=[],this.activeChildIdx=0,this.isNavClicked=!1,this.isNavMoved=!1,this.scrollStart=0,this.scrollLeft=0,this.navClick=l=>{var p,S,L,B;const{idx:X,event:Ct}=l;if(this.isNavMoved)return void Ct.preventDefault();this.activeChildIdx=X;const mt=null===(S=null===(p=this.navContainer)||void 0===p?void 0:p.nativeElement)||void 0===S?void 0:S.children[this.activeChildIdx],D=null===(B=null===(L=this.navContainer)||void 0===L?void 0:L.nativeElement)||void 0===B?void 0:B.parentElement;if(mt&&D){const Y=Math.floor((D.scrollWidth-D.clientWidth)/(this.children.length-1)*this.activeChildIdx);D.scrollTo({left:Y,behavior:"smooth"})}this.navEvent.emit({type:"atlas-idx",idx:X,stayOpen:!1})},this.navStart=l=>{var p;this.isNavClicked=!0,this.isNavMoved=!1,null!==(p=this.navContainer)&&void 0!==p&&p.nativeElement&&(this.navContainer.nativeElement.classList.add("active"),this.scrollStart=l.pageX||l.touches[0].pageX-this.navContainer.nativeElement.parentElement.offsetLeft,this.scrollLeft=this.navContainer.nativeElement.parentElement.scrollLeft)},this.navMove=l=>{var p;this.isNavClicked&&null!==(p=this.navContainer)&&void 0!==p&&p.nativeElement&&(l.preventDefault(),this.isNavMoved=!0,this.navContainer.nativeElement.parentElement.scrollLeft=this.scrollLeft-((l.pageX||l.touches[0].pageX-this.navContainer.nativeElement.parentElement.offsetLeft)-this.scrollStart))},this.navWheel=l=>{var p;null===(p=this.navContainer)||void 0===p||!p.nativeElement||(l.preventDefault(),this.navContainer.nativeElement.parentElement.scrollLeft+=l.deltaY)},this.navEnd=l=>{var p;this.isNavClicked=!1,null!==(p=this.navContainer)&&void 0!==p&&p.nativeElement&&this.navContainer.nativeElement.classList.remove("active")},this.getNavContainerStyle=()=>{const{overflow:l,useGrid:p,gridGap:S}=this.options,L={display:p?"grid":"flex",flexShrink:l?0:1};return p?(L.gridGap=`${S}px`,L.gridAutoFlow="column"):L.flexDirection="row",L},this.getNavStyle=l=>{const{useGrid:S,gridGap:L}=this.options;let B=Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.options.font)),this.options.background),{borderRadius:this.options.borderRadius+"px",boxShadow:this.styleService.convertShadow(this.options.boxShadow)});this.activeChildIdx===l&&(B=Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.options.activeFont)),this.options.activeBackground),{borderRadius:this.options.borderRadius+"px",boxShadow:this.styleService.convertShadow(this.options.activeBoxShadow)})),this.hoverNav[l]&&(B=Object.assign(Object.assign(Object.assign({},this.styleService.convertFontFormat(this.options.hoverFont)),this.options.hoverBackground),{borderRadius:this.options.borderRadius+"px",boxShadow:this.styleService.convertShadow(this.options.hoverBoxShadow)})),S&&Math.ceil(L/2);const{padding:X,margin:tt}=B;return B.maxHeight=`calc(1em + ${X.top}${X.topUnit} + ${X.bottom}${X.bottomUnit} + ${tt.top}${tt.topUnit} + ${tt.bottom}${tt.bottomUnit})`,B},this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()}}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus();const{nativeElement:n}=this.navContainer;n.addEventListener("mousedown",this.navStart),n.addEventListener("touchstart",this.navStart),n.addEventListener("mousemove",this.navMove),n.addEventListener("touchmove",this.navMove),n.addEventListener("wheel",this.navWheel),n.addEventListener("mouseleave",this.navEnd),n.addEventListener("mouseup",this.navEnd),n.addEventListener("touchend",this.navEnd)}ngOnChanges(n){var s,l,p,S;if(this.content&&this.content.typeSpecific.atlas){this.styleService.setContent(this.content),this.children=this.content.typeSpecific.atlas.children,this.hoverNav=this.children.map(()=>!1),this.activeChildIdx=this.children.findIndex(;const L=null===(l=null===(s=this.navContainer)||void 0===s?void 0:s.nativeElement)||void 0===l?void 0:l.children[this.activeChildIdx],B=null===(S=null===(p=this.navContainer)||void 0===p?void 0:p.nativeElement)||void 0===S?void 0:S.parentElement;if(L&&B){const tt=Math.floor((B.scrollWidth-B.clientWidth)/(this.children.length-1)*this.activeChildIdx);B.scrollTo({left:tt,behavior:"smooth"})}}}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(is.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-navigation"]],viewQuery:function(n,s){if(1&n&&t.Gf(os,5),2&n){let l;t.iGM(l=t.CRH())&&(s.navContainer=l.first)}},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{navEvent:"navEvent"},features:[t.qOj,t.TTD],decls:3,vars:2,consts:[[1,"nav-container",3,"ngStyle"],["navContainer",""],["class","nav-button",3,"ngStyle","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"nav-button",3,"ngStyle","click","mouseenter","mouseleave"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0,1),t.YNc(2,ss,2,2,"div",2),t.qZA()),2&n&&(t.Q6J("ngStyle",s.getNavContainerStyle()),t.xp6(2),t.Q6J("ngForOf",s.children))},dependencies:[J.sg,J.PC],styles:["[_nghost-%COMP%]{display:flex;overflow-x:auto;position:relative}[_nghost-%COMP%]   .nav-container[_ngcontent-%COMP%]{cursor:grab}[_nghost-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center;white-space:nowrap}[_nghost-%COMP%]   .nav-container.active[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{cursor:grabbing}"]}),o})();var rs=k(11547),ls=k(81212);function cs(o,d){if(1&o&&t._UZ(0,"div",7),2&o){const n=t.oxw(2);t.Q6J("ngStyle",n.styleService.convertFontFormat(n.content.typeSpecific.style.description))("content",n.content)("deltaContent",n.content.description)("item",n.config.data[0])}}function ds(o,d){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,cs,1,4,"div",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.isOpen=!1)}),t._UZ(6,"i",6),t.qZA()()(),t.BQk()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngStyle",n.content.typeSpecific.style.descriptionBackground),t.xp6(2),t.Q6J("ngIf",n.content&&n.content.description&&n.content.typeSpecific.style.description.enabled&&n.config.data)}}let us=(()=>{class o extends kt.K{constructor(n,s,l,p,S,L){super(),this.styleService=n,this.messageBus=s,this.exportManager=l,this.dataManager=p,this.cdr=S,this.trackerService=L,this.isOpen=!1,this.csvAvailable=!1,this.pngAvailable=!1,this.svgAvailable=!1,this.embedAvailable=!1,this.renderData=[],this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()},this.receiveLayoutEvent=B=>{const{action:tt}=B;if("overlay"===tt){if("dash"===this.content.type)return;console.log("[OverlayReceived] - Layout Event"),!this.isOpen&&tt&&this.trackerService.postClickAction(`button_${tt}`,this.content.slug),this.isOpen=!this.isOpen,this.safeDetectChanges()}},this.receiveDownloadEvent=B=>{const{type:X}=B;"png"===X&&this.downloadPNG()},this.downloadCSV=()=>{this.config.data&&this.exportManager.downloadCSV({content:this.content,data:this.config.data})},this.downloadPNG=()=>(0,Wt.mG)(this,void 0,void 0,function*(){this.isOpen=!1,this.safeDetectChanges(),this.exportManager.downloadPNG({content:this.content})}),this.copyEmbedCode=()=>{this.exportManager.copyEmbedCode({content:this.content})},this.copyDirectLink=()=>{this.exportManager.copyDirectLink({content:this.content})}}ngOnInit(){this.messageBus.emit("UPDATE_ACTION",["CHART"],{enabled:!0,action:{value:"overlay",label:"Overlay"}}),this.messageBus.on("LAYOUT_EVENT","CHART",this.receiveLayoutEvent,this.componentDestroyed$,this.config.referenceID),this.messageBus.on("DOWNLOAD_EVENT","ALL",this.receiveDownloadEvent,this.componentDestroyed$,this.config.referenceID)}ngOnChanges(n){this.content&&(this.csvAvailable=!0,this.pngAvailable=!0,this.svgAvailable=!1,this.embedAvailable=void 0!==this.content.created_at)}ngOnDestroy(){this.messageBus.emit("UPDATE_ACTION",["CHART"],{enabled:!1,action:{value:"overlay",label:"Overlay"}},this.config.referenceID),super.ngOnDestroy()}onKeyDown(n){"Escape"===n.key&&this.isOpen&&(this.isOpen=!1)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Zt.vr),t.Y36(Dt.Y),t.Y36(rs.l),t.Y36(ls.h),t.Y36(t.sBO),t.Y36(Me.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-overlay"]],hostBindings:function(n,s){1&n&&t.NdJ("keydown",function(p){return s.onKeyDown(p)},!1,t.Jf7)},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex","row","layout-overlay",3,"ngStyle"],[1,"layout-description"],["style","word-break: break-word;",3,"ngStyle","content","deltaContent","item",4,"ngIf"],[1,"flex","column","layout-export"],["title","Close",1,"export-button","clickable",2,"margin-top","auto",3,"click"],[1,"icon","icon-cancel-1"],[2,"word-break","break-word",3,"ngStyle","content","deltaContent","item"]],template:dependencies:[J.O5,J.PC,ie._],styles:["[_nghost-%COMP%]{display:flex;position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:6}[_nghost-%COMP%]   .layout-overlay[_ngcontent-%COMP%]{flex-grow:1;pointer-events:all;background-repeat:no-repeat;background-size:cover;background-position:center center}[_nghost-%COMP%]   .layout-overlay[_ngcontent-%COMP%]   .layout-description[_ngcontent-%COMP%]{flex-grow:1;padding:1em;max-width:calc(100% - 2em - 75px);overflow-y:auto}[_nghost-%COMP%]   .layout-overlay[_ngcontent-%COMP%]   .layout-export[_ngcontent-%COMP%]{width:75px;padding:10px 0;align-items:center}[_nghost-%COMP%]   .layout-overlay[_ngcontent-%COMP%]   .layout-export[_ngcontent-%COMP%]   .export-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;margin:10px;border-radius:40px;background:#ffffff;box-shadow:0 0 5px #00000080}[_nghost-%COMP%]   .layout-overlay[_ngcontent-%COMP%]   .layout-export[_ngcontent-%COMP%]   .export-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #000000bf}"]}),o})();const Io=function(o,d){return{backgroundColor:o,color:d}};function ps(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"list-selector",2),t.NdJ("ngModelChange",,t.qZA()}if(2&o){const n=t.oxw(2);t.Q6J("minLineHeight",!1)("showSearch",!0)("alwaysOpen",!1)("showBoxshadowOnResults",!0)("showBackgroundOnResults",!0)("showBorderRadiusOnResults",!0)("minLineHeightOnItems",!0)("ngModel",n.searchResult)("items",n.config.data)("placeholder",n.content.typeSpecific.map.search.placeholder)("labelField",n.getSearchField())("valueField",n.getIsoField())("referenceID",n.content.localStorage.referenceID)("backgroundStyle",n.content.typeSpecific.map.search.style.container.background)("borderRadius",n.content.typeSpecific.map.search.style.container.borderRadius)("boxShadow",n.styleService.convertShadow(n.content.typeSpecific.map.search.style.container.boxShadow))("itemFont",n.styleService.convertFontFormat(n.content.typeSpecific.map.search.style.items.font))("itemInactiveOpacity",n.content.typeSpecific.map.search.style.items.inactive.opacity)("itemMouseOver",t.WLB(22,Io,n.content.typeSpecific.map.search.style.items.mouseOver.background.backgroundColor,n.content.typeSpecific.map.search.style.items.mouseOver.color))("itemActive",t.WLB(25,Io,n.content.typeSpecific.map.search.style.items.active.background.backgroundColor,n.content.typeSpecific.map.search.style.items.active.color))("autoSort",n.content.typeSpecific.map.search.style.items.ordering.enabled)("sortDesc",n.content.typeSpecific.map.search.style.items.ordering.desc)}}et fs=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.styleService=n,this.messageBus=s,this.cdr=l,this.searchEvent=new t.vpe,this.mapWithDataTypes=ft.MapWithDataTypes,this.detectChanges=()=>{this.cdr.detectChanges()},this.getIsoField=()=>{var p;return(0,rt.BT)(null===(p=this.content.typeSpecific)||void 0===p?void 0:p.fields)},this.getSearchField=()=>{var p,S;return this.content.typeSpecific.map.search&&this.content.typeSpecific.map.search.fieldName&&"default"!==this.content.typeSpecific.map.search.fieldName?this.content.typeSpecific.map.search.fieldName:(0,rt.kE)(this.content.type,null===(S=null===(p=this.content)||void 0===p?void 0:p.typeSpecific)||void 0===S?void 0:S.dimensions)}}get displaySearch(){return this.content&&ft.MapWithDataTypes.includes(this.content.type)&&this.content.typeSpecific.map.options.enableSearch&&this.config.data&&this.config.data.length>0?null:"none"}ngOnInit(){this.messageBus.on(W.cT.ContentUpdate,W.BV.LayoutSearch,this.detectChanges,this.componentDestroyed$)}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){this.content&&this.styleService.setContent(this.content)}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Zt.vr),t.Y36(Dt.Y),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-search"]],hostVars:2,hostBindings:function(n,s){2&n&&t.Udp("display",s.displaySearch)},inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{searchEvent:"searchEvent"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[3,"minLineHeight","showSearch","alwaysOpen","showBoxshadowOnResults","showBackgroundOnResults","showBorderRadiusOnResults","minLineHeightOnItems","ngModel","items","placeholder","labelField","valueField","referenceID","backgroundStyle","borderRadius","boxShadow","itemFont","itemInactiveOpacity","itemMouseOver","itemActive","autoSort","sortDesc","ngModelChange",4,"ngIf"],[3,"minLineHeight","showSearch","alwaysOpen","showBoxshadowOnResults","showBackgroundOnResults","showBorderRadiusOnResults","minLineHeightOnItems","ngModel","items","placeholder","labelField","valueField","referenceID","backgroundStyle","borderRadius","boxShadow","itemFont","itemInactiveOpacity","itemMouseOver","itemActive","autoSort","sortDesc","ngModelChange"]],template:function(n,s){1&n&&t.YNc(0,hs,2,1,"ng-container",0),2&n&&t.Q6J("ngIf",s.content&&s.mapWithDataTypes.includes(s.content.type)&&s.content.typeSpecific.map.options.enableSearch&&s.config.data&&s.config.data.length>0)},dependencies:[J.O5,Ht.JJ,Ht.On,Cn.p]}),o})();var gs=k(51514);function ms(o,d){if(1&o&&t._UZ(0,"div",4),2&o){const n=t.oxw(2);t.Q6J("content",n.content)("ngStyle",n.styleService.convertFontFormat(n.content.typeSpecific.style.source.font))("deltaContent",n.content.typeSpecific.data.publisher.name)("forceUpdate",n.forceUpdate)}}const vs=function(){return{length:64}},_s=function(o){return{truncate:o}};function ys(o,d){if(1&o&&(t._UZ(0,"div",5),t.ALo(1,"linkify")),2&o){const n=t.oxw(2);t.Q6J("ngStyle",n.styleService.convertFontFormat(n.content.typeSpecific.style.source.font))("innerHtml",t.xi3(1,2,n.content.typeSpecific.data.publisher.license,t.VKq(6,_s,t.DdM(5,vs))),t.oJD)}}const Cs=function(o){return[o]};function xs(o,d){if(1&o&&(t.TgZ(0,"div",1),t.YNc(1,ms,1,4,"div",2),t.YNc(2,ys,2,8,"div",3),t.qZA()),2&o){const n=t.oxw();t.Q6J("ngClass",t.VKq(3,Cs,n.content.typeSpecific.style.source.font.position)),t.xp6(1),t.Q6J("ngIf",n.hasText()),t.xp6(1),t.Q6J("ngIf",n.content.typeSpecific&&n.content.typeSpecific.data&&n.content.typeSpecific.data.publisher.license)}}let bs=(()=>{class o extends Ot.Y{constructor(n,s){super(),this.styleService=n,this.quillRendererService=s,this.hasText=()=>{var l,p,S,L;return!(null===(p=null===(l=this.content.typeSpecific.data)||void 0===l?void 0:l.publisher)||void 0===p||!p.name)&&this.quillRendererService.deltaToString(null===(L=null===(S=this.content.typeSpecific.data)||void 0===S?void 0:S.publisher)||void 0===L?void 0:L.name).length>1}}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){this.content&&this.styleService.setContent(this.content)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Zt.vr),t.Y36(Te.u))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-source"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["class","text-container",3,"ngClass",4,"ngIf"],[1,"text-container",3,"ngClass"],["class","publisher",3,"content","ngStyle","deltaContent","forceUpdate",4,"ngIf"],["class","license",3,"ngStyle","innerHtml",4,"ngIf"],[1,"publisher",3,"content","ngStyle","deltaContent","forceUpdate"],[1,"license",3,"ngStyle","innerHtml"]],template:function(n,s){1&n&&t.YNc(0,xs,3,5,"div",0),2&n&&t.Q6J("ngIf",s.content)},dependencies:[J.mk,J.O5,J.PC,ie._,gs.K],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .text-container.auto[_ngcontent-%COMP%]{flex:initial}[_nghost-%COMP%]   .publisher[_ngcontent-%COMP%]     a, [_nghost-%COMP%]   .license[_ngcontent-%COMP%]     a{color:inherit!important}"]}),o})();const Ss=function(o){return[o]};function Ms(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.setFocusSubTitle())}),t._UZ(1,"div",2),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("ngClass",t.VKq(8,Ss,n.content.typeSpecific.style.subTitle.position)),t.xp6(1),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.content.typeSpecific.style.subTitle))("content",n.content)("deltaContent",n.content.subTitle)("forceUpdate",n.forceUpdate)("renderData",n.config.data)("preFilterData",n.config.preFilterData)("item",n.config.data?n.config.data[0]:null)}}let Os=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.messageBus=n,this.styleService=s,this.quillRendererService=l,this.nrwWahlUser=["5cde95f49925e8001fca9891","5cde95202133aa0022d2ec05","5cde95af660572001e8c60eb","5ce43ee25e95b9001f974a92","5ce43e803ffa23001db30e41","5cde94d7660572001e8c60e4","5cde95662133aa0022d2ec0c"],this.hasText=()=>!!this.content.subTitle&&this.quillRendererService.deltaToString(this.content.subTitle).length>1}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){if(this.content){if(this.content&&this.contentSelectorOptions&&this.contentSelectorOptions.public&&this.nrwWahlUser.includes(this.content._id)&&"report"!==this.content.type&&"atlas"!==this.content.type&&"dataset"!==this.content.type&&(this.content.subTitle||(this.content.subTitle=""),!this.content.subTitle.includes("Letzte Aktualisierung am "))){const S=new Date(this.content.updated_at).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"});this.content.subTitle=this.content.subTitle+"Letzte Aktualisierung am "+S}this.styleService.setContent(this.content)}}setFocusSubTitle(){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Dt.Y),t.Y36(Zt.vr),t.Y36(Te.u))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-subtitle"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate",contentSelectorOptions:"contentSelectorOptions"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["class","auto",3,"ngClass","click",4,"ngIf"],[1,"auto",3,"ngClass","click"],[3,"ngStyle","content","deltaContent","forceUpdate","renderData","preFilterData","item"]],template:function(n,s){1&n&&t.YNc(0,Ms,2,10,"div",0),2&n&&t.Q6J("ngIf",s.hasText()&&s.content.typeSpecific.style.subTitle.enabled)},dependencies:[J.mk,J.O5,J.PC,ie._],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{max-width:100%}"]}),o})();var Ts=k(4211);let Ps=(()=>{class o extends Ot.Y{constructor(n,s){super(),this.messageBus=n,this.cdr=s,this.tableEvent=new t.vpe,this.loadedView=!1,this.tableStyle={},this.busLoaded=!1,this.safeDetectChanges=()=>{this.cdr.destroyed||this.cdr.detectChanges()}}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){this.busLoaded||(this.busLoaded=!0),this.contentTableRef&&this.update(n)}etComponent(n){this.contentTableRef=n,this.update()}update(n){!this.contentTableRef||(this.contentTableRef.instance.config=this.config,this.contentTableRef.instance.content=this.content,this.contentTableRef.instance.options=this.options,this.contentTableRef.instance.forceUpdate=this.forceUpdate,this.contentTableRef.instance.ngOnChanges(n))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Dt.Y),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-table"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{tableEvent:"tableEvent"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[3,"lazyLoad","getComponent"]],template:function(n,s){1&n&&(t.ynx(0,0),t.NdJ("getComponent",function(p){return s.setComponent(p)}),t.BQk()),2&n&&t.Q6J("lazyLoad","contentTable")},dependencies:[Ts.Jv],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .no-data[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;justify-content:center;align-items:center}"],changeDetection:0}),o})();const ws=function Es(o,d){if(1&o&&(t.TgZ(0,"div",1),t._UZ(1,"div",2),t.qZA()),2&o){const n=t.oxw();t.Q6J("ngClass",t.VKq(8,ws,n.content.typeSpecific.style.title.position)),t.xp6(1),t.Q6J("ngStyle",n.styleService.convertFontFormat(n.content.typeSpecific.style.title))("content",n.content)("deltaContent",n.content.name)("forceUpdate",n.forceUpdate)("renderData",n.config.data)("preFilterData",n.config.preFilterData)("item",n.config.data?n.config.data[0]:null)}}let As=(()=>{class o extends Ot.Y{constructor(n,s,l){super(),this.messageBus=n,this.styleService=s,this.quillRendererService=l,this.hasText=()=>!!this.content.name&&this.quillRendererService.deltaToString(this.content.name).length>1}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChangesetFocusTitle(){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Dt.Y),t.Y36(Zt.vr),t.Y36(Te.u))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-title"]],inputs:{config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["class","auto",3,"ngClass",4,"ngIf"],[1,"auto",3,"ngClass"],[3,"ngStyle","content","deltaContent","forceUpdate","renderData","preFilterData","item"]],template:function(n,s){1&n&&t.YNc(0,Es,2,10,"div",0),2&n&&t.Q6J("ngIf",s.hasText()&&s.content.typeSpecific.style.title.enabled)},dependencies:[J.mk,J.O5,J.PC,ie._],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{max-width:100%}"]}),o})();var to=k(2020);const Ls=(0,w.X$)("toggleSize",[(0,w.eR)("false => true",[(0,w.oB)({height:"*",width:"*"}),(0,w.jt)("0.5s cubic-bezier(0.19, 1, 0.22, 1)")]),(0,w.eR)("true => false",[(0,w.oB)({height:"1em",width:"1em"}),(0,w.jt)("0.5s cubic-bezier(0.19, 1, 0.22, 1)",(0,w.oB)({height:"*",width:"*"}))]),(0,w.SB)("true",(0,w.oB)({height:"1em",width:"1em"}))]);var ks=k(59123);const $s=["colorsContainer"],Is=["legendBody"],Bs=["valuesContainer"];function zs(o,d){1&o&&t.GkF(0)}const fn=function Ds(o,d){if(1&o&&(t.ynx(0),t.YNc(1,zs,1,0,"ng-container",14),t.BQk()),2&o){const n=t.oxw(2).$implicit;t.oxw(2);const s=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.l5B(2,fn,n.items[0],n.entries[0],n.label,n.format))}}function Fs(o,d){1&o&&t.GkF(0)}function Rs(o,d){if(1&o&&(t.ynx(0),t.YNc(1,Fs,1,0,"ng-container",14),t.BQk()),2&o){const n=t.oxw(2).$implicit;t.oxw(2);const s=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.l5B(2,fn,n.items[n.entries.length-1],n.entries[n.entries.length-1],n.label,n.format))}}function Ns(o,d){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,Ds,2,7,"ng-container",13),t.YNc(2,Rs,2,7,"ng-container",13),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!n.direction.includes("reverse")),t.xp6(1),t.Q6J("ngIf",n.direction.includes("reverse"))}}function Ys(o,d){if(1&o&&t._UZ(0,"img",21),2&o){const n=t.oxw().$implicit,s=t.oxw(2).$implicit,l=t.oxw(2);let p,S,L;t.Q6J("tintImage",null!==(p=n.image)&&void 0!==p?p:s.images.data)("color",null!==(S=n.color)&&void 0!==S?S:s.colors.data)("size",l.makeEqualSized((null!==(L=n.size)&&void 0!==L?L:s.size.data)*l.sizeFactor))("outlined",s.imagesOutlined)}}function Vs(o,d){if(1&o&&t._UZ(0,"div"),2&o){const n=t.oxw(2).$implicit,s=t.oxw(2).$implicit,l=t.oxw(2);let p,S,L;t.Udp("width",l.makeEqualSized((null!==(p=n.size)&&void 0!==p?p:s.size.data)*l.sizeFactor),"px")("height",l.makeEqualSized((null!==(S=n.size)&&void 0!==S?S:s.size.data)*l.sizeFactor),"px")("background-color",null!==(L=n.color)&&void 0!==L?L:s.colors.data)("border-radius",s.form.borderRadius,"px")}}function Hs(o,d){if(1&o&&t._UZ(0,"div",24),2&o){const n=t.oxw(2).$implicit,s=t.oxw(2).$implicit,l=t.oxw(2);let p,S;t.Udp("width",l.makeEqualSized((null!==(p=n.size)&&void 0!==p?p:s.size.data)*l.sizeFactor),"px")("color",null!==(S=n.color)&&void 0!==S?S:s.colors.data)("border-bottom-width",s.form.lineWidth,"px")("border-style",s.form.lineType)}}function Us(o,d){if(1&o&&(t.ynx(0),t.YNc(1,Vs,1,8,"div",22),t.YNc(2,Hs,1,8,"div",23),t.BQk()),2&o){const n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf","square"===n.form.type||!n.form),t.xp6(1),t.Q6J("ngIf","line"===n.form.type)}}function Gs(o,d){1&o&&t.GkF(0)}function Qs(o,d){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,Gs,1,0,"ng-container",14),t.qZA()),2&o){const n=t.oxw(),s=n.index,l=n.$implicit,p=t.oxw(2).$implicit;t.oxw(2);const S=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",t.l5B(2,fn,p.items[s],l,p.label,p.format))}}const Js=function(o){return{left:"50%",transform:"translateX(-50%)",bottom:"0","z-index":o}},Zs=function js(o,d){if(1&o&&(t.TgZ(0,"div",17)(1,"div",18),t.YNc(2,Ys,1,4,"img",19),t.YNc(3,Us,3,2,"ng-container",13),t.qZA(),t.YNc(4,Qs,2,7,"div",20),t.qZA()),2&o){const n=d.$implicit,s=d.index,l=d.last,p=t.oxw(2).$implicit,S=t.oxw(2);t.Udp("gap",p.contentGap*S.sizeFactor,"px"),t.ekj("items-center","absolute"!==p.iconMode)("items-end","absolute"===p.iconMode)("w-full","absolute"===p.iconMode&&!l)("w-height","absolute"===p.iconMode&&!l)("absolute","absolute"===p.iconMode&&!l),t.Q6J("ngClass",p.contentDirection)("ngStyle","absolute"!==p.iconMode||l?null:t.VKq(22,Js,100-s)),t.xp6(1),t.Udp("width",S.hasLabels(p.entries)&&"absolute"!==p.iconMode?S.getHighestScale(p.entries,p.size.data):null,"px")("height",S.hasLabels(p.entries)&&"absolute"!==p.iconMode?S.getHighestScale(p.entries,p.size.data):null,"px"),t.Q6J("ngStyle",S.hasLabels(p.entries)&&"absolute"!==p.iconMode?t.DdM(24,Zs):null),t.xp6(1),t.Q6J("ngIf",((null==n?null:n.image)||p.images.data)&&"image"===p.iconType),t.xp6(1),t.Q6J("ngIf","colors"===p.iconType),t.xp6(1),t.Q6J("ngIf","absolute"!==p.iconMode&&"wrapped"!==p.labelMode)}}function Ws(o,d){if(1&o&&(t.TgZ(0,"div",15),t.YNc(1,js,5,25,"div",16),t.qZA()),2&o){const n=t.oxw().$implicit,s=t.oxw(2);t.Udp("gap","absolute"!==n.iconMode?n.itemsGap*s.sizeFactor:null,"px"),t.Q6J("ngClass",n.direction),t.xp6(1),t.Q6J("ngForOf",n.entries)("ngForTrackBy",s.trackEntries)}}function qs(o,d){if(1&o&&(t.TgZ(0,"div",28),t._UZ(1,"div",29),t.TgZ(2,"div",30),t._uU(3),t.ALo(4,"number"),t.qZA()()),2&o){const n=d.$implicit,s=t.oxw(2).$implicit,l=t.oxw(2);t.xp6(1),t.Udp("bottom",l.makeEqualSized(n.size*l.sizeFactor-1),"px")("width",l.getHighestScale(s.entries,s.size.data)/2,"px"),t.xp6(1),t.Udp("left",s.contentGap,"px")("bottom",l.makeEqualSized(n.size*l.sizeFactor-1),"px"),t.xp6(1),t.hij(" ",t.xi3(4,9,n.label,"1.0-2")," ")}}function Xs(o,d){if(1&o&&(t.TgZ(0,"div",26),t.YNc(1,qs,5,12,"div",27),t.qZA()),2&o){const n=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.entries)("ngForTrackBy",s.trackEntries)}}function Ks(o,d){1&o&&t.GkF(0)}function ta(o,d){if(1&o&&(t.TgZ(0,"div",35),t.YNc(1,Ks,1,0,"ng-container",14),t.qZA()),2&o){const n=d.$implicit,s=d.index,l=t.oxw(3).$implicit;t.oxw(2);const p=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",t.l5B(2,fn,l.items[s],n,l.label,l.format))}}function ea(o,d){if(1&o&&(t.TgZ(0,"div",33),t.YNc(1,ta,2,7,"div",34),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.Q6J("ngClass",n.direction),t.xp6(1),t.Q6J("ngForOf",n.entries)}}function na(o,d){if(1&o&&(t.TgZ(0,"div",31)(1,"div",12),t._UZ(2,"div"),t.qZA(),t.YNc(3,ea,2,2,"div",32),t.qZA()),2&o){const n=t.oxw().$implicit,s=t.oxw(2);t.Udp("gap",n.contentGap*s.sizeFactor,"px"),t.ekj("flex-col",n.direction.includes("row")),t.xp6(2),t.Udp("background",s.gradientStyle(n))("width",n.direction.includes("row")?s.getHighestScale(n.entries,n.size.data)*n.length:s.getHighestScale(n.entries,n.size.data),"px")("height",n.direction.includes("row")?s.getHighestScale(n.entries,n.size.data):s.getHighestScale(n.entries,n.size.data)*n.length,"px"),t.xp6(1),t.Q6J("ngIf","wrapped"!==n.labelMode)}}function ia(o,d){1&o&&t.GkF(0)}function oa(o,d){if(1&o&&(t.ynx(0),t.YNc(1,ia,1,0,"ng-container",14),t.BQk()),2&o){const n=t.oxw(2).$implicit;t.oxw(2);const s=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.l5B(2,fn,n.items[0],n.entries[0],n.label,n.format))}}function sa(o,d){1&o&&t.GkF(0)}function aa(o,d){if(1&o&&(t.ynx(0),t.YNc(1,sa,1,0,"ng-container",14),t.BQk()),2&o){const n=t.oxw(2).$implicit;t.oxw(2);const s=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.l5B(2,fn,n.items[n.entries.length-1],n.entries[n.entries.length-1],n.label,n.format))}}function ra(o,d){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,oa,2,7,"ng-container",13),t.YNc(2,aa,2,7,"ng-container",13),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.direction.includes("reverse")),t.xp6(1),t.Q6J("ngIf",!n.direction.includes("reverse"))}}function la(o,d){if(1&o&&(t.TgZ(0,"div",7),t.YNc(1,Ns,3,2,"div",8),t.YNc(2,Ws,2,5,"div",9),t.YNc(3,Xs,2,2,"div",10),t.YNc(4,na,4,11,"div",11),t.YNc(5,ra,3,2,"div",8),t.qZA()),2&o){const n=d.$implicit,s=t.oxw(2);t.Udp("gap","wrapped"===n.labelMode?n.contentGap*s.sizeFactor:null,"px"),t.ekj("opacity-100",s.active)("opacity-0",!s.active)("flex-col","wrapped"===n.labelMode&&n.direction.includes("col")),t.xp6(1),t.Q6J("ngIf","wrapped"===n.labelMode),t.xp6(1),t.Q6J("ngIf",(null==n.entries?null:n.entries.length)>0&&"gradient"!==n.iconType),t.xp6(1),t.Q6J("ngIf","absolute"===n.iconMode),t.xp6(1),t.Q6J("ngIf","gradient"===n.iconType),t.xp6(1),t.Q6J("ngIf","wrapped"===n.labelMode)}}function ca(o,d){if(1&o){const n=t.EpF();t.TgZ(0,"div",2,3),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.toggleLegend())}),t.TgZ(2,"div",4),t._UZ(3,"i",5),t.qZA(),t.YNc(4,la,6,13,"div",6),t.qZA()}if(2&o){const n=t.oxw();t.Udp("gap",n.legendStyle.gap*n.sizeFactor,"px"),t.Q6J("ngStyle",n.bodyStyle)("ngClass",n.legendStyle.direction||"flex-col")("@toggleSize",!n.active),t.xp6(2),t.Udp("margin",n.bodyStyle.padding),t.ekj("opacity-0",n.active)("opacity-100",!n.active),t.xp6(2),t.Q6J("ngForOf",n.renderLegends)("ngForTrackBy",n.trackLegend)}}const Bo=function(o){return{value:o}};function da(o,d){if(1&o&&(t.ynx(0),t._UZ(1,"div",38),t.BQk()),2&o){const n=t.oxw(3),s=n.$implicit,l=n.entry;let p;t.xp6(1),t.Q6J("deltaContent",s.label)("item",t.VKq(2,Bo,null!==(p=l.value)&&void 0!==p?p:l.label))}}function ua(o,d){if(1&o&&(t._uU(0),t.ALo(1,"format")),2&o){const n=t.oxw(3);t.hij(" ",t.xi3(1,1,n.entry.label,n.format)," ")}}function pa(o,d){if(1&o&&(t.ynx(0),t.YNc(1,da,2,4,"ng-container",36),t.YNc(2,ua,2,4,"ng-template",null,37,t.W1O),t.BQk()),2&o){const n=t.MAs(3),s=t.oxw(2).$implicit,l=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==s?null:s.label)&&l.isNotEmptyDelta(s.label))("ngIfElse",n)}}function ha(o,d){if(1&o&&(t.ynx(0),t._UZ(1,"div",38),t.BQk()),2&o){const n=t.oxw(2),s=n.fallback,l=n.entry;t.xp6(1),t.Q6J("deltaContent",s)("item",t.VKq(2,Bo,l.value))}}function fa(o,d){if(1&o&&(t.ynx(0),t.YNc(1,pa,4,2,"ng-container",13),t.YNc(2,ha,2,4,"ng-container",13),t.BQk()),2&o){const n=t.oxw(),s=n.$implicit,l=n.entry;t.xp6(1),t.Q6J("ngIf",(null==s?null:s.label)||(null==l?null:l.label)),t.xp6(1),t.Q6J("ngIf",!l.label)}}function ga(o,d){if(1&o&&t.YNc(0,fa,3,2,"ng-container",13),2&o){const s=d.entry;t.Q6J("ngIf",d.$implicit||s)}}let ma=(()=>{class o extends Ot.Y{constructor(n,s,l,p,S,L){super(),this.styleService=n,this.colorManager=s,this.cdr=l,this.quillRendererService=p,this.bpm=S,this.sanitizer=L,this.active=!0,this.mobileView=!1,this.mapWithDataTypes=ft.MapWithDataTypes,this.styleValues=[],this.legends=[],this.maxNoValueWidth="100%",this.preRenderData=[],this.sizeFactor=1,this.noValueWrap=void 0,this.changes=new t.vpe}et legendStyle(){return this.content.typeSpecific.map.legendsStyle}get bodyStyle(){const n={backgroundColor:this.legendStyle.background.backgroundColor,backgroundImage:this.legendStyle.background.backgroundImage,borderRadius:`${this.legendStyle.borderRadius}px`,boxShadow:this.styleService.convertShadow(this.legendStyle.shadow)};return Object.assign(Object.assign({},this.styleService.convertFontFormat(this.legendStyle.body)),n)}ngOnInit(){}ngAfterViewInit(){this.emitRenderStatus()}ngOnChanges(n){var s;this.styleService.setContent(this.content),!(null===(s=this.config)||void 0===s)&&s.preRenderData&&(this.preRenderData=this.config.legendData),this.setup()}setup(){const{legends:s}=this.content.typeSpecific.map;this.legends=(null==s?void 0:s.length)>0?s.filter(l=>l.active):[],this.renderLegends=this.generateLegends(this.legends)}generateLegends(n){return n.map(s=>{const l=[];let p=s.length;if(this.sizeFactor=this.bpm.getSizeFactor(this.content.slug),"value"===s.type){const{source:S}=s;let L=[];L="data"===S?this.preRenderData.filter(q=>null!=q[s.fieldName]&&null!=q[s.fieldName]):this.content.typeSpecific.map.customSources.find(at=>at.id===S).data.features.map(at=>at.properties),L.length<p&&(p=L.length);const B=L.map(.sort(,X=(0,Fe.Wem)(B),tt=(0,to.u2)(Object.assign(Object.assign({},s.size),{fieldName:s.fieldName}),L,X),Ct=(0,to.cm)(Object.assign(Object.assign({},s.colors),{fieldName:s.fieldName}),L,X),mt=(0,to.VJ)(p,L,s.fieldName,X),D=L.length,N=D/p,Y=[0];for(let q=1;q<=p-2;q++)Y.push(Math.ceil(N*q));return Y.push(D-1),mt.forEach(q=>{l.push({image:s.images.data,color:"range"===s.colors.type?Ct(q):void 0,label:q,size:"range"===s.size.type?tt(q):void 0})}),Object.assign(Object.assign({},s),{entries:l})}return Object.assign(Object.assign({},s),{entries:s.items})})}getHighestScale(n,s){const l=Math.max(...n.map(p=>{var S,L,B;return null!==(B=null!==(L=null===(S=p.image)||void 0===S?void 0:S.size)&&void 0!==L?L:p.size)&&void 0!==B?B:s}));return this.makeEqualSized(l*this.sizeFactor)}makeEqualSized(n){return Math.ceil(n)%2==1?Math.ceil(n)+1:Math.ceil(n)}rackLegendrackEntriessNotEmptyDelta(n){return this.quillRendererService.deltaToString(n).length>1}toggleLegend(){this.active=!this.active,this.content&&(this.content.localStorage.mapLegendOpen=this.active)}gradientStyle(n){let p=`linear-gradient(to ${{"flex-col":"bottom","flex-col-reverse":"top","flex-row":"right","flex-row-reverse":"left"}[n.direction]}`;const S=n.colors.range;return S.forEach((L,B)=>{p+=`, ${L} ${B*(100/(S.length-1))}%`}),p+=")",console.log("gradient",p),this.sanitizer.bypassSecurityTrustStyle(p)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(Zt.vr),t.Y36(_.g),t.Y36(t.sBO),t.Y36(Te.u),t.Y36(ye.I),t.Y36(Et.H7))},o.\u0275cmp=t.Xpm({type:o,selectors:[["layout-map-layers-legend"]],viewQuery:hostVars:6,hostBindings:inputs:{active:"active",mobileView:"mobileView",config:"config",content:"content",options:"options",forceUpdate:"forceUpdate"},outputs:{changes:"changes"},features:[t.qOj,t.TTD],decls:3,vars:1,consts:[["class","cursor-pointer flex overflow-hidden pointer-events-auto relative box-content",3,"ngStyle","ngClass","gap","click",4,"ngIf"],["labelTemplate",""],[1,"cursor-pointer","flex","overflow-hidden","pointer-events-auto","relative","box-content",3,"ngStyle","ngClass","click"],["body",""],[1,"absolute","flex","items-center","justify-center","top-0","left-0","transition-opacity","duration-500","ease-out-expo",2,"width","1em","height","1em"],[1,"icon-map-signs"],["class","pointer-events-auto flex transition-opacity duration-500 ease-out-expo",3,"opacity-100","opacity-0","flex-col","gap",4,"ngFor","ngForOf","ngForTrackBy"],[1,"pointer-events-auto","flex","transition-opacity","duration-500","ease-out-expo"],["class","flex items-center justify-center",4,"ngIf"],["class","flex relative",3,"ngClass","gap",4,"ngIf"],["class","flex relative flex-col",4,"ngIf"],["class","flex",3,"flex-col","gap",4,"ngIf"],[1,"flex","items-center","justify-center"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","relative",3,"ngClass"],["class","flex justify-center",3,"items-center","items-end","w-full","w-height","ngClass","absolute","gap","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","justify-center",3,"ngClass","ngStyle"],[1,"flex","items-center","justify-center","shrink-0",3,"ngStyle"],[3,"tintImage","color","size","outlined",4,"ngIf"],["class","flex-1",4,"ngIf"],[3,"tintImage","color","size","outlined"],[3,"width","height","backgroundColor","borderRadius",4,"ngIf"],["class","border-current",3,"width","color","border-bottom-width","border-style",4,"ngIf"],[1,"border-current"],[1,"flex-1"],[1,"flex","relative","flex-col"],["class","flex items-center",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center"],[1,"absolute","border-b","border-dashed","border-current","-translate-x-full"],[1,"absolute","translate-y-1/2"],[1,"flex"],["class","flex items-center justify-center",3,"ngClass",4,"ngIf"],[1,"flex","items-center","justify-center",3,"ngClass"],["class","flex flex-1 items-center justify-center",4,"ngFor","ngForOf"],[1,"flex","flex-1","items-center","justify-center"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[3,"deltaContent","item"]],template:function(n,s){1&n&&(t.YNc(0,ca,5,13,"div",0),t.YNc(1,ga,1,1,"ng-template",null,1,t.W1O)),2&n&&t.Q6J("ngIf",(null==s.renderLegends?null:s.renderLegends.length)>0)},dependencies:[J.mk,J.sg,J.O5,J.tP,J.PC,ie._,ks.h,J.JJ,Be.x],styles:["img.bordered[_ngcontent-%COMP%]{--size: 1px;--negative: calc(var(--size) * -1);filter:drop-shadow(var(--negative) var(--negative) 0px currentColor) drop-shadow(var(--size) var(--negative) 0px currentColor) drop-shadow(var(--size) var(--size) 0px currentColor) drop-shadow(var(--negative) var(--size) 0px currentColor)}"],data:{animation:[Ls]}}),o})();var zo=k(29714);let va=(()=>{eturn o.rootComponent=Jt.E,o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[J.ez,Rt.k,M.Bz,Ht.u5,ci,De._t,Bn.ot,Rt.k]}),o})();t.B6R(ee.i,[J.sg,J.O5,J.PC,zo.Q,me.P,te,je.u],[]),t.B6R(jt.u,[J.mk,J.sg,J.O5,J.PC,zo.Q,me.P,te,je.u],[]),t.B6R(je.u,[J.sg,J.O5,J.PC,J.RF,J.n9,Jt.E,ct,En,ho,xi,Ti,je.u,wi,Bi,vo,yo,xo,Po,ko,i,Qo,ns,as,us,fs,bs,Os,Ps,As,ma],[])},41021:(Xe,fe,k)=>{k.d(fe,{l:()=>Rt});var J=k(56106),Ht=k(74039),M=k(37750);let Rt=(()=>{class Wt{gOnInit(){}createGradientStyle(){let kt="linear-gradient(to "+this.direction;return"string"==typeof this.colors[0]?this.colors.forEach((W,w)=>{kt+=`, ${W} ${w*(100/(this.colors.length-1))}%`}):(0,J.Z)(this.colors,["domain"]).forEach((w,Ee)=>{kt+=`, ${w.color} ${w.domain}%`}),kt+=")",this.sanitizer.bypassSecurityTrustStyle(kt)}}return Wt.\u0275fac=function(kt){return new(kt||Wt)(Ht.Y36(M.H7))},Wt.\u0275cmp=Ht.Xpm({type:Wt,selectors:[["gradient-viewer"]],hostVars:2,hostBindings:inputs:{colors:"colors",scaleType:"scaleType",size:"size",direction:"direction"},decls:1,vars:2,consts:[[1,"flex","fullwidth","fullheight"]],template:styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"]}),Wt})()},15918:(Xe,fe,k)=>{k.d(fe,{p:()=>qt});var J=k(61855),Ht=k(88772),M=k(74039),Rt=k(95098),Wt=k(22604),t=k(87833),kt=k(23331);const W=(0,kt.X$)("showButton",[(0,kt.eR)(":enter",[(0,kt.oB)({opacity:0,height:0,overflow:"hidden"}),(0,kt.jt)(".15s ease-out",(0,kt.oB)({opacity:1,height:"*"}))]),(0,kt.eR)(":leave",[(0,kt.oB)({overflow:"hidden",height:"*",opacity:1}),(0,kt.jt)(".15s 0s ease-in",(0,kt.oB)({opacity:0,height:"0px"}))])]);var w=k(5576),Ee=k(12993),Ae=k(8801),de=k(18666),_e=k(38776),xt=k(93532),Ve=k(4863),Zt=k(31081),Me=k(45696);const Oe=["searchContainer"],Dt=["searchInput"],ye=["results"];function Te(gt,j){if(1&gt){const z=M.EpF();M.TgZ(0,"div",4,5)(2,"input",6,7),M.NdJ("ngModelChange",("focus",function(){M.CHM(z);const Q=M.oxw();return M.KtG(Q.gotFocus())})("keyup.enter",function(Q){M.CHM(z);const it=M.oxw();return M.KtG(it.enterSearch(Q))})("keyup.escape",function(){M.CHM(z);const Q=M.oxw();return M.KtG(Q.resetQuery())})("keyup.arrowup",function(){M.CHM(z);const Q=M.oxw();return M.KtG(Q.up())})("keyup.arrowdown",function(){M.CHM(z);const Q=M.oxw();return M.KtG(Q.down())})("ngModelChange",,M.qZA(),M.TgZ(4,"div",8),M.NdJ("click",function(){M.CHM(z);const Q=M.oxw();return M.KtG(Q.resetQuery())}),M._UZ(5,"i",9),M.qZA()()}if(2&gt){const z=M.oxw();M.Akn(z.itemFont),M.Udp("max-width",z.alwaysOpen?z.resultMaxWidth:null,"px")("min-width",z.alwaysOpen?z.resultMinWidth:null,"px")("background",z.backgroundStyle&&z.backgroundStyle.backgroundColor?z.backgroundStyle.backgroundColor:null)("box-shadow",z.boxShadow)("border-radius",z.borderRadius,"px"),M.ekj("focused",z.searchFocused),M.xp6(2),M.Jzz("--inactive-opacity: ",z.itemInactiveOpacity,""),M.Q6J("ngModel",z.query)("placeholder",z.placeholder||"Suche..."),M.xp6(2),M.ekj("show",z.query.length>1)}}nction Be(gt,j){if(1&gt){const z=M.EpF();M.TgZ(0,"div",15),M.NdJ("click",,M.TgZ(1,"div",16)(2,"span",17),M._uU(3),M.qZA()()()}if(2&gt){const z=M.oxw(2);M.Akn(z.itemFont),M.ekj("minLineHeight",z.minLineHeight),M.Q6J("@showButton",void 0),M.xp6(3),M.Oqu(z.selectAllText)}}function Ke(gt,j){if(1&gt){const z=M.EpF();M.TgZ(0,"div",24),M.NdJ("click",function(Q){M.CHM(z);const it=M.oxw().$implicit,ot=M.oxw(3);return M.KtG(ot.selectItem(Q,it,!0,!1))}),M._UZ(1,"i",25),M.qZA()}if(2&gt){const z=M.oxw(4);M.Akn(z.itemFont)}}const tn=function He(gt,j){if(1&gt){const z=M.EpF();M.TgZ(0,"div",20,21),M.YNc(2,Ke,2,2,"div",22),M.TgZ(3,"div",23),M.NdJ("click",function(Q){const ot=M.CHM(z).$implicit,wt=M.oxw(3);return M.KtG(wt.selectItem(Q,ot,!0,!0))}),M.ALo(4,"highlight"),M.qZA()()}if(2&gt){const z=j.$implicit,K=j.index,Q=M.oxw(3);M.ekj("active",Q.activeItem(z)),M.Q6J("ngClass",M.WLB(10,tn,K===Q.navigateSelect,!Q.showCheckbox&&!Q.multiSelect)),M.xp6(2),M.Q6J("ngIf",Q.multiSelect||Q.showCheckbox),M.xp6(1),M.Akn(Q.itemFont),M.s9C("innerHTML",M.xi3(4,7,z[Q.labelField],Q.query),M.oJD)}}function Ue(gt,j){if(1&gt&&(M.TgZ(0,"div",26)(1,"div",27),M._uU(2),M.qZA()()),2&gt){const z=M.oxw(3);M.Akn(z.itemFont),M.xp6(2),M.Oqu(z.noResultsMessage)}}function Ge(gt,j){if(1&gt&&(M.ynx(0),M.YNc(1,He,5,13,"div",18),M.ALo(2,"sort"),M.YNc(3,Ue,3,3,"div",19),M.BQk()),2&gt){const z=j.ngIf,K=M.oxw(2);M.xp6(1),M.Q6J("ngForOf",M.gM2(2,3,z,K.sortByField||K.labelField,K.sortDesc,K.autoSort))("ngForTrackBy",K.trackByFn),M.xp6(2),M.Q6J("ngIf",0===z.length&&K.noResultsMessage)}}function Qe(gt,j){if(1&gt){const z=M.EpF();M.TgZ(0,"div",24),M.NdJ("click",function(Q){M.CHM(z);const it=M.oxw().$implicit,ot=M.oxw(3);return M.KtG(ot.selectItem(Q,it,!0,!1))}),M._UZ(1,"i",25),M.qZA()}if(2&gt){const z=M.oxw(4);M.Akn(z.itemFont)}}const ve=function(gt){return{navSelected:gt}};function ze(gt,j){if(1&gt){const z=M.EpF();M.TgZ(0,"div",20,21),M.YNc(2,Qe,2,2,"div",22),M.TgZ(3,"div",23),M.NdJ("click",function(Q){const ot=M.CHM(z).$implicit,wt=M.oxw(3);return M.KtG(wt.selectItem(Q,ot,!0,!0))}),M.ALo(4,"highlight"),M.qZA()()}if(2&gt){const z=j.$implicit,K=j.index,Q=M.oxw(3);M.ekj("active",Q.activeItem(z)),M.Q6J("ngClass",M.VKq(10,ve,K===Q.navigateSelect)),M.xp6(2),M.Q6J("ngIf",Q.multiSelect||Q.showCheckbox),M.xp6(1),M.Akn(Q.itemFont),M.s9C("innerHTML",M.xi3(4,7,z[Q.labelField],Q.query),M.oJD)}}function Pt(gt,j){if(1&gt&&(M.ynx(0),M.TgZ(1,"cdk-virtual-scroll-viewport",28),M.YNc(2,ze,5,12,"div",29),M.ALo(3,"sort"),M.qZA(),M.BQk()),2&gt){const z=j.ngIf,K=M.oxw(2);M.xp6(1),M.Udp("min-height",K.virtualScrollHeight),M.Q6J("itemSize",K.itemSize)("minBufferPx",500)("maxBufferPx",500),M.xp6(1),M.Q6J("cdkVirtualForOf",M.gM2(3,7,z,K.sortByField||K.labelField,K.sortDesc,K.autoSort))("cdkVirtualForTrackBy",K.trackByFn)}}const Ce=function(gt){return{toTop:gt}};function Le(gt,j){if(1&gt&&(M.YNc(0,Be,4,6,"div",12),M.TgZ(1,"div",13),M.YNc(2,Ge,4,8,"ng-container",14),M.ALo(3,"search"),M.YNc(4,Pt,4,12,"ng-container",14),M.ALo(5,"search"),M.qZA()),2&gt){const z=M.oxw();M.Q6J("ngIf",z.selectAllText&&z.multiSelect&&z.value&&z.items&&z.value.length<z.items.length),M.xp6(1),M.llm("--inactive-opacity: ",z.itemInactiveOpacity,"; --mouse-over-bg: ",z.itemMouseOver.backgroundColor,"; --mouse-over-color: ",z.itemMouseOver.color,"; --active-color: ",z.itemActive.color,"; --active-bg: ",z.itemActive.backgroundColor,""),M.Udp("border-radius",z.showBorderRadiusOnResults?z.borderRadius:null,"px")("box-shadow",z.showBoxshadowOnResults?z.boxShadow:null)("background",z.showBackgroundOnResults&&z.backgroundStyle&&z.backgroundStyle.backgroundColor?z.backgroundStyle.backgroundColor:null)("width",z.resultWidth,"px")("max-width",z.resultMaxWidth,"px")("min-width",z.resultMinWidth,"px")("max-height",z.resultMaxHeight,"px"),M.ekj("flex",z.flexed)("flex-1",z.flexed)("alwaysOpen",z.alwaysOpen)("minLineHeight",z.minLineHeight||z.minLineHeightOnItems),M.Q6J("ngClass",M.VKq(41,Ce,z.toTop)),M.xp6(1),M.Q6J("ngIf",!z.useVirtualScroll&&M.Dn7(3,33,z.items,z.query,z.labelField)),M.xp6(2),M.Q6J("ngIf",z.useVirtualScroll&&M.Dn7(5,37,z.items,z.query,z.labelField))}}function ke(gt,j){if(1&gt&&M._UZ(0,"modal-overlay",30),2&gt){const z=M.oxw(),K=M.MAs(3);M.Q6J("originPosition",z.originPosition)("overlayPosition",z.overlayPosition)("withBackdrop",!1)("withShadow",!1)("withBluring",!1)("autoClose",!0)("autoSize",!0)("identifier",z.modalId)("element",z.searchContainer)("contentTemplate",K)}}const Pe={provide:Ht.JU,useExisting:(0,M.Gpc)(()=>qt),multi:!0};class qt extends Wt.K{constructor(j,z,K,Q){super(),this.cdr=j,this.element=z,this.messageBus=K,this.modalOverlayService=Q,this.toTop=!1,this.toLeft=!1,this.alwaysOpen=!0,this.minLineHeight=!0,this.items=[],this.multiSelect=!1,this.valueField="value",this.labelField="label",this.placeholder="Suche...",this.noResultsMessage="No items found",this.selectAllText="Alle ausw\xe4hlen",this.query="",this.showSearch=!1,this.showCheckbox=!1,this.itemInactiveOpacity=.5,this.itemMouseOver={backgroundColor:"rgba(0, 0, 0, 0.05)",color:"currentColor"},this.itemActive={backgroundColor:"transparent",color:"currentColor"},this.minLineHeightOnItems=!1,this.showBoxshadowOnResults=!1,this.showBackgroundOnResults=!1,this.showBorderRadiusOnResults=!1,this.autoSort=!0,this.sortDesc=!1,this.resultMaxHeightPercentage=60,this.useVirtualScroll=!1,this.virtualScrollHeight="30vh",this.flexed=!1,this.itemSize=28,this.newPositions=new M.vpe,this.modalId="SearchInput-"+(0,Rt.Z)(),this.searchFocused=!1,this.navigateSelect=-1,this.autoCloseDelay=1,this.originPosition=["start","bottom"],this.overlayPosition=["start","top"],this.handleClick=it=>{it&&this.searchFocused&&!this.element.nativeElement.contains(it)&&this.searchFocused&&(this.searchFocused=!1,this.cdr.detectChanges())},this.receiveContentResize=it=>{this.calcSizing()},this.messageBus.on(t.e6.Click,t.BV.All,this.handleClick,this.componentDestroyed$),this.messageBus.on(t.K7.ContentResize,"CATCH_ALL",this.receiveContentResize,this.componentDestroyed$),this.messageBus.on(t.Bd.InvisUpdate,t.BV.InvisualFilter,this.receiveContentResize,this.componentDestroyed$)}t value(){return this._value}get resultWidth(){return this.alwaysOpen?null:this.element&&this.element.nativeElement?this.element.nativeElement.clientWidth:null}catchSearch(j){(j.ctrlKey||j.metaKey)&&"Escape"===j.key&&(this.searchInput.nativeElement.focus(),j.preventDefault())}gOnInit(){}ngAfterViewInit(){this.calcSizing()}writeValue(j){this._value=j,this._value&&(this.selected=JSON.parse(JSON.stringify(this._value)))}registerOnChange(j){this.onChange=j}etDisabledState(j){}searchChange(j=!1){this.navigateSelect=-1,j&&this.gotFocus(),this.cdr.detectChanges()}getValidValue(j){return this.valueField&&null!=j[this.valueField]&&void 0!==j[this.valueField]?j[this.valueField]:j}selectItem(j,z,K=!0,Q=!1){if(this.searchFocused=!1,K&&(this.navigateSelect=-1),this.multiSelect)if(Q&&!(j.ctrlKey||j.altKey||j.metaKey))this.selected=[this.getValidValue(z)];else{const it=this.selected.indexOf(this.getValidValue(z));it>-1?this.selected.splice(it,1):this.selected.push(this.getValidValue(z))}else this.selected=this.getValidValue(z);this.alwaysOpen||this.modalOverlayService.get(this.modalId).closeModal(),this.value=this.selected,this.cdr.detectChanges()}resetQuery(){this.query="",this.navigateSelect=-1,this.cdr.detectChanges(),setTimeout(}enterSearch(j){if(j.preventDefault(),!this.results.length){const it=this.modalOverlayService.get(this.modalId);return void(it&&!it.overlayOpen&&!this.alwaysOpen&&this.modalOverlayService.get(this.modalId).open())}const z=this.navigateSelect>-1?this.navigateSelect:0,K=this.results.toArray()[z].nativeElement.textContent,Q=this.items.find(it=>it[this.labelField]===K);this.selectItem(Q,!1)}up(){if(this.results.length)this.navigateSelect=this.navigateSelect>0?this.navigateSelect-1:this.results.length-1,this.results.toArray()[this.navigateSelect].nativeElement.scrollIntoView({behavior:"smooth",block:"end"}),this.cdr.detectChanges();else{const j=this.modalOverlayService.get(this.modalId);j&&!j.overlayOpen&&!this.alwaysOpen&&this.modalOverlayService.get(this.modalId).open()}}down(){if(this.results.length)this.navigateSelect=this.navigateSelect<this.results.length-1?this.navigateSelect+1:0,this.results.toArray()[this.navigateSelect].nativeElement.scrollIntoView({behavior:"smooth",block:"end"}),this.cdr.detectChanges();else{const j=this.modalOverlayService.get(this.modalId);j&&!j.overlayOpen&&!this.alwaysOpen&&this.modalOverlayService.get(this.modalId).open()}}determinePosition(j,z){const K=j.getBoundingClientRect(),Q=z.getBoundingClientRect();this.toTop=Q.top-K.top>K.height/2,this.toLeft=Q.left-K.left>K.width/2,this.toTop?(this.originPosition=["start","top"],this.overlayPosition=["start","bottom"]):(this.originPosition=["start","bottom"],this.overlayPosition=["start","top"]),this.toLeft&&(this.originPosition=["end",this.originPosition[1]],this.overlayPosition=["end",this.overlayPosition[1]]),this.newPositions.emit({overlayPosition:this.overlayPosition,originPosition:this.originPosition}),this.cdr.detectChanges()}gotFocus(){this.searchFocused=!0;const j=this.modalOverlayService.get(this.modalId);j&&!j.overlayOpen&&!this.alwaysOpen&&this.modalOverlayService.get(this.modalId).open()}closeResultsalcSizing(){const j=this.measureElement||this.element.nativeElement;if(j&&j.closest){const z=j.closest("content-selector2");if(z){const K=z.getBoundingClientRect(),Q=j.getBoundingClientRect(),ot=Q.left-K.left>K.width/2;let wt=0;this.alwaysOpen&&this.searchContainer&&this.searchContainer.nativeElement&&(wt=this.searchContainer.nativeElement.clientHeight),this.resultMaxHeight=z.clientHeight/100*this.resultMaxHeightPercentage-wt,this.resultMaxWidth=ot?Q.left-K.left+Q.width:K.width-(Q.left-K.left),this.determinePosition(z,j)}}}activeItem(j){return!!this.value&&(this.multiSelect?!!Array.isArray(this.value)&&this.value.some(z=>z===j[this.valueField]):this.valueField&&j[this.valueField]?this.value===j[this.valueField]:this.value===j)}selectAll(){this.selected=this.items.map(,this.value=this.selected}}qt.\u0275fac=function(j){return new(j||qt)(M.Y36(M.sBO),M.Y36(M.SBq),M.Y36(Ee.Y),M.Y36(Ae.H))},qt.\u0275cmp=M.Xpm({type:qt,selectors:[["list-selector"]],viewQuery:function(j,z){if(1&j&&(M.Gf(Oe,5),M.Gf(Dt,5),M.Gf(ye,5)),2&j){let K;M.iGM(K=M.CRH())&&(z.searchContainer=K.first),M.iGM(K=M.CRH())&&(z.searchInput=K.first),M.iGM(K=M.CRH())&&(z.sResults=K)}},hostVars:12,hostBindings:function(j,z){1&j&&M.NdJ("keydown",function(Q){return z.catchSearch(Q)},!1,M.Jf7),2&j&&(M.Udp("max-height",z.maxHeight,"px")("max-width",z.maxWidth,"px"),M.ekj("toTop",z.toTop)("toLeft",z.toLeft)("alwaysOpen",z.alwaysOpen)("minLineHeight",z.minLineHeight))},inputs:{alwaysOpen:"alwaysOpen",minLineHeight:"minLineHeight",items:"items",multiSelect:"multiSelect",valueField:"valueField",labelField:"labelField",placeholder:"placeholder",noResultsMessage:"noResultsMessage",selectAllText:"selectAllText",referenceID:"referenceID",query:"query",trackByFn:"trackByFn",showSearch:"showSearch",showCheckbox:"showCheckbox",itemStyle:"itemStyle",itemFont:"itemFont",itemInactiveOpacity:"itemInactiveOpacity",itemMouseOver:"itemMouseOver",itemActive:"itemActive",minLineHeightOnItems:"minLineHeightOnItems",selectAllButtonStyle:"selectAllButtonStyle",selectAllButtonBackground:"selectAllButtonBackground",backgroundStyle:"backgroundStyle",borderRadius:"borderRadius",boxShadow:"boxShadow",showBoxshadowOnResults:"showBoxshadowOnResults",showBackgroundOnResults:"showBackgroundOnResults",showBorderRadiusOnResults:"showBorderRadiusOnResults",size:"size",autoSort:"autoSort",sortDesc:"sortDesc",sortByField:"sortByField",measureElement:"measureElement",resultMaxHeightPercentage:"resultMaxHeightPercentage",useVirtualScroll:"useVirtualScroll",virtualScrollHeight:"virtualScrollHeight",flexed:"flexed",itemSize:"itemSize",resultMaxHeight:"resultMaxHeight",resultMaxWidth:"resultMaxWidth",resultMinWidth:"resultMinWidth",originPosition:"originPosition",overlayPosition:"overlayPosition"},outputs:{newPositions:"newPositions"},features:[M._Bn([Pe]),M.qOj],decls:5,vars:3,consts:[["class","search",3,"style","max-width","min-width","background","boxShadow","borderRadius","focused",4,"ngIf"],["class","items-list flex column flex-1",4,"ngIf"],["searchResults",""],[3,"originPosition","overlayPosition","withBackdrop","withShadow","withBluring","autoClose","autoSize","identifier","element","contentTemplate",4,"ngIf"],[1,"search"],["searchContainer",""],["autocomplete","off",3,"ngModel","placeholder","ngModelChange","focus","keyup.enter","keyup.escape","keyup.arrowup","keyup.arrowdown"],["searchInput",""],[1,"reset","flex","center","fullheight",3,"click"],[1,"icon-plus","r45"],[1,"items-list","flex","column","flex-1"],[4,"ngTemplateOutlet"],["class","select-all-container",3,"style","minLineHeight","click",4,"ngIf"],[1,"results",3,"ngClass"],[4,"ngIf"],[1,"select-all-container",3,"click"],[1,"select-all-button"],[1,"select-all-button-label"],["class","item",3,"ngClass","active",4,"ngFor","ngForOf","ngForTrackBy"],["class","item no-highlights",3,"style",4,"ngIf"],[1,"item",3,"ngClass"],["results",""],["class","flex center checkbox-container",3,"style","click",4,"ngIf"],[1,"label",3,"innerHTML","click"],[1,"flex","center","checkbox-container",3,"click"],[1,"icon-ok"],[1,"item","no-highlights"],[1,"label"],[2,"width","100%",3,"itemSize","minBufferPx","maxBufferPx"],["class","item",3,"ngClass","active",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"originPosition","overlayPosition","withBackdrop","withShadow","withBluring","autoClose","autoSize","identifier","element","contentTemplate"]],template:function(j,z){1&j&&(M.YNc(0,Te,6,21,"div",0),M.YNc(1,me,2,1,"div",1),M.YNc(2,Le,6,43,"ng-template",null,2,M.W1O),M.YNc(4,ke,1,10,"modal-overlay",3)),2&j&&(M.Q6J("ngIf",z.showSearch),M.xp6(1),M.Q6J("ngIf",z.alwaysOpen),M.xp6(3),M.Q6J("ngIf",!z.alwaysOpen))},dependencies:[de.mk,de.sg,de.O5,de.tP,Ht.Fj,Ht.JJ,Ht.On,_e.xd,_e.x0,_e.N7,xt.F,Ve.C,Zt.F,Me.K],styles:['[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{--inactive-opacity: .5;transition:all .2s;z-index:5;padding:5px 16px 5px 5px;color:currentColor;position:relative;pointer-events:all;box-sizing:border-box;display:flex;align-items:center}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:relative;z-index:2;width:100%;background-color:transparent;color:currentColor;padding:0;border:none;font-family:inherit;font-weight:inherit;font-style:inherit}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:currentColor;opacity:var(--inactive-opacity)}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-clear{display:none}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:currentColor;opacity:var(--inactive-opacity)}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:currentColor;opacity:var(--inactive-opacity)}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{position:absolute;right:0px;top:0px;z-index:2;padding:0;cursor:pointer;opacity:0;pointer-events:none;color:currentColor}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:currentColor}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .reset.show[_ngcontent-%COMP%]{opacity:1;pointer-events:initial}.toTop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{bottom:100%}.minLineHeight[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{min-height:2em}[_nghost-%COMP%]:not(.alwaysOpen)   .search[_ngcontent-%COMP%]{background:rgba(255,255,255,.93)}[_nghost-%COMP%]:not(.alwaysOpen)   .search.focused[_ngcontent-%COMP%]{background:rgb(255,255,255);border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.select-all-container[_ngcontent-%COMP%]{color:currentColor}.select-all-container[_ngcontent-%COMP%]   .select-all-button[_ngcontent-%COMP%]{cursor:pointer;color:currentColor}.select-all-container[_ngcontent-%COMP%]   .select-all-button[_ngcontent-%COMP%]   .select-all-button-label[_ngcontent-%COMP%]{color:currentColor}.results[_ngcontent-%COMP%]{--inactive-opacity: .5;--mouse-over-bg: rgba(0, 0, 0, .05);--mouse-over-color: currentColor;--active-bg: transparent;--active-color: currentColor;z-index:2;height:auto;width:100%;overflow:auto;animation:enter .3s;color:currentColor;cursor:pointer}.results[_ngcontent-%COMP%]:not(.alwaysOpen){background-color:#fff;border-top-left-radius:0!important;border-top-right-radius:0!important}.results.minLineHeight[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{min-height:2em}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;transition:background-color .2s ease-out;position:relative;box-sizing:border-box;align-items:center}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:100%;color:currentColor}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]  mark{color:currentColor!important;border-bottom-color:currentColor!important}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]:hover{opacity:1;background-color:var(--mouse-over-bg)}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]:hover > *[_ngcontent-%COMP%]{color:var(--mouse-over-color);position:relative}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]:hover:before{display:flex}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .country[_ngcontent-%COMP%]{font-size:.9rem;opacity:.75}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background-color:var(--mouse-over-bg);pointer-events:none;display:none;top:0;left:0}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(.no-highlights):not(.active){opacity:var(--inactive-opacity)}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(.no-highlights).navSelected{opacity:1}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(.no-highlights).navSelected > *[_ngcontent-%COMP%]{color:var(--mouse-over-color);position:relative}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(.no-highlights).navSelected:before{background-color:var(--mouse-over-bg);display:flex}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{color:currentColor}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]:hover{opacity:1;background-color:var(--mouse-over-bg)}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]:hover > *[_ngcontent-%COMP%]{color:var(--mouse-over-color);position:relative}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]:hover:before{display:flex}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{position:relative;width:1em;height:1em;color:currentColor}.results[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]:before{position:absolute;content:"";display:block;top:10%;left:32%;width:25%;height:60%;border-style:solid;border-color:currentColor;border-width:0 2px 2px 0;transform:rotate(45deg);opacity:0;transition:opacity 175ms cubic-bezier(.1,.1,.25,1)}.results[_ngcontent-%COMP%]   .item.active[_ngcontent-%COMP%]{background:var(--active-bg)}.results[_ngcontent-%COMP%]   .item.active[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{color:var(--active-color)}.results[_ngcontent-%COMP%]   .item.active[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]:before{opacity:1}'],data:{animation:[W]}}),(0,J.gn)([(0,w.T)(50)],qt.prototype,"calcSizing",null)},74226:(Xe,fe,k)=>{d(fe,{W_:()=>Xi,tl:()=>Ki,ZP:()=>qi});const M={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:createElement:createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Rt(){const e="undefined"!=typeof document?document:{};return Ht(e,M),e}const Wt={document:M,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:addEventListener(){},removeEventListener(){},getComputedStyle:Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:requestAnimationFrame:cancelAnimationFrame;=W.prototype;const le="resize scroll".split(" ");t("click"),It("blur"),It("focus"),It("focusin"),It("focusout"),It("keyup"),It("keydown"),It("keypress"),It("submit"),It("change"),It("mousedown"),It("mousemove"),It("mouseup"),It("mouseenter"),It("mouseleave"),It("mouseout"),It("mouseover"),It("touchstart"),It("touchend"),It("touchmove"),It("resize"),It("scroll");const De={addClass:function Ve(...e){const a=w(e.map(i=>i.split(" ")));return this.forEach(i=>{i.classList.add(...a)}),this},removeClass:hasClass:toggleClass:attr:removeAttr:transform:transition:on:off:trigger:transitionEnd:outerWidth:function Pe(e){if(this.length>0){if(e){const a=this.styles();return this[0].offsetWidth+parseFloat(a.getPropertyValue("margin-right"))+parseFloat(a.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:styles:offset:css:each:html:text:is:index:eq:append:prepend:next:nextAll:function Et(e){const a=[];let i=this[0];if(!i)return xt([]);for(;i.nextElementSibling;){const r=i.nextElementSibling;e?xt(r).is(e)&&a.push(r):a.push(r),i=r}return xt(a)},prev:prevAll:parent:parents:closest:find:children:filter:remove:;Object.keys(De).forEach(;const Bt=xt;yn,be;1;onst Hn=Gn=Qn={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};onst xn={eventsEmitter:{ononceonAnyoffAnyoffemit,update:{updateSize:updateSlides:updateAutoHeight:updateSlidesOffset:updateSlidesProgress:updateProgress:updateSlidesClasses:updateActiveIndex:updateClickedSlide:,translate:{getTranslate:setTranslate:minTranslate:maxTranslate:translateTo:,transition:{setTransition:transitionStart:transitionEnd:,slide:{slideTo:slideToLoop:slideNext:slidePrev:slideReset:slideToClosest:slideToClickedSlide:,loop:{loopCreate:loopFix:loopDestroy:,grabCursor:{setGrabCursor:unsetGrabCursor:,events:{attachEvents:detachEvents:,breakpoints:{setBreakpoint:getBreakpoint:,checkOverflow:{checkOverflow:,classes:{addClasses:removeClasses:,images:{loadImage:preloadImages:},bn={};bject.keys(xn).forEach(,he.use([);const qi=he;ction Ki({swiper:e,extendParams:a,on:i,emit:r}){const c="swiper-pagination";a({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:C=>C,formatFractionTotal:bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let u,v=0;ction g(){const C=e.params.pagination;if(y())return;const x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,P=e.pagination.$el;let T="";if("bullets"===C.type){let E=e.params.loop?Math.ceil((x-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&E>x&&(E=x);for(let U=0;U<E;U+=1)T+=C.renderBullet?C.renderBullet.call(e,U,C.bulletClass):`<${C.bulletElement} class="${C.bulletClass}"></${C.bulletElement}>`;P.html(T),e.pagination.bullets=P.find(Ye(C.bulletClass))}"fraction"===C.type&&(T=C.renderFraction?C.renderFraction.call(e,C.currentClass,C.totalClass):`<span class="${C.currentClass}"></span> / <span class="${C.totalClass}"></span>`,P.html(T)),"progressbar"===C.type&&(T=C.renderProgressbar?C.renderProgressbar.call(e,C.progressbarFillClass):`<span class="${C.progressbarFillClass}"></span>`,P.html(T)),"custom"!==C.type&&r("paginationRender",e.pagination.$el[0])}"init",,i("activeIndexChange",,i("snapIndexChange",,i("slidesLengthChange",,i("snapGridLengthChange",,i("destroy",()=>{_()}),i("enable disable",,i("lock unlock",,i("click",;const O=Object.assign(e.pagination,{enable:disable:O,render:g,update:m,init:f,destroy:_})}}}]);