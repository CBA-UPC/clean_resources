(()=>{"use strict";"undefined"!=typeof window&&function(){if(window.__tcfapi){var e,t=function(t,n){e?n&&"useractioncomplete"===t.eventStatus&&e!==t.tcString&&window.location.reload():e=t.tcString},n=function(t,n){n&&"tcloaded"===t.eventStatus&&(e=t.tcString)},i=document.querySelector("[data-cmp='true']");try{i.addEventListener("click",()}catch(e){}}}();var e=function(e){var t;null!==(t=window.performance)&&void 0!==t&&t.mark&&window.performance.mark(e)},t=function(){var e,t;null!==(e=window.performance)&&void 0!==e&&e.measure&&(t=window.performance).measure.apply(t,arguments)};const n="headerBidderTimeout",i=JSON.parse('{"unitBase":"/176986657/radiotimes.com/tv/entertainment","environment":"production","permutiveId":"99db7a95-b06a-4ea9-857c-f73ba0a25c19","name":"bbcgoodfood","prebid":{"active":true,"timeout":1800,"amazonTam":false},"lazyRendering":{"enabled":false,"mobileScaling":0,"renderMarginPercent":35},"dai":[[["recipe"],{"mpu2Lvl1":1050,"mpu2Lvl2":750,"mpu2Lvl3":450,"mpu3":1000,"desktopEnabled":false,"lazyFetching":{"viewport":50}}],[["article"],{"desktopEnabled":false,"maxAds":14,"mpu3To5":1000,"mpu6Plus":1000,"lazyFetching":{"viewport":100}}]],"adSlots":{"default--banner--1":{"//":"Full width banner used primarily on elementor pages","sizes":[[[970,50],[[970,250],[728,90],"fluid"]],[[768,50],[[728,90],"fluid"]],[[0,0],[[320,50],[300,50],"fluid"]]],"key":"banner","index":"1","keyValuePair":{},"label":"default--banner--1","pos":"leader1,top,banner_leader","showDisclaimer":false},"default--banner--2":{"//":"Full width banner used primarily on elementor pages","sizes":[[[970,250],[[970,251],[970,250],"fluid"]],[[728,90],[[728,91],[728,90],"fluid"]],[[0,0],[[300,251],[300,250],[320,50],[300,50],"fluid"]]],"key":"banner","index":"2","keyValuePair":{},"label":"default--banner--2","pos":"leader2,mid","showDisclaimer":false},"default--banner--3":{"//":"Full width banner used primarily on elementor pages","sizes":[[[970,250],[[970,252],[970,250],"fluid"]],[[728,90],[[728,92],[728,90],"fluid"]],[[0,0],[[300,252],[300,250],[320,50],[300,50],"fluid"]]],"key":"banner","index":"3","keyValuePair":{},"label":"default--banner--3","pos":"leader3,bottom","showDisclaimer":false},"default--oop--1":{"//":"Out of page ad used for skins on all pages","sizes":[[[0,0],[1,1]]],"key":"oop","index":"1","keyValuePair":{},"label":"default--oop--1","pos":"","showDisclaimer":false},"default--inline--1":{"//":"Initial dynamically inserted ad that should appear within editorial content towards the top of the page","sizes":[[[970,50],[]],[[768,50],[]],[[0,0],[[300,255],[300,251],[300,250],"fluid"]]],"key":"inline","index":"1","keyValuePair":{},"label":"default--inline--1","pos":"top","showDisclaimer":true},"default--inline--2":{"//":"Second dynamically inserted ad that should appear within editorial content. Can contain an instream video player instead of an advert","sizes":[[[0,0],[[300,255],[300,252],[300,250],"fluid"]]],"key":"inline","index":"2","keyValuePair":{},"label":"default--inline--2","pos":"outstream","showDisclaimer":false},"default--inline--3":{"//":"Final dynamically inserted ad that should appear within editorial content towards the end of the page","sizes":[[[970,50],[]],[[768,50],[]],[[0,0],[[300,255],[300,251],[300,250],"fluid"]]],"key":"inline","index":"3","keyValuePair":{},"label":"default--inline--3","pos":"top","showDisclaimer":true},"default--inline--default":{"//":"Will appear within editorial content with --default replaced with an integer to ensure each placement of this ad slot is unique","sizes":[[[970,50],[]],[[768,50],[]],[[0,0],[[300,600],[300,605],[300,255],[300,253],[300,250],"fluid"]]],"key":"inline","index":"default","keyValuePair":{},"label":"default--inline--default","pos":"","showDisclaimer":true},"default--inline-dynamic--default":{"//":"Will appear within myhub or saved recipe content with --default replaced with an integer to ensure each placement of this ad slot is unique","sizes":[[[0,0],[[300,255],[300,250],"fluid"]]],"key":"inline-dynamic","index":"default","keyValuePair":{},"label":"default--inline-dynamic--default","pos":"","showDisclaimer":true},"default--inline-listings--default":{"//":"Used for tv listings page. All injected ads can have the same size mapping but require different targeting","sizes":[[[970,50],[[970,250],[728,90],"fluid"]],[[768,50],[[728,90],"fluid"]],[[0,0],[[300,600],[300,605],[300,255],[300,250],"fluid"]]],"key":"inline-listings","index":"default","keyValuePair":{},"label":"default--inline-listings--default","pos":"","showDisclaimer":true},"default--gallery--1":{"//":"Wherever an editorially created gallery is injected","sizes":[[[300,251],[300,250]]],"key":"gallery","index":"1","keyValuePair":{},"label":"default--gallery--1","pos":"mid,gallery_mid","showDisclaimer":false},"default--quick-view--1":{"//":"Mobile or Desktop ad slot for video listings quick view","sizes":[[[970,50],[[300,251],[300,250],"fluid"]],[[768,50],[[300,251],[300,250],"fluid"]],[[0,0],[[320,50],[300,50],"fluid"]]],"key":"quick-view","index":"1","keyValuePair":{},"label":"default--quick-view--1","pos":"video-listings,schedule_details_banner_top","showDisclaimer":false},"default--quick-view--2":{"//":"Mobile ad slot for video listings quick view","sizes":[[[970,50],[[0,0]]],[[768,50],[[0,0]]],[[0,0],[[320,50],[300,50],"fluid"]]],"key":"quick-view","index":"2","keyValuePair":{},"label":"default--quick-view--2","pos":"video-listings,schedule_details_banner_bottom","showDisclaimer":false},"default--sponsored--1":{"//":"Unique sponsored channel advertisement","sizes":[[[0,0],[[2,2]]]],"key":"sponsored","index":"1","keyValuePair":{},"label":"default--sponsored--1","pos":"schedule_sponsored","showDisclaimer":false},"default--mpu--1":{"//":"Top sidebar advert for desktop and tablet pages","sizes":[[[960,400],[[300,600],[300,251],[300,250],"fluid"]],[[768,50],[[300,600],[300,251],[300,250],"fluid"]],[[0,0],[]]],"key":"mpu","index":"1","keyValuePair":{},"label":"default--mpu--1","pos":"top","showDisclaimer":false},"default--mpu--2":{"//":"Middle sidebar advert for desktop and tablet pages","sizes":[[[960,400],[[300,600],[300,252],[300,250],"fluid"]],[[768,50],[[300,600],[300,252],[300,250],"fluid"]],[[0,0],[]]],"key":"mpu","index":"2","keyValuePair":{},"label":"default--mpu--2","pos":"mid","showDisclaimer":false},"default--mpu--3":{"//":"Bottom sidebar advert for desktop and tablet pages","sizes":[[[960,400],[[300,600],[300,253],[300,250],"fluid"]],[[768,50],[[300,600],[300,253],[300,250],"fluid"]],[[0,0],[]]],"key":"mpu","index":"3","keyValuePair":{},"label":"default--mpu--3","pos":"bottom","showDisclaimer":false},"default--card--1":{"//":"Unique Nova Ad Slot for search or listings pages","sizes":[[[0,0],[[5,5]]]],"key":"card","index":"1","keyValuePair":{},"label":"default--card--1","pos":"nova","showDisclaimer":false},"default--inline-accordion--default":{"//":"Used to differentiate ads injected in article pages and ads injected within Accordion contents, such as a show pages","sizes":[[[970,50],[]],[[768,50],[]],[[0,0],[[300,255],[300,250],"fluid"]]],"key":"inline-accordion","index":"default","keyValuePair":{},"label":"default--inline-accordion--default","pos":"","showDisclaimer":true},"default--inline-grid--1":{"//":"Initial inline ad slot for Search Grid pages","sizes":[[[970,250],[[970,251],[970,250],"fluid"]],[[728,90],[[728,91],[728,90],"fluid"]],[[0,0],[[300,251],[300,250],[320,50],[300,50],"fluid"]]],"key":"inline-grid","index":"1","keyValuePair":{},"label":"default--inline-grid--1","pos":"top,search_top,inline1","showDisclaimer":false},"default--inline-grid--2":{"//":"Second inline ad slot for Search Grid pages","sizes":[[[970,250],[[970,252],[970,250],"fluid"]],[[728,90],[[728,92],[728,90],"fluid"]],[[0,0],[[300,252],[300,250],[320,50],[300,50],"fluid"]]],"key":"inline-grid","index":"2","keyValuePair":{},"label":"default--inline-grid--2","pos":"mid,search_mid,inline2","showDisclaimer":false},"default--inline-grid--default":{"//":"Third and subsequent inline ad slot for Search Grid pages","sizes":[[[970,250],[[970,253],[970,250],"fluid"]],[[728,90],[[728,93],[728,90],"fluid"]],[[0,0],[[300,253],[300,250],[320,50],[300,50],"fluid"]]],"key":"inline-grid","index":"default","keyValuePair":{},"label":"default--inline-grid--default","pos":"bottom,search_bottom,inline3","showDisclaimer":false},"default--inline-list--1":{"//":"Initial inline ad slot for Search List pages","sizes":[[[970,250],[]],[[728,90],[]],[[0,0],[[300,251],[300,250],[320,50],[300,50],"fluid"]]],"key":"inline-list","index":"1","keyValuePair":{},"label":"default--inline-list--1","pos":"mid,search_mid","showDisclaimer":false},"default--inline-list--2":{"//":"Second inline ad slot for Search List pages","sizes":[[[970,250],[]],[[728,90],[]],[[0,0],[[300,252],[300,250],[320,50],[300,50],"fluid"]]],"key":"inline-list","index":"2","keyValuePair":{},"label":"default--inline-list--2","pos":"bottom,search_bottom","showDisclaimer":false},"default--vertical-gallery--default":{"//":"Will appear after every picture block in vertical gallery with --default replaced with an integer to ensure each placement of this ad slot is unique","sizes":[[[[336,280]]]],"key":"vertical-gallery","index":"default","keyValuePair":{},"label":"default--vertical-gallery--default","pos":"","showDisclaimer":false},"default--block-banner--default":{"//":"Used in page builder ad block will display a banner on desktop and double mpu on mobile","sizes":[[[960,400],[[970,250],[728,90],"fluid"]],[[768,50],[]],[[0,0],[[300,600],[300,605]]]],"key":"block-banner","index":"default","keyValuePair":{},"label":"default--block-banner--default","pos":"","showDisclaimer":false},"default--block-mpu--default":{"//":"Single small MPU for pagebuilder","sizes":[[[[300,251],[300,250],[300,255],"fluid"]]],"key":"block-mpu","index":"default","keyValuePair":{},"label":"default--block-mpu--default","pos":"","showDisclaimer":false}}}'); l=r(r({},console),{},{withName:function(){return console},withMeta:);const s=("stitcher | ad manager","undefined"==typeof Proxy?l:new Proxy({},function(e){return{get:function(t,n){return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];window.IM=window.IM||{},window.IM.logger=window.IM.logger||{queue:[]},t[n]?t[n].apply(t,o):window.IM.logger.queue.push((function(){var i=window.IM.logger.withName(e);Object.assign(t,i),i[n].apply(i,o)}))}}}}("stitcher | ad manager")));const d=u=(e,t)=>{var n,o;const r=i[e];return(null===(n=r.find(())||void 0===n?void 0:n[1])||(null===(o=r.find(())||void 0===o?void 0:o[1])},c=e=>{window.LUX?((()=>{const e=(()=>{try{return window.localStorage._psegs?JSON.parse(window.localStorage._psegs):[]}catch(e){return s.warn(`Error processing permutive segments for PreBid, \n    {error: ${e.message}, \n    {key}: permutive | prebid}`),[]}})();window.LUX.addData("permutive-segments",e.length)})(),(e=>{var t,n;const i=d("prebid"),o=d("lazyRendering");var r,a;void 0!==(null==e||null===(t=e.adRefresh)||void 0===t?void 0:t.enabled)&&window.LUX.addData("ad-refresh",null==e||null===(r=e.adRefresh)||void 0===r?void 0:r.enabled),void 0!==(null==e||null===(n=e.adRefresh)||void 0===n?void 0:n.durationInView)&&window.LUX.addData("ad-refresh-duration-in-view",null==e||null===(a=e.adRefresh)||void 0===a?void 0:a.durationInView),void 0!==(null==i?void 0:i.timeout)&&window.LUX.addData("header-bidding-timeout",null==i?void 0:i.timeout),void 0!==(null==o?void 0:o.enabled)&&window.LUX.addData("ads-lazy-loading",null==o?void 0:o.enabled)})(e),window.addEventListener(n,()):s.warn(`Could not add SpeedCurve LUX data as window.LUX is ${window.LUX}`)},p=()=>{var e,t;return 1===(null===(e=performance)||void 0===e||null===(t=e.getEntriesByName("time-to-cmp"))||void 0===t?void 0:t.length)},m=e=>{try{var t;return(null==e||null===(t=e.getSlotElementId)||void 0===t?void 0:t.call(e))||(null==e?void 0:e.id)}catch(e){s.error(`Slot has been removed from the DOM, \n      {error: ${e.message}},\n      {key}: permutive | identityGUIDs\n    }`)}return null},g=e=>(Array.isArray(e)?e:[e]).map(m).filter((e=>e)),f=()=>(window.IM=window.IM||{},window.IM.advertising=window.IM.advertising||{},window.IM.advertising),b=e=>{const t=f();e&&Object.assign(t,e)},v=e=>(f()[e]||b({[e]:null}),f()[e]),h=w="refreshState",y=()=>v(w)||{},k=S=e=>{const t=y(),n=m(e);return n&&t[n]||{}},E=(e,t)=>{const n=S(e),i=m(e);if(!i)return;const o={...n,...t};k({...y(),[i]:o})},_=e=>{const t=Array.isArray(e)?e:[e],n=y(),i=t.reduce(((e,t)=>{const n=m(t);return n?{...e,[n]:{}}:e}),{});Object.keys(i).length&&k({...n,...i})};var D=const x=e=>t=>{if(!e)return;const[n,...i]=t.split(".");0!==i.length?x(e[n])(i.join(".")):delete e[n]},A=P=(e,t)=>{if(!A(e)||!A(t))return t;const n={...e};return Object.keys(t).forEach((i=>{"object"==typeof t[i]?n[i]=P(e[i]||{},t[i]):n[i]=t[i]})),n};let $=null;const I=()=>$,C=()=>{const e=I(),t=(n=["adSettings","pageInfo"],document.body&&n?((Array.isArray(n)?n:[n]).some((function(e){return i=function(e){var t=document.body.dataset[e];if(t)return D(t);var n="__".concat(e.trim().replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),"__"),i=document.getElementById(n);return i?D(i.innerHTML):null}(e),!!i})),i):null);var n,i;return e||t},L=(e,t)=>{!function n(i){if(i<=0)return void t(new Error("Ads could not get globalSettings, globalSettings not retrieved after 10 attempts"));const o=C();((e,t)=>{return!!e&&t.every((n=e,e=>{const t=e.split(".");let i=n;for(let e=0;e<t.length;e+=1){if(i&&!Object.hasOwnProperty.call(i,t[e]))return!1;i=i[t[e]]}return!0}));var n})(o,e)?t(null,o):(s.error(`globalSettings invalid, expected paths: ${e.join(", ")}`),setTimeout((,200))}(10)},z=(e,t)=>{const n=S(e);let i=n.inViewDuration||0;return n.inView&&(i+=t-n.inViewUpdated),i},T=(e,t)=>{const n=new Date,i=z(e,n);return!!i&&i>=t},q=e=>{const{slot:t,campaignId:n}=e;E(t,{loaded:!0,campaignId:n})},O=e=>{S(e.slot).loaded&&E(e.slot,(e=>{const{slot:t,inViewPercentage:n}=e,i=new Date;return{inView:n>=((null===(o=C().adRefresh)||void 0===o?void 0:o.percentageInView)||50),inViewPercentage:n,inViewUpdated:i,inViewDuration:z(t,i)};var o})(e))},j=()=>{try{var e;return JSON.parse(JSON.stringify((null===(e=window.IM)||void 0===e?void 0:e.advertising)||{}))}catch(e){return s.warn(`Unable to get Global state, \n    {error: ${e.message}}, \n    {ad-service: stitcher | debug}`),null}},M=(e,{slot:t,slots:n,...i}={})=>{const o={globalState:j(),date:(new Date).toLocaleString(),...i};n&&(o.slotIds=g(n)),t&&(o.slotId=m(t)),s.debug(e,o)},N=()=>{const e=d("prebid");return!!(null==e?void 0:e.amazonTam)},U=()=>{var e,t;return(null===(e=C())||void 0===e||null===(t=e.adRefresh)||void 0===t?void 0:t.enabled)||window.location.pathname.includes("radio-listings")||window.location.pathname.includes("tv-listings")},V=e=>{const{campaignId:t}=S(e);return!!(()=>{const{excludedOrderIds:e}=C().adRefresh||{};return e?Array.isArray(e)?e:e.split(",").map((e=>{const t=Number(e.trim());return Number.isFinite(t)?t:null})).filter((e=>e)):[]})().includes(t)&&(M("Ad slot campaign ID matches exclusion list",{slot:e}),!0)},B=e=>{const t=document.getElementById(e.getSlotElementId());return null!=(null==t?void 0:t.querySelector("#im-instream-video-con"))&&(M("Ad slot contains an in-stream video ad",{slot:e}),!0)},R=e=>!!e.getOutOfPage()&&(M("Ad slot is an out of page ad",{slot:e}),!0),F=G=e=>{const t=document.getElementById(e.getSlotElementId());return"false"===(null==t?void 0:t.dataset.adrefresh)&&(M("Ad slot has been intentionally excluded from refreshes",{slot:e}),!0)},W="refreshExclusions",X=e=>{const t=[...v(W)||[]],n=e.getSlotElementId();if(t.includes(n))return!0;const i=Object.entries({isPageExcluded:F,isSlotElementExcluded:G,isCampaignExcluded:V,isInstreamVideo:B,isOutOfPage:R}).filter(().map(();return!!i.length&&(M(`Excluding slot from ad refreshes: ${i.join(", ")}`,{slot:e}),(e=>{h(W,new Set(e))})([...t,n]),!0)},H=e=>!!Array.isArray(e)&&2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1]),J=e=>googletag.pubads().getSlots().find((),Q=({id:e,isOutOfPageSlot:t,sizes:n})=>{const i=(e=>{return t=e,Array.isArray(t)&&(H(t)||1===t.length&&"fluid"===t[0])||(e=>e.every(())(e);var t})(n),o=i?n:[0,0],r=C().unitName,a=t?googletag.defineOutOfPageSlot(r,e):googletag.defineSlot(r,o,e);if(!a)throw new Error(`Failed to define slot for element with id "${e}"`);return i||((e,t)=>{const n=googletag.sizeMapping();t.forEach((),e.defineSizeMapping(n.build())})(a,n),a},K=({id:e,sizes:t,targets:n})=>{const i=e.includes("oop"),o=((e,t)=>{const n=e||{};return t&&(n.pos=[""]),n})(n,i);if((e=>{const t=J(e);return!!t&&(M(`A slot with id ${e} is already defined`,{slot:t}),!0)})(e))return null;((t),M("Defining ad slot",{id:e,sizes:t,targets:o,isOutOfPageSlot:i});const r=Q({id:e,isOutOfPageSlot:i,sizes:t});return r.addService(googletag.pubads()).updateTargetingFromMap(o),r},Z=(...e)=>e.filter(().join("--"),Y=e=>t=>{const n=Z(e,t.key,t.index),o=((e,t,n)=>{const{adSlots:o}=i;if(o)return o[`${e}--${t}--${n}`]||o[`${e}--${t}--default`]||o[`default--${t}--${n}`]||o[`default--${t}--default`];s.error(`Cannot find config for ${e}--${t}--${n},\n      ad config file does not contain ad slots config`)})(e,t.key,t.index);return o?(t&&(null==t?void 0:t.searchTerm)&&(o.keyValuePair.kw=`${t.searchTerm}`,o.keyValuePair.st=`${t.fullSearchTerm}`),{id:n,targets:(r=o.keyValuePair,a=o.pos,l=t.key,d=t.index,{...r,pos:a?[...a.split(","),Z(l,d)]:[Z(l,d)]}),sizes:o.sizes,showDisclaimer:Boolean(null==o?void 0:o.showDisclaimer)}):(s.error(`No ad slot config found for key "${t.key}" (element id "${n}")`),null);var r,a,l,d},ee=e=>{const t=e.split("--"),n=t.shift(),i=t.pop();return{prefix:n,key:t.join("--"),index:i}},te=e=>Array.isArray(e)&&2===e.length&&e.every((),ne=e=>"fluid"===e,ie=oe=(e,t)=>e.map((e=>ie(e)?null:((e)?((e,t)=>!te(e)||e[0]<=t)(e,t)?e:null:oe(e,t))).filter((e=>null!==e&&!ie(e))),re=e=>Array.isArray(e)?Math.max(...e.map((e=>!ne(e)&&te(e)?e[1]:re(e)))):0,ae=(e,t)=>{const n=e[0],i=t[0];return(null==i?void 0:i[0])*(null==i?void 0:i[1])-(null==n?void 0:n[0])*(null==n?void 0:n[1])||(null==i?void 0:i[0])-(null==n?void 0:n[0])||(null==i?void 0:i[1])-(null==n?void 0:n[1])},le=e=>{const t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),i=e[0];return t>=i[0]&&n>=i[1]},se=(e=[])=>{var t,n;return null===(t=e.sort(ae).find(le))||void 0===t||null===(n=t[1])||void 0===n?void 0:n.filter((e=>!ne(e)))},de=async(e,t)=>{const n=(new Date).getTime();return new Promise(((i,o)=>{const r=setInterval((()=>{e()?(M(`TAM: All bids came back, Resolved after: ${new Date-n} ms`),clearInterval(r),i()):(new Date).getTime()-n>t&&(M(`TAM: All bids did not came back, ${new Date-n} ms`),clearInterval(r),o(new Error(`TAM: All bids did not came back, \n        Resolved after: ${(new Date).getTime()-n} ms`)))}),200)}))},ue={prebid:!0};N()&&(ue.aps=!0);const ce=()=>{const e=Object.keys(ue).reduce((,{});h("bids_back",e)},pe=(e,t)=>{h("bids_back",{...v("bids_back"),[e]:t})},me=async(t,n=de)=>{try{await n((()=>Object.keys(ue).every((e=>v("bids_back")[e]))),1500),M("TAM: All bidders have come back, refreshing all slots available"),ce(),googletag.pubads().refresh(t),e("bids-allbids-back")}catch(n){M("TAM: Not all bids came back from Prebid and/or TAM, refreshing anyway, check the global state to see which one"),ce(),googletag.pubads().refresh(t),e("bids-not-allbids-back")}},ge=(()=>{let e=!1;return t=>{e||(e=!0,[["auctionInit","pb_auction_init"],["auctionEnd","pb_auction_end"],["setTargeting","pb_set_targeting"],["requestBids","pb_request_bids"],["addAdUnits","pb_add_ad_units"]].forEach((([e,n])=>{t.onEvent(e,(()=>{const e={event:`pbDD_${n}`,silenceConsole:!0,forcePush:!0};s.info(e),M(`pbDD_${n}`),performance.mark(n)}))})),[["beforeBidderHttp","before_bidder_http"],["bidRequested","bid_requested"],["bidResponse","bid_response"],["bidWon","bid_won"],["bidderError","bidder_error"],["bidderDone","bidder_done"]].forEach((([e,n])=>{switch(e){case"bidderError":t.onEvent(e,(({bidderRequest:e})=>{const t={event:`pbDD_${n}`,bidder:e.bidder,silenceConsole:!0,forcePush:!0};s.error(`prebid | prebid encountered an error with a bidder, \n                ${t}`),performance.mark(`pb_${e.bidderCode.toLowerCase()}_${n}`),M(`Error: pbDD_${e.bidderCode.toLowerCase()}_${n}`)}));break;case"bidResponse":t.onEvent(e,(({bidResponse:e})=>{const t={event:`pbDD_${n}`,bidder:e.bidder,adUnitCode:e.adUnitCode,size:e.size,requestTimeStamp:e.requestTimestamp,responseTimeStamp:e.responseTimestamp,timeTakenToRespond:e.timeToRespond,cpm:e.cpm,transactionId:null==e?void 0:e.transactionId,silenceConsole:!0,forcePush:!0};M(t),performance.mark(`pb_${e.bidder.toLowerCase()}_${n}`),s.info(t)}));break;case"bidWon":t.onEvent(e,(({bidResponse:e})=>{const t={event:`pbDD_${n}`,bidder:e.bidder,adUnitCode:e.adUnitCode,size:e.size,requestTimeStamp:e.requestTimestamp,responseTimeStamp:e.responseTimestamp,timeTakenToRespond:e.timeToRespond,cpm:e.cpm,transactionId:null==e?void 0:e.transactionId,silenceConsole:!0,forcePush:!0};s.info(t),M(t)}));break;default:t.onEvent(e,(({bidderCode:e})=>{const t={event:`pbDD_${n}`,silenceConsole:!0,forcePush:!0};s.info(t),performance.mark(`pb_${e.toLowerCase()}_${n}`),M(`pb_${e.toLowerCase()}_${n}`)}))}})))}})(),fe="prebid",be=(e,t)=>(i,o=0)=>{const r=(e=>{var t,n,i,o,r,a,l;return(null===(t=e.transactionObject)||void 0===t||null===(n=t.hbDestination)||void 0===n||null===(i=n.values)||void 0===i?void 0:i.div)||(null===(o=e.transactionObject)||void 0===o?void 0:o.divId)||(null===(r=e.transactionObject)||void 0===r||null===(a=r.hbInventory)||void 0===a||null===(l=a.values)||void 0===l?void 0:l.name)})(i);var a;a=r,U()&&window.pbjs&&(window.pbjs[`adserverCalled-${a}`]=!1),window.pbjs[`adserverCalled-${r}`]||(window.pbjs[`adserverCalled-${r}`]=!0,M("Prebid: Got results",{matchObj:i}),googletag.cmd.push((()=>{var a;let l=J(r);if(!l)try{l=K(e),googletag.display(l),M("preBid: getCallback-> adslot not defined, defining here")}catch(e){return void s.error(`adslots | unable to define and register initially undefined ad slots,\n          {error: ${e.message}}`)}if(t.callbackInvoked(l),(null==i||null===(a=i.adUnit)||void 0===a?void 0:a.code)&&pbjs.setTargetingForGPTAsync([i.adUnit.code]),t.isLastCallback()&&(pe("prebid",!0),me(t.getGptSlots())),o&&t.isLastCallback()){const e={event:`pbDD_header_bidder_timeout_called_after_${o}ms`,silenceConsole:!0,forcePush:!0};s.warn(`prebid | bidder timeout, {error: ${e}}`),M(`pbDD_header_bidder_timeout_called_after_${o}ms`),M(`Header bidder timeout called after ${o}ms`),window.dispatchEvent(new Event(n))}})))},ve=n=>{const i=Array.isArray(n)?n:[n];n?(ce(),googletag.cmd.push((()=>i.map((e=>{let t=J(e.id);if(!t)try{t=K({id:e.id,sizes:e.sizes,targets:e.targets,unitName:e.unitName}),googletag.display(t)}catch(e){s.error(e)}return t})))),N()&&(n=>{var i;if(!N()||!n)return;M("TAM: requestBidsTAM initiated"),e("tam-initiated-request-bids");const o=Array.isArray(n)?n:[n];window.apstag.fetchBids({timeout:(null===(i=d("prebid"))||void 0===i?void 0:i.timeout)||1e3,slots:o.map(()},(n=>{googletag.cmd.push((()=>{window.apstag.setDisplayBids(),pe("aps",!0),e("tam-display-bids"),t("tam-fetchBids-toDisplayBids","tam-initiated-request-bids","tam-display-bids"),M("TAM: Bids are back, setting the global state of aps to true",{bids:n})}))}))})(n),(e=>{const t=Array.isArray(e)?e:[e],n=(e=>{const t=[];return{callbackInvoked:e=>{t.push(e)},isLastCallback:getGptSlots:})(t.length),i=d(fe),o=t.map((e=>({hbInventory:{type:"AUPDivID",values:{name:e.id,adUnitCode:e.id}},hbSource:{type:"auction"},hbDestination:{type:"callback",values:{callback:be(e,n)}}})));(null==i?void 0:i.active)&&(e=>{window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],s.info({event:"pbDD_calling_queue",silenceConsole:!0,forcePush:!0}),M("pbDD_calling_queue"),window.pbjs.que.push((()=>{if(s.info({event:"pbDD_queue_running",silenceConsole:!0,forcePush:!0}),M("pbDD_queue_running"),window.pbjs.ppi)ge(window.pbjs),M("Prebid: Requesting bids",{transactionObjects:e}),window.pbjs.ppi.requestBids(e),s.info({event:"pbDD_PPI_requesting_bids",silenceConsole:!0,forcePush:!0}),M("pbDD_PPI_requesting_bids"),e.forEach((e=>{var t,n,i,o;const r={event:"pbDD_individual_bid_request",source:null===(t=e.hbSource)||void 0===t?void 0:t.type,inventoryType:null===(n=e.hbInventory)||void 0===n?void 0:n.type,adUnitCode:null===(i=e.hbInventory.values)||void 0===i?void 0:i.adUnitCode,sizes:null===(o=e.hbInventory)||void 0===o?void 0:o.sizes,silenceConsole:!0,forcePush:!0};M(r),s.info(r)}));else{M("Prebid: Not requesting bids as window.pbjs.ppi is not defined");const e={event:"pbDD_Not requesting bids as window.pbjs.ppi is not defined",silenceConsole:!0,forcePush:!0};s.warn(e)}}))})(o),(e=>{const t=d(fe);let n=0;(null==t?void 0:t.active)&&(n=Number((null==t?void 0:t.timeout)||1e3)),(Number.isNaN(n)||n<0)&&s.error(new Error(`The "headerBidderTimeout" option is not a positive number: received "${null==t?void 0:t.timeout}"`)),setTimeout((()=>{e.forEach((e=>{e.hbDestination.values.callback({transactionObject:e},n)}))}),n)})(o)})(n)):M("TAM: No slots passed into `requestAllBids`")},he="refreshQueue",we=()=>[...v(he)||[]],ye=e=>{h(he,new Set(e))},ke=()=>{const e=we(),t=googletag.pubads().getSlots().filter(().filter((e=>!(e=>{var t,n;if(M("TAM: `refreshSlot` invoked"),!T(e,2500))return!1;const i=e.getSlotElementId();M("Refreshing ad slot",{slot:e}),_(e);const{key:o,index:r}=ee(i),a=Y(null===(t=C())||void 0===t||null===(n=t.targets)||void 0===n?void 0:n.subcat)({key:o,index:r});return ve(a),ye(we().filter(()),!0})(e)));ye(g(t))},Se=()=>{const e=1e3*((null===(t=C().adRefresh)||void 0===t?void 0:t.durationInView)||20)+3e3;var t;googletag.pubads().getSlots().filter((e=>!X(e))).filter(().forEach((e=>{M("Scheduled ad refresh triggered",{slot:e}),e.setTargeting("ad-refresh","true"),(e=>{if(!e)return;const t=Array.isArray(e)?e:[e],n=we(),i=t.filter(().filter(();i.length&&(M("Queuing slot(s) for refresh",{slots:e}),ye([...n,...g(i)]),ke())})(e)}))},Ee=e=>{["interactive","complete"].includes(document.readyState)?e():document.addEventListener("readystatechange",()},_e=e=>e.id.length?{id:e.id,targets:D(e.dataset.adtargets)||{},sizes:D(e.dataset.adsizes)||[],unitName:e.dataset.unitname}:(s.warn("An ad slot element is missing an id attribute"),{}),De=xe=(e,t=100)=>{let n,i,o,r,a=0;const l=()=>{r=0,a=+new Date,o=e.apply(n,i),n=null,i=null};return function(...e){n=this,i=e;const s=new Date-a;return r||(s>=t?l():r=setTimeout(l,t-s)),o}},Ae=e=>{var t;return!!(null==(t=se(e.sizes))?void 0:t.length)};let Pe=[],$e=!1;const Ie=e=>let Ce=!1;const Le=t=>()=>{Ce||(Ce=!0,((e,t)=>{(window.adq||[]).forEach(Ie(e))})(t),window.adq=((t),e("time-to-ad-queue-processed"),window.dispatchEvent(new CustomEvent("adManagerReady")))},ze={lowerBound:1,upperBound:3},Te={lowerBound:4,upperBound:6},qe={lowerBound:7},Oe=(e,{lowerBound:t,upperBound:n=null})=>n?e>=t&&e<=n:e>=t,je=(e,t)=>{const n=(e=>{var t,n;const i=null===(t=u("dai",e))||void 0===t||null===(n=t.lazyFetching)||void 0===n?void 0:n.viewport;if(i&&!Number.isNaN(i))return i/100})(e);t.forEach((e=>{((e,t)=>{const n={rootMargin:`0px 0px ${window.innerHeight*e}px 0px`},i=document.getElementById(t.id),o=new IntersectionObserver((e=>(t,n)=>{t.forEach((t=>{t.isIntersecting&&(ve(e),n.unobserve(t.target))}))})(t),n);i?o.observe(i):s.info(`No ad placeholder found for ${t.id} slot, the ad will not be displayed`)})(n,e)}))},Me=e=>{const{targets:t}=e,n={...t,pos:[...null==t?void 0:t.pos]};return n.pos.includes("dai")||n.pos.push("dai"),n},Ne=Ue=Ve=e=>({...u("dai",Ue(e)),contentType:Ue(e)}),Be="div.ad-placement",Re=(e,t)=>Ne(t.contentType)?((e,t,n)=>{const i=[],o=((e,t)=>{switch(!0){case Oe(t,ze):return e.mpu2Lvl1;case Oe(t,Te):return e.mpu2Lvl2;case Oe(t,qe):return e.mpu2Lvl3;default:return 0}})(n,t);if(0===(t||o))return i;if(i.push(e.find((e=>Number(e.dataset.count)>=o))),t>=7&&1===i.length){const t=n.mpu3+o;i.push(e.find((e=>Number(e.dataset.count)>=t&&Number(i[0].dataset.count)!==Number(e.dataset.count))))}const r=i.filter((e=>e));return i.length===e.length&&(r[0].endOfContent=!0),r})(e,("section.recipe__ingredients li",document.querySelectorAll("section.recipe__ingredients li").length),t):((e,t)=>{const n=[];let i=t.mpu3To5;return e.forEach((e=>{((e,t)=>{var n,i;return(null===(n=e.dataset)||void 0===n?void 0:n.paragraphsLeft)&&((Number(null===(i=e.dataset)||void 0===i?void 0:i.count),t)})(e,i)&&n.length<t.maxAds&&!(e=>{var t;return Number(null===(t=e.dataset)||void 0===t?void 0:t.paragraphsLeft)<=6})(e)&&(n.push(e),i+=((e,t)=>((e)?t.mpu3To5:t.mpu6Plus)(n.length,t))})),n})(e,t),Fe=e=>{googletag.cmd.push((()=>{googletag.pubads().setTargeting("kw",e.length>0?"inline":"no_inline")}))},Ge=(e,t,n)=>{Fe(t);const i=((e,t)=>e.map((e=>ie(oe(e.sizes,t))?null:{...e,sizes:oe(e.sizes,t)})).filter(())(t,window.innerWidth);return e.forEach(((e,t)=>{var o;i[t]&&((e,t,n,i)=>{if(!(e&&t&&n&&i))return;const o=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div");let l;o.setAttribute("style","\n  text-align: center; \n  font-family: Helvetica,Arial,sans-serif!important;\n  font-size: 10px!important;\n  box-shadow: none!important;\n  color: #3d3d3d;\n  height: 30px;\n  margin: auto;\n  line-height: 30px;  \n"),t.showDisclaimer&&(l=e.endOfContent?"Advertisement":(e=>(Ne(e)?"Recipe":"Article")+" continues below advert")(i),o.innerText=l,a.setAttribute("data-adtext",l)),r.setAttribute("style","\n  position: sticky;\n  top: 44px;\n  width: 300px;\n  height: fit-content;\n  background: #CCCCCC;\n  margin: auto;\n"),a.setAttribute("id",t.id),e.setAttribute("style",(e=>{const t=` \n    margin-left: -10px; \n    background: rgb(245, 245, 245); \n    padding-bottom: 30px;\n    ${e>0&&`height: ${e+30}px;`}\n  `;return De()?t.concat("\n","width: 100vw;"):t})(n)),e.appendChild(o),e.appendChild(r),r.appendChild(a)})(e,i[t],re(null===(o=i[t])||void 0===o?void 0:o.sizes),n)})),i},We={clearContext:e=>{e&&e.length?(e.forEach(x($)),0===Object.keys($).length&&($=null)):$=null},getContext:I,setContext:(e,t)=>{$?($=P($,e),t&&window.dispatchEvent(new CustomEvent(t))):$=e},addSlot:e=>{if(!e||void 0===e.key||void 0===e.index)throw new Error('Invalid data. Slot has to be an object with "key" and "index" properties');if(!(e=>!!Pe.find((t=>{var n,i;return t.key===e.key&&(null===(n=t.index)||void 0===n?void 0:n.toString())===(null===(i=e.index)||void 0===i?void 0:i.toString())})))(e)){if($e){var t,n;const i=Y(null===(t=C())||void 0===t||null===(n=t.targets)||void 0===n?void 0:n.subcat)(e);if(!i||!Ae(i))return;_(i),ve(i)}Pe.push(e)}},injectDynamicAds:()=>{const e=C(),t=Ve(e),{contentType:n,desktopEnabled:i}=t;Ne(n)||((e,t)=>{const n=[];if(e.forEach((({key:e,index:t})=>{const i=(o=`${Be}-${e}--${t}`,document.querySelector(o));var o;i&&n.push(i)})),0===n.length)return;const i=((e,t)=>e.map(Y(t)).filter((e=>e)))(e,t),o=Ge(n,i,t);je(t,o)})([{key:"inline",index:2}],n),De()||i?((e=>{const t=Object.keys(e);return!(Ne(e.contentType)&&!["mpu2Lvl1","mpu2Lvl2","mpu2Lvl3","mpu3"].every((e=>t.includes(e)))||!Ne(e.contentType)&&!["mpu3To5","mpu6Plus"].every((e=>t.includes(e))))})(t)&&((e,t)=>{if(0===e.length)return void Fe([]);const n=((e,t)=>((e,t)=>new Array(e).fill({key:t}).map(((e,n)=>({key:t,index:n+5}))))(t,"inline").map(Y(e)).filter(().map(())(t,e.length),i=Ge(e,n,t);je(t,i)})((e=>{return Re((t=Be,[...document.querySelectorAll(t)].filter(()),e);var t})(t),n),Fe([])):Fe([])},version:;We.ready=Le(We);const Xe=(e,t,n)=>e?Object.keys(e).reduce(((i,o)=>n?[...i,`${e[o][t]}`]:[...i,`${o}-${e[o][t]}`]),[]).join(","):null,He="Limit reached",Je="limit-marker",Qe="post__content",Ke="editor-content",Ze=`.${Qe} > .${Ke} > p`,Ye="brightcove",et="blocking-element",tt="media-player",nt="ad-placement",it="ad-slot",ot=[`.${it}`],rt=["ul","ol",`.${tt}`,".highlight-box",`.${Ye}`,".oembed--iframe"],at=lt=(e,t)=>Boolean([...t].map((t=>e.contains(t))).find(()),st=e=>Boolean(e.children.length&&[...e.children].find((e=>"IFRAME"===e.tagName))),dt=ut=e=>{const t=[...document.querySelector(`.${Qe}`).children].filter((e=>[...e.classList].includes(Ke))),n=t.indexOf(e.parentNode);return t[n+1]},ct=e=>t=>{if(!e.nextElementSibling){const n=[...document.querySelector(`.${Qe}`).children].filter((e=>[...e.classList].includes(Ke))),i=n.indexOf(e.parentNode),o=n[i+1];return t===(null==o?void 0:o.children[0])}if(dt(e)){if(!e.nextElementSibling.nextElementSibling){const n=ut(e);return t===(null==n?void 0:n.children[0])}return t===e.nextElementSibling.nextElementSibling}return t===e.nextElementSibling},pt=/(<[^>]+>)/g,mt=(e,t)=>{const n=(e=>e.previousElementSibling?e.previousElementSibling.className===nt?e.previousElementSibling.previousElementSibling:e.previousElementSibling:null)(e);return e.previousElementSibling?lt(n,t):lt((e=>{const t=[...document.querySelector(`.${Qe}`).children].filter((e=>[...e.classList].includes(Ke))),n=t.indexOf(e.parentNode),i=[...t[n-1].children].filter(();return i[i.length-1]})(e),t)},gt=e=>t=>((e,t)=>((e)&&mt(e,t))(t,e)||((e,t)=>(e=>st(e)||[...e.classList].includes(tt)||[...e.classList].includes(Ye))(e)&&mt(e,t))(t,e),ft=bt=e=>e.map(().join(),vt=e=>[...document.querySelectorAll(bt(ot))].filter((e=>t=>((e,t)=>(e=>[...e.classList].includes(it))(e)&&mt(e,t))(t,e))(e)),ht=e=>"P"===e.previousSibling.tagName?e.previousSibling:ht(e.previousSibling),wt=e=>{if("recipe"===e)return[...document.querySelector(".recipe__method-steps").querySelectorAll("p, .heading-6")].slice(0,-1);const t=[...document.querySelectorAll("[id*='--inline--']")].pop();if(t){const e=[...document.querySelectorAll(Ze)].slice(1),n=ht(t.parentElement.parentElement),i=e.indexOf(n)-5;return e.slice(0,i>0?i:0)}return[...document.querySelectorAll(Ze)].slice(1,-1)},yt="\n  color: rgb(51, 51, 51);\n  opacity: 0.9;\n  border-radius: 5px;\n  font-size: 16px;\n  font-weight: bold;\n",kt=`\n  background-color: gold;\n  position: fixed;\n  top: 10px;\n  right: 10px;\n  z-index: 999;\n  padding: 15px;\n  pointer-events: none;\n  ${yt}\n`,St=e=>{const t=(()=>{const e=document.createElement("div");return e.setAttribute("id","stitch-global-settings"),e.setAttribute("style",kt),e})();let n="";e.forEach((),t.innerHTML=n,document.getElementById("__next").appendChild(t)},Et=`\n  display: block;\n  background-color: lightgreen;\n  padding: 0 10px;\n  width: 100%;\n  margin: 0;\n  ${yt}\n`,_t=(e,t,n,i)=>{[...e].forEach((e=>{const o=[...t].find(ct(e));if(!lt(e,i)||o)return;const r=(()=>{const e=document.createElement("span");return e.innerText="Ad slot",e.setAttribute("style",Et),e.classList.add("ad-slot-marker"),e})();if(![...n].find(ct(e)))return void e.after(r);if(dt(e))return void e.nextElementSibling.nextElementSibling.after(r);const a=!e.nextElementSibling,l=ut(e);a&&l?l.children[0].after(r):e.nextElementSibling.after(r)}))},Dt=`<span style="\n  position: absolute; \n  background-color: gold; \n  pointer-events: none; \n  padding: 0 10px; \n  text-align: center; \n  width: 128px; \n  margin: 0; \n  z-index: 2;\n  ${yt}\n" class=${Je}>${He}</span>`,xt=(e,t)=>{const{innerHTML:n}=e,i=n.split(pt);let o=0;i.forEach(((e,n)=>{(e=>pt.test(e))(e)||((e)||[...e].forEach(((e,r)=>{o===t-1&&(i[n]=i[n].slice(0,r+1)+Dt+i[n].slice(r+1)),o+=1}))}));const r=i.reduce(();e.parentNode.setAttribute("style","position: relative;"),e.innerHTML=r,e.setAttribute("style","margin-bottom: 0px")},At=e=>{document.querySelectorAll(`.${et}`).forEach((),e.forEach((e=>{const t=document.createElement("div");var n;t.classList.add(et),t.setAttribute("style",`\n  position: absolute;\n  display: block;\n  height: ${(n=e).offsetHeight}px;\n  width: 100%;\n  background-color: tomato;\n  top: ${n.offsetTop}px;\n  left: ${n.offsetLeft}px;\n  padding: 15px;\n  z-index: 1;\n  pointer-events: none;\n  margin: 0;\n  ${yt}\n`),t.textContent="Blocking element",e.parentNode.setAttribute("style","position: relative;"),e.parentNode.appendChild(t)}))},Pt=({charLimits:e,adsNumber:t})=>{St([{label:"MPU 3-5 char limit",value:e.mpu3To5},{label:"MPU 6+ char limit",value:e.mpu6Plus},{label:"Ads number limit",value:t}]);const n=wt("longForm");((e,t,n,i)=>{let o=n,r=0,a=0;[...e].every((e=>{const n=at(e),l=o-r;if(n<l)return r+=n,!0;if(n>=l){const l=((e,t,n)=>Math.floor((e+t)/n))(n,r,o);if(((e,t,n,i)=>{for(let o=0;o<e;o+=1)xt(t,n+(n*o-i))})(l,e,o,r),a+=1,a===t)return!1;r=n-(l*o-r),4===a&&(o=i)}return!0}))})(n,t,e.mpu3To5,e.mpu6Plus);const i=ft(),o=vt(i),r=(e=>[...document.querySelectorAll(bt(rt)),...[...document.querySelectorAll("p")].filter(()].filter(gt(e)))(i);_t(n,o,r,i),At([...o,...r]),window.onresize=xe((()=>{At([...o,...r])}),200)},$t=e=>{const t="dfp-ad";return e.tagName?e.classList.contains(t)?[e]:e.firstElementChild?[...e.getElementsByClassName(t)]:[]:[]},It=["targets.subcat"];window.googletag=window.googletag||{cmd:[]},window.pbjs=window.pbjs||{que:[]},e("time-to-ad-manager-loaded"),(()=>{if(!N())return;M("TAM: Amazon TAM Enabled, adding script to page");const e=window.apstag=window.apstag||{init(...t){e("i",t)},fetchBidssetDisplayBidstargetingKeys:_Q:[]};const t={adServer:"googletag",bidTimeout:2e3,gdpr:{cmpTimeout:8e3},params:{},pubID:"3331",deals:!0};"function"==typeof window.__uspapi?window.__uspapi("getUSPData",1,((e,n)=>{n&&(t.params.us_privacy=e.uspString),window.apstag.init(t,(()=>{M("TAM: Amazon UAM initialized, USPAPI")}))})):window.apstag.init(t,(()=>{M("TAM: Amazon UAM initialized, not USPAPI")}))})(),M("Ad manager loaded");const Ct=n=>{googletag.cmd.push((()=>{var i;(e=>{const t=[];if(null==e?void 0:e.sentiment){const n=`sentiment-${e.sentiment}`;t.push(n)}if(null==e?void 0:e.emotion){const n=Xe(e.emotion,"level",!1);t.push(n)}if(null==e?void 0:e.ratings){const i=(n=e.ratings)?Object.keys(n).reduce(((e,t)=>[...e,`${n[t].customer}-${n[t].rating}`]),[]).join(","):null;t.push(i)}var n;googletag.cmd.push((()=>{t.length&&googletag.pubads().setTargeting("mantis",t)})),(null==e?void 0:e.categories.mantis)&&googletag.pubads().setTargeting("mantis_context",Xe(e.categories.mantis,"label",!0))})(null==n?void 0:n.mantis),(()=>{const e=d("lazyRendering");if(M("Lazy loading settings:",{lazyLoading:e}),null==e?void 0:e.enabled)try{googletag.pubads().enableLazyLoad(e)}catch(e){googletag.pubads().collapseEmptyDivs(),s.error(`Lazy Loading was not enabled or it did not load, \n      {error: ${e.message}}, \n      {key}: permutive | identityGUIDs}`)}else googletag.pubads().collapseEmptyDivs()})(),(e=>{googletag.pubads().setTargeting("deviceType",((e={desktop:970,tablet:768,mobile:0})=>{const t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);return Object.keys(e).find(()})()),(null==e?void 0:e.targets)&&Object.entries(null==e?void 0:e.targets).forEach((([e,t])=>{googletag.pubads().setTargeting(e,t)}))})(n),h("bid_providers",ue),ce(),googletag.enableServices(),(()=>{let n=null,i=0;const o=[],r={},a=l=e=>{r[e]=r[e]?r[e]+1:1};googletag.pubads().addEventListener("slotRequested",(e=>{l(e.slot.getSlotElementId()),n||(n=e.slot.getSlotElementId(),a("time-to-first-ad-request"),t("ad-manager-load-to-first-ad-request","time-to-ad-manager-loaded","time-to-first-ad-request"),p()&&t("cmp-to-first-ad-request","time-to-cmp","time-to-first-ad-request"))})),googletag.pubads().addEventListener("slotResponseReceived",(e=>{const i=e.slot.getSlotElementId();null!==e.slot.getResponseInformation()?l(i):delete r[i],n===i&&(a("ad-response-time-end"),t("ad-response-time","time-to-first-ad-request"))})),googletag.pubads().addEventListener("slotOnload",(e=>{const s=e.slot.getSlotElementId(),d=Object.keys(r).length;var u;a("time-to-first-ad-display"),p()&&(u="cmp-to-first-ad-display",o.includes(u)||(o.push(u),t(u,"time-to-cmp","time-to-first-ad-display"))),i<d&&(a(`time-to-render-${s}`),i+=1),((e,t)=>i===t&&2===r[e])(s,d)&&(a("time-to-last-ad-render"),t("ads-rendering-time","ad-response-time-end"),l(s),(e=>{const t=document.querySelectorAll("\n  #ad-post-mpu-top-mobile > div > iframe,\n  #ad-post-mpu-teads > div > iframe,\n  #ad-post-mpu-bottom-mobile > div > iframe\n  ").length;window.LUX.addData("injected-ad-count",t),window.LUX.addData("ad-count",e)})(i)),n===s&&(a("ad-render-time-end"),t("ad-render-time","ad-response-time-end"),t("ad-display-time","time-to-first-ad-request"))})),googletag.pubads().addEventListener("impressionViewable",()})(),c(n),_(googletag.pubads().getSlots()),googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotRenderEnded",q),googletag.pubads().addEventListener("slotVisibilityChanged",O)})),setInterval(ke,200),(()=>{if(!U())return;const e=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get);window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){s.warn(`Passive events not supported, {error: ${e.message}}`)}return e})()?{passive:!0}:{},t=xe(Se),n=xe(t,200);document.addEventListener("scroll",n,e),M("Scheduled ad refresh is running")})();const o=null===(i=n.targets)||void 0===i?void 0:i.channel;var r;(()=>{const e=new MutationObserver((e=>{const t=new Set;for(const{removedNodes:n}of e)for(const e of n)$t(e).forEach(();[...t].forEach((e=>{const t=J(e.id);if(t){var n;M("Destroying ad slot that was removed from the DOM",{slot:t});const{key:i,index:o}=ee(e.id);(e=>{Pe=Pe.filter((t=>{var n,i;return!(t.key===e.key&&(null===(n=t.index)||void 0===n?void 0:n.toString())===(null===(i=e.index)||void 0===i?void 0:i.toString()))}))})({key:i,index:o}),googletag.destroySlots([t]),(null===(n=window.pbjs)||void 0===n?void 0:n[`adserverCalled-${e.id}`])&&(window.pbjs[`adserverCalled-${e.id}`]=!1)}}))})),t=document.body;e.observe(t,{attributes:!0,childList:!0,subtree:!0})})(),r=window.location.search,/[?&]stitch_debug=true/.test(r)&&(M("Debug mode enabled"),o||s.error("Stitch debug could not be loaded"),"recipes"===o?(e=>{const t=((e,t)=>{const{mpu2Lvl1:n,mpu2Lvl2:i,mpu2Lvl3:o,mpu3:r}=t;let a,l;return e<=3&&(a=n),e>=4&&e<=6&&(a=i),e>=7&&(a=o,l=o+r),{mpu2CharLimit:a,...l&&{mpu3CharLimit:l}}})(document.querySelector(".recipe__ingredients").querySelectorAll("li").length,e.charLimits),n=wt("recipe");St([{label:"MPU2 char limit",value:t.mpu2CharLimit},{label:"MPU3 char limit",value:t.mpu3CharLimit||"N.A."}]),((e,t)=>{let n=e.mpu2CharLimit,i=0;[...t].every((t=>{const o=at(t);if(n<=o){const r=n;if(xt(t,r),n=e.mpu3CharLimit,i+=1,2===i)return!1;const a=o-r;if(n<=a)return xt(t,n+r),!1;n-=a}else n>o&&(n-=o);return!0}))})(t,n);const i=ft();_t(n,[],[],i)})({charLimits:Ve(n)}):o&&"recipes"!==o&&Pt({charLimits:Ve(n),adsNumber:Ve(n).maxAds}))}))},Lt=e=>{const t=[...document.querySelectorAll(".dfp-ad")].map(_e);return[...Pe.map(Y(e)),...t]},zt=()=>{e("time-to-consentWrapped"),Ee((()=>{e("time-to-consentWrapped-onInteractive"),googletag.cmd.push((()=>{(()=>{if(window.permutive&&!googletag.pubads().getTargeting("permutive").length){const e=localStorage.getItem("_pdfps")||"";googletag.pubads().setTargeting("permutive",e?JSON.parse(e):[])}})()})),L(It,((t,n)=>{if(e("time-to-consentWrapped-onInteractive-awaitGlobalSettings"),t)return void s.error(`consentWrapped: Required Global Settings could not be found, \n        {error: ${t.message}}`);const i=n.targets.subcat,o=(e=>Lt(e).filter((e=>{var t;return null==e||null===(t=e.sizes)||void 0===t?void 0:t.length})).filter(Ae))(i);(e=>{e.filter(().forEach((e=>{if(Ae(e))return;const t=document.getElementById(e.id);t&&(t.style.display="none")}))})(Lt(i)),ve(o),((e=!0)=>{$e=e})(),(async()=>{try{(e=>{const t=((e,t)=>e?e.replace("pif_",""):null)(null==e?void 0:e.permutive_identityframework_id);if(!t)return s.warn("sendPermutiveID did not run, no GUID provided"),null;if("undefined"!=typeof window){const e=JSON.parse(window.localStorage.getItem("permutive-data-misc"));if(null==e?void 0:e.identities["p-guid"])return s.info("sendPermutiveID did not run, p-guid is already in localStorage"),null}window.permutive.identify([{id:t,tag:"p-guid",priority:0}])})(await(e="identityGUIDS",e?new Promise(((t,n)=>{const i=()=>{try{t(I()[e])}catch(e){s.warn(`retrieveContextKey was not retrieved,\n          error: ${e.message},\n          ad-service: permutive | identityGUIDs`),n(e)}finally{window.removeEventListener(e,i)}};window.addEventListener(e,i)})):Promise.reject(new Error("retrieveContextKey failed - no key provided"))))}catch(e){throw s.error(`permutive | unable to retrieve key from adManager for identityGUID, \n    {error: ${e.message}},\n    {key}: permutive | identityGUIDs}`),new Error(`identityGUIDS failed - ${e}`)}var e})()}))}))};var Tt,qt,Ot,jt;Ee(Le(We)),(null===(Tt=window)||void 0===Tt||null===(qt=Tt.IM)||void 0===qt||null===(Ot=qt.advertising)||void 0===Ot?void 0:Ot.init)?M("Ad package is already initialised, exiting..."):(h("init",!0),e("time-to-ad-manager-started"),googletag.cmd.push((()=>{e("time-to-gpt-started"),p()&&t("cmp-to-gpt-started","time-to-cmp","time-to-gpt-started"),googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest(),googletag.pubads().enableAsyncRendering(),Ee((()=>{e("time-to-gpt-onInteractive"),L(It,((t,n)=>{e("time-to-gpt-onInteractive-awaitGlobalSettings"),t?s.error(`onInteractive: Required Global Settings could not be found', \n          {error: ${t.message}}`):Ct(n)}))}))})),e("time-to-init-waitForConsent"),jt=()=>{var e,t;(e=>{try{var t,n;const i=Object.keys(localStorage).find((),o=JSON.parse(localStorage.getItem(i));if(!0===(null==o||null===(t=o.gdpr)||void 0===t||null===(n=t.consentStatus)||void 0===n?void 0:n.hasConsentData)){if(googletag.cmd.push((()=>{googletag.pubads().setPrivacySettings({nonPersonalizedAds:!e})})),void 0===window.pbjs||"function"!=typeof window.pbjs.setConfig)return void s.error("PreBid: pbDD_window.pbjs not correctly defined");window.pbjs.setConfig({deviceAccess:e}),!0===e?performance.mark("Consent given, will show personalised Ads"):performance.mark("Consent is withheld, will show non-personalised Ads"),zt()}}catch(e){s.info("Consent based ads | Error in retrieving value from SourcePoint, unable to determine"),zt()}})((e=[1,2,3,4,7,9,10],window.performance.mark("time-to-checkPurposes-init"),window.__tcfapi("getTCData",2,(function(n,i){if(i){var o=n.purpose.consents;t=e.every((),window.performance.mark("time-to-checkPurposes-getTCData"),window.performance.measure("time-to-checkPurposes-init","time-to-checkPurposes-getTCData")}})),t?(window.performance.mark("time-to-checkPurposes-returned"),window.performance.measure("time-to-checkPurposes-init","time-to-checkPurposes-returned"),!0):(window.performance.mark("time-to-checkPurposes-returned"),window.performance.measure("time-to-checkPurposes-init","time-to-checkPurposes-returned"),!1)))},window.performance.mark("time-to-waitForConsentChange-init"),window.__tcfapi("addEventListener",2,(function(){jt(),window.performance.mark("time-to-waitForConsentChange-callback"),window.performance.measure("time-to-waitForConsentChange-init","time-to-waitForConsentChange-callback")})))})();
//# sourceMappingURL=adManager-dc5458035f933a401e55.js.map