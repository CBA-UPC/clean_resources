var websdk=[function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(67),msgStyle=__webpack_require__(14),chatInputStyle=__webpack_require__(102),MODE=window.__WEB_SDK_CONF__&&window.__WEB_SDK_CONF__.ENV.MODE,BASE_URL="";exports.BASE_URL=BASE_URL,exports.BASE_URL=BASE_URL="pre"===MODE?"https://precb2.wul.ai":"dev"===MODE?"https://testcb2.wul.ai":"test"===MODE?"https://newtestcb2.wul.ai":"https://cb2.wul.ai";exports.STREAM_LISTEN={SEND_MSG:"SEND_MSG",IS_SHOW_SUGLIST:"IS_SHOW_SUGLIST",ERROR_TIPS:"ERROR_TIPS",IMG_URL:"IMG_URL",IS_SHOW_LOADING_MSG:"IS_SHOW_LOADING_MSG",RECONNECT_RONGCOULD:"RECONNECT_RONGCOULD",TOAST:"TOAST",MESSAGE:"MESSAGE",IS_SHOW_RT_TIPS:"IS_SHOW_RT_TIPS"};var AVATAR_SHAPE={0:msgStyle.circle,1:msgStyle.square};exports.AVATAR_SHAPE=AVATAR_SHAPE;var HEADER_AVATAR_SHAPE={0:style.circle,1:style.square};exports.HEADER_AVATAR_SHAPE=HEADER_AVATAR_SHAPE;var FRAME_SHAPE={0:style.boderSquare,1:style.borderCircle};exports.FRAME_SHAPE=FRAME_SHAPE;var TEXTAREA_SHAPE={0:chatInputStyle.boderSquare,1:chatInputStyle.borderCircle};exports.TEXTAREA_SHAPE=TEXTAREA_SHAPE;var CHAT_BAR={0:msgStyle.bubbleDrip,1:msgStyle.bubbleCapsule,2:msgStyle.bubbleSquare};exports.CHAT_BAR=CHAT_BAR;exports.MSG_DIRECTION={user:"FROM_USER",staff:"TO_USER"};exports.TRACK_DIRECTION={user:"1",staff:"0"};exports.BACKGROUND_COLOR=["#ffd500"];exports.EXT_COLOR={"default":"#b3bdc5",doc:"#003bcb",docx:"#003bcb",jpg:"#333",jpeg:"#333",gif:"#333",png:"#333",pdf:"#d91d06",ppt:"#eceef0",pptx:"#E05635",txt:"#1778ff",xls:"#009056",xlsx:"#009056",mp4:"#ffb500",amr:"#41b313",csv:"#7715d2"}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(120),__webpack_require__(138),__webpack_require__(173),__webpack_require__(185),__webpack_require__(188);var event_1=__webpack_require__(207),store_1=__webpack_require__(101),util_1=__webpack_require__(63),parser_1=__webpack_require__(211);unction.prototype.name===undefined&&Object.defineProperty(Function.prototype,"name",{get:),exports.createVNode=createVNode,exports.findVNode=var Component=function(_super){function Component(opts){var _this=_super.call(this)||this;_this.refs={},_this.subs=[],_this.uid=util_1.generateUid();var el=opts.el,_a=opts.className,className=void 0===_a?"":_a,node=_this.node=createVNode('<div class="root-elem '+className+'" c-id="'+_this.uid+'"></div>'),store=_this.store=store_1["default"](Object.assign({},_this["static"].data,opts.data));return _this.data=store.getData(),_this.parser=new parser_1["default"](_this["static"].template,_this.data),_this._update=_this._update.bind(_this),Component.vnodes.push(_this),Promise.resolve(_this.create()).then((function(){store.addCallback(_this._update),_this._render(),el&&document.querySelector(el).appendChild(node),_this._process(),_this.mount()}))["catch"]((function(e){return _this.catchError(e)})),_this}return __extends(Component,_super),Object.defineProperty(Component.prototype,"static",{get:enumerable:!0,configurable:!0}),Component.prototype.create=function(){},Component.prototype.useEvents=function(){event_1.delegate(this)},Component.prototype.mount=function(){},Component.prototype.unMount=function(){},Component.prototype._render=function(diff){var parser=this.parser,node=this.getNode();if(diff){var items=parser.getDiff();this._renderPatch(items)}else parser.compile(node)},Component.prototype._process=function(){var _this=this,parser=this.parser,components=this["static"].components;parser.items.forEach((function(item){var SubClass=components.find(();if(SubClass){var data=item.data||{},extra=util_1.omit(item,["data","class","sel","name","ref"]),sub=new SubClass({data:Object.assign(data,extra),className:item["class"]});_this.addSub(sub,{ref:item.ref,sel:item.sel,replace:!0})}}))},Component.prototype._update=function(key,newVal,oldVal){"message"===key&&newVal.reduce?this._render(!0):(this.removeSubs(),this._render(),this._process()),this.update(key,newVal,oldVal)},Component.prototype._renderPatch=Component.prototype.update=function(key,newVal,oldVal){},Component.prototype.getNode=function(){return this.node},Component.prototype.addSub=function(sub,opts){var ref=opts.ref,sel=opts.sel,replace=opts.replace,node=this.getNode(),refs=this.refs,target=sel?node.querySelector(sel):node;ref&&(refs[ref]=sub),replace?(target.insertAdjacentElement("afterend",sub.getNode()),target.parentNode.removeChild(target)):opts.opps?target.insertAdjacentElement("afterbegin",sub.getNode()):target.appendChild(sub.getNode()),this.subs.push(sub)},Component.prototype.removeSub=function(sub){this.subs=this.subs.filter((),sub.dispose()},Component.prototype.removeSubs=Component.prototype.dispose=function(){try{this.store.removeCallback(this._update),this.subs.map((function(sub){return sub.dispose})),this.getNode().innerHTML="",this.clearEvents(),this.unMount()}catch(e){this.catchError(e)}},Component.prototype.catchError=function(e){console.error(e)},Component.vnodes=[],Component}(event_1.AbstractCEvent);exports["default"]=Component},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var messageList,event=(messageList={},{listen:trigger:function(){var key=Array.prototype.shift.call(arguments),fns=messageList[key];if(!fns||0===fns.length)return!1;for(var fn,i=0;fn=fns[i++];)fn.apply(this,arguments)},remove:function(key,fn){var fns=messageList[key];if(!fns)return!1;if(fn)for(var l=fns.length-1;l>=0;l--)fns[l]===fn&&fns.splice(l,1);else fns&&(fns.length=0)}});exports["default"]=event},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var version="v"+__webpack_require__(214).version,storage=null;try{storage=window.localStorage}catch(err){storage=null}unction loadScript(opt,removed){var script=document.createElement("script");script.type="text/javascript",opt.charset&&(script.charset=opt.charset),opt.crossOrigin&&(script.crossOrigin=opt.crossOrigin),opt.async&&(script.async=!0);var done=!1;return new Promise((function(resolve){var head=document.getElementsByTagName("head")[0]||document.documentElement;script.onload=script.onreadystatechange=function(){done||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(done=!0,resolve(!0),script.onload=script.onreadystatechange=function(){return null},removed&&head&&script.parentNode&&head.removeChild(script))},script.src=opt.url,head.insertBefore(script,head.firstChild)}))}function isWeChat(){return"undefined"!=typeof window.WeixinJSBridge}exports.getUserInfo=function(){if("undefined"!=typeof window){if(storage){var result=JSON.parse(storage.getItem("SDK_USER_INFO")),pubkey=storage.getItem("SDK_PUBKEY");if(result){var info=result[pubkey];if(info)return __assign({},info,{version:version,source:"WEB_SDK"})}}return{userId:window.__USERID__,pubkey:window.__USER_PUBKEY__,version:version,source:"WEB_SDK"}}},exports.prefixUrl=function(url){return url&&0!==url.indexOf("http")?"http://"+url:url},exports.isBelowIE9=function(){return"Microsoft Internet Explorer"==navigator.appName&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<=9},exports.zeroPad=zeroPad,exports.isOnline=function(){if("undefined"!=typeof navigator)return!navigator.onLine},exports.loadScript=loadScript,exports.scrollToBottom=function(content,useAnim){if(void 0===useAnim&&(useAnim=!1),!window.requestAnimationFrame){for(var lastTime_1=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame=if(!useAnim)return requestAnimationFrame((function(){var scrollHeight=content.scrollHeight,clientHeight=content.clientHeight;content.scrollTop=scrollHeight-clientHeight}));var dis=content.scrollHeight-content.clientHeight,anim=function(){content.scrollTop+=1,--dis>=0&&requestAnimationFrame(anim)};requestAnimationFrame(anim)},exports.getUrlQuery=function(){var args={};return-1===location.hostname.indexOf("im.wulaibot.com")&&-1===location.hostname.indexOf("im.wul.ai")||location.search.substring(1).split("&").forEach((function(item){var pos=item.indexOf("=");if(-1!==pos){var name_1=item.substring(0,pos),value=item.substring(pos+1);args[name_1]=value}})),args},exports.throttle=function(fn,threshold,scope){var last,deferTimer;return void 0===threshold&&(threshold=250),void 0===scope&&(scope=null),function(){var now=Date.now(),args=arguments,context=scope||this;last&&now<last+threshold?(clearTimeout(deferTimer),deferTimer=setTimeout((,threshold)):(last=now,fn.apply(context,args))}},exports.debounce=function(fn,delay){void 0===delay&&(delay=300);var timer=null;return function(){clearTimeout(timer),timer=setTimeout((,delay)}},exports.getTimeByTimestamp=function(time){var tempTime,newDate=new Date;if(10===(""+time).length)tempTime=1e3*time;else{if(13!==(""+time).length)return"";tempTime=time}newDate.setTime(tempTime);var startDate=new Date(newDate.toString()),year=startDate.getFullYear(),month=zeroPad(startDate.getMonth()+1),day=zeroPad(startDate.getDate()),hour=zeroPad(startDate.getHours()),minute=zeroPad(startDate.getMinutes());return new Date(tempTime).toDateString()===(new Date).toDateString()?hour+":"+minute:year+"-"+month+"-"+day+" "+hour+":"+minute},exports.loadRongCloud=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return"undefined"==typeof window.require?[3,1]:(window.require.config({paths:{RongIMLib:"https://cdn.ronghub.com/RongIMLib-2.5.5.min",RongEmoji:"https://cdn.ronghub.com/RongEmoji-2.2.7.min",protobuf:"https://cdn.ronghub.com/protobuf-2.3.5.min"},shim:{protobuf:{deps:["RongIMLib"]},RongEmoji:{deps:["RongIMLib"]}}}),[2,new Promise((function(resolve,reject){window.require(["RongIMLib","RongEmoji","protobuf"],(function(RongIMLib,RongEmoji,protobuf){window.RongIMLib=RongIMLib,window.RongIMLib.RongIMClient.Protobuf=window.RongIMLib.RongIMClient.Protobuf||protobuf,window.RongIMLib.RongIMEmoji=RongEmoji,resolve(RongIMLib)})),window.require.onError=function(err){reject(err)}}))]);case 1:return[4,loadScript({url:"https://cdn.ronghub.com/RongIMLib-2.5.5.min.js"})];case 2:return _a.sent(),[4,loadScript({url:"https://cdn.ronghub.com/RongEmoji-2.2.7.min.js"})];case 3:return _a.sent(),[2,window.RongIMLib]}}))}))},exports.loadNunjucks=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return"undefined"==typeof window.require?[3,1]:(window.require.config({paths:{nunjucks:"https://saas-frontend.oss-cn-beijing.aliyuncs.com/nunjucks-1.0.1.min",es5Shim:"https://cdn.wul.ai/es5-shim.min",es5Sham:"https://cdn.wul.ai/es5-sham.min"}}),[2,new Promise((function(resolve,reject){window.require(["nunjucks","es5Shim","es5Sham"],(function(nunjucks){window.nunjucks=nunjucks,resolve(nunjucks)})),window.require.onError=function(err){reject(err)}}))]);case 1:return loadScript({url:"https://cdn.wul.ai/es5-shim.min.js"}),loadScript({url:"https://cdn.wul.ai/es5-sham.min.js"}),[4,loadScript({url:"https://cdn.wul.ai/nunjucks-1.0.1.min.js"})];case 2:return _a.sent(),[2,window.nunjucks]}}))}))},exports.loadAliOSS=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return"undefined"==typeof window.require?[3,1]:(window.require.config({paths:{oss:"https://gosspublic.alicdn.com/aliyun-oss-sdk.min"}}),[2,new Promise((function(resolve,reject){window.require(["oss"],(),window.require.onError=))]);case 1:return[4,loadScript({url:"https://gosspublic.alicdn.com/aliyun-oss-sdk.min.js"})];case 2:return _a.sent(),[2,window.OSS]}}))}))},exports.isWeChat=isWeChat,exports.closeWindow=function(){isWeChat()&&window.WeixinJSBridge&&window.WeixinJSBridge.invoke("closeWindow")}},function(module,exports,__webpack_require__){var content=__webpack_require__(212);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0};options.insertInto=undefined;__webpack_require__(25)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)},function(module,exports,__webpack_require__){var UNSCOPABLES=__webpack_require__(5)("unscopables"),create=__webpack_require__(51),hide=__webpack_require__(19),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==undefined&&hide(ArrayPrototype,UNSCOPABLES,create(null)),module.exports=,function(module,exports,__webpack_require__){var fn,memo,stylesInDom={},isOldIE=(fn=,getTarget=getElement=function(fn){var memo={};return function(target,parent){if("function"==typeof target)return target();if("undefined"==typeof memo[target]){var styleTarget=getTarget.call(this,target,parent);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(117);tion createStyleElement(options){var style=document.createElement("style");if(options.attrs.type===undefined&&(options.attrs.type="text/css"),options.attrs.nonce===undefined){var nonce=);nonce&&(options.attrs.nonce=nonce)}return addAttrs(style,options.attrs),insertStyleElement(options,style),style}unction addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result="function"==typeof options.transform?options.transform(obj.css):options.transform["default"](obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=function(options){var link=document.createElement("link");return options.attrs.type===undefined&&(options.attrs.type="text/css"),options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}(options),update=updateLink.bind(null,style,options),remove=:(style=createStyleElement(options),update=applyToTag.bind(null,style),remove=;return update(obj),module.exports=var textStore,replaceText=(textStore=[],;nction updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=options.convertToAbsoluteUrls===undefined&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css)),sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var config_1=__webpack_require__(1),utils_1=__webpack_require__(9),message=[];function createMsg(body,type){return{user_id:utils_1.getUserInfo().userId,msg_body:body,msg_type:type}}exports.createTextMsg=function(text){return createMsg({text:{content:text}},"TEXT")},exports.createImageMsg=function(url,thumbUrl){return void 0===thumbUrl&&(thumbUrl=""),createMsg({image:{resource_url:url,thumbUrl:thumbUrl}},"IMAGE")},exports.createEventMsg=function(eventType){return createMsg({event:{event_type:eventType}},"EVENT")},exports.createNoticeMsg=exports.createMsg=createMsg,exports.sendRtMessage=function(msgBody,msgType,isUserSend,direction){void 0===direction&&(direction=config_1.MSG_DIRECTION.user);var msg={msg_body:msgBody,msg_type:msgType,direction:direction,extra:"",msg_id:"",msg_ts:"",sender_info:{avatar_url:"",nickname:"",real_name:""},user_info:{avatar_url:"",nickname:""},isUserSend:isUserSend};return message.push(msg),message},exports.reRongMsgInfo=function(msgBody){var msg={msg_body:msgBody.msg_body,direction:config_1.MSG_DIRECTION.staff,extra:msgBody.msg_body.extra,msg_id:msgBody.msg_id,msg_ts:msgBody.msg_ts,msg_type:msgBody.msg_type,sender_info:msgBody.sender_info,user_info:{avatar_url:"",nickname:""},quick_reply:msgBody.quick_reply,similar_response:msgBody.similar_response,from:"rongCloud",user_id:msgBody.user_id,enable_evaluate:msgBody.enable_evaluate||!1,bot:msgBody.bot};return message.push(msg),message}},function(module,exports,__webpack_require__){var global=__webpack_require__(3),setGlobal=__webpack_require__(57),store=global["__core-js_shared__"]||setGlobal("__core-js_shared__",{});(module.exports=("versions",[]).push({version:"3.0.0",mode:__webpack_require__(37)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var content=__webpack_require__(246);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0};options.insertInto=undefined;__webpack_require__(25)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){var anObject=__webpack_require__(4),defineProperties=__webpack_require__(124),enumBugKeys=__webpack_require__(61),html=__webpack_require__(74),documentCreateElement=__webpack_require__(56),IE_PROTO=__webpack_require__(48)("IE_PROTO"),Empty=function(){},createDict;module.exports=Object.create|,__webpack_require__(49)[IE_PROTO]=!0},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(216);var stream_1=__webpack_require__(6),config_1=__webpack_require__(1),defaultOptions={headers:{},method:"GET",mode:"cors"};function request(url,options){var _this=this;return void 0===options&&(options={}),new Promise((function(resolve,reject){return __awaiter(_this,void 0,void 0,(function(){var opt,res;return __generator(this,(function(_a){switch(_a.label){case 0:return options.url=url,window.__SESSION__&&options.headers&&(options.headers.session=window.__SESSION__),opt=function(options){var url=options.url,query=options.query;url=url||"/",query&&("object"==typeof query&&(query=JSON.stringify(query)),query&&(url+=(-1!==url.indexOf("?")?"&":"?")+query));options.url=url;var _a=options.method,method=void 0===_a?"GET":_a,body=options.body,mutate=options.mutate;"object"==typeof body&&/^(POST|PUT|PATCH)$/i.test(method)&&(options.body=JSON.stringify(body));return mutate?mutate(options):options}(Object.assign(__assign({},defaultOptions,{headers:__assign({},defaultOptions.headers)}),options)),[4,fetch(opt.url,opt)];case 1:return(res=_a.sent())&&res.status>=200&&res.status<400?(-1!==opt.url.indexOf("/user/login")&&(window.__SESSION__=res.headers.get("session")),[2,getBody(res).then(resolve,reject)]):[2,getBody(res).then((function(body){res.status<500&&3!==body.code&&setTimeout((function(){stream_1["default"].trigger(config_1.STREAM_LISTEN.RECONNECT_RONGCOULD,{isShowModal:!0,content:body.message})}),1e3),reject(body)}))]}}))}))}))}function getBody(res){var type=res.headers.get("Content-Type");return type&&-1!==type.indexOf("json")?res.json():res.text()}exports.HEADERS={POST:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},exports["default"]=request,exports.postForm=function(url,data,options){return void 0===data&&(data={}),void 0===options&&(options={}),options.method="POST","undefined"==typeof options.headers&&(options.headers={}),options.headers["Content-Type"]=exports.HEADERS.POST["Content-Type"],options.body=JSON.stringify(data),request(url,options)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=__webpack_require__(9),config_1=__webpack_require__(1),request_1=__webpack_require__(53),baseUrl=config_1.BASE_URL+"/msg";exports.getMsgHistory=function(msgId,num){void 0===msgId&&(msgId=""),void 0===num&&(num=50);var body={direction:"BACKWARD",msg_id:msgId,num:num,user_id:utils_1.getUserInfo().userId},url=baseUrl+"/history";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:body})},exports.sendMsg=function(body){var url=baseUrl+"/receive";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:body})},exports.satisfactionEvaluate=function(body){var url=baseUrl+"/evaluate";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:body})}},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__values=this&&this.__values|;Object.defineProperty(exports,"__esModule",{value:!0});var uuid=__webpack_require__(208);exports.contains,exports.findUidFromDom=function(sel){try{for(var node=document.querySelector(sel),uid=void 0;node&&!(uid=node.getAttribute("c-id"));)node=node.parentNode;return uid}catch(e){return undefined}},exports.generateUid,exports.omit=function(obj,fields){var e_1,_a,shallowCopy=__assign({},obj);try{for(var fields_1=__values(fields),fields_1_1=fields_1.next();!fields_1_1.done;fields_1_1=fields_1.next()){delete shallowCopy[fields_1_1.value]}}catch(e_1_1){e_1={error:e_1_1}}finally{try{fields_1_1&&!fields_1_1.done&&(_a=fields_1["return"])&&_a.call(fields_1)}finally{if(e_1)throw e_1.error}}return shallowCopy}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=__webpack_require__(9),config_1=__webpack_require__(1),request_1=__webpack_require__(53);exports.getUserInputSugList=function(input){var body={query:input,user_id:utils_1.getUserInfo().userId},url=config_1.BASE_URL+"/msg/user/input";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:body})},exports.simulateMessage=function(hashUrl){var body={hash_id:hashUrl.split("/t/")[1],user_type:"PLATFORM"},url=config_1.BASE_URL+"/msg/trigger";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:body})},exports.createUserTag=function(attribute){var body={user_id:utils_1.getUserInfo().userId,user_attribute_user_attribute_value:attribute},url=config_1.BASE_URL+"/user/tag";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:body})}},function(module,exports,__webpack_require__){var content=__webpack_require__(116);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0};options.insertInto=undefined;__webpack_require__(25)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){var validateSetPrototypeOfArguments=__webpack_require__(77);module.exports=Object.setPrototypeOf||("__proto__"in{}():undefined)},function(module,exports,__webpack_require__){"use strict";var codePointAt=__webpack_require__(139),InternalStateModule=__webpack_require__(38),defineIterator=__webpack_require__(79),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("String Iterator");defineIterator(String,"String",),(function(){var point,state=getInternalState(this),string=state.string,index=state.index;return index>=string.length?{value:undefined,done:!0}:(point=codePointAt(string,index,!0),state.index+=point.length,{value:point,done:!1})}))},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0),createIteratorConstructor=__webpack_require__(140),getPrototypeOf=__webpack_require__(40),setPrototypeOf=__webpack_require__(76),setToStringTag=__webpack_require__(32),hide=__webpack_require__(19),redefine=__webpack_require__(35),IS_PURE=__webpack_require__(37),ITERATOR=__webpack_require__(5)("iterator"),Iterators=__webpack_require__(41),IteratorsCore=__webpack_require__(80),IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,returnThis=function(){return this};module.exports},function(module,exports,__webpack_require__){"use strict";var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator,getPrototypeOf=__webpack_require__(40),hide=__webpack_require__(19),has=__webpack_require__(11),IS_PURE=__webpack_require__(37),ITERATOR=__webpack_require__(5)("iterator"),BUGGY_SAFARI_ITERATORS=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS=!0),IteratorPrototype==undefined&&(IteratorPrototype={}),IS_PURE||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,(function(){return this})),module.exports={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS}},function(module,exports,__webpack_require__){var classof=__webpack_require__(86),ITERATOR=__webpack_require__(5)("iterator"),Iterators=__webpack_require__(41);module.exports},function(module,exports,__webpack_require__){"use strict";var isArray=__webpack_require__(26),isObject=__webpack_require__(8),toObject=__webpack_require__(13),toLength=__webpack_require__(10),createProperty=__webpack_require__(43),arraySpeciesCreate=__webpack_require__(44),IS_CONCAT_SPREADABLE=__webpack_require__(5)("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=!__webpack_require__(7)()),SPECIES_SUPPORT=__webpack_require__(45)("concat"),isConcatSpreadable,FORCED=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;__webpack_require__(0)({target:"Array",proto:!0,forced:FORCED},{concat})},function(module,exports,__webpack_require__){"use strict";var isArray=__webpack_require__(26),toLength=__webpack_require__(10),bind=__webpack_require__(42),flattenIntoArray=function(target,original,source,sourceLen,start,depth,mapper,thisArg){for(var element,targetIndex=start,sourceIndex=0,mapFn=!!mapper&&bind(mapper,thisArg,3);sourceIndex<sourceLen;){if(sourceIndex in source){if(element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex],depth>0&&isArray(element))targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1;else{if(targetIndex>=9007199254740991)throw TypeError();target[targetIndex]=element}targetIndex++}sourceIndex++}return targetIndex};module.exports=flattenIntoArray},function(module,exports,__webpack_require__){var defer,channel,port,global=__webpack_require__(3),classof=__webpack_require__(30),bind=__webpack_require__(42),html=__webpack_require__(74),createElement=__webpack_require__(56),set=global.setImmediate,clear=global.clearImmediate,process=global.process,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run,listener;set&&clear||(set,clear,"process"==classof(process)?defer=function(id){process.nextTick(bind(run,id,1))}:Dispatch&&Dispatch.now?defer:MessageChannel?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer,global.addEventListener("message",listener,!1)):defer="onreadystatechange"in createElement("script")),module.exports={set:set,clear:clear}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Watcher=function()return Watcher.prototype.get=function(){Store.target=this,this.val=this.data[this.exp],Store.target=null},Watcher.prototype.init,Watcher.prototype.update,Watcher}();exports.Watcher=Watcher;var Store=function(){function Store(initData){var _this=this;this.deps=[],this.callbacks=[],this.data={},this.timeid=null;var me=this;Object.keys(initData).forEach((function(key){var val=initData[key];Object.defineProperty(_this.data,key,{enumerable:!0,configurable:!1,get,set:function(newVal){var oldVal=val;val=newVal,me.publish(key,val,oldVal)}})}))}return Store.prototype.getData,Store.prototype.subscribe,Store.prototype.unSubscribe=function(watcher){var deps=this.deps;deps.forEach())},Store.prototype.addCallback=function(callback){return this.callbacks.push(callback),callback._id=Symbol("id")},Store.prototype.removeCallback=function(id){var cbs=this.callbacks;cbs.forEach((function(callback,i){callback._id!==id&&callback!==id||cbs.splice(i,1)}))},Store.prototype.publish=function(key,newVal,oldVal){var _this=this;this.timeid||(this.timeid=Promise.resolve(!0).then((function(){var deal=!1;_this.deps.forEach((function(watcher){watcher.exp===key&&(watcher.update(newVal),deal=!0)})),deal||(_this.deps=[],_this.callbacks.forEach())),_this.timeid=null})))},Store}();exports["default"]},function(module,exports,__webpack_require__){var content=__webpack_require__(213);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0};options.insertInto=undefined;__webpack_require__(25)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var config_1=__webpack_require__(1),utils_1=__webpack_require__(9),request_1=__webpack_require__(53);exports.getSDKConfig=function(pubkey,userInfo){void 0===userInfo&&(userInfo={userId:"",userAvatar:"",nickName:""});var info=utils_1.getUserInfo(),query={version:info.version,source:info.source,pub_key:pubkey};userInfo&&userInfo.userId||info.userId?query.web={nickname:userInfo.nickName,avatar_url:userInfo.userAvatar,user_id:userInfo.userId||info.userId}:query.anonymous=!0;var url=config_1.BASE_URL+"/user/login";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:query})},exports.getPubkeyByHash=function(hash){var url=config_1.BASE_URL+"/pubkey/get/by/hash";return request_1.postForm(url,{hash:hash})},exports.getStsToken=function(){var url=config_1.BASE_URL+"/resource/oss/auth/write";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:{}})},exports.getQrcodeByWebSDKLink=function(link){var url=config_1.BASE_URL+"/qrcode/get/by/websdklink";return request_1["default"](url,{method:"POST",headers:{"Content-Type":"application/json; charset: UTF-8"},body:{url:link,size:125}})}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(218),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),message_1=__webpack_require__(28),QuickReplyMsg=function(_super){function QuickReplyMsg(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.moveQuickReplyList=function(direction){if(_this.data.quickReply.length){var replayBoxWidth=_this.getNode().getElementsByClassName("websdk-replayList")[0].clientWidth+36,replyContainer=_this.getNode().querySelector("ul"),nodeList=_this.getNode().querySelectorAll("li"),leftArrow=_this.getNode().getElementsByClassName("web-sdk-left-arrow")[0],rightArrow=_this.getNode().getElementsByClassName("web-sdk-right-arrow")[0];direction&&("right"===direction?QuickReplyMsg.index+=1:QuickReplyMsg.index-=1);var liWidth=0;nodeList.forEach()),Math.ceil(liWidth/replayBoxWidth)>=2&&(rightArrow.style.display="inline-block"),QuickReplyMsg.index!==nodeList.length-1&&0!==QuickReplyMsg.index||(QuickReplyMsg.index<=0?leftArrow.style.display="none":rightArrow.style.display="none");for(var leftWidth=0,i=0;i<QuickReplyMsg.index;i++)leftWidth+=nodeList[i].clientWidth+8;replyContainer.style.transform="translateX(-"+leftWidth+"px)",replyContainer.style.transition="all .3s",QuickReplyMsg.index<=nodeList.length-2&&QuickReplyMsg.index>0&&(rightArrow.style.display="inline-block",leftArrow.style.display="inline-block")}},_this}return __extends(QuickReplyMsg,_super),QuickReplyMsg.prototype.create=function(){var _this=this,color=config_1.BACKGROUND_COLOR.find());this.data.fontColorB=Boolean(color)},QuickReplyMsg.prototype.mount=function(){var _this=this;this.useEvents(),this.addEvent("click",".quick-reply",(function(evt){return __awaiter(this,void 0,void 0,(function(){var value,msg,message;return __generator(this,(function(_a){return value=evt.target.innerText,msg=message_1.createTextMsg(value),message=message_1.sendRtMessage(msg.msg_body,msg.msg_type,!0),stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message),this.data.quickReply=[],[2]}))}))})),stream_1["default"].listen(config_1.STREAM_LISTEN.SEND_MSG,(function(message){var newMsg=message.filter()),quickReply=[];QuickReplyMsg.index=0,newMsg.length&&(quickReply=newMsg[newMsg.length-1].quick_reply),quickReply=quickReply.filter()),_this.data.quickReply=quickReply,_this.data.quickReply.length&&setTimeout((function(){_this.moveQuickReplyList()}))})),this.addEvent("click",".web-sdk-left-arrow",(function(){_this.moveQuickReplyList("left")})),this.addEvent("click",".web-sdk-right-arrow",(function(){_this.moveQuickReplyList("right")}))},QuickReplyMsg.data={fontColorB:!1,quickReply:[]},QuickReplyMsg.index=0,QuickReplyMsg.template='\n    {% if quickReply.length %}\n      <div class="'+style.quickModal+'">\n        <div class="'+style.arrow+' web-sdk-left-arrow">\n          <span />\n        </div>\n\n        <div class="'+style.replyList+' websdk-replayList">\n          <ul>\n            {% for item in quickReply %}\n              <li\n                class="quick-reply {{ \''+style.fontColor+'\' if fontColorB else \'\' }}"\n                style="background: {{ pageConfig.theme_color}}"\n              >\n                {{ item }}\n              </li>\n            {% endfor %}\n          </ul>\n        </div>\n\n        <div class="'+style.arrow+" "+style.rightArrow+' web-sdk-right-arrow">\n          <span />\n        </div>\n      </div>\n    {% endif %}\n  ',QuickReplyMsg}(component_1["default"]);exports["default"]=QuickReplyMsg},function(module,exports,__webpack_require__){var content=__webpack_require__(224);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0};options.insertInto=undefined;__webpack_require__(25)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),utils_1=__webpack_require__(9),config_1=__webpack_require__(1),UserMsg_1=__webpack_require__(225),StaffMsg_1=__webpack_require__(240),Msg=function(_super){function Msg(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Msg,_super),Msg.prototype.create=function(){var nowMsg=this.data.msg,lastMsg=this.data.lastMsg;lastMsg&&(parseInt(nowMsg.msg_ts,10)-parseInt(lastMsg.msg_ts,10)>6e4?(this.data.isShowTime=!0,this.data.time=utils_1.getTimeByTimestamp(parseInt(nowMsg.msg_ts,10))):(this.data.isShowTime=!1,this.data.time=""))},Msg.data={direction:config_1.MSG_DIRECTION,isShowTime:!0,time:""},Msg.template='\n    {% if isShowTime %}\n      <p class="'+style.time+"\">{{ time }}</p>\n    {% endif %}\n\n    {% if pageConfig %}\n      {% if msg.msg_type === 'NOTICE' %}\n        <p class=\""+style.tips+'">{{ msg.body.content }}</p>\n      {% endif %}\n\n      {% if (msg.direction === direction.user) and (msg.msg_type !== \'EVENT\') %}\n        {% component name="UserMsg",msg=msg,pageConfig=pageConfig,fullScreen=fullScreen %}\n      {% elif msg.direction === direction.staff %}\n        {% component name="StaffMsg",msg=msg,pageConfig=pageConfig,isShowReportBtn=isShowReportBtn,fullScreen=fullScreen %}\n      {% endif %}\n    {% endif %}\n  ',Msg.components=[UserMsg_1["default"],StaffMsg_1["default"]],Msg}(component_1["default"]);exports["default"]=Msg},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var component_1=__webpack_require__(2),TextContent_1=__webpack_require__(226),ImgContent_1=__webpack_require__(232),ShareLinkContent_1=__webpack_require__(233),FileContent_1=__webpack_require__(234),AudioContent_1=__webpack_require__(235),VideoContent_1=__webpack_require__(236),RichTextContent_1=__webpack_require__(237),MsgContent=function(_super){function MsgContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(MsgContent,_super),MsgContent.template="\n  {% if msg.msg_type === 'TEXT' %}\n    {% component name=\"TextContent\",msg=msg,pageConfig=pageConfig %}\n  {% endif %}\n\n  {% if msg.msg_type === 'IMAGE' %}\n    {% component name=\"ImgContent\",body=msg.msg_body %}\n  {% endif %}\n\n  {% if msg.msg_type === 'VIDEO' %}\n    {% component name=\"VideoContent\",body=msg.msg_body %}\n  {% endif %}\n\n  {% if msg.msg_type === 'VOICE' %}\n    {% component name=\"AudioContent\",body=msg.msg_body,pageConfig=pageConfig %}\n  {% endif %}\n\n  {% if msg.msg_type === 'SHARELINK' %}\n    {% component name=\"ShareLinkContent\",body=msg.msg_body %}\n  {% endif %}\n\n  {% if msg.msg_type === 'FILE' %}\n    {% component name=\"FileContent\",body=msg.msg_body,pageConfig=pageConfig %}\n  {% endif %}\n\n  {% if msg.msg_type === 'RICH_TEXT' %}\n    {% component name=\"RichTextContent\",body=msg.msg_body,pageConfig=pageConfig,fullScreen=fullScreen %}\n  {% endif %}\n  ",MsgContent.components=[TextContent_1["default"],ImgContent_1["default"],ShareLinkContent_1["default"],FileContent_1["default"],AudioContent_1["default"],VideoContent_1["default"],RichTextContent_1["default"]],MsgContent}(component_1["default"]);exports["default"]=MsgContent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={ChatInput:{placeholder:"Enter text to reply",pcPlaceholder:"Enter text to reply，shift+enter to change row"},Satisfaction:{thumbUp:"Solved",badAnswer:"Unsolved",wrongAnswer:"Mismatch",report:"Report"},Message:{historyMsgTips:"previous messages",noMore:"no more previous messages",download:"download",audio:"Click to play"},Logo:{waterMark:"https://cdn.wul.ai/sdk/logo_en.png"},Tips:{"delete":"The bot has been deleted and can not be uesd",reload:"reload",alertTitle:"prompt"},QCode:{copy:"I created an intelligent chatbot on the platform. Let's experience it",successTxt:"copy succeeded",message:"Scan code to experience chatbot ",copyBtn:"Share address quickly"},Uploader:{imgSize:"Picture size cannot exceed 10MB",imgType:"Picture type only supports jpeg/png/gif",errMsg:"File upload failed"},NetWork:{offline:"Network disconnected,please check it.",rongMsg:"The current dialog window is invalid. You can restart the dialog after refreshing"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={ChatInput:{placeholder:"输入文字进行回复",pcPlaceholder:"输入文字进行回复，Shift+Enter换行"},Satisfaction:{thumbUp:"满意",badAnswer:"内容不满意",wrongAnswer:"回答不匹配",report:"举报"},Message:{historyMsgTips:"以上是历史消息",noMore:"没有更多历史消息了",download:"下载",audio:"点击播放"},Logo:{waterMark:"https://cdn.wul.ai/sdk/logo_zh.png"},Tips:{"delete":"该机器人已被删除，暂无法使用",reload:"刷新",alertTitle:"提示"},QCode:{copy:"我在平台创建了一个智能对话机器人，快来体验一下吧",successTxt:"复制地址成功",message:"扫码体验对话机器人",copyBtn:"快速分享网址"},Uploader:{imgSize:"图片大小不能超过10MB哦",imgType:"图片类型仅支持 jpeg/png/gif",errMsg:"上传文件失败"},NetWork:{offline:"网络已断开,请检查网络设置",rongMsg:"已在其他页面发起对话，当前对话窗口失效，刷新后可以重新发起对话"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var views_1=__webpack_require__(115);exports["default"]=views_1["default"]},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(exten{function __(){this.constructor=e,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}"throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(67),copy=__webpack_require__(118),component_1=__webpack_require__(2),config_1=__webpack_require__(1),utils_1=__webpack_require__(9),rongcloud_1=__webpack_require__(215),stream_1=__webpack_require__(6),app_data_1=__webpack_require__(103),user_data_1=__webpack_require__(64),message_data_1=__webpack_require__(54),message_1=__webpack_require__(28),ChatInput_1=__webpack_require__(217),HistoryMsgPanel_1=__webpack_require__(223),RtMsgPanel_1=__webpack_require__(243),QuickReplyMsg_1=__webpack_require__(104),Error_1=__webpack_require__(245),ImgModal_1=__webpack_require__(247),ReloadModal_1=__webpack_require__(248),Toast_1=__webpack_require__(249),message_2=__webpack_require__(250),storage=null;try{storage=window.localStorage}catch(err){storage=null,alert("设置了cookie禁调，无法接收消息，打开cookie访问权限后可正常使用"),location.reload(!0)}var App=function(_super){function App(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(App,_super),App.prototype.create=function(){return __awaiter(this,void 0,void 0,(function(){var err_1,query,pubkey,hash,err_3,data,language,userInfo,input,result,info,err_4,err_5,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,4]),[4,utils_1.loadAliOSS()];case 1:return _a.sent(),[4,utils_1.loadNunjucks()];case 2:return _a.sent(),[3,4];case 3:return err_1=_a.sent(),console.error("nunjucks模板加载失败",err_1),[3,4];case 4:return query=utils_1.getUrlQuery(),pubkey="",Object.keys(query).length?[3,5]:(pubkey=this.data.pubkey,this.data.urlStatus=!1,[3,12]);case 5:this.data.hideFooter=!0,hash=query.app,_a.label=6;case 6:return _a.trys.push([6,8,,9]),[4,app_data_1.getPubkeyByHash(hash)];case 7:if(!(data=_a.sent()).pubkey)throw this.data.urlStatus=!1,new Error("app hash不存在");return pubkey=data.pubkey,[3,9];case 8:return _a.sent(),this.data.urlStatus=!1,[3,9];case 9:return _a.trys.push([9,11,,12]),[4,app_data_1.getQrcodeByWebSDKLink(location.href)];case 10:return result=_a.sent(),this.data.qrcodeBase64=result.qrcode_base64,[3,12];case 11:return err_3=_a.sent(),console.error(err_3.message),[3,12];case 12:if(this.data.fullScreen&&(this.data.hideFooter=!0),!pubkey)return[2,!1];storage&&storage.setItem("SDK_PUBKEY",pubkey),_a.label=13;case 13:return _a.trys.push([13,20,,21]),[4,app_data_1.getSDKConfig(pubkey,this.data.userInfo)];case 14:data=_a.sent(),language=__webpack_require__(252)("./"+data.page_config.language_code)["default"],window.appLocale=language,this.data.qCode.message=window.appLocale.QCode.message,this.data.qCode.copyBtn=window.appLocale.QCode.copyBtn,sessionStorage.getItem("WINDOW_ID")||sessionStorage.setItem("WINDOW_ID",data.user_id+"_"+Date.now()),this.data.pageConfig=__assign({},data.page_config,{title:data.page_config.title||"网页机器人",theme_color:data.page_config.theme_color||"#1F77F3",bot_avatar:data.page_config.bot_avatar||"https://aibici-test.oss-cn-beijing.aliyuncs.com/rc-upload-1534856515077-31534856527229.png",user_avatar:data.page_config.user_avatar||"https://aibici-test.oss-cn-beijing.aliyuncs.com/rc-upload-1534854173706-41534855030375.png",entry_image_size:data.page_config.entry_image_size||64,screen_ratio:data.page_config.screen_ratio||100}),document.title=Object.keys(query).length?this.data.pageConfig.title:document.title,this.data.avatarShape=config_1.HEADER_AVATAR_SHAPE[data.page_config.avatar_shape],this.data.borderShape=config_1.FRAME_SHAPE[data.page_config.frame_shape],this.data.isLoadHistory=data.interaction_config.show_history,this.data.isShowSug=data.interaction_config.fuzzy_sug,this.data.popAfterClose=data.interaction_config.pop_after_close,this.data.autoPop=data.interaction_config.auto_pop,this.data.isShowReportBtn=data.interaction_config.enable_report,this.data.isShowWulaiLogo=data.interaction_config.enable_wulai_ad,this.data.isShowHeaderAvatar=2!==data.page_config.header_chose&&Boolean(data.page_config.header_avatar),this.data.startTs=data.start_ts,window.__USER_PUBKEY__=pubkey,window.__USERID__=this.data.userInfo?this.data.userInfo.userId:data.user_id,userInfo={},input={userId:window.__USERID__,pubkey:pubkey},storage&&!storage.getItem("SDK_USER_INFO")?(userInfo[""+prage.getItem("SDK_USER_INFO"),(info=JSON.parse(result))[pubkey]={userId:window.__USERID__,pubkey:pubkey},storage.setItem("SDK_USER_INFO",JSON.stringify(info))),_a.label=15;case 15:return _a.trys.push([15,18,,19]),[4,utils_1.loadRongCloud()];case 16:return _a.sent(),[4,rongcloud_1.init(data.rong_key,data.rong_token)];case 17:return _a.sent(),setTimeout((function(){var enterMsg=message_1.createEventMsg("ENTER");message_data_1.sendMsg(enterMsg)}),500),[3,19];case 18:return err_4=_a.sent(),console.error("融云加载失败了。",err_4),[3,19];case 19:return[3,21];case 20:return err_5=_a.sent(),console.warn(err_5),[3,21];case 21:try{this.data.tagValues&&this.data.tagValues.length&&user_data_1.createUserTag(this.data.tagValues)}catch(err){console.warn(err)}return window.addEventListener("offline",(function(){stream_1["default"].trigger(config_1.STREAM_LISTEN.ERROR_TIPS,{isShow:!0,message:window.appLocale.NetWork.offline})})),window.addEventListener("online",(function(){stream_1["default"].trigger(config_1.STREAM_LISTEN.ERROR_TIPS,{isShow:!1}),rongcloud_1["default"].Monitor.reconnect()})),setTimeout((function(){var wulai=document.getElementById("websdk-wulai"),sdkModal=document.getElementById("websdk-modal"),entryPng=document.getElementById("entry-png"),closeEntryPng=document.getElementById("close-entry-png");_this.data.autoOpen||Object.keys(query).length?(App.enterTimes+=1,wulai.style.display=App.display,entryPng&&closeEntryPng&&(entryPng.style.opacity="1",closeEntryPng.style.opacity="0",sdkModal.style.display="block")):(wulai.style.display="none",sdkModal.style.display="none",entryPng&&closeEntryPng&&(entryPng.style.opacity="0",closeEntryPng.style.opacity="1"),_this.data.autoPop>0&&_this.applySillyCheck("autoPop",_this.data.autoPop));var sheet=document.createElement("style");sheet.type="text/css",sheet.innerHTML="\n        .video-hover-icon-bg:hover .play-icon {\n          background: "+_this.data.pageConfig.theme_color+" !important;\n        }\n        .staff-msg-link-color .staff-msg-file a {\n          color: "+_this.data.pageConfig.theme_color+";\n          filter: brightness(0.95);\n        }\n        .wulai-web-sdk-upload-icon:hover svg #instagram {\n          fill: "+_this.data.pageConfig.theme_color+";\n        }\n\n        @media screen and (min-width: 320px) and (max-width: 414px) {\n          .web-sdk-screen-ratio {\n            height: "+_this.data.pageConfig.screen_ratio+"% !important;\n            top: initial !important;\n          }\n        }\n      ",document.head.appendChild(sheet)})),[2]}}))}))},App.prototype.mount=function(){var _this=this;this.useEvents(),this.addEvent("click",".close-btn",(function(){var wulai=document.getElementById("websdk-wulai");App.toggleSDkVisible(),"none"===wulai.style.display&&_this.data.popAfterClose>0?_this.applySillyCheck("popAfter",_this.data.popAfterClose):App.stopSillyCheck()})),this.addEvent("click",".websdk-copy-input-url",(function(){var QCode=window.appLocale.QCode,content=QCode.copy+" "+location.href;copy(content),stream_1["default"].trigger(config_1.STREAM_LISTEN.MESSAGE,{isShow:!0,message:QCode.successTxt,type:"success"})}))},App.toggleSDkVisible=function(){var wulai=document.getElementById("websdk-wulai"),sdkModal=document.getElementById("websdk-modal"),entryPng=document.getElementById("entry-png"),closeEntryPng=document.getElementById("close-entry-png");wulai.style.display="none"===wulai.style.display?App.display:"none",sdkModal.style.display="none"===wulai.style.display?"none":"block",entryPng.style.opacity="none"===wulai.style.display?"0":"1",closeEntryPng.style.opacity="none"===wulai.style.display?"1":"0","none"!==wulai.style.display&&(App.enterTimes+=1,App.stopSillyCheck(),App.scrollMsgListToBottom())},App.stopSillyCheck=function(){App.timer&&clearInterval(App.timer),App.autoTimer&&clearInterval(App.autoTimer),App.timer=0,App.autoTimer=0},App.scrollMsgListToBottom=function(){if(App.enterTimes<=1){var $content=document.getElementById("msg-panel");utils_1.scrollToBottom($content)}},App.prototype.applySillyCheck=function(type,time){var wulai=document.getElementById("websdk-wulai"),entryPng=document.getElementById("entry-png"),closeEntryPng=document.getElementById("close-entry-png"),id=setInterval((function(){App.enterTimes+=1,wulai.style.display=App.display,entryPng.style.opacity="1",closeEntryPng.style.opacity="0",App.stopSillyCheck(),App.scrollMsgListToBottom()}),1e3*time);"popAfter"===type?App.timer=id:App.autoTimer=id},App.timer=0,App.autoTimer=0,App.display=utils_1.isBelowIE9()?"block":"flex",App.enterTimes=0,App.data={autoOpen:!1,pageConfig:null,avatarShape:"",isLoadHistory:!1,quickReply:[],isShowBox:!0,isShowSug:!1,isShowHeaderAvatar:!1,borderShape:"",popAfterClose:0,autoPop:0,hideFooter:!1,startTs:"",urlStatus:!0,qrcodeBase64:"",isShowReportBtn:!1,isShowWulaiLogo:!1,pos:{right:"16px",bottom:"16px"},qCode:{message:"",copyBtn:""}},App.template='<div class="'+style.app+" {{'"+style.largeApp+'\' if hideFooter else \'\' }}" style="right: {{ pos.right }};bottom: {{ pos.bottom }}">\n    {# 错误提示 #}\n    <component name="ErrorHeader", :hideFooter="hideFooter" />\n    {# 图片浮层 #}\n    <component name="ImgModal" />\n    <component name="Message" />\n\n    <div class="'+style.modal+'" id="websdk-modal"></div>\n\n    <div class="'+style.wrapper+'">\n      <div\n        class="'+style.wulai+" {{'"+style.largeWulai+'\' if hideFooter else \'\' }} {{ borderShape }} web-sdk-screen-ratio"\n        id="websdk-wulai"\n      >\n        <div class="'+style.header+'">\n          {% if isShowHeaderAvatar %}\n            <div class="'+style.avatar+' {{ avatarShape }}" style="background: {{ pageConfig.theme_color }}">\n              <img src="{{ pageConfig.header_avatar }}?x-oss-process=image/resize,w_72,h_72/quality,q_80" alt="header-avatar"/>\n            </div>\n          {% endif %}\n          <div class="'+style.title+'">{{ pageConfig.title }}</div>\n\n          {% if hideFooter === false %}\n            <div class="close-btn '+style.closeBtn+'">\n              <img src="https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/9c2ad2c1-1ffb-4f2c-8a2b-460109be9408.png" alt="close-btn"/>\n            </div>\n          {% endif %}\n        </div>\n\n        <div class="'+style.main+'" id="msg-panel">\n          {# 历史消息 #}\n          {% if isLoadHistory %}\n            {% component name="HistoryMsgPanel",pageConfig=pageConfig,startTs=startTs,fullScreen=fullScreen %}\n          {% endif %}\n\n          {# 实时消息 #}\n          {% if pageConfig %}\n            <component name="RtMsgPanel", :pageConfig="pageConfig", :isLoadHistory="isLoadHistory", :isShowReportBtn="isShowReportBtn", :fullScreen="fullScreen" />\n          {% endif %}\n        </div>\n\n        <div class="'+style.footer+'">\n          <component name="Toast"/>\n\n          {% if pageConfig %}\n            {% component name="ChatInput",pageConfig=pageConfig,isShowSug=isShowSug,isShowWulaiLogo=isShowWulaiLogo %}\n          {% endif %}\n        </div>\n\n        {# 弹窗提示 #}\n        <component name="ReLoadModal" />\n      </div>\n\n      {% if urlStatus %}\n        <div class="'+style.qCode+'">\n          <img src="{{ qrcodeBase64 }}" alt="qrcod"/>\n          <p>{{ qCode.message }}</p>\n          <button class="websdk-copy-input-url">{{ qCode.copyBtn }}</button>\n        </div>\n      {% endif %}\n    </div>\n\n    {% if pageConfig and (hideFooter === false) %}\n      <div\n        class="close-btn '+style.entryImg+'"\n        style="background: {{ pageConfig.theme_color }}; width: {{ pageConfig.entry_image_size }}px; height: {{ pageConfig.entry_image_size }}px"\n      >\n        <img\n          class="show-avatar '+style.showAvatar+'"\n          src="https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/6c64b84b-c00f-4eb4-b358-6880766adaa7.png"\n          id="entry-png"\n        />\n\n        <img\n          id="close-entry-png"\n          class="close-avatar '+style.closeAvatar+'"\n          style="width: {{ pageConfig.entry_image_size }}px; height: {{ pageConfig.entry_image_size }}px"\n ection=document.getSelection();if(!selection.rangeCount)return function(){};for(var active=document.activeElement,ranges=[],i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt(i));switch(active.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":active.blur();break;default:active=null}return selection.removeAllRanges(),function(){"Caret"===selection.type&&selection.removeAllRanges(),selection.rangeCount||ranges.forEach((function(range){selection.addRange(range)})),active&&active.focus()}}},function(module,exports,__webpack_require__){__webpack_require__(121),__webpack_require__(123),__webpack_require__(126),__webpack_require__(127),__webpack_require__(128),__webpack_require__(129),__webpack_require__(130),__webpack_require__(131),__webpack_require__(132),__webpack_require__(16),e(propertyKey,!0),anObject(attributes);try{return definePropertyModule.f(target,propertyKey,attributes),!0}catch(e){return!1}}})},function(module,exports,__webpack_require__){var getOwnPropertyDescriptor=__webpack_require__(21).f,anObject=__webpack_require__(4);__webpack_require__(0)({targjecunction(target){return objectGetPrototypeOf(anObject(target))}})},function(module,exports,__webpack_require__){__webpack_require__(0)({target:"Reflect",stat:!0},{has:function(target,propertyKey){return propertyKey in target}})},function(module,exports,__webpack_require__){var anObject=__webpack_require__(4),objectIsExtensible=Object.isExtensible;__webpack_require_re,anObject=__webpack_require__(4),FREEZING=__webpack_require__(135);__webpack_require__(0)({target:"Reflect",stat:!0,sham:!FREEZING},{preventExtensions:function(target){anObject(target);try{var objectPreventExtensions=getBuiltIn("Object","preventExtensions");return objectPreventExtensions&&objectPreventExtensions(target),!0}catch(e){return!1}}})},function(module,exports,__webpack_retorKey,createPropertyDescriptor(0,V));return!0}return ownDescriptor.set!==undefined&&(ownDescriptor.set.call(receiver,V),!0)}})},function(module,exports,__webpack_require__){var objectSetPrototypeOf=__webpack_require__(76),validateSetPrototypeOfArguments=__webpack_require__(77);objectSetPrototypeOf&&__webpack_require__(0)({target:"Reflect",stat:!0},{setPrototypeOf:function(target,proto){validateSetPrototypeOfArguments(target,proto);try{return objectSetPrototypeOf(target,proto),!0}catch(e){return!1}}})},function(module,exports,__webpack_require__){__webpack_require__(78),__webpack_require__(141),__webpack_require__(143),__webpack_require__(144),__webpack_require__(87),__webpack_require__(145),__webpack_require__(147),__webpack_require__(148),__webpack_require__(150),__webpack_require__(151),__webpack_require__(152),__webpack_require__(153),__webpack_require__(154),__webpack_require__(155),__webpack_require__(157),__webpack_require__(158),__webpack_require__(89),__webpack_require__(159),__webpack_require__(160),__webpack_require__(162),__webpack_require__(163),__webpack_require__(164),__webpack_require__(165),__webpack_require__(166),__webpack_require__(167),__webpack_require__(168),__webpack_require__(169),__webpack_require__(170),__webpack_require__(171),__webpack_require__(172),module.exports=__webpack_require__(22).Array},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(31),requirnext){var TO_STRING_TAG=NAME+" Iterator";return IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(1,next)}),setToStringTag(IteratorConstructor,TO_STRING_TAG,!1,!0),Iterators[TO_STRING_TAG]=returnThis,IteratorConstructor}},function(module,exports,__webpack_require__){var INCORRECT_ITERATION=!__webpack_require__(82)(b)for(result=new C(length=toLength(O.length));length>index;index++)createProperty(result,index,mapping?mapfn(O[index],index):O[index]);elser.next()).done;index++)createProperty(result,index,mapping?callWithSafeItedule,exports,__webpack_require__){"use strict";var createProperty=__webpack_require__(43),ISNT_GENERIC=__webpack_require__(7)((function(){function F(){}return!(Array.of.call(F13),toAbsoluteIndex=__webpack_require__(39),toLength=__webpack_require__(10);module.exports=[].copyWithin||function(target,start){var O=toObject(this),len=toLength(O.length),to=toAbsoluteIndex(target,len),from=toAbsoluteIndex(start,len),end=arguments.length>2?arguments[2]:undefined,count=Math.min((end===undefined?len:toAbsoluteIndex(end,len))-from,len-to),inc=1;for(from<to&&to<from+count&&(inc=-1,from+=count-1,to+=count-1);count-- >0;)from in O?O[to]=O[from]:ll")},function(module,exports,__webpack_require__){"use strict";var toObject=__webpack_require__(13),toAbsoluteIndex=__webpack_require__(39),toLength=__webpack_require__(10);module.exports=function(value){for(var O=toObject(this),length=toLength(O.length),argumentsLength=arguments.length,index=toAbsoluteIndex(argumentsLength>1?arguments[1]:undefined,length),end=argumentsLength>2?arguments[2]:undefined,endPos=end===undefined?length:toAbsoluteIndex(end,length);endPos>index;)O[index++]=value;return O}},function(module,exports,__webpack_require__){"use strict";var internalFilter=__webpack_require__(27)(2),SPECIES_SUPPORT=__webpack_require__(45)("filter");__webpack_require__(0)({target:"Array",proto:!0,forced:!SPECIES_SUPPORT},{filter:function(callbackfn){return internalFilter(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_reqternalFind=__webpack_require__(27)(5),SKIPS_HOLES=!0;"find"in[]&&Array(1).find((function(){SKIPS_HOLES=!1})),__webpack_require__(0)({target:"Array",proto:!0,forced:SKIPS_HOLES},{find:function(callbackfn){return internalFind(this,callbackfn,arguments.length>1?arguments[1]:undefined)}}),__webpack_require__(23)("find")},function(module,exports,__webpack_require__){"use strict";var internalFindIndex=__webpack_require__(27)(6),SKIPS_HOLES=!0;"findIndex"in[]&&Array(1).findIndex((function(){SKIPS_HOLES=!1})),__webpack_require__(0)({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function(callbackfn){return internalFindIndex(this,callbackfn,arguments.length>1?arguments[1]:undefined)}}),__webpack_require__(23)("findIndex")},function(module,exports,__webpack_require__){"use strict";var flattenIntoArray=__webpack_require__(88),toObject=__webpack_require__(13),toLength=__webpack_require__(10),toInteger=__webpack_require__(31),arraySpeciesCreate=__webpack_require__(44);__webpack_require__(0)({target:"Array",proto:!0},{flat:function(uncments[1]),A}})},function(module,exports,__webpack_require__){"use strict";var forEach=__webpack_require__(156);__webpack_require__(0)({target:"Array",proto:!0,forced:e strict";var nativeForEach=[].forEach,}}),__webpack_require__(23)("includes")},function(module,exports,__webpack_require__){"use strict";var internalIndexOf=__webpack_require__(60)(!1),nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,SLOPPY_METHOD=__webpack_require__(20)("indexOf");__webpack_require__(0)({target_ZEn,ES3_STRINGS=__webpack_require__(33)!=Object,SLOPPY_METHOD=__webpack_require__(20)("join",",");__webpack_require__(0)({target:"Array",proto:!0,forced:ES3_STRINGS||SLOPPY_METHOD},{join:function(separator){return nativeJoin.call(toIndexedObject(this),separator===undefined?",":separator)}})},function(module,exports,__webpack_require__){var arrayLastIndexOf=__wf,NEGATIVE_ZERO=!!n;for(arguments.length>1&&(index=Math.min(index,toInteger(arguments[1]))),index<0&&(index=length+index);index>=0;index--)if(index in O&&O[index]===searchElement)return index||0;return-1}:nativeLastIndexOf},function(module,exports,__webpack_require__){"use strict";var internalMap=__webpack_require__(27)(1),SPECIES_SUPPORT=__webpack_require__(45)("map");__webpack_require__(0)({target:"Array",proto:!0,forced:!SPECIES_SUPPORT},{map:function(callbackfn){return internalMap(this,callbackfn,arguments[1])}})},function(module,exports,__webpack_require__){"use strict";varequire__(0)({target:"Array",proto:!0,forced:SLOPPY_METHOD},{reduce:function(callbackfn){return internalReduce(this,callbackfn,arguments.length,arguments[1],!1)}})},function(module,exports,__webpack_require__){"use strict";var internalRe);__webpack_require__(0)({target:"Array",proto:!0,forced:SLOPPY_METHOD},{reduceRight:function(callbackfn){return internalReduceRight(this,callbackfn,arguments.length,arguments[1],!0)}})},function(module,exports,__webpack_require__){"use strict";var isArray=__webpack_require__(26),nativeReverse=[].reverse,test=[1,2];__webpack_require__(0)({target:"Array",proto:!0,forced:String(test)===String(test.reverse())},{reverse:function(){return isArray(this)&&(this.length=this.length),nativeRdex(end===undefined?length:end,length);if(isArray(O)&&("function"!=typeof(Constructor=O.constructor)||Constructor!==Array&&!isArray(Constructor.prototype)?isObject(Constructor)&&null===(Constructor=Constructor[SPECIES])&&(Const===undefined))return nativeSlice.call(O,k,fin);for(result=new(Constructor===undefined?Array:Constructor)(max(fin-k,0)),n=0;k<fin;k++,n++)k in O&&createProperty(result,n,O[k]);return result.length=n,result}})},function(module,exports,__webpack_require__){"use strict";var inte(27)(3),SLOPPY_METHOD=__webpack_require__(20)("some");__webpack_require__(0)({target:"Array",proto:!0,forced:SLOPPY_METHOD},{some:function(callbackfn){return internalSome(thi=__webpack_require__(13),fails=__webpack_require__(7),nativeSort=[].sort,test=[1,2,3],FAILS_ON_UNDEFINED=fails((function(){test.sort(undefined)})),FAILS_ON_NULL=fails((function(){test.sort(null)})),SLOPPY_METHOD=__webpack_require__(20)("sort"),FORCED=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||SLOPPY_METHOD;__webpack_require__(0)({target:"Array",proto:!0,forced:FORCED},{sort:function(comparefn){return comparefn===undefined?nativeSort.call(toObject(this)):nativeSort.call(toObject(this),aFunction(comparefn))}})},function(moduleualDeleteCount,insertCount<actualDeleteCount){for(k=actualStart;k<len-actualDelets={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(module,exports,__webpack_require__){"use strict";var Internal,OwnPromiseCapability,PromiseWrapper,PROMISE="Promise",IS_PURE=__webpack_require__(37),global=__webpack_require__(3),$export=__webpack_require__(0),isObject=__webpack_require__(8),aFunction=__webpack_require__(16),anInstance=__webpack_require__(178),classof=__webpack_require__(30),iterate=__webpack_require__(179),checkCorrectnessOfIteration=__webpack_require__(82),speciesConstructor=__webpack_require__(93),task=__webpack_require__(94).set,microtask=__webpack_require__(180),promiseResolve=__webpack_require__(96),hostReportErrors=__webpack_require__(181),newPromiseCapabilityModule=__webpack_require__(97),perform=__webpack_require__(182),userAgent=__webpack_require__(95),SPECIES=__webpack_require__(5)("species"),InternalStateModule=__webpack_require__(38),isForced=__webpack_require__(73),getInternalState=InternalStateModule.get,setInternalState=InternalStateModule.set,getInternalPromiseState=InternalStateModule.getterFor(PROMISE),PromiseConstructor=global[PROMISE],Typeobal.document,process=global.process,$fetch=global.fetch,versions=process&&process.versions,v8=versions&&versions.v8||"",newPromiseCapability=newPromiseCapabilityModule.f,newGenericPromiseCapability=newPromiseCapability,IS_NODE="process"==classof(process),DisForced(PROMse=(proection&&onHand;chain.length>i;)run(chain[i++]);state.reactions=[],streason},(handlename&&hostReportEred(st",value,promiseisUnhandled=funcromise,state,value,unwrap){i,state),bimise,state,!1))}catch(e){internalReject(promise,{done:!1},e,state)}}};Fe:undefi.prototype,{then:functiilled||onFulfilled,reaction.fail="function"==typeo!=state.state&&notify(this,state,!1),reaction.promise},"catch":function(onRejected){reternal,state=getInternalState(promise);this.promise=promise,this.resolve=bind(internalResolve,promise,state),this.reject=bind(internalReject,promise,state)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===PromiseConstructor||C===PromiseWrapper?nmerable:!0,forced:!0},{fetch:function(input){return promiseResolve(ED},{Promise:PromiseConstructor}),__webpack_require__(32)(PromiseConstructor,PROMISE,!1,!0),__webpack_require__(91)(PROMISE),PromiseWrapper=__webpack_require__(22)[PROMISE],$export({target:PROMISE,stat:!0,forced:FORCED},{reject:function(r){var capability=newPromiseuctor:this,x)}}),$export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(it,ref("function"!=typeof(iterFn=getIteratorMethod(iterable)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index++)if((ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]))===BREAK)return BREAK;return}iterator=iterFn.call(iterable)}for(;!(step=iterator.next()).done;)if(callWithSafeIterationClosing(iterator,boundFunction,step.value,ENTRIES)===BREAK)return BREAK}).BREAK=BREAK},function(module,exports,__webpack_require__){var flush,head,last,notify,toggle,node,promise,globMutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,IS_NODE="process"==classof(process),queueMicrotaskDescriptor=getOwnPropertyDescriptor(global,"queueMicrotask"),queueMicrotask=queueMicrotas.value;queueMicrotask||(flush=function(){var parent,fn;for(IS_NODE&&(xit();heatch(e){throw head?notify():lastt__webpack_require__){var global=__webpack_require__(3);module.exports=function(a,b){var console=global.console;console&&console.error&&(1===arguments.length?console.error(a):console.error(a,b))}},function(module,exports){module.exports=function(execwebequire__){__webpack_require__(87),__webpack_require__(92),__webpack_require__(189),__webpack_require__(192),__webpack_require__(193),__webpack_require__(194),__webpack_require__(195),__webpack_require__(196),__webpack_require__(197),__webpack_require__(198),__webpack_require__(199),__webpack_require__(200),__webpack_require__(201),__webpack_require__(202),__webpack_require__(203),__webpack_require__(204),__webpack_require__(205),__webpack_require__(206),module.exports=__webpack_require__(22).Symbol},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(3),has=__webpack_require__(11),DESCRIPTORS=__webpack_require__(17),IS_PURE=__webpack_require__(37),$export=__webpack_require__(0),redefine=__webpack_require__(35),hiddenKeys=__webpack_require__(49),fails=__webpack_require__(7),shared=__webpack_require__(36),setToStringTag=__webpack_require__(32),uid=__webpack_require__(58),wellKnownSymbol=__webpack_require__(5),wrappedWellKnownSymbolModule=__webpack_require__(98),defineWellKnownSymbol=__webpack_require__(12),enumKeys=__webpack_require__(190),isArray=__webpack_require__(26),anObject=__webpack_require__(4),isObject=__webpack_require__(8),toIndexedObject=__webpack_require__(18),toPrimitive=__webpack_require__(34),createPropertyDescriptor=__webpack_require__(29),nativeObjectCreate=__webpack_require__(51),getOwnPropertyNamesExternal=__webpack_require__(191),getOwnPropertyDescriptorModule=__webpack_require__(21),definePropertyModule=__webpack_require__(15),propertyIsEnumerableModule=__webpack_require__(47),hide=__webpack_require__(19),objectKeys=__webpack_require__(52),HIDDEN=__webpack_require__(48)("hidden"),InternalStateModule=__webpack_require__(38),setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor("Symbol"),nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,$Symbol=global.Symbol,JSON=gleMtotype.findChild,setSymboltiveGetOwnPropertyDescriptor(ObjectPrototype,key);ObjectPrypeDescriptor&&it(it)instanceof $S0),anObject(D),has(AllmbolDescriptor(it,key,D)):his,key=toPrimitive(kertyDescriptor=functionPropertyNames=function(it){for(var key,names=nativeGetOwnPropertyNames(toIndexedObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||has(hiddenKeys,key)||result.push(key);return result},$getOwnPropeOP&&!has(ObjectPrototype,key)||result.push(AllSymbols[key]);return result};NATIVE_SYMBOL||(redefine(($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var description=arguments[0]===undefined?undefined:String(arguments[0]),tag=uid(description),setter=function(value){this===ObjectPrototype&&setter.call(ObjectPrototypeSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value))};return DESCRIPTORS&&USE_SETTER&&setSymbolDescriptor(Obag,description)}).prototype,"toString",(function(){return getInternalState(this).tag})),propertyIsEnumerableModule.f=$propertywnPropertyDescriptorModule.f=$getOwnPropertyDescriptor,__webpack_require__(59).f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,__webpack_require__(50).f=$getOwnPropertySymbols,DESCRIPTORS&&(nativeDefineProperty($Symbol.prototype,"description",{configurable:!0,get:function(){return yIsEnum!NATIVE_SYMBOL,sham:!NATIVE_SYMBOL},{Symbol:$Symbol});for(var wellKnownSymbols=objectKeys(WellKnownSymbolsStore),k=0;wellKnownSymbols.length>k;)defineWellKn(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),$export({tareate(it),P)},d([symbol])||"{}"!=nativeJSONStringify({a:symbol})||"{}"!=nativeJSONStringify(Object(symbol))}))},{stringify:function(it){for(var replacer,$replacer,args=[,function(module,exports,__webpack_require__){var toIndexedObject=__webpack_require__(18),nativeGetOwnPropertyNames=__webpack_require__(59).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return nativeGetOwnPropertyNames(it)}catch(e){return windowNames.slice()}}(it):nativeGetOwnPropertyNames(toIndexedObject(it))}},function(module,exports,__webpack_require__){__webpack_ree__(3).Symbol;if(DESCRIPTORS&&"function"==typeof NativeSymbol&&(!("description"in NativeSymbol.prototype)||NativeSymbol().description!==undefined)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var description=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]),result=this instanceof SymbolWrapper?new NativeSymbol(deototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString,native="Symbol(test)"==String(NativeSymbol("test")),regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty(symbolPrototype,"description",{configurable:!0,get:function(){var symbol=isObject(this)?this.valueOf():this,string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return"";var desc=native?string.slice(7,-1):string.replace(regexp,"$1");return""===desc?undefined:desc}}),__webpack_require__(0)({global:!0,forced:!0},{Symbol:SymbolWrapper})}},function(module,exports,__webpack_require__){__webpack_require__(12)("hasInstance")},function(module,exports,__webpack_require__){__webpack_require__(12)("isConcatSpreadable")},function(module,exports,__webpack_require__){__webpack_require__(12)("iterator")},function(module,exports,__webpack_require__){__webpack_require__(12)("match")},function(module,exports,__webpack_require__){__webpack_require__(12)("r__webpack_require__){__webpack_require__(12)("split")},function(module,exports,__webpack_require__){__webpack_require__(12)("toPrimitive")},function(module,exports,___(12)("toStringTag")},function(module,exports,__webpack_require__){__webpack_require__(12)("unscopables")},function(module,exports,__webpack_require__){__webpack_require__(32)(Math,"Math",!0)},function(module,exports,__webpack_require__){__webpack_require__(32)(__webpack_require__(3).JSON,"JSON",!0)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{valuCEvent=function(){function CEvent(){this.listeners={}}return CEvent.prototype.add=function(key,sel,fn){fn||steners[key]||(listeners[k list.push({id:id,sel:sel,fn:fn}),id},CEvent.prototype.remove=function(id){var listeners=this.listeners;Object.values(listeners).forEach((function(list){list.f)}))},CEvent.prototype.removeByKey=function(key){delete this.listeners[key]},CEvent.prototype.removeBySel=function(type,sel){var list=this.listeners[type];Object.values(list).forEach((function(item,i){item.sel==sel&&list.splice(i,1)}))},CEvent.prototype.clear=function(){this.listeners={}},CEvent.prototype.trigger=function(key){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var list=this.listeners[key];list&&list.forEach((function(item){return Reflect.apply(item.fn,null,args)}))},CE=function(source){var root=source.getNode(),event=source.event=new CEvent;["click","mousedown","mouseup","change","input","keydown"].forEach((function(type){root.addEventListener(type,(function(e){e.stopImmediatePropagation();var list=event.listeners[type];list&&list.forErray.from(root.querySelectorAll(item.sel)).forEach((function(node){util_1.contains(node,e.target)&&Reflect.ySel(type,sel)},source.clearEvents=function(){event.clear()}};var AbstractCEvent=function(){function AbstractCEvent(){}return AbstractCEvent.prototype.addEvent=function(type,sel,fn){},AbstractCEvent.prototype.removeEvent=function(type,sel){},AbstractCEvent.prototype.clearEvents=function(){},AbstractCEvent}();exports.AbstractCEvent=AbstractCEvent},function(module,exports,__webpack_require__){var v1=__webpack_require__(209),v4=__webpack_require__(210),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid},function(module,exports,__webpack_require__){var _nodeId,_clockseq,rng=__webpack_require__(99),bytesToUuid=__webpack_require__(100),_lastMSecs=0,_lastNSecs=0;module.exports=function(options,buf,offset){var i=buf&&offset||0,b=buf||[],node=(options=options||{}).node||_nodeId,clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(null==node||null==clockseq){var seedBytes=rng();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime(),nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&options.nsecs===undn=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}},function(module,exports,__webpack_require__){var rng=__webpack_require__(99),bytesToUuid=__webpack_require__(100);module.exports=function(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"===options?new Array(16):null,options=null);var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;++ii)buf[i+ii]=rnds[ii];return buf||bytesToUuid(rnds)}},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var util_1=__webpack_require__(63),store_1=__webpack_require__(101),rcomponent=/<component\s[^>]*>(<\/component>)?/g,rattr=/\s([^\s:"'<>\/=]+)\s*=\s*"([^"]*)"/g,rprop=/:([^\s:"'<>\/=]+)\s*=\s*"([^"]*)"/g,rbind=/<([^\s]*).*\s@[^@=]*="([^"]*)"[^/<]*(?:\/>|<\/\1>)/g,hooks={valHook:function(node,value){node.value=value},textHook:function(node,value){node.textContent=value},blockHook:funrn function(){this.tags=["component"],this.parse=function(parser,nodes,lexer){var token=parser.nextToken(),args=parser.parseSignature(null,!0);return parser.advanceAfterBlockEnd(token.value),new nodes.CallExtension(this,"run",args)},this.run=function(context,args){var id=util_1.generateUid();return delete args.__keywords,obj.items.push(__assign({sel:'div[r-id="'+id+'"]'},args)),'<div r-id="'+id+'"></div>'}}},Parser=function(){function Parser(tpl,data){this.data=data,this.template=this.rtemplate=tpl}return Parser.prototype.parseDirective=function(){for(var result,_loop_1=function(){var id=util_1.generateUid(),tag=result[1],exp=result[2],fn=/input|textarea/i.test(tag)?hooks.valHook:hooks.textHook;this_1.rtemplate=this_1.rtemplate.replace(/@[^@=]*="([^"]*)"/,'d-id="'+id+'"'),this_1.watchers.push(new store_1.Watcher(this_1.data,exp,(function(node,newVal){fn(node.querySelector('[d-id="'+id+'"]'),newVal)})))},this_1=this;result=rbind.exec(this.rtemplate);)_loop_1()},Parser.prototype.parseComponent=function(){var _this=this,list=this.rtemplate.match(rcomponent),data=this.data;list&&list.forEach((function(tag){var attrs,props,id=util_1.generateUid(),item={sel:'div[r-id="'+id+'"]',data:{}};for(_this.rtemplate=_this.rtemplate.replace(tag,'<div r-id="'+id+'"></div>');attrs=rattr.exec(tag);)item[attrs[1]]=attrs[2];for(;props=rprop.exec(tag);)item.data[props[1]]=data[props[2]];_this.items.push(item)}))},Parser.prototype.compile=function(node){var env=window.nunjucks.configure({autoescape:!1}),addComponent=createExtension(this);env.addExtension("custom",new addComponent),this.watchers=[],this.items=[],this.rtemplate=env.renderString(this.temnent(),this.parseDirective(),node.innerHTML=this.rtemplate,this.watchers.forEach((function(watcher){return watcher.init(node)}))},Parser.prototype.getDiff=function(){var lastItems=this.items.filter((function(item){return item.msg})),env=window.nunjucks.configure({autoescape:!1}),addComponent=createExtension(this);return env.addExtension("custom",new addComponent),this.watchers=[],this.items=[],this.rtemplate=env.renderString(this.template,this.data),this.items.filter((function(item){return item.msg})).filter((function(item,i){var oldItem=lastItems[i];return oldItem?item.msg.msg_id!==oldItem.msg.msg_id:item}))},Parser}();exports["default"]=Parser},function(module,exports,__webpack_require__){(exports=module.exports=__webpack_require__(24)(!1)).push([module.i,".time_2YtKH {\n  margin: 0;\n  clear: both;\n  text-align: center;\n  color: #8e9ca8;\n  padding: 20px 0 12px;\n  font-size: 12px;\n}\n.tips_11eGS {\n  background: #d9dee2;\n  height: 24px;\n  line-height: 24px;\n  border-radius: 12px;\n  color: #8e9ca8;\n  font-size: 12px;\n  display: inline-block;\n  padding: 0 4px;\n}\n.msgContent_1zaK0 {\n  display: inline-block;\n  width: 100%;\n  margin: 4px 0;\n}\n.msgContent_1zaK0 .msgContainer_2njOc {\n  margin: 0;\n  margin: 12px 0;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dt {\n  height: 36px;\n  width: 36px;\n  text-align: left;\n  float: left;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dt .avatar_1rwWo {\n  width: 36px;\n  height: 36px;\n  overflow: hidden;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dt .circle_3Hy0S {\n  border-radius: 50%;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dt img {\n  width: 36px;\n  height: 36px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd {\n  float: left;\n  position: relative;\n  text-align: left;\n  max-width: 75%;\n  margin: 0;\n  width: auto !important;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .content_1mnBh {\n  font-size: 14px;\n  line-height: 1.3;\n  word-break: break-all;\n  word-break: break-word;\n  overflow-wrap: break-word;\n  background: #fff;\n  display: inline-block;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .textContent_3EjL3 {\n  padding: 9px 12px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .textContent_3EjL3 img {\n  max-width: 200px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .textContent_3EjL3 a {\n  color: inherit;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .similar_2T4kX {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  border-top: solid 0.5px #eceef0;\n  padding: 12px 15px 24px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .similar_2T4kX li {\n  margin-top: 12px;\n  cursor: pointer;\n  color: #1f8fff;\n  font-size: 14px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .cls_34Yp0 {\n  background: none !important;\n  padding: 0;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .hiddenId_2Nla0 {\n  font-size: 12px;\n  color: #eceef0;\n  position: absolute;\n  bottom: -17px;\n  width: 130px;\n  left: -31px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .loaderRing_hJphL {\n  position: absolute;\n  top: 50%;\n  left: -31px;\n  margin: 0;\n  margin-top: -10px;\n  width: 20px;\n  height: 20px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .loaderRing_hJphL .loaderRingLight_12O_g {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  animation: rotate-360_JaLB9 2.5s linear infinite running;\n  z-index: 1;\n  box-sizing: border-box;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .loaderRing_hJphL .loaderRingTrack_1dA4F {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  box-sizing: border-box;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .reSendStatus_2uvWb,\n.msgContent_1zaK0 .msgContainer_2njOc dd .noNet_nJIxw {\n  position: absolute;\n  top: 50%;\n  left: -31px;\n  margin: 0;\n  margin-top: -10px;\n  width: 20px;\n  height: 20px;\n}\n.msgContent_1zaK0 .msgContainer_2njOc dd .reSendStatus_2uvWb img,\n.msgContent_1zaK0 .msgContainer_2njOc dd .noNet_nJIxw img {\n  width: 100%;\n}\n.msgContent_1zaK0 .userMsg_3TreI dt {\n  margin-left: 8px;\n  float: right;\n}\n.msgContent_1zaK0 .userMsg_3TreI dd {\n  float: right;\n}\n.msgContent_1zaK0 .userMsg_3TreI dd .content_1mnBh,\n.msgContent_1zaK0 .userMsg_3TreI dd .bubbleDrip_3U5cJ {\n  border-radius: 24px 0 24px 24px;\n}\n.msgContent_1zaK0 .userMsg_3TreI dd .bubbleCapsule_3RQFO {\n  border-radius: 24px;\n}\n.msgContent_1zaK0 .userMsg_3TreI dd .bubbleSquare_3OKy1 {\n  border-radius: 1px;\n}\n.msgContent_1zaK0 .userMsg_3TreI dd .fontColor_2zoRh {\n  color: #000;\n}\n.msgContent_1zaK0 .userMsg_3TreI dd .fontColor_2zoRh a {\n  color: #000;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dt {\n  margin-right: 10px;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .content_1mnBh,\n.msgContent_1zaK0 .staffMsg_32JhC dd .bubbleDrip_3U5cJ {\n  border-radius: 0 24px 24px 24px;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .bubbleCapsule_3RQFO {\n  border-radius: 24px;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .bubbleSquare_3OKy1 {\n  border-radius: 1px;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .suggest_3hWZm {\n  position: absolute;\n  right: -48px;\n  top: 0;\n  width: 40px;\n  height: 36px;\n  line-height: 36px;\n  cursor: pointer;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .suggest_3hWZm span {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  background: url(https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/ea306395-4d67-4096-8363-f65bf120d0c1.png);\n  background-size: 20px 20px;\n  vertical-align: middle;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .suggest_3hWZm span:hover {\n  background: url(https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/9b178914-24f4-41b0-80c8-ba294d7e2d1b.png);\n  background-size: 20px 20px;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .suggest_3hWZm img {\n  width: 20px;\n  height: 20px;\n  vertical-align: middle;\n  background: #fff;\n  border-radius: 50%;\n  box-shadow: 0 2px 8px 0 rgba(66, 91, 109, 0.1);\n  cursor: not-allowed;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .answerList_2Tc3p {\n  position: absolute;\n  width: 132px;\n  left: 0;\n  top: 36px;\n  margin: 0;\n  padding: 0;\n  background: #fff;\n  border-radius: 8px;\n  box-sizing: border-box;\n  overflow: hidden;\n  z-index: 2;\n  box-shadow: 0 2px 15px 0 rgba(66, 91, 109, 0.2);\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .answerList_2Tc3p li {\n  list-style: none;\n  padding: 0 12px;\n  line-height: 40px;\n  cursor: pointer;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .answerList_2Tc3p li:hover {\n  background: #e7f3ff;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .answerList_2Tc3p img {\n  width: 20px;\n  display: inline-block;\n  border-radius: 50%;\n  margin-right: 8px;\n  vertical-align: middle;\n  box-shadow: 0 2px 8px 0 rgba(66, 91, 109, 0.1);\n  cursor: pointer;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .answerList_2Tc3p p {\n  display: inline-block;\n  font-size: 12px;\n  color: #333;\n  margin: 0;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .alRight_1gppJ {\n  right: 18px;\n  left: initial;\n}\n.msgContent_1zaK0 .staffMsg_32JhC dd .alTop_1Z3WM {\n  bottom: 32px;\n  top: initial;\n}\n.ellipsis_R4snO {\n  display: inline-block;\n  width: 90px;\n  height: 36px;\n  line-height: 36px;\n  text-align: center;\n}\n.ellipsis_R4snO span {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  margin-right: 5px;\n  border-radius: 50%;\n  background: #1f8fff;\n  animation: load_2Yt8x 1.04s ease infinite;\n}\n.ellipsis_R4snO span:last-child {\n  margin-right: 0px;\n}\n.ellipsis_R4snO span:nth-child(1) {\n  animation-delay: 0.13s;\n}\n.ellipsis_R4snO span:nth-child(2) {\n  animation-delay: 0.26s;\n}\n.ellipsis_R4snO span:nth-child(3) {\n  animation-delay: 0.39s;\n}\n.ellipsis_R4snO span:nth-child(4) {\n  animation-delay: 0.52s;\n}\n.ellipsis_R4snO span:nth-child(5) {\n  animation-delay: 0.65s;\n}\n.imgContent_2YDAg {\n  cursor: pointer;\n  height: 110px;\n}\n.imgContent_2YDAg img {\n  max-width: 160px;\n  max-height: 160px;\n  border-radius: 8px;\n}\n.shareLinkContent_eMk4q {\n  display: block;\n  width: 255px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(66, 91, 109, 0.2);\n  color: #000;\n  text-decoration: none;\n  padding: 12px;\n}\n.shareLinkContent_eMk4q .shareLink_2bIax {\n  margin: 0;\n}\n.shareLinkContent_eMk4q .shareLink_2bIax dt {\n  width: 100%;\n  height: 20px;\n  margin-left: 0;\n  vertical-align: initial;\n  float: none;\n}\n.shareLinkContent_eMk4q .shareLink_2bIax dt h5 {\n  margin: 0;\n  font-weight: normal;\n  font-size: 14px;\n  color: #333;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.shareLinkContent_eMk4q .shareLink_2bIax dd {\n  display: -webkit-flex;\n  display: -ms-flex;\n  display: flex;\n  margin-top: 12px;\n  max-width: inherit;\n  float: none;\n}\n.shareLinkContent_eMk4q .shareLink_2bIax dd .description_3M_Hk {\n  margin-right: 8px;\n  margin-top: 4px;\n  line-height: 1.5;\n  color: #8e9ca8;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  flex: 1;\n}\n.shareLinkContent_eMk4q .shareLink_2bIax dd .coverUrl_1NYtQ {\n  width: 48px;\n  height: 48px;\n}\n.shareLinkContent_eMk4q .shareLink_2bIax dd .coverUrl_1NYtQ img {\n  width: 48px;\n  height: 48px;\n}\n.fileContent_2jcuw {\n  display: block;\n  width: 255px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(66, 91, 109, 0.2);\n  color: #000;\n  text-decoration: none;\n  padding: 12px;\n  filter: none !important;\n}\n.fileContent_2jcuw .file_1hn8i {\n  display: -webkit-flex;\n  display: -ms-flex;\n  display: flex;\n  flex-direction: row-reverse;\n  margin: 0;\n}\n.fileContent_2jcuw .file_1hn8i dt {\n  width: 64px;\n  height: 64px;\n  text-align: center;\n  overflow: hidden;\n  line-height: 58px;\n  margin-right: 0;\n  margin-left: 10px;\n  border-radius: 4px;\n}\n.fileContent_2jcuw .file_1hn8i dt i {\n  font-weight: bold;\n  font-size: 22px;\n  color: #fff;\n}\n.fileContent_2jcuw .file_1hn8i dd {\n  float: initial;\n  flex: 1;\n}\n.fileContent_2jcuw .file_1hn8i .fileName_Kt4P6 {\n  color: #333;\n  overflow: hidden;\n  height: 40px;\n  line-height: 1.5;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  flex: 1;\n}\n.fileContent_2jcuw .file_1hn8i .downLoad_aXOgb {\n  display: block;\n  color: #1f77f3;\n  text-align: left;\n  margin-top: 4px;\n}\n.audio_2aun6 {\n  cursor: pointer;\n  min-width: 80px;\n  padding: 8px 12px;\n}\n.audio_2aun6 .audioMask_2Y4pw {\n  display: -webkit-flex;\n  display: -ms-flex;\n  display: flex;\n  justify-content: space-between;\n}\n.audio_2aun6 .audioMask_2Y4pw span {\n  min-width: 48px;\n  color: #8e9ca8;\n  font-size: 12px;\n  font-weight: 500;\n  margin-right: 16px;\n  line-height: 1.5;\n}\n.audio_2aun6 .voiceContainer_1HfNV {\n  display: none;\n}\n.audio_2aun6 .animation_2yM8z {\n  width: 16px;\n  height: 16px;\n  display: -webkit-flex;\n  display: -ms-flex;\n  display: flex;\n  justify-content: space-around;\n  margin: 0;\n  padding: 0;\n  padding-top: 4px;\n}\n.audio_2aun6 .animation_2yM8z li {\n  list-style: none;\n  width: 2px;\n  height: 8px;\n  border-radius: 1px;\n  background: #b3bdc5;\n}\n.audio_2aun6 .animation_2yM8z li:nth-of-type(2),\n.audio_2aun6 .animation_2yM8z li:nth-of-type(4) {\n  margin-top: 2px;\n}\n.audio_2aun6 .actived_1ImVD li {\n  animation: playing_KjvIa 1s ease-in-out infinite;\n}\n.audio_2aun6 .actived_1ImVD li:nth-of-type(2),\n.audio_2aun6 .actived_1ImVD li:nth-of-type(4) {\n  margin-top: 2px;\n  animation-delay: 0.5s;\n}\n.videoContent_3r_fp {\n  line-height: 0;\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n}\n.videoContent_3r_fp .video_2spk- {\n  max-width: 160px;\n  max-height: 160px;\n}\n.videoContent_3r_fp .model_3gJi8 {\n  cursor: pointer;\n  position: absolute;\n  background: rgba(0, 0, 0, 0.4);\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n.videoContent_3r_fp .model_3gJi8 .playBox_1X1qk {\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 50%;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n}\n.videoContent_3r_fp .model_3gJi8 .playBox_1X1qk img {\n  width: 100%;\n  height: 100%;\n}\n.richTextContent_3FJIr {\n  overflow: hidden;\n  min-height: 32px;\n  padding: 8px 8px 0;\n}\n.richTextContent_3FJIr img {\n  width: 100% !important;\n}\n.fullContent_1n4Pw {\n  max-width: 570px;\n}\n.phoneContent_2v_H6 {\n  max-width: 280px;\n}\n@keyframes playing_KjvIa {\n  0% {\n    margin-top: 0;\n  }\n  50% {\n    margin-top: 2px;\n  }\n}\n@keyframes load_2Yt8x {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes rotate-360_JaLB9 {\n  from {\n    -moz-transform: rotate(0);\n    -ms-transform: rotate(0);\n    -webkit-transform: rotate(0);\n    transform: rotate(0);\n  }\n  to {\n    -moz-transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",""]),exports.locals={time:"time_2YtKH",tips:"tips_11eGS",msgContent:"msgContent_1zaK0",msgContainer:"msgContainer_2njOc",avatar:"avatar_1rwWo",circle:"circle_3Hy0S",content:"content_1mnBh",textContent:"textContent_3EjL3",similar:"similar_2T4kX",cls:"cls_34Yp0",hiddenId:"hiddenId_2Nla0",loaderRing:"loaderRing_hJphL",loaderRingLight:"loaderRingLight_12O_g","rotate-360":"rotate-360_JaLB9",loaderRingTrack:"loaderRingTrack_1dA4F",reSendStatus:"reSendStatus_2uvWb",noNet:"noNet_nJIxw",userMsg:"userMsg_3TreI",bubbleDrip:"bubbleDrip_3U5cJ",bubbleCapsule:"bubbleCapsule_3RQFO",bubbleSquare:"bubbleSquare_3OKy1",fontColor:"fontColor_2zoRh",staffMsg:"staffMsg_32JhC",suggest:"suggest_3hWZm",answerList:"answerList_2Tc3p",alRight:"alRight_1gppJ",alTop:"alTop_1Z3WM",ellipsis:"ellipsis_R4snO",load:"load_2Yt8x",imgContent:"imgContent_2YDAg",shareLinkContent:"shareLinkContent_eMk4q",shareLink:"shareLink_2bIax",description:"description    line-height: 32px;\n    box-shadow: 0 2px 4px 0 rgba(66, 91, 109, 0.2);\n    top: 10px;\n    left: -44px;\n  }\n  .chatInput_36lH_ .ctrl_3ULhU .pullLeft_287xp .picture_1g8pX {\n    margin-top: 4px;\n  }\n}\n",""]),exports.locals={chatInput:"chatInput_36lH_",wulaiLogo:"wulaiLogo_1QztB",ctrl:"ctrl_3ULhU",pullLeft:"pullLeft_287xp",picture:"picture_1g8pX",uploader:"uploader_-wISN",pullRight:"pullRight_2nejX",sendBtn:"sendBtn_3wDl-",boderSquare:"boderSquare_1119t",borderCircle:"borderCircle_3SERG"}},function(module){module.exports={name:"web-sdk",version:"3.30.0",description:"IM SDK",main:"dist/IMLib.js",scripts:{dev:"better-npm-run dev",node:"node ./dist/server.js",pm2:"pm2 start --no-daemon pm2.json",build:"better-npm-run build"},betterScripts:{dev:{command:"webpack-dev-server",env:{NODE_ENV:"development"}},build:{command:"webpack --progress --colors",env:{NODE_ENV:"production"}}},repository:{type:"git",url:"git+ssh://git@gitlab.com/laiye-frontend-repos/web-sdk.git"},keywords:["im"],author:"wulai",license:"ISC",bugs:{url:"https://gitlab.com/laiye-frontend-repos/web-sdk/issues"},homepage:"https://gitlab.com/laiye-frontend-repos/web-sdk#readme",dependencies:{"@types/uuid":"3.4.4","copy-to-clipboard":"3.2.0","core-js":"3.0.0",uuid:"3.3.2","whatwg-fetch":"3.0.0",xss:"1.0.6"},devDependencies:{"better-npm-run":"0.1.1",colors:"1.3.3","css-loader":"2.1.0","html-webpack-plugin":"3.2.0",less:"3.9.0","less-loader":"4.1.0","mini-css-extract-plugin":"0.5.0","style-loader":"0.23.1","ts-loader":"5.3.3",typescript:"3.3.3","url-loader":"1.1.2",webpack:"4.29.3","webpack-cli":"3.2.3","webpack-dev-server":"3.1.14"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var message_1=__webpack_require__(28),config_1=__webpack_require__r={MAX_TIMES:3,coreset:fuis.isConnecting=!1)},reconnect:function(){var _this=this;if(this.count>=this.MAX_TIMES)return this.reset(),Promise.reject("重连了很多次，还是ct=RongIMLib.RongIMClient.reconnect;return new Promise((function(resolve,reject){var handleError=function(err){_this.count+=1,_this.isConnecting=!1,reject(err)};reconnect({onSuccess:function(){console.log("重连成功。"),_this.reset(),resolve()},onTokenIncorrect:function(){return handleError("无效的令牌")},onError:function(error){handleError("重连异常："+error)}},{auto:!0,url:"https://cdn.ronghub.com/RongIMLib-2.4.0.min.js",rate:[1e3]})}))}};exports.init=function(appKey,rcToken){if(_instance)return new Promise((function(resolve){return resolve(_instance)}));var RongIMClient=RongIMLib.RongIMClient;try{RongIMClient.init(appKey,null,{showError:!0}),RongIMLib.RongIMEmoji.init({appKey:appKey})}catch(e){console.error("RongIMClient.init",e.message,e.stack)}return RongIMClient.setConnectionStatusListener({onChanged:function(status){var STATUS=RongIMLib.ConnectionStatus,NetWork=window.appLocale.NetWork;switch(status){case STATUS.KICKED_OFFLINE_BY_OTHER_CLIENT:stream_1["default"].trigger(config_1.STREAM_LISTEN.RECONNECT_RONGCOULD,{isShowModal:!0,showBtn:!0,content:NetWork.rongMsg});break;case STATUS.DISCONNECTED:case STATUS.NETWORK_UNAVAILABLE:case STATUS.CONNECTION_CLOSED:_instance&&(console.error("融云连接异常："+status+" - "+STATUS[status]),"undefined"!=typeof navigator&&navigator.onLine&&Monitor.reconnect());break;case STATUS.C"+(new Date).getTime());break;case STATUS.CONNECTING:}}}),_instance=RongIMClient.getInstance(),RongIMLib.RongIMClient.setOnReceiveMessageListener({onReceived:function(msg){var content=msg.content;if("undefined"!=typeof content.extra){var msfig_1.STREAM_LISTEN.IS_SHOW_LOADING_MSG,!1);var message=message_1.reRongMsgInfo(msgBody);stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message)}}}),new Promise((function(resolve,reject){RongIMClient.connect(rcToken,{onSuccess:function(id){console.log("id ---\x3e",id),resolve(_instance)},onTokenIncorrect:function(){var txt="无效的通讯令牌，请联系技术维护人员。";console.error(txt,appKey,rcToken),reject(txt)},onError:function(error){var txt="通讯管道连接失败："+error+"，请联系技术维护人员。";console.error(txt,appKey,rcToken),reject(txt)}})}))},exports.disconnect=function(){_instance&&(_instance.disconnect(),_instance=null)},exports["default"]={init:exports.init,disconnect:exports.disconnect,Monitor:Monitor}},fun"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Headers",(function(){return Headers})),__webpack_require__.d(__webpack_exports__,"Request",(function(){return Request})),__webpack_require__.d(__webpack_exports__,"Response",(function(){return Response})),__webpack_require__.d(__webpack_exports__,"DOMException",(functejected=consumedlob),promise;if(this._bodyArr view=new Uint8Array(e(view[i]);return charError("could not read rmData&&(this.formData=funnction(name,value){namelue+", "+value:value},Heanction(name){return name=nProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.proto allowed for GET or Har form=new FormData;return body.trim().split("&").forEach((function(bytes){if(bytes),decodeURIComptatus=options.status===undefined?200:options.status,this.ok=ttBody(bodyInit)}Request.prototype.clone=function(){return new Request(this,{body:on(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=funtStatuses.aborted)return reject(new DOMException("Aborted","AbortError"));var xhr=new XMLHttpReqar rawHeadert,headers:(rawHeaders=xhr.getAllResponseHeaders()||"",headers=new Headers,rawHeaders.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="resporror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.onabort=function(){reject(new DOMException("Aborted","AbortError"))},xhr.open(request.method,request.url,!0),"include"===request.credentials?xhr.withCredentials=!0:"omit"===request.credentials&&(xhr.withCredentials=!1),"responseType"in xhr&&support_blob&&(xhr.responseType="blob"),request.headers.forEach((function(value,name){xhr.setRequestHeader(name,value)})),request.signal&&(request.signal.addEventListener("abort",abortXhr),xhr.onreadystatechange=function(){4===xhr.readyState&&request.signal.removeEventListener("abort",abortXhr)}),xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)}))}fetch.polyfill=!0,self.fetch||(self.fetch=fetch,self.Headers=Headers,self.Request=Request,self.Response=Response)},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(102),component_1=__webpack_require__(2),utils_1=__webpack_require__(9),message_1=__webpack_require__(28),config_1=__webpack_require__(1),stream_1=__webpack_require__(6),app_data_1=__webpack_require__(103),user_data_1=__webpack_require__(64),QuickReplyMsg_1=__webpack_require__(104),SugList_1=__webpack_require__(220),ChatInput=function(_super){function ChatInput(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.onPressEnter=function(event){var mySug=_this.refs.mysug,$textarea=_this.getNode().querySelector("textarea");mySug&&(mySug.data.isShowSugPanel=!1);var text=$textarea.value.replace(/(^\s*)|(\s*$)/g,"");if(!text)return event.preventDefault(),event.stopPropagation(),!1;if(event.shiftKey&&13===event.keyCode)console.log("换行 > ",text);else{event.preventDefault(),event.stopPropagation();var msg=message_1.createTextMsg(text),message=message_1.sendRtMessage(msg.msg_body,msg.msg_type,!0);stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message),_this.data.inputValue&&(_this.data.inputValue="",setTimeout((function(){mySug.data.isShowSugPanel=!1,mySug.data.sugList=[]}),0))}},_this.getUserSugList=function(){return __awaiter(_this,void 0,void 0,(function(){var textarea,value,mySug,sugList,err_1;return __generator(this,(function(_a){switch(_a.label){case 0:textarea=document.getElementsByTagName("textarea")[0],value=textarea.value,mySug=this.refs.mysug,_a.label=1;case 1:return _a.trys.push([1,4,,5]),this.data.isShowSug?value?[4,user_data_1.getUserInputSugList(value)]:[2]:[3,3];case 2:sugList=_a.sent(),mySug.data.isShowSugPanel=0!==sugList.user_suggestions.length,mySug.data.sugList=sugList.user_suggestions.slice(0,4),_a.label=3;case 3:return[3,5];case 4:return err_1=_a.sent(),console.error("用户sug检索失败："+err_1),[3,5];case 5:return[2]}}))}))},_this.handleUpload=function(evt){return __awaiter(_this,void 0,void 0,(function(){var Uploader,file,stsToken,client,ext,storeAs;return __generator(this,(function(_a){switch(_a.label){case 0:return evt.target.files.length?(Uploader=window.appLocale.Uploader,file=evt.target.files[0],10485760,["jpeg","png","gif"].indexOf(file.type.split("/")[1])<0?(stream_1["default"].trigger(config_1.STREAM_LISTEN.TOAST,{isShow:!0,message:Uploader.imgType}),console.erro760?(stream_1["default"].trigger(config_1.STREAM_LISTEN.TOAST,{isShow:!0,message:Uploader.imgSize}),console.error(Uploader.imgSize),[2]):[4,app_data_1.getStsToken()]):[2];case 1:return(stsToken=_a.sent())?(client=new window.OSS.Wrapper({accessKeyId:stsToken.access_key_id,accessKeySecret:stsToken.access_key_secret,stsToken:stsToken.security_token,endpoint:stsToken.end_point,bucket:stsToken.bucket,secure:"https:"}),ext=file.name.split(".").slice(-1)[0]||"unknown",storeAs=stsToken.access_dir+"/"+(file.uid||file.name)+Date.now()+"."+ext,[2,client.multipartUpload(storeAs,file).then((function(result){if(result&&result.res)return result.res.requestUrls.map((function(url){return url.split("?")[0]}))}))["catch"]((function(err){console.error(Uploader.errMsg,err.message),stream_1["default"].trigger(config_1.STREAM_LISTEN.TOAST,{isShow:!0,message:Uploader.errMsg})}))]):[2,console.error("Can not get STS.")]}}))}))},_this}return __extends(ChatInput,_super),ChatInput.prototype.create=function(){var pageConfig=this.data.pageConfig,_a=window.appLocale,ChatInput=_a.ChatInput,Logo=_a.Logo;this.data.chatShape=config_1.TEXTAREA_SHAPE[pageConfig.frame_shape];var isPhone=document.body.clientWidth<=414;this.data.placeholder=isPhone?ChatInput.placeholder:ChatInput.pcPlaceholder,this.data.wulaiLogo=Logo.waterMark},ChatInput.prototype.mount=function(){var _this=this;this.useEvents();var mySug=this.refs.mysug,$textarea=this.getNode().querySelector("textarea"),$input=this.getNode().querySelector("input");stream_1["default"].listen(config_1.STREAM_LISTEN.IS_SHOW_SUGLIST,(function(input){mySug.data.isShowSugPanel=inputar validate=utils_1.debounce((function(){return _this.getUserSugList()}),380);this.addEvent("input","textarea",(function(evt){var value=evt.target.value;_this.data.inputValue=value,value||(mySug.data.isShowSugPanel=!1,mySug.data.sugList=[]),value.length&&value.length<25&&validate()})),this.addEvent("keydown","textarea",(function(evt){if(13===evt.keyCode){if(evt.shiftKey)return;return this.onPressEnter(evt)}})),this.addEvent("click",".edit-block",(function(){$textarea.focus()})),this.addEvent("click",".send-msg",(function(evt){if($textarea.value)return ChatInput.isClickSendBtn=!0,this.onPressEnter(evt)})),$input.addEventListener("click",(function(evt){evt.stopPropagation(),$textarea.blur()})),$input.addEventListener("change",(function(evt){return __awaiter(_this,void 0,void 0,(function(){var urls,msg,message;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,this.handleUpload(evt)];case 1:return urls=_a.sent(),msg=message_1.createImageMsg(urls[0]),message=message_1.sendRtMessage(msg.msg_body,msg.msg_type,!0),stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message),[2]}}))}))})),$textarea.addEventListener("blur",(function(){setTimeout((function(){ChatInput.isClickSendBtn||window.scrollTo(0,document.body.scrollHeight),ChatInput.isClickSendBtn=!1}),0)}))},ChatInput.isClickSendBtn=!1,ChatInput.data={inputValue:"",sugList:[],chatShape:"",placeholder:"",wulaiLogo:""},ChatInput.template='\n  <div class="'+style.chatInput+' {{ chatShape }}">\n    <component name="QuickReplyMsg", :pageConfig="pageConfig" />\n    {% component ref="mysug",name="SugList",sugList=sugList %}\n\n    {% if isShowWulaiLogo %}\n      <img src="{{ wulaiLogo }}" class="'+style.wulaiLogo+'"/>\n    {% endif %}\n\n    {# 千万不要换行！ #}\n    <textarea placeholder="{{ placeholder }}" @value="inputValue" maxlength="2048" class="inputcontent needsclick"></textarea>\n\n    <div class="'+style.ctrl+' edit-block">\n      <div class="'+style.pullLeft+'">\n        <div class="'+style.picture+' wulai-web-sdk-upload-icon">\n          <input type="file" accept="image/*" class="'+style.uploader+'"/>\n          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n            <g fill="none" fill-rule="evenodd">\n              <path id="instagram" fill="#b3bdc5" d="M17.429 9.714a.857.857 0 1 1 0-1.715.857.857 0 0 1 0 1.715M12 15.428A3.432 3.432 0 0 1 8.571 12 3.432 3.432 0 0 1 12 8.571 3.432 3.432 0 0 1 15.429 12 3.432 3.432 0 0 1 12 15.428m6.286-9.714H12A1.716 1.716 0 0 0 10.286 4H9.142a1.717 1.717 0 0 0-1.714 1.714H5.714A1.717 1.717 0 0 0 4 7.43v9.142a1.717 1.717 0 0 0 1.714 1.715h12.572A1.717 1.717 0 0 0 20 16.57V7.43a1.716 1.716 0 0 0-1.714-1.715"/>\n            </g>\n          </svg>\n        </div>\n      </div>\n\n      <div class="'+style.pullRikground: url(https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/64612447-d183-4a89-b02d-c0d4aff2fae7.png);\n  background-size: contain;\n}\n.quickModal_31CUP .arrow_1J8V_ img {\n  width: 12px;\n  vertical-align: middle;\n}\n.quickModal_31CUP .rightArrow_33Ib_ {\n  transform: rotate(180deg);\n}\n@media screen and (min-width: 320px) and (max-width: 414px) {\n  .quickModal_31CUP .arrow_1J8V_ span {\n    background: url(https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/64612447-d183-4a89-b02d-c0d4aff2fae7.png);\n    background-size: contain;\n  }\n}\n",""]),exports.locals={quickModal:"quickModal_31CUP",replyList:"replyList_u8RMn",fontColor:"fontColor_zn1pI",arrow:"arrow_1J8V_",rightArrow:"rightArrow_33Ib_"}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(221),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),message_1=__webpack_require__(28),SugList=function(_super){function SugList(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(SugList,_super),SugList.prototype.mount=function(){this.useEvents(),this.addEvent("click",".sugList",(function(evt){return __awaiter(this,void 0,void 0,(function(){var value,msg,message;return __generator(this,(function(_a){return stream_1["default"].trigger(config_1.STREAM_LISTEN.IS_SHOW_SUGLIST,{isShow:!1,isClear:!0}),value=evt.target.innerText,msg=message_1.createTextMsg(value),message=message_1.sendRtMessage(msg.msg_body,msg.msg_type,!0),stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message),this.data.164px;\n  min-height: 41px;\n  z-index: 2;\n}\n.sugBox_5ihLf .sugs_3BfUI {\n  margin: 0;\n  padding: 0;\n  background: #fff;\n  height: 100%;\n  overflow: hidden;\n  overflow-y: scroll;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px 0 rgba(66, 91, 109, 0.2);\n}\n.sugBox_5ihLf .sugs_3BfUI li {\n  list-style: none;\n  line-height: 41px;\n  padding: 0 8px;\n  font-size: 12px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.sugBox_5ihLf .sugs_3BfUI li:hover {\n  background: #e7f3ff;\n}\n@media screen and (min-width: 320px) and (max-width: 414px) {\n  .sugBox_5ihLf {\n    bottom: 90px;\n  }\n}\n",""]),exports.locals={sugBox:"sugBox_5ihLf",sugs:"sugs_3BfUI"}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(105),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),utils_1=__webpack_require__(9),message_data_1=__webpack_require__(54),Msg_1=__webpack_require__(106),HistoryMsgPanel=function(_super){function HistoryMsgPanel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.getHistoryList=function(){return __awaiter(_this,void 0,void 0,(function(){var $content,firstMsgId,data,oldMsgs,messages,newMsgs,err_1;return __generator(this,(function(_a){switch(_a.label){case 0:if($content=document.getElementById("msg-panel"),!($content.scrollTop<150))return[3,4];if(!this.data.message.has_more)return[3,4];firstMsgId=this.data.message.msg[0].msg_id,_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,message_data_1.getMsgHistory(firstMsgId,this.data.pageNum)];case 2:return data=_a.sent(),oldMsgs=this.data.message.msg,messages=data.msg.concat(oldMsgs),newMsgs={has_more:data.has_more,msg:messages},this.data.message=newMsgs,[3,4];case 3:return err_1=_a.sent(),console.error(err_1),[3,4];case 4:return[2]}}))}))},_this}return __extends(HistoryMsgPanel,_super),HistoryMsgPanel.prototype.create=function(){return __awaiter(this,void 0,void 0,(function(){var Message,data,filterMsg,isShow,err_2;return __generator(this,(function(_a){switch(_a.label){case 0:Message=window.appLocale.Message,this.data.noMoreMsg=Message.noMore,_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,message_data_1.getMsgHistory()];case 2:return data=_a.sent(),filterMsg=data.msg.filter((function(msg){return!(msg.msg_body.event&&"ENTER"===msg.msg_body.event.event_type)})),this.data.message=__assign({},data,{msg:filterMsg}),isShow=0!==filterMsg.length,stream_1["default"].trigger(config_1.STREAM_LISTEN.IS_SHOW_RT_TIPS,isShow),[3,4];case 3:return err_2=_a.sent(),console.error(err_2),[3,4];case 4:return[2]}}))}))},HistoryMsgPanel.prototype.mount=function(){var $conel.components=[Msg_1["default"]],HistoryMsgPanel}(component_1["default"]);exports["default"]=HistoryMsgPanel},function(module,exports,__webpack_require__){(exports=module.exports=__webpack_require__(24)(!1)).push([module.i,".holder_CiUw7 {\n  margin: 0;\n  clear: both;\n  text-align: center;\n  padding: 27px 0;\n}\n.holder_CiUw7 .tips_3hJiu {\n  background: #d9dee2;\n  height: 24px;\n  line-height: 24px;\n  border-radius: 12px;\n  color: #8e9ca8;\n  font-size: 12px;\n  display: inline-block;\n  padding: 0 8px;\n}\n.noMore_jJBz7 {\n  font-size: 12px;\n  text-align: center;\n  color: #8e9ca8;\n  margin: 20px 0 10px;\n}\n",""]),exports.locals={holder:"holder_CiUw7",tips:"tips_3hJiu",noMore:"noMore_jJBz7"}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),utils_1=__webpack_require__(9),config_1=__webpack_require__(1),message_1=__webpack_require__(28),stream_1=__webpack_require__(6),MsgContent_1=__webpack_rloadPng=__webpack_require__(238),faildPng=__webpack_require__(239),UserMsg=function(_super){function UserMsg(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(UserMsg,_super),UserMsg.prototype.create=function(){var _a=this.data,msg=_a.msg,pageConfig=_a.pageConfig,MSG_TYPE=msg.msg_type;if(this.data.avatarShape=config_1.AVATAR_SHAPE[pageConfig.avatar_shape],this.data.chatBar=config_1.CHAT_BAR[pageConfig.chat_bar],this.data.isShowUserAvatar=2!==pageConfig.user_avatar_chose&&Boolean(pageConfig.user_avatar),1===pageConfig.theme_chose)this.data.fontColor=pageConfig.font_color||"#fff";else{var color=config_1.BACKGROUND_COLOR.find((function(color){return color===pageConfig.theme_color}));this.data.fontColor=void 0===color?"#fff":"#000"}this.data.hasOwnContent="IMAGE"===MSG_TYPE||"FILE"===MSG_TYPE||"SHARELINK"===MSG_TYPE||"VIDEO"===MSG_TYPE},UserMsg.prototype.mount=function(){var _this=this;this.useEvents(),this.data.msg.isUserSend&&(this.sendMsg(),window.addEventListener("online",(function(){_this.data.status.isSend||(_this.data.status={isPending:!1,isError:!1,isReSend:!0,isSend:!0})})),window.addEventListener("offline",(function(){_this.data.status.isSend||(_this.data.status={isPending:!1,isError:!0,isReSend:!1})}))),this.addEvent("click",".re-send",(function(){_this.sendMsg()}))},UserMsg.prototype.sendMsg=function(){return __awaiter(this,void 0,void 0,(function(){var msg,content,err_1,msg_1,message;return __generator(this,(function(_a){switch(_a.label){case 0:if(!(msg=this.data.msg).isUserSend)return[3,4];this.data.status={isPending:!0,isError:utils_1.isOnline(),isReSend:!1,isSend:!0},_a.label=1;case 1:switch(_a.trys.push([1,3,,4]),content=null,msg.msg_type){case"TEXT":content=message_1.createTextMsg(msg.msg_body.text.content);break;case"IMAGE":content=message_1.createImageMsg(msg.msg_body.image.resource_url)}return content?[4,message_data_1.sendMsg(content)]:[2];case 2:return _a.sent().msg_id?(stream_1["default"].trigger(config_1.STREAM_LISTEN.IS_SHOW_LOADING_MSG,!0),this.data.status={isPending:!1,isError:utils_1.isOnline(),isReSend:!1,isSend:!0}):this.data.status={isPending:!1,isError:utils_1.isOnline(),isReSend:!0,isSend:!1},[3,4];case 3:return 8===(err_1=_a.sent()).code?(this.data.status={isPending:!1,isError:!0},msg_1=message_1.createNoticeMsg(err_1.message),message=message_1.sendRtMessage(msg_1.msg_body,msg_1.msg_type,!1),stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message),[2]):(this.data.status={isPending:!1,isError:utils_1.isOnline(),isReSend:!0,isSend:!1},[3,4]);case 4:return[2]}}))}))},UserMsg.data={avatarShape:"",chatBar:"",isShowUserAvatar:!1,hasOwnContent:!1,status:{isPending:!1,isError:!1,isReSend:!1,isSend:!1},fontColor:""},UserMsg.template='\n    <div class="'+style.msgContent+'">\n      <dl class="'+style.msgContainer+" "+style.userMsg+'">\n        {% if isShowUserAvatar %}\n          <dt>\n            <div class="'+style.avatar+' {{ avatarShape }}" style="background: {{ pageConfig.theme_color}}">\n              <img src="{{ pageConfig.user_avatar }}?x-oss-process=image/resize,w_72,h_72/quality,q_80" alt="user-avatar"/>\n            </div>\n          </dt>\n        {% endif %}\n        <dd>\n          <div\n            class="'+style.content+" {{ '"+style.cls+'\' if hasOwnContent else \'\' }} {{ chatBar }} "\n            style="background: {{ pageConfig.theme_color}}; color: {{ fontColor }}"\n          >\n            {% component name="MsgContent",msg=msg,pageConfig=pageConfig,fullScreen=fullScreen %}\n          </div>\n\n          {# 消息重试状态 #}\n          {% if status.isReSend %}\n            <div class="'+style.reSendStatus+' re-send">\n              <img src="'+reloadPng+'"/>\n            </div>\n          {% endif %}\n\n          {# 没网状态 #}\n          {% if status.isError %}\n            <div class="'+style.noNet+'">\n              <img src="'+faildPng+'"/>\n            </div>\n          {% endif %}\n\n          {# 消息发送状态 #}\n          {% if status.isPending %}\n            <div class="'+style.loaderRing+'">\n              <span\n                class="'+style.loaderRingLight+'"\n                style="border:4px solid {{ pageConfig.theme_color }};border-left: 4px solid transparent;"\n              >\n              </span>\n\n              <span\n                class="'+style.loaderRingTrack+'"\n                style="border:4px solid {{ pageConfig.theme_color }};opacity:0.5"\n              >\n              </span>\n            </div>\n          {% endif %}\n\n          <div class="'+style.hiddenId+'">#{{ msg.msg_id }}</div>\n        </dd>\n      </dl>\n    </div>\n  ',UserMsg.components=[MsgContent_1["default"]],UserMsg}(component_1["default"]);exports["default"]=UserMsg},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),utils_1=__webpack_require__(9),config_1=__webpack_require__(1),message_1=__webpack_require__(28),security_1=__webpack_require__(227),user_data_1=__webpack_require__(64),TextContent=function(_super){function TextContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TextContent,_super),TextContent.prototype.create=function(){var _a=this.data.msg,msg_body=_a.msg_body,similar_response=_a.similar_response,direction=_a.direction;this.data.content=RongIMLib.RongIMEmoji.symbolToEmoji(msg_body.text.content),direction===config_1.MSG_DIRECTION.staff&&similar_response&&(this.data.similar_response=similar_response);var content=this.data.content,text=security_1.xssFilter(content),reg2=/\n|\\n/g;if(/<img.*?(?:>|\/>)/gi.test(text)||/<a[^>]*href=['"]([^"]*)['"][^>]*>(.*?)<\/a>/g.test(text))text=text;else{var res=text.replace(/((http[s]?\:\/\/)?([\w\-]+\.)+[A-Za-z]{2,}([\:\d]*)?([\/\?][\w\-\.\/?\@\%\!\&=\+\~\:\#\;\,]*)?)/gi,(function(kw){return"<a href="+utils_1.prefixUrl(kw)+' target="_blank">'+kw+"</a>"}));text=res}if(reg2.test(text)){var test=text.replace(reg2,"<br />");text=test}this.data.content=text},TextContent.prototype.mount=function(){var _this=this;this.useEvents(),this.addEvent("click",".similar-list",(function(evt){return __awaiter(_this,void 0,void 0,(function(){var url,value,msg,message;return __generator(this,(function(_a){switch(_a.label){case 0:return url=evt.target.dataset.key,value=evt.target.innerText,msg=message_1.createTextMsg(value),url?[3,1]:(message=message_1.sendRtMessage(msg.msg_body,msg.msg_type,!0),stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message),[3,3]);case 1:return message=message_1.sendRtMessage(msg.msg_body,msg.msg_type),stream_1["default"].trigger(config_1.STREAM_LISTEN.SEND_MSG,message),[4,user_data_1.simulateMessage(url)];case 2:_a.sent(),_a.label=3;case 3:return[2]}}))}))}))},TextContent.data={content:"",similar_response:[]},TextContent.template='\n    <div>\n      <div class="'+style.textContent+' staff-msg-file">{{ content }}</div>\n\n      {% if similar_response.length %}\n        <ul class="'+style.similar+'">\n          {% for similar in similar_response %}\n            <li\n              class="similar-list"\n              data-key="{{ similarrrc"],ul:["class"],li:["class","style"]},css:{whiteList:{color:!0}}};exports.xssFilter=function(html){return xss_1.filterXSS(html,options)}},function(module,exports,__webpack_require__){var DEFAULT=__dow.filterXSS=module.exportCSS.prototype.process=func;module.exports=function(css,onAttr){";"!==(css=_.trimRight(css))[css.length-1]&&(css+=";");var cssLength=css.length,isParenthesisOpen=!1,lastPos=0,i=0,retCSS="";function addNewAttr(){if(!isParenthesisOpen){var source=_.trim(css.slice(lions||{})).stripIgnoreTag&===(html=_.trim(html.slice(i+1,-1)))[html.length-1];return isClosing&&(html=_.trim(html.slice(0,-1))),{html:html,closing:isClosing}}(html),whiteAttrList=whiteList[tag],attrsHtml=parseAttr(attrs.html,(function(name,value){var ret,isWhiteAttr=-1!==_.indexOf(whiteAttrList,name);return isNull(ret=onTagAttr(tag,name,value,isWhiteAttr))?isWhiteAttr?(value=safeAttrValue(tag,name,value,cssFilter))?name+'="'+value+'"':name:isNull(ret=onIgnoreTagAttr(tag,name,value,isWhiteAttr))?void 0:ret:ret}));html="<"+tag;return attrsHtml&&(html+=" "+attrsHtml),attrs.closing&&(html+=" /"),html+=">"}return isNull(ret=onIgnoreTag(tag,html,info))?escapeHtml(html):ret}),escapeHtml);return stripIgnoreTagBody&&(retHtml=stripIgnoreTagBody.remove(retHtml)),retHtml},module.exports=FilterXSS},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),ImgContent=function(_super){function ImgContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ImgContent,_super),ImgContent.prototype.create=function(){var body=this.data.body;this.data.resourceUrl=body.image.resource_url},ImgContent.prototype.mount=function(){var _this=this;this.useEvents(),this.addEvent("click",".img-content",(function(){stream_1["default"].trigger(config_1.STREAM_LISTEN.IMG_URL,{type:"image",url:_this.data.resourceUrl,isShow:!0})}))},ImgContent.data={resourceUrl:""},ImgContent.template='\n    <div class="'+style.imgContent+' img-content">\n      <img src="{{ resourceUrl }}" />\n    </div>\n  ',ImgContent}(component_1["default"]);exports["default"]=ImgContent},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),utils_1=__webpack_require__(9),ShareLinkContent=function(_super){function ShareLinkContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ShareLinkContent,_super),ShareLinkContent.prototype.create=function(){var body=this.data.body;this.data.shareLink=__assign({},body.share_link,{destination_url:utils_1.prefixUrl(body.share_link.destination_url)})},ShareLinkContent.data={shareLink:{cover_url:"",description:"",destination_url:"",title:""}},ShareLinkContent.template='\n    <a class="'+style.shareLinkContent+'" href="{{ shareLink.destination_url}}" target="_blank">\n      <dl class="'+style.shareLink+'">\n        <dt>\n          <h5>{{ shareLink.title }}</h5>\n        </dt>\n\n        <dd>\n          <div class="'+style.description+'">{{ shareLink.description }}</div>\n          <div class="'+style.coverUrl+'">\n            {% if shareLink.cover_url %}\n              <img src="{{ shareLink.cover_url }}"/>\n            {% else %}\n              <img src="https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/69135fc2-2a9a-47c2-8e10-248f0df9bb6c.png"/>\n            {% endif %}\n          </div>\n        </dd>\n      </dl>\n    </a>\n  ',ShareLinkContent}(component_1["default"]);exports["default"]=ShareLinkContent},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),utils_1=__webpack_require__(9),config_1=__webpack_require__(1),FileContent=function(_super){function FileContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(FileContent,_super),FileContent.prototype.create=function(){var Message=window.appLocale.Message,body=this.data.body;this.data.file=__assign({},body.file,{resource_url:utils_1.prefixUrl(body.file.resource_url)}),this.data.ext=body.file.file_name.split(".").slice(-1)[0]||"?",this.data.color=config_1.EXT_COLOR[this.data.ext]||config_1.EXT_COLOR["default"],this.data.downloadTxt=Message.download},FileContent.data={file:{file_name:"",resource_url:""},ext:"",color:"",downloadTxt:""},FileContent.template='\n    <a class="'+style.fileContent+'" href="{{ file.resource_url }}" target="_blank">\n      <dl class="'+style.file+' staff-msg-file">\n        <dt style="background: {{ color }}">\n          <i>{{ ext }}</i>\n        </dt>\n\n        <dd>\n          <div class="'+style.fileName+'">\n            {{ file.file_name }}\n          </div>\n\n          <span\n            class="'+style.downLoad+"\"\n            style=\"\n              color: {{ pageConfig.theme_color }};\n              filter: brightness(0.95);\n              text-decoration: {{ 'underline' if pageConfig.theme_color === '#000000' else 'initial'}};\n            \"\n          >\n            {{ downloadTxt }}\n          </span>\n        </dd>\n      </dl>\n    </a>\n  ",FileContent}(__webpack_require__(2)["default"]);exports["default"]=FileContent},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),utils_1=__webpack_require__(9),AudioContent=function(_super){function AudioContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(AudioContent,_super),AudioContent.prototype.create=function(){var body=this.data.body,Message=window.appLocale.Message;this.data.btnText=Message.audio,this.data.voice=__assign({},body.voice,{resource_url:utils_1.prefixUrl(body.voice.resource_url)})},AudioContent.prototype.mount=function(){var _this=this;this.useEvents();var that=this,Message=window.appLocale.Message,audio=this.getNode().querySelector("audio");audio.addEventListener("loadeddata",(function(){var duration=Math.ceil(audio.duration),minute=utils_1.zeroPad(Math.floor(duration/60)),second=utils_1.zeroPad(Math.floor(duration%60));that.data.time=minute+":"+second})),this.addEvent("click",".audio",(function(){_this.data.isPlaying?(audio.pause(),audio.currentTime=0,_this.data.isPlaying=!1,_this.data.btnText=Message.audio):(audio.play(),_this.data.isPlaying=!0,_this.data.btnText=_this.data.time,audio.onended=function(){_this.data.isPlaying=!1,_this.data.btnText=Message.audio},audio.onpause=function(){_this.data.isPlaying=!1,_this.data.btnText=Message.audio})}))},AudioContent.data={voice:{recognition:"",resource_url:"",type:""},time:"--:--",isPlaying:!1,btnText:"点击播放"},AudioContent.template='\n    <div class="'+style.audio+' audio">\n      <div class="'+style.audioMask+'">\n        <span>{{ btnText }}</span>\n        <ul class="'+style.animation+" {{ '"+style.actived+'\' if isPlaying else \'\' }}">\n          {% if isPlaying %}\n            <li style="background: {{ pageConfig.theme_color }}"/>\n            <li style="background: {{ pageConfig.theme_color }}"/>\n            <li style="background: {{ pageConfig.theme_color }}"/>\n            <li style="background: {{ pageConfig.theme_color }}"/>\n          {% else %}\n            <li/>\n            <li/>\n            <li/>\n            <li/>\n          {% endif %}\n        </ul>\n      </div>\n\n      <audio\n        preload="true"\n        class="'+style.voiceContainer+'"\n        src="{{ voice.resource_url }}"\n      />\n    </div>\n  ',AudioContent}(__webpack_require__(2)["default"]);exports["default"]=AudioContent},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),utils_1=__webpack_require__(9),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),VideoContent=function(_super){function VideoContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(VideoContent,_super),VideoContent.prototype.create=function(){var body=this.data.body;this.data.video=__assign({},body.video,{resource_url:utils_1.prefixUrl(body.video.resource_url)})},VideoContent.prototype.mount=function(){var _this=this;this.useEvents(),this.addEvent("click",".video-model",(function(){stream_1["default"].trigger(config_1.STREAM_LISTEN.IMG_URL,{type:"video",url:_this.data.video.resource_url,isShow:!0})}))},VideoContent.data={video:{description:"",resource_url:"",thumb:"",title:""}},VideoContent.template='\n    <div class="'+style.videoContent+'">\n      <video\n        preload\n        src="{{ video.resource_url }}"\n        class="'+style.video+'"\n      >\n        您的浏览器不支持video标签\n      </video>\n\n      <div class="'+style.model+' video-model video-hover-icon-bg">\n        <div class="'+style.playBox+' play-icon">\n          <img src="https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/8b03e713-d24c-406e-98d9-7e60ea2090af.png"/>\n        </div>\n      </div>\n    </div>\n  ',VideoContent}(component_1["default"]);exports["default"]=VideoContent},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P((function(resolve){resolve(result.value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),request_1=__webpack_require__(53),RichTextContent=function(_super){function RichTextContent(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(RichTextContent,_super),RichTextContent.prototype.create=function(){return __awaiter(this,void 0,void 0,(function(){var body,result;return __generator(this,(function(_a){switch(_a.label){case 0:return body=this.data.body,[4,request_1["default"](body.rich_text.resource_url,{mode:"cors",credentials:"omit"})];case 1:return result=_a.sent(),this.data.richTextHTML=result,[2]}}))}))},RichTextContent.data={richTextHTML:""},RichTextContent.template='\n    <div class="'+style.richTextContent+" {{'"+style.fullContent+"' if fullScreen else '"+style.phoneContent+"' }}\">\n      {{ richTextHTML }}\n    </div>\n  ",RichTextContent}(component_1["default"]);exports["default"]=RichTextContent},function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAAB8BJREFUaAXlW31oVWUY/71386NNs8yvkiALcoYIphHqdJtaupgYhpD2YQgRkfWPJgUakoLgR4gmUkG0Eg0iyTSnZbrpdIguQSRn0AeEOT/TdJpz2+n5nbPjzj33Peee99x7N6sHtnve933e53l+9/163uc8VyFHZE0bVYCmpmK0YhQsDIWSP2CQ/PWWcm9brcIV+eRfo9SdFJ6TyEM9Cgtr1bb6azZPlv+pbMqznhwxAM03Z8NqmwFLPQ5Y3ePJV81Q1iGoxBZ077ZJfXvsbDw5qb2yAtiaOGwCWq03RfxUWFZ+qpoMapRqkd47kadWqj0n9mUgye6aEWCrZGiZSHlXpmNxpoZE6q9QC6UWq+qG6kj8GqZYgK0pw+7F39ZqGc1ZGpm5r1JqM3qq+WrXidOmyowBWyWPlAOtm2VU+5gqyyq/wmUgb5aq+bHKRG7ChNmaUDQfVuv2LgdLo/mFiy22TQYgIo2wVV7eA02/fiBa5hjIDmctngTcuAEcrg3ni9SqKlE45BVVVSUCwyktYKt8ZH9cu75V1uuYcFGGrd8dA7rLqbV7O7B2GXD5kqEAH7tSdSi4Y7qqOnrO15JUDJ3S9sjmAixNIFjS5Arg0x1A2VSnHPc/B0RstW0OkREK2J7G2R5ZnTF39QWWrAGWrgP69tNxRKujrfbSC2YPBOxsBllcs8E2dLRMeEJG+xtgytMddcZP1pywjUy7hu2jh7sxEPiFRLaj153AmBJg9DjxpO8DHnxYvGmpU2lEH9oPrFwMnGuMrMrD2AaVV6E7slIAO05F24mMj57xk4EZzwMjRgP5Mb3Na1eBDauArz/3YIn4yHO6Z2KY3zlJBVxStCkjD2r4SOBVcauHPxrRsghsO78Clr8VgdHHIh6ZqmmY7a1NmldWaVFpbLAJETXvbWD95uyCpbWUHYfE9bUxefomzzXLWuppi/7YS6633GUfk3WaTcpkSrt2OJjGu8VbU9oqKyqRK1612xD5k2DXyxp74KHIXSIxZrZpJavIU6Vqb0MNKztGuA0LkrkilDjVOLLpwJ47Axz4HqirBk79DlyQ+3xVvV7BFbkTrFsO7JJ1my1ysNmA7RG2IxU3mk/J+u34AqIo45qdGeJeE9jH4kxUbZELVmuyxJqG5DJL+3cD7y0BLp5PbcukhkGEHt0HM3LiALTDMoZguRuHgT2wB1i2EOA6TEeXLgJrZPvYa3TTSye1o50DSYyixdn+GIMyJR49QfTlZ8CieeFgW246vXl5ePGp3IF1bWzHqOzo4uWmP40CbnQqlr3vikr+5MgSbFtbcr2/xOvhdQlM1tf5W3JUlsBgn8K78+1Qqml0kR6UjrhmOY3TgWXfWtnEOpUkgiph44QdNzZRTN+Y7qKOuEFFWbO6vp1RJzHyhPjMQ410jS3V+8Y8ergb384kWBPtbwSim8lbj454zvqPHh1fV9bJ2w8eS3z9EZ0GBLDTqcgl5XcD5r4hof7pjpadW+WMXwu4u3003YMI2HnPE60D0G+AnpMeVC6JYJ97uUOD+/zh6o669E+9uYbNAN8TAJg7dC7JHVmvDl2dt93/LFhj3Lssv5jclwsKAd0XHSP+xU2Lryuj04WAKKjOoOhSwzmDZF/5K7yfv1WwcoTNAJ8PmLqD7/eLz145SPYvP5nqsAGbRcnOnNYrGVOqr89GbZDsxj9MpTdy0zpp1Kv+oJ59nPjGeXn6tkxqKZOydXTkgK42uE6wcg2bAT5YLWdfS6rQ/gOBcvNLV6ogXw1lUrafaEOdfaf3twSXBWvCzqkIZkltuSobxbEjqfWsmfs6UNBL3xanlrIoU0e0gbaYkOSPJJhAIlHxZpN+2LJRz87ddNGK+FFGr1SGjygraIcOssErI+lZMArWhJ0twwQSE2Io5vgP+h7jJjrh2rihVUplX4aPKEtH1E0bTEgwEqtIFmK2jCltWBnc45kXnABBnOnNPgwuUEYQhekO6tOO0QEsqUGSLKLZiYJ6S/3xo8AXlcEMHJ2NO4CKmdF2b+7G5GWfoJGlNuqkbhMiNmIUUm4/q6Rom0QtK9xypE9OvRUfpQ/A68K0VMD1SaeC5yyPHt1u7DXksBxDC+UCESWi4u2n1HZ55TKNVR2AmWvV0lbj5Yv0nKtAvF/5bz8Drz0rO7OZY2iLyU+UuDlezpSWWruCeVCmRANoCL/9XBFlxwUrmFywNO8W4HZb34llM0FzqoWt6ViCpRNlUnackaVOSWTzqr41pd1KWcu3x+tSHj3cjU03KBcIPzWvS1MB21l2XfRCnO4iPSg6FabnrBeoDTbiC3HyZj3lYWypk/LAeBhDRK73xCgJr5tn5cLGi8DBanN3UezVUPSUB7dze1LLKrf87/pUC9S+htU6m1OmtJdJQH+S1ew7r/CcPatKAftSkHj/Lp3MJ+l8svA76+VPsu44JdpKm0ModITZL2ephyFGxWrKRuohFdu5iwVDyuSpMpYhndJJbBMb0+VZ2nhM7GnfyOSSmuKwmIjJJq+8k1ULgzYonaK0U9rf6X+VIE7wdjqfZLjRi/F/GZ1Wtn8CIFl2htnwtv2ZGNmeyLZUIp/FmciJ3LerfuThN9DO8XJSg3L3M54EVrm5Vn79JmXjNRwm3Jo0fKC8I571n/+hlu5LuF1/ivcPfOSflTccndcAAAAASUVORK5CYII="},function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA61JREFUWAnNmT1MFEEUx98smMsZKgtMaLXASGyobJBYoI3xI4KFBcZEC1EbLWwUsLFQGiQWFhpKcwRjYqKxMEhjRWMwYqKlh5BoBSiBc/z/hxvubnfu9pMLL1l29u2bN797M7Mz81CSUPTxrgNS2jyN6t24OkTjUrgoWoooF1HiNSctra/U+/nvfBVXVJwKuu9Iu6yvXxdRZ0Xrrjh1Ral5kL+UXG5Cvfu0HLVuJEDde7hN/pVuISq3AdYW1bnTTqkVRPiReC1jaubzitOmShkKqHs6zwHsCcD2V9VLX1RqCaDX1OzCdCNnXr2XWmsFuGF0y1TmcGzU/GA9xTbYVj0O5wvdfzQvy78n8Qv761XMVK+kIO37BlXh4x+/30AEza9pJhyJGAi06YpkAFCOHbrXtMhVh4uQbNsnNV1sJgTHHL4jPrvGjx5+5+CQyKkB2GmR13Dx/DHHWeN6wbeooM5XT5xtEPMp0aVviSbEwCWRoTu1zU08EClM1uqiPHF2q5aD9hNU6WJ+55J+Snr6gk33ngjqomjIQJayGECzQvAjnFTye4M1c/mgLqoGLIYJ9lsR/LtxA9FLvkKsOhaEtdWoOEE7spgl1QIqfSZoFUOz5gJ06GK4NOs97D2zK4m78PsbckXLpfPXa/QMJrJ55S1TI9Pwd64udunCPdVaYDvHMcj9XDrZkS42SN0E3NpkpkF0dadLF7+NDg8f/vSAru506eICgs3DopYe0BUtly4uINgYwdgLZqAdV7RcukDFEAXYOAYXQ8zCX3+dFymVKnYsU5deFtnFPHmlk58/RB7eFfmFsxAvlqlLK2BrhY/0gAR5g6MFr2ylyC6ey9Znpt7mPB6qM3WZpTOweebEbw7VKTy37hG5ii3c9OzWxTJ1aQRMZOMYhODEL9Jlikn+XL4pcvFKpaYtPx2r6GKXDFN5P4h0BFITyfdHJ5mi8YlL5zOp+0gWMkE4ScTkSpiO2C0CFpu/MYCGC7kSRHEpEeNbxzxz6aI4JwNZyrJ9quNz4mMnJwTHoe1Wwj0bF9ncsO1Evdc/dloP5XzMiH1u7l2N4Ew8Wt1mTQT5wqQfejtfYAvRnLyMpWF+ZmbhglKqZvNSGYNlQ2OARA7W6IKtu+N3mzzywbHdQAQtjImkyZXo4UZ21j7hnWNuVD58ue+PnPVXF9AamImzGxOYFtAkcpArwS8dSfUx33bIBYG+kH8Jya6ySmgErV/eTTqCWQge9OOepXcyiV4NacvN+jfEfxzeWjcXGVleAAAAAElFTkSuQmCC"},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(14),component_1=__webpack_require__(2),config_1=__webpack_require__(1),MsgContent_1=__webpack_require__(107),message_data_1=__webpack_require__(54),interfaces_1=__webpack_require__(241),ANSWER_LIST=[{title:"满意",icon:"https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/68e7fdd9-1e93-4993-b668-6dd4554093e0.png",satisfaction:interfaces_1.SATISFACTION_ENUM.THUMB_UP,type:"thumbUp"},{title:"内容不满意",icon:"https://laiye-im-saas.oss-cn-beijing.aliyuncs.com/14ab3428-57ec-460b-b33e-408d399a4e94.png",satisfaction:interfaces_1.SATISFACTION_ENUM.BAD_ANSWER,type:"badAnswer"},{title:"回答不匹配",icon:"https://laiye-im-saas.oss:interfaces_1.SATISFACTION_ENUM.WRONG_ANSWER,type:"wrongAnswer"}],StaffMsg=function(_super){function StaffMsg(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(StaffMsg,_super),StaffMsg.prototype.create=function(){var _a=this.data,pageConfig=_a.pageConfig,msg=_a.msg,Satisfaction=window.appLocale.Satisfaction,MSG_TYPE=msg.msg_type;this.data.avatarShape=config_1.AVATAR_SHAPE[pageConfig.avatar_shape],this.data.chatBar=config_1.CHAT_BAR[pageConfig.chat_bar],this.data.isShowBotAvatat=2!==pageConfig.bot_avatar_chose&&Boolean(pageConfig.bot_avatar),this.data.hasOwnContent="IMAGE"===MSG_TYPE||"FILE"===MSG_TYPE||"SHARELINK"===MSG_TYPE||"VIDEO"===MSG_TYPE,this.data.answerList=ANSWER_LIST.map((function(answer){return __assign({},answer,{title:Satisfaction[answer.type]})})),this.data.reportTxt=Satisfaction.report},StaffMsg.prototype.mount=function(){var _this=this;this.useEvents();var wulai=document.getElementById("websdk-wulai");this.addEvent("click",".survey-btn",(function(evt){if(!_this.data.selectIcon){_this.data.selectId=_this.data.msg.msg_id;var wulaiX=wulai.getBoundingClientRect().left,wulaiY=wulai.getBoundingClientRect().top;_this.data.posRight=evt.clientX-wulaiX>=245,_this.data.posTop=evt.clientY-wulaiY>=338,_this.data.isShowAnswerCard=!_this.data.isShowAnswerCard}})),this.addEvent("click",".evaluate-list",(function(_,node){var selectIdx=parseInt(node.dataset.loopidx,10);_this.data.selectIcon=ANSWER_LIST[selectIdx].icon,_this.data.isShowAnswerCard=!1;var input={bot_id:{knowledge_id:""+_this.data.msg.bot.qa.knowledge_id},satisfaction:ANSWER_LIST[selectIdx].satisfaction,msg_id:_this.data.msg.msg_id,user_id:_this.data.msg.user_id};message_data_1.satisfactionEvaluate(input)})),this.addEvent("click",".websdk-report-btn",(function(){_this.data.selectIcon="https://cdn.wul.ai/weapp/invalid-name%403x.png",_this.data.isShowAnswerCard=!1;var input={bot_id:{knowledge_id:""+_this.data.msg.bot.qa.knowledge_id},satisfaction:interfaces_1.SATISFACTION_ENUM.REPORT,msg_id:_this.data.msg.msg_id,user_id:_this.data.msg.user_id};message_data_1.satisfactionEvaluate(input)}))},StaffMsg.data={avatarShape:"",chatBar:"",hasOwnContent:!1,time:"",isShowBotAvatat:!1,answerList:ANSWER_LIST,isShowAnswerCard:!1,selectIcon:"",posRight:!1,posTop:!1,reportTxt:""},StaffMsg.template='\n  <div class="'+style.msgContent+'">\n    <dl class="'+style.msgContainer+" "+style.staffMsg+'">\n        {% if isShowBotAvatat %}\n          <dt>\n            <div class="'+style.avatar+' {{ avatarShape }}" style="background: {{ pageConfig.theme_color }}">\n              <img src="{{ pageConfig.bot_avatar }}?x-oss-process=image/resize,w_72,h_72/quality,q_80" alt="staff-avatar"/>\n            </div>\n          </dt>\n        {% endif %}\n\n        <dd>\n          <div class="'+style.content+" {{ '"+style.cls+'\' if hasOwnContent else \'\' }} {{ chatBar }} staff-msg-link-color">\n            {% component name="MsgContent",msg=msg,pageConfig=pageConfig,fullScreen=fullScreen %}\n          </div>\n\n          <div class="'+style.hiddenId+'">#{{ msg.msg_id }}</div>\n\n          {% if msg.enable_evaluate or isShowReportBtn %}\n            <div class="'+style.suggest+' survey-btn">\n              {% if selectIcon %}\n                <img src="{{ selectIcon }}"/>\n              {% else %}\n                <span></span>\n              {% endif %}\n\n              {% if isShowAnswerCard %}\n                <ul class="'+style.answerList+" {{ '"+style.alRight+"' if posRight else '' }} {{ '"+style.alTop+'\' if posTop else \'\' }}">\n                  {% if msg.enable_evaluate %}\n                    {% for list in answerList %}\n             }\n        </dd>\n      </dl>\n    </div>\n  ',StaffMsg.components=[MsgContent_1["default"]],StaffMsg}(component_1["default"]);exports["default"]=StaffMsg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var message_type_1=__webpack_require__(242);exports.SATISFACTION_ENUM=message_type_1.SATISFACTION_ENUM},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(SATISFACTION_ENUM){SATISFACTION_ENUM.DEFAULT_SATISFACTION="DEFAULT_SATISFACTION",SATISFACTION_ENUM.THUMB_UP="THUMB_UP",SATISFACTION_ENUM.BAD_ANSWER="BAD_ANSWER",SATISFACTION_ENUM.WRONG_ANSWER="WRONG_ANSWER",SATISFACTION_ENUM.REPORT="REPORT"}(exports.SATISFACTION_ENUM||(exports.SATISFACTION_ENUM={}))},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(105),component_1=__webpack_require__(2),Msg_1=__webpack_require__(106),stream_1=__webpack_require__(6),utils_1=__webpack_require__(9),config_1=__webpack_require__(1),LoadingMsg_1=__webpack_require__(244),RtMsgPanel=function(_super){function RtMsgPanel(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(RtMsgPanel,_super),RtMsgPanel.prototype.create=function(){var Message=window.appLocale.Message;this.data.tips=Message.historyMsgTips},RtMsgPanel.prototype.mount=function(){var _this=this;stream_1["default"].listen(config_1.STREAM_LISTEN.SEND_MSG,(function(msg){_this.data.message=msg})),stream_1["default"].listen(config_1.STREAM_LISTEN.IS_SHOW_RT_TIPS,(function(isShow){_this.data.isShow=isShow}))},RtMsgPanel.prototype.update=function(){var $content=document.getElementById("msg-panel");utils_1.scrollToBottom($content)},RtMsgPanel.prototype._renderPatch=function(items){var _this=this;items.forEach((function(item){var msg=new Msg_1["default"]({data:item});_this.addSub(msg,{sel:"."+style.holder})}))},RtMsgPanel.data={message:[],isShow:!1,tips:""},RtMsgPanel.template='\n      <div class="'+style.holder+'">\n        {% if isLoadHistory and isShow %}\n          <p class="'+style.tips+'">{{ tips }}</p>\n        {% endif %}\n      </div>\n\n      {% for msg in message %}\n        {% component name="Msg",msg=msg,pageConfig=pageConfig,lastMsg=message[loop.index0 - 1],isShowReportBtn=isShowReportBtn,fullScreen=fullScreen %}\n      {% endfor %}\n\n      <component name="LoadingMsg", :pageConfig="pageConfig"/>\n  ',RtMsgPanel.components=[Msg_1["default"],LoadingMsg_1["default"]],RtMsgPanel}(component_1["default"]);exports["default"]=RtMsgPanel},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var msgStyle=__webpack_require__(14),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),LoadingMsg=function(_super){function LoadingMsg(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(LoadingMsg,_super),LoadingMsg.prototype.create=function(){this.data.avatarShape=config_1.AVATAR_SHAPE[this.data.pageConfig.avatar_shape]},LoadingMsg.prototype.mount=function(){var _this=this;stream_1["default"].listen(config_1.STREAM_LISTEN.IS_SHOW_LOADING_MSG,(function(isShow){_this.data.isShowLoading=isShow,setTimeout((function(){_this.data.isShowLoading=!1}),2e3)}))},LoadingMsg.data={avatarShape:"",isShowLoading:!1},LoadingMsg.template='\n    <div>\n      {% if isShowLoading %}\n        <div class="'+msgStyle.msgContent+" "+msgStyle.clearfix+'">\n          <dl class="'+msgStyle.msgContainer+" "+msgStyle.staffMsg+" "+msgStyle.pullLeft+'">\n            {% if pageConfig.bot_avatar %}\n              <dt>\n                <div class="'+msgStyle.avatar+' {{ avatarShape }}" style="background: {{ pageConfig.theme_color }}">\n                  <img src="{{ pageConfig.bot_avatar }}" alt="staff-avatar"/>\n                </div>\n              </dt>\n            {% endif %}\n\n            <dd>\n              <div class="'+msgStyle.content+'">\n                <div class="'+msgStyle.ellipsis+'">\n                  <span style="background: {{ pageConfig.theme_color }}"></span>\n                  <span style="background: {{ pageConfig.theme_color }}"></span>\n                  <span style="background: {{ pageConfig.theme_color }}"></span>\n                  <span style="background: {{ pageConfig.theme_color }}"></span>\n                </div>\n              </div>\n            </dd>\n          </dl>\n        </div>\n      {% endif %}\n    </div>\n  ',LoadingMsg}(component_1["default"]);exports["default"]=LoadingMsg},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(46),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),ErrorHeader=function(_super){function ErrorHeader(){return null!==_super&&_super.apply(this,argume}\n.toastHidden_1dI3I {\n  display: none;\n}\n@media screen and (min-width: 320px) and (max-width: 414px) {\n  .errorHeader_2C9Do {\n    position: fixed;\n    left: 0;\n    top: 64px;\n  }\n  .errorHeader_2C9Do p {\n    margin: 0;\n  }\n  .toast_2VZIH {\n    bottom: 97px;\n  }\n}\n",""]),exports.locals={errorHeader:"errorHeader_2C9Do",largeHeader:"largeHeader_2RKfb",hidden:"hidden_2jtD0",show:"show_2iULN",imgModal:"imgModal_2s1kU",imgContent:"imgContent_2unio",reloadModal:"reloadModal_3Ln5y",msgBox:"msgBox_JgT2U",msgBoxHeader:"msgBoxHeader_2ZFby",msgBoxContent:"msgBoxContent_lMn_F",msgboxMessage:"msgboxMessage_mBiba",msgBoxBtns:"msgBoxBtns_39bP1",toast:"toast_2VZIH",content:"content_2wgaS",websdkMessage:"websdkMessage_1WyAt",toastShow:"toastShow_AVFls",toastHidden:"toastHidden_1dI3I"}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOfnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(46),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),ImgModal=function(_super){function ImgModal(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ImgModal,_super),ImgModal.prototype.mount=function(){var _this=this;this.useEvents(),this.addEvent("click",".img-modal",(function(){_this.data.isShow=!1})),stream_1["default"].listen(config_1.STREAM_LISTEN.IMG_URL,(function(query){_this.data.isShow=query.isShow,_this.data.type=query.type,_this.data.url=query.url}))},ImgModal.data={isShow:!1,url:"",type:""},ImgModal.template='\n    <div class="'+style.imgModal+'">\n      {% if isShow %}\n        <div class="'+style.imgContent+' img-modal">\n          {% if type === \'image\' %}\n            <img src="{{ url }}"/>\n          {% endif %}\n\n          {% if type === \'video\' %}\n            <video\n              autoPlay\n              controls\n              controlsList="nofullscreen"\n              src="{{ url }}"\n              class="'+style.video+'"\n            >\n              您的浏览器不支持video标签\n            </video>\n          {% endif %}\n        </div>\n      {% endif %}\n    </div>\n  ',ImgModal}(component_1["default"]);exports["default"]=ImgModal},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Objectodule",{value:!0});var style=__webpack_require__(46),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),ReLoadModal=function(_super){function ReLoadModal(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ReLoadModal,_super),ReLoadModal.prototype.create=function(){var Tips=window.appLocale.Tips;this.data.title=Tips.alertTitle,this.data.okText=Tips.reload},ReLoadModal.prototype.mount=function(){var _this=this;this.useEvents(),stream_1["default"].listen(config_1.STREAM_LISTEN.RECONNECT_RONGCOULD,(function(_a){var isShowModal=_a.isShowModal,content=_a.content,showBtn=_a.showBtn;_this.data.isShowModal=isShowModal,_this.data.message=content,_this.data.showBtn=showBtn})),this.addEvent("click",".reconnect-btn",(function(){location.reload()}))},ReLoadModal.data={isShowModal:!1,message:"",showBtn:!1,title:"",okText:""},ReLoadModal.template='\n    {% if isShowModal %}\n      <div class="'+style.reloadModal+'">\n        <div class="'+style.msgBox+'">\n          <div class="'+style.msgBoxHeader+'">{{ title }}</div>\n          <div class="'+style.msgBoxContent+'">\n            <div class="'+style.msgboxMessage+'">\n              {{ message }}\n            </div>\n          </div>\n\n          {% if showBtn %}\n            <div class="'+style.msgBoxBtns+' reconnect-btn">{{ okText }}</div>\n          {% endif %}\n        </div>\n      </div>\n    {% endif %}\n  ',ReLoadModal}(component_1["default"]);exports["default"]=ReLoadModal},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(46),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),confiage,setTimeout((function(){_this.data.isShow=!1}),3e3)}))},Toast.data={isShow:!1,title:""},Toast.template='\n    <div class="'+style.toast+" {{ '"+style.toastShow+"' if isShow else '"+style.toastHidden+'\'}}">\n      <div class="'+style.content+'">\n"default"]);exports["default"]=Toast},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&fuion(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var style=__webpack_require__(46),component_1=__webpack_require__(2),stream_1=__webpack_require__(6),config_1=__webpack_require__(1),successPng=__webpack_require__(251),Message=function(_supNWc2qzVkCVJyFNhfK5CU8M8RoxoTYiSWAT3hnhJ5C0Ek53xpRwkHNmHdXJIC3dXhnpDK7kgrubrBvPRUJYF0c/cU4Pq5C2nmhC5pjFmayR6YZao4ALuQ4vJTIs9SKSMzitDfAcI4C+ILeEcGehXwS2nfp3RnmtL4DfOKUeLdGzsjDNPeLeM8As9xtSrW8yVryCZgV2ADvjEQ7Oqlt1lVe8Mzo+QRMIYt6o9sUwcdF+1eDQhGcX7R/9rAL4fOF/LvN/9AVOC7NUHBeAAAAAElFTkSuQmCC"},function(module,exports,__webpack_require__){var map={"./en":112,"./en.ts":112,"./zh-CN":113,"./zh-CN.ts":113};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=252}])["default"];