/*
*   Copyright 2023, T-Mobile
*   Package Name: tag-manager-0.0.1
*   Commit Hash: e929c6272b1d21527f1a8c32a12cbeecafbb5c2f
*   Build Date: Thu, 24 Aug 2023 17:45:50 GMT
*/
!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},a={},s={}.hasOwnProperty,n=/^\.\.?(\/|$)/,o=function(e,t){for(var r,a=[],s=(n.test(t)?e+"/"+t:t).split("/"),o=0,i=s.length;o<i;o++){r=s[o];".."===r?a.pop():"."!==r&&""!==r&&a.push(r)}return a.join("/")},i=T=function(t){return function(r){var a=o(i(t),r);return e.require(a,t)}},g=function(e,t){var a=A&&A.createHot(e),s={id:e,exports:{},hot:a};r[e]=s;t(s.exports,T(e),s);return s.exports},u=function(e){var t=a[e];return t&&e!==t?u(t):e},E=c=function(e,a){null==a&&(a="/");var n=u(e);if(s.call(r,n))return r[n].exports;if(s.call(t,n))return g(n,t[n]);throw new Error("Cannot find module '"+e+"' from '"+a+"'")};c.alias=var _=/\.[^.\/]+$/,M=/\/index(\.[^\/]+)?$/,l=function(e){if(_.test(e)){var t=e.replace(_,"");s.call(a,t)&&a[t].replace(_,"")!==t+"/index"||(a[t]=e)}if(M.test(e)){var r=e.replace(M,"");s.call(a,r)||(a[r]=e)}};c.register=c.define=function(e,a){if(e&&"object"==typeof e)for(var n in e)s.call(e,n)&&c.register(n,e[n]);else{t[e]=a;delete r[e];l(e)}};c.list=function(){var e=[];for(var r in t)s.call(t,r)&&e.push(r);return e};var A=e._hmr&&new e._hmr(E,c,t,r);c._cache=r;c.hmr=A&&A.wrap;c.brunch=!0;e.require=c}}();require.register("common/Constants",function(e){"use strict";var t;!t=e.logMessages||(e.logMessages={}));var r;!r=e.errorMessages||(e.errorMessages={}));var a;!a=e.launchDataElements||(e.launchDataElements={}));var s;!function(e){e[e.TM_COLON="::"]="TM_COLON";e[e.TM_UNDERSCORE="_"]="TM_UNDERSCORE"}(s=e.characters||(e.characters={}));var n;!function(e){e[e.TM_TARGETPAGELOAD="TargetPageLoad"]="TM_TARGETPAGELOAD";e[e.TM_EXECUTED="MT_TM_Executed"]="TM_EXECUTED";e[e.TM_CDLPAGELOADEVENT="cdlPageLoadEvent"]="TM_CDLPAGELOADEVENT"}(n=e.customEvents||(e.customEvents={}));var o;!o=e.datalayerProps||(e.datalayerProps={}));var i;!function(e){e[e.TM_UNDEFINED="undefined"]="TM_UNDEFINED"}(i=e.typeChecking||(e.typeChecking={}));var T;!T=e.miscellaneous||(e.miscellaneous={}));e.regexPattern={TM_ES:/hola/,TM_FORMAT_STRING:/{(\d+)}/g};var g;!g=e.environments||(e.environments={}));var u;!u=e.storageValues||(e.storageValues={}));e.KEY_IMG_CONSUMER="img";e.KEY_SCR_CONSUMER="scr";e.KEY_IMAGE_CONSUMER="IMG";e.KEY_SCRIPT_CONSUMER="SCRIPT";e.KPI="KPI";e.TAGANALYTICS="tagAnalytics";e.SATELLITE="_satellite";e.DATALAYERNAME="digitalData";e.HELPER="__helper";e.PHOENIX="phoenix";e.CALLTYPE="callType"});require.register("common/Logger",function(e){"use strict";function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.logd.apply(n,e)}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.loge.apply(n,e)}r n=a("TAG_MGR"),o=_satellite.getVar("globalHelper").isLogsOn;e.debug=t;e.error=r;e.getLogger=a;e.shouldLog=s});require.register("common/commonConfig",function(e){"use strict";e.commonConfig={timeDelay:1500,excludePageList:["Error : Error : 404 Error Page",""],killSwitch:!1,initiatorEvent:"cdlPageLoadEvent",param:"tm"}});require.register("common/typedefs",function(){"use strict"});require.register("config/BaseTagManagerConfig",function(e,t){"use strict";var r=t("../common/Constants"),a=function(){function e(){this.consumers={};this.releaseVersion=this.majorVersion+"."+this.minorVersion+"."+this.subMinorVersion;this.initConsumers()}e.prototype.getAllConsumers=e.prototype.getConsumerByKey=e.prototype.getImageConsumer=function(){return this.consumers[r.KEY_IMG_CONSUMER]};e.prototype.getScriptConsumer=return e}();e.BaseTagManagerConfig=a});require.register("config/TMO/TMOTagConfig",function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=t("../BaseTagManagerConfig"),s=t("../../common/Constants"),n=t("../../consumer/TMO/TMOScriptConsumer"),o=t("../../consumer/TMO/TMOImageConsumer"),i=function(e){function t(){var t=e.call(this)||this;t.majorVersion=1;t.minorVersion=0;t.subMinorVersion=0;return t}r(t,e);t.prototype.initConsumers=function(){this.consumers[s.KEY_IMG_CONSUMER]=new o.TMOImageConsumer;this.consumers[s.KEY_SCR_CONSUMER]=new n.TMOScriptConsumer};return t}(a.BaseTagManagerConfig);e.TMOTagConfig=i});require.register("config/TagManagerConfig",function(){"use strict"});require.register("consumer/Consumer",;require.register("consumer/ConsumerBase",function(e){"use strict";var t=function(){function e(){}e.prototype.getCombinedSrcAndParamString=function(e,t,r,a){var s=this.getURLParams(t),n=this.substituteSrcParams(e,a,s);return n?n:a};e.prototype.substituteSrcParams=function(e,t,r){t.match(/[{}]/g)&&t.replace(/{(.*?)}/g,function(e,a){if(r[a])if("append"===a){var s=new RegExp(a+":[^/]+");t=t.replace(s,r[a])}else t=t.replace(e,r[a]);else{var s=new RegExp("/"+a+":[^/]+");t=t.replace(s,"")}delete r[a];return t});return t+this.formatURLparams(e,r)};e.prototype.formatURLparams=function(e,t){var r="";if("SCRIPT"===e)return r;if(!t.length)for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){r+=r?"&":"?";r+=a+"="+t[a]}return r};e.prototype.getURLParams=function(e){var t=[];if(e.PARAMS){t=e.PARAMS;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))if("null"===t[r]||""===t[r]||"undefined"===t[r])delete t[r];else if(t[r].includes("{{")){var a=this.getValueFromDataElement(t[r].slice(2,-2));t[r]=encodeURIComponent(a)}else if(t[r].includes("%c%")){var s=t[r].replace(/^%c%+|%c%+$/g,"");t[r]=window._satellite.cookie.get(s)}}return t};e.prototype.getValueFromDataElement=return e}();e.ConsumerBase=t});require.register("consumer/TMO/TMOImageConsumer",function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=t("../base/ImageConsumer"),s=function(e){function t(){return e.call(this)||this}r(t,e);return t}(a.ImageConsumer);e.TMOImageConsumer=s});require.register("consumer/TMO/TMOScriptConsumer",function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=t("../base/ScriptConsumer"),s=a.ScriptConsumer);e.TMOScriptConsumer=s});require.register("consumer/base/ImageConsumer",function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=t("../ConsumerBase"),s=function(e){function t(){return e.call(this)||this}r(t,e);t.prototype.createDOMElement=function(e){var t=document.createElement("IMG");t.setAttribute("src",e);t.setAttribute("class","mediatag");t.setAttribute("width","1");t.setAttribute("height","1");t.setAttribute("style","border-style:none;display:none;");t.setAttribute("alt","");document.getElementsByTagName("body")[0].appendChild(t)};return t}(a.ConsumerBase);e.ImageConsumer=s});require.register("consumer/base/ImageWebWorkerConsumer",function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=t("../ConsumerBase"),s=t("../../common/Logger"),n=function(e){(t,e);t.prototype.createDOMElement=function(e){s.debug("Pushing request to web worker :: ",e);window.__worker?window.__worker.postMessage([{command:"PROCESS_IMG_TAG",data:{url:e,referrerUrl:window.location.href,doLogging:s.shouldLog()}}]):s.debug("Error in pushing request to web worker :: ")};return t}(a.ConsumerBase);e.ImageWebWorkerConsumer=n});require.register("consumer/base/ScriptConsumer",function(e,t){"use strict";var r=this&&this.__extends||a=t("../ConsumerBase"),s=function(e){(t,e);t.prototype.createDOMElement=function(e,t,r){var a=document.createElement("script");a.setAttribute("src",e);a.setAttribute("id",r);a.id=r;"undefined"!=typeof t&&a.setAttribute("charset",t);document.getElementsByTagName("head")[0].appendChild(a)};return t}(a.ConsumerBase);e.ScriptConsumer=s});require.register("consumer/index",function(e,t){"use strict";(t("./consumer"))});require.register("tag-manager-impl",function(e,t){"use strict";var r=t("./common/Logger"),a=t("./common/Constants"),s=t("./common/commonConfig"),n=function(){function e(e){this._satellite=window[a.SATELLITE];this.getDataLayer=window[a.DATALAYERNAME];this.isPhoenix=window[a.PHOENIX];this.helper=window[a.HELPER];r.debug(a.logMessages.TM_START);this.config=e;this.isStaging=this._satellite.environment.stage!==a.environments.TM_PROD_ENV;this.isProduction=this._satellite.environment.stage===a.environments.TM_PROD_ENV}e.prototype.start=function(){this.getTMConfig=this._satellite&&this._satellite.getVar(a.launchDataElements.TM_CONFIG)||s.commonConfig;r.debug(this.formatData(a.logMessages.TM_RUN,this.getTMConfig[a.miscellaneous.TM_BRANDKEY]));if(this.triggerTM())if(this.isPhoenix)if(window[a.customEvents.TM_CDLPAGELOADEVENT]){r.debug(this.formatData(a.logMessages.TM_PHOENIX_LISTENER,a.customEvents.TM_CDLPAGELOADEVENT));this.executeTagManager()}else addEventListener(a.customEvents.TM_CDLPAGELOADEVENT,bind(this));else{this.executeTagManager();addEventListener(a.customEvents.TM_TARGETPAGELOAD,bind(this))}};e.prototype.triggerTM=function(){var e=new URLSearchParams(window.location.search);this.tmFlag=e.get(this.getTMConfig[a.miscellaneous.TM_PARAM]);if(this.isProduction&&this.tmFlag===a.miscellaneous.TM_EXECUTE_NO||this.isStaging&&this.tmFlag!==a.miscellaneous.TM_EXECUTE_YES){r.debug(this.formatData(a.logMessages.TM_EXEC_DISABLED,this.tmFlag,this._satellite.environment.stage));return!1}return!0};e.getInstance=e.prototype.getMediaDataElements=function(){if(this._satellite.getVar(a.launchDataElements.TM_MEDIADATAELEMENTS))return this._satellite.getVar(a.launchDataElements.TM_MEDIADATAELEMENTS).getMediaDataValues();var e={pageName:this.getPageName(),lang:a.regexPattern.TM_ES.test(location.href)?a.miscellaneous.TM_ES_LANG:a.miscellaneous.TM_EN_LANG};this.getDataLayer&&this.getDataLayer[a.datalayerProps.TM_INTERNAL]&&(e[a.datalayerProps.TM_CALLTYPE]=this.getDataLayer[a.datalayerProps.TM_INTERNAL].callType);return e};e.prototype.dntVal=function(){try{if(this._satellite)return Boolean(Number(this._satellite.cookie.get(a.storageValues.TM_DO_NOT_TRACK)))}catch(e){this.pushMessage("Error in dntVal: "+e)}};e.prototype.executeTagManager=function(){try{this.getMediaDataValues=this.getMediaDataElements();this.dntFlag=this.dntVal();this.pageNameValue=this.getMediaDataValues.pageName||this.getPageName();this.pageLang=this.getMediaDataValues.lang;this.prop=this._satellite.property.name;this.callType=this.getMediaDataValues.callType;if(this.isPhoenix&&this.callType===a.miscellaneous.TM_TRACK_MODAL){this.pushMessage(this.formatData(a.logMessages.TM_SKIP_ALLTAGS,this.callType,this.pageNameValue));return}if(0===this.pageNameValue.length||this.getTMConfig[a.miscellaneous.TM_EXCLUDE_PAGELIST].indexOf(this.pageNameValue)>-1){this.pushMessage(this.formatData(a.logMessages.TM_SKIPPED_PAGE,this.pageNameValue?this.pageNameValue:location.href));return}window[a.TAGANALYTICS]={pageName:this.pageNameValue,tags:{},tagLen:0,dnt:this.dntFlag,et1:0,prop:this.prop,language:this.pageLang,message:[],pageUrl:window.location.href,tagEnv:this._satellite.environment.stage};this.dntFlag&&r.debug(a.logMessages.TM_SUPPRESSED);r.debug(this.formatData(a.logMessages.TM_START,a.logMessages.TM_PROCESS,a.logMessages.TM_DNT_MESSAGE));var e=performance.now();this.definedPixelSrc=this._satellite.getVar(a.launchDataElements.TM_PIXELSRC_MAP);this.processCustomEventTags();this.processTags(this.pageLang);var t=performance.now();r.debug(a.logMessages.TM_ELAPSED_TIME,window[a.TAGANALYTICS].et1=Math.round(t-e));r.debug(a.logMessages.TM_FIRED_TAGS,window[a.TAGANALYTICS]);if(this.helper){this.helper.triggerEvent(a.customEvents.TM_EXECUTED,JSON.stringify(window[a.TAGANALYTICS]));window[a.TAGANALYTICS].TM_Executed=!0}}catch(s){this.pushMessage(a.errorMessages.TM_ERROR_EXECUTETM+s)}};e.prototype.formatData=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.replace(a.regexPattern.TM_FORMAT_STRING,function(e,r){return typeof t[r]!=a.typeChecking.TM_UNDEFINED?t[r]:e})};e.prototype.getPageName=function(){try{var e="",t=this.getDataLayer||{};e=t[a.datalayerProps.TM_PAGE]&&t[a.datalayerProps.TM_PAGE].pageInfo&&t[a.datalayerProps.TM_PAGE].pageInfo.pageName?t[a.datalayerProps.TM_PAGE].pageInfo.pageName:t[a.datalayerProps.TM_PAGE]&&t[a.datalayerProps.TM_PAGE].siteName?t[a.datalayerProps.TM_PAGE].siteName+" | "+(t[a.datalayerProps.TM_PAGE].compoundName||""):document.title;return e}catch(s){r.debug(a.errorMessages.TM_ERROR_PAGENAME,s)}};e.prototype.processTags=function(e){try{for(var t=[a.miscellaneous.TM_ALL_ALL+a.characters.TM_UNDERSCORE+a.miscellaneous.TM_ALL_ALL,e+a.characters.TM_UNDERSCORE+a.miscellaneous.TM_ALL_ALL],r=0;r<t.length;r++){var s=this.findApplicableTags(t[r],this.definedPixelSrc);if(0===s.length)return}}catch(n){this.pushMessage(a.errorMessages.TM_ERROR_PROCCESSTAGS+n)}};e.prototype.findApplicableTags=function(e,t){r.debug(this.formatData(a.logMessages.TM_PROCESSING_TAGS,e));var s,n=this._satellite.getVar(a.miscellaneous.TM+a.characters.TM_UNDERSCORE+e);if(void 0===n||!n[e]||0===n[e].length){r.debug(this.formatData(a.logMessages.TM_NO_TAGS,e));return[]}for(var o=0;o<n[e].length;o++)if(!n[e][o].KPI){s=n[e][o];this.processApplicableTags(s,t)}r.debug(this.formatData(a.logMessages.TM_APPLICABLE_TAGS,n[e].length));return s};e.prototype.processCustomEventTags=function(){try{this.tmCustomEvents=this._satellite.getVar(a.launchDataElements.TM_CUSTOM_EVENTS);if(this.tmCustomEvents)for(var e in this.tmCustomEvents)addEventListener(e,this)}catch(t){r.debug(this.formatData(a.logMessages.TM_PROCESSING_TAGS,a.KPI))}};e.prototype.handleEvent=function(e){var t=[];for(var r in this.tmCustomEvents[e.type].TAGS)t.push(r);this.preprocessEnabledTags(this.tmCustomEvents[e.type].TAGS,t,this.definedPixelSrc)};e.prototype.processApplicableTags=function(e,t){try{var s=e,n=s.TAGS;if(!s.PAGENAME||s.PAGENAME.test(this.pageNameValue)){r.debug(this.formatData(a.logMessages.TM_PROCESSING_TAGS,s.PAGENAME||a.miscellaneous.TM_NOPAGE_CONDITION));var o=Object.keys(n);r.debug(this.formatData(a.logMessages.TM_PROCESS_APPLICABLETAGS,s.PAGENAME||"Global",o.join(",")));this.preprocessEnabledTags(n,o,t)}}catch(i){this.pushMessage(a.errorMessages.TM_ERROR_PROCESSAPPLICABLETAGS+i)}};e.prototype.preprocessEnabledTags=function(e,t,r){try{for(var s=0;s<t.length;s++){var n=t[s];this.dntVal()&&2===r[n].ENABLE?this.pushMessage(r[n].NAME,a.logMessages.TM_DNT_MESSAGE):this.processEnabledTags(e[n],n,r[n])}}catch(o){this.pushMessage(this.formatData(a.errorMessages.TM_ERROR_PREPROCESSENABLEDTAGS,o))}};e.prototype.processEnabledTags=function(e,t,s){try{var n=e.INSTANCES,o=s.SRC,i=s.TYPE;if(!n||0===n.length){r.debug(this.formatData(a.logMessages.TM_NO_TAGS,t));return}for(var T=this.config.getImageConsumer(),g=this.config.getScriptConsumer(),u=0;u<n.length;u++){var E=void 0,c=n[u],_="";if(this.checkForPreConditions(c)){try{if(o)for(var M=0;M<o.length;M++)if(i===a.KEY_IMAGE_CONSUMER){_=T.getCombinedSrcAndParamString(i,c,t,o[M]);T.createDOMElement(_)}if(i.indexOf(a.KEY_SCRIPT_CONSUMER)>-1&&s.FUNC){var l=g.getURLParams(c);s.FUNC(l)}r.debug(this.formatData(a.logMessages.TM_TAGS_ADDED,t,c.TID))}catch(A){E=A;r.debug(this.formatData(a.errorMessages.TM_ERROR_TAG,c.TID,A))}window[a.TAGANALYTICS].tags[t]||(window[a.TAGANALYTICS].tags[t]=[]);this.tagAnalyticsArray(n[u].TID,_,t,E);window[a.TAGANALYTICS].tagLen+=1}else r.debug(this.formatData(a.errorMessages.TM_ERROR_PRECONDITION,c.TID))}}catch(A){this.pushMessage(this.formatData(a.errorMessages.TM_ERROR_PROCESSAPPLICABLETAGS,A))}};e.prototype.tagAnalyticsArray=function(e,t,r,s){var n={TID:e,tagURL:t||a.KEY_SCRIPT_CONSUMER};window[a.TAGANALYTICS].tags[r].push(n);if(s){n[a.miscellaneous.TM_MESSAGE]=s;window[a.TAGANALYTICS].tags[r].push(n)}};e.prototype.checkForPreConditions=function(e){return!(e.ADDL_CONDN&&!e.ADDL_CONDN(e,window.location.href))};e.prototype.pushMessage=function(e,t){try{r.debug(e);t||window[a.TAGANALYTICS].message.push(e);return e}catch(s){}};return e}();e.TagManagerImpl=n});require.register("tmo-tag-manager",function(e,t){"use strict";var r=t("./config/TMO/TMOTagConfig"),a=t("./tag-manager-impl"),s=function(){.prototype.run=function(){this.config=new r.TMOTagConfig;this.tagManagerInstance=a.TagManagerImpl.getInstance(this.config);this.tagManagerInstance.start()};return e}();e.TMOTagManager=s;var n=new s;n.run()});require("tmo-tag-manager");